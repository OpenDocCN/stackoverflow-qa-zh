# StackOverflow 问答 10487000-10487999

# sql - 从不同服务器上的视图中获取 SQL Server 值

> ID：10487000
> 
> 赞同：0
> 
> 时间：2012-05-07T18:16:22.870
> 
> 标签：sql, sql-server-2005

我可以访问 Server1 上名为 (vw_table) 的视图。我想从此视图（几百万条记录）中获取数据到 server2 上的表中。

我试过

```
SELECT * INTO ##TempTable
FROM VW_Table 
```

这会将数据放入##TempTable。

现在如何将它移动到不同的服务器（server2）和不同的数据库？

我希望 Server2 中的 Table2 具有来自 VW_table 的数据。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:52:52.650

您不能像这样直接访问另一台服务器。你必须选择解决你的问题：

*   在 server1 上配置[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279%28v=sql.90%29.aspx)以访问 server2，然后执行以下操作：`select * from mylinkedserver..table`
*   创建一个[SSIS](http://msdn.microsoft.com/en-us/library/ms141026%28v=sql.90%29.aspx)包以从 server1 读取数据并在 server2 上插入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:49:34.653

就像**Lemak**说的，你不能像这样传递临时表。您需要有一个[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279%28v=sql.90%29.aspx)并将数据直接复制到表中，或者您需要导出数据并使用 SSIS 将其导入表中。

# javascript - Google Maps API (v3) 添加/更新标记

> ID：10487003
> 
> 赞同：4
> 
> 时间：2012-05-07T18:16:25.857
> 
> 标签：javascript, google-maps, google-maps-api-3

**编辑：它现在可以工作，但如果用户不允许或没有基于位置的服务，则不会加载。请参阅 jsfiddle 示例的已接受答案评论。**

我浏览了一些教程和问题，但我无法安静地理解正在发生的事情（或者在这种情况下，没有发生）。当用户单击链接时，我正在加载我的地​​图。这会加载地图，其中用户当前位置位于中心，标记位于用户位置。但是，`if (navigation.location)`似乎没有加载外部的任何标记。以下是我当前的代码：

```
function initialize() {
        // Check if user support geo-location
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var point = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                var userLat = position.coords.latitude;
                var userLong = position.coords.longitude;
                var mapOptions = {
                    zoom: 8,
                    center: point,
                    mapTypeId: google.maps.MapTypeId.HYBRID
                }

            // Initialize the Google Maps API v3
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            // Place a marker
            new google.maps.Marker({
                position: point,
                map: map,
                title: 'Your GPS Location'
            });
        });
    } else {
        var userLat = 53;
        var userLong = 0;
        var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(userLat, userLong),
            mapTypeId: google.maps.MapTypeId.HYBRID
        }
        // Place a marker
        new google.maps.Marker({
            position: point,
            map: map,
            title: 'Default Location'
        });
        // Initialize the Google Maps API v3
        var map = new google.maps.Map(document.getElementById("map"), mapOptions);
    }
    <?
    for ($i = 0; $i < sizeof($userLocations); $i++) {
        ?>
        var userLatLong = new google.maps.LatLng(<? echo $userLocations[$i]['lat']; ?>, <? echo $userLocations[$i]['long']; ?>);
        new google.maps.Marker({
            position: userLatLong,
            map: map,
            title:"<? echo $userLocations[$i]['displayName'] . ', ' . $userLocations[$i]['usertype']; ?>"
        });
        <?
    }
    ?>
}

function loadMapScript() {
    if (typeof(loaded) == "undefined") {
        $("#showMap").css("display", "none");
        $("#showMapLink").removeAttr("href");
        $("#map").css("height", "600px");
        $("#map").css("width", "600px");
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?key=MY_API_KEY&sensor=true&callback=initialize";
        document.body.appendChild(script);
        loaded = true;
    } else {
        alert("Map already loaded!");
    }
} 
```

loadMapScript() 在用户点击链接时被调用。php for 循环遍历包含所有信息的预先创建的数组。
我猜我并不完全理解它，就像我说的那样：

```
var userLatLong = new google.maps.LatLng(53, 0);
            new google.maps.Marker({
                position: userLatLong,
                map: map,
                title:"Title"
            }); 
```

进入控制台（谷歌浏览器），我得到错误：

```
Error: Invalid value for property <map>: [object HTMLDivElement] 
```

但是，否则我不会收到任何错误。任何帮助将非常感激！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T19:00:57.433

`navigator.geolocation.getCurrentPosition()` is asynchronous.

Reorganize your code like this:

```
var mapOptions = {
    zoom: 8,
    mapTypeId: google.maps.MapTypeId.HYBRID
}

function initialize() {
    // Check if user support geo-location
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            makeMap(position.coords.latitude, position.coords.longitude, 'Your GPS Location');
        });
    } else {
        makeMap(53, 0, 'DefaultLocation');
    }
}

function makeMap(lat, lng, text) {
    var point = new google.maps.LatLng(lat, lng);
    mapOptions.center = point;
    map = new google.maps.Map(document.getElementById("map"), mapOptions);
    new google.maps.Marker({
        position: point,
        map: map,
        title: text
    });
    <?php for ($i = 0; $i < sizeof($userLocations); $i++): ?>
    var userLatLong = new google.maps.LatLng(<? echo $userLocations[$i]['lat']; ?>, <? echo $userLocations[$i]['long']; ?>);
    new google.maps.Marker({
        position: userLatLong,
        map: map,
        title:"<? echo $userLocations[$i]['displayName'] . ', ' . $userLocations[$i]['usertype']; ?>"
    });
    <?php endforeach ?>
} 
```

Also, consider bootstraping the $userLocations into a JavaScript variable like this:

```
var userLocations = <?php print json_encode($userLocations) ?>; 
```

Then execute your for loop in JavaScript, instead of mixing languages.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:06:34.213

你有没有尝试过：

```
var map = null;
function initialize() { ... } 
```

然后更改里面的代码：

```
map = new google.maps.Map( ... ); //make this the first line
if (navigator.geolocation) {
    // Change the code from:
    var map ...
    // to:
    map ... 
```

`var`您只需在其他任何地方直接引用地图（没有），这样应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:21:51.243

改变：

```
 var map = new google.maps.Map(document.getElementById("map"), mapOptions); 
```

至：

```
map = new google.maps.Map(document.getElementById("map"), mapOptions); 
```

因为`var`，您的 map 变量与`initialize()`. 删除它会将其设置为全局映射变量（或`window.map`），使其在`initialize()`函数之外可用。

发生的事情是您有一个 HTML 元素`<div id="map">`。在许多浏览器中，全局变量是从 html 元素 ID 创建的，因此`map`equals `document.getElementById('map')`。

* * *

**编辑：**实际上，这只解释了您在 Chrome 控制台中的问题。您需要`map`在尝试将标记附加到它之前进行设置，就像在`if (navigator.geolocation) {}`. 这也解释了为什么没有放置任何用户位置标记。放置它们的代码**在** `initialize()`. 将此代码放在`initialize`它自己的函数内或内，然后从`initialize`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T18:24:31.227

看起来您正在创建标记，但没有对它做任何事情。尝试将您的新标记更改为如下所示：

```
var marker = new google.maps.Marker({
               position: point,  // this won't actually work - point is out of scope
               title: 'Your GPS Location'
           });

marker.setMap(map); 
```

编辑：确保点在地图内！

```
var bounds = new google.maps.LatLngBounds();
bounds.extend(point);
map.fitBounds(bounds); 
```

# php - codeigniter 贝宝。不会在 iframe 中重定向到贝宝

> ID：10487007
> 
> 赞同：0
> 
> 时间：2012-05-07T18:16:49.040
> 
> 标签：php, codeigniter, iframe, paypal

我正在使用 codeigniter 来集成 paypal 数字商品支付。在我点击“paypal pay”后，它应该要求用户在 paypal **iframe**中登录/注册，但我的会将用户重定向到沙箱链接。用户点击“登录”后，会弹出 iframe。

现在是这样的：![在此处输入图像描述](../Images/f314a736517d5865c44b33ff4f23015d.png)

我想要在用户点击“paypal 付款”后立即获得 iframe，如下所示： ![在此处输入图像描述](../Images/3c3d3f24c6b9f1d95c8c09eb04f45dae.png) .. 如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:01:36.170

帧的来源是否使用 SSL，例如 HTTPS？如果是这样，除非在最不安全的浏览器中，否则将框架包含到非 SSL 页面中将不起作用。我什至不确定它是否可以在完全 SSL 设置下工作，因为它是使用 JS 窃取登录等的完美方式。

从客户的角度来看，我希望完全定向到 PayPal，因为我比您的网站更信任他们。

# c# - MVC C# 临时数据

> ID：10487008
> 
> 赞同：20
> 
> 时间：2012-05-07T18:16:50.310
> 
> 标签：c#, asp.net-mvc, tempdata

有人可以解释一下 MVC 中 TempData 的用途吗？我知道它的行为类似于 ViewBag，但除此之外它还能做什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T19:32:19.690

> TempData 是一个非常短暂的实例，您应该只在当前和后续请求期间使用它！由于 TempData 以这种方式工作，您需要确定下一个请求将是什么，并且重定向到另一个视图是您唯一可以保证这一点的时间。因此，使用 TempData 可靠工作的唯一情况是在重定向时。这是因为重定向会终止当前请求（并将 HTTP 状态代码 302 Object Moved 发送到客户端），然后在服务器上创建一个新请求以提供重定向视图。回顾之前的 HomeController 代码示例意味着 TempData 对象可能会产生与预期不同的结果，因为无法保证下一个请求来源。例如，

[http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T16:46:42.680

**查看包**

允许您创建动态属性

在控制器和视图之间传递数据

***控制器***

`ViewBag.Name= "Lion";`

***看法***

```
<div>
  <h4>@ViewBag.Name</h4>
 </div> 
```

**临时数据**

TempData 是一个非常短暂的实例

您应该只在当前和后续请求期间使用它

TempData 字典用于在控制器动作之间共享数据

```
TempData["Name"] = "Lion"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-20T09:55:29.543

TempData 是一个字典对象，它派生自 TempDataDictionary 类并存储在短期会话中。

```
public TempDataDictionary TempData { get; set; } 
```

它是ControllerBase 类的一个属性。它用于将数据从当前请求传递到后续请求（意味着从一个页面重定向到另一个页面）。它的生命很短，直到目标视图完全加载。获取数据和检查空值以避免错误需要进行类型转换。它仅用于存储一次性消息，如错误消息、验证消息。

# java - 简单的 Android onTouch 事件

> ID：10487010
> 
> 赞同：1
> 
> 时间：2012-05-07T18:17:01.047
> 
> 标签：java, android, android-animation

我开始使用 android 应用程序编程。我无法检测到任何触摸事件。一直在尝试这样的事情：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageView view = (ImageView)findViewById(R.id.imageView1);

    view.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            System.out.println("This works?");
            ImageView aniView = (ImageView)findViewById(R.id.imageView1);
            helpAnimate(aniView, 0);
            return true;
        }
    });
} 
```

我似乎`onTouch`根本没有使用这种方法。如果有人可以通过简短的教程帮助我让任何东西出现在Touch上，我应该可以从那里开始。

提前谢谢。

# datetime - 在 PowerShell 中创建具有特定 UTC DateTime 的 DateTime 对象

> ID：10487011
> 
> 赞同：40
> 
> 时间：2012-05-07T18:17:02.890
> 
> 标签：datetime, powershell, utc

我正在尝试`DateTime`在 PowerShell 中创建一个具有特定 UTC 时间戳的对象。最简单的方法是什么？

我试过了：

```
Get-Date
    -Format (Get-Culture).DateTimeFormat.UniversalSortableDateTimePattern
    -Date "1970-01-01 00:00:00Z" 
```

但我得到这个输出：

```
1969-12-31 19:00:00Z 
```

休息几个小时。我的理解失误在哪里？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-07T18:20:48.100

`DateTime`对象本身是使用正确的 UTC 时间创建的。但是当 PowerShell 将其打印出来时，它会将其转换为我当地的文化和时区，从而产生差异。

证明：

```
$UtcTime = Get-Date -Date "1970-01-01 00:00:00Z"
$UtcTime.ToUniversalTime() 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-09-11T19:10:29.327

```
(get-date).ToUniversalTime().ToString("yyyyMMddTHHmmssfffffffZ") 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-26T08:06:45.393

```
$utctime = New-Object DateTime 1970, 1, 1, 0, 0, 0, ([DateTimeKind]::Utc) 
```

如果你打印出来`$utctime`，那么你会得到：

```
1\. januar 1970 00:00:00 
```

此外，`$utctime.Kind`正确设置为`Utc`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-09-28T18:44:44.523

```
$time = [DateTime]::UtcNow | get-date -Format "yyyy-MM-ddTHH:mm:ssZ" 
```

这似乎也有效

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-19T15:39:38.383

您可以使用 SpecifyKind 方法：

PS C:\IT\s3> $时间戳

2018 年 7 月 18 日星期三晚上 7:57:14

PS C:\IT\s3> $timestamp.kind

未指定

PS C:\IT\s3> $utctimestamp = [DateTime]::SpecifyKind($timestamp,[DateTimeKind]::Utc)

PS C:\IT\s3> $utctimestamp

2018 年 7 月 18 日星期三晚上 7:57:14

PS C:\IT\s3> $utctimestamp.kind

世界标准时间

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T20:46:34.467

这就是它在 .NET 中的工作方式，对吧？PowerShell 只调用 ToUniversalTime 方法。来自[http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)

```
The Coordinated Universal Time (UTC) is equal to the local time minus the 
UTC offset. For more information about the UTC offset, see TimeZone.GetUtcOffset.
The conversion also takes into account the daylight saving time rule that applies 
to the time represented by the current DateTime object. 
```

# java - 使用其他字段值的 bean 字段的自定义验证器

> ID：10487012
> 
> 赞同：0
> 
> 时间：2012-05-07T18:17:04.100
> 
> 标签：java, bean-validation, hibernate-validator

不确定这是否可能。想知道我是否可以为 bean 的字段创建一个自定义约束，它将使用同一类对象的其他字段的值。我尝试使用下面的代码来实现它：

```
public final class AWRRecordObject extends DoaAbstract implements
        java.io.Serializable {
    private static final long serialVersionUID = 1L;

    @ValidateApplicationType
    private String applicationType;

    private String recordData;

    private String programSource;

    // ...
}

public class ApplicationTypeValidator implements
        ConstraintValidator<ValidateApplicationType, AWRRecordObject> {

    private Class<AWRRecordObject> awrRecObj; // ?

    @Override
    public void initialize(ValidateApplicationType constraintAnnotation) {
        this.awrRecObj = constraintAnnotation.value();
    }

    @Override
    public boolean isValid(String arg0, ConstraintValidatorContext arg1) {

        // verify if the application type is A1 and length is 512
        if ((awrRecObj.getApplicationType()
                .equalsIgnoreCase(AWRConstant.AWR_W2))
                && (awrRecObj.getRecordData().toString().length() != AWRConstant.W2_RECORD_LEN)
                && (awrRecObj.getProgramSource()
                        .equalsIgnoreCase(AWRConstant.SOURCE_BATCH))) {

            // create AWRRequestError Object and add it to AWRRecordObject
            AWRUtility.createAWRRequestErrorObject(awrRecObj,
                    AWRErrorTypeCode.W2_RECORD_LENGTH_ERROR,
                    awrRecObj.getRecordData());
            return false;
            // ...
        }

        return true;
    }
}

@Target({ METHOD, FIELD, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = { ApplicationTypeValidator.class })
public @interface ValidateApplicationType {

    String message() default "{com.myproject.validation.ApplicationType.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

    Class<AWRRecordObject> value();
} 
```

该代码读取一个固定长度的文件并将解析后的值存储到一个 bean 中：

```
public static AWRRecordObject bufferedReader() throws IOException {

    int lineCount = 0;
    long time1 = System.currentTimeMillis();
    File file = new File("D://TestData/test.txt");
    BufferedReader br = new BufferedReader(new FileReader(file), 8192);
    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
    validator = factory.getValidator();
    String line;

    while ((line = br.readLine()) != null) {

        String type = line.length() > 2 ? line.substring(0, 2) : line;

        AWRRecordObject record = new AWRRecordObject(line, type, lineCount);

        Set<ConstraintViolation<AWRRecordObject>> constraintViolations = validator
                .validate(record);

        if (constraintViolations.size() > 0) {

            Iterator it = constraintViolations.iterator();
            while (it.hasNext()) {
                ConstraintViolation<AWRRecordObject> cv = (ConstraintViolation<AWRRecordObject>) it
                        .next();
                System.out.println(cv.getInvalidValue());
                System.out.println(cv.getMessage());

            }

        }

        return record;
    }
} 
```

不幸的是，我收到以下错误消息：

```
Exception in thread "main" javax.validation.UnexpectedTypeException: No validator could be found for type: java.lang.String
at org.hibernate.validator.engine.ConstraintTree.verifyResolveWasUnique(ConstraintTree.java:383) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:04:33.313

看起来你需要在这里做两件事：

1\. 您当前已将自定义验证应用于目标 bean 的字段。您需要将其移至班级。

```
@ValidateApplicationType
public final class AWRRecordObject 
```

2\. 您的注释定义需要更改，以允许将注释应用于类。

```
@Target({ TYPE, ANNOTATION_TYPE }) 
```

# c - 在mac os上将两个变量名相乘

> ID：10487013
> 
> 赞同：0
> 
> 时间：2012-05-07T18:17:05.633
> 
> 标签：c, macos, gcc, multiplication

我试图让 ac 程序在我的 mac 分区中工作，并且已经想出了大部分的方法，但无法找出一个非常简单的问题。

所以我有一个 .h 文件，我在其中声明了所有变量，并且在我的 .c 文件中我试图运行类似的命令

```
L2toL1 = (L2_transfer_time)*(L1_block_size); 
```

但是我从来没有得到正确的答案。我在上面的行之前打印变量并且它们打印正确但是当它们相乘时的答案是遥遥无期。那么我怎样才能完成正确的乘法呢？

.h 文件看起来像

```
#define CONFIG_PARAM 16
#define HIT 1
#define MISS 0
#define TRUE 1
#define FALSE 0

unsigned long long L2=0;
unsigned long long L1=0;

int L1_block_size=0;
int L1_cache_size=0;
int L1_assoc=0;
int L1_hit_time=0;
int L1_miss_time=0;
int L2_block_size=0;
int L2_cache_size=0;
int L2_assoc=0;
int L2_hit_time=0;
extern int L2_miss_time=0;
int L2_transfer_time=0;
int L2_bus_width=0;
int mem_sendaddr=0;
int mem_ready=0;
int mem_chunktime=0;
int mem_chunksize=0;
unsigned long long test; 
```

.c 文件然后运行以下内容并从配置文件中读取特定值 print f 语句的答案应该是 195 但它类似于 49567

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include "definitions.h"

int main(int argc, char *argv[]) {
    FILE *config_file, *trace;
    unsigned int address, exec_info;
    char check, trash[25], op;
    int j, para;
    int i=0;

    if(argc >= 2)   
    config_file = fopen(argv[1],"r");
    else 
    config_file = fopen("config0.txt","r");

// Grabs desired cache parameters from the specified config files
while(fscanf(config_file,"%s %d\n",trash,&para) == 2) {
config[i] = para;
i++;      
}

// Close the config file
fclose(config_file);

// Puts Cache parameters from config file in desired variables
InitializeParameters();

/*
unsigned long long L2toL1;
L2toL1 = (L2_miss_time)*(L1_block_size);
printf("L2toL1 is: %Lu\n",L2toL1);

}

int InitializeParameters() {   
L1_cache_size = config[0];
L1_block_size = config[1];
L1_assoc = config[2];
L1_hit_time = config[3];
L1_miss_time = config[4];
L2_block_size = config[5];
L2_cache_size = config[6];
L2_assoc = config[7];
L2_hit_time = config[8];
L2_miss_time = config[9];
L2_transfer_time = config[10];
L2_bus_width = config[11];
mem_sendaddr=config[12];
mem_ready=config[13];
mem_chunktime=config[14];
mem_chunksize=config[15];    
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:20:34.590

您可能会得到奇怪的数字，因为您的结果不适合目标变量。示例：您将两个数字相乘，这些数字太大而无法放入目标内存位置。

例如，如果您有这段代码：

```
#include <stdio.h>
int main(int argc, char **argv)
{
   int a, b, c;
   a = 2000000000;
   b = 2000000000;
   c = a*b;
   printf ("%d x %d = %d", a, b, c);
   return 0;
} 
```

将打印：

```
 2000000000 x 2000000000 = -1651507200 
```

话虽如此，在头文件中声明变量并不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:49:00.583

您正在使用`%Lu`printf 格式字符串。我认为`L`只适用于`long double`类型，而不适用于`long long int`类型。

你应该`%llu`这样使用：

```
printf("L2toL1 is: %llu\n",L2toL1); 
```

当然，这取决于您使用的 C 库：并非所有库都完全符合标准，您的可能使用其他库。

# sql-server-2008 - 稀疏列还是普通列？

> ID：10487014
> 
> 赞同：0
> 
> 时间：2012-05-07T18:17:15.327
> 
> 标签：sql-server-2008, tsql

我在一个表中有 6 列日期时间类型。我的应用程序要求每一列都应该有额外的第一列用于验证，如果用户想要修改它，它可以是位数据类型和另一个修改的日期时间。所以我的问题是，有什么比为我拥有的每一列添加 2 列更好的方法吗？我也知道稀疏列，我可以用它来节省我的表空间，但还有什么更好的我可以做的吗？

**“位”逻辑**

所以有3列

1.  原始日期时间，
2.  修改日期时间和
3.  验证位。

验证位默认设置为 false。当用户想要更改日期时间时，修改的日期时间列将更新为新值；但是，原始日期时间列不会发生变化。现在用户必须决定输入的值是否经过验证。验证位将决定此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:27:47.033

我会禁用有效复选框，直到他们输入修改日期。这两列的稀疏工作。

# php - Codeigniter/i18n URL 的 OAuth 问题

> ID：10487027
> 
> 赞同：2
> 
> 时间：2012-05-07T18:18:46.400
> 
> 标签：php, codeigniter, oauth, linkedin

我已经通过我的 CodeIngiter 应用程序成功访问了 LinkedIn API。我搬到了几乎相同的服务器并实现了 i18n 库，但它停止了工作。

用户在 LinkedIn 上进行身份验证后，它会返回到正确的 URL，但会生成一系列以`Undefined index: oauth_verifier`

使用[i18n 库](http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n)后，我的 URL 现在在第一段中有两个字母语言代码，例如“en”或“br”。

编辑：这是我正在使用的[Linkedin 库。](http://thinkdiff.net/php/integrate-linkedin-api-part-2/)

我相信这会导致 $_REQUEST['oath_verifier'] 的设置出现路由问题

非常感谢您对此的任何帮助。

控制器摘录：

```
class LinkLogin extends MY_Controller {

function __construct(){

    parent::__construct();
    $this->load->helper('url');
    $this->load->model('profile_model');
    $this->load->model('generic_model');
    include_once (APPPATH.'libraries/Linkedin.php');         
}

function index(){
}

function initiate(){

    session_start();
    $this->load->helper('url');

    $config['linkedin_access'] = "***";
    $config['linkedin_secret'] = "***";
    $config['base_url']  = "http://www.youinapage.com/linklogin/initiate/";

    if ($this->uri->segment(4) == 'profile') {
    $config['callback_url']  = "http://www.youinapage.com/linklogin/get_profile_linkedin/";
    }
    if ($this->uri->segment(4) == 'resume') {
    $config['callback_url']  = "http://www.youinapage.com/linklogin/get_resume_linkedin/";
    }

function get_resume_linkedin() {

    session_start();
    $this->load->library('format');

    $config['linkedin_access'] = "***";
    $config['linkedin_secret'] = "***";
    $config['base_url']  = "http://www.youinapage.com/linklogin/initiate/";
    $config['callback_url']  = "http://www.youinapage.com/linklogin/get_resume_linkedin/";

        # First step is to initialize with your consumer key and secret. We'll use an out-of-band oauth_callback
$linkedin = new LinkedIn($config['linkedin_access'], $config['linkedin_secret'], $config['callback_url'] );
//$linkedin->debug = true;

            # First step is to initialize with your consumer key and secret. We'll use an out-of-band oauth_callback
    $linkedin = new LinkedIn($config['linkedin_access'], $config['linkedin_secret'], $config['callback_url'] );
    //$linkedin->debug = true;

   if (isset($_REQUEST['oauth_verifier'])){
        $_SESSION['oauth_verifier']     = $_REQUEST['oauth_verifier'];

        $linkedin->request_token    =   unserialize($_SESSION['requestToken']);
        $linkedin->oauth_verifier   =   $_SESSION['oauth_verifier'];
        $linkedin->getAccessToken($_REQUEST['oauth_verifier']);

        $_SESSION['oauth_access_token'] = serialize($linkedin->access_token);
        header("Location: " . $config['callback_url']);
        exit;
   }
   else{
        $linkedin->request_token    =   unserialize($_SESSION['requestToken']);
        $linkedin->oauth_verifier   =   $_SESSION['oauth_verifier']; // ERROR: Undefined index: oauth_verifier
        $linkedin->access_token     =   unserialize($_SESSION['oauth_access_token']);
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T22:39:33.477

根据您的评论和帖子，我猜您正在尝试连续两次使用相同的方法，所以您登录了。看起来很奇怪，但无论如何。

但是，您使用的 i18n 将更改您的路由以包含语言，因此您应该更新您在控制器中设置的 url，以也使用该语言或语言。

在 codeigniter 中，您应该始终尝试使用`site_url()`. 通过这种方式，您可以轻松地将您的应用程序移植到其他域名/位置。在这种情况下，本地化库也会为您更改 url。

您应该更改对 url 的所有引用，如下所示：

```
$config['base_url']      = site_url("linklogin/initiate/");
$config['callback_url']  = site_url("linklogin/get_resume_linkedin/"); 
```

要使用`site_url()`，您将需要[URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)。在尝试使用 site_url() 之前，您应该包含该帮助程序。但是你已经将它包含在你的构造函数中，所以那里没有问题。

您还应该替换使用`header(...); exit;`with `redirect();`。如果您在发送标头后死亡，codeigniter 将无法完全运行，您的日志也不会完全完成。

```
redirect($config['callback_url']); // Replaces: header($config['callback_url']);exit;
redirect('linklogin/get_resume_linkedin/'); // Alternative to above statement 
```

我还建议您查看[手册](http://codeigniter.com/user_guide/)以查看内置会话类和输入类。

# ios - 将 RaptureXML 与 XPath 一起使用时泄漏

> ID：10487030
> 
> 赞同：0
> 
> 时间：2012-05-07T18:19:03.913
> 
> 标签：ios, xml, xcode, parsing, memory-leaks

我正在使用 RaptureXML 解析一个 XML 文件，该文件描述了不同的过滤器（具有相当复杂的结构），然后我将其创建为 Obj-C 对象。一切正常！

但是，Instruments 在 libxml2.2.dylib 中检测到多个泄漏（请参见屏幕截图），我无法在网上找到任何可以帮助我解决此问题的内容。

这是泄漏仪器屏幕截图的链接（我还不能将其发布到软...）

[http://imageshack.us/photo/my-images/850/bildschirmfoto20120507ud.png/](http://imageshack.us/photo/my-images/850/bildschirmfoto20120507ud.png/)

**这是我用来解析 xml 文件的代码：**

```
RXMLElement *rootXML = [RXMLElement elementFromXMLData:xmlDataFile];

FilterLogic_Management *filterManager = [[FilterLogic_Management alloc] init];

NSString *queryPath = [NSString stringWithFormat:@"//%@[@id=%i]/filterSettings/fqFilter", FilterTypeAsString, FilterNum];

//WHAT AM I DOING? Consider two filter types: Distance and Price. Each filter type consists of different thresholds (e.g., <8 $;  8 - 15 $; > 15 $). All of these values are in an XML file which I need to parse and translate into my "real" filters that I use in the App.

//Step 1: Iterate over all FilterTypes to find the entry in the XML file that describes the currently selected FilterType and its FilterNum

[rootXML queryPath usingBlock:^(RXMLElement *filterElement) {

    NSMutableArray *currentThresholds = [[NSMutableArray alloc] init];

    float currentWeight = [filterElement attribute:@"weightFactor"].floatValue; //e.g., 1.0           
    NSString *currentMarkerUnit = [filterElement attribute:@"markerUnit"]; //e.g., $ or €
    NSString *currentFilterType = [filterElement attribute:@"groupType"]; //e.g., "Distance" or "Price"

    //Step 2: Iterate over all Filters for current FilterType <- a FilterType consists of an array of Filters...

    [filterElement iterate:@"filter" usingBlock: ^(RXMLElement *filter) {
        NSString *filterType = [filter attribute:@"filterType"];

        if(filterType != LogicalConjunction){
            //Step 3-a: Create threshold with more than one threshold

            float threshold = [filter attribute:@"threshold"].floatValue;

            FilterLogic_FilterThreshold *newThreshold = [FilterLogic_FilterThreshold FilterThresholdMakeWithOneThreshold:threshold FilterWrapperType:filterTypeAsEnum MarkerUnit:currentMarkerUnit IsInitiallyActive:isInitiallyActive];

            [currentThresholds addObject:newThreshold];
        }else{
            //Step 3-b: Create threshold with multiple thresholds
            NSLog(@"Creating filter with multiple thresholds");

            FilterLogic_FilterThreshold *logicalThreshold = [FilterLogic_FilterThreshold FilterThresholdMakeLogicalThreshold:filterTypeAsEnum MarkerUnit:currentMarkerUnit IsInitiallyActive:isInitiallyActive];

            NSMutableArray *subFilterThresholds = [[NSMutableArray alloc] init];
            [filter iterate:@"filter" usingBlock: ^(RXMLElement *subFilter) {
                //Step-3b-x Iterate over sub-thresholds
                float threshold = [subFilter attribute:@"threshold"].floatValue;

                FilterLogic_FilterThreshold *subFilterThreshold = [FilterLogic_FilterThreshold FilterThresholdMakeWithOneThreshold:threshold];

                [subFilterThresholds addObject:subFilterThreshold];

            }];
            if([subFilterThresholds count]>1)
            {
                FilterLogic_FilterThreshold *newThreshold = [FilterLogic_FilterThreshold FilterThresholdMakeFromLowerFilterThreshold:[subFilterThresholds objectAtIndex:0] UpperFilterThreshold:[subFilterThresholds objectAtIndex:1] LogicalFilterThreshold:logicalThreshold];

                [currentThresholds addObject:newThreshold];
            }

        }
    }];    

    FilterLogic_Filter *newFilter = [[FilterLogic_Filter alloc] initFilterWithType:FilterTypeAsEnum ArrayOfFilterLogic_FilterThresholds:currentThresholds Weight:currentWeight InitiallyActive:YES];

    [filterManager registerFilterWrapper:newFilter];

}];

//thought that these commands might help... it seems they don't. Probably misusing them!
xmlCleanupMemory(); 
xmlCleanupParser();

//if([filterManager countOfFilters]>0){
    NSLog(@"Filter parsing done!");
    return filterManager; 
```

非常感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:32:26.010

尝试将整个 queryPath usingBlock 位放入 @autoreleasepool {...} 中。只是一个想法。

# android - Android Dev - 应用内基于文本的游戏

> ID：10487038
> 
> 赞同：0
> 
> 时间：2012-05-07T18:19:33.623
> 
> 标签：android

我希望在我已经为企业构建的应用程序中添加一个简单的基于文本的琐事类型游戏。我们希望在应用程序中获得更多的用户交互。此外，我想在应用程序中显示高分......等。

创建一个网络服务和 MySQL 数据库就足以捕获分数并查询最高分。但是，是否有类似免费游戏 API 之类的东西，或者比从头开始创建游戏更容易的东西？我见过一些非常复杂的游戏 api，但我并不想制作一个完整的应用程序。只需在我的应用程序中添加一个简单的琐事游戏。

有什么建议么？评论？

解决这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:27:03.823

Radical Breeze 的[Illumination Software Creator](http://radicalbreeze.com/)有一个使用他们的程序[构建基于文本的游戏的教程。](http://www.radicalbreeze.com/tutorials/ISC-Tutorial-BuildAChooseYourOwnAdventureGame.pdf)Illumination 是一个类似于 App Inventor 的可视化开发环境。

如果您不想通过教程，我相信您可以下载游戏的代码。该程序有免费下载版本。Illumination 为包括 Android 在内的许多平台生成完整的源代码，但我认为您可能需要为移动平台代码生成付费。（付款是“选择您自己的价格”。）

所有生成的代码都是“本机”的。即，没有特殊的API。

# php - MYSQL 确保两个 cronjobs 不处理相同的请求

> ID：10487039
> 
> 赞同：1
> 
> 时间：2012-05-07T18:19:36.330
> 
> 标签：php, mysql, database, security

这是我的问题：

在我的数据库中，我有一个请求表，其中有一个状态字段。cronjob 每分钟运行一次，以“待定”状态查找每个请求。当它完成处理请求时，它将状态设置为“完成”。

有时，这个 cronjob 需要超过一分钟才能运行，因此有两个相同的 cronjob 正在运行。我需要确保他们不会处理相同的请求。

现在我正在这样做：

```
$requests = db_all($this->db->query('SELECT * FROM x__mx_request WHERE status="pending"'));
//few lines of code later
$this->db->query('UPDATE x__mx_request SET status="processing" WHERE id IN('.implode(',', $ids).')'); 
```

我选择它后将状态设置为处理，这也阻止其他脚本处理它，但是一个脚本是否可能选择所有请求，然后第二个脚本在第一个脚本将它们设置为处理之前选择所有请求？

我想要一种更安全的方式来做到这一点！

**编辑：感谢您提供的出色答案，但我必须先实际尝试一下，然后才能将其标记为正确。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:53:28.030

您可以尝试制作一个锁定/解锁文件，以便 cronjobs 可以检查以“知道”作业是否正在运行/尚未运行。进程 pid 也可用于识别进程状态，以防万一发生故障、无响应等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:56:23.257

将状态设置为唯一值，然后处理具有该唯一值的所有内容。如果您的处理中途失败，请进行超时或某种回退（但无论如何您都需要在当前情况下这样做）。

类似的东西（我只是在编 PHP，因为我不是特别了解该语言）：

```
 $guid = new_guid();

 $this->db->query(
    'UPDATE x__mx_request SET status = ? WHERE status = "pending";', 
    $guid
 );
 $requests = db_all(
    $this->db->query('SELECT * FROM x__mx_request WHERE status = ?;', $guid)
 ); 
```

另一种选择是事务-但我认为您需要SERIALIZABLE，这意味着您基本上只能处理一项工作。如果您想这样做，您的 cron 作业的锁定文件可以让您轻松完成此操作，而无需更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:48:50.107

[交易](http://dev.mysql.com/doc/refman/5.5/en/commit.html)是你想要的。因此，您有一个读取数据、将挂起状态更改为某个中间值（例如 inprocess）并返回数据的事务。

这可以防止两个查询返回相同的数据。

大致你想要这样的伪 sql

```
begin transaction 

select into tmp table * from blah where status = "pending"

update status = "being processed" where id in tmp 

end transaction 

return select * from tmp table 
```

# html - li 元素，右侧带有 css 删除图像

> ID：10487041
> 
> 赞同：1
> 
> 时间：2012-05-07T18:19:49.973
> 
> 标签：html, css

我正在创建一个右侧带有删除图像（按钮）的列表。当我将`a`and`span`元素放入`li`元素中，并为元素赋予`float:right`样式时`span`，它在 Chrome 中有效，但在 IE 中无效。IE 渲染删除图像不在同一行。在 Chrome 上，删除第二个`li`不呈现`li`.

我需要独立于浏览器，只是右侧带有删除按钮的项目列表。任何其他没有`ul`, `li`,`span`元素的解决方案都值得赞赏。（按钮或图像必须是单独的元素，因为我将为其添加点击处理程序。）

PS：小提琴链接[在这里](http://jsfiddle.net/RMEeF/4/)

```
<html>
<head>
<style type="text/css">
ul{
width: 200px;
}

li{
   border-style:solid;
   border-color:#98bf21; 
}

li span{
background-image:url('http://www.kodlab.com/Image/delete.png');
    width: 16px;
    heigth: 16px;
    display: inline-block;
}

</style>
</head>
<ul>
    <li><a>Foo</a><span></span></li>
    <li><a>neque porro quisquam est qui dolorem ipsum</a><span></span></li>
</ul>​​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:27:40.337

`float:right`做你想做的最简单的方法是将删除按钮移动到标记中的链接之前：

[http://jsfiddle.net/RMEeF/5/](http://jsfiddle.net/RMEeF/5/)

```
<ul>
    <li><span></span><a>Foo</a></li>
    <li><span></span><a>neque porro quisquam est qui dolorem ipsum</a></li>
</ul> 
```

另一种选择是`position:absolute`在删除按钮和`position:relative;`容器上使用：

[http://jsfiddle.net/RMEeF/6/](http://jsfiddle.net/RMEeF/6/)

```
li{  
   position:relative;
}

li span{
    background-image:url('delete.png');
    width: 16px;
    height: 16px;
    position:absolute;
    top:2px;
    right:2px;
} 
```

根据需要调整定位。如果重叠，这种方法可能会干扰其他内容的可见性，但优点是您在标记中放置删除按钮的位置无关紧要。

您可能应该使用删除按钮的表单而不是跨度。

# excel - 转换excel格式

> ID：10487043
> 
> 赞同：0
> 
> 时间：2012-05-07T18:19:58.810
> 
> 标签：excel

环境：Microsoft Excel 2003、07 或 10

有没有简单的改造方法

```
lines 1-11 
```

进入

```
lines 15-20 
```

![在此处输入图像描述](../Images/fe550ff10e8cf828cf8d45e776ea9eaf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:18:44.647

这可以通过一些额外的基本测试公式轻松完成。

根据下面的屏幕截图在表中添加列，并使用 is_id 列 TRUE 数据过滤表。

享受，不客气。

![在此处输入图像描述](../Images/442f0ede7e00540fcd46c5cb97bed85b.png)

# facebook - Facebook 长期和短期访问令牌，以及它们在离线访问权限删除后的到期时间

> ID：10487049
> 
> 赞同：6
> 
> 时间：2012-05-07T18:20:40.243
> 
> 标签：facebook, access-token

在阅读 Facebook 关于[offline_access 权限删除](https://developers.facebook.com/roadmap/offline-access-removal/)的帖子时，我被他们提到的短期和长期访问令牌彻底搞糊涂了。

[该页面](http://developers.facebook.com/docs/authentication/)提到

> 给定访问令牌的有效期取决于它的生成方式

但我没有找到任何进一步的信息。

任何人都对这个确定过程如何详细工作有见解？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T18:35:59.200

[您的应用程序为客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/)获取的访问令牌是短暂的（大约 2 小时），但您可以扩展它并使用具有**有效访问令牌的**[新端点](https://developers.facebook.com/roadmap/offline-access-removal/)获取长期令牌。在[处理无效/过期访问令牌中，它在](http://developers.facebook.com/docs/authentication/access-token-expiration/)*使用 Javascript SDK 实现身份验证的桌面 Web 和移动 Web 应用程序*下说：

 ***> 调用 FB.getLoginStatus() 或确保 status: true 在您调用 FB.init() 时设置意味着下次用户登陆您的应用程序并登录 Facebook 时，您将通过这些调用传递 authResponse 对象将包含一个新的、有效的访问令牌。
> 
> 在这种情况下，它只是用户使用您的应用程序的行为，它隐式地生成了一个新的访问令牌。

如果您使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)流程，那么您将自动获得一个长期有效的令牌（大约 60 天）。到期后，您必须让用户在同一流程中重新进行身份验证（代码交换）。

您当然可以使用这两种方法，这样您就可以在服务器中获得长期存在的令牌，在客户端中获得短暂的令牌。***

# android - 可以永久存储 WebView 的历史记录吗？

> ID：10487052
> 
> 赞同：0
> 
> 时间：2012-05-07T18:21:00.067
> 
> 标签：android, webview

我在使用`goBack()`和`goForward()`. 但是，当应用程序关闭时，历史记录将被清除。是否有可能存储历史记录或将其设置为应用程序的永久记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:58:23.637

您可以从 WebView 获取[WebBackForwardList](http://developer.android.com/reference/android/webkit/WebBackForwardList.html)，然后将其转储到首选项。

编辑：也许[saveState](http://developer.android.com/reference/android/webkit/WebView.html#saveState%28android.os.Bundle%29)和[restoreState](http://developer.android.com/reference/android/webkit/WebView.html#restoreState%28android.os.Bundle%29)会做你想做的事。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-07T18:29:10.257

那么最适合你的例子是`SharedPreference`。

`onBack()`您可以在执行时获取WebView 的当前 URL，并在初始化时将其保存。

[偏好](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)的例子。

# nginx - Nginx - 如何将前端上游到路径，例如 127.0.0.1/test/usig 位置但 404 错误

> ID：10487056
> 
> 赞同：1
> 
> 时间：2012-05-07T18:21:06.190
> 
> 标签：nginx

何，

下面是我对 nginx 的配置。如果我使用“位置 /”并浏览到 127.0.0.1，我会看到网页。如果我使用“位置 /ph/”，我会得到 404：未找到。如何使用路径？8051 上列出的应用程序是一个 python 旋风应用程序。

http {

```
upstream frontends {
    server 127.0.0.1:8051;
}

##
# Basic Settings
##

sendfile on;
tcp_nopush on;
tcp_nodelay on;
keepalive_timeout 30;
types_hash_max_size 2048;
# server_tokens off;
# server_names_hash_bucket_size 64;
# server_name_in_redirect off;

include /etc/nginx/mime.types;
default_type application/octet-stream;

    # Only retry if there was a communication error, not a timeout
    # on the Tornado server (to avoid propagating "queries of death"
    # to all frontends)
    proxy_next_upstream error;

server {
    listen   80;
    server_name 127.0.0.1;

            location /ph/ {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_pass http://frontends;
        } 
```

# php - 如何匹配有逗号的条目？

> ID：10487057
> 
> 赞同：1
> 
> 时间：2012-05-07T18:21:24.143
> 
> 标签：php, validation

在一个表中，我有一个字段存储允许查看帖子的用户。我有类似`93849038,39480398`逗号分隔用户的地方。

所以这就是我想要做的：

```
$user = logged in user; example: 93849038. 
```

这就是我的查询的样子：

```
 $sql = "SELECT note FROM notes_are WHERE user_allowed = '$user' ORDER 
 BY id DESC LIMIT 0, 3"; 
```

使用这样的结构，我无法担任该职位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:27:34.347

这不是推荐的做法，因为它会强制数据库引擎检查表的所有行。最好创建一个权限表，其中每个有权访问笔记的用户都单独列出（确保也索引用户列）。

如果你真的必须，你可以使用`LOCATE`字符串函数（假设 MySQL）：[http ://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_locate](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_locate)

当然，`LOCATE`也有问题，因为它不关心逗号分隔的东西，所以“更好”的方法可能是`REGEXP`：[http ://dev.mysql.com/doc/refman/5.5/en/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.5/en/regexp.html#operator_regexp)

# jquery - 带有 Fancybox 的完整图像大小

> ID：10487059
> 
> 赞同：6
> 
> 时间：2012-05-07T18:21:28.560
> 
> 标签：jquery, fancybox

如何使用 Fancybox 获得完整的图像尺寸？

它总是根据视口调整大小。对于我的一个项目，我不需要那个。

我尝试了不同的选项（fitToView 等），但我没有成功获得完整的图像大小。

似乎我不是唯一一个遇到这个问题的人：[Using fancybox to view full-sized image](https://stackoverflow.com/questions/3919330/using-fancybox-to-view-full-sized-image)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T19:06:29.627

这个问题可能是重复的，但它可能有不同的答案。实际上，除了非常古老且从未得到解答之外[的另一个问题](https://stackoverflow.com/questions/3919330/using-fancybox-to-view-full-sized-image)是关于如何自定义fancybox v1.3.x 中不存在的功能（一旦已经在fancybox 中打开，将图像动态调整为其全尺寸）。此类功能已`buttons`在 fancybox v2.x 中的 " " 助手中 引入

另一方面，如果您只想以原始大小显示图像（未调整大小以适合视口），那么：对于 fancybox v2.x，请使用 API 选项`fitToView: false`。对于fancybox v1.3.x 使用`"autoScale": false`

```
$(".fancybox").fancybox({
 // if fancybox 1.3.x
 "autoScale": false
 // if fancybox 2.x
 fitToView: false
 //
 // don't use both
}); 
```

# python - 使用 lxml 和 iterparse 获取子元素

> ID：10487062
> 
> 赞同：0
> 
> 时间：2012-05-07T18:21:42.127
> 
> 标签：python, parsing, lxml, iterparse

我正在尝试编写一个解析算法来有效地从 xml 文档中提取数据。我目前正在基于元素和子元素滚动文档，但想改用 iterparse。一个问题是我有一个元素列表，当找到这些元素时，我想从中提取子数据，但似乎使用 iterparse 我的选项是基于一个元素名称进行过滤，或者获取每个元素。

示例 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<data_object xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <source id="0">
  <name>Office Issues</name>
  <datetime>2012-01-13T16:09:15</datetime>
  <data_id>7</data_id>
 </source>
 <event id="125">
  <date>2012-11-06</date>
  <state_id>7</state_id>
 </event>
 <state id="7">
  <name>Washington</name>
 </state>
 <locality id="2">
  <name>Olympia</name>
  <state_id>7</state_id>
  <type>City</type>
 </locality>
 <locality id="3">
  <name>Town</name>
  <state_id>7</state_id>
  <type>Town</type>
 </locality>
</data_object> 
```

代码示例：

```
from lxml import etree

fname = "test.xml"
ELEMENT_LIST = ["source", "event", "state", "locality"]

with open(fname) as xml_doc:
    context = etree.iterparse(xml_doc, events=("start", "end"))

    context = iter(context)

    event, root = context.next()

    base = False
    b_name = ""

    for event, elem in context:
        if event == "start" and elem.tag in ELEMENT_LIST:
            base = True
            bname = elem.tag
            children = elem.getchildren()
            child_list = []
            for child in children:
                child_list.append(child.tag)
            print bname + ":" + str(child_list)
        elif event == "end" and elem.tag in ELEMENT_LIST:
            base = False
            root.clear() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:28:00.577

由于`iterparse`您无法将解析限制为某些类型的标签，因此您只能使用一个标签（通过传递参数`tag`）来执行此操作。但是，很容易手动完成您想要实现的目标。在以下代码段中：

```
from lxml import etree

fname = "test.xml"
ELEMENT_LIST = ["source", "event", "state", "locality"]

with open(fname) as xml_doc:
    context = etree.iterparse(xml_doc, events=("start", "end"))

    for event, elem in context:
        if event == "start" and elem.tag in ELEMENT_LIST:
            print "this elem is interesting, do some processing: %s: [%s]" % (elem.tag, ", ".join(child.tag for child in elem))
        elem.clear() 
```

您将搜索限制在有趣的标签上。重要的部分`iterparse`是`elem.clear()`在项目过时时清除内存。这就是它具有内存效率的原因，请参阅[http://lxml.de/parsing.html#modifying-the-tree](http://lxml.de/parsing.html#modifying-the-tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:32:03.080

我会改用[XPath](http://lxml.de/xpathxslt.html)。它比你自己阅读文档要优雅得多，而且我认为肯定更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:29:49.923

利用`tag='{http://www.sitemaps.org/schemas/sitemap/0.9}url'`

有正确答案的类似问题[https://stackoverflow.com/a/7019273/1346222](https://stackoverflow.com/a/7019273/1346222)

```
#!/usr/bin/python
# coding: utf-8
""" Parsing xml file. Basic example """
from StringIO import StringIO
from lxml import etree
import urllib2

sitemap = urllib2.urlopen(
    'http://google.com/sitemap.xml',
    timeout=10
).read()

NS = {
    'x': 'http://www.sitemaps.org/schemas/sitemap/0.9',
    'x2': 'http://www.google.com/schemas/sitemap-mobile/1.0'
}

res = []

urls = etree.iterparse(StringIO(sitemap), tag='{http://www.sitemaps.org/schemas/sitemap/0.9}url')

for event, url in urls:
    t = []
    t = url.xpath('.//x:loc/text() | .//x:priority/text()', namespaces=NS)
    t.append(url.xpath('boolean(.//x2:mobile)', namespaces=NS))
    res.append(t) 
```

# install4j - 如何防止我的 exe4j 可执行文件被赛门铁克端点标记为 Bloodhound 特洛伊木马？

> ID：10487063
> 
> 赞同：2
> 
> 时间：2012-05-07T18:21:48.070
> 
> 标签：install4j, symantec, exe4j

我创建了一个 java 应用程序并使用 exe4j 版本 5 将其包装在可执行文件中，但每次我启动可执行文件时，赛门铁克端点保护 12 象限都会将 exe 文件视为可执行文件，因为它认为可执行文件是猎犬木马。但是，如果我使用 exe4j 版本 2 或更低版本创建可执行文件，则不存在此问题。

如果我使用 install4j 创建安装包，也会发生同样的问题。

是否需要对 exe4j 或 install4j 项目进行任何设置来解决此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:47:06.417

这是一个误报。不幸的是，这种情况时有发生。您可以将此情况报告给防病毒软件供应商，他们都接受误报报告。通常，这会在下一次更新他们的病毒定义时得到修复。

# php - 将单个字节读取为无符号字节

> ID：10487066
> 
> 赞同：1
> 
> 时间：2012-05-07T18:21:55.760
> 
> 标签：php, sockets, php-socket

我有一些 java 服务器，我正在尝试使用 php 脚本。

该格式提供了消息将采用无符号字节的字节数，然后是组成字符串的字节数。

这是我的评论功能

```
function read($socket, $readnum) {
    $endl = "<br>"; // It's running on apache

    // attempt to get the byte for the size
    $len = unpack("C",socket_read($socket, 1))[0];
    // this prints "after ", but $len does not print. $endl does
    echo "after " . $len . $endl;
    // obviously this fails because $len isn't in a valid state
    $msg = socket_read($socket, $len);
    // print the message for debugging?
    echo $len . " " . $msg;
    return $msg;
} 
```

我不是真正的 php 人，更多的是 Java 人，所以我不确定我应该如何获得这个长度。

应@c0le2 的要求，我进行了以下编辑

```
$lenarr = unpack("C",socket_read($socket, 1));
$len = $lenarr[0]; // line 81 
```

这给出了以下错误

```
PHP Notice:  Undefined offset: 0 in simple_connect.php on line 81 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:12:59.970

解包格式字符串实际上就像`code [repeater] [name]`，用正斜杠分隔。例如，`Clength`。输出数组将是关联的，并按名称作为键，重复字段附加一个数字后缀，从 1 开始。例如，输出键`C2length`将是`length1`和`length2`。

文档对此并不十分清楚。

因此，当您不指定任何名称时，它只是附加数字后缀，从 1 开始。所以您要查找的长度是`$lenarr[1]`.

但你应该试试这个：

```
$v = unpack('Clength', "\x04");
var_export($v);  // array('length' => 4) 
```

以下是一些其他示例：

```
unpack('C2length', "\x04\x03");
// array ( 'length1' => 4, 'length2' => 3, );

unpack('Clength/Cwidth', "\x04\x03");
// array ( 'length' => 4, 'width' => 3, ); 
```

此外，在 php 中，您通常不能在表达式上使用数组访问表示法——您需要直接在变量上使用它。所以`functioncall()[0]`行不通，你需要`$v = functioncall(); $v[0]`. 这是一个 php 疣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:32:21.323

你不能像那样访问返回的数组。`$len[0]`打电话后你会做`unpack()`的。

```
$len = unpack("C",socket_read($socket, 1));    
echo "after " . $len[0] . $endl; 
```

# php - 带验证的搜索查询

> ID：10487071
> 
> 赞同：1
> 
> 时间：2012-05-07T18:22:11.120
> 
> 标签：php, mysql

很快，我正在创建搜索查询，但遇到了一个问题……使用此代码。

此代码运行良好，但我需要向其中添加此验证，当我添加此验证时出现问题 `userid='$id'`，搜索查询无法使用它。有人可以让我走上正确的道路吗？我在这里遗漏了一些东西。$id 的值肯定是真的。这是此搜索查询的整个代码部分，无需验证结果即可。

```
else if($_POST['filter1'] == "po_boravistu")
        {
            if($row_12['admin_id'] < 1)
                {
            //FILTER 10 po boravištu
$sqlCommand = "SELECT * FROM albums WHERE userid='$id' AND WHERE bor_mjesto LIKE '%$searchquery%' OR bor_kucni_broj LIKE '%$searchquery%' OR
bor_postanski_broj LIKE '%$searchquery%' OR bor_ulica LIKE '%$searchquery%' OR bor_opcina LIKE '%$searchquery%'";
                }
        } 
```

整个脚本在没有`userid='$id'`它的情况下工作正常，但是当我添加该验证脚本时，它就死了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:42:24.140

您的 SQL 无效，因为您有 2 个 WHERE 子句。

将其更改为：

```
$sqlCommand = "SELECT * FROM albums WHERE userid='$id' AND (bor_mjesto LIKE  %$searchquery%' OR bor_kucni_broj LIKE '%$searchquery%' OR bor_postanski_broj LIKE '%$searchquery%' OR bor_ulica LIKE '%$searchquery%' OR bor_opcina LIKE '%$searchquery%')"; 
```

（注意使用括号将多个“OR”语句括起来）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:42:49.880

您需要删除第二个`WHERE`（并添加一些括号），如下所示：

```
$sqlCommand = "
SELECT * 
FROM 
albums 
WHERE 
userid='$id' 
AND 
(
bor_mjesto LIKE '%$searchquery%' OR 
bor_kucni_broj LIKE '%$searchquery%' OR
bor_postanski_broj LIKE '%$searchquery%' OR 
bor_ulica LIKE '%$searchquery%' OR 
bor_opcina LIKE '%$searchquery%'
)
"; 
```

每个查询只需使用`WHERE`一次。此外，您不需要在 $id 周围添加单引号，因为它是一个整数值。

此外，我不确定您的变量来自哪里，但您可能希望`mysql_real_escape_string`在将它们放入此查询之前使用它们进行转义。最后，`SELECT *`几乎总是一个错误：只选择你真正需要的行。这将为您节省一些时间:)

# php - 禁用 MySQL 旧密码有什么风险？

> ID：10487073
> 
> 赞同：2
> 
> 时间：2012-05-07T18:22:18.343
> 
> 标签：php, mysql, passwords, php-5.2

我处于以下情况：

*   我必须在 PHP 5.4 中开发一个新项目
*   该公司还有其他几个运行在 PHP 5.2、VB6 和 VB.net 上的 [重要] 系统，使用 mysql 旧密码格式*（16 字节密码）*进行连接
*   使用 PHP 5.4，我无法连接到 MySQL，因为旧密码错误，除非我将密码设置为新格式*​​（41 字节密码）*：

> 设置会话 old_passwords = 0;

和

> 设置密码 = 密码（'my_old_password'）

如果我在 mysql 中进行这些更改（将密码设置为新格式​​），PHP 5.2 和 VB 中的系统是否会继续连接而不会出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-20T01:48:40.837

*（这个问题太老了，不受欢迎，但为了完整起见，我真的需要回答它）*

在互联网上阅读了很多（真的很多）文章后，没有关于使用 PHP 5.2 的旧系统能够使用新密码格式连接的文档信息。

**但是**，如果我没记错的话，我的最终解决方案是升级在这些重要系统中运行**的 PHP 版本。**

# erlang - 发现阻塞的erlang线程

> ID：10487074
> 
> 赞同：1
> 
> 时间：2012-05-07T18:22:21.540
> 
> 标签：erlang, hotswap

我有一个项目，它有很多模块，每个模块都有不同的运行线程。我写了一个小脚本，它遍历每个脚本并安全地重新加载代码（用于热交换）：

```
reload_all() ->                
    ?MODULE:reload_all(?MODULE_LIST).
reload_all([]) -> ok;          
reload_all([T|C]) ->
    io:fwrite("Purging ~w\n",[T]),  
    try_purge(T),              
    {module,T} = code:load_file(T), 
    ?MODULE:reload_all(C).     

try_purge(T) -> try_purge(T,1).
try_purge(T,Wait) ->           
    case code:soft_purge(T) of 
    true -> ok;
    false ->
        io:fwrite("* Waiting ~w seconds for ~w module\n",[Wait,T]),
        timer:sleep(Wait*1000),
        try_purge(T,Wait+1)    
    end. 
```

它使用 soft_purge() 函数，该函数仅在没有线程运行将被正常清除命令杀死的“旧”代码时清除代码。它将以越来越长的间隔等待并继续尝试。我已经设计了这个项目，因此等待总时间不应该超过一分钟，但实际上它应该或多或少是即时的。

我遇到的问题是，有时一个模块会有一个错误，导致它由于某种原因无限期地阻塞，而我的 reload_all() 脚本永远不会完成。这是期望的行为，它让我知道出了点问题。问题在于，追踪 bug 需要对代码进行大量的测试和分析，这有时甚至不起作用，因为 bug 只出现在生产环境中，而不出现在测试环境中。

我的问题是：有没有办法识别哪些线程正在运行模块中的“旧”代码，并查看它们当前卡在哪个函数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:17:03.387

您可以使用 erlang:check_old_code/1 和 erlang:check_process_code/2 检查您使用的是旧版本还是新版本的模块。只需查看[Erlang 手册](http://www.erlang.org/doc/man/erlang.html#check_old_code-1)。

# c# - 将自定义保存按钮绑定到 itemtemplate 文本框

> ID：10487077
> 
> 赞同：0
> 
> 时间：2012-05-07T18:22:43.933
> 
> 标签：c#, asp.net, gridview

```
using Visual.Web.Developer.2010.Express;
using SQL.Server.Management.Studio.2008.R2;
using Northwind; 
```

N00b 在这里，

尝试自定义一个 asp.net `gridview`，我被困在这部分......

在 中`ItemTemplate`，我有一个文本框，该文本框在`.keypress`（客户端 JS）上应用了一个类，`asp:LinkButton`旁边出现一个格式类似于 Jquery UI 图标的类。我被困在这部分。我知道我可以为gridview“启用编辑”，但我想让一个编辑按钮只出现在`.keypress`我已经实现的。我被困在的公园正试图点击它`asp:LinkButton`以向 SQLserver 发送更新命令以相应地更新该数据库条目。到目前为止，我已经为该列中的每个数据库项目动态创建了文本框。
有没有更实用的方法可以在达到相同结果的同时做到这一点？更具体地说，我并不是真的在寻找代码，因为我正在努力学习，而是更多地寻找我应该看看的方法，或者我在网上错过的其他教程。
![在此处输入图像描述](../Images/1717ae8e6b6f863148f91ed09bed716d.png)
我也很感激一些建议，在此先感谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:27:06.993

您可以尝试使用 GridView_RowCommand 事件来获取由 Linkbutton 冒泡的 Command 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:52:29.430

您可以使用`CommandName`属性`LinkButton`并将其设置为更新。

```
<Columns>
                <asp:TemplateField>
                    <EditItemTemplate>
                        <asp:linkbutton ID="Button1" text="TextBox1" runat="server" CommandName="Update" />
                    </EditItemTemplate>
                </asp:TemplateField>
            </Columns> 
```

# xslt - 如何从 Relax NG Schema 生成基本文档

> ID：10487080
> 
> 赞同：1
> 
> 时间：2012-05-07T18:23:13.623
> 
> 标签：xslt, documentation, relaxng

我正在尝试从 Relax NG XML 模式中的注释生成非常简单的文档。例如，给定以下松弛 NG：

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
    <start>
        <element name="topNode">
            <ref name="topNode-ref"/>
        </element>
    </start>

    <define name="topNode-ref">
        <a:documentation>This is the top of the doc.</a:documentation>
        <oneOrMore>
            <element name="level1">
                <ref name="level1-ref"/>
            </element>
        </oneOrMore>
    </define>

    <define name="level1-ref">
        <a:documentation>Here's some notes about level1.</a:documentation>
        <attribute name="att1">
            <a:documentation>Details about att1.</a:documentation>
        </attribute>
        <element name="subLevel2">
            <ref name="subLevel2-ref"/>
        </element>
    </define>

    <define name="subLevel2-ref">
        <a:documentation>Notes on subLevel2.</a:documentation>
        <attribute name="subAtt"/>
        <zeroOrMore>
            <element name="subLevel3">
                <ref name="subLevel3-ref"/>
            </element>
        </zeroOrMore>
    </define>

    <define name="subLevel3-ref">
        <a:documentation>And here is subLevel3.</a:documentation>
        <attribute name="subSubAtt"/>
    </define>
</grammar> 
```

这将用于验证 XML 文件，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<topNode>
    <level1 att1="some test">
        <subLevel2 subAtt="more text"></subLevel2>
    </level1>

    <level1 att1="quick">
        <subLevel2 subAtt="brown">
            <subLevel3 subSubAtt="fox"></subLevel3>
        </subLevel2>
    </level1>   
</topNode> 
```

我希望能够生成列出每个元素/属性的基本 XPath 的文档，然后显示任何相应的文档注释。例如：

```
/topNode
This is the top of the doc.

/topNode/level1
Here's some notes about level1

/topNode/level1/@att1
Details about att1.

etc... 
```

最终，我将添加更多关于“zeroOrMore”、可能的数据类型等的文档……但我需要先解决这第一步。

我找到了[Techquila RELAX-NG 文档工具](http://techquila.com/tech/relax-ng-tools/)。我玩过 rng to docbook 样式表，但它没有做我想要的。据我所知，它只是单独列出了元素，没有关于 XPath 的详细信息。我不知道如何将其用作获得我所追求的输出的起点。

给定提供的 RelaxNG 示例，是否可以（如果可以，如何？）使用 XSLT 生成这种类型的文档输出？

虽然 XSLT 是理想的，但它不是必需的。我愿意接受任何可以完成工作的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:40:27.870

这将适用于像您的示例这样的非常简单的语法。

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:r="http://relaxng.org/ns/structure/1.0" 
    xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
>
<xsl:output method="text" />

<xsl:template match="/">
    <xsl:apply-templates select="//r:define[a:documentation] | //r:attribute[a:documentation]" />
</xsl:template>

<xsl:template match="r:define">
    <xsl:variable name="doc" select="a:documentation" />
    <xsl:call-template name="print-path">
        <xsl:with-param name="elm" select="//r:element[r:ref/@name=current()/@name]" />
    </xsl:call-template>
    <xsl:value-of select="$doc" /><xsl:text>&#10;</xsl:text>
</xsl:template>

<xsl:template match="r:attribute">
    <xsl:variable name="doc" select="a:documentation" />
    <xsl:call-template name="print-path">
        <xsl:with-param name="elm" select="//r:element[r:ref/@name=current()/ancestor::r:define/@name]" />
        <xsl:with-param name="path" select="concat('/@',@name)" />
    </xsl:call-template>
    <xsl:value-of select="$doc" /><xsl:text>&#10;</xsl:text>
</xsl:template>

<xsl:template name="print-path">
    <xsl:param name="elm" />
    <xsl:param name="path" />

    <xsl:variable name="parent" select="//r:ref[@name=$elm/ancestor::r:define/@name]/ancestor::r:element" />
    <xsl:message><xsl:value-of select="$elm/@name" /></xsl:message>
    <xsl:choose>
        <xsl:when test="$parent">
            <xsl:call-template name="print-path">
                <xsl:with-param name="elm" select="$parent" />
                <xsl:with-param name="path" select="concat('/',$elm/@name,$path)" />
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="concat('/',$elm/@name,$path)" /><xsl:text>&#10;</xsl:text>            
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

# ruby-on-rails - 如何/在何处适当调用控制器创建方法

> ID：10487082
> 
> 赞同：0
> 
> 时间：2012-05-07T18:23:20.160
> 
> 标签：ruby-on-rails, activerecord

我刚刚整理了关于 has_many :through 和 belongs_to; 的模型间关系。我还使用迁移将所需的 id 字段添加到数据库表中。

我的问题是：用户点击链接后：

```
<%= link_to "subscribe", new_subscription_path(feed_url: @feed.feed_url)%> 
```

我在我的新方法中这样做：

```
def new
    feed_url = params[:feed_url]
    @subscription = Subscription.new

    redirect_to reader_url, notice: "You are now subscribed to: "+Feed.find_by_feed_url(feed_url).title
  end 
```

我只是不知道我应该如何以及在哪里调用我的 create 方法，因为我希望订阅链接在我的订阅表中创建一个新行。

另外为了确保我的表格是正确的，这里是我的关联：

```
User has_many :feeds, :through => :subscriptions, dependent: :destroy 
```

|Users 表有列：id

```
Subscription belongs_to :feed
Subscription belongs_to :user 
```

|Subscriptions 表有列：id、user_id、feed_id

```
Feed has_many :users, :through => :subscriptions 
```

|Feeds 表有列：id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:16:41.403

你刚刚打破了 REST 的整个想法）

执行这些`new`操作是为了向用户显示一些表单，用于填写正在创建的资源的详细信息。甚至 HTTP 动词`GET`（你可以在你的日志中看到你的`new`动作）说它启动一个不应该修改任何资源的动作。

如果您不需要任何表单，您可以为您的`create`操作创建直接的“访问器”。但是不要通过，`link_to`因为如果没有启用 javascript，您的用户将无法正确单击它。使用`button_to`：

```
button_to 'Create', resources_path(your_params) 
```

`create`然后在您的操作中定义创建本身。

# wcf - WCF 服务清除缓冲区

> ID：10487084
> 
> 赞同：2
> 
> 时间：2012-05-07T18:23:21.717
> 
> 标签：wcf, service, buffer, pollingduplexhttpbinding

我目前正在开发 WCF 服务并且有一个小问题。该服务是轮询双工服务。我通过发送到服务器的消息启动数据传输。然后，服务器通过回调通道将大数据包相当快地发送回客户端。

为了停止，我向服务器发送一条消息，告诉它停止。然后它通过回调通道发送一条消息，确认这一点，让客户端知道。

问题是一堆数据包被缓冲起来通过回调通道发送到客户端。这会导致等待确认返回的时间很长，因为它必须等待所有数据首先通过。

有什么方法可以清除服务器端回调通道的缓冲区？我无需担心丢失数据，只需将其丢弃并立即发送确认消息即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:40:13.753

我不确定这是否可以引导您进入正确的方向......我有一个类似的服务，当我查看我的 Subscribe() 方法时，我可以访问它：

```
var context = OperationContext.Current;
var sessionId = context.SessionId;
var currentClient = context.GetCallbackChannel<IClient>();
context.OutgoingMessageHeaders.Clear();
context.OutgoingMessageProperties.Clear(); 
```

现在，如果您有一种使用 IClient 对象的方法，并且可以访问从中获取 IClient 实例的上下文（解析它的上下文），那么运行以下两个语句是否可以满足您的要求？

```
context.OutgoingMessageHeaders.Clear();
context.OutgoingMessageProperties.Clear(); 
```

只是从我的想法中快速漫步。很想知道这是否会解决它，如果没有其他信息，请提供个人信息。您能否将 OperationContext 缓存为包含 2 个属性的 SubscriptionObject 的一部分，第一个是 OperationContext，第二个是您的 IClient 对象。

# clearcase-ucm - 使用 ClearCase UCM 进行递归结帐

> ID：10487086
> 
> 赞同：1
> 
> 时间：2012-05-07T18:23:25.697
> 
> 标签：clearcase-ucm

我一直在寻找递归签出/签入脚本，而我所看到的所有内容都仅适用于基本 ClearCase。是否有一个原因？有人有可用于 ClearCase UCM 的脚本吗？

我个人也没有看到有人必须一次签出一堆文件的原因。赋予某人这样做的能力是否有任何重大缺陷？

添加：

我找到了这个，但我不确定这是否是最好的方法。它似乎有你的命令。我希望他们能够使用 GUI 执行此操作，因为他们不太熟悉命令行。

[http://www.ibm.com/developerworks/rational/library/4687.html](http://www.ibm.com/developerworks/rational/library/4687.html)

> 递归签出和签入的脚本
> 
> 注意：对于以下过程，您需要具有本地管理权限才能自定义 ClearCase 菜单。
> 
> 签出 对于递归签出选项，请执行以下操作： 启动 clearmenuadmin.exe 实用程序（为此，单击开始 > 运行，然后键入 clearmenuadmin.exe） 在对象类型选项卡中，选择目录对象。选择签入作为对象状态 单击可用菜单选项窗格中的新按钮，然后在相应字段中输入以下信息： 菜单文本：签出（递归）... 帮助文本：递归签出所选项目。 .. 命令类型：Executable/Regentry 命令：Software\Atria\ClearCase\CurrentVersion\ContextMenus\CmdLineExe 初始目录：
> 参数：/c cleartool find $file -exec "cmd /c cleartool checkout -nc \"%CLEARCASE_PN%\""评论：
> 
> 完成后，您可以通过按添加按钮将此新菜单条目添加到此菜单内容窗格。使用上移按钮根据需要定位它。完成此自定义后，选择 Configuration>Apply 以应用更改。然后您可以在 Windows 资源管理器中对其进行测试。
> 
> 报到
> 
> 对于递归签入选项，请执行以下操作： 启动 clearmenuadmin.exe 实用程序 在对象类型选项卡中，选择目录对象。选择签入作为对象状态 单击可用菜单选项窗格中的新按钮，然后在相应字段中输入以下信息： 菜单文本：签入（递归）... 帮助文本：递归签入所选项目。 .. 命令类型：Executable/Regentry 命令：Software\Atria\ClearCase\CurrentVersion\ContextMenus\CmdLineExe 初始目录：
> 参数：/c cleartool find $file -exec "cmd /c cleartool checkin -nc -identical \"%CLEARCASE_PN%\ ““ 评论：
> 
> 完成此操作后，您可以将此新菜单条目添加到菜单内容窗格中，根据需要放置它，并按照前面过程中的说明应用更改，然后在 Windows Explorer.Command 中对其进行测试：

这是最好的方法吗？（我理解这些论点，但命令让我失望。（这是本地机器或服务器上的 .exe 吗？）任何人都可以使用它，还是我必须在人们使用的每台机器上设置它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:43:28.980

任何 UCM 递归结帐都将与基本 ClearCase 结帐相同（如“[如何使用 ClearCase 执行递归结帐？](https://stackoverflow.com/questions/33577/how-do-i-perform-a-recursive-checkout-using-clearcase/119595#119595) ”）。

唯一的区别是需要检查当前设置的活动，或者在进行任何结帐之前创建/设置一个 UCM 活动。

*现在，无论是否是 UCM，在不知道它们是否会被修改*的情况下签出许多文件并不是一个好主意，因为在签入所有签出的文件时，您没有简单的方法来检测所述未修改的文件。
（这就是为什么递归签入必须包括两个步骤：请参阅“[使用 Clearcase 进行递归签入](https://stackoverflow.com/questions/973956/recursive-checkin-using-clearcase/974016#974016)”）

# android - Android - 显示应用程序处于开发模式

> ID：10487088
> 
> 赞同：0
> 
> 时间：2012-05-07T18:23:55.077
> 
> 标签：android, android-theme

我有一个移动商务应用程序，我想在应用程序中显示它在开发模式或生产模式下运行，这样我们团队的成员就不会意外在生产服务器上下订单。

我有先见之明，`Activity`从一个超`Activity`类派生我的所有类，我可以在其中添加将在所有应用程序的活动中运行的代码。我尝试在这里更改主题，尽管主题发生了变化，但我不太清楚如何最好地表明差异。

我会更改中的文本，`TitleBar`但我的应用程序没有。下一个想法是更改整个应用程序的背景颜色，但某些活动在布局中具有默认颜色。

理想情况下，我希望屏幕上某处的文字说“开发模式”之类的内容，但我意识到这可能很难做到，所以我愿意提供有趣的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:35:45.643

将 ViewStub 用于开发模式怎么样？

您可以在要指示开发模式的每个布局中放置一个 ViewStub。你的 ViewStub 可以只保存一个简单的 TextView，上面写着“开发模式”，有点像标题栏。

在代码隐藏中获取对 ViewStub 的引用并将其传递给在每个活动中运行的通用方法。如果您处于开发模式，请为 ViewStub 充气。

看看这个：http: [//developer.android.com/resources/articles/layout-tricks-stubs.html](http://developer.android.com/resources/articles/layout-tricks-stubs.html)

# javascript - 地理编码器不返回城市的值

> ID：10487090
> 
> 赞同：0
> 
> 时间：2012-05-07T18:24:05.953
> 
> 标签：javascript, return-value, geocoding, reverse-geocoding

我的 map.js 文件中有一个名为 getNameOfCity() 的函数（函数如下）它是通过执行以下操作从我的 actions.js 文件中调用的，`var city = getNameOfCity();`然后我警告城市，它说未定义。

这是map.js中的函数

```
function getNameOfCity() {
    geocoder.geocode({'latLng': map.getCenter()}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]){
                jQuery.each(results[0].address_components, function(key, value){
                    if(value.types[0] == 'locality') {
                        return value.long_name;
                    }
                });
            }
        } else {
            return false;
        }
    });
} 
```

当我在返回正确的城市之前提醒 value.long_name 时会提醒。但是当我从调用函数的地方提醒 city 返回时，它返回未定义。关于为什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:29:47.970

您在匿名函数中返回一个值 - 所以您将它返回为空。

您需要做的是在您的响应返回说“我完成了，这是城市名称”时调用一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:33:12.043

正如亚当所说，问题是你正在返回匿名函数。改为这样做：

```
function getNameOfCity() {
    var city = '';
    geocoder.geocode({'latLng': map.getCenter()}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]){
                jQuery.each(results[0].address_components, function(key, value){
                    if(value.types[0] == 'locality') {
                        city = value.long_name;
                    }
                });
                return city;
            }
        } else {
            return false;
        }
    });
} 
```

**更新** 回调方式，正如你所建议的......

```
function getNameOfCity(callback) {
    geocoder.geocode({'latLng': map.getCenter()}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]){
                jQuery.each(results[0].address_components, function(key, value){
                    if(value.types[0] == 'locality') {
                        callback(value.long_name); // call the function, pass the city name.
                    }
                });
            }
        } else {
            callback(false); // not found? pass false instead.
        }
    });
} 
```

**更新 2**
您现在可以使用此函数以这种方式获取城市名称：

```
getNameOfCity(function(city) {
    alert(city);   // or do something less useless.
}); 
```

# c# - 代码升级 - 导出到 Excel 2007 及更高版本

> ID：10487091
> 
> 赞同：0
> 
> 时间：2012-05-07T18:24:12.967
> 
> 标签：c#, asp.net, export-to-excel

我在 C# asp.net Web 应用程序中有一些默认功能，可以将 gridview 导出到 excel 文件。此代码在 Excel 2007 中运行良好，但在 2010 年将无法打开。我需要升级此代码以在两者中工作，或找到新的解决方案。任何帮助都会很棒。

当前代码：

```
 gvReport.Style.Add("font-size", "1em");
            Response.Clear();
            string attachment = "attachment; filename=FileName.xls";
            Response.ClearContent();
            Response.AddHeader("content-disposition", attachment);
            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            gvReport.GridLines = GridLines.Horizontal;
            gvReport.RenderControl(htw);
            Response.Write(sw.ToString());
            Response.End(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:35:41.487

使用[EPPlus](http://epplus.codeplex.com/)并将数据导出到 Excel，我假设 gvReport iz GridView 控件，因此使用绑定到该 GridView 的数据并使用 EPPlus 将其导出。

这很简单，在这里您可以找到 ashx 处理程序的示例，该处理程序将返回从 DataTable 创建的 excel 文件：

[https://stackoverflow.com/a/9569827/351383](https://stackoverflow.com/a/9569827/351383)

# svn - 如何在一个项目中管理多个 svn repo？

> ID：10487093
> 
> 赞同：0
> 
> 时间：2012-05-07T18:24:19.720
> 
> 标签：svn

在创建和部署期间如何管理多个 svn 存储库，而不会有很多悲伤？

我当前的文件夹结构或多或少看起来像

```
./                //svn url:mysvn.com/Project/
 lib              //svn url:mysvn.com/Project/Lib/
    ZEND          //svn url:mysvn.com/Zend
    Smarty        //svn url:mysvn.com/smarty
    InhouseLib1   //svn url:mysvn.com/InhouseLib1
    ProjectLib    //svn url:mysvn.com/Project/Lib/ProjectLib
 web              //svn url:mysvn.com/Project/Web
    js            //svn url:mysvn.com/Project/Web/js/
        jQuery    //svn url:mysvn.com/jQuery
        Stuff     //svn url:mysvn.com/Project/Web/js/Stuff        
    images        //svn url:mysvn.com/Project/Web/images
    etc.. 
```

当一个人改变了一些东西，一个人想要部署一些东西，或者你正在开始一个新项目并且知道你需要一组特定的库（例如`InHouseLib1`可能依赖于 jQuery 和 Zend）时，这会导致复杂的舞蹈

是否有任何 SVN 魔法可以以某种方式管理这种复杂性？（最好不重组SVN repo）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:27:24.917

这听起来可能是[SVN externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)的工作。简而言之，您可以指定从另一个仓库到外部仓库的“链接”。

# css - 有没有办法让div“贪婪”地抓住宽度？

> ID：10487094
> 
> 赞同：2
> 
> 时间：2012-05-07T18:24:29.150
> 
> 标签：css

我有 2 个并排的 div。它们都可以通过 jquery 关闭。当它们都可见时，它们具有固定的宽度，但是当一个关闭时，我希望剩余的 div 扩展以占用关闭的 div 过去占用的宽度。有没有办法只使用CSS（除了关闭按钮）来做到这一点，还是我必须求助于javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:25:53.043

我能看到用 CSS 解决这个问题的唯一方法是将类添加到包含元素：

```
<div id="container" class="left|right|both">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

根据父类是什么来设置内容的样式。如果`left`是类，则给第`div`一个非限制宽度并隐藏第二个`div`。`right`第二个也是如此`div`。当父母是`both`时，你给两个 div 50%。

您的 JavaScript 需要做的就是处理当前应用于容器的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:32:50.833

你至少需要为此写一行javascript，然后你就可以使用css来实现效果。

使用 jquery，每当您单击关闭时，将一个类切换到 div 的父级。找到点击关闭按钮的jquery代码并添加

```
$("#parent").toggle("classname"); 
```

像使用 css

```
#parent div { width: /*fixed*/100px; }
#parent.classname div { width: 100%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:27:41.320

这样的事情有用吗？

HTML：

```
<div id="parent">
    <div class="right">div2</div>
    <div class="left">Lorem  ipsum dolor sit amet, consectetur adipiscing elit. Nullam semper porta  sem, at ultrices ante interdum at. Donec condimentum euismod consequat.  Ut viverra lorem pretium nisi malesuada a vehicula urna aliquet. Proin  at ante nec neque commodo bibendum. Cras bibendum egestas lacus, nec  ullamcorper augue varius eget.</div>
</div>
<br />
<button id="remove">Remove Div 2</button> 
```

CSS：

```
#parent {
    overflow: hidden;
    border: 1px solid red
}
.right {
    float: right;
    width: 100px;
    height: 100px;
    background:green;
}
.left {
    overflow: hidden;
    height: 100px;
    background:red;
}​
​ 
```

JS：

```
$('#remove').on('click', function() {
    var div2 = $('.right')
    //div2.hide('slow');  // you could hide it as well  
    div2.remove();
});​ 
```

例子：

*   [http://jsfiddle.net/9Q86Y/](http://jsfiddle.net/9Q86Y/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T18:58:20.413

***编辑***

您可以使用模仿表格

```
display:table 
```

和

```
display:table-cell 
```

请参阅：http: [//jsfiddle.net/DUx3W/](http://jsfiddle.net/DUx3W/)（帽子提示：@Jimmy Breck-McKye）。

我原来的表小提琴：http: [//jsfiddle.net/6KkRL/](http://jsfiddle.net/6KkRL/)

# php - 使用 Javascript 动态更改 PHP 值

> ID：10487098
> 
> 赞同：1
> 
> 时间：2012-05-07T18:24:38.300
> 
> 标签：php, javascript, mysql, dynamic

我正在制作一个博客类型的网页，其中的 div 有一个“喜欢”和“不喜欢”按钮，上面的评级是一个 mysql 查询喜欢/（喜欢+不喜欢）。当用户点击喜欢或不喜欢时，我想将他们的投票添加到数据库中，并在不重新加载页面的情况下动态更改评分值。这是html的一小段，我几乎没有使用过javascript，所以任何帮助都会很棒。

```
<div class="narrow_right_container">
   <?php 
    $popularity = get_popularity($row);
   ?>
   <div class="yellow_bg">Rating:  <?php echo $popularity . "%"; ?></div>
   <div style="margin-left:2px;">
    <div class="dislike">
       <a href="#"><img src="ui_images/dislike.png"/></a>
       <span>Dislike</span>
    </div>
    <div class="like">
       <a href="#"><img src="ui_images/like.png" /></a>
       <span>Like</span>
        </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:26:10.547

您将不得不使用 ajax 来完成此操作。无法通过 javascript 更改 PHP 变量。

您将不得不调用将处理数据库工作的 Ajax 函数，在其完成之后，您将不得不使用 javascript 更新计数。这将暗示计数已更新，而数据库中的计数也将更新（来自 Ajax）

下面是一个很好的例子来说明如何做到这一点：

[Example Code](http://www.9lessons.info/2010/07/youtube-like-rating-jquery-and-ajax.html)
[Live Demo](http://demos.9lessons.info/youtube_rating.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:27:44.057

您实际上不会更改 PHP 值——一旦页面输出到浏览器，考虑 PHP 消失了——你不能与它交互，因为它在服务器上。相反，请考虑与浏览器中的文档进行交互。

最好的方法是对服务器端脚本进行 ajax 调用。该服务器端脚本可以向数据库提交喜欢或不喜欢的内容，然后返回新评级，您可以使用 javascript 插入新评级来代替旧评级。

您可能想查看一些关于 javascript 和 ajax 的教程，因为您似乎对教程的需求比对特定问题的需求更普遍。换句话说，如果您在一般主题上填补知识空白，您将能够很容易地解决您的具体问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:31:41.363

您将需要创建一些 PHP 代码来处理保存到服务器端的数据库。您会将喜欢/不喜欢的值信息发布到此服务器端脚本。如果可能，我会使用[jQuery 的 AJAX](http://api.jquery.com/jQuery.ajax/)助手将数据发布到您刚刚创建的 PHP 页面。

像这样的东西：

```
$.ajax({
  url: "whatever.php",
  type: "POST",
  data: {Like: true},
  success: function(data){ /* update view */}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T18:33:06.317

```
$('.like').click(function(){
   rate(1);
})
$('.dislike').click(function(){
   rate(-1);
})

function rate(_val){
$.ajax({
  url: 'ajax/rate.php?val='+_val,
  success: function(data) {
    alert('Rate was performed.');
    $(".narrow_right_container").find(".yellow_bg").append("Rating: "+data+"%");
  }
});
} 
```

在`rate.php`：

```
if(isset($_GET['val'])){
  $sql = "UPDATE.........."; //do an update to your rate table
  echo get_popularity($row); //return rating to ajax
} 
```

# php - php 文件在运行时重命名 - 可以锁定吗？

> ID：10487103
> 
> 赞同：3
> 
> 时间：2012-05-07T18:25:35.557
> 
> 标签：php, file-io

我将需要`php`在运行时对文件进行更改。
这是一个配置文件，在紧急情况下需要更改其设置之一。
我的问题是是否有可能`lock`在写入之前对文件进行处理，以便尝试访问该文件的其他会话将推迟到文件被重写，而不是使会话崩溃说找不到文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:13:25.157

是的，请看[flock](http://php.net/manual/en/function.flock.php)函数的手册入口

手册中的示例：

```
<?php

$fp = fopen("/tmp/lock.txt", "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    ftruncate($fp, 0);      // truncate file
    fwrite($fp, "Write something here\n");
    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp);

?> 
```

显然有一些警告，例如，如果您使用的是过时的文件系统 (FAT)`flock()`将始终返回 false。如果您将 PHP 用作 ISAPI 扩展，则`flock`不会锁定文件，以免被并行线程中运行的其他 PHP 脚本修改/读取。

# java - 列表和数组的区别

> ID：10487104
> 
> 赞同：35
> 
> 时间：2012-05-07T18:25:40.400
> 
> 标签：java

> **可能重复：**
> [原始数组与 ArrayList](https://stackoverflow.com/questions/7869212/primitive-array-vs-arraylist)

java中的List和Array有什么区别？或者 Array 和 Vector 的区别！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-07T18:30:58.477

通常（在 Java 中）数组是一种数据结构，通常由存储对象集合的顺序内存组成。

`List`是Java中的一个[接口](http://en.wikipedia.org/wiki/Interface_%28Java%29)，这意味着它可能有多个实现。其中一个实现是，它是一个使用数组作为数据结构来`ArrayList`实现接口行为的类。`List`

还有许多其他实现该`List`接口的类。查看它们的一种简单方法是查看 Javadoc `List`：[http ://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

在该页面上，您将看到“所有已知的实现类”，它们是 Java 中所有类型的列表。

# java - Java HTTP Servlet 会话结束时如何运行任意代码？

> ID：10487107
> 
> 赞同：3
> 
> 时间：2012-05-07T18:25:55.330
> 
> 标签：java, session, servlets

如果会话过期，我们的应用程序要求我们将用户的一些会话数据序列化到文件系统。我们会在传入时对其进行序列化，但由于我们应用程序的性质，这将过于昂贵。

如果我们能找到一种方法来挂钩某种“onSessionEnd”方法，那么我们就可以运行清理代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:27:52.687

您需要[`HttpSessionListener`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html)为您的应用程序设置一个。

调用的接口上有一个方法，`onSessionDestroy`当会话结束时应该调用它，您可以立即执行序列化。

要设置侦听器，请添加`web.xml`：

```
<listener>
    <listener-class>com.example.app.session.MySessionListener</listener-class>
</listener> 
```

# knockout.js - Knockout js：使新的输入名称唯一

> ID：10487110
> 
> 赞同：0
> 
> 时间：2012-05-07T18:26:07.800
> 
> 标签：knockout.js, attr

我正在使用 Knockout.js 迈出第一步，制作一个（相当复杂的）表格来计算未付发票的利息，同时牢记部分付款、成本和合同罚款。

计算将在 PHP 中处理，因为我在 PHP 方面比在 JS 方面更有经验。Knockout 正在处理添加新表单字段的动态，使表单即使在最复杂的情​​况下也可以灵活使用。

为了能够正确提取数据，我将通过 post 到 PHP 提供三个多维数组：

*   发票[$i][名称] / 发票[$i][金额] / 发票[$i][日期] / ...
*   付款[$j][姓名] / ...
*   成本[$k][名称] / ...

我似乎无法在 JS 中解决的问题是 Knockout.js 应该生成一个新的表单元素，并且应该分配一个唯一的编号（我想）

```
data-bind="attr:{name: someFunctionToGiveUniqueName}" 
```

我已经查看了 uniqueName 绑定，但我需要三个 uniqueNames，并且我应该能够自定义生成的名称以保持数据结构化。

这是我的视图模型（它可以工作，除了输入字段的不那么独特的命名）：

```
 <script type="text/javascript">

        // Overall viewmodel
        function ViewModel() {
            var self = this;

            // Data
            self.Hoofdsom   = ko.observableArray();
            self.Betaling   = ko.observableArray();
            self.Kost       = ko.observableArray();

            self.hsBeschr   = ko.observable();
            self.hsBedrag   = ko.observable();
            self.hsVerval   = ko.observable();

            self.hsIntr     = ko.observable();
            self.hsIntrType = ko.observable();

            self.hsSchadeType = ko.observable();
            self.hsSchadePerc = ko.observable(10);
            self.hsSchadeMin = ko.observable(0);
            self.hsSchadeMax = ko.observable(1500);

            // Initial State
            self.Hoofdsom.push("new");

            // Operations
            self.addHoofdsom = function() {
                self.Hoofdsom.push(self.Hoofdsom().length);
            }
            self.remHoofdsom = function(hfd){
                self.Hoofdsom.remove(hfd);
            }
            self.addBetaling = function() {
                self.Betaling.push(self.Betaling().length);
            }
            self.remBetaling = function(bet){
                self.Betaling.remove(bet);
            }
            self.addKost = function() {
                self.Kost.push(self.Kost().length);
            }
            self.remKost = function(kos){
                self.Kost.remove(kos);
            }
        }

        // Apply bindings
        ko.applyBindings(new ViewModel());

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:13:18.550

我不知道我是否正确理解您，但请看一下**“uniqueName”**绑定（如果[在此处](https://github.com/SteveSanderson/knockout/blob/master/build/output/knockout-latest.debug.js#L2421)定义）并使您自己的绑定与此类似 - 应该不会太难 - 请参阅[文档](http://knockoutjs.com/documentation/custom-bindings.html)。

其他唯一值是时间戳 - 看看我为你制作的[这个 jsfiddle -](http://jsfiddle.net/Dx3Dt/1/) *uniqName*函数。

祝你好运 ：）

# iphone - iphone应用程序无法访问服务器 - 以前工作

> ID：10487114
> 
> 赞同：0
> 
> 时间：2012-05-07T18:26:28.067
> 
> 标签：iphone

我遇到了一个有趣的问题。我们的应用程序在星期六之前工作，无法连接到服务器以获取必要的数据。服务器很好，一切都已启动并正在运行，我已重新启动它。支持技术也说过同样的话。所以它指向代码没有改变的东西，或者 ip/database 信息发生了变化并且代码正在使用旧信息；据我所知，我们什么都没改变。我需要检查代码吗？（不是我写的，有人被雇来做的）还是有其他可能导致问题的原因？

错误消息：“应用程序当前无法连接到服务器。请重试。”

这是一个非常不具体的错误消息，所以我假设应用程序的开发人员将那个特定的消息放在他们自己里面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:27:47.077

假设您在 iPhone 上拥有该应用程序，您可能无需进入代码即可诊断（但不一定修复）此问题。[下载 Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)并使用[本教程](http://conceptdev.blogspot.com/2009/01/monitoring-iphone-web-traffic-with.html)设置 iPhone，以便您可以查看网络流量。这将允许您准确查看应用程序向服务器发出的请求，并且您可能能够找出问题所在。您的请求没有发送到服务器，或者服务器正在返回错误消息。无论哪种方式，Fiddler 都应该能够给你这个答案。

**编辑：**

[HTTP Scoop](http://tuffcode.com/)是一个非常易于使用的 Mac 客户端，其功能与 Fiddler 在 PC 上的功能相同。您可以免费使用它 2 周，这样应该足以帮助您。

[查尔斯](http://www.charlesproxy.com/)也会工作。我知道您也可以为此免费试用。

# android - 如何在android中计算设备级别的FPS

> ID：10487115
> 
> 赞同：5
> 
> 时间：2012-05-07T18:26:33.170
> 
> 标签：android

有人知道如何获得安卓设备的 FPS（每秒帧数）吗？

开发设置中有一个显示 FPS 的选项，但我想编写一个应用程序来做同样的事情。

它在内部调用`surfaceflinger`api。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:33:07.790

在您的主`Activity`类中覆盖该`onDraw()`方法。调用`super.onDraw()`然后存储当前系统时间。计算`delta_time`当前调用 draw 和上一次调用 draw 之间的毫秒数。然后使用计算FPS`1000 ms / delta_time ~ FPS`

这是一些伪代码：

```
void onDraw(){
  super.onDraw()
  curTime = getTime();
  deltaTime = curTime - prevTime();
  aproxFps = 1000 / deltaTime;
  prevTime = curTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:09:47.567

除非您对设备进行根植并以某种方式进入引擎盖，否则您无法做到这一点。

# javascript - 在我的桌子内放置代码/图像？

> ID：10487117
> 
> 赞同：0
> 
> 时间：2012-05-07T18:26:46.343
> 
> 标签：javascript, jquery, html

各位晚上好！我遇到了一些问题，需要一些建议或帮助。我在 Photoshop 中设计了一个网站，对其进行切片并将其导出为 HTML/图像。我将 HTML 文件带入 Dreamweaver，这就是我所拥有的，它很棒。

在这里查看切片。

[点击这里](http://japanesefriend.zxq.net/test.html)！

我的问题是，我试图在上面链接中看到的那些空白框中获取一些 JavaScript/Jquery 代码。 [点击这里](http://japanesefriend.zxq.net/test_page.html)！但是当我尝试从上面的链接将图像放入我的布局时，我的布局会完全重新对齐，我似乎无法修复它，看起来像这样[点击这里](http://japanesefriend.zxq.net/test_page2.html)！

我衷心感谢任何可以就此事提供任何帮助或建议的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:32:25.193

好吧，您的第一个问题是为 Web 输出切片的 Photoshop 文件。它做得很糟糕，你真的应该自己做。

其次，您需要确保在该空白点放置图像时所有宽度和高度都相同。

但实际上，您应该重做所有代码。使用图像作为文本是不行的。您的整个网站基本上可以用 HTML/CSS 而不是图像来完成。

# r - ESS 在指定包中找不到文档

> ID：10487118
> 
> 赞同：3
> 
> 时间：2012-05-07T18:26:54.200
> 
> 标签：r, emacs, ess

我正在使用 ESS(12.04)、emacs(23.3.1) 和 R(2.14.1)。它工作得很好，只是如果函数在包内，我无法从 R 打开帮助。例如：

在 R(iESS 模式)

```
> ?ls 
```

我会得到帮助文件，但如果我运行

```
> ?caTools::runmean 
```

我会得到“在指定的包和库中没有'caTools::runmean'的文档：你可以试试'??caTools::runmean'”。

我确信这是 ESS 的问题，因为如果我在 R 控制台中运行该命令，它工作得非常好。以下是我的 .emacs 文件中与 ESS 相关的部分：

```
;; ESS mode
(require 'ess-tracebug)
(add-hook 'ess-post-run-hook 'ess-tracebug)
;; Set to open help in a webbrowser
;;(setq inferior-ess-r-help-command "help(\"%s\", help_type=\"html\")\n")
;;(setq ess-help-own-frame t)
;; ESS-R_object-tooltip
;(require 'ess-R-object-tooltip)
;; Auto completion for R
;;(require 'ac-R)
;;(make-local-variable ac-ignore-case) 
```

我已经注释掉了我的大部分定制，试图在没有运气的情况下识别问题。如果有人有任何意见或怀疑，请指出给我。这一直困扰着我一段时间。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:59:16.683

更新到 ESS 版本 12.09 和 Emacs 24.2 之后。问题消失了。我认为它会成为 ESS 中的一些小错误。

# oracle - Oracle 外键关系

> ID：10487123
> 
> 赞同：0
> 
> 时间：2012-05-07T18:27:06.053
> 
> 标签：oracle, oracle10g, oracle11g

我的`Candidate`表中有一个复合主键

```
CREATE TABLE CANDIDATE(
CANDIDATE_ID VARCHAR(5),
NAME VARCHAR(30),
TELEPHONE NUMBER,
PRIMARY KEY(CANDIDATE_ID, NAME)); 
```

当我创建子表时，我收到一条错误消息，指出当我为 CANDIDATE_ID 创建外键时，引用列的数量必须与引用的列匹配

```
CREATE TABLE JOB(
POSITION_ID VARCHAR(5) PRIMARY KEY,
CANDIDATE_ID VARCHAR(5),
DATE2 DATE,
FOREIGN KEY(CANDIDATE_ID) REFERENCES CANDIDATE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:40:21.233

一张表只能有一个主键——你有一个复合主键。如果您有复合主键，则必须引用子表中的整个键。这意味着子表需要有一`CANDIDATE_ID`列和一`NAME`列。

```
CREATE TABLE job (
  position_id VARCHAR2(5) PRIMARY KEY,
  candidate_id VARCHAR2(5),
  name         VARCHAR2(30),
  date2        DATE,
  FOREIGN KEY( candidate_id, name ) REFERENCES candidate( candidate_id, name )
); 
```

当然，您可能不想将 存储`name`在两个表中。您可能希望`candidate_id`成为 的主键，`candidate`并且您可能希望在 上创建单独的唯一约束`name`。

```
CREATE TABLE CANDIDATE(
  CANDIDATE_ID VARCHAR(5) primary key,
  NAME VARCHAR(30) unique,
  TELEPHONE NUMBER);

CREATE TABLE JOB(
  POSITION_ID VARCHAR(5) PRIMARY KEY,
  CANDIDATE_ID VARCHAR(5),
  DATE2 DATE,
  FOREIGN KEY(CANDIDATE_ID) REFERENCES CANDIDATE(candidate_id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:39:27.663

假设需要 CANDIDATE_ID 和 NAME 的组合才能使键唯一，那么您需要在引用表中添加对 NAME 列的引用。

我怀疑 CANDIDATE_ID 足以唯一标识主表中的候选人。如果是这种情况，那么它应该是您的主键，并且您的关系将起作用。如果您想单独索引 NAME，请执行此操作，但不要将其放在主键之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:37:51.360

最后一行应该是这样的；

CONSTRAINT FK_CANDIDATE_ID FOREIGN KEY (CANDIDATE_ID)REFERENCES CANDIDATE(CANDIDATE_ID);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T05:21:38.583

```
CREATE TABLE dept
( did char(3) not null,
  dname varchar2(20) not null,
  CONSTRAINT dept_pk PRIMARY KEY (did)
); 
```

**强文本**

```
 create table emp
 (
  eid char(3) unique,
  ename varchar2(10) not null,
  sal number check (sal between 20000 AND 50000),
  city varchar2(10) default 'texus',
  did char(3) not null,
  constraint fk_did_dept
  FOREIGN KEY (did) references
  dept(did)
 ); 
```

# web-services - 在 Alfresco 4.0.d 中生成缩略图

> ID：10487135
> 
> 赞同：3
> 
> 时间：2012-05-07T18:27:41.050
> 
> 标签：web-services, thumbnails, alfresco, manual

我正在使用 Alfresco Community 4.0.d 中的 Java Web 服务，目前正在寻找向我的网站添加缩略图功能。我注意到发布新图片后缩略图无法立即使用；我想知道是否有人可以推荐一种手动触发生成的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:12:25.993

在论坛里也回答了你的问题。使用 JavaScript API，您可以要求文档生成其缩略图，如下所示：

```
document.createThumbnail("doclib"); 
```

在这种情况下，“doclib”是 Share 中文档库缩略图的缩略图配置名称，但这可以是您创建的任何缩略图定义。

文档位于[http://docs.alfresco.com/4.0/topic/com.alfresco.enterprise.doc/references/API-JS-Thumbnail-createThumbnail.html](http://docs.alfresco.com/4.0/topic/com.alfresco.enterprise.doc/references/API-JS-Thumbnail-createThumbnail.html)

对于 Java，请查看 org.alfresco.repo.thumbnail.CreateThumbnailActionExecuter 类源。在你自己的课堂上，你可以做类似的事情。或者，更好的是，使用 actionService 来调用 create-thumbnail 操作。

要使用动作服务，您只需要动作的名称和它所期望的参数。例如，当您使用 mail 操作时，它的外观如下：

```
ActionService actionService = getServiceRegistry().getActionService();
Action mailAction = actionService.createAction(MailActionExecuter.NAME);
mailAction.setParameterValue(MailActionExecuter.PARAM_SUBJECT, ExternalReviewNotification.SUBJECT);        
mailAction.setParameterValue(MailActionExecuter.PARAM_TO, recipient);
mailAction.setParameterValue(MailActionExecuter.PARAM_FROM, ExternalReviewNotification.FROM_ADDRESS);
mailAction.setParameterValue(MailActionExecuter.PARAM_TEXT, sb.toString());

actionService.executeAction(mailAction, null); 
```

要为缩略图执行此操作，您将使用“create-thumbnail”作为名称（或 CreateThumbnailActionExecuter.NAME）。查看该类的源代码，我发现它需要两个参数，PARAM_CONTENT_PROPERTY，它是“cm：content”，和 PARAM_THUMBNAIL_NAME，它是普通文档库缩略图的“doclib”，或者如果你定义了你的缩略图名称自己的。

需要注意的一点是，在 executeAction 调用中，第二个参数是“对 noderef 执行的操作”。在您的情况下，您会希望它成为您为其生成缩略图的节点。

# java - AndroidHttp Exception NoClassDefFoundError

> ID：10487140
> 
> 赞同：0
> 
> 时间：2012-05-07T18:27:54.500
> 
> 标签：java, android, noclassdeffounderror, google-api-java-client

Well am using eclipse to make an android app which accesses google calendar API am getting a NoClassDefFoundError Exception whenever i tried to execute this method

```
private void setupCalendarConnection(final String accessToken) throws IOException {

    HttpTransport transport = AndroidHttp.newCompatibleTransport();// Here where the exception 
    GoogleCredential googleCredential = new GoogleCredential().setAccessToken(accessToken);
    JacksonFactory jacksonFactory = new JacksonFactory(); 
```

also i tried to replace it with

> HttpTransport transport = new NetHttpTransport () ;

and i got the same error

```
05-07 20:08:04.513: E/AndroidRuntime(781): java.lang.NoClassDefFoundError: com.google.api.client.extensions.android2.AndroidHttp 
```

From my knowledge in Java.. This exception means that the class am trying to access is not defined by classLoader ALTHOUGH i checked the dependencies and JAR files included and it is included and imported

So any clue about how can i solve this problem Thank you in advance..

Eclipse 3.7 Indigo --- Google-java-client-api 1.8----Android ICS(4.0.3) Api lvl 15

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:39:36.607

Go to your build path in Eclipse via **Project** >> **Properties**, then **Java Build Path**. Under the tab **Order and Export**, tick the library you are importing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:19:52.490

Problem Solved when i headed for Netbeans instead of Eclipse and imported my Jars manually in the libs folder... automatically added to Project and it is running like a fire horse.

# ms-access - 存在的问题：Access 2007、VBA、父子表单、记录集不可更新

> ID：10487141
> 
> 赞同：0
> 
> 时间：2012-05-07T18:27:55.480
> 
> 标签：ms-access, vba

这是复杂的。我对 Access 不太熟悉，而且我是一名程序员（意思是，我可能会让自己变得更难，而没有看到“简单”的答案）。

所以让我们考虑（示例）：我们有一个图书馆数据库。我有一本书的特定副本。我的书可能有几种状态：已签出、在架上、已销毁、闻起来很奇怪/很粘/无法使用……我需要/在 Access 中有两种表格。一个用于我的书的基本信息，另一个用于实际更新状态。随着状态的变化，需要记录大量数据，因此需要单独的表格。书单本身只包含基本信息和出租历史的小子表格；书的形式需要包括当前状态。我的实际状态表有一个 statusid、bookid、timestamp。

现在......因为我不知道 Access 会有问题......我将我的书和状态表格都未绑定，并用来自 VBA 的记录/查询填充它们。但是当我试图将两者联系起来时，它对我大喊大叫；“未绑定”它告诉我。我认为这很好，并将查询移到实际的前端访问查询部分（左侧）并移出 vba 并适当地绑定我的表单。但现在。它说我的记录集不可更新。我假设是因为我使用了连接和嵌套选择语句等来获取本书的当前状态。我只需要能够修改这些文本字段，我就可以自己编写插入/更新。我在网上发现了一些东西说要创建一个表，但我也读到这在多用户环境中不起作用。

所以……我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:58:54.770

如果我对您的理解正确，您的问题是您在主窗体中有一个复杂的查询，并且想要打开第二个表单来更新该查询的一个基础表，然后想要更改新打开的表单中的当前记录并保存它然后重新查询原始表格？我知道你是一名程序员，所以在我看来，最通用的方法是：主窗体上的按钮，它以模式模式打开具有正确记录的新窗体（确保其余的原始窗体代码在模式之后执行）窗体已关闭），在模态窗体中施展你的魔法，然后重新查询主窗体。

尝试这样的事情：

```
Private Sub myButton_Click()
  DoCmd.OpenForm "myEditForm", acNormal, , ID = 4, acFormEdit, acDialog
  me.requery
End Sub 
```

# javascript - 使用javascript按属性获取iframe的元素

> ID：10487142
> 
> 赞同：0
> 
> 时间：2012-05-07T18:27:55.467
> 
> 标签：javascript, attributes, element

所有，我有一个关于使用 javascript 按属性获取 iframe 元素的问题。

1.html

```
<iframe id="if" src="2.html">
<div attr="test"> 
```

2.html

```
<div attr="test"> 
```

我已经知道如果父页面想通过属性获取它的元素，我们可以使用 jQuery 之类的

```
$("div[attr='test']") 
```

但是 parent 如何通过属性获取它的 iframe 元素呢？

请写一些简单的代码进行解释，非常感谢！

贾罗德

我找到了一个解决方案并进行了测试：

```
$("iframe[data-label='if']").contents().find("div[attr='test']"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:28:58.620

如果我没有完全离开：

```
$("iframe div[attr='test']")... 
```

或与`id`：

```
$("#if div[attr='test']")... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T14:27:54.730

你试过了吗？

```
window.frameElement.getAttribute("data-media"); 
```

# css - CSS 标头并没有完全消失（Safari 5.1.5。和所有其他浏览器也是如此）

> ID：10487143
> 
> 赞同：1
> 
> 时间：2012-05-07T18:27:56.140
> 
> 标签：css, safari, cross-browser

我有这个网站...

[http://willruppelglass.com/](http://willruppelglass.com/)

它在我的机器和我测试过的所有浏览器上看起来都不错，但有人告诉我黑色标题并没有完全消失在标题上。我做错了什么......之前在所有浏览器中右边都有一个很大的空白......所以我改变了这个......

```
.headerNav {
    color: 
    black;
    margin: 0 auto;
    width: 1280px;
    padding-top: 140px;
    padding-left: 230px;
    } 
```

对此

```
.headerNav {
    color: 
    black;
    margin: 0 auto;
    width: 1050px; /* decrease the width of the div to compensate for the padding-left */
    padding-top: 140px;
    padding-left: 230px;
    } 
```

但现在标题似乎并没有一直穿过

有问题的浏览器是 Safari 5.1.5。

任何帮助将不胜感激，感谢提前，J

这是我正在处理的屏幕截图... ![在此处输入图像描述](../Images/93ecb2af0a978154fe8258dea4b4da27.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:00:39.743

1 rep says that he is shrinking the browser smaller than 1050px and then scrolling to the right, which is something that is not fixable (the width of `<body>` cannot be larger than the viewport). The same thing happens with the background for the header and footer of Stack Overflow.

# xml - 使用 Linq 进行 XML 解析

> ID：10487150
> 
> 赞同：0
> 
> 时间：2012-05-07T18:28:28.270
> 
> 标签：xml, linq, windows-phone-7, collections, windows-phone-7.1

我想用 Linq 解析 XML。

这是我的 XML 数据。

```
 <?xml version="1.0" encoding="utf-8" ?>
    <people>
      <person>
        <firstname>Kate</firstname>
        <lastname>Smith</lastname>
        <Address>Address</Address>
        <Address>Address2</Address>
        <Address>Address3</Address>
        <age>27</age>
      </person>
      <person>
        <firstname>Tom</firstname>
        <lastname>Brown</lastname>
        <Address>Address4</Address>
        <Address>Address5</Address>
        <Address>Address6</Address>
        <age>30</age>
      </person>
      <person>
        <firstname>Tim</firstname>
        <lastname>Stone</lastname>
        <Address>Address7</Address>
        <Address>Address8</Address>
        <Address>Address9</Address>
        <age>36</age>
      </person>
      <person>
        <firstname>Ann</firstname>
        <lastname>Peterson</lastname>
        <Address>Address10</Address>
        <Address>Address11</Address>
        <Address>Address12</Address>
        <age>27</age>
      </person>
    </people>

public class XmlParser
    {
        List<Person> List = new List<Person>();
        public XmlParser()
        {
            XDocument loadedData = XDocument.Load("Persons.xml");
            var data = (from query in loadedData.Descendants("person")
                select new Person
                {
                    FirstName = (string)query.Element("firstname"),
                    LastName = (string)query.Element("lastname"),
                    //Address = (List<string>)query.Element("Address"), // I Want To Load All Address Into My List
                    Age = (int)query.Element("age")
                }).ToList();
            List.AddRange(data);
        }

        public class Person
        {
            string firstname;
            string lastname;
            List<string> address;
            int age;

            public string FirstName
            {
                get { return firstname; }
                set { firstname = value; }
            }

            public string LastName
            {
                get { return lastname; }
                set { lastname = value; }
            }

            public List<string> Address
            {
                get { return address; }
                set { address = value; }
            }

            public int Age
            {
                get { return age; }
                set { age = value; }
            }

        }
    } 
```

任何人都可以帮助我如何在 LINQ 查询中将地址添加到列表中。如您所见，person 下有许多地址节点。那么如何将所有地址添加到我的列表对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:46:30.773

获取元素列表的一种方法是在原始 linq 查询中嵌套另一个 linq 查询。

```
var loadedData = XDocument.Load("Persons.xml");
var data = (from query in loadedData.Descendants("person")
            select new Person
            {
                FirstName = (string)query.Element("firstname"),
                LastName = (string)query.Element("lastname"),
                Address = (from address in query.Elements("Address") 
                           select address.Value).ToList(),
                Age = (int)query.Element("age")
            }); 
```

这种模式一直出现在 linq to xml 中，所以我会记住它。

# java - 比较两个图像以进行运动检测

> ID：10487152
> 
> 赞同：2
> 
> 时间：2012-05-07T18:28:35.117
> 
> 标签：java, android, detection, motion, getpixel

我已经开始通过使用简单算法计算不同像素的数量来区分两个图像：

```
private int returnCountOfDifferentPixels(String pic1, String pic2)
    {
        Bitmap i1 = loadBitmap(pic1);
        Bitmap i2 = loadBitmap(pic2);
        int count=0;

        for (int y = 0; y < i1.getHeight(); ++y)
               for (int x = 0; x < i1.getWidth(); ++x)
                    if (i1.getPixel(x, y) != i2.getPixel(x, y)) 
                        {
                        count++;
                        }

          return count;

    } 
```

然而，这种方法在其初始形式中似乎效率低下，因为即使在非常相似的照片中也总是存在大量不同的像素。我在想一种方法来确定两个像素是否真的那么不同。来自 android 的 bitmap.getpixel(x,y) 返回一个 Color 对象。

如何正确区分两个 Color 对象，以帮助进行运动检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:28:10.867

你是对的，由于噪声和其他因素，视频流中通常会有很多原始像素变化。以下是您可能要考虑的一些选项：

1.  首先模糊图像，理想情况下使用高斯滤波器或简单的箱形滤波器。这仅意味着您对相邻像素和像素本身进行（加权）平均值。这应该已经大大降低了传感器噪声。

2.  `count`只有当它大于某个阈值时才添加差异。这样做的效果是只考虑真正变化很大的像素。这很容易实现，并且可能已经单独解决了您的问题。

想了想，先试试这两个选项。如果他们不成功，我可以给你更多的选择。

**编辑：**我刚刚看到您实际上并没有总结差异，而只是计算了不同的像素。如果您将它与选项 2 结合使用，这很好。选项 1 仍然有效，但它可能有点矫枉过正。

此外，要找出两种颜色之间的区别，请使用[Color 类](http://developer.android.com/reference/android/graphics/Color.html)的方法：

```
int p1 = i1.getPixel(x, y);
int p2 = i2.getPixel(x, y);
int totalDiff = Color.red(p1) - Color.red(p2) + Color.green(p1) - Color.green(p2) + Color.blue(p1) - Color.blue(p2); 
```

现在您可以提出一个`totalDiff`必须超过才能做出贡献的阈值`count`。

当然，您可以通过各种方式处理这些数字。例如，上面的代码仅计算像素强度（亮度）的变化。如果您还想考虑色调和饱和度的变化，则必须这样计算`totalDiff`：

```
int totalDiff = Math.abs(Color.red(p1) - Color.red(p2)) + Math.abs(Color.green(p1) - Color.green(p2)) + Math.abs(Color.blue(p1) - Color.blue(p2)); 
```

另外，请查看其他方法`Color`，例如`RGBToHSV(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T20:35:37.057

我知道这本质上与此处的另一个答案非常相似，但我认为以不同的形式重述它可能对那些寻求解决方案的人有用。这涉及随着时间的推移有两个以上的图像。如果你只是从字面上看，那么这将不起作用，但等效的方法会起作用。

对每帧上的所有像素进行历史记录。例如，对于每个像素： `history[x, y] = (history[x, y] * (w - 1) + get_pixel(x, y)) / w`

`w`可能在哪里`w = 20`。运动的尖峰越高`w`，但要重置的运动必须越长。

然后确定是否发生了变化，您可以对每个像素执行此操作：

`changed_delta = abs(history[x, y] - get_pixel(x, y))`

`total_delta += changed_delta`

你会发现它稳定了大部分噪音，当运动发生时，你会得到很大的不同。您实际上是在拍摄许多帧并从许多帧中检测到最新帧的运动。

此外，为了检测运动位置，请考虑将图像分成更小的部分并单独进行。然后，您可以通过将单个图像视为单独图像的网格来查找对象并在屏幕上跟踪它们。

# bash - Intellij Idea 的 Bash 完成风格

> ID：10487155
> 
> 赞同：5
> 
> 时间：2012-05-07T18:28:45.180
> 
> 标签：bash, intellij-idea

有没有比普通的更智能的 bash 完成。我想象有类似 Intellij Idea 的自动完成功能。例如，是否有一个名为**anExampleFolder**的文件夹，如果我键入**aEF**甚至**aef**然后按 Tab 即可完成它或以某种方式打开一个下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T19:01:54.407

[fzf](https://github.com/junegunn/fzf) ("fuzzy finder for your shell") 可能就是你要找的东西。对于 cd-ing 到 anExampleFolder 的示例，您有 3 个使用 fzf 的选项：

*   fd `RET`aEF`↑</kbd>`↑</kbd>`RET`

    *   Launch `fzf` with recursive list of child directories. Enter fuzzy search term `aEF`, select match with arrow keys, accept.`` 
*   `ALT``C`aEF`↑</kbd>`↑</kbd>`RET`

    *   Same as above but using a key binding instead of shell function`` 
*   cd aEF**`TAB``↑</kbd>`↑</kbd>`RET``RET`

    *   Using the experimental auto-completion integration`` 

请注意，在所有情况下，如果模糊搜索找到您要查找的内容作为第一个匹配项，则可能不需要箭头键。它还可以用于许多其他的东西`cd`；GitHub [README](https://github.com/junegunn/fzf/blob/master/README.md)有很多其他示例和绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:39:49.423

正如 sylvanaar 所说 - Intellij的[Bash 插件](http://plugins.intellij.net/plugin/?id=4230)应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:49:16.293

zsh 具有插件等智能自动完成机制。结合[oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)和插件[fasd](https://github.com/clvv/fasd)，您应该可以实现比 IntelliJ 提供的更多的功能。

# javascript - Internet Explorer 本地存储

> ID：10487157
> 
> 赞同：4
> 
> 时间：2012-05-07T18:28:57.023
> 
> 标签：javascript, html, internet-explorer, local-storage

我有一个适用于除 IE 之外的所有浏览器的应用程序。我正在使用 HTML5 提供的本地数据库。我需要为应用程序的用户存储 3 个属性。我知道在 IE 中我不能使用数据库方法，我正在考虑使用存储在本地存储中的 3 个数组，每个属性一个数组。有没有更好（更简单）的方法来做到这一点？

谢谢

例如，我想存储 1）目的地 2）它们来自哪里 3）日期 所以我想我将存储一个目的地数组，一个来自位置的数组和一个日期数组。然后使用一些 id 我可以索引数组并获取相应的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:48:15.663

如果您需要本地存储，那么您需要本地存储！根据您描述的信息，我认为在会话 cookie 中使用它可能太重了。

查看[文档](http://msdn.microsoft.com/en-us/library/bg142799(v=vs.85).aspx)。请注意，只有 IE8+ 支持此功能，因此如果您需要支持其他版本 - 您需要做一些额外的工作。

我会在可能的情况下亲自启用 localStorage，然后如果浏览器不支持它（并且数据对于 cookie 来说肯定太多），则回退到服务器的往返行程。

## 更新 RE Polyfills

[请记住，如果浏览器不支持 localStorage 等， Rafael](https://stackoverflow.com/users/1243806/rafael-motta)建议的polyfill将回退到 cookie。请务必使用良好的数据分布进行测试，并记住它将在每个请求中发送所有数据（这有它自己的后果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:52:17.757

对于 IE，可以使用 polyfill 来模拟原生 localStorage：[https ://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

LocalStorage 使用键：值系统。但是您可以使用 JSON.Stringify 和 JSON.parse 在一个键中保存多个数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T18:20:26.777

IE 中的 localStorage 不适用于此 url：file:///P:/Dropbox/abc_web/ingrid8/ingrid.htm#car..

如果可行，通过网络：file://pedrojelp/p/Dropbox/abc_web/ingrid8/ingrid.htm#car..

# django - Django - 过滤“向后”关系中的相关对象

> ID：10487158
> 
> 赞同：0
> 
> 时间：2012-05-07T18:28:56.893
> 
> 标签：django, filter, models, relationship

我一直在研究一些具有“后向”关系的模型。我开始想……如果我想过滤一些结果怎么办？

我有两个模型：

```
Model A:
 name
 image
 date 

Model B:
 ForeignKey to Model A
 name
 date 
```

要访问模型 AI，请使用：p = A.objects.all().order_by('-date')

我将它传递给模板。

在模板中：

```
{% for n in model_a.all %}
  {% for item in n.modelb_set.all %}

   <li>{{item.name}}</li>

  {% endfor %}
{% endfor %} 
```

我得到了模型 A 的所有向后相关的对象，这很好。

现在，如果我想从该查询中过滤一些结果怎么办？

我正在考虑通过以下方式在视图中进行迭代：

```
p = A.objects.all().order_by('-date')

for n in p:
    for x in n.modelb_set.filter(date_lte=""):
    ls = []
    ls.append[x] 
```

我如何将它传递给模板并获得我之前得到的（未过滤视图）但现在过滤结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:42:50.610

最好的方法是在模型中添加一个方法。用一个真实世界的模型例子来说明会更容易，但要点是：

```
class ModelA:
    ...
    def filtered_modelb_set(self):
        return self.modelb_set.filter(...)
    ... 
```

然后，在您的模板中，您只需调用该方法：

```
{% for n in model_a.all %}
    {% for item in n.filtered_modelb_set %}

    <li>{{item.name}}</li>

    {% endfor %}
{% endfor %} 
```

# java - 我们在 JBox2d 中有 RopeJoint 吗？

> ID：10487163
> 
> 赞同：0
> 
> 时间：2012-05-07T18:29:13.697
> 
> 标签：java, android, box2d, jbox2d

只是一个快速的问题，似乎 jbox2d 中缺少 RopeJoint ......是真的如此还是他们将其重命名为什么？

距离接头工作正常，但我希望它是灵活的，就像一根绳子，而不是一根金属棒。:)

```
 DistanceJointDef jointDef = new DistanceJointDef();

    jointDef.initialize(body1, body2, new Vec2(0,0) , new Vec2(0,-10) );

    jointDef.collideConnected = true;
    getWorld().createJoint(jointDef); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:35:53.817

[这是不受支持的](http://code.google.com/searchframe#bxk7uDy-ONM/trunk/jbox2d-serialization/src/main/java/org/jbox2d/serialization/pb/PbDeserializer.java&q=ROPE%20package%3ahttp://jbox2d%5C.googlecode%5C.com&l=397)afaik。

# jquery - 使用 jQuery 提交表单下拉菜单

> ID：10487164
> 
> 赞同：1
> 
> 时间：2012-05-07T18:29:25.203
> 
> 标签：jquery, forms, wordpress, form-submit

我正在使用一个名为[dropkick](http://jamielottering.github.com/DropKick/)的下拉插件，它将选择菜单替换为更好看的自定义下拉菜单。我想在这个下拉列表中显示我的 WordPress 类别列表。这是生成下拉列表的 PHP 代码：

```
<form action="<?php bloginfo('url'); ?>/" method="get" class="pretty">
    <?php $select = wp_dropdown_categories('show_option_none=Select category&show_count=1&orderby=name&echo=0');
    echo $select; ?>
</form> 
```

将其转换为“漂亮的下拉菜单”的 JavaScript 代码如下。

```
$('.pretty select').dropkick({
      theme: 'default',
      change: function (value, label) {
         INSERT CALLBACK HERE
      }
}); 
```

我需要编写一个回调，在用户选择一个类别后提交表单。我该怎么办？

我尝试使用`return this.form.submit()`并且也`return $(this).parent().form.submit()`没有提交表单。如何使用 jQuery 自动提交表单？

表单动作和方法已在表单中定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:39:11.727

Christofer Eliasson 的回答可能是正确的，但以防万一您有多个表格，这会更好：

```
$(this).closest('form').submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:32:13.057

您可以使用 jQuery[`.submit()`](http://api.jquery.com/submit/)发布表单。

鉴于您在 DOM 中只有一个带有 class`pretty`的表单，您可以像这样发布表单：

```
$("form.pretty").submit(); 
```

# c - 是否可以调用驻留在 exe 中的非导出函数？

> ID：10487165
> 
> 赞同：18
> 
> 时间：2012-05-07T18:29:27.243
> 
> 标签：c, windows, assembly, x86, reverse-engineering

我想调用驻留在第 3 方 .exe 中的函数并获取其结果。似乎*应该*有办法，只要我知道函数地址，调用约定等......但我不知道如何。

**有谁知道我会怎么做？**

我意识到任何解决方案都是非标准的破解，但*必须*有办法！

* * *

我的非恶意用例：我正在为我的软件逆向工程文件格式。这个函数的计算太复杂了，我的小脑袋想不通；我已经能够将汇编代码直接拉到我自己的 DLL 中进行测试，但我当然不能发布它，因为那会偷窃。我将假设用户已经预先安装了这个特定的应用程序，所以我的软件可以运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T04:23:12.780

这是可能的，但并非微不足道。是的，这是一个非常肮脏的黑客行为。

在某些情况下，使用 LoadLibrary 加载 EXE 文件就足够了。返回的 HMODULE 实际上是加载的 EXE 的基地址。将其转换为合适的 int 类型，将您的相对函数地址添加到其中，将其转换回函数指针并通过该指针调用函数。

不幸的是，EXE 文件的重定位信息可能会被剥离。这意味着 EXE 将期望从特定地址运行。在这种情况下，您必须更改自己程序的基地址以避免冲突。查看链接器的文档，应该有一个选项可以做到这一点。之后，LoadLibrary 会将 EXE 加载到其首选的基地址中，希望一切正常。

这里有一些非常有用的[信息](http://sandsprite.com/CodeStuff/Using_an_exe_as_a_dll.html)。请务必检查页面末尾的更新，以了解在某些情况下可能会更好的不同技术。

**编辑：**正如亚历克斯在下面的评论中正确指出的那样，如果函数依赖于一些初始化值，或者它调用这样的函数，包括大多数 C 运行时函数，那么让它工作起来会困难得多。可以识别初始化函数并预先调用它们，但在这些情况下使用[调试 API](http://msdn.microsoft.com/en-us/library/ms809754.aspx)可能是您最好的选择。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T15:46:44.520

好的，我已经组装了一个原型。

该程序创建另一个自身实例作为已调试的子进程。

在 main() 和 CRT 初始化代码之前会遇到一个自动断点。这是我们可以更改被调试进程的内存和寄存器以使其执行感兴趣的功能的时候。这就是程序所做的。

它试图捕捉和处理所有不良情况（例如意外异常）并将它们报告为错误。

一种糟糕的情况实际上是一种好的情况。这是程序放入被调试进程的 UD2 指令中的#UD 异常。它使用此#UD 在感兴趣的函数返回后停止流程执行。

还有一些注意事项：

1.  此代码仅为 32 位。我什至没有尝试让它 64 位可编译或支持 64 位子进程。

2.  此代码可能会泄漏句柄。请参阅 MSDN 上的 Windows Debug API 函数描述以找出需要关闭它们的位置。

3.  此代码仅是概念证明，不支持通过 EAX、ECX 和 EDX 以外的指针或寄存器传递和返回数据。您必须根据需要扩展它。

4.  ~~此代码需要一些权限才能创建和完全调试进程。如果您的程序的用户不是管理员，您可能不得不担心这一点。~~

享受。

代码：

```
// file: unexported.c
//
// compile with Open Watcom C/C++: wcl386 /q /wx /we /s unexported.c
//   (Note: "/s" is needed to avoid stack check calls from the "unexported"
//    functions, these calls are through a pointer, and it'll be
//    uninitialized in our case.)
//
// compile with MinGW gcc 4.6.2: gcc unexported.c -o unexported.exe
#include <windows.h>
#include <stdio.h>
#include <string.h>
#include <stdarg.h>
#include <limits.h>

#ifndef C_ASSERT
#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]
#endif

// Compile as a 32-bit app only.
C_ASSERT(sizeof(void*) * CHAR_BIT == 32);

#define EXC_CODE_AND_NAME(X) { X, #X }

const struct
{
  DWORD Code;
  PCSTR Name;
} ExcCodesAndNames[] =
{
  EXC_CODE_AND_NAME(EXCEPTION_ACCESS_VIOLATION),
  EXC_CODE_AND_NAME(EXCEPTION_ARRAY_BOUNDS_EXCEEDED),
  EXC_CODE_AND_NAME(EXCEPTION_BREAKPOINT),
  EXC_CODE_AND_NAME(EXCEPTION_DATATYPE_MISALIGNMENT),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_DENORMAL_OPERAND),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_DIVIDE_BY_ZERO),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_INEXACT_RESULT),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_INVALID_OPERATION),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_OVERFLOW),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_STACK_CHECK),
  EXC_CODE_AND_NAME(EXCEPTION_FLT_UNDERFLOW),
  EXC_CODE_AND_NAME(EXCEPTION_ILLEGAL_INSTRUCTION),
  EXC_CODE_AND_NAME(EXCEPTION_IN_PAGE_ERROR),
  EXC_CODE_AND_NAME(EXCEPTION_INT_DIVIDE_BY_ZERO),
  EXC_CODE_AND_NAME(EXCEPTION_INT_OVERFLOW),
  EXC_CODE_AND_NAME(EXCEPTION_INVALID_DISPOSITION),
  EXC_CODE_AND_NAME(EXCEPTION_NONCONTINUABLE_EXCEPTION),
  EXC_CODE_AND_NAME(EXCEPTION_PRIV_INSTRUCTION),
  EXC_CODE_AND_NAME(EXCEPTION_SINGLE_STEP),
  EXC_CODE_AND_NAME(EXCEPTION_STACK_OVERFLOW),
  EXC_CODE_AND_NAME(EXCEPTION_GUARD_PAGE),
  EXC_CODE_AND_NAME(DBG_CONTROL_C),
  { 0xE06D7363, "C++ EH exception" }
};

PCSTR GetExceptionName(DWORD code)
{
  DWORD i;

  for (i = 0; i < sizeof(ExcCodesAndNames) / sizeof(ExcCodesAndNames[0]); i++)
  {
    if (ExcCodesAndNames[i].Code == code)
    {
      return ExcCodesAndNames[i].Name;
    }
  }

  return "?";
}

typedef enum tCallConv
{
  CallConvCdecl,    // Params on stack; caller removes params
  CallConvStdCall,  // Params on stack; callee removes params
  CallConvFastCall  // Params in ECX, EDX and on stack; callee removes params
} tCallConv;

DWORD Execute32bitFunctionFromExe(PCSTR ExeName,
                                  int FunctionAddressIsRelative,
                                  DWORD FunctionAddress,
                                  tCallConv CallConvention,
                                  DWORD CodeDataStackSize,
                                  ULONG64* ResultEdxEax,
                                  DWORD DwordParamsCount,
                                  .../* DWORD params */)
{
  STARTUPINFO startupInfo;
  PROCESS_INFORMATION processInfo;
  DWORD dwContinueStatus = DBG_CONTINUE; // exception continuation
  DEBUG_EVENT dbgEvt;
  UCHAR* procMem = NULL;
  DWORD breakPointCount = 0;
  DWORD err = ERROR_SUCCESS;
  DWORD ecxEdxParams[2] = { 0, 0 };
  DWORD imageBase = 0;
  CONTEXT ctx;
  va_list ap;

  va_start(ap, DwordParamsCount);

  *ResultEdxEax = 0;

  memset(&startupInfo, 0, sizeof(startupInfo));
  startupInfo.cb = sizeof(startupInfo);
  memset(&processInfo, 0, sizeof(processInfo));

  if (!CreateProcess(
    NULL,
    (LPSTR)ExeName,
    NULL,
    NULL,
    FALSE,
    DEBUG_ONLY_THIS_PROCESS, // DEBUG_PROCESS,
    NULL,
    NULL,
    &startupInfo,
    &processInfo))
  {
    printf("CreateProcess() failed with error 0x%08X\n",
           err = GetLastError());
    goto Cleanup;
  }

  printf("Process 0x%08X (0x%08X) \"%s\" created,\n"
         "  Thread 0x%08X (0x%08X) created\n",
         processInfo.dwProcessId,
         processInfo.hProcess,
         ExeName,
         processInfo.dwThreadId,
         processInfo.hThread);

  procMem = VirtualAllocEx(
    processInfo.hProcess,
    NULL,
    CodeDataStackSize,
    MEM_COMMIT | MEM_RESERVE,
    PAGE_EXECUTE_READWRITE);

  if (procMem == NULL)
  {
    printf("VirtualAllocEx() failed with error 0x%08X\n",
           err = GetLastError());
    goto Cleanup;
  }

  printf("Allocated RWX memory in process 0x%08X (0x%08X) "
         "at address 0x%08X\n",
         processInfo.dwProcessId,
         processInfo.hProcess,
         procMem);

  while (dwContinueStatus)
  {
    // Wait for a debugging event to occur. The second parameter indicates
    // that the function does not return until a debugging event occurs.
    if (!WaitForDebugEvent(&dbgEvt, INFINITE))
    {
      printf("WaitForDebugEvent() failed with error 0x%08X\n",
             err = GetLastError());
      goto Cleanup;
    }

    // Process the debugging event code.
    switch (dbgEvt.dwDebugEventCode)
    {
    case EXCEPTION_DEBUG_EVENT:
    // Process the exception code. When handling
    // exceptions, remember to set the continuation
    // status parameter (dwContinueStatus). This value
    // is used by the ContinueDebugEvent function.

      printf("%s (%s) Exception in process 0x%08X, thread 0x%08X\n"
             "  Exc. Code = 0x%08X (%s), Instr. Address = 0x%08X",
             dbgEvt.u.Exception.dwFirstChance ?
               "First Chance" : "Last Chance",
             dbgEvt.u.Exception.ExceptionRecord.ExceptionFlags ?
               "non-continuable" : "continuable",
             dbgEvt.dwProcessId,
             dbgEvt.dwThreadId,
             dbgEvt.u.Exception.ExceptionRecord.ExceptionCode,
             GetExceptionName(dbgEvt.u.Exception.ExceptionRecord.ExceptionCode),
             dbgEvt.u.Exception.ExceptionRecord.ExceptionAddress);

      if (dbgEvt.u.Exception.ExceptionRecord.ExceptionCode ==
          EXCEPTION_ACCESS_VIOLATION)
      {
        ULONG_PTR* info = dbgEvt.u.Exception.ExceptionRecord.ExceptionInformation;
        printf(",\n  Access Address = 0x%08X, Access = 0x%08X (%s)",
               (DWORD)info[1],
               (DWORD)info[0],
               (info[0] == 0) ?
                 "read" : ((info[0] == 1) ? "write" : "execute")); // 8 = DEP
      }

      printf("\n");

      // Get the thread context (register state).
      // We'll need to either display it (in case of unexpected exceptions) or
      // modify it (to execute our code) or read it (to get the results of
      // execution).
      memset(&ctx, 0, sizeof(ctx));
      ctx.ContextFlags = CONTEXT_INTEGER | CONTEXT_CONTROL;
      if (!GetThreadContext(processInfo.hThread, &ctx))
      {
        printf("GetThreadContext() failed with error 0x%08X\n",
               err = GetLastError());
        goto Cleanup;
      }

#if 0
      printf("  EAX=0x%08X EBX=0x%08X ECX=0x%08X EDX=0x%08X EFLAGS=0x%08X\n"
             "  ESI=0x%08X EDI=0x%08X EBP=0x%08X ESP=0x%08X EIP=0x%08X\n",
             ctx.Eax, ctx.Ebx, ctx.Ecx, ctx.Edx, ctx.EFlags, 
             ctx.Esi, ctx.Edi, ctx.Ebp, ctx.Esp, ctx.Eip);
#endif

      if (dbgEvt.u.Exception.ExceptionRecord.ExceptionCode == EXCEPTION_BREAKPOINT &&
          breakPointCount == 0)
      {
        // Update the context so our code can be executed
        DWORD mem, i, data;
        SIZE_T numberOfBytesCopied;

        mem = (DWORD)procMem + CodeDataStackSize;

        // Child process memory layout (inside the procMem[] buffer):
        //
        //    higher
        //  addresses
        //      .
        //      .     UD2 instruction (causes #UD, indicator of successful
        //      .     completion of FunctionAddress())
        //      .
        //      .     last on-stack parameter for FunctionAddress()
        //      .     ...
        //      .     first on-stack parameter for FunctionAddress()
        //      .
        //      .     address of UD2 instruction (as if "call FunctionAddress"
        //      .     executed just before it and is going to return to UD2)
        //      .     (ESP will point here)
        //      .
        //      .     FunctionAddress()'s stack
        //      .
        //    lower
        //  addresses

        mem -= 2;
        data = 0x0B0F; // 0x0F, 0x0B = UD2 instruction
        if (!WriteProcessMemory(processInfo.hProcess,
                                (PVOID)mem,
                                &data,
                                2,
                                &numberOfBytesCopied))
        {
ErrWriteMem1:
          printf("WriteProcessMemory() failed with error 0x%08X\n",
                 err = GetLastError());
          goto Cleanup;
        }
        else if (numberOfBytesCopied != 2)
        {
ErrWriteMem2:
          printf("WriteProcessMemory() failed with error 0x%08X\n",
                 err = ERROR_BAD_LENGTH);
          goto Cleanup;
        }

        // Copy function parameters.

        mem &= 0xFFFFFFFC; // align the address for the stack

        for (i = 0; i < DwordParamsCount; i++)
        {
          if (CallConvention == CallConvFastCall && i < 2)
          {
            ecxEdxParams[i] = va_arg(ap, DWORD);
          }
          else
          {
            data = va_arg(ap, DWORD);
            if (!WriteProcessMemory(processInfo.hProcess,
                                    (DWORD*)mem - DwordParamsCount + i,
                                    &data,
                                    sizeof(data),
                                    &numberOfBytesCopied))
            {
              goto ErrWriteMem1;
            }
            else if (numberOfBytesCopied != sizeof(data))
            {
              goto ErrWriteMem2;
            }
          }
        }

        // Adjust what will become ESP according to the number of on-stack parameters.
        for (i = 0; i < DwordParamsCount; i++)
        {
          if (CallConvention != CallConvFastCall || i >= 2)
          {
            mem -= 4;
          }
        }

        // Store the function return address.
        mem -= 4;
        data = (DWORD)procMem + CodeDataStackSize - 2; // address of UD2
        if (!WriteProcessMemory(processInfo.hProcess,
                                (PVOID)mem,
                                &data,
                                sizeof(data),
                                &numberOfBytesCopied))
        {
          goto ErrWriteMem1;
        }
        else if (numberOfBytesCopied != sizeof(data))
        {
          goto ErrWriteMem2;
        }

        // Last-minute preparations for execution...
        // Set up the registers (ECX, EDX, EFLAGS, EIP, ESP).

        if (CallConvention == CallConvFastCall)
        {
          if (DwordParamsCount >= 1) ctx.Ecx = ecxEdxParams[0];
          if (DwordParamsCount >= 2) ctx.Edx = ecxEdxParams[1];
        }

        ctx.EFlags &= ~(1 << 10); // clear DF for string instructions
        ctx.Eip = FunctionAddress + imageBase * !!FunctionAddressIsRelative;
        ctx.Esp = mem;

        if (!SetThreadContext(processInfo.hThread, &ctx))
        {
          printf("SetThreadContext() failed with error 0x%08X\n",
                 err = GetLastError());
          goto Cleanup;
        }

        printf("Copied code/data to the process\n");

#if 0
        for (i = esp; i < (DWORD)procMem + CodeDataStackSize; i++)
        {
          data = 0;
          ReadProcessMemory(processInfo.hProcess,
                            (void*)i,
                            &data,
                            1,
                            &numberOfBytesCopied);
          printf("E[SI]P = 0x%08X: 0x%02X\n", i, data);
        }
#endif

        breakPointCount++;
        dwContinueStatus = DBG_CONTINUE; // continue execution of our code
      }
      else if (dbgEvt.u.Exception.ExceptionRecord.ExceptionCode == EXCEPTION_ILLEGAL_INSTRUCTION &&
               breakPointCount == 1 &&
               ctx.Eip == (DWORD)procMem + CodeDataStackSize - 2/*UD2 size*/)
      {
        // The code has finished execution as expected.
        // Collect the results.

        *ResultEdxEax = ((ULONG64)ctx.Edx << 32) | ctx.Eax;

        printf("Copied code/data from the process\n");

        dwContinueStatus = 0; // stop debugging
      }
      else
      {
        // Unexpected event. Do not continue execution.

        printf("  EAX=0x%08X EBX=0x%08X ECX=0x%08X EDX=0x%08X EFLAGS=0x%08X\n"
               "  ESI=0x%08X EDI=0x%08X EBP=0x%08X ESP=0x%08X EIP=0x%08X\n",
               ctx.Eax, ctx.Ebx, ctx.Ecx, ctx.Edx, ctx.EFlags, 
               ctx.Esi, ctx.Edi, ctx.Ebp, ctx.Esp, ctx.Eip);

        err = dbgEvt.u.Exception.ExceptionRecord.ExceptionCode;
        goto Cleanup;
      }
      break; // case EXCEPTION_DEBUG_EVENT:

    case CREATE_PROCESS_DEBUG_EVENT:
    // As needed, examine or change the registers of the
    // process's initial thread with the GetThreadContext and
    // SetThreadContext functions; read from and write to the
    // process's virtual memory with the ReadProcessMemory and
    // WriteProcessMemory functions; and suspend and resume
    // thread execution with the SuspendThread and ResumeThread
    // functions. Be sure to close the handle to the process image
    // file with CloseHandle.
      printf("Process 0x%08X (0x%08X) "
             "created, base = 0x%08X,\n"
             "  Thread 0x%08X (0x%08X) created, start = 0x%08X\n",
             dbgEvt.dwProcessId,
             dbgEvt.u.CreateProcessInfo.hProcess,
             dbgEvt.u.CreateProcessInfo.lpBaseOfImage,
             dbgEvt.dwThreadId,
             dbgEvt.u.CreateProcessInfo.hThread,
             dbgEvt.u.CreateProcessInfo.lpStartAddress);
      // Found image base!
      imageBase = (DWORD)dbgEvt.u.CreateProcessInfo.lpBaseOfImage;
      dwContinueStatus = DBG_CONTINUE;
      break;

    case EXIT_PROCESS_DEBUG_EVENT:
    // Display the process's exit code.
      printf("Process 0x%08X exited, exit code = 0x%08X\n",
             dbgEvt.dwProcessId,
             dbgEvt.u.ExitProcess.dwExitCode);
      // Unexpected event. Do not continue execution.
      err = ERROR_PROC_NOT_FOUND;
      goto Cleanup;

    case CREATE_THREAD_DEBUG_EVENT:
    case EXIT_THREAD_DEBUG_EVENT:
    case LOAD_DLL_DEBUG_EVENT:
    case UNLOAD_DLL_DEBUG_EVENT:
    case OUTPUT_DEBUG_STRING_EVENT:
      dwContinueStatus = DBG_CONTINUE;
      break;

    case RIP_EVENT:
      printf("RIP: Error = 0x%08X, Type = 0x%08X\n",
             dbgEvt.u.RipInfo.dwError,
             dbgEvt.u.RipInfo.dwType);
      // Unexpected event. Do not continue execution.
      err = dbgEvt.u.RipInfo.dwError;
      goto Cleanup;
    } // end of switch (dbgEvt.dwDebugEventCode)

    // Resume executing the thread that reported the debugging event.
    if (dwContinueStatus)
    {
      if (!ContinueDebugEvent(dbgEvt.dwProcessId,
                              dbgEvt.dwThreadId,
                              dwContinueStatus))
      {
        printf("ContinueDebugEvent() failed with error 0x%08X\n",
               err = GetLastError());
        goto Cleanup;
      }
    }
  } // end of while (dwContinueStatus)

  err = ERROR_SUCCESS;

Cleanup:

  if (processInfo.hProcess != NULL)
  {
    if (procMem != NULL)
    {
      VirtualFreeEx(processInfo.hProcess, procMem, 0, MEM_RELEASE);
    }
    TerminateProcess(processInfo.hProcess, 0);
    CloseHandle(processInfo.hThread);
    CloseHandle(processInfo.hProcess);
  }

  va_end(ap);

  return err;
}

int __cdecl FunctionCdecl(int x, int y, int z)
{
  return x + y + z;
}

int __stdcall FunctionStdCall(int x, int y, int z)
{
  return x * y * z;
}

ULONG64 __fastcall FunctionFastCall(DWORD x, DWORD y, DWORD z)
{
  return (ULONG64)x * y + z;
}

int main(int argc, char** argv)
{
  DWORD err;
  ULONG64 resultEdxEax;

  err = Execute32bitFunctionFromExe(argv[0]/*ExeName*/,
                                    1/*FunctionAddressIsRelative*/,
                                    (DWORD)&FunctionCdecl -
                                      (DWORD)GetModuleHandle(NULL),
                                    CallConvCdecl,
                                    4096/*CodeDataStackSize*/,
                                    &resultEdxEax,
                                    3/*DwordParamsCount*/,
                                    2, 3, 4);
  if (err == ERROR_SUCCESS)
    printf("2 + 3 + 4 = %d\n", (int)resultEdxEax);

  err = Execute32bitFunctionFromExe(argv[0]/*ExeName*/,
                                    1/*FunctionAddressIsRelative*/,
                                    (DWORD)&FunctionStdCall -
                                      (DWORD)GetModuleHandle(NULL),
                                    CallConvStdCall,
                                    4096/*CodeDataStackSize*/,
                                    &resultEdxEax,
                                    3/*DwordParamsCount*/,
                                    -2, 3, 4);
  if (err == ERROR_SUCCESS)
    printf("-2 * 3 * 4 = %d\n", (int)resultEdxEax);

  err = Execute32bitFunctionFromExe(argv[0]/*ExeName*/,
                                    1/*FunctionAddressIsRelative*/,
                                    (DWORD)&FunctionFastCall -
                                      (DWORD)GetModuleHandle(NULL),
                                    CallConvFastCall,
                                    4096/*CodeDataStackSize*/,
                                    &resultEdxEax,
                                    3/*DwordParamsCount*/,
                                    -1, -1, -1);
  if (err == ERROR_SUCCESS)
    printf("0xFFFFFFFF * 0xFFFFFFFF + 0xFFFFFFFF = 0x%llX\n",
           (unsigned long long)resultEdxEax);

  return 0;
} 
```

输出：

```
Process 0x00001514 (0x00000040) "C:\MinGW\msys\1.0\home\Alex\unexported.exe" cre
ated,
  Thread 0x00000CB0 (0x0000003C) created
Allocated RWX memory in process 0x00001514 (0x00000040) at address 0x002B0000
Process 0x00001514 (0x00000044) created, base = 0x00400000,
  Thread 0x00000CB0 (0x00000048) created, start = 0x0040126C
First Chance (continuable) Exception in process 0x00001514, thread 0x00000CB0
  Exc. Code = 0x80000003 (EXCEPTION_BREAKPOINT), Instr. Address = 0x77090FAB
Copied code/data to the process
First Chance (continuable) Exception in process 0x00001514, thread 0x00000CB0
  Exc. Code = 0xC000001D (EXCEPTION_ILLEGAL_INSTRUCTION), Instr. Address = 0x002
B0FFE
Copied code/data from the process
2 + 3 + 4 = 9
Process 0x00001828 (0x0000003C) "C:\MinGW\msys\1.0\home\Alex\unexported.exe" cre
ated,
  Thread 0x00001690 (0x00000040) created
Allocated RWX memory in process 0x00001828 (0x0000003C) at address 0x002B0000
Process 0x00001828 (0x0000006C) created, base = 0x00400000,
  Thread 0x00001690 (0x00000074) created, start = 0x0040126C
First Chance (continuable) Exception in process 0x00001828, thread 0x00001690
  Exc. Code = 0x80000003 (EXCEPTION_BREAKPOINT), Instr. Address = 0x77090FAB
Copied code/data to the process
First Chance (continuable) Exception in process 0x00001828, thread 0x00001690
  Exc. Code = 0xC000001D (EXCEPTION_ILLEGAL_INSTRUCTION), Instr. Address = 0x002
B0FFE
Copied code/data from the process
-2 * 3 * 4 = -24
Process 0x00001388 (0x00000040) "C:\MinGW\msys\1.0\home\Alex\unexported.exe" cre
ated,
  Thread 0x00001098 (0x0000003C) created
Allocated RWX memory in process 0x00001388 (0x00000040) at address 0x002B0000
Process 0x00001388 (0x0000008C) created, base = 0x00400000,
  Thread 0x00001098 (0x00000090) created, start = 0x0040126C
First Chance (continuable) Exception in process 0x00001388, thread 0x00001098
  Exc. Code = 0x80000003 (EXCEPTION_BREAKPOINT), Instr. Address = 0x77090FAB
Copied code/data to the process
First Chance (continuable) Exception in process 0x00001388, thread 0x00001098
  Exc. Code = 0xC000001D (EXCEPTION_ILLEGAL_INSTRUCTION), Instr. Address = 0x002
B0FFE
Copied code/data from the process
0xFFFFFFFF * 0xFFFFFFFF + 0xFFFFFFFF = 0xFFFFFFFF00000000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:46:57.343

除了将 EXE 加载到您的进程中之外，还有两种更好的（IMO）方法：

1）使用调试API（或类似PyDbg）在调试器下启动目标，然后在堆栈中设置参数，将EIP设置为必要的地址，在返回地址设置断点，然后继续。

2）用一些IPC制作一个小DLL来与你的程序通信，将它注入目标（有几种方法可以做到，最简单的可能是键盘挂钩）并让它调用必要的代码。或者您也可以使用现有的也可以做到这一点，例如[Intel 的 PIN](http://www.cs.virginia.edu/kim/publicity/pin/docs/39599/Pin/html/group__PIN__CONTROL.html#g8fa128a4393b96cc7f292d17d2ef0ba4)。

# c - ncurses 在屏幕上显示多种颜色

> ID：10487166
> 
> 赞同：13
> 
> 时间：2012-05-07T18:29:28.773
> 
> 标签：c, command-line, window, ncurses

我想用一种`ncurses.h`以上的颜色制作菜单。我的意思是这样的：

```
┌────────────────────┐
│░░░░░░░░░░░░░░░░░░░░│ <- color 1
│▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒│ <- color 2
└────────────────────┘ 
```

但是如果我使用`init_pair()`，`attron()`并且`attroff()`整个屏幕的颜色是一样的，而不是像我预期的那样。

```
initscr();

init_pair(0, COLOR_BLACK, COLOR_RED);
init_pair(1, COLOR_BLACK, COLOR_GREEN);

attron(0);
printw("This should be printed in black with a red background!\n");
refresh();

attron(1);
printw("And this in a green background!\n");
refresh()    

sleep(2);

endwin(); 
```

这段代码有什么问题？

感谢您的每一个回答！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-07T19:06:44.897

这是一个工作版本：

```
#include <curses.h>

int main(void) {
    initscr();
    start_color();

    init_pair(1, COLOR_BLACK, COLOR_RED);
    init_pair(2, COLOR_BLACK, COLOR_GREEN);

    attron(COLOR_PAIR(1));
    printw("This should be printed in black with a red background!\n");

    attron(COLOR_PAIR(2));
    printw("And this in a green background!\n");
    refresh();

    getch();

    endwin();
} 
```

笔记：

*   您需要调用`start_color()`后`initscr()`才能使用颜色。
*   您必须使用`COLOR_PAIR`宏来传递分配`init_pair`给`attron`等的颜色对。
*   您不能使用颜色对 0。
*   您只需要调用`refresh()`一次，并且仅当您希望在那时看到您的输出，*并且*您没有调用像`getch()`.

[这个 HOWTO](http://www.google.com/url?sa=t&rct=j&q=curses%20howto&source=web&cd=1&ved=0CF0QFjAA&url=http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/&ei=MxyoT7uvCc2biQenjPnLAw&usg=AFQjCNEvip2fQeZ8sCtDw0BoHAtmL7Uf6w&cad=rja)非常有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:06:20.403

您需要初始化颜色并使用 COLOR_PAIR 宏。

颜色对是为*默认颜色*`0`保留的，因此您必须从.*`1`*

 *```
....

initscr();
start_color();

init_pair(1, COLOR_BLACK, COLOR_RED);
init_pair(2, COLOR_BLACK, COLOR_GREEN);

attron(COLOR_PAIR(1));
printw("This should be printed in black with a red background!\n");

.... 
```*

# c# - 在需要时更新 DP 以查看而不是更改

> ID：10487170
> 
> 赞同：0
> 
> 时间：2012-05-07T18:30:27.383
> 
> 标签：c#, wpf, mvvm

例如，假设我有一个组合框，其 itemsSource 绑定到依赖项属性。绑定列表值可以根据许多因素而改变。计算这些值需要大量时间，因此除非必要，否则我不希望应用程序更新集合。仅当视图中需要数据时（即当组合框下拉时），MVVM 中“懒惰”更新绑定属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:41:29.143

我会添加一个方法`ViewModel`：

```
class ViewModel {
    public void Refresh() {
        // ...
    }

    // ...
} 
```

...并在必要时在您的控制范围内调用它。

```
class Control : UserControl {
    private ViewModel ViewModel = new ViewModel();

    void OnDropDown() {
        ViewModel.Refresh();
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:44:06.170

您的 ViewModel 应该知道屏幕上的所有绑定数据，因此您的 ViewModel 会以某种方式获取下拉列表的数据。

触发获取的通常是 ViewModel 中的“命令”，通常来自按钮单击或任何其他视图事件。

# jsp - GoogleWeather 无法解析为类型

> ID：10487171
> 
> 赞同：1
> 
> 时间：2012-05-07T18:30:28.430
> 
> 标签：jsp, tomcat, google-api, httpurlconnection, google-weather-api

我正在编写我的第一个 JSP 页面，并且正在尝试连接到 Google Weather API。所以我希望你能对我有耐心。这是我的 JSP 页面：

```
<%@ page import="controller.GoogleWeather" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Zipcode - Weather</title>
        <%
            if(request.getParameter("zipcode") != null) {
                GoogleWeather gw = new GoogleWeather(request.getParameter("zipcode"));
                gw.getWeatherFromServer();
            }
        %>
    </head>
    ..... // body goes here. 
```

这是我的控制器类`GoogleWeather.java`：

```
package controller;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.ProtocolException;
import java.net.URL;
public class GoogleWeather {
    private float temp_f;
    private float humidity;
    private String condition;
    private String zipcode;

    public GoogleWeather(String zipcode) {
        this.zipcode = zipcode;
    }

    public void getWeatherFromServer() {
        HttpURLConnection connection = null;
          BufferedReader rd  = null;
          StringBuilder sb = null;
          String line = null;

          URL serverAddress = null;

          try {
              serverAddress = new URL("http://www.google.com/ig/api");
              //set up out communications stuff
              connection = null;

              //Set up the initial connection
              connection = (HttpURLConnection)serverAddress.openConnection();connection.setRequestProperty("weather", this.zipcode);
              connection.setRequestMethod("GET");
              connection.setDoOutput(true);
              connection.setReadTimeout(10000);

              connection.connect();

              //read the result from the server
              rd  = new BufferedReader(new InputStreamReader(connection.getInputStream()));
              sb = new StringBuilder();

              while ((line = rd.readLine()) != null)
              {
                  sb.append(line + '\n');
              }

              System.out.println(sb.toString());

          } catch (MalformedURLException e) {
              e.printStackTrace();
          } catch (ProtocolException e) {
              e.printStackTrace();
          } catch (IOException e) {
              e.printStackTrace();
          }
          finally
          {
              //close the connection, set all objects to null
              connection.disconnect();
              rd = null;
              sb = null;
              connection = null;
          }
    }

    public float getTemp_f() {
        return temp_f;
    }

    public void setTemp_f(float temp_f) {
        this.temp_f = temp_f;
    }

    public float getHumidity() {
        return humidity;
    }

    public void setHumidity(float humidity) {
        this.humidity = humidity;
    }

    public String getCondition() {
        return condition;
    }

    public void setCondition(String condition) {
        this.condition = condition;
    }
} 
```

我得到的错误和堆栈跟踪如下。

```
An error occurred at line: 12 in the jsp file: /Weather.jsp
GoogleWeather cannot be resolved to a type
9: <%
10:
11: if(request.getParameter("zipcode") != null) {
12:     GoogleWeather gw = new GoogleWeather(request.getParameter("zipcode"));
13:     gw.getWeatherFromServer();
14: }
15:

Stacktrace:
    at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:457)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:644)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:358)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我尝试查看一些在线资源，但它们非常混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:56:47.013

根据上面 Dave Newton 的评论，在 /WEB-INF/classes 文件夹中部署类文件。

# node.js - 在 PHP 应用程序中使用 node.js 和 socket.io

> ID：10487172
> 
> 赞同：4
> 
> 时间：2012-05-07T18:30:39.057
> 
> 标签：node.js, socket.io

我有工作的 PHP 应用程序。它允许用户创建私人项目并邀请其他人参与其中。现在，使用 node.js 和 socket.io，我想进行实时评论、发帖等。

什么是最好的架构？

我现在看到两种解决方案。

第一个是：

*   用户向 PHP 后端发送 AJAX 查询： [http](http://example.com/comment_add.php?text=) ://example.com/comment_add.php?text= ...
*   comment_add.php 将评论添加到数据库并通过 AMPQ（或更好的方法？）通知 node.js 服务器，该服务器将评论广播给频道的订阅者。

第二个是：

*   用户向 node.js 服务器发送 AJAX 查询：[http ://example.com:3000/comment_add](http://example.com:3000/comment_add)
*   Node.js 向 PHP 后端发送请求（但是如何？授权呢？），接收响应，然后广播给频道的订阅者。

什么是最好的方法？还有其他方法吗？如何正确实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:54:26.190

当你决定使用 node.js + socket.io 来做一个实时的 web 应用程序时，你不需要再考虑 PHP 并且忘记 Ajax ...... Socket.io 将是客户端和服务器之间的通信.

但是，是的，您可以使用 Ajax 和 PHP 快速构建网站，以及其他一些不需要实时的功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:02:50.400

第二种方法是最好的方法。您可以使用 http 从 node.js 与 PHP 进行通信。授权可以在 node.js 中完成，但每次都将身份验证凭据传递给 PHP

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T07:26:56.483

最后我的工作解决方案是#1。

当用户建立与 node.js/socket.io 的连接时，他只需使用他的 PHP 会话 ID 向 node.js 发送“订阅”消息。Node.js 使用对 PHP 后端的 POST 请求检查授权，如果一切正常，则允许用户建立连接。

前端将所有请求发送到 PHP，就像在 node.js 之前一样。PHP 修改了一些对象，检查谁可以访问修改的对象并将消息（通过 AMQP 或 redis pub/sub 等）发送到 node.js：

```
{
    id_object: 125342,
    users: [5, 23, 9882]
} 
```

node.js 然后检查列出的用户中谁拥有活动套接字，并为每个用户向 PHP 发送 GET 请求：

```
{
    userId: 5,
    id_object: 125342
} 
```

接收此请求的特殊 PHP 控制器运行查询以获取具有给定用户 ID 权限的对象，然后将消息发送到 node.js 并得到结果。Node.js 然后通过套接字将答案发送到用户的前端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:08:21.070

一年前，我在大学开始我的最后一年项目时遇到了同样的问题。我意识到我的项目更适合单独使用 Node。Node 非常擅长处理 I/O，这可以是从 HTTP 请求到数据库查询的任何事情。在 Node 后面添加基于 PHP 的 Web 服务器会增加不必要的复杂性。如果您的应用程序需要执行 CPU 密集型任务，您可以很容易地生成执行所需操作的“子”节点，并将结果返回给您的父节点。

但是，在您提到的两种方法中，我会选择＃2。Node.js 可以通过多种方式与您的 PHP 服务器通信，您可以考虑在 PHP 服务器和 Node.js 之间创建一个 unix 套接字连接。如果这不可用，您可以简单地使用 HTTP 在 Node 和您的 PHP 后端之间进行通信。:)

看看这里，这是一个与您自己的问题非常相似的问题的解决方案：http: [//forum.kohanaframework.org/discussion/comment/57607](http://forum.kohanaframework.org/discussion/comment/57607)

# javascript - 无法在 IE8 及以下版本中使用 jQuery 添加/删除类

> ID：10487173
> 
> 赞同：0
> 
> 时间：2012-05-07T18:30:43.047
> 
> 标签：javascript, jquery, internet-explorer

我正在使用 jQuery 显示和隐藏页面中的部分。该方法在 Chrome、FF 和 Safari 中有效，但在 IE8 和 7 中失效。尝试使用动画、淡入淡出和不透明度。在 IE 中似乎没有任何效果。根据 IE Developer Tools 的 js 控制台，被选中的元素有一个 'active' 类，但是当我在 Dev Tools html 窗口中查看 dom 树时，active' 类并没有被删除或重写到 DOM。

标记

```
<nav> 
<ul>
<li id="foo">Show Section 1</li>
<li id="bar">Show Section 2</li>
</ul>
</nav>

<div id="items">
<section class="foo">Content Section 1</section>
<section class="bar">Content Section 2</section>
</div> 
```

CSS

```
#items > section {display: none;}
.active {display: block;} 
```

JS

```
$('nav li').click(function(){
    var $me = $(this);
showSection($me.attr('id'));
});

showSection function(whichSection){
    $('#items > section').removeClass('active');    
    $('#items > '+'.'+whichSection).addClass('active');
} 
```

任何意见是极大的赞赏。我正处于一个令人讨厌的截止日期之下。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:35:34.940

你把你的身份证和班级搞混了。

```
$('nav li').click(function(){
    var $me = $(this);
    showSection($me.attr('id'));
});

showSection function(whichSection){
    $('#items > section').removeClass('active');    
    $('#items > #' + whichSection).addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:36:35.893

你的函数声明是错误的：

```
 function showSection (whichSection){
      $('#items > section').removeClass('active');    
      $('#items > #' + whichSection).addClass('active');
  } 
```

或者

```
 var showSection = function(whichSection){
        $('#items > section').removeClass('active');    
        $('#items > #' + whichSection).addClass('active');
    } 
```

**注意：IE 不理解** `section`. **所以你可以使用** ***html5shiv / Modernizr。***找出 HTML5 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:36:22.070

IE8及以下不理解`section`标签除非你强制它知道标签，你可以使用`html5shiv`js库。

[http://code.google.com/p/html5shiv](http://code.google.com/p/html5shiv)

# ssis - SSIS 查找 - 未知代码确定

> ID：10487185
> 
> 赞同：1
> 
> 时间：2012-05-07T18:32:19.000
> 
> 标签：ssis

多个 SSIS 包将数据导入多个参考表（即国家、货币、语言等）。

如果传入的数据代码不是这些参考表中代码的一部分（即语言有一个未知代码），这些表中的每一个都有特殊的值。这样做是为了保持参照完整性并跟踪我们系统未知的传入代码。这是完全正常的，我们需要保持这个过程。

SSIS 如何轻松确定传入值不是引用代码集的一部分？发生这种情况时，如何为其分配未知代码？

有没有办法在多个列上全局执行此操作？

我试图避免对源中的每一列使用查找任务。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:37:39.197

我看到的唯一可能的方法是使用代码表的合并连接运算符（具有完全连接），然后使用派生表将 NULL 转换为您想要的任何内容。

但是你为什么不想使用查找呢？仅仅因为您必须查找的列数量而您担心性能？如果这就是问题，我建议您尝试使用配置的 FULL CACHE 选项来实现查找。这样，查找查询（示例中的代码）将只执行一次，结果将保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:04:36.580

使用查找转换。这是实现这一目标的最简单方法。

# unit-testing - 使用起订量和通用类型装箱问题

> ID：10487190
> 
> 赞同：0
> 
> 时间：2012-05-07T18:32:28.990
> 
> 标签：unit-testing, tdd, moq

我尝试使用 Moq 和 nunit 制作通用辅助方法，如下所述

```
public void PrepareWebRequest<T>() where T : new()
    {            
        httpCommunicator = new Mock<IHttpCommunicator>();
        httpCommunicator.Setup(x => x.Post(It.IsAny<Object>(),
                                                      It.IsAny<string>())).Throws<T>();

        service = new ApiClient(httpCommunicator.Object);
    } 
```

但这会导致以下错误：

类型“T”不能用作泛型类型或方法“Moq.Language.IThrows.Throws()”中的类型参数“TException”。没有从“T”到“System.Exception”的装箱转换或类型参数转换。

我知道这可以通过不在 Moq 上使用通用方法来重构，但我真的很想知道我做错了什么。

最好的问候拉斯穆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:55:13.287

问题是 Where 子句中缺少异常。应该

```
public void PrepareWebRequest<T>() where T : Exception, new()
{            
    httpCommunicator = new Mock<IHttpCommunicator>();
    httpCommunicator.Setup(x => x.Post(It.IsAny<Object>(),
                                                  It.IsAny<string>())).Throws<T>();

    service = new ApiClient(httpCommunicator.Object);
} 
```

# eclipse - 如何使用 Tycho 将版本保留在包含在 eclipse 插件中的库的文件名中

> ID：10487192
> 
> 赞同：1
> 
> 时间：2012-05-07T18:32:34.460
> 
> 标签：eclipse, maven, eclipse-plugin, tycho

我有一个使用 Tycho 0.12.0 构建的插件。此插件具有（快照）maven 依赖项，例如`foobar:0.1.1-SNAPSHOT`. 这种依赖关系会定期更新（每天）。物理文件包含快照的日期和时间 (foobar-0.1.0-20120507.135021-6.jar)。我想用快照构建，因为我想用最新的开发版本进行测试。

因此，当我构建项目时，更新的依赖项会按预期复制到`lib/`目录中，并且编译和构建正常。

但是，MANIFEST.MF Bundle-ClassPath 没有得到更新，所以当插件安装时，它实际上并没有工作，因为类路径不正确。

我当前使用的解决方案是将 maven-dependency-plugin 正在写入的文件的名称覆盖为 be `foobar-0.1.1-SNAPSHOT.jar`，但我更愿意保留快照的完整版本号，以便我可以参考它。这可能吗？是否可以使用正在使用的 SNAPSHOT 依赖项的完全限定名称更新 MANIFEST.MF，还是我必须自己手动操作 MANIFEST.MF？

我可以自己编写一些东西来操纵 MANIFEST.MF，但我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:15:32.940

我宁愿在复制期间剥离版本：

[http://maven.apache.org/plugins/maven-dependency-plugin/copy-mojo.html#stripVersion](http://maven.apache.org/plugins/maven-dependency-plugin/copy-mojo.html#stripVersion)

那么你就有了一个稳定的 jar 文件名。

# sql - 如何在没有 EF 的 ASP.NET MVC 中使用普通 sql？

> ID：10487202
> 
> 赞同：3
> 
> 时间：2012-05-07T18:33:22.680
> 
> 标签：sql, asp.net-mvc-3

我有这个类使用 linq to sql，如何在不使用 EF 的情况下在 ASP.NET MVC 3 中使用普通 sql 来实现相同的功能？

```
public ActionResult Index()
{
    var List  = (from c in db.OFFICE
                 join s in db.CAMPUS_UNIVERSITY on c.IdCampus equals s.IdCampus
                 join u in db.UNIVERSITY on s.IdUniversity equals u.IdUniversity
                 select u).ToList();

    return View(List);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T18:58:21.157

这只是一个示例。（经过测试和工作）。也就是说，您将`GetUniversities`方法保留在控制器类中。我建议您将该`GetUniversities`方法移动到某个服务层，以便许多 UI/控制器可以使用它。

```
 public ActionResult Index()
    {
       var items= GetUniversities();
       return View(items);
    }

    private List<DataRow> GetUniversities()
    {
        List<DataRow> list=null;
        string srtQry = "SELECT  U.* FROM Office O  INNER JOIN  
                         CampusUniversity CU ON  O.IdCampus equals CU.IdCampus
                         INNER JOIN UNIVERSITY U ON U.IdUniversity=CU.IdUniversity";
        string connString = "Database=yourDB;Server=yourServer;UID=user;PWD=password;";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            string strQry = "";
            using(SqlCommand objCommand = new SqlCommand(srtQry, conn))
            {
               objCommand.CommandType = CommandType.Text;
               DataTable dt = new DataTable();
               SqlDataAdapter adp = new SqlDataAdapter(objCommand);
               conn.Open();
               adp.Fill(dt);
               if (dt != null)
               {
                  list = dt.AsEnumerable().ToList();
               }
            }
        }
        return list;
    } 
```

请记住，GetCustomers 方法返回一个 DataRows 列表。不是您的自定义域实体。**实体框架为您提供域实体列表**。因此，在自定义 SQL 案例中，您需要自己将 Data Row 映射到自定义对象的实例。

使用 LINQ，您可以将 DataRow 列表转换为您的自定义对象，如下所示

```
public ActionResult Index()
{
   var items= GetCustomers();    

   var newItems = (from p in items
                       select new
                       {
                           Name= p.Field<String>("Name"),
                           CampusName= p.Field<String>("CampusName")
                       }).ToList();

    return View(newItems);
} 
```

这将为您提供具有 2 个属性的匿名类型列表，`Name`并且`CampusName`. 假设 Name 和 CampusName 是查询结果中的 2 列。

**EDIT2：根据评论，要在视图中列出这些数据，**请在 Views 文件夹下的控制器（我们在其中编写此操作方法）文件夹中创建一个名为 Index 的视图。我们需要使其成为强类型视图。可是等等！我们要将什么类型传递给视图？

我们的结果是匿名类型。因此，在这种情况下，我们将创建一个 ViewModel，而不是匿名，我们将返回 ViewModel 的列表。

```
public class UniversityViewModel
{
  public string UniversityName { set;get;}
  public string CampusName { set;get;}
} 
```

现在我们将像这样更新索引操作中的代码。

```
var newItems = (from p in items
                 select new UserViewModel
                 {
                    UniversityName = p.Field<String>("Name"),
                    CampusName = p.Field<String>("CampusName")
                 }).ToList(); 
```

唯一的变化是我们现在在这里提到了一个类型。所以输出不再是匿名类型。但已知类型。

让我们回到我们的视图并编写这样的代码。

```
@model IEnumerable<SO_MVC.Models.UserViewModel>
@foreach (var item in Model)
{
   <p>@item .UniversityName @item.CampusName</p>
} 
```

这个视图被强类型化到我们的 ViewModel 的集合中。像往常一样，我们正在循环播放并显示。这应该可以正常工作。它经过测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:37:39.930

这不一定是 MVC 特定的。您可以在 Webforms 或 Windows Forms 等中做同样的事情。看看使用[ADO.NET](http://www.csharp-station.com/Tutorial/AdoDotNet/Lesson01)进行查询或[Dapper](http://code.google.com/p/dapper-dot-net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:37:17.577

```
SELECT
    u.*
FROM
    OFFICE c
    INNER JOIN CAMPUS_UNIVERSITY s ON c.IdCampus = s.IdCampus
    INNER JOIN UNIVERSITY u ON s.IdUniversity = u.IdUniversity 
```

# cakephp - cake php 电子邮件助手 - 内部错误

> ID：10487203
> 
> 赞同：0
> 
> 时间：2012-05-07T18:33:48.757
> 
> 标签：cakephp, cakephp-2.0

我正在尝试使用 cake php 电子邮件组件发送电子邮件：

`var $components = array('Email');`

```
$email = new CakeEmail();
$email->from(array('me@example.com' => 'My Site'));
$email->to('xxx@gmail.com');
$email->subject('About');
$email->send('My message'); 
```

而且我总是收到消息：无法发送电子邮件。发生内部错误。在错误日志中有“SocketException”。

我正在使用 cakephp 2.0。

我应该如何配置以使其正常工作？我不想使用任何 smtp 服务器等，我只想发送简单的电子邮件。

我在我的电脑上使用 WAMP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:38:21.817

取消注释该行：`extension=php_openssl.dll`在`php.ini`. 这将解决您的套接字问题。

我还要说的一件事是：

您正在混合两个核心库和组件。供参考

EmailComponent 现在已弃用。所以改用核心库。

有关更多详细信息，请查看此链接[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T22:12:04.313

调试异常。

我敢打赌，您无法打开与邮件服务器的连接。看起来更像是您的邮件服务器设置或与它的连接的错误，而不是 CakePHp。

对于 Windows 的简单邮件服务器设置，我建议您使用 XAMPP，它带有预配置的邮件服务器 Pegasus，对我来说工作起来既简单又快速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:27:08.787

这看起来确实是您的邮件服务器设置或与其连接的错误。但是，您混淆了 EmailComponent 的 CakeEmail 类。

首先，您不是尝试使用 emailComponent 发送电子邮件，而是使用新的 CakeMail 类（来自 2.x 的新类）。因此，这：

```
var $components = array('Email'); 
```

和这个：

```
$email = new CakeEmail(); 
```

是两个不同的东西。第一个加载 EmailComponent，但您根本没有使用它。从 2.x 开始的 EmailComponent 已被弃用。在您的示例中，您使用的是 CakeEmail 类。

首先，您应该确保实际加载了该类：

```
App::uses('CakeEmail', 'Network/Email'); 
```

然后检查您是否有配置文件：

```
App/Config/email.php 
```

我想您当前正在使用默认配置选项。这意味着默认传输是“邮件” - PHP**邮件**功能。我想你得到一个*SocketException*，因为它无法连接到底层的邮件传输代理，并且因为它试图通过系统套接字这样做......（我认为 Windows 中不存在，但我可能是错了。我确定在 windows API 中有类似的东西用于进程间通信）

无论如何，使用默认的电子邮件配置是可以的。阅读 CakePHP 书籍中关于[CakeEmail](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)类的部分。

# ssl - https客户端证书注销/重新登录

> ID：10487205
> 
> 赞同：17
> 
> 时间：2012-05-07T18:33:57.813
> 
> 标签：ssl, https, certificate, logout, client-certificates

我有一个使用 ssl 证书身份验证的网站。如何强制服务器上的网络浏览器再次询问要使用的证书？它可用于注销，但这里的用例是切换用户身份。

我记得一些关于将用户引导到 ssl 设置与当前身份验证证书不兼容但找不到正确设置的页面。

我的设置使用 apache mod-ssl，但也欢迎使用 IIS 解决方案。

更新：我特别询问服务器端：如何在需要客户端证书但拒绝所有证书的同一主机名上设置 URL。

对于 Firefox，`javascript:window.crypto.logout();`确实会为用户带来轻微的不便（我相信可以编写脚本）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T18:53:55.003

这通常是相当困难的（当然也是大多数用户使用客户端证书可能很乏味的原因之一）。

从客户端来看，有一些 JavaScript 技术，但它们并未得到全面支持（请参阅[此问题](https://stackoverflow.com/q/9724489/372643)）。

使用 Apache Tomcat 7，您可以使用请求属性使 SSL/TLS 会话无效，如[本问题](https://stackoverflow.com/q/10229027/372643)中所述。

我不知道有任何钩子可以让您使用 Apache Httpd（和`mod_ssl`）执行此操作。Apache Httpd 背后可用的机制（例如`mod_php`，CGI、FCGI、...）通常无法更改由 设置的任何设置或环境变量`mod_ssl`，这对于使会话无效是必要的。

在 IIS 上，[这个问题](https://stackoverflow.com/q/7919412/372643)仍然没有答案。

从浏览器的角度来看，一般的方法是进入其设置并清除 SSL 状态（这取决于浏览器，但通常至少需要几个对话框，而不仅仅是一个快速按钮，至少不需要没有插件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T14:45:06.727

从客户端 Web 浏览器中，您可以为 MSIE（Internet Explorer）执行此操作：通过转到工具>Internet 选项>内容（选项卡）>清除 SSL 状态来清除 SSL 状态。

在 Firefox（20 版之前）中，您可以执行以下操作：工具 | 开始隐私浏览。

然后访问相关页面。或者然后执行“工具|停止隐私浏览”然后...

然后，当您重新加载您所在的页面时，它会提示您提供新的客户端证书（如果您有多个来自服务器信任的 CA 的证书）。否则，如果您只有一个证书，它将使用您商店中的唯一一个 PKI 客户端证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T17:23:36.730

对于注销阅读这篇文章：[https ://security.stackexchange.com/questions/36853/is-it-possible-to-force-a-new-ssl-session#](https://security.stackexchange.com/questions/36853/is-it-possible-to-force-a-new-ssl-session#)

> 在客户端，SSL 会话通常保存在 RAM 中。例如，Internet Explorer 在内部由多个相互通信的进程组成，您必须将它们全部杀死才能使其忘记 SSL 会话（实际上，这仅在您关闭所有 IE 窗口时才会发生）。

另一种方法是使用 javascript 关闭浏览器。

# c# - 在多行文本框中滚动除顶行之外的所有内容

> ID：10487207
> 
> 赞同：0
> 
> 时间：2012-05-07T18:34:10.963
> 
> 标签：c#, winforms, textbox, multiline

我在 WinForms 应用程序中有一个多行文本框。我想做的是始终使顶行可见，即使它滚动。有人知道这样做有什么技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:40:53.533

假装。使用两个 TextBox 对象，绘制自己的边框。您将需要自己处理换行到下一行。

您还可以将前 X 个字符复制到标签，这样当 TextBox 滚动时，他们可以看到标签中的第一行。

除非它是必不可少的功能，否则我会尝试删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:18:41.097

简单的答案；根据您想要的外观，是使用现有的 Windows 控件来获得您想要的效果。

您可以在文本框上方使用标签控件并允许文本框滚动。您可以使用两个文本框 - 顶部的 .multiline 属性设置为 false，而底部允许滚动。

您可以将这一切封装到用户控件中以实现可重用性。

除此之外，我认为您会查看一个相当大的项目来实现具有所需行为的控件（或至少覆盖文本框的 onPaint() 事件）。

# linux - regex() 和 regcmp() 函数不在 LINUX 中

> ID：10487208
> 
> 赞同：1
> 
> 时间：2012-05-07T18:34:22.470
> 
> 标签：linux, unix

我正在将 pro*c 代码从 UNIX 移植到 LINUX。在其中一个应用程序代码中，调用了 regex() 和 regcmp() 函数。这些功能在 LINUX 中找不到。LINUX 中也有 regexec() 和 recomp() 函数，但它们与 regex() 和 recmp() 不同。这有什么帮助吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:02:06.480

标准 C 库提供`regcomp`和`regexec`，这可能是您正在寻找的。请参见`regex`手册页（类型`man 3 regex`）。

有一些替代的正则表达式实现可能更有特色，例如[PCRE](http://www.pcre.org/)（可能已经在您的系统上可用）。

# php - 我的分页脚本中的链接在第 1 页后消失

> ID：10487212
> 
> 赞同：0
> 
> 时间：2012-05-07T18:35:05.513
> 
> 标签：php

我又回来了一个 PHP mySQLi 分页问题......当我运行脚本时，它在第一页上工作正常，但是当你点击到第二页的链接时，链接工作但分页消失了。所以如果我现在有 3 个链接，我看不到任何链接。这是我的代码。

```
<?php

    include_once ('myConnection.php');

    if ( isset( $_GET["get_name"] ) ) { 
        $las_escuelas = $_GET["get_name"];
    } else { 
        $las_escuelas = 1; 
    };

    $start_from = ( $las_escuelas - 1 ) * 10;

    $escuelas = "SELECT * 
                   FROM escuelas 
                   WHERE delegacion = '$delegacion' 
                     AND nivel = '$nivel' 
                   ORDER BY nombre ASC 
                   LIMIT $start_from, 10";

    $consulta = mysqli_query( $miguia, $escuelas ) or die ( mysqli_error() );

    while ( $fila = mysqli_fetch_array( $consulta ) ) {
        echo $fila['name'] . '<br>' . $fila['street'] . ' ' . $fila['numero'] . ' ' . $fila['place'] . ' ' . $fila['phone'] . '<br>';
    };

    $escuelas = "SELECT COUNT(delegacion) 
                   FROM escuelas 
                   WHERE delegacion = '$delegacion' 
                     AND nivel = '$nivel'";

    $consulta = mysqli_query( $miguia, $escuelas );
    $fila = mysqli_fetch_row( $consulta );
    $registros_total = $fila[0];
    $paginas_total = ceil( $registros_total / 10 );

    for ( $i = 1; $i <= $paginas_total; $i++ ) {
        echo "<a href='resultados1.php?las_escuelas=".$i."'>".$i."</a> ";
    };

?> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:55:36.847

我认为（很难“对西班牙代码进行逆向工程：）你应该从 $i = 0 而不是 1 开始你的 for 循环。

# ruby-on-rails - 如何让 rvm 在 capistrano deploy 创建我的 gemset？

> ID：10487214
> 
> 赞同：6
> 
> 时间：2012-05-07T18:35:10.310
> 
> 标签：ruby-on-rails, deployment, gem, rvm, capistrano

我正在尝试使用 capistrano 创建我的 rvm gemset。

我使用 rvm-capistrano gem。

即使我明确地尝试在设置时创建它，capistrano shell 命令看起来像这样：

```
rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3-p194@vatax' -c 'rvm use 1.9.3-p194@vatax --create' 
```

这显然失败并显示错误消息：

```
Gemset 'vatax' does not exist, 'rvm gemset create vatax' first, or append '--create' 
```

事实上，我希望 gem 能够为我创建 gemset，但至少我想使用非 rvm shell 在 capistrano 中创建 gemset。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T19:28:37.560

这在 gem 中尚不支持，有一张票可以添加对它的支持 - [https://github.com/wayneeseguin/rvm-capistrano/issues/8](https://github.com/wayneeseguin/rvm-capistrano/issues/8)

现在你可以使用一个安装 ruby​​ 的任务，它还需要注意创建 gemset，当 ruby​​ 已经安装时，它只会创建 gemset：

```
before 'deploy', 'rvm:install_ruby' 
```

您可以在 RVM 文档中找到更多信息：[https ://rvm.io/integration/capistrano/](https://rvm.io/integration/capistrano/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T23:52:11.497

看起来像 2013-01-07，你可以这样做：

```
before 'deploy', 'rvm:create_gemset' 
```

见[https://github.com/wayneeseguin/rvm-capistrano/issues/8](https://github.com/wayneeseguin/rvm-capistrano/issues/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T00:06:35.933

我通常为我部署的每个应用程序创建一个 gemset，因此我需要创建多个 gemset。我就是这样做的：

```
set :application, 'my-application-name'
set :user, 'my-username'
run "~#{user}/.rvm/bin/rvm gemset create #{application}" 
```

# java - 如何在 Java 中解析对象列表

> ID：10487216
> 
> 赞同：0
> 
> 时间：2012-05-07T18:35:18.743
> 
> 标签：java, parsing

我想解析 idKeys1 并从 idKeys1 获取属性 ID（Pds AttributeId）和属性值（值）。我不确定解析它的最佳方法是什么，因为它是 PDSAttribute 的列表。

```
List<PdsAttribute> idKeys1 = m_pdssmartclient.release(PersistenceEnum.COMMIT, false);
Iterator<PdsAttribute> i = idKeys1.iterator();
  while (i.hasNext()) {
                    String parse = String.valueOf(i.next());
                    System.out.println(i.next());
                      } 
```

idKeys1 的示例输出是：-

```
[Pds Attribute: 
Pds AttributeId = 20000
value = 0
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 20002
value = -1
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 20004
value = -9223372036854775808
Attribute Status = 
Status Code = 0
Status = SUCCESS
Status message = null

, Pds Attribute: 
Pds AttributeId = 248
value = 1906e3551370af60d5b48854fffffffe
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 330
value = null
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 202
value = 1906e1611370af60d5b48854ffffffff
Attribute Status = 
Status Code = 0
Status = SUCCESS
Status message = null

, Pds Attribute: 
Pds AttributeId = 331
value = null
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 347
value = 1906e5a11370af60d5b48854fffffffd
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 332
value = 4fa813bc.0.1.8.9.5.0.1
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 12
value = 1002491107
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

, Pds Attribute: 
Pds AttributeId = 333
value = 4fa813bc.0.1.7.8.0.0.1
Attribute Status = 
Status Code = 0
Status = NOT_PROCESSED
Status message = null

] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:46:02.520

那么有什么问题

```
 while (i.hasNext()) {
            PdsAttribute attr = (PdsAttribute) (i.next());
            String attrId = String.valueOf(attr.getAttributeId);
            String attrValue = String.valueOf(attr.getValue());
        } 
```

当然，这假设您在 PdsAttribute 类中有适当的 PdsAttributeId 和值访问器。如果没有，你真的应该考虑添加一些来封装它的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:48:56.473

如果`PdsAttributeId`和`value`是`PdsAttribute`类中的字段，并且在其字段上定义了 setter 方法，则在迭代中进行以下更改

```
while ( i.hasNext() ) {  
    PdsAttribute pdsAttribute = ( PdsAttribute ) i.next();  
    String pdsAttributeId = String.valueOf( pdsAttribute.getPdsAttributeId() );  
    String pdsAttributeValue = String.valueOf( pdsAttribute.getValue() );  

    // now use these values as required  
} // while 
```

# java - 在 H2 插入语句中转义一个完整的字符串

> ID：10487218
> 
> 赞同：3
> 
> 时间：2012-05-07T18:35:27.157
> 
> 标签：java, sql, insert, h2

我正在尝试转义整个字符串以插入 longtext 或 varchar。基本上我有一个包含所有类型的特殊字符和特殊词（例如 LIKE）的字符串，我只想逃避整个事情，以便我可以将它插入到我的 H2 数据库中。

我问了几个朋友，他们说我应该尝试序列化数据。这是将随机字符串插入数据库的正确方法吗？我应该尝试使用准备好的语句来做到这一点吗？

对不起，我是 H2 的新手，对 SQL 不是很好。我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:40:51.350

使用 a`PreparedStatement`并将字符串作为参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:53:54.530

如果您正在寻找有关如何使用 a 的示例`PreparedStatement`：

*   [http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)
*   [http://en.wikipedia.org/wiki/Prepared_statement#Examples](http://en.wikipedia.org/wiki/Prepared_statement#Examples)
*   [http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm](http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm)

# perl - 如何使用“系统”调用在 perl 上抑制 ssh 的 FATAL 输出？

> ID：10487221
> 
> 赞同：1
> 
> 时间：2012-05-07T18:35:44.053
> 
> 标签：perl, ssh, messages, suppress

我正在尝试编写一个使用 ssh 的简单脚本，但我想先测试 ssh 是否正常工作 - 如果它不起作用，我想知道它为什么不起作用。

这是我正在尝试的：

```
my $output = system("ssh -q -o ConnectionTimeout=3 -o BatchMode=yes $host \"echo $host\"");
my $real_output = $output/256;
if($real_output == 2){print "RESPONSE: $host is not working, No address associated to the name \n";}
elsif($real_output == 255){print "RESPONSE: $host is not working (connection timed out after 3 secs, it exists but does not respond) \n";} 
```

这有效：它收集错误并测试连接，但是当我运行它时；当主机名不存在时显示如下：

```
./testMachines --n invalid_host
warning: Connecting to invalid_host failed: No address associated to the name
RESPONSE: invalid_host is not working, No address associated to the name 
```

或者当主机名确实存在但超时时：

```
./testMachines --n timeout_host
ssh: FATAL: Connection timed out.  No protocol greeting received in 10 seconds.
RESPONSE: timeout_host is not working (connection timed out after 3 secs, it exists but does not respond) 
```

如何抑制“ssh：FATAL”和“警告”消息？我的印象是 ssh 的“-q”选项可以解决问题，但它没有。

我还尝试了 ssh 上的“-q -q”选项（如手册页上所建议的那样），但没有运气。

我也试过这个：

```
my $output = system("ssh -q -o ConnectionTimeout=3 -o BatchMode=yes $host \"echo 2>&1\""); 
```

没有任何运气......有什么想法吗？

基本上我想要的是这样的输出（没有 FATAL 和警告 ssh 消息）：

```
# ./testMachines -n host
RESPONSE: host is not working (connection timed out after 3 secs, it exists but does not respond) 
```

非常感谢！！！

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:41:09.993

不确定您是如何想到添加所有转义的，但这应该可行：

```
my $output = system("ssh -q -o ConnectionTimeout=3 -o BatchMode=yes $host \"echo $host\" 2>/dev/null"); 
```

# linq - 多行更新而不选择

> ID：10487224
> 
> 赞同：3
> 
> 时间：2012-05-07T18:35:50.853
> 
> 标签：linq, entity-framework, entity-framework-4, linq-to-entities

Linq 2 实体的一个老问题。我只是再问一次，以防有人提出解决方案。

我想执行这样的查询：

```
UPDATE dbo.Products WHERE Category = 1 SET Category = 5 
```

我想用 Entity Framework 4.3.1 来做。

这只是一个例子，我有很多记录，我只想要 1 列来更改值，仅此而已。使用 Where(...).Select(...) 加载到 DbContext，更改所有元素，然后使用 SaveChanges() 保存对我来说效果不佳。

我应该坚持使用 ExecuteCommand 并发送上面写的直接查询（当然要使其可重用），还是有另一种不错的方法可以从 Linq 2 Entities/Fluent 中做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:10:37.513

您所描述的内容实际上不适用于实体框架。你有几个选择，

1.  您可以将其编写为字符串并通过 EF 执行它`.ExecuteSqlCommand`（在上下文中）
2.  您可以使用[Entity Framework Extended 之](http://nuget.org/packages/EntityFramework.Extended)类的东西（但是据我所知，这并没有很好的性能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:08:56.987

如果您有基于集合的操作，那么 SQL 比 EF 更适合。

所以，是的 - 在这种情况下，你应该坚持使用`ExecuteCommand`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:03:50.997

您可以更新实体而无需先从数据库中获取它，如下所示

```
using (var context = new DBContext())
{
    context.YourEntitySet.Attach(yourExistingEntity);

    // Update fields

    context.SaveChanges();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:31:24.060

我不知道这是否适合您，但您可以尝试创建一个存储过程来执行更新，然后将该过程作为函数导入添加到您的模型中。然后您可以在单个数据库调用中执行更新：

```
using(var dc = new YourDataContext())
{
    dc.UpdateProductsCategory(1, 5);
} 
```

where`UpdateProductsCategory`将是导入的存储过程的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-07T11:48:18.073

是的，ExecuteCommand() 绝对是在不获取所有行的数据并让 ChangeTracker 对其进行排序的情况下执行此操作的方法。只是提供一个例子：

将导致获取所有行并为更改的每一行执行更新：

```
 using (YourDBContext yourDB = new YourDBContext()) {
        yourDB.Products.Where(p => p.Category = 1).ToList().ForEach(p => p.Category = 5);
        yourDB.SaveChanges();
    } 
```

只是一个更新：

```
 using (YourDBContext yourDB = new YourDBContext()) {
        var sql = "UPDATE dbo.Products WHERE Category = @oldcategory SET Category = @newcategory";
        var oldcp = new SqlParameter { ParameterName = "oldcategory", DbType = DbType.Int32, Value = 1 };
        var newcp = new SqlParameter { ParameterName = "newcategory", DbType = DbType.Int32, Value = 5 };
        yourDB.Database.ExecuteSqlCommand(sql, oldcp, newcp);
    } 
```

# zend-framework - View Helper、Partial View 或其他

> ID：10487228
> 
> 赞同：3
> 
> 时间：2012-05-07T18:36:02.023
> 
> 标签：zend-framework, zend-form

我是 Zend Framework 的新手，我对我正在尝试做的事情有疑问。

我正在处理的应用程序的大多数页面的主要内容将包含 1 个或多个 div 元素，这些元素需要设置相同的样式。

这是我要生成的 HTML 示例：

```
<div id='admin-locations' class='panel'>
    <header class="panel-header">
        <h2>Locations</h2>
    </header>
    <div class='panel-content'>
        <div id='locations-table' class='google-vis-table'></div>
        <form id='locations'>
            ...
        </form>
    </div>
</div> 
```

我知道我可以通过将表单推送到我的控制器中的视图脚本然后将此代码添加到我的控制器来轻松地做到这一点。

```
<div id='admin-locations' class='panel'>
    <header class="panel-header">
        <h2>Locations</h2>
    </header>
    <div class='panel-content'>
        <div id='locations-table' class="google_vis_table"></div>
        <?php 
            echo $this->formLocations;
        ?>
    </div>
</div> 
```

但这不是 DRY。

我在这里使用的示例在其内容中有一个 Google 可视化表和一个 Zend 表单。有时面板需要包含一个表单。有时他们不会，所以我不认为表单装饰器是要走的路。所以基本上，面板的 id、面板标题文本和 div class='panel-content' 的内容需要是动态的。从面板到面板，其他一切都将保持不变。

我在这里最好的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:35:35.250

您可能要考虑使用部分：http: [//framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.partial](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.partial)

例如，您可以有一个包含以下内容的**admin-locations.phtml部分：**

```
<div id='admin-locations' class='panel'>
    <header class="panel-header">
        <h2>Locations</h2>
    </header>
    <div class='panel-content'>
        <div id='locations-table' class="google_vis_table"></div>
        <?php echo $this->form; ?>
    </div>
</div> 
```

现在，您可以简单地在视图中重复调用部分，无论是否提供表单：

```
...
echo $this->partial('admin-locations.phtml');
echo $this->partial('admin-locations.phtml', array('form' => $this->yourForm);
echo $this->partial('admin-locations.phtml');
... 
```

希望这可以帮助。

# assembly - 汇编列表中使用的 SIMD 指令

> ID：10487233
> 
> 赞同：0
> 
> 时间：2012-05-07T18:36:36.017
> 
> 标签：assembly, compilation, simd, instructions

如果使用以下编译选项

```
–O3 –mtune=barcelona –msse4.2 –fprefetch-loop-arrays 
```

如何从汇编列表中知道使用了 SIMD 指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:39:43.050

假设您在 Linux（或类似系统）上工作，您可以使用它`objdump`来检查目标文件或可执行文件的汇编程序。然后，您可以检查它是否有[SIMD 指令](http://en.wikipedia.org/wiki/X86_instruction_listings#SIMD_instructions)实例。

# c - C 编程。叉子和管道

> ID：10487234
> 
> 赞同：0
> 
> 时间：2012-05-07T18:36:37.460
> 
> 标签：c, fork, parent, pipe

我正在尝试为 Linux 开发一个 C 程序，该程序包括从终端管理 5 个机器人。

有一个父进程，我需要五个孩子。

例如，如果我写“Robot1 right 50”，终端 1 将显示它的移动。我可以完美地做到这一点，但只有一次。我的意思是，如果我尝试创建一个 while 循环来输入一些指令，我的计算机会在第一个命令后发疯并重新启动。

我将向您展示一些可能是问题的代码：

这是我分叉的方式：

```
for(i=0; i<num_proc; i++) {
    pid = fork();

    if(pid == 0) {
    /*Child code*/}

    else(pid){
    /*Parent code*/}

} 
```

我需要将一些数据传递给孩子，但我只想要其中一个来执行代码，所以我这样做：

```
/*Inside parent code*/
write(pipeall[destino][1], id, 7);
write(pipeall[destino][1], arg, 3);
write(pipeall[destino][1], posxpadre, 4);           
write(pipeall[destino][1], posypadre, 4);
write(pipeall[destino][1], orden, 10);

 /*Inside children code*/
 read(pipeall[pos][0], idhijo, 7);
 read(pipeall[pos][0], arghijo, 3);
 read(pipeall[pos][0], posxpadre, 4);
 read(pipeall[pos][0], posypadre, 4);
 read(pipeall[pos][0], ordenhijo, 10); 
```

据我所知，只有一个孩子会在 read() 的指令之后执行代码。那将是在管道矩阵内的位置等于“pos”的那个。其他人将继续等待他的管道中写入的内容。（这永远不会发生）。

因此，当执行代码的孩子到达最后时，它会通过另一个写/读指令将一些数据发送给他的父母。然后，我想再次重新启动该过程。但我做不到。任何想法？

# appharbor - 我可以在 AppHarbor 上查看服务器日志或类似内容吗？

> ID：10487237
> 
> 赞同：1
> 
> 时间：2012-05-07T18:36:52.327
> 
> 标签：appharbor

我只是将我的应用程序推送到 appharbor。我不需要完整的谷歌分析（我不能使用它，因为我的应用程序主要是关于动态创建 rss 提要），但只想大致了解我的网站被点击的频率以及网址的类型人们正在打。

通常我只会关注severlog，但这似乎在appharbor上不可用。我怎样才能得到等价的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T22:21:05.760

我最近打开了[Appharbor](https://logentries.com/)中可用的 logentries 插件，它对于解决我的 asp mvc 3 应用程序上的一些服务器端错误来说是天赐之物。将我的代码扩展为记录路由请求将是几行简单的代码。

# node.js - WS和socket.io是什么关系？

> ID：10487238
> 
> 赞同：2
> 
> 时间：2012-05-07T18:36:54.863
> 
> 标签：node.js, socket.io

我刚刚安装了socket.io，最后它给了我这样的信息：

```
To install WS with blazing fast native extensions, use
<npm install ws --ws:native> 
```

这意味着什么？WS 是 socket.io 的替代品吗？我用谷歌搜索，我无法弄清楚。或者它是 node.js 的替代品？还是我可以与 socket.io 和 node.js 一起安装的东西？

我还假设该消息指的是这个[ws](https://github.com/einaros/ws)？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T23:39:28.110

[Websockets](http://en.wikipedia.org/wiki/WebSocket)（或 ws）是 socket.io 的一种可能的传输方式（其他是[flashsocket](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-181c51321220efd9d1c-8000.html)、[htmlfile](http://cometdaily.com/2007/11/18/ie-activexhtmlfile-transport-part-ii/)、[xhr-polling 和 jsonp-polling](http://en.wikipedia.org/wiki/Comet_%28programming%29#Ajax_with_long_polling)）

socket.io 基本上是一个包装器，可帮助您透明地使用浏览器中可用的最佳传输

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T12:29:36.857

显然，[ws](https://github.com/einaros/ws)是 的依赖项`socket.io-client`，它是 的依赖项`socket.io`。如果你想为 构建原生扩展`ws`，你可以传递`--ws:native`给`npm`.

您会看到该消息，因为`ws`在未安装时会回显它`--ws:native`。您可以放心地忽略该消息，或尝试在安装时传递`--ws:native`给.`npm``socket.io`

AFAICT，仅使用它从 node.js`socket.io-client`连接到服务器——即仅用于测试目的。`socket.io`因此，是否使用本机扩展编译它真的无关紧要。

# sql - 从表中复制列

> ID：10487242
> 
> 赞同：1
> 
> 时间：2012-05-07T18:37:20.870
> 
> 标签：sql, sql-server-2008

我需要将一列从一个表复制到另一个。问题是将值与正确的行匹配。

```
INSERT INTO DestinationTable (money_owed)
SELECT "credit"
FROM SourceTable 
```

如何搜索目标表并比较另一个字段以查看它是否与源表中的相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:40:20.273

您需要在匹配条件上连接两个表。

像这样的东西

```
UPDATE
   DestinationTable 
SET 
   DestinationTable.money_owed = SourceTable.Credit
FROM
   DestinationTable 
INNER JOIN SourceTable
ON DestinationTable.Field2 = SourceTable.Field2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:43:12.013

从以下位置进行更新：

```
UPDATE
    destination
SET
    destination.money_owed = source.Credit
FROM
    destination
INNER JOIN
    source
ON
    source.id = destination.id 
```

# bash - 如何通过管道输入 awk 脚本

> ID：10487243
> 
> 赞同：4
> 
> 时间：2012-05-07T18:37:20.900
> 
> 标签：bash, awk, device, pci-bus

我有这个 awk 脚本：

```
#!/usr/bin/awk -f
BEGIN {IGNORECASE=1} 
/nVidia/ {inner=1;pci=$1} 
/(corr|fatal)err\-/ {if (inner) print pci, $1, $2, $3, $4, $5, $6, $7} 
$0=="" {inner=0} 
```

是否有一种语法可以始终通过管道`sudo lspci -vvv`传输到该脚本？`sudo lspci -vvv|./checkpci`每次运行脚本时我都必须输入。我知道我可以创建第二个脚本来启动第一个脚本，但我认为这很麻烦，我想知道这样做的正确方法。

顺便说一句，我的显卡崩溃时遇到了一些问题，并且在某些设备上看到了 UncorrErr 标志，是否有人参考了这意味着什么或如何进一步排除故障？现在，我将定期运行此脚本以查看错误何时出现在 lspci 中，以查看是否存在时间相关性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:21:22.717

这应该适合你：

```
#!/usr/bin/awk -f
BEGIN {
    IGNORECASE = 1
    cmd = "sudo lspci -vvv"
    while ((cmd | getline) > 0) {
        if ($0 ~ /nVidia/) {inner = 1; pci = $1} 
        if ($0 ~ /(corr|fatal)err\-/) {if (inner) print pci, $1, $2, $3, $4, $5, $6, $7} 
        if ($0 == "") {inner = 0}
    }
    close(cmd)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:14:29.760

我会将您的 awk 脚本更改为 shell 脚本：

```
#!/bin/sh
sudo lspci -vvv | /usr/bin/awk '
  BEGIN {IGNORECASE=1} 
  /nVidia/ {inner=1;pci=$1} 
  /(corr|fatal)err\-/ {if (inner) print pci, $1, $2, $3, $4, $5, $6, $7} 
  $0=="" {inner=0}
' 
```

# c# - 将 ListView 导出到 Excel

> ID：10487247
> 
> 赞同：0
> 
> 时间：2012-05-07T18:37:43.193
> 
> 标签：c#, asp.net

我有一个需要导出到 Excel 电子表格的 ListView。有一堆文档可以将 GridViews 导出到 Excel，在较小程度上将 ListViews 导出到 Excel，但在导出前进行一些自定义方面并没有那么多。

在导出之前，我需要准备数据，因为 a) 只需要导出列的子集 b) 其中一些列是可编辑的文本框控件。

在不准备表格的情况下进行简单的导出意味着控件也会被导出，这显然看起来非常难看。

目前我可以迭代控件并从 Grid 和 ListViews 中删除格式，从而解决 b.

在 GridView 中，我可以使用 Visible = false 设置一些我想隐藏的列；然后在我完成后设置回true。

我想不通的是如何使用列表视图来做到这一点。

我想知道最好的方法是什么，因为我有点卡住了。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:40:57.563

我实际上认为这是一个愚蠢的问题。如果我想将列表视图导出到 excel，那么我将导出所有列，删除不必要的格式。然后用户可以对 Excel 中的列进行任何自定义。

要在导出之前对数据进行任何自定义，那么我应该使用底层数据类型。

上述方法（诚然是我自己的）简直太糟糕了。

# c# - 如何动态存储用于 Linq Orderby 的表达式？

> ID：10487248
> 
> 赞同：5
> 
> 时间：2012-05-07T18:37:44.920
> 
> 标签：c#, linq, expression

我正在尝试创建一个快速类，以便我可以更轻松地为网格编写排序代码，并且更容易使用和维护，并减少代码重复。为此，我提出了以下课程：

```
public class SortConfig<TSource, TRelatedObject> where TSource : class where TRelatedObject : class
{
    public IList<SortOption> Options { get; protected set; }
    public SortOption DefaultOption { get; set; }

    public SortConfig()
    {
        Options = new List<SortOption>();
    }

    public void Add(string name, Expression<Func<TSource, object>> sortExpression, TRelatedObject relatedObject, bool isDefault = false)
    {
        var option = new SortOption
        {
            FriendlyName = name,
            SortExpression = sortExpression,
            RelatedObject = relatedObject
        };

        Options.Add(option);

        if (isDefault)
            DefaultOption = option;
    }

    public SortOption GetSortOption(string sortName)
    {
        if (sortName.EndsWith("asc", StringComparison.OrdinalIgnoreCase))
            sortName = sortName.Substring(0, sortName.LastIndexOf("asc", StringComparison.OrdinalIgnoreCase));
        else if (sortName.EndsWith("desc", StringComparison.OrdinalIgnoreCase))
            sortName = sortName.Substring(0, sortName.LastIndexOf("desc", StringComparison.OrdinalIgnoreCase));

        sortName = sortName.Trim();

        var option = Options.Where(x => x.FriendlyName.Trim().Equals(sortName, StringComparison.OrdinalIgnoreCase))
                            .FirstOrDefault();
        if (option == null)
        {
            if (DefaultOption == null)
                throw new InvalidOperationException(
                    string.Format("No configuration found for sort type of '{0}', and no default sort configuration exists", sortName));

            option = DefaultOption;
        }

        return option;
    }

    public class SortOption
    {
        public string FriendlyName { get; set; }
        public Expression<Func<TSource, object>> SortExpression { get; set; }
        public TRelatedObject RelatedObject { get; set; }
    }
} 
```

这个想法是您创建不同排序选项的快速配置，为此使用什么 OrderBy 表达式，以及与该排序选项相关的可选对象。这使我的代码看起来像：

```
 protected void InitSortConfig()
    {
        _sortConfig = new SortConfig<xosPodOptimizedSearch, HtmlAnchor>();
        _sortConfig.Add("name", (x => x.LastName), lnkSortName, true);
        _sortConfig.Add("team", (x => x.SchoolName), lnkSortTeam);
        _sortConfig.Add("rate", (x => x.XosRating), lnkSortRate);
        _sortConfig.Add("pos", (x => x.ProjectedPositions), null);
        _sortConfig.Add("height", (x => x.Height), lnkSortHeight);
        _sortConfig.Add("weight", (x => x.Weight), lnkSortWeight);
        _sortConfig.Add("city", (x => x.SchoolCity), lnkSortCity);
        _sortConfig.Add("state", (x => x.SchoolState), lnkSortState);
    } 
```

然后我可以通过做排序

```
 // Get desired sorting configuration
        InitSortConfig();
        var sortOption = _sortConfig.GetSortOption(sort);
        bool isDescendingSort = sort.EndsWith("desc", StringComparison.OrdinalIgnoreCase);

        // Setup columns
        InitSortLinks();
        if (sortOption.RelatedObject != null)
        {
            // Make modifications to html anchor
        }

        // Form query
        var query = PodDataContext.xosPodOptimizedSearches.AsQueryable();

        if (isDescendingSort)
            query = query.OrderByDescending(sortOption.SortExpression);
        else
            query = query.OrderBy(sortOption.SortExpression); 
```

当排序的变量是字符串时，这很有效，但是当它不是字符串时，我得到以下异常：`Cannot order by type 'System.Object'.`

我假设这是因为我将表达式存储为`Expression<Func<TSource, object>>`而不是更具体地说明第二个泛型。我不明白如何将所有不同的排序选项（即使对于非字符串属性）保留在一个类中。

我想问题之一是该`Linq.OrderBy()`子句`Expression<Func<TSource, TKey>>`作为它的参数，但我并没有围绕如何`Linq.OrderBy()`能够推断出`TKey`应该是什么而思考，因此我无法理解如何利用该推断来存储这些表达式适当的`TKey`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:46:57.213

通用参数的推断如下：

```
IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(this IEnumerable<TSource> enumerable, Func<TSource, TKey> expression) 
```

当你有一个`IEnumerable<T>`时，编译器能够推断出在这种情况下`TSource`是`T`因为扩展方法声明；所以扩展方法已经添加在知道什么`TSource`是。例如：

```
Enumerable.Range(0, 10).OrderBy(x => x) 
```

由于我们从 . 开始`IEnumerable<int>`，编译器可以推断出它期望的表达式是`Func<int, TKey>`，因为扩展名会影响`IEnumerable<int>`. 接下来，因为你的表达式返回一个值，编译器可以推断出剩余的类型，在这种情况下`int`，它就变成了`Func<int, int>`这个例子。

`SortConfig`现在，与您的特定问题密切相关，如果您适当地泛化您的对象，您可以轻松地设置您的表达式以使其正常工作。看起来你现在`SortConfig`需要一个代表。`Func<TSource, object>`如果你泛化你`SortConfig`使用另一种类型，你会获得特异性。例子：

```
 void Add<TSource, TKey>(string name, Func<TSource, TKey> expression) 
```

这里的下一个问题是如何以某种格式存储您的支持方法。您的类声明如下所示：

```
 public class SortConfig<TSource> 
```

然后，当您调用`OrderBy`扩展时，所有数据类型都应该对齐。

编辑：这是我认为你想做的一个工作示例：

```
 static void Main(string[] args)
    {
        var list = Enumerable.Range(0, 10).Reverse().Select(x => new SampleClass { IntProperty = x, StringProperty = x + "String", DateTimeProperty = DateTime.Now.AddDays(x * -1) });

        SortContainer<SampleClass> container = new SortContainer<SampleClass>();
        container.Add("Int", x => x.IntProperty);
        container.Add("String", x => x.StringProperty);
        container.Add("DateTime", x => x.DateTimeProperty);

        var sorter = container.GetSorterFor("Int");

        sorter.Sort(list).ForEach(x => Console.WriteLine(x.IntProperty));
        Console.ReadKey();
    }

    public class SampleClass
    {
        public int IntProperty { get; set; }
        public string StringProperty { get; set; }
        public DateTime DateTimeProperty { get; set; }
    }

    public class SortContainer<TSource>
    {
        protected Dictionary<string, ISorter<TSource>> _sortTypes = new Dictionary<string, ISorter<TSource>>();

        public void Add<TKey>(string name, Func<TSource, TKey> sortExpression)
        {
            Sorter<TSource, TKey> sorter = new Sorter<TSource, TKey>(sortExpression);
            _sortTypes.Add(name, sorter);
        }

        public ISorter<TSource> GetSorterFor(string name)
        {
            return _sortTypes[name];
        }
    }

    public class Sorter<TSource, TKey> : ISorter<TSource>
    {
        protected Func<TSource, TKey> _sortExpression = null;

        public Sorter(Func<TSource, TKey> sortExpression)
        {
            _sortExpression = sortExpression;
        }

        public IOrderedEnumerable<TSource> Sort(IEnumerable<TSource> sourceEnumerable)
        {
            return sourceEnumerable.OrderBy(_sortExpression);
        }
    }

    public interface ISorter<TSource>
    {
        IOrderedEnumerable<TSource> Sort(IEnumerable<TSource> sourceEnumerable);
    } 
```

# javascript - Jquery 验证和选择框列表

> ID：10487250
> 
> 赞同：0
> 
> 时间：2012-05-07T18:37:56.213
> 
> 标签：javascript, jquery, jquery-validate

我如何才能为下面的选择框列表提供特定要求和独特条件？

```
<form name="signupForm" class="cmxform" id="signupForm" method="get" action="">
<select name="category[]" id="cat_1">
<option value="">Select One</option>
<option value="1">aa</option>
<option value="2">bb</option>
<option value="3">cc</option>
<option value="4">dd</option>
</select>
<select name="category[]" id="cat_2">
<option value="">Select One</option>
<option value="5">ee</option>
<option value="6">ff</option>
<option value="7">gg</option>
<option value="8">hh</option>
</select>
<select name="category[]" id="cat_3">
<option value="">Select One</option>
<option value="9">ii</option>
<option value="10">jj</option>
<option value="11">kk</option>
<option value="12">ll</option>
</select>
<input class="submit" type="submit" value="Submit">
</form> 
```

注意有猫的数量是不固定的，可以多于3，

那么如何使每个选择框都需要它，

并且每个选择框选择的值必须使用 jquery validate 插件是唯一的？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:48:36.163

```
var $selects = $('form select[name^=category]'),
    values = [];

$(':submit').click(function(e) {
  e.preventDefault();
  values = [];
  $($selects).each(function() {
      if($(this).val()) {
          values.push($(this).val());        
      }
  });
    if(!values.length) {
        alert('Please select all categories');
        return false;
    }
  if(values.length < $selects.length || $.unique(values).length < $selects.length) {
    alert('Please select all categories and be unique');
    return false;
  }
}); 
```

***[演示](http://jsfiddle.net/BbkvL/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:41:41.587

这是一个很棒的 jQuery 验证插件，可以让你的生活更轻松：[http ://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

这就是您需要做的所有事情：（其余的由插件完成）

```
<select id="sport" class="validate[required]" name="sport">
<option value="">--Select--</option>
<option value="option1">Tennis</option>
<option value="option2">Football</option>
<option value="option3">Golf</option>
</select> 
```

希望有帮助:)

# c - CMAKE - 如何正确地将静态库的头文件复制到 /usr/include 中？

> ID：10487256
> 
> 赞同：61
> 
> 时间：2012-05-07T18:38:51.567
> 
> 标签：c, cmake, static-libraries

我开始使用 C 来使用 CMAKE，实际上我正在创建两个非常小的静态库。

我的目标是：

1.  这些库被编译并链接到 *.a 文件中。[这有效]
2.  然后我希望将 *.a 文件复制到 /usr/local/lib [这也有效]
3.  据我对库的了解（很少），它们是使用 链接的`-lnameoflib`，这是一个编译器标志。好的。我已经准备好我的 CMakeLists.txt，它实际上将 *.a 文件复制到`/usr/local/lib`. 但是，为了能够在程序中使用它们，我还需要将它们的头文件复制到`/usr/local/include`中，然后我可以简单地包含它们`#include <mylibheader.h>`。我现在就是这样理解的。

我的问题是 - 使用 CMAKE 将头文件复制到 /usr/include 文件夹的正确方法是什么？我希望它在`make install`执行时自动复制它们，就像 *.a 文件一样。

对于这两个库，我都有一个类似的 CMakeLists.txt：

```
project(programming-network)

add_library(programming-network STATIC
    send_string.c
    recv_line.c
    )

INSTALL(TARGETS programming-network
        DESTINATION "lib"
        ) 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2016-10-27T12:59:01.200

最新 cmake 版本的更好方法是使用目标的`PUBLIC_HEADER`属性。

```
project(myproject)

add_library(mylib some.c another.c)
set_target_properties(mylib PROPERTIES PUBLIC_HEADER "some.h;another.h")
INSTALL(TARGETS mylib 
        LIBRARY DESTINATION some/libpath
        PUBLIC_HEADER DESTINATION some/includepath
) 
```

一些参考：

[PUBLIC_HEADER](https://cmake.org/cmake/help/v3.0/prop_tgt/PUBLIC_HEADER.html)

[CMake 安装命令](https://cmake.org/cmake/help/v3.0/command/install.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-11-18T20:41:28.973

以更好的方式，将复制与模式匹配的所有文件并保留目录结构。

```
INSTALL (
    DIRECTORY ${CMAKE_SOURCE_DIR}/include/
    DESTINATION include
    FILES_MATCHING PATTERN "*.h*") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-07T19:46:11.767

我不认为你的解决方案是正确的。`/usr/include`应该保留给您的供应商放入文件。

做 IMO 的正确做法是在其中安装标头`/usr/local/include`，然后指示用户`export CPATH="/usr/local/include:${CPATH}"`.

似乎`/usr/local/lib`是自动搜索，但如果您希望对`export LIBRARY_PATH="/usr/local/lib:${LIBRARY_PATH}"`.a 二进制文件使用类似的另一个目录（但取决于您的操作系统，对于共享库可能适用也可能不好）。

可选，但更麻烦的是在编译时添加`-I /usr/local/include`和。`-L /usr/local/lib`

这是一个有点主观的答案，但对我来说效果很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-24T04:38:06.883

除了[接受的答案](https://stackoverflow.com/a/40285224/1660501)之外，如果您正在创建大量库并且`set_property`语法会让您失望。您可以将其包装在一个非常简单的宏中，例如：

```
# File: target_public_headers.cmake
macro(target_public_headers TARGET)
  set_target_properties(${TARGET} PROPERTIES PUBLIC_HEADER "${ARGN}")
endmacro() 
```

然后你可以像这样使用它：

```
project(myproject)

include(target_public_headers)

add_library(mylib some.c another.c)
target_public_headers(mylib some.h another.h) # <<<<<

# If you're exporting this library then you need to tell
# CMake how to include the "installed" version of the headers.
target_include_directories(mylib
  PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
  PUBLIC $<INSTALL_INTERFACE:some/includepath>
)

INSTALL(TARGETS mylib 
        LIBRARY DESTINATION some/libpath
        PUBLIC_HEADER DESTINATION some/includepath
) 
```

# linux - grep 有限字符 - 一行

> ID：10487257
> 
> 赞同：22
> 
> 时间：2012-05-07T18:38:51.990
> 
> 标签：linux, unix, ubuntu, debian

我想在多个文件中查找一个单词，并且每个结果只返回一行，或者返回有限数量的字符（例如 40 ~ 80 个字符），而不是默认情况下的整行。

```
grep -sR 'wp-content' .

file_1.sql:3309:blog/wp-content 
file_1.sql:3509:blog/wp-content 
file_2.sql:309:blog/wp-content 
```

目前我看到以下内容：

```
grep -sR 'wp-content' .

file_1.sql:3309:blog/wp-content-Progressively predominate impactful systems without resource-leveling best practices. Uniquely maximize virtual channels and inexpensive results. Uniquely procrastinate multifunctional leadership skills without visionary systems. Continually redefine prospective deliverables without.
file_1.sql:3509:blog/wp-content-Progressively predominate impactful systems without resource-leveling best practices. Uniquely maximize virtual channels and inexpensive results. Uniquely procrastinate multifunctional leadership skills without visionary systems. Continually redefine prospective deliverables without. 
file_2.sql:309:blog/wp-content-Progressively predominate impactful systems without resource-leveling best practices. Uniquely maximize virtual channels and inexpensive results. Uniquely procrastinate multifunctional leadership skills without visionary systems. Continually redefine prospective deliverables without. 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T19:21:39.113

您可以使用 grep 和 cut 的组合

使用您的示例，我将使用：

```
grep -sRn 'wp-content' .|cut -c -40
grep -sRn 'wp-content' .|cut -c -80 
```

这将分别为您提供前 40 个或 80 个字符。

编辑：

此外，grep 中有一个标志，您可以使用：

```
-m NUM, --max-count=NUM
          Stop reading a file after NUM matching lines. 
```

这结合了我之前写的内容：

```
grep -sRnm 1 'wp-content' .|cut -c -40
grep -sRnm 1 'wp-content' .|cut -c -80 
```

这应该让您第一次出现每个文件，并且只有前 40 或 80 个字符。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-07T21:43:48.933

```
 egrep -Rso '.{0,40}wp-content.{0,40}' *.sh 
```

这不会调用 Radio-Symphie-Orchestra，而是-o（仅匹配）。

图案前后最多 40 个字符。注意：* *e* *grep。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T18:41:14.690

如果您将正则表达式更改为`'^.*wp-content'`您可以使用`egrep -o`. 例如，

```
egrep -sRo '^.*wp-content' . 
```

`-o`标志使 egrep 只打印出匹配的行部分。因此，从行首匹配到`wp-content`应该在您的第一个代码块中产生示例输出。

# javascript - JS的跨浏览器文件拖放解决方案？

> ID：10487258
> 
> 赞同：0
> 
> 时间：2012-05-07T18:38:54.433
> 
> 标签：javascript, file-upload, drag-and-drop

我正在寻找跨浏览器桌面文件到浏览器拖动示例中。我找到了一些很好的例子，比如[jQuery FileDrop](https://github.com/weixiyen/jquery-filedrop)和[jQuery FileUpload](https://github.com/blueimp/jQuery-File-Upload)，很棒的例子，但我不确定它们在 Opera 或 IE 中是否有效。你能建议我一个真正的跨浏览器解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:44:01.070

对于完全跨浏览器的文件拖放解决方案，您需要进入文件上传控件，该控件使用 Silverlight 或 Flash 等浏览器插件。这是同一行的另一个 SO 问题

[多目标跨浏览器拖放文件上传](https://stackoverflow.com/questions/4491333/multiple-target-cross-browser-drag-drop-file-upload)

# c++ - c++ 虚拟方法没有被调用

> ID：10487260
> 
> 赞同：1
> 
> 时间：2012-05-07T18:39:05.360
> 
> 标签：c++, virtual

我在标题中声明了两个 c++ 类。基类声明了一个虚方法，第二个类覆盖了它。实现在 .cpp 文件中。

代码相当简单

```
void DefendProperty::apply(Queue<Defend*>* defendQueue, 
const Tool* toolSource, const Actor* actorSource, const Actor* defender) {
    cout << "BASE" << endl;
} 
```

* * *

```
void DefendPropertyPhysical::apply(Queue<Defend*>* defendQueue, 
Tool* toolSource, const Actor* actorSource, const Actor* defender) {
    cout << "CORRECT" << endl;
    defendQueue->enqueue(new Defend(
        DefendTypePhysical::TYPE, 
        new DamageValuesPhysical(
        getRandomDouble(minDamageReduction, maxDamageReduction))
    ));
} 
```

关键是当我调用实例化为 B 的类时，它输出 BASE，而不是 CORRECT。我不知道此时发生了什么。

这些类存储在没有 apply 方法的基本 ToolProperty 类型中。当它们被调用时，它们会使用 dynamic_cast 类型转换为 DefendProperty 类型。

```
dynamic_cast<DamageProperty*>(node->value)->apply(damageQueue, toolSource, actorSource); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:43:04.993

派生类中方法的签名与基类中的方法不同。（一个需要 a `const Tool*`，另一个需要一个 non-const `Tool*`）

由于不同的签名，派生类的方法不会覆盖基类的方法，而是声明一个新的、不相关的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:43:01.457

您的函数具有不同的签名。查看“toolSource”的类型。您的第二个不是第一个的覆盖，而是超载。

编译器几乎不会警告您的常见错误。反正我不知道有哪一个。

顺便说一句，如果您要在指针上使用动态转换而不检查结果，则没有理由使用动态转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:42:54.337

1.  确保函数签名相同。`toolSource`不是 const in `DefendPropertyPhysical`。如果签名不匹配，c++ 编译器不会假定您犯了错误，它只会假定您正在声明该方法的新重载。[C++11 的显式覆盖](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)对此有所帮助。

2.  确保在标题`DefendProperty::apply`中标记为。`virtual`

# c# - 套接字接收时截断了很长的消息

> ID：10487262
> 
> 赞同：1
> 
> 时间：2012-05-07T18:39:23.433
> 
> 标签：c#, sockets

我只是注意到我的套接字客户端没有收到服务器发回给它的相同数据。文本在 8192 个字符后被截断。

有一些我不知道的限制吗？我该如何度过这个难关？

客户端使用此代码：

```
//Send and Receive
public string sendAndReceiveMSG(string msg)
{
    try
    {
        NetworkStream serverStream = clientSocket.GetStream();
        string sendresponse = sendMSG(msg, serverStream);
        if (sendresponse == "ConnectionCrash")
        {
            return sendresponse;
        }
        else if (sendresponse == "OK")
        {
            string receiveresponse = receiveMSG(serverStream);
            return receiveresponse;
        }
        return "UnknownErrorInternal";
    }
    catch (Exception ex)
    {
        return "UnknownErrorInternal";
    }
}

//Send msg
private string sendMSG(string msg, NetworkStream serverStream)
{
    try
    {
        byte[] outStream = System.Text.Encoding.ASCII.GetBytes(msg);
        serverStream.Write(outStream, 0, outStream.Length);
        serverStream.Flush();
        return "OK";
    }
    catch (Exception ex)
    {
        endSock();
        return "ConnectionCrash";
    }
}

//Receive msg
private string receiveMSG(NetworkStream serverStream)
{
    try
    {
        byte[] inStream = new byte[10025];

        int buffSize = clientSocket.ReceiveBufferSize;
        dynamic bytesRead = serverStream.Read(inStream, 0, buffSize);

        string returndata = System.Text.Encoding.ASCII.GetString(inStream, 0, bytesRead);
        return returndata;
    }
    catch (Exception ex)
    {
        endSock();
        return "ConnectionCrash";
    }
} 
```

客户端然后像这样从服务器获得响应；

```
string recv = client.sendAndReceiveMSG("someRequest"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:44:24.407

您只处理了一次对 的调用`Read`。这种行为完全是意料之中的；您很少会在一个数据包中获得所有数据（坦率地说，我很惊讶您没有早点注意到它）。

您需要决定“框架”策略（即如何区分每个子消息 - 如果基于文本，则可能是新行，或者二进制的长度前缀） - 并在处理之前获得一*帧*数据。这通常意味着`Read`在循环中调用，或者（对于文本）使用类似于`StreamReader`为您处理的东西（即`ReadLine()`在循环中调用）。

如果套接字上只有一条消息，并且调用者关闭了他们的连接，则可以省去框架，而只需阅读直到`Read`返回非正数（即 EOF）。

# java - 如何从 Java 中的 String 获取类引用？

> ID：10487264
> 
> 赞同：1
> 
> 时间：2012-05-07T18:39:29.910
> 
> 标签：java, android

如果我需要返回一个基于字符串实例化的类（例如，从 JSON 创建逻辑），应该如何编写？

我最初的想法是开关，但在 Android 框架的 Java 版本中，开关语句似乎不允许字符串。

接下来的想法是一个 HashMap：

```
private HashMap<String, Class> classMap = new HashMap<String, Class>();
classMap.put("someClass", SomeClass.class)?
// ... etc
String someString = jsonObject.getString("someProperty");
Class classRef = classMap.get(someString);
SomeSuperClass classInstance = new classRef(); 
```

这行不通。我宁愿不要`if/else`列出一长串的可能性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T18:43:17.323

只需使用`Class<?> clazz = Class.forName("com.yourpackage.YourClass")`Then 实例化它：`clazz.newInstance();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:53:54.583

您还可以加载具有构造函数参数的类。

例如

```
public static void load(String p)
    throws ClassNotFoundException, InstantiationException,
    IllegalAccessException{
        Class cl = classLoader.loadClass(p);
        Constructor c = cl.getConstructor(String.class);
        Plugin plug = (Plugin) c.newInstance("myArgument");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:44:44.297

你使用地图的方法是我会做的（你会在工厂模式实现中看到它）。您只是没有正确实例化该类：

```
Class classRef = classMap.get(someString);
SomeSuperClass classInstance = classRef.newInstance(); 
```

# php - php/jquery - 检查 url 中的图像是否真的存在

> ID：10487265
> 
> 赞同：0
> 
> 时间：2012-05-07T18:39:35.467
> 
> 标签：php, image, url

我发现了这种检查页面是否真的存在的好方法：

```
$headers=@get_headers($imageurl);
if(strpos($headers[0],'200')===false){
    echo "not valid";
    exit;
} 
```

但是，我需要实现的是检查该页面上是否真的只是一个图像。例如，当您尝试以下链接时：www.google.com/image.jpg 它将返回 200，因为 Google 有自己的错误页面 - 但是，不仅应该可以发现该页面上没有图像，而且图像不是该页面上唯一的东西，即使有其他内容（如这里：[http ://www.kapstadt-entdecken.de/wp-content/gallery/robben-island/1robben-island .jpg](http://www.kapstadt-entdecken.de/wp-content/gallery/robben-island/1robben-island.jpg)）。

我怎样才能做到这一点？

非常感谢！

丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:51:00.107

您可能希望在获取标头时使用 HEAD 请求（默认情况下不这样做）：

```
stream_context_set_default(array(
    'http' => array(
        'method' => 'HEAD'
    )
)); 
```

其次，您可以传递第二个参数来`get_headers`为您解析它：

```
$headers = get_headers($imageurl, 1); 
```

然后，您可以正常检查其余部分：

```
if (strpos($headers[0], '200') === false) {
    echo "not valid";
    exit;
}

if (isset($headers['Content-Type']) && 0 === strncmp($headers['Content-Type'], 'image/', 6)) {
    echo "valid image";
} else {
    echo "probably not an image";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:42:24.703

```
$headers = @get_headers($imageurl);

$is_image = false;
foreach ($headers as $header) {
    if (strpos($header, 'Content-Type: image/') === 0) {
        $is_image = true;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:43:20.117

也与 get_headers ...其中之一将是

```
image/png
image/jpeg
image/gif 
```

所以

```
$isImage = false;
foreach($headers as $header){
    if(strpos($header,'image/')==true){
        $isImage = true;
    }
} 
```

# javascript - JavaScript 小书签不工作？

> ID：10487268
> 
> 赞同：2
> 
> 时间：2012-05-07T18:39:48.213
> 
> 标签：javascript, click, bookmarklet

我找不到想要通过[http://ink361.com/#/tag/上列出的 javascript 书签单击的“心脏”的正确元素名称](http://ink361.com/#/tag/)

查看页面时，元素在点击后列为“喜欢”“a.likes.does”，在点击之前列为“a.likes”？- 有人应该帮助找到正确的名称，以便我可以更新代码。

我试图让这个小书签点击页面上所有的心'我不确定'喜欢'是否正确，或者我是否应该将其更改为其他内容，或者代码的另一部分是否不正确？

如何更改代码以使其正常工作？

```
javascript: e = document.getElementsByClassName('likes');
for (i = 0; i < e.length; i++) {
    e[i].click();
}
void(0); 
```

如果这不起作用，基本上我正在尝试执行 javascript，最好作为书签来单击页面上的喜欢。

查看页面时，我不确定正确的类名，所以目前 javascript 由于未知原因无法工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:54:21.633

您打算使用[`click`](http://api.jquery.com/click/)jQuery 函数吗？`script`如果不显式创建引用 jQuery的新标签，这将无法在书签中工作。

正如[IanW](https://stackoverflow.com/users/736534/ianw)对您的问题所评论的那样，您将需要[创建自己的`click`函数](https://stackoverflow.com/questions/902713/how-do-i-automatically-click-a-link-with-javascript)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:56:07.577

你可以像这样模拟鼠标点击事件，

```
function clickAll() {
   var clickEvt = document.createEvent("MouseEvents");
   clickEvt.initMouseEvent("click", true, true, window,
                         0, 0, 0, 0, 0, false, false, false, false, 0, null);

   var e = document.getElementsByClassName('likes');
   for(i=0;i<e.length;i++) { e[i].dispatchEvent(clickEvt); }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T18:50:49.620

您的代码看起来不错。问题是我什至不能用鼠标点击听筒。他们没有附加点击事件监听器。

# python - 如何在 Python 中声明并将项目添加到数组中？

> ID：10487278
> 
> 赞同：453
> 
> 时间：2012-05-07T18:40:49.613
> 
> 标签：python, arrays

我正在尝试将项目添加到 python 中的数组中。

我跑

```
array = {} 
```

然后，我尝试通过执行以下操作向该数组添加一些内容：

```
array.append(valueToBeInserted) 
```

似乎没有这种`.append`方法。如何将项目添加到数组中？

* * *

## 回答 #1

> 赞同：809
> 
> 时间：2012-05-07T18:42:42.597

`{}`表示一个空字典，而不是一个数组/列表。对于列表或数组，您需要`[]`.

要初始化一个空列表，请执行以下操作：

```
my_list = [] 
```

或者

```
my_list = list() 
```

要将元素添加到列表中，请使用`append`

```
my_list.append(12) 
```

到`extend`列表以包含来自另一个列表的元素使用`extend`

```
my_list.extend([1,2,3,4])
my_list
--> [12,1,2,3,4] 
```

要从列表中删除元素，请使用`remove`

```
my_list.remove(2) 
```

字典表示键/值对的集合，也称为关联数组或映射。

要初始化一个空字典，请使用`{}`或`dict()`

字典有键和值

```
my_dict = {'key':'value', 'another_key' : 0} 
```

要使用另一个字典的内容扩展字典，您可以使用该`update`方法

```
my_dict.update({'third_key' : 1}) 
```

从字典中删除值

```
del my_dict['key'] 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-05-07T18:41:52.677

如果你这样做：

```
array = {} 
```

您正在制作字典，而不是数组。

如果您需要一个数组（在 python 中称为列表），您可以像这样声明它：

```
array = [] 
```

然后你可以添加这样的项目：

```
array.append('a') 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-07T18:42:49.150

数组（`list`在 python 中调用）使用该`[]`符号。`{}`用于`dict`（在其他语言中也称为哈希表、关联数组等），因此您不会为 dict 进行“附加”。

如果您确实想要一个数组（列表），请使用：

```
array = []
array.append(valueToBeInserted) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-09-13T16:33:24.980

只是为了完成，你也可以这样做：

```
array = []
array += [valueToBeInserted] 
```

如果它是一个字符串列表，这也将起作用：

```
array += 'string' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-30T18:42:43.570

在某些语言（如**JAVA** ）中，您使用花括号定义数组，如下所示，但在 python 中，它具有不同的含义：

**爪哇：**

```
int[] myIntArray = {1,2,3};
String[] myStringArray = {"a","b","c"}; 
```

然而，在 Python 中，大括号用于定义字典，需要`key:value`赋值为`{'a':1, 'b':2}`

要实际定义一个数组（在 python 中实际上称为列表），您可以执行以下操作：

**Python：**

```
mylist = [1,2,3] 
```

或其他示例，例如：

```
mylist = list()
mylist.append(1)
mylist.append(2)
mylist.append(3)
print(mylist)
>>> [1,2,3] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-07T07:33:26.420

你也可以这样做：

```
array = numpy.append(array, value) 
```

请注意，该`numpy.append()`方法返回一个新对象，因此如果要修改初始数组，则必须编写：`array = ...`

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-07-31T11:29:26.357

我相信你们都错了。你需要做：

`array = array[]`为了定义它，然后：

`array.append ["hello"]`添加到它。

# php - 我们如何访问另一个类中的一个类对象？

> ID：10487280
> 
> 赞同：0
> 
> 时间：2012-05-07T18:40:51.327
> 
> 标签：php

我仍然无法弄清楚这一点。我们如何访问另一个类中的一个类对象？

我正在使用以下代码，但出现错误：

```
class ListofRecord{
        var $db;
    function __construct(){
            $db = global $db;

    }
    function record(){
       $record = $this->db->SelectQuery("SELECT * FROM user order by UID ASC");
       return $record;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:42:22.000

您需要先引用全局`$db`变量，然后在语句中使用它。您的构造函数中还有一个小的语法错误。`$this`您在提及您的`$db`财产时忘记使用关键字。

```
function __construct(){
    global $db
    $this->db = $db;
} 
```

最好不要使用全局变量，而是将您需要的任何变量作为参数传递给方法调用。在这种情况下，它是您的构造函数：

```
function __construct($db){
    $this->db = $db;
}

$list_of_record = ListofRecord($db); 
```

# wpf - 自定义列表框滚动条样式问题

> ID：10487285
> 
> 赞同：8
> 
> 时间：2012-05-07T18:41:16.903
> 
> 标签：wpf, listbox, styles, scrollbar, controltemplate

我有以下用于 WPF ListBox 控件的 xaml。我已经对其进行了自定义，以符合我的 UI 要求。但是，滚动条拇指不会到达滚动条的顶部和底部。如果我单击垂直滚动条轨道上的其他位置，拇指也不会滚动。请帮我解决问题。任何帮助表示赞赏。

这是我自定义的 ListBox 控件的快照：

![在此处输入图像描述](../Images/d28c72c8ddaaf50f42e0a83ec44869b1.png)

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
x:Class="MovieMessageBox.ListBoxStyles2"
x:Name="Window"
Title="ListBoxStyles2"
Width="370" Height="200">

<Window.Resources>

    <SolidColorBrush x:Key="ListBorder" Color="#828790"/>
    <Style x:Key="ListBoxStyle1" TargetType="{x:Type ListBox}">
        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBox}">
                    <Grid>
                        <Rectangle Fill="Pink" RadiusX="10" RadiusY="10" Opacity="0.195" />
                        <Border CornerRadius="10" x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="1" SnapsToDevicePixels="true">
                            <ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}" Template="{DynamicResource ScrollViewerControlTemplate1}">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="true">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ControlTemplate x:Key="ScrollViewerControlTemplate1" TargetType="{x:Type ScrollViewer}">
        <Grid x:Name="Grid" Background="{TemplateBinding Background}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" CanHorizontallyScroll="False" CanVerticallyScroll="False" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="0" Margin="{TemplateBinding Padding}" />
            <ScrollBar x:Name="PART_VerticalScrollBar" AutomationProperties.AutomationId="VerticalScrollBar" Cursor="Arrow" Grid.Column="1" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}" Style="{DynamicResource ScrollBarStyle1}"/>              
        </Grid>
    </ControlTemplate>
    <LinearGradientBrush x:Key="VerticalScrollBarBackground" EndPoint="1,0" StartPoint="0,0">
        <GradientStop Color="#E1E1E1" Offset="0"/>
        <GradientStop Color="#EDEDED" Offset="0.20"/>
        <GradientStop Color="#EDEDED" Offset="0.80"/>
        <GradientStop Color="#E3E3E3" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ScrollBarDisabledBackground" Color="#F4F4F4"/>

    <Style x:Key="ScrollBarButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Microsoft_Windows_Themes:ScrollChrome x:Name="Chrome" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="{TemplateBinding Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="VerticalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Rectangle Height="25" Width="8" Fill="White" RadiusX="5" RadiusY="5">
                        <Rectangle.Effect>
                            <DropShadowEffect ShadowDepth="0" BlurRadius="10" Color="White" />
                        </Rectangle.Effect>
                    </Rectangle>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="HorizontalScrollBarBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#E1E1E1" Offset="0"/>
        <GradientStop Color="#EDEDED" Offset="0.20"/>
        <GradientStop Color="#EDEDED" Offset="0.80"/>
        <GradientStop Color="#E3E3E3" Offset="1"/>
    </LinearGradientBrush>
    <Style x:Key="HorizontalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ScrollBarStyle1" TargetType="{x:Type ScrollBar}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="Width" Value="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
        <Setter Property="MinWidth" Value="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollBar}">
                    <Grid x:Name="Bg" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <Border Width="1" Background="#FFFFFF" HorizontalAlignment="Center"/>  
                        <Track x:Name="PART_Track" IsDirectionReversed="true" IsEnabled="{TemplateBinding IsMouseOver}">

                            <Track.Thumb>
                                <Thumb Style="{StaticResource ScrollBarThumb}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="VerticalGripper"/>
                            </Track.Thumb>
                        </Track>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="Bg" Value="{StaticResource ScrollBarDisabledBackground}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="Orientation" Value="Horizontal">
                <Setter Property="Width" Value="Auto"/>
                <Setter Property="MinWidth" Value="0"/>
                <Setter Property="Height" Value="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarHeightKey}}"/>
                <Setter Property="MinHeight" Value="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarHeightKey}}"/>
                <Setter Property="Background" Value="{StaticResource HorizontalScrollBarBackground}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ScrollBar}">
                            <Grid x:Name="Bg" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition MaxWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}"/>
                                    <ColumnDefinition Width="0.00001*"/>
                                    <ColumnDefinition MaxWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}"/>
                                </Grid.ColumnDefinitions>
                                <RepeatButton Command="{x:Static ScrollBar.LineLeftCommand}" IsEnabled="{TemplateBinding IsMouseOver}" Style="{StaticResource ScrollBarButton}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="LeftArrow"/>
                                <Track x:Name="PART_Track" Grid.Column="1" IsEnabled="{TemplateBinding IsMouseOver}">
                                    <Track.DecreaseRepeatButton>
                                        <RepeatButton Command="{x:Static ScrollBar.PageLeftCommand}" Style="{StaticResource HorizontalScrollBarPageButton}"/>
                                    </Track.DecreaseRepeatButton>
                                    <Track.IncreaseRepeatButton>
                                        <RepeatButton Command="{x:Static ScrollBar.PageRightCommand}" Style="{StaticResource HorizontalScrollBarPageButton}"/>
                                    </Track.IncreaseRepeatButton>
                                    <Track.Thumb>
                                        <Thumb Style="{StaticResource ScrollBarThumb}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="HorizontalGripper"/>
                                    </Track.Thumb>
                                </Track>
                                <RepeatButton Grid.Column="2" Command="{x:Static ScrollBar.LineRightCommand}" IsEnabled="{TemplateBinding IsMouseOver}" Style="{StaticResource ScrollBarButton}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="RightArrow"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter Property="Background" TargetName="Bg" Value="{StaticResource ScrollBarDisabledBackground}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="2,0,0,0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="Selector.IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>
<Window.Background>
    <ImageBrush ImageSource="@aleaf-1920.jpg"/>
</Window.Background>

<Grid x:Name="LayoutRoot">
    <ListBox HorizontalAlignment="Center" Height="150" Width="203" Style="{DynamicResource ListBoxStyle1}">
        <ListBoxItem Content="India"/>
        <ListBoxItem Content="America"/>
        <ListBoxItem Content="Russia"/>
        <ListBoxItem Content="Germany"/>
        <ListBoxItem Content="France"/>
        <ListBoxItem Content="Australia"/>
        <ListBoxItem Content="Thailand"/>
        <ListBoxItem Content="England"/>
        <ListBoxItem Content="Holand"/>
        <ListBoxItem Content="Poland"/>
        <ListBoxItem Content="Lesotho"/>
        <ListBoxItem Content="Tanzania"/>
    </ListBox>
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T17:07:04.050

您看到的行为是因为滚动条拇指是成比例的。比较下图中的两个拇指。

![在此处输入图像描述](../Images/7dac31e96282a2e2b3c33577fed11b5c.png)

拇指实际上使用了滚动条高度的 75%，因为列表框显示了 12 个项目中的 9 个。但是您已将自定义拇指的高度设置为 25。删除“height=25”属性，它将正确的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T21:23:33.523

关键是在滚动条的 Track 组件上设置 ViewportSize="NaN"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T15:37:40.373

尝试将高度设置为 NaN。不知道我是否记得正确。

# python - 电子邮件“日期”标题应该是发件人的当地时间还是 UTC？

> ID：10487286
> 
> 赞同：15
> 
> 时间：2012-05-07T18:41:21.473
> 
> 标签：python, email, rfc2822

我正在用 Python 编写一个基于 Web 的电子邮件客户端，并且出现了一个问题，即发送时应将电子邮件的“日期”标头表示为哪个时区。

[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)在第 3.3 节中指出：

> 日期和时间应该表示当地时间。

这对我来说似乎模棱两可；问题是谁的当地时间？电子邮件服务器还是发件人？自然我会假设发件人（他可以在任何时区，并且可以在他们的帐户偏好中更改）。[当我查看 Python 的email.utils.formatdate](http://docs.python.org/library/email.util.html?highlight=email.utils#email.utils.formatdate)函数时，出现了进一步的混乱，该函数似乎只提供了两种选择：UTC 或本地时间（服务器的）。对我来说，似乎没有任何选项可以指定备用时区，还是我错过了什么？

使用 UTC 日期字符串将 timeval 传递给 formatdate `time.mktime(senders_tz_aware_now_datetime.timetuple())`，考虑到 RFC 上面所说的内容，这感觉是错误的。

那么“日期”应该是哪个时区，是否存在任何标准函数来创建适当的日期字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T19:11:26.413

如果您想遵守 RFC，请通过`localtime=True`它返回带有本地时间和正确时区的日期字符串（假设您已正确设置它）。

```
>>> email.utils.formatdate(localtime=True)
'Mon, 07 May 2012 12:09:16 -0700' 
```

如果没有`localtime=True`得到表示 UTC 时间的日期字符串：

```
>>> email.utils.formatdate()
'Mon, 07 May 2012 19:08:55 -0000' 
```

`-0000`显然表示 UTC，尽管 RFC 特别推荐使用`+0000`. 不确定这是否是 email.utils 中的错误。

这是相关的python文档：

> 可选的 localtime 是一个标志，当为 True 时，解释 timeval，并返回相对于本地时区而不是 UTC 的日期，适当地考虑夏令时。默认值为 False，表示使用 UTC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T18:46:35.873

只需使用 UTC，您就会更快乐。

这就是当规范使用像应该这样的术语时发生的事情。我认为两者都应该被规范禁止，因为它们总是会产生不必要的复杂性。

使用 UTC 是完全有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-20T22:22:16.653

在谷歌搜索“电子邮件客户端本地时间”时，这是一个最佳结果；不幸的是，这两个答案和随附的评论几乎没有解决 python 实现，并且完全无法与主题行交谈（这是谷歌响应的内容）。

RFC 是明确的，因为它很明显：“^Date:”标头在写入时是本地的。邮件客户端通常会写入“^Date:”标头（在我处理过的许多实现中）。对于大多数（配置合理的）客户端，这将是客户端操作系统报告的本地时间。

在 webmail 的情况下，本地时间可以由用户代理提供（通常依次从操作系统获取本地时间）。更典型的是，它是由用户在 Web 应用程序（a la gmail）中设置的。

重要的是，如果您“遵循 RFC”（对于网络协议来说可能是一个好主意），RECEIVING 客户端上的结果行为通常会显示发件人看到的邮件发送日期。这就是 RFC 中“应该”的全部意义。在试图弄清楚同事什么时间发送电子邮件时，我不想看到 UTC；我想要他们的当地时间。这样，我可以一步计算出时差（他们的本地时间到我的时间），而不是两个（他们的本地时间到 UTC 到我的本地时间）。我还可以立即获得有关他们通信背景的线索（是晚上吗？工作时间？等）。

# asp.net-mvc-3 - 确保只有特定用户有权访问

> ID：10487288
> 
> 赞同：0
> 
> 时间：2012-05-07T18:41:29.570
> 
> 标签：asp.net-mvc-3

如果我想保护除一个用户之外的所有人都可以访问的操作，我该怎么做？

所以假设用户有一个产品。当他们转到 EditProduct 操作时，我怎样才能阻止其他人访问它？在过去，我总是使用`User.Idenity.Name`dthat 并将其与他们的用户名进行比较。但是，如果有人登录`username`而不是`UserName`那么即使是同一用户，案件也会中断。

在每张支票上使用`.ToUpper()`或类似的东西似乎非常脆弱和低效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:46:49.743

您可以将 Authorize 属性放在操作上方，如下所示：

```
[Authorize(Users = "username")] 
```

我不完全确定它是否区分大小写，但这是保护动作和控制器的最佳方法。此外，您可以对角色执行相同的操作：

```
[Authorize(Roles = "Administrator")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:47:29.213

String 具有 Equals 的属性：

```
User.Identity.Name.Equals("OtherName",StringComparison.CurrentCultureIgnoreCase) 
```

# html - 绝对位置但相对于父级

> ID：10487292
> 
> 赞同：613
> 
> 时间：2012-05-07T18:41:54.500
> 
> 标签：html, css

我在另一个 div 中有两个 div，我想使用 css 将一个子 div 放置在父 div 的右上角，将另一个子 div 放置在父 div 的底部。即，我想对两个子 div 使用绝对定位，但相对于父 div 而不是页面定位它们。我怎样才能做到这一点？

示例 html：

```
<div id="father">
   <div id="son1"></div>
   <div id="son2"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1094
> 
> 时间：2012-05-07T18:44:11.647

```
#father {
   position: relative;
}

#son1 {
   position: absolute;
   top: 0;
}

#son2 {
   position: absolute;
   bottom: 0;
} 
```

之所以有效，是因为`position: absolute`它的意思是“使用`top`, `right`, `bottom`,`left`将自己定位于与拥有`position: absolute`或的最近祖先的关系中`position: relative`。”

所以我们 make `#father`have `position: relative`，而孩子们 have `position: absolute`，然后使用`top`and`bottom`来定位孩子们。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-07T18:43:49.180

```
div#father {
    position: relative;
}
div#son1 {
    position: absolute;
    /* put your coords here */
}
div#son2 {
    position: absolute;
    /* put your coords here */
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-04-05T07:11:27.520

以防有人想将子 div 直接放在父级下面

```
#father {
   position: relative;
}

#son1 {
   position: absolute;
   top: 100%;
} 
```

工作演示[Codepen](https://codepen.io/petergus/pen/wJZdVZ)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-13T11:12:28.617

如果你不给父母任何位置，那么默认情况下它需要`static`. 如果您想了解这种差异，请参阅此示例

**示例 1::**

[http://jsfiddle.net/Cr9KB/1/](http://jsfiddle.net/Cr9KB/1/)

```
 #mainall
{

    background-color:red;
    height:150px;
    overflow:scroll
} 
```

这里父类没有位置，所以元素是根据body放置的。

**示例 2::**

[http://jsfiddle.net/Cr9KB/2/](http://jsfiddle.net/Cr9KB/2/)

```
#mainall
{
    position:relative;
    background-color:red;
    height:150px;
    overflow:scroll
} 
```

在此示例中，父级具有相对位置，因此元素绝对定位在相对父级内部。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-24T09:02:28.467

在需要粘性浮动“后退按钮”/“返回顶部”按钮的用例中。但是您的主要内容区域可以缩小以支持辅助内容区域

您可以`position: fixed;`在容器内使用`position: absolute;`以获得更灵活的行为，类似于`sticky`但更强大

```
function toggleOpen() {
  const element = document.getElementById("sideContnet");
  if (element.style.display === "none") {
    element.style.display = "block";
  } else {
    element.style.display = "none";
  }
}
```

```
.container {
  display: flex;
  margin: 0 auto;
    width: 600px;
}

.contentBig {
  width: 600px;
  min-width: 66%;
  position: relative;

}
.contentSmall {
  width: 230px;
  min-width: 33%;
}

.absolute {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 60px;
}

.fiexBack {
  position: fixed;
  background-color: red;
  bottom: 20px;
  padding: 5px;
}

.button {
  width: 200px;
  padding: 12px;
  background-color: coral;
  margin: 0 auto;
}
```

```
<button onclick="toggleOpen()" id="toggleSide" class="button">
  toggle open side content
</button>
<div class="container">
  <div class="contentBig">
    <div class="absolute">
      <div class="fiexBack">Back</div>
  </div>
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus vehicula est at pretium venenatis. Morbi mauris justo, viverra non velit sit amet, accumsan cursus nisi. Pellentesque ut vulputate sem. Etiam sit amet quam diam. Nulla vel sodales est. Quisque sed accumsan urna. Ut tristique efficitur ante a congue. Cras elementum dignissim tellus, in rhoncus ex faucibus nec. Sed vitae mi eu leo interdum aliquam. Donec eleifend nisl sem, a tincidunt velit commodo sit amet. Nulla ex eros, tempor in fringilla ut, accumsan ac augue. Curabitur aliquet venenatis massa, ornare viverra lorem varius interdum.
     </p>
<p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus vehicula est at pretium venenatis. Morbi mauris justo, viverra non velit sit amet, accumsan cursus nisi. Pellentesque ut vulputate sem. Etiam sit amet quam diam. Nulla vel sodales est. Quisque sed accumsan urna. Ut tristique efficitur ante a congue. Cras elementum dignissim tellus, in rhoncus ex faucibus nec. Sed vitae mi eu leo interdum aliquam. Donec eleifend nisl sem, a tincidunt velit commodo sit amet. Nulla ex eros, tempor in fringilla ut, accumsan ac augue. Curabitur aliquet venenatis massa, ornare viverra lorem varius interdum.
     </p>
<p>
Morbi leo nulla, varius nec dignissim quis, vestibulum quis mi. Sed dignissim lobortis magna. Ut erat nisl, varius id finibus at, faucibus scelerisque justo. Donec viverra purus eu ante volutpat iaculis. Donec vehicula ullamcorper urna ut egestas. Curabitur convallis at risus vitae fermentum. Nullam arcu ante, faucibus quis neque vel, pulvinar blandit est.
     </p>
<p>
Curabitur auctor ipsum ac interdum accumsan. Sed quis arcu mauris. Maecenas nibh ligula, tristique rhoncus pharetra vel, blandit non lectus. Suspendisse orci felis, faucibus sit amet rhoncus eu, ullamcorper et nulla. Ut in leo eu risus dignissim tempus sed sit amet leo. Etiam pulvinar lectus tincidunt turpis viverra maximus. Donec rutrum rutrum dui sit amet congue.
     </p>
<p>
Morbi leo nulla, varius nec dignissim quis, vestibulum quis mi. Sed dignissim lobortis magna. Ut erat nisl, varius id finibus at, faucibus scelerisque justo. Donec viverra purus eu ante volutpat iaculis. Donec vehicula ullamcorper urna ut egestas. Curabitur convallis at risus vitae fermentum. Nullam arcu ante, faucibus quis neque vel, pulvinar blandit est.
     </p>
  </div>
   <div id="sideContnet" class="contentSmall">
    <p>
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus vehicula est at pretium venenatis. Morbi mauris justo, viverra non velit sit amet, accumsan cursus nisi. Pellentesque ut vulputate sem. Etiam sit amet quam diam. Nulla vel sodales est. Quisque sed accumsan urna. Ut tristique efficitur ante a congue. Cras elementum dignissim tellus, in rhoncus ex faucibus nec. Sed vitae mi eu leo interdum aliquam. Donec eleifend nisl sem, a tincidunt velit commodo sit amet. Nulla ex eros, tempor in fringilla ut, accumsan ac augue. Curabitur aliquet venenatis massa, ornare viverra lorem varius interdum.
     </p>
<p>
Morbi leo nulla, varius nec dignissim quis, vestibulum quis mi. Sed dignissim lobortis magna. Ut erat nisl, varius id finibus at, faucibus scelerisque justo. Donec viverra purus eu ante volutpat iaculis. Donec vehicula ullamcorper urna ut egestas. Curabitur convallis at risus vitae fermentum. Nullam arcu ante, faucibus quis neque vel, pulvinar blandit est.
     </p>
  </div>
</div>
```

[完整代码示例](https://codepen.io/avneri/pen/mdWZYBB)

# .net - 如何在 DataGridView 的列标题中显示 Unicode 字符串？

> ID：10487295
> 
> 赞同：2
> 
> 时间：2012-05-07T18:42:03.440
> 
> 标签：.net, winforms, datagridview

我希望列标题显示一个 unicode 字符串。

我可以做这个：

```
dataGridView1.Columns[10].HeaderText = "\u2191"; // uparrow 
```

...但它显示为一个方形框，而不是我想要的向上箭头。

我怎样才能做我想做的事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:46:59.317

需要将控件的字体设置为 unicode-aware 字体，一种可以正确显示有问题的 unicode 字符的字体。

Windows 窗体（无论如何在我的机器上）的默认字体是 "Microsoft Sans Serif" ，它显然将 unicode 字符显示为一个方框。

在我的机器上允许使用 unicode 的字体是“Lucida Sans Unicode”，但还有其他字体。

我可以在设计器中为整个 datagridview 设置字体。

如果出于某种原因不希望为整个 datagridview 设置字体，则可以为任何特定列的标题单元格设置字体。我不相信这在 VS 设计器中是可能的，但在代码中是可能的。字体附加到`Style`属性，因此代码如下所示：

```
dataGridView1.Columns[10].HeaderText = "\u2191"; // uparrow
var style = new DataGridViewCellStyle();
style.Font = new System.Drawing.Font("Lucida Sans Unicode", 10F,
                                     System.Drawing.FontStyle.Regular,
                                     System.Drawing.GraphicsUnit.Point, ((byte)(0)));
dataGridView1.Columns[10].HeaderCell.Style = style;
dataGridView1.Columns[10].ToolTipText = "upvotes"; 
```

# mvvm - 使用 MEF 动态加载 xap 时如何将参数传递给 xap 文件？

> ID：10487297
> 
> 赞同：1
> 
> 时间：2012-05-07T18:42:07.807
> 
> 标签：mvvm, silverlight-4.0, mef

嗨，我使用[简化的 MEF：动态加载 Silverlight .xap](http://www.codeproject.com/Articles/86016/Simplified-MEF-Dynamically-Loading-a-Silverlight-x)创建了一个简单的主应用程序和两个 InjectedApplications（InjectedApplication1 和 InjectedApplication2） 。

然后我想做的是我们如何将值从主应用程序传递到注入应用程序？

这是场景：我有主要应用程序，我在其中按需注入 xap。直到这里一切正常，如上述文章中所述。我需要从那里扩展一些东西：

xap（注入的）应该具有加载某些特定 ID 值的代码。因此，当我在主应用程序中加载此 xap 时（加载注入的 xap 的位置），我想将一个值（某些 ID）传递给注入的 XAP，以便 xap 加载该特定 ID 的信息。

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:02:34.397

您应该具有[`Export`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.exportattribute.aspx)注入应用程序类型的属性。在这些属性中，您可以定义一个接口。让导出的类型实现相同的接口。当您使用 MEF 构造对象时，您将可以访问导出的界面。您可以使用它将数据传递给构造的对象。

我建议在单独的共享库项目中定义接口。

如果您不能或不想这样做，您可以使用事件聚合器，例如[MVVM Light 的](http://mvvmlight.codeplex.com/)Messenger。Messenger 具有静态`Default`属性。我很确定这两个 xap 文件将共享相同的默认 Messenger。然后，您可以通过这种方式发送和接收数据。

**例子**

共享库

```
public interface IFoo
{
    object Data { get; set; }
} 
```

注入的应用程序

```
[Export(typeof(IFoo))]
public class Foo : IFoo
{
    public object Data { get; set; }
} 
```

主应用

```
public class Bar
{
    [Import]
    public IFoo MyFoo { get; set; }
} 
```

现在，当您调用`CompositionInitializer.SatisfyImports(this)`时`Bar`，`MyFoo`将设置为`Foo`来自 Injected App 的实例。因为这实现`IFoo,`了你可以使用这个接口与类进行交互`Foo`。

如果您需要更多说明，我需要查看您的代码。

# android - 有没有办法以编程方式进入触摸模式？

> ID：10487305
> 
> 赞同：0
> 
> 时间：2012-05-07T18:42:48.260
> 
> 标签：android, listview, android-layout

所以我有一个有趣的问题。我有一个 ListView，我想在方向更改时保持准确的行选择和 yoffset。因此，我称之为：

```
list.postDelayed(new Runnable() {
        @Override
        public void run() {
            list.requestFocusFromTouch();
            list.setSelectionFromTop(finalPosition, yoffset);
        }
    },100); 
```

看起来很简单，而且效果很好。问题是当我改变方向两次（回到原来的方向，即横向->纵向->横向）时，列表退出了TouchMode，即list.isInTouchMode()返回false（在第一次方向改变时，列表.isInTouchMode() 返回 true，一切都很好，点击工作等）。因此，当您使用 setSelectionFromTop() 以编程方式滚动列表视图并单击列表中的项目而不先触摸应用程序中的其他位置时，列表会跳转并滚动到我单击的位置，突出显示错误的项目。这很烦人，我似乎找不到解决办法。任何想法和建议都非常受欢迎。

调用 list.requestFocusFromTouch() 似乎对设置 TouchMode 没有影响。

更多信息： [Android：在 ListView 打开时将项目设置为选中？](https://stackoverflow.com/questions/3888015/androidto-set-an-item-as-selected-when-the-listview-opens)

我发现 Romain Guy 的帖子“每当您触摸屏幕，在手机的任何位置，您都会进入所有应用程序的触摸模式。这是期望和预期的行为。” [http://groups.google.com/group/ android-developers/browse_thread/thread/590b02939d14675b/077ad77e4217e56e?lnk=gst&q=[android]+scroll+listview+not+in+touchmode#077ad77e4217e56e](http://groups.google.com/group/android-developers/browse_thread/thread/590b02939d14675b/077ad77e4217e56e?lnk=gst&q=[android]+scroll+listview+not+in+touchmode#077ad77e4217e56e)

我想要做的就是以某种方式进入 TouchMode 而不强迫用户在第二次方向改变时实际触摸设备。我曾多次尝试 list.dispatchTouchEvent() 。我可能发送了错误的运动事件：

```
list.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), 
    SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN , 
    list.getWidth(), list.getHeight(), 0));
list.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), 
    SystemClock.uptimeMillis(), MotionEvent.ACTION_MOVE , 
    list.getWidth(), list.getHeight(), 0));
list.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), 
    SystemClock.uptimeMillis(), MotionEvent.ACTION_UP , 
    list.getWidth(), list.getHeight(), 0)); 
```

另一种选择是找出我们不再处于 TouchMode 的原因。我没有覆盖 onConfigurationChanged() 所以布局在每次方向变化时完全重建。

提前致谢！

贾里德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:04:37.673

尝试使用 Listview 的 setItemChecked(...) 方法。我已经看到当 Listview 设置为 CHOICE_MODE_SINGLE 时使用了相当多的方法，因为该模式确实使每个 listview 项目成为可检查的对象。

另请查看以下 QA，其中有人试图做类似的事情。似乎最简单的解决方案是为“已检查”项目创建不同的背景。

[选择了 Android listview 数组适配器](https://stackoverflow.com/questions/10104966/android-listview-array-adapter-selected)

# arrays - 遍历 Perl 数组的最佳方法

> ID：10487316
> 
> 赞同：106
> 
> 时间：2012-05-07T18:43:13.033
> 
> 标签：arrays, perl, iteration

哪个是遍历 Perl 数组的最佳实现（就速度和内存使用而言）？有没有更好的办法？（`@Array`不需要保留）。

### 实施1

```
foreach (@Array)
{
      SubRoutine($_);
} 
```

### 实施 2

```
while($Element=shift(@Array))
{
      SubRoutine($Element);
} 
```

### 实施 3

```
while(scalar(@Array) !=0)
{
      $Element=shift(@Array);
      SubRoutine($Element);
} 
```

### 实施 4

```
for my $i (0 .. $#Array)
{
      SubRoutine($Array[$i]);
} 
```

### 实施 5

```
map { SubRoutine($_) } @Array ; 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-07T20:00:05.837

*   在速度方面：#1 和#4，但在大多数情况下并没有太多。

    您可以编写一个基准来确认，但我怀疑您会发现 #1 和 #4 稍微快一些，因为迭代工作是在 C 而不是 Perl 中完成的，并且不会发生不必要的数组元素复制。（*别名*`$_`为#1 中的元素，但 #2 和 #3 实际上从数组中*复制*标量。）

     **#5 可能类似。** 
***   在内存使用方面：除了#5之外，它们都相同。

    `for (@a)`是特殊情况以避免使阵列变平。循环遍历数组的索引。

    *   在可读性方面：#1。

    *   在灵活性方面：#1/#4 和#5。

    #2 不支持错误的元素。#2 和 #3 具有破坏性。** 

 *** * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-07T23:19:56.110

如果您只关心 的元素`@Array`，请使用：

```
for my $el (@Array) {
# ...
} 
```

或者

如果索引很重要，请使用：

```
for my $i (0 .. $#Array) {
# ...
} 
```

或者，从`perl`5.12.1 开始，您可以使用：

```
while (my ($i, $el) = each @Array) {
# ...
} 
```

如果你需要循环体中的元素和它的索引，~~我希望~~使用`each` ~~成为最快的，但随后~~您将放弃与 pre-5.12.1`perl`的兼容性。

在某些情况下，其他一些模式可能是合适的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T19:03:48.650

IMO，实现#1 是典型的，并且对于 Perl 来说，它的简短和惯用仅凭这一点就胜过其他实现。至少，这三种选择的基准可以让您深入了解速度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T19:01:03.847

1 与 2 和 3 大不相同，因为它使数组保持完整，而其他两个则使数组为空。

我会说#3 很古怪而且可能效率较低，所以忘记这一点。

剩下的就是#1 和#2，他们做的事情不一样，所以一个不能比另一个“更好”。如果数组很大并且您不需要保留它，*通常*范围会处理它（*但请参阅* **NOTE**），所以*通常*，#1 仍然是最清晰和最简单的方法。关闭每个元素不会加快任何速度。即使需要从引用中释放数组，我也会去：

```
undef @Array; 
```

完成后。

*   **注意**：包含数组范围的子程序实际上保留了数组并在下次重新使用空间。*一般来说*，这应该没问题（见评论）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-01T11:53:58.793

决定此类问题以对其进行基准测试的最佳方法：

```
use strict;
use warnings;
use Benchmark qw(:all);

our @input_array = (0..1000);

my $a = sub {
    my @array = @{[ @input_array ]};
    my $index = 0;
    foreach my $element (@array) {
       die unless $index == $element;
       $index++;
    }
};

my $b = sub {
    my @array = @{[ @input_array ]};
    my $index = 0;
    while (defined(my $element = shift @array)) {
       die unless $index == $element;
       $index++;
    }
};

my $c = sub {
    my @array = @{[ @input_array ]};
    my $index = 0;
    while (scalar(@array) !=0) {
       my $element = shift(@array);
       die unless $index == $element;
       $index++;
    }
};

my $d = sub {
    my @array = @{[ @input_array ]};
    foreach my $index (0.. $#array) {
       my $element = $array[$index];
       die unless $index == $element;
    }
};

my $e = sub {
    my @array = @{[ @input_array ]};
    for (my $index = 0; $index <= $#array; $index++) {
       my $element = $array[$index];
       die unless $index == $element;
    }
};

my $f = sub {
    my @array = @{[ @input_array ]};
    while (my ($index, $element) = each @array) {
       die unless $index == $element;
    }
};

my $count;
timethese($count, {
   '1' => $a,
   '2' => $b,
   '3' => $c,
   '4' => $d,
   '5' => $e,
   '6' => $f,
}); 
```

并在为 x86_64-linux-gnu-thread-multi 构建的 perl 5，版本 24，subversion 1 (v5.24.1) 上运行它

我得到：

```
Benchmark: running 1, 2, 3, 4, 5, 6 for at least 3 CPU seconds...
         1:  3 wallclock secs ( 3.16 usr +  0.00 sys =  3.16 CPU) @ 12560.13/s (n=39690)
         2:  3 wallclock secs ( 3.18 usr +  0.00 sys =  3.18 CPU) @ 7828.30/s (n=24894)
         3:  3 wallclock secs ( 3.23 usr +  0.00 sys =  3.23 CPU) @ 6763.47/s (n=21846)
         4:  4 wallclock secs ( 3.15 usr +  0.00 sys =  3.15 CPU) @ 9596.83/s (n=30230)
         5:  4 wallclock secs ( 3.20 usr +  0.00 sys =  3.20 CPU) @ 6826.88/s (n=21846)
         6:  3 wallclock secs ( 3.12 usr +  0.00 sys =  3.12 CPU) @ 5653.53/s (n=17639) 
```

所以'foreach（@Array）'的速度大约是其他的两倍。所有其他都非常相似。

@ikegami 还指出，除了速度之外，这些实现还有很多差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-30T09:09:59.870

在单行中打印元素或数组。

打印 $_ for (@array);

**注意：请记住 $_ 在内部引用循环中的 @array 元素。$_ 中所做的任何更改都将反映在@array 中；** 前任。

```
my @array = qw( 1 2 3 );
for (@array) {
        $_ = $_ *2 ;
}
print "@array"; 
```

输出：2 4 6**

# powershell - PowerShell 脚本和在运行时加载/调用模块

> ID：10487320
> 
> 赞同：2
> 
> 时间：2012-05-07T18:43:32.240
> 
> 标签：powershell, powershell-2.0

我正在编写用于生成报告的 PowerShell 脚本，我正在加载和调用最终用户提供的模块。

首先我调用用户提供的设置函数，然后加载模块：

```
# Load user provided modules
($userModules = Get-ChildItem ($userModHome + "*.psm1")) | ForEach-Object { Import-Module (join-path $userModHome $_.Name) } | Out-Null 
```

调用 setup 和 loading 后，我遍历模块列表并调用每个模块。这一切都是直截了当的，但我想要完成的不是函数需要的所有东西都需要全局变量。

我可以要求 setup 函数返回一个包含任何函数可能需要的所有内容的对象，然后将该数据结构传递给每个模块，但这可能会传递很多额外的东西。

我想知道是否有某种方法可以在运行时确定将什么传递给模块，或者其他一些优雅的解决方案来动态加载和执行模块而不使用全局变量。

简而言之，我想我在问 Powershell 是否有反射可用于确定模块的详细信息然后调用。我假设的困难部分是确定传递特定模块的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:51:50.023

不确定是否完全理解您的问题，但这里有两种在计算机上查找模块的方法。

**首先**，您可以使用classic`$env:PSModulePath`来存储客户端存储他的模块的地方，只需添加额外的代码来获取appart Microsoft原生模块。

**其次**，如果您将自己的代码作为模块交付，则可以如下所示对其进行参数化。

```
#REQUIRES -Version 2.0
#MyModule.PSM1
param ([strin]$ModulePath, [string] $choix)

switch ($choix)
{
  "developpement" {Import-Module $ModulePath\Modules-0201.psm1 -Verbose}
  "Integration" {Import-Module $ModulePath\Modules-0202.psm1 -Verbose}
  default {Import-Module $ModulePath\Modules-0203.psm1 -Verbose}
} 
```

您可以使用以下方式加载模块：

```
Import-Module .\Mydules.psm1 -ArgumentList "C:\Développements\Pgdvlp_Powershell\Apprentissage","developpement"
COMMENTAIRES : Chargement du module à partir du chemin
« C:\Développements\Pgdvlp_Powershell\Apprentissage\Modules-0201.psm1 ».
COMMENTAIRES : Exportation de la fonction « Bonjour ».
COMMENTAIRES : Importation de la fonction « Bonjour ». 
```

# git - 哪些信号可以安全地用于终止 Git 进程，哪些不能？

> ID：10487322
> 
> 赞同：18
> 
> 时间：2012-05-07T18:43:36.157
> 
> 标签：git, process

*   哪些信号是安全的，哪些不是？

*   对于那些不安全的信号，杀死一个 Git 进程会造成哪些损害？工作树可能处于未定义状态吗？.git/index 甚至 .git/objects-database 可能会损坏吗？

*   文件是由 Git 以某种“原子”操作编写的吗？（工作树文件、.git/index、配置文件等等......）

**更新：**关于信号的更精确的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-21T14:14:58.927

实际上，git 非常努力地尝试完全事务性 - 即它试图*永远不会*使存储库处于不一致的状态，无论何时或如何中断操作 - 请参阅这个问题： [如果修改它的命令崩溃，git 存储库是否会损坏还是被中止了？](https://stackoverflow.com/questions/8384101/can-a-git-repository-be-corrupted-if-a-command-modifying-it-crashes-or-is-aborte)

因此，如果使用 SIGTERM、SIGKILL 或红色电源按钮，如何终止 git 进程并不重要。如上面的答案所述，例外情况是工作目录中的文件可能是来自不同分支的文件的混合，因为这些文件不能一次全部替换。

也就是说，交易安全性很难测试（因为有很多极端情况），所以我不会 100% 依赖 git 在这种情况下是安全的。您通常应该没问题，但是您*可能会*不时遇到错误并弄乱存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:52:04.870

这取决于当你试图杀死它时 GIT 正在做什么。

如果你在克隆过程中杀死它，它肯定会处于部分不完整的状态，但很容易从中恢复：删除凌乱的部分克隆并再次克隆。

以我的经验，GIT 在失败时不会杀死它正在管理的文件。我之前在推送过程中将其杀死，而对我更改的文件没有太大损坏。当然，消息日志可能会有些混乱。

没有比你提供的更多的细节，很难说。

# php - PHP REST 客户端 API 调用

> ID：10487331
> 
> 赞同：4
> 
> 时间：2012-05-07T18:44:21.077
> 
> 标签：php, json, api, rest, curl

我想知道，有没有一种简单的方法来执行 REST API GET 调用？我一直在阅读有关 cURL 的内容，但这是一个好方法吗？

我也遇到了 php://input 但我不知道如何使用它。有没有人给我一个例子？

我不需要高级 API 客户端的东西，我只需要对某个 URL 执行 GET 调用以获取一些将由客户端解析的 JSON 数据。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-08T07:53:39.763

调用 REST 客户端 API 有多种方法：

1.  使用[卷曲](http://php.net/manual/en/book.curl.php)

CURL 是最简单和最好的方法。这是一个简单的调用

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, POST DATA);
$result = curl_exec($ch);

print_r($result);
curl_close($ch); 
```

2.  使用[Guzzle](http://guzzle.readthedocs.org/)

它是一个“PHP HTTP 客户端，可以轻松使用 HTTP/1.1 并消除使用 Web 服务的痛苦”。使用 Guzzle 比使用 cURL 容易得多。

这是来自网站的示例：

```
$client = new GuzzleHttp\Client();
$res = $client->get('https://api.github.com/user', [
    'auth' =>  ['user', 'pass']
]);
echo $res->getStatusCode();           // 200
echo $res->getHeader('content-type'); // 'application/json; charset=utf8'
echo $res->getBody();                 // {"type":"User"...'
var_export($res->json());             // Outputs the JSON decoded data 
```

3.  使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)

如果你有一个 url 并且你的 php 支持它，你可以调用 file_get_contents：

```
$response = file_get_contents('http://example.com/path/to/api/call?param1=5'); 
```

如果 $response 是 JSON，则使用 json_decode 将其转换为 php 数组：

```
$response = json_decode($response); 
```

4.  使用[Symfony 的 RestClient](https://github.com/CircleOfNice/CiRestClientBundle)

如果您使用的是 Symfony，那么有一个很棒的 rest 客户端包，它甚至包括所有 ~100 个异常并抛出它们而不是返回一些无意义的错误代码 + 消息。

```
try {
    $restClient = new RestClient();
    $response   = $restClient->get('http://www.someUrl.com');
    $statusCode = $response->getStatusCode();
    $content    = $response->getContent();
} catch(OperationTimedOutException $e) {
    // do something
} 
```

5.  使用[HTTPFUL](http://phphttpclient.com/)

Httpful 是一个简单的、可链接的、可读的 PHP 库，旨在使 HTTP 说话变得理智。它使开发人员可以专注于与 API 交互，而不是筛选 curl set_opt 页面，是一个理想的 PHP REST 客户端。

Httpful 包括...

*   可读的 HTTP 方法支持（GET、PUT、POST、DELETE、HEAD 和 OPTIONS）
*   自定义标题
*   自动“智能”解析
*   自动负载序列化
*   基本认证
*   客户端证书身份验证
*   请求“模板”

前任。

**发送 GET 请求。获取自动解析的 JSON 响应。**

该库注意到响应中的 JSON Content-Type 并自动将响应解析为原生 PHP 对象。

```
$uri = "https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22type%22:%22/music/artist%22%2C%22name%22:%22The%20Dead%20Weather%22%2C%22album%22:%5B%5D%7D";
$response = \Httpful\Request::get($uri)->send();

echo 'The Dead Weather has ' . count($response->body->result->album) . " albums.\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:46:02.957

您可以使用：

```
$result = file_get_contents( $url ); 
```

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T18:46:48.440

`file_get_contents`如果启用了 fopen 包装器，则可以使用。见： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

如果它们不是，并且您无法修复它，因为您的主机不允许它，那么这`cURL`是一个很好的使用方法。

# algorithm - 算法的增长函数？

> ID：10487334
> 
> 赞同：3
> 
> 时间：2012-05-07T18:44:33.573
> 
> 标签：algorithm, math, complexity-theory, big-o

好吧，我在这里有两个问题：-

1.  如果 f(n) 是要找到其增长率的函数，那么对于所有三个符号来说，g(n) 将是相同的，例如 f(n)=O(g(n)) 和类似的 omega 和 theta ?

2.  Theta 符号是“omega 和 Oh”，如果在某些情况下 oh 和 omega 函数不同，那么我们将如何在那里找到 theta 函数？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:51:11.517

O、Θ 和 Ω 表示法表示相关但非常不同的概念。O 表示法表示函数增长率的*渐近上限；*它说这个函数最终从上面被某个其他函数的某个常数倍数限制。Ω 表示法类似，但给出了一个下限。Θ 表示法给出了一个渐近的紧界——对于足够大的输入，算法的增长速度由函数的恒定倍数从上方和下方限定。

如果 f(n) = O(g(n))，则f(n) = Ω(g(n)) 或 f(n) = Θ(g(n)) 不一定为真**。**例如，1 = O(n)，但 1 ≠ Ω(n)，因为 n 的增长速度严格快于 1。

如果您发现 f(n) = O(g(n)) 和 Ω(h(n))，其中 g(n) ≠ h(n)，您可能需要进行更精确的分析以确定函数 j (n) 使得 f(n) = Θ(j(n))。如果 g(n) = Θ(h(n))，那么您可以得出 f(n) = Θ(g(n)) 的结论，但如果上限和下限不同，则无法确定 Θ函数的增长率。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:36:07.767

f(n)=O(g(n)) 表示n>N => |f(n)|≤C|g(n)| 对于一些常数 N 和 C。

f(n)=Ω(g(n)) 表示n>N => |f(n)|≥C|g(n)| 对于一些常数 N 和 C。

f(n)=Θ(g(n)) 意味着 f(n)=O(g(n)) 和 f(n)=Ω(g(n))。

如果我们希望 g 成为“好”函数（例如 n^r*Log(n)^s 之类的函数），所有 f 都不可能找到 f(n)=Θ(g(n)) 的 ag . 例如，如果 f(n)=cos(n)²*n+sin(n)²*n²，我们有 f(n)=O(n²) 和 f(n)=Ω(n) 但我们可以t 找到一个“好”的 g 使得 f(n)=Θ(g(n))。

# php - Imagick 安装错误未定义符号：MagickGetImageBluePrimary

> ID：10487340
> 
> 赞同：1
> 
> 时间：2012-05-07T18:44:45.077
> 
> 标签：php, module, imagick

怎么样，伙计们，我一直在尝试在 Centos 服务器上安装 imagick，但完全没有运气。

ImageMagick 运行良好。MagickWand 已安装并且模块编译没有问题。

```
# which MagickWand
/usr/local/bin/MagickWand
# MagickWand --version
6.7.6 Q16 
# which convert
/usr/local/bin/convert
# convert -v
Version: ImageMagick 6.7.6-8 2012-05-03 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP    
[imagick]# make install
Installing shared extensions:     /usr/lib/php/modules/
Installing header files:          /usr/include/php/
# php -m | grep imagick
PHP Warning:  PHP Startup: Unable to load dynamic library'/usr/lib/php/modules/imagick.so' - /usr/lib/php/modules/imagick.so: undefined symbol: MagickGetImageBluePrimary in Unknown on line 0 
```

有人熟悉这个错误吗？...任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:32:42.330

我有完全相同的错误。imagick imagick 模块版本 3.0.1 出现问题。安装imagick-2.3.0 版本正常工作

# jquery - 切换课程效果不佳

> ID：10487342
> 
> 赞同：0
> 
> 时间：2012-05-07T18:44:49.353
> 
> 标签：jquery, css, hover, toggle

在我的应用程序中并排列出了一堆图像。当悬停图像时，会显示有关图像的信息（描述、标题等）。这在大多数情况下都有效，但很多时候却没有。

例如，当我悬停图像并重新加载页面时，切换会在该图像的另一个方向上起作用，即。默认情况下，隐藏的 div 会显示，当我将其悬停时它会被隐藏（在所有其他图像上它都可以正常工作）。

这真的很烦人，我不知道如何解决它。下面是这个的代码（希望它足够了）。

如果有人可以在这里帮助我，我将不胜感激。

JS：

```
 $('.post').hover(function () {
        var image = $(this);
        image.find('.postDesc').toggle();
    }); 
```

HTML：

```
<div class="post">
    <img class="images" src="../images/image.png">
    <div class="postDesc">
        // other code... 
```

CSS：

```
.post {
    background: white;
    width: 200px;
    height: 200px;
    margin: 0px auto;
    float: left;
    margin-right: 30px;
    margin-bottom: 30px;
    position: relative;
    padding: 5px;
    -moz-box-shadow: 0 0 4px 1px #777;
    -webkit-box-shadow: 0 0 4px 1px#777;
    box-shadow: 0 0 4px 1px #777;
}

.postDesc {
    background-color:rgba(136, 136, 136, 0.35);
    color: white;
    width: 180px; 
    height:180px; 
    display:none; 
    position:absolute;
    margin: 5px;
    left: 0;
    bottom: 0;
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:46:13.697

我会尝试使用[toggleClass](http://api.jquery.com/toggleClass/)方法：

```
$(this).find(".postDesc").toggleClass("post"); 
```

请参阅[此 jsFiddle](http://jsfiddle.net/ggG5m/)进行演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:00:29.680

```
$('.post').hover(
 function () {
     $('.postDesc', $(this)).addClass('post');
 },
 function() {
     $('.postDesc', $(this)).removeClass('post');
 }); 
```

# twitter-bootstrap - Opa 引导示例

> ID：10487347
> 
> 赞同：1
> 
> 时间：2012-05-07T18:45:25.277
> 
> 标签：twitter-bootstrap, opa

我试图通过尝试一些功能使 Twitter 的 Bootstrap API (http://bootstrap.opalang.org/) 在 Opa 中工作，并且有一个拒绝工作：WB.grid 系统。更准确地说，当我尝试这样做时，解析器会报告语法错误：

```
 grid_basic = (WBootstrap.Grid.row([
        {span=8 offset=none content=<>foo</>},
        {span=8 offset=none content=<>bar</>}
        ])) 
```

（即有两个单元格的简单行）

这是错误字符串：

```
 grid_basic = (WBootstrap.Grid.row([
                    {-->span=8 offset=none content=<>foo</>},
                    {span=8 offset=none content=<>bar</>}
                    ]))

            Hint: File "test1.opa", line 9, characters 4-10, (9:4-9:10 | 158-164),
            found a binding as condition. Did you mean `==' rather than `=' ? 
```

过了一会儿，我只是复制粘贴了一个示例页面（http://bootstrap.opalang.org/html/src/container_app.opa.html）的整个代码，它在“网格”行上也失败了。我尝试了新旧解析器。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:20:22.843

[http://bootstrap.opalang.org](http://bootstrap.opalang.org)是用旧语法编写的。

此外，它使用 Bootstrap 1.4.0 小部件，这些小部件已过时（stdlib.widgets.deprecated.bootstrap）。

因此，您可以使用`opa --parser classic`或将代码转换为类似 js 的语法：（`{name1:value1, name2:value2, ...etc...}`请参阅[手册](http://doc.opalang.org/manual)）

# mercurial - 杀死 Mercurial (hg) 进程是否安全？

> ID：10487348
> 
> 赞同：4
> 
> 时间：2012-05-07T18:45:25.343
> 
> 标签：mercurial, process

*   杀死 Mercurial 进程时会造成哪些损害？工作目录可能处于未定义状态吗？.hg/-admin 区域可能会以某种方式损坏吗？

*   Mercurial 是否以某种“原子”操作编写文件？（工作树文件、.hg/-internal 文件、配置文件等等......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:50:12.180

这是安全的。完成所有写入，以使磁盘上的文件**始终**保持一致。事务要么完全写出，要么在下次找到时自动回滚。不仅在关闭时保持一致，而且*始终*保持一致——无论是通过 SIGKILL 还是电源故障停止。

您可以在这里弄清楚这是如何完成的：[https](https://www.mercurial-scm.org/wiki/FileFormats) ://www.mercurial-scm.org/wiki/FileFormats 。这部分是可能的，因为所有文件写入都只是追加。在写入任何内容之前，会记录文件长度，如果发现处于不一致状态，它们会自动将文件截断回检查点，已知良好的长度。

使用像 dropbox 之类的东西（它以它喜欢的任何顺序同步文件）可以把它扔出窗口，这就是为什么最好让 hg 成为写入存储库的唯一进程。

# macos - 以编程方式在 TextEdit 中选择文本范围

> ID：10487350
> 
> 赞同：3
> 
> 时间：2012-05-07T18:45:29.693
> 
> 标签：macos, cocoa, applescript, macos-carbon

是否可以在 TextEdit 中选择（突出显示）一系列文本（通过 AppleScript、Cocoa 或 Carbon）？我尝试了这段代码但没有用：

```
set value of attribute "AXSelectedTextRange" to {selStart, selLen} 
```

看来这个属性是只读的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:58:37.653

Not sure how to do it with AppleScript (should be possible though), with the accessibility APIs, you could do something like this:

```
AXUIElementRef systemWideElement = AXUIElementCreateSystemWide();
AXUIElementRef focussedElement = NULL;
AXError error = AXUIElementCopyAttributeValue(systemWideElement, kAXFocusedUIElementAttribute, (CFTypeRef *)&focussedElement);
CFRange range = CFRangeMake(0, 10);
AXUIElementSetAttributeValue(focussedElement, kAXSelectedTextRangeAttribute, AXValueCreate(kAXValueCFRangeType, &range));
CFRelease(focussedElement);
CFRelease(systemWideElement); 
```

That would select the first 10 characters if the TextEdit window is focussed.

# php - 字符未从数据库中显示在网站上？

> ID：10487351
> 
> 赞同：0
> 
> 时间：2012-05-07T18:45:33.690
> 
> 标签：php, html

在我的数据库中，我有很多

```
“ 
```

不要将此与

```
" 
```

这些没有显示在我的网站上，有没有办法将它们取出并显示在我的网站上，而无需将它们全部转换为 html 字符代码？

我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:48:59.807

我假设 MySQL 和 Apache。

在任何其他查询之前，运行此查询：

```
SET NAMES utf8 
```

还要确保您的网站使用的是 utf-8。在您的 .htaccess 中，添加：

```
AddDefaultCharset utf-8
AddCharset utf-8 .html .css .js .xml .json .rss .atom 
```

然后，在您`head`的页面上，添加

```
<meta charset="utf-8" /> 
```

# javascript - 带键盘的 jCarousel：使用 tab 键的焦点错误

> ID：10487352
> 
> 赞同：0
> 
> 时间：2012-05-07T18:45:38.963
> 
> 标签：javascript, jquery, keyboard, focus, jcarousel

我正在使用[jQuery jCarousel 脚本的 0.3 版本在](https://github.com/jsor/jcarousel)[我正在处理的网页](http://mediatheque-erre.fr/test/)上显示三个轮播。这三个旋转木马工作得很好。

问题是：您无法使用键盘正确使用它们。

1.  如果您浏览页面，焦点会转到轮播中第一个项目的第一个链接，*即使*该项目不可见！（例如：单击其中一个轮播中的“下一个”链接，然后使用 Tab 键浏览：焦点将转到轮播内部不可见的链接）。
2.  如果你一直使用“tab”键，焦点将依次转到轮播中所有项目的所有链接。

取而代之的是：焦点应该转到第*一个可见项目的*第一个链接；然后，如果到达最后一个可见项目的最后一个链接，那么焦点应该离开*轮*播（实际上是它之外的下一个链接）。

一个解决方案可能是使用tabindex ...但是页面的某些部分与网站的其他页面共享，所以我不能在我所有页面的所有链接中使用tabindex ...

取而代之的是，我尝试过这样的事情：

```
$("#carousel-editos li a").focusin(function () { 
  $("#carousel-editos li.jcarousel-item-first .post-title a").focus(); 
  return false; 
}); 
```

但随后它阻止了“tab”键的任何进一步使用......

我希望这很清楚......感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:45.420

在 carousel createEnd 和 scrollEnd 函数中，您可以重置 .jCarousel 的内容，以便只有可见的 carousel 项目是“可选项卡”的。我在我的代码中这样做了，如下所示：

```
var bannerSlider_scrollEnd = function(event, carousel) {
    var $carousel = carousel.element(),
        $items = carousel.items(),
        $bannerContent,
        $visibleItemsContent = carousel.visible().find('.bannerContent');
    $items.each(function (index) {
        $bannerContent = $(this).find('.bannerContent');
        disableTabbing($bannerContent);
    });
    reenableTabbing($visibleItemsContent);
    $visibleItemsContent.find(':focusable').eq(0).focus();
 }; 
```

`disableTabbing($container)`和行指的`reenableTabbing($container)`是我在我的站点中编码的辅助函数，它基本上可以找到`:focusable`给定容器中的所有元素，并将 tabindex 设置为“-1”，然后分别设置为“0”。

在此过程之后，用户将只能通过可见的轮播项目而不是所有轮播项目进行选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:01:33.410

我认为您需要结合您已经提供的答案。似乎您应该能够使用 Javascript 在 HTML 上动态设置您需要可选项卡的 tabindex 属性（呵呵，新词）。我在想这样的事情：

1.  在页面加载时，找到轮播中的所有可见项目。使用 jQuery 为`tabindex`选项卡循环中所需的每个项目设置属性。
2.  将`tabindex`属性分配给您要循环浏览的页面上的所有其他链接。
3.  添加一些 jQuery 以`tabindex`在用户更改轮播中的项目时修改属性（单击下一个/上一个按钮）。

[如果您在jsFiddle](http://jsfiddle.net/)中制作了一个简化的示例，那么帮助您会容易得多。

# c++ - 从 ant 运行 ndk-build

> ID：10487353
> 
> 赞同：2
> 
> 时间：2012-05-07T18:45:48.970
> 
> 标签：c++, eclipse, ant, java-native-interface

我从 eclipse 中使用它，它总是告诉我这个错误消息：

构建失败 C:\Users\js\Desktop\two-libs\jni\build.xml:3：执行失败：java.io.IOException：无法运行程序“D:\android-ndk-r7c\ndk-build”： CreateProcess 错误=193，%1 不是有效的 Win32 应用程序

但是 ndk-build 在那个文件夹中。这是我的 build.xml 文件：

```
project name="salut" 
  target name="compile"
exec executable="D://android-ndk-r7c//ndk-build" failonerror="true" exec
  target
project 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T09:50:21.730

假设您正在从窗口操作系统运行...

尝试更改：D:\android-ndk-r7c\ndk-build

至：D:\android-ndk-r7c\ndk-build.cmd

那应该通知Windows“ndk-build”是可运行的。

# javascript - Javascript nodeValue不接受新变量

> ID：10487356
> 
> 赞同：0
> 
> 时间：2012-05-07T18:46:09.523
> 
> 标签：javascript, dom

这是我所拥有的：

我动态创建了这个标记：

```
 <p id="amount"><span></span></p> 
```

现在我需要填写跨度：

```
if (amount.firstChild.nodeType == 1) {
  amount.firstChild.nodeValue = text;

  alert(description.firstChild.nodeType); //this shows SPAN

} 
```

amount 是一个使用 getElementbyId 创建的变量，而 text 是一个可以工作的变量，只显示一个数字。

现在，为什么不接受文本作为值？它呈现和空跨度......并且文本工作得很好......

非常感谢伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:52:07.330

尝试使用：

```
amount.firstChild.appendChild(document.createTextNode(text)); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/wdLGA/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:49:27.307

```
amount.firstChild.innerHTML = text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:53:21.203

您可以测试跨度中的嵌套文本节点，如果没有，则创建它。

```
var span = amount.firstChild
if (!span.firstChild)
    span.appendChild(document.createTextNode(text));
else
    span.firstChild.nodeValue = text; 
```

# c# - 使用 NAudio 从左声道的一个 WAV 和右声道的一个 WAV 创建 WAV

> ID：10487368
> 
> 赞同：2
> 
> 时间：2012-05-07T18:46:57.667
> 
> 标签：c#, .net, naudio

我对 .NET 中的音频完全陌生，所以请耐心等待。

我的目标是创建一个带有两个通道的单个 wav 文件。左声道将包含语音消息（使用 SpeechSynthesizer 生成的流），右声道需要是给定单一频率的简单音调。

为了让事情更复杂一点，我还需要右声道音来“预订”消息，这意味着它在左声道音频前几秒钟开始，然后在几秒钟后继续。

我发现这个博客[http://mark-dot-net.blogspot.com/2009/10/playback-of-sine-wave-in-naudio.html](http://mark-dot-net.blogspot.com/2009/10/playback-of-sine-wave-in-naudio.html)关于为给定频率创建正弦音，但没有t 发现任何关于将两个文件与一个通道上的音频完全组合，另一个通道上的另一个文件。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:37:01.247

为此，您可以使用[MultiplexingSampleProvider](http://mark-dot-net.blogspot.co.uk/2012/01/handling-multi-channel-audio-in-naudio.html)来创建组合立体声流，该流从两个单独的 SampleProvider 获取其左右声道。

# rspec - rspec 中特定上下文的一次性配置？

> ID：10487377
> 
> 赞同：5
> 
> 时间：2012-05-07T18:47:58.617
> 
> 标签：rspec

我有一些昂贵的测试设置，仅对我规范中的少数示例是必需的，并且，如果需要，它只需要运行一次。因为它很慢，我试图避免将它放在 before(:each) 块中，但 before(:all) 似乎不适合我的需要。我认为一个复杂的因素是昂贵的部分必须在其他一些常见设置之后运行。（这是一个带有搜索引擎的应用程序的水豚测试。创建一些记录后，我需要索引测试数据库以获得搜索结果。）我的设置是这样的：

```
feature 'some particular feature' do
  before(:each) do
    # a bunch of common test setup (creating records that this test will use)
  end

  describe 'simple example #1' do
    # a simple example that doesn't need the expensive setup
  end
  .
  .
  .
  describe 'simple example #N' do
    # a simple example that doesn't need the expensive setup
  end

  describe 'a more complicated example' do
    before(:all) do
      # expensive_setup that depends on the records created above
    end

    it 'does something' do ... end
    it 'does something else' do ... end
    .
    .
    .
    it 'even does this' do ... end
  end      
end 
```

问题是当 rspec 在上下文中运行示例时`more complicated example`，该块在它所依赖的块*之前*`before(:all)`运行。到目前为止，我不得不将昂贵的设置放在一个块而不是一个块中。这意味着必须为该示例中的每个块运行昂贵的设置。有一个更好的方法吗？*`before(:each)``before(:each)``before(:all)``it`*

 ***更新：** 我没有提到昂贵操作的结果*仅*取决于数据库。因此，由于每个示例都使用相同的数据库设置，因此可以安全地为每个示例重用昂贵操作的结果。此外，结果存在于文件系统中，因此在示例之间不会被清除。

我认为要走的路是在文件系统中放置某种标记，表明结果很好，不需要重新计算。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:16:01.267

我通过计算通用设置的摘要并将其与昂贵操作的结果一起保存来解决这个问题。在执行昂贵的操作之前，请检查当前摘要是否与磁盘上的摘要匹配。如果是这样，则无需这样做。由于所有示例共享通用设置，因此昂贵的操作最多只运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-23T09:37:18.297

您可以将有趣的部分保存在变量中，您将使用它来进行断言。这是黑客：

```
feature 'Aides page' do 

  context 'No active user' do
    that = nil
    before do
      if !that
        create_2_different_aids
        disable_http_service
        visit aides_path
        that = Nokogiri::HTML(page.html)
      end
    end
    after do
      enable_http_service
    end
    scenario 'Should display 2 aids NOT related to any eligibility' do
      display_2_aids_unrelated_to_eligibility(that)
    end
    scenario 'Should not display breadcrumb' do
      expect(that.css('.c-breadcrumb').size).to eq(0)
    end
  end

end 
```*

# ios - AVAudioPlayer 不尊重静音

> ID：10487378
> 
> 赞同：0
> 
> 时间：2012-05-07T18:48:07.470
> 
> 标签：ios, avaudioplayer

还有其他主题，但我无法在其中发表评论，并且我已经尝试了列出的所有方法。

我的应用程序有一首歌曲在打开时播放，但在 iPad 上按下静音没有效果（它应该使歌曲静音）。

这是我开始声音的代码：

```
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"intro_theme" withExtension:@"wav"] error:NULL];`
[audioPlayer play]; 
```

这是我尝试过的各种方法：

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil];

UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory); 
```

其他人似乎能够让 AVAudioPlayer 尊重静音选项 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:45:03.630

您是否尝试过 AVAudioSessionCategorySoloAmbient 类别？

根据[Apple 的文档](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/doc/c_ref/AVAudioSessionCategorySoloAmbient)：当您使用此类别时，来自其他应用程序的音频会被静音。您的音频通过屏幕锁定和静音开关（在 iPhone 上称为响铃/静音开关）静音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:31:15.873

这是一个解决方案：

我使用 NSTimer 延迟播放音频，直到调用 setCategory 后 1 秒。这适用于 iPad 3 和 iPad 1（尚未在 2 上测试）。

# shell - shell脚本无法将命令行的输出保存到变量中

> ID：10487379
> 
> 赞同：3
> 
> 时间：2012-05-07T18:48:10.920
> 
> 标签：shell, variables, command-line, backticks

我正在尝试执行 shell 命令，然后使用 shell 脚本将输出保存到变量中。所以我使用这样的反引号：

```
out=`ls -l`
print $out 
```

该代码工作正常，我可以将它用于任何其他 shell 命令，但是当我尝试执行“python --version”来检查 python 版本时。我有奇怪的问题。反引号不适用于“python --version”命令，而它可以与任何其他命令一起正常工作，它将输出打印到屏幕上，并且不会将任何内容保存到变量 $out。所以如果我这样做：

```
out =`python --version`
print "my python version is "$out 
```

结果：

```
Python 2.6.1
my python version is 
```

我也尝试使用 $() 替换反引号，但没有运气。任何的想法 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T18:50:34.287

等号前有一个空格：

```
out =`python --version` 
```

应该：

```
out=`python --version` 
```

**更新**

python还将版本字符串输出到stderr，因此您需要将其重定向到stdout：

```
out=`python --version 2>&1` 
```

# apache - Apache mod_rewrite mod_proxy 重定向

> ID：10487382
> 
> 赞同：1
> 
> 时间：2012-05-07T18:48:16.577
> 
> 标签：apache, mod-rewrite, puppet, mod-proxy, theforeman

我正在尝试将 /foreman 重定向到[https://someurl:4343](https://someurl:4343)

我在用：

```
SSLProxyEngine on
ProxyPass  /foreman https://MyIP:4343/
ProxyPassReverse  /foreman https://MyIP:4343/ 
```

到目前为止的结果是：

*   我得到没有样式和图像的索引页

*   所有链接都不起作用，即 /foreman/hosts?somevariable=somevalue

我想让所有对 /foreman/* 的请求转到[https://MyIP:4343/](https://MyIP:4343/) * 包括变量、获取请求、图像、样式表等

我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:42:28.440

这是一个毫无头绪的菜鸟时刻。

我发现我想要的结果可以用 mod_ruby 解决

我使用以下链接作为解决问题的指南。

[工头作为子 URI](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rack_to_sub_uri)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T21:22:22.183

您需要 /foreman ProxyPass /foreman/ [https://MyIP:4343/](https://MyIP:4343/)
ProxyPassReverse /foreman/ [https://MyIP:4343/](https://MyIP:4343/)上的斜杠

# php - 将动态参数传递给函数

> ID：10487387
> 
> 赞同：1
> 
> 时间：2012-05-07T18:48:35.710
> 
> 标签：php, arguments, user-defined-functions

我在下面有一个用户定义的函数：

```
function char_replace($line1){
    $line1= str_ireplace("Snippet:", "", $line1);
    // First, replace UTF-8 characters.
    $line1= str_replace(
    array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
    array("'", "'", '"', '"', '-', '--', '...'),
    $line1);
    // Next, replace their Windows-1252 equivalents.
    $line1= str_replace(
    array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
    array("'", "'", '"', '"', '-', '--', '...'),
    $line1);
} 
```

我正在替换我已经爆炸的多行上的字符，除了我想将动态参数应用于函数 char_replace`$line`很可能是这样，`$line2`或者`$line3`我会以这种方式转换字符： `$line1 = char_replace($line1)`

我想让函数参数和 str_replace/str_ireplace 参数成为一个动态变量，我可以像这样转换另一行： `$random_line = char_replace($random_line)` 这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:57:38.503

如果我没看错，只需在函数中添加一个返回值。所以：

```
function char_replace($string){
  $string= str_ireplace("Snippet:", "", $string);
  // First, replace UTF-8 characters.
  $string= str_replace(
  array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
  array("'", "'", '"', '"', '-', '--', '...'),
  $string);
  // Next, replace their Windows-1252 equivalents.
  $string= str_replace(
  array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
  array("'", "'", '"', '"', '-', '--', '...'),
  $string);

  return $string;
} 
```

这将允许您将任何字符串传递给函数并取回修改后的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:56:23.870

假设你结束你的函数，`return $line1;`你可以这样调用它：

```
$line1 = char_replace($line1);
$line2 = char_replace($line2);
$line3 = char_replace($line3); 
```

在函数定义中如何调用参数并不重要，它们是该函数的本地函数，并且可以在函数之外具有不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:57:38.247

您是否只想将 return 语句添加到您的函数中：

```
function char_replace($line1){
    $line1= str_ireplace("Snippet:", "", $line1);
    // First, replace UTF-8 characters.
    $line1= str_replace(
    array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
    array("'", "'", '"', '"', '-', '--', '...'),
    $line1);
    // Next, replace their Windows-1252 equivalents.
    $line1= str_replace(
    array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
    array("'", "'", '"', '"', '-', '--', '...'),
    $line1);
    return $line1;
} 
```

# cuda - CUDA 并发内核在使用事件时序列化

> ID：10487389
> 
> 赞同：4
> 
> 时间：2012-05-07T18:48:39.637
> 
> 标签：cuda

我在预期并发执行的 CUDA 内核中遇到了一个序列化问题。我使用 cudaEvents 作为标记来跟踪内核执行。

在我对具有多个流的并发内核的实验中，我们观察到在它们各自的流上使用事件会导致并发内核被序列化。

下面的代码演示了这个问题。我在两个不同的设备上测试了这个，它们具有下面列出的并发内核执行功能：

1.  Tesla C2070，驱动程序版本 4.10，运行时版本 4.10，CUDA 功能 2.0
2.  Tesla M2090，驱动程序版本 4.10，运行时版本 4.10，CUDA 功能 2.0

您可以通过更改 USE_EVENTS 宏来运行带有和不带事件的程序，您将观察到并发执行与串行执行的差异。

```
#include<cuda.h>
#include<pthread.h>
#include<stdio.h>
#include<stdlib.h>
#include<stdint.h>

#define CUDA_SAFE_CALL( call) do {                                        \
cudaError_t err = call;                                                    \
if( cudaSuccess != err) {                                                \
fprintf(stderr, "Cuda error in call at file '%s' in line %i : %s.\n", \
__FILE__, __LINE__, cudaGetErrorString( err) );              \
exit(-1);                                                     \
} } while (0)

// Device code
__global__ void VecAdd(uint64_t len)
{
    volatile int a;
    for(uint64_t n = 0 ; n < len ; n ++)
        a++; 
    return ;
}

#define USE_EVENTS

int
main(int argc, char *argv[])
{

    cudaStream_t stream[2];
    for(int i = 0 ; i < 2 ; i++) 
        CUDA_SAFE_CALL(cudaStreamCreate(&stream[i]));

#ifdef USE_EVENTS
    cudaEvent_t e[4];
    CUDA_SAFE_CALL(cudaEventCreate(&e[0]));
    CUDA_SAFE_CALL(cudaEventCreate(&e[1]));
    CUDA_SAFE_CALL(cudaEventRecord(e[0],stream[0]));
#endif
    VecAdd<<<1, 32, 0, stream[0]>>>(0xfffffff);

#ifdef USE_EVENTS
    CUDA_SAFE_CALL(cudaEventRecord(e[1],stream[0]));
#endif

#ifdef USE_EVENTS
    CUDA_SAFE_CALL(cudaEventCreate(&e[2]));
    CUDA_SAFE_CALL(cudaEventCreate(&e[3]));
    CUDA_SAFE_CALL(cudaEventRecord(e[2],stream[1]));
#endif
    VecAdd<<<1, 32, 0, stream[1]>>>(0xfffffff);

#ifdef USE_EVENTS
    CUDA_SAFE_CALL(cudaEventRecord(e[3],stream[1]));
#endif
    CUDA_SAFE_CALL(cudaDeviceSynchronize());

    for(int i = 0 ; i < 2 ; i++) 
        CUDA_SAFE_CALL(cudaStreamDestroy(stream[i]));

    return 0;

} 
```

关于为什么会发生这种情况以及如何规避这种序列化的任何建议都是有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:19:37.160

上述示例问题按以下顺序工作：

```
1 event record on stream A
2 launch on stream A
3 event record on Stream A
4 event record on stream B
5 launch on stream B
6 event record on stream B 
```

同一流上的 CUDA 操作按发出顺序执行。不同流中的 CUDA 操作可以同时运行。

根据编程模型定义，应该有并发性。但是，在当前设备上，这项工作是通过单个推送缓冲区发布到 GPU 的。这会导致 GPU 在发出操作 3 之前等待操作 2 完成，并且在发出操作 5 之前等待操作 4 完成，...如果删除了事件记录，则操作是

```
1 launch on stream A
2 launch on stream B 
```

操作 1 和 2 在不同的流上，因此 GPU 可以同时执行这两个操作。

Parallel Nsight 和 CUDA 命令行分析器 (v4.2) 可用于对并发操作进行计时。命令行分析器选项是“conckerneltrace”。此功能应出现在 NVIDIA Visual Profiler 的未来版本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:20:54.263

我正在调试基本相同的问题。格雷格的回答非常有帮助，尽管解释似乎并不完整。真正的问题是，当 4 发出时，操作 3 正在等待 2。即使 4 在不同的流中，如果已经有内核/事件在问题队列中等待，它不能被发出。这类似于每个流连续发布多个内核的情况。这可以通过延迟流结束事件来解决，如下所示：

1.  流 A 上的事件记录（启动计时器）
2.  在流 A 上启动
3.  流 B 上的事件记录（启动计时器）
4.  在流 B 上启动
5.  流 A 上的事件记录（结束计时器）
6.  流 B 上的事件记录（结束计时器）

由于启动是异步的，因此流结束事件将等到该流中的先前内核启动完成，并且所有其他流的内核问题都已启动。显然，如果给定硬件上的流数多于可以同时发出的流，这将导致结束计时器发出得太晚。

# asp.net - 将可变页面路由值返回到页面（URL 重写）

> ID：10487396
> 
> 赞同：2
> 
> 时间：2012-05-07T18:49:00.753
> 
> 标签：asp.net, vb.net, url-rewriting, url-routing

在我的 global.asax.vb 中，我有这样的规则：

```
RouteTable.Routes.MapPageRoute("defaultRoute", "{*value}", "~/default.aspx") 
```

所以，如果有人进入：

> [http://www.mydomain.com/janedoe](http://www.mydomain.com/janedoe)

即使该页面不存在，应用程序也会拉出 default.aspx

现在，如果这不使用通配符，那么很容易在 default.aspx 上提取这个值，如下所示：

```
Dim prospect as String = Page.RouteData.Values("value") 
```

但这似乎不适用于通配符，例如：

```
Dim prospect as String = Page.RouteData.Values("*value") 
```

如何让页面获取这些变量值？例如，一次可能是 janedoe、另一个 johndoe、另一个 goose、另一个 12345 等。无论它是什么，我都希望它返回到字符串前景中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:45:09.627

这个问题的答案最终变得非常简单......以至于我觉得有点愚蠢（除了没有其他人回答这个问题的事实:)）：

在我的情况下，我需要做的就是将我的代码更改为以下内容：

```
Dim prospect as String = Page.RouteData.Values("value") 
```

换句话说，我从值名称中删除了通配符。

# java - GWT 剪贴板过去缓冲区

> ID：10487398
> 
> 赞同：1
> 
> 时间：2012-05-07T18:49:03.583
> 
> 标签：java, gwt, clipboarddata

我维护一个 GWT Web 应用程序。我们的用户经常通过标准文件上传对话框上传屏幕截图图像文件。我正在尝试考虑一些对用户更友好的方法。我想知道是否有任何方法可以让用户在单击打印屏幕按钮后“粘贴”图像数据。

我读过一些其他帖子，说 GWT 不能自然地将任何内容复制到剪贴板缓冲区或从剪贴板缓冲区读取，但是如果用户通过 ctrl-V 手动粘贴图像或右键单击并粘贴会怎样。

如果有人知道我如何在 GWT 中完成此任务或有任何其他想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:33:07.573

有一个粘贴事件：

```
com.google.gwt.user.client.Event.ONPASTE 
```

我使用它，但仅用于粘贴文本（用户必须使用 Ctrl+V 或右键单击>粘贴）。我想你可能有一种方法可以使用它。

为了捕获事件，我首先将它接收到我的小部件：

```
sinkEvents(Event.ONPASTE | Event.ONKEYPRESS | Event.ONKEYDOWN | Event.ONFOCUS); 
```

然后，我实现 onBrowserEvent(Event)：

```
public void onBrowserEvent(Event event) {
    super.onBrowserEvent(event);
    switch (event.getTypeInt()) {
    case Event.ONPASTE: paste(event);
    }
} 
```

希望你能找到一种方法来适应图像。

# ios - JSON 解析返回 null

> ID：10487399
> 
> 赞同：0
> 
> 时间：2012-05-07T18:49:04.487
> 
> 标签：ios, json, cocoa, ios5

我需要解析 Apple JSON，但我有一个小问题。我现在正在这样做：

问题在这里：

```
- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:kNilOptions 
                                                           error:&error];

    NSNumber *resultCount = [json objectForKey:@"resultCount"];
    NSLog(@"%i", [resultCount intValue]);

    NSArray * AppStoreUrlParse = [json objectForKey:@"results"]; 

    NSDictionary* StoreParse = [AppStoreUrlParse objectAtIndex:0];

    NSLog(@"%@", [json objectForKey:@"price"]);

} 
```

在这条线上：

```
 NSLog(@"%i", [resultCount intValue]); 
```

NSlog 正在恢复： 1 像 JSON ( [http://itunes.apple.com/lookup?id=387633954](http://itunes.apple.com/lookup?id=387633954) )

但是在这条线上

```
 NSLog(@"%@", [json objectForKey:@"price"]); 
```

NSLOG 返回（空）

有谁知道我如何从 json 中获取价格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:56:35.500

似乎“价格”是字典的一部分，它是“结果”数组中的第一项。

你能试一下吗

```
NSLog(@"%@", [[AppStoreUrlParse objectAtIndex:0] objectForKey:@"price"]); 
```

这将在 JSON 的“结果”数组的第一个元素中获得键“价格”的值。

**编辑**

实际上，重新阅读您的代码，您已经在这一行中获得了数组的第一个元素：

```
NSDictionary* StoreParse = [AppStoreUrlParse objectAtIndex:0]; 
```

所以你需要做的就是`json`在`StoreParse`你的 NSLog 中改变：

```
NSLog(@"%@", [StoreParse objectForKey:@"price"]); 
```

# javascript - 使用带有标签的 Javascript 动态添加 HTML 。如何判断图像何时加载

> ID：10487400
> 
> 赞同：3
> 
> 时间：2012-05-07T18:49:21.647
> 
> 标签：javascript, jquery, ajax, image, preload

假设我有一个 div，并想在该 div 中注入一些 HTML。HTML 将包含 1 个或多个图像。

有什么方法可以使用纯 JavaScript 或 jQuery 来确定图像何时加载？

因此，如果我执行以下操作，您能否将事件侦听器放置在单个元素上以告知内容（包括图像）何时准备就绪？：

```
var html = "<p>Some text <img src='image.jpg' /></p><p>Some more text <img src='image2.jpg' /></p>";
$("div.output").html(html); 
```

图像每次都会不同，因此我无法使用 JavaScript 图像对象进行预加载。

我正在考虑的一种方法是使用正则表达式或 jQuery 运行 HTML，查找所有图像 URL，循环它们并使用图像对象预加载每个 URL。全部预加载后，将 HTML 注入输出 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:52:39.280

除非您`onload`在加载之前将事件连接到每个图像并计算它们，否则没有简单的方法可以判断它们何时全部加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:39:33.670

[这是一个相对安全的方法](https://github.com/daguej/element-onload)( [demo](http://jsfiddle.net/josh3736/Gamh8/) )，它使用[`Deferred`s](http://api.jquery.com/category/deferred-object/)，在 IE 6-9、Chrome 19 和 Firefox 3.6-10、Opera 10.10-11.52、Android 4 和 iOS 5 中测试和工作。

首先，我们将编写一个小型 jQuery 插件，它`Deferred`为 jQuery 集合中的每个元素返回一个 s 数组。当元素加载时，每个`Deferred`都会被解析；如果元素加载失败或（可选）花费的时间超过`timeout`几秒钟，则拒绝。

```
$.fn.loaded = function(opts) {
    var o = $.extend({timeout:10000}, opts) // Merge default options with supplied options
        , r = []; // Return value

    this.each(function() {
        var dfd = new $.Deferred(), el = $(this), to;
        if (o.timeout) to = setTimeout(function() {
            done();
            dfd.reject();
        }, o.timeout);
        el.bind('load.dfdl', function() {
            done();
            dfd.resolve();
        }).bind('error.dfdl', function() {
            done();
            dfd.reject();
        });

        function done() { // internal clean-up
            clearTimeout(to);
            el.unbind('.dfdl');
        }
        r.push(dfd.promise());
    });
    return r;
}; 
```

超时将防止浏览器实际上从未触发任何事件的情况。我在这里将默认超时设置为 10 秒；在现实世界中，您可能希望减少它。

现在我们将生成 10 个随机大小的[placekittens](http://placekitten.com/)，用作示例中的图像。

```
var imgs=[];
for (var i = 0; i < 10; i++) imgs.push('<img src="http://placekitten.com/' + rnd() + '/' + rnd() + '"> ');
$('#imgs').html(imgs.join()); 
```

最后，我们将用一些魔法把所有东西放在一起：

```
$.when.apply($, $('#imgs img').loaded({timeout:10000}) ).done(function() {
    alert('loaded successfully');
}).fail(function() {
    alert('load failed or timed out');
}); 
```

[`$.when`](http://api.jquery.com/jQuery.when/)创建一个`Deferred`只有在其所有子节点都解决时才解决的主`Deferred`节点，或者在子节点拒绝时拒绝。它通常希望您将每个`Deferred`作为参数传递（它不支持传入`Deferred`s 数组），因此我们必须传入[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)我们的数组。（我可能会这样做`$.whenall = function(dfds) { $.when.apply($,dfds); };`，以便您的应用程序代码更干净`$.whenall( $('#imgs img').loaded() )...`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:03:04.447

我认为您应该在将图像插入 html 后绑定加载处理程序。

[**演示**](http://jsfiddle.net/skram/2yPQU/2/)

```
 //Add image
    $('#result').append('<img src= "<Your_Image_URL>" width="300" height="300"/>');

    //Bind handler also add condition to not bind images that was not added before.
    $('#result').find('img').not('.loaded').on('load', function () {
        alert('Image Loaded');
        //Add code that you want to do after the image is added
    }).addClass('loaded'); 
```

还请注意与图像一起使用时加载事件的注意事项

> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> 1.  它不能始终如一地工作，也不能可靠地跨浏览器
> 2.  如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> 3.  它没有正确地冒泡 DOM 树
> 4.  可以停止对已经存在于浏览器缓存中的图像进行触发

**参考：** [http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:23:19.107

> 我正在考虑的一种方法是使用正则表达式或 jQuery 运行 HTML，查找所有图像 URL，循环它们并使用图像对象预加载每个 URL。全部预加载后，将 HTML 注入输出 div。

```
var imagesLoaded = [];
var imagesErrored = [];

$('img').each(function() {
     $(this).load(function() {
         imagesLoaded.push($(this).attr("src"));
         if( (imagesLoaded.length + imagesErrored.length) == $('img').length ) {
             displayResults(imagesLoaded, imagesErrored);

         } 
     });
     $(this).error(function() {
         imagesErrored.push($(this).attr("src"));
         if( (imagesLoaded.length + imagesErrored.length) == $('img').length ) {
             displayResults(imagesLoaded, imagesErrored);
         } 

});

function displayResults(imagesLoaded, imagesErrored) {
    for(var i = 0; i < imagesLoaded.length; i++) {
        alert(imagesLoaded[i] + " has loaded successfully.");
        $('#myDiv').append("<img src='" + imagesLoaded[i] + "' />");
    }
    for(var i = 0; i < imagesErrored.length; i++) {
        alert(imagesLoaded[i] + " did NOT load successfully.");
    }
} 
```

以上循环遍历所有图像并使用 load 事件检查它们是否加载。使用错误事件，我们还获得了由于某种原因未正确加载的所有图像的集合。预加载所有图像后，我们可以在“displayResults”函数中将它们注入页面。这大致基于您问题的最后一段。

但是，它不使用正则表达式，因为它们不是操作 DOM 的正确工具。幸运的是，JavaScript 和 jQuery 为我们提供了执行 DOM 操作和解析活动所需的工具。

最后，根据您的问题，听起来您可能对了解成功加载哪些图像感兴趣。如果您需要，上述从加载和错误事件构建的集合将为您提供这些详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T18:52:53.640

尝试这个：

```
$("#preload_div").html(
    '<img src="image.png" alt="preload" class="preload" width="0" height="0">'
); 
```

事件处理程序可以绑定到图像：

```
$('preload').load(function () {
    var html = "<p>Some text <img src='image.jpg' /></p><p>Some more text <img src='image2.jpg' /></p>";
    $("div.output").html(html);
}); 
```

当然，您必须为每个图像合并一个[.each()](http://api.jquery.com/each/)以遍历所有图像。

**编辑：**在我的一个 AJAX 网站上，我预加载了我需要的下一张图片，因此当用户单击“下一步”按钮时，新内容所需的图片已经被缓存。见[http://funl.es/p/1](http://funl.es/p/1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T21:34:58.057

您是否考虑过使用 jQuery 'on' 事件机制？使用“on”应该允许您在每个图像动态添加到容器和 DOM 时自动将“加载”处理程序绑定到每个图像。

链接： ['on' 函数的 jQuery 文档](http://api.jquery.com/on/)

如果您使用的是 1.7 之前的 jQuery，则需要使用 'live' 功能，因为 1.7 版本中添加了 'on'。

链接：[“live”功能的 jQuery 文档（已弃用）](http://api.jquery.com/live/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-07T18:56:26.377

我认为没有简单的方法可以做到这一点。您可以做的是将所有图像加载到隐藏的 div 上（ display: none ）。

当您想显示图片时，您可以执行以下操作：

```
$("#myDiv").show(); 
```

# android - 如何通过 smack 从 Openfire 获取会话 IP 地址？

> ID：10487409
> 
> 赞同：0
> 
> 时间：2012-05-07T18:50:12.933
> 
> 标签：android, xmpp, openfire, smack

我正在开发一个需要通过 p2p 运行的应用程序。我需要某个组的某些用户的 IP 地址。如何使用 Asmack 从 Openfire 服务器获取会话 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:47:49.663

转到 openfire 管理界面，转到 Sessions -> Active Sessions -> Client Sessions。在这里，您将看到当前登录到系统的所有用户的列表，以及他们的 IP 和客户端信息。

# haskell - 具有自定义数据类型的重叠模式匹配警告

> ID：10487411
> 
> 赞同：1
> 
> 时间：2012-05-07T18:50:45.003
> 
> 标签：haskell, functional-programming, pattern-matching

我正在将几个程序从标准 ML 转换为 Haskell 的一个类，我对 Haskell 解析这种模式匹配的方式感到困惑。

我有这个数据类型：

```
data Term = A | B
          | F Term | G Term | H Term Term
          | Var String
           deriving (Show) 
```

这是我定义的功能的一部分：

```
unify :: [(Term, Term)] -> Bool
 -- argument represents a list of term equations,
 -- result indicates whether they have a solution
unify nil = True
unify ((A, A):eqns) = unify eqns
unify ((B, B):eqns) = unify eqns
unify ((F(t1), F(t2)):eqns) = unify((t1,t2):eqns)
unify ((G(t1), G(t2)):eqns) = unify((t1,t2):eqns)
unify ((H s1 t1, H s2 t2):eqns) = unify((s1,s2):(t1,t2):eqns)
unify ((Var v1, t):eqns) =
        (case t of 
              Var v2    -> if v1 == v2 then unify(eqns)
                           else unify(map (substEqn v1 t) eqns)
          _     -> unify(map (substEqn v1 t) eqns))
unify ((t, Var v):eqns) = unify(map (substEqn v t) eqns)
unify _ = False 
```

当我导入模块时，ghci 给了我这个输出：

```
Warning: Pattern match(es) are overlapped
             In an equation for `unify':
                 unify ((A, A) : eqns) = ...
                 unify ((B, B) : eqns) = ...
                 unify ((F (t1), F (t2)) : eqns) = ...
                 unify ((G (t1), G (t2)) : eqns) = ...
                 ... 
```

我当然了解模式匹配的工作原理，但我不明白为什么 Haskell 认为这四个参数是相同的。它们是不同的数据类型，所以它们不应该是等效的模式吗？这在标准 ML 中有效，但在翻译中一定会丢失一些东西。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:04:04.950

我不确定是什么`nil`（在第一个模式中），但我假设你心里有空列表。如果是这种情况，将其替换为`[]`可以解决问题，并且您的模式匹配问题就会消失。

# c# - 绑定可编辑的组合框并检测 wpf 中插入的文本

> ID：10487414
> 
> 赞同：3
> 
> 时间：2012-05-07T18:50:50.243
> 
> 标签：c#, wpf, mvvm, combobox, wcf-binding

我有一个`ComboBox`它看起来像这样：

```
<ComboBox
    ItemsSource="{Binding JobList}"
    SelectedValue="{Binding Job,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
    DisplayMemberPath="Title"
    SelectedValuePath="Id"
    IsEditable="True"
    StaysOpenOnEdit="True"
    /> 
```

它与我的绑定`ViewModel`看起来像这样：

```
public class ViewModel {
    // this will fill from a database record for a person
    public Job Job {
        get { return _job; }
        set {
            if(value == _job) return;
            _job = value;
            OnPropertyChanged( () => Job );
        }
    }
    // this will fill from all jobs records in database
    public ObservableCollection<Job> JobList 
    { /* do same as Job to implementing INotifyPropertyChanged */ }
} 
```

是`Job`：

```
public class Job {
    public int Id { get; set; }
    public string Title { get; set; }
} 
```

真的，我想填写`ComboBox`工作清单。因此，如果用户指定`Job`在列表中，用户可以从列表中选择它，否则，他输入一个新`Job.Title`的`ComboBox`，视图模型通知它，并创建一个新`Job`项目并将其添加到`JobList`。

你有什么想法吗？你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:45:40.840

1.  Create a string property in the viewModel something like 'SelectedJobName'
2.  Bind this property to Combobox.Text
3.  Wherever you want to use the entered value (Command, Presenter), check if selected value is not null and selectedJobName property value is not/matching.

# objective-c - Objective C Hello World 错误

> ID：10487415
> 
> 赞同：2
> 
> 时间：2012-05-07T18:50:51.043
> 
> 标签：objective-c

很多 Objective-C 教程似乎使用以下程序：

```
#import "Foundation/Foundation.h"

int main ()
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    NSLog(@"Hello world!");
    [pool drain];
    return 0;
} 
```

我确实拿出了所有关于游泳池的东西，而且效果很好。但这给了我一条错误消息。'NSAutoreleasePool' 不可用：在自动引用计数模式下不可用。也许我做错了什么？

我正在使用 Xcode 4.3.2。我选择了新项目 -> 命令行工具 -> 基础。这是我使用的源代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:52:47.173

这是因为您正在使用 ARC 进行编译，并且此源是 ARC 之前的。如果您更改编译器模式以禁用 ARC，它将正常编译。您还可以使用新型自动释放池（也可以在没有 ARC 的情况下使用）：

```
#import "Foundation/Foundation.h"

int main ()
{
    @autoreleasepool {
        NSLog(@"Hello world!");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:53:55.473

```
#import <Foundation/NSAutoreleasePool.h> 
```

# android - PhoneGap/DreamWeaver CS6 未找到 Android SDK

> ID：10487418
> 
> 赞同：2
> 
> 时间：2012-05-07T18:51:04.280
> 
> 标签：android, cordova, dreamweaver

我正在尝试在带有 Android SDK 的 Dreamweaver CS6 上使用 PhoneGap。在 Phonegap 构建设置下，我添加了 SDK（'\Android\android-sdk'）的位置。

我收到以下消息“为 Android 提供的 SDK 位置无效。请验证您的设置。”。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:04:48.687

您需要在路径中添加两个子目录：/tools 和 /platform-tools

[http://developer.android.com/sdk/installing.html](http://developer.android.com/sdk/installing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:03:43.377

尝试升级 Android SDK 并将其安装到不同的目录。

然后将 Dreamweaver 指向该新目录。

您可能还必须在那里拥有有效的 AVD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T01:21:58.890

如果您启动 Android SDK 管理器，它会在该窗口顶部显示 SDK 路径。我只是使用它并且它有效。

# sql-server - 数据库消息队列

> ID：10487420
> 
> 赞同：0
> 
> 时间：2012-05-07T18:51:27.533
> 
> 标签：sql-server, database, oracle, queue

我只熟悉具有消息队列的 Sql Server 和 Oracle DB（Sql Server = Service Broker，Oracle = AQ）。其他任何数据库都内置了队列吗？特别是任何开源选项？我查看了 MySql 和 postgres，但它们似乎没有。

任何信息，将不胜感激。只是想知道具有内置消息队列的数据库是否还有其他选项。

谢谢，

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:15:07.040

看起来 PostgreSQL 至少有一些端口，您可以利用 AMQP 来启用您的排队进程。

不错的PDF[在这里](http://wiki.postgresql.org/images/2/22/On_Rabbits_and_Elephants_-_pgCon_2011.pdf)

--s

# tomcat - tomcat 可扩展性 ejb

> ID：10487421
> 
> 赞同：0
> 
> 时间：2012-05-07T18:51:28.600
> 
> 标签：tomcat, ejb, scalability, apache-tomee

我对具有 OpenEJB 水平可扩展性配置的 Tomcat 感兴趣，以及它将如何管理分布式无状态 ejb s：在每次调用时，是否可以从另一个 Tomcat 服务器（如应用程序服务器）分配实例 - 或者是否提供每个 http 请求与同一服务器实例中的所有 ejb 调用一起集成在同一 tomcat 服务器上。

我正在考虑使用 Tomee（配置了 Java EE 堆栈框架的 tomcat）代替简单的 Tomcat 来解决相同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:56:45.977

如果您使用的是无状态 EJB，那么您将从本地池中获取 EJB。Tomcat + OpenEJB 的工作方式与 TomEE 完全相同。

# java - 在关闭 RMI 服务器之前执行任务

> ID：10487423
> 
> 赞同：0
> 
> 时间：2012-05-07T18:51:42.563
> 
> 标签：java, rmi, distributed-system

我正在使用java RMI来实现一个分布式银行系统，其中每个服务器代表一个分支，当关闭服务器/分支时，它的数据存储在自己的数据库中，存储在其数据库中的帐户应该转移到另一个服务器/分支如何执行在服务器关闭之前此任务的代码任何帮助表示赞赏并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:05:46.590

也许 shutdownHook 对你有好处。

示例代码：

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
    @Override
    public void run() {
    System.out.println("shutdown application");

    }
})); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T18:56:27.223

您可以添加关闭挂钩 [http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook)

# rally - AppSDK 2.0：我去哪里访问？

> ID：10487424
> 
> 赞同：0
> 
> 时间：2012-05-07T18:51:45.723
> 
> 标签：rally

我注意到在回复以下内容时引用了 Rally 的 AppSDK 的 2.0 版本：

[从 Rally 描述字段中删除 html 标记](https://stackoverflow.com/questions/10442084/remove-html-markup-from-rally-description-field)

[有没有办法使用新的查询条件刷新对象下拉列表中的列表？](https://stackoverflow.com/questions/10464699/is-there-a-way-to-refresh-the-list-in-an-object-dropdown-using-new-query-conditi)

我在 WSAPI 文档中也没有看到对 AppSDK 2.0 的任何引用：

[https://rally1.rallydev.com/slm/doc/webservice](https://rally1.rallydev.com/slm/doc/webservice)

或在开发者门户上：

[http://developer.rallydev.com/help/](http://developer.rallydev.com/help/)

这个工具包正式可用吗？如果是这样，我该如何访问和使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:38:43.070

它是可用的，但它是 App SDK，而不是新的 Web 服务 API。

主要的 Rally SDK 文档有一个链接：http: [//developer.rallydev.com/help/app-sdk](http://developer.rallydev.com/help/app-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:53:57.497

如果您查看[Developer Portal](http://developer.rallydev.com/help/)的底部，您会在底部找到一个链接，上面写着“App SDK 2.0 Preview”，它将带您到那里。

如果您想要直接链接到我们当前的 SDK 预览版，您可以在[此处](https://rally1.rallydev.com/apps/2.0p/doc/)找到它。

此链接可能无法永久使用，因为它是预览版，但将来您将能够从开发人员门户中找到我们当前的 SDK。

# javascript - 如何使用 ExtJS 4 中控制器的控制方法更改范围？

> ID：10487425
> 
> 赞同：1
> 
> 时间：2012-05-07T18:52:03.500
> 
> 标签：javascript, extjs, extjs4

在具有 Ext.app.Controller 类的 control() 方法的 ExtJS 中，我可以将侦听器添加到通过控制器的 init() 方法中的 Ext.ComponentQuery 选择的组件。

默认情况下，我的处理程序函数中有控制器范围。有没有办法在这里指定其他范围？

例如在这种情况下：

```
Ext.define('BackOffice.controller.BaseList', {
    extend: 'Ext.app.Controller',

    refs: [
        // some refs
    ],

    init: function() {
        this.control({
            'bo-list-view > toolbar > button[action=create-new]': {
                click: this.onCreateNewClick
            },

            'bo-list-view > toolbar > button[action=edit]': {
                click: this.onEditClick
            },

            'bo-list-view > toolbar > button[action=refresh]': {
                click: this.onRefreshClick
            }
        })
    },

    // ...
}); 
```

在处理程序函数中，我想知道单击以根据此信息执行某些操作的确切按钮。

我尝试通过范围字段在按钮声明中指定范围，这没有帮助。

我也想使用 Ext.bind() 来解决这个问题，但是要将函数绑定到我需要再次引用按钮。

使用 .on() 添加侦听器在 init() 中不起作用，因为它是在应用程序的启动方法之前调用的。

有没有办法从控制器添加监听器来保存范围？

**更新**

对按钮的引用作为第一个参数传递给处理函数。这解决了我的问题，但仍在寻找一种在 control() 方法中定义范围的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T22:02:04.320

您可以通过使用配置对象来实现更高级的范围功能。

```
Ext.define('BackOffice.controller.BaseList', {
    extend: 'Ext.app.Controller',

    refs: [
        // some refs
    ],

    init: function() {
        this.control({
            'bo-list-view > toolbar > button[action=create-new]': {
                // This will call onCreateNewClick with global window as the scope
                click: {fn: this.onCreateNewClick, scope: window}
            },

            'bo-list-view > toolbar > button[action=edit]': {
                click: {fn: this.onEditClick, scope: otherScopeObj}
            },

            'bo-list-view > toolbar > button[action=refresh]': {
                click: this.onRefreshClick
            }
        });
    },

    // ...
}); 
```

我不知道所有正常配置是否都有效（即单一：true），但范围可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:54:53.730

如果您查看`click`事件的描述：[http](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-event-click) ://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-event-click您会看到第一个参数将是指向按钮的指针，即您不需要更改范围 - 只需在函数中声明参数，您就会知道按下了哪个按钮。

# forms - 使用 Jquery onchange 提交 Wordpress 表单下拉列表

> ID：10487431
> 
> 赞同：0
> 
> 时间：2012-05-07T18:52:31.400
> 
> 标签：forms, wordpress, drop-down-menu, form-submit

与[这个问题](https://stackoverflow.com/questions/10487164/submit-form-dropdown-with-jquery)类似，我想使用名为 dropkick 的下拉插件，它用更好看的自定义下拉菜单替换选择菜单。这一次，我想将 wordpress 档案放在下拉列表中。这样做的标准方法是这样的：

```
<select name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;">
  <option value=""><?php echo esc_attr( __( 'Select Month' ) ); ?></option> 
  <?php wp_get_archives( 'type=monthly&format=option&show_post_count=1' ); ?>
</select> 
```

为了使这种技术适用于 dropkick，我想删除 php 的 onchange js 部分，所以它看起来像这样：

```
<form action="???" method="get" class="prettyArchive">
    <select>
         <option value=""><?php echo esc_attr( __( 'Select Month' ) ); ?></option> 
         <?php wp_get_archives( 'type=monthly&format=option&show_post_count=1' ); ?>
    </select>
</form> 
```

将此下拉列表转换为“漂亮下拉列表”的 jquery 是：

```
$('.prettyArchive select').dropkick({
      theme: 'default',
      change: function (value, label) {
         INSERT CALLBACK HERE
      }
}); 
```

我需要一个回调来模拟上面显示的 onchange 事件。我不认为需要提交表单，而是在更改时刷新页面？不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:57:45.233

没有使用过那个特定的插件，所以我不确定将哪些值传递给回调，但可能是这样的：

```
$('.prettyArchive select').dropkick({
      theme: 'default',
      change: function (value, label) {
         document.location.href=value;
      }
}); 
```

# jquery - 实时自动增长文本区域？

> ID：10487435
> 
> 赞同：2
> 
> 时间：2012-05-07T18:52:39.123
> 
> 标签：jquery

我也试图了解如何制作一个活的 jquery 插件，我认为这将是一个很好的例子。

我正在尝试开发的这个插件是一种用于 textarea 的 autoGrow，到目前为止效果很好，但它不适用于实时内容。

[http://jsfiddle.net/denislexic/cPBgG/10/](http://jsfiddle.net/denislexic/cPBgG/10/)

我猜这是因为`each`which 没有直播，但我不知道如何绕过它。我经常遇到这个问题，我找不到解决方案。

任何帮助表示赞赏，谢谢。

这是代码

```
$.fn.autogrow = function(options) {
this.filter('textarea').each(function() {

    var $this       = $(this),
        minHeight   = $this.height(),
        lineHeight  = $this.css('lineHeight');

    $(this).css('height','hidden');

    var duplicate = $('<div></div>').css({
        position:   'absolute',
        top:        -10000,
        left:       -10000,
        width:      $(this).width(),
        fontSize:   $this.css('fontSize'),
        fontFamily: $this.css('fontFamily'),
        lineHeight: $this.css('lineHeight'),
        resize:     'none'
    }).appendTo(document.body);

    var update = function() {

        var val = this.value.replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/&/g, '&amp;')
            .replace(/\n/g, '<br/>');

        duplicate.html(val);
        $(this).css('height', Math.max(duplicate.height() + 20, minHeight));
    }

    $(this).change(update).keyup(update).keydown(update);

    update.apply(this);

});

return this;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:01:47.417

[http://jsfiddle.net/cPBgG/18/](http://jsfiddle.net/cPBgG/18/)

您应该只迭代 jQuery 对象，而不是从 DOM 中重新选择它。此外，您并没有要求`autogrow()`新的文本区域。

**编辑**

你总是可以绑定到这样的`DOMNodeInserted`东西（完全未经测试）：

```
$(document).on('DOMNodeInserted', function(e) { 
  if(e.target.classname == 'autogrow') { 
    $(e.target).autogrow();
  }
}); 
```

关键是，您将不得不调用`autogrow()`您的新文本区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:04:12.847

我会做两件事。首先，将插件应用到新创建的 textareas 和两个，将`this.filter('textarea').each(function() {`行更改为`$(this).each(function() {`.

**[jsFiddle 示例](http://jsfiddle.net/j08691/cPBgG/29/)**。

```
$('.liveText').on('click', function() {
    $('<textarea />').appendTo('#copy').autogrow();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:05:06.550

```
$('.liveText').live('click',function(){
    $('<textarea />').appendTo('#copy');
    $('textarea').autogrow(); // This line was added
});

(function($) {

    $.fn.autogrow = function(options) {

        this.filter($(this).selector).each(function() {

            var $this       = $(this),
                minHeight   = $this.height(),
                lineHeight  = $this.css('lineHeight');

            $(this).css('height','hidden');

            var duplicate = $('<div></div>').css({
                position:   'absolute',
                top:        -10000,
                left:       -10000,
                width:      $(this).width(),
                fontSize:   $this.css('fontSize'),
                fontFamily: $this.css('fontFamily'),
                lineHeight: $this.css('lineHeight'),
                resize:     'none',
                'word-wrap':'break-word',
                'white-space':'pre-wrap'
            }).appendTo(document.body);

            var update = function() {

                var val = this.value.replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/&/g, '&amp;')
                    .replace(/\n/g, '<br/>');

                duplicate.html(val);
                $(this).css('height', Math.max(duplicate.height() + 20, minHeight));
            }

            $(this).change(update).keyup(update).keydown(update);

            update.apply(this);

        });

        return this;

    }

})(jQuery);
    $('textarea').autogrow() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T12:55:52.560

我在 jQuery 中使用了这种方法。

```
$(name_textarea).css('overflow','hidden');

setInterval(function(){
    $(name_textarea).css('height', $(name_textarea)[0].scrollHeight+2+'px')
},100); 
```

试试看，你可以在scrollHeight后面玩de number来获得最佳效果。

# facebook - 打开图动作提交

> ID：10487441
> 
> 赞同：0
> 
> 时间：2012-05-07T18:53:02.727
> 
> 标签：facebook, facebook-opengraph

是否有可能虽然我还没有向 Facebook 提交我的开放图的操作，但不是开发人员/管理员的用户正在看到这些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:59:31.700

If your application is in sandbox mode it can only seen by developers,tester etc...

But if sandbox mode disabled it can be seen by anybody who knows the url. The only difference is if your open graph objects and actions aren't submitted. They can't use them it will give error.

# algorithm - 初始化一个二维二叉索引树

> ID：10487442
> 
> 赞同：1
> 
> 时间：2012-05-07T18:53:10.700
> 
> 标签：algorithm, data-structures

这可能很简单，但我不确定如何初始化二维二进制索引树。通常我们将所有值重置为 0 。但是我们如何用数组的值（比如 1、2、3、4）初始化树呢？我正在使用以下更新功能，但是当我这样做时

```
void update(int p, int v) // p  is the index, v is the value to be added
{
    for (int i=p; i<=MAXBIT; i+=i&-i)
    {
        bit[i][0] += v*(i-p+1);
        bit[i][1] += v; 
    }   
}
for(i=0;i<n;i++)
     update(i+1,array[i]); 
```

我没有得到预期的结果.. 谢谢。

# php - Json 字符串到 js 数组

> ID：10487444
> 
> 赞同：2
> 
> 时间：2012-05-07T18:53:27.250
> 
> 标签：php, javascript, json

我有一组结果，我已使用 php json_encode 函数将其转换为 Json，现在我希望将此结果作为 js 中的数组，但我不知道这样做。

我的 PHP 数组是这样的：

```
Array
(
    [latestRating] => Array
        (
            [456] => Anonymous has rated xxx9
            [457] => Anonymous has rated xxxx8
            [458] => Anonymous has rated xxxx3.5
        )

    [latestUser] => Array
        (
            [242] => xxxxhas just signed up
            [243] => xxxxxhas just signed up
            [244] => xxxxxxhas just signed up
        )

) 
```

当我对此执行 php json_encode 函数时，我得到以下字符串

```
{"latestRating":{"456":"Anonymous has rated mermaidbl00d 9","457":"Anonymous has rated GeorgiaHallx 8","458":"Anonymous has rated smithjhon 3.5","459":"Anonymous has rated Emilyxo 8.5","460":"Anonymous has rated leona 10","461":"Anonymous has rated leona 10","462":"Anonymous has rated W0rthlessliar 8","463":"Anonymous has rated Yousamsuck 9","464":"Anonymous has rated Aimeeerobbb 9","465":"Anonymous has rated lauramillerx 10","466":"Anonymous has rated tomwaz 1","467":"Anonymous has rated W0rthlessliar 1","468":"Anonymous has rated W0rthlessliar 1","469":"Anonymous has rated W0rthlessliar 1","470":"Anonymous has rated W0rthlessliar 1"},"latestUser":{"242":"rhiwilliamsx has just signed up","243":"W0rthlessliar has just signed up","244":"rebeccaronan has just signed up"}} 
```

我尝试使用 JSON.stringify 然后使用 jQuery.makeArray 来创建一个数组。然后我尝试了 eval('['+string+']') 但它们都没有帮助。

我是 Json 的新手，也找不到合适的支持。

问候希曼舒夏尔马。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:57:17.860

使用[`JSON.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)而不是`JSON.stringify`.
拳头是 JavaScript 的等价于 PHP 的`json_decode`，后者等价于`json_encode`.

注意：如果你使用`jQuery.ajax`with `dataType: 'json'`，那么回调中的参数已经是一个解码的对象。

在您的代码中，PHP“数组”不是 JavaScript 数组，而是一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:57:01.017

如果您正在使用它应该已经准备好使用`json_encode()`，如果没有，请使用`JSON.parse()`. 您还可以在回显要包含的数据时检查 PHP 标头：

```
header('Content-type: application/json'); 
```

如果它是从 ajax 响应中返回的，只需像这样引用该对象：

```
success : function(data) {
    console.log(data.latestRating);
} 
```

# algorithm - 下限：某种类型的输入大小 n 的算法所需的资源

> ID：10487446
> 
> 赞同：-2
> 
> 时间：2012-05-07T18:53:35.550
> 
> 标签：algorithm, code-analysis

我被要求找到以下的下限：

T(n)= 23n^3-n^2-n。

所以这就是我如何进行的，我不知道我是否以正确的方式解决它：

T(n)>=c(23n^2-n^2) 对于所有大于 n>=n0 的 n

23n^3-n^2-n >=(22n^2) 对于所有 n>=2。

T(n)>=c|n^2| 对于所有 n>=2 c=22 n0=22。T(n) 在大欧米茄 n^2 中

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:56:59.230

请注意，`n^3 >= n^2`对于`n >= 1`. 所以，`-n^3 <= -n^2`对于`n >= 1`.

请注意，`n^3 >= n`对于`n >= 1`. 所以，`-n^2 <= -n`对于`n >= 1`.

所以

```
23n^3 - n^2 - n >= 23n^3 - n^3 - n^3 = 21n^3. 
```

因此，`21n^3`是一个不错的下限。

直观地说，这是有道理的，因为它本质上是立方的，因此应该有一些`23n^3 - n^2 - n`的下限和上限（下限与上限不同）。`cn^3``c``c``c`

# java - hashmap 与 arraylist 的组合用于制作复杂的结构

> ID：10487450
> 
> 赞同：0
> 
> 时间：2012-05-07T18:53:53.567
> 
> 标签：java, collections, arraylist, hashmap

过去 3 天我花时间让以下结构工作，但我无法弄清楚如何让结构工作

```
array
  1 => 
    array
      0 => 
        array
          'id' => '1'
          'name' => 'xyz'
      1 => 
        array
          'id' => '12'
          'name' => 'xyz1'
      2 => 
        array
          'id' => '54'
          'name' => 'xyz12'
  20 => 
    array
      0 => 
        array
          'id' => '1'
          'name' => 'xyz'
      1 => 
        array
          'id' => '12'
          'name' => 'xyz1'
      2 => 
        array
          'id' => '54'
          'name' => 'xyz12'
      3 => 
        array
          'id' => '566'
          'name' => 'xyz1234' 
```

我尝试了以下事情，但我无法继续前进

```
Map<Integer, ArrayList<HashMap<String, Object>>> data  = new HashMap<Integer, ArrayList<HashMap<String, Object>>>(); 
```

我有一个结果集，因为我有如下信息

```
id               | name                      | element_id
______________________________________________________________
1                | xyz                       | 1
______________________________________________________________
1                | xyz                       | 3
______________________________________________________________
12               | xyz1                      | 1
______________________________________________________________
54               | xyz11                     | 1
______________________________________________________________
566              | xyz1234                   | 3
______________________________________________________________
12               | xyz1                      | 3
______________________________________________________________
54               | xyz11                     | 3
______________________________________________________________ 
```

我的代码是

```
while (resultSET.next()) 
{
    Map<String, Object> tag = new HashMap<String, Object>();
    tag.put("name", resultSET.getString(3));
    tag.put("id", resultSET.getInt(2));

    tags.put(resultSET.getInt(1), tag);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:02:58.283

在处理集合的集合（集合......）时，事情往往会很快变得混乱。尝试将不同的集合封装在（描述性命名的）对象中，我怀疑它会更容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:59:17.840

You should try

```
Map<Integer, Map<Integer, Map<Integer, Integer>>> result = new HashMap<Integer, Map<Integer,Map<Integer,Integer>>>(); 
```

Where in the final map you will store the values

```
'id' => '1'
          'name' => 'xyz' 
```

and for the second level map you should store

```
0 => 
        array
          'id' => '1'
          'name' => 'xyz' 
```

And for the final outer map you should store

```
1 => 
    array
      0 => 
        array
          'id' => '1'
          'name' => 'xyz'
      1 => 
        array
          'id' => '12'
          'name' => 'xyz1'
      2 => 
        array
          'id' => '54'
          'name' => 'xyz12' 
```

Hope this works for you

Enjoy !!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:01:54.507

```
Map<String, Object> tag = new HashMap<String, Object>();
tag.put("name", resultSET.getString(3));
tag.put("id", resultSET.getInt(2)); 
```

您可以做的一个明显的简化是使标记成为具有属性名称和 ID 的类。有什么理由你不想这样做吗？

* * *

关于您当前代码的问题：

```
tags.put(resultSET.getInt(1), tag); 
```

您将需要创建一个包含标签的数组列表，然后将其放入标签中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:57:11.490

没那么难……！终于明白了……！！

```
HashMap<Integer, ArrayList<HashMap<String, Object>>> tags  = new HashMap<Integer, ArrayList<HashMap<String, Object>>>();

while (routeRs1.next()) 
{
    ArrayList<HashMap<String, Object>> temp_tags    =   new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> tag     =   new HashMap<String, Object>();

    if(tags.get(routeRs1.getInt(1)) == null)
    {
        tag.put("name", routeRs1.getString(3));
        tag.put("id", routeRs1.getInt(2));

        temp_tags.add(tag);

    }
    else
    {
        temp_tags   =   (ArrayList<HashMap<String, Object>>) tags.get(routeRs1.getInt(1));

        tag.put("name", resultSET.getString(3));
        tag.put("id", resultSET.getInt(2));
        temp_tags.add(tag);
    }
    tags.put(resultSET.getInt(1), temp_tags);
} 
```

简单的软件概念就是分解问题......！:D

# java - 使用每像素透明度时，JScrollPane 中的滚动非常慢

> ID：10487458
> 
> 赞同：2
> 
> 时间：2012-05-07T18:54:47.967
> 
> 标签：java, swing, transparency, jscrollpane

我正在使用`AWTUtilities.setWindowOpaque()`on使用每像素透明度`JFrame`，其中包含`JScrollPane`. 当透明度打开时，该窗格中的滚动非常缓慢和滞后，没有它不是。在 Windows 7 和 JDK 6 上尝试这个。

```
public class MainFrame extends JFrame {
    super();

    setUndecorated(true);
    AWTUtilities.setWindowOpaque(this, false); //this turns JScrollPane inside of this JFrame slow and laggy
} 
```

有人发过这个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:52:18.990

我看不到任何滚动问题，也没有为基于良好 Swing 规则的代码创建测试场景，此代码对于处理器和 GPU、Java6、Win7 64b 来说太难了

![在此处输入图像描述](../Images/d09ec4966194922ef4107a6ce0888f58.png)![在此处输入图像描述](../Images/801dfe04daabaff05edb588cf3736103.png)![在此处输入图像描述](../Images/f2a32921b1b195631bdfea0c37e9201b.png)![在此处输入图像描述](../Images/a13dfbb9019440bfd0ead80cbd9475dc.png)

从代码

```
import com.sun.awt.AWTUtilities;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.table.TableModel;

public class ViewPortFlickeringOriginal {

    private JFrame frame = new JFrame("Table");
    private JViewport viewport = new JViewport();
    private Rectangle RECT = new Rectangle();
    private Rectangle RECT1 = new Rectangle();
    private JTable table = new JTable(50, 3);
    private javax.swing.Timer timer;
    private int count = 0;
    private GradientViewPortOriginal tableViewPort;
    private static boolean loggerOpacity;
    private JPanel panel = new JPanel();
    private static JButton button;

    public ViewPortFlickeringOriginal() {
        tableViewPort = new GradientViewPortOriginal(table);
        viewport = tableViewPort.getViewport();
        viewport.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                if (tableViewPort.bolStart) {
                    RECT = table.getCellRect(0, 0, true);
                    RECT1 = table.getCellRect(table.getRowCount() - 1, 0, true);
                    Rectangle viewRect = viewport.getViewRect();
                    if (viewRect.intersects(RECT)) {
                        System.out.println("Visible RECT -> " + RECT);
                        tableViewPort.paintBackGround(new Color(250, 150, 150));
                    } else if (viewRect.intersects(RECT1)) {
                        System.out.println("Visible RECT1 -> " + RECT1);
                        tableViewPort.paintBackGround(new Color(150, 250, 150));
                    } else {
                        System.out.println("Visible RECT1 -> ???? ");
                        tableViewPort.paintBackGround(new Color(150, 150, 250));
                    }
                }
            }
        });
        frame.add(tableViewPort);
        button = new JButton("Change Opacity for Java6 / Win7");
        button.setBounds(100, 100, 50, 50);
        button.setVisible(true);
        panel.add(button);
        loggerOpacity = true;
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent evt) {
                Object src = evt.getSource();
                if (src == button && loggerOpacity) {
                    AWTUtilities.setWindowOpacity(frame, 0.80f);
                }
            }
        });
        frame.add(panel, BorderLayout.SOUTH);
        frame.setPreferredSize(new Dimension(600, 300));
        frame.pack();
        frame.setLocation(50, 100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        RepaintManager.setCurrentManager(new RepaintManager() {

            @Override
            public void addDirtyRegion(JComponent c, int x, int y, int w, int h) {
                Container con = c.getParent();
                while (con instanceof JComponent) {
                    if (!con.isVisible()) {
                        return;
                    }
                    if (con instanceof GradientViewPortOriginal) {
                        c = (JComponent) con;
                        x = 0;
                        y = 0;
                        w = con.getWidth();
                        h = con.getHeight();
                    }
                    con = con.getParent();
                }
                super.addDirtyRegion(c, x, y, w, h);
            }
        });
        frame.setVisible(true);
        start();
    }

    private void start() {
        timer = new javax.swing.Timer(100, updateCol());
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {

                System.out.println("updating row " + (count + 1));
                TableModel model = table.getModel();
                int cols = model.getColumnCount();
                int row = 0;
                for (int j = 0; j < cols; j++) {
                    row = count;
                    table.changeSelection(row, 0, false, false);
                    timer.setDelay(100);
                    Object value = "row " + (count + 1) + " item " + (j + 1);
                    model.setValueAt(value, count, j);
                }
                count++;
                if (count >= table.getRowCount()) {
                    timer.stop();
                    table.changeSelection(0, 0, false, false);
                    java.awt.EventQueue.invokeLater(new Runnable() {

                        @Override
                        public void run() {
                            table.clearSelection();
                            tableViewPort.bolStart = true;
                        }
                    });
                }
            }
        };
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ViewPortFlickeringOriginal viewPortFlickering = new ViewPortFlickeringOriginal();
            }
        });
    }
}

class GradientViewPortOriginal extends JScrollPane {

    private static final long serialVersionUID = 1L;
    private final int h = 50;
    private BufferedImage img = null;
    private BufferedImage shadow = new BufferedImage(1, h, BufferedImage.TYPE_INT_ARGB);
    private JViewport viewPort;
    public boolean bolStart = false;

    public GradientViewPortOriginal(JComponent com) {
        super(com);
        viewPort = this.getViewport();
        viewPort.setScrollMode(JViewport.BLIT_SCROLL_MODE);
        viewPort.setScrollMode(JViewport.BACKINGSTORE_SCROLL_MODE);
        viewPort.setScrollMode(JViewport.SIMPLE_SCROLL_MODE);
        paintBackGround(new Color(250, 150, 150));
    }

    public void paintBackGround(Color g) {
        Graphics2D g2 = shadow.createGraphics();
        g2.setPaint(g);
        g2.fillRect(0, 0, 1, h);
        g2.setComposite(AlphaComposite.DstIn);
        g2.setPaint(new GradientPaint(0, 0, new Color(0, 0, 0, 0f), 0, h,
                new Color(0.1f, 0.8f, 0.8f, 0.5f)));
        g2.fillRect(0, 0, 1, h);
        g2.dispose();
    }

    @Override
    public void paint(Graphics g) {
        if (img == null || img.getWidth() != getWidth() || img.getHeight() != getHeight()) {
            img = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
        }
        Graphics2D g2 = img.createGraphics();
        super.paint(g2);
        Rectangle bounds = getViewport().getVisibleRect();
        g2.scale(bounds.getWidth(), -1);
        int y = (getColumnHeader() == null) ? 0 : getColumnHeader().getHeight();
        g2.drawImage(shadow, bounds.x, -bounds.y - y - h, null);
        g2.scale(1, -1);
        g2.drawImage(shadow, bounds.x, bounds.y + bounds.height - h + y, null);
        g2.dispose();
        g.drawImage(img, 0, 0, null);
    }
} 
```

但我能够演示 JScrollPane 的延迟滚动包含其他 JComponents，如 JTable 或 JList 或 JTextArea 或 JTextPane

```
import java.awt.Color;
import java.awt.Component;
import java.awt.GridLayout;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import javax.swing.*;

public class ListPanel extends JFrame {

    private static final long serialVersionUID = 1L;

    public ListPanel() {
        setLayout(new GridLayout(0, 2, 10, 10));
        DefaultListModel model = new DefaultListModel();
        model.addElement(createButtons("one"));
        model.addElement(createButtons("two"));
        model.addElement(createButtons("three"));
        model.addElement(createButtons("four"));
        model.addElement(createButtons("five"));
        model.addElement(createButtons("six"));
        model.addElement(createButtons("seven"));
        model.addElement(createButtons("eight"));
        model.addElement(createButtons("nine"));
        model.addElement(createButtons("ten"));
        model.addElement(createButtons("eleven"));
        model.addElement(createButtons("twelwe"));
        JList list = new JList(model);
        list.setCellRenderer(new PanelRenderer());
        JScrollPane scroll1 = new JScrollPane(list);
        final JScrollBar scrollBar = scroll1.getVerticalScrollBar();
        scrollBar.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar.getValue());
            }
        });
        add(scroll1);
        JScrollPane scroll2 = new JScrollPane(createPanel());
        add(scroll2);        
        final JScrollBar scrollBar1 = scroll2.getVerticalScrollBar();
        scrollBar1.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar1.getValue());
            }
        });

    }

    public static JPanel createPanel() {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(0, 1, 1, 1));
        panel.add(createButtons("one"));
        panel.add(createButtons("two"));
        panel.add(createButtons("three"));
        panel.add(createButtons("four"));
        panel.add(createButtons("five"));
        panel.add(createButtons("six"));
        panel.add(createButtons("seven"));
        panel.add(createButtons("eight"));
        panel.add(createButtons("nine"));
        panel.add(createButtons("ten"));
        panel.add(createButtons("eleven"));
        panel.add(createButtons("twelwe"));
        return panel;
    }

    public static JButton createButtons(String text) {
        JButton button = new JButton(text);
        return button;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ListPanel frame = new ListPanel();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                //frame.pack();
                frame.setSize(270, 200);
                frame.setVisible(true);
            }
        });
    }

    class PanelRenderer implements ListCellRenderer {

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            JButton renderer = (JButton) value;
            renderer.setBackground(isSelected ? Color.red : list.getBackground());
            return renderer;
        }
    }
} 
```

# android - 具有交互式视图的 android 选项卡

> ID：10487459
> 
> 赞同：0
> 
> 时间：2012-05-07T18:54:51.517
> 
> 标签：android, tabs, views, android-tabhost, tabwidget

我试图避免在 tabhost 和 tabwidget 中使用意图和活动

仅对所有内容使用视图，此代码就开始变得混乱。

我的问题是我很难保留信息。在一个选项卡中，我有一个包含 4 个按钮的视图，每个按钮加载另一个视图，这会占用该选项卡中屏幕上的视觉信息。问题是，当我“返回”以在该选项卡中加载上一个视图时，没有任何信息是该视图被保留，即使按钮侦听器也不会重新实例化。

我该如何处理？我在选项卡中看到了一些非常基本的视图示例，但没有任何交互可以加载更多视图。

（viewflippers 和操作栏不是一个选项，我试图避免使用带有活动的选项卡）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:26:47.907

忘记活动组。忘记标签主机。现在都是关于 ActionBar 选项卡和 ViewPager 片段的。API Demos 示例应用程序（也是 Android 兼容性库示例应用程序）提供了一个在 Fragment 之间结合 Tab 和 ViewPager 导航的实现，但它有点伪造 Tabs（即，它们不是真正的 ActionBar 选项卡）。见`FragmentTabsPager.java`。您也可以使用它并使其与真正的 ActionBar 选项卡一起使用。

这是有趣的一点。（我删除了一堆东西，所以不要在这里寻找完整的工作解决方案。）

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs_pager);

    mViewPager = (ViewPager)findViewById(R.id.pager);

    // This block thanks to https://stackoverflow.com/q/9790279/517561
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayShowTitleEnabled(true);
    bar.setDisplayShowHomeEnabled(true);
    //

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab("simple", "Simple", 
            FragmentStackSupport.CountingFragment.class, null);
    mTabsAdapter.addTab("contacts", "Contacts",
        LoaderCursorSupport.CursorLoaderListFragment.class, null);
    mTabsAdapter.addTab("custom", "Custom",
        LoaderCustomSupport.AppListFragment.class, null);
    mTabsAdapter.addTab("throttle", "Throttle",
        LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter
        implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
    private final SherlockFragmentActivity mContext;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        @SuppressWarnings("unused")
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(String tag, CharSequence label, Class<?> clss, Bundle args) {
        ActionBar.Tab tab = mContext.getSupportActionBar().newTab();
        tab.setText(label);
        tab.setTabListener(this);
        mContext.getSupportActionBar().addTab(tab);
        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        notifyDataSetChanged();    
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onPageSelected(int position) {
        mContext.getSupportActionBar().setSelectedNavigationItem(position);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
      mViewPager.setCurrentItem(mContext.getSupportActionBar().getSelectedNavigationIndex());
    }
} 
```

我的完整解决方案：[http ://code.google.com/p/sherlock-demo/](http://code.google.com/p/sherlock-demo/)

注意：需要[ActionBarSherlock](http://actionbarsherlock.com/)。注意：感谢[ActionBarSherlock 和 FragmentTabsPager](https://stackoverflow.com/q/9790279/517561)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T19:01:47.260

选项卡的用户活动组，并放置您为选项卡或活动创建的任何漂亮布局。

我们开始吧：[http ://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)

# asp.net - 使用 TemplateField 时的数据绑定错误

> ID：10487461
> 
> 赞同：0
> 
> 时间：2012-05-07T18:54:55.837
> 
> 标签：asp.net

当运行包含以下代码的 asp.net 页面时，我得到“DataBinding：'System.Data.DataRowView' 不包含名为 'PKComplexID' 的属性”错误

```
<asp:TemplateField HeaderText="Complex">
    <EditItemTemplate>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:RefahiConnectionString1 %>"
             SelectCommand="SELECT [PKComplexID], [ComplexName] FROM RFH_Complex">
        </asp:SqlDataSource>
        <asp:DropDownList ID="DDLComplex" runat="server" DataTextField="ComplexName" DataValueField="PKComplexID"
            SelectedValue='<%# Bind("PKComplexID") %>' DataSourceID="SqlDataSource2">
        </asp:DropDownList>
    </EditItemTemplate>
    <ItemTemplate>
         <asp:Label ID="Label" runat="server" Text='<%# Bind("ComplexName") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:58:28.027

Don't declare the datasource control inside of the template; the `DropDownList` won't be able to find a datasource control with a matching ID.

Move the datasource control outside of the grid, and you should be all set.

# c++ - Qt，没有这样的插槽

> ID：10487462
> 
> 赞同：0
> 
> 时间：2012-05-07T18:54:58.217
> 
> 标签：c++, qt

为什么我会得到这个

```
Object::connect: No such slot Ide::on_action_Exit_triggered(index)
Object::connect:  (sender name:   'actionClose_Project')
Object::connect:  (receiver name: 'Ide') 
```

当我尝试这个时：

```
connect(this->ui->actionClose_Project, SIGNAL(triggered()), this, SLOT(on_action_Exit_triggered(index)));

void Ide::on_action_Exit_triggered(int index)
{
  qDebug()<<"test\n";
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:58:40.710

Please insert prototype of function like this :

```
connect(this->ui->actionClose_Project, SIGNAL(triggered()), this, SLOT(on_action_Exit_triggered(int))); 
```

This format you use isn't common to use slot. the signal and slot should be same in parameters.

# asp.net-mvc - 为 ViewModel 而不是 CheckBoxList 创建 EditorTemplate

> ID：10487464
> 
> 赞同：0
> 
> 时间：2012-05-07T18:55:03.933
> 
> 标签：asp.net-mvc, viewmodel, editorfor

我想使用 mvc 框架的编辑器模板，而不是使用 CheckBoxList 辅助控件：

在 Shared\EditorTemplate 我有 TemplateViewModel.cshtml

```
@model ITMS.ViewModels.TemplateViewModel

<p class="checkbox">
@Html.CheckBoxFor(x => x.IsChecked)
@Html.HiddenFor(x => x.Id) 
@Html.LabelFor(x => x.Name)
</p> 
```

由于模板必须与视图模型同名......我们开始：

```
public class TemplateViewModel
{  
        public bool IsChecked { get; set; }
        public int Id { get; set; }       
        public string Name { get; set; }   
} 
```

在 Home\Delete.cshtml 我有：

```
@model IEnumerable<ITMS.ViewModels.TemplateViewModel>

@foreach (var item in Model)
{
    @Html.EditorFor(m => item)   
} 
```

Delete.cshtml 中的输出是一团糟。

我只希望我的检查状态和名称可见，并且 id 隐藏在某处。

如何更正我的 TemplateViewModel.cshtml/Delete.cshtml ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:57:47.647

在您`Delete.cshtml`摆脱 foreach 循环时，只需：

```
@model IEnumerable<ITMS.ViewModels.TemplateViewModel>
@Html.EditorForModel() 
```

编辑器模板将自动为模型的每个元素（在本例中是一个集合）呈现，您不需要编写任何循环。

还要确保您的编辑器模板位于`~/Views/Shared/EditorTemplates/TemplateViewModel.cshtml`. 在您的问题中，您写了`Shared\EditorTemplate`哪个位置错误（`s`最后您忘记了）。模板按照您必须遵循的约定工作。

# php - 似乎无法让 PHP 登录“坚持”

> ID：10487470
> 
> 赞同：2
> 
> 时间：2012-05-07T18:55:49.013
> 
> 标签：php, session

```
<?php
//Login Module (Updated, isset now correct)
session_start();
if(!(isset($_SESSION['login']) && ($_SESSION['login'] != ""))) {
    include('processor/ProcessLogout.php');
} else {
    include('processor/ProcessLog.php');
}
?> 
```

问题是……它不起作用。我似乎无法让它验证为真 T_T。我在处理器/assess_login.php 中设置了 $_SESSION['login']。ProcessLog 只是一些 div 的容器和表单，表单将信息传递给 asssess_login（然后告诉我登录是否成功）。一个显示登录表单，另一个显示注销表单。不幸的是，即使我得到“登录成功”......令人担忧的是 $_SESSION['login'] 拒绝更改为 '1'。（如果登录成功，这就是我在评估登录中所做的。如果失败，我将其设置为空字符串。

现在据我所知 session_start() 应该记住这一点，但由于某种原因......它没有；所以关于我的错误搜索的任何提示

有编译错误和带走！事实上确实显示了替代方案，所以我知道那个位“正在”工作它只是没有评估为真。

现在......至于assess_login......

```
 if ($db_found) {
        $member_username = quote_smart($member_username, $db_handle);
        $member_password = quote_smart($member_password, $db_handle);

        $sql = "SELECT * FROM $tblname WHERE username=$member_username AND passphrase=$member_password";
        $result = mysql_query($sql);
        $num_rows = mysql_num_rows($result);

        //Validate there is a user
        if($result) {
            if($num_rows == 1) {
                session_start();
                $_SESSION['login'] = '1';
                header("location: ../login_success.php");

            } else {
                session_start();
                $_SESSION['login'] = "";
                header("location: ../login_fail.php");

            }
        } else {
            $error_msg = "Error Validating User! -1";
        }           
    mysql_close($db_handle);
    } 
```

记住它有点*被*掩埋了。正如我之前所说，我无法让登录保持不变，而且我知道我错过了一些明显的东西，如果我能弄清楚是什么，我会被诅咒的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:01:08.087

您的 if 语句不正确：

```
if(!(isset($_SESSION['login'])) && ($_SESSION['login'] != "")) 
```

应该

```
if(!(isset($_SESSION['login']) && $_SESSION['login'] != "")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:48:13.777

```
if(!(isset($_SESSION['login']) && $_SESSION['login'] != "")) 
```

在这段代码中你说：如果它没有设置并且它不是空的你希望它被设置而不是空的：

```
if((isset($_SESSION['login'])) && ($_SESSION['login'] != "")) 
```

# javascript - Vimeo 视频（或 Youtube）的动态调整大小

> ID：10487478
> 
> 赞同：7
> 
> 时间：2012-05-07T18:56:19.183
> 
> 标签：javascript, jquery, html, css

我在 iframe 中添加了一个带有 css 的类

```
width:100%;
height:auto; 
```

但不适用于高度。

任何比 jquery 脏修复更好的想法

```
$(window).resize(function(){
    var tempwidth=$(".vimeoiframe").width();
    var tempheight=tempwidth/1.25;
    $(".vimeoiframe").css("height",tempheight);
}); 
```

因为不是我所有的视频都有这个宽高比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:01:43.260

你应该看看这个 jQuery 插件，为你写的接缝

> [FitVids.js](http://fitvidsjs.com/)

[在CSS Tricks](http://css-tricks.com/)上也有一篇关于它的完整文章

> [流体宽度 YouTube 视频](http://css-tricks.com/fluid-width-youtube-videos/)

还有他的[.net 杂志](http://www.netmagazine.com)文章

> [创建流体宽度视频](http://www.netmagazine.com/tutorials/create-fluid-width-videos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T09:40:47.540

或者您可以使用百分比，[http:](http://codepen.io/maxmckenzie/pen/hFzak) //codepen.io/maxmckenzie/pen/hFzak 视频由于某种原因无法在 codepen 中加载。

# android - Android Ruboto IRB - 如何启动演示 irb 服务器

> ID：10487484
> 
> 赞同：2
> 
> 时间：2012-05-07T18:56:34.840
> 
> 标签：android, ruboto

我刚刚在我的 Android 设备上安装了[Ruboto-irb](https://play.google.com/store/apps/details?id=org.ruboto.irb)以在其上运行 Ruby IRB。

[https://github.com/ruboto/ruboto/wiki/Using-Ruboto-IRB-to-jump-start-development](https://github.com/ruboto/ruboto/wiki/Using-Ruboto-IRB-to-jump-start-development)上的文档说，推送脚本的最佳方法之一是使用 demo-irb-server 和远程访问它。

如何在 Android 设备上启动[demo-irb-server ？](https://github.com/ruboto/ruboto-irb/blob/master/assets/demo-scripts/demo-irb-server.rb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:58:25.210

我不知道该怎么做，所以我开始在设备上的 Ruboto IRB 命令行上随机输入内容。最终，以下命令起作用：

```
require 'demo-irb-server' 
```

我的设备已连接到我的无线 LAN，其 IP 为 192.168.0.108。

然后我从我的台式计算机上点击[http://192.168.0.108:8005](http://192.168.0.108:8005)，它就能够访问 Android 上的演示 IRB 服务器。然后我开始玩脚本，编写自己的脚本并玩得开心。

# c# - 创建动画以选择图像

> ID：10487486
> 
> 赞同：0
> 
> 时间：2012-05-07T18:56:39.357
> 
> 标签：c#, wpf, animation, storyboard

我需要用户从 10 个不同的图像中进行选择，并且我希望将这些图像放置在某种动画中。我正在考虑创建类似的东西：

![在此处输入图像描述](../Images/9e75f9ee8c426cf071300aa1de382395.png)

请注意，在示例图像中，用户向右滚动，最后一张图像放在开头。

我也希望动画流畅，因为如果我将图像放在滚动查看器下，那么动画就不流畅了。

我应该将图像放在堆栈面板中，然后为堆栈面板边距左侧属性设置动画吗？或者也许我应该将图像放在画布中并单独为每个图像设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:15:52.720

我会有一个堆栈面板，为边距设置动画，然后将第一个图像复制为真正的最后一个图像，该图像将从屏幕开始，并将“最后一个图像”复制为第一个，然后您可以为任一方向设置动画。我不会使用滚动查看器。

这是布局的外观。

5[12345]1。A[12345]B。

A是复制画笔来源为5，B是来源为1。

现在您可以以任何一种方式制作动画，移动图像，然后将边距向后移动。

因此，用户“向右”移动。

5[12345]1 动画到 [51234]51

将 A 的源更改为 4，B 的源更改为 5，然后将实际图像移回，然后再释放控制以进行绘制。4[51234]5

如果你想要一个滚动条，我会制作一个单独的滚动条，将它绑定到边距，添加一个转换器来控制它。然后改为执行以下操作。

12345[12345]12345

动画滚动位置，当用户释放时，重新排列图像并将滚动条拇指返回到中心。这样，您就不必删除或创建图片。

提示：您可以在滚动条上使用转换器并将其绑定到随机变量，然后通过将拇指的位置“捕捉”到图像堆栈中的“位置”来间接为面板的边距设置动画。

# c# - c# 检查xml中的元素

> ID：10487490
> 
> 赞同：0
> 
> 时间：2012-05-07T18:57:07.513
> 
> 标签：c#, asp.net, xml

如何检查 xml 文件以确定是否存在某些元素？例如，我的 XML 来自：

`http://www.google.com/ig/api?weather=vilnius&hl=eng`

我想检查“wind_condition”这个词是否存在：

`if ("wind_condition") {do something}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:04:28.173

尝试：

XmlNodeList list = xml.SelectNodes("//wind_condition");

然后，只需检查返回的列表并进行相应处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:05:44.600

您可以使用 Linq-to-Xml（未经测试）使用类似这样的方法来查询文档：

```
XDocument xdoc = XDocument.Load("http://www.google.com/ig/api?weather=vilnius&hl=eng");
XElement[] myElements = xdoc.Root.Element("weather")
    .Elements()
    .Where(xelement => xelement.Element("wind_condition") != null)
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T19:13:35.033

这将确定文件是否包含单词`wind_condition`.

```
if(xml.ToString().Contains("wind_condition"))
{
    // do something
} 
```

如果你想要元素`wind_condition`

```
if(xml.Descendants("wind_condition").Count() > 0)
{
    // do something
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T19:14:13.467

由于您的根节点是 xml_api_reply，因此无论是否存在 wind_condition 都应该返回一个布尔值（我刚刚对其进行了测试，它似乎正在工作）

```
var result = (from t in loadedData.Descendants("xml_api_reply")
                     select t.Descendants("wind_condition").Any()).Single();

if(result) // equals to if wind_condition exists
{
} 
```

# android - Android 游戏线程建议

> ID：10487491
> 
> 赞同：0
> 
> 时间：2012-05-07T18:57:13.107
> 
> 标签：android, multithreading

我有一个关于在 Android 操作系统上设计和开发 2d 游戏的最佳实践的问题。按照 Lunar Lander 示例，我的游戏在单独的线程上运行，因此它不会阻塞 UI 线程。但是，一旦某些“波”在游戏中结束，我想显示一个屏幕来计算该波的分数、显示奖金等。我正在考虑通过在结束时调用 startActivityForResult() 将其作为一个单独的活动海浪。既然我不在主线程中，那么最好的方法是什么？这甚至会被认为是一种好的做法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:17.890

`Handler`在主 UI 线程中创建一个。让它处理一个wave结束的消息。在游戏线程中，调用`Handler.sendMessage(WAVE_END).sendToTarget()`以`Handler`告诉 UI 线程该波已结束。将`Handler`执行您想要的代码。

例子：

```
public int MSG_WAVE_END = 1;

private final Handler endWave = new Handler() {
  @Override
  public void handleMessage(Message msg) {
    if(msg.what == MSG_WAVE_END) { // the number is arbitrary. Traditionally a constant
       // Do what you want to do when a wave ends like startActivityForResult()
    }
  }
} 
```

然后在你的游戏线程中，当你的波结束时调用这个：

```
endWave.obtainMessage(MSG_WAVE_END).sendToTarget(); 
```

本质上`Handler`充当回调。您可以在线程之间安全地发送“消息”，以便在创建它的任何线程上执行代码。如果需要，您还可以传递两个整数参数和一个对象。它将包含在`Message`对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:11:19.713

[这](https://stackoverflow.com/questions/3248132/analog-of-startactivityforresult-for-service)可能对您的情况有一个有用的答案。简而言之，startActivityForResult 是同步的，所以如果你不介意暂停你的服务，那么它是有效的。否则，让得分活动回调到服务。

# jquery - html/jquery - 用于文件上传的嵌套表单

> ID：10487493
> 
> 赞同：1
> 
> 时间：2012-05-07T18:57:22.367
> 
> 标签：jquery, file-upload, xhtml, nested-forms

我有一个产品页面，该页面需要在表单中途上传文件，该表单将通过 JQuery 插件通过 iframes/ajax 运行。

但是，要做到这一点，我需要嵌套表单，这显然是非常糟糕的做法，并且不会验证。

我有什么选择至少可以让它看起来是一样的？

我是否需要使用 JQuery 以某种方式分隔表单？或者使用 iframe 会解决问题吗？

谢谢！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:05:09.593

如果中途你的意思是视觉上，那么你可以有一个html，你有......，然后甚至......，你可以用css定位iframe，所以它看起来像是在表单的中间。如果这是您想要的，并且您需要更多帮助，我们需要更多详细信息来帮助 :)

# python - 使用 BeautifulSoup 或 Regex 解析无效的锚标记

> ID：10487494
> 
> 赞同：0
> 
> 时间：2012-05-07T18:57:28.607
> 
> 标签：python, regex, parsing, html-parsing, beautifulsoup

我想解析一个包含 html 锚标记的原始文档，但不幸的是它包含无效的标记，例如：

```
<a href="A 4"drive bay">some text here</a> 
```

我知道这个`href`值可能不是一个实际的链接，但我们就这样吧。现在我需要的是检索 href 值`'A 4"drive bay'` 和链接文本`'some text here'`。

我正在使用 python，我已经尝试了 python 库“ [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/) ”，它在检索所有锚标记方面效果很好。但问题是它在遇到提到的无效锚标记时标记错误，其中href值包含' *“* '。这种情况存在于我正在解析的原始数据中，并且修改此类数据不是一个选项..

我使用 BeautifulSoup 的 Python 代码的一部分是：

```
sub_s = BeautifulSoup(line)
for l in sub_s.find_all('a'):
   l.replace_with(l.string)
print str(sub_s), 
```

该代码只是将锚标记替换为纯文本

如果有人可以帮助我解决这个问题，我将非常感激......正则表达式也可以...... ^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:16:37.147

我想你可以通过正则表达式预先过滤你的输入文本来纠正这个特定的问题。就像是：

```
>>> r = re.compile('''<a[^>]+href="([^>]+)">''')
>>> m = r.match(text)
>>> m.group(1)
'A 4"drive bay'
>>> r.sub('<a href="%s">' % m.group(1).replace('"', ' '), text)
'<a href="A 4 drive bay">some text here</a>' 
```

这不是一个完整的解决方案；只是关于如何前进的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T09:37:20.167

Selfhtm 8.1.2（在德国非常常用的 HTML 文档）建议：

1.  第一个位置拉丁字符（az，AZ）
2.  后面的拉丁字符、数字 (0-9)、-、_ 或 .

我使用以下正则表达式来确保第一个要求：

```
name="[^a-zA-Z] 
```

（nb 第一个前导空格似乎不那么重要，适用于大多数正则表达式实现，例如 helios 的 textpad 编辑器）

为了简化工作，我还有一个正则表达式来满足另一个要求：它还捕获一个字符锚（它们是有效的），但这将有助于识别可能的问题：

```
name=".?[^a-zA-Z0-9_\.-][^"]*" 
```

我使用语法检查器发现的大多数其他问题。

# mysql - Mysql：'common'列不匹配错误？将数据从 SPSS 导出到 mysql 时

> ID：10487495
> 
> 赞同：1
> 
> 时间：2012-05-07T18:57:32.043
> 
> 标签：mysql, sql

我正在尝试将数据从 SPSS（统计程序）导出到本地 mysql 数据库。出于某种原因，我收到“列数与值计数不匹配”消息。当 SQL 语句中的某些内容出错时，我已经习惯了该错误。但是在许多不同的环境中进行了数小时的测试后，很明显这不是问题所在。

SPSS 语法在 SQL 中。例如，可以使用的语法是这样的：

```
SAVE TRANSLATE /TYPE=ODBC
/CONNECT='DSN=localhost;UID=root;PWD=!S%E&u#k;'
/ENCRYPTED
/MISSING=IGNORE
/SQL='CREATE TABLE test1 (jaar double , maand double , dag double , huishoud double , persoon double , verpl double , rit double )'
/REPLACE
/TABLE='SPSS_TEMP_2'
/KEEP=jaar, maand, dag, huishoud, persoon, verpl, rit
/SQL='INSERT INTO test1 (jaar, maand, dag, huishoud, persoon, verpl, rit) SELECT jaar, maand, dag, huishoud, persoon, verpl, rit FROM SPSS_TEMP_2'
/SQL='DROP TABLE SPSS_TEMP_2'. 
```

运行此命令后，mysql 数据库如下所示：

```
CREATE TABLE `test1` (
  `jaar` double DEFAULT NULL,
  `maand` double DEFAULT NULL,
  `dag` double DEFAULT NULL,
  `huishoud` double DEFAULT NULL,
  `persoon` double DEFAULT NULL,
  `verpl` double DEFAULT NULL,
  `rit` double DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; 
```

使用以下数据：

```
INSERT INTO `test1` (`jaar`, `maand`, `dag`, `huishoud`, `persoon`, `verpl`, `rit`) VALUES
(2005, 1, 3, 1, 1, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 1, 1, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 0, 1, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 0, 0, 1, 1),
(2005, 1, 3, 0, 0, 1, 1); 
```

到目前为止，一切都很好。但是，完整的数据集带有 129 个变量（sql 字段）。第一个给出错误的称为“ritid”。当它与其他人一起插入时，它会停止整个过程。但即使单独插入，它也会破裂。它创建表但没有任何数据。如下所示。出现这种类型的错误对我来说并不奇怪。有人能给点建议吗？

```
SAVE TRANSLATE /TYPE=ODBC
  /CONNECT='DSN=localhost;UID=root;PWD=!l*z%J,[;'
  /ENCRYPTED
  /MISSING=IGNORE
  /SQL='CREATE TABLE Test2 (ritid double )'
  /REPLACE
  /TABLE='SPSS_TEMP_2'
  /KEEP=ritid
  /SQL='INSERT INTO Test2 (ritid) SELECT ritid FROM SPSS_TEMP_2'
  /SQL='DROP TABLE SPSS_TEMP_2'.

>Error # 6491\.  Text: Case #1 has been dropped
>Insert record failed
>Execution of this command stops.
>[Actual][MySQL] Column count doesn't match value count at row 1

>Error # 6487
>Write request failed - couldn't write any data. 
```

mysql数据库：

```
CREATE TABLE `Test2` (
  `ritid` double DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; 
```

（如前所述，这个中没有数据）

编辑：跳过“drop SPSS_TEMP_2”命令时，SPSS_TEMP_2 数据库与 Test2 数据库完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:48:14.743

最后我找到了解决方案，IBM Support 提供了一个很好的提示。

SPSS 中有两个变量（SQL 中的字段）导致了问题。它们是“ritid”和“hhid”。在 SPSS 中查看时，值以数字形式出现，没有任何点或逗号。当导出为 .csv 文件时，仍然没有显示任何问题，尽管它们 .csv 文件在通过 mysql 导入时确实报告了相同的 SQL 错误。

但是，将 SPSS 文件另存为 .dbf 文件并在 FileMaker Pro 中打开时，完全相同的变量会显示为第一个字符后带有逗号的值。不过应该有一个；数据的性质不希望有一个。但是还是...

为了使从 SPSS 导出到 mysql 成为可能，我将 SPSS 中变量的“type”字段更改为“type=string”而不是“type=numeric”。这使得出口成为可能。

不过，还有几件事需要考虑。例如，以这种方式导出它们对再次导入它们有一些影响，因为它们往往包含逗号。但这很容易通过使用 PHP 编辑 mysql 中的 sql 数据来解决。

感谢所有的建议！

# r - 开关/外壳的成语

> ID：10487496
> 
> 赞同：19
> 
> 时间：2012-05-07T18:57:34.850
> 
> 标签：r, switch-statement

我有一些基本上看起来像这样的 R 代码：

```
compute.quantiles <- function(mu, type) {

  ## 'mu' and 'type' are vectors of the same length

  var <- ifelse(type=='a', 6.3523 * mu^2,
         ifelse(type=='b', 234.23 * mu,
         ifelse(type=='c', {s <- 9.8 * ((mu-0.3)/3)^(6/7)+0.19; mu + mu^2/s},
         ifelse(type=='d', 56.345 * mu^1.5,
         ifelse(type=='e', 0.238986 * mu^2,
         ifelse(type=='f', mu + 1.1868823 * mu^2,
         NA ))))))

  # ...then do something with var...
} 
```

一些示例输入和输出：

```
print(compute.quantiles(2:4, c('c','d','e')))
[1]   2.643840 292.777208   3.823776 
```

这可以正常工作，但是对于深层嵌套来说有点难看，所以我想知道是否有不同的成语效果更好。有人有建议吗？如果`switch()`接受一个向量作为它的第一个参数，那会很好地工作，但它只需要一个标量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T20:21:39.610

我想我想出了一些我更喜欢的东西：

```
## Vector-switch
vswitch <- function(EXPR, ...) {
    vars <- cbind(...)
    vars[cbind(seq_along(EXPR), match(EXPR, names(list(...))))]
}

compute.quantiles <- function(mu, type) {
  stopifnot(length(mu) == length(type))

  vswitch( type,
    a = 6.3523 * mu^2,
    b = 234.23 * mu,
    c = mu + mu^2/(9.8 * ((mu-0.3)/3)^(6/7)+0.19),
    d = 56.345 * mu^1.5,
    e = 0.238986 * mu^2,
    f = mu + 1.1868823 * mu^2)
} 
```

矩阵索引代码只有 2 行，我认为我的代码阈值太聪明了。=)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-16T17:10:37.347

这是另一种方法：

```
library(data.table)
# Case selection table:
dtswitch <- data.table(type=letters[1:6],
                      result=c("6.3523 * mu^2",
                               "234.23 * mu",
                               "{s <- 9.8 * ((mu-0.3)/3)^(6/7)+0.19; mu + mu^2/s}",
                               "56.345 * mu^1.5",
                               "0.238986 * mu^2",
                               "mu + 1.1868823 * mu^2"),
                      key="type")

# Data to which you want the cases applied:
compute <- data.table(type=letters[3:5],mu=2:4,key="type")

# Join the data table with the case selection table, and evaluate the results:
dtswitch[compute,list(mu,result=eval(parse(text=result)))]
#>   type mu     result
#>1:    c  2   2.643840
#>2:    d  3 292.777208
#>3:    e  4   3.823776 
```

您可以将其存储在外部电子表格或数据库中，然后将其加载到 R 中，而不是在 R 代码中创建 dtswitch 表。如果您有很多不同的情况，或者它们经常更改并且您希望从一个中心位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-23T07:55:48.193

Ken Williams 的实现`vswitch`不适用于某些类型的输入。我认为这个更灵活：

```
vswitch <- function(expr, ...) {
  lookup <- list(...)
  vec <- as.character(expr)
  vec[is.na(vec)] <- "NA"
  unname(do.call(c, lookup[vec]))
} 
```

要将它与数字查找值一起使用，您需要引用或反引用它们：

```
num_vec <- c(1, 3, 2, 2, 1)
vswitch(num_vec, `1` = 10, `2` = 25, `3` = 50)
## [1] 10 50 25 25 10 
```

使用字符查找：

```
char_vec <- letters[num_vec]
vswitch(char_vec, a = "Albert", b = "Bertrand", c = "Charles")
## [1] "Albert"   "Charles"  "Bertrand" "Bertrand" "Albert" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T19:20:56.477

也许这样的事情是可行的：

```
compute.quantiles <- function(mu, type) {
  stopifnot(length(mu) == length(type))

  vars <- cbind(
    a = 6.3523 * mu^2,
    b = 234.23 * mu,
    c = mu + mu^2/(9.8 * ((mu-0.3)/3)^(6/7)+0.19),
    d = 56.345 * mu^1.5,
    e = 0.238986 * mu^2,
    f = mu + 1.1868823 * mu^2)

  vars[cbind(seq_along(mu), match(type, colnames(vars)))]
} 
```

不过，不确定这对于未来的读者（包括我自己）是否会显得过于“先进”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T18:13:18.040

我忍不住用完全不同的方法添加另一个答案。这里是。

```
## Sort of a cross between tapply() and ave()
tswitch <- function(x, INDEX, ...) {
  l <- substitute(list(...))
  s <- split(x, INDEX)
  pf <- parent.frame()
  split(x, INDEX) <- lapply(names(s), function(n) 
    eval(l[[n]], list(x=s[[n]]), pf)
  )
  x
}

compute.quantiles <- function(mu, type) {
  stopifnot(length(mu) == length(type))

  tswitch(mu, type,
    a = 6.3523 * x^2,
    b = 234.23 * x,
    c = x + x^2/(9.8 * ((x-0.3)/3)^(6/7)+0.19),
    d = 56.345 * x^1.5,
    e = 0.238986 * x^2,
    f = x + 1.1868823 * x^2)
} 
```

以及示例输入和输出：

```
> compute.quantiles(2:4, c('c','d','e'))
[1]   2.643840 292.777208   3.823776 
```

这种实现的优点是它只计算`length(mu)`需要计算的特定值。相比之下，`vswitch`上面的方法计算`length(mu) * M`值，其中`M`是开关中“案例”的数量。因此，如果计算成本很高，或者数据很大，那么这个版本可能是一个胜利。

# php - 更改文件的单个字符

> ID：10487505
> 
> 赞同：2
> 
> 时间：2012-05-07T18:57:59.597
> 
> 标签：php, file-io

我需要更改文件中的单个字符。
我宁愿不使用这样的辅助文件（伪代码）：
`read(theFile)`

`change(theFile)`

`write(theFile2)`

`erase(theFile)`

`rename(theFile2,theFile)`

由于通过这种方式，某些进程可能会在实际擦除该文件时需要该文件。
相反，我想对自己的文件进行操作，因为这样，我依靠服务器的操作系统来处理对文件的时间和进程访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:00:03.050

You'll want to use `flock` to lock the file. Example based on code from the [PHP docs](http://php.net/flock):

```
<?php

$fp = fopen("file.txt", "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    //make your changes
    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:58:12.610

就地编辑是可能的，但取决于您想要的内容可能非常困难。例如，这段代码：

```
<?php

$r = fopen("test.txt", "c+");
fseek($r, 50);

// write out
fwrite($r, "TESTING");
fclose($r); 
```

将打开一个名为的文件并将*TESTING*`test.txt`一词插入文件中 50 个字节。关闭句柄后，文件将与更改一起保存：无需完全替换。通过这种方式，您可以**将**数据添加到文件的内部。我在任何 PHP 函数中都看不到**删除**部分文件的方法，因此如果您需要删除任何内容，您可能不走运并且必须覆盖整个文件。

 *****[`fopen`](http://www.php.net/manual/en/function.fopen.php)编辑：据我从文档中得知，这需要 PHP 5.2.6 或更高版本。*****

# macos - 为 Alfred 编写扩展，输出到窗口？

> ID：10487506
> 
> 赞同：1
> 
> 时间：2012-05-07T18:58:02.363
> 
> 标签：macos, plugins, alfred

我想为应用程序 Alfred 做一个扩展，我想让输出转到应用程序窗口。要理解我的意思（假设您有 Alfred），请在 Alfred 文本框中输入“2+3”。您将看到它显示“5”作为结果项，并且可以通过按 Return 将其复制到剪贴板。有没有办法通过扩展来做到这一点？咆哮结果越来越烦人，而且 90% 的时间都是不切实际的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T22:09:08.113

如果您想要的是在 Alfred 的文本输入框中输入文本，那么 @Blacklight 的答案将为您提供很好的服务。如果您想为自定义搜索显示结果，您将需要使用众多[Alfred 库](http://www.alfredforum.com/topic/2030-workflow-libraries-and-helpers/)之一。如果您想编写 Alfred 脚本而不是搜索某些文本（如@Blacklight 的回答），您应该查看`External Triggers`最新版本的 Alfred。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T17:13:37.930

Yes it is possible. It is more like a workaround since you can't chain outputs to inputs at present, but it's an "official" workaround.

You can simply use an osascript (Apple script) as an output in which you call Alfred and insert your `{query}` as an argument into an input:

```
tell application "Alfred 2" to search "keyword {query}" 
```

If you use the same keyword as in your original input you will have to distinguish somehow if your argument is typed in or automatically inserted by your output. You can also use a new input with a different keyword.

Have a look here: [Alfred forums](http://www.alfredforum.com/topic/1283-how-to-script-filters-reusing-a-single-script-filter-or-chaining-multiple-together/)

# java - Using Java to extract data from google Weather API

> ID：10487508
> 
> 赞同：1
> 
> 时间：2012-05-07T18:58:07.840
> 
> 标签：java, api, weather

Edit: 2020 update -- Please disregard the question below as Google's weather API is no longer able to be used. If you are interested in using a weather API, Darksky is the defacto that most people use: [https://darksky.net/dev](https://darksky.net/dev)

If you use Java, the normal way to parse the JSON is using org.json: [https://devqa.io/java/how-to-parse-json-in-java](https://devqa.io/java/how-to-parse-json-in-java)

--

Original question below.

* * *

I've been playing around with xml documents and java a bit recently, but I've had absolutely no luck using the google weather API.

Let's assume that I'm trying to do a simple object to store current temp, and forecast temp for just tomorrow, how would I do this?

[http://www.google.com/ig/api?weather=02110](http://www.google.com/ig/api?weather=02110) Is the working example for my home city.

Thanks

Using this code:

```
public static final String[] xmlLoader(){
    String xmlData[] = new String[2];
    try {
        URL googleWeatherXml = new URL("http://www.google.com/ig/api?weather=02110");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();    
        Document doc = db.parse(googleWeatherXml.openStream());

         // normalize text representation
        doc.getDocumentElement ().normalize ();
        NodeList listOfWeek = doc.getElementsByTagName("");

            Node firstWeekNode = listOfWeek.item(dateCounter-1);
            int totalWeeks = listOfWeek.getLength();

            //Break xml file into parts, then break those parts down int an array by passing individual elements to srtings
            if(firstWeekNode.getNodeType() == Node.ELEMENT_NODE){
                Element firstWeekElement = (Element)firstWeekNode;
                //-------
                NodeList dateList = firstWeekElement.getElementsByTagName("date");
                Element dateElement = (Element)dateList.item(0);

                NodeList textDateList = dateElement.getChildNodes();
                xmlData[0]= (((Node)textDateList.item(0)).getNodeValue().trim()).toString();

                //-------
                NodeList riddleList = firstWeekElement.getElementsByTagName("riddle");
                Element riddleElement = (Element)riddleList.item(0);

                NodeList textRiddleList = riddleElement.getChildNodes();
                xmlData[1]= (((Node)textRiddleList.item(0)).getNodeValue().trim()).toString();

                //----
                NodeList lWSList = firstWeekElement.getElementsByTagName("lastWeekSolution");
                Element ageElement = (Element)lWSList.item(0);

                NodeList textLWSList = ageElement.getChildNodes();
                xmlData[2]= (((Node)textLWSList.item(0)).getNodeValue().trim()).toString();

                //------
            }//end of if clause

    }
    catch(MalformedURLException f){System.err.println(f.getMessage()); }
    catch(NullPointerException npe){
        System.out.println("The Weather Data you searched for is incorrect or does not yet exist, try again. ");
        String s[] = {" ", " "};
        main(s);
    }

   catch (SAXParseException err) {
    System.out.println ("** Parsing error" + ", line " 
         + err.getLineNumber () + ", uri " + err.getSystemId ());
    System.out.println(" " + err.getMessage ());

    }
    catch (SAXException e) {
    Exception x = e.getException ();
    ((x == null) ? e : x).printStackTrace ();

    }catch (Throwable t) {
    t.printStackTrace ();
    }
    return xmlData;
} 
```

Getting tons of null pointers, no matter what I do.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:25:11.643

当您调用 .getElementsByTagName() 时，您需要对返回的值进行保护：

```
NodeList dateList = firstWeekElement.getElementsByTagName("date");
if (datelist != null) {
    Element dateElement = (Element)dateList.item(0); 
```

等等。

**更新**

现在我查看 XML，我发现没有 <date> 元素；这就是为什么 dateList 为空的原因。您想要寻找像 <forecast_information> 和 <city> 这样的元素。

```
NodeList forecasts = firstWeekElement.getElementsByTagName("forecast_information");
if (forecasts != null) {
    Element forecastElement = (Element)forecasts.item(0); 
```

# javascript - jQuery自动缩略图滚动脚本？

> ID：10487513
> 
> 赞同：0
> 
> 时间：2012-05-07T18:58:23.137
> 
> 标签：javascript, jquery, slider, carousel

是否有一个 jQuery 脚本可以执行以下操作：

[http://tympanus.net/Tutorials/SliderGallery/](http://tympanus.net/Tutorials/SliderGallery/)

*注意：您必须单击一个位置才能了解我的要求。*

除了拥有灯箱和滚动条。而不是手动旋转图像？旋转木马本身？

我可以在其中以指定宽度在指定区域旋转多个图像的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:25:05.897

我最终回答了我自己的问题并找到了一个类似于我所问的脚本。

如果有人遇到同样的问题...查看这些链接：

[http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/) http://archive.plugins.jquery.com/project/jCarouselLite

谢谢

# functional-programming - 在签名中隐藏类型参数

> ID：10487521
> 
> 赞同：3
> 
> 时间：2012-05-07T18:58:44.947
> 
> 标签：functional-programming, ocaml

OCaml 无法在签名中展开中间参数化类型是否有原因？

例如：

```
(* foo.ml *)
type 'a internal = Foo of 'a
type t = string internal 
```

和：

```
(* foo.mli *)
type t = Foo of string 
```

给一个错误。

我想这与内存表示有时可能不同的事实有关，但我想知道在向 OCaml 错误跟踪器提交错误报告之前是否有任何更深层次的原因......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:19:37.257

只要类型是*结构*类型，它就可以，例如：

```
type 'a t = 'a * int
type u = string t 
```

将匹配

```
type u = string * int 
```

但是，变体（和记录）是OCaml 中的*名义*类型。也就是说，这种类型的每个声明都会引入一个新的类型名称。并且签名中的名义类型规范只能与名义类型声明匹配，并且它们必须具有等效的定义。您的示例中也不是这种情况，因此不被接受。（这是 OCaml 的一个微妙角落。结构类型别名和名义类型定义共享相同语法的事实无济于事。）

FWIW，您还可以重新绑定名义类型：

```
type 'a t = Foo of 'a
type 'a u = 'a t = Foo of 'a 
```

将匹配

```
type 'a u = Foo of 'a 
```

但这也不允许您更改结构或参数，因此对您的情况没有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T07:15:31.270

这不是一个内存表示问题。在将类型声明与类型签名匹配时，或者更一般地，在检查声明`t1`是否不如声明一般时`t2`，类型检查器当前仅考虑这三种情况：

*   `t2`是抽象类型或类型缩写
*   `t1`并且`t2`都是总和类型
*   `t1`并且`t2`都是记录

其他情况因错误而失败。在您的情况下，`t1`（被检查的类型）是类型缩写，`t2`（规范）是总和类型。这失败并出现类型错误。

查看源代码：`type_declarations`在[typing/includemod.ml](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/typing/includecore.ml?revision=12397&view=markup#l202)中。

这不是内存表示考虑，因为`foo.ml`这也会失败：

```
type u = Foo of string
type t = u 
```

也许这个检查可以改进。您应该在 bugtracker 上询问。

*编辑*：说出这个检查应该改进到什么程度并非易事。在检查签名匹配时，通常在签名侧扩展缩写是不正确的，例如不应接受以下内容：

```
module Test : sig
  type t = Foo
  type u = t (* to the outside, t and u would be equal *)
end = struct
  type t = Foo (* while internally they are different *)
  type u = Foo (* sum/records are generative/nominative *)
end 
```

反过来（内部相等对外部隐藏）是正确的并且已经可能：

```
module Test : sig
  type t = Foo
  type u = Foo
end = struct
  type t = Foo
  type u = t = Foo
end;;

fun (x : Test.t) -> (x : Test.u);;
(* Error: This expression has type Test.t but an expression
   was expected of type Test.u *) 
```

现在，在考虑缩写扩展时，内存表示也被考虑在内，因为这种扩展不会保留类型系统的动态语义（内存表示选择）：

```
module Test : sig
  type r = { x : float; y : float; z : float } (* boxed float record *)
end = struct
  type 'a t = { x : 'a; y : 'a; z : 'a } (* polymorphic record *)
  type r = float t
end 
```

# ruby-on-rails - RoR: Polymorphic Associations: ID and Type are nil

> ID：10487526
> 
> 赞同：0
> 
> 时间：2012-05-07T18:59:14.500
> 
> 标签：ruby-on-rails, ajax, polymorphism, polymorphic-associations

I'm creating an app in Ruby on Rails where users can listen to 2 different types of songs. I want to track each song(and type) that a user listens to. User can listen to a user_song or a master_song. My first thought was to use polymorphic associations.

Firstly, my user model looks like this:

```
class User < ActiveRecord::Base 
has_many :song_listens, :foreign_key => "user_id" 
```

and then. I declare polymorphic this way:

```
class SongListen < ActiveRecord::Base
belongs_to :listenable, :polymorphic => true
belongs_to :user

class UserSong < ActiveRecord::Base
has_many :song_listens, :as => :listenable, :class_name => "SongListen"

class MasterSong < ActiveRecord::Base
has_many :song_listens, :as => :listenable, :class_name => "SongListen" 
```

My SongListens migration:

```
class CreateSongListens < ActiveRecord::Migration
  def change
    create_table :song_listens do |t|
      t.integer :user_id
      t.references :listenable, :polymorphic => true

      t.timestamps
    end
  end
end 
```

The problem comes in when I try save a user's song listen in the polymorphic table. I get nil for type and id. See -->:

```
[["created_at", Mon, 07 May 2012 18:25:34 UTC +00:00], ["listenable_id", nil],["listenable_type", nil], ["updated_at", Mon, 07 May 2012 18:25:34 UTC +00:00], ["user_id", 1]] 
```

As you can see, the user_id is being set.

My SongListensController:

```
def create
@song_listen = current_user.song_listens.build(params[:listenable_id => :user_song_id])
@song_listen.save
end

def create_ms_listen
@song_listen = current_user.song_listens.build(params[:listenable_id => :master_song_id])
@song_listen.save
end 
```

My view:

```
<% @user_songs.each do |user_song| %>
<td><%= link_to 'Play Song', user_song.song.url, class: :play, remote: :true %></td>
<% end %>

<% @master_songs.each do |master_song| %>
<td><%= link_to 'Play Song', master_song.m_song.url, class: :play, remote: :true %></td>
<% end %> 
```

I think this explains the majority of my problem, but for fun, I'm using ajax to create song listen through a music player which sends data through route to SongListen create action:

```
$('a.play').click(function(e) {
    e.preventDefault();
    $("#jquery_jplayer_1")
        .jPlayer("setMedia", {mp3: this.href })
        .jPlayer("play");
$.ajax({
  url: '/create_ms_listen.json',
  data: { "master_song_id" : "master_song.id"},
  async: false
  });
$.ajax({
  url: '/create_us_listen.json',
  data: { "user_song_id" : "user_song.id"},
  async: false
  });
  ..... 
```

Which goes to my routes:

```
match "create_us_listen.json" => "song_listens#create"

match "create_ms_listen.json" => "song_listens#create_ms_listen" 
```

I know my goal is to somehow set the listenable type and id in the SongListen table but so far they have both been nil. What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:39:07.907

这是错误的：

```
params[:listenable_id => :user_song_id] 
```

你能看出为什么吗？

试试看：

```
def create
    @song_listen = current_user.song_listens.build(params[:song_listen]) do |sl|
        sl.listenable_id = params[:song_id]
    end
    @song_listen.save
end 
```

不知道你是如何得到song_id的，但这就是想法。

* * *

```
$("#jpId").bind($.jPlayer.event.play, function(event) {
    // This event is fired when a song start playing,
    // so do your ajax request here.
    // Not sure how to get the id of your song.
    // You can access your media with event.jPlayer.status.media,
    // and from there, get the name or id of your song I guess
}); 
```

# bash - 从文件中的行中提取特定字符串并输出到另一个文件并进行修改

> ID：10487531
> 
> 赞同：3
> 
> 时间：2012-05-07T18:59:40.570
> 
> 标签：bash, sed, awk, find, cut

linux新手，并试图以艰难的方式逃避这种做法。我有一个文件（“output.txt”），其中包含“查找”命令的结果。“output.txt”中的前三行示例：

```
/home/user/temp/LT50150292009260GNC01/L5015029_02920090917_MTL.txt
/home/user/temp/LT50150292009276GNC01/L5015029_02920091003_MTL.txt
/home/user/temp/LT50150292009292GNC01/L5015029_02920091019_MTL.txt 
```

我想使用 awk 或 sed （或类似的）从为每一行列出的路径中提取两个部分，并输出到一个新文件（“run.txt”），并在每一行上添加额外的信息，如下所示：

```
cd /home/user/temp/LT50150292009260GNC01; $RUNLD L5015029_02920090917_MTL.txt
cd /home/user/temp/LT50150292009276GNC01; $RUNLD L5015029_02920091003_MTL.txt
cd /home/user/temp/LT50150292009292GNC01; $RUNLD L5015029_02920091019_MTL.txt 
```

我猜这也可能涉及“剪切”之类的东西，但我无法理解如何考虑更改文件夹和文件名。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:29:07.803

```
sed -e 's/^/cd /; s|/\([^/]*\)$|; \$RUNLD \1|' file 
```

这会添加“cd”并将最后一个 / 替换为“; $RUNLD”。瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:45:08.497

只用 bash

```
while IFS= read -r filename; do
  printf 'cd %s; $RUNLD %s\n' "${filename%/*}" "${filename##*/}"
done < output.txt > run 
```

见[http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:13:04.807

我可能会使用基于循环的 grep 解决方案来解决这个问题，因为我不知道`cut`，或者`awk`很好哈哈。这可以解决问题：

```
while read x; do folder=$(echo "$x" | grep -o '^.*/'); file=$(echo "$x" | grep -o '[^/]*$'); echo "cd ${folder:0:-1}; \$RUNLD $file"; done < output.txt > run 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:28:21.073

```
sed 's|^|cd |; s|/\([^/]*\)$|; $RUNLD \1|' inputfile > run 
```

它说：

*   在行首插入“cd”
*   对于最后一个斜线和后面的内容，替换为“; $RUNLD”和最后一部分（由括号捕获）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T23:01:36.920

这可能对您有用：

```
sed 's/\(.*\)\//cd \1; $RUNLD /' file
cd /home/user/temp/LT50150292009260GNC01; $RUNLD L5015029_02920090917_MTL.txt
cd /home/user/temp/LT50150292009276GNC01; $RUNLD L5015029_02920091003_MTL.txt
cd /home/user/temp/LT50150292009292GNC01; $RUNLD L5015029_02920091019_MTL.txt 
```

# c - 链接列表程序中的分段错误

> ID：10487535
> 
> 赞同：0
> 
> 时间：2012-05-07T19:00:03.877
> 
> 标签：c, segmentation-fault

这个程序是创建一个链接列表。当我运行这个程序时，它给了我一个分段错误。

```
#include <stdio.h>
#include <stdlib.h>
struct node  {
    int data;
    struct node *next, *prev;
};
struct node *root=NULL;
void push (int);
void pop (void );
struct node * create_node (int );
void travel (void );
int main()
{
    int i, j, choice, count;
    printf("enter choice\n");
    scanf("%d", &choice);
    count = 0;
    while (choice == 1) {
        printf("enter a data element");
        scanf("%d", &j);
        count++;
        printf("enter choice\n");
        scanf("%d", &choice);
    }
    printf("the link list is \n");
//travel function to be created
    travel();
}

void push(int data)
{
  struct node *t1;
   t1=root;
  while( t1->next!=NULL)
  {
   t1=t1->next;
  }
   t1->next=create_node( data);
}

void pop()
{
}

void travel (void )
 {
  struct node *t1;
   t1=root;
  while (t1->next!=NULL)
  {
       printf("%d ",t1->data);
   }
   printf("%d ",t1->data);
 }
struct node * create_node (int data)
 {
   struct node *p = (struct node *) malloc (sizeof(struct node));
    p->data=data;
    p->next=NULL;
    p->prev=NULL;
    return p;   
 } 
```

可能是什么错误？这就是我执行的方式

```
user@ubuntu:~/programming$ ./a.out 
enter choice
1
enter a data element45
enter choice
1
enter a data element67
enter choice
1
enter a data element89
enter choice
0
the link list is 
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:04:05.617

在它的初始声明和初始化之后，你永远不会分配任何东西`root`，所以它总是`NULL`，然后你继续在`travel()`.

```
struct node *t1;
t1=root;

// what if root is NULL?  Too late... segfault (you hope)
while( t1->next!=NULL) 
```

# sqlite - Sqlite with FTS on Windows Phone

> ID：10487536
> 
> 赞同：0
> 
> 时间：2012-05-07T19:00:05.240
> 
> 标签：sqlite, windows-phone-7, full-text-search

I'm fairly ignorant wrt sqlite, but from what I've found out there appear to be two main implementations for windows phone that folks here are using:

1.  [C# Sqlite for WP7](http://wp7sqlite.codeplex.com/)
2.  [Sqlite Client for Windows Phone](http://sqlitewindowsphone.codeplex.com/)

Is there a pros/cons list of these two projects somewhere?

I also haven't seen anything stating that full text search is supported on the WP implementation of any of these. Does anyone know any different? This is a key requirement for my business (and I'm willing to help push to get) and we can't go ahead with our WP implementation of our product until we have this.

If these projects are ported from the core sqlite source code, is it just a matter of defining `SQLITE_ENABLE_FTS3` in the projects and recompiling to [enable it](http://www.sqlite.org/fts3.html#section_2)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:55:13.937

WP7 是一个“沙盒”环境，也就是说，不允许使用本机代码（c++、pinvoke）。这些移植不是基于外部库，它们是用完全托管的代码（只有 c#）编写的，所以在实践中“不仅仅是定义 SQLITE_ENABLE_FTS3 的问题”。

据我所知，实现 FTS 的唯一解决方案是 Perst [http://www.mcobject.com/perst](http://www.mcobject.com/perst)。您可以尝试一下并检查它是否符合您的需求，就像非商业项目的开源一样。不幸的是，出于商业目的，您需要购买付费许可证。

我面临同样的问题，如果你找到任何有效的线索，请告诉我。

# objective-c - cocos2d runAction in loop

> ID：10487545
> 
> 赞同：1
> 
> 时间：2012-05-07T19:01:00.470
> 
> 标签：objective-c, cocos2d-iphone

quite new to cocos2d so this is probably a school boy question.

I have ccMenu full of ccMenuItemImage's and want to animate each menu item in sequence to fade out.

I have an array with all the CCMenuItemImages:

```
menuItems = [[NSArray alloc] initWithObjects:button1, button2, button3, nil]; 
```

And i am trying to loop through the array and fade each button out:

```
CCFadeOut *fadeToAlpha = [CCFadeOut actionWithDuration:0.5];

for (CCMenuItemImage *nextOne in menuItems)
    [nextOne runAction:fadeToAlpha]; 
```

This seems to work, but will only fade out the last CCMenuItemImage in the array. I know i could perform the action on the actual CCMenu, but i want to perform the animations one after another on each menu item.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:31:49.653

尝试：

```
int index=0;
for (CCMenuItemImage *nextOne in menuItems){
   CCFadeOut *fadeToAlpha = [CCFadeOut actionWithDuration:0.5]; 
   id fader = [CCSequence actions:[CCDelayTime actionWithDuration:index*.5],
                                  fadeToAlpha,nil];
   [nextOne runAction:fader];
   index++;
} 
```

此外，避免使用具有多个 runAction 的相同动作对象实例，为每个使用实例创建新动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:33:54.400

您必须在工作中使用 CCSequence....

而不是使用循环使用 CCSequence 像这样..

```
[button1 runAction:[CCSequence actions:fadeToAlpha,use CCCallFuncN to call 2nd method, nil]]; 
```

第二种方法

```
[button2 runAction:[CCSequence actions:fadeToAlpha,use CCCallFuncN to call 3nd method, nil]]; 
```

.

.

.

.

还有另一种方法......这很棘手......你的淡入淡出时间是 0.5。

```
float duration = 0;
for (CCMenuItemImage *nextOne in menuItems)
{
    [nextOne runAction:[CCSequence actions:[CCDelayTime actionWithDuraion:duration],fadeToAlpha,nil]];

  value = value + 0.5;

} 
```

检查语法..这样你可以一个接一个地为按钮设置动画......希望这会有所帮助.. :)

# html - CSS webkit scrollbar show/hide

> ID：10487551
> 
> 赞同：15
> 
> 时间：2012-05-07T19:01:19.233
> 
> 标签：html, css

I'm using -webkit-scrollbar and what I want to happen is the scrollbar hidden on page load, and it stays hidden until you hover over the container div it is attached to. When you are hovering over a scrollable area, it would appear.

I tried adding :hover and :focus affects to various divs and rules in my CSS with no luck.

Is there a way to do what I'm referring to using -webkit-scrollbar? I could post code, but its pretty straightforward. Just one outer div with the css rules attached to it, then one inner div with set height and width. Then the css rules for -webkit-scrollbar.

```
#u #trail ::-webkit-scrollbar {
    width: 9px;
    height: 9px;
}
#u #trail ::-webkit-scrollbar-button:start:decrement,
#u #trail ::-webkit-scrollbar-button:end:increment {
    display: block;
    height: 0;
    background-color: transparent;
}
#u #trail ::-webkit-scrollbar-track-piece {
    background-color: #FAFAFA;
    -webkit-border-radius: 0;
    -webkit-border-bottom-right-radius: 8px;
    -webkit-border-bottom-left-radius: 8px;
}
#u #trail ::-webkit-scrollbar-thumb:vertical {
        height: 50px;
        background-color: #999;
        -webkit-border-radius: 8px;
}
#u #trail ::-webkit-scrollbar-thumb:horizontal {
    width: 50px;
    background-color: #999;
    -webkit-border-radius: 8px;
}
#u #trail-overflow {
    width: 860px;
    max-height: 500px;
   overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-07T13:39:41.897

我似乎已经通过了 css 中的自动隐藏功能。我以某种方式在我的应用程序上做到了，并且正在寻找我是如何得到它的。这是@tim 对现有小提琴的修改

[http://jsfiddle.net/4RSbp/165/](http://jsfiddle.net/4RSbp/165/)

这可以解决问题：

```
body {overflow-y:hidden;}
body:hover {overflow-y:scroll;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-28T20:04:41.847

您可以使用简单的 CSS 来实现这一点。

例如。如果你有一个`#content-wrapper`滚动的 div`background-color: rgb(250, 249, 244);`

```
#content-wrapper::-webkit-scrollbar-thumb {
  background-color: rgb(250, 249, 244); /* Matches the background color of content-wrapper */
}

#content-wrapper:hover::-webkit-scrollbar-thumb {
  background-color: gray;
} 
```

仅供参考您可以将拇指的不透明度设置为零（而不是匹配背景颜色），但不透明度似乎也适用于页面上的其他滚动条。

PS 这假设您`::-webkit-scrollbar-track`的背景颜色也与 的背景颜色相匹配`#content-wrapper`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T19:43:58.903

我最终选择了 slimscroll javascript 插件。拥有一个全 CSS 解决方案会很酷，但是这个插件做得很好，并且允许焦点显示/隐藏的想法。

[http://rocha.la/jQuery-slimScroll](http://rocha.la/jQuery-slimScroll)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T00:08:15.290

在 webkit 中隐藏滚动拇指是不直观的！我的页面需要隐藏所有默认浏览器滚动功能，以实现我们自己的“无限滚动”效果。唯一困难的是 webkit 的“拇指”覆盖层，它只在屏幕运动时显示（比如用鼠标滚轮滚动）。

为了隐藏这个 webkit 滚动拇指，我们必须对“所有”滚动拇指应用一些样式，然后将隐藏效果应用到我的特定拇指（我们必须以编程方式执行此操作，因为我们不确定内容是否足够长我们的自定义滚动效果，直到页面加载）。

这些是我们使用的样式：

```
::-webkit-scrollbar { /* required, although an apparent no-op */
    color: inherit;
}
::-webkit-scrollbar-thumb { /* leave most bars alone */
    background-color: grey;
}
#customScrollDiv::-webkit-scrollbar-thumb { /* this is the one we care about */
    background-color: grey;
}
.hideThumb::-webkit-scrollbar-thumb { /* we apply the style to actually hide it*/
    display: none; 
}       
.hideThumb { /* required, although an apparent no-op */
    background-color: white;
} 
```

然后，当我确定我想以编程方式隐藏那个 thumbHandle 时，我可以用 jquery 来做到这一点：`$('#customScrollDiv').toggleClass('hideThumb');`

棘手的部分是，您需要很多“默认”的 CSS 样式，这些样式通常是开箱即用的，但是一旦您开始指定上面这些 webkit 样式中的一种，那么您需要全部使用它们，否则它们将不会被应用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T19:11:02.617

看到这个工作演示： http: [//jsfiddle.net/trpeters1/4RSbp/3/](http://jsfiddle.net/trpeters1/4RSbp/3/) ，它是从这里派生的：

[http://css-tricks.com/examples/WebKitScrollbars/](http://css-tricks.com/examples/WebKitScrollbars/)

# asp.net - 如何结合 GridView 和项目插入功能？

> ID：10487552
> 
> 赞同：0
> 
> 时间：2012-05-07T19:01:24.517
> 
> 标签：asp.net, .net, gridview

我正在寻找一种将项目编辑行内 GridView UI 传播到项目插入的方法。

我在页脚中有项目插入表单（行），但仅当 GridView 不为空时才可见。所以当它为空时，我不能使用它，所以有一个看起来很难看的单独表格。

我可以一直使用外部形式进行插入，但我喜欢行内插入看起来既直观又方便。

我可以一直显示页脚，或者模拟类似的行内样式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:13:23.647

你有两种方法可以做到：

1-通过模拟里面的输入字段`<EmptyDataTemplate>`

```
<asp:GridView ID="GridView1" runat="server">
        <EmptyDataTemplate>
            <tr>
                <td>
                    First Cell
                </td>
                <td>
                    Second Cell
                </td>
                <tb>
                    Third Cell
                </tb>
            </tr>
        </EmptyDataTemplate>
        </asp:GridView> 
```

2-是创建 Empty`DataSet`并将其绑定到`GirdView`.

我更喜欢第一种方式，因为 Binding empty`DataSet`有一些问题。

# django - 有没有更短的方法来检查 Django 模板中 M2M 中的值？

> ID：10487553
> 
> 赞同：1
> 
> 时间：2012-05-07T19:01:40.937
> 
> 标签：django, django-templates, django-context

在每个页面 ( `base.html`) 中，我想检查`request.user`我的班级是否有管理员角色`UserTypes`并显示管理员链接。目前我做这样的事情：

```
{% if user.profile.user_types.all %}
    {% for user_type in user.profile.user_types.all %}
        {% if user_type.name == "ad" %}
            <li>
                <a href="{% url admin:index %}" class="round button dark ic-settings image-left">Admin</a>
            </li>
        {% endif %}
    {% endfor %}
{% endif %} 
```

`user.profile`只是从 Django`User`到我的`UserProfile`.

但这似乎有点冗长和笨拙。有没有更简单的方法？也许我应该编写自己的自定义上下文处理器并传递一个变量之类的`is_admin`东西，但我之前从未编写过自定义上下文处理器......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:04:39.040

您可以向模型添加方法`is_admin`，`UserProfile`将业务逻辑移动到模型中。

请注意，像这样的构造

```
{% if user.profile.user_types.all %}
    {% for user_type in user.profile.user_types.all %}
    ...
    {% endfor %}
{% endif %} 
```

点击 2 sql 查询到您的数据库。但是`with`模板标签将它们减少到 1 次命中。

```
{% with types=user.profile.user_types.all %}
{% if types %}
    {% for user_type in types %}
    ...
    {% endfor %}
{% endif %}
{% endwith %} 
```

实际上，最好的地方是模型。但是您应该了解 django 为您的目的提供什么（contrib.auth、权限、用户组）。可能你重新发明了轮子。

那么条件`{% if user_type.name == "ad" %}`不应该在你的python代码中硬编码（尤其是在模板中）。

# symfony - 如果用户已登录，则重定向

> ID：10487557
> 
> 赞同：14
> 
> 时间：2012-05-07T19:01:54.033
> 
> 标签：symfony

我正在使用 FOSUserBundle 包构建一个带有 Symfony 2 的 Web 应用程序。
用户创建一个帐户，登录并开始使用该应用程序。

我现在想要实现的是让用户从他们登录后可能位于的任何页面重定向到他们的帐户。
这包括：

*   如果他们回到登录页面
*   如果他们回到注册页面
*   如果他们访问网站的主页
*   一旦他们确认了他们的电子邮件
*   一旦他们重置密码

基本上代码是这样的：

```
$container = $this->container;
$accountRouteName = "DanyukiWebappBundle_account";
if( $container->get('security.context')->isGranted('IS_AUTHENTICATED_FULLY') ){
    // authenticated (NON anonymous)
    $routeName = $container->get('request')->get('_route');
    if ($routeName != $accountRouteName) {
        return $this->redirect($this->generateUrl($accountRouteName));
    }
} 
```

问题是我不知道该代码应该去哪里。
它应该针对任何请求执行。在 Symfony 1 中，我会使用过滤器。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-09T08:42:21.223

我自己找到了解决方案：

```
<?php

namespace Danyuki\UserBundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpFoundation\RedirectResponse;

class LoggedInUserListener
{
    private $router;
    private $container;

    public function __construct($router, $container)
    {
        $this->router = $router;
        $this->container = $container;
    }    

    public function onKernelRequest(GetResponseEvent $event)
    {
        $container = $this->container;
        $accountRouteName = "DanyukiWebappBundle_account";
        if( $container->get('security.context')->isGranted('IS_AUTHENTICATED_FULLY') ){
            // authenticated (NON anonymous)
            $routeName = $container->get('request')->get('_route');
            if ($routeName != $accountRouteName) {
                $url = $this->router->generate($accountRouteName);
                $event->setResponse(new RedirectResponse($url));
            }
        }
    }
} 
```

然后，在我的包的 services.yml 文件中：

```
services:
    kernel.listener.logged_in_user_listener:
            class: Danyuki\UserBundle\Listener\LoggedInUserListener
            tags:
                - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
            arguments: [ @router, @service_container ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T07:09:31.377

如果您只想检查一次，也可以执行此解决方案：

每次成功登录时都会触发一个事件。 **活动名称：**

> security.interactive_login

为了订阅这个事件，你必须用你创建的类创建一个服务容器，比如说“LoginListener.php”，并用事件“security.interactive_login”注入标签“kernel.even_listener”：

```
<service id="mylogin.success.listener" class="path\to\class\LoginListener">
   <tag name="kernel.event_listener" event="security.interactive_login" method="onLoginSuccess" />
</service> 
```

**在登录监听器中：**

```
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;

public function onLoginSuccess(InteractiveLoginEvent $event) {
   if ($this->_security->isGranted('IS_AUTHENTICATED_FULLY')) {
      //your code here...
   }
} 
```

您还可以添加其他依赖项并将其注入构造函数，在我的情况下，我必须注入安全性、会话和容器：

```
public function __construct(SecurityContext $security, Session $session,            ContainerInterface $container) {

} 
```

# java - 无法保存实体更改：实例的标识符已更改

> ID：10487560
> 
> 赞同：0
> 
> 时间：2012-05-07T19:02:07.130
> 
> 标签：java, spring-mvc

当我在我的网站上更改一段内容的“所有者”时，我收到如下所示的错误。我很困惑为什么我会收到这个错误。似乎它正在尝试更改项目本身的 ID。一切看起来都正确......我是否在所有正确的地方寻找？

**错误**

```
Caused by: org.hibernate.HibernateException: identifier of an instance of com.site.model.User was altered from 13 to 72 
```

**我的 JSP**

当我更改为时`owner.id`，`owner`我得到一个字符串/整数不匹配。

```
 <label class="formLabel">Owner <img src="/images/s.gif" class="required"/><br/>
            <form:select path="owner.id" id="owner">
                <form:options items="${owners}" itemValue="id" />
            </form:select>
        </label> 
```

**我的服务**

```
 Content cm = em.merge(content);
    em.flush(); 
```

**内容模型**

```
@NotNull
@JoinColumn(name = "owner_id", referencedColumnName = "id")
@ManyToOne
@IndexedEmbedded
@JsonIgnore
private User owner; 
```

**用户模型**

```
@Id
@Basic(optional = false)
@Column(name = "id")
@GeneratedValue(strategy= GenerationType.IDENTITY)
@JsonIgnore
private Integer id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:09:39.980

您正在告诉 spring使用从 JSP`id`中获取的不同值覆盖 User 对象上的字段。`id`如果要更改所有者，则需要获取作为新所有者的整个 User 对象，并将引用更改为在父记录上指向它。您不能只更改现有对象的 ID 号。

有很多方法可以做到这一点，通常`PropertyEditor`使用 a ，因此您将数字直接绑定到值“所有者”并提供一个类来告诉 spring 如何将数字转换为 User 的实例。

在表单上，​​绑定到 'owner' 而不是 'id'：

```
<form:select path="owner" id="owner">
  <form:options items="${owners}" itemValue="id" />
</form:select> 
```

在控制器中，初始化一个属性编辑器：

```
@InitBinder
private void registerPropertyEditor(DataBinder binder) {
    binder.registerCustomEditor(User.class, "owner", new UserPropertyEditor(userService));
} 
```

然后创建一个类，告诉 spring 如何将 ID 号转换为用户：

```
public class UserPropertyEditor extends PropertyEditorSupport {

    private UserService userService;

    public UserPropertyEditor(UserService userService) {
        this.userService = userService;
    }

    @Override
    public String getAsText() {
        //Handle null value, value of incorrect type, etc here

        return String.valueOf(((User) getValue()).getId());
    }

    @Override
    public void setAsText(String id) throws IllegalArgumentException {
        //handle empty string, number format exception, etc

        User user = userService.getUser(integerId);

        setValue(user);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-27T03:50:12.487

我也面临这个问题。就我而言，我无法在 sla 字段中输入数字**7 。**但是，如果我更改**7**以外的值，则进程正常运行。出现的错误信息如`.... was altered from 7 to null`

我尝试了很多方法，例如我们将类型数据从 Integer 更改为 Long，创建一个新模型，但问题仍然存在。

直到我更改模型的属性之一，例如：

```
@Column(name = "sla")
private String sla; 
```

到 ：

```
@Column(name = "sla")
private String slavalue; 
```

维奥拉，问题解决了

# python - 使用 Python 3 的 readlines() 处理 Unicode 错误

> ID：10487563
> 
> 赞同：37
> 
> 时间：2012-05-07T19:02:39.787
> 
> 标签：python, python-3.x, text, encoding

我在阅读文本文件时不断收到此错误。是否可以处理/忽略它并继续？

> UnicodeEncodeError：“charmap”编解码器无法解码位置 7827 中的字节 0x81：字符映射到未定义。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-07T19:06:54.463

在 Python 3 中，在创建文件对象时传递一个适当的`errors=`值（例如`errors=ignore`or `errors=replace`）（假设它是`io.TextIOWrapper`-- 如果不是，请考虑将其包装在一个中！）；另外，考虑传递一个更有可能的编码比`charmap`（当你不确定时，`utf-8`总是一个很好的起点）。

例如：

```
f = open('misc-notes.txt', encoding='utf-8', errors='ignore') 
```

* * *

在 Python 2 中，该`read()`操作只返回字节；那么，诀窍是解码它们以将它们变成一个字符串（如果你这样做，实际上，需要字符而不是字节）。如果您对它们的真实编码没有更好的猜测：

```
your_string.decode('utf-8', 'replace') 
```

...替换未处理的字符，或

```
your_string.decode('utf-8', 'ignore') 
```

简单地忽略它们。

也就是说，最好找到并使用它们的*真实*编码（而不是猜测`utf-8`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:26:11.430

您应该使用编解码器打开文件，以确保文件被解释为 UTF8。

```
导入编解码器
fd = codecs.open(文件名,'r',encoding='utf-8')
数据 = fd.read()

```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-07T19:04:14.867

是的..你可以把它包在一个

```
try:
    ....
except UnicodeEncodeError: 
    pass 
```

# django - Django翻译复数不起作用

> ID：10487570
> 
> 赞同：2
> 
> 时间：2012-05-07T19:03:00.793
> 
> 标签：django, translation, osqa

我对 Django 很陌生。我在模板中有以下代码：

```
 {% blocktrans count answers.paginator.count as
 counter %}One Answer:{% plural %}{{counter}} Answers:{% endblocktrans %} 
```

以及 django PO 中的以下行（生成）

```
#: forum/skins/default/templates/question.html:149
#, python-format
msgid "One Answer:"
msgid_plural "%(counter)s Answers:"
msgstr[0] "Один ответ:"
msgstr[1] "%(counter)s ответа/-ов:" 
```

现在单数翻译正在工作，但复数不知何故不是......知道缺少什么吗？

不工作意味着输出是；

"Один ответ" 如果计数器为 1

如果计数器为 5，则为“5 个答案”

所以计数器正在工作。

谢谢，普伦

# mediaelement.js - 显示/隐藏 容器产生 pluginApi 错误 - mediaelement.js

> ID：10487575
> 
> 赞同：0
> 
> 时间：2012-05-07T19:03:35.070
> 
> 标签：mediaelement.js

我在一页上有两个视频元素，每个元素都在自己的 div 中。我有一组链接，每个链接都有一个显示/隐藏相应 div 的 jQuery click 事件。当这些 div 显示/隐藏时，Firefox 和 Chrome 会出现以下错误：

this.pluginApi.pauseMedia is not a function (FF) Uncaught TypeError: Object # has no method 'pauseMedia' (Chrome) this.pluginApi.playMedia is not a function (FF) Uncaught TypeError: Object # has no method 'playMedia' (铬合金）

当我从它们的容器 div 中删除视频元素并使用 jQuery 单击事件来暂停/播放时，不会发生错误。

[使用 div 容器的演示](http://bit.ly/J8sNuC)

[没有 div 容器的演示](http://bit.ly/KAz2Vf)

有没有人有为 mediaelements.js 显示/隐藏视频容器的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:57:37.340

对于那些仍然感兴趣的人：我也遇到了这种行为，但有以下评论：

它只发生在 Flash 播放器上，而不是用于 mp4 的 html5 视频播放器。它不会发生在 IE 中

播放错误看起来像是时间问题，因为我可以通过以下方式解决它们：

```
$('#div1').show(function(){
        player1.play();
}); 
```

我还没有解决暂停错误

# c++ - C ++复制向量结构，但具有不同的对象

> ID：10487576
> 
> 赞同：0
> 
> 时间：2012-05-07T19:03:39.150
> 
> 标签：c++, vector

我有一个向量，`std::string`它代表另一个对象指针向量的结构。我想生成这个对象指针向量，如果有两个相同的对象，向量中的指针也是相同的。

不知道我刚才说的是什么意思？让我给你举个例子。假设我有`std::vector`一个`std::string`：

```
std::vector<std::string> names;
names.push_back(std::string("A"));
names.push_back(std::string("A"));
names.push_back(std::string("B"));
names.push_back(std::string("C"));
names.push_back(std::string("A")); 
```

现在让我们假设这些名称（`A`和`B`）`C`代表 an 的三个不同实例`Object`：

```
Object* ptr_A = new Object(1); // A
Object* ptr_B = new Object(2); // B
Object* ptr_C = new Object(3); // C 
```

我现在想生成包含指向 的指针的向量，`Object`其顺序与向量中的顺序相同`names`：

```
std::vector<Object*> objects;
objects.push_back(ptr_A);
objects.push_back(ptr_A);
objects.push_back(ptr_B);
objects.push_back(ptr_C);
objects.push_back(ptr_A); 
```

这样当两个名称相同时，指针也相同。

我将如何有效地做到这一点？请注意，我希望在执行此操作的函数内动态分配对象，以便以后可以使用该向量。

我将使用它根据名称从文件中读取对象，但我想防止生成多个基本相同的对象。

由于这是家庭作业，我还不能使用 C++11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:11:10.410

这会生成一个`lookup`对象，该对象将名称映射到分配的对象，然后`objects`使用基于 中的值的值填充向量`names`。 [简单的。](http://ideone.com/5oxuG)

```
typedef std::map<std::string, Object*>::iterator iterator;
typedef std::pair<std::string, Object*> value_type;
std::map<std::string, Object*> lookup;  //or maybe unordered_map
lookup.insert(value_type("A", ptr_A));
lookup.insert(value_type("B", ptr_B));
lookup.insert(value_type("C", ptr_C));

for(int i=0; i<names.size(); ++i) {
    iterator iter = lookup.find(names[i]);
    if (iter == lookup.end())
         throw std::runtime_error("invalid name in file");
    objects.push_back(iter->second);
} 
```

如果您想从文件中生成名称和对象，您可以执行类似的操作来一次创建名称、对象以及它们之间的映射。我假设您还必须做其他事情，我不知道您的文件格式。

```
std::string newname;
std::map<std::string, Object*> lookup;  //or maybe unordered_map
while(myfile >> newname)
    lookup[newname] = new Object(newname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:11:19.753

而不是使用 a `std::vector`，使用 a`std::map`包含的键`std::string`和值`Object*`

`std::map<std::string, Object*>`

不能将两个相同的键插入到映射中。如果尝试插入与先前键匹配的插入，则返回原始键值。当请求一个键时，返回相同的指针。

# ruby-on-rails-3 - gsub！Date.strptime 无法识别我的日期

> ID：10487579
> 
> 赞同：0
> 
> 时间：2012-05-07T19:03:49.233
> 
> 标签：ruby-on-rails-3, date, gsub

我正在尝试解析文件并替换一些日期/日期。

例如，我想改变

```
In a post on the band's blog last night (06.05.12) 
to 
In a post on the band's blog sunday night 
```

我正在尝试使用 gsub！这样做。

```
r.gsub!(/\blast night \(([0-3][0-9]\.[0-1][0-9]\.[0-9][0-9])\)/ei,Date.strptime('\1',"%d.%m.%y").strftime("%A").to_s + ' night') 
```

总是说无效日期，但是

```
r.gsub!(/\blast night \(([0-3][0-9]\.[0-1][0-9]\.[0-9][0-9])\)/ei,'\1') 
```

显示正确的日期为 06.05.12 和

```
mydate = '06.05.12'
r.gsub!(/\blast night \(([0-3][0-9]\.[0-1][0-9]\.[0-9][0-9])\)/ei,Date.strptime(mydate,"%d.%m.%y").strftime("%A").to_s + ' night') 
```

给我适当的回应。为什么在使用 Date.strptime 时用 \1 替换 mydate 不起作用？关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:03:18.800

您似乎尝试在日期函数中引用匹配组。但这不起作用。**仅**当您替换简单字符串时，该语法才可用。该`gsub`函数替换传递的字符串中的所有引用，但仅当它实际传递给函数时。您的代码相当于

```
replacement = Date.strptime('\1',"%d.%m.%y").strftime("%A").to_s + ' night'
r.gsub!(/\blast night \(([0-3][0-9]\.[0-1][0-9]\.[0-9][0-9])\)/ei, replacement) 
```

“替换”因此不能工作，因为`'\1'`它不是一个有效的日期。`strftime`gsub 替换仅适用于您的函数返回的字符串。但是，您可以使用自动设置匹配组的*魔术*匹配变量：

```
r.gsub!(/\blast night \(([0-3][0-9]\.[0-1][0-9]\.[0-9][0-9])\)/ei) {
  Date.strptime($1,"%d.%m.%y").strftime("%A").to_s + ' night'
} 
```

请注意，我在论点中写`$1`而不是`\1``strptime`

# xcode - Xib 视图控制器

> ID：10487589
> 
> 赞同：1
> 
> 时间：2012-05-07T19:04:31.247
> 
> 标签：xcode, viewcontroller

这可能是一个非常简单的问题，如果是，我深表歉意！

我有一个基于视图控制器的应用程序，我从 1 xib 移动到另一个使用

```
 mainviewcontroller = [[MainViewController alloc]  initWithNibName:@"MainViewController" bundle: [NSBundle mainBundle]]; 
    [self.view addSubview: mainviewcontroller.view]; 
```

当我返回到原始视图时，我只是使用

```
[self.view removeFromSuperview]; 
```

但我想重新调用 viewdidload 方法。我怎样才能做到这一点而不必再次创建视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:24:56.677

`addSubview`不是让新的视图控制器接管并呈现其视图集的正确方法。

改用这样的东西：

```
MainViewController *mainviewcontroller = [[MainViewController alloc]  initWithNibName:@"MainViewController" bundle: [NSBundle mainBundle]]; 
[self presentViewController:mainviewcontroller animated:YES completion:completion:^{}];
[mainviewcontroller release]; 
```

如果您正在使用情节提要，您始终可以创建一个转场并以编程方式调用它或通过情节提要本身进行设置。

为了支持 iOS 5 之前的设备`UIViewController`，还有一种较旧的方法（在 iOS5 中已弃用，并被我最初的建议所取代）。

```
- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated 
```

# objective-c - iOS：transitionFromView - 'toView' 中的标签未显示

> ID：10487591
> 
> 赞同：1
> 
> 时间：2012-05-07T19:04:35.117
> 
> 标签：objective-c, ios, animation, subview, uiviewanimationtransition

在 UIView 容器中的两个子视图之间切换时，我遇到了一个奇怪的错误。注意，这两个子视图是相同的视图控制器类型（相同的视图），唯一的区别是标签，它是由一个属性定义的。

从 box1 -> box2 切换（动画）时，box2 中的标签文本不显示。但是，如果我除了在 box2 上设置标签文本之外，还更改视图的背景颜色，则标签文本在动画后显示。

在我看来，当只定义标签文本时，绘制 box2 时出现问题。怎么来的？

**viewDidLoad**

```
// Define the to sub vies and the container
box1 = [[MyBoxViewController alloc] initWithNibName:@"MyBoxViewController" bundle:nil];
box2 = [[MyBoxViewController alloc] initWithNibName:@"MyBoxViewController" bundle:nil];
containerView = [[UIView alloc] initWithFrame:PercentageGroupView.frame];

[containerView addSubview:box1.view];
[self.view addSubview:containerView]; 
```

**视图将出现**

```
box1.title = "Box nr. 1";
box2.title = "Box nr. 2"; 
```

**分段控制已更改**

```
[UIView transitionFromView:box1.view
                    toView:box2.view
                  duration:1
                   options:UIViewAnimationOptionTransitionFlipFromBottom 
                completion:nil]; 
```

我忘记了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:47:43.693

所以，我设置了以下场景：

***视图控制器.h***

```
#import <UIKit/UIKit.h>
#import "MyBoxViewController.h"
@interface ViewController : UIViewController
@property (strong, nonatomic) MyBoxViewController *activeBox;
@property (strong, nonatomic) MyBoxViewController *box1;
@property (strong, nonatomic) MyBoxViewController *box2;
- (IBAction)SwitchViews:(id)sender;
@end 
```

***视图控制器.m***

```
#import "ViewController.h"
@implementation ViewController
@synthesize activeBox;
@synthesize box1;
@synthesize box2;
- (void)viewDidLoad {
    [super viewDidLoad];
    // Define the to sub views and the container
    [self setBox1:[[MyBoxViewController alloc] initWithNibName:@"MyBoxViewController" bundle:nil]];
    [[[self box1] view] setBackgroundColor:[UIColor blueColor]];
    [[[self box1] titleLabel] setText:@"Box Number 1"];
    [[[self box1] view] setFrame:CGRectMake(20, 20, 200, 200)];
    [self setBox2:[[MyBoxViewController alloc] initWithNibName:@"MyBoxViewController" bundle:nil]];
    [[[self box2] view] setBackgroundColor:[UIColor orangeColor]];
    [[[self box2] titleLabel] setText:@"Box Number 2"];
    [[[self box2] view] setFrame:CGRectMake(40, 40, 200, 200)];
    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 400, 400)];
    [containerView addSubview:[[self box1] view]];
    [self setActiveBox:[self box1]];
    [[self view] addSubview:containerView];
}
- (IBAction)SwitchViews:(id)sender {
    if ([self activeBox] == [self box1]) {
        // switch from 1 to 2
        [UIView transitionFromView:[[self box1] view]
                            toView:[[self box2] view]
                          duration:1
                           options:UIViewAnimationOptionTransitionFlipFromBottom 
                        completion:nil];
        [self setActiveBox:[self box2]];
    } else {
        // switch from 2 to 1
        [UIView transitionFromView:[[self box2] view]
                            toView:[[self box1] view]
                          duration:1
                           options:UIViewAnimationOptionTransitionFlipFromBottom 
                        completion:nil];
        [self setActiveBox:[self box1]];
    }
}
@end 
```

***MyBoxViewController.h***

```
#import <UIKit/UIKit.h>
@interface MyBoxViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *titleLabel;
@end 
```

***MyBoxViewController.m***

```
#import "MyBoxViewController.h"
@implementation MyBoxViewController
@synthesize titleLabel;
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

请注意，在我的 . 上`ViewController.xib`，我添加了一个`UIButton`绑定到`-(IBAction)SwitchViews:(id)sender`.

对我来说唯一突出的是，当我激活 时`[UIView transition...]`，我设置的框架会保持不变。我在您提供的代码中没有看到指定框架的任何地方。

除此之外，在我的代码中，我得到一个蓝色矩形 (20,20,200,200)，单击按钮将其翻转以显示橙色矩形 (40,40,200,200)。

这对你有帮助吗？

# java - Jersey Grizzly 宁静的服务器在 Linux 上抛出一个奇怪的 URISyntaxException

> ID：10487594
> 
> 赞同：0
> 
> 时间：2012-05-07T19:04:40.530
> 
> 标签：java, rest, https, glassfish, jersey

我创建了一个在 Win7 上运行良好的 Jersey-Grizzy-Server。但是在 Linux 上开始之后，我会得到一个奇怪的、总是重复的异常

```
java.lang.IllegalArgumentException: java.net.URISyntaxException: Expected hostname at index 8: https://:443/ 
```

，即使没有调用服务器。休息服务一直在工作。有人知道为什么会出现这个异常，或者如何开始调试 grizzly2 Httpserver？

服务器启动是这样实现的（简化）：

```
boolean https = true;
int port = 9960;
URI baseURI = UriBuilder.fromUri("http" + (https ? "s" : "") + "://0.0.0.0/").port(port).build();

//Jersey Service Config
final ResourceConfig rc = new UriExtensionsConfig(GcardApplication.getConfigPackages());

// create Grizzly Container
final HttpHandler handler = ContainerFactory.createContainer(HttpHandler.class, rc);

//do the ssl Config
SLEngineConfigurator ssl = configSSL(https);

HttpServer server = GrizzlyServerFactory.createHttpServer(baseURI, handler, https, ssl); 
```

有异常的日志：

```
INFO: Initiating Jersey application, version 'Jersey: 1.11 12/09/2011 10:27 AM'
May 7, 2012 8:20:45 PM org.glassfish.grizzly.http.server.NetworkListener start
INFO: Started listener bound to [0.0.0.0:9960]
May 7, 2012 8:20:45 PM org.glassfish.grizzly.http.server.HttpServer start
INFO: [HttpServer] Started.
Crm WS Server started at https://localhost:9960/

Hit Ctrl C to stop the server ...
May 7, 2012 8:20:46 PM org.glassfish.grizzly.http.server.HttpHandler doHandle
SEVERE: service exception
java.lang.IllegalArgumentException: java.net.URISyntaxException: Expected hostname at index 8: https://:443/
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.getBaseUri(GrizzlyContainer.java:226)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer._service(GrizzlyContainer.java:195)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.service(GrizzlyContainer.java:185)
    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
    at org.glassfish.grizzly.http.server.HttpHandlerChain.service(HttpHandlerChain.java:195)
    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:158)
    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:286)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:223)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:155)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:134)
    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:78)
    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:827)
    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:103)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:111)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:55)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:131)
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:508)
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:488)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.URISyntaxException: Expected hostname at index 8: https://:443/
    at java.net.URI$Parser.fail(URI.java:2810)
    at java.net.URI$Parser.failExpecting(URI.java:2816)
    at java.net.URI$Parser.parseHostname(URI.java:3352)
    at java.net.URI$Parser.parseServer(URI.java:3198)
    at java.net.URI$Parser.parseAuthority(URI.java:3117)
    at java.net.URI$Parser.parseHierarchical(URI.java:3059)
    at java.net.URI$Parser.parse(URI.java:3015)
    at java.net.URI.<init>(URI.java:662)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.getBaseUri(GrizzlyContainer.java:223)
    ... 20 more
May 7, 2012 8:20:49 PM org.glassfish.grizzly.http.server.HttpHandler doHandle
SEVERE: service exception
java.lang.IllegalArgumentException: java.net.URISyntaxException: Expected hostname at index 8: https://:443/
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.getBaseUri(GrizzlyContainer.java:226)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer._service(GrizzlyContainer.java:195)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.service(GrizzlyContainer.java:185)
    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
    at org.glassfish.grizzly.http.server.HttpHandlerChain.service(HttpHandlerChain.java:195)
    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:163)
    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:158)
    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:286)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:223)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:155)
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:134)
    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:78)
    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:827)
    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:103)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:111)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:55)
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:131)
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:508)
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:488)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.URISyntaxException: Expected hostname at index 8: https://:443/
    at java.net.URI$Parser.fail(URI.java:2810)
    at java.net.URI$Parser.failExpecting(URI.java:2816)
    at java.net.URI$Parser.parseHostname(URI.java:3352)
    at java.net.URI$Parser.parseServer(URI.java:3198)
    at java.net.URI$Parser.parseAuthority(URI.java:3117)
    at java.net.URI$Parser.parseHierarchical(URI.java:3059)
    at java.net.URI$Parser.parse(URI.java:3015)
    at java.net.URI.<init>(URI.java:662)
    at com.sun.jersey.server.impl.container.grizzly2.GrizzlyContainer.getBaseUri(GrizzlyContainer.java:223)
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:36:39.317

`https://:443/`不是有效的 URL - 没有主机名。

从您的代码中，我看到您致电`UriBuilder.fromUri("https://0.0.0.0/")`

这里真的`"0.0.0.0"`是一个有效值吗？

检查命令的输出`hostname`和`domainname`；他们应该返回有用的值（`domainname`不是那么重要，但如果它有一些有用的价值会更好）。

另请参阅此答案如何确定自己的IP地址：[如何通过Java获取Linux上计算机的IP？](https://stackoverflow.com/questions/901755/how-to-get-the-ip-of-the-computer-on-linux-through-java)

**[编辑]**您可能正在查看代码中的错误位置。在构造函数中设置断点`URISyntaxException`并找出损坏的 URI 的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:53:17.023

问题的根源是 ReversProxys Healthcheck 的配置，它具有以下发送字符串

```
GET / HTTP/1.1\r\nHost: \r\nConnection: close\r\n\r\n 
```

我们必须将获取请求更正为

```
GET https://servername:9960/ HTTP/1.1\r\nHost: originalservername\r\nConnection: close\r\n\r\n 
```

# ruby-on-rails - Ruby on Rails - 无法识别控制器更改

> ID：10487609
> 
> 赞同：0
> 
> 时间：2012-05-07T19:06:13.463
> 
> 标签：ruby-on-rails, tomcat

我似乎遇到了一个问题，我在`Controller`课堂上对一个方法进行了更改，并且它似乎没有被`Tomcat`.

我试过把`debug`它放进去，我什至改变了方法的名字，作为最后的手段——我重命名了`Controller`我们机器上的源文件`Linux`，但原来的代码似乎一直在运行。然而，我不知道它在哪里得到代码。我假设某些东西被缓存在某处？

我已经尝试重新启动`Tomcat`服务器，并刷新`Mozilla Browser`（Cntr - F5）上的缓存，但它似乎继续运行旧代码。如果它运行修改后的代码，它应该已经崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:10:25.337

Tomcat 不运行 Rails。我猜想tomcat正在作为将请求转发到rails的代理运行。

在你的系统上做一个`ps aux`（什么是操作系统？）并寻找一个进程，`rails`或者，如果失败，`ruby`.

# java - 创建选择 JPQL 查询抛出异常

> ID：10487618
> 
> 赞同：0
> 
> 时间：2012-05-07T19:06:55.433
> 
> 标签：java, jquery, hibernate, jpa

我有两个对象

```
Person(long id, String name, PersonInfo info) 
```

和

```
PersonInfo(long id, String email, String lastname, in age) 
```

现在我尝试创建一个`javax.persistence.Query`

我尝试创造`select to person where personinfo.email="somemail"`

我试试

```
String queryString="select Person from Person p where p.PersonInfo._email='somemail'";
Query query=emf.createQuery(queryString);
List resultList = query.getResultList(); 
```

但我得到了这个例外：

```
java.lang.IllegalArgumentException: org.hibernate.QueryException: could not resolve property: PersonInfo of: Entities.Person [select Person from Entities.Person p where p.PersonInfo._email='somemail'] [Ljava.lang.StackTraceElement;@748e6591 
```

我错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:40:22.787

下面的查询字符串呢：

```
String queryString="select p from Person p where p.personInfo.email='somemail'"; 
```

# jquery - 使用 Popcorn + jQuery 制作动画

> ID：10487619
> 
> 赞同：5
> 
> 时间：2012-05-07T19:06:59.903
> 
> 标签：jquery, html, animation, video, popcornjs

我想使用 Popcorn.js，这对于管理视频来说似乎非常方便。我现在使用脚注方法，一切正常。

```
 example.footnote({
       start: 2,
       end: 6,
       text: "Pop!",
       target: "layer"
     }); 
```

我想为使用 jQuery 创建的脚注设置动画（例如，我希望脚注淡入/淡出）。

你将如何管理它？我不确定我是否可以混合使用 jQuery 和 Popcorn，而且我找不到那么多文档……我唯一的想法是用 jQuery 检查我的#layer div 中是否有一些文本，然后对其进行动画处理，但我'不确定这是否是好方法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:57:41.277

按原样使用 Popcorn 脚注插件并没有特别好的方法。它只是根据需要切换`.style.display`脚注上的属性，并且没有任何实用的方法来挂钩它。

但是，脚注插件很简单，您可以复制它并制作一个具有您想要的行为的新插件。^(从 Popcorn 1.2 1)[中插件的源代码开始](https://raw.github.com/mozilla/popcorn-js/v1.2/plugins/footnote/popcorn.footnote.js)工作，我们只需要更改几行以使它们淡入淡出：

```
(function ( Popcorn ) {
  Popcorn.plugin( "footnoteAnimated", { // <---
  _setup: function( options ) {

    var target = document.getElementById( options.target );

    options._container = document.createElement( "div" );
    options._container.style.display = "none";
    options._container.innerHTML  = options.text;

    if ( !target && Popcorn.plugin.debug ) {
      throw new Error( "target container doesn't exist" );
    }
    target && target.appendChild( options._container );
  },

  start: function( event, options ){
    $( options._container ).fadeIn(); // <---
  },

  end: function( event, options ){
    $( options._container ).fadeOut(); // <---
  },
  _teardown: function( options ) {
    document.getElementById( options.target ) && document.getElementById( options.target ).removeChild( options._container );
  }
});

})( Popcorn ); 
```

将其包含在您的项目中，然后就可以了。使用您的示例（[jsfiddle](http://jsfiddle.net/PPCEr/)）：

```
Popcorn("#video").footnoteAnimated({
  start: 2,
  end: 6,
  text: "Pop!",
  target: "target"
}); 
```

[^(1.)我删除了 Butter 清单和注释以节省空间。如果您需要它们，您可以在上面链接的原始源中找到它们。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T23:45:14.323

您还可以使用 .code 插件并在那里添加您的 jQuery 调用，这对我有用：

[http://popcornjs.org/popcorn-docs/plugins/#Code](http://popcornjs.org/popcorn-docs/plugins/#Code)

# ember.js - 在 ViewState 中调用 this._super() 的正确方法是什么？

> ID：10487620
> 
> 赞同：1
> 
> 时间：2012-05-07T19:07:03.463
> 
> 标签：ember.js

我有以下状态管理器：

```
App.wrapperView = Em.ContainerView.create();
App.wrapperView.append();

App.states = Em.StateManager.create({
    rootView: App.wrapperView,
    initialState: "loading",
    loading: Em.ViewState.create({
        view: App.LoadingView,
        enter: function() {
            this._super()  // _super is not defined.
            // other stuff goes here
        }
    })
}); 
```

因此，我无法保持添加行为。

我应该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:51:44.187

```
enter: function(manager, transition) {
  this._super(manager, transition);
} 
```

更多信息在这里：[http ://docs.emberjs.com/#doc=Ember.StateManager&src=false](http://docs.emberjs.com/#doc=Ember.StateManager&src=false)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T15:36:11.203

我通常这样做：

`this._super(...arguments);`

它减少了打字并被转换为

`this._super.apply(this, arguments);`

# jquery - 提供上下文元素时，jquery过滤器不起作用

> ID：10487621
> 
> 赞同：0
> 
> 时间：2012-05-07T19:07:05.503
> 
> 标签：jquery

[非常简单的 JSFiddle 演示了问题](http://jsfiddle.net/PguVw/1/)（您需要查看调试控制台，因为`console.log`用于演示问题）。第二个 console.log 语句为空。但是，如果我`el`从以下行中删除，代码将起作用：

`var items = $('li[data-level="2"]', el);`

使它变成：

`var items = $('li[data-level="2"]');`

然后代码工作。谁能解释这是为什么？不知道为什么声明行`el`会丢失，它在 JSFiddle 中为我显示，但这是 JavaScript 面板中的所有代码：

```
$(document).ready(function() {
    var el = $('ul');
    var items = $('li[data-level="2"]', el);
    console.log(items);
    var visible = items.filter(':visible');
    console.log(visible);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:13:14.377

您将所有`li`元素设置为`display:none`，这就是`el.filter(':visible')`返回空集合的原因。我不确定我在这里看到了*问题*。

jQuery 的`$.filter`方法将返回集合中与传递给过滤器的选择器**匹配的所有项目。**因此，如果我们要选择所有列表项和强项：

```
$("li, strong"); 
```

然后过滤它，使我们只有列表项：

```
$("li, strong").filter("li"); 
```

我们的结果只会是列表项。在您的情况下，您创建了一个无序列表，其中包含三个隐藏的列表项。您已经选择了所有这些，然后尝试过滤它们以仅查看那些是`:visible`，但是由于您将它们全部隐藏`display:none`在 CSS 中，因此结果集合将为空。

jQuery 按预期工作。

# eclipse - 覆盖eclipse属性视图

> ID：10487624
> 
> 赞同：1
> 
> 时间：2012-05-07T19:07:16.713
> 
> 标签：eclipse, swt, jface, treeviewer

我真的需要帮助。我在这里感到震惊。我想覆盖 eclipse 属性视图并为 swt 中的每个节点显示我的属性`Tree`。需要明确的是，我没有使用 JFace `TreeViewer`。我使用 SWT 实现了我的整个项目`Tree`。我在使用`TreeViewer`. 我试图将 转换`Tree`为`TreeViewer`，但显示了根级别的所有节点，但看不到它们的子节点。我可以使用树覆盖属性视图吗？如果不是那么如何解决`TreeViewer`我上面提到的问题？谢谢托尔

# security - $$$，在与 Android/iOS 应用程序的客户端/服务器关系中使用 AppEngine 的安全问题

> ID：10487625
> 
> 赞同：0
> 
> 时间：2012-05-07T19:07:20.217
> 
> 标签：security, google-app-engine

我正在开发一个智能手机应用程序，它在服务器端发送用户信息（用户密码验证，此人已完成任务 X，在链接 Y 上传 YouTube 视频，属于 Z 组，已验证/未验证地理位置）到服务器进行存储。

我的问题是双重的：考虑到 1,000 个很少并发但仍然活跃的用户的最大潜力，AppEngine 是否是一个不错的选择？我的目标是最多支付 9 美元/月的费用，但整个网络都在担心超过这个费用是多么容易。

另外，在将数据从手机传输到应用程序时，除了使用 https 连接，我还需要解决哪些安全问题？

顺便说一句，我计划将 Go 用于 AppEngine 部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:42:14.553

成本实际上取决于您的应用程序在做什么。

Google App Engine 对大部分服务收费。请参阅[配额文档](https://developers.google.com/appengine/docs/quotas)以查看每个服务有多少免费配额，以及管理控制台中的配额详细信息屏幕。

# javascript - HTML5 本地存储错误

> ID：10487630
> 
> 赞同：1
> 
> 时间：2012-05-07T19:07:46.723
> 
> 标签：javascript, html, local-storage

我正在尝试检查这是否是用户第一次访问我的应用程序。所以我检查本地存储中的计数是否为空，如果是则用户是新用户。但是，下面的代码停在 str_count = localStorage.getItem("count"); 在此之后没有行将运行。这里有什么问题？如果用户是新用户，则本地存储中不会有“计数”，但它应该只返回 null 而不是崩溃。

```
var count = 0;
str_count = localStorage.getItem("count");
if (str_count == null || str_count == "null")
{
    //do something
} 
else 
{
    count = parseInt(str_count);
            count++;
            localStorage.setItem("count", count);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:55:54.503

浏览器是否支持 localStorage - 您可以在尝试获取值之前检查该功能：

```
var str_count = 0;
if (window.localStorage) {
    str_count = localStorage.getItem('count');
} 
```

# c# - 按联系人 ID 过滤扩展属性

> ID：10487631
> 
> 赞同：2
> 
> 时间：2012-05-07T19:07:51.643
> 
> 标签：c#, exchangewebservices, extended-properties

使用此代码，我可以获得具有特定显示名称的联系人的扩展属性：

```
foreach(Contact c in contacts)
{
  // some code...
  view.PropertySet = new PropertySet(BasePropertySet.IdOnly, properties);
  filter = new SearchFilter.IsEqualTo(FolderSchema.DisplayName, c.DisplayName);
  items = service.FindItems(folderId, filter, view);
} 
```

我想过滤而不是过滤，`DisplayName`但`Contact.Id`我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:42:34.537

要[`Contact.Id`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.item.id%28v=exchg.80%29)使用[`ItemSchema.Id`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.itemschema.id%28v=exchg.80%29)下面给出的搜索...

```
filter = new SearchFilter.IsEqualTo(ItemSchema.Id, c.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:23:30.823

这就是我最后所做的，我没有找到更好的解决方案。我得到所有具有相同名称的联系人并遍历它们以找到正确的联系人。

```
 foreach (Item item in items.Items)
        {
            foreach (var ext in item.ExtendedProperties)
            {
                // check if the extended property is from this contact
                if (c.Id.ChangeKey == item.Id.ChangeKey)
                {
                    extendedProperties.Add(ext);
                }
            }
        } 
```

# html - 表格布局的 css

> ID：10487636
> 
> 赞同：-1
> 
> 时间：2012-05-07T19:08:07.270
> 
> 标签：html, css

我创建了一个表格，萤火虫显示了这样的东西。我希望颜色是左列中的整个 div 标签

```
<table style="width:100%;">
<tr><td style="vertical-align: top;">
<div style="float:right;background:silver;width:150px;height:300px;position:relative;">
</div></td>
<td>
<div>
 my table....

 blah blah....
</div>
</td></tr>
</table> 
```

我的桌子看起来像这样。

![在此处输入图像描述](../Images/7ac390316d56f9267ba2eadd4a513e8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:29.620

> 我希望颜色是左列中的整个 div 标签

颜色**适用**于“整个 div 标签”，但 DIV 的大小不适合列的尺寸，我认为这是您想要的。

## 选项

*   不要浮动`DIV`. `display:block`这将使用提供 100% 宽度的默认布局。然后，您可以将其高度设置为 100% 或特定高度：http: [//jsfiddle.net/QCKMP/1/](http://jsfiddle.net/QCKMP/1/)。请注意，这将需要在表格单元格或 DIV 上设置明确的高度。

*   或者，直接在表格单元格上设置背景颜色。

*   更好的选择，完全删除表格并使用`DIVs`（或其他更多语义元素，如`NAV`and `ARTICLE`）进行布局。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T19:20:05.327

尝试这样的事情

```
 <html>
        <body >
        <table style="width:100%; border:1px solid red;">
        <tr><td style="vertical-align:top; float:left; padding-left:20px; border:1px solid red">
        <div style="float:right;background:silver;width:150px;height:300px;position:relative;">
        </div></td>
        <td>
        <div>
         my table....
         blah blah....
        </div>
        </td></tr>
        </table>
        </body>
        </html> 
```

**结帐 jsfiddle**：http: [//jsfiddle.net/Q4vS8/](http://jsfiddle.net/Q4vS8/)

# magento - 优惠券代码解锁免费送货（magento）

> ID：10487638
> 
> 赞同：0
> 
> 时间：2012-05-07T19:08:30.870
> 
> 标签：magento

我正在寻找一种在前端解锁免费送货的方法。

通过代码调整，我们现在始终在后端显示这一点。但不是在前端。

我们想要的是，如果用户输入优惠券代码，他们选择免费运送的选项会显示在后端。

我需要将什么代码拉入运输模板以添加一个 if 语句，如果输入了某些优惠券代码，则显示免费送货

*   （解决方法）目前免费送货优惠券代码不能与其他优惠券代码结合使用 10 美元折扣

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:53:44.667

第一步是使用您所需的优惠券代码创建购物车价格规则。如果您只想对订单应用免费送货，您可以将其设置为规则中的操作。

*但是*，如果您只想在应用此折扣时显示免费送货选项，请不要对规则执行任何操作，而是使用`Mage::getSingleton('checkout/session')->getQuote()->getCouponCode();`在结帐模板中检查应用的代码。

我刚刚在 1.7 中使用此代码进行了快速测试，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:04:48.203

已在以下位置进行了一些编码

[https://github.com/seansan/Magento_SNH_extensions](https://github.com/seansan/Magento_SNH_extensions)

# java - 不确定我的 10 个线程在启动时是否正在读取相同的 .txt 文件

> ID：10487641
> 
> 赞同：2
> 
> 时间：2012-05-07T19:08:45.643
> 
> 标签：java, multithreading

我的 java 类启动时启动了 10 个线程，它们查看目录并开始查找文件。在我的一种方法中，我将 .txt 文件扩展名更改为 .working ，这表明文件当前正在处理中。当我的 java 类被调用或启动时，我有时会看到只有 5 个文件正在处理，因为它们的扩展名是 .working 。请让我知道我应该如何确保没有 2 个线程正在调用同一个 .txt 文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:10:35.527

最简单的方法是在*一个*线程中读取文件列表，然后使用线程安全的生产者/消费者队列（例如[`ArrayBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)）发布这些“要处理的文件”。然后这十个线程将全部从同一个队列中取出项目，这确保没有项目被处理两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:12:34.660

您可能会遇到类似于以下伪代码的竞争条件。多个线程将进行存在测试，然后尝试重命名并处理*同一*文件。

```
File file = new File("file.txt");
File working = new File("file.working");
if (file.exists()) {
   // race condition may happen at this point
   file.renameTo(working);
   processWorking(working);
} 
```

您应该围绕测试同步并重命名。就像是：

```
private final Object lockObject = new Object();
...

boolean process = false;
// lock around the test and the rename
synchronized (lockObject) {
    if (file.exists()) {
       file.renameTo(working);
       process = true;
    }
}
// process the file outside of the lock
if (process) {
    processWorking(working);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:11:53.840

您可以在线程程序中使用以下代码。

```
 try {
        // Get a file channel for the file
        File file = new File("filename");
        FileChannel channel = new RandomAccessFile(file, "rw").getChannel();

        // Use the file channel to create a lock on the file.
        // This method blocks until it can retrieve the lock.
        FileLock lock = channel.lock();

        // Try acquiring the lock without blocking. This method returns
        // null or throws an exception if the file is already locked.
        try {
            lock = channel.tryLock();
        } catch (OverlappingFileLockException e) {
            // File is already locked in this thread or virtual machine
        }

        // Release the lock
        lock.release();

        // Close the file
        channel.close();
    } catch (Exception e) {
    } 
```

# facebook - FQL：选择给定页面发布的本周事件

> ID：10487642
> 
> 赞同：0
> 
> 时间：2012-05-07T19:08:47.017
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想做类似的事情：

```
select name from event where creator = 153957741360676 
```

但是列创建者不可索引..那我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:16:34.273

您可以通过查询两个表`event_member`和来检索此类信息`event`：

```
SELECT name FROM event WHERE eid IN (
  SELECT eid from event_member WHERE uid = me()
) AND creator = me() 
```

**更新：**
由于您谈到由页面创建的事件，您需要使用页面的 id 而不是`me()`：

```
SELECT name FROM event WHERE eid IN (
  SELECT eid from event_member WHERE uid = 153957741360676
) AND creator = 153957741360676 
```

注意事项（见[`event`表格文档](https://developers.facebook.com/docs/reference/fql/event/)）：

> 从 7 月 5 日开始，即使是公共活动也需要访问令牌。

# ienumerable - asp.net mvc3 webgrid 显示错误

> ID：10487646
> 
> 赞同：-1
> 
> 时间：2012-05-07T19:09:00.150
> 
> 标签：ienumerable

以下代码在 IEnumerable 转换问题中引发错误。如果我错过了从控制器到视图的一些转换，请指导我。

控制器代码

```
 public ActionResult Index()
        {
            DataClasses1DataContext db = new DataClasses1DataContext();
            var kk = (from x in db.tblTests select x).ToList();
            return View(kk);
        } 
```

查看代码

```
@model MvcApplication4.Models.sampleDoamin

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

@{

  var grid = new WebGrid(Model, defaultSort:"name");

}

@grid.GetHtml() 
```

型号代码

```
public class sampleDoamin
    {
        public int id { get; set; }
        public string name { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:48.547

您将视图声明为采用 a `sampleDomain`，但您将其传递给`List<T>`某种未知类型。
那是行不通的。

# c# - c#：如何使用ebay的FindingAPI根据关键字获取所有项目的url

> ID：10487647
> 
> 赞同：0
> 
> 时间：2012-05-07T19:09:05.417
> 
> 标签：c#, ebay-api

我正在使用下面的代码，使用 Ebay 的 FindingAPI 来获取 Ebay 匹配关键字的所有项目链接。在这种情况下，“gruen watch”是关键字。此代码不显示超过 100 个项目链接。如何修改它以显示所有项目链接？

**我已经替换了我原来的appid

程序.cs

```
namespace ConsoleApplication1
{

class Program
{

    static void Main(string[] args)
    {

        TextWriter tw = new StreamWriter("link.txt");
        using (FindingServicePortTypeClient client = new FindingServicePortTypeClient())
        {

            MessageHeader header = MessageHeader.CreateHeader("My-CustomHeader", "http://www.mycustomheader.com", "Custom Header");
            using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
            {

                OperationContext.Current.OutgoingMessageHeaders.Add(header);
                HttpRequestMessageProperty httpRequestProperty = new HttpRequestMessageProperty();
                httpRequestProperty.Headers.Add("X-EBAY-SOA-SECURITY-APPNAME", "MY-APP-ID");
                httpRequestProperty.Headers.Add("X-EBAY-SOA-OPERATION-NAME", "findItemsByKeywords");
                httpRequestProperty.Headers.Add("X-EBAY-SOA-GLOBAL-ID", "EBAY-US");
                OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;

                FindItemsByKeywordsRequest request = new FindItemsByKeywordsRequest();
                request.keywords = "gruen watch";

                PaginationInput pagination = new PaginationInput();
                pagination.entriesPerPageSpecified = true;
                pagination.entriesPerPage = 250;
                pagination.pageNumberSpecified = true;
                pagination.pageNumber = 10;
                request.paginationInput = pagination;

                FindItemsByKeywordsResponse response = client.findItemsByKeywords(request);

                foreach (var item in response.searchResult.item)
                {

                    //Console.WriteLine(item.title);
                    tw.WriteLine(item.viewItemURL.ToString());
                    Console.WriteLine(item.viewItemURL.ToString());

                }

            }

        }

        tw.Close();

        Console.ReadKey();

    }

} 
```

app.config 在[这里](http://codepad.org/ZeN9L8ZN)

这是我所做的解决方案：

```
namespace ConsoleApplication1

{ 

class Program

{

    static void Main(string[] args)

    {

        TextWriter tw = new StreamWriter("1001.txt");

        using (FindingServicePortTypeClient client = new FindingServicePortTypeClient())

        {

            MessageHeader header = MessageHeader.CreateHeader("My-CustomHeader", "http://www.mycustomheader.com", "Custom Header");

            using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))

            {

                OperationContext.Current.OutgoingMessageHeaders.Add(header);

                HttpRequestMessageProperty httpRequestProperty = new HttpRequestMessageProperty();

                httpRequestProperty.Headers.Add("X-EBAY-SOA-SECURITY-APPNAME", "MYAPPID");

                httpRequestProperty.Headers.Add("X-EBAY-SOA-OPERATION-NAME", "findItemsByKeywords");

                httpRequestProperty.Headers.Add("X-EBAY-SOA-GLOBAL-ID", "EBAY-US");

                OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;

                FindItemsByKeywordsRequest request = new FindItemsByKeywordsRequest();

                request.keywords = "gruen watch";

                FindItemsByKeywordsResponse check = client.findItemsByKeywords(request);

                int totalEntries = check.paginationOutput.totalEntries;

                int cnt = 0;

                int totalPages = (int)Math.Ceiling((double)totalEntries/100.00);

                bool flag = true;

                for (int curPage = 1; curPage <= totalPages; curPage++)

                {

                    PaginationInput pagination = new PaginationInput();

                    pagination.entriesPerPageSpecified = true;

                    pagination.entriesPerPage = 100;

                    pagination.pageNumberSpecified = true;

                    pagination.pageNumber = curPage;

                    request.paginationInput = pagination;

                    FindItemsByKeywordsResponse response = client.findItemsByKeywords(request);

                    foreach (var item in response.searchResult.item)

                    {

                        Console.WriteLine(item.viewItemURL.ToString());

                        tw.WriteLine(item.viewItemURL.ToString());

                    }

                }

            }

        }

        tw.Close();

        Console.WriteLine("end");

        Console.ReadKey();

    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:19:23.127

默认情况下，响应返回的第一页数据最多为 100 项。您可以使用 更改此值`paginationInput`。

在[findItemsByKeywords 的官方 eBay 文档中](http://developer.ebay.com/devzone/finding/callref/finditemsbykeywords.html)，有一个标题为**Paginating the Results**的部分，它准确地告诉您您需要知道的内容：

> 使用`paginationInput`及其子元素来控制在结果集中返回与搜索条件匹配的项目集。用于`paginationInput`将返回的项目划分为数据的子集或“页面”：
> 
> **`paginationInput.entriesPerPage`**指定任何给定请求返回的最大项目数
> 
> **`paginationInput.pageNumber`**指定在当前调用中要返回的数据“页”
> 
> 默认情况下，响应返回的第一页数据最多为 100 项。以下示例显示如何返回第二页结果，每页最多包含 50 个项目：
> 
> `...&paginationInput.pageNumber=2&paginationInput.entriesPerPage=50...`
> 
> 在此示例中，假设至少有 100 个匹配项，则响应将包含匹配项 51 到 100。

# spring-mvc - 在 Spring MVC 中防止 XSS

> ID：10487648
> 
> 赞同：1
> 
> 时间：2012-05-07T19:09:07.290
> 
> 标签：spring-mvc, xss

我知道之前有人问过这个问题，但我想弄清楚如何防止我的 Spring MVC Web 应用程序受到 XSS 攻击。

1）我将以下内容添加到我的 web.xml

```
<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param> 
```

2) 在将表单命令对象中的每个属性保存到数据库之前，我是否还应该使用 Commons StringEscapeUtils.escapeHtml() ？我是否也需要在某个时候逃脱？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:54:21.360

即使默认情况下转义 html 会在许多情况下停止 XSS，但肯定在某些情况下它不起作用。在此处查看示例： [http](http://erlend.oftedal.no/blog/?id=124) ://erlend.oftedal.no/blog/?id= 124 我建议您查看 OWASP XSS 预防备忘单。它解释了何时需要使用不同的转义。关于 2 在将其放入数据库之前不要逃避。转义例程可能有错误，您不能确定每次都在相同的上下文中使用数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:08:49.373

我更喜欢您尝试 HDIV api 来确保您的应用程序的这种数据安全性。它可以防止对您的 Web 应用程序的这种和其他 7 种不同的可能攻击。我目前也在探索与 Spring Framework 一起使用的相同 API。

[点击此处查看 HDIV 主页。](http://hdiv.org/)

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T13:07:39.743

现在，我决定清理我的数据并删除所有 HTML 标记以避免 JavaScript 攻击。

我正在使用 Jsoup api 来做到这一点。

[http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)

# javascript - 如果表单提交，为什么我不能处理我的 ajax 函数？

> ID：10487652
> 
> 赞同：-1
> 
> 时间：2012-05-07T19:09:37.097
> 
> 标签：javascript, ajax, jquery

这是我的问题。我正在尝试验证表单并确保在允许表单提交之前用户名可用。我的所有功能都正常工作，包括我的 PHP 脚本检查用户名。但是我无法阻止表单在提交时提交。我得到的是我定义的 AJAX .error(message)。萤火虫报告

```
throw Components.Exception("prompt aborted by user", Cr.NS_ERROR_NOT_AVAILABLE); 
```

但是，当我调用 e.preventDefault(); 在 username_exists 函数之外，它会停止表单提交，并允许我在上述函数内部进行检查。我完全被难住了，希望你能帮忙。谢谢。

PS。我什至无法在该函数中执行简单的 alert()

```
$(function(){
    check_username_onsubmit();
});

function check_username_onsubmit(){
    $this = $('#username.registerForm');
    $('form.registerForm').submit(function(e){
        username_exists($this, function(data){
            if(data.found == 1){
                e.preventDefault();
                alert('Username Taken');
            }else{
                alert('Username Free');
            }
        });
        // e.preventDefault();
    });
}

function username_exists($this, callback){
    var username = $this.val();

    $.ajax({
        url : '../includes/Single Scripts/username_exist.php',
        data : {
            username : username 
        },
        type : 'POST',
        dataType : 'json',
        success : function(data){
            callback(data);
        }
    }).error(function(){
            alert('An error has occured');
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:34:30.273

提交，通过它的设计离开页面。AJAX，就其设计而言，不会离开页面。

如果您想在将表单发送到服务器之前使用 JavaScript 对其进行验证，那么请去掉提交按钮。单击时触发客户端验证脚本，如果通过，则执行 AJAX 调用。

```
$('#someForm').on('click','#myButton', {}, aValidationFunctionToCall);

aValidationFunctionToCall : function (event) {
    // validate stuff
    // show the user the error of their ways
    // or call your ajax
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:16:25.623

我会删除`<input type="submit">`并添加`<button id="send">`after `</form>`。

然后，执行以下操作：

```
$('#send').on('click', function () {
    var uname = $('#username.registerForm').val();
    username_exists(uname, function (data) {
        if (data.found == 1) {
            alert('Username Taken');
        } else {
            alert('Username Free');
            $('form.registerForm').submit();
        }
    });
}); 
```

**编辑：**另外：

```
function username_exists(username, callback) {
    $.ajax({
        url: '../includes/Single%20Scripts/username_exist.php',
        data: {
            'username': username
        },
        type: 'POST',
        dataType: 'json',
        success: function (data) {
            callback(data);
        }
    }).error(function () {
        alert('An error has occured');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:11:10.907

在 中`check_username_onsubmit()`，输入 a`return false;`它将阻止表单提交。

如果您已经知道这一点，那么开始检查以确保您正确地将您的 javascript 方法附​​加到您的提交事件或提交点击事件。该函数可能甚至没有被调用。

# adfs - 我是否需要一个用于外部域名的 adfs-proxy 与用于内部 dns 的域名不同？

> ID：10487656
> 
> 赞同：0
> 
> 时间：2012-05-07T19:09:50.483
> 
> 标签：adfs

我们有一个用于广告的内部域名 foo.local。我们目前正在设置一个使用 adfs 进行身份验证的应用程序，并希望将 app.foo.com 和 adfs.foo.com 用于我们的 adfs。

如果我在 adfs.foo.local 上设置我的 adfs 实例，并在 adfs.foo.local 机器上创建第二个 Web 应用程序，它将使用带有 cn=adfs.foo.com 的 ssl 证书，这样就足够了，或者我需要一个 adfs 代理来完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:18:00.293

ADFS 的名称在内部和外部都必须相同。这是应用程序如何与 ADFS 交互的函数。

代理可以通过与内部（例如 Windows 集成身份验证）不同的身份验证机制（例如基于表单）轻松实现外部访问。如果您想在内部和外部使用相同的 AuthN 机制，您可以轻松地直接对 ADFS 服务器进行 NAT。

# ios - iOS：启动后设备方向事件永远不会到达

> ID：10487659
> 
> 赞同：1
> 
> 时间：2012-05-07T19:10:07.447
> 
> 标签：ios, opengl-es

我有一个 OpenGL 游戏需要了解设备的方向（即纵向与横向）。

API 看起来很简单......我的 ViewController 的相关部分是：

```
@implementation MyViewController

- (id)init
{
    ...

    // Get orientation events
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(didRotate:)
        name:@"UIDeviceOrientationDidChangeNotification" object:nil];
    ...
}

-(void)didRotate:(NSNotification*)notification 
{   
    NSLog(@"didRotate %d", orientation);
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    NSLog(@"shouldAutorotateToInterfaceOrientation %d", orientation);
    return YES;
}

@end 
```

发生的事情是我在启动期间接到了几个电话：

```
shouldAutorotateToInterfaceOrientation 3
shouldAutorotateToInterfaceOrientation 3
shouldAutorotateToInterfaceOrientation 3
shouldAutorotateToInterfaceOrientation 3
didRotate 4
shouldAutorotateToInterfaceOrientation 4
shouldAutorotateToInterfaceOrientation 4
didRotate 1
shouldAutorotateToInterfaceOrientation 1 
```

设置好 UIView 和 EAGLContext 之后，它开始渲染，一切看起来都很好，但是 shouldAutorotateToInterfaceOrientation 和 didRotate 再也不会被调用，无论我在玩游戏时旋转了多少手机。

发生这种情况我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:37:07.557

好吧，这有点尴尬……

原来纵向模式锁定已打开。

哦！

# javascript - 用于智能手机的动画 HTML 表格

> ID：10487669
> 
> 赞同：0
> 
> 时间：2012-05-07T19:10:31.290
> 
> 标签：javascript, html, css, smartphone

我正在尝试为我的 html 表格制作一个简单的动画。我正在使用 JQueries、JSON 和 knockoutjs 数据绑定提取信息并将其显示在 html 表/小部件中。到目前为止，我只显示 3 列（名称、位置和时间）。还有其他信息，但我将其放在单独的表格中。它的设置方式是，在主表上，单击要查看的特定项目的行，然后会弹出下一个表，其中包含该项目的所有信息（包括名称、位置和时间）。我希望像在智能手机上一样使用简单的“滑动”动画来动画从第一个表到下一个表的过渡。我希望它可以让任何智能手机都可以使用它。

以下是简化的 HTML 和 ViewModel 文件：

```
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="./lib/kockout-2.0.0.js" type="text/javascript"></script>
<script src="./lib/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="./lib/widgetstyle1.css" type="text/css"></script>
<body>
<div data-bind="if: showTable" id="left">
<table width="100%"><thead>
    <tr>
        <th><a href="#" data-bind="click: SortByName">Name</th>
        <th><a href="#" data-bind="click: SortByTimeObserved">Time</th>
        <th><a href="#" data-bind="click: SortByLocation">Location</th>
    </tr>
</thead>
    <tbody data-bind="template: { name: 'Widget', foreach: rows }">
    </tbody>
</table>
<script type="text/html" id="Widget">
    <tr data-bind="click: function() {
            Model.setSelectedEvent($data);
        }"
        <td data-bind="text Name"></td>
        <td data-bind="text Time"></td>
        <td data-bind="text Location"></td>
    </tr>
</script>
</div>

<div data-bind="if: showDetails">
<!-- The next table is just a header with a "back-button" to return to first table -->
<!-- The table after that shows the all the content for the selected item -->
<table width="100%">
    <td><button data-bind="click: function() {
        Model.setSelectedEvent(null);
    }">
        <img src="recources/BackArrow.png" />
    </button>
    </td>
    <td data-bind="text: SelectedEvent().Name"></td>
</table>
<table width="100%">
    <tr>
        <td style="text-align: left; width: 120px; font-size: 200%">Name: </td>
        <td style="text-align: left; font-size: 200%" data-bind="text: SelectedEvent().Name"></td>
    </tr>

<!-- I basically repeat this for all the additional information -->   

</div>
</table>

<script src="ViewModel.js" type="text/javascript"></script>
</body>
</html> 
```

以下是 viewmodel 文件中的大部分 javascript：

```
function Event(TimeObserved){ 
var self = this; 
self.TimeObserved = TimeObserved; 
} 

function TableViewModel(){ 
    var self = this; 
    self.sortColumn = ko.observable("TimeObserved"); 
    self.sortAscending = ko.observable(true); 

    // Editable/Initial Data
    self.rows = ko.observableArray([]);

    self.Checker = "Name"; 

    self.addRow = function(){ 
        self.rows.push(new Event("")); 
    }         

self.SortByName(){ 
    self.Checker = "Name";
    if(self.sortColumn == "Name") 
        self.sortAscending = !self.sortAscending; 
    else{ 
        self.sortColumn = "Name"; 
        self.sortAscending = true; 
    } 
    self.sorting(); 
    }); 
} 

self.SortByLocation(){ 
    self.Checker = "Location";
    if(self.sortColumn == "Location") 
        self.sortAscending = !self.sortAscending; 
    else{ 
        self.sortColumn = "Location"; 
        self.sortAscending = true; 
    } 
    self.sorting(); 
    }); 
}

self.SortByTimeObserved(){
    self.Checker = "TimeObserved" 
    if(self.sortColumn == "TimeObserved") 
        self.sortAscending = !self.sortAscending; 
    else{ 
        self.sortColumn = "TimeObserved"; 
        self.sortAscending = true; 
    } 
    self.sorting(); 
    }); 
} 

self.sorting = function(){ 
    if(self.Checker = "Name"){
        self.rows.sort(function(a,b){
            if(self.sortAscending() == true)
                return a.Name.toUpperCase() > b.Name.toUpperCase() ? -1 : 1;
            else
                return a.Name.toUpperCase() < b.Name.toUpperCase() ? -1 : 1;
        });
    }

    if(self.Checker = "TimeObserved"){ 
        self.rows.sort(function(a,b){ 
            if(self.sortAscending() == true) 
              for(self.TimeObserved in self.rows) 
                return a.TimeObserved > b.TimeObserved ? 1 : a.TimeObserved < b.TimeObserved ? -1 : 0; 
            else 
                return a.TimeObserved < b.TimeObserved ? 1 : a.TimeObserved > b.TimeObserved ? -1 : 0; 
        } 
    }

    if(self.Checker = "Location"){
        self.rows.sort(function(a,b){
            if(self.sortAscending() == true)
                return a.Location.toUpperCase() > b.Location.toUpperCase() ? -1 : 1;
            else
                return a.Location.toUpperCase() < b.Location.toUpperCase() ? -1 : 1;
        });
    } 

self.SelectedEvent = ko.observable();
self.showTable = ko.observable(true);
self.showDetails = ko.observable(false);

self.setSelectedEvent = function(ev){
    if(ev == null){
        self.SelectedEvent = ();
        self.showTable(true);
        self.showDetails(false);   
    }
    else{
        self.SelectedEvent(ev);
        self.showTable(false);
        self.showDetails(true); 
    }
}

}

//Access the server and pulls the info from it.  I also apply my sorting() method to initially sort the info here. 
function getEvents(model){ 
    $.getJSON("http://mywebpage.com",  
        function (data){ 
        model.rows([]); 
        $.each(data.d, function(i,item){ 
            hendleEvent(item) 
        }); 
        model.sorting(); 
        } 
    ); 
} 

//Populates the rows of the table with the info from the server I.E. item."infoIwant" 
function handleEvent(item){ 
    var newEvent = new Event(item.Name, item.TimeObserved, item.Location); 
    this.Model.rows.push(newEvent);     
} 

this.Model = new TableViewModel(); 
var eventInterval = setInterval(function(){ 
getEvents(this.Model); 
    }, 5000); 

ko.applyBindings(this.Model); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:44:18.560

我使用 twitter bootstrap carousel 工具找到了解决方案。

# .net - .NET 路由实际 URL

> ID：10487671
> 
> 赞同：0
> 
> 时间：2012-05-07T19:10:40.767
> 
> 标签：.net, routing, webforms

我正在使用带有 .NET Web 表单的路由。（.NET 4.0）

页面如何找出实际的 URL 是什么？

例如，在以下 URL：

/路由/友好的网址/

我希望页面打印出来：

/文件夹/mypage.aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:27:04.020

使用`Page.AppRelativeVirtualPath`.

例子：

```
<body>
  Path to ASPX: <%= Page.AppRelativeVirtualPath %>
</body> 
```

# iphone - UITableViewCell 变换重复反转

> ID：10487673
> 
> 赞同：0
> 
> 时间：2012-05-07T19:10:47.827
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uikit

我将 UITableViewCell 子类化，目的是在其中放置 UISegmentedControl。由于 UISegmentedControl 的字体很大，我想减少它。
这是我现在使用的：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.segmentedControl = [[UISegmentedControl alloc] initWithFrame:properFrame];
        self.segmentedControl.transform = CGAffineTransformMakeScale(.8f, .8f);
        [self.contentView addSubview:self.segmentedControl];
    }
    return self;
} 
```

但是，segmentedControl 收缩一次，然后每次我向下滚动表格然后向上滚动时，segmentedControl 就会放大（！）大约 1.2 倍，即我请求的转换的倒数。

使用的 iOS SDK 是 5.0，目标平台 - 4.0，模拟器版本 5.0。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:24:28.507

嗯，不是 100% 确定，但是为什么不尝试覆盖`-(void)layoutSubviews` 子类 UITableViewCell 上的方法并尝试再次将分段控件从标识转换为 0.8f...

# javascript - 如何异步加载包含 ajax 调用的 javascript 文件？

> ID：10487675
> 
> 赞同：0
> 
> 时间：2012-05-07T19:10:48.737
> 
> 标签：javascript, asp.net, jquery

我有一个名为 JScript.js 的 JavaScript 文件，该文件包含下面的函数，即对 dot-net 页面的 ajax 调用

```
alert('jscript.js called');

function AddTag() {
var htag = document.getElementById("hdntag").value.split('|');
var texttag = document.getElementById("taginput").value;

for (i = 1; i < htag.length; i++) {
    var onetag = htag[i].split(',');

    if (onetag[0] == texttag) {
        alert("Already Exist!!!");
        return false;
    }
}
$(document).ready(function () {
    $.ajax
                           ({
                               type: "POST",
                               url: "Checked.aspx/AddTag",
                               data: "{'TagName': '" + $('#taginput').val() + "'}",
                               contentType: "application/json; charset=utf-8",
                               dataType: "json",
                               async: true,
                               cache: false,
                               success: function (msg) {
                                   document.getElementById("hdntag").value += '|' + texttag + ',' + msg.d;
                                   Makeedittabletaghtml();
                               }
                           })
});
document.getElementById("taginput").value = ""; 
```

}

我正在尝试将此 JavaScript 文件异步加载到页面中，但我只收到警报，即*“调用 jscript.js”，*但下面的函数不执行是异步加载 JavaScript 文件的代码

```
 (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.src = 'JScript.js';
    dsq.async = true;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})(); 
```

但是当我将文件包含到页面中时，它运行并执行得很好

```
<script type="text/javascript" src="JScript.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:29:26.247

Farhan Ahmad 已经回答了，无论如何， document.ready 仅在您加载页面并且 dom 准备好时触发，所以首先让您`JScript.js`如下

```
alert('jscript.js called');

function AddTag() {...}

function myReadyFunc(){
    $.ajax({
    ...
    ...
    });
} 
```

然后用于`$.getScript`加载文件并调用你的`myReadyFunc()`哪个将调用`ajax`

```
$.getScript("JScript.js", function(){
    alert("Script loaded and executed.");
    myReadyFunc();
}); 
```

**参考：** [**这里。**](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:16:27.623

您可以使用[.getScript()](http://api.jquery.com/jQuery.getScript/) jQuery 函数来执行此操作：

```
$.getScript("JScript.js", function(){
   alert("Script loaded and executed.");
   // here you can use anything you defined in the loaded script
}); 
```

# git - 将公共 git 存储库集成到私有项目中（没有子模块或子树合并）

> ID：10487676
> 
> 赞同：5
> 
> 时间：2012-05-07T19:10:49.887
> 
> 标签：git

将公共存储库中的代码合并到不能将公共代码限制到子目录的私有项目中的最佳方法是什么？就我而言，我正在开发一款游戏，我想使用引擎的 beta 分支（可作为 git 存储库使用），但我所有的自定义代码都需要位于引擎代码的子目录下，所以子模块不会成功。由于我与一个小团队合作，我希望能够将我的更改推送到我们的远程存储库以进行共享。我还希望能够从引擎作者那里获取更改，但我不担心将任何更改推送到公共存储库。

最简单的方法是只保留一个单独的文件夹，其中包含引擎存储库的克隆，偶尔更新它并复制文件（它们组织得很好，所以这并不像听起来那么糟糕。）我会然而，我喜欢能够用 git 做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:17:20.113

克隆 git repo，创建一个名为 upstream-beta 的分支（你永远不会使用它），你就完成了。

当您想要获取上游的更改时，切换到该分支，拉取，切换回 master（或您工作的任何分支），从 upstream-beta 中挑选或 rebase 以获得该 repos 的更改。

# drupal - Drupal：管理与视图模块的“有很多”关系

> ID：10487677
> 
> 赞同：1
> 
> 时间：2012-05-07T19:10:59.810
> 
> 标签：drupal, views

我正在为一个朋友开发一个 Drupal 站点，但在创建一个显示基于真正“有很多”关系的内容的视图时遇到了一些麻烦。我更像是一名 Rails 程序员，对 Drupal 没有太多经验，所以如果这里没有必要，我宁愿不重新发明轮子。

基本上，登录时分配给用户的两个角色代表他们在网站上的个人资料类型。为了简洁起见，我只称他们为“学生”和“教授”。正如您所期望的那样，一位教授可以有很多学生，而学生只能有一位教授。我正在为“教授”创建一个视图，该视图将显示该“教授”所有他/她的学生。现在，“students”个人资料类型维护一个自动完成字段，其中包含用户对其“教授”的引用，但“教授”个人资料中没有字段可以执行此操作，因为可以有任意数量的“学生”每个教授。

有没有一种简单的方法可以使用模块的界面创建这个视图？或者这是否需要对反向链接表进行更深入的工作？我也可能从上到下以错误的方式处理这个问题，所以任何提示，无论“嗯，首先你做错了”都会有所帮助。

谢谢！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:16:59.523

这可能会对您有所帮助：http: [//drupal.org/node/1103484](http://drupal.org/node/1103484)

这个模块可以帮助你：[http ://drupal.org/project/relation](http://drupal.org/project/relation)

# java - 从超类获取子类的类引用

> ID：10487680
> 
> 赞同：0
> 
> 时间：2012-05-07T19:11:10.097
> 
> 标签：java

如何从超类方法中获取对子类的类的引用？

例如，

```
public class MySuper {
  public void myMethod(){
    // here i need a reference to MySub1.class or MySub2.class
    // depending on the class of the instance that invoked this method
  }
}

public class MySub1 extends MySuper {
  public String myString;
}
public class MySub2 extends MySuper {
  public int myInt;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:12:28.520

听起来你只是想要：

```
Class<?> clazz = getClass(); 
```

或更明确地说：

```
Class<?> clazz = this.getClass(); 
```

请注意，它不是包含*调用该方法*的代码的类，而是调用该方法的对象的*类*。如果你想要调用者的类，那是完全不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:12:55.587

如果你打电话`getClass()`，你会得到实例的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:15:21.757

```
MySub1 sub1 = new MySub1();
sub1.getClass(); // returns the MySub1.
sub1.getClass().getSuperclass(); // returns MySuper 
```

我希望这是你需要的。

# c# - 在 Razor 中创建文本框变量的方法类似于 标签？

> ID：10487688
> 
> 赞同：1
> 
> 时间：2012-05-07T19:11:34.753
> 
> 标签：c#, asp.net, html, asp.net-mvc-3, razor

我目前正在努力将旧页面更新为新的 Razor 语法，并希望我可以回收旧代码中已有的大部分代码隐藏函数。用asp标签，写类似的东西

```
<asp:Textbox ID="txtcust" runat="server"> 
```

将允许我在我的代码隐藏中访问 txtcust 作为变量，以便页面获取/设置文本框中的数据。我可以用新的 Razor 语法做一些同样简单的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:13:20.713

您从根本上误解了 MVC。

MVC 使用模型，而不是控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T02:07:05.950

You could use TextBoxFor and bind the textbox to the model (this is one of the perks of MVC and Razor syntax).

```
@Html.TextBoxFor(model => model.Property) 
```

Then in your controller you can manipulate the model values so they are reflected in your View automatically. This is essentially the way you do it in MVC as opposed to stinky Web Forms.

Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T02:19:38.177

尽管它们都建立在 ASP.NET 框架之上，但 MVC 和 WebForms 确实没有太多共同点。MVC 依赖于模型、视图和控制器，它们并没有真正（直接）转换为代码隐藏和服务器控件的 WebForms 结构。我的建议是查看 MVC 教程并从头开始构建您的站点，直到您完全了解如何将 WebForms 结构映射到 MVC。这*并不*简单，但需要一些时间和耐心才能完成。

[http://www.asp.net/mvc/tutorials](http://www.asp.net/mvc/tutorials)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:16:10.010

如果您想使用帮助程序来创建 HTML 控件（请记住，您不会像在 WebForms 中那样在代码隐藏中与它们“交互”），您可以使用：

```
@Html.TextBox() 
```

# google-fusion-tables - 使用 Google Fusion Table API 的表格插入和更新给出 403

> ID：10487689
> 
> 赞同：0
> 
> 时间：2012-05-07T19:11:37.280
> 
> 标签：google-fusion-tables

我有一个融合表，我希望对我通过 Google Docs 创建的进行插入和更新。

我正在尝试使用 OAUTH 访问此表并通过 WebApp 和 Java 客户端进行插入和更新

我可以使用我的访问令牌（我通过传递我的客户端密码和刷新令牌凭据接收到的）对这个表进行选择，以编程方式没有问题。

```
String sql = java.net.URLEncoder.encode("SELECT * FROM " + tableId, "ISO-8859-1");
uri = "https://www.google.com/fusiontables/api/query?access_token=" + token + "&sql=" + sql; 
```

以上从表中返回了我的行

但是，当我尝试插入时，我得到下面的消息

服务器返回 HTTP 响应代码：403 用于 URL：[https](https://www.google.com/fusiontables/api/query?access_token) ://www.google.com/fusiontables/api/query? access_token .....

仅当我首先以编程方式从 Google API 中创建表时，插入才会起作用。我怎样才能确保我可以访问相同的表。我通过“Google Docs”下的新表选项创建，我看到哪里有一个共享按钮，但我不知道打开表以进行插入的步骤，更新我可以执行插入而不会得到 403 响应谷歌服务器以编程方式。我不是楼主吗？如何在表中注册我的 API 凭据以进行插入/更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:55:02.793

我自己对 Fusion 表还很陌生，但我最近构建了一个 javascript Web 应用程序，它可以插入/更新表。

首先，如果它是一个 javascript 网络应用程序，您需要授权更新/插入将来自的 URL。通过 Google API 控制台执行此操作...

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

...在“API 访问”菜单项下——“JavaScript 起源”是您需要添加服务器主机名的位置。对表的任何插入/更新都需要通过 SSL 连接进行（即相关页面需要以 HTTPS:// 开头

如果您使用来自服务器端代码的 POST 数据，则无需担心这一点——在该实例中，重要的是（我认为）确保该数据仍通过 SSL 传输（尽管不是 100 ％肯定，因为我只在客户端javascript领域工作）。

还要确保将 Fusion Table API 切换为 ON（在“服务”菜单下）。

我找到了这两页...

[http://code.google.com/p/google-api-javascript-client/wiki/Authentication](http://code.google.com/p/google-api-javascript-client/wiki/Authentication) [https://developers.google.com/fusiontables/docs/v1/using#auth](https://developers.google.com/fusiontables/docs/v1/using#auth)

...对于了解身份验证过程和此示例页面非常有用...

[http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)

......实际上提供了结束我的挥霍的具体代码，并让我在将数据推送到我的融合表方面取得了一些进展。

# c# - 更新 WPF DataGrid 中的单行

> ID：10487690
> 
> 赞同：4
> 
> 时间：2012-05-07T19:11:45.557
> 
> 标签：c#, wpf, datagrid

我正在创建一个下载管理器，并且我的 WPF`DataGrid`绑定到代表正在进行的下载的对象集合（在单独的线程中）。当我运行多个下载时，每个下载都使用此代码`DataGrid`每秒更新其项目：

```
if (DateTime.Now > download.LastUpdateTime.AddSeconds(1))
{
    this.downloadsGrid.Items.Refresh();
    download.LastUpdateTime = DateTime.Now;
} 
```

`Datagrid.Items.Refresh()`完成这项工作，但它重建了整体`DataGrid`，导致所有下载在一秒钟内多次更新彼此`DataGrid`的行，我不想要那种行为。有没有办法刷新 a 中的特定行（项目）`DataGrid`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T03:08:52.620

如果您将 DataGrid 绑定到[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)（实现[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/ms668629.aspx)），您的 DataGrid 将在添加新项目或删除项目时收到通知。此外，如果您只是更新集合中对象的属性，则该对象应实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并引发 PropertyChanged 事件，该事件将告诉 DataGrid 仅更新该值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T19:22:21.173

你的下载类实现了[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)吗？如果没有，这就是为什么你必须调用刷新来查看网格的变化。如果你实现`INotifyPropertyChanged`了绑定，当值改变时会更新。

# ruby - Chef 模板以及如何在 ruby 中执行 for 循环

> ID：10487695
> 
> 赞同：2
> 
> 时间：2012-05-07T19:12:21.687
> 
> 标签：ruby, chef-infra

我对红宝石和厨师很陌生。我正在尝试根据内核数在 nginx.conf 文件中创建条目。

```
for i in <%= node["cpu"]["total"]%>
upstream frontends {
        server 127.0.0.1:805x;
    }

end 
```

所以..如果 4 核文件将如下所示：

```
upstream frontends {
            server 127.0.0.1:8051;
            server 127.0.0.1:8052;
            server 127.0.0.1:8053;
            server 127.0.0.1:8054;
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T19:30:33.677

**食谱**

```
template "/etc/nginx/sites-available/my-site.conf" do
  variables :frontends_count => node["cpu"]["total"]
end 
```

**模板**

```
upstream frontends {
<% @frontends_count.times do |i| %>
  server 127.0.0.1:805<%= i + 1 %>;
<% end %>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:16:46.647

我对 Chef 不熟悉，因为我是 Puppet 用户。一般来说，我会这样处理它：

```
n.times { |i| puts "server 127.0.0.1:805#{i+1}" } 
```

输出：

```
server 127.0.0.1:8051
server 127.0.0.1:8052
server 127.0.0.1:8053
server 127.0.0.1:8054 
```

显然，您必须替换`n`为`node["cpu"]["total"]`（我假设这是一个整数）并使用 以外的其他`puts`内容，但这应该可以帮助您入门。我想这应该适用于厨师：

```
upstream frontends {
<% node["cpu"]["total"].times do |i| -%>
  <%= "server 127.0.0.1:805#{i+1}" %>
<% end -%>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T16:09:37.443

这是 if 语句的示例。

食谱：

```
template "/opt/auth/users.xml" do
 ...
 variables(
   :users => auth_users
 )
end 
```

模板：

```
<% @users.each do |u| %>
  <user username="<%= u['username'] %>" password="<%= u['password'] %>" roles="<%= u['roles'] if u['roles'] %>" groups="<%= u['groups'] if u['groups'] %>" />
<% end %> 
```

# string - 在 C# 中替换文件名的一部分

> ID：10487696
> 
> 赞同：5
> 
> 时间：2012-05-07T19:12:22.153
> 
> 标签：string, visual-studio-2010, c#-4.0

我有一个包含文件的文件夹`.pdf`。在大多数文件的名称中，我想用另一个字符串替换特定的字符串。

这是我写的。

```
 private void btnGetFiles_Click(object sender, EventArgs e)
    {
        string dir = tbGetFIles.Text;
        List<string> FileNames = new List<string>();

        DirectoryInfo DirInfo = new DirectoryInfo(dir);

        foreach (FileInfo File in DirInfo.GetFiles())
        {
            FileNames.Add(File.Name);       
        }

        lbFileNames.DataSource = FileNames;
    } 
```

这里我提取列表框中的所有文件名。

```
 private void btnReplace_Click(object sender, EventArgs e)
    {
        string strReplace = tbReplace.Text; // The existing string
        string strWith = tbWith.Text; // The new string

        string dir = tbGetFIles.Text;
        DirectoryInfo DirInfo = new DirectoryInfo(dir);
        FileInfo[] names = DirInfo.GetFiles();

        foreach (FileInfo f in names)
        {
            if(f.Name.Contains(strReplace))
            {
                f.Name.Replace(strReplace, strWith);
            }

        } 
```

在这里我想做替换，但是出了点问题。什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T19:18:14.510

听起来您想更改磁盘上文件的名称。如果是这样，那么您需要使用`File.Move`API 而不是更改作为文件名的实际字符串。

您犯的另一个错误是`Replace`调用本身。.Net 中的A`string`是不可变的，因此所有变异的 API 都像`Replace`返回一个新的`string`而不是更改旧的。要查看更改，您需要将新值分配回变量

```
string newName = f.Name.Replace(strReplace, strWith);
File.Move(f.Name, newName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:18:55.357

f.Name 是一个只读属性。f.Name.Replace(..) 只返回一个带有您想要的文件名的新字符串，但从不实际更改文件。
我建议以下内容，尽管我还没有测试过：

```
File.Move(f.Name, f.Name.Replace(strReplace, strWith)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:18:07.463

替换返回另一个字符串，它不会改变原始字符串。
所以你需要写

```
string newName = f.Name.Replace(strReplace, strWith); 
```

当然这不会改变磁盘上文件的名称。
如果这是你的意图，那么你应该看看

```
File.Move(f.Name, newName); 
```

还要记住，如果目标文件存在，File.Move 将失败并出现异常。

[有关示例，请参见此处](http://www.dotnetperls.com/file-move)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:17:42.270

乍一看，您似乎没有将替换的字符串重新分配给 f.Name 变量。尝试这个：

```
string NewFileName = f.Name.Replace(strReplace, strWith);
File.Copy(f.Name, NewFileName);
File.Delete(f.Name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T19:22:25.637

当您调用`string.Replace`它时，它不会改变您现有的字符串。相反，它返回一个新字符串。

您需要将代码更改为以下内容：

```
if(f.Name.Contains(strReplace)) 
{ 
    string newFileName = f.Name.Replace(strReplace, strWith); 
    //and work here with your new string
} 
```

# node.js - 猫鼬有 isDirty 检查吗？

> ID：10487702
> 
> 赞同：4
> 
> 时间：2012-05-07T19:12:49.643
> 
> 标签：node.js, mongoose

我有一个涉及嵌入式模式的猫鼬设置，可以说：带有嵌入式评论的博客帖子。评论可以由原始发布者以及编辑/管理员编辑。添加/编辑评论后，将保存整个博文。

我在嵌入式评论模式上设置了一些自定义 mongoose 的“pre”中间件，它会自动为该特定评论设置 lasteditdate。

问题是在博文的每条评论上都会调用“pre”，因为我在博文上调用了 save()。（出于其他原因，我需要这样做）。因此，我需要一种方法来检查自上次保存以来哪些评论已更改（或新评论）（作为博客文章整体 save() 的一部分）

问题：如何在'pre'中检查评论是否已更改？显然调用`this.isNew`是不够的，因为评论也可以被编辑（即：不是新的）。

有没有`isDirty`我忽略的或类似的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T21:12:59.217

对于版本 3.x

```
if(doc.isModified()){
  // do stuff
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-04T00:58:47.857

在 Mongoose 中，您可以使用 Document 方法`isModified(@STRING)`。

[可以在此处](http://mongoosejs.com/docs/api.html#document_Document-isModified)找到该方法的最新文档。

因此，要使用 doc.isModified 检查特定属性，您可以这样做：

```
doc.comments[4].message = "Hi, I've made an edit to my post";
// inside pre hook
if ( this.isModified('comments') ) {
  // do something
} 
```

如果你想检查一个特定的评论，你可以用下面的符号来做`this.isModified('comments.0.message')`

由于参数需要一个字符串，如果您需要具体了解修改了哪个评论，您可以遍历每个评论并运行`this.isModified('comments['+i+']message')`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T19:20:43.517

您可以使用修改后的 getter：

```
if (doc.modified) {
   // :)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-05T15:25:55.613

这可能与大约 2020 年中期看到此错误的 Mongoose 用户有关：

```
 "errorType": "TypeError",
    "errorMessage": "Cannot set property 'isDirty' of null", 
```

升级到最新版本的 Mongoose 来修复它。

[https://github.com/Automattic/mongoose/issues/8719](https://github.com/Automattic/mongoose/issues/8719)

# ruby-on-rails - 有没有好的 macvim git diff？

> ID：10487703
> 
> 赞同：3
> 
> 时间：2012-05-07T19:12:54.613
> 
> 标签：ruby-on-rails, git, textmate, macvim

我已经使用 textmate 很多年了，我刚刚切换到 macvim，而我一直使用 textmate 的一件事是`git df`在我的 .gitconfig 中只是一个别名的命令

```
[alias]
    df = !git diff | mate 
```

那就是给我一个这样的屏幕

![在此处输入图像描述](../Images/6a82e00b360a7776d1bbee34af35c4d0.png)

mvim 中是否有替代品，我可以在某处添加以获得类似的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:51:33.087

我描述了我[在这里](http://jeetworks.org/node/90)使用的东西。

基本上，将以下行添加到“~/.gitconfig”中：

```
[diff]
    tool = default-difftool

[difftool "default-difftool"]
    cmd = default-difftool.sh $LOCAL $REMOTE 
```

使用以下包装脚本：

```
#! /bin/bash

if [[ -f /Applications/MacVim.app/Contents/MacOS/Vim ]]
then
    # bypass mvim for speed
    VIMPATH='/Applications/MacVim.app/Contents/MacOS/Vim -g -dO -f'
elif [[ -f /usr/local/bin/mvim ]]
then
    # fall back to mvim
    VIMPATH='mvim -d -f'
else
    # fall back to original vim
    VIMPATH='vimdiff'
fi

$VIMPATH $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:22:37.227

您可以通过执行以下操作一次获取一个文件：

```
git difftool -t vimdiff 
```

`vimdiff`可以用`gvimdiff`for gvim 替换，所以我假设您也可以用`mvimdiff`for macvim 替换它。

不过，我不确定是否有办法将全部内容`git diff`导入 vim。

# asp.net - ASP.NET 错误日志

> ID：10487705
> 
> 赞同：0
> 
> 时间：2012-05-07T19:12:56.617
> 
> 标签：asp.net

每次相关的 ASP.NET 应用程序抛出错误时，Global.asax 都会写入错误文件：logs\error.log。ASP.NET 应用程序使用 Windows 身份验证工作。

我可以在使用 Visual Studio 进行调试时写入日志文件，但是当应用程序部署在实时环境中时它不起作用。如何找出我需要授予访问权限的用户帐户：logs/error.log？

该应用程序部署在带有 IIS6 的 Windows 2003 Server 上。微软.NET 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:17:28.073

您必须向网络服务帐户授予所需的权限。这个[链接](http://msdn.microsoft.com/en-us/library/ff647402.aspx)也许可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:36:39.127

Microsoft 有一个用于监视文件访问的工具，可用于解决权限问题。

**进程监视器**- [http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

您还需要检查您的应用程序是否使用 Windows 身份验证和身份模拟，因为这可能会更改应用程序在启用时执行的身份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:21:56.680

Windows Server 2003 默认使用“网络服务”帐户。这可以通过打开 IIS（如果需要，展开计算机）来验证，展开“应用程序池”文件夹，右键单击您的 Web 应用程序使用的池，然后转到“身份”选项卡。

仅供参考：Windows Server 2008 使用 IIS_IUSER 而不是网络服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:28:33.527

我希望日志文件夹是网站目录之外的虚拟目录设置。

否则，每次部署整个解决方案时，您都会覆盖日志文件夹及其内容。

# android - TTS 支持哪些音频格式？

> ID：10487717
> 
> 赞同：3
> 
> 时间：2012-05-07T19:13:38.207
> 
> 标签：android, text-to-speech

方法支持哪些音频格式[`synthesizeToFile`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#synthesizeToFile%28java.lang.String,%20java.util.HashMap%3Cjava.lang.String,%20java.lang.String%3E,%20java.lang.String%29)？我读过的示例总是指 WAV 格式，但我找不到所有支持格式的列表。[`addEarcon`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#addEarcon%28java.lang.String,%20java.lang.String%29)此外，TTS 引擎（和[`addSpeech`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#addSpeech%28java.lang.String,%20java.lang.String,%20int%29)方法）支持播放哪些音频文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:32:49.563

我希望你能得到的只是 WAV：盯着[一个版本的代码](http://nv-tegra.nvidia.com/gitweb/?p=android/platform/external/svox.git;a=blob;f=pico/lib/picoapi.c;h=c4ef8bfc091a1b6ac68f6b4b44ce21df1957ee2a;hb=9ff6c8f6036ea7cfa745a15afb26223bfa20cbe9)，它的返回类型似乎是`PICO_DATA_PCM_16BIT`（见第 656 行）。

# android - android浏览器位置栏不会因片段更改而更新

> ID：10487718
> 
> 赞同：2
> 
> 时间：2012-05-07T19:13:40.080
> 
> 标签：android, browser, browser-history, android-browser

这似乎很疯狂。我肯定错过了什么。在 Android 浏览器（ICS，4.0.3）中设置位置片段时，位置栏无法更新以显示新片段。`window.location`无论是设置,`window.location.hash`还是普通的 old似乎都同样失败`<a href="#foo">`。浏览器确实导航到所需的片段，并且在刷新时，位置栏包含预期的片段。并且后退按钮有效！唯一错误的是位置栏中显示的地址应该立即反映新的位置+片段，但事实并非如此。

很好的例子可以在[Google Closure goog.History 演示页面](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/history1.html)上看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:15:08.010

我们在 Android 4.0.4 中也注意到了这一点。

更糟糕的是，至少在一个设备（Galaxy Nexus）上，如果 url 仅包含路径，例如`http://www.example.com/path/`. 然后，您可以很好地导航到片段网址，但**点击后退按钮没有效果**。

当 url 中存在文件时，该问题已得到解决。

```
# will fail when using browser back button
www.example.com/path/

# will work although no fragment is shown
www.example.com/path/index.html 
```

# twitter-bootstrap - Twitter Bootstrap 响应式实用程序类使用

> ID：10487720
> 
> 赞同：9
> 
> 时间：2012-05-07T19:14:12.787
> 
> 标签：twitter-bootstrap

应该如何使用 Twitter Bootstrap 响应式实用程序类，例如 .visible-desktop。我尝试按照 Bootstrap 网站上的示例进行操作，

```
<span class="visible-desktop">✔ Desktop</span> 
```

在这样的图像上，

```
<span class="visible-desktop">
  <img src="<%=(image_path('green.jpg'))%>"></img>
</span> 
```

但是当我将浏览器窗口缩小到平板电脑或手机大小时，图像仍然存在。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-12T09:26:06.163

以防万一有人想用**Bootstrap 3.0**做到这一点。嘿改变了这些类：

`.visible-phone`变成了`.visible-sm`

`.visible-tablet`变成了`.visible-md`

`.visible-desktop`变成了`.visible-lg`

`.hidden-phone`变成了`.hidden-sm`

`.hidden-tablet`变成了`.hidden-md`

`.hidden-desktop`变成了`.hidden-lg`

用法：

```
<span class='hidden-sm hidden-md visible-lg'> 
```

可以在[此处](http://getbootstrap.com/getting-started/#migration)找到 Bootstrap 3.0 迁移指南。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-27T20:30:22.707

这是一个很好的图表，解释了如何在 bootstrap 3.1 中使用这些

![在此处输入图像描述](../Images/13368202663f37f384ac73f9c2fd143c.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T06:26:09.210

这对我有用 -

尝试将`.hidden-phone`and添加`.hidden-tablet`到您的`span`课程中，如下所示：

```
<span class="visible-desktop hidden-phone hidden-tablet"> </span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:29:24.747

如果所有依赖项都已到位并正确引用（CSS 文件等），则该类`.visible-desktop`不应显示在平板电脑或手机上。

在 Bootstrap 自己的介绍性文档的这一部分中，您可以看到一个实时示例：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

尝试在一个非常简单的标签上应用该类，并首先查看它是否有效。如果不是，它将不适用于任何其他标签。:)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T19:28:55.703

您是否复制/粘贴了您的代码？因为你有错别字...

```
<span class="visable-desktop"> 
```

应该

```
<span class="visible-desktop"> 
```

# database - m:n 关系必须有属性？

> ID：10487724
> 
> 赞同：0
> 
> 时间：2012-05-07T19:14:29.143
> 
> 标签：database, relational-database, erd

我正在为一个项目做 E/R 模型。我完成了 ER 模型，对我来说，一切都很好。也许不完美，但没关系。当我把 ER 模型交给老师时，他告诉我：

> “m:n 关系必须有一些属性”

他说，如果这种`m:n`关系没有属性，那将是错误的。在我看来`m:n`，这种关系不需要强制属性，但如果你有适合它的人，那就放在那里。

你怎么看？谁错了，是我，还是我的老师？

笔记：

再看一遍，他说的似乎不是我的ER图，而是一般性的陈述。我给他的图表还没有关系，所以那里只有实体和属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:20:44.787

“必须”太强了。我可以看到 m:n 关系中的 JOIN 表在哪里不需要属性；这些在我的应用程序中很常见。

我也可以看到它们什么时候有用。

我讨厌各种形式的教条。了解规则；知道什么时候打破规则以及为什么。如果他们以这种方式处理问题，您的讲师将更具教育性和知识渊博。

# haskell - 选定文本上的 Tab 和 Shift-Tab 智能缩进

> ID：10487726
> 
> 赞同：4
> 
> 时间：2012-05-07T19:14:40.167
> 
> 标签：haskell, emacs

在大多数现代编辑器中，您可以突出显示一段代码并缩进或取消缩进一个制表符或您正在使用的许多空格，这是标准的；你如何在emacs中做到这一点？

因此，例如我刚刚打开了 sublime text，突出显示了以下代码：

```
variation1 person phoneMap carrierMap addressMap =
    case M.lookup person phoneMap of
      Nothing -> Nothing
      Just number ->
          case M.lookup number carrierMap of
            Nothing -> Nothing
            Just carrier -> M.lookup carrier addressMap 
```

然后按下标签并得到

```
 variation1 person phoneMap carrierMap addressMap =
      case M.lookup person phoneMap of
        Nothing -> Nothing
        Just number ->
            case M.lookup number carrierMap of
              Nothing -> Nothing
              Just carrier -> M.lookup carrier addressMap 
```

该代码上的一个 shift-tab 将其返回到原来的位置，如果我继续按 shift-tab，我最终会得到以下信息：

```
variation1 person phoneMap carrierMap addressMap =
case M.lookup person phoneMap of
Nothing -> Nothing
Just number ->
case M.lookup number carrierMap of
Nothing -> Nothing
Just carrier -> M.lookup carrier addressMap 
```

引用另一个回复：

> emacs 语言模式实际上并没有“进一步缩进此块 1 选项卡”的概念。相反，他们非常固执己见，并且有“这是正确的缩进”的概念，这就是您在语言模式下点击制表符时所得到的。

除非我使用以下代码执行此操作（haskell 模式和 ghc mod 已启用）：

```
import Monad
import System
import IO
import Random
import Control.Monad.State

type RandomState a = State StdGen a
data CountedRandom = CountedRandom {
      crGen :: StdGen
    , crCount :: Int
    }

type CRState = State CountedRandom

getRandom :: Random a => RandomState a
getRandom =
  get >>= \gen ->
  let (val, gen') = random gen in
  put gen' >>
  return val 
```

我得到以下信息：

```
import Monad
  import System
  import IO
  import Random
  import Control.Monad.State

type RandomState a = State StdGen a
data CountedRandom = CountedRandom {
  crGen :: StdGen
  , crCount :: Int
  }

type CRState = State CountedRandom

               getRandom :: Random a => RandomState a
               getRandom =
  get >>= \gen ->
  let (val, gen') = random gen in
  put gen' >>
  return val 
```

当我想要

```
import Monad
import System
import IO
import Random
import Control.Monad.State

type RandomState a = State StdGen a
data CountedRandom = CountedRandom {
      crGen :: StdGen
    , crCount :: Int
    }

type CRState = State CountedRandom

getRandom :: Random a => RandomState a
getRandom =
  get >>= \gen ->
    let (val, gen') = random gen in
    put gen' >>
    return val 
```

* * *

足够接近来自ataylor的解决方案：

```
(defcustom tab-shift-width 4
  "Sets selected text shift width on tab"
  :type 'integer)
(make-variable-buffer-local 'tab-shift-width)

(global-set-key 
 (kbd "<tab>")
 (lambda (start end)
   (interactive "r")
   (if (use-region-p)
       (save-excursion
     (let ((deactivate-mark nil))
       (indent-rigidly start end tab-shift-width)))
     (indent-for-tab-command))))

(global-set-key 
 (kbd "S-<tab>")
 (lambda (start end)
   (interactive "r")
   (if (use-region-p)
       (save-excursion
     (let ((deactivate-mark nil))
       (indent-rigidly start end (- tab-shift-width))))
     (indent-for-tab-command)))) 
```

如果 emacs 支持缩进检测（即，只获取某个变量的值），那就太好了；我发现与此最接近的是一个名为 dtrt indent 的插件，但它不适用于 Haskell。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:32:32.373

`indent-region`将根据当前模式重新缩进一段文本。

要强制添加缩进级别，您可以使用`string-rectangle`，它会提示您输入字符串。在这里，您可以提供缩进级别的字符串（例如制表符、4 个空格等）。该字符串将插入当前选定区域的每一行，在当前列中，有效地缩进它。或者，您可以从 获得类似的效果`open-rectangle`，它将空白插入矩形中，角由点和标记定义。

另一种强制缩进的方法是调用`indent-rigidly`( `C-x TAB`)。这会覆盖特定于模式的缩进规则并缩进固定数量。数字参数指定缩进多少，负参数将取消缩进。如果您希望这是选择区域时的默认行为，您可以执行以下操作：

```
(global-set-key 
 (kbd "<tab>")
 (lambda (start end)
   (interactive "r")
   (if (use-region-p)
       (save-excursion
     (let ((deactivate-mark nil))
       (indent-rigidly start end 4)))
     (indent-for-tab-command)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T00:10:54.567

Haskell 代码很难正确缩进，因为一段代码有多个“正确”的缩进。

`haskell-mode`它有一个非常具体的行格式，它希望你遵循（如，你必须在正确的地方换行），它有一些缩进规则来格式化与该行格式匹配的代码。存在这些规则是为了使自动缩进结果更加一致。规则大致是这样的：

*   在每个引入块的关键字之后，您应该换行或确保整个块适合布局。否则，你会得到很多像在你的`getRandom`例子中一样的悬挂块
*   所有块都缩进两个空格。这包括模块块；如果这样做`module Bla where`，则该行之后的整个部分将缩进。这意味着您应该保留默认的 Haskell 模块文件格式以使缩进顺序生效。
*   行的缩进需要尽可能明确；如果一条线根据其缩进可能意味着不同的东西，它将导致它被缩进到`haskell-mode`认为在上下文中有意义的位置。在某些情况下，解决此问题是不可能的。

因为不可能将 Haskell 代码结构化以使其满足 的要求`haskell-mode`，所以您不能像这样缩进一段时间的 Haskell 代码文件。您只需要在本地使用自动缩进。这可以通过多种方式完成：

*   当您在一行时，您可以通过按 将当前行缩进到相对于前一行而言最可能“正确”的位置`TAB`。通过`TAB`再次按下，您将把行带到“下一个”缩进级别，并不断循环通过所有可能的逻辑缩进步骤。
*   如果您选择在本地找到的一系列块（函数体等）并使用`M-x indent-region`，则结果很可能是正确的。

在这种情况下，我通常会从具有“错误”缩进的行开始，按`TAB`一次，然后逐行向下，在每行上按`TAB`一次或多次，直到该行的缩进为正确的。当前行的当前“逻辑缩进位置”是根据前面的代码上下文计算的，因此从顶部更正缩进几乎总是会产生正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:23:30.287

我突出显示该区域并点击`C-M-\`. 在[多行缩进](http://www.gnu.org/software/emacs/manual/html_node/emacs/Multi_002dline-Indent.html)页面`indent-region`中可以找到更多乐趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:32:25.187

emacs 语言模式实际上并没有“进一步缩进此块 1 选项卡”的概念。相反，他们非常固执己见，并且有“这是正确的缩进”的概念，这就是您在语言模式下点击制表符时所得到的。

一旦你习惯了它，其他任何事情都会显得很奇怪。在您的 Haskell 代码中，这些 case 语句实际上只有一个有效的缩进，除非您添加大括号和分号，否则其他任何内容都是语法错误。如果您真的想自定义 emacs 认为“正确”的缩进，请查看如何自定义您的模式。许多语言模式重用 c-mode 变量，所以[这里](http://www.gnu.org/software/emacs/manual/html_node/ccmode/c_002doffsets_002dalist.html)可能是一个不错的起点（虽然我不确定 Haskell 模式是做什么的，但我从未发现需要自定义它）。

编辑：我在您的评论中看到您的麻烦来自没有安装 Haskell 模式，[请到 github 页面](https://github.com/haskell/haskell-mode)获取它。

# shell - 解析字符串以标记、导出和动态回显值

> ID：10487732
> 
> 赞同：0
> 
> 时间：2012-05-07T19:15:28.930
> 
> 标签：shell, unix, scripting, ksh, shellexecute

环境：KornShell (ksh)

我正在使用以下方法导出变量：

```
eval $(echo '"EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD"' |  
sed 's/^"/export /g;s/=/="/g;s/#/"\nexport /g') 
```

并尝试动态显示这些变量的值：

```
eval $(echo EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD|sed 's/^/echo $/g;s/=/="/g;s/#/"\necho $/g' | sed  's/=.*$//g') 
```

但我得到的输出为：

```
20110203-210000 echo Forigen Exchange Today echo EOD 
```

我无法弄清楚为什么会在其中显示额外的回声，这不是令人满意的输出。它应该如下所示：

```
20110203-210000 
Forigen Exchange Today 
EOD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:36:24.140

您执行替换的方式会丢弃换行符。所以括号内的输出如下所示：

```
echo $EffTimeStamp
echo $InputCtxNm
echo $RunType 
```

但是当你将它传递给 eval as`eval $(...)`时，你有效地得到：

```
echo $EffTimeStamp echo $InputCtxNm echo $RunType 
```

...希望这可以清楚地表明 extra`echo`的来源。如果你只是在每一行的末尾添加一个分号来标记一个显式的命令结束，它应该做你想要的：

```
eval $(echo EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD|sed 's/^/echo $/g;s/=/="/g;s/#/"\necho $/g' | sed  's/=.*$/;/g') 
```

其输出为：

```
20110203-210000
Forigen Exchange Today
EOD 
```

# jquery - javascript脚本块未在django模板中呈现

> ID：10487734
> 
> 赞同：0
> 
> 时间：2012-05-07T19:15:47.210
> 
> 标签：jquery, ajax, django

我正在尝试通过 ajax 在“current.html”上提取一个

处理表单的视图呈现“form.html”

“current.html”类似于：

```
<script>
    // ajax that pulls the form on a#get_form click 
    // fills up div#mod_post with the result 
</script>

<a id="get_form" href="{% url to the view that handles the form %}">get form</a>

<div id="mod_post" style="display:none;">
    {% include "form.html" %}
</div> 
```

一切都很好，直到这里......表单被很好地检索和显示。

“form.html”类似于：

```
<script type="text/javascript" src="/the/script/that/should/handle/the/post.js"></script>

<form id="mod_form" action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
    <table class="form">
        {{ form.as_table }}
    </table>
    <input class="submit" type="submit" value="modifica">
</form> 
```

唯一的问题是，每次渲染 form.html 时，它都不会包含以下部分：

```
<script type="text/javascript" src="/the/script/that/should/handle/the/post.js">
</script> 
```

我在这里做错了什么，显然是的，但我无法发现它。

欢迎任何反馈，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:49:24.003

将相关的 js/css 脚本封装在表单中是一种很好的做法。例如

```
class MyForm(forms.Form):
    field1 = ...
    field2 = ...
    class Media:
        js = ('script_that_handles_the_form.js',) 
```

在你`base.html`有一个像这样的块：

```
{% block scripts %}
  <!--- some scripts that apply to all pages -->
{% endblock %} 
```

然后在你的`form.html`

```
{% block scripts %}
  {{ block.super }}    # retain the standard scripts that apply everywhere
  {{ form.media }}     # add the form specific media/scripts
{% endblock %}

<form id="mod_form" action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
    <table class="form">
        {{ form.as_table }}
    </table>
    <input class="submit" type="submit" value="modifica">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:31:29.353

如果您只是通过 JavaScript 直接转储 HTML 响应，那么这是正常行为。作为安全预防措施，您的浏览器（即所有浏览器）会自动剥离`<script>`JS 通过任意 HTML 字符串响应添加到页面的标签。

# oop - 接口实现是否应该独立

> ID：10487736
> 
> 赞同：1
> 
> 时间：2012-05-07T19:15:49.703
> 
> 标签：oop, design-patterns, ooad

作为面向对象的程序员，我遇到了一些遗留代码，这些代码引起了我的所有质问。

这是经常使用的模式： **一个接口有两个实现，一个实现调用另一个实现的方法。**

现在，我认为应该对其进行重构，以便实现彼此不了解。如何做到这一点很简单。我无法清楚地弄清楚 - 并希望 SO 的好人能帮助我 - 是为什么。

我可以看到理论上的原因——这是一个糟糕的面向对象设计。但是我在这里扮演魔鬼的拥护者并问 - 两个实现相互了解的实际缺点是什么。为什么要花费时间和金钱来摆脱这种（在我看来）反模式？

任何有关此的信息或链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:21:18.827

> 我可以看到理论上的原因——这是一个糟糕的面向对象设计。

为什么？这对我来说听起来完全合理。

例如，假设我想*装饰每个调用 - 例如添加调用频率的统计信息，或添加一些授权检查等。将装饰与**实际*实现分开是有意义的，只需委托：

```
public class DecoratedFoo : IFoo
{
    private readonly IFoo original;

    public DecoratedFoo(IFoo original)
    {
        this.original = original;
    } 

    public string Bar() // Defined in IFoo
    {
        // Update statistics here, or whatever
        return original.Bar();
    }
} 
```

为什么您认为关注点分离是“非常面向对象的设计”？即使装饰类知道*特定实现*并`IFoo`调用不属于`IFoo`自身的成员以提高效率，对我来说似乎并不特别糟糕。这只是一个类知道另一个类，它们碰巧实现了相同的接口。它们比上面*只*知道的例子更紧密地耦合`IFoo`，但它仍然不是“可怕的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:25:07.310

interface1 的 implementation1 知道 interface1 的 implementation2 或与 interface1 的 implementation2 交互没有任何问题。

我认为您刚刚发现了代理模式的预期或非预期实现 [http://en.wikipedia.org/wiki/Proxy_pattern](http://en.wikipedia.org/wiki/Proxy_pattern)

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:19:52.810

第一个实现调用的“其他实现”的方法就是我所说的库函数。将它放在一个单独的模块/文件/项目/任何东西中（取决于您的语言/开发环境），并让两个实现都包含它并从那里使用它。

包含公共代码的某些接口的两个实现绝对没有错，但是当然，公共代码可能应该与每个实现分开，这样您就可以将其中一个加载到您的程序中而不必加载另一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:22:08.530

我对此的想法是

1.  假设在适当的时候，如果您要停用一个实现并且将其单独保留，那么另一个实现没有变化，您不需要对其进行测试。如果没有分离，您需要花时间分离和测试其他实现。

2.  承担单一责任总是更清洁。

# c - 如何在 Eclipse CDT 中查看和修改静态和全局变量

> ID：10487738
> 
> 赞同：2
> 
> 时间：2012-05-07T19:16:00.977
> 
> 标签：c, eclipse, gcc, global-variables, eclipse-cdt

好的，这个问题在网络上的许多上下文中多次出现。但是，我还没有找到足够的答案。似乎无法在 Debug/Variables 视图中显示全局变量。一种解决方法是使用表达式视图。这对于观察变量来说很好，但它不会让你改变它们的内容，就像在变量视图中一样。

现在，可以通过 Memory 视图来做到这一点。这在处理简单变量时是可以的，但在处理复合对象（例如结构）时会变得复杂。

那么，如何在 Eclipse CDT 中轻松查看和更改全局变量和静态变量的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:02:14.527

似乎可以在表达式视图中更改全局变量*的值。*由于某种原因，这在早些时候不起作用，这就是我问这个问题的原因。

显然，它只能在表达式为左值时起作用。

（我不会删除这个问题，以防将来对某人有所帮助，但是如果模组认为应该删除它，那对我来说很好）

# cordova - 在服务器端检测 phonegap 用户代理并禁止非 phonegap 下载

> ID：10487743
> 
> 赞同：0
> 
> 时间：2012-05-07T19:16:33.060
> 
> 标签：cordova, user-agent, server-side

我正在使用 PhoneGap 构建一个移动应用程序，它会从我的服务器下载一个文件，我有 php.ini 文件。我正在寻找一种方法来区分我的 phonegap 应用程序和 php.ini 中的“所有其他浏览器”。我知道如何在 php 中查找用户代理字符串，我的问题是每个平台（android、iphone 等）的用户代理中是否有一个字符串（如“PhoneGap”），或者是否有办法告诉 PhoneGap 使用我的自定义用户代理字符串。

可选地，如果有一个想法我可以做什么以便在PhoneGap FileTransfer 要求它们时提供这些文件，而不是在另一个浏览器这样做时，是受欢迎的。如果有其他方法，我不想强​​迫用户创建帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:05:28.513

最好的方法是将附加参数与上传调用一起传递。您可以确定页面是否从 PhoneGap 加载或不使用 JavaScript，请在[​​此处](https://stackoverflow.com/questions/8068052/phonegap-detect-if-running-on-desktop-browser/13252184#13252184)阅读我的帖子。

另一种方法，但它并不完美是在 UserAgent 中搜索它是否是 iPhone/iPad/iPod/Android/BlackBerry/...

# javascript - 试图创建一个 javascript 对象

> ID：10487750
> 
> 赞同：1
> 
> 时间：2012-05-07T19:17:08.933
> 
> 标签：javascript

抱歉-我知道这很容易，但我只是想学习。

我试图理解 Javascript 中的对象，我只是想让 obj.alertHello() 来提醒你好，但它正在提醒“未定义”这是为什么？- 我真的要为此秃头了！

感谢任何帮助，非常感谢！:)

```
var obj=function(){    
this.sayHello="hello";

};

obj.prototype={
    alertHello: function(sayHello){
    alert(sayHello)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:18:33.463

`sayHello`并且`this.sayHello`是不同的变量。你想要更像这样的东西：

```
var obj=function(){    
    this.sayHello="hello";
};

obj.prototype={
    alertHello: function(sayHello){
        alert(this.sayHello);
    }
};

var instance = new obj();
instance.alertHello();
​ 
```

# c++ - 在 C++ 中使用 telnet 通过 TCP/IP 与 QNX Neutrino 通信

> ID：10487751
> 
> 赞同：3
> 
> 时间：2012-05-07T19:17:16.450
> 
> 标签：c++, tcp, client, telnet, qnx-neutrino

我可以通过 PuTTY 访问 telnet 服务器，它打开一个终端并允许我发送命令来检索数据/日志和启动/停止进程。我想开始研究如何通过 C++ 访问该服务器，以便自动化连接和测试命令。基本上，我需要一个 telnet 客户端，它可以连接和验证自身，并像在终端中输入一样向服务器写入和读取数据。我应该从哪里开始我的研究？我尝试了几个例子，包括：

[http://lists.boost.org/boost-users/att-40895/telnet.cpp](http://lists.boost.org/boost-users/att-40895/telnet.cpp)

当我编译并运行

```
./telnet 192.168.1.26 23 
```

什么都没有发生，但是当我使用 PuTTY 连接到服务器时，我得到：

```
QNX Neutrino (localhost) (ttyp0)

login: root  
password:  
# 
```

任何帮助将不胜感激。
注意：
- 我正在使用运行 OS X 版本 10.7.3 和 i686-apple-darwin11-llvm-gcc-4.2 的 Mac
- 我被允许这样做。
- 我在我的 Windows 7 机器上使用 PuTTY，连接是以太网到 USB 以太网适配器，本地连接属性 > TCP/IPv4 属性的设置：是特定的 IP 地址、子网掩码和默认网关，可能是有用的信息。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:34:20.117

1.  了解如何对 TCP/IP 套接字进行编程。您可以使用 boost 库或直接的 C 风格 BSD 套接字。一些信息[在这里](http://www.cis.temple.edu/~giorgio/old/cis307s96/readings/docs/sockets.html)，[这里](http://www.google.com/url?sa=t&rct=j&q=bsd%20sockets&source=web&cd=1&ved=0CG8QFjAA&url=http://en.wikipedia.org/wiki/Berkeley_sockets&ei=uyKoT4LBFtSgiQfQnLGmAw&usg=AFQjCNE6liNHEFW3sMjc15OHRpgG_lm8Rg&cad=rja)和[这里](http://www.cs.vu.nl/~jms/socket-info.html)。如果你喜欢纸，你可以得到第 1 卷[Unix Network Programming](http://www.unpbook.com/)。这本书享有很高的声誉，您只需在 StackOverflow 上*提及它即可获得投票。*

2.  您想要做的与 和 的功能非常`telnet`匹配`expect`。您可以在[此处](http://www.gnu.org/software/inetutils/)和[此处](http://expect.sourceforge.net/)查看那里的资源以获取想法。

3.  考虑仅`expect`用于解决您的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:31:27.483

您应该首先学习您尝试连接的系统的网络 API。Telnet 只是通过 tcp/ip 套接字直接发送文本。

# python - Google Docs Api Python 防止在主页中看到集合资源

> ID：10487758
> 
> 赞同：1
> 
> 时间：2012-05-07T19:17:48.963
> 
> 标签：python, resources, google-docs-api

我正在尝试使用 google docs api (python) 创建集合和子集合，并在创建的子集合中上传文件。

第一个问题：下面的代码一切正常，层次结构正常（文件夹1下的子文件夹1，子文件夹1下的上传文件），**但唯一的问题是最终用户的主页中也可以看到子文件夹和文件**。我只想在 Home 中看到更高级别的集合。

**有没有办法阻止资源（子集合和文件）显示在 Home 中？**

注意：我尝试了以下替代方法，但仍然得到相同的结果：1）create_resource 的参数 'collection=' 具有相同的结果 2）cli​​entlogin 或 twoleggedoauth 具有相同的结果

第二个问题： **是否可以设置描述字段？**

```
import gdata.data
import gdata.docs.client
import gdata.acl.data
import gdata.docs.data

GAPPS_OAUTH_CONSUMER_KEY = "xxxx"
GAPPS_OAUTH_CONSUMER_SECRET = "xxxxx"
GAPPS_ADMIN_ACCOUNT = "x"

GAPPS_CLIENT_LOGIN_LOGIN='xxxxx'
GAPPS_CLIENT_LOGIN_PWD='xxxxx'
GAPPS_CLIENT_LOGIN_APP='xxxxxx'

filepath = 'C:\\Users\\xxxxx\\Pictures\\'
filename = 'xxxxxx.png'

path = filepath + filename

client = gdata.docs.client.DocsClient()
client.ssl = True
#client.ClientLogin(GAPPS_CLIENT_LOGIN_LOGIN, GAPPS_CLIENT_LOGIN_PWD, GAPPS_CLIENT_LOGIN_APP)
client.auth_token = gdata.gauth.TwoLeggedOAuthHmacToken(GAPPS_OAUTH_CONSUMER_KEY, GAPPS_OAUTH_CONSUMER_SECRET, GAPPS_ADMIN_ACCOUNT)

# create a folder

collection1 = gdata.docs.data.Resource('folder', title = 'Script Folder')
collection1 = client.create_resource(collection1)

# create a sub-folder in collection1

subcollection1 = gdata.docs.data.Resource('folder', title = 'Script Sub Folder')
subcollection1 = client.create_resource(subcollection1)

res = client.move_resource(subcollection1, collection = collection1, keep_in_collections = False)

# Upload the resource in subcollection1

doc = gdata.docs.data.Resource(type = 'file', title = filename)
media = gdata.data.MediaSource()
media.SetFileHandle(path, 'application/octet-stream')
create_uri = gdata.docs.client.RESOURCE_UPLOAD_URI + '?convert=false'
doc = client.CreateResource(doc, create_uri = create_uri, media = media)
print 'Created, and uploaded:', doc.title.text, doc.resource_id.text

client.move_resource(doc, collection = subcollection1, keep_in_collections = False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:54:58.707

这是解决方案：

```
subcollection1 = gdata.docs.data.Resource('folder', title = 'Script Sub Folder')
subcollection1.AddCategory(gdata.docs.data.LABELS_NS, gdata.docs.data.LABELS_NS + "#" +gdata.docs.data.HIDDEN_LABEL, gdata.docs.data.HIDDEN_LABEL)
subcollection1 = client.create_resource(subcollection1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T06:57:16.363

还有另一种更简单的方法。

```
subcollection1 = client.create_resource(subcollection1,collection=collection1) 
```

通过这种方法，脚本子文件夹永远不会出现在您的根文件夹中。

# javascript - 在屏幕中央显示 jQuery 的 Datepicker

> ID：10487759
> 
> 赞同：0
> 
> 时间：2012-05-07T19:18:02.660
> 
> 标签：javascript, jquery, css

这是默认生成的代码

```
<div id="ui-datepicker-div" class="ui-datepicker 
  ui-widget ui-widget-content ui-helper-  clearfix ui-corner-all 
  ui-datepicker-multi ui-datepicker-multi-2" style="width: 34em; 
  position: absolute; left: 349px; top: 453px; z-index: 1; display: block; "> 
```

这样做的问题是日期选择器显示在触发器输入旁边，而不是我想要的中心。

您可以在此处查看演示站点：http: [//enniakiosk.spin-demo.com/travelers.php](http://enniakiosk.spin-demo.com/travelers.php)

有谁知道如何`.ui-datepicker`使用 javascript 使课程居中？显然，CSS 不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:26:53.293

一种快速而肮脏的方式来完成你想要的事情可以通过 CSS 来完成。您可以直接覆盖 jquery UI 样式或将一些样式添加到您自己的样式表中。这依赖于使用“！important”，但它可以工作，并且您无需深入研究 UI 代码。

这是您可以添加到自己的样式表中的内容。您将需要生成的日期选择器的大小。这里我只是使用[通用 demo](http://jqueryui.com/demos/datepicker/)的大小。

```
#ui-datepicker-div {
position: absolute !important;
left: 50% !important;
top: 50% !important;
margin-left: -96px; /* approx half the height of the datepicker div - adjust based on your size */
margin-top: -73px; /* half the height of the datepicker div - adjust based on your size */
} 
```

在 CSS 中使用“！important”是一种应该避免的拐杖，但只是展示了它是如何完成的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T01:59:42.837

如果您使用该[`.dialog`](http://api.jqueryui.com/datepicker/#method-dialog)方法，它接受一个参数，`pos`该参数是`[x, y]`您希望对话框出现的位置的坐标数组（上/左）。

此解决方案要求您计算顶部和左侧值，以使对话框看起来居中在页面上。这取决于盒子的大小和视口的大小，您可以通过`$(window).height()`和来确定`$(window).width()`。您必须即时生成它。

# c# - 错误：值不能为空。参数名称：实体

> ID：10487764
> 
> 赞同：0
> 
> 时间：2012-05-07T19:18:31.050
> 
> 标签：c#, asp.net, linq

使用 linq 插入数据时出现此错误。在这个我有一个表，它有两列，一列是标识列，另一列是可为空的选框 txt。请提供解决方案。我的代码在这里。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            Marquee existing = context.Marquees.FirstOrDefault();
            if (existing != null)
            {
                 existing.marquee1 = txtMarquee.Text;
                 context.SubmitChanges();
                 lblmsg.Text = "Data Saved Successfully";
                 generalFunction.goGreen(lblmsg);
            }
            else
            {
                Marquee newMarquee = new Marquee();
                 newMarquee.marquee1 = txtMarquee.Text;
                context.Marquees.InsertOnSubmit(existing);
                context.SubmitChanges();
                lblmsg.Text = "Data Saved Successfully";
                generalFunction.goGreen(lblmsg);
            }
        }
        catch (Exception ee)
        {
            lblmsg.Text = "Error: " + ee.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:24:52.437

你真的需要提供更多信息。由于缺乏信息，有点难以分辨，但您已经创建`newMarquee`但随后您已传递`existing`到`InsertOnSubmit`函数中。我不知道它`existing`是从哪里来的，因为它不在代码中，但也许那是空的，这就是你收到这个错误的原因？

您说您编辑了代码，但问题仍然存在于您显示的内容中：在“else”部分中，existing 为空，因此当您将其传递给 InsertOnSubmit 时，它可能会引发错误。当它为空时，InsertOnSubmit 将抛出那个确切的错误。你希望那条线`context.Marquees.InsertOnSubmit(newMarquee);`改为。

# javascript - Javascript string.indexOf('') 导致网页挂起

> ID：10487775
> 
> 赞同：1
> 
> 时间：2012-05-07T19:19:30.660
> 
> 标签：javascript

这行代码似乎使我的网页变得无响应，我不确定为什么，它确实运行了代码。这是 Javascript。我在 firefox 上使用 Firebug 进行调试。

```
i = response.indexOf(','); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:23:45.823

您可能正在使用循环：

```
for (i=0; i<10; i++) {
    // Smart move here:
    i = 'x'.indexOf('y'); // Not found, so i = -1;
} 
```

设置`i`为 -1 会导致循环无限继续。确保两个`i`变量都不会泄漏到公共范围，方法是在[`var`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)之前添加前缀`i`，并且不要在同一范围内多次使用相同的变量。

# matlab - 在 MATLAB R2012a 中加载 Libtiff

> ID：10487778
> 
> 赞同：1
> 
> 时间：2012-05-07T19:19:52.037
> 
> 标签：matlab, loadlibrary, libtiff

我正在尝试在 MATLAB R2012a 中加载 libtiff 3.9.5，情况是：Matlab 说我需要一个编译器和 Perl。我安装了 Visual Studio 2010 和 perl 5.14.2。mex -setup 说编译器没问题，但 Perl 没有。运行 loadlibrary 我遇到了很多错误（其中输入字符无效且未知变量）。我发现 Matlab 在 Windows 系统中查找 shrlib.dll，所以我在 Internet 上找到了一个 libtiff.dll，使用它并没有任何变化。接下来我得到 Big TIFF libtiff 4.1，它有一个 libtiff.lib 并且没有再次更改。由于我是 Matlab 的新手，我只是想不出该怎么做。所以我问是否有人会帮助我。非常感谢提前和最好的问候。

PS 我将 libtiff 文件夹放在 R2012a 目录中，并将其设为当前文件夹。

# java - System.out.println , System.err.println

> ID：10487781
> 
> 赞同：3
> 
> 时间：2012-05-07T19:19:58.617
> 
> 标签：java

我有这个代码：

```
 System.err.print("number of terms =   ");
 System.out.println(allTerms.size());
 System.err.print("number of documents =   ");
 System.out.print("number of documents =   "); 
```

我认为结果应该是这样的：

```
number of terms = 10
number of documents =1000 
```

但结果是

```
10
1000
number of terms =   number of documents = 
```

为什么，以及如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T19:23:01.067

流出和错误是独立的。

要获得所需的输出，您必须刷新流或仅使用一个流进行所有输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:22:21.323

解决它

```
System.out.print("number of terms = ");

System.out.println(allTerms.size());

System.out.print("number of documents = ");

System.out.print("number of documents = "); 
```

System.out.println -> 将输出发送到标准输出流。一般监控。

System.err.println -> 将输出发送到标准错误流。一般监控。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T19:32:03.120

```
System.out.print ("He");  
System.out.print ("llo ");  
System.out.println ("World"); 
```

保证打印“Hello World”，但是

```
System.out.print ("He");  
System.err.print ("llo ");  
System.out.println ("World"); 
```

可能会打印“llo He World”或“HeWorld llo”。它们是 2 个不同的流。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T19:22:31.353

`System.err.print()`打印到可能不会显示在控制台中的 stderr。将它们切换到`System.out.print()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T19:23:47.127

System.err 和 System.ou 是两个不同的东西。使用 System.out，您可以使用 system.err 写入 stdout，您正在写入 stderr。

尝试用 System.out 替换 System.err，您会发现问题消失了。

然后你必须更换：

```
System.err.print("number of terms = "); 
```

和

```
System.out.print("number of terms = "); 
```

要更改 println 的颜色，请检查该问题：[如何为 System.out.println 输出着色？](https://stackoverflow.com/questions/1448858/how-to-color-system-out-println-output)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T19:41:25.667

在每个 print* 语句之后，使用相应流的 flush 方法。这可能会给你想要的输出。

```
System.err.print("number of terms =   "); System.err.flush();  
System.out.println(allTerms.size()); System.out.flush();  
System.err.print("number of documents =   "); System.err.flush();  
System.out.print( numberOfDocuments ); System.out.flush(); 
```

将导致：

```
number of terms =   10
number of documents =   1000 
```

希望您正在做一个控制台应用程序，并且正如您所期望的那样`err`以红色打印。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T04:55:06.080

这可能是原因：`err`两者`out`都有不同的输出流，将根据访问控制台的顺序进行打印。

# if-statement - 中缀、后缀、前缀之间的 clisp 转换（我正在尝试 if 语句）

> ID：10487786
> 
> 赞同：-1
> 
> 时间：2012-05-07T19:20:27.767
> 
> 标签：if-statement, lisp, common-lisp, clisp

我正在使用 CLISP 并且正在尝试

```
(if ( = (first '(+ 2 3)) + ) 10 20) //10 and 20 are just placeholders 
```

我正在尝试创建一个在中缀、后缀和前缀之间转换的程序。我相信我的第一步应该是在字符串中找到符号 +、-、* 和 /。输入中不会有括号。所以，我正在尝试系统地搜索每个符号。我的方法的优点是能够将 * 优先于 + 等。

我对我的方法有一个大致的了解，但任何想法都会很好。我的第一个想法是：

```
(append (rest '(+ 2 3)) (list (first '(+ 2 3)))) 
```

是的，我打算使用递归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T00:40:10.057

更多谷歌搜索让我[了解 Common Lisp 中的 eq、eql、equal 和 equalp 有什么区别？](https://stackoverflow.com/questions/547436/whats-the-difference-between-eq-eql-equal-and-equalp-in-lisp)所以我决定实施“eq”而不是“=”，它按预期工作。

# php - Jquery没有连接到.php

> ID：10487791
> 
> 赞同：0
> 
> 时间：2012-05-07T19:20:37.413
> 
> 标签：php, jquery, ajax

我的 jquery 遇到了一些问题。我不确定它是否连接到 doc.php，但我没有将任何内容插入到我的数据库中。

我在 doc.php 中有一个我知道正在工作的插入命令。

我正在尝试创建一种从 doc.php 更新数据库中价格的方法，该方法一次搜索一个项目。

doc.php 通过 var 搜索，然后在同一页面中更新。

然后，foreach 循环函数一个一个地获取 var，将它们发送到 doc.php 页面，然后由 var 搜索并更新到数据库中。

```
<?php

mysql_connect("", "", "") or die(mysql_error());

mysql_select_db("") or die (mysql_error());

$sql = "SELECT var FROM table";
$query = mysql_query($sql) or die (mysql_error());
while ($result = mysql_fetch_array($query)) {

$variable = array($result['var']);

foreach ($variable as $variable1) {

?>
<script src="jquery-1.7.2.min.js" type="text/javascript">

$(function() {
    var valueToSend = '<?php echo $variable1; ?>';

$.ajax({
    url: "doc.php",
    dataType: "json",
    type: "POST",
    data: { Variable: valueToSend },
    success: function (m) {
        alert(m);
    },
    error: function (e) {
      alert("Something went wrong ...: "+e.message);
    },
  }); /* end ajax*/
  e.preventDefault();
});
</script>

<?php

}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:54:24.013

First of all, what do you want to do with this code? If you want to read & write to db using php, ajax call is unnecessary. If you want to practice ajax & php you need to read some howto because your code is somewhere strange ;). [This is nice collection of tutorials for jQuery](http://net.tutsplus.com/articles/web-roundups/jquery-for-absolute-beginners-video-series/) and [some for PHP](http://devzone.zend.com/6/php-101-php-for-the-absolute-beginner/) read some and practice.

# html - JpGraph 错误：HTTP 标头已发送

> ID：10487796
> 
> 赞同：2
> 
> 时间：2012-05-07T19:21:05.473
> 
> 标签：html, jpgraph

问题是 JpGraph 没有正确显示在我的网页上。奇怪的是，如果我单独运行上面的代码，那么它就可以工作。但是如果我将它插入到我的主代码中，它将无法生成上面显示的消息。PS我正在使用'ob_start();'，但它并没有解决问题。

```
// A new graph with automatic size
$graph = new GanttGraph (0,0, "auto");

//  A new activity on row '0'
$activity = new GanttBar (0,"Project", "2001-12-21", "2002-02-20");
$graph->Add( $activity);

// Display the Gantt chart
$graph->Stroke();
?> 
</div>

JpGraph Error: HTTP headers have already been sent.
Caused by output from file index.php at line 85.
Explanation:
HTTP headers have already been sent back to the browser indicating the data as text before the library got a chance to send it's image HTTP header to this browser. This makes it impossible for the library to send back image data to the browser (since that would be interpretated as text by the browser and show up as junk text).

Most likely you have some text in your script before the call to Graph::Stroke(). If this texts gets sent back to the browser the browser will assume that all data is plain text. Look for any text, even spaces and newlines, that might have been sent back to the browser.

For example it is a common mistake to leave a blank line before the opening "<?php". 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T20:09:43.300

JpGraphs 不能存在于带有 html 的文件中。它们必须在一个纯 php 文件中。为了解决这个问题，我创建了一个单独的文件来生成图表，并将整个事情变成一个函数。最后，改变

```
$graph->Stroke(); 
```

至

```
$graph->Stroke(".<filepaht>.jpg"); 
```

然后，在您的 index.php 页面中，引用图像文件。

所以，看起来你需要的是，

创建jpgraph.php：

```
<?php 
function GenGraph (<input variables>) {

    // A new graph with automatic size        
    $graph = new GanttGraph (0,0, "auto");        

    //  A new activity on row '0'        
    $activity = new GanttBar (0,"Project", "2001-12-21", "2002-02-20");        
    $graph->Add( $activity);        

    // Display the Gantt chart        
    $graph->Stroke("./foler/file.jpg");
}
?> 
```

索引.php：

```
...
<div>
...
<?php
include 'createjpgraph.php';
GenerateGraph(<variables>);
?>
<img src=\"./folder/file.jpg\" />
</div> 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T07:06:50.490

您甚至可以在同一个 html 文档中执行此操作 - 首先将图形写入文件，然后显示它...

```
//Code generating your graph here ...

// Finally output the image to a file
$graph->Stroke("/var/www/html/tmp/out.jpg");

//end of php code
?>

<!-- now include the newly generated image in the HTML -->
<img src="/tmp/out.jpg">

</body>
</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T09:18:07.817

在我的情况下，似乎无法覆盖该函数正在创建的 jpeg 文件......

覆盖它..我更改了我的 JPGraph 文件`gd_image.inc.php`..你必须注释掉上面写着的行`JpGraphError::RaiseL(25111,$aStrokeFileName)`

# java - 如何使用特定的 javac 二进制版本？

> ID：10487802
> 
> 赞同：-2
> 
> 时间：2012-05-07T19:21:22.970
> 
> 标签：java, javac

我已经在我的 Windows PC 上安装了 JDK 5、JDK 6 和 JDK 7。我在 PATH 变量中添加了所有三个版本的二进制文件夹。我可以通过 IDE 为不同的项目使用不同的版本。但是，如何在 cmd 或 PowerShell 中使用特定版本的 javac？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T19:24:13.937

cmd 将选择路径中的第一个 JDK。你只想要一个那里。

要使用不同的变量，您可以使用 JAVA_HOME 之类的路径变量，并在需要时更改它。或者像 Bhavik Ambani 指定的那样去做。更改路径后，您必须重新启动 cmd 才能将其拾取。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T19:25:13.913

为此，您应该编写 javac 位置的显式路径。

例如（对于 PowerShell）

```
& "H:\Program Files\Java\jdk1.7.0\bin\javac.exe" JavaFile 
```

例如（对于 cmd）

```
"H:\Program Files\Java\jdk1.7.0\bin\javac.exe" JavaFile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T19:24:54.247

`cmd`将选择它在 中找到的第一个二进制文件`PATH`，因此`javac`当您键入`javac`.

您可以创建指向不同版本的链接并为其`javac`命名，例如`javac5`，`javac6`并`javac7`从命令行使用它们。

如果您`javac`从构建系统、makefile 或脚本调用，则可以使用完整路径。

# ruby - 在 2 个 Rails API（单独的应用程序）之间共享模型

> ID：10487805
> 
> 赞同：22
> 
> 时间：2012-05-07T19:21:42.127
> 
> 标签：ruby, ruby-on-rails-3, api

我目前正在使用 Ruby on Rails 构建 2 个 API。一个 if 用于读取（查找对象、查询），另一个用于实际写入，涉及一种带有队列和另一个 API 的复杂过程。这两个应用程序都需要它们内部完全相同的模型和逻辑。

我的问题是，在 2 个 Rails 应用程序之间共享模型规范（关系、范围、方法）的最常见的最佳实践或方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-01T12:02:58.043

你可以看看：

*   [在不同的 Rails 应用程序之间共享 ActiveRecord 模型和数据的最佳方式？](https://stackoverflow.com/questions/4308639/best-way-to-share-activerecord-models-and-data-between-different-rails-apps)
*   [两个 Rails 应用程序共享一个模型文件夹](https://stackoverflow.com/questions/660247/two-rails-apps-sharing-a-model-folder)
*   [两个 Rails 应用程序之间的共享模型 - Workflow 的理想解决方案是什么？](https://stackoverflow.com/questions/7024741/shared-models-between-two-rails-apps-what-is-the-ideal-solution-for-workflow)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:16:43.230

我这样做的方式是“可安装引擎”。查看[Ryan Bates 的优秀 Railscast入门和](http://railscasts.com/episodes/277-mountable-engines)[api.rubyonrails.org](http://api.rubyonrails.org/classes/Rails/Engine.html)上的引擎部分了解更多详细信息。

最好的问候， 曼迪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T17:48:32.283

我这样做的诀窍是不实际使用 Rails 技巧。我使用“git”技巧，并从第三个共享代码仓库中提取代码。我将它作为引擎和外部 git 引用放入两个应用程序中。

这需要更多的工作，但是一旦您在一个应用程序中完成了一次，就很容易将其用作下一个应用程序的模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T14:04:29.733

如果您只想共享模型，可以将其他项目模型文件夹添加到您的自动加载路径中：

```
rails new test1
rails new test2
cd test1
rails g model User 
cd ../test2/
# ACTION REQUIRED: edit config/application.rb adding this line
# inside the class Application < Rails::Application block:
#
# config.autoload_paths += %W(#{config.root}/../test1/app/models)
#
mkdir db/migrate
cp ../test1/db/migrate/*_create_users.rb db/
mv db/*_create_users.rb db/migrate/
rake db:migrate
rails r 'puts User.inspect' 
#=> User(id: integer, created_at: datetime, updated_at: datetime) 
```

您还可以`app/models`使用第三个共享文件夹将这两个文件夹设置为私有文件夹，并将其添加到项目中：

```
# config.autoload_paths += %W(/path/to/a/shared/folder) 
```

这个文件夹甚至可以不是每个项目的同一个文件夹，所以它可以是一个 git submodule 的路径，例如（如果你使用 GIT，我推荐这个解决方案）。

另一种选择可能是指向`app/models`带有软链接的共享文件夹

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:26:22.750

你可以尝试 git submodule 来完成这项工作。

> [http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# unreal-development-kit - 在虚幻编辑器中实例化纹理

> ID：10487808
> 
> 赞同：0
> 
> 时间：2012-05-07T19:21:53.750
> 
> 标签：unreal-development-kit

我正在尝试创建一个在单击时抛出一个球（或者说，一个球形射弹）的车辆。我已经让这辆车做正确的事，但我希望它扔一个黄色的球。我创建了一个黄色纹理，但我不知道如何将它专门应用于射弹。我必须在 Unreal Tournament 3 上运行地图，所以我可能无法使用 Unreal Development Kit。

你有一些关于如何做到这一点的线索或想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:53:59.050

您必须将纹理插入材质并将该材质分配给您的射弹网格。您可以在编辑器中执行此操作，也可以通过向 Materials 数组添加条目来覆盖网格组件内部代码中的网格材质，例如：

```
Begin Object Class=StaticMeshComponent (or SkeletalMeshComponent) Name=ProjMeshComp
    StaticMesh=<your mesh>
    Materials(0)=<the material you created>
End Object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:26:23.257

您正在射击的弹丸是自定义弹丸吗？

如果是，请在您的射弹类中查找类似于 Phillip 发布的答案的粒子系统组件或静态网格组件参考。你会看到类似的东西：

```
ParticleSystem'SomePackage.SomeGroup.AssetName'
//or
StaticMesh'SomePackage.SomeGroup.AssetName' 
```

GroupName 可能不存在。

然后打开你的编辑器并在你的内容浏览器中找到包（在本例中`SomePackage`）。右键单击它并确保完全加载它。现在您应该看到您的 ParticleSystem 或静态网格体。如果它是一个粒子系统，你需要在级联中编辑粒子的网格模块来使用你的材质；否则，您只需像往常一样重新分配静态网格材料。

如果它不是自定义弹丸，您需要弄清楚您使用的是哪个弹丸类，然后执行上述操作；一个好的起点是代码的 UTProjectile 层次结构。

# nsoperation - NSOperation：在主线程中添加子视图和慢

> ID：10487809
> 
> 赞同：5
> 
> 时间：2012-05-07T19:21:56.027
> 
> 标签：nsoperation, drawrect, nsoperationqueue

我已经实现了以下 NSOperation 来绘制`N`自定义视图

```
- (void)main {

    for (int i=0; i<N; i++) {

       << Alloc and configure customView #i >>
       //(customView is a UIView with some drawing code in drawrect)

       [delegate.view addSubview:customView];

    }

    NSLog(@"Operation completed");
} 
```

在我有的 customView 的 drawRect 方法中

```
- (void)drawRect {

    <<Drawing code>>

    NSLog(@"Drawed");
    delegate.drawedViews++;

    if (delegate.drawedViews==VIEWS_NUMBER) {
        [delegate allViewsDrawn];
    }
} 
```

因此，当绘制所有视图时，委托会收到通知。

**问题是在“操作完成”日志之后，我需要大约 5 秒才能看到第一个“绘制”日志。**

**为什么会这样？一般来说，我应该如何表现才能找出哪一行代码正在执行这么多时间？**

- - - 编辑 - - -

有时（例如十分之 1）我这样做时会崩溃，因为我不应该`addsubview`从 NSOperation 调用，因为它不是线程安全的。所以我把它改成：

```
[delegate.view  performSelectorOnMainThread:@selector(addSubview:) withObject:customView waitUntilDone:NO]; 
```

现在我没有崩溃了，但是这个过程需要很长时间才能执行！比以前多了5倍。

**为什么这么慢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T12:30:40.060

为了让事情正常工作，我们需要忘记 NSOperation 并使用这个“技巧”

```
dispatch_queue_t main_queue = dispatch_get_main_queue();
dispatch_async(main_queue, ^{

    [self createCustomViews];

    dispatch_async(main_queue, ^{

        [self addAnotherCustomViewToView];

    });
}); 
```

# ios - 访问 CellForRowAtIndexPath 中的 UITextField

> ID：10487814
> 
> 赞同：0
> 
> 时间：2012-05-07T19:22:15.667
> 
> 标签：ios, iphone, xcode, uitextfield

我在单元格上添加 UITextField。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
  static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault      reuseIdentifier:CellIdentifier];
}

myLoc = [[UITextField alloc] initWithFrame:CGRectMake(35, 10, 250, 40)];
myLoc.adjustsFontSizeToFitWidth = YES;
myLoc.textColor = [UIColor blackColor];
myLoc.textAlignment = UITextAlignmentCenter;
myLoc.placeholder = @"Enter Location";
myLoc.returnKeyType = UIReturnKeyDone;
myLoc.autocorrectionType = UITextAutocapitalizationTypeNone;
myLoc.tag = indexPath.row;
myLoc.delegate = self;
[myLoc setEnabled:YES];
[cell addSubview:myLoc];

return cell;
} 
```

在 textFieldShouldReturn 中，我会将文本字段中的文本写入可变数组，并存储在 nsuserdefaults 中。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField{

[myLoc resignFirstResponder];

[locationArray addObject:textField.text];
locName = [NSUserDefaults standardUserDefaults];
[locName setObject:locationArray forKey:@"textName"];
[locName synchronize];

NSLog(@"Done pressed %@",myLoc.text);

return YES; 
```

}

...但是 myLoc.text 总是为空对我有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:44:37.903

在委托方法中，不要使用`myLoc`引用文本字段，而是使用`textField`作为函数参数提供的实际指针。这个实际上应该指向正确的文本字段，因此 textField.text 应该具有正确的值。

附带说明：您在哪里定义`myLoc`？看起来您正在尝试在视图控制器上设置属性。这样，您将始终覆盖该属性。为此，您根本不需要属性，因此只需`myLoc`在函数范围内本地定义，例如`UILabel *myLoc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:48:34.863

你最好创建自己的自定义 UITableViewCell。您可以在此处查看如何创建一个： [教程](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

尝试使用现有的 UITableViewCell 充其量是困难的，最坏的情况是不可能的。您最好使用自定义单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:44:15.353

你的文本不应该是 NULL，因为它是一个 NSString。您确定您在谈论文本字段中的文本吗？

添加 NSLog(@%"@", textField.text); 时输出什么 到你的 shouldReturn 方法？

您确定您在文本字段中输入了吗？此外，即使不输入，您也应该得到 @"" 而不是 nil。

# android - Android SmartWatch 响应 Long_Press 事件

> ID：10487819
> 
> 赞同：0
> 
> 时间：2012-05-07T19:22:24.247
> 
> 标签：android, events, sony-smartwatch

我的 sonyericsson 智能手表很好地响应了触摸事件。现在我必须继续进行其他交互。是否实现了 LONG_PRESS 事件，或者我只是使用有几个向下事件和一个向上事件的事实？

SWIPE_EVENT 的示例也将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:38:19.523

SmartWatch 通过发送触摸事件和滑动事件来支持控制扩展。对于触摸，您将获得例如 PRESS、RELEASE 和 LONGPRESS 事件以及坐标。所以是的，TOUCH_ACTION_LONGPRESS 已实现。例子：

```
@Override
public void onTouch(final ControlTouchEvent event) {
    int action = event.getAction();
    switch(action) {
        case Control.Intents.TOUCH_ACTION_PRESS:
            // Do
            break;
        case Control.Intents.TOUCH_ACTION_RELEASE:
            // Do other
            break;
        case Control.Intents.TOUCH_ACTION_LONGPRESS:
            // Do more
            break;
        default:
            break;
    }
} 
```

对于滑动，您将获得滑动的方向。

```
@Override
public void onSwipe(int direction) {
    switch (direction) {
        case Control.Intents.SWIPE_DIRECTION_UP:
            break;
        case Control.Intents.SWIPE_DIRECTION_LEFT:
            break;
        case Control.Intents.SWIPE_DIRECTION_DOWN:
            break;
        case Control.Intents.SWIPE_DIRECTION_RIGHT:
            break;
        default:
            break;
    }
} 
```

为了您的方便，我们刚刚发布了两个开源扩展：[SmartWatch 开源公告](http://developer.sonymobile.com/wp/2012/05/07/music-player-and-8-game-extensions-for-smartwatch-now-available-as-open-source/)。特别是 8 游戏扩展有一些很好的例子来说明你的要求，即触摸和滑动的例子。

[以及Smart Extension SDK](http://developer.sonymobile.com/cws/devworld/technology/smart-extras/smart-extension-sdk)的链接。

希望这可以帮助！

# python - 为什么我被迫在 python 中使用 os.path.expanduser？

> ID：10487827
> 
> 赞同：25
> 
> 时间：2012-05-07T19:23:03.827
> 
> 标签：python

我确定这是故意的，所以有人可以解释这种行为的理由：

```
Python 2.7.2 (default, Oct 13 2011, 15:27:47) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-44)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from os.path import isdir,expanduser
>>> isdir("~amosa/pdb")
False
>>> isdir(expanduser("~amosa/pdb"))
True
>>>
>>> from os import chdir
>>> chdir("~amosa/pdb")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 2] No such file or directory: '~amosa/pdb'
>>> chdir(expanduser("~amosa/pdb"))
>>> 
```

这真的很烦人，因为毕竟*可以*明确解析其中包含用户名的路径......我想编写可以处理用户可能给我的任何类型输入的代码，但是这种行为需要我调用 expanduser我的代码必须处理的每条路径。这也意味着在我打印出该路径供用户查看的任何地方，它的可读性都会比他们给我的略差。

这似乎与“鸭子打字”的概念不一致，我概括地说我希望python不会对我发牢骚，除非真的有问题......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-07T19:25:01.773

因为底层系统调用不能识别用户路径，并且文件访问 API 是对它们的一个相当薄的包装器。

**此外，对于非 Unix 用户**来说，
如果（例如）`fopen("~foo")`返回“foo: no such user”错误（`"~foo"`例如 Windows 上的有效文件名） ，这将是相当令人惊讶的......<br> 或者，类似地，如果`fopen("~administrator")`返回类似“是目录：C:\Documents and Settings\Administrator\”的错误。

最后，正如评论者所指出的：您将“鸭子打字”与“有用的快捷方式”混淆了，这是两个完全不同的东西：
- 鸭子打字允许我用任何像鸭子一样嘎嘎叫的东西代替鸭子。
- 有用的快捷方式让我可以用任何*可以*让它像鸭子一样嘎嘎叫的东西来代替鸭子。（Python 不像其他一些语言那样“试图让它嘎嘎”）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-15T18:58:33.657

在普通的 Unix 实用程序中，`~amosa`语法由 shell 处理，shell 是调用实用程序的程序。实用程序本身不知道特殊`~`语法（通常）。

因此，如果您的 python 程序被 Unix 上的 shell 调用，它将正常工作：

```
$ python -c 'import sys; print sys.argv[1]' ~drj
/home/drj 
```

Notice how the python program above prints the expanded path, even though it clearly has no code to do the expansion itself. The shell expanded it.

# mysql - 为什么我没有得到这个 DBI/MySQL 查询的输出？

> ID：10487828
> 
> 赞同：2
> 
> 时间：2012-05-07T19:23:04.827
> 
> 标签：mysql, perl, dbi, activeperl

我在 Perl 中编写了以下代码。我有适用于 Windows 7 的 ActivePerl 5.14。

```
#!C:\perl64\bin\perl.exe -wT
use strict;
use warnings;
use DBI;
print "Content-type: text/html \n\n";

# MYSQL CONFIG VARIABLES
my $driver     = "mysql";
my $database   = "test555";
my $tablename3 = "test77";

my $user = "root";
my $pw   = "root";

# PERL MYSQL CONNECT()
my $dbh = DBI->connect("DBI:$driver:$database", $user, $pw,);

my $sth = $dbh->prepare("
        SELECT *
          FROM t6
         WHERE paragraph='PWE1234'
    ");

$sth->execute();
#$dbh->disconnect;
#exit 0; 
```

当程序到达`$dbh->disconnect`时，系统抛出错误；因此将其注释掉。当我将其注释掉时，系统没有抛出任何错误，但我也没有得到输出。

这个查询有结果，我单独用 MySQL 查过一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:24:38.157

没有输出，因为您没有创建任何输出的代码。

调用后，`execute`您需要调用其中[`fetch`一种方法](https://metacpan.org/module/DBI#fetchrow_arrayref)并使用返回的数据结构做一些事情。

# ruby-on-rails - Rails：根据失败的activeRecord保存指定自定义操作

> ID：10487831
> 
> 赞同：0
> 
> 时间：2012-05-07T19:23:12.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

```
class Subscription < ActiveRecord::Base
  validates :feed_id, presence: true, uniqueness: true 
```

现在我验证了用户不能按照上述代码两次订阅相同的提要，我想在通知中指定他们已经订阅了提要。如果验证失败，我该如何指定条件，发送除通用“订阅不成功”以外的通知

```
class SubscriptionsController < ApplicationController
def new
#do things
    if @subscription.save
      redirect_to reader_url, notice: "You are now subscribed to: "+feed.title
    else
      redirect_to reader_url, notice: "Subscribe was unsuccessful!"
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:25:31.737

如果验证失败，它将填充`@subscription.errors`，您可以根据需要检查和显示消息。

# c#-4.0 - 实体框架生成没有 where 子句的 sql 查询

> ID：10487836
> 
> 赞同：0
> 
> 时间：2012-05-07T19:23:37.783
> 
> 标签：c#-4.0, entity-framework-4

在我的一个数据访问类中使用 Entity Framework 4.3 我有一个像这样的通用函数

```
 public List<Company> Query(Func<Company, bool> expression)
    {
        return MyDbContext.Instance().Company.Where(expression).ToList();
    } 
```

我将它从业务层类中用作 MyDAL.Query(a => a.Name.Contains(textToSearch))。

尽管 ofEntity Framework 返回了正确的结果，但我不知道为什么它不是生成带有 Where 子句的 Sql 查询语句，如“Where name like '%' + textToSearch + '%'”，而是生成一个没有 where 的 sql 查询语句子句查询所有表行。显然，这是非常无效的。

另一方面，如果在我的数据访问类中，我编写了这样的方法：

```
 public List<Company> GetLikeName(string textToSearch)
    {
        return MyDbContext.Instance().Company.Where(a => a.Contains(textToSearch)).ToList();
    } 
```

它正确生成带有 where like 子句的 Sql。

为什么如果我使用通用查询从数据库中检索结果，指定要从我的业务类中查询的表达式，它会生成一个没有 where 子句的 Sql 语句？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:34:47.510

您需要将表达式参数作为`Expression<>`：

```
public List<Company> Query(Expression<Func<Company, bool>> expression) 
```

如果您只传递 a `Func<>`，则`IEnumerable.Where`调用 then 而不是`IQueryable.Where`，并且它在代码中运行，而不是在 SQL 中。

# sql - 在 Oracle SQL Developer 中显示 DB2 表

> ID：10487837
> 
> 赞同：1
> 
> 时间：2012-05-07T19:23:41.870
> 
> 标签：sql, database, oracle, db2, oracle-sqldeveloper

更新：*如果有人知道一个免费的工具，并且会显示并让我编辑存储在 Zos 系统上的 DB2 表数据，我也欢迎作为答案。我真正想做的就是找到一个不错的 Windows GUI 界面来避免使用 3270 环境。*

* * *

我正在使用 Oracle SQL 开发人员连接到 DB2 数据库。数据库中有几个表，但是当我启动连接或进行查询时，我没有看到它们列出来。

我在 zOS 上使用 DB2，并且与以下 2 个驱动程序建立了连接 db2jcc.jar db2jcc_license_cisuz.jar

有谁知道这是我必须忍受的东西，还是我缺少一些东西来展示所有的桌子？此外，如果人们知道为什么我不能编辑内联查询结果，那就太好了。它们似乎是只读的。

仅供参考，模式浏览器也不允许我做任何事情。

![在此处输入图像描述](../Images/7c89921c887b9436c682844b8f4b36ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:53:41.873

在工作中我们使用 DbVisualizer。您的大型机 DBA 需要为您正在连接的帐户提供查看系统目录的权限。

[DBVIS](http://www.dbvis.com/)

# java - Java 限制资源使用

> ID：10487840
> 
> 赞同：15
> 
> 时间：2012-05-07T19:23:48.313
> 
> 标签：java, cpu, cpu-usage

有没有办法限制java使用的核心数量？

同样，是否有可能限制该核心的使用量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:20:00.820

您可以在 linux 上使用任务集。您也可以降低进程的优先级，但除非 CPU(S) 很忙，否则进程将获得尽可能多的 CPU。

我有一个用于将线程专用于核心的库，称为 Java Thread Affinity，但它的用途可能与您的想法不同。你能澄清你为什么要这样做吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:32:29.993

我认为没有内置的 JVM 选项可以进行此类调整，但是您可以通过设置 JVM 进程的优先级和/或 CPU 亲和性来限制 CPU 使用率。如果您使用的是 Linux，请查看[CPULimit](http://cpulimit.sourceforge.net/)，它是一个非常棒的工具来处理这些资源限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-02T08:17:39.423

[https://github.com/haosdent/jcgroup](https://github.com/haosdent/jcgroup) jcgroup 是您的最佳选择。你可以使用这个库来限制 CPU 份额、磁盘 I/O 速度、网络带宽等。

# asp.net - C# 日历工具 ASP.NET

> ID：10487842
> 
> 赞同：0
> 
> 时间：2012-05-07T19:24:04.637
> 
> 标签：asp.net

所以我正在尝试创建一个从 SQL 数据库中提取日期的日历工具。

我在这里创建了一个 TableAdapter：http: [//bit.ly/KRaTvr](http://bit.ly/KRaTvr)

这是我必须创建日历的一小部分 ASP：

```
<asp:Calendar ID="calEvents" runat="server"> </asp:Calendar> 
```

然后我在我的项目中使用 C# 来提取信息。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using BreakyBottomTableAdapters;

public partial class Events : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

        //Data Table
        BreakyBottom table;
        //Table Adapter
        BreakyBottomTableAdapters.ScheduleDate ta;
        ta = new BreakyBottomTableAdapters.ScheduleDate();
        //Populate the table using the Table Adapter passing current date
        table = ta.GetData(e.Day.Date);
        //Check the number of rows in the data table
        if (table.Rows.Count > 0)
        {
            //Change the background colour to gray
            e.Cell.BackColor = System.Drawing.Color.Gray;
            //Allow the Day to be selected
            e.Day.IsSelectable = true;
        }

    }
} 
```

现在我知道我错过了一些东西，但我一生都无法弄清楚它是什么。

这是我得到的编译错误的屏幕截图：http: [//bit.ly/ISuVsT](http://bit.ly/ISuVsT) - 我知道我可能遗漏了一些非常明显的东西，但我们将不胜感激。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:42:15.213

编译器告诉您`EventArgs`没有任何被调用的成员`Day`，您显然在代码中错误地使用了这些成员：

```
protected void Page_Load(object sender, EventArgs e)
{
  ....
  table = ta.GetData(e.Day.Date); //WRONG: Day is not a member of EventArgs
} 
```

如您所述，如果想法是使用当前日期，请执行以下操作：

```
 table = ta.GetData(DateTime.Now); 
```

# c# - 生成 Microsoft Docs 的缩略图

> ID：10487848
> 
> 赞同：0
> 
> 时间：2012-05-07T19:24:19.100
> 
> 标签：c#, asp.net, ms-office

只是想知道是否可以使用 C# 即时创建 Microsoft Word 文档的缩略图/GIF 图像？

我正在开发一个 Web 应用程序，该应用程序需要生成和显示各种 Microsoft 文档（如 word、excel、ppt 等）的缩略图。

他们似乎能够在 Microsoft.com 上做到这一点（例如，参见[http://office.microsoft.com/template...3601033&CTT=98](http://office.microsoft.com/template...3601033&CTT=98)） - 有没有这样做的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:33:10.240

对的，这是可能的。你可以通过这些链接：

*   [http://support.microsoft.com/?kbid=319350](http://support.microsoft.com/?kbid=319350)
*   [http://www.geekpedia.com/tutorial219_Extracting-Icons-from-Files.html](http://www.geekpedia.com/tutorial219_Extracting-Icons-from-Files.html)

# javascript - jquery .val() += 成语

> ID：10487850
> 
> 赞同：12
> 
> 时间：2012-05-07T19:24:26.510
> 
> 标签：javascript, jquery, idioms

这个 jQuery 片段最清晰的常用习语是什么？

```
$('#someTextarea').val( $('#someTextarea').val() + someString ); 
```

将原始代码包装在一行函数中感觉很笨拙

编辑：所以我可以传递一个很酷的函数......但我的真正意图是针对 jsfiddles，我目前在其中做这样的事情：

```
function lazylog (str) { 
    $('#ta').val( $('#ta').val() + str + '\n' );
}
// or
function lazylogPlain (str) {
    document.getElementById('ta').value += str + '\n';
}

// view results of little experiments
lazylog( test1() );
lazylog( test2() );
lazylog( test3() );
// etc... 
```

不知道该上下文是否会产生不同的答案，或者只是让我看起来真的很懒，因为想要输入更少的内容。 `console.log`不算，我想要textarea。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-07T19:34:58.127

只是不要使用 jQuery。

```
document.getElementById('someTextarea').value += someString; 
```

将更清晰、更快，并且与 jQuery 代码段一样好用。如果你真的想使用`$`选择器，只有一个元素你也可以

```
$('#someTextarea')[0].value += someString; // least to type 
```

其他可能性是[`.val()`](http://api.jquery.com/val/)具有功能的方法

```
$('#someTextarea').val(function(index, oldValue) { return oldValue + someString; }) 
```

或一个变体[`.each()`](http://api.jquery.com/each/)（它[几乎]相当于 val() 在内部为文本输入所做的）：

```
$('#someTextarea').each(function(){ this.value += someString; }) 
```

它们都需要一个您不喜欢的单行函数表达式，但它们的优点是可以处理多个选定元素（并且不会因为没有匹配的元素而中断），并且它们还返回 jQuery 对象以保留可链接性功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T19:25:44.260

您可以传递一个函数：

```
$(...).val(function(index, old) { return old + whatever; }); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-07T19:28:13.927

我不知道惯用语，但简化此 jQuery 表达式的一种方法是使用将`val`函数对象作为参数的重载。jQuery 会将旧值传递给函数，然后您将新值传回。

```
$('#someTextarea').val(function(_, oldValue) { return oldValue + something; }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T19:27:03.463

```
$('#someTextarea').val(function() {
  return this.value + something;
}); 
```

或者

```
$('#someTextarea').val(function() {
  return $(this).val() + something; 
}); 
```

或者

```
// mentioned by SLaks, JaredPar

$('#someTextarea').val(function(i, oldVal) {
  return oldVal + something;
}); 
```

# c# - 在逆属性上使用 EF 4.1 时如何使用 linq 的 .Include()？

> ID：10487851
> 
> 赞同：2
> 
> 时间：2012-05-07T19:24:27.313
> 
> 标签：c#, entity-framework-4.1

我无法弄清楚如何使用`.Include()`才能访问这种嵌套关系。我尝试了看起来最直接的方法，但智能感知没有填充，当我手动输入关系时出现编译错误。

我有这个数据库映射设置

```
public class W
{
 public int WId { get; set; }
 public virtual ICollection<T> Ts { get; set; }
}

public class T
{
 public int TId { get; set; }
 public int WId { get; set; }
 public int CId { get; set; }
 public virtual W W { get; set; }
 public virtual C { get; set; }
}

public class C
{
 public int CId { get; set; }
 public virtual ICollection<T> Ts { get; set; }
} 
```

我有一个查询的 get 方法

```
//set in constructor
DbSet<W> dbSet;
DbContext context;

//called in method
IQueryable<W> query = dbSet;
query = query.Include(w => w.Ts);//works
query = query.Include(w => w.Ts.C); //I wanted to do this but it doesn't work 
```

## 我可以这样使用`.Include()`吗？

似乎它可以顺利工作，但显然我做错了。我宁愿不必遍历 Ts 集合，然后每次手动填充它们的 C。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:27:54.917

您可以使用以下语法：

```
query = query.Include(w => w.Ts.Select(t => t.C)); 
```

# ios - 让用户仅下载符合其设计分辨率和命名约定的图像

> ID：10487854
> 
> 赞同：0
> 
> 时间：2012-05-07T19:24:38.537
> 
> 标签：ios, resolution

我有一个包含数千张图片的应用程序。除了二进制文件附带的 UI 之外，所有其他图像都是在 In App Perches 事务之后从服务器下载的。

我希望为每种分辨率制作 4 个不同的图像包，并让用户只下载他们需要的图形。

1.  在这种情况下，我应该使用 @2x 还是只使用图像的名称？
2.  你能想到这种方法有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:37:34.303

> 在这种情况下，我应该使用 @2x 还是只使用图像的名称？

两种方法都适用于您描述的场景。在您的代码中指定`@2x`后缀以及通过其基本名称引用图像并让框架添加后缀都将起作用。

> 你能想到这种方法有什么问题吗？

我看不到任何内容，但我更喜欢不明确指定后缀的方法。代码会更干净。

# replace - 如何替换树枝中的折线

> ID：10487855
> 
> 赞同：24
> 
> 时间：2012-05-07T19:24:45.880
> 
> 标签：replace, twig

我想使用 TWIG 用 PHP 变量中的值填充 JavaScript 数组。

```
<script type="text/javascript">
   var cont=new Array();
   {% for key, post in posts %}
   cont[{{ key }}] = "{{ post.content }}";
   {% endfor %}
</script> 
```

问题是我的`post`变量有几行，所以上面的代码把JS命令分成几行，翻译成几行，我有一个错误。

所以我认为我需要将所有“新行”替换为“\n”。

我试着这样做：

```
cont[{{ key }}] = "{{ post.content | replace({"\n":"<br>"}) }}"; 
```

但这无济于事。它仍然保持在几行......</p>

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-11-18T10:09:39.877

对于类似的问题（将用户数据输出到 Javascript），我发现以下是必要的：

```
post.content|replace({"\n":' ', "\r":' '}) 
```

IE。替换`\r`以及替换为`\n`空格。这是因为一些用户输入的内容（尤其是对于 Windows 上的用户）可能包含`\r`（回车）以及换行符，如果不删除它们似乎仍然会破坏 Javascript。

对我来说，nl2br 不适合，因为我将用户内容输入到 Javascript 方法中（用于将用户输入的地址添加到谷歌地图，值得一提），所以我不想要任何换行符、HTML 或否则。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-22T20:30:11.810

使用 Twig（如果您不想要`\r\n`）编写一些 javascript 的最佳方法（也是好方法）是这样的：

```
{{ example|e('js') }} 
```

替换`<br />`当然可以，但是您会在使用数据中的数据的 javascript 中遇到其他问题。使用 javascript 转义，它将按照您期望的方式完美地编写有效的 javascript。

有关转义过滤器的更多信息：

[http://twig.sensiolabs.org/doc/filters/escape.html](http://twig.sensiolabs.org/doc/filters/escape.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-12T09:56:20.770

有 nl2br 过滤器：[http ://twig.sensiolabs.org/doc/filters/nl2br.html](http://twig.sensiolabs.org/doc/filters/nl2br.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-08-28T16:38:02.283

利用`{{ post.content | nl2br }}`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-17T18:50:09.910

如果您只想卸下刹车线，这是行不通的：

```
{{ post.content | replace({"\n":""}) }} 
```

'\' 是一个特殊的符号，所以你需要转义它。这将起作用：

```
{{ post.content | replace({"\\n":""}) }} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-05T13:36:04.183

你必须使用 {% spaceless %}{% endspaceless %} TAG，像这样，

```
<script type="text/javascript">
   var cont=new Array();
   {% for key, post in posts %}
   cont[{{ key }}] = "{% spaceless %}{{ post.content }}{% endspaceless %}";
   {% endfor %}
</script> 
```

享受 ;-）

# xcode - iAd 适用于 iPhone 但不适用于 iPad

> ID：10487856
> 
> 赞同：2
> 
> 时间：2012-05-07T19:24:51.493
> 
> 标签：xcode, iad

我刚刚将我的第一个应用程序上传到仅为 iPhone/iPod 设计的应用程序商店。它可以工作，当它在 iPhone 或 iPod 上运行时 iAd 功能也可以工作，但是当它在 iPad 上运行时，它可以放大并且无法加载 iAd 横幅。不会生成错误，但不会加载广告横幅。

有没有人有任何想法？我尝试将应用程序更改为通用，然后它可以工作，但是布局发生了变化。有没有办法让 iAds 在放大的 iPad 版本上工作，或者仅仅是因为该应用程序刚刚发布？

谢谢。
Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T18:38:38.230

这就是它应该的方式。如果您的应用没有 iPad 版本，而用户只是`zoom`在 iPad 上运行它，那么 iAd 将不会出现。让 iAd 出现的唯一方法是创建一个带有两个故事板或 nib 的通用应用程序。每个设备一个。这就是我最终做的事情，所以所有用户都会收到 iAd 并且无法绕过它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T21:31:27.130

我通过使其成为通用应用程序并检查习语标志并将任何需要位置或字体大小的值加倍使其工作。您可能还需要缩放任何精灵大小。

```
if ((UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad))
{
    _accDescLabel.fontSize = 40;
    _accDescLabel.position = CGPointMake(self.size.width/2 + 100, self.size.height - 260);
}
else
{
    _accDescLabel.fontSize = 20;
    _accDescLabel.position = CGPointMake(self.size.width/2 + 50, self.size.height - 130);
} 
```

# apache - RApache 如何使用 R 强制下载 pdf

> ID：10487860
> 
> 赞同：1
> 
> 时间：2012-05-07T19:24:58.593
> 
> 标签：apache, r, rapache

我正在尝试使用 R 和 RApache 下载 pdf 文件但没有成功。

这是我的代码

```
#R-Downwload pdf
#---------------------------------------------
pdf("/public_html/upload/rpdf.pdf")
attach(mtcars)
plot(wt, mpg)
abline(lm(mpg~wt))
title("PDF Report")
dev.off()

setContentType(type='application/pdf')
setHeader(header='Content-Disposition', 'attachment; filename=rpdf.pdf')
setHeader(header='Content-Transfer-Encoding', 'binary')
setHeader(header='Accept-Ranges', 'bytes')

cat("/public_html/upload/rpdf.pdf") 
```

当我在浏览器上运行此代码时，它会显示下载弹出框，但是当我单击下载时会显示

```
... either not a supported file type or it has been damaged" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:23:19.937

如果你遇到过这个问题，这里就是答案。

```
setHeader(header='Content-Disposition', 'attachment; filename=rpdf.pdf')
setContentType("application/pdf")
t <- tempfile()
pdf(t)
attach(mtcars)
plot(wt, mpg)
abline(lm(mpg~wt))
title("PDF Report")
dev.off()
setHeader('Content-Length',file.info(t)$size)
sendBin(readBin(t,'raw',n=file.info(t)$size)) 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:58:07.563

您正在打印字符串`"/public_html/upload/rpdf.pdf"`，因为它在引号中。您想打印文件的*内容*`cat()`，而不是调用中的文件名。也许你可以使用[`write`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/write.html)？

# c# - 如何逐步显示 div 标签

> ID：10487863
> 
> 赞同：3
> 
> 时间：2012-05-07T19:25:08.640
> 
> 标签：c#, asp.net, c#-4.0

我在`div`标签中有`form`标签集合，如下所示：

```
<form ...>
  <div id="div1"> ... </div>
  <div id="div2"> ... </div>
  ...
  ...
</form> 
```

我只想`div1`在可见区域中显示，而不是在用户按下时显示`next`下一个 div 标签`div2`，依此类推。

我怎样才能做到这一点？

我对可用的不同方法知之甚少，但我对 Javascript 有一些了解，因此任何想法都会受到赞赏。

PS请尽可能提供示例代码，我也想要客户端脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:36:41.893

这是一些可能有帮助的 javascript 和 html 演示。增加当前整数。你也可以用 -- for back 来减少。有很多方法可以做到这一点。这只是我想到的一个。

```
<img src="mynextbutton.jpg" onclick="showNext()" />
<form ...>
  <div id="Div0" style="display:inherit;"> ... </div>
  <div id="Div1" style="display:none;"> ... </div>
  <div id="Div2" style="display:none;"> ... </div>
  ...
  ...
</form>

//---------------------------------------------------

var currentDiv = 0;
function showNext()
{
     document.getElementById("Div"+currentDiv).style.display = "none";
     currentDiv ++;
     document.getElementById("Div"+currentDiv).style.display = "ihherit";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:53:43.703

如果您将所有元素 ID 放入一个数组中，然后使用它来获取下一个项目，您可以消除对 ID 编号确定它们旋转顺序的依赖，并且还可以防止它们需要遵循这种严格的格式.

```
//add all element IDs to this array
var elements = ["firstElementID","div2","someConentsID","lastElementID"]; 
var currentIndex = 0;

//ensure that the first item is visible at the start.

function next()
{
  //hide current item.
  document.getElementById(elements[currentIndex]).Style = "display:none";
  //move up the current index by one, wrapping so as to stay within array bounds.
  currentIndex = (currentIndex + 1) % elements.length;
  //show the new current item.
  document.getElementById(elements[currentIndex]).Style = "display:inline";
} 
```

您可以调整显示/隐藏代码以使用 JQuery 或您想要的任何其他机制。

# c++ - 在 C++ 中的映射中插入值的向量

> ID：10487865
> 
> 赞同：25
> 
> 时间：2012-05-07T19:25:09.987
> 
> 标签：c++

我一直在试图弄清楚如何为地图中的值插入向量。例如：

```
#include <iostream>
#include <vector>
#include <map>

using namespace std;

int main()

{

    map <int, vector<int> > mymap;   

    mymap.insert(pair<int, vector<int> > (10, #put something here#));

    return 0;
} 
```

我不知道使用什么语法插入一个向量作为值。我试过`{1,2}`了，但失败了。我应该使用什么语法？

如果我提前声明一个向量并给它一个名字，一切都会奏效，但我不想这样做，因为我想要一张包含很多向量的地图。

先感谢您

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T19:32:54.907

如果你想要一个空向量，你可以这样做：

```
mymap.insert(pair<int,vector<int> >(10, vector<int>())); 
```

然后，您可以添加您想要的任何元素，例如：

```
mymap[10].push_back(1);
mymap[10].push_back(2); 
```

**编辑**：删除了如果/当地图增长时将复制向量的错误断言。正如评论者所指出的，这不适用于基于节点的 std::map。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T19:31:45.767

基本上你的问题不是关于`std::vector`插入`std::map`. 您的问题是如何轻松创建具有任意初始元素值的*匿名对象。* `std::vector`

在 ISO C++03 中，你不能。 [但是， C++11 允许对此使用初始化列表](http://en.wikipedia.org/wiki/C++11#Initializer_lists)。

如果你被 C++03 编译器困住，你可以创建一个辅助函数来返回一个带有指定元素的向量：

```
std::vector<int> make_vector(int a, int b)
{
    std::vector<int> v;
    v.push_back(a);
    v.push_back(b);
    return v;
} 
```

如果您插入的向量大小不同，则可以使用可变参数函数，尽管这样做需要您传递元素的数量或具有保留的标记值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-07T19:34:46.090

如果您使用的是 C++11，则可以使用向量的初始化列表[构造函数](http://en.cppreference.com/w/cpp/container/vector/vector)（该列表中的最后一个构造函数），如下所示：

```
mymap.insert(pair<int, vector<int> > (10, {1, 2, 3})); 
```

如果你只能使用 C++03，`vector`那么有一个构造函数，它为每个元素获取一个大小和一个默认值，这对你来说可能就足够了。否则，您将不得不构造向量然后插入它。如果您想在插入时避免不必要的向量副本，您可以`swap`像这样：

```
vector<int> myvec;
myvec.push_back(1);
myvec.push_back(2);
mymap[10].swap(myvec); 
```

这样就不需要复制向量了。你会得到一个额外的向量默认构造，但这不是很贵。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-07T19:27:31.653

`#put something here#`=`vector<int>{1,2}`

我很惊讶，尽管那`{1,2}`没有用。你没有使用 C++11 编译器吗？如果不是，那么您只能在此处使用默认构造函数创建向量（无值），或者先用值填充它并将其插入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T19:44:18.503

这应该在 C++2003 编译器中工作。

```
#include <iostream>
#include <vector>
#include <map>
#include <cassert>

using namespace std;

std::vector<int> make_vector(int a, int b) {
  std::vector<int> result;
  result.push_back(a);
  result.push_back(b);
  return result;
}

int main()

{

    map <int, vector<int> > mymap;

    mymap.insert(make_pair(10, make_vector(1,2)));
    // Or, alternatively:
    //   mymap[10] = make_vector(1,2);

    assert(mymap[10][0] == 1);
    assert(mymap[10][1] == 2);

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T19:52:26.870

C++03 没有初始化列表，初始化集合可能会很痛苦。

如果您无法升级到更现代的编译器版本，您可以随时使用该`Boost.Assignment`库。它有一个[`list_of`](http://www.boost.org/doc/libs/1_49_0/libs/assign/doc/index.html#list_of)功能正是为此。

```
#put something here# -> boost::assign::list_of(1)(2) 
```

# matlab - 在 Matlab 中使用连续矩阵

> ID：10487872
> 
> 赞同：1
> 
> 时间：2012-05-07T19:25:27.167
> 
> 标签：matlab, matrix

我正在创建一个函数以在分析工作室中使用多个矩阵。

这些矩阵具有相同的名称，名称中带有日期引用（月到月和年到年：nov-1956 是`matrix5611`， dec-1956 是`matrix5612`， jan-1957 是`matrix5712`，依此类推，直到 1999 年底。

对于每个人，都应该比较每个月/年的平均值（取决于您关注的研究领域）。

我正在尝试使用一些循环来改变输入矩阵的名称，而不是按日期手动编写日期，但是一个有用的函数会很有用。

任何想法或有用的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:24:00.583

如果您将数据存储在不同的矩阵中，则可以使用`eval`将平均值存储到某个矩阵中，在此示例`MeanMatrix`中，其中 Y 维是年，X 维是月：

编辑：它不是来自 5611 的运行号码，而是 yymm ......

编辑：似乎矩阵不是从 1956 年 1 月开始，而是从 1956 年 11 月开始。

```
% add here missing months matrix index strings.

MissingMatricesCellArray = {'5601', '5602', '5603', '5604', '5605', '5606', '5607', '5608', '5609', '5610'};

% MissingmatricesCellArray = {};

for Year = 56:99
    for Month = 1:12
        NumString = sprintf('%02d%02d', Year, Month);

        % calculate and store means only for matrices that are not missing.
        if ~(ismember (cellstr(NumString), MissingMatricesCellArray))
            MeanMatrix(Year,Month) = mean(mean(eval ([ 'matrix', NumString ])));
        end
     end
end 
```

然后，您可以按照自己的方式比较月份和年份的平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:30:49.927

我更愿意为此使用单元数组而不是`eval`.

```
for y = 56:99 % for each year 
    for m = 1:12 % for each month    
      ind = createYearMonthInd(y,m);
      matrix{ind} = ...  % whatever you want here (note the curly braces)
   end 
end 

function ind = createYearMonthInd(y,m)
     ind = y * 100 + m; 
```

# python - 在 Django 中通过 URL 传递参数时找不到页面

> ID：10487874
> 
> 赞同：0
> 
> 时间：2012-05-07T19:25:37.600
> 
> 标签：python, regex, django

我怀疑这可能与我设置正则表达式的样式有关，因为当我尝试访问时会得到以下输出：例如，http: [//127.0.0.1](http://127.0.0.1:8000/recipes/search/fish/) :8000/recipes/search/fish/。 ..

使用 gfp.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式：

```
^recipes/$
^recipes/category/(?P<category>\d+)/$
^recipes/search/(?P<term>\d+)/$
^recipes/view/(?P<slug>\d+)/$
^admin/ 
```

当前 URL，recipes/search/fish/，与其中任何一个都不匹配。

这里是我的 URLconf 供参考

```
urlpatterns = patterns('',
url(r'^recipes/', 'main.views.recipes_all'),
url(r'^recipes/category/(?P<category>\d+)/$', 'main.views.recipes_category'),
url(r'^recipes/search/(?P<term>\d+)/$', 'main.views.recipes_search'),  
url(r'^recipes/view/(?P<slug>\d+)/$', 'main.views.recipes_view'), 
```

以下是我目前尝试使用的视图供参考

```
def recipes_all(request):
    return HttpResponse("this is all the recipes")

def recipes_category(request, category):
    return HttpResponse("this is the recipes category % s" % (category))

def recipes_search(request, term):
    return HttpResponse("you are searching % s in the recipes" % (term))

def recipes_view(request, slug):
    return HttpResponse("you are viewing the recipe % s" % (slug)) 
```

我怀疑这是我的正则表达式，有人能解释一下它有什么问题吗？我已经看到 /w(?) 在某些 url 正则表达式中使用，但它并没有在 Django tuorial 中使用：

[https://docs.djangoproject.com/en/1.4/intro/tutorial03/](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:28:37.157

`'^recipes/search/(?P<term>\d+)/$'`匹配`/recipes/search/123456/` while`'^recipes/search/(?P<term>[-\w]+)/$'`可能是您需要的。（用连字符更新）

查看[Python re](http://docs.python.org/library/re.html#regular-expression-syntax) docs 以了解 '\d'、'\w' 和其他内容的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:28:55.050

您的 urlpattern for`recipe/search`仅允许`\d`搜索词使用数字 ( )。将其更改为`\w`，您应该会很好。

# sql-server-2008 - TSQL 根据日期范围确定重复项

> ID：10487876
> 
> 赞同：0
> 
> 时间：2012-05-07T19:25:45.757
> 
> 标签：sql-server-2008, tsql

我正在努力使用适当的查询来查找重复项，同时尊重记录的有效开始日期和结束日期。下面的示例数据。

```
ClientName ClientID EffectiveStart EffectiveEnd
1 1900-01-01 2100-01-01
1 1900-01-01 2100-01-01
B 2 1900-01-01 2012-05-01
C 2 2012-05-01 2100-01-01
D 3 1900-01-01 2012-05-01
E 3 2012-04-30 2100-01-01
F 4 2012-04-15 2100-01-01

```

我正在寻找的输出如下。

```
客户名称客户ID
1
3
3

```

逻辑是客户端 A 的 ID 1 重复。客户 B 和 C 有重复 (2) 但日期范围使得两个重复不相互重叠，这意味着它们不应被视为重复。客户 D 和 E 的 ID 3 重复并且日期范围重叠，因此应将其视为重复。客户端 F 没有重复项，因此不应显示在输出中。

有什么想法吗？问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:50:04.397

有两个版本。Exists 更简单，但可能比 join 慢。如果每个相同的 clientid 有重叠的记录，则对每条记录进行检查；它必须至少找到一个，它本身，因此分组和拥有。

```
select distinct ClientName, ClientID
  from Table1
 where exists
 (
   select null
     from table1 test1
    where test1.clientid = table1.clientid
      and test1.EffectiveStart < table1.EffectiveEnd
      and test1.EffectiveEnd > table1.EffectiveStart
    group by test1.ClientID
   having count (*) > 1
 ) 
```

Join 的作用相同，但由于对所有记录进行分组，因此必须将它们全部计数。

```
select test1.clientid
from table1 test1 
join table1 test2 on test1.clientid = test2.clientid
where test1.EffectiveStart < test2.EffectiveEnd 
  and test1.EffectiveEnd > test2.EffectiveStart
group by test1.clientid
having count (*) > (select count (*) 
                      from table1 
                     where clientid = test1.clientid) 
```

我省略了客户端名称的检索，因为人们讨厌看到嵌套查询。

现场测试在[Sql Fiddle](http://sqlfiddle.com/#!3/7426f/24)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:55:46.213

需要PK

```
select c1.name, c2.name, c1.id
from client c1 
join client c2 on c1.id = c2.id and c1.PK < c2.PK
where c1.Start > c2.End or c1.End < c2.Start 
```

[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/325964#325964) 请给他+1

# regex - 为typo3将重写规则转换为nginx conf

> ID：10487877
> 
> 赞同：1
> 
> 时间：2012-05-07T19:25:45.893
> 
> 标签：regex, .htaccess, mod-rewrite, nginx

我有以下重写规则。他们需要获得 CoolURI fortypo3 在 apache 服务器上工作。现在我想对 nginx 服务器做同样的事情。

```
RewriteEngine On

RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)$ - [L]
RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)/.*$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php 
```

任何人都可以帮我将它们转换为 nginx conf 吗？我找到了这个[http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)但我对 nginx 真的很陌生，无法弄清楚如何转换它......

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:52:12.673

这应该有效：

```
location / {
    index index.php index.html index.htm;
    try_files $uri @rewrite;
}

location @rewrite {
    rewrite ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)$ - last;
    rewrite ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)/.*$ - last;
} 
```

你可以把它放在`server { ... }`声明中。

我不使用 Typo3，所以我不能确定它是否会起作用，但它可能只需要一些基本的调整。

# python - db.Model 初始化覆盖技术？

> ID：10487880
> 
> 赞同：2
> 
> 时间：2012-05-07T19:26:00.967
> 
> 标签：python, google-app-engine, inheritance

我需要实现对实体内容 i18n 的支持。在重构之前，代码如下所示：

```
class Project (db.Model)
    description = db.TextProperty() 
```

我使用 @property builtin 实现 i18n，以避免重构所有获取或设置 description 属性的代码

```
class Project (db.Model)
    # English
    description_en = db.TextProperty()

    # Spanish
    description_es = db.TextProperty()

    @property
    def description(self):
        return self.description_es

    @description.setter
    def description(self, value):
        self.description_es = value 
```

当我尝试这样做时，问题出现了：

```
project = Project(description = "Foo bar") 
```

我使用该语法在大型代码库中初始化模型很多，我无法重构它。但是 db.Model **init**只设置了 db.properties 没有 @properties。

我尝试覆盖 db.Model 的 init 方法，但出现了很多错误，似乎[不建议](https://stackoverflow.com/a/3280270/78718)这样做。

我的问题是：

有没有办法安全地覆盖 init 方法`db.Model`？

是否有其他方法可以实现不意味着对我的代码进行大量重构的内容 i18n？

# html - HTML5 - 更改绘制矩形的不透明度

> ID：10487882
> 
> 赞同：37
> 
> 时间：2012-05-07T19:26:16.973
> 
> 标签：html, canvas

假设我使用以下方法绘制了一个 HTML5 矩形元素：

```
context.clearRect(25, 72, 32, 32); 
```

我怎样才能让它 50% 透明？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-07T19:43:34.417

使用 globalAlpha。您还必须使用 fillRect 进行绘制。clearRect 只是擦除像素。它不能部分擦除，因此您必须使用 fillRect 或其他绘图图元。

来自[w3schools.com](http://www.w3schools.com/html5/canvas_globalalpha.asp)：

```
 ctx.globalAlpha = 0.2;
    ctx.fillRect(50,50,75,50);
    ctx.globalAlpha = 1.0; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-07-03T22:36:12.307

ClearRect 删除那里的内容并将其留空。最好的方法是使用 rgba fillStyle 值，因为它只会使矩形（或您正在绘制的任何其他形状）透明。代码将是：

```
ctx.fillStyle = 'rgba(225,225,225,0.5)';
ctx.fillRect(25,72,32,32); 
```

（感谢[How to change the opacity (alpha, transparent) of an element in an canvas element after it has been drawed?](https://stackoverflow.com/questions/2359537/how-to-change-the-opacity-alpha-transparency-of-an-element-in-a-canvas-elemen)）

# trigger.io - 使用 trigger.io forge 防止缩放

> ID：10487884
> 
> 赞同：1
> 
> 时间：2012-05-07T19:26:47.477
> 
> 标签：trigger.io

有什么方法可以防止应用程序缩放？当您专注于文本输入时，我的应用程序有一个令人讨厌的习惯，即在您专注于文本输入时（仅在 Android 上，使用 HTC amaze）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:52:12.543

当然：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> 
```

# ruby-on-rails - 用于显示列表项的 Rails HAML 助手

> ID：10487892
> 
> 赞同：0
> 
> 时间：2012-05-07T19:27:28.083
> 
> 标签：ruby-on-rails, ruby, haml

我很难让我的助手显示列表项。标记如下所示：

```
 - @bars.each do |bar|
      <% display_bar(bar) %> 
```

实际的助手如下所示：

```
module MyHelper
  def display_bar(bar)
    type = bar.type
    concat(%li.type)
    concat(%b some text)
    concat(%i some more text)
  end
end 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:33:15.687

1.  你的助手的名字`display_bar`不是`display_event`。

2.  你应该使用`=`而不是`<% %>`

    ```
    - @bars.each do |bar|
        = display_event(bar) 
    ```

**编辑**

糟糕，没有仔细阅读`display_bar`方法的内容，因为@jdoe 提到您不能在 Ruby 代码中使用 Haml 标记语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:45:32.920

1.  这样的事情必须通过部分来实现。或见 5。
2.  `<%`不会给你看任何东西。**你在哈姆尔**。这是 ERb 的东西（但即使在那里它也不会显示任何东西：你忘记了这个`=`标志，它应该是`<%=`）。
3.  关于`concat(%li.type)`：你不能把你的标记放在你的 Ruby 代码中。`%li`Ruby 对您的“代码”一无所知。
4.  Amokrane Chentir 已经提到过。
5.  你正在尝试重新发明轮子。Rails 已经为这种简单的情况提供了出色的助手。

看一看：

```
 = content_tag_for(:li, @bars) do |bar|
    %b= bar.title
    %i= bar.id 
```

**UPD：** `content_tag_for`根据当前模型实例为每个`li`标签设置样式/ID，以便将来轻松实现样式/脚本。

# c# - 正则表达式替换不同种类的单引号

> ID：10487894
> 
> 赞同：1
> 
> 时间：2012-05-07T19:27:35.510
> 
> 标签：c#, mysql, regex

那些喜欢在 MySQL 中造成严重破坏的讨厌的单引号，似乎有表亲！！！我们有一个系统，用户可以从客户那里获取工作更新，或者从电子邮件中粘贴内容，或者从几乎任何地方复制和粘贴，每次我们满足一个报价时，就会弹出另一个报价。以下是不同的：`’ ´ ' ``<--

由于我的正则表达式很弱，我的开发人员说我应该使用以下方法删除它们：

```
return Regex.Replace(oldText, @"[’´'`""]", @""); 
```

我不喜欢这样，它不专业，删除所有单引号。正如许多论坛所建议的那样，我想做的只是将单引号加倍。这是正确的吗？

```
return Regex.Replace(oldText, @"[’´'`""]", @"''"); 
```

这虽然完成了，因为在他的 DAL 中，他用单引号构造了他的插入语句：

```
sql.Append(",`to_complete_by`='" + obj.toCompleteBy + "'"); 
```

我可以通过更改`^^`来避免这个错误吗？

```
sql.Append(",`to_complete_by`=\"" + obj.toCompleteBy + "\""); 
```

或正则表达式替换首选方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:29:54.977

如果您正在使用不支持预准备语句的旧版本 MySQL，您至少应该利用现代数据库接口可以模拟数据库本身不支持的这些功能这一事实。在您的情况下，与其说是潜在的性能提升，不如说是通过分离语句语法和值表示来增加安全性。

# java - 从当前运行的 jar 中提取一个 jar

> ID：10487896
> 
> 赞同：2
> 
> 时间：2012-05-07T19:27:49.397
> 
> 标签：java, jar, extract

我正在尝试从当前运行的 jar 中提取 2 个 jar 文件，但是即使它们的大小为 104kb 和 1.7m，它们也总是以 2kb 结束，这就是我所拥有的

```
public static boolean extractFromJar(String fileName, String dest) {
    if (Configuration.getRunningJarPath() == null) {
        return false;
    }
    File file = new File(dest + fileName);
    if (file.exists()) {
        return false;
    }

    if (file.isDirectory()) {
        file.mkdir();
        return false;
    }
    try {
        JarFile jar = new JarFile(Configuration.getRunningJarPath());
        Enumeration<JarEntry> e = jar.entries();
        while (e.hasMoreElements()) {
            JarEntry je = e.nextElement();
            InputStream in = new BufferedInputStream(jar.getInputStream(je));
            OutputStream out = new BufferedOutputStream(
                    new FileOutputStream(file));
            copyInputStream(in, out);
        }
        return true;
    } catch (Exception e) {
        Methods.debug(e);
        return false;
    }
}

private final static void copyInputStream(InputStream in, OutputStream out)
        throws IOException {
    while (in.available() > 0) {
        out.write(in.read());
    }
    out.flush();
    out.close();
    in.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:36:25.560

这应该比依赖 InputStream.available() 方法更好：

```
private final static void copyInputStream(InputStream in, OutputStream out)
        throws IOException {
    byte[] buff = new byte[4096];
    int n;
    while ((n = in.read(buff)) > 0) {
        out.write(buff, 0, n);
    }
    out.flush();
    out.close();
    in.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:05:34.803

`available()`根据其文档，该方法读取数据并不可靠，因为它只是一个估计值。
您需要依赖`read()`方法，直到读取非-ve。

```
byte[] contentBytes = new byte[ 4096 ];  
int bytesRead = -1;
while ( ( bytesRead = inputStream.read( contentBytes ) ) > 0 )   
{   
    out.write( contentBytes, 0, bytesRead );  
} // while available 
```

`available()`您可以在[***此处***](https://stackoverflow.com/questions/7874713/java-read-from-inputstream-doesnt-always-read-the-same-amount-of-data)讨论问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:33:29.807

我不确定提取jar，但每个jar实际上都是一个zip文件，所以你可以尝试解压缩它。

您可以在此处了解有关在 Java 中解压缩的信息： [如何在 Java 中递归地解压缩文件？](https://stackoverflow.com/questions/981578/how-to-unzip-files-recursively-in-java)

# html - 类似 Google 的图标在移动设备中滚动——我该如何复制？

> ID：10487898
> 
> 赞同：0
> 
> 时间：2012-05-07T19:27:56.823
> 
> 标签：html, css

![在此处输入图像描述](../Images/aa47f01cac5cf0c31edc5b389f784c91.png)

在上方，您可以看到堆叠 div 向左浮动的图像。这是当前的标记：

```
<nav id="category-menu">
 <div class="category-top-row">
  <a href="categories/category-name">
   <div id="category-menu-button">Category Example
   </div>
  </a>
  <a href="categories/category-name">
   <div id="category-menu-button">Category Example
   </div>
  </a>
  <a href="categories/category-name">
   <div id="category-menu-button">Category Example
   </div>
  </a></div><!-- /#category-top-row-->
 <div class="category-bottom-row">
   <a href="categories/category-name">
    <div id="category-menu-button">Category Example
    </div>
   </a>
   <a href="categories/category-name">
    <div id="category-menu-button">Category Example
    </div>
   </a>
 </div><!-- /#category-bottom-row-->
</nav> 
```

所以这就是我的想法，如果这是可能的，也许有人可以阐明：

目前，该网站的宽度从 1200 像素扩展到使用 css3 媒体查询的移动设备。当移动分辨率加载页面时，我调整这些图像以堆叠成 2 列，以便我们有足够的空间来查看它们中的每一个。但是，理想情况下，我希望用户能够用手指水平滚动这些类别，但仍保持设备的宽度。（即。我希望类别菜单包装仍然保持移动宽度，并且只允许在该包装中滚动）

我曾想过创建一组重复的类别 div，称为

```
<nav id="category-menu-mobile">
....
etc 
```

和 display:none 到“非移动”类别包装器，切换到新的移动风格类别。但这甚至有可能吗？谷歌是怎么做到的！div 是否可以像我想象的那样在移动设备上滚动（无边界，并且不显示滚动条）？起初我认为框架背后的功能与我想要的类似，但我不想在那个“窗口”中加载 URL。只是我喜欢的移动菜单。

在移动设备上加载 Google 时，我可以比较的最接近的是 Google 的图标滚动条：

![Google 移动网站示例](../Images/bc657b6ded7b46e40ee7d60d4266839e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:41:21.043

您应该可以通过在移动媒体查询中显式设置`width`和属性来做到这一点：`overflow-x`

```
@media screen and (device-width: 480px) {
    #category-menu {
        width: 480px;
        overflow-x: scroll;
    }
} 
```

# sql-server - 无法在现有 SQL Server 2008 R2 上安装全文搜索

> ID：10487901
> 
> 赞同：0
> 
> 时间：2012-05-07T19:28:11.853
> 
> 标签：sql-server, installation, full-text-search

我之前安装了 SQL Server 2008 R2 Express 版本，但忘记了全文搜索。现在我需要这个功能，所以我从[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=25174](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=25174)下载了安装。

当我运行安装并将其安装为新服务器实例时，全文搜索功能已启用，但是当我尝试向现有服务器实例添加功能时，无法检查此功能。安装文件夹包含文件`sql_fulltext.msi`，所以这个功能在安装中。

```
SELECT SERVERPROPERTY('IsFullTextInstalled') 
```

返回 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:48:28.850

我重新安装了 MS SQL Server，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T19:26:28.843

如果您想将全文搜索安装到 2008r2，您必须为其添加高级服务功能。轻松下载和安装 SQL Server Express 2008r2 的“高级服务”版本

如果您使用 Sql Server 2005，那么您也必须安装完整版和 sp3 版

此外，您还需要创建索引目录和目标表的索引

```
CREATE FULLTEXT INDEX ON SEDA.dbo.F0105TBLSTOKLAR
(
STOKKODU
Language 0X0
) 
```

比你可以像下面这样使用它

使用 AdventureWorks2012 GO

```
SELECT Name, ListPrice
FROM Production.Product
WHERE ListPrice = 80.99
   AND CONTAINS(Name, 'Mountain')
GO 
```

B. 使用 FREETEXT 搜索包含指定字符值的单词 以下示例搜索包含与重要、安全、组件相关的单词的所有文档。

```
USE AdventureWorks2012
GO

SELECT Title
FROM Production.Document
WHERE FREETEXT (Document, 'vital safety components')
GO 
```

# php - Html 验证 PHP

> ID：10487902
> 
> 赞同：-2
> 
> 时间：2012-05-07T19:28:12.257
> 
> 标签：php, html, html-parsing

我有一个无法验证的 HTML 文件，并且不断收到错误*Line 65, Column 7: document type does not allow element "table" here；缺少“object”、“applet”、“map”、“iframe”、“button”、“ins”、“del”开始标签之一 `<table><tr>`*

但是我的文档没有第 65 行，代码如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-
transitional.dtd">
<html xmlns = "http://www.w3.org/1999/xhtml">
    <head>
        <link rel="stylesheet" type="text/css" href="style_2.css"></link>
        <title> Gadgets </title>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    </head>
<body>

    <div class="container">
        <div class="background">
            <div class="innerContainer">
            <?php include("header.php"); ?>
            <div class="content">
            <div class="scroll">
<?php
error_reporting(0);
$con = mysql_connect("xxxxxxxx");
mysql_select_db("xxxx", $con);
$result = mysql_query("SELECT * FROM gadgets");
?>
<p>  
<?php
echo "<table>";  
echo "<tr> 
    <th>Name</th> 
    <th>Description</th> 
    <th>Price</th>
    <th>Manufacturer</th>
    <th>Image</th> 
  </tr>"; 
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" .$row['Name']."</td>";
echo "<td>" .$row['Description'] ."</td>";
echo "<td>" .$row['Price'] ."</td>";
echo "<td><img src='" .$row['ImageURL'] ."' style='width: 200px; height: 150px;' alt='Image' /></td>";
echo "</tr>";
}
echo "</table>"; 
?>
</p>
<?php
mysql_close($con);
?>

            </div>
            </div>
            <?php include("footer.php"); ?>  

        </div>
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:29:53.753

验证器在 HTML 上运行，而不是 PHP（因此将行号与生成的 HTML 进行比较……还要注意 W3C 验证服务的*Show Source*选项）。

段落不能包含表格。移动`<table>`外部`<p>`

# html - HTML文件形式，接受Word文档

> ID：10487904
> 
> 赞同：5
> 
> 时间：2012-05-07T19:28:20.610
> 
> 标签：html, ms-word, mime-types

我在这里遇到了一个奇怪的问题。（要么这样，要么我只是忽略了一些愚蠢简单的事情。）

我有一个文件上传表单，我希望它只接受某些类型的文件，其中包括 MS Word 文档。我将 .doc 和 .docx MIME 类型（`application/msword`和`application/vnd.openxmlformats-officedocument.wordprocessingml.document`分别）添加到文件输入字段的接受属性中，但是当我点击“选择文件”时，.doc 和 .docx 文件仍然是灰色的，因为不允许上传。

那么，我错过了什么？任何帮助或指示将不胜感激！

（是的，我知道表单检查不是过滤上传文件的好方法。我有 PHP 覆盖，这对用户来说更方便，所以他们不会去上传不允许的文件.)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T03:58:52.773

对该属性的支持`accept`一直很差，但正在慢慢变得越来越普遍。在我的 Google Chrome 19 上，该元素`<input type="file" accept="application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword" />`有效，因此选择仅限于 .doc 和 .docx 文件。其他浏览器通常会忽略这样的`accept`属性，尽管例如 Firefox 支持一些简单的情况，例如`accept="image/gif"`.

除此之外，浏览器可能会以不同的方式将 MIME 类型映射到文件扩展名（通常是文件系统将其视为“文件类型”指示符）。因此，尽管该属性在某些情况下可能会起作用，但当映射不同时，它可能会使事情变得更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:01:55.880

我是 Word 文件的 MIME 类型，可能未在浏览器中注册，因此 Word 文件被报告为`application/octet-stream`. 通常，HTML 表单中的 MIME 类型过滤不能可靠地工作，但常见的图像 MIME 类型除外。

您可以创建一个 JavaScript 解决方案来检查文件的扩展名。

# php - 通过php代码打开目录

> ID：10487906
> 
> 赞同：0
> 
> 时间：2012-05-07T19:28:32.070
> 
> 标签：php, image, imagesource

我正在制作一个页面，我必须在该页面上显示拇指图像，稍后将在灯箱控件中显示。

为此，我必须打开图像文件夹才能获取图像。我使用以下代码打开目录：

```
$handle = opendir('images') 
```

但是这段代码给出了很多错误，无法打开目录。相反，当我使用下面给出的此代码时，整个页面工作正常，图像显示为拇指，也显示在灯箱中。

```
$handle = opendir('.') 
```

请任何人告诉我如何打开与我的页面位于同一目录中的文件夹“图像”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:09:35.810

试试 glob 方法，它会自动为您打开目录处理程序。

[http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

```
$handle = glob("images/*"); 
```

我还建议您检查正确的文件类型，以防止加载不必要的项目（如果有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T23:16:38.110

您需要以这种方式使用 opendir 执行此操作：

```
 <?php
$dir = "/etc/php5/";

// Open a known directory, and proceed to read its contents
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
            echo "filename: $file : filetype: " . filetype($dir . $file) . "\n";
        }
        closedir($dh);
    }
}
?> 
```

正如在：[http ://www.php.net/manual/en/function.opendir.php](http://www.php.net/manual/en/function.opendir.php)

或者您可能会对使用 scandir 感兴趣。这要简单得多：

```
 <?php
$dir    = '/tmp';
$files1 = scandir($dir);
$files2 = scandir($dir, 1);

print_r($files1);
print_r($files2);
?> 
```

如此处所述：[http ://www.php.net/manual/en/function.scandir.php](http://www.php.net/manual/en/function.scandir.php)

# html - 如何隐藏 导航菜单和页脚链接中的项目符号但显示它们以列出项目

> ID：10487908
> 
> 赞同：48
> 
> 时间：2012-05-07T19:28:34.163
> 
> 标签：html, html-lists

我有一个导航菜单、页脚和幻灯片，它们使用列出的样式来列出链接和图像。我将css`list-style:none;`设置为隐藏导航和页脚中链接和图像旁边的项目符号，但我想显示列表普通文本的项目符号。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-07T19:45:33.210

下面的示例解释了如何使用 css 样式类删除项目符号。您可以使用，类似于 css 类，按标识符 (#id)，按父标记等。您可以使用相同的方式定义 css 以从页脚中删除项目符号。

我以[这个网站](http://w3schools.com/css/css_list.asp)为起点。

```
<html>
<head>
<style type="text/css">
div.ui-menu li {
    list-style:none;
    background-image:none;
    background-repeat:none;
    background-position:0; 
}
ul
{
    list-style-type:none;
    padding:0px;
    margin:0px;
}
li
{
    background-image:url(sqpurple.gif);
    background-repeat:no-repeat;
    background-position:0px 5px; 
    padding-left:14px;
}
</style>
</head>

<body>

<div class="ui-menu">
<ul>
<li>Coffee</li>
<li>Tea</li>
<li>Coca Cola</li>
</ul>
</div>

<ul>
<li>Coffee</li>
<li>Tea</li>
<li>Coca Cola</li>
</ul>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-07T19:33:07.900

您需要为要隐藏的项目符号定义一个类。举些例子

```
.no-bullets {
    list-style-type: none;
} 
```

然后将其应用于您想要隐藏项目符号的列表：

```
<ul class="no-bullets"> 
```

所有其他列表（没有特定类别）将照常显示项目符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-07T19:32:37.230

`li`您可以根据它们的`class`、它们的`id`或它们的祖先元素对元素进行不同的样式设置：

```
li { /* styles all li elements*/
    list-style-type: none;
}

#ParentListID li { /* styles the li elements that have an ancestor element
                      of id="ParentListID" */
    list-style-type: bullet;
}

li.className { /* styles li elements of class="className" */
    list-style-type: bullet;
} 
```

或者，使用祖先元素：

```
#navigationContainerID li { /* specifically styles the li elements with an ancestor of
                               id="navigationContainerID" */
    list-style-type: none;
}

li { /* then styles all other li elements that don't have that ancestor element */
    list-style-type: bullet;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-01T11:11:00.247

当子弹必须隐藏然后使用：

`li { list-style: none;}`

当子弹必须列出显示时，请使用：

`li { list-style: initial;}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T19:53:21.230

假设您正在使用这个 HTML5 布局：

```
<html>
    <body>
        <header>
            <nav><ul>...</ul></nav>
        </header>
        <article>
            <ul>...</ul>
        </article>
        <footer>
            <ul>...</ul>
        </footer>
    </body>
</html> 
```

你可以在你的 CSS 中说：

```
header ul, footer ul, nav ul { list-style-type: none; } 
```

如果您使用的是 HTML 4，请将 ID 分配给您的 DIV（而不是使用新的 fancy-pants 元素）并将其更改为：

```
#header ul, #footer ul, #nav ul { list-style-type: none; } 
```

如果您使用的是 CSS 重置样式表（如 Eric Meyer 的），您实际上必须返回列表样式，因为重置会从所有列表中删除列表样式。

```
#content ul { list-style-type: disc; margin-left: 1.5em; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-13T09:07:12.867

我结合了[Flavio](https://stackoverflow.com/a/10488130/2932052)对这个**小解决方案**的一些回答。

```
.hidden-ul-bullets li {
    list-style: none;
}
.hidden-ul-bullets ul {
    margin-left: 0.25em; // for my purpose, a little indentation is wished
} 
```

关于子弹的决定是在一个封闭元素上做出的，通常是`div`. 我的解决方案的**缺点**（或待办事项）是 liststyle 删除也适用于有序列表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-30T12:42:52.463

您还可以为要*显示*的项目符号定义一个类，因此在 CSS 中：

```
ul {list-style:none; list-style-type:none; list-style-image:none;} 
```

在 HTML 中，您只需定义要显示的列表：

```
<ul style="list-style:disc;"> 
```

或者您也可以定义一个 CSS 类：

```
.show-list {list-style:disc;} 
```

然后将其应用于您要显示的列表：

```
<ul class="show-list"> 
```

所有其他列表都不会显示项目符号...

# php - htaccess 反向目录

> ID：10487909
> 
> 赞同：2
> 
> 时间：2012-05-07T19:28:34.090
> 
> 标签：php, apache, .htaccess, redirect

是否可以让 htaccess 查找与 url 相关的特定文件，如果找不到则返回上一步？

例子：

```
/示例/这里/哪里/从

```

Htaccess 会查看“/example/here/where/from”是否确实是某种文件（/example/here/where/from.php），如果失败，它会返回一步并检查“/example/here”是否/where' 是一个文件（/example/here/where.php）等等。

如果它必须回到树中，则将它们假设为参数，如下所示：

/example/here.php

$_GET['params'] = '哪里/来自';

提前致谢

**编辑：**

拼写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:38:23.047

这非常棘手，但这是一个递归遍历给定 REQUEST_URI 的父目录的代码，它支持无限深度。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
# If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
# don't do anything
RewriteRule ^ - [L]

# if current ${REQUEST_URI}.php is not a file then
# forward to the parent directory of current REQUEST_URI
RewriteCond %{DOCUMENT_ROOT}/$1/$2.php !-f
RewriteRule ^(.*?)/([^/]+)/?$ $1/ [L]

# if current ${REQUEST_URI}.php is a valid file then 
# load it be removing optional trailing slash
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

### 解释：

假设原始 URI 是：`/index/foo/bar/baz`. 另外假设`%{DOCUMENT_ROOT}/index.php`存在，但在`DOCUMENT_ROOT`.

RewriteRule #1 有一个正则表达式，它将当前的 REQUEST_URI 分成两部分：

1.  除了最低的子目录之外的所有子目录`$1`都将在`index/foo/bar`这里
2.  `$2`将在`baz`这里的最低子目录

RewriteCond 检查是否`%{DOCUMENT_ROOT}/$1/$2.php`（转换为是否`%{DOCUMENT_ROOT}/index/foo/bar/baz.php`）**不是**有效文件。

如果条件成功，则在内部将其重定向到`$1/`此处`index/foo/bar/`。

再次重复 RewriteRule #1 的逻辑以使 REQUEST_URI 为（在每次递归之后）：

1.  `index/foo/bar/`
2.  `index/foo/`
3.  `index/`

此时 RewriteCond 对规则 #1 失败，因为`${DOCUMENT_ROOT}/index.php`那里存在。

我的 RewriteRule #2 表示转发`$1.php`是否`%{DOCUMENT_ROOT}/$1.php`是有效文件。请注意，RewriteRule #2 具有匹配除最后一个斜杠之外的所有内容并将其放入`$1`. 这意味着检查是否`%{DOCUMENT_ROOT}/index.php`是一个有效的文件（它确实是）。

此时 mod_rewrite 处理已完成，因为此后两个 RewriteCond 都失败了，因此无法触发进一步的规则，因此`%{DOCUMENT_ROOT}/index.php`您的 Apache Web 服务器会及时提供服务。

# android - 使用 ONE 活动类处理第二页

> ID：10487912
> 
> 赞同：0
> 
> 时间：2012-05-07T19:28:45.867
> 
> 标签：android, android-activity, multipage

我正在制作一个控件不能放在一个页面中的 android 应用程序。我创建了一个带有其余控件的新 XML 文件。目前我正在尝试在这样的页面之间切换：

```
setContentView(R.layout.main);
// initialize controls on main page
setContentView(R.layout.page2);
// initialize controls on second page 
```

但是我无法设置或更改第二页上的任何控件（尝试访问这些控件时也不会产生错误）。是否需要为第二页制作一个新的活动类？

如果您需要提供其他信息，请发表评论，我会提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:30:57.827

您可以将所有控件放入可滚动视图中。

（如果您有两个 XML 文件，我建议您也有两个活动。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:31:29.557

如果您想在一个活动中拥有多个“页面”，请查看`ViewFlipper`课程。您可以在一个 ViewFlipper 父级中有两个布局代表两个“页面” - 然后在两者之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:31:48.097

您可以使用片段来保存每个布局，然后切换。这将允许您从 1 个活动类或每个片段类进行控制。

# c# - NHibernate 不加载子对象

> ID：10487915
> 
> 赞同：1
> 
> 时间：2012-05-07T19:28:50.890
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping, nhibernate-collections

我有以下类和相关的映射（Fluent NHibernate）：

```
public class Category
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual Category ParentCategory { get; set; }
    public virtual IList<Category> ChildCategories { get; set; }
} 
```

映射：

```
public class CategoryMap : ClassMap<Category>
{
    public CategoryMap()
    {
        Table("Categories");

        Id(x => x.Id).Column("Id").CustomType("Int32").Access.Property()
         .CustomSqlType("int").Not.Nullable().Precision(10)
         .GeneratedBy.Identity();

        Map(x => x.Description).Column("Description").Nullable()
         .Generated.Never().CustomType(typeof (string)).Access
         .Property().Length(250);

        Map(x => x.Name).Not.Nullable().Generated.Never().CustomType("string")
         .Access.Property().Column("Name").Length(50);

        References(x => x.ParentCategory).Column("ParentCategoryId");
        HasMany(x => x.ChildCategories).KeyColumn("ParentCategoryId").Inverse()
         .AsBag().Fetch.Select();
    }
} 
```

我创建两个`Category`对象如下：

```
var c = new Category
        {
            Name = "Ebooks",
            Description = "Contains awz, mobi, pdf, epub and other 
                electronic books"
        };
var cc = new Category
         {
            Name = "Kindle Books",
            Description = "Contains Kindle ebook reader format books 
                    (awz, mobi)",
            ParentCategory = c
         };
session.SaveOrUpdate(c);
session.SaveOrUpdate(cc); 
```

当我尝试访问保存的对象时：

```
var c = session.Load<Category>(1);
var cc = c.ChildCategories; 
```

`c`包含`Category`对象`Id`为 1 但其`ChildCategories`属性为`null`.

我做错了什么？

PS：-这是我的第一次实验，`NHibernate`等等`Fluent NHibernate`。

**编辑：-**以下内容有效。我需要先关闭会话，然后再打开它进行阅读。否则，它只是从内存中读取，正如@Holf 指出我需要添加`Child Category`的`Category`那样：

c.ChilCategories.Add(cc);

我只是做了如下：

```
var session = sf.OpenSession();
CreateCategory(session);//ADDED TWO CATEGORIES EBooks, Kindle Ebooks
session.Close();

session = sf.OpenSession();
FetchCategories(session);//READ CATEGORY EBooks AND ASSOCIATED CHILDREN
session.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:35:36.437

尽管您已经处理了关系的一侧，但通过将“c”指定为“cc”的 ParentCategory，我看不到您在任何地方都做了相反的事情。我想你也需要做

c.ChildCategories.Add(cc);

在执行 SaveOrUpdate 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:52:25.027

您能否将地图更新为以下内容：

```
public class CategoryMap : ClassMap<Category>
{
    public CategoryMap()
    {
        Table("Categories");

        Id(x => x.Id).Column("Id").CustomType("Int32").Access.Property()
         .CustomSqlType("int").Not.Nullable().Precision(10)
         .GeneratedBy.Identity();

        Map(x => x.Description).Column("Description").Nullable()
         .Generated.Never().CustomType(typeof (string)).Access
         .Property().Length(250);

        Map(x => x.Name).Not.Nullable().Generated.Never().CustomType("string")
         .Access.Property().Column("Name").Length(50);

        References(x => x.ParentCategory).Column("ParentCategoryId");
        HasMany(x => x.ChildCategories).KeyColumn("ParentCategoryId").Inverse()
         .Cascade.All();
    }
} 
```

此外，您不能确定`Id`with 值`1`是指父类别，请使用 LInq 提供程序加载正确的对象。

# sql - 使用查询结果作为 SSMS 中存储过程的参数

> ID：10487925
> 
> 赞同：0
> 
> 时间：2012-05-07T19:29:13.870
> 
> 标签：sql, sql-server, xml, stored-procedures

我有一个存储过程，它采用数据类型 XML 的单个参数。

我还有一个包含 XML 示例的表，我想将其作为此过程的参数进行测试。

是否可以执行 SP 并将测试表上的查询结果作为 XML 输入参数传递？语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:52:53.187

像这样的东西：

```
declare @myvar xml

select top 1 @myvar=your_xml_column from your_table where your_condition

exec spYourProc @xmlparam=@myvar 
```

# java - GWT：使用 JSON 服务

> ID：10487928
> 
> 赞同：1
> 
> 时间：2012-05-07T19:29:24.270
> 
> 标签：java, json, web-services, gwt

这不是一个非常具体的问题。[我在本教程](http://www.javacodegeeks.com/2010/07/add-json-gwt-application.html)的帮助下创建了一个简单的项目，真的很好。到目前为止，我看到的所有与 JSON 相关的 GWT 代码示例似乎都与 JSON 一起工作（或用一些模型 JSON 模仿这项工作），这是在 GWT 中检索和处理的。我是 GWT 的新手，我想知道与返回 JSON 的服务交互的情况是什么（在[同一教程](http://www.javacodegeeks.com/2010/07/add-json-gwt-application.html)中提到了服务）以及这种交互的优缺点是什么。

我考虑了两个选项（好吧，服务是一个重载的术语）：

*   这些 JSON GWT 教程中提到的所有内容都是关于第三方服务的，例如 GData 和 Yahoo! [这里](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/GettingStartedJSON#JSON_vs._XML_vs._RPC)提到的 Web 服务是有道理的，因为它是关于在应用程序中检索一些数据和处理，

*   第二个选项是关于在项目范围内创建的服务（如果有一些情况，而且肯定有一些，我的问题是关于它们的）。

它可能无法在答案中完全解释，所以一个链接（或几个）将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:10:10.600

你的问题真的很笼统。但这里有一些提示：

`JSON`只是一种类似于[Protocol Buffers](http://code.google.com/p/protobuf/)`XML`或其他一些专有格式的数据交换格式。 它们在现代 Web 应用程序中是必需的，因为 UI 完全由浏览器中运行的 javascript 代码控制。 然而，Web 应用程序呈现给用户的数据通常驻留在后端。为了从后端获取数据到前端，您必须使用一些数据交换格式，例如or 。 的优点是，与它相比相当有效并且被广泛接受。 正如您提到的，有第三方服务依赖. 当您想在应用程序中包含服务时，这些非常有用。

`JSON``XML`
`JSON``XML`
`JSON`
将这种**面向服务的方法**应用于您自己的项目的最大优势是您可以解耦组件（前端和后端）。通过这样做，您可以实现以下目标：

*   使您的服务可供其他（网络）应用程序和用户使用，因为您的服务公开了他们可以使用的特定 API/数据交换格式。
*   轻松替换或添加另一个可以处理您的数据（显示或修改）的前端（例如，在您的 GWT 应用程序之外创建一个桌面应用程序）。

# jquery - 在 jquery 中向 iframe 添加点击事件

> ID：10487931
> 
> 赞同：0
> 
> 时间：2012-05-07T19:29:28.800
> 
> 标签：jquery

我的 DOM 有 iframe`id=""`和`name =""`.

iframe 里面有一个表格，表格里面是一个表格，我需要在表格数据上触发一个点击事件。表 data(td) 有一个链接。单击链接时，需要触发一个功能。

我如何使用 jQuery 来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:31:46.100

可能是这样的：

```
$("#iframeID").contents().find("td.data").children("a").on("click", function() {
    // do something
    return false;
}); 
```

# android - 如何在 flex mobile 中从另一个应用程序调用应用程序

> ID：10487933
> 
> 赞同：0
> 
> 时间：2012-05-07T19:29:35.020
> 
> 标签：android, ios, apache-flex, invoke, playbook

有没有办法在 Air 中从另一个应用程序打开一个应用程序？示例：我打开应用程序 A，其中包含一个按钮，单击该按钮可打开应用程序 B。假设 A 和 B 都是安装在设备中的独立应用程序，并且该设备可以是 PlayBook、Ipad 或 Android 平板电脑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:58:57.890

您必须走 Air Native Extension (ANE) 路线。要么为 iOS 和 Android 分别创建一个 ANE 解决方案，要么创建一个将功能抽象到一个解决方案中的 ANE。如何在 Android 上从应用 B 启动应用 A 与在 iOS 上不同。在 SO 中看到[这个](https://stackoverflow.com/questions/5630874/is-there-android-intent-concept-in-iphone-sdk)答案。

要在 Android 上实现它，您需要将原生 Android Java 解决方案包装在 ANE 中。本机 Java 代码使用应用 B 的包名从应用 A 启动应用 B：

```
Intent intent = getPackageManager().getLaunchIntentForPackage("com.yourdoman.yourapp");
startActivity(intent); 
```

这是有关如何通过 ANE 启动 Activity的[视频教程，您可以在此基础上创建 ANE。](http://www.leebrimelow.com/?p=3119)您必须定制解决方案以按域而不是 Activity 启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:20:25.760

因为我真的不知道你想要做什么的细节，我想我应该在这里指出你：[http ://www.riaspace.com/2011/08/defining-custom-url-schemes-for-your -air-mobile-applications/](http://www.riaspace.com/2011/08/defining-custom-url-schemes-for-your-air-mobile-applications/) 这是我所知道的问题的最佳答案。

```
 private function getHostName() : void
        {
            if (NativeProcess.isSupported)
            {
                var OS : String = Capabilities.os.toLocaleLowerCase();
                var file : File;

                if (OS.indexOf('win') > -1)
                {
                    // Executable in windows
                    file = new File('C:\\Windows\\System32\\hostname.exe');
                }
                else if (OS.indexOf('mac') > -1 )
                {
                    // Executable in mac
                }
                else if (OS.indexOf('linux'))
                {
                    // Executable in linux
                }

                var nativeProcessStartupInfo : NativeProcessStartupInfo = new NativeProcessStartupInfo();
                nativeProcessStartupInfo.executable = file;

                var process : NativeProcess = new NativeProcess();
                process.addEventListener(NativeProcessExitEvent.EXIT, onExitError);
                process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutput);
                process.start(nativeProcessStartupInfo);
                process.closeInput();
            }
        }

        private function onOutput(event : ProgressEvent) : void
        {
            var strHelper : StringHelper = new StringHelper();
            formStationID.text = event.target.standardOutput.readUTFBytes(event.target.standardOutput.bytesAvailable);
            formStationID.text = strHelper.trimBack(formStationID.text, "\n");
            formStationID.text = strHelper.trimBack(formStationID.text, "\r");
        } 
```

此代码获取工作站名称。我听说这可以在 IOS 和 Android 上完成，但我还没有找到任何证据。

# iphone - 如何在 iOS 应用程序的通知中心更改推送通知的图标？

> ID：10487934
> 
> 赞同：2
> 
> 时间：2012-05-07T19:29:45.097
> 
> 标签：iphone, ios, ios5

通知中心（顶部区域）中的推送通知显示了我们 iOS 应用程序的旧应用程序图标。具体来说，它显示了我们应用程序版本 1.0 中的图标，但我们从后续版本开始将图标换成了新图标。

我们如何更改推送通知的应用程序图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:45:20.807

我相信通知中心使用与 Spotlight 相同的图标，也许您将其中一个添加到您的项目中并且没有更新它？

[Apple 关于应用程序图标的参考](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/AppIcons.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:40:22.640

你指的是发布版本吗？如果没有，请尝试“干净”构建。

如果是这样，请检查您的 plist 文件并确保所有图标设置都正确。

我只是在调试时经历过这种情况，并且干净的构建修复了所有问题。

希望这可以帮助！

# c# - C# - 从 BlueHost 发送电子邮件

> ID：10487937
> 
> 赞同：2
> 
> 时间：2012-05-07T19:30:02.933
> 
> 标签：c#, email, smtp, bluehost

我有 BlueHost，我无法让它与 C# 一起使用。我已经从我登录的页面上删除了详细信息：

![在此处输入图像描述](../Images/25624ccf2a048224ebab2ed3b897845f.png)

然后我使用此代码尝试发送电子邮件：

```
MailMessage message = new MailMessage
{
    From = new MailAddress("toEmail@site.com", "toEmail@site.com")
};
message.IsBodyHtml = false;
message.To.Add("email@site.com");
message.Subject = "my subject";
message.Body = "body";
message.Priority = MailPriority.Normal;
SmtpClient client = new SmtpClient
{
    Port = 465,
    Host = "box263.bluehost.com",
    EnableSsl = true,
    Credentials = new NetworkCredential("myEmail@site.com", "myPassword"),
    Timeout = 10000,
    UseDefaultCredentials = false
};
client.Send(message); 
```

它会抛出一个错误，说它超时，即使它有足够的时间（10 秒）。即使我不设置超时时间，它也只是坐一会儿。我也尝试过不使用 SSL，禁用“EnableSsl”，将端口更改为“26”，并将主机更改为“mail.embirk.com”，但这也不起作用。此外，这确实适用于 Microsoft Outlook 等第 3 方软件。有任何想法吗？谢谢。

**编辑：** 我还联系了 Bluehost 的二级支持技术人员，他们说他们也被难住了。他们说他们用 Thunderbird 试过了，一切都奏效了。他们说可能是要找证书？

编辑2：

这个 Outlook 注册表有帮助吗？（如果运行，这适用于 Outlook）。

```
REGEDIT4

[HKEY_CURRENT_USER\Software\Microsoft\Office\Outlook\OMI Account Manager\Accounts\steve@embirk.com]
"DCEmail"=dword:00000002
"IMAP Server"="box263.bluehost.com"
"IMAP Port"=dword:000003e1
"SMTP Server"="box263.bluehost.com"
"SMTP Port"=dword:000001d1
"Connection Type"=dword:00000003
"IMAP User Name"="steve@embirk.com"
"SMTP Display Name"="steve@embirk.com"
"SMTP Email Address"="steve@embirk.com"
"SMTP Reply To Email Address"="steve@embirk.com"
"SMTP Organization Name"=""
"Account Name"="steve@embirk.com"
"IMAP Timeout"=dword:0000003c
"SMTP Timeout"=dword:0000003c
"IMAP Secure Connection"=dword:00000001
"IMAP Skip Account"=dword:00000000
"IMAP Prompt for Password"=dword:00000001
"SMTP User Name"="steve@embirk.com"
"SMTP Use Sicily"=dword:00000002
"SMTP Secure Connection"=dword:00000001
"SMTP Split Messages"=dword:00000000
"SMTP Prompt for Password"=dword:00000000
"IMAP Root Folder"=""
"IMAP Polling"=dword:00000001
"IMAP Poll All Folders"=dword:00000001
"IMAP Dirty"=dword:00000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:02:51.763

我会尝试在客户端块之外声明凭据并将其分配给客户端凭据。

实际上完全摆脱了障碍。

```
NetworkCredential myCred = new NetworkCredential("xxxxxxxx", "xxxxxxxx");

client.Credentials = myCred;
client.port = 465,
client.Host = "box263.bluehost.com",
client.EnableSsl = true,
client.Credentials = new NetworkCredential("myEmail@site.com", "myPassword"),
client.Timeout = 10000,
client.UseDefaultCredentials = false 
```

# java - 如何在 Eclipse 中自动生成 *-javadoc.jar？

> ID：10487938
> 
> 赞同：3
> 
> 时间：2012-05-07T19:30:08.873
> 
> 标签：java, eclipse, jar, javadoc

*我使用Export >> Java >> Java-doc*在我的 Eclipse 项目中创建了 javadocs 。目录结构是*MyProject >> docs >> javadoc*。我有两个问题：

1.  如何使用 Eclipse Build 自动生成 javadoc？
2.  如何使用 Eclipse Build 的 pattner MyProject-javadoc.jar 自动生成 javadoc？

第二个问题更重要，因为我知道如何手动生成javadoc，但我不知道如何创建*-javadoc.jar。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T19:42:40.187

当您使用从您调用的向导配置 Javadoc 生成时，`Project->Generate Javadoc...`您可以选择为您的设置生成`ant`脚本。然后，您可以从主构建脚本调用（或复制到）生成的 ant 目标。

要生成存档本身，您可以简单地将带有生成文档的文件夹打包为 jar 文件。将类似于以下目标的内容添加到您的 ant 脚本中：

```
<target depends="javadoc" description="build javadoc jar" name="package-docs">
    <jar compress="true" destfile="javadoc.jar" basedir="doc" />
</target> 
```

# asp.net-mvc-4 - 非 200 时的 Mvc4 WepApi 空响应

> ID：10487943
> 
> 赞同：1
> 
> 时间：2012-05-07T19:31:07.420
> 
> 标签：asp.net-mvc-4, asp.net-web-api

当调用 Action 并引发特定异常时，我使用 ExceptionFilterAttribute 将错误转换为不同的响应，如 HttpStatusCode.BadRequest。这一直在本地工作，但我们将它推送到服务器，现在当我收到 BadRequest 时，我没有在响应中获得任何信息。我错过了什么？

```
 public override void OnException(HttpActionExecutedContext actionExecutedContext)
    {
        MyException ex = actionExecutedContext.Exception as MyException;
        if (ex == null)
        {
            base.OnException(actionExecutedContext);
            return;
        }

        IEnumerable<InfoItem> items = ex.Items.Select(i => new InfoItem
                                                                       {
                                                                           Property = i.PropertyName,
                                                                       Message = i.ToString()
                                                                   });

    actionExecutedContext.Result = new HttpResponseMessage<IEnumerable<InfoItem>>(items, HttpStatusCode.BadRequest);
  } 
```

编辑：当我在本地点击服务时，正文包括在内。似乎问题出在从远程机器上访问服务时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:53:41.347

尝试这个：

```
GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = 
            IncludeErrorDetailPolicy.Always 
```

# javascript - Facebook 连接登录框

> ID：10487945
> 
> 赞同：0
> 
> 时间：2012-05-07T19:31:15.953
> 
> 标签：javascript, facebook

我的代码有问题，该代码旨在创建 Facebook Connect 登录弹出窗口。在下面的代码中，如果我在准备好的文档中包含点击事件，则它会触发创建 2 个弹出窗口，但如果我将它留在准备好的文档之外，则它无法创建任何弹出窗口。有人可以建议吗？

```
<script type="text/javascript">

            $(document).ready(function () {

                window.FB.init({ appId: 'xxx', status: true, cookie: true, xfbml: true });

            });

            $('#fbLogin').click(function () {
                window.FB.login(function (response) {
                    if (response.status == 'connected') {
                        window.location.href = 'redirecturl';
                    }
                }, { perms: 'email' });
            });

        </script>
       <fb:login-button autologoutlink="false" perms="email" id="fbLogin">

       </fb:login-button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:45:48.243

*   点击`fb:login-button`会弹出登录对话框。
*   您的绑定`#fblogin`将打开第二个对话框

您需要选择其中之一`fb:login-button`或`FB.login`不选择两者。

如果您需要在用户登录后重定向页面，只需删除`FB.login`调用并订阅（[`FB.Event.subscribe`](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)）`auth.statusChange`事件以检查登录状态。

```
FB.Event.subscribe('auth.statusChange', function(response){
  if (response.status == 'connected') {
    window.location.href = 'redirecturl';
  }
}); 
```

# sql-server-2008 - SQL Server 2008 存储过程中是否不返回列别名/计算列？

> ID：10487946
> 
> 赞同：0
> 
> 时间：2012-05-07T19:31:22.350
> 
> 标签：sql-server-2008, stored-procedures

我刚刚将几个计算列添加到返回结果集的存储过程中。我从 C#/.NET 调用它。新列（到最后）都返回值 0。这是我返回的第一行，以及它下面的存储过程：

```
Daily Pricing and Volume        5/4/2012    5229    5249    5256    0   0

ALTER PROCEDURE [dbo].[spProcedureStatsCollectionCountComparisons]

AS

DECLARE @MaxDataDownloadDate date

SET @MaxDataDownloadDate = dbo.MostRecentTradeDateForDataDownload()

SELECT ProcedureName, TradeDate, LatestCount, PriorCount, AvgAllCounts, 
    ((LatestCount-PriorCount)/PriorCount) AS PctChgLatestVsPrior, 
    ((LatestCount-AvgAllCounts)/AvgAllCounts) AS PctChgLatestVsAvg
FROM vwProcedureStatsCollectionCountComparisons
WHERE TradeDate = @MaxDataDownloadDate 
```

我的问题是，我不能在存储过程的结果集中使用列别名'，还是在工作中我遗漏了一些其他问题？提前致谢..

根据要求，相关的 C# 代码：

```
SqlDataReader collectionCounts = dal.ProcedureStatsCollectionCountComparisons();
int rowCounter = 4;
while (collectionCounts.Read())
{

    wkhst.Cells[rowCounter, 1] = collectionCounts["ProcedureName"];
    wkhst.Cells[rowCounter, 2] = collectionCounts["TradeDate"];
    wkhst.Cells[rowCounter, 3] = collectionCounts["LatestCount"];
    wkhst.Cells[rowCounter, 4] = collectionCounts["PriorCount"];
    wkhst.Cells[rowCounter, 5] = collectionCounts["AvgAllCounts"];
    wkhst.Cells[rowCounter, 6] = collectionCounts["PctChgLatestVsPrior"];
    wkhst.Cells[rowCounter, 7] = collectionCounts["PctChgLatestVsAvg"];

    rowCounter++;
}

excelApp.Visible = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:40:17.690

据我所知并根据提供的数据，它按预期工作。这是因为，您在执行以下操作。

```
SELECT ((5229 - 5249)/5249) 
```

它总是返回“0”，因为第一个数字小于第二个。

编辑：

选择（CAST（（5229 - 5249）作为浮动）/ CAST（5249作为浮动））

# java - Java 密码套件

> ID：10487962
> 
> 赞同：15
> 
> 时间：2012-05-07T19:32:28.010
> 
> 标签：java, ssl

我正在尝试计算使用 SSLSocketFactory.getSupportedCipherSuites() 返回密码套件的顺序 - Java 1.6 和 Java 1.7 之间似乎有所不同。

我认为这很容易确定，但遇到了一些问题。不过，首先，这是我正在使用的代码：

```
SSLContext context = SSLContext.getDefault();
SSLSocketFactory sf = context.getSocketFactory();
String[] cipherSuites = sf.getSupportedCipherSuites(); 
```

非常直截了当（如果我做了一些愚蠢的事情，请纠正我）。所以，我认为（使用 eclipse）我可以进入 getSupportedCipherSuites() 方法，但似乎源代码没有这样做（有什么原因吗？）。我在 jsse.jar 中找到了该类并使用[JD-Eclipse](http://java.decompiler.free.fr/?q=jdeclipse%20JD-Eclipse)对其进行了反编译。然而，这给了我一个抽象类，我无法看到抽象类的具体实现（我发现可以使用属性“ssl.SocketFactory.provider”设置该类，但这还没有在 java.security 中指定）。我也无法确定如何使用“javax.net.debug”属性打开日志记录（这会消失在本机方法中）。

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T19:37:35.887

SunJSSE 提供程序文档中提供了支持（和启用）的密码套件列表：适用于[Java 6](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)和[Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)。列表顺序确实不同。

我必须承认我从来没有真正关注过*受支持*的密码套件列表中的顺序。重要的是 *enabled" 密码套件列表。

如果您对代码本身感兴趣，您应该在[`sun.security.ssl.SSLContextImpl`](http://www.docjar.com/html/api/sun/security/ssl/SSLContextImpl.java.html)和中找到它[`sun.security.ssl.CipherSuite`](http://www.docjar.com/html/api/sun/security/ssl/CipherSuite.java.html)。请注意，这些类是 Sun JSSE 实现的一部分，而不是公共 Java API 的一部分。

关于调试，您可以在[JSSE 参考指南的调试部分](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Debug)找到所需的参数。

# c# - c# 使用 stunserver 完成远程计算机发送和接收数据

> ID：10487969
> 
> 赞同：1
> 
> 时间：2012-05-07T19:33:09.307
> 
> 标签：c#, nat, hole-punching, nat-traversal

我无法使用这两个远程计算机发送数据 stunserver。数据来自本地计算机，但远程计算机上的数据不会到来。

我正在使用我的程序 stunserver

```
public void run() 
{
    UpdateText("Now Listening..");
    remoteSender = new IPEndPoint(IPAddress.Any, 0);
    tempRemoteEP = (EndPoint)remoteSender;
    byte[] packet = new byte[1024];
    while (true)
    {
        if (socket.Available > 0)
        {
            this.nbBytesRx = socket.ReceiveFrom(packet, ref tempRemoteEP);
            nbPackets++;
            seqNo = BitConverter.ToInt16(packet, 0);
            UpdateText(nbPackets.ToString() + ":" + seqNo.ToString() + " / ");
        }
    }
}

Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram,  ProtocolType.Udp);

socket.Bind(new IPEndPoint(IPAddress.Any, 0));
string localEP = socket.LocalEndPoint.ToString();
string publicEP = "";
string netType = "";
STUN_Result result = STUN_Client.Query("stunserver.org", 3478, socket);
netType = result.NetType.ToString();
if (result.NetType != STUN_NetType.UdpBlocked)
{
    publicEP = result.PublicEndPoint.ToString();
}
else
{
    publicEP = "";
}
UpdateText("Local EP:" + localEP);
UpdateText("Public EP:" + publicEP);

ThreadStart startMethod = new ThreadStart(this.run);
thread = new Thread(startMethod);
thread.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-10T22:26:03.910

我正在解决同样的问题，并使用相同的库。

你检查你是否得到你的端点？我发现我们那个指向的服务器不在线。所以我做了一个服务器列表来通过。

我获得公共 EP 的方法：

```
public static IPEndPoint GetMyPublicEP() {

// Create new socket for STUN client.
            Socket _socket = new Socket
                (AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            _socket.Bind(new IPEndPoint(IPAddress.Any, 0));

            List<string> _stunServers = new List<string> { // список стан серверов для проверки своей ендпоинт, не все работают
                "stun.l.google.com:19302",
                "stun1.l.google.com:19302",
                "stun2.l.google.com:19302",
                "stun3.l.google.com:19302",
                "stun4.l.google.com:19302",
                "stun01.sipphone.com",
                "stun.ekiga.net",
                "stun.fwdnet.net",
                "stun.ideasip.com",
                "stun.iptel.org",
                "stun.rixtelecom.se",
                "stun.schlund.de",
                "stunserver.org",
                "stun.softjoys.com",
                "stun.voiparound.com",
                "stun.voipbuster.com",
                "stun.voipstunt.com",
                "stun.voxgratia.org",
                "stun.xten.com"
            };

            foreach (string server in _stunServers)
            {
                try
                {
                    STUN_Result result = STUN_Client.Query(server, 3478, _socket);
                    IPEndPoint myPublicEPStun = result.PublicEndPoint;

                    if (myPublicEPStun != null)
                    {
                        _myPublicEPStun = myPublicEPStun;
                        break;
                    }
                }
                catch (Exception E)
                {
                    Console.WriteLine("Якась необ`ясніма магія трапилась");
                }
            }
            return _myPublicEPStun;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-23T10:56:44.440

我有同样的问题......我解决了它禁用 Windows 防火墙。它阻塞了所有的交通。

# javascript - Javascript多维数组：添加值

> ID：10487970
> 
> 赞同：1
> 
> 时间：2012-05-07T19:33:12.030
> 
> 标签：javascript, jquery, multidimensional-array, add

所以我有一个多维数组，例如：

```
myArr = [["venue",2],["venue",16],["inning",2],["inning",4],["inning",32],["hithard", 4]] 
```

我想添加类似的值。所以最后我只有：

```
"venue" = 18, "inning" = 38, and "hithard" = 4. 
```

你能给我一个例子来说明如何做到这一点吗？使用 Javascript 和/或 jQuery

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:36:06.670

```
myArr = [["venue",2],["venue",16],["inning",2],["inning",4],["inning",32],["hithard", 4]];
values = {};
for (i=0;i<myArr.length;i++){
   if ("undefined" == typeof values[myArr[i][0]]) {values[myArr[i][0]] = 0;}
   values[myArr[i][0]] += myArr[i][1];
}
arr = [];
query_string = "";
for (i in values) {
    // if you want it in an array:
    arr.push('"' + i + '" = ' + values[i]);
    query_string += (query_string.length ? "&" : "") + i + "=" + values[i];
}
​console.log(arr);​ 
```

演示：http: [//jsfiddle.net/Ta97E/2/](http://jsfiddle.net/Ta97E/2/)

您可以使用值来创建查询字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:43:07.423

我不确定你是否想要一个数组或对象。如果对象，停止它是第一次通过，`tmp`在下面的代码中应该将对象返回为`Object { venue=18, inning=38, hithard=4}`.

[**演示**](http://jsfiddle.net/skram/bVxPq/4/)

```
var tmp = {}, keys;
for (var i = 0; i < myArr.length; i++) {
    keys = myArr[i][0];
    tmp[keys] = (tmp.hasOwnProperty(keys))? 
              (tmp[keys] + myArr[i][1]):myArr[i][1];
} //tmp - will return you a Object { venue=18, inning=38, hithard=4}

var output = [];
for (keys in tmp) {
    output.push([keys, tmp[keys]]);
} //output will return you an array as [["venue", 18],["inning", 38],["hithard", 4]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T19:43:12.240

检查此代码：

```
var final = {};
for (var i in myArr) {
    var item = myArr[i];
    final[item[0]] = (final[item[0]] || 0) + item[1];
}

console.log(final);​ 
```

**演示：http:** [//jsfiddle.net/UVJEb/](http://jsfiddle.net/UVJEb/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T19:44:38.013

[下划线](http://underscorejs.org/)解决方案：

```
 sums = _.reduce(myArr, function (obj, item) { 
    obj[item[0]] = (obj[item[0]] || 0) + item[1]; 
    return obj; 
 }, {});

 // sums = {"venue":18,"inning":38,"hithard":4} 
```

在 jQuery 中有点脏

```
sums = {}

$.each(myArr, function (i, value) {
    sums[value[0]] = (sums[value[0]] || 0) + value[1];
}); 
```

编辑：添加 jQuery 版本

# javascript - Javascript 中如何收集匿名对象垃圾？

> ID：10487971
> 
> 赞同：8
> 
> 时间：2012-05-07T19:33:13.587
> 
> 标签：javascript, memory-management, garbage-collection

如果我创建一个对象而不将其分配给任何东西，Javascript 垃圾何时会收集该对象？这是一个例子：

```
alert(new Date().getTime()); 
```

如果不做这样的垃圾回收，会不会导致内存泄漏？

```
for (var i = 0; i < 99999999; i++) {
    console.info(new Date().getTime());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T19:41:23.227

如果范围内没有人引用匿名对象，他们将在下次 GC 运行时进行垃圾收集。

因此，在 Console.info 完成运行后，它们就可以进行垃圾收集了。如果您设置任何范围内的变量来引用它们，那么它们不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T19:35:40.060

垃圾收集的美妙之处在于您*不*知道何时回收内存，也不应该关心（除非它发生得太频繁）。

在这种情况下，运行时最终应该回收这些`Date`实例，但您所做的任何事情都不会真正改变它的执行速度。此外，这不会导致内存泄漏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T19:45:14.240

JavaScript 会自动运行 GC（垃圾收集器）来回收不再使用的字符串、对象、数组和函数所占用的内存。

> 垃圾收集的一个关键特性是垃圾收集器必须能够确定何时可以安全地回收内存。显然，它绝不能回收仍在使用的值，而应该只收集不再可访问的值；也就是说，不能通过程序中的任何变量、对象属性或数组元素引用的值。

**参考：** [**这里。**](http://docstore.mik.ua/orelly/webprog/jscript/ch11_03.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T19:52:52.457

这是关于 JS garbare 收集的一个很好的参考：[http ://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript](http://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)

# ios - 应用程序未出现在 iCloud“管理存储”列表中

> ID：10487975
> 
> 赞同：2
> 
> 时间：2012-05-07T19:33:31.147
> 
> 标签：ios, cocoa, icloud

我的应用程序已发布并使用 iCloud，但该应用程序未出现在 iCloud 首选项中（Settings.app > iCloud > Storage & Backup > Manage Store > Documents & Data）

同步已启动并且效果很好，但我无法访问我的应用程序的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:46:50.267

仅当其 iCloud 容器具有非空文件时，应用程序才会出现在 iCloud“管理存储”列表中。

# android - 将新字体安装到 android 模拟器的最佳方法是什么？

> ID：10487976
> 
> 赞同：2
> 
> 时间：2012-05-07T19:33:33.783
> 
> 标签：android, android-emulator, android-fonts

我知道在 android 模拟器上安装字体有很多问题。我正在分享对我有用的方法作为答案，如果有人有更好的方法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:35:19.633

每当 android 无法找到它查找的特定字符时`DroidSansFallback.ttf`，您需要做的就是`DroidSansFallback.ttf`通过将所需语言的 ttf 字体重命名为`DroidSansFallback.ttf`. 执行以下步骤。

> 1.获取市场支持的root android模拟器。你可以在这里找到一个：[Rooted Market Enabled AVD](http://www.ehalm.at/avd-2.2-market.php?l=en)
> 
> 2.然后抓一个资源管理器应用程序，我更喜欢根资源管理器。
> 
> 3.将免费的ttf字体（您要安装）重命名为DroidSansFallback.ttf。
> 
> 4.从您在步骤 1 中下载的图像创建一个 AVD。
> 
> 5.  通过 DDMS 中的文件资源管理器将 DroidSansFallback.ttf 推送到模拟器的 SD 卡（我使用的是 Eclipse Indigo IDE）。
>     
>     
> 6.  安装根资源管理器（您可以使用通过市场下载的另一个资源管理器）。
>     
>     
> 7.  打开根资源管理器，单击 mount r/w。
>     
>     
> 8.  然后去sd卡复制DroidSansFallback.ttf，然后去system，点击mount r/w。
>     
>     
> 
> 9.然后转到字体并覆盖现有的 DroidSansFallback.ttf。
> 
> 10.  然后从权限选项中将所有权限授予新的 DroidSansFallback.ttf。

就是这样。我用这个方法回答了一个关于[Bangla Font Insatallation的问题](https://stackoverflow.com/questions/10369552/how-to-install-bangla-on-android-emulator/10369560#10369560)

# c++ - 2 个项目可以在 MS VS 2008 中创建一个 dll 吗？

> ID：10487977
> 
> 赞同：1
> 
> 时间：2012-05-07T19:33:39.510
> 
> 标签：c++, c, visual-studio

是否可以在 MS VS 2008 中使用 2 个项目创建单个 dll？请告诉我。我使用 C 和 C++ 作为我的编程语言。请给我一个例子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:36:15.193

是的，您可以从其中一个创建一个静态库，从另一个创建一个 dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:36:48.773

绝对有可能做到这一点。构建项目的最简单方法是

*   Project1：生成一个 .lib 文件
*   Project2：生成一个链接 Project1 中的 .lib 的 .dll

虽然没有 .lib 文件的中间步骤，但实际上不可能将两个项目直接编译成一个 DLL。它可以通过项目系统中的一些邪恶的双重包含逻辑来完成，但这是一个不推荐或非常容易维护的解决方案。

# jquery - jquery mobile 如何在多个页面中使用相同的导航栏？

> ID：10487981
> 
> 赞同：3
> 
> 时间：2012-05-07T19:34:10.600
> 
> 标签：jquery, jquery-mobile

目前我在一个html文件中嵌入了多个页面，每个页面底部都有一个导航栏来导航到另一个页面。

但是，不同页面中的导航栏在不同位置是相同的代码。因此，在导航栏中编辑一个小细节意味着我必须在所有这些位置更改（相同的）代码。此外，如果我以这种方式实现它，导航栏按钮的突出显示将无法正确运行。

实际上，导航栏的代码是相同的——它们都在相同的 div 标签内。因此，我认为必须有某种方法可以为所有这些导航栏重用一个代码？这样我就不必每次更改导航栏中的某些细节时一次又一次地编辑代码？（如果我有 10 页或更多，那将是一场灾难）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T23:23:40.620

您可以使用 JavaScript 在每个页面初始化时添加一个元素（确保此代码包含在每个 HTML 文档中）：

```
$(document).on('pageinit', '[data-role="page"]', function () {
    $(this).children('[data-role="content"]').append('<div class="my-nav-bar">...</div>');
}); 
```

`.append()`然后，您将在函数调用中为您的导航栏添加 HTML 。这使您可以保留一份代码副本，并在网站的每个页面上使用它。

这有一个额外的好处，即代码只需由用户下载一次，而不是为每个页面下载。

# html - 使用 jwplayer + HTML5 播放视频后再次显示海报图像

> ID：10487982
> 
> 赞同：2
> 
> 时间：2012-05-07T19:34:13.767
> 
> 标签：html, html5-video, jwplayer

如何在使用 jwplayer 的视频结束后再次显示海报图像？这是一个代码片段：

```
<video
    src="video/Motion.mp4"
    height="860"
    id="video"
    width="620"
    poster="img/poster.png"
    onclick="play();">
    </video>

    <script type="text/javascript">
    jwplayer("video").setup({
    flashplayer: "jwplayer/player.swf",
    controlbar: "none",
    });

    jwplayer().getPlugin("display").hide();
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:47:59.690

您是否尝试过利用 onComplete 事件？

[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference#Events](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference#Events)

```
<script type="text/javascript">
  jwplayer("video").setup({
  flashplayer: "jwplayer/player.swf",
  controlbar: "none",
  events: {
    onComplete: function() {
      alert('video has finished..do something here..');
    }
  });
</script> 
```

# asp.net-mvc-3 - URL.Action 将额外信息附加到参数

> ID：10487989
> 
> 赞同：2
> 
> 时间：2012-05-07T19:34:48.917
> 
> 标签：asp.net-mvc-3

在我看来，我有以下代码：

```
@foreach (Document document in Model.Documents)
{
  <img src="@Url.Action("GetDocument", new { docId = Model.DocId, filename =  
  document.DocumentName })" />
} 
```

单步执行代码，文件名按预期解析为“小丑.jpg”。

但是，当将此参数传递给控制器​​时，如下所示：

```
[AcceptVerbs(HttpVerbs.Get)]
[OutputCache(Duration = 36000)]
public virtual ImageResult GetDocument(int docId, string filename)
    {
        var attachment = _docService.GetDocument(docId, filename);
        ...........
    } 
```

文件名参数附加了额外的整数，因此它的值类似于“clown.jpg?316767349393”。

为什么会这样，以及如何让它不那样做？它阻止我按文件名查找文件。我可以通过忽略 ? 继续，但我想知道为什么会发生这种情况以及阻止它发生的正确方法。

编辑：我通过在控制器中添加这行代码来解决这个问题：

```
filename = filename.Split('?')[0]; 
```

但显然这并不是我真正想要的编码方式......

# c# - Outlook 加载项显示为活动但在功能区中不可用

> ID：10487993
> 
> 赞同：0
> 
> 时间：2012-05-07T19:35:26.357
> 
> 标签：c#, outlook, vsto, outlook-addin

我创建了一个简单的 Outlook 加载项，但似乎无法正确地将安装包放在一起。

*规格：Vis​​ual Studio 2010 (C#)、.Net 4.0、Office 2007*

该插件在我的开发环境中完美运行，并且似乎可以使用我创建的安装文件成功安装（使用[http://blogs.msdn.com/b/mcsuksoldev/archive/2010/10/01/building-and-deploying -an-outlook-2010-add-in-part-2-of-2.aspx](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/10/01/building-and-deploying-an-outlook-2010-add-in-part-2-of-2.aspx)）。

问题是一旦安装后重新打开 Outlook，就找不到加载项。它显示为“活动应用程序加载项”，但它在功能区上不可用，就像我通过 Visual Studio 运行加载项时一样。我是否需要以某种方式在功能区中对其进行硬编码？另外，我注意到如果我手动打开 VSTO 文件并安装它，一切似乎又完美了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:14:59.267

VSTO 安装有很多问题。以下是我认为在您的情况下可能出现的问题：

1.  如果您在开发机器上安装插件，请尝试使用不同的机器。在您的开发计算机上调试加载项会通过*一些*注册表项向 Office 注册加载项，但不会清理该注册信息。（您当然可以自己清理这些密钥，然后尝试加载项的安装程序，但我建议使用干净的机器以防万一。）

2.  `|vstolocal`在清单路径中尝试安装。我知道 Microsoft 建议包含它，但根据我自己的经验，它阻止了我的加载项加载，并且使用正常路径解决了问题。

3.  如果您在 64 位计算机上安装到 Office 32 位，则需要将注册表项写入 HKEY_LOCAL_MACHINE\Software\ **Wow6432Node** \Microsoft\Office...

4.  考虑使用[VSTOInstaller.exe](http://msdn.microsoft.com/en-us/library/bb772078.aspx)安装外接程序，而不是手动编写注册表项。（我尝试自己编写注册表项，但微软自己的文档——而是随机的博客文章——因为这样做不够彻底，有时只是完全不正确和误导。）

# html - 如何在coldfusion中检索cookie？

> ID：10487994
> 
> 赞同：2
> 
> 时间：2012-05-07T19:35:26.903
> 
> 标签：html, cookies, coldfusion

**情况：**
我知道如何设置这样的cookie：
`<cfcookie name="firstName" expires="never" value="#url.firstName#">`

**问题：**
使用coldfusion，我以后**如何检索这个cookie的值**？在网上看到很多关于设置的资源，但对检索没有任何用处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:44:54.923

您可以像这样使用 cookie 范围：

```
<cfoutput>#cookie.firstName#</cfoutput> 
```

有关范围的更多信息，请访问[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Variables_30.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Variables_30.html)