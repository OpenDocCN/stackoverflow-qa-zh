# StackOverflow 问答 10812000-10812999

# joomla1.5 - 我可以将具有 Virtuemart 1.1.4 的 joomla1.5 更新到 joomla 2.5（Virtuemart 有许多自定义代码）

> ID：10812000
> 
> 赞同：0
> 
> 时间：2012-05-30T07:41:10.920
> 
> 标签：joomla1.5, upgrade, virtuemart, joomla2.5

我有一个网站，它的 joomla 1.5 有 1.1.4，其中有很多自定义。另外我还有一些其他组件，但我的主要定制是在 ddermart 中，所以我是否有可能将我的 joomla 从 1.5 升级到 2.5，并且用它进行的所有定制都可以与它一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:07:26.047

不，升级joomla 和deremmart 不是一个好主意。joomla 和美德玛特都进行了很多更改，因此如果您升级它们，可能会产生很多问题。

# unit-testing - 从 emma 代码覆盖范围中排除 maven 模块

> ID：10812008
> 
> 赞同：1
> 
> 时间：2012-05-30T07:41:34.330
> 
> 标签：unit-testing, maven, maven-2, code-coverage, emma

我有一个 Maven 超级 pom，由多个模块组成。我`mvn emma:emma`在超级 pom 上运行，我得到了所有模块（定义了测试）的 emma 代码覆盖率。

现在我希望从 emma 代码覆盖运行中排除其中一个模块。这样当我 `mvn emma:emma`在超级 pom 上运行时，特定模块不会测量代码覆盖率。但是当我做`mvn test`所有模块测试时，将照常执行。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:03:11.343

正如我在 Maven Emma 插件文档中看到的那样，没有这样的属性可以将某些项目（模块）从覆盖率测量中排除。似乎所有的反应堆项目都将由 Emma 插件处理。

在您的情况下有用的是插件[能够](http://emma.sourceforge.net/maven-emma-plugin/properties.html)从覆盖率报告中排除一些测试类（`maven.emma.filter.excludes`属性），但它只有在您能够指定捕获您想要有效排除的模块的测试类的掩码时才有效，所以它可能不适用于您的情况。

# android - 以编程方式滑动时更改 ViewPager 动画持续时间

> ID：10812009
> 
> 赞同：74
> 
> 时间：2012-05-30T07:41:36.697
> 
> 标签：android, animation, android-viewpager

我正在使用以下代码更改幻灯片：

```
viewPager.setCurrentItem(index++, true); 
```

但是变化太快了。有没有办法手动设置动画速度？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-06T05:56:53.607

我想做自己并且已经实现了解决方案（但是使用反射）。~~我还没有测试它，但它*应该可以*工作或需要最少的修改。~~在 Galaxy Nexus JB 4.2.1 上测试。您需要`ViewPagerCustomDuration`在 XML 中使用 a 而不是`ViewPager`，然后您可以这样做：

```
ViewPagerCustomDuration vp = (ViewPagerCustomDuration) findViewById(R.id.myPager);
vp.setScrollDurationFactor(2); // make the animation twice as slow 
```

**`ViewPagerCustomDuration.java`**：

```
import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.animation.Interpolator;

import java.lang.reflect.Field;

public class ViewPagerCustomDuration extends ViewPager {

    public ViewPagerCustomDuration(Context context) {
        super(context);
        postInitViewPager();
    }

    public ViewPagerCustomDuration(Context context, AttributeSet attrs) {
        super(context, attrs);
        postInitViewPager();
    }

    private ScrollerCustomDuration mScroller = null;

    /**
     * Override the Scroller instance with our own class so we can change the
     * duration
     */
    private void postInitViewPager() {
        try {
            Field scroller = ViewPager.class.getDeclaredField("mScroller");
            scroller.setAccessible(true);
            Field interpolator = ViewPager.class.getDeclaredField("sInterpolator");
            interpolator.setAccessible(true);

            mScroller = new ScrollerCustomDuration(getContext(),
                    (Interpolator) interpolator.get(null));
            scroller.set(this, mScroller);
        } catch (Exception e) {
        }
    }

    /**
     * Set the factor by which the duration will change
     */
    public void setScrollDurationFactor(double scrollFactor) {
        mScroller.setScrollDurationFactor(scrollFactor);
    }

} 
```

**`ScrollerCustomDuration.java`**：

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.view.animation.Interpolator;
import android.widget.Scroller;

public class ScrollerCustomDuration extends Scroller {

    private double mScrollFactor = 1;

    public ScrollerCustomDuration(Context context) {
        super(context);
    }

    public ScrollerCustomDuration(Context context, Interpolator interpolator) {
        super(context, interpolator);
    }

    @SuppressLint("NewApi")
    public ScrollerCustomDuration(Context context, Interpolator interpolator, boolean flywheel) {
        super(context, interpolator, flywheel);
    }

    /**
     * Set the factor by which the duration will change
     */
    public void setScrollDurationFactor(double scrollFactor) {
        mScrollFactor = scrollFactor;
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy, int duration) {
        super.startScroll(startX, startY, dx, dy, (int) (duration * mScrollFactor));
    }

} 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-06-22T09:49:36.063

根据[@df778899 的回答](https://stackoverflow.com/a/16355431/2923816)和 [Android ValueAnimator API](http://developer.android.com/reference/android/animation/ValueAnimator.html) ，我找到了更好的解决方案。它无需反射即可正常工作，并且非常灵活。也不需要制作自定义 ViewPager 并将其放入 android.support.v4.view 包中。这是一个例子：

```
private void animatePagerTransition(final boolean forward) {

    ValueAnimator animator = ValueAnimator.ofInt(0, viewPager.getWidth());
    animator.addListener(new Animator.AnimatorListener() {
        @Override
        public void onAnimationStart(Animator animation) {
        }

        @Override
        public void onAnimationEnd(Animator animation) {
            viewPager.endFakeDrag();
        }

        @Override
        public void onAnimationCancel(Animator animation) {
            viewPager.endFakeDrag();
        }

        @Override
        public void onAnimationRepeat(Animator animation) {
        }
    });

    animator.setInterpolator(new AccelerateInterpolator());
    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {

        private int oldDragPosition = 0;

        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            int dragPosition = (Integer) animation.getAnimatedValue();
            int dragOffset = dragPosition - oldDragPosition;
            oldDragPosition = dragPosition;
            viewPager.fakeDragBy(dragOffset * (forward ? -1 : 1));
        }
    });

    animator.setDuration(AppConstants.PAGER_TRANSITION_DURATION_MS);
    if (viewPager.beginFakeDrag()) {
        animator.start();
    }
} 
```

## 更新：

刚刚检查了此解决方案是否可用于一次滑动多个页面（例如，是否应在最后一页之后显示第一页）。这是处理指定页数的稍微修改的代码：

```
private int oldDragPosition = 0;

private void animatePagerTransition(final boolean forward, int pageCount) {
    // if previous animation have not finished we can get exception
    if (pagerAnimation != null) {
        pagerAnimation.cancel();
    }
    pagerAnimation = getPagerTransitionAnimation(forward, pageCount);
    if (viewPager.beginFakeDrag()) {    // checking that started drag correctly
        pagerAnimation.start();
    }
}

private Animator getPagerTransitionAnimation(final boolean forward, int pageCount) {
    ValueAnimator animator = ValueAnimator.ofInt(0, viewPager.getWidth() - 1);
    animator.addListener(new Animator.AnimatorListener() {
        @Override
        public void onAnimationStart(Animator animation) {
        }

        @Override
        public void onAnimationEnd(Animator animation) {
            viewPager.endFakeDrag();
        }

        @Override
        public void onAnimationCancel(Animator animation) {
            viewPager.endFakeDrag();
        }

        @Override
        public void onAnimationRepeat(Animator animation) {
            viewPager.endFakeDrag();
            oldDragPosition = 0;
            viewPager.beginFakeDrag();
        }
    });

    animator.setInterpolator(new AccelerateInterpolator());
    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {

        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            int dragPosition = (Integer) animation.getAnimatedValue();
            int dragOffset = dragPosition - oldDragPosition;
            oldDragPosition = dragPosition;
            viewPager.fakeDragBy(dragOffset * (forward ? -1 : 1));
        }
    });

    animator.setDuration(AppConstants.PAGER_TRANSITION_DURATION_MS / pageCount); // remove divider if you want to make each transition have the same speed as single page transition
    animator.setRepeatCount(pageCount);

    return animator;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-09T17:06:38.450

```
 public class PresentationViewPager extends ViewPager {

    public static final int DEFAULT_SCROLL_DURATION = 250;
    public static final int PRESENTATION_MODE_SCROLL_DURATION = 1000;

    public PresentationViewPager (Context context) {
        super(context);
    }

    public PresentationViewPager (Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setDurationScroll(int millis) {
        try {
            Class<?> viewpager = ViewPager.class;
            Field scroller = viewpager.getDeclaredField("mScroller");
            scroller.setAccessible(true);
            scroller.set(this, new OwnScroller(getContext(), millis));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public class OwnScroller extends Scroller {

        private int durationScrollMillis = 1;

        public OwnScroller(Context context, int durationScroll) {
            super(context, new DecelerateInterpolator());
            this.durationScrollMillis = durationScroll;
        }

        @Override
        public void startScroll(int startX, int startY, int dx, int dy, int duration) {
            super.startScroll(startX, startY, dx, dy, durationScrollMillis);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-26T14:52:22.857

更好的解决方案是通过在支持包中创建类来简单地访问私有字段。**编辑**这绑定到`MAX_SETTLE_DURATION`600ms，由`ViewPager`类设置。

```
package android.support.v4.view;

import android.content.Context;
import android.util.AttributeSet;

public class SlowViewPager extends ViewPager {

    // The speed of the scroll used by setCurrentItem()
    private static final int VELOCITY = 200;

    public SlowViewPager(Context context) {
        super(context);
    }

    public SlowViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    void setCurrentItemInternal(int item, boolean smoothScroll, boolean always) {
        setCurrentItemInternal(item, smoothScroll, always, VELOCITY);
    }

} 
```

当然，您可以添加一个自定义属性，以便可以通过 XML 进行设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-04T21:38:45.767

我使用 Cicero Moura 的版本制作了一个 Kotlin 类，它在 Android 10 中仍然可以完美运行。

```
import android.content.Context
import android.util.AttributeSet
import android.view.MotionEvent
import android.view.animation.DecelerateInterpolator
import android.widget.Scroller
import androidx.viewpager.widget.ViewPager

class CustomViewPager(context: Context, attrs: AttributeSet) :
        ViewPager(context, attrs) {

    private companion object {
        const val DEFAULT_SPEED = 1000
    }

    init {
        setScrollerSpeed(DEFAULT_SPEED)
    }

    var scrollDuration = DEFAULT_SPEED
        set(millis) {
            setScrollerSpeed(millis)
        }

    private fun setScrollerSpeed(millis: Int) {
        try {
            ViewPager::class.java.getDeclaredField("mScroller")
                    .apply {
                        isAccessible = true
                        set(this@CustomViewPager, OwnScroller(millis))
                    }

        } catch (e: Exception) {
            e.printStackTrace()
        }
    }

    inner class OwnScroller(private val durationScrollMillis: Int) : Scroller(context, AccelerateDecelerateInterpolator()) {
        override fun startScroll(startX: Int, startY: Int, dx: Int, dy: Int, duration: Int) {
            super.startScroll(startX, startY, dx, dy, durationScrollMillis)
        }
    }
} 
```

从活动类初始化：

```
viewPager.apply {
    scrollDuration = 2000
    adapter = pagerAdapter
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-12T13:19:04.760

这是我在[Librera Reader中使用的代码](https://play.google.com/store/apps/details?id=com.foobnix.pdf.reader)

```
public class MyViewPager extends ViewPager {

  public MyViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        initMyScroller();
    }

    private void initMyScroller() {
        try {
            Class<?> viewpager = ViewPager.class;
            Field scroller = viewpager.getDeclaredField("mScroller");
            scroller.setAccessible(true);
            scroller.set(this, new MyScroller(getContext())); // my liner scroller

            Field mFlingDistance = viewpager.getDeclaredField("mFlingDistance");
            mFlingDistance.setAccessible(true);
            mFlingDistance.set(this, Dips.DP_10);//10 dip

            Field mMinimumVelocity = viewpager.getDeclaredField("mMinimumVelocity");
            mMinimumVelocity.setAccessible(true);
            mMinimumVelocity.set(this, 0); //0 velocity

        } catch (Exception e) {
            LOG.e(e);
        }

    }

    public class MyScroller extends Scroller {
        public MyScroller(Context context) {
            super(context, new LinearInterpolator()); // my LinearInterpolator
        }

        @Override
        public void startScroll(int startX, int startY, int dx, int dy, int duration) {
            super.startScroll(startX, startY, dx, dy, 175);//175 duration
        }
    }

 } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-02-21T05:54:34.657

在浪费了我一整天之后，我找到了一个解决方案，将 offscreenPageLimit 设置为 total no。的页面。

为了保持恒定长度 ViewPager 滚动流畅，setOffScreenLimit(page.length) 将所有视图保留在内存中。但是，这对任何涉及调用 View.requestLayout 函数的动画（例如任何涉及更改边距或边界的动画）都会造成问题。这使它们变得非常慢（根据 Romain Guy 的说法），因为内存中的所有视图也将失效。所以我尝试了几种不同的方法来使事情变得顺利，但是覆盖 requestLayout 和其他无效方法会导致许多其他问题。

一个很好的折衷方案是动态修改离屏限制，这样页面之间的大部分滚动都将非常流畅，同时通过删除用户时的视图来确保所有页面内动画都流畅。当您只有 1 或 2 个视图必须使其他视图脱离内存时，这非常有效。

***当没有任何解决方案有效时使用此选项，因为通过设置偏移限制，您将同时加载所有片段

# ios - UIBarButtonItem 在 UIToolBar 和 UINavigationBar 中的显示方式不同

> ID：10812015
> 
> 赞同：1
> 
> 时间：2012-05-30T07:42:08.620
> 
> 标签：ios, xcode, uinavigationbar, uibarbuttonitem, uitoolbar

我需要在 UIToolBar 中使用一个简单的 UIBarButtonItem。

我使用此代码将带有自定义图像的按钮添加到导航栏：

```
UIBarButtonItem *cloneButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"image_sheep.png"] style:UIBarButtonItemStylePlain target:self action:@selector(clone)];
NSArray *rightItems = [NSArray arrayWithObject:cloneButton];
self.navigationItem.rightBarButtonItems = rightItems; 
```

结果是我想要的，它看起来像这样

[导航栏 http://img207.imageshack.us/img207/3383/navigationbara.jpg](http://img207.imageshack.us/img207/3383/navigationbara.jpg)

在我添加到 UITableViewCell 的 contentView 的 UIToolBar 中做同样的事情时

```
UIBarButtonItem *cloneButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"image_sheep.png"] style:UIBarButtonItemStylePlain target:self action:@selector(clone)];
UIBarButtonItem *leftSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
toolbar.items = [NSArray arrayWithObjects:leftSpace, cloneButton, nil]; 
```

问题是我得到这样的东西：

[工具栏 http://img209.imageshack.us/img209/1374/toolbary.jpg](http://img209.imageshack.us/img209/1374/toolbary.jpg)

这肯定是由于 UINavigationBar 和 UIToolBar 的绘制方式不同......有人可以指出如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:51:33.860

在您`UIToolbar`使用 **`UIBarButtonItemStyleBordered`**而不是**`UIBarButtonItemStylePlain`**.

`UINavigationBar`不会在没有按钮外观的情况下绘制相同的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:51:58.507

这就是 UIToolbar 应该如何工作的。根据文档：

> 表示项目正常和突出显示状态的工具栏图像派生自​​您使用从 UIBarItem 类继承的图像属性设置的图像。例如，将图像转换为白色，然后通过为正常状态添加阴影来进行斜切。

也就是说，您可以通过使用自定义视图而不是图像创建 UIBarButtonItem 来获得所需的结果。像这样：

```
UIImage *sheepImage = [UIImage imageNamed:@"image_sheep.png"];
UIButton *sheepButton = [UIButton buttonWithType:UIButtonTypeCustom];
[sheepButton setImage:sheepImage forState:UIControlStateNormal];
[sheepButton addTarget:self action:@selector(clone) forControlEvents:UIControlEventTouchUpInside];
[sheepButton setShowsTouchWhenHighlighted:YES];
[sheepButton sizeToFit];
UIBarButtonItem *cloneButton = [[UIBarButtonItem alloc] initWithCustomView:sheepButton]; 
```

我还没有测试过，所以我不知道它是否会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:59:34.190

我再也看不到问题中发布的图像了。但我很确定我们正在尝试在 UINavigationBar 中模仿 UIToolBar 的 UIBarButtonItemStylePlain。

除了这条线之外，Benzado 几乎是正确的：

```
[sheepButton setImage:sheepImage forState:UIControlStateNormal]; 
```

这会将图像放在触摸指示器的前面。UIToolBar 在图像前面显示触摸。所以要模仿 UINavigationBar 中的 UIToolBar 样式：

```
UIImage *sheepImage = [UIImage imageNamed:@"image_sheep.png"];
UIButton *sheepButton = [UIButton buttonWithType:UIButtonTypeCustom];
[sheepButton setBackgroundImage:sheepImage forState:UIControlStateNormal];
[sheepButton addTarget:self action:@selector(clone) forControlEvents:UIControlEventTouchUpInside];
[sheepButton setShowsTouchWhenHighlighted:YES];
[sheepButton sizeToFit];
UIBarButtonItem *cloneButton = [[UIBarButtonItem alloc] initWithCustomView:sheepButton]; 
```

# c++ - 正则表达式减法

> ID：10812016
> 
> 赞同：1
> 
> 时间：2012-05-30T07:42:09.177
> 
> 标签：c++, regex, bash, c++11, regex-negation

是否可以在 GNU sed、GNU awk、GNU grep 或 bash 的其他任何地方以某种方式使用正则表达式字符类减法？

C++11 支持吗？

哪里支持这个功能？除了这个之外，我找不到任何参考资料：http: [//msdn.microsoft.com/en-us/library/20bw873z.aspx](http://msdn.microsoft.com/en-us/library/20bw873z.aspx)（在底部）。

更具体地说：将除 2 和 5 之外的所有数字转换为星号的最佳方法是什么，例如

`sed -re 's/[0-9-[25]]/*/g'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:04:02.527

> 是否可以在 GNU sed、GNU awk、GNU grep 或 bash 的其他任何地方以某种方式使用正则表达式字符类减法？

不，不是那些工具/正则表达式实现。

大多数（流行）语言不支持这一点。Java 有一种方法可以做到这一点：（匹配除and之外的`[0-9&&[^25]]`任何（ASCII）数字），但我知道没有其他实现支持这一点。`'2'``'5'`

正如 Ignacio 已经建议的那样，要么使用负前瞻`(?![25])[0-9]`，要么用“艰难的方式”来做：`[1346-9]`

看：

*   [http://www.regular-expressions.info/refflavors.html](http://www.regular-expressions.info/refflavors.html)
*   [http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:50:28.343

这样做的方法是使用负前瞻，但并非所有正则表达式引擎都支持它们。

```
>>> re.match(r'(?![25])[0-9]', '2')
>>> re.match(r'(?![25])[0-9]', '3')
<_sre.SRE_Match object at 0x25108b8> 
```

# php - 如何在给定目录中搜 索以“xxx-”*.jpg 开头的图像？

> ID：10812017
> 
> 赞同：-1
> 
> 时间：2012-05-30T07:42:10.720
> 
> 标签：php

在我的产品页面上，我需要显示存储在 db 'image' 字段中的主图像，以及图像文件夹中以 prodid 开头的附加图像，后跟 -1、-2 等

例如：

```
id | name      | image 
1  | product 1 | 1.jpg and also images 1-1.jpg, 1-2.jpg etc
2  | product 2 | 2.jpg and also images 2-1.jpg, 2-2.jpg etc 
```

如何在给定目录中搜​​索以“prodid-”*.jpg 开头的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:43:22.133

您可以使用[`glob`](http://www.php.net/glob)：

```
glob($directory . '/' . $prodid . '-*.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:46:08.607

> 在我的产品页面上，我需要显示存储在 db 'image' 字段中的主图像，以及图像文件夹中以 prodid 开头的附加图像，后跟 -1、-2 等

要搜索包含以“1”开头的列的记录，您可以执行以下查询：

`SELECT id, name, image FROM yourtable WHERE image LIKE '1-%';`

# javascript - 无法访问 Backbone.Router

> ID：10812021
> 
> 赞同：1
> 
> 时间：2012-05-30T07:42:45.700
> 
> 标签：javascript, backbone.js

我正在使用backbone.js 构建一个单页站点。我正在使用 require.js 使代码模块化，但在为 url 初始化骨干路由器时遇到问题。我使用 require.js 加载主 js 文件，这是它的样子

```
enter code here
//App Namespace
var Chrono = Chrono || {};
//App Config Namespace
Chrono.Config = Chrono.Config || {};
//App Views Namespace
Chrono.Views = Chrono.Views || {};

//Config
Chrono.Config = {
    url:"http://localhost/chronotech/",
    site_url:"http://localhost/chronotech/index.php/",
    data_source:"http://localhost/chronotech/assets/datasource/"
};

require.config({
    paths : {
        'backbone': 'libs/backbone',
        'jquery':'libs/jquery.min',
        'underscore':'libs/underscore',
        'text':'libs/require/text'
    },
    baseUrl : 'assets/js'
});

require(
    ['require', 'underscore', 'backbone', 'jquery'],
    function(require,_, Backbone, $) {
        require(['app'],
            function(require) {
        } );
    } ); 
```

app.js 看起来像这样

```
define(['backbone','routers/workspace'],
    function( Backbone,Workspace) {
        $(function () {
            var space = new Workspace();
        } );
    } ); 
```

路由器文件看起来像这样

```
define(['jquery','backbone'],
    function($, Backbone) {

        var Workspace = Backbone.Router.extend( {
            routes: {
                "about":"aboutPage",
                "team":"teamPage",
                "contact":"contactPage",
                "work":"portfolioPage",
                "products":"productPage"
            },
            aboutPage : function() {
                alert("about");
            },

            teamPage : function() {
                alert("team");
            },

            contactPage: function() {
                alert("contact");
            },

            portfolioPage : function() {
                alert("work");
            },

            productPage : function() {

            }
        } );

        return Workspace;
    } ); 
```

当我加载页面时，我收到以下错误：“未捕获的 ReferenceError：$ 未定义”、“未捕获的 TypeError：无法读取属性 'Router' of null”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:48:58.943

```
define(['backbone','routers/workspace'],
    function( Backbone,Workspace) {
        $(function () {
            var space = new Workspace();
        } );
    } ); 
```

是单独的文件吗？也许你需要加载 jQuery 才能使用 $?

# authentication - 作为页面本身而不是用户发布到 Facebook 页面

> ID：10812022
> 
> 赞同：1
> 
> 时间：2012-05-30T07:42:50.570
> 
> 标签：authentication, facebook-graph-api

我需要作为页面发布到我的 FB 页面，而不是作为我自己。我看到了一些代码，但它们似乎已经过时了。如果您能提供一些帮助，那就太好了！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:52:15.527

要模拟页面，您的用户需要具有 manage_pages 权限。

然后使用[stream.publish](https://developers.facebook.com/docs/reference/rest/stream.publish/) - 下面的示例与 PHP-SDK。

```
stream_publish($message, $attachment = null, 
               $action_links = null, $target_id = null, 
               $uid = $YOUR_PAGE_UID_HERE) 
```

# mysql - MySQL ROUND() 计算不正确

> ID：10812028
> 
> 赞同：2
> 
> 时间：2012-05-30T07:43:14.817
> 
> 标签：mysql, sql, count

我遇到了 MySQL`ROUND()`函数的问题。这里是：

当我这样做时：

```
SELECT ROUND(7/2) as avg FROM bla blah 
```

平均为 4

当我这样做时：

```
 SELECT ROUND(SUM(marks)/COUNT(marks)) as avg 
```

avg 是 3 注意：`SUM(marks)`它自己给出 7 并`COUNT(marks)`给出 2 据我所知 `ROUND(SUM(marks)/COUNT(marks))`应该等于`ROUND(7/2)`

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:52:08.373

显然 MySQL 解释`7/2`为`7.0/2.0`并使用浮点数而不是整数进行计算，给出结果`3.5`而不是`3`.

当您使用`sum`结果的数据类型与字段相同时，您将使用整数进行计算，即`7/2`给出结果`3`。

`double`在进行计算之前将值转换为：

```
SELECT ROUND(cast(SUM(marks) as double)/cast(COUNT(marks) as double)) as avg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:46:52.787

MySql 数学运算创建**浮点**结果。

当使用浮点数时，7/2 可以表示为 3.4999999999999。四舍五入产生 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:56:40.073

你可以使用`CEILING`（`ROUND`除了它总是四舍五入到更大的最接近的整数）

```
SELECT CEILING(SUM(marks)/COUNT(marks)) as avg 
```

*应该为问题中指定的要求*产生您想要的结果。

# java - Web应用需要打开socket并支持一些协议

> ID：10812036
> 
> 赞同：0
> 
> 时间：2012-05-30T07:43:45.277
> 
> 标签：java, multithreading, tomcat, web-applications, spring-mvc

请帮助我为我的任务选择正确（稳定和安全）的方法。我有使用`Spring MVC`on实现的 Web 应用程序`Apache Tomcat`。

为了提供一些服务，我需要通过网络连接到外部应用程序。另外，我必须用这个软件支持特定的网络协议。

在这种情况下，我的网络应用程序是客户端，外部应用程序是服务器。而且，外部应用程序可以在很多情况下运行，所以我的网络应用程序必须打开很多套接字。

每个连接都应该被异步支持，所以似乎我应该为每个连接创建一个线程。

我以为我可以`ContextListener`为 Spring 的调度程序 servlet 创建一个并实现生命周期事件：init 和 destroy。所以在这里我可以在初始化阶段创建并启动我的奇异服务，并在销毁阶段关闭它。

我意识到我的解决方案可能不够准确。可能是我应该使用`TaskExecuter`或其他东西。我很想知道你会给我什么建议。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:00:49.390

由于您已经在使用 Spring MVC，因此简单地使用 Spring 的[生命周期回调](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-factory-lifecycle)来进行初始化和清理可能会更容易。

您可以为每个外部对等点创建一个单例服务 bean（或多个具有不同配置设置的对等点，如果它们相同的话）并将它们用作标准 Spring 管理的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:04:39.567

你为什么要为它提供服务？您的 Web 应用程序（客户端）可以简单地使用抽象控制器从外部应用程序调用/请求数据，并在浏览器上显示任何给定事件的响应......

请更具体地说明您要做什么

# javascript - ExCanvas 在 IE7 和 IE8 IFrame 中不起作用

> ID：10812039
> 
> 赞同：2
> 
> 时间：2012-05-30T07:44:07.170
> 
> 标签：javascript, canvas, html5-canvas, excanvas, polyfills

我正在使用 IFrame 作为 IE7 和 IE8 的弹出窗口，但无法让 ExCanvas 在其上工作。当我在开发人员工具上检查它时，我能够看到我的画布标签中的更改，但无法看到渲染效果。而我在一个简单的网页上尝试过 ExCanvas 并且它在那里工作。但是在 iFrame 的情况下只是剂量？你能解释一下为什么会这样吗？还有其他解决方案吗？和其他可以使用的 polyfill 一样吗？

# php - SQL 触发器@@ROWCOUNT

> ID：10812041
> 
> 赞同：0
> 
> 时间：2012-05-30T07:44:07.213
> 
> 标签：php, mysql, sql, triggers

我应该为更新创建一个 sql 触发器，它只会在受影响的行大于 0 时激活。然而，即使受影响的行是 0（或新记录与旧记录相同），它仍然会触发触发器。在执行下面的插入查询之前，我想检查受影响的行数。提前致谢！对不起我的语法！

```
DELIMITER $$

DROP TRIGGER /*!50032 IF EXISTS */ `dbase`.`table_update_trigger`$$

CREATE
    /*!50017 DEFINER = 'root'@'localhost' */
    TRIGGER `table_update_trigger` AFTER UPDATE ON `table` 
    FOR EACH ROW BEGIN

IF (@@ROWCOUNT > 0) THEN
INSERT INTO 
    table_audit_trail
    (column1,
    column2,
    column3,
    column4,
    column5,
    column100) 
VALUES
    (old.column1,
    old.column2,
    old.column3,
    old.column4,
    old.column5,
    old.column100);
END IF;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:53:44.787

MySQL中没有`@@ROWCOUNT`。您可以阅读[这篇文章](https://stackoverflow.com/questions/2229218/what-is-mysql-version-of-rowcount)以了解如何替换它。

但你不需要那个。您的触发器是`for each row`这样的，它会为每个更新的行触发。（但这并不意味着您的行已更改。只是它们已被某些语句更新。）

# javascript - 通过 jquery 中的 $.ajax 提交表单后获取成功信息

> ID：10812048
> 
> 赞同：3
> 
> 时间：2012-05-30T07:44:26.707
> 
> 标签：javascript, jquery, ajax

我的单页上有一些表格，我通过这种方法提交它们：

```
$(function() {  
    $(".button").click(function() {  

var upform = $(this).closest('.upform'); 

    var txt = $(this).prev(".tekst").val();  

    var dataString = 'tekst='+ txtr;

    $.ajax({  
          type: "POST",  
          url: "http://url-to-submit.com/upload/baza",  
          data: dataString,  
          success: function() {  

            upform.html("<div class='message'></div>");  

            $('.message').html("<h2>FORM SUBMITTED</h2>")  
            .append("<p>THANKS!!</p>")  
            .hide()  
            .fadeIn(1500, function() {  
            $('.message').append("<img src='http://my-images.com/i/check.png' />");  
            });  

          }  
        });  
    return false; 

    });  
  }); 
```

如您所见，提交表单后，显示的是消息 div 而不是提交的表单。

它完美地工作，当我只提交一个表单时 - 然后它会更改为我的消息 div，但是当我提交第二个，下一个和下一个时 - 每次我所有已经提交的表单的消息都会刷新。看起来很糟糕。我只想对实际提交的表单进行操作。如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:45:52.870

好吧，您正在`.message`使用 . 设置每个 div的消息`$('.message').html()`。试试这个：

```
upform.find('.message').html(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:47:55.407

很难说不看你的 HTML 看起来如何，但我猜是这一点，

```
$('.message') 
```

应该是这样的，

```
$('.message', upForm). 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:51:15.397

首先，您必须找出**消息 div** ( **upform.find('.message')** )，然后向其中添加任何 html。我认为你的代码应该是

```
$(function() {  
    $(".button").click(function() {  

var upform = $(this).closest('.upform'); 

    var txt = $(this).prev(".tekst").val();  

    var dataString = 'tekst='+ txtr;

    $.ajax({  
          type: "POST",  
          url: "http://url-to-submit.com/upload/baza",  
          data: dataString,  
          success: function() {  

            upform.html("<div class='message'></div>");  

            upform.find('.message').html("<h2>FORM SUBMITTED</h2>")  
            .append("<p>THANKS!!</p>")  
            .hide()  
            .fadeIn(1500, function() {  
            upform.find('.message').append("<img src='http://my-images.com/i/check.png' />");  
            });  

          }  
        });  
    return false; 

    });  
  }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T07:59:45.507

另一种无需在当前代码中进行更多编辑的方法只需添加几行即可。

```
var msgbox = $("<div class='message'></div>");
upform.html(msgbox);
msgbox.html("<h2>FORM SUBMITTED</h2>")  
.append("<p>THANKS!!</p>")  
.hide()  
.fadeIn(1500, function() {  
  $(this).append("<img src='http://my-images.com/i/check.png' />");  
}); 
```

# javascript - 在 UIWebView 中的 Objective-c 中注入 JQuery 函数

> ID：10812050
> 
> 赞同：0
> 
> 时间：2012-05-30T07:44:30.813
> 
> 标签：javascript, jquery, objective-c, xcode, uiwebview

**我在 jquery 中有这个函数在我的 Target 中保存为 doc2.js，我在我的包资源中有如下副本：**

**doc2.js：**

```
 $(document).ready(function(){
  $(".flip").click(function(){
  $(".panel").slideToggle("slow");
     });
       }); 
```

**在我的 Xcode 中，我有以下内容：**

```
 UIWebView * webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"new" ofType:@"html"]isDirectory:NO]]];
 webView.delegate=self;
 [self.view addSubview:webView]; 
```

**这个方法：**

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {
 NSString *jqueryCDN = @"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js";
 NSData *jquery = [NSData dataWithContentsOfURL:[NSURL URLWithString:jqueryCDN]];
 NSString *jqueryString = [[NSMutableString alloc] initWithData:jquery encoding:NSUTF8StringEncoding];
 [webView stringByEvaluatingJavaScriptFromString:jqueryString];
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"doc2" ofType:@"js" inDirectory:NO];
 NSData *fileData = [NSData dataWithContentsOfFile:filePath];
 NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
 [webView stringByEvaluatingJavaScriptFromString:jsString];} 
```

**在我的 html 文件中：**

```
<!DOCTYPE html>
 <html>
    <head>        
         <script type="text/javascript" src="jquery.js"></script>
         <style type="text/css"> 
             div.panel,p.flip
            {
                 margin:0px;
                 padding:5px;
                 text-align:center;
                 background:#e5eecc;
                 border:solid 1px #c3c3c3;
             }
             div.panel
             {
                 height:120px;
                 display:none;
             }
             </style>
     </head>
     <body>    
         <div class="panel">
            <p>Any Thing.</p>
            <p>Any Thing.</p>
         </div>        
         <p class="flip">Show/Hide Panel</p>
            </body>
 </html> 
```

**这段代码应该处理 UIWebView 但它不适用于我我认为我的 jQuery 函数没有完成或类似的任何想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:29:36.727

您可能想尝试不同的方法：包括本地副本或从 cdn 下载 jquery。两者都做似乎没有必要。

此外：只需在您的 doc2.js 中定义一个 javascript 函数，在 HTML 中包含该文件并在 Cocoa 中直接调用它。确保你将你的函数暴露给 Cocoa

```
isSelectorExcludedFromWebScript 
```

调用是可能的

```
evaluateWebScript 
```

# java - 忽略重音符号的 Java 字符串搜索 - 第二部分

> ID：10812051
> 
> 赞同：3
> 
> 时间：2012-05-30T07:44:36.030
> 
> 标签：java, unicode

这个问题是[Java 字符串搜索忽略重音](https://stackoverflow.com/questions/2397804/java-string-searching-ignoring-accents)的延续。

原始问题的答案向我们展示了如何从字符串中删除变音符号。因此，例如，**köln**变为**koln**。但是**łódź**变成**了 łodz** - 注意[l 与 stroke](http://en.wikipedia.org/wiki/%C5%81)。

我的问题是我怎样才能删除中风，以便**łódź**变成**lodz**？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:48:44.657

你不能，至少对于所有这些字母来说都不是微不足道的。这封信`ł`（除了外观和它的 Unicode 名称）根本没有链接`l`（至少在 Unicode 中；从语言上讲，这是另一回事）。

您唯一的选择可能是您的用例的转换表，您可以填写您需要转换的所有字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:57:37.300

正如 tchrist 建议的那样，我尝试使用 ICU (V 50.1)：它也不认为它是从 L 派生的。带笔划的 L 似乎是 Unicode 中的一个特例。看看[http://bugs.mysql.com/bug.php?id=11369](http://bugs.mysql.com/bug.php?id=11369) 他们说在 Unicode 4.0 中它没有连接到 L，而在 Unicode 4.1 中它是。我想知道是否有人用基于 Unicode4.1 的 Java 库测试了这个问题。

# c++ - 二进制数据 JSONCPP

> ID：10812053
> 
> 赞同：0
> 
> 时间：2012-05-30T07:44:42.583
> 
> 标签：c++, json, visual-c++, jsoncpp

我正在尝试将 JSON cpp 与 VS2008 一起使用。

谁能告诉我是否可以将二进制数据打包成 JSON 格式？我正在将图像文件读`char* buffer`入`JSON::Value`. 但是当我尝试解析它时，我在 JSON 对象中找不到缓冲区内容。

代码如下。

```
 Json::Value root;
    Json::Reader reader;
    Json::StyledWriter writer;
    int length;
    char * buffer;
    ifstream is;
    is.open ("D:\\test.j2k", ios::binary);

    // get length of file:
    is.seekg (0, ios::end);
    length = is.tellg();
    is.seekg (0, ios::beg);

    // allocate memory:
    buffer = new char [length];

    // read data as a block:
    is.read (buffer,length);
    root["sample"] = *buffer;
    writer.write(root);  
    cout << root;
    const string rootAsString  = root.toStyledString();
    cout << rootAsString << endl; 
```

由于我是 VC++ 新手，我不确定将图像文件读取到 char * 缓冲区是否正确/错误。请让我知道代码有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:47:01.543

您必须对其进行编码，因为 JSON 是 javascript 结构格式的子集，因为它出现在 javascript 源代码中。

JSON 中最常用的二进制数据编码是 Base64。我使用它（在 C++ 以外的其他语言中）对图像进行编码而没有问题。如果您将其设置为图像的 src，您只需在编码图像前加上`data:image/png;base64,`（假设它是 png）以使其在 javascript 中自动解码。

编辑：与任何其他语言一样，C++ 中的 base64 编码很容易。这是一个库：[https ://github.com/ReneNyffenegger/development_misc/tree/master/base64](https://github.com/ReneNyffenegger/development_misc/tree/master/base64)

# android - android布局设计问题

> ID：10812059
> 
> 赞同：0
> 
> 时间：2012-05-30T07:45:40.993
> 
> 标签：android, android-layout

我正在尝试设计一个页面，我面临**三个问题。**

第**一个问题**是设计如下图 ![在此处输入图像描述](../Images/49047b5cf51eaa65a9aa23e6b2555156.png)

此处，顶部的汉堡图像（来自 url）必须具有相等的边距空间以及放置在其上的圆形图像，并在其上随机更改文本。下面是灰色背景的确定和取消按钮，中间有一个红色图标。红色图标的一小部分必须放在上面的图像上，下面有 2 个编辑文本和文本视图

第二**个问题**是我的应用程序栏中有一个按钮，单击它时必须清除汉堡图像视图，我必须在其中显示地图。在这种情况下，红色图标必须保留在地图上一小部分的位置。

我不确定 imageView 的高度和宽度，但必须在图像的位置准确替换地图

第三**个问题**是我想设计这个没有滚动视图的页面，视图必须在屏幕内，因为如果我们要使用框架布局，它不接受滚动视图内

到目前为止，我已经尝试了以下

```
<LinearLayout
             android:id="@+id/rrds_layout"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_margin="5dp"
             android:background="@color/burgerimg" >
                <RelativeLayout
                    android:id="@+id/rrds_round_points"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/rounded_bg" >
                    <TextView
                        android:id="@+id/textView1"
                        android:layout_centerInParent="true"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Free"
                        android:textColor="#000000"
                        android:textAppearance="?android:attr/textAppearanceMedium" />
                </RelativeLayout>
        </LinearLayout> 
```

我不知道如何在图像上添加一点红色图标和按钮

如何设计这个页面......

正如[Vikram Bodicherla](https://stackoverflow.com/users/619699/vikram-bodicherla)解释的那样，我设计如下

```
<FrameLayout>
     <ViewSwitcher>
          <TextView></TextView>
          <MapView></MapView>
     </ViewSwitcher>

       <RelativeLayout
             android:id="@+id/rrds_merge_layout2"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="bottom">

              <ImageView
                    android:contentDescription="@string/app_name"
                    android:id="@+id/merge_bg_img"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/title_bg" 
                    android:layout_centerInParent="true"/>

              <TextView
                    android:id="@+id/merge_view_pro_txt"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="OK"
                    android:layout_centerInParent="true"
                    android:clickable="true"
                    android:textAppearance="?android:attr/textAppearanceMedium" 
                    android:layout_toLeftOf="@+id/merge_center_img"
                    android:layout_centerVertical="true"/>

              <ImageView
                    android:contentDescription="@string/app_name"
                    android:id="@+id/merge_center_img"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:background="@drawable/red_icon" />

               <TextView
                    android:id="@+id/merge_view_cash_txt"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:clickable="true"
                    android:text="@string/mrg_cash"
                    android:textAppearance="?android:attr/textAppearanceMedium" 
                    android:layout_toRightOf="@+id/merge_center_img"
                    android:layout_centerVertical="true"/>
         </RelativeLayout>
</FrameLayout> 
```

但是同样的问题依然存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:54:46.117

分别设计顶部和底部。

在顶部，有一个在 MapView 和 ImageView 之间交换的 FrameLayout/ViewSwitcher。至于圆形图像，创建一个中间有一个白色圆形的图像，其他一切都是透明的。将此设置为 TextView 的背景并编写您的文本。

第二部分的设计将相当简单。

如果您需要特定问题的代码，请告诉我。

# xpages - 在 Xpage 上动态添加自定义控件

> ID：10812060
> 
> 赞同：1
> 
> 时间：2012-05-30T07:45:42.713
> 
> 标签：xpages

如何在 sessionScope 变量的基础上添加自定义控件。我尝试包含页面容器控件但没有运气：

```
<xp:this.afterPageLoad><![CDATA[#{javascript:sessionScope.put("viewName","ccViewAll.xsp");}]]></xp:this.afterPageLoad>
<xp:text escape="true" id="computedField1">
    <xp:this.value><![CDATA[#{javascript:sessionScope.get("viewName")}]]></xp:this.value>
</xp:text>
<xc:appLayout>
    <xp:this.facets>
        <xp:panel xp:key="facetMiddle">
            <xp:include id="include1">
                <xp:this.pageName><![CDATA[${javascript:sessionScope.get("viewName")}]]>
                </xp:this.pageName>
            </xp:include>
        </xp:panel>
    </xp:this.facets>
</xc:appLayout> 
```

上面的代码给了我错误 Error 404 HTTP Web Server: Item Not Found Exception。但是当我硬编码 ccViewAll.xsp 而不是 sessionScope.get("viewName") 的视图名称时，它工作正常。

-麦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:02:15.067

如果您有 XPage 的 ExtLib，则可以使用动态内容控件或 switchFacet 控件。Teamroom 模板（ExtLib 附带的演示应用程序）在“allDocuments”Xpage 或“allDocsAllTab”自定义控件中使用这些，这些都是很好的示例。

如果您没有 ExtLib，您可以使用自定义控件的加载/渲染属性来决定加载哪个。

例如

```
<xp:panel key="MiddleColumn">
   <xc:customControl1 loaded="${javascript: if(viewScope.control == "customControl1")}"></xc:customControl1>
   <xc:customControl2 loaded="${javascript: if(viewScope.control == "customControl2")}"></xc:customControl2>
</xp:panel> 
```

loaded = false 表示不会对此控件执行任何操作。render = false 表示控件将被创建但隐藏，您可以稍后更改它以显示它。

如果它会改变，例如当一个按钮在启动时被点击并加载并且在用户登录时不会改变，则使用渲染。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:12:52.047

如果您使用它根据其他选择在 domino 数据库中显示不同的视图，我建议您查看扩展库的“动态视图面板”控件。

使用此控件意味着您无需为要使用的每个视图创建不同的自定义控件，只需使用此控件的单个页面并将其指向正确的视图以通过范围变量显示。

如果您需要自定义每个视图的显示方式，您可以创建一个 viewControl bean 来根据它所显示的视图设置其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:51:57.590

值得一提的是，如果您不使用 ExtLib - 如果您使用的是部分刷新，那么您必须使用渲染属性，因为加载的属性只能在 pageLoad 上计算。

据我了解，这意味着每个自定义控件都将由服务器计算，这可能不是您想要的。（一方面增加了开销。）

/J

# java - Java相当于php死

> ID：10812061
> 
> 赞同：16
> 
> 时间：2012-05-30T07:45:50.433
> 
> 标签：java, php, jakarta-ee

我已经做了一些研究，以了解 java 中是否存在与 PHP die 等价的东西

有时我在做小测试，我真的想在特定行停止我的代码，并且 return 不会停止像 php 中的“死”这样的代码

java中是否有等效的模具？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-30T07:47:58.843

用于`System.exit(0);`退出java代码。

请注意，这将停止当前正在运行的 JVM 实例。

如果您想退出某个方法，请使用 return 或 throw 异常来展示错误情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T07:50:03.110

尝试：

```
System.out.println(message);
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T11:29:00.853

```
<% if(true)return; %>  ok 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:50:28.227

**免责声明**：我对 Java 不是很熟悉，我对它有基本的工作知识，但没有做过大量的工作。

我想你可以只 throw() 一个异常而不捕获它，这应该会停止执行。当然，如果您有一个异常处理程序来处理本地未捕获的异常，您可能会遇到问题。

大多数 IDE 允许您在执行将停止的位置设置断点，并且您将能够检查变量的状态、查看调用堆栈等。Eclipse 和 Netbeans 都支持这一点。这可能是一个更好的选择。

编辑：还有 System.exit() 将停止执行。我仍然认为断点是一个更好的选择。

# java - 格子运算和构建格子

> ID：10812066
> 
> 赞同：1
> 
> 时间：2012-05-30T07:46:17.703
> 
> 标签：java, algorithm, data-structures, finite-automata

是否有任何用于点阵操作的 java 包或算法？比如合并两个格子，向格子中插入一个元素，为格子画图。

我有一些正则语言{L1,L2,L3......,Ln}，我想为这些对象构建一个点阵图，我已经在java中实现了一些正则语言的操作，例如等价和包含，但是我找不到任何关于构建格子和绘制格子图的 java 包。

（严格来说，我找到了一个名为 LaMa4J 的包[http://vigna.dsi.unimi.it/LaMa4J/](http://vigna.dsi.unimi.it/LaMa4J/)，但对于这个项目似乎没用）

另外，我读了一些关于格理论的书，但我可以找到任何关于构建格、插入操作、合并操作等的算法或 puesudo 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:30:04.720

为什么 LaMa4j “没用”？

Sphinx 语音识别项目有一个 lattice 包 (http://cmusphinx.sourceforge.net/)

Ralph Freese 发布了一个 java lattice 渲染器：http: [//www.math.hawaii.edu/~ralph/LatDraw/](http://www.math.hawaii.edu/~ralph/LatDraw/)

# hibernate - 命名查询中的错误（QuerySyntaxException：意外令牌）

> ID：10812073
> 
> 赞同：1
> 
> 时间：2012-05-30T07:46:53.537
> 
> 标签：hibernate, named

我目前正在开发一个实用程序项目，该项目将帮助我管理应用程序的用户（用户具有一个或多个角色，一个角色具有一个或多个权限）。我是 Hibernate 新手，不知道为什么会遇到以下问题：

```
ERROR [hibernate.internal.SessionFactoryImpl] HHH000177: Error in named query: right.findAllByRoleId
org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: right near line 1, column 8 [select right from com.google.code.jee.utils.user.management.model.Role as r left join r.rights as right where r.id = :roleId]
    at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    at org.hibernate.hql.internal.ast.ErrorCounter.throwQueryException(ErrorCounter.java:79)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:276)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:106)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:81)
    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:167)
    at org.hibernate.internal.SessionFactoryImpl.checkNamedQueries(SessionFactoryImpl.java:1130)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:523)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:189)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:350)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:335)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at Demo.main(Demo.java:9) 
```

正确的类：

```
@Entity
@Table(name = "RIG_RIGHT")
@NamedQueries({
    @NamedQuery(name = RightDao.COUNT_BY_NAME, query = "select count(*) from Right as rig where rig.name = :name"),
    @NamedQuery(name = RightDao.FIND_BY_NAME, query = "from Right as rig where rig.name = :name"),
    @NamedQuery(name = RightDao.COUNT_FOR_ROLE_ID, query = "select count(*) from Role as r where r.id = :id"),
    @NamedQuery(name = RightDao.FIND_ALL_BY_ROLE_ID, query = "select right from Role as r left join r.rights as right where r.id = :roleId"),
    @NamedQuery(name = RightDao.COUNT_FOR_ROLE_ID_AND_NAME, query = "select count(*) from Role as r left join r.rights as right where r.id = :roleId and right.name = :rightName"),
    @NamedQuery(name = RightDao.FIND_BY_ROLE_ID_AND_NAME, query = "select right from Role as r left join r.rights as right where r.id = :roleId and right.name = :rightName") })
@SuppressWarnings("serial")
public class Right extends AbstractHibernateDto<Integer> {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "RIG_ID", nullable = false)
    private Integer id;

    @Column(name = "RIG_NAME", nullable = false, unique = true, length = 50)
    private String name;

       // Getters & Setters 
```

角色类：

```
@Entity
@Table(name = "ROL_ROLE")
@NamedQueries({
    @NamedQuery(name = RoleDao.COUNT_BY_NAME, query = "select count(*) from Role as r where r.name = :name"),
    @NamedQuery(name = RoleDao.FIND_BY_NAME, query = "from Role as r where r.name = :name"),
    @NamedQuery(name = RoleDao.COUNT_FOR_USER_ID, query = "select count(*) from User as u where u.id = :id"),
    @NamedQuery(name = RoleDao.FIND_ALL_BY_USER_ID, query = "select role from User as u left join u.roles as role where u.id = :userId"),
    @NamedQuery(name = RoleDao.COUNT_FOR_USER_ID_AND_NAME, query = "select count(*) from User as u left join u.roles as role where u.id = :userId and role.name = :roleName"),
    @NamedQuery(name = RoleDao.FIND_BY_USER_ID_AND_NAME, query = "select role from User as u left join u.roles as role where u.id = :userId and role.name = :roleName") })
@SuppressWarnings("serial")
public class Role extends AbstractHibernateDto<Integer> {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ROL_ID", nullable = false)
    private Integer id;

    @Column(name = "ROL_NAME", nullable = false, unique = true, length = 50)
    private String name;

    @OneToMany(cascade = { CascadeType.ALL }, fetch = FetchType.LAZY)
    @JoinColumn(name = "RIG_ROLE_ID", nullable = false)
    private List<Right> rights;

    // Getters & Setters 
```

右道：

```
public interface RightDao extends GenericDao<Integer, Right> {

    public final String COUNT_BY_NAME = "right.countByName";
    public final String FIND_BY_NAME = "right.findByName";
    public final String COUNT_FOR_ROLE_ID = "right.countForRoleId";
    public final String FIND_ALL_BY_ROLE_ID = "right.findAllByRoleId";
    public final String COUNT_FOR_ROLE_ID_AND_NAME = "right.countForRoleIdAndName";
    public final String FIND_BY_ROLE_ID_AND_NAME = "right.findByRoleIdAndName";

    /**
     * Search the number of elements with the 'name' parameter.
     * 
     * @param name the name
     * @return the number of element found
     */
    public Integer countByName(String name);

    /**
     * Search an element by its name.
     * 
     * @param name the name
     * @return the right
     */
    public Right findByName(String name);

    /**
     * Count the number of rights of a specific role
     * 
     * @param roleId the role id
     * @return the number of rights
     */
    public Integer countForRoleId(Integer roleId);

    /**
     * Finds all rights by roleId.
     * 
     * @param roleId the role primary key
     * @return the list
     */
    public List<Right> findAllByRoleId(Integer roleId);

    /**
     * Count the number of rights with a specific name and corresponding to
     * a specific role
     * 
     * @param roleId the roleId
     * @param rightName the right name
     * @return the number of rights
     */
    public Integer countForRoleIdAndName(Integer roleId, String rightName);

    /**
     * Finds the right.
     * 
     * @param roleId the role primary key
     * @param rightName the right name
     * @return the right
     */
    public Right findByRoleIdAndName(Integer roleId, String rightName);

} 
```

角色 DAO：

```
public interface RoleDao extends GenericDao<Integer, Role> {

    public final String COUNT_BY_NAME = "role.countByName";
    public final String FIND_BY_NAME = "role.findByName";
    public final String COUNT_FOR_USER_ID = "role.countForUserId";
    public final String FIND_ALL_BY_USER_ID = "role.findAllByUserId";
    public final String COUNT_FOR_USER_ID_AND_NAME = "role.countForUserIdAndName";
    public final String FIND_BY_USER_ID_AND_NAME = "role.findByUserIdAndName";

    /**
     * Search the number of elements with the 'name' parameter.
     * 
     * @param name the name
     * @return the number of element found
     */
    public Integer countByName(String name);

    /**
     * Search an element by its name.
     * 
     * @param name the name
     * @return the user
     */
    public Role findByName(String name);

    /**
     * Count the number of roles of a specific user
     * 
     * @param userId the user id
     * @return the number of roles
     */
    public Integer countForUserId(Integer userId);

    /**
     * Finds all roles by user id.
     * 
     * @param userId the user primary key
     * @return the list
     */
    public List<Role> findAllByUserId(Integer userId);

    /**
     * Count the number of roles with a specific name and corresponding to
     * a specific user
     * 
     * @param userId the userId
     * @param roleName the role name
     * @return the number of roles
     */
    public Integer countForUserIdAndName(Integer userId, String roleName);

    /**
     * Finds the role.
     * 
     * @param userId the user primary key
     * @param roleName the role name
     * @return the role
     */
    public Role findByUserIdAndName(Integer userId, String roleName);

} 
```

任何的想法 ？先感谢您 ！
朱利安·纽哈特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:58:52.060

似乎错误的根源是在您的一个命名查询（ ，）`right`中用作变量名。是 HQL 中的保留字 ( )`RightDao.FIND_ALL_BY_ROLE_ID``RightDao.FIND_BY_ROLE_ID_AND_NAME``right``right outer join`

任何一个：

1.  使用不同的别名`right`：

    > `@NamedQuery(name = RightDao.FIND_ALL_BY_ROLE_ID, query = "select r from Role as role left join role.rights as r where role.id = :roleId"), @NamedQuery(name = RightDao.FIND_BY_ROLE_ID_AND_NAME, query = "select r from Role as role left join role.rights as r where role.id = :roleId and r.name = :rightName") })`

2.  Escape the reserved word `right` in the query by surrounding it with square brackets `[right]`, or backticks. Also, you might fins the following related question useful: [How to escape reserved words in Hibernate's HQL](https://stackoverflow.com/q/5686412/851811).

# android - GPS 搜索时间过长

> ID：10812074
> 
> 赞同：1
> 
> 时间：2012-05-30T07:46:56.190
> 
> 标签：android, gps, gps-time

我有一个使用 GPS 的应用程序。

我的问题是，当我到达 GPS 正在寻找信号但找不到信号的部分时，它只会继续搜索。这会杀死电池。

我用这个：

```
this.locationManager.requestLocationUpdates(this.provider, 0,
                                            0, pendingIntent); 
```

但它只设置刷新率。如果 GPS 未锁定，则它会继续尝试。

我希望它在尝试锁定几分钟后停止。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:01:38.583

如果您不想经常检查新位置，则必须指定最短时间和最短距离。结构是这样的：

```
 public void requestLocationUpdates (String provider, long minTime, float minDistance, PendingIntent intent) 
```

有关更多信息，请查看此链接：http: [//developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.app.PendingIntent%29](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.app.PendingIntent%29)

编辑：对不起，我不明白你的问题。检查此链接，您要做的就是设置超时。希望这有帮助。 [GPS信号采集如何超时](https://stackoverflow.com/questions/5725338/how-to-time-out-gps-signal-acquisition)

# c# - 如何读取“”之间的文本文件

> ID：10812075
> 
> 赞同：1
> 
> 时间：2012-05-30T07:46:57.313
> 
> 标签：c#, file, text, io

我需要一个关于如何在引号之间读取文本文件数据的“想法”。例如：

```
line 1: "read a title"

line 2: "read a descr"

line 1: "read a title"

line 2: "read a descr" 
```

我想做一个 foreach 类型的事情，我想读取所有第 1 行和第 2 行作为一对，但在 ".

在我的程序中，我将输出（当然是 foreach）：

```
readTerminatedNull(file1);

readTerminatedNull(file2); 
```

我会逐行阅读，但有些文本可能是：

```
line 1: "read a super long
title that goes off"
line 2: "read a descr" 
```

所以这就是为什么我想在“.

对不起，如果这太复杂了，而且有点难以解释。

编辑：感谢所有反馈的家伙，但我不确定你是否得到了我想要做的事情：p 不是你的错，我写的这个有点奇怪。

我将有一个充满参考和文本的文本文件。像这样。

里面的文字：

```
Refren: "myrefrence_1"
String: "This is a string of a refrence"
Refren: "myrefrence_2"
String: "hello world"
Refren: "myrefrence_3"
String: "I like cookies." 
```

我希望它在第一行的引号中读取 myrefrence_1，然后在 ".

然后，我将填充到我的程序中，将引用与字符串匹配。

但有时文本会超过一行。

```
Refren: "this is text that goes and then
return keys on some parts." 
```

我仍然希望它通读“。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:54:02.720

（未经测试，但你会明白的）

```
// Read all text from file
string sData = File.ReadAllText(@"c:/file.txt");

// Match strings between " "
Match match = Regex.Match(sData , "\"(\w|\d|\s|\\\")*\"",
                          RegexOptions.IgnoreCase);

// Read results and strip " out of them
foreach (var sResult in match) {
    sResult = sResult.Remove(0,1).Remove(sResult.length-2, 1);
    // Do whatever with sResult
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:52:38.467

[您可以通过查看状态机](http://en.wikipedia.org/wiki/Finite-state_machine)来学习一些新技巧。基本上：一次阅读每个字符，并弄清楚你现在处于什么状态。首先，将其编码为一个包含大语句的大`while`循环。`switch`然后，阅读[状态模式](http://en.wikipedia.org/wiki/State_pattern)，了解如何以面向对象的方式执行此操作。然后，放弃它并使用`delegate`s，因为 c# 使这些东西变得如此容易。

然后，把它全部废弃，用多行标志写一些蹩脚的[正则表达式，然后用](http://en.wikipedia.org/wiki/Regular_expression)[Perl](http://www.perl.org/)的方式把它弄脏。思考为什么这与您的原始状态机解决方案相同。

然后，真正投入并了解[解析器生成器](http://en.wikipedia.org/wiki/Compiler-compiler)（[lexx](http://en.wikipedia.org/wiki/Lex_programming_tool) / [yacc](http://en.wikipedia.org/wiki/Yacc)或一些[.NET 变体](https://stackoverflow.com/questions/540593/lex-yacc-for-c)）并为您的问题编写一个简单的[BNF](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)语法。请特别注意教程中使用的琐碎语法比您需要编写的语法要复杂得多。为什么呢？看看[诺姆乔姆斯基](http://en.wikipedia.org/wiki/Chomsky_hierarchy)对此有何评论。

最终，你会筋疲力尽。大家都这样做。但是你会很有趣地挖掘是什么让编程成为这个星球上最酷的活动。倦怠只是意识到这是一个白日梦;）

说完就往外走。认识人。讲话。多微笑。友善点。你现在是一个带着邪恶笑容的[禅宗开发者。](http://www.python.org/dev/peps/pep-0020/)耶！你摇滚！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:52:41.643

要读取文件的所有行，您可以使用：

```
File.ReadAllLines(pathToFile); 
```

要从“”中删除文本，您可以使用字符串的子字符串方法：http: [//msdn.microsoft.com/en-us/library/aka44szs.aspx](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

你可以这样做：

```
string strippedString = original.Substring(1, original.length -2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:55:01.323

试试这个

```
var text = File.ReadAllLines(pathToFile);
var lines = text.Split(':')
                .Where((s,i) => i % 2 != 0)
                .Select(s => s.trim('"')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T07:55:21.073

首先，您需要使用以下命令读取文件：

File.ReadAllLines(filePath);

然后您可以使用[string.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)函数拆分所有行。

在右括号上拆分将是您最好的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T08:03:36.843

您所描述的内容听起来像是一个单列 CSV 文件。访问它的最简单方法可能是使用`Microsoft.VisualBasic.FileIO.TextFieldParser`该类，例如：

```
using (var csvParser = new TextFieldParser(new StringReader(content))
                             {
                                 Delimiters = new[] {","},
                                 HasFieldsEnclosedInQuotes = true
                             })
{
    while (!csvParser.EndOfData)
    {
        var fields = csvParser.ReadFields();
        Console.Print(fields[0]); //do something with the first (in your case only) field found.
    }
} 
```

确定这种方法是否有意义的最简单方法可能是考虑如果您正在阅读的字符串实际上包含双引号会发生什么。它最终会成为`"He said ""this is quoted"", but I wasn't listening"`（加倍引号），还是这种情况是不可能的？

如果引号会以这种方式加倍，那么像这个内置框架这样的标准 CSV 阅读器可能是你最好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T08:13:06.630

正如我从你那里了解到的那样，你想用一些特定的设置来读写文本文件。是吗 ？

我想参考 INI 文件，它们是它自己的文本文件，并提供您希望实现的设置配置。这里有一些链接可以帮助你。

[http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C](http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C)

[http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/](http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/)

# php - Drupal 重音字符导致 db_insert 错误

> ID：10812076
> 
> 赞同：1
> 
> 时间：2012-05-30T07:47:00.537
> 
> 标签：php, drupal, character-encoding, drupal-7

尝试此插入查询时：

```
//insert into database
$contact_id = db_insert('contact')
    ->fields(array(
        'date_created' => date("Y-m-d H:i:s"),
        'date_updated' => date("Y-m-d H:i:s"),
        'list_id' => $form_state['values']['list_id'],
        'first_name' => $fn,
        'last_name' => $ln,
        'gender' => $g,
        'email' => $ea,
        'company_name' => $cn,
        'is_active' => 1,
    ))
    ->execute(); 
```

一切正常，所有数据加载正常，但是当公司名称带有重音时，会导致错误“网站遇到意外错误”。并且日志只是在那条特定的行上说“错误”。删除带有重音的行可以解决问题，但我需要能够添加该重音。如果我在 Drupal 方式之外建立数据库连接（只是 mysql_query("INSERT INTO...")），它工作正常。

公司名称如：Johns Industriële Company

数据库是utf8，表和字段是utf8

希望有人能解开这个谜团！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:55:21.400

这可能是输入中的编码问题。如果`$cn ="Johns Industriële Company";`存储在例如[ISO-8859-1](http://sv.wikipedia.org/wiki/ISO/IEC_8859-1)中，则序列`ële`（在这种情况下应该是字节序列）将表示数据库应该拒绝`eb 6c 66`的无效[UTF-8序列。](http://en.wikipedia.org/wiki/UTF-8#Description)

尝试检查提交数据的编码和字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T05:02:39.410

表和字段格式应为 UTF-8 格式。

```
db_insert('table_name')
          ->fields(array(
             'column_name' => utf8_encode('insert_value'),
           ))->execute();
    } 
```

插入值，如“克莱门特”。utf8_encode() 函数将帮助您插入上升字符。

# iphone - 如何执行 mapkit 搜索以搜索本地以外的地址或公司名称？

> ID：10812083
> 
> 赞同：0
> 
> 时间：2012-05-30T07:47:29.407
> 
> 标签：iphone, ios, google-maps, mapkit

我想使用地址或公司名称/类型来搜索地图，并使用丢弃的图钉显示结果。经过大量研究，我找到了 Google Places API。按照他们的[指示](https://developers.google.com/maps/documentation/places/#PlaceSearches)，我可以建立一个 URL，让我可以在本地搜索东西。

我遇到的问题是当我想搜索该区域之外的东西时。以下是一些参数。

必需参数（不是完整列表）

*   location= *longitude,latitude* - 检索地点信息的纬度/经度。这必须指定为纬度、经度。
*   radius - 定义返回 Place 结果的距离（以米为单位）。最大允许半径为 50,000 米。

可选参数（不是完整列表）

*   用于指定搜索词的关键字

考虑到 50,000 米的半径限制，如果我在该区域外搜索某物，如何获得结果？

谢谢。

# android - 在 Eclipse 中“设置构建路径”期间发生内部错误

> ID：10812090
> 
> 赞同：2
> 
> 时间：2012-05-30T07:47:59.843
> 
> 标签：android, eclipse, svn

再会。我有使用 android-support-v4.jar lib 的 android SDK 项目。我有这个项目的 SVN。我在 Ubuntu 和 Mac Os Eclipse 上编写代码。所以这个库的路径对于 Mac os 和 Ubuntu 是不同的。在 Ubuntu 上一切正常，但是当我在 Mac 上从 SVN 签出项目并尝试在 Java 构建路径中更改此库的路径时，它总是给我一个错误：在“设置构建路径”期间发生内部错误。我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:17:17.303

使用 Eclipse 的工具“添加支持库”。右键单击您的项目，它应该位于菜单的下部，可能在“Android 工具”中。

这将在您的构建路径中包含 .jar 并且（希望）将在类路径中设置一个相对路径，以便它不依赖于机器。

我建议删除您事先放置在项目中的 android-support-v4.jar，只是为了让 Eclipse 更简单。

# java - JPA 使用 @JOINTABLE 和额外的 @JOINCOLUMNs

> ID：10812092
> 
> 赞同：2
> 
> 时间：2012-05-30T07:48:22.823
> 
> 标签：java, jpa, join, jointable

我正在使用 JPA 从现有的 ERP 系统中提取数据。我正在使用（现有的）可连接的某些数据。问题是我还应该匹配不在连接表上的列，而是在源表本身上。

```
T1 (source)
- F1*
- F2
- F3
- ..

T2 (join)
- F4
- F5

T3 (source)
- F6*
- F7
- F8
- .. 
```

我当前的连接表条件是这样的：

```
@ManyToOne(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
@JoinTable(name="T2", schema=Util.schema, joinColumns = {   
        @JoinColumn(name="F4", referencedColumnName="F2", unique=false),
        @JoinColumn(name="F5", referencedColumnName="F3", unique=false)
    },
    inverseJoinColumns = {
        @JoinColumn(name="F4", referencedColumnName="F7", unique=false),
        @JoinColumn(name="F5", referencedColumnName="F8", unique=false)
    }
} 
```

这可行，但是如何/在哪里添加条件 T1.F1 = T3.F6？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:42:08.490

JPA 不直接允许这样做。如果您使用的是 EclipseLink，您可以使用 DescriptorCustomizer 将其他条件添加到您的映射连接。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria](http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria)

另一种选择是仅使用过滤集合的 get 方法过滤 Java 中的对象。

# css - 是否有仅限 Google Chrome 的 CSS hack？

> ID：10812093
> 
> 赞同：30
> 
> 时间：2012-05-30T07:48:26.650
> 
> 标签：css, google-chrome

是否有仅限 Google Chrome 的 CSS hack？许多以前适用于 Chrome 的现有黑客现在正在被其他浏览器拾取（使用）。我需要一款针对 Google Chrome 的浏览器，但不针对 Mozilla Firefox、Safari 或 Microsoft Edge 等其他浏览器。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-30T07:51:06.593

当然是：

```
@media screen and (-webkit-min-device-pixel-ratio:0)
{ 
    #element { properties:value; } 
} 
```

还有一点点小提琴可以看到它的实际效果 - [http://jsfiddle.net/Hey7J/](http://jsfiddle.net/Hey7J/)

必须补充一下...这通常是不好的做法，您不应该真的处于开始需要单独的浏览器黑客来使您的 CSS 工作的地步。尝试在项目开始时使用[重置样式表](http://meyerweb.com/eric/tools/css/reset/)，以帮助避免这种情况。

此外，这些黑客可能不会成为未来的证据。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-07-15T03:22:10.993

尝试使用新的“@supports”功能，这是您可能喜欢的一个好技巧：

*** 更新！！！*** Microsoft Edge 和 Safari 9 都在 2015 年秋季添加了对 @supports 功能的支持，Firefox 也添加了 - 所以这是我为您准备的更新版本：

```
/* Chrome 29+ (Only) */

@supports (-webkit-appearance:none) and (not (overflow:-webkit-marquee))
and (not (-ms-ime-align:auto)) and (not (-moz-appearance:none)) { 
   .selector { color:red; } 
} 
```

更多关于这里的信息（相反...... Safari 但不是 Chrome）：[[是否有针对 safari 的 CSS hack，而不是 chrome？](https://stackoverflow.com/questions/16348489/is-there-a-css-hack-for-safari-only-not-chrome/25975282#25975282)]

之前的 CSS Hack [在 Edge 和 Safari 9 或更新的 Firefox 版本之前]：

```
/* Chrome 28+ (now also Microsoft Edge, Firefox, and Safari 9+) */

@supports (-webkit-appearance:none) { .selector { color:red; } } 
```

这适用于（仅）chrome，版本 28 及更高版本。

（上面的 chrome 28+ hack 不是我的创作之一。我在网上找到了这个，因为它非常好，我最近将它发送到 BrowserHacks.com，还有其他人来了。）

2014 年 8 月 17 日更新：正如我所提到的，我一直在努力开发更多版本的 chrome（以及许多其他浏览器），这是我制作的一个处理 chrome 35 和更新版本的版本。

```
/* Chrome 35+ */

_::content, _:future, .selector:not(*:root) { color:red; } 
```

在下面的评论中，@BoltClock 提到了未来、过去、不......等等......我们实际上可以使用它们在 Chrome 历史上走得更远一些。

因此，这也是一种有效但不是“仅限 Chrome”的方法，这就是我没有把它放在这里的原因。您仍然必须通过仅限 Safari 的 hack 将其分开才能完成该过程。我已经创建了 css hacks 来做到这一点，但不用担心。以下是其中一些，从最简单的开始：

```
/* Chrome 26+, Safari 6.1+ */

_:past, .selector:not(*:root) { color:red; } 
```

或者相反，这个可以追溯到 Chrome 22 和更新版本，但 Safari 也是如此......

```
/* Chrome 22+, Safari 6.1+ */

@media screen and (-webkit-min-device-pixel-ratio:0)
and (min-resolution:.001dpcm),
screen and(-webkit-min-device-pixel-ratio:0)
{
    .selector { color:red; } 
} 
```

Chrome 版本 22-28 块（更复杂但效果很好）也可以通过我制定的组合来定位：

```
/* Chrome 22-28 (Only!) */

@media screen and(-webkit-min-device-pixel-ratio:0)
{
    .selector  {-chrome-:only(;

       color:red; 

    );}
} 
```

现在跟进我还创建了针对 Safari 6.1+（仅）的下一对，以便仍然将 Chrome 和 Safari 分开。*更新为包括 Safari 8*

```
/* Safari 6.1-7.0 */

@media screen and (-webkit-min-device-pixel-ratio:0) and (min-color-index:0)
{
    .selector {(;  color:blue;  );} 
}

/* Safari 7.1+ */

_::-webkit-full-page-media, _:future, :root .selector { color:blue; } 
```

因此，如果您将其中一个 Chrome+Safari hacks 放在上面，然后按顺序将 Safari 6.1-7 和 8 hacks 放在您的样式中，您将拥有红色的 Chrome 项目和蓝色的 Safari 项目。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-11T15:12:31.780

只有 Chrome CSS hack：

```
@media all and (-webkit-min-device-pixel-ratio:0) and (min-resolution: .001dpcm) {
    #selector {
        background: red;
    }
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-09-25T15:24:01.417

要仅使用 chrome 或 safari，请尝试：

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
/* Safari and Chrome */
.myClass {
 color:red;
}

/* Safari only override */
::i-block-chrome,.myClass {
 color:blue;
}} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-15T13:18:07.753

你可以使用javascript。迄今为止的其他答案似乎也针对 Safari。

```
if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {
    alert("You'll only see this in Chrome");
    $('#someID').css('background-position', '10px 20px');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T07:21:39.437

我发现这仅适用于 Chrome（它是红色的）而不是 Safari 和所有其他浏览器（它是绿色的）......

```
.style {
color: green;
(-bracket-:hack;
    color: red;
);
} 
```

来自[http://mynthon.net/howto/webdev/css-hacks-for-google-chrome.htm](http://mynthon.net/howto/webdev/css-hacks-for-google-chrome.htm)

# c++ - ONVIF 身份验证错误？

> ID：10812098
> 
> 赞同：0
> 
> 时间：2012-05-30T07:49:01.863
> 
> 标签：c++, c, xml, soap, onvif

我正在用 C 编写一个 API，用于使用 ONVIF 对用户进行身份验证。我编写了一些代码来制作身份验证标头。但是当我发送这些标头时，服务器会响应“无法验证或授权安全令牌”

```
unsigned int nonce_int = 0, i = 0;
  time_t utcTime = 0;
  struct tm *timeInfo = NULL;
  char sha1_input[100] = { 0 };
  SHA1Context sha = { 0 };

  nonce_int = GetRandomNumber();
  encode_base64(sizeof(nonce_int), (char*)&nonce_int, nonceLen, noncestr);

  utcTime = time(NULL);
  timeInfo = localtime(&utcTime);
  strftime(timestr, timeLen, "%Y-%m-%dT%H:%M:%SZ", timeInfo);
  printf("\nTime in String Format = %s", timestr);

  sprintf(sha1_input, "%d+%d+%s", nonce_int, utcTime, password);

  SHA1Reset(&sha);
  SHA1Input(&sha, (const unsigned char*)sha1_input, strlen(sha1_input));

  if(!SHA1Result(&sha))
  {
    printf("\nERROR-- could not compute message digest");
  }
  else
  {
    memset(sha1_input, 0x00, sizeof(sha1_input));
    /*sprintf(sha1_input, "%X%X%X%X%X", sha.Message_Digest[0], sha.Message_Digest[1],
      sha.Message_Digest[2], sha.Message_Digest[3], sha.Message_Digest[4]);*/

    sprintf(sha1_input, "%u%u%u%u%u", sha.Message_Digest[0], sha.Message_Digest[1],
      sha.Message_Digest[2], sha.Message_Digest[3], sha.Message_Digest[4]);

    printf("\nSHA1 Digest = %s", sha1_input);
    encode_base64(strlen(sha1_input), sha1_input, digestLen, digeststr);
    printf("\nSHA1 Digest Base64 Encoded = %s", digeststr);
  } 
```

之后，我使用 POST 方法在 HTTP 上发送了这个请求。

回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope  xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" 
                    xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" 
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                    xmlns:wsa5="http://www.w3.org/2005/08/addressing" 
                    xmlns:c14n="http://www.w3.org/2001/10/xml-exc-c14n#" 
                    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
                    xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns:ptzimg2="http://www.onvif.org/ver10/schema" 
                    xmlns:ptzimg3="http://www.w3.org/2005/05/xmlmime" 
                    xmlns:ptzimg4="http://docs.oasis-open.org/wsn/b-2" 
                    xmlns:ptzimg5="http://docs.oasis-open.org/wsrf/bf-2" 
                    xmlns:ptzimg6="http://docs.oasis-open.org/wsn/t-1" 
                    xmlns:ptzimg1="http://www.onvif.org/ver20/ptz/wsdl" 
                    xmlns:ptzimg7="http://www.onvif.org/ver20/imaging/wsdl" 
                    xmlns:ter="http://www.onvif.org/ver10/error">

    <SOAP-ENV:Header></SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <SOAP-ENV:Fault>
            <SOAP-ENV:Code>
                <SOAP-ENV:Value>
                    SOAP-ENV:Sender
                </SOAP-ENV:Value>
                <SOAP-ENV:Subcode>
                    <SOAP-ENV:Value>
                        wsse:FailedAuthentication
                    </SOAP-ENV:Value>
                </SOAP-ENV:Subcode>
            </SOAP-ENV:Code>
            <SOAP-ENV:Reason>
                <SOAP-ENV:Text xml:lang="en">
                    The security token could not be authenticated or authorized
                </SOAP-ENV:Text>
            </SOAP-ENV:Reason>
            <SOAP-ENV:Node>
                http://www.w3.org/2003/05/soap-envelope/node/ultimateReceiver
            </SOAP-ENV:Node>
            <SOAP-ENV:Role>
                http://www.w3.org/2003/05/soap-envelope/role/ultimateReceiver
            </SOAP-ENV:Role>
            <SOAP-ENV:Detail></SOAP-ENV:Detail>
        </SOAP-ENV:Fault>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我同步了时间。我认为问题出在我的身份验证标头上。我没有找到任何有用的文档来指定摘要和其他标头的确切数据类型和创建方法。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:18:43.450

我假设您使用的是[ONVIF Core Specification](http://www.onvif.org/specs/core/ONVIF-Core-Specification-v220.pdf)。看起来它指定了[HTTP Digest Authentication](http://www.ietf.org/rfc/rfc2617.txt)的使用，这是 HTTP 级别的标准身份验证方式。您可能可以在某处找到一些 C/C++ 版本来检查您的逻辑。

我建议的另一件事是使用 Wireshark。这将准确地告诉您 HTTP 和 SOAP 级别发生了什么。例如，如果它无法弄清楚您的摘要响应，那么很明显问题出在您的处理上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:16:19.873

我解决了这个问题。我使用的是本地时间字符串而不是 utc 时间字符串。这解决了我的问题。谢谢

# java - Spring、CXF、java.lang.Class 不能强制转换为 [Ljava.lang.Class;

> ID：10812099
> 
> 赞同：0
> 
> 时间：2012-05-30T07:49:06.673
> 
> 标签：java, spring, cxf

我收到以下错误并且无法理解它的问题：

> 在类路径资源 [xx/yy//zz.xml] 中定义名称为“someJobBean”的 bean 创建错误：bean 实例化失败；嵌套异常是 org.springframework.beans.factory.BeanDefinitionStoreException: 工厂方法 [public java.lang.Object org.apache.cxf.jaxws.JaxWsProxyFactoryBean.create()] 抛出异常；嵌套异常是 java.lang.ClassCastException: java.lang.Class 不能转换为 [Ljava.lang.Class;

欢迎任何有用的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:00:20.840

我们现在所知道的是，它在期望 Class[] 的地方得到了一个 Class。我们会通过一些代码了解更多信息。

# java - App Engine Java JDO 中的单元测试 XG 跨组事务

> ID：10812100
> 
> 赞同：6
> 
> 时间：2012-05-30T07:49:16.147
> 
> 标签：java, unit-testing, google-app-engine, transactions, jdo

我在应用引擎 java jdo 中有一个跨组事务。

它在本地开发应用引擎服务器上运行良好。

但是，从单元测试中，我得到了一个`java.lang.IllegalArgumentException: transactions on multiple entity groups only allowed in High Replication applications`.

是否可以使用 LocalServiceTestHelper 模拟高复制应用程序？

我正在使用 1.6.6。

这是我的课程，您可以按原样运行它来重现：

```
public class Ds2Test {

    private final LocalServiceTestHelper helper =
            new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());

    private static final PersistenceManagerFactory pmfXgInstance =
            JDOHelper.getPersistenceManagerFactory("xg-transactions");

        @Before
        public void setUp() {
            helper.setUp();
        }

        @After
        public void tearDown() {
            helper.tearDown();
        }

        @Test
        public void testXgTransaction() throws Exception {
            PersistenceManager xgPm = pmfXgInstance.getPersistenceManager();
            Transaction xgTx = xgPm.currentTransaction();
            xgTx.begin();

            xgTx.commit();
            xgPm.close();
        }
} 
```

这是 jdoconfig.xml 中的配置：

```
 <persistence-manager-factory name="xg-transactions">
       <property name="javax.jdo.PersistenceManagerFactoryClass"
           value="org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory"/>
       <property name="javax.jdo.option.ConnectionURL" value="appengine"/>
       <property name="javax.jdo.option.NontransactionalRead" value="true"/>
       <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
       <property name="javax.jdo.option.RetainValues" value="true"/>
       <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
       <property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true"/>
   </persistence-manager-factory> 
```

抛出异常`xgTx.begin();`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T07:55:51.387

行。我找到了需要做的事情。

```
private final LocalServiceTestHelper helper =
            new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig()**.setDefaultHighRepJobPolicyUnappliedJobPercentage(100))**; 
```

如上所示：[https ://developers.google.com/appengine/docs/java/tools/localunittesting#Writing_HRD_Datastore_Tests](https://developers.google.com/appengine/docs/java/tools/localunittesting#Writing_HRD_Datastore_Tests)

一个有点晦涩的设置，但它就在那里。

# mysql - MySQL - 最佳索引和最有效的选择语句

> ID：10812105
> 
> 赞同：0
> 
> 时间：2012-05-30T07:49:47.970
> 
> 标签：mysql, indexing, mysql-5.1

我有一个 MySQL 表。它有两列。第一个是唯一标识符 (INT)，第二个是字符串 (VARCHAR)。大约有 170 万条记录。目前，我正在做的唯一搜索是：

```
select name from artist_name where name like '$q%'" 
```

我的问题是放在这张表上的最佳索引是什么，如果有的话，我怎样才能提高 SQL 语句的效率？在某个时候，我将介绍第二个表，它将加入第一列，但我会在稍后解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:14:44.090

最好在第二列 ( ) 上放置索引，`artist_name`以便使用`like`子句的搜索查询可以更快地工作，这将是最佳做法。毫无疑问，您可以在唯一标识符上添加唯一索引，如果它不存在的话。

此外，您可以考虑将索引作为部分索引，指定要搜索的艺术家姓名的长度。

查看[这篇文章](http://ronaldbradford.com/blog/understanding-different-mysql-index-implementations-2009-07-22/)以获取有关 MySql 中索引类型的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:42:28.053

## SphinxSearch - 全文搜索

做这个，

1.  在mysql提示符下执行此查询并记录执行时间，

    从艺术家名称中选择名称，其中名称如“$q%””；

2.  **安装狮身人面像搜索。**

3.  现在执行如下相同的查询，

    从艺术家名称中选择名称 WHERE MATCH('$q');

*您将看到执行时间显着减少。*

**我在上面给出了高层次的知识。**

1.  要安装 sphinx 搜索和索引您当前的表列非常容易，是的，有一系列步骤要遵循，但一旦完成，您会很幸运。
2.  我在我的应用程序中使用 sphinxsearch，“停用词”、“wordforms”、“wordstemming”等功能让你感觉很好。

**其他可用选项：**

*1\. mysql全文搜索：它也很不错，如果你不是在寻找自定义任何东西，你可以通过做一个来使用mysql全文，*

```
ALTER TABLE artist_name ADD FULLTEXT(name);

SELECT * 
FROM artist_name
WHERE MATCH(name) 
AGAINST ($q); 
```

如果您需要有关如何安装 sphinx 搜索的任何帮助，我会在那里。

**下次在你的 sql 查询中遵循正确的约定，这是 STACKOVERFLOW，而不是 FACEBOOK。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T08:02:55.443

使用***B 树索引***

检查[这个](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

# prolog - 在Prolog中找到图中两个节点之间的最短路径

> ID：10812108
> 
> 赞同：5
> 
> 时间：2012-05-30T07:50:06.013
> 
> 标签：prolog, graph-theory, shortest-path

我想在 Prolog 中找到两个节点之间的最短路径。我想出了如何找到两个节点之间的所有路径，但不幸的是，下面的代码陷入了循环：

```
arc(a,b).
arc(b,a).
arc(b,c).
arc(c,b).
arc(c,d).
arc(d,c).

path(X,Y,[arc(X,Y)]) :-
   arc(X,Y).
path(X,Y,[arc(X,Z)|P]) :-
   arc(X,Z),
   path(Z,Y,P). 
```

代码运行如下：

```
?- path(a,c,R).
R = [arc(a, b), arc(b, c)] ;
R = [arc(a, b), arc(b, a), arc(a, b), arc(b, c)] ;
R = [arc(a, b), arc(b, a), arc(a, b), arc(b, a), arc(a, b), arc(b, c)] 
.... 
```

所以，我的问题是：如何在不无限循环的情况下获得所有路径？

在一天结束时，我会得到列表的长度并找到最小值。

如果可能，请提供 ISO Prolog 的解决方案。

注意：这是更新的代码，我仍然有问题。显然，成员谓词在检查事实而不是原子时不起作用。

```
xxx([]).

path(X,Y,[arc(X,Y)]) :-
   arc(X,Y).
path(X,Y,[arc(X,Z)|P]) :- 
        arc(X,Z)
        ,xxx(L)
        ,member(arc(X,Z),L)->
            !;
            (member(arc(Z,X),L)->
                !;
                (append(L,[arc(X,Z)],R),retract(xxx(_)),assert(xxx(R)),path(Z,Y,P))). 
```

我的成员谓词是：

```
member(X,[X|T]).
member(X,[H|T])  :-  member(X,T). 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-19T10:29:06.107

我们将[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`path/4`](https://stackoverflow.com/questions/30328433/definition-of-a-path-trail-walk)与您给出的定义结合使用`arc/2`：

```
?- path(arc,Path,From,To).
  From = To        , Path = [To] 
; From = a,  To = b, Path = [a,b]
; From = a,  To = c, Path = [a,b,c]
; From = a,  To = d, Path = [a,b,c,d]
; From = b,  To = a, Path = [b,a]
; From = b,  To = c, Path = [b,c]
; From = b,  To = d, Path = [b,c,d]
; From = c,  To = b, Path = [c,b]
; From = c,  To = a, Path = [c,b,a]
; From = c,  To = d, Path = [c,d]
; From = d,  To = c, Path = [d,c]
; From = d,  To = b, Path = [d,c,b]
; From = d,  To = a, Path = [d,c,b,a]
; false. 
```

的定义`path/4`排除了所有循环。

为了获得*最短*路径，我们*需要查看所有解决方案*！

为了证明这实际上是这样，让我们​​扩展您的定义，`arc/2`如下所示：

```
arc(a,b).
arc(b,a).
arc(b,c).
arc(a,c).               % (new)
arc(b,d).               % (new)
arc(c,b).
arc(c,d).
arc(d,c). 
```

假设我们想要“获取所有最短路径 from `a`to `d`”，所以我们查询：

```
?- path(arc,Path,a,d).
  Path = [a,b,c,d]
; Path = [a,b,d]        % shortest path #1
; Path = [a,c,b,d]
; Path = [a,c,d]        % shortest path #2
; false. 
```

在上面的查询中，从到有*两条不同的最短路径*。`a``d`

要同时获得两者，我们必须查看所有路径——或者使用更智能的[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题")（留作作业）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:55:18.107

当您只需要一种解决方案时，您可以查看剪切运算符“！”。

为避免陷入无限循环，您可能应该使用存储已访问节点的累加器列表。

# cygwin - 在没有 crontab 的 cywin 中调度脚本

> ID：10812110
> 
> 赞同：0
> 
> 时间：2012-05-30T07:50:18.827
> 
> 标签：cygwin

我必须在 cygwin 中安排脚本，但由于管理权限，我没有 crontab，我也无法安装它。我该怎么做请帮忙。

问候， 斯瓦鲁普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:07:47.177

使用本机 Windows 任务计划程序功能通常是最好的... [http://windows.microsoft.com/en-us/windows7/Schedule-a-task](http://windows.microsoft.com/en-us/windows7/Schedule-a-task)

编辑：删除了关于`at`. 忘了它需要配置cron。

# ruby-on-rails - 编辑现有 Rails 迁移是个好主意吗？

> ID：10812111
> 
> 赞同：7
> 
> 时间：2012-05-30T07:50:19.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-migrations

在开始一个新项目时，模型中有很多变化，我发现编辑现有迁移并运行`db:clean`或`db:reset`创建新迁移更容易。当应用程序尚未投入生产时，我会这样做，这意味着我可以毫无顾虑地重置/清理数据库并且我正在单独工作或作为一个小团队的一部分工作。

但是今天，我在[Rails Guide](http://guides.rubyonrails.org/migrations.html)中看到了以下建议，说这不是一个好主意，并且不鼓励编辑现有的迁移：

> 编辑现有迁移不是一个好主意：如果现有版本的迁移已经在生产机器上运行，您将为自己和您的同事创建额外的工作，并且会引起严重的麻烦。相反，您应该编写一个新的迁移来执行您需要的更改。编辑尚未提交到源代码控制（或更一般地说，尚未传播到您的开发机器之外）的新生成的迁移相对无害。

我想知道：

*   我会遇到什么潜在的陷阱？
*   这些陷阱是否适用于我的案例（开发阶段，单独工作）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T07:59:36.390

如果您正在与团队合作并且您提交了迁移，那么 NO。

如果它仅在您的本地环境中，那么只需创建一个新的迁移来修复您需要的内容。您可以删除表\列并执行您需要的操作。

由于您清理了数据库并重置了它，那么每个人都会做同样的事情，否则如果他们尝试迁移就会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T22:50:18.397

我正在开发模式下的网络应用程序。虽然我一个人工作，但最好使用迁移来修改数据库。它可能会留下修改痕迹，但您可以看到数据库结构的演变。从长远来看，您将更快地解决迁移的数据库问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T06:06:41.390

数据库迁移是一种工具。像任何工具箱一样，最重要的是了解它的用途、如何使用它以及为什么要这样使用它。

*   实时站点：在实时站点中，您不能简单地使用 rake:db reset，因为显然您需要所有这些数据
*   协作：您需要与其他开发人员保持迁移的一致性。如果他们已经将数据输入到他们的数据库中（无论出于何种目的）并简单地混合在您的代码中会怎样。您现在已经完全放弃了他们的努力，他们将被迫重置他们的整个数据库
*   Rake db:rollback ：一旦你修改了你必须重置的代码，现在你不能运行回滚。
*   这是一个坏习惯：在大多数情况下，这样做的礼貌方式是创建一个新的迁移。最好养成能够快速有效地创建新迁移的习惯和心态。

我实际上并不是在告诉你不要这样做。这些只是为什么不按照我的看法去做的要点。在大多数情况下，如果您一个人，或者特别是如果您刚刚形成您的项目（并且可能不会立即意识到您希望数据库如何查看/直接使用它们可能是最有效的。了解原因很重要因此，在您反对最佳实践之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-19T06:24:46.673

一旦你提交了迁移到 git，只要它不是数据破坏或 CI 崩溃的事情，你不应该改变它。这对整个概念来说是不言自明的！

问题是，一旦应用了迁移，它就不会再次运行，如果你不得不重新开始，你就会冒着意外丢失数据的风险。您应该始终只创建一个新的迁移。

有一个例外，也是一个棘手的例外，与删除依赖项有关。在有限情况下 ORM 涉及第三方的迁移所面临的问题之一是依赖关系是非此即彼的。它们要么存在，要么不存在。因此，如果在某个时刻添加了一个依赖项，然后从模型创建外部引用，并将其存储在迁移中，然后删除该依赖项，当您从头开始运行迁移时，链接到的依赖项迁移将失败，因为外键的目标不再存在。这是一个很大的问题，因为在这种情况下，您实际上需要编辑旧迁移以删除外键，但您还需要对现有安装进行迁移以删除密钥。这里的一般模式是，如果您的迁移系统是可编写脚本的，请检查该密钥是否存在，然后仅在那时删除该密钥，否则，跳过删除。顺便提一下，try {} except {} 类型结构在这里可能是错误的选择，因为一些 ORM 会在引发任何类型的异常以避免损坏时回滚排队写入的事务。

So generally, no please dont edit existing migrations, but if its in those limited situations where externalities dictate a requirement, proceed with very delicate care.

# actionscript-3 - 将数组添加到数据网格时出错

> ID：10812113
> 
> 赞同：0
> 
> 时间：2012-05-30T07:50:21.930
> 
> 标签：actionscript-3

您好，我的项目中有一个数据网格，但出现以下错误：

```
warning: unable to bind to property 'name' on class 'Array' (class is not an IEventDispatcher) 
```

这是我分配数据的地方：

```
var myarr:Array = [];
packageData = packageData=SharedObject.getLocal("local_data");
for (var packageId:String in packageData.data.packages) {
    myarr.push(packageData.data.packages[packageId])
}

cur_uploads = new ArrayCollection(myarr);
dg_uploads.dataProvider = cur_uploads; 
```

我读过我应该使用 a`proxyObject`但我无法将 my 转换`Array`为`Object`. 那么有没有其他解决方案来摆脱错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:09:53.783

这是我所做的：

```
 var arrayCollection:ArrayCollection = new ArrayCollection();
   packageData = SharedObject.getLocal("local_data");

   for (var packageId:String in packageData.data.packages) {
       arrayCollection.addItem(new ObjectProxy(
            packageData.data.packages[packageId]
       ));
   }

   dg_uploads.dataProvider = arrayCollection; 
```

# iphone - 为 uiview 转换设置 SwipeGestureRecognizer

> ID：10812116
> 
> 赞同：1
> 
> 时间：2012-05-30T07:50:31.423
> 
> 标签：iphone, ios, uigesturerecognizer

我在`UIView`监听屏幕上手势的过渡方法时遇到了一些问题。

发生的事情是，如果我向左滑动或向右滑动，它会向我的@selector 方法发送左右滑动信号......这意味着我无法区分滑动。

这是我有问题的代码。我尝试了一些不同的方法，但似乎无法正确处理。

```
- (void) setupSwipeGestureRecognizer {
        UISwipeGestureRecognizer *swipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipedScreen:)];
        swipeGesture.direction = (UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionRight);
        [self.view addGestureRecognizer:swipeGesture];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.title = @"Prototype";
    //Initalizse the swipe gestuer listener
    [self setupSwipeGestureRecognizer];

    //alloc and init
    self.detailViewA = [[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]]; 
    self.detailViewB = [[DetailViewControllerB alloc]initWithNibName:@"DetailViewControllerB" bundle:[NSBundle mainBundle]];

    // set detail View as first view
    [self.view addSubview:self.detailViewA.view];

    // set up other views
    [self.detailViewB.view setAlpha:1.0f];

    // Add the view controllers view as a subview
    [self.view addSubview:self.detailViewB.view];

    // set these views off screen (right)
    [self.detailViewB.view setFrame:CGRectMake(320, 0, self.view.frame.size.width, self.view.frame.size.height)];    
}

- (void)swipedScreen:(UISwipeGestureRecognizer*)gesture
{
    if (gesture.direction = UISwipeGestureRecognizerDirectionLeft) {
        NSLog(@"Left");
    }
   if (gesture.direction = UISwipeGestureRecognizerDirectionRight){
       NSLog(@"Right");
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:52:35.450

类似的问题[在这里](https://stackoverflow.com/questions/3319209/setting-direction-for-uiswipegesturerecognizer)和[这里](https://stackoverflow.com/questions/8181774/recognize-swipe-in-all-4-directions)。

`swipedScreen:`您的方法的参数是类型`UISwipeGestureRecognizer`，即导致调用回调的识别器。它不是指用户做出的任何实际手势。在您的情况下，您`direction`将此识别器的属性设置为`(UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionRight)`- 这不会改变。

您必须创建两个识别器，每个方向一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:36:35.110

试试这个代码：

```
(void)swipedScreen:(UISwipeGestureRecognizer*)gesture {
    if (gesture.direction == UISwipeGestureRecognizerDirectionLeft) {
        NSLog(@"Left");  
    }
    if(gesture.direction == UISwipeGestureRecognizerDirectionRight) {
        NSLog(@"Right");
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T19:25:58.890

**Swift 3 版本代码：**

```
func setupSwipeGestureRecognizer() {

        //For left swipe
        let swipeGestureLeft = UISwipeGestureRecognizer(target: self, action: #selector(self.swipedScreen))
        swipeGestureLeft.direction = .left
        self.view.addGestureRecognizer(swipeGestureLeft)

        //For right swipe
        let swipeGestureRight = UISwipeGestureRecognizer(target: self, action: #selector(self.swipedScreen))
        swipeGestureRight.direction = .right
        self.view.addGestureRecognizer(swipeGestureRight)

    }

override func viewDidLoad() {
        super.viewDidLoad()
     setupSwipeGestureRecognizer() 
}

func swipedScreen(gesture: UISwipeGestureRecognizer) {

        if gesture.direction == .left {
            print("Left")
        } else if gesture.direction == .right {
            print("Right")
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:24:23.237

您没有正确比较您的 if 条件。它应该有 == 作为比较器操作符。您正在使用 = 这使您的条件始终为真。

# java - 类型不匹配：无法从 String 转换为 R.string

> ID：10812121
> 
> 赞同：2
> 
> 时间：2012-05-30T07:50:57.307
> 
> 标签：java, android, string

我是新手，所以请原谅我的原始问题，我真的不明白。我只是在做教程时在我的主要活动上创建这个数组，我得到一个错误

```
package com.TaskReminder;

import android.R.string;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class ReminderListActivity extends ListActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reminder_list);
    string[] items = new string[]{"aa","bb"};
    ArrayAdapter<string> adapter = new ArrayAdapter<string>(this,R.layout.reminder_row,R.id.text1,items);
    setListAdapter(adapter);

} 
```

我的字符串数组上的错误是：

> 此行有多个标记 - 行断点：ReminderListActivity [line: 14] - onCreate(Bundle)
> 
> **- 类型不匹配：无法从 String 转换为 R.string**

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:53:10.773

容易修复，String 类型需要大写。

```
string[] items = new string[]{"aa","bb"};
ArrayAdapter<string> adapter = new ArrayAdapter<string>(this,R.layout.reminder_row,R.id.text1,items); 
```

变成：

```
String[] items = new String[]{"aa","bb"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.reminder_row,R.id.text1,items); 
```

@gt_ebuddy 也是正确的，删除​​这一行：

导入 android.R.string；

使用`Ctrl`++`Shift`是`O`自动导入类的最简单方法，但是当它尝试从包的 R 文件中导入任何内容时，它有时会导致您误入歧途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T07:53:44.863

删除导入。而且要快乐。

```
import android.R.string; 
```

请注意

*   应该是`String`。不是`string`
*   `String`类是在包中定义的`java.lang`，你永远不需要导入这个包，因为它们会自动导入到每个 java 程序中。[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/package-summary.html)说 `"Package java.lang : Provides classes that are fundamental to the design of the Java programming language."`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:55:11.413

删除`import android.R.string;`. 我猜你已经这样做了，因为该行字符串上显示的错误应该在你的`R.java`文件中它是自动生成的，不要修改它清理你的项目并再次构建希望它有效！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:54:17.053

```
string[] items = new string[]{"aa","bb"};
ArrayAdapter<string> adapter = new ArrayAdapter<string>(this,R.layout.reminder_row,R.id.text1,items); 
```

将其更改为

```
String[] items = new String[]{"aa","bb"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.reminder_row,R.id.text1,items) 
```

# spring - 测试 Struts 2 动作，结果类型 freemarker

> ID：10812133
> 
> 赞同：1
> 
> 时间：2012-05-30T07:51:18.537
> 
> 标签：spring, junit, struts2, locale, freemarker

我正在尝试测试结果指向 freemarker 页面 (.ftl) 的 Struts 2 操作。当我使用 Spring 框架时，我的测试扩展了 StrutsSpringTestCase。我的问题是，在操作执行之后，它会搜索结果 freemarker 页面，但在它获取页面之前，它会将语言环境（在我的情况下为 en_GB）附加到 ftl 页面。从而一无所获。

例如 ：

操作执行 - 结果页面 = login.ftl 但搜索 login_en_GB.ftl

操作执行 - 结果页面 = index.ftl 但搜索 index_en_GB.ftl

我无法弄清楚它为什么这样做或如何改变它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:43:23.503

我认为您需要做的是在控制器上设置一个模拟 servlet 请求。我们在代码中做了类似的事情，但要模拟发布请求：

```
import org.springframework.mock.web.MockHttpServletRequest;
import org.springframework.mock.web.MockHttpServletResponse;

protected HttpServletRequest httpServletPostRequest = new MockHttpServletRequest("POST", "/");
httpServletPostRequest.addPreferredLocale(yourLocale);
controller.setServletRequest(httpServletPostRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:15:28.603

我用于此问题的解决方法是在执行操作后立即停止进程。这样做我并没有利用全部功能，但由于显然不支持 freemarker，这是我想到的最好方法。

# c++ - c++ 向量不像数组

> ID：10812137
> 
> 赞同：7
> 
> 时间：2012-05-30T07:51:48.317
> 
> 标签：c++

几个月来，我一直在研究 C++，并且大部分时间都被谷歌指示堆栈溢出以进行 C++ 查询。我经常注意到“为什么不使用矢量”类型的劝告，并受到启发去做这件事。

因此，主要是为了获得自动内存释放的次要好处，并能够编写类型化的比较函数进行排序。我将指向对象的指针数组切换为向量。现在我认为（似乎不正确）向量可以或多或少地像数组一样使用，因此我这样初始化：

```
cluster  clusters[LOTS];
vector<cluster *> pclust;
pclust.reserve(numClust);
for (int i=0; i<numClust; ++i)
    pclust[i] = clusters + i; 
```

编译器没有抱怨。然后一段时间后，我需要根据集群对象的某些属性对向量进行排序。所以：

```
std::sort(pclust.begin(), pclust.end(), ClusterCompareNumSegs); 
```

再次编译没有问题。除了向量没有排序。事实证明 vector.size() 为零，当然我的初始化应该是

```
pclust.push_back(clusters + i); 
```

现在这很容易解决，但我很困惑，因为最初的错误分配有效。我成功地遍历了向量 - 使用数组语法，如下所示：

```
for (clustind=0; clustind < numClust; ++clustind) {<br>
    cluster *cl = pclust[clustind];
    ...happily access *cl... 
```

这一切都很好。所以我只是想知道发生了什么。大概在我最初的任务中，我试图访问尚未在向量中的元素（我试图将它们放入），并且向量抛出了我忽略的异常。但尽管如此，当引用位置时，指针就在那里。任何人都可以提供启示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T07:59:48.623

`vector::reserve`不会改变向量的大小，它仍然只包含`0`创建它的元素。它的作用是确保向量可以保留`numClust`而无需重新分配。见[这里](http://www.cplusplus.com/reference/stl/vector/reserve/)。

您想要的是将向量声明为具有该大小

```
vector<cluster *> pclust(numClust); 
```

或[调整向量的大小](http://www.cplusplus.com/reference/stl/vector/resize/)

```
pclust.resize(numClust); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T08:00:29.950

[`std::vector::reserve`](http://www.cplusplus.com/reference/stl/vector/reserve/) *要求为向量容器的元素分配的存储空间的容量至少足以容纳 n 个元素*。它不会调整矢量的大小，就是[`std::vector::resize`](http://www.cplusplus.com/reference/stl/vector/resize/)这样。

替换`pclust.reserve(numClust);`为`pclust.resize(numClust);`。

或者，您可以删除`pclust.reserve(numClust);`调用并将此向量的构造更改为：`vector<cluster *> pclust(numClust);`产生相同的结果。

我还建议你看看这个问题：[std::vector reserve() 和 push_back() 比 resize() 和数组索引快，为什么？](https://stackoverflow.com/q/1461276/1168156):)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:02:01.897

与向量一起使用的 operator[] 返回对索引位置元素的引用。但是，你还没有用任何值初始化向量，所以它是空的。

尽管你做了 a `pclust.reserve(numClust)`，但它只告诉向量的大小将很快改变，它分配存储空间而不改变向量的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:18:55.067

```
cluster  clusters[LOTS];
vector<cluster *> pclust(numClust);
for (int i = 0; i < numClust; ++i)
  pclust[i] = clusters + i; 
```

但这意味着您仍在使用数组来存储集群。你不能做`clusters`一个矢量吗？

```
vector<cluster> clusters(LOTS); 
```

# iphone - 适用于 iOS 的 Facebook 签名请求 (HMAC SHA256)

> ID：10812140
> 
> 赞同：4
> 
> 时间：2012-05-30T07:51:59.093
> 
> 标签：iphone, objective-c, ios, facebook, sha256

几周以来，我一直在尝试为 iOS 上的 Facebook 签名请求生成 HMAC SHA256。我迫切需要帮助。

Facebook 签名请求有两个部分，由句点分隔。第一部分是有效载荷的 HMAC256，而第二部分是有效载荷的 Base64 编码字符串。我只能重新创建第二部分。

```
*vlXgu64BQGFSQrY0ZcJBZASMvYvTHu9GQ0YM9rjPSso*。eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsIjAiOiJwYXlsb2FkIn0

```

我一直在使用以下每个人都使用的代码，但它会生成不同的哈希：

```
#import <CommonCrypto/CommonHMAC.h>
#import "NSData+Base64.h"

+(NSString*) hmacForSecret:(NSString*)secret data:(NSString*)data {

     const char *cKey  = [secret cStringUsingEncoding:NSASCIIStringEncoding];
     const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
     unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];

     CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
     NSData *HMAC = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];

     return [HMAC base64EncodedString];
} 
```

根据 Facebook 文档： [https ://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

正确的 HMAC256 输出应该是使用“ **secret** ”作为密钥时：

```
 vlXgu64BQGFSQrY0ZcJBZASMvYvTHu9GQ0YM9rjPSso 
```

要编码的有效载荷：

```
 {
     "algorithm": "HMAC-SHA256",
     "0": "payload"
 } 
```

注意：您可以对签名请求的第二部分进行 Base64 解码以获取此有效负载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T01:49:54.293

问题出在 Base64 编码器上。它需要编码为 Base64Url 参见： [http ://en.wikipedia.org/wiki/Base64#URL_applications](http://en.wikipedia.org/wiki/Base64#URL_applications)

这是修改后的 base64EncodedString 类别方法：

```
//NSData+Base64.h
 - (NSString *)base64EncodedString
 {
    size_t outputLength;

    char *outputBuffer = NewBase64Encode([self bytes], [self length], true, &outputLength);
    NSString *result = [[[NSString alloc] initWithBytes:outputBuffer length:outputLength encoding:NSASCIIStringEncoding] autorelease];
    free(outputBuffer);

     NSString *b64PayloadClean = [[result componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]] componentsJoinedByString:@""];

     //do URL encoding by replacing "+" and "/" to "-" and "_" respectively
     b64PayloadClean = [b64PayloadClean stringByReplacingOccurrencesOfString:@"=" withString:@""];
     b64PayloadClean = [b64PayloadClean stringByReplacingOccurrencesOfString:@"+" withString:@"-"];
     b64PayloadClean = [b64PayloadClean stringByReplacingOccurrencesOfString:@"/" withString:@"_"];

    return b64PayloadClean;
 } 
```

# jquery - jQuery：按类获取单击范围的内容

> ID：10812141
> 
> 赞同：5
> 
> 时间：2012-05-30T07:52:01.907
> 
> 标签：jquery

我有几个`span`标签，具有相同的类。每个`span`人都有它唯一的 id。现在我想获取点击`span`类的内容和 id。

我发现了如何处理班级的 id，但我似乎无法获得`<span></span>`标签之间的内容。我试过`this.html()`, `this.html`，`this.text`但`this.tex()`我无法得到文本。

```
$(".row").click(function() {
    alert(this.id);
    alert(this.html);
} 
```

HTML：

```
<div>
    <span class="row" id="1">Username of user 1</span>
    <span class="row" id="2">Username of user 2</span>
<div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:57:46.953

您`id`的 's 无效（它们不能以数字开头），因此请更改它们并尝试此操作

```
<div id="parent">
    <span class="row" id="s1">Username of user 1</span>
    <span class="row" id="s2">Username of user 2</span>
    ...
</div> 
```

jQuery

```
$("#parent").on('click', '.row', function() {
    alert(this.id);
    alert(this.innerHTML);
}); 
```

这样做你将使用`event delegation`，捕获父级上的点击事件并只定义一次处理程序（而不是昂贵的，对于每个`span`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:53:37.117

利用[`.html()`](http://api.jquery.com/html/)函数你会得到元素的内容

```
$(".row").click(function() {
    alert(this.id);
    alert($(this).html());
}); 
```

### [工作演示](http://jsfiddle.net/MsJxH/1/)

[](http://jsfiddle.net/MsJxH/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:56:22.070

您可以使用`innnerHTML`，但您`);`最后错过了。

```
$(".row").click(function() {
    alert(this.id);
    alert(this.innerHTML);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T07:58:05.817

看这里。[http://jsfiddle.net/2aA92/1/](http://jsfiddle.net/2aA92/1/)

```
$(".row").click(function() {
  alert(this.id);
  alert($(this).text());
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T07:53:48.110

```
id = $(this).attr('id');
html = $(this).html(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T08:05:30.500

尝试这个：

```
window.onload = function() {
  $(".row").click(function() {
    alert(this.id);
    alert($(this).html());
  });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T07:53:54.100

```
$(".row").click(function() {
    alert(this.id);
    alert($(this).text()); // or this.innerHTML
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T07:54:22.750

你需要这个：

```
$(".row").click(function() {
    alert($(this).attr('id'));
    alert($(this).html());
}

<div>
    <span class="row" id="1">Username of user 1</span
    <span class="row" id="2">Username of user 2</span
<div> 
```

# html - Outlook，gmail基本问题（导致代码）

> ID：10812147
> 
> 赞同：1
> 
> 时间：2012-05-30T07:52:30.403
> 
> 标签：html, css, html-table, html-email

我在尝试创建我的第一个电子邮件模板设计时发现了问题，我认为它导致了代码（我对此很陌生）。

这是屏幕截图：

> ![在此处输入图像描述](../Images/45c4c7dd059321f4bc0372c89783e826.png)

想知道为什么“博客文章”和“侧边栏”部分的宽度与上面的“表格部分”不同？

**我使用了这样的代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Mail 2</title>
    <style type="text/css">
some style
    </style>
    <meta name="robots" content="noindex,nofollow">
    <meta property="og:title" content="Mail 2">
</head>
<body width="100%" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="#ffffff">
        <!--[if gte mso 9]>
            <v:background fill="t">
               <v:fill type="tile" src="https://lh5.googleusercontent.com/-6styRrYxl3U/T7Sg_Cbww0I/AAAAAAAAAkE/UWVWEJDfSj0/h120/header-bg.png" />
            </v:background>
        <![endif]-->
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff">
    <tr>
        <td>
            <table align="center" width="600">
                <tr>
                <td>
                This is above table section that shown correct
                </td>
                </tr>
            </table>

            <table width="600">
                <tr>
                <td width="340" colspan="1" class="blog post">
                This is below section that shown not correct as above. Blog post section that looks out of the box.
                </td>

                <td width="200" colspan="1" class="blog post">
                <table>
                    </tr>
                        <td>
                            Blah blah. This is sidebar section that looks out of the box.
                        </td>
                    </tr>
                </table>
                </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T15:11:57.087

我注意到您的代码中有几个错误。

1.）在底部第二张表中，你有`</tr>`而不是`<tr>`

2.) 顶部表格居中对齐，但底部没有对齐声明

3.) 在底部表格中，td 宽度加起来为 540，而不是声明的 600

我相信上面的错误导致了这个问题。如果没有，我需要更多信息来了解每个表内部的确切内容，因为它可能是图像大小、嵌套表内代码中的进一步错误等。

请参阅下面的代码片段：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Mail 2</title>
    <style type="text/css">
some style
    </style>
    <meta name="robots" content="noindex,nofollow">
    <meta property="og:title" content="Mail 2">
</head>
<body width="100%" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="#ffffff">
        <!--[if gte mso 9]>
            <v:background fill="t">
               <v:fill type="tile" src="https://lh5.googleusercontent.com/-6styRrYxl3U/T7Sg_Cbww0I/AAAAAAAAAkE/UWVWEJDfSj0/h120/header-bg.png" />
            </v:background>
        <![endif]-->
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff">
    <tr>
        <td>
            <table align="center" width="600">
                <tr>
                <td>
                This is above table section that shown correct
                </td>
                </tr>
            </table>

            <table align="center" width="600">
                <tr>
                <td width="340" class="blog post">
                This is below section that shown not correct as above. Blog post section that looks out of the box.
                </td>

                <td width="200" class="blog post">
                <table>
                <tr>
                        <td>
                            Blah blah. This is sidebar section that looks out of the box.
                        </td>
                    </tr>
                </table>
                </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:51:21.793

如果你只有两行两列，为什么要这么复杂？

```
<table width="596px" border="0" cellspacing="2" cellpadding="0">
  <tr>
   <td>Content 1</td>
   <td>Content 2</td>
  </tr>
  <tr>
   <td>Content 3</td>
   <td>Content 4</td>
  </tr>
</table> 
```

在每个“内容点”中放置您想要的任何内容并完成工作。你有太多的 td 和 tr，最好的做法是保持简单。我还建议为表格设置 596 像素而不是 100% 的宽度，因为这可能会导致某些电子邮件客户端出现显示问题。

# android - Android findViewById 为空。已经尝试清理项目，先setcontentview

> ID：10812154
> 
> 赞同：1
> 
> 时间：2012-05-30T07:53:08.623
> 
> 标签：android, findviewbyid

帮助！我遇到了 findViewById null 返回值问题。我做了大量的研究并已经清除了项目，将 setContentView 放在前面，但它仍然失败！xml 布局工作正常，因为如果我将自定义视图的背景设置为蓝色，则在运行应用程序时视图将具有预期的蓝色。但我就是不能使用 findViewById

***布局xml：***

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<shaotian.android.blackboard.BBView
    android:id="@+id/bBView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</FrameLayout> 
```

***自定义视图类，它的父类已经扩展了android的视图类***：

```
package shaotian.android.blackboard;
import java.util.Observable;
import java.util.Observer;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;
public class BBView extends shaotian.android.blackboard.View {

public BBView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    TextView txt=new TextView(context);
    this.setBackgroundColor(Color.BLUE);

}
public BBView(Context context, AttributeSet attr)
{super(context);
this.setBackgroundColor(Color.BLUE);
}

public BBView(Context context,AttributeSet attr,int sty)
{
    super(context,attr,sty);
    this.setBackgroundColor(Color.BLUE);
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
}

public void update(Observable arg0, Object arg1) {
    // TODO Auto-generated method stub

} 
```

}

***活动课***：

```
package shaotian.android.blackboard;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
public class BlackBoardActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    BBView view=(BBView)findViewById(R.id.bBView1);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:14:50.763

您在这里调用了错误的超级构造函数：

```
public BBView(Context context, AttributeSet attr)
{
   super(context);
   this.setBackgroundColor(Color.BLUE);
} 
```

应该：

```
public BBView(Context context, AttributeSet attr)
{
   super(context, attr);
   this.setBackgroundColor(Color.BLUE);
} 
```

此外，在粘贴的活动代码中，我没有看到 R 的导入，请确保导入项目的 R 文件，而不是错误地导入 com.android.R。

# android - Android：将5个列表视图放在同一个布局中，ScrollView？

> ID：10812156
> 
> 赞同：0
> 
> 时间：2012-05-30T07:53:14.413
> 
> 标签：android, android-listview, android-scrollview

我有 5 个列表视图，我想将它们放在相同的布局中。我的想法是使用滚动视图，但显然这不是很好。

我怎么能这样做。

谢谢你。

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg_white" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@null"
    android:src="@drawable/bg_mdpi" />

 <TextView
     android:id="@+id/SearchingForTextView"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_marginTop="5dp"
     android:text="Searching for: "
     android:textAppearance="?android:attr/textAppearanceSmall"
     android:textColor="#ff000000"
     android:visibility="visible" />

<TextView
    android:id="@+id/SearchingFor"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/SearchingForTextView"
    android:layout_marginTop="5dp"
    android:text="Word"
    android:textColor="#112ED4"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:visibility="visible" />

<TextView
    android:id="@+id/JournalsSearchTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/SearchingFor"
    android:layout_marginTop="10dp"
    android:background="#ff888888"
    android:gravity="center_horizontal"
    android:text="Journals"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff000000"
    android:textStyle="bold" />

<ListView
    android:id="@+id/JournalSearchListView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/JournalsSearchTextView"
    android:layout_centerHorizontal="true"
    android:background="#D5DADE"
    android:cacheColorHint="#00000000">
</ListView>

 <TextView
    android:id="@+id/ArticlesSearchTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/JournalSearchListView"
    android:background="#ff888888"
    android:gravity="center_horizontal"
    android:text="Articles"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff000000"
    android:textStyle="bold" />

 <ListView
    android:id="@+id/ArticlesIssuesSearchListView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ArticlesSearchTextView"
    android:layout_centerHorizontal="true"
    android:background="#D5DADE"
    android:cacheColorHint="#00000000" >
</ListView>

<TextView
    android:id="@+id/AuthorsSearchTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/ArticlesIssuesSearchListView"
    android:background="#ff888888"
    android:gravity="center_horizontal"
    android:text="Authors"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff000000"
    android:textStyle="bold" />

<ListView
    android:id="@+id/AuthorsSearchListView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/AuthorsSearchTextView"
    android:layout_centerHorizontal="true"
    android:background="#D5DADE"
    android:padding="1dp"
    android:cacheColorHint="#00000000">
</ListView>

<TextView
    android:id="@+id/SubmissionsSearchTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/AuthorsSearchListView"
    android:background="#ff888888"
    android:gravity="center_horizontal"
    android:text="Submissions"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff000000"
    android:textStyle="bold" />

 <ListView
    android:id="@+id/SubmissionsSearchListView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/SubmissionsSearchTextView"
    android:layout_centerHorizontal="true"
    android:background="#D5DADE"
    android:cacheColorHint="#00000000">
</ListView>

  <TextView
    android:id="@+id/SpecialIssuesSearchTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/SubmissionsSearchListView"
    android:background="#ff888888"
    android:gravity="center_horizontal"
    android:text="Special Issues"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff000000"
    android:textStyle="bold" />

 <ListView
    android:id="@+id/SpecialIssuesSearchListView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/SpecialIssuesSearchTextView"
    android:layout_centerHorizontal="true"
    android:background="#D5DADE"
    android:cacheColorHint="#00000000" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:35:52.490

我终于得到了你想要的。您想显示 5 个不同类别的搜索结果。

我建议您可以为此使用 ExpandableListView。Android 提供了一个类似于以下结构的 ExpandableListView：

```
Group A       (v)
-----------------
  Child A1
-----------------
  Child A2
-----------------
  Child A3
-----------------
Group B       (v)
-----------------
  Child B1
-----------------
  Child B2
-----------------
  Child B3
-----------------
Group C       (v)
-----------------
  Child C1
-----------------
  Child C2
-----------------
  Child C3 
```

用法与 ListView 非常相似。您要做的是编写一个扩展 BaseExpandableListAdapter 的适配器。您还可以为组视图/子视图实现自定义布局。

您可以参考这些页面：

[http://about-android.blogspot.com/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.com/2010/04/steps-to-implement-expandablelistview.html)

[http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php](http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php)

[http://android-adda.blogspot.com/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.com/2011/06/custom-expandable-listview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:09:29.830

如果您不需要`ListView`s 可滚动，正如您在评论中提到的那样，并且列表最多包含约 10 个项目，我会考虑使用 a`LinearLayout`而不是 a `ListView`，并将所有 5 `LinearLayout`s 放在一个 big`ScrollView`中。

编辑：代码示例：

布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:isScrollContainer="true"
    android:orientation="vertical"
    android:scrollbars="vertical" >
    <LinearLayout
        android:id="@+id/list1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" />
</ScrollView> 
```

代码：

```
LinearLayout list = (LinearLayout) findViewById(R.id.list);
for (String s : arrayList1) {
  TextView tv = new TextView(this);
  tv.setText(s);
  list.addView(s);
}
for (String s : arrayList2) {
  TextView tv = new TextView(this);
  tv.setText(s);
  list.addView(s);
} 
```

# php - 在php中获取我的系统时区

> ID：10812162
> 
> 赞同：2
> 
> 时间：2012-05-30T07:53:44.257
> 
> 标签：php, javascript, timezone

> **可能重复：**
> [在 PHP 中猜测用户的时区](https://stackoverflow.com/questions/3498128/guessing-users-timezone-in-php)

我如何在**php**中获取我的系统当前时区提前谢谢我尝试了这段代码

```
echo date_default_timezone_get();
echo date('H:i:s');
date_default_timezone_set('GMT');
echo date_default_timezone_get();
echo date('H:i:s'); 
```

但我得到了

```
**UTC
07:51:52

GMT
07:51:52** 
```

我也试过 date('Z'); 我有

**0**

但我的时区是亚洲/加尔各答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:07:41.850

您应该以 UTC 格式发送所有时间信息，然后如果本地计算机的系统时钟设置正确，则可以将其转换为本地时间。[这里](https://stackoverflow.com/questions/10714180/date-converts-certain-date-strings-to-local-time/10714277#10714277)有一些函数可以在本地机器上用 javascript 转换为 UTC 和从 UTC 转换。您的服务器应该只在 UTC 下工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:33:45.117

PHP 对服务器的时区一无所知。**date_default_timezone_get** () 函数从 php.ini 中返回值，或者如果它是由**date_default_timezone_set** () 设置的；

您可以使用*nix上的[date](http://en.wikipedia.org/wiki/Date_%28Unix%29)或Windows上的[tzutil](http://social.technet.microsoft.com/Forums/hu/winservergen/thread/afaa73f1-a420-4bdd-accb-6c7994c49193)从命令行获取它。

# python - 循环遍历数组的部分部分

> ID：10812172
> 
> 赞同：1
> 
> 时间：2012-05-30T07:54:02.900
> 
> 标签：python

我有一个教程中的代码可以做到这一点：

```
elements = []

for i in range(0, 6):
    print "Adding %d to the list." % i
    # append is a function that lists understand
    elements.append(i)

for i in elements:
    print "Element was: %d" % i 
```

但是，如果我只想从元素 [0] 打印到元素 [4]，这是如何实现的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T07:55:03.367

这可以使用*切片*来实现：

```
for i in elements[0:5]:
    print "Element was: %d" % i 
```

结束索引不包含在范围内，因此您需要将其从 4 提高到 5。

起始零可以省略：

```
for i in elements[:5]:
    print "Element was: %d" % i 
```

有关更多信息，请参阅[解释 Python 的切片表示法](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

# c++ - 在 C++ 中存储最后 n 个元素的正确数据结构

> ID：10812178
> 
> 赞同：4
> 
> 时间：2012-05-30T07:54:18.427
> 
> 标签：c++, data-structures

我需要存储最后 n 个时间值，为此我使用了一个向量。我可以做到这一点并且它有效，但我的问题是，从长远来看，向量会填满，我可能会用完内存对吗？我正在使用一个 stl 浮点向量。

更清楚地说：我正在从另一个进程推回时间值，我只需要最后 5 个时间值。

我怎样才能有效地做到这一点，而又不让向量填满并最终耗尽内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:57:11.420

听起来好像您想要一个覆盖值的循环缓冲区。
以[boost](http://www.boost.org/doc/libs/1_49_0/libs/circular_buffer/doc/circular_buffer.html)为例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:56:30.573

使用[队列](http://www.sgi.com/tech/stl/queue.html)- 在这种情况下它是完美的。你推入队列直到它的大小为 5，然后当添加一个新值时，你首先从队列中弹出然后推入它。

编辑：如果您需要能够直接访问所有 5 个元素，则[deque](http://www.sgi.com/tech/stl/Deque.html)可能是更好的选择。我也相信默认的队列实现是基于双端队列的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T13:39:55.607

据我所知，队列（或双端队列）的内存使用不是循环的。相反，它会在需要时增长，并偶尔复制以适应。

我建议制作自己的结构。您所需要的只是一个大小为 5 的数组，以及“最后一个”项目的指针（或索引），它将被下一个新项目覆盖。每次添加新值时，'last' 项被覆盖，'last' 指针向上移动：

```
last = (last+1)%5; 
```

确保找到一种处理开始的好方法，数组中的项目少于 5 个。如果你只是在开始时用错误/中性值填充数组，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:57:57.463

我认为 STL 队列是你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:59:40.417

不记得容器名称 :) 我会使用 std::queue 容器。因此，您可以从另一端删除，而不必担心序列中的位置。关于线程的事情......我想我不能不知道 afaik 向量和列表不是线程安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-07T07:39:43.050

我认为每当有新数据出现时，数据都应该转移到下一个位置，
即：
`4->5->6->7 //old data`
当有新数据出现时，预期的数组必须是
`5->6->7->8 //updated`
那个

```
int arr[4]={0};
int count=0;
int head=0;

void insert(int data)
{

    arr[count%4]=data;
    count++;
    if(count > 4)
        head=count%4;
    printf("count=%d head=%d\n",count,head);
}

void display()
{
    int i;
    for(i=0;i<4;i++)
    {
        printf("%d->",arr[(head+i)%4]);
    }
    printf("\n");
}

int item_at(int i)
{
    return arr[(head+i)%4];
}

int main ()
{
    int opt,data;
    while(1)
    {
        printf("0\. Exit\n1\. Insert\n2\. Display\n3\. Item at\n");
        scanf("%d",&opt);
        if(opt == 0)
            return 0;
        else if(opt == 1)
        {
            scanf("%d",&data);
            insert(data);
        }
        else if(opt == 2)
        {
            display();
        }
        else if(opt == 3)
        {
            scanf("%d",&data);
            printf("arr[%d]=%d\n",data, item_at(data));
        }
    }
return 0;
} 
```

# batch-file - Playframework 2.0 中的编译错误

> ID：10812182
> 
> 赞同：2
> 
> 时间：2012-05-30T07:54:42.197
> 
> 标签：batch-file, playframework, playframework-2.0

编译 Playframework-2.01 项目我得到以下输出：

```
[java-ebean-templ] $ compile
[info] Updating {file:/home/sb/workspace/java-ebean-templ/}java-ebean-templ...
[info] Done updating.                                                                  
[error] {file:/home/sb/workspace/java-ebean-templ/}java-ebean-templ/compile:sources: PlayException: Compilation error [Not parsed?]
[error] Total time: 4 s, completed May 30, 2012 9:41:00 AM
[java-ebean-templ] $ 
```

没有别的了！这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:09:06.283

同意错误信息不是很清楚。

当 scala 视图模板中存在语法错误时，此消息似乎出现在我的情况下。因此，在进一步搜索之前，请确保它们是干净的。

# python - 在 matplotlib 中使用 specgram 创建对数频率轴频谱图

> ID：10812189
> 
> 赞同：3
> 
> 时间：2012-05-30T07:55:11.203
> 
> 标签：python, matplotlib, scipy

我想知道此功能是否已通过 specgram 内置，我认为并非如此。如果没有，那么最好的方法是使用 specgram 或通过 matplotlib 来实现它。如果谱图轴的一些变换可以启用此功能。

例如，对于 specgram 图，以下将不起作用（任何音频信号都可以作为 specgram 的第一个参数传递）：

```
fig = figure(11)
ax = fig.add_subplot(111)
ax.specgram(tidig.train_symbol_list[0].audio,Fs=12000)
ax.set_yscale('log') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:29:33.377

[`Axes.set_xscale`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xscale)您可以使用和函数更改轴的缩放比例，`Axes.set_yscale`它们都接受或作为输入。因此，要将绘图更改为具有对数缩放的 x 轴，您可以执行以下操作：`linear``log``symlog`

```
import matplotlib.pyplot as plt

ha = plt.subplot(111)

# Plot your spectrogram here...

ha.set_xscale('log') 
```

**编辑**这似乎是一个[已知问题](http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg16620.html)。有可用的命令可以做到这一点，但不是以任何特别方便的方式（它应该只是`specgram`函数的标志，或者`set_xscale`应该`set_yscale`工作）。但是，有一种方法可以做到这一点：

而不是使用`matplotlib.pyplot.specgram`use [`matplotlib.mlab.specgram`](http://matplotlib.sourceforge.net/api/mlab_api.html#matplotlib.mlab.specgram)。这会计算频谱图但*不绘制它*。然后，您可以使用`matplotlib.pyplot.pcolor`或类似的功能来绘制频谱图。所以尝试类似：

```
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab

# Set up your data here...

Pxx, freq, t = mlab.specgram(x) # Other options, such as NFFT, may be passed
                                # to `specgram` here.

ha = plt.subplot(111)
ha.pcolor(t, freq, Pxx)
ha.set_xscale('log') 
```

# c# - EnumerateFiles 中的配置 SearchPattern

> ID：10812199
> 
> 赞同：7
> 
> 时间：2012-05-30T07:56:04.430
> 
> 标签：c#, .net, c#-4.0, directoryinfo

我有一个包含 2 个文件的目录：

*   文件 1.xls
*   文件2.xlsx

如果我做：

```
directoryInfo.EnumerateFiles("*.xls", SearchOption.TopDirectoryOnly) 
```

它返回两个文件，我只想要第一个（file1.xls）。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T08:31:25.190

看起来在引擎盖下，`DirectoryInfo`该类使用 Win32 调用[`FindFirstFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)。

这只允许通配符：

`*`匹配任何字符

`?`匹配 0 个或更多字符 - 请参阅[注释](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx#16)。

因此，您必须自己过滤结果，可能使用以下内容：

```
directoryInfo.EnumerateFiles("*.xls", SearchOption.TopDirectoryOnly)
             .Where(fi => fi.Extension == ".xls"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-17T15:27:23.993

这实际上是一种预期的行为。这很奇怪，但它已被记录在案。

在[MSDN](http://msdn.microsoft.com/en-us/library/wz42302f%28v=vs.110%29.aspx)上我们可以读到一句话：

> 在 searchPattern 中使用星号通配符（例如“*.txt”）时，扩展名正好是三个字符长时的匹配行为与扩展名长度多于或少于三个字符时的匹配行为不同。文件扩展名正好为三个字符的 searchPattern 返回具有三个或更多字符扩展名的文件，其中前三个字符与 searchPattern 中指定的文件扩展名匹配。具有一个、两个或三个以上字符的文件扩展名的 searchPattern 仅返回具有与 searchPattern 中指定的文件扩展名完全匹配的扩展名的文件。使用问号通配符时，此方法仅返回与指定文件扩展名匹配的文件。例如，给定两个文件，“file1.txt”和“file1.txt”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:23:09.913

像这样的东西：

```
directoryInfo.EnumerateFiles(".xls",SearchOption.TopDirectoryOnly)
    .Where( f => Path.GetExtension( f ) == ".xls" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:13:00.377

您可以使用扩展方法`IEnumerable.First()`，`IEnumerable.FirstOrDefault()`或者如果模式很重要，请更正您的枚举搜索模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-15T02:02:02.763

这可以使用 .Except() 并且应该更快：

```
 var dir = new DirectoryInfo(myFolderPath);
   ICollection<FileInfo> files = dir.EnumerateFiles("*.xls").Except(dir.EnumerateFiles("*.xls?")).ToList(); 
```

您可以使用 Union(s) 添加更多扩展。总体而言，这更清洁（我相信它更快，尽管尚未测试）。国际海事组织

# asp.net - 如何为asp.net中的登录密码文本框设置默认值？

> ID：10812200
> 
> 赞同：2
> 
> 时间：2012-05-30T07:56:08.173
> 
> 标签：asp.net, login

我想为我的`Login`控件设置一个默认值。这是我`Login`在模板模式下的控制：

```
 <td align="center" dir="rtl" style="width: 140px; padding-bottom: 20px;">
        <asp:TextBox ID="UserName" runat="server" CssClass="txtbox " Font-Size="0.8em" 
            Height="24px" Width="137px" Text="<%$ Resources:resource, username%>  " 
            Font-Names="tahoma" AutoCompleteType="FirstName" MaxLength="32"> 
        </asp:TextBox>
    </td>
</tr>
<tr>
    <td align="center" dir="rtl" style="width: 160px">
        <asp:TextBox ID="Password" runat="server"  CssClass="txtbox" Font-Size="0.8em" 
            Height="24px" Width="137px" Font-Names="tahoma" 
            TextMode="Password" MaxLength="32"   >
        </asp:TextBox> 
```

当我尝试将默认值设置为密码框时，它没有出现。我无法从页面后面的代码访问密码框。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:11:09.533

设置属性而不是 .Text 属性，因为密码模式不存储敏感信息，这是锻炼

```
txtPassword.Attributes.Add("value", "defaultpassword") 
```

但我不喜欢这种方式，因为这会将密码发送给客户端并且他们可以看到它。

更好的方法是让它为空而不是强制，稍后向用户显示一条消息，以将默认密码的密码字段保持为空白。

在检查密码文本框是否为空的代码中，传递默认密码而不是文本框值。

对于登录按钮单击事件，您背后的代码应如下所示：

```
 string password = (txtPassword.Text == String.Empty)? DefaultPassword : txtPassword.Text;
 AuthenticateUser(txtUserName.Text,password); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T08:00:11.910

使用 textmode ="password" 为文本框赋值的正确方法是通过后面的代码：

```
textbox.Attributes.Add("value", "whatever") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T08:02:31.137

您可能会发现[这](http://ryanfarley.com/blog/archive/2004/12/18/1300.aspx)很有用。讨论如何使用 TextMode=Password 设置 TextBox 的值。

# jquery - jQuery - 找到一个元素来处理麻烦

> ID：10812210
> 
> 赞同：0
> 
> 时间：2012-05-30T07:56:42.103
> 
> 标签：jquery

我正在尝试做一些常规的点击功能，我必须在点击元素之外找到一个元素。这是一些代码：

```
<div class="options">
    <span class='comment_now'>kommentér</span>
</div>

<div class="write_comment_wrap">
    <form method="post" class="write_comment_form">
        <textarea class="write_comment" name="write_comment" placeholder="skriv din kommentar..."></textarea>
        <input type="submit" value="skriv" class="global_button">
    </form>
</div>​ 
```

JS：

```
$('.comment_now').click(function(){
    $(this).closest('.write_comment_wrap').slideToggle();
});​ 
```

什么都没有发生。我试图发出警报，以确定我是否在该函数内部。伙计们，我使用了错误的遍历功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:59:37.963

尝试 ：

```
$('.comment_now').click(function(){
    $(this).closest('.options').next('.write_comment_wrap').slideToggle();
});​ 
```

演示：http: [//jsfiddle.net/HwQLw/](http://jsfiddle.net/HwQLw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:59:25.720

`.closest`是在同一个dom树中找到最近的元素，但在你的情况下，`.write_comment_wrap`是`.comment_now`span的父级的兄弟。

```
$('.comment_now').click(function(){
    $(this).parent().next('.write_comment_wrap').slideToggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:03:03.420

试试这个：

```
$('.comment_now').click(function(){
    $(this).parent().next('.write_comment_wrap').slideToggle();
});​ 
```

[http://jsfiddle.net/dcVqf/](http://jsfiddle.net/dcVqf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:03:38.293

`closest`向上遍历 DOM 树。DOM 树为`.comments_now`：

```
 - body, etc.
     - .options
       - .comments_now 
```

所以`$(this).closest('.write_comment_wrap')`不会找到你任何东西，因为`.comments_now`没有这样的祖先。

你可以做的是：

```
 $(this).closest('.options').next('.write_comment_wrap').slideToggle(); 
```

# android - android中的样式属性

> ID：10812221
> 
> 赞同：1
> 
> 时间：2012-05-30T07:57:44.600
> 
> 标签：android, styles, themes

在哪里可以找到所有 android 组件的样式属性列表？

例子：

@style/MyTheme.ActionBar.TitleTextStyle

当我在 XML 上编辑它时，android:titleTextStyle 不会出现在下拉列表中。

寻找这些的完整参考，有人知道我应该去哪里看吗？

感谢开发者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:00:10.107

在此处查找所有 Android 基本样式

[https://github.com/android/platform_frameworks_base/tree/master/core/res/res](https://github.com/android/platform_frameworks_base/tree/master/core/res/res)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:05:27.397

所有样式属性都在这里：http: [//developer.android.com/reference/android/R.styleable.html](http://developer.android.com/reference/android/R.styleable.html)

所有样式（主题）都在这里：http: [//developer.android.com/reference/android/R.style.html](http://developer.android.com/reference/android/R.style.html)

# php - sfDoctrineGenerator 删除不起作用

> ID：10812223
> 
> 赞同：0
> 
> 时间：2012-05-30T07:57:53.333
> 
> 标签：php, symfony-1.4, admin-generator

最近，我一直在探索 Symfony 的 sfDoctrineGenerator 用于我的后端接口。问题是这样的：

我正在使用 sfDoctrineGuardPlugin 进行用户管理。sfGuardUser 模块使用 sfDoctrineGenerator。所有需要的功能（删除、编辑、添加）都在工作。到目前为止，一切都很好。

然后，我使用此[链接](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/12)作为参考创建了一个新模块。添加和编辑功能现在可以工作，但我无法使删除（批量和单次删除）工作。我试图在批处理操作下显式添加它，但它仍然不起作用。它说它已经删除，显示一条消息成功，但没有删除任何元素。有人可以指出问题可能起源的正确方向吗？

这是我的 generator.yml 的副本

```
generator:
  class: sfDoctrineGenerator
  param:
    model_class:           News
    theme:                 admin
    non_verbose_templates: true
    with_show:             false
    singular:              ~
    plural:                ~
    route_prefix:          news
    with_doctrine_route:   true
    actions_base_class:    sfActions

    config:
      actions: ~

      fields:  
        news: {label: Announcement}
        created_at: {label: Date Published}
        updated_at: {label: Date Updated}
        user_id: {label: Author}
        user_name: {label: Author}

      list:    
        title:          Announcements List
        display:        [=title, created_at, updated_at, user_name]
        sort:           [created_at, desc]
        max_per_page:   10
        batch_actions:
          _delete:    ~

      filter: 
        display:  [title, user_id]

      form:   
        class:    NewsForm

      edit:    
        title:    Editing Announcement "%%title%%"

      new:     
        title:    New Announcement 
```

如果您需要我的其他东西，请随时发表评论。任何帮助都感激不尽。提前致谢。

**更新：**

这是在 Chrome 中查看的请求标头：

```
Request URL:http://localhost:8080/inventory_dev.php/news
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:ja_purity_tpl=ja_purity; fontSize=100; __atuvc=312|19; JSESSIONID=9DDD204812F0C53A8B3D33B89BF7A7C8; matciis=ha6l8ci8h3i2bp696e4h33vig2; symfony=ld2qept3j5cddjsb16qie098u3
Host:localhost:8080
Referer:http://localhost:8080/inventory_dev.php/news
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
Response Headersview source
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:Keep-Alive
Content-Type:text/html; charset=utf-8
Date:Wed, 30 May 2012 08:30:02 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=5, max=99
Pragma:no-cache
Server:Apache/2.2.21 (Win32) PHP/5.3.8
Transfer-Encoding:chunked
X-Powered-By:PHP/5.3.8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:50:37.397

这是生活中的 D'OH 时刻之一。

问题是在我的 schema.yml 中，我指定了：

```
actAs: { Timestampable: ~ , SoftDelete: ~ } 
```

这意味着当我删除元素时，它只会向它添加时间戳，而不是物理删除它。我从配置中删除了 SoftDelete，问题得到了解决。

也许 sfDoctrineGenerator 中应该有一个功能来支持 SoftDelete？

# crash - 谁能解释一下erlang的错误回溯？

> ID：10812229
> 
> 赞同：0
> 
> 时间：2012-05-30T07:58:06.787
> 
> 标签：crash, erlang, backtrace

1.  有没有一种在 shell 中打印漂亮错误跟踪的好方法？
2.  如何理解错误跟踪？

谢谢！

```
error 2012-05-30 15:53:49 <0.132.0> {supervisor_report,
[{supervisor,{local,ems_media_sup}},
        {errorContext,child_terminated},
        {reason,{undef,[{erlang,raise,[{timeout,
{rtmp,<<"http://video.zengee.com/clip.mp4">>}}],""},{rtmp_lib,play,1,[{file,"src/rtmp_lib.erl"},
    {line,159}]},    {ems_media,handle_info,2,
    [{file,"src/media/ems_media.erl"},
    {line,837}]},{gen_server_ems,handle_msg,5,[{file,"src/core/gen_server_ems.erl"},
    {line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]}},
    {offender,[{pid,<0.718.0>},{name,ems_media},{mfargs,{ems_media,start_link,
[rtmp_media,[{host,default},{name,<<"videojs">>},
    {type,rtmp},{url,"http://video.zengee.com/clip.mp4"}]]}},{restart_type,permanent},{shutdown,3000},{child_type,worker}]}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:06:00.243

见`reason`标签。在您的示例中：

```
 {reason,{undef,[{erlang,raise,[{timeout,... 
```

Erlang undef - 评估函数调用时找不到该函数。

# jquery - 表格行颜色改变

> ID：10812230
> 
> 赞同：0
> 
> 时间：2012-05-30T07:58:11.247
> 
> 标签：jquery

你好朋友我想改变每一个`<tr>`我试图做同样的事情的背景颜色没有得到结果我知道我的代码中有一些问题。请帮帮我

以下是我的代码检查在线**[DEMO](http://jsfiddle.net/QnVdE/)**

**脚本**

```
var b = new Array('col_one','col_two','col_three');

$('#tbl tr').each(function(){

var a = 0;

$('#tbl tr').addClass(b[a])

a++;

}) 
```

**CSS**

```
.col_one
{
    background:#000099;
}
.col_two
{
    background:#009966;
}
.col_three
{
    background:#663333;
} 
```

**HTML**

```
<table width="100%" border="1" cellspacing="0" cellpadding="0" id="tbl">
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:01:08.797

那是因为您声明`a`在`0`每次迭代时，您可以将变量传递给 anon 函数`each`以获取被迭代元素的索引：

```
$('#tbl tr').each(function(idx){

   // $(this) refers to the jQuery object of each tr
   $(this).addClass(b[idx%3]); // re-use colors when idx > 3
}) 
```

[http://jsfiddle.net/QnVdE/2/](http://jsfiddle.net/QnVdE/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:09:25.560

它现在正在工作。

[http://jsfiddle.net/QnVdE/3/](http://jsfiddle.net/QnVdE/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:02:10.227

```
var b = new Array('col_one','col_two','col_three');
var a = 0;
$('#tbl tr').each(function(){
if(a > 2){a=0;}
$(this).addClass(b[a]);

a++;

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:02:44.677

```
var b = ['col_one','col_two','col_three'];
var a = 0;
$('#tbl tr').each(function(){
    $(this).addClass(b[a % b.length]);
    a++;
}); 
```

# ruby-on-rails - 视图中的 Rails Money Gem“未初始化常量 Money::Currency::TABLE”

> ID：10812232
> 
> 赞同：2
> 
> 时间：2012-05-30T07:58:29.437
> 
> 标签：ruby-on-rails, gem, currency

我对货币宝石有疑问。我正在尝试显示所有货币的下拉列表：

风景：

```
<% if @receipt.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@receipt.errors.count, "error") %> prohibited this receipt from being saved:</h2>
  <ul>
    <% @receipt.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>
<%= simple_form_for(@receipt, :html => {:class => 'form-horizontal', :multipart => true }) do |f| %>
<h3>Kassenzettel hinzufügen</h3>
  <p>
  <div class="input-prepend">
    <%= f.label :due_date, 'Ausstellungsdatum' -%>
    <span class="add-on"><i class="icon-calendar"></i></span><%= f.text_field :due_date,  :value => Date.today.strftime('%d.%m.%Y'), :class => 'datepicker span2', :"data-date-format" => :'dd.mm.yyyy' %>
    </p>
    <p>
    <%= f.label :due_time, 'Zeit (optional)' -%>

    <%= f.time_select :due_time, { :class => "adsf"} %>
    </p>
    <p>
      <%= f.select(:currency,all_currencies(Money::Currency::TABLE), {:include_blank => 'Select a Currency'}) %>

    </p>
    <p> <%= f.label :recipt, 'Datei hochladen' -%> <%= f.file_field :document -%>
    <p class="help-block">Akzeptierte Formate: PDF, JPG, TIFF, max. 1 MB</p>
    </p>
    <br />
    <p>
      <button type="submit" class="btn btn-success"><i class="icon-plus icon-white"></i> Dokument hinzufügen </button>
      <%= link_to 'Abbrechen', receipts_path, :class => "btn" %></p>  
<% end %> 
```

该模型：

```
class Receipt < ActiveRecord::Base  

    belongs_to :user
    has_many   :products, :dependent => :destroy
    self.per_page = 5   
    validates :due_date, :presence => true
    validates_attachment :document, :presence => true,            
              :size => { :in => 0..5024.kilobytes }
    has_attached_file :document,
    :styles => {
        :minithumb=> ["50x50#", :png],
        :thumb=> ["150x150#", :png],
        :small  => ["500>", :png]       },
    :convert_options => { :all => '-background white -flatten +matte'}
    attr_accessible :due_date, :due_time, :receiptissuedate, :document, :dependent => :destroy
    columns_hash["due_time"] = ActiveRecord::ConnectionAdapters::Column.new("due_time", nil, "time")

    composed_of :receiptfinalamount,
        :class_name => "Money",
        :mapping => [%w(receiptfinalamount cents), %w(receiptcurrency currency_as_string)],
        :constructor => Proc.new { |cents, currency| Money.new(cents || 0, currency || Money.default_currency) },
        :converter => Proc.new { |value| value.respond_to?(:to_money) ? value.to_money : raise(ArgumentError, "Can't convert #{value.class} to Money") }

    before_validation(:on => :create) do
        self.receiptissuedate = DateTime.new(self.due_date.year, self.due_date.month, self.due_date.day, self.due_time.hour, self.due_time.min)
    end

    before_save :default_values
    def default_values
        self.receiptfinalamount ||= 0
    end

    def due_date
        return @due_date if @due_date.present?
        return Date.today
    end

    def due_time
        return @due_time if @due_time.present?
        return Time.now
    end 

    def due_date=(new_date)
        @due_date = self.string_to_datetime(new_date, I18n.t('date.formats.default'))
    end

    def due_time=(new_time)
        @due_time = self.string_to_datetime(new_time, I18n.t('time.formats.time'))
    end

    protected

    def string_to_datetime(value, format)
        return value unless value.is_a?(String)

        begin
            DateTime.strptime(value, format)
        rescue ArgumentError
            nil
        end
    end

end 
```

控制器：

```
class ReceiptsController < ApplicationController

  helper_method :sort_column, :sort_direction

  # GET /receipts
  # GET /receipts.json
  def index
    #@receipts = Receipt.all
    @receipts = current_user.receipts.order(sort_column + " " + sort_direction).paginate(:page => params[:page]).order('receiptissuedate DESC') 

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @receipts }     
    end
  end

  # GET /receipts/1
  # GET /receipts/1.json
  def show
    @receipt = current_user.receipts.find(params[:id])
    @products = current_user.receipts.find(params[:id]).products.all
    @product = Product.new

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @receipt }
    end
  end

  # GET /receipts/new
  # GET /receipts/new.json
  def new

    @receipt = Receipt.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @receipt }
    end
  end

  # GET /receipts/1/edit
  def edit
    @receipt = Receipt.find(params[:id])
  end

  # POST /receipts
  # POST /receipts.json
  def create
    @receipt = current_user.receipts.new(params[:receipt])

    respond_to do |format|
      if @receipt.save
        format.html { redirect_to receipts_url, notice: 'Receipt was successfully created.' }
        format.json { render json: @receipt, status: :created, location: @receipt }
      else
        format.html { render action: "new" }
        format.json { render json: @receipt.errors, status: :unprocessable_entity }
      end
    end
  end
  # PUT /receipts/1
  # PUT /receipts/1.json
  def update
    @receipt = current_user.receipts.find(params[:id])

    respond_to do |format|
      if @receipt.update_attributes(params[:receipt])
        format.html { redirect_to @receipt, notice: 'Receipt was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @receipt.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /receipts/1
  # DELETE /receipts/1.json
  def destroy
    @receipt = current_user.receipts.find(params[:id])
    @receipt.destroy

    respond_to do |format|
      format.html { redirect_to receipts_url }
      format.json { head :no_content }
    end
  end

  private

  def sort_column
    Receipt.column_names.include?(params[:sort]) ? params[:sort] : "receiptissuedate"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"
  end
end 
```

错误：

收据中的名称错误#new

显示 /Users/dastrika/Documents/RailsProjects/receipter/app/views/receipts/_form_new.html.erb 其中第 22 行提出：

未初始化的常量 Money::Currency::TABLE

提取的源代码（在第 22 行附近）：

19: <%= f.label :due_time, 'Zeit (optional)' -%> 20:
21: <%= f.time_select :due_time, { :class => "adsf"} %> 22:

23:

24: <%= f.select(:currency,all_currencies(Money::Currency::TABLE), {:include_blank => '选择货币'}) %> 25:

模板包含的痕迹：app/views/receipts/new.html.erb

Rails.root：/Users/dastrika/Documents/RailsProjects/receipter 应用程序跟踪 | 框架跟踪 | 全跟踪

app/views/receipts/_form_new.html.erb:22:in `block in _app_views_receipts__form_new_html_erb__159753442_6920660' app/views/receipts/_form_new.html.erb:11:in`_app_views_receipts__form_new_html_erb__159753442_6920660' app/views/receipts/new.html.erb:7:in `_app_views_receipts_new_html_erb__164008852_34408570' app/controllers/receipts_controller.rb:38:in`new'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:09:48.023

此语法不正确

```
Money::Currency::TABLE 
```

你要

```
all_currencies(Money::Currency.table)

def all_currencies(hash)
  hash.keys
end 
```

[http://rubymoney.github.com/money/](http://rubymoney.github.com/money/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T03:54:03.200

[运行ruby​​money 文档中](https://rubymoney.github.io/money/)的示例时，我收到了类似的错误消息

```
Money.new(1000, "USD") == Money.new(1000, Currency.new("USD"))
NameError: uninitialized constant Currency 
```

为了解决这个问题，我只是`Money::`在调用之前添加了`Currency`，如下所示：

```
Money.new(1000, "EUR").currency == Money::Currency.new("EUR")
=> true 
```

# java - 如何在 JCreator 中逐行运行 Java 项目？

> ID：10812234
> 
> 赞同：0
> 
> 时间：2012-05-30T07:58:38.777
> 
> 标签：java, breakpoints, jcreator

我需要在 JCreator 中逐行运行我的 java 项目。与在 VS 2010 中一样，我们设置了一个断点并在该点获取值，我想在 JCreator 中执行类似的任务。

在 JCreator 中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:10:32.187

如果您使用 JCreator 的免费版本，您将遇到严重的挑战，因为它缺少大多数在您开始开发后值得拥有的工具。

也许您最好使用免费的、完整的 IDE，例如[Eclipse](http://www.eclipse.org)或[NetBeans](http://www.netbeans.org)。当您不断将 JCreator 等轻量级工具与 Visual Studio 进行比较时，我只能猜测您想要大型 IDE 的全部优势。

# javascript - 关于 window.open 的奇怪 Opera 问题

> ID：10812237
> 
> 赞同：1
> 
> 时间：2012-05-30T07:59:03.890
> 
> 标签：javascript, opera

我正在设计一个新的小书签，并在 Opera 上对其进行测试。

这是我的代码：

```
javascript:(function(){var a=window.open('http://www.google.com','Ok','left='+((window.screenLeft||window.screenX)+10)+',top='+((window.screenY||window.screenTop)+0)+',height=200px,width=400px,resizable=1,alwaysRaised=1,location=1,links=0,scrollbars=0,toolbar=0');window.setTimeout(function(){a.focus()},250)})(); 
```

问题是新窗口没有出现在顶部，但距离顶部大约 200 像素（在其他浏览器，如 Internet Explorer、Firefox 和 chrome 中效果很好）。

那么，为什么这个窗口没有出现在 Opera 的顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:05:11.730

您的问题来自这样一个事实，即在 Opera 中，*window.screenY*和*window.screenTop*都已定义，并且*screenY*似乎总是等于 0，这在 JavaScript 中是一个[虚假](http://11heavens.com/falsy-and-truthy-in-javascript)值，所以

```
window.screenY||window.screenTop 
```

当您实际需要第一个值时，总是会在 Opera 中返回 window.screenTop。

正确的检查方法是：

```
'screenY' in window ? window.screenY : window.screenTop 
```

这是您的完整代码，我还更新了对*screenLeft* / *screenX*的检查：

```
javascript:(function(){var a=window.open('http://www.google.com','Ok','left='+(('screenLeft' in window ? window.screenLeft : window.screenX)+10)+',top='+(('screenY' in window ? window.screenY : window.screenTop)+0)+',height=200px,width=400px,resizable=1,alwaysRaised=1,location=1,links=0,scrollbars=0,toolbar=0');window.setTimeout(function(){a.focus()},250)})(); 
```

祝你好运。

# javascript - jQuery.css("width") 表格

> ID：10812241
> 
> 赞同：2
> 
> 时间：2012-05-30T07:59:21.917
> 
> 标签：javascript, jquery, html, html-table, width

问题是，我在 100px 上配置了第一个 th 的宽度。如果单击列的边框（您的意思是要调整它的大小）。有一个警报。在警报中是所有 th 的宽度，但它们很糟糕。看，第一个 th 的大小是 100 像素，但在警报中是其他值，例如 49 像素。我使用 Google Chrome 网络浏览器。请帮我！我在这里给出小提琴链接：

[http://jsfiddle.net/xjwVf/3/](http://jsfiddle.net/xjwVf/3/)

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:22:23.453

将您的固定宽度`<th>`的显示设置为`inline-block`，它将强制元素具有指定的宽度。

**[演示](http://jsfiddle.net/xjwVf/4/)**`

# matlab - 在matlab中添加两个不同阶的矩阵

> ID：10812244
> 
> 赞同：1
> 
> 时间：2012-05-30T07:59:33.057
> 
> 标签：matlab

我是matlab的新手。我读取了 42 X 25 阶的图像。我沿该图像的 x 轴和 y 轴求导。当我沿 x 轴求导时，图像的顺序变为 42 X 24，当我沿 Y 轴取时，图像的顺序变为 41 X 25。

现在我想添加这两个矩阵。但它们的顺序不同，所以我不能。但是，如果我在沿 x 轴的图像导数中附加零列，在沿 y 轴的图像导数中附加零行。这个东西可以制作相同顺序的矩阵。

```
I = imread('abc.jpg');

BW=im2bw(I,graythresh(I));

I_derived_x = diff(BW, 1, 2);
I_derived_y = diff(BW, 1, 1); 
```

现在我想做

```
SUM = I_derived_x + I_derived_y 
```

所以请帮助我确定这两个矩阵的顺序。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:20:36.550

用于计算导数很有用`diff`，但您必须理解它：`diff`本质上是计算前向有限差​​分；`N-1`因此，您只能从点中获得导数值是有道理的`N`。

你可以用零填充来解决它（这会搞砸你的边缘）

或者

对范围中间的点使用中心有限差分，对边缘上的点使用前向/后向有限差分。

更多信息：[http ://en.wikipedia.org/wiki/Finite_difference](http://en.wikipedia.org/wiki/Finite_difference)

编辑：在您的情况下，这将解决为：

```
I_derived_x = 0.5*[BW(:,2)-BW(:,1)  ,  0.5*(BW(:,3:end)-BW(:,1:end-2))  ,  BW(:,2)-BW(:,1)];
I_derived_y = 0.5*[BW(2,:)-BW(1,:)  ;  0.5*(BW(3:end,:)-BW(1:end-2,:))  ;  BW(2,:)-BW(1,:)]; 
```

它为您提供与 相同的网格上的导数`BW`。这很容易让您根据需要获取它们的总和

```
SUM = I_derived_x + I_derived_y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:32:26.827

我编写了函数`diffs`来解决这个问题。它执行与 相同的操作`diff`，但它用 填充输出`NaN`，使其大小与输入相同。如果您不想在输出中出现，您可以将调用替换为调用`NaN`。`zeros``NaN`

请注意，这不适用于更高维度的数组（即维度大于 2）。

```
function d = diffs(x,n,dim)
%"DIFF Difference the columns/rows of a matrix and return a result the same"
%"size as the original"

    if nargin < 2
        n = 1;
    end
    if nargin < 3
        dim = 1;
    end

    if dim == 2
        x = transpose(x);
    end

    k = size(x,2);
    d = [NaN(n,k); diff(x,n)];

    if dim == 2
        d = transpose(d);
    end

end 
```

您现在可以使用原始代码，将调用`diff`替换为调用`diffs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:32:42.673

是的，这很烦人。

*   正如建议的那样，您可以使用零填充 - 但我会使用 3 点导数。

*   `interp2`或者您可以插值，因为我会在数字之间的 1/2 处找到导数，编写命令应该很容易。您需要决定是否要推断边界 - 或者只是将其保留为 nan。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:45:52.907

通过研究[Mathworks](http://www.mathworks.com/help/toolbox/images/ref/padarray.html)，我找到了我正在寻找的解决方案。这是在矩阵中添加零行/列的方法。

```
I_derived_x = padarray(I_derived_x,[0 1],0,'post'); 
I_derived_y = padarray(I_derived_y,[1 0],0,'post'); 
```

在函数中，第一个参数是矩阵，第二个是顺序表示我想在矩阵中再添加一列并且没有行`I_derived_x`，第三个参数表示我想如何填充它，就像在我的情况下我希望它用零和最后一个参数填充指定新添加的行/列的方向，因为我想要它在矩阵的末尾，所以我`post`在这里使用。

# c++ - 从 Vector3f 访问数据

> ID：10812247
> 
> 赞同：0
> 
> 时间：2012-05-30T07:59:38.673
> 
> 标签：c++, ios

我想知道为什么我无法执行以下操作：

`std::cout << myMesh.faces[i].vertices[k].pos[k];`

错误：`Type 'Vector3f' does not provide a subscript operator`

我的结构：

```
struct ObjMeshVertex{
    Vector3f pos;
    Vector2f texcoord;
    Vector3f normal;
}; 
```

我的网格：

```
struct ObjMesh{
    std::vector<ObjMeshFace> faces;
};

struct ObjMeshFace{
    ObjMeshVertex vertices[3];
}; 
```

我无法以任何方式访问 pos。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:12:19.723

编译器告诉您`Vector3f`该类没有`operator[](some integral type)`您尝试在此处使用的 ：

```
myMesh.faces[i].vertices[k].pos[k]
                                ^ calling Vector3f::operator[](...) 
```

# asp.net-mvc - 使用 ASP.NET MVC 的 BlueImp jQuery 上传

> ID：10812248
> 
> 赞同：4
> 
> 时间：2012-05-30T07:59:43.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, jquery-plugins

我一直在为我正在开发的网站寻找合适的图像上传组件，它将启用多个图像上传，能够在上传后一一删除这些单独的上传，并且与 .NET MVC 配合得很好。

到目前为止，我见过的最好的组件是[BlueImp 的 jQuery Upload](https://blueimp.net/)，并从这里下载了示例 MVC 项目：

[https://github.com/maxpavlov/jQuery-File-Upload.MVC3](https://github.com/maxpavlov/jQuery-File-Upload.MVC3)

但是，我确实有两个问题要解决。

**问题 1**
在我的 Web 应用程序中，用户可以创建一个帖子，并且在他们输入帖子详细信息的同一页面上，在将此帖子提交到留言板之前，他们需要能够上传 1 个或多个图像（使用 jQuery File上传）。

上面 BlueImp 项目中的示例代码处理图像上传，因为文件存储在服务器上的适当位置，并且 UI 在成功上传后更新，以反映用户上传的那些图像。

但是，当用户实际提交他们的帖子时，在我的 Controller 的 ActionMethod 中，除了存储正常的帖子详细信息外，我还需要存储用户为他们的帖子上传的任何图像的详细信息（更具体地说是文件名），所以我可以将帖子详细信息与相关的 x 上传图像相关联。

在 ActionMethod 中获取此上传的图像信息以提交帖子的最佳方法是什么？我正在考虑将信息存储在 Session 对象中，然后我可以在“SubmitPost”ActionMethod 中进行嗅探，但如果我能提供帮助，我不喜欢依赖会话，但存在过期问题。我还考虑在数据库中有一个“UploadLog”表，其中包含该用户上传的尚未提交的图像（与帖子一起），但除非我有一些定期运行的内务处理过程，否则这可能会变得混乱? 我希望 jQuery Upload 提供的 Request 集合中可能有一些简单的东西，它列出了上传的图像的文件名，或者类似的东西？

**问题 2**
一旦我解决了上述问题，我想允许用户编辑他们现有的帖子，其中一些将上传与他们相关的照片。

当他们到达我的编辑帖子页面时，除了使用他们最初提供的帖子详细信息预填充页面上的所有控件之外，我还想显示他们为此帖子上传的图像列表，以及删除任何其中，或上传其他图像。

我可以在 BlueImp 示例 MVC 项目中看到，对于等待上传的图像和已成功上传的图像都有一个 jQuery 模板，但是我在示例应用程序中看不到如何填充此列表的任何示例在我刚刚描述的“编辑帖子”场景中成功上传了图像。

下面是我的视图中的模板，它呈现成功上传的图像，理想情况下，我希望在这个“EditPost”场景中重新填充。

```
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

对上述两个问题的任何帮助将不胜感激。

**更新**
问题 1 现在使用 Darin 的建议解决了，即创建一个 Guid，传递给视图，并在调用时返回到上传函数。

问题 2 我现在已经设法解决了，很快就会发布我的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:09:18.430

> **第一期**

您可以在呈现 Create 表单时创建一个新的 Guid。然后，当文件上传时，您会将它们存储在`Server.MapPath("~/Files/{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}")`文件夹中。然后，当提交表单时，唯一的 Guid 将作为隐藏字段发送，您将能够继续查看用户上传的所有文件的相应文件夹：

```
public ActionResult Create()
{
    var id = Guid.NewGuid();
    // pass this to the view
}

[HttpPost]
public ActionResult Upload(Guid id)
{
    // store the uploaded file at the specified by the GUID sub-folder
} 
```

> **第 2 期**

同样的技术，只需使用关联的 Guid 而不是创建一个新的：

```
public ActionResult Edit(Guid guid)
{
    // go and fetch all the files that are inside the corresponding folder
} 
```

# javascript - 为什么函数原型被重复链接？

> ID：10812254
> 
> 赞同：10
> 
> 时间：2012-05-30T07:59:58.403
> 
> 标签：javascript

我对 JavaScript 很陌生。我正在阅读 JavaScript 的优秀部分。它说 ：

> 每个函数对象也使用**原型**属性创建

所以我做了这样的事情：

```
function test() {
}

console.log(test.prototype); 
```

使用 Chrome 的开发者工具，我发现输出如下：

![在此处输入图像描述](../Images/97805253926bac0c4ab92330329f9b12.png)

我真的对这个输出感到困惑。为什么`constructor`'s`prototype`属性又嵌套了`constructor`呢？为什么这会像*链条*一样持续下去？我在哪里错过了这个概念？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T08:10:45.717

函数的`prototype`属性保存对象，当使用运算符创建时，该函数的所有实例都将从该对象继承`new`。所有这些原型对象（通常）都有一个`constructor`指向函数的属性——你有循环引用。因此，作为 a`new test()`继承该属性，`(new test).constructor === test`计算结果为`true`。

您需要区分`prototype`函数对象的属性和对象继承的原型对象——通常称为“内部`[[prototype]]`属性”。

构造函数是一个函数，更不用说 a 了`Function`，并且两者都有。因此它继承自`Function.prototype`对象——该`constructor`属性表示所有函数都是由`Function`构造函数构造的。如果您的开发人员控制台会显示`Function`对象的原型，您就可以看到它们。我认为设置中有一个选项。

因此，著名的“原型链”不是关于`constructor`和/或`prototype`属性，而是关于该对象继承自的原型对象：

```
 function test() {}              new test()
   (a Function)              (a test instance)
        ||                           ||
        ||                           ||
        \/                           \/
 Function.prototype            test.prototype
(a Function, by spec)           (an Object)
        ||                           ||
        ||                           ||
        \/                           \/
 Object.prototype             Object.prototype
        ||                           ||
        ||                           ||
        \/                           \/
       null                         null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:12:09.510

那是一本非常值得收藏的书。

从程序员的角度来看，它涵盖了更多的 javascript，涵盖了所有面向对象的技术，并且其中的大部分内容在任何其他关于 javascript 的书籍中都没有涵盖。

关于原型。JavaScript 中的每个对象都拥有一个隐藏的状态——对另一个被称为对象原型的对象的引用。JavaScript 中的原型对象为我们提供了继承，它们也允许我们共享方法实现。原型也连锁。换句话说，既然一个原型对象只是一个对象，那么一个原型对象可以维护对另一个原型对象的引用。

正如我在学习它时所经历的那样，Javascript 中的原型并不复杂。

这是了解 js 中原型如何工作的一个很好的[参考。](http://msdn.microsoft.com/en-us/magazine/ff852808.aspx)

# jquery - 悬停状态很古怪

> ID：10812255
> 
> 赞同：1
> 
> 时间：2012-05-30T08:00:02.163
> 
> 标签：jquery, css, jquery-selectors

我一直在研究一个下拉菜单，它对父母和孩子都有不同的颜色，当处于悬停状态时会发生变化：

[http://jsfiddle.net/cELJ6/1/](http://jsfiddle.net/cELJ6/1/)

不过，我对此有一个小怪癖。

`Home`链接很好，没有悬停时也很好`Products`。`Section2`

问题是：

1) 当我将鼠标悬停在 上`Product`时，链接的颜色需要为白色。（BG 颜色很好，工作正常）

2) 当我将鼠标悬停在子元素上时，例如`Product1`，则`Products`链接颜色需要为白色

`Products`在和之间徘徊`Section2`似乎很古怪。有时颜色是白色，有时是灰色 (#777)

有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:26:35.437

```
$('ul > li.leaf').each(function(){
    $(this).mouseenter(function(e){
        $(this).find('a').css('color','white');
    });
    $(this).mouseleave(function(e){
        $(this).find('a').css('color','#777777');
    });

   });

 $('.expanded > ul.leaf').each(function(){
    $(this).mouseenter(function(e){
        $(this).find('a').css('color','white');
    });
    $(this).mouseleave(function(e){
        $(this).find('a').css('color','#777777');
    });

   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:22:01.857

这不是怪癖，这就是您的代码的工作方式。

您的 javascript 中的颜色定义被应用为内联样式，它高于普通的 css 样式。这会应用灰色并导致怪癖。为什么你有javascript呢？

编辑：我将您的小提琴编辑为我认为您希望它的行为方式。我只是在`a`给出.`li``a` `color:inherit`

[http://jsfiddle.net/cELJ6/2/](http://jsfiddle.net/cELJ6/2/)

# iphone - UIViewController 中的阴影错误

> ID：10812260
> 
> 赞同：0
> 
> 时间：2012-05-30T08:00:36.277
> 
> 标签：iphone, ios, ios5

我正在使用此代码在 My ViewDidLoad 中的 UIViewcontroller 中获取阴影效果

```
// Add drop shadow to the view.
        CAGradientLayer *gradientLayer = [CAGradientLayer layer];
        gradientLayer.frame = CGRectMake(0, 0, 90, self.view.frame.size.height);
        gradientLayer.colors = [NSArray arrayWithObjects:
                                (id)[UIColor lightGrayColor].CGColor,
                                (id)[UIColor clearColor].CGColor,
                                nil];
        gradientLayer.startPoint = CGPointMake(-7, 0.1);
        gradientLayer.endPoint = CGPointMake(1, 0.15);   
        [self.view.layer addSublayer:gradientLayer]; 
```

我在视图中得到了正确的阴影，但问题是当我转到另一个视图控制器并返回时，每次显示都变得越来越暗。我使用 UIPopOverController 导航到另一个视图。

我的代码有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:19:47.220

不确定这是否有帮助，但是当我开始使用 UIPopOver 控制器时，我遇到了与您完全相同的情况。

这是因为每次我激活新的弹出框时，我都会一次又一次地覆盖它，而不是删除旧的。所以看起来阴影每次都变得越来越暗。

当您移动到另一个视图或将其留在后面时，您是要删除 PopOver 吗？

只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:57:55.620

我刚刚用你的确切代码运行了一些测试，它工作正常。我可以复制您遇到的问题的唯一方法是将您的代码放入其中一个`viewWillAppear:`或`viewDidAppear:`. 您是否有可能在其中任何一个绘制阴影的函数中有一些代码？

# php - 无法插入我的mysql数据库并且连接良好

> ID：10812262
> 
> 赞同：0
> 
> 时间：2012-05-30T08:00:51.923
> 
> 标签：php, mysql, fullcalendar

我在我的 Windows 服务器 2008 中有服务器 Mysql。PHP 工作，我测试我与我的数据库的连接，一切似乎都很好用 testmysql.php 示例：

```
<?PHP
//remember to change the password to whatever you set
//it to in mysql instance configuration

//first parameter is server name, 2nd username 'root', 3rd is password
$rst = @mysql_connect("localhost:3306","root","admin");

if (!$rst){
     echo( "<p>Unable to connect to database manager.</p>");
       die('Could not connect: ' . mysql_error());
     exit();
} else {
  echo("<p>Successfully Connected to MySQL Database Manager!</p>");
}

if (! @mysql_select_db("fullcalendar") ){
     echo( "<p>Unable to  connect database...</p>");
     exit();
} else {
  echo("<p>Successfully Connected to Database 'fullcalendar'!</p>");
}
?> 
```

结果：成功连接到 MySQL 数据库管理器！

成功连接到数据库'fullcalendar'！

和我的文件 db.config.php

```
 <?php
/*
 * Created on 17-okt-2011
 * author Paul Wolbers
 */

function database_connect() {
    global $obj_db;

    if($_SERVER["HTTP_HOST"] == 'localhost:3306') {
        $str_hostname = 'localhost:3306';
        $str_username = 'root';
        $str_password = 'admin';
        $str_database = 'fullcalendar';
    } else {
        $str_hostname = 'localhost:3306';
        $str_username = 'root';
        $str_password = 'admin';
        $str_database = 'fullcalendar';
    }

    $obj_db = mysqli_connect($str_hostname, $str_username, $str_password, $str_database);
    if($obj_db === FALSE) {
        $error= "Database connection failed";
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
    mysqli_set_charset( $obj_db , 'utf8' );
}
?> 
```

我的 cal_events.php

```
<?php
/*
 * Created on 17-okt-2011
 * author Paul Wolbers
 *
 */
require_once '../include/default.inc.php';
//require_once '../config/db.config.php';
//database_connect();

// test with session user_id
$_SESSION['user_id'] = 1;

switch($_GET['action']) {
    case 'add':
        addEvent();
        break;
    case 'start':
        getEvents();
        break;
//  case 'get_agenda':
//      getEventsStartingToday();
//      break;
//  case 'update_title':
//      updateEventTitle();
//      break;
    case 'update':
        updateEvent();
        break;
    case 'resize':
        resizeEvent();
        break;
    case 'del':
        deleteEvent();
        break;
}

function getEvents() {
    global $obj_db;

    $str_query = 'SELECT *, event_id as id, concat_ws(" ",date_start,time_start) as start,concat_ws(" ",date_end,time_end) as end FROM events ';
    $obj_result = mysqli_query($obj_db, $str_query);

    while ($arr_line = mysqli_fetch_array($obj_result, MYSQLI_ASSOC)) {
        $arr_line['allDay']     = $arr_line['allDay'] == 0 ? false : true;
        $arr_line['editable']   = $arr_line['user_id'] == $_SESSION['user_id'] ? true : false;

        $arr_content[] = $arr_line;

    }

    echo json_encode($arr_content);
}

function getDaysBetween($sStartDate, $sEndDate){
    $sStartDate     = date("Y-m-d", strtotime($sStartDate));
    $sEndDate       = date("Y-m-d", strtotime($sEndDate));
    $aDays[]        = $sStartDate;
    $sCurrentDate   = $sStartDate;

    while($sCurrentDate < $sEndDate){
        $sCurrentDate = date("Y-m-d", strtotime("+1 day", strtotime($sCurrentDate)));
        $aDays[] = $sCurrentDate;
    }
    return $aDays;
}

function getEventsStartingToday() {
    global $obj_db;

    $str_query = 'SELECT * , event_id AS id, concat_ws( " ", date_start, time_start ) AS
                    START , concat_ws( " ", date_end, time_end ) AS
                    END FROM events WHERE date_start >= DATE( NOW( ) )
                    OR (
                    date_start < DATE( NOW( ) )
                    AND date_end > DATE( NOW( ) )
                    )
                    ORDER BY date_start ';
    $obj_result = mysqli_query($obj_db, $str_query);

    while ($arr_line = mysqli_fetch_array($obj_result, MYSQLI_ASSOC)) {
        $arr_content[] = $arr_line;

    }
//print_r($arr_content);
    $arr_result = array();

    foreach($arr_content as $event) {
        // meerdaags event
        if($event['date_end'] != $event['date_start']) {

            $days_in_between = getDaysBetween($event['date_start'], $event['date_end']);
            foreach($days_in_between as $day) {
                $arr_result[$day][] = $event;
            }

        } else {
            $arr_result[$event['date_start']][] = $event;
        }
    }

    $obj_smarty = new Smarty();
    $obj_smarty->compile_dir = '../templates_c/';

    $obj_smarty->assign('items', $arr_result);

    $obj_smarty->display(FULLCAL_DIR.'/view/agenda.html');
}

function addEvent() {

    global $obj_db;
    if(!isset($_POST['date_end'])) {
        $_POST['date_end'] = $_POST['date_start'];
    }
    if(!isset($_POST['color'])) {
        $_POST['color'] = '';
    }
    $str_query = 'INSERT INTO events (title, user_id, color, date_start, time_start, date_end, time_end, allday) ' .
            'VALUES ("'.$_POST['title'].'",
                    '.$_SESSION['user_id'].',
                    "'.$_POST['color'].'",
                    "'.date('Y-m-d', $_POST['date_start']).'",
                    "'.date('H:i:s', $_POST['date_start']).'",
                    "'.date('Y-m-d', $_POST['date_end']).'",
                    "'.date('H:i:s', $_POST['date_end']).'"'.
                    (date('H:i:s', $_POST['date_start']) == '00:00:00' && date('H:i:s', $_POST['date_end']) == '00:00:00' ? ' ,1' : ' ,0').')';
    $obj_result = mysqli_query($obj_db, $str_query);

    $str_query = 'SELECT *, event_id as id, concat_ws(" ",date_start,time_start) as start,concat_ws(" ",date_end,time_end) as end ' .
            'FROM events WHERE event_id = '.mysqli_insert_id($obj_db);
    $obj_result = mysqli_query($obj_db, $str_query);
    $arr_event = mysqli_fetch_array($obj_result, MYSQLI_ASSOC);

    $arr_event['allDay']    = $arr_event['allDay'] == 0 ? false : true;
    $arr_event['editable']  = $arr_event['user_id'] == $_SESSION['user_id'] ? true : false;

    echo json_encode(array('success'=>true, 'event'=>$arr_event ));exit;

}

//function updateEventTitle() {
//  global $obj_db;

//  $str_query = 'UPDATE events SET title = "'.$_POST['title'].'" WHERE event_id = '.$_POST['event_id'].' AND user_id = '. $_SESSION['user_id'];
//  $obj_result = mysqli_query($obj_db, $str_query);

//  echo json_encode(array('success'=>true));exit;
//}

function updateEvent() {
    global $obj_db;

    $str_query = 'UPDATE events SET date_start = "'.date('Y-m-d', $_POST['date_start']).'" ' .
            (isset($_POST['title']) ? ', title = "'.$_POST['title'].'"' : '').
                (isset($_POST['color']) && $_POST['color'] != 'undefined' ? ', color = "'.$_POST['color'].'"' : '').
            ', date_end = "'.date('Y-m-d', $_POST['date_end']).'" ' .
            ', time_start = "'.date('H:i:s', $_POST['date_start']).'" ' .
            ', time_end = "'.date('H:i:s', $_POST['date_end']).'" ' .
            ((isset($_POST['allDay']) && $_POST['allDay']) || (date('H:i:s', $_POST['date_start']) == '00:00:00' && date('H:i:s', $_POST['date_end']) == '00:00:00') ? ' ,allDay = 1' : ' ,allDay = 0').
                ' WHERE event_id = '.$_POST['event_id'].' AND user_id = '. $_SESSION['user_id'];
    $obj_result = mysqli_query($obj_db, $str_query);

    $str_query = 'SELECT *, event_id as id, concat_ws(" ",date_start,time_start) as start,concat_ws(" ",date_end,time_end) as end ' .
            'FROM events WHERE event_id = '.$_POST['event_id'];
    $obj_result = mysqli_query($obj_db, $str_query);
    $arr_event = mysqli_fetch_array($obj_result, MYSQLI_ASSOC);

    $arr_event['allDay']    = $arr_event['allDay'] == 0 ? false : true;
    $arr_event['editable']  = $arr_event['user_id'] == $_SESSION['user_id'] ? true : false;

    echo json_encode(array('success'=>true, 'event'=>$arr_event ));exit;
}

function resizeEvent() {
    global $obj_db;

    $str_query = 'UPDATE events SET date_start = "'.date('Y-m-d', $_POST['date_start']).'" ' .
            ', date_end = "'.date('Y-m-d', $_POST['date_end']).'" ' .
            ', time_start = "'.date('H:i:s', $_POST['date_start']).'" ' .
            ', time_end = "'.date('H:i:s', $_POST['date_end']).'" ' .
                ' WHERE event_id = '.$_POST['event_id'].' AND user_id = '. $_SESSION['user_id'];
    $obj_result = mysqli_query($obj_db, $str_query);

    echo json_encode(array('success'=>true));exit;
}

function deleteEvent() {
    global $obj_db;

    $str_query = 'DELETE FROM events WHERE event_id = '.$_POST['event_id'].' AND user_id = '. $_SESSION['user_id'];
    $obj_result = mysqli_query($obj_db, $str_query);

    echo json_encode(array('success'=>true));exit;
}
?> 
```

我的 index.php

```
<?php
/*
 * Created on 17-okt-2011
 * author Paul Wolbers
 */

require_once 'include/default.inc.php';

if(isset($_GET['action'])) {
    switch($_GET['action']) {
        case 'agenda':
            showAgenda();
            break;
        case 'agenda_widget':
            showAgenda(true);
            break;
        case 'timeline':
            showTimeline();
            break;
        case 'get_timeline_events':
            getTimelineEvents();
            break;

  }
} else {
    $obj_smarty->display(FULLCAL_DIR.'/view/cal.html');
}

function getDaysBetween($sStartDate, $sEndDate){
    $sStartDate     = date("Y-m-d", strtotime($sStartDate));
    $sEndDate       = date("Y-m-d", strtotime($sEndDate));
    $aDays[]        = $sStartDate;
    $sCurrentDate   = $sStartDate;

    while($sCurrentDate < $sEndDate){
        $sCurrentDate = date("Y-m-d", strtotime("+1 day", strtotime($sCurrentDate)));
        $aDays[] = $sCurrentDate;
    }
    return $aDays;
}

function showAgenda($bln_widget=false) {
    global $obj_db;

    $str_query = 'SELECT * , event_id AS id, concat_ws( " ", date_start, time_start ) AS
                    START , concat_ws( " ", date_end, time_end ) AS
                    END FROM events WHERE date_start >= DATE( NOW( ) )
                    OR (
                    date_start < DATE( NOW( ) )
                    AND date_end >= DATE( NOW( ) )
                    )
                    ORDER BY date_start ';
    $obj_result = mysqli_query($obj_db, $str_query);

    while ($arr_line = mysqli_fetch_array($obj_result, MYSQLI_ASSOC)) {
        $arr_content[] = $arr_line;

    }
//print_r($arr_content);
    $arr_result = array();

    foreach($arr_content as $event) {
        // meerdaags event
        if($event['date_end'] != $event['date_start']) {

            $days_in_between = getDaysBetween($event['date_start'], $event['date_end']);
            foreach($days_in_between as $day) {
                if(strtotime($day) >= strtotime(date("Y-m-d"))) {
           $arr_result[$day][] = $event;
        }

            }

        } else {
            $arr_result[$event['date_start']][] = $event;
        }
    }
    //print_r($days_in_between);exit;
    //print_r($arr_result);

    $obj_smarty = new Smarty();
    $obj_smarty->compile_dir = 'templates_c/';

    $obj_smarty->assign('items', $arr_result);

    if($bln_widget) {
        $obj_smarty->display(FULLCAL_DIR.'/view/agenda_small.html');
    } else {
        $obj_smarty->display(FULLCAL_DIR.'/view/agenda.html');
    }
}

function showTimeline() {

    $obj_smarty = new Smarty();
    $obj_smarty->compile_dir = 'templates_c/';

    //$obj_smarty->assign('items', $arr_result);

    $obj_smarty->display(FULLCAL_DIR.'/view/timeline.html');

}

function getTimelineEvents() {
//[{{
//    "id": "jshist",
//    "title": "A little history of JavaScript",
//    "focus_date": "2001-01-01 12:00:00",
//    "initial_zoom": "43",
//    "timezone": "-07:00",
//    "events": [
//    {
//      "id": "jshist-01",
//      "title": "Mocha - Live Script",
//      "description": "JavaScript was originally developed by Brendan Eich of
//                Netscape under the name Mocha. LiveScript was the official name for the
//                language when it first shipped in beta releases of Netscape Navigator 2.0
//                in September 1995",
//      "startdate": "1995-04-01 12:00:00",
//      "enddate": "1995-04-01 12:00:00",
//      "date_display": "month",
//      "link": "http://en.wikipedia.org/wiki/JavaScript",
//      "importance": 40,
//      "icon":"square_blue.png"
//     },
//     {
//      "id": "jshist-02",
//      "title": "JavaScript is Born",
//      "description": "LiveScript is Renamed JavaScript in a joint
//                announcement with Netscape and Sun Microsystems",
//      "startdate": "1995-12-04 12:00:00",
//      "enddate": "1995-12-04",
//      "date_display": "day",
//      "link": "http: //en.wikipedia.org/wiki/JavaScript",
//      "importance": 50,
//      "icon":"triangle_orange.png"
//    }
//  ]
//  }
//]
    global $obj_db;

    $arr_content = array("id"=> "jshist",
        "title"=> "test",
        "focus_date"=> "2012-01-01 12:00:00",
        "initial_zoom"=> "20",
        "timezone"=> "+01:00"
        );

    $str_query = 'SELECT *, event_id as id, concat_ws(" ",date_start,time_start) as startdate,concat_ws(" ",date_end,time_end) as enddate FROM events ';
    $obj_result = mysqli_query($obj_db, $str_query);

    while ($arr_line = mysqli_fetch_array($obj_result, MYSQLI_ASSOC)) {
        $arr_line['importance'] = 20;
        $arr_events[] = $arr_line;

    }

    $arr_content['events'] = $arr_events;
    echo json_encode(array($arr_content));

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:18:15.443

您已经注释掉了`cal_events.php`连接到数据库的开头的行：

```
//require_once '../config/db.config.php';
//database_connect(); 
```

没有它们，`addEvent()`使用该`$obj_db`变量的函数将无法工作，因为它不会被定义。

# java - 实现迭代器时抛出异常出错

> ID：10812263
> 
> 赞同：1
> 
> 时间：2012-05-30T08:01:01.760
> 
> 标签：java, exception, stack, binary-search-tree

这是我家庭作业的一部分，因为我想不通，所以我想我会试着在这里问。

我正在尝试使用堆栈在 BST 上实现迭代器。我让它编译并正确运行，结果似乎也是正确的。

但是，当我尝试使用学校的自动标记时，它允许我提交代码，系统将使用其模型进行检查。运行迭代器时出现以下错误：

> !分析停止：您的代码产生了不正确的输出，未能抛出异常，或在不应该抛出异常时抛出异常。
> 
> java.lang.Exception：您的代码产生了不正确的输出，未能抛出异常，或者在不应该抛出异常时抛出了异常。在 LabProject.main(LabProject.java:115)

我很确定（正如它所说）我在下面的实现中抛出异常时遇到了麻烦，或者我可能在某些时候错过了抛出它们。我检查了好几次，似乎无法正确。有人能看到我需要做什么吗？

这是代码：

```
public class DictionaryItr<E extends Comparable<E>> implements Iterable<E> {

    private MyNode first; // top of stack
    public int modCount = 0;

    // helper linked list class
    private class MyNode {
        private E item;
        private MyNode next;
    }

    public DictionaryItr(DictionaryImp.DictNode root) {
        first = null;
        this.loadNodes(root);
    }

    @SuppressWarnings("unchecked")
    public void loadNodes(DictionaryImp.DictNode node) {
        if (node != null) {
            loadNodes(node.right);
            this.push((E)node.value);
            loadNodes(node.left);
        }
    }

    public boolean isEmpty() {
        return first == null;
    }

    public void push(E item) {
        MyNode oldfirst = first;
        first = new MyNode();
        first.item = item;
        first.next = oldfirst;
        modCount++;
    }

    public E pop() {
        if (isEmpty()) throw new RuntimeException("Stack underflow");
        E item = first.item;
        first = first.next;
        return item;
    }

    public E peek() {
        if (isEmpty()) throw new RuntimeException("Stack underflow");
        return first.item;
    }

    public Iterator<E> iterator() {
        return new ListIterator();
    }

    private class ListIterator implements Iterator<E> {
        private MyNode current = first;
        private int expectedModCount;

        public ListIterator() {
            expectedModCount = modCount;
        }

        public boolean hasNext() { 
            return current != null;
        }

        public void remove() {
            current = current.next;
        }

        public E next() {
            if (modCount != expectedModCount) throw new ConcurrentModificationException();
            if (!hasNext()) throw new NoSuchElementException("No more elements");
            else {
                E item = current.item;
                current = current.next;
                return item;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:02:27.033

如果未实现remove 方法，则必须抛出异常`UnsupportedOperationException`，或者，这是您的情况，如果已实现，`IllegalStateException`如果您在调用 next() 之前调用 remove() 方法至少一次，或者如果您没有要删除的元素（当前属性为空）。您可以在此处查看详细信息：http: [//docs.oracle.com/javase/6/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)

此外，remove() 方法将`NullPointerException`在最后一次调用 next() 方法之后抛出一个 if (hasNext() == false)，并且如前所述，它必须抛出一个`IllegalStateException`

我认为这些是你遇到的问题。

# asp.net - Paypal 的 SSL/TLS 问题

> ID：10812264
> 
> 赞同：0
> 
> 时间：2012-05-30T08:01:05.453
> 
> 标签：asp.net, ssl-certificate, paypal

我们正在使用 ASP.net 3.5 并将 Paypal Pro 集成到我们客户的网站之一中。暂存环境和凭据工作正常，但是当我们将其移至 Live 环境时，我们开始收到“无法为 SSL/TLS 建立具有权限‘api-aa.paypal.com’的安全通道。” 例外。

*   我们已经使用其各自的私钥在服务器上安装了我们的证书。
*   “所有人”已被授予私钥权限

我们已经为这个奇怪的问题苦苦挣扎了很长一段时间，但并没有真正成功。有小费吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:04:09.043

事实证明，我们只需要切换到不同的 Paypal URL 就可以了。这是我们使用的 URL，它就像一个魅力 - [https://api-aa-3t.paypal.com/2.0/](https://api-aa-3t.paypal.com/2.0/)

# android - 在运行时为 GUI PreferenceActivity 设置默认值

> ID：10812267
> 
> 赞同：2
> 
> 时间：2012-05-30T08:01:14.180
> 
> 标签：android

我有以下 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
        android:title="@string/preference_xxx_category">
        <CheckBoxPreference
            android:title="@string/preference_xxx_dual_mode_title"
            android:summary="@string/preference_xxx_dual_mode_summary"
            android:key="xxxDualModePreference" />
    </PreferenceCategory>    
</PreferenceScreen> 
```

我使用 GUI 将其加载为以下代码

```
public class Preferences extends SherlockPreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);

        this.getPreferenceManager().findPreference("xxxDualModePreference").setDefaultValue(Utils.isDualCoreDevice());
        this.getPreferenceManager().findPreference("xxxDualModePreference").setEnabled(Utils.isDualCoreDevice());

        // Once the GUI is shown, I realize my preference UI check box is not being ticked. 
```

**默认值应取决于设备 CPU 内核的数量。这就是为什么我不能在 XML 中指定默认值的原因。**

但是，如果我在 Java 代码中指定默认值，我会意识到 UI 没有反映它，尽管这是我第一次启动我的应用程序。

还有其他我错过的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:59:16.977

我认为您并没有完全理解我在评论中想说的话，所以我将在下面举一个例子。正如已经指出的那样：调用`setDefaultValue(...)`实际上不会刷新/无效/更新`Preference`.

您真正追求的（至少我认为......）不仅设置“启用”状态，还设置“检查”状态。基本上，您想从首选项中获取该首选项的值，或者使用其他结果`Utils.isDualCoreDevice()`。这看起来有点像这样：

```
CheckBoxPreference dualCoreModePref = (CheckBoxPreference) getPreferenceManager().findPreference("xxxDualModePreference");
dualCoreModePref.setEnabled(Utils.isDualCoreDevice());
dualCoreModePref.setChecked(getPreferenceManager().getSharedPreferences().getBoolean(dualCoreModePref.getKey(), Utils.isDualCoreDevice())); 
```

魔术在最后一行：检索首选项的值并使用实用程序方法的结果作为默认值。在初始启动后，或者如果用户更改设置，布尔值将被添加到首选项中，因此将不再使用默认值。

剩下的就是自己决定如果设备是单核的，是否要显示复选标记。目前会。

# java - 在 JAVA 中，使用 setDisplayMode 更改全屏应用程序的分辨率

> ID：10812268
> 
> 赞同：0
> 
> 时间：2012-05-30T08:01:23.943
> 
> 标签：java, jframe, fullscreen, resolution

我是 JAVA 语言的初学者，正在尝试学习如何创建全屏应用程序。

我正在尝试创建一个简单的应用程序，在该应用程序运行时，显示带有蓝色背景的全屏和屏幕中心的简单文本行（它从位置 400x300 开始）。应用程序的分辨率设置为 800x600。

我在 MacbookAir 上运行代码，运行 OSX Lion，屏幕分辨率为 1440x900。问题是，尽管得到了我预期的蓝色背景，但文本只出现在屏幕的左上角。当我增加它的位置时，文本的位置将继续向下和向右移动，直到它消失时超过 1440x900。我猜屏幕分辨率仍然设置为 1440x900，而不是 800x600。

这是我的主要课程：

```
import java.awt.*;
import javax.swing.JFrame;

public class bucky extends JFrame {
    public static void main(String[] args){

        DisplayMode dm = new DisplayMode(800, 600, 16, DisplayMode.REFRESH_RATE_UNKNOWN);
        bucky b = new bucky();
        b.run(dm);
    }

    public void run(DisplayMode dm){
        setBackground(Color.BLUE); // Setting background color
        setForeground(Color.WHITE);
        setFont(new Font("Arial", Font.PLAIN, 24));

        //The Screen variable is going to be a screen object
        Screen s = new Screen();
        try{
            s.setFullScreen(dm, this); //this refers to whatever object we are working on, ie 's'
            try{
                //Once it is set to full screen, and wait for 5 second
                Thread.sleep(5000);
            }catch(Exception ex){};
        }
        finally{
            s.restoreScreen();
        }
    }

    public void paint(Graphics g){
        g.drawString("Test", 400, 300);
    }

} 
```

这是 Screen 类的构造函数和 Screen 类中的方法，它将应用程序设置为全屏

```
private GraphicsDevice vc; // Gives an interface to graphics card/video card.

public Screen(){
    //env is environment variable, containing all graphics manipulation objects
    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();

    //When we get environment and getDegaultScreen Device, we get access to the entire monitor, not just a window
    vc = env.getDefaultScreenDevice();

}

public void setFullScreen(DisplayMode dm, JFrame window){ 

        window.setUndecorated(true); 
        window.setResizable(false); 
        vc.setFullScreenWindow(window); 

        if(dm != null && vc.isDisplayChangeSupported()) {
            try{
                vc.setDisplayMode(dm); 
            }catch(Exception ex){}
        }

    } 
```

如果有人能指出我为什么没有正确设置分辨率，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:41:09.633

[来自setDisplayMode](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsDevice.html#setDisplayMode%28java.awt.DisplayMode%29)的文档

> 显示模式必须是 getDisplayModes() 返回的显示模式之一，但有一个例外：传递具有 DisplayMode.REFRESH_RATE_UNKNOWN 刷新率的显示模式将导致从可用显示模式列表中选择具有匹配宽度、高度和位深度。

因此，您需要确保将显示模式设置为其中一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:20:50.590

我认为答案在[GraphicsDevice.setDisplayMode(...)](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsDevice.html#setDisplayMode%28java.awt.DisplayMode%29)的 javadoc 中。您应该首先检查`if (gd.isFullScreenSupported())`然后调用`setFullScreenWindow(frame)`或使用方法模拟全屏模式`frame.setSize(...)`。

# .net - 如何使用 .net 正则表达式替换此字符串？

> ID：10812269
> 
> 赞同：0
> 
> 时间：2012-05-30T08:01:25.927
> 
> 标签：.net, regex, replace

我想将此字符串替换 `2000-12-13T13:59:59+12:00` 为 `2000-12-13 13:59:59`

这可能吗？，我不能使用通用替换是因为这个值与其他字符串/消息混合在一起，所以我需要搜索要替换的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:06:19.617

**尝试这个**

```
\+\d{2}:\d{2}$ 
```

**代码**

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, @"\+\d{2}:\d{2}$", "$${retain}", RegexOptions.IgnoreCase);
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:11:28.997

```
MessageBox.Show(Regex.Replace(
    @"2000-12-13T13:59:59+12:00",
    @"\b(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})[+-]\d{2}:\d{2}\b",
    @"$1 $2"
)); 
```

**upd**：在模式周围添加了单词边界，一些解释和一些链接

```
\b                - word boundary (not to match "12000-12-13T..." or "X2000-12-13T..." etc, but still to match "(2000-12-13T..." and the like, optional)
(                 - start first capturing ($1)
\d{4}-\d{2}-\d{2} - date; 4 digits, dash, 2 digits, dash, 2 digits (\d for digit, {N} for exactly N of them)
)                 - end first capturing ($1)
T                 - literal "T"
(                 - start second capturing ($2)
\d{2}:\d{2}:\d{2} - time; 2 digits, colon, 2 digits, colon, 2 digits
)                 - end second capturing ($2)
[+-]              - utc offset sign; any of literal "+" or "-" (be careful with "-" inside [], if between other characters it defines range, like [a-z])
\d{2}:\d{2}       - utc offset; 2 digits, colon, 2 digits
\b                - word boundary (not to match "...+12:000" or "...+12:00a" etc, optional) 
```

资源：[在一般的正则表达式上](http://www.regular-expressions.info/tutorial.html)，[在 .net](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)上，[特别是在 C# 上](http://oreilly.com/windows/archive/csharp-regular-expressions.html)，[用于测试的简单工具](http://gskinner.com/RegExr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:18:38.753

使用正则表达式

```
(.*)\s(\d{4}\-\d{2}\-\d{2})T(\d{2}:\d{2}:\d{2})\+\d{2}:\d{2}\s(.*) 
```

和下面的代码

```
var regexPattern = @"(.*)\s(\d{4}\-\d{2}\-\d{2})T(\d{2}:\d{2}:\d{2})\+\d{2}:\d{2}\s(.*)";

        var dateString = "Some text here 2000-12-13T13:59:59+12:00 And some more text here";

        var formattedString = Regex.Replace(dateString, regexPattern, "$2 $3", RegexOptions.IgnoreCase); 
```

将输出

```
2000-12-13 13:59:59 
```

正则表达式相当严格，因此您应该能够从其他文本中获取它，只要它始终采用该格式 - 如果格式完全改变（时间或日期中的单个数字），那么它将不匹配，但是如果没有上下文，很难说这是否是一个问题。它还假设该模式在文本中只出现一次，并且它有一个前后空格。

# python - 从 django sweetpie 中的多个表返回 json 输出

> ID：10812271
> 
> 赞同：2
> 
> 时间：2012-05-30T08:01:32.083
> 
> 标签：python, django, orm, tastypie, django-queryset

我已经扩展`django User`了我的自定义字段，现在我需要从自定义表中返回一个 json 输出以及`username`表单父表。

我在查询集中尝试了 select_related 但它没有返回`username`

楷模

```
class ExProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    cell_phone = models.CharField(max_length=200, blank=True)
    api_key=      models.CharField(max_length=200, blank=True)
    termination_date=models.DateField()
    picture=models.ImageField(upload_to='profile',blank=True)
    email=models.EmailField()
    homeAddress=models.CharField(max_length=200,blank=True)
    homeNumber=models.CharField(max_length=200,blank=True) 
```

资源

```
class ProfileResource(ModelResource):

    class Meta:
         # the queryset below is working like ExProfile.objects.all() as it is not
         # returning username in json   
         queryset =ExProfile.objects.select_related('User').all()
         resource_name = 'entry'
         fields = ['username','api_key','email','homeAddress']   
         #authorization = Authorization()
         #authentication = MyAuthentication()
         filtering = {
             'api_key': ALL,
             'homeAddress': ALL,
             'email': ALL,
             'query': ['icontains',],
             }
         def apply_filters(self, request, applicable_filters):
                base_object_list = super(ProfileResource, self).apply_filters(request, applicable_filters)

                query  = request.META.get('HTTP_AUTHORIZATION')
                if query:
                    qset = (
                        Q(api_key=query)
                        )
                    base_object_list = base_object_list.filter(qset).distinct()

                return base_object_list 
```

我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T09:31:15.010

您不需要在这里选择相关。

如果你只想要用户名而不是用户对象添加一个属性字段，你可以做正常的 Django __ 关系，例如

```
class ProfileResource(ModelResource):
    uname = fields.CharField(attribute='user__username', readonly=True)
    class Meta:
        queryset =ExProfile.objects.all()
        .... 
```

# python - 在迭代列表时修改列表 - 为什么不呢？

> ID：10812272
> 
> 赞同：3
> 
> 时间：2012-05-30T08:01:35.063
> 
> 标签：python, list

几乎每个关于该主题的教程和 SO 答案都坚持认为您永远不应该在迭代列表时修改列表，但如果代码有效，我不明白为什么这是一件坏事。例如：

```
while len(mylist) > 0:
    print mylist.pop() 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T08:02:24.617

```
while len(mylist) > 0:
    print mylist.pop() 
```

您没有遍历列表。您每次都在检查原子条件。

还：

```
while len(mylist) > 0: 
```

可以改写为：

```
while len(mylist): 
```

可以重写为：

```
while mylist: 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T08:16:28.410

为什么你不应该在迭代列表时修改它的原因是，例如，你正在迭代一个 20 位数字的列表，如果你碰到一个偶数，你就会把它从列表中弹出并继续直到你有一个列表只是奇数。

现在，假设这是您的示例数据`[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]`，然后您开始对其进行迭代。第一次迭代，数字是`1`你继续，下面的数字是`2`你弹出它，冲洗并重复。您现在感觉应用程序工作正常，结果列表为`[1, 3, 5, 7, 9, 11, 13, 15, 17, 19]`.

现在假设您的示例数据是`[1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 15, 15, 17, 18, 20]`，并且您运行与以前相同的代码，并在迭代原始列表时对其进行变异。您的结果列表`[1, 4, 5, 7, 10, 11, 13, 15, 15, 17, 20]`显然不正确，因为列表中仍然包含偶数。

如果您打算在像这样迭代列表时改变列表

```
for elem in lst:
    # mutate list in place 
```

您应该将其更改为

```
for elem in lst[:]:
    # mutate list in place 
```

该`[:]`语法创建一个新列表，它是原始列表的精确副本，因此您可以愉快地改变原始列表而不会影响您正在处理的内容，因为您不会因改变您正在处理的列表而产生任何意外的副作用迭代通过。

如果您的列表相当大，那么与其创建一个新列表并逐步执行它，不如考虑使用生成器表达式或为您的列表编写自己的生成器，这样您就不会浪费内存和 CPU 周期。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-30T08:35:23.080

我将更详细地介绍*为什么*您不应该遍历列表。当然，我的意思是

```
for elt in my_list:
    my_list.pop() 
```

或类似的成语。

首先，我们需要考虑 Python 的`for`循环是做什么的。因为你可以尝试迭代任何对象，Python 不一定知道*如何*迭代你给它的任何东西。所以有一个列表（呵呵）它试图做的事情来解决如何一个一个地呈现这些值。它做的第一件事是检查`__iter__`对象上的方法，如果存在的话，就调用它。

这个调用的结果将是一个*可迭代*的对象；也就是一个有`next`方法的。现在我们可以开始了：只需`next`反复跟注，直到`StopIteration`被加注。

为什么这很重要？好吧，因为该`__iter__`方法实际上必须查看数据结构以查找值，并记住一些内部状态，以便它知道下一步该往哪里看。但是如果你改变了数据结构，那么`__iter__`你就无法知道你一直在摆弄，所以它会愉快地继续尝试获取新数据。这在实践中意味着您可能会跳过列表中的元素。

* * *

通过查看源代码来证明这种说法总是很好的。来自`listobject.c`：

```
static PyObject *
listiter_next(listiterobject *it)
{
    PyListObject *seq;
    PyObject *item;

    assert(it != NULL);
    seq = it->it_seq;
    if (seq == NULL)
        return NULL;
    assert(PyList_Check(seq));

    if (it->it_index < PyList_GET_SIZE(seq)) {
        item = PyList_GET_ITEM(seq, it->it_index);
        ++it->it_index;
        Py_INCREF(item);
        return item;
    }

    Py_DECREF(seq);
    it->it_seq = NULL;
    return NULL;
} 
```

请特别注意，它确实模拟了 C 风格的`for`循环，并`it->it_index`扮演了索引变量的一部分。特别是，如果您从列表中删除一个项目，那么您将不会更新`it_index`，因此您可能会跳过一个值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T08:02:50.017

您的代码不会遍历列表。

```
for i in mylist:
  print mylist.pop() 
```

# sql - 带有 '+' 表达式的 GROUP BY

> ID：10812277
> 
> 赞同：1
> 
> 时间：2012-05-30T08:02:06.207
> 
> 标签：sql, oracle

`GROUP BY`我的陈述有问题。

我有一张桌子测试： ![在此处输入图像描述](../Images/2397efd68d8b2330697561d891cff017.png)

我想执行以下选择语句：

```
select sum(a)
from TEST
group by a+b 
```

结果如下：

```
SUM(A)
3
1
3 
```

它有效，但我不知道为什么。a+b 对`GROUP BY`语句的作用是什么？

谢谢。

//编辑，对不起那个巨大的图像。我会改变它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:07:44.033

试试这个…… `SELECT 2 + NULL`看看你会得到什么。

答案不是`2`，是`NULL`。

因此，使用您的示例数据...

```
 A  |  B  | A+B
-----+-----+-----
  1  |  0  |  1
  2  | NULL| NULL
  3  |  2  |  5
  1  | NULL| NULL
 NULL|  2  | NULL 
```

`A`where `A+B`is 的总和是`NULL`…… where is的总和是…… where is 的总和是……`3`
`A``A+B``1``1`
`A``A+B``5``3`

您可以使用`COALESCE(a, 0) + COALESCE(b, 0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:08:46.017

如果你想知道什么是你可以给它选择表达式 itslef

```
select  a+b,sum(a) from TEST group by a+b 
```

与任何值和 null 相加时为 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:18:45.340

这应该有助于您理解。

```
 select a,a+b from test11;
       +------+------+------+
       | a    | b    | a+b  |
       +------+------+------+
       |    1 |    2 |    3 |
       |    2 |    2 |    4 |
       |    2 |    3 |    5 |
       |    4 |    3 |    7 |
       |    3 |    4 |    7 |
       |    0 |    7 |    7 |
       +------+------+------+ 
```

DB 将创建包含 (a+b) 的添加 col 的临时表，然后在该 col 上执行 group by。

# c# - 如何为 asp.net webapi 构建可重用的 .Net 客户端，包括 IQueryable 功能等

> ID：10812283
> 
> 赞同：3
> 
> 时间：2012-05-30T08:02:22.413
> 
> 标签：c#, .net, httpclient, asp.net-web-api

我最近玩过 ASP.NET WebAPI，包括一些显示结果的 Html-Pages，在浏览器/提琴手等中尝试 OData 查询，我真的印象深刻，到目前为止一切都很好。

但是......现在我正在尝试构建一个可重用的 .Net 客户端库，它可以轻松访问 WebAPI 公开的所有方法。我已经尝试通过 Linq2Rest（很棒的 IQueryable-Interface！）并使用 HttpClient 自己实现 Wrappers 来做到这一点。

我对 Linq2Rest 的问题：

*   它不是来自微软，我担心微软会做出很多改变，这在某些时候不会反映在 Linq2Rest 中。
*   此外，我真的不知道如何使用 Linq2Rest 调用 Put/Delete/Post，每个“Linq2Rest-Context”中都有一个 HttpClient 看起来非常难看

尝试使用 HttpClient 自己实现客户端时，我不知道如何

*   对 IQueryable-WebAPI-Get 发出调用，而不首先将每条记录加载到客户端（在我的场景中，大约 20000 条记录很常见）
*   避免为每个“APIController”-Client 编写非常相似的代码，最终我将拥有大约 15-20 个控制器，非常相似但返回不同的“对象”

感谢每一个建议...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:34:27.857

我是 Linq2Rest 的开发人员，您的观点非常有效。创建 Linq2Rest 是为了在 WebAPI 之外添加 OData 支持。如果您已经在使用 WebAPI，那么一定要坚持使用 Microsoft。

它不是来自微软，但 OData 是一个开放标准，Linq2Rest 是根据标准文档实现的。开源意味着 Linq2Rest 能够比微软更频繁地发布。出于这个原因，它已经支持来自 OData 3 规范的 Any/All 查询，微软目前不支持。

将客户端注入每个上下文是为了减少对它支持的服务的限制。现在由您来定义端点。我正在考虑如何从单个上下文中支持多个端点。

目前它不支持 PUT/POST/DELETE，但是如果您将其作为功能请求发布在项目中（https://bitbucket.org/jjrdk/linq2rest/issues?status=new&status=open），那么它肯定会添加到管道中。

编辑：最新的预发布增加了对 PUT/POST/DELETE 操作的支持。该 API 目前正在测试中。如果您从 2.5.0.0 下载版本，那么您会找到对它的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:11:58.210

如果您正在寻找 Odata Library 。然后试试这个来自 Micrsoft 的

[http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx](http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx)

# grails - <%= %> 在 grails 标签中使用 i18n-gettext

> ID：10812285
> 
> 赞同：0
> 
> 时间：2012-05-30T08:02:25.020
> 
> 标签：grails, internationalization, gettext

我正在尝试使我的 grails 应用程序支持多语言。对于我要翻译的每一个文本，我必须这样做：

```
<%=t9n.tr(s: "Delete Filter")%> 
```

相反，以下将起作用（将“删除过滤器”输出为字符串），但 i18n-gettext 将找不到要翻译的字符串

```
${t9n.tr(s: "Delete Filter")} 
```

所以我正在尝试类似的东西

```
<g:link controller="user" title="<%=t9n.tr(s: 'Delete Filter')%>">foo</g:link> 
```

以下工作，但看起来很讨厌，因为我需要 2 行代码：

```
<% the_title = t9n.tr(s: "Delete Filter")%>
<g:link controller="user" title="${the_title}">foo</g:link> 
```

有任何想法吗？帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:41:06.143

问题是 gettext 无法解析 gsp 文件，插件将 gettext 配置为使用 PHP 解析器来识别需要翻译的字符串。这就是为什么 `<% %>`在标签内时会失败。

可悲的是，没有简单的解决方案，我在 gettext 中使用了每个解析器，但没有一个能够比 PHP 做得更好。

编辑：我目前正在快速（肮脏）修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:40:31.227

Grails 包含自己的 i18n 机制。本地化文件位于 /grails-app/i18n/ 下。

在 GSP 文件中，您可以使用标签：

```
 <g:message code="my.key" default="My key" /> 
```

在代码中，您可以使用一种方法：

```
 message( code:'my.key' ) 
```

在 GSP 中的一些复杂情况下，您可以将其结合起来：

```
 <g:link controller="user" title="${ message( code:'delete.filter' ) }">foo</g:link> 
```

# java - 我可以使用 Java 7 运行 WSO2 ESB 4.0.3

> ID：10812287
> 
> 赞同：1
> 
> 时间：2012-05-30T08:02:32.367
> 
> 标签：java, wso2, wso2esb

当您将 JAVA_HOME 设置为指向 Java 7 JDK 时，WSO2 ESB 不会启动 - 显然这是由于 wso2server.sh 中标题为“使用正确的 JDK 版本处理 SSL 问题”的块。

我可以把它注释掉，服务器就会启动；但什么是“SSL 问题”？我搜索了各种论坛，但没有找到有关此的答案。看起来 Carbon 适用于 JDK6 及更高版本；是这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:26:23.167

它适用于 Java 7。

启动脚本不够智能，无法查找 JDK 1.6 及更高版本。它仅检测 1.6。因此，如果您知道您只会使用 7 或更高版本，则可以注释掉版本检查。

```
jdk_16=`$JAVA_HOME/bin/java -version 2>&1 | grep 1.6`

if [ "$jdk_16" = "" ]; then
   echo " [ERROR] CARBON is supported only on JDK 1.6 and higher"
   exit 1
fi 
```

如果可以在 1.5 或更早版本上运行，则这些更早版本的检测可能比 1.6 或更高版本更容易检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T23:56:02.510

如果您跟进上面的帖子，它会起作用，但我们不鼓励长期使用它，因为它从未经过测试，而且最近我们发现 JDK 7 在高并发运行时存在错误，但它说给定JDK 7 最新版本已修复此问题，因此您最好检查一下您的测试版本。

# grails - Grails 嵌套标签

> ID：10812290
> 
> 赞同：2
> 
> 时间：2012-05-30T08:02:42.263
> 
> 标签：grails

我一直在互联网上搜索有关父/子关系嵌套标签的文档，但到目前为止我一无所获。我想了解的是，这样一个自定义的“父”标签是否可以了解它的“子”

```
<mytag:parent source="${somelist}">
    <mytag:child column="name" style="padding-left:10px">
    </mytag>
    <mytag:child column="surname" style="padding-left:10px">
    </mytag>
</mytag> 
```

在此示例中，父标签获取集合，子标签分别通过调用`somelist.name`和打印给定的列`somelist.surname`。我是否必须解析 DOM 才能了解孩子，或者我可以通过“groovy”代码以某种方式接触孩子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T09:08:23.577

`<mytag:parent>`应该将自己的上下文/数据作为请求范围属性（或页面范围），通过 处理它`<mytag:child>`，并在结束标记上将其删除。喜欢：

```
static final CONTEXT = this.class.name

def parent = { attrs, body ->
    def data = [
        name: 'test 1',
        surname: 'test 2'  // i guess you want to load this values from attr.source
    ]
    request.setAttribute(CONTEXT, data)
    out << body.call()
    request.removeAttribute(CONTEXT)
}

def child = { attrs, body ->
   def data = request.getAttribute(CONTEXT)
   out << 'name: '
   out << data.name  
   out << 'surname: '
   out << data.surname  
} 
```

# xpath - 为 Web 解析器自动编写 XPATH 的工具？

> ID：10812292
> 
> 赞同：2
> 
> 时间：2012-05-30T08:02:48.187
> 
> 标签：xpath, html-parsing, html-agility-pack

目前我需要从网站中提取数据。我尝试使用 HTML Agility Pack，它使用 XPATH 来提取数据。是否有可用的工具可以自动编写 XPATH，以便即使是天真的用户也可以使用配置解析工具而无需编写 XPATH。请为我的场景提供您宝贵的建议。

注意：一些工具可用于编写 XPATH，但它需要格式良好的 XML，但在我的情况下，我将格式错误的 HTML 文档作为输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:19:14.670

是的，有[这样的工具](https://chrome.google.com/webstore/detail/hgimnogjllphhhkhlmebbmlgjoejdpjl)！

您当然可以使用许多 Web 浏览器中存在的内置方法（如 Mike 所建议的那样）。但是，还有其他插件和实用程序。

我发现 Chrome Extension [XPath Helper](https://chrome.google.com/webstore/detail/hgimnogjllphhhkhlmebbmlgjoejdpjl)是最有用的。它具有相同的目的，但它易于使用并创建更健壮的 XPath 表达式（基于 id 等属性），而不仅仅是位置。您还可以在线编辑表达式并实时查看结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:50:48.987

不知道你在这里到底要做什么，但是当我使用 HtmlAgilityPack 时，我利用 Linq 功能的方式比 XPath 更多。我最喜欢的策略是使用 Descendants 方法，尤其是在添加 Where 子句以缩小搜索范围时。从那里，您可以检查名称、ID，或使用 GetAttributeValue 来检查其他属性（如 href）。我发现 Linq 阅读起来更加清晰，它让我可以非常详细地进行解析，而不会迷失在 XPath 语法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:16:02.100

1.  在 Chrome 浏览器中打开网站
2.  按 Ctrl+Shift+I（将打开开发工具）
3.  选择仪器窗口顶部的“元素”
4.  选择仪器窗口底部的放大镜
5.  在浏览器中选择所需的元素
6.  右键单击 DOM 树中的选定行并选择“复制 XPath”

# xml - 使用 Go 的 xml 包编组 DIDL-Lite

> ID：10812294
> 
> 赞同：1
> 
> 时间：2012-05-30T08:02:54.567
> 
> 标签：xml, go

这是来自[UPnP AV ContentDirectory v2 服务模板的示例](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE8QFjAA&url=http://upnp.org/specs/av/UPnP-av-ContentDirectory-v2-Service.pdf&ei=e9LFT-LyDqasiAf-uKD-Ag&usg=AFQjCNFhcBJ9BMlvj0uT1osj_W5rZpo3Fw&sig2=9BCKwUcpkPvXyJ44pvfXtA)[DIDL-Lite](https://www.google.com.au/search?q=%22didl-lite%22) XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<DIDL-Lite
 xmlns:dc="http://purl.org/dc/elements/1.1/"
 xmlns="urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/"
 xmlns:upnp="urn:schemas-upnp-org:metadata-1-0/upnp/"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="
   urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/
    http://www.upnp.org/schemas/av/didl-lite-v2-20060531.xsd
   urn:schemas-upnp-org:metadata-1-0/upnp/
    http://www.upnp.org/schemas/av/upnp-v2-20061231.xsd">
   <item id="18" parentID="13" restricted="0">
      ...
   </item>
</DIDL-Lite> 
```

如何使用[Go 的 xml 包](http://golang.org/pkg/encoding/xml/)**进行**编组？进一步来说：

1.  命名空间前缀是如何定义的，例如`xmlns:dc`and `xmlns:upnp`?
2.  如何在一个元素上配置多个名称空间？
3.  属性的命名空间是如何设置的，比如属性`xsi`上的前缀`schemaLocation`？

作为一个基础，我有这样的事情：

```
type DIDLLite struct {
    XMLName xml.Name `xml:"urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/ DIDL-Lite"`
    // ??? namespace prefixes dc, upnp, xsi
    Objects []Object
} 
```

我还发现[了这个](http://code.google.com/p/go/issues/detail?id=3526)可能相关的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:06:03.367

你给出的例子*是*编组的。我假设您的意思是问：“如何定义使用 xml.Marshal 编组的 Go 数据类型？”

```
package main

import (
    "encoding/xml"
    "fmt"
)

type DIDLLite struct {
    XMLName xml.Name
    DC      string   `xml:"xmlns:dc,attr"`
    UPNP    string   `xml:"xmlns:upnp,attr"`
    XSI     string   `xml:"xmlns:xsi,attr"`
    XLOC    string   `xml:"xsi:schemaLocation,attr"`
    Objects []Object `xml:"item"`
}

type Object struct {
    ID         string `xml:"id,attr"`
    Parent     string `xml:"parentID,attr"`
    Restricted string `xml:"restricted,attr"`
}

func main() {
    d := DIDLLite{
        XMLName: xml.Name{
            Space: "urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/",
            Local: "DIDL-Lite",
        },
        DC:   "http://purl.org/dc/elements/1.1/",
        UPNP: "urn:schemas-upnp-org:metadata-1-0/upnp/",
        XSI:  "http://www.w3.org/2001/XMLSchema-instance",
        XLOC: `
   urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/
    http://www.upnp.org/schemas/av/didl-lite-v2-20060531.xsd
   urn:schemas-upnp-org:metadata-1-0/upnp/
    http://www.upnp.org/schemas/av/upnp-v2-20061231.xsd`,
        Objects: []Object{{ID: "18", Parent: "13", Restricted: "0"}},
    }
    b, err := xml.MarshalIndent(d, "", "    ")
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(string(b))
} 
```

输出：

```
<DIDL-Lite xmlns="urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:upnp="urn:schemas-upnp-org:metadata-1-0/upnp/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
   urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/
    http://www.upnp.org/schemas/av/didl-lite-v2-20060531.xsd
   urn:schemas-upnp-org:metadata-1-0/upnp/
    http://www.upnp.org/schemas/av/upnp-v2-20061231.xsd">
    <item id="18" parentID="13" restricted="0"></item>
</DIDL-Lite> 
```

可以很好地打印以匹配您上面的示例。xml.MarshallIndent 还有些原始。

# jquery - 成功响应 ajax 请求后没有任何反应

> ID：10812300
> 
> 赞同：0
> 
> 时间：2012-05-30T08:03:14.557
> 
> 标签：jquery

我已经发送了一个 jquery-ajax 请求，它的响应是真的

但我需要更改页面上选定项目的值，但既没有发生操作，也没有警报警报

像 ：

```
$('#rename').click(function () {
//alert( $(this).closest('td').prev().prev().text());
var name = prompt('enter the new name');
if (name) $.ajax({
    url: url() + '/rename',
    type: 'POST',
    data: { value: name,
        id: $(this).closest('tr').find('td :first').attr('value')
    },
    success: function (result) {
        if (result.content == 1) {
            //location.reload();
            alert(name);
            //$(this).closest('td').prev().prev().text(name);
        } 
    }
})
}) 
```

你认为如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:16:08.470

这应该可以帮助您调试问题

```
$('#rename').click(function () {
    //alert( $(this).closest('td').prev().prev().text());
    var name = prompt('enter the new name');
    if (name) $.ajax({
        url: url() + '/rename',
        type: 'POST',
        data: { value: name,
            id: $(this).closest('tr').find('td :first').attr('value')
        },
        success: function (result) {
            alert('success');
            if (result.content == 1) {//location.reload();
                alert(name);
                //$(this).closest('td').prev().prev().text(name);
            }
        },
        error: function () {
            alert('error');
        }
    })
}); 
```

基本上加了几分。

1.  你怎么知道成功正在发生并且 result.context 不等于 1，所以添加了`alert('success');`
2.  你怎么知道它正在恢复成功？添加

    错误：函数（）{警报（'错误'）；}

3.  你最后错过了一个`;`。:)

# spring-mvc - Spring MVC 组件扫描

> ID：10812303
> 
> 赞同：0
> 
> 时间：2012-05-30T08:03:30.297
> 
> 标签：spring-mvc

使用 SpringSource Tool Suite 2.9.2，我创建了一个项目

> 新建 > Spring 模板项目 > Spring MVC 项目

这会生成一个简单的控制器 pom.xml、servlet-context.xml、root-context.xml 和一个简单的 jsp 文件供控制器映射到。

然而，当我运行该项目时，组件扫描并未拾取控制器，尽管`/resources/**`路径已映射到`servlet-context.xml`. 应该给我 Hello World 的页面给了我一个 404。

我究竟做错了什么？

中的相关位`servlet-context.xml`：

```
<context:component-scan base-package="com.test.hello" /> 
```

`com.test.hello.HomeController.java`：

```
@Controller
public class HomeController {
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        model.addAttribute("serverTime", new Date());
        return "home";
    }
} 
```

和错误信息：

> 警告：org.springframework.web.servlet.PageNotFound - 在名为“appServlet”的 DispatcherServlet 中找不到带有 URI [/] 的 HTTP 请求的映射

内容`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:35:10.233

一个简单的项目清理和构建为我解决了这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T06:17:32.090

请更改此行`<context:component-scan base-package="com.test.hello.*" />`

它不会扫描您的控制器另外请指定用于应用程序的 url

# c++ - gcc/linux：CppuTest 使用静态向量显示内存泄漏，误报？

> ID：10812306
> 
> 赞同：8
> 
> 时间：2012-05-30T08:03:37.723
> 
> 标签：c++, linux, gcc, memory-leaks, cpputest

在 xxxx.h 文件中：

```
struct dn_instance_pair
{
    std::string theDn;
    int theInstance;
};
typedef struct dn_instance_pair t_dn_inst_pair;

struct table_rowid_type
{
    char theTable[101];
    sqlite3_int64 theRowid;
    int operation;
};

// static class members
static vector<t_dn_inst_pair> dninstList;
static vector<t_table_rowid_type> tablerowidList; 
```

在 xxxx.cpp

```
// declaration of vectors.
// Included to this post only for completeness.
vector<t_dn_inst_pair> xxxx::dninstList;
vector<t_table_rowid_type> xxxx::tablerowidList; 
```

这些向量在静态回调函数中处理，因此它们也必须是静态的。

在 cpputest 中，当尝试在这些向量中的任何一个中添加某些内容时，会发生故障：

```
Leak size: 8 Allocated at: <unknown> and line: 0\. Type: "new" Content: "<\ufffdP@" 
```

添加到向量中的东西是自动变量，它发生在正常函数中：

```
t_dn_inst_pair thePair;
thePair.theDn = updated_dn;
thePair.theInstance = updated_instance; 
```

向量在测试用例结束时被清除：

```
xxxx::yyyy()->dninstList.clear(); 
```

（yyyy() 返回一个指向单例 xxxx 对象的指针）

页面[http://blog.objectmentor.com/articles/2010/02/04/cpputest-recent-experiences](http://blog.objectmentor.com/articles/2010/02/04/cpputest-recent-experiences) 讨论了相同类型的内存泄漏：

> “这是误报。这是一次性分配，是 C++ 内存分配和静态初始化的副作用。”

所以我的问题是：这种失败真的是误报吗？

br 爱斯科

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T09:37:19.810

你检查过valgrind吗？它将区分“肯定丢失”的泄漏内存和“仍然可以访问”的内存。如果它是误报，它应该仍然可以访问（通过向量中的指针。）

请记住，它`vector::clear()`只是销毁元素，不会释放任何内存，因此`capacity()`将保持不变。

您可以使用交换技巧来强制向量释放其内存：

```
vector<t_dn_inst_pair>().swap(xxxx::yyyy()->dninstList); 
```

这将创建一个临时（空）向量并将其与您的向量交换，因此您的向量的元素和分配的内存将被转移到临时向量，然后在语句结束时销毁。

P.S. Singletons suck, don't use them, but why do you access the vector as `yyyy()->dninstList` (i.e. using `operator->`) if it's a static member? You could either say `xxxx::dninstList` or make it a non-static member and access it via the singleton object (but don't forget that singletons suck.)

# jquery - jQuery 在刷新之前不显示 page/div 元素

> ID：10812309
> 
> 赞同：0
> 
> 时间：2012-05-30T08:03:45.773
> 
> 标签：jquery, jquery-ui, jquery-mobile, navigation

现在这是我的代码

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>ESocial</title>

    <link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="css/custom.css" />

    <script src="javascript/jquery-1.7.1.min.js"></script>
    <script src="javascript/jquery.mobile-1.1.0.min.js"></script>

    <script src="esocial.js"></script>
    <link href="css/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="javascript/jquery-ui.min.js"></script>
<script>
  $(document).ready(function(event) {

     $("#datepicker").datepicker();

  });

  function function1(){

      document.getElementById("datepicker").blur();
      if(document.getElementById("ui-datepicker-div")!= null){
          document.getElementById("ui-datepicker-div").focus();

      }
       //alert("The button1 lost its focus"); 
  }     

  function function3(){
      setTimeout('window.KeyBoard.hideKeyBoard()',1000);
      //;
  }

</script>

<script>
  $(document).ready(function() {

    $("#datepickerto").datepicker();

  });
  function function2(){

       document.getElementById("datepickerto").blur();
       if(document.getElementById("ui-datepicker-div") !=null)
           document.getElementById("ui-datepicker-div").focus();

  } 
</script>
</head>
<body>

<div data-role="page" id="login">
    <div data-role="header">
        <h1>ESocial</h1>
        <a href="#login" data-icon="" class="ui-btn-right" onclick="navigator.app.exitApp();return false;">Exit</a>
    </div><!-- header -->
    <form id="waplogin"  action="menu.html" >
            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Username</p>
                </div>
                <div id="divright">
                    <input style="width: 80%;" id="username"
                        name="username" type="text" />
                </div>
            </div>
            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Password</p>
                </div>
                <div id="divright">
                    <input style="width: 80%;" id="password"
                        name="password" type="password" />
                </div>
            </div>

            <div id="divleftButton">

                <!-- <a class="submitbutton " onclick="" href="#menu">Register</a> -->
                <a class="bluebutton" href="#registration" onclick="">Register</a>

            </div>
            <div id="divrightButton">

                <!-- The white class uses the 29x30 whiteButton PNG image to build the iPhone button -->
                <a class="bluebutton" href="#menu" onclick="loginSubmit(); return false;">Login</a>

            </div>
        </form>
</div>  

<!-- Registration Page -->
<div data-role="page" id="registration">
        <div data-role="header" data-position="inline">
            <a href="#login" data-icon="back">Back</a>
            <h1>Register</h1>
            <!-- <a href="#" data-icon="check" onclick="submitLeave(); return false;">Save</a> -->
        </div>
            <form id="registration" action="">
            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">First Name</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="firstName"
                        name="firstName" type="text" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Last Name</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="lastName"
                        name="lastName" type="text" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Email Id</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="emailId"
                        name="emailId" type="text" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Mobile No.</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="mobileNo"
                        name="mobileNo" type="text" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Password</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="registrationPass"
                        name="registrationPass" type="password" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Confirm Password</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="confPass"
                        name="confPass" type="password" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Date of Birth</p>
                </div>
                <div id="divright">
                    <input style="width: 90%;" id="dateOfBirth" name="dateOfBirth" type="text" />
                </div>
            </div>

            <div style="vertical-align: middle;">
                <div id="divleft">
                    <p class="plabel">Gender</p>
                </div>
                <div id="divright">
                    <select style="width: 90%;" name="gender" id="gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
            </div>

            <!-- submit button of registration -->
            <div id="divsubmitbutton">
                <br> <a class="submitbutton ui-link"
                    onclick="register(); return false;" href="#menu">Submit</a>
            </div>
        </form>
</div>

<!-- Main Menu -->
<div data-role="page" id="mainMenu">
    <div data-role="header" data-position="inline">
            <!-- <a href="#login" data-icon="back">Back</a> -->
            <h1>Main Menu</h1>
            <!-- <a href="#" data-icon="check" onclick="submitLeave(); return false;">Save</a> -->
            <a href="#login" data-icon="logout" class="ui-btn-right" onclick="navigator.app.exitApp();return false;">Logout</a>
    </div>
     Main menu
</div>

</body>
</html> 
```

问题a）当点击注册时，它会加载注册页面，但没有显示任何内容，直到我刷新然后我可以看到页面内容，是的，浏览器上的URL更改为（/login.html#registration）

同样是当我尝试加载主菜单时

b）在设置中看不到任何数据图标，即使数据图标属性

c) 如何通过 jquery 显示页面，请不要指定将 div 样式更改为内联或不显示，我需要其他内容。例如..我在脚本中调用了一个方法，它应该隐藏一个页面并根据我从服务器的响应显示

另外，我是 jquery/javascript 开发的新手，所以也一步一步地告诉一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:09:51.837

首先我知道，这是火狐的一个问题，下面的代码在谷歌浏览器中运行良好

`$.mobile.changePage("#mainMenu",{allowSamePageTransition: true });`

还有下面的css文件，是的，如果你想加载同一页面的元素，这是必须的

[jquery.mobile.transitions.css](https://github.com/jquery/jquery-mobile/blob/ca9df1197a9748ee7448fb9b28c14c41d80d4601/themes/default/jquery.mobile.transitions.css)

# java - 使用 Hadoop MapReduce 将序列号添加到文本文件中的每个记录

> ID：10812310
> 
> 赞同：0
> 
> 时间：2012-05-30T08:03:46.723
> 
> 标签：java, hadoop, mapreduce

我在这里寻找解决我的简单愚蠢问题的方法。比如说，我有一个巨大的 10GB 文本文件，其中的记录由 '\n' 分隔，我将该文件作为 Hadoop 框架的输入提供。输出应该是一个文件，它保持与输入文件相同的记录顺序，但在每条记录前面都有一个序列号。

例如，

如果我有一个输入文本文件说，

```
this is line one
this is line two
this is line three
this is line four
-----------------
----------------- 
```

输出文件应该是，

```
1 this is line one
2 this is line two
3 this is line three
4 this is line four
------------------
----------------- 
```

编辑：说我有一个 10 TB 的文件而不是 10 GB 的文件，那么现在可以做什么？除了使用 Hadoop 方式处理文件之外，另一种更快的最佳方法是什么？

此外，我还想使用多个减速器而不是单个减速器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:38:16.360

我同意 pap，这里不需要 Hadoop。检查命令[nl](http://ss64.com/bash/nl.html)，它在文件的每一行之前添加行号。只需将输出存储在一个新文件中。

```
$ cat testFile
line1
line2
line3

$ nl testFile
   1   line1
   2   line2
   3   line3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:24:22.493

与仅仅打开文件、逐行读取并将每一行存储在一个新文件中（带有序列号/序列号）相比，不确定您是否会从 Hadoop 中受益于这样一个微不足道的操作。

# asp.net - IIS URL动态改写方式

> ID：10812311
> 
> 赞同：2
> 
> 时间：2012-05-30T08:03:49.570
> 
> 标签：asp.net, url, iis, dynamic, url-rewriting

IIS、asp.net网页中**动态url重写**的方法有哪些。我知道其中之一是将规则动态添加到配置中，但这有一些缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:52:25.803

您还可以将自定义重写提供程序与 IIS 网址重写模块一起使用。[这里](http://learn.iis.net/page.aspx/803/using-custom-rewrite-providers-with-url-rewrite-module/)有一篇关于这个主题的好文章。

如果您需要动态重写规则，则 DbProvider 可能对您最有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:47:18.017

1.  使用 IIS 网址重写模块进行网址重写

[URL 重写模块 2.0](http://www.iis.net/download/URLRewrite)

1.  Asp.Net 路由

[ASP.NET 路由](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

1.  网址改写网

[UrlRewritingNet.UrlRewrite](http://www.urlrewriting.net/149/en/home.html)

我会推荐使用 ASP.Net 路由。

# android - 联系气泡编辑文本

> ID：10812316
> 
> 赞同：90
> 
> 时间：2012-05-30T08:04:19.790
> 
> 标签：android, android-edittext, drawable, html

我正在尝试创建与在`MultiAutoCompleteTextView`Google+ 应用程序中实现方式类似的联系人气泡。下面是一个屏幕截图：

![Google+ 撰写帖子截图](../Images/9bb8fd1ba10778846d6c99e900786b39.png) .

我试图扩展`DynamicDrawableSpan`类，以便在一段文本的背景中获得一个可绘制的可绘制对象

```
public class BubbleSpan extends DynamicDrawableSpan {
  private Context c;

  public BubbleSpan(Context context) {
    super();
    c = context;
  }

  @Override
  public Drawable getDrawable() {
    Resources res = c.getResources();
    Drawable d = res.getDrawable(R.drawable.oval);
    d.setBounds(0, 0, 100, 20);
    return d;
  }
} 
```

我的椭圆形.xml 可绘制对象定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <solid android:color="#352765"/>
  <padding android:left="7dp" android:top="7dp"
    android:right="7dp" android:bottom="7dp" />
  <corners android:radius="6dp" />
</shape> 
```

在我的 Activity 类中`MulitAutoCompleteTextView`，我像这样设置气泡跨度：

```
final Editable e = tv.getEditableText();
final SpannableStringBuilder sb = new SpannableStringBuilder();
sb.append("some sample text");
sb.setSpan(new BubbleSpan(getApplicationContext()), 0, 6, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
e.append(sb); 
```

但是，字符串中的前 6 个字符后面不是显示椭圆形，而是字符不可见，并且背景中没有可绘制的椭圆形。

如果我将 BubbleSpan 的 getDrawable() 方法更改为使用 .png 而不是可绘制的形状：

```
public Drawable getDrawable() {
  Resources res = c.getResources();
  Drawable d = res.getDrawable(android.R.drawable.bottom_bar);
  d.setBounds(0, 0, 100, 20);
  return d;
} 
```

然后 .png 将显示，但作为跨度一部分的字符串中的字符将不会显示。如何使跨度中的字符显示在前景中，同时自定义形状可绘制对象显示在背景中？

我也尝试使用 an`ImageSpan`而不是子类化`DynamicDrawableSpan`，但没有成功。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-02T17:45:39.103

感谢@chrish 的所有帮助。所以我是这样做的：

```
final SpannableStringBuilder sb = new SpannableStringBuilder();
TextView tv = createContactTextView(contactName);
BitmapDrawable bd = (BitmapDrawable) convertViewToDrawable(tv);
bd.setBounds(0, 0, bd.getIntrinsicWidth(),bd.getIntrinsicHeight());

sb.append(contactName + ",");
sb.setSpan(new ImageSpan(bd), sb.length()-(contactName.length()+1), sb.length()-1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
to_input.setText(sb);

public TextView createContactTextView(String text){
  //creating textview dynamically
  TextView tv = new TextView(this);
  tv.setText(text);
  tv.setTextSize(20);
  tv.setBackgroundResource(R.drawable.oval);
  tv.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.ic_clear_search_api_holo_light, 0);
  return tv;
}

public static Object convertViewToDrawable(View view) {
  int spec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
  view.measure(spec, spec);
  view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
  Bitmap b = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(),
            Bitmap.Config.ARGB_8888);
  Canvas c = new Canvas(b);
  c.translate(-view.getScrollX(), -view.getScrollY());
  view.draw(c);
  view.setDrawingCacheEnabled(true);
  Bitmap cacheBmp = view.getDrawingCache();
  Bitmap viewBmp = cacheBmp.copy(Bitmap.Config.ARGB_8888, true);
  view.destroyDrawingCache();
  return new BitmapDrawable(viewBmp);

} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-31T10:04:33.683

这是为您提供的完整解决方案

```
//creating textview dynamicalyy
TextView textView=new TextView(context);
textview.setText("Lauren amos");
textview.setbackgroundResource(r.color.urovalshape);
textView.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.icon_cross, 0);

BitmapDrawable dd = (BitmapDrawable) SmsUtil.getDrawableFromTExtView(textView);
edittext.settext(addSmily(dd));

//convert image to spannableString
public SpannableStringBuilder addSmily(Drawable dd) {
 dd.setBounds(0, 0, dd.getIntrinsicWidth(),dd.getIntrinsicHeight());
SpannableStringBuilder builder = new SpannableStringBuilder();
builder.append(":-)");
builder.setSpan(new ImageSpan(dd), builder.length() - ":-)".length(),builder.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

return builder;
}

  //convert view to drawable
  public static Object getDrawableFromTExtView(View view) {

    int spec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    view.measure(spec, spec);
    view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
    Bitmap b = Bitmap.createBitmap(view.getWidth(), view.getHeight(),
            Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(b);
    c.translate(-view.getScrollX(), -view.getScrollY());
    view.draw(c);
    view.setDrawingCacheEnabled(true);
    Bitmap cacheBmp = view.getDrawingCache();
    Bitmap viewBmp = cacheBmp.copy(Bitmap.Config.ARGB_8888, true);
    view.destroyDrawingCache();
    return new BitmapDrawable(viewBmp);

} 
```

这是完整的项目文件，如果你想使用 [Spannble](https://github.com/krishnalalstha/Spannable)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-29T15:01:13.970

我有一个库，可以满足您的需求：

*   默认或完全可定制（您甚至可以使用自己的布局）
*   多行支持
*   点击监听

[看看这里](https://github.com/Plumillon/ChipView)

这是一个快速入门：

将 ChipView 添加到您的布局或以编程方式创建它：

```
<com.plumillonforge.android.chipview.ChipView
    android:id="@+id/chipview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

使用扩展抽象芯片和点击侦听器（如果需要）的数据列表对其进行初始化：

```
List<Chip> chipList = new ArrayList<>();
chipList.add(new Tag("Lorem"));
chipList.add(new Tag("Ipsum dolor"));
chipList.add(new Tag("Sit amet"));
chipList.add(new Tag("Consectetur"));
chipList.add(new Tag("adipiscing elit"));
ChipView chipDefault = (ChipView) findViewById(R.id.chipview);
chipDefault.setChipList(chipList);
chipDefault.setOnChipClickListener(new OnChipClickListener() {
        @Override
        public void onChipClick(Chip chip) {
            // Action here !
        }
    }); 
```

默认 ChipView 呈现如下：

[![默认芯片视图](../Images/db890058a6ac691844735aedb98747ab.png)](https://i.stack.imgur.com/0U2T5m.png)

但是您可以根据需要从整体到芯片级别进行自定义：

[![整体芯片视图](../Images/a2db7a744d9fba5b7026b38002487d7a.png)](https://i.stack.imgur.com/J4izTm.png) [![自定义芯片视图](../Images/c33643d7c648ff221bac81b2c8100827.png)](https://i.stack.imgur.com/TfmRqm.png)

这不是 MultiAutocomplete，但您可以设法模仿它（我实际上是这样使用它的）

# java - 基于 Java 的 WS 用户授权

> ID：10812319
> 
> 赞同：0
> 
> 时间：2012-05-30T08:04:31.303
> 
> 标签：java, security, jakarta-ee, authorization, oauth-2.0

我正在创建一个简单的会议应用程序（基于 Java）并使用 RESTFull Web 服务来公开功能。

我想实施一些授权。工作流程应该是这样的：

1) 应用程序收到一个包含用户名/密码的 xml 请求。

2）作为回应，应用程序应提供一些密钥（用于授权进一步请求）

3）现在对于这个用户的每个传入请求，这个密钥应该在 xml 请求中可用，以便应用程序可以授权用户。

请建议我应该如何实现这一点以及最好的方法是什么。

我正在寻找一些授权框架并遇到了 OAuth。请建议。

在此先感谢...寻找您的反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:20:58.023

1.  应用程序密钥.. 每次应用程序服务器将分配的密钥发送到 xml 中的 web 服务，这将在与应用程序服务器映射的数据库中的 web 服务过滤器级别进行检查.. 即每个应用程序服务器将具有单独的预分配密钥来与网络服务。

2.  如果您希望在用户级别使用此密钥，那么当应用程序向服务发送用户登录请求时，将使用*用户名+密码+currentTimeStamp*生成一个动态编码密钥，如果凭据正确（成功登录），则将其保存在当前会话的数据库中，此密钥将在登录请求对用户的响应中返回。并且在当前会话的每个客户端请求中都将传递相同的密钥，因为会话将过期（在默认注销时间或发生手动注销之后）密钥将在数据库中停用。该过程将为每个用户及其每个登录会话执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:06:08.050

Oracle 提供了一个很好的教程，如何使用 REST 和 oAuth 确保安全。请找到链接 [Securing REST Web Services With OAuth](http://developers.sun.com/identity/reference/techart/restwebservices.html)

希望这会帮助你。

# portlet - 如何创建具有多个 portlet 的通用页面布局

> ID：10812321
> 
> 赞同：1
> 
> 时间：2012-05-30T08:04:41.460
> 
> 标签：portlet, liferay-6

我是 Portlet 开发的新手，目前正在学习 liferay。

我想问一下创建网页的最佳方法是什么，例如通常要求：1.）有页眉 2.）有左侧小部件 3.）有页脚 4.）左侧的右边是内容

我目前对 portlet 感到困惑，据我所知，portlet 是独立的，无法更改页面的其他部分。例如，我在左侧有一个带有链接的 portlet，如果我单击它，我将如何在右侧内容中显示动态内容？

此外，如果我在页面顶部有一个菜单，目前我从 liferay 添加了许多作为 portlet 页面。问题是我必须在每个 portlet 中添加左侧和脚部的元素？有没有简单的方法来做到这一点？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T00:15:01.770

您可能应该单独提出这些问题，但我会尝试回答这两个问题

**1\. Portlet 通信**

在 portlet 之间交换数据的方法有很多种。这些可能是最常见、最有用和最正确的（但我能想到的还有更多，可能还有更多的人能够针对非常具体的要求提出）：

*   **会话属性**- 这些非常有用，但不应过度使用，因为这会对性能产生负面影响；您只需在一个 portlet 的操作阶段编写一些会话属性，然后在另一个 portlet 的呈现阶段读取它们
*   **公共呈现参数**- Portlet 2.0 对 portlet 规范的补充。这些比会话属性更有效，但需要在 portlet.xml 中进行额外配置。具体实现超出了这个问题的范围，但是你可以在互联网上找到很多关于这个主题的材料。

基于您提到的另一个 portlet 上的操作在一个 portlet 中显示内容的特定情况非常常见，公共呈现参数最适合这种情况。它可以在 Liferay 的本地资产发布者 + 导航（标签、类别）portlet 中观察到。

**2\. 布局模板**

Liferay 中的布局模板解决了您描述的要求。Liferay 中捆绑了相当多的这些，它们与*嵌套的 Portlets* portlet 协同工作，允许您对许多复杂的页面布局进行建模。您可以为每页设置布局模板，在顶部栏中有一个用于选择它们的链接（对于管理用户）。您还可以创建自己的自定义布局模板，您可以在其中嵌入 portlet。再次，请在网络上搜索*liferay embed portlet*和*liferay 布局模板*- 有很多关于这两个主题的容易找到的详细信息（不能说每个 liferay 开发相关主题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:09:13.687

为此，您可以创建页面布局，页面布局实际上是骨架，用作基本模板

您可以创建页面布局、选择布局模板、主题、配色方案、添加 portlet 并对其进行配置。

每当您想创建一个新页面时，只需选择一个页面布局，您的新页面就会包含您为页面布局所做的所有配置。

当您创建内容繁重的网站时，这非常有用。

# c# - 理解没有 MVVM 的 ICommand 实现

> ID：10812323
> 
> 赞同：2
> 
> 时间：2012-05-30T08:05:10.870
> 
> 标签：c#, wpf, mvvm, command-pattern

我正在尝试了解如何使用命令。我读了很多关于命令的文章，而且我知道，大多数时候命令都是在 MVVM 模式中使用的。我也知道，有一个 RoutedCommand 类 - 它通常用于在开发时节省时间。

但是 - 我想了解基础知识 - 这正是问题所在。开始了：

在我的应用程序中，我定义了一个类 'MyCommand' ：

```
 public class MyCommand :ICommand
{
    public void Execute(object parameter)
    {
        Console.WriteLine("Execute called!");
        CanExecuteChanged(null, null);
    }

    public bool CanExecute(object parameter)
    {
        Console.WriteLine("CanExecute called!");
        return true;
    }

    public event EventHandler CanExecuteChanged;
} 
```

好吧 - 为了获得静态访问，我决定为所有应用程序命令创建一个类：

```
 public static class AppCommands
    {
        private static ICommand anyCommand = new MyCommand();

        public static ICommand AnyCommand
        {
            get { return anyCommand; }
        }
    } 
```

就快到了。现在我在我的主窗口中放了两个按钮。其中之一是“绑定”到命令：

```
<StackPanel>
    <Button Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    <Button Content="Button" Height="23" Name="button2" Width="75" Command="{x:Static local:AppCommands.AnyCommand}" CommandParameter="Hello"/>
</StackPanel> 
```

这是 MainWindow.cs ：

```
public MainWindow()

  {
        InitializeComponent();
        AppCommands.AnyCommand.CanExecuteChanged += MyEventHandler;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
       // Nothing for the moment
    }

    private void MyEventHandler(object sender, EventArgs e)
    {
        Console.WriteLine("MyEventHandler called");
    } 
```

所以 - 让我们运行我的项目。如您所见，我做了一些控制台输出。如果我点击button2，输出是：

CanExecute 调用！执行调用！CanExecute 调用！MyEventHandler 调用

所以，在我看来，这就是发生的事情：1.）按钮上的命令被“激活”。要检查是否应调用执行方法，请调用 CanExecute 方法。2.) 如果 CanExecute 方法返回 true，则调用 Execute 方法。3.) 在执行方法中，我定义应该引发事件“CanExecuteChanged”。调用它将首先检查“CanExecute”，然后调用事件处理程序。

这对我来说不是很清楚。调用事件的唯一方法是在 Execute 方法中。但是在检查 CanExecute 之后通过命令逻辑调用 Execute 方法。调用事件也会检查 CanExecute，但为什么呢？我很困惑。

当我尝试禁用该按钮时，事情变得更加混乱。可以说，有一个“CommandParameter” - 现在“CanExecute”可以使用它。因此，该方法可能返回 false。在这种情况下，按钮被禁用 - 好的。

但是：我如何重新激活它？正如我们已经知道的：我只能在我的命令类中引发 CanExecuteChange 事件。所以 - 由于我们无法单击禁用按钮 - 该命令不会调用 CanExecute（甚至是 Execute）方法。

在我看来，有些重要的东西我看不到——但我真的找不到。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:18:25.787

你`CanExecuteChanged`不应该被提高`Execute`，它应该在`CanExecute`开始返回不同的值时被提高。什么时候取决于你的命令类。在最简单的形式中，您可以添加一个属性：

```
public class MyCommand : ICommand
{
    bool canExecute;

    public void Execute(object parameter)
    {
        Console.WriteLine("Execute called!");
    }

    public bool CanExecute(object parameter)
    {
        Console.WriteLine("CanExecute called!");
        return CanExecuteResult;
    }

    public event EventHandler CanExecuteChanged;

    public bool CanExecuteResult
    {
        get { return canExecute; }
        set {
            if (canExecute != value)
            {
                canExecute = value;
                var canExecuteChanged = CanExecuteChanged;
                if (canExecuteChanged != null)
                    canExecuteChanged.Invoke(this, EventArgs.Empty);
            }
        }
    }
} 
```

# javascript - 选择所有具有样式的 DIV 显示无

> ID：10812324
> 
> 赞同：2
> 
> 时间：2012-05-30T08:05:13.303
> 
> 标签：javascript, prototypejs

我正在使用原型框架来选择所有具有样式的 DIV`display:none`

我在用

```
$$(".details-wrapper > div[style*=display:'none']") 
```

或者

```
$$(".details-wrapper > div[style*=display:none]") 
```

但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:11:11.207

尝试

```
$$(".details-wrapper > div[style*='display:none']"); 
```

[演示](http://jsfiddle.net/gVzZw/)。_

# linq-to-sql - 自定义 linq2sql 日志记录时出现“事务与连接不匹配”

> ID：10812326
> 
> 赞同：1
> 
> 时间：2012-05-30T08:05:20.957
> 
> 标签：linq-to-sql, logging

[http://blogs.msdn.com/b/karthik/archive/2008/05/19/custom-logging-in-linq-to-sql.aspx#10033705](http://blogs.msdn.com/b/karthik/archive/2008/05/19/custom-logging-in-linq-to-sql.aspx#10033705)

我按照上面的文章实现了自定义日志记录，但是当来到**SubmitChanges**时，它会抛出“Transaction does not match connection”异常，这是为什么呢？

编辑：也许我也应该覆盖 DbTransaction？我现在完全困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:31:21.840

确保继承自抽象类 DbConnection，而不是接口 IDbConnection：

[http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/e27cefc5-66d9-4ee0-8f44-6d9ff81c5e1f](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/e27cefc5-66d9-4ee0-8f44-6d9ff81c5e1f)

# python - gevent 控制带有事件的greenlets

> ID：10812327
> 
> 赞同：3
> 
> 时间：2012-05-30T08:05:21.520
> 
> 标签：python, events, concurrency, gevent

假设我有一个 Event() 进来，并且有 X 数量的 greenlets 等待该事件。当那些等待的greenlets完成后，我想做一个 Publish()

我怎么知道什么时候发布？

示意图：

```
event.set() -> X number event.wait() -> finally publish the current state. 
```

如何确保在发布之前完成所有等待（）的greenlet？

我认为将所有等待的 greenlets 放在一个 Group 中并做一个 group.join() 可以工作。

```
import gevent
from gevent.pool import Group
from gevent.event import Event
import random

incoming = Event()

group = Group()

def test_wait(x):
    gevent.sleep(random.random() * 3)
    print 'test %s' % (x)

def publish():
    print 'published' 

for x in range(int(random.random() * 20)):
    group.spawn(test_wait, x)

def event_setter():
    incoming.set()
    gevent.sleep(0)                                                                                                                      
    publish()

event_setter() 
```

如果 test_wait 中没有睡眠，则 Gevent.sleep(0) 有效。我怎么能确定所有等待的greenlets都结束了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:25:25.267

您可以将所有 greenlets 放入一个列表并调用`gevent.joinall(your_greenlets)`. [文档](http://www.gevent.org/gevent.html#gevent.joinall)有点多余，但有一个[例子](http://www.gevent.org/intro.html#example)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:34:52.277

如果在 event_setter() 中使用 group.join() 而不是 gevent.sleep(0)，则可以看到所需的结果，如下所示：

```
Group size: 10
test 6
test 9
test 3
test 7
test 1
test 4
test 0
test 5
test 2
test 8
published 
```

行打印的“组大小：10”：打印“组大小：％d”％（len（group），）

# oracle - Oracle（在服务器上）- Excel 连接

> ID：10812329
> 
> 赞同：0
> 
> 时间：2012-05-30T08:05:22.123
> 
> 标签：oracle, excel, odbc

我已经将几个 Oracle XE 11G 视图链接到 Excel。我可以通过 Excel 中的 ODBC 向导导入这些视图，它可以正常工作。唯一的问题是 Oracle 和 Excel 都在同一台本地客户端计算机上。

我想在服务器上安装 Oracle XE 数据库，在客户端计算机上安装 Excel，并且仍然能够连接。在 Excel 中基本查看来自服务器的 Oracle 数据。

有什么办法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:08:05.077

请看下面的链接：

[Oracle 单层 ODBC 驱动程序（精简版）](http://uda.openlinksw.com/odbc-oracle-st/)

这将允许您的 Excel 应用程序通过 ODBC 访问远程 Oracle 数据库

亲切的问候，

韦兹舞

OpenLink 软件公司

# javascript - 直方图均衡（Image Javascript Beginner）

> ID：10812333
> 
> 赞同：0
> 
> 时间：2012-05-30T08:05:57.290
> 
> 标签：javascript, c++, imagej

我正在尝试使用 ImageJ 为 8 位灰度图像实现直方图算法。以下是我的代码，无法正常工作。请记住我是初学者。

我的 imageJ 代码应该如何才能正常工作？？？

```
for (i = 0; i <= MaxIntensity&& lut[i] == 0; i++) { 
  min = lut[i+1]; 
} 

for ( i=0; i < 256; ++i )
{
    sum += histo[i];

    lut[i] = sum;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:46:35.537

1.  首先，您必须扫描图像以搜索 min/max - 在 OriginalImage 中的 [0..pixelCount] 中搜索，而不是在 lut[] 中搜索。

2.  然后你填充直方图（lut[] 数组，你没有填充它）

3.  然后用 (max - min) * (Original[k] - min) / pixelCount 填充 EqualizedImage[k]；如果我没有犯一些错误。

编辑（这里的旧东西）

for() 循环中的“i”肯定超出了“i <= MaxIntensity”（MaxIntensity = 255）的范围。

```
lut = newArray(256)
...
min = 0; 
for (i = 0; i <= MaxIntensity&& lut[i] == 0; i++) { 
   min = lut[i+1]; 
} 
```

目前尚不清楚您要使用该代码做什么，但如果您只是在 lut[] 数组中寻找非零最小值，那么为什么不使用它：

```
min = 0; 
for (i = 0; i < MaxIntensity ; i++)
{ 
   if(min > lut[i]) { min = lut[i]; }
} 
```

在原始循环中包含“lut[i] == 0”的原因尚不清楚。

# c# - html中本地图像的相对路径（Windows Phone）

> ID：10812335
> 
> 赞同：0
> 
> 时间：2012-05-30T08:06:13.210
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

在我的 Windows Phone 应用程序中，我有一些内容类型的图像。我需要在我的 RichTextBox 控件中显示它们，所以我需要填充相对路径。例如，我在 \res.img.jpg 中有一个图像如果我尝试 - `<img src='/res/next.png' class='newsimage' width='300' />`- 结果中没有图像。我的错误是什么？

# html - 您如何强制 Flash 崩溃以进行测试？

> ID：10812336
> 
> 赞同：2
> 
> 时间：2012-05-30T08:06:14.310
> 
> 标签：html, flash, google-chrome

我需要在 Chrome 中测试 Flash 崩溃...有人知道如何使 Flash 崩溃或有一个 Flash 电影文件故意崩溃吗？

编辑：在弄乱了我的应用程序之后，我确定我真正需要的是一种测试 Chrome 选项卡何时崩溃的方法，我发现尝试`chrome://crash/`在任何 Chrome 选项卡中访问都可以解决问题。我真的只是想使 Chrome 选项卡崩溃，并认为我可以使用 Flash 来做到这一点，但它变得比这简单得多。我仍然选择了下面的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:08:36.773

电影本身需要崩溃还是加载器可以？无限负载循环怎么样？

```
var i = 0;
while(i < 1)
{
    //load your movie
} 
```

这将在大约 15 秒左右后使 Flash 崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:34:33.807

一个无限循环将阻塞 Flash 大约 15 秒，之后 AVM 将强制停止执行有问题的代码块。这不会阻止 AVM 执行其他代码，或完全崩溃。

在 Flash Player 10.3 之前，如果您真的想用 Flash 破坏 Web 浏览器，有几种方法可以做到。一个是...

```
var n:Vector.<int> = new Vector.<int>(-1); 
```

另一个是...

```
var n:ByteArray = new ByteArray();
n.length = int.MAX_VALUE; 
```

如果您运行 FP 10.2 或更低版本，则 ByteArray 可以保证任何浏览器都死机。然而，从 10.3 开始，它现在抛出一个可捕获的错误（#1000，内存不足）并继续执行其他代码。

从 FP 10.3 开始，Vector 方法停止其轨道中的所有代码执行，而不会引发错误。但它不再使浏览器崩溃；现在它只是停止 Flash 并用带圆圈的感叹号替换插件窗口。

因为它不再使浏览器崩溃，所以 ByteArray 方法不再用于防止 mm.cfg 引导程序或运行时反编译器。Vector 方法在某些狭隘的情况下仍然有用，了解 mm.cfg 定义的预加载器将寻找 allComplete 事件，并且您需要在此之前停止执行（即直接从主构造函数调用）。

幸运的是，有一种保证 Flash 11,2 崩溃的新方法，即在 Ubuntu 下的 Chrome 中运行它，然后将富文本粘贴到输入文本字段中：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T10:52:30.783

最简单的方法是在 Chrome 浏览器上进行测试，转到选项 -> 更多工具 -> 任务管理器 -> 找到“插件：Shockwave Flash”并点击“结束进程”

# c# - 连接到远程 sql express 服务器

> ID：10812344
> 
> 赞同：0
> 
> 时间：2012-05-30T08:07:06.310
> 
> 标签：c#, entity-framework, permissions, sql-server-2008r2-express

我有一个在 c# 中使用 EF 模型运行的程序。从我的本地计算机运行该应用程序时，一切运行良好，但是当将其安装在我网络中的另一台计算机上时，它立即停止响应。我注意到，在将特定用户添加到 SSMS 的登录名之后，如果我给他一个系统管理员权限（公开是不够的），一切正常。授予此权限是否存在安全风险？有没有办法在第一次运行程序时或在设置过程中将用户自动添加到 sql server 的登录名中？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:18:16.807

无需在 Sql Server 中添加每个用户，只需创建一个映射到域组（如果您想限制对特定用户组的访问，则为 YOURDOMAIN\Users 或自定义组）并将您的数据库作为默认数据库（而不是*大师*）。

`sysadmin`如果您创建上述登录名并授予`public`对数据库的访问权限（用户映射），通常不需要授予角色。

# java - Jung Graph - 将一个节点放在其他节点之上

> ID：10812345
> 
> 赞同：1
> 
> 时间：2012-05-30T08:07:07.390
> 
> 标签：java, nodes, jung, vertex

由于我在显示这些节点时自定义了节点的形状，这导致一些大节点隐藏了一些小节点。而且我还被要求使用静态位置，这意味着我不能改变它的布局。所以想知道是否有人试图通过设置优先级来将一个节点置于其他节点之上。

我尝试先将较大的节点添加到图表中，然后再添加小节点。或倒序。似乎这并不能解决问题。并在互联网上搜索，尚未找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:53:47.913

如果您希望节点以特定顺序呈现，您将需要使用 Graph 的实现，它以指定的顺序迭代其节点，即 Sorted 或 Ordered 实现。

但是，您正在操作的约束（无法控制顶点的大小或位置）听起来好像您的可视化将被破坏。

# azure - Azure vs Appharbor vs Amazon EC2

> ID：10812346
> 
> 赞同：27
> 
> 时间：2012-05-30T08:07:09.990
> 
> 标签：azure, amazon-ec2, appharbor, paas, iaas

我开始开发新的在线业务，但我不确定使用什么技术进行托管。我在以前的项目中使用过 Microsoft Azure，我对此没有任何问题，只是价格昂贵。

我的选择是 Azure、Appharbor 或 Amazon EC2。我什至不确定比较它们是否正确。

我正在寻找一种非常容易设置并且花费更少时间的东西。

我们只有两个开发人员，所以我们有足够的时间来开发我们的网站。

我听说 EC2 会很耗时。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-30T16:40:50.440

[AppHarbor](https://appharbor.com/)肯定会完成工作。

Azure 也是一种 PaaS（具有许多基础架构功能），但没有[附加程序](https://appharbor.com/addons)，因此您只能使用 Microsoft 决定提供的任何服务（或者您必须在自己的 VM 角色实例上安装、配置和维护它们）。正如您所提到的，Azure 很快就会变得昂贵。

AWS Elastic Beanstalk 现在也[支持 .NET](http://aws.typepad.com/aws/2012/05/net-support-for-aws-elastic-beanstalk-amazon-rds-for-sql-server-.html)，为其提供了一些 PaaS 功能。部署模型虽然不是很复杂（Azure 也不是）：你必须有一个 Visual Studio 插件创建包，然后推送和部署，而 AppHarbor 与 GitHub、Bitbucket、Codeplex 等集成，运行你的单元测试，发送构建通知等等。

（全面披露：我是[AppHarbor](https://appharbor.com/)的联合创始人）

# java - 设置列表的可见性

> ID：10812347
> 
> 赞同：0
> 
> 时间：2012-05-30T08:07:18.463
> 
> 标签：java, android, list, adapter

我得到了这段代码：

```
public void cap_search(){
        EditText search = (EditText) findViewById(R.id.search);
        String str_search = null;
        adapter = new ItemListAdapter(this, data);
        setListAdapter(adapter);

        str_search = search.getText().toString();
        for (int i = data.size()-1; i >= 0; i--){
            if (!data.get(i).getCaption().contains(str_search)){
                 data.remove(i);
            }
         }
    } 
```

我将解释这段代码，以及它在我的代码中的作用：

人们可以看到上限列表，他们可以检查他们拥有的所有上限。但是因为我有很多大写字母，所以我建立了一个搜索功能。因此，当他们键入：“A”时，列表应该只显示包含“A”的大写字母。直到这一切正常，现在的问题。在他们输入：“A”后，我删除了所有不包含它的项目。但是当用户删除“A”并输入“B”时，它应该检查整个列表（以及不以“A”开头的已删除列表）但它没有，因为我删除了它们。

那么是否可以使项目不可见而不是删除它们？或者也许是另一种解决这个问题的方法？

我希望它是清楚的，如果不是请说出来，那么我会尝试不同的解释。

已经谢谢了， Bigflow

**编辑1：**

尝试了很多答案，但我无法让它正常工作。有人有更多想法吗？
TextWatcher 看起来很酷，但对我来说太难了，这是我尝试实现它的第二个项目，但这次我无法让它工作。
我也从未使用过 SQL。

所以其他人有其他答案吗？或者也许是一个擅长 textwatcher 的人，你能做/帮我做一个吗？大多数时候，互联网上的文本观察者示例对我来说太复杂了。我真的很感激。

**编辑2：**

我仍在弄清楚这个选项/功能，但是使用 with`adapter.getfilter();`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:10:18.553

尝试使用两个列表，一个包含所有结果，一个包含搜索结果。始终显示第二个列表，如果要显示整个列表，只需将第二个列表指向第一个列表。就像是：

```
private List<Item> displayData = new ArrayList<Item>();

public void cap_search(){
        EditText search = (EditText) findViewById(R.id.search);
        String str_search = null;

        str_search = search.getText().toString();
        displayData.clear();
        if (str_search == null || str_search.equals("")) {
            displayData.addAll(data);
        } else {
            for (int i = data.size()-1; i >= 0; i--){
                if (data.get(i).getCaption().contains(str_search)){
                    displayData.add(data.get(i));
                }
            }
        }
        adapter = new ItemListAdapter(this, displayData);
        setListAdapter(adapter);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:10:40.210

如果这是适合您的解决方案，我使用“更新按钮”解决了这个问题。使用空搜索模式，我只需再次加载整个列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:27:40.943

每次使用列表时都尝试建立所需的条件。

# php - 如何在下拉 PHP MySQL 中获取选定的值？

> ID：10812348
> 
> 赞同：1
> 
> 时间：2012-05-30T08:07:19.747
> 
> 标签：php, mysql, database, drop-down-menu

我正在表单中创建一个 PHP 下拉菜单，以查看数据库中表中的数据。它显示了正确的数据，但是当我提交时，我的表单操作文件中没有任何输出。

我选择的数据库中的一个输出并不重要，我仍然没有得到任何输出。当我尝试回显输出时，它只是空白。

那么如何才能将下拉列表中的选定选项设置为某种 $blabla 呢？

谢谢

这里的代码：

```
<SELECT NAME="char"> 
<option value="">Choose</option>

<?php

$qw1 = $_SESSION['SESS_MEMBER_ID']; 
$sql="SELECT name FROM characters WHERE account='$qw1'";
$result=mysql_query($sql); 
$options=""; 
while ($row=mysql_fetch_array($result)) { 

$thing=$row["name"];   

  echo "<OPTION VALUE=$id>$thing</option>";
} 
?> 
</SELECT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:09:45.967

您不选择`id`字段：

```
$qw1 = $_SESSION['SESS_MEMBER_ID']; 
$sql="SELECT id, name FROM characters WHERE account='$qw1'";
$result=mysql_query($sql); 
$options=""; 
while ($row=mysql_fetch_array($result)) { 

$id=$row["id"];   
$thing=$row["name"];   

  echo "<OPTION VALUE=$id>$thing</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:10:57.243

亲爱的，如果您使用的是 get 方法，那么`extract($_GET);`请在您的操作文件中使用来获取所有 get 元素或`extract($_POST);`用于 post 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:37:07.097

在您的示例代码中，您必须使用`$_GET['name']`或`$_POST['name']`（取决于您在表单标签中使用的方法）

```
$result = $_POSt['name'];

echo $result;
// print previous selevted value 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T08:10:28.117

你需要像这样修改你的代码

```
echo '<OPTION VALUE="$row['id']">$thing</option>'; 
```

# soap - XSD 和 WSDL 之间“不耦合”的原因

> ID：10812349
> 
> 赞同：1
> 
> 时间：2012-05-30T08:07:34.260
> 
> 标签：soap, xsd, wsdl

在当前项目中，我需要使用外部 Soap 接口。虽然我无法给出具体细节，但它是一种奇怪的形式，一种我以前从未遇到过的形式，因此我想问一下这个设计决策背后的原因是什么，或者它是否首先是一个理智的决策。

WSDL 只有一个操作，即搜索。它具有请求和响应，两者都在外部 XSD 中定义，并被导入 WSDL。现在，WSDL 不再使用直接在 XSD 中定义的请求和响应元素，而是仅使用`<xs:any/>`并以某种方式假定它们被正确的元素填充。我不知道外部系统在这个接口后面是如何工作的。

并不是说它不起作用。只是感觉……错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:12:24.703

wsdl 文件引用外部 xsd 类型是很常见的，实际上我会说这是最佳实践。

原因是这强制区分 xsd 类型和 wsdl 消息类型。

Xsd 类型定义数据，它们“属于”应用程序的域模型。

这些`<wsdl:message/>`类型是soap 服务、端口和绑定所要求的请求和响应协定的完整定义，属于soap 堆栈。

# javascript - Node.js 浏览器响应：连接超时

> ID：10812356
> 
> 赞同：0
> 
> 时间：2012-05-30T08:07:52.887
> 
> 标签：javascript, node.js, browser

我写了一个简单的网络服务器程序，在我的 xxxx 服务器上运行

当我在本地测试它时：`curl http://localhost:port`

它运行正常，但是当我使用网络浏览器时`http://x.x.x.x:port`

浏览器响应：连接超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:12:42.160

希望您在服务器响应中包含 response.end()。这向 Web 浏览器发出信号，表示不应期待更多数据并呈现视图。否则它将继续等待数据并最终超时。请参阅[Node 文档](http://nodejs.org/api/http.html#http_response_end_data_encoding)以获取对此要求的参考。

# javascript - 找出元素内的元素数量

> ID：10812357
> 
> 赞同：0
> 
> 时间：2012-05-30T08:08:12.523
> 
> 标签：javascript, jquery, html, dom

我有一个`<td>`元素。我想找出其中的`<span>`元素数量。我觉得`children().length`应该这样做，但是我应该使用什么样的选择器作为`children()`方法的参数？有没有其他方法使用 jquery/javascript 来做到这一点？

一个可能的例子：

```
<td><span>*content*</span> &nbsp; <span>*content*</span> &nbsp;</td> 
```

在这里，我的答案应该是 2。

编辑：我有一个特定的`<td>`元素，我在里面搜索`<span>`. 所以，应该是这样的，对吧：

```
$(td 'span').length 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:09:45.747

试试这个来计算 的`span`, 的直接子级`td`：

```
$('td > span').length; 
```

**[演示](http://jsfiddle.net/UN3R2/1/)**

阅读**[$("parent > child") 选择器](http://api.jquery.com/child-selector/)**

**根据您的编辑**

if`td`是一个包含特定`<td>`引用的变量，例如；

```
var td = $('td.some'); 
```

那你应该试试

```
$('span', td).length; 
```

我认为要指出`td`您应该使用的特定元素`class`or `id`of that `td`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:10:30.867

[子选择器（“父>子”）](http://api.jquery.com/child-selector/) -试试这对你有用

见[`.length`](http://jsfiddle.net/UXT2E/)。

```
alert($("td > span").length); 
```

或者

```
alert($('td').children('span').length ); 
```

### [工作演示](http://jsfiddle.net/UXT2E/)

# javascript - 在 javascript 中以“hh:mm:ss am/pm”的格式验证时间

> ID：10812360
> 
> 赞同：1
> 
> 时间：2012-05-30T08:08:44.863
> 
> 标签：javascript, html

谁能告诉我如何在javascript中以hh：mm：ss AM / PM格式验证时间（这是一个html输入元素）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:21:17.143

那里可能有更好的正则表达式，但让我们做一些基本的事情。

获取输入并在模糊上附加一个事件（不会解释如何执行此操作；搜索“将事件附加到 javascript 中的 dom 元素”或类似内容）

即使你可以这样做：

```
if(/(?:[0-1]?[0-9]|[2][1-4]):[0-5]?[0-9]:[0-5]?[0-9]\s?(?:am|pm)?/.test(this.value)) {
    // Validates
} else {
    // Something is wrong
} 
```

要获得更好的正则表达式来测试时间格式或其他格式，请搜索“验证时间正则表达式 javascript”或类似的东西（那里有很多）。

这个特殊的正则表达式验证时间，如果你愿意，你可以在这里玩弄它：

[http://rubular.com/r/cYs1n3UuKO](http://rubular.com/r/cYs1n3UuKO)

请记住，ruby 和 javascript 正则表达式确实略有不同，但是对于像这样简单的事情，您可以使用 rubular，它具有良好的界面以便于测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T10:00:25.350

最简单的方法可能是使用[globalize.js](https://github.com/jquery/globalize)，它可以让您简单地测试

```
Globalize.parseDate(data, 'T') 
```

因为不为空，例如`if(Globalize.parseDate(data, 'T')) ...`. 此特定变体需要您举例说明的确切格式，始终包括秒和 am/pm 指示符，尽管 am 或 pm 指示符不区分大小写。您可以使用其他格式而不是`T`指定不同的解析。

这种方法的另一个优点是您的这段代码将是全球化的。只需设置一个标识语言环境的变量，您就可以使代码按照不同语言的规则进行解析（在这种情况下，用于“长时间”表示法）。查看一些说明可能性的[代码示例。](http://www.bytelevelbooks.com/books/global_javascript.html)

# magento - Magento 为跟踪号码创建搜索字段

> ID：10812366
> 
> 赞同：0
> 
> 时间：2012-05-30T08:08:56.980
> 
> 标签：magento

我正在努力创建一个搜索字段以在 magento 中显示跟踪我的订单功能。让我向您解释清楚，如果您转到`www.aramex.com`右侧栏，则有一个以`Track Your Shipment`跟踪按钮命名的框。

我想在我的 magento 网站中添加类似的功能，但不是侧边栏。我计划`Track my Order`在页脚中添加一个名为的链接。如果用户单击它应该打开一个带有搜索字段的弹出窗口，例如`aramex.com`. 在那里，用户可以通过提供跟踪号来跟踪他们的订单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:58:54.120

您可以使用扩展来执行此操作，这是链接[http://www.magentocommerce.com/magento-connect/guest-order-status.html](http://www.magentocommerce.com/magento-connect/guest-order-status.html)

# php - 识别用户、MySQL 和 PHP 的重复条目

> ID：10812367
> 
> 赞同：2
> 
> 时间：2012-05-30T08:08:58.353
> 
> 标签：php, mysql, error-handling, duplicates

我有一个提交表单，当用户尝试使用重复条目提交它时，它会返回 MySQL 错误 #1062。例如，错误状态：

```
Duplicate entry 'graphics' for key 'name' 
```

我想给用户一条自定义消息，解释（用简单的英语）他们为什么会出错，以及是什么特定的条目导致了错误。例如：

```
"Graphics" is a duplicate entry and should not be used. Please remove it and resubmit the form." 
```

键将始终是“名称”，但重复条目本身通常会有所不同。我需要能够从生成的 MySQL 错误中提取该特定值，然后将我的自定义消息包装在它周围。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:17:47.957

您可以尝试进行简单的错误检查，如果发生 mysql 错误，则向用户显示您的错误消息。你可以尝试这样的事情：

```
$rows = mysql_query("SELECT `name` from `tbl` WHERE `name` = 'graphics';");

if(mysql_num_rows($rows) > 0){
    echo '"Graphics" is a duplicate entry and should not be used. Please remove it and resubmit the form.';
}else{
    insert...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:18:45.617

如果您要插入的项目事先存在，您可以在输入任何数据之前先检查表格。

其次，您可以使用 if else 循环根据错误打印自定义消息

```
 $check_exists = // runs the code here to check if the entry graphics already exists for the existing name

     if ($post['name'] == ''){

     // error message for blank entry 

     }elseif($check_exists == true) {

   // custom error mesage for duplicate entry 

    }else {

  // submit the form here

    } 
```

# ruby-on-rails - 使用 ember.js 时处理用户身份验证

> ID：10812368
> 
> 赞同：33
> 
> 时间：2012-05-30T08:08:59.487
> 
> 标签：ruby-on-rails, authentication, ember.js

我在 ember.js 上查找文档和帖子，并将 ember.js 与 Rails 一起使用。

我喜欢 Rails 提供 API 和 ember.js 处理 UI 的想法，但我想知道如何插入用户身份验证。

例如，假设我正在使用 devise，如何将它与 ember.js 一起使用？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T08:49:31.690

**更新 2**

查看[这个新的 github 示例应用程序](https://github.com/blangslet/ember.js-rails-devise-demo)，它使用混合 rails 视图 + devise-variable-scoped ember 应用程序，在 ember 1.0.rc.1 + ember-data rev 11 上运行并保持 has_many 关系。

看看这个尚未准备好但显示出很多希望的[令牌认证项目。](https://github.com/heartsentwined/ember-auth)这对于在客户端对用户进行身份验证的移动客户端 api 来说非常有用，而不是简单的基于 Web 的 rails view devise auth。

两者都提供了有趣且有争议的用例。我期待看到未来的发展方向。

**更新 1**

我使用 Devise 在 Dgeb 的 ember-data 示例应用程序中添加了超级基本用户身份验证：[https](https://github.com/dgeb/ember_data_example/pull/17) ://github.com/dgeb/ember_data_example/pull/17 。我使用 Rails 控制器来创建身份验证和范围，将 current_user user_id 添加到新联系人记录的创建中，同时通过 current_user.id 将范围内的 AMS 数据提供给 ember 应用程序。

* * *

我有一段时间以来一直有同样的问题，我能找到的唯一一个具有用户身份验证并使用 rails 的开源 ember 示例应用程序是[https://github.com/carvil/dash-it](https://github.com/carvil/dash-it)。他使用 Rails-Devise 登录视图，在用户登录后将 current_user 信息传递给 ember.js 应用程序。

我知道许多其他人使用 Devise token_authenticable 来完全删除 Rails 视图并严格通过令牌对 Ember 应用程序中的用户进行身份验证。这可能是最好的方法，但我自己还没有尝试在应用程序中实现它，而且我还没有找到任何走这条路的开源应用程序。

Ember 的主要开发人员之一汤姆戴尔说，他们还没有任何特定的用户身份验证解决方案的“受惠国家”状态，所以在他们正式支持特定解决方案或将其构建到框架中之前，我' m 假设设计令牌是最好的方法。

希望比我拥有更多 Ember/用户身份验证经验的人能够加入并展示比[https://github.com/carvil/dash-it](https://github.com/carvil/dash-it)更好的解决方案，使用 Ember 的状态机和路由以及基于令牌的用户身份验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T18:05:01.610

Check [**ember-auth**](https://github.com/heartsentwined/ember-auth) it handles **token authentication** for ember.js and there is also a [demo and tutorial](https://github.com/heartsentwined/ember-auth-rails-demo) for rails / devise / ember. **ember-auth** is the best approach I've seen so far to authenticate an ember.js / rails app.

So far I have implemented a basic Ember application based on Ember-auth with Devise token authentication and example Oauth for Google and LinkedIn that can be found [here](https://github.com/joscas/base_app) and is live here: [https://starter-app.herokuapp.com](https://starter-app.herokuapp.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T12:36:32.227

我正在开发一个在 ROR 平台上使用 ember.js 身份验证的项目。检查 github 上的以下项目链接。

[https://github.com/karthikkck/rails-emberjs.git](https://github.com/karthikkck/rails-emberjs.git)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T14:01:45.667

一种选择（并非在所有情况下总是理想的）是在需要在 Devise 中进行活动会话才能呈现的视图中初始化 Ember 应用程序。

我经常通过将 ember 应用程序的 js/css 清单保持在加载路径之外来做到这一点，除非在位于 Rails 应用程序中经过身份验证的控制器下的视图中。

您还可以通过将 Devise 身份验证检查放在填充数据的 Rails 控制器上来防止任何数据加载到 Ember 应用程序中。

# php - MySQL SELECT 查询来自特定列

> ID：10812369
> 
> 赞同：0
> 
> 时间：2012-05-30T08:09:13.433
> 
> 标签：php, mysql

我有以下 MySQL 表`products`：

```
id, code, name, color
1, 'D555', 'Men T-shirt', ''
2, 'D556', 'Black Men T-shirt', 'D556'
3, 'D557', 'Silver Men T-shirt', 'D556'
4, 'D558', 'Men T-shirt', ''
5, 'D559', 'Black Men T-shirt', 'D559'
6, 'D560', 'White Men T-shirt', 'D559' 
```

该栏`color`不为空，如果产品有其他颜色，例如：代码“D556”的产品是黑色的，它也有银色的。

我正在使用`SELECT * FROM products`，但现在我想选择主要产品（没有子颜色），即： `D555, D556, D558, D559`.

*   之后，我将选择产品下的子颜色（因为它是关于服装的电子商店）。

这种表结构有可能吗？

非常感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:16:19.337

```
SELECT * FROM products WHERE color = '' or code = color; 
```

您可以考虑在两个表中规范化您的表，如下所示：

```
products(id, code, name)
alt_products(id, id_products, color) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:13:32.470

可能有用的是：

```
SELECT `id`, `code`, `name`, GROUP_CONCAT(`color` SEPARATOR ', ')  as `colors`
FROM products 
GROUP BY `code` 
```

# c# - 以视图状态存储 DataTable

> ID：10812376
> 
> 赞同：-3
> 
> 时间：2012-05-30T08:09:43.967
> 
> 标签：c#, asp.net, datatable

> 我想我找到了：D，错误的数据：D——史蒂夫·乔布斯

* * *

我有一个数据表对象，我想将它存储在 Viewstate 中，但有时会发生错误（不常见

```
Error: Sys.WebForms.PageRequestManagerServerErrorException: Error serializing value 'Table1' of type 'System.Data.DataTable.' 
```

任何帮助请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:35:00.403

您面临的问题是由于数据表的大小。

在 ViewState 中存储数据表不是一个好习惯，因为它会增加页面的大小并降低性能，而且 ViewState 可以在客户端被破译，因此 DataTable 是不安全的。

您可以通过会话或从缓存中更好地执行此操作，如果不经常使用它，我建议您从数据库中重新查询它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:21:47.847

使用 Session 来存储 DataTable 因为 Viewstate 对于存储像 DataTable 这样的大对象来说效率不高，因为它们与每个服务器请求一起包装。

```
 Session[dt] = datatableobj; 
```

# php - SQL 查询：在同一查询中为两个变量引用另一个表数据

> ID：10812380
> 
> 赞同：1
> 
> 时间：2012-05-30T08:09:48.633
> 
> 标签：php, mysql, join, union

我正在尝试运行一个 MYSQL 查询，其中我需要在目标中两次从源表中获取相同的“一条”信息......让我解释一下：

2 表：“**事件**”和“**存档事件**”。“存档事件”是一个“链接”——将当前打开的事件连接到过去（关闭的）事件。此表仅包含事件表中 Event_ID 的 ID。

我想要做的是获取存档表中每个组合的事件标题。

例如：

```
 -----------------------------------
   |       ARCHIVE TABLE             |
   |PK|ClosedEventID |CurrentEventID |
   |1 |      5       |       3       |
   |2 |      2       |       3       |
   -----------------------------------

   -----------------------------------------
   |      EVENTS TABLE                     |
   |Event_ID | Event_Title | ............. |
   |    1    | Party 1     | ............. |
   |    2    | Party 2     | ............. |
   |    3    | Wedding 1   | ............. |
   |    4    | Funeral 1   | ............. |
   |    5    | Pancake     | ............. |
   ---------------------------------------- 
```

我猜这将是一个 join 或 union 之类的；我的 SQL 是公平的，但我的头在旋转试图解决这个问题。

所以我想要做的是，一旦运行查询，归档事件表中的每个“对”都会像这样（这样我就可以在 PHP 中处理它......）：

```
 -----------------------------------
   |       ARCHIVE TABLE             |
   |PK|ClosedEventID |CurrentEventID |
   |1 | Pancake      |   Wedding 1   |
   |2 | Party 2      |   Wedding 1   |
   ----------------------------------- 
```

提前谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:16:15.957

这很简单：

```
SELECT
    a.pk as "pk",
    e1.event_title as "closed_event",
    e2.event_title as "current_event"
FROM
    events as e1
    JOIN archive as a on e1.event_id = a.closed_event_id
    JOIN events as e2 on a.current_event_id = e2.event_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:17:51.650

```
SELECT PK, e1.Event_Title AS ClosedEventID, e2.Event_Title AS CurrentEventID
FROM   ARCHIVE
  JOIN EVENTS AS e1 ON e1.Event_ID = ARCHIVE.ClosedEventID
  JOIN EVENTS AS e2 ON e2.Event_ID = ARCHIVE.CurrentEventID 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/6aa4a/2)上查看。

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# c# - 矩形角度属性

> ID：10812383
> 
> 赞同：1
> 
> 时间：2012-05-30T08:10:05.903
> 
> 标签：c#, wpf, angle

是否可以在 C# 中设置矩形角度属性？

我试过这个：

```
Rectangle r = new Rectangle();
r.Width = 5;
r.Height = 130;
r.Fill = Brushes.Black;
r.RotateTransform.AngleProperty = 30; // Here is the problem
canvas1.Children.Add(r); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:16:39.110

一种方法是将[RotateTransformation](http://msdn.microsoft.com/en-us/library/ms750596.aspx#exampleRotateAnElement45degSection)应用于对象的`RenderTransform`属性：

```
r.RenderTransform = new RotateTransform(30); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:13:46.743

```
RotateTransform rt1 = new RotateTransform();
rt1.Angle =30;
r.RenderTransform= rt1; 
```

或者

```
r.RenderTransform= new RotateTransform(30); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:13:56.807

您正在尝试设置依赖属性的支持字段，该字段是只读的，并不意味着以这种方式使用。

请改用正确的属性：

```
r.RenderTransform.Angle = 30; 
```

另外，我猜一个新的 Rectangle 默认没有 RotateTransform，所以你可能也需要创建一个新的实例：

```
r.RenderTransform= new RotateTransform(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T08:16:54.930

您需要应用倾斜变换来改变矩形中的角度**，**看看这个：[如何：倾斜元素](http://msdn.microsoft.com/en-us/library/ms746708.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T08:35:11.373

昨天我解决了同样的问题。这是我在**WinForms**中使用的：

```
 GraphicsState graphicsState = graphics.Save();
        graphics.TranslateTransform(this.Anchor.Position.X, this.Anchor.Position.Y);
        graphics.RotateTransform(this.Anchor.Rotation);
        graphics.FillRectangle(new SolidBrush(this.Anchor.Color), this.Anchor.GetRelativeBoundingRectangle());
        graphics.Restore(graphicsState); 
```

Anchor 是我创建的一个类。它来自我自己的矩形

```
internal class Rectangle
{
    public PointF Position { get; set; }

    public Color Color { get; set; }

    public SizeF Size { get; set; }

    public float Rotation { get; set; }

    public RectangleF GetRelativeBoundingRectangle()
    {            
        return new RectangleF(
            new PointF(-this.Size.Width / 2.0f, -this.Size.Height / 2.0f),
            this.Size);
    }
} 
```

矩形的位置是矩形的中间（中心）点，而不是左上角。

所以回到第一个代码部分：

```
GraphicsState graphicsState = graphics.Save(); 
```

我保存了我的图形设备的状态，所以我可以做任何我想做的事情，然后返回到原始视图。然后我将位置系统平移到矩形的中心并执行旋转

```
graphics.TranslateTransform(this.Anchor.Position.X, this.Anchor.Position.Y);
graphics.RotateTransform(this.Anchor.Rotation); 
```

然后，我绘制矩形。这部分显然会有所不同，具体取决于您要如何绘制矩形。您可能会使用 FillRectangle （就像我一样）或仅绘制边框的 DrawRectangle ：

```
graphics.FillRectangle(new SolidBrush(this.Anchor.Color), this.Anchor.GetRelativeBoundingRectangle()); 
```

最后我恢复了图形设备的原始状态，取消了我只用于绘制旋转矩形的平移和旋转

```
graphics.Restore(graphicsState); 
```

# javascript - 在 jquery ajax 回复上选择

> ID：10812397
> 
> 赞同：0
> 
> 时间：2012-05-30T08:10:57.443
> 
> 标签：javascript, jquery, xml, ajax

我试图了解是什么阻止了 jquery 解析我的 XML 回复。

我的代码如下所示：

```
$.ajax({
    url: "ajax_gateway.php?request=agentdetails&agentid=6352",
    dataType: "xml",
    success: function(xml) {
        console.log(xml);
        alert($('agentname', xml).val());
        //$('input[name="agent_name"]').val($('agentname', xml).val());
    }   
}); 
```

我可以看到我想要的 XML 记录到 Chrome 控制台。我检查了标题，我的 AJAX 回复是用“Content-Type: text/xml”发送的。不幸的是，我的警报是空的，如果我尝试这样做：

```
$(xml).("agentname").val() 
```

我在 chrome JS 控制台中收到错误消息，上面写着“Uncaught SyntaxError: Unexpected token (”。我错过了什么吗？我的“ajax_gateway”中有几个其他功能，它们都工作正常......

编辑：我的 XML 响应：

> <?xml version="1.0"?> <response><employee><agentname>我的名字</agentname><agentteam>我的团队</agentteam><agentphoneid>6352</agentphoneid></employee></response>

虽然 papaiatis 回答了我的问题，但有人愿意解释为什么：

```
$(xml).("agentname").text(); 
```

已验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:17:18.273

尝试使用[text()](http://api.jquery.com/text/)代替。

`alert($('agentname', xml).text());`

*val() 与表单元素一起使用。*

# ruby-on-rails - Rails 3 中的 Postgresql 引用完整性约束

> ID：10812399
> 
> 赞同：0
> 
> 时间：2012-05-30T08:11:04.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, database-design, activerecord

看到[这篇](https://stackoverflow.com/a/3438822/367985)文章，它说*数据库处理的引用完整性根本不是 Rails 方式。*

但是考虑一下：

```
class User < ActiveRecord::Base
  belongs_to :department
end

class Department < ActiveRecord::Base
  has_many :users
end

#User Model
id: integer, name: string,department_id: integer
#Department Model
id: integer, name: string 
```

在这里我需要创建一个新用户并执行以下规则

*   用户应该被分配到一个部门
*   应该`users.department_id`匹配`departments.id`
*   如果`users.department_id`与 不匹配`departments.id`，则不应创建记录并引发错误。

现在，我如何以 Rails 方式完成此任务？或者通过在迁移中删除原始 SQL 添加外键是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:48:17.130

在 Rails 中，您只需将其添加到您的用户模型中：

```
validates_presence_of :department 
```

Rails 将在允许保存操作之前检查有效的部门。如果您愿意，您也可以使用像外国人这样的 gem 将外键添加到您的表中。我通常这样做是因为我不可避免地发现自己需要在某些时候直接批量加载数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:18:43.927

如果 Lukas 的回答不符合您的需求，您也可以在模型上使用 before/after save hooks

```
class User < ActiveRecord::Base

  before_save :validate_department

  def validate_department
     #validate the department
     #raise an error if invalid?
  end

end 
```

# css - 很多浮动：左元素。强迫他们超出容器的宽度而不是跳到下面？

> ID：10812403
> 
> 赞同：1
> 
> 时间：2012-05-30T08:11:17.693
> 
> 标签：css, width, overflow, containers, nowrap

我有一个固定宽度的容器和很多 div，里面有 float:left 应用于它们。

但是，当我在其中添加更多 div 时，它们会低于第一个 div，就像在新行上一样。

我需要它们**超出容器的宽度**（它已应用溢出：隐藏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:23:21.590

希望这是您正在寻找的：http: [//jsfiddle.net/PsTRq/](http://jsfiddle.net/PsTRq/)

诀窍是创建 2 级包装器。一种是固定宽度的外层。第二个内部是具有“无限”宽度的项目的真正包装器。

# awk - solaris awk 正则表达式匹配中不区分大小写的匹配

> ID：10812406
> 
> 赞同：0
> 
> 时间：2012-05-30T08:11:44.370
> 
> 标签：awk, solaris

在 red-hat 中我可以使用 'i' 标志，在 solaris 中 /regex/i 它不起作用，我也在寻找一种方法来做到这一点。我的脚本是：

```
ls -1 /webapp/dir/bin | awk '/AR[0-9]+/ && /SMF_LOG/ {dp_pkg=substr($NF,index($NF,"AR")+2); print $NF"@"dp_pkg}' | sort -k2 -t '@' -nr | head -n1 | cut -d'@' -f1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:01:01.343

这可能对您有用：

```
echo abc | awk '{temp=toupper($0)} temp ~ /ABC/'
abc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:16:25.103

采用

```
 awk '[Aa][Rr][0-9]+ && [Ss][Mm][Ff]_[Ll][Oo][Gg] ...' 
```

和类似的模式匹配，而不是`index`在规则中。或者，如果这是一个选项，则在处理它们之前将所有字符转换为大写（或小写），例如使用`tr "[A-Z]" "[a-z]"`.

# database-design - 关于在两个文档管理系统之间实现接口的建议

> ID：10812409
> 
> 赞同：0
> 
> 时间：2012-05-30T08:11:59.320
> 
> 标签：database-design, dms

我开发了一个文档管理系统 (DMS) 作为 Delphi 客户端服务器应用程序，它使用 FILESTREAM 功能将文件作为 BLOB 字段存储在 SQL Server Db 中。

随着更多软件的销售，我收到了将其连接到其他文档管理系统的请求，在最广泛的意义上“其他 DMS 意味着”：

1 “结构化文件夹”）硬盘驱动器中的某些文件夹只能由有限数量的用户访问（想象一个共享网络文件夹只能由 3 个用户访问）——这可能是“存储文档的真实方式”或仅仅是从另一个系统每日导出（文件通过批处理程序每​​天从另一个 DMS 中提取）。

在这种情况下，文件夹命名有一些规则，对于 ecample，如果文档与客户或员工相关联，则结构将类似于：

```
\\Docs\Employees\COdE01\cv.pdf
\\Docs\Customers\CodC02\Invoice.xls 
```

（在这个例子中，CodEXX 代表员工代码 XX，Anc CodCXX 代表客户案例）

2个网络服务）

许多 DMS 公开（安全）Web 服务以访问（读取）/插入/更新/删除文档，因此通过这种方式可以使我的系统与其他 DMS 保持同步。

3）其他功能/工具）

其他 DMS 有工具（如使用参数或存储函数运行的命令行工具）来执行访问/插入/更新/删除

无论如何，一般来说双向同步是一个问题，在我的情况下，我对一种方式更感兴趣，所以基本上访问存储在其他地方的文档

您可以建议哪些技术来创建可配置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:39:46.610

开发您自己的 API，以便客户端应用程序（无论是您编写的还是其他人编写的）都可以使用它来读取/写入系统中的数据。

根据它与假定的客户端功能的匹配程度来选择该 API 的底层技术。例如，如果期望大多数客户端是远程的并且使用多种语言，那么 Web 服务就是一个不错的选择。如果预计大多数客户端都是进程内的（如果这对您的系统有意义的话）并且是本地的，那么基于 C 的 API 可能是要走的路。以及介于两者之间的一切...

然后，您将使用“源”和“目标”系统的 API 来实现集成。

# javascript - 为什么这个变量超出范围？javascript

> ID：10812411
> 
> 赞同：0
> 
> 时间：2012-05-30T08:12:05.197
> 
> 标签：javascript, canvas, kineticjs

下面的代码没有运行，我认为这是由于以下行：

```
alert(nodes[i].getX()); 
```

我认为节点[i] 超出范围？如果是这样，为什么？

（我已经注释掉了大部分代码来隔离问题。基本上，代码创建了 10 个圆圈，然后是 10 条曲线，然后使用 kineticjs 在画布中对它们进行动画处理）。

谢谢！

编码：

```
<html>
    <head>
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
            canvas {
                border: 1px solid #9C9898;
            }
        </style>
        <script type="text/javascript" src="http://www.html5canvastutorials.com/libraries/kinetic-v3.9.7.js"></script>
        <script>
            window.onload = function() {

                // global parameters
                var curvatureX = 10;
                var curvatureY = 10;
                var nodeRadius = 10;

                var stage = new Kinetic.Stage({
                    container: "container",
                    width: 578,
                    height: 300
                });
                var layer = new Kinetic.Layer();

                var nodes = [];

                for (i = 0;i<10;i++){
                    nodes[i] = new Kinetic.Circle({
                        x: i*20,
                        y: i*5,
                        z:1,
                        radius: nodeRadius,
                        fill: "blue",
                        stroke: "black",
                        strokeWidth: 4
                    });
                    layer.add(nodes[i]);
                    alert(nodes[i].getX()); // *** THIS ALERT DOES SHOW UP***

                }

                var edges = [];
                for (i = 0;i<10;i++){

                    edges[i]= new Kinetic.Shape({
                        drawFunc: function() {
                            var context = this.getContext();
                            context.beginPath();

                            // ***WHERE THE PROBLEM IS ***     
                            alert(nodes[i].getX()); 
                            //ALERT DOES NOT SHOW UP + BLANK SCREEN

//                            context.moveTo(nodes[i].getX(), nodes[i].getY());
//                            if (nodes[i].getY()-nodes[i+1].getY()<0){
//                                context.quadraticCurveTo((nodes[i].getX()+nodes[i+1].getX()+curvatureX)/2, (nodes[i].getY()+nodes[i+1].getY()-curvatureY)/2, nodes[i+1].getX(), nodes[i+1].getY());
//                            }
//                            else{
//                                context.quadraticCurveTo((nodes[i].getX()+nodes[i+1].getX()+curvatureX)/2, (nodes[i].getY()+nodes[i+1].getY()+curvatureY)/2, nodes[i+1].getX(), nodes[i+1].getY());
//                            
//                            }
                            context.lineWidth = 10;
                            // line color
                            context.strokeStyle = "black";
                            context.stroke();
                        },
                        fill: "#00D2FF",
                        stroke: "black",
                        strokeWidth: 4
                    });
                    layer.add(edges[i]);
                }

                stage.add(layer);

                var amplitude_1 = 100;
                var amplitude_2 = 30;
                var period = 2000;
                // in ms
                var centerX = stage.getWidth() / 2;
                var centerY = stage.getHeight() / 2;

                stage.onFrame(function(frame) {
                    for (i=0;i<nodes.length;i++){
                        nodes[i].setX(amplitude_1 * i * Math.sin(frame.time * 2 * Math.PI / period) + centerX);
                        nodes[i].setY(amplitude_2 * i+ 20);
                    }
                    layer.draw();

                });

                stage.start();
            };

        </script>
    </head>
    <body>
        <div id="container"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:20:47.410

它[显示](http://jsfiddle.net/uwLyN/)。使用开发工具栏进行一些调试。

# c++ - C++ builder 2010 中奇怪的“随机”内部编译器错误

> ID：10812412
> 
> 赞同：3
> 
> 时间：2012-05-30T08:12:08.070
> 
> 标签：c++, compiler-errors, teamcity, c++builder-2010

我有一些代码将一堆**TNotifyEvents**放在一个**vector**中。

```
std::vector<TNotifyEvent> m_availableCallbacks; 
```

这是应用程序的主要形式的成员。在表单构造函数中，它填充了事件。

```
m_availableCallbacks.push_back(ReadoutLastValue);
m_availableCallbacks.push_back(ReadoutCurrentDay);
m_availableCallbacks.push_back(ReadoutLastDay);
m_availableCallbacks.push_back(Readout7Days);
m_availableCallbacks.push_back(Readout1Month);
m_availableCallbacks.push_back(ReadoutChooseTimeSpan);
m_availableCallbacks.push_back(ReadoutAllData); 
```

然后迭代此向量并用于创建弹出菜单并将通知事件分配给该弹出菜单中的元素。

在本地编译它没有问题。当我在构建服务器上编译它（运行*TeamCity 6.5*）时，我在等于第二个**push_back**调用的行上得到一个内部编译器错误。

我尝试通过编辑*cbproj*文件在构建代理上本地禁用**智能缓存预编译标头。**这产生了成功的构建。所以我从所有*cbproj*文件中删除了使用**智能缓存预编译头**文件的指令并提交了更改。我告诉*TeamCity*进行一次*干净结帐*，但我再次在同一个地方遇到了相同的内部编译器错误。奇怪的是，在失败的编译成功后运行新的编译，所以这感觉非常随机。

 *****到底是怎么回事？我习惯于在其他 C++ 编译器中传递函数指针（由我自己创建）就好了。**TNotifyEvents**的内部处理是否损坏或编译器只是不稳定且容易损坏？

查看其他采用**TNotifyEvents**的代码，它们不适用于引用或指针，所以我没有尝试。而且由于代码（当它编译时）按预期工作，这似乎不是问题。

**更新：**

我可以补充一点，*TeamCity*的日志显示 FrontEnd.cpp 文件（包含此代码）在我重新运行编译并且成功时被*跳过。*

```
[10:04:37]: [MakeObjs] CallTarget
[10:04:37]:   [CallTarget] _CppDepCheck
[10:04:44]:     [_CppDepCheck] MessageMap
[10:04:44]:       [MessageMap] Skipping: ..., FrontEnd.cpp, ... 
```

如果发生内部编译器错误，编译必须成功。否则它怎么可能跳过编译文件而仍然神奇地出现并以编译的形式使用？:)

**更新2**

经过调查，我可以确认这仅在以*发布*模式编译时发生。在发布时，它甚至发生在 IDE 中的本地机器上。我试过摆弄像这样的设置

*   禁用所有优化
*   生成最快的代码
*   外部类型文件
*   等等

在每次尝试之间清理构建。但 ICE 并没有消失。然而，我确实设法让它抱怨另一个文件中的另一个位置。将设置设置回之前的状态不会使错误返回到**FrontEnd.cpp**文件。这个编译器感觉有点不稳定:)

事实上，我开始得到 ICE 的所有代码，并且必须重新启动 IDE 才能编译任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:43:16.180

这似乎与**std::vector**相关。不确定它是自己损坏还是*密件抄送*处理的方式是问题所在。但是切换到 C 风格的数组作为测试反而使 ICE 消失了，它现在在调试和发布模式下都可以正常工作。

```
TNotifyEvent m_availableCallbacks[7]; 
```

我想避免这种情况，因为向向量添加新事件几乎只涉及一行代码。现在还要记住要更改的内容更多。但是，最好让应用程序编译。

如果我错误地认为这是 BCC 中的一个错误，请纠正我，以便我可以尽快回到使用向量 :)... 否则我希望 Embarcadero 尽快修复这个问题。*****

# dynamics-crm-2011 - CRM 2011：没有名称的运营前实体引用？

> ID：10812417
> 
> 赞同：2
> 
> 时间：2012-05-30T08:12:24.000
> 
> 标签：dynamics-crm-2011

长话短说，我正在尝试使用在预操作阶段执行的插件来获取查找值的名称。

虽然所讨论的属性/字段包含实体引用对象，但由于某种原因，该对象仅包含实体引用的逻辑名称和 ID，但不包含名称值（为空）...

有谁知道这是为什么，以及是否有比只为检索名称字段而对数据库进行服务调用更好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:42:56.387

您可以执行以下操作来获取实体的属性：

```
string attribute_name = String.Empty;
Entity entity = (Entity)context.InputParameters["Target"];

EntityReference _id = (EntityReference)entity["AttributeName"];

ColumnSet col = new ColumnSet(new String[] { "name" });
            var NameRetrieved = service.Retrieve("EntityName", _id.Id, col);
            if (NameRetrieved != null)
            {
                if (NameRetrieved.Attributes.Contains("name"))
                {
                   attribute_name = (string)productRetrieved["name"];
                }

                else
                {

                    attribute_name = "";

                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T19:08:41.000

您可以检查[Entity.FormattedValues 集合](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entity.formattedvalues.aspx)是否包含您需要的属性。

# api - 带有状态变化监听器的 Youtube Api

> ID：10812422
> 
> 赞同：-1
> 
> 时间：2012-05-30T08:13:04.150
> 
> 标签：api, youtube, listener

我正在测试 Youtube API，但状态监听器在演示中不起作用，我不明白为什么？

这是演示的简单代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
<script type="text/javascript">
    var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/v/u1zgFlCw8Aw?enablejsapi=1&playerapiid=ytplayer&version=3",
                       "ytapiplayer", "425", "356", "8", null, null, params, atts);
    function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("myytplayer");
      ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    }
    function onytplayerStateChange(newState) {
       alert("Player's new state: " + newState);
    }
</script><div id="ytapiplayer">
You need Flash player 8+ and JavaScript enabled to view this video.  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:48:03.380

你是在本地电脑上测试吗？

尝试在网站上测试并使用前缀 http:// 访问它

**编辑：** 你已经解决了。不好意思，发帖后才知道。

# sql - 将 copyfromrecordset 写入范围

> ID：10812424
> 
> 赞同：0
> 
> 时间：2012-05-30T08:13:15.897
> 
> 标签：sql, sql-server-2005, vba

我有以下 vba，它从单元格 C10 开始读取 MCO，直到其为空，并将从 SQL 数据库中获取机器数、解密数和升级机器数。

这工作正常，但我无法获取相应行中的数据。目前它总是将数据写入 D10，因为我已经对其进行了硬编码，但我不确定如何让它递增或写入 MCO 已从中读取的同一行。如果记录集为空，我会遇到同样的问题。我想在 3 列中插入 0 0 0

非常感激任何的帮助

```
Sub Summary_Click()

Dim MyConnObj As New ADODB.Connection 'ADODB Connection Object
Dim myRecSet As New ADODB.Recordset 'Recordset Object
Dim sqlStr As String ' String variable to store sql command

Range("D9:F34").Select
Range("D9:F34").Clear

Range("C10").Select

Set myRecSet = New ADODB.Recordset

Do Until IsEmpty(ActiveCell)
    strMCO = ActiveCell.Value

    MyConnObj.Open _
        "Provider = sqloledb;" & _
        "Data Source=xxx;" & _
        "Initial Catalog=xxx;" & _
        "User ID=xxx;" & _
        "Password=xxx;"

    strqa = " SELECT Count (distinct DeviceData.machinename) As [Number Of Devices], sum(case buildstatus when 'Decrypted' then 1 else 0 end) Decrypted, sum(case buildstatus when 'Upgrading' then 1 else 0 end) Upgrading, SiteList.Region "
    strqb = " FROM dbo.DeviceData JOIN dbo.SiteList ON dbo.DeviceData.CurrentSite = dbo.SiteList.SiteCode"
    strqc = " where MCO = '" & strMCO & "' "
    strqd = " group by DeviceData.Country, SiteList.Region"

    sqlStr = strqa & strqb & strqc & strqd

    myRecSet.Open sqlStr, MyConnObj, adOpenKeyset

    ActiveCell.Offset(0, 1).Select

    ActiveSheet.Range("D10").CopyFromRecordset myRecSet
    'ActiveSheet.Range("D<10 + 1>).CopyFromRecordset myRecSet

    If myRecSet.RecordCount = 0 Then
        ActiveSheet.Range("D10, E10, F10") = "0"
    End If

    ActiveCell.Offset(1, -1).Select
    MyConnObj.Close
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:00:18.707

将 Excel 工作表作为连接表包含在内可能是最简单的方法。例如：

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

''Not the best way to get the name
strFile = ActiveWorkbook.FullName

''2007 / 2010 connection
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFile _
    & ";Extended Properties=""Excel 12.0 xml;HDR=Yes;"";"

cn.Open strCon

''ODBC Connection for sql server
scn = "[ODBC;DRIVER=SQL Server;SERVER\Instance;" _ 
    & "Trusted_Connection=Yes;DATABASE=Test]"

sSQL = "SELECT a.Stuff, b.ID, b.AText FROM [Sheet5$] a " _
& "INNER JOIN " & scn & ".table_1 b " _             
& "ON a.Stuff = b.AText"
rs.Open sSQL, cn

ActiveWorkbook.Sheets("Sheet7").Cells(1, 1).CopyFromRecordset rs 
```

对于任何指向 SQL Server 的链接，您都需要对自己使用的是干净的数据充满信心。

请注意，我提到了细胞。如果您不喜欢连接工作表的想法，您还可以参考单元格和步骤，例如`For i=1 To MaxRows`

# android - 如何在 Android 中使用“发送反馈”、FeedbackActivity？

> ID：10812432
> 
> 赞同：8
> 
> 时间：2012-05-30T08:13:58.630
> 
> 标签：android, android-activity

是否有使用**com.google.android.feedback.FeedbackActivity**的示例，就像它在 Google+ 应用中用于发送任何反馈一样？

我试着用它开始

```
Intent intent = new Intent();
intent.setClassName("com.google.android.feedback",  "com.google.android.feedback.FeedbackActivity");
startActivity(intent); 
```

但我只得到

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.android.feedback/com.google.android.feedback.FeedbackActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-30T22:22:11.337

# 所有 API 的解决方案

## 我已经添加了我所有的研究和相关帖子

我一直在寻找最好的解决方案。请在此处查看开源的 Google“MyTracks”应用程序和 Google 代码：

[https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/TrackListActivity.java](https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/TrackListActivity.java)

看看他们如何处理 API 级别与其 API 适配器类之间的兼容性：

[https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks#mytracks%2Futil](https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks#mytracks%2Futil)

## 处理菜单：

**基于 API => 14（允许反馈）：**

```
menu.findItem(R.id.track_list_feedback)
    .setVisible(ApiAdapterFactory.getApiAdapter().isGoogleFeedbackAvailable()); 
```

如果 API 低于 14，这将删除“发送反馈”按钮。

## 发送反馈：

[https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/util/GoogleFeedbackUtils.java](https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/util/GoogleFeedbackUtils.java)

**基于 API => 14（发送反馈）：**

```
public class GoogleFeedbackUtils {

  private static final String TAG = GoogleFeedbackUtils.class.getSimpleName();

  private GoogleFeedbackUtils() {}

  /**
   * Binds the Google Feedback service.
   * 
   * @param context the context
   */
  public static void bindFeedback(Context context) {
    Intent intent = new Intent(Intent.ACTION_BUG_REPORT);
    intent.setComponent(new ComponentName("com.google.android.gms", "com.google.android.gms.feedback.LegacyBugReportService"));
    ServiceConnection serviceConnection = new ServiceConnection() {
        @Override
      public void onServiceConnected(ComponentName name, IBinder service) {
        try {
          service.transact(Binder.FIRST_CALL_TRANSACTION, Parcel.obtain(), null, 0);
        } catch (RemoteException e) {
          Log.e(TAG, "RemoteException", e);
        }
      }

        @Override
      public void onServiceDisconnected(ComponentName name) {}
    };
    // Bind to the service after creating it if necessary
    context.bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);
  }
} 
```

## 菜单代码：

[https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/TrackListActivity.java](https://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/TrackListActivity.java)

**来自源代码的片段，基于 API => 14：**

```
 @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent;
    switch (item.getItemId()) {
      case R.id.track_list_feedback:
        GoogleFeedbackUtils.bindFeedback(this);
        return true;
      default:
        return super.onOptionsItemSelected(item);
    }
  } 
```

## API 10+ 的解决方案：

在此处阅读： [如何使用 Intent.ACTION_APP_ERROR 作为 Android 中“反馈”框架的一种手段？](https://stackoverflow.com/questions/10559267/how-to-use-intent-action-app-error-as-a-means-for-a-feedback-framework-in-andr) 在这里： [http ://blog.tomtasche.at/2012/10/use-built-in-feedback-mechanism-on.html](http://blog.tomtasche.at/2012/10/use-built-in-feedback-mechanism-on.html)

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)  
private void sendFeedback() {
    try {
        int i = 3 / 0;
    } catch (Exception e) {
    ApplicationErrorReport report = new ApplicationErrorReport();
    report.packageName = report.processName = getApplication().getPackageName();
    report.time = System.currentTimeMillis();
    report.type = ApplicationErrorReport.TYPE_CRASH;
    report.systemApp = false;

    ApplicationErrorReport.CrashInfo crash = new ApplicationErrorReport.CrashInfo();
    crash.exceptionClassName = e.getClass().getSimpleName();
    crash.exceptionMessage = e.getMessage();

    StringWriter writer = new StringWriter();
    PrintWriter printer = new PrintWriter(writer);
    e.printStackTrace(printer);

    crash.stackTrace = writer.toString();

    StackTraceElement stack = e.getStackTrace()[0];
    crash.throwClassName = stack.getClassName();
    crash.throwFileName = stack.getFileName();
    crash.throwLineNumber = stack.getLineNumber();
    crash.throwMethodName = stack.getMethodName();

    report.crashInfo = crash;

    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setClassName("com.google.android.feedback", "com.google.android.feedback.FeedbackActivity");
    intent.putExtra(Intent.EXTRA_BUG_REPORT, report);
    startActivity(intent);
    }
} 
```

# 所有 API 的解决方案

**底线：**将为所有安装了 API 10+ 并安装了应用程序的手机生成应用程序报告，或者可以通过电子邮件发送信息。

**1.确保用户已安装应用程序**

```
if (applicationExist("com.google.android.feedback")) 
```

**2.如果用户安装了应用程序，直接运行反馈应用程序**

```
intent.setClassName("com.google.android.feedback", "com.google.android.feedback.FeedbackActivity"); 
```

**3.如果用户没有安装应用程序，发送反馈到Email**

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)  
private void sendFeedback() {
    try {
        int i = 3 / 0;
    } catch (Exception e) {
        ApplicationErrorReport report = new ApplicationErrorReport();
        report.packageName = report.processName = getApplication().getPackageName();
        report.time = System.currentTimeMillis();
        report.type = ApplicationErrorReport.TYPE_NONE;
        report.systemApp = false;

        ApplicationErrorReport.CrashInfo crash = new ApplicationErrorReport.CrashInfo();
        crash.exceptionClassName = e.getClass().getSimpleName();
        crash.exceptionMessage = e.getMessage();

        StringWriter writer = new StringWriter();
        PrintWriter printer = new PrintWriter(writer);
        e.printStackTrace(printer);

        crash.stackTrace = writer.toString();

        StackTraceElement stack = e.getStackTrace()[0];
        crash.throwClassName = stack.getClassName();
        crash.throwFileName = stack.getFileName();
        crash.throwLineNumber = stack.getLineNumber();
        crash.throwMethodName = stack.getMethodName();

        report.crashInfo = crash;

        try
        {
            if (applicationExist("com.google.android.feedback"))
            {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setClassName("com.google.android.feedback", "com.google.android.feedback.FeedbackActivity");
                intent.putExtra(Intent.EXTRA_BUG_REPORT, report);
                startActivity(intent);
            }
            else
            {
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.putExtra(Intent.EXTRA_EMAIL, new String[] { "burrowsapps@gmail.com" });
                intent.putExtra(Intent.EXTRA_SUBJECT, getApplicationContext().getApplicationInfo().loadLabel(getApplicationContext().getPackageManager()).toString()+"("+getPackageManager().getPackageInfo(getApplicationInfo().packageName, 0).versionName+")"+" Contact Form | Device: "+Build.MANUFACTURER+" "+Build.DEVICE+"("+Build.MODEL+") API: "+Build.VERSION.SDK_INT);
                intent.setType("plain/html");
                startActivity(intent);
            }
        } catch (Exception e2) { }
    }
}

private boolean applicationExist(String uri)
{
    PackageManager pm = this.getPackageManager();
    boolean exists = false;
    try
    {
        pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
        exists = true;
    }
    catch (Exception e) { }

    return exists;
} 
```

# android - 如何获取我的注册 ID 设备

> ID：10812433
> 
> 赞同：9
> 
> 时间：2012-05-30T08:14:00.380
> 
> 标签：android, push-notification, android-c2dm

我需要为 android 发送推送通知（如 iOS 我需要设备 udid 来发送简单推送）？

如果我需要获取设备的注册 ID，我该如何获取？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:47:01.757

你需要这个吗？

```
public static String getDeviceID(Context context) {
    final TelephonyManager tm = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);

    final String tmDevice, tmSerial, tmPhone, androidId;
    tmDevice = "" + tm.getDeviceId();
    tmSerial = "";// + tm.getSimSerialNumber();
    androidId = ""
            + android.provider.Settings.Secure.getString(
                    context.getContentResolver(),
                    android.provider.Settings.Secure.ANDROID_ID);

    UUID deviceUuid = new UUID(androidId.hashCode(),
            ((long) tmDevice.hashCode() << 32) | tmSerial.hashCode());
    String deviceId = deviceUuid.toString();

    return deviceId;
} 
```

# android - 如何获取Android图库中图像的图像ID？

> ID：10812437
> 
> 赞同：2
> 
> 时间：2012-05-30T08:14:05.713
> 
> 标签：android, image, android-gallery

这是我在一项活动中尝试做的事情：

1.  打开安卓图库。（完毕）

2.  单击图库中的一张图片时，我想

    *   获取该图像的 ID (????)
    *   将图像保存到 SharedPreferences（已经知道怎么做）
    *   在 ImageView 中显示图像（已经知道怎么做）

那么如何从图库中的图像中获取 ID？

PS：这种显示图像的方法可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:22:03.447

以下是一些如何在图库中选择图像的示例：

1.  [如何从图库中选择图像](http://viralpatel.net/blogs/2012/05/pick-image-from-galary-android-app.html)
2.  [Android Gallery 显示所选图像](https://stackoverflow.com/questions/6674896/android-gallery-display-selected-image)

希望您能从这些链接中获得灵感。

# sms - android 短信发件人名称返回 null

> ID：10812438
> 
> 赞同：2
> 
> 时间：2012-05-30T08:14:24.983
> 
> 标签：sms, sender

问候。

我正在尝试使用以下代码读取短信发件人姓名。变量名始终为空。请让我知道代码有什么问题。它正确返回地址但名称为空

```
 ContentResolver contentResolver = getContentResolver();        
        Cursor mCursor = contentResolver.query( Uri.parse( "content://sms/inbox" ), null, null, null, null);                 

        if(mCursor.getCount()==0)
              return;

        startManagingCursor(mCursor);   

        mCursor.moveToFirst();

                String fromadd = mCursor.getString(mCursor.getColumnIndex("address"));
                           String name = mCursor.getString(mCursor.getColumnIndex("person")); 
```

使用权限

```
<uses-permission android:name="android.permission.READ_SMS"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>  
<uses-permission android:name="android.permission.WRITE_SMS"></uses-permission>
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission> 
```

最好的问候乔蒂

# scroll - 带有固定位置 div 的 Facebook 画布应用

> ID：10812440
> 
> 赞同：3
> 
> 时间：2012-05-30T08:14:30.800
> 
> 标签：scroll, facebook-apps, facebook-canvas

有没有办法在打开“setAutoGrow()”的 Canvas 应用程序中显示固定位置的 div？我希望能够显示一个始终对用户可见的反馈小部件，即使在向上和向下滚动时也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:26:45.770

```
 var fixed = function() {
            FB.Canvas.getPageInfo(function(pageInfo) {
                var offset = Math.max(parseInt(pageInfo.scrollTop) - parseInt(pageInfo.offsetTop), 0);
                $("#menu").animate({
                    top: Math.max(offset, 0)
                }, 100);
                fixedTimer = setTimeout(fixed, 200);
            });
        }; 
```

如果您想将元素保持在顶部，请使用此功能。

# assembly - ARM LL/SC 通过寄存器宽度或缓存线宽度进行独占访问？

> ID：10812442
> 
> 赞同：4
> 
> 时间：2012-05-30T08:14:33.543
> 
> 标签：assembly, arm, atomic, lock-free, load-link-store-conditional

我正在开发我的无锁数据结构库的下一个版本，在 ARM 上使用 LL/SC。

对于我的 LL/SC 用例，我需要将它与 LDREX 和 STREX 之间的单个 STR 一起使用。（而不是用它来模拟 CAS。）

现在，我已经编写了代码，并且可以正常工作。然而，我担心的是它可能并不总是有效。如果您访问与 LL/SC 目标相同的高速缓存行，我已经在 PowerPC 上阅读过，您会破坏 LL/SC。

所以我在想，如果我的 STR 目标与我的 LL/SC 目标在同一缓存行上，那么 pow，我已经死了。

现在，LL/SC 目标和 STR 目标始终位于不同的 malloc() 中，因此它们直接位于同一缓存行中的机会可能很小（我可以通过填充 LL/SC 目标来保证这一点，因此它开始于缓存线边界并填充该缓存线）。

但是，如果 STR 目标在内存中的正确（错误！）位置，则可能存在错误共享。

查看 LDREX/STREX 文档，这描述了“物理地址”方面的独占访问。这意味着寄存器宽度粒度，而不是高速缓存行宽度粒度。

这就是我的问题——LDREX/STREX 是否对使用寄存器宽度粒度或缓存线宽度粒度的内存访问敏感？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:11:24.453

ARM 使用独占监视器通过加载链接/存储条件实现对内存的独占访问。[1] 包含所有细节，我想说的是以下几点：

> 独家预订颗粒
> 
> 当独占监视器标记地址时，可以标记为独占访问的最小区域称为独占保留颗粒 (ERG)。ERG 是在 8-2048 字节范围内以两个字节的倍数定义的实现。可移植代码不得假设 ERG 大小。

所以在我看来，你有点不走运。无论如何，大多数实际实现可能会保持一个很小的值，但据我所知，基本的 ARM 架构并不能保证，但也许有更多经验的人会发现我错了。:) 尽管如此，LL/SC 的所有实现都是某种形式的弱 LL/SC，所以你几乎永远不能完全确定 LL 和 SC 之间的存储不会总是杀死 SC，或者大多数情况下时间，或者可能永远不会......它只是依赖于架构和实现，我个人坚持使用 LL/SC 在紧密循环中实现 CAS 并像往常一样使用它并完成它。

[1] [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/CJAGCFAF.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/CJAGCFAF.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:36:39.120

请注意，LDREX/STREX 并没有像许多人认为的那样做。它们适用于多处理器系统，单处理器系统应考虑使用交换。ARM 文档通常非常好，但在这种特殊情况下，它们之间存在巨大差距。Linux 一直在不正确地使用这些指令，并且具有单处理器 ARM 内核的公司已经注意到这一点（由于人们在没有适当研究的情况下添加代码，Linux 存在许多与 ARM 相关的错误，每个版本都必须修复）。如果您在单处理器系统上拥有 L1 缓存，则可以，因为缓存支持该访问类型，如果它到达 AXI 总线，AMBA/AXI 规范会告诉硬件工程师，对于单处理器系统，您不需要支持该事务类型。不幸的是，ARM ARM/TRM 告诉软件工程师你应该停止使用交换并开始使用 LDREX/STREX，

这不是您的问题的答案，只是有关这些说明的一般信息，以尝试教育人们正确使用和所涉及的风险。（是的，去过那里，完成了，使用这些指令被烧毁了，必须修补 linux（在其他 linux 修补程序之上））

编辑....更多细节

在 ARM ARM 中：

```
Historically, support for shared memory synchronization has been with the read-locked-write operations
that swap register contents with memory; the SWP and SWPB instructions described in...

...

ARMv6 provides a new mechanism to support more comprehensive non-blocking shared-memory synchronization primitives
that scale for multiple-processor system designs.

...

The swap and swap byte instructions are deprecated in ARMv6\. It is recommended that all software
migrates to using the new synchronization primitives.

...

Uniprocessor systems are only required to support the non-shared memory model, allowing them to support
synchronization primitives with the minimum amount of hardware overhead.

...

Multi-processor systems are required to implement an address monitor for each processor.

STREX:

<Rd> Specifies the destination register for the returned status value. The value returned is:
0  if the operation updates memory
1 if the operation fails to update memory.

MemoryAccess(B-bit, E-bit)
if ConditionPassed(cond) then
  processor_id = ExecutingProcessor()
  physical_address = TLB(Rn)
  if IsExclusiveLocal(physical_address, processor_id, 4) then
    if Shared(Rn) == 1 then
      if IsExclusiveGlobal(physical_address, processor_id, 4) then
        Memory[Rn,4] = Rm
        Rd = 0
        ClearExclusiveByAddress(physical_address,processor_id,4)
      else
        Rd = 1
    else
      Memory[Rn,4] = Rm
      Rd = 0
  else
  Rd = 1
ClearExclusiveLocal(processor_id) 
```

AMBA/AXI 规格

```
The ARLOCK[1:0] or AWLOCK[1:0] signal selects exclusive access, and the RRESP[1:0] 
or BRESP[1:0] signal (see Table 7-1 on page 7-2) indicates the success or failure 
of the exclusive access.

...

If the master attempts an exclusive read from a slave that does not support exclusive
accesses, the slave returns the OKAY response instead of the EXOKAY response. The
master can treat this as an error condition indicating that the exclusive access is not
supported. It is recommended that the master not perform the write portion of this
exclusive operation.

...

b00 OKAY
b01 EXOKAY

...

ARLOCK/AWLOCK

b00 normal access
b01 exclusive access 
```

所以在软件方面，ARM ARM 告诉我们使用 LDREX/STREX 而不是交换，部分原因是它可以扩展到多处理器、共享内存、系统。*但*他们也告诉我们，单处理器系统不需要支持共享内存同步。因此，即使从软件方面来看，您也应该三思而后行……

我们从 STREX 的描述中知道，如果它返回独占 rd = 0，那么它就起作用了。如果 rd = 1 那么它不是排他性的（或其他原因）。LDREX 和 STREX 是成对完成的，共享内存系统逻辑正在寻找相同地址的对，并且硬件验证两者之间没有其他对该地址的访问。你担心谁会夹在两者之间？1）如果您中断/交换并且非常幸运 2）使用该内存的另一个处理器。linux 所做的，据我所知，进入一个紧密的无限循环，

```
while(1)
{
  ldrex
  strex
  if(rd==0) break;
} 
```

现在在单处理器系统上，ARM ARM 都建议它们不需要支持共享访问，因为它更简单（为什么需要增加这种复杂性？）。

作为程序员你看不到的东西。为 ldrex 和 strex 设置了 ARLOCK 或 AWLOCK，如果您正在实现共享访问，那么您关心这些位。如果您正在实现共享访问，那么如果两者之间没有访问，则将 EXOKAY 返回给 strex。EXOKAY 是一个 b01，在 strex 伪代码中是独占的全局，rd = 0。如果硬件返回 OKAY，b00，它不是独占的，对于 strex，rd = 1。然后 AMBA/AXI 规范说，如果您不支持共享系统，可以返回 OKAY 进行独占访问。因此，在尚未实现独占访问的单处理器上，strex 可以和/或将始终返回 OKAY，而不是 EXOKAY。这意味着 strex 永远不会得到 rd = 0 并且 linux 在无限循环中挂起。

这里真正的 linux 错误是我们当时看到的代码说如果（ARMv6 或更高版本）则使用 LDREX/STREX，否则使用 SWP。如果（ARMv6 或更新版本和多处理器）修复错误，则使用 LDREX/STREX，否则使用 SWP。

这意味着其他任何人想要使用 LDREX/STREX 出于任何其他原因，这正是这张票中引起我注意的地方。

现在你问，缓存跟它有什么关系？L1 缓存在处理器内核内部，它不会在 AXI/AMBA 总线上输出。它为 strex 返回 EXOKAY，和/或它完全实现共享。因此，如果 L1 缓存打开，那么您将获得 EXOKAY（第一次或最终，我不确定）。

现在你问，如果有缓存未命中怎么办？如果 L1 缓存关闭，那么首先关闭，然后它会在没有可缓存位的情况下到达 L2 缓存边界。所以 L2 缓存会按原样传递它，并且它会作为独占的。当 L1 缓存打开时，它会像上面一样返回 EXOKAY（最终或总是，不知道）如果 L1 未命中，则 L1 执行缓存行填充，它执行可缓存的未锁定读取。这会导致 L2 命中或未命中，如果 L2 未命中，则它会转到供应商特定的逻辑，在这种情况下返回 OKAY 但这没关系，因为它没有被锁定，它是一个正常的访问。一旦 l2 和 l1 被填满，L1 就会执行原始传输并返回 EXOKAY。

现在这是关键，首先在硬件中实现它是一种浪费和风险，所以我希望单处理器 ARMv6 和更新版本不会返回 EXOKAY，你必须逐案测试。第二，它是让 linux 在缓存关闭的情况下运行的 PITA。事实上，这需要一些工作。所以你不太可能在linux中正常看到这个。但问题就在那里，人们已经看到了，任何时候你自己使用这些说明时，你都应该小心正确地使用它们。使用裸机编程来测试系统以查看它是否会挂起应该非常简单，应该需要几秒钟/几分钟来编写代码。将系统置于可以尝试该代码的状态可能需要更长的时间（中断引导加载程序，使用 jtag 跳转等）。

# maven - 将补丁应用于richfaces 3.3.3

> ID：10812443
> 
> 赞同：1
> 
> 时间：2012-05-30T08:14:36.787
> 
> 标签：maven, richfaces, patch

我没有使用 Maven 或应用补丁的经验。

我想按照[https://issues.jboss.org/browse/RF-12062?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12677932#comment-12677932](https://issues.jboss.org/browse/RF-12062?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12677932#comment-12677932)中的说明应用补丁到richfaces库。

我已经从[http://www.jboss.org/richfaces/download/stable下载了richfaces 3.3.3.Final 源](http://www.jboss.org/richfaces/download/stable)

但是我找不到 WebXml.java 文件。我是否必须执行一些 Maven 命令来添加一些额外的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:53:22.517

该文件可以在 richfaces-ui-3.3.3.Final\framework\impl\src\main\java\org\ajax4jsf\webapp\WebXml‌​.java 中找到，您也可以手动修补代码，然后通过 mvn 构建它干净安装。我尝试通过 maven3 构建它，但该构建有一个遗留仓库，据我所知，maven3 不允许遗留仓库，所以我得到了一个错误

我已经尝试过maven2构建一些测试失败但jar已经构建，我不得不在maven中手动安装facelets jar并调整maven堆内存选项，如下所示：

**导出 MAVEN_OPTS="-XX:MaxPermSize=512m -Xmx2548M -XX:+UseCompressedOops"**

不幸的是，它对我的​​问题没有帮助我在使用**rich:tree时仍然出现以下错误**

**原因：java.util.zip.DataFormatException：无效的文字/长度代码**

但看起来@gadeynebram 问题已经解决了。

# objective-c - 我仍然有 NSXMLParser 的 UTF-8 编码问题

> ID：10812451
> 
> 赞同：0
> 
> 时间：2012-05-30T08:15:22.420
> 
> 标签：objective-c, ios, utf-8, nsxmlparser, nsxml

所以我修复了我的 XML 文件，PCDATA 确实是由错误的编码引起的（**ISO8859-1**不正确，请参阅[我之前的问题](https://stackoverflow.com/questions/10789547)），但我仍然使用 ISO-8859-1 或 UTF-8 编码的字符不正确。

问题是当我解析文件并获取字符时：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"%@", foundCharacters);
    [self.currentNodeContent appendString:string];
} 
```

如果我有例如“é”字符，它将被转换为“È”。

我该怎么办 ？帮助 ！感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:48:58.147

最后我[通过使用 TBXML](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)让它工作了。

# jquery - 第二个选择框没有填充数据？

> ID：10812453
> 
> 赞同：0
> 
> 时间：2012-05-30T08:15:41.137
> 
> 标签：jquery

我有两个选择框。根据在第一个框中选择的值，第二个框的值是从 mysql 数据库中填充的。我谷歌了很多，但我没有找到答案，谁能给我建议/解决方案。

我的代码：第一个选择框：

```
<select name="specialities" id="specialities">
<option value="select">-------select-------</option>
<option value="psychiatry">psychiatry</option>
<option value="sleep">sleep</option>
<option value="nuerology">nuerology</option>
<option value="pulmonary">pulmonary</option>
<option value="git">git</option>
<option value="general">general</option>
<option value="ent">ent</option>
<option value="cvs">cvs</option>
<option value="breast">breast</option>
<option value="reproductive_male">reproductive_male</option>
<option value="reproductive_female">reproductive_female</option>
</select> 
```

这是要从 db 中填充数据的 div：

```
<div>
<select id="main">
  <option>----------------------------</option>
</select>
</div> 
```

我用于填充选择框的 jquery 代码：

```
<script>
$(document).ready(function() {
 $("#specialities").change(function(){ 
     var spl = $(this).val();        
          $.ajax( 
              "doctor_details.php",
              {spl : "spl"},             
              function(data) {
                $('#main').html(data);       
             });
    </script> 
```

我的 php 页面医生_details.php：

```
$sql = "select * from doc_work_details where specalities='$_REQUEST[spl]'";

            $result = mysql_query($sql);

             while($row = mysql_fetch_array($result))
              {

                 echo '<option>'.$row['firstname'].'&nbsp;'.'&nbsp;'.'&nbsp;'. $row['qualification'].   '&nbsp;'.'&nbsp;'.'&nbsp;'
                  .$row['specialization'].'</option>';

              } 
```

提前谢谢你拉姆塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:49:38.107

例如，调用 $.ajax() API 的典型方法是

```
 $.ajax({
      type: "POST",
      url: "Default.aspx/GetDate",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg) {
        // Replace the div's content with the page method's return.
        $("#Result").text(msg.d);
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:23:43.307

我不是 jQuery 方面的专家，但是在你的`doctor_details.php`页面中，你是否回显了一个

```
<select> .... </select> 
```

之前和之后？

# javascript - 每秒在 div 中加载图像

> ID：10812455
> 
> 赞同：1
> 
> 时间：2012-05-30T08:16:08.487
> 
> 标签：javascript, jquery

我想定期在 div 中加载图像，比如每两秒

我做了一些像这样的愚蠢尝试

```
$(document).ready(function() {
  setTimeout('LoadImages()',100 );
});
function LoadImages()
{
   $('#Images').load('get_image.htm'); // get_image.htm displays image
}
</script>
<body>
<div id="Images"><div> 
```

我知道这一切都错了，但是需要做些什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:18:47.087

你需要`setInterval`而不是`setTimeout`

```
$(function() {
 var i = window.setInterval(function(){
    $('#Images').load('get_image.htm');
 },1000 );
}); 
```

您可以随时停止重新加载

```
clearInterval(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:18:14.027

这会做到

```
$(document).ready(function() {
  setInterval(function() {
    $('#Images').load('get_image.htm'); // get_image.htm displays image
  },100 );
}); 
```

使用[setInterval()](https://developer.mozilla.org/en/DOM/window.setInterval)您可以在指定的毫秒数（在本例中为 100）后重复一个函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:18:35.273

避免在 setTimeout/Interval 中使用字符串，试试这个

```
$(document).ready(function() {
  var div = $('#Images');
  setInterval(function() {
    div.load('get_image.htm'); // get_image.htm displays image
  }, 1000);
}); 
```

如果您需要每秒拨打电话，则延迟必须为`1000`（而不是 100，否则您的服务器将收到 600 reqs/min 而不是 60）。

`$('#Images')`还要创建对节点的外部范围引用，这样您就不会在每次函数调用时重新评估

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T08:31:20.057

```
$(document).ready(function() {

   function LoadImages() {

     setTimeout(function() {
        $('#Images').load('get_image.htm'); // get_image.htm displays image
        LoadImages(); // recursive call to LoadImages
     }, 1000)

   }
}); 
```

如果您想`LoadImages()`在完成图像加载后调用，那么

```
$(document).ready(function() {

   function LoadImages() {

     setTimeout(function() {
        $('#Images').load('get_image.htm', function() {

             LoadImages(); // recursive call to LoadImages

       }); // get_image.htm displays image

     }, 1000)

   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:19:12.533

如果您需要每秒，则使用 setInterval 和 1000ms 是 1 秒。

```
$(document).ready(function() {
  setInterval('LoadImages',1000 );
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T08:19:40.800

`setTimeout('LoadImages()',100 )`应该像`setTimeout(LoadImages,1000 );`1sec 一样`setTimeout`采用间隔参数`millisecond`。要每秒执行一次，您应该使用`setInterval`like `setInterval(LoadImages,1000)`。`setTiemout`只会运行一次。

as`setTimeout`需要函数引用 where using`'LoadImages()'`将立即触发`eval`并执行该函数并返回 null。

您还应该使用 append 而不是一次又一次地将图像加载到该 div 中，这将替换所有以前的图像。我不确定你是否有意这样做。

```
$(function() {
 var i = window.setInterval(function(){
    $('#Images').load('get_image.htm');
 },1000 );
});
function LoadImages()
{
 $.get('get_image.htm',function(data){
    $('#Images').append(data);
 });
} 
```

# java - 如何从 JTable 中的数据库中获取数据？

> ID：10812457
> 
> 赞同：0
> 
> 时间：2012-05-30T08:16:14.700
> 
> 标签：java, swing, jtable, actionlistener

我正在尝试以`JTable`.

这是我`ActionListener`的主要课程的一部分...

```
if(e.getSource()==jjb)
{
    String j[] = null;
    Vector r = new Vector();
    Vector finl = new Vector();
    try
    {
        d10.connection();
        int b = d10.getclmncnt();
        for(int g = 1; g<=b+1;g++)
        {
            j = new String[g];

        }
        for(int g = 1; g<=b;g++)
        {
            j[g] = d10.gettableclmn(g);
        }
        Vector v = new Vector();
        for(int g = 1; g<=b;g++)
        {
            v.addElement(j[g]);
        }
        int a = d10.getrwcnt();
        System.out.println("no of rows are   ::::  "+a);

        r = d10.getalldata(b);

        JTable t = new JTable(r,v);
        t.setLayout(null);
        TableColumn tc;
        for(int hh = 0;hh<t.getColumnCount();hh++)
        {               
            tc = t.getColumnModel().getColumn(hh);
            tc.setWidth(75);
        }
        JScrollPane js = new JScrollPane(t);

        js.setBounds(10, 100, 1000, 500);
        p5.add(js);
        p5.repaint();
    }
    catch (ClassNotFoundException e1)
    {
        e1.printStackTrace();
    }
    catch (SQLException e1)
    {
        e1.printStackTrace();
    }
} 
```

这是我与数据库连接的课程...

```
public void connection()throws SQLException, ClassNotFoundException
{
    Class.forName("oracle.jdbc.driver.OracleDriver");
    System.out.println("Driver Loaded");
    Properties p = new Properties();
    p.setProperty("user","system");
    p.setProperty("password", "oracle10");
    p.setProperty("url","jdbc:oracle:thin:@Suneel-PC:1521:XE");
    c = DriverManager.getConnection(p.getProperty("url"),p.getProperty("user"),p.getProperty("password"));
    System.out.println("connected");
}

public String gettableclmn(int b2)
{
    String s = null;
    int fh = b2;
    try
    {
        Statement ss = c.createStatement();
        ResultSet rs = ss.executeQuery("select * from data");
        ResultSetMetaData rsmd = rs.getMetaData();
        s = rsmd.getColumnName(fh);
        System.out.println("columns names are     "+rsmd.getColumnName(fh));        
    }
    catch (SQLException e)
    {
        e.printStackTrace();
    }

    return s;
}

public int getclmncnt()
{
    int h = 0;

    ResultSetMetaData rsmd;
    try {
        Statement ss = c.createStatement();
        ResultSet rs = ss.executeQuery("select * from data");
        rsmd = rs.getMetaData();
        h = rsmd.getColumnCount();
    }
    catch (SQLException e)
    {
        e.printStackTrace();
    }

    return h;
}

public Vector getalldata(int b)
{
    int d = b;
    String j = null;
    Vector rr  = new Vector();
    Vector v = new Vector(d);
    try
    {
        Statement s = c.createStatement();
        ResultSet r = s.executeQuery("select * from data");

        while(r.next())
        {
            v.add(r.getInt(1));
            v.add(r.getInt(2));
            v.add(r.getInt(3));
            v.add(r.getInt(4));
            v.add(r.getInt(5));
            v.add(r.getInt(6));
            v.add(r.getInt(7));
            v.add(r.getInt(8));
            v.add(r.getInt(9));
            v.add(r.getInt(10));
            v.add(r.getInt(11));
            v.add(r.getString(12));
        }
        rr.add(v);
    }
    catch (SQLException e)
    {
        e.printStackTrace();
    }

    return rr;
}

public int getrwcnt()
{
    ResultSet r;
    int j = 0;
    try
    {
        Statement s = c.createStatement();
        r = s.executeQuery("select count (*) from data");
        r.next();
        j = r.getInt(1);
    }
    catch (SQLException e)
    {
        e.printStackTrace();
    }

    return j;
} 
```

当我运行此代码时，只有第一个结果显示在 中`JTable`，但是当我调用`function d10.getrwcnt();`它时，它会以行的形式给我输出`79`。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:24:34.097

您的问题是`getalldata`方法循环。

```
Vector v = new Vector(d);
    try {

        Statement s = c.createStatement();
        ResultSet r = s.executeQuery("select * from data");

        while(r.next()) 
        //Every time when this loop gets executed you are adding
        //data to the same vector v, instead one instance depicts one row in database,
        //so you will have to create a new instance everytime.
        {
            v = new Vector(d); //create an instance for every row in database.
            v.add(r.getInt(1));
            v.add(r.getInt(2));
            v.add(r.getInt(3));
            v.add(r.getInt(4));
            v.add(r.getInt(5));
            v.add(r.getInt(6));
            v.add(r.getInt(7));
            v.add(r.getInt(8));
            v.add(r.getInt(9));
            v.add(r.getInt(10));
            v.add(r.getInt(11));
            v.add(r.getString(12));
            rr.add(v); // add the values here
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:27:45.373

移动第一行和最后一行，

```
 Vector v = new Vector(d);
    .... 
    while(r.next()) {
        v.add(r.getInt(1));
        v.add(r.getInt(2));
        ...
        v.add(r.getString(12));
    }

    rr.add(v); 
```

在循环内部，如下所示，

```
 while(r.next()) {
        Vector v = new Vector(d);
        v.add(r.getInt(1));
        v.add(r.getInt(2));
        ...
        v.add(r.getString(12));

        rr.add(v);
    } 
```

此外，我可以看到你的代码很 FUBAR，请不要介意。你可以做几件事，

*   适当处理连接，尝试使用一些连接池 API
*   `resultSet`使用后关闭
*   停止使用`Vector`，`ArrayList`改用，尤其是当 Vector 没有任何用途时
*   尽量遵守 Java 命名约定
*   使用有意义的变量，not `b`,`g`等`j`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:47:26.653

只有点，因为你没有搜索关于以下的内容

*   Vector 的工作原理

*   JTable 的工作原理

*   LayotManagers 的工作原理

*   阅读相关问题（右下角）

*   不要重新发明轮子，搜索 ResultSetTableModel 或 TableFromDatabase

*   您对 Swing 的并发性有疑问

# scheme - 打印变量名

> ID：10812459
> 
> 赞同：1
> 
> 时间：2012-05-30T08:16:19.393
> 
> 标签：scheme, r6rs

在 Scheme R6RS 中是否可以打印变量的名称？我是说：

```
(define (f) 
   (lambda (arg)
      (display ( *name* arg)))) 
```

这样：

```
(define my-var 3)
(f my-var) ; => displays the string "my-var") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:48:04.003

您需要一个语法扩展（又名宏）来防止评估：

```
#lang r6rs
(import (rnrs))

(define-syntax f
  (syntax-rules ()
    [(_ x) (display 'x)]))

(define my-var 3)
(f my-var) 
```

输出

```
my-var 
```

Racket 的宏扩展器显示了转换的效果：

```
(module anonymous-module r6rs
  (#%module-begin
   (import (rnrs))
   (define-syntax f (syntax-rules () [(_ x) (display 'x)]))
   (define my-var 3)
   (f my-var)))

->  [Macro transformation]

(module anonymous-module r6rs
  (#%module-begin
   (import (rnrs))
   (define-syntax f (syntax-rules () [(_ x) (display 'x)]))
   (define my-var 3)
   (display 'my-var))) 
```

当然，这意味着你可以简单地写

```
(display 'my-var) 
```

得到相同的结果;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:37:57.383

让我们看看表达式`(f my-var)`是如何计算的。首先，请注意这是一个应用程序。应用程序以某种顺序评估所有子表达式（在标准方案中它是未定义的，但大多数方案实现使用从左到右）。也就是说，表达式 f 被评估，给出一个代表 的值 v1 `(lambda () (lambda (arg) (display (*name* arg)))`。被`my-var`评估给出值`3`。现在`v1`应用于`3`.

所以这里的问题是函数永远不会看到变量名`my-var`，它只看到评估它的结果，`3`。

因此，您的问题的答案必须是“否”。

但它可能有一个替代解决方案。你需要它来做什么 - 调试？

# vb.net - 使用 VB.NET 进行 OAuth 身份验证

> ID：10812466
> 
> 赞同：2
> 
> 时间：2012-05-30T08:17:04.633
> 
> 标签：vb.net, twitter

我正在尝试按照[此示例](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)访问 Twitter Stream API (userstream)，因此我需要进行一些修改，这是我的最终代码：

```
 'We need to define some details about the request. This includes a unique oauth_nonce parameter which must be generated per request, and a timestamp
        Dim oauth_version As String = "1.0"
        Dim oauth_signature_method As String = "HMAC-SHA1"
        Dim oauth_nonce As String = Convert.ToBase64String(New ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()))
        Dim TimeSpan = DateTime.UtcNow - New DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc)
        Dim oauth_timestamp As Integer = Convert.ToInt64(TimeSpan.TotalSeconds).ToString()

        'The next step is to generate an encrypted oAuth signature which Twitter will use to validate the request.
        'To do this, all of the request data is concatenated into a particular format as follows
        Dim baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" & _
                         "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}"

        Dim baseString As String = String.Format(baseFormat, _
                        oauth_consumer_key, _
                        oauth_nonce, _
                        oauth_signature_method, _
                        oauth_timestamp, _
                        oauth_token, _
                        oauth_version)

        'baseString = String.Concat("GET&", Uri.EscapeDataString(stream_url), "&", Uri.EscapeDataString(baseString))
        'baseString = String.Concat(Uri.EscapeDataString(stream_url), "&", Uri.EscapeDataString(baseString))
        baseString = Uri.EscapeDataString(stream_url)

        'Using this base string, we then encrypt the data using a composite of the secret keys and the HMAC-SHA1 algorithm.
        Dim compositeKey As String = String.Concat(Uri.EscapeDataString(oauth_consumer_secret), "&", Uri.EscapeDataString(oauth_token_secret))
        Dim oauth_signature As String

        Dim hasher As HMACSHA1 = New HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey))
        Using hasher
            oauth_signature = Convert.ToBase64String(hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)))
        End Using

        'The oAuth signature is then used to generate the Authentication header.
        'This requires concatenating the public keys and the token generated above into the following format
        Dim headerFormat As String = "OAuth oauth_nonce=""{0}"", oauth_signature_method=""{1}"", " & _
                                       "oauth_timestamp=""{2}"", oauth_consumer_key=""{3}"", " & _
                                       "oauth_token=""{4}"", oauth_signature=""{5}"", " & _
                                       "oauth_version=""{6}"""
        Dim authHeader As String = String.Format(headerFormat, _
                                                Uri.EscapeDataString(oauth_nonce), _
                                                Uri.EscapeDataString(oauth_signature_method), _
                                                Uri.EscapeDataString(oauth_timestamp), _
                                                Uri.EscapeDataString(oauth_consumer_key), _
                                                Uri.EscapeDataString(oauth_token), _
                                                Uri.EscapeDataString(oauth_signature), _
                                                Uri.EscapeDataString(oauth_version))

        'We are now ready to send the request, which is the easy part.
        'Note, we must also disable the Expect: 100-Continue header using the ServicePointManager.
        'Without this code, .NET sends the header by default, which is not supported by Twitter
        Dim req As WebRequest
        Dim res As HttpWebResponse
        Dim streamReader As StreamReader
        Dim wait As Integer = 250
        Dim jsonRes As String = ""
        Dim encode As Encoding = System.Text.Encoding.GetEncoding("utf-8")

        ServicePointManager.Expect100Continue = False
        req = WebRequest.Create(stream_url)
        req.Headers.Add("Authorization", authHeader)

        res = DirectCast(req.GetResponse(), HttpWebResponse)
        streamReader = New StreamReader(res.GetResponseStream(), encode)
        While True
            jsonRes = streamReader.ReadLine()

            'Success
            wait = 250
        End While

        'Abort is needed or responseStream.Close() will hang
        req.Abort()
        streamReader.Close()
        streamReader = Nothing
        res.Close()
        res = Nothing 
```

在这一行：*res = DirectCast(req.GetResponse(), HttpWebResponse)*我得到一个**401 - Unauthorized**，我想问题可能出在我准备 OAuth 签名的那一行，原来使用的是 POST，我需要 GET，所以我更改了它并尝试了以下 3 种替代方法：

```
 'baseString = String.Concat("GET&", Uri.EscapeDataString(stream_url), "&", Uri.EscapeDataString(baseString))
        'baseString = String.Concat(Uri.EscapeDataString(stream_url), "&", Uri.EscapeDataString(baseString))
        baseString = Uri.EscapeDataString(stream_url) 
```

你能帮我让 Twitter OAuth 在 VB.NET 中工作吗？

目前，Twitterizer 不是一个选项，因为它仅适用于 Visual Studio 2010，而 TwitterVB2.dll 仅适用于 REST API，而不适用于流 API，我不知道是否还有其他第三方库，但此时我会更喜欢用我自己的代码来解决（那里有太多未维护和不完整的库）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:25:23.657

**已解决**，实际上签名生成正常，因此错误出现在处理请求的方法中，这是我的最终代码，正如我所提到的，它基于[这个 C#](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)代码：

```
 Dim resource_url As String
    resource_url = "https://userstream.twitter.com/2/user.json"

    '==========================
    'OBTENCION DEL TOKEN Y SIGNATURE OAUTH

    Dim oauth_version As String = "1.0"
    Dim oauth_signature_method As String = "HMAC-SHA1"
    Dim oauth_nonce As String = Convert.ToBase64String(New ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()))

    Dim timeSpan As TimeSpan = DateTime.UtcNow - New DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc)
    Dim oauth_timestamp As String = Convert.ToInt64(timeSpan.TotalSeconds).ToString()

    Dim oauth_signature As String = GeneraOAuthSignature(resource_url, _
                                                          oauth_nonce, _
                                                          oauth_signature_method, _
                                                          oauth_timestamp, _
                                                          oauth_version)
    '==========================
    'FORMATEO DEL ENCABEZADO OAUTH
    Dim headerFormat As String = "OAuth oauth_nonce=""{0}"", oauth_signature_method=""{1}"", oauth_timestamp=""{2}"", oauth_consumer_key=""{3}"", oauth_token=""{4}"", oauth_signature=""{5}"", oauth_version=""{6}"""

    Dim authHeader As String = String.Format(headerFormat, Uri.EscapeDataString(oauth_nonce), Uri.EscapeDataString(oauth_signature_method), Uri.EscapeDataString(oauth_timestamp), Uri.EscapeDataString(oauth_consumer_key), _
                Uri.EscapeDataString(oauth_token), Uri.EscapeDataString(oauth_signature), Uri.EscapeDataString(oauth_version))

    '==========================
    'LLAMADA HTTP
    ServicePointManager.Expect100Continue = False

    Dim req As WebRequest
    Dim res As HttpWebResponse
    Dim streamReader As StreamReader
    Dim contenidoRespuesta As String = ""
    Dim encode As Encoding = System.Text.Encoding.GetEncoding("utf-8")

    req = WebRequest.Create(resource_url)
    req.Timeout = -1
    req.Headers.Add("Authorization", authHeader)

    res = DirectCast(req.GetResponse(), HttpWebResponse)

    '==========================
    'PROCESAR RESPUESTA
    streamReader = New StreamReader(res.GetResponseStream(), encode)
    While True
        contenidoRespuesta = streamReader.ReadLine()

    End While

    '==========================
    'CIERRE DE STREAMS Y COMUNICACIONES
    'Abort is needed or streamReader.Close() will hang
    req.Abort()
    streamReader.Close()
    streamReader = Nothing
    res.Close()
    res = Nothing 
```

在哪里：

```
Function GeneraOAuthSignature(ByVal stream_url As String, _
                              ByVal oauth_nonce As String, _
                              ByVal oauth_signature_method As String, _
                              ByVal oauth_timestamp As String, _
                              ByVal oauth_version As String) As String
    'The next step is to generate an encrypted oAuth signature which Twitter will use to validate the request.
    'To do this, all of the request data is concatenated into a particular format as follows
    Dim baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" & _
                     "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}"

    Dim baseString As String = String.Format(baseFormat, _
                    oauth_consumer_key, _
                    oauth_nonce, _
                    oauth_signature_method, _
                    oauth_timestamp, _
                    oauth_token, _
                    oauth_version)

    baseString = String.Concat("GET&", Uri.EscapeDataString(stream_url), "&", Uri.EscapeDataString(baseString))

    'Using this base string, we then encrypt the data using a composite of the secret keys and the HMAC-SHA1 algorithm.
    Dim compositeKey As String = String.Concat(Uri.EscapeDataString(oauth_consumer_secret), "&", Uri.EscapeDataString(oauth_token_secret))
    Dim oauth_signature As String

    Dim hasher As HMACSHA1 = New HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey))
    Using hasher
        oauth_signature = Convert.ToBase64String(hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)))
    End Using

    Return oauth_signature
End Function 
```

# jquery - 真的有办法通过复杂的页面、嵌套的 AJAX 进行无缝页面加载吗？

> ID：10812468
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:14.963
> 
> 标签：jquery, html, ajax, event-handling

好的，我花了一整天的时间来改进我的无缝页面转换方法。以前我有一个简单的解决方案。当用户点击转到网站上的另一个页面时，我在内容上做了一个 jQuery slideUp 并淡化了背景以匹配即将到来的页面（因为每个页面都有自己的背景）。然后我加载新页面，该页面从“向上滑动”位置开始，然后在 window.load() 之后向下滑动。

它工作得非常好并且避免了任何并发症，因为它确实加载了新页面。但是大多数时候在新页面加载时都会出现这种微小的闪烁。我以为我可以做得比那更好。我见过其他可以平滑淡入淡出新页面的精美网站，为什么我不能这样做？

所以我完全重写了一些东西，以便擦除旧内容并使用 AJAX 加载来自其他页面的内容。然后我还必须加载和运行与新页面相关的脚本，包括从 Flickr 和 Soundcloud 加载具有更多 AJAX 的项目。实际上，除了一个主要问题外，我所有的工作都很好。我不能再指望 window.load() 何时触发 slideDown。一切都完成后，我想不出任何办法让 slideDown 发生。

如果我正在加载简单的静态页面，我认为使用 $.load() 回调来触发向下滑动会很好。但在我的情况下，我正在加载的页面正在执行进一步的 AJAX 调用，因此页面进入“空”，只有一个标题或其他内容，然后幻灯片发生，然后来自 Flickr 的所有图片都进来，破坏了平滑的幻灯片效果。

当我在“页面”之间来回跳跃时，还有一些其他令人不安的怪癖，所以我想知道这整个努力是否注定要灾难。也许我应该保留我简单的过渡方法？但是有没有什么办法可以减少跳转到新页面时内容的闪烁呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:50:13.787

我实际上想出了一个解决方案，通过 iframe 检索页面并在 iframe 中有一个 window.load 事件在它完成加载时通知它的父页面（直到它的 ajax 请求都进来才会发生）然后将 iframe 的内容附加到父页面并删除 iframe。虽然这不是一个非常有效的解决方案，并且 jquery Flickr 插件在 IE 中导致错误，所以我废弃了整个 iframe 并用 PHP 加载了 flickr 提要。我认为这是要走的路。尽可能使用服务器端代码而不是嵌套的 ajax 调用。

# jquery - 需要 jquery 闪烁文本只闪烁 8 秒，然后停止

> ID：10812473
> 
> 赞同：2
> 
> 时间：2012-05-30T08:17:29.520
> 
> 标签：jquery

我需要在 8 秒后停止闪烁文本。除了能够在 8 秒后停止之外，一切都运行良好。我是新手，需要帮助...

这是我正在使用的代码，请提供建议或在此代码中添加我需要在 8 秒后停止的内容：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.1.min.js"></script>

<div id="msg"> <strong><font color="red">text example</font></strong></p> </div>

<script type="text/javascript" >
function blink(selector){
    $(selector).fadeOut('slow', function(){
        $(this).fadeIn('slow', function(){
            blink(this);
        });
    });
}

blink('#msg');
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:45:15.440

您可以尝试在代码中添加这样的内容：

```
var stopBlinking = false;
setTimeout(function() 
{
    stopBlinking = true;
}, 8000);

function blink(selector) {
    $(selector).fadeOut('slow', function() {
        $(this).fadeIn('slow', function() {
            if (!stopBlinking)
            {
                blink(this);
            }
            else
            {
                $(this).hide();
            }
        });
    });
} 
```

看[这里的例子](http://jsfiddle.net/K5FHY/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:27:09.620

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.1.min.js"></script>

<div id="msg"> <strong><font color="red">text example</font></strong></p> </div>

<script type="text/javascript" >
var timer = 0;

var timeSpan = setInterval(function(){
    timer++;
},1000);

function blink(selector)
{
    if(timer == 0)
        timeSpan;
    $(selector).fadeOut('slow', function(){
        $(this).fadeIn('slow', function(){
            if(timer < 8)
               blink(this);
                    else
                    {
                  clearInterval(timeSpan);
              $(this).hide();
                    }
        });
    });
}

blink('#msg');
</script> 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:26:57.797

```
function blink(selector){

  // all blink happen with 8 seconds interval

  setTimeout(function() {

   $(selector).fadeOut('slow', function(){

        $(this).fadeIn('slow', function(){

            blink(this); // recursive function will call after fadeIn finish

        });
   });

  }, 8000); // set interval to 8 seconds
} 
```

# apache - Apache，重写和 .htaccess misterium

> ID：10812474
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:35.460
> 
> 标签：apache, .htaccess, mod-rewrite

我有以下`.htaccess`文件：

```
RewriteEngine On
RewriteBase /
RewriteRule ^plugins/.* pluginLoader.php [L]
RewriteRule ^settings\.php index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} \.art$ [OR]
RewriteCond %{REQUEST_FILENAME} /system/
RewriteRule .* index.php [L] 
```

它按预期工作，直到 URL 指向`plugins`目录中没有扩展名的现有文件的名称。我不知道为什么。例如有一个`/plugins/invoice/name.txt`文件。

```
http://localhost/plugins/invoice/name.txt
   uses pluginLoader.php as expected
http://localhost/plugins/invoice/name.
   uses pluginLoader.php as expected
http://localhost/plugins/invoice/name
   uses index.php! Why?
http://localhost/plugins/invoice/nam
   uses pluginLoader.php as expected 
```

这同样适用于所有具有`.txt`或`.php`扩展名的文件。如果文件有`.sql`扩展名，它既不使用`pluginLoader.php`也不使用`index.php`. 它发送*404 - 未找到*。

有预处理器吗？

还有什么有趣的：

```
RewriteEngine On
RewriteBase /
RewriteRule ^plugins/.* pluginLoader.php [L]
RewriteRule ^settings\.php index.php [L] 
```

删除最后四行使其工作。但是 URL`http://localhost/plugins/invoice/fill`仍然出现 404 错误。重命名文件后，URL 将起作用。

神秘...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:49:10.613

用这个替换你的 .htaccess 代码，看看是否有帮助：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^plugins/ pluginLoader.php [L,NC]

RewriteRule ^settings\.php/?$ index.php [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} \.art$ [OR]
RewriteCond %{REQUEST_FILENAME} /system/
RewriteRule ^ index.php [L] 
```

`$DOCUMENT_ROOT/plugins`确保目录中没有 .htaccess 。

# c# - 如何在 C# 中找到安装 dll

> ID：10812475
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:39.517
> 
> 标签：c#, c#-4.0

> **可能重复：**
> [如何检查 dll 是否已注册？](https://stackoverflow.com/questions/689072/how-to-check-if-a-dll-is-registered)

我需要查看本地机器是否安装了 SlimDX.dll。如何获取安装 dll 的列表？dll 的路径是 -> C:\Windows\Microsoft.NET\assembly\GAC_32

```
string  path="";
rk = Registry.LocalMachine.OpenSubKey("");
 string[] keys = rk.GetSubKeyNames();
foreach (string keyName in keys)
 {
       RegistryKey subKey = rk.OpenSubKey(keyName);
 } 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:22:34.453

你可以看看这里：

"[以编程方式检查程序集是否使用 C# 在 GAC 中加载](http://trikks.wordpress.com/2011/07/13/programmatically-check-if-an-assembly-is-loaded-in-gac-with-c/)"

如果链接变坏：

```
public static bool AssemblyExist(string assemblyname, out string response)
{
    try
    {
        response = QueryAssemblyInfo(assemblyname);
        return true;
    }
    catch (System.IO.FileNotFoundException e)
    {
        response = e.Message;
        return false;
    }
}

// If assemblyName is not fully qualified, a random matching may be 
public static String QueryAssemblyInfo(string assemblyName)
{
    var assembyInfo = new AssemblyInfo {cchBuf = 512};
    assembyInfo.currentAssemblyPath = new String('', assembyInfo.cchBuf);

    IAssemblyCache assemblyCache;

    // Get IAssemblyCache pointer
    var hr = GacApi.CreateAssemblyCache(out assemblyCache, 0);
    if (hr == IntPtr.Zero)
    {
        hr = assemblyCache.QueryAssemblyInfo(1, assemblyName, ref assembyInfo);
        if (hr != IntPtr.Zero)
        {
            Marshal.ThrowExceptionForHR(hr.ToInt32());
        }
    }
    else
    {
        Marshal.ThrowExceptionForHR(hr.ToInt32());
    }
    return assembyInfo.currentAssemblyPath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:49:10.697

可以通过以下代码获取 GAC 中可用的 dll 列表。有关更多详细信息，请访问[http://www.developerfusion.com/thread/42116/getting-list-of-assemblies-in-gac/](http://www.developerfusion.com/thread/42116/getting-list-of-assemblies-in-gac/)

```
string strGacDir = @"C:\Windows\Microsoft.NET\assembly\GAC_32";
string[] strDirs1 = System.IO.Directory.GetDirectories(strGacDir);
string[] strDirs2;

string[] strFiles;

foreach (string strDir1 in strDirs1)
{
    strDirs2 = System.IO.Directory.GetDirectories(strDir1);

    foreach (string strDir2 in strDirs2)
    {
        strFiles = System.IO.Directory.GetFiles(strDir2, "SlimDX.dll");
        foreach (string strFile in strFiles)
        {
            return true;
        }
    }
} 
```

# html - 我如何使复选框可见性为假但仍具有功能。html

> ID：10812476
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:40.810
> 
> 标签：html, asp.net-mvc-3, visibility

这是我创建复选框的方式：

@Html.CheckBoxFor(model => model.IsFinal, new { @readonly = "true", id = "chkFinal" })

我不想让它只读了，而是隐藏了。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:35:54.797

太好了，它的 MVC 我想知道你想在某个事件上隐藏这个复选框，或者只是想把它作为隐藏字段，或者你想要复选框，但它不应该在页面上可见，让我知道我可以帮助你

如果你想作为隐藏字段使用

```
@html.hiddenfor(model => model.isfinal) 
```

如果您想在某些事件后将此框更改为隐藏页面，您可以使用 javascript

```
$('#isfinal').css("display","none"); 
```

如果你觉得这个有用的投票它..

# wicket - 如何保持复选框的状态？

> ID：10812480
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:47.837
> 
> 标签：wicket

我的页面中有一个复选框组。检查输入后，如果输入错误，将向用户显示错误消息，但复选框的状态会丢失。这是我的代码的一部分，它显示了一个包含三个项目（CONFIGURATION、TESTER、DEVELOPER）的组复选框：

```
 group = new CheckGroup("group", user.getRoleNames());
    group.add(new CheckGroupSelector("groupselector"));

    // The list of possible roles
    List<String> roleNames = new ArrayList<String>();
    roleNames.add(Roles.CONFIGURATION.value());
    roleNames.add(Roles.TESTER.value());
    roleNames.add(Roles.DEVELOPER.value());

    group.add(new ListView("roles", roleNames) {
        protected void populateItem(ListItem item) {
            item.add(new Check("checkbox", item.getModel()));
            item.add(new Label("name", item.getModel()));
        }
    });
    add(group); 
```

我还有两个用户名和密码文本框。如果用户输入错误的密码，她/他会收到一条错误消息，但是在显示错误消息后，选中的项目变为未选中，你知道我怎样才能保持复选框的状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:19:27.730

我将我的代码更改如下：

```
 ListView roles = new ListView("roles", roleNames) {
            protected void populateItem(ListItem item) {
                item.add(new Check("checkbox", item.getModel()));
                item.add(new Label("name", item.getModel()));
            }
        };
        roles.setReuseItems(true);
        group.add(roles); 
```

现在它可以正常工作了。因此，唯一需要的是将 setReuseItems 设置为 true。

# javascript - 如何从数组中附加内容然后在jQuery中清除它

> ID：10812482
> 
> 赞同：0
> 
> 时间：2012-05-30T08:17:55.990
> 
> 标签：javascript, jquery, append

嗨，我想从图像集的标题和 src 创建一个数组。然后将其附加到列表中，然后清除数组（集合中的图像更改），然后清除数组和列表。随着集合中图像的变化，一次又一次地重复它。

这是HTML：

```
<div id="imageholder">
  <img src="images/a001.png" title="orange"/>
  <img src="images/a002.png" title="red apple"/>
  <img src="images/a003.png" title="green apple"/>
  <img src="images/a004.png" title="red apple"/>
</div>
<ul id="list"></ul> 
```

这是代码：

```
 title_array = [];
  src_array = [];
function sumarychange() {
  $("#imageholder img").each(function() {

// pushing each values into arrays
    title_array.push($(this).attr("title"));
    src_array.push($(this).attr("src"));

// i think this part will append the content in the arrays      
    var list = $('#list');
    var existing_item = $('#list_'+ title);

// removing items with the same titles      
    if (existing_item.length < 1){
    var new_item = $('<li />');
    new_item.attr('id', 'list_'+ title);
    new_item.html('<div>' + title + '</div><img src="' + src + '" />');
    list.append(new_item);
    }
  });
// i think this will set the arrays back to empty
  title_array.length = 0;
  src_array.length = 0;
} 
```

这只是一个示例。实际上，图像有更多标签。当再次调用此函数时，我不知道如何清空列表。我现在只是学习编码，我不知道如何纠正它以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:20:21.800

这在我看来像一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

从您上面的示例代码以及您[之前的问题](https://stackoverflow.com/questions/10794665/spit-items-into-different-arrays-and-retrieving-it-back)来看，我*猜*您正在尝试做的是根据现有元素集的属性更新条目列表，但具有重复标题的项目仅显示一次.

假设我做对了，这是一种方法：（演示：http: [//jsfiddle.net/SxZhG/2/](http://jsfiddle.net/SxZhG/2/)）

```
var $imgs = $("#imageholder"), $list = $("#list");

function summary_change() {
    // store data in tmp obj with title as key so we can easily ignore dups
    var store = {};  

    $imgs.find("img").each(function() {
        if (store.hasOwnProperty(this.title)) return; // ignore dup title
        store[this.title] = this.getAttribute("src");
    });

    $list.empty();  // empty the list
    for (var title in store) {  // add new list items
        $("<li>")
            .append($("<div>", {"text":title}))
            .append($("<img>", {"src":store[title]}))
            .appendTo($list);
    }
} 
```

请注意，如果多个图像具有相同的标题，`src`则摘要结果中仅使用第一个图像的标题。如果您希望使用`src`找到的最后一项，只需删除该行`if (store.hasOwnProperty(this.title)) return;`。

# python - 带有上传文件字段的 OpenERP 6.1 模块

> ID：10812483
> 
> 赞同：-1
> 
> 时间：2012-05-30T08:17:58.937
> 
> 标签：python, open-source, openerp

我想创建 OpenERP 6.1 模块，其中上传二进制文件字段作为视图字段之一。

该文件将作为二进制数据存储在数据库中，但在存储到数据库之前，我需要解析该文件，并将数据保存为其他创建的模块的一部分。

所以，我不知道如何在视图 xml 文件中指定上传文件，以及如何运行上传过程。有人可以帮我解决这个问题吗？一些代码片段或建议如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:29:52.637

看看[附件模块](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/4178/openerp/addons/base/ir/ir_attachment.py#L142)的工作方式，尤其是二进制数据列。您还应该查看[屏幕定义](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/addons/base/ir/ir.xml#L748)。

# php - 尝试在 Internet Explorer 中下载 xlsx 2007 文件

> ID：10812489
> 
> 赞同：4
> 
> 时间：2012-05-30T08:18:24.680
> 
> 标签：php, excel-2007, phpexcel

xlsx 文件不能在 IE 中下载但在 Firefox 中正常工作我的代码是

```
$objPHPExcel->setActiveSheetIndex(0);

// Redirect output to a client’s web browser (Excel2007)

header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');

header("Content-Disposition: attachment;filename='Monthly-Report-$month-$year'");

header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');

$objWriter->save('php://output');
//$objWriter->save(str_replace('.php', '.xlsx', __FILE__));
exit; 
```

在 IE 中显示错误消息，因为 Internet Explorer 无法下载 xlsx.php（这是我编写代码的 php 文件） Internet Explorer 无法打开此站点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:01:45.900

是的，如果您使用的是 HTTPS，那么 Internet Explorer 会出现问题。在处理文件下载时，您需要从响应中删除 Pragma 标头。

下载前放以下代码：

```
header("Pragma: "); 
```

仅当您使用安全 http 运行时才会出现这种情况，如果不是这种情况，请告诉我们。

您可能会在我的博客文章中找到更多描述，当我在 https 上遇到同样的问题时，我错了，而它在 IE 上非常适合 http。

[http://blogs.digitss.com/programming/internet-explorer-was-not-able-to-open-this-internet-site-the-requested-site-is-either-unavailable-or-cannot-be-成立/](http://blogs.digitss.com/programming/internet-explorer-was-not-able-to-open-this-internet-site-the-requested-site-is-either-unavailable-or-cannot-be-found/)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T08:26:13.943

使用`application/vnd.ms-excel`而不是`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`向后兼容。

如果您有权修改 Web 服务器的 mime 设置，则需要添加 `AddType application/vnd.openxmlformats .docx .pptx .xlsx` `AddType application/vnd.openxmlformats-officedocument.spreadsheetml.sheet .xlsx` 到您的，例如 apache conf。

之后，将您的文件名更改为`Monthly-Report-$month-$year.xlsx`。

# java - Spring MVC 导航路径

> ID：10812492
> 
> 赞同：0
> 
> 时间：2012-05-30T08:18:32.477
> 
> 标签：java, spring, spring-mvc

尝试在 spring mvc 中进行一些简单的导航时遇到问题。我有一个导航控制器：

```
@Controller
@RequestMapping("/secure")
public class NavigationController {

    @RequestMapping("/operation")
    public String processOperationPage() {
        //Some logic goes here
        return "corpus/operation";
    }

    @RequestMapping("/configuration")
    public String processConfigurationPage() {
        //Some logic goes here
        return "corpus/configuration";
    }

} 
```

并且有我的链接可以到达该控制器：

```
<a href="secure/operation.htm">Operation</a>
<a href="secure/configuration.htm">Configuration</a> 
```

第一次单击链接时，一切正常。在浏览器中，我看到了预期的正常路径。例如：`http://localhost/obia/secure/configuration.htm`. 但是如果我在这个页面，并且当我点击操作链接时，我想从这个页面到达 operation.htm 路径变成这样：`http://localhost/obia/secure/secure/operation.htm`。

出现`secure`两次。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:21:45.387

您的链接是相对的。在它们前面添加一个斜线将解决它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T08:33:45.653

如果您使用 JSP，请改用 JSTL：

```
<c:url value="/secure/operation.htm" /> 
```

记住在 JSP 文件中包含 taglib：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

通过使用 JSTL，您可以避免在将应用程序部署到不同的上下文（`http://host/`例如`http://host/myapp`

第一个将生成`http://host/secure/operation.htm`，第二个将为`http://host/myapp/secure/operation.htm`您生成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T08:26:32.837

根据当前页面从相对 URL 更改您的 URL 或计算相对 URL。例如，您可以将您的 URL 更改为基于主机的：

```

       <a href="/obia/secure/operation.htm">操作</a>
       <a href="/obia/secure/configuration.htm">配置</a>

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:40:55.097

上面的响应者在使用 c:url 生成绝对 URL 时有一个正确答案。但是，在某些情况下，由于防火墙配置，JSTL 无法正确了解 URL 库。在这种情况下，您可以使用相对 URL，但它必须知道您从哪里开始。即在页面obia/secure/operation.htm 上，url 将是../secure/configuration.htm，或者只是configuration.htm。dot dot 表示向上遍历一层。

# wordpress - 在 wordpress 中哪里可以编写自定义库函数？

> ID：10812493
> 
> 赞同：0
> 
> 时间：2012-05-30T08:18:33.647
> 
> 标签：wordpress

我是 wordpress 新手，我想知道在 wordpress 中在哪里编写自定义库函数？

这有一个特定的文件，我也应该添加它，或者以特定的方式？

例如 get_latest_news() 这样的函数将在我的许多小部件中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:39:17.923

如果您打开主题 functions.php 文件，您可以在其中包含您的自定义函数，

或使用

```
include('custom-functions.php'); 
```

这将加载文件并将其与您的标准 wordpress 功能分开。

# mongodb - 如何在 pymongo 中使用 getLastError？

> ID：10812497
> 
> 赞同：-1
> 
> 时间：2012-05-30T08:18:40.567
> 
> 标签：mongodb, pymongo, getlasterror

1，如何通过python获取monogd中我的操作的返回值？我知道getLastError可以在javascript中使用。

2、设置修改器有限制吗？如果我使用
**collection.update({"notification":"yes"},{"$set":** { **"idx":idx,"src_md5":src_md5,"src_size":src_size,"src_time":int(src_time) },"$addToSet":
{"server_list":host_name}})**
它不起作用。
但是当我使用
**collection.update({"notification":"yes"},{"$set":**
**{"idx":idx,"src_md5":src_md5,"src_size":src_size},"$set":**
**{ "src_time":int(src_time)},"$addToSet":{"server_list":host_name}})**
它工作。
为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T13:30:56.950

这对我有用

```
last_error = db.runCommand({"getLastError":1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:40:43.063

1）您可以使用写关注关键字参数，以确保`getLastError`被调用。各种方法如下所述：

*   **安全**：每次写入操作都使用 getlasterror？
*   **j** or **journal** : 阻塞直到写入操作被提交到日志。如果服务器在没有日志的情况下运行，则忽略。意味着安全=真。
*   **w**：（整数或字符串）如果这是副本集，则写入操作在复制到指定数量或标记的服务器集之前不会返回。意味着安全=真。

您可以根据需要在不同级别设置这些写入问题：

*   连接[级别](http://api.mongodb.org/python/current/api/pymongo/connection.html?highlight=getlasterror#pymongo.connection.Connection)：
*   数据库[级别](http://api.mongodb.org/python/current/api/pymongo/database.html?highlight=lasterror#pymongo.database.Database.safe)
*   收藏[级别](http://api.mongodb.org/python/current/api/pymongo/collection.html?highlight=lasterror#pymongo.collection.Collection.safe)
*   个别[查询](http://api.mongodb.org/python/current/api/pymongo/collection.html?highlight=kwargs#pymongo.collection.Collection.insert)

* * *

2）您的查询看起来不错，这是一个测试：

```
 db.test2.save({notification: 'yes'})
db.test2.update({"notification": "yes"}, {
    "$set": {"idx": 'a', "src_md5": 'b', "src_size": 'c', "src_time": 1}, 
    "$addToSet": {"server_list": 'stackoverflow'}
})
db.test2.find()

{
    "_id" : ObjectId("4fc5decf0631996582479878"),
    "idx" : "a",
    "notification" : "yes",
    "server_list" : [
        "stackoverflow"
    ],
    "src_md5" : "b",
    "src_size" : "c",
    "src_time" : 1
} 

```

# c# - Windows 7 上 C# 的 MSChart

> ID：10812503
> 
> 赞同：0
> 
> 时间：2012-05-30T08:19:02.933
> 
> 标签：c#, windows-7, mschart, visual-studio-2012, visual-c#-express-2010

我开始在 Windows XP 和 VIsual C# Express 2010 上开发一个应用程序。这个应用程序使用 MSChart 组件。现在我需要为 Winodws 7 准备好这个应用程序。因此我安装了 Win 7 和 Visual C# Express 2010（以及 Visula Studio 11 Beta），但我无法让 MSChart 工作。它没有在工具窗口中列出，我无法使用“选择项目...”来选择它。我下载并安装了 Microsoft Chart Controls für Microsoft .NET Framework 3.5 (MSCHART.exe)，但我无法让它在 VC# Express 2010 和 VS11B 中运行。

MSChart 不再适用于新系统还是我做错了什么？我很感激任何帮助！

编辑：刚刚发现在 Visual C# Express 2010 和 Visual Studio 11 Beta 上，.net 4 项目将在工具窗口中显示 MSChart 工具。更改为 .net 3.5 将删除两种环境中的图表工具...

问题是：该应用程序需要在 XP 上使用 .net 3.5（不是更高版本）和 Win 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:46:33.480

您的 Window7、Office 或您的应用程序是 64 位版本，我们在 64 位平台上运行 Active X 和 OCX 时遇到了许多问题。

# python - 选择图像区域（以编程方式！）：Python 3，matplotlib

> ID：10812514
> 
> 赞同：1
> 
> 时间：2012-05-30T08:19:37.563
> 
> 标签：python, python-3.x, matplotlib

我有一个图像，并希望以某种方式获得一个新图像，它将是原始图像的一个矩形区域，以原始图像的中点为中心。说，原始图像是 1000x1000 像素，我想在原始图像的中心获得大小为 501x501 的区域。

使用 Python 3 和/或 matplotlib 有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:32:44.210

PIL 库中的`image.crop`方法似乎完成了任务： [http ://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

例如：

```
br@ymir:~/temp$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import Image
>>> im=Image.open('self.jpg')
>>> im.size
(180, 181)
>>> box=(10,10,100,100)
>>> im1=im.crop(box)
>>> im1.show()
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:50:07.703

目前没有针对 python 3 的官方 matplotlib 版本（也没有 PIL）。

但是[matplotlib dev](https://github.com/matplotlib/matplotlib)应该是兼容的。

您可以使用 matplotlib 和 numpy 索引来实现这一点，而无需使用其他工具。然而 matplotlib 只支持[png native](http://matplotlib.sourceforge.net/users/image_tutorial.html#importing-image-data-into-numpy-arrays)。

```
import matplotlib.pyplot as plt 
import matplotlib.image as mpimg
import matplotlib.cbook as mplcbook

lena = mplcbook.get_sample_data('lena.png')
# the shape of the image is 512x512
img = mpimg.imread(lena)

fig = plt.figure(figsize=(5.12, 5.12))

ax1 = plt.axes([0, 0, 1, 1], frameon=False)
ax1.imshow(img)

center = (300, 320) # center of the region
extent = (100, 100) # extend of the region
ax2 = plt.axes([0.01, 0.69, 0.3, 0.3])
img2 = img[(center[1] - extent[1]):(center[1] + extent[1]),
           (center[0] - extent[0]):(center[0] + extent[0]),:]
ax2.imshow(img2)
ax2.set_xticks([])
ax2.set_yticks([])
plt.savefig('lena.png', dpi=100) 
```

![莉娜.png](../Images/a972730ce7a9fc204a09d17d0fe27061.png)

# json - Json-Viewer：URL 中的数据

> ID：10812517
> 
> 赞同：0
> 
> 时间：2012-05-30T08:20:00.817
> 
> 标签：json

我正在寻找一个在线 Json-Viewer，我可以在其中直接在 url 中附加 json-data。

我为我的应用程序创建的 json 数据编写了一个日志语句，我希望通过单击链接直接检查它更加舒适。

所以我想找到这样的东西：

```
http://jsonviewer.stack.hu/#{myJson:data} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T15:01:09.297

是的，您可以通过在 url 上托管 json 数据并将其传递给 jsonviewer.stack.hu 来实现

示例用法：

这里 json 托管在 url 上

```
http://refine.taxonomics.org/gbifchecklists/reconcile?query=Crepidomanes%20minutum 
```

输出

```
{"result":[{"summary":{"clazz":{"Polypodiopsida":1,"Filicopsida":1},"taxonomicStatus":"ACCEPTED","key":{"111237248":1,"3608345":1},"scientificName":"Crepidomanes minutum (Blume) K. Iwats.","identifiers":{"$VAR1 = [\n          {\n            'identifier' => '819461',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => '9ca92552-f23a-41a8-a140-01abaa31c931',\n            'usageKey' => 111237248,\n            'key' => 12360861\n          }\n        ];\n":1,"$VAR1 = [\n          {\n            'identifier' => '119151859',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => 'd7dddbf4-2cf0-4f39-9b2a-bb099caae36c',\n            'usageKey' => 3608345,\n            'key' => 1947318\n          }\n        ];\n":1},"phylumKey":{"59":1,"107377362":1},"nameType":"WELLFORMED","order":{"Hymenophyllales":1,"Polypodiales":1},"numDescendants":"0","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","parentKey":{"111237230":1,"6420275":1},"origin":"SOURCE","synonym":"$VAR1 = bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' );\n","datasetKey":{"9ca92552-f23a-41a8-a140-01abaa31c931":1,"d7dddbf4-2cf0-4f39-9b2a-bb099caae36c":1},"family":"Hymenophyllaceae","classKey":{"107305382":1,"7228684":1},"orderKey":{"7228685":1,"107305408":1},"accordingTo":{"The Catalogue of Life, 3rd January 2011":1},"sourceId":{"819461":1,"119151859":1},"genusKey":{"111237230":1,"6420275":1},"authorship":"K. Iwats. (Blume)","genus":"Crepidomanes","kingdom":"Plantae","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes minutum","kingdomKey":{"6":1,"107264512":1},"speciesKey":{"111237248":1,"3608345":1},"familyKey":{"2372":1,"107238235":1},"phylum":"Pteridophyta","rank":"SPECIES","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum K. Iwats. (Blume) (Plantae)","score":2,"type":["http://www.gbif.org/species/"],"id":111237248},{"summary":{"key":"128412817","scientificName":"Crepidomanes minutum","identifiers":"$VAR1 = [\n          {\n            'identifier' => '484386',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => 'e632b198-5b2f-47ee-b7a6-6531ea435fa3',\n            'usageKey' => 128412817,\n            'key' => 22633798\n          }\n        ];\n","nameType":"WELLFORMED","numDescendants":"0","sourceId":"484386","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","genusKey":"131300935","authorship":"","parentKey":"131300935","genus":"Crepidomanes","origin":"SOURCE","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes minutum","speciesKey":"128412817","synonym":"$VAR1 = bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' );\n","datasetKey":"e632b198-5b2f-47ee-b7a6-6531ea435fa3","rank":"SPECIES","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum (Life)","score":1,"type":["http://www.gbif.org/species/"],"id":128412817},{"summary":{"classKey":"106145328","orderKey":"106469758","clazz":"Polypodiopsida","key":"106137798","scientificName":"Crepidomanes minutum","identifiers":"$VAR1 = [\n          {\n            'identifier' => '32127',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => 'fab88965-e69d-4491-a04d-e3198b626e52',\n            'usageKey' => 106137798,\n            'key' => 5892380\n          }\n        ];\n","phylumKey":"106171079","nameType":"WELLFORMED","order":"Hymenophyllales","numDescendants":"0","sourceId":"32127","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","authorship":"","genusKey":"106112877","parentKey":"106112877","genus":"Crepidomanes","kingdom":"Viridiplantae","origin":"SOURCE","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes minutum","kingdomKey":"106147210","speciesKey":"106137798","synonym":"$VAR1 = bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' );\n","familyKey":"106112824","datasetKey":"fab88965-e69d-4491-a04d-e3198b626e52","phylum":"Streptophyta","rank":"SPECIES","family":"Hymenophyllaceae","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum (Viridiplantae)","score":1,"type":["http://www.gbif.org/species/"],"id":106137798},{"summary":{"classKey":"116129810","orderKey":"116129818","clazz":"Filicopsida","key":"110817557","scientificName":"Crepidomanes minutum (Blume) K. Iwats., 1985","identifiers":"$VAR1 = [\n          {\n            'identifier' => '205257',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => '1ec61203-14fa-4fbd-8ee5-a4a80257b45a',\n            'usageKey' => 110817557,\n            'key' => 12198868\n          }\n        ];\n","phylumKey":"116129809","nameType":"WELLFORMED","order":"Hymenophyllales","numDescendants":"0","sourceId":"205257","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","authorship":"K. Iwats., 1985 (Blume)","genusKey":"116129821","parentKey":"116129821","genus":"Crepidomanes","kingdom":"Plantae","origin":"SOURCE","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes minutum","kingdomKey":"116127234","speciesKey":"110817557","synonym":"$VAR1 = bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' );\n","familyKey":"116129819","datasetKey":"1ec61203-14fa-4fbd-8ee5-a4a80257b45a","phylum":"Pteridophyta","rank":"SPECIES","family":"Hymenophyllaceae","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum K. Iwats., 1985 (Blume) (Plantae)","score":1,"type":["http://www.gbif.org/species/"],"id":110817557},{"summary":{"key":"108671970","scientificName":"Crepidomanes minutum (Blume) K.Iwats.","identifiers":"$VAR1 = [\n          {\n            'identifier' => 'urn:lsid:ipni.org:names:17516350-1',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => '046bbc50-cae2-47ff-aa43-729fbf53f7c5',\n            'usageKey' => 108671970,\n            'key' => 9192285\n          },\n          {\n            'identifier' => 'http://www.ipni.org/ipni/idPlantNameSearch.do?&show_history=true&id=17516350-1',\n            'type' => 'URL',\n            'datasetKey' => '046bbc50-cae2-47ff-aa43-729fbf53f7c5',\n            'identifierLink' => 'http://www.ipni.org/ipni/idPlantNameSearch.do?&show_history=true&id=17516350-1',\n            'usageKey' => 108671970,\n            'key' => 9192284\n          }\n        ];\n","nameType":"WELLFORMED","numDescendants":"0","sourceId":"urn:lsid:ipni.org:names:17516350-1","remarks":"Crepidomanes minutum (Blume) K.Iwats.","canonicalName":"Crepidomanes minutum","link":"http://www.ipni.org/ipni/idPlantNameSearch.do?&show_history=true&id=17516350-1","parent":"Hymenophyllaceae","authorship":"K.Iwats. (Blume)","parentKey":"115219389","nomenclaturalStatus":"$VAR1 = [];\n","origin":"SOURCE","kingdom":"Plantae","species":"Crepidomanes minutum","kingdomKey":"115219148","speciesKey":"108671970","synonym":"$VAR1 = bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' );\n","familyKey":"115219389","datasetKey":"046bbc50-cae2-47ff-aa43-729fbf53f7c5","rank":"SPECIES","nubKey":"3608345","family":"Hymenophyllaceae"},"match":false,"name":"Crepidomanes minutum K.Iwats. (Blume) (Plantae)","score":1,"type":["http://www.gbif.org/species/"],"id":108671970},{"summary":{"clazz":"Polypodiopsida","taxonomicStatus":"SYNONYM","key":"106797953","scientificName":"Crepidomanes minutum (Blume) K.Iwats.","identifiers":"$VAR1 = [\n          {\n            'identifier' => 'e19935',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => 'fab88965-e69d-4491-a04d-e3198b626e52',\n            'usageKey' => 106797953,\n            'key' => 6544470\n          }\n        ];\n","phylumKey":"106171079","nameType":"WELLFORMED","order":"Hymenophyllales","numDescendants":"0","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","parentKey":"106112877","origin":"SOURCE","acceptedKey":"106137798","synonym":"$VAR1 = bless( do{\\(my $o = 1)}, 'JSON::XS::Boolean' );\n","datasetKey":"fab88965-e69d-4491-a04d-e3198b626e52","family":"Hymenophyllaceae","classKey":"106145328","orderKey":"106469758","sourceId":"e19935","genusKey":"106112877","authorship":"K.Iwats. (Blume)","genus":"Crepidomanes","kingdom":"Viridiplantae","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes minutum","kingdomKey":"106147210","speciesKey":"106137798","familyKey":"106112824","accepted":"Crepidomanes minutum","phylum":"Streptophyta","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum K.Iwats. (Blume) [=> Crepidomanes minutum] (Viridiplantae)","score":1,"type":["http://www.gbif.org/species/"],"id":106797953},{"summary":{"clazz":"Polypodiopsida","taxonomicStatus":"SYNONYM","key":"126638048","scientificName":"Crepidomanes minutum (Bl.) K. Iwats.","identifiers":"$VAR1 = [\n          {\n            'identifier' => '14239216',\n            'type' => 'SOURCE_ID',\n            'datasetKey' => '7ddf754f-d193-4cc9-b351-99906754a03b',\n            'usageKey' => 126638048,\n            'key' => 20762879\n          },\n          {\n            'identifier' => 'http://www.catalogueoflife.org/annual-checklist/details/species/id/14220376/synonym/14239216',\n            'type' => 'URL',\n            'datasetKey' => '7ddf754f-d193-4cc9-b351-99906754a03b',\n            'identifierLink' => 'http://www.catalogueoflife.org/annual-checklist/details/species/id/14220376/synonym/14239216',\n            'usageKey' => 126638048,\n            'key' => 20762878\n          }\n        ];\n","phylumKey":"127795625","nameType":"WELLFORMED","order":"Hymenophyllales","numDescendants":"0","canonicalName":"Crepidomanes minutum","parent":"Crepidomanes","parentKey":"127934692","origin":"SOURCE","acceptedKey":"126619208","synonym":"$VAR1 = bless( do{\\(my $o = 1)}, 'JSON::XS::Boolean' );\n","datasetKey":"7ddf754f-d193-4cc9-b351-99906754a03b","family":"Hymenophyllaceae","classKey":"127802277","orderKey":"127805044","sourceId":"14239216","link":"http://www.catalogueoflife.org/annual-checklist/details/species/id/14220376/synonym/14239216","genusKey":"127934692","authorship":"K. Iwats. (Bl.)","genus":"Crepidomanes","kingdom":"Plantae","nomenclaturalStatus":"$VAR1 = [];\n","species":"Crepidomanes proliferum","kingdomKey":"127795624","speciesKey":"126619208","familyKey":"127805045","accepted":"Crepidomanes proliferum (Bl.) Bostock","phylum":"Tracheophyta","rank":"SPECIES","nubKey":"3608345"},"match":false,"name":"Crepidomanes minutum K. Iwats. (Bl.) [=> Crepidomanes proliferum (Bl.) Bostock] (Plantae)","score":1,"type":["http://www.gbif.org/species/"],"id":126638048}]} 
```

现在您可以将 JSON 源 URL 传递给[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)作为

[http://jsonviewer.stack.hu/#](http://jsonviewer.stack.hu/#) {你的网址}

最终的 url 变成

[http://jsonviewer.stack.hu/#http://refine.taxonomics.org/gbifchecklists/reconcile?query=Crepidomanes%20minutum](http://jsonviewer.stack.hu/#http://refine.taxonomics.org/gbifchecklists/reconcile?query=Crepidomanes%20minutum)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:30:25.000

我不了解在线查看器，但自己编写它并没有什么大不了的，例如用 PHP。

使用以下代码创建`viewer.php`脚本：

```
if (isset($_GET['json'])) {
    echo '<pre>';
    print_r(json_decode($_GET['json']));
    echo '</pre>';
} 
```

并根据需要使用它：

```
http://youserver.com/viewer.php?json={"foo":"bar"} 
```

输出将是这样的：

```
stdClass Object
(
    [foo] => bar
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-12T12:16:04.440

这个[blinkJ JSON 查看器](http://startusingtools.com/blinkj-json-viewer.html)可能可以解决您的问题。您可以通过链接直接共享内容。“共享”按钮就在查看器面板的上方。

请注意，纯 JSON 字符串不是 URL 安全的，需要进行编码。

全面披露：我是这个工具的作者，因为我找不到任何可以轻松处理 50KB JSON 数据的在线工具。它仍在积极开发中，欢迎通过[GitHub](https://github.com/deluxine/startUsingTools/issues)提交任何功能请求或问题报告。

希望这可以帮助。

# android - 如何在 android 中清理画布上的绘制路径

> ID：10812518
> 
> 赞同：0
> 
> 时间：2012-05-30T08:20:06.333
> 
> 标签：android, surfaceview, android-canvas

我需要一些关于我的 android 项目的帮助。我有一个画布，我用一些位图填充它。我有一个在画布上画线的指针。我的问题是如何清理我之前画的线？我应该在画布上调用什么方法？我已经试过了`Canvas.drawColor()`，`invalidate()`那是行不通的。

和的功能是什么`Canvas.drawColor()`，请帮我解决我的问题。提前致谢

更新！如果我这样编写代码：

```
@Override
protected void onDraw(Canvas canvas) {
    // fills the canvas with black
    canvas.drawColor(Color.BLACK);

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

    canvas.drawPath(mPath, p);

    obaby.draw(canvas);
} 
```

我在哪里放置`invalidate()`我的代码？如果我想使用按钮清除画布，我应该使用什么代码？

更新！

我这样写我的onDraw：

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.BLACK);  
    if(letsdraw){
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, p);
        obaby.draw(canvas);
    }
} 
```

重置按钮中的方法是这样的：

```
public void rst(){
    letsdraw = false;
    invalidate();
    Log.v("tag", "this method called");

} 
```

但是当我调用该方法时画布没有变化。我在上面的代码上写错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:37:42.830

让你的逻辑像这样。`Canvas`在某些条件下画线。检查是否要画线，然后画线。

骨架代码 -

```
@Override
    protected void onDraw(Canvas canvas)
    {
        if(needToDrawLine)
        {
            //draw the line
        }
        // Other drawing stuff
    } 
```

现在只需更新您的`needToDrawLine`变量并调用`invalidate()`. 你会得到你的结果。让我知道它是否有效。

**更新：**

`onDraw()`每次调用`invalidate()`. 所以里面的一切`onDraw()`都会执行。方法是，您必须防止它绘制某些部分。`invalidate()`当您想要重绘整个视图时，您会调用，例如 - 用于清除画布的按钮。

*   `canvas.drawColor(Color.BLACK);`这条线将您的整个视图清除为黑色。

*   `canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);` 这条线在 (0,0) 处绘制位图。

*   `canvas.drawPath(mPath, p);`这条线画出路径`mPath`。

*   `obaby.draw(canvas);`其他一些对象自己绘制。

现在 - 例如，您想在按下按钮时清除屏幕。如果它绘制所有内容，只需初始化一个变量。并在按钮单击中更新变量。

```
public boolean drawEverything = true;

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);
        if(drawEverything)
        {
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            canvas.drawPath(mPath, p);
            obaby.draw(canvas);
        }
    }

    public void buttonClicked( ... )
    {
        drawEverything = false;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T08:59:51.693

我在我的活动中使用这个 errage 油漆

```
 mBitmap.eraseColor(Color.TRANSPARENT);
            mPath.reset();
            mView.invalidate(); 
```

# ios - 通过 3G 的 NSURLConnection 发生错误

> ID：10812521
> 
> 赞同：3
> 
> 时间：2012-05-30T08:20:25.460
> 
> 标签：ios, objective-c, cocoa-touch, nsurlconnection, 3g-network

我正在使用 IOS sdk 上传文件，在 Wifi 上工作正常，但有时在大文件上超过 3G 时会出现以下错误

```
- (void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)anError ..... 
```

“NSURLErrorDomain -1021 请求正文流已用尽”。

我知道我可以通过实现以下方法来解决这个问题：

```
- (NSInputStream*)connection:(NSURLConnection *)connection needNewBodyStream:(NSURLRequest *) request 
```

所以我做到了。但是当调用这个方法时，我陷入了 didFailWithError 下一个错误“操作无法完成。无法分配内存”。

如果我向方法 needNewBodyStream 添加一些延迟，此错误就会消失。有人可以解释一下我需要什么延迟，我该如何摆脱这种黑客攻击？

这是我的代码：

```
- (void) startUpload    
{    
   NSInputStream* fileStream = [[NSInputStream alloc] initWithFileAtPath: sourcePath];

   [self.request setHTTPMethod:@"PUT"];

   [self.request setValue:[NSString stringWithFormat: @"%lu", fileSize] forHTTPHeaderField: @"Content-Length"];

   [self.request setHTTPBodyStream: fileStream];

   NSURLConnection* newConnection = [[NSURLConnection alloc] initWithRequest: self.request delegate: self startImmediately: YES];

   self.connection = newConnection;

   [newConnection release];
   [fileStream release];
}

#pragma mark NSURLConnectionDelegate

- (NSInputStream *) connection: (NSURLConnection *) aConnection needNewBodyStream: (NSURLRequest *) request
{
   [NSThread sleepForTimeInterval: 2];

   NSInputStream* fileStream = [NSInputStream inputStreamWithFileAtPath: sourcePath];

   if (fileStream == nil)
   {
       NSLog(@"NSURLConnection was asked to retransmit a new body stream for a request. Returning nil will cancel the connection.");
   }

   return fileStream;
} 
```

# flash - as2 中的 if else 语句

> ID：10812522
> 
> 赞同：-1
> 
> 时间：2012-05-30T08:20:27.417
> 
> 标签：flash, if-statement, actionscript-2

我有一个 flash 文件，我正在从 XML 文档接收数据，并且在显示特定单词时需要加载图片。例如，我有：

```
 if (_root.main.ma4.team1.text = "specific text") 
     {
       _root.main.ma4.testo.text = "works";
    }else{
       _root.main.ma4.testo.text = "notworks";
    } 
```

所以我从 XML 文件中获取“特定文本”，但现在它总是向我展示“作品”，这与我从 XML 中获取的文本类型无关。仅当字段中没有文本时才显示我不起作用。因此，只有在显示特定文本时，我才需要向我展示“作品”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:21:31.760

你应该在比较时使用`==`而不是：`=`

```
if (_root.main.ma4.team1.text == "specific text") 
     {
        _root.main.ma4.testo.text = "works";
     }
else {
        _root.main.ma4.testo.text = "notworks";
     } 
```

而不是： `my_xml.firstChild.childNodes[2].firstChild;`

采用 ：`my_xml.firstChild.childNodes[2].nodeValue`

# css - 是否有仅限 Google Chrome 浏览器的 CSS hack

> ID：10812528
> 
> 赞同：-3
> 
> 时间：2012-05-30T08:20:53.000
> 
> 标签：css, google-chrome

在 Mozilla Firefox`top: 56px`中显示正确，但在 Google Chrome 中显示不正确。

有没有办法`top`在谷歌浏览器中设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T08:27:00.840

**基于webkit**的浏览器有 hack 。像这样写：

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
 div{top:0;} 
} 
```

这是一个仅适用于基于 webkit 的浏览器（Chrome、Safari 等）的 CSS 语句

# ios5 - 删除uitableViewCell ios5时显示警报

> ID：10812529
> 
> 赞同：0
> 
> 时间：2012-05-30T08:20:54.380
> 
> 标签：ios5, uitableview

我正在实现滑动以删除 uitableview 中的功能。我能够做到这一点，但现在我希望显示一条警报消息以确认删除。我以编程方式创建了 tableview。

## 视图控制器.h

```
@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>
{
    UITableView *tView;
    NSMutableArray *myArray;
    NSIndexPath *lastIndexPath;
}

@property(nonatomic,retain) UITableView *tView;
@property(nonatomic,retain) NSMutableArray *myArray;
@property(nonatomic,retain) NSIndexPath *lastIndexPath;

@end 
```

## 视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor=[UIColor lightGrayColor];

    myArray = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10", nil];

    // Do any additional setup after loading the view, typically from a nib.
    tView = [[UITableView alloc] initWithFrame:CGRectMake(30, 30, 700, 800) style:UITableViewStylePlain];
    tView.delegate=self;
    tView.dataSource=self;
    [self.view addSubview:tView];
    [tView release];
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 100.0;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [myArray count];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return YES if you want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{    
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Confirm Delete" message:@"Are you sure?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Delete", nil];

    [alert show];
    [alert release];
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        lastIndexPath = indexPath;
        NSLog(@"%@......%d",lastIndexPath,lastIndexPath.row);
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex==0)
    {
        NSLog(@"cancel");
    }
    else {
        NSLog(@"delete");
        [myArray removeObjectAtIndex:lastIndexPath.row];    //memory error 
        [tView deleteRowsAtIndexPaths:[NSArray arrayWithObject:lastIndexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //..do required thing and return cell
} 
```

我在用于警报视图的 clickButtonAtIndex 方法中出现内存错误。我认为它适用于 lastIndexPath，但 nslog() 在 lastIndexPath 中给出了正确的值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:45:12.427

当答案只是说“你不应该这样做”时，我讨厌它......所以我会解释你为什么会出错，然后希望你能更好地判断为什么你真的不应该这样做（来自用户界面的观点）。

您收到一个错误，因为您将一个您不拥有的值（您没有保留它）直接分配给一个 ivar。你可能是想说`self.lastIndexPath`。

发生的情况是警报视图直到下一次通过运行循环时才真正出现，此时`indexPath`已自动释放并且您尝试通过指针访问它。

更改`lastIndexPath = indexPath;`为`self.lastIndexPath = indexPath;`应该可以解决内存问题。（由于您将属性标记为保留，假设您合成了它并且没有编写自己的处理程序，当您使用`self.`前缀时，合成访问器将为您保留它）。

（顺便说一句，这就是为什么将您的 ivars 命名为与您的属性不同的名称并不是一个坏主意（例如，Apple 使用`<property_name>_`，在我的网站上我使用`m<Property_name>`它使得很难犯这种错误）。

好的......但是回到为什么你不应该这样做......

此时，您的用户通过向左滑动做出了可识别的手势，然后按下了标记为“删除”的红色按钮......现在您要弹出警报并要求他们确认？真的吗？好吧，如果你必须...

# wpf - WPF：使用后端编码将另一个页面加载到当前页面框架中

> ID：10812535
> 
> 赞同：1
> 
> 时间：2012-05-30T08:21:21.970
> 
> 标签：wpf, dynamic, load, frame

我有一个简单的程序。它有一个带有按钮和框架的基本画布。

```
 <Canvas Width="1200" Height="600" Name="frontPanel" Background="Blue">

         <Button Width="200" Height="90" Content="flipme" Click="flipme" VerticalAlignment="Top" HorizontalAlignment="Left" >
                <Button.RenderTransform>
                      <TransformGroup>
                           <TranslateTransform x:Name="BtnMove" X="500" Y="255" />
                      </TransformGroup>    
                </Button.RenderTransform>
          </Button>

          <Frame Name="wow" Width="1200" Height="600"></Frame>
  </Canvas> 
```

我想要完成的是，使用其后端编码将另一个 xaml 页面加载到当前页面中。我在网上看到的只是如何加载另一个页面并在加载后添加事件处理程序。

我加载页面的代码如下：

```
 string basePath = AppDomain.CurrentDomain.BaseDirectory;
     string commonPath = basePath.Remove(basePath.Length - @"\bin\Debug\".Length);
     wow.Source = (new Uri(commonPath + "\\Page2.xaml")); 
```

好吧，如果没有附加到 page2.xaml 的单击方法，它可以工作，但是当我将单击事件处理程序附加到 page2.xaml 中的按钮时，程序告诉我：

`Failed to create a 'Click' from the text 'button1_Click_1'.' Line number '12' and line position '144'.`

所以我的问题是我有什么办法可以将页面和后端编码一起加载而无需稍后分配？因为我将 page2.xaml 制作为带有单独后端编码的单独页面。我需要在 page1.xaml 中加载 page2.xaml 及其后端编码（单击事件处理程序）。我重申我已经在网上搜索过，但仍然没有找到任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:49:49.733

XAML 只是一种使用声明式样式构造对象的方式。它不包含任何“代码”，它只是构造对象。

The code in a page is placed in a codebehind file which is a standard .cs file. Note the "partial" keyword in the codebehind. This means it's just part of a class, with the other part being constructed from the xaml. Both of these parts get compiled into your final class which knows nothing about the xaml used to create it.

If you load a XAML file, that's all you're loading. A object that's constructed from markup.

If you want to encapsulate code behaviour, then you need to load an object, not a xaml file. The most suitable object that comes to mind is the `UserControl`, which is created from a xaml file and codebehind like you want.

因此，如果您想要显示具有自己行为的对象，请将它们设为用户控件。如果您只是想要具有相同行为的不同显示，则将它们加载为 xaml 文件并手动连接您的事件。

# asp.net-mvc-3 - 从 devexpress mvc 外部过滤网格

> ID：10812537
> 
> 赞同：0
> 
> 时间：2012-05-30T08:21:26.193
> 
> 标签：asp.net-mvc-3, devexpress

我有对 Grid 的 Devexpress DropDownEdit 控制。网格列之一是“状态”，它有五个来自枚举的值。DropDownEdit 应该按状态过滤网格列，如果我保存网格布局数据，下拉编辑中的选定值也应该保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:52:37.833

使用[此](http://www.devexpress.com/issue=Q364944)线程中的建议来了解有关如何实现 GridView“外部过滤器”的更多信息。

PS你为什么不就你的问题联系DX人员？

# jquery - 在脚本标签中添加 jquery-.XXmin.js 后代码停止工作

> ID：10812543
> 
> 赞同：0
> 
> 时间：2012-05-30T08:21:47.580
> 
> 标签：jquery, html, prototype

我下载了一个 Html5 开源记忆游戏代码我正在尝试添加一些功能，但是按钮操作和 removeClass()、addClass() ... 方法不起作用所以我记得在脚本标签中添加 jquery.js但在那之后，游戏又没有工作了。我认为这是prototype.s2.min.js 的问题。这是代码：

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

   <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<title>scripty2 Memory!</title>
<link href="memory.css" media="screen" rel="Stylesheet" type="text/css" />
 </head>
 <body>

<div id="field">
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>

  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>

  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>

  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>
  <div class="card"><img src="back.png"/></div>

  <div id="score">0</div>
  <div id="tries">0</div>
</div>

<!--<div id="controls">
  <a href="#" onclick="shuffle()">shuffle cards</a><br/>
  <a href="#" onclick="shuffle(3)">shuffle cards (slowly)</a>
</div>-->

<script type="text/javascript" src="prototype.s2.min.js"></script>
 <script type="text/javascript" src="memory.js"></script>
  <script  src="js/jquery-1.6.min.js"></script> // i added this 
 </body>
 </html> 
```

我没有更改 js 和 css 代码。任何想法请提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:24:29.263

jQuery 劫持了`$`原型使用的函数。看看该[`$.noConflict()`](http://api.jquery.com/jQuery.noConflict/)方法允许您将 jQuery 与其他框架一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:23:22.327

将它添加到其他 JS 文件之前，因为它们会一一运行。在其他 js 文件中使用它之前，您需要初始化 jquery。

```
<script  src="js/jquery-1.6.min.js"></script> 
<script type="text/javascript" src="prototype.s2.min.js"></script>
<script type="text/javascript" src="memory.js"></script> 
```

# android - 异构网格布局

> ID：10812552
> 
> 赞同：35
> 
> 时间：2012-05-30T08:22:23.947
> 
> 标签：android, android-layout, android-widget, android-xml, grid-layout

我正在尝试实现以下布局：

![目标布局](../Images/c7e778c87f52396e09e03aa9da9f1987.png)

我猜[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)适合我的需要，但是经过 2 个小时的努力，我什至无法创建类似的布局。布局**错误地调整了自身**的大小，**超出**了手机的屏幕，并且也**没有跨越**指定的行和列.

在这里，我选择了一个按钮，以便您可以看到它是如何超出边界的：

![失败](../Images/aa0b93a476e550dcf3e673007f057b51.png)

这是相关的 xml 代码：[https ://gist.github.com/2834492](https://gist.github.com/2834492)

我已经使用嵌套的线性布局达到了类似的布局，但无法针对不同的屏幕尺寸**正确调整它的大小。**

* * *

**更新 - 近似 LinearLayout 实现：**

XML 代码：[https](https://gist.github.com/cdoger/2835887) ://gist.github.com/cdoger/2835887 但是，问题是它没有正确调整自身大小，这里有一些屏幕配置不同的屏幕截图：

[![在此处输入图像描述](../Images/c8208d4be76eac29fade8593983aa0f7.png)](https://i.stack.imgur.com/F7Oix.jpg)

[![在此处输入图像描述](../Images/c13b1d423ce789d2af448635a0dd3d07.png)](https://i.stack.imgur.com/XBAVr.jpg)

[![在此处输入图像描述](../Images/77f04d3915f305dd0b92025ee071c8ae.png)](https://i.stack.imgur.com/nKJOm.jpg)

* * *

**TLDR：** *有人可以像第一张图片那样向我展示一个使用 GridLayout 的异构布局实现吗？*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T08:52:46.860

您面临的问题是由于不当使用 GridLayout。GridLayout 用于在网格中显示其子项，您试图在不扩展 GridLayout 的情况下覆盖它。虽然您想要的可以在代码中完成（使用 numcolumns 和 columnsize），但如果没有大量代码，它对于多种屏幕尺寸将无用。

唯一不需要大量黑客攻击的适当解决方案是明智地使用 LinearLayout 和 RelativeLayout。不应仅使用 LinearLayout，因为它用于将项目放在一行中（仅水平或垂直）。当您尝试执行底部的四个按钮时，这一点变得尤为明显。虽然上面的按钮可以通过 LinearLayout 轻松完成，但对于底部的四个按钮，RelativeLayout 是您所需要的。

**注意：** RelativeLayout 对于那些没有使用它们的经验的人来说可能有点棘手。一些陷阱包括：孩子重叠、孩子离开屏幕、高度和宽度渲染应用不当。如果您想要一个示例，请告诉我，我将编辑我的答案。

**最后说明：** 我完全赞成以独特的方式利用当前的框架对象，并且真的更喜欢提供所要求的解决方案。然而，鉴于问题的限制，该解决方案是不可行的。

**（修订）解决方案 1**

经过昨晚的仔细考虑，这可能是用一个纯LinearLayout来完成的。虽然我不喜欢这个解决方案，但它应该是多屏友好的，并且不需要我使用任何工具。应谨慎使用过多的 LinearLayout，因为根据 Google 的开发人员的说法，由于 layout_weight 属性，它可能会导致加载缓慢的 UI。当我回到家时，将提供第二个使用 RelativeLayout 的解决方案。***现在测试***这提供了所有屏幕尺寸和方向的所需布局参数。

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:orientation="vertical" > 
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="vertical">
        <LinearLayout 
            android:layout_width="match_parent" 
            android:layout_height="0dp" 
            android:layout_weight="1" 
            android:orientation="horizontal"> 
            <Button 
                android:id="@+id/Button01" 
                android:layout_width="0" 
                android:layout_height="match_parent" 
                android:layout_weight="1" 
                android:text="Button" />     
            <Button 
                android:id="@+id/Button02" 
                android:layout_width="0" 
                android:layout_height="match_parent" 
                android:layout_weight="1" 
                android:text="Button" />     
        </LinearLayout> 
        <Button 
            android:id="@+id/button3" 
            android:layout_width="match_parent" 
            android:layout_height="0dp"
            android:layout_weight="1" 
            android:text="Button" />   
        <LinearLayout 
            android:layout_width="match_parent" 
            android:layout_height="0dp" 
            android:layout_weight="1.00"
            android:orientation="horizontal">  
            <Button 
                android:id="@+id/button1" 
                android:layout_width="0dp" 
                android:layout_height="match_parent" 
                android:layout_weight="1" 
                android:text="Button" />   
            <Button 
                android:id="@+id/button2" 
                android:layout_width="0dp" 
                android:layout_height="match_parent" 
                android:layout_weight="1" 
                android:text="Button" />     
        </LinearLayout>
    </LinearLayout>    
    <LinearLayout 
        android:layout_width="match_parent" 
        android:layout_height="0dp" 
        android:layout_weight="1" 
        android:orientation="horizontal">     
        <LinearLayout 
            android:layout_width="0dp" 
            android:layout_height="match_parent" 
            android:layout_weight="1" 
            android:orientation="vertical" >    
            <Button 
                android:id="@+id/button4" 
                android:layout_width="match_parent" 
                android:layout_height="0dp"
                android:layout_weight="1" 
                android:text="Button" />     
            <Button 
                android:id="@+id/button5" 
                android:layout_width="match_parent" 
                android:layout_height="0dp" 
                android:layout_weight="2" 
                android:text="Button" />     
        </LinearLayout>     
        <LinearLayout 
            android:layout_width="0dp" 
            android:layout_height="match_parent" 
            android:layout_weight="1" 
            android:orientation="vertical" > 
            <Button 
                android:id="@+id/button6" 
                android:layout_width="match_parent" 
                android:layout_height="0dp" 
                android:layout_weight="2" 
                android:text="Button" /> 
            <Button 
                android:id="@+id/button7" 
                android:layout_width="match_parent" 
                android:layout_height="0dp" 
                android:layout_weight="1" 
                android:text="Button" /> 
        </LinearLayout> 
    </LinearLayout> 
</LinearLayout> 
```

**方案一说明**

LinearLayouts 的关键是将您的命令定义为单独的布局并将其他布局嵌套在其中。当您将约束应用于更多维度时，必须添加更多 LinearLayout 来封装其他维度。对你来说，为了保持这个比例，再多两个父母是至关重要的。何时应该添加另一个级别的一个很好的指标是何时***必须***使用除整数值之外的任何内容来利用 layout_weight。它变得很难正确计算。从那里将它分成几列相对简单。

**解决方案 2（失败）**

虽然我能够使用 RelativeLayout 和“struts”实现理想的结果，但我只能使用高度为 2 个按钮的倍数的布局来实现。这样的技巧会很棒，因为布局级别大大降低，所以我将研究一个纯 XML 解决方案，并在我实现它时在此处发布答案。同时，上面的 LinearLayout 应该完美地满足您的需求。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-14T01:09:34.273

我阅读了这个帖子并意识到我想要一个比线性布局更扁平的解决方案。经过一番研究，我最终制作了自己的布局。它受到 GridLayout 的启发，但略有不同。

请注意，如果您要复制粘贴代码，则需要在某些地方更改包名称。

这个布局有 4 个布局参数，孩子们用来定位自己。这些是**layout_left、layout_top、layout_right、layout_bottom**。ICGridLayout 本身有两个属性：**layout_spacing 和 columns**。

**Columns**告诉布局您希望它包含多少列。然后它将计算高度与宽度相同的单元格的大小。这将是布局宽度/列。

**间距**是您希望每个孩子之间的空间量。

layout_left|top|right|bottom 属性是每一边的坐标。布局不进行计算以避免碰撞或任何事情。它只是把孩子放在他们想去的地方。

如果你想要更小的方块，你只需要增加 columns 属性。

请记住，这是一个快速原型，我会继续努力，当我觉得它准备好时，我会将它上传到 Github 并在这里发表评论。

我下面的所有代码都应该产生以下结果： ![使用我提供的代码时的布局](../Images/b63ecf7bbae74b178061b5a68605334d.png)

***** 编辑***** 添加了为孩子们测量的调用，第一次忘记了。 ***结束编辑*** ICGridLayout.java：

```
package com.risch.evertsson.iclib.layout;

import android.content.Context;
import android.content.res.TypedArray;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;

import com.risch.evertsson.iclib.R;

/**
 * Created by johanrisch on 6/13/13.
 */
public class ICGridLayout extends ViewGroup {
    private int mColumns = 4;
    private float mSpacing;

    public ICGridLayout(Context context) {
        super(context);
    }

    public ICGridLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
    }

    public ICGridLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(attrs);
    }

    private void init(AttributeSet attrs) {
        TypedArray a = getContext().obtainStyledAttributes(
                attrs,
                R.styleable.ICGridLayout_Layout);
        this.mColumns = a.getInt(R.styleable.ICGridLayout_Layout_columns, 3);
        this.mSpacing = a.getDimension(R.styleable.ICGridLayout_Layout_layout_spacing, 0);
        a.recycle();
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed) {
            int width = (int) (r - l);
            int side = width / mColumns;
            int children = getChildCount();
            View child = null;
            for (int i = 0; i < children; i++) {
                child = getChildAt(i);
                LayoutParams lp = (LayoutParams) child.getLayoutParams();
                int left = (int) (lp.left * side + mSpacing / 2);
                int right = (int) (lp.right * side - mSpacing / 2);
                int top = (int) (lp.top * side + mSpacing / 2);
                int bottom = (int) (lp.bottom * side - mSpacing / 2);
                child.layout(left, top, right, bottom);
            }
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        measureVertical(widthMeasureSpec, heightMeasureSpec);

    }

    private void measureVertical(int widthMeasureSpec, int heightMeasureSpec) {
        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int heightMode = MeasureSpec.getMode(heightMeasureSpec);
        int width = 0;
        int height = 0;

        if (widthMode == MeasureSpec.AT_MOST || widthMode == MeasureSpec.EXACTLY) {
            width = MeasureSpec.getSize(widthMeasureSpec);
        } else {
            throw new RuntimeException("widthMeasureSpec must be AT_MOST or " +
                    "EXACTLY not UNSPECIFIED when orientation == VERTICAL");
        }

        View child = null;
        int row = 0;
        int side = width / mColumns;
        int childCount = getChildCount();
        for (int i = 0; i < childCount; i++) {
            child = getChildAt(i);

            LayoutParams lp = (LayoutParams) child.getLayoutParams();

            if (lp.bottom > row) {
                row = lp.bottom;
            }

            int childHeight = (lp.bottom - lp.top)*side;
            int childWidth = (lp.right-lp.left)*side;
            int heightSpec = MeasureSpec.makeMeasureSpec(childHeight, LayoutParams.MATCH_PARENT);
            int widthSpec = MeasureSpec.makeMeasureSpec(childWidth, LayoutParams.MATCH_PARENT);

            child.measure(widthSpec, heightSpec);
        }
        height = row * side;
        // TODO: Figure out a good way to use the heightMeasureSpec...

        setMeasuredDimension(width, height);
    }

    @Override
    public ViewGroup.LayoutParams generateLayoutParams(AttributeSet attrs) {
        return new ICGridLayout.LayoutParams(getContext(), attrs);
    }

    @Override
    protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
        return p instanceof ICGridLayout.LayoutParams;
    }

    @Override
    protected ViewGroup.LayoutParams
            generateLayoutParams(ViewGroup.LayoutParams p) {
        return new ICGridLayout.LayoutParams(p);
    }

    @Override
    protected ViewGroup.LayoutParams generateDefaultLayoutParams() {
        return new LayoutParams();
    }

    public static class LayoutParams extends ViewGroup.MarginLayoutParams {
        int right = 1;
        int bottom = 1;
        int top = 0;
        int left = 0;
        int width = -1;
        int height = -1;

        public LayoutParams() {
            super(MATCH_PARENT, MATCH_PARENT);
            top = 0;
            left = 1;
        }

        public LayoutParams(int width, int height) {
            super(width, height);
            top = 0;
            left = 1;
        }

        public LayoutParams(Context context, AttributeSet attrs) {
            super(context, attrs);
            TypedArray a = context.obtainStyledAttributes(
                    attrs,
                    R.styleable.ICGridLayout_Layout);
            left = a.getInt(R.styleable.ICGridLayout_Layout_layout_left, 0);
            top = a.getInt(R.styleable.ICGridLayout_Layout_layout_top, 0);
            right = a.getInt(R.styleable.ICGridLayout_Layout_layout_right, left + 1);
            bottom = a.getInt(R.styleable.ICGridLayout_Layout_layout_bottom, top + 1);
            height = a.getInt(R.styleable.ICGridLayout_Layout_layout_row_span, -1);
            width = a.getInt(R.styleable.ICGridLayout_Layout_layout_col_span, -1);
            if (height != -1) {
                bottom = top + height;
            }
            if (width != -1) {
                right = left + width;
            }

            a.recycle();
        }

        public LayoutParams(ViewGroup.LayoutParams params) {
            super(params);
        }

    }

} 
```

ICGridLayout.java 非常简单。它采用孩子们提供的价值观并将其展示出来。attrs.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="ICGridLayout_Layout">
        <attr name="columns" format="integer"/>
        <attr name="layout_left" format="integer"/>
        <attr name="layout_top" format="integer"/>
        <attr name="layout_right" format="integer"/>
        <attr name="layout_bottom" format="integer"/>
        <attr name="layout_col_span" format="integer"/>
        <attr name="layout_row_span" format="integer"/>
        <attr name="layout_spacing" format="dimension"/>
    </declare-styleable>

</resources> 
```

example_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.rischit.projectlogger"
    android:id="@+id/scroller"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.risch.evertsson.iclib.layout.ICGridLayout
        android:id="@+id/ICGridLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_spacing="4dp"
        app:columns="4" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="1"
            app:layout_left="0"
            app:layout_right="4"
            app:layout_top="0"
            android:background="#ff0000"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="3"
            app:layout_left="3"
            app:layout_right="4"
            app:layout_top="1"
            android:background="#00ff00"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="4"
            app:layout_left="0"
            app:layout_right="3"
            app:layout_top="1"
            android:background="#0000ff"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="4"
            app:layout_left="3"
            app:layout_right="4"
            app:layout_top="3"
            android:background="#ffff00"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="6"
            app:layout_left="0"
            app:layout_right="1"
            app:layout_top="4"
            android:background="#ff00ff"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_bottom="6"
            app:layout_left="1"
            app:layout_right="4"
            app:layout_top="4"
            android:background="#ffffff"
            android:text="TextView" />
    </com.risch.evertsson.iclib.layout.ICGridLayout>

</ScrollView> 
```

——约翰·里施

PS这是我的第一个长答案，我试图以正确的方式做到这一点。如果我失败了，请告诉我不要发火:) DS

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-30T08:35:17.467

像这样 ？

![在此处输入图像描述](../Images/8810426b244ff867f06a3bee89a296bf.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.54" >
        <Button
            android:id="@+id/Button01"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1.00"
            android:text="Button" />    
        <Button
            android:id="@+id/Button02"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1.00"
            android:text="Button" />    
    </LinearLayout>
    <Button
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button" />  
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="99dp" > 
        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />  
        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />    
    </LinearLayout>   
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >    
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >   
            <Button
                android:id="@+id/button4"
                android:layout_width="match_parent"
                android:layout_height="152dp"
                android:text="Button" />    
            <Button
                android:id="@+id/button5"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Button" />    
        </LinearLayout>    
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >
            <Button
                android:id="@+id/button6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Button" />
            <Button
                android:id="@+id/button7"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:text="Button" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-08T03:59:29.070

正如许多人所说，嵌套线性布局似乎是在这里获胜的唯一方法。一些解决方案没有以最灵活的方式使用布局参数。下面的代码试图做到这一点，并且以一种对纵横比变化具有鲁棒性的方式。详细信息在评论中。

![在此处输入图像描述](../Images/45ddf8fd641875f1a2b3640e2d39ad43.png) ![景观](../Images/4dde9b8e46941ac298da3df6af0aeb5f.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- First row. -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <!-- Equal weights cause two columns of equal width. -->

        <Button
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="A" />

        <Button
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="B" />
    </LinearLayout>

    <!-- Second row. -->

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="C" />

    <!-- Third row. -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <!-- Equal weights cause two columns of equal width. -->

        <Button
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="D" />

        <Button
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="E" />
    </LinearLayout>

    <!-- Uneven fourth and fifth rows. -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:baselineAligned="false" >

        <!-- Left column. Equal weight with right column gives them equal width. -->

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <!--
                 The use of weights below assigns all extra space to G. There
                 are other choices. LinearLayout computes sizes along its
                     axis as given, then divides the remaining extra space using
                 weights.  If a component doesn't have a weight, it keeps
                 the specified size exactly.
            -->

            <!-- Fill width of layout and use wrap height (because there's no weight). -->

            <Button
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="F" />

            <!-- Fill width of layout and put all the extra space here. -->

            <Button
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:text="G" />
        </LinearLayout>

        <!-- Right column. Equal weight with left column gives them equal width. -->

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <!-- Same as above except top button gets all the extra space. -->

            <Button
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:text="H" />

            <Button
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="I" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-20T12:13:59.393

所以这是我在一年后承诺的解决方案 =) 它基本上使用[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)来获取父布局的尺寸并相应地创建自定义视图。由于这段代码是一年前的 ViewTreeObserver 可能不是动态获取尺寸的最佳方法。

你可以在这里找到完整的源代码： [https ://github.com/cdoger/Android_layout](https://github.com/cdoger/Android_layout)

我将屏幕分成 8 个等宽和 6 个等高。这是我如何布置视图的快照：

```
final RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.main_layout);
ViewTreeObserver vto = mainLayout.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        final int oneUnitWidth = mainLayout.getMeasuredWidth() / 8;
        final int oneUnitHeight = mainLayout.getMeasuredHeight() / 6;
        /**
         * 1
         ***************************************************************/
        final RelativeLayout.LayoutParams otelParams = new RelativeLayout.LayoutParams(
                oneUnitWidth * 4, oneUnitHeight);
        otelParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        otelParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        // otelParams.setMargins(0, 0, 2, 0);
        View1.setLayoutParams(otelParams);
        /***************************************************************/

        /**
         * 2
         ***************************************************************/
        final RelativeLayout.LayoutParams otherParams = new RelativeLayout.LayoutParams(
                oneUnitWidth * 4, oneUnitHeight);
        otherParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        otherParams.addRule(RelativeLayout.RIGHT_OF, View1.getId());
        otherParams.setMargins(2, 0, 0, 0);
        View2.setLayoutParams(otherParams);
        /***************************************************************/
//... goes on like this 
```

这是最终的屏幕截图：

![在此处输入图像描述](../Images/ed6f64f5ff2a90163543875f228fa13b.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-02T11:01:51.700

如下所示将您的 GridLayout 嵌入 LinearLayout 并尝试它对我有用。

![在此处输入图像描述](../Images/a72a4cc2fb2d875bacb4ddc2f2e1cba3.png)

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="horizontal" >

<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2" >

    <Button
        android:layout_column="0"
        android:layout_columnSpan="1"
        android:layout_gravity="start|end"
        android:layout_row="0"
        android:text="ASDFASDF" />

    <Button
        android:layout_column="1"
        android:layout_gravity="start|end"
        android:layout_row="0"
        android:text="SDAVDFBDFB" />

    <Button
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:layout_gravity="fill|center"
        android:layout_row="1"
        android:text="ASDVADFBFDAFEW" />

    <Button
        android:layout_column="0"
        android:layout_columnSpan="1"
        android:layout_gravity="fill|center"
        android:layout_row="2"
        android:text="FWEA AWFWEA" />

    <Button
        android:layout_column="1"
        android:layout_columnSpan="1"
        android:layout_gravity="fill"
        android:layout_row="2"
        android:text="BERWEfasf" />

    <Button
        android:layout_width="94dp"
        android:layout_column="0"
        android:layout_columnSpan="1"
        android:layout_gravity="fill|center"
        android:layout_row="3"
        android:text="SDFVBFAEVSAD" />

    <Button
        android:layout_column="0"
        android:layout_columnSpan="1"
        android:layout_gravity="fill|center"
        android:layout_row="4"
        android:layout_rowSpan="2"
        android:text="GVBAERWEFSD" />

    <Button
        android:layout_column="1"
        android:layout_columnSpan="1"
        android:layout_gravity="fill|center"
        android:layout_row="3"
        android:layout_rowSpan="2"
        android:text="VSDFAVE SDFASDWA SDFASD" />

    <Button
        android:layout_column="1"
        android:layout_columnSpan="1"
        android:layout_gravity="fill|center"
        android:layout_row="5"
        android:text="FWEWEGAWEFWAE"/>
</GridLayout>

    </LinearLayout> 
```

# maven - maven-sonar-plugin 可以进行本地分析吗？

> ID：10812553
> 
> 赞同：6
> 
> 时间：2012-05-30T08:22:25.210
> 
> 标签：maven, sonarqube

我正在配置一个多模块 maven 项目，该项目在*验证*阶段强制执行*sonar:sonar 。*

 *如果声纳抛出一些警报，我还使用声纳的 build-breaker-plugin 来避免部署模块。

这种方法的问题是开发人员应该去声纳服务器检查警报。这还不错，但是如果多个用户尝试同时分析同一个模块，则不可能知道上次/当前分析是否有您的警报。

*背景：我们有一个 CI 系统，每小时构建所有模块。所以有时这会与一些开发人员部署相冲突（这会强制分析）*

恕我直言，只有 CI 系统应该将分析提交给声纳服务器，因为 CI 有最后提交和部署的代码。但是开发人员应该只在本地检查他的更改。

那么，为什么我们要强制在开发人员构建中进行分析？避免部署不遵守代码质量阈值的模块（sonar 的 build-breaker 插件对此有所帮助）。

有一种方法可以配置 maven-sonar-plugin 来做到这一点？

*   开发人员构建中的本地分析。
*   CI 构建中的服务器分析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:58:36.647

据我了解，您可能应该拥有 Sonar 的第一个实例，如果您的质量要求未得到满足，则仅在构建期间使用它来破坏它，以及您的 CI 系统使用的第二个实例，这是您的参考产品。如果您真的想强制执行您的流程并确保不会将违反这些要求的代码推送到您的 SCM 系统中，那么您可以将 Sonar 分析绑定到预提交挂钩上。但这对我来说似乎有点极端......

在 SonarSource，我们没有选择“因违规而阻止提交”的方法。事实上，我们认为只要您管理好一些技术债务（= 违规）是可以的。管理技术债务意味着审查 Sonar 中的每个传入违规并在代码中修复它们或将这些违规影响到行动计划，主要思想是技术债务不应该在开发冲刺结束时增加。这就是 Sonar 的审查功能的意义所在。Sonar 提供了一些小部件来监控审查的演变和新的违规行为，而无需审查。*

# c# - 使用 Windows 8 xaml C# 读写 xml 时出现 System.Unauthorizedaccesexception

> ID：10812554
> 
> 赞同：0
> 
> 时间：2012-05-30T08:22:27.920
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我正在开发 Windows 8 xaml C# 应用程序，我正在尝试读取一首歌曲 xml 并将新节点附加到它。代码是：

```
StorageFolder sf;
sf = KnownFolders.MusicLibrary;
StorageFile file = await sf.GetFileAsync(strSongName);
var item = await file.OpenAsync(FileAccessMode.Read);
IRandomAccessStream raStream;
IOutputStream outputStream;
DataWriter writer;
var lc = ApplicationData.Current.LocalFolder;
var infolder = Windows.ApplicationModel.Package.Current.InstalledLocation;

StorageFolder folder = await StorageFolder.GetFolderFromPathAsync(infolder.Path);
StorageFile file1 = await folder.GetFileAsync("songxml.xml");
var filetest = await file1.OpenAsync(FileAccessMode.Read);
Stream inStream = filetest.AsStreamForRead();
XDocument xdoc = XDocument.Load(inStream);
string content = xdoc.ToString();
raStream = await file1.OpenAsync(FileAccessMode.ReadWriteUnsafe);
outputStream = raStream.GetOutputStreamAt(0);
writer = new DataWriter(outputStream);
StringBuilder outputText = new StringBuilder();
outputText.Append(content.ToString()); 
```

运行此代码时出现 System.Unauthorizedaccessexception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:24:30.033

我有......实际上有同样的问题。鉴于您上次发表评论的日期，我想您现在已经弄清楚了。尽管如此，也许会有其他人访问这个线程，所以......我想你应该确保你已经将你期望的扩展添加到声明->支持的声明->文件类型关联。在使用音乐库时，可能不存在此限制，但对于文档库（制作案例），情况正是如此。

编辑：确保备份 LocalState 文件夹的内容，因为对应用程序清单的每次更改都会导致删除您的内容。

快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:58:06.687

我的精神调试能力告诉我，您需要在您的能力中提及您将访问 Music known 文件夹，并且您还没有这样做。

![在此处输入图像描述](../Images/ec02cbb2b21840370a478bb9b6855181.png)

我对吗？

# django - Django 非相关模型

> ID：10812555
> 
> 赞同：1
> 
> 时间：2012-05-30T08:22:28.000
> 
> 标签：django, google-app-engine, django-nonrel

我一直在查看有关 django nonrel 的文档，但认为我自己搞糊涂了。

我有一个使用[http://www.allbuttonspressed.com/projects/djangoappengine#installation](http://www.allbuttonspressed.com/projects/djangoappengine#installation)上的设置说明的项目，并继续设置 django 应用程序。我正在制作一个简单的新闻提要。现在已经开始创建模型，但似乎有两种方法可以做到这一点，使用 models.Model 或 db.Model。

models.Model 是 django 的做法，如果我使用它创建模型，它似乎使用 nosql，这也允许我使用内置的管理员。

db.Models 是非相关的做事方式。如果我使用它创建模型似乎再次使用 nosql 但这种方法不允许我使用 django 管理员。我认为 django non-rel 的目的是让我使用 admin 和 django 中的大部分默认功能。

我还想问一下应用引擎上的django non-rel和pure django有什么区别，这对模型的创建方式有何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:56:06.550

这是不正确的：

> db.Models 是非相关的做事方式

你是从哪里得到这个想法的？`db.Models`是*AppEngine*的做事方式。django-nonrel 允许您使用 Django 方式，即使您使用的是 AppEngine。正如您所说，django-nonrel 的重点是允许您使用管理员等，为此您需要以 Django 方式做事，即`models.Model`.

# javascript - 基于 REGEXP 的 string.prototype.split 插入故障

> ID：10812556
> 
> 赞同：1
> 
> 时间：2012-05-30T08:22:34.560
> 
> 标签：javascript

我正在研究一个可以读取 HTML 的解析器，但是拆分它的代码会导致“l”s 被插入到生成的数组的每个其他条目中。

正则表达式是这样的：

```
textarea.value.split(/(?=<(.|\n)+>)/) 
```

它应该做的是拆分条目/退出/单个 HTML/XML 标记，同时忽略选项卡和行终止符（它只是将它们附加到它们被分割的标记）

我可以在现场了解发生了什么吗？您可以在此处查看代码并进行编辑：http: [//jsfiddle.net/termtm/ew7Mt/2/](http://jsfiddle.net/termtm/ew7Mt/2/) 只需在控制台中查看它产生的结果。

**编辑：** MaxArt 是正确的，最后的 l`<html>`导致异常为“l”s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:00:34.147

尝试这个：

```
textarea.value.split(/(?=<[^>]+>)/); 
```

但是... Alnitak 说的。一个基于正则表达式的成熟的 HTML 解析器，特别是 Javascript 中正则表达式的功能支持很差，将是一个可怕的（和缓慢的）混乱。

我仍然需要找出您发现的奇怪行为的原因。请注意，“l”（ell）是 的最后一个字母`"<html>"`，即 HTML 代码的第一个标记。将其更改为其他内容，您会注意到字母发生了变化。

# animation - 如何在统一3D中同时播放两个动画

> ID：10812557
> 
> 赞同：1
> 
> 时间：2012-05-30T08:22:37.110
> 
> 标签：animation, 3d, unity3d

我正在尝试在 Unity 3D 中围绕太阳旋转地球..

我的问题：如何使地球围绕自身旋转，同时围绕太阳旋转。我不能为 Unity3D 中的一个对象制作多个动画？

请帮我.. ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:31:36.663

我会做这样的事情：

```
public float speed = 1;
void Update() {
   // Slowly rotate the object around its X axis at 1 degree/second.
   transform.Rotate(speed  * Time.deltaTime, 0, 0);

   // ... at the same time as spinning it relative to the Sun 
  transform.RotateAroud(sun.transform, Vector3.up,  speed * Time.deltaTime)
  } 
```

来自[http://unity3d.com/support/documentation/ScriptReference/Transform.RotateAround.html](http://unity3d.com/support/documentation/ScriptReference/Transform.RotateAround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:34:55.970

Unity3D 中有几个选项可以做到这一点，例如混合、分层、添加和淡化。看看[Unity - 角色动画](http://unity3d.com/support/documentation/Manual/Character-Animation.html)和[Unity - 动画脚本](http://unity3d.com/support/documentation/Manual/Animation%20Scripting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-05T16:44:38.303

您可以通过直接在统一动画系统中创建多个图层来同时播放两个动画。这里有一个有用的分步指南： http: [//gamedevelopertips.com/unity-run-2-animations/](http://gamedevelopertips.com/unity-run-2-animations/)

# java - 更改 Spring PropertyPlaceholderConfigurer 以从另一个源读取

> ID：10812558
> 
> 赞同：1
> 
> 时间：2012-05-30T08:22:51.810
> 
> 标签：java, spring, properties

我想扩展/替换 Spring PropertyPlaceholderConfigurer 以从 Web 服务器而不是属性文件中读取。

一点背景：

我在一个项目上工作，我们发现位于用户系统上的属性文件的数量变得有点笨拙。我们希望将这些文件替换为“配置服务器”，该服务器将存储基本的键/值对并在用户启动应用程序时为它们提供服务。

为避免进行太多更改，我想更改 PropertyPlaceholderConfigurer 查找属性的方式 - 而不是实现一种全新的方式来管理属性。所以在启动时——Spring 会从一个 url 读取所有属性，并以与实际文件相同的方式将这些属性输入我的 spring 配置 xml。

**奖金！**

如果有人有任何想法如何做到这一点，只有在属性**更改时才**从服务器重新加载，将获得奖励积分（我不知道我是否有能力分配奖励积分，但我会尝试！）。如果不付出太多努力，那将是一个“很高兴”的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:39:34.770

Spring 的`PropertyPlaceholderConfigurer`(PPC) 已经使用该[`Resource`接口](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/Resource.html)来指定读取属性的位置（通过从 PropertiesLoaderSupport 继承的[`setLocation(Resource)`方法。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/support/PropertiesLoaderSupport.html#setLocation%28org.springframework.core.io.Resource%29)

这个接口有一个实现类，[`URLResource`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/UrlResource.html)它可能会做你想要的。您可以简单地创建一个 PPC 并`location`使用这种类型的 bean 设置属性，以从 URL 而不是文件加载属性。此类还支持`file://`类型 URL，因此您可以根据使用的 URL 在在线和离线属性加载之间切换。

# java - 如何将类路径资源加载到字节数组？

> ID：10812559
> 
> 赞同：42
> 
> 时间：2012-05-30T08:22:56.683
> 
> 标签：java, io, inputstream, embedded-resource

***我知道***如何获取给定类路径资源的输入流，从输入流中读取直到我到达末尾，但这看起来是一个非常常见的问题，我想知道是否有我不知道的 API 或库会让事情变得简单

```
byte[] data = ResourceUtils.getResourceAsBytes("/assets/myAsset.bin") 
```

或者

```
byte[] data = StreamUtils.readStreamToEnd(myInputStream) 
```

例如！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2018-02-23T14:26:32.027

Java 9 原生实现：

```
byte[] data = this.getClass().getClassLoader().getResourceAsStream("/assets/myAsset.bin").readAllBytes(); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-30T08:34:15.157

看看 Google guava `ByteStreams.toByteArray(INPUTSTREAM)`，这可能就是你想要的。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-06-14T08:25:37.400

尽管我同意 Andrew Thompson 的观点，但这是一个从 Java 7 开始就可以使用并使用 NIO-API 的本机实现：

```
byte[] data = Files.readAllBytes(Paths.get(this.getClass().getClassLoader().getResource("/assets/myAsset.bin").toURI())); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-05-30T08:24:44.367

看看 Apache [IOUtils](http://commons.apache.org/io/api-1.2/org/apache/commons/io/IOUtils.html#toByteArray%28java.io.InputStream%29) - 它有很多方法可以处理流

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-01-15T17:16:13.203

我通常使用以下两种方法来转换`Resource`为`byte[]`数组。

## 1 - 方法

您需要的是首先调用`getInputStream()`对象`Resource`，然后将其传递给`convertStreamToByteArray`如下方法......

```
InputStream stream = resource.getInputStream();
long size = resource.getFile().lenght();

byte[] byteArr = convertStreamToByteArray(stream, size);

public byte[] convertStreamToByteArray(InputStream stream, long size) throws IOException {

    // check to ensure that file size is not larger than Integer.MAX_VALUE.
    if (size > Integer.MAX_VALUE) {
        return new byte[0];
    }

    byte[] buffer = new byte[(int)size];
    ByteArrayOutputStream os = new ByteArrayOutputStream();

    int line = 0;
    // read bytes from stream, and store them in buffer
    while ((line = stream.read(buffer)) != -1) {
        // Writes bytes from byte array (buffer) into output stream.
        os.write(buffer, 0, line);
    }
    stream.close();
    os.flush();
    os.close();
    return os.toByteArray();
} 
```

## 2 - 方法

正如 Konstantin V. Salikhov 建议的那样，您可以使用`org.apache.commons.io.IOUtils`并调用它的`IOUtils.toByteArray(stream)` `static`方法并将对象传递给它`InputStream`......

```
byte[] byteArr = IOUtils.toByteArray(stream); 
```

`Note -`只是想我会提到这一点，在后台 `toByteArray(...)`检查以确保文件大小不大于`Integer.MAX_VALUE`，因此您不必检查这一点。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-30T09:16:30.363

Java 方法通常会接受一个`InputStream`. 在大多数情况下，我建议将流直接传递给感兴趣的方法。

许多相同的方法也将接受`URL`（例如从 获得`getResource(String)`）。有时这可能会更好，因为各种方法都需要可重新定位`InputStream`，并且有时返回的流`getResourceAsStream(String)`将*无法*重新定位。

# javascript - 为什么 jQuery 幻灯片效果在此示例中不起作用？

> ID：10812563
> 
> 赞同：0
> 
> 时间：2012-05-30T08:23:09.750
> 
> 标签：javascript, jquery, jquery-animate

```
$("#photoAlbum").on("mouseenter", ".imagecontainer", function () {
    $(this).find('.controlbar').show("slide", { direction: "down" }, 1000);
}).on("mouseleave", ".imagecontainer", function () {
    $(this).find('.controlbar').hide("slide", { direction: "up" }, 1000);
}); 
```

`.controlbar`默认隐藏

在 ajax 请求之后，`.imagecontainer`div（s）被附加到#photoAlbum div，因此我使用的原因`.on()`不仅仅是`.hover(function() {}, function(){})`

HTML，drop-backdrop 是绝对定位的。

```
<div id="photoAlbum" class="tabcontent">

        <div id="drop-backdrop"> 
            <div class="text">Drag files here to upload</div> 
        </div> 
        <canvas id="drop-target"></canvas> 

<div class="imagecontainer"><div class="controlbar" style="visibility: hidden; "><img src="/TreeView/images/delete.png" width="16px" height="16px"></div><img src="/Content/photoAlbums/9/3/539695_t.jpg"></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:27:41.600

如果你想让你的脚本工作，你应该加载[jQuery UI库](http://docs.jquery.com/UI/Effects/Slide)

或使用：

```
$("#photoAlbum").on("mouseenter", ".imagecontainer", function () {
    $(this).find('.controlbar').slideDown(1000);
}).on("mouseleave", ".imagecontainer", function () {
    $(this).find('.controlbar').slideUp(1000);
}); 
```

而不是`style="visibility: hidden; "`使用`style="display:none; "`

# jquery - 如何编辑外部域的 iframe 内容？

> ID：10812565
> 
> 赞同：3
> 
> 时间：2012-05-30T08:23:21.140
> 
> 标签：jquery, iframe, dns, external

我已经对这个主题进行了很多搜索，但仍然无法正常工作。我想做的是`iframe`使用 jQuery 自定义外部域的内容。当`iframe`.

那么有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:30:15.297

您要实现的是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的主题。换句话说，您不能编辑外部 iframe 的内容。

# objective-c - 无法更改 UILabel 中的字体大小

> ID：10812568
> 
> 赞同：1
> 
> 时间：2012-05-30T08:23:35.813
> 
> 标签：objective-c, ios, uilabel

我正在以编程方式实例化 UILabel。标签显示倒计时的数字。问题是我似乎无法增加字体大小争议事实上我有以下代码

```
[self.viewAnimation addSubview:lblCounter];
    [lblCounter setAdjustsFontSizeToFitWidth:NO];
    [lblCounter setMinimumFontSize:30.0];
    [lblCounter setTextAlignment:UITextAlignmentCenter]; 
```

UILabel 足够大，可以容纳 30 号字体。

有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T08:25:53.053

使用`[lblCounter setFont:[UIFont systemFontOfSize:30]]`, 最小字体大小仅在 adjustsFontSizeToFitWidth 为 YES 时适用，并调节在裁剪发生之前字体将缩小多少。

# gwt - GWTP 处理程序是线程安全的吗？

> ID：10812572
> 
> 赞同：0
> 
> 时间：2012-05-30T08:24:05.350
> 
> 标签：gwt, gwt-platform

我正在使用 gwt-platform 进行应用程序开发。

我打开了 2 个运行同一个应用程序的浏览器，我用不同的数据做了 2 个相同的操作，但是现在同一个视图上的浏览器访问了类似的处理程序操作

现在的问题是 2 个浏览器已经更新了从处理程序接收到的第一个数据..

我不明白为什么它不能识别发送请求的浏览器......所以这意味着它不是线程安全的......？

我在 Guice 中看到 @RequestedScope 注释在我使用 Handler 的 execute() 时是否有用

有什么建议么？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:09:39.060

也许...

您必须使您的操作线程安全。（attrs 具有 final，例如，在构造函数中注入），并且您的逻辑也必须是线程安全的。

顺便说一句，您可以发布您的操作示例吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:00:52.807

使用 2 个浏览器，您应该运行 2 个不同的应用程序实例。在你的`onModuleLoad()`，只要放一个`System.out.println(this);`. 您应该看到不同的结果，这意味着您有不同的实例。

如果您从浏览器 1 运行操作，该操作将**仅**在浏览器 1 中执行。我不知道您的操作在做什么，但如果它更新数据存储（或数据库）中的数据，并且由于两个实例共享持久层，您还将在浏览器 2 中看到新数据。

在浏览器 1 中触发的操作不太可能在两个浏览器上执行。这意味着它们共享相同的事件总线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:39:43.760

```
public class InfoAction extends UnsecuredActionImpl<Response<ObjectTO>>
{   
    private List<OpenTO> request;
    private String machineId;
    private int actionType;
    private UserBean userBean;

    /**
     * This is been in the case of double dated flight.
     */
    private String orignalFpesLegId;

    public List<OpenTO> getRequest() {
        return request;
    }

    public void setRequest(List<OpenTO> request) {
        this.request = request;
    }

    public String getMachineId() {
        return machineId;
    }

    public void setMachineId(String machineId) {
        this.machineId = machineId;
    }

    /**
     * @return the actionType
     */
    public int getActionType() {
        return actionType;
    }

    /**
     * @param actionType the actionType to set
     */
    public void setActionType(int actionType) {
        this.actionType = actionType;
    }

    /**
     * @param userBean the userBean to set
     */
    public void setUserBean(UserBean userBean) {
        this.userBean = userBean;
    }

    /**
     * @return the userBean
     */
    public UserBean getUserBean() {
        return userBean;
    }
} 
```

请找到我的动作类代码

# c++ - 在 Linux 上管理共享库的常用方法是什么？

> ID：10812573
> 
> 赞同：8
> 
> 时间：2012-05-30T08:24:05.167
> 
> 标签：c++, c, linux, open-source, shared-libraries

比如我需要生成一个共享库，libXXX.so。

1.  生成它的常用方法是什么？只使用 -fPIC -shared 吗？

2.  我需要创建到这个库的软链接吗？我的意思是使用 ln -s。

3.  如果我更新共享库怎么办，即。从libXXX.so.1.2.3到libXXX.so.1.2.4，我的项目怎么知道共享库更新了？我需要重新编译整个项目吗？

4.  Makefile中管理共享库的常用方法是什么？

我完全不明白这些问题。帮我个忙 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:35:24.937

您提出问题的主题非常广泛。您的大多数问题取决于您的环境以及是否创建软链接取决于您将库保存在哪个文件夹中以及哪些进程可能需要访问它等。

请查看此[链接](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)和此[链接](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)，其中提供了有关创建和使用共享库的详细说明。

对您的问题的一些简短回答：

> 生成它的常用方法是什么？只使用 -fPIC -shared 吗？

使用的选项取决于编译器。fPIC 有助于生成与位置无关的代码，并且 shared 使库成为共享库。但是，除此之外，还有一些选项可以仅公开您决定从库中导出的那些符号，以及在库的全局符号（-symbolic）等之间创建强链接的选项。

> 我需要创建到这个库的软链接吗？我的意思是使用 ln -s。

正如我上面提到的，这取决于您决定放置库的位置。常见的机制是将您的库保存在您选择的某个文件夹中，并在通常“已知”或可访问的文件夹（如 /usr/lib 等）中创建指向它的链接。

> 如果我更新共享库怎么办，即。从libXXX.so.1.2.3到libXXX.so.1.2.4，我的项目怎么知道共享库更新了？我需要重新编译整个项目吗？

共享库的主要优点之一是您可以更新最新版本而无需重新编译整个代码。再次实现这一点取决于平台和编译器。

> Makefile中管理共享库的常用方法是什么？

谷歌中有无数的链接，我的链接也提供了一些基本的细节。

# many-to-many - 如何处理与 Ebean 的单向多对多关系

> ID：10812574
> 
> 赞同：3
> 
> 时间：2012-05-30T08:24:15.813
> 
> 标签：many-to-many, playframework-2.0, ebean

我对 Ebean 有疑问。我有通常的对象 PsecUser、PsecRoles 和 PsecPermission。一个用户可以有很多权限或角色，一个角色可以有很多权限。这里的代码（摘录）：

```
@Entity
public class PsecPermission {

    @Id
    @GeneratedValue
    private Long id;

    @Column(unique=true, nullable=false)
    private String name;

    @Column(nullable=false)
    private String type = PsecBasicPermission.class.getName();

    @Column(nullable=false)
    private String target;

    @Column(nullable=false)
    private String actions;

}

@Entity
public class PsecRole  {

    @Id
    @GeneratedValue
    private Long id;

    @Column(unique=true, nullable=false)
    private  String name;

    @Temporal(TemporalType.TIMESTAMP)
    private Date lastUpdate;

    @ManyToMany(fetch=FetchType.EAGER)
    private List<PsecPermission> psecPermissions;

    private boolean defaultRole = false;

} 
```

我写了以下帮助方法：

```
public PsecRole createOrUpdateRole(String name, boolean defaultRole, String... permissions) {
        PsecRole result = server.find(PsecRole.class).
                where().eq("name", name).findUnique();
        if (result == null) {
            result = new PsecRole();
            result.setName(name);
        }
        final List<PsecPermission> permissionObjects = server.find(PsecPermission.class).
                where().in("name", (Object[])permissions).findList();
        result.setPsecPermissions(permissionObjects);
        result.setDefaultRole(defaultRole);
        final Set <ConstraintViolation <PsecRole>> errors = 
                Validation.getValidator().validate(result);
        if (errors.isEmpty()) {
            server.save(result);
            server.saveManyToManyAssociations(result, "psecPermissions");
        } else {
            log.error("Can't save role: " + name +"!");
            for (ConstraintViolation <PsecRole> constraintViolation : errors) {
                log.error("   " + constraintViolation);
            }
        }
        return result;
} 
```

并尝试以下测试：

```
@Test
public void testCreateOrUpdateRole() {
    String[] permNames = {"Test1", "Test2", "Test3"};
    List <PsecPermission> permissions = new ArrayList <PsecPermission>();
    for (int i = 0; i < permNames.length; i++) {
        helper.createOrUpdatePermission(permNames[i], "target"+ i, "actions" +i);
        PsecPermission perm = server.find(PsecPermission.class).where().eq("name", permNames[i]).findUnique();
        assertThat(perm.getTarget()).isEqualTo("target" + i);
        assertThat(perm.getActions()).isEqualTo("actions" + i);
        permissions.add(perm);
    }

    PsecRole orgRole = helper.createOrUpdateRole(ROLE, false, permNames);
    testRole(permNames, orgRole);
    PsecRole role = server.find(PsecRole.class).where().eq("name", ROLE).findUnique();
    testRole(permNames, role);

}
private void testRole(String[] permNames, PsecRole role) {
    assertThat(role).isNotNull();
    assertThat(role.getName()).isEqualTo(ROLE);
    assertThat(role.isDefaultRole()).isEqualTo(false);
    assertThat(role.getPermissions()).hasSize(permNames.length);
} 
```

如果它检查读取角色的权限数量，则会失败。始终为0。我查看了数据库，发现psec_role_psec_permission 始终为空。

知道代码有什么问题吗？

[您可以从https://github.com/opensource21/ebean-samples/downloads](https://github.com/opensource21/ebean-samples/downloads)获得一个纯 Ebean 示例，它使用来自 ebean 的 eclipse-plugin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:11:06.990

这个问题有两种解决方案：

只需在 PsceRole 添加级联选项

```
@ManyToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
private List<PsecPermission> psecPermissions; 
```

并删除`server.saveManyToManyAssociations(result, "psecPermissions");`您在[cascade-solution-branch](https://github.com/opensource21/ebean-samples/commits/cascadesolution)中找到它。

更清洁的解决方案，因为您不需要定义 cascase - 也许您不想要它：只是不要替换列表，只需将您的条目添加到列表中。更好的是添加新的和删除旧的。这意味着`createOrUpdateRole`：

```
result.getPsecPermissions().addAll(permissionObjects); 
```

代替

```
result.setPsecPermissions(permissionObjects); 
```

# php - 使用ajax从其他页面加载内容

> ID：10812578
> 
> 赞同：0
> 
> 时间：2012-05-30T08:24:27.793
> 
> 标签：php, ajax, wordpress, reload

我有一个基于帖子的 WordPress 网站，但我想用 ajax 过滤我的帖子。

棘手的部分是，如果我想从“案例”到“摄影”进行过滤，我有两个不同的模板。

我可以用一点 php 来管理它并更改 the_template_part，但这会使页面重新加载，而我不想这样做。

我一直在尝试做一个ajax请求来完成过滤功能。

我的.js

```
 $('a[rel="filter"]').click(function() {

        var filter = $(this).attr('id');

        $('.checked').removeClass('checked');
        $(this).parent().addClass('checked');

        $.ajax({
            url: '/wp-admin/admin-ajax.php',
            data: window.location = '#?filter=' + filter,
            success: function() {
                $('#content').children().fadeOut(549);
                $('#content').html(data).fadeIn(549);
            }
        });

        console.log('Filter ' + $(this).attr('id') + ' clicked');
    }); 
```

这是在我的 Index.php 中更改 template_part 的 php

```
 $type = ($_GET['filter'] == '') ? 'projects' : $_GET['filter'];
    <?php 
       get_template_part($type); 
    ?> 
```

# 我能做到这一点还是我需要考虑一下？

这只是以纯文本形式返回实际地址

```
 $('a[rel="filter"]').click(function() {

        var filter = $(this).attr('href');

        $('.checked').removeClass('checked');
        $(this).parent().addClass('checked');

        $.ajax({
            url: 'wp-admin/admin-ajax.php',
            //url: 'url' + filter,
            data: {
                filter: filter
            },
            success: function(html) {
                $('#content').children().fadeOut(549);
                $('#content').html(filter).fadeIn(549);
                console.log(filter);
                console.log("Success");
            },
            error: function() {
                console.log('No can do')
            }
        });

        console.log('Filter ' + filter + ' clicked');
        return false;
    }); 
```

如果我有 3 个页面，其中包含不同的查询和模板，它们代表（案例、摄影和动作），我想在首页上进行过滤。我正在开发一个单页网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:28:13.510

在 click 函数的末尾添加 return false。

# asp.net-mvc-3 - 使用实体框架进行单元测试

> ID：10812582
> 
> 赞同：1
> 
> 时间：2012-05-30T08:24:39.417
> 
> 标签：asp.net-mvc-3, unit-testing, entity-framework-4, nunit, mstest

我有一个使用 MVC 3 和实体框架创建的 Web 应用程序。我想开始使用单元测试，但到目前为止，由于系统与数据库的对话方式，我无法运行任何单元测试。

我有一个 BaseController，它将 DataContext 定义为一个变量：

```
public class BaseController : Controller
{

    public Models.MyEntities DataContext = new Models.MyEntities(); 
```

然后每个控制器都继承 BaseController，从而使 DataContext 变量可用于所有控制器，而无需重新定义它：

```
public class ErrorController : BaseController
{ 
```

当我运行单元测试时，我收到一个关于对象引用未设置为对象实例的错误，每次引用我访问 DataContext 的行。

大多数对单元测试的引用都说你应该抽象你的数据库层，并使用假数据进行测试。这对我来说似乎违反直觉，但这是一个不同的讨论。

我的问题是 - 是否可以在系统配置的方式下使用单元测试？我愿意使用任何可用的测试框架，MSTest、NUnit / XUnit 等。

# c# - 无法使用实体框架将复杂属性绑定到gridview

> ID：10812584
> 
> 赞同：1
> 
> 时间：2012-05-30T08:24:44.420
> 
> 标签：c#, linq, entity-framework, gridview

我有以下代码应该将一些数据绑定到gridview，但它不起作用。

区域经理对象有一个品牌。正如您在屏幕截图中看到的，品牌已正确填写了数据。

```
 private void LoadData()
        {
            List<DealerDistrictManager> listDealerDistrictManager = DistrictManagerBL.GetAllDealersWithDistrictManagers();
            DistrictManagersGrid.DataSource = listDealerDistrictManager;
            DistrictManagersGrid.DataBind();

     <asp:BoundColumn DataField="DistrictManagerId" Visible="False"></asp:BoundColumn> 
        <asp:BoundColumn DataField="Brand.Name" meta:resourcekey="BrandHeader"></asp:BoundColumn>

 public class DealerDistrictManager
    {
        public int DistrictManagerId { get; set; }
        public string Nuteres { get; set; } 
        public string DealerNumber { get; set; }
        public virtual Brand Brand { get; set; }
        public int DistrictNumber { get; set; }
        public string Name { get; set; }
    }

 public class Brand
    {
        public int BrandId { get; set; }
        public string Name { get; set; }
    } 
```

**更新1**

```
public List<DealerDistrictManager> GetAllDealersWithDistrictManagers()
    {

            return  (from d in _context.Dealers
                      from m in _context.DistrictManagers
                      where d.Nuteres == m.DealerNuteres
                     select new DealerDistrictManager
                                { 
                                    DistrictManagerId= m.DistrictManagerId,
                                    Nuteres = d.Nuteres,
                                    DealerNumber = d.DealerNumber,
                                    Brand  = m.Brand,
                                    DistrictNumber = m.DistrictNumber,
                                    Name = m.Name

                                 }).ToList<DealerDistrictManager>(); 

    } 
```

![在此处输入图像描述](../Images/2b0bfe6d0f2f8d61e4229aeb24c5de1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:03:27.593

[这篇文章](https://stackoverflow.com/questions/2236900/eval-versus-datafield-in-aspdatagrid)也谈到了相同/相似的问题。它“随机”发生的地方。提问者找到的解决方案是使用：

```
<%#Eval("contentsection.Id") %> 
```

提到的帖子有很多答案（包括一个已接受的答案），我认为这些答案会澄清很多。

# iphone - 如何使用按钮操作启用 touchesMoved()？

> ID：10812587
> 
> 赞同：0
> 
> 时间：2012-05-30T08:24:56.447
> 
> 标签：iphone, uibutton, touchesmoved

我正在做一个钢琴应用程序。我正在使用按钮操作来播放音乐。但它不支持拖动功能。我也使用过 touchesMoved(),touchBegan() 方法。但是 nothigh 正在工作。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:31:28.957

Button 支持拖动功能。您应该通过以下控制事件添加您的目标。

```
[button addTarget:target action:@selector(action1) forControlEvents:UIControlEventTouchDragInside];
[button addTarget:target action:@selector(action2) forControlEvents:UIControlEventTouchDragOutside];
[button addTarget:target action:@selector(action3) forControlEvents:UIControlEventTouchDragExit];
[button addTarget:target action:@selector(action4) forControlEvents:UIControlEventTouchDragEnter]; 
```

为每个事件实施适当的操作，它应该识别适当的拖动事件。

# openssl - 什么是公钥头和公钥信息？

> ID：10812588
> 
> 赞同：3
> 
> 时间：2012-05-30T08:24:58.240
> 
> 标签：openssl, cryptography, rsa

我正在尝试查找什么是公钥标头和公钥信息。我已经使用 openssl 以及公钥模数转储了 C 格式的证书。它将公钥信息和公钥头列为公钥。但我无法使用`openssl.exe rsa -pubin -inform DER -text -noout < publickey.der`在我的服务器上生成的公钥转储这些字段。

任何人都可以解释这些字段在数字证书中的意义是什么，它们对于所有的公钥都是一样的吗？无法在 openssl 上获取此信息，只是提到 DER 编码将具有额外的页眉和页脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:48:14.143

I've never heard of the public key header... could you give an example?

The Public Key info is probably the standard way how public keys in X.509 certificates are generally encoded, in the form of a [SubjectPublicKeyInfo attribute](https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.7). These SubjectPublicKeyInfos can be turned into a public key file (I assumed that's what you were trying to do? Please correct me if I'm wrong!) That section also tells you about where you can find information about particular algorithms, for RSA they reference [RFC 3279](https://www.rfc-editor.org/rfc/rfc3279#section-2.3.1). A SubjectPublicKeyInfo is defined as follows:

```
SubjectPublicKeyInfo  ::=  SEQUENCE  {
    algorithm            AlgorithmIdentifier,
    subjectPublicKey     BIT STRING  } 
```

RFC 3279 says:

> The rsaEncryption OID is intended to be used in the algorithm field of a value of type AlgorithmIdentifier. The parameters field MUST have ASN.1 type NULL for this algorithm identifier.

Further:

> The RSA public key MUST be encoded using the ASN.1 type RSAPublicKey:

```
 RSAPublicKey ::= SEQUENCE {
     modulus            INTEGER,    -- n
     publicExponent     INTEGER  }  -- e 
```

So it's the subjectPublicKey field that contains the relevant data - you can for example get to these values with the `x509` command of OpenSSL:

```
openssl x509 -in certificate.cer -inform DER -noout -text 
```

Prints out (for PEM certificates, drop the -inform DER):

```
Subject Public Key Info:
        Public Key Algorithm: rsaEncryption
            Public-Key: (1024 bit)
            Modulus:
                00:cb:c2:...
            Exponent: 65537 (0x10001) 
```

There's also a neat trick how you can directly produce a PEM RSA public key file with `x509`:

```
openssl x509 -inform DER -in certificate.cer -pubkey -noout > pubkey.pem 
```

and there's your public key exported in PEM encoding.

# python - 控制 jinja2/coffin 中的 i18n 语言，无需每次都传递请求

> ID：10812591
> 
> 赞同：2
> 
> 时间：2012-05-30T08:24:59.503
> 
> 标签：python, django, internationalization, jinja2

我正在尝试将模板呈现为特定语言的字符串，但每次都没有将请求或 RequestContext 传递给 render_to_string。我在用着

```
coffin.shortcuts.render_to_string 
```

所以我想要么只在字典中包含一个变量，要么是一个假的上下文，除了语言之外，它会被忽略。

我可以通过发送请求使其工作，但这只是矫枉过正 - 这些是异步过程，所以有时我什至没有可用的请求。

我查看了 django 翻译、棺材和 jinja2 中的代码，它非常复杂。我也尝试将 LANGUAGE 或 LANGUAGE_CODE 作为字典的一部分发送，但没有结果。

如果我将 RequestContext 类的源代码修改为仅包含 csrf 和 i18n 模块，则棺材的 render_to_string 服从浏览器语言。

我创建了一个 FakeRequestContext 类：

```
class FakeRequestContext(Context):
    def __init__(self, request, dict_=None, processors=None, current_app=None,
            use_l10n=None, use_tz=None):
        Context.__init__(self, dict_, current_app=current_app,
                use_l10n=use_l10n, use_tz=use_tz)
        from django.utils import translation
        context_extras = {}
        from django.conf import settings
        context_extras['LANGUAGES'] = settings.LANGUAGES
        context_extras['LANGUAGE_CODE'] = translation.get_language()
        if 'LANGUAGE_CODE' in dict_:
            context_extras['LANGUAGE_CODE'] = dict_['LANGUAGE_CODE']
        context_extras['LANGUAGE_BIDI'] = translation.get_language_bidi()
        self.update(context_extras) 
```

这似乎完全重现了 RequestContext 正在做什么，但实际上并没有工作，即使 LANGUAGE_CODE 被设置为使用真实 RequestContext 时浏览器的内容。

# ios - 批量 iOS 推送通知

> ID：10812592
> 
> 赞同：1
> 
> 时间：2012-05-30T08:25:06.877
> 
> 标签：ios, apple-push-notifications

首先感谢您的关注。这里的场景是我需要向数千台设备发送相同的 PUSH 通知。我一直在阅读有关此主题的 Apple 文档，发现我必须批量处理多个通知。理论很清楚，但我对实施有疑问。

例如，我通常使用这个 PHP 网络服务来发送一个通知：

```
$deviceToken = 'f9082e0e26fe72f4c9ef04bff33b8274186b51abeecb86e4a4e7ac773081****';
$passphrase = '********';
$message = "Hi, world";
$badge = 2;

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array('alert' => $message, 'sound' => 'default', 'badge'=>$badge);
$body['mis_parametros'] = array('hora' => date("F j, Y, g:i a"));

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload))  .$payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL. ' to device token: '. $deviceToken;

// Close the connection to the server
fclose($fp); 
```

我不明白我应该如何批量发送它们。我应该打电话给：

```
// Send it to the server
$result = fwrite($fp, $msg, strlen($msg)); 
```

然后更改 deviceToken 并再次调用

```
// Send it to the server
$result = fwrite($fp, $msg, strlen($msg)); 
```

最后，在所有通知之后，关闭与 APNs 调用的连接？？

```
// Close the connection to the server
fclose($fp); 
```

伙计们，我将等待您的答复。我希望这段代码也能帮助实现服务器端发送普通推送通知的人。提前致谢！！

# http - 当我关闭一个 http 服务器时，为什么我的套接字挂了？

> ID：10812594
> 
> 赞同：0
> 
> 时间：2012-05-30T08:25:17.923
> 
> 标签：http, node.js

我对我们的 node.js 服务器实现了优雅的停止。基本上是这样的：

```
var shutDown = function () {
    server.on('close', function () {
        console.log('Server ' + process.pid + ' closed.');

        process.exit();
    });

    console.log('Shutting down ' + process.pid + '...');
    server.close();
} 
```

但是，当我像这样关闭服务器时，`Error: socket hang up`我的连续请求中出现错误。

我认为这`server.close()`会使服务器停止侦听和接受新请求，但继续处理所有挂起/打开的请求。但是，这应该会导致`Error: connect ECONNREFUSED`.

我究竟做错了什么？

附加信息：服务器由一个主服务器和三个分叉的孩子/工人组成。然而，master 并没有监听或绑定到一个端口，只有子节点在监听，并且它们如上所述被关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:14:46.450

查看[文档](http://nodejs.org/docs/latest/api/net.html#net_server_close)，听起来好像`server.close()`只会阻止新连接进入，所以我很确定错误与已经打开的连接有关。

也许你`shutDown()`可以检查[`server.connections`](http://nodejs.org/docs/latest/api/net.html#net_server_connections)并等到没有更多？

```
var shutDown = function(){
    if(server.connections) return setTimeout(shutDown, 1000);

    // Your shutDown code here
} 
```

稍微难看（而且可扩展性更差），但无需等待：您可以在连接发生时跟踪它们并自己关闭它们

```
server.on('connection', function(e){
    // Keep track of e.connection in a list.
    //   You'll want to remove e.connection
    //   from the list if it closes on its own
}

var shutDown = function(){
    // Close all remaining connections in the list

    // Your shutDown code here
} 
```

# magento - 在产品列表中添加子标题

> ID：10812595
> 
> 赞同：0
> 
> 时间：2012-05-30T08:25:19.117
> 
> 标签：magento, magento-1.6

我正在寻找添加一个子标题或一个简短的段落以显示在产品列表上的产品名称下（以更小、更微妙的外观）。

优选地，副标题\段落将取自新属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:10:56.277

我们在我们的商店中通过在产品名称中定义一个特殊字符并在前端对该字符之后的任何内容进行不同的样式来做到这一点。

我们使用了 ^ 字符并对该字符进行了 php 字符串替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:18:22.810

简单地添加一个新属性（例如字幕），将该属性添加到您产品的属性集中。然后覆盖适当的 .phtml 模板文件并添加类似这样的内容： $product->getSubtitle() 您想要该文本输出的位置。

# linq - 为什么 AutoComplete Extender 工作速度很慢 ASP.NET

> ID：10812596
> 
> 赞同：0
> 
> 时间：2012-05-30T08:25:23.083
> 
> 标签：linq, web-services, ajaxcontroltoolkit, autocompleteextender, toolkitscriptmanager

***已修复：缺少属性 CompletionInterval="0"***

我正在测试 ajax 自动完成扩展器和 web 服务的功能。并发现自动完成扩展器需要一段时间来获取数据并显示。我目前没有数据库连接或类似的东西。我只是将所有项目放在 webservice 函数的数组中，并使用 LINQ 返回匹配的项目集。显示数据的时间间隔约为 1 秒。我尝试打开/关闭 EnableCaching，我发现有人在博客上建议这样做，但与 Google 如何搜索数十亿数据并在具有数十亿用户的实时网站上返回结果的方式相比，它仍然非常慢，没有几分之一秒的延迟。

虽然 Google 不会使用 asp.net、Linq 或脚本管理器来执行 Ajax 工作，但我只是在我的本地计算机上进行测试，没有数据库连接，我认为必须有一种方法可以让它更快地工作。可能我错过了在某处设置设置。这是我的代码。

aspx

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>

    <asp:TextBox ID="TextBox1" runat="server" Width="200px"></asp:TextBox>

    <asp:AutoCompleteExtender ID="TextBox1_AutoCompleteExtender" runat="server" ServiceMethod="HelloWorld" MinimumPrefixLength="1" EnableCaching="false" CompletionListCssClass="CompletionListCssClass"
    DelimiterCharacters="" Enabled="True" ServicePath="WebService.asmx" TargetControlID="TextBox1"> 
    </asp:AutoCompleteExtender>
    <br />
    <asp:Button ID="Button1" runat="server" Text="Search" /> 
```

code_behind 上没有任何内容。

这是网络服务的代码..

```
 <System.Web.Script.Services.ScriptService()> _
    <WebService(Namespace:="http://tempuri.org/")> _
    <WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
    <Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
    Public Class WebService
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld(prefixText As String) As String()

    Dim str() As String = {"Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan",
                            "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei",
                            "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Central African Republic",
                            "Chad", "Chile", "China", "Colombi", "Comoros", "Congo (Brazzaville)", "Congo", "Costa Rica", "Cote d'Ivoire", "Croatia", "Cuba", "Cyprus",
                            "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "East Timor (Timor Timur)", "Ecuador", "Egypt", "El Salvador",
                            "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia, The", "Georgia", "Germany", "Ghana",
                            "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia",
                            "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, North",
                            "Korea, South", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania",
                            "Luxembourg", "Macedonia", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius",
                            "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepa", "Netherlands",
                            "New Zealand", "Nicaragua", "Niger", "Nigeria", "Norway", "Oman", "Pakistan", "Palau", "Panama", "Papua New Guinea", "Paraguay",
                            "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent",
                            "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia and Montenegro", "Seychelles", "Sierra Leone", "Singapore",
                            "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "Spain", "Sri Lanka", "Sudan", "Suriname", "Swaziland", "Sweden", "Switzerland",
                            "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda",
                            "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam",
                            "Yemen", "Zambia", "Zimbabwe"}

    Dim result As ArrayList = Nothing

    Dim query = From x In str
                Where x.ToLower.Contains(prefixText)
                Select x

    Return query.ToArray

    End Function

    End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:46:18.163

AutoCompleteExtender 中没有延迟属性吗？CompletionInterval 我认为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T19:35:17.680

正确的方法是添加`CompletionInterval="xxx"`where xxx 是超时时间（以毫秒为单位）。（工具是我对 ajaxtools 的定义）

```
 <asp:TextBox runat="server" ID="Search" CssClass="search" AutoPostBack="true" />

        <Tools:AutoCompleteExtender
            ID="Search_AutoCompleteExtender"
            runat="server"
            CompletionInterval="250" 
            MinimumPrefixLength="3" 
            DelimiterCharacters=""
            ServiceMethod="GetCompletionKeyList"
            ServicePath="Keys.Aspx"
            Enabled="True"
            CompletionListCssClass="CompletionListCssClass"
            CompletionListItemCssClass="CompletionListItemCssClass"
            CompletionListHighlightedItemCssClass="CompletionListHighlightedItemCssClass"
            TargetControlID="Search"/> 
```

关于后面的代码VB

```
<System.Web.Services.WebMethod>
<System.Web.Script.Services.ScriptMethod()>
Public Shared Function GetCompletionKeyList(prefixText As String, count As Integer) As String()
      return {"Your", prefixText, "selection" }
end Function 
```

# recursion - cmake递归

> ID：10812602
> 
> 赞同：0
> 
> 时间：2012-05-30T08:25:56.183
> 
> 标签：recursion, build, latex, cmake

我完全被cmake困住了。我正在构建乳胶文档的大目录，所以我想获得具有以下目标的 Makefile 系统：准备、构建、存档。主要是它们必须是递归的：它们存在于每个目录中并在所有子目录中运行它们自己。

但是，不幸的是，如果我手动说`add_custom_target`cmake 抱怨重复的目标。如果我只在根目录中声明它们，那么它们不会出现在子目录中。不幸的是，我不能拒绝 cmake 并开始使用普通的 Makefile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:43:20.347

尝试使用这个：

[http://www.cmake.org/Wiki/CMakeUserUseLATEX](http://www.cmake.org/Wiki/CMakeUserUseLATEX)

# java - 传递 Java 映射 使用 SWIG 转换为 C++ 方法

> ID：10812607
> 
> 赞同：7
> 
> 时间：2012-05-30T08:26:29.697
> 
> 标签：java, c++, swig

我有一个用 C++ 定义的方法：

```
std::map<std::string, std::string> validate(
                                   std::map<std::string, std::string> key, 
                                   std::map<std::string, std::string> value
                                   ); 
```

我想在 Java 中使用这个方法。因此，我必须使用 Swig 编写一个包装器，通过它我可以将`Java Map`STL 作为 STL传递`map`给 c++ 方法。

请让我知道我应该如何为 swig 定义 .i 文件来完成这项工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T06:44:29.757

为此，您需要告诉 SWIG`java.util.Map`用于输入参数，使用`%typemap(jstype)`. 您还需要提供一些代码以将 Java 映射类型转换为 C++`std::map`类型，SWIG 将在适当的位置注入这些类型。我整理了一个小（已编译但未经测试）示例来说明这一点：

```
%module test

%include <std_map.i>
%include <std_string.i>

%typemap(jstype) std::map<std::string, std::string> "java.util.Map<String,String>"
%typemap(javain,pre="    MapType temp$javainput = $javaclassname.convertMap($javainput);",pgcppname="temp$javainput") std::map<std::string, std::string> "$javaclassname.getCPtr(temp$javainput)"
%typemap(javacode) std::map<std::string, std::string> %{
  static $javaclassname convertMap(java.util.Map<String,String> in) {
    $javaclassname out = new $javaclassname();
    for (java.util.Map.Entry<String, String> entry : in.entrySet()) {
      out.set(entry.getKey(), entry.getValue());      
    }
    return out;
  }    
%}

%template(MapType) std::map<std::string, std::string>;

void foo(std::map<std::string, std::string>); 
```

这`pgcppname`部分是确保`std::map`我们传入的参数不会过早收集垃圾。有关其工作原理的更多详细信息，请参阅SWIG 文档中的[此示例](http://www.swig.org/Doc1.3/Java.html#java_date_marshalling)。

支持`std::map`从 C++ 到 Java 的返回需要相当多的工作，但这是可能的。`java.util.Map`是一个接口，因此我们需要调整默认包装`std::map`以满足该接口。在实践中，它更容易使用`java.util.AbstractMap`和继承，尽管我最终覆盖了其中的大部分功能。这整个解决方案类似于 [我对`std::vector`](https://stackoverflow.com/questions/8145605/swig-v1-3-29-generated-c-to-java-vector-class-not-acting-properly/8190135#8190135).

在我的最终版本中有相当多的活动部分。我将在这里完整地展示它，并带有注释：

```
%module test
%{
#include <cassert>
#include <iostream>
%}

%include <std_map.i>

// 1.
%rename (size_impl) std::map<std::string,std::string>::size;
%rename (isEmpty) std::map<std::string,std::string>::empty;
%include <std_string.i>

%typemap(jstype) std::map<std::string, std::string> "java.util.Map<String,String>"
%typemap(javain,pre="    MapType temp$javainput = $javaclassname.convertMap($javainput);",pgcppname="temp$javainput") std::map<std::string, std::string> "$javaclassname.getCPtr(temp$javainput)"
%typemap(javacode) std::map<std::string, std::string> %{
  static $javaclassname convertMap(Map<String,String> in) {
    // 2.
    if (in instanceof $javaclassname) {
      return ($javaclassname)in;
    }

    $javaclassname out = new $javaclassname();
    for (Map.Entry<String, String> entry : in.entrySet()) {
      out.set(entry.getKey(), entry.getValue());
    }
    return out;
  }

  // 3.
  public Set<Map.Entry<String,String>> entrySet() {
    HashSet<Map.Entry<String,String>> ret = new HashSet<Map.Entry<String,String>>(size());
    String array[] = new String[size()];
    all_keys(array);
    for (String key: array) {
      ret.add(new MapTypeEntry(key,this));
    }
    return ret;
  }

  public Collection<String> values() {
    String array[] = new String[size()];
    all_values(array);
    return new ArrayList<String>(Arrays.asList(array));
  }

  public Set<String> keySet() {
    String array[] = new String[size()];
    all_keys(array);
    return new HashSet<String>(Arrays.asList(array));
  }

  // 4.
  public String remove(Object key) {
    final String ret = get(key);
    remove((String)key);
    return ret;
  }

  public String put(String key, String value) {
    final String ret = has_key(key) ? get(key) : null;
    set(key, value);
    return ret;
  }

  // 5.
  public int size() {
    return (int)size_impl();
  }
%}

// 6.
%typemap(javaimports) std::map<std::string, std::string> "import java.util.*;";
// 7.
%typemap(javabase) std::map<std::string, std::string> "AbstractMap<String, String>";

// 8.
%{
template <typename K, typename V>
struct map_entry {
  const K key;
  map_entry(const K& key, std::map<K,V> *owner) : key(key), m(owner) {
  }
  std::map<K,V> * const m;
};
%}

// 9.
template <typename K, typename V>
struct map_entry {
  const K key;
  %extend {
    V getValue() const {
      return (*$self->m)[$self->key];
    }

    V setValue(const V& n) const {
      const V old = (*$self->m)[$self->key];
      (*$self->m)[$self->key] = n;
      return old;
    }
  }
  map_entry(const K& key, std::map<K,V> *owner);
};

// 10.
%typemap(javainterfaces) map_entry<std::string, std::string> "java.util.Map.Entry<String,String>";
// 11.
%typemap(in,numinputs=0) JNIEnv * %{
  $1 = jenv;
%}

// 12.
%extend std::map<std::string, std::string> {
  void all_values(jobjectArray values, JNIEnv *jenv) const {
    assert((jsize)$self->size() == jenv->GetArrayLength(values));
    jsize pos = 0;
    for (std::map<std::string, std::string>::const_iterator it = $self->begin();
         it != $self->end();
         ++it) {
       jenv->SetObjectArrayElement(values, pos++, jenv->NewStringUTF(it->second.c_str()));
    }
  }

  void all_keys(jobjectArray keys, JNIEnv *jenv) const {
    assert((jsize)$self->size() == jenv->GetArrayLength(keys));
    jsize pos = 0;
    for (std::map<std::string, std::string>::const_iterator it = $self->begin();
         it != $self->end();
         ++it) {
       jenv->SetObjectArrayElement(keys, pos++, jenv->NewStringUTF(it->first.c_str()));
    }
  }
}

%template(MapType) std::map<std::string, std::string>;
%template(MapTypeEntry) map_entry<std::string, std::string>;

// 13.
%inline %{
  std::map<std::string, std::string> foo(std::map<std::string, std::string> in) {
    for (std::map<std::string, std::string>::const_iterator it = in.begin();
         it != in.end(); ++it) {
      std::cout << it->first << ": " << it->second << "\n";
    }

    return std::map<std::string, std::string>(in);
  }
%} 
```

1.  std_map.i 并不意味着实现任何接口/抽象类。为了这样做，我们需要重命名一些暴露的内容。
2.  由于我们使我们的类型实现`Map`（通过`AbstractMap`），因此最终从`MapType`->转换是愚蠢的，`MapType`而这实际上只是一个复制操作。该`convertMap`方法现在检查这种情况作为优化。
3.  `EntrySet`是的主要要求`AbstractMap`。我们已经定义（稍后）为我们`MapTypeEntry`实现`Map.Entry`接口。这稍后会在内部使用更多代码`%extend`来有效地将所有键枚举为数组。请注意，这不是线程安全的，如果我们在此枚举进行时更改映射，则会发生奇怪的坏事并且可能不会被检测到。
4.  `remove`是我们必须实现的可变方法之一。两者`remove`都`put`必须返回旧值，因此这里有一些额外的 Java 来实现这一点，因为 C++ 映射不这样做。
5.  由于需要 long/int 转换，甚至`size()`不兼容。真的，我们应该在某个地方为非常大的地图检测精度损失，并为溢出做一些理智的事情。
6.  我厌倦了`java.util.Map`到处打字，所以这使得生成的 SWIG 代码具有所需的导入。
7.  这将设置`MapType`为继承自`AbstractMap`，以便我们代理并满足 Java 映射的要求，而不是进行额外的复制以转换回来。
8.  将作为我们的条目的类的 C++ 定义。这只有一个键，然后是一个指向它所拥有的地图的指针。该值不存储在`Entry`对象本身中，并且始终被引用回底层映射。这种类型也是不可变的，我们永远无法更改拥有的地图或密钥。
9.  这就是 SWIG 所看到的。我们提供了一个额外的 get/setValue 函数，该函数回调它源自的地图。指向拥有地图的指针没有公开，因为我们不需要这样做，它实际上只是一个实现细节。
10.  `java.util.Map.Entry<String,String>`。_
11.  这是一个自动填充`jenv`某些代码的参数的技巧，`%extend`我们需要在该代码中进行一些 JNI 调用。
12.  这两个方法里面`%extend`的所有键和值分别放置到一个输出数组中。该数组在传入时应该是正确的大小。有一个断言来验证这一点，但实际上它应该是一个例外。这两个都是内部实现细节，无论如何可能应该是私有的。它们被所有需要批量访问键/值的功能所使用。
13.  `foo`健全检查我的代码的实际实现。

内存管理在这里是免费的，因为它仍然归 C++ 代码所有。（所以您仍然需要决定如何管理 C++ 容器的内存，但这并不是什么新鲜事）。由于返回给 Java 的对象只是 C++ 映射的包装器，因此容器的元素不必超过它。在这里，它们也`Strings`很特别，它们作为新对象返回，如果它们是使用 SWIG`std::shared_ptr`支持的智能指针，那么一切都会按预期工作。唯一棘手的情况是对象指针的映射。在这种情况下，Java 程序员有责任保持地图及其内容至少与返回的任何 Java 代理一样有效。

最后我写了下面的Java来测试它：

```
import java.util.Map;

public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");

    Map<String,String> m = new MapType();
    m.put("key1", "value1");
    System.out.println(m);
    m = test.foo(m);
    System.out.println(m);
  }
} 
```

我编译并运行为：

```
swig2.0 -Wall -java -c++ test.i
gcc -Wall -Wextra -shared -o libtest.so -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux test_wrap.cxx
javac run.java
LD_LIBRARY_PATH=. java run
{key1=value1}
key1: value1
{key1=value1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:41:03.810

[或者我们可以在JavaCPP](http://code.google.com/p/javacpp/)`MapTest.h`的帮助下完全在 Java 中完成（假设您的函数声明可以在头文件中找到） ：

```
import com.googlecode.javacpp.*;
import com.googlecode.javacpp.annotation.*;

@Platform(include={"<string>", "<map>", "MapTest.h"})
public class MapTest {
    static { Loader.load(); }

    @Name("std::map<std::string, std::string>")
    public static class StringStringMap extends Pointer {
        static { Loader.load(); }
        public StringStringMap() { allocate(); }
        public StringStringMap(Pointer p) { super(p); }
        private native void allocate();

        @Index @ByRef public native String get(String x);
        public native StringStringMap put(String x, String y);
    }

    public static native @ByVal StringStringMap validate(
            @ByVal StringStringMap key, @ByVal StringStringMap value);

    public static void main(String[] args) {
        StringStringMap m = new StringStringMap();
        m.put("foo", "bar");
        System.out.println(m.get("foo"));
    }
} 
```

我发现这比 SWIG 更容易、更清晰......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T21:58:15.207

快速评论@Flexo 的建议：它有效，但 SWIG 需要 C++ 类型和 Java 类型之间的 &s 用于类型映射。我必须将它们添加到代码中的前两个类型映射中：

```
%typemap(jstype) std::map<std::string, std::string> & "java.util.Map<String,String>"
%typemap(javain,pre="    MapType temp$javainput = $javaclassname.convertMap($javainput);",pgcppname="temp$javainput") & std::map<std::string, std::string> "$javaclassname.getCPtr(temp$javainput)" 
```

希望这可以避免我在试图让它正常工作时所经历的困惑。

# windows-phone-7 - 在重绘地图之前，ObservableCollection 中 Pushpin.Location 的更改不会影响图钉

> ID：10812608
> 
> 赞同：1
> 
> 时间：2012-05-30T08:26:29.393
> 
> 标签：windows-phone-7, binding, geolocation, mvvm-light, bing-maps

这里的第一个问题，到目前为止，我在阅读答案时得到了很大的帮助。这是我找不到任何答案的东西。所以来了...

我们有一个`MapItemsControl`绑定到的 Bing Maps 地图`ObservableCollection<Pushpin>` `Property`。向集合中添加/删除项目时，地图会正确更新。

现在我的问题是：**如何更新/绑定`Pushpin`集合内的位置，以便在不通过移动/缩放重绘地图的情况下反映在地图上？**

这是 Map.xaml：

```
<phone:PhoneApplication ...
    DataContext="{Binding Source={StaticResource Locator}, Path=Main}">
    <maps:Map ...>
        <maps:MapItemsControl ItemsSource="{Binding MapItems}"/>
    </maps:Map>
</phone:PhoneApplication> 
```

MainViewModel.xaml：

```
#region MapItems

#region MapItems Property

/// <summary>
/// The <see cref="MapItems" /> property's name.
/// </summary>
public const string MapItemsPropertyName = "MapItems";

private ObservableCollection<Pushpin> _MapItems =
    new ObservableCollection<Pushpin>();

/// <summary>
/// Sets and gets the MapItems property.
/// Changes to that property's value raise the PropertyChanged event. 
/// </summary>
public ObservableCollection<Pushpin> MapItems
{
    get
    {
        return _MapItems;
    }
    set
    {
        if (_MapItems == value)
        {
            return;
        }

        _MapItems = value;
        RaisePropertyChanged(MapItemsPropertyName);
    }
}

#endregion

#region OwnLocation

private Pushpin OwnLocation;

private void InitializeOwnLocation()
{
    OwnLocation = new Pushpin()
    {
        Style = App.Current.Resources["OwnLocationStyle"] as Style
    };
    Binding b = new Binding {
        Path = new PropertyPath("LastKnownLocation")
    };
    OwnLocation.SetBinding(Pushpin.LocationDependencyProperty, b);
    MapItems.Add(OwnLocation);
}

#endregion

...

#endregion 
```

`LastKnownLocation`被设置`PositionChanged`在`GeoCoordinateWatcher`

* * *

更新 (30.5.2012 20.35)。`LastKnownLocation`财产的实施。

```
/// <summary>
/// The <see cref="LastKnownLocation" /> property's name.
/// </summary>
public const string LastKnownLocationPropertyName = "LastKnownLocation";

private GeoCoordinate _LastKnownLocation;

/// <summary>
/// Sets and gets the LastKnownLocation property.
/// Changes to that property's value raise the PropertyChanged event. 
/// </summary>
public GeoCoordinate LastKnownLocation
{
    get
    {
        return _LastKnownLocation;
    }

    private set
    {
        if (_LastKnownLocation == value)
        {
            return;
        }

        var oldValue = _LastKnownLocation;
        _LastKnownLocation = value;
        Settings["LastKnownLocation"] = _LastKnownLocation;
        RaisePropertyChanged(LastKnownLocationPropertyName, oldValue, value, true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:16:13.367

x:Name= myMap on map Control

当您想重新绑定地图图钉时

设置 myMap.Children.Clear()

然后重新添加您的 Pin 图。

您可以通知您的数据更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T07:14:24.210

正如我在长时间谷歌搜索后评论的那样，我终于找到了一个似乎不再可用的解决方法。诀窍是在更改后调用`SetView`地图视图`Pushpin.Location`。

# php - 拥有多个多边形并给它们一个不同的弹出窗口，并在数据库中指定一个 id

> ID：10812611
> 
> 赞同：0
> 
> 时间：2012-05-30T08:26:36.200
> 
> 标签：php, popup, openlayers, polygon

我想为多个多边形提供一个不同的弹出窗口，其中包含从数据库中获取的数据。当窗口中有单个多边形时，此脚本已经有效。这是我从数据库中获取数据的地方：

```
var length = <?php echo count($locations); ?>;
<?php
//Tel het aantal plaatsen in de array en zet deze via json in een javascript array
for ($i=0; $i < count($locations); $i++) {
    ?>
    var counter = parseInt(<?php echo $i; ?>);
    title[counter] = <?php print json_encode($locations[$i]['Location']['title']); ?>;
    location_id[counter] = <?php print json_encode($locations[$i]['Location']['id']); ?>;
    address[counter] = <?php print json_encode($locations[$i]['Location']['address']); ?>;
    city[counter] = <?php print json_encode($locations[$i]['Location']['city']); ?>;
    coordinates[counter] = <?php print json_encode($polygon[$i]); ?>;
    <?php
}
?> 
```

这些是我用来制作多边形等的功能。对荷兰语的评论感到抱歉，但我希望有人能帮我解决这个问题

```
onFeatureSelect: function(feature) {
    if (title != null) {
        if (html.length > 1) {
            selectedFeature = feature;
            popup = new OpenLayers.Popup.FramedCloud("Pop up",feature.geometry.getBounds().getCenterLonLat(),null,html[i],null, true, myLocations.onPopupClose);
            feature.popup = popup;
            map.addPopup(popup);   
        } else {
            selectedFeature = feature;
            popup = new OpenLayers.Popup.FramedCloud("Pop up",feature.geometry.getBounds().getCenterLonLat(),null,html,null, true, myLocations.onPopupClose);
            feature.popup = popup;
            map.addPopup(popup);   
        }
    }
}
/**
 * Bouw de HTML string op voor de pop up window
 **/
buildHTML: function(element) {
    html = '<table>' +
            '<tr>' +
                '<td>Locatie:</td>' +
                '<td>'+title+'</td>'+
                '<td rowspan="3" style="padding-left: 10px;">' +
                    '<a href="/locations/edit/'+location_id+'" title="Bewerken" ><div class="icon edit"></div></a><br/>' +
                    '<a href="/locations/view/'+location_id+'" title="Details" ><div class="icon view"></div></a>' +
                '</td>' +
            '</tr><tr>'+
                '<td>Adres:</td>'+
                '<td>'+address+'</td>' +
            '</tr><tr>'+
                '<td>Plaats:</td>'+
                '<td>'+city+'</td>'+
            '</tr>'+
        '</table>'; 
},
/**
 * Gooi de HTML strings in een array als het er meer zijn
 **/
buildMultipleHTML: function(element) {
    html = new Array();
    for(i=0;i < title.length; i++) {
        html[i] = '<table>' +
            '<tr>' +
                '<td>Locatie:</td>' +
                '<td>'+title[i]+'</td>'+
                '<td rowspan="3" style="padding-left: 10px;">' +
                    '<a href="/locations/edit/'+location_id[i]+'" title="Bewerken" ><div class="icon edit"></div></a><br/>' +
                    '<a href="/locations/view/'+location_id[i]+'" title="Details" ><div class="icon view"></div></a>' +
                '</td>' +
            '</tr><tr>'+
                '<td>Adres:</td>'+
                '<td>'+address[i]+'</td>' +
            '</tr><tr>'+
                '<td>Plaats:</td>'+
                '<td>'+city[i]+'</td>'+
            '</tr>'+
        '</table>';
    }
}
/**
 * Meerdere polygonen tekenen
 **/
drawMultiplePolygons: function(coordinates) {
    //Array site_points leegmaken
    site_points = new Array();
    for (j=0; j < coordinates.length; j++) {
        site_points[j] = new Array();
        for (i=0; i < coordinates[j][0].length; i++) {
            //Maak de punten aan met de OpenLayers, Geometry functie
            point = new OpenLayers.Geometry.Point(coordinates[j][1][i], coordinates[j][0][i]);
            //Zet de punten om in de projectie van openstreetmaps
            point.transform(
                new OpenLayers.Projection("EPSG:4326"),
                new OpenLayers.Projection("EPSG:900913")
            );
            //Zet de punten in een array
            site_points[j].push(point);
        }
        //Lineaire ring aanmaken met de OpenLayers functie
        linear_ring = new OpenLayers.Geometry.LinearRing(site_points[j]);
        //Polygoon aanmaken
        polygonFeature = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([linear_ring]), null);
        //Polygoonvector maken
        myLayers.vector.addFeatures([polygonFeature]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:47:02.937

这是 onFeatureSelect 函数中的修复：

```
var selectedFeature = myLayers.vector.selectedFeatures[0].clone();
                var identification;
                var i;
                var j;
                for (i = 0; i < tbMap.map.layers.length; i++) {
                    if (tbMap.map.layers[i].CLASS_NAME == "OpenLayers.Layer.Vector") {
                        for (j = 0; j < tbMap.map.layers[i].features.length; j++) {
                            if (selectedFeature.geometry.getBounds().bottom == tbMap.map.layers[i].features[j].geometry.bounds.bottom && selectedFeature.geometry.getBounds().top == tbMap.map.layers[i].features[j].geometry.bounds.top) {
                                identification = j;
                            } else {
                            }
                        }
                    }
                }
                popup = new OpenLayers.Popup.FramedCloud("Pop up",selectedFeature.geometry.getBounds().getCenterLonLat(),null,html[identification],null, true, tbLocations.onPopupClose);
                selectedFeature.popup = popup;
                tbMap.map.addPopup(popup);
            } else {
                var selectedFeature = myLayers.vector.selectedFeatures[0].clone();
                popup = new OpenLayers.Popup.FramedCloud("Pop up",selectedFeature.geometry.getBounds().getCenterLonLat(),null,html,null, true, tbLocations.onPopupClose);
                selectedFeature.popup = popup;
                tbMap.map.addPopup(popup);
            } 
```

# php - 关于 php 中的 Com 对象

> ID：10812612
> 
> 赞同：0
> 
> 时间：2012-05-30T08:26:40.683
> 
> 标签：php, shell, com, shellexecute

如何使用 com 对象创建 power point 文件 MS word 文件。请为此举一些例子。我尝试了一些东西。但我在我的系统中找不到文件

示例代码如下

```
$word = new COM("word.application") or die ("couldnt create an instance of word"); 
echo "loaded , word version{$word->version}"; 

$word->visible = 1; 

$word->Documents->Add(); 

$word->Selection->TypeText("this is some sample text in the document"); 

$word->Documents[1]->SaveAs("sampleword.doc"); 

$word->Quit(); 

$word->Release(); 
$word = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:30:15.317

尝试设置完整路径

```
$word->Documents[1]->SaveAs("C:\\Users\\UserNameHere\\MyDocuments\\sampleword.doc"); 
```

# python - PyCharm 不理解模型的自定义管理器

> ID：10812613
> 
> 赞同：0
> 
> 时间：2012-05-30T08:26:47.873
> 
> 标签：python, django, autocomplete, pycharm, django-managers

我扩展默认模型管理器并向其添加特定于缓存的逻辑：

```
class ReadOnlyManager(manager.Manager):
    use_for_related_fields = True

    def create(self, **kwargs):
        obj = super(ReadOnlyManager, self).create(**kwargs)
        cache.cache_read_only_object(obj)
        ...
        return obj

    def update(self, *args, **kwargs):
        raise ReadOnlyException()

    def by_id(self, object_id):
        return cache.retrieve_read_only_object(self.model, object_id)

    def by_lookup(self, lookup_key, lookup_value):
        return cache.retrieve_read_only_object_by_lookup(self.model, lookup_key, lookup_value) 
```

然后我创建了使用它的抽象模型：

```
class ReadOnlyModel(models.Model):
    class Meta:
        abstract = True

    objects = ReadOnlyManager() 
```

我在具体模型中使用它：

```
class TokenType(ReadOnlyModel):
    code = models.CharField(_('code'), max_length=30, unique=True)
    description = models.CharField(_('description'), max_length=100)

    lookups = {
        'code': 'code'
    } 
```

当我尝试调用特定于自定义缓存的方法时，例如 *by_id*：

```
TokenType.objects.by_id(1) # This code works 
```

PyCharm 突出显示它并写入“未解析的属性引用”警告。当我在 之后按 CMD+Space`TokenType.`时，我看到，该自动完成框包含两个*对象*项：一个标有功能图标，类型为 ReadOnlyManager，第二个 - 带有方法图标，类型为 Manager。

是 PyCharm 错误吗？如何为自定义管理器中的其他方法启用自动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:46:22.197

这似乎是一个问题`PyCharm`。为 Python 编写一个自动完成功能确实是一项艰巨的任务，尤其是对于诸如`Django Models`, 它使用`Meta Classes`和其他讨厌的东西之类的东西。

然而，它是可能完成的，而且似乎并不难，例如我的自动完成（[https://github.com/davidhalter/jedi/tree/dev](https://github.com/davidhalter/jedi/tree/dev)，正在进行中，不要使用它）能够完成它：

完成`TokenType.objects.`：

```
update                
by_id                 
by_lookup             
create                
use_for_related_fields 
```

完成`TokenType.`：

```
__metaclass__                 
__hash__                      
_get_next_or_previous_in_order
__ne__                        
date_error_message            
description                   
_perform_date_checks          
delete                        
clean                         
objects                       
unique_error_message          
_set_pk_val                   
_deferred                     
save_base                     
pk                            
serializable_value            
full_clean                    
__init__                      
code                          
save                          
__str__                       
validate_unique               
clean_fields                  
__repr__                      
_perform_unique_checks        
__reduce__                    
_get_unique_checks            
prepare_database_save         
_get_pk_val                   
__eq__                        
lookups                       
_get_next_or_previous_by_FIELD
Meta                          
_get_FIELD_display 
```

就我而言，`PyCharm`是封闭源代码，所以我认为您必须与 PyCharm 开发人员交谈。

# javascript - 在android webview中打开javascript

> ID：10812616
> 
> 赞同：0
> 
> 时间：2012-05-30T08:27:05.420
> 
> 标签：javascript, android, webview, android-webview, android-websettings

你好我是android开发的新手，

我想在我的 android webview 中设置我的 javscript 打开。我尝试了一切，但它不起作用。我下面的代码是我的 webview 类。我希望有一个人可以帮助我。

```
package visuals.Webview;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class VisualsActivity extends Activity {
/** Called when the activity is first created. */

final Activity activity = this;
WebView webview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webview = (WebView) findViewById(R.id.webview);
   // webview.setWebViewClient(new myWebClient());

    webview.loadUrl("http://192.168.0.62/lastversion/index.php");
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webview.getSettings().setUserAgentString(getString(R.string.user_agent_suffix));   
}

public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
        if (url.startsWith("tel:")) { 
            startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(url))); 
            return true; 
        } else if (url.startsWith("mailto:")) { 
            url = url.replaceFirst("mailto:", ""); 
            url = url.trim(); 
            Intent i = new Intent(Intent.ACTION_SEND); 
            i.setType("plain/text").putExtra(Intent.EXTRA_EMAIL, new String[]{url}); 
            startActivity(i); 
            return true; 
        } else { 
            view.loadUrl(url); 
            return true; 
        } 
    } 
}

// To handle "Back" key press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()) {
        webview.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
 } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:29:20.163

```
WebView webView;
webView.getSettings().setJavaScriptEnabled(true); 
```

相当容易 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:53:52.570

```
webview.getSettings().setPluginState(PluginState.ON); 
```

或使用旧版本时（< API 8）

```
webView.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:06:28.463

```
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

如果您希望您的 webview 的 javascript 能够与您的 android 应用程序交互。看看 webview 的 addJavascriptInterface 方法文档。

# ios - 对 Mac 和 iOS 应用内购买使用相同的产品 ID

> ID：10812619
> 
> 赞同：5
> 
> 时间：2012-05-30T08:27:14.267
> 
> 标签：ios, in-app-purchase, app-store-connect, mac-app-store

我有一个带有应用内购买功能的 iOS 应用程序，用于一些非消耗性产品。现在我们计划在 Mac OS X 上构建一个应用程序，它具有 iOS 的所有功能，并有 Mac In-App Purchase。现在，当我尝试在我的 Mac *iTunes Connect*帐户中添加 iOS 产品 ID 时，它不允许我这样做。它说我不能使用已经在使用的相同产品 ID。

我认为 iOS 和 Mac 应用程序使用相同的产品 ID 来交付相同的产品很常见。

**现在我的问题** *是：是否可以在 iOS 和 Mac iTunes 连接上创建相同的产品 ID？我在这里错过了什么吗？*

谢谢，

-阿尼什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:39:18.630

为了回答我自己的问题，到目前为止，Mac 和 iOS 应用内购买不可能拥有相同的产品 ID。我在 WWDC2012 上从 Apple 工程师那里得到了这个信息。Apple 建议我们在内部使用 iCloud 来跟踪 iOS 和 Mac OS 之间的购买，如果您不希望您的用户为在任一设备上使用相同的产品而付费。

-阿尼什

# python - 避免 .pyc 文件的好处？

> ID：10812620
> 
> 赞同：0
> 
> 时间：2012-05-30T08:27:16.020
> 
> 标签：python

除了在源文件夹中没有一堆这些文件的方便之外，[避免`.pyc`文件](https://stackoverflow.com/questions/154443/how-to-avoid-pyc-files)是否有任何好处、性能或其他方面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:28:39.407

我不认为真的有。`.pyc`文件是缓存的字节码文件，您可以节省启动时间，因为 Python 不必在每次启动解释器时重新编译您的 python 文件。

最多，关闭字节码编译可以让您测量解释器在这一步上花费了多少时间。如果要比较节省了多少时间，请删除`.pyc`项目中的所有文件，并使用 -B 切换到解释器来为 Python 计时：

```
$ time python -B yourproject 
```

然后在没有 -B 开关的情况下再次运行：

```
$ time python yourproject 
```

可能是您要运行程序的用户没有对源代码目录的写入权限；例如，您不希望远程用户有任何机会通过漏洞更改您的源代码的 Web 服务器。在这种情况下，我会使用包含的[`compileall`模块](http://docs.python.org/library/compileall.html)来使用特权用户对所有内容进行字节编译，而不是放弃编写`.pyc`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T08:31:21.997

我能想到的一个原因：在开发过程中，如果您删除或重命名`.py`文件，该`.pyc`文件将保留在您的本地副本中，并使用旧名称和旧字节码。由于您通常不会将`.pyc`文件提交给版本控制，因此这可能会导致`ImportError`在您的机器上不会发生的流浪 s，但会在其他机器上发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:34:34.707

.pyc 文件可能会鼓励人们认为他们不需要维护/发送原始源。pyc 文件可能无法在操作系统和 Python 版本之间移植。移动 Python 模块时，将 pyc 文件留在后面并复制或发送源代码并让主机 python 生成新的 pyc 文件会更安全。

顺便说一句，从 Python 3.2 开始，.pyc 文件不再进入源文件夹，而是进入`__pycache__`（在源文件夹中）。

# deployment - 无法将我的更新部署到 cloudfoundry

> ID：10812622
> 
> 赞同：0
> 
> 时间：2012-05-30T08:27:30.730
> 
> 标签：deployment, spring-mvc, sts-springsourcetoolsuite, cloud-foundry

我有一个在 tomcat 上运行的简单应用程序（使用 Postgresql）。我使用 STS 插件将它部署到 Cloud-Foundry 并且运行正常。最近我遇到了严重的编译问题（与 JS 和 JQuery 有关），这导致我重新安装了我的 STS。
现在，当我在本地运行应用程序时，它运行完美，但是当我使用“更新并重新启动”时，什么也没有发生——我的新更新没有部署！（我已连接并且开始/停止工作）。我不知道如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:13:42.100

由于您已经重新安装了 STS，我建议您从 Cloud Foundry 中删除您的应用程序，然后再次从 STS 部署您的项目。这可能是因为您的项目未与您在 cloudfoundry.com 上的应用程序链接

试试看，让我们知道它是怎么回事。

# mysql - 在 Mysql 中为导入的模式创建并设置新用户和密码

> ID：10812626
> 
> 赞同：0
> 
> 时间：2012-05-30T08:27:47.050
> 
> 标签：mysql, mysqldump

我已将一个 sql 转储从服务器导入到我的本地数据库。

至于现在，root 可以自动访问我的新架构。

如何为该特定模式（例如.myDB1）创建和设置用户名和密码，以便确保本地和服务器的所有内容都相同。

编辑：我想设置例如kito作为用户名和123作为密码。

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:22:09.427

首先创建一个特定的用户，

```
shell> mysql --user=root mysql

mysql> CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass'; 
```

然后授予该用户对特定数据库的访问权限，

```
mysql> grant usage on *.* to monty@localhost identified by 'some_pass';

mysql> grant all privileges on amarokdb.* to monty@localhost ; 
```

参考： [http ://dev.mysql.com/doc/refman/5.1/en/adding-users.html](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

[http://www.debuntu.org/how-to-create-a-mysql-database-and-set-privileges-to-a-user](http://www.debuntu.org/how-to-create-a-mysql-database-and-set-privileges-to-a-user)

# c# - 多语言网站配置

> ID：10812627
> 
> 赞同：1
> 
> 时间：2012-05-30T08:28:00.497
> 
> 标签：c#, asp.net, webforms, multilingual

我有包含一组不同语言的列表框：

```
 <%@ Page Language="C#" uiculture="auto" %>
  <%@ Import Namespace="System.Threading" %>
  <%@ Import Namespace="System.Globalization" %>
 <script runat="server">
 protected override void InitializeCulture()
{
if (Request.Form["ListBox1"] != null)
{
    String selectedLanguage = Request.Form["ListBox1"];
    UICulture = selectedLanguage ;
    Culture = selectedLanguage ;

    Thread.CurrentThread.CurrentCulture = 
        CultureInfo.CreateSpecificCulture(selectedLanguage);
    Thread.CurrentThread.CurrentUICulture = new 
        CultureInfo(selectedLanguage);
}
base.InitializeCulture();
}
</script>
<html>
 <head><title>Set Culture</title></head>
<body>
<form id="form1" runat="server">
<div>
    <asp:ListBox ID="ListBox1" runat="server">
        <asp:ListItem Value="en-US" Selected="True">English</asp:ListItem>
        <asp:ListItem Value="es-MX">Español</asp:ListItem>
        <asp:ListItem Value="de-DE">Deutsch</asp:ListItem>
    </asp:ListBox>
    <br />
    <asp:Button ID="Button1" runat="server" Text="Set Language"  />
    <br />
    <asp:Label ID="Label1" runat="server" Text="my name is"  />

  </div>
</form>
 </body>
  </html> 
```

我希望当我从列表框中选择一种语言时，标签文本将被翻译为所选语言，例如，如果我选择 Español “我的名字是”将被翻译成 Español 语言并显示在屏幕上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:37:04.967

在 ListBox 的 selectedIndexChanged 事件中编写以下代码行

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo(selectedLanguageCode);
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(selectedLanguageCode); 
```

selectedLanguageCode 是为每种文化指定的内容，例如美国英语 en-US 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:33:02.457

您将需要删除硬编码字符串并开始使用`Resource`文件。我建议您查看[本](http://www.ezzylearning.com/tutorial.aspx?tid=3477182)教程以获取有关如何开发多语言网站的完整指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:34:33.020

你应该实现这个

```
 protected override void InitializeCulture() 
```

在每个页面上，您都需要多种语言。我通常会创建一个类来覆盖它并从中派生其他支持多语言的页面。您还需要使用 cookie。coockies["lang"] = "en-US" - 像这样管理语言。

# javascript - 在后台打开一个新标签？

> ID：10812628
> 
> 赞同：82
> 
> 时间：2012-05-30T08:28:05.343
> 
> 标签：javascript, google-chrome

使用 javascript，我想在不同的选项卡中打开一个新页面，但仍然专注于当前选项卡。我知道我可以这样做：

```
open('http://example.com/');
focus(); 
```

但是，当我在 chrome 中执行此操作时，它会在切换回当前选项卡之前闪烁新选项卡片刻。我想避免这种情况。

该应用程序是一个个人书签，因此它只需要在最新的 Chrome 中运行。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-09T04:35:39.707

**更新：到 41 版的谷歌浏览器，`initMouseEvent`似乎有一个改变的行为，所以这个答案不再有效。**感谢@ [Daniel Andersson](https://stackoverflow.com/questions/10812628/open-a-new-tab-in-the-background#comment42933226_11389138)的评论。

这可以通过在动态生成的元素上模拟`ctrl`+ `click`（或任何其他打开背景选项卡的键/事件组合）`a`并将其`href`属性设置为所需的`url`

**在行动：** [小提琴](http://jsfiddle.net/3ZmvS/5/)

```
function openNewBackgroundTab(){
    var a = document.createElement("a");
    a.href = "http://www.google.com/";
    var evt = document.createEvent("MouseEvents");
    //the tenth parameter of initMouseEvent sets ctrl key
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                true, false, false, false, 0, null);
    a.dispatchEvent(evt);
} 
```

仅在 chrome 上测试

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-04T09:06:27.877

THX 这个问题！在所有流行的浏览器上都对我有用：

```
function openNewBackgroundTab(){
    var a = document.createElement("a");
    a.href = window.location.pathname;
    var evt = document.createEvent("MouseEvents");
    //the tenth parameter of initMouseEvent sets ctrl key
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                true, false, false, false, 0, null);
    a.dispatchEvent(evt);
}

var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if(!is_chrome)
{
    var url = window.location.pathname;
    var win = window.open(url, '_blank');
} else {
    openNewBackgroundTab();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:59:08.240

As far as I remember, this is controlled by browser settings. In other words: user can chose whether they would like to open new tab in the background or foreground. Also they can chose whether new popup should open in new tab or just... popup.

For example in firefox preferences:

![Firefox setup example](../Images/9245aab469ccd730a1d5f31be8480aeb.png)

Notice the last option.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T23:14:26.273

我以非常简单的方式完成了您正在寻找的事情。它在 Google Chrome 和 Opera 中非常流畅，在 Firefox 和 Safari 中几乎完美。未在 IE 中测试。

* * *

```
function newTab(url)
{
    var tab=window.open("");
    tab.document.write("<!DOCTYPE html><html>"+document.getElementsByTagName("html")[0].innerHTML+"</html>");
    tab.document.close();
    window.location.href=url;
} 
```

小提琴：http: [//jsfiddle.net/tFCnA/show/](http://jsfiddle.net/tFCnA/show/)

解释：
假设有窗口 A1 和 B1 以及网站 A2 和 B2。
我不是在 B1 中打开 B2，然后返回 A1，而是在 A1 中打开 B2，然后在 B1 中重新打开 A2。
（使它起作用的另一件事是我不让用户重新下载 A2，见第 4 行）

* * *

^(*您可能*不喜欢的唯一一件事是新选项卡在主页之前打开。)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-03T12:03:46.623

这是一个完整的示例，用于在具有焦点的新选项卡上导航有效 URL。

HTML：

```
<div class="panel">
  <p>
    Enter Url: 
    <input type="text" id="txturl" name="txturl" size="30" class="weburl" />
    &nbsp;&nbsp;    
    <input type="button" id="btnopen"  value="Open Url in New Tab" onclick="openURL();"/>
  </p>
</div> 
```

CSS：

```
.panel{
  font-size:14px;
}
.panel input{
  border:1px solid #333;
} 
```

JAVASCRIPT：

```
function isValidURL(url) {
    var RegExp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

    if (RegExp.test(url)) {
        return true;
    } else {
        return false;
    }
}

function openURL() {
    var url = document.getElementById("txturl").value.trim();
    if (isValidURL(url)) {
        var myWindow = window.open(url, '_blank');
        myWindow.focus();
        document.getElementById("txturl").value = '';
    } else {
        alert("Please enter valid URL..!");
        return false;
    }
} 
```

我还使用[http://codebins.com/codes/home/4ldqpbw上的解决方案创建了一个 bin](http://codebins.com/codes/home/4ldqpbw)

# c# - GroupBy 并计算 List 中的唯一元素

> ID：10812629
> 
> 赞同：20
> 
> 时间：2012-05-30T08:28:12.647
> 
> 标签：c#, .net

我有一个只包含字符串的列表。我想做的是分组并返回计数。

例如：

```
Foo1
Foo2
Foo3
Foo1
Foo2 
Foo2 
```

会导致 Foo1: 2, Foo2: 3, Foo3: 1。我尝试过使用 Linq，但列表中有一个 GroupBy 可能会解决问题，但我搞砸了，不知道用途:(

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-30T08:30:23.143

```
var list = new List<string> { "Foo1", "Foo2", "Foo3", "Foo2", "Foo3", "Foo3", "Foo1", "Foo1" };

var grouped = list
    .GroupBy(s => s)
    .Select(group => new { Word = group.Key, Count = group.Count() }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T08:30:37.573

```
 var items= myList
    .GroupBy(g => g)
    .Select(t => new {count= t.Count(), key= t.Key });

 foreach (var group in items)
     Console.WriteLine ( group.key + " " + group.count); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:30:58.593

```
 var grouped =  select new
     {
         Foo= grp.Key,
         Bar= grp.Select(x => x.SomeField).Distinct().Count()
     }; 
```

NorthWind 数据库的工作示例，以便您检查::

```
 NWindCustomersDataContext dc = new NWindCustomersDataContext();

    var query = (from c in dc.Customers
                 join o in dc.Orders on c.CustomerID equals o.CustomerID
                 group o by c.CustomerID into g
                 select new
                 {
                     CustomerID = g.Key,
                     Company = (from cust in dc.Customers
                               where cust.CustomerID == g.Key
                               select cust).ToList(),
                     Count = g.Select(x => x.OrderID).Distinct().Count()
                 }).OrderByDescending(y => y.Count);

    foreach (var item in query)
    {
        Response.Write("CustomerID: " + item.CustomerID + "</br>" + "CompanyName: " + item.Company[0].CompanyName.ToString() + "</br>");

    } 
```

[在这里](https://stackoverflow.com/a/449930/655293)你可以找到一个很好的例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T12:29:57.120

[http://msdn.microsoft.com/en-us/library/vstudio/bb534304(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb534304(v=vs.100).aspx)提供了一个很好的解决方案 。每个键都有自己的数据列表，您可以对其进行迭代。

# jquery - jQuery 移动事件绑定很痛苦

> ID：10812633
> 
> 赞同：0
> 
> 时间：2012-05-30T08:28:41.603
> 
> 标签：jquery, jquery-mobile, jquery-events

[http://jsfiddle.net/ca11111/arwkS/1/](http://jsfiddle.net/ca11111/arwkS/1/)

在这个小提琴中，我想将滑块按钮的 mouseup 与重置值的函数绑定。

小提琴正在工作，但我发现的唯一方法是放置这个丑陋的超时功能，没有它，滑块还不存在，因此绑定失败，但阅读文档“mobileinit”事件应该可以解决问题。

你能改进这个丑陋的脚本吗？

编辑：因为我设置了超时，所以当然可以这样做：

```
setTimeout(function(){ 
    console.log($(".ui-slider-handle .ui-btn-inner").length);
    $(".ui-slider-handle .ui-btn-inner").mouseup(function() {
        console.log('Handler for .mouseup() called.');
        $("#slider-0").val(25).slider("refresh");
    });
}, 2000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:31:41.400

使用该`live`方法进行绑定可能会解决此问题。

[jQuery 直播方法](http://jquerymobile.com/demos/1.0a2/experiments/api-viewer/docs/live/index.html)。

> **描述：**将处理程序附加到与当前选择器匹配的所有元素的事件，现在或将来。

[这是您的代码的工作示例。](http://jsfiddle.net/arwkS/2/)

# drools - 哪个更好地从 java Util 类中调用流口水或静态方法中的“函数”

> ID：10812635
> 
> 赞同：2
> 
> 时间：2012-05-30T08:28:49.810
> 
> 标签：drools

在 drools 中，我们经常有需要调用的通用逻辑。有两种选择可以实现这一目标。

1.  在 drools 中使用函数。
2.  将通用逻辑移动到 java 中的某个 Util 类并从 drools 调用它。

以上哪个推荐？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:28:59.907

我总是建议使用导入的静态方法，除非它是一个非常简单的逻辑，它是您的规则子集的本地并且需要动态定义。原因是：

*   保持 DRL 代码的程序逻辑干净，使维护更便宜、更容易。
*   编写 xUnit 测试以静态方法测试函数逻辑比测试 DRL 函数更容易。
*   它使该功能可用于所有 DRL 文件，没有冲突，也没有 IDE 错误代码。

DRL 函数构造是解决简单本地问题的工具，但 Java 类是您要保留和维护过程代码的地方。

# quartz-scheduler - 用于排除特定日期的小时数的 Cron 表达式

> ID：10812639
> 
> 赞同：4
> 
> 时间：2012-05-30T08:29:15.940
> 
> 标签：quartz-scheduler, cronexpression

是否可以创建一个 CronExpression：“每天每 20 分钟开火一次，但周六 10:00 到 14:00 之间不开火”？

“0 0/20 * ? * MON-SAT”之类的东西很清楚，但不一样......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T08:37:28.010

您将不得不使用两个表达式；周六一份，其他日子一份：

```
0 0/20 * * * SUN-FRI     command
0 0/20 0-9,14-23 * * SAT command 
```

# json - 如何从 CURL 发布输出中获取数据

> ID：10812641
> 
> 赞同：0
> 
> 时间：2012-05-30T08:29:23.807
> 
> 标签：json

我正在通过 CURL 发布数据并根据该数据获取输出现在我想解析该输出

我得到的输出是

```
a:3:{s:6:"status";s:1:"1";s:3:"msg";s:32:"Transaction Fetched Successfully";s:19:"transaction_details";a:1:{i:100000001;a:2:{s:8:"mihpayid";s:9:"Not Found";s:6:"status";s:9:"Not Found";}}} 
```

这里状态的值是 Not Found 我想将状态值保存在 php 变量中我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:40:39.737

我知道这个问题很老了，但看起来是 php 序列化。

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

如果你从 php 消费，你可以调用 unserialize。

如果您从 javascript 消费，则有一些现有的实现。我在这里找到了一个：http: [//phpjs.org/functions/unserialize/](http://phpjs.org/functions/unserialize/)（因为问题被标记为 json 这可能是你想要的）

还有相当多的各种语言/技术的实现用于反序列化这种格式，如果需要，可以很容易地找到它们。

# windows - 使用 %time% 时出现批处理文件错误

> ID：10812642
> 
> 赞同：0
> 
> 时间：2012-05-30T08:29:26.947
> 
> 标签：windows, batch-file

xxxx当我像这样运行我的数据库备份文件时：

```
@echo off
"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump" -hlocalhost -uroot -pxxxxx --all-databases > "D:\DB backups\AllDBs_%date%.sql" 
```

它工作正常。一旦我添加了 %time% 占位符，它就不再起作用了。

```
@echo off
"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump" -hlocalhost -uroot -pxxxxx --all-databases > "D:\DB backups\AllDBs_%date%_%time%.sql" 
```

> 文件名、目录名或卷标语法不正确。

任何人都知道为什么这不起作用？我搜索了互联网，但没有发现任何说它不应该工作的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:38:07.547

如果您想要日期和时间，最好使用以下方法：

```
for /f "skip=1" %%x in ('wmic OS GET LocalDateTime') do if not defined LocalDateTime set LocalDateTime=%%x
set MyDate=%LocalDateTime:~0,8%
set MyTime=%LocalDateTime:~8,6% 
```

这保证为已知格式（即，仅是没有任何分隔符的数字）。而且无论您的语言环境设置如何，您都绝对不会遇到无效字符的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:33:24.520

在批处理中，`%time%`变量包含有效 Windows 文件名的无效字符。

`-`使用它来删除它们并用's替换无效字符。

```
%DATE:/=-%%TIME::=-% 
```

# java - scheduleWithFixedDelay 抛出异常时如何重新启动计划？

> ID：10812647
> 
> 赞同：4
> 
> 时间：2012-05-30T08:29:40.803
> 
> 标签：java, exception-handling, concurrency, threadpool

我`ScheduledExecutorService`用来安排一些需要定期运行的任务。我想知道此代码是否可以在发生异常时恢复计划。

```
ScheduledExecutorService service = Executors.newScheduledThreadPool(1);
this.startMemoryUpdateSchedule(service);//See below method

//Recursive method to handle exception when run schedule task
private void startMemoryUpdateSchedule(ScheduledExecutorService service) {
    ScheduledFuture<?> future = service.scheduleWithFixedDelay(new MemoryUpdateThread(), 1, UPDATE_MEMORY_SCHEDULE, TimeUnit.MINUTES);
    try {
        future.get();
    } catch (ExecutionException e) {
        e.printStackTrace();
        logger.error("Exception thrown for thread",e);
        future.cancel(true);
        this.startMemoryUpdateSchedule(service);
    } catch(Exception e) {
        logger.error("Other exception ",e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:27:41.560

您可能应该将 try 块包含在一个`while(true)`循环中，因为如果第一次运行没有抛出异常，您将退出您的方法，如果第二次调用抛出异常，您将不会捕获它。

我还会在它自己的线程中运行递归调用，以避免在出现问题时出现 StackOverFlow 错误的风险。

所以它看起来像这样：

```
private void startMemoryUpdateSchedule(final ScheduledExecutorService service) {
    final ScheduledFuture<?> future = service.scheduleWithFixedDelay(new MemoryUpdateThread(), 1, UPDATE_MEMORY_SCHEDULE, TimeUnit.MINUTES);
    Runnable watchdog = new Runnable() {

        @Override
        public void run() {
            while (true) {
                try {
                    future.get();
                } catch (ExecutionException e) {
                    //handle it
                    startMemoryUpdateSchedule(service);
                    return;
                } catch (InterruptedException e) {
                    //handle it
                    return;
                }
            }
        }
    };
    new Thread(watchdog).start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:05:39.793

`ScheduledExecutorService.scheduleWithFixedDelay(Runnable, long, long, TimeUnit)`throws `RejectedExecutionException`（RuntimeException 的一个子项）==> 我们可以捕获它并再次重试提交。

现在`future.get()`应该返回一次执行的结果，我们需要在循环中调用它。

此外，一次执行失败不会影响下一次计划执行，这将 ScheduledExecutorService 与 TimerTask 区分开来，后者在同一线程中执行计划任务 => 一次执行失败将在 TimerTask 的情况下中止计划（http:// stackoverflow.com/questions/409932/java-timer-vs-executorservice) 我们只需要捕获 Future.get() 抛出的所有三个异常，但我们不能重新抛出它们，那么我们将无法获取后续执行的结果。

代码可以是：

```
public void startMemoryUpdateSchedule(final ScheduledExecutorService service) {
final ScheduledFuture<?> future;
    try {
        future = service.scheduleWithFixedDelay(new MemoryUpdateThread(),
                1, UPDATE_MEMORY_SCHEDULE, TimeUnit.SECONDS);
    } catch (RejectedExecutionException ree) {
        startMemoryUpdateSchedule(service);
        return;
    }
    while (true) {
        try {
            future.get();
        } catch (InterruptedException ie) {
            Thread.currentThread().interrupt();
        } catch (ExecutionException ee) {
            Throwable cause = ee.getCause();
            // take action, log etc.
        } catch (CancellationException e) {
          // safety measure if task was cancelled by some external agent.
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T05:36:25.200

尝试使用专门为此目的设计的[jcabi-log](http://www.jcabi.com/jcabi-log)[`VerboseRunnable`](http://www.jcabi.com/jcabi-log/apidocs/com/jcabi/log/VerboseRunnable.html)中的类：

```
import com.jcabi.log.VerboseRunnable;
Runnable runnable = new VerboseRunnable(
  Runnable() {
    public void run() { 
      // do business logic, may Exception occurs
    }
  },
  true // it means that all exceptions will be swallowed and logged
); 
```

现在，当有人调用时，`runnable.run()`不会抛出异常。相反，它们被吞下并记录（到 SLF4J）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:47:31.570

我已经按照讨论添加了循环。

```
public void startMemoryUpdateSchedule(final ScheduledExecutorService service) {

    boolean retry = false;

    do {

        ScheduledFuture<?> future = null;
        try {
            retry = false;
            future = service.scheduleWithFixedDelay(new MemoryUpdateThread(), 1, UPDATE_MEMORY_SCHEDULE, TimeUnit.SECONDS);
            future.get();
        } catch (ExecutionException e) {
            // handle
            future.cancel(true);
            retry = true;
        } catch(Exception e) {
            // handle
        }           

    } while (retry);

} 
```

# c# - C#图表缩放精度

> ID：10812649
> 
> 赞同：2
> 
> 时间：2012-05-30T08:29:48.480
> 
> 标签：c#, visual-studio-2010, charts

我有一个图表，其中日期（字符串）作为 X 值，小数作为 Y 值。我想放大图表，但设置时：

```
chart1.ChartAreas[0].CursorX.IsUserEnabled = true;
chart1.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true; 
```

它在 X 轴上放大到间隔 1。我想在轴上逐渐放大，但是当我设置\

```
chart1.ChartAreas[0].CursorX.Interval = 0.1; 
```

（除 1 之外的任何内容）X 轴上的标签消失。有人可以帮我吗，我是图表控件的新手。请原谅我的无知。任何建议将不胜感激到目前为止，这是我的一段代码：

```
chart1.ChartAreas[0].CursorX.IsUserEnabled = true;
chart1.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true;

chart1.Series[0].IsVisibleInLegend = false;
chart1.Series[0].ChartType = SeriesChartType.Area;

DateTime sday = Convert.ToDateTime(earnings1.dataGridView1[0, 0].Value.ToString());
chart1.Series[0].XValueType = ChartValueType.String;
int i = 0;
chart1.Series[0].SmartLabelStyle.Enabled = false;

foreach (DataGridViewRow dgvr in earnings1.dataGridView1.Rows)
{
         decimal testing = Convert.ToDecimal(earnings1.dataGridView1[1, i].Value);
         testing = decimal.Truncate(testing);
         var point = new DataPoint(i + 1, Convert.ToDouble(testing));
         point.Label = testing.ToString();
         point.Font = new Font("Century Gothic", 8, FontStyle.Bold);
         chart1.Series[0].Points.Add(point);
         chart1.Series[0].LabelAngle = -90;
         chart1.Series[0].Points[i].AxisLabel = sday.ToString("dd/MM/yyyy");
         sday = sday.AddDays(1);
         i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:32:29.133

我找到了这样做的方法：

```
chart1.ChartAreas[0].CursorX.IntervalType = DateTimeIntervalType.Auto;
chart1.ChartAreas[0].CursorX.Interval = 1; 
```

并让 Visual Studio 为您完成这项工作。

# php - 通过 PHP 将 MySQL 记录发送到 iOS

> ID：10812650
> 
> 赞同：1
> 
> 时间：2012-05-30T08:29:49.043
> 
> 标签：php, mysql, ios, http, nsurlconnection

每个人。

我正在使用通过 PHP 连接到 MySQL 的 iOS 应用程序。

我希望我的应用程序发送 PHP GET 请求并从 MySQL 数据库中选择一些数据，但我不知道如何将 MySQL 上的数据发送到 iOS。这是我的代码。

```
myDataGetter.m

//create a request and connect (url is my PHP file's)
NSURLRequest* getRequest = [NSURLRequest requestWithURL:url];
NSURLConnection* connection = [NSURLConnection connectionWithRequest:getRequest      
                                                            delegate:self];
if (connection) {
    //data received from PHP will be stored in receivedData
    receivedData = [[NSMutableData alloc] init];
} else {
    //error
} 
```

在 myDataGetter.m 中，我设置了 NSURLConnection 的委托方法。例如，

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [receivedData setLength:0]
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [receivedData appendData:data];
} 
```

在我的 PHP 文件中，

```
$con = mysql_connect ('host', 'user', 'pass');
mysql_select_db ('dbname', $con);

$rows = mysql_query ("SELECT name, age, email FROM table");
while ($row = mysql_fetch_array ($rows)) {
    $name = $row["name"];
    $age = $row["age"];
    $email = $row["email"];
} 
```

在此示例中，我想将 $name、$age 和 $email 发送到 iOS。如果你知道如何做到这一点，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:51:52.877

我总是使用 ASIHTTPRequest 来完成这类工作。它比 NSURLConnection 框架强大得多。

其次，我会使用 PHP 将结果编码为 JSON，然后使用非常好的 iOS SBJson 框架将请求的结果简单地放入 NSDictionary 或 NSMutableArray。

[http://allseeing-i.com/ASIHTTPRequest/Setup-instructions](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

[JSON 编码 MySQL 结果](https://stackoverflow.com/questions/383631/json-encode-mysql-results)

# joomla - Joomla 中的多语言站点，特定页面未加载模块

> ID：10812656
> 
> 赞同：0
> 
> 时间：2012-05-30T08:30:20.617
> 
> 标签：joomla, sef

我在 Joomla 中建立了一个网站，它使用 Joom!Fish 来翻译文章，这似乎工作得很好。

但是，我的网站上有一个页面，在当前活动的四种语言中的一种中，它不会加载我的两个模块。我已将此归结为 SEF-urls 问题，在 Joomla-admin 中取消激活它可以解决问题，但我需要 SEF-urls。

为什么 SEF-url 在我的 3 种语言上工作，但在第四种语言上似乎忽略了 itemid 参数并且不加载我的模块。

使用 Joomla 1.5x，对于我使用内置解决方案的 SEF 网址，也许使用 SEF 插件可以解决这个问题？

最好的问候//忍者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:21:58.600

通过重新创建文章菜单、模块等来修复它。连接到损坏的页面，它开始工作。然而，同样的问题出现在新页面上只是时间问题。

似乎是 SEF-url 和模块并没有完全支持它的问题。JoomFish 在这方面似乎相当糟糕。

因此，如果其他人遇到此问题，请尝试重新创建与该问题相关的所有内容，并希望不会有其他问题。

# c# - 从代码隐藏显示确认框并使用响应

> ID：10812663
> 
> 赞同：0
> 
> 时间：2012-05-30T08:30:39.863
> 
> 标签：c#, jquery, asp.net, ajax

我使用 jquery ajax 调用 ac# 方法。

当我在c#方法中达到某个点时，我想显示一个确认框，并在方法中使用确认框结果。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:33:05.827

我不认为这是可能的。您可以将您的方法拆分为 2 个方法并一个接一个地调用它们。这样你就有可能在调用第二种方法之前显示一个确认框。

# javascript - 每个和字符串索引

> ID：10812664
> 
> 赞同：0
> 
> 时间：2012-05-30T08:30:54.430
> 
> 标签：javascript, jquery, html, arrays

我有一个包含整数和字符串索引的数组。

出于某种原因，似乎 $.each 没有正确地迭代字符串索引。

下面的输出是：

编号：0 1 2 3

编号：1 4 5 6

编号：2 7 8 9

// 实际 idx: 3 a b c

// 预期 idx: abc 10 11 12

这是我测试的代码：

```
<html>
<head>
    <title>jQuery - each</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            var a = new Array();
            a.push(0);
            a[0] = [1, 2, 3];

            a.push(1);
            a[1] = [4, 5, 6];

            a.push(2);
            a[2] = [7, 8, 9];

            a.push("abc");
            a["abc"] = [10, 11, 12];

            $.each(a, function (idx, v) {

                alert("idx: " + idx);
                alert(v[0]);
                alert(v[1]);
                alert(v[2]);
            });
        });

    </script>
</head>
<body>
</body> 
```

非常感谢您的帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:34:54.953

javascript中没有字符串索引数组，你需要使用object。

```
 var a = {};
        a[0] = [1, 2, 3];
        a[1] = [4, 5, 6];
        a[2] = [7, 8, 9];
        a["abc"] = [10, 11, 12];

        $.each(a, function (idx, v) {

            alert("idx: " + idx);
            alert(v[0]);
            alert(v[1]);
            alert(v[2]);
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:34:04.800

像这样更改您的代码：

```
 $(document).ready(function () {

        var a = {};
        a['0'] = [1, 2, 3];
        a['1'] = [4, 5, 6];
        a['2'] = [7, 8, 9];
        a['abc'] = [10, 11, 12];

        $.each(a, function (idx, v) {
            console.log("idx %s : %s, %s, %s", idx, v[0], v[1], v[2]);
        });
  }); 
```

这将返回

```
idx 0 : 1, 2, 3
idx 1 : 4, 5, 6
idx 2 : 7, 8, 9
idx abc : 10, 11, 12 
```

请注意，当您使用字符串作为索引时，您的数据结构是一个对象（而不是数组）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:38:27.937

Jquery $.each 迭代对象的属性或数组，而不是两者。 [jQuery](http://api.jquery.com/jQuery.each/)

```
jQuery.each( collection, callback(indexInArray, valueOfElement) )
collection: The object or array to iterate over. 
```

# java - 找不到 Javac 编译器

> ID：10812668
> 
> 赞同：15
> 
> 时间：2012-05-30T08:31:07.813
> 
> 标签：java, maven, ubuntu, compilation, classpath

我尝试`mvn install`并收到此消息：

```
Compilation failure
Unable to locate the Javac Compiler in:
  /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required).
In most cases you can change the location of your Java
installation by setting the JAVA_HOME environment variable. 
```

嗯，有一个开放的jdk，我也下载了另一个。我试图将 JAVA_HOME 指向两者，现在已设置：

```
JAVA_HOME=/usr/lib/jvm/jdk1.7.0_03
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin
export PATH 
```

我还尝试选择其中一个打开`sudo update-alternatives --config java`但在其中使用不同的 jdk 版本时遇到相同的错误。

我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-30T08:46:42.680

似乎您的 PATH 未正确拾取...“echo $PATH”的输出是否包含 javac 所在的目录？我建议如下：

打开终端并执行：

```
export JAVA_HOME=/usr/lib/jvm/jdk1.7.0_03
export PATH=$PATH:$JAVA_HOME/bin
javac -version
which javac 
```

如果 javac -version 仍然不起作用，请在 /usr/local/bin 中创建一个指向您的 javac 二进制文件的符号链接：

```
cd /usr/local/bin
ln -s /usr/lib/jvm/jdk1.7.0_03/bin/javac javac 
```

这应该让你开始运行......另一种方法是尝试通过你的包管理系统设置java（例如“apt-get install java”或类似的东西）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-14T13:14:32.750

在运行 Jenkins 的 maven 构建时，我在 ubuntu 机器上遇到了类似的错误。如果 'javac -version' 的输出提示以下消息：

“程序'javac'可以在以下包中找到：default-jdk ecj gcj-5-jdk openjdk-8-jdk-headless gcj-4.8-jdk gcj-4.9-jdk openjdk-9-jdk-headless 尝试：apt安装 ”

然后您可以使用以下命令安装“openjdk-8-jdk-headless”：

# apt install openjdk-8-jdk-headless

这解决了我的问题，并且 maven 构建顺利。

# math - 计算象限中的点

> ID：10812676
> 
> 赞同：1
> 
> 时间：2012-05-30T08:31:37.870
> 
> 标签：math, logic

我必须计算每个象限中有多少点，我只有以下数据：
没有 x>0、x<0、y>0 和 y<0 的点。
例如。对于下图，我有数据
x>0 = 4 ， x<0 = 3
y>0 = 4 ， y<0 = 3
是否可以计算否。有这么多数据的每个象限的点数？

![点图像](../Images/2147b59be8fb1ad107ce81d3275aca74.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T08:34:11.630

不，没有足够的信息。例如，对于您的样本数据，另一种解决方案是在 (X>0, Y>0) 象限中有 4 个点，在 (X<0, Y<0) 象限中有 3 个点。

在线性代数术语中，您有四个带有四个变量的方程：

```
I)   a + b = 4
II)  c + d = 3
III) a + c = 4
IV)  b + d = 3 
```

这些方程是线性相关的（第四个方程可以从前三个推导出来：IV = I + II - III），因此不存在唯一解。

# c# - 如何在数据中传递 Json 中的参数？

> ID：10812684
> 
> 赞同：1
> 
> 时间：2012-05-30T08:32:26.403
> 
> 标签：c#, json

我在 aspx 页面中有一个文本框。从那我需要在Json函数中发送文本框的文本为此我在服务器端有一个方法。

```
 [WebMethod]
    public static OfficeDetails[] BindSearchDatatable(string officename)
    {

        DataTable dt = new DataTable();
        List<OfficeDetails> details = new List<OfficeDetails>();

        using (SqlConnection con = new SqlConnection(@"Data Source=GTL--7\SQLEXPRESS;Initial Catalog=master;Integrated Security=True"))
        {
            using (SqlCommand cmd = new SqlCommand("select  OfficeName,City,Country from Office where OfficeName like '%" + officename + "%'", con))
            {
                con.Open();
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(dt);
                foreach (DataRow dtrow in dt.Rows)
                {
                    OfficeDetails Office = new OfficeDetails();
                    Office.OfficeName = dtrow["OfficeName"].ToString();
                    Office.City = dtrow["City"].ToString();
                    Office.Country = dtrow["Country"].ToString();
                    details.Add(Office);
                }
            }
        }
        return details.ToArray();
    } 
```

在 .aspx 页面中我有

```
 $('#btnSearch').click
                            (
                                function () {
                                    var searchtext = $("#txtSearch").val();

                                    alert(searchtext);
                                    $.ajax(
                                                {
                                                    type: "POST",
                                                    url: "Gridview.aspx/BindSearchDatatable",
                                                    data: "{officename : New}",
                                                    contentType: "application/json; charset=utf-8",
                                                    dataType: "json",
                                                    async: true,
                                                    cache: false,
                                                    success: function (data) {
                                                        for (var i = 0; i < data.d.length; i++) {
                                                            $("#gvDetails").append("<tr><td>" + data.d[i].OfficeName + "</td><td>" + data.d[i].City + "</td><td>" + data.d[i].Country + "</td></tr>");
                                                        }
                                                    },
                                                    error: function (x, e) {
                                                        alert("The call to the server side failed. " + x.responseText);
                                                    }
                                                }
                                            );
                                    return false;
                                }
                            ); 
```

现在我的问题是我在数据中发送参数，但我收到一个错误函数运行良好。我已经在没有参数的情况下对其进行了测试，所以它运行良好。所以我的事情是在函数中传递文本框的文本值时发生了一些错误.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:34:05.750

您发送的 JSON 无效。代替：

```
data: "{officename : New}" 
```

和：

```
data: "{officename : 'New'}" 
```

甚至更好地使用`JSON.stringify`可以正确编码值的方法：

```
data: JSON.stringify({ officename : 'New' }) 
```

另外，请修复您的服务器端脚本并使用参数化查询，因为您的代码容易受到 SQL 注入攻击，如果您将此代码放到野外，您可能有一天会发现自己缺少数据库。哦，你真的不需要任何数据表：

```
[WebMethod]
public static OfficeDetails[] BindSearchDatatable(string officename)
{
    using (var con = new SqlConnection(@"Data Source=GTL--7\SQLEXPRESS;Initial Catalog=master;Integrated Security=True"))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "SELECT OfficeName, City, Country FROM Office WHERE OfficeName LIKE @officename";
        cmd.Parameters.AddWithValue("@officename", "%" + officename + "%");
        using (var reader = cmd.ExecuteReader())
        {
            var details = new List<OfficeDetails>();
            while (reader.Read())
            {
                var office = new OfficeDetails();
                office.OfficeName = reader.GetString(reader.GetOrdinal("OfficeName"));
                office.City = reader.GetString(reader.GetOrdinal("City"));
                office.Country = reader.GetString(reader.GetOrdinal("Country"));
                details.Add(office);
            }
            return details.ToArray();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:36:36.093

替换：数据：“{officename : New}”

和：

数据：{officename：'新'}，

# c - 嵌入式系统中断交叉的故障模型

> ID：10812689
> 
> 赞同：3
> 
> 时间：2012-05-30T08:32:55.487
> 
> 标签：c, embedded, interrupt

我目前正在开发一个需要处理某些安全相关问题的软件项目，其中一个是中断执行期间的故障。许多来源（IEC 标准和谷歌）提到了中断的交叉，但没有说明在构建故障模型时从哪里开始。任何指向此的指针将不胜感激。

到目前为止，我的想法是：

1.  考虑硬件连接，即相邻引脚融合。
2.  测试内部数据路径的完整性（寻址和数据传输）。
3.  考虑内部中断处理（向量优先级和分辨率）。

前两个很简单。第三个当我试图寻找关于这些故障将如何表现以及可以采取哪些步骤来测试它的解释时，我真的很茫然。

此外还有一个问题，这三个区域是否足以涵盖中断交叉问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:04:25.583

可能发生的具体故障取决于您使用的 CPU。但通常，这将包括无效指令、总线故障（指令或数据总线）、未对齐的内存访问、内存保护违规等。

通常，故障是由内存损坏引起的。这可能是由于您自己的内部错误破坏了内存或跳入杂草，或者可能是由于有人攻击您的系统。

您需要准确查看哪些故障适用于您的 CPU，然后分析您希望故障处理程序如何处理它们。通常这只是系统重置，但对于安全的应用程序，可能还有其他一些事情，例如记录发生的事情、锁定系统、删除密钥等。

# ruby - 在 Windows7 64 位上安装 jslint-v8 Ruby gem 的问题

> ID：10812696
> 
> 赞同：2
> 
> 时间：2012-05-30T08:33:17.200
> 
> 标签：ruby, windows-7, sdk, jslint, rally

在 Windows 7（64 位）上设置 Rally App SDK 2.0p 环境时出现问题。我已经从 ruby​​installer.org 安装了 Ruby 1.8.7-p358 并设法安装了 rake Ruby gem。但我在安装**jslint-v8** gem 时遇到问题。它依赖于需要使用 Ruby DevKit 构建的**therubyracer**和**libv8 gem。**在安装过程中，我收到以下错误：

```
C:\ruby> gem install jslint-v8
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing jslint-v8:
    ERROR: Failed to build gem native extension.

    C:/ruby/bin/ruby.exe extconf.rb
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/ruby/bin/ruby
extconf.rb:13: uninitialized constant Gem (NameError)
Checking for Python...

Gem files will remain installed in C:/ruby/lib/ruby/gems/1.8/gems/libv8-3.3.10.4 for inspection.
Results logged to C:/ruby/lib/ruby/gems/1.8/gems/libv8-3.3.10.4/ext/libv8/gem_make.out 
```

有谁知道如何在Win7中正确安装它？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T00:16:46.630

您尝试安装的 gem 取决于`libv8`gem，它只不过是 Google V8 JavaScript VM 的包装器。

Windows 没有预编译的 libv8（就像 Linux 或 OSX 一样），这意味着它需要从头开始构建 V8。

围绕 V8 的构建过程的代码不是很便携，更不用说编译 libv8 需要安装 Python :-P

直到今天，没有人能够按照存储库说明在 Windows 上遵循 libv8 预编译的说明：

[https://github.com/cowboyd/libv8](https://github.com/cowboyd/libv8)

很抱歉无法为您提供更好的回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-22T09:58:27.877

试试这个**gem install libv8 -v '3.16.14.3' -- --with-system-v8**

参考：[安装 libv8 时出错：错误：无法构建 gem 原生扩展](https://stackoverflow.com/questions/19673714/rails-gem-install-error-error-installing-libv8-error-failed-to-build-gem-nati)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T13:30:24.920

要在安装 gem 时在 Windows 中构建 gem 原生扩展，通常还需要安装 DevKit： [http](http://rubyinstaller.org/downloads/) ://rubyinstaller.org/downloads/ - 转到 devkit 下载链接
他们的 github 页面有安装说明： [https：/ /github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

我还建议使用 Ruby 1.9.3 而不是 1.8.7，但这应该不是什么大问题

希望有帮助。

# ruby-on-rails - Mongoid 和 Cancan 角色继承/每个用户的多个角色

> ID：10812697
> 
> 赞同：0
> 
> 时间：2012-05-30T08:33:24.327
> 
> 标签：ruby-on-rails, ruby, devise, mongoid, cancan

我在玩 Mongoid（NoMySQL 数据库）、DEVISE 和 CANACN

我已阅读手册（https://github.com/ryanb/cancan/wiki/Role-Based-Authorization），但我不想使用“roleMask”计算。我想使用 Array (或 Hash) -field 来代替，其中包含用户的角色。

```
class User
  include Mongoid::Document
  field :email, :type => String, :null => false
  field :roles, :type => Array, default: -> { ['User'] if new_record?} 
```

这有可能吗？如果是，如何？:-)

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:46:35.307

Cancan 并不真正关心你的角色是如何工作的——你的能力文件是纯红宝石，所以逻辑完全取决于你。例如，您可能有以下能力：

```
can :manage, Product 
```

如果您想将此限制为角色数组包含某个值的用户，那么您可以这样做

```
if user.roles.include?('Admin')
  can :manage, Product
end 
```

由于你的能力只是一个 ruby​​ 类，你几乎可以做任何你可以用 ruby​​ 表达的事情。

有多种处理继承的方法，[cancan wiki](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)中概述了两种。

一种方法涉及更改您检查角色的方式：如果您有一个`admin?`方法，那么不仅检查管理员角色的存在，它还将检查应该继承所有该访问权限的任何其他角色的存在。

另一种方法是将您的能力文件拆分为以角色命名的方法，例如编辑角色的所有语句都在`editor`方法中，该`manager`方法包含经理角色的所有语句等。例如，如果经理需要继承访问编辑器然后调用`editor`方法 from `manager`。

# javascript - HTML5：在 IOS Safari 中手动“播放”画布内的视频

> ID：10812699
> 
> 赞同：6
> 
> 时间：2012-05-30T08:33:27.607
> 
> 标签：javascript, html, video, canvas, drawimage

所以，这就是我想要做的事情：我想将视频加载到视频元素中，但没有以“正常”方式播放。使用根据电影的帧速率计算的定时间隔，我希望在每次迭代中

A. 手动将视频推进一“帧”（或尽可能接近该帧）。
B. 将该框架绘制到画布中。

从而在画布内“播放”视频。

这是一些代码：

```
<video width="400" height="224" id="mainVideo" src="urltovideo.mp4" type="video/mp4"></video>
<canvas width="400" height="224" id="videoCanvas"></canvas>

<script type="text/javascript">

var videoDom = document.querySelector("#mainVideo");
var videoCanvas = document.querySelector("#videoCanvas");
var videoCtx = null;
var interval = null;

videoDom.addEventListener('canplay',function() {
   // The video's framerate is 24fps, so we should move one frame each 1000/24=41.66 ms
   interval = setInterval(function() { doVideoCanvas(); }, 41.66);
});

videoDom.addEventListener('loadeddata',function() {
  videoCtx = videoCanvas.getContext('2d');
});

function doVideoCanvas() {
  videoCtx.drawImage(videoDom,0,0);
  //AFAIK and seen, currentTime is in seconds
  videoDom.currentTime += 0.0416;
}

</script> 
```

这在 Google Chrome 中完美运行，但在 Iphone 的 Safari 中无法运行；
视频帧**根本不会被绘制**到画布上。

我确保：

*   我挂钩的视频事件确实被触发了（“警报”并显示出来了）。
*   我可以控制画布（做了一个' `fillRect`'并填充）。

[我还尝试在 drawImage 中指定尺寸 - 它没有帮助]视频对象
**是否`drawImage`在 Iphone Safari 中完全不适用...？**

即使我设法找到捕获视频帧的方法，Iphone 的浏览器中也存在一些其他问题：

*   `currentTime`仅在视频开始播放（以标准方式）后才授予对视频属性的访问权限。我想也许以某种方式“隐藏它”然后捕获，但没有设法做到这一点。还想到了可能以某种方式开始播放视频然后立即停止它；
    似乎没有任何方法可以强制开始在 IOS Safari 中播放视频。`video.play()`，或者`autoplay`似乎什么也没做。只有当用户点击视频上的“播放圈”时，视频才会开始播放（占据整个屏幕，就像 iPhone 浏览器上的视频一样）。

*   视频播放后 - 该`currentTime`属性**会**被转发。关于视频本身。当您暂停视频并返回正常的 html 页面时 - 您可以看到视频元素上的帧发生变化。虽然，在一个缓慢的阶段（不像谷歌浏览器，它的速度似乎足够平滑，让它看起来像是在播放）——在 iphone 中它看起来可能是每秒 2-3 帧的速度。即使我尝试更改间隔时间，它也保持不变，我想 iPhone 上的浏览​​器可以处理的最小时间限制。

**“奖金问题”** :) - 当视频元素上的帧从事件中进行时 - 圆形“播放按钮”在视频元素上可见（因为它实际上不是“播放”）。反正有没有隐藏它并使其不可见？

*这已经在运行 IOS 5 的 Iphone 3GS（同时具有 3G 和 Wifi）和 Iphone 4 上进行了测试，两者都具有与所述相同的结果。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:57:43.097

不幸的是，我没有 iOS 设备来测试这一点，但我认为您不需要以您尝试使用该`currentTime`属性的方式实际捕获视频帧。通常的过程如下所示：

1.  创建一个没有控件的视频元素（省略`controls`属性）
2.  隐藏元素
3.  当视频正在播放时，每隔一段时间将其绘制到画布上

正如您所发现的，iOS 设备不支持 HTML5 视频（或实际上是音频）的自动播放，但您可以创建一个单独的控件来使用该`play()`方法启动视频的播放。

这种方法应该可以解决播放按钮可见的问题，因为在这种情况下，您实际上是在播放视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-27T05:15:42.403

我不相信`loadeddata`在 iOS 上调用了该事件，`loadedmetadata`而是尝试该事件。我还发现有必要在 iOS 上`videoDom.load()`设置后调用该方法`videoDom.src`。

对于我的用例，我需要在`seeked`事件之后执行“dRAF”（双重 requestAnimationFrame），以确保实际绘制到画布而不是透明矩形。

尝试类似：

```
videoDom.onloadedmetadata = () => {
  videoCanvas.height = videoDom.videoHeight
  videoCanvas.width = videoDom.videoWidth
  videoDom.currentTime = 0
}

videoDom.onseeked = () => {
  // delay the drawImage call, otherwise we get an empty videoCanvas on iOS
  // see https://stackoverflow.com/questions/44145740/how-does-double-requestanimationframe-work
  window.requestAnimationFrame(() => {
    window.requestAnimationFrame(() => {
      videoCanvas.getContext('2d').drawImage(videoDom, 0, 0, videoCanvas.width, videoCanvas.height)
      videoDom.currentTime += 0.0416
    })
  })
}

videoDom.load() 
```

从[这个要点](https://gist.github.com/diachedelic/cf758562ad6fdf7db79f474f5528dec0)

# ruby-on-rails - 如何使用 koala gem 在 Facebook 墙上发布上传的图片/视频附件？

> ID：10812702
> 
> 赞同：2
> 
> 时间：2012-05-30T08:33:33.130
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我正在做一个涉及使用 Koala gem 调用 facebook graph API 的 Rails 项目。是否可以通过图形 API 将图片/视频附件（不是图片链接）发布到 Facebook 墙上？

我可以使用此命令放置图片

```
graph = Koala::Facebook::API.new(access_token)
graph.put_picture(params["picture_path"]) #where params["picture_path] is ActionDispatch::Http::UploadedFile object 
```

但这只上传到相册

我没有这样做：

```
graph = Koala::Facebook::API.new(access_token)
graph.put_wall_post("hello", {"picture" => params["picture_path"]} ) #where params["picture_path] is ActionDispatch::Http::UploadedFile object 
```

错误：

```
 undefined method `local_path' for #<ActionDispatch::Http::UploadedFile:0x00000106100a70> 
```

帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:13:28.107

这是一个使用 rmagick 生成的图像的示例：

首先创建一个图像：

```
@clown = Magick::ImageList.new("public/images/framed_clown.jpg") 
```

然后放入相册（必须使用StringIO）和to_blob：

```
@clown_id = StringIO.open(@clown.to_blob) do |strio|
  response = @graph.put_picture(strio, "image/jpeg")
  response['id']
end 
```

现在@clown_id 包含图像的 ID，以获取 URL：

```
@picture_url = @graph.get_picture(@clown_id) 
```

终于可以贴墙了？好吧，请记住您需要 publish_stream 权限：

```
FACEBOOK_SCOPE = 'user_likes,user_photos,user_photo_video_tags,publish_stream' 
```

所以我们可以说：

```
begin 
  @graph.put_wall_post("This a test", {"picture" => @picture_url})
rescue => e
  if(e.fb_error_type == "OAuthException")
    # Already Posted
  end
end 
```

因为最好对重复的状态消息进行控制....

享受！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:53:52.093

这对我有用：

```
graph.put_picture(params["picture_path"], {:message => "Message"}) 
```

（取自：[https](https://github.com/arsduo/koala/wiki/Uploading-Photos-and-Videos) ://github.com/arsduo/koala/wiki/Uploading-Photos-and-Videos ）

# algorithm - 没有在网格中走 M 步的方法

> ID：10812706
> 
> 赞同：5
> 
> 时间：2012-05-30T08:33:57.193
> 
> 标签：algorithm, math

您位于位置 x,y 的网格中。行的尺寸是 dx,dy。一步，您可以在行或列中领先或落后一步。你有多少种方法可以走 M 步，这样你在任何时候都不会离开网格？
您可以多次访问同一个职位。
如果您对任何 x,y 或者 x,y <= 0 或 x,y > dx,dy，您将离开网格。
1 <= M <= 300
1 <= x,y <= dx,dy <= 100

输入：
M
xy
dx dy

输出：
没有方法

示例：
输入：
1
6 6
12 12

输出：
4

示例：
输入：
2
6 6
12 12

输出：
16
如果你在位置 6,6，那么你可以走到 (6,5),(6,7),(5,6),(7,6)。

我被困在如何使用帕斯卡三角形来解决它。这是正确的方法吗？我已经尝试过蛮力，但它太慢了。

```
C[i][j], Pascal Triangle
C[i][j] = C[i - 1][j - 1] + C[i - 1][j]

T[startpos][stp]
T[pos][stp] = T[pos + 1][stp - 1] + T[pos - 1][stp - 1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:08:24.357

您可以使用您提供的公式解决一维问题。

让我们`H[pos][step]`使用给定的步数来水平移动的方法数。
并且`V[pos][step]`是在给定步数的情况下移动垂直唱歌的多种方式。

您可以迭代将成为水平的步`i = 0..M`
数移动方式数`H[x][i]*V[y][M-i]*C[M][i]`，其中 C 是二项式系数。

您可以构建 H 和 V`O(max(dx,dy)*M)`并在`O(M)`.

**编辑：** *关于 H 和 V*的说明。假设你有行，有 d 个单元格：1,2,...,d。然后，您站在单元格编号 pos 处`T[pos][step] = T[pos-1][step-1] + T[pos+1][step-1]`，因为您可以向前或向后移动。

基本情况是`T[0][step] = 0`, `T[d+1][step] = 0`, `T[pos][0] = 1`。

我们建立 H 假设`d = dx`和 V 假设`d = dy`。

**编辑2：**基本上，算法的*想法*是因为我们在二维之一中移动并且检查也独立地基于每个维度，我们可以将二维问题拆分为2个一维问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:58:45.493

一种方法是 O(n^3) 动态规划解决方案：

准备一个 3D 数组：

```
int Z[dx][dy][M] 
```

其中 Z[i][j][n] 保存从位置 (i,j) 开始到最后 n 次移动的路径数。

基本情况是 Z[i][j][0] = 1 对于所有 i, j

递归情况是 Z[i][j][n+1] = Z[i-1][j][n] + Z[i+1][j][n] + Z[i][j- 1][n] + Z[i][j+1][n] （仅包括地图上的总和项）

填写完数组后，返回 Z[x][y][M]

为了节省空间，您可以在使用 n 后丢弃每个二维数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T20:02:27.073

这是我为原始[hackerrank](https://www.hackerrank.com/challenges/grid-walking)问题构建的Java 解决方案。因为大网格永远运行。可能需要一些聪明的数学。

```
long compute(int N, int M, int[] positions, int[] dimensions) {
    if (M == 0) {
        return 1;
    }
    long sum = 0;
    for (int i = 0; i < N; i++) {
        if (positions[i] < dimensions[i]) {
            positions[i]++;
            sum += compute(N, M - 1, positions, dimensions);
            positions[i]--;
        }
        if (positions[i] > 1) {
            positions[i]--;
            sum += compute(N, M - 1, positions, dimensions);
            positions[i]++;
        }
    }
    return sum % 1000000007;
} 
```

# matlab - 视频处理的标准测试视频

> ID：10812707
> 
> 赞同：6
> 
> 时间：2012-05-30T08:33:57.700
> 
> 标签：matlab, video-processing

所以.. 在图像处理中，[lena](http://ndevilla.free.fr/lena/)是研究社区中测试算法的标准图像。同样.. 是否有任何标准视频可用于测试 MATLAB 代码以进行视频处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T08:34:07.173

还有一些常用的视频序列——尽管在某种程度上它取决于你正在开发的视频算法的类型（反映在运动水平、运动类型、分辨率等）和你想要的文件类型（例如 YUV、压缩）。

作为起点，`foreman.yuv`, `Carphone.yuv`, `akiyo.yuv`, `bus.yuv`, `coastguard.yuv`, `flower.yuv`.

例如，谷歌搜索上面出现了一个看起来合理的存储库，如下所示：

*   [YUV 视频序列 – ASU](http://trace.eas.asu.edu/yuv/)
*   [Derf 在 xiph.org 上的测试视频集](http://media.xiph.org/video/derf/)

最近，Blender 剪辑[Big Buck Bunny](https://peach.blender.org/)、[Tears of Steel](https://mango.blender.org/)和[Sintel](https://durian.blender.org/)被更频繁地使用，因为它们提供高清和 4K 分辨率以及立体 3D。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:51:59.797

/评论太长了/

我在 matlab 博客文章中遇到了一些内置示例/演示文件：http: [//blogs.mathworks.com/loren/2007/01/10/colormap-manipulations/](http://blogs.mathworks.com/loren/2007/01/10/colormap-manipulations/)

显然文件`clown`和`cameraman`是内置的，您可以使用`load clown`或加载它们`load cameraman`。

然而，这取决于安装的工具箱：小丑来自小波工具箱，摄影师来自图像处理工具箱。当然，它们都可以在 matlab 路径上找到，因此您可以随时查看。您还可以在那里找到文件：秋天，板，独木舟，细胞，circbw，电路，...

编辑：也： http: [//www.mathworks.com/matlabcentral/answers/1376-finding-example-images-in-the-distribution](http://www.mathworks.com/matlabcentral/answers/1376-finding-example-images-in-the-distribution)

但是对于视频，我个人在matlab中没有看到类似的东西

EDIT2：我更正了：在视觉工具箱中，有一些示例视频，在工具箱的 visiondemos 子目录中。只需在 matlab 安装目录中搜索 avi 文件即可

# java - 无法在 AWS EC2 上安装的 Tomcat 6 下读取/写入文件

> ID：10812710
> 
> 赞同：3
> 
> 时间：2012-05-30T08:34:04.897
> 
> 标签：java, tomcat, amazon-ec2, amazon-web-services, read-write

我有一个在 Tomcat 6 上运行的 webapp，一个类检查目录是否存在，如果不存在则创建它 -

```
// make sure path exists
File f = new File(value);
if (!f.exists()) {
    if (!f.mkdirs()) {
        throw new RuntimeException("Failed creating directory " + value);
    }
} 
```

现在，在我的本地机器上运行时一切正常，但在 EC2 实例上执行时，我在 catalina.out 看到以下内容 -

```
2012-05-30 06:57:28 main ConfigService [INFO] Directory path not exists, creating /usr/share/tomcat6/webapps/ROOT/WEB-INF/data/temp/currency
2012-05-30 06:57:28 main DefaultListableBeanFactory [INFO] Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1b4c1d7: defining beans [fetchAppRankingJob,fetchCurrencyRatesJob,fetchReviewsJob,sendDailyReportJob,importSalesReportJob,fetchSalesReportJob,processSalesReportsJob,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.scheduling.support.ScheduledMethodRunnable#0,org.springframework.scheduling.support.ScheduledMethodRunnable#1,org.springframework.scheduling.support.ScheduledMethodRunnable#2,org.springframework.scheduling.support.ScheduledMethodRunnable#3,org.springframework.scheduling.support.ScheduledMethodRunnable#4,org.springframework.scheduling.config.ScheduledTaskRegistrar#0,appsales-scheduler,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
2012-05-30 06:57:28 main ContextLoader [ERROR] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fetchCurrencyRatesJob' defined in file [/var/lib/tomcat6/webapps/ROOT/WEB-INF/classes/com/appround/collect/currency/FetchCurrencyRatesJob.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.appround.collect.currency.FetchCurrencyRatesJob]: Constructor threw exception; nested exception is java.lang.RuntimeException: Failed creating directory /usr/share/tomcat6/webapps/ROOT/WEB-INF/data/temp/currency
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.appround.collect.currency.FetchCurrencyRatesJob]: Constructor threw exception; nested exception is java.lang.RuntimeException: Failed creating directory /usr/share/tomcat6/webapps/ROOT/WEB-INF/data/temp/currency
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
        ... 37 more
Caused by: java.lang.RuntimeException: Failed creating directory /usr/share/tomcat6/webapps/ROOT/WEB-INF/data/temp/currency
        at com.appround.collect.ConfigService.getPathProperty(ConfigService.java:109)
        at com.appround.collect.currency.FetchCurrencyRatesJob.<init>(FetchCurrencyRatesJob.java:18)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
        ... 39 more 
```

我更喜欢写入 /home/ec2-user/collect/data，尝试写入我的 webapp 目录，因为它应该具有写入 WEB-INF 文件夹的权限。

我已经尝试在 /usr/share/tomcat6/conf/catalina.policy 授予文件权限写入/读取该文件夹 -

```
grant {
    permission java.io.FilePermission "/home/ec2-user/collect/data", "read, write";
    permission java.io.FilePermission "/home/ec2-user/collect/data/*", "read, write";
} 
```

尽管如此，还是没有运气。

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:30:09.637

我假设您使用的是 Amazon Linux，因为您提到了`ec2-user`.

`/usr/share/tomcat6/webapps/`在您尝试创建新文件夹的父文件夹上设置了哪些权限？通常运行 Tomcat 的用户（也应该称为`tomcat`）没有写入权限，除非您使用`chmod u+w`.

此外，除非您授予用户对该目录的权限，否则`tomcat`不允许用户写入其他用户的主目录（在您的情况下）。`/home/ec2-user/`您的示例在那里有点令人困惑，因为您提到尝试写入`webapps`文件夹但`ec2-user`在策略文件中指定 ' 的主目录。

一般来说，如果你想创建临时数据文件，我建议使用[`File.createTempFile(..)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)来创建它们，它们会自动放在标准的临时文件夹中。如果您想自己为数据文件创建一个专用文件夹，`/var/tmp/`可能更适合，因为它是临时文件的标准 unix 位置（`/tmp/`可能会在重新启动时被清除，因此请不要将任何持久文件放在那里）。

# wordpress - 我在哪里添加一个文件来保存我的 wordpress 网站的自定义配置变量

> ID：10812716
> 
> 赞同：1
> 
> 时间：2012-05-30T08:34:20.863
> 
> 标签：wordpress

我在哪里添加一个文件来保存我的 wordpress 网站的自定义配置变量？

例如

```
$config['forbidden_users'] = array("admin", "host"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:39:37.233

您可以将其保存在functions.php 中。或者您可以在 wp-configs.php 中添加它。但正确的解决方法是将它添加到funcitons.php 中。你有两种方法。首先，您可以创建全局变量。其次，您可以创建将返回 array("admin","host"); 的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:36:02.757

你可以在functions.php中创建一个全局

# ruby-on-rails - Resque 工作人员在没有日志或调试信息的情况下静默失败

> ID：10812718
> 
> 赞同：3
> 
> 时间：2012-05-30T08:34:25.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redis, resque

我有一段代码运行一些方法，我将该方法放在 self.perform 中，如下所示

```
class StartWorker
@queue = :worker

 def self.perform
 puts "hello"
  Parser.find_all_by_class_name("Parser").first.sites.each do |s|
   site = Site.find(s.id)
   parser = Parser.new(site)
   parser.run
     end
     end
     end 
```

如果我评论 def self.perform 并结束并运行该文件，它会正确显示所需的结果，但是当我尝试通过取消注释将其作为后台任务时，它会默默地失败到 resque 面板中，什么也没有显示。并且在命令提示符下也没有输出

我在 resque_schedule.yml 中的 resque-scheduler 中排队

```
start_worker:
cron: "55 6 * * *"
class: StartWorker
queue: worker
args:
description: "This job starts all the worker jobs" 
```

我尝试在 def self.perform 方法中放置一些简单的 puts 语句来检查控件是否在方法内部传递，但似乎控件甚至没有在 self.perform 方法内部传递

我也尝试加载 rails 环境并在其中需要 resque 但没有用我在进行任何更改之前为上述所有内容运行了 bundle exec rake resque:work QUEUE='*' 脚本

我在 Rails 控制台中尝试了 Resque.info，它显示如下，

```
 {:working=>0, :queues=>1, :failed=>1, :environment=>"development", :servers=>["redis://localhost:6379/0"], :pending=>0, :processed=>1, :workers=>1} 
```

任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:59:24.667

1.  您是否检查过 resque-web 面板以查看失败的工作是什么？
2.  确保在进行任何更改后重新启动工作人员。
3.  如果您在任何地方的日志中都没有看到“hello”（特别是 log/worker.log 或您的日志记录到的任何地方），那么该功能根本没有发生。
4.  `bundle exec rake resque:work QUEUE='*'`应该是`bundle exec rake resque:work QUEUE=*` ，以防您确实引用了通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T14:32:24.290

为我工作：

```
Resque::Scheduler.configure do |c|
  c.verbose = Rails.env.development? # or just true
end 
```

Ruby: `3.0.3`, Resque: `2.2.0`, Resque-Scheduler `4.5.0`, Rails:`6.1.4.4`

# android - 定时器（报警器）在 12AM - 12:59AM (00:00 - 00:59) 立即开始

> ID：10812720
> 
> 赞同：0
> 
> 时间：2012-05-30T08:34:33.963
> 
> 标签：android, calendar, alarmmanager, timepicker

我的应用程序旨在在特定时间启动服务。

我使用**timePicker**来接收时间

```
 time.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {

        public void onTimeChanged(TimePicker view, int hourOfDay, int min) {
            hour = hourOfDay;
            minute = min;
        }
    }); 
```

您可以按一个按钮来激活**警报管理器**。Intent 应该在这个时候开始。

```
public void onClick(View v) {
            cal = Calendar.getInstance();
            int _hour = hour;
            int tmpHour = cal.get(Calendar.HOUR_OF_DAY);
            int tmpMinute = cal.get(Calendar.MINUTE);
            // Alarm is today?
            if (hour > tmpHour || (tmpHour == hour && tmpMinute < minute)){

                tmpHour *= 60;
                _hour *= 60;
            }
            **// Add 24Hours to get difference.
            else {

                tmpHour *= 60;
                _hour *= (_hour + 24) * 60;
            }**
            int minutesToAdd = (_hour + minute) - (tmpHour + tmpMinute);
            Log.d("AlarmExample", "Need to add " + minutesToAdd + " minutes");
            cal.add(Calendar.MINUTE, minutesToAdd);

            cal.set(Calendar.SECOND, 0);
            cal.set(Calendar.MILLISECOND, 0); 
```

...

```
//alarmmanager

            AlarmManager amanag = (AlarmManager) getSystemService(ALARM_SERVICE);
            amanag .set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

我在这里有一个问题：当您在上午 12:00 和上午 12:59 之间选择时间时， **_hour *= (_hour + 24) * 60;** 使警报在您触摸按钮时立即启动。

我试图将其更改为 _hour = (_hour + 24) * 60;* 但它没有用。

你知道如何使它可靠吗？

真诚的，沃尔芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:50:19.627

```
AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);     

    Intent intent = new Intent(this, OnAlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 1, intent, 0);               
    Calendar timeOff = Calendar.getInstance();  
//time 12.19AM
    timeOff.set(Calendar.HOUR_OF_DAY, 0);
    timeOff.set(Calendar.MINUTE, 19);
    timeOff.set(Calendar.SECOND, 0);      

 alarmMgr.set(AlarmManager.RTC, timeOff.getTimeInMillis(), pendingIntent); 
```

我使用了实现 Broadcast reciver 的 onAlermReciver 将其设置为 intent ，然后警报关闭了对 OnAlermReciver 的调用，它对我有用，
你可以使用

```
 alarmMgr.set(AlarmManager.RTC, timeOff.getTimeInMillis(), sender); 
```

# c# - 如何通过 WMI 获取系统上的所有智能卡读卡器？

> ID：10812729
> 
> 赞同：2
> 
> 时间：2012-05-30T08:35:11.170
> 
> 标签：c#, .net, wmi, smartcard, pcsc

我想使用 WMI 获取系统上所有 PCSC 智能卡读卡器的 DeviceID 和服务。它们都通过 USB 连接，所以我在 WMI 注册表中查询所有`Win32_PnPEntity`s。但我不知道如何确定哪些设备是“读卡器”。这是我已经拥有的：

```
ManagementObjectSearcher mos =
new ManagementObjectSearcher(@"\root\cimv2", @"Select * From Win32_PnPEntity");

ManagementObjectCollection mob = mos.Get();

foreach (ManagementObject mo in mob)
{
    Console.WriteLine("DeviceID: " + mo["DeviceID"].ToString());
    Console.WriteLine("Service: " + mo["Service"].ToString());
} 
```

我不能只过滤设备名称，阅读器的品牌/型号不同，没有共同点。在设备管理器中，它们都归类在“智能卡读卡器”下，因此必须有（其他）方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T12:42:02.570

[我在MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553426%28v=vs.85%29.aspx)上找到了设备类 GUID ： **{50dd5230-ba8a-11d1-bf5d-0000f805f530}**

> ```
> Smart Card Readers
> Class = SmartCardReader
> ClassGuid = {50dd5230-ba8a-11d1-bf5d-0000f805f530}
> This class includes smart card readers. 
> ```

所以最后我想出了这个：

```
ManagementObjectSearcher mos = new ManagementObjectSearcher(@"\root\cimv2",
@"SELECT * FROM Win32_PnPEntity WHERE ClassGuid = '{50DD5230-BA8A-11D1-BF5D-0000F805F530}'"); 
```

这似乎给了我我想要的东西:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:25:01.553

我这里没有任何智能卡读卡器，所以这是理论上的：

*   `__CLASS`返回实例的实际类型（属性）是什么。如果是子类型，也许寻找该类型的更多实例会有所帮助）。

*   智能卡设备存在哪些关联：

    ```
    associators of {__RELPATH} 
    ```

    其中 __RELPATH 是`Win32_PnPEntity`实例中相同的命名属性。还包括关联者的关联者。

    请注意，大多数关联的实例将代表诸如 USB 主机/集线器设备之类的东西，但其他可能是设备的其他方面（例如 HDD 将具有`Win32_PhysicalDisk`除 a 之外的实例`Win32_PnPEntity`）。

此外，为了加快探索 WMI 类型和对象，我建议使用控制台或 GUI 工具之一，这将比编写 C# 代码容易得多。例如。在 PowerShell 中：

```
gwmi -query "select * from Win32_PnpEntity" | ft -autosize __RELPATH, DeviceID 
```

比 C# 代码更容易使用（但是它需要一个非常宽的控制台窗口:-)）。

# android - 如何使用 TabLayout 在每个选项卡下添加单独的布局

> ID：10812731
> 
> 赞同：0
> 
> 时间：2012-05-30T08:35:14.320
> 
> 标签：android, gwt-tablayoutpanel

我已经按照本教程（[http://developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)）完成了任务，一切正常。

但是现在我不确定如何在每个选项卡下添加不同的布局？应该将布局添加到 main.xml 并以某种方式从我为每个选项卡创建的 calasses 中调用布局？

如果有人能就此提出建议，我将不胜感激。

例如，我想在其中一个选项卡下添加表格布局，我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:50:18.470

看这个例子很有[用 TabLayout的例子](http://www.mkyong.com/android/android-tablayout-example/)

修改了这个类`Androidactivity.java`

```
public class AndroidActivity extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.androidtab); 
```

将此`xml`文件添加到`Res/layout/androidtab.xml`

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"    
android:layout_width="fill_parent"
android:layout_height="fill_parent"       
android:gravity="top"       
android:stretchColumns="1">
<LinearLayout
    android:id="@+id/top_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/text"
        android:textStyle="bold"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textSize="20dp"
        android:text="Create Photo" />
</LinearLayout>    
 <TextView            
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="4"
        android:text="CREATE NEW RECORD"            
        android:layout_marginLeft="25dp"
        android:layout_marginTop="20dp"
        android:layout_marginRight="75dp"   
        android:textStyle="bold"
        android:padding="10dp"/>
<TableLayout  
      android:id="@+id/tableLayout1"    
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"       
      android:gravity="top"       
      android:stretchColumns="1">       
  <TableRow
       android:id="@+id/row2"
       android:layout_marginTop="45dp"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:hint="input field1"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="75dp"   
        android:padding="10dp"/>
</TableRow>
<TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:hint="input field2"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="75dp"   
        android:padding="10dp"/>
</TableRow>             
  <TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:hint="input field3"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="75dp"   
        android:padding="10dp"/>
</TableRow>    
  <TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:hint="input field4"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="75dp"   
        android:padding="10dp"/>
</TableRow>
  <RelativeLayout
      android:id="@+id/linearlayout"
      android:layout_width="wrap_content"
      android:layout_height="match_parent"
      android:orientation="horizontal" 
      android:gravity="bottom" >
       <Button
        android:id="@+id/takephoto"
        android:layout_width="110dp"
        android:layout_height="35dp"
        android:text="takephoto"                   
        android:textStyle="bold"
        android:layout_marginLeft="102dp"    />
  </RelativeLayout> 
```

# macos - Mac osx 终端合并文件夹（rsync？）

> ID：10812732
> 
> 赞同：1
> 
> 时间：2012-05-30T08:35:16.847
> 
> 标签：macos, air, terminal

我有 2 个要合并的文件夹，根目录是 AIR3SDK，其中包含 frameworks、lib、bin 等子文件夹。我要合并到其中的文件夹名为 AIR SDK，其中还包括一些同名的子文件夹根文件夹，有些是新的。

我想用新文件覆盖根文件夹中所有不同的文件（不是覆盖整个文件夹，而是检查哪些文件不同）。如果它是仅存在于 AIR SDK 中的新文件，那么我希望将其复制到正确的文件夹中。

我试过 rsync -r "AIR SDK" "AIR3SDK" 但它只将 AIR SDK 文件夹复制到 AIR3SDK 文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:47:06.053

如果我正确理解您的意图，您可以使用

```
cp -Rp "AIR SDK/" AIR3SDK 
```

它将 AIR SDK 的内容复制到 AIR3SDK 中，将两个目录结构中存在的任何文件替换为 AIR SDK 中的版本。该命令的文档在`cp`这里： http: [//linux.about.com/od/commands/l/blcmdl1_cp.htm](http://linux.about.com/od/commands/l/blcmdl1_cp.htm)

如果复制成功，您可以删除 AIR SDK

```
rm -rf "AIR SDK/" 
```

此处的文档：http: [//linux.about.com/od/commands/l/blcmdl1_rm.htm](http://linux.about.com/od/commands/l/blcmdl1_rm.htm)

# node.js - 设计实时 Web 应用程序（Node.js 和 socket.io）

> ID：10812742
> 
> 赞同：2
> 
> 时间：2012-05-30T08:35:40.740
> 
> 标签：node.js, webserver, push, socket.io, reverse-proxy

我想问一些好的做法。我有一个 Node.js (Express) Web 服务器和 socket.io 推送服务器（以防技术问题）。我可以将它们都变成一个应用程序，但我希望它们分开（如果需要，它们可以相互通信）。这样做有两个原因：

1.  将更容易管理、调试和开发应用程序；
2.  扩展应用程序会容易得多。如有必要，我可以添加另一个推送服务器或 Web 服务器实例；

这至少是我所相信的。唯一的问题是，当客户端连接到单独的 socket.io 服务器时，它不会发送 cookie（不同的端口，跨域策略）。

我想出的解决方法是在前面放置一个反向代理（也是用 Node.js 编写的）并检查我们正在处理的请求类型并将其发送到 Web 服务器或相应地推送服务器。太好了，现在我们在 Web 服务器和推送服务器中都有 cookie。反向代理可以是负载均衡器，这是一个额外的好处。

这对我来说是个好主意。你觉得这个设计怎么样？也许还有其他解决 cookie 问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:01:24.680

我最近做了一些类似的事情，我们最初使用了 node.js 反向代理，但遇到了可靠性/可扩展性问题。我们发现提供静态文件和代理请求最好留给 nginx。haproxy 也是一个非常可行的独立代理解决方案。

[HaProxy](http://haproxy.1wt.eu/)
[Nginix 作为反向代理](http://tumblr.intranation.com/post/766288369/using-nginx-reverse-proxy)

# magento - 在 Magento 中，如何在更新 sales_flat_order 后重新填充 sales_flat_order_grid？

> ID：10812748
> 
> 赞同：1
> 
> 时间：2012-05-30T08:35:52.197
> 
> 标签：magento

我们已经为 Magento 1.4 商店设置了一个清理旧订单的 cron 作业。诸如付款失败、财务申请不完整之类的东西经过检查并且超过 x 天，我们会更改状态。

cron 作业基本上运行一个 SQL 查询，该查询直接编辑数据库中的 sales_flat_order 表并根据我们的条件更改状态/状态。

我的问题是，因为我们通过后门进行了这些更改，所以这些更改不会反映在 sales_flat_order_grid 表中，因此在您进入订单并保存其中的一部分之前，管理员中的订单网格视图不会反映出来。

有什么方法可以强制 sales_flat_order_grid 根据 sales_flat_order 表的内容刷新/重建？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:11:03.680

最近只需要这样做，这里有几行应该可以完成这项工作：

```
 //update status sales_flat_order_grid
    $vals = array();
    $vals['status'] = $status;
    $where = $write->quoteInto('entity_id =?', $order_id);
    $write->update("sales_flat_order_grid", $vals ,$where); 
```

# netbeans - 左下角的 NetBeans IDE 7.1 恢复功能/方法窗格

> ID：10812753
> 
> 赞同：1
> 
> 时间：2012-05-30T08:36:05.420
> 
> 标签：netbeans, ide, netbeans-7, netbeans-7.1

在我的一生中，我在 NetBeans IDE 的左下角找不到恢复功能/方法窗格的菜单选项。我使用的是 7.1 版。

我显然已经在某一时刻意外关闭了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:26:01.837

在这里，启用 Netbeans 7.1 中的导航器：

![干得好 ：](../Images/379bee1f92a124ca676d8cb907eaac36.png)

# javascript - 如何使用 javascript 访问和修改 HTML 页面中的图像？

> ID：10812755
> 
> 赞同：0
> 
> 时间：2012-05-30T08:36:15.750
> 
> 标签：javascript, html

我的 HTML 页面有一个 id 为 img 的图像。这个想法是，通过单击第一个、上一个或下一个，用户可以浏览一组图像。如何使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:38:47.217

使用 jQuery！

```
var myImg = $("#myimg");
$("#next").click(function(){
    var id = myImg.attr("data-id") + 1;
    myImg.attr("src", "image"+id+".jpg");
});
$("#prev").click(function(){
    var id = myImg.attr("data-id") -1;
    myImg.attr("src", "image"+id+".jpg");
}); 
```

HTML：

```
<img id="myimg" src="image1.jpg" data-id="1">
<a href="#" id="next">Next</a><br>
<a href="#" id="prev">Previous</a><br> 
```

这是一个非常愚蠢的例子。那里有许多幻灯片插件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:53:54.503

不需要 jQuery：

```
<script type='text/javascript'>
  window.onload = function() {
    var imageSrcs= ['1.jpeg', '2.jpg', '3.jpg'];
    var index = 0;
    var image = document.getElementById('img');

    var previous = document.getElementById('previous');
        previous.onclick = function() {
            index -= 1;
            if(index < 0) index = imageSrcs.length - 1;
            image.src = imageSrcs[index];
        }

    var next = document.getElementById('next');
        next.onclick = function() {
            index += 1;
            if(index == imageSrcs.length) index = 0;
            image.src = imageSrcs[index]; 
        }

 }
</script> 
```

和html：

```
<img src='1.jpeg' id='img'>
<div>
    <span id='previous'>Previous</span>
    <span id='next'>Next</span>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:48:08.753

这对你来说应该是一个好的开始：

```
<script>
  var imgs = ["img1.png","img2.png","img3.png"]; // copy images to the same dir
  var index = 0;
</script>
<img src="img1.png" onclick="this.src=imgs[++index%imgs.length]"/> 
```

单击图像以滑动。

如果您需要按钮，请参阅此示例：

```
 <img id="clicker" src="img1.png"/>
  <a href="#" onclick="prev(); return false;">Prev</a>
  <a href="#" onclick="next(); return false;">Next</a>
  <a href="#" onclick="first(); return false;">First</a>
  <a href="#" onclick="last(); return false;">Last</a>
<script>
  var imgs = ["img1.png","img2.png","img3.png"];
  var index = 0;
  var clicker = document.getElementById("clicker");
  function prev() { clicker.src = imgs[--index%imgs.length]; }
  function next() { clicker.src = imgs[++index%imgs.length]; }
  function first() { clicker.src = imgs[index=0]; }
  function last() { clicker.src = imgs[index=imgs.length-1]; }
</script> 
```

这`return false`意味着默认点击操作（点击链接）被抑制。Javascript 可以访问元素，即使用`id`（参见`clicker`此处）。一旦您对此感到满意并开始解决浏览器兼容性问题，最好继续使用 jQuery（正如其他人所建议的那样）、MooTools 或其他框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T09:20:35.250

尝试这样的事情（未经测试）：

加载查询：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"  type="text/javascript"></script> 
```

JAVASCRIPT：

```
<script type='text/javascript'>
  var lst_src = ['img1.jpg', 'img2.png', 'img3.gif'];
  $('a', '#nav').click(function(e) {
    e.preventDefault();
    var src_current = $('#img').attr('src');
    var index = lst_src.indexOf(src_current);
    var len = lst_src.length;
    var action = $(this).attr('class');
    switch ($action) {
      case 'previous' : var i = index - 1;
                        if (i < 0) src_current = lst_src[len + i];
                        else src_current = lst_src[i];
                        break;
      case 'next'     : var i = index + 1;
                        if (i > len) src_current = lst_src[i - len];
                        else src_current = lst_src[i];
                        break;
      case 'first'    : src_current = lst_src[0];
                        break;
      case 'last'     : src_current = lst_src[len - 1];
                        break;
     }
     $('#img').attr('src', src_current);
  });
</script> 
```

HTML：使用链接的类来表示所需的操作：

```
<img id='img' src='img1.jpg'>

<p id='nav'>
  <a href='' class='first'>&larr;&larr;First</a>
  <a href='' class='previous'>&larr;Previous</a>
  <a href='' class='next'>Next&rarr;</a>
  <a href='' class='last'>Last&rarr;$rarr;</a>
</p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:46:10.470

您不需要**为此**使用库。像这样的东西会改变图像的网址，其中“theImg”是`id`图像的：

```
document.getElementById("theImg").src = "newUrl.png"; 
```

要在没有显式`id`s 的情况下执行此操作，这将更改`i`图像索引所在的 url：

```
document.getElementsByTagName("img")[i].src = "newUrl.png"; 
```

# cucumber - 是否可以将一个功能重用为另一个功能的“给定”？

> ID：10812758
> 
> 赞同：12
> 
> 时间：2012-05-30T08:36:25.703
> 
> 标签：cucumber, gherkin

是否可以将一个功能重用为另一个功能的“给定”？

还是我在尝试做一些我不应该尝试做的事情

基本上我的功能看起来像：

```
Scenario: Creating a basic account with valid details (happy path)
  Given I am on the "signup" page
  And I enter all the right details #this is shortened of about 20 steps for your reading ease
  When I press the button labelled "Sign up"
  Then I should see the text "Thanks for signing up"
  And I should have an email from "confirmation@mysite.com" titled "Confirm your account Michael"
  And the database should contain a record for the user marked as unconfirmed

Scenario: Confirming account via email
  Given I have created a basic account
  When I open the confirmation email and visit the url to confirm the account
  Then I should be logged in
  And the database should contain a record for the user makred as confirmed 
```

我在每个功能之后清除我的数据库，因为它们都应该能够单独运行......

我会以错误的方式解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T08:59:04.727

### 问题

您实际尝试的是重用场景。[Cucumber不再支持](http://blog.josephwilk.net/ruby/cucumber-waves-goodbye-to-givenscenario.html)此功能。

除了这种方法的其他问题之外，您的测试将更慢且相互依赖，因为您将：

1.  通过浏览器推动帐户创建，以及
2.  使您的所有测试都依赖于帐户创建测试的通过。

不要那样做。

### 黄瓜之道

通常，您应该编写测试以独立工作，尽管您当然可以重用步骤定义。因此，在一般情况下，您可能希望添加共享步骤，例如：

1.  鉴于用户帐户“测试用户”不存在
2.  鉴于用户帐户“测试用户”存在

然后可以根据需要将其包含在您的场景中。这种方法的好处是这些步骤可以以编程方式创建或删除用户。

或者，如果您的*大部分*测试将在现有帐户上进行，请设置默认数据集，并使用正确的用户固定装置。对于您将测试帐户创建的有限子集，只需添加一个驱动用户删除的[场景背景](https://github.com/cucumber/cucumber/wiki/Background)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-25T04:57:22.290

如果您使用的是 Javascript，我创建了一个名为[reuse-cucumber-scenarios](https://www.npmjs.com/package/reuse-cucumber-scenarios)的包，用于调用场景：

```
Given the scenario "@scenario_tag" 
```

.

```
Given the scenario "@scenario_tag" with parameters
"""
{
  "1": ["step1_param1", "step1_param2"],
  "2": ["step2_param1", "step2_param2", "step2_param3"],
  "3": ["step3_param1", "step3_param2", "step3_param3"],
}
""" 
```

或创建小黄瓜变量...

```
Given the variable "$variable_name" is equal to
"""
#JSON object
""" 
```

或创建场景函数并通过执行来调用它们......

```
Given the scenario "@$scenario_function_tag" where variable "$variable_name" is "value_to_replace" 
```

和更多...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T16:22:02.937

目前，您可以使用以下方法：

```
Background:
  Given Some common setup
  And Some more setup

Scenario: one
  When setup1
  Then something1

Scenario: two 
  When setup2
  Then something2 
```

# c# - 如果我需要 32 位和 64 位，如何添加对类库的引用

> ID：10812762
> 
> 赞同：4
> 
> 时间：2012-05-30T08:36:38.337
> 
> 标签：c#, visual-studio-2010

在我的项目中，我使用了两种配置——32 位和 64 位（因为我在 32 位机器上开发，但部署到 64 位机器上）。

我的项目包含位于“C:...\Commons\bin\Debug\Commons.dll”的类库。我已将此 dll 添加到引用中，但是当我切换到 64 位时，这当然不起作用。

所以我需要添加“特定于平台的引用”的机制。

我知道我可以手动编辑 .csproj 文件来添加类似的内容：

```
<Reference Include="Commons" Condition="$(Platform) == 'x64'">
  <HintPath>..\Commons\bin\x64\Release\Commons.dll</HintPath>
</Reference>
<Reference Include="Commons" Condition="$(Platform) == 'x86'">
  <HintPath>..\Commons\bin\x86\Release\Commons.dll</HintPath>
</Reference> 
```

我应该为类库做同样的事情吗？

我只是想知道即使对于类库，VS 也不支持“平台相关引用”机制？

**upd**看来我实际上需要以某种方式链接 4 种类型的 dll - x86/Debug、x86/Release、x64/Debug、x64/Release

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:54:30.257

事实上你不应该。您必须将代码编译为 MSIL，并添加对 MSIL 版本的 dll 的引用。您的代码和引用的代码将在运行时由运行时编译。如果它在 x86 计算机上工作，那么它将被编译为 x86，而在 x64 计算机上，它将被编译为 x64。您无需担心。

如果您认为 JIT 很慢并且需要性能，您可以在目标计算机上 NGen 您的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T07:16:56.330

以下问题可以解决您的问题。希望这可以帮助。
[在 Visual Studio 中构建时有条件地使用 32/64 位引用](https://stackoverflow.com/questions/3832552/conditionally-use-32-64-bit-reference-when-building-in-visual-studio)

# c++ - 是否有任何 ATL 支持的宏来检查 hresults 并返回值？

> ID：10812763
> 
> 赞同：3
> 
> 时间：2012-05-30T08:36:38.970
> 
> 标签：c++, visual-c++, com, error-handling, atl

我正在寻找与以下宏等效的东西：

```
#define FAILED_CHECK(hr) if(FAILED(hr)) return hr; 
```

ATL 库中是否有如上所示的任何实现？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:16:44.997

无论出于何种原因，ATL 都没有提供像请求的那样非常有用的宏。从几个版本的 Visual Studio 开始，ATL 引入了类似的宏：

```
/* Naming is slightly off in these macros
ATLENSURE_RETURN(condition) is an HRESULT return of E_FAIL
ATLENSURE_RETURN_VAL(condition, hr) is any return value (function can pick)
ATLENSURE_RETURN_HR(condition, hr) is HRESULT-specific, though currently the same as _VAL
*/ 
```

但再一次，没有立即匹配。你必须定义你自己的。或者，切换到在错误条件下抛出异常。ATL 为此提供了有用的宏：`ATLENSURE_THROW`和`ATLENSURE_SUCCEEDED`朋友。

特别是，您可以在失败时抛出异常`HRESULT`，`ATLENSURE_SUCCEEDED`然后捕获异常，尤其是。在从 COM 接口调用返回之前，将其转换回 HRESULT：

```
_ATLTRY {
  // ...
  ATLENSURE_SUCCEEDED(pFoo->Bar()); // Bar returns HRESULT 
  // ...
} _ATLCATCH(Exception) { // CAtlException class
  return Exception; // Back to HRESULT through CAtlException's operator
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:02:34.563

**[由于大多数 ATL 函数都使用标准HRESULT](http://msdn.microsoft.com/en-us/library/bb446131.aspx)**，因此没有特定于 ATL 的宏- 请参阅**[最常见的 HRESULT 值](http://msdn.microsoft.com/en-us/library/aa378137%28v=vs.85%29.aspx)**列表。

有一些[用于错误处理的宏](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691242%28v=vs.85%29.aspx)，包括[FAILED](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693474%28v=vs.85%29.aspx)和[SUCCEEDED](http://msdn.microsoft.com/en-ulibrary/windows/desktop/ms687197%28v=vs.85%29.aspx)，它们使用得最多：

```
#define FAILED(hr) (((HRESULT)(hr)) < 0)
#define SUCCEEDED(hr) (((HRESULT)(hr)) >= 0) 
```

因此，您通常使用这些，或者在特定情况下，您可能希望返回特定的 HRESULT，因此您最终将明确检查它是否等于您想要的值。在这种情况下，您很可能会以这样的方式结束：

```
HRESULT hr = ...
if (hr != S_OK)
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:57:00.390

这是[按字母顺序排序的 ATL 宏列表](http://msdn.microsoft.com/it-it/library/sks11ex0%28v=vs.90%29.aspx)，而此列表侧重于[调试和错误报告](http://msdn.microsoft.com/it-it/library/2hfwwtbs%28v=vs.90%29)：似乎没有您要求的内容。

# .net - 在 VS 2010 安装项目中重命名用户界面标题

> ID：10812767
> 
> 赞同：1
> 
> 时间：2012-05-30T08:37:05.490
> 
> 标签：.net, visual-studio-2010, setup-project

有谁知道是否可以更改 Visual Studio 2010 安装项目中的标题文本？我有一个自定义横幅位图，有时上述标题文本会覆盖横幅图像，所以我正在寻找一种方法来完全删除它或将其重命名为更短的名称。

![设置项目标题文本](../Images/13549bc51e1fe7f85d7575a9c71b6bac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:28:06.587

决定使用 wix 安装程序解决问题：

[http://wix.sourceforge.net/](http://wix.sourceforge.net/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T09:56:46.283

[http://www.codeproject.com/Articles/146626/Extending-Visual-Studio-Setup-Project](http://www.codeproject.com/Articles/146626/Extending-Visual-Studio-Setup-Project)

这将很有用

# c++ - 在 C++ 中声明但未定义的静态函数

> ID：10812769
> 
> 赞同：80
> 
> 时间：2012-05-30T08:37:07.573
> 
> 标签：c++, static-methods

我在使用 C++ 的以下代码中遇到错误。

**主文件**

```
#include "file.h"

int main()
{
   int k = GetInteger();
   return 0;
} 
```

**文件.h**

```
static int GetInteger(); 
```

**文件.cpp**

```
#include "file.h"

static int GetInteger()
{
   return 1;
} 
```

我得到的错误：

```
Error C2129: static function 'int GetInteger(void)' declared but not defined. 
```

我读过著名的文章[“Organizing Code File in C and C++”](http://www.gamedev.net/page/resources/_/technical/general-programming/organizing-code-files-in-c-and-c-r1798)，但不明白这段代码有什么问题。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-05-30T08:41:40.620

在 C++ 中，`static`在全局/命名空间范围内意味着函数/变量仅在定义它的翻译单元中使用，而不在其他翻译单元中使用。

在这里，您尝试使用来自不同翻译单元 ( `Main.cpp`) 的静态函数，而不是定义它的翻译单元 ( `File.cpp`)。

删除`static`它应该可以正常工作。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-30T08:41:12.533

改变

```
static int GetInteger(); 
```

到

```
int GetInteger(); 
```

`static`在这种情况下，给出了方法**internal linkeage**，这意味着您只能在定义它的翻译单元中使用它。

您在 in 中定义它`File.cpp`并尝试在 in 中使用它`main.cpp`，但 main 没有它的定义，因为您声明了它`static`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T08:45:45.397

因为在这种情况下，`static`意味着函数的名称具有内部链接；在一个翻译单元中与在任何其他翻译单元`GetInteger`中无关。`GetInteger`关键字`static`被重载：在某些情况下，它会影响生命周期，而在其他情况下，会影响绑定。这里特别令人困惑，因为“静态”也是一生的名字。在命名空间范围内声明的函数和数据始终具有静态生命周期；当`static`出现在他们的声明中时，它会导致内部绑定，而不是外部绑定。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T08:42:25.857

声明为静态的函数是包含文件的本地函数。因此，您必须在与调用它的人相同的文件中定义该函数。如果你想让它可以从其他文件调用，你不能将它声明为静态的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-30T08:45:33.593

如果一切都在同一个翻译单元中，它应该可以工作。您可能没有将 File.cpp 编译到与 Main.cpp 相同的单元中。

```
g++ -Wall File.cpp Main.cpp 
```

如果每个文件都是单独编译的，则必须使该函数`extern`从不同的翻译单元中使用。

```
extern int GetInteger(); 
```

这与

```
int GetInteger(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-30T08:47:58.500

据我了解，静态函数的名称与定义它们的文件名相混淆，因此当您在 main.cpp 中包含 file.h 时，尽管您在 file.cpp 中定义了 GetInteger() 但 GetInteger() 会与 main.cpp 混淆因为它是静态的，所以它也会被破坏，并且链接器找不到 GetInteger() 的定义，因为不存在同名的函数。

我相信吸取的教训是不要在头文件中声明静态函数，因为它们不打算成为接口的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-13T01:04:17.463

**考虑使用命名空间...**

对于不需要内部成员变量的代码的逻辑部分。这意味着，您的`GetInteger()`函数不需要引用内部常量变量。为了使您的函数在代码中井井有条，请考虑使用命名空间。这样可以防止函数名称发生冲突（这将节省您因可能出现的`LNK`错误而头疼的时间）。该代码仍然以您设置的方式工作，并且仍然在接受的答案范围内工作。此外，您的命名空间名称可以帮助您快速调试。

**主文件**

```
#include "file.h"

int main()
{
   int k = HELPERS::GetInteger();
   return 0;
} 
```

**文件.h**

```
namespace HELPERS
{
    int GetInteger();
} 
```

**文件.cpp**

```
#include "file.h"

int HELPERS::GetInteger()
{
   return 1;
} 
```

# java - 在java中执行时暂停当前线程

> ID：10812770
> 
> 赞同：0
> 
> 时间：2012-05-30T08:37:09.247
> 
> 标签：java, multithreading

我从执行一些预处理的 HTML 网页获取请求消息并将响应发送到 ui。

在 case 语句中，代码如下：

```
reqClientName= request.getParameter("clientname");
System.out.println(" agent"+clientName);
reqMessage = request.getParameter("message");
System.out.println(" message"+message);             
jaf.initiateRequest(clientName,message);
response.getWriter().println("Message Processed at Server (Echo Response)   is"+getResponseMessage()); 
```

这里`jaf.initiateRequest`需要一些时间来执行，甚至在执行完成之前`response.getWriter.println()`执行，这是空的。

有没有一种线程安全的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:50:23.657

尝试使用`CountDownLatch`, 从并发包。它的线程安全。这将使您有机会进行处理工作，一旦完成，就执行目标。

# ios - 我的 UIToolBars 与 UIScrollView 一起滚动？

> ID：10812771
> 
> 赞同：1
> 
> 时间：2012-05-30T08:37:11.397
> 
> 标签：ios, uiscrollview, uitoolbar

我有以下问题：我有一个包含`UIScrollView`添加了 IB 的视图。我还添加了一个`UIToolBar`并将其添加到我的视图中，但是当我滚动它时，工具栏也会移动。任何的想法 ？

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:41:08.137

那是因为您已添加`UIToolbar`为`UIScrollView`.

您应该只从IB 中拖动`UIToolbar`视图并编辑.`UIScrollView``UIScrollView`

# ruby-on-rails - 如何翻译 Rails 3.2 中的 ActiveRecord 属性名称？

> ID：10812774
> 
> 赞同：11
> 
> 时间：2012-05-30T08:37:19.757
> 
> 标签：ruby-on-rails, activerecord, internationalization

我的模型（ User ）中有以下验证：

```
 validates :first_name,:length => {:minimum => 2,:maximum => 50},:format => { :with => /[a-zA-Z]+/ } 
```

我的 yml 语言环境文件中有以下内容：

```
 attributes:
   first_name:
     too_short: "First name is too short"
     too_long: "First name is too long"
     invalid: "First name is not valid" 
```

现在，如果我启动 a `rails console`，并编写以下内容：

```
a = User.new
a.valid?
a.errors.full_messages 
```

我会看到以下错误：

```
["First name First name is too short", "First name First name is not valid"] 
```

如您所见，属性名称也附加在字段错误之前。到目前为止，我在代码中的任何地方都使用了`model.errors[:field]`，这将始终显示我在 yml 文件中的字符串，但我想将字符串更改为：

```
 attributes:
   first_name:
     too_short: " is too short"
     too_long: " is too long"
     invalid: " is not valid" 
```

并使用 full_messages 版本。问题是，我不知道如何翻译属性名称。比方说，我想而不是名字，首先有名字。我该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T08:53:46.487

你可以在这里找到答案[http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)

在你的 config/locale/(your_lang).yml

```
en: 
  activerecord:
    models:
      user: Dude
    attributes:
      user:
        first_name: "Name first" 
```

用您需要使用的语言符号更改“en:”

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-02T00:38:24.827

在 Rails 5 之后`attributes`，我必须使用下划线中的模型名称来命名空间。像这样：

```
pt-BR:
  activerecord:
    attributes:
      my_model_name_in_underscore: 
        attribute_name: 'String' 
```

来源：[https ://stackoverflow.com/a/5526812/1290457](https://stackoverflow.com/a/5526812/1290457)

# c# - 将文件从设备复制到本地文件夹

> ID：10812776
> 
> 赞同：-3
> 
> 时间：2012-05-30T08:37:23.920
> 
> 标签：c#, .net, filesystems

我`string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);` 用来将拖到我的应用程序中的文件并将它们复制到不同的位置

看来我的应用程序正在识别除源自设备（相机/智能手机等）的物品之外的任何掉落物品

我该如何解决这个问题并获取丢弃物品的路径以供以后使用

```
FileSystem.CopyDirectory 
```

这是我的代码的简短版本

```
private void Form1_DragDrop(object sender, DragEventArgs e)
        {
            string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);
            FileInfo fileInfo;
                foreach (string file in files)
                {
                   fileInfo=new FileInfo(file);
                   FileSystem.CopyDirectory(fileInfo.FullName, target, UIOption.AllDialogs);
                }
        } 
```

在调试时我可以看到“文件”为空。再次，这在所有其他窗口资源管理器拖放中都可以完美运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:25:36.377

假设您的设备是使用 ActiveSync 或类似设备的 Windows Mobile 6，则设备的文件出现在 shell 命名空间中，但它们不是文件系统的一部分。因此，它们无法使用正常的归档系统复制 API 进行复制。

可以通过使用以下方式获取 Shell Id 列表来访问拖动的项目：

```
e.Data.GetData("Shell IDList Array") as System.IO.MemoryStream 
```

这些可以使用[SHGetPathFromIDList](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762194%28v=vs.85%29.aspx)中的方法转换为普通文件路径的路径，我不确定这是否适用于设备路径。

最后，需要[CeReadFile](http://msdn.microsoft.com/en-us/library/aa917409.aspx)和相关函数从设备中读取文件以便复制它。

即使这一切都适用于 Windows Mobile 设备，也不能保证其他类型的设备也能以这种方式工作。恐怕这可能难以实施，我希望这些信息对您有所帮助。

# java - java中(--i + ++i)中表达式的输出

> ID：10812779
> 
> 赞同：3
> 
> 时间：2012-05-30T08:37:32.863
> 
> 标签：java, operator-precedence, associativity

```
int i=9;
System.out.println(--i + ++i); 
```

> 执行时输出：17
> i 的最终值为：9

但是根据java中的关联性和优先级规则，应该首先执行++i，即从右到左给出10，然后--i给出9..将两者相加，答案应该是19......至于我知道这样的代码在 C/C++ 中给出了未定义的行为，但在 java 中，规则是严格定义的，并且没有序列点的概念。那么，任何人都可以澄清这个问题，因为我真的对此感到困惑吗？同样在一些书中提到，后递增和后递减运算符是 LTR 关联的。但是在其他一些书中，它给出的所有增量和减量（post 和 pre）都是 RTL 关联的..!! 任何人都可以为 java 提供正确的运算符优先级和关联性表吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T08:39:36.687

您能指出*Java 语言规范*中的哪个地方说从右到左的关联性吗？它不是，它是**从左到右的**（除了多个分配 - 例如`x = y = 4`）。请参阅 JLS 第[15.7.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.1)节，标题为“首先评估左手操作数”。因此答案是正确的：

```
--i + ++i 
```

首先`--i`是评估。此递减`i`（现在为 8）并返回递减后的值 (8)。然后将`++i`其添加到相当于增量和获取的值（因此 RHS 评估为 9）。

它类似于

```
AtomicInteger i = new AtomicInteger(9);
i.decrementAndGet() + i.incrementAndGet(); 
```

您是否希望这也被评估 rl ？

*   [Java 运算符优先级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)
*   关于关联性和优先级的[好文章](http://www.particle.kth.se/~lindsey/JavaCourse/Book/Part1/Java/Chapter02/operators.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:40:17.517

表达式评估从左到右

```
(--i + ++i)

--i = 8 //i becames 8 here
++i = 9 // i becames 9 here again
8+9 = 17 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:39:24.130

首先 --i 变成 8 然后 ++i 变​​成 9.so answr 是 17。

```
int i =9;

--i =8, now i is 8
++i=9 ,++ makes 9

so finally (8+9)=17 and i=9. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-05T12:04:19.927

评估从左到右开始。Do `--i`which 变成 8，`++i`which 计算结果为 9，加法完成，得到 17。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:41:42.440

输出是正确的：

首先，先`--i`被执行，所以`i`变成`8`then`++i`被执行。现在，`i`我`8`变成`++`了`9`，然后中间`+`变成了`8 + 9 = 17`。

Java 执行从左到右的关联性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T08:45:44.627

(--i + ++i)

评估从左到右开始。

```
first    (
second --i   // 8
third    +   // addition operator
fourth ++i   // 9
fifth    )

8 + 9 = 17 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-13T04:07:25.923

`int i=9; System.out.println(--i + ++i);`

众所周知，递增和递减的优先级高于算术运算符'+'，因此首先评估'++'和'--'。现在一元运算符的关联性是从右到左的，因此根据此它应该首先评估'++'运算符。但是在求值之前，还有一个绑定的概念，所以，它会绑定表达式 as `((--i)+(++i))`和 now 根据 () 运算符，它的关联性是从左到右的，它会先求值`(--i)`，然后再`(8+ (++i))`求值`i=8`。现在它将评估 (++i) 然后`(8+9)`和`i=9`，所以最终答案将是`(8+9) = 17`。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-02-05T14:20:04.970

表达式评估从左到右

```
i=9;
First --i than i=9-1, i=8
After ++i than i=8+1, i=9
--i + ++i  = 17 
```

# c# - 您可以使用纯 html 创建 Spark 视图引擎绑定吗？

> ID：10812780
> 
> 赞同：0
> 
> 时间：2012-05-30T08:37:34.753
> 
> 标签：c#, asp.net-mvc, spark-view-engine

我真的很喜欢 spark 的绑定功能，它确实改进了标记，但我遇到了一个小问题。是否可以创建一个没有任何代码的火花绑定只是 html？例如：

```
 <element name="searchbox">
        <div class="searchbox">
            <input type="text"/>
            <img src="/content/images/cross.png" placeholder="${sharedres.searchplacheolder}"/>
        </div>
    </element> 
```

当我尝试渲染上面的元素时`searchbox`，出现页面渲染错误：

```
error CS1501: No overload for method 'Write' takes 0 arguments 
```

有没有办法做到这一点，还是只能在绑定中提供代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:34:49.883

你可以做到，整个绑定只需要表示一个字符串，就像这样将你的代码变成一个字符串并转义所有尖括号，它应该可以工作：

```
 "&lt;element name=\"searchbox\"&gt;&lt;div class=\"searchbox\"&gt;&lt;input type=\"text\"/&gt;&lt;img src=\"/content/images/cross.png\" placeholder=\"@placeholder\"/&gt;&lt;/div&gt;&lt;/element&gt;" 
```

话虽如此，您最好将这样的东西放在局部视图中。

# c# - 正则表达式：如何捕获“=”左侧的文本

> ID：10812783
> 
> 赞同：2
> 
> 时间：2012-05-30T08:37:40.070
> 
> 标签：c#, regex, devexpress

我试图从中捕获等号（没有等号）左侧的任何内容。

> `MSG_TYPE=X12S4F3S3\r\nASID=123456789012\r\n`

我用过`(\w*)=`，但这似乎`n`与`/n`

这是为了`.net`.

抱歉，忘记提及文本包含在 RTF 文档中，因此无法使用基本的子字符串函数，因为我正在尝试从 DocumentRanges 创建 CharacterProperties。

```
Regex regEx = new Regex (@"(\w*)=");
DocumentRange [] docRanges = m_rtfTranslation.Document.FindAll (regEx);

for (int nIndex = 0; nIndex < docRanges.Length; nIndex++)
{
    CharacterProperties cp = m_rtfTranslation.Document.BeginUpdateCharacters (docRanges [nIndex]);
    cp.ForeColor = Color.SlateBlue;
    m_rtfTranslation.Document.EndUpdateCharacters (cp);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T08:40:48.840

你真的需要一个正则表达式吗？一个简单的子字符串可以工作：

```
var lhs = msg.Substring(0, msg.IndexOf("=")) // MSG_TYPE 
```

如果需要匹配或捕获：

```
var lhs = Regex.Match(msg, @"(.*)=");
Console.WriteLine(lhs.Groups[1].Value); 
```

如果您需要一个正则表达式来替换左侧`=`：

```
var lhs = Regex.Replace(msg, @"(.*)=", "<green>$1</green>");
Console.WriteLine(lhs); 
```

产量：

```
<green>MSG_TYPE</green>X12S4F3S3\r\n<green>ASID</green>123456789012\r\n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:52:42.983

```
MessageBox.Show(Regex.Replace(
    @"MSG_TYPE=X12S4F3S3\r\nASID=123456789012\r\n",
    @"([^=]+)(=.*?\\r\\n)",
    @"[color]$1[/color]$2"
)); 
```

# android - Android：无法从通知启动活动

> ID：10812785
> 
> 赞同：1
> 
> 时间：2012-05-30T08:38:03.937
> 
> 标签：android, notifications

我有以下用于发送通知的代码...

```
private void publishNotification(Intent intent, String header, String content){
        try {
            NotificationManager manager = getNotificationManager();
            Notification notification = new Notification(R.drawable.droid, header, System.currentTimeMillis());

            if(intent != null){
                PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);
                notification.setLatestEventInfo(this, header, content, pendingIntent);
            }

            manager.notify(0, notification);

        } catch (Exception ex) {
            FileManager.writeToLogFile(this.getClass(), "publishNotification", LogMessageType.ERROR, ex.getMessage());
        }
    } 
```

以及调用它的以下代码......

```
Intent intent = new Intent();
                intent.setAction(DevicePolicyManager.ACTION_SET_NEW_PASSWORD);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                publishNotification(intent, "Default Password Changed", "Device configuration have changed.\nClick here to change this password."); 
```

我的问题如下...

通知出现在通知上，甚至在它被向下滑动之后。问题是当我点击这个通知时，活动没有启动。[我想我已经完成了教程](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)中提到的所有事情。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:41:32.927

如果你想启动一个活动，你应该使用`PendingIntent.getActivity()`而不是`PendingIntent.getService()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:48:33.980

```
Intent intent = new Intent(context, class_name.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

并且还使用`PendingIntent.getActivity()`而不是`PendingIntent.getService()`.

# database - Web数据库应用架构

> ID：10812786
> 
> 赞同：0
> 
> 时间：2012-05-30T08:38:04.420
> 
> 标签：database, asp.net-mvc-2, architecture

有一个中型数据库应用程序需要构建具有 Web 界面。平台为asp.net 3.5（asp.net mvc 2）、sql server和ext.net 1.3.0。该工具是visual studio 2010。

我想知道，当我有一个完整的工作草案/骨架时，我应该从数据库设计和业务逻辑开始，然后转到 UI 吗？还是我应该逐步构建数据库和 BL，并随着我的进展将它们绑定到 Web UI？

更具体地说，我是否应该将整个 BL 功能构建为一个单独的 dll 项目，然后让 Web 应用程序项目引用它？如果是这样，我有哪些沟通方式？网络服务，例如？

最后但同样重要的是，Web 应用程序需要安全机制（用户帐户等）。我应该从一开始就设计和集成它，还是可以在其他一切准备就绪时添加它？

（我希望我的问题足够清楚。据我所知，创建十几个或更多 aspx 页面作为构建和测试应用程序功能的一种手段会导致所有问题和死胡同，同时非常耗时。我所寻求的是一种将 UI 与其他所有内容分开的方法。例如有一个工作原型向客户展示案例，然后将（ext.net）Web UI 作为一个完全独立的步骤构建。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:43:24.857

您不打算使用 .NET 4.0 和 MVC 3 是否有特殊原因？MVC 3 带有 razor 视图引擎，它可以产生更好更清晰的视图。如果您使用 .NET 4.0，您可以使用实体框架。新的 Entity Framework 4.3 允许您首先使用代码进行迁移，这可能是您需要与客户合作“探索”需求的项目的好方法。首先使用代码，您可以使用 POCO 类构建模型，并让 EF 处理数据库模式。如果您对模型进行大量更改，这很有效，听起来您可能想要这样做。观看[此](http://channel9.msdn.com/Shows/Visual-Studio-Toolbox/Visual-Studio-Toolbox-Entity-Framework-Part-2)视频，了解有关迁移代码的良好介绍。

# css - 由于布局顺序，IE7 z-index 不起作用

> ID：10812789
> 
> 赞同：0
> 
> 时间：2012-05-30T08:38:18.853
> 
> 标签：css, z-index, internet-explorer-7

我有以下网站：[http ://dev.driz.co.uk/phase/about.php](http://dev.driz.co.uk/phase/about.php)

如果您在 IE7 中查看该网站，您会看到左上角的下拉菜单没有出现在主要内容区域的上方。这是因为愚蠢的 IE7 z-index 错误，但是使父元素具有高索引以使其修复子元素的正常修复在这种情况下不起作用，因为我需要父标题位于主要内容下方。 ..

关于如何根据我的布局结构解决此问题的任何想法？我已经尝试了网上的大多数 IE 修复，包括一个 jquery 解决方案，它在循环中重置 z-indexes，但没有一个解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:14:38.140

您需要为您的标题提供一个小于导航元素的 z-index。

IE7 对 z-index 来说很痛苦，你需要一个这样的结构。

标题 - z-index:2 内容 - z-index:3 导航 - z-index:4

按照这些思路，对不起，我无法提供更多帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T09:38:33.533

我发现当 IE 中的 z-index 出现问题时，将希望受 z-index 影响的元素设置为具有相对位置。

IE

```
#block {
    z-index: 1;
    position: relative;
} 
```

# c# - C# 使用数组替换

> ID：10812790
> 
> 赞同：0
> 
> 时间：2012-05-30T08:38:26.277
> 
> 标签：c#, replace

我有两个字符串数组，它们是：

```
string[] abecele = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "w", "x", "y", "z", ".", ",", "!", "?", "(", ")", "@", " " };
string[] keitiniai = { "714", "741", "147", "471", "417", "174", "789", "798", "897", "978", "879", "987", "123", "321", "132", "312", "213", "231", "852", "258", "825", "285", "582", "528", "951", "159", "915", "195", "519", "591", "753", "357", "000" }; 
```

然后我有一个名为 的字符串，它从;`tekstas`中获取一些 rondom 文本。`maskedTextBox: tekstas = maskedTextBox1.Text`

现在我需要将`abecele[]`IN THAT TEXT 数组中的字符更改为 keitiniai 数组值，就像我们在 tekstas 字符串中有这样的文本“abc”一样，它将变为`714741147`.

我使用这样的代码来实现：

```
for (i = 0; i < 32; i++)
{
    string raide = abecele[i];
    string keitinys = keitiniai[i];
    string pakeistas = tekstas.Replace(raide, keitinys);
} 
```

但是应该根据我的需要替换的新字符串 pakeistas 不会被替换。哪里有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:42:39.070

目前，您每次都丢弃“replacements made”字符串。您可能需要以下内容：

```
string pakeistas = tekstas;
for (i = 0; i < 32; i++)
{
    string raide = abecele[i];
    string keitinys = keitiniai[i];
    pakeistas = pakeistas.Replace(raide, keitinys);
}

// Use pakeistas for whatever. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T08:51:48.127

我会使用 a`Dictionary<Char, String>`代替：

```
IDictionary<char, string> lookup = new Dictionary<char, string> {
    {'a', "714"},
    {'b', "741"},
    {'c', "147"},
    //...
};
StringBuilder resultBuilder = new StringBuilder();
foreach(char c in tekstas) {
    string code;
    if(lookup.TryGetValue(c, out code))
        resultBuilder.Append(code);
}
string result = resultBuilder.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T08:42:52.147

您修改后的新字符串 pakeistas 会一遍又一遍地被覆盖，并且仅在 for 循环期间存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T08:53:16.057

而不是拥有这两个数组，您可以使用带有字母和值作为整数值的字典，然后您可以使用 StringBuilder 创建从`abc`到的字符串`714741147`

```
Dictionary<string, string> myDictionary = new Dictionary<string, string>();
myDictionary.Add("a", "714");
myDictionary.Add("b", "741");
myDictionary.Add("c", "147");
//and so on ...
string tekstas = "abc";
StringBuilder sb = new StringBuilder();
foreach(char c in tekstas)
       {
         string key = c.ToString();
         sb.Append(myDictionary[key]);
         }
var  pakeistas = sb.ToString(); 
```

# .net - 是否可以封装多个 .net 程序集以提供单个公共接口？

> ID：10812792
> 
> 赞同：2
> 
> 时间：2012-05-30T08:38:31.923
> 
> 标签：.net, encapsulation, .net-assembly, facade

我在 .NET 中创建了一个组件，旨在用于其他公司或开发团队的多个 .NET 解决方案。

我的组件由多个 DLL 组成。大致来说，它有：

*   可以进行大量操作的**核心**DLL，以及
*   一个**外观**DLL，它只提供这些操作的一小部分，以便可以为不同的客户或集成定制该组件。

问题是我不希望任何人能够访问**核心**方法，而只希望能够访问**外观**方法。这样，我将确保没有人试图通过直接调用**核心**方法而不是**外观**方法来作弊。

有可能实现吗？为了实现这种封装，是否有任何模式或良好实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:41:07.353

**制作核心**类型的访问修饰符`internal`并利用在您自己的程序集中[`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)共享实现。`internal`此属性将允许您的**外观**DLL 访问**核心**内部。

然而，这不会阻止有决心的人使用反射。它的作用是让访问变得不简单，这通常足以将大多数人引导到公开暴露的类型。

此外，在发布程序集时缺乏关于内部内容的文档会劝阻人们 - 再加上公共类型的非常好的文档。

谨慎的做法是始终查看人们如何尝试使用您的程序集。**核心**中可能存在人们非常喜欢的类型，因为它们很有用或有你没有考虑过的用途——准备通过**外观**暴露这些类型以满足消费者的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:42:04.190

您可以将所有核心*公共*方法/成员/等更改为*内部*，然后使用[InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)使所有内部项目对外观可见。

~~另一种方法是使用[StrongNameIdentityPermissionAttribute](http://www.morganskinner.com/Articles/StrongNameIdentityPermission/)，它将：~~

> ~~保证调用者（直接调用者或调用链中某处的调用者）已使用特定的强名称进行签名。~~ （这不再按预期工作）

# ubuntu - Mercurial 通过 ssh，找不到存储库

> ID：10812796
> 
> 赞同：2
> 
> 时间：2012-05-30T08:39:10.507
> 
> 标签：ubuntu, mercurial, ssh

我试图在我的一个非常旧的 ubuntu 服务器（Ubuntu 10.04.4）的帐户中安装 hg。它似乎在本地工作，但我无法通过 ssh 克隆存储库。

```
$ hg clone ssh://user@server//home/user/path 
```

给我一个“.hg not found”错误。

然而，

```
$ ssh user@server 'ls /home/user/path/.hg' 
```

效果很好。

会不会是端口的问题？谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:32:17.613

已经有一段时间了，所以这个问题可以解决并且没有答案。

[无论如何，当我按照Per-user install guide](https://www.mercurial-scm.org/wiki/UnixInstall)安装 Mercurial 时，我遇到了同样的问题。当我将其重新安装为系统范围的安装时，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T15:03:25.733

如果你在某个非标准的地方有 hg，例如 ~/bin/hg 只需告诉 mercurial 在哪里可以找到它 hg clone ssh://you@remote/dir_to_clone --remotecmd bin/hg

如果您运行的是安装了系统范围的 mercurial 的旧发行版（如 RHEL），但您在本地从主目录运行了更多最新版本，则可能会发生这种情况。或者您可能无法在远程机器上安装系统范围的软件。

给 hg --verbose 标志以查看它在远程计算机上运行的精确命令，确保它使用与用于创建远程 repo 的 hg 实例相同的 hg 实例。

老问题，但我来这里是为了寻找答案，所以现在我已经解决了，不妨分享一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T15:36:31.720

还可以尝试 Hal 提到的 --verbose 选项。就我而言，这表明问题是路径前没有足够的“/”字符。

失败的： `hg clone --verbose ssh://user@host/home/user/QFDC QFDC`

```
running ssh user@host "hg -R home/user/QFDC serve --stdio"
remote: abort: There is no Mercurial repository here (.hg not found)!
abort: no suitable response from remote hg! 
```

作品 - 注意双斜杠（`//`）： `hg clone --verbose ssh://user@host//home/user/QFDC QFDC`

```
running ssh user@host "hg -R /home/user/QFDC serve --stdio"
requesting all changes
adding changesets
... 
```

这继续喷出很多东西，所以`-R`一旦你开始工作，你可能想放弃它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-15T15:21:15.223

只要您可以通过 ssh 连接到远程，就不应该是端口问题 - 以下“乱序”设置存在相同问题：

*   virtualenv 与 mercurial
*   bashrc 别名 hg=/path/to/virtenv/hg
*   存储库最初使用 virtenv hg 初始化
*   系统范围的 ubuntu 10.04 hg ---> 给出相同的错误，即 .hg 未找到

解决方案：

*   在远程主机上执行以下步骤
*   备份您的远程存储库和更新
*   摆脱 virtenv 和路径别名
*   logout & login or 确保 .bashrc 被重新加载和设置
*   删除 .hg
*   使用系统 hg 初始化 & 添加 & 提交现有版本
*   试着像往常一样拉 - 为我工作

# image - 滤波后的Matlab图像归一化

> ID：10812799
> 
> 赞同：0
> 
> 时间：2012-05-30T08:39:28.650
> 
> 标签：image, matlab, image-processing, normalization

我有以下代码，我试图在过滤后对我的图像进行标准化，但问题是，一旦它到达第 5 行，它就会将所有内容更改为 0，并返回黑色图像。任何的想法 ？

```
 for i=1:10     
     temp_imag = imag_test1{i}(:,:);
     t_max = max(max(temp_imag));
     t_min = min(min(temp_imag));
     temp_imag = (temp_imag-t_min).*double(((new_max-new_min)/(t_max-t_min)))+double(new_min);
     imag_test1{i}(:,:) = temp_imag;
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:51:04.873

你不知道哪些值`new_max`并`new_min`得到，但无论如何，如果每行 5 ( `temp_imag = (temp_imag-t_min).*double(((new_max-new_min)/(t_max-t_min)))+double(new_min);` ) 之后一切都变为零，则有几种可能性：

1.  `imga_test{i}`( `1 <= i <= 10`) 都是零，`new_min`也是零。您是否检查过`imga_test`它们并非全为零并且它们不同的值？您可以为例如创建示例数据`imga_test`。通过使用`rand`or `randi`。如果随机数据给您非零，则问题出在`imga_test`.

2.  `new_max-new_min`为零，这意味着它`new_max`具有`new_min`相同的值。您是否尝试过更改`new_max`和`new_min`更改它们的差异的值？如果更改 的值`new_max`，`new_min`或两者都给您非零，则问题出在`new_max`和中`new_min`。

3.  通过使用`solve`来求解方程，例如。对于`new_min`：

    `solve('temp_imag = (temp_imag-t_min)*(((new_max-new_min)/(t_max-t_min)))+(new_min)', 'new_min')`：

    `ans = (new_max*t_min - new_max*temp_imag - t_min*temp_imag + t_max*temp_imag)/(t_max - temp_imag)`

这第三种情况是非常不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:29:38.777

我会尝试展示预处理和后处理的图像：

```
figure();
for i=1:10     
     temp_imag = imag_test1{i}(:,:);
     subplot( 1, 2, 1 ); imshow( temp_imag, [] ); title( 'pre' ); 
     t_max = max(max(temp_imag));
     t_min = min(min(temp_imag));
     temp_imag = (temp_imag-t_min).*double(((new_max-new_min)/(t_max-t_min)))+double(new_min);
     subplot( 1, 2, 2 ); imshow( temp_imag, [] );  title( 'post' );    
     imag_test1{i}(:,:) = temp_imag;
 end 
```

# c# - 数据服务 - 按子值查找实体 - 仅检索一些属性

> ID：10812810
> 
> 赞同：1
> 
> 时间：2012-05-30T08:40:53.567
> 
> 标签：c#, wcf, wcf-data-services

我正在将 WCF 数据服务与 Entity Framework 4.1 一起使用

我有 2 个具有多对多关系的表。我正在尝试基于子值获取实体。

```
Table 1 (Suppliers) -> ID (PrimaryKey) ,Name ,isEnabled ,Timestamp
Table 2 (Categories) -> RGID (PrimaryKey) , Name, etc.... 
```

我试图写这样的URI。我的目标是检索所有具有 RGID = 3 的类别的供应商 - 名称和时间戳。

到目前为止我已经完成了

```
http://localhost/joybaservice/joybadataservice.svc/Categories(3)?$expand=Suppliers 
```

现在我的任务是选择我想要的属性。名称 + 时间戳。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:49:13.433

使用 $select 查询选项。例如，上面的查询使用扩展，假设我想从 Category 中获取 Name 属性，从 Suppliers 中获取 Name 属性，从 Suppliers 中获取 Timestamp 属性。查询可能如下所示：

```
~/Categories(3)?$expand=Suppliers&$select=Name,Suppliers/Name,Suppliers/Timestamp 
```

如果您想使用客户端上的 LINQ（使用 WCF 数据服务客户端库）执行此操作，则不能使用 AddQueryOption 添加 $select（或任何其他 $ 查询选项），而是需要表达查询的意图使用 LINQ（毕竟这就是它的用途）。因此，例如，上面可能看起来像这样（尽管取决于您的类的布局）。

```
ctx.Categories
  .Where(c => c.ID == 3)
  .Select(c => new Category()
    {
      Name = c.Name,
      Suppliers = c.Suppliers.Select(s => new Supplier()
        {
          Name = s.Name,
          Timestamp = s.Timestamp
        })
    }) 
```

# ubuntu - gtk 应用程序可以默认使用 :0 以外的显示吗？

> ID：10812812
> 
> 赞同：0
> 
> 时间：2012-05-30T08:41:04.043
> 
> 标签：ubuntu, gtk, vnc, vnc-viewer

我正在尝试使用 vncviewer 执行 gtk 应用程序。

当我使用 :0 显示器连接时，我可以正常执行 gtk 应用程序，但是对于任何其他显示器，即 :1 等，应用程序退出并出现以下错误..

```
CRITICAL **: Could not initialize GTK 
```

有没有一种方法可以让 gtk 应用程序使用 :0 显示以外的显示，以便我可以通过 vncviewer 使用它？

机器上的实际用户已经使用了机器，因此在我的情况下不能使用 display :0 。

我认为这是可能的，因为系统上的所有其他 GUI 在任何显示器上都可以正常运行。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:19:01.787

我发现了我遇到的问题.. 使用 vncviewer 时，用户应该从终端执行 gtk 应用程序（其他 gui 应用程序也可能是这样..），同时从指定的同一用户登录

> ~/.vnc/xstartup

配置文件。

问题是我从终端切换到其他用户后正在执行 gtk 应用程序，与 ~/.vnc/xstartup 文件中指定的用户不同。一旦我切换了用户..应用程序出现了！

# windows-phone-7 - 有没有办法从文件中检索特定文本

> ID：10812826
> 
> 赞同：0
> 
> 时间：2012-05-30T08:41:54.920
> 
> 标签：windows-phone-7

我正在编写将用户名和密码写入隔离存储的代码。我编写了代码，但我必须`Passwordtext`从文件中读取密码，并将同一文件中的用户名读取到另一个文本框。有没有办法从文件中检索这些特定值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:38:45.717

您可以创建一个对象来保存您所追求的数据并将其序列化并将其写入文件。然后读出并反序列化以访问数据。

或者，您可以将这些存储在`IsolatedStorageSettings` [http://msdn.microsoft.com/en-us/library/cc221360(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221360(v=vs.95).aspx)

# mysql - MySQL 计数行包括零（非常接近我想要的！）

> ID：10812828
> 
> 赞同：4
> 
> 时间：2012-05-30T08:42:02.867
> 
> 标签：mysql, join, count

我知道我很接近，它正在杀死我。这里需要一双新鲜的眼睛......

```
SELECT 
first_name, 
COUNT(*) FROM 
(SELECT first_name, job_status FROM typesetting 
LEFT JOIN employees ON typesetting.employees_id = employees.id 
LEFT JOIN job_status ON typesetting.job_status_id = job_status.id 
WHERE job_status NOT LIKE 'Archived' 
ORDER BY first_name ASC) 
AS CNT 
GROUP BY first_name 
```

这让我：

*   阿诺德 (5)
*   克劳迪娅 (19)
*   珍妮特 (29)
*   丰富 (21)
*   汤姆 (4)
*   未分配 (24)

但是，我非常希望在结果中出现一些零值的结果，如下所示：

*   阿诺德 (5)
*   谢丽尔 (0)
*   克劳迪娅 (19)
*   辛迪 (0)
*   珍妮特 (29)
*   菲尔 (0)
*   丰富 (21)
*   汤姆 (4)
*   未分配 (24)

我究竟做错了什么？很近！谢谢！

-马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:01:52.527

```
SELECT  first_name, COUNT(js.id)
FROM    employees e
LEFT JOIN
        typesetting ts
ON      ts.employees_id = e.id
LEFT JOIN
        job_status js
ON      js.id = ts.job_status_id
        AND js.status <> 'Archived'
GROUP BY
        first_name
UNION ALL
SELECT  'Unassigned', COUNT(*)
FROM    typesetting ts
JOIN    job_status js
ON      js.id = ts.job_status_id
        AND js.status <> 'Archived'
WHERE   ts.employees_id NOT IN
        (
        SELECT  id
        FROM    employees
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:56:44.180

在 INNER 查询中，您过滤掉所有可能给您`0`结果的人。

试试这个：

```
SELECT first_name,
       sum(CASE WHEN job_status = 'Archived' THEN 1 ELSE 0 END) AS cnt
  FROM typesetting 
  LEFT JOIN employees ON typesetting.employees_id = employees.id 
  LEFT JOIN job_status ON typesetting.job_status_id = job_status.id 
GROUP BY first_name
ORDER BY first_name ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:49:55.587

如果我的查询正确。你可以这样做：

```
SELECT
    employees.first_name,
    (
        SELECT
            COUNT(*)
        FROM
            typesetting
            JOIN job_status ON typesetting.job_status_id = job_status.id 
        WHERE
            typesetting.employees_id = employees.id
            AND job_status NOT LIKE 'Archived' 
    )
FROM
    employees
ORDER BY 
    first_name ASC 
```

# xml - 如何在字符串中写入 XML？

> ID：10812830
> 
> 赞同：0
> 
> 时间：2012-05-30T08:42:14.153
> 
> 标签：xml, c#-4.0

我没有权利在磁盘上写。我想创建一个`string`由`xml`文件组成的。

我不想提供文件名，因为我没有权限。如果我只是附加`xml`到`string`它是否有效？有没有更好的方法来做到这一点。

`XmlTextWriter xmlWriter = new XmlTextWriter(fileName, Encoding.UTF8);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:23:24.513

***代码输入：***

```
var rss = new XElement("rss", new XAttribute("version", "2.0"));
var channel = new XElement("channel",
    new XElement("title", "Liftoff News"),
    new XElement("link", "http://liftoff.msfc.nasa.gov/"),
    new XElement("description", "Liftoff to Space Exploration.")
    );
rss.Add(channel);
channel.Add(new XElement("item",
    new XElement("title", "Star City"),
    new XElement("link", "http://liftoff.msfc.nasa.gov/news/2003/news-starcity.asp"),
    new XElement("description", @"
        How do Americans get ready to work with Russians aboard the
        International Space Station? They take a crash course in culture, language
        and protocol at Russia's Star City.
        "),
    new XElement("pubDate", DateTime.UtcNow),
    new XElement("guid", "http://liftoff.msfc.nasa.gov/2003/06/03.html#item573")
));

var text = rss.ToString(); 
```

***文本输出：***

```
<rss version="2.0">
  <channel>
    <title>Liftoff News</title>
    <link>http://liftoff.msfc.nasa.gov/</link>
    <description>Liftoff to Space Exploration.</description>
    <item>
      <title>Star City</title>
      <link>http://liftoff.msfc.nasa.gov/news/2003/news-starcity.asp</link>
      <description>
          How do Americans get ready to work with Russians aboard the
          International Space Station? They take a crash course in culture, language
          and protocol at Russia's Star City.
      </description>
      <pubDate>2012-05-30T10:21:14.014Z</pubDate>
      <guid>http://liftoff.msfc.nasa.gov/2003/06/03.html#item573</guid>
    </item>
  </channel>
</rss> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:45:47.907

```
XmlDocument myDocument = new XmlDocument();

myDocument.Load("XML STRING GOES HERE");

Do the manipulation of your xml document here

string output = myDocument.InnerXml //to get to the raw Xml string. 
```

MS 文档中的 DOM 操作示例：

```
XmlElement elem = doc.CreateElement("price");
XmlText text = doc.CreateTextNode("19.95");
doc.DocumentElement.AppendChild(elem);
doc.DocumentElement.LastChild.AppendChild(text); 
```

您可以随意创建元素、节点和属性。

# javascript - 为什么使用 .on() 添加事件而不是直接添加事件？

> ID：10812831
> 
> 赞同：1
> 
> 时间：2012-05-30T08:42:18.257
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery on vs click 方法](https://stackoverflow.com/questions/8601482/jquery-on-vs-click-methods)

来自 API：

.on() ：将一个或多个事件的事件处理函数附加到所选元素。

示例代码：

```
$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
}); 
```

我们可以这样写：

```
$("#dataTable tbody tr").click(function() {
        alert($this).text();
}); 
```

为什么要麻烦将事件包装在 .on() 中？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:44:09.037

*为什么要麻烦将事件包装在 .on() 中？*

在这个特定的例子中，使用`on()`你可以利用`event delegation`, 所以你可以简单地做，而不是为每个`tr`元素附加很多处理程序

```
$("#dataTable").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

此外，使用`on()`您可以将 a 分配`namespace`给您的事件，例如

```
$("#dataTable").on("click.mynamespace"...) 
```

因此，您可以稍后以更清洁和更精致的方式分离您的事件，例如

```
$("#dataTable").off(".mynamespace"...); 
```

while`click(function()...)`只是一种简写方法`.on("click", function()...)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T08:48:36.077

`.click()`主要是AND的区别`.on()`

您可以在`.click()`页面上的现有元素上绑定点击事件，但是例如刚刚通过 Ajax 添加的新元素呢，点击事件将不会绑定在新元素上

因此，使用`.on()`使您能够将新添加的元素上的单击事件绑定到页面

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T08:47:30.773

`.on`给你：

1.  事件委托
2.  为多个事件注册相同处理程序的能力
3.  事件命名空间
4.  一致的事件*注册*接口
5.  与其他 JS 环境的一致性，例如`node.js`

我总是`.on()`优先使用 to `.click()`，以便在我想*触发*事件时保留后者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T08:48:13.543

恰恰相反：`.click()`是 . 的简写`.on('click')`。不将其包装在 .click 中会更快（并允许更多选项，例如事件委托）。

使用 .click 的唯一优点是：

*   写起来更短
*   它会在输入错误时引发运行时错误，而不是静默失败

# matlab - MATLAB：测试匿名向量是否是 R^n 的子集

> ID：10812832
> 
> 赞同：0
> 
> 时间：2012-05-30T08:42:21.947
> 
> 标签：matlab, math, vector

我正在尝试使用 MatLab 代码作为程序员学习数学的一种方式。

所以阅读我这篇关于子空间[的文章](http://www.cliffsnotes.com/study_guide/Subspaces-of-Rn.topicArticleId-20807,articleId-20786.html)并尝试构建一些简单的 matlab 函数来为我做这件事。

这是我走了多远：

```
function performSubspaceTest(subset, numArgs)
% Just a quick and dirty function to perform subspace test on a vector(subset)
%
% INPUT
% subset        is the anonymous function that defines the vector
% numArgs       is the the number of argument that subset takes

% Author:   Lasse Nørfeldt (Norfeldt)
% Date:     2012-05-30
% License:  http://creativecommons.org/licenses/by-sa/3.0/

if numArgs == 1
    subspaceTest = @(subset) single(rref(subset(rand)+subset(rand))) ...
        == single(rref(rand*subset(rand)));

elseif numArgs == 2
    subspaceTest = @(subset) single(rref(subset(rand,rand)+subset(rand,rand))) ...
        == single(rref(rand*subset(rand,rand)));
end
% rand just gives a random number. Converting to single avoids round off
% errors.
% Know that the code can crash if numArgs isn't given or bigger than 2.

outcome = subspaceTest(subset);
if outcome == true
    display(['subset IS a subspace of R^' num2str(size(outcome,2))])
else
    display(['subset is NOT a subspace of R^' num2str(size(outcome,2))])
end 
```

这些是我正在测试的子集

```
%% Checking for subspaces
V = @(x) [x, 3*x]
performSubspaceTest(V, 1)

A = @(x) [x, 3*x+1]
performSubspaceTest(A, 1)

B = @(x) [x, x^2, x^3]
performSubspaceTest(B, 1)

C = @(x1, x3) [x1, 0, x3, -5*x1]
performSubspaceTest(C, 2) 
```

运行代码给了我这个

```
V = 
@(x)[x,3*x]
subset IS a subspace of R^2

A = 
@(x)[x,3*x+1]
subset is NOT a subspace of R^2

B = 
@(x)[x,x^2,x^3]
subset is NOT a subspace of R^3

C = 
@(x1,x3)[x1,0,x3,-5*x1]
subset is NOT a subspace of R^4 
```

C 不起作用（仅当它只接受一个 arg 时才起作用）。我知道我对 numArgs 的解决方案不是最优的——但这是我目前能想到的。

有什么方法可以优化这段代码，使 C 能够正常工作，并且可能避免超过 2 个参数的***elseif语句..？***

PS：我似乎找不到一个内置的 matlab 函数来为我做这个洞的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:33:39.020

不是最优的解决方案几乎没有触及问题的表面。

我认为您一次做的太多了：`rref`不应该使用并且使一切复杂化。尤其是`numArgs`大于 1。

想一想：`[1 0 3 -5]`并且`[3 0 3 -5]`都是 C 的成员，但它们的总和`[4 0 6 -10]`（属于 C）不是先前向量之一（例如`[2 0 6 -10]`）的乘积的线性乘积。所以`rref`世界上所有的人都无法解决你的问题。

那么你能做什么呢？

你需要检查是否

```
(randn*subset(randn,randn)+randn*subset(randn,randn))) 
```

是 C 的成员，除非我弄错了，否则这是一个难题：从概念上讲，您需要遍历向量的每个元素并确保它与预定条件匹配。或者，您可以尝试找到一个 C(x1,x2) 为您提供正确答案的集合。在这种情况下，您可以使用[fminsearch](http://www.mathworks.com/help/techdoc/ref/fminsearch.html)以数值方式解决此问题并验证返回值是否在定义的容差范围内：

```
[s,error] = fminsearch(@(x) norm(C(x(1),x(2)) - [2 0 6 -10]),[1 1])
s =
   1.999996976386119   6.000035034493023
error =
     3.827680714104862e-05 
```

编辑：您需要确保可以在乘法中使用负数，所以不要使用 rand，而是使用其他东西。我把它改成了randn。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:59:52.407

这是一种方法。它测试给定函数是否代表线性子空间。从技术上讲，这只是一个概率测试，但它失败的机会非常小。

首先，我们定义了一个很好的抽象。这个高阶函数将一个函数作为其第一个参数，并将该函数应用于矩阵的每一行`x`。这允许我们同时测试多个参数`func`。

```
function y = apply(func,x)
  for k = 1:size(x,1)
    y(k,:) = func(x(k,:));
  end 
```

现在我们编写核心函数。这`func`是一个参数的函数（假定是一个向量 in `R^m`），它返回一个向量 in `R^n`。我们应用`func`100 个随机选择的向量`R^m`来获得一个输出矩阵。如果`func`表示一个线性子空间，那么输出的[秩](http://en.wikipedia.org/wiki/Rank_%28linear_algebra%29)将小于或等于`m`。

```
function result = isSubspace(func,m)
  inputs  = rand(100,m);
  outputs = apply(func,inputs);
  result  = rank(outputs) <= m; 
```

这是在行动。请注意，这些函数只接受一个参数——你写的地方是`c(x1,x2)=[x1,0,x2]`我写`c(x) = [x(1),0,x(2)]`的，这有点冗长，但它的优点是我们不必乱用 if 语句来决定我们的函数有多少参数——这很有效对于接受`R^m`任何输入的函数`m`，而不仅仅是 1 或 2。

```
>> v = @(x) [x,3*x]
>> isSubspace(v,1)
ans =
     1

>> a = @(x) [x(1),3*x(1)+1]
>> isSubspace(a,1)
ans =
     0

>> c = @(x) [x(1),0,x(2),-5*x(1)]
>> isSubspace(c,2)
ans =
     1 
```

# mysql - sql连接查询

> ID：10812833
> 
> 赞同：0
> 
> 时间：2012-05-30T08:42:23.647
> 
> 标签：mysql, sql, join

我有一个查询

```
SELECT foodjoint_id FROM provider_food_joints WHERE foodjoint_name='".$foodjoint_name."'"; 
```

现在我必须从另一个有 foodjoint_id 归档的表中选择所有信息

```
SELECT * from menu_item where foodjoint_id = THOSE ID 
```

我必须加入这两个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:45:41.507

```
SELECT i.menu_item 
FROM menu_item i 
JOIN provided_food_joints pfj 
ON (pfj.id = i.foodjoin_id)
WHERE i.foodjoin_id = 5 
```

这基本上就是连接语句的工作方式。查看[本教程](http://www.keithjbrown.co.uk/vworks/mysql/mysql_p5.php)以获取有关不同类型连接的更多信息

在您的情况下 - 正如最低点所建议的那样 -`JOIN`陈述会更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:45:46.187

您可以在您的条件中使用 IN 子句：

```
SELECT * from menu_item where foodjoint_id IN (
    SELECT foodjoint_id FROM provider_food_joints WHERE foodjoint_name='".$foodjoint_name."'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:45:59.613

尝试这个

```
SELECT * from menu_item where foodjoint_id in( SELECT foodjoint_id FROM provider_food_joints WHERE foodjoint_name='".$foodjoint_name."'") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:46:14.387

```
SELECT * FROM menu_item WHERE foodjoint_id = (SELECT foodjoint_id FROM provider_food_joints WHERE foodjoint_name='".$foodjoint_name."'"); 
```

希望这是你的要求？或具体说明问题

# php - 在 PHP 中读取 XML 文件并将值存储在数组中

> ID：10812838
> 
> 赞同：0
> 
> 时间：2012-05-30T08:42:53.657
> 
> 标签：php, xml

我只是 PHP 的初学者。只是想确保我正在做的事情是正确的，或者我是否使事情复杂化，或者在 ajax 中是否有任何替代方法

我必须在 php 中读取一个 xml 文件并将其存储在一个数组中以供进一步评估

XML 文件是

```
> <IntervalReading>
>     <cost>907</cost>
>     <timePeriod>
>         <duration>900</duration>
>         <start>1330580700</start>
>          <!-- 3/1/2012 5:45:00 AM  -->
>     </timePeriod>
>     <value>302</value> </IntervalReading> <IntervalReading>
>     <cost>907</cost>
>     <timePeriod>
>         <duration>900</duration>
>         <start>1330581600</start>
>          <!-- 3/1/2012 6:00:00 AM  -->
>     </timePeriod>
>     <value>302</value> </IntervalReading> <IntervalReading>
>     <cost>907</cost>
>     <timePeriod>
>         <duration>900</duration>
>         <start>1330582500</start>
>          <!-- 3/1/2012 6:15:00 AM  -->
>     </timePeriod>
>     <value>302</value> </IntervalReading> 
```

用于读取此数据的 PHP 代码是

```
$doc = new DOMDocument(); $doc->load( "tmp/".$filename ); $employees = array(); $value = array(); $cost =         array(); $start =     array();    $duration = array(); $doc->formatOutput = true; $employees = $doc->getElementsByTagName( "IntervalReading" );    foreach( $employees as $employee )  {
    $names = $employee->getElementsByTagName( "value" ); 
    $val =  $value[] = $names->item(0)->nodeValue;
    $costs = $employee->getElementsByTagName( "cost" ); 
    $cost[] =  $costs->item(0)->nodeValue;  
    $startnames = $employee->getElementsByTagName( "start" ); 
    $start[] = $startnames  ->item(0)->nodeValue;
    $durations  = $employee->getElementsByTagName( "duration" );
    $duration[] = $durations->item(0)->nodeValue;  } } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:46:34.547

为此，我通常使用 php SimpleXML：

[http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

它可以从字符串中读取 xml 结构并返回不错的对象。

# php - 阅读促销规则条件 - Magento

> ID：10812839
> 
> 赞同：2
> 
> 时间：2012-05-30T08:42:55.143
> 
> 标签：php, magento

我需要以编程方式阅读 magento 中购物车价格规则的条件。

`Mage_SalesRule_Model_Rule`有一种方法`getConditionsSerialized()`确实提供了条件，但至少可以说是一种神秘的方式，例如：

```
a:7:{s:4:"type";s:32:"salesrule/rule_condition_combine";s:9:"attribute";N;s:8:"operator";N;s:5:"value";s:1:"1";s:18:"is_value_processed";N;s:10:"aggregator";s:3:"all";s:10:"conditions";a:1:{i:0;a:5:{s:4:"type";s:32:"salesrule/rule_condition_address";s:9:"attribute";s:13:"base_subtotal";s:8:"operator";s:2:">=";s:5:"value";s:1:"1";s:18:"is_value_processed";b:0;}}} 
```

有人知道如何以更人道的方式阅读条件吗？我希望能够读取某些属性。

非常感谢！

Krt_马耳他

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:58:41.880

您可以使用 php 的[unserialize](http://php.net/manual/en/function.unserialize.php)函数将其转换为可用的数组。

试试这个：

```
$conditions = unserialize($rule->getConditionsSerialized());
print_r($conditions); 
```

我之前写过关于这些如何工作的博客，虽然我的帖子是关于*创建*规则的，但它仍然解释了一些关于如何理解条件的内容。

[这是我的帖子](http://mikebywaters.wordpress.com/2011/12/18/programmatically-create-shopping-cart-price-rules-with-conditions-and-actions/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:56:34.213

`unserialize($rule->getConditionsSerialized()`) 成功了！

希望它可以帮助别人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T19:26:51.350

Magento 已经实现了一个函数来为自己反序列化条件和动作，你所要做的就是使用它。

`$conditions = Mage::getModel('salesrule/rules')->load($ruleId)->getConditions();`

每次调用`->getConditions()`都会让您在执行规则对象中获得更深入的条件。

例如，第一次调用`->getConditions()`它将返回一个对象类型，`Mage_SalesRule_Model_Rule_Condition_Combine`这是所有内部条件的默认包装器。如果再次链接调用，`->getConditions()->getConditions()`您将获得一个包含 [X] 个条件对象的数组，每个条件对象都是您在通过 adminhtml 接口创建它们时声明的类型。

避免使用`unserialize()`并开始使用 Magento 内置函数。

# c# - 有没有一种方法可以验证 powershell 脚本？

> ID：10812843
> 
> 赞同：2
> 
> 时间：2012-05-30T08:43:29.620
> 
> 标签：c#, powershell

我的应用程序允许用户输入稍后将为您运行的 powershell 脚本。是否有一种直接的方法可以在不运行它的情况下验证 powershell 脚本，以便当用户输入它时程序可以报告语法错误？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:48:54.763

在 PowerShell v2 中，您有可以在不运行脚本的情况下处理脚本的标记器。查看 System.Management.Automation.PSParser 类，它是静态方法 Tokenize：

[http://msdn.microsoft.com/en-us/library/system.management.automation.psparser(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.management.automation.psparser(v=vs.85).aspx)

在 v3 中它变得更好，有整个语言命名空间/AST 支持：

[http://msdn.microsoft.com/en-us/library/system.management.automation.language(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.management.automation.language(v=vs.85).aspx)

HTH 巴特克

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T11:15:15.610

我写了一个函数来自动化这个过程：Test-PSScript，你可以[在我的博客上找到它](http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2009/09/07/parsing-powershell-scripts.aspx)

```
#Requires -Version 2

function Test-PSScript
{

   param(
      [Parameter(Mandatory=$true, Position=0, ValueFromPipeline=$true, ValueFromPipelineByPropertyName=$true)] 
      [ValidateNotNullOrEmpty()] 
      [Alias('PSPath','FullName')] 
      [System.String[]] $FilePath,

      [Switch]$IncludeSummaryReport
   )

   begin
   {
      $total=$fails=0
   }

   process
   {
       $FilePath | Foreach-Object {

         if(Test-Path -Path $_ -PathType Leaf)
         {
            $Path = Convert-Path –Path $_ 

            $Errors = $null
            $Content = Get-Content -Path $path 
            $Tokens = [System.Management.Automation.PsParser]::Tokenize($Content,[ref]$Errors)

            if($Errors)
            {
               $fails+=1
               $Errors | Foreach-Object { 
                  $_.Token | Add-Member -MemberType NoteProperty -Name Path -Value $Path -PassThru | `
                  Add-Member –MemberType NoteProperty -Name ErrorMessage -Value $_.Message -PassThru
               }
            }

           $total+=1 
         }  
      }
   } 

   end 
   {
      if($IncludeSummaryReport) 
      {
         Write-Host "`n$total script(s) processed, $fails script(s) contain syntax errors."
      }
   }
} 
```

# titanium - 在没有 jquery 的情况下实现 signalR

> ID：10812849
> 
> 赞同：6
> 
> 时间：2012-05-30T08:43:48.903
> 
> 标签：titanium, signalr

是否可以在不使用 Jquery 的情况下实现 SignalR。我想为 Titanium 创建一个模块，但我不知道 SignalR 对 DOM 的依赖程度。jQuery 是否仅用于 ajax 请求？你觉得这有多难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:58:32.820

嗯，这不是不可能的，但它会有点工作。您基本上需要重写所有 jquery 语法 ($...)

```
Jquery.signalR.js 
```

作为普通的javascript。此外，您将只能进行低级连接，因为“集线器”模型也需要 jquery。

您可能需要包含 JSON.js，以便您可以像这样进行 ajax 调用。

```
var the_object = {}; 
var http_request = new XMLHttpRequest();
http_request.open( "POST", url + "/negotiate, true );
...
http_request.onreadystatechange = function () {
    if ( http_request.readyState == 4 && http_request.status == 200 ) {
            the_object = JSON.parse( http_request.responseText );
        }
};
http_request.send(null); 
```

# silverlight - 取消复选框检查事件

> ID：10812854
> 
> 赞同：1
> 
> 时间：2012-05-30T08:44:03.753
> 
> 标签：silverlight

我的表单中有一个复选框，它以两种方式绑定到我的模型中的布尔值。有一种特殊情况，用户单击复选框，会出现一个问题，并且可能会回答“否”。在这种情况下，操作将失败，并且不应选中该复选框。

我已经尝试了几种变体，但它不起作用，因为模型正确设置为 false，但 UI 中的复选框无论如何都会被选中。

```
private bool _isName = false;
public bool isName {
  get { return _isName; }
  set {
    if (value && specialCase) {
        if(user answers no)
          value = false;
    }
    _isName = value;
    NotifyPropertyChanged("isName");
  }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:09:51.120

创建自定义`MessageBox`，它将作为参数取消命令和命令，以防用户输入是肯定的。`ViewModel`然后创建两个负责更改`isName`属性的附加方法。`xaml`添加到单击事件中，其中显示自定义消息框`EventTrigger`。`CheckBox`然后将负责更改属性的命令绑定到 MessageBox。

如果您需要一些代码示例或更多说明 - 我会提供它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:45:07.407

好的，只是为了解决那个东西的直接问题，这行得通：

```
...
if(user answers no) {
  value = false;
  myUiElement.Dispatcher.BeginInvoke(
              () => { isName = false; }
  };
}
... 
```

然而，正如@HiTech Magic 所建议的那样，这种公然违反了健全的软件原则，所以我转向了一种更微妙的方式来违反它们。

# java - 如何在 Java 中创建“包”？

> ID：10812857
> 
> 赞同：2
> 
> 时间：2012-05-30T08:44:24.377
> 
> 标签：java

我有两个班级，父母和孩子。类的代码是这样的：

**父类**

```
package test;
import java.util.*;

public class Parent {
    public static void main(String[] args) {
        Child child = new Child();
    }
} 
```

**子类**

```
package test;
import java.util.*;

public class Child {
    public Child() {
        System.out.println("A Child object has been created");
    }
} 
```

我把这两个类都放在一个名为“test”的目录中。我可以编译 Child.java 没有任何问题，但我不能编译父类。它说它找不到子类。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:58:37.200

我猜你在错误的地方执行命令。如果你把代码放在 d:/test/ 中，你应该在 d:/ 目录下执行你的命令。

因此，如果您将目录更改为 d:，您可以做正确的事情。javac 测试\Child.java javac 测试\Parent.java

java test.父

你会得到你想要的。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:33:20.917

要做的是在编译父类时将生成的子类包含在类路径中。

```
SET CLASSPATH= (the path where your child.class exists);%CLASSPATH%; 
```

上面需要做，因为父类依赖子类，没有它就无法编译

一些细节可以在这里找到：

[http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html](http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T09:58:47.517

假设您的 java 文件位于 D:\test.xml 中。你编译喜欢这样

```
 D:\>javac test/Child.java
     D:\>javac test/Parent.java 
```

对你来说没问题。如果你使用一些 IDE，你的类没有问题。

# c - 如何在 Linux 内核设备驱动程序中使用定时器？

> ID：10812858
> 
> 赞同：8
> 
> 时间：2012-05-30T08:44:27.523
> 
> 标签：c, linux, timer, linux-kernel, driver

我想在 Linux 设备驱动程序中实现一个计数器，该计数器在每个固定时间间隔后递增。我想在计时器的帮助下做到这一点。示例代码片段将非常有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T09:37:40.437

查看以下文章[IBM Developerworks：计时器和列表](http://www.ibm.com/developerworks/linux/library/l-timers-list/)

有一个关于如何使用 Linux 内核定时器的小例子（为了方便起见，这里包含了它，评论来自我自己，删除了 printk 消息）

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/timer.h>

MODULE_LICENSE("GPL");

static struct timer_list my_timer;

void my_timer_callback( unsigned long data )
{
     /* do your timer stuff here */
}

int init_module(void)
{
  /* setup your timer to call my_timer_callback */
  setup_timer(&my_timer, my_timer_callback, 0);
  /* setup timer interval to 200 msecs */
  mod_timer(&my_timer, jiffies + msecs_to_jiffies(200));
  return 0;
}

void cleanup_module(void)
{
  /* remove kernel timer when unloading module */
  del_timer(&my_timer);
  return;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-09-01T00:15:18.963

Linux 内核 4.15 版本前后，**void setup_timer(timer, function, data);** 变得过时，意图将其完全删除。

相反，现在我们必须使用

```
void timer_setup(
struct timer_list *timer, 
void (*callback)(struct timer_list *),
unsigned int flags
); 
```

这可以在**linux/timer.h**文件中找到。

**这是module_with_timer.c**的完整示例

 **```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/jiffies.h>
#include <linux/timer.h>

MODULE_LICENSE("GPL");

static struct timer_list my_timer;

void my_timer_callback(struct timer_list *timer) {
  printk(KERN_ALERT "This line is printed after 5 seconds.\n");
}

static int init_module_with_timer(void) {
  printk(KERN_ALERT "Initializing a module with timer.\n");

  /* Setup the timer for initial use. Look in linux/timer.h for this function */
  timer_setup(&my_timer, my_timer_callback, 0);
  mod_timer(&my_timer, jiffies + msecs_to_jiffies(5000));

  return 0;
}

static void exit_module_with_timer(void) {
  printk(KERN_ALERT "Goodbye, cruel world!\n");
  del_timer(&my_timer);
}

module_init(init_module_with_timer);
module_exit(exit_module_with_timer); 
```

Makefile 是

```
obj-m = module_with_timer.o

# Get the current kernel version number
KVERSION = $(shell uname -r)

all:
    make -C /lib/modules/$(KVERSION)/build M=$(PWD) modules
clean:
    make -C /lib/modules/$(KVERSION)/build M=$(PWD) clean 
```

**注意：**在实际编程中，最好检查我们正在编译的内核版本，然后使用 then 适当地启动计时器。

参考文献： [https ://lwn.net/Articles/735887/](https://lwn.net/Articles/735887/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T09:37:52.190

`jiffies`正如评论中所建议的那样，根据您确切想要做的事情，您可以直接使用来衡量时间。您还可以使用内核计时器，并且根据您问题中的信息，它们似乎更合适。

内核计时器 API 非常直观：

```
#include <linux/timer.h>
struct timer_list {
        /* ... */
        unsigned long expires;
        void (*function)(unsigned long);
        unsigned long data;
};

void init_timer(struct timer_list *timer);
struct timer_list TIMER_INITIALIZER(_function, _expires, _data);

void add_timer(struct timer_list * timer);
int del_timer(struct timer_list * timer); 
```

所以你只需要定义一个定时器函数，然后初始化并启动定时器。

您有几个来源可以进一步了解此主题：

*   [了解 Linux 内核](https://rads.stackoverflow.com/amzn/click/com/0596005652)。这本书是内核的圣经。它在某些领域有些过时，但仍然是一个非常好的信息来源。
*   [Linux 设备驱动程序](https://rads.stackoverflow.com/amzn/click/com/0596005903)。在开发设备驱动程序时，这是一本非常有用的书。[这里](http://www.makelinux.net/ldd3/)也有在线版本。处理时间、计时器等的章节是第 7 章。这本书也可能有点过时，因为它也是 2005 年的。
*   [Linux 内核开发](https://rads.stackoverflow.com/amzn/click/com/0672329468)。我没有查过这本书，但好处是它更新了很多（从 2010 年开始），所以与前两本书相比，你可能会发现一些更新的信息。**

# mysql - MySQL：如果列包含多个 id，如何使用左连接获取数据？

> ID：10812861
> 
> 赞同：2
> 
> 时间：2012-05-30T08:44:47.413
> 
> 标签：mysql, left-join

假设如下：

表“信息”：

```
 id | target_ids
----|------------
 1  | 2
 2  | 
 3  | 4,1
 4  | 2,3,1 
```

表“目标”：

```
 id | value
----|------------
 1  | dog
 2  | cat
 3  | tiger
 4  | lion 
```

使用**left join**，我期待这样的事情：

```
 id | target_ids | value
----|---------------------
 1  | 2          | cat
 2  |            | 
 3  | 4,1        | lion,dog
 4  | 2,3,1      | cat,tiger,dog 
```

我试过这个：

```
select info.*, targets.value from info left join targets on info.target_ids = targets.id 
```

我得到的结果是“值”列中的单个值

```
 id | target_ids | value
----|---------------------
 1  | 2          | cat
 2  |            | 
 3  | 4,1        | lion
 4  | 2,3,1      | cat 
```

如何获得第三张表中显示的结果？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:53:19.357

您需要使用 MySQL 的[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)函数作为连接条件：

```
SELECT   info.*, GROUP_CONCAT(targets.value) AS value
FROM     info LEFT JOIN targets ON FIND_IN_SET(targets.id, info.target_ids)
GROUP BY info.id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/47854/1)上查看。

但是，您可能最好[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据结构并将您的信息目标关系存储在单独的表中：

```
CREATE TABLE InfoTargets (
  InfoID   INT NOT NULL,
  TargetID INT NOT NULL,
  PRIMARY KEY (InfoID, TargetID),
  FOREIGN KEY (InfoID)   REFERENCES info    (id),
  FOREIGN KEY (TargetID) REFERENCES targets (id)
);

INSERT INTO InfoTargets VALUES
  (1,2),
  (3,4), (3,1),
  (4,2), (4,3), (4,1);

ALTER TABLE Info DROP COLUMN target_ids; 
```

然后你会这样做：

```
SELECT   info.id,
         GROUP_CONCAT(targets.id)    AS target_ids,
         GROUP_CONCAT(targets.value) AS value
FROM     InfoTargets
  LEFT JOIN info    ON   InfoID = InfoTargets.InfoID
  LEFT JOIN targets ON TargetID = InfoTargets.TargetID
GROUP BY info.id 
```

如果目标的顺序很重要（并且每个项目之间可能不同`info`），则需要`rank`在`InfoTargets`.

# python - 管理服务器上脚本的运行

> ID：10812863
> 
> 赞同：1
> 
> 时间：2012-05-30T08:44:58.590
> 
> 标签：python, monitoring, fork, process-management

标题有点模糊，因为我不知道正确的词汇。

这是我想做的事情：我在服务器上有一个脚本/程序用于运行检查。现在我的同事希望这个脚本可以从一个网站启动，并从那里查看日志。检查过程可能会运行很长时间，通常超过几个小时。

为此，我收集到，我必须使用网站脚本监控进程，并显示它们的日志。选择的语言是 PHP 或 Python。

我非常想知道这种事情通常是如何完成的以及最佳实践是什么，因为我不确定如何从这个开始。特别是一种可靠的启动/监控流程的方法将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:59:51.650

如果您选择 Python，请查看[Celery](http://celeryproject.org/)（尽管如果您想保持简单，它可能有点矫枉过正）。它允许您运行异步任务，并且您可以轻松地监控它们。还有一个用于 celery 的 django 集成（django-celery），其中包括一个用于任务的 Web 监视器。

# yii - 关于 Yii 中的 CRUD 生成器

> ID：10812864
> 
> 赞同：2
> 
> 时间：2012-05-30T08:45:04.360
> 
> 标签：yii, crud, scaffolding

我开始使用 Yii 框架和 gii 工具来为几个表创建 crud 功能。

问题是我通常需要修改生成的代码。例如，我注意到所有表单都只使用文本输入。例如，在外键的情况下，我需要显示一个选择，用户可以在其中选择另一个表的寄存器，而无需插入主键。

我实现了修改所涉及的视图（_view.php，_form.php，...）。当需要修改数据库并重新生成代码时，我的问题就开始了。对于这种情况，我将不得不逐表逐个更新相关文件，并保留我的旧更改。

有没有办法更好地处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:47:32.843

GiiX[扩展](http://www.yiiframework.com/extension/giix/)为关系生成下拉列表。

如果您使用 Gii 模型生成，GiiX 也会生成更好的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:43:10.367

如果您需要多次生成 crud 表单的功能，可以选择将外键显示为下拉列表，您可以创建自己的 gii 模板来为您完成。[查看指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#extending-gii)以了解如何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:53:04.957

你不必那样做。例如，您可以使用外键生成选择。

```
<?php echo CHtml::dropDownList('ModelName[language_id]',$model->language_id,CHtml::listData(Language::model()->findAll(), 'id', 'name'), array('prompt'=>'Select Language')); ?> 
```

第一个参数是选择的名称，第二个是值（如果您正在更新，将选择该值），第三个是数据，第四个是带有 html 选项的数组。[有关CHtml::dropDownList](http://www.yiiframework.com/doc/api/1.1/CHtml/#activeDropDownList-detail)和[CHtml::listData](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)的更多信息。

在这个，`language_id`是外键，在`Language`表中你有一个`id`和一个`name`字段。这将生成一个包含所有可用语言的选择，例如：1=> 英语、2=> 德语等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T09:52:40.103

对于此功能，您需要开发 gii 工具，该工具将继承现有 gii 工具的功能，这意味着在创建 CRUD 时对现有类进行一些修改。这是您的特定要求，gii 工具仅提供适合所有用户的通用功能。

# php - 用 php 读取 Guitar Pro 文件

> ID：10812874
> 
> 赞同：1
> 
> 时间：2012-05-30T08:45:49.330
> 
> 标签：php, parsing, byte, fread, guitar

我想使用 php 解析吉他专业文件。我遇到了[这个问题](https://stackoverflow.com/questions/4878012/reading-guitar-pro-files)，它引导我了解 gp4 格式的[描述](http://dguitar.sourceforge.net/GP4format.html)。

据我了解，该文件具有高度可读性:)，我只需要知道它的结构。使用 php（或者可能是 javascript）的方法是什么？

[这个 php 函数](http://php.net/manual/en/function.fread.php)是一种“盲目”解析文件的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-14T00:52:35.147

检查 phptabs 库。它处理 MIDI 和吉他专业文件。拥有一套全面的 API

# image - 如何在 SharePoint 文档库模板中添加图标？

> ID：10812876
> 
> 赞同：0
> 
> 时间：2012-05-30T08:46:03.540
> 
> 标签：image, sharepoint, icons, document

我想在共享点文档库模板中插入图像。

当我在库选择中单击站点设置-> 更多选项-> 时，它应该会出现。

我试图操纵 manifest.xml - 带有 ImageUrl-Tag 的文件，但它没有帮助。

可能吗？我已经搜索了很多天，找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:23:14.313

您想将预览图像添加到您创建的自定义 SharePoint 文档库中，对吗？

我假设您已经创建了一个列表模板（特别是文档库模板）。在该`elements.xml`模板中，您具有代表预览图像的[Image](http://msdn.microsoft.com/en-us/library/ms439434.aspx)属性。

`elements.xml`以下是自定义文档库的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
    <ListTemplate
        Name="MyList"
        Type="10012"
        BaseType="1"
        OnQuickLaunch="TRUE"
        SecurityBits="11"
        Sequence="110"
        DisplayName="My List"
        Description=""
        Hidden="false"
        Image="/_layouts/images/itdl.png"
        DocumentTemplate="121"/>
</Elements> 
```

文档库将以位于 的图像`/_layouts/images/itdl.png`作为其预览图像显示。您说您尝试设置`ImageUrl`属性 - 列表模板不存在此属性，但在您创建 Web 模板时它会存在（[请参阅此 SO 帖子](https://stackoverflow.com/questions/7041790/setting-preview-image-for-sharepoint-2010-custom-web-template)）。

# asp.net-mvc-3 - 如何建模绑定实现接口的类？

> ID：10812880
> 
> 赞同：4
> 
> 时间：2012-05-30T08:46:12.127
> 
> 标签：asp.net-mvc-3

模型绑定工作正常，直到我在以下类之上实现接口：

```
public class QuestionAnswer : IQuestionAnswer
    {

        public Int32 Row_ID { get; set; }
        public Int32 Column_ID { get; set; }
        public String Value { get; set; }

    }

    public class HiddenAnswer : IHiddenAnswer
    {

        public Int32 Hidden_Field_ID { get; set; }
        public String Hidden_Field_Value { get; set; }

    }

    public class SurveyAnswer : ISurveyAnswer
    {

        public string SessionID { get; set; }

        public List<IQuestionAnswer> QuestionAnswerList { get; set; }

        public List<IHiddenAnswer> HiddenAnswerList { get; set; }

        public SurveyAnswer()
        {
            QuestionAnswerList = new List<IQuestionAnswer>();
            HiddenAnswerList = new List<IHiddenAnswer>();
        }
    } 
```

现在接口在那里，我得到一个`500 (Internal Server Error)`

我用来建模绑定的 javascript 如下：

```
$('#submitbutton').click(function () {

            var answers = new Array();
            var hiddenfields = new Array();

            var formname = "#" + $("#formname").val();

            $(':input', formname).each(function () {

                if ($(this).is(":text") || $(this).is(":radio") || $(this).is(":checkbox")) 
                {
                    var answerObject = {
                        Column_ID: $(this).attr('data-column_id'),
                        Row_ID: $(this).attr('data-row_id'),
                        Value: $(this).attr('data-theValue')
                    };

                    answers.push(answerObject);
                }

                else if($(this).is(":hidden")) {
                    var hiddenObject = 
                    {
                        Hidden_Field_ID: $(this).attr('data-hidden_field_id'),
                        Hidden_Field_Value: $(this).attr('data-hidden_field_value')
                    }

                    hiddenfields.push(hiddenObject);
                }
            });

            $('textarea', formname).each(function () {
                var answerObject = {
                    Column_ID: $(this).attr('data-column_id'),
                    Row_ID: $(this).attr('data-row_id'),
                    Value: $(this).val(),
                };

                answers.push(answerObject);
            });

            var allAnswers = {
                SessionID: 0,
                QuestionAnswerList: answers,
                HiddenAnswerList: hiddenfields
            }

            postForm(allAnswers);
        }); 
```

控制器动作如下所示：

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult SubmitSurvey(SurveyAnswer answers)
        {
            // Dette tillader CORS
            Response.AppendHeader("Access-Control-Allow-Origin", "*");

            bc.SaveSurvey(answers);

            return null;
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T08:50:34.760

> 我究竟做错了什么？

您不能期望模型绑定器知道当它遇到视图模型`IQuestionAnswer`上的接口时`SurveyAnswer`它应该使用该`QuestionAnswer`类型。很高兴您已经声明了该接口的实现，但模型绑定器对此一无所知。

因此，您必须为接口编写一个自定义模型绑定器`IQuestionAnswer`（接口相同`IHiddenAnswer`）并指出您要使用哪个实现：

```
public class QuestionAnswerModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var type = typeof(QuestionAnswer);
        var model = Activator.CreateInstance(type);
        bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, type);
        return model;
    }
} 
```

这将在您的`Application_Start`：

```
ModelBinders.Binders.Add(typeof(IQuestionAnswer), new QuestionAnswerModelBinder()); 
```

# c# - Linq 关系连接

> ID：10812883
> 
> 赞同：0
> 
> 时间：2012-05-30T08:46:19.060
> 
> 标签：c#, linq, linq-to-entities

我正在使用实体框架，并且需要一种使用 linq 使集合可用的方法。我会表明我的意思。

我有 3 张桌子。

*   产品
*   产品选项
*   Product_ProductOption_Mappings

我正在使用该表在和`Product_ProductOption_Mappings`之间创建多对多关系。给定一个特定的产品，我想提取它的产品选项集合。`Product``ProductOptions`

```
using((Model.Entities context = new Model.Entities())
{
    var options = context.Products
            .Where(p => p.ID == 1)
            .First()
            .Product_ProductOption_Mappings.ProductOptions.ToList();
} 
```

现在这是不正确的，但它旨在将一个列表返回`ProductOptions`到`Products`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:14:17.260

如果您的多对多表仅包含管理关系所需的两个 Id，则 EF 应该支持从您的概念模型中隐藏该链接表。基本上，您的概念模型中应该只有一个 Product 和 ProductOption 实体，它们之间存在多对多关联。在下面的示例中，我将产品中包含的导航属性命名为“选项”。

然后，您应该能够执行以下操作：

```
using((Model.Entities context = new Model.Entities())
{
    var options = context.Products
        .Single(p => p.ID == 1)
        .Options
        .ToList();
} 
```

来解决你的问题。

# extjs - 如何使用 Cordova/PhoneGap 构建煎茶应用程序

> ID：10812888
> 
> 赞同：3
> 
> 时间：2012-05-30T08:46:50.137
> 
> 标签：extjs, build, cordova

对于客户端，我需要使用 Sencha Touch 和 Cordova 构建本机应用程序。

为了提高性能，我使用 SDK 工具中的命令“sencha app build package”来缩小 JavaScript 源代码。

如果我使用 Sencha 进行开发，使用 Corova 进行 webview，则没有问题。但我需要使用 Sencha 无法使用的 Cordova 函数（如 FileSystem，...）。

问题是，当我使用“sencha app build package”时，我会遇到类似`[ERROR] ReferenceError: Can't find variable: fileSystem`.

我阅读了很多关于 Sencha + Cordova 的帖子，但没有一篇谈论使用 Cordova + Sencha 构建/缩小源代码。

有没有人遇到过这个问题，你是如何解决的？

此致

**2012 年 5 月 31 日更新**

对于需要访问cordova变量的每个方法，我使用一个名为 CordovaFunctions.js 的文件，并且我的 app.js 和其他视图/控制器调用 CordovaFunctions.js 中的方法...

这是我的 app.json ：

```
{
/**
 * The application's namespace, used by Sencha Command to generate classes
 */
"name": "ImageDownloader",

/**
 * The file path to this application's front HTML document, relative to this app.json file
 */
"indexHtmlPath": "index.html",

/**
 * The absolute URL to this application in development environment, i.e: the URL to run this application
 * on your web browser during development, e.g: "http://localhost/myapp/index.html".
 *
 * This value is needed when build to resolve your application's dependencies if it requires server-side resources
 * that are not accessible via file system protocol.
 */
"url": null,

/**
 * List of all JavaScript assets in the right execution order.
 * Each item is an object with the following format:
 *      {
 *          "path": "path/to/script.js" // Relative path to this app.json file
 *          "update": "delta"           // (Optional)
 *                                      //  - If not specified, this file will only be loaded once, and
 *                                      //    cached inside localStorage until this value is changed.
 *                                      //  - "delta" to enable over-the-air delta update for this file
 *                                      //  - "full" means full update will be made when this file changes
 *
 *      }
 */
"js": [

    {
       "path": "cordova-1.7.0.js"
    },/*
    {
       "path": "CordovaFunctions.js"
    },*/
    {
        "path": "sdk/sencha-touch.js"
    }
    ,
    {
        "path": "app.js",
        "bundle": true,  // Indicates that all class dependencies are concatenated into this file when build 
        "update": "delta"
    }
],

/**
 * List of all CSS assets in the right inclusion order.
 * Each item is an object with the following format:
 *      {
 *          "path": "path/to/item.css" // Relative path to this app.json file
 *          "update": "delta"          // (Optional)
 *                                     //  - If not specified, this file will only be loaded once, and
 *                                     //    cached inside localStorage until this value is changed to either one below
 *                                     //  - "delta" to enable over-the-air delta update for this file
 *                                     //  - "full" means full update will be made when this file changes
 *
 *      }
 */
"css": [
    {
        "path": "resources/css/app.css",
        "update": "delta"
    }
],

/**
 * Used to automatically generate cache.manifest (HTML 5 application cache manifest) file when you build
 */
"appCache": {
    /**
     * List of items in the CACHE MANIFEST section
     */
    "cache": [
        "index.html"
    ],
    /**
     * List of items in the NETWORK section
     */
    "network": [
        "*"
    ],
    /**
     * List of items in the FALLBACK section
     */
    "fallback": []
},

/**
 * Extra resources to be copied along when build
 */
"resources": [
    "resources/images",
    "resources/icons",
    "resources/startup"
],

/**
 * File / directory name matchers to ignore when copying to the builds, must be valid regular expressions
 */
"ignore": [
    "\.svn$"
],

/**
 * Directory path to store all previous production builds. Note that the content generated inside this directory
 * must be kept intact for proper generation of deltas between updates
 */
"archivePath": "archive",

/**
 * Default paths to build this application to for each environment
 */
"buildPaths": {
    "testing": "build/testing",
    "production": "build/production",
    "package": "build/package",
    "native": "build/native"
},

/**
 * Build options
 */
"buildOptions": {
    "product": "touch",
    "minVersion": 3,
    "debug": false,
    "logger": "no"
},

/**
 * Uniquely generated id for this application, used as prefix for localStorage keys.
 * Normally you should never change this value.
 */
"id": "dfbad430-a63b-11e1-a218-a1757e9a8324"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:55:36.053

在您的 app.json 配置文件中，您需要告诉 Sencha 构建命令您的应用程序需要 phoneGap 库。将其添加到 js 节点：

```
/**
 * List of all JavaScript assets in the right execution order.
 * Each item is an object with the following format:
 *      {
 *          "path": "path/to/script.js" // Relative path to this app.json file
 *          "update": "delta"           // (Optional)
 *                                      //  - If not specified, this file will only be loaded once, and
 *                                      //    cached inside localStorage until this value is changed.
 *                                      //  - "delta" to enable over-the-air delta update for this file
 *                                      //  - "full" means full update will be made when this file changes
 *
 *      }
 */
"js": [
    {
        "path": "sdk/sencha-touch.js"
    },
    {
        "path": "cordova-1.5.0.js"
    },
    {
        "path": "app.js",
        "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
        "update": "delta"
    }
], 
```

# php - 在安全方面，将字符串转换为 int 的首选方法是什么？

> ID：10812892
> 
> 赞同：1
> 
> 时间：2012-05-30T08:47:09.363
> 
> 标签：php, performance, security, type-conversion

有多种方法可以将字符串转换为整数。

```
$someString = substr($input, strripos($input, "_") + 1);
$i = $someString + 0;
$i = (int) $someString;
$i = intval($someString); 
```

`$someString`来自使用输入，因此可能必须考虑到这一点。哪个选项“更好”或具有最负面的副作用？（即性能方面，安全方面）

`$input`可以看起来像`1_abcd_1`or `1_abcd_2`。这是相当固定的——除了这个例子中组成的*abcd 。*此输入来自单选按钮，但用户始终可以根据需要更改其数据。因此，我必须考虑恶意数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:50:15.710

我更喜欢类型转换，`$i = (int) $someString;`这很清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:28:50.717

由于输入被转换为数字，因此不存在安全问题。性能差异可以忽略不计。但是，在某些情况下，第一个可能不会产生整数。

例如，让`$input = '19.99';`.

```
$i = $someString + 0;    // $i = 19.99 
```

其他两种情况是等效的，但`$i = (int) $someString;`平均比 快 56% `$i = intval($someString);`。由于两者都在几毫秒内执行，因此性能差异通常可以忽略不计，除非它们发生在相当大的循环中。

```
$i = (int) $someString;      // $i = 9
$i = intval($someString);    // $i = 9 
```

关于安全问题：如果您希望`$input`始终采用特定格式（*例如* **#_xxxx_#**），那么您应该验证它*是否*采用该格式。扩展 Jack 的评论 — 如果您使用 PHP >= 5.2.0，您可以使用正则表达式检查输入的格式。

```
<?php
$input = '1_abcd_1';

// Set the desired format
$filter_options = array(
    'options' => array(
        // choose a regular expression that matches your format
        'regexp' => '/^[\d]_[a-z]{4}_[\d]$/'
    )
);

$format = filter_var($input, FILTER_VALIDATE_REGEXP, $filter_options);
if ($format !== false) {
    // process input
    $someString = substr($format, strripos($format, "_") + 1);
    $i = (int) $someString;
    echo '$i = ', $i;
} else {
    // Handle invalid format
    echo 'Malformed data. Potentially malicious';
}
?> 
```

这将完全拒绝以下内容：

```
0xfe
bob
j_xtyz_5
1_wxyz_22
21_abcd_1
1_Abcd_2 
```

自然，您会根据需要调整正则表达式。

也可以看看：

*   [Dev Shed 教程：使用过滤器扩展检查正则表达式 - PHP](http://www.devshed.com/c/a/PHP/Working-with-Regular-Expressions-with-Filters-in-PHP-5/2/)
*   [PHP 手册：filter_var](http://php.net/manual/en/function.filter-var.php)

如果你没有使用 PHP >= 5.2.0，你可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)。

```
<?php
$input = '1_abcd_2';

$valid = preg_match('/^[\d]_[a-z]{4}_[\d]$/', $input);
if ($valid) {
    // process input
    $someString = substr($input, strripos($input, "_") + 1);
    $i = (int) $someString;
    echo '$i = ', $i;
} else {
    // Handle invalid format
    echo 'Malformed data. Potentially malicious';
}
?> 
```

验证输入的格式让您立即知道数据是否被篡改。然后你可以采取相应的行动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T09:12:56.527

如果您想确定 $someString 仅是数字，您可以使用

```
if(is_numeric($someString)){
   // proceed your code if $someString is numeric
}else{
   // proceed your code if $someString is not numeric
} 
```

# javascript - 点击后隐藏提交按钮

> ID：10812893
> 
> 赞同：-1
> 
> 时间：2012-05-30T08:47:15.340
> 
> 标签：javascript, ajax

我有一个包含几行的表，通过单击每行上的提交按钮，每个表上的信息将发送到 ajax，并将插入到数据库中。点击后，我需要从表格中隐藏按钮。我怎样才能达到这个使命？这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#myform<?php echo $y; ?>").validate({
            debug: false,

            submitHandler: function(form) {

                $.post('process.php', $("#myform<?php echo $y; ?>").serialize(), function(data) {
                    $('#results<?php echo $y; ?>').html(data);
                });
            }
        });
    }); 
```

我的表格：

```
<form name="myform" id="myform<?php echo $y; ?>" action="" method="POST">  
 <input type="text" name="name" id="name<?php echo $y; ?>" size="30" value=""/>  
<input type="image" name="submit" id="accept<?php echo $y; ?>  " value="Submit" src="graphics/accept.png"> 
</form>

<div id="results<?php echo $y; ?>"><div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:49:14.483

`.hide()`在您的按钮上使用，例如`$("#mybutton").hide();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:54:51.857

如果您只想隐藏按钮，则可以使用。

```
$.post('process.php', $("#myform<?php echo $y; ?>").serialize(), function(data) {
      $('#results<?php echo $y; ?>').html(data);
      $('#accept<?php echo $y; ?>').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:57:25.070

使用[.hide()](http://api.jquery.com/hide/)。在你的情况下`$("#mybutton").hide()`

# android - 在android应用程序中保存更改数据库的状态

> ID：10812895
> 
> 赞同：0
> 
> 时间：2012-05-30T08:47:18.770
> 
> 标签：android, database, sqlite

我正在开发一个 android 应用程序，其中第一页是主页。单击主页上的任何项目时，用户可以查看该项目的详细信息。详细信息取自 sqlite 数据库，用户可以在应用程序中接受或拒绝。在用户接受或拒绝时，详细信息将从详细信息列表中删除。但是，在详情页点击返回按钮时，当用户再次回到首页时，会出现这样的问题，当用户再次点击同一个项目时，会显示所有详情而不保存状态。

例如，如果我的 item1 里面有 10 个详细信息..我在详细信息页面中查看了所有 10 个详细信息..然后接受 2..所以总共剩下 8..但是当我单击返回并到达主页并再次单击 item1 时，它再次显示所有 10...并且不记录在接受 2 时发生的更改。

如何解决？

* * *

这是我们正在处理的代码：

```
package com.sql.nigel;

import java.util.ArrayList;

    public class listActivity extends ListActivity implements
    android.view.View.OnClickListener,OnItemClickListener{
    private ArrayList<listActivity2> m_orders = null;
    private OrderAdapter m_adapter;
    private Runnable viewOrders;
    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper=new MySQLiteHelper(this);
    private String[] leave_Col =   {"Requester","LeaveType","No_of_Days","FromDate","ToDate"};
    private String[] Cart_Col = {"CartNo","Date","Description","TotalValue","TotalTax","BudgetValue","UniqueNo"};
    private String[] Time_Col = {"Name","Date","Project","Client","Tasks","FromDate","ToDate"};
    private String[] Travel_Col = {"Requester","Purpose","Location","Cost","Date","Description","FromDate","ToDate","Hotel","Taxi","AdditionalExp"};
    private String[] Invoice_Col = {"InvoiceNo","VendorName","Date","InvoiceValue","Date","VendorNo","PostingDate","FiscalYear","Pln_Group"};
    private String[] Purchase_Col = {"PONo","Date","Vendor","OrderValue","PurchasingOrg","ApprovedVendor","Requester","Notes","RelatedInfo","QualityScore"};
    String table_name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listactivity);

        database = dbHelper.getWritableDatabase();
        table_name=this.getIntent().getExtras().getString("activity");        

        Button backButton = (Button)findViewById(R.id.back);
        backButton.setOnClickListener(this);

        Button selectButton = (Button)findViewById(R.id.select);
        selectButton.setOnClickListener(this);

        /*    ImageView rightarrow = (ImageView)findViewById(R.id.rightarrow);
        rightarrow.setOnClickListener(this);*/

        m_orders = new ArrayList<listActivity2>();
        this.m_adapter = new OrderAdapter(this, R.layout.listactivity2, m_orders);
        setListAdapter(this.m_adapter);

        ListView listView=(ListView)findViewById(android.R.id.list);
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
                if(table_name.compareTo("LeaveRequest")==0){
                    Intent intent = new Intent(listActivity.this, leavedetails.class); 
                    Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent                    
               }else if(table_name.compareTo("Time")==0){
                   Intent intent = new Intent(listActivity.this, timedetails.class);
                   Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent
                }else if(table_name.compareTo("ShoppingCart")==0){
                    Intent intent = new Intent(listActivity.this, cartdetails.class); 
                    Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent
                }else if(table_name.compareTo("Invoice")==0){
                    Intent intent = new Intent(listActivity.this, invoicedetails.class);
                    Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent
                }else if(table_name.compareTo("PurchaseOrder")==0){
                    Intent intent = new Intent(listActivity.this, purchasedetails.class); 
                    Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent 
                }else if(table_name.compareTo("Travel")==0){
                    Intent intent = new Intent(listActivity.this, traveldetails.class);
                    Bundle b = new Bundle(); //Create bundle
                    b.putInt("key",position); //Your id 
                    intent.putExtras(b); //Put your id to your next Intent 
                    startActivity(intent); //Call intent

                }

            }
            });

        viewOrders = new Runnable(){
            public void run() {
                getOrders();
            }
        };

        Thread thread =  new Thread(null, viewOrders, "MagentoBackground");
        thread.start();

    }
    private Runnable returnRes = new Runnable() {

        public void run() {
            if(m_orders != null && m_orders.size() > 0){
                m_adapter.notifyDataSetChanged();
                for(int i=0;i<m_orders.size();i++)
                m_adapter.add(m_orders.get(i));
            }

            m_adapter.notifyDataSetChanged();
        }
    };
    private void getOrders(){
          try{
              m_orders = new ArrayList<listActivity2>();

              if(table_name.compareTo("LeaveRequest")==0){display_Leave();                            
              }else if(table_name.compareTo("Time")==0){display_Time(); 
              }else if(table_name.compareTo("ShoppingCart")==0){display_Cart(); 
              }else if(table_name.compareTo("Invoice")==0){display_Invoice(); 
              }else if(table_name.compareTo("PurchaseOrder")==0){display_Purchase(); 
              }else if(table_name.compareTo("Travel")==0){display_Travel(); 
              }

              Log.i("ARRAY", ""+ m_orders.size());
            } catch (Exception e) { 
              Log.e("BACKGROUND_PROC", e.getMessage());
            }
            runOnUiThread(returnRes);
            database.close();
        }
    public void display_Leave(){
          TextView heading=(TextView)findViewById(R.id.heading);
          heading.setText("Leave Request");
          Cursor c_L = database.query("LeaveRequest",leave_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
          o1.setOrdertext1(""+c_L.getString(0));
          o1.setOrdertext2(""+c_L.getString(2)+" days");
          o1.setOrdertext3(""+c_L.getString(1)+" ");
          o1.setOrdertext4(""+c_L.getString(3)+" to "+c_L.getString(4));                        
          m_orders.add(o1);
          c_L.moveToNext();              
          } c_L.close();            
      }
    public void display_Time(){
      TextView heading=(TextView)findViewById(R.id.heading);
      heading.setText("Time Booking");
      Cursor c_L = database.query("Time",Time_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
        o1.setOrdertext1(""+c_L.getString(0));
        o1.setOrdertext2(""+c_L.getString(3));
        o1.setOrdertext3(""+c_L.getString(2)+" ");
        o1.setOrdertext4(""+c_L.getString(1));                          
        m_orders.add(o1);
        c_L.moveToNext();              
          } c_L.close();            
    }
    public void display_Cart(){
          TextView heading=(TextView)findViewById(R.id.heading);
          heading.setText("Shopping Cart");
          Cursor c_L = database.query("ShoppingCart",Cart_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
          o1.setOrdertext1(""+c_L.getString(0));
          o1.setOrdertext2("");
          o1.setOrdertext3(""+c_L.getString(2)+" ");
          o1.setOrdertext4(""+c_L.getString(1));                        
          m_orders.add(o1);
          c_L.moveToNext();              
          } c_L.close();            
      }
    public void display_Invoice(){
          TextView heading=(TextView)findViewById(R.id.heading);
          heading.setText("Invoice Approval");
          Cursor c_L = database.query("Invoice",Invoice_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
          o1.setOrdertext1(""+c_L.getString(1));
          o1.setOrdertext2("");
          o1.setOrdertext3(""+c_L.getString(0)+" ");
          o1.setOrdertext4(""+c_L.getString(2));                        
          m_orders.add(o1);
          c_L.moveToNext();              
          } c_L.close();            
      }
    public void display_Purchase(){
      TextView heading=(TextView)findViewById(R.id.heading);
      heading.setText("Purchase Order");
      Cursor c_L = database.query("PurchaseOrder",Purchase_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
        o1.setOrdertext1(""+c_L.getString(0));
        o1.setOrdertext2(""+c_L.getString(3));
        o1.setOrdertext3(""+c_L.getString(2)+" ");
        o1.setOrdertext4(""+c_L.getString(1));                          
        m_orders.add(o1);
        c_L.moveToNext();              
          } c_L.close();            
    }
    public void display_Travel(){
          TextView heading=(TextView)findViewById(R.id.heading);
          heading.setText("Travel Approval");
          Cursor c_L = database.query("Travel",Travel_Col, null, null, null, null, null);
          c_L.moveToFirst();        
          while (!c_L.isAfterLast()) {              
          listActivity2 o1 = new listActivity2();             
          o1.setOrdertext1(""+c_L.getString(1));
          o1.setOrdertext2(""+c_L.getString(3));
          o1.setOrdertext3(""+c_L.getString(2)+" ");
          o1.setOrdertext4(""+c_L.getString(4));                        
          m_orders.add(o1);
          c_L.moveToNext();              
          } c_L.close();            
      }
    private class OrderAdapter extends ArrayAdapter<listActivity2> {

        private ArrayList<listActivity2> items;

        public OrderAdapter(Context context, int textViewResourceId, ArrayList<listActivity2> items) {
                super(context, textViewResourceId, items);
                this.items = items;
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.listactivity2, null);
                }
                listActivity2 o = items.get(position);
                if (o != null) {
                        TextView t1 = (TextView) v.findViewById(R.id.textList1);
                        TextView t2 = (TextView) v.findViewById(R.id.textList2);
                        TextView t3 = (TextView) v.findViewById(R.id.textList3);
                        TextView t4 = (TextView) v.findViewById(R.id.textList4);
                        if (t1 != null) {
                              t1.setText(o.getOrdertext1());           
                        }
                        if(t2 != null){
                              t2.setText(o.getOrdertext2());
                        }
                        if(t3 != null){
                              t3.setText(o.getOrdertext3());
                        }
                        if(t4 != null){
                              t4.setText(o.getOrdertext4());
                        }
                }
                return v;
        }
}

    public void onClick(View v) {

        switch(v.getId())
        {
        case R.id.back:
            Intent backIntent = new Intent(listActivity.this, SqlTwoActivity.class); 

            startActivity(backIntent);                  
            break;

        case R.id.select:
            Intent selectIntent = new Intent(listActivity.this, checkappear.class);
            selectIntent.putExtra("checkappear", table_name);
            startActivity(selectIntent);                    
            break;  
        /*  
        case R.id.rightarrow:
            Intent rightarrow = new Intent(listActivity.this, listActivity.class);
            startActivity(rightarrow);                  
            break;*/        
        }
    }
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:36:36.637

很难在您的代码中找到数据库调用。一些一般准则：

首先，您需要将所有对数据库的调用封装在单独的线程中。完成后始终关闭游标和数据库连接。最好是使用[AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)。查看一些将 SQLite 与 AsyncTask 结合使用的教程 - 它会自动为您处理单独的线程。

第二 - 阅读有关[Activity Stack](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)的信息，以便 @Peter 告诉您的内容有意义。

# jquery - jQuery UI Tabs - 标签栏的底部

> ID：10812900
> 
> 赞同：0
> 
> 时间：2012-05-30T08:47:52.297
> 
> 标签：jquery, css, jquery-ui, jquery-ui-tabs

我想在我的标签栏中包含一个徽标图像，但这会导致标签不在标签栏的底部。这是我正在使用的代码：

```
<div id="tabs">
  <div id="logo">
    <img src="./img/logo.png">
  </div>
  <ul>
    <li><a href="./dashboard.html">Dashboard</a></li>
    <li><a href="./eventlog.html">Event Log</a></li>
    <li><a href="#">Reports</a></li>
    <li><a href="#">Management</a></li>
  </ul>
</div> 
```

我附上它目前的样子的截图：

![在此处输入图像描述](../Images/68e73d6ac8923bd4de1b061a0db90a49.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:53:23.853

尝试添加新行（我的意思是`<br />`）：

```
<div id="tabs">
  <div id="logo">
    <img src="./img/logo.png">
  </div>
  <br />
  <ul>
    <li><a href="./dashboard.html">Dashboard</a></li>
    <li><a href="./eventlog.html">Event Log</a></li>
    <li><a href="#">Reports</a></li>
    <li><a href="#">Management</a></li>
  </ul>
</div> 
```

或者标签栏和徽标不应该`<div>`像这样：

```
<div id="logo">
  <img src="./img/logo.png">
</div>
<div id="tabs">
  <ul>
    <li><a href="./dashboard.html">Dashboard</a></li>
    <li><a href="./eventlog.html">Event Log</a></li>
    <li><a href="#">Reports</a></li>
    <li><a href="#">Management</a></li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:53:48.267

制作`<li>`logo的高度，并`margin-top`用图片的高度和图片的高度之差设置a `<li>`。

# xml - XSLT - 将命名空间添加到输出

> ID：10812901
> 
> 赞同：1
> 
> 时间：2012-05-30T08:47:57.303
> 
> 标签：xml, xslt, namespaces

我正在尝试生成 XML 输出，并且我已经创建了一个 XSLT 来执行此操作。但是，根节点缺少一些名称间距。如何将命名空间添加到 XML 结构的根元素。这是我正在使用的 XSLT：

## XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
    xmlns:doc="urn:sapcom:document:sap:rfc:functions" xmlns:r="http://www.castiron.com/response" exclude-result-prefixes="r">
    <xsl:output method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:element name="imageScene7Request">
            <xsl:element name="productIds">
                <xsl:for-each select="r:productGetAllByIdsResponse/r:payload/r:products">
                    <xsl:value-of select="r:id"/>
                    <xsl:if test="position() != last()">
                        <xsl:text>,</xsl:text>
                    </xsl:if>
                </xsl:for-each>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

我想添加到根目录的命名空间`http://www.castiron.com/response`

## 输入 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<productGetAllByIdsResponse xmlns="http://www.castiron.com/response">
    <rcode>0</rcode>
    <rmessage>Success</rmessage>
    <payload>
        <products>
            <id>4022280</id>
        </products>
        <products>
            <id>4022280</id>
        </products>
    </payload>
</productGetAllByIdsResponse> 
```

您会看到，当您运行时，它会为您提供：

```
<?xml version="1.0" encoding="utf-8"?>
<imageScene7Request>
    <productIds>4022280,4022280</productIds>
</imageScene7Request> 
```

但是我想要这个：

```
<?xml version="1.0" encoding="utf-8"?>
<imageScene7Request xmlns="http://www.castiron.com/response">
    <productIds>4022280,4022280</productIds>
</imageScene7Request> 
```

## 回复@dbaseman

这很有效，但是它随后为第二个标签提供了一个空命名空间，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<imageScene7Request xmlns="http://www.castiron.com/response">
    <productIds xmlns="">4022280,4022280</productIds>
</imageScene7Request> 
```

有没有办法消除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:10:46.273

由于您静态地知道结果元素的名称是什么，因此最好使用文字结果元素而不是 xsl:element：

```
 <xsl:template match="/">
    <imageScene7Request xmlns="http://www.castiron.com/response">
        <productIds>
            <xsl:for-each select="r:productGetAllByIdsResponse/r:payload/r:products">
                <xsl:value-of select="r:id"/>
                <xsl:if test="position() != last()">
                    <xsl:text>,</xsl:text>
                </xsl:if>
            </xsl:for-each>
        </productIds>
    </imageScene7Request>
</xsl:template> 
```

如果确实使用 xsl:element，则需要确保使用命名空间属性来确保元素位于正确的命名空间中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:10:17.903

我认为您只需要在样式表中明确指定命名空间：

```
<xsl:element name="imageScene7Request" namespace="http://www.castiron.com/response">
    <xsl:element name="productIds">
       ...
    </xsl:element>
</xsl:element> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:24:39.810

这行得通吗？

```
<xsl:stylesheet xmlns="http://www.castiron.com/response" ...> 
```

这会将 XSLT 中所有元素的命名空间设置为`http://www.castiron.com/response`

# python - Python自定义集合交集

> ID：10812906
> 
> 赞同：5
> 
> 时间：2012-05-30T08:48:03.997
> 
> 标签：python, python-2.x, set-intersection

因此，有一种简单的方法可以通过 set.intersection() 计算两个集合的交集。但是，我有以下问题：

```
class Person(Object):                    
    def __init__(self, name, age):                                                      
        self.name = name                                                                
        self.age = age                                                                  

l1 = [Person("Foo", 21), Person("Bar", 22)]                                             
l2 = [Person("Foo", 21), Person("Bar", 24)]                                             

union_list = list(set(l1).union(l2))                                           
# [Person("Foo", 21), Person("Bar", 22), Person("Bar", 24)] 
```

（`Object`是我的 ORM 提供的一个基类，它实现了基本`__hash__`和`__eq__`功能，它基本上将类的每个成员都添加到哈希中。换句话说，`__hash__`返回的将是类的每个元素的哈希）

在这个阶段，我想只运行一个集合交集操作`.name`，以找到，说，`Person('Bar', -1).intersection(union_list) #= [Person("Bar", -1), Person("Bar", 22), Person("Bar", 24)]`。（此时的典型`.intersection()`不会给我任何东西，我不能覆盖`__hash__`或`__eq__`在`Person`课堂上，因为这会覆盖原来的集合并集（我*认为*）

在 Python 2.x 中执行此操作的最佳方法是什么？

*编辑：请注意，解决方案*不必依赖`set`. 但是，我需要找到联合，然后是交叉点，所以感觉这适合一组（但我愿意接受使用你认为值得的任何魔法的解决方案，只要它解决了我的问题！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:18:20.803

听上去像

```
>>> class Person:
...     def __init__(self, name, age):
...         self.name = name
...         self.age = age
...     def __eq__(self, other):
...         return self.name == other.name
...     def __hash__(self):
...         return hash(self.name)
...     def __str__(self):
...         return self.name
...
>>> l1 = [Person("Foo", 21), Person("Bar", 22)]
>>> l2 = [Person("Foo", 21), Person("Bar", 24)]
>>> union_list = list(set(l1).union(l2))
>>> [str(l) for l in union_list]
['Foo', 'Bar'] 
```

是你想要的，因为`name`是你唯一的钥匙？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:58:53.990

我讨厌回答自己的问题，所以我暂时不会将其标记为“答案”。

原来这样做的方法如下：

```
import types
p = Person("Bar", -1)
new_hash_method = lambda obj: hash(obj.name)
p.__hash__ = types.MethodType(new_hash_method, p)
for i in xrange(0, len(union_list)):
    union_list[i].__hash__ = types.MethodType(new_hash_method, union_list[i])
set(union_list).intersection(p) 
```

它肯定很脏并且依赖于`types.MethodType`，但它没有迄今为止提出的最佳解决方案（glglgl 的解决方案）那么密集，因为我的实际`union_list`可能包含数千个项目，所以这将节省我每次运行时重新创建对象这个相交程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T07:15:13.250

怎么样：

```
d1 = {p.name:p for p in l1}
d2 = {p.name:p for p in l2}

intersectnames = set(d1.keys()).intersection(d2.keys)
intersect = [d1[k] for k in intersectnames] 
```

扔给`intersectnames`你的 ORM 可能会更快，在这种情况下你不会构建字典，只需在列表中收集名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T09:09:55.937

这很笨拙，但是...

```
set(p for p in union_list for q in l2 if p.name == q.name and p.age != q.age) | (set(p for p in l2 for q in union_list if p.name == q.name and p.age != q.age))
# {person(name='Bar', age=22), person(name='Bar', age=24)} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T09:50:29.653

如果您希望`age`与比较无关，您应该覆盖`__hash__()`and `__eq__()`in`Person`尽管您的`Object`.

如果您仅在此（和类似）上下文中需要此行为，您可以创建一个包装器对象，其中包含`Person`并且行为不同，例如

```
class PersonWrapper(Object):
    def __init__(self, person):
        self.person = person
    def __eq__(self, other):
        if hasattr(other, 'person'):
            return self.person.name == other.person.name
        else:
            return self.person.name == other.name
    def __hash__(self):
        return hash(self.person.name) 
```

然后做

```
union_list = list(set(PersonWrapper(i) for i in l1).union(PersonWrapper(i) for i in l2))
# [Person("Foo", 21), Person("Bar", 22), Person("Bar", 24)] 
```

（未经测试）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T08:59:04.563

`__hash__`如果你想使用这样的集合，你必须重写和比较方法。

如果你不这样做，那么

```
Person("Foo", 21) == Person("Foo", 21) 
```

永远是假的。

如果您的对象由 ORM 管理，那么您必须检查它如何比较对象。通常它只查看对象 id，并且只有在两个对象都被管理的情况下，比较才有效。如果您尝试将您从 ORM 获得的对象与您在保存到数据库之前自己创建的实例进行比较，那么它们可能会有所不同。无论如何，ORM 不应该有您提供自己的比较逻辑的问题。

但是如果由于某些原因你不能覆盖`__hash__`and `__eq__`，那么你不能使用集合来与原始对象进行交集和联合。你可以：

*   自己计算交集/联合
*   创建一个可比较的包装类：

    ```
    class Person:                    
        def __init__(self, name, age):                                                      
            self.name = name                                                                
            self.age = age                                                                  

    l1 = [Person("Foo", 21), Person("Bar", 22)]                                             
    l2 = [Person("Foo", 21), Person("Bar", 24)]                                             

    class ComparablePerson:
        def __init__(self, person):
            self.person = person

        def __hash__(self):
            return hash(self.person.name) + 31*hash(self.person.age)

        def __eq__(self, other):
            return (self.person.name == other.person.name and
                    self.person.age == other.person.age)
        def __repr__(self):
            return "<%s - %d>" % (self.person.name, self.person.age)

    c1 = set(ComparablePerson(p) for p in l1)
    c2 = set(ComparablePerson(p) for p in l2)

    print c1
    print c2
    print c1.union(c2)
    print c2.intersection(c1) 
    ```

# sql - 使用 UNION 将两个语句与 LIMITS 合并

> ID：10812910
> 
> 赞同：22
> 
> 时间：2012-05-30T08:48:20.700
> 
> 标签：sql, sqlite

有没有办法将这两个语句组合成一个而没有重复的条目？

```
SELECT * FROM Seq where JULIANDAY('2012-05-25 19:02:00')<=JULIANDAY(TimeP) 
         order by TimeP limit 50

SELECT * FROM Seq where JULIANDAY('2012-05-29 06:20:50')<=JULIANDAY(TimeI)  
         order by TimeI limit 50 
```

我的第一个明显的尝试不支持`SQLITE`（语法错误：限制子句应该在 UNION 之后而不是之前）：

```
SELECT * FROM Seq where JULIANDAY('2012-05-25 19:02:00')<=JULIANDAY(TimeP) 
         order by TimeP limit 50
UNION
SELECT * FROM Seq where JULIANDAY('2012-05-29 06:20:50')<=JULIANDAY(TimeI)
         order by TimeI limit 50 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-30T08:53:44.507

使用子查询并在其中执行限制。

```
SELECT  *
FROM    (   SELECT  * 
            FROM    Seq 
            WHERE   JULIANDAY('2012-05-25 19:02:00') <= JULIANDAY(TimeP) 
            ORDER BY TimeP
            LIMIT 50
        )
UNION
SELECT  *
FROM    (   SELECT  * 
            FROM    Seq 
            WHERE   JULIANDAY('2012-05-29 06:20:50') <= JULIANDAY(TimeI) 
            ORDER BY TimeI
            LIMIT 50
        ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T09:04:16.983

查询分阶段处理：

1.  `FROM`子句和所有连接；
2.  `WHERE`子句和所有谓词。因此，如果您想查看`NULL`结果集中的值，则永远不应该过滤`OUTER`该部分中的 -joined 表列`WHERE`，因为这会将您的查询变成`INNER`连接；
3.  `GROUP BY`和`HAVING`条款；
4.  查询组合：`UNION`, `INTERSECT`,`EXCEPT`或`MINUS`
5.  `ORDER BY`
6.  `LIMIT`

因此，正如其他人指出的那样，使用`ORDER BY`and `LIMIT` *before* `UNION`子句在语法上是错误的。您应该使用子查询：

```
SELECT *
  FROM (SELECT * FROM Seq
         WHERE JULIANDAY('2012-05-25 19:02:00') <= JULIANDAY(TimeP) 
         ORDER BY TimeP LIMIT 50) AS tab1
UNION
SELECT *
  FROM (SELECT * FROM Seq
         WHERE JULIANDAY('2012-05-29 06:20:50') <= JULIANDAY(TimeI)  
         ORDER BY TimeI LIMIT 50) AS tab2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T08:56:11.700

```
 SELECT * from 
           (SELECT * 
           FROM Seq 
           where JULIANDAY('2012-05-25 19:02:00')<=JULIANDAY(TimeP) 
           order by TimeP limit 50)
           UNION
           SELECT * from 
           (SELECT * 
           FROM Seq 
           where JULIANDAY('2012-05-29 06:20:50')<=JULIANDAY(TimeI)
           order by TimeI limit 50) 
```

这应该可以解决问题

# ruby-on-rails-3 - 内存调用和数据库调用的区别

> ID：10812913
> 
> 赞同：0
> 
> 时间：2012-05-30T08:48:32.437
> 
> 标签：ruby-on-rails-3, performance, has-many-through, rails-console

好的，我第一个项目的主要问题是速度。我不知道在内存和数据库调用之间哪个是哪个。我有两个问题：

1.  **如何区分数据库调用和内存调用（如果它是这样调用的）？**
2.  我遇到了一个未定义的方法错误，它指向

    ```
    `r.status_messages.last.name` 
    ```

    所以我在 Rails 控制台中对其进行了测试（我感觉这与我的第一个问题有关。）

    简而言之，
    *   r.status_messages.last.name 不起作用（读取为 2 个命令，r.status_messages.last & .name）
    *   但是，h = r.status_messages.last THEN h.name, WORKS
    *   但是，当我这样做时，r.status_messages.last.name，它现在可以工作了。
        **这里发生了什么？**

* * *

详细信息
request_form has_many status_messages ：通过 request_statuses
Rails 3.2.3、Ruby193、Windows 7 Prof、NetBeans IDE 6.9.1
Rails 控制台

```
r = RequestForm.find(25) 
r = RequestForm.find(25)
  [1m[35mRequestForm Load (1.0ms)[0m  SELECT `request_forms`.* FROM `request_forms` WHERE `request_forms`.`id` = ? LIMIT 1  [["id", 25]]
#<RequestForm id: 25, control_no: 1, requested: true, cds_requested: nil, cds_returned: nil, approval: false, cds_released: nil, cds_recycled: nil, defective_cds: 0, request_date: "2012-05-30", released_date: nil, user_id: 3, admin_id: nil, remarks: nil, created_at: "2012-05-30 07:13:50", updated_at: "2012-05-30 07:13:50">
r.status_messages
r.status_messages
[#<StatusMessage id: 1, description: "can be edited until sent", user_id: nil, created_at: "2012-05-30 07:31:02", updated_at: "2012-05-30 07:31:02", name: "Created">, #<StatusMessage id: 2, description: "visible to admin", user_id: nil, created_at: "2012-05-30 07:32:51", updated_at: "2012-05-30 07:32:51", name: "Sent">]
  [1m[36mStatusMessage Load (1.0ms)[0m  [1mSELECT `status_messages`.* FROM `status_messages` INNER JOIN `request_statuses` ON `status_messages`.`id` = `request_statuses`.`status_message_id` WHERE `request_statuses`.`request_form_id` = 25[0m
r.status_messages.last
r.status_messages.last
#<StatusMessage id: 2, description: "visible to admin", user_id: nil, created_at: "2012-05-30 07:32:51", updated_at: "2012-05-30 07:32:51", name: "Sent">
r.status_messages.last
.name
r.status_messages.last
#<StatusMessage id: 2, description: "visible to admin", user_id: nil, created_at: "2012-05-30 07:32:51", updated_at: "2012-05-30 07:32:51", name: "Sent">
.name
SyntaxError: (irb):6: syntax error, unexpected '.'
.name
 ^
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
r.status_messages.last
.description
r.status_messages.last
#<StatusMessage id: 2, description: "visible to admin", user_id: nil, created_at: "2012-05-30 07:32:51", updated_at: "2012-05-30 07:32:51", name: "Sent">
.description
SyntaxError: (irb):10: syntax error, unexpected '.'
.description
 ^
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
h = r.status_messages.last

h = r.status_messages.last
#<StatusMessage id: 2, description: "visible to admin", user_id: nil, created_at: "2012-05-30 07:32:51", updated_at: "2012-05-30 07:32:51", name: "Sent">

h.name
h.name
"Sent"
r.status_messages.last.name
r.status_messages.last.name
"Sent"
r.status_messages.last.description
r.status_messages.last.description
"visible to admin" 
```

编辑：我已经说明了这个问题，关于划分为两个查询。抱歉不清楚。

我输入`r.status_messages.last.name` *然后按*回车

但是 rails 控制台已将其剪切为`r.status_messages.last`and `.name`。这导致了语法错误。

`name`并且`description`是状态消息的属性。

但是，当我保存`r.status_messages.last`到变量时`h`

`h.name`并`h.description`工作。

令人惊讶的是：`r.status_messages.last.name`之后也工作得很好。

1.  **如何区分数据库调用和内存调用（如果它是这样调用的）？** 我想要一个很好的参考，其中有一个表格或比较列表，比如`.size` *is to* `.length`。
2.  **造成这种分裂的原因是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T03:00:08.943

1.  那个时候延迟加载让我很困惑。这就是为什么我的应用程序有意外的数据库调用。不小心调用`:count`会用 sql COUNT 查询数据库。您可能想使用`to_a.size`.
2.  这是一个 nilClass 异常。中没有最后的状态消息`r.status_messages.last.name`。因此，`:name`对一个 nil 对象抛出了一个未定义的方法错误。
3.  正如@DaveNewton 所评论的，Netbeans 终端似乎是这里的问题。

# c# - 使用 StructureMap 连接不同的实现

> ID：10812918
> 
> 赞同：2
> 
> 时间：2012-05-30T08:48:44.730
> 
> 标签：c#, generics, interface, repository, structuremap

我有一个非常简单的通用存储库：

```
public interface IRepository<TEntity, TNotFound>
    where TEntity : EntityObject
    where TNotFound : TEntity, new()
{
    IList<TEntity> GetAll();
    TEntity With(int id);
    TEntity Persist(TEntity itemToPersist);
    void Delete(TEntity itemToDelete);
} 
```

我想为`Term`没有任何特殊行为的类型定义存储库的合同。所以它看起来像这样：

```
public class TermNotFound : Term
{ public TermNotFound() : base(String.Empty, String.Empty) { } }

public interface ITermRepository : IRepository<Term, TermNotFound> { } 
```

现在为了测试，我想创建一个通用 repo 的内存实现，所以我有这个（为简洁起见未完成）：

```
public class InMemoryRepository<TEntity, TNotFound> : IRepository<TEntity, TNotFound>
    where TEntity : EntityObject
    where TNotFound : TEntity, new()
{
    private IList<TEntity> _repo = new List<TEntity>();

    public IList<TEntity> GetAll()
    {
        return this._repo;
    }

    public TEntity With(int id)
    {
        return this._repo.SingleOrDefault(i => i.Id == id) ?? new TNotFound();
    }

    public TEntity Persist(TEntity itemToPersist)
    {
        throw new NotImplementedException();
    }

    public void Delete(TEntity itemToDelete)
    {
        throw new NotImplementedException();
    }
} 
```

不难看出我希望它如何工作。对于我的测试，我希望`InMemoryRepository`注入通用实现来创建我的`ITermRepository`. 这有多难？

好吧，我不能让 StructureMap 去做。我曾尝试在扫描仪中使用`WithDefaultConventions`和`ConnectImplementationsToTypesClosing(typeof(IRepository<,>))`但没有成功。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T02:47:20.650

你`InMemoryRepository`没有实现`ITermRepository`接口。这就是你无法连接它们的原因。

你可以用你所拥有的东西做的最好的事情就是`InMemoryRepository<Term, TermNotFound>`为`IRepository<Term, TermNotFound>`.

如果你真的需要注入`ITermRepository`，那么你需要有另一个存储库类继承`InMemoryRepository`并实现`ITermRepository`：

```
public class InMemoryTermRepository 
    : InMemoryRepository<Term, TermNotFound>, ITermRepository
{
} 
```

现在您可以`ITermRepository`使用以下方式连接`InMemoryTermRepository`：

```
.For<ITermRepository>().Use<InMemoryTermRepository>() 
```

如果您有许多类似的接口`ITermRepository`，您可以创建一个 StructureMap 约定，以连接`I...Repository`到`InMemory...Repository`. 默认约定是连接`IClass`到`Class`.

# c - 具有多个客户端的 tcp 服务器将消息发送回所有连接的客户端

> ID：10812920
> 
> 赞同：3
> 
> 时间：2012-05-30T08:48:46.087
> 
> 标签：c, select, tcp, pthreads, recv

我有一个 tcp 聊天程序：`server.c`和`client.c`.

服务器处于一个`while(1)`循环中，用于`select`检测想要连接它的套接字的客户端。然后为接受的客户端创建一个新线程，并将其套接字描述符作为线程的参数给出：`pthread_create (&thread,NULL, do_something, (void *) &socket_descriptor);`

当接收到来自客户端的消息时，服务器应该将此消息发送给所有连接的客户端。（尚未实施）。

现在我想知道如何做到这一点。我绝对需要每个接受的连接都在一个线程中。

我也在考虑使用`select`inside `do_something`；将`select`检测套接字描述符上是否有数据传入？或者你会用另一种方式吗？

编辑：添加代码我的代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <errno.h>
#include <string.h>
#include "tcp_comm.h"
#include <sys/time.h>
#include <sys/types.h>

#define BUFSIZE 1024
#define PORT 1234

void *do_something(void *a);

int main (void){
    Socket server = tcp_passive_open( PORT );
    MySocket *s = (MySocket *)server;
    printf("Server socked_id (main): %i", s->sd);

    pthread_t thread;

    fd_set active_socketDescriptors,read_socketDescriptors;

    FD_ZERO(&active_socketDescriptors);         
    FD_SET(s->sd,&active_socketDescriptors);    

    while (1){
        read_socketDescriptors = active_socketDescriptors;
        if (select (FD_SETSIZE, &read_socketDescriptors, NULL, NULL, NULL) < 0){
            perror ("select"); 
            exit (EXIT_FAILURE);
        }

        int i;
        for (i = 0; i < FD_SETSIZE; ++i){
            if (FD_ISSET (i, &read_socketDescriptors)){
                if (i == s->sd){
                    Socket client = tcp_wait_for_connection( server ); 
                    pthread_create (&thread,NULL, do_something, (void *)client); 
                    FD_SET (s->sd, &active_socketDescriptors);          
                } else {
                }
            }
        }
    }

    tcp_close( server );
    return 0;

}
void *do_something(void *client){
    unsigned char input[BUFFER_SIZE]; 
    pthread_detach(pthread_self());

    MySocket *s = (MySocket *)client;
    printf("Client socked_id (thread): %i", s->sd);
    int j;
    while (1){
        int nbytes = tcp_receive(client, input, BUFSIZE );
        if (nbytes <= 0){
                if (nbytes ==0){
                    /* connection closed by client*/    
                    printf("Client closed connection");         
                } else {
                    /* other error*/
                    perror("tcp_receive");              
                }
                tcp_close(&client);
                /*remove the socket descriptor from set in the main BRAINSTORM ABOUT THIS */
        } else {
            /*data incoming */
            printf("\nMessage from client: %s",input);
        }
    }
    return 0;
} 
```

编辑2：重新制定问题我必须使用线程（这不是因为系统；linux），而是因为在分配中必须为每个客户端都有一个线程。

我遇到的具体问题是，只有主线程可以将每个线程中从每个客户端接收到的数据发送到所有客户端，因为只有主线程可以访问包含套接字描述符的集合。

编辑3：我需要在每个线程中添加什么，但我不能因为 s.thread 和 s.main 在不同的地方并且线程不知道主线程的集合。

```
for (j=0; j<=FD_SETSIZE;j++){
    if(FD_ISSET(j,&active_socketDescriptors)){
        if (j != s.thead && j!=s.main){
            tcp_send(j, (void*)input,nbytes);
        }       
    }   
} 
```

编辑 4：我以这种方式解决了它：我有一个动态数组列表，我在其中放置了一个带有套接字描述符的已连接客户端列表。在服务器的线程内（做某事）我有接收阻塞，直到它得到输入然后这个输入被发送到所有连接的客户端，使用它循环通过的列表中的套接字描述符。在客户端内部有一个线程监听和一个线程发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:54:20.687

如果客户端连接套接字是非阻塞的，那么使用例如`select`等待套接字接收数据是一种可能的方式。但是，由于您已经在线程中连接了套接字，您可以让它们保持阻塞状态，只需`read`对它们进行调用即可。调用`read`将阻塞，直到您收到数据，然后可以将其传播到其他线程。

**编辑**

在更好地了解您的要求之后，您可能应该让套接字非阻塞，并使用具有`select`短超时的循环。当`select`超时（即返回`0`）时，您检查是否有数据要发送。如果有，则发送数据，然后返回`select`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:42:27.017

鉴于您的描述，可能值得重新考虑您的应用程序的架构。（除非这是由您的系统限制决定的）。让我再解释一下……

根据您的描述，如果我理解正确，在客户端连接到服务器后，它（客户端）发送的任何消息都将（由服务器）中继到所有其他客户端。因此，与其创建一个新线程，不如简单地将新连接的套接字添加到 select 的 FDSET 中。然后，当有消息进来时，您可以简单地转发给其他人。

如果您希望单个服务器有大量客户端，您应该查看`poll`系统调用是否在您的系统上可用（它就像 select 但支持监视更多客户端）。一个好的投票/选择版本应该胜过你的线程版本。

如果您真的想继续使用您的线程版本，这是完成您正在尝试做的事情的一种方法。当您为每个接受的客户端创建线程时，您还会创建一个返回服务器线程的管道（并将其添加到服务器选择/轮询集。）并将其传递给客户端线程。因此，您的服务器线程现在不仅接收新连接，而且还中继消息。

尽管您说您绝对必须在单独的线程中处理每个客户端，除非您使用的是实时操作系统，否则您可能会发现您需要执行的线程上下文切换/同步很快就会超过多路复用开销我建议的第一个解决方案。（但由于你没有提到我猜的操作系统！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T09:50:56.553

这与您的设计有关。

如果您只需要为每个连接的客户端执行一两个功能，那么建议您只使用一个线程来实现您的服务器。

如果你必须为每个连接的客户端做很多功能，那么多线程设计是可以的。但是，您问的问题应该是我如何将数据从接收线程传递给所有其他线程。我建议的答案是以太：

a) 使用消息队列传递线程间数据：每个线程都有一个消息队列，每个线程将监听自己的套接字和这个消息队列。从套接字接收数据时，线程将数据发送到所有其他消息队列

b) 使用单个全局缓冲区：如果有任何来自套接字的传入数据，则将此数据放入此全局缓冲区，并在此数据中添加一个标记，指示此数据来自何处。

我的 2 美分。

# javascript - 如何将日期选择器包装在新的 div 中？

> ID：10812921
> 
> 赞同：3
> 
> 时间：2012-05-30T08:48:52.153
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我需要将我的日期选择器放在一个新的 div 中，这将是一个 (shadow-)border-div。

我尝试了以下方法：

```
beforeShow: function (input) {
  $(input).datepicker("widget")
   .find(".ui-datepicker-header, ui-datepicker-calendar")
   .wrapAll("<div class='datepickerBorder'/>");
} 
```

但它不起作用。

此外，我尝试包装整个选择器，但边框 div 的位置、大小等不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T09:19:48.583

datepicker 控件是绝对定位的。将它包装在一个元素内不会**包含**该元素内的日期选择器 - 包装元素将仅位于页面底部，而日期选择器将呈现在控件旁边。

解决方案 1：您可以将类添加到 datepicker 小部件本身：

```
$("#datepicker2").datepicker({
    beforeShow: function() {
        $(this).datepicker("widget").addClass("datepickerBorder");
    },
    onClose: function() {
        $(this).datepicker("widget").removeClass("datepickerBorder");
    }
}); 
```

# [演示](http://jsfiddle.net/salman/BakWQ/)

解决方案2：在DOM加载时创建一个绝对定位+隐藏的包装div并重新定位+在显示时重新调整日期选择器后面的div的大小。有一个问题：您无法在函数内检查小部件的偏移量（它将呈现的坐标）`beforeShow`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T08:49:31.467

```
$('#datepicker').wrap('<div class="datepickerBorder"/>'); 
```

这`#datepicker`是`id`datepicker 输入字段，您可能还有其他内容。

检查 jQuery **[.wrap()](http://api.jquery.com/wrap/)**。

您不需要在`beforeShow()`. 在 DOM 就绪函数中执行此操作。

`datepicker`包装你应该尝试的每个内部元素

```
$('div#ui-datepicker-div > *').wrap('<div class='datepickerBorder'/>'); 
```

# filemaker - 给定字段中的值摘要

> ID：10812922
> 
> 赞同：1
> 
> 时间：2012-05-30T08:48:57.757
> 
> 标签：filemaker

我有一个字段 [values]，可以在其中添加一系列值（比如 A - E）。查看许多记录，我们得到类似

记录 1 [值] A

记录 2 [值]

记录 3 [值] A

记录 4 [值] C

记录 5 [值] B

有没有一种方法可以生成 [values] 的汇总字段，上面将返回：

一个

乙

C

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:47:02.577

您可以使用值列表做您想做的事情：

1.  制作一个标有“值”的新值列表（文件菜单 > 管理 > 值列表）
2.  制作值列表“使用字段中的值”并指定您的值字段
3.  创建一个新的计算字段，“列出的值”
4.  将计算设置为键入“文本”并使用以下代码：

`ValueListItems ( Get(FileName) ; "Values" )`

您可能希望为列出的值字段打开“不存储计算结果”。

# iphone - 在电子邮件应用程序中取消隐藏 UINavigationBar LIKE

> ID：10812924
> 
> 赞同：0
> 
> 时间：2012-05-30T08:49:03.330
> 
> 标签：iphone, email, uinavigationcontroller, uinavigationbar

我有一个视图控制器，我在其中执行“键入时搜索”。当我按下搜索栏时，隐藏导航栏，动画，我还显示搜索栏的范围按钮。问题是当我按下一个单元格来推送一个新的视图控制器时，导航栏保持隐藏状态。我知道我可以将它设置为不隐藏，但它会从顶部开始动画。我想在电子邮件应用程序中做类似的事情，当我按下一个新单元格时，会推送一个新的视图控制器，并且导航栏从右侧开始动画，就像它属于推送的视图控制器一样。我怎样才能做到这一点？

谢谢你。

考斯敏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:05:42.157

使用`UISearchDisplayController`来处理搜索栏。您描述的行为是默认行为。

# android - fuse 可以支持什么样的通用文件系统？

> ID：10812928
> 
> 赞同：1
> 
> 时间：2012-05-30T08:49:28.773
> 
> 标签：android, android-emulator, fuse

由于保险丝实际上在通用文件系统之上运行，如 ext3，所以我想知道保险丝是否支持所有类型的文件系统。特别是，我知道保险丝是否支持 yaffs2，一种 android 使用的文件系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:08:08.330

`ext3`FUSE 与或以任何方式无关`yaffs`（除非它实现其中之一）；管理这些文件系统是一项内核工作，而 FUSE 文件系统存在于用户空间并使用内核功能来访问数据，无论是文件、网络连接、内存结构等。如果您使用文件作为 FUSE 的字节源，您仍然使用统一的操作系统 API 来访问文件数据（例如 POSIX 上的 open()/read()/write()）。因此，对“各种文件系统”的支持取决于操作系统内核对该文件系统的支持。

如果我弄错了，请澄清你的问题。

# sqlite - rails 嵌套模型查询

> ID：10812930
> 
> 赞同：1
> 
> 时间：2012-05-30T08:49:31.597
> 
> 标签：sqlite, activerecord, ruby-on-rails-3.2

我正在尝试研究如何使用活动记录基于嵌套模型返回一些数据。

我的关系设置如下：

*   用户 - 有很多书
*   图书 - 有很多用户
*   UserBook - 属于用户，属于书

我可以通过这样的书籍访问用户：

*   book.users.first

*   book.users.second

等等

我想选择所有没有特定用户的书籍。

我已经生成了这样的查询，请注意，'near' 方法是由 Geocoder gem 提供的。

```
Book.near(location, distance).joins(:users).where("users.id != #{@current_user.id}") 
```

我相信语法是正确的，没有发生错误，但是，查询仍然返回当前用户的书籍。

问题似乎是，如果 book.users 包含不是当前用户 id 的用户 id 并且还包含当前用户 id，则仍然返回 book。

我可以使用这样的代码获得所需的结果，但我认为有一种方法可以让 ActiveRecord 为我做这件事。

```
search = Book.near(location, distance).reject do |book|
    if book.users.include?(@current_user)
        book
    end
end 
```

# visual-studio-2010 - 将解决方案转换为 pdf 或 doc 文件

> ID：10812932
> 
> 赞同：4
> 
> 时间：2012-05-30T08:49:33.263
> 
> 标签：visual-studio-2010, pdf

这似乎是一个奇怪的问题，但我需要将我的代码转换为 pdf 格式 - 这样我才能将其提交。是的，可悲的是，学校系统要求将 cd 上的代码作为 pdf 格式。我能做的是打开我的解决方案中的每个类并复制粘贴它。但是 - 作为一名程序员 - 我很懒，想知道 Visual Studio 是否有这方面的功能？或者是否有其他方法？

编辑：第三方程序遍历文件夹中的所有文件，打开文件并将其内容复制到 pdf 文件中。也可以 - 它不必在 Visual Studio 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:32:02.173

厌倦了等待，这就是我想出的：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;

namespace GetFileContents
{
    class Program
    {
        static string types = ".js,.cshtml,.cs,.less,.css";
        private static string text = "";
        static void Main(string[] args)
        {
            //This folder wraps the whole thing.
            string folderPath = @"C:\randomFolderWhereProjectIs\";

            string s = IterateIt(Directory.GetDirectories(folderPath).ToList());
            //Save to file or whatever I just used the text visualiser in Visual Studio
        }

        private static string IterateIt(List<string> l)
        {

            foreach (var path in l)
            {
                var files = Directory.GetFiles(path).Select(c => new FileInfo(c)).Where(c => types.Split(',').Contains(c.Extension));

                foreach (var fileInfo in files)
                {
                    text += fileInfo.Name + "\r\n";
                    using (StreamReader reader = fileInfo.OpenText())
                    {
                        text += reader.ReadToEnd() + "\r\n";
                    }
                }
                text = IterateIt(Directory.GetDirectories(path).ToList());
            }
            return text;
        }

    }
} 
```

# oracle - 使用 UTL_FILE 在 NEWEMP 表中插入数据，但它只能显示一个数据

> ID：10812936
> 
> 赞同：0
> 
> 时间：2012-05-30T08:49:49.970
> 
> 标签：oracle, stored-procedures, plsql, utl-file

```
 declare
     ENAME      VARCHAR2(10);
      JOB       VARCHAR2(10);
     MGR       VARCHAR2(4);
     HIREDATE  varchar2(11);
     SAL       VARCHAR2(11);
      COMM      VARCHAR2(9);
     DEPTNO    number(2);
        EMPNO     NUMBER(4);
           namesfile UTL_FILE.FILE_TYPE;
  begin
      namesfile :=UTL_FILE.FOPEN('DIPRJDIR','empdata.txt','R');
      LOOP
          EMPNO:=0;
          ENAME :=0;
          JOB:=0;
          MGR:=0;
          HIREDATE:=0;
          SAL:=0;
          COMM :=0;
          DEPTNO:=0;
          UTL_FILE.GET_LINE(namesfile,EMPNO,4);
          dbms_output.put_line('EMPNO :' || EMPNO);
          UTL_FILE.GET_LINE(namesfile,ENAME,10);
          dbms_output.put_line('ENAME :' || ENAME);
          UTL_FILE.GET_LINE(namesfile,JOB,9);
          dbms_output.put_line('JOB :' || JOB);
          UTL_FILE.GET_LINE(namesfile,MGR,4);
          dbms_output.put_line('MGR :' || MGR);
          UTL_FILE.GET_LINE(namesfile,HIREDATE,11);
          dbms_output.put_line('HIREDATE :' || HIREDATE);
           UTL_FILE.GET_LINE(namesfile,SAL,11);
           dbms_output.put_line('SAL :' || SAL);
           UTL_FILE.GET_LINE(namesfile,COMM,9);
           dbms_output.put_line('COMM :' || COMM);
           UTL_FILE.GET_LINE(namesfile,DEPTNO,2);
           dbms_output.put_line('DEPTNO :' || DEPTNO);
       END LOOP;
    END;

    In the loop it display data only one time after than it give error

   SQL> /
    EMPNO :7839
    ENAME :KING
    JOB :PRESIDENT
    MGR :0000
    HIREDATE :17-nov-1981
    SAL : 005000.00
    COMM :000000.00
    DEPTNO :10
    declare

    ERROR at line 1:
    ORA-06502: PL/SQL: numeric or value error: character to number conversion error
    ORA-06512: at line 22 
```

我已经编写了程序，但它没有给我正确的输出。它只能显示一次数据。你能解释一下为什么它只显示一次数据，然后它给出一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:41:55.787

您的错误意味着您的文本文件的第九行有问题。它不包含您期望的数值。

显然，显而易见的解决方案是让您在文本编辑器中打开文件并查看问题所在。我们不能为您做到这一点。

可能您的提取过程注入了一些额外的字符。这可能是换行符，可能是一些空格，也许您的表格有一个您没有处理的附加列，等等。

最简单的解决方案是将数据读入字符串缓冲区，然后在程序中将其转换为预期的数据类型。这将为您提供可以在错误处理部分使用的东西；像这样的东西：

```
 .... 
exception
     when VALUE_ERROR then
         dbms_output.put_line('expected numeric or date value, got '||lv_string);
         raise; 
```

您可能希望为单独的数据类型定义自己的异常。这一切都在 PL/SQL 文档中。 [找到更多。](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/errors.htm#CHDFGBJI)

* * *

顺便说一句，这是一种处理数据交换的非常费力和脆弱的方式。您确实应该尝试说服您的数据提取器提供一个每行包含完整记录的文件。然后你可以使用 SQL Loader 或外部表，这更容易。

# spring - 将 Spring JpaDaoSupport 与 Appengine 一起使用

> ID：10812937
> 
> 赞同：1
> 
> 时间：2012-05-30T08:49:50.153
> 
> 标签：spring, google-app-engine

我一直在使用 Objectify 进行数据存储持久性，但是由于某种原因，我需要在 JPA 中做一些事情，但是我收到了这个错误：

```
Caused by: java.lang.IllegalStateException: JPA PersistenceProvider returned null EntityManagerFactory - check your JPA provider setup!
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:253)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$6.run(AbstractAutowireCapableBeanFactory.java:1504)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1502)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 51 more 
```

**DAO 实现代码：**

```
@Repository("accountDao")
//@Transactional
public class AccountDaoImpl extends JpaDaoSupport implements AccountDao {

    private static Logger logger = Logger.getLogger(AccountDaoImpl.class);

    @Autowired
    public AccountDaoImpl(EntityManagerFactory entityManagerFactory) {
        super.setEntityManagerFactory(entityManagerFactory);
    }

    // DAO crud function code omitted

} 
```

[servlet-context.xml](http://pastebin.com/QSuTNcmt) `src/main/webapp/WEB-INF/spring/appServlet/`

[持久性.xml](http://pastebin.com/KWGUTUCt) `src/main/resources/META-INF`

# ruby-on-rails - 更简洁的方法来定义没有 lambda 的方法

> ID：10812941
> 
> 赞同：0
> 
> 时间：2012-05-30T08:50:13.870
> 
> 标签：ruby-on-rails, ruby, closures, metaprogramming

是否有**更简单和/或更易读**的方法在 Ruby 中创建**闭包**，以便定义的方法可以**访问变量** `m`？

我对这里有一点“问题” `lambda`。

我经常动态定义必须访问局部变量的方法：

例如：

```
class Comparison

  def income
    123
  end

  def sales
    42342
  end

  # and a dozen of other methods

  # Generate xxx_after_tax for each method
  instance_methods(false).each do |m|
    lambda {
      define_method("#{m}_after_tax") do
        send(m) * 0.9
      end
    }.call
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T09:09:14.030

```
class Comparison

  def income
    123
  end

  def sales
    42342
  end

  # and a dozen of other methods

  # Generate xxx_after_tax for each method
  instance_methods(false).each do |m|

    define_method("#{m}_after_tax") do
      send(m) * 0.9
    end

  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T09:54:40.477

常规方法定义不是闭包，但在这里您`define_method`使用块调用，块*是*闭包。这应该足够了：

```
instance_methods(false).each do |m|
  define_method :"#{m}_after_tax" do
    send(m) * 0.9
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T09:45:45.827

正如 Yuri 指出的那样，这`lambda`是多余的，您可以通过运行此示例来查看。

```
#!/usr/bin/env ruby -w

class Foo
  [:foo, :bar].each do |m|
    define_method("#{m}_dynamic") do
      "Called #{m}"
    end
  end
end

p Foo.new.foo_dynamic # => "Called foo" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T09:06:55.593

```
 instance_methods(false).each do |m|
    class_eval <<-ERUBY, __FILE__, __LINE__
      def #{m}_after_tax
        #{m} * 0.9
      end
    ERUBY
  end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T09:06:58.807

您可以像这样使用 method_missing ：

```
def method_missing(name, *args, &block)
  if name.to_s.match /^([a-z_]+)_after_tax$/
    send($1)
  else
    super
  end
end 
```

我希望这有帮助。

# vb.net - 为什么 DataGridViewComboBoxColumn 会显示 ValueMember？

> ID：10812954
> 
> 赞同：4
> 
> 时间：2012-05-30T08:50:55.760
> 
> 标签：vb.net, datagridview, datagridviewcombobox

我有一个小问题。`DataGridViewComboBoxColumn`显示来自`ValueMember`而不是来自的值`DisplayMember`。网格工作正常，当我从该列中选择某些内容时，我会看到该`DisplayMember`值，但是当焦点丢失时，网格会显示`ValueMember`. 我有这个代码组合框列：

```
statusCBoxColumn.DataSource = dt 'datatable with two fields StatusId and StatusText
statusCBoxColumn.DisplayMember = "StatusText" 'is type NVarchar
statusCBoxColumn.ValueMember = "StatusId" 'is type Int 
```

有谁能够帮助我？

* * *

编辑：我通过以下方式解决了这个问题：

```
Private Sub dgv_CellFormatting(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles dgv.CellFormatting
  If (dgv.Columns(e.ColumnIndex).Name = "statusCBoxColumn") Then
    If e.Value & "" > "" Then
      Dim s1 As String = e.Value
      e.Value = GetData("Select StatusText from Status where ID = " & e.Value).ToString()
    End If
  End If
End Sub 
```

但我不认为这是最好的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:19:55.720

我有同样的问题。对我来说，“statusID”很长。我通过 system.type.gettype("System.Int64") 做到了，它给出了相同的行为。将其更改为 Int32 时，行为正常。

所以这是 valuemember 类型和 datagridview 类型之间的不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:05:54.483

您是否设置了组合框列的 datapropertyName 并将该列添加到 datagridview？你必须写

```
 statusCBoxColumn.DataPropertyName = "StatusId"; 
```

并添加列

```
 datagridview1.Columns.Add(statusCBoxColumn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:13:07.500

试试这个我在显示价值成员时也有问题，希望它会起作用。

```
 For index = 0 To cbo.Items.Count - 1
        cbo.SelectedIndex = index 
        MessageBox.Show(CType(cbo.SelectedValue, String))
    Next 
```

我用的是：

```
 Dim jm As Integer
    jm = CType(cmbCategory.SelectedValue, String)
    MsgBox(jm) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T19:12:45.360

e.Value = GetData("Select to_char(StatusId) , StatusText from Status where ID = " & e.Value).ToString()

# php - 从 php 中抓取文件，该文件强制保存为从另一个具有 http 身份验证的 Web 服务器 php

> ID：10812958
> 
> 赞同：0
> 
> 时间：2012-05-30T08:51:40.203
> 
> 标签：php, curl, http-authentication

1.  我有一个来自另一台启用了 http auth 的服务器的 url。
2.  这个特定的 url 强制文件下载文件。
3.  我在这里尝试获取标头并将标头设置回来，以便在 curl 中完成 http auth 后，我可以强制从我的 php 文件下载，但没有成功。curl 没有给出任何错误。$body 中没有返回任何内容。

    ```
    $url=$_GET["url"];//another web server url which forcing file download save as
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_USERPWD, "username:password");//http auth done here
    curl_setopt($ch, CURLOPT_HEADER, TRUE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, null); 
    curl_setopt($ch, CURLOPT_URL, $url);
    $response = curl_exec($ch);
    list ($headerString, $body) = explode("\r\n\r\n", $response, 2);
    $headers = explode("\r\n", $headerString);
    foreach ($headers as $header) {
        header($header);
    }
    echo $body;
    exit; 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:16:12.873

上面的代码工作正常。问题只是在 $_GET["url"] 中的 & ，它拆分了有效的 url。刚刚使用**urlencode**和代码现在工作正常。希望这会对某人有所帮助。

# c# - 将 TransactionScopeOption.Suppress 与 Sql Server Compact 4 一起使用

> ID：10812966
> 
> 赞同：4
> 
> 时间：2012-05-30T08:52:12.980
> 
> 标签：c#, .net, entity-framework, sql-server-ce, system.transactions

我在使用带有实体框架的 Sql Server CE 4 和`System.Transactions.TransactionScope`.

下面的简化代码来自演示问题的单元测试。

这个想法是使`innerScope`块（没有事务）成功或失败而不影响`outerScope`块（“环境”事务）。这是`TransactionScopeOption.Suppress`.

但是，代码失败了，因为似乎整个`SomeTable`表都被第一次插入锁定了`outerScope`。在代码中指示的位置，将引发此错误：

“SQL Server Compact 等待锁定超时。设备的默认锁定时间为 2000 毫秒，桌面为 5000 毫秒。可以使用 ssce：默认锁定超时属性在连接字符串中增加默认锁定超时。[会话 id = 2，线程 id = 2248，进程 id = 13516，表名 = SomeTable，冲突类型 = x 锁（x 块），资源 = PAG（idx）：1046]"

```
[TestMethod()]
[DeploymentItem("MyLocalDb.sdf")]
public void MyLocalDb_TransactionSuppressed()
{
    int count = 0;

    // This is the ambient transaction
    using (TransactionScope outerScope = new TransactionScope(TransactionScopeOption.Required))
    {
        using (MyObjectContext outerContext = new MyObjectContext())
        {
            // Do something in the outer scope
            outerContext.Connection.Open();
            outerContext.AddToSomeTable(CreateSomeTableRow());
            outerContext.SaveChanges();
            try
            {
                // Ambient transaction is suppressed for the inner scope of SQLCE operations
                using (TransactionScope innerScope = new TransactionScope(TransactionScopeOption.Suppress))
                {
                    using (MyObjectContext innerContext = new MyObjectContext())
                    {
                        innerContext.Connection.Open();
                        // This insert will work
                        innerContext.AddToSomeTable(CreateSomeTableRow());
                        innerContext.SaveChanges(); // ====> EXCEPTION THROWN HERE
                        // There will be other, possibly failing operations here
                    }
                    innerScope.Complete();
                }
            }
            catch { }
        }
        outerScope.Complete();
    }

    count = GetCountFromSomeTable();
    // The insert in the outer scope should succeed, and the one from the inner scope
    Assert.AreEqual(2, count);
} 
```

[因此，根据http://msdn.microsoft.com/en-us/library/ms172001](http://msdn.microsoft.com/en-us/library/ms172001)，似乎“事务范围内的事务在隔离级别设置为 Serializable 的情况下执行”

但是，使用以下代码片段来更改 TransactionScope 的隔离级别并没有帮助：

```
public void MyLocalDb_TransactionSuppressed()
{
    TransactionOptions opts = new TransactionOptions();
    opts.IsolationLevel = IsolationLevel.ReadCommitted;
    int count = 0;

    // This is the ambient transaction
    using (TransactionScope outerScope = new TransactionScope(TransactionScopeOption.Required, opts))
    ... 
```

在相同的位置抛出相同的异常。

It seems the only way to avoid this is to call `outerScope.Complete()` before entering the `innerScope` block. But this would defeat the purpose.

What am I missing here? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:30:36.503

AFAIK SQL Server Compact 不支持嵌套事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:43:00.140

你为什么要这样做？如果我查看您的代码，则在第一个事务范围内运行第二个事务范围和按顺序运行它们之间没有区别。

恕我直言，这不是 SQL Compact`TransactionScope`或隔离级别的问题。这是您错误的应用程序逻辑的问题。

每个都`SaveChanges`在事务中运行 - 由定义的外部事务`TransactionScope`或内部事务`DbTransaction`。即使它不会创建事务，每个数据库命令都有自己的隐式事务。如果您在内部代码块上使用 Suppress，您将创建两个并发事务，它们试图插入同一个表，而且第一个事务在没有完成第二个的情况下无法完成，第二个在没有完成第一个 => 死锁的情况下无法完成。

原因是插入命令总是锁定表的一部分，在提交或回滚之前不允许新的插入。我不确定是否可以通过更改事务隔离级别来避免这种情况 - 如果可以，您很可能需要`Read.Uncommitted`.

# javascript - jquery1.7.2点击事件未触发

> ID：10812968
> 
> 赞同：2
> 
> 时间：2012-05-30T08:52:18.847
> 
> 标签：javascript, jquery

我正在尝试将单击事件绑定到`div`具有`id="unit"`. 这些`div`是在运行时生成的，我的 javascript 似乎不起作用。

我的 javascript 点击事件。

```
$("#unit").click(function(){
  alert('1');
}); 
```

在ajax调用之前。

```
<div id="content">
    <div id="building">

    </div>

    <div id="units">

    </div>
</div> 
```

在ajax调用之后。

```
<div id="content">
        <div id="building">
            <div value="1" class="buildingBlock"><h3 style="text-align: center;">Level - 1</h3></div>
            <div value="2" class="buildingBlock"><h3 style="text-align: center;">Level - 2</h3></div>
            <div value="3" class="buildingBlock"><h3 style="text-align: center;">Level - 3</h3></div>
            <div value="4" class="buildingBlock"><h3 style="text-align: center;">Level - 4</h3></div>
        </div>

        <div id="units">
            <div value="1" id="unit">#02-01<br>3 room(s)</div>
            <div value="2" id="unit">#02-02<br>2 room(s)</div>
            <div value="3" id="unit">#02-03<br>5 room(s)</div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T08:54:17.583

因为您是动态附加`#unit`元素，所以您需要将事件委托给最近的父元素。试试这个：

```
$("#units").on('click', '.unit', function(){
    alert('1');
}); 
```

此外，多个`id`属性无效。您应该更改代码以使用类，如下所示：

```
<div id="units">
    <div value="1" class="unit">#02-01<br>3 room(s)</div>
    <div value="2" class="unit">#02-02<br>2 room(s)</div>
    <div value="3" class="unit">#02-03<br>5 room(s)</div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:54:11.440

您不能拥有多个具有相同 ID 的元素。

改用类。例如`class="unit"`

当您绑定事件使用时`$(".unit")..`

* * *

此外，如果我们正在考虑 Ajax 请求，无论是在成功方法中还是在后端，您都应该准备额外的 js 代码来正确初始化新元素。在父母身上监听事件实际上是一种黑客行为。

所以，如果你有：

```
$.get("someurl", {}, function(data){
    $("#units").append(data);
    $("#units .unit").unbind("click").bind("click", function(){ 
// your click handler here
    });
}); 
```

至少我会那样做，除非你有特殊需要控制来自父母的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:53:51.450

更改`id`为`class`_ `unit`

```
<div id="units">
   <div value="1" class="unit">#02-01<br>3 room(s)</div>
   <div value="2" class="unit">#02-02<br>2 room(s)</div>
   <div value="3" class="unit">#02-03<br>5 room(s)</div>
 </div> 
```

尝试使用委托事件处理程序。

```
$("#units").on('click', '.unit', function(){
  alert('1');
}); 
```

# akka - AKKA 和其他消息传递系统

> ID：10812974
> 
> 赞同：3
> 
> 时间：2012-05-30T08:52:43.853
> 
> 标签：akka, amqp, hornetq

我有红色[Akka 的好用例](https://stackoverflow.com/questions/4493001/good-use-case-for-akka)

简而言之：Akka 提供或者仅仅是一个“消息系统”。我对吗？

**1\. AKKA 与 AMQP、RabbitMQ 或 HornetQ 等其他消息传递系统相比如何？**

**2\. 为什么我应该使用 AKKA 而不是 HornetQ 等（真正的）消息传递系统？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:38:41.823

1.  Akka 是一个用于并发、容错和分发的工具包。消息代理中断消息。

2.  定义“真实”。假设您谈论的是 Akka Actor，一个 Akka Actor 在普通盒子上每秒可以处理大约 300 万条消息，每 GB 堆可以有大约 270 万个 Actor。

一般来说，我认为您可能想阅读一下有关计算的 Actor 模型：[http ://en.wikipedia.org/wiki/Actor_model](http://en.wikipedia.org/wiki/Actor_model)

# iphone - 登录FB后如何发贴

> ID：10812975
> 
> 赞同：0
> 
> 时间：2012-05-30T08:52:49.233
> 
> 标签：iphone, ios, xcode, facebook, posting

我想知道用这个登录FB后如何用字符串@“123456789”在我自己的墙上发帖

```
facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];

    // Check and retrieve authorization information
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    // Initialize user permissions
    userPermissions = [[NSMutableDictionary alloc] initWithCapacity:1];

    if (![facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"publish_stream", 
                                nil];
        [facebook authorize:permissions];
        //[permissions release];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:17:00.767

使用以下代码喂养

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [NSString stringWithFormat:@"YOUR MESSAGE"],
                                   @"message", nil];
    [facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod: @"POST" andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:59:53.890

您始终可以创建自己的请求并将其发布到 facebook，如以下请求：您指定您想要的内容：类型、链接、图片、来源、消息、名称、标题、描述，并且您必须提供 access_token，如果您正在使用facebook api，您可以轻松获得。

[https://graph.facebook.com/me/feed?type=&link=&picture=&source=&message=&name=jwt&caption=inmyworld&description=&access_token=](https://graph.facebook.com/me/feed?type=&link=&picture=&source=&message=&name=jwt&caption=inmyworld&description=&access_token=)

# mysql - 如何在我可以从我的网站使用的 node.js 中进行身份验证？

> ID：10812979
> 
> 赞同：3
> 
> 时间：2012-05-30T08:53:10.607
> 
> 标签：mysql, node.js, mongodb

我想要一个 Node.js 服务来验证我网站的用户。我怎样才能做到这一点？

我想使用简单的密码方法而不是 OpenID 来实现 Everyauth 身份验证。

我尝试了[https://github.com/jimpick/everyauth-example-password](https://github.com/jimpick/everyauth-example-password)并且它有效。

我想用数据库来存储。此脚本不使用数据库。我过去使用过 MySQL，所以我更喜欢它，但我也可以使用其他任何东西，比如 MongoDB。

我只想将数据库添加到我的脚本中。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:11:14.733

您只需要修改`.authenticate`方法。由于连接到数据库是（或应该是）异步操作，因此您需要添加`promise`对象（请参阅[everyauth 文档](https://github.com/bnoguchi/everyauth)）。

假设您有一些 ORM，其中用户数据对应于`user`对象`username`和`password`属性（在我的示例中，我将使用 mongoose 引擎），这可能是它的外观：

```
.authenticate( function (login, password) {
    var promise = this.Promise(); /* setup promise object */

    /* asynchrnously connect to DB and retrieve the data for authentication */
    db.find({ username:login }, function(err, user) {
        if (err)
            return promise.fulfill([err]);
        if ((!user) || (user.password != password))
            return promise.fulfill(['Incorrect username or password!']);
        promise.fulfill(user);
    });

    return promise; /* return promise object */
}) 
```

我没有测试它，但根据文档它应该可以工作。请记住，错误应该保存在数组中。

顺便说一句：如果你只使用密码方法，那么你知道，没有必要用大炮对付苍蝇。:) 编写自己的（不一定是完美的，但可以工作的）身份验证机制非常简单，如果您不知道如何做到这一点，您应该学习它。它将在未来受益，因为一般来说，身份验证和安全性在每个 Web 应用程序中都非常重要。

# sql - 在 Oracle PL SQL 中存储变量

> ID：10812980
> 
> 赞同：1
> 
> 时间：2012-05-30T08:53:13.573
> 
> 标签：sql, oracle, plsql

希望您能提供帮助-我正在尝试将日期分配给变量，然后在我的选择查询中调用该变量。我发布的代码只是我正在努力做的一部分，我将不止一次调用该变量。我曾尝试向谷歌寻求帮助，但我坚持使用 Select Into 语句，因为我已经有很多选择。

```
DECLARE 
    CurrMonth DATE := '27 may 2012'; -- Enter 27th of current month  

BEGIN

SELECT 
    a.policynumber
    ,a.cifnumber
    ,a.phid
    ,a.policystartdate
    ,b.sistartdate
    ,c.dateofbirth
    ,'28/02/2013' AS TaxYearEnd
    --Complete tax year end in the SELECT statement (once for tax year end and once for the age at tax year end)
    ,round ((months_between('28 feb 2013',c.dateofbirth)/12),8) AS AgeAtTaxYearEnd 
    ,b.sifrequency AS CurrSIFrequ
    ,b.sivalue AS CurrentSIValue
    ,b.simode AS CurrentSIMode
    ,d.anniversarydate AS CurrentAnnDate
    ,d.anniversaryvalue AS CurrentAnnValue
    ,b.ruleeffectivedate
    ,b.sistatus AS CurrentSIStatus
    ,b.paymentbranchcode AS CurrSIBranchCode
    ,b.transferaccounttype AS CurrSIAccountType
    ,b.transferaccountnumber AS CurrSIAccountNo
    ,SUM(k.unitbalance) AS unitbalance
    ,a.latestrule
FROM fcislob.policytbl a
    ,fcislob.policysitbl b
    ,fcislob.unitholderdetailtbl c
    ,fcislob.policyanniversaryvaluetbl d
    ,fcislob.unitholderfundtbl k
WHERE a.policynumber = b.policynumber
    AND a.policynumber = d.policynumber
    AND b.policynumber = d.policynumber
    AND a.phid = c.unitholderid
    AND a.phid = k.unitholderid
    AND c.unitholderid = k.unitholderid
    AND a.ruleeffectivedate = b.ruleeffectivedate
    AND a.ruleeffectivedate = d.ruleeffectivedate
    AND b.ruleeffectivedate = d.ruleeffectivedate
    AND a.latestrule <> 0
    AND c.authrejectstatus = 'A'        
    AND a.phid LIKE 'AGLA%'
    AND b.sistatus <> 'C'
    AND k.unitbalance >0     
    AND b.transactiontype = '64'
    AND b.sistartdate <= CurrMonth                                              
    AND b.sifrequency = 'M'

GROUP BY a.policynumber, a.cifnumber, a.phid, a.policystartdate, b.sistartdate , c.dateofbirth,b.sifrequency, b.sivalue, b.simode, d.anniversarydate, d.anniversaryvalue, b.ruleeffectivedate,
    b.sistatus, b.paymentbranchcode, b.transferaccounttype, b.transferaccountnumber, b.policynumber, a.latestrule;
    END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:54:49.270

1.  您有一个`group by`子句，因此您需要按所有未聚合的列进行分组。
2.  您确定结果中只有一条记录吗？
3.  正如@TonyAndrews 所说，您需要 into 子句。您需要为每个列声明一个变量并插入其中，

IE：

```
DECLARE
  v_policynumber fcislob.policytbl.policynumber%TYPE;
  v_cifnumber    fcislob.policytbl.cifnumber%TYPE;
  v_phid         fcislob.policytbl.phid%TYPE;
  -- and so on ...
  v_sum          number;
BEGIN
    SELECT SUM(k.unitbalance), a.policynumber, a.cifnumber, a.phid -- and so on ...
      INTO v_sum, v_policynumber, v_cifnumber, v_phid -- and so on ...
      FROM fcislob.policytbl a -- and so on ...
  GROUP BY a.policynumber, a.cifnumber, a.phid -- and so on ...
END; 
```

1.  您处理日期的方式并不“健康”，IMO 最好使用`to_date`而不是真正依赖 NLS 参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:32:31.520

如果您只使用 PL/SQL 来在几个普通`select`语句之间保留日期值，那么它会使事情变得复杂 -`select into`如果您只想显示查询结果，切换到并不简单，特别是如果有多行。

由于您提到您有很多选择，我猜您将它们放在脚本文件 ( `example.sql`) 中，并通过 SQL*Plus 运行它们，例如`sqlplus user/password @example`. 如果是这样，您可以保留简单的 SQL 语句并使用[位置参数](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#CACIIEDF)、[替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#CACIFHGB)或[绑定变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#i1211850)来跟踪日期。

第一个选项是如果您想在命令行上传递日期，例如`sqlplus user/password @example 27-May-2012`：

```
set verify off
select 'Supplied date is ' || to_date('&1', 'DD-Mon-RRRR') from dual; 
```

这使用了第一个位置参数，它被引用为`&1`，并根据查询中的需要将其转换为日期。传递的日期必须采用`to_date`函数预期的格式，在这种情况下，我已经制作了 DD-Mon-RRRR。请注意，您必须将变量括在单引号中，否则（除非它是数字）Oracle 将尝试将其解释为列名而不是值。（`set verify off`当使用替换变量时，默认情况下 SQL*Plus 会显示抑制消息）。

您可以在脚本中引用任意`&1`多次，但您可能会发现使用有意义的名称重新定义它更容易 - 当您有多个位置参数时特别有用 - 然后在查询中使用该名称。

```
define supplied_date = &1
select 'Supplied date is ' || to_date('&supplied_date', 'DD-Mon-RRRR') from dual; 
```

如果您不想从命令行传递日期，则可以改用固定值。我在这里使用了不同的默认日期格式，它允许我使用日期文字语法或`to_date`函数。

```
define curr_date = '2012-05-31';
select 'Today is ' || date '&curr_date' from dual;
select 'Today is ' || to_date('&curr_date', 'YYYY-MM-DD') from dual; 
```

您可能希望在以后的查询中使用一次查询的结果来导出日期值。您可以使用[`column ... new_value`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve013.htm)SQL*Plus 命令来执行此操作；`curr_date`这使用来自任何未来查询的列（别名）中的字符串值定义了一个替换变量`today`，然后您可以以相同的方式使用它：

```
column today new_value curr_date
select to_char(sysdate, 'DD-Mon-YYYY') as today from dual;
select 'Today is ' || to_date('&curr_date', 'DD-Mon-YYYY') from dual; 
```

您还可以使用通过命令定义并使用以下`var[iable]`命令设置的绑定变量`exec`：

```
var curr_date varchar2(10);
exec :curr_date := '2012-05-31';
select 'Today is ' || to_date(:curr_date, 'YYYY-MM-DD') from dual; 
```

（`exec`实际上是一个匿名 PL/SQL 块的包装器，所以它的意思是`begin :curr_date := '2012-05-31'; end;`，但你只有在有错误时才能真正看到）。请注意，它知道绑定变量是一个字符串，因此您*不要*将其括在单引号中。

您可以混合和匹配，因此如果您在命令行上传递了一个日期，您可以将它分配给一个绑定变量`exec :supplied_date := '&1'`；或使用当前日期`exec :curr_date := to_char(sysdate, 'YYYY-MM-DD')`。

可能有多种组合，因此您需要选择适合您想要做的事情以及您认为最简单的组合。其中大多数（如果不是全部）也应该在 SQL Developer 中工作，但不确定其他客户端。

# c# - asp.net 检查 imageURL 是否存在

> ID：10812985
> 
> 赞同：8
> 
> 时间：2012-05-30T08:53:22.757
> 
> 标签：c#, asp.net, image, url, imageurl

我正在尝试从另一个 Intranet 站点获取用户的缩略图，但其中一些不遵循预定义的格式，这意味着我想加载默认缩略图。

检查图像 URL 是否有效的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T09:03:35.503

根据您获取图像的方式，这可能会起作用

```
<html>
    <body>
        <img src="<dynamic handler url>" alt="My Username" onError="this.src='defaultProfile.jpg';" />
    </body>
</html> 
```

这就是您在 ASP.NET 中的操作方式。

设计师 -

```
<asp:Image ImageUrl="NonexistentImage.Jpg" ID="profileImage" Height="50" Width="50" runat=server /> 
```

代码背后 (c#)

```
profileImage.Attributes["onerror"] = "this.src='http://www.cs.uofs.edu/~olivetoj2/blah.jpg';"; 
```

这对我来说非常有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:59:40.343

```
WebRequest webRequest = WebRequest.Create(url);  
WebResponse webResponse;
try 
{
  webResponse = webRequest.GetResponse();
}
catch //If exception thrown then couldn't get response from address
{
  return 0;
} 
return 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T09:03:22.047

你可以很容易地在 jQuery 中实现这一点。

```
$("#myImage")
    .load(function() { alert("it loaded ok") })
    .error(function() {  $(this).attr("src", alternateImage)  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T09:06:33.297

从代码隐藏检查

```
File.Exists(Server.MapPath("file path")) 
```

如果它返回 true，则分配该值，否则分配您的默认缩略图。

# facebook - FQL：从他们的场地字段搜索事件

> ID：10812988
> 
> 赞同：2
> 
> 时间：2012-05-30T08:53:33.480
> 
> 标签：facebook, events, facebook-graph-api, facebook-fql

我正在开发一个通过 FQL 从 facebook Pages 检索事件的应用程序。有时这些页面的所有者不会从页面配置文件中创建这些事件，而是从他们自己的配置文件中创建这些事件，并且只是将事件链接到页面作为场地场地（因为我正在寻找的页面是公共场所）

是否可以通过 FQL 或任何其他方式获取所有具有特定 facebook 页面 ID 作为场地的活动 ID？

现在，只有当页面所有者使用以下代码通过页面配置文件插入事件时，我才能获取所有事件：

```
$fql    =   "SELECT eid, creator, name, pic, timezone, start_time, end_time, location, description 
            FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid IN  ($clubsstring) )
            AND start_time > $today
            AND start_time < $nextweek
            ORDER BY start_time asc";

$param  =   array(
    'method'    => 'fql.query',
    'query'     => $fql,
    'callback'  => ''
);

$fqlResult   =   $facebook->api($param); 
```

谢谢卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:47:17.647

好吧，您确实可以根据场所进行搜索，但这只能是次要条件，因为场所字段不可索引。

这意味着您首先**必须**根据 eid（`Event`表中唯一的可索引字段）进行搜索，然后根据地点过滤这些结果。

问题是场地字段是一个数组，其中的字段并不总是存在，例如一个事件可能有这个作为场地：

```
"venue": {
    "id": VENUE_ID
} 
```

但另一个会有：

```
"venue": {
    "street": "", 
    "city": "", 
    "state": "", 
    "country": ""
} 
```

您应该能够通过以下方式获得您想要的东西：

```
SELECT eid, creator, name, pic, timezone, start_time, end_time, location, description 
FROM event
WHERE 
    ((eid IN (SELECT eid FROM event_member WHERE uid IN ($clubsstring)))
    OR
    (eid IN (SELECT eid FROM event_member WHERE uid IN (OWNERS_IDS_STRING)))
    AND
    venue.id IN (VENUE_IDS_STRING))
    AND start_time > $today
    AND start_time < $nextweek
    ORDER BY start_time asc; 
```

我还没有测试过这个查询，你可能需要对其进行一些修改才能工作，你也可以使用除`id`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:49:06.833

我用这个，它目前正在工作。

```
{"eventos":"SELECT start_time, end_time, name, eid, pic,venue.id, location, creator, description 
FROM event WHERE eid IN  (SELECT eid FROM event_member WHERE uid IN (  SELECT uid2 FROM friend WHERE uid1=me() LIMIT 150) 
 OR uid = me() AND rsvp_status = 'attending') AND venue.id <>'' 
 AND location <> '' AND location <> '#data'","lugares":"SELECT latitude,longitude  
 FROM place WHERE page_id IN (SELECT venue.id FROM #eventos)"} 
```

# tcp - 如何使用 nginx 或 apache 处理 tcp 入站流量并重定向到特定的 php 处理器？

> ID：10812993
> 
> 赞同：0
> 
> 时间：2012-05-30T08:53:47.910
> 
> 标签：tcp, nginx

这是主要思想，我想使用 NGINX 或 Apache 网络服务器作为 tcp 处理器，因此它们管理所有线程和连接以及客户端套接字，从端口接收的所有数据包，比如说，端口 9000 将被重定向到在php 或 python，该程序将处理每个请求，将数据存储在数据库中。最大的问题是这个程序需要向当前连接到 NGINX 或 Apache 服务器的客户端或套接字发送数据，有人告诉我应该做这样的事情，而不是创建自己的 TCP 服务器，即太难了，而且很难维护，因为负载很大的套接字通信可能会导致内存故障，甚至可能导致服务器崩溃。我以前做过，实际上服务器崩溃了。任何想法如何实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:09:28.717

apache/ nginx 是 Web 服务器，可用于为您的客户提供静态内容服务，并将应用程序服务请求转发到其他应用程序服务器。

我只知道 django，这里是 [Django、Apache 和 Nginx的配置中的 nginx 示例配置](https://stackoverflow.com/questions/4888562/configuration-for-django-apache-and-nginx)

```
location / {
       # proxy / requests to apache running django on port 8081
       proxy_pass         http://127.0.0.1:8081/;
       proxy_redirect     off;
}
location /media/ { 
    # serve static media directly from nginx
    root   /srv/anuva_project/www/;
    expires 30d;
    break;
} 
```

基于此配置，nginx 访问 /media/* 下 url 的本地静态数据，并将请求转发到位于 localhost 端口 8018 的 django 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:25:37.023

我觉得 HAProxy 肯定是一个更适合您需求的工具，这显然与 TCP 而不是 HTTP 有关。你至少应该试一试。

# c# - 我可以访问嵌入式资源并将其保存为文件吗？

> ID：10812996
> 
> 赞同：1
> 
> 时间：2012-05-30T08:53:51.837
> 
> 标签：c#, embedded-resource

我有一个 XML 文件，我想将它作为嵌入式资源包含在我的应用程序中，以便该文件与 .exe 一起编译并且对用户不可用。

现在，该文件位于

```
[approot]/ConfigurationFiles/Defaults/Core.xml 
```

我希望能够从这个嵌入式资源创建一个 XDocument，然后将其保存到磁盘上，以便用户可以访问它。

我怎样才能做到这一点？如何访问嵌入式资源并从中创建 XDocument？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:58:23.403

您只需打开一个流，读取资源并按照您的意愿使用它：

```
using (Stream stream = assembly.GetManifestResourceStream(".../ConfigurationFiles/Defaults/Core.xml"));
{
  // turn it to a XDocument and store it
  XDocument doc = XDocument.Load(stream);
  // ...
} 
```

资源的路径名由以下部分组成：

```
<Assembly default namespace>.<path to the resource>.<resource name> 
```

# php - PHP SDK，登录 - 转到 url 并发布到墙上

> ID：10812999
> 
> 赞同：0
> 
> 时间：2012-05-30T08:53:58.393
> 
> 标签：php, facebook, sdk

我制作了一个应用程序，允许用户从本地主机（展览）上传一张照片/视频到他们自己的墙上。

现在我要做的是获取 FB 登录页面，并在成功登录后重定向到“请稍候...”页面，该页面将在后台运行上传代码。否则用户必须在登录后等待而不知道发生了什么。

我试过了

```
"next" => "myurl", 
```

但它不起作用。

我正在使用 php sdk。

你有什么想法/参考吗？

**编辑：**

我的登录对话框代码：

```
$login_url = $facebook->getLoginUrl( array( 'scope' => 'photo_upload, publish_stream, share_item', 'next' => 'http://www.google.com') );

header ("Location: $login_url"); 
```

我想将此重定向到预加载器 html 页面，然后使用在我的 upload.php 中找到的正常上传代码上传

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:16:55.197

尝试像这样设置redirect_uri：

```
$facebook->getLoginUrl(array(
    'scope'        => 'photo_upload, publish_stream, share_item',
    'redirect_uri' => 'http://your.preloadpage'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T02:05:20.650

这是一个例子

```
$login_url = $facebook->getLoginUrl(array(
'scope' => 'photo_upload, publish_stream, share_item',
'fbconnect' => 1,
'canvas' => 0,
'next' => 'http://localhost/demo/facebook/index.php',
'redirect_uri' => 'http://localhost/demo/facebook/index.php',
)); 
```

参数“next”表示单击“完成”后要重定向的url

param "redirect_uri" 表示跳转到下一页后要重定向的url。

和的主机应该是你的，设置并添加到 facebook 应用程序设置中`redirect_uri`。`next`