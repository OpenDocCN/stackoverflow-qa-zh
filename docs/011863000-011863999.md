# StackOverflow 问答 11863000-11863999

# jquery - 带有jquery的表单在对话框中不起作用

> ID：11863001
> 
> 赞同：0
> 
> 时间：2012-08-08T10:53:50.133
> 
> 标签：jquery, forms, dialog, modal-dialog

我有 3 个按钮，每个按钮打开一个不同的表单进入一个对话框。按钮显示对话框正常，但我想在表单中使用 jquery。每当我尝试在表单中包含一些 jquery 功能来操作输入中的数据时，它永远不会起作用。

```
eg using: $("#doc").datepicker(); //dosnt seem to work
//OR
var $output = $("#length_of_service");
$("#doc").keyup(function() {
    var value = parseFloat($(this).val());
    $output.val(value*2);
}); 
```

有人对为什么它不起作用有任何想法吗？

**纽扣**

```
<a href="business_form.php" class="menubutton" id="add_business" title="Add Business Entitlement">Add Business Entitlement</a>
<a href="line_managers_form.php" class="menubutton" id="add_line_managers" title="Add Line Manager">Add Line Manager</a>
<a href="divisions_form.php" class="menubutton" id="add_divisions" title="Add Division">Add Division</a>

        $("#add_business")
            .button()
            .click(function() {
                $("#business-form").dialog( "open" );

            });
        $("#add_line_managers")
            .button()
            .click(function() {
                $("#line-managers-form").dialog( "open" );
            });

        $("#add_divisions")
            .button()
            .click(function() {
                $("#divisions-form").dialog( "open" );
            }); 
```

**形式**

```
<div>
<form id="business_form" action="insert_business_entitlement.php" method="POST" class="cmxform">

<fieldset style="float:left;">
   <legend><p class="subheadertext">Employee</p></legend>

<table width="100%" border="0">
  <tr>
    <td width="100px" valign="middle"><label for="acyear">Start of year:</label></td>
    <td valign="top">
    <select id="acyear" name="acyear">
      <option value="20120801">01/08/2012</option>
      <option value="20130801">01/08/2013</option>
      <option value="20140801">01/08/2014</option>
      <option value="20150801">01/08/2015</option>
    </select>
    </td>
    <td width="100px" valign="middle" align="right"><label for="length_of_service">Service length:</label></td>
    <td width="100px" valign="top" align="right"><input type="text" name="length_of_service" id="length_of_service" disabled="disabled"/></td> 
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="employee">Name:</label></td>
    <td valign="top"><input type="text" name="employee" id="employee" class="required"/></td> 
    <td width="100px" valign="middle" align="right"><label for="band">Band:</label></td>
    <td width="100px" valign="top" align="right"><input type="text" name="band" id="band" disabled="disabled"/></td>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="doc">Commencement:</label></td>
    <td valign="top"><input type="text" name="doc" id="doc" class="required"/></td>
    <td width="100px" valign="middle" align="right"><label for="new_entitlement">New entitlement:</label></td>
    <td width="100px" valign="top" align="right"><input type="text" name="new_entitlement" id="new_entitlement" disabled="disabled"/></td>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="ftpt">FT/PT:</label></td>
    <td valign="top">    
    <select id="ftpt" name="ftpt">
      <option value="FT">FT</option>
      <option value="PT">PT</option>
      <option value="SNR_MAN">SNR MAN</option>
    </select></td>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="weekly">Weekly Hours:</label></td>
    <td valign="top" colspan="3"><input type="text" name="weekly" id="weekly" class="required"/></td>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="entitlement">Entitlement:</label></td>
    <td valign="top" colspan="3"><input type="text" name="entitlement" id="entitlement" class="required"/>
    <select id="units" name="units" disabled="disabled">
      <option value="days">Days</option>
      <option value="hours">Hours</option>
    </select>
    </td>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="division">Division:</label></td>
    <td valign="top" colspan="3">
    <select id="division" name="division">
    <?php
    $connection = mysql_connect("localhost", "***", "***") or die ("Unable to connect!");   
    mysql_select_db("holidays", $connection) or die ("Unable to select database!");    

    $divisions_result = mysql_query("SELECT * from divisions");
    while($divisions = mysql_fetch_array($divisions_result)) {
    echo'<option value="'.$divisions['name'].'">'.$divisions['name'].'</option>';
    }
    ?>
    </select>
  </tr>
  <tr>
    <td width="100px" valign="middle"><label for="line_manager">Line Manager:</label></td>
    <td valign="top" colspan="3">
    <select id="line_manager" name="line_manager">
    <?php    
    $line_managers_result = mysql_query("SELECT * from line_managers");
    while($line_manager = mysql_fetch_array($line_managers_result)) {
    echo'<option value="'.$line_manager['name'].'">'.$line_manager['name'].'</option>';
    }
    ?>
    </select>
  </tr>
  </table>
<br/>
</fieldset>

</form>
</div> 
```

**JS**

```
 $(document).ready(dialogForms);
    function dialogForms() {
      $('a.menubutton').click(function() {
        var a = $(this);
        $.get(a.attr('href'),function(resp){
          var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
          $('body').append(dialog);
          dialog.find(':submit').hide();
          dialog.dialog({
            title: a.attr('title') ? a.attr('title') : '',
            modal: true,
            buttons: {
              'Save': function() {
                    submitFormWithAjax($(this).find('form'));
                    $(this).dialog('close');
                    },
              'Cancel': function() {$(this).dialog('close');}
            },
            close: function() {$(this).remove();},
            width: 600,
            height: 500,        
            show: "fade",
            hide: "fade"
          });
        }, 'html');
        return false;
      });
    }
    function submitFormWithAjax(form) {
      form = $(form);
      $.ajax({
        url: form.attr('action'),
        data: form.serialize(),
        type: (form.attr('method')),
        dataType: 'script',
        success: function(data){
        $(this).dialog('close');
        // Refresh table
       }
      });
      return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:50:59.143

尝试这样的事情

```
 function dialogForms() {
          $('a.menubutton').click(function() {
            var a = $(this);
            $.get(a.attr('href'),function(resp){
              var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
              $('body').append(dialog);
              dialog.find(':submit').hide();
              dialog.dialog({
                title: a.attr('title') ? a.attr('title') : '',
                modal: true,
                buttons: {
                  'Save': function() {
                        submitFormWithAjax($(this).find('form'));
                        $(this).dialog('close');
                        },
                  'Cancel': function() {$(this).dialog('close');}
                },
                close: function() {$(this).remove();},
                width: 600,
                height: 500,        
                show: "fade",
                hide: "fade"
              });

                 // do initialization here
                 $("#doc").datepicker();
                 var $output = $("#length_of_service");
                 $("#doc").keyup(function() {
                   var value = parseFloat($(this).val());
                   $output.val(value*2);
                 });

            }, 'html');
            return false;
          });
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:50:28.847

不确定我是否理解您的问题，但您想为每个按钮打开一个不同的对话框吗？而且每个对话都有不同的形式？

您不能在 html 中创建所有 3 个表单，然后创建对话框，并且每当您单击按钮时，都会打开相应的表单？

像这样的东西：http: [//jsfiddle.net/v8bDe/44/](http://jsfiddle.net/v8bDe/44/)

这只是一个简单的例子，显然你必须确保你没有具有相同 id 的元素（我只是复制了 2 次表单）。

此外，您可以在 jsfiddle 链接中看到 datepicker 工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:09:04.750

如果我的问题是正确的，那么您的问题似乎是您通过 ajax 加载表单并希望将一些 jquery-stuff 应用于新加载的元素。如果在加载元素之前声明 jquery，则声明将不起作用，因为 jquery 只能对 dom 上已存在的元素起作用。

解决方案是使用 $.on() 函数： [http ://api.jquery.com/on/](http://api.jquery.com/on/)

示例：http: [//jsfiddle.net/7gQ32/](http://jsfiddle.net/7gQ32/)

# google-plus - Google plus API 获取公司页面的 +1 计数

> ID：11863002
> 
> 赞同：4
> 
> 时间：2012-08-08T10:53:56.670
> 
> 标签：google-plus, google-plus-one

是否有 google plus API 来拉取公司页面的 +1 计数？例如公司页面： https: [//plus.google.com/111883881632877146615/posts](https://plus.google.com/111883881632877146615/posts)

我想通过 API 获得 +1 计数（公司页面的关注者）。我们可以从这里 developers.google.com/+/plugins/badge/ 获得一个徽章，它提供了这些信息，但我们可以从 API 获得这个信息吗？我认为我们也不能刮掉它，因为它是由 javascript 生成的

请看图片： [http ://syumus.com/linkedin/gpluscount.png](http://syumus.com/linkedin/gpluscount.png)

我们可以为此进行 API 调用吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:10:05.293

没有提供此编号的受支持 API。如果您想在您的页面上显示它，您必须使用屏幕截图中的 Google+ 徽章。

有一个对提供此数据的 API 的[开放请求](http://code.google.com/p/google-plus-platform/issues/detail?id=57)。如果您为问题加注星标，则会在更新时收到通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T11:01:57.817

看看这个页面：[http ://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/](http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/)

# windows-server-2003 - (Windows Server 2003) CACLS.EXE 用法

> ID：11863005
> 
> 赞同：2
> 
> 时间：2012-08-08T10:54:03.127
> 
> 标签：windows-server-2003, cacls

我有一条具有以下权限的路径：

```
E:\MY_PATH                  BUILTIN\Administrators:(OI)(CI)F
                            NT AUTHORITY\SYSTEM:(OI)(CI)F
                            BUILTIN\Administrators:F
                            CREATOR OWNER:(OI)(CI)(IO)F
                            BUILTIN\Users:(OI)(CI)R
                            BUILTIN\Users:(CI)(special access:)
                                              FILE_APPEND_DATA

                            BUILTIN\Users:(CI)(special access:)
                                              FILE_WRITE_DATA 
```

在此路径中有一个我无法修改或删除的文本文件：我只能追加行。

我想知道如何才能暂时授予对该文件的写入权限，然后返回原始设置。

这是一个日志文件，它变得太大了，所以我想省略旧的行，只保留最近的 1000 行。

但我没有删除行或删除文件的权限。

请帮忙。

先感谢您。

我刚刚读过 CACLS /? 但我不明白如何使用这个命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:29:52.620

我不太确定你想如何解决这个问题。
你为什么不给用户总是修改日志的权利呢？如果管理员需要更改 ACL，那么他为什么不编辑日志文件？日志服务/应用程序运行时可以编辑日志吗？

这么多问题，现在来回答我。我会使用icacls，而不是cacls。

授予权利：
`icacls logfilename /grant *S-1-5-32-545:(WD)`

要删除权限（*仅当授予的 ACL 条目是该文件上该用户的唯一条目时才有效！*）：
`icacls logfilename /remove *S-1-5-32-545`

我使用的是 SID 而不是上面调用中的名称，因为 SID 独立于操作系统语言，并且在您的英语 Windows 和我的德语 Windows 上的工作方式相同。

如果您想要保存恢复逻辑，您可以保存文件的 ACL 调用
`icacls logfilename /save aclsavefile`
并使用恢复 ACL
`icacls . /restore aclsavefile`

如您所见，保存需要文件名，恢复需要文件夹名（文件名存储在 aclsavefile 中并从那里获取）。注意：在 Windows 7 上，恢复 ACL 需要（备份？）权限，并且只能在以管理员身份运行时完成。

# xaml - 使用 xaml 阅读器加载的外部 xaml 文件中的自定义命令

> ID：11863011
> 
> 赞同：0
> 
> 时间：2012-08-08T10:54:32.817
> 
> 标签：xaml, command, xml-namespaces

我迷失了自定义命令和绑定。我有一个主要的 XAML 文件，它只是一个容器。

```
<Window x:Class="MyNS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"         
        xmlns:a="clr-namespace:MyNS.Actions"
        Title="MainWindow" Height="350" Width="525">
    <Window.CommandBindings>
        <CommandBinding 
                    Command="{x:Static a:OpenWindow.Cmd}"                
                    CanExecute="CanExecuteActionAsCommand" 
                    Executed="ExecuteActionAsCommand" />
    </Window.CommandBindings>

    <Grid Name="ContentPanel">

    </Grid>
</Window> 
```

现在我想在运行时使用 XAML 阅读器加载一个额外的 XAML 文件。总而言之，它工作正常。但是现在我有一个带有自定义命令的按钮，我迷路了。附加文件如下所示：

```
<StackPanel             
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
            xmlns:a="clr-namespace:MyNS.Actions">

      <Button Content="Show Properties" Grid.Row="1" 
              Command="{x:Static a:OpenWindow.Cmd}" 
              CommandParameter="startup_screen2" />
</StackPanel> 
```

现在的问题是 XAML 阅读器无法解决“x:Static”。

我的问题是是否有人知道如何定义我可以在我的附加 XAML 文件中调用它的自定义命令。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:59:23.787

尝试将程序集名称添加到松散 XAML 中 xmlns:a 的命名空间声明中：

```
xmlns:a="clr-namespace:MyNS.Actions";assembly=YourAssemblyName 
```

现在 XamlReader 应该找到您的自定义命令。

# jquery - Hovering on buttons using jquery?

> ID：11863015
> 
> 赞同：0
> 
> 时间：2012-08-08T10:54:52.363
> 
> 标签：jquery, button, hover

Doing a hovering event on button as below.

```
<div id="common_id">
<div class="button" id="make_larger">
<button type="button">Large</button> 
</div>
<div class="button" id="make_small">
<button type="button">Smaller</button> 
</div>
<div class="button" id="make_normal">
<button type="button">Normal</button> 
</div>
</div> 
```

JQuery code is:

```
 $('#common_id .button').hover(function () {
            $(this).addClass('hover1');
        }, function () {
            $(this).removeClass('hover1');

        }); 
```

Css is:

```
.hover1 {

background-color:Black;
position:relative;

} 
```

When placing mouse over buttons ,the complete row(From starting to end of page) is getting black even button is not getting black but its background is seems to be black along that row. i want the button to be black when i hover on it. Why it is not working?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:58:05.583

Remove the jQuery entirely and use:

```
#common_id .button:hover {
    background-color:Black;
    position:relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:09:28.910

Sohhee's answer is right,but I think the CSS script you need should be

```
#common_id .button botton:hover {
   background-color:Black;
   position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:58:20.423

the div is taking the 100% width. so instead of selecting the div select the button. So your selector should look like this

```
$('#common_id .button button').hover(function () {
            $(this).addClass('hover1');
        }, function () {
            $(this).removeClass('hover1');

        });​ 
```

Try this [fiddle](http://jsfiddle.net/rekQ9/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:01:16.660

I think the css only answer is the best - but you can select buttons on a page by using the jQuery selector $('button'), like in this example: [http://jsfiddle.net/2fH7f/](http://jsfiddle.net/2fH7f/)

# google-chrome - 检查用户是否在 Windows 7 Chrome 中以管理员模式登录

> ID：11863018
> 
> 赞同：0
> 
> 时间：2012-08-08T10:55:04.427
> 
> 标签：google-chrome, administrator

我需要通过浏览器更改用户的设置，用户通常右键单击 Chrome 并选择以管理员模式打开，是否可以自动检查用户是否以管理员身份登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:52:04.343

签名的 Java Applet 是我的解决方法，我将文件复制到那里 pc 上的客户端临时文件夹中，如果成功，那么我对客户端浏览器具有管理员权限。

# php - 从 Google 服务帐户编辑 Google 日历事件：403

> ID：11863022
> 
> 赞同：6
> 
> 时间：2012-08-08T10:55:12.260
> 
> 标签：php, google-api, google-calendar-api

我想从服务帐户在谷歌日历上创建新活动。我可以正确访问并打印我所有日历的列表。但是当我想创建一个新事件时，响应是 403 Forbidden。

我的代码：

```
require_once 'src/Google_Client.php';
require_once 'src/contrib/Google_CalendarService.php';

session_start();

const CLIENT_ID = 'XXXXXXXXXX.apps.googleusercontent.com';
const SERVICE_ACCOUNT_NAME = 'XXXXXXXXXXXX@developer.gserviceaccount.com';

const KEY_FILE = 'google_src/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX-privatekey.p12';

$client = new Google_Client();
$client->setApplicationName("APP_NAME");

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

$key = file_get_contents(KEY_FILE);
$client->setClientId(CLIENT_ID);
$client->setAssertionCredentials(new Google_AssertionCredentials(
  SERVICE_ACCOUNT_NAME,
  'https://www.google.com/calendar/feeds/MY_CALENDAR_ID/private/full/',
  $key)
);

$client->setClientId(CLIENT_ID);
$cal = new Google_CalendarService($client);
$event = new Google_Event();
$event->setSummary('Bon dia pel matí!');
$event->setLocation('Somewhere');
$start = new Google_EventDateTime();
$start->setDateTime('2012-08-06T10:00:00.000-07:00');
$event->setStart($start);
$end = new Google_EventDateTime();
$end->setDateTime('2012-09-06T10:25:00.000-07:00');
$event->setEnd($end);

$createdEvent = $cal->events->insert(CALENDAR_NAME, $event); 
```

和服务器响应：

```
(403) Forbidden 
```

有任何想法吗？也许是其他范围，或者允许编辑事件（我不知道我可以在哪里配置它，我已经搜索过了，保证）

当然，我的日历是公共日历。

欢迎任何帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T08:14:03.687

我解决了，问题不是代码，它工作正常。

问题是共享我的日历。我不知道的东西。

要允许从服务帐户编辑您的日历事件，您在 Google Api 控制台中执行的所有步骤还不够，您必须从您的日历配置（日历配置 -> 共享此日历）授予指定到 Google 的电子邮件帐户的权限Api 控制台（电子邮件地址）。

如果是企业帐户，这可能是个问题，那么您必须联系帐户管理员。

这里显示的代码可以正常工作，所以我希望它对某人有所帮助，请记住您必须使用 475 版本的 Google Api Client。

~~您可以在此链接中找到：http: [//google-api-php-client.googlecode.com/svn/trunk/src/](http://google-api-php-client.googlecode.com/svn/trunk/src/)~~

# android - Android：光标窗口已满

> ID：11863024
> 
> 赞同：21
> 
> 时间：2012-08-08T10:55:18.810
> 
> 标签：android, memory, sqlite, blob

> W/CursorWindow(15677)：窗口已满：请求分配 2195889 字节，可用空间 2096720 字节，窗口大小 2097152 字节

我知道有可用的应用程序内存：

> D/dalvikvm(15677)：GC_FOR_ALLOC 释放 9K，30% 释放 17050K/24291K，暂停 45ms

所以它纯粹与光标大小窗口有关，当读`blob`入`byte[]`.

我使用内置方法从游标读取 blob。

```
 try
    {
        c = rdb.query("Photos", new String[]{"photo"}, "id = ?", new String[]{""+photoID}, null, null, null);
        if(c.moveToFirst())
        {
            byte[] tArray = c.getBlob(c.getColumnIndex("photo")); // THIS LINE ERRORS
        }               
    }catch(Exception e)
    {
        e.printStackTrace();
    }
    c.close();

    return tArray; 
```

有没有解决的办法？窗口大小似乎限制为 2097152 字节。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T15:20:28.043

似乎解决此问题的最佳方法是将照片存储在 SDCard 上，并将 URI 保存在数据库中。

虽然我想避免这种情况，但它并不算太糟糕，而且更加稳定。

# android - Galaxy S3 的字体大小问题

> ID：11863035
> 
> 赞同：0
> 
> 时间：2012-08-08T10:55:56.900
> 
> 标签：android, android-layout, android-alertdialog, android-dialog

我正在使用下面的代码在我的应用程序中显示一个弹出窗口。

```
final String[] items = {"Vishal", "Android", "Issue"};

        Button btnClick = (Button)findViewById(R.id.btnClick);
        btnClick.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                builderAppointmentNew = new AlertDialog.Builder(MainActivity.this);
                builderAppointmentNew.setTitle("Dialogs");
                builderAppointmentNew.setItems(items,
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int item) {
                            }
                        });
                builderAppointmentNew.show();
            }
        }); 
```

现在的问题是当我在 Galaxy S3（4.65in 720p/SDK）上运行相同的程序时，在我触摸它之前，对话框无法正确显示。

![触摸屏幕之前](../Images/de3ff0dd7b4ccb3f5a3b1fb129bd1ec9.png)![触摸屏幕后](../Images/d5dcda3bf86be2efb9b823f80c7c8a14.png)

当我触摸对话框时，它会像第二个屏幕截图一样正确呈现。

我的清单包含..

```
 <uses-sdk android:minSdkVersion="3" /> 
```

它与我拥有的其他设备一起工作正常。

**更新 ：**

如果我将**android:minSdkVersion="3"**更改为**android:minSdkVersion="8"**，那么它可以正常工作，但我无法按照应用程序要求进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:47:47.397

将您的应用程序目标设置*为至少*SDK 版本 11，并将最低 SDK 版本保留为 3，如果这是您可以获得的最低版本。

在你的情况下应该是这样的：

```
<uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="11" /> 
```

# http - 提琴手：如何禁用覆盖标头主机

> ID：11863037
> 
> 赞同：11
> 
> 时间：2012-08-08T10:55:57.167
> 
> 标签：http, fiddler, host

使用 Fiddler 时，会弹出一个警告对话框。

```
Fiddler has detected a protocol violation in session #14.

The Request's Host header did not match the URL's host component.

URL Host:   proxy.music.pp.com
Header Host:    119.147.22.41 
```

它表明 Fiddler 将 HTTP Header 的主机更改为“proxy.music.pp.com”，有没有办法禁用 Fiddler 更改它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T19:33:08.883

从我的[书中](http://www.fiddlerbook.com/)：

**交换主机头**

当 Fiddler 收到 URL 与其 Host 标头不匹配的请求时，原始 Host 值存储在会话标志中`X-Original-Host`，然后将该`Host`值替换为从 URL 解析的主机。以下脚本放置在 FiddlerScript 的`BeforeRequest`函数中，通过将请求路由到原始 Host 标头指定的主机来反转行为。

```
if (oSession.BitFlags & SessionFlags.ProtocolViolationInRequest) 
{
  var sOverride = oSession["X-Original-Host"];
  if (!String.IsNullOrEmpty(sOverride)) 
  {
    oSession["X-overrideHost"] = sOverride;
    oSession["ui-backcolor"] = "yellow";

    // Be sure to bypass the gateway, otherwise overrideHost doesn't work
    oSession.bypassGateway = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:04:52.277

你可以用规则来做到这一点。

进入自定义规则，找到函数：`OnBeforeRequest(oSession: Session)`

然后添加以下内容作为该函数的最后一行：

```
if (oSession.HostnameIs("proxy.music.pp.com")) { oSession.host = "119.147.22.41"; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T19:05:14.230

我不明白“url 主机”应该是什么——我的意思是，通常情况下，HTTP 中只有 Host 标头。

仔细观察，似乎这种违规发生在初始代理“设置”请求中，如下所示：

```
 CONNECT targaryen:45633 HTTP/1.1
 Host: targaryen 
```

这就是错误对我有意义的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T22:22:26.627

我无法获得现有答案所需的信息，但 Eric Law 的回答为我提供了解决问题所需的信息。我在通过 IP 地址调用 Web 服务器时遇到问题，我必须添加 Host 标头才能获得正确的端点。Fiddler 将 Host 标头更改为我正在调用的 IP 地址并删除了我的 Host 标头值，这导致调用失败。我在 Eric 的脚本中添加了一行来解决这个问题。我将规则放入Fiddler 规则脚本中的*OnBeforeRequest中。*

```
 if (oSession.BitFlags & SessionFlags.ProtocolViolationInRequest) 
    {
        var sOverride = oSession["X-Original-Host"];

        if (!String.IsNullOrEmpty(sOverride)) 
        {
            oSession["X-overrideHost"] = sOverride;
            oSession["ui-backcolor"] = "yellow";
            oSession.oRequest["Host"] = sOverride;

            // Be sure to bypass the gateway, otherwise overrideHost doesn't work
            oSession.bypassGateway = true;
        }
    } 
```

**出现此错误：**
[![404错误](../Images/9c7d575389ef79e07cbb9a50f416f05b.png)](https://i.stack.imgur.com/CxRm7.png) [![错误的请求](../Images/04722ea419b7c652aed7457d58092f08.png)](https://i.stack.imgur.com/Ci5sW.png)

**并将其更改为：** [![200 响应](../Images/73fbf5513ece08315cee7b8a6320a5c2.png)](https://i.stack.imgur.com/VfJrw.png) [![好的请求](../Images/ba03a86b1a98ac038ae8b59895dd4a3e.png)](https://i.stack.imgur.com/0TTdT.png)

# java - 如何使用java获取xml节点的属性值

> ID：11863038
> 
> 赞同：21
> 
> 时间：2012-08-08T10:56:08.820
> 
> 标签：java, xml, xmlnode, xml-attribute

我有一个看起来像这样的 xml：

```
{ <xml><ep><source type="xml">...</source><source type="text">..</source></ep></xml>} 
```

在这里，我想检索“源类型”的值，其中 type 是一个属性。

我试过这样，但它不起作用：

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
                try {
                    DocumentBuilder builder = domFactory.newDocumentBuilder();
                    Document dDoc = builder.parse("D:/workspace1/ereader/src/main/webapp/configurations/config.xml");
                    System.out.println(dDoc);
                    XPath xPath = XPathFactory.newInstance().newXPath();
                    Node node = (Node) xPath.evaluate("//xml/source/@type/text()", dDoc, XPathConstants.NODE);
                    System.out.println(node);
                } catch (Exception e) {
                    e.printStackTrace(); 
```

我也试过这个：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            InputSource is = new InputSource(new StringReader("config.xml"));
            Document doc = builder.parse(is);

            NodeList nodeList = doc.getElementsByTagName("source");

            for (int i = 0; i < nodeList.getLength(); i++) {                
                Node node = nodeList.item(i);

                if (node.hasAttributes()) {
                    Attr attr = (Attr) node.getAttributes().getNamedItem("type");
                    if (attr != null) {
                        String attribute= attr.getValue();                      
                        System.out.println("attribute: " + attribute);                      
                    }
                }
            } 
```

请帮助我！！

在此先感谢，瓦尔沙。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-08T11:15:05.667

由于您的问题更通用，因此请尝试使用 Java 中可用的 XML Parsers 来实现它。如果您需要它特定于解析器，请在此处更新您已尝试过的代码

```
<?xml version="1.0" encoding="UTF-8"?>
<ep>
    <source type="xml">TEST</source>
    <source type="text"></source>
</ep> 
```

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse("uri to xmlfile");
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("//ep/source[@type]");
NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);

for (int i = 0; i < nl.getLength(); i++)
{
    Node currentItem = nl.item(i);
    String key = currentItem.getAttributes().getNamedItem("type").getNodeValue();
    System.out.println(key);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:53:12.920

尝试这样的事情：

```
 DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document dDoc = builder.parse("d://utf8test.xml");

    XPath xPath = XPathFactory.newInstance().newXPath();
    NodeList nodes = (NodeList) xPath.evaluate("//xml/ep/source/@type", dDoc, XPathConstants.NODESET);
    for (int i = 0; i < nodes.getLength(); i++) {
        Node node = nodes.item(i);
        System.out.println(node.getTextContent());
    } 
```

请注意更改：

*   我们要求一个节点集（XPathConstants.NODESET），而不仅仅是一个节点。
*   xpath 现在是 //xml/ep/source/@type 而不是 //xml/source/@type/text()

PS：您可以将标签 java 添加到您的问题中吗？谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T05:00:43.697

我很高兴这个片段可以正常工作：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document document = db.parse(new File("config.xml"));
NodeList nodeList = document.getElementsByTagName("source");
for(int x=0,size= nodeList.getLength(); x<size; x++) {
    System.out.println(nodeList.item(x).getAttributes().getNamedItem("type").getNodeValue());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-22T13:49:39.630

采用

> document.getElementsByTagName(" * ");

要从 XML 文件中获取所有 XML 元素，但这确实会返回重复的属性

例子：

> NodeList list = doc.getElementsByTagName("*");
> 
> System.out.println("XML 元素：");

```
 for (int i=0; i<list.getLength(); i++) {

            Element element = (Element)list.item(i);
            System.out.println(element.getNodeName());
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-26T00:25:40.423

下面是在[VTD-XML中执行此操作的代码](http://vtd-xml.sf.net)

```
import com.ximpleware.*;

public class queryAttr{
     public static void main(String[] s) throws VTDException{
         VTDGen vg= new VTDGen();
         if (!vg.parseFile("input.xml", false))
            return false;
         VTDNav vn = vg.getNav();
         AutoPilot ap = new AutoPilot(vn);
         ap.selectXPath("//xml/ep/source/@type");
         int i=0;
         while((i = ap.evalXPath())!=-1){
               system.out.println(" attr val ===>"+ vn.toString(i+1));

         }
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-09T13:41:54.160

```
public static void main(String[] args) throws IOException {
    String filePath = "/Users/myXml/VH181.xml";
    File xmlFile = new File(filePath);
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder;
    try {
        dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(xmlFile);
        doc.getDocumentElement().normalize();
        printElement(doc);
        System.out.println("XML file updated successfully");
    } catch (SAXException | ParserConfigurationException e1) {
        e1.printStackTrace();
    }
}
private static void printElement(Document someNode) {
    NodeList nodeList = someNode.getElementsByTagName("choiceInteraction");
    for(int z=0,size= nodeList.getLength();z<size; z++) {
            String Value = nodeList.item(z).getAttributes().getNamedItem("id").getNodeValue();
            System.out.println("Choice Interaction Id:"+Value);
        }
    } 
```

我们可以使用方法尝试此代码

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T09:04:18.153

下面是我编写的实用方法，用于从根 Document 对象和给定 XPATH 中获取任何节点的值。

```
public String getValue(Document doc, String xPath) throws Exception {
   XPathFactory factory = XPathFactory.newInstance();
   XPath path = factory.newXPath();
   XPathExpression expression = path.compile(xPath);
   Node node = (Node) expression.evaluate(doc,XPathConstants.NODE);
   return node.getFirstChild().getNodeValue();
} 
```

所有的库都来自**java.xml.xpath**和 **org.w3c.dom。**

现在您只需要根文档元素和正确的路径。对于你的例子，如果 /ep/source/@type

所以，基本上 XPAth 是导航到您所关注的元素，然后是您感兴趣的**/@attributeName 。**

请节点**/ep/source@type**不起作用。（我浪费了 30 分钟来解决这个问题）。

# regex - 正则表达式解析文件路径

> ID：11863039
> 
> 赞同：0
> 
> 时间：2012-08-08T10:56:12.610
> 
> 标签：regex, regex-greedy

我有这段文字：

> 创建调试信息文件 'c:\Users\Path1\Path2\Strategies\Path3\CustomStrategy.PDB' 出现意外错误 -- 'c:\Users\Path1\Path2\Strategies\Path3\CustomStrategy.pdb: 系统找不到路径指定的。

我需要解析出文件路径，`c:\Users\Path1\Path2\Strategies\Path3`或者`c:\Users\Path1\Path2\Strategies\Path3\CustomStrategy.PDB`更容易。我尝试使用以下正则表达式

```
\w:.+[.]\w{3} 
```

但是，这个正则表达式不会在第一个文件扩展名处停止，而是继续匹配路径的第二个实例，在 .pdb 的第二个实例处停止；因此将两个文件路径放在一个正则表达式匹配中。

为了使正则表达式将两条路径解析为两个单独的匹配项，我需要更改什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:00:23.060

非贪婪：

```
\w:.+?[.]\w{3} 
```

`?`后注意`+`。

另外，如果你的路径除了最后一个点之外没有点，你可以这样写：

```
\w:[^.]+[.]\w{3} 
```

如果您不确定扩展名是否由三个字母组成，则必须指定范围：

```
\w:[^.]+[.]\w{1,3} 
```

如果你不确定你的路径是否有扩展名，但它不包含空格，那么：

```
\w:\S+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:10:20.830

那这个呢

```
\w:\\(?:[^\\\s]+\\)+ 
```

[在 Regexr 上](http://regexr.com?31p77)查看

`\w:\\`匹配单词字符、a`:`和反斜杠

`(?:[^\\\s]+\\)+`匹配目录，非反斜杠或非空白字符直到反斜杠，并且重复。

因此，这将匹配两个路径`c:\Users\Path1\Path2\Strategies\Path3`。只要目录名称不包含空格就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:06:17.190

实际上，在这里您也可以完全不使用正则表达式。拆分文本`'`并使用第二部分。

* * *

至于正则表达式，我会使用更复杂的东西，但允许捕获其他文件名，而不仅仅是那些以 3 个字母扩展名结尾的文件名：

```
'([a-z]:(?:[\\/][^\\/]*)+?)' -- 
```

（并使用匹配的第一个子模式）

# templates - 为炼油厂 CMS 添加新模板

> ID：11863042
> 
> 赞同：0
> 
> 时间：2012-08-08T10:56:20.167
> 
> 标签：templates, refinerycms

如何解决问题`Can't add the new template in Refinery CMS`？[我们通过指南](http://refinerycms.com/guides/using-custom-view-or-layout-templates)添加流程。新模板在 3000 端口成功显示，但不显示 80 端口。我们正在使用服务器和`nginx`插件。`unicorn``capistrano`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:29:38.007

我找到了答案：因为 capistrano 需要再次创建构建。我们不能改变原始来源。如果您不想再次构建，则必须在此源中构建和更改源代码。

# asp.net-mvc-4 - NuGet 无法安装 Microsoft.AspNet.Providers.Core -“无法生成绑定重定向”

> ID：11863043
> 
> 赞同：1
> 
> 时间：2012-08-08T10:56:20.067
> 
> 标签：asp.net-mvc-4, nuget, visual-studio-2012

尝试在 Visual Studio 2012 RC/.NET 4.0/MVC 4 中使用 NuGet 2.0.30619.9119 安装包“Microsoft.AspNet.Providers.Core”1.0，我从 NuGet 收到以下错误消息：

```
Failed to generate binding redirects for 'MyProject'. Error HRESULT E_FAIL has been returned from a call to a COM component. 
```

这是什么意思？有没有办法解决它？我在 CodePlex 得到了这个包的相应[错误报告。](http://nuget.codeplex.com/workitem/2488)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:27:51.863

Microsoft.AspNet.Providers.Core 1.1 版和 NuGet 2.1.31002.9028 版似乎解决了这个问题。

# jsp - 提交 varStatus 值总是发送相同的值

> ID：11863052
> 
> 赞同：0
> 
> 时间：2012-08-08T10:56:48.553
> 
> 标签：jsp

```
<form:form modelAttribute="someModel">
        <c:forEach items="${someModel.someList}" var="row" varStatus="status">
                 Id ${row.id} status ${status.index}
                 <form:input path="id" type="hidden" value="${row.id}"/>
                 <input type="submit" id="save"  name="_eventId_someFunction" value="Save"/>
                 <input type="hidden" name="id" value="${row.id}" />
        </c:forEach>
    </form:form> 
```

有了这段代码，我看到它`Id ${row.id} status ${status.index}`显示了不同的值，但动作`_eventId_someFunction`总是收到第一个。可能是什么问题呢？

我正在使用弹簧网络流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:20:59.910

您的循环在表单内。因此，每次提交时，您都会提交所有输入（所有行的 ID），而不仅仅是与您单击的提交按钮位于同一行的输入。

将表单放入循环中，一切都应该按预期工作。

# javascript - 隐藏详细信息时 DataTables 插件不起作用

> ID：11863053
> 
> 赞同：1
> 
> 时间：2012-08-08T10:56:50.253
> 
> 标签：javascript, jquery, datatables

我正在使用[DataTables](http://www.datatables.net) jQuery 插件，当我想在现有表上插入隐藏详细信息选项时遇到问题，此选项应如下所示：[LINK](http://datatables.net/release-datatables/examples/api/row_details.html)

我的问题是表头已正确插入，但我没有看到带有加号的表列以展开并查看详细信息。

这是我的代码，您可以看到它几乎是偶然的，因为它位于我提供的链接上。

编码：

```
/* Formating function for row details */
function fnFormatDetails ( oTable, nTr )
{
    var aData = oTable.fnGetData( nTr );
    var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
    sOut += '<tr><td>Rendering engine:</td><td>'+aData[1]+' '+aData[4]+'</td></tr>';
    sOut += '<tr><td>Link to source:</td><td>Could provide a link here</td></tr>';
    sOut += '<tr><td>Extra info:</td><td>And any further details here (images etc)</td></tr>';
    sOut += '</table>';

    return sOut;
}

$(document).ready(function() {

    /*
     * Insert a 'details' column to the table
     */
    var nCloneTh = document.createElement( 'th' );
    var nCloneTd = document.createElement( 'td' );
    nCloneTd.innerHTML = '<img src="../images/details_open.png">';
    nCloneTd.className = "center";

    $('#jphit thead tr').each( function () {
        this.insertBefore( nCloneTh, this.childNodes[0] );
    } );

    $('#jphit tbody tr').each( function () {
        this.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
    } );

    var oTable=$('#jphit').dataTable( {
             "sDom": 'T,C<"clear">lfrtip',
             "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf"
        },
             "oColVis": {
             "buttonText": "Extend table",
            "activate": "mouseover"
        },
        "aoColumnDefs": [ 
      { //"bVisible": false, "aTargets": [ 0 ],
        "bSortable": false, "aTargets": [ 0 ]     }
    ],
            "aaSorting": [[1,'asc']],
            "bProcessing": true,
            "bServerSide": true,
            "sPaginationType": "full_numbers",
            "sScrollY": "350px",
            "bDeferRender": true,
            "sAjaxSource": "increment_table.php"
        } );

    /* Add event listener for opening and closing details
     * Note that the indicator for showing which row is open is not controlled by DataTables,
     * rather it is done here
     */
    $('#jphit tbody td img').live('click', function () {
        var nTr = $(this).parents('tr')[0];
        if ( oTable.fnIsOpen(nTr) )
        {
            /* This row is already open - close it */
            this.src = "../images/details_open.png";
            oTable.fnClose( nTr );
        }
        else
        {
            /* Open this row */
            this.src = "../images/details_close.png";
            oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );
        }
    } );

    } ); 
```

当我调试时，我意识到这段代码已被处理，但它没有画出它应该画的东西：

```
$('#jphit tbody tr').each( function () {
        this.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
    } ); 
```

知道我的代码可能出了什么问题吗？如果有人在使用这个插件，你能帮忙并分享你的经验吗？

编辑：

这是我得到的图片。它应该向右移动一个位置，在那个空列中，我应该有一张图片来打开详细信息

![桌子](../Images/3c3805a374d081992fd8c4eabbae7f78.png)

编辑2：

我尝试将此代码与我在表中手动编写的数据一起使用，并且运行良好。

我已经厌倦了将代码放在 fnDrawCallback 函数中，但是我有 2 个标题，因为我的表格绘制了两次。

如何将它与 sAjaxSource 一起使用？

```
var oTable = $('#jphit').dataTable( {
         "sDom": 'T,C<"clear">lfrtip',
             "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf"
        },
             "oColVis": {
             "buttonText": "Extend table",
            "activate": "mouseover"
        },
        "aoColumnDefs": [ 
      { //"bVisible": false, "aTargets": [ 0 , 2 ] ,
        "bSortable": false, "aTargets": [ 0 ] }
    ],
            "bProcessing": true,
            //"bServerSide": true,
            "sPaginationType": "full_numbers",
            "sScrollY": "350px",
            "bDeferRender": true,
            //"sAjaxSource": "live_table.php",
            "fnDrawCallback": function( oSettings )  {
                var nCloneTh = document.createElement( 'th' );
                var nCloneTd = document.createElement( 'td' );
                nCloneTd.innerHTML = '<img src="images/details_open.png" style="width:25px; height:25px;">';
                nCloneTd.className = "center";

                $('#jphit thead tr').each( function () {
                    this.insertBefore( nCloneTh, this.childNodes[0] );
                } );

                $('#jphit tbody tr').each( function () {
                    this.insertBefore(  nCloneTd, this.childNodes[0] );
                } );

            }
        } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:38:46.573

这里的问题是表根据来自响应的数据呈现数据。我想有一个 aaData 数组，其中 0 索引填充有值，它按预期插入到第一列中。

您可以使用这种方法[http://datatables.net/release-datatables/examples/ajax/null_data_source.html](http://datatables.net/release-datatables/examples/ajax/null_data_source.html)

在您的情况下，您可以将 aoColumnDefs 选项更改为：

```
"aoColumnDefs": [ {
     "bSortable": false, mData : null, "aTargets": [ 0 ] 
}], 
```

**编辑覆盖 fnServerData**

我的另一个想法是覆盖 fnServerData 回调，以根据需要更改数据源。

```
"fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
      oSettings.jqXHR = $.ajax( {
        "dataType": 'json',
        "type": "POST",
        "url": sSource,
        "data": aoData,
        "success": function(jsonData) {
            //Here you need to shift jsonData aoData array values to right
            //to add [0] index in all values.
            //I have no possibility to test it today:( but hope it will help you
            //and Then you need to call fnCallback(jsonData) with changed jsonData

            for (var data in jsonData["aoData"]) {
               jsonData["aoData"][data].unshift(0);
            }

            fnCallback(jsonData);
        }

      } );
    } 
```

希望能帮助到你。

# actionscript-3 - 使用 Adob e Air 打开未关联的文件

> ID：11863056
> 
> 赞同：1
> 
> 时间：2012-08-08T10:57:05.293
> 
> 标签：actionscript-3, apache-flex, air

我知道可以使用`openWithDefaultApplication`文件类的方法使用默认应用程序打开文件。但是，当您尝试使用此方法打开未关联的文件（可能是专有或自定义扩展名）时，会引发运行时错误。

是否有提示用户使用特定应用程序打开文件，例如 Windows 使用“打开方式...”对话框？

如果不使用 AIR 框架，通过 NativeProcessAPI？

* * *

**解决方案**- 使用下面的 Pixel Elephants 答案作为基础：

```
var processInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();                      
    processInfo.workingDirectory = file.parent;             
    processInfo.executable = new File("C:\\WINDOWS\\system32\\cmd.exe");

    var args:Vector.<String> = new Vector.<String>();       
    args.push("/c");
    args.push(file.name);

    processInfo.arguments = args;

    var process:NativeProcess = new NativeProcess();

    try
    {
        process.start(processInfo);
    }
    catch(e:Error)
    {
        //give up - open the folder
        file.parent.openWithDefaultApplication();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:06:23.727

~~每当您尝试启动没有关联文件类型的应用程序时，Windows 上的“打开方式...”对话框就会显示。使用 NativeProcess.start() 启动应用程序，Windows 将负责使用正确的程序打开它，或者如果没有关联的文件类型，则显示一个选择屏幕。~~

或者，根据您尝试执行的操作，您可能有兴趣将文件类型与您的 AIR 应用程序相关联。例如，您可以将 PNG 文件与您的 AIR 应用程序相关联，以便它们默认在您的 AIR 应用程序中打开（例如，双击 PNG 文件将启动您的应用程序，并带有一个指定已打开的 PNG 文件的 INVOKE 事件）。有关详细信息，请参阅“声明文件类型关联”下的[http://livedocs.adobe.com/flex/3/html/help.html?content=File_formats_1.html 。](http://livedocs.adobe.com/flex/3/html/help.html?content=File_formats_1.html)

~~当然，您的 AIR 应用程序可能无法处理打开您尝试打开的任何文件，并且您需要其他程序来处理它，在这种情况下，您可以使用第一种方法，让操作系统负责启动具有正确程序的应用程序。~~

**编辑 ：**

我对 Native Process 的实际作用感到困惑。NativeProcess 启动可执行文件 - 而不是文件，因此上述方法不起作用。

与其尝试直接使用 NativeProcess 打开文件，不如尝试打开您想要打开文件的程序并将文件作为参数传入。例如，如果你想用一些特殊的图像程序打开一个 PNG 文件，你可以这样做：

```
var imageEditorProgram:File = new File("C:/Path/To/Program.exe");

var args:Vector.<String> = new Vector.<String>();
args.push("C:/Path/To/Image.png");

var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();
nativeProcessStartupInfo.executable = imageEditorProgram;
nativeProcessStartupInfo.arguments = args;

var nativeProcess:NativeProcess = new NativeProcess();
nativeProcess.start(nativeProcessStartupInfo); 
```

这应该会打开带有传入图像文件的图像编辑程序。

但是，这种方法的缺点是您不能只让操作系统确定使用哪个程序打开文件。您应该能够打开文件浏览对话框并允许用户选择打开文件的程序（类似于操作系统的操作方式）。因此，希望以下内容可以满足您的要求：

```
var file:File = File.userDirectory;
file.addEventListener(Event.SELECT, selectHandler);
file.browse();

private function selectHandler(e:Event):void{
    file.removeEventListener(Event.SELECT, selectHandler);
    var filePath:String= file.nativePath;
    var imageEditorProgram:File = new File(filePath);

    var args:Vector.<String> = new Vector.<String>();
    args.push("C:/Path/To/Image.png");

    var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();
    nativeProcessStartupInfo.executable = imageEditorProgram;
    nativeProcessStartupInfo.arguments = args;

    var nativeProcess:NativeProcess = new NativeProcess();
    nativeProcess.start(nativeProcessStartupInfo);

} 
```

我没有测试上面的代码，但它应该打开一个文件浏览对话框，允许用户选择一个程序来打开文件（也许你应该添加一个 FileFilter 来限制用户只选择.exe），然后启动该程序使用 NativeProcess。

为了用户友好，您应该考虑保存用户对文件类型的首选项（因此，不要强迫他们每次想要打开 PNG 时都通过文件浏览器，只要记住他们喜欢用 AwesomeImageEditor.exe 打开 PNG）。

# c++ - 在c ++ builder中实现按键关闭功能

> ID：11863062
> 
> 赞同：1
> 
> 时间：2012-08-08T10:57:26.323
> 
> 标签：c++, winforms, c++builder, keypress, vcl

`ESC`在 C++ builder 的表单应用程序中按下键时，如何实现关闭（或退出）功能？

另外，请注意表单将包含许多组件；它不能只是一个空表格。我尝试使用此代码，但每次按 时它都不起作用`ESC`。

```
void __fastcall TForm1::FormKeyPress(TObject *Sender, System::WideChar &Key) {
if (Key == VK_ESCAPE) {
    this->Close();
}} 
```

上面的代码不起作用，因为焦点并不总是在表单上，​​如果您有更多像 EditBox 这样的组件，则必须禁用`VK_ESCAPE`每个事件并引用所需的函数（当然，这是一个弱解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:39:49.857

将 Form 的 KeyPreview 属性设置为 true。这样，键盘事件在活动控件之前发生在窗体上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:18:46.777

使用`TForm::KeyPreview`属性和`TForm::OnKeyPress`事件是最好的方法，但另一种方法是`TButton`在表单上放置一个 hidden 并将其`Cancel`属性设置为 true，然后您可以调用`Close()`它的`OnClick`事件。

# c# - EntityCommandExecutionException 未处理

> ID：11863069
> 
> 赞同：1
> 
> 时间：2012-08-08T10:57:57.663
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在使用 EF 4.1 MVC3 编写应用程序。我正在尝试在其上实施 CRUD。问题是当我尝试只实现第一个索引页时，它给了我一个错误。我正在使用来自中央服务器的外部数据库。我只是在尝试一个简单的注册表单。我有第一个模型类 RegModel.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Registration.Models
{
    public class Register
    {
        public int Id { get; set; }
        public string UserName { get; set; }
        public string Password { get; set; }
        public string Email { get; set; }
        public string Address { get; set; }
    }
} 
```

然后是 RegModelContext.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Registration.Models
{
    public class Register
    {
        public int Id { get; set; }
        public string UserName { get; set; }
        public string Password { get; set; }
        public string Email { get; set; }
        public string Address { get; set; }
    }
} 
```

我的控制器名称是 RegController.cs （我只是想先实现 Index。）在控制器中。当我执行我的应用程序时，它给了我错误`return View(db.Registrant.ToString());`“entitycommandexecutionexception 未处理”“执行命令定义时发生错误。有关详细信息，请参阅内部异常。”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Registration.Models;
using System.Configuration;

namespace Registration.Controllers
{
    public class RegController : Controller
    {
        //
        // GET: /Reg/
        private string CmdStr = ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString;      
        public ActionResult Index()
        {
            using (var db = new RegModelContext(CmdStr))
            {
                return View(db.Registrant.ToString());
            }

        }

    }
} 
```

然后通过使用索引创建索引视图（Index.cshtml）：

```
@model IEnumerable<Registration.Models.Register>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
</head>
<body>
    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table>
        <tr>
            <th></th>
            <th>
                UserName
            </th>
            <th>
                Password
            </th>
            <th>
                Email
            </th>
            <th>
                Address
            </th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
                @Html.ActionLink("Details", "Details", new { id=item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.Id })
            </td>
            <td>
                @item.UserName
            </td>
            <td>
                @item.Password
            </td>
            <td>
                @item.Email
            </td>
            <td>
                @item.Address
            </td>
        </tr>
    }

    </table>
</body>
</html> 
```

我正在使用这个 web.config 文件

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <connectionStrings>
    <add name="MyConn" connectionString="Data Source=WIN-A32JMN2HC3A\SAIGMAMSSQL;Initial Catalog=Registration;User Id=SAIGMA110;Password=12345;"/>    
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:05:07.120

问题在于这段代码：

```
string CmdStr = ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString; 
using (var db = new RegModelContext(CmdStr))
{
    return View(db.Registrant.ToString());
} 
```

首先，您不需要明确指定连接字符串。按照惯例，实体框架将在您的 web.config 文件中查找匹配的连接字符串。只需确保连接字符串的名称与您的 DbContext 的名称匹配。

其次，您正在访问`Register`数据库 trough 中的一组对象`db.Registrant`。调用`ToString()`它没有任何意义。

您的视图需要一个列表`Registration.Models.Register`而不是字符串。将您的代码更改为：

```
using (var db = new RegModelContext())
{
    return View(db.Registrant.ToList());
} 
```

请注意，这将返回`Register`数据库中的所有项目。那可能是一大堆数据。也许您想实现分页或其他类型的过滤以确保一切按预期工作。

# sharepoint - sharepoint 2010 中的控件以实现用于安排约会的日历调度程序

> ID：11863077
> 
> 赞同：0
> 
> 时间：2012-08-08T10:58:24.297
> 
> 标签：sharepoint, sharepoint-2010

我是 sharepoint 的初学者，我想知道是否有任何控件可以在 sharepoint2010 中实现日历调度程序，以便我可以在特定的一天或一周创建约会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:43:07.713

在 SharePoint 中创建日历列表​​项。导出列表以根据您的日程安排规则访问和创建与安排约会相关的表格和代码（同一个人不能同时进行两次约会，或者约会不得超过 20 分钟，节假日或周末不得约会， ETC）。再说一次，我还没有可用的 SP 2k10，并且无法控制 SP 的设置方式。因此，我的回答特别适用于我使用 SP 2k7 提供的工具。

# vb.net - 如何在 vb.net 中递增和打印序列化条码

> ID：11863079
> 
> 赞同：0
> 
> 时间：2012-08-08T10:58:26.100
> 
> 标签：vb.net

我前段时间用vb.net写了一个条形码程序，当最终用户点击打印按钮时，程序将打开包含ZPL条形码的文本文件，将序列号加1，将新的序列号写回文本文件，然后将预定数量的条码打印到斑马打印机上。

现在我正在尝试重写代码，以便它将最终用户从他们在 PrintDialog 中键入的数字中打印出他们想要的条形码数量。在我更新的代码中，我尝试放入一个 DO UNTIL ......LOOP。它将打印出用户放入 PrintDialog 框中的条码数量，但不会序列化。我的意思是如果用户在 PrintDialog 中输入 5，程序将打印序列号 01 五次，而不是打印 02、03、04、05、06。

谁能给我一些关于如何根据用户输入到 PrintDialog 的数字让程序读取、写入和打印所需的 x 次的指示？

这是我的原始代码：

```
 Dim sL() As String = IO.File.ReadAllLines("C:\Labels\loop test.txt")
     Dim CurrentBar(2) As String

        For i = 0 To 2
            CurrentBar(i) = sL(sL.Length - 3 + i)
        Next

       If CurrentBar(1).Length >= 28 Then

            CurrentBar(1) = CurrentBar(1).Substring(0, 18) & Format(CInt(CurrentBar(1).Substring(18, 10) + 1), "0000000000") & CurrentBar(1).Substring(28)

        Else

            MessageBox.Show("String is not long enough!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)

        End If

        'Write the updated vaules back to the Text File
        IO.File.WriteAllText("C:\Labels\loop test.txt",
        CurrentBar(0) & vbNewLine &
        CurrentBar(1) & vbNewLine &
        CurrentBar(2))

    Dim psi As New ProcessStartInfo
            psi.UseShellExecute = True
            psi.Verb = "print"
            psi.WindowStyle = ProcessWindowStyle.Hidden                
            psi.FileName = "C:\Labels\loop test.txt"
            Process.Start(psi) 
```

这是我更新的代码：

```
 Dim PrintDialog1 As New PrintDialog()
    Dim psi As New ProcessStartInfo
    Dim sL() As String = IO.File.ReadAllLines("C:\Labels\loop test.txt")
    Dim CurrentBar(2) As String

        Do Until PrintDialog1.PrinterSettings.Copies - 1
        For i = 0 To 2
            CurrentBar(i) = sL(sL.Length - 3 + i)
        Next

        If CurrentBar(1).Length >= 28 Then

            CurrentBar(1) = CurrentBar(1).Substring(0, 18) & Format(CInt(CurrentBar(1).Substring(18, 10) + 1), "0000000000") & CurrentBar(1).Substring(28)

        Else

            MessageBox.Show("String is not long enough!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)

        End If

        'Write the updated vaules back to the Text File
        IO.File.WriteAllText("C:\Labels\loop test.txt",
        CurrentBar(0) & vbNewLine &
        CurrentBar(1) & vbNewLine &
        CurrentBar(2))

        'Print the labels

        'Get the number of copies to print  
        If (PrintDialog1.ShowDialog() = DialogResult.OK) Then

        'print desired number of copies to target printer
        For I = 0 To PrintDialog1.PrinterSettings.Copies - 1

            psi.UseShellExecute = True
            psi.Verb = "print"
            psi.WindowStyle = ProcessWindowStyle.Hidden
            psi.Arguments = PrintDialog1.PrinterSettings.PrinterName.ToString()
            psi.FileName = "C:\Labels\loop test.txt"
            Process.Start(psi)
        Next
    End If
  Loop 
```

这是我的文本文件：

```
 ^XA
    ^LH20,85^BY3^AE^SN0000000001R,,Y^B3N,,60,,Y^FS
    ^XZ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:00:06.053

我认为您在新代码中的问题是您在执行循环之前正在读取文本文件。在循环结束时，您写出新值，但永远不会将它们读回（或重用它们）。因此，输入始终是循环迭代之前的状态。我认为通过放

```
sl() = IO.File.ReadAllLines("C:\Labels\loop test.txt") 
```

在你的 Do Until 语句之后应该解决这个问题。

# javascript - 使用 jQuery CSS 将 div 设置为与另一个 div 相同的高度

> ID：11863080
> 
> 赞同：2
> 
> 时间：2012-08-08T10:58:28.943
> 
> 标签：javascript, jquery, css, html

我在尝试使用 jQuery 根据旁边的 div 的高度设置 div 的高度时遇到问题。基本上，我有两个 div，我希望它们的高度相同。左侧 div 的高度会发生变化，并且在 CSS/HTML 中没有设置高度元素。右边的 div 也可以改变高度，但左边的总是更大。

这是我在下面尝试将正确的 ( `#p_window`) 设置为与`.c_content_right`. *（忽略奇怪的命名约定）*

```
if ($('.c_content_right').length) {        
        if ($('.c_content_right').height() > $('#p_window').height()) {
            $('#p_window').css('height', $('.c_content_right').height() + 'px');    
        }                    
} 
```

这是一个 [jsFiddle 演示](http://jsfiddle.net/MfrqA/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:03:25.040

## *[jsFiddle 演示](http://jsfiddle.net/MfrqA/1/)*

如果你有填充，计算总高度使用`outerHeight()`：

```
 var catH = $('.category_content_right').outerHeight();

  if ( catH  > $('#product_window').height() ){
      $('#product_window').height( catH  );    
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:14:17.210

这是一个基于你的工作小提琴。

[http://jsfiddle.net/MfrqA/10/](http://jsfiddle.net/MfrqA/10/)

*   你的小提琴没有设置为 jQuery。
*   我在添加 CSS 时对 jQuery 感到困惑，如果我不只是在它之外设置变量，因为您可以使用几种语法，而且我总是被赶上。
*   如果您的编辑不起作用，请在“if”循环中添加一个警报，看看您是否达到了那一步。

# c++ - ifstream 读取二进制数据发出 0x00 字节

> ID：11863101
> 
> 赞同：0
> 
> 时间：2012-08-08T10:59:41.407
> 
> 标签：c++, io, binary, fstream, ifstream

大家好，我在从二进制文件中读取二进制数据时遇到问题，如下所示：

文件内容：D3 EE EE 00 00 01 D7 C4 D9 40

```
char * afpContentBlock = new char[10];
ifstream inputStream(sInputFile, ios::in|ios::binary);

if (inputStream.is_open()))
{
    inputStream.read(afpContentBlock, 10);

    int n = sizeof(afpContentBlock)/sizeof(afpContentBlock[0]); // Print 4

    // Here i would like to check every byte, but no matter how i convert the 
    // char[] afpContentBlock, it always cut at first byte 0x00.
} 
```

我知道这是字节 0x00 的原因。有没有办法以某种方式管理它？我试图用一个 ofstream 对象来写它，它工作得很好，因为它写出了整个 10 个字节。无论如何，我想遍历整个字节数组来检查字节值。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:06:12.947

像这样获取从 ifstream 读取的字节数要容易得多：

```
if (inputStream.is_open()))
{
   inputStream.read(afpContentBlock, 10);
   int bytesRead = (int)inputStream.gcount();

   for( int i = 0; i < bytesRead; i++ )
   {
      // check each byte however you want
      // access with afpContentBlock[i]
   }
} 
```

# lwuit - 如何释放已用 Connectionrequest 的内存

> ID：11863102
> 
> 赞同：0
> 
> 时间：2012-08-08T10:59:43.080
> 
> 标签：lwuit

我的应用程序每天发出数百个新的连接请求并解析 json 响应。但我意识到它不会在每次请求后释放内存。尽管使用 system.gc() 它存储 ConnectionRequest 实例和我的类的实例以解析 json 响应。我猜最后它会导致系统内存不足错误。

这是一些代码：

```
 protected boolean onMainFormCommand54(){
         //LevakandRestService similar to GoogleRestService
        final LevakandRestService r =new LevakandRestService();
        r.RequestUBalance(balance);        
        final Progress p = new Progress(Globals.Loading, r);
        p.showPacked(BorderLayout.CENTER, false);
        p.setDisposeOnCompletion(true);
        r.addResponseListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {                            
                    p.dispose();                                      
                    Dialog.show(Globals.Info, "Balance:" +balance.getBalance(),Globals.OK, "");
            }
        });
       NetworkManager.getInstance().addToQueueAndWait(r);

       System.gc(); 
      return val;
  } 
```

我试过使用 Wea​​kReference，但没有帮助。

```
 protected boolean onMainFormCommand54() {//Balance of user

    boolean val = super.onMainFormCommand54();       
    Balance balance1 = new Balance();
    WeakReference wrb = new WeakReference(balance1);       
    final Balance balance =(Balance)wrb.get();
        LevakandRestService r1 = new LevakandRestService();            
         WeakReference wr = new WeakReference(r1);             
        final LevakandRestService r =(LevakandRestService)wr.get();
        r.RequestUBalance(balance);        
        final Progress p = new Progress(Globals.Loading, r);
        p.showPacked(BorderLayout.CENTER, false);
        p.setDisposeOnCompletion(true);
        r.addResponseListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {                              
                    p.dispose();                                      
                    Dialog.show(Globals.Info, "Balance:" +balance.getBalance(),Globals.OK, "");
            }
        });
        NetworkManager.getInstance().addToQueueAndWait(r);
        r1=null;                    
    balance1 = null;    
    System.gc();
    return val;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:29:01.323

您不需要调用 System.gc() 并且上面的代码不会编译，因为您将 null 分配给最终变量。

除非您保留对它们的引用，否则 ConnectionRequests 会被无缝收集，就这么简单。J2ME 的 WTK 2.5.2 有一个内存监视器，它允许您查看分配堆栈，对于 Codename One，您可以使用 NetBeans 分析器来监视内存分配并跟踪泄漏到它们产生的位置。

# ruby-on-rails - RMagick 在 Windows 上安装 Redmine 时出错

> ID：11863105
> 
> 赞同：2
> 
> 时间：2012-08-08T10:59:48.240
> 
> 标签：ruby-on-rails, windows, gem, redmine, rmagick

我正在尝试将我的 Redmine 安装升级到最新版本。我根据需要更新了 ruby​​、rails 和 gem。

```
current trunk  |  ruby 1.8.7, 1.9.2, 1.9.3, jruby-1.6.7  |  Rails 3.2.6   |  RubyGems <= 1.8 
```

发出`rake db:migrate`命令它给了我以下错误：

> C:\ruby-apps\RedMine>rake db:migrate RAILS_ENV=production
> ←[31mCould not find gem 'rmagick (>= 2.0.0) x86-mingw32' in the gems available on this machine.←[0m
> ←[33mRun `bundle install`to安装缺少的宝石。←[0m

所以我为 win32 安装了 rmagick 并列出了我看到的已安装 gem：

> ...
> railties (3.2.6)
> rake (0.9.2.2)
> rdoc (3.12)
> rmagick (2.12.0 mswin32)
> ruby​​-openid (2.1.8) ruby
> ​​gems-update (1.8.24)
> ...

但`rake db:migrate`仍然给我同样的错误，所以我尝试了`bundle install`，但我得到：

> 暂时增强 PATH 以包含 DevKit...
> 构建原生扩展。这可能需要一段时间...
> 错误：安装 rmagick 时出错：
> 错误：无法构建 gem 原生扩展。
> 
> ```
>  C:/Ruby193/bin/ruby.exe extconf.rb 
> ```
> 
> 检查 Ruby 版本 >= 1.8.5... 是
> 检查 stdint.h... *** extconf.rb 失败 ***
> 由于某种原因无法创建 Makefile，可能缺少
> 必要的库和/或头文件。检查 mkmf.log 文件以获取更多
> 详细信息。您可能需要配置选项。

关于如何摆脱这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:35:50.617

我在安装 redmine 时遇到了同样的问题。根据 Gemfile rmagick 中的评论可选，仅用于将 Gant 图导出为 PNG。因此，如果您不需要此特定功能，则可以运行

```
bundle install --without development test rmagick 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T10:52:55.540

实际上[Bitnami 的 Redmine windows Installer](https://bitnami.com/stack/redmine/installer)包含一个解决这个问题的方法。
对我来说，使用它是解决问题的有效方法。

安装内容可用于检查正确的版本和依赖项以正确构建 Redmine。

# c++ - 关于linux内存问题的C++多线程程序

> ID：11863106
> 
> 赞同：1
> 
> 时间：2012-08-08T10:59:51.693
> 
> 标签：c++, multithreading, memory-leaks, debian

我正在开发一个需要创建和删除大量线程的软件。

当我创建一个线程时，内存会增加，当删除它们时（通过使用命令确认`ps -mo THREAD -p <pid>`），与程序/软件相关的内存不会减少（top 命令）。结果我的内存用完了。

我已经使用 Valgrind 检查内存错误/泄漏，但找不到任何内容。这是在一个Debian盒子上。请让我知道问题可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:04:09.377

你是如何删除线程的？这里的注释[http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)谈到在某些情况下需要调用 join 来释放资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:23:06.630

You do not run out of memory.

The "free memory" you see in top command is actually not the memory that is available when required. Linux kernel uses as much as possible/useable of the free memory for its page cache. When a process requires memory, the kernel can throw away that page cache and provide that memory to a process.

In other words: linux uses the free memory, instead of just leaving it idling around...

Use `free -m`: In the row labeled "-/+ buffers/cache:" you will see the real amount of memory available for processes.

# jquery - 带有 json 的 Jquerypopup

> ID：11863107
> 
> 赞同：0
> 
> 时间：2012-08-08T10:59:56.113
> 
> 标签：jquery

我有一个 PHP 操作，通过它我处理来自 AJAX 的请求并将其作为 JSON 传递。`JSON`在成功响应中，我应该打开应该包含响应的弹出窗口

```
$.ajax({
    url: 'http://localhost/feedback/public/index/email/',
    type: 'POST',
    data: {
        emaildata: emailid
    },
    dataType: 'json',
    success: function (data) {
        $('div#pop-up').show();
        $(".closebtn").click(function () {
            $("div#pop-up").css('display', 'none');
        })
    }
}); 
```

我的 html div 有，

```
<div id="pop-up">
    <input type="button" class="closebtn" value="close" />Firstname</br>Lastname</br>EmailId</br>Comments</br>
</div> 
```

我希望来自 ajax 响应的数据得到附加。我真的不知道要做什么。我也无法在我的 html 中使用 for 循环，因为我在最后一行退出了我的控制器。下面是我的控制器。

PHP 控制器

```
foreach($result AS $row)         
{ 
    $arrValues = array(
        "firstname"=>$row['firstname'], 
        "lastname"=>$row['lastname'],
        "emailid"=>$row['emailid']
    );             
}   
$this->view->data=$arrValues;  
echo json_encode(array('rows'=>$arrValues));    
exit; 
```

您能否建议我以更好的方式使用 JSON 数据格式化弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:10:10.010

您可以使用 jQuery 更改 div 的内容。将成功回调的第一行更改为以下内容：

```
var html = '<input type="button" class="closebtn" value="close"/> ' 
           + data.firstname + '<br/>' + data.lastname + '<br/>' + data.emailid;
$('#pop-up').html(html).show(); 
```

因此，您完整的成功回调看起来像这样

```
success: function(data) { 
    var html = '<input type="button" class="closebtn" value="close"/> ' 
           + data.firstname + '<br/>' + data.lastname + '<br/>' + data.emailid;

    $('#pop-up').html(html).show();                       

    $(".closebtn").click(function(){ 
        $("#pop-up").hide();
    });   
} 
```

# python - python pyqt和父类

> ID：11863114
> 
> 赞同：0
> 
> 时间：2012-08-08T11:00:49.533
> 
> 标签：python, pyqt, call, parent, subclass

```
class testWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(testWidget, self).__init__(parent)
        self.parent = parent
        self.something()
    def something(self):
        self.parent.callme() # self.parent?.... nice?

class testClass():
    def __init__(self):
        self.widget = testWidget(parent=self)

test = testClass() 
```

在python（pyqt）中处理父类的最干净的方法是什么？有没有比直接调用 self.parent 更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:08:01.550

如果要调用此小部件父级的方法（如果已设置），请使用[QObject.parent()](http://doc.qt.nokia.com/4.7-snapshot/qobject.html#parent)：

```
class TestWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(TestWidget, self).__init__(parent)
    def something(self):
        self.parent().callMe()

class TestClass(QtCore.QObject):
    def __init__(self):
        super(TestClass, self).__init__(None)
        self.widget = TestWidget(parent=self)
        ...
    def callMe(self): pass

test = TestClass() 
```

# windows-phone-7 - 如何在 windows phone 7 中为应用程序栏添加背景图像？

> ID：11863115
> 
> 赞同：0
> 
> 时间：2012-08-08T11:00:50.833
> 
> 标签：windows-phone-7

我想在我的 windows phone 7 应用程序的应用程序栏中添加背景图像。windows phone 7如何为应用程序栏添加背景图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:07:11.230

这样做的方法是加载图像并将其用作主网格的背景图像。然后设置应用程序栏的背景不透明度，以便您看到图像。

图像需要格式化，当然，480x800 但在应用栏通常所在的较低像素中具有您想要的内容。

# io - 每个进程都有自己的标准输入、标准输出和标准错误吗？

> ID：11863116
> 
> 赞同：17
> 
> 时间：2012-08-08T11:00:51.897
> 
> 标签：io

每个进程都有自己的标准输入、标准输出和标准错误，还是它们只共享 1 个标准输入、1 个标准输出和 1 个标准错误？我的意思当然是每台计算机通常有 1 个键盘和 1 个终端，但是进程的输入和输出流是否相互分离？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T11:10:41.187

`stdout`, `stdin`, 和`stderr`只是操作环境赋予过程以与其输入和输出交互的抽象。尽管只有一个键盘（在大多数情况下，无论如何），操作系统知道如何决定哪个进程获取当前输入，并将击键传递给`stdin`该进程的。类似地，尽管只有一个屏幕，但它可以被分割成几个窗口。最后，许多进程的输入和输出都与文件流相关联。操作系统可以让您将多个进程绑定到单个输入或单个输出文件，但即使在这种情况下，代表`stdin`和`stdout`进程内的流将是分开的：它们将引用操作系统中的相同对象，并且操作系统将管理在其用户之间共享该对象。

# ios - 为什么即使配置文件设置为分发，xcode 也会抛出此错误？

> ID：11863118
> 
> 赞同：1
> 
> 时间：2012-08-08T11:01:02.203
> 
> 标签：ios, xcode4, submission

所以我正在提交我的第一个应用程序。我遵循了各种指南和文件，并设法将其上传到iTunes应用商店一次。它作为与图标路径相关的无效二进制文件返回。很公平......我应用了我认为是修复的方法，然后砰！从那以后每次我尝试上传它时都会返回一个错误，确切地说是这个错误。：

> 警告：无法从您的应用程序中提取代码签名权利。请确保 DoorStop 是经过正确代码签名的有效 Mach 可执行文件。(-19050) /Users/jackson/Library/Developer/Xcode/DerivedData/DoorStop-gfwhzvdhgmutfhdhfmqznkcnzmak/Build/Intermediates/ArchiveIntermediates/DoorStop/InstallationBuildProductsLocation/Applications/DoorStop.app/DoorStop：无效签名（代码或签名已被修改）- （空值）

现在我有一种感觉，我知道你要说什么，你需要确保它使用分发配置文件签名，它是。我创建了一个新的并尝试过，我从钥匙串中删除了我的开发人员证书和分发证书并重新添加了它们....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:03:18.763

好的，所以我只是想我会回答这个问题，因为我解决了这个问题。

在第一次提交时，我所做的一切都是正确的。但是，为了解决我得到的 Icon Path 无效二进制文件，我更改了 .plist 文件。从那时起，我的应用程序将无法验证。

这是因为由于某种原因，Xcode 复制了我的 .plist 文件。并且正在使用新的编辑创建一个新的。为了避免这种情况，我只是删除了一个 .plist 文件，并确保我从目标的信息区域编辑了原始文件，而不是手动进行。

这避免了 Xcode 混淆，应用程序已成功提交。:)

# java - 休眠（lucene）搜索中的和运算符

> ID：11863122
> 
> 赞同：2
> 
> 时间：2012-08-08T11:01:13.400
> 
> 标签：java, hibernate, lucene, hibernate-search

我正在使用以下代码使用 hibernate-search 进行搜索。但这标记了搜索查询并执行**OR 搜索**，而我想做**AND 搜索**。我怎么做？

```
 FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(em);
    String searchQuery = "test query";

    QueryBuilder qb = fullTextEntityManager.getSearchFactory().buildQueryBuilder().forEntity(Customer.class).get();

    TermMatchingContext onFields = qb.keyword().onFields("customer.name","customer.shortDescription","customer.longDescription");

    org.apache.lucene.search.Query query = onFields.matching(searchQuery).createQuery();

    FullTextQuery persistenceQuery = fullTextEntityManager.createFullTextQuery(query, Customer.class);

    List<Customization> result = persistenceQuery.getResultList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:57:19.850

```
FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(em);
QueryBuilder qb = fullTextEntityManager.getSearchFactory().buildQueryBuilder().forEntity(Customer.class).get();
TermMatchingContext onFields = qb.keyword().onFields("customer.shortDescription",  "customer.longDescription");

BooleanJunction<BooleanJunction> bool = qb.bool();
org.apache.lucene.search.Query query = null;
String[] searchTerms = searchQuery.split("\\s+");
for (int j = 0; j < searchTerms.length; j++) {
   String currentTerm = searchTerms[j];
   bool.must(onFields.matching(currentTerm).createQuery());
}

query = bool.createQuery();

FullTextQuery persistenceQuery = fullTextEntityManager.createFullTextQuery(query, Customer.class);
resultList = persistenceQuery.getResultList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:47:24.620

**OR**逻辑是 Lucene 的默认值。您可以使用此处描述的布尔 DSL 查询 - [http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-query-querydsl](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-query-querydsl)但是，这可能无法解决您的问题但是，因为您似乎将两个查询词都放在一个字符串中。根据您的用例（例如，如果搜索字符串由用户提供），最好从 Lucene 查询解析器获取 Lucene 查询。

# java - 进度对话框没有被解雇

> ID：11863128
> 
> 赞同：0
> 
> 时间：2012-08-08T11:01:29.630
> 
> 标签：java, android, xml-parsing, android-asynctask, android-progressbar

我想要一个进度对话框，说“请稍候”，而我的代码下载并解析了一个 xml 文件，但进度对话框没有运行，它不知何故卡住了。我正在使用 AsyncTask，xml 文件的下载和解析是在后台线程中完成的，如果我删除进度对话框，代码就可以工作，但在这种情况下，您必须等待大约 4 秒才能单击动态创建 UI 的按钮。

```
private class ParseXML extends AsyncTask<Integer, Integer, Document>{

private Context context;
    private Activity activity;
    private ProgressDialog pd;
    public ParseXML(Activity activity) {
        this.activity = activity;
        context = activity;
        pd = new ProgressDialog(context);
    }

    public void onPreExecute(){
        super.onPreExecute();
    /*  ProgressDialog pd=ProgressDialog.show(XML_PARSER.this,"","Please Wait");*/

    }

    @Override
protected Document doInBackground(Integer... params) {

     DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();
    Document dom1=null;
    try {

        //InputStream is=getResources().openRawResource(R.raw.options);
        URL requestURL = new URL("my url");
        URLConnection connection = requestURL.openConnection();
        is = connection.getInputStream();

        DocumentBuilder db = dbf.newDocumentBuilder();
        dom1=db.parse(is);
        Log.i(TAG,"parsing done");

    }

    catch(ParserConfigurationException pce){
        pce.printStackTrace();
    }
    catch(SAXException se){
        se.printStackTrace();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
    }

    ParseDocument(dom1); 

    return null;
    }           

    @Override
    public void onPostExecute(Document d){
        if(pd!=null && pd.isShowing()){
               pd.dismiss();
               }
        super.onPostExecute(d);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:07:15.237

**1.**始终建议保持 UI 在 UI 线程上工作，而 Non-UI 在 Non-UI 线程上工作，但从 Android 版本 HoneyComb 开始，它成为了一个规则。

**2.**所以在你使用的时候`AsyncTask`，让你从方法`ProgressDialog` **开始在Dedicated UI thread中展示**`onCreate()`。

**3.**然后**解除** `ProgressDialog`from`onPostExecute()`方法，这又在 Dedicated UI 线程上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:07:35.737

你在这里犯了错误

```
 public void onPreExecute(){
  super.onPreExecute();
 /*  ProgressDialog pd=ProgressDialog.show(XML_PARSER.this,"","Please Wait");*/
  } 
```

您正在声明`ProgressDialog pd`一个局部变量

当控制权来临时

```
@Override
    public void onPostExecute(Document d){
        if(pd!=null && pd.isShowing()){
               pd.dismiss();
               }
        super.onPostExecute(d);

    } 
```

pd 在这里为空，因为您尚未初始化全局 pd 变量。这就是为什么不关闭警报对话框的原因。

要完成这项工作，只需在`onPreExecute`

```
public void onPreExecute(){
      super.onPreExecute();
       pd=ProgressDialog.show(XML_PARSER.this,"","Please Wait");
      } 
```

# javascript - 使用后退按钮后 AJAX 调用未命中服务器

> ID：11863134
> 
> 赞同：3
> 
> 时间：2012-08-08T11:01:44.917
> 
> 标签：javascript, jquery, ajax

我在页面加载时进行简单的 AJAX 调用...

```
$(document).ready(function() {
    $.get('', {'format': 'json'}, function(items) {
        console.log('hello');
    }
} 
```

如果我点击页面上的链接，然后使用后退按钮，上面的代码会运行（它向控制台输出“hello”），但请求永远不会到达服务器，它只是使用它最初的响应，就好像它是缓存。

是否可以强制它访问服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:05:13.637

如果您使用该[`$.ajax()`方法](http://api.jquery.com/jQuery.ajax/)，那么您可以设置`cache:false`. 以下是您的`$.get()`电话的等效内容：

```
$.ajax({
  url: 'yourUrlHere',
  data: {'format': 'json'},
  cache : false,
  success: function(items) {
    console.log('hello');
  },
  dataType: 'json'
}); 
```

或者为所有 ajax 调用设置一个默认值：

```
$.ajaxSetup({cache : false}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:04:12.783

您可以将站点配置为不缓存 ajax 响应。

```
//jQuery
$.ajaxSetup({
    cache : false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:04:39.287

这将防止缓存...

```
$(document).ready(function() { 
    $.get('?'+(Math.random()*20), {'format': 'json'}, function(items) { 
        console.log('hello'); 
    } 
} 
```

# c# - 获取输入列表

> ID：11863141
> 
> 赞同：0
> 
> 时间：2012-08-08T11:02:22.957
> 
> 标签：c#, asp.net, .net, .net-4.0, webforms

这是html：

```
<input type="text" value="Google" name="Projects[0]" />
 <input type="text" value="Microsoft" name="Projects[1]" />
 <input type="text" value="Microsoft" name="Projects[2]" /> 
```

这也有一个 ASPX 提交按钮。

```
<asp:Button ID="submitBtn" Text="Save" runat="server" OnClick="SubmitButton_Click" /> 
```

- - C＃ - - - - - -

```
 protected void SubmitButton_Click(object sender, EventArgs e)
    {            
        List<string> projectsInCSharp = new List<string>();
        projectsInCSharp.Add(Request["Projects[0]"]); //Google
        projectsInCSharp.Add(Request["Projects[1]"]); //Microsoft

    } 
```

有没有更好的方法来做到这一点并自动将其绑定到列表中。例如，在 ASP.NET MVC 中，您可以这样做。但是我正在使用 WebForms，我不能为此切换到 MVC。

我正在使用 .NET 4.0、C#、ASPX。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:17:37.163

这是一个 hacky 解决方法，但您可以做的是使用浏览器将逗号分隔具有相同`name`属性的帖子字段的事实。

即通过将您的 aspx 更改为：

```
<input type="text" value="Google" name="Project" />
<input type="text" value="Microsoft" name="Project" />
<input type="text" value="Oracle" name="Project" /> 
```

然后，您可以在您的代码背后做一个衬里：

```
List<string> projectsInCSharp = Request["Project"].Split(',').ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T11:20:10.127

试试这段代码，你可以使用 AddRange 而不是多次调用 Add：

```
 List<string> projectsInCSharp = new List<string>();
        projectsInCSharp.AddRange(Request.Params
            .Cast<string>()
            .Where(o => o.StartsWith("Projects["))
            .OrderBy(o => int.Parse(o.Remove(o.Length - 1, 1).Remove(0, 9)))
            .Select(o => Request.Params[o])
            ); 
```

或者你可以把它放在一个构造函数中：

```
 List<string> projectsInCSharp = new List<string>(
            Request.Params
                .Cast<string>()
                .Where(o => o.StartsWith("Projects["))
                .OrderBy(o => int.Parse(o.Remove(o.Length - 1, 1).Remove(0, 9)))
                .Select(o => Request.Params[o])
            ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:19:45.467

我的建议是，除了输入文本框，您还可以在隐藏字段中传递计数

```
<input type="hidden" name="textBoxCount" value="10" /> //you will need to pass it 
```

所以假设我们知道 TextBoxes 的数量

```
protected void SubmitButton_Click(object sender, EventArgs e)
{  
   List<string> projectsInCSharp = new List<string>();
   int count = Convert.ToInt32(Request["textBoxCount"]);
   for(int i = 1; i <= count; i++)
   {
      if(Request["Projects[" +  i + "]"] != null)
      { 
        projectsInCSharp.Add(Request["Projects[" +  i + "]"]);
      }
  }
} 
```

# cakephp - cakephp中未定义的变量

> ID：11863142
> 
> 赞同：1
> 
> 时间：2012-08-08T11:02:43.263
> 
> 标签：cakephp

那么我该如何解决呢？它给了我：

> 注意 (8)：未定义变量：产品 [APP/View/Categories/category_filter.ctp，第 10 行] 警告 (2)：为 foreach() 提供的参数无效 [APP/View/Categories/category_filter.ctp，第 10 行]

```
<? if (!empty($categories)) { ?> 

<? foreach($categories as $row): ?>
<h1>Category: <?= $row['Category']['category'] ?></h1>

<table>
    <tr>
        <th>Name</th><th>Description</th><th>Price</th><th>Category</th>   
<th>Thumbnails</th>
    </tr>  
    <? foreach($products as $row): ?>
    <tr><<td>
        <?=$row['Product']['name']?>   
   </td><td>
        <?=$row['Product']['description']?>
   </td><td>
        <?=$row['Product']['price']?>   
   </td><td>
        <?=$row['Product']['category_id']?> 
   </td><td>
    <?
    if(!empty($row['Picture'])){
    ?> 
    <?= $this->Html->image('/img/'. $row['Picture'][0]['filename'], array('width'=>'50', 'alt'=>$row['Picture'][0]['title'])); ?>
            <p><?= $row['Picture'][0]['description']; ?></p>
     <? } ?>               
     </td><tr>

  <? endforeach; ?>
  <? endforeach; ?>

 </table>

 <? } ?> 
```

在控制器中

```
function category_filter($category_id) {
        $this->set('categories',$this->Category->findAllById($category_id));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:46:03.800

你可以简单地通过制作一个`Category Model class`.

```
//app/Model/Category.php
class Category extends AppModel
{
   public $name = 'Category';
   public $useTable = 'categories';    
   public $primaryKey = 'id';
   public $hasMany = array('Products' => array('className' => 'Product',
                                           'foreignKey' => 'category_id'
                                           ));    
}

//app/Model/Product.php
class Product extends AppModel
{
  public $name = 'Product';
  public $useTable = 'products';    
  public $primaryKey = 'id';
} 
```

在您的控制器中：

```
function category_filter($category_id) {
    $this->set('category_details',$this->Category->findById($category_id));
} 
```

在您看来：

```
<h1>Category: <?php echo $category_details['Category']['category'] ?></h1>

<table>
<tr>
     <th>Name</th><th>Description</th><th>Price</th><th>Category</th>   
<th>Thumbnails</th>
</tr>  
<?php if(!empty($category_details['Products'])): foreach($category_details['Products'] as $row): ?>
<tr><td>
    <?php echo $row['Product']['name']?> 
```

```
 <?php echo $this->Html->image('/img/'. $row['Picture'][0]['filename'], array('width'=>'50', 'alt'=>$row['Picture'][0]['title'])); ?>
        <p><?php echo $row['Picture'][0]['description']; ?></p>
 <?php } ?>               
 </td><tr>
<?php endforeach;endif; ?> 
```

因为我不太了解您的`Picture Model`. 请在您的产品模型中也为该模型进行关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:40:54.747

```
<?php
function category_filter($category_id) {
    $this->set('categories',$this->Category->findAllById($category_id));
    $products=$this->Product->find('all');
   $this->set(compact('products'));
    }   
?> 
```

设置您的产品变量

# php - php 图像创建

> ID：11863144
> 
> 赞同：-6
> 
> 时间：2012-08-08T11:03:14.653
> 
> 标签：php

我是 php 新手，我试图简单地打印一条消息并创建一个矩形，但这不起作用。我查看了 wamp 目录中 php.ini 文件中的 gd 扩展名，它没有被注释掉。请帮忙 - 为什么它不起作用:(

```
<?php
print ("hello world");
$im = ImageCreate(200,200);
$white = ImageColorAllocate($im,0xFF,0xFF,0xFF);
$black = ImageColorAllocate($im,0x00,0x00,0x00);
ImageFilledRectangle($im,50,50,150,150,$black);
header('Content-Type: image/png');
ImagePNG($im);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:07:34.650

首先，您`print ("hello world");`在代码的开头有一个。如果您要调用`header()`，则在您想要的输出之前**不能**有*任何输出。*删除该行，您的代码将起作用。请始终阅读[相关文档](http://php.net/manual/en/function.header.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:19:02.183

您正在输出字符串`hello world`，然后输出图像。这将导致图像数据损坏，因为它的开头有 11 个字节，在图像的上下文中没有任何意义。

删除该`print('hello world');`行，它应该输出一个有效的图像 - 但是您的页面将不包含文本`hello world`，您需要输出一个带有文本的正确 HTML 页面，并将标签的`src`属性指向`img`生成图像的 PHP 脚本如果你想让它工作。

例如：

page.html

```
<html>
  <head>
    <title>My Page</title>
  </head>
  <body>
    hello world<br>
    <img src="image.php" />
  </body>
</html> 
```

图像.php

```
<?php

$im = ImageCreate(200,200);
$white = ImageColorAllocate($im,0xFF,0xFF,0xFF);
$black = ImageColorAllocate($im,0x00,0x00,0x00);
ImageFilledRectangle($im,50,50,150,150,$black);
header('Content-Type: image/png');
ImagePNG($im);

?> 
```

# android - 如何从联系人号码中读取联系人姓名？

> ID：11863145
> 
> 赞同：1
> 
> 时间：2012-08-08T11:03:14.307
> 
> 标签：android

我正在尝试在列表视图中显示联系人号码和联系人姓名。我已经做好了...：

```
public String DisplayName(String number) {
    Uri uri = Uri.withAppendedPath(
            ContactsContract.PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(number));
    String name = "?";

    ContentResolver contentResolver = getContentResolver();
    Cursor contactLookup = contentResolver.query(uri, new String[] {
            BaseColumns._ID, ContactsContract.PhoneLookup.DISPLAY_NAME },
            null, null, null);

    try {
        if (contactLookup != null && contactLookup.getCount() > 0) {
            contactLookup.moveToNext();
            name = contactLookup.getString(contactLookup
                    .getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
            // String contactId =
            // contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
        }
    } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
    }

    return name;
} 
```

但是我的应用程序一直强制关闭，我不知道为什么？我也包括了许可......“”

有什么猜测吗？为什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:04:09.320

使用这两种方法：

```
/*
 * Returns contact's id
 */
private String getContactId(String phoneNumber, Context context) {
    ContentResolver mResolver = context.getContentResolver();

    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));

    Cursor cursor = mResolver.query(uri, new String[] {
            PhoneLookup.DISPLAY_NAME, PhoneLookup._ID }, null, null, null);

    String contactId = "";

    if (cursor.moveToFirst()) {
        do {
            contactId = cursor.getString(cursor
                    .getColumnIndex(PhoneLookup._ID));
        } while (cursor.moveToNext());
    }

    cursor.close();
    cursor = null;
    return contactId;
}

/*
 * Returns contact's name
 */
private String getContactName(String contactId, Context context) {

    String[] projection = new String[] { Contacts.DISPLAY_NAME };
    Cursor cursor = mResolver.query(Contacts.CONTENT_URI, projection,
            Contacts._ID + "=?", new String[] { contactId }, null);
    String name = "";
    if (cursor.moveToFirst()) {
        name = cursor.getString(0);
    }

    cursor.close();
    cursor = null;
    return name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:07:43.140

使用下面的代码：

```
 public void readContacts(){
    ContentResolver cr = parent.getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
           null, null, null, null);

    if (cur.getCount() > 0) {
       while (cur.moveToNext()) {
           Contact tempcontact=new Contact();
           contactsList.add(tempcontact);
            String id=cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name=cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
           tempcontact.setId(cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID)));
           tempcontact.setName(name);
           if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
              Log.e("DATA","name : " + name + ", ID : " + id);

               // get the phone number
               Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                      ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                      new String[]{id}, null);
               while (pCur.moveToNext()) {
                   if(pCur.getString(
                            pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))!=null)
                   {
                   tempcontact.getPhonenumber().add(pCur.getString(
                           pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                   }
                  //   System.out.println("phone" + phone);
                    // Log.e("phone",phone);
               }
               pCur.close();

               // get email and type

              Cursor emailCur = cr.query(
                       ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                       null,
                       ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                       new String[]{id}, null);
               while (emailCur.moveToNext()) {
                   // This would allow you get several email addresses
                       // if the email addresses were stored in an array
                   String email = emailCur.getString(
                                 emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                   tempcontact.getEmail().add(emailCur.getString(
                                 emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)));
                   String emailType = emailCur.getString(
                                 emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                   Log.e("Data","Email " + email + " Email Type : " + emailType);
               }
               emailCur.close();

               String addrWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
               String[] addrWhereParams = new String[]{id,
                   ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
               Cursor addrCur = cr.query(ContactsContract.Data.CONTENT_URI,
                           null, null, null, null);
               while(addrCur.moveToNext()) {
                   tempcontact.setPoBox((addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX))));
                   tempcontact.setPoBox(addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET)));
                   tempcontact.setCity(addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY)));
                   tempcontact.setRegion(addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION)));
                   tempcontact.setPostalCode(addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE)));
                   tempcontact.setCountry((addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY))));
                   tempcontact.setType(addrCur.getString(
                                addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE)));

                   // Do something with these....

               }
               addrCur.close();

               String[] projection = {ContactsContract.CommonDataKinds.Photo.PHOTO};
               Uri uri = (Uri)ContactsContract.Data.CONTENT_URI;
               String where = ContactsContract.Data.MIMETYPE 
                      + "=" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + " AND " 
                      + ContactsContract.Data.CONTACT_ID + " = " + id;
               Cursor cursor = parent.getContentResolver().query(uri, projection, null, null, null);

               if(cursor!=null&&cursor.moveToFirst()){
                   do{
                       byte[] photoData = cursor.getBlob(0);
                      tempcontact.setPhoto(photoData);

                       //Do whatever with your photo here...
                   }while(cursor.moveToNext());
               }

           }
       }

  }
  }

public class Contact {
String id;
String name;
ArrayList<String> phonenumber;
ArrayList<String> email;
String poBox;
String street;
String city;
String state;
String postalCode;
String country;
String type;
String region;
byte[] photo;
public byte[] getPhoto() {
    return photo;
}

public Contact() {
// TODO Auto-generated constructor stub
phonenumber=new ArrayList<String>();
email=new ArrayList<String>();
}

public void setPhoto(byte[] photo) {
    this.photo = photo;
}

public String getPoBox() {
    return poBox;
}

public void setPoBox(String poBox) {
    this.poBox = poBox;
}

public String getStreet() {
    return street;
}

public void setStreet(String street) {
    this.street = street;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

public String getState() {
    return state;
}

public void setState(String state) {
    this.state = state;
}

public String getPostalCode() {
    return postalCode;
}

public void setPostalCode(String postalCode) {
    this.postalCode = postalCode;
}

public String getCountry() {
    return country;
}

public void setCountry(String country) {
    this.country = country;
}

public String getType() {
    return type;
}

public void setType(String type) {
    this.type = type;
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public ArrayList<String> getPhonenumber() {
    return phonenumber;
}

public void setPhonenumber(ArrayList<String> phonenumber) {
    this.phonenumber = phonenumber;
}

public ArrayList<String> getEmail() {
    return email;
}

public void setEmail(ArrayList<String> email) {
    this.email = email;
}

public String getRegion() {
    return region;
}

public void setRegion(String region) {
    this.region = region;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:27:44.490

```
Cursor phones= getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
while (phones.moveToNext())
{

  String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

}
phones.close(); 
```

# mysql - 如何将mysql格式latin1中的旧数据库转换为utf8

> ID：11863146
> 
> 赞同：0
> 
> 时间：2012-08-08T11:03:17.690
> 
> 标签：mysql, database, utf-8, latin1

我有一个 latin1 格式的数据库，所有存储的 utf8 字符都显示为 ????

```
 +------+---------+-------+---------+--------------------+----------+--------------------      -----+---------------------+---------------------+---------+
 | id   | user_id | fname | lname   | designation        | location | email                    | created_at          | updated_at          | country |
 +------+---------+-------+---------+--------------------+----------+------------------------- +---------------------+---------------------+---------+
 | 6035 |    6035 | ????? | ??????? | ???????? ????????? |          |  ccc@rddd.net            | 2011-04-11 06:05:54 | 2011-04-10 06:13:04 | xxxxxxxxx |
 +------+---------+-------+---------+--------------------+----------+-------------------------+---------------------+---------------------+---------+ 
```

现在我使用这个命令并将数据库和表的格式更改为utf8

```
 ALTER TABLE <table_name> CONVERT TO CHARACTER SET utf8;

  ALTER DATABASE <database_name> CHARACTER SET utf8; 
```

我读过 latin1 对每个字符使用 1 个字节，但 utf8 对每个字符使用 3 个字节。我的问题是，如果我将我的表（已经包含大量数据）从 latin1 更改为 utf8，那么旧的字符数据将消耗 3 字节或 1 字节。如果我使用更改并转换数据，我会对旧数据有问题吗？我确信新数据将采用 utf8 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:06:37.610

首先，您应该尝试：

```
SET NAMES 'utf8'
SET CHARACTER SET utf8 
```

并选择您的第 #6085 行，以验证记录的数据是否未损坏并以 UTF8 格式编码。

UTF8（与 UTF16 不同）为了向后兼容，对 ASCII 字符使用 1 个字节。它最多使用 4 个字节用于其他字符（[unicode faq](http://unicode.org/faq/utf_bom.html#gen6)）。

如果数据已经以 UTF8 格式存储，则不应转换数据。

* * *

警告

1.  在备份上尝试使用 ALTER TABLE。
2.  ALTER TABLE 锁定您的数据库。

# angularjs - Angularjs Post-Receive Hook 还是类似的？

> ID：11863148
> 
> 赞同：9
> 
> 时间：2012-08-08T11:03:32.753
> 
> 标签：angularjs

有没有办法在每次从服务器返回响应后调用函数而不在回调中显式调用它？

主要目的是我确实有一个通用的错误处理程序服务，我在每个请求的回调中调用它，我想在某个地方指定它，它应该被自动调用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T18:32:33.453

我在解决方案上给了 Gloopy 一个 +1，但是，他引用的[其他帖子](https://stackoverflow.com/a/11787061/1207991)在配置和拦截器中定义的函数中进行了 DOM 操作。相反，我将启动微调器的逻辑移到拦截器的顶部，并在 中使用变量`$rootScope`来控制微调器的隐藏/显示。它似乎工作得很好，我相信它更具可测试性。

```
<img ng-show="polling" src="images/ajax-loader.gif"> 
```

```
angular.module('myApp.services', ['ngResource']).
.config(function ($httpProvider) {
    $httpProvider.responseInterceptors.push('myHttpInterceptor');
    var spinnerFunction = function (data, headersGetter) {
        return data;
    };
    $httpProvider.defaults.transformRequest.push(spinnerFunction);
})
//register the interceptor as a service, intercepts ALL angular ajax http calls
.factory('myHttpInterceptor', function ($q, $window, $rootScope) {
    return function (promise) {
        $rootScope.polling = true;
        return promise.then(function (response) {
            $rootScope.polling = false;
            return response;
        }, function (response) {
            $rootScope.polling = false;
            $rootScope.network_error = true;
            return $q.reject(response);
        });
    };
})
// other code left out 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T16:50:54.127

`$http`如果您的意思是使用或 a的请求，`$resource`您可以通过将代码添加到`$httpProvider.responseInterceptors`. [在这篇文章](https://stackoverflow.com/a/11787061/1207991)中查看更多信息。

虽然它是关于使用[这个小提琴](http://jsfiddle.net/zdam/dBR2r/)启动/停止微调器，但您可以在“停止微调器”部分添加代码`// do something on error`。感谢小组中[的](https://groups.google.com/d/msg/angular/OroP1DBE6AA/R11P6dLFFowJ)zdam ！

# ruby-on-rails-3.1 - 无法在舒适的墨西哥沙发 cms 中上传文件

> ID：11863150
> 
> 赞同：1
> 
> 时间：2012-08-08T11:03:43.153
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2

当我尝试上传图片时，出现以下错误：

> CmsAdmin::FilesController 中的 NoMethodError#create undefined method `match' for nil:NilClass

任何解决方案..？

# ios - Flash builder 无法验证 AIR 应用程序 ID 是否与配置文件中指定的模式匹配

> ID：11863156
> 
> 赞同：0
> 
> 时间：2012-08-08T11:04:16.113
> 
> 标签：ios, apache-flex, flash-builder, provisioning-profile

我正在尝试在 Flash Builder 中构建 iOS 应用程序，但我一直看到此警告：

“Flash builder 无法验证 AIR 应用程序 ID 是否与配置文件中指定的模式匹配。如果不匹配，则应用程序包可能无法安装在设备上”

application.xml 中的应用 ID 与配置文件中设置的应用 ID 匹配。它构建了 IPA，但是当我在 iTunes 中安装时，它拒绝安装该应用程序并说“权利无效”

这听起来像是不匹配的应用程序 ID，但我已经验证它们确实匹配。我已经用谷歌搜索了它，似乎找不到任何对此特定消息的引用。我的下一个最佳猜测是 Flash builder 可能难以读取 mobileprovision 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:17:24.237

Flash Builder 4.7 测试版 2。

我们今天刚遇到这个问题。

如果我们离线（没有互联网连接），就会发生这种情况。

从“Charles”http 请求监视会话中可以看出，flashbuilder 正在尝试访问 Apple DTD 文档以验证 yourAppName-info.pList 文件。

所以解决方案....在进行分发版本构建时连接到互联网。

# emacs - 如何使用 elisp 使窗口系统的焦点切换到另一个应用程序？

> ID：11863157
> 
> 赞同：1
> 
> 时间：2012-08-08T11:04:17.400
> 
> 标签：emacs, elisp

我想在浏览器中打开当前正在编辑的 html 页面，然后通过按键将窗口系统焦点切换到浏览器。我正在使用 gnome 桌面环境。

下面是代码（除了焦点切换）

```
(defun open-in-browser()
  (interactive)
  (save-buffer)
  ; switch the windowing systems focus to the browser
  (let ((filename (buffer-file-name)))
    (browse-url (concat "file://" filename))))

(global-set-key (kbd "<f5>") 'open-in-browser) 
```

我试过使用**lower-frame**函数和**suspend-frame**函数，都隐藏了不需要的emacs-frame，因为我无法看到代码，除此之外我必须输入ALT-TAB**两次**才能切换到再次使用emacs-frame。

如何使用 elisp 切换到另一个应用程序（就像在 gnome 中模拟 ALT-TAB 一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:09:48.860

您正在寻找的功能可能`unfocus-frame`已经过时了。您需要一个合作的窗口管理器才能实际执行您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:35:46.800

你不能做你所要求的。改变焦点是窗口管理器的责任，emacs 做不到。你可以

1.  从 emacs 调用外部程序来做你想做的事
2.  创建一个键绑定，它将结合`<f5>`和`ALT-TAB`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:15:12.697

有些程序可用于从命令行控制窗口管理器，以便您可以从 elisp 调用命令来激活窗口和其他东西。

一个这样的程序是[wmctrl](http://tomas.styblo.name/wmctrl/)。我不知道它是否适用于 Gnome，您应该尝试一下。

# linux - 解析json数据时文本编码错误

> ID：11863158
> 
> 赞同：-1
> 
> 时间：2012-08-08T11:04:18.843
> 
> 标签：linux, json, parsing, shell, curl

我正在卷曲一个网站并将其写入 .json 文件；该文件输入到我的 java 代码中，该代码使用 json 库对其进行解析，并将必要的数据写回 CSV 文件中，我稍后将使用该文件将其存储在数据库中。

如您所知，来自网站的数据可以采用不同的格式，所以我确保我以`UTF-8`格式读取和写入，但我仍然得到错误的输出。

例如，`Østerriksk`变成`ï¿½sterriksk`。

我在 Linux 中做这一切。我认为存在一些编码问题，因为相同的代码在 Windows 中运行良好，但在 Unix/Linux 中却不行。

我很确定我的 java 代码是正确的，但我无法找出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:06:35.150

您使用的是哪种 IDE，例如，如果您使用的是 Eclipse IDE，并且未在属性中将默认编码设置为 utf-8，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:07:22.220

您正在以 ISO 8859-1 格式读取数据，但文件实际上是 UTF-8。我认为文件阅读器有一个参数（或设置）应该可以解决这个问题。

另外： curl 不会关心编码。确实是您的 Java 代码中有问题。

# awk - 根据条件拆分文件

> ID：11863159
> 
> 赞同：1
> 
> 时间：2012-08-08T11:04:19.347
> 
> 标签：awk, nawk

我有一个包含以下数据的文件

```
.domain bag
.set bag1
bag1
abc1
.set bag2
bag2
abc2
.domain cat
.set bag1:cat
bag1:cat
abc1:cat
.set bag2:cat
bag2:cat
abc2:cat 
```

我想根据设定值将此文件分成两个（bag1.txt 和 bag2.txt）。

bag1.txt 应该看起来像：

```
.domain bag
.set bag1
bag1
abc1
.domain cat
.set bag1:cat
bag1:cat
abc1:cat 
```

bag2.txt 应该看起来像：

```
.domain bag
.set bag2
bag2
abc2
.domain cat
.set bag2:cat
bag2:cat
abc2:cat 
```

*.domain* 行对这两个文件都是通用的。

我尝试了下面的命令，但它不起作用。

```
nawk '{if($0~/.set/){split($2,a,":");filename=a[1]".text"}if(filename=".text"){print|"tee *.text"}else{print >filename}}' file.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:27:11.607

单程：

```
awk '
    BEGIN {
        ## Split fields with spaces and colon.
        FS = "[ :]+";

        ## Extension of output files.
        ext = ".txt";
    }

    ## Write lines that begin with ".domain" to all known output files (saved
    ## in "processed_bags"). Also save them in the "domain" array to copy them
    ## later to all files not processed yet.
    $1 == ".domain" {

        for ( b in processed_bags ) {
            print $0 >> sprintf( "%s%s", b, ext );
        }

        domain[ i++ ] = $0;

        next;
    }

    ## Select output file to write. If not found previously, copy all
    ## domains saved until now.
    $1 == ".set" {
        bag = $2;
        if ( ! (bag in processed_bags) ) {
            for ( j = 0; j < i; j++ ) {
                print domain[j] >> sprintf( "%s%s", bag, ext );
            }
            processed_bags[ bag ] = 1;            
        }
    }

    ## A normal line of data (neither ".domain" nor ".set"). Copy
    ## to the file saved in "bag" variable.
    bag {
        print $0 >> sprintf( "%s%s", bag, ext );
    }
' file.txt 
```

运行以下命令检查输出：

```
head bag[12].txt 
```

输出：

```
==> bag1.txt <==                                                                                                                                                                                                                             
.domain bag                                                                                                                                                                                                                                  
.set bag1                                                                                                                                                                                                                                    
bag1                                                                                                                                                                                                                                         
abc1                                                                                                                                                                                                                                         
.domain cat                                                                                                                                                                                                                                  
.set bag1:cat                                                                                                                                                                                                                                
bag1:cat
abc1:cat

==> bag2.txt <==
.domain bag
.set bag2
bag2
abc2
.domain cat
.set bag2:cat
bag2:cat
abc2:cat 
```

# javascript - 获取页面的完整 html，除了少数具有特定类的 div

> ID：11863160
> 
> 赞同：0
> 
> 时间：2012-08-08T11:04:20.220
> 
> 标签：javascript, jquery

我想在 javascript 中获取完整的 html 页面，除了少数 div 应用了特定的类。我正在使用它来获取我的文档的完整 html

```
 $(window.document.documentElement).html().toString() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:15:11.050

你可以试试：

```
$(document).contents().not('.aClass').foo() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:16:45.913

您首先使用 .clone() 创建 documentElement 的副本并将其存储在变量中。

在复制的文档中，您删除所需的元素。

```
var doc = $(window.document.documentElement).clone();
doc.find('.remove').remove();

console.log(doc.html());​​​​​ 
```

[http://jsfiddle.net/ZnMyj/](http://jsfiddle.net/ZnMyj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:15:44.760

我建议如下：

```
var html = $('html').clone(true);
html.find('.remove').remove();

console.log(html)​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/X38Fj/)。

请注意，如果您尝试链接`html.toString()`，您最终会得到 string `[object Object]`，而不是 HTML。如果您在 Chrome 中`.toString()`的 ,​​ 之后添加`remove()`，您似乎最终会得到完全相同的对象被传递到控制台。

参考：

*   [`clone()`](http://api.jquery.com/clone/).
*   [`find()`](http://api.jquery.com/find/).
*   [`remove()`](http://api.jquery.com/remove/).

# ios - iOS - 在 UITableView 中阅读 Facebook 帖子

> ID：11863168
> 
> 赞同：1
> 
> 时间：2012-08-08T11:04:46.100
> 
> 标签：ios, facebook, uitableview, facebook-ios-sdk

我正在尝试使用 UITableView 显示 Facebook 页面帖子。在 iOS 5 或 6 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:10:56.897

您需要获取 OAuth 令牌并从 OpenGraph 获取 JSON 提要

对于 OAuth 令牌：

```
https://graph.facebook.com/oauth/access_token?client_id=<client_id here>&client_secret=<client_secret here>&grant_type=client_credentials 
```

对于饲料：

```
https://graph.facebook.com/<facebook_page_id>/feed/?access_token=<oauth_token> 
```

你得到一个 JSON 数组，并可以使用你最喜欢的 JSON 解析器对其进行解析。此外，您可以使用此工具探索打开的图表：

```
https://developers.facebook.com/tools/explorer/ 
```

希望有帮助。快乐的 iCoding。

# .net - .NET 中地名或城市的纬度和经度

> ID：11863169
> 
> 赞同：0
> 
> 时间：2012-08-08T11:04:47.003
> 
> 标签：.net, geolocation, latitude-longitude

我有一组纬度和经度值（和大地基准？）。我想用这些来获得地名或城市。有没有办法在.NET中做到这一点？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:15:17.407

它的名称是反向地理编码。这种服务有很多供应商。一个是谷歌。看看他们的开发者部分：

[谷歌反向地理编码](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

您只需格式化所需的 URL 并使用[Net.WebClient](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.NET.WEBCLIENT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true)下载 Json：

```
Using client As New Net.WebClient()
   Return client.DownloadString(address)
End Using 
```

然后，您需要[解析 Json](https://stackoverflow.com/questions/2191141/parse-json-in-net-runtime)数据以提取街道名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:06:31.527

您将不得不使用网络服务。[Geonames](http://www.geonames.org/)就是这样一种免费的来源。

# asp.net - 自定义动态数据网站中外键字段的标签

> ID：11863171
> 
> 赞同：0
> 
> 时间：2012-08-08T11:04:52.043
> 
> 标签：asp.net, linq-to-sql, dynamic-data, asp.net-dynamic-data

我正在使用带脚手架的 Dynamic Data .NET 4 来编辑数据库中的数据。我正在使用 LINQ to SQL，并且我有一个包含 3 个字段的表，这些字段都使用它们的外键引用同一个表：

**火柴**

*   **TeamAId** - 外键引用 Teams 表中的团队
*   **TeamBId** - 外键引用 Teams 表中的团队
*   **WinnerId** - 外键引用 Teams 表中的团队

默认情况下，动态数据会为这些字段创建“Team”、“Team1”、“Team2”标签，因为它试图对外键进行智能处理，但这对于区分它们并不是特别有用。有没有一种简单的方法可以强制使用原始列名？或者我必须创建自定义实体模板来更改这些标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:36:54.727

使用 DisplayAttribute

```
[Display(Name = "Team A")]
public object Team { get; set; }

[Display(Name = "Team B")]
public object Team1 { get; set; }

[Display(Name = "Winner")]
public object Team2 { get; set; } 
```

# c - 是否可以将所有 0 分配给 128 位的所有位？

> ID：11863172
> 
> 赞同：0
> 
> 时间：2012-08-08T11:04:52.940
> 
> 标签：c

```
int main()
{
    int* p= (int*)malloc(8);

    for(i=0;i<128;i++)
    p=0;

} 
```

我想为所有 128 位分配全零。上面的代码是否正确？我想澄清一下。我的目标是将 128 位分配给一个变量，并将所有 0 分配给所有 128 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:08:13.787

不，您只需将 0 分配给指针本身（因此您会丢失它并泄漏内存）。用这个：

（编辑：正如 Jim Balter 指出的那样，处理非 8 位字符很容易：）

```
int main()
{
    unsigned n = (128 + CHAR_BIT - 1) / CHAR_BIT;
    unsigned char *p = malloc(n);

    for(i = 0; i < n; i++)
    p[i] = 0;
} 
```

但这是在重新发明轮子。为什么不使用标准功能`memset()`？

```
int main()
{
    unsigned n = (128 + CHAR_BIT - 1) / CHAR_BIT;
    unsigned char *p = malloc(n);

    memset(p, 0, n);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:09:01.483

哇，有这么多可以挑选的...

1）你分配了 8 个字节，也就是 64 位

2）您迭代到 128，这将导致缓冲区溢出，除了：

3）在你的循环中，你只设置分配给 0 的第一个字节

有两种方法可以做到这一点：

```
p = malloc(128/8);
for (i = 0; i < (128/8); i++)
    p[i] = 0; 
```

或者您可以只使用所有 POSIX 操作系统中提供的 memset(3) 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T11:15:25.980

与其分配和清除它，`calloc()`我认为会更好。

```
int* p= (int*)malloc(8); 
```

您只分配了 8 个字节，即 8*8 = 64 位。

```
#include <stdio.h>
#include <stdlib.h>
int main()
{

int i = 0;
char *p = calloc(16, sizeof(char));

//for Testing
for(i = 0; i < 16; i++)
  printf("%d\t", *p++);

return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T11:12:34.100

int 有时会根据平台分配 4 个字节。所以使用 char 代替：

```
char* p= (char*)malloc(16);
for(i=0;i<16;i++)
    p[i]=0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T11:08:37.677

您可以简单地使用`memset`例程来取消所需的尽可能多的字节。它看起来像这样：

```
uint8_t* p= (uint8_t*)malloc(16);
memset(p, 0, 16); 
```

请注意，如果您想要 128 位（即 16 字节），则需要将 8 替换为 16。

**更新：**

由于整数类型的大小取决于系统，因此使用`uint8_t`typedef 可以让您确信您正在使用的类型实际上是 8 位长。这个 typedef（以及其他固定大小的整数类型）可以在`stdint.h`. 如果无法使用此标头，您可以自己创建这些类型定义，例如`typedef unsigned char uint8_t`对于大多数系统都是如此。

如果稍后将代码移植到具有不同整数大小的系统，您不必担心大小不兼容的问题 - 您只需更改`(u)intX_t`（u - 表示无符号，X - 位数）typedef。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T12:59:35.577

用于`calloc( )`分配和归零。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T11:07:47.993

上面的代码会将 0 分配给指针，而不是内容。

要初始化内容，请使用 memset：

```
memset(p, 0x00, 8); 
```

或取消引用指针：

```
for(i=0;i<8;i++)
    p[i]=0; 
```

# vb6 - 如何通过 USB GSM 调制解调器（华为 E1731）从 VB 应用程序发送短信

> ID：11863179
> 
> 赞同：1
> 
> 时间：2012-08-08T11:05:16.817
> 
> 标签：vb6, sms, usb, gsm, modem

我正在创建一个小型 VB 项目，我想通过 SMS 发送一些信息。我试图在这里找到许多线程的解决方案，但可以得到一个。

我用的是华为E1731 3G USB调制解调器，可以通过官方软件收发短信。我如何使用调制解调器通过从表单中的文本框中获取号码来向特定号码发送固定消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:41:53.113

希望您使用的是 VB.NET 而不是 VB6。

这是 C#.NET 中的一个解决方案，您应该可以轻松地将其转换为 [VB.NET：http://sharp-coders.blogspot.in/2011/12/send-sms-using-at-commands-via-gms .html](http://sharp-coders.blogspot.in/2011/12/send-sms-using-at-commands-via-gms.html)

# c# - 删除 WinForms 中 Tab 控件周围的填充

> ID：11863180
> 
> 赞同：4
> 
> 时间：2012-08-08T11:05:17.567
> 
> 标签：c#, winforms, tabcontrol

> **可能重复：**
> [如何删除 WinForms 中容器控件的边框填充？](https://stackoverflow.com/questions/4968267/how-can-i-remove-the-border-padding-on-container-controls-in-winforms)

我在 Visual Studio 2008 中开发了一个 Winforms 应用程序。在主窗体上，我有一个**Tab 控件**。现在我正在尝试对标签页使用**背景图像。**我遇到的问题是选项卡控件周围似乎有一个粗边框。此外，选项卡控件不会覆盖整个表单，在表单和选项卡页之间的顶部留下一行空间。（*我在底部设置了标签页对齐方式*）。所以选项卡控件周围的边框和顶部的空间线使我的页面看起来很难看。我试图提供与形成背景相同的图像，但选项卡控件填充播放破坏运动。

任何使我的设计更好的想法将不胜感激。

![截屏](../Images/054e8deecf24ed20ff847bc3ca02e69a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:33:37.507

我同意这里的大多数评论。标准的 TabControl 在 Microsoft 部分绘制得非常糟糕……即使在 Windows Vista / 7 中它看起来也不是很好！您最好通过继承 TabControl 然后绘制您想要的其他内容来编写自己的自定义实现。

您可以考虑将其用作新控件的模板。您只需要在 OnPaint 和 OnPaintBackground 方法中添加一些很酷的设计/绘图工作。

```
namespace CustomControls
{
    #region USING

    using System;
    using System.ComponentModel;
    using System.Drawing;
    using System.Windows.Forms;

    #endregion

    public class CustomTabControl : TabControl
    {
        #region VARIABLES

        private int hotTrackTab = -1;

        #endregion

        #region INSTANCE CONSTRUCTORS

        public CustomTabControl() : base()
        {
            this.InitializeComponent();
        }

        #endregion

        #region INSTANCE METHODS

        private void InitializeComponent()
        {
            this.SetStyle(ControlStyles.UserPaint, true);
            this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
            this.SetStyle(ControlStyles.ResizeRedraw, true);
            this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);

            this.DrawMode = TabDrawMode.OwnerDrawFixed;
        }

        private int GetTabUnderCursor()
        {
            Point cursor = this.PointToClient(Cursor.Position);
            for (int index = 0; index < this.TabPages.Count; index++)
            {
                if (this.GetTabRect(index).Contains(cursor))
                {
                    return index;
                }
            }
            return -1;
        }

        private void UpdateHotTrack()
        {
            int hot = GetTabUnderCursor();
            if (hot != this.hotTrackTab)
            {
                if (this.hotTrackTab != -1)
                {
                    this.Invalidate(this.GetTabRect(this.hotTrackTab));
                }
                this.hotTrackTab = hot;
                if (this.hotTrackTab != -1)
                {
                    this.Invalidate(this.GetTabRect(this.hotTrackTab));
                }
                this.Update();
            }
        }

        #endregion

        #region OVERRIDE METHODS

        protected override void OnMouseEnter(EventArgs e)
        {
            base.OnMouseEnter(e);
            this.UpdateHotTrack();
        }

        protected override void OnMouseLeave(EventArgs e)
        {
            base.OnMouseLeave(e);
            this.UpdateHotTrack();
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            base.OnMouseMove(e);
            this.UpdateHotTrack();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);
            switch (this.Alignment)
            {
                case TabAlignment.Bottom:
                case TabAlignment.Left:
                case TabAlignment.Right:
                case TabAlignment.Top:
                default:
                    throw new NotImplementedException();
            }
        }

        protected override void OnPaintBackground(PaintEventArgs pevent)
        {
            base.OnPaintBackground(pevent);
        }

        #endregion
    }
} 
```

请记住，上面的代码绘制了一个完全空白的 TabControl，它只显示 DisplayRectangle。其他一切，包括您需要自己做的标签！

此外，要为单个 TabPages 绘制背景，您可能还需要覆盖和自定义实现 TabPage，但是您可能能够仅使用自定义选项卡控件来实现您正在寻找的结果。

看看这个 [http://www.codeproject.com/Articles/42046/Customized-TabControl-by-Repainting-Microsoft-s-Pa](http://www.codeproject.com/Articles/42046/Customized-TabControl-by-Repainting-Microsoft-s-Pa)

恕我直言，这更好...... [http://www.codeproject.com/Articles/38014/KRBTabControl](http://www.codeproject.com/Articles/38014/KRBTabControl)

恕我直言，这更好...... [http://www.codeproject.com/Articles/91387/Painting-Your-Own-Tabs-Second-Edition](http://www.codeproject.com/Articles/91387/Painting-Your-Own-Tabs-Second-Edition)

也看看VB论坛......我知道我在那里似乎有一些很棒的自定义选项卡控件！

# javascript - HTML5 音频标签持续时间

> ID：11863181
> 
> 赞同：4
> 
> 时间：2012-08-08T11:05:24.137
> 
> 标签：javascript, html, audio

为什么每次我打电话

```
var track_length = $(".audio-player")[counter].duration; 
```

它返回给我这个

```
351.234 
```

如何将其转换为这种类型的分/秒格式。3:51 秒？（我不确定我对时间的估计是否正确）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T11:16:43.030

你的意思是你想把它转换成分钟和秒，如果是的话：

```
function readableDuration(seconds) {
    sec = Math.floor( seconds );    
    min = Math.floor( sec / 60 );
    min = min >= 10 ? min : '0' + min;    
    sec = Math.floor( sec % 60 );
    sec = sec >= 10 ? sec : '0' + sec;    
    return min + ':' + sec;
}
console.log( readableDuration(351.234) ); // 05:51 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T07:58:39.170

您可以使用 moment.js 来做到这一点：

```
moment.utc(this.duration * 1000).format("mm:ss"); 
```

结果将是“06:51”。

```
moment.utc(this.duration * 1000).format("mm:ss.SSS"); 
```

结果将是“06:51.234”。

# c++ - 使用 cmake 编译符号 c++ 应用程序

> ID：11863182
> 
> 赞同：0
> 
> 时间：2012-08-08T11:05:24.603
> 
> 标签：c++, g++, cmake

我正在使用`ubuntu 12.03`并尝试使用`Symbolicc++`库，它在它的 README 文件中指定使用该库的程序应该使用 command 编译`g++ -o program program.cpp -lsymbolicc++`。我想知道如何`-lsymbolicc++`在`cmakelists.txt`文件中输入过去的补丁并在 kdevelop 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:11:47.663

如果您已经将程序作为可执行文件添加到 cmakelists.txt a'la;

```
add_executable(program program.cpp) 
```

那么你可以添加

```
target_link_libraries(program symbolicc++) 
```

在链接时添加该库。

# sql - 从备份文件恢复数据库，其中文件名与 reg 表达式匹配

> ID：11863186
> 
> 赞同：1
> 
> 时间：2012-08-08T11:05:50.847
> 
> 标签：sql, sql-server, tsql, backup

我正在使用 SQL Server / T-SQL 执行以下操作：

```
RESTORE DATABASE UAT
FROM DISK = 'E:\Databases\backup\MY_LIVE_20120720_070001.bak'
WITH REPLACE 
```

但我希望能够使用忽略备份文件中文件名（代表日期）中的数字的文件位置。永远只有一个`'MY_LIVE_****.bak'`，但它的数字字符串每天都会改变。

目标是每周使用最新的备份从实时恢复我的 UAT 实例——其中只有与该字符串前缀匹配的文件，但数字/日期每周都会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:17:19.517

您可以使用`xp_cmdshell`为您的文件做一个目录。但是请注意，这`xp_cmdshell`通常是出于充分的理由而禁用的。鉴于这是 UAT，这可能不是问题。

有关更多信息，请参见此处[http://www.sqlusa.com/bestpractices2005/dir/](http://www.sqlusa.com/bestpractices2005/dir/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:16:57.737

```
ALTER DATABASE UAT
SET SINGLE_USER WITH
 ROLLBACK IMMEDIATE

declare @fileName varchar(56);

SELECT @filename = physical_device_name
FROM msdb.dbo.backupmediafamily
WHERE media_set_id =(
    SELECT TOP 1 media_set_id 
    FROM msdb.dbo.backupset 
    WHERE database_name='MY_LIVE' 
    ORDER BY backup_start_date DESC)

ALTER DATABASE UAT
SET SINGLE_USER WITH
 ROLLBACK IMMEDIATE

----Restore Database
RESTORE DATABASE UAT
FROM DISK = @fileName
WITH REPLACE

/*If there is no error in statement before database will be in multiuser
 mode.
 If error occurs please execute following command it will convert
 database in multi user.*/
ALTER DATABASE ASLA_DEV SET MULTI_USER
 GO 
```

# java - 为 PrimeFaces remoteCommand 生成和使用唯一名称

> ID：11863197
> 
> 赞同：2
> 
> 时间：2012-08-08T11:06:39.067
> 
> 标签：java, jsf-2, primefaces, facelets, composite-component

我了解对于具有该`widgetVar`属性的 PrimeFaces 组件，我可以使用`p:widgetVar('myComponentId')`来获取`widgetVar`从组件 ID 派生的值。如果存在相同类型的功能，那就太好了，`<p:remoteCommand/>`这样我就可以拥有相同类型的复合组件的多个实例，使用`<p:remoteCommand/>`. 我最初尝试了该`widgetVar`功能，但后来意识到它不起作用。

```
<p:remoteCommand id="previousCycleCommand"
                 actionListener="#{cc.selectPreviousCycle()}"
                 update=":#{cc.clientId}:updateable"
                 partialSubmit="false"/>

<p:button id="previousCycleButton"
          icon="ui-icon-circle-triangle-w"
          onclick="#{p:widgetVar('previousCycleCommand')}();"/> 
```

是否有任何 PrimeFaces 功能可用于从其完全扩展的 ID 派生远程命令的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:26:32.300

使用当前客户端 ID 创建唯一 ID 怎么样？由于每个复合组件都应该是一个唯一的命名容器，因此连接的 ID 也应该是唯一的。

```
<p:remoteCommand id="#{cc.clientId}_previousCycleCommand"
             actionListener="#{cc.selectPreviousCycle()}"
             update=":#{cc.clientId}:updateable"
             partialSubmit="false"/>

<p:button id="previousCycleButton"
      icon="ui-icon-circle-triangle-w"
      onclick="#{cc.clientId}_previousCycleCommand();"/> 
```

# java - Android构建绘图卡什错误

> ID：11863198
> 
> 赞同：4
> 
> 时间：2012-08-08T11:06:41.217
> 
> 标签：java, android

我有许多通过 ActionBarSherlock 使用片段的不同活动的大型应用程序。当我通过意图启动新活动时随机出现此错误：

```
08-08 18:22:12.563: ERROR/AndroidRuntime(2029): FATAL EXCEPTION: main
        java.lang.NullPointerException
        at android.view.View.buildDrawingCache(View.java:6438)
        at android.view.ViewGroup.onAnimationStart(ViewGroup.java:1253)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1499)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.View.buildDrawingCache(View.java:6500)
        at android.view.ViewGroup.onAnimationStart(ViewGroup.java:1253)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1499)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.View.draw(View.java:6743)
        at android.widget.FrameLayout.draw(FrameLayout.java:352)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
        at android.view.ViewRoot.draw(ViewRoot.java:1407)
        at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
        at android.view.ViewRoot.handleMessage(ViewRoot.java:1730)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        at dalvik.system.NativeStart.main(Native Method) 
```

如果有人对我如何解决它有任何想法，请告诉我。谢谢

# c# - 从 C# 重新连接到 MySQL 数据库的问题

> ID：11863199
> 
> 赞同：0
> 
> 时间：2012-08-08T11:06:42.013
> 
> 标签：c#, mysql

我可以通过以下方式成功登录数据库：

```
MySqlConnection conn = new MySqlConnection();
MySqlConnectionStringBuilder connString = new MySqlConnectionStringBuilder();

connString.Server = textEditServer.Text;
connString.UserID = "root";
connString.Password = textEditServerPassword.Text;
connString.Database = "geysercontrol";
conn.ConnectionString = connString.ConnectionString;

try
{
     conn.Open();
     Properties.Settings.Default.Properties["ConnectionString"].DefaultValue = conn.ConnectionString;
     conn.Close();
}
catch (MySqlException)
{
      XtraMessageBox.Show("No connection could be established");
} 
```

但是当我尝试使用 ConnectionString 属性重新连接不同的类时，我得到一个 MySQLException 说

```
Access denied for user 'root'@'localhost' (using password: NO) 
```

这可能是什么原因？MySQL网站上关于可能原因的页面不包括我的情况。

我用来重新连接的代码是：

```
 connection = new MySqlConnection();
 connection.ConnectionString = (String)Properties.Settings.Default.Properties["ConnectionString"].DefaultValue;
 connection.Open(); 
```

在这两种情况下，connectionString 肯定是相同的。这是：

```
server=localhost;User Id=root;database=geysercontrol;password=password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:35:31.680

Add persist security info = true to the connection string I think.

If it were me though I wouldn't put connection string with a password in it in there. If you ever call Save, it will be exposed in the config file.

# php - mysql不执行where子句中的特殊字符

> ID：11863200
> 
> 赞同：2
> 
> 时间：2012-08-08T11:06:48.130
> 
> 标签：php, mysql

```
SELECT c.ci_num, 
      CASE 
           WHEN c.ci_homonym=1 
           THEN concat(ci_name,', ',name_fr) 
           ELSE ci_name 
      END as ci_name 
FROM city as c join fr_department as fr on c.ci_sr=fr.code  
WHERE ci_name LIKE 'bé%'  
LIMIT 5 
```

我正在选择 city_name 和 city_num，但是当有特殊字符（bé）字符串时，它不会执行查询，但是当我向 phpmyadmin 执行此查询时，此查询会显示结果。为什么不由 mysql_query($query1) 执行，为什么？以及如何执行此操作，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:11:23.643

这个`é`字符是如何编码的？（例如 utf-8）
通过[mysql_set_charset()](http://docs.php.net/mysql_set_charset)相应地设置 mysql 连接使用的字符集。这也会影响用于比较字符的排序规则。每个字符集都有一个默认排序规则，即比较/排序字符的默认方式。对于大多数字符集，有不止一种排序规则可用，例如用于忽略大写/小写。

为了掌握与 mySQL 相关的字符集（和排序规则），我建议阅读

*   [https://dev.mysql.com/doc/refman/5.0/en/charset.html](https://dev.mysql.com/doc/refman/5.0/en/charset.html)
*   在这种情况下，特别是。[https://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](https://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)
*   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

--- 编辑：示例 ---

让我们以这个脚本（文件）为例

```
<?php
$startsWith = 'bé';

$mysql = mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test', $mysql) or die(mysql_error());

echo 'version: ', PHP_VERSION, "\n";
echo 'os: ', PHP_OS, "\n";
echo 'mysql_client_encoding: ', mysql_client_encoding($mysql), "\n";
for($i=0; $i<strlen($startsWith); $i++) {
    printf('%02X ', ord($startsWith[$i]));
} 
```

我的编辑器默认保存 utf-8 编码的文件，显然（以前不知道）我的 php 版本附带了一个使用 utf-8 作为默认连接字符集的 mysql 连接器。
因此输出是

```
version: 5.4.1
os: WINNT
mysql_client_encoding: utf8
62 C3 A9 
```

您会看到 to 字符 bé 如何编码为三个字节 0x62 0xC3 0xA9 ；最后一个字节是 é 的 utf-8 表示。所以我们有 client-encoding=utf-8 并且输入字符串也是 utf-8 -> 好的
现在，如果我将脚本文件的编码从 utf-8 更改为 iso-8859-1 结果是

```
version: 5.4.1
os: WINNT
mysql_client_encoding: utf8
62 E9 
```

现在 é 仅由一个字节编码；它是那个字符的 iso-8859-1 表示。如果这个字节序列被发送到 mysql 服务器（它期望从客户端获得一个 utf-8 序列），服务器将不知道如何处理它——因为它是一个无效的 utf-8 序列。更糟糕的是，如果 iso-8859 序列偶然形成了一个同样有效的 utf-8 序列，服务器会做一些完全错误的事情，因为它会将序列解释为与假设不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:11:46.930

如果“bé”是硬编码的，它可能与文件编码有关。特别是对于特殊字符，数据库的文件编码应该始终与您的 PHP 脚本相同。

# .htaccess - .htaccess 只允许特定的子文件夹

> ID：11863202
> 
> 赞同：0
> 
> 时间：2012-08-08T11:06:50.687
> 
> 标签：.htaccess, permissions, indexing

我有文件夹结构

```
/Root
   /folder1
   /folder2
   /folder3
  ...
  /folder100
  ...
  /Share
    /subshare1
    /subshare2 
```

我喜欢做的是允许子共享 1 的目录/索引浏览

```
Options +Indexes
IndexOptions +FancyIndexing 
```

但我不希望他们导航到父文件夹（共享）

当我使用 .htaccess 时

```
deny from all 
```

我仍然可以看到**/share**文件夹但看不到子目录？

我不能将**全部拒绝**放入**/root**，因为我不希望它影响文件夹 1、文件夹 2 等...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T11:09:20.290

您可以`Options -Indexes`在父文件夹中设置，这将拒绝对它们进行索引。

* * *

当 Apache 读取`.htaccess`文件时，它会通过路径（从根目录向内），并且为了到达子节点，必须有权访问途中的所有父节点。因此，当您`deny from all`在父级上使用时，您实际上拒绝访问整个子树...

# javascript - 对按钮施加限制

> ID：11863207
> 
> 赞同：0
> 
> 时间：2012-08-08T11:07:08.013
> 
> 标签：javascript, jquery

在我的程序中，突出显示了一个名为“validDrop”的区域，供用户将项目拖放到其中。

单击按钮“minibutton”时，新区域会突出显示。

我想告诉程序仅在当前区域（validDrop）的样式为“wordglow2”和“wordglow4”时才允许单击按钮。

这个我试过了，为什么不行？

```
if ($(validDrop).hasClass('wordglow2', 'wordglow4')) {
    $('.minibutton').click(true);
} else {
    $('.minibutton').click(false);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:11:21.703

因为`hasClass`不带多个参数，并且因为`.click`要么触发点击要么绑定点击监听器，所以它不设置可点击性。

根据具体`.minibutton`情况，您可以执行以下操作：

```
var valid = $(validDrop).hasClass('wordglow2') && $(validDrop).hasClass('wordglow4')
$('.minibutton').prop('disabled', !valid); 
```

如果它不是可以禁用的类型，您可能会考虑这样的事情：

```
$('.minibutton').toggleClass('disabled', !valid); 
```

并像这样绑定点击监听器：

```
$(document).on('click', '.minibutton:not(.disabled)', function() {
    // click action here
}); 
```

正如 ThiefMaster 在评论中指出的那样，`$(validDrop).is('.wordglow2.wordglow4')`这是一种功能等效的检查 drop 是否具有两个类的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:21:21.737

您还可以使用`.bind()`and`.unbind()`向按钮添加和删除单击事件，如我的示例[http://jsfiddle.net/Uz6Ej/](http://jsfiddle.net/Uz6Ej/)

# sql-server - 从 Microsoft SQL Server 将特定日期格式导入 Excel

> ID：11863208
> 
> 赞同：1
> 
> 时间：2012-08-08T11:07:09.107
> 
> 标签：sql-server, excel, date, date-format

我通过内置的 Excel 连接工具将德国 SQL Server 表中的日期导入到德国 Excel 文件中。

但是日期格式就像在 SQL Server 中一样：`2012-08-08`但我想显示：`08.08.2012`。当我在单元格内双击时，它会识别德语日期格式，但我当然希望整个列都使用这种格式，而不必手动更改它。

我还需要能够使用这些日期进行计算。

我是否需要更改 SQL Server 中的某些内容或如何使其工作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-24T14:30:47.863

问题是 Excel 无法识别 SQL Server Date 类型。将日期转换为 Smalldatetime 或 Datetime，然后导入并格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:32:51.927

只要识别出日期，您就可以将整个列的格式设置为自定义格式，并将自定义格式的值设置为`dd.mm.yyyy`（或`mm.dd.yyyy`，取决于您想要的）。

不是*编程*答案，但只需设置整个列的自定义格式，它就会为您提供所需的显示。

# c++ - C++ 以十六进制显示字节数组

> ID：11863212
> 
> 赞同：0
> 
> 时间：2012-08-08T11:07:33.573
> 
> 标签：c++, string, dll, hex, hook

我制作了一个 dll 挂钩，它将在每次事件发生在主应用程序上时发送我需要的字节数组的地址。

显示代码：

```
void receivedPacket(char *packet){
    short header = packet[2];

    TCHAR str[255];

    _stprintf(str, _T("Header : %lX\n"), header);  // This works fine. It return 0x38 as it should.

    WriteConsole(GetStdHandle(STD_OUTPUT_HANDLE), str, strlen(str), 0, 0);
    WriteConsole(GetStdHandle(STD_OUTPUT_HANDLE), packet, 34, 0, 0);

} 
```

这是来自该地址的字节数组的示例，这就是我希望它显示的方式： `05 01 38 00 60 00 9D 01 00 00 00 00 00 70 C9 7D 0E 00 00 00 00 00 00 00 FF 20 79 40 00 00 00 00`

但是，使用我当前的代码，它只会显示奇怪的符号。那么我们如何将所有这些奇怪的符号转换为十六进制呢？

我实际上是 C++ 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:14:54.743

格式化字符串中的每个字节：

```
static TCHAR const alphabet[] = _T("0123456789ABCDEF");

for (TCHAR * p = str; *p; ++p)
{
    TCHAR const s[2] = { alphabet[p / 16], alphabet[p % 16] };
    WriteConsole(GetStdHandle(STD_OUTPUT_HANDLE), s, 2, 0, 0);
} 
```

# javascript - Javascript - 如何访问事件函数中的对象属性？

> ID：11863221
> 
> 赞同：1
> 
> 时间：2012-08-08T11:07:52.793
> 
> 标签：javascript, html, events, web

我是一个新手程序员。我想以 OO 方式创建我的脚本。但是我想不出如何保护我的财产并且仍然能够访问它。问题是我无法`this.XXX`在函数中访问我的属性

```
this.handleStartEvent=function(event) 
```

Firebug 中的错误信息：

> “类型错误：this.imgContainer 未定义”

整个脚本如下：

```
var imageViewer=function(imageWrapper)
{
    var hasTouch = 'ontouchstart' in window,
    resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize',
    startEvent = hasTouch ? 'touchstart' : 'mousedown',
    moveEvent = hasTouch ? 'touchmove' : 'mousemove',
    endEvent = hasTouch ? 'touchend' : 'mouseup',
    cancelEvent = hasTouch ? 'touchcancel' : 'mouseup';

    this.imgContainer=imageWrapper;
    this.image=imageWrapper.getElementsByTagName("img")[0];
    this.initScale=1;
    this.scaleLevel=this.initScale;
    this.startPoint={x:0,y:0}

    //alert(this.image)
    this.initEvents=function()
    {
        window.addEventListener(resizeEvent, this.resizeImageViewer, false);
        this.imgContainer.addEventListener(startEvent, this.handleStartEvent, false);
        this.imgContainer.addEventListener(moveEvent, this.handleMoveEvent, false);
        this.imgContainer.addEventListener(endEvent, this.handleEndEvent, false);
    }

    this.resizeImageViewer=function(event)
    {
        /*not finish*/
    }

    this.handleStartEvent=function(event)
    {
        /**********problem goes here*************/
        this.startPoint.x = event.offsetX || (event.pageX - this.imgContainer.offsetLeft); 
        this.startPoint.y = event.offsetY || (event.pageY - this.imgContainer.offsetTop);
    }

    this.handleMoveEvent=function(event)
    {
        /*not finish*/
    }

    this.handleEndEvent=function()
    {
        /*not finish*/
    }

    this.initEvents();
}

var imageViewerObj = new imageViewer(document.getElementById("imageWrapper")); 
```

我知道那`this`将是`imgContainer`，而不是`imageViewer`，但我不知道如何获得我`imageViewer`的属性`startPoint`和`initScale`。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:17:24.613

如果您想保留引用以`this`将其保存在其他变量中：

```
var imageViewer = function(imageWrapper)
{
    var self = this; // use "self" instead of "this" later

    ...

    self.startPoint={x:0,y:0}

    self.initEvents=function()
    {
        window.addEventListener(resizeEvent, self.resizeImageViewer, false);
        self.imgContainer.addEventListener(startEvent, self.handleStartEvent, false);
        self.imgContainer.addEventListener(moveEvent, self.handleMoveEvent, false);
        self.imgContainer.addEventListener(endEvent, self.handleEndEvent, false);
    }

    ...

    self.initEvents();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:13:59.327

`this.parent.getAttribute(...);`如果 imgContainer 是父级，那么如果它是子级，则可以使用`this.parent.getChildAt( index ).getAttribute(...);`

将 index 替换为您要选择的元素的编号（索引）。如果它的第一个孩子喜欢`<div><div class="wannaselectthat"></div></div>`将索引设置为零。

# jquery - jquery timepicker now 按钮和当前日期选择

> ID：11863229
> 
> 赞同：0
> 
> 时间：2012-08-08T11:08:31.857
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在我的 web 应用程序上使用 TimePicker 插件：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/) 它工作得很好，除了“现在”按钮的默认行为不是我想要的。

至于普通的 DatePicker，我发现这段代码效果很好：

```
jQuery.datepicker._gotoToday = function ( id )
{
    var target = jQuery( id );
    var inst = this._getInst( target[0] );
    if ( this._get( inst, 'gotoCurrent' ) && inst.currentDay )
    {
        inst.selectedDay = inst.currentDay;
        inst.drawMonth = inst.selectedMonth = inst.currentMonth;
        inst.drawYear = inst.selectedYear = inst.currentYear;
    }
    else
    {
        var date = new Date();
        inst.selectedDay = date.getDate();
        inst.drawMonth = inst.selectedMonth = date.getMonth();
        inst.drawYear = inst.selectedYear = date.getFullYear();
        this._setDateDatepicker( target, date );
        this._selectDate( id, this._getDateDatepicker( target ) );
    }
    this._notifyChange( inst );
    this._adjustDate( target );
}; 
```

不幸的是，TimePicker 不适合。有人可以提供我可以用于 TimePicker 插件的类似代码吗？

# facebook - 我想在 facebook 中更改 URL。

> ID：11863233
> 
> 赞同：-3
> 
> 时间：2012-08-08T11:08:57.663
> 
> 标签：facebook, facebook-page

我想在 facebook 中更改 URL。现在 URL 是[http://www.facebook.com/pages/work/399241663472504](http://www.facebook.com/pages/work/399241663472504) 重定向到[http://www.facebook.com/work/399241663472504](http://www.facebook.com/work/399241663472504)怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:21:30.063

使用 Facebook 功能唯一可以做的就是设置页面的短名称。

为此，请在以页面管理员身份登录时导航到[https://www.facebook.com/username 。](https://www.facebook.com/username)

# xml - 如何在 xml 文件中下载 xml 内容

> ID：11863234
> 
> 赞同：6
> 
> 时间：2012-08-08T11:08:57.990
> 
> 标签：xml, asp.net-mvc-3, c#-4.0

> **可能重复：**
> [如何使用 C# 在 asp.net 中下载 xml 文件](https://stackoverflow.com/questions/11860807/how-to-download-xml-file-in-asp-net-using-c-sharp)

任何人都可以请帮助如何下载 xml（在字符串中）。我正在使用 MVC3

我的代码；

```
 public FileResult Download(string id)
    {  
        var model = service.GetAllDefinitions().First(x => x.ID == id);
        var definitionDetails = new StatisticDefinitionModel(model);
        string xmlString = definitionDetails.ToXml;
     //string presented xml  

        string fileName = definitionDetails.Name + ".xml";

            var stream = new MemoryStream();

            var writer = XmlWriter.Create(stream);
            writer.WriteRaw(xmlString);
            stream.Position = 0;
            var fileStreamResult = File(stream, "application/xml", fileName);
            return fileStreamResult; 

    } 
```

但这不起作用。给出错误

错误：

XML 文档必须具有顶级元素。错误处理资源

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T11:22:20.157

您在这里不需要 xml 流，只需返回字节即可。

```
public FileResult Download(string id)
{  
    var model = service.GetAllDefinitions().First(x => x.ID == id);
    var definitionDetails = new StatisticDefinitionModel(model);
    string xmlString = definitionDetails.ToXml;
    string fileName = definitionDetails.Name + ".xml";

    return File(Encoding.UTF8.GetBytes(xmlString), "application/xml", fileName);
} 
```

# eclipse - JUnit 测试用例在 Eclipse 中通过，但在 Maven 构建中失败

> ID：11863235
> 
> 赞同：3
> 
> 时间：2012-08-08T11:09:00.363
> 
> 标签：eclipse, spring, maven, jpa, testcase

我使用 spring 为 JPA 编写了一个 JUnit 测试用例。测试用例在 eclips 中通过。但是，如果我使用 maven (mvn test) 执行相同的测试用例，它会失败。

我的测试用例是：

```
import javax.annotation.Resource;

import junit.framework.TestCase;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.transaction.annotation.Transactional;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:config/servicecontext-standalone.xml")
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback =      false)
@Transactional
public class UserServiceImplTest extends TestCase {

@Resource(name = "UserService")
private UserService userService;

public UserServiceImplTest() {
}

public UserService getUserService() {
    return userService;
}

public void setUserService(UserService userService) {
    this.userService = userService;
}

@Test
public void testFindUser() {
    try {
        UserFindRequest pUserFindRequest = new UserFindRequest();
        pUserFindRequest.setUserId(1);
        UserServiceImpl aUserServiceImpl = (UserServiceImpl) this
                .getUserService();
        aUserServiceImpl.findUser(pUserFindRequest);
        System.out.println("Success");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Test
public void testCreateUser() {
    try {
        UserServiceImpl aUserServiceImpl = (UserServiceImpl) this
                .getUserService();
        UserPersistRequest pUserPersistRequest = new UserPersistRequest();

        UserDto pUserDto = new UserDto();
        pUserDto.setUserId(6L);
        pUserDto.setName("JUnit 6");
        pUserPersistRequest.setUserDto(pUserDto);

        aUserServiceImpl.createUser(pUserPersistRequest);
        System.out.println("Persist Success");
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

和 servicecontext-standalone.xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:context="http://www.springframework.org/schema/context"    xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
  http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/aop 
  http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
  http://www.springframework.org/schema/context 
  http://www.springframework.org/schema/context/spring-context-2.5.xsd
  http://www.springframework.org/schema/tx 
  http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
  http://www.springframework.org/schema/jee 
  http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">

<!-- Bean Post Processor for all standard config annotations -->
<bean
         class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="JPADB" />
    <property name="persistenceXmlLocation"     value="classpath:config/persistence-standalone.xml" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<context:annotation-config /> 

</beans> 
```

我的 persistence-standalone.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="JPADB" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.mycompany.domain.User</class>
    <properties>
        <property name="hibernate.connection.password" value="user" />
        <property name="hibernate.connection.url" value="jdbc:oracle:thin:@localhost:user" />
        <property name="hibernate.connection.username" value="user" />
        <property name="hibernate.default_schema" value="user" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver" /> 
        <!--<property name="showSql" value="true" />
        <property name="hibernate.hbm2ddl.auto" value="create-update" />
        <property name="hibernate.transaction.flush_before_completion"
            value="true" />
        <property name="hibernate.cache.use_second_level_cache"
            value="false" />
        <property name="connection.autocommit" value="true" />
        <property name="hibernate.transaction.manager_lookup_class"
               value="org.hibernate.transaction.JBossTransactionManagerLookup" /> -->

    </properties>
</persistence-unit>
</persistence> 
```

pom文件是

```
<project xmlns="http://maven.apache.org/POM/4.0.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.test</groupId>
<artifactId>integration-test</artifactId>
<version>0.1</version>
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>main-pom</artifactId>
    <version>1.0</version>
</parent>

<dependencies>
    <dependency>
        <groupId>concurrent</groupId>
        <artifactId>concurrent</artifactId>
        <version>1.3.4</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.0.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-dao</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <scope>runtime</scope>
        <version>3.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <scope>runtime</scope>
        <version>3.3.0.ga</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.3.1.ga</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.0.2.GA</version>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.3.0</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>20040616</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>apache-log4j-extras</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.4</version>
    </dependency>
    <dependency>
        <groupId>javaee</groupId>
        <artifactId>javaee-api</artifactId>
    </dependency>
    <dependency>
        <groupId>org.easymock</groupId>
        <artifactId>easymock</artifactId>
        <version>3.1</version>
    </dependency>
</dependencies>
</project> 
```

如果如果执行`mvn test`它会抛出以下异常

```
-------------------------------------------------------------------------------
Test set: com.mycompany.test.UserServiceImplTest
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.543 sec <<< FAILURE!
testFindUser(com.mycompany.test.UserServiceImplTest)  Time elapsed:     0.354 sec  <<<    ERROR!
java.lang.IllegalStateException: Failed to load ApplicationContext
at    org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
at   org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDep   endencies(DependencyInjectionTestExecutionListener.java:109)
at    org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTe    stInstance(DependencyInjectionTestExecutionListener.java:75)
at    org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.   java:333)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean   with name 'entityManagerFactory' defined in class path resource [config/servicecontext- standalone.xml]: Instantiation of bean failed; nested exception is  org.springframework.beans.BeanInstantiationException: Could not instantiate bean class  [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Constructor threw  exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method  that is not native or abstract in class file javax/persistence/PersistenceException
at  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
at  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
... 30 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Constructor threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/PersistenceException
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
... 44 more
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/PersistenceException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.<init>(LocalContainerEntityManagerFactoryBean.java:87)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
... 46 more
testCreateUser(com.mycompany.test.UserServiceImplTest)  Time elapsed: 0.052 sec  <<< ERROR!
java.lang.IllegalStateException: Failed to load ApplicationContext
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:333)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [config/servicecontext-standalone.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Constructor threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/PersistenceException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
... 30 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Constructor threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/PersistenceException
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
... 44 more
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/PersistenceException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.<init>(LocalContainerEntityManagerFactoryBean.java:87)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
... 46 more 
```

有谁能够帮我。我不知道到底出了什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T05:56:22.337

我已经解决了这个问题。问题主要是因为依赖

```
<dependency> 
    <groupId>javaee</groupId> 
    <artifactId>javaee-api</artifactId> 
    <version>5</version> 
    <scope>provided</scope> 
</dependency> 
```

实际上，EJB 需要这种依赖关系，所以我将它放在我的父 pom 中（以及我的测试用例 pom 中）。由于我的测试用例的 pom 具有父依赖关系，因此默认情况下它将被继承。如果添加此依赖项，则您必须有一个 java EE 容器才能运行该程序。测试用例不需要 Java EE 容器。

如果您的 pom 文件中有此依赖项，请删除此依赖项。

有关更多详细信息，请查看[来自 maven（JPA 相关）的问题运行单元测试。](http://maven.40175.n5.nabble.com/Problem-running-unit-tests-from-maven-JPA-related-td126893.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:56:23.357

看起来您遇到了仅包含空接口的 Java EE API 包的问题。

代替

```
<dependency>
    <groupId>javaee</groupId>
    <artifactId>javaee-api</artifactId>
</dependency> 
```

经过：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.0.Final</version>
    </dependency> 
```

更多细节可以在[这里](http://www.mkyong.com/hibernate/java-lang-classformaterror-absent-code-attribute-in-method-that-is-not-native-or-abstract-in-class-file/)找到。

# java - Hibernate query.uniqueResult() 抛出 NonUniqueResultException，但是记录是唯一的

> ID：11863238
> 
> 赞同：0
> 
> 时间：2012-08-08T11:09:08.803
> 
> 标签：java, hibernate, orm

我有一`Client`门课，它是一对多的，`ClientCurrency`它是一对一的`PaymentRule`。

```
 @Entity(name = "Client")
  public class Client{
    ...
     @OneToMany(mappedBy = "client")
     @Fetch(FetchMode.SELECT)
     @Cascade({CascadeType.ALL})
     public Set<ClientCurrency> getClientCurrencies() {
         return clientCurrencies;
     }
    }

  @Entity(name = "Client_Currency")
  public class ClientCurrency{
    @ManyToOne
    @JoinColumn(name = "client_id")
    public Client getClient() {
        return client;
    }

    @Column(name = "currency", length = 3)
    @Enumerated(EnumType.STRING)
    public Currency getCurrency() {
        return currency;
    }
    } 
```

其中`Currency`- 是带有某些货币的 Enum。现在我正在尝试`ClientCurrency`使用这种方法：

```
 public ClientCurrency get(Client client, Currency currency) {
        StringBuilder hql = new StringBuilder().append("FROM ")
                .append(ClientCurrency.class.getName())
                .append(" WHERE client = :client AND currency = :currency");
        Query query = getSessionFactory().getCurrentSession()
                .createQuery(hql.toString()).setParameter("client", client)
                .setParameter("currency", currency);
        return (ClientCurrency)query.uniqueResult();
    } 
```

我知道该记录在数据库中是唯一的。我试过了`query.list()`，它返回两个重复项。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:18:59.947

我不完全确定您的查询为什么返回重复项，但是您应该可以通过这样编写查询来解决它：（`"SELECT DISTINCT c FROM <CC.class.getName()> c ..."`类似于您在 SQL 中的操作方式）。

# sql - 创建表中缺少右括号

> ID：11863244
> 
> 赞同：0
> 
> 时间：2012-08-08T11:09:25.070
> 
> 标签：sql, oracle, create-table

我搜索了论坛但没有找到正确的答案对不起如果我重复发布我想创建这个表

```
create table HUB_SHIFT_REPORT
(
  Da_te timestamp(8) not null
, Week_Day varchar2(10) not null constraint cnstrnt_day check (Week_Day in('Su','Mo','Tu','We','Th','Fr','Sa'))
, Shift varchar2(10) not null constraint cnstrnt_shift check (Shift in('Morning','Evening','Night'))
, Handled_by varchar2(60) not null constraint cnstrnt_handled check (Handled_by in('Artyom','Natan','Asaph','Yaniv','Fadi','AdiG','AdiF','Paul','Benjamin','Matan','Yosef'))
, Incident_Number number(10) not null PRIMARY KEY
, Centreon_Duration varchar2(10) not null
, Time_received varchar2(10) not null
, Time_restored varchar2(10) not null
, Time_closed varchar2(10) not null
, Product varchar2(60) not null constraint cnstrnt_product check (Product in ('Primo','MetaLib','SFX','bX','Primo Central','USTAT','Alma','Aleph','voayger','Marcit','ARC','Verde','Rosetta','Digitool','MetaLib+','NUUL','Not product related'))
, Service_name varchar2(400) not null
, Data_Center varchar2(10) constraint cnstrnt_dc check (Data_Center in ('DC01','DC02','DC03','DC04','DC05','Amazon','NULL'))
, HOST VARCHAR2(40) 
, GUEST VARCHAR2(40) 
, Alert_Name varchar2(400) not null
, Alert_Status varchar2(40) cnstrnt_status check (Alert_Status in ('CRITICAL','WARNING','UNKNOWN','DOWN','NULL'))
, Affected_Customers varchar2(400) not null
, Is_Escalated varchar2(10) default ('No') cnstrnt_yes check (Is_Escalated in('Yes','No'))
, Escalated_at varchar2(10) default ('NULL') 
, Escalated_to varchar2(100) default ('NULL')
, Open_Action_items varchar2(400) default ('NULL')
, Time_Resolved varchar2(10) default ('NULL')
, Related_alerts varchar2(50) default ('NULL')
, Related_critical_alert_host varchar2(100) default ('NULL')
, Is_Reported varchar2(10) default ('No') cnstrnt_yes check (Is_Reported in('Yes','No'))
, Alert_Accuracy varchar2(10) default ('Real alert') not null cnstrnt_alert check (Alert_Accuracy in ('Real alert','False Positive'))
, SI_number varchar2(10) default ('NULL')
, Customer_Type varchar2(15) default ('Direct') not null cnstrnt_type check (Customer_Type in ('Total Care','Direct','SaaS','Local'))
, Resolved varchar2(20) default ('No') cnstrnt_yes2 check (Resloved in('Yes','No','Cleared Itself'))
, in_ERD varchar2(10) default ('Yes') cnstrnt_yes check (In_ERD in('Yes','No'))
, In_XLS varchar2(10) default ('Yes') cnstrnt_yes check (In_XLS in('Yes','No')) 
, Actions_Taken varchar2(10) default ('No') cnstrnt_yes check (Actions_Taken in('Yes','No'))
, Notes varchar2(800)
, Root_cause varchar2(200) not null
, Can_be_prevented varchar2(10) default ('No') cnstrnt_yes check (Can_be_prevented in('Yes','No'))
, log varchar2(1800)
) 
```

但我明白了

> 命令行错误：14 列：27 错误报告：SQL 错误：ORA-00907：缺少右括号 00907。00000 -“缺少右括号” *原因：
> *操作：

我计算左右括号并在两种情况下都得到 83 有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:17:13.683

改变...
-`, Data_Center varchar2(10) cnstrnt_dc check`

要...
-`, Data_Center varchar2(10) constraint cnstrnt_dc check`

***注意：***您似乎`constraint`在几个地方缺少关键字。

# java - 在分布式系统中应该使用哪些 Appender？如何配置它们？

> ID：11863251
> 
> 赞同：5
> 
> 时间：2012-08-08T11:09:55.790
> 
> 标签：java, logging, log4j, apache-chainsaw

我正在尝试将日志记录组件添加到分布式系统。它是`AspectJ`为了避免链接当前源代码而编写的。我使用 socket appender 来发送日志，但我想尝试一些更有效的方法。

我听说我应该使用`JMSAppender`and `AsyncAppender`，但我没有配置它。我应该创建`Receiver`哪些收集日志并将它们传递给数据库和 GUI（我使用`ChainSaw`）？

我试图关注[turorial1](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)和[tutorial2](http://code.google.com/p/log4j-jms-sample/wiki/ConfigurationGuide)，但它们还不够清楚。

![在此处输入图像描述](../Images/a2f6066b9ae7792d557356186ea90136.png)

**编辑：**

在我准备的一个小型演示中，我为请求发送了 6 个日志（模拟 3 个组件）

```
[2012-08-08 15:40:28,957] [request1344433228957] [Component_A] [start]
[2012-08-08 15:40:32,050] [request1344433228957] [Component_B] [start]
[2012-08-08 15:40:32,113] [request1344433228957] [Component_C] [start]
[2012-08-08 15:40:32,113] [request1344433228957] [Component_C] [end - throwing]
[2012-08-08 15:40:32,144] [request1344433228957] [Component_B] [end]
[2012-08-08 15:40:32,175] [request1344433228957] [Component_A] [end] 
```

使用套接字 Appender。所以我的 log4j.properties 是：

```
log4j.rootLogger=DEBUG, server

log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4712
log4j.appender.server.RemoteHost=localhost
log4j.appender.server.ReconnectionDelay=1000 
```

所以我跑

```
>java -classpath log4j-1.2.17.jar org.apache.log4j.net.SimpleSocketServer 4712 log4j-server.properties 
```

带配置

```
log4j.rootLogger=DEBUG, CA, FA

#
log4j.appender.CA=org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=[%d] [%t] [%c] [%m]%n

#
log4j.appender.FA=org.apache.log4j.FileAppender
log4j.appender.FA.File=report.log
log4j.appender.FA.layout=org.apache.log4j.PatternLayout
log4j.appender.FA.layout.ConversionPattern=[%d] [%t] [%c] [%m]%n 
```

然后我将日志从文件发送到 Chainsaw：

![在此处输入图像描述](../Images/a03d6187fd2f36a0ddbbda359dce6667.png)

这绝对是基本的，但我想学习如何做得更好。首先，我想异步发送日志。然后创建非常简单的接收器，例如可以将日志传递到文件。

我尝试按照上面列出的教程进行操作，但失败了。所以问题是：你能提供一些示例配置吗？`Receiver.java`和`log4.properties`文件的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:23:48.340

我会使用 NFS 或 CDFS 并在所有机器上安装一个驱动器。让每个应用程序实例写入不同的文件。无论您使用多少台机器，您都可以在一个目录（或驱动器）中找到所有日志。

我不会在具有高延迟（例如 > 50 毫秒往返）的全球 WAN 上使用 NFS 或 CDFS。由于这个原因，我使用了 JMS（但我没有使用 log4j）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:54:33.090

我的两分钱.. 无论您做什么，请确保使用异步机制将日志传送到接收器，否则它最终会停止您的应用程序。另外一点，为了可靠地传递日志，您应该考虑在 appender 本身中内置故障转移机制 - 接收器可能会短时间或长时间离线，如果您关心日志，则肯定需要故障转移。我们已经构建了您描述的[类似系统](http://www.logfaces.com)（抱歉添加），但如果您愿意，可以使用我们的附加程序（查看[下载](http://www.moonlit-software.com/logfaces/web/download/index.php)），它是免费的并且有源代码。还有一个视频教程。它具有故障转移和灵活的异步机制以及备份回退。

您应该使用多少个附加程序？每个 jvm 一个 appender 就可以了。配置文件可能应该是每个 jvm，不确定您打算如何实现接收器，无论如何，附加程序需要找到您的接收器，通常至少是主机端口对。关于数据库，我对 RDBMS 的体验非常糟糕（我们正在转向 nosql），但如果你不超过几亿条记录，大多数商业数据库都会付出一些努力。我必须说这不是一个简单的任务，我们花了几年时间来建立你刚刚用几个细长的矩形绘制的商业质量系统 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:27:29.010

最后我找到了如何配置它。我将2个文件放入`src`文件夹。

jndi.properties

```
topic.logTopic=logTopic 
```

和 log4j-jms.properties

```
log4j.rootLogger=INFO, stdout, jms

## Be sure that ActiveMQ messages are not logged to 'jms' appender
log4j.logger.org.apache.activemq=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern= 

## Configure 'jms' appender. You'll also need jndi.properties file in order to make it work
log4j.appender.jms=org.apache.log4j.net.JMSAppender
log4j.appender.jms.InitialContextFactoryName=org.apache.activemq.jndi.ActiveMQInitialContextFactory
log4j.appender.jms.ProviderURL=tcp://localhost:61616
log4j.appender.jms.TopicBindingName=logTopic
log4j.appender.jms.TopicConnectionFactoryBindingName=ConnectionFactory 
```

然后我用 VM 参数运行我的程序

```
-Dlog4j.configuration=log4j-jms.properties 
```

并在课堂上接收日志`Receiver.java`

```
public class Receiver implements MessageListener {

    PrintWriter pw = new PrintWriter("result.log");
    Connection conn;
    Session sess;
    MessageConsumer consumer;

    public Receiver() throws Exception {

        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory("tcp://localhost:61616");
        Connection conn = factory.createConnection();
        Session sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        conn.start();
        MessageConsumer consumer = sess.createConsumer(sess.createTopic("logTopic"));
        consumer.setMessageListener(this);
    }

    public static void main(String[] args) throws Exception {
        new Receiver();

    }

    public void onMessage(Message message) {
        try {
            LoggingEvent event = (LoggingEvent) ((ActiveMQObjectMessage) message).getObject();

            DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss,SSS"); 
            String nowAsString = df.format(new Date(event.getTimeStamp())); 

            pw.println("["+ nowAsString + "]" + 
                    " [" + event.getThreadName()+"]" +
                    " ["+ event.getLoggerName() + "]" +
                    " ["+ event.getMessage()+"]");
            pw.flush();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T20:35:13.230

我推荐 syslog 和内置的 syslog appender。使用 TCP 进行可靠的日志记录（可能是 +Asyc 附加程序）或使用 UDP 进行即发即弃的日志记录。如果您需要，我有一个 rsyslog 配置。

# objective-c - 无法在视图控制器之间传递数据

> ID：11863252
> 
> 赞同：0
> 
> 时间：2012-08-08T11:09:58.270
> 
> 标签：objective-c, ios

> **可能的重复：**
> [在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

我有时使用在视图控制器之间传递数据没有问题，但这次不会。请帮忙

我的 FirstViewController.m

```
#import "SecondViewController.h"

- (IBAction)passBtn:(id)sender
{
    SecondViewController *second =[[SecondViewController alloc] initWithNibName:nil bundle:nil];
    second.stringData = dataString.text;
    second.stringNumber = numberString.text;
    second.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:second animated:YES];
} 
```

我的 SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

@property(nonatomic, retain) NSString *stringData;
@property(nonatomic, retain) NSString *stringNumber;

@end 
```

我得到这个错误，指向我的 FirstViewController.m 行 second.stringData 和 second.stringNumber

```
Property 'stringData' not found on object of type 'SecondViewController *'
Property 'stringNumber' not found on object of type 'SecondViewController *' 
```

我也有使用其他方法，但错误是一样的，总是说在类型的对象上找不到。但是，如果我在我的 stringData 或 stringNumber 中单击 Command+click，它真的会将我带到我的 SecondViewController.h 并指向我的 stringData 或 stringNumber。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:14:34.163

请验证在您的第二个视图控制器实现文件中，您正在为接口中声明的两个属性使用@sythesize。

这似乎是导致问题的原因。

# cocos2d-iphone - 使用 BOX2D 随机移动 Sprite Body

> ID：11863255
> 
> 赞同：0
> 
> 时间：2012-08-08T11:10:00.750
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在使用基于瓷砖地图 + cocos2d + box2d 的游戏，我有一个问题，即如何在瓷砖地图中随机移动敌人的身体？

请知道的人告诉我..

谢谢

# java - 比较两个带有通配符的 XML 文件

> ID：11863259
> 
> 赞同：0
> 
> 时间：2012-08-08T11:10:09.193
> 
> 标签：java, xml

我需要比较两个带有通配符的 XML 文件。我已经查看了 XMLUnit api（当谷歌搜索比较结果时最建议使用它）但似乎它不支持我正在寻找的内容。

准确地说，我正在寻找以下内容：

我有一个 XML 像

```
<x>72</x>
<y>67</y> 
```

这应该与以下两个列表相匹配

```
<x>72</x>
<y>67</y> 
```

也

```
<x>*</x>
<y>67</y> 
```

注意第二个清单，它包含一个通配符，这意味着它应该忽略内容并只匹配结构。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:46:35.463

XMLUnit 允许您控制每个*检测到*的差异（即，当它比较`*`和时`72`）并自行决定差异是否显着。在您的情况下，您将查看两个值，看到一个是`*`，并告诉 XMLUnit 差异不显着。

为此，您将实现一个自定义侦听器并将该侦听器设置为差异对象。一旦在 xml 节点值之间发现一些差异，就会调用此侦听器，您可以在那里找出不匹配的两个值并在那里采取规避措施。

# sockets - 在 UDP 套接字中使用标志 MSG_TRUNC 、 MSG_CTRUNC

> ID：11863264
> 
> 赞同：0
> 
> 时间：2012-08-08T11:10:26.507
> 
> 标签：sockets, udp, flags

我想要一个在 C 中使用标志 MSG_TRUNC ， MSG_CTRUNC 在 UDP 套接字中的完整示例以及对这些标志的一些解释

```
recvmsg(udpSocket, &msg, flags);
if (msg.msg_flags & MSG_TRUNC)
printf("MSG_TRUNC\n"); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:32:01.360

`MSG_TRUNC`表示为接收提供的缓冲区空间不足，导致部分数据包数据丢失。当您想要发现有多少数据被截断时使用此标志。该`recvmsg`函数将为结构设置此标志（`msg_flags`）`msghdr`（用于发送UDP数据包）

```
struct msghdr {
       void                  *msg_name;
       int                   msg_namelen;
       struct iovec          *msg_iov;
       __kernel_size_t       msg_iovlen;
       void                  *msg_control;
       __kernel_size_t       msg_controllen;
       unsigned              msg_flags;
}; 
```

您需要将此结构添加到您的代码中：

```
struct msghdr msg;
struct iovec iov; 
```

还有一个你的接收缓冲区：

```
char buffer[BUFFER_SIZE]; 
```

初始化所有这些东西：

```
iov.iov_base = buffer;
iov.iov_len = sizeof(buffer);

msg.msg_iov = iov; 
```

设置了缓冲区的最大大小并设置了标志 MSG_TRUNC，当您调用时：

```
recvmsg(udpSocket, &msg, flags); 
```

结构标头将在此调用后填充，您可以检查您收到的缓冲区是否被截断：

```
if (msg.msg_flags & MSG_TRUNC)
printf("MSG_TRUNC\n"); 
```

**编辑：使用 recvfrom**

这是一个关于如何使用带有标志的 recvfrom 的示例：

```
char *buffer[BUFFER_MAX_SIZE]; 
struct sockaddr from;
socklen_t from_len;
int available_data;
int socket;

socket = socket(AF_INET, SOCK_DGRAM, 0);

available_data = recvfrom(socket, (char*)buffer,0, MSG_TRUNC, &from, &fromlen);
if(available_data > 0)
{
    if (available_data > BUFFER_MAX_SIZE) 
    {
        fprintf(stderr, "UDP Packet is bigger than expected\n"); 

        exit(EXIT_FAILURE);
    }

    else 
    { 
        /* Process receiving data */ 
    }
}
else
{
    /* Handle error */
} 
```

# java - Java 按需构建系统

> ID：11863268
> 
> 赞同：1
> 
> 时间：2012-08-08T11:10:34.540
> 
> 标签：java, build, ondemand

我有一个模糊的记忆，我见过一个 Java 或其他 JVM 语言的构建系统，你可以在连续模式下运行（可以这么说）。这将使构建系统在后台运行，观察源目录的变化。一旦源文件发生更改，构建系统就会启动并重新运行构建过程的相关部分以生成新的工件。

敲响任何铃铛？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:18:42.133

是[gradle 守护进程](http://gradle.org/docs/current/userguide/gradle_daemon.html)吗？

这使 gradle 在后台运行，因为它的启动时间很长 - 并扫描文件系统以识别文件何时更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:24:13.723

有*很多*引擎支持持续检查/构建/测试（例如 Jenkins *nee* Hudson、CruiseControl、TeamCity 等）。

如果您正在查看 Java 以外的 JVM 语言，那么（例如）Maven Scala 插件支持在文件更改时[持续构建](http://scala-tools.org/mvnsites/maven-scala-plugin/example_cc.html)和[测试。](http://scala-tools.org/mvnsites/maven-scala-plugin/example_cctest.html)例如

```
$ mvn scala:cctest 
```

将在循环中运行编译/测试循环，观察源代码更改并对其进行操作。

如果您的构建工具或语言本身不支持这一点，那么编写一个 shell 脚本来观察目录结构并在更改时执行另一个脚本/工具是很简单的。请参阅[此 SO question](https://stackoverflow.com/questions/6475252/bash-script-watch-folder-execute-command)以获取解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:50:16.977

我发现我的意思实际上是[sbt](https://github.com/harrah/xsbt/wiki/Java-Sources)。这里还有一个关于如何构建 Java 项目的问题：[使用 SBT 构建纯 Java 项目](https://stackoverflow.com/questions/8296280/use-sbt-to-build-pure-java-project)。感谢大家的帮助。

# c# - Avalonedit 如何获得顶部可见线

> ID：11863273
> 
> 赞同：3
> 
> 时间：2012-08-08T11:10:43.713
> 
> 标签：c#, .net, wpf, avalonedit

在 Avalonedit 中，如何获取用户可见的最上面一行的行号？

我相信我应该使用 VisualLines，但它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T22:03:09.643

您可以使用`GetDocumentLineByVisualTop`：

```
int firstLine = textView.GetDocumentLineByVisualTop(textView.ScrollOffset.Y).LineNumber; 
```

`textView.VisualLines[0].FirstDocumentLine.LineNumber`也可以，但你必须小心 - 如果请求重绘但尚未执行，则视线集合可能无效（请参阅`VisualLinesValid`/ `EnsureVisualLines()`）。

# xml - XSLT Xpath 查询

> ID：11863274
> 
> 赞同：1
> 
> 时间：2012-08-08T11:10:46.087
> 
> 标签：xml, xslt, xpath

我有以下 XML：

```
<response>
  <propertySearchSales>                                                                           
     <properties rentalperiod="0"><pages page="1" count="153" pageCount="16" perPage="10">
        <pages page="1" count="153" pageCount="16" perPage="10">
          <page number="1" selected="true"/> 
```

我正在尝试使用以下 xslt 代码访问页码属性值：

```
<xsl:if test="//response//propertySearchSales//properties/pages/@number>1"> 
```

但它不起作用，我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:23:43.600

> 我正在尝试使用以下 xslt 代码访问页码属性值：
> 
> ```
> <xsl:if test="//response//propertySearchSales//properties/pages/@number>1"> 
> ```

**一条`xsl:if`指令不会“访问”任何节点**——它确定一个条件是`true()`或`false()`

***选择*满足条件的节点的 Xpath 表达式在*predicate*中具有条件。**

因此，上面的 XPath 表达式需要修改成这样：

```
(ExpressionSelectingNodes)[//response//propertySearchSales//properties/pages/@number>1] 
```

**正如其他人所注意到的，`pages`所提供的 XML 文档中的元素没有任何`number`属性**。

因此，您很可能需要这样的表达式：

```
(ExpressionSelectingNodes)[//response//propertySearchSales//properties/pages/page/@number>1] 
```

**如果您需要选择 any `page`，其`number`属性的字符串值（被视为数字）大于数字 1，请使用**：

```
//response//propertySearchSales//properties/pages/page/[@number>1] 
```

**最后，基于提供的 XML 文档，上述表达式可以优化为：**

```
/response/propertySearchSales/properties/pages/page/[@number>1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:27:30.477

试试这个

```
/response/propertySearchSales/properties/pages/page[@number>1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:32:07.903

如果您的示例 XML 是正确的，那么您的 XPath 是错误的，因为`pages`有一个`pages`.

对于您提供的 XML，这应该可以工作：

```
<xsl:if test="//response/propertySearchSales/properties/pages/pages/page[@number>1]"> 
```

如果附加`pages`元素是错误的，请尝试以下操作：

```
<xsl:if test="//response/propertySearchSales/properties/pages/page[@number>1]"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T03:51:31.053

简单的方法是

```
<xsl:if test="//page[@number>1]"> 
```

# macos - CTRunDraw() 确实实现了正确的行为

> ID：11863276
> 
> 赞同：0
> 
> 时间：2012-08-08T11:10:54.550
> 
> 标签：macos, core-text, cgcontextref

我正在使用 CoreText 在 MAC OS X 上实现自定义文本布局算法。我必须在自定义 NSView 子类对象内的不同位置部分呈现 CTRun 的一部分。

这是我对drawRect的实现：方法

```
- (void)drawRect:(NSRect)dirtyRect {
// Drawing code here.
CGContextRef context =
(CGContextRef)[[NSGraphicsContext currentContext] graphicsPort];
CGContextSaveGState(context); {
    [[NSColor whiteColor] set];
    NSRectFill(dirtyRect);

    CTFontRef font = CTFontCreateWithName(CFSTR("Menlo"), 20, &CGAffineTransformIdentity);

    CFTypeRef values[] = {font};
    CFStringRef keys[] = {kCTFontAttributeName};

    CFDictionaryRef dictionary =
    CFDictionaryCreate(NULL,
                       (const void **)&keys,
                       (const void **)&values,
                       sizeof(keys) / sizeof(keys[0]),
                       &kCFTypeDictionaryKeyCallBacks,
                       &kCFTypeDictionaryValueCallBacks);

    CFAttributedStringRef longString =
    CFAttributedStringCreate(kCFAllocatorDefault, CFSTR("this_is_a_very_long_string_that_compromises_many_glyphs,we_wil_see_it:)"), dictionary);
    CTLineRef lineRef = CTLineCreateWithAttributedString(longString);

    CFArrayRef runsArray = CTLineGetGlyphRuns(lineRef);
    CTRunRef run = (CTRunRef)CFArrayGetValueAtIndex(runsArray, 0);

    CGAffineTransform textTransform = CGAffineTransformIdentity;
    textTransform = CGAffineTransformScale(textTransform, 1.0, -1.0);
    CGContextSetTextMatrix(context, textTransform);

    CGAffineTransform sequenceTransform =
    CGAffineTransformIdentity;
    sequenceTransform = CGAffineTransformTranslate(sequenceTransform, 0, 23.2818);

    CGPoint firstPoint = CGPointApplyAffineTransform(CGPointMake(0, 0), sequenceTransform);
    CFRange firstRange = CFRangeMake(0, 24);
    CGContextSetTextPosition(context, firstPoint.x, firstPoint.y);
    CTRunDraw(run, context, firstRange);

    CGPoint secondPoint = CGPointApplyAffineTransform(CGPointMake(0, 26.2812), sequenceTransform);
    CFRange secondRange = CFRangeMake(24, 24);
    CGContextSetTextPosition(context, secondPoint.x, secondPoint.y);
    CTRunDraw(run, context, secondRange);

    CGPoint thirdPoint = CGPointApplyAffineTransform(CGPointMake(0, 52.5625), sequenceTransform);
    CFRange thirdRange = CFRangeMake(48, 23);
    CGContextSetTextPosition(context, thirdPoint.x, thirdPoint.y);
    CTRunDraw(run, context, thirdRange);

}
CGContextRestoreGState(context); 
```

}

这是此代码的输出 [https://docs.google.com/open?id=0B8df1OdxKw4FYkE5Z1d1VUZQYWs](https://docs.google.com/open?id=0B8df1OdxKw4FYkE5Z1d1VUZQYWs)

问题是 CTRunDraw() 方法在指定范围以外的位置插入空格。

我想要的是它应该将运行的部分渲染在正确的位置。这是我想要的正确输出。（正确的输出是原始输出的photoshop）。 [https://docs.google.com/open?id=0B8df1OdxKw4FcFRnS0p1cFBfa28](https://docs.google.com/open?id=0B8df1OdxKw4FcFRnS0p1cFBfa28)

注意：我在自定义 NSView 子类中使用翻转坐标系。

```
- (BOOL)isFlipped {
return YES; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:08:13.620

你在`CTRun`这里误用了。A`CTRun`是一个包含布局字形的水平框。尝试将它的一部分绘制在另一个下面是没有意义的（在任何稍微复杂的情况下，这种排版肯定是错误的）。为什么？好吧，因为在某些情况下，如果给定位置有换行符，则选择的字形可能会有所不同（例如，连字可能会发生这种情况）。另外，请注意，字符和字形之间不一定存在 1:1 映射。

我的猜测是，您可能不需要自己的完整自定义排版机（相信我，写一个很*复杂*，所以如果您不需要，就不要写一个）。相反，只需使用`CTTypesetter`和/或`CTFramesetter`获取您想要的输出。

# jquery - 显示/隐藏菜单在 IE7 中不起作用

> ID：11863284
> 
> 赞同：1
> 
> 时间：2012-08-08T11:11:26.977
> 
> 标签：jquery, html, css

我用 jQuery 创建了下拉菜单。除了 IE7，一切都很好。根本不工作。它只会使最后一个链接加粗。我不确定如何调试它。

我创造了[这个小提琴。](http://jsfiddle.net/EMnw3/1/)

有没有人有办法解决吗？

这是不起作用的JS：

```
 $(".link-dropdown").on({
        click: function(){
            var $this = $(this);

            if ($this.parent().next().is(":visible")){
                $('.opening-holder').hide();
                $('.link-dropdown').css({
                    'fontFamily': 'Geogrotesque-Regular, Arial, sans-serif'
                });
            } else {
                $('.opening-holder').hide();
                $('.link-dropdown').css({
                    'fontFamily': 'Geogrotesque-Regular, Arial, sans-serif'
                });

                $this.css({
                    'fontFamily': 'Geogrotesque-SemiBold, Arial, sans-serif'
                });

                $this.parent().next().show();
                $this.parent().next().children().show();
            }

            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:12:12.860

[我为解决方案http://jsfiddle.net/EMnw3/27/](http://jsfiddle.net/EMnw3/27/)创建了小提琴， 如果可见，我禁用它并且它可以工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:21:54.397

这与您使用过的事实有关`:visible`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:31:23.407

试试这个：

我刚刚对 jQuery 脚本进行了更改，它的工作方式如下：

```
$(function(){
    $(".link-dropdown").on({
        click: function(){
            var $this = $(this);

            if ($this.css("dispaly") == "block;"){
                $('.opening-holder').hide();
                $('.link-dropdown').css({
                    'fontFamily': 'Geogrotesque-Regular, Arial, sans-serif'
                });
            } else {
                $('.opening-holder').hide();
                $('.link-dropdown').css({
                    'fontFamily': 'Geogrotesque-Regular, Arial, sans-serif'
                });

                $this.css({
                    'fontFamily': 'Geogrotesque-SemiBold, Arial, sans-serif'
                });

                $this.parent().show();
                $this.parent().children().show();
            }

            return false;
        }
    });
}); 
```

# javascript - 为什么这个方法不能在另一个方法中工作？

> ID：11863286
> 
> 赞同：1
> 
> 时间：2012-08-08T11:11:39.103
> 
> 标签：javascript, jquery, selector

我有这个 HTML 表：

```
<table id="languages" border="0" cellspacing="1">
  <thead>
    <tr>
      <th>Language</th>
      <th>Type</th>
      <th>Invented</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java</td>
      <td>Static</td>
      <td>1995</td>
    </tr>
    <tr>
      <td>Ruby</td>
      <td>Dynamic</td>
      <td>1993</td>
    </tr>
    <tr>
      <td>Smalltalk</td>
      <td>Dynamic</td>
      <td>1972</td>
    </tr>
    <tr>
      <td>C++</td>
      <td>Static</td>
      <td>1983</td>
    </tr>
  </tbody>
</table> 
```

当我运行这个 JavaScript 时：

```
alert($('td').index($('td:contains(C++)'))) 
```

我收到一个弹出消息`9`，这是我所期望的。

当我运行这个:`alert($('td:eq(9)').text())`时，弹出窗口说`C++`，再次与预期相同。但是，如果我尝试将第一个功能/选择而不是硬编码`9`放在第二个选择器中，就像这样......

```
alert($('td:eq($('td').index($('td:contains(C++)')))').text())
// just replacing the hard coded 9 with the first selector, as it gives a value of 9 
```

...没发生什么事。我没有收到任何弹出消息`C++`，这是人们所期望的，我没有收到任何弹出消息。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:17:33.263

问题是您没有转义内部选择器中的单引号，因此您在该点有效地退出了字符串，这会引发错误。改变这个：

```
alert($('td:eq($('td').index($('td:contains(C++)')))').text()) 
```

对此：

```
alert($('td:eq(' + $('td').index($('td:contains(C++)')) + ')').text()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:18:19.420

以下应该工作：

```
alert($('td:eq('+$('td').index($('td:contains(C++)'))+')').text()) 
```

# deployment - 使用 weblogic 10.3 在 liferay 上部署 portlet

> ID：11863292
> 
> 赞同：1
> 
> 时间：2012-08-08T11:11:52.870
> 
> 标签：deployment, portlet, weblogic-10.x, liferay-6

目前我已经将liferay 6.1设置为weblogic server 10.3.5。现在我可以使用来自 weblogic 服务器的 liferay 门户。之后，我尝试将另一个示例 portlet 部署到 weblogic 服务器上的 liferay。我想知道如何部署该示例 portlet？

另一个问题是我想开发使用 JSF 2.0 的视图和 EJB 3.0 的业务层的 portlet 应用程序。我可以使用 weblogic 服务器在 liferay 上部署该 portlet 应用程序吗？那可能吗。如果可能，请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:37:22.097

请记住，Weblogic 仅支持管理服务器的热部署。Liferay 在 weblogic 上进行热部署需要 2 个导入设置。您需要 weblogic dest dir 的设置和指向 Weblogic 域的根文件夹的 liferay home 设置。env.DOMAIN_HOME 在 WLS 10.3.6 中不起作用，这就是您需要使用完整路径设置主位置的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:14:37.943

通常 Liferay 有一个“部署”文件夹，用于监控 .war 文件。您只需将 portlet .war 文件复制到该文件夹​​，Liferay 就会部署它。您可以通过在 portal-ext.properties 中配置“auto.deploy.dest.dir”设置来更改该文件夹的位置。

根据[文档](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/auto-deploy)，默认情况下在 WebLogic 上它具有以下值： auto.deploy.weblogic.dest.dir=${env.DOMAIN_HOME}/autodeploy

[文档的另一部分](http://www.liferay.com/community/wiki/-/wiki/Main/Hot+Deploy+Troubleshooting#section-Hot+Deploy+Troubleshooting-The+Container+Upon+Which+Liferay+Is+Running)还提到，在某些容器上，portlet 热部署可能不起作用或有问题。但我认为这与 WebLogic 无关。

# java - Shiro：处理注释抛出的异常

> ID：11863295
> 
> 赞同：8
> 
> 时间：2012-08-08T11:12:00.803
> 
> 标签：java, spring, spring-mvc, shiro

我正在使用 Shiro 注释来检查授权，如下所示：

```
@RequiresPermissions("addresses:list")
    public ModelAndView getCarrierListPage() {
        return new ModelAndView("addressList", "viewData", viewData);
    } 
```

我的问题是：如果用户没有注释要求的权限，则会引发异常。如果出现异常，我宁愿将用户重定向到不同的 URL。我怎么做？

这是我的 shiro 过滤器配置：

```
<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name="securityManager" ref="securityManager"/>
    <property name="loginUrl" value="/showLoginPage"/>
    <property name="filterChainDefinitions">
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:40:00.117

看起来你正在使用 Spring。我在 SpringMVC 中通过在控制器中提供一个 ExceptionHandler 来处理这个问题。

```
 @ExceptionHandler(TheSpecificException.class)
    protected ModelAndView handleSpecificException(ApplicationException e, HttpServletRequest request)
    {
       // code to handle view/redirect here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:07:46.947

如果没有 Spring MVC，你也可以使用 ExceptionMapper：

```
@Provider
@Component
public class GenericExceptionMapper implements ExceptionMapper<ShiroException> {

    @Override
    public Response toResponse(final ShiroException ex) {
        return Response.status(ex instanceof UnauthenticatedException ? Response.Status.UNAUTHORIZED : Response.Status.FORBIDDEN)
                .entity(ex.getMessage())
                .type(MediaType.TEXT_PLAIN_TYPE)
                .build();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:40:29.107

在 spring-servlet.xml 中添加配置：

```
<beans:bean
    class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <beans:property name="exceptionMappings">
        <beans:props>
            <beans:prop key="org.apache.shiro.authz.UnauthorizedException">/403</beans:prop>
            <beans:prop key="org.apache.shiro.authz.AuthorizationException">/login</beans:prop>
        </beans:props>
    </beans:property>
</beans:bean> 
```

# jquery - 根据使用 jQuery mobile 的浏览器生成不同的“后退”按钮

> ID：11863297
> 
> 赞同：0
> 
> 时间：2012-08-08T11:12:01.550
> 
> 标签：jquery, google-chrome, blackberry, jquery-mobile

使用 jQuery mobile 的 chrome 和 blackberry 上的后退按钮显示不同。这只是浏览器实现这些按钮的方式，还是可以更改它以使其在所有浏览器（移动设备或非移动设备）中看起来都相同？

镀铬后退按钮：

![在此处输入图像描述](../Images/9dd2beba26c3bc50a507fa7e56a58872.png)

黑莓返回按钮：

![在此处输入图像描述](../Images/da29bc07272d9efa596f980917296966.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:26:02.677

对我来说，问题实际上是我没有托管 jquery 移动图像。所以他们没有被发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:58:50.077

您可以完全控制按钮： http: [//jquerymobile.com/test/docs/buttons/buttons-themes.html](http://jquerymobile.com/test/docs/buttons/buttons-themes.html) 但是，您可以看到创建的 assest/css 是相似的。所以我猜是 webkit 的实现在设备之间有点不同。

它类似于这个问题：[Why jquery ui button looks different in Firefox and Chrome](https://stackoverflow.com/questions/10121131/why-jquery-ui-button-looks-different-in-firefox-and-chrome)

# .net - Entity Framework 4.3.1 迁移始终调用默认构造函数并忽略连接字符串

> ID：11863301
> 
> 赞同：4
> 
> 时间：2012-08-08T11:12:35.823
> 
> 标签：.net, entity-framework, database-migration

我想使用我自己构建的 connectionString 执行（代码优先）迁移。

入口点是一个带有一个参数的静态函数，connectionString。

我有一个名为 PocModel 的 DbContext 类，它有两个默认构造函数。

```
public PocModel() : base("PocModel")
{ ... 
```

以及带有字符串参数的上下文构造函数：

```
public PocModel(string nameOrConnectionString): base(nameOrConnectionString)
{ ... 
```

我的目标是在连接字符串所针对的数据库上执行迁移，而不是 EF 仅通过名称“神奇地”创建的连接字符串（localhost\sqlexpress - PocModel）。

这是我无法做到的。

我有一个像这样声明的“外部”函数：

```
public static void MigrateDatabase(string connectionString)
{ ... 
```

我试图在 flw 中实现这个功能。方法：

```
 DbMigrator migrator = new DbMigrator(new Migrations.Configuration());
 migrator.Configuration.TargetDatabase = new  DbConnectionInfo(connectionString, "System.Data.SqlClient");
 migrator.Update(); 
```

像这样：

```
Database.DefaultConnectionFactory = new SqlConnectionFactory(connectionString);
 Database.SetInitializer<PocModel>(new MigrationInitializer());
 PocModel model = new PocModel(connectionString);
 model.Dispose(); 
```

我什至尝试动态设置

```
ConfigurationManager.ConnectionString["PocModel"] 
```

到传入的connectionString。

但是很遗憾，一切都失败了，并且从 EF 迁移代码中调用了默认的 PocModel 构造函数，目标是 server:localhost\sqlexpress 和 database:PocModel。

我无法迁移到驻留在“localhost\sqlexpress”上的任何未命名为“PocModel”的数据库。

我不能选择使用 app.config 文件来设置我的 connectionString，因为我需要通过静态外部函数将其传入。

请帮助，现在被这个问题困扰了很长时间。

编辑：我已经通过这个 hack 让它工作了，但我问这个问题是为了验证确实没有其他解决方案（也就是 EF 迁移有问题）

```
 private static string _databaseNameOrConnectionString = "PocModel";

        internal static string DatabaseNameOrConnectionString
        {
            get { return _databaseNameOrConnectionString; }
            //HACK: This setter must ONLY be called from SetupModule.MigrateDatabase. It is a hack to circumvent the code-first migrations usage of this ctor.
            set { _databaseNameOrConnectionString = value; }
        }

        //the code first migrations will call this ctor and ignore the connectionString it have been passed.
        public PocModel()
            : base(DatabaseNameOrConnectionString)
        { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:44:53.230

Update-database 调用使用默认构造函数，因此您必须修改该函数。您提到您有一个静态类来执行此操作，如果没有静态助手，我无法找到一种方法来完成这项工作。

```
 public static class Helper
    {
        public static string GetConnectionString()
        {
            SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();
            builder.DataSource = @".\sqlexpress";
            builder.InitialCatalog = "migrateme";
            builder.IntegratedSecurity = true;
            builder.MultipleActiveResultSets = true;
            return builder.ConnectionString;
        }
    } 
```

然后我没有调用基本构造函数，而是使用自定义字符串调用构造函数，它创建了正确的数据库

```
public PocModel() : base(Helper.GetConnectionString())
{ 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:39:32.913

我和你有同样的问题。但是，我找到了一个解决方案，您说您尝试过但没有奏效。以下代码确实对我有用。我在这里找到它[http://romiller.com/2012/02/09/running-scripting-migrations-from-code/](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/)

```
var configuration = new Configuration();
configuration.TargetDatabase = new DbConnectionInfo("Server=MyServer;Database=MyDatabase;Trusted_Connection=True;", 
    "System.Data.SqlClient");
var migrator = new DbMigrator(configuration);
migrator.Update(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T12:24:09.290

对于那些发现他们的连接字符串被忽略的人......

框架的这一部分似乎存在错误

```
var configuration = new TMigrationsConfiguration();
configuration.TargetDatabase = new DbConnectionInfo(context.Database.Connection.ConnectionString,"System.Data.SqlClient");
var migrator = new DbMigrator(configuration);
migrator.Update(); 
```

行为不一样

```
var configuration = new TMigrationsConfiguration();
var migrator = new DbMigrator(configuration);
migrator.Configuration.TargetDatabase = new DbConnectionInfo(context.Database.Connection.ConnectionString,"System.Data.SqlClient");
migrator.Update(); 
```

也就是说 - 如果在创建迁移器后更改了目标数据库，则会忽略目标数据库。您**必须**在添加到迁移器之前设置 TargetDatabase。

# git - 格瑞特没用。我仍然可以绕过审稿人

> ID：11863302
> 
> 赞同：1
> 
> 时间：2012-08-08T11:12:38.910
> 
> 标签：git, apache, git-push, gerrit

当我使用`git push origin HEAD:refs/for/branch_name`时，它可以正常工作。但我用`git push origin HEAD:branch_name`的是，它可以绕过审阅者，直接将代码推送到服务器。有点奇怪！应显示：*[gerrit](https://code.google.com/p/gerrit/)**禁止*。其他人可以帮助我吗？

我的 Apache2 *httpd.conf*如下所示

```
<VirtualHost *>  
  ServerName localhost 
  ProxyRequests Off  
  ProxyVia Off  
  ProxyPreserveHost On  

  <Proxy *>  
        Order deny,allow  
        Allow from all  
  </Proxy>  

  <Location /login/>  
     AuthType Basic  
     AuthName "Gerrit Code Review"  
     AuthBasicProvider file  
     AuthUserFile /home/kk/gerrit/server/etc/passwords  
     Require valid-user  
  </Location>  

  ProxyPass / http://10.10.68.224:9091/
  ProxyPassReverse / http://10.10.68.224:9091/
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:13:15.127

gerrit[文档](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/user-upload.html#bypass_review)描述了项目所有者如何绕过审查过程。可以限制此权限，请参阅[访问控制部分](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/access-control.html)中的推送类别。

# shell - 使用 bash 对文件夹进行排序

> ID：11863303
> 
> 赞同：1
> 
> 时间：2012-08-08T11:12:44.280
> 
> 标签：shell, unix

我的根文件夹结构是这样的：

```
我的家人 - 假期
我的生日[15.11]
姓名-姓名[1]
名称1
名称2
...

```

现在，我希望每个包含文件的`.info`文件夹都移动到另一个目录。

这是我的代码：

```
#!/bin/sh

for folder in *
do
    echo $folder
    if [ -e "$folder/*.info" ]
    then
            echo $folder
            mv  $folder ./Finished
    fi
done 
```

回声仅用于测试。我发现每次一个非转义字符的名字`if`都是失败的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:25:03.537

Bash 希望你引用你的变量。

```
#!/bin/bash

if [[ "$1" = "-v" ]]; then
    Verbose=true
    vopt="-v"
    shift
else
    Verbose=false
    vopt=""
fi

for folder in *; do
    $Verbose && printf "%s" "$folder"
    if [[ -e "$folder/*.info" ]]; then
            if mv "$vopt" "$folder" ./Finished/; then
                $Verbose && echo -n " ... done"
            fi
    fi
    $Verbose && echo ""
done 
```

请注意，最好用斜杠结束目标目录。这样，如果由于某种原因`Finished`目录消失了，您将得到一个错误，而不是默默地将第一个 $folder 重命名为 Finished，然后将所有其他匹配项移动到第一个匹配项中。

另请注意，我正在使用`printf`一些调试输出，以防万一您`$folder`的 s 以连字符开头。

**更新 #1**：您现在可以使用该`-v`选项控制调试。

**更新#2**：我刚刚意识到你正在检查 的存在`*.info`，从字面上看。笔记：

```
ghoti@pc ~$ mkdir foo
ghoti@pc ~$ touch foo/\*.info
ghoti@pc ~$ ls -la foo
total 0
-rw-r--r--   1 ghoti  ghoti    0  8 Aug 07:45 *.info
drwxr-xr-x   3 ghoti  ghoti  102  8 Aug 07:45 .
drwx------+ 10 ghoti  ghoti  340  8 Aug 07:44 ..
ghoti@pc ~$ [[ -e "foo/*.info" ]] && echo yes
yes
ghoti@pc ~$ mv foo/\*.info foo/bar.info
ghoti@pc ~$ [[ -e "foo/*.info" ]] && echo yes
ghoti@pc ~$ 
```

如果您真正想要找到的是“任何以 .info 结尾的文件”，那么`[[ -e`这不是要走的路。在我对这个答案进行更多工作之前，请确认。:)

**更新#3**：

如果文件夹包含任何 .info 文件，这是一个找到移动文件夹的版本。请注意，这不会*grep*的输出`ls`。

```
[ghoti@pc ~/tmp1]$ cat doit 
#!/bin/bash

if [[ "$1" = "-v" ]]; then
    Verbose=true
    vopt="-v"
    shift
else
    Verbose=false
    vopt=""
fi

for folder in *; do

    infofile="$(
        if [[ -d "$folder" ]]; then
            cd "$folder"
            for file in *.info; do
              if [[ -f "$file" ]]; then
                  echo "$file"
                  break
              fi
            done
        fi
    )"

    if [[ -f "$folder/$infofile" ]]; then
        mv "$vopt" "$folder" ./Finished/
    elif $Verbose; then
        printf "%s ... skipped\n" "$folder"
    fi

done
[ghoti@pc ~/tmp1]$ find . -print
.
./doit
./baz
./foo
./foo/bar.info
./Finished
[ghoti@pc ~/tmp1]$ ./doit -v
Finished ... skipped
baz ... skipped
doit ... skipped
foo -> ./Finished/foo
[ghoti@pc ~/tmp1]$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T16:15:00.147

主要问题是您不能使用`test -e *.info`. 您可以解析 ls 的输出以检查文件。解析 ls 存在一些问题，但它们远没有许多人想象的那么重要。如果您不允许在文件名中使用换行符，则应使用以下方法：

```
#!/bin/sh

for dir in *; do
    if ls -f "$dir" | grep -q '\.info$'; then
        mv "$dir" ./Finished
    fi
done 
```

请注意，文件名必须没有嵌入的换行符，因为这将错误地识别一个名为的文件`foo.info\nbar`，就好像有一个名为`foo.info`. 实际上，这不太可能是一个重大问题。如果这是一个问题，您将不想为此使用 shell，尽管您可以这样做：

```
#!/bin/sh

for dir in *; do
    for f in "$dir"/*; do
        case "$f" in 
            *.info) mv "$dir" ./Finished; break;;
        esac
    done
done 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T11:22:30.043

Try this:

```
 PATH_TO_FOLDER="/YOUR_FOLDER"

    for f in `ls $PATH_TO_FOLDER`;
    do
        # Check filename

        if [ $(echo $f | grep -Ec ".info$") -ne 1 ]
        then
            echo "We don't care"
        else
            ## move the file
        fi
    done 
```

# ruby-on-rails - 动态路径助手

> ID：11863305
> 
> 赞同：24
> 
> 时间：2012-08-08T11:12:53.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Rails 自动添加的路径是什么？假设您有一个问题资源，您会自动获得 questions_path、question_path 等。我在哪里可以看到他们解决了什么问题以及我得到了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-08T11:24:20.370

本节可能会有所帮助[http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use](http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use)

```
Verb    Path              Action     Helper

GET     /photos           index      photos_path
GET     /photos/new       new        new_photo_path
POST    /photos           create     photos_path
GET     /photos/:id       show       photo_path(:id)
GET     /photos/:id/edit  edit       edit_photo_path(:id)
PUT     /photos/:id       update     photo_path(:id)
DELETE  /photos/:id       destroy    photo_path(:id) 
```

如果您想为`show`操作创建一个助手，您可以编写

```
photo_path(@photo.id) 
```

`@photo`你的模型对象在哪里。或者，`@photo`如果它响应`id`方法，您可以直接传递。

```
photo_path(@photo)
edit_photo_path(@photo) 
```

您还可以加载`rails console`（在终端中）并使用`app`这样的方式测试路线`app.photo_path(1)`（它会向您显示带有`id`equals的照片的路线`1`）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-08T11:21:25.333

只需使用：

```
rake routes 
```

这将列出所有定义的路由。第一列与您的路径助手相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:24:44.600

如果您的路线文件中有以下内容：

```
resources :questions 
```

然后 Rails 为您提供了以下宁静的路线：

```
GET     /questions          index       list of questions
GET     /questions/new      new         show new question form
POST    /questions          create      create a new question
GET     /questions/:id      show        show a specific question
GET     /questions/:id/edit edit        show form to edit question
PUT     /questions/:id      update      update a specific question
DELETE  /questions/:id      destroy     delete a specific question 
```

您还可以运行 rake:routes 来查看正在生成的内容。

# jquery - jQuery 移动 MVC

> ID：11863308
> 
> 赞同：1
> 
> 时间：2012-08-08T11:13:20.970
> 
> 标签：jquery, model-view-controller, jquery-mobile

我正在使用 JQM 和 Phonegap 构建本机移动应用程序。是否有任何可以与 JQM 一起正常工作的 javascript mvc 框架？任何经验将不胜感激。

# android - 本机移动应用程序与交叉编译框架

> ID：11863310
> 
> 赞同：1
> 
> 时间：2012-08-08T11:13:32.700
> 
> 标签：android, ios, cordova, cross-platform

我需要为 iOS 和 Android 开发一个应用程序。当我对我可能使用的各种技术进行一些研究时，结果归结为两个。我可以选择在各自平台上本地开发这两个应用程序，也可以使用交叉编译框架。

每个的优点/缺点是什么？他们都提供了很好的解决方案吗？我读到交叉编译框架不支持所有本机库，这是真的吗？提前致谢。

# macos - 如何检查应用程序是否通过 MAC OS 中的 Automator 打开？

> ID：11863316
> 
> 赞同：2
> 
> 时间：2012-08-08T11:14:04.070
> 
> 标签：macos, applescript, toggle, automator

我试图检查应用程序是否通过 AppleScript 打开

这是以下代码：

```
on run {input, parameters}

quit application "KeyboardViewer"

return input
end run 
```

但是我希望它首先检查 KeyboardViewer 是否打开，如果它退出应用程序，如果没有，则启动它。在某种程度上，代码应该切换应用程序。

我不熟悉 AppleScript 的编码（这里是第一个计时器），所以我会很感激一些见解。

谢谢

*编辑*

我一直在尝试使用它，这似乎有效，有没有更有效的方法？我想看看你的意见

```
on run {input, parameters}

    if application "KeyboardViewer" is running then

        quit application "KeyboardViewer"

    else
        activate application "KeyboardViewer"

    end if

    return input
  end run 
```

使用此脚本时有一个小的（小于 1 秒）延迟。有没有办法让它更快？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T12:47:21.780

这似乎有效：

```
on run {input, parameters}

    if application "KeyboardViewer" is running then

        quit application "KeyboardViewer"

    else
        activate application "KeyboardViewer"

    end if

    return input
  end run 
```

我学到的是`if application "APPLICATION NAME" is running`检查应用程序是否打开。

# linq - Linq - 在执行请求时为组设置限制

> ID：11863317
> 
> 赞同：1
> 
> 时间：2012-08-08T11:14:09.973
> 
> 标签：linq, windows-phone-7, windows-8

我正在尝试找到一种有效的方法来在 C# 的 linq 请求中为我的每个组设置限制（例如，按组 7 项）。我不想用我只想传递给另一个类别的一个组的额外内容创建另一个组。

目前我这样做是为了填充我的 groupedList ：

```
 public IEnumerable<object> ListByCategory
    {
        get
        {
            var query = from item in listArticles.listArticles 
                        orderby item.categorie
                        group item by item.categorie into g
                        select g;

            return query;
        }
    } 
```

之后我尝试通过这个 groupedList 并删除每个类别中的所有额外元素，但它一点也不优雅。

先感谢您

* * *

这是 Xaml 部分：

```
 <local:MyGridView  x:Name="PicturesGridView" SelectionMode="None"
 ItemsSource="{Binding Source={StaticResource cvs1}}" IsItemClickEnabled="True"  ItemTemplate="{StaticResource CustomTileItem}" ItemClick="ItemView_ItemClick" >
        <local:MyGridView.ItemsPanel>
            <ItemsPanelTemplate>
 <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </local:MyGridView.ItemsPanel>
        <local:MyGridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Button  Click="Button_Click_1" Content="{Binding Key}" Foreground="Black" Background="White" FontSize="30" Margin="0,0,0,-10" ></Button>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
 <VariableSizedWrapGrid ItemWidth="75" ItemHeight="150" Orientation="Vertical"   Margin="0,0,80,0" MaximumRowsOrColumns="3"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </local:MyGridView.GroupStyle>
    </local:MyGridView> 
```

以下是资源：

```
<DataTemplate x:Key="CustomTileItem">
        <Grid >
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding imageUrl}" Stretch="UniformToFill"/>
            </Border>
            <StackPanel VerticalAlignment="Bottom" >
                <TextBlock Text="{Binding title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
                <TextBlock Text="{Binding chapo}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <CollectionViewSource x:Name="cvs1"
                      IsSourceGrouped="True" /> 
```

我正在做这样的绑定：

```
 IEnumerable<object> myObject = App.api.ListByCategory;
            this.cvs1.Source = App.api.ListByCategory; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:16:56.757

如果我正确理解您的要求，您可以使用`Take`：

```
return from item in listArticles.listArticles 
       orderby item.categorie
       group item by item.categorie into g
       select g.Take(7); 
```

（显然这可能是一个变量......）

请注意，这将失去它是一个分组的事实，因此您将无法再从每个组中获取密钥。如果这是一个问题，您可以很容易地选择新的数据结构。例如：

```
return from item in listArticles.listArticles 
       orderby item.categorie
       group item by item.categorie into g
       select new { g.Key, Values = g.Take(7) }; 
```

# xml - xsl:条件检查

> ID：11863319
> 
> 赞同：1
> 
> 时间：2012-08-08T11:14:12.893
> 
> 标签：xml, xslt, xslt-1.0

我有一个输入 XML 如下

```
<testing>
<subject ref="yes">
 <firstname>
    tom
 </firstname>
</subject>
<subject ref="no">
 <firstname>
    sam
</firstname>
</subject>
</testing> 
```

我期待我的输出应该是。

如果主题的 ref 为是。我将获得名称值。否则，如果参考（否）我不会得到元素

```
<testing>
<firstname>
   tom
</firstname>
</testing> 
```

请在这里指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:46:12.217

这可以通过建立在恒等变换之上来实现。首先，您需要一个模板来忽略@ref 为“否”的**主题**元素

```
<xsl:template match="subject[@ref='no']" /> 
```

对于@ref 为“yes”的**主题**元素，您还有另一个模板可以仅输出其子元素

```
<xsl:template match="subject[@ref='yes']">
   <xsl:apply-templates select="node()"/>
</xsl:template> 
```

事实上，如果@ref 只能是“是”或“否”，您可以简化此模板匹配，就像`<xsl:template match="subject">`这将匹配所有没有@ref 为“否”的元素

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="subject[@ref='no']" />

   <xsl:template match="subject">
      <xsl:apply-templates select="node()"/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<testing>
<firstname> tom </firstname>
</testing> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:07:17.533

这个短暂的转变：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <testing><xsl:apply-templates/></testing>
 </xsl:template>

 <xsl:template match="subject[@ref='yes']">
  <xsl:copy-of select="node()"/>
 </xsl:template>
 <xsl:template match="subject"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<testing>
    <subject ref="yes">
        <firstname>
         tom
     </firstname>
    </subject>
    <subject ref="no">
        <firstname>
         sam
     </firstname>
    </subject>
</testing> 
```

**产生想要的正确结果**：

```
<testing>
   <firstname>
         tom
     </firstname>
</testing> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:21:40.203

尝试这个：

```
<testing>
  <xsl:if test="testing/subject/@ref = 'yes'">
    <firstname>
      <xsl:value-of select="testing/subject/firstname" />
    </firstname>
  </xsl:if>
</testing> 
```

我希望这应该适用于 xslt

# android - Android中的日历事件显示

> ID：11863320
> 
> 赞同：0
> 
> 时间：2012-08-08T11:14:13.793
> 
> 标签：android, events, calendar

我对Android有一个疑问。我有一个 Android 应用程序，我必须在一个屏幕上显示日历。单击特定日期时，我必须添加或删除我的特定项目和事件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:43:54.370

解决了 。通过使用一些[示例](https://github.com/nevalla/CalendarView)代码。

# php - Zend Framework 2 模块的正确或首选目录结构是什么？

> ID：11863322
> 
> 赞同：8
> 
> 时间：2012-08-08T11:14:17.103
> 
> 标签：php, zend-framework2, directory-structure

我想通过将 Zend Framework 2 用于一个小项目来掌握它。我浏览过各种博客文章、文档，当然还有 Akrabat (Rob Allen) 的精彩教程。

然而，在我所有的阅读中，我没有遇到任何关于 Zend Framework 2 期望的模块的正确或首选目录结构的解释。

在[Akrabat 教程](http://zf2.readthedocs.org/en/latest/index.html#userguide)中， Rob Allen 的示例模块使用了单个模型和控制器。他选择的目录结构是：

```
/module
    /Album
        /config
        /src
            /Album
                /Controller
                /Form
                /Model
        /view
            /album
                /album 
```

这一切都很好，但是如果一个模块有多个控制器和模型，正如您在一个有多个页面/部分的站点中所期望的那样？我会将所有控制器放在 /src/Album/Controller 目录中，还是会为每个附加模型和相关控制器和视图创建另一组 /src/xxx/ 目录？

在 /view 目录中，我是否将其分解为各个控制器使用的每组视图的子目录？

我认为我的困惑来自于在 Rob 的示例中，他的主控制器/模型与模块同名。所以他的**Album**模块有一个目录，其中有更多的**Album**目录用于模型、控制器和视图。如果我将他的模块从**Album**重命名为**MyModule**，那么目录结构将变为：

```
/module
    /MyModule
        /config
        /src
            /Album
                /Controller
                /Form
                /Model
        /view
            /MyModule
                /album 
```

那么是否会这样组织一个额外的模型、**Artist**和相关的控制器：

```
/module
    /MyModule
        /config
        /src
            /Album
                /Controller
                /Form
                /Model
            /Artist
                /Controller
                /Form
                /Model
        /view
            /MyModule
                /album
                /artist 
```

如果不是上面的，那它会是什么结构？

这当然都是假设 ZF2 需要一个严格的结构。如果不是这种情况，那么显然我可以按照我想要的方式组织它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T18:29:35.113

为了快速回答您的最后一个问题 - ZF2 确实不关心目录结构。或者我应该说 - 它没有预定义的结构。这就是它具有自动加载器配置和类映射的原因（取决于您选择使用的方法）。

您可以在大多数示例中找到的“默认”自动加载器（参见 Module.php）仅假设您的 ModuleName 类将在`./src/ModuleName`目录中找到：

```
// ./modules/ModuleName/Module.php
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
} 
```

我想你知道这就是那些`__NAMESPACE__`部分的意思。

因此，如果您有一个名为 的模块`Cat`，那么它的类应该可以在`./modules/Cat/src/Cat`.

如果您决定在您的应用程序中添加一些新功能，您将添加另一个名为的模块`Dog`并将其类文件放在`./Dog/src/Dog`.

但是，这绝不意味着您必须这样做。您还可以将所有与动物相关的类放在一个名为 eg 的模块中`Animals`。您必须将自动加载器修改为如下所示：

```
// ./modules/Animals/Module.php
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                'Cat' => __DIR__ . '/src/Cat',
                'Dog' => __DIR__ . '/src/Dog',
            ),
        ),
    );
} 
```

...并将您的课程放在`./modules/Animal/src/Cat/Persian.php`和`./modules/Animal/src/Dog/Collie.php`.

我建议的一件事是将模块视为单独的实体，而不知道其他模块的任何具体信息。作为一个“现实生活”的例子——我有一个应用程序，它有一个前端（html、css 等）和一个 API 功能。

我有 3 个模块：

*   `Application`- 包含数据库配置、数据库表类、映射器、模型、身份验证类等。基本上任何其他模块可能需要的一切。
*   `Api`- 控制器期望特定格式的请求并将其输出为例如 JSON（即不需要视图）。这个模块中的类使用来自 Application 模块的类，因为我仍然需要所有的数据库功能，但是将它们全部分开可以让我将应用程序范围的逻辑与 API 逻辑分开。我可以把这个模块撕掉我想要的，它不会破坏其他任何东西。
*   `Website`- 只负责渲染页面的模块。再一次，它使用来自应用程序的类，因为我希望能够呈现数据库中的数据并让用户对其进行编辑，但我不希望这个模块中的功能仅仅因为 Api 也需要它。

我`./config/application.config.php`按以下顺序加载它们：

```
return array(
    'modules' => array(
        'Application',
        'Api',
        'Website',
    ),
    // all other entries
); 
```

这意味着我可以从所有其他模块访问应用程序类。如果出于某种原因我想禁用我的 API，我只需删除 Api 目录，我的前端仍然可以工作。

希望这可以帮助！:)

TL;DR 你可以用任何你想要的方式构建文件，只是不要忘记正确配置自动加载器。

# jsf - 忽略命令按钮按下的验证

> ID：11863328
> 
> 赞同：10
> 
> 时间：2012-08-08T11:14:55.010
> 
> 标签：jsf, primefaces

我有一个页面，我在其中编辑一些实体。该页面有两个命令按钮。一个是“返回”，一个是“保存”，而且在那个页面上，我有带有输入字段（idInputSubject）的表单。其中有些是必需的，有些则不是。

我怎样才能确保我们按下“返回”按钮（取消编辑并返回）验证将被忽略，现在不是这种情况。现在，当我按下“返回”或“保存”按钮时，如果我没有使用正确的值 (idInputSubject) 填写所需的字段，则会出现验证消息。

“返回”和“保存”按钮的形式相同：

```
<h:form id="idFormMeasureDetail" styleClass="bodyForm" prependId="false">
   ...
   <p:commandButton value="#{contentMB.msg.label_back.value}"
        action="#{chooseMeasureControllerMB.aSearch}"
        rendered="#{detailMeasureMB.navigation eq 0}" ajax="false"
        icon="ui-icon-arrowreturnthick-1-w"/>
   <p:commandButton value="#{contentMB.msg.button_save.value}" ajax="false" 
        icon="ui-icon-disk" actionListener="#{detailMeasureControllerMB.alApplyChanges}" 
                    title="#{contentMB.msg.tip_Apply.value}" />

   ...
   <p:inputTextarea id="idInputSubject" value="#{detailMeasureMB.measure.aufgabe}"
    readonly="#{!userSessionMB.supervisor and !detailMeasureMB.isCreator}"
    required="#{globalSessionMB.globalWebOptionsMap['MMRequiredSubject'].propvalue}"
            title="#{contentMB.msg.tip_Betreff.value}"
            autoResize="false" style="width:100%;" >
   </p:inputTextarea>
   <p:message id="inputSubjectMsg" for="idInputSubject" display="icon" />
   ...

</h:form> 
```

选择MeasureControllerMB：

```
@ManagedBean(name = "chooseMeasureControllerMB")
@RequestScoped
public class ChooseMeasureControllerMB extends BaseMeasureControllerMB {
...
public String aSearch() {
            ...
    // navigate to target-page
    return "/pages/mm/showMeasuresList.xhtml?faces-redirect=true";
}
...
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T11:27:39.563

如果您想阻止/跳过某些按钮的验证，请单击使用

`immediate="true"`在那个特定的按钮上

有关`immediate="true"`阅读[以下 BalusC 答案的良好解释](https://stackoverflow.com/a/12961162/617373)

[这里有一个很好的图表，显示了 imemdiate="true 的工作原理"](https://bansihaudakari.files.wordpress.com/2009/03/jsf-lifecycle.png?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:38:07.520

简而言之，当您单击“返回”按钮时，您提交表单并验证数据。为防止这种情况发生，请将按钮置于另一种形式或使用 Java 脚本进行导航。

一般来说，当你想取消一个操作时，你不想提交数据，因为它会被丢弃。使用一些客户端操作。我认为您也可以使用 a`<p:commandButton>`或 a`<p:button>`进行导航。这样表单也不会提交。

# android - GridLayout 和行/列跨度问题

> ID：11863329
> 
> 赞同：126
> 
> 时间：2012-08-08T11:14:55.457
> 
> 标签：android, android-gridlayout

介绍的[Android 开发者博客文章`GridLayout`](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)展示了 span 如何影响自动索引分配的图表：

![自动索引分配](../Images/afcce3f27fddf61aaf47640884d9ed1a.png)

我正在尝试使用`GridLayout`. 这是我到目前为止所拥有的：

```
<android.support.v7.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.commonsware.android.gridlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    app:orientation="horizontal"
    app:columnCount="8">

    <Button
        app:layout_columnSpan="2"
        app:layout_rowSpan="2"
        android:layout_gravity="fill_horizontal"
        android:text="@string/string_1"/>

  <Button
    app:layout_columnSpan="2"
    android:layout_gravity="fill_horizontal"
    android:text="@string/string_2"/>

  <Button
    app:layout_rowSpan="4"
    android:text="@string/string_3"/>

  <Button
    app:layout_columnSpan="3"
    app:layout_rowSpan="2"
    android:layout_gravity="fill_horizontal"
    android:text="@string/string_4"/>

  <Button
    app:layout_columnSpan="3"
    android:layout_gravity="fill_horizontal"
    android:text="@string/string_5"/>

  <Button
    app:layout_columnSpan="2"
    android:layout_gravity="fill_horizontal"
    android:text="@string/string_6"/>

  <android.support.v7.widget.Space
    app:layout_column="0"
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

  <android.support.v7.widget.Space
    android:layout_width="36dp"
    />

</android.support.v7.widget.GridLayout> 
```

我必须引入`<Space>`元素以确保每列都有最小宽度，否则，我会有一堆零宽度的列。

然而，即使有他们，我也明白了：

![示例网格布局](../Images/f16d5a41c097edf361aac43b2b6494b7.png)

尤其：

*   尽管如此`android:layout_gravity="fill_horizontal"`，我的具有列跨度的小部件并未填充跨度列

*   尽管有这些`android:layout_rowSpan`值，但没有任何内容跨越行

任何人都可以使用 复制博客文章中的图表`GridLayout`吗？

谢谢！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-09T15:57:02.803

感觉很hacky，但我设法通过添加超出需要的额外列和行来获得正确的外观。然后我在每一行中用空格填充额外的列，定义一个高度，并在每个列中用一个空格填充额外的行，定义一个宽度。为了获得额外的灵活性，我想这些空间大小可以在代码中设置以提供类似于权重的东西。我尝试添加屏幕截图，但我没有必要的声誉。

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:columnCount="9"
android:orientation="horizontal"
android:rowCount="8" >

<Button
    android:layout_columnSpan="2"
    android:layout_gravity="fill"
    android:layout_rowSpan="2"
    android:text="1" />

<Button
    android:layout_columnSpan="2"
    android:layout_gravity="fill_horizontal"
    android:text="2" />

<Button
    android:layout_gravity="fill_vertical"
    android:layout_rowSpan="4"
    android:text="3" />

<Button
    android:layout_columnSpan="3"
    android:layout_gravity="fill"
    android:layout_rowSpan="2"
    android:text="4" />

<Button
    android:layout_columnSpan="3"
    android:layout_gravity="fill_horizontal"
    android:text="5" />

<Button
    android:layout_columnSpan="2"
    android:layout_gravity="fill_horizontal"
    android:text="6" />

<Space
    android:layout_width="36dp"
    android:layout_column="0"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="1"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="2"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="3"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="4"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="5"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="6"
    android:layout_row="7" />

<Space
    android:layout_width="36dp"
    android:layout_column="7"
    android:layout_row="7" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="0" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="1" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="2" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="3" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="4" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="5" />

<Space
    android:layout_height="36dp"
    android:layout_column="8"
    android:layout_row="6" />

</GridLayout> 
```

![截屏](../Images/f7b65dc4bdb8dfec3e9e0490335c9e7a.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-08T18:27:05.233

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <GridLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:columnCount="8"
        android:rowCount="7" >

        <TextView
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_columnSpan="2"
            android:layout_rowSpan="2"
            android:background="#a30000"
            android:gravity="center"
            android:text="1"
            android:textColor="@android:color/white"
            android:textSize="20dip" />

        <TextView
            android:layout_width="50dip"
            android:layout_height="25dip"
            android:layout_columnSpan="2"
            android:layout_rowSpan="1"
            android:background="#0c00a3"
            android:gravity="center"
            android:text="2"
            android:textColor="@android:color/white"
            android:textSize="20dip" />

        <TextView
            android:layout_width="25dip"
            android:layout_height="100dip"
            android:layout_columnSpan="1"
            android:layout_rowSpan="4"
            android:background="#00a313"
            android:gravity="center"
            android:text="3"
            android:textColor="@android:color/white"
            android:textSize="20dip" />

        <TextView
            android:layout_width="75dip"
            android:layout_height="50dip"
            android:layout_columnSpan="3"
            android:layout_rowSpan="2"
            android:background="#a29100"
            android:gravity="center"
            android:text="4"
            android:textColor="@android:color/white"
            android:textSize="20dip" />

        <TextView
            android:layout_width="75dip"
            android:layout_height="25dip"
            android:layout_columnSpan="3"
            android:layout_rowSpan="1"
            android:background="#a500ab"
            android:gravity="center"
            android:text="5"
            android:textColor="@android:color/white"
            android:textSize="20dip" />

        <TextView
            android:layout_width="50dip"
            android:layout_height="25dip"
            android:layout_columnSpan="2"
            android:layout_rowSpan="1"
            android:background="#00a9ab"
            android:gravity="center"
            android:text="6"
            android:textColor="@android:color/white"
            android:textSize="20dip" />
    </GridLayout>

</RelativeLayout> 
```

![截屏](../Images/bf7a0b2bca0889f953fe0ab586054110.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-22T16:14:40.377

您必须在列上同时设置 layout_gravity 和 layout_columntWeight

```
<android.support.v7.widget.GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView android:text="سوم شخص"
        app:layout_gravity="fill_horizontal"
        app:layout_columnWeight="1"
        />

    <TextView android:text="دوم شخص"
        app:layout_gravity="fill_horizontal"
        app:layout_columnWeight="1"
        />

    <TextView android:text="اول شخص"
        app:layout_gravity="fill_horizontal"
        app:layout_columnWeight="1"
        />
 </android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-24T20:33:19.190

Android Support V7 GridLayout 库通过适应权重原则使多余的空间分配变得容易。要使柱子拉伸，请确保其中的组件定义了重量或重力。要防止柱子拉伸，请确保柱子中的一个组件未定义重量或重力。请记住为此库添加依赖项。在 build.gradle 中添加**com.android.support:gridlayout-v7:25.0.1 。**

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
app:columnCount="2"
app:rowCount="2">

<TextView
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:gravity="center"
    android:text="First"
    app:layout_columnWeight="1"
    app:layout_rowWeight="1" />

<TextView
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:gravity="center"
    android:text="Second"
    app:layout_columnWeight="1"
    app:layout_rowWeight="1" />

<TextView
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:gravity="center"
    android:text="Third"
    app:layout_columnWeight="1"
    app:layout_rowWeight="1" />

<TextView
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:gravity="center"        
    app:layout_columnWeight="1"
    app:layout_rowWeight="1"
    android:text="fourth"/>

</android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-27T13:26:57.510

从 API 21 开始，GridLayout 现在支持类似于 LinearLayout 的权重。详情请看以下链接：

[https://stackoverflow.com/a/31089200/1296944](https://stackoverflow.com/a/31089200/1296944)

# iphone - 如何编译使用 iPhone 应用程序添加的 Object(*.o) 文件？

> ID：11863337
> 
> 赞同：0
> 
> 时间：2012-08-08T11:15:23.497
> 
> 标签：iphone

我创建了一个简单的原生 iPhone 应用程序。该项目包含用于执行某些操作的 c、c++ 源文件。它的收音机调谐应用程序，工作正常。我想给某人一个源代码，并想隐藏所有源代码 c,cpp 文件（因为陌生人不想看到我的代码）。所以我所做的是，我编译了 iPhone 应用程序并从构建路径收集所有 (.o) 文件并添加到我的资源文件夹中。

例如，如果我的应用程序有这两个文件

```
 radio.c
      radio.h 
```

当我在构建路径目录中构建**radio.o时。**我的构建路径是（**/Users/Macuser/Projects/Radio//build/Radio.build/Release-iphoneos/HDRadio.build/Objects-normal/armv7/radio.o**）。

所以我复制**了 radio.o**文件并添加到我的源代码目录中，并删除了 radio.c 和 radio.h 文件。当我编译它给出一个错误，radio.h 文件未找到。

这里可能是什么问题？请告诉我。提前致谢..

注意：当我将 radio.h 文件添加到我的项目时，它会成功编译。我不想看到我的 radio.h 和 radio.m 文件。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:43:26.520

您的项目中必须有其他一些文件正在导入或包含 radio.h。您的 .o 文件用于链接，但在编译源代码时会解析导入/包含依赖项。（A .o 文件**不是**源文件。）

如果您不想提供 .h 文件，解决方法是创建一个静态库来包含所有相互依赖的 .o 文件。（但是，要调用库中的任何函数，该人仍然需要一个带有公共函数声明的 .h。）

# php - 我们如何将 td 添加到 zend_form 的 tr 标签中？

> ID：11863340
> 
> 赞同：0
> 
> 时间：2012-08-08T11:15:27.773
> 
> 标签：php, zend-form

我想知道很长时间。我没有为 zend_form 找到正确的方法。我们如何在 zend_form 中将 td 添加到 tr 标签中？那么我们如何在zend框架中解决这个问题。请任何人帮助我。它看起来像下面的代码：

```
<table>
      <tr>
       <td><input type='checkbox' id='something'/></td>
       <td><img src='src'/></td>
       <td><input type='text' id='something'/></td>
       <td><input type='radio' group='justonegroup'/></td>
      </tr>
</table> 
```

我的代码是这样的：

```
 $pollAdd->setDecorators(array('ViewHelper',
            array(array('data' => 'HtmlTag'), array('tag' => 'td')),
            array(array('emptyrow' => 'HtmlTag'), array('tag' => 'td',                 )),
array(array('row' => 'HtmlTag') , array('tag' => 'tr','id'=>'trRowAdd')))); 

    $this->setDecorators(array(
            'FormElements',
            array('HtmlTag' , array('tag' => 'table' , 'class' =>'formTable')),
            'Form')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:22:53.820

使用发送表单[setDecorators](http://framework.zend.com/manual/en/zend.form.forms.html)

就像是 ，

```
 $this->setElementDecorators(array(
                'viewHelper',
                'Errors',
                array(array('data'=>'HtmlTag'),array('tag'=>'td')),
                array('Label',array('tag'=>'td')),
                array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

    ),array('firstname','lastname')); 
```

表单本身将具有`table`如下所示的 html 标签，

```
 $form->setDecorators(array(
    'FormElements',
    array('HtmlTag', array('tag' => 'table')),
    'Form',
  )); 
```

# android - 从上到下制作一个可滑动的视图，类似于 Android 中的视图

> ID：11863343
> 
> 赞同：2
> 
> 时间：2012-08-08T11:15:38.227
> 
> 标签：android, view, android-animation, slidedown

我的想法是有一个可以在当前视图顶部下拉的视图，具有类似的动画功能，例如您可以在 Android 设备上一直从顶部下拉的动画功能。

这是一个插图：

![概念说明](../Images/c6d51abe8a00837507774793c50a0f68.png)

这个想法是抓住它并能够将它拉到另一个视图的顶部，然后能够与那个视图进行交互。要再次向上滑动，您应该再次抓住视图的底部（图中的灰色区域），然后将其向上拉。

我以前什至没有使用过动画，但是我在寻找解决我的问题的方法时发现了很多主题，包括：[Slide down view in android](https://stackoverflow.com/questions/3693702/slide-down-view-in-android) 但我的印象是，这是关于在用户不在时制作动画不要碰手机。

做这个的最好方式是什么？有没有更好的方法来做非常相似的事情？

**编辑**：

这是让我找到解决方案的主题：[如何使 Android SlidingDrawer 从左侧滑出？](https://stackoverflow.com/questions/1137350/how-to-make-an-android-slidingdrawer-slide-out-from-the-left)

这是我使用的解决方案： [SlidingDrawer Top-to-Bottom](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:20:03.060

您可以使用[SlidingDrawer](http://developer.android.com/reference/android/widget/SlidingDrawer.html)，这是 Android 的内置组件，但据我所知，它只能从下往上滑动。

如果您愿意修改您的应用程序设计，那么这可能是您的一个选择。

但是，互联网上有一些自定义 SlidingDrawer 库，可让您将标记放在屏幕的任何一侧，因此您可以自上而下、左右、左右拖动......任何你想要的方式。

有用的链接：
[如何使 Android SlidingDrawer 从左侧滑出？](https://stackoverflow.com/questions/1137350/how-to-make-an-android-slidingdrawer-slide-out-from-the-left)
[滑动抽屉从上到下](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom)

# javascript - 在应用 jquery.chosen 时使用 jquery.validate 验证选择字段时暴露错误

> ID：11863350
> 
> 赞同：1
> 
> 时间：2012-08-08T11:15:57.930
> 
> 标签：javascript, jquery

我有一个带有选择字段的表单，这个表单在 jquery.chosen 插件下，所以选择字段是隐藏的，而不是显示带有链接的 div。我在表单上显示错误的方法是将错误字段的边框设为红色。但是在验证隐藏选择时，此方法不起作用。所以我尝试在它们上编写自定义验证方法：

```
jQuery("#myform select.required").addClass('chosen_select');
jQuery.validator.addMethod('chosen_select',function(value,element){
            if (value.length==0) {
                $(element).parent().find("div.chzn-container").addClass('error');
             } else {
                $(element).parent().find("div.chzn-container").addClass('valid');
            }
            return (value.length!=0);
},'Please select something');
jQuery.validator.classRuleSettings.chosen_select = { chosen_select: true };
jQuery.validator.defaults.ignore = ".hidden";
jQuery( "#myform" ).validate(); 
```

这是有问题的html：

```
 <span>
      <select name="place" id="sel4OR" data-placeholder="place" class="chzn-done" onkeypress="pickup(this, event)" onblur="restorePos(this)" style="display: none;">
        <option value=""></option>
        <option value="Moscow">Moscow</option>
        <option value="London">London</option>
        <option value="Other">Other</option>
      </select>
    <div id="sel4OR_chzn" class="chzn-container chzn-container-single chzn-container-single-nosearch chzn-container-active" style="width: 549px;">
      <a href="javascript:void(0)" class="chzn-single chzn-default chzn-single-with-drop" tabindex="-1"><span>place</span></a>
      <div class="chzn-drop" style="left: 0px; width: 547px; top: 24px; ">
        <ul class="chzn-results">
          <li id="sel4OR_chzn_o_1" class="active-result highlighted" style="">Moscow</li>
          <li id="sel4OR_chzn_o_2" class="active-result" style="">London</li>
          <li id="sel4OR_chzn_o_3" class="active-result" style="">Other</li>
        </ul>
       </div>
      </div>
    </span> 
```

不幸的是，这种方法不起作用。我应该写什么来代替它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:06:25.443

我设法通过重新定义验证器的突出显示和取消突出显示功能来解决我的问题。

```
 jQuery.validator.defaults.highlight = function(element, errorClass, validClass) {
                if (element.type === 'radio') {
                    this.findByName(element.name).addClass(errorClass).removeClass(validClass);
        } else if (element.nodeName.toLowerCase() === 'select' &&         $(element).is(':hidden')) {
                    this.findByName(element.name).next().addClass(errorClass).removeClass(validClass);
        } else {
            $(element).addClass(errorClass).removeClass(validClass);
        }
    };
    jQuery.validator.defaults.unhighlight = function(element, errorClass, validClass) {
        if (element.type === 'radio') {
            this.findByName(element.name).removeClass(errorClass).addClass(validClass);
        } else if (element.nodeName.toLowerCase() === 'select' && $(element).is(':hidden')) {
            this.findByName(element.name).next().removeClass(errorClass).addClass(validClass);
        } else {
            $(element).removeClass(errorClass).addClass(validClass);
        }
    } 
```

# javascript - requirejs中的车把加载不成功

> ID：11863351
> 
> 赞同：4
> 
> 时间：2012-08-08T11:16:00.567
> 
> 标签：javascript, requirejs, handlebars.js

```
paths: {
          jquery: 'libs/jquery/jquery-min',
          underscore: 'libs/underscore/underscore-min',
          backbone: 'libs/backbone/backbone-optamd3-min',
          handlebars: 'libs/handlebars/handlebars',
          text: 'libs/require/text'
      }

   define([
      'jquery',
       'underscore',
       'backbone',
       'collections/todos',
       'views/todos',
       'text!templates/stats.html',
       'common',
       'handlebars'
  ], function ($, _, Backbone, Todos, TodoView, statsTemplate, Common, handlebars) {
   //handlebars is null
   console.log("handlebars is",handlebars); 
```

})

除了车把，其他都可以加载成功。为什么以及如何使车把加载成功。谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-10T00:07:31.743

首先，我可以看到您是新手，但请尝试在您的问题中添加更多细节以帮助其他人帮助您。

从源头看，我认为 Handlebars 与 AMD 不兼容，因此[您需要自己填充它](http://requirejs.org/docs/api.html#config-shim)。像这样的东西：

```
requirejs.config({
    shim: {
        'handlebars': {
            exports: 'Handlebars'
        }
    }
}); 
```

# javascript - Multidim json数组javascript，如何获取值

> ID：11863356
> 
> 赞同：0
> 
> 时间：2012-08-08T11:16:25.340
> 
> 标签：javascript, jquery

我有来自 AJAX 调用的数据响应：

```
{"18:00":{"twopersons":1,"fourpersons":0}} 
```

哪个被存储到变量中`statsarray = data;`

现在我如何遍历 statsarray 并输出`twopersons`值？

所以我可以提醒：

```
18:00 - There's 2 x 2persons and 0 x 4persons 
```

这是 Ajax 调用：

```
var statsarray;
var currentloopeddate = test_date.toString('yyyy-MM-dd')
$.post("/home/sessions",
    { action: 'partner_calendar_checkseats', date: currentloopeddate },
    function(data) { statsarray = data; }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:20:45.290

只需执行以下操作：

```
var twopersons = data["18:00"].twopersons;
var fourpersons = data["18:00"]["fourpersons"]; 
```

（两种变体都是可能的）

一个变体是：

```
var shorter = data["18:00"];
var twopersons = data.twopersons;
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:27:47.340

就像是：

```
var tst = {"18:00":{"twopersons":1,"fourpersons":0}};
for(k in tst) {
  for(var z in tst[k]) {
   console.log(k + ": Theres "+tst[k][z] + " X " + z);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:37:59.757

你可以尝试这样的事情：

（**更新：更好的例子**）

```
var statsarray = {"18:00":{"twopersons":1,"fourpersons":0}};

var hour, persons, line, array;
for (hour in statsarray) {
    if (statsarray.hasOwnProperty(hour)) {
        array = [];
        for (persons in statsarray[hour]) {
            if (statsarray[hour].hasOwnProperty(persons)) {
                array.push(statsarray[hour][persons] + " x " + persons);
            }
        }
        line = hour + " - There's " + array.join(' and ');
        alert(line);
    }
} 
```

请参阅：[**演示**](http://jsfiddle.net/CPTZQ/2/)。

不幸的是，您必须进行测试`.hasOwnProperty`以确保它可以与某些库一起使用。

**更新：**您已在问题中添加了 AJAX 调用中的代码，我注意到您在回调函数**之外**`statsarray`声明了变量，但**在**回调中为该变量分配了一些值。请记住，您必须在作为 AJAX 回调的函数**内**运行迭代代码，您可以在其中： - 就在这一行之后，以确保您实际上有一些值要迭代。******`statsarray = data;`******

# java - 比较数组的元素

> ID：11863360
> 
> 赞同：1
> 
> 时间：2012-08-08T11:16:52.967
> 
> 标签：java, arrays, compare

请帮我解决一下这个。我想通过array2的元素扫描array1，如果在array1中找到它，则忽略array2的元素。所以只会留下一份水果清单。但输出显示：球，铅笔。我希望它只显示水果中的元素。感谢您的帮助

```
import java.util.*;
public class CountFruits
{
    public static void main(String args[])throws Exception
    {
        String array1[] = {"apple", "mango", "orange", "banana", "ball", "pencil"};
        String array2[] = {"ball", "pencil"};
        List<String> fruits = new ArrayList<String>();
        for(int x = 0; x < array1.length; x++)
        {
            for(int y = 0; y < array2.length; y++)
            {
                if(array1[x].equals(array2[y]))
                {
                    System.out.println(array1[x] + "\t" + array2[y]);
                    if(!fruits.contains(array1[x]))
                    {
                        fruits.add(array1[x]);
                    }
                }
            }//end for
        }//end for
        System.out.println("fruits: " +fruits);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:24:16.913

首先，我假设这是一个家庭作业，所以我不会通过修复你的代码来破坏你的练习。

想法是这样的：您需要创建一个布尔变量来指示嵌套循环是否找到任何东西，将其设置为“未找到”进入循环，并在循环后检查它。如果循环表明已找到一个项目，则跳过它；否则，添加它。请记住，您只能在嵌套循环完成后执行此操作，因此`fruits.add`在嵌套循环内调用还为时过早。

```
boolean found = false;
for(int y = 0; !found && y < array2.length; y++) {
    found |= array1[x].equals(array2[y]);
}
if (!found) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:23:10.327

`array1[x]`如果它不在，您需要将它添加到您的列表中`array2[x]`：

```
if (array1[x].equals(array2[y])) {
    System.out.println(array1[x] + "\t" + array2[y]);
} else {
    fruits.add(array1[x]);
} 
```

但是你会有重复的。您可以在添加`if(!fruits.contains(...))`之前添加条件。

您可以使用以下算法简化代码：

*   将 array1 中的所有项目添加到列表中
*   从列表中删除 array2 中的项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:37:27.893

if 语句 if(array1[x].equals(array2[y])) 只对球和铅笔为真，所以水果数组只会添加球和铅笔。您可以将水果数组设置为包含所有数组 1，然后，如果您的 if 语句为真，则从数组中删除该元素。

或者，您可以设置一个布尔值 isFruit = true （在外部 for 循环中）。然后，如果您的 if 语句 if(array1[x].equals(array2[y])) 通过，请将 isFruit 设置为 false。内循环迭代后，如果isFruit为真，则将其添加到fruit数组中。

```
for(int x = 0; x < array1.length; x++)
{
    boolean isFruit = true;
    for(int y = 0; y < array2.length; y++)
    {
        if(array1[x].equals(array2[y]))
        {
            System.out.println(array1[x] + "\t" + array2[y]);
            isFruit = false;
        }
        if(isFruit)
        {
            fruits.add(array1[x]);
        }
    }//end for loop
}//end for loop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T11:59:18.233

最好的方法是，如果您使用的是 IDE，请单步执行代码，看看逻辑在哪里出错。如果您不使用调试器，则将一些 System.out.println 语句放入代码中。然后，您可以确定逻辑失败的地方。另一个解决方案是尝试我给出的第一个解决方案。也就是说，让fruit数组保存所有array1，然后删除在array2中找到的元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T12:18:10.740

你的逻辑有两个缺陷

1）在这里，您正在添加不应添加到水果列表中的元素。因此，您将必须检查不属于 array2 的元素并且应该添加这些元素。因此您可以在**else**部分编写该逻辑。

2）您每次都在检查该元素是否已经存在于 fruits 列表中，而不是使用**Set** 。它将不允许重复条目

# registry - Bat文件对注册表没有任何影响吗？

> ID：11863367
> 
> 赞同：0
> 
> 时间：2012-08-08T11:17:29.327
> 
> 标签：registry

我曾试图禁用代理......但它很糟糕......

以下 bat 文件代码不会对注册表产生任何影响。

```
Windows Registry Editor Version 5.00
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings]
"ProxyEnable"=dword:00000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:23:49.700

将此文件重命名为具有“.reg”扩展名并尝试再次运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-13T00:28:24.880

有时原因是此注册表编辑脚本的第一行我建议您使用注册表添加命令行

```
reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings /v ProxyEnable /d 0 /f 
```

# jsf - 如何在 JSF 中创建会话过滤器

> ID：11863368
> 
> 赞同：1
> 
> 时间：2012-08-08T11:17:29.393
> 
> 标签：jsf, jsf-2

我发现这篇[文章](http://balusc.blogspot.com/2007/03/user-session-filter.html#UserSessionFilter)如何基于会话 cookie 创建用户会话过滤器。

基于几个教程，我创建了这个简单的示例：

```
 <filter>
        <filter-name>SessionFilter</filter-name>
        <filter-class>com.DX_57.AC_57.SessionFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <error-page>
        <error-code>401</error-code>
        <location>DX-57/SR-57</location>
    </error-page>

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

// ! Don't forget configuration in web.xml
public class SessionFilter implements Filter
{

    private FilterConfig filterConfig = null;

    public SessionFilter()
    {
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException
    {
        this.filterConfig = filterConfig;
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException
    {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        if (req.getUserPrincipal() == null)
        {
            req.getSession().setAttribute("from", req.getRequestURI());
            res.sendRedirect("DX-57/SR-57/Home.jsf");
        }
        else
        {
            chain.doFilter(request, response);
        }

    }

    @Override
    public void destroy()
    {
    }
} 
```

进入教程我发现session cookie是用来识别用户的。但是我可以使用例如浏览器 ID 或其他独特的东西来创建和验证用户会话吗？保护 JSF 应用程序的最佳实践是什么？

# css - 使用 CSS 3 淡入淡出？

> ID：11863377
> 
> 赞同：0
> 
> 时间：2012-08-08T11:18:05.290
> 
> 标签：css, css-transitions

我需要根据顶部元素是否具有类“错误”来进行平滑过渡以显示/隐藏文本。

但我真的不能让它工作。 [http://jsfiddle.net/qd9wq/1/](http://jsfiddle.net/qd9wq/1/)

非常感谢任何形式的帮助。

我从[http://fvsch.com/code/transition-fade/test5.html#test3](http://fvsch.com/code/transition-fade/test5.html#test3)得到了我的想法。但我不想使用两种类。

编辑：解决的问题：http: [//jsfiddle.net/qd9wq/78/](http://jsfiddle.net/qd9wq/78/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:47:10.460

您需要在`transition-delay`此类中添加一个：

```
fieldset.error > ul > li {
  margin-top: 0px;
  -webkit-transition-delay:0s;
  -moz-transition-delay:0s;
  -o-transition-delay:0s;
  transition-delay:0s;
} 
```

[在这里](http://jsfiddle.net/qd9wq/92/)试试

您也可以删除所有的`!important`，它们不是必需的。

# c# - 使用正则表达式从字符串中间刮取

> ID：11863382
> 
> 赞同：0
> 
> 时间：2012-08-08T11:18:34.307
> 
> 标签：c#, regex, string, pattern-matching

我有以下字符串：

> 名称（名称，**内容（内容，内容，内容）**，编号）

我需要加粗的部分。有没有办法使用正则表达式来做到这一点？本质上，我认为我需要一种说法：

*取所有字符，直到命中此模式：，数字）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:28:44.923

您可以尝试简单的一种：

```
(\w+\([^\(\)]*\)) 
```

和你的代码：

```
var result = Regex.Match(inputString,
                     @"(\w+\([^\(\)]*\))")
                     .Groups[1].Value; 
```

解释：

```
\w+            word characters (a-z, A-Z, 0-9, _)
               (1 or more times)
\(             character '('
[^\(\)]*       any character except: '\(', '\)' 
               (0 or more times)
\)             character ')' 
```

或者这个完整模式：

```
\w+\s*\(?<yourCon>\w+,\s*([^\)]*\))\s*,\s*\w+\s*\) 
```

你的代码是这样的：

```
var result = Regex.Match(inputString, 
                         @"\w+\s*\(?<yourCon>\w+,\s*([^\)]*\))\s*,\s*\w+\s*\)")
                         .Groups["yourCont"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:28:04.627

只需在那里使用匹配组，然后使用[`Match.Groups`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx).

也许像这样的正则表达式？

```
.*, (.*\)), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:30:26.933

你可以试试这个：

```
\bcontent\([^\)]+[\)], 
```

它的意思是：

```
From the word boundary, find "content(" literally.
Match any character that is not a ), greedily
Match a )
Match a , 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:30:28.727

它必须是正则表达式吗？如果不是，您可能会使用子字符串使其更具可读性。

在您的情况下，例如：

```
var str = "name(name, content(content, content, content), number)";
Console.WriteLine(str.Substring(0, str.IndexOf(',')) + str.Substring(str.LastIndexOf(',')) ); 
```

应该管用。（由于标签，我认为它是 C#）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:33:29.290

使用以下正则表达式并提取第一组结果。

```
(?:.+?\(.+?, )(.+?\)) 
```

这是一个非常小的示例，说明您将如何使用它。

```
var input = "name(name, content(content, content, content), number)
var pattern = @"(?:.+?\(.+?, )(.+?\))";

var results = Regex.Match(input, pattern);
if (results.Success)
{
    var value = results.Groups[0];
} 
```

# asp.net - Asp.net 中的RequiredFieldValidator

> ID：11863385
> 
> 赞同：0
> 
> 时间：2012-08-08T11:18:50.403
> 
> 标签：asp.net, ajax

任何人都可以帮助.....请我在 microsoft visual studio 2010 中做，ajax 验证标注扩展器，Asp.net RequiredFieldValidator 我在我的页面中使用......

当我的鼠标离开测试框（空）时，我在所有文本框中都使用了RequiredFieldValidator 如果我单击提交按钮，我的RequiredFieldValidator 不来

我想要一个正则表达式，它必须有字符和数字 例如：100gb，20kb，像这样 空间的数量和单位，带宽，子域（右）100（错误必须来）gd（错误必须来）

请帮助仅使用 Asp.net 和 Ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:47:50.327

在验证控件上声明一个 ValidationGroup 并单击按钮。

我头顶上的正则表达式可能是`^((\d{2,3})([\w{2}]))$` 这基于我对您的问题和提供的信息的看法

# objective-c - 在 MGSplitViewController 上呈现表单时随机崩溃

> ID：11863387
> 
> 赞同：3
> 
> 时间：2012-08-08T11:19:01.453
> 
> 标签：objective-c, ios, ipad, crash

我在我的应用程序中使用 MGSplitViewController。从一个视图控制器，单击按钮，我将控件导航到这两种方法，其中 Formsheet 将以 MGSplitViewController 的背景打开（显示主视图和详细视图。）

这些方法运行良好，我得到了所需的结果，但经过多次操作后，应用程序在这一点上崩溃而没有打印任何日志。谁能建议我一些解决方案？

```
-(void)launchSplitViewWithFormSheet :(MGSplitViewController *)mGSplitViewController
{
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:mGSplitViewController];
    [self.baseNavigationController setViewControllers:[NSArray arrayWithObject:navController]]; 
    [self openFormSheet:mGSplitViewController];
}

-(void)openFormSheet:(MGSplitViewController *)mGSplitViewController
{
    DetailViewController *detailViewController = (DetailViewController *)[mGSplitViewController.viewControllers objectAtIndex:0];
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];

    UINavigationController *baseNavController = [[UINavigationController alloc]initWithRootViewController:masterViewController];
    detailViewController.masterViewController = detailViewController;

    baseNavController.modalPresentationStyle = UIModalPresentationFormSheet;
    [mGSplitViewController presentModalViewController:baseNavController animated:YES];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:31:01.953

我自己得到了答案。代替

```
[self openFormSheet:mGSplitViewController]; 
```

我用线程调用了函数

```
 [self performSelectorOnMainThread:@selector(openPurpose:) withObject:mGSplitViewController waitUntilDone:YES]; 
```

而且我没有随机崩溃。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:21:14.770

您`alloc`在代码中多次调用，但您没有调用`release`或`autorelease`在任何地方调用。每个内存分配都必须通过内存释放来平衡。如果您不这样做，您的应用程序将泄漏内存并最终崩溃。请阅读[Cocoa Core Competencies 的内存管理部分](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)。

# java - Confusion with type erasure rule in Java Generics

> ID：11863389
> 
> 赞同：2
> 
> 时间：2012-08-08T11:19:01.977
> 
> 标签：java, generics

I have been into Generics for an hour, I have certain doubts. Lets say I have a class like this :

```
class Pair<T>
{
       public T getFirst() { return first; }
} 
```

Basically my book say this :

> **Type erasure:** The type variables are erased and replaced by their bounding types (or Object for variables without bounds.)

So according to my book statement the code in JVM should look like :

```
 class Pair
    {
           public Object getFirst() { return first; }
    } 
```

Now if I do :

```
 Pair<String> pair = new Pair<>(); //I use Java 7 diamond syntax here.
   pair.getFirst() 
```

Is that again my code need to convert from `Object` to `String` in return type of `getFirst`?

Now conisder :

```
ArrayList<String> files = new ArrayList<>(); 
```

The same book say's (with respect to the above code is) :

```
....the files contain array of Strings. 
```

I'm very much confused about the type erasure rule with the above example of `ArrayList`. In this case how come `files` array know that it has `String` array? (which is contradicting to type erasure rule)

### Edit:

In order to see the resulting code of `Pair`(that is how type erasure have taken place), how can I use `javap` tool here?

Am I missing something here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:28:53.937

Your confusion comes from what the compiler does and what the JVM does.

```
Pair<String> pair = new Pair<>(); //I use Java 7 diamond syntax here.
String first = pair.getFirst(); 
```

is equivalent in the JVM to

```
Pair pair = new Pair(); 
String first = (String) pair.getFirst(); 
```

In the case of Map.get()

```
Map<Key, Value> map = ...
Value value = map.get(key); 
```

is in the JVM

```
Map map = ...
Value value = (Value) map.get(key); 
```

> Is that again my code need to convert from Object to String in return type of getFirst?

No conversion occurs. The object is not altered. All that happens is there might be a cast check of the reference.

> In order to see the resulting code of Pair(that is how type erasure have taken place), how can I use javap tool here?

Use `javap -c -classpath . ClassUsingPair`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:26:11.760

**1.** `Erasure` is a **process in which Compiler removes the** `Type parameter` and `Type arguments` from during the compilation from Class and Method, Variables etc...

**2.** Box becomes Box, this is called **raw-type**, **Raw-type is one where the generic class or interface name will be without type argument.**

**3.** So during run-time one won't find the Generics...**its mainly done to make the code that didn't used generics to run without any problem**, mainly those that were written before Generics came into existence.

**4.** Generic Class won't be instantiated, cause it needs its constructor to be initiated, and that wont happen as the original Type parameter wont be there during the Runtime.

# windows-phone-7.1.1 - 在 Windows 手机中按下后键时关闭打开的弹出窗口

> ID：11863390
> 
> 赞同：1
> 
> 时间：2012-08-08T11:19:04.210
> 
> 标签：windows-phone-7.1.1

在我的应用程序中，我在页面中使用弹出窗口。当我按下后退键时，如果弹出窗口打开并停留在页面上，我需要关闭它。当我按下后退键时，弹出窗口没有关闭，页面转到上一个。现在要关闭弹出窗口，我在`back key press event.`

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (myPopup.IsOpen)
        myPopup.IsOpen = false;

    else if (NavigationService.CanGoBack)
        NavigationService.GoBack();
} 
```

使用此代码时，弹出窗口将关闭但也会转到上一页。只有当弹出窗口处于关闭状态时，我才需要返回。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:19:12.613

您还可以执行以下操作：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (myPopup.IsOpen)
    {
    myPopup.IsOpen = false;
    e.Cancel = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:39:48.383

问题解决了。

而不是使用

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
} 
```

我使用`back key press event`了页面的

```
private void PhoneApplicationPage_BackKeyPress(object sender, System.ComponentModel.CancelEventArgs e)
{
    if (myPopup.IsOpen)
        myPopup.IsOpen = false;

    else if (NavigationService.CanGoBack)
        NavigationService.GoBack();
} 
```

# php - 检测外部设备连接到耳机插孔

> ID：11863392
> 
> 赞同：-4
> 
> 时间：2012-08-08T11:19:05.070
> 
> 标签：php, jquery, .net

你能帮我吗？我想制作一个移动网站页面，其中提供外部设备详细信息的详细信息，连接到 USB 驱动器或耳机插孔，以及设备是否已连接。

请给我建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:23:24.817

From a web-page? You can't.

Ask yourself: when have you ever seen this done. The answer is most likely "never", because you can't get that from javascript. A full java client might be able to, but: on a "Mobile Website" (which I interpret to mean: a web-site that works on mobile) that is next-to-never available.

You need a new design.

Also: frankly, I don't **want** your web-page looking at my USB ports.

# javascript - 有没有办法用 Javascript 找到元素的事件处理程序？

> ID：11863400
> 
> 赞同：12
> 
> 时间：2012-08-08T11:19:43.863
> 
> 标签：javascript, jquery, debugging, event-handling, dom-events

假设你有这个 div：

```
<div id="foo">bar</div> 
```

你这样做：

```
$("#foo").click(someFunction); 
```

Javascript 代码中的某处。

加载页面后，有没有办法通过 Chrome 中的 firebug 或 inspect 元素或其他任何方式找出 click 事件`#foo`绑定到的`someFunction`？即，无需查看所有代码就可以找到它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T11:25:27.937

Chrome 开发者工具就是这样做的。

1.  右键单击一个元素
2.  单击*检查元素*
3.  在右侧列中，向下滚动到事件侦听器

这将为您提供对象上的事件侦听器列表，可以展开以查找它们的源和附加函数。

Firebug 在 DOM 选项卡下有此信息，但它对用户不太友好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T11:20:43.227

您可以在浏览器内置的开发人员工具中使用控制台。它们是 IE 和 Chrome 内置的，而 FF 需要安装 Firebug 插件。我不知道其他浏览器。

使用调试器控制台，您可以使用 jQuery`data("events")`查询元素的附加事件。此外，这些控制台还允许您动态深入了解您感兴趣的事件的任何其他细节。

```
$("#foo").data("events"); 
```

在控制台中执行上述操作将显示一个对象，该对象具有它找到的每个事件的属性。在您的示例中，它返回一个具有`click`存储所有点击事件的数组类型属性的对象。

如果您有单击事件并且只需要该对象，则可以在控制台中执行以下操作：

```
$("#foo").data("events").click; 
```

每个事件对象都有一个`handler`属性，它将向您显示它们绑定到的函数：

```
Object
data: null
guid: 2
handler: function mytestFunction(){
arguments: null
caller: null
guid: 2
length: 0
name: "mytestFunction"
prototype: mytestFunction
__proto__: function Empty() {}
namespace: ""
origType: "click"
quick: null
selector: null
type: "click"
__proto__: Object 
```

请参阅[**DEMO**](http://jsfiddle.net/n6fj4/1/)，展示如何在控制台中查询和显示对象。

或者，您也可以将“处理程序”用于整体摘要对象：

```
$("#foo").data("handlers"); 
```

请注意，这`.data("events/handlers")`不包括任何嵌入在 html 中的事件，例如：

```
<div id="foo" onclick="...">bar</div> 
```

更多信息在`data()`文档[**中**](http://api.jquery.com/data/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T11:25:47.947

我不了解 Firefox，但有一种简单的方法可以在 Chrome 和 Safari 中查看事件侦听器。只需打开开发人员工具，选择您的元素并滚动到 CSS 属性面板的底部。您将找到“事件侦听器”部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T11:36:01.907

I would suggest using `Visual Event 2`.

Here is the [description](http://www.sprymedia.co.uk/article/Visual+Event+2) on how to use it. I use it almost everyday and its a very good tool.

# c# - 如何在 UIImageView 中显示 12 位和 16 位 (Dicom) 图像

> ID：11863401
> 
> 赞同：0
> 
> 时间：2012-08-08T11:19:44.003
> 
> 标签：c#, ios, ipad, xamarin.ios, monodevelop

只是我想在 UIImageView 中显示 12 位或 16 位图像但图像无法正确显示，所以请建议我一些解决方案，我几天以来一直在努力显示这些图像

有关更多信息，请查看包含代码和图像的此[链接。](http://monotouch.2284126.n4.nabble.com/How-to-display-12-bit-images-in-UIImageView-td4656427.html)代码在这里复制：

```
const int bytesPerPixel = 4; 
int _width = (int)_drawArg.RectUIImageMatrix.Width; 
int _height = (int)_drawArg.RectUIImageMatrix.Height; 
CGImage _bitmap ; 

Rectangle srcRectangle = new Rectangle(0, 0, imageGraphic.Columns, imageGraphic.Rows); 
Rectangle rect = Rectangle.Round(new RectangleF(0,0,_width , _height)); 
Rectangle dstRectangle = rect; 

int[] srcPixels = new int[image.Columns * image.Rows * image.PixelData.BytesPerPixel]; 

int bitsPerComponent = 8; 
int bytesPerRow = srcRectangle.Width * bytesPerPixel  *2; 
var  pixelBytes = imageGraphic.PixelData.Raw; 
CGColorSpace _color = CGColorSpace.CreateDeviceRGB(); 
CGDataProvider _provide = new CGDataProvider(pixelBytes , 0,pixelBytes.Length); 

_bitmap = new CGImage(srcRectangle.Width,srcRectangle.Height ,bitsPerComponent,32,bytesPerRow , _color , CGBitmapFlags.ByteOrder16Big | CGBitmapFlags.PremultipliedLast ,_provide ,null ,true ,CGColorRenderingIntent.Default); 

ImgView.Image = UIImage.FromImage(_bitmap); 
```

那里

感谢在 advc 中的帮助

# csv - 用vbs查询csv

> ID：11863414
> 
> 赞同：1
> 
> 时间：2012-08-08T11:20:33.747
> 
> 标签：csv, vbscript, adodb

有一个这样的 csv 文件，我可以使用下面的代码轻松阅读它。但正如您所见，csv 中有多个 name1、group1、status1、name2、group2 等列。每个用户将有不同数量的列。我想知道是否有办法在我打电话的地方使用通配符，`objRecordset.Fields.Item("Group1")`或者`("Group%")`我是否可以自动增加数字直到找不到记录

> 用户名,域,站点,MCO,Name1,Group1,Status1,Name2,Group2,Status2,Name3,Group3,Status3 Paolina,AA,Athens,Greece,Adobe Acrobat Pro,ACROBAT009,Live,,,,,, George,AA,雅典,希腊,SpotFire 2.20,SPOTFIRE220,直播,,,,,,

```
option explicit

Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H0001

Dim strPathtoTextFile, objConnection, objRecordSet, objNetwork
Dim wshshell, Username

Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")

Set objNetwork = CreateObject("WScript.Network")
userName = objNetwork.UserName

strPathtoTextFile = "C:\Hunter\vbs\" 'must have a trailing \

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
          "Data Source=" & strPathtoTextFile & ";" & _
          "Extended Properties=""text;HDR=YES;FMT=Delimited"""

objRecordset.Open "SELECT * FROM Users.txt where [user name] like '" & UserName & "'", _
          objConnection, adOpenStatic, adLockOptimistic, adCmdText
Do Until objRecordset.EOF
    Wscript.Echo "Name: " & objRecordset.Fields.Item("User Name")
    Wscript.Echo "Group: " & objRecordset.Fields.Item("Group1")
    Wscript.echo "Status:" & objRecordset.Fields.Item("Status1")
    objRecordSet.MoveNext
Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:38:59.733

您的示例表明最大组数是最后一个字段，所以也许：

```
objRecordset.Open "SELECT * FROM Users.txt where [user name] like '" _
      & UserName & "'", _
      objConnection, adOpenStatic, adLockOptimistic, adCmdText
MaxNum = _
      Replace(objRecordset.Fields(objRecordset.Fields.Count-1).Name,"Status","")
Do Until objRecordset.EOF
    Wscript.Echo "Name: " & objRecordset.Fields.Item("User Name")
    For i=1 to MaxNum
       Wscript.Echo "Group: " & objRecordset.Fields.Item("Group" & i)
       Wscript.echo "Status:" & objRecordset.Fields.Item("Status" & i)
    Next
    objRecordSet.MoveNext
Loop 
```

我没有测试过，但总体思路应该成立。

# ios - 用 glReadPixels 读取纹理字节？

> ID：11863416
> 
> 赞同：13
> 
> 时间：2012-08-08T11:20:35.147
> 
> 标签：ios, opengl-es, textures, glreadpixels

我想将原始纹理数据转储到磁盘（稍后再读），我不确定 glReadPixel 是否会从当前绑定的纹理中读取。

如何从纹理中读取缓冲区？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-14T07:35:45.537

**glReadPixels**函数从帧缓冲区读取，而不是纹理。要读取纹理对象，您必须使用**glGetTexImage**但**它在 OpenGL ES 中不可用**:(

如果要从纹理中读取缓冲区，则**可以将其绑定到 FBO（FrameBuffer 对象）并使用 glReadPixels**：

```
//Generate a new FBO. It will contain your texture.
glGenFramebuffersOES(1, &offscreen_framebuffer);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, offscreen_framebuffer);

//Create the texture 
glGenTextures(1, &my_texture);
glBindTexture(GL_TEXTURE_2D, my_texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);

//Bind the texture to your FBO
glFramebufferTexture2DOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_TEXTURE_2D, my_texture, 0);

//Test if everything failed    
GLenum status = glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES);
if(status != GL_FRAMEBUFFER_COMPLETE_OES) {
    printf("failed to make complete framebuffer object %x", status);
} 
```

然后，当您想从纹理中读取数据时，您只需调用 glReadPixels ：

```
//Bind the FBO
glBindFramebufferOES(GL_FRAMEBUFFER_OES, offscreen_framebuffer);
// set the viewport as the FBO won't be the same dimension as the screen
glViewport(0, 0, width, height);

GLubyte* pixels = (GLubyte*) malloc(width * height * sizeof(GLubyte) * 4);
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, pixels);

//Bind your main FBO again
glBindFramebufferOES(GL_FRAMEBUFFER_OES, screen_framebuffer);
// set the viewport as the FBO won't be the same dimension as the screen
glViewport(0, 0, screen_width, screen_height); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-28T15:24:09.360

感谢 Gergonzale 的回答。我今天早上花了一些时间试图弄清楚如何让它与 16 位纹理一起工作，这个代码片段可能对任何其他将 GL_UNSIGNED_SHORT_5_6_5 转换为 GL_UNSIGNED_BYTE 的人有用

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB,  tSizeW, tSizeH, 0, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, NULL);
GLubyte* pixels = (GLubyte*) malloc(tSizeW * tSizeH * sizeof(GLubyte) * 2);
glReadPixels(0, 0, tSizeW, tSizeH, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, pixels);

int index = (x*tSizeH + y)*2;
unsigned int rgb = pixels[index + 1]*256 + pixels[index + 0];
unsigned int r = rgb;
r &= 0xF800;    // 1111 1000 0000 0000
r >>= 11;       // 0001 1111
r *= (255/31.); // Convert from 31 max to 255 max

unsigned int g = rgb;
g &= 0x7E0;     // 0000 0111 1110 0000
g >>= 5;        // 0011 1111
g *= (255/63.); // Convert from 63 max to 255 max

unsigned int b = rgb;
b &= 0x1F;      // 0000 0000 0001 1111
//g >>= 0;      // 0001 1111
b *= (255/31.); // Convert from 31 max to 255 max 
```

# boolean-logic - 布尔函数，DNF和CNF的目的是什么？

> ID：11863421
> 
> 赞同：3
> 
> 时间：2012-08-08T11:20:50.187
> 
> 标签：boolean-logic, boolean-expression, conjunctive-normal-form

布尔函数可以用析取范式 (DNF) 或合取范式 (CNF) 表示。谁能解释为什么这些表格有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:26:36.947

CNF 很有用，因为这种形式直接描述了布尔 SAT 问题，虽然 NP 完全，但有许多不完全和启发式指数时间求解器。CNF 已被进一步标准化为一种称为“ [DIMACS CNF 文件格式](http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html)”的文件格式，大多数求解器都可以对其进行操作。因此，例如，芯片行业可以通过转换为 DIMACS CNF 并输入任何可用的求解器来验证其电路设计。Tseitin[变换](http://en.wikipedia.org/wiki/Tseitin-Transformation)可以将电路转换为*等值*的CNF。

DNF 实际上并没有那么有用，但是将公式转换为 DNF 意味着可以看到满足公式的可能分配列表。不幸的是，一般来说，将公式转换为 DNF 很困难，并且可能导致指数级爆炸（非常大的 DNF），这很明显，因为可以有指数级数量的满足分配给公式。

虽然 CNF 与 DNF 相比可以更简洁，但有时很难推理，因为它在从电路转换时可能会丢失结构，因此另一种简洁的形式会很有用。[and-inverter 图](http://en.wikipedia.org/wiki/And-inverter_graph)数据结构就是为此目的而设计的；它可以更紧密地模拟电路的结构，因此在某些类型的公式中更容易推理。然而，在它上面运行的求解器并不多。

其他形式包括：

*   [二元决策图](http://en.wikipedia.org/wiki/Binary_decision_diagramFrom)
*   [命题有向无环图](http://en.wikipedia.org/wiki/Propositional_directed_acyclic_graph)
*   [否定范式](http://en.wikipedia.org/wiki/Negation_normal_form)
*   [其他](http://en.wikipedia.org/wiki/Category%3aNormal_forms_%28logic%29)（维基百科）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:49:30.140

它有助于以某种标准方式表达功能。这样，自动通过许多算法就更容易了。

例如，这两种形式都可以用于自动定理求解，即解析方法中的 CNF。

# css - 如何仅在另一个元素内选择一个元素？

> ID：11863423
> 
> 赞同：46
> 
> 时间：2012-08-08T11:21:00.343
> 
> 标签：css, css-selectors

我有一个关于 CSS 选择器的问题。仅当它在具有类名的 a 中时，如何选择`<div>`具有特定类名的a ？这个 CSS 类在其他地方使用，我不想到处更改样式。`<ul>``saft`

```
<div id="floater">
    <ul class="saft">
        <li><div class="textSlide"></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-08T11:22:28.813

Simply use the CSS descendant selector (a space) between the parent element and the descendant element:

```
ul.saft div.textSlide {
    /* CSS rules */
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/4PjkV/).

In this case the rules applied to the `div` of class `textSlide` will only apply if its ancestor is a `ul` of the class `saft`. You could, instead, use the immediate child combinator, the `>` but then you'd have to specify the `div` in relation to each parent/ancestor up to the one whose class is required, which gives potentially difficult to maintain CSS (not in this case, but it can, over time, become problematic).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T11:22:11.947

做就是了：

`ul.saft .textSlide {`

这达到了你所需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:29:25.233

只有当它在具有类名 saft 的 UL 中时，您才可以轻松地选择具有特定类名的 div，如下所述 css ：-

```
ul.saft .textSlide {
color:red;
} 
```

或查看演示：- [http://tinkerbin.com/mcrh7iMq](http://tinkerbin.com/mcrh7iMq)

# android - android 中的位置监听器给出 java.lang.IllegalArgumentException: listener==null

> ID：11863424
> 
> 赞同：1
> 
> 时间：2012-08-08T11:21:13.707
> 
> 标签：android, gps, locationlistener

嘿，当我运行应用程序时，它给出了一个错误 java.lang.IllegalArgumentException: listener==null ，它告诉监听器是空的。

我的示例代码在这里：

```
public class HelloAndroidGpsActivity extends Activity {
private EditText editTextShowLocation;
private Button buttonGetLocation;
private LocationManager locManager;
private LocationListener locListener;
private Location mobileLocation;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    editTextShowLocation = (EditText) findViewById(R.id.editTextShowLocation);
    buttonGetLocation = (Button) findViewById(R.id.buttonGetLocation);  
    buttonGetLocation.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            buttonGetLocationClick();
        }
    });
}

/** Gets the current location and update the mobileLocation variable*/
private void getCurrentLocation() {
    locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    System.out.println("mobile location manager is ="+locManager);
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
    locListener = new LocationListener() {  
        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            System.out.println("mobile location is in listener1");
        }
        @Override
        public void onProviderEnabled(String provider) {
            System.out.println("mobile location is in listener2");
        }
        @Override
        public void onProviderDisabled(String provider) {
            System.out.println("mobile location is in listener3");
        }
        @Override
        public void onLocationChanged(Location location) {
            System.out.println("mobile location is in listener="+location);
            mobileLocation = location;
        }
    };
    System.out.println("after setting listener");
}
private void buttonGetLocationClick() {
    getCurrentLocation(); 
    System.out.println("mobile location is ="+mobileLocation);  
    if (mobileLocation != null) {
        locManager.removeUpdates(locListener); 
        String londitude = "Londitude: " + mobileLocation.getLongitude();
        String latitude = "Latitude: " + mobileLocation.getLatitude();
        String altitiude = "Altitiude: " + mobileLocation.getAltitude();
        String accuracy = "Accuracy: " + mobileLocation.getAccuracy();
        String time = "Time: " + mobileLocation.getTime();
        editTextShowLocation.setText(londitude + "\n" + latitude + "\n"
                + altitiude + "\n" + accuracy + "\n" + time);
    } else {
        editTextShowLocation.setText("Sorry, location is not determined");
    }
}
} 
```

文本框中的输出是“对不起，位置未确定”“如果有人能告诉我是什么问题，请帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:29:43.223

在使用之前初始化监听器。

```
locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener); 
```

此时，locListener 为空，您在这行代码之后对其进行初始化。这可能是原因。

所以像这样重新排列你的代码行；

```
 locListener = new LocationListener() {...};
   locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener); 
```

希望这可能有助于解决您的问题...

# forms - VBA验证文本框中是否存在文本，然后检查日期是否格式正确

> ID：11863431
> 
> 赞同：4
> 
> 时间：2012-08-08T11:21:40.130
> 
> 标签：forms, excel, vba, date, textbox

我有一个与 VBA 结合创建的 Excel 表单。在表单中，我有一个文本框，用户可以在其中输入日期。

我创建了这个 VBA 子句以确保用户键入支持**xx/xx/xxxx 格式的日期。**

```
If Not IsDate(textboxDate1.Text) Then
  Call MsgBox("Please select a correct Date format", vbOKOnly)
  Exit Sub
End If 
```

但是，使用此 VBA 代码，用户需要输入日期，无论用户是否需要。因此，当我有 4 个其他文本框在我的表单中输入日期时，用户只需要输入 1 个日期，而不是 5 个，我遇到了用户需要为其他四个文本框输入日期的问题为了提交表格。

所以我的问题是：什么 VBA 代码可用于**首先**确定文本框中是否存在文本，然后再**确定**日期格式是否正确。

我正在尝试类似的事情：

```
 If textboxDate1.ListIndex = -1 Then 
```

但我无法让它与 IsDate 子句一起使用。

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:24:57.110

```
If (Len(Trim(textboxDate1.Text)) <> 0)  And Not IsDate(textboxDate1.Text) Then 
  Call MsgBox("Please select a correct Date format", vbOKOnly) 
  Exit Sub 
End If 
```

# ember.js - 在插座中切换视图/控制器会导致属性绑定中断

> ID：11863433
> 
> 赞同：0
> 
> 时间：2012-08-08T11:21:47.950
> 
> 标签：ember.js

我们正在构建一个应用程序，其中一部分涉及从列表中选择一个元素；我们为此使用了一个插座并在两个视图之间切换：一个显示当前选择的元素`('detailView')`，另一个显示所有可供选择的元素的列表`('listView')`- 它的工作方式类似于下拉列表。表示列表视图中当前选择的元素的列表元素也有一个类，`is-selected`即绑定属性。

当我们从列表视图切换到详细视图时（作为用户点击的结果，意味着他选择了一个元素），我们更新一个表示当前选定项目的对象。这会导致列表视图中列表元素上的类属性绑定在 Ember 库中（在`EmberHandlebars.bindClasses`函数中）产生错误。

看起来提到的函数正在尝试更新与新值相关的属性绑定，并通过查找相应的 HTML 代码来实现。问题是这个 HTML 目前不存在，因为我们已经切换了视图。

我用我们正在尝试做的一个例子做了一个小提琴：http: *[//jsfiddle.net/7k8n7/2/](http://jsfiddle.net/7k8n7/2/)*

请，如果您在此示例中发现任何您认为不好的设计选择，请毫不犹豫地提及它；然而，Fiddle 的重点只是在我们认为应该可以工作的一段代码中创建错误。

产生错误的代码是：

```
goToDetail : function(router, event) {
    router.transitionTo('detail');
    router.get('selectedModel').set('content', event.context);
} 
```

如果在此函数中切换两行的顺序，则`detail-view`甚至不会显示。

# wpf - 在主机/插件场景中使用同一类的不同版本

> ID：11863434
> 
> 赞同：1
> 
> 时间：2012-08-08T11:21:49.593
> 
> 标签：wpf, assemblies, appdomain, gac

我开发了一个基于 WPF 插件的应用程序，其中插件程序集被动态加载到“主机”应用程序中，并且主机应用程序及其插件都引用公共程序集。

如果在将来的某个时候我希望调整一个通用程序集的类，我不想重新编译所有插件以便它们在可能运行不同版本的主机应用程序中工作常见的组件。

**设想：**

*   有 2 个版本的通用程序集（1.1.0.0 和 1.2.0.0），签名并部署了全局程序集缓存。每个都包含一个类“Foo”，在版本之间保持不变。由于架构的原因，Foo 必须留在公共程序集中。
*   宿主应用程序是针对通用版本 1.1.0.0 构建的，并提供了一个基类，所有插件中的视图模型都可以从中派生；它的功能非常以 UI 为中心，因此它必须留在宿主应用程序中。
*   插件 #1 是针对通用版本 1.1.0.0 构建的
*   插件 #2 是针对通用版本 1.2.0.0 构建的
*   使用的相关第三方组件：微软的 Prism and ServiceLocation and Castle (Windsor)

**常见的：**

```
public class Foo
{
    // Some useful properties
} 
```

**主持人：**

```
public class ViewModelBase<T> where T : Foo
{
    // Some useful behaviour
} 
```

**插件#1：**

```
public class ViewModel : ViewModelBase<Foo>
{

} 
```

**插件#2：**

```
public class ViewModel : ViewModelBase<Foo>
{

} 
```

**问题：**

在加载插件 #2 时，我收到一个 ReflectionTypeLoadException，因为 Foo 1.1.0.0 版本的类与 1.2.0.0 版本的 Foo 类不同，因此使用 Foo 作为视图模型的类型参数插件 #2 无效。

**想法：**

*   使用更不可变的“核心”通用程序集来包含 Foo 类*（但最终，这将需要从太多不同的程序集中获取太多类），因此不是一种选择*

*   使用程序集重定向*（但强制插件使用与宿主应用程序相同版本的通用程序集并不能保证在开发期间工作的插件将在部署后继续工作，除非制定了确保不会发生重大更改的规则使用过时属性引入）*

有没有人设法获得像这样工作的真正并排（不要与.NET框架并排混淆）场景（无论是在单个还是多个应用程序域中）？

非常感谢，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T13:05:44.247

我们最终在主机应用程序的 app.config 文件中使用程序集重定向解决了这个问题。

# c++ - 关于我不理解的类对象的编译器行为

> ID：11863435
> 
> 赞同：1
> 
> 时间：2012-08-08T11:21:49.873
> 
> 标签：c++, class, compiler-construction, constructor, destructor

我是个菜鸟，还在学习 C++ 语言。问题是，从书中做一个练习，我遇到了我不理解的编译器行为。

头文件。

```
// stock10.h -- Stock class declaration with constructors, destructor added

#ifndef STOCK10_H_
#define STOCK10_H_

#include <string>

class Stock
{
private:
    std::string company;
    long shares;
    double share_val;
    double total_val;
    void set_tot() { total_val = shares * share_val; }
public:
    // two constructors
    Stock(); // default constructor
    Stock(const std::string & co, long n = 0, double pr = 0.0);
    ~Stock(); // noisy destructor
    void buy(long num, double price);
    void sell(long num, double price);
    void update(double price);
    void show();
};

#endif 
```

类实现。

```
// stock10.cpp -- Stock class with constructors, destructor added

#include <iostream>
#include "stock10.h"

// constructors (verbose versions)
Stock::Stock() // default constructor
{
    std::cout << "Default constructor called\n";
    company = "no name";
    shares = 0;
    share_val = 0.0;
    total_val = 0.0;
}

Stock::Stock(const std::string & co, long n, double pr)
{
    std::cout << "Constructor using " << co << " called\n";
    company = co;
    if (n < 0)
    {
        std::cout << "Number of shares can’t be negative; "
                  << company << " shares set to 0.\n";
        shares = 0;
    }
    else
        shares = n;
    share_val = pr;
    set_tot();
}

// class destructor
Stock::~Stock() // verbose class destructor
{
    std::cout << "Bye, " << company << "!\n";
}

// other methods
void Stock::buy(long num, double price)
{
    if (num < 0)
    {
        std::cout << "Number of shares purchased can’t be negative. "
                  << "Transaction is aborted.\n";
    }
    else
    {
        shares += num;
        share_val = price;
        set_tot();
    }
}

void Stock::sell(long num, double price)
{
    using std::cout;
    if (num < 0)
    {
        cout << "Number of shares sold can’t be negative. "
             << "Transaction is aborted.\n";
    }
    else if (num > shares)
    {
        cout << "You can’t sell more than you have! "
             << "Transaction is aborted.\n";
    }
    else
    {
        shares -= num;
        share_val = price;
        set_tot();
    }
}

void Stock::update(double price)
{
    share_val = price;
    set_tot();
}

void Stock::show()
{
    using std::cout;
    using std::ios_base;
    // set format to #.###
    ios_base::fmtflags orig =
        cout.setf(ios_base::fixed, ios_base::floatfield);
    std::streamsize prec = cout.precision(3);
    cout << "Company: " << company
         << " Shares: " << shares << '\n';
    cout << " Share Price: $" << share_val;
    // set format to #.##
    cout.precision(2);
    cout << " Total Worth: $" << total_val << '\n';
    // restore original format
    cout.setf(orig, ios_base::floatfield);
    cout.precision(prec);
} 
```

主文件。

```
// usestok1.cpp -- using the Stock class
// compile with stock10.cpp

#include <iostream>
#include "stock10.h"

int main()
{
    {
        using std::cout;
        cout << "Using (non default) constructors to create new objects\n";
        Stock stock1("NanoSmart", 12, 20.0); // syntax 1
        stock1.show();
        Stock stock2 = Stock ("Boffo Objects", 2, 2.0); // syntax 2
        stock2.show();

        cout << "Assigning stock1 to stock2:\n";
        stock2 = stock1;
        cout << "Listing stock1 and stock2:\n";
        stock1.show();
        stock2.show();

        cout << "Using a constructor to reset an object\n";
        stock1 = Stock("Nifty Foods", 10, 50.0); // temp object
        cout << "Revised stock1:\n";
        stock1.show();
        cout << "Done\n";
    }
    std::cin.get();
    return 0;
} 
```

您可能已经猜到了，Stock 是类，我创建了非默认构造函数和析构函数来显示消息以查看它们何时“行动”。

这是程序执行的输出：

> 使用（非默认）构造函数创建新对象
> 使用 NanoSmart 的构造函数，名为
> Company：NanoSmart 股票：12
> 股价：20.000 美元 总价值：240.00 美元
> 使用Boffo 对象的构造函数，名为 Company：Boffo
> Objects 股票：2
> 股价：2.000 美元 总价值：4.00 美元
> 分配股票1 to stock2：
> 上市 stock1 和 stock2：
> 公司 NanoSmart 股票：12
> 股价：20.000 美元 总价值：240.00 美元
> 公司 NanoSmart 股票：12
> 股价：20.000 美元 总价值：240.00 美元
> 使用构造函数重置对象
> 使用 Nifty Foods 的构造函数，称为
> **再见，NanoSmart！**//*为什么？不应该是再见，漂亮的食物吗？*
> 修订后的股票 1：
> 公司：Nifty Foods 股票：10
> 股价：50.000 美元 总价值：500.00 美元再见，
> NanoSmart
> ！
> 再见，漂亮的食物！

在此特定行中：

```
stock1 = Stock("Nifty Foods", 10, 50.0); // temp object 
```

编译器不应该：
1\. 使用构造函数创建一个临时对象
2\. 将该对象分配给 stock1 对象
3\. 销毁临时对象

消息不应该说 Nifty Foods 而不是 NanoSmart 吗？

我不明白。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:41:55.893

您没有定义赋值运算符，因此如果您使用的是 C++11 编译器，它可能会使用移动赋值运算符，该运算符交换对象，然后删除临时对象的新内容，该对象曾经位于`stock1`.

至少，这是观察到的行为。但是，ecatmur 是正确的，您的类不应该收到隐式移动赋值运算符。这当然可能是一个编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:53:33.570

您尚未编写复制赋值运算符`Stock::operator=(const Stock &)`或移动赋值运算符`Stock::operator=(Stock &&)`，因此您的赋值`stock1 = Stock("Nifty Foods", 10, 50.0);`将调用隐式定义的复制/移动赋值运算符：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 12.8 复制和移动类对象[class.copy]
> 
> 18 - 如果类定义没有显式声明复制赋值运算符，则隐式声明。如果类定义声明了移动构造函数或移动赋值运算符，则隐式声明的复制赋值运算符被定义为删除；否则，它被定义为默认值（8.4）。
> 28 - 非联合类 X 的隐式定义的复制/移动赋值运算符执行其子对象的成员复制/移动赋值。

因为你的类有一个用户定义的析构函数，移动赋值运算符不会被隐式定义（12.8:20），所以会调用隐式定义的复制赋值运算符：

> 20 - 如果类 X 的定义没有显式声明移动赋值运算符，当且仅当 [...]
> 
> > *   X 没有用户声明的析构函数

因此，`Stock("Nifty Foods", 10, 50.0)`将按成员复制到`stock1`然后销毁；所以显示的消息将是`"Bye, Nifty Foods!"`。

这是一个SSCCE：

```
#include <iostream>
#include <string>
struct S {
    std::string s;
    S(const std::string &s): s(s) { std::cout << "S(" << s << ")\n"; }
    ~S() { std::cout << "~S(" << s << ")\n"; }
};
int main() {
    S a("a");
    a = S("b");
} 
```

输出：

```
S(a)
S(b)
~S(b)
~S(b) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T11:49:06.573

我没有立即看到您的代码有任何问题，但无论如何您可能应该实现一个复制构造函数和赋值运算符，以确保正确执行复制。

像这样的东西：

```
class Stock
{
    // ...

public:
    // ...

    Stock(const Stock &other)
        : company(other.company), shares(other.shares),
          share_val(other.share_val), total_val(other.total_val)
        { }

    Stock &operator=(const Stock &other)
        {
            company   = other.company;
            shares    = other.shares;
            share_val = other.share_val;
            total_val = other.total_val;

            return *this;
        }

    // ...
}; 
```

有关复制构造函数的更多信息，请参见例如[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Copy_constructor)。对于赋值运算符，请参见例如[这篇文章](http://en.wikipedia.org/wiki/Assignment_operator_in_C%2B%2B)。

# c# - asp.net dropdownlist ajax call without ajaxtoolkit

> ID：11863448
> 
> 赞同：2
> 
> 时间：2012-08-08T11:22:37.190
> 
> 标签：c#, asp.net, ajax, drop-down-menu

I have searched on SO and search engines, but can't find a solution.
Is it possible to make an ajax call for an asp.net dropdownlist without using an ajaxtoolkit or jquery?
If so, how would I make an ajax call for a dropdownlist box (selecting a value from one dropdown, populates the next dropdownlist control).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:26:18.343

好吧，您可以使用 Dojo。使用 ajaxtoolkit 或 jquery 有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:33:46.630

使用`<asp:DropDownList>`一套`autopostback="true"`

然后在 page_load 中：

```
if (page.isPostback) 
{
   if (Request.Form("__EVENTTARGET") == DROPDOWNID.UniqueID)
   {
        //POPULATE OTHER DROPDOWN
   }
} 
```

哪里 DROPDOWNID 是你给你的 asp:dropdownlist 的 id

# php - Generate a Reference number from a Post ID in PHP

> ID：11863450
> 
> 赞同：0
> 
> 时间：2012-08-08T11:22:50.010
> 
> 标签：php

I want to generate a Reference number that users can use to search or save when they want to send it to the agent, or return to a site.

What I have is this -> what I want:

```
 '45'     ->  REF4903295762
 '421'    ->  REF3425436346
 '1250'   ->  REF4695039476 
```

Adding the 'REF' string is not a issue, but generating even length numbers and/or letters from a ID and having it decodable back is the important bit.

P.S. Something in line with what URL shorteners do.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:00:52.220

您可以使用我创建的此类/CI_Library。

```
<?php
class Xref{
    private $key = 24040410;//secret key - change to your own key (int only)[length = 8]
    private $limit = 67000000;//num limit [do not change]

    function encrypt($num){
        if($num > $this->limit){
            return false;
        }else{
            $binaryString = $this->toBinaryString($num);
            $reversedBinaryString = $this->reverseString($binaryString);
            $reversedBinaryInt = bindec($reversedBinaryString);
            $xor = $this->key ^ $reversedBinaryInt;
            return str_pad($xor, 8, '0', STR_PAD_LEFT);
        }
    }
    function decrypt($str){
        $xor = $this->key ^ intval($str);

        return bindec($this->reverseString($this->toBinaryString($xor)));
    }

    private function toBinaryString($num){
        return str_pad(decbin($num), 26, '0', STR_PAD_LEFT);
    }
    private function reverseString($str){
        return strrev($str);
    }
}
?> 
```

只需使用`encrypt($ID)`转换为“随机”数字，并`decrypt($str)`取回 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:29:48.887

嗯......通常REF之后的数字**是**ID。但是，如果您希望它是随机的，您可以创建另一个名为“Ref”的列。您创建一个随机数

```
$string = rand(0, 9999999); 
```

然后你使用 MySQL 来检查它没有被使用，所以就像

```
$used = true;
while($used)
{
    $string = rand(0, 9999999);
    $query = mysql_query("SELECT * FROM `table` WHERE `REF`='$string'");
    if(!mysql_num_rows($query))
    {
        $used = false;
    }
} 
```

然后在此之后插入它。然后您以后可以通过该列查找。检查这是否是你使用 mysql_num_rows 的方式，我不确定你是否需要在它之前使用 msyql_fetch_array

# tomcat - 试图在服务器上启动 Cassandra，但出现错误

> ID：11863454
> 
> 赞同：0
> 
> 时间：2012-08-08T11:22:58.347
> 
> 标签：tomcat, cassandra

我正在尝试在我的服务器（基于 Linux 并使用 tomcat）上启动 cassandra，但出现以下错误：

```
Error occurred during initialization of VM
The size of the object heap + VM data exceeds the maximum representable size 
```

我的服务器只有 512MB 的 RAM，我正在为 catalina 使用以下配置：

```
JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms128m -Xmx384m -XX:PermSize=64m -XX:MaxPermSize=128m" 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:16:13.983

在 cassandra conf 目录中，您有一个 cassandra-env.sh 文件您应该在那里更新堆定义值

```
#MAX_HEAP_SIZE="4G"
#HEAP_NEWSIZE="800M" 
```

删除备注并将您的尺寸放在那里

# android - 存储大量 html 内容的有效方法

> ID：11863459
> 
> 赞同：1
> 
> 时间：2012-08-08T11:23:34.727
> 
> 标签：android, sqlite, large-data

我有一个数据库，其中有一个包含“标题、专辑、艺术家......”等字段的表，它还有许多字段，其中包含每条记录的 html 内容（最多 30 个）。

问题是，这个数据库有数万条记录，并且由于 html 内容而有数百兆字节。由于 sqlite 文件的大小，搜索非常慢（在事务中插入新元素也非常慢~10-30 秒，对于 200 个新行）。第一个 LIKE 查询可能需要 10-15 秒，其他搜索足够快（创建索引并且工作正常）。当我从数据库中删除 html 内容时，搜索总是即时的。

所以问题是，存储额外的 html 内容的最佳方式是什么？现在我可以选择将它存储在单独的文件中，但它可以在未来生成多达 600k 的文件，而且创建起来很慢。将文件存储在 zip 存档中可能会达到其文件数量限制。其他选项是按表行压缩文件，将 html 存储在同一数据库中的单独表中，或为 html 内容创建单独的数据库文件。

什么会给我最好的表现？还是有其他更好的选择？我需要快速插入、更新和搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:16:45.437

您可以考虑做几件不同的事情：

*   将数据拆分为单独的表。然后，您可以在表之间进行 1:1 映射，并且仅在必要时将它们加入，从而在没有它们的情况下加快查询速度。
*   检查您的索引。仅仅因为你拥有它们并且你*认为*它们正在工作，并不意味着它们是。如果我没记错的话，sqlite 每个查询最多使用一个索引，因此您需要确保您拥有可用于您正在使用的查询的最佳索引。ANALYZE 命令可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:22:02.107

经过几天的实验，我得出了这个结论：

*   一个数据库文件和一个表是最慢的（最多 10 秒）
*   一个数据库有两个表在最坏的情况下是一个表的两倍
*   最快的是拥有两个单独的数据库文件。一个用于搜索所需的数据，另一个用于巨大的 html 数据。这在最坏的情况下几乎是即时的 ~300 毫秒，在正常使用中它是即时的

所以我建议在这种情况下使用两个单独的数据库文件。如果有人没有提供更快/更好的解决方案，我会接受这个作为答案。

# android - 如何在 AChartEngine 的 DefultRenderer 中正确设置 StartAngle()？

> ID：11863460
> 
> 赞同：0
> 
> 时间：2012-08-08T11:23:38.697
> 
> 标签：android, angle, achartengine

我使用 AChartEngine 在我的应用程序饼图中创建了。我是这样写的：

```
private GraphicalView graphicalView;    
private CategorySeries categorySeries = new CategorySeries("");
private DefaultRenderer defaultRenderer = new DefaultRenderer();

private void setUpPieCharts() {
    defaultRenderer.setApplyBackgroundColor(true);
    defaultRenderer.setBackgroundColor(Color.TRANSPARENT);
    defaultRenderer.setZoomButtonsVisible(false);
    defaultRenderer.setZoomEnabled(false);
    defaultRenderer.setPanEnabled(false);
    defaultRenderer.setStartAngle(130);
    defaultRenderer.setShowLabels(false);
    defaultRenderer.setShowLegend(false);

     categorySeries.add("Series " + (categorySeries.getItemCount() + 1), 150);
     SimpleSeriesRenderer renderer = new SimpleSeriesRenderer();
     renderer.setColor(COLORS[(categorySeries.getItemCount() - 1) % COLORS.length]);
     defaultRenderer.addSeriesRenderer(renderer);

     categorySeries.add("Series " + (categorySeries.getItemCount() + 1), 50);
     renderer = new SimpleSeriesRenderer();
     renderer.setColor(COLORS[(categorySeries.getItemCount() - 1) % COLORS.length]);
     defaultRenderer.addSeriesRenderer(renderer);

     LinearLayout layout = (LinearLayout) findViewById(R.id.chart_1);
     graphicalView = ChartFactory.getPieChartView(this, categorySeries, defaultRenderer);
     //defaultRenderer.setStartAngle(90);           
     layout.addView(graphicalView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
} 
```

它工作得很好。但是`setStartAngle()`方法似乎不起作用。我尝试了几个值，但我的饼图看起来仍然一样。我究竟做错了什么？

**编辑**

![调用此方法的屏幕截图。](../Images/40bb7b491bf3c946e08a094f728caeb7.png)

![没有调用方法的截图](../Images/624272fd0a5d400bccbf3937a049c19a.png)

我上传了两张截图，分别调用和不调用此方法。为方便起见，我还为我的活动添加了这一行：

```
Toast.makeText(getApplicationContext(), String.valueOf(defaultRenderer.getStartAngle()), Toast.LENGTH_LONG).show(); 
```

饼图看起来仍然一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:01:48.530

似乎您的代码调用 setStartAngle 两次，一次是 130，另一次是 90。我认为它总是以起始角度 = 90 显示。

我刚刚在 ACE 演示应用程序中尝试过，它可以工作。

好的，我终于设法看到问题出在哪里。您在三月份发布的 AChartEngine 1.0.0 上运行。起始角度 API 在那里，但它不适用于 PieChart，这已在 5 月修复：[http ://code.google.com/p/achartengine/source/detail?r=386](http://code.google.com/p/achartengine/source/detail?r=386)

为了让它工作，你必须检查 AChartEngine 代码并通过运行 ant dist 自己构建

# ms-access - 在 MS Access 中以不同形式链接相同值的字段

> ID：11863469
> 
> 赞同：0
> 
> 时间：2012-08-08T11:24:10.527
> 
> 标签：ms-access, vba, ms-access-2007

我有一个 MS 访问项目，有四种形式，一种主要形式（BS&W 数据）和三种后续形式（WellTest 形式、LoopSamplers 形式和 WellheadSamples 形式）。后续表单将根据特定字段的值通过主表单上的命令按钮打开（**后续方法**）。我需要链接主表单（BS&W Data）和其他表单之间共有的三个字段，因此通过在主表单中的这些字段中输入数据，然后打开后续表单，找到填充的相同字段而无需重新输入。这三个字段是**（日期、井名和后续方法）**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:31:35.793

如果您使用 modal 属性打开表单，则需要将参数作为参数传递给表单，使用`DoCmd.OpenForm`

[http://msdn.microsoft.com/en-us/library/office/ff820845.aspx](http://msdn.microsoft.com/en-us/library/office/ff820845.aspx)

否则，您可以使用以下语法直接访问控件的值并对其进行修改。当然，它必须首先打开才能使其工作。

```
Forms("subform_name")("control_name").value = ... 
```

# android - 如何从远程系统读取 .text 文件，然后将其写入 Android 中的字符串数组？

> ID：11863474
> 
> 赞同：0
> 
> 时间：2012-08-08T11:24:19.587
> 
> 标签：android

这是我的代码：我正在使用我的系统的 IP 地址，其中包含 listofitems.txt 文件：

```
 try {
         Create a URL for the desired page
String ipadd=ip.getText().toString();   
        URL url = new URL("http://192.168.1.2/listofitems.txt");

        // Read all the text returned by the server
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str = in.readLine();

        String[] items = new String[]{

        items = str.split(",");

    in.close();

    } catch (MalformedURLException e) {

    } catch (IOException e) {

    } 
```

我有平板电脑连接到带有无线路由器（WLAN）的系统。请帮忙！！！谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:29:45.670

试试这个：

```
try {
            // Create a URL for the desired page
            URL url = new URL("http://192.168.1.2/listofitems.txt");

            // Read all the text returned by the server
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            String all=""; 
            String str;
            while ((str = in.readLine()) != null) {
                all+=str;
            }
            in.close();

            items = all.split(",");

        } catch (MalformedURLException e) {
        } catch (IOException e) {
        } 
```

并将其添加到清单中：

> ```
> <uses-permission android:name="android.permission.INTERNET" >
> </uses-permission>
> <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
> </uses-permission> 
> ```

# django - 匹配时如何重定向到 /home/ (index.html)

> ID：11863475
> 
> 赞同：2
> 
> 时间：2012-08-08T11:24:23.533
> 
> 标签：django, django-models

我正在为我的项目生成器使用 Django 1.4

如果我收到类似[http://xxx.xx.xx:8000/index.html](http://xxx.xx.xx:8000/index.html)的请求，我该如何重定向到 /home/？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:28:35.907

使用重定向所有 /index.html 请求到 /home/`generic.simple.redirect_to`

```
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',   
    (r'^index.html$', redirect_to, {'url': '/home/'}),
    (r'^/home/$', 'myapp.views.my_home_view'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:37:16.810

使用`redirect_to`方法`generic.simple`：

从 django.views.generic.simple 导入 redirect_to

```
urlpatterns = patterns('',
    (r'^home/$', 'yourapp.views.home', name='home'),
    (r'^index.html$', redirect_to, {'url': '/home/'}),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:32:22.533

您需要在 urlconf 中添加一个 url

```
urlpatterns = patterns('',
    ...
    (r'^index\.html$', 'myapp.views.my_home_view'),
    ...
) 
```

**编辑**

另一种选择是使用该[`django.contrib.redirects`](https://docs.djangoproject.com/en/dev/ref/contrib/redirects/?from=olddocs/)应用程序，并通过管理员添加一个从 重定向`index.html`到的条目`home/`。这更快，更可配置

# java - 在 spring-mvc 中转义特定字符串

> ID：11863476
> 
> 赞同：1
> 
> 时间：2012-08-08T11:24:26.877
> 
> 标签：java, spring, spring-mvc, xss, jackson

我正在使用弹簧 MVC（弹簧 3.1.0）。
由于 XSS，我想对系统输出的每个字符串进行 html 编码。
但是有些输出（如链接）我不想以这种方式编码 - 为了做到这一点，我决定使用`ContextualSerializer`并创建一个实现它的类。
该方法`createContextual`检查是否存在自定义注释 ( `@NoHTMLEscap`) 并确定`JsonSerializer`要返回的内容。

这是我的注释：

```
@Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@JacksonAnnotation
public @interface NoHTMLEscap {
} 
```

我试过了，效果很好——在 POJO 上，但这是一个失败的案例：

```
@Controller
@RequestMapping(value = "/something")
public class MyController {

    ...

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    @ResponseBody
    @ResponseStatus(value = HttpStatus.OK)
    public String getName(@PathVariable String id) {
         return "Here is your answer";
    }
} 
```

Spring将返回值发送给jackson，并且由于此方法返回`String`而不是POJO-无法检查我的注释是否存在-因此我实际上无法在那里使用我的注释...

有没有办法将这些信息传递给杰克逊的序列化程序？
我不确定，但我想也许我需要使用一个永远不会转义字符串的弹簧专用转换器（不确定这是否能正确解决我的问题以及如何实现）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:55:17.790

我不认为杰克逊可以为您的用例提供一个直接的实际解决方案，但我可以建议一个不同的解决方案。
如果你能负担得起围绕这些字符串的包装器对象，比如说 LinkWrapper，你可以添加另一个 LinkWrapper 序列化器，它只会委托给你当前的序列化器。在您的 LinkWrapper 对象中，您将使用您的注解对字符串进行注解，因此您的**委托**序列化程序将对它进行未编码的序列化。
此外，您的输出不会是对象的输出，因为您的自定义序列化程序仅委托给字符串序列化程序的输出。
如果您需要代码示例，请说，但我认为这是一个非常简单的组合案例。

# asp.net - asp.net MVC ViewModel 构建

> ID：11863477
> 
> 赞同：1
> 
> 时间：2012-08-08T11:24:31.977
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我把自己打结了——我认为最好退后一步，回到基础。

我知道我应该使用 ViewModel，所以这就是我想要构建的。

我的演示应用程序将有 4 个部分（需要填写表格的 4 个不同部分）：

1.  从用户那里获取日期/天数
2.  使用该数据查询数据库，并返回符合条件的记录列表——每一条记录都有一个唯一的 TypeID ID——对于每一条记录，它们还应该有 2 个**与之关联的动态 DropDownLists**（以便在每个列表的 ListBox3 对应于 TypeID3（以及任何 ID）
3.  然后，用户将能够再次从动态填充的下拉列表中选择 Extras
4.  将收集用户姓名/地址/电话

我对 ViewModel 需要看起来/保持的“视图”是：

![在此处输入图像描述](../Images/e725166e48482dd3a6addc06340a89be.png)

我相信我的 viewModel 应该是这样的：

```
public class SearchViewModel
    {
        public DateTime Date{ get; set; }
        public int Days { get; set; }
        public IQueryable<TypeID> TypeIDs { get; set; }
        public IQueryable<LB1Item> LB1Items { get; set; }
        public IQueryable<LB2Item> LB2Items { get; set; }
        public IQueryable<Extras> Extras { get; set; }
        public string Name { get; set; }
        public string Add { get; set; }
        public string Tel { get; set; }
        public string email { get; set; }
    } 
```

首先 - 这就是我上面描述的构建 ViewModel 的方式吗？我不确定下拉框，对于每个表单，检索到的每个 TypeID 可能有 1、2、3....10、11、12 - 基于所选日期。

LB1Item 和 LB2Item 的每个下拉框 - 还需要根据每行的 TypeID 存储它们的选定值。

这就是我认为 1 个下拉菜单的类应该是这样的：

```
public class LB1Item
{
        public String TypeName { get; set; }
        public long TypeID { get; set; }
        public int NumSelected { get; set; }
        public int TypeCount { get; set; }
        public IEnumerable<SelectListItem> CarsAvail 
        {
            get
            {
                return new SelectList(
                    Enumerable.Range(0, TypeCount+1)
                    .OrderBy(typecount => typecount)
                    .Select(typecount => new SelectListItem
                    {
                        Value = typecount.ToString(),
                        Text = typecount.ToString()
                    }
                ), "Value", "Text");
            }
        } 
} 
```

这看起来也好吗？还是我使我想要实现的目标过于复杂？

我还希望，在每个阶段（1、2、3、4）之后回传数据以使用所选值主动填充 ViewModel - 并将其传递回视图，以便我可以检索它下一步。

我想要结束的是这样的：

```
Date: 01/09/2012
Days: 4
{ List:
   TypeID:    3059   ListBox1: 2   ListBox2: 8748,
   TypeID:    2167   ListBox1: 7   ListBox2: 2378,
   TypeID:    4983   ListBox1: 4   ListBox2: 5873
}
{List:
   ExtraID:  4324,
   ExtraID:  3878,
   ExtraID:  4872,
   ExtraID:  7698,
   ExtraID:  2873
}
Name: Mark
Add: My town
Tel: 0912378
Email: me@me.com 
```

感谢您提供任何帮助/指针/示例...

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:45:29.330

对于这种类型的解决方案，我会将要呈现为单独视图的每个部分分开，并使用[Jquery ajax](http://api.jquery.com/jQuery.ajax/)方法使用 Ajax 调用。我还将使用[KnockoutJS](http://knockoutjs.com/)来处理您客户端中的视图。因此，您实际上将拥有两个 ViewModel，一个在客户端的 JavaScript 中，一个在 MVC 中，用于返回您需要的片段作为来自客户端的 Ajax 调用的 JSON。您的视图的第 1 部分由用户输入到客户端，因此您在控制器端不需要它。第 1 节基本上是用于查询第 2 节的数据。也无需将集合设为 IQueryable，因为您不会查询返回的列表。您在 Controller 端的 ViewModel 可能看起来像这样：

```
public class Section2
{
    public List<TypeID> TypeIDs { get; set; }
    public List<LB1Item> LB1Items { get; set; }
    public List<LB2Item> LB2Items { get; set; }
}

public class Section3
{
    public List<Extras> Extras { get; set; }
}

public class Section4
{
    public string Name { get; set; }
    public string Add { get; set; }
    public string Tel { get; set; }
    public string email { get; set; }
} 
```

因此，将采取的步骤是，当引发用户输入日期和日期的事件时，将使用输入的数据和日期将 Ajax 调用返回给控制器，以查询将填充第 2 节的信息。控制器将 Section2 ViewModel 作为 JSON 返回，并使用 Knockout 在 HTML 中呈现。然后，当用户从第 2 节中的列表中进行选择时，将引发一个事件以再次查询控制器以返回填充第 3 节所需的信息，并重复该循环。

有一个[很好的例子，使用 Knockout 来做你想做的事情](http://knockoutjs.com/examples/cartEditor.html)。

# sql - 使用在“查询/运行时”创建的列插入或更新数据时出错

> ID：11863483
> 
> 赞同：0
> 
> 时间：2012-08-08T11:24:48.430
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在编写一个部署脚本

1.  创建一个默认值为 0 且可以为 Null 的新列
2.  UPDATE满足某个条件的列数据

另请注意，如果我在 INSERT 语句中将默认值显式设置为 0，则在更新数据时会收到相同的错误-

错误信息 -

列名“isConvertWithDivison”无效。

我正在使用的 SQL -

```
ALTER TABLE dbo.accountCurrencies 
    ADD isConvertWithDivison BIT NULL DEFAULT 0

UPDATE dbo.accountCurrencies SET  isConvertWithDivison = 1 WHERE  currencyName = 'USD'  

INSERT dbo.accountCurrencies 
        ( currencyName)
VALUES  ( 'AUD'),( 'DKK'),( 'RUB'),( 'SEK') 
```

似乎很明显发生了什么，但我该如何解决这个问题？

在执行数据更改之前，我已经尝试过将新列提交到数据库，但仍然没有运气。

```
BEGIN TRANSACTION
    ALTER TABLE dbo.accountCurrencies 
        ADD isConvertWithDivison BIT NULL DEFAULT 0
COMMIT TRANSACTION

UPDATE dbo.accountCurrencies SET  isConvertWithDivison = 1 WHERE  currencyName = 'USD'  

INSERT dbo.accountCurrencies 
        ( currencyName)
VALUES  ( 'AUD'),( 'DKK'),( 'RUB'),( 'SEK') 
```

仅供参考 - 运行 SQL 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:29:04.160

在 alter 语句后使用 [GO ，](http://msdn.microsoft.com/en-us/library/ms188037%28v=sql.90%29.aspx)

```
ALTER TABLE dbo.accountCurrencies 
    ADD isConvertWithDivison BIT NULL DEFAULT 0

go

UPDATE dbo.accountCurrencies SET  isConvertWithDivison = 1 WHERE  currencyName = 'USD'  

go
INSERT dbo.accountCurrencies 
        ( currencyName)
VALUES  ( 'AUD'),( 'DKK'),( 'RUB'),( 'SEK') 
```

# node.js - 根据位置和指定半径获取数据

> ID：11863485
> 
> 赞同：1
> 
> 时间：2012-08-08T11:24:51.993
> 
> 标签：node.js, database-design, graph, geolocation

**场景：**我有一个大型数据集，每个条目都包含一个位置（x，y - 坐标）。我希望能够从该数据集中请求该数据集中 100m 内的每个条目，并将其作为数组返回。

如何实施这样的事情？有没有推荐的模式或框架？我以前只使用关系或简单的键值类型数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:35:18.817

有效解决这个问题的数据结构是[kd 树](http://en.wikipedia.org/wiki/Kd-tree)。有许多可用的实现，包括 node.js[模块](https://github.com/theangryangel/kdtree.js)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:02:07.443

将您的数据集放入 PostgreSQL 并使用 R-Tree 索引。然后，您可以进行边界框查询以获取任何位置 +-100 英里的所有点。然后计算径向距离并接受 100 英里内的点。您可以滚动您自己的模式和查询或使用 PostGIS。

与 R-Trees 不同，KD-trees 并不是天生平衡的。因此，根据 KD-Tree 的构建方式，您可能会因为不平衡的树和最长的路径而获得不一致的性能。

# android - 尝试在android中录制语音但出现错误

> ID：11863488
> 
> 赞同：1
> 
> 时间：2012-08-08T11:24:59.443
> 
> 标签：android, voice-recording

我正在尝试在 android 模拟器（android 4.1）中录制语音。

但是当我按下按钮开始录制时，它会立即从函数返回并执行下一行记录一条消息“已录制”。

然后，我按下停止按钮，在 Logcat 消息中出现媒体记录器因未处理的事件而消失。

如果我再次按下按钮开始录制，则会收到一条错误消息，提示 FATAL SIGNAL 11。而且我不知道如何访问 SD 卡以查看文件是否已创建。

下面是我在教程中使用的 logCat 代码：

}

```
 public void start() throws IOException {
    String state = android.os.Environment.getExternalStorageState();
    if(!state.equals(android.os.Environment.MEDIA_MOUNTED))  {
        throw new IOException("SD Card is not mounted.  It is " + state + ".");
    }

    // make sure the directory we plan to store the recording in exists
    File directory = new File(path).getParentFile();
    if (!directory.exists() && !directory.mkdirs()) {
      throw new IOException("Path to file could not be created.");
    }

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(path);
    try{
    recorder.prepare();
    }
    catch(IOException e){
        Log.e("Recorder","Recording failed");
    }
    recorder.start();
  }
  /**
   * Stops a recording that has been previously started.
   */
  public void stop() throws IOException {
    recorder.stop();
    recorder.release();
  } 
```

logCat 是：

08-08 16:09:39.713：D/gralloc_goldfish(743)：没有检测到 GPU 仿真的仿真器。

08-08 16:09:42.674：D/记录器（743）：记录

08-08 16:09:48.764: W/MediaRecorder(743): mediarecorder 因未处理的事件而消失

08-08 16:13:01.613: A/libc(743): 致命信号 11 (SIGSEGV) 在 0x00000010 (code=1), 线程 743 (xample.recorder)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:22:40.033

我通过在释放它之前休息记录器解决了这个问题。

```
 recorder.stop();//stop recording
        recorder.reset();
        recorder.release(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T15:30:25.073

每次创建一个新的记录器实例，你不会得到任何错误。

`recorder.stop();` `recorder.release();` `recorder=null;`

并让以下内容成为您的 startRecording() 方法的第一行 -

`recorder=new MediaRecorder();`

欲了解更多信息 - [http://developer.android.com/guide/topics/media/audio-capture.html](http://developer.android.com/guide/topics/media/audio-capture.html)

# java - 用户会话到期时如何使用java更新数据库行？

> ID：11863491
> 
> 赞同：1
> 
> 时间：2012-08-08T11:25:09.820
> 
> 标签：java, database, jsp, servlets

当用户会话过期时，使用java如何更新数据库行？这种情况包括 1.用户没有点击任何注销按钮 2.如果自动关闭浏览器。3.系统直接断电情况。

所以，在这些情况下，如何更新数据库行。现在我在注销时使用以下代码点击条件

```
Connection con = (Connection) new DB2Connection().getDatabaseConnection();
if(request.getParameter("flrmdn") != null)
{
String s1=request.getParameter("flrcaf");
String s2=request.getParameter("flrmdn");

String sql1="update table2 set FLRReference=0 where CAF='"+s1+"' and       MDN='"+s2+"' and FLRReference=1 ";
Statement st1=con.createStatement();
int vupdate=st1.executeUpdate(sql1);
}
else if(request.getParameter("indexmdn") != null)
{
String indexcaf=request.getParameter("indexcaf");
String indexmdn=request.getParameter("indexmdn");

String sql="update table set IndexReference=0 where CAF='"+indexcaf+"' and MDN='"+indexmdn+"' and IndexReference=1 ";
Statement st=con.createStatement();
int entryrows=st.executeUpdate(sql);
}

// Redirecting user to actual required page

if(request.getParameter("location").equalsIgnoreCase("login"))
{
response.sendRedirect("login.jsp?logout=true");
} 
```

我使用过 httpsessionlistner()、sessioncreated()、sessiondistroyed() 但在那个 sessioncreated 被自动调用但 sessiondistroyed 不会在会话过期时被调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:58:47.283

[使用HttpSession.invalidate()](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#invalidate%28%29)强制会话失效，您可以通过在 web.xml 中指定如下所示看到打印出 sys 或等待会话自动过期。

```
<session-config>
      <session-timeout>5</session-timeout> 
</session-config> 
```

# iphone - 每次启动时登录页面中的uialertview

> ID：11863493
> 
> 赞同：0
> 
> 时间：2012-08-08T11:25:21.057
> 
> 标签：iphone, ios5, uialertview, appdelegate

我有一个 alertview 来显示登录页面（第一页）中新版本的更新。但实际上我希望这个警报每次启动时只出现在登录页面中。我已经看到了很多与此相关的问题，但没有人帮助他们中的一些人只[显示一次警报消息，但在应用启动时再次出现](https://stackoverflow.com/questions/11083067/displaying-an-alert-message-only-once-but-to-reappear-again-on-app-launch)

[UIAlertView，一旦用户打开应用程序。显示一次](https://stackoverflow.com/questions/6945300/uialertview-once-the-user-opens-the-app-shown-once) .......

现在我的代码是

```
 [self performSelector:@selector(getUpdate) withObject:nil afterDelay:0.1]; 
```

在**DidBecomeActive**方法中。我们正在调用 Webservice 以获取更新 alertmsg。

我的问题是

1) 通过使用 DidBecomeActive 中的代码，它第一次在没有注销的情况下关闭，并且每当我们重新打开应用程序时，警报都会出现在当前页面中，无论是第一次还是最后一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:38:31.870

我建议您从应用程序委托中调用视图控制器中的方法。

在您的`appdelegate.m`文件中，您将有一个`applicationDidFinishLaunchingWithOptions...`在此处调用的方法，其中将是一些实例化视图并调用第一个视图控制器的代码。

例如，我刚刚开始了一个新项目（Master Detail Application - 但你的将是相似的）。

我的`AppDelegate.m`文件中有一些代码如下所示：

```
 PMXMasterViewController *masterViewController = [[PMXMasterViewController alloc] initWithNibName:@"PMXMasterViewController_iPhone" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    self.window.rootViewController = self.navigationController;
    masterViewController.managedObjectContext = self.managedObjectContext; 
```

这是`init`视图控制器，将其添加到导航控制器并设置 managedObjectContext 变量。

在此之后，您可以调用视图控制器上的任何方法：

`[masterViewController showAlertDialog:@"My Message Here"]`

在`masterViewController`您需要创建一个名为的方法`showAlertDialog`：

```
- (void)showAlertDialog:(NSString *)message {
    // show alert dialog here
} 
```

由于应用程序委托的`applicationDidFinishLauching...`方法只会在应用程序启动时被调用，这意味着您的警报对话框只会在应用程序启动时显示！

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:38:48.747

让我猜你只需要在应用程序启动时第一次显示警报......如果是这样......试试这个方法

在appdidfinishlaunching方法中判断是否是第一次运行

在 nsuserdefaults 中存储一个布尔值，例如 firstRun

```
if([defaults objectForKey:@"firstRun"]==nil)
{
[defaults setBool:YES forKey:@"firstRun"];
}
else
{
[defaults setBool:NO forKey:@"firstRun"];
} 
```

然后当你显示警报时，仅当此值为 YES 时才显示它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T11:35:15.890

在您关注的视图控制器的 viewDidLoad 方法中编写以下代码：

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"UNLOCK PIN!"
                                                      message:@"Enter your valid PIN."
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];

message.alertViewStyle = UIAlertViewStyleSecureTextInput;

[message show]; 
```

# xpages - 无法从 XPiNC 引用另一个数据库中的视图

> ID：11863496
> 
> 赞同：0
> 
> 时间：2012-08-08T11:25:39.533
> 
> 标签：xpages, xpinc

我有一个重复，其中值循环通过当前数据库中的文档，这些文档包含数据库和视图名称。然后重复打开数据库并从其中查看和检索数据：

```
var dbOther:NotesDatabase = session.getDatabase(null, doc.getItemValueString("Database"));
if(dbOther != null){
    var lookupView:NotesView = dbOther.getView(doc.getItemValueString("ViewName"));
    var viewNav:NotesViewNavigator = lookupView.createViewNavFromCategory(key);
} 
```

这在所有浏览器上都可以正常工作，但是如果我在 Notes 客户端中查看 xpage，我会收到以下错误：调用方法 NotesDatabase.getView(string) null 时发生异常

我已经测试了 dbOther 变量是通过将 Server 和 FilePath 属性写入日志来设置的。我检查了它是否可以通过使用 getViews 和 getAliases 生成循环来查看视图，所有视图别名再次写入日志而没有问题。

我手动输入了视图名称，以防未从文档中正确选择值但收到相同的错误。

有没有办法可以连接到 XPiNC 中另一个数据库中的视图？我找到了一个 XSnippet，它允许您将视图数据源动态添加到您的页面，我认为这可能会解决我的问题，但想在我重新编写所有内容之前找出是否有替代解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:49:50.373

尝试其他一些获取数据库句柄的方法：

这个使用`""`而不是`null`参数来指示当前服务器：

```
var dbOther:NotesDatabase = session.getDatabase("", doc.getItemValueString("Database")) 
```

这个使用`database.getServer()`而不是 null 参数：

```
var dbOther:NotesDatabase = session.getDatabase(database.getServer(), doc.getItemValueString("Database")) 
```

这个用于`sessionAsSigner`访问数据库（而不是使用当前用户的凭据）：

```
var dbOther:NotesDatabase = sessionAsSigner.getDatabase(database.getServer(), doc.getItemValueString("Database")) 
```

* * *

您使用的是 Lotus Notes 8.5.3 客户端吗？

# asp.net-mvc - 只需在 img src 或 href 中输出 @Model 值

> ID：11863498
> 
> 赞同：0
> 
> 时间：2012-08-08T11:25:43.843
> 
> 标签：asp.net-mvc, razor

Razor 新手，我在这里遗漏了一些简单的东西：

```
 @foreach (var p in @Model)
        {
<a href="/category/@Html.Display("CategoryID")" >
         <img src="http://images.mydomain.com/productimages/@ViewData["ManufacturerID"]/category-@Html.Display("CategoryID")_lg.jpg?width=200&height=130" width="200" height="130" class="myImg" alt="" />      
</a>  
    } 
```

我只是想把CategoryID放在这里，上面的链接没有输出CategoryID的值。我在这里做错了什么？

我的模型已填充，因为我可以将其放入循环中并显示：`@p.CategoryName`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:45:09.513

尝试这个。

```
@foreach (var p in @Model)
{
  <a href="/category/@p.CategoryID" >
    <img src="http://images.mydomain.com/productimages/@ViewData["ManufacturerID"]/category-@(p.CategoryID)_lg.jpg?width=200&height=130" width="200" height="130" class="myImg" alt="" />      
 </a>  
} 
```

我们在图像源字符串 ( `@(p.CategoryID)` )中使用显式表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:42:38.110

在您的链接 href 中，只需使用`@p.CategoryID`. `Html.Display()`用于显示模型属性的值。您的模型不包含 CategoryID 属性，因为它是一个集合。

# javascript - 通过应用自定义 css 类禁用 html 输入元素

> ID：11863499
> 
> 赞同：6
> 
> 时间：2012-08-08T11:25:45.110
> 
> 标签：javascript, jquery, html, css

我想通过应用我的自定义 css 类来禁用 div 的所有输入元素。但我找不到任何可以禁用输入元素的 CSS 属性。目前我在做什么

```
 $('#div_sercvice_detail :input').attr('disabled', true);
 $('#retention_interval_div :input').addClass("disabled"); 
```

它可以使用 css attr 禁用 div 的所有输入元素，但我想应用我的自定义类来禁用具有一些额外 css 属性的所有输入

```
 $('#retention_interval_div :input').addClass("disabled"); 
```

班级

```
.disabled{
color : darkGray;
font-style: italic;
/*property for disable input element like*/
/*disabled:true; */
} 
```

在不使用 .attr('disabled', true); 的情况下使用 jquery 执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T11:39:13.807

There is no way to disable an element with just CSS, but you can create a style that will be applied to disabled elements:

```
<style>
#retention_interval_div​​ input[type="text"]:disabled { 
    color : darkGray;
    font-style: italic;
}​
</style> 
```

Then in your code you just have to say:

```
 $('#retention_interval_div :input').prop("disabled", true); 
```

Demo: [http://jsfiddle.net/nnnnnn/DhgMq/](http://jsfiddle.net/nnnnnn/DhgMq/)

(Of course, the `:disabled` CSS selector isn't supported in old browsers.)

Note that if you're using jQuery version >= 1.6 you should use `.prop()` instead of `.attr()` to change the disabled state.

The code you showed is not disabling the same elements that it applies the class to - the selectors are different. If that's just a typo then you can simplify it to one line:

```
$('#retention_interval_div :input').addClass("disabled").attr('disabled', true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-30T07:20:20.127

您可以使用以下 css 实际上禁用输入：

```
pointer-events: none; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-14T08:57:07.813

使用普通 CSS

```
.disabled{
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T11:32:34.173

不，CSS 不能禁用输入元素。CSS仅用于样式，它不能做任何其他事情。此外，输入仅适用于输入，不要忘记选择、文本区域、密码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T11:45:12.943

您需要做两件事，那么为什么不将它们包装在一个函数中呢？你甚至可以创建一个小插件来做到这一点：

```
(function ($) {
    $.fn.disableInput = function () {
        return this.each(function(){
            $(this).prop('disabled');
            $(this).addClass('disabled', true);            
        });

    }
})(jQuery); 
```

然后你可以这样称呼它：

```
$('#myInput').disableInput(); 
```

...甚至将其与其他东西链接起来，例如：

```
$('#myInput').disableInput().addClass('otherClass');​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T11:36:57.167

You can't disable input elements using css properties. But you can improve your current coding like following

```
 $('#div_sercvice_detail :input').prop('disabled',true).addClass("disabled"); 
```

# java - Eclipse编辑java文件并在原文件夹下运行

> ID：11863502
> 
> 赞同：3
> 
> 时间：2012-08-08T11:26:01.333
> 
> 标签：java, eclipse

虽然这似乎是一件容易的事情，但我无法找到答案。

我想要实现的很简单。我有一个包含 java 源文件的文件夹，我想在新项目中使用 eclipse 编辑它们。但是在运行应用程序时，我不希望 eclipse 将工作区项目文件夹用作“根”，而是应该使用包含 java 源文件的文件夹。

效果应该就像直接用文本编辑器打开源文件并更改它们，但是这应该通过 eclipse 项目完成，但仍然使用原始文件夹来运行应用程序。

我只想拥有在 Eclipse 项目中编辑源文件而不是使用像记事本++之类的东西所带来的所有优势。

我尝试链接源文件并更改源目录的相对路径，但它不起作用。运行应用程序时，它需要目录中存在的 xml 文件，但因为它“从”eclipse 项目文件夹运行，所以找不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:35:08.757

我对所有项目都这样做。你需要做的是：

1.  在与源代码不同的位置创建工作区目录。
2.  在您的工作区目录中导入您的源代码。这里不要复制`source to your workspace`

**编辑**

在日食中

1.  转到文件->切换工作区->其他->键入“新目录工作区”路径，单击确定。Eclipse 将重新启动。
2.  转到文件->导入->常规->现有项目到工作区->下一步->选择根目录
3.  Eclipse 将列出您的项目，选择它。
4.  开始编辑和保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:09:57.407

我不确定我是否真的了解您想要做什么，但听起来您想设置运行配置的工作目录：打开“运行配置”，选择包含您的主要方法的类（或为该类创建一个新的运行配置首先，如果它还不存在），然后在选项卡“参数”上指定工作目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:30:04.360

认为这不能直接回答您的问题，作为使用 Eclipse IDE 处理 Java 文件的替代方法，请尝试使用基于 Eclipse 的文本编辑器 Padclips。

> Padclipse 是一个基于 Eclipse 的轻量级文本编辑器。基本产品由 Eclipse RCP 加上文本编辑器、比较和搜索工具及其依赖项组成。还包括一些额外的第三方插件。

**[在这里](http://padclipse.sourceforge.net/)**查看

此外，我系统上的默认 JDK 是 64 位，因此启动 padclipse 失败。在您解压缩的文件夹中创建一个 padclipse.ini 并放入以下内容：

```
-showsplash
-launcher
padclipse.exe
-name
Padclipse
--launcher.library
plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.0.0.v20070523\eclipse_1017a.dll
-startup
plugins\org.eclipse.equinox.launcher_1.0.0.v20070606.jar
-vm
C:\dev\jdk\1.5\1.5.0_21\jre\bin\server\jvm.dll 
```

更改`-vm`参数以指向 32 位 jdk 的`java.exe`or `jvm.dll`。

# java - java中的空格

> ID：11863503
> 
> 赞同：16
> 
> 时间：2012-08-08T11:26:01.800
> 
> 标签：java, whitespace

Java中的空格有哪些种类？如果文本包含任何空格，我需要检查我的代码。

我的代码是：

```
if (text.contains(" ") || text.contains("\t") || text.contains("\r") 
       || text.contains("\n"))   
{  
   //code goes here
} 
```

我已经知道`\n`,`\t`和。`\r``space`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T11:28:16.887

对于非正则表达式方法，您可以检查[`Character.isWhitespace`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isWhitespace(char))每个字符。

```
boolean containsWhitespace(String s) {
    for (int i = 0; i < s.length(); ++i) {
        if (Character.isWhitespace(s.charAt(i)) {
            return true;
        }
    }
    return false;
} 
```

* * *

> Java中的空白是什么？

该文档指定了 Java 认为是空白的内容：

> `public static boolean isWhitespace(char ch)`
> 
> 根据 Java 确定指定字符是否为空格。一个字符是一个 Java 空白字符当且仅当它满足以下条件之一：
> 
> *   它是 Unicode 空格字符（SPACE_SEPARATOR、LINE_SEPARATOR 或 PARAGRAPH_SEPARATOR），但也不是不间断空格（'\u00A0'、'\u2007'、'\u202F'）。
> *   它是`'\u0009'`，水平制表。
> *   它是`'\u000A'`，LINE FEED。
> *   它是`'\u000B'`，垂直制表。
> *   它是`'\u000C'`，FORM FEED。
> *   是`'\u000D'`，回车。
> *   它是`'\u001C'`，文件分隔符。
> *   它是`'\u001D'`，组分隔符。
> *   它是`'\u001E'`，记录分隔符。
> *   它是`'\u001F'`，单位分隔符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T11:30:54.003

```
boolean containsWhitespace = false;
for (int i = 0; i < text.length() && !containsWhitespace; i++) {
    if (Character.isWhitespace(text.charAt(i)) {
        containsWhitespace = true;
    }
}
return containsWhitespace; 
```

或者，使用番石榴，

```
boolean containsWhitespace = CharMatcher.WHITESPACE.matchesAnyOf(text); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T11:40:32.060

If you want to consider a regular expression based way of doing it

```
if(text.split("\\s").length > 1){
    //text contains whitespace
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T11:30:18.493

使用[Character.isWhitespace()](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isWhitespace%28char%29)而不是自己创建。

[在 Java 中，如何将 String 转换为 char 或将 char 转换为 String？](https://stackoverflow.com/questions/2429228/in-java-how-does-one-turn-a-string-into-a-char-or-a-char-into-a-string)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-01T10:17:38.247

如果您可以在项目中使用 apache.commons.lang，最简单的方法就是使用那里提供的方法：

```
public static boolean containsWhitespace(CharSequence seq) 
```

检查给定的 CharSequence 是否包含任何空白字符。

> 参数：
> 
> ```
> seq - the CharSequence to check (may be null) 
> ```
> 
> 回报：
> 
> ```
> true if the CharSequence is not empty and contains at least 1 whitespace character 
> ```

它处理空参数和空参数，并在中心位置提供功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T11:28:07.937

来自太阳[文档](http://java.sun.com/developer/technicalArticles/releases/1.4regex/)：

> \s 空白字符：[ \t\n\x0B\f\r]

最简单的方法是使用正则表达式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-01T10:06:52.767

Why don't you check if text.trim() has a different length? :

```
if(text.length() == text.trim().length() || otherConditions){
    //your code
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-12T10:33:48.293

```
boolean whitespaceSearchRegExp(String input) {

    return java.util.regex.Pattern.compile("\\s").matcher(input).find();

} 
```

# xml - 当 Spring MVC 项目在 Eclipse 上运行时，Tomcat 尝试打开 xml 文件

> ID：11863504
> 
> 赞同：1
> 
> 时间：2012-08-08T11:26:01.523
> 
> 标签：xml, spring, model-view-controller, tomcat, http-status-code-404

当我从 Eclipse 运行它时，我得到一个 404 请求的资源（）不可用，并且在地址栏中我有`http://localhost:8080/SpringMVCTest/web.xml`或`http://localhost:8080/SpringMVCTest/springMVCTest-servlet.xml`。为什么它试图打开 xml 文件？

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>SpringMVCTest</display-name>

    <servlet>
        <servlet-name>springMVCTest</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springMVCTest</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

这是 springMVCTest-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">
    <mvc:annotation-driven/>
    <mvc:resources mapping="/resources/**" location="/resources" />
    <context:component-scan base-package="/"></context:component-scan>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"></property>
    <property name="suffix" value=".jsp"></property>
</bean>

</beans> 
```

这是控制器

```
import java.util.Map;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class SpringMVCTest {

    @RequestMapping({"/","/home"})
    public String showHomePage(Map<String, Object> model) {
        model.put("name", "Jess");
        return "home";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:34:13.483

我会对此投下阴影：
**您右键单击`xml`文件并选择 RUN**

它没有其他方法尝试打开`xml`文件。我对吗？

**更新**
将这些添加到您的`web.xml`

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file> <!-- Your index page -->
</welcome-file-list> 
```

然后再次运行。

# php - config.php 文件名是否错误？

> ID：11863509
> 
> 赞同：-3
> 
> 时间：2012-08-08T11:26:15.263
> 
> 标签：php

这个例子来自 lynda php 超越基本

**配置文件**

```
<?php
    defined('DB_SERVER') ? null : define("DB_SERVER", "localhost");
    defined('DB_USER')   ? null : define("DB_USER", "root");
    defined('DB_PASS')   ? null : define("DB_PASS", "");
    defined('DB_NAME')   ? null : define("DB_NAME", "photo_gallery");
?> 
```

**数据库.php**

```
<?php
require_once('config.php');

class MySQLDatabase {

private $connection;

function __construct(){
    $this->open_connection();
}

public function open_connection(){
    $this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);

    if (!$this->connection) {
        die("Database connection failed: " . mysql_error());
    } else {
        $db_select = mysql_select_db(DB_NAME, $this->connection);

        if (!$db_select) {
            die("Database selection failed: " . mysql_error());
        }
    }
}

public function close_connection(){

    if(isset($this->connection)) {
        mysql_close($this->connection);
        unset($connection);
    }
}

public function query($sql) {
    $result = mysql_query($sql, $this->connection);
    $this->confirm_query($result);
    return $result;
}

private function confirm_query($result){
    if (!$result) {
        die("Database query failed: " . mysql_error());
    }   
}
}

$database = new MySQLDatabase();

?> 
```

**索引.php**

```
<?php
    require_once("../includes/database.php");

    if (isset($database)) {
        echo "true";
    } else {
        echo "false";
    }

?> 
```

现在，当我尝试 index.php 在浏览器上运行它时，我遇到了一个错误错误说：

> 不推荐使用：在第 80 行的 C:\xampp\php\PEAR\Config.php 中不推荐使用通过引用分配 new 的返回值
> 
> 不推荐使用：在第 166 行的 C:\xampp\php\PEAR\Config.php 中不推荐使用通过引用分配 new 的返回值
> 
> 注意：使用未定义的常量 DB_SERVER - 在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php 中假定为“DB_SERVER”
> 
> 注意：使用未定义的常量 DB_USER - 在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php 中假定为“DB_USER”
> 
> 注意：使用未定义的常量 DB_PASS - 在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php 中假定为“DB_PASS”
> 
> 警告：mysql_connect() [function.mysql-connect]：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php
> 
> 警告：mysql_connect() [function.mysql-connect]：[2002] php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。（尝试通过 tcp://DB_SERVER:3306 连接）在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php
> 
> 警告：mysql_connect() [function.mysql-connect]：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。在第 13 行的 C:\xampp\htdocs\photo_gallery\includes\database.php 数据库连接失败：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。

我通过重命名 config.php 以某种方式修复了错误

所以这是我的问题，为什么我得到这个错误？是 config.php 文件名的问题吗？Lynda php 超越基础的视频教程没有出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:32:57.477

您的本地配置存在某种错误，可能是因为您安装了一些第三方*PEAR*，因此出现错误消息：

> 不推荐使用：在第 166 行的 C:\xampp\php\PEAR\Config.php 中不推荐使用通过引用分配 new 的返回值

您应该修改系统使用的包和库，因为此错误消息是过时代码的标志（*已弃用*）。就个人而言，我在 Windows 上使用 XAMPP，我的项目也在`config.php`其*htdocs*文件夹中，没有任何类似的错误。问题是链接文件是针对[php4](/questions/tagged/php4 "显示标记为“php4”的问题")的。在我的系统上，第 166 行内容如下：

```
$this->container = new Config_Container('section', 'root'); 
```

`config.php`是调用配置文件的一个约定俗成的名字，没有问题。保持这个名称不会降低安全障碍，这可以通过重命名来解决。

如果您的项目成功加载配置文件，其他错误将得到修复。还：

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:28:28.763

这可能是由于同一目录中存在“config.php”和“Config.php”文件。在 Windows 中，文件名不区分大小写。在 linux 中，它们是。

# eclipse - 找不到适合 jdbc:mysql://localhost:3306/hibernate 的驱动程序

> ID：11863510
> 
> 赞同：2
> 
> 时间：2012-08-08T11:26:15.750
> 
> 标签：eclipse, hibernate, jakarta-ee, hibernate-mapping

我正在使用 Eclipse 并使用 Hibernate JPA Annotation 创建一个 Web 动态项目：

当我运行我的项目时，它给了我以下错误：

```
No suitable driver found for jdbc:mysql://localhost:3306/hibernate 
```

我将文件包含在`MySQL connector jar`文件`web-inf/lib`夹下。

有什么建议么？？

# javascript - 来自 JS 的 Simperium 和二进制（图像/视频）资产文件

> ID：11863512
> 
> 赞同：1
> 
> 时间：2012-08-08T11:26:17.717
> 
> 标签：javascript, mobile, simperium

Simperium 看起来是一种跨各种平台同步数据并处理来自移动设备的在线/离线访问的绝佳方式。

对于我正在处理的一个项目，一些数据是生成的图像和视频文件的形式。我找不到有关是否可以通过 Simperium 同步此类数据的任何信息（我想我可以对图像进行 base64 编码，但它似乎是一个 hack）。

还是我需要同步 URL，然后手动下载这些资源并以某种方式将它们存储在本地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:15:58.730

Simperium 对 iOS 端的二进制文件有基本支持，目前正在测试中。这在 JavaScript 库中尚不可用，但它将可用。它的工作方式与您描述的类似。在有意义的情况下，Simperium 可以处理 URL 及其相关二进制内容的同步。

在 iOS 上，二进制文件存储到本地文件系统（尽管如果您愿意，小文件确实可以存储为 base64 编码字符串）。

在 JavaScript 中，如果您在客户端工作，鉴于浏览器施加的存储限制，情况不太清楚，但您始终可以选择同步和使用标准链接，具体取决于您尝试执行的操作。在服务器端，当然还有更多的选择。如果您有一些用例要分享，您应该[联系](http://simperium.com/contact/)我们。

# asp.net - 如何改善我的俯卧撑过程

> ID：11863516
> 
> 赞同：0
> 
> 时间：2012-08-08T11:26:40.047
> 
> 标签：asp.net, ftp

目前，为了实时推送我的网站，我使用 FileZilla 通过 FTP 将文件上传到服务器。如果用户在我推送网站 DLL 时重新加载网站，他们会收到一种`File is being used by another process`错误。

有没有更好的 pushover 技术可以用来解决这个问题，或者任何通常比在 FTP 客户端上传我的网站更好的技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:51:39.490

在部署新站点时，您始终可以上传 app_offline.htm 文件。如果您在 asp.net 应用程序中执行此操作，则无论他们尝试加载/重新加载哪个页面，用户都将被定向到 app_offline.html 文件。当您准备好让他们再次访问该站点时，您只需删除/删除/重命名文件（我通常只是重命名它，因此只需简单的重命名即可使站点恢复到离线模式）。

[http://weblogs.asp.net/dotnetstories/archive/2011/09/24/take-an-asp-net-application-offline.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/09/24/take-an-asp-net-application-offline.aspx)

# java - MAVEN，如何根据环境删除JSP页面

> ID：11863518
> 
> 赞同：2
> 
> 时间：2012-08-08T11:27:00.093
> 
> 标签：java, jsp, maven

我正在使用`mvn clean install -Dlifecycle=dev`. 所以我有变量`lifecycle`。

现在我的要求是，当我为其创建构建文件时，`UAT/PROD`它必须`jsp(index.jsp)`从包中排除一个。我的 jsp 位于与资源平行的 webApps 目录中。

我认为`profile`仅用于一页过滤并不是一个好主意。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:25:32.400

它从一个 JSP 开始。接下来是自定义的 CSS。然后不同的数据库属性...

个人资料是要走的路。只需创建一个，[将其激活设置为变量的值，](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)使用 JSP 创建另一个源文件夹并将其添加到配置文件中的资源中。

所以：

*   在您的项目文件夹中创建一个文件`src/dev/webapp`夹（因此它与 平行`src/main/webapp`）
*   向您添加`pom.xml`配置战争插件的配置文件

```
<profiles>
    <profile>
        <activation>
            <property>
                <name>lifecycle</name>
                <value>dev</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.2</version>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/dev/webapp</directory>
                            </resource>
                        </webResources>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

当变量设置为时，这会将资源从`src/dev/webapps`合并的目标文件夹复制到。`lifecycle``dev`

即使这些是用于复制单个文件的相当多的 XML 行，我认为在使用 Maven 时使用不同的方式（例如使用删除文件的插件）也不是一个好主意。虽然您可以自定义 Maven 构建以使其不再可识别，但整个想法是使用约定，以便其他人可以轻松阅读该过程。

# qt - 调整移动 QML 应用程序的大小

> ID：11863519
> 
> 赞同：0
> 
> 时间：2012-08-08T11:27:02.673
> 
> 标签：qt, qt4, resize, qml, qtdeclarative

我正在开发一个在 Fremantle (N900) 上运行 Harmattan (N9) 应用程序的程序。问题之一是分辨率差异。

N900 有 800x480 屏幕和 N9 854x480。因为这部分画面被切断了。

我可以愚弄（某事），让它认为 800px 屏幕包含 854px 并绘制所有元素（所有元素都被绘制成好像 854px 可用）。我知道由于调整一维的大小，形状会不自然，但它比截断布局要好。

这必须在不重新编译的情况下完成，因为我无法访问 N9 的每个应用程序的源代码。我无法编辑 qml 文件，因为它们内置于 qrc

提前致谢

马米斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:44:52.490

If you code for different sizes of screens, you had better not use the raw values of screen dimensions. What you can do is saying that "this item with fill pw% of the width and ph% of the height". It will be automatically resized with the property binding. In your QML code, you can write something like this :

```
MyItem {
    id: my_item
    width: (pw / 100) * screen_width
    height: (ph / 100) * screen_height
    // ...
} 
```

# java - 使用 Android 向服务器发送数据

> ID：11863521
> 
> 赞同：-2
> 
> 时间：2012-08-08T11:27:25.310
> 
> 标签：java, android, json

> **可能重复：**
> [如何通过 Android 请求发送 JSON 对象？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

我需要一个简单的 Android 函数，它将 JSON 对象发送到保存在手机首选项中的 IP 地址。现在，我知道如何使用首选项，我知道 JSON 是如何工作的（理论上），但我不知道如何将它实际发送到服务器。

请注意，在这种情况下，我实际上并不关心安全性、加密或其他任何事情，只是发送一个带有简单数据的简单 JSON 对象，例如“名称”、“纬度”、“经度”、“时间”、“密码” ”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:52:01.353

示例...如果您的网络服务 http url 如下：

[https://stackoverflow.com/questions/11863521.aspx](https://stackoverflow.com/questions/11863521.aspx)

然后输入数据为 [https://stackoverflow.com/questions/11863521.aspx?name=](https://stackoverflow.com/questions/11863521.aspx?name=) "abc"

如果使用 .net 网络服务，我希望这对您有所帮助

# c - C中的'do'关键字

> ID：11863524
> 
> 赞同：4
> 
> 时间：2012-08-08T11:27:40.770
> 
> 标签：c, keyword

`do`是 C 中的一个关键字，我所看到的是它只与`while`. 所以我的问题是可以`do`单独使用而没有`while`.

如果是怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T11:31:45.337

# 不，它不能。

更准确地说，这就是[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/standards.html#9899)所说的：

> ## 6.8.5 迭代语句
> 
> ### 句法
> 
> 迭代语句：
> 
> > `while ( expression ) statement`
> > `do statement while ( expression ) ;`
> > `for ( expressionopt ; expressionopt ; expressionopt ) statement`
> > `for ( declaration expressionopt ; expressionopt ) statement`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:52:41.583

顺便说一句，do 语句最常用于提供一些语法糖并将预处理器宏用作普通 C 函数：

```
#define MY_MACRO_FNC(x) do { whatever(x); } while(0)
/* later in you call this macros as */
MY_MACRO_FNC(x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:42:53.220

do 是在 do-while 循环中使用的关键字。使用 do-while 循环的一般语法是：do{//Logic }while(condition);

# ios - 无法使用 MFMailComposeViewController 在应用程序中发送电子邮件

> ID：11863527
> 
> 赞同：2
> 
> 时间：2012-08-08T11:27:54.083
> 
> 标签：ios, mfmailcomposeviewcontroller

`MFMailComposeViewController`我有一个用于通过电子邮件发送文档的应用程序。我在某处读到我需要启用至少一封电子邮件，以便该方法`[MFMailComposeViewController canSendEmail]`返回 YES 并通过电子邮件发送文档。但是，每当我点击电子邮件按钮时，它所做的只是返回到上一个视图。

我检查了代码并`[MFMailComposeViewController canSendEmail]`返回 NO。谁能告诉我为什么会这样？

这是代码：

```
- (void)sendEmail
{
   if ([MFMailComposeViewController canSendMail] == NO) return;
   NSURL *fileURL = document.fileURL; NSString *fileName = document.fileName;

   NSData *attachment = [NSData dataWithContentsOfURL:fileURL options:(NSDataReadingMapped|NSDataReadingUncached) error:nil];

        if (attachment != nil) 
        {
            MFMailComposeViewController *mailComposer = [MFMailComposeViewController new];

            [mailComposer addAttachmentData:attachment mimeType:@"application/pdf" fileName:fileName];

            [mailComposer setSubject:fileName]; 

            mailComposer.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
            mailComposer.modalPresentationStyle = UIModalPresentationFormSheet;

            mailComposer.mailComposeDelegate = self; 

            [self presentModalViewController:mailComposer animated:YES];

            [mailComposer release];
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:54:35.647

首先添加并导入 MessageUI 框架

```
#import <MessageUI/MessageUI.h> 
```

并声明 MFMaileComposeViewControllerDelegate

```
@interface MailViewController : UIViewController <MFMailComposeViewControllerDelegate> 
```

编写此代码以发送邮件

```
- (IBAction)openMail:(id)sender 
{
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:@"xyz"];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
    [mailer setToRecipients:toRecipients];

    NSData *pdfdata = [NSData dataWithContentsOfURL:"Your URL"]

    [mailController addAttachmentData:pdfData
                             mimeType:@"application/pdf"
                             fileName:@"file.pdf"];

    NSString *emailBody = @"xyz";

    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];

    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                    message:@"Your device doesn't support the composer sheet"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

}

还要写 MFMailComposeViewControllerDelegate 的委托方法

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }

        // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T11:51:28.050

因为您在 iphone 中的邮件应用程序不是身份验证。转到首选项 -> 邮件（或简单地打开邮件应用程序）和来自谷歌或其他服务的身份验证，您可以通过 MFMailComposeViewController 发送电子邮件。（这在真正的 iPhone 上 - 我不在模拟器上尝试）

# model-view-controller - ZF2 DI Setter Injection 不再起作用

> ID：11863528
> 
> 赞同：0
> 
> 时间：2012-08-08T11:28:04.190
> 
> 标签：model-view-controller, dependency-injection, zend-framework2

自早期测试版以来，我在我的 module.config.php 中使用了它：

```
'di' => array(
    'instance' => array(
        'alias' => array(
            'Model' => 'Application\Model\Application',
        ),
        'Application\Controller\IndexController' => array(
            'parameters' => array(
                'Model' => 'Model',
            )
        ),
    ),
), 
```

在 indexController 中有这个：

```
protected $Model;

public function setModel (\Application\Model\Model $Model)
{
    $this->Model = $Model;
} 
```

但自从我从 beta5 更新到 rc2 后它就停止工作了。我在 ZF2 代码和文档中都找不到更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:36:19.587

一个安全漏洞被关闭，改变了 DI 用于控制器的方式。见： [https ://github.com/zendframework/zf2/pull/2005](https://github.com/zendframework/zf2/pull/2005)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:42:01.323

正如@superdweebie 提到的，安全漏洞已经关闭，Di 可以实例化非控制器类。
要继续使用 Di 中的控制器，您必须在 Di 配置中将它们列入白名单：

```
return array(
    'di' => array(
        'allowed_controllers' => array(
            // controllers list goes here
        ),
        //...
    ),
); 
```

另请查看[Marco Pivetta 的这篇博文](http://ocramius.github.com/blog/zend-framework-2-controllers-and-dependency-injection-with-zend-di/)。它解释了如何使用 Di 和控制器。

# java - 在 java 中使用临时密钥库的 2 路 SSL

> ID：11863530
> 
> 赞同：0
> 
> 时间：2012-08-08T11:28:04.390
> 
> 标签：java, ssl, keystore

我有一个自己编写的 java 服务器，它的密钥库中可能有多个密钥（一个用于连接的密钥，另一个用于翻转的密钥，以防第一个过期）所以我尝试读取密钥库，然后构造一个只有一个密钥的临时密钥库当我需要启动服务器时传递给 SSLContext。但是，它似乎不起作用：

在客户端，我得到：

```
javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
sun.security.ssl.Alerts.getSSLException(Unknown Source)
sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)
sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)
sun.security.ssl.SSLSocketImpl.handleException(Unknown Source)
sun.security.ssl.SSLSocketImpl.handleException(Unknown Source)
sun.security.ssl.AppOutputStream.write(Unknown Source)
java.io.BufferedOutputStream.flushBuffer(Unknown Source)
java.io.BufferedOutputStream.flush(Unknown Source)
com.netrust.protocol.ProtocolClient.initialize(ProtocolClient.java:41)
com.netrust.clientregistrar.gui.Client.connect(Client.java:501)
com.netrust.clientregistrar.gui.Client.sendGetDirectoryChangeLog(Client.java:108)
com.netrust.clientregistrar.gui.ServerTreeModel.refresh(ServerTreeModel.java:195)
com.netrust.clientregistrar.gui.ServerTreeModel.refresh(ServerTreeModel.java:333)
com.netrust.clientregistrar.gui.ServerTreePanel.refresh(ServerTreePanel.java:189)
com.netrust.clientregistrar.gui.ClientRegistrarPanel.<init>(ClientRegistrarPanel.java:195)
com.netrust.clientregistrar.gui.Main.runApplication(Main.java:150)
com.netrust.clientregistrar.gui.Main.access$300(Main.java:26)
com.netrust.clientregistrar.gui.Main$1.run(Main.java:64)
java.awt.event.InvocationEvent.dispatch(Unknown Source)
java.awt.EventQueue.dispatchEventImpl(Unknown Source)
java.awt.EventQueue.access$000(Unknown Source)
java.awt.EventQueue$3.run(Unknown Source)
java.awt.EventQueue$3.run(Unknown Source)
java.security.AccessController.doPrivileged(Native Method)
java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
java.awt.EventQueue.dispatchEvent(Unknown Source)
java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
java.awt.EventDispatchThread.pumpEvents(Unknown Source)
java.awt.EventDispatchThread.pumpEvents(Unknown Source)
java.awt.EventDispatchThread.run(Unknown Source) 
```

在服务器端，我得到：

```
javax.net.ssl.SSLException: Received fatal alert: internal_error
sun.security.ssl.Alerts.getSSLException(Unknown Source)
sun.security.ssl.Alerts.getSSLException(Unknown Source)
sun.security.ssl.SSLSocketImpl.recvAlert(Unknown Source)
sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)
sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
com.netrust.server.ManagementSecureConnectionHandler.run(ManagementSecureConnectionHandler.java:96)
com.netrust.util.DynamicThreadPool$WorkerThread.run(DynamicThreadPool.java:295) 
```

相关代码：

```
// marhalAsJKS()
Enumeration< String > aliases = keyStore.aliases();
String alias = null;
java.security.KeyStore jks = java.security.KeyStore.getInstance( java.security.KeyStore.getDefaultType() );
jks.load( null, oldPassword );
while ( aliases.hasMoreElements() )
{
    alias = aliases.nextElement();
    if ( keyStore.isKeyEntry( alias ) )
    {
        jks.setKeyEntry( alias,
                 keyStore.getKey( alias, oldPassword ),
                 oldPassword,
                 keyStore.getCertificateChain( alias ) );
    }
    else if ( keyStore.isCertificateEntry( alias ) )
    {
        jks.setCertificateEntry( alias, keyStore.getCertificate( alias ) );
    }
}
// Constructing ephemeral keystore and truststore
ephemeralKeyStore = managementKeyStore.marshalAsJKS();
ephemeralKeyStore.deleteEntry( PathRegistry.SERVER_KEY_ROLLOVER_ENTRY_ALIAS );
ephemeralTrustStore = managementKeyStore.marshalAsJKS();
ephemeralTrustStore.deleteEntry( PathRegistry.SERVER_KEY_ROLLOVER_ENTRY_ALIAS );
if ( generalConfiguration.isRootServerType() && managementKeyStore.isKeyEntry( PathRegistry.SERVER_KEY_ROLLOVER_ENTRY_ALIAS ) )
    ephemeralTrustStore.setCertificateEntry( PathRegistry.ROOT_CERTIFICATE_ROLLOVER_ENTRY_ALIAS,
                                     managementKeyStore.getCertificate( PathRegistry.SERVER_KEY_ROLLOVER_ENTRY_ALIAS ) );

// Initializing SSL
sslContext = SSLContext.getInstance( "TLS" );
keyManagerFactory.init( getKeyStore(), getKeyStorePassword() );
trustManagerFactory.init( getTrustStore() );
sslContext.init( keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null );
serverSocket = ( SSLServerSocket ) sslContext.getServerSocketFactory().createServerSocket( getPort() ); 
```

类似的问题，但使用 1 路 SSL： [我如何为 Java 服务器提供多个 SSL 证书](https://stackoverflow.com/questions/1788031/how-can-i-have-multiple-ssl-certificates-for-a-java-server)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:31:19.123

`javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty`

这几乎可以肯定来自您使用空信任存储初始化的客户端代码中的信任管理器。

# sql - 如何为此代码编写存储过程

> ID：11863536
> 
> 赞同：0
> 
> 时间：2012-08-08T11:28:31.957
> 
> 标签：sql, sql-server, stored-procedures, split

我有一张桌子`Companiesdata`

```
CREATE TABLE [dbo].[Companiesdata]
(
[Company Name] nvarchar(255),
[Industry] varchar(40),
[ParentId] int NULL,
) 
```

并且行是

```
CompanyName               Industry          Parent ID  
--------------------------------------------------------
Xyz technologies          Software             1
apple Technologies        software             1
Sun network               media                2
abc Technologies          advertising          4
PQR Technnologies         Marketing            5
abc Technologies          Media                4 
```

我还有一张桌子

```
create table dbo.companiesss
(
autoid int identity(1,1),
companyname varchar(max),
Industry  varchar(max)
) 
```

我写了一个这样的程序：

```
create proc pr_getlistofcompaniesss (@tparentid varchar(20))   
as 
begin
   insert into dbo.companiesss(companyname, industry) 
      select  
          [CompanyName], [Industry] 
      from 
          [Companiesdata]
      where 
          parentid in (select items from dbo.split(@tparentid,',')) 
      except
      select company name, industry 
      from dbo.companiesss 
end 
```

输出如下：

```
pr_getlistofcompaniesss 1,2,4 
```

行显示为

```
AutoID    Company name              Industry
---------------------------------------------------
  1       apple Technologies        software
  2       Sun network               Media
  3       xyz Technologies          software
  4       abc Technologies          advertising
  5       abc technologies          media 
```

相反，我的输出应如下所示：

```
pr_getlistofcompaniesss 1,2,4

AutoID    Company name              Industry
---------------------------------------------------
  1       apple Technologies        software
  2       Sun network               Media
  3       xyz Technologies          software
  4       abc Technologies          advertising,media 
```

即如果我有同一个公司（这里`abc technologies`）有不同的行业名称，那么行业字段应该用逗号分隔，在同一行显示记录，即（`advertising, media`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:05:15.187

首先，您需要将这些 ID 一起传递到一个字符串中，而不是作为单独的参数。您的过程只接受一个参数。

```
pr_getlistofcompaniesss '1,2,4' 
```

然后在您的过程中，将您的插入子句更新为以下内容。这会将行业连接成一个以逗号分隔的字符串。

```
insert into dbo.companiesss(companyname,industry) 
select [CompanyName],
       STUFF((select distinct ',' + [Industry]
              from [Companiesdata] as child
              where child.parentid = parent.parentid
              for xml path ('')),
             1, 2, '')
from [Companiesdata] as parent
join dbo.split(@tparentid,',')
    on (parent.parentid = split.items) 
```

我还使用 a`join`与 using`where ... in ( ... )`语法，因为连接通常执行得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:53:16.410

我创建了一个标量函数来实现类似的结果，然后交叉应用该函数您的存储过程。代码如下：

```
CREATE  FUNCTION [dbo].[fnListIndustry] (@ParentID varchar(10))
RETURNS VARCHAR(1000)
AS
BEGIN 
DECLARE @IndustryList   varchar(1000)
SELECT  @IndustryList   = COALESCE(@IndustryList + ',', '') + rtrim(dbo.Companiesdata.Industry)
FROM    dbo.Companiesdata 
WHERE   dbo.Companiesdata.parenid = @ParentID

RETURN  @IndustryList
END 
```

# python - Python/Django 打印循环沿途进度

> ID：11863537
> 
> 赞同：0
> 
> 时间：2012-08-08T11:28:33.557
> 
> 标签：python, wrapper, django-queryset, helpers

有时，在 python 的某个循环中进行长时间运行的测量时，我不知道我的测量何时完成。

所以我需要一个工具来打印一些进展。请看下面我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:28:33.557

大多数情况下，这种测量涉及主循环内部的一些繁重处理，因此我开发了一个简单的包装函数，可以打印任何可迭代的循环进度：

```
from datetime import datetime
def print_progress(iterable, percent_step=1):
    total = float(len(iterable))
    # or 1 means that iterable has < 100 elems
    abs_step = int((total * percent_step)/100) or 1
    for i, obj in enumerate(iterable):
        if i and not i % abs_step:
             print "{0:.2%} processed, {1:%H:%M:%S}".format(i/total, datetime.now())
        yield obj 
```

`percent_step`参数定义打印的粒度级别：每次循环完成处理`percent_step`数据量的百分比时，将处理数据的总百分比打印在屏幕上。

然后可以将此包装器应用于循环：

```
for x in print_progress(my_list):
    # processing
    ... 
```

相同的迭代器可以应用于*django*查询集，但是在循环之前计算总对象计数本身可能很昂贵，因此如果从*PostgreSQL*等数据库中检索所有对象，最好`len`用直接 SQL 替换：

```
"select reltuples from pg_class where relname='%s'" % table_name 
```

### 在指定秒数后打印进度的另一种变体：

```
def print_progress(iterable, second_step=10):
    total = float(len(iterable))
    import time
    time1 = time.time()
    for i, obj in enumerate(iterable):
        if time.time() - time1 > second_step:
             print "{0:.2%} processed".format(i/total)
             time1 = time.time()
        yield obj 
```

# iphone - 如果 uilabel 只有一行，则使用 uiLabel 的第二行

> ID：11863540
> 
> 赞同：0
> 
> 时间：2012-08-08T11:28:51.743
> 
> 标签：iphone, ios, uiview, uilabel

在 iOS 项目中，我正在创建一个具有 2 行文本容量的 UILabel，并且我指定 UILabel 可以包含 2 行。如果文本只有 1 行，如何指定文本写在第二行而第一行为空？

换句话说，我希望文本从下到上写在 UILabel 中。

规格：

UILabel 必须最大为 2 行。

**如果文本只需要 1 行 UILabel，则应该写的行是第二行**

如果文本需要 2 行，则 UILabel 应先用第一行完成，然后再用第二行完成。（通常。它有效）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:32:23.580

利用 ：

```
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0; 
```

# java - 使用 svnclientadapter 提交文件的 java 程序

> ID：11863545
> 
> 赞同：1
> 
> 时间：2012-08-08T11:29:21.940
> 
> 标签：java, svn

我如何使用 Java 程序使用 SvnClientAdapter 提交文件，请提供一些代码片段或文档。由于许可证问题，我无法使用 svkit，或者我可以使用其他一些可以通过 java 程序访问的 svn 客户端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:39:02.713

这是你的指针：[http ://subclipse.tigris.org/source/browse/subclipse/trunk/svnClientAdapter/src/samples/org/tigris/subversion/svnclientadapter/samples/Sample.java?view=log](http://subclipse.tigris.org/source/browse/subclipse/trunk/svnClientAdapter/src/samples/org/tigris/subversion/svnclientadapter/samples/Sample.java?view=log)

示例和文档包含在分发文件中。

# iphone - 为什么 shouldAutorotateToInterfaceOrientation 会被多次调用？

> ID：11863547
> 
> 赞同：0
> 
> 时间：2012-08-08T11:29:28.533
> 
> 标签：iphone, cocoa-touch

我注意到我的视图控制器上的 shouldAutorotateToInterfaceOrientation 被多次调用。

它一定是调用它的设备，因为我不是。

有任何想法吗？

# python - Python2.5 解析包含时区的时间戳字符串

> ID：11863552
> 
> 赞同：0
> 
> 时间：2012-08-08T11:29:48.290
> 
> 标签：python

我正在尝试解析包含时区信息的时间戳字符串。当我在 Python 2.5 上执行以下操作时

```
from datetime import datetime
datetime.strptime("20120805-18:30:00 EST", "%Y%m%d-%H:%M:%S %Z") 
```

我得到：

```
ValueError: time data did not match format:  data=20120805-18:30:00 EST  fmt=%Y%m%d-%H:%M:%S %Z 
```

但是我将“EST”更改为“JST”，该行执行良好（在日本服务器上工作）。我还注意到的另一件事是 time.tzname 返回一个只有“JST”的列表。

有没有办法能够解析所有通常的时区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:34:31.143

您可以尝试为此使用[http://pytz.sourceforge.net/](http://pytz.sourceforge.net/)。标准`datetime`不知道 EST/PST。

# android - 对自定义适配器 GetView 的请求过多。这很平常吗？

> ID：11863556
> 
> 赞同：0
> 
> 时间：2012-08-08T11:29:54.920
> 
> 标签：android, android-layout, android-widget

我有一个自定义适配器，它只绘制一些文本项（每个项目只有一个文本视图）。

在我的测试中，我向适配器添加了 3 个项目，但系统在显示所有内容之前调用了 9 次（请求列表项目 3 次）适配器的 GetView。这很平常吗？系统不应该只调用 3 次 GetView 来绘制完整列表吗？

提前致谢。

# c# - 在滑块上发布事件？

> ID：11863557
> 
> 赞同：1
> 
> 时间：2012-08-08T11:29:58.457
> 
> 标签：c#, windows-phone-7

我正在为油门控件制作滑块控件，当我用手指松开它时，我希望它能够回到起始位置。

我已经尝试过 LostFocus 但该事件需要您单击其他内容...而且可能有问题，因为我有两个滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:09:52.653

ManipulationEnded 事件应该可以解决问题

[MSDN UIElement.ManipulationEnded 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationcompleted%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:40:32.820

您是否尝试过 PreviewMouseUp / PreviewStylusUp 事件？

# python - 如何更改 Vim 中的 Python 颜色？

> ID：11863562
> 
> 赞同：5
> 
> 时间：2012-08-08T11:30:27.577
> 
> 标签：python, vim, vi

谁能告诉我如何在 Vim 中更改 Python 颜色。我已经看过以下语法，但我不确定如何使其永久化。

```
:hi pythonComment ctermfg=2 gui=italic guifg=#408010 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:32:04.717

你可以把它放在你的`.vimrc`文件中。（没有前导`:`，如 favouretti 所述。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T11:49:05.180

vimrc 文件在任何插件之前加载，所以我希望它在初始化过程的后期被覆盖，或者至少在颜色方案更改时被覆盖。最好的方法是将新`hi`命令与`ColorScheme`事件相关联，以便在更改配色方案时自动触发它。

为此，请将其放入您的 vimrc 中：

```
autocmd ColorScheme * hi pythonComment ctermfg=2 gui=italic guifg=#408010 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T22:32:01.790

语法高亮确实属于颜色方案文件，而不是`.vimrc`or `.gvimrc`。在下面找到您当前的颜色方案`~/.vim/colors`，并将您的语句添加到该文件中，不带前导`:`.

# php - Paypal setExpressCheckout nvp 税额错误

> ID：11863563
> 
> 赞同：0
> 
> 时间：2012-08-08T11:30:28.243
> 
> 标签：php, curl, paypal

我正在从 paypal 请求 setExpressCheckout 调用，我收到错误代码 10413。它工作得非常好，直到我从项目总额中扣除税款并将 &PAYMENTREQUEST_0_TAXAMT 添加到请求中。这是请求网址：

```
https://api.sandbox.paypal.com/nvp?
METHOD=setExpressCheckout&VERSION=87.0
&USER=XXXXXXXXXX
&PWD=XXXXXXXXXX
&SIGNATURE=XXXXXXXXXX
&RETURNURL=XXXXXXXXXX
&CANCELURL=XXXXXXXXXX
&L_PAYMENTREQUEST_0_NAME0=Hy+Guardian+Fly+Rug
&L_PAYMENTREQUEST_0_NUMBER0=HY-FLY
&L_PAYMENTREQUEST_0_DESC0=Size%3A+4+ft+6%2C+Size%3A+4+ft+6%2C+Size%3A+4+ft+6%2C+Size%3A+4+ft+6
&L_PAYMENTREQUEST_0_AMT0=47.00
&L_PAYMENTREQUEST_0_QTY0=1
&PAYMENTREQUEST_0_CURRENCYCODE=GBP
&PAYMENTREQUEST_0_ITEMAMT=37.60
&PAYMENTREQUEST_0_SHIPPINGAMT=11.25
&PAYMENTREQUEST_0_TAXAMT=9.40
&PAYMENTREQUEST_0_AMT=58.25 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:47:02.687

根据我的评论，

您的总金额似乎与您的项目总金额不同。

IE

```
&PAYMENTREQUEST_0_CURRENCYCODE=GBP
&PAYMENTREQUEST_0_ITEMAMT=37.60
&PAYMENTREQUEST_0_SHIPPINGAMT=11.25
&PAYMENTREQUEST_0_TAXAMT=9.40
&PAYMENTREQUEST_0_AMT=58.25 
```

显示 58.25

然而

```
L_PAYMENTREQUEST_0_AMT0=47.00 
```

显示 47.00

价格不匹配很可能会导致这个问题；）

# jquery-mobile - 将onClick事件转换为jquery mobile的点击事件

> ID：11863565
> 
> 赞同：1
> 
> 时间：2012-08-08T11:30:36.717
> 
> 标签：jquery-mobile

```
<input type="text" autofocus id="emailid"/>
<input type="button" value="@" id="@"  onclick="insertat()" />

<script type="text/javascript">
  function insertat() {
    emailId.value += "@";
  }
</script> 
```

我有一个文本框和一个带有“@”符号的按钮，单击该按钮会在文本框中插入 @ 符号。但是，onClick 事件似乎响应缓慢并在 Android 平板电脑上显示性能问题。如何使用 jQuery Mobile 将 onClick 事件转换为点击事件。

任何帮助，将不胜感激。

# javascript - Django 使用 JSON 获取模型方法的值

> ID：11863566
> 
> 赞同：0
> 
> 时间：2012-08-08T11:30:38.793
> 
> 标签：javascript, django, json

我目前正在尝试使用 javascript 来显示一个额外的表单字段，如果选择的产品在检查这一点的方法上返回 true。虽然我为表单选择设置了 onchange 部分，但我正在努力实际访问产品方法。我假设我必须使用我没有经验的 json。我希望执行以下操作，即在 if 语句中使用该方法的返回值。我目前尝试使用的代码是（我意识到它只是显示一个警报 atm，但我的首要任务是让它工作）：

```
function openingCheck(optionValue){
    {% check_opening_date as json %}
    var checkOpeningDateJSON = {{json|safe}};

    if(checkOpeningDateJSON)
        alert(optionValue);

}; 
```

哪个用途：

```
@register.tag(name="check_opening_date")
 def check_opening_date(parser, token): 
"""return whether the product should show the opening date or not"""

product = Product.objects.get(pk=productID)

return serializers.serialize('json',product.show_opening_date()) 
```

我遇到的问题是我不确定如何将 optionValue 传递给 check_opening_date 函数以及如何返回 product.show_opening_date() 的值。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:01:23.927

有两种方法。

1.  呈现页面时，将`show_opening_date()`某处的结果与表单选择一起保存。这意味着对于列出的每个产品，您要么在某处创建相应的隐藏输入，要么将结果保存为 select 中的属性或其他内容。选择产品后，您只需使用 javascript 来检查此隐藏输入或属性的值。加载后无需与服务器交互。（总共有一个对服务器的请求）

2.  或者，您只需展示产品。选择一个时，您可以使用 ajax 联系带有产品 ID 的服务器。服务器运行`product.show_opening_date()`并返回带有结果的 json。（对服务器有许多请求；初始请求，以及每次用户选择产品时）

你所拥有的没有意义。请记住，模板（以及所有模板变量和模板标签）是在页面呈现时组装的，因此它们没有任何执行 javascript 的概念（或 onchange 事件等）。您似乎对模板标签的概念有些困惑。这些应该用于模板逻辑以显示已在视图中聚合的信息（通常 - 它不是一成不变的）。

# c# - 如何从反射上下文调用泛型方法？

> ID：11863568
> 
> 赞同：1
> 
> 时间：2012-08-08T11:30:43.453
> 
> 标签：c#, generics, reflection

我有一个`Constraints`对象，它将获得其他对象必须遵守的一组规则。

`constraints`有一个方法叫做`GetEnumValueRange<T>()`where`T`是 Enum 的一种类型。

因此，例如，我可以将枚举定义为：

```
[Flags]
public enum BoxWithAHook
{
    None = 0,
    Thing1 = 1,
    Thing2 = 2,
    ...
    // lots of other things that might be in the box
    ThingN = N
} 
```

然后，我可以获得在给定上下文中有效的一系列值`BoxWithAHook`：

```
var val = constraints.GetEnumValueRange<BoxWithAHook>(); 
```

问题是我正在尝试使用反射来完成这项工作。我不能指定类型是`BoxWithAHook`因为它可以是任何扩展的东西`Enum`。这是我所拥有的一个例子：

```
if (propertyInfo.PropertyType.BaseType == typeof(Enum))
{
    var val = constraints.GetEnumValueRange<>(); // what is the generic type here?

    // now I can use val to get the constraint values
} 
```

我可以指定泛型类型吗？理想情况下，这将起作用：

```
constraints.GetEnumValueRange<propertyInfo.PropertyType>(); 
```

但显然不是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:38:32.333

您可能需要通过`MethodInfo`这里进行一些反思：

```
if (propertyInfo.PropertyType.BaseType == typeof(Enum))
{
    MethodInfo method = typeof(Constraints).GetMethod("GetEnumValueRange");
    MethodInfo genericMethod = method.MakeGenericMethod(propertyInfo.PropertyType);
    var val = genericMethod.Invoke(constraints, null);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:46:13.293

为什么不做一个`GetEnumValueRange`带`Type`参数的重载，所以你最终会得到这样的结果：

```
public class Constraints
{
    public IEnumerable GetEnumValueRange(Type enumType)
    {
        // Logic here
    }

    public IEnumerable<T> GetEnumValueRange<T>()
    {
        return GetEnumValueRange(typeof(T)).Cast<T>();
    }
} 
```

然后你可以简单地使用`constraints.GetEnumValueRange(propertyInfo.PropertyType)`，如果有这样的可用替代方案，我个人会避免反思。

# arrays - 使用 print_r 检查 CodeIgniter 中的未定义变量

> ID：11863571
> 
> 赞同：0
> 
> 时间：2012-08-08T11:30:53.400
> 
> 标签：arrays, codeigniter, view, model, foreach

我在 CI 中有这个错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: news

Filename: controllers/First.php

Line Number: 33

A PHP Error was encountered

Severity: Notice

Message: Undefined variable: news

Filename: views/welcome_view.php

Line Number: 1

A PHP Error was encountered

Severity: Warning

Message: Invalid argument supplied for foreach()

Filename: views/welcome_view.php

Line Number: 1 
```

有我的控制器：

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

   class First extends CI_Controller
   {

    public function __construct()
    {
    parent::__construct();
    $this->load->model('materials_model');
    }    

    public function index()
      {
        $this->load->view('header_view');
        $this->load->view('menu_view');
        $this->load->view('about_me_view');
        $this->load->view('navigation_view');
        $this->load->view('search_view');
        $this->load->view('main_text_view');
        $this->load->view('footer_view');

      }

    public function mat()
    {
       $this->load->model('materials_model');
       $this->materials_model->get();
       $data['news'] = $this->materials_model->get();

       $this->load->view('welcome_view',$news);

       if(empty($data['news']))
       {
        echo'Array is Null';
       }

       else
       {
        echo'Array has info';
       }
    } 
```

我的模型：

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

class Materials_model extends CI_Model
{
    public function get()
    {
        $query = $this->db->get('materials');
        return $query->result_array();
    }

}

?> 
```

我的观点 ：

```
<?php foreach ($news as $one):?>
<?=$one['author']?>
<?php endforeach; ?> 
```

我知道，我传递到视图中的那个数组不是 NULL（我检查它的 print_r 和 if，否则构造），但我可以传递它并查看它。我有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:05:36.040

在控制器中，您需要传递数据而不是新闻

```
$data['news'] = 'Something';
$this->load->view('welcome_view',$data); 
```

在您看来，您可以使用

```
foreach($news as $new)
{
   //Go Here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:33:22.843

```
$this->load->view('welcome_view',$news); 
```

`$news`从未定义。也许你的意思是使用`$data`？，CI 视图期望一个 assoc 数组被传递给它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:38:32.777

设置变量：

```
$data['news'] = $this->materials_model->get(); 
```

将其传递给视图：

```
$this->load->view('welcome_view', isset($data) ? $data : NULL); 
```

在视图中作为结果数组访问它：

```
<?php 
    foreach($news as $item)
    {
        echo $item['id']." - ".$item['some_other_column_title']
    } 
?> 
```

* * *

作为一个选项，您可以更改模型中的 get() 方法以返回对象，而不是数组。

```
public function get()
{
    $query = $this->db->get('materials');
    return $query->result();
} 
```

然后在视图中您需要将 $news 作为对象处理，如下所示：

```
<?php 
    foreach($news as $item)
    {
        echo $item->id." - ".$item->some_other_column_title
    } 
?> 
```

# javascript - 使用参数从视图调用操作

> ID：11863573
> 
> 赞同：0
> 
> 时间：2012-08-08T11:31:03.550
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个文本框和一个按钮，当单击按钮时，我想从控制器调用一个动作并将文本框值作为参数传递。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:45:52.970

取决于您到底想做什么，在一般情况下，我建议您将视图设为强类型（对您的模型），并在视图中使用表单。这是一个向您展示如何操作的示例（从视图中调用 AddPerson 方法）：

视图“AddPerson”

```
@model MvcApplication.Models.Person
//You can pass in the actionName and the controllerName as parameters to the method BeginForm()
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
} 
```

“人”控制器中的动作

```
[HttpPost]
public ActionResult AddPerson(Person person)
{
    // The code
    return View("OperationEndWithSuccess");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:38:59.297

你必须通过javascript来做到这一点，无论是标准的还是更可能的，jQuery。

这里有很多关于此类功能的示例，搜索 $ajax 和 mvc 文本框值。

例子：

```
$(function () {
    var txtBoxValue = $('#yourTextboxId').val();
    $.ajax({
      url: '@Url.Action("Youraction", "Yourcontroller")',
      data: { id: txtBoxValue },
      success: function(data) {
        $('.result').html(data);
        alert('Load was performed.');
      }
    });    
}); 
```

**[编辑]** - 根据用例（您未指定），您当然可以将文本框包装在表单标签中并以“正常”方式提交，从而捕获文本框“名称”和“值”在 action 的 formcollection 中。

# emacs - Emacs：自动将 LaTeX 替换为 Unicode 符号

> ID：11863576
> 
> 赞同：17
> 
> 时间：2012-08-08T11:31:11.840
> 
> 标签：emacs, unicode, latex, elisp, org-mode

在 Emacs 中，我在编写数学教科书的理论总结时经常使用数学符号。我使用 org-mode 来构建信息，并且我知道至少有两种输入特殊符号的方法：

1.  使用[嵌入式 LaTeX](http://orgmode.org/manual/Special-symbols.html#Special-symbols)：在表格中输入其表示形式，`\land`然后按`C-c C-x \`( `org-toggle-pretty-entities`) 以逐字查看；
2.  使用`C-x 8 RET`( `insert-char`)。

但是，我希望它以下列方式运行：我输入 LaTeX 表示形式，它会自动转换为物理 Unicode 形式（缩写？）。是否有一个包，如果没有，我应该写什么 elisp 来实现这种行为？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-08T12:50:34.180

`M-x` `set-input-method` `RET` `TeX`听起来像你想要的。

通过执行`M-x` `describe-input-method` `RET` `TeX`（或其绑定`C-h I`）查看可用符号。

如果您想经常使用它，您可以自定义变量`default-input-method`并将其设置为`TeX`. 这样，您可以在需要的任何缓冲区中使用`C-\`(for ) 激活输入法。`toggle-input-method`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T20:39:54.900

还有[latex-pretty-symbols](https://bitbucket.org/mortiferus/latex-pretty-symbols.el/src)，它可能不那么花哨。

# sql-server - 要列出的实体框架非常大的表

> ID：11863578
> 
> 赞同：0
> 
> 时间：2012-08-08T11:31:21.893
> 
> 标签：sql-server, entity-framework

我的 Microsoft SQL 服务器中有一个大约 11,450,112 行的表，我正在尝试使用此命令：

contex.TableName.ToList();

问题是因为表太大，VB2010 抛出“OutOfMemory”异常。

我在想也许有一个命令可以将查询分离到页面或类似的东西中。

任何想法或任何帮助都会对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:34:37.920

您可以使用 Entity Framework 轻松进行分页，

```
contex.TableName.Skip(pages*pageSize).Take(pageSize).ToList(); 
```

在客户端，您需要实现一些分页机制来根据用户输入传递`page`和参数。`pageSize`

[这](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)是一个教程

# android - 显示 ListView 项下的按钮（滑动操作）

> ID：11863581
> 
> 赞同：1
> 
> 时间：2012-08-08T11:31:30.130
> 
> 标签：android, listview, android-layout

我想将按钮放在一个`ListView`项目下，如[Android Patterns - Swipe for action中所述](http://www.androidpatterns.com/uap_pattern/swipe-for-action)

我用`Slide_out_Left`和`Slide_out_rigth`动画来`slide out` `ListView`.
当动画结束时，我做 `Invisible(View.GONE)`

```
l.getChildAt(position - l.getFirstVisiblePosition()).startAnimation(animationSlideOutLeft);

public void onAnimationEnd(Animation animation) {
    lv.getChildAt(pos - lv.getFirstVisiblePosition()).setVisibility(View.GONE);
} 
```

如何在每个`ListView`项目下放置两个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:43:10.433

为按钮添加单独的 .xml 视图，然后在单击项目时调用视图切换器。

关于视图切换的一切都在这里：http: [//developer.android.com/reference/android/widget/ViewSwitcher.html](http://developer.android.com/reference/android/widget/ViewSwitcher.html)

# freeze - IIS Express 冻结 windows xp

> ID：11863586
> 
> 赞同：0
> 
> 时间：2012-08-08T11:31:44.343
> 
> 标签：freeze, iis-express

我有 Windows xp sp3、Visual Studio 2010 sp1、IIS Express 7.5 和 IE8。在 VS 2010 中，我将 IIS Express 用于新的基于文件的网站和项目。

每当我从 VS 开始调试时，它都会打开 IE 空窗口，然后一切都冻结了。唯一的选择是关闭计算机。

IIS 默认站点的绑定 – applicationhost.config 文件中的 WebSite1 设置为

// 绑定协议="http" bindingInformation=":8080:localhost"//

如果我从命令提示符启动 IIS Express，常见结果如下：

1) 如果我从任务栏中的 IIS Express 图标 - iisexpresstray 启动 Website1，大多数时候我会收到带有消息“Internet Explorer 无法显示网页”的 IE 窗口。从博客文件中，我可以看到唯一不寻常的事情是 Client-IP 和 Server-IP 以 IPv6 格式“::1”给出</p>

在所有其他时间，一切都冻结了，既没有记录在博客文件中，也没有记录在网络跟踪文件中。此外，windows 事件查看器没有任何与此事件相关联的记录事件。

2) 如果我尝试直接从 IE http://localhost:8080/ 打开 Website1，大多数情况下网站都可以正常打开。从博客文件中，我发现 Client-IP 和 Server-IP 被指定为 127.0.0.1。

有时我得到“Internet Explorer 无法显示网页”，并且博客文件再次将 IPv6 格式的 Client-IP 和 Server-IP 显示为“::1”。

有时它会像上面那样冻结窗口，无论是在 weblog 文件、web 跟踪文件还是 windows 事件查看器中都没有任何痕迹。

有什么想法吗？请记住，我对这些事情的了解有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:41:56.643

您可以尝试两件事：

1) 禁用网卡的 IPv6 功能（假设您实际上没有使用 IPv6）。这可以通过网上邻居和访问您的卡的设置来完成。

2) 尝试在不同的端口上运行 IIS，看看行为是否仍然存在。根据您机器的配置，可能有一些东西已经在端口 8080 上侦听，并且没有被干净地处理。

当我第一次开始使用 IIS Express 时遇到了一些类似的问题，我会通过让它在非标准端口上运行以进行测试来解决这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:31:09.587

在我看来，问题出在路由链的某个地方。链中的某些链接（如果它能够使窗口崩溃，则显然是重要的！）不理解 IPv6 语法。我既没有技能也没有时间对此进行进一步调查，但至少我想出了解决方法。

这个想法是迫使每个人都使用 IPv4 符号而不是 IPv6 符号。

```
 1) In Visual Studio 2010 SP1 open project’s properties page
    2) Select “Web” tab. 
    3) In the “Servers” area select “Apply server settings to all 
    users (store in project file)”, 
    4) Select “Use Local IIS Web server”, 
    5) Select “Use IIS Express” 
    6) In the Project Url text box enter 
    http://127.0.0.1:8081 
    instead of 
    http://localhost:8081 . 
```

或检查并最终手动更改：

```
 1) In C:\...\My Documents\IISExpress\config\ applicationhost.config replace
    <binding protocol="http" bindingInformation="*:8081:localhost" /> 
    with
    <binding protocol="http" bindingInformation="*:8081:127.0.0.1" />

    2) Also in Visual studio project file *.csproj replace
    <IISUrl>http://localhost:8081/</IISUrl> 
    with
    <IISUrl>http://127.0.0.1:8081/</IISUrl>. 
```

# php - 获取两种语言的字符串的唯一值

> ID：11863589
> 
> 赞同：1
> 
> 时间：2012-08-08T11:31:49.167
> 
> 标签：php, asp.net, string, codeigniter

我需要在**Asp.net/PHP 上创建一个应用程序 [都欢迎]**

用户可以使用`arabic`用户名或`English`用户名注册。

说用户使用`English`用户名注册`A`，

因此，当另一个用户尝试注册的`Arabic`版本时，`A`我需要拒绝它。

怎么可能？

有没有办法让两者都获得独特的价值`A`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:36:54.503

只需操作[unicode](http://en.wikipedia.org/wiki/Unicode)字符串。例如，一个不错的编码选择是 UTF-8。

您应该只在整个程序中操作 unicode 字符串，以避免在用户输入特殊字符时某些字符出现乱码的问题。

如果您想要做的是将字符串与一些被认为等效的字符进行比较，例如英语和希腊语，A 将等同于 alpha，那么您需要构建一个等价列表，并将字符串转换为数字序列，其中每个数字是原始字符串中字符的等价类的编号。

最快的方法是在 PHP 中构建一个像这样的字典（键/值对）：

```
equiv=array('a'=>1, 'i'=>1, 'u'=>1, 'alif'=>1, 'b'=>2, 'baa'=>2, ...); 
```

您将在其中替换`'alif'`和`'baa'`unicode 中的实际阿拉伯字符。

然后，转换字符串：

```
transformed=array_map(function($c) { return $equiv[$c]; }, str_split($str)); 
```

然后比较两个转换后的字符串。

这称为整理，也可用于不区分大小写的字符串比较（`'ab'`等同于`'AB'`）。

除了使用数字来识别字符类别之外，人们还可以选择使用一个字符作为其类别的代表个体。然后你会做：

```
function fold_char($c) {
    return array_key_exists($c, $equiv) ? $equiv[$c] : $c;
}
equiv=array('a'=>'a', 'A'=>'a', 'i'=>'a', 'I'=>'a', 'u'=>'a', 'U'=>'a' 'alif'=>'a', 'b'=>'b', 'B'=>'b'  'baa'=>'b', ...);
transformed=implode('', array_map(fold_char, str_split($str)); 
```

这会将带有字符的字符串转换`'a'` `'B'` `'U'`为，将带有字符, ,`'aba'`的字符串转换为，因此它们将被认为是等效的。`'alif'``'baa'``'alif'``'aba'`

然后，您可以将转换后的字符串与用户名一起存储在数据库中，以快速检查给定的用户名是否已经存在。

我知道一些数据库引擎允许您定义自己的整理序列（基本上是`equiv`上面的数组），但这将是另一个问题的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:59:17.550

我认为您将需要找到一种不同的方法，因为无法将任何任意字符串唯一地音译为字母表。特别是在使用元音的拉丁字母和使用变音符号的阿拉伯字母之间。

有几种方法可以用阿拉伯语呈现几乎任何拉丁字符串。您有英语 V，通常音译为 ف 或 ٻ。阿拉伯语 خ 和 ذ 等也可以用多种方式用英语书写。这只是我在努力记住我在高中学到的阿拉伯语。

简而言之，您必须建立一个启发式数据库，该数据库可以猜测给定的阿拉伯语或英语字符串，该字符串在另一个字母表中的所有可能排列 - 而且您仍然会不断对您的用户的变化感到惊讶会想出。

# c# - 列出数据表并添加列

> ID：11863590
> 
> 赞同：1
> 
> 时间：2012-08-08T11:31:52.797
> 
> 标签：c#, asp.net, list, datatable

我有通用列表...我正在尝试将其转换为数据表。

我正在使用下面的代码..

```
private DataTable ToDataTable<T>(List<T> items)
{
        var tb = new DataTable(typeof(T).Name);

        PropertyInfo[] props = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Instance);

        foreach (PropertyInfo prop in props)
        {
            Type t = GetCoreType(prop.PropertyType);
            tb.Columns.Add(prop.Name, t);
        }

        foreach (T item in items)
        {
            var values = new object[props.Length];

            for (int i = 0; i < props.Length; i++)
            {
             values[i] = props[i].GetValue(item, null);

            }

            tb.Rows.Add(values);
        }

        return tb;
} 
```

我需要在该数据表中添加另一列，例如`StatusText`。

该数据表中已经有一个名为 的列`Status`。

如果此列为 0`StatusText`则应为`Active`，否则为 1`StatusText`则为`Inactive`

就像我的代码当前返回下表一样...

```
Id   Name  Status
------------------
1    Test   1
2    Test1  0
3    Test2  0 
```

但是，我怎样才能生成如下表？

```
Id   Name  Status  StatusText
------------------------------
1    Test   1       InActive
2    Test1  0       Active
3    Test2  0       Active 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:36:33.540

试试这个

```
DataTable dt = ToDataTable(your list); // Get DataTable From List

dt.Columns.Add(new Column("StatusText", typeof(string))); // Add New Column StatusText

//Iterate All Rows 
foreach(DataRow row in dt.Rows)
{
   //Check Status value, and set StatusText accordingly. 
   row["StatusText"] = int.Parse(row["Status"])==1 ? "InActive" : "Active";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:41:48.250

只需将其添加到您的类定义中：

```
 public string StatusText
   {
    get
    {
       if(status == 0)
          return "Active";
       else
          return "InActive";
     }
   } 
```

# arrays - 如何在cassandra中存储多维数组

> ID：11863595
> 
> 赞同：4
> 
> 时间：2012-08-08T11:32:11.517
> 
> 标签：arrays, cassandra, cql, pycassa

我想在 cassandra 中存储类似数组的对象，但我还需要使用 cql 访问每个元素，因此我需要构建索引。不幸的是，数组的大小是动态的（但不是维数，它们是预定义的）。存储数组的最合适方法是什么：

`matrix[x][y][z]`

因此，如果它是一个一维 ( `vector[n]`) 数组，那将非常简单。我想超级列是合适的，比如

```
{key=1000 , 
    { 'matrix[]' : {
            key=0, {value:10),
            key=1, {value:33),
            ...
            key=n, {value:x)
        }
    }
}` 
```

多维数组 ( `matrix[x][y][z]`) 有点复杂，我会将它们存储为：

```
{key=1000,
    { 'matrix[ ][ ][ ]' :
        {
            key=0, {x=0, y=0, z=0, value:10),
            key=1, {x=0, y=0, z=1, value:33),
            ...
            key=whatever, {x=m, y=n, z=o, value:10),
        }
    }
} 
```

但在这两种情况下，我都无法弄清楚如何定义 column_validation_classes （我正在使用 pycassa）......

我还尝试使用复合比较器，并将所有内容放在标准列中，例如：

一维：

```
{key=1000,
    {
        ('matrix[ ]', 0) : 10,
        ('matrix[ ]', 1) : 33,
        ...
        ('matrix[ ]', n) : x
    }
} 
```

或多个维度：

```
{key=1000,
    {
        ('matrix[ ][ ][ ]', 0,0,0) : 10,
        ('matrix[ ][ ][ ]', 0,0,1) : 33,
        ...
        ('matrix[ ][ ][ ]', m,n,o) : 10
    }
} 
```

但是对于这种情况，如果我想添加带有其他信息的附加列，我不知道如何适当地定义比较器：

```
{key=1000,
    {
        ('matrix[ ][ ][ ]', 0,0,0) : 10,
        ...
        ('matrix[ ][ ][ ]', m,n,o) : 10,
        'whatever' : 'who cares ...',
        ...
    }
} 
```

此外，我无法弄清楚如何为此构建索引以及如何为复合比较器制作选择语句。

感谢您对我的问题提出任何建议、想法或解决方案；）

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:00:05.983

在 Cassandra 中，您如何存储数据（选择行键和列名）取决于您以后要如何访问它。

如果所有坐标都是整数，那么我建议您使用 CompositeType(LongType, LongType, LongType) 作为列名。

这样您就可以通过某些坐标进行搜索，我将通过将同一列写入以下键来非规范化我的数据（所有维度的示例）

*   DynamicCompositeType(x:LongType)
*   DynamicCompositeType(y:LongType)
*   DynamicCompositeType(z:LongType)
*   DynamicCompositeType(x:LongType,y:LongType)
*   DynamicCompositeType(x:LongType, z:LongType)
*   DynamicCompositeType(y:LongType, z:LongType)

结束了

行 [x]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }
行 [y]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }
行 [z]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }
行 [x,y]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }
行 [x,z]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }
行 [y,z]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }

（所有键都是 [x, y, z] 的幂集的元素）

如果您认为您将始终知道一个点的所有三个坐标，那么您可以围绕所有维度进行存储桶以获得行键。假设您想要 64*64*64 的 3D 矩阵存储桶，您可以将点 [x, y, z] 保存如下：

其中 X = (int) (x/64), Z = (int) (z/64) 和 Y = (int) (y/64)

行 [ X, Y, Z]
=> 列 [x,y,z] : {"stuff":"真的吗？" ... }

作为复合的替代方案，连接字符串工作得很好。如果您这样做，请不要忘记写前导零，否则如果您指望比较器对列进行排序，列的顺序可能会给您带来问题。

数据存储注意事项

至于存储数据，我建议将小型 POJO 序列化放入列中，如果您希望能够使用范围查询恢复元素组，请不要每行保存一个元素。我最喜欢在 Cassandra 列中使用的序列化方法是 Jackson Json to byte 或 protobuf，如果您不介意用它定义所有对象的话。远离超级专栏......远离！或者使用复合列或动态复合列（如果不是所有列都包含相同的格式和数量的字段）

# java - 如何在不同的持久性单元上使用 JPA 和 JUnit 进行测试？

> ID：11863597
> 
> 赞同：0
> 
> 时间：2012-08-08T11:32:14.780
> 
> 标签：java, database, jpa, junit, persistence

我是使用 JUnit 的新手。我想测试一些实现 JPA 的类。但是，我有两个数据库，一个用于测试，另一个用于开发。

通常，测试数据库是干净的。我测试插入、更新、删除等等，但任何时候我都必须将数据库连接切换到测试数据库。

我怎样才能拥有两个持久性单元：一个用于测试，另一个用于开发？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:18:36.660

您可以在 persistence.xml 文件中拥有两个不同的持久性单元，也可以拥有一个，然后创建 EntityManagerFactory 并传入一个覆盖数据库参数的属性映射。

两者的实体/映射可以相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:38:18.347

您需要使用 2 套 spring 配置文件或配置类，并在单元测试中引用测试配置文件。

# c# - 不在的实体数据源

> ID：11863598
> 
> 赞同：0
> 
> 时间：2012-08-08T11:32:20.843
> 
> 标签：c#, sql

我需要正确的语法来完成这项工作。

**编辑：**

XAML：

```
<asp:EntityDataSource ID="EntityDataSource2" runat="server" ConnectionString="name=Entities"
            DefaultContainerName="Entities" EnableDelete="True" EnableFlattening="False"
            EnableInsert="True" EnableUpdate="True" EntitySetName="Plans" AutoGenerateWhereClause="true">
             <WhereParameters>
                <asp:ControlParameter ControlID="tbxSearch" Name="Name" Type="String" />
            </WhereParameters>
</asp:EntityDataSource> 
```

代码背后：

```
if (string.IsNullOrEmpty(tbxSearch.Text))
{
   this.EntityDataSource1.Where = 
     "NOT it.Id IN (SELECT Id FROM Plans_PendingChange) ";//getting all the records instead of getting the proper records
}
else
{
   this.EntityDataSource1.Where = "it.Name =  @Name ";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:53:18.647

尝试使用`NOT it.Id IN`而不是`it.Id NOT IN`这样：

```
this.EntityDataSource1.WhereParameters.Clear();
if (string.IsNullOrEmpty(tbxSearch.Text))
{
   this.EntityDataSource1.Where = "NOT it.Id IN (SELECT Id FROM Plans_PendingChange) ";
}
else
{
   this.EntityDataSource1.Where = "it.Name =  @Name ";
} 
```

# jquery - JSON数据选择仅列出特定键

> ID：11863602
> 
> 赞同：1
> 
> 时间：2012-08-08T11:32:31.143
> 
> 标签：jquery, json, select

这是返回的 JSON 数据：

```
[{"ENERGYUSE":"","EMISSIONFACTOR":2.332,"NAME":"Coal","ID":812,"UNITOFMEASURE":"Metric tons"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002705,"NAME":"Diesel","ID":816,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":26635048.359808,"EMISSIONFACTOR":0.0005703,"NAME":"Electricity","ID":811,"UNITOFMEASURE":"KWH"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002705,"NAME":"Fuel Oil","ID":814,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002328,"NAME":"Gasoline","ID":815,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002603,"NAME":"Jet Fuel","ID":818,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.00269,"NAME":"Kerosene","ID":817,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.001509,"NAME":"LPG\/Propane","ID":813,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":523846.2564,"EMISSIONFACTOR":0.05307,"NAME":"Natural Gas","ID":810,"UNITOFMEASURE":"million BTU"},{"ENERGYUSE":"","EMISSIONFACTOR":0.285618,"NAME":"Wood","ID":819,"UNITOFMEASURE":"Kilograms"},{"ENERGYUSE":"","EMISSIONFACTOR":"","NAME":"Other","ID":808,"UNITOFMEASURE":""}] 
```

我希望仅将 JSON 字符串中的 NAME 和 ID 获取到使用 jquery 的选择列表中。因此，例如，填充时选择看起来像这样：

```
<select id="EnergyList" name="EnergyList">
 <option value="813">Nataural Gas</option>
 <option value="812">Coal</option>
  etc etc...
</select> 
```

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:55:57.143

使用 jQuery，您可以根据解析的 json 源动态附加选项。

```
var items = JSON.parse(jsonSource);

var $selectElement = $("#EnergyList");

$(items).each(function(){
    var newOption = '<option value="' + this.ID + '">' + this.NAME + '</option>';
    $selectElement.append(newOption);
}); 
```

查看工作[**演示**](http://jsfiddle.net/y4m4b/)

根据 ankur 对优化的评论，请参阅下面更优化的版本：

```
var items = JSON.parse(jsonSource);

var $selectElement = $("#EnergyList");
var newOptions = '';

for(index = 0; index < items.length; index++)
{
    newOptions += '<option value="' + items[index].ID + '">' + items[index].NAME + '</option>';
}

$selectElement.append(newOptions); 
```

查看工作优化[**的演示**](http://jsfiddle.net/y4m4b/1/)

纯粹为了优化主题的完整性，请参阅所有 4 种变体的测试结果，比较单个附加与附加完整集。`for loop`正如 ankur 指出的那样，偏离路线并附加完整的集合执行速度最快。

jsPerf[**测试结果**](http://jsperf.com/for-vs-each-and-append-single-vs-complete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:50:06.207

像这样的东西？？

```
var Url = "/feedpage.aspx";
var jsonObjectInstance = $.parseJSON(
    $.ajax({
         url: Url,
         async: false,
         dataType: 'json'
        }
    ).responseText
);
var str ='<select id="EnergyList" name="EnergyList">';

for (var i = 0; i < jsonObjectInstance.length; i++) {
 str += '<option value="'+jsonObjectInstance[i].ID+'">'+jsonObjectInstance[i].NAME+'</option>'; 
}
str+='</select>';
$("#divToInsertIn").html(str); 
```

笔记：

您可能已经拥有获取数据部分..而且我没有特别原因使用异步来获取数据....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:52:58.360

如果您的脚本仍然返回 JSON 数据，您可以让 jQuery 直接为您解析它：

```
$.getJSON({
    url: yourAjaxUrl,
    data: yourData,
    success: function(jsonData) {
        insertOpts(jsonData);
    }
});

var insertOpts = function(data) {
    var $select = $('yourSelect').clone(true); // clone the select box
    $.each(data, function(i, obj) { // generate all the options temporarily in jQuery
        var $option = $select.append('<option />');
        $option.val(obj.ID).text(obj.NAME);
    });
    $('yourSelect').replaceWith($select); // replace the existing select with its manipulated clone
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:37:39.847

您可以使用`JSON.parse(data)`, 将 JSON 字符串转换为 Object。然后`JsonObj.Name`，`JsonObj.ID`或者你需要的任何东西，你都可以从对象中获取。

对于您的代码

```
var jsonObj = JSON.parse(yourJson);
var optionTemplate = '<option value = "@@ID@@">@@NAME@@</option>';
var finalTemplate = '';
$.each(jsonObj, function(){
    tmp = optionTemplate;
    tmp = tmp.replace("@@NAME@@",this.NAME).replace("@@ID@@",this.ID);
    finalTemplate += tmp;
});
finalTemplate = '<select id = "EnergyList" name = "EnergyList">' + finalTemplate + '</select>';
console.log($(finalTemplate)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:56:51.777

```
json=[{"ENERGYUSE":"","EMISSIONFACTOR":2.332,"NAME":"Coal","ID":812,"UNITOFMEASURE":"Metric tons"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002705,"NAME":"Diesel","ID":816,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":26635048.359808,"EMISSIONFACTOR":0.0005703,"NAME":"Electricity","ID":811,"UNITOFMEASURE":"KWH"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002705,"NAME":"Fuel Oil","ID":814,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002328,"NAME":"Gasoline","ID":815,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.002603,"NAME":"Jet Fuel","ID":818,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.00269,"NAME":"Kerosene","ID":817,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":"","EMISSIONFACTOR":0.001509,"NAME":"LPG\/Propane","ID":813,"UNITOFMEASURE":"Liters"},{"ENERGYUSE":523846.2564,"EMISSIONFACTOR":0.05307,"NAME":"Natural Gas","ID":810,"UNITOFMEASURE":"million BTU"},{"ENERGYUSE":"","EMISSIONFACTOR":0.285618,"NAME":"Wood","ID":819,"UNITOFMEASURE":"Kilograms"},{"ENERGYUSE":"","EMISSIONFACTOR":"","NAME":"Other","ID":808,"UNITOFMEASURE":""}]
 $("#EnergyList").empty()
 $.each(json,function(i,o),function(){
   $("#EnergyList").append('<option value="'+o.ID+'">'+o.NAME+'</option>')  
 }) 
```

# php - 页面重定向后在 session_start() 上删除的会话数据

> ID：11863606
> 
> 赞同：5
> 
> 时间：2012-08-08T11:32:40.483
> 
> 标签：php, mysql

**经过大量调试后，问题似乎（令人尴尬）出在我的数据库会话代码中，而不是典型的会话问题。[你可以在这里](https://stackoverflow.com/a/11866152/833660)看到我的回答- 谢谢**

* * *

我知道这可能是类似问题的重复（例如[one](https://stackoverflow.com/questions/9366343/redirect-not-working-with-headerlocation-and-session-variable) , [two](https://stackoverflow.com/questions/11397418/session-variables-lost-after-header-redirect) , [three](https://stackoverflow.com/questions/8910750/php-session-not-working)），但是尽管遵循了似乎是最佳实践的方法，但我仍然遇到问题。

当使用 session_set_save_handler() 来使用我的数据库会话类时，会话数据在从 session1.php 重定向后在 session2.php 开始时被清除。

我的观察概述：

*   数据在 session1.php 中正确保存到数据库中
*   session2.php 中的 session_start() 数据丢失
*   在重定向之后和 session2.php 中调用 session_start() 之前，数据仍在数据库中
*   会话 ID 保持不变，并存储在 cookie 中，该 cookie 在请求标头中正确发送回服务器
*   使用 PHP 的默认 Session 处理可以正常工作

并注意：

*   在 header() 之后使用 exit()
*   session_start() 在输出前的每一页

我犯了一个愚蠢的错字吗？犯了一个愚蠢的错误？或者这是一个奇怪的怪癖？

提前感谢您提供的任何帮助。

这是代码（在修复此问题时提取到测试文件中）：

**session1.php**

```
<?php

require_once('session.php');

session_start();  

$_SESSION['KEY'] = 'VALUE PHPSESSID: ' . session_id();

session_write_close();   
header('Location: session2.php');
exit; 
```

**session2.php**

```
<?php

require_once('session.php');

session_start();

// Nothing?
var_dump( $_SESSION ); 
```

**会话.php**

```
<?php

define( "DB_HOST", 'localhost' );
define( "DB_USER", '******' );
define( "DB_PWD", '******' );
define( "DB_NAME", '******' );

require_once('class/DatabaseSessionHandler.php');

// Use the DatabaseSessionHandler class to handle sessions
$session_handler = new DatabaseSessionHandler;
// Set up the handler above as the default session handler
session_set_save_handler(
    array($session_handler, 'open'),
    array($session_handler, 'close'),
    array($session_handler, 'read'),
    array($session_handler, 'write'),
    array($session_handler, 'destroy'),
    array($session_handler, 'gc')
); 
```

**数据库会话处理程序.php**

```
<?php

class DatabaseSessionHandler
{

    protected $connection;
    protected $session_life_time;

    public function __construct()
    {
        // Ensure that everything is closed correctly as 
        // per warning on http://uk3.php.net/session_set_save_handler
        register_shutdown_function( 'session_write_close' );
    }

    public function open( $save_path, $session_name )
    {
        $this->connection = new mysqli( DB_HOST, DB_USER, DB_PWD, DB_NAME );
        $this->session_life_time = get_cfg_var( "session.gc_maxlifetime" );

        if ( $this->connection->connect_error )
            return false;

        return true;
    }

    public function close()
    {
        $this->connection->close();
        return true;
    }

    public function read( $session_id )
    {
        $data = '';

        $statement = $this->connection->prepare( "SELECT `session_data` 
                                                  FROM `session` 
                                                  WHERE `session_id` = ? " );
        $statement->bind_param( "s", $session_id );
        $statement->execute();
        $statement->bind_result( $data );

        return (string) $data;
    }

    public function write( $session_id, $session_data )
    {
        $expiry_time = time() + $this->session_life_time;
        $statement = $this->connection->prepare( "REPLACE INTO `session` 
                                                (`session_id`, `session_data`, 
                                                `expiry_time`)
                                                 VALUES (?, ?, ?)" );
        $statement->bind_param( "ssi", $session_id, $session_data, $expiry_time );

        if ( !$statement->execute() )
            return false;

        return true;
    }

    public function destroy( $session_id )
    {
        $statement = $this->connection->prepare( "DELETE FROM `session` 
                                                    WHERE `session_id` = ?" );
        $statement->bind_param( "s", $session_id );

        if ( !$statement->execute() )
            return false;

        return true;
    }

    public function gc( $max_lifetime )
    {
        $current_time = time();
        $statement = $this->connection->prepare( "DELETE FROM `session` 
                                                    WHERE `expiry_time` < ?" );
        $statement->bind_param( "i", $current_time );

        if ( !$statement->execute() )
            return false;

        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:02:35.767

您清除的会话数据少于当前时间。它应该是当前时间 - max_lifetime

这是解决方案

```
public function gc( $max_lifetime )
{
    $current_time = time() - $max_lifetime;
    $statement = $this->connection->prepare( "DELETE FROM `session` 
                                                    WHERE `expiry_time` < ?" );
    $statement->bind_param( "i", $current_time );

    if ( !$statement->execute() )
            return false;

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:00:20.767

在大量的文件记录和打印出变量之后（一些会话函数在发送到浏览器的输出后被调用，因此你不能以正常方式输出错误）原来问题出在我的数据库会话代码上.

在将 MySQLi 输出绑定到变量后，我忘记添加 '$statement->fetch()'，因此我从未真正从数据库中获取数据。

这是一个令人尴尬的错误，但它让你明白了一个事实，即如果你的软件有问题，通常是你的代码有问题，而不是你正在使用的语言或库。

感谢那些评论和回答的人，因此在过去的几天里我学到了很多关于 PHP 会话的知识。

# javascript - 在 ASP.NET 图像控件中预览图像

> ID：11863607
> 
> 赞同：0
> 
> 时间：2012-08-08T11:32:43.033
> 
> 标签：javascript, asp.net

我想在上传后立即预览图像。我正在使用 ASP.NET FileUpload 控件，这就是我到目前为止所做的。

```
 <script type="text/javascript">
    function callPostBack() {
        var uploadControlFileUploader = document.getElementById('<%=   FileUploadThumbnailImage.ClientID%>');
            var path = uploadControlFileUploader.value; alert(path);
            document.getElementById("ImageThumbnail").src = path;

            return false;

    }
</script> 
```

当我在 localhost 中运行此代码时，它工作正常。但是当我在 iis 中发布它时它不起作用。我想使用 javascript 来做到这一点。谁能帮助我（ImageThumbnail 是我的预览按钮的 ID）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:13:05.747

您可以从这里获得解决方案 -
[http://forums.asp.net/t/1740831.aspx/1?Preview+Image+before+upload+](http://forums.asp.net/t/1740831.aspx/1?Preview%20Image%20before%20upload%20)

也看看这里

[在客户端上传和预览图像而不发回](https://stackoverflow.com/questions/3028727/upload-and-preview-image-in-client-side-without-posting-back)

# jquery - jquery - 如何制作高亮功能

> ID：11863612
> 
> 赞同：-3
> 
> 时间：2012-08-08T11:33:07.087
> 
> 标签：jquery

我有一个导航，其中一个按钮需要突出显示！

它需要`font-weight: 600;`在**2 秒**后返回`font-weight: 0;`并一直重复 - “字体粗细”更改之间的时间为 2 秒。如何做一个循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:40:05.710

就`toggleClass()`在一个`interval`：

## *[jsBin 演示](http://jsbin.com/ecasiw/2/edit)*

CSS：

```
.bolded{
  font-weight:600;
} 
```

jQuery：

```
function toggleBold(){
  $('a.active').toggleClass('bolded');
}

setInterval(toggleBold, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:40:52.417

```
function changeFontWeight() {
 var fontWeight = $('#buttonID').css('fontWeight');
 if(fontWeight == '600') { 
   $('#buttonID').css('fontWeight', 0);
 } else { 
   $('#buttonID').css('fontWeight', 600);
  }
}

 setInterval(changeFontWeight,2000) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T11:38:10.817

```
setInterval("var fontWeight = $('#buttonID').css('fontWeight'); if(fontWeight == '600') { $('#buttonID').css('fontWeight', 0); } else { $('#buttonID').css('fontWeight', 600); }", 2000); 
```

我没有测试过，但这是一般理论

# mysql - 在 NM 关系中具有复合主键

> ID：11863613
> 
> 赞同：2
> 
> 时间：2012-08-08T11:33:07.917
> 
> 标签：mysql, sql, database, database-design

从[上一个问题](https://stackoverflow.com/questions/2968544/composite-primary-keys-in-n-m-relation-or-not)中，我对在 nm 关系中具有复合主键有了一些想法。我的情况非常相似，但又有些不同。

```
[Person]

    PERSON_ID: int, primary key
    CLIENT_ID: int, primary key
    Name: nvarchar(xx)
    primary_key( PERSON_ID, CLIENT_ID);

[Group]

    GROUP_ID: int
    CLIENT_ID: int
    Name: nvarchar(xx)
    primary_key( GROUP_ID, CLIENT_ID); 
```

现在，当我使用 mysql-workbench 工具生成关系表时，它的作用是创建一个表：

> 选项1：

```
 [PersonHasGroup]

    PERSON_ID: int 
    CLIENT_ID: int 
    GROUP_ID: int
    CLIENT1_ID: int
primary_key( PERSON_ID, CLIENT_ID, GROUP_ID, CLIENT1_ID); 
```

在我的情况下，两个 client_id 通常具有相同的值，所以我将表格编辑为看起来像

> 选项2：

```
 [PersonHasGroup]

    PERSON_ID: int
    CLIENT_ID: int
    GROUP_ID: int
primary_key( PERSON_ID, CLIENT_ID, GROUP_ID); 
```

这些是好的做法吗？我的其他同事喜欢的有点不同。他们使用：

> 选项 3：

```
 [PersonHasGroup]
    PERSON_HAS_GROUP_ID: int, auto-increment
    CLIENT_ID: int        
    PERSON_ID: int, foreign key
    GROUP_ID: int, foreign key
primary_key( PERSON_HAS_GROUP_ID, CLIENT_ID); 
```

当我的关系是多对多的例子时，哪种做法是合适的：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:52:00.160

所提出的选项之间不应有任何辩论。有一个正确答案，但该答案取决于您的业务规则。

您的陈述**“在我的情况下，两个 client_id 通常具有相同的值”**让我感到担忧。像通常这样的术语在设计系统时通常无济于事。你需要从绝对的角度来谈论。

如果两个关系的 CLIENT_ID 必须相同，则选项 2（一个单个 CLIENT_ID）是正确的设计。

但是，如果每个关系都可以基于不同的 CLIENT_ID 是可能的（可能很少见，但可能），那么您当然需要具有两个唯一命名的 CLIENT_ID 列的选项 1。（我无法想象这个商业案例，但你的模型已经很奇怪了，所以我不太确定）

除非您完全解释您的业务需求，否则没有人可以帮助您确定哪个是正确的，但您指出这是不可能的。

选项 3 不应被视为一个选项 - 如果您要引入代理键，那么它不应该是复合代理键。

我个人永远不会为联结表（解决多对多关系的表）创建代理键，除非联结表 PK 可以是另一个表中的外键。在这种情况下，出于性能原因，我*可能会*创建一个代理键，但这不是一个简单的选择。如果创建了代理键，则应同时声明主键和备用键：一个使用自然复合键，另一个使用代理键。您希望确保给定的组/人员对只输入一次，并且您希望代理也是唯一的。

因此，如果您的特定情况出于性能原因需要它，则可以修改选项 1 和 2 以包含代理键：

选项 1A

```
[PersonHasGroup]
  PERSON_ID: int
  PERSON_CLIENT_ID: int
  GROUP_ID: int
  GROUP_CLIENT_ID: int
  PERSON_HAS_GROUP_ID: int
primary_key( PERSON_ID, PERSON_CLIENT_ID, GROUP_ID, GROUP_CLIENT_ID);
alternate_key( PERSON_HAS_GROUP_ID ) 
```

选项 2A

```
[PersonHasGroup]
  PERSON_ID: int
  CLIENT_ID: int
  GROUP_ID: int
  PERSON_HAS_GROUP_ID: int
primary_key( PERSON_ID, CLIENT_ID, GROUP_ID);
alternate_key( PERSON_HAS_GROUP_ID ) 
```

当然，您可以颠倒哪个是主要的，哪个是备用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:51:29.203

我更喜欢使用单个 id 以便于引用，以及唯一对的另一个唯一键，从未使用过工作台，所以这里首先在普通 sql 中：

```
CREATE TABLE person_has_group (
    person_has_group_id SERIAL,
    client_id BIGINT UNSIGNED NOT NULL REFERENCES clients (client_id),
    person_id BIGINT UNSIGNED NOT NULL,
    group_id BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (client_id, person_id) REFERENCES persons (client_id, person_id),
    FOREIGN KEY (client_id, group_id) REFERENCES groups (client_id, group_id),
    UNIQUE KEY (client_id, person_id, group_id)
); 
```

在“工作台”中类似这样的东西：

```
[PersonHasGroup]
    PERSON_HAS_GROUP_ID: int, auto-increment
    CLIENT_ID: int        
    PERSON_ID: int, foreign key
    GROUP_ID: int, foreign key
    primary_key( PERSON_HAS_GROUP_ID)
    unique_key( CLIENT_ID, PERSON_ID, GROUP_ID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:42:15.677

如果我理解正确，以下应该是正确的：

*   您有多个服务器 (DB)，每个客户端一个。

*   每个 DB 都有自己的`PersonID`和的自动增量`GroupID`。

*   您试图简单地（直接）将所有这些导入到一个多租户数据库中；因此和表`ClientID`的主键。`Person``Group`

如果这些陈述不正确，请忽略其余陈述。

![在此处输入图像描述](../Images/5b31713bb185e14d05a46fdbb9a70fca.png)

```
create table PersonGroup (
    PersonID integer
  , GroupID  integer
  , ClientID integer
);

alter table PersonGroup add constraint  pk_PersonGroup
            primary key (PersonID, GroupID, ClientID);

alter table PersonGroup add constraint fk1_PersonGroup
            foreign key (PersonID, ClientID) references Person(PersonID, ClientID);

alter table PersonGroup add constraint fk2_PersonGroup
            foreign key (GroupID, ClientID) references Group(GroupID, ClientID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:08:26.263

好问题。但让我们先快速浏览一下您的**Person**和**Group**表。

考虑到表的名称，**Person**中的每一行似乎代表一个*人*，**Group**中的每一行似乎代表一个*group*。所以从概念上讲，要识别一个人或组，您不需要**Client_ID**，因此您不需要它作为主键的一部分。如果您的模型要求每个人都有一个唯一的**Client_ID**（除了您的**Person_ID 之外**），只需将其设为唯一字段，但不要将其包含在主键中。

**组**表的情况有点混乱。问题是为什么不能单独通过**Group_ID**识别一个组？（*Client_ID*字段将组与客户端相关联。但是这种关系的本质是什么？每个组是由客户端创建的吗？在这种情况下，您不需要将*Client_ID*作为键的一部分，您只需要将其作为外键。它是成员关系吗？在这种情况下，您需要一个由另一个表表示的 N 到 M 关系）。

**然后我们得到Person**和**Group**之间的关系。一个 N 到 M 关系总是被翻译成一个表，它由两个表的 PK + *N 到 M*关系的任何属性（例如*成员资格的日期*）组成。在这种情况下，您只需要一个包含*Person_ID*和*Group_ID*两个字段的表，并且它们都是复合键的一部分。

您还必须小心命名.. **PersonH​​asGroup**代表什么？该人是否拥有该组？管它吗？或者它只是一个会员资格。如果它是一个成员，那么像“ **PersonGroup** ”这样简单的东西就足够了。

确保您在概念上正确地看到实体，否则您将陷入将字段添加到主键并链接不能完全满足您需求的表的陷阱。将实体的属性封装在其中，不要混合它们。问问自己“*我如何识别现实世界中的实体？* ” .. 你就知道主键应该是什么了。诸如“**在我的情况下，两个 client_id 通常具有相同的值**”之类的内容表明您没有正确看到概念并将它们混合在一起，从而导致冗余和不正确的关系。

最后，我了解有时会交给您一个设计不佳的数据库，并要求您引入新的链接和实体。我的建议是尽可能地进行更正。从长远来看，它会拯救你。

因此，在我看来，与此问题中的设计相比，您的[先前设计](https://stackoverflow.com/questions/2968544/composite-primary-keys-in-n-m-relation-or-not)要好得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:41:45.060

我认为`option 2`会更好，因为它还添加`UNIQUE CONSTRAINT`了列`( PERSON_ID, CLIENT_ID, GROUP_ID)`，这样就不会将重复项插入到您的表中。

# javascript - 我可以使用 `µ` 作为 javascript 变量名吗

> ID：11863619
> 
> 赞同：3
> 
> 时间：2012-08-08T11:33:44.550
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 变量名称的有效字符](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)

我知道 ecmascript 规范说我可以使用`µ`（希腊小写 Mu）并且我已经在几个浏览器上进行了测试，但它坚如磐石吗？它适用于所有浏览器吗？可能有什么陷阱？

从技术上讲，我不认为它与使用`$`变量名的 jQuery 有什么不同 - 有任何技术差异吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:43:18.550

是的，你可以使用它。例如：

```
var π = Math.PI; 
```

以及[Unicode 转义序列](http://mathiasbynens.be/notes/javascript-escapes#unicode)。

基本上，Javascript 中的变量可以是任何根据 ECMAScript 5.1 / Unicode 6.1 有效的变量。

这是一些在线[JavaScript 变量名验证器](http://mothereff.in/js-variables)。

作为参考，[此页面用于记录 ES5 规范与 Web 浏览器中 ECMAScript 实现的要求之间的差异](http://wiki.whatwg.org/wiki/Web_ECMAScript#Identifiers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:37:19.510

不，没有“真正的”技术差异。*几乎*所有 unicode 字母都允许作为 Javascript 中的变量名，查看[这篇精彩](http://mathiasbynens.be/notes/javascript-identifiers)的文章以获取更多信息。

但是，一些 unicode 字符使用更多字节，所以无论如何 ASCII 可能是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:38:01.483

是的你可以。

以下是一些支持该声明的链接

[http://mathiasbynens.be/notes/javascript-identifiers](http://mathiasbynens.be/notes/javascript-identifiers)

[http://oreilly.com/javascript/excerpts/learning-javascript/javascript-datatypes-variables.html](http://oreilly.com/javascript/excerpts/learning-javascript/javascript-datatypes-variables.html)

# android - 为什么总是得到 null(context.getContentResolver().insert(Groups.CONTENT_URI, contentValues);)

> ID：11863627
> 
> 赞同：2
> 
> 时间：2012-08-08T11:34:08.240
> 
> 标签：android, android-syncadapter

```
if (groupId == 0) {
        final ContentValues contentValues = new ContentValues();
        contentValues.put(Groups.ACCOUNT_NAME, account.name);
        contentValues.put(Groups.ACCOUNT_TYPE, account.type);
        contentValues.put(Groups.TITLE, SAMPLE_GROUP_NAME);
        contentValues.put(Groups.GROUP_IS_READ_ONLY, true);

        final Uri newGroupUri = context.getContentResolver().insert(Groups.CONTENT_URI, contentValues);
        groupId = ContentUris.parseId(newGroupUri);
    } 
```

我在从 Android 开发者网站下载的 SampleSyncAdapter 项目的 ContactManager 类中有这些代码行（sdk api 16 的示例）。

我的问题是

```
context.getContentResolver().insert(Groups.CONTENT_URI, contentValues); 
```

此行始终返回 null..,。为什么以及这个问题的解决方案是什么......

# directshow - DirectShow - 如何旋转网络摄像头预览视频？

> ID：11863628
> 
> 赞同：0
> 
> 时间：2012-08-08T11:34:10.907
> 
> 标签：directshow

我正在使用 DirectShow ICaptureGraphBuilder2、IVideoWIdow 和 IGraphBuilder 将网络摄像头视频预览到指定窗口。我成功预览网络摄像头视图。现在，我想将此网络摄像头预览旋转 90 度。探索了网络，人们建议使用转换过滤器，但我并没有完全找到如何去做。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:01:49.823

MSDN 在[Writing Transform Filters](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391015%28v=vs.85%29.aspx)中有描述，你会发现一些相关的讨论：

*   [我想以某个角度旋转视频](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/55815b73-f519-46e1-a2bc-ae3e838c945c/)
*   [需要纵向模式下的视频帮助](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/322152c9-34b5-4fa6-9497-24d787e20531)

假设的变换过滤器需要重新排列数据缓冲区中的像素，并且还需要指示媒体类型的旋转。

# java - Java Server Data Storage 最好的策略是什么？

> ID：11863629
> 
> 赞同：2
> 
> 时间：2012-08-08T11:34:12.077
> 
> 标签：java, storage

我正在开发一个游戏服务器，因为我必须存储每个玩家的进度，所以我有一个问题：对于我的案例来说，最好的数据存储解决方案是什么？

一些事实：目前，每个玩家都是我的 MYsql 数据库中的一个行，具有唯一的 ID 和名称。每个玩家都有一个世界。每个世界都包含一组不断增长的区域（随着玩家前进）。每个区域都包含一组景观。问题来了。

我想尽可能简单地添加新的景观，所以我有一个简单的概念：我有一个界面 Landscape.java，只包含一个名为 doit(String command) 的方法，景观的每个实现都在他们的 doit 方法中做一些花哨的东西我不得不更改任何代码。

现在我必须存储每个玩家的世界，这是我想到的一些想法/选项

*   将所有内容存储在数据库中需要我为景观的每个实现创建表。将是一个糟糕的解决方案

*   序列化是另一个想法，非常完美，因为我不必担心任何简单地转换为横向和精细的事情。但我有疑问，我应该如何编辑数据，更新类时该怎么做，如何推出对数据的更改。

*   Hibernate、JPA 等框架（我对它们没有深入的了解，这对我的情况有帮助吗？）

*   编写我自己的文件格式，改变我的策略或其他想法？

最后一些可能很重要的信息：

*   保存的数据必须是可编辑的

*   存储不是时间关键的，应该在正常时间完成

*   由于所有数据都缓存在内存中，我并不真正关心它是否快速，它更可能必须是可靠的

*   可以使用的是 PostgreSQL/Mysql 和文件系统。

我在这个领域没有经验，所以如果我走错了路，请给我提示；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:38:18.457

我没有看到任何建议您应该选择一种方法而不是另一种方法。

有些人会有偏好，我会随你喜欢。

如果你要序列化你的数据，我会使用文本序列化，这样可以很容易地在文本编辑器中编辑它。例如 XML、JSON、CSV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:42:05.723

这一切听起来很模糊，我只会选择一种解决方案并尝试一下。

确保您的代码已从中*充分抽象*出来，以便您以后可以用新的解决方案替换它。许多项目在其生命周期中通过解决方案迁移（随着需求和规模的变化），关键是尝试并确保它对您造成的干扰尽可能小。

# c# - 在锁定屏幕 windows 手机下导航

> ID：11863630
> 
> 赞同：3
> 
> 时间：2012-08-08T11:34:12.707
> 
> 标签：c#, windows-phone-7.1, windows-phone, lockscreen

我创建了一个应用程序，我希望该应用程序在锁定屏幕下运行，它涉及在页面之间导航。问题是，它给了我一个错误“无法在锁定屏幕下导航”。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:09:53.697

不幸的是，当手机被锁定时，您的应用程序会进入后台（如果您正在使用后台服务）或被停用。在这种情况下，无法执行页面导航或 UI 相关任务。但是，您可以运行后台任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:44:05.373

是的，米兰，我们谈论的是相同的事件，但在我的情况下，它达到了断点，并在输出窗口中给出了正确的事件名称。我使用了以下代码：

```
private void Application_Launching(object sender, LaunchingEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("App Launching");
}
private void Application_Activated(object sender, ActivatedEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("App Activated");
}
private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("App Deactived");
}
private void Application_Closing(object sender, ClosingEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("App Closing");
} 
```

我希望它有所帮助。让我知道是否还有任何问题。

# node.js - 在 Mongoose 中链接静态构造函数？像 Rails 中的范围？

> ID：11863635
> 
> 赞同：0
> 
> 时间：2012-08-08T11:34:35.650
> 
> 标签：node.js, mongodb, express, mongoose

有没有办法在 mongoose 中链接静态构造函数？

在 Rails 中，它是链接 named_scopes 的方式

我有一个特殊的查询来从 mongo 检索一些数据，但有时我必须应用限制或计算它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:03:21.833

**[更新]**此功能[已被删除](https://github.com/LearnBoost/mongoose/commit/26ed874ebf7bbdb368c5d052dac783727d7537f1)。

Mongoose 已命名范围功能，但有[一个未解决的问题](https://github.com/LearnBoost/mongoose/issues/679)可能表明它们无法正常工作；检查该功能，看看它是否适合您。（当我有机会时，我也会这样做，因为这是一个非常好的功能！）

以下示例代码取自[https://github.com/LearnBoost/mongoose/blob/master/test/namedscope.test.js](https://github.com/LearnBoost/mongoose/blob/master/test/namedscope.test.js)上的命名范围测试。

```
var UserNSSchema = new Schema({
    age: Number
  , gender: String
  , lastLogin: Date
});

UserNSSchema.namedScope('olderThan', function (age) {
  return this.where('age').gt(age);
});

UserNSSchema.namedScope('youngerThan', function (age) {
  return this.where('age').lt(age);
});

UserNSSchema.namedScope('twenties').olderThan(19).youngerThan(30);

UserNSSchema.namedScope('male').where('gender', 'male');

UserNSSchema.namedScope('female').where('gender', 'female');

UserNSSchema.namedScope('active', function () {
  return this.where('lastLogin').gte(+new Date - _24hours)
});

mongoose.model('UserNS', UserNSSchema);

UserNS.olderThan(20).find(function (err, found) { ... });
UserNS.olderThan(40).active.male.find(function (err, found) { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T00:25:54.927

只需扩展 Mongoose Query 对象，您就可以链接您的方法。像这样

```
    mongoose.Query.prototype.customPopulate = function(populate) {
    var查询=这个；
    变种模型 = this.model;

    如果（填充！= null）
    {
    返回查询.填充（填充）；
    } 别的{
        返回查询；
    }
    }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T20:46:24.873

这是一个老问题，但我创建了一个小插件来解决这个问题：

[https://github.com/gberger/mongoose-named-scopes](https://github.com/gberger/mongoose-named-scopes)

[https://www.npmjs.com/package/mongoose-named-scopes](https://www.npmjs.com/package/mongoose-named-scopes)

```
UserSchema.scope('olderThan', function (age) {
  return this.where('age').gt(age);
});

UserSchema.scope('youngerThan', function (age) {
  return this.where('age').lt(age);
});

UserSchema.scope('twenties', function() {
  return this.olderThan(19).youngerThan(30);
});

UserSchema.scope('male', function() {
  return this.where('gender', 'male');
});

User.male().twenties().then(...) 
```

# c++ - 从 CGI 向 Html 控件返回一个值

> ID：11863639
> 
> 赞同：0
> 
> 时间：2012-08-08T11:34:45.173
> 
> 标签：c++, textbox, cgi, return-value

我已经编写了 CGI 程序，使用 c++ 来添加两个数字。我在两个文本字段中输入两个数字，然后将数据传递给 CGI 程序并添加它。我在新网页中将结果显示为纯文本。但我想在我收到输入的同一网页的另一个文本字段中显示结果。或者我想在不同的 HTML 页面文本字段中显示答案。我怎样才能做到这一点 ？

# c# - 尝试调用使用 X.509 证书保护的 Web 服务

> ID：11863641
> 
> 赞同：2
> 
> 时间：2012-08-08T11:34:50.643
> 
> 标签：c#, web-services, x509

我正在尝试调用使用 X.509 证书保护的 Web 服务。网络服务的提供者为我提供了用户名和密码。当我使用 Firefox 浏览该站点时，浏览器会提示我输入用户名和密码。当我输入用户名/密码时，它会将我带到一个 XML 文档（不是 WSDL）。然后我可以点击证书（地址栏左侧），我看到服务提供商已经验证了他自己的证书

我收到了一个 WSDL（作为电子邮件附件），并使用标准的右键单击添加服务引用创建了代理类。

当我尝试调用 Web 服务时，我收到以下错误：无法为具有权限的 SSL/TLS 安全通道建立信任关系。

我尝试从网站保存证书（单击地址栏左侧的 Certname --> 查看证书 --> 导出），然后使用 mmc 证书管理单元将其安装在我的机器上（我什至会进入正确的方向在这里??)

但这也不起作用

这是我的代码：

```
var factory = new ChannelFactory<ServicePort>("ServiceSoapBinding");
factory.Credentials.UserName.UserName = "myuser";
factory.Credentials.UserName.Password = "mypass";
var client = factory.CreateChannel();
var request = GetRequest();
var response = client.GetDetails(request); 
```

我对证书有非常基本的了解，因此请记住：

1.  我是否必须在客户端机器上安装客户端证书（我的 Dev PC 现在）。
2.  服务提供商是否应该向我提供特定的证书，如果是，我可以从他的网站上获取，或者他需要单独发送给我。

对此的任何帮助将不胜感激。

非常感谢凯文 T

# sql-server-2008 - 如果只有一列与第二列部分匹配，如何从第一个表中返回两列？

> ID：11863643
> 
> 赞同：0
> 
> 时间：2012-08-08T11:34:51.210
> 
> 标签：sql-server-2008, join, outer-join

```
select art.artno, art.name  from Art 
left outer join store on art.artno =store.artno  
where art.Artno not in (select art.artno from store) 
```

查询应该是这样的，但似乎不起作用（我在列名旁边没有得到任何结果行）。使用 MSSQL 2008。

```
table art             table store                 EXPECTED RESULT 
artno   name          artno qty                  artno   name 
    1    xbox360          1   1                      2     XHW
    2    XHW              3   2                      5     PS2
    3    NETANDO          4   1
    5    PS2              6   3
    6    PS1 
    4    X1 
```

如何编写查询以获取示例中显示的预期结果？

只是为了让您知道如果有帮助，这些表有 100 多 K 行。

最后，关于上述代码为什么不起作用的一些说明将是有益的。我看了this[这个链接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)似乎outer join must work，可能我根本无法理解。

我也试过了`full outer join`，没有帮助。使用`except`我只能找到`artno`但没有让我生成该`name`列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:43:03.693

另一种方法可能是

```
select
  a.`artno`,
  a.`name`
from
  art a
left join
  store s on s.artno=a.artno
where
  s.artno is null 
```

在大表上，第二种方法很可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:44:50.120

Georges 的回答有效，但在这种大小的表上，带有“不存在”的相关子查询会更快。

经过测试，我的子查询比左外部慢。这是前进的方向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:42:53.740

```
select art.artno, art.name from art
where art.artno not in (select store.artno from store) 
```

您不需要执行任何类型的连接来使用内部查询（`(select store.artno from store)`在这种情况下）。内部查询就像构建一个临时表，用值填充它，然后在查询中使用它。

由于您希望您的内部查询为您提供`artno`table 中的所有内容，因此`store`您应该使用`(select store.artno from store)`and not `(select art.artno from store)`，因为我认为这会`art.artno`从外部查询中选择，而不考虑`store`表格的内容。

# php - 使用 /me/feed 在 Facebook 时间轴上发布照片马赛克

> ID：11863645
> 
> 赞同：0
> 
> 时间：2012-08-08T11:34:56.773
> 
> 标签：php, facebook

我希望我的应用程序在时间轴上发布 4 或 8 张图片的马赛克，因为它是使用“照片”框完成的（参见下面的示例，我已经隐藏了照片，因为它们是个人的）：

![来自 Facebook 的照片框](../Images/f984c1e969a21c9cb8a845dd288f5054.png) 使用 Facebook API，我可以像这样将普通帖子添加到时间轴：

```
try
{
    $ret_obj = $facebook->api('/me/feed', 'POST',
        array(
          'link' => 'www.freemages.fr',
          'message' => 'Posting with the PHP SDK!'
        ));
    echo "Post ID: ".$ret_obj["id"];
}
catch(FacebookApiException $e)
{
    $login_url = $facebook->getLoginUrl( array(
       'scope' => 'publish_stream'
       )); 
    echo "Veuillez vous <a href=\"".$login_url."\">identifier</a>";
    error_log($e->getType());
    error_log($e->getMessage());
} 
```

但是，如果有办法按照说明进行操作，我在文档中看不到。我真的不需要在 FB 帐户上上传图片的缩略图，我只想在时间轴上以每行 4 个分组的方形格式显示它们（例如，我可以生成 HTML 代码来创建此布局，但确实如此似乎不可能）。

感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:47:49.687

在我看来，您需要阅读开放图[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)这是您创建自定义对象、操作和聚合的地方，然后您可以提示您的用户添加他们的活动给它。我认为它确实需要先提交到 facebook。我建议阅读上面的链接，看看你是否可以让它工作。它更像是一个出现在个人资料时间轴上而不是在提要中的框。

目前，您可以在此处找到分步教程[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

# iphone - How to call a method using navigation controller

> ID：11863653
> 
> 赞同：0
> 
> 时间：2012-08-08T11:35:20.140
> 
> 标签：iphone, objective-c, ios, xcode

I have pushed a view in navigation controller. For eg: view1 pushed view2, if I want to call any view1 method from view2\. Is it possible. Is it a good practice.

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:48:15.313

有几种方法可以构建您的应用程序以在内部通信中处理它。您想要的结构方式取决于您，但您必须具备[面向对象编程](http://en.wikipedia.org/wiki/Object-oriented_programming)的基本知识，最好还有[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)或其他设计模式。

以下是一些关于如何构建应用程序的示例：

**建议一**

> > *   创建一个类 A 并让您的应用程序创建它的一个实例。
> >     
> >     
> > *   让 A 分别创建 View1 和 View2 的一个实例并保留对它们的引用。
> >     
> >     
> > *   让 View1 调用 A 中的方法，A 又可以调用 View2 中的方法。
> >     
> >     
> > *   让 View2 调用 A 中的方法，A 又可以调用 View1 中的方法。

**建议二**

> > *   在您的应用中创建 View1 的实例
> >     
> >     
> > *   让 View1 创建 View2 的一个实例并保留对它的引用。
> >     
> >     
> > *   让 View1 成为 View2 的代表
> >     
> >     
> > *   View2可以通过调用它的delegate来调用View1中的方法，View1可以通过调用引用来调用View2中的方法。

**建议 3**

> > *   创建一些类 M1、M2 和 M3（描述您的应用程序的模型）
> >     
> >     
> > *   创建视图 View1 和 View2。
> >     
> >     
> > *   创建一个控制器类 C
> >     
> >     
> > *   让 View1 和 View2 显示 M1、M2 和 M3 中的信息
> >     
> >     
> > *   当用户与 View1 或 View2 交互时，让他们调用 C 中的方法，C 中的方法依次调用 M1、M2 和 M3 中的方法来改变它们的状态。
> >     
> >     
> > *   M1、M2 和 M3 的变化将通过 View1 和 View2 中显示的信息反映出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:42:02.370

是的，有可能，实际上有几种方法可以做到这一点：

1.  使用`delegate`模式，正如评论中建议的 NeverBe（尽管您仍然需要将引用传递给调用者）

2.  只需在创建时传递`View1`引用`View2`，然后使用该引用来调用您需要的方法。

3.  您可以`viewController`在`NavigationController`堆栈上找到上一个，并调用它可用的任何公共方法

# android - Changing EditText focus border

> ID：11863658
> 
> 赞同：3
> 
> 时间：2012-08-08T11:36:01.680
> 
> 标签：android, android-ui, android-theme

I wanna ask how i can change EditText border then it on focus. I want to change original orange gradiant to my own.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:19:15.467

嗨，您可以在可绘制文件夹中创建这样的渐变。

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
   <shape android:shape="rectangle">
        <gradient
                android:startColor="#5a5a5a88"
                android:endColor="#14141488"
                android:angle="270" android:centerX="0.25"/>

   </shape>
</item>
<item android:top="80dp">
<shape android:shape="rectangle">
        <gradient
                android:startColor="#5aff5a88"
                android:endColor="#14ff1488"
                android:angle="270" android:centerX="0.25"/>

</shape> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:00:23.807

在drawable文件夹中创建一个文件。粘贴下面的代码。还可以根据需要提供适当的图像。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_window_focused="false" android:state_enabled="true"     
 android:drawable="@drawable/textfield_default" />
<item android:state_window_focused="false" android:state_enabled="false"       
 android:drawable="@drawable/textfield_disabled" />
   <item android:state_pressed="true" android:drawable="@drawable/textfield_pressed" />
<item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/textfield_selected" />
  <item android:state_enabled="true" android:drawable="@drawable/textfield_default" />
  <item android:state_focused="true" android:drawable="@drawable/textfield_disabled_selected" />
 <item android:drawable="@drawable/textfield_disabled" />
</selector> 
```

这将完美地工作。

# java - Workaround to use enumerations in JavaFX 1.3

> ID：11863659
> 
> 赞同：1
> 
> 时间：2012-08-08T11:36:15.243
> 
> 标签：java, javafx, enumeration

As far as I know the JavaFXScript does not support enumerations. Is there a known workaround in JavaFXScript to access the fields of an enumeration defined in Java?

# java - intellij - cleanup code

> ID：11863663
> 
> 赞同：8
> 
> 时间：2012-08-08T11:36:34.597
> 
> 标签：java, intellij-idea

I was wondering whether intellij has a feature that would allow it to scan through files and perform things such as organising imports, safely deleting unused functions and fields etc. This feature was very helpful in .NET in Resharper plugin. Thanks for any pointers.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T11:56:43.160

使用`Analyze`| **启用相应选项的检查代码**以查找未使用的代码，在结果中，您可以将修复应用于所有事件，同时删除所有未使用的方法和字段。

使用`Code`| **重新格式化代码**或**优化其余部分的导入**。Reformat Code 具有优化导入的选项，您可以在整个项目上运行它，以便在一个步骤中全局执行这两项操作。

还可以动态优化导入（在设置中启用）并在提交版本控制时重新格式化/优化导入。代码检查也可以在提交之前执行，以通知您可能存在的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T11:39:49.677

There is a plugin for IDEA - FindBugs-IDEA. It scans for cases you listed and a lot more.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:40:04.457

You can try it out using the trial.

As to the imports, yes, you can Organize Imports `ctrl-alt-o`, and you can choose to do so on the current file or on every file in the project.

Not sure if you can delete all unused methods in a project, but you do get warnings regarding methods/variables that aren't used and can be safely deleted (and IntelliJ does offer the option to safely delete).

Also, in the Preferences, you can setup a ton of things that you choose to be considered as warnings, depending on your coding style, conventions, etc.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T18:57:30.150

我建议使用这 10 个你可能没有使用的 IDEA 检查：

[http://hamletdarcy.blogspot.com/2008/04/10-best-idea-inspections-youre-not.html](http://hamletdarcy.blogspot.com/2008/04/10-best-idea-inspections-youre-not.html)

从我自己来说，我喜欢在**Intellij IDEA**的帮助下与**NullPointerException作斗争。**

 **以下检查对我有很大帮助：

1.  恒定条件和例外 [![在此处输入图像描述](../Images/16e2e04d7e411f716625cbfd9765ff12.png)](https://i.stack.imgur.com/XAGUE.png)
2.  @NotNull/@Nullable 问题 [![在此处输入图像描述](../Images/6e5925cbeca57935a9a30eb001eb7995.png)](https://i.stack.imgur.com/Qu00a.png)**

# jquery - Make Cool Video Gallery Responsive

> ID：11863664
> 
> 赞同：0
> 
> 时间：2012-08-08T11:36:47.910
> 
> 标签：jquery, wordpress, plugins, media-queries

i'm using this plugin (http://wordpress.org/extend/plugins/cool-video-gallery/) on my wordpress website to display a gallery of videos.

Now, since i want the videos look good in every mobile devices, i need to resize the size of the vídeos in different resolutions. I take a look at the code and it looks it's in this function:

```
 jwplayer('video_fancy_cvg_slide_gallery_<?php echo $galleryID.'
  _ '.$place_holder;?>').setup({
      'file': this.href,
      "autostart": "<?php echo $autoplay;?>",
      "controlbar": "<?php echo $options_player['cvgplayer_controlbar']; ?>",
      "flashplayer": "<?php echo $cool_video_gallery->plugin_url . "
      cvg - player / player.swf "; ?>",
      "volume": "<?php echo $options_player['cvgplayer_volume']; ?>",
      "width": "<?php echo $options_player['cvgplayer_width']; ?>",
      "height": "<?php echo $options_player['cvgplayer_height']; ?>",
      "mute": "<?php echo $mute; ?>",
      "stretching": "<?php echo $options_player['cvgplayer_stretching']; ?>",
      "skin": "<?php echo $cool_video_gallery->video_player_url . 'skins/' . $options_player['cvgplayer_skin'] . '-skin/' . $options_player['cvgplayer_skin']  . '.xml' ?>"

  }); 
```

This a problem for me since it's inside a jquery function, there's no way i can resize the videos with css media queries or can I?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T04:02:49.710

有一个技巧可以使视频播放器响应：

在“视频播放器设置”页面，您可以设置视频播放器的宽度和高度。如果您将这两个输入留空，则不会将宽度和高度内联样式添加到包含的 div 中，并且它将根据页面的尺寸调整大小。

如果你想确保它是响应式的，你可以在你的 CSS 中添加一个 width: 100% 到包含的 div：

```
#mediaplayer_gallery_1_wrapper {
    width: 100%;
} 
```

# java - Web development - Asynchronous vs Synchronous

> ID：11863665
> 
> 赞同：0
> 
> 时间：2012-08-08T11:36:48.020
> 
> 标签：java, web-applications, asynchronous

I am currently reading about async programming and it seems to have a lot of advantages.

*   But for web development should I make every request asnyc?

*   Does async have disadvantages?

I am using Java with Play2 and async isn't really to best looking thing. [http://www.playframework.org/documentation/2.0.2/JavaAsync](http://www.playframework.org/documentation/2.0.2/JavaAsync)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:41:43.990

你得出异步是最好的结论的依据是什么？**这完全取决于用例**。如果您选择异步处理，您需要考虑错误处理，将结果传达给用户。

# google-sheets - How to query multiple sheets and merge the data?

> ID：11863666
> 
> 赞同：8
> 
> 时间：2012-08-08T11:36:48.927
> 
> 标签：google-sheets, google-sheets-query

I have 15 sheets that use the same template, for 15 different users. I would like to make a query on all the sheets, and display the result in a separate sheet:

```
=QUERY(Mona!A3:U300; "select A, D where C != ''") 
```

Where `Mona` is the name of 1 of the 15 sheets.

So what I need is to make this QUERY on all the sheets and show the result. The columns (A,D) should only occur once.

How can I accomplish this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-18T11:15:21.047

让我另外建议使用`{}`来收集所有数据：

3张纸的示例公式：

```
=QUERY({'1'!A1:D13;'2'!A2:D13;'3'!A2:D13},"select Col1, Col2") 
```

在这里，我们在工作表 #1 中仅使用一次标题：范围`'1'!A1:D13`包含标题，范围`'2'!A2:D13`和其他不包含。我们还用 Col1、Col2、Col3 替换 A、B、C 表示法...

查看[示例工作簿](https://docs.google.com/spreadsheets/d/154-vznuoNS7QIZG6sKoj7UP7QnYSy3BYhWtUQwNFfGQ/edit?usp=sharing)，可能有人会觉得它很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:16:02.220

这并不能解决问题的合并部分，但查询所有工作表的有效方法是：

```
=QUERY(Indirect(A1); "select A, D where C != ''") 
```

其中单元格`A1`具有文本值`Mona!A3:U300`

使用此方法，您可以在单元格中列出不同的工作表名称并查找每个工作表。

可能可以使用 an`ArrayFormula`将查询组合成一个公式，尽管我不确定查询对此的效果如何 - 使用其中一个`Sumproduct`或`Filter`使用多个条件查找值可能会更好。

# php - Export to excel file shows error

> ID：11863667
> 
> 赞同：0
> 
> 时间：2012-08-08T11:36:50.003
> 
> 标签：php, format, export-to-excel

I am trying to use a plugin that converts the posts of a blog to to .xls format. When i try to open the .xls file i get an error that file format is different or file is corrupt. This is the code for creating .xls file.

```
<?php
  if (isset($_POST['Submit']) && isset($_POST['post_type']) &&  isset($_POST['ext']) ) {
    $post_type = $_POST['post_type'];
    $ext = $_POST['ext'];
    $str = '';
    if ( is_multisite() ) {
      $blog_info = get_blog_list(0, 'all');
      foreach ($blog_info as $blog) {
        switch_to_blog($blog['blog_id']);
        include('loop.php');
        restore_current_blog();
      }
    } else {
      include('loop.php');
    }
    $filename = strtolower(str_replace(' ','-',get_bloginfo('name'))) .'-urls.' . $ext;
    header("Content-type: application/vnd.ms-excel;");
    header("Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, charset=utf-8;");
    header("Content-Disposition: attachment; filename=" . $filename);

    print $str;//$str variable is used in loop.php
    wp_redirect(admin_url('admin.php?page=../export-2-excel.php&noheader=true'));
    exit();
  }
?> 
```

the code for loop.php is

```
<?php
  if($post_type != 'comment_authors') {
    query_posts(array('posts_per_page' => -1, 'order'=>'DESC', 'post_type' => $post_type));//-1 is for all posts
    $str .= '<table>
              <tr>
                <td colspan=7>' . get_bloginfo('name').'
              </tr>';
    if (have_posts()) {
      $str .= '<tr>
                <th>Name</th>
                <th>Description</th>
                <th>Url</th>
                <th>Created on</th>
                <th>Author</th>
                <th>Categories</th>
                <th>Tags</th>
              </tr>';
      while (have_posts()) {
        the_post();

        $all_cats = '';
        foreach( (get_the_category()) as $category) {
          $all_cats .= $category->cat_name . ', ';
        }
        $all_cats = substr($all_cats, 0, -2);

        $all_tags = '';
        $posttags = get_the_tags();
        if ($posttags) {
          foreach( (get_the_tags()) as $tag) {
            $all_tags .= $tag->name . ', ';
          }
          $all_tags = substr($all_tags, 0, -2);
        }
        global $post;

        $str.= '
          <tr>
            <td>' . mb_convert_encoding(get_the_title(), 'HTML-ENTITIES', 'UTF-8') . '</td>
            <td>' . mb_convert_encoding($post->post_content, 'HTML-ENTITIES', 'UTF-8') . '</td>
            <td>' . get_permalink() .'</td>
            <td>' . get_the_date('Y-m-d', '', '', FALSE) .'</td>
            <td>' . get_the_author() .'</td>
            <td>' . $all_cats . '</td>
            <td>' . $all_tags . '</td>
          </tr>';
      }
      wp_reset_query();
    } else {
      $str .= '<tr colspan="6"><td>No post found.</td></tr>';
    }
    $str.= '</table><br/></br>';
  } else {
    global $wpdb,$table_prefix;
    $str .= '<table>
            <tr>
              <td colspan=6>' . get_bloginfo('name').'
            </tr>';
    $str .= '<tr>
              <th>Commenter</th>
              <th>Email Address</th>
              <th>Url</th>
              <th>Created on</th>
              <th>IP Address</th>
              <th>Comments</th>
            </tr>';
   $commenters = $wpdb->get_results("SELECT COUNT(comment_ID) AS count, comment_ID, comment_author, comment_author_email, comment_author_url, comment_date, comment_author_IP FROM $table_prefix"."comments WHERE comment_approved = 1 AND comment_type = '' GROUP BY comment_author, comment_author_email ORDER BY comment_author ASC, comment_date DESC;");

    foreach ($commenters as $row)
    {
      $str.= '<tr>
               <td>'.$row->comment_author.'</td>';
      $str.= '<td>'.$row->comment_author_email."</td>";
      $str.= '<td>'.$row->comment_author_url."</td>";
      $str.= '<td>'.$row->comment_date."</td>";
      $str.= '<td>'.$row->comment_author_IP."</td>";
      $str.= '<td>'.$row->count."</td>
             </tr>";
    }
  } 
```

Is there something wrong while creating the .xls file?

# php - en/decryption using php and Objective-C

> ID：11863677
> 
> 赞同：0
> 
> 时间：2012-08-08T11:37:27.817
> 
> 标签：php, encryption, wamp, wampserver, mcrypt

I'm trying to use function that decrypt for me ciphertext after encrypted using Objective-C

I know that the problem is in padding.

so I found this function form this site.

[http://tharindufit.wordpress.com/2011/12/15/aes128-encryption-in-ios-and-decryption-in-php/#comment-470](http://tharindufit.wordpress.com/2011/12/15/aes128-encryption-in-ios-and-decryption-in-php/#comment-470)

thanx for the guy posted.

```
function decrypt_password($pass,$key)
{

    $base64encoded_ciphertext = $pass;

    $res_non = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($base64encoded_ciphertext), ‘ecb’);

    $decrypted = $res_non;
    $dec_s2 = strlen($decrypted);

    $padding = ord($decrypted[$dec_s2-1]);
    $decrypted = substr($decrypted, 0, -$padding);

    return  $decrypted;
} 
```

The result I found is this:

```
Notice: Use of undefined constant ‘ecb’ - assumed '‘ecb’' in C:\wamp\www\enc3.php on line 7

Warning: mcrypt_decrypt() [function.mcrypt-decrypt]: Module initialization failed in C:\wamp\www\enc3.php on line 7 
```

Can any one help to make the code work greatly since i need it with same result to use it in decrypt the recived ciphertext from Objective-C?

by the way I use wamp server 2.0 that support mcrypt function.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:39:11.050

# android - Android Error: .apk file failed to install on my mobile

> ID：11863678
> 
> 赞同：0
> 
> 时间：2012-08-08T11:37:28.817
> 
> 标签：android

Error message is

> failed to install .apk file on to device: timeout

I tried these solutions but did not get any output:

1.  Try changing the ADB connection timeout. I think it defaults that to 5000ms and I changed mine to 10000ms to get rid of that problem. If you are in Eclipse, you can do this by going through Window -> Preferences and then it is in DDMS under Android. OR

2.  I used to have this problem sometimes, the solution was to change the USB cable to a new one OR

3.  I get this a lot. I'm on a Galaxy S too. I unplug the cable from the phone, plug it back in and try launching the app again from Eclipse, and it usually does the trick. Eclipse seems to lose the connection to the phone occasionally but this seems to kick it back to life. OR

4.  Don't use spaces in your directory names. If you have files that are in such a directory (e.g., stuff inside of C:\Program Files), copy them to another spot that does not have spaces.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:25:48.993

尝试这个。这与 ADB 连接超时有关。只是通过[这个](https://stackoverflow.com/questions/4775603/android-error-failed-to-install-apk-on-device-timeout)，告诉它的工作与否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:48:27.887

尝试将一些应用程序移动到 sdcard。可能是您的内部存储空间不足，无法安装新的 apk。

# android - 这个类应该返回我的位置并实际返回 0.0 0.0

> ID：11863696
> 
> 赞同：0
> 
> 时间：2012-08-08T11:38:29.860
> 
> 标签：android, google-maps, location

```
public class MyLocation  {
Context mContext;
LocationManager mlocManager;
LocationListener mlocListener;
double  lat=0,lng=0;

public MyLocation(Context mContext) {

    super();
    this.mContext = mContext;
    mlocManager = (LocationManager)mContext.getSystemService(mContext.LOCATION_SERVICE);
    mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);

}
/* Class My Location Listener */
public class MyLocationListener implements LocationListener {
    private static final int TWO_MINUTES = 1000 * 60 * 2;

    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();

        String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
    //  Toast.makeText( mContext,Text,Toast.LENGTH_SHORT).show();
        lat = loc.getLatitude();
        lng = loc.getLongitude();
    }

    public void onProviderDisabled(String provider){
        Toast.makeText(mContext,"Gps Disabled",Toast.LENGTH_SHORT ).show();
    }

    public void onProviderEnabled(String provider){
        Toast.makeText( mContext," Gps Enabled" ,Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
  }
} 
```

这个类没有返回它应该是什么......我的位置总是`0.0 0.0`不知道该怎么做。

我像这样使用这个类

`mylocation = new MyLocation(this);`

我启动应用程序时启用了 gps 和网络，所以这不是问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:55:03.353

试着走出去（我也不是冒犯的意思）。有时 GPS 在室内无法接收到信号，因此您可能必须前往户外的开阔区域才能获取实际数据。如果 GPS 找不到信号，它将返回 0.0, 0.0。

**编辑：**另外，我注意到您没有覆盖任何 GPS 方法。尝试`@Override`为那些（即，，，和`onLocationChanged`）添加一个。这可能会有所帮助。`onProviderEnabled``onProviderDisabled``onStatusChanged`

**编辑 2：**如果这仍然不起作用，请转到手机的设置，然后转到“位置和安全设置”（设备之间的名称可能略有不同），并确保“使用无线网络”和“使用 GPS 卫星”都是勾选。

**编辑 3：**
这都是它自己的类，@Override 上没有错误：

```
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;

public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

# java - Richfaces 标签被忽略

> ID：11863702
> 
> 赞同：1
> 
> 时间：2012-08-08T11:38:39.300
> 
> 标签：java, jsf, richfaces, java-ee-6

我在我的 XHTML 页面中使用了一些 Richfaces 标记。但他们被忽略了。

看起来像![在此处输入图像描述](../Images/273638641132402f31012b81bf429637.png)

哪里有问题？任何的想法？

我使用 Wepshere 8 作为 AppServer

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
<!-- html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
<head>
<title>RichFaces Greeter</title>
</head>
<body>
    <f:view -->
        <h:form>
            <rich:panel header="RichFaces Greeter" style="width: 315px">
                <h:outputText value="Your name: " />
                <h:inputText value="#{user.name}">
                    <f:validateLength minimum="1" maximum="30" />
                </h:inputText>
                <a4j:commandButton value="Get greeting" reRender="greeting" />
                <h:panelGroup id="greeting">
                    <h:outputText value="Hello, " rendered="#{not empty user.name}" />
                    <h:outputText value="#{user.name}" />
                    <h:outputText value="!" rendered="#{not empty user.name}" />
                </h:panelGroup>
            </rich:panel>
            <rich:inputNumberSlider minValue="1"  maxValue="100" showInput="false"/>
            <rich:inputNumberSpinner minValue="1" maxValue="100"/>  
        </h:form>
    <!-- /f:view>
</body>
</html -->
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:17:25.927

尝试在页面上添加 h:head 和 h:body 标签，而不是普通的 html 标签 head 和 body

# php - 为什么使用 PHPUnit 比创建自己的测试脚本更好？

> ID：11863704
> 
> 赞同：8
> 
> 时间：2012-08-08T11:38:53.587
> 
> 标签：php, unit-testing, phpunit

查看文档，我发现 PHPUnit 仅提供以下功能：

[http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions)

所有这些都可以很容易地在自定义测试脚本中实现，不到 1K 行......

PHPUnit 有 2 MB 的文件（大约 200 个），其中包括大量的类。此外，PHPUnit 仅从命令行运行 :(

创建我自己的脚本不是更好的主意吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T12:22:22.830

PHPUnit 是一头野兽。它很大，有时有点违反直觉，并且有缺陷。您的代码自然会直观且完美地满足您的直接需求。我也经常思考编写自己的测试框架是否会向前迈出一步，但是......它**不是**。您可以在一天内完成一个基本的测试框架，但是：

*   PHPUnit 集成在大多数现代 IDE 中；
*   PHPUnit 很好地与 XDebug 配合使用以生成代码覆盖率报告；
*   PHPUnit 可以与 Selenium 一起进行集成测试；
*   许多程序员都在使用 PHPUnit，这意味着您的测试对很多人来说都是一目了然的；
*   PHPUnit 可以集成到 CI 设置中，例如 Travis CI。
*   PHPUnit 有一个模拟库；
*   最重要的是：PHPUnit*有效*。

有很多理由反对自己编写。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T12:15:00.677

@hakre 没有提到的两点：

### 代码覆盖率

对代码覆盖率进行漂亮的报告（可视化执行了多少代码）并不是那么容易，即使 xDebug 使您可以快速进行，但有一些边缘情况和烦恼需要相当长的时间来构建。

[**`PHPUnit helps you out with a nice report.`**](http://www.phpunit.de/manual/3.6/en/code-coverage-analysis.html)

### 报告

测试时最重要的是能够快速找出问题所在。

为 PHP 中的所有内容（异常、对象、字符串、xml、json 等）构建[**`a nice diff`**](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertEquals)自己非常耗时

此外，在某些时候，您会想要迁移到像 PHPUnit 这样的连续集成服务器，[**`Jenkins`**](http://jenkins-ci.org/)并且像 PHPUnit 这样的测试框架已经生成了所有需要的工件（junit.xml、clover.xml），使您能够[**`set up CI for your projects in half an hour`**](http://edorian.posterous.com/setting-up-jenkins-for-php-projects).

* * *

因此，总而言之，即使您不使用所有高级功能和帮助程序（如模拟、用于测试遗留代码的进程隔离、输出缓冲、异常帮助程序），您也会获得一个基础设置，当您的项目增长时，该设置将能够与您一起增长并且变得更加成熟。

### 仅限 CLI

顺便提一句。有一个在浏览器中运行的[**`a web interface to phpunit`**](https://stackoverflow.com/questions/2424457/web-interface-to-phpunit-tests/8575361#8575361)调用。[**`Visual PHPUnit`**](https://github.com/NSinopoli/VisualPHPUnit)即便如此，老实说，我不知道为什么有人会*想要*那个。也许没有刷新，但我宁愿在 cli 终端上执行脚本循环。但对每个人来说都是自己的:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T11:59:56.830

> 创建我自己的脚本不是更好的主意吗？

**不**，这不是一个更好的主意。如果您创建自己的脚本，那么您就是在单独编程。使用 PHPUnit，您拥有一个庞大的用户社区，他们负责处理单元测试通常需要的各种功能，因此复制和共享代码以减少工作量是有好处的。

它是软件，只有被复制才不会变坏。此外，它还带有许多输入（例如配置）和输出（测试结果格式、代码覆盖率、报告）以及集成（命令行运行器、IDE、CI 服务器……）。当你今天开始时，你甚至不会接近的地方。

但是，您可以在不使用 PHPUnit 的情况下开始测试驱动开发并自己编写测试。这对于学习 TDD 非常有用，并且对于更好地理解为什么要使用测试框架也非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T05:22:17.750

我认为上面已经涵盖了它，但是由于没有标记正确的答案，所以让我补充一下：不要犯行业中犯的经典错误，即被驱使重新发明轮子。如果已经有事实上的标准，并且社区和/或企业支持任何带有路线图的软件......使用它。设计自己的解决方案的唯一好处是了解胆量如何更好地为其他已建立的解决方案工作。所以要回答你的问题，你能做到吗，是的，如果你，不，它是否具有教育意义，也许。为什么使用 PHP，您可以创建自己的语言。为什么使用框架 X，您可以创建自己的框架。你明白了。除非你真的有一种独特的方法，可以清楚地展示出比流行的现有方法更好的产品，否则它'

# xcode - 将行的值分配给全局变量

> ID：11863708
> 
> 赞同：0
> 
> 时间：2012-08-08T11:39:02.283
> 
> 标签：xcode, uitableview, ios5, sqlite

大家好，使用带有tableviews的sqlite3，将数据从tableView传递到视图控制器的事实实际上并没有起作用。（尝试了segue的准备并没有工作）所以我试图将所选行的内容分配到然后由第二个视图控制器访问的全局变量。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:56:23.537

在 .h 文件中，我应该将其声明为外部变量，并且在每个 .m 文件中正常声明它，在这种情况下，我们将可以全局访问该变量。

# google-maps - Google Maps API - 在域上禁用

> ID：11863709
> 
> 赞同：12
> 
> 时间：2012-08-08T11:39:05.490
> 
> 标签：google-maps, google-maps-api-3

当页面加载时，我收到消息作为 javascript 警报： `Google has disabled use of the Maps API for this application. See the Terms of Service for more information: http://www.google.com/intl/en-US_US/help/terms_maps.html.`

直到今天一切正常。谷歌网站管理员工具没有告诉我任何事情。

我的问题是我在哪里可以找到更多信息，为什么该页面已被禁止/阻止。（有很多可能的原因）

该怎么做才能解除封锁？向谁或向何处发送请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T06:57:14.897

我的 Web 应用程序也出现了同样的错误，我们通过更新指向 Google Maps API 文件的链接来修复它。

以前，我们使用的是位于[http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE](http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE)的 Maps API 文件的下载版本。

当我们改为使用直接链接时，这个特定的错误就消失了。

**编辑：**即使您直接链接到 Google 的 js 文件，请确保您的应用程序没有使用较旧的本地缓存版本。

不工作版本：

```
<script type="text/javascript" src="local_google_maps_api.js"> 
```

工作版本：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE"> 
```

Google 可能开始使用旧地址版本使 Google API v3 调用无效。Javascript代码文件主要区别在于API IP地址调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:53:19.817

对于收到此错误/警报的每个人，您必须：

1.) 确保您链接到在线 API，正如 Steve Feng 所指出的。将您用于访问 Google API 文件的代码替换为：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE"> 
```

2.) 确保清除页面的缓存 - 即使您已经使用上面的代码访问文件（就像我一样）。如果您在 Windows 平台上工作，可以通过按 [ctrl] + [F5] 或在 Mac 上按 [cmd] + [R]（或 ['apple'] + [R]）快速完成此操作。在 linux 上，一个简单的 [F5] 应该强制刷新。如果此按钮组合不起作用（或不适用于您），请查看[此网站](http://www.refreshyourcache.com/en/cache/)以获取有关清除缓存的更多信息。

在您清除缓存并确保您的代码从上面发布的 URL 访问 API 文件后，您不应再收到该消息（据我所知）。

AFAIK，无论您是否实际违反 Google 的条款和条件，都会出现此消息。此外，我发现使用不是 Google Maps 的 Google API 时可能会出现此消息。[此处](https://productforums.google.com/forum/?fromgroups#!topic/maps/56hL3dsrxuY%5B1-25%5D)的一个投诉示例（底部）。

我没有直接的证据可以相信这一点，但我认为当你做了一些事情来扰乱他们的一个 API 时，这条消息变成了谷歌的默认 (-ish) 错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:24:18.510

在一切正常工作几个月后，我突然在 iPhone Safari 上的网络应用程序中收到了这个警告。iPhone Chrome 浏览器有效，桌面 mac safari 和 chrome 有效。看不到条款被破坏的地方

奇怪的！清除我在 iPhone 上的缓存和 cookie 已清除问题。地图现在工作正常。一定是 api 发生了一些变化，这会触发最近访问过的用户的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:02:54.467

**从您的本地计算机**引用 Google 地图脚本会导致此问题。

只需将其引用回远程版本并将其添加`?sensor=false`到末尾，您就可以开始使用了。

# php - 转义sql语句的正确方法是什么？

> ID：11863710
> 
> 赞同：1
> 
> 时间：2012-08-08T11:39:06.397
> 
> 标签：php, character-encoding, escaping, mysqli, exploit

我阅读了很多关于常见 sql 注入的内容，因此对如何修复它们很感兴趣。在我只是习惯于 `addslashes()`（糟糕地）认为它会适合之前。然后我发现它`mysql(i)_real_escape_string()`比`addslashes()`. 从那时起我就开始使用`mysqli_real_escape_string()`，但最近我遇到了一些我还没有真正理解的东西。我在将数据发送到 mysql 和字符集时遇到了一些问题。所以，我再一次搜索，许多用户说`SET NAMES UTF8`这是让一切顺利的方法。但是后来我读到使用该查询`mysqli_real_escape_string()`无法正常工作。

所以毕竟我有点困惑。

转义sql语句的正确方法是什么？

有哪些可能的漏洞利用`SET NAMES UTF8`？

`mysqli_set_charset()`使连接以指定字符集进行通信的正确方法是什么？

使用`mysqli_sey_charset()`过程中mysql的内部变量是否发生了变化？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:42:38.607

您可以使用[mysqli 准备好的语句](http://php.net/manual/en/mysqli.prepare.php)来避免 SQL 注入 - 无需担心字符集编码。

链接中的一个示例：

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("s", $city);

    /* execute query */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($district);

    /* fetch value */
    $stmt->fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt->close();
}

/* close connection */
$mysqli->close();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:11:27.157

由于向后兼容性问题，仅支持传递手动构造的查询。现代应用程序永远不应该这样做，而是使用准备好的语句。

话虽如此，如果您对使用手动构造的查询一无所知，那么逃避它们的正确方法是使用 mysql_real_escape_string()，并将编码设置为 UTF-8。

您可以在 OWASP 网站上找到更多详细信息：[https ://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T23:35:31.267

只要你明确设置连接对象的字符集，你应该没问题：

```
mysql_set_charset('utf8', $db); // for mysql
$db->set_charset('utf8'); // for mysqli 
```

字符集的相同问题适用于 PDO 准备语句，因此 PDO 是推荐的方式，但在这种情况下它并不能使您安全。

`mysqli_real_escape_string()`使用已定义的字符集没有问题。注意你对连接对象和 HTML 页面使用 UTF-8，这样可以避免很多问题。

我找到的关于这个主题的最佳解释是由 PHP 作者 ircmacell 编写的，一次用于[mysql_real_escape_string()](https://stackoverflow.com/a/12118602/575765)，一次用于[PDO](https://stackoverflow.com/a/12202218/575765)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:37:48.160

只是为了纠正问题和答案中的许多错误信息。

1.  **不是“语句”，而是字符串文字。**转义“SQL 语句”是一种直接的注入方式。只有字符串必须转义，而其他查询部分需要不同且完全不同的格式，转义对他们没有丝毫好处。
2.  所有这些转义/编码混乱只与一些边缘编码有关，如 GBK。使用 UTF-8，您甚至可以使用 addlashes()
3.  由于 5.3 PDO 可以设置客户端编码，只要在 DSN 中设置。

> 转义sql语句的正确方法是什么？

[在 PHP 中向数据库提交字符串时，我应该使用 htmlspecialchars() 处理非法字符还是使用正则表达式？](https://stackoverflow.com/questions/2993027/in-php-when-submitting-strings-to-the-database-should-i-take-care-of-illegal-cha/2995163#2995163)

> 使用 SET NAMES UTF8 的可能漏洞是什么？

没有任何

> mysqli_set_charset() 是使连接以指定字符集进行通信的正确方法吗？

当然。
它必须使用 HTML 页面上使用的实际字符集。

# c# - Copying string to char array quickly

> ID：11863715
> 
> 赞同：2
> 
> 时间：2012-08-08T11:39:33.410
> 
> 标签：c#, string, input

I need to read a string from standard input, perform some operations and meanwhile I need to copy some of input to char array. In C++ I could do it like this:

```
scanf("%s", &array[pos]); 
```

which copies string `s` to char `array` at position `pos`. I need to do do this very quickly (olympic task). Reading from one big while in C++ took 5 sec. On C# I tried copying to array using `string.elementAt()` in a loop but it took 70 seconds, which is way too much. Also, building one big string and than using string.ToCharArray() is a bad idea. Any ideas how to do that?

```
char[] ciag = new char[1010001];
for(int x = 0 ; x < n ; x++){
line = Console.ReadLine();
sekw[x] = poz;
len = int.Parse(line.Split(' ')[0]);  //length of string to copy
string znaki = line.Split(' ')[1];    //copied string
for (int j = 0; j < len; j++)
{
ciag[poz + j] = znaki[j];  //put into array. Perhaps slow.
}
poz += len;
ciag[poz++] = 'k';  //my stuff
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:15:15.417

```
public void CopyTo(
    int sourceIndex,
    char[] destination,
    int destinationIndex,
    int count
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:51:36.290

```
for (int x = 0; x < n; x++)
        {
            line = Console.ReadLine();
            sekw[x] = poz;
            len = int.Parse(line.Split(' ')[0]);
            char[] temp = line.Split(' ')[1].ToCharArray();
            **Array.Copy(temp, 0, ciag, poz, temp.Length);** 
            poz += len;
            ciag[poz++] = 'k';
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:17:01.353

用这个：

```
using (Stream stdin = Console.OpenStandardInput())
{
    byte[] buffer = new byte[1024];
    stdin.Read(buffer, 0, buffer.Length);
    char[] inputCharArray = System.Text.Encoding.Default.GetChars(buffer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:01:25.403

尝试：

```
char[] c = new char[stringa.Length];   

for(int i = 0;i<stringa.Length;i++){
     c[i] = stringa[i];
} 
```

我不确定它是否会提高性能。虽然清楚地解释你需要什么真的很有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:24:36.567

使用`StringBuilder`.

此代码在大约一秒内处理 100 x 10000 个字符。如果您需要它更快，您可以使用 TPL - 命名空间中的任务并行库使您的任务并行：System.Threading.Tasks

```
using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            char[] input = CreateInput();
            DateTime start = DateTime.Now;
            for (int i = 1; i < 100; i++)
            {
                StringCutter(new String(input));
            }
            Console.WriteLine((DateTime.Now - start).ToString());
            Console.ReadKey();
        }

        private static char[] CreateInput()
        {
            const int len = 10000;
            char[] ret = new char[len];
            for (int i = 0; i < len; i++)
            {
                ret[i] = Convert.ToChar(i % 256);
            }
            return ret;
        }

        private static String StringCutter(String str)
        {
            List<char> exclusion = new List<char> { 'A', 'E', 'I', 'O', 'U', 'a', 'e', 'i', 'o', 'u' };
            StringBuilder result = new StringBuilder(str);
            for (int i = 0; i < result.Length; i++)
            {
                if (!(exclusion.Contains(result[i])))
                {
                    result.Remove(i, 1);
                    i--;
                }
            }
            return result.ToString();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T21:44:52.057

你可以做

`char[] Words = "Exemple string test".ToCharArray();`

`char[] Words = Console.ReadLine().ToCharArray();`

# java - Out of memory with tomcat 6 on RedHat but not in debian

> ID：11863716
> 
> 赞同：1
> 
> 时间：2012-08-08T11:39:35.033
> 
> 标签：java, tomcat, liferay

I am using liferay 6.0.6 with tomcat 6 and using terracotta 3.5.4. The terracotta installation in on another server and works fine.

The debian and redhat systems are virtual machines and use the exact same virtual hardware. 1 cpu , 4gb ram, both 64bit OS.

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (rhel-1.48.1.11.3.el6_2-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

If im using a debian system and boot the application then it everything works as expected.

If im using the redhat system then i get an error :

```
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:657)
    at java.util.Timer.<init>(Timer.java:176)
    at com.tc.object.locks.ClientLockManagerImpl.<init>(ClientLockManagerImpl.java:39)
    at com.tc.object.StandardDSOClientBuilder.createLockManager(StandardDSOClientBuilder.java:190)
    at com.tc.object.DistributedObjectClient.start(DistributedObjectClient.java:639)
    at com.tc.object.bytecode.ManagerImpl$2.execute(ManagerImpl.java:263)
    at com.tc.lang.StartupHelper.startUp(StartupHelper.java:39)
    at com.tc.object.bytecode.ManagerImpl.startClient(ManagerImpl.java:281)
    at com.tc.object.bytecode.ManagerImpl.init(ManagerImpl.java:202)
    at com.tc.object.bytecode.ManagerImpl.init(ManagerImpl.java:190)
    at com.tc.object.bytecode.hook.impl.DSOContextImpl.createStandaloneContext(DSOContextImpl.java:179)
    at org.terracotta.express.StandaloneL1Boot.call(StandaloneL1Boot.java:190)
    at org.terracotta.express.ClientImpl.<init>(ClientImpl.java:309)
    at org.terracotta.express.ClientFactoryImpl.newClient(ClientFactoryImpl.java:232)
    at org.terracotta.express.ClientFactoryImpl.createClient(ClientFactoryImpl.java:225)
    at org.terracotta.express.ClientFactoryImpl.createClient(ClientFactoryImpl.java:212)
    at org.terracotta.express.ClientFactoryImpl.getOrCreateClient(ClientFactoryImpl.java:190)
    at org.terracotta.express.ClientFactory.getOrCreateClient(ClientFactory.java:28)
    at net.sf.ehcache.terracotta.StandaloneTerracottaClusteredInstanceFactory.<init>(StandaloneTerracottaClusteredInstanceFactory.java:37)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 
```

The weirdest part of this error is that memory is not used. I have set the Xmx at 3500m but the memory usage never climbs above 2.3gb.

I've been searching for a possible cause and found this : [Low Java single process thread limit in Red Hat Linux](https://stackoverflow.com/questions/116640/low-java-single-process-thread-limit-in-red-hat-linux)

So i changed my ulimit -n and ulimit -u to 80000 but still nothing changes.

I then edited my /etc/security/limits.conf

```
*       soft    nproc           81920
*       hard    nproc           81920
*       soft    nofile          81920
*       hard    nofile          81920 
```

I also edited /etc/sysctl.conf

```
fs.file-max = 100000 
```

then i rebooted.

I also added -Xms=2g to my setenv.sh

I increased -Xss to -Xss5000k

I run echo 200000 > /proc/sys/kernel/threads-max

But the same error still comes up. Any ideas ?

free -m at begining of booting

```
 total       used       free     shared    buffers     cached
Mem:          3963       1027       2935          0         25        748
-/+ buffers/cache:        253       3709
Swap:         2047         18       2029 
```

free -m just before crash

```
 total       used       free     shared    buffers     cached
Mem:          3963       2897       1065          0         31        823
-/+ buffers/cache:       2043       1920
Swap:         2047         18       2029 
```

Update : i also tried with a machine with 8gb ram and the same result appears.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:32:50.023

Java 进程包含几个内存池。[java内存结构](http://4.bp.blogspot.com/-sP7by9zlbVQ/TaZ5LIfRxdI/AAAAAAAAAmg/diXDFa64OTo/s1600/MemoryStructure.png)

在您的情况下，OutOfMemory 错误说：您的 Java 进程中没有足够的空间用于堆栈分配。

*   因此，如果您增加*-Xss*池，您可以在应用程序中启动更少的线程数。尝试减少*-Xss*参数。具有大堆栈的线程，您可以从[特殊的构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread%28java.lang.ThreadGroup,%20java.lang.Runnable,%20java.lang.String,%20long%29)开始。
*   您还可以减少堆内存，因为为堆分配的内存越多（堆不一定使用），堆栈中可用的内存就越少。
*   或者甚至更好地尝试使用 ThreadPool 等检查您的应用程序结构并减少应用程序中的线程数

# iphone - method declare error textfielddidbeginediting

> ID：11863718
> 
> 赞同：4
> 
> 时间：2012-08-08T11:39:56.580
> 
> 标签：iphone, ios, ipad

when i use this method

```
-(void)textFieldDidBeginEditing:(UITextField *)textField 
```

it gives me an error

use of undeclared identifier 'textFieldDidBeginEditing'

tell me the solution..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:44:05.050

编辑：

```
yourTextField.delegate = self; 
```

我想你忘了这个：

```
@interface YourViewController : UIViewController <UITextFieldDelegate> 
```

# java - 用另一个初始化一个类成员

> ID：11863720
> 
> 赞同：0
> 
> 时间：2012-08-08T11:40:02.980
> 
> 标签：java, initialization, default

```
@Entity
@Table(name = "artist")
public class Artist implements java.io.Serializable{

    @Basic
    @Column(name = "is_active",nullable=false)
    private Boolean isActive = false;

    @OneToMany(mappedBy = "artist", cascade = {CascadeType.ALL}, fetch = FetchType.LAZY)
    private Set<Project> projects= new HashSet<Project>(); 
} 
```

和

```
@Entity
@Table(name = "project")
public class Project implements java.io.Serializable{

     @ManyToOne(fetch = FetchType.LAZY)
     @JoinColumn(name = "artist_id")
     private Artist artist;

     @Basic
     @Column(name = "is_active",nullable=false)
     private Boolean isActive = false;
} 
```

我可以像下面这样初始化`isActive`，其目的是 's flag 由's flag初始化`Project``Project``Artist`

```
private Boolean isActive = ((getArtist()!=null)? getArtist().getIsActive(): false); 
```

定义成员的顺序是否总是`Project`会导致`isActive`错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:59:18.483

与该声明：

```
private Boolean isActive = ((getArtist()!=null)? getArtist().getIsActive(): false); 
```

isActive 将始终为 false，因为 Artist 和 isActive 都将在 Project 的默认构造函数之前初始化。所以artist被初始化为null，然后isActive被初始化为false（因为getArtist()为null），然后Project的默认构造函数运行（但是构造函数什么都不做），所以isActive总是false。

# ios - Accidentally deleted mainWindow.xib

> ID：11863724
> 
> 赞同：0
> 
> 时间：2012-08-08T11:40:28.000
> 
> 标签：ios, cocoa-touch, mainwindow

In My iPad app, I accidentally deleted the MainWindow.Xib, any solution?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:48:10.480

从相同模板的另一个项目复制粘贴 MainWindow.xib 并将该文件的类设置为您的 appdelegate 类的名称。或添加新的 xib (uiapplication) 并将其委托设置为您的应用委托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:48:35.647

你应该重新创建它。

`File`-> `New`-> `File...`--- `iOS User Interface`-> `View`-> `Next`-> `iPad`-> `Next`-> 设置名称`MainViewController.xib`->`Create`和*violá* ...

你已经完成了！

或者...

使用*TimeMachine*备份它，或者如果您使用任何版本控制系统（即 git），您只需重置删除，您就可以取回原始`MainViewController.xib`.

# php - CakePHP - 使用数据库为表单中的下拉列表构建结果

> ID：11863728
> 
> 赞同：0
> 
> 时间：2012-08-08T11:40:38.483
> 
> 标签：php, cakephp

我想做的是使用 Form Helper 构建一个带有 options 的选择下拉菜单。这些选项是从我的数据库构建的。此表中有 100 多个条目。下面是我用于 find 命令的代码行。

```
$company = $this->Company->find('list'); 
```

这就是我现在正在做的构建它，但这所做的只是显示一个结果而不是全部 100。

```
 foreach ($company as $c=>$value) { $test = $value; }

      $tmp = $this->Form->input('Client', array('options' => array($test))); 
```

但是，如果我这样做，

```
 foreach ($company as $c=>$value) { $test = $value; 

      $tmp = $this->Form->input('Client', array('options' => array($test)));
   } 
```

然后打印/回显所有结果。但是它们每个都在自己的下拉菜单中，所以我的屏幕上有超过 100 个下拉菜单。我认为这是因为 foreach 循环一次又一次地循环打印每条记录，直到全部完成。

那么我怎样才能让它只显示一个包含我所有结果/记录的下拉菜单呢？

我在这里查看了许多不同的帖子，并且有很多方法可以做到这一点，但我似乎无法让它们中的任何一个起作用！

我已经打开了表格 OK，并且已经建立了一个下拉列表，但是在 PHP 文件中列出了一个数组，所以这很容易并且有效！

请帮忙？

谢谢格伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:46:23.833

改变：

```
$this->Form->input('Client', array('options' => array($test))); 
```

至

```
$this->Form->input('Client', array('options' => array($company))); 
```

由于您从数据库中获取列表，其格式为：

```
array(
 key => value
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:57:53.260

```
$this->Form->input('Client', array('options' => array($company))); 
```

您可以直接使用该数组。它会工作

# javascript - 模态弹出服务器端处理

> ID：11863731
> 
> 赞同：0
> 
> 时间：2012-08-08T11:40:45.943
> 
> 标签：javascript, asp.net, ajax, modalpopupextender

我尝试使用 ajax 模式弹出窗口，但是当我单击目标按钮时没有任何反应！

```
protected void ibtn_login_Click(object sender, ImageClickEventArgs e)
        {
                    .........
                    pnl_email.Visible = true;
                    this.mod_email.Show();
                    .........

        } 
```

* * *

```
<asp:Panel ID="pnl_email" runat="server" Visible="false">
        <table border="0" align="right" cellpadding="0" cellspacing="0" class="MainTable">
            <tr>
                <td align="left">
                    <label>
                        UserMail<font color="red"> *</font></label>
                </td>
                <td align="left">
                    <asp:TextBox ID="txt_email" runat="server" Width="350px" ValidationGroup="E"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*"
                        ControlToValidate="txt_email" ValidationGroup="E">*</asp:RequiredFieldValidator>
                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txt_email"
                        ErrorMessage="Invalid mail" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
                        ValidationGroup="E">*</asp:RegularExpressionValidator>
                </td>
            </tr>
            <tr>
                <td align="center" colspan="2">
                    <asp:Button ID="btn_confirmMail" runat="server" Text="Confirm Mail" OnClick="btn_confirmMail_Click"
                        ValidationGroup="E" />
                </td>
            </tr>
        </table>
    </asp:Panel>
    <asp:ModalPopupExtender ID="mod_email" runat="server" TargetControlID="ibtn_login" 
        PopupControlID="pnl_email" BackgroundCssClass="modalBackground" DropShadow="true"
        OkControlID="btn_confirmMail">
    </asp:ModalPopupExtender> 
```

* * *

我从 IE 收到以下错误：

> SCRIPT87：参数无效。ScriptResource.axd?d=92AV6VxPb6EpSOraO2TfCghg2URfn_e1UnUMJeJSBpUklUTQUPbjulsV4_SUVHYavVKrhWStNKamtzKpd-i0CMF0IZIaiu5Rsqsi2-YgiWOQswz5wtr2VOzzJrpNOMeTHlqd4KNSoOxi2-yulEg6OaXbmIU1&t=ffffffff9b7d03cf, line 1262 character 13

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:53:04.603

`mod_email.show()`我想这就是你要找的

另外，试试

在 asp:Panel 中包装更新面板或将内容放在更新面板中 `<asp:Panel ID="pnl_email" runat="server" Visible="false">`
`<asp:UpdatePanel ID="UpdatePanel1" runat="server">`
`<ContentTemplate>`
`<table border="0" align="right" cellpadding="0" cellspacing="0" class="MainTable">`
`...`
`</table>`
`</ContentTemplate>`
`</asp:UpdatePanel>`
`</asp:Panel>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:50:23.390

确保您的页面上有**脚本管理器** ：

```
<asp:scriptmanager id="ScriptManager1" runat="server">
</asp:scriptmanager> 
```

# authentication - 跨子域登录管理

> ID：11863735
> 
> 赞同：1
> 
> 时间：2012-08-08T11:41:05.130
> 
> 标签：authentication, web-applications, security, subdomain

我们有一个建立在一个平台上的受登录保护的 Web 应用程序和一个建立在另一个平台上的面向公众的网站。公共网站旨在推广网络应用程序，人们一旦注册就可以访问该应用程序。

现在我们有根域下的公共站点：ourwebapp.com，以及子域 app.ourwebapp.com 下的应用程序。登录/身份验证由应用程序处理，但我们希望简化用户体验，以便如果他们转到根域但登录到应用程序，那么根域会将他们重定向到应用程序 url。

一个例子是 Netflix。如果您使用 netflix 登录并导航到 netflix.com，它会自动将您重定向到受登录保护的 movies.netflix.com 网址。

有没有一种通用的方法来实现这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:12:47.240

如果您的根域页面可以访问身份验证存储（数据库？），您可以通过脏脚本来完成。更简洁的解决方案是为您的应用程序实现一个 API，该 API 可通过 Web 服务访问并在您的网页上使用。

# php - PayPal 快速结账不返回交易 ID

> ID：11863737
> 
> 赞同：0
> 
> 时间：2012-08-08T11:41:42.337
> 
> 标签：php, paypal

我已经从这个 url 下载了 paypal express 结帐代码

```
https://github.com/hrendoh/PayPal-Express-Checkout-example 
```

当我点击按钮时，它会重定向到贝宝页面，但没有在贝宝网站上填写金额，也没有获得交易 ID，但付款工作正常。请咨询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:33:42.370

您可能只调用`SetExpressCheckout`API 调用。一旦您的买家点击您的“RETURNURL”页面，您还需要调用`DoExpressCheckoutPayment`API 以完成交易。

另请参阅我[在 PayPal Express Checkout 中缺少金额和订单摘要的回答](https://stackoverflow.com/questions/8206175/missing-amount-and-order-summary-in-paypal-express-checkout/8213842#8213842)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:21:59.530

请提供一些您使用过的示例代码。我还发布了以下链接，它可以帮助我解决类似的问题。

[Paypal SandBox IPN 总是返回 INVALID](https://stackoverflow.com/questions/11746644/paypal-sandbox-ipn-always-returns-invalid/11796543#11796543)

# jquery - 图表未按预期显示

> ID：11863739
> 
> 赞同：0
> 
> 时间：2012-08-08T11:41:44.260
> 
> 标签：jquery, arrays, charts, load

我正在使用高图表显示饼图，如下所示。

问题是，如果在从 XML 解析数据并填充数组时我没有在代码之间使用警报，则图表不会显示，如下例所示：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script> 
    <script src="parseData.js" ></script>

    <script>

    var cntItem=0;
    var cntCategory=0;
    var categoryGroup;
    var itemGroup;
    var catdata=[];
    parseData(function (totalCategories,totalItems,items,categories) {

        cntItem=totalItems;
        cntCategory=totalCategories;
        categoryGroup=categories;
        itemGroup=items;        
    }); 
    alert('asfas');
    var numerator=100;
    var denominator=cntCategory;
    var remainder = (100/13);
    var cnt=0;
            var itemdata = [
                      ['aloogobi', 42.0],
                      ['pannermakhani', 26.8],
                      {
                          name: 'Chrome',
                          y: 14.8,
                          sliced: true,
                          selected: true
                      },
                      ['mattuerpaneer', 6.5],
                      ['Jaipuri', 8.2],
                      ['Kolapuri', 0.7]
                  ]; 

                for(var i=0;i<categoryGroup.length;i++){
                    var temp=[categoryGroup[i][1],7.5];
                    catdata.push(temp);                 
                }  

     $(document).ready(function () {    

            RenderPieChart('container', catdata);     

            function RenderPieChart(elementId, dataList) {
                new Highcharts.Chart({
                    chart: {
                        renderTo: elementId,
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    }, title: {
                        text: 'Browser market shares at a specific website, 2010'
                    },
                    tooltip: {
                        formatter: function () {
                            return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                        }
                    },
                    plotOptions:{
                        series: {
                            cursor: 'pointer',
                                point: {
                                    events: {
                                        click: function() {
                                            ++cnt;
                                            if(cnt=='1'){
                                                RenderPieChart('container', catdata);
                                                alert(catdata[this.x][0]+" - "+catdata[this.x][1]);                                             
                                            }
                                            if(cnt=='2'){
                                                RenderPieChart('container',itemdata);   
                                                alert(itemdata[this.x][0]+" - "+itemdata[this.x][1]);                                               
                                            }   
                                        }
                                    }
                                }
                        }
                    },
                    series: [{
                        type: 'pie',
                        name: 'Browser share',
                        data: dataList
                    }]
                });
            };
        });

    </script>
</head>
<body>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    <input type="button" id="categoryPieChart" value="Category Chart" />
    <input type="button" id="itemPiechat" value="Item Chart" />
</body>
</html> 
```

这`parsedData`是解析 XML 并返回数组的 ajax 函数的回调；现在，在我在“Renderpiechart()”函数中调用并加载数据以绘制饼图之前，我放置了一个警报并显示图表，但如果我删除警报，则不会显示图表。我的东西`catdata`名称数组还没有填充，所以图表没有显示。

这是我解析的数据 js 文件：

```
<script src="js/jquery1-7-2.min.js" type="text/javascript" ></script>
var categories=[];
var items=[];
var totalCategories;
var totalItems;

function parseData(callback){   
        var cnt=0;
            $.ajax({
                type:"GET",
                url:"test.xml",
                success:function(xml){                                      
                    totalCategories = $(xml).find('totalCategories').text();
                    totalItems = $(xml).find('totalItems').text();
                    $(xml).find('category').each(function(){
                        var tempcategory= new Array();                      
                        var catogoryId = $(this).find('cat_id').text();
                        var catogoryName = $(this).find('cat_name').text();
                        tempcategory[0]=catogoryId;
                        tempcategory[1]=catogoryName;
                        categories[cnt]=tempcategory;
                        cnt++;                      
                    });                     
                    cnt=0;
                    $(xml).find('items').each(function(){
                        var tempitem=new Array();
                        var catId = $(this).find('category_id').text();
                        var itemId = (this).find('item_id').text();
                        var itemName = (this).find('item_name').text();

                        var itemtype = $(this).find('type').text();
                        tempitem[0]=catId;
                        tempitem[1]=itemId;
                                            tempitem[2]=itemname;
                        items[cnt]=tempitem;
                        cnt++;                  
                    });                     
                  callback.call(null,totalCategories,totalItems,items,categories);
                },
                error: function(){
                    alert("An error occurred while processing XML file.");
                }               
            }); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:53:06.380

设置回调`parseData`并不意味着脚本挂起，直到它回来。因此，您的脚本中发生的事情是您正在调用`parseData`，而后者又执行 ajax 请求，但与此同时，脚本继续并调用`RenderPieChart`，但尚未填充图表数据。

这就是为什么，如果您发出警报，您将看到数据，因为警报会阻止脚本，因此`parseData`有足够的时间来完成。

我建议您将调用放在`parseData`ajax的回调中`document.ready()`，然后调用：`RenderPieChart`

```
function parseData(callback){   
        var cnt=0;
            $.ajax({
                type:"GET",
                url:"test.xml",
                success:function(xml){                                      
                   ....                  
                  callback.call(null,totalCategories,totalItems,items,categories);
                  RenderPieChart('container', catdata);   
                },
                    ...          
            }); 
    } 
```

# c# - 使用 C# SDK 获取 Facebook 帖子

> ID：11863741
> 
> 赞同：0
> 
> 时间：2012-08-08T11:41:45.490
> 
> 标签：c#, facebook, facebook-c#-sdk, facebook-opengraph

有没有办法使用 facebook c# sdk 获取有关帖子的信息？我有帖子 ID，所以我正在尝试使用它来查询 facebook 服务器。

```
string test = VendorShop.Services.Sess.getQueryString("signed_request");
var signed_request_obj  = testClient.ParseSignedRequest( appSecret, test);
var obj = testClient.Get(
    "https://developers.facebook.com/tools/debug/og/action?q=330203520408060"); 
```

我已经尝试使用 c# sdk 获取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:43:33.877

您可以通过图形 api 并传递访问令牌
// 注意：将**ur_postid**替换为实际的 postid，将**ur_accesstoken**替换为您的facebook 访问令牌

```
string test = VendorShop.Services.Sess.getQueryString("signed_request");
var signed_request_obj  = testClient.ParseSignedRequest( appSecret, test);
var obj = testClient.Get(
"https://graph.facebook.com/ur_postid?access_token=ur_accesstoken"); 
```

// 你可以使用**graph api explorer**来测试它

# html - 如何垂直对齐图像并输入 type="text" 填充表格单元格？

> ID：11863751
> 
> 赞同：2
> 
> 时间：2012-08-08T11:42:05.350
> 
> 标签：html, css, html-table, cross-browser

我有 input type="text" 和 image 按钮，我想输入来填充 tabe 单元格。我使用[Style 输入元素中的解决方案来填充其容器的剩余宽度](https://stackoverflow.com/questions/773517/style-input-element-to-fill-remaining-width-of-its-container)，但是两个元素的**垂直对齐有问题。**我需要将元素的中心放在相同的高度上。HTML：

```
<table border="1" >    
  <tr><td>
      <div style="width:200px">hhhh
      </div></td><td>sssss</td>
  </tr>      
  <tr>
    <td >
      <div style='width:100%;display:table'>        
        <INPUT type='text' class='txt' ID='A12x1' NAME='A12x1'   />
        <input style='display: table-cell;' type='image' class='btn' src='http://myimages.bravenet.com/109/910/420/9/Arrow.png'/>
      </div></td><td>kpu</td>
  </tr>
</table> 
```

CSS：

```
 .txt 
{ BORDER: silver 1px solid;  
  width:100%;
  vertical-align:middle;
  display: table-cell;
    }

.btn{ cursor: pointer;
       width: 18px;
    height: 26px;
    vertical-align: middle;
    } 
```

[http://jsfiddle.net/xqaN4/4/](http://jsfiddle.net/xqaN4/4/)

我已经尝试了各种对齐组合，在第二位`<img>`，`<span>`或者`<div>`与背景图像没有成功。最好的解决方案是在 s 中包含这两个元素`<div>`（显示：table-cell），但是这个解决方案破坏了在 chrome 中填充宽度。

第二个问题是实现**输入和按钮的高度相同**。

我需要兼容 IE8+、Firefox、saf (Chrome)。
注意：图片是在网络上找到的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:48:39.050

检查这个

**水平对齐**

[http://jsfiddle.net/xqaN4/5/](http://jsfiddle.net/xqaN4/5/)

```
.txt
{ BORDER: silver 1px solid;  
  vertical-align:middle;
  display: table-cell;
    } 
```

**垂直对齐**

[http://jsfiddle.net/xqaN4/7/](http://jsfiddle.net/xqaN4/7/)

# javascript - 具有视差背景的多平台网站

> ID：11863752
> 
> 赞同：0
> 
> 时间：2012-08-08T11:42:21.417
> 
> 标签：javascript, html

我有一个具有轻微动画（视差）背景的网站的请求。完全支持 IE8。如果可能的话，平板电脑支持（如 iPad 和安卓平板电脑）。

选择其中两个，这很容易做到，但试图涵盖所有三个有点令人生畏......有人知道哪些语言/技术可以涵盖所有这三个请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:37:45.413

我正在做一个类似的项目。iOS 不支持正常的视差方法，因为浏览器通常会在滚动事件期间冻结脚本和过渡。

但是，如果您使用[iScroll](http://cubiq.org/iscroll-4)来处理滚动，您可以覆盖它并在 iPhone 和 iPad 上获得相当平滑的视差效果。

IE 不支持 CSS 过渡，所以你需要一个纯 JavaScript 驱动的视差插件。我使用 Ian Lunn 的[jQuery Parallax](http://www.ianlunn.co.uk/plugins/jquery-parallax/)虽然我怀疑它不是非常有效。（我有*很多*移动元素，虽然它在 Chrome 中看起来不错，但看起来我的电脑在 IE 中坐在油漆混合器上。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:21:53.860

视差，有 2 种口味，水平和垂直。对于水平视差，您只需要 CSS 和 2 或 3 个以 % 为单位的背景图像。另一方面，垂直视差，您需要 JavaScript。

然后我会重新考虑平板电脑上的水平视差效果，因为如果你调整浏览器窗口的大小，你只会看到水平视差，这在平板电脑上似乎不太可能。

但我想你会做一个垂直：如果你用 JavaScript 做一个垂直视差，你可以覆盖所有设备。

# javascript - Javascript 打印在 IE9 中不起作用

> ID：11863753
> 
> 赞同：2
> 
> 时间：2012-08-08T11:42:30.780
> 
> 标签：javascript, internet-explorer

为什么这段代码（打印 iFrame）在 IE 中不起作用。什么是可行的解决方案？

```
<script type="text/javascript">
function printTrigger(elementId) {
    var getMyFrame = document.getElementById(elementId);
    getMyFrame.focus();
    getMyFrame.contentWindow.print();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:39:31.587

`getMyFrame.print();`应该可以打印 iframe。

# java - 使用 JUnit 测试 Spring 控制器

> ID：11863754
> 
> 赞同：1
> 
> 时间：2012-08-08T11:42:36.130
> 
> 标签：java, spring, google-app-engine, junit

如何在 Spring Controller 中测试“资源”：

```
@RequestMapping(value = "/{query}", method = RequestMethod.GET)
public @ResponseBody String getResource(
        HttpServletRequest req, 
        HttpServletResponse res,
        @PathVariable String query,
        @RequestParam(value="param1", required = false) String param1,
        @RequestParam(value="param2", required = false) String param2) throws SomeException{
    return service.read(query);
} 
```

由于我正在使用 App Engine 进行开发，因此我有一个这样的 JUnit 脚手架：

```
@ContextConfiguration(locations = { "classpath:service/client-config.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
public class LocalDatastoreTest {
    private final LocalServiceTestHelper helper =
            new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());  

    @Before
    public void setUp() {
        helper.setUp();
    }

    @After
    public void tearDown() {
        helper.tearDown();
    }   

    @Test
    public void test() {

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:11:57.507

如果您有一个测试服务器启动并运行，请尝试在您的测试方法中使用 Spring RestTemplate

就像是：

```
RestTemplate restTemplate = new RestTemplate();
String result = restTemplate.getForObject("YOUR_URL/{query}", String.class,"myQuery"); 
```

[在这里](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)查看更多。

如果您没有服务器并且需要基本的单元测试，请尝试**模拟**一个。[有关另一个stackoverflow 问题](https://stackoverflow.com/questions/9138555/spring-framework-test-restful-web-service-controller-offline-i-e-no-server-n)的更多信息。

或尝试使用[https://github.com/SpringSource/spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)

# python - 计算表中是否存在某个因子的组合

> ID：11863759
> 
> 赞同：4
> 
> 时间：2012-08-08T11:42:44.707
> 
> 标签：python, perl, bash, bioinformatics

我有一张像下面这样的表格，想计算存在的不同因素组合。例如，所有人都在场的次数（1 表示存在，0 表示不存在）。第一时间不存在但休息存在，第二时间不存在但其他时间存在，以及双打和三打不存在且休息存在。

在 shell 中，检查所有人都存在的时间非常简单

awk '{if (($2 == 1) && ($3==1) && ($4==1) && ($5==1) && ($6==1)) 打印 $1}'ALL_Freq_motif_AE_Uper

但问题是计算所有可能的组合。

该表如下所示：

```
CEBP    HEB     TAL1    RUNX1   SPI1
1       1       1       1       1
0       1       1       1       1
1       1       0       0       1
1       1       1       1       0
0       0       0       1       1 
```

现在从这张表中产生了不同的组合

1 个组合，所有都存在。
2 第一个缺席，所有其他人都在
3 最后一个缺席，但其他人在场
4 第三和第四人缺席，但其他人在场
5 前三个人缺席，但其他人在场。

在像这样具有固定列数和 n 行数的表中，我如何计算存在和不存在的这些组合？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:08:07.977

假设它`data`包含您的数据，这可以完成这项工作：

```
with open("data") as f:
        lines=[line.strip().split() for line in f]
combinations={}
for combination in lines[1:]:
        key=", ".join([lines[0][i]
                for i in xrange(len(combination))
                if combination[i] != '0'])
        combinations[key]=combinations.setdefault(key, 0)+1
for key, value in combinations.iteritems():
        print value, '\t', key 
```

或者，使用集合模块：

```
import collections

with open("data") as f:
        lines=[line.strip().split() for line in f]

combinations=collections.Counter(
        ", ".join(lines[0][i]
                for i in xrange(len(combination))
                        if combination[i] != '0')
                for combination in lines[1:])

for key, value in combinations.iteritems():
        print value, '\t', key 
```

**编辑：**另一个版本使用生成器表达式节省资源

```
import collections

with open("data") as f:
        lines=(line.strip().split() for line in f)
        header=next(lines)
        combinations=collections.Counter(
                ", ".join(header[i]
                        for i in xrange(len(combination))
                                if combination[i] != '0')
                        for combination in lines)
        for key, value in combinations.iteritems():
                print value, '\t', key 
```

我确信这可以改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:47:04.077

一个 Perl 程序，将所有组合视为二进制数。我重复了几行以确保计数有效。

```
use strict;
use warnings;
use Bit::Vector;

# CEBP       HEB     TAL1      RUNX1   SPI1
my @factors = (
    [1,      1,       1,       1,       1],
    [1,      1,       1,       1,       1],
    [1,      1,       1,       1,       1],
    [0,      1,       1,       1,       1],
    [1,      1,       0,       0,       1],
    [1,      1,       1,       1,       0],
    [0,      0,       0,       1,       1],
    [0,      0,       0,       1,       1],
    [0,      0,       0,       1,       1],
);

my %combo;

for my $row (@factors) {
    my $v = Bit::Vector->new_Bin(32, join('', @$row))->to_Dec;
    $combo{$v}++;
}

for my $v (sort keys %combo) {
    printf "Result: %3d  %5s Count: %d\n", 
        $v, 
        Bit::Vector->new_Dec(5, $v)->to_Bin,
        $combo{$v}
    ;
} 
```

输出：

```
Result:  15  01111 Count: 1
Result:  25  11001 Count: 1
Result:   3  00011 Count: 3
Result:  30  11110 Count: 1
Result:  31  11111 Count: 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:21:58.777

比 hochi 的解决方案更长，但它的工作原理可能更清楚：

```
with open("data") as f:
    next(f)    # Skip header row
    lines=[[int(n) for n in x.strip().split()] for x in f if x.strip()]

count = 0
for row in lines:
    if all(row):
        count += 1
print "All present:", count

count = 0
for row in lines:
    if (not row[0]) and all(row[1:]):
        count += 1
print "All except first column are 1:", count 
```

我不会做所有的情况，但这应该给你的想法。

# ios - 有没有办法设置呼叫电话号码的名称？

> ID：11863761
> 
> 赞同：0
> 
> 时间：2012-08-08T11:42:48.070
> 
> 标签：ios, xcode, call, default, tel

我使用此代码拨打用户在设置中设置的号码。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        NSString *telURL = [NSString stringWithFormat:@"tel:%@", [defaults objectForKey:@"stringKey"]];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:telURL]]; 
```

我可以为电话号码设置默认名称吗？就像在这个应用程序中一样，他们设置了一个坐标：

![在此处输入图像描述](../Images/e5aebd815ab81bfa0b4654c668fa3dc0.png)

# javascript - 使用左右箭头更改图像

> ID：11863762
> 
> 赞同：0
> 
> 时间：2012-08-08T11:42:49.317
> 
> 标签：javascript

我有一个画廊，可以通过 onclick 更改图像，但我也希望图像可以通过左右箭头控件进行更改。

我真的很感激这方面的任何帮助。

下面是我正在使用的 javascript。

```
$(document).ready(function(){
$.fn.gallerySplash = function(){
    var object = $(this),
        imageHolder = $("#imageHolder",object),
        image = $("#imageHolder > img",object),
        imageSRCLink = $("ul>li>a",object),
        imageDeltaX,
        imageDeltaY,
        imageK =image.height()/image.width(),
        holderK =imageHolder.height()/imageHolder.width(),
        imagePercent = (image.height()/image.width())*100,
        imgSRC,
        currImg = 0,
        prevImg = 0,
        allImg = imageSRCLink.length,
        autoPlayState = false,
        autoPlayTime = 8,
        loadComplete = true,
        doc=$(document),
        openGall = false,
        MSIE8 = ($.browser.msie) && ($.browser.version <= 8);

    init()

    function init(){
        $(window).resize(resizeImageHandler).trigger('resize');
        $(window).bind("hashchange", changeHash);
        $("#next").bind("mousedown", function(){
            changePreviewPosition(-1);
            return false;           
        });
        $("#prev").bind("mousedown", function(){
            changePreviewPosition(1);
            return false;           
        });
        $("window, document, #prev, #next, body, #wrapper").bind("mouseup", function(){
            stopPreviewPosition();
            return false;           
        });
        $("#prev, #next").click(
            function(){
                return false;           
            }
        )
        $("#closeGallery").click(function(){
            if(openGall){
                openGall = false;
                $("#previewHolder").stop().animate({left:45}, 500, "easeInOutCubic");
                if(!MSIE8){
                    $(this).css({backgroundPosition:"3px 14px"}).stop().animate({scale:1}, 0).css({left:"192px", top:"50%"});
                 }
            }else{
                openGall = true;
                $("#previewHolder").stop().animate({left:245}, 500, "easeInOutCubic");
                if(!MSIE8){
                    $(this).css({backgroundPosition:"14px 14px"}).stop().animate({scale:-1}, 0).css({left:"192px", top:"50%"});
                }
            }
            return false;           
        }).hover(
            function(){
                if(openGall){
                    $(this).stop(true).animate({left:187}, 250, "easeOutExpo")
                }else{
                    $(this).stop(true).animate({left:197}, 250, "easeOutExpo")  
                }
            },
            function(){
                $(this).stop().animate({left:192}, 250, "easeOutExpo")
            }
        );
        $("#previewHolder ul>li>a").each(function(){
            $(this).append("<div class='over'></div>")
            $(".over", this).animate({opacity:0}, 150, "easeInOutCubic")
        }).click(
            function(){
                if($(this).parent().index()!=currImg && loadComplete){
                    $("#previewHolder ul>li").eq(currImg).find("a>.over").stop(true).animate({opacity:0}, 150, "easeInOutCubic")
                    currImg=$(this).parent().index();
                    changeImageHandler();
                    $("#imageCaption").html($(this).attr('title'));
                }
                return false;           
            }
        ).hover(
            function(){
                if($(this).parent().index()!=currImg){
                    $(".over", this).stop(true).animate({opacity:1}, 300, "easeInOutCubic")
                }
            },
            function(){
                if($(this).parent().index()!=currImg){
                    $(".over", this).stop().animate({opacity:0}, 300, "easeInOutCubic")
                }
            }
        );
        $("#previewHolder ul>li").eq(currImg).find("a>.over").stop().animate({opacity:1}, 0)
        autoPlayHandler();
    }
    function changeHash(){
        if(window.location.hash.substring(3, window.location.hash.length)==$("#menu dd").eq(0).attr("id") && !openGall){
            openGall = true;
            $("#previewHolder").stop().animate({left:245}, 500, "easeInOutCubic")
            if(!MSIE8){
                $("#closeGallery").css({backgroundPosition:"14px 14px"}).stop().animate({scale:-1}, 0).css({left:"192px", top:"50%"});
            }
        }
    }
    function changePreviewPosition(number){
        var innerH = $("#inner").height(),
            ulH =  $("#inner>ul").height(),
            scrollTime;         
        if(number==-1){
            scrollTime = Math.abs(parseInt($("#inner>ul").css("top"))*5000/(ulH-innerH));
            $("#inner>ul").stop(true).animate({top:0}, scrollTime, "linear");   
        }else{
            scrollTime = Math.abs((parseInt($("#inner>ul").css("top"))+(ulH-innerH))*5000/(ulH-innerH));
            $("#inner>ul").stop(true).animate({top:-(ulH-innerH)}, scrollTime, "linear");
        }
    }
    function stopPreviewPosition(){
        $("#inner>ul").stop(true)
    }   
    function autoPlayHandler(){
        setTimeout(function(){
            if(autoPlayState){
                prevImg = currImg;
                currImg++
                if(currImg>=allImg){
                    currImg = 0 
                }
                changeImageHandler()
            }
        }, autoPlayTime*1000)
    }
    function resizeImageHandler(){
        image = $("#imageHolder > img");
        imageK =image.height()/image.width()
        holderK =doc.height()/doc.width();
        if(holderK>imageK){
        }else{
        }
        imageDeltaX=0//-(image.width()-doc.width())/2;
        imageDeltaY=-(image.height()-doc.height())/2;
        image.css({left:imageDeltaX, position:"absolute"});
    }
    function changeImageHandler(){
        loadComplete = false;
        image.addClass("topImg");
        imgSRC = imageSRCLink.eq(currImg).attr("href");
        imageHolder.append("<div id='imgSpinner'></div><img class='bottomImg' src="+imgSRC+" alt=''>");
        $("#imgSpinner").css({opacity:0}).stop().animate({opacity:0.5}, 500, "easeInOutCubic");
        $(".bottomImg").bind("load", loadImageHandler)
    }
    function loadImageHandler(){
        setTimeout(function(){
            $(".bottomImg").unbind("load", loadImageHandler);
            $("#imgSpinner").stop().animate({opacity:"0"}, 1000, "easeInOutCubic")
            resizeImageHandler();
            $(".topImg").stop().animate({opacity:"0"}, 1000, "easeInOutCubic", function(){
                $("#imgSpinner").remove();
                $(".topImg").remove();
                image.removeClass("bottomImg");
                loadComplete = true;
                autoPlayHandler()
            })
        }, 1000)
    }
}
}) 
```

在您的代码的帮助下，我做到了这一点，它对我有用，但仍然产生了一些问题。它只工作一次而不改变 currImg 索引请帮助我。

您可以在此处查看实时版本：http: [//www.solvonix.co.in/clients/demo/](http://www.solvonix.co.in/clients/demo/)

修改后的代码是：

```
$(window).keydown(function(event){
 if (event.which == 37) {
// left arrow; go back
currImg=$(this).parent().index();
 currImg--
 if(currImg<=0){
  currImg = 0 
 }    
 changeImageHandler();
 }
 if (event.which == 39) {
currImg=$(this).parent().index();
 currImg++
 prevImg = currImg
 if(currImg>=allImg){
  currImg = allImg 
 }
                                    currImg++
 changeImageHandler();
// right arrow; go forward
 } 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:51:27.207

用这个：

```
$(window).keydown(function(event){
  if (event.which == 37) {
    // left arrow; go back
    changePreviewPosition(1)
  }
  if (event.which == 39) {
    // right arrow; go forward
    changePreviewPosition(-1)
  }
}) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:49:18.017

尝试将此代码放入`init()`函数中

```
$('window').live('keypress', function (e) {
   if ( e.keyCode == 37 ){
       changePreviewPosition(1); //left key
       return false;
    }
   if ( e.keyCode == 39 ){
       changePreviewPosition(-1); //right key
       return false;
    }
}) 
```

希望这可以帮助

# android - android保存和加载PNG位图的区别

> ID：11863766
> 
> 赞同：4
> 
> 时间：2012-08-08T11:43:02.187
> 
> 标签：android, bitmap, compression, png, save

我正在尝试解决我的问题几天，但我无法弄清楚。我的应用程序使用位图以类似于隐写术的方式处理图像的像素。在我修改 Bitmap 并让我们说 ModifiedBitmap 并检查像素值之后，一切都是正确的。在我使用压缩方法将位图保存为 PNG 后，问题就开始了。当我将 ModifiedBitmap 加载回内存时，像素值发生了变化。当我使用 ARGB_8888 以 PNG 格式存储位图时，我假设在以 PNG 格式保存和加载图像后值将相同。

有关更多详细信息，我正在使用以下代码加载位图：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inDither = false;
opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
BitmapFactory.decodeFile(picturePath, opt) 
```

无论位图格式是什么，我都会对其进行处理以获得适合我目的的正确位图格式。我的目标是获得具有 alpha 且位于 ARGB_8888 配置中的位图。我用以下内容准备新的位图：

```
int width = this.imageToProcess.getWidth();
int height = this.imageToProcess.getHeight();

Bitmap dest = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

for (int i = 0; i < width; i++) {
    for (int j = 0; j < height; j++) {
        int pixel = this.imageToProcess.getPixel(i, j);
            int newColor = 0;
            if (this.imageToProcess.hasAlpha()) {
                newColor = Color.argb(Color.alpha(pixel), Color.red(pixel), Color.green(pixel), Color.blue(pixel));
            } else {
                newColor = Color.argb(255, Color.red(pixel), Color.green(pixel), Color.blue(pixel));
            }
        dest.setPixel(i, j, newColor);
        }
} 
```

当我使用这样的准备方法时，我总是得到正确格式的位图以及正确的参数和配置。所以现在，位图配置了 ARGB_8888 并具有 alpha 值。可以说我有 PreparedBitmap。我还检查了位图属性，它正是 ARGB_8888 并且 hasAlpha 为真。到目前为止，一切都应该如此。然后我对 PreparedBitmap 进行某种像素修改，并准备好保存它。我使用以下代码将位图保存为 PNG：

```
String path = Environment.getExternalStorageDirectory().toString();
OutputStream fOut = null;
File file = new File(path, "image.png");
fOut = new FileOutputStream(file);
modifiedBitmap.compress(Bitmap.CompressFormat.PNG, 100, fOut);
fOut.flush();
fOut.close();
MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName()); 
```

之后，我存储了 PNG 图像文件。然后我想再次加载 ModifiedBitmap 并以相反的方式处理 Bitmap。我的先决条件是 ModifiedBitmap 具有与我在第一步中修改它的完全相同的像素值。我通过相同的过程加载位图：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inDither = false;
opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
BitmapFactory.decodeFile(picturePath, opt) 
```

但是他之前保存时加载的ModifiedBitmap具有不同的像素值。它也没有 alpha 值（hasAlpha 为假），但配置是相同的 ARGB_8888。有谁知道这是为什么？它是 ARGB_8888 位图，因此像素值不应该有差异。android会以某种方式压缩PNG位图吗？我应该如何保存 PNG 图像以防止像素值更改？

如果 ModifiedBitmap 像素值在 ARGB_8888 (128, 128, 128, 128) 中并且我通过 Bitmap.compress 方法保存它，我想在再次加载后获得与 alpha 相同的值。我不知道该怎么做。

# asp.net - 调用两个存储过程并消除公共记录

> ID：11863768
> 
> 赞同：1
> 
> 时间：2012-08-08T11:43:06.097
> 
> 标签：asp.net, stored-procedures, sql-server-2008-r2

我有一个仅通过存储过程与数据库交互的 asp.net / c# 应用程序。我试过这样做，但没有运气。

我有一个存储过程“A”，它返回（例如）... recordID & Description (1:Apple; 2:Banana; 3: Tomato)

我有另一个存储过程“B”，它返回（例如）... recordID & Description (1:Apple; 3: Tomato; 4:Grapes; 5:Oranges)

使用这些存储过程，我需要得到 B 减去 A（这意味着我需要在我的应用程序中获取“Grapes”、“Oranges”。

我知道如何调用两个存储过程。但是我将如何存储它们的价值并消除公共记录呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:53:19.823

如果您不希望这两个存储过程返回大型数据集，那么您可以在您的 ASP.NET 代码中完成它。将 A 的结果存储在一个集合（例如数据集）中，然后将 B 的结果存储在另一个集合中。您可以遍历这两个集合以消除重复记录。

但是，如果您确实希望这些存储的过程能够通过网络返回和传输大型数据集，那么您应该考虑按照@Paddy 的建议进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:44:38.803

这里最好的事情是编写一个程序来实现最终结果。将 sp1 和代码 sp2 的正确代码作为单个 proc，最后计算您需要的结果集。

如果您在执行前两个查询后有 taable1 和 table2，那么只需执行

```
select * from table2
except
select * from table1 
```

# c# - 专注于 Windows Phone 中的控件

> ID：11863769
> 
> 赞同：0
> 
> 时间：2012-08-08T11:43:06.270
> 
> 标签：c#, xaml, windows-phone-7.1

我在 Windows phone 页面中有四个控件。当我在 KeyBoard 中按 enter 时，我希望将焦点移动到该页面中的下一个可用控件。我们可以通过挂钩所有控件的 KeyDown 事件来实现这一点。有没有什么简单的方法可以在 Windows Phone 中实现 100% xaml 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:39:09.717

不，这是不可能的。您需要在 XAML 中有某种逻辑来实现这一点。在 QML 等其他声明性语言中，这是可能的，但遗憾的是 XAML 不提供这种编程逻辑。

好吧，您始终可以做的一件事是编写自己的控件，在其中公开一个 DependencyProperty 以便目标控件在当前控件丢失时接收下一个焦点。然后，您可以拥有一个完全 100% XAML 的解决方案。但是，除非您在应用程序或多个应用程序中多次有这种需求，否则这种努力是太多且不值得的。

# python - 在 Ubuntu 上安装 SciPy/Python

> ID：11863775
> 
> 赞同：32
> 
> 时间：2012-08-08T11:43:23.667
> 
> 标签：python, ubuntu, numpy, python-2.7, scipy

我目前正在按照教程*[安装 SciPy 堆栈](http://www.scipy.org/Installing_SciPy/Linux)*以在 Ubuntu 12.04（Precise Pangolin）上安装[SciPy](http://en.wikipedia.org/wiki/SciPy)（我无法使用`apt-get install`，因为我需要最新版本）。

但是，当我执行以下命令时出现错误：

```
python setup.py build
sudo python setup.py install --prefix=/usr/local   # Installs to /usr/local

python setup.py build

michael@michael-laptop-ubuntu:~/Downloads/scipy-0.11.0rc1$ python setup.py buildRunning from scipy source directory.
blas_opt_info:
blas_mkl_info:
  libraries mkl,vml,guide not found in /usr/local/lib
  libraries mkl,vml,guide not found in /usr/lib
  libraries mkl,vml,guide not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

atlas_blas_threads_info:
Setting PTATLAS=ATLAS
  libraries ptf77blas,ptcblas,atlas not found in /usr/local/lib
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/sse2
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/i386-linux-gnu/sse2
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

atlas_blas_info:
  libraries f77blas,cblas,atlas not found in /usr/local/lib
  libraries f77blas,cblas,atlas not found in /usr/lib/sse2
  libraries f77blas,cblas,atlas not found in /usr/lib
  libraries f77blas,cblas,atlas not found in /usr/lib/i386-linux-gnu/sse2
  libraries f77blas,cblas,atlas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1423: UserWarning: 
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  warnings.warn(AtlasNotFoundError.__doc__)
blas_info:
  libraries blas not found in /usr/local/lib
  libraries blas not found in /usr/lib
  libraries blas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1432: UserWarning: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
  warnings.warn(BlasNotFoundError.__doc__)
blas_src_info:
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1435: UserWarning: 
    Blas (http://www.netlib.org/blas/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [blas_src]) or by setting
    the BLAS_SRC environment variable.
  warnings.warn(BlasSrcNotFoundError.__doc__)
Traceback (most recent call last):
  File "setup.py", line 208, in <module>
    setup_package()
  File "setup.py", line 199, in setup_package
    configuration=configuration )
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/core.py", line 152, in setup
    config = configuration()
  File "setup.py", line 136, in configuration
    config.add_subpackage('scipy')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/setup.py", line 8, in configuration
    config.add_subpackage('integrate')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/integrate/setup.py", line 10, in configuration
    blas_opt = get_info('blas_opt',notfound_action=2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 320, in get_info
    return cl().get_info(notfound_action)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 471, in get_info
    raise self.notfounderror(self.notfounderror.__doc__)
numpy.distutils.system_info.BlasNotFoundError: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 18, in <module>
    import problem_report
  File "/usr/lib/python2.7/dist-packages/problem_report.py", line 14, in <module>
    import zlib, base64, time, sys, gzip, struct, os
  File "/usr/lib/python2.7/gzip.py", line 10, in <module>
    import io
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/__init__.py", line 83, in <module>
    from matlab import loadmat, savemat, byteordercodes
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/__init__.py", line 11, in <module>
    from mio import loadmat, savemat
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/mio.py", line 15, in <module>
    from mio4 import MatFile4Reader, MatFile4Writer
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/mio4.py", line 9, in <module>
    import scipy.sparse
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/__init__.py", line 180, in <module>
    from csr import *
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/csr.py", line 12, in <module>
    from sparsetools import csr_tocsc, csr_tobsr, csr_count_blocks, \
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/__init__.py", line 4, in <module>
    from csr import *
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/csr.py", line 25, in <module>
    _csr = swig_import_helper()
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/csr.py", line 17, in swig_import_helper
    import _csr
ImportError: No module named _csr

Original exception was:
Traceback (most recent call last):
  File "setup.py", line 208, in <module>
    setup_package()
  File "setup.py", line 199, in setup_package
    configuration=configuration )
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/core.py", line 152, in setup
    config = configuration()
  File "setup.py", line 136, in configuration
    config.add_subpackage('scipy')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/setup.py", line 8, in configuration
    config.add_subpackage('integrate')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/integrate/setup.py", line 10, in configuration
    blas_opt = get_info('blas_opt',notfound_action=2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 320, in get_info
    return cl().get_info(notfound_action)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 471, in get_info
    raise self.notfounderror(self.notfounderror.__doc__)
numpy.distutils.system_info.BlasNotFoundError: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable. 
```

sudo python setup.py install --prefix=/usr/local # 安装到 /usr/local

```
michael@michael-laptop-ubuntu:~/Downloads/scipy-0.11.0rc1$ sudo python setup.py install --prefix=/usr/local
[sudo] password for michael: 
Running from scipy source directory.
blas_opt_info:
blas_mkl_info:
  libraries mkl,vml,guide not found in /usr/local/lib
  libraries mkl,vml,guide not found in /usr/lib
  libraries mkl,vml,guide not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

atlas_blas_threads_info:
Setting PTATLAS=ATLAS
  libraries ptf77blas,ptcblas,atlas not found in /usr/local/lib
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/sse2
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/i386-linux-gnu/sse2
  libraries ptf77blas,ptcblas,atlas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

atlas_blas_info:
  libraries f77blas,cblas,atlas not found in /usr/local/lib
  libraries f77blas,cblas,atlas not found in /usr/lib/sse2
  libraries f77blas,cblas,atlas not found in /usr/lib
  libraries f77blas,cblas,atlas not found in /usr/lib/i386-linux-gnu/sse2
  libraries f77blas,cblas,atlas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1423: UserWarning: 
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  warnings.warn(AtlasNotFoundError.__doc__)
blas_info:
  libraries blas not found in /usr/local/lib
  libraries blas not found in /usr/lib
  libraries blas not found in /usr/lib/i386-linux-gnu
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1432: UserWarning: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
  warnings.warn(BlasNotFoundError.__doc__)
blas_src_info:
  NOT AVAILABLE

/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1435: UserWarning: 
    Blas (http://www.netlib.org/blas/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [blas_src]) or by setting
    the BLAS_SRC environment variable.
  warnings.warn(BlasSrcNotFoundError.__doc__)
Traceback (most recent call last):
  File "setup.py", line 208, in <module>
    setup_package()
  File "setup.py", line 199, in setup_package
    configuration=configuration )
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/core.py", line 152, in setup
    config = configuration()
  File "setup.py", line 136, in configuration
    config.add_subpackage('scipy')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/setup.py", line 8, in configuration
    config.add_subpackage('integrate')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/integrate/setup.py", line 10, in configuration
    blas_opt = get_info('blas_opt',notfound_action=2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 320, in get_info
    return cl().get_info(notfound_action)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 471, in get_info
    raise self.notfounderror(self.notfounderror.__doc__)
numpy.distutils.system_info.BlasNotFoundError: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 18, in <module>
    import problem_report
  File "/usr/lib/python2.7/dist-packages/problem_report.py", line 14, in <module>
    import zlib, base64, time, sys, gzip, struct, os
  File "/usr/lib/python2.7/gzip.py", line 10, in <module>
    import io
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/__init__.py", line 83, in <module>
    from matlab import loadmat, savemat, byteordercodes
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/__init__.py", line 11, in <module>
    from mio import loadmat, savemat
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/mio.py", line 15, in <module>
    from mio4 import MatFile4Reader, MatFile4Writer
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/io/matlab/mio4.py", line 9, in <module>
    import scipy.sparse
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/__init__.py", line 180, in <module>
    from csr import *
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/csr.py", line 12, in <module>
    from sparsetools import csr_tocsc, csr_tobsr, csr_count_blocks, \
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/__init__.py", line 4, in <module>
    from csr import *
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/csr.py", line 25, in <module>
    _csr = swig_import_helper()
  File "/home/michael/Downloads/scipy-0.11.0rc1/scipy/sparse/sparsetools/csr.py", line 17, in swig_import_helper
    import _csr
ImportError: No module named _csr

Original exception was:
Traceback (most recent call last):
  File "setup.py", line 208, in <module>
    setup_package()
  File "setup.py", line 199, in setup_package
    configuration=configuration )
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/core.py", line 152, in setup
    config = configuration()
  File "setup.py", line 136, in configuration
    config.add_subpackage('scipy')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/setup.py", line 8, in configuration
    config.add_subpackage('integrate')
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 1002, in add_subpackage
    caller_level = 2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 971, in get_subpackage
    caller_level = caller_level + 1)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/misc_util.py", line 908, in _get_configuration_from_setup_py
    config = setup_module.configuration(*args)
  File "scipy/integrate/setup.py", line 10, in configuration
    blas_opt = get_info('blas_opt',notfound_action=2)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 320, in get_info
    return cl().get_info(notfound_action)
  File "/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py", line 471, in get_info
    raise self.notfounderror(self.notfounderror.__doc__)
numpy.distutils.system_info.BlasNotFoundError: 
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable. 
```

此外，我如何测试这个模块是否安装正确？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-08T12:55:43.147

我通常的工作流程是使用一个[`virtualenv`](http://www.virtualenv.org/en/latest/index.html)带有最新包的 Python 发行版。

在此环境中，您可以安装和更新您需要的所有软件包，无论是否有[`pip`](http://www.pip-installer.org/en/latest/index.html)任何`sudo`调用。

因此，如果您只需要[SciPy](http://en.wikipedia.org/wiki/SciPy)（和[NumPy](http://en.wikipedia.org/wiki/NumPy)），这将是：

```
$ sudo apt-get install python-virtualenv python-pip
$ sudo apt-get build-dep python-numpy python-scipy
$ # Create virtualenv in home
$ virtualenv .myenv
$ # Activate the virtualenv
$ source .myenv/bin/activate
(myenv)$ pip install -U numpy
(myenv)$ pip install -U scipy 
```

（如果您没有 root 访问权限，您可以按照[此处](http://www.virtualenv.org/en/latest/index.html#installation)`virtualenv`所述安装和安装。但是，您需要 NumPy 和 SciPy 的依赖项。）`pip`

您可以包含`source .myenv/bin/activate`在您的外壳中`.bash_profile`，并且您的外壳将始终从该环境开始。如果您使用[需求文件](http://www.pip-installer.org/en/latest/requirements.html)，则很容易在所有机器上安装和维护相同的环境。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-11T21:23:20.250

有同样的问题。以下对我有用：

```
sudo apt-get install libblas-dev
sudo apt-get install liblapack-dev
sudo apt-get install gfortran 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T11:45:34.800

您需要按照输出的建议下载并安装[Atlas 。](http://math-atlas.sourceforge.net/)之后，重试 SciPy 安装。

其他选项将是`apt-get install`旧版本。这将自动安装所有依赖项；然后手动安装较新的。这将在您的机器上产生两个库，一个`/usr/share/pyshared`最有可能，另一个在`/usr/local`.

此外，如果您省略`--prefix=/usr/local`，在旧版本之上安装新版本时，它只会被覆盖，并且不需要路径修改。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-20T22:45:27.880

您正在尝试从源代码构建 SciPy。

如果您只想*安装*SciPy，请使用以下命令：

```
sudo apt-get install python-scipy 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T11:48:30.433

[PyPM](http://code.activestate.com/pypm/scipy/)是安装它的好方法。该版本是 beta 0.10.1，它包含所有依赖项。您需要[Active Python](http://www.activestate.com/activepython/downloads)才能访问 PyPM，但您应该能够轻松安装。

```
pypm install scipi 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-26T20:52:47.900

我遇到了与 OP 相同的问题（在[Red Hat Linux](http://en.wikipedia.org/wiki/Red_Hat_Linux) 5.7 上对我来说；是的，我知道那是旧的）并且通过安装 ATLAS 头文件（和“静态库”，它说）来解决所有问题：

```
 yum install atlas-devel 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-23T14:00:59.647

对于 Raspberry Pi 4 上的 Ubuntu 20.04，请使用以下命令：

```
sudo apt-get install libblas3 liblapack3 liblapack-dev libblas-dev gfortran libatlas-base-dev 
```

然后使用 pip 安装最新的软件包。

```
pip install scipy 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-05T04:22:37.017

对于[Fedora](http://en.wikipedia.org/wiki/Fedora_%28operating_system%29) 20：

```
pip install virtualenv virtualenvwrapper
mkvirtualenv scipy_project
sudo yum-buildep scipy
pip install scipy 
```

我希望它有帮助！

# javascript - 在 Javascript 中：内存分配与大对象操作

> ID：11863779
> 
> 赞同：5
> 
> 时间：2012-08-08T11:43:45.443
> 
> 标签：javascript, memory

我有一个 JavaScript 模块来维护和操作大量数据。我有四个大型结构——每个基本上都是数组对象的对象。而且里面有很多数据。当用户执行删除或更新某些操作时，我需要遍历这些结构中的每一个并可靠地修改结构以反映更改。在某些结构中，根据用户操作，我不知道我需要更改*哪个*“叶子”对象，因此我必须遍历所有对象，等等。

在发生更改时操作这些大型结构的另一种方法是将它们清空并从其原始数据中重建它们。这就是我的问题：

从性能的角度来看，在 Javascript 中，循环和修改现有（大型）数据结构或简单地从原始数据重建结构会更优化吗？

我确信答案可能是“视情况而定”，但是 a) 假设有大量数据；b) 假设该数据经常更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:31:54.023

抱歉，我知道您并不期待这个答案，但“这取决于”:-) 但是，我认为我可以给您的最佳答案是我在遇到完全相同的问题时所做的：我为自己实现了一个简单的测试平台测量对巨大的超级物体进行某些操作所花费的时间：我得到了不同级别信息熵的平均时间测量值，结果最快的解决方案是从原始结构重建结构。我在 Internet Explorer 中特别注意到了这一点。也许 IE 在循环中表现不佳（我在推测）并且遍历超级对象比重建它要慢得多。因此，它可能不仅取决于超对象的结构，还取决于 javascript 引擎。

但是，这又是我的情况。我建议自己实现一个简单的测试平台：它不会花费太多时间，但最终会让你得到很好的结果 ;-)

**编辑**：

作为附录，我想知道在服务器端构建超级对象然后将其作为 JSON 对象发送回浏览器是否会改善结果。我不知道在你的情况下是否可能。您可以实现某种 AJAX 可访问的 PHP 脚本来接收命令（例如插入、删除、重命名等），然后它将新的 JSON 对象发送回浏览器，浏览器只会解析对象（可能快速操作？？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:13:12.510

我不确定它是否适用于此，但它让我想起了来自wingolog.org 的一篇关于v8 实现的[博客文章：](http://wingolog.org/archives/2011/07/05/v8-a-tale-of-two-compilers)

> Ed.：Vyacheslav Egorov 写道，V8 保留的实际上是函数源，而不是 AST。它根据需要重新解析。说得通。我记得 Lars Bak 在一段视频中说过，源是最紧凑的 IR，也许确实如此。

所以基本上，当 v8 编译 JavaScript 时，它只保留原始数据（源代码），因为在这种情况下，内存占用是影响性能的最大因素。

# iphone - 从 UIWebView 获取 IMG 标记 src 作为 NSString

> ID：11863780
> 
> 赞同：1
> 
> 时间：2012-08-08T11:43:53.650
> 
> 标签：iphone, objective-c, cocoa, uiwebview, webview

如何在 UIWebView 中获取当前页面图像的 src 并稍后将其用作字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:53:09.563

做这个：

```
NSString *imgSrcValue = [self.webview stringByEvaluatingJavaScriptFromString:
                @"document.getElementByID('yourImgScrID').value"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:52:17.467

您想要做的是将标签的 HTML 解析到一个数组中，然后将所有 src 链接提取到一个新数组中（这样做是为了避免包含其他 src 标记，例如脚本）。请记住，有些可能是“.../image.png”，因此您必须将它们转换为“theWebsiteYouWere.com/browsing/atTheTime/.png”

# git - 使 git pull --rebase 保留合并提交

> ID：11863785
> 
> 赞同：17
> 
> 时间：2012-08-08T11:44:08.507
> 
> 标签：git, version-control

`git pull --rebase`删除未推送的合并提交。有没有办法让它保存它们？

假设我的历史看起来像——</p>

```
A
| \ 
B  H
|  |
C  G
|  |
D  F
| /
E 
```

（`A`作为合并提交。）

之后`git pull --rebase`就变成了——</p>

```
H
|
G
|
F
|
X
|
B
|
C
|
D
|
E 
```

（作为插入到我的历史记录`X`中的新提交。）— <code>A 被删除。`git pull --rebase`

我知道你可以用`git rebase --preserve-merges`来保存它们`git rebase`，但我看不到用 来保存它们的方法`git pull --rebase`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-12T05:35:39.743

更新：正如我在“ [Git 究竟做了什么” `rebase --preserve-merges`“做什么（以及为什么？）](https://stackoverflow.com/a/50555740/6309) ”中所述，自 Git 2.18（2018 年第二季度）以来，您更喜欢[新选项`--rebase-merges`](https://stackoverflow.com/a/50555740/6309)而不是旧选项`--preserve-merge`

自那时候起：

*   Git 2.22, Q2 2019, 实际上[弃用了`--preserve-merge`](https://github.com/git/git/commit/fa1b86e45743fd5895c33adcd3769782e608bb40), 和
*   Git 2.25，Q1 2020，[停止在“git rebase --help”输出中宣传它](https://github.com/git/git/commit/0c51181ffb178a6581ecb471091cbd2d0c48f165)。

所以：

```
git rebase --interactive --rebase-merges origin/master 
# or
git config pull.rebase merges
git rebase --interactive origin/master (would use rebase-merges) 
```

* * *

2013年的原始答案：

或者（对于[即将到来的 git 1.8.5 Q4 2013](https://github.com/git/git/blob/a194eaddca201163aa756faccd519f056bd3c35e/Documentation/RelNotes/1.8.5.txt#L66-L68)，现在在 git 1.8.5, 2013-11-27 中交付）：

> " `git pull --rebase`" 总是选择做沼泽标准的扁平化变基。您可以通过将“ ”配置设置为“”
> 来告诉它运行“ ”。`rebase --preserve-merges``pull.rebase``preserve`

因此，一个简单的配置就足以确保您`pull --rebase`确实保留合并：

```
git config pull.rebase preserve 
```

* * *

有关更多信息，请参见[提交 66713ef3](https://github.com/git/git/commit/66713ef3b00933755cdeff1ae823dda7b5843640)（感谢[Stephen Haberman](https://github.com/stephenh)）：

## 拉：允许拉在变基时保留合并

> 如果用户在 master 上工作，并且已经合并到他们的特性分支中，但现在必须“ `git pull`”因为 master 移动了，`pull.rebase`他们的特性分支将被扁平化为 master。
> 
> 这是因为“ `git pull`”当前不知道 rebase 的保留合并标志，这将避免这种行为，因为它只会将功能分支的合并提交重播到新的 master 上，而不是重播功能分支中的每个单独的提交。
> 
> 添加一个`--rebase=preserve`选项，该选项将传递`--preserve-merges`给 rebase。
> 
> 还将“”添加到配置设置`preserve`的允许值。`pull.rebase`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-08T11:48:07.410

你可以把你分成`pull`一个`fetch`和一个`rebase`

```
git fetch origin master
git rebase origin master --preserve-merges 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-27T17:10:23.910

简单地：

```
git pull --rebase=preserve 
```

从[文档](https://git-scm.com/docs/git-pull#git-pull---rebasefalsetruepreserveinteractive)：

> 当设置为保留时，使用`--preserve-merges`传递给的选项进行变基，`git rebase`以便本地创建的合并提交不会被展平。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-12T14:45:57.223

自[git v2.22.0](https://git-scm.com/docs/git-rebase/2.22.0#Documentation/git-rebase.txt--p)以来，`--preserve-merges`option 已被弃用，取而代之的是`--rebase-merges`（与[`--interactive`option](https://git-scm.com/docs/git-rebase/2.22.0#Documentation/git-rebase.txt--i)结合使用）在另一个基本提示之上重新应用提交`git-rebase`：

```
git fetch origin master
git rebase --interactive --rebase-merges origin/master 
```

# c# - 表单开始最小化

> ID：11863791
> 
> 赞同：1
> 
> 时间：2012-08-08T11:44:54.573
> 
> 标签：c#, winforms, visual-studio-2010, windowstate

我有 3 个表单 - 主要表单是 Form1，其他表单是启动表单，然后是登录屏幕。启动画面首先显示并填充服务器。然后显示frmAppLogin，用户输入硬编码密码，结果返回form1。

```
public Form1()
    {
        _assembly = Assembly.GetExecutingAssembly();

        Stream icon = _assembly.GetManifestResourceStream.....

        this.Icon = new Icon(icon);

        Thread t = new Thread(new ThreadStart(SplashScreen));
        t.Start();
        InitializeComponent();
        PopulateServers();
        //Thread.Sleep(800);
        Form frmLogin1 = new frmAppLogin();
        t.Abort();

        frmLogin1.ShowDialog();

        DialogResult res = new DialogResult();
        res = frmLogin1.DialogResult;
        if (res == DialogResult.OK)
        {
            _LoggedIn = true;
        }

        else
        {
            _LoggedIn = false;
        }
 } 
```

这是 form1_load 的代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        if (_LoggedIn)
        {
            try
            {
                blah blah........
            }
            catch
            {
                MessageBox.Show("Error accessing resources!");
            }
        }
        else
        {
            this.Close();
        }
    } 
```

以及登录表单的代码：

```
public frmAppLogin()
    {
        InitializeComponent();
        this.WindowState = FormWindowState.Normal;
    }

    private void btnAppLogin_Click(object sender, EventArgs e)
    {
        if (txtAppPass.Text.ToString() == requiredPass)
        {
            this.DialogResult = DialogResult.OK;
            this.Close();
        }
        else
        {
            txtAppPass.Clear();
            txtAppPass.Focus();
            MessageBox.Show("Incorrect Password");
        }
    } 
```

问题是当启动画面消失时，登录表单会在瞬间弹出，但会立即最小化到任务栏。

Startposition 通过 GUI 设置为 CenterScreen 和 WindowState Normal。

此外，这只发生在我在调试文件夹中运行 application.exe（或从中复制它）时，即当我在 Visual Studio 2010 中调试时不会发生这种情况。

编辑：只是为了添加这个，我也尝试过：

```
 private void frmAppLogin_Load(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Normal;
    } 
```

这没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:13:58.413

我很确定你的诊断是错误的。该对话框不会最小化，它会消失在另一个应用程序的窗口后面。通常是 Visual Studio，每个人都将它最大化，因此它非常擅长覆盖其他窗口。最小化其他窗口以找到对话框。

这里的问题在于，在瞬间，您的应用程序没有任何 Windows 可以关注的窗口。实际上两次，在初始屏幕和登录表单之间。再次在登录表单和您的主表单之间。Windows 窗口管理器被迫寻找另一个窗口来聚焦，并且由于您没有任何候选者，它会选择另一个应用程序的窗口。

窗口管理器允许给应用程序时间来创建它的第一个窗口，这不可避免地需要时间。毫无疑问，您的启动画面会破坏该逻辑。发布的代码不容易修复，调用 ShowDialog() 后调用代码的标准技巧将不起作用，因为您的应用程序尚未发送消息循环。这本身就是一个问题。至少通过修复启动屏幕来解决这个问题，.NET 已经内置了对它们的可靠支持。答案[在这里](https://stackoverflow.com/questions/392864/c-sharp-splash-screen-problem/393870#393870)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-11T21:29:11.863

```
 t.Start();
    InitializeComponent(); 
    PopulateServers();
    Form frmLogin1 = new frmAppLogin();
    this.Activate(); //This Line will Solve your problem
    t.Abort(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T12:32:50.583

I know I am answering too late. I got the same issue and read this post and tried to figure out solution.

I have created a `Timer` object and set its `Interval = 10` and started the `Timer` on the `Form Load event`. Then opened the dialog box on timer's Tick event and stopped the timer and shown the `login.showDialog()`. It works fine for me. See the code below.

```
 private Timer dispatcher;

        public MainView()
        {
            InitializeComponent();
            frmMdiChildList = new List<Form>();
            Load += new EventHandler(MainView_Load);
            FormClosing += new FormClosingEventHandler(MainView_FormClosing);
            Activated += new EventHandler(MainView_Activated);

        }

        void MainView_Load(object sender, EventArgs e)
        {
            dispatcher = new Timer();
            dispatcher.Interval = 10; //10 milliseconds
            dispatcher.Tick += new EventHandler(dispatcher_Tick);
            dispatcher.Start();
        }

        void dispatcher_Tick(object sender, EventArgs e)
        {
            dispatcher.Stop();
            dispatcher = null;
            showLoginForm();
        }

        private void showLoginForm() {
            Form loginForm = new LoginView();
            loginForm.ShowDialog();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T16:37:52.413

对于那些会在几秒钟内弹出表单但立即最小化到任务栏的问题，这是一个可能的解决方案：

```
FormNew f = new FormNew();
f.Owner = this; // - this is the solution line
f.Show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-13T16:11:16.980

我正在研究的程序也有同样的问题。这是我为解决它所做的。似乎运作良好。

在我的主要形式中，我设置了构造函数和`StartForm`方法，如下所示：

```
public FrmMain()
{
    Thread thread = new Thread(new ThreadStart(StartForm));
    thread.Start();
    Thread.Sleep(7000);
    InitializeComponent();
    thread.Abort();
}

private void StartForm()
{
    Application.Run(new FrmSplash());
} 
```

然后在我的主要形式中，我将`FrmMain_Load`事件设置如下：

```
private void FrmMain_Load(object sender, EventArgs e)
{
    Activate(); // Give focus to FrmMain and maximize window
} 
```

完毕！

# mysql - 使用 mysql 中的单个查询更新所有表中的值

> ID：11863792
> 
> 赞同：1
> 
> 时间：2012-08-08T11:44:56.470
> 
> 标签：mysql

我想在 MySql 中使用单个查询更新多个列，其中某些条件在所有列中都有效。

我有大约 25 个具有相同表结构的数据库。我需要使用**phpMyAdmin**`Status`使用单个查询更新所有数据库中为特定 url命名的字段。

 **现在我正在使用这个查询。（我需要`status=2`在`table1`所有这些数据库中`url`设置`'www.google.com'`）

```
UPDATE  `database1`.`table1` as p1,
    `database2`.`table1` as p2 ,
    `database3`.`table1` as p3
SET  p1.`STATUS` = 2,
    p2.`STATUS`= 2,
    p3.`STATUS`= 2 
WHERE p1.url='www.google.com' and
    p1.url=p2.url=p3.url 
```

但它不仅更新所有行中的数据`url='www.google.com'`。它`status=2`也在更新`'www.yahoo.com'`。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:54:29.483

这就是你想要的：

```
UPDATE
    database1.table1 AS p1
    LEFT JOIN database2.table1 AS p2 USING (url)
    LEFT JOIN database3.table1 AS p3 USING (url)
SET
   p1.`STATUS` = 2,
   p2.`STATUS` = 2,
   p3.`STATUS` = 2
WHERE
    url = 'www.google.com'; 
```

你没有工作，因为那被`p1.url=p2.url=p3.url`
评估为`p1.url=(p2.url=p3.url)` where `(p2.url=p3.url)`=> FALSE 对于所有不匹配的，然后我们最终得到`p1.url=FALSE`

比较`p1.url=FALSE`=> 将字符串与布尔值进行比较，将字符串转换为整数为非数字字符串给出 0，将布尔 FALSE 转换为整数也给出 0，所以`p1.url=FALSE`

所以`p1.url=p2.url=p3.url`是一样的`NOT p2.url=p3.url`

所以你的代码更新所有存在 p2.url 不等于所有 p3.urls 的行**

# api - Magento 获取格式化的产品 URL

> ID：11863799
> 
> 赞同：3
> 
> 时间：2012-08-08T11:45:24.180
> 
> 标签：api, magento

我正在尝试从 Magento 产品集合中获取格式化产品 url。

所以我想要`https://www.myshop.co.uk/red-bouncy-ball.html`

具体`red-bouncy-ball`部分。

我试过这个方法：

```
$categoryId = $product->getCategoryIds();
$url = $product->setCategoryId($categoryId)->getProductUrl(); 
```

这给了我：

```
https://www.myshop.co.uk/index.php/catalog/product/view/id/100/ 
```

并且只是

```
$product->getProductUrl() 
```

也一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:58:08.540

您是否只是在寻找网址的“红色弹力球”部分？

如果是那么...

```
$product->getData('url_key'); 
```

初始化集合时，您需要将 url_key 添加到 select 语句中...

addAttributeToSelect('url_key')

# java - 为什么静态块中的代码不执行？

> ID：11863800
> 
> 赞同：8
> 
> 时间：2012-08-08T11:45:28.643
> 
> 标签：java

`constant`在这里，当我打印in块时我做了一个程序 `main` `static`不执行.. 但是当我打印`stat`执行时，在 java 中有什么重要性`static final`..？请解释

```
package com.test.doubt;`

class Doubt {

  public static final int constant = 123;
  public static int stat = 123;

  static {
    System.out.println("Static Block");
  }
}

public class MyProgram {

  public static void main(String[] args) {
    System.out.println(Doubt.constant);
  }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T11:47:16.160

您的代码没有初始化`Doubt`类，正是因为`Doubt.constant` *它是*一个常量。它的值在编译时被纳入`MyProgram`- 你甚至可以`Doubt.class`在编译后删除，你的程序仍然可以运行。

跑

```
javap -c com.test.doubt.MyProgram 
```

看看你的代码在编译后的样子。

有关常量表达式的构成，请参见[JLS 的第 15.28 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)例如，这仍然是一个常数：

```
public static final String FOO = "Foo"; 
```

*所有*这些也是如此：

```
public static final String FOO = "Foo";
public static final String BAR = "Bar";
public static final String FOOBAR = FOO + BAR; 
```

...但这不会是

```
public static final String NOT_A_CONSTANT = "Foo".substring(0, 1); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-08T11:48:08.463

将`static final int`作为其值直接编译到您的代码中。也就是说，JVM看到并正在执行：

```
System.out.println(123); 
```

而且你根本没有触及你的恰当命名的`Doubt`类（这是一个**不**以这种方式指定常量的论据，顺便说一句。如果你改变这个值，你必须重新编译*每个*引用类）

# c# - 具有版本相关命令的 Matlab 脚本

> ID：11863805
> 
> 赞同：2
> 
> 时间：2012-08-08T11:45:47.640
> 
> 标签：c#, matlab, com

我使用 C# 中的后期绑定的 COM API 为 Matlab 开发了一个插件。它适用于 2009bSP1 及以后的所有版本。

然而，Matlab 最近发布了 2012b Prerelease，它破坏了该功能。我已经更新了所有 C# 代码来工作。破坏功能的是 Mathworks 改变了 callbackInfo 项的结构。在可以调用之前：

```
var = callbackInfo.Model.Name 
```

在 2012b 售前赛中，他们将其更改为

```
var = callbackInfo.model.Name 
```

注意模型中的小写“m”。

我有什么方法可以根据调用脚本的 matlab 版本来决定调用其中的哪一个？

此致

罗宾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:48:49.920

[verLessThan](http://www.mathworks.nl/help/techdoc/ref/verlessthan.html)允许您检查 matlab 工具箱的版本是否早于用户指定的字符串：

```
if verLessThan('matlab', '7.15') % if earlier release than 7.15
    % your code
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:48:33.913

您可以使用 Matlab 函数`version`并`ver`在运行时获取所需的信息并相应地进行分支。`verLessThan`也可能对你有用。

# variables - VBS：变量未通过递归表达式赋值

> ID：11863811
> 
> 赞同：0
> 
> 时间：2012-08-08T11:46:12.493
> 
> 标签：variables, vbscript, expression

我对 VBS 变量值赋值有疑问：

```
Dim varName  
varName = function(x, y)
varName = function(x, y) 
```

*function*是一个递归函数，它调用自己：

```
Function function(x, y)
    If IsObject(dicColumnIndices) Then
        function = CInt(dicColumnIndices.Item(y))
    Else
        Set oCDSGrid = %MyAppObject%
        Set dicColumnIndices = CreateObject("Scripting.Dictionary")
        intColumnCount = oCDSGrid.ActiveSheet.Columns.Count
        For i = 0 To intColumnCount - 1
            dicColumnIndices.Add oCDSGrid.ActiveSheet.Columns.Item(i).Label, i
        Next

        function x, y
    End If
End Function 
```

据我所知，变量赋值只发生在第二次尝试。我认为这与我的函数递归调用自身有关（如果我删除递归调用，问题就消失了），但我非常想了解这种行为的根源是什么。

我查找了 StackOverflow 和 Internet 都没有运气。

编辑：为了解决这个问题，我不得不删除递归调用：

```
Function function(x, y)
If IsObject(dicColumnIndices) Then
    function = CInt(dicColumnIndices.Item(y))
Else
    Set oCDSGrid = %MyAppObject%
    Set dicColumnIndices = CreateObject("Scripting.Dictionary")
    intColumnCount = oCDSGrid.ActiveSheet.Columns.Count
    For i = 0 To intColumnCount - 1
        dicColumnIndices.Add oCDSGrid.ActiveSheet.Columns.Item(i).Label, i
    Next

    function = CInt(dicColumnIndices.Item(y))
End If
End Function 
```

编辑 2：最后，在 MSDN 的帮助下，我得到了错误的部分——这是第二个电话

```
function x, y 
```

将值返回为空，必须更改为：

```
function = function x, y 
```

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:16:42.337

函数不应该被称为函数，而 varname 是一个糟糕的变量名称。更重要的是：在 VBScript 中，如果您不“分配给函数名称”，则函数不是函数（不返回任何内容）：

```
 Dim s : s = "abcdefg"
  Dim l : l = recLen(s)
  WScript.Echo "recursive length of", qq(s), "=>", l, CStr(l = Len(s))

  Function recLen(s)
    If "" = s Then
       recLen = 0
    Else
       recLen = 1 + recLen(Mid(s, 2))
    End If
  End Function 
```

（空字符串的长度为 0；对于较长的字符串，它是 1 + 字符串“尾部”的长度）

**更新（感谢 AutomatedChaos）：**

```
Function qq( vStringable )
  qq = """" & vStringable & """"
End Function 
```

**更新二（在评论中回答尤金的问题）：**

要使函数返回某些内容，您必须将值分配给与函数同名的变量。您的原始代码没有（即使名称“函数”被“真实”名称替换）。

# php - php中的sql查询

> ID：11863812
> 
> 赞同：0
> 
> 时间：2012-08-08T11:46:17.097
> 
> 标签：php, sql

请考虑下面给出的场景

我在 sql 表中有两个表，比如 User

```
 +----+-----------+------------+-------------+-----------+----------+------+-------------+-------------+-----------+-----------+---------+------------+--------+-----------+--------+----------------+------------------+------------------+--------------------+--------------------------+-----------------+-------+--------------+---------------+
    | id | user_name | first_name | middle_name | last_name | password | role | org_name_id | timezone_id | city      | state     | country | street     | pin    | user_type | status | primary_mobile | secondary_mobile | primary_landline | secondary_landline | primary_email            | secondary_email | notes | date_created | date_modified |
    +----+-----------+------------+-------------+-----------+----------+------+-------------+-------------+-----------+-----------+---------+------------+--------+-----------+--------+----------------+------------------+------------------+--------------------+--------------------------+-----------------+-------+--------------+---------------+
    |  1 | Vivek     | vicky      | singh       | baghel    | 12345    |      |           1 |           1 | Gwalio    | Mp        | iNDIA   | Belly Road | 47001  |           |   NULL | 65677     | 68990       | 678888897       | 67678         | vickysingh@gmail.com | hi@viv.com      |       | NULL         | NULL          | 
```

第二个是会议桌

```
| id | name        | meetingID     | meeting_type | status | recurring_time | attendee_passwd | moderator_passwd | date_created        | timezone | meeting_datetime    | reminder | duration | created_by_id | sms_no | conferenceID | meeting_logout_url | max_participants | participants_id |
+----+-------------+---------------+--------------+--------+----------------+-----------------+------------------+---------------------+----------+---------------------+----------+----------+---------------+--------+--------------+--------------------+------------------+-----------------+
|  1 | New Meeting | REG_892983853 |              |   NULL |                | 23303           | 94842            | 0000-00-00 00:00:00 | GMT  10  | 2012-08-08 12:00:00 |        0 | 60       |             1 |    123 |         NULL | http://lov.com     |               20 |            NULL |
|  2 | Before3     | REG_860806066 |              |   NULL |                | 95390           | 28030            | 0000-00-00 00:00:00 | GMT  10  | 2012-08-08 03:00:00 |        0 | 60       |             1 |    123 |         NULL | http://lov.com     |               20 |            NULL | 
```

我正在尝试沿 user_name 获取会议详细信息，因此我正在查询

```
$get_meetingsql = "SELECT u.user_name from demo_user inner join demo_meeting m on m.created_by_id= u.id"; 
```

不幸的是，上面的查询对我不起作用，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:49:13.460

```
 $get_meetingsql = "SELECT u.user_name
                    from User u
                    inner join demo_meeting m on m.created_by = u.id
                    WHERE meeting_id = '$meetingid'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:50:03.023

created_by.user_name <-- 究竟是哪一列？您的符号表示：表 created_by，在该表中有一个名为 user_name 的列。

还有一个额外的，在那之后。

======================================

更新

你有：

[错误查询] SELECT u.user_name from demo_user inner join demo_meeting m on m.created_by_id= u.id

但你是什么？它只是一个别名，但你没有说明是什么。我希望您在解释中指的是一个名为 User 的表（但它被称为 demo_user 是您的另一个查询，请尽量减少对此类事情的草率......）

所以我希望你想要这样的东西：

[好查询] SELECT u.user_name from demo_user as u inner join demo_meeting m on m.created_by_id= u.id

重要提示：请参阅我将 demo_user 别名为 u。这仅仅意味着您可以使用 u 而不是说 demo_user 。

所以它等同于：

[好查询] SELECT QXZY.user_name from demo_user as QXZY inner join demo_meeting m on m.created_by_id= QXZY.id

如您所见，荒谬的“QXZY”只是一个名称，是查询中的别名。

如果您不喜欢这样，只需命名表即可。（对于更复杂的查询，您需要两次相同的表，这还不够。但现在忘记这一点。）

一般来说：不要使用你不理解的语法。从来没有。只需在网上或一本好的教科书中查找即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:50:31.107

那个SQL是垃圾。参见“created_by.user_name, from”——“created_by”是一个表还是一个 PHP 对象？此外，您还有一个尾随逗号：“，来自”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:50:49.500

复制sql并尝试通过替换php变量首先在phpmyadmin中执行。这是调试查询的最佳方式。

# iphone - AFNetworking POST 并取回数据

> ID：11863817
> 
> 赞同：1
> 
> 时间：2012-08-08T11:46:49.527
> 
> 标签：iphone, ios, xcode, post, afnetworking

在我的 Iphone 应用程序中，我使用 AFNetworking 将一些数据发布到网络服务并取回一些数据......

这是我的例子，我总是得到“假”作为回应，我做错了什么？

```
NSURL *baseURL = [NSURL URLWithString:@"http://myPath/Iphone/method"];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
    [httpClient defaultValueForHeader:@"Accept"];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            [udid copy], @"uuid",
                            nil];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"http://myPath/Iphone/method" parameters:params];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [httpClient registerHTTPOperationClass:[AFXMLRequestOperation class]];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        response = [operation responseString];
        NSLog(@"response: %@",response);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@", [operation error]);
    }];

    [operation start]; 
```

编辑：我在 Url 中调用的方法返回一个字符串（没有字符串不是假的）

* * *

```
 [HttpPost]
        public bool checkIphone(string uuid)
        {
           IDictionary<string,object> check  = Request.Properties;

           uuid = check["uuid"].ToString();

           //do anything with the uuid

           if (1<0)
           {
               return true;
           }
           else
           {
               return false;
           }

        } 
```

我用我的iphone调用这个方法，通常它应该返回xml或者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:53:54.317

您正在使用一种复杂的方式来构建操作，但它会起作用。但它应该可以工作，你缺少的是分配 XMLparser。在[AFXMLRequestOperation](http://afnetworking.org/Documentation/Classes/AFXMLRequestOperation.html)的文档中进行了说明。

```
 NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"http://myPath/Iphone/method" parameters:params];

AFXMLRequestOperation *operation = [[AFXMLRequestOperation alloc] initWithRequest:request];
operation.responseXMLParser = xmlParser; //Here you should assign an instance of NSXMLParser to handle you XML parsing.

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    response = [operation responseString];
    NSLog(@"response: %@",response);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@", [operation error]);
}]; 
```

也不需要通过 NSURLRequest 来[`AFHTTPClient`](http://afnetworking.org/Documentation/Classes/AFHTTPClient.html)创建，您可以轻松地自己创建一个或使用[`AFHTTPClient`](http://afnetworking.org/Documentation/Classes/AFHTTPClient.html)来[`AFHTTPRequestOperation`](http://afnetworking.org/Documentation/Classes/AFHTTPRequestOperation.html)为您创建。

* * *

要使用 AFHTTPClient 只返回服务器返回的任何内容：

```
// Don't include the method here
NSURL *baseURL = [NSURL URLWithString:@"http://myPath/Iphone/"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
[httpClient defaultValueForHeader:@"Accept"];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        [udid copy], @"uuid",
                        nil];

[httpClient postPath:@"method" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // reponseObject will hold the data returned by the server.

}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T20:59:09.413

你这里有错字吗？`[udid copy], @"uuid",`

# android - 从 SettingsFragment 打开自定义对话框

> ID：11863818
> 
> 赞同：1
> 
> 时间：2012-08-08T11:46:51.880
> 
> 标签：android

我正在尝试遵循有关设置的 Android API 指南，更具体地说，我正在尝试通过遵循[这部分文本来创建](http://developer.android.com/guide/topics/ui/settings.html#Custom)[此数字选择器对话框](http://developer.android.com/images/ui/settings/settings.png)。但我无法让它工作。当我按下应该启动自定义对话框的首选项时，没有任何反应。我想我必须在某个地方打电话，但我不知道怎么做。

这是我的 MainActivity.java：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings_fragment:
        // Display the fragment as the main content
        Intent i = new Intent();
        i.setClass(this, SettingsActivity.class);
        startActivityForResult(i, 0);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
} 
```

它很好地启动了 SettingsActivity.java。设置活动.java：

```
public class SettingsActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Display the fragment as the main content.
    getFragmentManager().beginTransaction()
            .replace(android.R.id.content, new SettingsFragment()).commit();
}
} 
```

转到 SettingsFragment.java：

```
public class SettingsFragment extends PreferenceFragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Load the preferences from an XML resource
    addPreferencesFromResource(R.xml.preferences);
}
} 
```

启动preferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory
        android:key="pref_key_category_settings"
        android:title="@string/pref_category1_title" >
        <CheckBoxPreference
            android:defaultValue="true"
            android:key="pref_checkbox"
            android:summary="@string/pref_checkbox_summ"
            android:title="@string/pref_sync" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:key="pref_checkbox_choose_int"
            android:summary="@string/pref_checkbox_choose_string_summ"
            android:title="@string/pref_choose_string" />

        <Preference
            android:dependency="pref_checkbox_choose_int"
            android:key="pref_key_num_scroller"
            android:summary="@string/pref_num_scroller_summ"
            android:title="@string/pref_num_scroller"/>
    </PreferenceCategory>

</PreferenceScreen> 
```

正如我所说：单击 pref_key_num_scroller 时没有任何反应。

我不知道如何调用 NumberPickerPreference.java：

```
public class NumberPickerPreference extends DialogPreference {

public NumberPickerPreference(Context context, AttributeSet attrs) {
    super(context, attrs);

    setDialogLayoutResource(R.layout.numberpicker_dialog);
    setPositiveButtonText(android.R.string.ok);
    setNegativeButtonText(android.R.string.cancel);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:25:32.630

在 XML 中将 Preference 更改为 NumberPickerPreference，使用其完全限定名称：

```
<com.something.settings.NumberPickerPreference 
    android:dependency="pref_checkbox_choose_int"
    android:key="pref_key_num_scroller"
    android:summary="@string/pref_num_scroller_summ"
    android:title="@string/pref_num_scroller"/> 
```

# asp.net-mvc-3 - 在 mvc 3 中填充下拉列表

> ID：11863819
> 
> 赞同：0
> 
> 时间：2012-08-08T11:46:58.717
> 
> 标签：asp.net-mvc-3, linq, c#-4.0, entity-framework-4

我有一张表包含

*   国名和
*   ID

我想在下拉列表中填充 ddl 值作为 id 和文本作为名称。

我已经提交[了这个](https://stackoverflow.com/questions/4827243/populate-a-dropdown-list-from-db) 但没有成功

我是 MVC 的新手。我想知道我们如何在下拉列表中填充数据我`IEnumerable<SelectListItem>`在视图模型中获得的大多数解决方案中都尝试了谷歌，但我无法在我的代码中得到它请给我解决方案或者是其他解决方案.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:55:36.830

将 SelectList 与 ViewBag 一起使用：例如：

```
ViewBag.Countries = new SelectList(db.Countries.OrderBy(c => c.CountryName).ToList(), "CountryId", "CountryName", selectedValue != "" ? selectedValue : "AT"); 
```

在视图中：

```
@Html.DropDownListFor(model => model.Country, ViewBag.Countries as SelectList)
@Html.ValidationMessageFor(model => model.Country) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:59:30.217

试试这个：

```
@Html.DropDownListFor(x => x.Country, new SelectList(Model.DictionaryList, "Key", "Value"), "--Select Country--") 
```

# java - 同步ArrayList并发写入

> ID：11863821
> 
> 赞同：0
> 
> 时间：2012-08-08T11:47:06.240
> 
> 标签：java, multithreading, collections, arraylist

每个人。为了测试 Collections.synchronizedList() 方法返回的 ArrayList，我定义了一个静态类，如下所示。

```
static class ListWriter implements Runnable { 
    private List<Integer> list; 

    public ListWriter(List<Integer> list) { 
        this.list = list; 
    } 

    public void run() {  // I didn't use synchronized(list) {} block here.
        try { 
            for (int i = 0; i < 20; i++) { 
                list.add(i); 
                Thread.sleep(10); 
            } 
        } catch (Exception e) { 
            e.printStackTrace();
        }
    } 
} 
```

和如下测试方法

```
private static void test1() throws Exception {
    List<Integer> list = Collections.synchronizedList(new ArrayList<Integer>());
    Thread t1 = new Thread(new ListWriter(list)); 
    Thread t2 = new Thread(new ListWriter(list));

    t1.start(); 
    t2.start(); 
    t1.join(); 
    t2.join(); 
    for (int i = 0; i < list.size(); ++i) { 
        System.out.println(list.get(i)); 
    } 
} 
```

结果通常是这样的： 0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 10 10 11 11 12 12 13 13 14 14 15 15 16 16 17 17 18 18 19 19

但有时会是这样的：

0 0 1 1 2 3 2 3 4 5 4 5 6 7 6 8 7 9 8 10 9 11 10 12 11 13 12 14 13 15 14 15 16 17 16 17 18 19 18 19

这些结果是否表明进程是线程安全的？关键是我没有在编写线程中使用同步块，这是迭代 Collection.synchronizedList() 方法返回的同步 ArrayList 所明确要求的。那么你认为这个过程是线程安全的还是我需要使用同步块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:49:07.783

输出是不确定的——它取决于底层操作系统的调度行为。
有时你会得到某个序列的事实只是一个巧合。您的列表在创建时由 同步，`Collections.synchronizedList`因此您不需要任何额外的同步。

对列表的线程安全性的粗略测试是在两个线程完成后验证列表中包含的元素数是否等于 40。

如您所述，对于并发读取，您需要按照[文档中的说明在返回的列表上进行同步](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:49:23.307

该`add`方法是同步的，因此您无需在代码中添加任何额外的同步。数字可能乱序的原因是 2 个线程被暂停，`Thread.sleep()`这不是很精确，因此一个线程可能稍微超过另一个线程，从而产生第二个输出。

如果你删除`Thread.sleep()`你会得到更多的输出变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:53:06.667

`list`是同步的，所以你不需要添加任何额外的代码。

每次输出可能都不相同，因为线程将在获得处理器时随机运行。

检查[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:01:06.077

线程的目的是运行独立的任务。如果不是这种情况，他们必须协调他们的行动，这可能是一种开销。

可能令人惊讶的是，您不能保证顺序线程运行，也不能保证它们休眠多长时间。您可以在第二个线程开始之前让一个线程运行完成。您的程序或机器可能会崩溃，并且线程永远不会完成。

> 这些结果是否表明进程是线程安全的？

这表明线程正在按照它们应该的方式独立运行。

> 关键是我没有在编写线程中使用同步块，这是迭代 Collection.synchronizedList() 方法返回的同步 ArrayList 明确需要的

这不是问题，因为此时没有线程在修改列表。

> 那么你认为这个过程是线程安全的还是我需要使用同步块？

不，如果您期望一致的顺序，请不要使用线程。它将更简单，更快，并且每次都给出相同的结果。;)

# php - 注意：foreach 构造中未定义的索引“itemid”

> ID：11863827
> 
> 赞同：0
> 
> 时间：2012-08-08T11:47:43.120
> 
> 标签：php, zend-framework, multidimensional-array, zend-db, zend-db-table

我是 PHP 和 Zend 框架的新手。我遇到了错误：

> 注意：未定义的索引：第 58 行 C:\xampp\htdocs\blogshop\application\views\scripts\item\tops.phtml 中的 itemid

我不明白为什么会出现这个错误。

```
public function topsAction() //tops action
{
    //$tops = new Application_Model_DbTable_Item();
    //$tops->getTops();
    $item = new Application_Model_DbTable_Item(); //create new Item object
    $this->view->item = $item->getTops();  //$this->view->item  is pass to index.phtml
} 
```

这是我的控制器代码。

```
public function getTops()
{
    $row = $this->fetchAll('itemtype = "Tops"'); //find Row based on 'Tops'
    if (!$row) { //if row can't be found
        throw new Exception("Could not find Tops!"); //Catch exception where itemid is not found
    }
    return $row->toArray();
} 
```

这是我在模型中的 getTops 操作，用于在我的数据库中获取类别为“Tops”的行。

```
<?php foreach($this->item as $item) : ?>
    <?php echo $this->escape($this->item['itemid']);?> // This is where the error happens
    <img src="<?php echo $this->escape($item->image);?>" width="82" height="100">
    <?php echo $this->escape($this->item['itemname']);?>
    <?php echo $this->escape($this->item['description']);?>
    <?php echo $this->escape($this->item['itemtype']);?>
<?php endforeach; ?> 
```

这是我显示数据库中所有行的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:57:12.473

`itemid`您的数组中没有指定索引`$this->item`，这就是您收到错误的原因。

此外，您的代码似乎有点错误：

```
<?php foreach($this->item as $item) : ?>
    <?php echo $this->escape($this->item['itemid']);?>
    <img src="<?php echo $this->escape($item->image);?>" width="82" height="100">
    <?php echo $this->escape($this->item['itemname']);?>
    <?php echo $this->escape($this->item['description']);?>
    <?php echo $this->escape($this->item['itemtype']);?>
<?php endforeach; ?> 
```

`$this->item`语句内部的每个`foreach`都应该替换`$item`为迭代才能工作。所以它将是`$item['itemid']`,`$item['itemname']`等。您缺少对数组更深层次的了解，从而使迭代变得`foreach`无用。

我想`$this->item`看起来像这样：

```
array (
  1 => 
  array (
    'itemid' => 1,
    'itemname' => 'foobar',
  ),
  2 => 
  array (
    'itemid' => 2,
    'itemname' => 'bazqux',
  ),
) 
```

这就是为什么`$this->item['itemid']`什么都不返回，因为它不存在。`$this->item[1]['itemid']`然而**确实如此**。循环可以帮助您`foreach`做的是它遍历（迭代）整个`$this->item`数组，每个值都表示为`$item`循环内。在第一次运行中，`$item`是`$this->item[1]`，在第二次中，`$item`是`$this->item[2]`，等等，等等。

因此，更改`$this->item`为`$item`内部`foreach`构造。

# php - Zend/Google 应用程序 - 删除条目 - 需要 if-match og etag 属性

> ID：11863829
> 
> 赞同：0
> 
> 时间：2012-08-08T11:47:44.360
> 
> 标签：php, zend-framework, google-apps

尝试删除条目时返回错误？

你不应该只是调用delete方法来删除条目吗！？

```
$this->client = Zend_Gdata_ClientLogin::getHttpClient($this->admin_user, $this->admin_pass, 'cp');
$this->client->setHeaders('If-Match: *');
$this->gdata = new Zend_Gdata($this->client);
$this->gdata->setMajorProtocolVersion(3);

$feed = $gdata->getFeed($query);
foreach($feed as $entry){
    $entry->delete();
} 
```

错误：

```
ERROR: Expected response code 200, got 403
If-Match or If-None-Match header or entry etag attribute required 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:15:50.443

编辑您的文件 App.php 并在第 538 行附近（至少我的情况），在函数内部`prepareRequest()`更改：

```
if ($method == 'DELETE') {
    $rawData = null;
} 
```

对此

```
if ($method == 'DELETE') {
    $rawData = null;
    $headers['If-Match'] = '*';
} 
```

# linux - 当来自实用程序 w3m 的进程正在运行时，脚本有时会阻塞

> ID：11863831
> 
> 赞同：-2
> 
> 时间：2012-08-08T11:47:48.827
> 
> 标签：linux, bash, shell

我正在编写一个脚本来计算网络上的单词分布（基本上是单词的出现）

我所做的是生成搜索引擎的随机页面，从它们的站点中提取链接并计算单词。

我使用的是谷歌，但验证码阻止了我的请求，现在我使用的是 bing 一切正常，但有一个奇怪的问题

在某个时刻，在我扫描了 100 到 300 页之后，我的程序完全阻止了无所事事

我检查了 ps x 并且有一个实用程序 w3m 的进程正在尝试下载某些东西，但这就像空闲

如果我终止该进程，那么我的脚本将继续运行而不会出现任何问题，就像什么都没发生一样......

会是什么呢？我写的一些错误代码，阻止了太多的请求？

我在想一个非常不雅的解决方案

基本上，如果它的空闲时间超过 5 秒左右，我可以终止该进程，你怎么看，怎么做？恐怕我的整个程序会在那时阻塞，所以我需要一个外部脚本来检查正在运行的进程并在它们阻塞时杀死 w3m 进程

非常感谢您的时间。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:35:56.613

看起来有些页面已经消失或远程服务器没有响应并且 w3m 挂在它上面等待超时超过。顺便说一句，`w3m`在脚本中使用这很不寻常。通常`curl`或`wget`用于该目的。

例如，`wget`可以`--timeout=`选择避免此类问题。

快速谷歌搜索后，我发现`w3m`. 希望你比我幸运一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:41:42.027

> 在我扫描了 100 到 300 页之后

您可能会超过搜索提供商为防止重复抓取而设置的某些阈值。如果搜索提供商猜测您是一个松散的机器人，他们可能会在短时间内限制您的搜索结果。

# php - 使用数组是否比使用多个语句更快？

> ID：11863836
> 
> 赞同：5
> 
> 时间：2012-08-08T11:47:53.143
> 
> 标签：php, regex, preg-replace

我在想。有没有更好的表现：

```
$value  = preg_replace( array('/_{1,}/', '/-{2,}/'), array('_', '-'), $value); 
```

比这个：

```
$value  = preg_replace('/_{1,}/', '_', $value);
$value  = preg_replace('/-{2,}/', '-', $value); 
```

这只是一个非常简单的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:59:01.937

作为我的测试代码：

```
$value = 'dfkjgnnfdjgnjnfdkgn dnf gnjknkxvjn jkngjsrgn';
$value1 = 'dfkjgnnfdjgnjnfdkgn dnf gnjknkxvjn jkngjsrgn';

$start = microtime(true);
for ($i = 0; $i < 1000000; $i++)
$value  = preg_replace( array('/_{1,}/', '/-{2,}/'), array('_', '-'), $value);
echo microtime(true) - $start.'<br>';

$start1 = microtime(true);
for ($i = 0; $i < 1000000; $i++){
    $value1  = preg_replace('/_{1,}/', '_', $value1);
    $value1  = preg_replace('/-{2,}/', '-', $value1);
}
echo microtime(true) - $start1; 
```

> 1.4254899024963
> 
> 1.2811040878296

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:59:55.220

使用 PLB 在评论中提到的 microtime() 测试方法，您会看到大约 0.3 秒的性能差异。第二个例子是“更快”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:10:55.633

为了遵循调用，我创建了一个非常简短的示例，其中替换有一些事情要做：

```
$value  = '1_2__3___4____5_____6______1-2--3---4----5-----6------';

$s_1    = microtime(true);
    for ($i = 0; $i < 1000000; ++$i) {
        $r_1    = preg_replace( array('/_{2,}/', '/-{2,}/'), array('_', '-'), $value);
    }
$e_1    = microtime(true);

$s_2    = microtime(true);
    for ($i = 0; $i < 1000000; ++$i) {
        $r_2    = preg_replace('/_{2,}/', '_', $value);
        $r_2    = preg_replace('/-{2,}/', '-', $r_2);
    }
$e_2    = microtime(true);

print $r_1;
print $r_2;
print $e_1 - $s_1;
print $e_2 - $s_2; 
```

有了这个结果：

> 3.69554805756
> 
> 3.2879319191

正如预期的那样，没有显着差异 - 实际上根本没有差异 - 因为我们正在谈论大约 100 万次通话。有趣的是，第二个版本“稍微”快了一点。我想这是因为创建和运行这些数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T08:13:11.493

有趣的是，我运行了两个脚本，在我的例子中，带有数组的脚本更快。

第一次测试

2.0891699790955

2.2491400241852

* * *

第二次测试

3.2192239761353

3.4498269557953

* * *

系统

**PHP：** 5.4.9

**操作系统：** Ubuntu x64

**CPU：** i7-3630QM

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-08T07:27:59.767

挖掘一个旧线程。我刚刚在 MacOS 上运行了测试，并使用 insertnamehere 的函数得到了这些结果：

```
// Arrays
1.8200218677521

// Individual statements
2.4083371162415 
```

所以这本身很有趣。但是，我想我会更进一步并引入一个新测试，因为在第一个测试中，每个循环都会创建数组。如果我们在循环运行之前创建它们会发生什么？

```
$find = array('/_{2,}/', '/-{2,}/');
$replace = array('_', '-');

$s_3    = microtime(true);
    for ($i = 0; $i < 1000000; ++$i) {
        $r_1    = preg_replace( $find, $replace, $value);
    }
$e_3    = microtime(true); 
```

```
1.7364799976349  // Arrays (created)
2.4450128078461  // Individual statements
1.5605390071869  // Arrays (referenced) 
```

结果每次都不同，但自然引用的数组甚至更快。在我的环境中，单个语句要慢得多。

需要注意的是，简单地重新加载页面几次，两个数组匹配速度趋于收敛，直到几乎没有差异。大概这是 PHP 缓存已编译的脚本 - 进行小编辑并保存它会再次提供更多不同的值。

因此，生产环境还有另一个基准——实时脚本中的值如何随时间变化？

# c# - Nhibernate - 找不到属性的吸气剂

> ID：11863837
> 
> 赞同：10
> 
> 时间：2012-08-08T11:47:53.897
> 
> 标签：c#, .net, nhibernate

我正在尝试构建 MusicStore Nhibernate 端口，我遇到了这个错误：

> 在“MvcMusicStore.Models.OrderDetail”类中找不到属性“OrderInfo”的获取器

除了以下内部异常：

> NHibernate.PropertyNotFoundException：在类“MvcMusicStore.Models.OrderDetail”中找不到属性“OrderInfo”的获取器

同时为 OrderDetail 使用以下映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MvcMusicStore" namespace="MvcMusicStore.Models">
  <class name="OrderDetail">
    <id name="Id">
      <generator class="hilo" />
    </id>

    <many-to-one name="OrderInfo" column="OrderInfoId" />
    <property name="Quantity" />
    <property name="UnitPrice" />

    <many-to-one name="Album" column="AlbumId" />
  </class>
</hibernate-mapping> 
```

和 C# 类定义：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

    namespace MvcMusicStore.Models
    {
        public class OrderDetail : Entity
        {
            public virtual OrderInfo Order { get; set; }
            public virtual Album Album { get; set; }
            public virtual int Quantity { get; set; }
            public virtual decimal UnitPrice { get; set; }
        }
    } 
```

OrderInfo 类的映射如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MvcMusicStore" namespace="MvcMusicStore.Models">
  <class name="OrderInfo">
    <id name="Id">
      <generator class="hilo" />
    </id>

    <property name="OrderDate" />
    <property name="Username" />
    <property name="FirstName" />
    <property name="LastName" />
    <property name="Address" />
    <property name="City" />
    <property name="State" />
    <property name="PostalCode" />
    <property name="Country" />
    <property name="Phone" />
    <property name="Email" />
    <property name="Total" />

    <set name="OrderDetails">
      <key column="OrderInfoId" />
      <one-to-many class="OrderDetail" />
    </set>
  </class>
</hibernate-mapping> 
```

它具有以下 C# 类定义：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcMusicStore.Models
{
    public class OrderInfo : Entity
    {
        public virtual DateTime OrderDate { get; set; }
        public virtual string Username { get; set; }
        public virtual string FirstName { get; set; }
        public virtual string LastName { get; set; }
        public virtual string Address { get; set; }
        public virtual string City { get; set; }
        public virtual string State { get; set; }
        public virtual string PostalCode { get; set; }
        public virtual string Country { get; set; }
        public virtual string Phone { get; set; }
        public virtual string Email { get; set; }
        public virtual string Total { get; set; }

        public virtual ICollection<OrderDetail> OrderDetails { get; set; }
    }
} 
```

Entity 类是一个抽象类，它添加了一个 Guid ID 属性。我究竟做错了什么？老实说，我看不出我的映射有任何错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T11:54:54.663

在映射文件中你说：

```
<many-to-one name="OrderInfo" column="OrderInfoId" /> 
```

你必须说：

```
<many-to-one name="Order" column="OrderInfoId" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T11:54:18.800

属性名称是`Order`，不是`OrderInfo`。将属性重命名为`OrderInfo`：

```
public virtual OrderInfo OrderInfo {get;set;} 
```

或更改配置：

```
<many-to-one name="Order" column="OrderInfoId" /> 
```

# javascript - jQuery 动画向左移出屏幕

> ID：11863840
> 
> 赞同：0
> 
> 时间：2012-08-08T11:48:01.880
> 
> 标签：javascript, jquery, html, css

使用以下函数，我可以将 div 动画到左侧，但问题是，div 超出了屏幕区域。无论如何，我可以在唯一`#mydiv`的范围内保持向左走吗？`#container`如果`#mydiv`已经在左侧，那么它应该什么都不做。

```
 $('.left').click(function() {
        $('#myDiv').animate({
            left: '-=30'
            }, 400, function() {
            // callBack
    }); 
```

**HTML：**

```
<div id="container">
        <a class="left" href="#">Left</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:50:41.133

你可以试试`margin-left: -30px;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:14:19.247

为了获得这一点，您需要验证要移动的 div 是否至少位于您`30px`的`left`侧面`#container`。

```
$('.left').click(function() {
if (parseInt($('#myDiv').css('left')) >= 30) {     
    $('#myDiv').animate({
        left: '-=30'
        }, 400, function() {
        // callBack
    });

     }
 }); 
```

示例：http: [//jsfiddle.net/X2TdJ/1/](http://jsfiddle.net/X2TdJ/1/)

如果您的`#container`意志定位在您的左侧，身体`marginLeft`将不会停止并离开您的`#container`div。

这里的例子：http: [//jsfiddle.net/DAEsX/1/](http://jsfiddle.net/DAEsX/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:56:28.330

要限制容器区域，您可以尝试：

```
$('.left').click(function() {
    if($('#myDiv').offset().left != 0){ //could be >= 0
        $('#myDiv').animate({
            marginLeft: '-=30'
            }, 400);
    }else{
        console.log('left - 0');
    }
}); 
```

CSS：

```
#myDiv{
    width: 300px;
    height: 200px;
    background: red;
    margin-left: 150px;
} 
```

HTML：

```
<div id="container">
    <a class="left" href="#">Left</a>
    <div id="myDiv"></div>
</div> 
```

[例子](http://jsfiddle.net/DAEsX/)

# php - 获取 PHP 中的主要 URL 部分

> ID：11863841
> 
> 赞同：1
> 
> 时间：2012-08-08T11:48:04.697
> 
> 标签：php, url

好的，这就是我正在尝试做的事情（实际上这很快，但决定发布以防我们想出更聪明的东西...... :-)）

*   获取如下 URL：[http ://www.somedomain.com/subfolder/yet-another-subfolder/final.php?param=2](http://www.somedomain.com/subfolder/yet-another-subfolder/final.php?param=2)
*   只检索这部分： http: [//www.somedomain.com/subfolder/yet-another-subfolder/](http://www.somedomain.com/subfolder/yet-another-subfolder/)

这就是我的想法：

```
function getMainPart($url)
{
     $parts = explode("/",$url);
     return str_replace(end($parts),"",$url);
} 
```

你有什么...更聪明或更好的建议吗？有任何想法吗？（或者任何更通用/直接由 PHP 支持的东西？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:50:45.507

您正在寻找[parse_url](http://php.net/manual/en/function.parse-url.php)：

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));

echo parse_url($url, PHP_URL_PATH);
?>

Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
)
/path 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T10:37:28.587

你为什么不试试这个：

```
$main_path = realpath(dirname(\__FILE__)) . "main_folder/"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T11:51:16.693

也许这个可以帮助：

```
echo 'http://'.$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF']); 
```

但这仅适用于当前文件-不适用于每个随机 URL ;) 为此，您应该像 Fluffeh 所说的那样使用[parse_url 。](http://us.php.net/parse_url)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T11:56:36.597

做到这一点的“正确”（尽管更加冗长）的方式：

```
function getMainPart ($url) {
    $parts = parse_url($url);
    if (!isset($parts['scheme'])) {
        return FALSE; // Not a valid, complete URL
    }
    $out = $parts['scheme'].'://';
    if (!empty($parts['user'])) {
        $out .= $parts['user'];
        if (!empty($parts['pass'])) {
            $out .= ':'.$parts['pass'];
        }
        $out .= '@';
    }
    $out .= $parts['host'];
    if (!empty($parts['port'])) {
        $out .= ':'.$parts['port'];
    }
    $out .= $parts['path'] == '/' ? '/' : dirname($parts['path']);
    return $out;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T11:54:28.293

您将需要此[`parse_url()`](http://php.net/manual/en/function.parse-url.php)功能。

```
$parts = parse_url($url);
echo $parts['scheme'] ."://". $parts['host'] . $parts['path']; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T11:56:14.197

如果您确定您的主要部分始终以 / 结尾，则此部分较短且不涉及数组函数：

```
$url = 'http://www.somedomain.com/subfolder/yet-another-subfolder/final.php?param=2';
function getMainUrlPart($url) {
    return substr($url, 0, strrpos($url, '/')+1);
}
echo getMainUrlPart($url); 
```

# javascript - 正则表达式匹配 url 但不匹配超链接中的 url

> ID：11863847
> 
> 赞同：7
> 
> 时间：2012-08-08T11:48:15.063
> 
> 标签：javascript, regex

我正在尝试包装某些文本中的任何 url 并将其转换为超链接......但我不想包装已经被超链接包装的 url。

例如：

```
<a href="http://twitter.com">Go To Twitter</a>
here is a url http://anotherurl.com 
```

以下代码：

```
function replaceURLWithHTMLLinks(text) {
  var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
  return text.replace(exp, "<a href='$1'>$1</a>");
} 
```

给出以下输出：

```
<a href="<a href='http://twitter.com/twitter'>http://twitter.com/twitter</a>">@BIR</a>
<a href="http://anotherurl.com">http://anotherurl.com</a> 
```

**如何修改正则表达式以排除已经超链接的网址？**

谢谢

回答：

新方法是：

```
function replaceURLWithHTMLLinks(text) {
  var exp = /(?:^|[^"'])((ftp|http|https|file):\/\/[\S]+(\b|$))/gi
  return text.replace(exp, " <a href='$1'>$1</a>");
} 
```

上述代码按要求运行。我从评论中的链接修改了正则表达式，因为它包含一个错误，其中包含句号，它现在排除了完整 url 之后的任何句号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:18:15.927

由于[javascript 似乎不支持负后视](https://stackoverflow.com/a/1277583/1503784)，您将不得不使用替换功能来欺骗它。捕获`href`（也许您还应该考虑`src`）：

```
function repl(text) {
  var exp = /((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
  return text.replace(exp, function() {
    return  arguments[1] ? 
            arguments[0] : 
            "<a href=\"" + arguments[3] + "\">" + arguments[3] + "</a>"
  });
} 
```

查看[演示](http://jsfiddle.net/VGVhv/)

**编辑**

一个“更好”的版本，它只会替换实际文本节点中的链接：

```
function repl(node) {
  var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
  var nodes=node.childNodes;
  for (var i=0, m=nodes.length; i<m; i++){
    var n=nodes[i];
    if (n.nodeType==n.TEXT_NODE) {
      var g=n.textContent.match(exp);
      while(g) {
        var idx=n.textContent.indexOf(g[0]);
        var pre=n.textContent.substring(0,idx);
        var t=document.createTextNode(pre);
        var a=document.createElement("a");
        a.href=g[0];
        a.innerText=g[0];
        n.textContent = n.textContent.substring(idx+g[0].length);
        n.parentElement.insertBefore(t,n);
        n.parentElement.insertBefore(a,n);
        g=n.textContent.match(exp);
      }
    }
    else {
      repl(n);
    }
  }
}

var r=repl(document.getElementById("t")) 
```

​查看[演示](http://jsfiddle.net/mAJkL/)

# sql - 在存储过程中动态创建 IN 子句

> ID：11863848
> 
> 赞同：8
> 
> 时间：2012-08-08T11:48:17.673
> 
> 标签：sql, sql-server-2008, stored-procedures

> **可能重复：**
> [在使用 IN 子句进行动态查询时需要帮助](https://stackoverflow.com/questions/11845794/need-help-in-dynamic-query-with-in-clause)

我正在使用 SQL Server 2008，这是我面临的问题。我有一个名为 Cars 的表，其中有一列 Company。现在我有一个看起来像这样的存储过程

```
创建过程 FindCars (@CompanyNames varchar(500))
作为
SELECT * FROM Cars WHERE Company IN (@CompanyNames)

```

我尝试了这样的事情并失败了

```
声明@CompanyNames varchar(500)
SET @CompanyNames = '''福特'',''宝马'''

执行 FindCars @CompanyNames

```

我没有返回任何行。当我执行以下操作时

```
声明@CompanyNames varchar(500)
SET @CompanyNames = '''福特'',''宝马'''

选择@CompanyNames

```

我得到以下结果

```
“福特”、“宝马”

```

如果我在存储过程中的 select 语句中替换这个值，它就可以工作

```
SELECT * FROM Cars where Company in ('Ford','BMW')

```

因此，我认为存储过程似乎被`'Ford','BMW'`视为一个字符串而不是一个数组。有人可以帮我解决这个问题。如何在存储过程中动态构造 select 语句的 IN 子句中所需的字符串/数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T11:53:29.753

没错，您创建了一个字符串，并将其作为包含一个字符串的字符串列表进行处理。逗号只是那个字符串中的字符。SQL Server 中数组的唯一等价物是表。

例如; `WHERE x IN (SELECT y FROM z)`.

出于这个原因，许多人创建了一个`SPLIT_STRING()`函数，该函数从给定的逗号分隔字符串中返回一个项目表......

```
WHERE x IN (SELECT item FROM dbo.split_string(@input_string)) 
```

有很多方法可以实现该拆分字符串。一些返回字符串，一些转换为整数，一些接受第二个“分隔符”参数等，等等。您可以在互联网上搜索`SQL SERVER SPLIT STRING`并获得许多结果 - 包括 StackOverflow 中的此处。

另一种方法是使用动态 SQL；编写 SQL 的 SQL。

```
SET @sql = 'SELECT * FROM x WHERE y IN (' + @input_string_list + ')'

SP_EXECEUTESQL @sql 
```

*（我建议`SP_EXECUTESQL`不要这样做，`EXEC`因为前者允许您使用参数化查询，但后者不允许。）*

# clojure - lein 是否包含 Maven 可执行文件？

> ID：11863849
> 
> 赞同：2
> 
> 时间：2012-08-08T11:48:22.270
> 
> 标签：clojure, leiningen

我需要执行一个`mvn install`. 据我所知，Leiningen（我已经拥有）是基于 Maven 构建的，所以也许我不需要单独安装 Maven - 或者我需要吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:08:41.913

Leiningen 使用[pomegranate ，一个用于](https://github.com/cemerick/pomegranate)[Eclipse Aether](http://www.eclipse.org/aether/)的 Clojure 包装器，一个用于处理工件存储库的库。由于需要访问存储库的产品更多，Aether 的功能从 Maven 分离到一个单独的项目中，并且 Maven 被更改为使用 Aether。

石榴具有安装功能

```
install
  "Install the jar-file kwarg using the pom-file kwarg and coordinates kwarg.

:coordinates - [group/name \"version\"]
:jar-file - a file pointing to the jar
:pom-file - a file pointing to the pom
:local-repo - path to the local repository (defaults to ~/.m2/repository)
:transfer-listener - same as provided to resolve-dependencies" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:52:29.733

我相信有一个`lein install`任务。

# ios - 如何使用 NSFetchRequest 获取特定值

> ID：11863851
> 
> 赞同：0
> 
> 时间：2012-08-08T11:48:26.270
> 
> 标签：ios, nsmanagedobject

我需要获取值为 xxx 的特定托管实体。

我的托管对象是

```
Subscriptions : NSManagedObject{
    @property (nonatomic, retain) NSString * name;
    @property (nonatomic, retain) NSNumber * id;
    @property (nonatomic, retain) NSNumber * category;
    @property (nonatomic, retain) NSNumber * frequency;
    @property (nonatomic, retain) NSNumber * alertType;
} 
```

我只需要获取名称为“xxx”的一个实体。（只有一个名称为 xxx 的实体。）我还需要获取类别为 1 的所有实体。

我怎样才能使用 NSFetchRequest 做到这一点。我知道如何使用 NSFetchedResultsController 来获取实体的所有实体值，但我只想获取名称为 xxx 的实体值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:55:45.180

假设你有一个`NSManagedObjectContext *context`，那么：

```
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease]; //Note don't use autorelease if you're using ARC
request.entity = [NSEntityDescription entityForName:@"Subscriptions" inManagedObjectContext:context];
NSString *someName = @"xxx";
request.predicate = [NSPredicate predicateWithFormat:@"name ==[c] %@", someName]; //[c] means case insensitive
NSArray *result = [context executeFetchRequest:request error:nil]; 
```

结果数组将包含所有返回的结果，并且类型为`Subscriptions`。如果谓词只匹配一项，则只有一个结果，如果不匹配，则数组将被初始化，但其`count`属性将为 0。您可以查看[NSPredicate 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)以及如何将其与`CoreData`.

# python - Python - 运行脚本在鸡蛋里？

> ID：11863856
> 
> 赞同：2
> 
> 时间：2012-08-08T11:48:36.373
> 
> 标签：python, egg

我创建了一个可执行的 egg 以使其成为单个文件可执行文件。

*设置.py*：

```
#!/usr/bin/env python
from setuptools import setup, find_packages

setup(
    name='app',
    version='0.5',
    description='foo',
    author='microo8',
    author_email='xxx@email.com',
    packages=["foo", "bar"],
    install_requires=["sqlalchemy>=0.7", "paramiko>=1.7.7.1"],
    entry_points = {
        'setuptools.installation': [
            'eggsecutable = foo.module:main',
        ]
    }
) 
```

我现在可以称之为：`./app-0.5-py2.7.egg`，但相对路径都在鸡蛋中。当我调用它打印`print __file__`的函数时。我想读取一个配置文件，它必须与鸡蛋在同一个目录中。并且相同的脚本也必须作为“非鸡蛋”可执行，因此配置文件将与脚本一起位于目录中。`main``/home/user/app-0.5-py2.7.egg/foo/module.py`

我怎样才能知道脚本是从鸡蛋和鸡蛋路径中执行的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:46:55.843

您应该使用[`ResourceManager`API](https://pythonhosted.org/setuptools/pkg_resources.html#resourcemanager-api)加载配置文件。这样，您的蛋化代码即使在压缩时也可以加载配置文件。

```
import pkg_resources
configdata = pkg_resources.resource_string(__name__, "myconfigfile.cfg") 
```

API 可以检查是否存在、测试目录、读取数据或为您提供鸡蛋中任何资源的打开文件对象。

API 负责处理所有细节；例如，如果您绝对必须有一个资源的文件名但从一个压缩的鸡蛋运行，它会将文件提取到一个临时目录。

最重要的是，无论您实际上是作为鸡蛋安装还是独立安装，它都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:45:03.870

所以我不知道如何检查运行脚本是否在鸡蛋中，但是可以通过以下方式获得配置文件路径：`os.path.realpath('config.cfg')`.

这适合我，当我有一个包含可执行文件的目录和配置文件时，这是一个正确的路径。

此外，当我在配置文件的目录中只有脚本时，它也是正确的。

而且当我使用[pyinstaller](http://www.pyinstaller.org/)创建单文件 exe 时。

# android - Android ArcGIS地图加载进度

> ID：11863863
> 
> 赞同：1
> 
> 时间：2012-08-08T11:48:53.023
> 
> 标签：android, map, loading, arcgis

我目前正在开发一个使用 arcGIS 地图的 Android 项目。我一直在网上搜索一种在需要加载地图时显示地图加载进度的方法。我知道此功能存在于 Silverlight 和 Javascript 的 API 中，我想知道这是否也适用于 Android。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T14:55:38.643

你可以自己做。

首先，您将 setOnStatusChangedListener 添加到地图/图层。您在地图/图层开始充电时启动进度对话框，并在加载地图/图层时通过检查 OnStatusChangedListener.STATUS.LAYER_LOADED 关闭进度对话框

# c#-4.0 - TweetSharp 如何知道用户已更改/更新他的密码

> ID：11863867
> 
> 赞同：0
> 
> 时间：2012-08-08T11:49:10.233
> 
> 标签：c#-4.0, tweetsharp

我有 OauthToken 和 OauthSecretToken 令牌使用是

```
 var service = new TwitterService(ClientInfo.ConsumerKey, ClientInfo.ConsumerSecret);
            service.AuthenticateWith(OauthToken , OauthSecretToken); 
```

有什么方法可以检查该用户是否更改了他/她的密码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:16:21.467

没有办法知道这一点。OAuth 的目的之一是应用程序无法知道有关用户密码的任何信息，因此无法知道用户是否更改了密码。

# android - Android 应用程序无法运行

> ID：11863873
> 
> 赞同：1
> 
> 时间：2012-08-08T11:49:28.663
> 
> 标签：android, eclipse, apk, facebook-android-sdk

我的问题是我永远无法在模拟器或真实设备中运行我的 android 应用程序。

我有日食 Helios 作为

```
Eclipse IDE for Java Developers

Version: Helios Service Release 2
Build id: 20110301-1815
(c) Copyright Eclipse contributors and others 2000, 2011\.  All rights reserved.
Visit http://eclipse.org/

This product includes software developed by the
Apache Software Foundation http://apache.org/ 
```

配置了最新的 SDK 和正确的 AVD。但问题是在创建应用程序时。我按照这些步骤

```
1) File > New > Android Application Project
 Here a diaglog box appears where I put application name etc, The finish button is disabled in this step.

2)On clicking next the "Configure Launcher Icon" dialog appears, here too the finish button is disabled

3) In the third step "Create activity" dialog appears, here also the "Finish" button is disabled. 
I select "blank activity" from the list box and click next

4) On the fourth step "New blank Activity" dialog box appears as shown in the figure. 
```

![在提到的盒子里放什么](../Images/8fe5bc2d27a79f6fec2da6bea6d419f3.png)

在分层父字段中输入内容后，完成按钮被激活。单击完成后，将创建应用程序骨架。

现在，当我运行应用程序时，我面临两个问题 1) 有时它说项目中存在错误并要求修复它 2) 如果它运行，模拟器会出现，并且与正在运行的应用程序无关。

我下载了 apk 文件并安装在我的三星 Galaxy S2 中，但那里的打开/运行按钮被禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:30:55.197

[是的，我遇到了同样的问题。我像其他人所说的那样只是检查更新，但什么也没找到。然后我使用https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/,and)重新安装了 ADT 插件，并更新了 ADT 版本从 v20.0.0 到 v20.0.1。所有问题都解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:17:15.010

1.  在分层父字段中给出您想要的名称
2.  转到 AndroidManifest.xml 需要一个“android.intent.action.MAIN”才能启动。

**添加**

`action android:name="android.intent.action.MAIN` `category android:name="android.intent.category.LAUNCHER`

# java - 在 Java 中查找最大组合总数

> ID：11863874
> 
> 赞同：5
> 
> 时间：2012-08-08T11:49:29.750
> 
> 标签：java, algorithm, set, mathematical-optimization

假设您有一组如下数字：

```
[A,B,C]

[6, 4.5, 6]
[7, 6, 5]
[9, 4.5, 6] 
```

一个类别（A、B 或 C）的每个集合**AND中只能使用一个数字来找到最大和。**在这种情况下，A=9、B=6 和 C=6 将产生 21 的最大和。最大和不能是 22 (9+7+6)，因为 9 和 7 由于都是 A 类而发生冲突。

我怎样才能在 Java 中做到这一点？

我很难找到最大的总和，因为在每个类别中选择最大值并不能保证最大的总和。某些类别可能会被强制为较小的值，从而减少总和。请记住，只能从类别的每一组 AND 中选择一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:33:06.323

这听起来有点像[八皇后拼图](http://en.wikipedia.org/wiki/Eight_queens_puzzle "维基百科")，您必须将 8 个皇后放在棋盘上，而其中任何一个都不会挡在另一个棋盘上。（如果您不懂国际象棋，请不要为类比而烦恼）。

假设您的示例数组：

```
[6, 4.5, 6]
[7,   6, 5]
[9, 4.5, 6] 
```

找到整体上的最大值（在本例中为 9），并屏蔽其列和行。

您的新数组看起来像这样（x 作为选择不再有效）。

```
[x, 4.5, 6]
[x,   6, 5]
[x,   x, x] 
```

一遍又一遍地重复该过程，直到您从每一列和每一行中选择一个值。

现在，作为警告，当前最大值有多个位置（如示例的第二步，两个 6）会导致更多情况。我会把一些乐趣留给你，但如果需要，我很乐意提供更多帮助。

***警告***

正如 Neil C. 在评论中指出的那样，这个答案是无效的。具体反例：

```
[10, 9, 1]
[ 9, 1, 1]
[ 1, 1, 1] 
```

我手头还没有修复程序，但我想留下这个答案，以帮助提出正确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:02:25.107

蛮力搜索的一种简单方法是生成长度为 N 的所有排列，其中 N 是类别的数量。然后，对于每个排列，计算`Matrix[i][Permutation[i]]`所有 i 的总和并取最大值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T12:05:32.570

这里有一些关于我将如何做的想法。

假设您将数据存储在二维整数数组中

```
int [] [] data = new int [rows] [columns] 
```

所以在这种情况下，列是 A、B、C 等。

搜索最大值时需要像这样迭代：

`data[i][fix]`所以列是固定的，行在循环中改变

在您的示例中，如果您想获得最大值，`A`并且像我建议的那样使用二维数组，那么：

```
int [] [] data = new int [3][3]; 
```

那么你需要从中获得最大值的集合`A`是`data [0][0]`，`data[1][0]`并且`data[2][0]`

编辑：

这是适合您的一种可能的解决方案。

```
//here is our data array.
int [][] data = new int[3][];

//fill up with som random data
data[0] = new int[]{10,20,4,5,56,87,9};
data[1] = new int[]{1,65,0,10,3};
data[2] = new int[]{34,5,6,67,3,54};

//get the biggest arrays length
int maxArrayLength = 0;
for(int i=1; i<data.length; i++)
{
    if(data[i].length > data[maxArrayLength].length)
        maxArrayLength = i;
}
maxArrayLength = data[maxArrayLength].length;

//collect the max in each category
int [] categoryMax = new int[maxArrayLength];

//loop through the categories
for(int i=0; i<maxArrayLength; i++)
{
    //in each iteration we get a winner
    int categoryWinner = 0;

    // now loop through the values of the current category
    for(int j=0; j<data.length; j++)
    {
        int [] actualArray = data[j];
        int [] winnerArray = data[categoryWinner];

        //check if we are in the bounds, if so, then perform a simple maxsearch
        if(i<actualArray.length)
            if(actualArray[i] > winnerArray[i])
            categoryWinner = j;
    }

    //set the current element of the winners array.
    categoryMax [i] = data[categoryWinner][i];
}

int sum = 0;

// we are ready, print it out!
for(int i=0; i<categoryMax.length; i++)
{
    System.out.println((i+1) + ". groups winner: " + categoryMax[i]);
    sum+=categoryMax[i];
}
System.out.println(sum); 
```

# c++ - 如何打包使用 Antlr 生成的解析器

> ID：11863875
> 
> 赞同：1
> 
> 时间：2012-08-08T11:49:32.393
> 
> 标签：c++, antlr, software-distribution

我是学生。作为我项目的一部分，我为计算机架构模拟制作了一种小型语言。我使用 Antlr3 为这种语言制作了一个解析器+翻译器。用我的语言编写的东西被翻译成 C++ 代码，用户可以编译和执行这些代码来运行模拟。

我没有任何打包软件的经验（即使其适合其他人轻松安装和使用）。虽然目前我是唯一一个使用它的人，但我想知道**什么是打包它的好方法**，所以我可以与其他人分享。

我要打包：

*   antlr 为我的语言生成 Lexer+Parser
*   包裹 antlr 生成的东西的代码
*   antlr C 运行时库。

我如何将所有这些作为我的语言的翻译分发？

我记得当我安装 C 运行时库时，我的机器/操作系统特有的东西被处理了。（例如，如何表示文件结尾）。我是否应该假设我的翻译器的用户已经单独安装了 C 运行时？

谢谢，

-neha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:03:12.513

你想把它打包成……什么？

*   RPM（例如 CentOS）在这里阅读：http: [//www.gurulabs.com/downloads/GURULABS-RPM-LAB/GURULABS-RPM-GUIDE-v1.0.PDF](http://www.gurulabs.com/downloads/GURULABS-RPM-LAB/GURULABS-RPM-GUIDE-v1.0.PDF)
*   对于 Debian：[http ://wiki.debian.org/HowToPackageForDebian](http://wiki.debian.org/HowToPackageForDebian)
*   在 OsX 上，通过自制程序打包：[https ://github.com/mxcl/homebrew/wiki/Formula-Cookbook](https://github.com/mxcl/homebrew/wiki/Formula-Cookbook)

# iphone - HTTP请求逐行处理

> ID：11863876
> 
> 赞同：2
> 
> 时间：2012-08-08T11:49:37.907
> 
> 标签：iphone, objective-c, ios

我有一个 iOS 应用程序，我正在从非常缓慢和笨重的 SOAP 迁移到自定义数据格式（基本上是带有一些额外位的 CSV）。

我的首要任务是尽快将初始数据发送给客户端，同时让它在后台加载更多。服务器端被写入连续刷新数据而不是缓存响应。

所以我想在它们到达客户端时解析每一行，而不是等待完整的响应。

如果我在浏览器中查看它，我会得到渐进式加载。但是，使用 MKNetworkKit 或 ASIHTTPRequest 或类似的，我只能获得需要几秒钟的完整响应。

有谁知道最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:00:01.817

NSURLconnection 可以做你想做的事。您设置委托并使用`-connection:didWriteData:totalBytesWritten:expectedTotalBytes:`回调在下载数据块时读取它。

正确处理拆分行和处理包含部分行的块将取决于您。

# qt - Qt 在另一个小部件中添加一个小部件？

> ID：11863891
> 
> 赞同：6
> 
> 时间：2012-08-08T11:50:49.220
> 
> 标签：qt, user-interface, widget, pyqt

我想制作一个结合两个现有小部件行为的小部件。例如，一个小部件是一个按钮，它还包含一个复选框。用户可以单击较大的按钮，也可以单击其中的复选框。

例如，gmail 引入了一个“全选”按钮，该按钮在单击时显示一个菜单，但它还集成了一个选择所有电子邮件的复选框。有关示例，请参见此屏幕截图：
![在此处输入图像描述](../Images/29ccbefc3c3b3a00e1b35dd59462317e.png)

如何将现有小部件的行为组合到这种效果？我希望有一个可以组合小部件行为的解决方案，我只需要覆盖它们冲突的地方。

这个问题类似于[在 qt 中将多个小部件组合为一个](https://stackoverflow.com/questions/8366617/combine-multiple-widgets-into-one-in-qt)问题，但不同之处在于我希望将两个小部件放在彼此之上并显示为一个小部件。

为了响应 cbamber85 的回复，我添加了下面的代码来显示我已经设法整合回复的程度。与 cbamber85 的回复一样，这不包含真正的功能，它只是他的代码的 PyQT 版本。

```
from PyQt4 import QtCore, QtGui

class CheckBoxButton(QtGui.QWidget):
    checked = QtCore.pyqtSignal(bool)

    def __init__(self, *args):
        QtGui.QWidget.__init__(self, *args)
        self._isdown = False
        self._ischecked = False

    def isChecked(self):
        return self._ischecked

    def setChecked(self, checked):
        if self._ischecked != checked:
            self._ischecked = checked
            self.checked.emit(checked)

    def sizeHint(self, *args, **kwargs):
        QtGui.QWidget.sizeHint(self, *args, **kwargs)
        return QtCore.QSize(128,128)

    def paintEvent(self, event):
        p = QtGui.QPainter(self)
        butOpt = QtGui.QStyleOptionButton()
        butOpt.initFrom(self)
        butOpt.state = QtGui.QStyle.State_Enabled
        butOpt.state |= QtGui.QStyle.State_Sunken if self._isdown else QtGui.QStyle.State_Raised

        self.style().drawControl(QtGui.QStyle.CE_PushButton, butOpt, p, self)

        chkBoxWidth = self.style().pixelMetric(QtGui.QStyle.PM_CheckListButtonSize,
                                               butOpt, self) / 2
        butOpt.rect.moveTo((self.rect().width() / 2) - chkBoxWidth, 0)

        butOpt.state |= QtGui.QStyle.State_On if self._ischecked else QtGui.QStyle.State_Off
        self.style().drawControl(QtGui.QStyle.CE_CheckBox, butOpt, p, self)

    def mousePressEvent(self, event):
        self._isdown = True
        self.update()

    def mouseReleaseEvent(self, event):
        self.setChecked(not self.isChecked())
        self._isdown = False
        self.update()

class Dialog(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        widg = CheckBoxButton(self)
        self.setCentralWidget(widg)

if __name__ == '__main__':
    app = QtGui.QApplication([])
    window = Dialog()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:24:28.760

是的，当然可以，但它的简单程度取决于*小*部件的组合方式。

例如，如果您想创建一个旁边有标签而不是内部的按钮，您可以从 派生并`QWidget`添加您的`QLabel`and`QPushButton`作为成员，然后简单地将它们附加到构造函数中的小部件的内部布局。（我应该指出，有很多不同的方法可以做到这一点）。

然而，对于将*行为*组合成一个新的、视觉上不同的小部件的小部件——您需要告诉 Qt 如何绘制它。因此，子类化`paintEvent(..)`并将您的小部件手动绘制到`QPainter(this)`. 并且要将小部件与当前样式匹配，您必须`QStyle`为您绘制组件 - 这实际上让生活变得更加轻松。

然后您需要覆盖`mouse###Event(..)`并手动处理鼠标交互（并且可能还需要键盘交互）。

这很费力，但是您的小部件越接近现有小部件，工作自然就越少。在您的情况下，我会从中派生，`QToolButton`因为它已经支持下拉菜单。然后重新实现`paintEvent(..)`，调用`QStyle::drawControl(CE_PushButtonBevel, ...`绘制按钮，然后`QStyle::drawControl(CE_CheckBox, ...`在正确的状态下绘制复选框。然后重新实现`mousePressEvent(..)`，确定是否在复选框命中区域内，并相应地更改状态。

## 一个可笑的例子

这个毫无意义的小部件演示了上面描述的一些技术。

```
class WeirdCheckBoxButton : public QWidget
{
    Q_OBJECT

public:
    explicit WeirdCheckBoxButton( QWidget* parent = nullptr )
             : QWidget( parent ), checked_( false ), down_( false ) {}
    virtual ~WeirdCheckBoxButton() {}

    bool isChecked() const { return checked_; }
    QSize sizeHint () const { return QSize( 128, 128 ); }

public slots:
    virtual void setChecked( bool checked )
    {
        if ( checked_ != checked ) {
            checked_ = checked;
            emit clicked( checked );
        }
    }

signals:
    void clicked( bool checked );

protected:
    virtual void paintEvent( QPaintEvent* event )
    {
        Q_UNUSED( event )
        QPainter p( this );

        //  QStyleOption, and derived classes, describe the state of the widget.
        QStyleOptionButton butOpt;
        butOpt.initFrom( this ); // A convenience function that steals state
                                 // from this widget.
        butOpt.state = QStyle::State_Enabled;
        butOpt.state |= down_ ? QStyle::State_Sunken : QStyle::State_Raised;

        //  Renders the widget onto the QPainter.
        style()->drawControl( QStyle::CE_PushButton, &butOpt, &p, this );

        //  pixelMetric() gives you style relevant dimensional data.
        int chkBoxWidth = style()->pixelMetric( QStyle::PM_CheckListButtonSize,
                                                &butOpt, this ) / 2;
        butOpt.rect.moveTo( ( rect().width() / 2 ) - chkBoxWidth, 0 );
        butOpt.state |= checked_ ? QStyle::State_On : QStyle::State_Off;
        style()->drawControl( QStyle::CE_CheckBox, &butOpt, &p, this );
    }

    virtual void mousePressEvent( QMouseEvent* event )
    {
        Q_UNUSED( event )

        down_ = true;
        update();
    }

    virtual void mouseReleaseEvent( QMouseEvent* event )
    {
        Q_UNUSED( event )

        setChecked( !isChecked() );
        down_ = false;
        update();
    }

private:
    bool checked_;
    bool down_;
}; 
```

这是一个薄弱的例子，但它已经成熟，可以复制和试验了。例如，通过访问`butOpt.palette`，您可以根据它们的状态调整呈现的小部件的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:07:50.127

是的，有可能。您可以在 QtDesigner 中构建一个单独的小部件，其中包含您的所有功能和添加小部件交互的一切。您可以编写后端（python 或 c++ 等）代码来处理复杂的交互性。一旦你完成了所有。您可以将其打包为 QtDesignerPluginWidget。这将在您的 QtDesigner 小部件列表框中可用。您可以拖放它来构建您的主应用程序。

检查： [http](http://doc.qt.nokia.com/qq/qq26-pyqtdesigner.html) ://doc.qt.nokia.com/qq/qq26-pyqtdesigner.html （基于 C++） [http://diotavelli.net/PyQtWiki/Using_Python_Custom_Widgets_in_Qt_Designer](http://diotavelli.net/PyQtWiki/Using_Python_Custom_Widgets_in_Qt_Designer)（基于 Python）

# javascript - HTML5 2 音频标签

> ID：11863898
> 
> 赞同：1
> 
> 时间：2012-08-08T11:51:14.637
> 
> 标签：javascript, jquery, html, audio

我在这些标记中有两个音频标签。我的问题是第二个无法播放

```
<div class="container">
    <div class="post-container">
        <legend>
            <strong>Zedd - Spectrum</legend>
        </h4>
        <div class="art-item">
            <img src="uploads/arts/default.jpg">
        </div>
        <audio class="audio-player" src="uploads/tracks/02 So Far.mp3"></audio>
        <div class="playerContainer">
            <ul id="playerControls">
                <li class="play-bt"></li>
                <li class="pause-bt"></li>
                <li>
                    <div class="progressContainer">
                        <!-- Progess bars container //-->
                        <div class="progressbar"></div>
                    </div>
                </li>
            </ul>
            <span class="timecode">0:00</span>
        </div>
    </div>
    <div class="post-container">
        <legend>
            <strong>Zedd - Spectrum</legend>
        </h4>
        <div class="art-item">
            <img src="uploads/arts/default.jpg">
        </div>
        <audio class="audio-player" src="uploads/tracks/track3.mp3"></audio>
        <div class="playerContainer">
            <ul id="playerControls">
                <li class="play-bt"></li>
                <li class="pause-bt"></li>
                <li>
                    <div class="progressContainer">
                        <!-- Progess bars container //-->
                        <div class="progressbar"></div>
                    </div>
                </li>
            </ul>
            <span class="timecode">0:00</span>
        </div>
    </div>
</div> 
```

这是播放曲目的脚本

```
$(".play-bt").click(function(){
                    var $artItem = $(this).parent(".art-item");
                    console.log($artItem);
                    $artItem.find('audio').play();
                    $artItem.find(".message").text("Music started");
                }); 
```

我的问题是我只能播放第一个音频标签。如果还有更多，我该怎么做才能播放第二个标签或第三个音频标签？计数器是选择要播放的音频标签的计数器。但截至目前，我不知道如果此标记中有更多音频帖子，我将如何制作第二个音频标签或用户选择的音频标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:02:45.110

不是 100% 确定这是唯一的问题，但您经常使用 id。id 在页面上应该是唯一的。用类替换它们

而且你的参考是错误的。

```
$("#play-bt").click(function(){
    // -> will allways try to play song indicated by counter (0)
    $(".audio-player")[counter].play(); 
    $("#message").text("Music started");
}) 
```

我不认为你想要那个？您不想在“后容器”中播放音频吗？

你可以这样做：

```
$(document).ready(function(){
    $(".play-bt").click(function(){
        var $post= $(this).parents(".post-container");
        $post.find('audio')[0].play();
        $post.find(".message").text("Music started");
    });
}); 
```

​</p>

=> 并将 play-bt 和消息 ID 更改为类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:56:12.670

事情对您不起作用的原因是您的标记......在您的代码中，您尝试获取单击的“play-bt”类的“父级”，但“art-item”在您的 DOM中**不是**父级结构体。可能让你认为是，是你不正确的标记缩进......

# visual-studio-2010 - 如何将编译指示添加到由预处理 T4 模板生成的 C# 代码

> ID：11863900
> 
> 赞同：1
> 
> 时间：2012-08-08T11:51:23.303
> 
> 标签：visual-studio-2010, t4

我有一些生成 C# 代码的预处理 T4 模板 - 但生成的代码会导致编译器警告，例如“缺少公开可见类型或成员的 XML 注释......”。

为了防止出现警告，我想将“#pragma warning disable 1591”嵌入到 T4 处理器生成的代码中。

有什么方法可以将编译指示嵌入到我的模板中，以便它出现在生成的代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:12:52.587

恐怕您只能在项目设置中的项目级别进行设置。我们已在 Visual Studio 2012 中修复了该特定问题，因此他们应该构建警告干净。

# java - java中接口作为参数类型的使用

> ID：11863905
> 
> 赞同：1
> 
> 时间：2012-08-08T11:51:37.373
> 
> 标签：java

考虑下面的例子。

为什么不允许我使用*BImpl*作为方法*doSomething3*的参数类型？当我说“不允许”时，我的意思是 Eclipse 抱怨接口*AInf*中的 doSomething3 方法没有实现。

```
interface AInf
{
    AInf doSomething();
    BInf doSomething2();
    void doSomething3(BInf param);
}

interface BInf
{

}

class AImpl implements AInf
{

    @Override
    public AImpl doSomething() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public BImpl doSomething2() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void doSomething3(BImpl param) // This method is not overriding the doSomething3(BInf param) from the AInf
    {
        // TODO Auto-generated method stub
    }
}

class BImpl implements BInf
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:54:18.230

因为`doSomething3(BImpl param)`没有实现`doSomething3(BInf param)`。

`BInf`可以有许多实现，并且该方法应该适用于所有实现，而不仅仅是一个。

始终牢记扩展类或实现接口定义了`is a`关系。所有扩大/缩小的规则都是由此产生的逻辑结果。

如果你用一个具体的例子来想象它会更容易：金钱。硬币就是钱，纸币也是钱。

如果您去一家决定将您购买的零钱限制为硬币的商店，这可能会很烦人，但这是合法的。没关系，因为它不会违反合同，他们总是在退钱。

但是当你在一家他们应该接受钱而他们不会接受你的硬币的商店里，那就不行了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T11:55:25.940

您必须具有与接口相同的类型。

界面说它会接受

```
void doSomething3(BInf param); 
```

这意味着它将接受`BInf`任何子类型（因为可以预期它们的行为相同 - 请参阅[Liskov Substitution Princple](https://en.wikipedia.org/wiki/Liskov_substitution_principle)。

您的实施不遵守本合同

```
public void doSomething3(BImpl param) 
```

这个实现说我只会为 工作`BImpl`，但什么也没说`BInf`。

（针对@IsmerSlomic 的问题进行编辑）

对于返回类型，Java 允许[协变返回类型](https://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)。这不会破坏 LSP，因为它返回的东西至少保证是接口中的返回类型。如果返回类型更特殊，那么通过 LSP，它仍然会做与返回原始接口相同的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:53:32.717

其声明为：

```
void doSomething3(BInf param); 
```

但是您尝试使用不同的类型实现：

```
public void doSomething3(BImpl param) 
```

Binf 和 BImpl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:54:58.893

问题是 doSomething3 将 Bimpl 作为参数，但界面显示参数是 BInf（BImpl 不是 BInf）。并且由于有一个 @Override 注释，您告诉编译器您正在覆盖接口中的方法，您显然不是，因此是错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T11:59:23.553

您可以返回 AImpl 和 BImpl 因为它们是协变返回类型（或者简单地说，所有 AImpl 对象都是 AInf 对象，并且所有 BImpl 对象都是 BInf 对象，因此调用者知道它正在返回接口中声明的 AInf 或 BInf 对象）。

这不适用于方法参数，因为您无法控制传递给 doSomething3() 方法的内容，因此无法保证 BInf 参数实际上是 BImpl。

# java - 如何在 Java 中将 MS Word 撇号 [you're] 替换为普通文本撇号 [you're]

> ID：11863908
> 
> 赞同：0
> 
> 时间：2012-08-08T11:51:51.800
> 
> 标签：java, jsp

当我们在 JSP 上使用 MS Word 撇号 [you're] 显示文本时，它会被替换为 ? [你是] 。请帮助我找到将 MS Word 撇号 [you're] 替换为普通文本撇号 [you're] 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:30:16.940

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:57:03.743

如果您使用[od](http://linux.about.com/library/cmd/blcmdl1_od.htm)或类似的，您可以转储有问题的文件并确定您要替换的字符的代码。然后，您可以将 Java 正则表达式与以下表示字符代码的[模式之一一起使用：](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

```
\0n     The character with octal value 0n (0 <= n <= 7)
\0nn    The character with octal value 0nn (0 <= n <= 7)
\0mnn   The character with octal value 0mnn (0 <= m <= 3, 0 <= n <= 7)
\xhh    The character with hexadecimal value 0xhh
\uhhhh  The character with hexadecimal value 0xhhhh 
```

例如

```
String replaced = oldString.replaceAll("\u1234", ","); // where 1234 is your character code 
```

# wpf - 拖动并选择画布中的项目并删除所选项目

> ID：11863918
> 
> 赞同：0
> 
> 时间：2012-08-08T11:52:43.943
> 
> 标签：wpf

我正在 WPF 中创建一个应用程序，我需要从画布中**选择多个项目**（拖放）并从该画布中**删除**它。

任何人都可以在这个问题上帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T09:43:19.477

使用 ObservableCollection 将所有控件添加到选定控件的列表中。

# arduino - 三星 IR 代码校验和

> ID：11863920
> 
> 赞同：3
> 
> 时间：2012-08-08T11:52:49.687
> 
> 标签：arduino, checksum, infrared

[我用最佳的Ken Shirriff](http://www.arcfn.com/2009/08/multi-protocol-infrared-remote-library.html) Arduino Library解码了很长时间的 IR 代码。我稍微修改了代码，以便能够转储三星空调 (MH026FB) 56 位信号。

我的工作结果位于 Google Docs 文档*[Samsung MH026FB AirCon IR Codes Dump](https://docs.google.com/spreadsheet/ccc?key=0Aupzmp8AqC8JdGtNOXhUc0R0WC1hbVdRa0p3aDVxdFE#gid=0)*中。

它是一个包含所有转储值和结果解释的电子表格。AFAIK，空调单元根据命令发出两个或三个 56 位数据的“突发”。我能够正确解码位，找出空调温度、风扇、功能和其他选项的位置。

我遇到的问题与**校验和**有关。在所有这些 7 字节的代码中，**第二个**是从后面的 5 个字节以某种方式计算出来的，例如：

```
BF B2 0F FF FF FF F0   (lead-in code)
7F B8 8A 71 F6 4F F0   (auto mode - 25 degrees)
7F B2 80 71 7A 4F F0   (auto mode - 26 degrees)
7F B4 80 71 FA 7D F0   (heat mode - 26 degrees - fan auto) 
```

由于我在运行时重新创建了 IR 代码，因此我需要能够**计算这些代码的校验和**。

我尝试了许多标准校验和算法，但都没有给出有意义的结果。校验和似乎与其余代码中的零数（从 3 到 7 的字节）有关，但我真的不知道如何。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T08:35:26.433

Ken Shirriff 解决了这个问题。算法如下：

1.  **计算除 #2 之外的所有字节**中 1 的位数（校验和）****
***   计算**计数 mod 15**。如果值为 0，请改用 15。*   从 2 中取值，**翻转**4 位，并**反转**4 位。*   校验和是**Bn**，其中 n 是上一步的值。**

 **祝贺他的聪明和敏锐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T16:05:59.120

**`bytes/packets`**当 in和**0/1**的位顺序被正确解释时（从算法看来两者都是相反的），算法将是**`sum of 0 bits modulo 15`**.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T12:34:55.207

这几乎是正确的。数一下 0/1（你可以随意称呼它们，但它是短信号）。不要计算 2\. 字节和 3.byte 的第一个/最后一位（取决于您将其视为大印度还是小印度）。取结果和 -30（29-30 = 15，只看 4 位！）如果短信号 = 0，则反向结果校验和 = 0x4“反向结果”，如果长信号 = 0，则为 0xB“反向结果”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T17:11:24.283

我使用了 Ken 的方法，但 mod 15 对我不起作用。

计算除#2（校验和）以外的所有字节中 1 的位数 计算模数 17。如果值为 16，则使用模式结果的第一个字节（0）。取值，翻转 4 位。校验和为 0xn9，其中 n 是上一步的值。**

# sql - 从四个表中获取数据

> ID：11863923
> 
> 赞同：-1
> 
> 时间：2012-08-08T11:53:00.780
> 
> 标签：sql

如何从四个表中获取数据？

我有四张桌子：

*   **Article_Table** ( `ArticleName, ArticleNumber`)
*   **IndexDetails_Table** ( `IndexSubMasterId, ArticleNumber`)
*   **IndexSubMaster_Table** ( `IndexSubMasterId, IndexMasterId`)
*   **IndexMaster_Table** ( `IndexMasterId, Keyword`)

我需要最终输出：

```
ArticleName  from Article table. 
```

我将为您提供一个`Keyword`作为输入参数。

我需要的过程是：

1.  `IndexMasterId From IndexMaster_Table where Keyword = 'bl'`

2.  `IndexSubMasterId From IndexSubMaster_Table
    Where IndexSubMaster_Table.IndexMasterId = IndexMaster_Table.IndexMasterId`

3.  `ArticleNumber From IndexDetails_Table Where IndexDetails_Table.IndexSubMasterId = IndexSubMaster_Table.IndexSubMasterId`

4.  `ArticleName From Article_Table
    Where Article_Table.ArticleNumber = IndexDetails_Table.ArticleNumber`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:52:04.943

试试这个，我相信有更有效的方法，但这里有一些适合你的

```
Declare @keyword varchar(20)
Set @keyword = 'bl'

Select article.ArticleName FROM IndexMaster_Table masterTable
JOIN IndexSubMaster_Table subMaster
on masterTable.IndexMasterId = subMaster.IndexMasterId
JOIN IndexDetails_Table details
on details.IndexSubMasterId = subMaster.IndexSubMasterId
JOIN Article_Table article
on article.ArticleNumber = details.ArticleNumber
Where masterTable.keyword = @keyword 
```

# bittorrent - 如何在 rtorrent 或其他 linux 程序中下载特定文件/跳过文件？

> ID：11863933
> 
> 赞同：8
> 
> 时间：2012-08-08T11:53:26.770
> 
> 标签：bittorrent

我一直在努力寻找，但找不到答案......

是否有任何适用于 linux (centos) 的 torrent 程序，您可以在其中跳过 torrent 中的某些文件或下载特定文件？或者如果不是跳过某个大小以下或以上的文件？

我检查了 rtorrent 和 bittorrent，但似乎都没有这个功能。

这需要自动化，所以最好像这样：

./bittorrent --file='http://example.blah/filename.torrent' --skip'file1.jpg,file2.jpg' 或 ./bittorrent --file='http://example.blah/filename .torrent' --skip > 1MB

我很感激你的回答:)

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-05-11T09:05:45.507

**rtorrent**确实允许您从“文件列表”视图控制要从 torrent 下载的文件。从主视图中通过使用向上/向下箭头键选择特定的 torrent 使其被盯着，然后点击向右箭头以查看详细信息，然后向下箭头选择“文件列表”，然后是向右箭头以允许您导航文件列表。进入文件列表后，您可以使用箭头键向上/向下移动以选择相关文件。然后按空格键来切换文件是“高”（即高优先级）、“关闭”（即不下载）还是空白（即“正常”）的[“文件优先级”选项。](http://libtorrent.rakshasa.no/wiki/RTorrentUserGuide)'off' 设置允许您跳过有问题的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T16:23:03.667

进入文件列表视图后，您可以选择不想下载的文件（使用箭头键），然后将优先级切换（使用空格键）关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T21:48:05.263

为了实现适当的自动化，您可能希望使用一些 torrent 库在 python 或 ruby​​ 中编写脚本，但如果您所追求的文件选择通常更灵活，那么您可以尝试使用许多 torrent 客户端提供的 Web 界面。

举个例子，使用 Tixati 客户端和一个假设的 torrent，其中有数百个目录，每个目录都有一个您不想要的子目录（假设它称为“RUS”）。因此，从 Tixati 设置启用 Web 界面后，您将转到 localhost:8888，打开一个 javascript 控制台并编写如下内容：

```
var jq = document.createElement('script');
jq.src = "//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js";
document.getElementsByTagName('head')[0].appendChild(jq);

$('.xferstable tr:has(td)').each(function(i,td){
  var fname= $('td:eq(1)', td).text();
  $('input', td).prop('checked', fname.match(/\\RUS\\/) == null);
}) 
```

您可以直观地验证它是否选择了您想要的文件，然后单击应用，等等。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-08T11:55:42.403

您可以使用传输来执行此操作

# c# - 这是替换已安装软件的最佳方法

> ID：11863935
> 
> 赞同：0
> 
> 时间：2012-08-08T11:53:29.363
> 
> 标签：c#, visual-studio-2010

我已经在我的组织中安装了一个用 .net 开发的软件。现在我们需要做一些小改动。我已经完成了这些更改并制作了一个 .exe 文件。现在的问题是我如何用新软件替换已经安装的软件。我的应用程序将在不同的客户端机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:48:58.783

这是解决方案...

[http://raquila.com/software/configure-app-config-application-settings-during-msi-install/](http://raquila.com/software/configure-app-config-application-settings-during-msi-install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:58:49.123

您可以使用两种技术来制作安装软件的包装

windows 安装程序或单击此处比较 [http://msdn.microsoft.com/en-us/library/ms973805.aspx](http://msdn.microsoft.com/en-us/library/ms973805.aspx)

# java - 在后台运行线程并根据需要将数据传递给线程

> ID：11863936
> 
> 赞同：-3
> 
> 时间：2012-08-08T11:53:29.387
> 
> 标签：java, multithreading, servlets

我需要在 java 的后台运行一个线程，并且可能需要在线程开始执行其实际功能之前将一些信息传递给线程。

如何实施？

其次，是否可以启动一个执行进一​​步操作并退出请求上下文的线程。请注意，我必须在 Web 应用程序中实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:56:33.947

回答您的第一个问题的示例：

```
class NewThread extends Thread
{
    public String someInformation;

    @Override
    public void run()
    {
        System.out.println(someInformation);
    }
}

public class YourClass
{
    public void startANewThread()
    {
        NewThread newThread = new NewThread();
        newThread.someInformation = "hello";
        newThread.start();
    }
} 
```

至于您的第二个问题：此代码应该在 Web 应用程序中运行，但是您必须非常小心以确保这些后台线程将在某个时候完成，否则这将是一个不错的小内存泄漏。

请注意，如果要在两个线程都运行时共享信息，则需要同步信息访问。

[根据后台线程所做的事情，使用像Quartz](http://www.quartz-scheduler.org/)这样的框架可能是有意义的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:01:11.210

> 是否可以启动一个执行进一​​步操作并退出请求上下文的线程。请注意，我必须在 Web 应用程序中实现。

您可以使用 ExecutorService 将任意数量的任务传递给并在完成后关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T10:21:41.000

试试这段代码，有两个线程，一个线程将在后台运行，另一个线程将开始执行任务。在这里，您也可以设置返回类型，这与 thread.run() 方法不同。

```
FutureTask<Response> future = new FutureTask<>(newCallable<Response>() {
    public yourreturntype call() {
        doSomething(Thread1);
    }
});

ExecutorService executor = Executors.newSingleThreadExecutor();
executor.execute(future); 
doSomethingelse(Thread2)
//This thread doesnot wait for thread1 to complete 
```

# google-visualization - 带有坐标的谷歌地理图表？

> ID：11863940
> 
> 赞同：7
> 
> 时间：2012-08-08T11:53:42.617
> 
> 标签：google-visualization

我想使用带有坐标的谷歌地理图表（longtitute，latitute）。但我找不到关于这个话题的任何例子。有很多地区和城市的例子。但是我找不到坐标。

请，代码示例，链接，教程还有什么？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T09:54:04.263

您可以在此处查看示例：

```
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawVisualization);

  function drawVisualization() {var data = new google.visualization.DataTable();

 data.addColumn('number', 'Lat');                                
 data.addColumn('number', 'Long');
 data.addColumn('number', 'Value'); 
 data.addColumn({type:'string', role:'tooltip'});                        

data.addRows([[41.151636,-8.569336,0,'tooltip']]);
data.addRows([[ 39.059575,-98.789062,0,'tooltip']]);

 var options = {
 colorAxis:  {minValue: 0, maxValue: 0,  colors: ['#6699CC']},
 legend: 'none',    
 backgroundColor: {fill:'transparent',stroke:'#FFF' ,strokeWidth:0 },    
 datalessRegionColor: '#f5f5f5',
 displayMode: 'markers', 
 enableRegionInteractivity: 'true', 
 resolution: 'countries',
 sizeAxis: {minValue: 1, maxValue:1,minSize:5,  maxSize: 5},
 region:'world',
 keepAspectRatio: true,
 width:400,
 height:300,
 tooltip: {textStyle: {color: '#444444'}}    
 };
  var chart = new   google.visualization.GeoChart(document.getElementById('visualization')); 

 chart.draw(data, options);

 } 
```

```
<script src="https://www.google.com/jsapi?fake=.js"></script>
<div id="visualization"></div>
```

有很多方法可以做到，这只是其中一种。

```
data.addColumn('number', 'Lat');                                
data.addColumn('number', 'Long');
data.addColumn('number', 'Value');
data.addColumn({type:'string', role:'tooltip'});                        

data.addRows([[41.151636,-8.569336,0,'tooltip']]);
data.addRows([[ 39.059575,-98.789062,0,'tooltip']]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T06:58:40.983

如[文档](https://developers.google.com/chart/interactive/docs/gallery/geochart)中所述：

> 标记位置 [必需] 第一列是特定的字符串地址（例如，“1600 Pennsylvania Ave”）。OR 前两列是数字，其中第一列是纬度，第二列是经度。

您需要将数据集的前两列定义为表示纬度和经度的数值。

# javascript - ASPX 不访问 Javascript.js

> ID：11863941
> 
> 赞同：0
> 
> 时间：2012-08-08T11:53:46.987
> 
> 标签：javascript, asp.net

第一次做一些javascript。我正在玩 sessiontimeout，当我在 .aspx 页面中有代码时，它运行良好。下一步是将代码放入 .js 页面。所以这是我目前的阵容。

**脚本.aspx.js**

```
 var iddleTimeoutWarning = null;
    var iddleTimeout = null;
function pageLoad() 
{     
    if (iddleTimeoutWarning != null)
        clearTimeout(iddleTimeoutWarning);
    if (iddleTimeout != null)
        clearTimeout(iddleTimeout);    
    var millisecTimeOutWarning = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeoutWarning"]) * 60 * 1000 %>;
    var millisecTimeOut = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeout"]) * 60 * 1000 %>; 
    iddleTimeoutWarning = setTimeout("DisplayIddleWarning()", millisecTimeOutWarning);
    iddleTimeout = setTimeout("TimeoutPage()", millisecTimeOut);
} 

function DisplayIddleWarning() 
{                
    document.getElementById("LblWarning").innerHTML = "Warning Message";
} 

function TimeoutPage() 
{                   
    __doPostBack('FiresAutoIdle','');
} 
```

ASPX 页面（很确定错误在这里，因为 .js 页面中的代码有效）

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
        <Scripts>            
            <asp:ScriptReference Path="Scripts/Script.aspx.js"/>
        </Scripts>
</asp:ScriptManager> 
```

我在 web.config 中也有一些代码行来设置键 SessionTimeout 和 SessionTimeoutWarning。

那么，关于故障在哪里的任何想法？事情过去运行，现在他们不会。

**编辑**

1.  我正在使用脚本管理器来快速处理必要的 ASP.NET AJAX 组件以启用部分回发。我需要__doPostBack。
2.  我发现如果一个js函数被命名为pageLoad()，该函数将在页面加载或部分回发时激活。正是我需要的。

因此，asp.nex 页面没有从 .js 加载 pageLoad() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:28:07.020

解决了。

您不能在 javascript 中设置 asp 变量。所以我们必须在 ASPX 页面中设置变量，然后让 javascript 使用它们。

ASPX

```
<script type="text/javascript">
    var millisecTimeOutWarning = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeoutWarning"]) * 60 * 1000 %>;
    var millisecTimeOut = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeout"]) * 60 * 1000 %>; 
</script> 
```

然后在 .js 文件中使用它们。

# asp.net-mvc - Linq to Sql 和 T-SQL 性能差异

> ID：11863942
> 
> 赞同：1
> 
> 时间：2012-08-08T11:53:46.983
> 
> 标签：asp.net-mvc, performance, linq-to-sql

我有一个 MVC 网站，它提供了来自 SQL Server 数据库的数据记录的分页列表。UI 允许用户根据许多不同的标准过滤返回的数据，例如电子邮件地址。这是一段代码：

```
Stopwatch stopwatch = new Stopwatch();

var temp = SubscriberDB
   .GetSubscribers(model.Filter, model.PagingInfo);

// Inspect SQL expression here

stopwatch.Start();
model.Subscribers = temp.ToList();
stopwatch.Stop();     // 9 seconds plus compared to < 1 second in Query Analyzer 
```

运行此代码时，秒表显示大约 9 秒的执行时间。如果我捕获生成的 SQL 表达式（就在使用 .ToList() 方法对其进行评估之前）并将其作为查询剪切到 SQL Server Management Studio 中，则执行时间将降至不到 1 秒。此处参考生成的 SQL 表达式：

```
SELECT [t2].[SubscriberId], [t2].[Email], [t3].[Reference] AS [DataSet], [t4].[Reference] AS [DataSource], [t2].[Created]
FROM (
    SELECT [t1].[SubscriberId], [t1].[SubscriberDataSetId], [t1].[SubscriberDataSourceId], [t1].[Email], [t1].[Created], [t1].[ROW_NUMBER]
    FROM (
        SELECT ROW_NUMBER() OVER (ORDER BY [t0].[Email], [t0].[SubscriberDataSetId]) AS [ROW_NUMBER], [t0].[SubscriberId], [t0].[SubscriberDataSetId], [t0].[SubscriberDataSourceId], [t0].[Email], [t0].[Created]
        FROM [dbo].[inbox_Subscriber] AS [t0]
        WHERE [t0].[Email] LIKE '%_EMAIL_ADDRESS_%'
        ) AS [t1]
    WHERE [t1].[ROW_NUMBER] BETWEEN 0 + 1 AND 0 + 20
    ) AS [t2]
INNER JOIN [dbo].[inbox_SubscriberDataSet] AS [t3] ON [t3].[SubscriberDataSetId] = [t2].[SubscriberDataSetId]
INNER JOIN [dbo].[inbox_SubscriberDataSource] AS [t4] ON [t4].[SubscriberDataSourceId] = [t2].[SubscriberDataSourceId]
ORDER BY [t2].[ROW_NUMBER] 
```

如果我删除了电子邮件过滤器子句，那么控制器的 StopWatch 会向 SQL Management Studio 查询返回类似的响应时间，不到 1 秒 - 所以我假设 SQL 管道的基本接口工作正常并且问题出在Linq 表达式的评估。我还应该提到，这是一个相当大的数据库，订阅者表中有超过 1M 行。

任何人都可以解释为什么会有如此高的（x10）性能差异以及什么，如果可以采取任何措施来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:21:25.047

好吧，不确定。完整的 1M 行可能需要安静的时间。电子邮件是否已编入索引？您可以使用 Email% 而不是 %Email% 运行查询，看看会发生什么？

# java - SLF4J 绑定问题

> ID：11863955
> 
> 赞同：2
> 
> 时间：2012-08-08T11:54:27.927
> 
> 标签：java, logging, slf4j

```
1\. SLF4J: slf4j-api 1.6.x (or later) is incompatible with this binding.    
2\. SLF4J: Your binding is version 1.5.5 or earlier.    
3\. SLF4J: Upgrade your binding to version 1.6.x. or 2.0.x    
4\. Aug 8, 2012 3:56:54 PM org.apache.catalina.core.StandardContext listenerStart    
SEVERE: Exception sending context initialized event to listener instance of class   org.springframework.web.util.Log4jConfigListener    
5\. java.lang.NoSuchMethodError: org.slf4j.impl.StaticLoggerBinder.getSingleton()Lorg/slf4j/impl/StaticLoggerBinder;    
6\. at org.slf4j.LoggerFactory.bind(LoggerFactory.java:121)    
7\. at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:111)    
8\. at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)    
9\. at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)    
10\. at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:155)    
11\. at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:131)    
12\. at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)    
at org.springframework.util.PropertyPlaceholderHelper.<clinit>  (PropertyPlaceholderHelper.java:40)    
13\. at org.springframework.util.SystemPropertyUtils.<clinit>(SystemPropertyUtils.java:49)    

    Dependency are     
13\. [WARNING] The POM for org:jfreechart:jar:1.0.14 is missing, no dependency inform ation available    
13\.   [WARNING] The POM for org:JFreeCharts:jar:1.0 is missing, no dependency information available    
13\.   [WARNING] The POM for org.cpr:cpr:jar:1.0 is missing, no dependency information available    
13\.   [WARNING] The artifact axis:axis-jaxrpc:jar:1.4 has been relocated to org.apache.axis:axis-jaxrpc:jar:1.4    
13\.   [INFO]    
13\.   [INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ JiraWeb ---    
13\.   [WARNING] Missing POM for org.jiraAPI:soap:jar:4.4.5    
13\.   [WARNING] Missing POM for org.jiraAPI:soapDEV:jar:4.4.5    
13\.   [WARNING] Missing POM for org:jfreechart:jar:1.0.14    
13\.   [WARNING] Missing POM for org:JFreeCharts:jar:1.0    
13\.   [WARNING] While downloading axis:axis-jaxrpc:1.4    
13\.   This artifact has been relocated to org.apache.axis:axis-jaxrpc:1.4\.    
13\.   [WARNING] Missing POM for org.cpr:cpr:jar:1.0    
13\.   [INFO] com.jpmc.gti.jira:JiraWeb:war:1.0.1-SNAPSHOT    
13\.   [INFO] +- org.springframework:spring-context:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  +- org.springframework:spring-beans:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  +- org.springframework:spring-core:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  +- org.springframework:spring-expression:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  \- org.springframework:spring-asm:jar:3.0.5.RELEASE:compile    
13\.   [INFO] +- org.springframework:spring-context-support:jar:3.0.5.RELEASE:compile    
13\.   [INFO] +- org.springframework:spring-jdbc:jar:3.0.5.RELEASE:compile    
13\.   [INFO] +- org.springframework:spring-web:jar:3.0.5.RELEASE:compile    
13\.   [INFO] |  \- aopalliance:aopalliance:jar:1.0:compile    
13\.   [INFO] +- org.springframework:spring-webmvc:jar:3.0.5.RELEASE:compile    
13\.   [INFO] +- org.springframework:spring-tx:jar:3.0.5.RELEASE:compile    
13\.   [INFO] +- javax.servlet:servlet-api:jar:2.5:provided    
13\.   [INFO] +- org.directwebremoting:dwr:jar:3.0rc1:compile    
13\.   [INFO] |  \- org.mortbay.jetty:cometd:jar:6.1.4:compile    
13\.   [INFO] |     \- org.mortbay.jetty:jetty-util:jar:6.1.4:compile    
13\.   [INFO] +- org.jiraAPI:soap:jar:4.4.5:compile    
13\.   [INFO] +- org.jiraAPI:soapDEV:jar:4.4.5:compile    
13\.   [INFO] +- commons-logging:commons-logging:jar:1.1.1:compile    
13\.   [INFO] +- commons-lang:commons-lang:jar:2.4:compile    
13\.   [INFO] +- commons-pool:commons-pool:jar:1.4:compile    
13\.   [INFO] +- commons-collections:commons-collections:jar:3.2:compile    
13\.   [INFO] +- commons-dbcp:commons-dbcp:jar:1.2.2:compile    
13\.   [INFO] +- commons-discovery:commons-discovery:jar:0.4:compile    
13\.   [INFO] +- commons-net:commons-net:jar:1.4.1:compile    
13\.   [INFO] |  \- oro:oro:jar:2.0.8:compile    
13\.   [INFO] +- commons-io:commons-io:jar:1.4:compile    
13\.   [INFO] +- commons-fileupload:commons-fileupload:jar:1.2:compile    
13\.   [INFO] +- log4j:log4j:jar:1.2.14:compile    
13\.   [INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile    
13\.   [INFO] |  \- org.slf4j:slf4j-api:jar:1.6.1:compile    
13\.   [INFO] +- junit:junit:jar:4.8.2:compile    
13\.   [INFO] +- oracle:oracle:jar:11.1.0.6:compile    
13\.   [INFO] +- javax.servlet:jstl:jar:1.1.2:runtime    
13\.   [INFO] +- taglibs:standard:jar:1.1.2:compile    
13\.   [INFO] +- org.apache.tiles:tiles-jsp:jar:2.2.2:compile    
13\.   [INFO] |  +- org.apache.tiles:tiles-servlet:jar:2.2.2:compile    
13\.   [INFO] |  \- org.apache.tiles:tiles-template:jar:2.2.2:compile    
13\.   [INFO] +- org.apache.tiles:tiles-core:jar:2.2.2:compile    
13\.   [INFO] |  +- commons-digester:commons-digester:jar:2.0:compile    
13\.   [INFO] |  \- org.slf4j:jcl-over-slf4j:jar:1.5.8:compile    
13\.   [INFO] +- org.apache.tiles:tiles-api:jar:2.2.2:compile    
13\.   [INFO] +- org.apache.poi:poi:jar:3.7:compile    
13\.   [INFO] +- org.apache.poi:poi-ooxml:jar:3.7:compile    
13\.   [INFO] |  +- org.apache.poi:poi-ooxml-schemas:jar:3.7:compile    
13\.   [INFO] |  |  +- org.apache.xmlbeans:xmlbeans:jar:2.3.0:compile    
13\.   [INFO] |  |  |  \- stax:stax-api:jar:1.0.1:compile    
13\.   [INFO] |  |  \- org.apache.geronimo.specs:geronimo-stax-api_1.0_spec:jar:1.0:compile    
13\.   [INFO] |  \- dom4j:dom4j:jar:1.6.1:compile    
13\.   [INFO] |     \- xml-apis:xml-apis:jar:1.0.b2:compile    
13\.   [INFO] +- org.springframework:spring-test:jar:3.0.5.RELEASE:test    
13\.   [INFO] +- org.easymock:easymock:jar:2.5.2:test    
13\.   [INFO] +- org.easymock:easymockclassextension:jar:2.5.2:test    
13\.   [INFO] |  +- cglib:cglib-nodep:jar:2.2:test    
13\.   [INFO] |  \- org.objenesis:objenesis:jar:1.2:test    
13\.   [INFO] +- net.sf.ezmorph:ezmorph:jar:0.8.1:compile    
13\.   [INFO] +- jfree:jcommon:jar:1.0.9:compile    
13\.   [INFO] +- org:jfreechart:jar:1.0.14:compile    
13\.   [INFO] +- org:JFreeCharts:jar:1.0:compile    
13\.   [INFO] +- axis:axis:jar:1.4:compile    
13\.   [INFO] |  +- org.apache.axis:axis-saaj:jar:1.4:compile    
13\.   [INFO] |  \- axis:axis-wsdl4j:jar:1.5.1:runtime    
13\.   [INFO] +- org.apache.axis:axis-jaxrpc:jar:1.4:compile    
13\.   [INFO] +- org.cpr:cpr:jar:1.0:compile    
13\.   [INFO] +- com.sun.jersey:jersey-core:jar:1.12:compile    
13\.   [INFO] +- com.sun.jersey:jersey-client:jar:1.12:compile    
13\.   [INFO] +- net.sf.json-lib:json-lib:jar:jdk15:2.3:compile    
13\.   [INFO] |  \- commons-beanutils:commons-beanutils:jar:1.8.0:compile    
13\.   [INFO] +- org.quartz-scheduler:quartz:jar:2.1.5:compile    
13\.   [INFO] |  \- c3p0:c3p0:jar:0.9.1.1:compile    
13\.   [INFO] \- javax.mail:mail:jar:1.4:compile    
13\.   [INFO]    \- javax.activation:activation:jar:1.1:compile    
14\. Anyone has faced this issue.. any pointer will be really helpful. Thanks. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T23:30:20.480

> “org.slf4j:jcl-over-slf4j:jar:1.5.8:compile”

那一个需要升级到1.6.6。

它提供了分发到 SLF4J 的 Commons Logging 的实现。（因此，您可能还应该排除其他公共日志记录 jar）。

# asp.net - 循环时无法访问 ListView 中的子项

> ID：11863956
> 
> 赞同：0
> 
> 时间：2012-08-08T11:54:30.750
> 
> 标签：asp.net, listview, listviewitem, subitem

我正在尝试使用 foreach 语句遍历 ListView，但我似乎无法获取项目的子项。For 语句也没有成功。IntelliSense 不会在这两种方式上都建议它。

代码背后：

```
protected void btnNext_Click(object sender, EventArgs e)
{
    foreach (ListViewItem item in ListView1.Items)
    {
       item. *(here a should get the Subitems)*

    }
} 
```

ASPX

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="ObjectDataSource1">
    <LayoutTemplate>
      <table>
        <tr>
            <th>Customer</th>
            <th>Item No</th>
        </tr>
         <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
      </table>   
    </LayoutTemplate>
    <ItemTemplate>    
            <tr>     
                <td>
                    <%# Eval("CustomerName") %>
                </td>
                <td>
                    <%# Eval("Item") %>
                </td>
            </tr> 
    </ItemTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:05:51.140

你应该使用循环 listview.items

```
for (int j = 0; j < this.listView1.Items.Count; j++) 
            { 
                ListViewItem item = 
                    (ListViewItem)this.listView1.ItemContainerGenerator.ContainerFromIndex(j); 

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:11:20.113

[在 DataBound 事件上获取绑定到 ListView 的数据](https://stackoverflow.com/questions/858001/get-data-being-bound-to-listview-on-databound-event)

您可以像在 listView1_ItemDataBound 事件中处理代码一样对待循环内的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:29:41.860

你必须改变你的aspx页面如下

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="ObjectDataSource1">
<LayoutTemplate>
  <table>
    <tr>
        <th>Customer</th>
        <th>Item No</th>
    </tr>
     <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
  </table>   
</LayoutTemplate>
<ItemTemplate>    
        <tr>     
            <td>
             <asp:Label ID="lblCustomerName" Text='<%# Eval("CustomerName") %>'  runat="server"></asp:Label> 
            </td>
            <td>                    
             <asp:Label ID="lblItem" Text='<%# Eval("Item") %>' runat="server"></asp:Label> 
            </td>
        </tr> 
</ItemTemplate>
</asp:ListView> 
```

现在您必须在文件后面的代码中使用每个循环，如下所示

```
string strProductNames = string.Empty;
foreach (ListViewItem item in ListView1.Items)
    {
        Label lblCustomerName= (Label)item.FindControl("lblCustomerName");

       // strProductNames = strProductNames + lblCustomerName.Text + "<br/>";
       // you can get values in lblCustomerName.Text. use this value as per your   requirement
    } 
```

希望这会帮助你..快乐的编码

# c# - 在 C# 中以粗体显示未读消息并以普通字体显示已读消息的列表视图

> ID：11863957
> 
> 赞同：0
> 
> 时间：2012-08-08T11:54:31.293
> 
> 标签：c#, winforms, listview, modem, bold

我有用于显示来自 GSM 调制解调器的 SMS 的列表视图。我正在读取端口以获取消息，解析它们然后显示它们。我阅读消息时得到的格式是：

```
+CMGL: 5,"REC READ","IA-612345","","2012/08/04 11:54:00+22"
Some text message 
```

我用来解析的代码：

```
public ShortMessageCollection ParseMessages(string input)
{
    ShortMessageCollection messages = new ShortMessageCollection();
    Regex r = new Regex(@"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n(.+)\r\n");
    Match m = r.Match(input);
    while (m.Success)
    {
        ShortMessage msg = new ShortMessage();
        msg.Index = m.Groups[1].Value;
        msg.Status = m.Groups[2].Value;
        msg.Sender = m.Groups[3].Value;
        msg.Alphabet = m.Groups[4].Value;
        msg.Sent = m.Groups[5].Value;
        msg.Message = m.Groups[6].Value;
        messages.Add(msg);
        m = m.NextMatch();
    }
}
return messages; 
```

我用来将消息添加到列表视图的循环：

```
foreach (ShortMessage msg in objShortMessageCollection)
{
    ListViewItem item = new ListViewItem(new string[] { msg.Sender, msg.Message, msg.Sent, msg.Index });
    item.Tag = msg;
    lvwMessages.Items.Insert(0, item);
} 
```

现在我的要求是当我将消息添加到列表视图时，未读的消息（REC UNREAD）应该以**粗体**显示，而已读的消息应该以普通字体显示。这可能吗？请告诉我程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:56:48.877

```
if (condition)
{
    item.Font = New Font(item.Font, FontStyle.Bold);
} 
```

# java - 你如何命名你的版本？

> ID：11863958
> 
> 赞同：2
> 
> 时间：2012-08-08T11:54:30.727
> 
> 标签：java, svn, architecture, release

我正在尝试为我的产品设定标准和流程。我计划使用 Subversion 和标记版本。但是，我不确定我应该如何命名我的版本。

例如，MyProduct-1.0-TESTING.jar？MyProduct-1.0.-QA.jar ？当它进入集成、QA 和 Prod 等不同环境时会是什么？你如何用你的软件做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:03:22.317

我使用[Maven Release Plugin](https://maven.apache.org/plugins/maven-release-plugin/)的名称模式：

```
tags/projectname-version 
```

**编辑：**

我是怎么做的：

1.  开发新功能
2.  构建为`foo-version-SNAPSHOT.jar`
3.  使用最新的快照对此进行测试
4.  如果新功能已准备好进行质量检查，请使用`mvn release:prepare`并`mvn release:release`：
    1.  创建`foo-version.jar`并将其部署到我们的 Maven 存储库
    2.  将版本`pom.xml`提高到下一个更高的值：`1.0.1`becomdes`1.0.2-SNAPSHOT`
    3.  创建一个 SVN 标签`tags/foo-version`
5.  告诉 QA 和发布经理`foo-version.jar`准备好进行测试并且可以从 Maven 存储库中获取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:57:54.583

我总是使用本地（我的机器）开发， - 开发 UAT - 用户接受测试和产品。

我可以在发布之间进行本地 ias 的原因，我可以在本地进行测试并修复它们，然后将其放在开发环境中并确保一切正常，然后再转移到 UAT 以进行适当的测试。

# php - 通过 PHP 文件进行 git pull 时未使用 git config

> ID：11863961
> 
> 赞同：1
> 
> 时间：2012-08-08T11:54:35.640
> 
> 标签：php, git

我正在尝试`git pull`从 PHP 文件中提取，但似乎没有使用该配置。

`git config --global user.name`并`git config --global user.email`设置和 git pull 从命令行工作。

现在，当我尝试执行此脚本时：

```
<?php

header('Content-type: text/plain');
system('git pull 2>&1');
echo "\nCompleted!"; 
```

我得到以下输出：

> ***请告诉我你是谁。
> 
> 跑
> 
> git config --global user.email "you@example.com" git config --global user.name "你的名字"
> 
> 设置您帐户的默认身份。省略 --global 以仅在此存储库中设置身份。
> 
> 致命：不允许空标识
> 
> 完全的！

是否可能是因为`git config`用户特定而 PHP 是从另一个用户运行的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:56:22.857

只需`-c`在 git 本身上使用标志：

```
-c <name>=<value>
Pass a configuration parameter to the command. The value given will override values from configuration files. The <name> is expected in the same format
as listed by git config (subkeys separated by dots). 
```

所以像：

```
git -c user.name=apache pull 
```

应该带你到那里。添加您需要的任何参数。如果你想指定一个特定的文件，那么要么向执行脚本的用户添加相关的配置选项，要么先导[出一个不同的环境`HOME`变量来绕过它。](https://unix.stackexchange.com/a/44904/21189)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:57:46.240

即使您没有登录，您也希望您的网络服务器能够正常工作，不是吗？这意味着它由您以外的其他用户运行（除非您另外指定）。除非您通过 CLI 运行脚本，否则脚本将由 apache、www-data 或您配置的任何用户运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:12:28.533

我设法让它工作，但这不是一个理想的解决方案。我需要找到一种方法来`git config`为 apache 用户设置一次，而不是每次。我在共享主机上，所以我不知道这是否真的可能。

```
<?php

header('Content-type: text/plain');
system('git config user.name "Server"');
system('git config user.email "deploy@server.com"');
system('git pull 2>&1');
echo "\nCompleted!"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T23:07:34.200

这有点杂乱无章，但您也可以设置系统 git config：

```
git config --system user.name <user>
git config --system user.email <user>@<domain> 
```

这具有作为服务器所有用户的默认配置的相当不幸的副作用，因此它确实不是很好。

# android - 覆盖片段中的后退按钮

> ID：11863965
> 
> 赞同：-1
> 
> 时间：2012-08-08T11:54:54.730
> 
> 标签：android, overriding, fragment, back-button, tabactivity

我必须从 TabActivity 的 5 个片段中修改几个布局的后退按钮命令。我为主要活动尝试了这段代码：

```
@Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
                    if(mTabHost.getCurrentTab() == 0){
                 backpag=0;
            }
        if (mTabHost.getCurrentTab() == 1) {
            backpag=1;
        }
        if (mTabHost.getCurrentTab() == 2) {
            backpag=2;
        }
        if (mTabHost.getCurrentTab() == 3) {
            backpag=3;
        }
        if (mTabHost.getCurrentTab() == 4) {
            backpag=4;
        }
        if (mTabHost.getCurrentTab() == 5) {
            backpag=5;
        }
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity, newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }

    }
}

  @Override
public void onBackPressed() {

    System.out.println("mtabhost" + mTabHost.getCurrentTab());
    if (backpag == 1) {
        VinocardFragment.onBackPressed();
    } else if (backpag == 2) {
        StandorteFragment.getInstance().onBackPressedStandorte();
    } else if (backpag == 3) {
        // StandorteFragment.onBackPressed();
    } else if (backpag == 4) {
        // StandorteFragment.onBackPressed();
    } else if (backpag == 5) {
        SonstigesFragment.onBackPressed();
    } else if (backpag == 0) {
        System.out.println("inainte d getinstance");
        LoggedFragment.getInstance().onBackPressedLogged();
        backpag=-1;
        System.out.println("mtabhost" + backpag);
    } else if(backpag==-1) {
        System.out.println("mtabhost" + backpag);
        finish();
    }
} 
```

但是当我到达第一个选项卡（backpag = 0）时，我按下后退按钮并开始一个循环，就像我只需按下后退按钮一样，它会转到第一个选项卡和它之前的选项卡。在我的逻辑中，我按下后退按钮形成它应该退出的第一个选项卡（完成（））。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:23:51.067

用这个管理：

```
public void onBackPressed() {

        // super.onBackPressed();

        Log.d("debug", "tab back pressed :: " + backpag);
        if (backpag == 0) {
            SharedPreferences settings = getSharedPreferences("PrefFile", 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putBoolean("backfromtab", true);
            editor.commit();
            Intent back2main = new Intent(this, WeinCoMainActivity.class);
            startActivity(back2main);
        } else if (backpag == 1) {
            VinocardFragment.getInstance().onBackPressedVinocard();
        } else if (backpag == 2) {
            StandorteFragment.getInstance().onBackPressedStandorte();
        } else if (backpag == 3) {
            // webshop
        } else if (backpag == 4) {
            // scanner
        } else if (backpag == 5) {
            SonstigesFragment.getInstance().onBackPressedSonstiges();
        }
    } 
```

# c# - Google Api 获取令牌请求返回 invalid_request

> ID：11863966
> 
> 赞同：2
> 
> 时间：2012-08-08T11:54:56.190
> 
> 标签：c#, oauth-2.0, google-authentication

我正在尝试使用 c# 获取 Google APi 的 access_token，但总是收到错误消息 invalid_request。有我的代码：

```
var Params = new Dictionary<string, string>();
Params["client_id"] = GoogleApplicationAPI.CLIENT_ID;
Params["client_secret"] = GoogleApplicationAPI.CLIENT_SECRET;
Params["code"] = "4/08Z_Us0a_blkMlXihlixR1579TYu.smV5ucbI8U4VOl05ti8ZT3ZD4CgMcgI";
Params["redirect_uri"] = GoogleApplicationAPI.RETURN_URL;
Params["grant_type"] = "authorization_code";

var RequestData = "";
foreach (var Item in Params)
{
    RequestData += Item.Key + "=" + HttpUtility.UrlEncode(Item.Value) + "&";
}

string Url = "https://accounts.google.com/o/oauth2/token";

var request = (HttpWebRequest) WebRequest.Create(Url);
request.Method = HttpMethod.Post.ToString();
request.ContentType = "application/x-www-form-urlencoded";

var SendData = Encoding.UTF8.GetBytes(RequestData);
try
{
    request.ContentLength = SendData.Length;
    Stream OutputStream = request.GetRequestStream();
    OutputStream.Write(SendData, 0, SendData.Length);
} catch {}

try
{
    using (var response = (HttpWebResponse) request.GetResponse())
    {
        var stream = response.GetResponseStream();
        var sr = new StreamReader(stream);
        string JSON = sr.ReadToEnd();
    }
} catch {} 
```

我使用[https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:02:42.153

尝试删除对`HttpUtility.UrlEncode`请求数据中每个项目的调用。您不需要这样做，因为数据不会进入它正在发布的 url。毫无疑问，这会稀释正在发送的信息，从而导致您的`Invalid Request`回复。

# java - 提取 zip 文件时的百分比计算超过 100%！

> ID：11863970
> 
> 赞同：1
> 
> 时间：2012-08-08T11:55:10.907
> 
> 标签：java, zip, progress

我正在提取一个 zip 文件，问题是百分比计算超过 100%，几乎达到 111%。这是代码：

```
 boolean UNZipFiles() {
    byte[] buffer = new byte[4096];
    int length;
    float prev = -1; // to check if the percent changed and its worth updating the UI
    int finalSize = 0;
    float current = 0;

    String zipFile = PATH + FileName;

    FileInputStream fin = new FileInputStream(zipFile);
    ZipInputStream zin = new ZipInputStream(fin);

    finalSize = (int) new File(zipFile).length();

    ZipEntry ze = null;

    while ((ze = zin.getNextEntry()) != null) {

        current += ze.getSize();

        if (ze.isDirectory())
            dirChecker(ze.getName());
        else {
            FileOutputStream fout = new FileOutputStream(PATH + ze.getName());
            while ((length = zin.read(buffer)) > 0)
                fout.write(buffer, 0, length);

            if (prev != current / finalSize * 100) {
                prev = current / finalSize * 100;
                UpdatePercentNotificationBar((int) prev);
            }
            zin.closeEntry();
            fout.close();
        }

    }

    zin.close();

    return true;
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:57:59.203

`finalSize = (int) new File(zipFile).length();`是压缩文件的大小，而`ze.getSize();`返回未压缩数据的大小。

所以你最终的 % 将是：（未压缩数据的大小）/（zip 文件的大小）

你可能会得到更好的结果`ze.getCompressedSize()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:01:54.393

您必须在读取 zip 文件时计算字节数才能计算百分比...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T11:58:08.733

```
finalSize = (int) new File(zipFile).length(); 
```

这不会为您提供扩展 zip 文件的大小，而是为您提供 zip 文件本身的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T12:02:13.293

返回该条`ZipEntry.getSize()`目的未压缩大小。试试`ZipEntry.getCompressedSize()`。

# sql-server-2008-r2 - Biztalk 不跟踪发送/接收端口

> ID：11863980
> 
> 赞同：4
> 
> 时间：2012-08-08T11:55:42.560
> 
> 标签：sql-server-2008-r2, biztalk, windows-server-2008-r2, biztalk-2010

即使我勾选所有跟踪框，我创建的任何新发送或接收端口似乎都不会显示任何跟踪。我有一个现有的应用程序，并且接收端口和编排跟踪工作，但发送端口跟踪没有。

在同一台机器上，我还尝试创建一个新应用程序。创建了一个发送和接收端口，根本没有跟踪。我在另一台机器上全新安装 biztalk 时做了同样的事情，我得到了跟踪，所以我没有发疯。

我试过了 ...

*   在跟踪接收、管弦乐和发送端口的每个方框中打勾。
*   创建一个专门用于跟踪的新主机
*   使用不同的名称重新创建原始主机
*   sql服务正在运行
*   重启系统
*   重启主机实例
*   重启 biztalk 服务
*   事件日志中没有显示
*   除了抱怨 7 个孤立 dta 的 'monitor biztalk' 之外，所有 sql 作业都可以。
*   除了上述孤立的 dta 之外，看不到任何特别从 mbv 中脱颖而出的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:07:48.507

除了迈克的回答：

1.  您需要确保至少有一台主机启用了跟踪功能。在 BizTalk Administrator 中，在平台设置、主机下，选择主机，然后启用跟踪（主机列表还显示哪些主机当前启用了跟踪）。
2.  您还可以通过直接查看数据库来验证跟踪 SQL 代理作业是否正在运行

    `select count(*) from BizTalkMsgBoxDb.dbo.Spool (NOLOCK)`

    `select count(*) from BizTalkDTADb.dbo.Tracking_Parts1 (NOLOCK)`

基本上，假脱机应该是一个相当低的数字（< 10 000），并且应该在消息高峰后恢复到静态水平，除非您的挂起的 orch 正在增长。并且新消息应该每分钟从 MessageBox 复制到 DtaDb.TrackingParts，因此 Tracking_Parts1 应该在处理新消息后每 60-120 秒增加几条记录，尽管它们最终会根据您的跟踪归档/清除而被清除/归档战略。

在开发环境中，跟踪越多越好，因为 HAT（编排调试器）会为您提供更多信息，您跟踪的越多。但是，在 PROD 环境中，您通常希望最小化跟踪以提高性能并减少磁盘开销。我们只跟踪一份副本，即在接收端口上的“处理前”和发送给我们合作伙伴的端口上的“处理后”，而在内部端口和 Orchs 上根本没有任何内容。这使我们能够提供接收和发送数据的充分证据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T17:13:37.623

这篇文章可能对某些人有所帮助：[http ://learningcenter2.eworldtree.net:7090/Lists/Posts/Post.aspx?ID=78](http://learningcenter2.eworldtree.net:7090/Lists/Posts/Post.aspx?ID=78)

要使消息跟踪正常工作，除其他因素外，请确保启用相应管道中的“消息发送和接收事件”复选框。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T12:02:36.797

请看这两篇文章，[什么是邮件跟踪？](http://technet.microsoft.com/en-us/library/aa560149.aspx)并[深入了解 BizTalk Server 消息跟踪](http://connectedthoughts.wordpress.com/2009/11/20/insight-into-biztalk-server-message-tracking/)。第一篇文章有​​一个您感兴趣的项目，我将在下面引用它，第二篇文章应该只是巩固您正在尝试做的事情。

> SQL Server 代理服务必须在所有 MessageBox 数据库上运行。TrackedMessages_Copy_ 作业使邮件正文可用于跟踪查询和 WMI。为了有效地复制邮件正文，它们保留在 MessageBox 数据库中，并由 TrackedMessages_Copy_ 作业定期复制到 BizTalk 跟踪 (BizTalkDTADb) 数据库中。运行 SQL Server 代理服务也是归档和清除过程正常工作的先决条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T11:49:23.773

您是否使用默认管道？您是否检查过它们的跟踪复选框？存在一些错误，默认管道禁用管道跟踪。

更多信息在这里： [http ://blog.ibiz-solutions.se/integration/biztalk-global-pipeline-tracking-disabled-unexpectedly/](http://blog.ibiz-solutions.se/integration/biztalk-global-pipeline-tracking-disabled-unexpectedly/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T16:12:19.307

请确保在您的发送端口使用的发送管道的属性中启用了所需的跟踪。如果在发送管道上禁用消息正文跟踪，则在发送端口上也不会跟踪任何内容。

# windows-phone-7.1 - 如何将图像动态绑定到 Windows Phone 图像控件

> ID：11863986
> 
> 赞同：0
> 
> 时间：2012-08-08T11:55:52.667
> 
> 标签：windows-phone-7.1

我正在我的 Windows Phone 应用程序中使用 .net 网络服务。这里我将 XML 数据绑定到控件，我无法显示图像。
C＃：

```
eSchooltrack.ServiceReference5.EST_WebServicesSoapClient obj = new EST_WebServicesSoapClient();

 obj.GetLoginUserDetailsCompleted+=new EventHandler<GetLoginUserDetailsCompletedEventArgs>(obj_GetLoginUserDetailsCompleted);
         obj.GetLoginUserDetailsAsync(loginid);

  }

    private void obj_GetLoginUserDetailsCompleted(object sender, eSchooltrack.ServiceReference5.GetLoginUserDetailsCompletedEventArgs e)

    {
        XElement xmlNews = XElement.Parse(e.Result.ToString());
        image1.Source=GetImage(xmlNews.Element("ProfileImage").Value);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:01:46.510

取决于 GetImage 函数的返回类型

1）如果它的BitmapImage，那么它应该工作，否则它返回的图像为空

2）如果它的 Uri 做`image1.Source=new BitmapImage(GetImage(xmlNews.Element("ProfileImage").Value));`

3）如果它是一个字符串`image1.Source=new BitmapImage(new Uri(GetImage(xmlNews.Element("ProfileImage").Value)));`

我希望它有所帮助。请注意，如果仍然没有显示图像，则应在分配之前检查函数的返回值！= null。

# facebook-graph-api - 我的 FQL 有问题吗？

> ID：11863989
> 
> 赞同：-1
> 
> 时间：2012-08-08T11:56:05.883
> 
> 标签：facebook-graph-api, facebook-fql

我不断收到意外的变量错误。我要做的就是获取也是应用程序用户的朋友列表

```
 $user_profile = $facebook->api('/me','GET');
        $fql =  'SELECT uid, name, is_app_user, pic_square
                FROM user WHERE uid
                IN
               (SELECT uid2 FROM friend WHERE uid1 = me())
                AND is_app_user = 1'
        $param =    array(
                          'method' => 'fql.query',
                          'query' => $fql,
                             );
         $fqlresult = $facebook->api($param);

         $fqlresult   =   $this->facebook->api($param);
         foreach($fqlresult as $result)
        {
         print_r($result);
         print($result['name']);
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:10:38.627

> 我不断收到意外的变量错误。

你的意思是一个**PHP 错误消息**——你会得到一个文件名和行号。

当然，你得到了它——因为你少了一个分号……</p>

```
$fql =  'SELECT uid, name, is_app_user, pic_square
            FROM user WHERE uid
            IN
           (SELECT uid2 FROM friend WHERE uid1 = me())
            AND is_app_user = 1'
$param =    array( 
```

... 在声明`$fql`'s 值之后，这样`$param`下一行就出乎解析器的意料了。

**伙计，在继续玩复杂的 API 之前，请先了解一些*基本的 PHP 知识。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:06:31.713

你的 fql 是正确的，你可以在这里测试它[FQL Query](https://developers.facebook.com/tools/explorer?fql=SELECT%20uid%2C%20name,%20is_app_user,%20pic_square%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29%20AND%20is_app_user%20=%201)，我建议你检查 php 函数调用，因为我看到你有

```
 $fqlresult = $facebook->api($param);

     $fqlresult   =   $this->facebook->api($param); 
```

而且我不确定您想通过双重通话达到什么目的。

您可以在此处找到有关如何使用 FQL 和 Facebook PHP SDK 的更多详细信息[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)

# multithreading - Perl 多线程文件/列表比较

> ID：11863996
> 
> 赞同：2
> 
> 时间：2012-08-08T11:56:39.843
> 
> 标签：multithreading, string, perl, file, list

我的问题围绕着比较两个包含大字符串列表（7mio 和 3mio）的文件。我需要做的是将一个列表（称为“数据库”）中的每个元素与另一个列表（称为“参考”）中的每个元素进行比较。

我为此编写了一个非常基本的脚本，但是由于大量的比较（约 3 万亿），我想并行化搜索。由于这两个文件都很大，我的想法是只将它们加载到两个独立的数组（@reference 和@dbPep）中一次，然后使用子例程比较单独线程中的列表块，即线程 1 中的 0 到 1000000、1000001 - 线程 2 中的 2000000 等等。块大小由线程数决定，而最后一个也是使用模数后剩下的。输出应打印到 STDOUT 以便可以通过管道传输到文件，结果的顺序并不重要。

现在，我的问题在于根据 $ARGV 输入正确且动态地启动线程。

到目前为止，这是我所拥有的多线程，但是还没有真正起作用，所以我将其注释掉：

```
#!/usr/bin/perl
use Thread;

    $minLength      = $ARGV[0];
    $numThreads         = $ARGV[1];
    my $reference_File  = $ARGV[2];
    my $peptideDB_File  = $ARGV[3];

    if ($minLength == ""){$minLength = 6;}

    print STDERR ("Threads:\t".$numThreads."\n");
    print STDERR ("Reference:\t".$reference_File."\n");
    print STDERR ("peptide DB:\t".$peptideDB_File."\n----------------\n");
    print STDERR ("Loading reference...\n");

# Load reference peptides
    open (REF,$reference_File) || die ("File not found!");
    @reference = ();
    while (<REF>) {
        chomp;
        my @refPeptide = split("\t");
        if($refPeptide[1] eq "Sequence") {next;}
        push(@reference,$refPeptide[1]);
    }
    close (REF);
    print STDERR ("Done!\n");
    print STDERR ("Length:".@reference."\n");
    print STDERR ("Loading peptide database...\n");

# Open peptide DB to check
    open (PEP,$peptideDB_File) || die ("File not found!");
    @dbID  = ();
    @dbPep = ();
    while (<PEP>) {
        chomp;
        my @dbPeptide = split("\t");
        if($dbPeptide[1] eq "Sequence") {next;}
        push(@dbID,$dbPeptide[0]);
        push(@dbPep,$dbPeptide[1]);
    }
    close (PEP);
print STDERR ("Done!\n");
    print STDERR ("Length:".@dbPep."\n");
    print STDERR ("Starting analysis...\n");
    print STDERR ("(This can take a while)\n");
    print STDERR ("----------------\n");

#my %ref = map { $_ => 1 } @reference;

    my $dbLength        = @dbPep;
    my $rest            = $dbLength % $numThreads;
    my $chunkStart      = 0;
    my $chunkLength     = ($dbLength - $rest) / $numThreads;
    my $chunkEnd        = $chunkLength;

    #print STDERR($chunkEnd."\n");
    &peptideCheck($chunkStart,$chunkEnd);

    #for (my $i=0;$i<$numThreads;$i++) {
#       if ($i == $numThreads-1) {$chunkEnd += $rest;};
#       new Thread \&peptideCheck, $chunkStart, $chunkEnd;
#       $chunkStart += $chunkLength;
#       $chunkEnd   += $chunkLength;
#   }
    print STDERR ("----------------\nFinished!\n");
    sub peptideCheck {
        my @params = @_;
        for (my $j=@params[0]; $j<@params[1];$j++){
            if (length($dbPep[$j]) < $minLength) {next;}
            if ( grep { $_ eq $dbPep[$j]} @reference ) {
                #print STDERR ("RefCall:\n".$peptideCandidate[1]."\n");
                next;
            }
            else {
                #print STDERR ("Found novel peptide:\n");
                print (">".$dbID[$j]."\n".$dbPep[$j]."\n");
            }
        }
    } 
```

这是我的文件的（非常）简短示例，第一个是数据库，第二个是参考。

```
Protein_Name    Sequence    Unique_ID   Monoisotopic_Mass   Predicted_NET   Tryptic_Name
IPI:80000000.1  MGSTSEK 1   738,321789  0,0756  t1.1
IPI:80000001.1  MFLCSSFIFHHDCEASPAMLNCG 2   2559,0512972    0,5426  t1.1
IPI:80000002.1  MIVR    3   517,3046228 0,0924  t1.1
IPI:80000002.1  MIVRPPQPC   4   1039,5306652    0,2739  t1.2
IPI:80000002.1  PPQPC   5   540,2366066 0,1163  t2.1
IPI:80000003.1  MPVLMEK 6   846,4343096 0,2742  t1.1
IPI:80000003.1  MPVLMEKGGGR 7   1173,5998042    0,2599  t1.2
IPI:80000003.1  MPVLMEKGGGREPECSSPLGEQTR    8   2587,2192178    0,2881  t1.3
IPI:80000003.1  MPVLMEKGGGREPECSSPLGEQTRVASVGTCWIEVR    9   3887,878977 0,3859  t1.4

Protein_Name    Sequence    Unique_ID   Monoisotopic_Mass   Predicted_NET   Tryptic_Name
sp|P31946|1433B_HUMAN   MTMDK   1   624,2611054 0,1124  t1.1
sp|P31946|1433B_HUMAN   MTMDKSELVQK 2   1308,6417266    0,2304  t1.2
sp|P31946|1433B_HUMAN   MTMDKSELVQKAK   3   1507,7737968    0,2278  t1.3
sp|P31946|1433B_HUMAN   MTMDKSELVQKAKLAEQAER    4   2305,1769438    0,3107  t1.4
sp|P31946|1433B_HUMAN   SELVQK  5   702,3911854 0,1286  t2.1
sp|P31946|1433B_HUMAN   SELVQKAK    6   901,5232556 0,1294  t2.2
sp|P31946|1433B_HUMAN   SELVQKAKLAEQAER 7   1698,9264026    0,2544  t2.3
sp|P31946|1433B_HUMAN   SELVQKAKLAEQAERYDDMAAAMK    8   2695,330871 0,3435  t2.4
sp|P31946|1433B_HUMAN   AKLAEQAER   9   1014,5457814    0,1198  t3.2
IPI:80000000.1  MGSTSEK 1   738,321789  0,0756  t1.1
IPI:80000001.1  MFLCSSFIFHHDCEASPAMLNCG 2   2559,0512972    0,5426  t1.1 
```

任何帮助是极大的赞赏 ：）

谢谢和欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:41:59.490

好的，在切换到 pilcrow 推荐的“线程”模块后，我一直在处理代码（谢谢 :)），现在生成线程似乎工作正常。但是，似乎无法正常工作的是等待生成的线程完成（见下文）。目前，我使用 threads->detach() 因为我不需要线程的任何返回值，并且打印到 STDOUT 是他们应该做的唯一事情。当我运行程序时，这是我得到的输出：

```
Threads:    3
Reference:  testRef.txt
peptide DB: testDB.txt
----------------
Loading reference...
Done!
Length:1999
Loading peptide database...
Done!
Length:1999
Starting analysis...
(This can take a while)
----------------
1999    1   0   666 666
main: 0 666
createThr: 0    666
main: 666   1332
createThr: 666  1332
peptideCheck: 0 666
MTMDKSELVQK
main: 1332  1999
createThr: 1332 1999
peptideCheck: 666   1332
MAVMAPRTLLLLLSGALALTQTWAGSHSMR
----------------
Finished!
peptideCheck: 1332  1999
THVIWGTSKDFGISGFR 
```

由此我得出结论，我的线程是使用正确的参数正确生成的，但是当涉及到计算时，它们会因为主脚本完成而中断。我虽然在使用 detach() 时不会发生这种情况，所以我错过了什么还是我用错了方式？

这是新代码：

```
#!/usr/bin/perl

    use threads;
    use threads::shared;
    use strict;
    use warnings;

    my $minLength :shared   = $ARGV[0];
    my $numThreads          = $ARGV[1];
    my $reference_File      = $ARGV[2];
    my $peptideDB_File      = $ARGV[3];

    if ($minLength eq ""){$minLength = 6;}

    print STDERR ("Threads:\t".$numThreads."\n");
    print STDERR ("Reference:\t".$reference_File."\n");
    print STDERR ("peptide DB:\t".$peptideDB_File."\n----------------\n");
    print STDERR ("Loading reference...\n");

# Load reference peptides
    open (REF,$reference_File) || die ("File not found!");
    my @reference :shared = ();
    while (<REF>) {
        chomp;
        my @refPeptide = split("\t");
        if($refPeptide[1] eq "Sequence") {next;}
        push(@reference,$refPeptide[1]);
    }
    close (REF);
    print STDERR ("Done!\n");
    print STDERR ("Length:".@reference."\n");
    print STDERR ("Loading peptide database...\n");

# Open peptide DB to check
    open (PEP,$peptideDB_File) || die ("File not found!");
    my @dbID :shared  = ();
    my @dbPep :shared = ();
    while (<PEP>) {
        chomp;
        my @dbPeptide = split("\t");
        if($dbPeptide[1] eq "Sequence") {next;}
        push(@dbID,$dbPeptide[0]);
        push(@dbPep,$dbPeptide[1]);
    }
    close (PEP);
    print STDERR ("Done!\n");
    print STDERR ("Length:".@dbPep."\n");
    print STDERR ("Starting analysis...\n");
    print STDERR ("(This can take a while)\n");
    print STDERR ("----------------\n");

#my %ref = map { $_ => 1 } @reference;

    my $dbLength        = @dbPep;
    my $rest            = $dbLength % $numThreads;
    my $chunkStart      = 0;
    my $chunkLength     = ($dbLength - $rest) / $numThreads;
    my $chunkEnd        = $chunkLength;

    print STDERR ($dbLength."\t".$rest."\t".$chunkStart."\t".$chunkLength."\t".$chunkEnd."\n");

    #&peptideCheck($chunkStart,$chunkEnd);

    for (my $i=0;$i<$numThreads;$i++) {
        if ($i == $numThreads-1) {$chunkEnd += $rest;};
        print STDERR ("main: ".$chunkStart."\t".$chunkEnd."\n");
        createThr($chunkStart, $chunkEnd);
        $chunkStart += $chunkLength;
        $chunkEnd   += $chunkLength;
    }
    print STDERR ("----------------\nFinished!\n");

    sub peptideCheck {
        my @params = @_;
        print STDERR ("peptideCheck: ".$params[0]."\t".$params[1]."\n");
        for (my $j=$params[0]; $j<$params[1];$j++){
            if (length($dbPep[$j]) < $minLength) {next;}
            print ($dbPep[$j]."\n");
            if ( grep { $_ eq $dbPep[$j]} @reference ) {
                next;
            }
            else {
                print STDOUT (">".$dbID[$j]."\n".$dbPep[$j]."\n");
            }
        }
    }

    sub createThr {
        my @thrParams = @_;
        print STDERR ("createThr: ".$thrParams[0]."\t".$thrParams[1]."\n");
        my $thr = threads->create(\&peptideCheck, $thrParams[0], $thrParams[1]);
        $thr->detach();
    } 
```