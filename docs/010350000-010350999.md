# StackOverflow 问答 10350000-10350999

# objective-c - Xcode IOS5 检索文件名

> ID：10350000
> 
> 赞同：0
> 
> 时间：2012-04-27T11:42:36.920
> 
> 标签：objective-c, xcode, ios5

我希望从根目录中检索所有扩展名为 *.gs 的文件名并将它们存储在一个数组中。

我尝试使用 directoryContentsAtPath.. 但它说这个方法在 ios5 中已被弃用。你知道任何替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:48:32.603

你应该使用`NSFileManager`'s：

```
– contentsOfDirectoryAtPath:error: 
```

（请参阅[Apple 关于 NSFileManager 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)。）

你最终会得到类似的东西：

```
NSString *path = @"your/path";
NSError *error = nil;
NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:&error]; 
```

如果你觉得你不需要检查潜在的错误，你可以传递`nil`参数`error`。但是，我建议您检查是否发生错误并在这种情况下显示适当的错误消息。你可以这样做：

```
if (error) {
    // display some error message here
} else {
    // process filenames returned by NSFileManager
} 
```

# c# - 如何访问另一个窗口上的控件

> ID：10350004
> 
> 赞同：2
> 
> 时间：2012-04-27T11:42:48.403
> 
> 标签：c#, .net, wpf, wpf-controls

经过几个小时寻找解决方案后，我需要一些帮助。

我有一个 WPF 应用程序，它有一个主窗口和一个使用 RibbonWindow 类的第二个窗口。问题是我无法从第二个窗口访问 MainWindow 上的控件（数据网格）。第二个窗口被称为（在类中）CanSubMessages。MainWindow 继承自 RibbonWindow，CanSubMessages 继承自 Window。

我试图实现的是从 CanSubMessages 窗口更新 MainWindow 上的数据网格。听起来很简单吧？

我从 CanSubMessages 执行以下操作：

```
Window rootWindow = Application.Current.MainWindow as Window;
rootWindow.CanDataGridMessagesCh1.Items.Refresh(); 
```

CanDataGridMessagesCh1 是主窗口中的数据网格。它的名称在相应的 XAML 中给出：

```
<DataGrid x:Name="CanDataGridMessagesCh1" AutoGenerateColumns="False" ... 
```

我不明白为什么无法访问此控件。这是我得到的错误：

“System.Windows.Window”不包含“CanDataGridMessagesCh1”的定义，并且找不到接受“System.Windows.Window”类型的第一个参数的扩展方法“CanDataGridMessagesCh1”（您是否缺少 using 指令或程序集引用?)

任何人的线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:47:06.877

这一行是错误的：

```
Window rootWindow = Application.Current.MainWindow as Window; 
```

应该

```
Window rootWindow = Application.Current.MainWindow as MyWindowClass; 
```

**编辑**

另一种解决方案是在子窗口中包含对主窗口的引用：

这是一个示例，假设您正在从主窗口创建子窗口，并且您已将主窗口类型添加到子窗口构造函数中

```
ChildWindow cw = new ChildWindow(this); 
```

然后在您的子窗口中：

```
var mainwindow = this.MainWindow; // from the constructor 
```

# iphone - 为什么 UIWebView 不从 iOS4 上的缓存中加载数据？

> ID：10350007
> 
> 赞同：0
> 
> 时间：2012-04-27T11:42:52.810
> 
> 标签：iphone, objective-c, ios5, ios4, uiwebview

大家好，在我的 APP 中，我通过继承 NSURLCache 类为缓存创建了自定义类，并实现了将本地文件数据作为缓存数据传递所需的方法。[我已经完成了与本教程相同的操作](http://cocoawithlove.com/2010/09/substituting-local-data-for-remote.html)

在我的 APP 中有一个刷新按钮，单击它我必须刷新当前页面为此我已经完成以下操作以加载本地存储的 CSS 和 JS 文件

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
    if (isGoingToRefresh) {
        [NSURLCache setSharedURLCache:cache];
        isGoingToRefresh = NO;
        return YES;
    }
    NSString *path = [mainWebView stringByEvaluatingJavaScriptFromString:@"window.location.pathname"];
    path = [NSString stringWithFormat:@"%@%@",[[[AppDelegate sharedAppDelegate]configurationFile]objectForKey:@"RootURL"],path];
    [NSURLCache setSharedURLCache:cache];
    if ([path isEqualToString:[[request URL]absoluteString]]) {
        [self showRefreshLoader];
        isGoingToRefresh = YES;
        NSURLRequest *localRequest = [NSURLRequest requestWithURL:[request URL] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:240] ;
        [webView loadRequest:localRequest];
        return NO;
    }

    return YES; 
```

}

上面的代码通过调用以下 NSURLCache 方法从缓存中加载数据 -

```
- (NSCachedURLResponse *)cachedResponseForRequest:(NSURLRequest *)request 
```

但是在 iOS4 webView 上没有调用上面的 NSURLCache 方法。

我不明白为什么请建议我一些好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:44:06.137

尝试使用来提出您的要求

```
NSURLRequest *theRequest = [NSURLRequest requestWithURL:url 
                                            cachePolicy:NSURLCacheStorageAllowed 
                                        timeoutInterval:60]; 
```

# apache-flex - 在 Flex 4 中使用 ComboBox 作为 ItemEditor

> ID：10350009
> 
> 赞同：0
> 
> 时间：2012-04-27T11:42:58.020
> 
> 标签：apache-flex, datagrid, itemeditor

我有一个带有数据的简单 DataGrid。在其中一列中，我想使用 ComboBox 来编辑字段，而不是标准的编辑框。

我怎么做？我已经尝试了我在互联网上找到的所有类型的东西，但它们都无法简单地更新值。我会说这样做应该不会太难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:32:31.030

实际上，我自己也在这样做，并且使用 spark:DataGrid 它实际上比 halo 更容易一些 - 但两者都遵循相同的设置/架构。

从...开始：

```
spark.components.gridClasses.ComboBoxGridItemEditor; 
```

根据您的数据设置的性质和/或这种编辑对您的应用程序的多产程度，您可以将其内联编写，因为大多数文档会在 <fx:component> 中建议，或者只是将其子类化（尽管在幕后这些是同一件事——后者更容易重用）。在我的场景中组合的数据是一个更大的父对象的子选择，所以我选择让自己更容易，并添加一个额外的属性**dataField**来模仿其他渲染器/编辑器——实际上只显示在单元格本身中（不处于编辑模式时）。

基本设置看起来或多或少是这样的（至少我的是这样）：

```
public class AccountComboEditor extends ComboBoxGridItemEditor
{
     private _dataField:String;

     public function AccountComboEditor()
     {
         super();
         //note - typically you wouldn't do "logic" in the view but it's simplified as an example
         addEventListener(FlexEvent.CREATION_COMPLETE, onCreationComplete);
     }

     public function get dataField():String { return _dataField; }

     public function set dataField(value:String):void
     {
         if (_dataField !=value) //dosomeadditionalvalidation();
         _dataField = value;
     }

     override public function prepare():void
     {
        super.prepare();

        if (data && dataField && comboBox) comboBox.labelField = data[dataField];
     }

     protected function onCreationComplete(event:FlexEvent):void
     {
         //now setup the dataProvider to your combo box - 
         //as a simple example mine comse out of a model

         dataProvider = model.getCollection();
         //this isn't done yet though - now you need a listener on the combo to know
         //what item was selected, and then get that data_item (label) back onto this 
         //editor so it has something to show when the combo itself isn't in
         //editor mode
     }
} 
```

所以真正的收获是设置组合框的**labelField**，无论是在子类内部还是在外部，如果您需要将其公开为附加属性。

下一部分是将其用作实际数据网格的**mx.core.ClassFactory的一部分。**一个简单的视图看起来类似于：

```
<s:DataGrid>
   <fx:Script>
        private function getMyEditor(dataField:String):ClassFactory
        {
           var cf:ClassFactory = new ClassFactory(AccountComboEditor);
               cf.properties = {dataField : dataField };
           return cf;
        }
   </fx:Script>

   <s:columns>
      <mx:ArrayList>
         <s:GridColumn itemEditor="{getMyEditor('some_data_property')}" />
      </mx:ArrayList>
   </s:columns>
</s:DataGrid> 
```

这个[正在创建项目渲染器...](http://help.adobe.com/en_US/Flex/4.5/UsingSDK/WS8b1c39bd7e9fc364-1a0b75ef12ddd639592-8000.html)文档将为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:52:19.397

我想到了。我只想要一个简单的下拉框，而不是文本编辑字段。

以下代码确实想要我想要的：

```
 <mx:DataGridColumn dataField="type" headerText="Type" editorDataField="value">
            <mx:itemEditor>
                <fx:Component>
                    <mx:ComboBox>
                        <mx:dataProvider>
                            <fx:String>Gauge</fx:String>
                            <fx:String>Graph</fx:String>
                            <fx:String>Indicator</fx:String>
                        </mx:dataProvider>
                    </mx:ComboBox>
                </fx:Component>
            </mx:itemEditor>
        </mx:DataGridColumn> 
```

# .net - 用户代码中未处理 WebFaultException

> ID：10350011
> 
> 赞同：3
> 
> 时间：2012-04-27T11:42:59.183
> 
> 标签：.net, wcf, rest, c#-4.0

我正在使用 WCF REST 服务 (4.0) 来公开 JSON API ..但没有让我`WebFaultException`工作。

我的方法中有以下内容：

```
 if (!int.TryParse(Id, out idValue))
        {
            throw new WebFaultException<string>(string.Format(WebExceptionMessages.NotIntegerAsParameter),
                                                HttpStatusCode.BadRequest);
        } 
```

当我尝试从提琴手调用服务时，我总是收到相同的错误消息：

![调试时出错](../Images/6ccb52ce2d2cc6bacd33b494364d1023.png)

我一直在尝试寻找解决方案一段时间......请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:03:16.867

工作正常 - Visual Studio 中的`WebFaultException`错误消息只是告诉您它没有被处理 - 这是预期的行为。Visual Studio 调试器会告诉您它未处理，因为您没有通过 try/catch 捕获错误。[有关用法](http://blogs.msdn.com/b/endpoint/archive/2010/01/21/error-handling-in-wcf-webhttp-services-with-webfaultexception.aspx)，请参阅[相关的 MSDN 博客`WebFaultException`](http://blogs.msdn.com/b/endpoint/archive/2010/01/21/error-handling-in-wcf-webhttp-services-with-webfaultexception.aspx)。

# .net - VB.NET 下字符串的默认编码是什么？

> ID：10350017
> 
> 赞同：7
> 
> 时间：2012-04-27T11:43:35.987
> 
> 标签：.net, vb.net, string, encoding

我有一个关于字符串的简单问题。考虑以下代码：

```
Dim S1 as String = "abc" 
```

S1的编码是什么？那是 UTF-8 还是取决于用户 Windows 本地设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T12:01:29.173

`System.String`[记录](http://msdn.microsoft.com/en-us/library/system.string.aspx#Characters)在内部使用 UTF-16。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T11:48:03.067

*这是一个您*无需担心的实现细节（除非您离开[Basic Multilingual Plane](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)，在这种情况下，事情会变得复杂，因为[`Char`s 代表 UTF-16 代码单元](http://msdn.microsoft.com/en-us/library/system.char.aspx)）。

当它变得相关时，即当字符串转换为字节数组时，您必须*选择*要使用的编码：

```
Dim S1 As String = ...

Dim utf8Bytes = Encoding.UTF8.GetBytes(S1)
Dim utf16Bytes = Encoding.Unicode.GetBytes(S1)

Dim western As New Encoding(1252)
Dim westernBytes = western.GetBytes(S1) 
```

# objective-c - fetchRequestWithEntityName 和 initWithEntityName 有什么区别？

> ID：10350019
> 
> 赞同：0
> 
> 时间：2012-04-27T11:43:44.203
> 
> 标签：objective-c

虽然我意识到一个是类方法，另一个是实例方法，但它们在 Apple 文档中具有完全相同的描述，所以我不太了解不同的语法/用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:51:13.827

它们的功能是等效的，但是类方法返回一个自动释放的对象。也就是说，它可能是按照以下方式实现的：

```
+ (NSFetchRequest *)fetchRequestWithEntityName:(NSString *)entityName {
    return [[[NSFetchRequest alloc] initWithEntityName:entityName] autorelease];
} 
```

这是 Objective-C 库中相当常见的模式，称为[类工厂方法](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW36)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:55:12.647

这两个 API 的主要区别如下：

`fetchRequestWithEntityName`会给你一个自动释放对象，所以一旦事件循环结束，它将从内存中释放，直到你保留它。

但是`initWithEntityName`会给你要释放的对象，否则会有内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:00:42.613

根据您所说，如果它们确实具有相同的用例，则根据Apple使用的内存管理设计，唯一的区别与objective-C上的垃圾收集有关。

每当您在对象上调用`init`方法时，您就拥有它，并且您有责任在不再需要该对象时释放它。

当您调用任何其他类型的返回对象的方法时，该对象将添加到 a中，并且当池耗尽时`NSAutoreleasePool`它是d 。`autorelease`

[您可以在此处](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-CJBEJBHH "这里")获得更多见解。

因此，按照 Apple 的方式，如果您不想保存对象以供进一步使用，您可以调用`fetchRequestWithEntityName`而不用担心在方法调用结束时释放对象。如果要将其保存为实例变量，请调用`initWithEntityName`方法。它们当然可以互换，但这种方法遵循苹果在内存管理方面的指导方针。

```
-(void)myMethod {
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

  id obj1 = [[Object alloc] initWithEntityName:...];
  id obj2 = [Object fetchRequestWithEntityName:...];

  //obj1 retain count is +1
  //obj2 retain count is +0 (likely autoreleased)

  [pool drain];

  //obj1 still exists
  //obj2 is no longer valid; may or may not have been deallocated 
} 
```

所以基本上，`fetchRequestWithEntityName`是通过以下方式实现的：

```
+(id)fetchRequestWithEntityName:... {
  return [[[self class] alloc] initWithEntityName:...] autorelease];
} 
```

# java - Myphone 设备上的 FileConnection 异常 - 无权访问受限 API

> ID：10350020
> 
> 赞同：3
> 
> 时间：2012-04-27T11:43:46.330
> 
> 标签：java, java-me, midp, jsr75

我在 J2ME 中开发了一个应用程序，我必须在其中建立文件连接，但是当我运行这个应用程序时，它给出了一个异常：

```
Application not authorized to access the restricted API 
```

我使用签名服务器对构建进行了签名，它在除此设备之外的其他设备中运行良好。下面是我的代码。

下面是我的文件连接代码。它首先构造文件路径

```
 String dir = "file://" + Util.get_root_dirFrom() + "m/demo.res"; // Filepath for the application
 Log.p("Inside the loadString method......dir");
 FileConnection fc = null;
 InputStream fis = null;
 try {
   fc = (FileConnection) Connector.open(dir, Connector.READ);// Make a file connection
   fis = fc.openInputStream();
 }catch(Exception ex){
   Log.p("Exception...."+ex.getMessage());
 } 
```

`Util.get_root_dirFrom()`方法返回此设备中存储卡的目录。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:23:13.850

我不认为这是代码的问题。

手机对某些 J2ME 功能具有这种安全性。
您可能只需要设置应用程序的权限设置，以便它能够在文件系统上读/写。

具体如何操作取决于手机，但您可能会很快找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:26:42.170

我认为 SmRndGuy 的答案是正确的。最好选择另一个文件夹进行文件 io 操作

# dsl - 如何为生成的 XText DSL 添加多个出口

> ID：10350022
> 
> 赞同：3
> 
> 时间：2012-04-27T11:43:49.723
> 
> 标签：dsl, xtext, outlet

默认情况下，生成的 XText 工件会从我的 DSL 生成代码到默认插座（默认为 src-gen 文件夹）。我知道您可以在 fsa.generateFile("myfile.txt", "MY_OUTLET_NAME", "Some file content") 中显式传递出口配置名称。

我是因为我想用我的 XText DSL 生成代码，并且想使用代沟模式并在一个名为“src-once”的文件夹中生成代码。

我正在使用 XText 2.2.1。

我的问题：

1) 我在哪里以及如何定义像“MY_OUTLET_NAME”这样的网点？

2）有没有办法防止覆盖特定插座中的现有文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T11:21:24.343

Christian Dietrich 的提示为我指明了正确的方向。下面是我最终得到的代码。

我创建了一个实现 IOutputConfigurationProvider的新类*MyOutputConfigurationProvider 。**getOutputConfigurations*方法返回两个输出配置，默认的src *-gen*和自定义的*src-gen-once*，其设置正确，只生成一次源。

```
package com.my.dsl;

import static com.google.common.collect.Sets.newHashSet;

import java.util.Set;

import org.eclipse.xtext.generator.IFileSystemAccess;
import org.eclipse.xtext.generator.IOutputConfigurationProvider;
import org.eclipse.xtext.generator.OutputConfiguration;

public class MyOutputConfigurationProvider implements
    IOutputConfigurationProvider {

public final static String DEFAULT_OUTPUT_ONCE = "DEFAULT_OUTPUT_ONCE";

/**
 * @return a set of {@link OutputConfiguration} available for the generator
 */
public Set<OutputConfiguration> getOutputConfigurations() {
    OutputConfiguration defaultOutput = new OutputConfiguration(IFileSystemAccess.DEFAULT_OUTPUT);
    defaultOutput.setDescription("Output Folder");
    defaultOutput.setOutputDirectory("./src-gen");
    defaultOutput.setOverrideExistingResources(true);
    defaultOutput.setCreateOutputDirectory(true);
    defaultOutput.setCleanUpDerivedResources(true);
    defaultOutput.setSetDerivedProperty(true);

    OutputConfiguration onceOutput = new OutputConfiguration(DEFAULT_OUTPUT_ONCE);
    onceOutput.setDescription("Output Folder (once)");
    onceOutput.setOutputDirectory("./src-gen-once");
    onceOutput.setOverrideExistingResources(false);
    onceOutput.setCreateOutputDirectory(true);
    onceOutput.setCleanUpDerivedResources(false);
    onceOutput.setSetDerivedProperty(true);
    return newHashSet(defaultOutput, onceOutput);
}

} 
```

要使用*MyOutputConfigurationProvider*实现，请将 configure 方法添加到您的模块类：

```
/**
 * Use this class to register components to be used within the IDE.
 */
public class MyDslUiModule extends com.my.dsl.ui.AbstractMyDslUiModule {
public MyDslUiModule(AbstractUIPlugin plugin) {
    super(plugin);
}

@Override
public void configure(Binder binder) {
    super.configure(binder);

    binder.bind(IOutputConfigurationProvider.class).to(MyOutputConfigurationProvider.class).in(Singleton.class);
} 
```

}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T20:52:29.457

实现自定义 IOutputConfigurationProvider 应该可以解决问题

# java - 如何设置当前目录的系统属性

> ID：10350027
> 
> 赞同：0
> 
> 时间：2012-04-27T11:44:07.487
> 
> 标签：java, log4j, jboss6.x

我正在使用 jboss，我正在努力在 properties-service.xml 中设置当前目录路径，我想在 log4j jdbc 适配器中调用它以获取 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:47:32.690

在 properties-service.xml 中设置它

CURRDIR=/home/malika

然后打电话

System.out.println(System.getProperty("CURRDIR"));

# spring - Java Web 项目类路径

> ID：10350030
> 
> 赞同：0
> 
> 时间：2012-04-27T11:44:13.950
> 
> 标签：spring, resources, classpath

我正在使用 Eclipse Helios。我有一个动态 Web 项目。

我想使用 Spring 3.1.0 加载一个属性文件，为此我使用以下配置

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <value>classpath:resources/dc-config.properties</value>
        </property>
    </bean> 
```

此文件夹按名称资源存在于 WEB-INF/classes 目录中

但是当我尝试启动我的 Tomcat 6 服务器时，我收到以下错误

```
Caused by: java.util.MissingResourceException: Can't find bundle for base name dc-config, locale en_US 
```

是不是我的资源文件夹在类路径中，因为它在类文件夹中，而类文件夹又在类路径中？

如果我在这里遗漏了什么，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:53:16.920

可能是错误的 bean 类？试试这个：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
 <property name="basenames">
   <list>
     <value>classpath:resources/dc-config</value>
    </list>
  </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:09:23.530

也许问题是一个小错字。尝试任一

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location"> <!-- not locations -->
            <value>classpath:resources/dc-config.properties</value>
        </property>
    </bean> 
```

或者

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
        <list>
            <value>classpath:resources/dc-config.properties</value>
        </list>
        </property>
    </bean> 
```

# android - 在短信点击/查看时启动我的应用程序（意图）

> ID：10350042
> 
> 赞同：1
> 
> 时间：2012-04-27T11:45:07.123
> 
> 标签：android, android-intent

我开发了一种简单的记事本应用程序，它简单地将标题和内容存储为文本和可选的图片以保存在其数据库中。

当用户想要查看/编辑短信时，我希望在单击短信对话列表时启动我的应用程序（应用程序选择器）。这样就可以在我的应用程序中导入短信内容。清单文件中究竟需要什么意图过滤器？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:31:17.833

这是不可能的。

查看或编辑 SMS 时不会触发任何意图。要实现这一点，您必须实现一个完整的 SMS 应用程序并让它拦截所有发送到手机的 SMS。

# html - 如何制作具有 3 列的 Web 表单？

> ID：10350043
> 
> 赞同：2
> 
> 时间：2012-04-27T11:45:11.653
> 
> 标签：html, css, stylesheet

如何使用 CSS 制作具有 3 列的 Web 表单？在上面的示例中，所有元素都仅放置在单个列中。

```
<html>
<head>
<style>
        /* ----------- My Form ----------- */
        .myform{
            margin:0 auto;
            padding:14px;
        }
        #stylized{
            border-width:1px;
            border-style:solid;
            border-color:#b7ddf2;
            background:#ebf4fb;
        }
        #stylized h1 {
            font-size:14px;
            font-weight:bold;
            margin-bottom:8px;
            border-width:1px;
            border-style:solid;
            border-color:#b7ddf2;
            padding-bottom:10px;
        }
    #stylized label{
        font-size:11px;
        font-weight:bold;
        text-align:right;
    }
    #stylized input{
        font-size:11px;
        padding:4px 2px;
        border:solid 1px #aacfe4;
        width:70px;
        margin:2px 0 20px 10px;
        display: block;
    }
        /* --------- End of Form --------- */

</style>
</head>
<body>    
            <div id="stylized" class="myform">
                <form id="form" name="form" method="post" action="index.html">
                <h1>Data</h1>
                <label>Name: </label>
                <input type="text" name="name" id="name"/>
                <label>Email: </label>
                <input type="text" name="email" id="email"/>
                <label>Password: </label>
                <input type="text" name="password" id="password"/>
                </form>
            </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:50:27.067

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:56:21.950

您可以将其用于所有表单，或者如果您想以特定表单执行此操作，则可以使用类或 id 定义 css 名称。

```
 form div 
    {
         display: inline;
         width: 33%;
         float: left;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:58:12.793

嘿，你可以用`display:inline-block;`

**HTML**

```
<div id="stylized" class="myform">
    <form id="form" name="form" method="post" action="index.html">
        <h1>Data</h1>
        <div class="column">
            <label >Name:
            <input type="text" name="name" id="name"/></label>
        </div>
        <div class="column">
            <label>Email:
            <input type="text" name="email" id="email"/></label>
        </div>
        <div class="column">
            <label>Password:
            <input type="text" name="password" id="password"/></label>
        </div>
    </form>
</div> 
```

**CSS**

```
.column
{
    display: inline-block;
    margin-left: 23px;
    vertical-align: top;

}
.column + .column{
margin-left:25px;
} 
```

现场演示[http://jsfiddle.net/bfZR4/2/](http://jsfiddle.net/bfZR4/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:01:02.833

把每个`3 fields in a div with id section`. 进而`each of field in a div havin class subsection`

```
<html>
<head>
<style>
        /* ----------- My Form ----------- */
        .myform{
            margin:0 auto;
            padding:14px;
        }
        #stylized{
            border-width:1px;
            border-style:solid;
            border-color:#b7ddf2;
            background:#ebf4fb;
        }
        #stylized h1 {
            font-size:14px;
            font-weight:bold;
            margin-bottom:8px;
            border-width:1px;
            border-style:solid;
            border-color:#b7ddf2;
            padding-bottom:10px;
        }
    #stylized label{
        font-size:11px;
        font-weight:bold;
        text-align:right;
    }
    #stylized input{
        font-size:11px;
        padding:4px 2px;
        border:solid 1px #aacfe4;
        width:70px;
        margin:2px 0 20px 10px;
        display: block;
    }
    #section{
        width:100%;
        padding: 10px;
    }
    .subsection{
        width:30%;
        margin:0px 5px 0px 5px;
        float: left;
    }

        /* --------- End of Form --------- */

</style>
</head>
<body>    
            <div id="stylized" class="myform">
                <form id="form" name="form" method="post" action="index.html">
                <h1>Data</h1>
                <div id="section">
                <div class="subsection">
                <label>Name: </label>
                <input type="text" name="name" id="name"/>
                </div>
                <div class="subsection">
                <label>Email: </label>
                <input type="text" name="email" id="email"/>
                </div>
                <div class="subsection">
                <label>Password: </label>
                <input type="text" name="password" id="password"/>
                </div>
                </form>
            </div>
            </div>
</body>
</html> 
```

谢谢

# css - 为什么我的容器/包装器的背景没有延伸到所有内容后面

> ID：10350050
> 
> 赞同：0
> 
> 时间：2012-04-27T11:45:39.790
> 
> 标签：css, background-color

我正在为 uni 制作一个作品集，而我的容器/包装器的背景没有垂直延伸到足够的程度，以使其所有内容都具有背景颜色。我将在下面发布代码，任何帮助将不胜感激。

HTML

```
<body>

    <section id="wrapper">

        <header>
            <hgroup class="title">   
                <h1>Matt Murphy</h1>
                <p>Personal Portfolio | University of Leeds | BA New Media</p>
           </hgroup>
         </header>

           <nav>
                <a href="home.html" class="parent">Home</a>
                <a href="about.html" class="parent">About Matt</a>      
           </nav>   

           <section id="modules">
               <h2>Modules Studies To Date</h2>
                   <section id="year_1">
                       <h3>Year 1</h3>
                         <p>History of Communications</p>
                         <p>Academic Skills and Contemporary Issues</p>
                         <p>Interface Design</p>
                         <p>Design For New Media</p>
                         <p>Basic Camera and Editing</p>
                         <p>Animation For New Media</p>  
                   </section>  

                   <section id="year_2">
                    <h3>Year 2</h3>
                         <p>Dynamic Web Programming</p>
                         <p>Communications Research Methods</p>
                         <p>Working in New Media/p>
                         <p>Media Policy</p>
                         <p>New Media Narrative and Gaming</p>
                         <p>Visual Communications</p> 
                   </section>    
           </section>

    </section>
</body> 
```

CSS

```
body{
    color:#000;
    background-image: url(images/canvas.png);
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;   
}

a:link {
    text-decoration:none;
    color:#000; 
}      
a:visited {
    text-decoration:none;
    color:#000;
} 
a:hover {
    text-decoration:none;
    color:#000;
}  
a:active {
    text-decoration:none;
    color:#000;
}

#wrapper {
    background-color:#FFF;
    padding:3%;
    -webkit-border-radius: 25px;
    -moz-border-radius: 25px;
    border-radius: 25px;
    display:block;
    margin:auto;
    width:60%;
    margin-top:2%;
}

header {
    text-align:right;
}

#modules {
    width:100%;
    display:block;
    margin:auto;
}

#year_1 {
    float:left;
}

#year_2 {
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:01:00.257

要解决您的问题，您只需添加`overflow: auto`到`#wrapper`.

```
#wrapper {
    background-color:#FFF;
    padding:3%;
    -webkit-border-radius: 25px;
    -moz-border-radius: 25px;
    border-radius: 25px;
    display:block;
    margin:auto;
    width:60%;
    margin-top:2%;
    overflow: auto; /* add this line */
} 
```

但是，另一个问题是您使用的是 HTML5 元素和 HTML5 shiv，但您没有使用 HTML5 文档类型：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:52:23.717

我假设您在 IE 中遇到问题？您缺少 doctype 声明。如果您按照下面 W3Schools 上的示例添加过渡文档类型，它应该可以工作。

[HTML 文档类型声明](http://www.w3schools.com/tags/tag_doctype.asp "HTML 文档类型声明")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:04:21.517

基本上，section#year 上的 css-property 'float' 是这里的坏人。

如果我用 div 替换您的部分并添加一个额外的 div 以清除块渲染它可以工作：http: [//jsfiddle.net/hoedinie/537sL/1/](http://jsfiddle.net/hoedinie/537sL/1/)

# regex - Perl 中带有 * 修饰符的负前瞻断言

> ID：10350053
> 
> 赞同：7
> 
> 时间：2012-04-27T11:45:44.330
> 
> 标签：regex, perl, negative-lookahead, regex-lookarounds

如果测试的字符串是 a*后跟* 任意数量的空格（包括零），然后*不*跟.`<@> *(?!QQQ)``<@>`*`QQQ`*

 *然而，如果测试的字符串是`<@> QQQ`正则表达式匹配。

我不明白为什么会这样，并希望在这件事上提供任何帮助。

这是一个测试脚本

```
use warnings;
use strict;

my @strings = ('something <@> QQQ',
               'something <@> RRR',
               'something <@>QQQ' ,
               'something <@>RRR' );

print "$_\n" for map {$_ . " --> " . rep($_) } (@strings);

sub rep {

  my $string = shift;

  $string  =~ s,<@> *(?!QQQ),at w/o ,;
  $string  =~ s,<@> *QQQ,at w/  QQQ,;

  return $string;
} 
```

这打印

```
something <@> QQQ --> something at w/o  QQQ
something <@> RRR --> something at w/o RRR
something <@>QQQ --> something at w/  QQQ
something <@>RRR --> something at w/o RRR 
```

我本来希望第一行是`something <@> QQQ --> something at w/ QQQ`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T11:53:29.157

它匹配是因为零包含在“任何数字”中。所以没有空格，后跟一个空格，匹配“任意数量的空格，后面没有 Q”。

您应该添加另一个前瞻断言，即空格之后的第一件事本身不是空格。试试这个（未经测试）：

```
 <@> *(?!QQQ)(?! ) 
```

**ETA**旁注：将量词更改为 + 只有在只有一个空格时才有帮助；在一般情况下，正则表达式总是可以少占用一个空间并因此成功。正则表达式想要匹配，并且会以任何可能的方式向后弯曲。所有其他考虑因素（最左边、最长等）都处于次要地位 - 如果它可以匹配多个方式，则它们决定选择哪种方式。但匹配总是胜过不匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T14:09:23.473

```
$string  =~ s,<@> *(?!QQQ),at w/o ,;
$string  =~ s,<@> *QQQ,at w/  QQQ,; 
```

您的一个问题是您正在分别查看这两个正则表达式。您首先要求替换没有 的字符串`QQQ`，然后用 替换字符串`QQQ`。从某种意义上说，这实际上是两次检查同一件事。例如：`if (X==0) { ... } elsif (X!=0) { ... }`。换句话说，代码可能写得更好：

```
unless ($string =~ s,<@> *QQQ,at w/  QQQ,) {
    $string =~ s,<@> *,at w/o,;
} 
```

您始终必须小心使用`*`量词。由于它匹配零次或多次，它也可以匹配空字符串，这基本上意味着：它可以匹配任何字符串中的任何位置。

否定的环顾断言具有相似的质量，因为它只需要找到一个不同的东西才能匹配。在这种情况下，它匹配+ 无空格 + 空格的部分，其中空格当然是 "not `"<@> "`" 。您在这里或多或少处于逻辑僵局，因为量词和负前瞻相互抵消。`<@>``QQQ``*`

我相信解决这个问题的正确方法是分离正则表达式，就像我上面展示的那样。允许执行两个正则表达式的可能性是没有意义的。

但是，出于理论目的，需要锚定一个允许任意数量的空格*和负前瞻的工作正则表达式。*就像[马克·里德](https://stackoverflow.com/users/797049/mark-reed)所展示的那样。这可能是最简单的。

```
<@>(?! *QQQ)        # Add the spaces to the look-ahead 
```

不同之处在于，现在空格和 Q 彼此锚定，而之前它们可以单独匹配。要`*`深入理解量词的意义，并解决删除额外空格的小问题，您可以使用：

```
<@> *(?! *QQQ) 
```

这将起作用，因为任何一个量词都可以匹配空字符串。从理论上讲，您可以根据需要添加任意数量的这些，并且不会有任何区别（性能除外）：`/ * * * * * * */`在功能上等同于`/ */`. 这里的区别在于可能不存在与 Qs 组合的空格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T15:17:01.793

正则表达式引擎将回溯，直到找到匹配项，或者直到无法找到匹配项。在这种情况下，它找到了以下匹配项：

```
 +--------------- Matches "<@>".
                         |   +----------- Matches "" (empty string).
                         |   |       +--- Doesn't match " QQQ".
                         |   |       |
                        --- ----    ---
'something <@> QQQ' =~ /<@> [ ]* (?!QQQ)/x 
```

您需要做的就是随机播放。代替

```
/<@>[ ]*(?!QQQ)/ 
```

和

```
/<@>(?![ ]*QQQ)/ 
```

或者你可以这样做，这样正则表达式将只匹配所有空格：

```
/<@>[ ]*+(?!QQQ)/
/<@>[ ]*(?![ ]|QQQ)/
/<@>[ ]*(?![ ])(?!QQQ)/ 
```

PS——空间很难看到，所以我用它`[ ]`来让它们更明显。无论如何，它都会被优化掉。*

# asp.net - ASP.NET 类库

> ID：10350058
> 
> 赞同：0
> 
> 时间：2012-04-27T11:45:49.633
> 
> 标签：asp.net, class

当使用 Visual Studio 中的发布选项发布 ASP.NET 应用程序时，会在 Web 服务器的 BIN 文件夹中生成一系列 DLL。Visual Studio 专门为 ASP.NET 生成的 DLL 与标准类库有什么区别？

我想重用 ASP.NET 应用程序中包含的类中的代码。

我的一个选择是将 ASP.NET 类转换为类库，因此是这个问题的原因。另一种选择是使用 Web 服务来公开其他应用程序所需的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:49:55.617

由 ASP.NET 生成的 DLL 与标准类库之间没有区别。尽管 Web 应用程序项目生成了一个 DLL，但它实际上不能重用（它可以，但它包含页面和用户控件的代码隐藏，但不包含标记），但每个其他 DLL 都可以重用。

使用服务和实施面向服务的架构 (SOA) 也是另一种选择，因此它实际上取决于您的需求是什么，以及您要重用什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:50:37.127

选择类库而不是内置类的主要原因是它们可以与其他项目共享，或者可以分发 DLL 以供进一步使用。

我能想到的类库的好处是：

*   更整洁的项目结构
*   更快的项目构建时间
*   可以引用库的不同版本，因此可以适应升级

我通常将 Web 服务用于需要在应用程序/服务器之间进行通信的项目，而不是包装公共代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:52:44.023

您应该在单独的程序集中提取要重用的代码，并在 Web 项目和其他项目中引用它。请勿将程序集与网页和其他应用程序中的其他应用程序特定代码一起使用。

# javascript - Onclick锚标签，更改span中的标题

> ID：10350059
> 
> 赞同：-4
> 
> 时间：2012-04-27T11:45:51.887
> 
> 标签：javascript, jquery, html

我有一个跨度，例如： HTML 页面中的主页。和这样的锚标签：Introductiondemo。我的问题是，当用户单击锚标签时，如何更改 Span 中的标题“Home”并替换为锚标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:49:21.017

你的意思是这样的？

```
$(document).on('click', 'a', function() {
    $('#module-titles').html( $(this).html() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:50:19.000

将类添加到`<a>`标签

```
 <a href="#module1-introduction" class="mod">Introduction</a>
 <a href="#module1-home" class="mod">demo</a> 
```

试试这个jquery

```
$('.mod').click(function(){
    $('#module-titles').html($(this).html());
 }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:51:50.200

只需使用选择器[开头](http://api.jquery.com/attribute-starts-with-selector/)

```
$('a[href^="#module1-"]').click(function() {  

    $('#module-titles').text($(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:52:09.257

使用 jquery 很容易做这样的事情你的锚标签应该有 id

```
<a href="#module1-introduction" id = "module1-introduction">Introduction</a>
<a href="#module1-home" id = "module1-home">demo</a>

$('#module1-introduction , #module1-home').click(function(){
     var new_text = $(this).html();   
     $('#module-titles').html(new_text); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:54:11.073

如果您在锚标题之后而不是锚内容（这是您在问题中所说的），那么您应该使用类似 tghis 的东西。

```
$('a').on('click', function() {
    $('#module-titles').html(this.title);
}); 
```

如果这是您所追求的内容，那么其他答案就可以了，但是您应该更新您的问题。

# android - iOS/Android 到服务器传输：保持传输安全的最佳方式？

> ID：10350065
> 
> 赞同：0
> 
> 时间：2012-04-27T11:47:04.283
> 
> 标签：android, ios, security

我目前正在与以下演员合作一个项目：

*   托管一个带有数据库的 zend php 应用程序的 Web 服务器。
*   2 个移动应用程序（iOS 和 Android）从/向服务器检索/发布数据。

我正在使用 HTTPS（带有受信任的证书）与服务器通信。要从服务器检索数据，使用 GET 方法。为了将数据推送到服务器，移动应用程序通过 HTTPS 使用 POST 方法。

由于敏感数据，某些传输（例如用户登录/用户数据更新）必须得到保护。

我应该使用什么样的解决方案来强制执行这些传输安全？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:18:18.410

SSL 是一种可行的方法，它将加密发送该数据，因此流中的任何人都无法读取它。通过 SSL 运行所有交互，这样您就不会以未加密的形式公开凭据 (UN/PW) 或会话 cookie。SSL 是执行此操作的行业标准方式，并且满足您指定的所有要求。

如果您想限制对您的服务器应用程序的访问仅限于您的客户端，您可以部署相互验证的 SSL。在您的客户端应用程序中嵌入客户端 SSL 证书，并将您的服务器配置为仅接受来自在连接时提供该证书的客户端的传入请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:25:06.053

如果您使用的是 HTTPS，那么您已经拥有一级安全性。要添加另一个级别，您可以在发送到服务器之前加密和解密密码。

iOS 支持 AES256 加密。

在此处查看最佳实践 [http://developer.apple.com/library/ios/#documentation/Security/Conceptual/Security_Overview/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/Security_Overview/Introduction/Introduction.html)

和 iphone 示例在这里

[http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html)

我不是 100% 确定，但你也可以获得类似的 android API。

# php - 为函数声明获取“语法错误，意外'，'”

> ID：10350068
> 
> 赞同：-4
> 
> 时间：2012-04-27T11:47:11.323
> 
> 标签：php, function

我正进入（状态

```
Parse error: syntax error, unexpected ',' in /xxx/login.php on line 28 
```

函数定义为：

```
function login($subuser, $subpass, $subremember, $fb = 0){
//something here
} 
```

我这样称呼它：

```
$retval = $session->login($fbuserid, , , 1); 
```

我已经为此工作了 2 个多小时，我刚刚收到这个错误，所以我不知道它有多复杂，因为我看不出代码有什么问题！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:48:14.250

`null`如果要跳过参数，请通过。你不能把它留空。只`list`支持这一点，那只是因为它是一个构造而不是一个函数。

# mysql - MYSQL - 无序文本的搜索字段

> ID：10350075
> 
> 赞同：0
> 
> 时间：2012-04-27T11:47:56.270
> 
> 标签：mysql

我在尝试查询以下数据时遇到问题：

```
id. | name | type

 1\.    bob | a 
 2\.    sam | ab
 3\.    jim | abc
 4\.  sarah | ad
 5\.   john | a
 6\.    eve | bca
 7\.  nikki | ca 
```

我正在尝试根据以下输入编写 MySQL 查询：

```
a,
ac,
b*,
ac* 
```

我想返回以下名称：

```
bob
john
sam
jim
eve
nikki 
```

**分解：**

```
a  = bob, john
ac = nikki  
b* = sam, jim, eve
ac*= jim, eve, nikki 
```

**解释：**

```
a  = find results that are JUST a
ac = find results that contain ONLY an a AND c
b* = find results which contains a b
ac*  find results that contain at least an a and a c 
```

可以看出，类型列可以包含不同顺序的类型信息（并不总是增加）。

我确信这可以通过将类型列拆分为等来完成，然后`type_a`在每个列中添加一个。但这可能会上升，我不想在我的桌子上多放 26 列！`type_b``bool``z`

这是否可以在单个查询中完成，如果可以，任何帮助将不胜感激！

对不起标题我不知道该怎么称呼它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:02:39.710

```
-- ac*, ac, a, b*

SELECT  *
FROM    mytable
WHERE   (
        type RLIKE 'a'
        AND type RLIKE 'c'
        )
        OR
        (
        type RLIKE 'a'
        AND type RLIKE 'c'
        AND NOT type RLIKE '[^ac]'
        )
        OR
        (
        type RLIKE 'a'
        AND NOT type RLIKE '[^a]'
        )
        OR
        (
        type RLIKE 'b'
        ); 
```

不过，这不会使用任何索引。

如果您的表是`MyISAM`，您可以存储如下类型：

```
id   name     type
7    nikki    a c 
```

（注意空格）并使用`FULLTEXT`功能：

```
CREATE FULLTEXT INDEX fx_mytable_type ON mytable (type);

-- ac*
SELECT  *
FROM    mytable
WHERE   MATCH(type) AGAINST '+"a" + "c"' IN BOOLEAN MODE);

-- ac
SELECT  *
FROM    mytable
WHERE   MATCH(type) AGAINST '+"a" + "c"' IN BOOLEAN MODE);
        AND NOT TYPE RLIKE '[^ ac]' -- note the space 
```

设置`@@ft_min_word_len = 1`为此工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:03:31.243

您可以使用[正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)：

```
SELECT name FROM your_table WHERE
     type RLIKE '^a+$'                            -- only 'a'
  OR type RLIKE '^((a[ac]*c)|(c[ac]*a))[ac]*$'    -- only & both 'a' AND 'c'
  OR type RLIKE 'b'                               -- at least one 'b'
  OR type RLIKE '(a.*c)|(c.*a)'                   -- at least 'a' and 'c'
; 
```

# wix - Windows 服务未在主要升级-WIX 上安装

> ID：10350077
> 
> 赞同：0
> 
> 时间：2012-04-27T11:48:07.180
> 
> 标签：wix, wix3.5

我通过 msi 包（WIX）在机器上安装了我的服务。但是当重大升级完成时，服务被卸载但没有安装。

这是我的代码：

```
 <Component Id="abc" Guid="{E64A8CDD-816F-4544-9ACD-A2E367F7758A}">
              <File Id="EventTraceService.exe" Source="..\..\..\..\Products\abc.exe"  Vital="yes" KeyPath ="yes"/>
              <File Source="..\..\..\..\Products\abc.exe.config" Vital="yes" />
              <ServiceInstall
              Id="ServiceInstaller"
              Type="ownProcess"
              Vital="yes" 
              Name="abc"
              DisplayName="abc"
              Description="Monitoring and management of Trace"
              Start="auto"
              Account="LocalSystem"
              Interactive="yes"
              ErrorControl="normal"
                  />
<ServiceControl Id="StartService" Start="install" Stop="uninstall" Remove="uninstall" Name="abc" Wait="yes" /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:31:52.990

一种可能的解释是您更改了组件的 GUID。结果，相同资源的（不同版本）由不同的组件管理。

从 Windows 安装程序文档中了解[组件规则被破坏时会发生什么](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372795%28v=vs.85%29.aspx)：

> **作者在两个不同的组件中包含相同的资源。**
> 
> 如果两个组件具有相同名称和位置的资源，并且两个组件都安装到同一个文件夹中，则删除任何一个组件都会删除公共资源，这会损坏其余组件。
> 
> *   卸载任一组件会删除资源并破坏另一个组件。
> *   组件引用计数机制损坏。

这似乎与您的症状相符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:09:01.240

如果服务 EXE 在两个包中具有相同的版本，则由于[文件版本控制规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368599%28v=vs.85%29.aspx)而发生这种情况。这是一篇包含更多详细信息的文章：http: [//setupanddeployment.com/windows-installer-bugs/missing-files-upgrade/](http://setupanddeployment.com/windows-installer-bugs/missing-files-upgrade/)

# c# - 删除 C# 中所有出现的转义序列字符

> ID：10350079
> 
> 赞同：1
> 
> 时间：2012-04-27T11:48:16.513
> 
> 标签：c#, regex, string, escaping

我需要删除字符串中出现的所有转义字符。

例子：

```
string str = "\n \b \t \r Hello \n \b \t \r"; 
```

预期输出：您好。

**注意：**输入中的转义字符很少。我需要在输入中找到转义字符时删除它。

我试过了`Regex.Unescape(str)`。但我没有解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:35:11.443

你需要更换这个

```
"\\[bntr]" 
```

在您的输入字符串中到处都有一个空字符串，除非有其他限制，否则您应该没问题 - 在这种情况下，请告诉我。
您可能还想在之后替换额外的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:56:58.487

你可以试试白名单正则表达式

```
^[\b \t \n \r]*$ 
```

# jquery - 如何在 jquery 上运行 if-else 语句？

> ID：10350082
> 
> 赞同：0
> 
> 时间：2012-04-27T11:48:34.133
> 
> 标签：jquery, jquery-selectors

我有下面的代码。现在我想对其运行 if-else 语句，但它不起作用。有什么想法吗？

```
var num1 = $('#id1').val(); 
var num2 = $('#id2').val();

var newVal = (num1+2)*(num2/4);
var nextVal =(num1+4)*(num2/2);
var newArr = new Array();
newArr.push(newVal);
newArr.push(nextVal);

newArr.sort();

if(newArr.get(0)==newVal)
$("body").html("<p>works fine!</p>");
else $("body").html("<p>works awfully!</p>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:50:54.773

只需使用`newArr[0]`而不是`newArr.get(0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:05:14.897

`val`将返回一个字符串，因此您可能必须转换为数字。您可以使用一元加号运算符：

```
var num1 = +$('#id1').val(); // Now you get 5 instead of "5" 
var num2 = +$('#id2').val();

//The problem shows up here when you are doing string concatenation instead of addition in the first set of parenthesis
var newVal = (num1+2)*(num2/4);

if(newArr[0]==newVal) // .get is for jQuery collections, just use brackets on an array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:52:06.640

您在这一行用大写 V 声明了“Var”：

```
Var newVal = (num1+2)*(num2/4); 
```

此外，使用 [index] 访问数组的元素，而不是 .get(index)

这是编辑后的代码：

```
 var num1 = 50;   
  var num2 = 100;

  var newVal = parseInt((num1+2)*(num2/4));
  var nextVal =parseInt((num1+4)*(num2/2));
  var newArr = new Array();
  newArr.push(newVal);
  newArr.push(nextVal);

  newArr = newArr.sort(function(a,b){return a - b});

  if(newArr[0]==newVal)
    $("body").html("<p>works fine!</p>");
  else
    $("body").html("<p>works awfully!</p>");​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:52:47.877

试试这个

```
var num1 = 50;   
  var num2 = 100;

  var newVal = (num1+2)*(num2/4);
  var nextVal =(num1+4)*(num2/2);
  var newArr = new Array();
  newArr.push(newVal);
  newArr.push(nextVal);

  newArr.sort();

  if(newArr[0]==newVal)
    $("body").html("<p>works fine!</p>");
  else
    $("body").html("<p>works awfully!</p>"); 
```

# php - 如何在 PHP 中读取 .Net Web 服务？

> ID：10350083
> 
> 赞同：0
> 
> 时间：2012-04-27T11:48:39.523
> 
> 标签：php, .net, web-services

我已成功阅读 WSDL 表单 SoapClient。我尝试将值传递给 web 方法并读取结果：

```
 $client = new SoapClient("restaurant.asmx?wsdl");
 $param = array('search_keywords'=>$search_text); 
 $result =  $client->__soapCall('getRestaurantsASP',$param);
 print_r($result); 
```

我收到了这个错误：

```
Fatal error: Uncaught SoapFault exception: [soap:Server]
System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> 
System.Data.SqlClient.SqlException: Invalid object name 'basic_info_table'. at 
System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean   
breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 
exception, Boolean breakConnection) at 
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() at 
System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, 
SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject 
stateObj) at System.Data.SqlClient.SqlDataReader.ConsumeMetaData() at 
System.Data.SqlClient.SqlDataReader.get_MetaData() at 
System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior 
runBehavior, String resetOptionsString) at 
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, 
RunBehavior runBehavior in E:\webareas\gs937\aspservice.php on line 73 
```

如何将参数发送到 Web 方法并检索值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:09:19.643

正如 DaveRandom 所建议的，问题似乎出在服务本身，而问题出在用于服务的 SQL 查询中。

尝试使用 SoapUI（您可以从[http://sourceforge.net/projects/soapui/files/](http://sourceforge.net/projects/soapui/files/)下载它）并从那里执行服务方法。

SoapUI 是用于测试 Web 服务的中立客户端。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:14:58.190

我不得不补充：

```
<webServices>
<protocols>
  <add name="HttpGet"/>
  <add name="HttpPost"/>
  <add name="HttpSoap"/>
</protocols>
</webServices> 
```

在 Web.config 文件中以使事情正常进行。

# android - 如何在coverflow图像的点击事件上从sdcard播放音乐

> ID：10350084
> 
> 赞同：1
> 
> 时间：2012-04-27T11:48:41.033
> 
> 标签：android, onclick, sd-card, coverflow

我按照coverflow实施的链接

[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

在这里，我想通过 onclick 事件播放 sdcard 中的歌曲，我的意思是单击封面流的每个图像我想从 sd 卡中播放不同的歌曲

请分享您的想法。

帮助总是受到赞赏。

提前致谢。

```
 coverFlow.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(CoverAdapterView<?> parent, View view,
                int position, long id) {
            // TODO Auto-generated method stub

               if (position == 0) {

              // play song number1

            } else if (position == 1) {

            // play song number 2

            }

        }
    }); 
```

我正在关注此代码

```
 public class Entertainment extends Activity {
ListView musiclist;
TextView CurrentPlying;
Cursor musiccursor;
int music_column_index;
int count;
MediaPlayer mMediaPlayer;
int seekBarState =0;
ImageButton rewindButton,playButton,forwardButton,stopButton;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.entertainment);
    list_of_media_files();
    Gallery addsgallery = (Gallery) findViewById(R.id.addsgallery);   
    addsgallery.setAdapter(new AddsViewAdaptor(this)); 
    rewindButton = (ImageButton) findViewById(R.id.rewind);
    playButton = (ImageButton) findViewById(R.id.play);
    forwardButton = (ImageButton) findViewById(R.id.forward);
    stopButton = (ImageButton) findViewById(R.id.stop);
    playButton.setOnClickListener(new PlayButtonListner());
    rewindButton.setOnClickListener(new RewindButtonListner());
    forwardButton.setOnClickListener(new ForwardButtonListner());
    stopButton.setOnClickListener(new StopButtonListner());
}
class PlayButtonListner implements View.OnClickListener{
    public void onClick(View v) {
        try{
            if (mMediaPlayer.isPlaying()) {

                mMediaPlayer.pause();
            }else{
                mMediaPlayer.start();
            }

        }
        catch(Exception ex){
            Log.i("Exception", "Exception in mediaplayer e = " + ex); 
        }
    }
}
public void onInit(int status) {

}

private void list_of_media_files() {
    //System.gc();

    String[] proj = { MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Video.Media.SIZE };
    musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            proj, null, null, null);
    count = musiccursor.getCount();
    musiclist = (ListView) findViewById(R.id.PhoneMusicList);
    musiclist.setAdapter(new MusicAdapter(this));

    musiclist.setOnItemClickListener(musicgridlistener);
    mMediaPlayer = new MediaPlayer();

}

private OnItemClickListener musicgridlistener = new OnItemClickListener() {

    public void onItemClick(AdapterView parent, View v, int position,
            long id) {
        //System.gc();
        music_column_index = musiccursor
        .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
        musiccursor.moveToPosition(position);
        String filename = musiccursor.getString(music_column_index);
        //   CurrentPlying =(TextView) findViewById(R.id.currentSong);
        //CurrentPlying.setText(music_column_index);
        try {
            if (mMediaPlayer.isPlaying()) {
                mMediaPlayer.reset();
            }
            mMediaPlayer.setDataSource(filename);
            mMediaPlayer.prepare();
            mMediaPlayer.start();

        } catch (Exception e) {

        }

    }
};

public class MusicAdapter extends BaseAdapter {
    private Context mContext;

    public MusicAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        System.gc();
        TextView tv = new TextView(mContext);
        String id = null;
        if (convertView == null) {
            music_column_index = musiccursor
            .getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
            musiccursor.moveToPosition(position);
            id = musiccursor.getString(music_column_index);
            music_column_index = musiccursor
            .getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
            musiccursor.moveToPosition(position);
            id += " Size(KB):" + musiccursor.getString(music_column_index);
            tv.setText(id);
        } else
            tv = (TextView) convertView;
        return tv;
    }
}

class RewindButtonListner implements View.OnClickListener{
    public void onClick(View v) {
        try{
            if (mMediaPlayer.isPlaying()) {
                seekBarState=mMediaPlayer.getCurrentPosition();
                mMediaPlayer.seekTo(seekBarState-300);
            }else{
                mMediaPlayer.start();
            }

        }
        catch(Exception ex){
            Log.i("Exception", "Exception in mediaplayer e = " + ex); 
        }
    }
}
class ForwardButtonListner implements View.OnClickListener{
    public void onClick(View v) {
        try{
            if (mMediaPlayer.isPlaying()) {
                seekBarState=mMediaPlayer.getCurrentPosition();
                mMediaPlayer.seekTo(seekBarState+300);
            }else{
                mMediaPlayer.start();
            }

        }
        catch(Exception ex){
            Log.i("Exception", "Exception in mediaplayer e = " + ex); 
        }
    }
}
class StopButtonListner implements View.OnClickListener{
    public void onClick(View v) {
        try{
            if (mMediaPlayer.isPlaying()) {
                mMediaPlayer.stop();
                mMediaPlayer.reset();
            };

        }
        catch(Exception ex){
            Log.i("Exception", "Exception in mediaplayer e = " + ex); 
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:53:35.790

首先从 sdcard 制作列表或歌曲列表数组，然后使用**位置传递歌曲**

```
coverFlow.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(CoverAdapterView<?> parent, View view,
                int position, long id) {
            // TODO Auto-generated method stub

              playSong(list[position]); <---
        }
    }); 
```

# java - 是否可以使用 BufferedReader 反转文件的每一行？

> ID：10350086
> 
> 赞同：2
> 
> 时间：2012-04-27T11:48:50.917
> 
> 标签：java, bufferedreader

假设我正在导入一个包含行的文件。我想通过递归输出序列的尾部，然后是序列的头部来反转这个文件。这可能使用 BufferedReader 吗？还是我首先需要将这些行导入列表？我必须用递归来做。

例如，我有一个包含以下内容的文件：

```
你好
我的
姓名
是
标记

```

我希望它在另一个文件中以相反的顺序输出：

```
标记
是
姓名
我的
你好

```

我想我已经正确地创建了递归方法，虽然它编译得很好，但是程序运行后输出文件是空的。

```
public void Reverse(BufferedReader br, PrintWriter pw) {
    try {
        String headLine = br.readLine();
        if (headLine != null) {
            Reverse(br, pw);
            pw.println(br.readLine());
        }
        pw.println(headLine);      
    } //try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:57:44.230

> 它必须使用递归

这是一个递归解决方案：

1.  从文件中读取一行；
2.  递归地反转文件的其余部分；
3.  写出在步骤 1 中读取的行。

由于这是家庭作业，我留给您弄清楚如何将其转换为实际的 Java 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:04:03.957

您可能不想直接从头和尾的角度考虑这一点，而不是直接给您解决方案。用线条来思考它，然后阅读[这个 SO question](https://stackoverflow.com/questions/859562/whats-the-best-way-to-recursively-reverse-a-string-in-java)的答案和讨论。您可以应用相同的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:01:24.893

无论如何，将所有内容读入 a`LinkedList`然后对其进行递归。只是，Collection Framework 对这类工作来说是一个非常繁琐的搭配。

# forms - Symfony2：通过发布请求删除实体（需要改进）

> ID：10350093
> 
> 赞同：0
> 
> 时间：2012-04-27T11:49:41.510
> 
> 标签：forms, symfony, controller, entity

我需要对删除实体的实际方法进行一些改进：

```
 public function deleteAction($path)
    {
    $form = $this->createFormBuilder(array('path' => $path))
        ->add('path')
        ->setReadOnly(true)
        ->getForm();

    if ($this->getRequest()->getMethod() === 'POST') {
        $form->bindRequest($this->getRequest());

        if ($form->isValid()) {
            $image = $this->getImageManager()->findImageByPath($path);
            $this->getImageManager()->deleteImage($image);

            return $this->redirect($this->generateUrl('AcmeImageBundle_Image_index'));
        }
    }

    return $this->render('AcmeImageBundle:Image:delete.html.twig', array(
        'form' => $form->createView(),
    ));
} 
```

我在写作时已经发现了两个改进：

1.  控制器中的额外方法中的 CreateFormBuilder

2.  隐藏字段并提供额外的图像实体以进行渲染

还有什么我可以做得更好的吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:18:32.630

（我的回答对于评论来说太长了，所以我在这里添加）

首先，您必须创建一个 Type 文件（通常在 YourApp\YourBundle\Form\yourHandler.php 中），如果您不知道，可以将一些基本代码放入其中：

```
<?php
namespace ***\****Bundle\Form;

use Symfony\Component\Form\Form;
use Symfony\Component\HttpFoundation\Request;
use Doctrine\ORM\EntityManager;

use ***\****Bundle\Entity\your_entity;

class *****Handler
{
protected $form;
protected $request;
protected $em;

public function __construct(Form $form, Request $request, EntityManager $em)
{
    $this->form    = $form;
    $this->request = $request;
    $this->em      = $em;
}

public function process()
{
    if( $this->request->getMethod() == 'POST' )
    {
        $this->form->bindRequest($this->request);

        if( $this->form->isValid() )
        {
            $this->onSuccess($this->form->getData());

            return true;
        }
    }

    return false;
}

public function onSuccess(your_entity $object)
{
    // Make your stuff here (remove,....)
}
} 
```

在您的控制器中，我只是这样称呼它：

```
if (!empty($_POST))
{
    $formHandler = new *****Handler($my_form, $this->get('request'), $this->getDoctrine()->getEntityManager());
    $formHandler->process();
} 
```

希望我足够清楚

# c# - 按引用的字典值

> ID：10350096
> 
> 赞同：5
> 
> 时间：2012-04-27T11:49:59.040
> 
> 标签：c#

在我们的应用程序中，我们有一些来自翻译的字符串可以包含变量。例如在`Can i have a {beverage}?`该`{beverage}`部分应替换为一个变量。我当前的实现通过拥有所有变量的名称和值的字典，并替换正确的字符串来工作。但是我想通过引用注册变量，这样如果值改变了，结果字符串也会改变。通常使用关键字传递参数`ref`就可以了，但我不确定如何将它们存储在字典中。

翻译解析器：

```
static class TranslationParser
{
    private const string regex = "{([a-z]+)}";
    private static Dictionary<string, object> variables = new Dictionary<string,object>();

    public static void RegisterVariable(string name, object value)
    {
        if (variables.ContainsKey(name))
            variables[name] = value;
        else
            variables.Add(name, value);
    }

    public static string ParseText(string text)
    {
        return Regex.Replace(text, regex, match =>
        {
            string varName = match.Groups[1].Value;

            if (variables.ContainsKey(varName))
                return variables[varName].ToString();
            else
                return match.Value;
        });
    }
} 
```

主文件

```
 string bev = "cola";
        TranslationParser.RegisterVariable("beverage", bev);
        //Expected: "Can i have a cola?"
        Console.WriteLine(TranslationParser.ParseText("Can i have a {beverage}?")); 
        bev = "fanta";
        //Expected: "Can i have a fanta?"
        Console.WriteLine(TranslationParser.ParseText("Can i have a {beverage}?")); 
```

这有可能吗，还是我只是错误地解决了这个问题？我担心唯一的解决方案会涉及不安全的代码（指针）。

所以简而言之，我想在字典中存储一个变量，更改原始变量并从字典中获取更改后的值。就像您对`ref`关键字所做的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:19:06.840

另一种使用包装器的方法。每次注册变量时，您都可以包装变量。

```
class ObjectWrapper
{
    private object _value;

    public ObjectWrapper(object value) 
    {
        _value = value;
    }

    public override string ToString()
    {
        return _value.ToString();
    }
}

static class TranslationParser
{
    private const string regex = "{([a-z]+)}";
    private static Dictionary<string, ObjectWrapper> variables = new Dictionary<string, ObjectWrapper>();

    public static void RegisterVariable(string name, object value)
    {
        var wrapped = new ObjectWrapper(value);
        if (variables.ContainsKey(name))
            variables[name] = wrapped;
        else
            variables.Add(name, wrapped);
    }

    public static string ParseText(string text)
    {
        return Regex.Replace(text, regex, match =>
        {
            string varName = match.Groups[1].Value;

            if (variables.ContainsKey(varName))
                return variables[varName].ToString();
            else
                return match.Value;
        });
    }
} 
```

**编辑：**

但实际上，我认为如果没有不安全的代码，就不可能以您想要的方式跟踪变量。值类型和对存储在堆栈中的引用类型的引用，如果您只是替换引用，它不会影响堆中的真实对象（对您存储在字典中的那个对象的引用）。所以你需要有对堆栈内存的引用（比如指针）。

**再次编辑：我错了！**

可以使用表达式跟踪任何变量：

```
class Wrapper
{
    private readonly Dictionary<string, MemberExpression> _registrations = 
        new Dictionary<string, MemberExpression>();

    public void Register<T>(string name, Expression<Func<T>> expr)
    {
        _registrations[name] = (MemberExpression)expr.Body;
    }

    public object GetValue(string name)
    {
        var expr = _registrations[name];
        var fieldInfo = (FieldInfo)expr.Member;
        var obj = ((ConstantExpression)expr.Expression).Value;
        return fieldInfo.GetValue(obj);
    }
}
private static void Main(string[] args)
{
    var wrapper = new Wrapper();
    int x = 0;
    storage.Register("x", () => x);
    Console.WriteLine(wrapper.GetValue("x")); //0
    x = 1;
    Console.WriteLine(wrapper.GetValue("x")); //1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:00:16.720

在提供的代码中，我看到

```
string bev = "cola";
TranslationParser.RegisterVariable("beverage", bev);
//Expected: "Can I have a cola?"
Console.WriteLine(TranslationParser.ParseText("Can I have a {beverage}?")); 
bev = "fanta";
//Expected: "Can I have a fanta?" 
```

*首先*你注册了 like a 的替代品，`{beverage}`但`"cola"`在*运行时*想把它改成另一个: `"fanta"`. Thie 让我思考：为什么不只是一个`ParseText`函数来接受一个可选参数，这将“赢得”对保存的参数？

像这样：

```
public static string ParseText(string text, string preferedValue=null)
{
        return Regex.Replace(text, regex, match =>
        {
            string varName = match.Groups[1].Value;

            if (variables.ContainsKey(varName))
            {
                if(!string.IsNullOrEmpty(preferedValue)) //IF THERE ISPREFERED VALUE                                                         
                       return preferedValue;             //RETURN THAT ONE

                return variables[varName].ToString();
            }
            else
                return match.Value;
        });
} 
```

# facebook - 我如何找到 Facebook Open Graph Activity 插件

> ID：10350106
> 
> 赞同：-1
> 
> 时间：2012-04-27T11:50:31.153
> 
> 标签：facebook, facebook-opengraph, facebook-timeline

我开发了一个使用 Facebook Open Graph 方法的网站。但是当我提交它时，Facebook 给我回了一条消息，我必须在我的网站上放一些东西，如下图所示

![社交插件](../Images/fb26349d1c77d670ba2e828ecc7660d3.png)

我在哪里可以找到这样的插件？

我只找到这个；[https://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/) 但它没用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:04:00.960

目前没有这样的插件可用。你必须自己开发一个。

您应该使用 facebook connect 并跟踪所有这些操作，并将它们提交到图形 API。如果是这样，您只需要添加此开/关按钮和活动日志。

这样用户就可以控制他的活动......

# php - 带有进度条的 jquery.form.js 文件上传，服务器端 php 脚本中有什么？

> ID：10350108
> 
> 赞同：0
> 
> 时间：2012-04-27T11:50:46.813
> 
> 标签：php, jquery, file-upload, server-side-scripting

我正在尝试设置文件上传功能，如[http://jquery.malsup.com/form](http://jquery.malsup.com/form)。但是带有进度条的文件上传示例没有服务器端脚本示例。

我所知道的就是处理 $_FILES、$_POST、清理和保存；但无法弄清楚如何将进度条数据从服务器发送到浏览器。我不确定 uploadProgress 如何从示例[http://www.malsup.com/jquery/form/progress2.html中的 file_echo2.php 获取数据](http://www.malsup.com/jquery/form/progress2.html)

有人可以提示我如何在上传时捕获文件上传进度吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:10:57.913

好吧，服务器端脚本不需要做任何事情！在客户端 javascript 上，挂钩一个函数来处理 uploadProgress 事件。uploadProgress 返回值事件、位置、总计、百分比。使用百分比值来显示进度条或您希望它表现的任何其他方式。

[我对此特别关注（在plupload](http://www.plupload.com)、[uploadify](http://www.uploadify.com)等多种选择中），因为它不使用任何 flash 文件。现在我了解到这不需要特殊的服务器端脚本来处理是一个巨大的优势。

非常感谢 malsup 和[jquery 插件的更多细节](http://http://www.malsup.com/jquery/form)

# java - Array 和 ArrayList 获取素数有什么区别？

> ID：10350115
> 
> 赞同：6
> 
> 时间：2012-04-27T11:51:17.010
> 
> 标签：java, arrays, arraylist

我正在解决关于素数的问题，我找到了使用数组的解决方案，但我想使用数组列表来解决一些问题，其中之一就是要很好地理解 Arraylist。但是我发现当我使用arraylist时结果不一样，这里有2个代码：

//使用数组

```
import java.util.Arrays;
public class Prime {
    public static void main(String[] args) {
        primeNumber(100);
    }
    public static void primeNumber(int end) {
        boolean primeNumbers[] = new boolean[end]; 
        for (int i = 0; i < end; i++) {
            primeNumbers[i] = true;
        }
        for (int i = 2; i < primeNumbers.length; i++) {
            if (primeNumbers[i] ) {
                for (int j = i+i; j < primeNumbers.length; j += i) {
                    primeNumbers[j]= false;
                }
            }
        }
        for (int j = 2; j < primeNumbers.length; j++) {
            if (primeNumbers[j]) {
                System.out.println(j);

            }
        }   
    }
} 
```

//使用数组列表

```
import java.util.ArrayList;
public class Prime {
    public static void main(String[] args) {
        primeNumber(100);
    }

    public static void primeNumber(int end) {
        ArrayList<Boolean> primeNumbers = new ArrayList<Boolean>(); 
        for (int i = 0; i < end; i++) {
            primeNumbers.add(i,true);
        }
        for (int i = 2; i < primeNumbers.size(); i++) {
            if (primeNumbers.get(i) ) {
                for (int j = i+i; j < primeNumbers.size(); j += i) {
                    primeNumbers.add(j, false);
                }
            }
        }
        for (int j = 2; j < primeNumbers.size(); j++) {
            if (primeNumbers.get(j)) {
                System.out.println(j);

            }
        }

    }
} 
```

我能知道我在使用 Arraylist 时做错了什么吗？如果我想使用 Arraylist 来获得相同的结果，我应该怎么做。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:55:01.283

代替

```
primeNumbers.add(j, false); 
```

你应该使用

```
primeNumbers.set(j, false); 
```

因为[`add()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29)在指定位置添加一个新元素（意味着 ArrayList 增加一个元素），但[`set()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#set%28int,%20E%29)只在指定位置设置元素的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T11:54:59.187

```
primeNumbers.add(j, false); 
```

**将元素添加**到数组列表中，并将索引> =`j`的所有元素向右移动[包括前一个元素`j`]，同时：

```
primeNumbers[j]= false 
```

**覆盖现有元素** `j`，并且不移动元素。

您可能正在寻找[`ArrayList.set()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29)而不是[`ArrayList.add()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-01T09:07:34.003

**Array**和**ArrayList**的区别如下：

1.  数组的实现是简单的固定大小的数组，而 ArrayList 的实现是动态大小的数组。
2.  Array 可以同时包含基元和对象，但 ArrayList 只能包含对象元素
3.  您不能将泛型与数组一起使用，但 ArrayList 允许我们使用泛型来确保类型安全。
4.  您可以使用*长度*变量来计算数组的长度，但使用*size()* 方法来计算 ArrayList 的大小。
5.  Array 使用赋值运算符存储元素，但 ArrayList 使用*add()*插入元素。

# vb.net - 交换两个整数而不使用第三个变量

> ID：10350118
> 
> 赞同：9
> 
> 时间：2012-04-27T11:51:40.627
> 
> 标签：vb.net, algorithm

我有一个任务，我需要在不使用第三个变量的情况下交换两个整数。我不知道该怎么做。我将如何编码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T11:58:19.190

是的，有可能：

```
Dim var1 = 1
Dim var2 = 2
var1 = var1 + var2
var2 = var1 - var2
var1 = var1 - var2 
```

但是你为什么需要它？代码变得深奥。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T11:56:53.960

让我们假设

```
a = 10; 
b = 20; 

a = a + b; // a = 30

b = a - b; // b = 10
a = a - b; // a = 20 
```

值交换。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T11:57:59.067

阅读“[异或交换算法](http://en.wikipedia.org/wiki/XOR_swap_algorithm)”。

你可以在这里找到答案：

[http://www.java2s.com/Tutorial/VB/0040__Data-Type/Swaptwointegerswithoutusingathird.htm](http://www.java2s.com/Tutorial/VB/0040__Data-Type/Swaptwointegerswithoutusingathird.htm)

```
firstValue = firstValue Xor secondValue
secondValue = firstValue Xor secondValue
firstValue = firstValue Xor secondValue 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T12:04:09.720

```
 Dim a As Integer
 Dim b As Integer
 a= 1
 b= 2

 a = a Xor b
 b = a Xor b
 a = a Xor b 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T11:57:59.283

要交换两个数值变量，请这样做

```
a = a + b;
b = a - b;
a = a - b; 
```

或者

```
a = a xor b;
b = a xor b;
a = a xor b; 
```

其中 a 和 b 是要交换的变量

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-18T18:13:35.420

理论上3种方式

```
a = 4 , b = 5 
```

**1\. 使用异或**

```
a = a XOR b = 4 XOR 5 = 9     
b = a XOR b = 9 XOR 5 = 4
a = a XOR b = 9 XOR 4 = 5 
```

**2\. 使用 +,-**

```
a = a+b = 4+5 = 9     // should not overflow
b = a-b = 9-5 = 4
a = a-b = 9-4 = 5 
```

**3\. 使用 *,/**

```
a = a*b = 4*5 = 20    // should not overflow
b = a/b = 20/5 = 4    // should not overflow and should not be irrational number
a = a/b = 20/4 = 5    // should not overflow and should not be irrational number 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T12:31:58.357

上面的 Xor 或 a+b 算法工作并且是最好的方法，但只是一个奇怪的方法的例子。仍然不确定您为什么要这样做。只需构建一个提供两个值 ByRef 的函数并让它执行标准交换方法。

```
Dim newList as New List(Of Integer)
newList.Add firstvalue
newList.Add secondValue
newList.Reverse
secondValue = newList.Item(0)
firstValue = newList.Item(1) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-06T23:54:11.340

```
 Take two text boxes and a command box.In command box type this code.  
    text1.text=val(text1.text) + val(text2.text)      
    text2.text=val(text1.text) - val(text2.text)  
    text1.text=val(text1.text) - val(text2.text) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-27T03:07:53.697

[检查为您编写的链接](http://javaexplorer03.blogspot.in/2016/02/swapping-of-two-numbers-without-using.html)

**方法#1。**

加减法

```
Integer a, b
read a and b
a= a+b;
b=a-b;
a=a-b; 
```

**问题：**

当数字总和超出整数范围时，结果不正确。

**方法#2。**

乘除法

```
Integer a, b
read a and b
a=a*b;
b=a/b;
a=a/b; 
```

**问题：**

1.  如果 a*b 的值超出整数范围。
2.  如果 a 或 b 的值为零，那么它会给出错误的结果。

**方法#3。**

异或法

```
Integer a , b
read a and b
a=a^b;
b=a^b;
a=a^b; 
```

**解决这个问题的最佳方法，没有任何陷阱。**

# java - 无法与 WPA2 安卓连接

> ID：10350119
> 
> 赞同：1
> 
> 时间：2012-04-27T11:51:47.260
> 
> 标签：java, android, wifi

我正在使用以下代码在 android 中连接 WPA2（我可以连接 WEP 和 WPA）。但我只得到“扫描”状态。而且我无法连接到 WPA2 网络。你能告诉我我需要做哪些更改才能使此代码与 wpa2 WiFi 相关。

```
private boolean saveWepConfigAndEnableNetwork(String ssid, String pass) {
    isAlreadyPresend = false;
    WifiConfiguration wc = new WifiConfiguration();
    wc.SSID = "\"" + ssid + "\""; // IMP! This should be in Quotes!!
    wc = checkPreviousConfiguration(wc);
    wc.hiddenSSID = true;
    wc.status = WifiConfiguration.Status.DISABLED;
    wc.priority = 40;
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
    wc.preSharedKey = "\"" + pass + "\"";

    wc.wepKeys[0] = "\"" + pass + "\""; // This is the WEP Password
    wc.wepTxKeyIndex = 0;

    boolean res1 = wifi.setWifiEnabled(true);
    int res = 0;
    if(isAlreadyPresend){
        res = wifi.addNetwork(wc);
    }else{
        res = wifi.updateNetwork(wc);
    }

    Log.d("WifiPreference", "add Network returned " + res);
    boolean es = wifi.saveConfiguration();
    Log.d("WifiPreference", "saveConfiguration returned " + es);
    boolean b = wifi.enableNetwork(res, true);
    Log.d("WifiPreference", "enableNetwork returned " + b);
    return b;
}

// Check if this SSID is already stored. If it is, return that
// configuration.
// If not, return the configuration being tested.
public WifiConfiguration checkPreviousConfiguration(WifiConfiguration wc) {
    List<WifiConfiguration> configs = wifi.getConfiguredNetworks();
    for (WifiConfiguration config : configs) {
        if (config.SSID.equals(wc.SSID)){
            isAlreadyPresend = true;
            return config;
        }
    }
    return wc;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:40:37.527

这是我连接 WPA2 的代码

```
// Adding a WPA or WPA2 network
public static void changeNetworkWPA(WifiManager wifiManager, String ssid, String password) {
    WifiConfiguration config = changeNetworkCommon(ssid);
    // Hex passwords that are 64 bits long are not to be quoted.
    config.preSharedKey = quoteNonHex(password, 64);
    config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    config.allowedProtocols.set(WifiConfiguration.Protocol.WPA); // For WPA
    config.allowedProtocols.set(WifiConfiguration.Protocol.RSN); // For WPA2
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP);
    config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
    updateNetwork(wifiManager, config);
} 
```

代码：来自[Zxing 库](https://github.com/zxing/zxing/blob/master/android/src/com/google/zxing/client/android/wifi/WifiConfigManager.java)

# jqplot - JQPlot图表库程序执行

> ID：10350128
> 
> 赞同：1
> 
> 时间：2012-04-27T11:52:30.220
> 
> 标签：jqplot

我也在本地尝试上面的代码。

这是代码：

```
<html>
  <head>
    <script type="text/javascript" src="../JQuery/excanvas.js"></script> 
    <script type="text/javascript" src="../JQuery/jquery.js"></script> 
    <script type="text/javascript" src="../JQuery/jquery.jqplot.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.categoryAxisRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.barRenderer.js"></script> 

    <script type="text/javascript" src="../JQuery/jqplot.categoryAxisRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.canvasTextRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.canvasAxisLabelRenderer.min.js"></script> 
    <link rel="stylesheet" type="text/css" href="../JQuery/jquery.jqplot.css" />

    <script type="text/javascript"> 
      $(document).ready(function(){  
        var plot1 = $.jqplot ('chart3', [[3,7,9,1,4,6,8,2,5]]);
      }); 
    </script>
  </head>
  <body>
    <div id="chart3" style="width:400px; height:300px;"></div>
  </body>
</html> 
```

但是当我运行这段代码时，它给了我“excanvas.js”文件的javascript错误。像“parentnode”为空或不是对象。我正在使用 IE8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:19:03.150

我尝试了代码，它工作正常。老实说，我在 ie9 中运行它，兼容模式为 ie8，然后是 ie7（因为我定期更新我的浏览器，我建议这样做并要求客户也这样做），它运行良好。

我可能希望您在这里遇到的唯一问题是这些脚本：

```
 <script type="text/javascript" src="../JQuery/jqplot.categoryAxisRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.barRenderer.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.categoryAxisRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.canvasTextRenderer.min.js"></script> 
    <script type="text/javascript" src="../JQuery/jqplot.canvasAxisLabelRenderer.min.js"></script> 
```

...位于**插件文件夹**中，如果您`jqPlot`从他们的网站下载了该文件夹，则应该拥有该文件夹。

要**快速测试这是否是问题**，您可以简单地删除上述脚本，并且代码应该可以正常工作，因为它根本不使用它们。

# functional-programming - 是否有任何函数式编程语言具有用于自然语言处理的重要库？

> ID：10350129
> 
> 赞同：0
> 
> 时间：2012-04-27T11:52:36.320
> 
> 标签：functional-programming, nlp

我正在使用 NLTK for Python 进行自然语言处理。

我发现自己更多地使用函数式编程，并且正在考虑切换到函数式语言。但是，我需要一个好的 NLP 库，至少可以与 NLTK 相媲美。

你知道一种具有良好 NLP 库的函数式编程语言吗？我发现 Haskell 社区中有一些 NLP 活动，但与 NLTK 相比，它似乎仍处于起步阶段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:04:12.377

哈斯克尔：[http ://www.haskell.org/haskellwiki/Applications_and_libraries/Linguistics](http://www.haskell.org/haskellwiki/Applications_and_libraries/Linguistics)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T18:19:21.677

Scala 和 Clojure

两者都在 JVM 上运行，因此您可以利用所有 java nlp 和机器学习库（Stanford Parser、Lingpipe、Mallet 等）。Java 在除 Python 之外的 NLP 库方面击败了除 Python 之外的所有内容，但用户友好性稍差。以编程方式使用斯坦福解析器可能有点让人头疼。我不得不为它编写自己的包装器。

# eclipse - 找不到文件 manifest.mf eclipse

> ID：10350130
> 
> 赞同：48
> 
> 时间：2012-04-27T11:52:42.517
> 
> 标签：eclipse, maven, manifest.mf

我正在使用以下配置：

*   日蚀靛蓝
*   Maven 2
*   ClearCase（如 SVN 和 CVS）

每次我想在 Eclipse 中运行应用程序时，都会出现一个弹出窗口，告诉我*发生了问题：找不到文件：...\target\classes\META-INF\MANIFEST.MF*。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-03-28T20:36:54.433

转到项目的根目录。无论 pom 位于哪里，然后尝试做一个

```
 mvn eclipse:clean 
```

然后刷新你的项目，看看你会离开哪里

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-01-16T09:03:57.340

右键单击项目，然后单击 Maven，然后更新项目。它对我有用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-09T06:30:38.883

我有类似的问题。我所做的是：

1.  右键单击*项目 > Maven > 禁用 Maven 自然*
2.  右键单击*项目>配置>转换为maven项目*

错误消失

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-04-11T19:26:26.310

如果您还使用 Maven 并且有时在 Eclipse 之外进行编译，则可能会删除 Eclipse 的清单，而 Eclipse 将无法识别外部 Maven 创建的清单。

> TL;DR 取消选中“ *Maven Archiver 在构建目录下生成文件*” `Window > Preferences > Maven > WTP`。

在@cosjav[对另一个问题](https://stackoverflow.com/questions/14659891/m2e-wtp-error-path-target-m2e-wtp-web-resources-meta-inf-manifest-mf-no-such)的回答中阅读更多内容。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-11T12:17:28.373

右键单击**项目**-> **Maven** ->**更新**

调试或运行服务器以获取最近创建的战争文件。

确保在执行 MAVEN UPDATE 时检查“强制更新快照/发布”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-17T09:24:14.017

**清理所有（涉及的）项目**并**刷新工作区中打开的项目**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-06T13:22:32.140

我知道这个问题已经被回答了。经过几次尝试，对我有用的是在 Eclipse 中扩展我的项目，右键单击目标目录并单击刷新，此后一直有效。如果以上所有方法都失败了，希望这对某人有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-29T17:06:08.967

全部。对我来说，pom.xml 中有一个错误。我格式化了代码（Ctrl+Shift+F）并且错误消失了。之后，我能够运行该应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-31T15:17:57.610

关闭 Eclipse 并再次启动 Eclipse。这将刷新项目并解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-02T04:23:14.280

我有同样的问题，但它得到了解决只是扰乱了格式

> **POM.xml**

并按下

> **ctrl+a**和**ctrl+shift+f**然后保存文档

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-27T05:46:16.357

右键单击项目，然后选择 maven，然后在选择项目名称后单击更新项目并更新它会正常工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-10T11:10:09.697

当我的项目在 Eclipse 中打开时，我在更新 Eclipse [更新到 Eclipse 2020-12 (4.18)] 时出现了这个问题。然后我关闭了我的 CLI（因为我正在运行 mvn test 命令），在 eclipse 中关闭了项目并重新启动了我的 eclipse。之后这个问题就没有了。希望这也能解决您的问题。

# python - 如何使用“CGIHTTPServer.CGIHTTPRequestHandler”do_POST 找出上传文件的名称？

> ID：10350131
> 
> 赞同：1
> 
> 时间：2012-04-27T11:52:43.133
> 
> 标签：python, cgi, filenames, cgihttprequesthandler

query = cgi.parse_multipart(handler.rfile, pdict) 我使用模块cgi的函数“parse_multipart”转换表单数据，但在变量“query”的内容中找不到上传文件的名称？我可以在哪里找到文件名。谢谢！

# jquery - 我不能在 FancyZoom 弹出窗口中使用 JQuery 吗？

> ID：10350139
> 
> 赞同：2
> 
> 时间：2012-04-27T11:53:22.810
> 
> 标签：jquery

我们使用[FancyZoom](http://static.railstips.org/orderedlist/demos/fancy-zoom-jquery/)在屏幕上生成标准的 javascript 弹出效果。

我们希望使用 JQuery 来响应用户单击以更改 FancyZoom 刚刚为用户弹出的区域内的某些颜色（使用 .attr）。

（在下面的代码示例中，为了说明这一点，我将所有 .attr 内容替换为一个简单的内容`alert` 。Bar.png 是一个金色矩形，单击时应显示 Hello World。单击“测试”会显示狂热的弹出窗口。 )

如果我们像这样将 bar.png 放在弹出窗口之外，当我们单击它时它会按预期响应：

```
<script type="text/jscript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/fancyzoom.js"></script>

<script>
    $(document).ready(function() {
        $('#foo').on({ 'click': function() { alert('hello world'); } });
    });
</script>
</head>

<body>
              <a id="myFancyZoomPopup" href="#Test"><span>test</span></a>
              <div id="Test">
              <p> this is some text in the popup</p>
              </div>
              <img id="foo" src="i/bar.png" alt="asdf"/>

                <script type="text/javascript">
                    $('#myFancyZoomPopup').fancyZoom({ directory: 'i'});
                </script>

</body> 
```

![在此处输入图像描述](../Images/3f5154f23c69a659c96be36640849eed.png)

但是如果我们把它放在我们想要的地方——*在 FancyZoom 弹出面板中*——就像这样，我们的警报不会触发：

```
<script type="text/jscript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/fancyzoom.js"></script>

<script>
    $(document).ready(function() {
        $('#foo').on({ 'click': function() { alert('hello world'); } });
    });
</script>
</head>

<body>
              <a id="myFancyZoomPopup" href="#Test"><span>test</span></a>
              <div id="Test">
              <p> this is some text in the popup</p>
              <img id="foo" src="i/bar.png" alt="asdf"/>
              </div>

                <script type="text/javascript">
                    $('#myFancyZoomPopup').fancyZoom({ directory: 'i'});
                </script>

</body> 
```

![在此处输入图像描述](../Images/de0ac2a6d23728c8b27635f064f5091e.png)

结果：当我们点击金色矩形时没有“hello world”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:51:03.650

正如之前的海报所说，该元素被重新创建，因此点击功能的指针不会监听花式框内的元素。

但是不要使用live，它已被弃用。你不想要的是将clickevent绑定到一个永远存在的元素，比如你有一个名为#container的fancybox的div容器，这就是你应该编写代码的方式。

```
$('#container').on('click', '#foo', function() {
    // code goes here.
}); 
```

您只需在 .on() 函数中插入您想要监听的确切元素，就像我在上面所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:16:06.753

我猜想这个`#foo`元素是在弹出窗口中重新创建的，所以对事件的引用丢失了。

尝试使用“实时”版本，`on()`以便捕捉未来元素的事件。

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

检查链接：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

# javascript - 为什么 document.all 是假的？

> ID：10350142
> 
> 赞同：59
> 
> 时间：2012-04-27T11:53:33.760
> 
> 标签：javascript, dom

`document.all`是 DOM 中的一个非原始对象，它是虚假的。

例如，这段代码不做任何事情：

```
if (document.all) {
    alert("hello");
} 
```

有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-05-01T07:35:32.647

**免责声明：** [我是在推特上发布导致该线程的问题的人 :)](http://twitter.com/mathias/status/195818066016354305)这是我会在我的[前沿趋势](http://2012.front-trends.com/)演讲中提出和回答的问题。我在上台前 5 分钟写了那条推文。

* * *

我问的问题如下。

ECMAScript 规范[定义`ToBoolean()`如下](http://es5.github.com/x9.html#x9.2)：

![ToBoolean(condition)，幻灯片来自我的 Front-Trends 2012 演讲](../Images/0d96dc6326d466c148de2d80fd6d8e3e.png)

如您所见，所有非原始对象（即所有不是布尔值、数字、字符串、`undefined`或`null`的对象）按照规范都是真实的。然而，在 DOM 中，有一个例外——一个虚假的 DOM 对象。你知道那是哪一个吗？

答案是`document.all`。[HTML 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html#dom-document-all)说：

> 该`all`属性必须返回一个`HTMLAllCollection`根节点`Document`，其过滤器匹配所有元素。
> 
> 为 all 返回的对象有几个异常行为：
> 
> 用户代理必须像`ToBoolean()`JavaScript 中的运算符将返回的对象转换为`all`值`false`一样。
> 
> 对于JavaScript中的`==`and运算符，用户代理必须表现得好像返回的对象等于该 值。`!=``all``undefined`
> 
> 用户代理必须采取行动，以便 JavaScript 中的运算符在应用于返回的对象时 `typeof`返回字符串。`'undefined'``all`
> 
> 这些要求故意违反了撰写本文时的 JavaScript 规范（ECMAScript 第 5 版）。JavaScript 规范要求`ToBoolean()`运算符将所有对象转换为`true`值，并且没有规定对象的行为就好像它们是`undefined`为了某些运算符的目的一样。这种违规的动机是希望与两类遗留内容兼容：一种使用存在`document.all`作为检测遗留用户代理的一种方式，一种只支持那些遗留用户代理并使用 `document.all`对象而不首先测试其存在.

所以，`document.all`是这个 ECMAScript 规则的唯一官方例外。（在 Opera`document.attachEvent`等中也是虚假的，但在任何地方都没有指定。）

上面的文字解释了为什么这样做。但这里有一个在旧网页上非常常见的示例代码片段，它将进一步说明这一点：

```
if (document.all) {
  // code that uses `document.all`, for ancient browsers
} else if (document.getElementById) {
  // code that uses `document.getElementById`, for “modern” browsers
} 
```

基本上，很长一段时间`document.all`都是用这种方式来检测旧的浏览器。因为`document.all`首先测试，提供这两个属性的更现代的浏览器仍然会在`document.all`代码路径中结束。在现代浏览器中，我们当然更喜欢使用`document.getElementById`，但由于大多数浏览器仍然具有`document.all`（出于其他向后兼容性原因）`else`如果是真的，就永远不会被访问`document.all`。如果代码以不同的方式编写，这将不是问题：

```
if (document.getElementById) {
  // code that uses `document.getElementById`, for “modern” browsers
} else if (document.all) {
  // code that uses `document.all`, for ancient browsers
} 
```

但可悲的是，很多现有的代码都是相反的。

解决这个问题的最简单方法是`document.all`在仍然模仿它的浏览器中简单地设置为 falsy。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2020-05-25T15:15:08.980

## ES2019 更新

现在有一个用于对象的[[[IsHTMLDDA]] 内部槽](https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot)：

> [[IsHTMLDDA]] 内部插槽可能存在于实现定义的对象上。具有 [[IsHTMLDDA]] 内部槽的对象的行为类似于`undefined`在 ToBoolean 和 Abstract Equality Comparison 抽象操作中以及在用作运算符的操作数时`typeof`。

HTML 标准也已更新，为实现[`HTMLAllCollection`接口](https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#htmlallcollection)的对象添加了该内部插槽：

> 实现 HTMLAllCollection 接口的对象是带有附加 [[Call]] 内部方法的遗留平台对象，如下节所述。它们还有一个 [[IsHTMLDDA]] 内部插槽。

* * *

这种疯狂的原因在 HTML 标准的这个注释中指定：

> 这些特殊行为的动机是希望与两类遗留内容兼容：一种使用存在`document.all`作为检测遗留用户代理的一种方式，一种只支持那些遗留用户代理并使用`document.all`对象而不测试其存在第一的。

所以基本上标准想要兼容这两种类型的代码：

*   检查它是否在 Internet Explorer 中运行以使用其非标准功能（如`document.all`Activex）的代码；

    ```
    if (document.all) {
        useActiveXStuff();
    } 
    ```

*   假定它在 Internet Explorer 中运行并使用`document.all`.

    ```
    document.all["my-button"].onclick = function () {
        alert("hi");
    }; 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-27T12:24:39.997

现代浏览器不再实现这个过时的东西。它是由 IE 引入的，但大多数其他“填充”它是兼容的。

为了使浏览器检测成为可能（在过去，您可以通过测试来区分 IE 和 NN ）同时支持 document.all 语法，其他浏览器制作了返回未定义`document.all`的“奇怪”实现。`typeof document.all`

```
Opera> document.all
// prints the array-like object
Opera> typeof document.all
"undefined"
Opera> Boolean(document.all)
false 
```

在 FF 放弃对它的支持之前，它还表现出[此消息](http://old.nabble.com/FF-document.all-boolean-conversion%3A-please-vote-for-Rhino-patch-allowing-to-support-it-correctly-p14799030.html)中所述的奇怪行为。[您可以在Mozilla 错误 #412247](https://bugzilla.mozilla.org/show_bug.cgi?id=412247)中找到更多内部信息。

W3C 邮件列表存档中也有一个[很长的线程，以](http://www.w3.org/Search/Mail/Public/advanced_search?keywords=typeof+document.all&hdr-1-name=subject&hdr-1-query=&hdr-2-name=from&hdr-2-query=&hdr-3-name=message-id&hdr-3-query=&period_month=&period_year=&index-grp=Public__FULL&index-type=t&type-index=public-html&resultsperpage=100&sortby=date-asc)[http://lists.w3.org/Archives/Public/public-html/2009Jun/0546.html](http://lists.w3.org/Archives/Public/public-html/2009Jun/0546.html)开头

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-20T19:00:21.580

简而言之，就是让这两个代码示例都能正常工作。浏览器必须这样做才能使旧网页继续工作。

# 样品 1

```
// Internet Explorer
if (document.all) {
    useActiveX()
}
// Netscape Navigator
else {
    useOldButStillWorkingCode()
} 
```

# 样品 2

```
document.all.output.innerHTML = 'Hello, world!' 
```

# jquery - ASP.NET 链接按钮避免在 iOS 中单击两次

> ID：10350145
> 
> 赞同：0
> 
> 时间：2012-04-27T11:53:55.990
> 
> 标签：jquery, asp.net, ios

我的 iOS 设备无法激活链接，我需要点击两次。

如何用 Jquery 或其他方式解决这个问题？

PS它只发生在工具提示悬停时。

```
<asp:LinkButton ID="linkButtonDetails" runat="server" CommandName="Details" />

<a id="ctl00_zzzz" href='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00_zzzz", "", true, "", "", false, true))'>Update details</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:32:05.193

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('a.TestingLink').live('click', function (e) {
                var obj = $(this);

                e.preventDefault();

                //Optional      $(obj).hide();

                $(obj).attr('disabled', 'disabled');

                $('#processing').show();

                WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(obj.data('href')));

                $(obj).removeAttr('disabled');
                $('#processing').hide();

                //Optional      $(obj).show();
            });

            function WebForm_PostBackOptions(a, b, c, d, e, f, g) {
                alert('WebForm_PostBackOptions');

                return true;
            };

            function WebForm_DoPostBackWithOptions(a) {
                alert('WebForm_DoPostBackWithOptions');
            };
        });
    </script>
</head>
<body>
    <span id="processing" style="font-size: 15px; font-weight: bolder; display: none;">Processing
        . . . </span>
    <br />
    <a id="ctl00_zzzz" href="" class="TestingLink" data-href='"ctl00_zzzz", "", true, "", "", false, true'>
        Update details1</a>
    <br />
    <a id="ctl00_zzza" href="" class="TestingLink" data-href='"ctl00_zzzz", "", true, "", "", false, true'>
        Update details2</a>
</body>
</html>

    enter code here 
```

# ios - UISlider 不流畅

> ID：10350150
> 
> 赞同：2
> 
> 时间：2012-04-27T11:54:21.823
> 
> 标签：ios, xcode, ipad, uislider, smooth

我正在开发一个 iPad 应用程序并使用很多 UISlider。但是当我在 iPad 1 上测试应用程序时，滑块的响应不是很流畅。当滑块的值发生变化时，我什么都不做。仅当释放滑块时（内部/外部修饰）。

也不总是调用内部/外部方法的修饰。

这是 iPad 1 上的常见问题还是由我的应用程序引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:22:56.277

如果你想得到一个带滑块的动画，你应该使用实例`[slider setValue:0.5 animated:YES]`方法。`UISlider`

# php - 从 MSSQL DB 检索的图像文件中缺少部分数据

> ID：10350153
> 
> 赞同：1
> 
> 时间：2012-04-27T11:54:26.213
> 
> 标签：php, sql-server, image

我正在尝试显示保存在**图像**字段中的数据库中的图像。但我只能看到 63KB 的图像。

这是我的代码：

```
$sql='SELECT Photo FROM Personel WHERE ID_USER = '.$id;

$result=mssql_query($sql);

$res=mssql_fetch_assoc($result);

header('Content-type:image/jpeg');
echo$res['Photo']; 
```

如您所见，没有什么特别之处，因此我认为数据库或服务器配置存在问题。

安装在 Windows XP 服务器上的数据库。

实际上它是访问控制系统数据库，以及安装在该程序文件夹中的 SQL 文件，但不知道这些信息是否有用。

任何的想法？

**更新** 照片字段类型的屏幕截图： ![照片字段类型的屏幕截图](../Images/b29fbe23465b64c30f468856ae7a0555.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T09:30:13.210

有同样的问题，先运行这个：

```
mssql_query('SET TEXTSIZE 10000000'); // sets limit to 10MB 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:00:53.167

很可能您使用的数据类型（例如`blob`）对于`Photo`您要保存的图像的大小过于严格。每种数据类型对可以存储在该字段中的数据量都有不同的限制。

有关一些不同字段类型及其相关存储容量/适用性的示例，请参阅[MySQL 文档中的此页面。](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)

例如，该`blob`类型的限制为 2^16 字节 (64K)。

如果您的图像比这大（很可能），请尝试将字段类型更改为`mediumblob`(2^24 = 16.78MB)。

如果您正在处理*非常*大的图像，那么您可能需要`longblob`(2^32 = 4.29 GB)，但在那个阶段，您将遇到的不仅仅是数据存储问题 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:57:33.837

检查您是否对 field 有限制`Photo`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:32:58.670

鉴于您的评论说整个图像***都***存储在数据库中，问题可能与 PHP 和/或网络服务器中的数据限制/超时有关。

编辑：我在这里留下了答案的以下部分以获取历史信息（以显示我们尝试过的其他内容），但请参阅下面的评论，因为该问题更有可能与 PHP 或网络服务器配置设置有关，从而限制了响应数据的大小。还没有完全解决。

* * *

我注意到你有一个`Content-type`标题，但没有`Content-length`标题。

您可以尝试添加`Content-length`具有任意已知值（例如 12288）的标头，看看这是否会影响返回文件的大小（因为您知道它当前是 63K - 它会更改为 12K 吗？）

如果是这样，那么您需要让 PHP 计算/找出图像的实际大小并添加该长度的 Content-length 标头。

# jquery - jQuery 验证触发错误信息

> ID：10350154
> 
> 赞同：26
> 
> 时间：2012-04-27T11:54:30.327
> 
> 标签：jquery, jquery-validate, validation

我有一个有点奇怪的问题。我想在一个元素上触发一个 jquery-valdation 错误消息，即使它是有效的。

场景：我有一个大表格。输入之一是 PersonalId。输入该 PersonalId 是可选的。除了那个输入我有一个普通的按钮（不是提交按钮）。如果您单击它（从 ajax 获取信息）并且 PersonalId 字段为空，我想触发该错误消息。

jQuery Validate 可以做到这一点，还是我需要创建自己的函数？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-27T12:11:32.943

> jQuery Validate 可以做到这一点，还是我需要创建自己的函数？

两者，有点。您可以使用该`showErrors`功能在表单上手动显示错误，但由于您不希望这是在*提交*表单时启用的规则，因此您必须自己检查输入中的值。

就像是：

```
var $validator = $("#myform").validate();
$("#checkid").click(function() {
    var errors;

    if (!$("#personalid").val()) {
        /* Build up errors object, name of input and error message: */
        errors = { personalid: "Please enter an ID to check" };
        /* Show errors on the form */
        $validator.showErrors(errors);            
    }        
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/XjZer/](http://jsfiddle.net/andrewwhitaker/XjZer/)

`personalid`请注意，如果该字段中没有任何内容，该表单仍将提交。

# xml - 更改 nginx 自动索引输出格式

> ID：10350159
> 
> 赞同：3
> 
> 时间：2012-04-27T11:54:48.360
> 
> 标签：xml, nginx, mod-autoindex

我想通过 http 共享文件夹内容。我已经安装了带有自动索引的 nginx 并将其配置到我的文件夹中。问题是我需要带有文件/文件夹列表的html文件，但我想要某种具有相同信息的xml。

是否可以使用标准的 nginx 工具来完成，或者我应该实现一些脚本来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:37:44.200

您必须涉及一些脚本才能使其工作。使用 nginx 配置可以获得的大部分内容是自定义[页脚和页眉](http://wiki.nginx.org/NgxFancyIndex)。

顺便说一句，开发者[期待](http://nginx.2469901.n2.nabble.com/Autoindex-module-extension-patch-td7259016.html)在 nginx 中添加 xml 索引模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-10T13:01:43.377

从版本 1.7.9 开始，您可以使用：

```
autoindex on;
autoindex_format xml; 
```

请参阅文档： http: [//nginx.org/r/autoindex_format](http://nginx.org/r/autoindex_format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-30T07:50:17.390

sudo apt install libnginx-mod-http-fancyindex

> 花式索引开启；

# linux - 作为尾部操作的结果显示的数据中搜索？

> ID：10350160
> 
> 赞同：14
> 
> 时间：2012-04-27T11:54:48.670
> 
> 标签：linux

我正在开发一个 Java EE 应用程序，它的日志将在 Linux 服务器内生成。

我使用了**`tail -f -n -10000 MyLog`** 它显示该日志文件的最后 1000 行的命令。

**现在我在 Putty 中按下 Ctrl + c 来断开日志更新（因为我担心它可能会被新请求更新，我会丢失我的数据）**

在显示的结果中，如何搜索特定关键字？（使用 / 字符串名称进行搜索，但它不起作用）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T12:03:31.330

两种方式：

```
tail -n 10000 MyLog| grep -i "search phrase"

tail -f -n 10000 MyLog | less 
```

第二种方法将允许您使用 / 进行搜索。它只会向下搜索，但您可以按 g 返回顶部。

**编辑：**在测试中，似乎方法 2 并不能很好地工作......如果你点击文件的末尾，它会冻结，直到你 ctrl+c tail 命令。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-27T12:00:21.267

将您的输出通过管道传输到 PAGER。

```
tail -f -n LINE_CNT LOG_FILE | less 
```

那么你可以使用

```
/SEARCH_STRING 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:00:24.423

您需要将输出重定向`tail`到搜索实用程序（例如`grep`）。您可以分两步执行此操作：将输出保存到文件，然后在文件中搜索；或一口气：将输出通过管道传输到搜索实用程序

要查看文件中的内容（以便您可以按 Ctlr+c），您可以使用以下`tee`命令，该命令将输出复制到屏幕和文件中：

```
tail -f -n -10000 MyLog | tee <filename> 
```

然后在文件中搜索。

如果您想将结果通过管道传输到搜索实用程序中，您可以使用与上述相同的技巧，但使用您的搜索程序而不是`tee`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:50:22.180

**即时控制终端输出**

在 Putty 等终端中运行任何命令时，您可以使用`CTRL-S`and`CTRL-Q`停止和开始向 Putty 终端输出。

**使用 grep 排除行**

如果要排除包含特定模式的行，请使用`grep -v`以下命令删除包含字符串 INFO 的所有行

```
tail -f logfile | grep -v INFO 
```

显示不包含单词 INFO 或 DEBUG 的行

```
tail -f logfile | grep -v -E 'INFO|DEBUG' 
```

最后，所有拖尾工具的母亲和父亲是[xtail.pl](http://gigo.com/ftp/pub/src/xtail.pl)

如果您的主机上有 perl，xtail.pl 是一个非常好的学习工具，简而言之，您可以使用它来*跟踪多个*文件。非常便利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-31T13:40:34.373

你可以用更少的命令打开它

```
less logfile_name 
```

当您打开文件时，您可以[在此处使用本指南](https://www.thegeekstuff.com/2010/02/unix-less-command-10-tips-for-effective-navigation/)

**提示**：我建议，首先使用 G 转到文件末尾，然后再使用 Backward Search

# qt - Qt 创建者 SSL 启用

> ID：10350171
> 
> 赞同：1
> 
> 时间：2012-04-27T11:55:27.827
> 
> 标签：qt, ssl, qt-creator

我有一个用 Qt creator 构建的程序。我需要向 Google 的 C2DM 服务器发送 https 帖子。

当我尝试使用 QSslSocket 时，它说我的 SSL 不工作。

Qt 文档指出，出于法律原因，它不附带 SSL 支持，并且 QSslSocket 只是一个包装器，我需要自己安装 OpenSSL。我已经尝试复制 DLL，但它仍然无法正常工作。有人可以指导我完成安装 OpenSSL 并让它与 Qt Creator 一起工作的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:16:54.907

为什么不使用`QNetworkAccessManager`？我使用这样的东西将 JSON 发布到 Web 服务：

```
void HttpPoster::post(){

  if(!manager)
     manager = new QNetworkAccessManager(this);

  QSslConfiguration config = QSslConfiguration::defaultConfiguration();
  config.setPeerVerifyMode(QSslSocket::VerifyNone);
  //config.setProtocol(QSsl::TlsV1);

  QNetworkRequest request ;
  request.setUrl(QUrl("https://somehost.somedomain"));
  request.setRawHeader("User-Agent", "MyApp");
  request.setRawHeader("Content-type", "text/json");

  request.setSslConfiguration(config);

  if(!reply){
     reply =  manager->post(request,m_Data);
  }

  connect(reply, SIGNAL(error(QNetworkReply::NetworkError)),this,SLOT(handleErrors(QNetworkReply::NetworkError)));
  connect(reply,SIGNAL(sslErrors(QList<QSslError>)),this,SLOT(handleSSLErrors(QList<QSslError>)));
  connect(reply,SIGNAL(finished()),this,SLOT(replyFinished()));

} 
```

省略了一些方法（处理错误、处理回复、处理 ssl 错误等）。您可以在文档中找到更好的示例。

# php - Wordpress 按 ID 显示帖子

> ID：10350172
> 
> 赞同：0
> 
> 时间：2012-04-27T11:55:29.043
> 
> 标签：php, wordpress

我有点卡在这里，我想通过他们的 ID 获得一个或多个帖子。我现在得到的是：

```
<?php
$post_id = 1;
$queried_post = get_post($post_id);
$content = $queried_post->post_content;
$content = apply_filters('the_content', $content);
$content = str_replace(']]>', ']]&gt;', $content);
echo $content;
?> 
```

虽然这显示我的帖子没有我在后端制作的休息和外观。而且我认为这是获取单个帖子的长代码。

所以我的问题是，我怎样才能通过 ID 以最干净的代码显示帖子，并在后端放置中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:34:26.177

这就是 get_post 的全部意义所在，我不相信还有其他方法。

# delphi - Delphi 2006 - 无类型的例程参数

> ID：10350176
> 
> 赞同：0
> 
> 时间：2012-04-27T11:55:40.220
> 
> 标签：delphi, delphi-2006

在例程中可以有一个参数，它可以同时是一个类型，或者一个字符串？我知道我可以通过重载一个例程来实现这一点，我问是否可以用另一种方式来做到这一点。

假设我有这种类型 - TTest = (t1,t2,t3)。我想要一个接受 TTest 类型参数的例程，但同时是一个字符串，所以我可以称它为 myproc(t1) 或 myproc('blabla')

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:02:47.030

您应该使用重载函数。

您已经有了问题的完美解决方案，无需寻找其他方法来解决此问题。您可以尝试使用接收 a 的单个函数`Variant`，但是该函数也将接收任何内容，这意味着以下内容也是合法的：

```
myproc(0.5);
myproc(intf);
myproc(-666); 
```

使用重载可以让您保持编译时类型安全，并且绝对不会失去使用重载的一般性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:53:34.043

即使这可以通过重载函数轻松完成，考虑到这是一个很好的练习，基于 David Hefferman 和 Sertac Akyuz 的回答，我做了一个小例子来测试这两种解决方案。它并不完美，它只显示了两种可能性。

```
unit Unit4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  ttest = (t1,t2);
  TForm4 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    function my(aVar:Variant):String;
    function MyUntype(const aVar):String;
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

{ TForm4 }

procedure TForm4.FormCreate(Sender: TObject);
var aTestTypeVar : ttest;
    aString : String;
begin
 my(t1);
 my(t2);
 my('ssss');
//with untyped params
 aString := 'aaaa';
 MyUntype(aString);
 aTestTypeVar := t1;
 aString := IntToStr(Ord(aTestTypeVar));
 MyUntype(aString);//can not be a numeral due to delphi Help
end;

function TForm4.my(aVar: Variant): String;
begin
 showmessage(VarToStr(aVar));//shows either the string, either position in type
end;

function TForm4.MyUntype(const aVar): String;
begin
 //need to cast the parameter  
 try
  ShowMessage(pchar(aVar))
 except
  showmessage(IntToStr(Ord(ttest(aVar))));
 end;
end;

end. 
```

我也知道变体很慢，只能在需要时使用。

# wolfram-mathematica - 计算与谓词匹配的元素的最快方法

> ID：10350177
> 
> 赞同：2
> 
> 时间：2012-04-27T11:55:43.853
> 
> 标签：wolfram-mathematica

今天早些时候，我问是否有一种[惯用的方法来计算](https://stackoverflow.com/questions/10344339/what-is-the-idiomatic-way-of-counting-the-number-of-elements-matching-predicate)Mathematica 中匹配谓词函数的元素，因为我关心的是性能。

我对给定谓词的初始方法`pred`如下：

```
PredCount1[lst_, pred_] := Length@Select[lst, pred]; 
```

我有一个建议改为使用

```
PredCount2[lst_, pred_] := Count[lst, x_/;pred@x]; 
```

我开始分析这些函数，它们具有不同的`lst`大小和`pred`函数，并添加了另外两个定义：

```
PredCount3[lst_, pred_] := Count[Thread@pred@lst, True];
PredCount4[lst_, pred_] := Total[If[pred@#, 1, 0] & /@ lst]; 
```

我的数据样本范围在 1 到 1000 万个元素之间，我的测试函数是`EvenQ`,`#<5&`和`PrimeQ`. 下图显示了所花费的时间。

**偶数** ![EvenQ 谓词](../Images/1cfc6803926df4547ce3fbbc86e22a8c.png)

PredCount2 最慢，3 和 4 决胜负。

**比较谓词：#<5&**

我选择了这个功能，因为它接近我在实际问题中所需要的。不要担心这是一个愚蠢的测试功能，它实际上证明了第四个功能有一些优点，我实际上最终在我的解决方案中使用了它。

![少于五个谓词](../Images/7c90ee8d5ed203ec229feb211bec1b82.png)

与 相同`EvenQ`，但 3 显然比 4 慢。

**PrimeQ** ![PrimeQ 谓词](../Images/d8d06b096e3ac6fcb05f2823dcd96bce.png)

这很奇怪。一切都颠倒了。我不怀疑缓存是这里的罪魁祸首，因为最差的值是最后计算的函数。

那么，计算列表中匹配给定谓词函数的元素数量的正确（最快）方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:19:58.933

您正在看到自动编译的结果。

首先，对于`Listable`诸如`EvenQ`and`PrimeQ`之类的功能`Thread`是不必要的：

```
EvenQ[{1, 2, 3}] 
```

> ```
> {False, True, False} 
> ```

这也解释了为什么`PredCount3`在这些功能上表现良好。（它们在内部针对列表进行线程优化。）

现在让我们看看时间。

```
dat = RandomInteger[1*^6, 1*^6];

test = # < 5 &;

First@Timing[#[dat, test]] & /@ {PredCount1, PredCount2, PredCount3, PredCount4} 
```

> ```
> {0.343, 0.437, 0.25, 0.047} 
> ```

如果我们更改系统选项以防止内部自动编译`Map`并再次运行测试：

```
SetSystemOptions["CompileOptions" -> {"MapCompileLength" -> Infinity}]

First@Timing[#[dat, test]] & /@ {PredCount1, PredCount2, PredCount3, PredCount4} 
```

> ```
> {0.343, 0.452, 0.234, 0.765} 
> ```

您可以清楚地看到，没有编译`PredCount4`会慢得多。简而言之，如果您的测试函数可以由*Mathematica*编译，这是一个不错的选择。

[以下是使用数字函数进行快速计数的其他一些示例。](https://stackoverflow.com/a/6027120/618728)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:57:25.543

列表中整数的性质会对可实现的时序产生重大影响。如果整数的范围受到限制，使用`Tally`可以提高性能。

```
(* Count items in the list matching predicate, pred *)

PredCountID[lst_, pred_] := 
Select[Tally@lst, pred@First@# &]\[Transpose] // Last // Total

(* Define the values over which to check timings  *)
ranges = {100, 1000, 10000, 100000, 1000000};
sizes = {100, 1000, 10000, 100000, 1000000, 10000000,100000000}; 
```

对于 PrimeQ，此函数给出以下时间：

![数学图形](../Images/ef41a70083a5b6d6e6355d0c9584597d.png)

`Timing`表明即使在 10^8 大小的列表中，如果素数来自整数集合 {0,...,100000} 并且低于分辨率在一个很小的范围内，例如 1 到 100。

因为谓词只需要应用于一组`Tally`值，这种方法对确切的谓词函数相对不敏感。

# php - jquery在按键上显示加载文本

> ID：10350181
> 
> 赞同：0
> 
> 时间：2012-04-27T11:56:00.923
> 
> 标签：php, jquery, html

我需要以下的 jquery 脚本

在文本字段内输入时，需要在文本字段附近显示“加载”文本。如果我停止输入“加载”文本需要更改为“删除”如果单击此“删除”文本，则应清除文本字段。

同时，我需要显示输入文本的搜索结果。

为此，我使用了以下脚本

```
 $("#lets_search").keyup(function() {
                var value = $('#str').val();
                $.post('db_query.php',{value:value}, function(data){
                    $("#search_results").html(data);

                });

                return false;
            });
        }); 
```

这是文件的html部分

```
 <form id="lets_search" action="" style="width:400px;margin:0 auto;text-align:left;">
            Search:
            <div>&nbsp;</div>
            <div style="float:left; width:250px;">
            <div style="background-color:#fff; padding:3px; width:200px; float:left; border-left:1px solid #eee; border-top:1px solid #eee; border-bottom:1px solid #eee;">
            <input name="str" id="str" type="text" style="border:0px; width:150px;">
            <div style="float:right; padding-top:3px;" id="loader">Load</div>
            </div>

            </div>

         </form>
 <div id="search_results"></div> 
```

在这`<div style="float:right; padding-top:3px;" id="loader">Load</div>` 我必须显示文本（删除，加载等......）

请只做那些需要的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:10:02.670

我认为最好的方法是使用 setTimeout，如下所示：

```
var pTimeout = null;

$("#lets_search").keyup(function() 
{
    var value = $('#str').val();
    $('#loader').text('Loading...').unbind('click');
    if(pTimeout) clearTimeout(pTimeout);
    pTimeout = setTimeout(function () { GetResult(value); }, 50);
});

function GetResult(value)
{
    $.post('db_query.php',{value:value}, function(data){
        pTimeout = null;

        $('#loader').text('del').click(function () {
            $("#search_results").empty();
            $('#str').val('');
        });

        $("#search_results").html(data);
    });
} 
```

总是有更好的方法，但必须给你这个想法。

PS我没有测试代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:12:48.917

```
var searchTimeout = null;

$("#str").keyup(function() {

  // Clear any existing timeout
  if (searchTimeout) {
    clearTimeout(searchTimeout);
  }

  // Put "Load" text in
  $('#loader').html('Load');

  // Set a timeout for end of typing detection
  searchTimeout = setTimeout(function() {
    $('#loader').html('<a href="#" onclick="clearSearch();">Del</a>');
  }, 500);

  // Get the value from the text field and send it to the server
  var value = $(this).val();
  $.post('db_query.php',{value:value}, function(data){
    $("#search_results").html(data);
  });

});

// Clears the search box value
function clearSearch() {
  $("#str").val('');
}; 
```

# c# - 序列化对象日期/时间

> ID：10350186
> 
> 赞同：1
> 
> 时间：2012-04-27T11:56:30.990
> 
> 标签：c#

我有一个问题。我必须序列化一个对象，并且该 sam 对象被转换为 XML，但它是一个日期时间对象。

好的，我有一个字符串变量，其中填充了来自一些 sql 查询的数据，就像这样

//DateDeliveryRequest

```
 if (rw_mat["dat_pot"].ToString().Length <= 0)
     {
           date_req = "";
     }
     else
     {
           date_req = rw_mat["dat_pot"].ToString();
     } 
```

现在， date_req 正在传递给这样的对象：

```
var dtfi = new DateTimeFormatInfo { ShortDatePattern = "dd-MM-yyyy", DateSeparator = "-" };
Agr3PL.DataArea.Header.DateDeliveryRequest = Convert.ToDateTime(date_req, dtfi); 
```

最后，这个对象与其他对象一起被传递给序列化函数：

```
 private string SerializeAnObject(object obj)
            {

                System.Xml.XmlDocument doc = new XmlDocument();

                System.Xml.Serialization.XmlSerializer serializer = new        System.Xml.Serialization.XmlSerializer(obj.GetType());

                System.IO.MemoryStream stream = new System.IO.MemoryStream();

                try
                {

                    serializer.Serialize(stream, obj);

                    stream.Position = 0;

                    doc.Load(stream);

                    return doc.InnerXml;

                }

                catch (Exception ex)
                {
                    WriteErrors.WriteToLogFile("WS.SAVE_DOK_SERIJALIZACIJA", ex.ToString());

                    throw ex;

                } 
```

所以我想获取 xml 的日期时间变量，但我没有，xml 必须看起来像这样（它只是一个片段）

```
- <Header>
  <MessageType>COR</MessageType> 
  <UniqueHeaderNumber /> 
  <UniqueHeaderNumberFromWMS /> 
  <CompanyCode /> 
  <OrderNumber /> 
  <InvoiceNumber /> 
  <MovementNumber /> 
  <ReceiptNumber /> 
  <DebitNoteNumber /> 
  <PickNoteNumber /> 
  <LoadNumber /> 
  <DropSequence /> 
  <BulkPickNoteNumber /> 
  <NumberOfPallets />
  <DateDeliveryRequest /> 
```

但问题是xml没有显示节点>DateDeliveryRequest它不存在我没有得到错误只是没有节点>DateDeliveryRequest？？？

我不知道是序列化程序功能还是其他问题，可能是格式化日期或其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:05:34.090

我测试了这段代码：

```
public class Test
{
    private DateTime dateDeliveryRequestField;

    [System.Xml.Serialization.XmlElementAttribute(DataType = "date")]
    public System.DateTime DateDeliveryRequest { get { return this.dateDeliveryRequestField; } set { this.dateDeliveryRequestField = value; } }
}

private string SerializeAnObject(object obj)
{
    System.Xml.XmlDocument doc = new XmlDocument();
    System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(obj.GetType());
    System.IO.MemoryStream stream = new System.IO.MemoryStream();
    try
    {
       serializer.Serialize(stream, obj);
       stream.Position = 0;
       doc.Load(stream);
       return doc.InnerXml;
    }
    catch (Exception ex)
    {
        throw ex;
    }
}

Test n = new Test();
n.DateDeliveryRequest = DateTime.Parse("2012-10-07");
string result = SerializeAnObject(n); 
```

结果：

```
<?xml version="1.0"?>
<Test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <DateDeliveryRequest>2012-10-07</DateDeliveryRequest>
</Test> 
```

所以一切看起来都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:02:24.207

要序列化日期，请使用此字符串格式

```
date_req = rw_mat["dat_pot"].ToString("s"); 
```

# c# - 如何使用 JQuery 在 Masterpage 中获取控件的值？

> ID：10350188
> 
> 赞同：3
> 
> 时间：2012-04-27T11:56:45.673
> 
> 标签：c#, javascript, jquery, asp.net

我在 a 中有一个隐藏字段控件，`MasterPage`我想在使用`MasterPage`.

如果页面中的隐藏字段具有值，我有以下 javascript 执行：

```
if(!$('input[type=hidden]').val().length == 0 ) { } 
```

我需要什么 javascript 来检查`MasterPage`页面中隐藏字段的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:00:34.987

如果这有您想要的影响，它也应该在母版页中工作，因为在客户端上母版页和内容页之间没有区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:00:53.210

您的页面和母版页之间没有分隔。这两个概念都在您的 ASP.NET 层中，浏览器只接收一个 HTML 文档。

如果您的母版页指定了隐藏输入，它将像任何其他隐藏输入一样出现在您的页面上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:00:42.993

母版页只是与子页一起呈现为单个 HTML，因此您只需像往常一样在客户端访问它。

尝试重写这个：

```
if(!$('input[type=hidden]').val().length == 0 ) { } 
```

作为

```
if ($('input[type=hidden]').val()) {} 
```

如果隐藏字段有值，这是一个更简单的条件。我不确定与 the`!`结合`==`是否在做你希望它在逻辑上做的事情。无论哪种方式`$('input[type=hidden]').val()`都更具可读性IMO。

# ios - IOS 设备方向卡在纵向模式，没有横向

> ID：10350192
> 
> 赞同：4
> 
> 时间：2012-04-27T11:57:01.473
> 
> 标签：ios, xcode, ios-simulator, orientation, portrait

我正在使用 Xcode 4.3.2 和 iPad 模拟器 5.1

我真的需要一些帮助，我的应用程序卡在纵向模式。

当我旋转模拟器时，我尝试在项目设置下查看并检查这些设置：纵向、颠倒、横向左侧和横向右侧。

我也在视图控制器中使用了这些方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:20:46.233

`*.plist`检查项目设置或文件中的支持方向。此外，如果您正在使用`UITabBarController`或其他，您的所有控制器都必须支持所有方向！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:17:22.833

是的，我遇到了同样的问题，这里的其他答案并没有解决我的问题。我发现我必须**在所有相关视图中选中“Resize View from NIB”框**。

请参阅下面的屏幕截图（尽管显示的是 XCode 的稍旧版本）。

![](../Images/17213399de0298abb3fbbb9c9a1da097.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:35:00.090

确保您只显示一个控制器。当我有多个视图同时显示不同的控制器时，我已经看到了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:26:52.227

使用 cmd+shift+f 并输入 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

如果您希望所有方向都支持，请确保所有这些都返回 YES，对于不支持的方向，请确保返回 NO

# java - 我可以在构造中设置默认参数值吗？

> ID：10350196
> 
> 赞同：0
> 
> 时间：2012-04-27T11:57:17.107
> 
> 标签：java

我可以在 Construct 函数中设置默认参数值吗？

```
public class XLSReader {
  public XLSReader(String filename="XYZ.xls") {
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:58:39.133

不，Java 不支持可选参数。您可以使用重载和链接：

```
public XlsReader() {
    this("XYZ.xls");
}

public XlsReader(String filename) {
    // Use filename here
} 
```

（这适用于方法和构造函数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:58:26.743

不，你不能。Java 不支持默认参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T11:59:18.670

不，你不能，但你可以做的是拥有 2 个这样的构造函数：

```
public class XLSReader {
  String filename;

  // constructor with a filename argument
  public XLSReader(String filename) {
     this.filename = filename;
  }

  // default constructor will fill-in "default value" XYZ.xls
  public XLSReader() {
     this.filename = "XYZ.xls";
  }
} 
```

# html - 轨道形式下拉菜单中的订单，包括优先级

> ID：10350201
> 
> 赞同：1
> 
> 时间：2012-04-27T11:57:31.777
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, drop-down-menu

我在 rails 表单上有一个下拉菜单，我想按字母顺序排列其中的所有名称。但是，我也希望下拉列表中的前 3 个名称始终相同，而不管单字母顺序如何。我该怎么做呢？

例如（下拉内容，其中 John、Jane 和 Peter 始终具有优先权）：John
Jane
Peter
Alison
Betty
Cathy
David

我的下拉列表目前定义如下：

```
<%= f.select :name_id, Name.all.map { |x| [x.name, x.id]}, :include_blank => 'Select a name' %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:03:53.173

假设您的模型`Name`有一个字段`at_top`，对于 John、Jane 和 Peter 设置为 true。那么你也能：

```
Name.order('at_top DESC, name ASC') 
```

# php - 迭代多维数组的问题

> ID：10350205
> 
> 赞同：0
> 
> 时间：2012-04-27T11:57:44.647
> 
> 标签：php, multidimensional-array, iteration

```
Array
(
    [1] => Array
        (
            [0] => Array
                (

                    [title] => New Car 
                    [description] => hi i am 
                )

            [1] => Array
                (

                    [title] => Honda city for sale!
                    [description] => I want to sell my Honda city ( Make-1998) ( Model- 1.5 Exi). The car has run for 
around 90000 kms. It is silver in colour.
                )

            [2] => Array
                (

                    [title] => Maruti Alto
                    [description] => Maruti AltoMaruti AltoMaruti AltoMaruti AltoMaruti AltoMaruti Alto
                )

        )

    [6] => Array
        (
            [0] => Array
                (

                    [title] => LG 1.5 AC
                    [description] => LG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 AC
                )

        )

) 
```

我需要像这样在二维数组中收集所有值：

```
Array
(

          [0] => Array
                (

                    [title] => New Car 
                    [description] => hi i am 
                )

            [1] => Array
                (

                    [title] => Honda city for sale!
                    [description] => I want to sell my Honda city ( Make-1998) ( Model- 1.5 Exi). The car has run for 
around 90000 kms. It is silver in colour.
                )

            [2] => Array
                (

                    [title] => Maruti Alto
                    [description] => Maruti AltoMaruti AltoMaruti AltoMaruti AltoMaruti AltoMaruti Alto
                )

            [3] => Array
                (

                    [title] => LG 1.5 AC
                    [description] => LG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 ACLG 1.5 AC
                )

        )

) 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:39:31.553

这确实看起来非常像家庭作业......如果你确定只有两个级别，那么使用两个嵌套的 foreach 像这样：

```
$result = array();
foreach ($source as $subarray) {
foreach ($subarray as $item)
$result[] = $item;
} 
```

如果您有更多级别，则需要一个递归函数。

# c# - 如何在 Outlook 中为自定义按钮添加图像图标

> ID：10350211
> 
> 赞同：10
> 
> 时间：2012-04-27T11:57:59.237
> 
> 标签：c#, outlook, add-in, ribbon-control

我在 Outlook 中有一个自定义按钮，我必须为同一个按钮添加图像图标。

功能区 XML 是：

```
<button id="GoToAppConfiguration" 
    label="Application Configuration" 
    getImage="GetCustomImage" 
    onAction="GoToAppConfigurationClicked" 
    size="normal" /> 
```

我想编写功能区回调方法，但是如何编写相同的方法以及如何使用存储在 Addin 项目下的 Resource 文件夹中的图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T12:32:39.587

你只需要返回一个[`Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)from `GetCustomImage`。这是 ac# 示例，假设您已将 BMP 添加到[Project Resources](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.90%29.aspx)中。

```
public Bitmap GetCustomImage(Office.IRibbonControl control)
{
    return Properties.Resources.btnAppConfiguration_Image; // resource Bitmap
} 
```

# spring-mvc - 如何在 Spring 中验证会话？

> ID：10350221
> 
> 赞同：0
> 
> 时间：2012-04-27T11:58:51.400
> 
> 标签：spring-mvc

我已经在我的应用程序中实现了 HandlerInterceptorAdapter，在 preHandle 方法中，我正在检查会话是否具有“用户”属性。如果为空，那么我将重定向发送到登录页面。

```
if ( request.getSession().getAttribute("user")==null) {  
            System.out.println("hello");
            response.sendRedirect("login.htm");
            return true;
            }

        return super.preHandle(request, response, handler);
    } 
```

当我在浏览器中打开任何 url 时，我收到一条消息 Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我该怎么办请建议我！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:05:41.040

```
@RequestMapping(value="/index.html", method=RequestMethod.GET)
public String indexView(HttpServletRequest request){

if ( request.getSession().getAttribute("user")==null) {  
    System.out.println("hello");
     return "redirect:/login.html"
    }
else 
   return "index";
} 
```

坦率地说，我相信你应该使用 Spring Security。这是使用 Spring 实现 Web 容器安全性的更好、更少错误、更安全和快速的方法。

希望能帮助到你。

# macports - 500 OOPS：vsftpd：未配置为独立，必须从 inetd 启动

> ID：10350223
> 
> 赞同：4
> 
> 时间：2012-04-27T11:59:09.763
> 
> 标签：macports, ftp-server

我在使用 mac 端口安装 vsftpd 时遇到问题，当我想启动 vsftp 服务时

`sudo /opt/local/sbin/vsftpd`

我有这样的错误

`500 OOPS: vsftpd: not configured for standalone, must be started from inetd`.

任何人都可以建议我该怎么做？

这是我的 vsftpd.config

```
# Example config file /opt/local/etc/vsftpd.conf
#
# The default compiled in settings are fairly paranoid. This sample file
# loosens things up a bit, to make the ftp daemon more usable.
# Please see vsftpd.conf.5 for all compiled in defaults.
#
# READ THIS: This example file is NOT an exhaustive list of vsftpd options.
# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's
# capabilities.
#
# Allow anonymous FTP? (Beware - allowed by default if you comment this out).
anonymous_enable=YES
#
# Uncomment this to allow local users to log in.
#local_enable=YES
#
# Uncomment this to enable any form of FTP write command.
#write_enable=YES
#
# Default umask for local users is 077\. You may wish to change this to 022,
# if your users expect that (022 is used by most other ftpd's)
#local_umask=022
#
# Uncomment this to allow the anonymous FTP user to upload files. This only
# has an effect if the above global write enable is activated. Also, you will
# obviously need to create a directory writable by the FTP user.
#anon_upload_enable=YES
#
# Uncomment this if you want the anonymous FTP user to be able to create
# new directories.
#anon_mkdir_write_enable=YES
#
# Activate directory messages - messages given to remote users when they
# go into a certain directory.
dirmessage_enable=YES
#
# Activate logging of uploads/downloads.
xferlog_enable=YES
#
# Make sure PORT transfer connections originate from port 20 (ftp-data).
connect_from_port_20=YES
#
# If you want, you can arrange for uploaded anonymous files to be owned by
# a different user. Note! Using "root" for uploaded files is not
# recommended!
#chown_uploads=YES
#chown_username=whoever
#
# You may override where the log file goes if you like. The default is shown
# below.
#xferlog_file=/opt/local/var/log/vsftpd.log
#
# If you want, you can have your log file in standard ftpd xferlog format.
# Note that the default log file location is /opt/local/var/log/xferlog in this case.
#xferlog_std_format=YES
#
# You may change the default value for timing out an idle session.
#idle_session_timeout=600
#
# You may change the default value for timing out a data connection.
#data_connection_timeout=120
#
# It is recommended that you define on your system a unique user which the
# ftp server can use as a totally isolated and unprivileged user.
#nopriv_user=ftpsecure
#
# Enable this and the server will recognise asynchronous ABOR requests. Not
# recommended for security (the code is non-trivial). Not enabling it,
# however, may confuse older FTP clients.
#async_abor_enable=YES
#
# By default the server will pretend to allow ASCII mode but in fact ignore
# the request. Turn on the below options to have the server actually do ASCII
# mangling on files when in ASCII mode.
# Beware that on some FTP servers, ASCII support allows a denial of service
# attack (DoS) via the command "SIZE /big/file" in ASCII mode. vsftpd
# predicted this attack and has always been safe, reporting the size of the
# raw file.
# ASCII mangling is a horrible feature of the protocol.
#ascii_upload_enable=YES
#ascii_download_enable=YES
#
# You may fully customise the login banner string:
#ftpd_banner=Welcome to blah FTP service.
#
# You may specify a file of disallowed anonymous e-mail addresses. Apparently
# useful for combatting certain DoS attacks.
#deny_email_enable=YES
# (default follows)
#banned_email_file=/opt/local/etc/vsftpd.banned_emails
#
# You may specify an explicit list of local users to chroot() to their home
# directory. If chroot_local_user is YES, then this list becomes a list of
# users to NOT chroot().
chroot_local_user=YES
#chroot_list_enable=YES
# (default follows)
#chroot_list_file=/opt/local/etc/vsftpd.chroot_list
#
# You may activate the "-R" option to the builtin ls. This is disabled by
# default to avoid remote users being able to cause excessive I/O on large
# sites. However, some broken FTP clients such as "ncftp" and "mirror" assume
# the presence of the "-R" option, so there is a strong case for enabling it.
#ls_recurse_enable=YES
#
# When "listen" directive is enabled, vsftpd runs in standalone mode and
# listens on IPv4 sockets. This directive cannot be used in conjunction
# with the listen_ipv6 directive.
listen=YES
#
# This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6
# sockets, you must run two copies of vsftpd with two configuration files.
# Make sure, that one of the listen options is commented !!
#listen_ipv6=YES
#
# Name of pam module
pam_service_name=ftpd` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:07:46.110

我相信 vsftpd 的构建未配置为按照您尝试的方式启动。您要么必须安装配置为从命令行启动的构建，要么从 inetd 启动它，它会在初始引导期间启动服务。在 /etc/init.d 中查找启动脚本。在某些发行版中，有一个运行脚本来管理启动期间启动的服务。我没有MAC，所以我不能给你更多的指导，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:39:53.760

我发现了我的解决方案问题，只需将 vsftpd.config 重命名为 vsftpd.conf ，我不知道为什么当我重命名为在本地 Mac 中工作的 vsftpd.conf 时不读取 vsftpd.config 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T10:52:21.757

在 vsftpd.conf 中取消注释 listen=NO to listen=YES

# html - HTML/CSS：IE8 背景溢出边框

> ID：10350228
> 
> 赞同：1
> 
> 时间：2012-04-27T11:59:21.430
> 
> 标签：html, css, internet-explorer

在 IE8 中，我的一个按钮背景溢出了它的边框。这是突出问题的图像：

![愚蠢的IE8](../Images/c133034a14c777cdd31a65acb903059f.png)

一个活生生的例子可以在这里看到：[http ://rcnhca.org.uk/sites/first_steps/](http://rcnhca.org.uk/sites/first_steps/)

按钮的标记是：

```
<a class="button alpha bold" href="#">
   <img alt="rcn icon" src="http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/library/images/rcn-icon.png">
</a> 
```

还有css（我使用过滤器来绘制渐变而不是图像）：

```
a.button.alpha, a.button.alpha:focus {
    margin-left: 0px;
}

a.button.omega, a.button.omega:focus {
    margin-right: 0px;
}

a.button{
    display: block;
    position: relative;
    float: left;
    margin: 10px 5px;
    right: 0px;
    height: 2.438em;
    line-height: 2.438em;
    padding: 0 0.938em;
    border: #3a90a7 2px solid;
    font-size: 0.938em;
    text-decoration: none;
    color: #202d32;
    background: #ffffff;
    background: -moz-linear-gradient(top, #ffffff 0%, #e5e5e5 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e5e5e5));
    background: -webkit-linear-gradient(top, #ffffff 0%,#e5e5e5 100%);
    background: -o-linear-gradient(top, #ffffff 0%,#e5e5e5 100%);
    background: -ms-linear-gradient(top, #ffffff 0%,#e5e5e5 100%);
    background: linear-gradient(top, #ffffff 0%,#e5e5e5 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 );
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
}

.oldie a.button{
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 );
}

a.button:hover {
    border: #202d32 solid 2px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
}

a.button:active{
    padding-top: 0.125em;
    padding-left: 1.063em;
    padding-right: 0.813em;
    height: 2.313em;
    background: #e5e5e5; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: #cccccc;
    background: -moz-linear-gradient(top, #cccccc 0%, #cccccc 3%, #e5e5e5 5%, #ffffff 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#cccccc), color-stop(3%,#cccccc), color-stop(5%,#e5e5e5), color-stop(100%,#ffffff));
    background: -webkit-linear-gradient(top, #cccccc 0%,#cccccc 3%,#e5e5e5 5%,#ffffff 100%);
    background: -o-linear-gradient(top, #cccccc 0%,#cccccc 3%,#e5e5e5 5%,#ffffff 100%);
    background: -ms-linear-gradient(top, #cccccc 0%,#cccccc 3%,#e5e5e5 5%,#ffffff 100%);
    background: linear-gradient(top, #cccccc 0%,#cccccc 3%,#e5e5e5 5%,#ffffff 100%);
    -moz-box-shadow: 0 1px 2px #AAAAAA inset;
    box-shadow: 0 1px 2px #AAAAAA inset; 
}

.oldie a.button:active {
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e5e5e5', endColorstr='#ffffff',GradientType=0 );
}

a.button img {
    position: relative;
    margin-right: 15px;
    vertical-align: middle;
} 
```

有谁知道发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:16:28.177

我无法解释为什么，但是当您删除锚上的水平边距时，它可以解决问题（左右）

我最好的猜测是 IE 过滤器正在做一些不可预测的事情。

如果您包装元素然后对其应用边距，它应该可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:13:18.290

IE8 无法做到这一点，因为它不支持 css3 BTW 它在 IE9 中的工作。

有关 IE 和 CSS 兼容性的更多详细信息，请查看 [http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx)

# php - 挣扎于 PHP 扩展

> ID：10350230
> 
> 赞同：0
> 
> 时间：2012-04-27T11:59:33.747
> 
> 标签：php, pecl

我有一个使用一些简单扩展（curl、http_pecl、...）的 PHP 脚本。我使用 macports 安装在我的机器上，它运行良好。我试图让它在另一台机器上运行，但由于某种原因设置不同，并且 php 扩展拒绝安装。我的问题是，是否可以将 php 扩展与文件本身捆绑在一起，使其独立？我猜想在文件本身中包含扩展名，但我不知道该怎么做。

两台机器都运行 Mac OSX Lion，因此如果存在操作系统限制，则可以消除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:01:46.120

当然不可能。无论您的脚本需要什么扩展，都必须由管理员手动安装。像您描述的那样的替代方案将具有巨大的可靠性和安全性问题。

# c# - 重定向到发送请求的操作

> ID：10350231
> 
> 赞同：1
> 
> 时间：2012-04-27T12:00:11.350
> 
> 标签：c#, asp.net-mvc

我有一个控制器“Contracts”和 3 个 GET 方法：“All”、“Focus”（包含网格）和“Edit”用于编辑，还有一个 POST 方法：“Edit”。用户可以使用按钮从任何网格访问编辑。但是在执行 POST 之后，我想将它们重定向到发送请求的操作。例如：

1.  打开“焦点”网格
2.  选择行
3.  点击编辑
4.  进行更改，然后单击保存
5.  **最后重定向到“焦点”网格（！）**

或者

1.  打开“全部”网格
2.  选择行
3.  点击编辑
4.  进行更改，然后单击保存
5.  **最后重定向到“全部”网格（！）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:40:02.090

```
public ActionResul All()
{
  var items=dbContext.Items;
  return View("All",items);
} 
```

在`All`视图中，您将拥有包含数据的网格。从网格中选择一条记录并单击编辑将带您进入编辑的第二个操作方法。

您可以在此处调用编辑方法时传递一些标志。您可以在构建这样的编辑链接时添加它

```
@Html.ActionLink("Edit","Edit","Item",new { @id=item.Id, @from="all"},null) 
```

所以我的编辑将有一个查询字符串键“ `from`”，其值为“ `all`”

同样，在您的视图中`Focus`，您可以传递不同的值

```
@Html.ActionLink("Edit","Edit","Item",new { @id=item.Id, @from="focus"},null) 
```

现在是 Edit Action 方法，您读取参数并将其设置为我们的编辑视图模型的属性值。您可能希望将此属性添加到您的 ViewModel。

```
public ActionResult Edit(int id,string from)
{
  EditItemViewModel item=GetItem(id);
  item.From=from;      
  return View(item);
} 
```

这个视图将有编辑表单。我们将保留`From`表单元素中的值，以便我们可以在表单帖子中使用它。

```
@model EditItemViewModel 

@using(Html.BeginForm())
{
   @Html.HiddenFor(m => m.Id);
   @Html.TextBoxFor(m => m.ItemName)
   @Html.TextBoxFor(m => m.ItemDesc)
   @Html.HiddenFor(m => m.From)
   <input type="submit" value="Update" />
} 
```

用户可以在哪里编辑并再次提交。您在 HttpPost Edit 操作方法中处理它。检查 From 属性值并决定保存后重定向到哪里

```
[HttpPost]
public ActionResult Edit(EditItemViewModel model)
{
  if(ModelState.IsValid)
  {
    //Save data 
   if(model.From=="all")
       return RedirectToAction("All");
   else
       return RedirectToAction("Focus");
  }
  return View(model);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:33:18.273

我认为您的帖子编辑可以是这样的

单击具有（编辑/全部/1或编辑/焦点/2）的网格后，您可以重定向到此

```
 public ActionResult Edit(int id, yourviewmodel viewmodel,string YourFilter)
   {

           return RedirectToAction(YourFilter);
   } 
```

在 global.asax 中，您可以像这样为编辑提交设置路线

```
 routes.MapRoute(
            "filters",
            "All",
            new { controller = "Contracts", action = "All" }
        ); 

       routes.MapRoute(
            "filters1",
            "focus",
            new { controller = "Contracts", action = "focus" }
        ); 
```

编辑点击

```
 routes.MapRoute(
          "EditFilter",
          "Edit/{YourFilter}/{id}",
          new { controller = "Contract", action = "Edit",YourFilter = UrlParameter.Optional,id = UrlParameter.Optional }
      ); 
```

# php - 使用 Facebook 的 PHP 登录

> ID：10350236
> 
> 赞同：0
> 
> 时间：2012-04-27T12:00:22.813
> 
> 标签：php, facebook

我在使用 facebook 单点登录连接 php Web 应用程序时遇到问题。

这是我的设置

AppDomain : localhost 站点 URL: [http://localhost/shop/home.php](http://localhost/shop/home.php)

错误

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

我刚刚按照本教程[http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html](http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html)有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:52:28.830

本地主机不是有效域，在本地工作时几乎没有办法绕过该错误。

一种方法是使用[hostfile](http://en.wikipedia.org/wiki/Hosts_%28file%29)。

# android - Android Widevine HLS/DRM 支持

> ID：10350245
> 
> 赞同：5
> 
> 时间：2012-04-27T12:00:54.473
> 
> 标签：android, video-streaming, h.264, http-live-streaming, drm

Google 收购提供 DRM 支持以保护例如 HLS H.264/AAC 流的 Widevine 公司将很快 2 年。

根据[http://www.widevine.com/](http://www.widevine.com/)不仅支持 Android，还支持 iPhone/iPad 和 Wii 或 PS3 等游戏机。

有人使用过 Android Widevine DRM 吗？

问候， STeN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:04:18.180

您必须经过 google 认证才能使用 Widevine API。该认证称为CWIP，需要支付大量费用并完成课程。

# html - 在移动网站上嵌入 youtube 拇指显示

> ID：10350251
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:10.477
> 
> 标签：html, youtube, embed, mobile-website

当我使用以下代码在我的移动网站中嵌入 youtube 视频时：

```
<iframe width="60" height="40" src="http://www.youtube.com/embed/JW5meKfy3fY?controls=0&showinfo=0&showsearch=0&modestbranding=1"></iframe> 
```

我的 iPhone 上 web 视图中的拇指显示了这一点： ![在此处输入图像描述](../Images/661df28634b8d736851f01913e6d866c.png)

单击它后，视频开始正​​常播放，关闭电影时，拇指显示如下： ![在此处输入图像描述](../Images/baaa552f9edaf6aeb6eff29b60145ea7.png)

加载页面时，有没有办法像第二张图片一样显示拇指？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:50:15.133

您还可以使用来自 youtube 的拇指图像。

[http://img.youtube.com/vi/JW5meKfy3fY/1.jpg](http://img.youtube.com/vi/JW5meKfy3fY/1.jpg)

（我正在为 screenr 寻找相同类型的拇指图像 url）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:12:08.560

第二个图标是 iPhone 的默认媒体播放按钮，与 YouTube 播放器无关（我认为）。您可以尝试使用 JavaScript 嵌入 YouTube 播放器并使用 API 为播放器设置主题和样式：[https ://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

# c++ - 数组上的行操作

> ID：10350253
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:14.567
> 
> 标签：c++, matrix, rows

我必须做这个练习：

> 编写一个 C++ 函数，给定一个具有两个 NxN 大小的整数的数组，如果行具有所有相同的元素（即使在不同的位置），则返回 true，否则返回 false。

这是我的代码：

```
#include <iostream>

using namespace std;

const int N = 5;

bool fool ( const int a [N][N])
{
    int x,y = 0;
    int j=0;
    int i=0;

    bool check[N] = {false};
    bool verify = false;

    for (i=0; i<N; i++)
    {

       check[i] = false;

    }

       while(j<N && !verify )
       {

         if(a[x][i]==a[y][j] && !check[j] )
         {

            check[j]=true;
            verify=true;
         }

         j++;

       }

       return verify;

}

int main ()
{

    const int a[N][N] = {{1,3,5,6,7},
                         {5,6,7,1,3},
                         {1,6,5,3,7},
                         {6,1,3,5,7},
                         {6,5,1,7,3}};

    if ( fool(a))
    {

           cout << " in all rows there are the same elements";

    }

    else
    {

           cout << " wrong, . ";

    }

    return 0;

} 
```

但是程序崩溃了。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:04:37.073

```
while( int j<N && !verify ) 
```

不要`j`在循环内部声明，它应该在外部声明。我很惊讶这甚至可以编译（它不能在 Visual Studio C++ 中编译）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:07:46.573

暂时忘记崩溃。有很多编译器错误。

1)

```
bool check[N] = false; 
```

应该：

```
bool check[N] = {false} 
```

2）您`i`在`for`循环内声明，使其范围仅限于循环

```
for ( int i=0; i<N; i++) 
```

但是您`if`在循环外的语句中访问它。那是行不通的。要解决此问题，请在循环外声明变量。

3) 以下是不正确的：

```
while( int j<N && !verify ) 
```

`j`要解决此问题，请在循环外声明变量。

**崩溃的可能原因：**

变量`j`,`x`并`y`没有初始化，里面有垃圾。

# c++ - 查找与线段相交的所有图块

> ID：10350258
> 
> 赞同：3
> 
> 时间：2012-04-27T12:01:25.523
> 
> 标签：c++, math, optimization

我必须找到与线段相交的所有图块，但 Bresenham 的线算法不符合我的要求。我需要找到所有单元格。我不需要知道交点，只需要知道交点的事实。感谢帮助。

我想找到线的方向向量，并通过平铺大小的划分逐步找到单元格。但我不知道如何选择正确的步长。我认为 1 px 步骤很糟糕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T12:21:25.140

[这是](http://www.cse.yorku.ca/~amana/research/grid.pdf)Amanatides 和 Woo 的文章“A Fast Voxel Traversal Algorithm for Ray Tracing”，适用于 2D 和 3D 案例。[实际执行。](http://www.flipcode.com/archives/Raytracing_Topics_Techniques-Part_4_Spatial_Subdivisions.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:26:25.080

您可以使用以下网址中的众多线方程之一：[http](http://www.cut-the-knot.org/Curriculum/Calculus/StraightLine.shtml) ://www.cut-the-knot.org/Curriculum/Calculus/StraightLine.shtml或[http://mathworld.wolfram.com/Line.html](http://mathworld.wolfram.com/Line.html)

假设您的坐标系中的线穿过两个点，您可以推导出`y=mx+n`方程并与您的瓷砖相匹配，看看它们是否相交，同时以您的坐标系为单位从瓷砖的最小 x 向您喜欢的任何方向移动 x直到最大。如果你的坐标系是屏幕，1个像素就足够了。

这是我可以提示正确知道的关闭，而无需更多地了解您所面临问题的确切性质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:51:33.513

修改 Bresenham 算法很容易，以便跟踪您的需求。这是算法的相关片段：

```
plot(x,y);
error = error + deltaerr;
if (error >= 0.5)
{
    y = y + ystep;
    error = error - 1.0;
} 
```

为了跟踪所有单元格，我们需要另一个变量。请注意，我没有严格检查这一点。

```
plot(x,y);
olderror = error.
error = error + deltaerr;
if (error >= 0.5)
{
    y = y + ystep;
    error = error - 1.0;
    extra = error+olderror;

    if (extra > 0)
    {
      plot (x,y); /* not plot (x-1,y); */
    }
    else if (extra < 0)
    {
      plot (x+1,y-1); /* not plot (x+1,y); */
    }
    else
    {
      // the line goes right through the cell corner
      // either do nothing, or do both plot (x-1,y) and plot (x+1,y)
      // depending on your definition of intersection           
    }
} 
```

# uitableview - 更改文本标签单元格uitableview不同行中的文本大小

> ID：10350261
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:32.380
> 
> 标签：uitableview, textlabel

我创建了一个 uitableview，在每个单元格中都有一个 textLabel。

```
cell.textLabel.numberOfLines = 0;
cell.textLabel.text = [NSString stringWithFormat:@"Hello\n how are you?"];
UIFont *myFont = [ UIFont fontWithName: @"Novel" size: 6.0 ];
cell.textLabel.font  = myFont; 
```

我可以将“你好”的字体设置为 10，将“你好吗？”的字体设置为 到 6？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T12:39:34.663

按照以下操作：

```
UILabel *flabel = [[UILabel alloc]init];
flabel.text = @"Hello";
flabel.font = [UIFont fontWithName:flabel.text size:10];
UILabel *slabel = [[UILabel alloc]init];
slabel.text = @"How are you?";
slabel.font = [UIFont fontWithName:slabel.text size:6];
cell.textLabel.text = [NSString stringWithFormat:@"%@\n%@",flabel.text,slabel.text]; 
```

我创建了两个具有不同字体大小的不同标签，并通过连接两个字符串将其设置为单元格文本标签。希望这应该有效。

# jquery - 尽管我使用了 wmode = transparent，但 Flash 效果仍在弹出 div 上

> ID：10350262
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:32.710
> 
> 标签：jquery, flash, jquery-ui-datepicker

我正在使用 jquery Ui datepicker 插件，我有一个包含 swf 元素的潜水，它使用带有选项的 swfobject 脚本：(wmode:transparent) 和 (wmode:opaque)

我可以查看 datepicker，但问题是 flash 仍然在 datepicker 上的影响。

当我单击包含透明闪存的区域上方的日期选择器时，单击事件会影响闪存而不是日期选择器脚本。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:03:11.470

尝试更改 z 索引，同时将 wmode 设置为透明 :)

# php - Doctrine2：同步集合/添加多个可能已经存在的元素

> ID：10350263
> 
> 赞同：1
> 
> 时间：2012-04-27T12:01:34.033
> 
> 标签：php, doctrine-orm

所以我有一个字符串，代表几个对象（在这种情况下是标签），即：“php，mysql，doctrine2”假设我的数据库已经有“php”和“doctrine2”。现在我想要添加缺失元素的最佳方法（在本例中为 mysql）。

我应该为每个元素创建一个对象并只使用持久/同步或其他东西，还是有更好的方法？

无论如何，我需要最后的所有对象将它们添加到一个新对象（具有简单的多对多关系）。

我会很高兴有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:08:54.773

1) 使用单个查询将所有标签名称提取到数组中

2) 使用 array_filter 和闭包来检测数据集中不存在的标签

3）为新标签创建插入

```
$currentTags = getCurrentTagsArray();
$newTags = explode(',', 'php,mysql,doctrine2');

$newTagsToSave = array_filter($currentTags, function($item) use ($newTags){
    if (in_array($item, $newTags))
    {
       return false;
    }
    return true;
}); 
```

或者...

您可以使用 Doctrine 2 的 ArrayCollection 包装器 (\Doctrine\Common\Collections\ArrayCollection())，它与上述过滤器方法的实现几乎相同（您仍然需要传递闭包）。

```
$myCollection->filter($closure); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T18:41:32.163

我有一个类似的问题，我必须将实体集合与外部源同步。但是，我的问题不仅需要添加，还需要更新和删除。我使用代码将 ArrayCollection 与另一个数组进行比较，并根据差异调用 CRUD 方法添加。据我从文档中可以看出，学说本身并不能处理这个问题。平均性能应该是 O(n) 但需要一些内存。

```
/**
 * @param array $source - the array we are starting with
 * @param array $new - the array we want to end with
 * @param $fnHash - function used to determine object equality, not based on object id
 * @param $fnUpdate - function to perform update of existing object, takes current object and new object as params
 * @param $fnAdd - function to perform insert
 * @param $fnDelete - function to perform delete
 */
public static function syncArrays(array $source, array $new,
        $fnHash, $fnUpdate, $fnAdd, $fnDelete)
{
    // make modifiable array copies mapped by hashes of the elements

    $sourceKeys = array_map($fnHash, $source);
    $hasKeys =count($sourceKeys) > 0;
    $newarray = ($hasKeys) ? array_combine(array_map($fnHash, $new), $new) : $new;
    if ($hasKeys) { // true => may have updates or deletes
        $sourcearray = array_combine($sourceKeys, $source);

        // updates
        foreach ($sourceKeys as $hashkey) {
            if (isset($sourcearray[$hashkey]) && isset($newarray[$hashkey])) {
                $fnUpdate($sourcearray[$hashkey], $newarray[$hashkey]);
                unset($sourcearray[$hashkey]);
                unset($newarray[$hashkey]);
            }
        }

        // deletes
        foreach ($sourcearray as $entity) {
            $fnDelete($entity);
        }
    }
    //adds
    foreach ($newarray as $entity) {
        $fnAdd($entity);
    }
} 
```

我调用它来更新我的学说协会 $parentEntity->getPayments() 的方式是：

```
ArrayHelper::syncArrays($parentEntity->getPayments()->toArray(), $newPayments,
    function($entity) {return $a->getName();}, // hash function
    function($current, $new) {
        $current->setTotal($new->getTotal()); // update function
    },
    function($a) use ($parent, $manager) {
        $parent->addVendorPaymentObject($a);  // add function
        $manager->persist($a);
    },
    function($a) use ($manager) {  // delete function
        $manager->remove($a);
    }
); 
```

# javascript - 如何单击图像使其放大 HTML 中的弹出窗口

> ID：10350264
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:37.560
> 
> 标签：javascript, html

我有图形图像，我希望当我单击图像时，图像应放大弹出窗口，以便轻松查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:03:15.190

`target="_blank"`使用属性和`href`指向缩放图像 URL的属性添加指向图像的链接。

# mysql - mySQL 中子查询的结构以获得最佳性能

> ID：10350265
> 
> 赞同：4
> 
> 时间：2012-04-27T12:01:41.230
> 
> 标签：mysql, sql, database, performance, subquery

在 MS SQL Server 中，此查询正常运行：

```
SELECT column1
    , (SELECT RelatedColumn1 FROM tbl_related WHERE record_id=a1.record_id) AS pseudocolumn1
    , (SELECT RelatedColumn2 FROM tbl_related WHERE record_id=a1.record_id) AS pseudocolumn2
    , (SELECT RelatedColumn3 FROM tbl_related WHERE record_id=a1.record_id) AS pseudocolumn3
    , (SELECT RelatedColumn4 FROM tbl_related WHERE record_id=a1.record_id) AS pseudocolumn4
     ... [20 or more subqueries here] ...
FROM tbl_primary a1 
```

然而，在 mySQL 中，这运行得非常慢——并且随着您添加更多子查询，性能会继续下降。我确信它与幕后操作的顺序有关，但我的问题是如何优化这个查询？如何将第二个表中的所有值转换为结果集中的列？希望这不必通过多个 JOIN 语句来完成（因为我不太了解 JOINS）...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:05:39.587

我建议您使用`LEFT JOIN`相关表。因为如果您使用 a `JOIN`then 如果 tbl_related 没有该 id 的行，那么该行将从结果中排除。

```
SELECT
    column1,
    tbl_related.RelatedColumn1,
    tbl_related.RelatedColumn2,
    tbl_related.RelatedColumn3,
    tbl_related.RelatedColumn4,
    tbl_related.RelatedColumn5
    .....
FROM
    tbl_primary a1
LEFT JOIN tbl_related 
    ON tbl_related.record_id=a1.record_id 
```

你知道：

```
SELECT
    (SELECT RelatedColumn1 FROM tbl_related WHERE record_id=a1.record_id) 
    AS pseudocolumn1 
```

可能会在将来引起问题。如果您的子查询之一返回多于一个值会发生什么？你可能会得到一个异常，说子查询不能返回更多的一个值。因此，如果您打算将来进行这样的子查询。至少`TOP 1`在它们上面有一个，这样查询就不会崩溃。像这样：

```
SELECT
    (SELECT TOP 1 RelatedColumn1 FROM tbl_related WHERE record_id=a1.record_id) 
    AS pseudocolumn1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:04:11.460

SQL 101：

```
SELECT 
    column1,
    r.RelatedColumn
FROM tbl_primary a1
JOIN tbl_related r
ON r.record_id = a1.recordId 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:08:16.477

您应该使用该`JOIN`子句

```
 SELECT a1.column1,
        rt.RelatedColumn
 FROM tbl_primary a1
 LEFT JOIN tbl_related ON a1.record_id = rt.record_id 
```

# modelica - 输入和输出连接器的连接限制

> ID：10350267
> 
> 赞同：0
> 
> 时间：2012-04-27T12:01:47.937
> 
> 标签：modelica

我想强制用户不能将输入连接到输入。我希望下面的代码给出编译时错误，但它没有给出错误。**我怎样才能解决这个问题？**

另一个问题是包全局编译时常量`C`。它是一种参数，应该由包的用户提供。**这应该如何在 Modelica 中实现？**

```
package Pkg

  constant Integer C=3;

  connector Connector
    Real x[C];
  end Connector;

  connector InConn  = input  Connector;
  connector OutConn = output Connector;

  class Base
    InConn[:]  inlet;
    OutConn[:] outlet;
  end Base;

  class A
    extends Base;
    redeclare InConn[1]  inlet;
    redeclare OutConn[1] outlet;
  end A;

end Pkg;

model Test
  import Pkg.*;
  A p;
  A q;
  equation
    connect(p.inlet[1], q.inlet[1]);
end Test; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:39:56.273

这里有几个问题。主要是您的重新声明`A`不正确。它们应该是对`extends`条款的修改。但也要注意，它们甚至没有必要，因为它们实际上并没有改变任何东西。应通过参数指定尺寸。

同样，常量确实需要成为您`Connector`定义的参数。如果您连接两个不同大小的连接器，Modelica 编译器应该会抛出错误（具体来说，它应该对连接集中的任何参数的值生成一个断言）。

我没有在这台机器上安装 Modelica 编译器，但我建议你试试这个，看看它是否更适合你：

```
package Pkg

  connector Connector
    parameter Integer C=3;
    Real x[C];
  end Connector;

  connector InConn  = input  Connector;
  connector OutConn = output Connector;

  class Base
    parameter Integer ni;
    parameter Integer no;
    InConn[ni]  inlet;
    OutConn[no] outlet;
  end Base;

  class A
    extends Base(ni=1, no=1);
  end A;

end Pkg;

model Test
  import Pkg.*;
  A p;
  A q;
equation
  connect(p.inlet[1], q.inlet[1]);
end Test; 
```

希望这将使事情进入编译器将生成正确错误的状态。Modelica 的语义是两个输入的连接**应该**触发错误（实际上，这是输入和输出连接器的基本限制）。

# postgresql - Erlang 和 PostgreSQL

> ID：10350272
> 
> 赞同：1
> 
> 时间：2012-04-27T12:02:04.883
> 
> 标签：postgresql, erlang

我尝试使用 erlang 和 epgsql 执行简单的 PostgreSQL 查询。

我愿意：

```
{ok, C} = pgsql:connect("localhost", "shk", "qwerty", [{database, "mydb"}]).
>> {ok,<0.34.0>} 
```

然后：

```
{ok, Cols, Rows} = pgsql:squery(C, "select * from users"). 
```

但我得到了错误：

```
=ERROR REPORT==== 27-Apr-2012::17:58:23 ===
** State machine <0.34.0> terminating 
** Last message in was {'EXIT',<0.32.0>,
                        {{badmatch,
                          {error,
                           {error,'ð\236ð¨ð\230ð\221ð\232ð\220',<<"42P01">>,
                            <<208,190,209,130,208,189,208,190,209,136,208,181,
                              208,189,208,184,208,181,32,34,109,121,100,98,34,
                              32,208,189,208,181,32,209,129,209,131,209,137,
                              208,181,209,129,209,130,208,178,209,131,208,181,
                              209,130>>,
                            [{position,<<"15">>}]}}},
                         [{erl_eval,expr,3}]}}
** When State == ready
**      Data  == {state,undefined,<0.35.0>,5000,
                        [{<<"application_name">>,<<>>},
                         {<<"client_encoding">>,<<"UTF8">>},
                         {<<"DateStyle">>,<<"ISO, DMY">>},
                         {<<"integer_datetimes">>,<<"on">>},
                         {<<"IntervalStyle">>,<<"postgres">>},
                         {<<"is_superuser">>,<<"off">>},
                         {<<"server_encoding">>,<<"UTF8">>},
                         {<<"server_version">>,<<"9.0.7">>},
                         {<<"session_authorization">>,<<"shk">>},
                         {<<"standard_conforming_strings">>,<<"off">>},
                         {<<"TimeZone">>,<<"posixrules">>}],
                        undefined,undefined,undefined,
                        {30932,488494147},
                        {statement,undefined,undefined,undefined},
                        73}
** Reason for termination = 
** {{badmatch,{error,{error,'ð\236ð¨ð\230ð\221ð\232ð\220',<<"42P01">>,
                            <<208,190,209,130,208,189,208,190,209,136,208,181,
                              208,189,208,184,208,181,32,34,109,121,100,98,34,
                              32,208,189,208,181,32,209,129,209,131,209,137,
                              208,181,209,129,209,130,208,178,209,131,208,181,
                              209,130>>,
                            [{position,<<"15">>}]}}},
    [{erl_eval,expr,3}]} 
```

我怎么了？我该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:10:24.877

如果我识别字符，错误字符串似乎是俄语。

要查看响应，您可以使用以下命令：

```
io:format("~ts",[<<208,190,209,130,208,189,208,190,209,136,208,181,
                   208,189,208,184,208,181,32,34,109,121,100,98,34,
                   32,208,189,208,181,32,209,129,209,131,209,137,
                   208,181,209,129,209,130,208,178,209,131,208,181,
                   209,130>>]).
отношение "mydb" не существует 
```

一个快速的谷歌翻译让我觉得数据库 mydb 不存在或者你没有使用它的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:33:45.917

来自 epgsql[文档](https://github.com/wg/epgsql)：

> 错误
> 
> 来自 PostgreSQL 后端的错误返回为 {error, #error{}}，请参阅 pgsql.hrl 了解记录定义。epgsql 函数也可能返回 {error, What} 其中 What 是以下之一：
> 
> {unsupported_auth_method, Method} - 所需的身份验证方法不受支持 timeout - 请求超时关闭 - 连接已关闭 sync_required - 发生错误并且必须调用 pgsql:sync

尝试包含 pgsql.hrl，捕获错误并打印错误消息，这应该指向正确的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:13:35.940

尝试简单地做

```
Response = pgsql:squery(C, "select * from mydb"), 
io:format("~p~n",[Response]). 
```

看看他从服务器返回了什么，也许你有错字或表格不存在等。

也看看这个[http://www.erlangatwork.com/2009/01/erlang-and-postgresql.html](http://www.erlangatwork.com/2009/01/erlang-and-postgresql.html)

# javascript - 使用关联数组作为变量名？- javascript

> ID：10350273
> 
> 赞同：5
> 
> 时间：2012-04-27T12:02:11.780
> 
> 标签：javascript, firefox, firefox-addon, associative-array

我正在查看来自 firefox 扩展的一些代码（此处：[https](https://github.com/mozilla/prospector/blob/master/oneLiner/bootstrap.js#L34) ://github.com/mozilla/prospector/blob/master/oneLiner/bootstrap.js#L34 ），我看到了一些我以前在 javascript 中从未见过的东西。程序员使用关联数组作为变量名。有人可以向我解释这个变量引用是如何工作的吗？

```
const {classes: Cc, interfaces: Ci, utils: Cu} = Components; 
```

我通过阅读此页面了解“const”：[https ://developer.mozilla.org/en/JavaScript/Reference/Statements/const](https://developer.mozilla.org/en/JavaScript/Reference/Statements/const)

但是它如何能够使用关联数组对象作为变量名呢？

此外，它似乎使用关联数组中的键名作为对组件方法的引用（在此处列出：[https](https://developer.mozilla.org/en/Components_object) ://developer.mozilla.org/en/Components_object ）。我一直认为必须先有键名，然后才是值，但这似乎是将引用的值放在 Components 类方法中，然后将其分配给 Cc 的名称，即使 Cc 位于值的位置会去（和组件接口方法的 Ci 和组件工具方法的 Cu）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T12:05:58.837

您所看到的是解构分配，它自 javascript 1.7 起可用，请参阅此文档以获取更多信息[https://developer.mozilla.org/en/JavaScript/New_in_JavaScript/1.7](https://developer.mozilla.org/en/JavaScript/New_in_JavaScript/1.7)

> 解构赋值使得使用反映数组和对象字面量构造的语法从数组或对象中提取数据成为可能。对象和数组文字表达式提供了一种创建临时数据包的简单方法。一旦你创建了这些数据包，你就可以以任何你想要的方式使用它们。您甚至可以从函数中返回它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:11:13.890

是的，看看这个：

```
var abc = {classes: "ABC", interfaces: "DEF", utils: "XYZ"};
const {classes: Cc, interfaces: Ci, utils: Cu} = abc;
console.debug("test: ", Cc, Ci, Cu); 
```

看起来很有趣，尤其是对于正在阅读代码的人来说 :)

# caliburn.micro - 是否所有方法都必须公开 Caliburn.Micro 才能匹配它们

> ID：10350286
> 
> 赞同：0
> 
> 时间：2012-04-27T12:03:00.360
> 
> 标签：caliburn.micro

我刚开始使用 Caliburn.Micro，我注意到所有示例中的方法都是公开的。我决定通过添加一个按钮来测试它：

```
x:Name="CloseMainWindow" 
```

在我的虚拟机中，我添加了一个方法：

```
private void CloseMainWindow()
{
  TryClose();
} 
```

当我单击按钮时，什么也没有发生，我也没有遇到断点，但是如果我将方法更改为 public，它就可以工作。我看不出这是最好的方法。

为所有方法创建 ICommand 属性是可接受的解决方案吗？

**编辑：**我刚刚阅读了上面问题的答案，Caliburn.Micro 中没有也永远不会有 ICommands。所以我最初的问题仍然需要一个答案，为什么所有东西都必须在 VM 中公开，这是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:20:59.193

我不知道您所说的“这安全吗？”。比什么更安全？

无论如何，Caliburn.Micro*本来可以*设计为允许其约定绑定到私有方法，但这有几个缺点。首先，它不能在部分信任的环境中工作，例如 Silverlight 或 XBAP 或沙盒插件。您需要完全信任才能使用 Reflection 访问私有成员，而 Caliburn.Micro 旨在能够在部分信任下运行（毕竟它确实支持 Silverlight）。

但更大的原因是它会违反封装。这些是您*打算*从类外部调用的方法。（毕竟，视图是一个单独的类；如果您在代码隐藏中自己连接它，则必须将 viewmodel 方法公开。）有一个词表示“我打算从我自己的类之外调用它" 在语言规范中，那是`public`. 如果你设置了一些从类外部调用私有方法的魔法，那么你就违反了封装和最小惊讶原则，因为这不是什么`private`意思。

If you really want to be able to bind to private methods, you can customize the conventions. But it would make your code much harder to understand, so I wouldn't recommend it unless you can come up with a really good justification.

# php - 创建一个临时表，并用另一个表中的数据填充一个字段，并用逗号分隔该数据

> ID：10350306
> 
> 赞同：0
> 
> 时间：2012-04-27T12:04:15.860
> 
> 标签：php, mysql

我正在制作一个临时表，它是来自其他两个表的数据的摘要，并将其输出到电子表格。

这些表是“cruises”和“itinerary”，并且 Cruises 表列出了一些 Cruises ，并且通过 id 与该表相关的是 itinerary 表，其中包含该游轮上每个停靠港的一行。

邮轮表：

*   id, title, 出发, 代码, 持续时间

行程表：

*   id、cruise_id、日期、港口、订单

我想把这些数据放在一起，像这样

*   Cruise_id：游轮的id
*   描述字段包含游轮访问的所有港口，用逗号分隔，甚至可能在游轮当天订购

这是到目前为止的代码，我还没有从行程表中选择任何东西

```
<?php require_once('includes/session.php'); ?>
<?php require_once('includes/connection.php'); ?>
<?php require_once('includes/functions.php'); ?>
<?php confirm_logged_in(); ?>

<?php 

$maketemp = "CREATE TEMPORARY TABLE temp(`itineraryId` int NOT NULL, `live` varchar(1), `shipCode` varchar(15), `description` text, `length` varchar(10), PRIMARY KEY(itineraryId))"; 

mysql_query( $maketemp, $connection ) or die ( "Sql error : " . mysql_error ( ) );

$inserttemp = "INSERT INTO temp SELECT id AS itineraryId, live, ship AS shipCode, description AS description, duration AS length FROM cruises WHERE live ='Y'";

mysql_query( $inserttemp, $connection ) or die ( "Sql error : " . mysql_error ( ) );

$select = "SELECT itineraryId, shipCode, description, length FROM temp";

$export = mysql_query ( $select, $connection ) or die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . "\t";
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
    {                                            
        if ( ( !isset( $value ) ) || ( $value == "" ) )
        {
            $value = "\t";
        }
        else
        {
            $value = strip_tags( $value );
        $value = str_replace( array('&nbsp;'),'',$value );
        $value = str_replace( array('Ocean Countess'), 'OC', $value );
        $value = str_replace( array('Marco Polo'), 'MP', $value );
        $value = str_replace( array('Nights', 'nights', 'Night', 'night'), '', $value);
        $value = str_replace( '"' , '""' , $value );
        $value = '"' . $value . '"' . "\t";
    }
    $line .= $value;
}
$data .= trim( $line ) . "\n";
}
$data = str_replace( "\r" , "" , $data );

if ( $data == "" )
{
$data = "\n(0) Records Found!\n";                        
}

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=itinerary.xls");
header("Pragma: no-cache");
header("Expires: 0");
print "$header\n$data";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:10:41.920

您正在 MySQL 中寻找[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)函数。

这将允许您按 Cruise_id 分组，并按天排序。

# apache - 在 80 端口上运行 Opa 服务器

> ID：10350310
> 
> 赞同：2
> 
> 时间：2012-04-27T12:04:33.747
> 
> 标签：apache, deployment, opa

在端口 80 上运行 opa 应用程序的最干净的方法是什么：

*   以 root 身份运行 opa 应用程序？
*   使用iptable将8080端口重定向到80端口
*   在 apache 服务器后面运行 opa 应用程序并使用 ProxyPass 将端口 8080 重定向到 apache 端口 80？

谢谢

凯曼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:17:38.873

您可以使用：

*   `Authbind`通过非特权用户直接在端口 80 上启动您的应用程序
*   或在代理后面启动应用程序，如`nginx`or `haproxy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:07:46.743

选项 3：使用反向代理，例如 nginx（Apache 在这里会过大）并将 opa 保留在端口 8080 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T18:48:11.960

以下是我在我的 apache/vhost 服务器上为仅在一个域上运行 Opa 应用程序所做的操作。它需要您的 apache 服务器上的 mod_proxy。

1.  在端口 8081 上以非特权用户身份运行 Opa。
2.  在apache中配置虚拟主机如下：

    ```
    <VirtualHost *:80>
      ServerAdmin me@example.org
      ServerName www.example.com
      ServerAlias example.com
      DocumentRoot /var/www/domains/example.com/www/htdocs
      ErrorLog /var/log/apache2/www.example.com-error_log
      CustomLog /var/log/apache2/www.example.com-access_log common

      ProxyPreserveHost On
      ProxyRequests Off

      <Proxy *>
        Order deny,allow
        Allow from all
      </Proxy>

      ProxyPass / http://localhost:8081/
      ProxyPassReverse / http://localhost:8081/
    </VirtualHost> 
    ```

这会将所有对 example.com 的请求转发到在端口 8081 上运行的 opa 服务器。

# android - Android 市场安装数量需要多长时间才能更新？

> ID：10350312
> 
> 赞同：6
> 
> 时间：2012-04-27T12:04:44.367
> 
> 标签：android

我找不到任何说明更新需要多长时间的信息。我发布了一个应用程序，它可用并且在那里。当我在 google play 上访问我的开发者控制台时，它说它有 0 次下载。我知道这不是真的，因为我收到了一些错误报告，并且我还在我自己的几个设备上下载了它。你知道大概需要多长时间才能更新吗？有谁知道经验吗？这是为了我的论文，所以我真的可以用一些数字来保证时间的准确性。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:04:05.783

如果您在**Android Developer Console**中单击应用程序的“统计信息”链接，在统计信息页面的底部，您可以看到

> 应用统计信息每天更新。

我所看到的是更新发生在世界标准时间 12:00 左右。时间不是恒定的，有几分钟的差异。

# jquery - JQuery / JQuery Mobile：更新选择菜单

> ID：10350315
> 
> 赞同：0
> 
> 时间：2012-04-27T12:04:56.097
> 
> 标签：jquery, jquery-mobile

我正在尝试使用数组的值初始化一个选择菜单，并且我希望选择一个特定的条目。我可以使用以下代码创建包含所需值的列表：

```
var myArray = new Array()
myArray = ["a", "b", "b", "d", "e", "f"];

function updateSelectMenu(){
    for (var i = 0, len = myArray.length; i < len; i++) {
        if (i == 2) {
            $("#myArraySelectMenu")
                .append($('<option>')
                .attr('value', myArray[i])
                .attr('selected', "selected")
                .text(myArray[i]+"text"))
        }
        else {
            $("#myArraySelectMenu")
                .append($('<option>')
                .attr('value', myArray[i])
                .text(myArray[i]+"text"))
        }
    }
} 
```

我的问题是：在单击查看所有选项之前，所选条目未出现在下拉区域中。

[即使它被选中，我也看不到顶部的值](https://i.stack.imgur.com/uGTrS.jpg)：

![即使它被选中，我也看不到顶部的值](../Images/a7e7946907ac8ec8ca16d3817f72f3c9.png)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:17:27.213

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>jQuery Mobile Docs - Select</title>
    <link rel="stylesheet" href="../../../jquery.mobile-1.0.1.min.css" />
    <link rel="stylesheet" href="../../_assets/css/jqm-docs.css" />
    <script src="../../../jquery.js"></script>
    <script src="../../../experiments/themeswitcher/jquery.mobile.themeswitcher.js"></script>
    <script src="../../_assets/js/jqm-docs.js"></script>
    <script src="../../../jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.each(['a', 'b', 'c', 'd', 'e', 'f'], function (i, value) {
                if (i == 2) {
                    $("#myArraySelectMenu").append($('<option />', { 'value': value, 'selected': 'selected' }).text(value + 'text'));
                }
                else {
                    $("#myArraySelectMenu").append($('<option />', { 'value': value }).text(value + 'text'));
                }
            });

            $("#myArraySelectMenu").selectmenu('refresh');
        });
    </script>
</head>
<body>
    <div data-role="fieldcontain">
        <label for="select-choice-7" class="select">
            Array Mio:</label>
        <select name="select-choice-7" id="myArraySelectMenu">
        </select>
    </div>
</body>
</html> 
```

# iphone - 为 iphone sdk 自定义 AddThis 共享菜单？

> ID：10350317
> 
> 赞同：2
> 
> 时间：2012-04-27T12:05:07.520
> 
> 标签：iphone, objective-c, ios, addthis

任何人都知道如何自定义 AddThis ShareMenu 紧凑视图以添加附加选项，例如linkedIn。而且我还有另一个关于 iPhone 中 Tumblr 和 Delicious 的大小的问题。它在 ipad 和 iphone 中完美运行，Tumblr 和 Delicious 视图的大小扩大了 iphone 的大小。

[添加此参考](http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:01:26.763

**我通过使用下面给出的简单 api 方法解决了第一个问题**

```
[AddThisSDK setFavoriteMenuServices:@"facebook",@"twitter",@"linkedin",@"delicious",@"tumblr",nil]; 
```

**剩下的另一个问题是根据 iphone 调整 tumblr、delicious 和linkedIn 的大小。它的大小是根据 ipad 而不是 iphone。**

# google-api-php-client - Task->setLink 是如何工作的？

> ID：10350321
> 
> 赞同：1
> 
> 时间：2012-04-27T12:05:31.397
> 
> 标签：google-api-php-client, google-tasks-api

在 Google Tasks API 网站 > 参考 > 任务 > ( [https://developers.google.com/google-apps/tasks/v1/reference/tasks](https://developers.google.com/google-apps/tasks/v1/reference/tasks) ) 上向下滚动到“资源表示”。

看起来我可以为我的任务添加一个链接（就像 Gmail 在您将电子邮件设置为任务时所做的那样）。ApiTaskService.php 还包括一个类：`TaskLinks`. 但是当我尝试它时，添加的 url 就不会出现在任务中。难道我做错了什么？我应该将其设置为什么“类型” `TaskLink`？

代码：

```
$linkid = array_push($links,new TaskLinks())-1;
$links[$linkid]->setType("website");
$links[$linkid]->setLink($issue_url);
$links[$linkid]->setDescription("{$issue['id']}");

$task = new Task();
$task->setTitle($title);
$task->setNotes($notes);
$task->setDue($due);
$task->setLinks($links); 
```

它不会返回任何错误，但也不会改变任务......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:48:11.230

[这个页面](https://developers.google.com/google-apps/tasks/v1/reference/tasks)说链接集合是只读的，所以现在显然没有办法设置链接。然而，一些库确实提供了 slugs 以在未来实现此功能。

# jquery - 输入键上的 jquery 选项卡只能工作一次

> ID：10350325
> 
> 赞同：0
> 
> 时间：2012-04-27T12:05:41.427
> 
> 标签：jquery

我正在尝试实现在 enter 键上工作的 jquery 选项卡，以便在按下 enter 键时控件传递到下一个按回车键进入下一个选项卡它不起作用。我 为此使用 jquery 选项卡[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

```
$("#tab-div").keypress(function (e) {

        if (e.which == 13) {
            var selected = $("#tab-div").tabs("option", "selected");
            $("#tab-div").tabs("option", "selected", selected + 1);
            return true;
        }
    }); 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:20:43.163

尝试`bind`将事件传递给元素或使用`live`

```
$("#tab-div").live("keypress", function (e) {
    if (e.which == 13) {
        var selected = $("#tab-div").tabs("option", "selected");
        $("#tab-div").tabs("option", "selected", selected + 1);
        return true; //this might not be required
    }
}); 
```

# ruby-on-rails-3 - Rails 以错误的格式响应

> ID：10350326
> 
> 赞同：0
> 
> 时间：2012-04-27T12:05:45.043
> 
> 标签：ruby-on-rails-3

我有以下动作：

```
def something
  # do something
  respond_to do |format|
    format.js
  end
end 
```

我的控制器中也有一个`something.html.erb`模板。

*   当我 GET /controller/something 时，它什么也不返回。
*   当我获取 /controller/something.js 时，它会呈现没有布局的 html。
*   当我 XHR GET /controller/something 时，它会呈现没有布局的 html。

我希望它会“返回未找到模板的错误”错误，而不是呈现 html 模板。

**这是 Rails 的错误还是我做错了什么？**

*   导轨 v3.0.4
*   红宝石 v1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:33:55.410

我认为这是因为“约定优于配置”的原则。如果您没有在控制器的操作中指定`render`或`redirect_to`，rails 会使用与方法相同的名称呈现视图。查看[Rails 渲染指南](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action)

# oracle - 甲骨文 SQL | 修改 ORDER BY 中的数据

> ID：10350330
> 
> 赞同：0
> 
> 时间：2012-04-27T12:06:12.970
> 
> 标签：oracle, oracle10g, sql-order-by

ORACLE 表中的以下结构：

```
FILE_NAME
-----------
12345_l.tif
12345_m.tif
12345_r.tif
12345_x.tif
12345_y.tif 
```

需要以下结果：

```
First *_m*
Then *_l*
Then *_r*
Then * (everything else) 
```

尝试：

```
SELECT FILE_NAME FROM TABLE
WHERE FILE_NAME LIKE '12345%'
ORDER BY regexp_replace(FILE_NAME, '_m', '_1'),
         regexp_replace(FILE_NAME, '_l', '_2'),
         regexp_replace(FILE_NAME, '_r', '_3') 
```

但这给了我一个错误的结果。

有人有提示吗？

TIA 马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:15:56.817

更改您的 ORDER BY 以按数字排序：

```
 ORDER BY regexp_replace(FILE_NAME, '_m', 1),
          regexp_replace(FILE_NAME, '_l', 2),
          regexp_replace(FILE_NAME, '_r', 3); 
```

例如

```
WITH t
  AS (SELECT '12345_l.tif' AS file_name FROM dual
      UNION
      SELECT '12345_m.tif' FROM dual
      UNION
      SELECT '12345_r.tif' FROM dual
      UNION
      SELECT '12345_x.tif' FROM dual
      UNION
      SELECT '12345_y.tif' FROM dual)
SELECT file_name
  FROM t
 ORDER BY regexp_replace(FILE_NAME, '_m', 1),
          regexp_replace(FILE_NAME, '_l', 2),
          regexp_replace(FILE_NAME, '_r', 3); 
```

给出：

```
==============
12345_m.tif
12345_l.tif
12345_r.tif
12345_x.tif
12345_y.tif 
```

希望能帮助到你...

或者，您可以使用：

```
 ORDER BY (CASE SUBSTR(file_name, INSTR(file_name, '_')+1, 1)
             WHEN 'm' THEN 1
             WHEN 'l' THEN 2
             WHEN 'r' THEN 3
             ELSE 4
            END) ASC; 
```

例如：

```
WITH t
  AS (SELECT '12345_l.tif' AS file_name FROM dual
      UNION
      SELECT '12345_y.tif' FROM dual
      UNION
      SELECT '12345_r.tif' FROM dual
      UNION
      SELECT '12345_x.tif' FROM dual
      UNION
      SELECT '12345_m.tif' FROM dual)
SELECT file_name
  FROM t
 ORDER BY (CASE SUBSTR(file_name, INSTR(file_name, '_')+1, 1)
             WHEN 'm' THEN 1
             WHEN 'l' THEN 2
             WHEN 'r' THEN 3
             ELSE 4
            END) ASC; 
```

给出：

```
12345_m.tif
12345_l.tif
12345_r.tif
12345_x.tif
12345_y.tif 
```

# php - 如何在 PHP 中从一个页面重定向到另一个页面？

> ID：10350332
> 
> 赞同：-3
> 
> 时间：2012-04-27T12:06:25.400
> 
> 标签：php, forms, redirect, post

我有一个注册页面，即（Registration.php），该文件包含表单变量，如`firstname`、`lastname`、和。`adress``username``password`

我需要加密用户名和密码并将其写入文件。为此，我将表单发布到另一个名为 saveRegistration.php 的页面，在那里我对用户名和密码进行加密，然后最后将其写入文件。

现在在成功完成这些操作后，我必须将用户重定向到另一个页面，在那里我将显示成功登录的成功消息。我该如何做到这一点？

saveRegistration.php 只包含一些 PHP 而没有表单。我也在写，即回显消息。

如何从该页面发布到另一个页面以显示消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:22:16.963

这很简单。您需要做的是创建一个新页面，您可以随意调用它，但为了它，让我们调用它

`register_success.php`现在在这个文件中，只需输入您希望用户也看到的消息。

为了从`saveRegistration.php`文件中重定向用户，您需要使用该`header()`功能。

所以你的`saveRegistration.php`文件看起来像这样：

```
<?php

//Your current code... Insert the user in to the database...

//When that is done, we make a redirect

header("Location: register_success.php");
exit;

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:07:49.207

```
header("Location:PAGE-NAME-OR-PATH"); 
```

# javascript - 多个功能合二为一

> ID：10350333
> 
> 赞同：2
> 
> 时间：2012-04-27T12:06:37.990
> 
> 标签：javascript

我想一次执行两个功能，

在我的代码下方：

```
<Script>

function checkSubmit(){

if(confirm('Are you sure you want to submit the data?');)
    sendData();
}

</Script> 
```

按钮：

```
<input type="submit" id="send_data"  class="send_data" value="Send" onclick="checkSubmit()"/> 
```

它没有执行 sendData() 函数，任何想法如何在一次 onclick 下执行这两个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:08:05.077

更好地格式化您的代码，因为通常这应该可以正常工作

```
if(confirm('Are you sure you want to submit the data?')) { // no ; and open the bracket
    sendData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:08:25.010

试试这个代码：

```
function checkSubmit() { 
    if (confirm('Are you sure you want to submit the data?')) 
        sendData(); 
}

function sendData() { alert("data sent"); } 
```

# php - joomla中的内部连接查询

> ID：10350334
> 
> 赞同：1
> 
> 时间：2012-04-27T12:06:40.597
> 
> 标签：php, mysql, joomla

我想在我的 joomla 站点中触发一个复杂的查询。我已经为它写了下面的代码。

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);
$query->select('`chr`.`characteristic_id`,`chr`.`characteristic_value`,`prc`.`price_value`');
$query->from('`#___hikashop_product` AS `pdt`');
$query->join('inner', '`#__hikashop_variant` AS `vari` ON `pdt`.`product_id` = `vari`.`variant_characteristic_id`');
$query->join('inner', '`#__hikashop_characteristic` AS `chr` ON `vari`.`variant_characteristic_id` = `chr`.`characteristic_id`');
$query->join('inner', '`#__hikashop_price` AS `prc` ON `pdt`.`product_id` = `prc`.`price_product_id`');
$query->where('`pdt`.`product_id` = 68');
$db->setQuery($query); 
```

查询正在我的本地 mysql 中执行。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:35:50.730

你可以试试这个

```
$db->setQuery("Your query");
$result = $db->query();

//if you need the count
$rowcount = $db->getNumRows();

//if the result is multiple rows
$result_array = $db->loadAssocList() or $db->loadObjectList();

//if the result is single row you can use
$result = $db->loadAssoc() or $db->loadObject(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:26:35.703

要触发查询，您需要做的就是：

```
$rows = $db->loadAssocList(); // or loadObjectList() 
```

以上将把所有的行放入`$rows`

您还可以在不获取行的情况下触发查询：

```
$db->query(); 
```

# algorithm - 使用 Scala 动态编程解决 CodeChef 中的 Mixture

> ID：10350338
> 
> 赞同：2
> 
> 时间：2012-04-27T12:06:50.050
> 
> 标签：algorithm, scala, optimization, dynamic-programming

我正在尝试使用 scala解决以下[codechef 问题。](http://www.codechef.com/problems/MIXTURES)问题陈述如下：

> 哈利波特面前有 n 个混合物，排成一排。每种混合物都有 100 种不同颜色中的一种（颜色的数字从 0 到 99）。
> 
> 他想把所有这些混合物混合在一起。在每一步，他将取两种并排放置的混合物并将它们混合在一起，然后将得到的混合物放在它们的位置上。
> 
> 当混合颜色 a 和 b 的两种混合物时，所得混合物的颜色 (a+b) mod 100。
> 
> 此外，在此过程中会有一些烟雾。混合两种颜色 a 和 b 时产生的烟雾量为 a*b。
> 
> 找出当把所有混合物混合在一起时哈利能得到的最小烟雾量是多少。

提供的示例答案如下：

> 输入：
> 
> ```
> 2 
> 18 
> 19 
> 3
> 40
> 60
> 20 
> ```
> 
> 输出：
> 
> ```
> 342
> 2400 
> ```
> 
> 在第二个测试用例中，有两种可能：
> 
> ```
> first mix 40 and 60 (smoke: 2400), getting 0, then mix 0 and 20 (smoke: 0); total amount of smoke is 2400
> first mix 60 and 20 (smoke: 1200), getting 80, then mix 40 and 80 (smoke: 3200); total amount of smoke is 4400 
> ```
> 
> 第一种情况是正确的方法，因为它可以最大限度地减少产生的烟雾量。

我知道这可以使用动态编程来解决，但我无法解决这个问题并在 scala 中表达算法。

这就是我对这个问题的看法，在某种查找结构中（数组，映射，以 Tuple(Int,Int) 作为键）存储混合两种颜色的所有计算值

这可以通过以下伪代码来完成：

```
for(colors1<-1 through n)
   for(colors2<-k through n)
      if(color1 != color2)
          //Check if color1,color2 combination exists as (color1,color2) or (color2,color1)    
          Map(color1,color2) = (color1+color2)%100 
```

一旦计算了所有初始颜色，现在我们需要考虑混合颜色的顺序，同时考虑到产生的烟雾。这是我遇到问题的地方。我正在碰壁，试图制定将产生最少烟雾的子结构。

在这里获得一些指导会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:27:40.140

我编写了以下动态编程解决方案。它也可以作为[gist](https://gist.github.com/2509688)使用。

```
/** Find the minimum amount of smoke (second) and resulting color (first) 
    by splitting the sequence at every possible position,
    given `lookup` contains the best mix for subsequence. */
def minSmokeMixtureSingle(s: Seq[Int], lookup: Map[Seq[Int],(Int,Int)])
  : (Int,Int) = 
    if(s.size == 1)
        (s(0),0)
    else if(s.size == 2)
        mix(s(0),s(1))
    else {
        val splits = (1 to (s.size - 1)).map(s.splitAt)
        val mixes = splits.map{ case (s1,s2) => 
            val (c1,sm1) = lookup(s1)
            val (c2,sm2) = lookup(s2)
            val (newColor,newSmoke) = mix(c1,c2)
            (newColor, newSmoke + sm1 + sm2)
        }
        mixes.minBy(_._2)
    }

def mix(m1: Int, m2: Int): (Int,Int) = ((m1+m2) % 100, m1*m2)

def minSmokeMixture(s: Seq[Int]) = {
    //create the mixture sequences with increasing length
    val windows = for(windowSize <- 1 to s.size;
        window <- s.sliding(windowSize) ) yield window
    //go over the sequences and compute the lookup-table
    val lookup = windows.foldLeft(Map.empty[Seq[Int],(Int,Int)]){
        case (lu,seq) => lu + (seq -> minSmokeMixtureSingle(seq,lu))
    }
    //simply lookup the result
    lookup(s)
}

println(minSmokeMixture(Seq(18, 19)))
println(minSmokeMixture(Seq(40, 60, 20))) 
```

这当然可以在风格方面得到改进。

它为给定的示例产生正确的输出（第二个数字是烟雾，第一个是最终颜色）：

```
(37,342)
(20,2400) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:12:49.503

我认为动态编程与它没有太大关系。我认为这是一个图问题，通过广度优先搜索解决。直线[最短路径](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)问题。

# javascript - 如何使用 jquery prepend() 函数在所有数字前添加卢比符号

> ID：10350339
> 
> 赞同：2
> 
> 时间：2012-04-27T12:06:51.117
> 
> 标签：javascript, jquery

在这里，我尝试在数字前添加卢比符号。如果有“-”，那么我不想在那里添加卢比符号。[这](http://jsfiddle.net/sureshpattu/Hrac3/1/)是我的代码

```
var te = $('p.active').text();
    var te2 = $('p.in_active').text();    
    if(te === '-'){}
    else{$('p.active').prepend("<span class='WebRupee'>Rs.</span>");}
    if(te2 === '-'){}
    else{$('p.in_active').prepend("<span class='WebRupee'>Rs.</span>");} 
```

我的 HTML 是

```
<link rel="stylesheet" type="text/css" href="http://cdn.webrupee.com/font" />
<div class="main">
<p class="active">10,200</p>
<p class="in_active">1,68,10,900</p>
<p class="active">0</p>
<p class="in_active">-</p>
<p class="active">12,78,200</p>
<p class="in_active">-</p>
<p class="active">-</p>
<p class="in_active">9,890</p>
<p class="active">10,200</p>
<p class="in_active">1,68,10,900</p>
<p class="active">0</p>
<p class="in_active">-</p>
<p class="active">12,78,200</p>
<p class="in_active">-</p>
<p class="active">-</p>
<p class="in_active">9,890</p>
</div>​ 
```

我的CSS是

```
.in_active{color:#999;font-size:11pt;font-weight:400;}
.active{color:#333;font-size:11pt;font-weight:400;}
.main{padding:30px;}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:10:25.667

`$('p.active').prepend("<span class='WebRupee'>Rs.</span>");`选择每个活动段落并添加 Rs。象征。您想改用一个循环，它检查每个段落是否应该发生前置。例如，您可以执行以下操作：

```
$('p.active, p.in_active').each(function() {
     if($(this).text() !== '-') {
        $(this).prepend("<span class='WebRupee'>Rs.</span>");
    }
}); 
```

另请注意，每个元素可以有多个类，这意味着您可以为示例中的每个元素设置一个类`<p>`：`<p class="rupee in_active">1,68,10,900</p>`与`<p class="active">10,200</p>`. 如果所有具有“卢比”类的元素都应该在前面加上卢比符号，那么你可以简单地写：

```
$('p.rupee').prepend("<span class='WebRupee'>Rs.</span>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:10:41.127

相反，循环浏览段落是有意义的。怎么样：

```
$('.active, .in_active').each(function() {
    if ( $(this).text() != '-' ) {
        $(this).prepend('<span class="WebRupee">Rs.</span>');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:12:10.353

```
$('.in_active').each(function(){
var hyphen = $(this).html();
if(hyphen == '-'){

}else{
   $(this).prepend("<span class='WebRupee'>Rs.</span>");
}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:26:23.280

请检查这个工作示例[小提琴](http://jsfiddle.net/kTN2E/2/)

```
 $(document).ready(function(){
        $(".main p").each(function(){
          var pValue = $(this).text();
            if(pValue != '-'){
               $(this).prepend("<span class='WebRupee'>Rs.</span>");
            }

        });

    }); 
```

# c# - 使用 VID 和 PID 识别连接到 x64 的 USB 设备的 COM 端口

> ID：10350340
> 
> 赞同：7
> 
> 时间：2012-04-27T12:06:58.463
> 
> 标签：c#, usb, 64-bit, usbserial

如下所示，我能够通过给定的 pid 和 vid 获取连接到 32 位 win7OS 机器的 USB com 端口名称，但是在 x64 中运行时它卡在以下行：

```
comports.Add((string)rk6.GetValue("PortName")); 
```

这是我的代码

```
static List<string> ComPortNames(String VID, String PID)
    {
        String pattern = String.Format("^VID_{0}.PID_{1}", VID, PID);
        Regex _rx = new Regex(pattern, RegexOptions.IgnoreCase);
        List<string> comports = new List<string>();

        RegistryKey rk1 = Registry.LocalMachine;
        RegistryKey rk2 = rk1.OpenSubKey("SYSTEM\\CurrentControlSet\\Enum");

        foreach (String s3 in rk2.GetSubKeyNames())
        {

            RegistryKey rk3 = rk2.OpenSubKey(s3);
            foreach (String s in rk3.GetSubKeyNames())
            {
                if (_rx.Match(s).Success)
                {
                    RegistryKey rk4 = rk3.OpenSubKey(s);
                    foreach (String s2 in rk4.GetSubKeyNames())
                    {
                        RegistryKey rk5 = rk4.OpenSubKey(s2);
                        RegistryKey rk6 = rk5.OpenSubKey("Device Parameters");
                        comports.Add((string)rk6.GetValue("PortName"));
                    }
                }
            }
        }
        return comports;
    } 
```

实际代码在[这里](http://www.codeproject.com/Tips/349002/Select-a-USB-Serial-Device-via-its-VID-PID)，那么如何在 x64 中获取 com 端口名称，有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-01-21T08:13:35.313

当我在 Windows 10 x64 下测试[Youkko](https://stackoverflow.com/users/1440670/youkko)的答案时，我得到了一些奇怪的结果，并查看了我机器上的注册表，这些`LocationInformation`键包含字符串，例如`Port_#0002.Hub_#0003`它们与设备连接的 USB 集线器/端口相关，而不是 COM Windows 分配的端口。

所以在我的情况下，我得到了 COM2，它是我主板上的一个硬件端口，它跳过了我期望的 COM5 端口，但它位于`PortName`注册表项下。我不确定自您使用的 Windows 版本以来是否发生了某些变化，但我认为您的主要问题可能是没有检查键上的空值。

以下稍作修改的版本似乎可以在各种 Windows 7 / 10 和 x32 / 64 系统上正常工作，我还添加了一个检查`SerialPort.GetPortNames()`以确保设备可用并在返回之前插入系统：

```
static List<string> ComPortNames(String VID, String PID)
{
    String pattern = String.Format("^VID_{0}.PID_{1}", VID, PID);
    Regex _rx = new Regex(pattern, RegexOptions.IgnoreCase);
    List<string> comports = new List<string>();

    RegistryKey rk1 = Registry.LocalMachine;
    RegistryKey rk2 = rk1.OpenSubKey("SYSTEM\\CurrentControlSet\\Enum");

    foreach (String s3 in rk2.GetSubKeyNames())
    {
        RegistryKey rk3 = rk2.OpenSubKey(s3);
        foreach (String s in rk3.GetSubKeyNames())
        {
            if (_rx.Match(s).Success)
            {
                RegistryKey rk4 = rk3.OpenSubKey(s);
                foreach (String s2 in rk4.GetSubKeyNames())
                {
                    RegistryKey rk5 = rk4.OpenSubKey(s2);
                    string location = (string)rk5.GetValue("LocationInformation");
                    RegistryKey rk6 = rk5.OpenSubKey("Device Parameters");
                    string portName = (string)rk6.GetValue("PortName");
                    if (!String.IsNullOrEmpty(portName) && SerialPort.GetPortNames().Contains(portName))
                        comports.Add((string)rk6.GetValue("PortName"));
                }
            }
        }
    }
    return comports;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T14:22:44.730

通过阅读您的代码，我发现您在注册表中查看的当前路径不包含任何有关端口的信息。但我找到了一种通过做这个小改动来阅读它的方法：

```
 static List<string> ComPortNames(String VID, String PID)
    {
        String pattern = String.Format("^VID_{0}.PID_{1}", VID, PID);
        Regex _rx = new Regex(pattern, RegexOptions.IgnoreCase);
        List<string> comports = new List<string>();

        RegistryKey rk1 = Registry.LocalMachine;
        RegistryKey rk2 = rk1.OpenSubKey("SYSTEM\\CurrentControlSet\\Enum");

        foreach (String s3 in rk2.GetSubKeyNames())
        {

            RegistryKey rk3 = rk2.OpenSubKey(s3);
            foreach (String s in rk3.GetSubKeyNames())
            {
                if (_rx.Match(s).Success)
                {
                    RegistryKey rk4 = rk3.OpenSubKey(s);
                    foreach (String s2 in rk4.GetSubKeyNames())
                    {
                        RegistryKey rk5 = rk4.OpenSubKey(s2);
                        string location = (string)rk5.GetValue("LocationInformation");
                        if (!String.IsNullOrEmpty(location))
                        {
                            string port = location.Substring(location.IndexOf('#') + 1, 4).TrimStart('0');
                            if (!String.IsNullOrEmpty(port)) comports.Add(String.Format("COM{0:####}", port));
                        }
                        //RegistryKey rk6 = rk5.OpenSubKey("Device Parameters");
                        //comports.Add((string)rk6.GetValue("PortName"));
                    }
                }
            }
        }
        return comports;
    } 
```

它确实工作得很好。顺便说一句，谢谢您的代码……它对我帮助很大！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-07T19:39:03.293

这是我对此的看法（即使它不是直接的 A 到 Q）

*   USB 设备总是（并且总是）在（最后的`HKLM\SYSTEM\CurrentControlSet\Enum\USB`注释）下枚举`USB`
*   *   设备节点的格式`VID_xxxx&PID_xxxx*`为`xxxx`十六进制，末尾可能有一些额外的函数数据
*   *   每个设备节点都有一个基于序列号或设备和功能的其他数据的子标识符节点
*   *   标识符节点可以具有`"FriendlyName"`有时在括号中包含 COM 的值，例如“虚拟串行端口 (COM6)”
*   *   结果路径：`HKLM\SYSTEM\CurrentControlSet\Enum\USB\VID_xxxx&PID_xxxx*\*\Device Parameters\`具有命名的值`"PortName"`
*   当前可用的 com 端口由`System.IO.Ports.SerialPort.GetPortNames()`
*   `OpenSubKey`工具`IDisposable`，应该有`using`或`.Dispose()`在他们身上

    ```
    using System.IO.Ports;
    using System.Linq;
    using Microsoft.Win32;

    public class UsbSerialPort
    {
        public readonly string PortName;
        public readonly string DeviceId;
        public readonly string FriendlyName;

        private UsbSerialPort(string name, string id, string friendly)
        {
            PortName = name;
            DeviceId = id;
            FriendlyName = friendly;
        }

        private static IEnumerable<RegistryKey> GetSubKeys(RegistryKey key)
        {
            foreach (string keyName in key.GetSubKeyNames())
                using (var subKey = key.OpenSubKey(keyName))
                    yield return subKey;
        }

        private static string GetName(RegistryKey key)
        {
            string name = key.Name;
            int idx;
            return (idx = name.LastIndexOf('\\')) == -1 ?
                name : name.Substring(idx + 1);
        }

        public static IEnumerable<UsbSerialPort> GetPorts()
        {
            var existingPorts = SerialPort.GetPortNames();
            using (var enumUsbKey = Registry.LocalMachine.OpenSubKey(@"SYSTEM\CurrentControlSet\Enum\USB"))
            {
                if (enumUsbKey == null)
                    throw new ArgumentNullException("USB", "No enumerable USB devices found in registry");
                foreach (var devBaseKey in GetSubKeys(enumUsbKey))
                {
                    foreach (var devFnKey in GetSubKeys(devBaseKey))
                    {
                        string friendlyName =
                            (string) devFnKey.GetValue("FriendlyName") ??
                            (string) devFnKey.GetValue("DeviceDesc");
                        using (var devParamsKey = devFnKey.OpenSubKey("Device Parameters"))
                        {
                            string portName = (string) devParamsKey?.GetValue("PortName");
                            if (!string.IsNullOrEmpty(portName) &&
                                existingPorts.Contains(portName))
                                yield return new UsbSerialPort(portName, GetName(devBaseKey) + @"\" + GetName(devFnKey), friendlyName);
                        }
                    }

                }
            }
        }

        public override string ToString()
        {
            return string.Format("{0} Friendly: {1} DeviceId: {2}", PortName, FriendlyName, DeviceId);
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T12:51:00.817

我认为[ManagementObjectSearcher](http://msdn.microsoft.com/en-us/library/system.management.managementobjectsearcher%28v=vs.110%29.aspx)可能是比直接读取注册表更好的方法。

这是虚拟 COM 端口[的示例](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/83dbd7e3-e1c5-4c41-a591-21363650df35)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-21T12:55:37.263

好的，使用 ManagementObjectSearcher（如果存在，它会提供 COM 端口索引和 VID 和 PID）：

```
 List < List <string>> USBCOMlist = new List<List<string>>();
        try
        {
            ManagementObjectSearcher searcher =
                new ManagementObjectSearcher("root\\CIMV2",
                "SELECT * FROM Win32_PnPEntity");

            foreach (ManagementObject queryObj in searcher.Get())
            {
                if (queryObj["Caption"].ToString().Contains("(COM"))
                {
                    List<string> DevInfo = new List<string>();

                    string Caption = queryObj["Caption"].ToString();
                    int CaptionIndex = Caption.IndexOf("(COM");
                    string CaptionInfo = Caption.Substring(CaptionIndex + 1).TrimEnd(')'); // make the trimming more correct                 

                    DevInfo.Add(CaptionInfo);

                    string deviceId = queryObj["deviceid"].ToString(); //"DeviceID"

                    int vidIndex = deviceId.IndexOf("VID_");
                    int pidIndex = deviceId.IndexOf("PID_");
                    string vid = "", pid = "";

                    if (vidIndex != -1 && pidIndex != -1)
                    {
                        string startingAtVid = deviceId.Substring(vidIndex + 4); // + 4 to remove "VID_"                    
                        vid = startingAtVid.Substring(0, 4); // vid is four characters long
                                                             //Console.WriteLine("VID: " + vid);
                        string startingAtPid = deviceId.Substring(pidIndex + 4); // + 4 to remove "PID_"                    
                        pid = startingAtPid.Substring(0, 4); // pid is four characters long
                    }

                    DevInfo.Add(vid);
                    DevInfo.Add(pid);

                    USBCOMlist.Add(DevInfo);
                }

            }
        }
        catch (ManagementException e)
        {
            MessageBox.Show(e.Message);
        } 
```

# javascript - Javascript中函数调用中的变量名

> ID：10350352
> 
> 赞同：3
> 
> 时间：2012-04-27T12:07:54.090
> 
> 标签：javascript

我正在尝试实现以下伪代码：

```
function processAboutLink(){

}

function processServicesLink(){

}

var variableName = 'about';

process + variableName + Link();

var variableName = 'services';

process + variableName + Link(); 
```

我知道上面的代码不是真实的，而是一个逻辑表示。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T12:10:00.490

拥有一个对象会更方便，因为您可以动态访问属性：

```
var processLinkFunctions = {
  about:    function() { ... },
  services: function() { ... }
}; 
```

然后，它很简单：

```
processLinkFunctions[variableName](); 
```

`processLinkFunctions.about()`这与if基本相同`variableName === "about"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T12:10:26.213

您可能想改用对象文字进行命名空间

```
var process = {
    services: function(){...},
    about: function(){...}
} 
```

然后打电话给他们：

```
process[variable](); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:10:50.267

如果您为对象创建函数属性，则可以按名称调用它们（并且无需求助于`eval`！）：

```
var functions = {
    about: function() { ... },
    services: function() { ... }
};

var name = 'about';
functions[name](); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T12:10:06.010

编辑不要使用评估。这似乎很危险，并导致未定义的行为。

错误的答案：

```
eval('process' + variableName + 'Link()'); 
```

应该管用

# java - Android发布高分辨率图像内存不足

> ID：10350353
> 
> 赞同：2
> 
> 时间：2012-04-27T12:07:58.983
> 
> 标签：java, android, image, post, upload

祝各位开发者好。

我正忙着让 android 从应用程序上传图片。
我也让它工作了（代码如下）。
但是当我发送大图像（10 兆像素）时，我的应用程序因内存不足异常而崩溃。
解决方案是使用压缩，但如果我想发送全尺寸图像怎么办？
我想也许有流的东西，但我不熟悉流。也许 urlconnection 可能会有所帮助，但我真的不知道。

我将文件名命名为 File[0 to 9999].jpg 带有图像日期的帖子值称为 Filedata 我为帖子值 dropboxid 提供 UID

下面的代码有效，但我很想解决阻止我发送高分辨率图像的问题。

亲切的问候

```
try
{
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 100, bos);
    byte[] data = bos.toByteArray();

    HttpPost postRequest = new HttpPost(URL_SEND);

    ByteArrayBody bab = new ByteArrayBody(data, "File" + pad(random.nextInt(9999) + 1) + ".jpg");
    MultipartEntity reqEntity = new multipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    reqEntity.addPart("Filedata", bab);
    reqEntity.addPart("dropboxId", new StringBody(URLEncoder.encode(uid)));
    postRequest.setEntity(reqEntity);

    HttpResponse response = httpClient.execute(postRequest);
    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
    String sResponse;
    StringBuilder s = new StringBuilder();

    while((sResponse = reader.readLine()) != null)
    {
        s = s.append(sResponse);
    }

    if(d) Log.i(E, "Send response:\n" + s);
}
catch (Exception e)
{
    if(d) Log.e(E, "Error while sending: " + e.getMessage());
    return ERROR;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:45:47.983

使用`ByteArrayOutputStream`然后调用时`#toByteArray()`，您有效地将 JPEG 使用的内存量增加了**一倍。**`ByteArrayOutputStream`使用编码的 JPEG 保留一个内部数组，当您调用`#toByteArray()`它时，它会分配一个**新的**数组并从内部缓冲区复制数据。

考虑将大型位图编码为临时文件并使用`FileOutputStream`and`FileInputStream`来编码和发送图像。

如果没有“上传” - 你的应用程序可以“很好地”存活，而我假设的内存中只有巨大的位图？

编辑：`FileBody`

```
File img = new File(this is where you put the path of your image)
ContentBody cb = new FileBody(img, "File" + pad(random.nextInt(9999) + 1) + ".jpg", "image/jpg", null);
MultipartEntity reqEntity = new multipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("Filedata", cb);
reqEntity.addPart("dropboxId", new StringBody(URLEncoder.encode(uid))); 
```

# c# - Need for String.Format in C# to throw compile time error for mismatch in arguments

> ID：10350354
> 
> 赞同：4
> 
> 时间：2012-04-27T12:08:03.837
> 
> 标签：c#, compiler-errors, string.format

Is there any way to to add custom compile time errors when there is a mismatch in number of arguments passed to String.Format in C#

Eg:

```
String.Format("{0} and {1} are my pets", animal); 
```

the above line should throw an error since we have passed only one argument `"animal"` , while it is expecting two `{0},{1}`.. but in reality it throws just run time errors.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:10:17.977

FxCop / Code Analysis 会解决这个问题。是的，您可以在 VS Premium / Ultimate 的编译时执行此操作。

![在此处输入图像描述](../Images/2d20e319b507e16ffad6634c98787691.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:10:03.317

Resharper 会为此添加一个 IDE 警告。但是，这不是编译器错误。就编译器而言，您所写的内容非常好。

![在此处输入图像描述](../Images/f5d1a3167d1906e6a03a6806fd23ea23.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:29:01.923

这是一个糟糕的想法，但是您可以创建五个左右的扩展方法，称为`Format1`,`Format2`等，并将参数硬编码并传递给普通的`String.Format`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:10:44.510

您不能添加自定义编译时错误。这是一个逻辑错误，会抛出异常

编辑：

```
Console.WriteLine(string.Format("test{0} and {1}","test")); 
```

它会抛出：

> 索引（从零开始）必须大于或等于零且小于参数列表的大小

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:16:26.337

格式字符串是 .NET 类库中某些方法的功能。编译器对它们一无所知。编译器只能抛出与*语言*本身有关的错误，而不是你如何调用某些库函数。

# java - 没有新实体的 OneToMany 关系

> ID：10350361
> 
> 赞同：1
> 
> 时间：2012-04-27T12:08:46.603
> 
> 标签：java, hibernate, jpa, one-to-many

使用 JPA 和 Hibernate
我有一个实体类

```
@Entity
@Table(name = "ROLES")
public class Role implements Serializable 
{

   @Column
   private List<String> tubes;    

// another fields .setters, getters  
} 
```

**列表管**中的每个字符串- 是另一个表 (TUBES) 中的一行。

表 ROLES 与 TUBES 具有 OneToMany 关系。
A可以制作另一个Entity **Tubes**并在Entity Tubes上映射表TUBES。但是我怎么能在没有另一个实体的情况下做到这一点呢？

**编辑：**

我做了

```
 @ElementCollection
 @CollectionTable(name = "TUBES", joinColumns = @JoinColumn(name = "role_id"))
 @Column(name = "tube")
 private ArrayList<String> tubes; 
```

部署在 JBoss 上。在运行时我得到 SQLGrammarException

JPA 创建的查询是：

> /* SELECT r FROM Role r WHERE r.name = ? */ select role0_.AA_ID as AA1_0_, role0_.ROLNAME as ROLNAME0_, role0_.role as PID4_0_ from PIDDB_PID_ROLE role0_ where role0_.ROLNAME=?
> 17:17:14,661 错误 [JDBCExceptionReporter] ORA-00904: "ROLE0_"."tube": 标识符无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:13:47.417

您可以使用`@ElementCollection`映射，我认为这就是您要寻找的。

```
@ElementCollection(fetch=FetchType.LAZY)
@CollectionTable(name="TUBES", joinColumns=@JoinColumn(name="role_id"))
@Column(name="tube")
private List<String> tubes; 
```

**更新：**

```
dependency>
  <groupId>org.hibernate.javax.persistence</groupId>
  <artifactId>hibernate-jpa-2.0-api</artifactId>
  <version>1.0.0.Final</version>
</dependency>

**Update2:**

import javax.persistence.CollectionTable;
import javax.persistence.Column;
import javax.persistence.ElementCollection;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.Table; 
```

# linux - 编译 Linux 内核 2.6.39.4 时出错

> ID：10350363
> 
> 赞同：0
> 
> 时间：2012-04-27T12:08:58.273
> 
> 标签：linux, linux-kernel, system-calls

我正在做一个系统调用来计算 FCFS 调度算法中的平均等待时间。

遵循本指南后，我对相关文件进行了更改并制作了这个程序。现在在编译内核时，它显示此错误。

```
CC      arch/x86/lib/strstr_32.o
  AS      arch/x86/lib/thunk_32.o
  CC      arch/x86/lib/usercopy_32.o
  AR      arch/x86/lib/lib.a
  LD      vmlinux.o
  MODPOST vmlinux.o
WARNING: modpost: Found 31 section mismatch(es).
To see
 full details build your kernel with:
'make CONFIG_DEBUG_SECTION_MISMATCH=y'
  GEN     .version
  CHK     include/generated/compile.h
  UPD     include/generated/compile.h
  CC      init/version.o
  LD      init/built-in.o
  LD      .tmp_vmlinux1
kernel/built-in.o: In function `sys_atvfcfs':
(.text+0x3e27e): undefined reference to `__floatsisf'
kernel/built-in.o: In function `sys_atvfcfs':
(.text+0x3e286): undefined reference to `__fixsfsi'
make: *** [.tmp_vmlinux1] Error 1 
```

这是我的程序

```
#include <linux/linkage.h>

asmlinkage long sys_atvfcfs(int at[], int bt[], int n)
{

int i=0;
int j,t,wt[n],sum,q;

float avgwt;

for(j=i+1;j<n;j++)
 {
  if(at[i]>at[j])
   {
    t=at[i];
    at[i]=at[j];
    at[j]=t;
    q=bt[i];
    bt[i]=bt[j];
    bt[j]=q;
   }
 }

wt[0]=0;
sum=0;   

for(i=0;i<n-1;i++)
{

 wt[i+1]=wt[i]+bt[i];
 sum=sum+(wt[i+1]-at[i]);

}

avgwt=sum/n;

return avgwt;
} 
```

谁能解释问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:11:18.537

谷歌“linux内核浮动使用”。这是一件特别的事情。如果您可以避免使用浮点类型，请避免使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:24:19.630

正如您已经得到的答案所说，浮点数是 Linux 内核的一个特例。

具体来说，[内核的基本规则之一](https://www.kernel.org/doc/htmldocs/kernel-hacking.html#basic-rules)是避免使用 FPU，除非绝对必要。扩展那里所说的内容：

> 不保存 FPU 上下文；即使在用户上下文中，FPU 状态也可能与当前进程不对应：您会弄乱某些用户进程的 FPU 状态。如果您真的想这样做，则必须显式保存/恢复完整的 FPU 状态（并避免上下文切换）。这通常是一个坏主意；首先使用定点算法。

简而言之，正如[这个问题](https://stackoverflow.com/questions/6397430/overhead-of-supporting-floating-point-arithmetic-inside-the-linux-kernel)及其答案中所描述的，内核要求 CPU 不要打扰上下文切换 CPU 寄存器。因此，如果您的进程经历了上下文切换，下一个要运行的应用程序将能够持有并修改您的 FPU 寄存器。然后，您将返回修改后的状态。不好。

您可以自己启用 fpu `kernel_fpu_begin()`，它是[preempt-safe](https://www.kernel.org/doc/Documentation/preempt-locking.txt)。但是，它也会使您的代码无法被抢占并迫使您进入关键部分，因此您必须`kernel_fpu_end()`尽快这样做。

# ruby - 控制台中没有用于保护监视文件的 rspec 输出

> ID：10350365
> 
> 赞同：4
> 
> 时间：2012-04-27T12:09:15.167
> 
> 标签：ruby, ruby-on-rails-3, rspec, railstutorial.org, guard

我已经安装了 'guard' 和 'guard-rspec'，我还配置了 Guardfile（以观察 'app/views' 的变化）但是当我运行 'bundle exec guard' 时，我总是得到这个：

```
 vagrant@vagrant-debian-squeeze:/vagrant/sample_app$ bundle exec guard
  Guard could not detect any of the supported notification libraries.
  Guard is now watching at '/vagrant/sample_app'
  Guard::RSpec is running, with RSpec 2!
  Running all specs
  ........

  Finished in 0.97359 seconds
  8 examples, 0 failures
  > 
```

它已经完成了守卫控制台提示，如果我从'app/views/'（例如app/view/static_pages/home.html.erb）编辑一些文件并保存它，守卫没有显示任何规范输出，仍然等待对于一些控制台命令。

我想它应该在保存监视文件后显示一些 rspec 输出。

*宝石文件：*

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer'

  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  # gem 'rb-inotify', '0.8.8'
  # gem 'libnotify', '0.5.9'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

*保护文件：*

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

require 'active_support/core_ext'

guard 'rspec', :version => 2, :all_after_pass => false do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^lib/(.+)\.rb$})                           { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb", (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : "spec/requests/#{m[1].singularize}_pages_spec.rb")]}
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('spec/spec_helper.rb')                        { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }
  # Capybara request specs
  watch(%r{^app/views/(.+)/}) do |m|
    "spec/requests/#{m[1].singularize}_pages_spec.rb"
  end
end 
```

*'app/views' 的守望规则是*

```
 watch(%r{^app/views/(.+)/}) do |m|
    "spec/requests/#{m[1].singularize}_pages_spec.rb"
  end 
```

*运行环境：*

Debian-Squeeze 32 位 Vagrant 盒子

顺便提一句。我正在学习 Rails 表单[ruby​​-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)并坚持[使用 Guard 进行自动化测试](http://ruby.railstutorial.org/chapters/static-pages#sec:guard)

任何帮助表示感谢，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T13:58:06.633

[Guard 不会接收 Vagrant 主机](https://github.com/guard/listen/issues/53)（在我的例子中是 Ubuntu）所做的文件系统更改。

您可以通过`-p`选项强制警卫轮询文件系统（增加 CPU 使用率，不断撞击硬盘，并可能导致您的笔记本电脑温度升高 - 所以并不理想，但它可以工作）

```
bundle exec guard -p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:08:38.280

试试这个（从 Guardfile 生成`guard init`）：

```
watch(%r{^app/views/(.+)/}) { |m| "spec/requests/#{m[1]}_spec.rb" } 
```

正则表达式是正确的，但是块中的文件名 'spec/requests/#{m[1].singularize}_pages_spec.rb' 似乎会`guard`导致静默失败，就好像表达式不匹配一样。我不知道为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:05:01.107

取消注释您的测试组中的通知库，使您的 Gemfile 看起来像。

```
group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
end 
```

那应该这样做。享受 Rails 教程的乐趣，太棒了！

编辑：假设您正在运行 Linux。OS X 和 Windows 有自己的测试库。继续阅读教程，你会看到的。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-28T12:07:03.370

我已经删除了 Guard 并安装了 Watchr，它似乎使他的工作正常。这帮助了我：

[如何轨道 3 和 rspec 2](http://www.rubyinside.com/how-to-rails-3-and-rspec-2-4336.html)

# android - 从 sdcard 上传的图片，应该以列表视图的形式显示

> ID：10350371
> 
> 赞同：0
> 
> 时间：2012-04-27T12:09:52.700
> 
> 标签：android

我从 sdcard 上传了一张图片，我需要将图片永久保存在应用程序中，即使图片已从 sd 卡中删除。我需要在列表视图中显示这些上传的图片。请帮助我，如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:33:20.320

您可以在应用程序中存储数据。你需要保存的数据路径是/data/data//your_folder。

/data/data/... 是默认的应用程序存储位置。

要将上传的文件列出到listview 列出目录中的文件，将文件名保存在arraylist 中，并将arraylist 提供给listview 的输入。

以下内容可能对您有所帮助。

[http://www.javaprogrammingforums.com/java-programming-tutorials/3-how-list-all-files-directory.html](http://www.javaprogrammingforums.com/java-programming-tutorials/3-how-list-all-files-directory.html)

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:02:55.057

您还可以直接从您上传的服务器获取所有上传的图片。当您在服务器上上传任何大图像时，制作该图像的缩略图副本，以便在检索图像时无需下载大数据。

# lua - luasoket http 请求得到“连接被拒绝”

> ID：10350373
> 
> 赞同：1
> 
> 时间：2012-04-27T12:09:55.593
> 
> 标签：lua, luasocket

我正在尝试使用 luasocket 向 "https://buy.itunes.apple.com/verifyReceipt" 发出 http "GET" 请求，它会产生 "connection denied" ，而我也可以从 Web 浏览器访问此 URL使用 python httplib。我怀疑这是因为 HTTPS 协议，但如果我用“https//www.google.com”替换 url，它就可以了。所以any1对问题是什么有想法？非常感谢您的回答

这是代码：

```
local http = require("socket.http")

URL = "https://buy.itunes.apple.com/verifyReceipt"
local response, httpCode, header = http.request(URL)

print(response, httpCode, header) 
```

# javascript - 会话管理问题

> ID：10350379
> 
> 赞同：-1
> 
> 时间：2012-04-27T12:10:14.777
> 
> 标签：javascript, session, jakarta-ee

如何在用户登录以编写考试的 Java EE Web 应用程序中管理会话？

以及如何管理会话中出现中断的会话并且用户需要从中断的位置继续他的考试。需要使用什么类型的会话管理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:32:42.087

您将在用户记录中存储一些内容，指示他们在测试中的位置——不是真正特定于会话管理的，因为他们的会话会在他们注销或超时时消失。当他们重新登录时，您从他们的数据库信息中检索该信息。

# android - 如何在 android 2.2 及更高版本中将菜单背景颜色更改为黑色

> ID：10350381
> 
> 赞同：1
> 
> 时间：2012-04-27T12:10:21.017
> 
> 标签：android, android-menu

对于 android 2.2 及更高版本，我必须将菜单选项的背景颜色更改为黑色，我尝试使用给出的解决方案：

```
protected void setMenuBackground(){                     
        // Log.d(TAG, "Enterting setMenuBackGround");  
        getLayoutInflater().setFactory( new Factory() {  
            public View onCreateView(String name, Context context, AttributeSet attrs) {
                if ( name.equalsIgnoreCase( "com.android.internal.view.menu.IconMenuItemView" ) ) {
                    try { // Ask our inflater to create the view  
                        LayoutInflater f = getLayoutInflater();  
                        final View view = f.createView( name, null, attrs );  

                        new Handler().post( new Runnable() {  
                            public void run () {  
                                // sets the background color   
                                view.setBackgroundResource(R.color.black);
                                // sets the text color              
                                ((TextView) view).setTextColor(Color.WHITE);
                                // sets the text size              
                                ((TextView) view).setTextSize(18);
                }
                        } );  
                    return view;
                }
            catch ( InflateException e ) {}
            catch ( ClassNotFoundException e ) {}  
       } 
        return null;
            }
    }); 
    } 
```

但它显示致命异常错误 "04-27 17:03:38.831: E/AndroidRuntime(923): java.lang.IllegalStateException: A factory has been set on this LayoutInflater" 。难道我做错了什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:27:01.360

如果我正确理解你的问题。您应该能够在 XML 中执行此操作。[覆盖 Android 中的上下文菜单颜色](https://stackoverflow.com/questions/4604562/override-context-menu-colors-in-android)

# javascript - 使用 JavaScript 在 sugarcrm 中的选项卡上触发 Onclick 事件

> ID：10350385
> 
> 赞同：-1
> 
> 时间：2012-04-27T12:10:36.103
> 
> 标签：javascript, sugarcrm

我在 sugarcrm ( 6.4 ) 窗口中有 3 个选项卡。如果我点击某个选项卡，我想触发一个 JavaScript 函数。onclick 事件需要在点击标签页标签时触发，而不是在标签页内部点击时触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:02:51.377

我们使用 YUI 2 TabView，因此您应该能够按照下面文档链接中的示例来处理单击事件。

[http://developer.yahoo.com/yui/tabview/#using](http://developer.yahoo.com/yui/tabview/#using)

# android - 如何动态大写 AutoCompleteTextView 中的字母？

> ID：10350388
> 
> 赞同：1
> 
> 时间：2012-04-27T12:10:42.447
> 
> 标签：android, autocomplete

我正在开发包含以下内容的应用程序`AutoCompleteTextView`，这是我的问题，如何将输入的字母大写`AutoCompleteTextView`。

1.  我不想在 xml 中：`android:capitalize="characters"`
2.  我想用 Java 代码声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:41:38.983

您可以尝试这样..在 ontextchanged 的​​文本观察器中将文本更改为大写..并检查edittext中的新字符串是否是您转换为大写的旧字符串...以避免stackoverflow错误..

```
 String upper = mytextview.getText().toString().toUpperCase()
 mytextview.setText(upper); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:22:56.237

在您的代码中尝试此操作，您还可以检查和尝试其他一些标志。

```
tv.setInputType(InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS); 
```

# javascript - 表单txt字段的jQuery计算

> ID：10350393
> 
> 赞同：3
> 
> 时间：2012-04-27T12:11:00.487
> 
> 标签：javascript, jquery

为我的 jQuery 寻找一些帮助，（我知道它不是最好的）

目前有一个表格，分为两部分，左边我有一个资产清单，右边是负债，有点像账户的资产负债表，见下图

![资产负债表形式](../Images/c85a32b55457b5f4418afd235f9f5b2d.png)

刚才使用的 jquery 有点乱..（对不起）这段代码将计算每个 keyup 请求的字段总数，这似乎工作正常，

```
jQuery('#ass_cash, #ass_liquid, #ass_lifeinsu, #ass_covvalue, #ass_la1, #ass_la2, #ass_la3, #ass_realestate, #ass_auto1total, #ass_auto2total, #lib_mortgage, #lib_bankloan1, #lib_bankloan2, #lib_loansinsucomp, #lib_loanscreditunion, #lib_creditcards, #lib_od1, #lib_od2, #lib_od3, #lib_rent, #lib_mortgagemthpmt, #lib_bankloan1mthpmt, #lib_bankloan2mthpmt, #lib_loansinsucompmthpmt, #lib_loanscreditunionmthpmt, #lib_creditcardsmthpmt, #lib_od1mthpmt, #lib_od2mthpmt, #lib_od3mthpmt, #lib_rentmthpmt').keyup( function(){

// ASSESTS
var ass_cash = jQuery("#ass_cash").val();
var ass_liquid = jQuery("#ass_liquid").val();
var ass_lifeinsu = jQuery("#ass_lifeinsu").val();
var ass_covvalue = jQuery("#ass_covvalue").val();
var ass_la1 = jQuery("#ass_la1").val();
var ass_la2 = jQuery("#ass_la2").val();
var ass_la3 = jQuery("#ass_la3").val();
var ass_realestate = jQuery("#ass_realestate").val();
var ass_auto1total = jQuery("#ass_auto1total").val();
var ass_auto2total = jQuery("#ass_auto2total").val();
var ass_total = jQuery("#ass_total").val();

if(ass_cash==''){ ass_cash = 0; }
if(ass_liquid==''){ ass_liquid = 0; }
if(ass_lifeinsu==''){ ass_lifeinsu = 0; }
if(ass_covvalue==''){ ass_covvalue = 0; }
if(ass_la1==''){ ass_la1 = 0; }
if(ass_la2==''){ ass_la2 = 0; }
if(ass_la3==''){ ass_la3 = 0; }
if(ass_realestate==''){ ass_realestate = 0; }
if(ass_auto1total==''){ ass_auto1total = 0; }
if(ass_auto2total==''){ ass_auto2total = 0; }

var asssubtotal = parseInt(ass_cash) + parseInt(ass_liquid) + parseInt(ass_lifeinsu) + parseInt(ass_covvalue);

asssubtotal = asssubtotal + parseInt(ass_la1) + parseInt(ass_la2) + parseInt(ass_la3) + parseInt(ass_realestate);

asssubtotal = asssubtotal + parseInt(ass_auto1total) + parseInt(ass_auto2total);

var asstotal = jQuery('#ass_total');
asstotal.val(asssubtotal);

// LIABILITIES
var lib_mortgage = jQuery("#lib_mortgage").val();
var lib_bankloan1 = jQuery("#lib_bankloan1").val();
var lib_bankloan2 = jQuery("#lib_bankloan2").val();
var lib_loansinsucomp = jQuery("#lib_loansinsucomp").val();
var lib_loanscreditunion = jQuery("#lib_loanscreditunion").val();
var lib_creditcards = jQuery("#lib_creditcards").val();
var lib_od1 = jQuery("#lib_od1").val();
var lib_od2 = jQuery("#lib_od2").val();
var lib_od3 = jQuery("#lib_od3").val();
var lib_rent = jQuery("#lib_rent").val();

if(lib_mortgage==''){ lib_mortgage = 0; }
if(lib_bankloan1==''){ lib_bankloan1 = 0; }
if(lib_bankloan2==''){ lib_bankloan2 = 0; }
if(lib_loansinsucomp==''){ lib_loansinsucomp = 0; }
if(lib_loanscreditunion==''){ lib_loanscreditunion = 0; }
if(lib_creditcards==''){ lib_creditcards = 0; }
if(lib_od1==''){ lib_od1 = 0; }
if(lib_od2==''){ lib_od2 = 0; }
if(lib_od3==''){ lib_od3 = 0; }
if(lib_rent==''){ lib_rent = 0; }

var libsubtotal = parseInt(lib_mortgage) + parseInt(lib_bankloan1) + parseInt(lib_bankloan2) + parseInt(lib_loansinsucomp);

libsubtotal = libsubtotal + parseInt(lib_loanscreditunion) + parseInt(lib_creditcards) + parseInt(lib_od1) + parseInt(lib_od2);

libsubtotal = libsubtotal + parseInt(lib_od3) + parseInt(lib_rent);

var lib_subtotal = jQuery('#lib_subtotal');                 lib_subtotal.val(libsubtotal);                      

// MONTHLY PAYMENTS
var lib_mortgagemthpmt = jQuery("#lib_mortgagemthpmt").val();
var lib_bankloan1mthpmt = jQuery("#lib_bankloan1mthpmt").val();
var lib_bankloan2mthpmt = jQuery("#lib_bankloan2mthpmt").val();
var lib_loansinsucompmthpmt = jQuery("#lib_loansinsucompmthpmt").val();
var lib_loanscreditunionmthpmt = jQuery("#lib_loanscreditunionmthpmt").val();
var lib_creditcardsmthpmt = jQuery("#lib_creditcardsmthpmt").val();
var lib_od1mthpmt = jQuery("#lib_od1mthpmt").val();
var lib_od2mthpmt = jQuery("#lib_od2mthpmt").val();
var lib_od3mthpmt = jQuery("#lib_od3mthpmt").val();
var lib_rentmthpmt = jQuery("#lib_rentmthpmt").val();

if(lib_mortgagemthpmt==''){ lib_mortgagemthpmt = 0; }
if(lib_bankloan1mthpmt==''){ lib_bankloan1mthpmt = 0; }
if(lib_bankloan2mthpmt==''){ lib_bankloan2mthpmt = 0; }
if(lib_loansinsucompmthpmt==''){ lib_loansinsucompmthpmt = 0; }
if(lib_loanscreditunionmthpmt==''){ lib_loanscreditunionmthpmt = 0; }
if(lib_creditcardsmthpmt==''){ lib_creditcardsmthpmt = 0; }
if(lib_od1mthpmt==''){ lib_od1mthpmt = 0; }
if(lib_od2mthpmt==''){ lib_od2mthpmt = 0; }
if(lib_od3mthpmt==''){ lib_od3mthpmt = 0; }
if(lib_rentmthpmt==''){ lib_rentmthpmt = 0; }

var lib_surplus = jQuery('#lib_surplus');
if(lib_surplus==''){ lib_surplus = 0; }

var subtotal = parseInt(lib_mortgagemthpmt) + parseInt(lib_bankloan1mthpmt) + parseInt(lib_bankloan2mthpmt) + parseInt(lib_loansinsucompmthpmt);

subtotal = subtotal + parseInt(lib_loanscreditunionmthpmt) + parseInt(lib_creditcardsmthpmt) + parseInt(lib_od1mthpmt) + parseInt(lib_od2mthpmt);

subtotal = subtotal + parseInt(lib_od3mthpmt) + parseInt(lib_rentmthpmt);

var totalmthpmt = jQuery('#lib_totalmthpmt');
totalmthpmt.val(subtotal);

var assets_total = jQuery('#ass_total').val();
var lib_subtotal  = jQuery('#lib_subtotal').val();
var lib_surplus  = jQuery('#lib_surplus');

if(assets_total==''){ assets_total = 0; }
if(lib_subtotal==''){ lib_subtotal = 0; }
if(lib_surplus==''){ lib_surplus = 0; }

var surplus = assets_total - lib_subtotal;
lib_surplus.val(surplus);

// THIS IS THE PART THAT ISNT WORKING               
//surplus/deficit
//var lib_total = jQuery('#lib_total').val();
//if(lib_total==''){ lib_total = 0; }
//var lib_totalmthpmt = jQuery('#lib_totalmthpmt').val();
//if(lib_totalmthpmt==''){ lib_totalmthpmt = 0; }

//var surplustotal = lib_total - lib_totalmthpmt;
//jQuery('#mthsurplus').val(surplustotal);
}); 
```

您可以看到上面导致问题的部分，它是小计（减去）盈余之间的计算，以生成总数，

资产的每个字段都有一个类 .asset 每个 libability 都有一个类 .liability 每个月支付字段都有一个类 .liabilitymth

我试过做 jQuery('.asset').each(function() 并尝试在资产字段中生成总数，其他 2 个部分相同，

灰色框是“只读的”，应该出现计算。

资产：页面左侧的总和将是总资产。负债：“小计”将反映负债列的总和。SURPLUS：这将表示资产和负债-余额列之间的差异（负'-'或正'+'）。

总计（右侧）：这是为了创建“资产负债表”效果，因此当您查看它时，计算应反映与资产侧（左侧）的“总计”相同的数字。

每月盈余/赤字：这应反映总收入收入与“每月支付”栏的总额相比的净差异，无论是负数还是正数（从就业选项卡中找到的数字）。

这就是我的 jQuery 面面俱到的地方，必须有一种更简单的方法来计算字段总数，任何人都对此有所了解，或者更好地使用代码，而不是将其全部包装在一个非常大的 keyup 下要求 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:16:17.990

这可以为您提供先机：

```
var totalAss = 0;
jQuery('.asset').each(function(){
    var value = parseFloat(this.value);
    if (value)
        totalAss += value;
});
jQuery('#ass_total').val(totalAss); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:12:54.003

如果您在 keyup 或任何其他关键事件中进行计算，那么将存在跟踪输入的旧数据的问题。例如，在某个瞬间，您输入了 50，然后您输入到 500，然后您输入了 30。然后，keyevent 将无法找出新旧数据之间的差异。您将必须编写一些逻辑来计算新旧更新的数据，然后根据这些逻辑您将不得不更新最终值。如果你能编写这样的代码会更好......

[http://jsfiddle.net/AvSEG/](http://jsfiddle.net/AvSEG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:27:43.793

确实有一些简单的方法。做这样的事情

在所有类上意味着 .assets 、 .liability 和 .liabilitymth 在 document.ready 上执行此操作

```
$(function()
{
$('.assets , .liability ,.liabilitymth').each(function()
{
        var value = $(this).val();
        if(value == "")
        {
            $(this).val('000.00');
        }   
}); 
```

});

现在

```
var total_assets = 0;
$('.assets').keyup(function(){
      var number = $(this).val();
       total_assets += parseInt(number);
}); 
```

在那之后

```
$('#total_assets').val(total_assets); 
```

# asp.net - ASP.NET - 将网站发布到 IIS

> ID：10350394
> 
> 赞同：1
> 
> 时间：2012-04-27T12:11:03.013
> 
> 标签：asp.net, iis

将网站发布到 {localdrive}\inetpub\wwwroot 和 Web 服务器上的任何其他位置（例如 C:\Website）有什么区别。

我注意到，如果我发布到 {localdrive}\inetpub\wwwroot，我总是在 IIS 控制台中留下一个目录和一个网站。

在阅读了 MSDN 上的文章后，我仍然不清楚其中的区别。我意识到这可能有一个简单的答案，但我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:13:57.727

没有什么太多的，因为您在 IIS 中的网站路径可以指向任何目录。但是，话虽如此，请务必仔细检查您的目录权限和安全设置。另外，我猜如果黑客入侵了您的网络服务器……默认的 c:\inetpub\wwwroot 是众所周知的。

并且只是为了以防万一您遇到问题 - 查看 MSDN 上的 Aspnet_regiis.exe 工具，因为它通常可以为人们解决很多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:14:25.633

Web 路径`/`已映射到`c:\inetpub\wwwroot`，因此`/abc`会自动映射到`c:\inetpub\wwwroot\abc`。

发布到 时`c:\website`，需要手动设置虚拟路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:15:22.117

{localdrive}\inetpub\wwwroot 通常用于 IIS 附带的默认网站。其他 Microsoft 产品使用相同的目录并利用默认站点中存在的虚拟目录。

如果这是您的个人网站，或者您从头开始创建的网站，您可以在任何您想要的地方发布。

在发布之前，您需要确保 IIS 知道目录的位置，并且您需要为该文件夹分配正确的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:19:16.293

尽管他们说默认情况下会在 wwwroot 中为您的网站创建虚拟目录，但您不必再次配置它。很多时候我发现我们仍然必须去那里点击删除，然后再次点击创建按钮:)

因此，如果您在 wwwroot 之外创建网站几乎没有问题，唯一的区别在于您必须提供 VD 的完整路径，而在内部您必须单击删除然后创建按钮

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:21:54.227

IIS 中的默认网站默认映射到`C:\inetpub\wwwroot`，因此发布到`wwwroot`可以轻松地将应用程序添加为虚拟目录。

但是，您可以在任何您喜欢的地方发布，也可以将虚拟目录或新网站指向您的发布位置。您只需要确保应用程序池正在运行的用户（通常`IUSR`在 IIS7 下，`IUSR_MachineName`在以前的版本下）对您要发布到的文件夹具有读取/执行权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-05T02:42:25.750

我遇到的问题与上述所有问题都不同。我试图在“C:\inetpub\wwwroot”中发布，但每次发布都失败。比我将发布文件夹更改为另一个并且它有效。当我以管理员身份启动 Visual Studio 时，我也可以毫无问题地复制到 C:\inetpub\wwwroot

# php - 用于 PDO 连接的 PHP singleton 类

> ID：10350408
> 
> 赞同：2
> 
> 时间：2012-04-27T12:12:17.043
> 
> 标签：php, pdo

我设计了以下课程

```
<?php 

    class DB { 

        private static $objInstance; 

        /* 
         * Class Constructor - Create a new database connection if one doesn't exist 
         * Set to private so no-one can create a new instance via ' = new DB();' 
         */ 
        private function __construct() {} 

        /* 
         * Like the constructor, we make __clone private so nobody can clone the instance 
         */ 
        private function __clone() {} 

        /* 
         * Returns DB instance or create initial connection 
         * @param 
         * @return $objInstance; 
         */ 
        public static function getInstance(  ) { 

            if(!self::$objInstance){ 

                $ini_array = parse_ini_file("db.ini");

                $dbInfo['server'] = $ini_array['server'];
                $dbInfo['database'] = $ini_array['database'];
                $dbInfo['username'] = $ini_array['username'];
                $dbInfo['password'] = $ini_array['password'];

                $dsn = 'mysql:host='.$dbInfo['server'].';dbname='.$dbInfo['database'].'';

                self::$objInstance = new PDO(DB_DSN, $dbInfo['username'], $dbInfo['password']); 
                self::$objInstance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
            } 

            return self::$objInstance; 

        } # end method 

        /* 
         * Passes on any static calls to this class onto the singleton PDO instance 
         * @param $chrMethod, $arrArguments 
         * @return $mix 
         */ 
        final public static function __callStatic( $chrMethod, $arrArguments ) { 

            $objInstance = self::getInstance(); 

            return call_user_func_array(array($objInstance, $chrMethod), $arrArguments); 

        } # end method 

    }
?> 
```

我的问题是当我想执行查询时出现以下错误：

> 致命错误：调用未定义的方法 DB::query()

```
foreach(DB::query("SELECT * FROM content_type_video") as $row){ 
    print_r($row); 
} 
```

任何想法为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:15:27.270

```
$db = DB::getInstance();

foreach($db->query("SELECT * FROM content_type_video") as $row){ 
    print_r($row); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:54:47.413

您想要使用的功能在您的 PHP 版本中不可用 - 您需要至少升级到 PHP 5.3 for `__callStatic`.

但是，我建议您无论如何都停止使用单例，并停止在代码中的任何地方使用静态函数调用。

# jquery - 为什么这段代码在块的末尾调用 keyup() ？

> ID：10350417
> 
> 赞同：0
> 
> 时间：2012-04-27T12:13:12.607
> 
> 标签：jquery

我对下面的代码有疑问

```
$("input").keyup(function () {
    var value = $(this).val();
    $("p").text(value);
}).keyup(); 
```

`.keyup()`脚本末尾的函数有什么用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:15:22.757

`.keyup(function () {...})`注册一个事件处理程序，`keyup()`立即触发事件。

解释：

由于 keyup 事件将输入值写入单独的 p 元素，这将在页面加载时直接触发。（ty rory）这种方法称为链接，是减少代码的好方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T12:16:17.883

jQuery 允许您链接函数调用。上面的代码等价于：

```
$("input").keyup(function () {
   var value = $(this).val();
   $("p").text(value);
});

$("input").keyup(); 
```

所以第二次调用会触发事件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T12:17:47.493

`.keyup();`是 的缩写`.trigger('keyup')`。它将触发事件并执行事件处理程序。

请注意，该事件将是“假的” - 实际上不会释放任何键，并且您无法从事件对象中获取任何 keyCodes。

# grails - Grails 文件上传 + tagLib

> ID：10350425
> 
> 赞同：0
> 
> 时间：2012-04-27T12:14:08.543
> 
> 标签：grails

如果我想通过 ajax 更改为文件上传创建标签库，那么我必须对 grails 中的标签进行哪些更改。

我有通过 ajax 上传文件的代码，并使用它来创建标签库来上传文件并通过 ajax 提交表单......

我为此做了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T00:12:42.080

你运行过这个命令吗？这将创建必要的文件，而您实际上只是在这些文件中编写代码。基本上，您只需在其中生成 HTML。这是一个标签库的示例[http://www.howardism.org/Technical/Groovy/Useful_Taglibs.html](http://www.howardism.org/Technical/Groovy/Useful_Taglibs.html)

希望这可以帮助 ！！！

# php - PHP时间到Mysql数据库

> ID：10350426
> 
> 赞同：-3
> 
> 时间：2012-04-27T12:14:18.020
> 
> 标签：php, mysql, datetime

嗨，我正在使用 php5 和 mysql。我有这样的时间 10:00, 10:45 ... 我应该把它放在一个 mysql 数据库中，格式为 'hh:mm:ss' 我尝试了不同的方式，但没有任何效果。我尝试的是：

```
$time= time('H:i:s', $mytime)
$time= time('H:i:s', strtotime($mytime))
$time= strtotime($mytime)
$time= strtotime($mytime.':00') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:18:22.303

```
$sql  = "INSERT INTO table SET `time`='$mytime'; 
```

提示：确保您使用正确的 Mysql 字段格式

另一个提示：不要使用随机挑选的 PHP 函数。至少尝试阅读手册中的功能说明。它可以让您了解此功能是否适合您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T12:22:21.397

strtotime 需要一个完整的日期作为输入并输出一个 int。您不需要 mysql 的 int，您只需要您拥有的字符串加上秒信息：

```
$time = $mytime.':00'; 
```

然后在数据库中插入时间，正如@Your_Common_Sense 所说，您需要用户 TIME 数据类型才能以这种格式插入时间。

# google-chrome-extension - “chrome.tabs.create”有效，但“chrome.tabs.update”无效

> ID：10350428
> 
> 赞同：7
> 
> 时间：2012-04-27T12:14:30.987
> 
> 标签：google-chrome-extension

```
function doit() {
 alert(3);
 // Statement 1
 // chrome.tabs.create({url:"http://www.google.com"});
 // Statement 2
 // chrome.tabs.update({url:"http://en.wikipedia.org"});
 alert(4);
}

chrome.browserAction.onClicked.addListener(doit); 
```

* * *

当脚本按原样运行时，我收到 3 和 4 的 JS 警报。好的。

当我在语句 1 中发表评论并运行脚本时，我收到 3 的 JS 警报，然后 Google 在一个新的活动选项卡中打开，然后我收到 4 的 JS 警报。正如预期的那样。

当我注释掉语句 1 并在语句 2 中注释时，我得到一个 JS 警报 3，仅此而已。

根据[http://code.google.com/chrome/extensions/tabs.html#method-update](http://code.google.com/chrome/extensions/tabs.html#method-update)，我不需要传递 tabId 对象，因为它“默认为当前窗口的选定选项卡”。url 对象被定义为“将选项卡导航到的 URL”，正如我在语句 1 中运行 chrome.tabs.create 时注意到的那样。

为什么我的 chrome.tabs.update 语句不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T15:32:55.917

`tabId`必须指定参数。**`null`**如果要使用默认设置，请提供。否则会出现以下错误：

> “browserAction.onClicked”的事件处理程序出错：错误：参数 1 的值无效。应为“整数”但得到“对象”。

此消息记录在**后台页面**中。要访问此控制台，请按照[此答案](https://stackoverflow.com/a/10258029/938089?google-chrome-extension-logging-from-background-js)中的四个步骤操作。

*更正的代码：* `chrome.tabs.update(null, {url:"http://en.wikipedia.org"});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:38:42.460

您必须告诉它您要更新哪个选项卡 (tab.id)。

```
chrome.tabs.update(id,{url:"http://en.wikipedia.org"}); 
```

# skype - 如何让 Skype 始终检测我网站上的号码？

> ID：10350432
> 
> 赞同：0
> 
> 时间：2012-04-27T12:14:41.353
> 
> 标签：skype, skype4com

有什么方法可以通过包含任何头文件或其他内容以及Skype轻松检测到的首选数字格式来使Skype始终检测我网站上的数字...![像这样的东西](../Images/a1f65a8f7b9b9d40c93827bc6983388f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:17:39.483

这是基于浏览器扩展。您网站的用户必须安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:27:09.783

您可以尝试使用带有`tel:`或`skype:`架构的链接，例如：

```
<a href="tel:0123456789">Call us</a> 
```

更多信息[在这里](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)

# java - 将 AJAX 与 servlet 一起使用

> ID：10350433
> 
> 赞同：0
> 
> 时间：2012-04-27T12:15:12.440
> 
> 标签：java, ajax, jsp, servlets

我刚刚开始使用 AJAX。我不确定很多事情，尽管我在互联网上找到了一些教程并开始工作。我很抱歉粘贴了很多代码，但我不知道我哪里出错了。不过感谢您的帮助！:-)

这是我的 JSP（只有 javascript 部分）和 servlet 代码：（后面是异常，后面是我将用于普通 Java 应用程序的等效 Java 代码）：

JSP：

```
//--Function to get the xmlhttp object
function getHttpObject(){
    var xmlhttp = null;
    if (window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}
    else if (window.ActiveXObject){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
    else {alert("Your browser does not support XMLHTTP!");}
    return xmlhttp;
}   

function populateReply(str){
    xmlhttp = getHttpObject();
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4){
            ajxfrm.chatresponse.value=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","NewServlet?chatinput="+str,true);
    xmlhttp.send(null);
} 
```

小服务程序：

```
public class NewServlet extends HttpServlet implements Servlet {

NetworkAimlFacade aiml = null;
int status = 0;
String botName;
String param[];
GraphBuilder builder;

public NewServlet() throws Exception{
    super();

    aiml = new NetworkAimlFacade(param);
    builder = aiml.getNetworkGraphBuilder();
    builder.addDirectoryUnlessAlreadyAdded
    (
        "C:\\Program Files\\RebeccaAIML\\aiml\\annotated_alice"
    );
    builder.createGraph();
    botName = builder.getBotPredicate("name");

}

private String handleRequest(String param){
    return null;
}

public void destroy()
{
    try{
    aiml.destroy();
    }catch(Exception e){
        e.printStackTrace();
    }
}

protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException{

    res.setContentType("text/xml");
    res.setHeader("Cache-Control", "no-store, no-cache");
    String input = "";
    if(req.getParameter("chatinput") != null) 
        input = req.getParameter("chatinput");
    try{
        String response = builder.getResponse(input);
        if(response!=null)    res.getWriter().write(response);
            else res.getWriter().write("No");
    }catch(Exception e){
        e.printStackTrace();
    }

}

protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

}} 
```

这是我得到的错误，而不是从 servlet 获得响应：

Apache Tomcat/7.0.11 - 错误报告

# HTTP 状态 500 -

**类型**异常报告

**信息**

**描述**服务器遇到一个内部错误 () 阻止它完成这个请求。

**例外**

```
    javax.servlet.ServletException：实例化 servlet 类 NewServlet 时出错
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)  
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)   
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)   
    org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:394）
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)  
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)    
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)    
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:619)

```

**根本原因**

```
java.lang.NullPointerException Ice.PropertiesI.<init>(PropertiesI.java:250)
    Ice.Util.createProperties(Util.java:29)
    Ice.Util.initialize(Util.java:70)
    Ice.Util.initialize(Util.java:49)
    Ice.Util.initialize(Util.java:56)
    rebecca.NetworkGraphBuilderAIML.<init>（未知来源）    
    rebecca.NetworkAimlFacade.<init>（未知来源）  
    NewServlet.<init>(NewServlet.java:27)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:394）
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:619)

```

**note** Apache Tomcat/7.0.11 日志中提供了根本原因的完整堆栈跟踪。

### Apache Tomcat/7.0.11

这是我在普通 Java 应用程序中使用的等效 Java 代码，它运行良好！

```
 public class Console {

  public static void main(String args[]) {
  NetworkAimlFacade aiml = null;
  int status = 0;
  try {
    aiml = new NetworkAimlFacade(args);
    GraphBuilder builder = 
        aiml.getNetworkGraphBuilder();
    builder.addDirectoryUnlessAlreadyAdded
    (
      "C:\\Program Files\\RebeccaAIML\\aiml\\annotated_alice"
    );
    builder.createGraph();
    String botName = 
        builder.getBotPredicate("name");
    String initialResponse = 
        builder.getResponse("connect");
    System.out.println(botName + " says: " + 
        initialResponse);
    while(true) {
      System.out.print("You say> ");
      BufferedReader br = 
        new BufferedReader(new 
            InputStreamReader(System.in));
      String input = br.readLine();
      if(input.equals("/exit")) {
        break;
      } else {

String response = 
            builder.getResponse(input);
        System.out.println("=====================");
        //Print out what Rebecca says.
        System.out.println(botName + " says: " + 
            response);
        }
    }
    aiml.destroy();
    } catch(NetworkException e) {
      e.printStackTrace();
      status = 1;
    } catch (Exception e) {
      e.printStackTrace();
      status = 1;
    }
    System.exit(status);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:27:24.897

这是您的异常的相关性摘录：

```
javax.servlet.ServletException: Error instantiating servlet class NewServlet
  ...
java.lang.NullPointerException 
  Ice.PropertiesI.<init>(PropertiesI.java:250)
  Ice.Util.createProperties(Util.java:29)
  Ice.Util.initialize(Util.java:70)
  Ice.Util.initialize(Util.java:49)
  Ice.Util.initialize(Util.java:56)
  rebecca.NetworkGraphBuilderAIML.<init>(Unknown Source)
  rebecca.NetworkAimlFacade.<init>(Unknown Source)
  NewServlet.<init>(NewServlet.java:27)
  ... 
```

换句话说，当容器试图做

```
Servlet serlvet = new NewServlet(); 
```

它失败了，因为`PropertiesI`类的构造函数中的某些东西，在第 250 行，期望某个对象不是`null`，并试图直接访问它而不事先检查它是否`null`存在。检查第 250 行的类的源代码`PropertiesI`并相应地修复它。

这一切都与 ajax 或 servlet**无关。**了解如何解释异常和堆栈跟踪。

# ruby-on-rails - Heroku 应用程序无法正确加载图片

> ID：10350434
> 
> 赞同：2
> 
> 时间：2012-04-27T12:15:14.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我在 Heroku 应用上加载图片时遇到问题。

它快把我逼疯了。

我有一个页面，上面有 5 张照片。它在我的本地主机上加载得非常好，但是当我尝试在 Heroku 上打开应用程序时，5 个图像中只有 2 个正确加载。

其余的，我收到一个 404 错误，说 RoutingError。我一遍又一遍地检查我的代码；检查文件是否在公共/资产中；检查文件名是否在两个地方都被正确引用，但仍然出现此错误。

可能是什么问题呢？？？？

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:50:05.600

好吧，我想通了。我从公共/资产中删除了图片，提交了代码，然后添加了图片并再次提交，然后推送了代码。

注意：实际上在发布问题 2 分钟后发现了这个修复，但是直到现在才让我发布答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:34:19.633

如果您在部署之前不预编译资产，我会尝试这个（或它的变体）：

```
bundle exec rake assets:precompile
git add . 
git commit -m "precompiled assets"
git push heroku master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T14:36:17.163

为生产服务器启用资产预编译

`config/environments/production.rb`

```
config.serve_static_assets = true
config.assets.compile = true 
```

将您的更改推送到 github 和 heroku

```
git add .
git commit -m "Enable assets precompile for production environment"
git push origin master

git push heroku master 
```

而已 ：）

# java - Java计算一段时间内两点之间的转换

> ID：10350446
> 
> 赞同：0
> 
> 时间：2012-04-27T12:16:03.147
> 
> 标签：java, swing

我有 A(0,0) 点和 b(0, 100) 点，我有一个 X ms 的转换时间。我需要在给定的 X 毫秒时间内将我的对象形式点 A 移动到 B。请帮忙。一些伪代码会有所帮助。

我的参考代码：

```
 float time= (float)totalTime / halfTransitionTime;
   new.x = start.x + (end.x - start.x) * time;
   new.y = start.y + (end.y - start.y) * time; 
```

但如果我的时间计算正确，我就不是，因为我没有得到想要的输出。请帮忙。

在上面的类中 translateCalc() 是我进行线性插值计算的方法。我似乎没有得到正确的计算。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:20:32.107

您的线性插值计算是正确的，但将时间计算更改为：

```
float time= ((float)currentTime) / totalTime; 
```

这将为您提供一个介于 0 和 1 之间的值（假设`currentTime`介于 0 和 之间`totalTime`），这应该会导致 和 之间的平滑`start`过渡`end`

# android - 如何在整个应用程序中定期检查 Internet 连接？

> ID：10350449
> 
> 赞同：13
> 
> 时间：2012-04-27T12:16:13.083
> 
> 标签：android

我正在做一个通过应用程序使用 Internet 连接的应用程序。如果在使用应用程序时互联网连接丢失，应用程序将被强制关闭。为避免这种情况，如果互联网不可用，我想显示一条警报消息。我怎样才能做到这一点。在登录时，我正在使用以下代码检查连接。但是我怎样才能在后台为整个应用程序做到这一点。

```
private boolean haveInternet(){
        NetworkInfo info = ((ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
        if (info==null || !info.isConnected()) {
                return false;
        }
        if (info.isRoaming()) {
                // here is the roaming option you can change it if you want to disable internet while roaming, just return false
                return true;
        }
        return true;
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-27T12:22:03.810

您应该`BroadcastReceiver`在连接状态发生变化时触发一个：

```
 public class BroadCastSampleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.registerReceiver(this.mConnReceiver,
                new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    }
    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            if(currentNetworkInfo.isConnected()){
                Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
            }else{
                Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
            }
        }
    };
} 
```

然后在你的`AndroidManifest`你可以检查你是否有连接：

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

下载源代码 -[这里](http://paragchauhan2010.blogspot.com/2012/04/check-network-connection-using.html)

# ruby-on-rails-3 - 通过 ActiveResource 上的站点 URL 传递语言环境参数

> ID：10350453
> 
> 赞同：1
> 
> 时间：2012-04-27T12:16:19.397
> 
> 标签：ruby-on-rails-3, default, activeresource

我正在开发 Rails 应用程序，我想使用 ActiveResource 将请求发送到 REST 服务器。服务器的实际 URL 站点是：

```
http://foo.com/api-v1.0 
```

关键是，对于与服务器的每次通信，我都想在 Rails 应用程序上下文中传递当前语言环境。所以有效的 URL 调用是：

*   [http://foo.com/api-v1.0/en/people](http://foo.com/api-v1.0/en/people)
*   [http://foo.com/api-v1.0/fr/people](http://foo.com/api-v1.0/fr/people)

ETC

因此，我正在关注较差的 ActiveResource 文档，并按如下方式定义我的资源类：

```
class MyClass < ActiveResource::Base
  self.site = "http://foo.com/api-v1.0/:locale
end 
```

然后在我的应用程序控制器上，我有这样的事情，例如当让所有人：

```
MyClass.all(:params => {:locale => I18n.locale}) 
```

这工作正常。

问题是控制器代码变得非常冗长。我必须反复传递`:params => {:locale => I18n.locale}`我正在访问的每一个资源。

为了避免这种情况，我决定有一个派生自 ActiveResource::Base 的基类，并以这样的方式覆盖所有资源访问方法，以便我可以设置 :locale。所以代码变成了：

```
class MyBaseClass < ActiveResource::Base
  self.site = "http://foo.com/api-v1.0/:locale"

  def self.all
    super(:params => {:locale => I18n.locale})
  end
end

class MyClass < MyBaseClass
end 
```

在我的应用程序控制器中：

```
MyClass.all 
```

足够的。

但是，这会给`MyBaseClass`. 我必须重写所有方法`ActiveResource::Base`来传递 this `:locale`。

任何线索我怎样才能更有效地做到这一点？

提前致谢

帕纳约蒂斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:22:37.857

如果您总是希望在应用程序中使用 ActiveResource 的任何地方都有这种行为：覆盖低级**ActiveResource::Connection.request**方法以放入语言环境字符串：

```
class ActiveResource::Connection
  alias :original_request :request
  def request(method, path, *arguments)
    original_request(method, changed_path, *arguments)
  end
end 
```

将其粘贴在初始化程序中。

您的字符串替换会有所不同，但这适用于您的示例：

```
1.9.2p290 :066 >   path = "http://foo.com/api-v1.0/people"
 => "http://foo.com/api-v1.0/people" 
1.9.2p290 :067 > locale = "fr"
 => "fr" 
1.9.2p290 :068 > changed_path = path.sub(/http:\/\/foo.com\/api-v1.0\//, "http://foo.com/api-v1.0/#{locale}/")
 => "http://foo.com/api-v1.0/fr/people" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:17:34.080

你提到`MyBaseClass`派生自`ActiveResource::Base`，但代码表明`ActiveRecord::Base`- 大概，这是一个错字。

确保应用程序区域设置正确；如果它对您有用，以下是我通常为应用程序设置 I18n 的方式：

在`app/controllers/application_controller.rb`：

```
before_filter :set_locale

def set_locale
  I18n.locale = params[:locale] || I18n.default_locale
end

def default_url_options(options={})
  {
    :locale => I18n.locale
  }
end 
```

并在`config/routes.rb`：

```
scope "/:locale" do
  # routes
end 
```

然后，为控制器设置`ActiveResource::Base.prefix`一个`before_filter`。`ActiveResource::Base.site`也可以设置在同一个地方，或者在模型上。模型名称（小写）默认用作指定站点的资源；这些可以被覆盖`ActiveResource::Base.element_name`。`ActiveResource::Base.prefix`可用于为这些资源路径中的每一个添加前缀。因此，在整个应用程序（但这可能只是一个非应用程序控制器）中实现您的示例的一种方法是：

在`app/controllers/application_controller.rb`：

```
before_filter :setup_activeresource

def setup_activeresource
  ActiveResource::Base.site = "http://foo.com/api-v1.0"
  ActiveResource::Base.prefix = "#{I18n.locale}/"
end 
```

实验表明，这可以为每个请求正确设置区域设置，并指向正确的远程资源（嵌套在 /:locale/ 下）。

# c# - web.config、web.debug.config、web.release.config & 发布与调试？

> ID：10350455
> 
> 赞同：6
> 
> 时间：2012-04-27T12:16:27.907
> 
> 标签：c#, azure, web-config, transform

我一直在尝试了解如何使用不同的配置文件，我刚刚发现[这个链接](http://www.tomot.de/en-us/article/5/asp.net/how-to-use-web.config-transforms-to-replace-appsettings-and-connectionstrings)非常有帮助。唯一的问题是，似乎只有在您“发布”解决方案时才考虑转换，而不是在您现在执行通用调试或运行时才考虑。

通常这不会有太大问题，但我正在向 Windows Azure 开发，它只允许您发布到云。对于一般调试，我宁愿在 Azure 模拟器中本地运行它，但这样做不会“处理”我的转换。

是否有任何已知的解决方法可以在调试会话期间对其进行转换？

编辑：ShawnC 向我指出了[这个](https://stackoverflow.com/questions/10350455/web-config-web-debug-config-web-release-config-publish-vs-debug#comment13334137_10350455)问题。

这导致我[这个](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)扩展。我认为这将完成这项工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:49:02.390

您可以使用 msbuild 执行 web.config 转换。您可以将其放在项目的 AfterBuild 目标中以帮助您进行调试。

您需要查看`TransformXml`msbuild 目标，传入：`Source=path_to_your/web.config` `Transform=path_to_your/web.$(ConfigurationName).config` 和 `Destination=path_to_your/web.config`

# php - php 是否包含 html

> ID：10350457
> 
> 赞同：2
> 
> 时间：2012-04-27T12:16:28.903
> 
> 标签：php

PHP 并不是我真正选择的语言，据说我记得看到`if`使用这样的 php：

```
<?php 
    if (blah) { 
?>
        // loads of html and js that doesn't need to be escaped since we closed
        // the php already with "?>"
<?php
    }
?> 
```

或者类似的东西。我不知道它叫什么，如果没有帮助，谷歌搜索 php。

这种技术叫什么？它的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:22:18.013

它可以像您在问题中发布的那样使用，或者像这样（我更喜欢）：

```
<?php 
    if(blah):
?>
        // loads of html and js that doesn't need to be escaped since we closed
        // the php already with "?>"
<?php
    endif;
?> 
```

这在您不执行任何逻辑的模板上最常见，很简单`if`，`loops`例如：

```
<?php foreach($something as $test): ?>
    <p><?php echo $test; ?></p>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:22:17.900

它们被称为 php 标签。看这里：

[http://www.php.net/manual/en/language.basic-syntax.phptags.php](http://www.php.net/manual/en/language.basic-syntax.phptags.php)

语法与您的示例中使用的相同。有一些变化，但这个更可取。

另一种“技术”称为使用控制结构。看这里：

[http://ch.php.net/manual/en/control-structures.if.php](http://ch.php.net/manual/en/control-structures.if.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:23:38.077

您可能想检查一下：

[可以在 IF 语句中将 HTML 嵌入到 PHP 中吗](https://stackoverflow.com/questions/722379/can-html-be-embedded-inside-php-if-stateme)

和

[PHP 手册](http://php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:23:55.927

最干净的方法是这样的

```
<?php if ($test) : ?>
    <p>Some HTML</p>
<?php endif; ?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T12:25:47.950

那个语法是正确的。如果您必须在某些地方混合 PHP 和 HTML，还有一种替代语法可以提高代码的可读性：

```
<?php if( blah ): ?>
  <!-- my HTML -->
<?php endif; ?> 
```

我不同意那些笼统地声明不混合 php 和 html 的人。我使用模板系统尽可能地将应用程序逻辑与 HTML 分开，但在模板文件中仍然存在需要`if`语句或`for`循环的地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T12:28:10.437

正如另一位用户指出的那样，它被称为从 HTML 中转义，它只是回显/打印出 PHP if 语句内的每一行 HTML 的替代方法。

话虽如此，您使用的语法很好：

```
// Option 1
<?php if ($variable) { ?>
<!-- HTML stuff here -->
<?php } ?> 
```

或者，另一种方式：

```
// Option 2
<?php
if ($variable) {
    echo '<div>';
    echo '<span>Totally putting HTML here</span>';
    echo '</div>';
}
?> 
```

或者，user1266222 指出的第三种方式：

```
// Option 3
<?php if ($variable) { include 'path/to/htmlfile/filename.html'; } ?> 
```

这将只包括那里的 HTML 文件。

该方法取决于您想要做什么，所有用例都可行，但对于非常小的 HTML 片段，我会选择选项 2。对于整个 HTML 文件（甚至只是部分），我会选择选项 3 . 如果懒惰并且您有较长的 HTML，则有选项 1。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-27T12:29:38.740

在手册页中，它被称为[Escaping from HTML](http://php.net/manual/en/language.basic-syntax.phpmode.php)
当然，您可以使用任何 PHP 语句，不仅`if`

正确的语法是您在代码片段中使用的语法：用于`?>`关闭 PHP 模式并`<?php`再次打开它，它们之间的文本直接进入浏览器

这种技术的使用必须限于基于 PHP 的模板。然而对于这个目的**非常有用**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T12:19:51.707

你的意思是这样的吗？

```
<?php include("filename.html"); ?> 
```

或者，如果您不在 php 标签内，您可以只编写 html 代码

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-27T12:21:52.570

```
<?php
if(blah){
include('htmlfile.html');
}
?>

htmlfile.html

<!-- Your HTML Code --> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-27T12:22:44.143

它被称为在 HTML 中嵌入 PHP（反之亦然），有一种替代语法可以使它看起来更好一些：

```
<?php if (condition) : ?>
HTML HTML HTML
<?php endIf; ?> 
```

不过，使用`include(file.html);`通常是一种更好的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-27T12:23:07.733

这是一个完全有效的语法，虽然看起来不是很漂亮，所以对于包含大量 HTML 的文件，您也可以使用：

```
<?php if($foo) : ?>
<p>Unescaped html goes here</p>
<?php endif; ?> 
```

[http://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-04-27T12:22:53.363

你可能会考虑`heredoc`

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

# ios - MDM：安装配置文件后证书无效

> ID：10350459
> 
> 赞同：4
> 
> 时间：2012-04-27T12:16:43.723
> 
> 标签：ios, certificate, ssl-certificate, mdm

我们有一个有效的 MDM 解决方案，可以在其中注册设备和安装配置文件。但是，由于 iOS 5 客户报告我们使用的自签名证书在设备上报告为不受信任。在 iOS 4 上安装了证书和配置文件的用户报告在升级到 iOS 5 时看起来是正确的，只要他们不重新注册。

我已经能够重现这一点并进行了以下屏幕转储。

首先，我安装所需的 MDM 根证书。安装后，根证书似乎是受信任的，并查看详细信息，一切看起来都是正确的。

![安装配置文件](../Images/104ba9a290ca53f0273c4e6439831283.png) ![已安装配置文件](../Images/3ae9c21e9d01faa783d7d45faf4a67b2.png) ![iPhoneCA](../Images/8283f5f63f408a5b92b26940ad58401d.png) ![iPhoneCA 详细信息 1](../Images/8fa3d0b75afcfe4859fcc28f5050f794.png) ![iPhoneCA 详细信息 1](../Images/3384e63521d3e1dcef45fb9333fe48c6.png)

接下来我要做的是安装配置文件。起初，配置文件似乎已验证，我继续安装它。安装完成后，不再验证配置文件，而是报告为未签名。 ![生成密钥](../Images/f4216bdb70acb59e5c9cffe6935cc48a.png) ![已安装配置文件](../Images/37ae6d8a16720ca7172c00c6458dee62.png)

然后我回到根证书，现在证书不再受信任。如果我单击查看详细信息，则有关证书的所有信息都消失了。

![不信任](../Images/267ab8a4298b8e501971bbad667dce6f.png) ![空 iPhoneCA](../Images/64c97e8ae796b1ad5714f5f72f1412b7.png)

注册完成后，我们可以在设备上安装和删除配置文件，但是我们会看到有关证书不受信任和配置文件未签名的警告

![未签名的个人资料](../Images/150897d412661e8a4d8672dbb52de6f4.png)

如果我选择重新安装根证书，我可以这样做，我会返回详细信息、报告受信任的证书和经过验证的配置文件。

我已经研究了我们的 SCEP 实施，试图找到问题，但没有运气。每当我更改返回到设备的内容时，设备都会向我报告它收到的内容无效。这让我认为我们发送的内容实际上是正确的，因为设备会在出现问题时报告。

有没有人遇到过这样的问题，或者你有可能的解释吗？

**编辑**

也许有人知道自签名证书应该是什么类型？下面的屏幕截图中使用的是 x500 v1。如果我创建一个 X509 v3（有或没有扩展），iOS 设备无论如何都不信任它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:58:26.063

您在配置文件中提供的服务器 url 不是有效的 ssl 连接，这似乎是问题所在。您需要将服务器 url 连接设为有效的受信任 ssl url。当您安装配置文件时，它会触发您的服务器并因此获得无效/不受信任的服务器 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:02:41.930

我发现问题出在我们的自签名证书上，尽管我不得不使用由另一个机构签名的证书绕道而行。这引发了一些问题，因为我只需更改证书就可以使完全相同的代码工作。

所有屏幕截图描述的结果实际上只是令人困惑，因为证书在一开始似乎是有效的。

最后我意识到自签名证书的签名方式是问题所在。结果是它实际上并没有与自己签名，它只是被创建然后使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T14:51:02.840

MDM 服务器必须使用有效的 SSL 证书在 https 上。这是拥有自签名 ssl 证书的简单问题。请使用有效证书。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-20T03:41:15.147

如果您仍然面临问题，请检查您是否使用身份。p12 是正确的。您正在使用的服务器应该存在。请非常仔细地参考[MDM_Protocol](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf) pdf 文档、[this_page](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)和[this 。](https://stackoverflow.com/questions/10571190/apns-notifications-not-reaching-devices-enrolled-in-apple-mdm)

# c++ - C++ 星号和括号运算符一起使用

> ID：10350461
> 
> 赞同：19
> 
> 时间：2012-04-27T12:16:44.560
> 
> 标签：c++, operators

对不起这个蹩脚的标题，但我不知道如何更好地描述这个问题。

是什么意思：

```
int (*x)[]; 
```

以及如何初始化它？

我知道不是`int *x[]`因为：

```
int a,b;
int (*x)[] = {&a, &b}; 
```

不会编译。

先感谢您。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T12:27:30.293

类型声明具有类似表达式的语法，因此您可以像解析表达式一样解析它们：

```
 x       x is
     *x       a pointer
    (*x)[]    to an array of unknown dimensions
int (*x)[]    of int 
```

优先规则是右边的运算符比左边的运算符绑定得更紧，在每种情况下，靠近元素的运算符绑定得更紧，最后，括号可以用来改变这些绑定，所以：

```
int  *x[];    is an array of pointers,
int *(x[]);   as is this.
int (*x)[];   whereas here, the parentheses change the bindings. 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T12:23:57.097

使用[cdecl](http://cdecl.org/)，您可以轻松确定类型：

> 将 x 声明为指向 int 数组的指针

`x`因此，您可以使用数组的地址进行初始化：

```
int a[]; // conceptual: error if compiled
x = &a; 
```

请注意，数组的大小是其类型的一部分，因此您不能将大小数组的地址分配给指向大小`N`数组的指针`M`，其中`N!=M`（这是上述错误的原因：您需要知道声明它的数组）

```
int b[5];
int c[6];
int (*y)[6];
y = &b; // error
y = &c; // OK 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T12:24:44.453

`int (*x)[]`用于指向空 int 数组的指针。但是在 c++ 中无法初始化一个空数组。只有你可以定义它。您应该使用非空数组：

```
int a[2] = {1, 2};
int (*x)[2] = &a; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T12:24:54.920

`int (*x)[]`mean`x`是一个指向 int 数组的指针。你可以这样做：

```
int a[] = {1, 2};
int (* b)[2] = &a; 
```

* * *

当解释数组类型的变量时，我们应该从右到左。例如

```
int *x[] 
```

表示它`x`是一个数组，数组中的元素类型为`int *`即指向 int 的指针。因此`x`表示一个数组，其元素是 int 指针。但是，括号改变了运算符的优先级。现在`*`首先解释指示`x`是一个指针，其类型为`int []`. 因此，`x`in`int (*x)[]`是一个指向 int 数组的指针，您应该相应地对其进行初始化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T12:41:35.880

我曾经也遇到过 C 类型的问题，直到我知道它是如何创建的。

在 C 中，类型以使用该类型变量的方式描述。

因此，当您看到：

```
int *x; 
```

这意味着表达式`*x`的类型是`int`，`x`指针指向 int 类型的变量也是。

如果你看到：

```
int x[5]; 
```

这意味着表达式`x[3]`的类型是`int`，因此`x`是数组类型的变量。

所以，要表达你的意思：

```
int (*x)[]; 
```

这意味着表达式`*x`是类型的`int[]`（即，一个未知大小的数组`int`）。因此`x`，它是一个指向 int 数组的指针类型的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T12:58:04.440

**int (*x)[ ]** 这意味着 x 是一个指向 int 数组的指针 初始化为： int (*x)[ ]; 诠释一个[10]；x = &a;

**int *x[ ]** 这意味着 x 是一个指向 int int *x[10] 的指针数组；诠释一个[10]；x[0] = 一个；

在我看来，始终使用初始化的数组变量或使用 int **x 而不是 *x[ ] 然后在运行时分配内存。

# c# - 如何使用套接字将简单消息从 WinRT 客户端（.NET 4.5）发送到桌面服务器（.NET 4.0）？

> ID：10350465
> 
> 赞同：1
> 
> 时间：2012-04-27T12:17:00.840
> 
> 标签：c#, .net, sockets, client-server, windows-runtime

我正在尝试使用 C# 制作聊天客户端-服务器应用程序。客户端将是一个简单的 Metro 应用程序 (WinRT)，而服务器将是“老式”桌面应用程序。您能否提供一个简单的代码，如何首先在服务器和客户端之间建立连接，然后如何从客户端向服务器发送“hello world”消息。我正在寻找 3 天后解决此问题的方法。我几乎阅读了有关 StreamSockets、TcpClient 和套接字的任何内容，但仍然无法解决这个问题。不同平台的限制是最大的问题。WinRT 无法使用 TcpClient 对象，旧的桌面应用程序无法创建 StreamSockets 来接收来自服务器的数据。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:56:35.353

这是不可能的。微软已明确阻止从 winrt 应用程序与 localhost 上的其他应用程序进行通信。

# c# - System.IO.WriteAllBytes - 访问路径被拒绝错误

> ID：10350467
> 
> 赞同：9
> 
> 时间：2012-04-27T12:17:06.923
> 
> 标签：c#, winforms

目前在 Windows 7 上的 Visual Studio 2010 .NET 4 中开发 C# WinForms 应用程序。

首先，我使用 File.ReadAllBytes() 方法从文件中读取字节流。然后，当尝试将文件写回时，使用 WriteAllBytes 方法时出现访问路径被拒绝错误。

我尝试传入文字路径 Environment.SpecialFolder.ApplicationData、Path.GetTempPath()，但都给我提供了同样的错误。

我检查了这些文件夹的权限，还尝试以管理员模式启动程序，但没有成功。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-01-17T19:07:28.700

确保在使用`File.WriteAllBytes()`包含文件名时指定整个路径。

`File.WriteAllBytes()`不能写入一般目录，它必须写入特定文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T06:26:45.523

在 windows7 中，c: 存在安全问题。如果您修改了 D: 的路径，则不会出现拒绝访问问题。

尝试使用 Path.GetTempPath() 执行以下示例代码，它将成功执行。

```
 static void Main(string[] args)
    {
        string path = Path.GetTempPath();
        byte[] binaryData;
        string text = "romil123456";
        using (MemoryStream memStream = new MemoryStream(Encoding.ASCII.GetBytes(text)))
            {
                binaryData = memStream.ToArray();
            }
            System.IO.File.WriteAllBytes(@path + "\\words123.txt"    , binaryData);
        }
    } 
```

Environment.SpecialFolder.ApplicationData 提供文件夹名称，而不是提供该文件夹的完整路径。因此，当您在定义的路径中使用它来写入文件时，会在本地应用程序路径下搜索此文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:22:52.800

你确定文件还没有被锁定吗？如果您打算从文件中读取和写入字节，您可能需要考虑使用 Stream 类（例如[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)），这样做的好处是您将锁定文件并且同时没有其他应用程序可以访问该文件.

[本主题](https://stackoverflow.com/a/605708/578843)的代码示例：

```
FileStream fileStream = new FileStream(
  @"c:\words.txt", FileMode.OpenOrCreate, 
  FileAccess.ReadWrite, FileShare.None); 
```

# android - Android - 先于中心标题

> ID：10350468
> 
> 赞同：1
> 
> 时间：2012-04-27T12:17:07.613
> 
> 标签：android, center, title

再次！我想在 Android 中将我的应用程序的标题居中。我知道我可以使用自定义布局，或/和以编程方式 ( `((TextView)((FrameLayout)((LinearLayout)((ViewGroup) getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER);`)

无论如何，无论我使用哪种方式来执行此操作，在加载窗口后，标题都会以一小段延迟居中，这是我不喜欢的。所以，我的问题是：有没有一种方法可以让标题栏的文本居中。我不想打开应用程序，看到左边的文字，然后几秒钟后，看看它是如何居中在上级栏上的。我还使用了一个自定义主题来指定标题的样式，所以。在我尝试过的样式文件中，`<item name="android:gravity">center</item>`但它不起作用。

```
<resources>
<style name="Theme.NoBackground" parent="android:Theme">
    <item name="android:windowTitleBackgroundStyle">
        @style/WindowTitleBackground
    </item>
</style>
</resources>

<?xml version="1.0" encoding="utf-8"?>
<resources> 
<style name="WindowTitleBackground">
   <item name="android:padding">2dp</item>
   <item name="android:gravity">center</item>
</style>
</resources> 
```

感谢您的回答。

# java - 泽西岛丢失 id 字段

> ID：10350473
> 
> 赞同：2
> 
> 时间：2012-04-27T12:17:40.163
> 
> 标签：java, spring, jersey, jsr311

我使用 Jersey 作为 JSR 311 实现。我试图转换为 JSON 的对象如下所示：

```
@XmlRootElement
public class deliveryTimes{
  private Integer id;
  private Short type;
  private Integer orderId;
  /* ... more fields and autogenerated Getters & Setters ... */
} 
```

JSON结果是：

```
{"deliveryTimes":
[{"type":"1","orderId":"30449",/* ... other fields ... */ },
/* ... */
]} 
```

用文字来说：“id”字段正在丢失。在我的其他对象中，id 字段具有其他名称，例如 orderId、customerId ......并且这些字段不会丢失。

我的 pom.xml 看起来像这样：

```
<!-- other stuff -->
<!--  JERSEY -->
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.11</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.11</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-grizzly2</artifactId>
    <version>1.11</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.11</version>
</dependency>

<!-- Jersey + Spring -->
<dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-spring</artifactId>
    <version>1.11</version>
    <exclusions>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<!-- other stuff --> 
```

没有进一步的配置。我在球衣网站或谷歌上没有找到任何有用的东西，所以我在这里发布了我的第一篇文章。

我缺少任何配置选项吗？你如何 JSONify id 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:19:59.253

`id`可能无法编组的原因有很多。

**1 - 它有一个空值**

默认情况下，JAXB 实现不会封送空值。如果您希望编组一个空值，请务必添加以下注释

```
@XmlElement(nillable=true) 
```

有关更多信息，请参阅：

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

**2 - 有一个字段但不是没有访问器（get/set）方法**

默认情况下，JAXB 只映射公共字段和访问器。不符合此条件的任何内容都被视为未映射。您可以通过指定来解决此问题 `XmlAccessorType(XmlAccessType.FIELD)`

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class deliveryTimes{
    ...
} 
```

或通过注释字段

```
@XmlRootElement
public class deliveryTimes{
    @XmlElement
    private Integer id;
} 
```

有关更多信息，请参阅：

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

**3 - 有get方法但没有set方法**

如果有 get 方法但没有附带的 set 方法，那么您的 JAXB 实现会将其视为未映射的属性。要解决此问题，您只需将 get 方法与`@XmlElement`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:25:20.803

“id”没有什么特别之处。从`@XmlRootElement`您的班级开始，我假设您正在使用 JAXB 进行编组（泽西岛的默认设置）。在默认配置中，JAXB 需要一个 getter 将字段编组为 XML/JSON，并需要一个 setter 将字段从 XML/JSON 解组。在这种情况下，我猜你缺少一种`public Integer getId()`方法。`@XmlElement`您可以通过添加到您的`id`字段轻松更改此行为。

# events - 在运行时获取文本框 dojo 小部件内的值

> ID：10350475
> 
> 赞同：2
> 
> 时间：2012-04-27T12:17:53.143
> 
> 标签：events, textbox, dojo, onchange

我在我的项目中使用 dijit.form.TextBox，我想在文本框中更改运行时值，以便在其他地方（在网格中）使用。当我使用 onChange 事件时，我在该文本框中获得旧值（而不是我在运行时编辑的值），当我使用 onKeyUp 事件时，我也在该文本框中获得旧值。

您能否建议我每当我尝试编辑值时它应该触发一些事件并且我应该能够在那个时间点获得框内的值而不是旧值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T14:47:09.873

您还可以将 intermediateChanges 属性设置为 true。这将使 onChange 在每次更改时触发，而不仅仅是在输入字段模糊时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:27:42.090

我试过这个。

HTML

```
 <input dojoType="dijit.form.TextBox" id="myTextbox" /> 
```

脚本

```
 dojo.connect(dijit.byId('myTextbox'),'onKeyUp',function(){
           console.log(dijit.byId('myTextbox').getValue());
    }); 
```

dijit.byId('myTextbox').getValue() 确实让我在每次按键时都获得了文本框中的最新值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T12:59:19.487

如今（Dojo 1.9.3）您已经使用了该`.get("value");`属性。

# asp.net-mvc-4 - Web API HTTP 请求命名约定

> ID：10350478
> 
> 赞同：13
> 
> 时间：2012-04-27T12:18:25.853
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我想了解 MVC4 WEB API 的命名约定，但我找不到任何关于它的文档。我想知道是否可以使用自定义名称创建端点，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T12:42:12.597

如果您想了解如何配置到控制器操作的路由（我相信这就是您在本文中所指的端点），那么您应该阅读[ASP.NET Web API 中的路由](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)文章。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T21:29:20.397

MVC4 Web API 中的约定是 url 以 /api/ 开头，然后是你的控制器名称。从那里开始，您无需像通常那样指定操作名称。控制器操作由请求的类型（GET、PUT、POST、DELETE）决定。因此，您可以通过创建从 API 控制器继承的控制器来创建所需的任何端点。

惯例是；- 控制器作为您的控制器类名称。- /api/ 作为 uri。

假设您想要一个任务控制器。使用 Get() 方法创建一个控制器 TasksController，然后 uri 将是 /api/tasks。

PUT、DELETE 和 POST 也是如此。

所以再次回答你的问题......“我想知道我是否可以使用自定义名称创建端点，如果可以，我该怎么做？”

你可以。只需创建一个从 ApiController 继承的控制器。您可以将其命名为任何您想要的日志，因为它以 Controller 结尾。即（MyController、TasksController 等）

# c# - 当我更改文本框中的文本时，C# 事件不会触发

> ID：10350482
> 
> 赞同：-4
> 
> 时间：2012-04-27T12:19:06.153
> 
> 标签：c#, event-handling

用户更改文本时不会触发 TextChanged 事件。我认为生成的代码可能有错误。

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
      textBox2.Text = textBox1.Text;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T12:25:24.250

您不能只添加方法，您需要打开表单，选择文本框，在属性窗口中查看事件选项卡，然后为`TextChanged`事件设置处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:26:23.990

简单说：通过使用属性/事件窗格并在那里创建您的事件，通过 Visual Studio 中的 GUI 编辑器自动连接它。

上面的代码是您的事件处理函数。活动分为几个部分

1.  事件签名 - 如何调用它
2.  处理函数 - 符合签名
3.  事件挂钩
4.  处理函数添加到钩子
5.  事件已触发。

**事件签名**

```
public delegate void TextChangedEventHandler(object sender, EventArgs e); 
```

**处理函数（你的代码）**

```
private void textBox1_TextChanged(object sender, EventArgs e) { textBox2.Text = textBox1.Text; } 
```

需要符合上面的签名

**事件挂钩** 上面写着“我可以提出这个事件”

```
public event TextChangedEventHandler TextChanged 
```

**处理程序添加到功能**

```
TextChanged += new TextChangedEventHandler(textBox1_TextChanged); 
```

# java - ClassCastException org.jdesktop.DataSet.DataRow 到 TypedDataRow

> ID：10350483
> 
> 赞同：0
> 
> 时间：2012-04-27T12:19:06.470
> 
> 标签：java, casting, datarow, strong-typing, jdesktop

我有这个类型的 DataRow：

```
import org.jdesktop.dataset.DataRow;

public class MainDataRow extends DataRow {
  private MainDataTable baseDataTable;

  protected MainDataRow(MainDataTable dt) {
    super(dt);
    this.baseDataTable = dt;
  }

  public int    getId()                           { return (int)    super.getValue(baseDataTable.getId()); };
  public void   setId(int id)                     {                 super.setValue(baseDataTable.getColId(), id); };
  public int    getDelta()                        { return (int)    super.getValue(baseDataTable.getColDelta()); };
  public void   setDelta(int delta)               {                 super.setValue(baseDataTable.getColDelta(), delta); };
  public String getNombre()                       { return (String) super.getValue(baseDataTable.getColNombre()); };
  public void   setNombre(String nombre)          {                 super.setValue(baseDataTable.getColNombre(), nombre); }; 
```

MainDataTable 格式良好并且工作正常。现在我要做的是在 MainDataTable 中追加一个新行：

```
MainDataTable dt = new MainDataTable(ds);
MainDataRow dr = (MainDataRow) dt.appendRow(); 
```

我收到 ClassCastException。问题出在哪里？谢谢。

**编辑**MainDataTable 是一个类型化的 DataTable，在 appendRow() 上没有覆盖：

```
public class TypedDataTable<TypeOfRow> extends DataTable {
...
}

public class MainDataTable extends TypedDataTable<MainDataRow> {
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:25:14.047

appendRow() 返回一个 DataRow 对象，而不是 MainDataRow 对象。这就是你的演员失败的原因。由于 MainDataRow 扩展了 DataRow，只需执行

```
MainDataRow dr = dt.appendRow(); 
```

并从那里扩展功能。

# c# - C#：使用 System.Reflection.GetFields() 显示字段元数据

> ID：10350486
> 
> 赞同：2
> 
> 时间：2012-04-27T12:19:34.313
> 
> 标签：c#, system.reflection

> **可能重复：**
> [使用反射查找私有字段？](https://stackoverflow.com/questions/95910/find-a-private-field-with-reflection)

我正在尝试使用 System.Reflection.GetFields() 方法显示类的字段名称。

问题是它仅在字段被声明为“公共”时才有效。例如 ：

```
class Element
{
    private String id;
    private string a;
    private string b;
    private int c;
    private Dictionary<String, String> dict;

    public Element(String id)
    {
        this.id= id;
    }} 
```

当我尝试调用 System.Reflection.GetFields() 方法时，它不起作用（它返回一个空数组）。但是，如果我将字段的可见性更改为“公共”，它会起作用..

有谁知道我怎样才能让它工作而不必公开？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:23:09.040

尝试这个：

```
GetFields(BindingFlags.NonPublic | BindingFlags.Instance) 
```

更新：当您在没有参数的情况下调用 GetFields 时，场景如下：

```
public FieldInfo[] GetFields()
{
   return this.GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.Instance);
} 
```

因此，如您所见，默认情况下不返回私有字段。

顺便说一句，这里是来自 msdn的[GetFields()方法的描述：](http://msdn.microsoft.com/en-us/library/ch9714z3.aspx)

> 返回当前 Type 的所有*公共字段*。返回值： FieldInfo 对象数组，表示为当前类型定义的所有公共字段。- 或 - 如果没有为当前类型定义公共字段，则为 FieldInfo 类型的空数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:22:56.810

尝试这个

```
var fieldinfo = typeof(Element).GetField("field name", BindingFlags.NonPublic |
                             BindingFlags.Instance); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:36:26.220

GetFields 方法仅返回*公共*字段。如果您希望它返回私有和公共字段，请使用：

```
c.GetType().GetFields(BindingFlags.Instance|BindingFlags.NonPublic|BindingFlags.Public); 
```

您必须指定**BindingFlags.Instance**或**BindingFlags.Static**以及 BindingFlags.Public 或 BindingFlags.NonPublic，否则将不返回任何成员。

查看 msdn 以获取更多信息： [MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)

# ios - 我的弹出窗口中没有数据

> ID：10350487
> 
> 赞同：1
> 
> 时间：2012-04-27T12:19:46.323
> 
> 标签：ios, popover

我正在尝试在弹出窗口中显示一个列表，但我得到的只是一个空白弹出窗口，控制台中显示以下消息：-

> `-[UIPopoverController presentPopoverFromRect:inView:permittedArrowDirections:animated:]`：传入此方法的矩形必须具有非零宽度和高度。这将是未来版本中的一个例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:36:09.837

实际上，当您没有框架时可能会发生这种情况，因为您没有连接按钮的 iboutlet，或者您在下面设置的框架为 nil

```
[popoverViewController presentPopoverFromRect:button.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES] 
```

如果按钮框架为零，那么或者你给空框架你会得到错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:01:24.527

不知何故，你给它一个无效或零矩形。

# jqgrid - 在 jqGrid Treeview 邻接模型中获取子项

> ID：10350497
> 
> 赞同：0
> 
> 时间：2012-04-27T12:20:50.027
> 
> 标签：jqgrid, treeview

我使用 jqGrid Treeview Adjacency 模型来显示层次结构。Treeview 完美运行，没有问题。但我想检索节点的孩子。我已经有了那一行的 id。我写过这样的代码

```
var record = jQuery("#Listtbl").jqGrid('getInd',rowid);
newRecord =  $('#Listtbl').jqGrid('getNodeChildren',record); 
```

但在新记录中，我总是得到所有记录而不是孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:09:43.127

您使用了错误的[getNodeChildren](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atreegrid#methods)`record`参数值。你应该使用or ：`getRowData``getLocalRow`

```
var localRow = $('#Listtbl').jqGrid('getLocalRow', "5"),
    children = $('#Listtbl').jqGrid('getNodeChildren', localRow);

alert(children.length); 
```

# web-applications - c3p0 中的内存泄漏 - java.lang.NoClassDefFoundError: com/mchange/v2/resourcepool/BasicResourcePool

> ID：10350499
> 
> 赞同：2
> 
> 时间：2012-04-27T12:21:07.593
> 
> 标签：web-applications, c3p0, jboss-4.2.x, jboss-portal

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:20:55.527

> 每当我们在 Jboss AS 中热部署 war 文件时，都会遇到来自 c3p0 的内存泄漏。

如果您在 JBoss 4.2（或任何其他版本的 JBoss）中进行热部署，您最终将在 PermGen 池中泄漏内存，并且服务器将需要重新启动。我知道没有解决方法，它与 c3p0 无关。

在开发中，这只是一个小麻烦。在生产中，您根本不应该这样做。

# html - 如何根据我所在的 URL/网站和/或服务器自动选择要使用的 CSS？

> ID：10350504
> 
> 赞同：0
> 
> 时间：2012-04-27T12:21:44.990
> 
> 标签：html, css, knockout.js

我有一个 HTML 小部件/表格，它从私有服务器中提取信息，该服务器使用来自 javascript 视图模型文件的 JSON/knockoutjs 数据绑定在所选字段中显示我想要的信息。我将把这个小部件放在不同的服务器/站点上。问题是（尽管很愚蠢）我需要根据我所在的站点/服务器使用不同的 CSS。HTML 或 Javascript 中有没有办法说如果我去这个网站或服务器使用这个 CSS，或者如果我访问这个网站/服务器使用我拥有的其他 CSS 文件？

如果它仍然可能的话；也许有一种方法可以判断网站 url 或服务器是否包含特定单词；例如：[http](http://abcdEXAMPLEefghi.com) ://abcdEXAMPLEefghi.com ；在此示例中，我将检查 URL 中是否包含“EXAMPLE”一词，如果是，则使用 CSS2 而不是默认的 CSS1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:44:48.933

也许是这样的？

[http://jsfiddle.net/pqLVz/](http://jsfiddle.net/pqLVz/)

```
<script>
    if (window.location.href.indexOf('net') > 0) {
        document.write('<link rel="stylesheet" type="text/css" href="/css/basicsite.css" />')
        document.write('<style>p { color: red; }</style>')
    }
</script>
<p>hello</p> 
```

# wcf - WCF + CQRS + 推送通知

> ID：10350514
> 
> 赞同：3
> 
> 时间：2012-04-27T12:22:12.393
> 
> 标签：wcf, notifications, cqrs

我必须设计一个连接到 WCF 服务的客户端系统，以对数据库执行读写操作，并获取通知。

有人告诉我使用 CQRS 模式。

举个例子，客户端将连接到服务以执行诸如**获取产品列表**和**更新产品**之类的操作。他们还可以执行诸如**接受货**件和**拒绝货**件之类的操作（这可能会导致首先执行此操作的客户之间发生竞争）。只有一个客户可以“接受”货物或“拒绝”货物。

所以我读了一点关于 CQRS 的内容，并理解它使读取与写入分离（使用命令）。但是，如果我使用 CQRS，我不确定一些主要问题：

1.  如果我在 WCF 服务上使用 CQRS 模式 - 我可以指望在数据库上**同步**完成的事情吗？我有点困惑，因为我不希望服务是单线程的（以支持未来的可扩展性），但另一方面 - 我如何确保服务上的写操作以正确的顺序执行？甚至读操作？CQRS 模式是否保证有序处理？[（有人在这里](https://stackoverflow.com/questions/10238909/wcf-service-with-worker-thread-how-to-design)告诉我，CQRS 模式使用“更新”队列来更新脱机处理的请求）。

2.  使用 CQRS 可以消除并发问题吗？

3.  我是否仍应在与数据库交互的所有命令处理程序中使用“TransactionScope”？

4.  我花了一个多星期的时间试图了解如何为客户实施通知服务，但没有运气。我有这个[设计](http://s16.postimage.org/aqakx6j9f/asdf.png)：[![设计](../Images/1c80a0f37b81b8ba40218332388136dd.png)](https://i.stack.imgur.com/pq0PB.png)

“产品服务”将是 CQRS 服务，但通知服务有问题。客户端可以向产品服务发送命令以通知 X 类产品。该命令将更新数据库中的请求。现在假设通知服务每 15 分钟轮询一次数据库，并检查哪个用户希望轮询哪个类别，然后将新产品发送给请求就这些产品类别进行通知的用户。如果用户更改了产品的类别并且其他 20 位用户已经在他们的通知窗口中看到了该产品，现在会发生什么情况？我需要某种方法来检测产品不再属于该类别，并向他们发送通知，例如**'从您的视图中删除该产品'。这听起来不太像通知。这听起来更像是“请求数据库表的 CONSTANT RELEVANT 视图，并且每个更改都应该反映到客户端的屏幕上”**。我该如何做这种通知服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:14:35.860

这可能不是您具体问题的答案，但可能有助于评估您是否可以（或应该）在您的应用程序的哪些部分使用 CQRS？

更具体地说：CQRS 既不是无论如何都应该应用的灵丹妙药，也不是整个应用程序的总体架构风格。

CQRS 在应用于单个和明确指定的有界上下文时可以提供许多优势（参见 Eric Evans 的域驱动设计）。

您或您的团队应首先提出的问题：

*   我的应用程序的限界上下文是什么？
*   对于每个 BC：它基本上是 CRUD 还是需要更复杂和复杂的建模？
*   如果它是 CRUD，那么就这样实现它
*   如果它很复杂，那么问题已经解决了吗？是否需要重新发明轮子，或者我们可以只使用一个完成的解决方案（概念上甚至是一个软件）
*   如果我们需要自己构建它，这个特定的 BC 是否提供了主要的业务价值，我们的实施是否提供了竞争优势的潜力？（参考领域驱动设计中的“核心领域”）
*   如果以上适用，那么研究各种架构风格并选择最合适的。

长话短说：不要试图在整个应用程序上强加一种风格。识别 BC，并为每个 BC 使用满足要求的最简单的解决方案。这很可能是 CQRS，但在您的应用程序中最多只有一两个 BC。

将精力集中在应用程序中最复杂的部分，如果使用 CQRS 进行形式化*和*实施，则可以提供真正的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:57:45.987

1.  数据库不同步做事，它们使用根据数据库事务隔离级别规则交错的事务。但他们确实会更新他们的索引作为交易的一部分，这才是最重要的部分。
2.  不，它没有，但它消除了单个写入器阻塞多个读取器的问题，其中您拥有高度竞争的资源，例如数据库表。例如，在我工作的系统中，爆炸数据是从传感器插入的，并且作为为用户创建报告的一部分读取。这是 CQRS 非常适合的位置。CQRS 的大多数实现都控制了它们的并发问题，它实际上是与 DDD 一起的一个很好的模型，其中您的并发是激烈竞争的业务逻辑。但是，您会获得其他属性，例如没有堆栈或不得不因幂等性和消息重新排序而死。
3.  您将有两个数据库；一个保存事件（如果您正在进行事件采购）/实体和另一个/多个其他每个视图，您希望与事件保持同步。
4.  你会想使用像 MassTransit + SignalR 这样的东西。创建一个订阅事件并通过 SignalR-hub 向浏览器推送通知的读取模型（基本上是**每个屏幕的 DTO ）。**

# c - 使用计时器进行延迟

> ID：10350520
> 
> 赞同：3
> 
> 时间：2012-04-27T12:22:18.497
> 
> 标签：c, embedded

我需要使用硬件定时器实现延迟功能。计时器值每毫秒递增一次。

通常的方法是使用定时器寄存器的宽度并使用对应于

```
volatile int TimerReg;

void Delay(int amount)
{
    int start = TimerReg;
    int elapsed;

    do
    {
        eleapsed = TimerReg - start;
    } while (elapsed < amount);
} 
```

这在 TimerReg 的宽度为 int 时有效。在这种情况下，差异`now - start`是一个稳定增加的值。

但是当 TimerReg 的宽度小于 int 的宽度时，或者（在我的情况下）定时器只从 0..1000 开始计数，当定时器从 999 超过 1000 到 0 时，就会出现问题。

使用这种计时器的好方法是什么？我想避免模运算，因为这在微控制器上很昂贵。

*编辑*：除法模块尚未包含在微控制器代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:39:28.633

像这样的东西怎么样：

```
volatile int TimerReg;

void Delay(int amount)
{
  int start = TimerReg;
  int elapsed;
  int rolled_over = 0;
  int last_time = start;

  do
  {
    int timer_reg = TimerReg;
    // Check for rollover
    if(last_time > timer_reg) {
      // ROLLOVER_INTERVAL is the magic number at which the timer rolls over to 0
      rolled_over += ROLLOVER_INTERVAL - start;
      start = 0;
    }
    last_time = timer_reg;
    if(rolled_over == 0) {
      elapsed = timer_reg - start;
    } else {
      elapsed = timer_reg + rolled_over;
    }
  } while (elapsed < amount);
} 
```

当然，还有两个 if 测试和两个变量，所以可能有一个更有效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:49:28.350

谁控制计时器翻转？例如，如果您可以将其更改为 0xFFF 滚动到 0x000 而不是 999 到 000，那么您可以使用简单的掩码

```
elapsed = (TimerReg - start)&0xFFF; 
```

这是非常便宜的

```
elapsed = (TimerReg - start)%1000; 
```

是你现在的位置，非常昂贵。

不太糟糕的替代方案是爱德华发布的内容，基本上检查翻车

```
nowtime = TimerReg;
if(nowtime < start)
{
   elapsed = (1000 - start) + nowtime;
}
else
{
   elapsed = nowtime - start;
} 
```

以上所有内容都假设一个向上计数的计时器。

微控制器通常包含多个计时器，最好留下一个计数到最大计数（0xFFFF 或 0xFFFFFFFF 或其他）并翻转为零的计时器，这样您就可以立即使用 - 持续任何您想要测量时间的时间（短于翻转值得时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:54:03.777

如果你有一个真正的硬件计时器，你可以这样做：

```
start_timer();
while ( (timer_flag_register & bitmask)==0 )
{
  do_stuff();
} 
```

其中 start_timer() 将硬件定时器计数器设置为 [主定时器计数器] + [延迟时间]。当时间过去时，硬件设置一个标志（或调用中断服务程序）。几乎每个 MCU 上的每个硬件定时器都以这种方式工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:29:42.520

我想到了。当定时器寄存器的宽度与 int 的宽度相同时，它会隐式完成。将计时器的数字圈添加到`elapsed`值中就足够了，当它为负时使其在有效范围内。

```
volatile int TimerReg; /* value range: 0..999 */
const int TimerMaxValue = 999;

void Delay(int amount) 
{ 
    int start = TimerReg; 
    int elapsed; 

    do 
    { 
        eleapsed = TimerReg - start;
        if (elapsed < 0) eplapsed += (TimerMaxValue + 1);
    } while (elapsed < amount); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:21:37.260

您可以在定时器达到其值时使用**中断**来增加全局计数器（例如每 1000 毫秒）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-01T07:34:59.493

您的 1ms 计时器（奈奎斯特频率）比您的轮询代码慢得多。因此，您可以简单地使用 uqual 运算符 '='：

```
volatile int TimerReg;

void Delay(int amount)
{
    int future = TimerReg + amount;

    while (TimerReg != future);
} 
```

这是一个优雅的解决方案，以我的拙见，但它只有在'TimerReg' 可以在其整个范围内自由运行时才有效，例如'0xffff'。

# powershell - Powershell：使用 foreach 和 listbox 时的奇怪输出

> ID：10350524
> 
> 赞同：1
> 
> 时间：2012-04-27T12:22:27.757
> 
> 标签：powershell, listbox, foreach

我目前正在试验并尝试获取此代码：

```
$processnames = Get-Process | select name 
foreach ($processname in $processnames)
{
[void]$AD_list_current.Items.Add($processnames)

} 
```

在列表框中输出。它按原样输出，但由于某种原因，它一直在列表框中显示为：![在此处输入图像描述](../Images/9dd61a6490487b2ba2ed71e01d20684d.png)

有人知道为什么吗？

将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:53:11.587

这是添加所有进程名称的更短的方法：

```
$list.Items.AddRange( (Get-Process | select name) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:30:14.863

尝试这个：

```
[void]$AD_list_current.Items.Add($($processnames)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:27:52.033

您正在添加`$processnames`而不是添加`$processname`到您的列表中。

那是一个数组。

根据 Joey 的评论，默认`ToString()`方法将显示类型名称，即`System.Object`.

# ajax - AJAX 中的 Cookie 从子域调用到上述域未发送

> ID：10350528
> 
> 赞同：1
> 
> 时间：2012-04-27T12:22:55.037
> 
> 标签：ajax, cookies

我有两个域：

```
test.local
editor.test.local 
```

用户在域上注册`test.local`，浏览器通过域获取 cookie`.test.local`现在我想在从`editor.test.local`to的 AJAX 调用中使用这个 cookie `test.local`，但**没有发送 cookie**。是否有任何简单的解决方法可以从子域发送 cookie，或者我应该使用 iframe 和 postmessages？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:49:12.937

Cookie 可以在子域之间共享，具体取决于它们的“范围”。

要确定要使用的 cookie 的范围，`foo.example.com`并将`bar.example.com`其设置为`.example.com`（仅在域前面使用点）。

除了这种机制之外，cookie 不应该跨域“泄漏”，域由页面的`domain, protocol and port`.

# android - 具有不同颜色的哈希图作为图像

> ID：10350536
> 
> 赞同：0
> 
> 时间：2012-04-27T12:23:20.250
> 
> 标签：android, hashmap

我想在我的文本右侧的每个列表项中使用不同的颜色。我使用哈希图，如果我想使用图像，我可以这样做：

```
 map = new HashMap<String, Object>();
        map.put("name", getString(R.string.wheretogo));
        map.put("address", R.drawable.sites3);

        mainlist.add(map); 
```

我该怎么做，但不使用可绘制但#252525 颜色的图像？

谢谢（抱歉我的英语不好！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:28:44.300

为什么不将十六进制代码存储为字符串？可以使用 android.graphics.Color 类将它们更改为实际颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:33:25.037

你甚至可以使用：

```
Color.rgb(red, green, blue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:40:01.630

或者将颜色作为 int 以十六进制表示：0x252525

可能需要添加 Alpha 通道。对于不透明，您需要 0xFF252525

# android - 安卓谷歌地图导航

> ID：10350541
> 
> 赞同：1
> 
> 时间：2012-04-27T12:23:45.477
> 
> 标签：android, google-maps, android-intent, navigation

我的问题是我有一个目的地地址，我必须通过用户当前位置的导航显示从当前位置到目的地位置的路线。

我只在stackoverflow中尝试了一些..但没有成功。[**有意图的地图**](https://stackoverflow.com/questions/6560345/suppressing-google-maps-intent-selection-dialog)。

我怎样才能达到这个要求。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:52:36.103

我就是这样做的

```
Intent NavIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=" + incAddress));
        startActivity(NavIntent); 
```

意图启动谷歌导航并指示地址

# android - 了解 Android 身份验证中的意图

> ID：10350542
> 
> 赞同：5
> 
> 时间：2012-04-27T12:23:45.627
> 
> 标签：android, authentication, android-intent

在处理身份验证时，我对 Android 架构有一些疑问。

假设我调用`AccountManager.getAuthToken`了一个我需要进行身份验证的特定帐户。假设由于密码错误而导致身份验证失败。合约要求身份验证器`AbstractAccountAuthenticator`返回一个`Bundle`处理`Activity`用户名/密码输入的`KEY_INTENT`.

我的问题是：谁应该显示 UI？Android 是否会自动检测`KEY_INTENT`存在并运行 UI，或者我的代码是否必须符合' 响应`startActivity`中体现的意图？`AccountManager`这同样适用于`AccountManager.addAccount`通过 Future 接口捆绑结果的方式。

在哪里可以找到有关这些主题的教程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:41:49.463

当活动存在时，系统不会自动显示活动`KEY_INTENT`。由您决定是否开始该活动。

这是一些示例代码：

```
private AccountManagerCallback<Bundle> mAccountManagerCallback = new AccountManagerCallback<Bundle>() {

    public void run(AccountManagerFuture<Bundle> future) {

        Bundle bundle;
        try {

            bundle = future.getResult();
            //if an intent was sent, start the required activity
            if (bundle.containsKey(AccountManager.KEY_INTENT)) {
                Intent intent = bundle.getParcelable(AccountManager.KEY_INTENT);

                //clear the new task flag just in case, since a result is expected
                int flags = intent.getFlags();
                flags &= ~Intent.FLAG_ACTIVITY_NEW_TASK;
                intent.setFlags(flags);

                startActivityForResult(intent, REQUEST_CODE_AUTH);

        } else {
            //otherwise, just get the credentials
            if (bundle.containsKey(AccountManager.KEY_AUTHTOKEN)) {
                    String authToken    = bundle.getString(AccountManager.KEY_AUTHTOKEN);
                    String userMail     = bundle.getString(AccountManager.KEY_ACCOUNT_NAME);
                    //use the credentials
            }
        }
      }
      catch(...) {
        ...
        //handle errors, maybe retry your getAuthToken() call
      }
    }
} 
```

我希望这是您正在寻找的，但如果我没有正确理解您的问题，请澄清。

干杯!

# c# - 接口是否在继承链中？

> ID：10350543
> 
> 赞同：2
> 
> 时间：2012-04-27T12:23:46.440
> 
> 标签：c#, inheritance, interface

网上有两种关于 的陈述`Interface`，即
陈述 A

> 接口不在继承链中。

其他陈述 B

> [接口可以继承其他接口](http://msdn.microsoft.com/en-us/library/ms173156%28v=vs.80%29.aspx)

这两个是矛盾的说法。

请告诉我哪一个是正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:30:20.493

他们都是真的，有点。

声明 A：接口不严格继承。如果你有一个实现接口的类，你说

```
base. 
```

您不会看到界面的成员。

声明 B：这将更好地理解为“接口可以*实现*其他接口”。你可以有一个实现链；但他们并没有真正继承。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T12:26:11.207

接口可以继承其他接口，试一试，你会发现它是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:42:27.840

两种说法都是正确的。

第二个说法是正确的。InterfaceA：InterfaceB 非常好，实现 InterfaceA 的类也必须继承 InterfaceB。

“接口不在继承链中”的意思是如果DerivedClass：BaseClass，InterfaceA，您可以使用base.BaseClassMethod从DerivedClass访问BaseClass成员，而您不能以相同的方式调用base.InterfaceAMethod，因为接口不是继承链的一部分。相反，它们的成员可以通过多态性访问。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-04T22:59:58.947

They are both true, because they are both possible with C#. BUT, as we write clean code and [program to an interface instead of an implementation](https://softwareengineering.stackexchange.com/questions/232359/understanding-programming-to-an-interface):

*   We don't want to [get surprised](https://en.wikipedia.org/wiki/Principle_of_least_astonishment) with the interface-chains.
*   And, we follow the [Interface segregation principle](https://en.wikipedia.org/wiki/Interface_segregation_principle).

Consider this,

```
interface IFileRepository : IDisposable { ... } 
```

This says, whomever implements the `IFileRepository`, MUST implement the `IDisposable`. But, I can write a FileRepository, which might not need to dispose any resource. Or another example during unit-testing that I write a `FileRepository`-**Stub** for a class which uses it as dependency, but doesn't invoke `Dispose()` at all, at least in the method I test. And yet, I have to implement `IDisposable`.

Clean-design should not dictate such implementation. Concrete implementations should know what to provide.

```
class FileRespository : IFileRepository , IDisposable { ... } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T12:27:48.397

在 .NET 世界中，接口绝对可以继承其他接口。任何实现类都应该实现它继承的所有接口的所有方法和属性。

如果存在命名矛盾，实现类必须使用[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)。

# c# - 在 Windows Phone 7 中检索当前基于网络的位置

> ID：10350546
> 
> 赞同：0
> 
> 时间：2012-04-27T12:24:07.007
> 
> 标签：c#, windows-phone-7

我需要为 WP7 应用程序找到当前所在的国家/地区。我该怎么做？

谢谢，亚历克斯·德沃夏克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:28:38.747

[MSDN 上](http://msdn.microsoft.com/en-us/library/ff431782%28v=vs.92%29.aspx)有一个关于如何使用位置服务的操作指南- 如果您只对所在国家/地区感兴趣，则只需要[默认](http://msdn.microsoft.com/en-us/library/system.device.location.geopositionaccuracy%28v=vs.92%29.aspx)精度，但您需要将其插入一些 web 服务/内部数据库以转换为实际国家的名字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:39:19.137

要将纬度/经度转换为应该为您提供国家/地区的地址，您可能需要尝试使用来自 bing 地图的地理编码服务进行反向地理编码。文章： http: [//msdn.microsoft.com/en-us/library/cc879136.aspx](http://msdn.microsoft.com/en-us/library/cc879136.aspx) 地理编码服务元数据网址：[http ://dev.virtualearth.net/webservices/v1/geocodeservice/geocodeservice.svc?wsdl](http://dev.virtualearth.net/webservices/v1/geocodeservice/geocodeservice.svc?wsdl)

# php - 比较两个单独表中的两行

> ID：10350548
> 
> 赞同：0
> 
> 时间：2012-04-27T12:24:12.177
> 
> 标签：php, mysql, comparison

我在数据库中有两张表，一张名为*purchase*，一张名为*items*。

我的问题是我正在尝试处理是否可以退回购买中列出的物品。

例如，**人 A**购买了项目 A 和 B。这两个购买都插入到*Purchases*表中。项目 A 和 B 也列在*项目*数据库中。*项目*包含是否可退货。检查此人已购买和可退回的物品的最有效方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:26:54.377

```
select * from purchases p
inner join items i on p.id = i.purchase_id
where p.id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:27:34.493

从概念上讲，您需要执行以下操作：

```
SELECT item_id, can_be_returned
FROM Purchases P
JOIN Items USING (item_id)
WHERE purchase_id = 42 
```

因此，您将从 ID 为 42 的购买中获得物品 - 是否可以退货。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:26:39.993

我认为您正在寻找类似这样的查询

```
mysql_query("select col1.purchases,col2.purchases,col1.items where somecol.purchase=somecol.items"); 
```

# java - JAXB Marshal 异常：.Impl 类及其任何超类都不为任何上下文所知

> ID：10350549
> 
> 赞同：2
> 
> 时间：2012-04-27T12:24:14.460
> 
> 标签：java, jaxb

我在使用 JAXB 编组我的 Java 对象时遇到问题。当我将 Web 服务作为独立应用程序运行时，它运行良好。

当我将它与我的项目集成并使用生成的 Java 类时，在编组时出现异常

> `RequestImpl`类或其任何超类都不为任何上下文所知。

在生成我的 JAXB 实例时，我使用以下语句：

```
JAXBContext jaxb = JAXBContext.newInstance("com.eos.hotels.API.Request"); 
```

我有 2 个单独的 xsd，一个`Request`用于`Response`.

生成的 java 类存储在一个文件夹结构中，如下所示：

```
API->请求
API->响应

```

在上述两个文件夹中，`ObjectFactory.java`都创建了一个并且`jaxb.properties`也在那里。

此外，在上述每个文件夹中，`impl`都会创建包含所有`Impl`文件的文件夹，并在此`impl`文件`runtime`夹中创建文件夹。

所有`xs:element`来自 XSD 的都是作为接口创建的，只有`Impls`是类。此外，生成的 java 文件中没有 XML 注释。

谁能告诉我这里出了什么问题？

出现此问题是因为文件夹结构还是因为 XML 注释不存在？

我在互联网上读到注释如果不存在也不是问题。

我什至尝试将生成的 impl 类复制到与 相同的文件夹中`ObjectFactory.java`，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:54:01.513

尝试在您的 JAXBContext 对象上调用 toString 方法。因为您使用的是 JAXB1 类，所以它应该显示如下内容：com.eos.hotels.API.impl.runtime.DefaultJAXBContextImpl。如果不是 - 您可能在 com.eos.hotels.API 包中没有 jaxb.properties 文件，或者您已删除 com.eos.hotels.API.impl.runtime 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:39:00.317

因此，您正在使用 jaxb1，并从 2 个不同的 XSD 生成您的 jaxb 类，希望声明两个单独的命名空间 URI（否则会弄乱 JAXB）。

首先，我会考虑将这两个 XSD 结合起来，并拥有一个命名空间 URI。您仍然可以使用相同的包结构，或者以单个包结构结束，但更重要的是，将以单个运行时文件夹结束。此外，您最终将得到一个 ObjectFactory，这将避免在使用同一类中的两个 ObjectFactory 类时必须使用 FQCN（完全限定的类名）（这将使您的导入语句无用，这可能是一个陷阱也在这里玩）。

当您构建 JAXBContext 时，请确保列出所有*根*包（而不是 impl 包），您应该一切顺利。

试试这个，让我们知道你得到了什么。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:11:35.300

在创建时，`JAxbContext` 我使用了以下内容：

```
JAXBContext jaxb = new DefaultJAXBContextImpl(packagename, ObjectFactory.class                 .getClassLoader()); 
```

虽然我不知道为什么，但它似乎工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:37:43.693

在从多个目录生成的类上创建 JAXBContext 时，您需要包含用冒号“：”分隔的所有包名称。

```
 JAXBContext jaxb = JAXBContext.newInstance("com.example.package1:org.example.package2"); 
```

# modal-dialog - 如何以模态方式显示网页

> ID：10350551
> 
> 赞同：0
> 
> 时间：2012-04-27T12:24:24.507
> 
> 标签：modal-dialog, webpage

有网站A。还有一个链接说“点击打开网站B”。是否可以在网站 A 内以模态方式打开网址链接中指定的网站 B 的网页？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:51:56.350

如果我理解正确，你想要一个[iframe](https://developer.mozilla.org/en/HTML/Element/iframe)。然后，您可以将链接的目标属性设置为 iframe 的名称。

```
<iframe name="my_iframe"></iframe>
<a href="http://www.google.com/" target="my_iframe">go to Google</a> 
```

# python - 超时无法通过 pika 发送。阻塞连接

> ID：10350553
> 
> 赞同：0
> 
> 时间：2012-04-27T12:24:26.730
> 
> 标签：python, pika

我正在尝试编写一个客户端程序来从 rabbitmq 服务器接收，我想用它来设置超时。在指定的时间之后，客户端应该停止消费队列中的消息并退出。

我正在使用带有 Blocking connection 的 pika。我看到了阻塞连接中定义的 add_timeout(delay,callback) ，但是当我尝试使用它时，我收到以下错误，如下所示。

```
 [*] Waiting for logs. To exit press CTRL+C
Traceback (most recent call last):
  File "/root/workspace/Misc/misc/pika_samples/log_recieve.py", line 39, in <module>
    channel.start_consuming()
  File "/usr/lib/python2.6/site-packages/pika/adapters/blocking_connection.py", line 293, in start_consuming
    self.transport.connection.process_data_events()
  File "/usr/lib/python2.6/site-packages/pika/adapters/blocking_connection.py", line 103, in process_data_events
    self.process_timeouts()
  File "/usr/lib/python2.6/site-packages/pika/adapters/blocking_connection.py", line 160, in process_timeouts
    self._timeouts[timeout_id]['handler']()
TypeError: callback() takes exactly 4 arguments (0 given) 
```

这是我的客户程序。我没有运行任何服务器来模拟超时条件。

```
#!/usr/bin/env python
import pika
import sys

connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
channel = connection.channel()
channel.exchange_declare(exchange='topic_logs',type='topic')
result = channel.queue_declare(exclusive=True)
queue_name = result.method.queue
binding_keys = "#"
for binding_key in binding_keys:
    channel.queue_bind(exchange='topic_logs',queue=queue_name,
                   routing_key=binding_key)

print ' [*] Waiting for logs. To exit press CTRL+C'
def callback(ch, method, properties, body):
    print " [x] %r:%r" % (method.routing_key, body,)
    channel.stop_consuming()
connection.add_timeout(10, callback)
channel.basic_consume(callback,queue=queue_name,no_ack=True)
channel.start_consuming() 
```

* * *

如果我在指定的超时期限内收到消息，则客户端应该打印消息并且应该停止进一步消费。

谁能帮我如何在客户端设置超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:10:35.783

这个问题在期限内。然后截止时间发生在没有任何参数的情况下调用的函数回调。所以你可以改变你的代码

```
def callback(ch=None, method=None, properties=None, body=None):
    if ch is None or method is None or properties is None or body is None:
         print "Deadline"
    else:
         print " [x] %r:%r" % (method.routing_key, body,) 
```

# jqplot - jqPlot - 当我放大时如何使垂直条变宽

> ID：10350554
> 
> 赞同：1
> 
> 时间：2012-04-27T12:24:32.193
> 
> 标签：jqplot

我的 HTML 页面中有两个垂直条形图（使用 jqPlot 创建）。

它们类似于以下示例（除了我的使用条而不是线）：

[http://www.assembla.com/code/MUN/subversion/node/blob/js/jqplot/examples/zoomProxy.html?rev=985](http://www.assembla.com/code/MUN/subversion/node/blob/js/jqplot/examples/zoomProxy.html?rev=985)

在上面的示例中，底部图表用于控制顶部图表。我的工作方式相同。

通常，我的两个图表都包含超过 200 个 x 轴条目（它们传递相同的数据集），并且每个条形的宽度设置为 6px。

问题是当我放大时，条形保持很细（即 6 像素）。我想要实现的是在放大时使条形变宽。我尝试将 barWidth 设置为 null，如下所示：

```
// BarRenderer.
rendererOptions : {
    ...
    barWidth: null, // width of the bars.  null to calculate automatically.
    ...
} 
```

然而，这似乎并没有像它所说的那样。

有没有人有一个很好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:46:44.590

我必须说我没有解决这个问题。但是，如果您将`constrainZoomTo = 'y'`这种方式设置为用户查看正在发生的事情，也许会有一些帮助，即他将仅缩放绘图的 y 部分。

其他解决方案是自己编写此行为。但老实说，我不知道从哪里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:23:43.713

作为临时解决方法，您可以尝试[问题 513](https://bitbucket.org/cleonello/jqplot/issue/513/bar-width-doesnt-change-when-resizing-the)中建议的修改。（[拉取请求](https://bitbucket.org/cleonello/jqplot/pull-request/9/fix-for-issue-513)被拒绝，因为应该有更优化的方法来做到这一点。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:42:24.767

即使使用条形图可以进行缩放，无论您缩放多深，条形宽度都将相同，特别是对于折线图来说，缩放意味着完整。

# django - django 固定装置（来自转储数据）在测试时失败

> ID：10350559
> 
> 赞同：8
> 
> 时间：2012-04-27T12:25:04.233
> 
> 标签：django

我正在尝试从生产服务器转储数据以用作我的开发服务器上的测试，但是在指定在生产服务器上创建的夹具文件的开发服务器上运行“./manage.py test”时出现错误。

以下是我基于 google/stackoverflow 搜索所做的尝试：

```
# python manage.py dumpdata --indent=4 --natural
error when running tests: IntegrityError: (1062, "Duplicate entry 'cms-agencies' for key 'app_label'")

# python manage.py dumpdata --exclude contenttypes --indent=4
error when running tests: IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`test_current`.`django_admin_log`, CONSTRAINT `content_type_id_refs_id_288599e6` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`))')

# python manage.py dumpdata --exclude contenttypes --natural --indent=4
error when running tests: IntegrityError: (1062, "Duplicate entry '14-add_agencies' for key 'content_type_id'")

# python manage.py dumpdata --exclude contenttypes --exclude auth --indent=4
error when running tests: IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`test_current`.`django_admin_log`, CONSTRAINT `user_id_refs_id_c8665aa` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`))')

# python manage.py dumpdata --exclude contenttypes --exclude auth --natural --indent=4
error when running tests: IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`test_current_abril`.`django_admin_log`, CONSTRAINT `user_id_refs_id_c8665aa` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`))') 
```

我还尝试从 settings.py 中删除“'init_command': 'SET storage_engine=INNODB'”，但仍然出现 1062 错误。

我不明白这个问题。当我加载固定装置时，django 不应该完全按照产品服务器上的方式重新创建数据库吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T05:19:59.543

我有类似的问题，这些参数对我有用：

```
python manage.py dumpdata --natural --exclude auth.permission --exclude contenttypes --indent 4 
```

post_save 信号两次创建对象时我也遇到了很多问题。有一个解决方法：[如何防止固定装置与 django post_save 信号代码冲突？](https://stackoverflow.com/questions/3499791/how-do-i-prevent-fixtures-from-conflicting-with-django-post-save-signal-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:49:25.730

我相信这些错误会告诉你到底发生了什么。是`app_label`独一无二的吗？我猜它是。我认为您有两个具有相同`app_label`键值的对象。( `cms-agencies`)

此外，当您有外键关系时，您需要拥有与外键对应的对象。转储数据不会这样做，因为它只转储一个模型。

像 [https://github.com/davedash/django-fixture-magic](https://github.com/davedash/django-fixture-magic)这样的东西 非常适合这个。它会转储您的模型和所有 fk 依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T23:06:14.573

问题是，如果你使用自然键（Django 更高版本中的自然外键），Django 实际上会在父对象中存储多对多关系。那是你想要的。但是你不能简单地转储所有表，你不能在转储中包含多对多表/模型，因为你会加载相同的数据两次 - 并且繁荣、重复和 IntegrityErrors。

例如，您应该转储*auth.User*和*auth.Group*，但不能转储*auth.User_Groups*。查看 Django 1.7 的转储示例：

```
{
    "model": "auth.group",
    "fields": {
        "permissions": [],
        "name": "ST"
    },
},
{
    "model": "auth.group",
    "fields": {
        "permissions": [],
        "name": "property_manager"
    },
},

{
    "model": "auth.user",
    "fields": {
        "username": "boss",
        "groups": [
            ["property_manager"],["ST"],
        ],
        "user_permissions": [],
    },
}, 
```

以下行创建了用户/权限和内容类型的全面转储，您可以将其移至 dev 以获得相同的副本，包括相同的行顺序和主键（在 Django 1.7 上测试）：

```
python manage.py dumpdata auth.User auth.Group contenttypes auth.Permission --indent 4 --natural-foreign > users.json 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T05:36:10.660

您的问题可能是您转储了一个 unicode 文件，但 django 在加载时需要一个 ascii 文件格式。如果这适用于您，这将在 Windows 上使用 PowerShell 发生。

# java - 给定一个整数列表，其中一些可能是负数，提取总和为 2 个最大数的对

> ID：10350565
> 
> 赞同：1
> 
> 时间：2012-04-27T12:25:20.893
> 
> 标签：java, algorithm, data-structures

除了 O(n2) 之外还有什么解决方案。我正在考虑遍历每个值然后得到总和

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T12:27:39.307

由 2 个最大元素组成的对总和为最大数。只需找到 2 个最大的元素并将它们相加 - 它是`O(n)`

对于总和最大的一般`k`元素，您可以使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)找到 k 最大的元素，然后进行第二次迭代 - 将所有大于它的元素相加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:27:43.037

如果你想得到最大的两个数，你只需要一个循环，这会使算法`O(n)`不是`O(n^2)`。

如果您需要更复杂的配对分析对整数执行快速排序`O(n log n)`，那么您可以选择两个最大的数字，这将是最大的配对和您想要的任何其他配对组合。

# python - (python) 使用漂亮的汤解析某些 HTML 输出标签

> ID：10350566
> 
> 赞同：1
> 
> 时间：2012-04-27T12:25:23.017
> 
> 标签：python, parsing, beautifulsoup

你好 :) 玩了一会儿之后，我想出了以下函数，它返回完整的 HTML 标签，而不是简单的倒置 < *>"this"<* >中的部分

```
from BeautifulSoup import BeautifulSoup
from urllib2 import urlopen

def get_wotd():
    return str((BeautifulSoup(urlopen('http://www.reference.com/wordoftheday'))).findAll('h2'))

print get_wotd() 
```

例如，今天的单词是“nosh”。而不是得到：

```
[<h2 class="me">nosh</h2>] 
```

我需要输出，简单地说，

```
nosh 
```

有人知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:29:14.220

使用`lxml`而不是 BeautifulSoup：

```
>>> from lxml.html import parse
>>> tree = parse("http://www.reference.com/wordoftheday")
>>> tree.xpath("//h2")[0].text
'nosh' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:55:53.033

使用`.text`属性来获取内部文本，并使用`find()`方法代替：

```
>>> from BeautifulSoup import BeautifulSoup
>>> from urllib2 import urlopen
>>> soup = BeautifulSoup(urlopen('http://www.reference.com/wordoftheday'))
>>> soup.find('h2').text
u'nosh' 
```

# c# - 如何在 c# 中修复我的本地主机地址（端口号）或在 c# 中获取我的本地地址？

> ID：10350571
> 
> 赞同：-2
> 
> 时间：2012-04-27T12:25:54.817
> 
> 标签：c#, localhost

我发送了一封包含激活链接的邮件。当我打开程序时，这个本地主机每次都会改变我如何获取本地主机的地址或修复它？

```
htmlBody = string.Format(" Hi " + userName + "\n Thank you for creating an account with RSS MANAGEMENT SYSTEM \n </ br>" + "Please click the below link to activate your account <br />" + "<a href='http://localhost:2386/ActivateUser.aspx?userName{0}&Id={1}'>Activate {0} </a>", UName, user_name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:30:49.980

如果您只是测试您的应用程序问题不大，您可以转到项目的属性 -> Web 选项卡 -> 将特定端口设置为固定数字 => 就是这样。

或者您可以设置 iis 并让应用程序在特定的虚拟目录上运行，并完全避免使用端口号[配置 IIS](http://www.advancedinstaller.com/user-guide/tutorial-iis.html)

但是...如果您在服务器上运行以公开应用程序，则必须使用第二个选项才能拥有绝对的 URl

# php - fancyBox 按钮助手

> ID：10350579
> 
> 赞同：0
> 
> 时间：2012-04-27T12:26:27.093
> 
> 标签：php, fancybox

我想知道是否有人可以提供帮助。

我正在使用下面的脚本在 fancyBox 中创建一个“图片库”。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>   
  <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>  
  <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />  

  <script type="text/javascript">  

            $('.fancybox').fancybox({
                openEffect  : 'elastic',
                closeEffect : 'elastic',

                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

</script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-top: 5px;
    margin-right: 110px;
}
-->
  </style>  
</head>
<body style="font-family: Calibri; color:  #505050; margin-left: 240px;">
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post" style="margin-left: -120px; margin-right: 50px;"> 

    <p>
      <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?>
      <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" /></a>
      <?php endfor; ?>  
    </p>
</form>  
</body>
</html> 
```

我遇到的问题是我无法从我的 fancyBox Javascript 中创建任何功能，例如“按钮助手”功能和图像格式中的标题。

我已经从[这里](http://fancyapps.com/fancybox/demo/)的“fancyapps”页面获取了代码，所以我不太确定我哪里出错了。我对fancyBox比较陌生，所以也许这些只是初学者的错误。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:34:15.873

首先，您使用的是 fancyBox 1.3.4，但您必须使用 fancyBox2 才能使用这些助手。

其次，检查你的路径是否正确，也许你应该从

```
..href="fancybox/source/.. 
```

到

```
..href="/fancybox/source/.. 
```

# jquery - 将 ' 插入 JS 对象

> ID：10350582
> 
> 赞同：1
> 
> 时间：2012-04-27T12:26:37.953
> 
> 标签：jquery

我正在使用 jquery 将字符串插入到带有 .html() 的对象中。

问题是，如果我插入转义的 ' ，`&#039;`它会自动对其进行解码。

我试过 .text() 得到相同的结果。

`&#039;`当该字符串包含并且没有自动解码时，如何将字符串添加到对象中的元素？

例如，我想将此字符串插入到第二个 td 中：

```
&#039; &quot; &lt; &gt; 
```

使用 .html() 我得到：

```
<tbody><tr><td></td></tr><tr><td>' " &lt; &gt;</td></tr></tbody> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:30:39.487

转义 & 符号：

```
&amp;#039; 
```

# java - 用未转义的值替换转义的转义序列

> ID：10350584
> 
> 赞同：3
> 
> 时间：2012-04-27T12:26:52.010
> 
> 标签：java, regex

作为输入，我得到字符串`"some text\\nsome text"`-> 所以显示为`"some text\nsome text"`. 如何删除一个反斜杠并得到 `"some text\nsome text"`-> 显示为

```
"some text
some text" 
```

这也适用于其他特殊字符，如`"\t"`? 使用正则表达式可以只做喜欢 `textLine.replace("\\n", "\n") and so on.`

还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T21:23:36.473

你不需要重新发明轮子。您可以[**`org.apache.commons.lang3.StringEscapeUtils`**](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html)用于非转义 Java 字符串。取消转义在字符串中找到的任何 Java 文字。例如，它会将 ' `\`' 和 ' `n`' 的序列转换为换行符，除非 ' `\`' 前面有另一个 ' `\`'。在这种情况下，您需要再 unescape 一次。

**代码**：

```
import static org.apache.commons.lang3.StringEscapeUtils.unescapeJava;

public class Unescape {
    public static void main(String[] args) {
        System.out.println("some text\\nsome text");
        System.out.println(unescapeJava("some text\\nsome text"));
    }
} 
```

**输出**：

```
some text\nsome text
some text
some text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:51:49.377

所以这不是很明显，你想从两个字符创建一个字符。

我做了这个方法：

```
 String res="";
    boolean backslash=false;
    for(char c : "some text\\nsome text".toCharArray()){
        if(c!='\\'){
            if(backslash){
                switch(c){
                    case 'n' :
                        res+='\n';
                        break;
                    case 't' :
                        res+='\t';
                        break;

                }
                backslash=false;
            }else{
                res+=c;
            }
        }
        else{
            backslash=true;
        }
    } 
```

也许它会对您有所帮助，它实际上仅适用于我放入开关（EOL 和 Tab）的情况。

注意：如果您想要更好的性能，请将 String 替换为 StringBuilder。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:34:31.047

你在玩多行正则表达式吗？然后你可以编译一个正则表达式：

```
Pattern.compile("^([0-9]+).*", Pattern.MULTILINE); 
```

[http://www.javamex.com/tutorials/regular_expressions/multiline.shtml](http://www.javamex.com/tutorials/regular_expressions/multiline.shtml)

# php - 在 PHP 中只获取文件的一部分？

> ID：10350595
> 
> 赞同：0
> 
> 时间：2012-04-27T12:27:32.870
> 
> 标签：php, variables, if-statement

在互联网上或 stackoverflow 上找不到任何关于此的信息？！？

## 基本示例：

我想知道的一个很好的例子是，如果它**在一个句子中**找到一个单词或短语，你将如何创建一个返回 true 的 if 语句。

## 另一个例子：

假设我们在外部文件中有一个 IP 阻止列表。所以我认为我们需要`file_get_contents`在 if 语句中的某个地方使用。

```
// IP Blocklist
118.92.00
119.92.11
125.23.10 
```

好的，这就是我们的示例 IP 阻止列表。您将如何创建一个能够找到中间 IP (119.92.11) 的 if 语句，即使那里还有其他内容（记住它很可能会改变！）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:36:42.693

您的两个示例需要两种不同的技术才能可靠。

示例 1 只需要[`strpos()`](http://php.net/manual/en/function.strpos.php)：

```
if (strpos($subjectString, $searchString) !== FALSE) {
  // substring exists
} else {
  // substring doesn't exist
} 
```

`stripos()`如果您想以不区分大小写的方式进行匹配，则可以改用。

例如两个使用数组会更好。这是因为如果在数组中，该`strpos()`方法将匹配- 而您不希望这样。`11.22.22.11``11.22.22.110`

相反，你会做这样的事情，使用[`in_array()`](http://php.net/manual/en/function.in-array.php)：

```
// Get a list of IPs from file and split into an array
$ips = preg_split('/\s+/', trim(file_get_contents('list-of-ips.txt')));

if (in_array($searchIP, $ips)) {
  // IP exists
} else {
  // IP doesn't exist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:31:59.823

```
if(strpos($file_contents, "119.92.11") !== false)
{
  //do your stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:32:00.423

这是用于外部文件

```
$ips = file ( $file );
$searchIP = "119.92.11";
$found = false;
foreach ( $ips as $ip ) {
    if ($ip == $searchIP) {
        $found = true;
    }
}

if ($found) {
    echo $searchIP, " Found";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:21:21.063

为了准确性和灵活性，我会使用正则表达式：

```
$lines = file($blockListFile);
$findIp = '119.92.11';

$findIp = trim($findIp, '.');

// The number of unspecified IP classes (e.g. for "192.92.11", it would be 1,
// but for "192.92" it would be 2, and so on).
$n = 4 - (substr_count($findIp, '.') + 1)

foreach ($lines as $line) {
    if (preg_match('/^' . preg_quote($findIp, '/') . '(\.\d{1,3}){0,' . $n . '}$/', $line)) {
        // the line matches the search address
    } else {
        // the line does not match the search address
    }
} 
```

此方法允许搜索任意数量的 IP 类别（例如“192.92.11.45”、“192.92.11”、“192.92”，甚至只是“192”）。它将始终在行首匹配，例如，搜索“192.92.11”将不会匹配“24.192.92.11”。它也只匹配完整的类，因此搜索“192.92.11”将不会匹配“192.92.115”或“192.92.117.21”。

**编辑：**

请注意，此解决方案假定：

*   您的搜索词在全类中指定（例如搜索“192.92.11”意味着您要匹配`/^192.92.11(\.\d{1,3})?$/`）
*   阻止列表文件中指定的 IP 也在完整类中指定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:32:25.540

只需使用 strpos 函数。

> strpos() 函数返回一个字符串在另一个字符串中第一次出现的位置。
> 
> 如果未找到该字符串，则此函数返回 FALSE。

例如：

```
$ipAddresses = '// IP Blocklist
118.92.00
119.92.11
125.23.10';

if (strpos($ipAddresses,"119.92.11") != FALSE) {
    // IP ADDRESS WAS FOUND
} else {
    // IP ADDRESS NOT FOUND
} 
```

# php - 调用php文件时.append不起作用

> ID：10350601
> 
> 赞同：0
> 
> 时间：2012-04-27T12:27:46.783
> 
> 标签：php, html, jquery

我有这个曾经可以工作的功能，但显然决定对我进行转储。有人知道可能出了什么问题吗？

```
<?php 
require("php/connect.php");
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>Clasificados</title> 
<link rel="stylesheet" href="css/index.css"/>
<link type="text/css" href="css/excite-bike/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script>
<script type="text/javascript">

$(function() {
    $.post(
        'php/bridge.php', 
        {
            fun:"estados"
        },
        function(answer){
            if(answer){
                $('#estafil').append(answer);
            }
        }
    );

});

</script>
</head>
<body>
<div id="left">
<form name="search">
    <fieldset>
        <label for="searchbar">Introduce terminos de busqueda:</label>
        <input type="text" name="searchbar" id="searchbar" class="text ui-widget-content ui-corner-all" />
        <label for="estafil">Filtrar por estados:</label>
        <select name="estafil" id="estafil" class="text ui-widget-content ui-corner-all" >
        </select>
        <input type="submit" value="Inciciar busqueda" />
    </fieldset>
</form>
</div>
</body> 
```

被调用的 php 是这样的：

```
require("connect.php");
session_start();
$fun=$_POST['fun'];
$rol=$_SESSION['rol'];
$id=$_SESSION['id'];
if($fun=="estados"){
   $query="SELECT Nombre FROM estados";
   $extract=mysql_query($query) or die(mysql_error());
   while($row = mysql_fetch_assoc($extract)){
       echo $row['Nombre'];
   }
} 
```

我已经尝试了一切，但我真的无法确定问题所在！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:33:20.310

您正在返回一个文本。请尝试此代码

```
 while($row = mysql_fetch_assoc($extract)){
        echo '<option>'.$row['Nombre'].'</option>';
    } 
```

# php - $_SERVER["HTTP_HOST"] 有多安全？

> ID：10350602
> 
> 赞同：8
> 
> 时间：2012-04-27T12:27:46.983
> 
> 标签：php, superglobals

我有一个充满网站网址的数据库，主键是`$_SERVER["HTTP_HOST"]`网站的。

当用户导航到 ... 可以说`www.my-epic-example-url.com`，它将连接数据库并使用该`$_SERVER["HTTP_HOST"]`网站的，然后获取引用该网站的所有数据！

我想知道的是，安全性如何`$_SERVER["HTTP_HOST"]`？

可以外部修改吗？

我问的唯一原因是因为我不久前读过一篇文章（不记得它在哪里）说使用 $_SERVER 时要小心，因为它不安全......

这是真的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T12:35:32.787

`$_SERVER["HTTP_HOST"]`是从客户端发送的 HTTP`Host`标头。这使得这个标头通常是*不安全*的。

但是，如果您处于典型的虚拟主机设置中，其中 Web 服务器根据 VirtualHost 配置决定执行哪个脚本，而这些配置又由 HTTP 标头触发，则除非收到已知的列入白名单的值，否则*不应*`Host`执行您的脚本在那个标题中。

 *如果 Web 服务器不关心`Host`标头并为任何和所有请求执行某个脚本，那么这个值绝对可以是任何值。*

# javascript - javascript/计时

> ID：10350607
> 
> 赞同：0
> 
> 时间：2012-04-27T12:27:59.527
> 
> 标签：javascript, html

我想使用**java脚本**计算**两个按钮**的**点击****时间差**

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:29:56.577

这是一个提示 - 使用：

```
var t = Date.now(); 
```

以毫秒*分辨率*获取当前时间（自 1970 年 1 月 1 日 00:00:00 UTC 起以毫秒为单位测量） 。

*请注意，结果的准确性*仍会受到系统硬件的限制。

在没有 的旧浏览器上`Date.now()`，使用：

```
var t = new Date().valueOf(); 
```

或简洁的

```
var t = +new Date(); 
```

后者使用数字强制（`+`前缀）来自动调用`.valueOf()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:31:18.317

*   从纪元获取当前时间（以毫秒为单位）`new Date().getTime()`：.
*   时间差：`endTime - startTime`.
*   显示消息框：`alert("Message")`。

猜猜这些可以根据需要组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T22:25:53.470

还要考虑[performance.now()](https://developer.mozilla.org/en-US/docs/Web/API/Performance.now%28%29)以获得更高分辨率的时序。******

# java - 如何使用 Javascript 或 Struts1.3.8 对所选项目执行验证？

> ID：10350611
> 
> 赞同：0
> 
> 时间：2012-04-27T12:28:23.497
> 
> 标签：java, validation, jsp, struts-validation

我正在使用 Struts 1.3.8。在我的 JSP 中有一个选择选项，其中包含动态填充的项目。
当用户没有选择任何项目时，如何对选择选项执行验证？*所需*的规则不起作用。有什么想法或建议吗？非常感谢您的回复，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:45:46.740

创建临时选项，例如

```
<select name="selectItem">
   <option value="-1" >-----Select-----</option>
   .
   .
</select> 
```

在表单提交上调用java脚本函数检查类似的东西

```
if((document.Form1.selectItem[document.Form1.selectItem.selectedIndex].value)=='-1')
 return false;
else
 return true; 
```

# c# - 如何从文本中删除字符实体编号

> ID：10350612
> 
> 赞同：0
> 
> 时间：2012-04-27T12:28:26.077
> 
> 标签：c#, regex, windows-phone-7

当我从提要中获取数据并通过正则表达式提取内容时，我仍然拥有（&o#8230;、&o#8211;、&o#8220 等...[我在前 2 个中添加了 o，以便他们重新格式化] ) 在我的内容文本中。可悲的是，这些也在提要内容的来源中。我自己尝试了一些正则表达式但没有成功：&#[0-9]{4};

### 我的代码：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {

        try
        {        

            SyndicationItem sItem = IsolatedStorageSettings.ApplicationSettings["postovi"] as SyndicationItem; //stores the user chosed item to be displayed
            List <string> CC_List =  IsolatedStorageSettings.ApplicationSettings["ContentList"] as List<string>; //title and content are pulled from feed and put in list

            PageTitle.Text = sItem.Title.Text; 
            PageTitle.FontSize = 40;

            foreach (var item in CC_List)
            {
                int i;

                if (item == PageTitle.Text)
                {
                    i = CC_List.IndexOf(item, 0); //index naslova u listi
                    String content = CC_List[i + 1];
                    content = Regex.Replace(content, @"(?<startTag><\s*script[^>]*>)(?<content>[\s\S]*?)(?<endTag><\s*/script[^>]*>)", string.Empty);
                    Match link = Regex.Match(content, @"(?<=<img\s+[^>]*?src=(?<q>['""]))(?<url>.+?)(?=\k<q>)", RegexOptions.Singleline);
                    content = Regex.Replace(content, @"(?></?\w+)(?>(?:[^>'""]+|'[^']*'|""[^""]*"")*)>", string.Empty);
                    content = Regex.Replace(content, "&nbsp;", string.Empty);
                    Uri uri = new Uri(link.Value);
                    slika_clanak.Source = ImageFromUri(link.Value); // gets image
                    content = Regex.Replace(content, @"<p>.*</p>", string.Empty);

                    clanak_textblock.Text = content.Trim(); // reads article text and puts it on screen

                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:35:20.307

您是否尝试过[HttpUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)方法？这是 System.Net 程序集中包含的标准，我不能确切地说它是否也适用于 WP7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:18:11.473

尽管我发表了评论，但我意识到第二个选项可能是 Html Agility Pack，它有一个 wp7.5 二进制文件在[这里](http://htmlagilitypack.codeplex.com/ "Html 敏捷包")找到。您可能会遇到在 SO 上发布的问题并在此帖子[http://htmlagilitypack.codeplex.com/discussions/282469](http://htmlagilitypack.codeplex.com/discussions/282469)中得到回应，以包含某些用于编译的库。我提到它的原因是有一个非常强大的 HtmlEncode 类，它构建了所有实体的字典。您可能无法直接使用 DeEntitize()，但您可以研究它是如何工作的，以便在需要时构建一些东西以剥离所有内容。

我个人不想手动计算正则表达式，我会使用为我构建的类似的东西，然后循环遍历我认为相关的所有内容。当然，这是手机，因此您最好根据具体情况进行剥离，但如果提要不断变化并且您没有足够的样本数据来构建，这将变得很困难。

# c - 尝试编写删除节点的函数

> ID：10350619
> 
> 赞同：0
> 
> 时间：2012-04-27T12:28:55.363
> 
> 标签：c, linked-list

我试图编写一个从链表中删除节点的函数，尽管我遇到了麻烦。

这是我的算法：

*   获取我要删除的节点的名称（每个节点都有 3 个详细信息：名称/年龄/性别）
*   然后我在列表中找到它的位置
*   然后我把它向前传递

例如

> 朋友->下一个=朋友->下一个->下一个..

虽然我需要在链表中找到第一个节点，但我不知道如何找到它。这是我写的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdlib.h>
typedef struct friend
{
    char *name;
   int age;
   char gender;
   struct friend* next;
}friend;
void node_delete(friend* delete)
{
 friend* temp = malloc(sizeof(friend)); 
 char name[256];
 int i = 0, j =0; // Not being used, though I'd use it
 printf ("Please enter the friend's name you want to delete: \n");
 fgets (name, 256, stdin); // Getting the name of the person the user wants to delete
 fgets (name, 256, stdin);
 while (0 == (strcmp(temp -> next -> name, delete -> next -> name))) // As long as the           
 // name doesnt match, it'll go to the next name in the linked list
 {
       temp = friend -> next; // Going to the next name in the linked list
 }
 temp -> next = temp -> next -> next; // Replacing the node with the node after it..
// for ex. if I have 1 -> 2 -> 3, it'll be 1 -> 3
 free (delete);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:38:41.810

似乎您应该将 (temp -> next -> name) 与 (name) 进行比较，而不是 (delete -> next -> name)

```
while (0 == (strcmp(temp -> next -> name, name))) 
```

但是您应该将您的临时人员分配给好友列表头

```
temp = delete;  // delete should be a pointer to root list element 
```

并且.. 你需要 i 和 j 的原因是什么？还有为什么你使用 malloc()？为什么不将您的结构声明为本地内容

```
friend* temp; 
```

试试这个

```
friend* temp; 
char name[256];

// receive node to delete
printf ("Please enter the friend's name you want to delete: \n");
// omg here was two fgets!!
fgets (name, 256, stdin);

// delete should be a pointer to root list element
temp = delete;    

// Check if node to be deleted is a root node
if(strcmp(temp -> name, name)==0){ 
    delete = delete->next;
    return;
}   

// go throug all the list
while (temp->next!=NULL){
   // if node was found - delete it
   if(strcmp(temp -> next -> name, name)==0) 
       temp -> next = temp -> next -> next;    
   temp = temp-> next;
} 
```

这段代码存在逻辑错误，还需要检查头节点。我的代码中没有这个检查。您可以轻松地自己添加它。对不起。（已经在代码块中修复）

“删除”也是函数参数的坏名，试试friendList或类似的更好的东西）。另外不是删除 C++ 中的关键字吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:14:26.350

好吧，你在这方面做得很好。

我不完全确定您的问题，但这是我认为您可能正在尝试做的事情：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdlib.h>

typedef struct friend
{
    char *name;
    int age;
    char gender;
    struct friend* next;
}friend;

void node_delete(const char* name, friend* stFriend)
{
    if (!stFriend->next) //end of list
    { 
        printf("%s is not a friend!\n", name);
    }
    else if ( !strcmp(name, stFriend->next->name) ) //name matches! remove link
    {     
        //here's where you can free your unwanted friend ptr ~NB: are you sure this friend is not a friend of someone else?
        //free(stFriend -> next);    
        stFriend->next=stFriend->next->next;
        printf("%s is no longer a friend!\n", name); 
    }
    else //name does not match -recurse
    {
        node_delete(name, stFriend->next);
    }
}

void print_friends(const friend* pstPerson)
{
    if (pstPerson->next)
    {
        printf("next friend:%s\n", pstPerson->next->name);
        print_friends(pstPerson->next);
    }
    else 
    {
        printf("no more friends :(\n\n");
    }
}

int main()
{
    friend stFriend0, stFriend1, stFriend2, stPerson;
    char name[256]={0};

    stFriend0.name="amber";
    stFriend0.next=0;

    stFriend1.name="betty";
    stFriend1.next=&stFriend0;

    stFriend2.name="catherine";
    stFriend2.next=&stFriend1;

    stPerson.name="violet";
    stPerson.next=&stFriend2;

    printf("%s's friends before:\n", stPerson.name);
    print_friends(&stPerson);

    printf("remove a friend: ");
    fgets (name, 256, stdin);
    strtok(name, "\n");

    node_delete(name, &stPerson);

    printf("\n\n%s's friends after:\n", stPerson.name);
    print_friends(&stPerson);

    printf("\n\n\ndone!\n");

    return 0; 
```

}

[在线演示。](https://ideone.com/ezAVoK)

它假设你的`node_delete(friend* delete)`函数需要一个人，在链表中有一些朋友，并删除一个名字与标准输入匹配的朋友。

（我还添加了另一个小功能，这样您就可以看到链表有多么有趣！）

# java - 等待2个线程完成才能继续程序

> ID：10350620
> 
> 赞同：0
> 
> 时间：2012-04-27T12:28:56.883
> 
> 标签：java, multithreading, locking

当我点击一个按钮时，我想开始行动。当这两个动作都完成时，我想开始另一个动作，这个需要先前终止的两个动作的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:31:35.307

启动一个线程，该线程启动另外两个线程并等待它们完成，即 join()。当这两个完成后，第一个线程可以完成后面的工作。

# google-app-engine - 使对象持久化时出错

> ID：10350621
> 
> 赞同：3
> 
> 时间：2012-04-27T12:29:02.350
> 
> 标签：google-app-engine, persistence, vaadin, google-cloud-datastore, jdo

我正在尝试使用 JDO 在 GAE 平台上编写 Vaadin 应用程序，当我想调用此方法时：

```
public void createUser(String login, String password, String email) {
    PersistenceManager pm = PMF.get().getPersistenceManager();
    User user = new User(login, password, email);
    try {
        pm.makePersistent(user);
    } finally {
        pm.close();
    }

} 
```

我收到此错误：

> (...) 原因：javax.jdo.JDOFatalUserException：必须指定名为 javax.jdo.PersistenceManagerFactoryClass 的属性，或者具有 META-INF/services/javax.jdo.PersistenceManagerFactory 条目的 jar 文件必须在类路径中，或者必须指定名为 javax.jdo.option.PersistenceUnitName 的属性。NestedThrowables：javax.jdo.JDOUserException：您要么为此 PMF 指定使用“transactions-optional”的“persistence-unit”（但它不存在！），或者您使用“transactions-optional”调用 JDOHelper.getPersistenceManagerFactory 作为在 javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1092) 在 javax.jdo.JDOHelper 的 javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:856) 的属性文件的名称（并且这在 CLASSPATH 中不存在） .

我搜索了谷歌并找到了一些解决这个问题的方法，但没有一个适用于我的应用程序（或者我做错了什么）。例如。[这](http://jasonsmart.wordpress.com/ "这")行不通。哦，我在 META-INF 中有 jdoconfig.xml 文件。如果有人有类似的问题，他想分享他的智慧，我将不胜感激。

编辑：jdoconfig 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig">
    <persistence-manager-factory name="transactions-optional">
        <property name="javax.jdo.PersistenceManagerFactoryClass"
            value="org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory" />
        <property name="javax.jdo.option.ConnectionURL" value="appengine" />
        <property name="javax.jdo.option.NontransactionalRead" value="true" />
        <property name="javax.jdo.option.NontransactionalWrite"
            value="true" />
        <property name="javax.jdo.option.RetainValues" value="true" />
        <property name="datanucleus.appengine.autoCreateDatastoreTxns"
            value="true" />
    </persistence-manager-factory>
</jdoconfig> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:10:18.470

知道了！

> jdoconfig.xml

文件在

> \war\META-INF

Eclipse 创建的目录。应该在

> \war\WEB-INF\classes\META-INF

愚蠢的错误...

# sql - 文本文件问题中的希伯来语字段

> ID：10350622
> 
> 赞同：1
> 
> 时间：2012-04-27T12:29:04.843
> 
> 标签：sql, sql-server, ssis

我正在尝试将具有希伯来语客户名称的 txt 文件导入 SQL Server 数据库，并且该名称仅针对该列以希伯来语显示。

我知道如何使用下面这个有效的特殊插入语句插入它。如果我能从 SSIS 的希伯来语 txt 文件中获取该字段就好了。

```
create table #temp ( str Nvarchar(100) ) ;

insert into #temp(str)values(N'HEBREW SAMPLE IN HERE') ;

select * from #temp ;

drop table #temp; 
```

SSIS 的问题在于，所有的导入任务都将希伯来客户名称置于某种垃圾格式中，然后我什么也做不了。服务器、数据库、表列上的当前排序规则是；

```
1\. SQL_Latin1_General_CP1_CI_AS
2\. SQL_Latin1_General_CP1_CI_AS
3\. SQL_Latin1_General_CP1_CI_AS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:39:02.463

改为将您的数据库更改为 HEBREW_CI_AS。您可以在每个数据库的数据库选项中执行此操作。

选择属性菜单，然后选择选项。第一个下拉菜单，您可以选择分拣机。

# iphone - iOS 5.0.1 中的“不备份”扩展属性

> ID：10350623
> 
> 赞同：1
> 
> 时间：2012-04-27T12:29:06.260
> 
> 标签：iphone, ios

我的应用程序在首次启动时从 Internet 服务器下载数据库文件，然后如果服务器有更新版本的数据库，则可能会重新下载它。该数据库文件存储在`<Application_Home>/Documents` 目录中。

一年前还没有 iOS 5.0.1 时，Apple 批准了我的应用程序的早期版本。但现在他们拒绝了我的应用程序的新版本，因为它不符合数据存储规则。

我在 Apple 网站上阅读[了这篇文章。](https://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)但我不明白只需将`do not back up`属性设置为数据库文件并将文件保存在`<Application_Home>/Documents`其中还是需要将其放置到另一个地方就足够了？以及如何支持以前的 iOS 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:37:23.527

大约一个月前，我在使用客户的应用程序时遇到了完全相同的情况。只需在下载的文件上设置标志并重新提交就足够了。使用您链接到的文章中的技术说明，该过程非常简单。

与应用评论一样，您的里程可能会有所不同。

# ruby - 我如何从另一个文件夹中获取页面而不是视图？

> ID：10350626
> 
> 赞同：0
> 
> 时间：2012-04-27T12:29:26.397
> 
> 标签：ruby, sinatra

在 Sinatra 脚本中，我有代码检查文件是否存在，然后以正确的呈现方式显示它。这些文件位于`\views`：

```
get '/:page' do
  if File.exists?('views/'+params[:page]+'.slim')
    slim params[:page].to_sym
  else
    raise error(404) 
  end   
end 
```

我想要这些文件在`\public`. 请问我该怎么做？：

```
get '/:page' do
  if File.exists?('public/'+params[:page]+'.slim')
    slim "/public/"+params[:page].to_sym #=> error
  else
    raise error(404) 
  end   
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:55:43.310

没关系，我找到了：

```
slim "../public/#{params[:page]}".to_sym 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:56:59.747

查看 Sinatra 文档：[http ://www.sinatrarb.com/configuration.html](http://www.sinatrarb.com/configuration.html)

在那里，您会注意到您可以设置`:views`属性，它应该可以处理您需要的内容。他们的示例将其设置为`templates/`应用根目录中的目录：

```
set :views, Proc.new { File.join(root, "templates") } 
```

# javascript - 通过 Javascript 和 HTML5 Canvas 更新背景图片

> ID：10350627
> 
> 赞同：1
> 
> 时间：2012-04-27T12:29:33.033
> 
> 标签：javascript, canvas, background-image, html5-canvas, boids

Javascript 远不是我的强项之一。因此，如果我的问题对你们中的许多人来说非常有帮助，我深表歉意。

我正在尝试通过 Javascript 和 HTML5 Canvas 实现 Boid。尽管已经建立了植绒行为，但应用程序在空白背景上看起来相当简单。

出于这个原因，我试图使用图像作为我的背景，但遇到了困难。

```
this.draw = function() {
        /* First clear everything */
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);

        /* And ink them */
        this.context.strokeStyle = "#000";
        this.context.stroke();

        /* Draw each boid */
        for(var i in this.boids) {
            this.boids[i].draw(this.context, this.size);
        }
    } 
```

如果有人知道如何在上述功能中绘制背景图像，请告诉我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:01:07.827

`background-image`您可以更轻松地在 CSS 中设置 a，而不是在 Canvas 中执行此操作：

[http://jsfiddle.net/qwzBh/](http://jsfiddle.net/qwzBh/)

这样你就不必担心一直画它了。

# javascript - Facebook ui 对话框 - 缺少“分享到墙上”

> ID：10350633
> 
> 赞同：0
> 
> 时间：2012-04-27T12:30:09.863
> 
> 标签：javascript, facebook

我正在制作一个 FB 应用程序，它应该允许用户在他们的墙上或使用 Javascript SDK 的朋友的墙上分享一些东西。第一部分看起来不错，但第二部分不行。缺少用于选择帖子将出现在哪一面墙上的下拉菜单。我找不到这个选项，我只能假设它已从 API 中删除，因为它可以从 FB 自己的界面中删除。我可以使用“Facebook 共享器”，但在某些浏览器上弹出窗口被阻止。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:21:40.643

要在朋友的墙上发布，您需要两个朋友的 stream_publish 权限（用户和他的朋友必须是应用程序的用户并授予您权限），并且您必须向朋友的提要发出 POST 请求：

```
$config = array('link' => 'yoururl.com',
                      'message' => 'message',
                      'picture' => 'feed.jpg',
                      'name' => 'name',
                      'caption' => 'caption');

$ret_obj = $this->facebook->api('/'.$friend_id.'/feed', 'POST', $config); 
```

您可以通过 AJAX 发出 POST 请求，但恐怕没有用于此操作的 facebook JS 对话框。

# android - Android - 以编程方式设置两个重力参数

> ID：10350635
> 
> 赞同：12
> 
> 时间：2012-04-27T12:30:29.027
> 
> 标签：android, android-layout

我有按钮，想将其文本重力更改为底部中心。我怎样才能以编程方式做到这一点？

我只能发现我可以更改为中心或底部，而不是两者。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-27T12:33:09.777

尝试

```
setGravity(Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2020-03-02T15:45:32.123

如果您想知道*Kotlin 版本*是什么

`your_button.gravity = Gravity.BOTTOM or Gravity.CENTER_HORIZONTAL`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:35:07.113

试试这个代码：

```
 your_button.setGravity(Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL); 
```

有关更多详细信息，请访问以下链接

[http://developer.android.com/reference/android/widget/TextView.html#setGravity(int](http://developer.android.com/reference/android/widget/TextView.html#setGravity(int) )

# objective-c - 如何禁用 UIImage 上的触摸检测？

> ID：10350643
> 
> 赞同：0
> 
> 时间：2012-04-27T12:31:10.780
> 
> 标签：objective-c, ios, uiview, uiimage, touch

我正在开发一个应用程序，它实际上像 MSPaint 一样工作（画线的东西，等等......）。我有一个白色的 UIView，基本上是用户绘制的地方。在这个 UIView 之上，我设置了一个 UIImage，它是灰色的，alpha 为 0,4。我希望将此 UIImage 用作吸墨纸。这个想法是当用户将手掌放在该区域时禁用触摸，因此绘图更舒适（禁用多点触控，并且使用这种“吸墨纸”，您不会用手掌意外绘制东西...... )

即使我把 UIImage 放在前面，在视图的顶部，即使我在这个 UIImage 上禁用了用户交互，仍然可以在 UIView 上绘图。，在 UIImage 后面（有点奇怪！）

我不明白发生了什么，因为图像似乎是透明的，并且 UIView “后面”仍然处于活动状态，即使她被 UIImage 覆盖？！

任何帮助/指示/想法将不胜感激！谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:37:14.380

您是否将 UIImage 的“userInteractionEnabled”属性设置为“NO”？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T13:04:58.240

您实际上可能想做相反的事情。当您禁用用户交互或触摸时，视图基本上对触摸变得不可见，并且它们被传递到下一个视图。

在您的情况下，您确实需要 userInteractionEnabled ，因为您希望视图能够捕捉到这些触摸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:03:51.897

您必须禁用 UIImageView 而不是 UIImage 上的用户交互，它应该可以工作。

编辑：

或者你可能会偷偷摸摸，只是在它上面添加一个空视图。使用相同的帧大小，使其完美重叠，仅此而已。您将能够看到您需要的所有内容，并且它不是它的子视图，因此不会有任何交互，并且触摸将被注册但不会产生任何效果。:P

除非您发布一些代码，否则没有更好的想法......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T09:18:45.903

好的，所以我设法做我想做的事！耶！

我有 3 个不同的课程：

*   StrokesViewController(UIViewController)——视图控制器

*   StrokesView (UIView) - 用户绘制笔触的视图。

*   BlottingPaper (UIView) - 吸墨纸。

我得到了一个与所有三个“链接”的 XIB 文件。

我创建了这个名为“BlottingPaper”的新类，键入 UIView。.h 和 .m 文件实际上是空的（我确实 import #import < Foundation/Foundation.h >）在 BlottingPaper 上启用了用户交互。我不使用这个类的排他性触摸。

在 XIB 文件中，我只是在 StrokesView 上放了一个视图。我将它链接到 BlottingPaper（根据需要修改 alpha，blablabla ...）

就是这样！当我将手掌放在上面时，它不会在我手所在的区域绘制任何东西，但我仍然可以用手指在 StrokesView 的其余部分上绘制！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T15:44:49.700

除了 Dancreek 的响应之外，您还应该进行设置`buvard.userInteractionEnabled = YES;`以使其捕获交互。

您还应该设置`buvard.exclusiveTouch = YES;`buvard 是唯一将接收触摸事件的视图。

当您删除 buvard 时，您应该进行设置`buvard.exclusiveTouch = NO;`，以便其他视图将重新获得接收触摸的能力。

# matlab - 双线性插值产生的斜条纹

> ID：10350645
> 
> 赞同：0
> 
> 时间：2012-04-27T12:31:14.073
> 
> 标签：matlab, image-processing, interpolation, octave

我正在尝试在 GNU Octave 中编写一个对 PGM 图像进行双线性插值的函数。结果不是那么好：我在图像上不断出现不同色调的斜条纹。此外，在插值期间添加的行和列比它们应该的要暗。有人可以通过指出问题来帮助我吗？

```
function bilinear(img)
    data = imread(img);

    for n = 1 : 2 : (rows(data) - 1)  * 2
        average = average_vector(data(n, 1:end), data(n+1:1:end));
        data = [data(1:n, 1:end); average; data(n+1:rows(data), 1:end)];
    end

    for n = 1 : 2 : (columns(data) - 1) * 2
        average = average_vector(data(1:rows(data), n), data(1:rows(data), n+1));
        data = [data(1:rows(data), 1:n) average data(1:rows(data), n+1:end)];
    end

    imwrite(data, strcat("out_bilinear_", img));
end

function res = average_vector(a, b)
    res = zeros(size(a));
    for n = 1 : length(a)
        res(n) = (a(n) + b(n)) / 2;
    end
end 
```

这是显示问题的图像： ![在此处输入图像描述](../Images/e738be00b674a8ec4d04ffd6ed88886b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:02:27.977

您正在逐行（或逐列）迭代输入图像，但在进行时插入新行（或列）。我很确定这会搞砸你的索引。

我建议创建一个新的输出矩阵，而不是修改原始矩阵。这也将大大加快。

顺便说一句，您的`average_vector`函数可以简单地写为`res = (a + b) / 2;`.

# mysql - EF Code First 对象上下文在 ExecuteFunction 找不到存储过程

> ID：10350649
> 
> 赞同：4
> 
> 时间：2012-04-27T12:31:29.090
> 
> 标签：mysql, entity-framework, stored-procedures, ef-code-first

我首先在 MySQL 数据库中使用 EF 4.3 Code。我在服务器上执行存储过程时遇到问题。代码如下所示：

```
ExecuteFunction<SomeResultType>("StoredProcName",parameter1) 
```

我收到错误在容器“CodeFirstContainer”中找不到 FunctionImport“StoredProcName”。

我尝试将名称命名为 CodeFirstContainer.StoredProcName 但没有运气。有人对这个问题有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T13:00:32.657

您是否已将存储过程导入到您的 EDMX 并为其创建了函数导入？`ExecuteFunction`依赖于 EDMX 和函数导入。如果您使用代码优先，则无法使用它。您必须使用`ExecuteStoreQuery`/ `ExecuteStoreCommand`on `ObjectContext`instance 或`SqlQuery`/ `ExecuteSqlCommand`on Database instance 可通过`DbContext`实例访问。

# android - 另一种方式，使用 setOnClikListener 列出视图点击事件不是 ItemclickListener

> ID：10350650
> 
> 赞同：0
> 
> 时间：2012-04-27T12:31:29.940
> 
> 标签：android

我想实现，当我选择列表视图时，我的复选框将被选中。 ![在此处输入图像描述](../Images/f9a5b612db53b7d1b350f1ca04cc91f1.png)

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_row, null);

        holder = new ViewHolder();
        holder.checkbox = (CheckBox) convertView.findViewById(R.id.mycheckbox);
        holder.text = (TextView) convertView.findViewById(R.id.mytext);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    MyList mylist = mItems.get(position);

holder.text.setText(mylist.getMyText());

    holder.checkbox.setChecked(mChecked.get(position));
holder.chkItem.setChecked(mChecked.get(position));
    holder.chkItem.setOnCheckedChangeListener(new OnCheckedChangeListener()
     {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            mChecked.set((Integer) buttonView.getTag(),isChecked);

        }
     });

    return convertView;
}

static class ViewHolder {
    CheckBox checkbox;
    TextView text;
}
} 
```

这里只选中了复选框项目，但我想如果我单击列表视图，复选框将被选中，任何人都可以帮助我吗？为什么我再次问同样的问题意味着我通过项目单击侦听器尝试了列表视图单击事件，但它不起作用我也尝试了 setFocusable(true)，但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:16:57.963

这是我的回答，

```
convertView .setOnClickListener(new OnClickListener() {         

        public void onClick(View v) {
            // TODO Below is hardcoded to get item at index 1
            // This needs to be changed to fool-proof
            CheckBox checkBox = ((CheckBox)v.getTouchables().get(1));
            checkBox.setChecked(! checkBox.isChecked()); 

            System.out.println("Listview clicked");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:35:30.477

在列表对象上使用 onitemclicklistener。如果行将被选中，复选框将被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:31:38.010

在列表项的 XML 布局中将复选框标记为 focusable="false"。然后处理listview的onClickListener，并切换复选框的选中状态。

如果没有 focusable="false"，该复选框将从列表视图中窃取点击次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:37:21.397

您必须在列表中实施 onItemClickListener。

```
list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
              ViewHolder yourView = (ViewHolder) view;
              //do whatever you want with your view..
            }
    }); 
```

# crystal-reports - 水晶报表动态公式名称

> ID：10350652
> 
> 赞同：0
> 
> 时间：2012-04-27T12:31:49.550
> 
> 标签：crystal-reports, crystal-reports-2010

这就是我所拥有的。我有 15 个独特的公式，分别命名为 Week1、Week2、... Week15。我希望能够获取一个参数名称 MYCount，并使用它来遍历记录并对它们求和。因此，如果 MyCount 等于 3，则循环将汇总 Week1 + Week2 + Week3。我知道如何创建循环，但我无法弄清楚如何动态构建公式名称。到目前为止，这是我所拥有的：（我正在使用 Crystal Xi）

```
 Whileprintingrecords;
 local NumberVar i := {?MyCount}
 For i := 1 To (MyCount-1) Do (
    i = {@Week & "i"} + i
 );
 x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:44:41.313

我想你可能过于复杂了。为什么不这样做：

```
Local numbervar x := 0;
If param > 0 then
 X := x + week1;
If param > 1 then
 X := x + week;
And so on...
 X; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:32:54.333

我不完全是你想要做的，但你可能想考虑另一种方法。

创建一个公式，该公式将根据日期字段的周数对字段进行分段：

```
//{@amount}
// adjust firstDayOfWeek and firstDayOfYear parameters to match your organization's
// definition of a week
If DatePart("ww", {table.dateField})<={?Week} Then
  {table.amount} 
```

在公式字段中插入汇总字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T05:38:31.210

如果您使用`@Weekn`公式字段以便可以在页面上按日期进行汇总，那么您是否考虑过使用 Crystal 的[交叉](http://www.crystalreportsbook.com/Crystal_Reports_XI.asp?Page=10_1)表功能？

# python - 奇怪的'str'对象不可调用python

> ID：10350655
> 
> 赞同：2
> 
> 时间：2012-04-27T12:31:59.923
> 
> 标签：python, string, http

大家好，在我的代码中，我得到了这个堆栈：

```
Traceback (most recent call last):
  File "main.py", line 30, in <module>
    print nova.put_server_metadata("48f366bd-e9c9-47b5-a41f-ca9bcac2d945","labeltest","2.0")
TypeError: 'str' object is not callable 
```

但我不知道，关于这个错误，我试图在我的方法“put_server_metadata”中打印，但它没有在屏幕上打印，请按照代码：

主类：

```
import novaapiclient
import novaauth

if __name__ == "__main__":

    nova = novaapiclient.NovaAPIClient("http://192.168.100.142:35357/v2.0/tokens")

    nova.makeAuth("adminUser", "secretword", "2ad1fc162c254e59bea043560b7f73cb")

    print nova.put_server_metadata("48f366bd-e9c9-47b5-a41f-ca9bcac2d945","labeltest","2.0") 
```

还有我的 put_server_metadata 代码：

```
def put_server_metadata(self, serv_id, label, version):
        if self.auth.isAuthed():

            c = pycurl.Curl()
            printer = cStringIO.StringIO()

            url = self.auth.getComputeURL() + "/servers/%s/metadata" % serv_id
            json_put = file('json_server_put_metadata.json','r+w')
            new_js = str(self.put_server_metadata) % (label, version)

            json_put.seek(0)
            json_put.write(new_js)
            json_put.truncate()
            json_put.close()

            json_to_send = file('json_server_put_metadata.json','r+w')
            siz = os.path.getsize("json_server_put_metadata.json")

            tok = str(self.auth.getAuthToken())

            final_tok = "X-Auth-Token: %s" % tok
            content_len = "Content-length: %d" % siz
            cont_type = "Content-Type: application/json"
            accept = "Accept: application/json"

            c.setopt(pycurl.URL, url)
            c.setopt(pycurl.PUT, 1)
            c.setopt(pycurl.HTTPHEADER, [final_tok, cont_type, accept, content_len])
            c.setopt(pycurl.INFILE, json_to_send)
            c.setopt(pycurl.INFILESIZE, siz)
            c.setopt(pycurl.WRITEFUNCTION, printer.write)
            c.setopt(pycurl.VERBOSE, 1)
            c.perform()
            c.close()

            return printer.getvalue()
        else:
            return "Not authorized" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:40:09.373

从错误消息中可以看出，`put_server_metadata`它既用作方法又用作字符串。以下提示相同：

```
def put_server_metadata(self, serv_id, label, version):  # a method
  ...
  new_js = str(self.put_server_metadata) % ... # not consistent with
                                               # put_server_metadata being a method 
```

如果是你，我会搜索所有出现的代码`put_server_metadata`并从那里获取它。

# session - 使用 CDI+JSF 的无效会话不起作用

> ID：10350657
> 
> 赞同：4
> 
> 时间：2012-04-27T12:32:01.387
> 
> 标签：session, jsf, cdi, invalidation, phaselistener

我正在尝试在我的应用程序中实现注销，所以我做了这个：

```
public String logout(){
    try{
        FacesContext facesContext = FacesContext.getCurrentInstance();  
        ExternalContext ex = facesContext .getExternalContext();  
        ex.invalidateSession(); 
        return "success"; 
    }catch(Exception e){
        return "error";
    }
} 
```

但是当我检查用户是否登录时，它说是：

```
public class AuthenticateListener implements PhaseListener {

    @Override
    public void afterPhase(PhaseEvent event) {
        AuthorizedUser authorized = (AuthorizedUser) Util.getHandler("authorized");
        if (authorized.getUser() == null) {
            System.out.println("Not Logged");
        } else {
            System.out.println("Logged");
        }
    }

    @Override
    public void beforePhase(PhaseEvent event) {
        // TODO Auto-generated method stub

    }

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.RESTORE_VIEW;
    }

} 
```

我错过了什么吗？使我的会话无效后，我不应该获得 AuthorizedUser (sessionScoped) 的新实例吗？

编辑：添加 getHandler，如果有人需要它；）

```
public static Object getHandler(String handlerName) {

    FacesContext facesContext = FacesContext.getCurrentInstance();
    ELContext elContext = facesContext.getELContext();
    ELResolver resolver = facesContext.getApplication().getELResolver();

    Object uh = resolver.getValue(elContext, null, handlerName);
    return uh;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:57:20.737

该会话在当前请求-响应中仍然可用。在下一个请求中不再可用。您需要在失效后发送重定向，以便指示浏览器在给定 URL 上发送新请求。

```
return "success?faces-redirect=true"; 
```

或者，如果您仍在使用老式的导航案例（返回值即表明这一点；拥有文件名“成功”的视图很奇怪），然后添加`<redirect/>`到导航案例中。

如果这仍然不起作用，那么错误在于您如何将用户存储在会话中。例如，它实际上存储在应用程序范围中，当您将 CDI[`@Named`](http://docs.oracle.com/javaee/6/api/javax/inject/Named.html)与 JSF混合[`@SessionScoped`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/SessionScoped.html)时，或者当您将登录用户分配为静态变量而不是实例变量时，可能会发生这种情况。

### 也可以看看：

*   [如何在 JSF 2.0 中使会话无效？](https://stackoverflow.com/questions/5619827/how-to-invalidate-session-in-jsf-2-0/5620582#5620582)
*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T12:29:46.607

在注销方法中使用这段代码：

```
HttpSession oldsession = (HttpSession) FacesContext
                .getCurrentInstance().getExternalContext().getSession(false);
oldsession.invalidate(); 
```

这将起作用。如果对您有帮助，请告诉我。

# xml - 如何从多个 XML 文件创建 C# 类

> ID：10350660
> 
> 赞同：0
> 
> 时间：2012-04-27T12:32:08.830
> 
> 标签：xml, c#-4.0, xsd, xsd.exe

我正在寻找一种工具（最好是免费软件），它可以帮助我从多个 xml 文件创建 C# DTO（类）。

其中一些 xml 文件包含相同的复杂类型，因此为了避免类的重复，我必须从多个文件中制作一个 XSD。

我尝试了 xsd.exe（由 Visual Studio 提供）工具，但它不需要多个 xml 文件。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:22:56.283

[QTAssistant](http://paschidev.com)（我与它相关联）在“工具”选项卡下的 XML 部分中有一个命令，称为“来自 XML 的 XSD”。它会提示您：

*   您希望使用的 XML 文件；
*   存储生成的 XSD 文件的文件夹。

该工具基于.NET 技术，因此生成的输出格式为.NET，版本仅限于XSD 1.0。

该工具可以免费试用，尽管出于支持原因需要注册。如果您不想注册，请使用网站上的支持联系信息向我发送电子邮件，我将向您发送一个私人链接。

例如，如果您查看在[SO 上与此问题](https://stackoverflow.com/questions/9816815/xsd-for-xmls-with-list-of-different-and-reorder-types)一起发布的 XML ，则 QTAssistant 将生成此 XSD：

![QTAssistant 从多个 XML 文件中推断出 XSD](../Images/7917c7feb9526ffde1afc59a52702619.png)

我指出这一点的原因与您可能对生成的 XSD 内容的期望有关。如果你看一下上图中的选择，虽然它符合用户提出的要求，但也可能不适合其他人......

因此，对于这种类型的练习，使用尽可能多的 XML 与您想到的有效场景非常重要。考虑到推理的工作原理，您应该预料到一些不需要的 XML 模式会“溜走”生成的 XSD；在这种情况下，您可以尝试手动编辑一些位...如果它不起作用，请归咎于 XSD 规范的限制...

# mercurial - 取消不需要的更改并对其进行修补

> ID：10350661
> 
> 赞同：2
> 
> 时间：2012-04-27T12:32:12.417
> 
> 标签：mercurial, patch, mercurial-queue, mercurial-extension

我正在与远程仓库的某个人合作。我们意识到我所做的更改应该从 repo 中删除。但是这些更改存在于许多更改集中，并与某人的更改混合在一起。

我们决定在我提交另一个变更集之前删除我的更改。所以我用未提交的更改和它做了一个**补丁。**`qpop`

现在我想从远程撤消我的其余更改，并有选择地修补这些更改，使我的同事的更改保持不变。

此外，我想在一个补丁中获得来自**新补丁**的差异和来自**patch_ive_made_before的差异。**所以换句话说 - 我想从 2 个不同的变更集中获得一个补丁。我必须手动完成吗？

然后在我这样做之后，我将`commit`/`push`清除存储库中的更改。

Mercurial Queues 如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:35:55.813

您可以使用以下命令制作与先前更改相反的补丁：

```
hg diff --change NODEID_YOU_REGRET --reverse > undoes-what-you-regret.patch 
```

可以使用以下命令将该补丁放入一个善变的队列中：

```
hg qimport undoes-what-you-regret.patch 
```

但是，如果我这样做，我会完全跳过 mq 而只是这样做：

```
hg backout --rev NODEID_YOU_REGRET 
```

这将创建一个新的负责人，您可以`hg merge`将其用于原始更改的后裔的*任何*开发线 - 即：任何具有该代码的东西。

# android - 当文件大小大于可恢复上传块大小时，文档列表 API 文件上传失败

> ID：10350665
> 
> 赞同：2
> 
> 时间：2012-04-27T12:32:33.447
> 
> 标签：android, google-docs-api, google-drive-api

我正在尝试使用 Documents List API 让 Android 应用程序与 Google Docs/Drive 交互：[https ://developers.google.com/google-apps/documents-list](https://developers.google.com/google-apps/documents-list)

我在使用 GData 可恢复上传协议上传文件时遇到了一些麻烦，即： [https ://developers.google.com/google-apps/documents-list#uploading_a_new_document_or_file_with_both_metadata_and_content](https://developers.google.com/google-apps/documents-list#uploading_a_new_document_or_file_with_both_metadata_and_content)

我正在使用 512KiB 的块大小。小于块大小的文件上传成功，但大于块大小的文件将在第一个块完成之前失败。即使我将块大小增加到 1MiB 或 2MiB，这也是正确的。一个 768KiB 的文件将失败，块大小为 512KiB，但成功的块大小为 1MiB。

大于块大小的文件确实可以通过第一步，即将 XML 发布到“可恢复创建媒体”链接。然后，我看到用于发送块的 HttpContent 实现的 writeTo() 方法中抛出了 SSLException。*此异常发生在FIRST*块的中途，例如：

```
javax.net.ssl.SSLException: Write error: ssl=0x2a6318: I/O error during system call, Broken pipe
    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_write(Native Method)
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLOutputStream.write(OpenSSLSocketImpl.java:713)
    at libcore.net.http.FixedLengthOutputStream.write(FixedLengthOutputStream.java:41)
    at com.google.api.client.http.AbstractInputStreamContent.writeTo(AbstractInputStreamContent.java:89) 
```

请注意，要查看上述内容，我必须在 writeTo() 方法中实际捕获 IOExceptions（在记录它们后重新抛出它们）。否则，由于内容被突然切断，我只会看到一个通用的“400 Bad Request”响应。

我尝试了一些不同的测试设备，例如 Galaxy Nexus (VZW/CDMA, 4.0.2, stock), Droid4 (Moto 2.3.6, stock) DroidX (stock)。

上传第一个块的请求的标头：

```
Accept-Encoding: gzip
Authorization: GoogleLogin auth=XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Content-Length: 524288
Content-Range: 0-524287/1635085
Content-Type: image/png
GData-Version: 3.0
User-Agent: XXXXXXXXXXXXXX 
```

感谢您的任何建议。

**更新**：添加代码片段，这是放置下一个块的位。

```
private boolean putNext() 
throws CancelException, DirectoryException {
    try {
        ByteArrayContent content = new ByteArrayContent(mediaType, buffer, 0, bufferLength);

        HttpRequest request = conn.getHttpRequestFactory().buildPutRequest(new GenericUrl(nextLocation), content);

        HttpHeaders requestHeaders = request.getHeaders();
        requestHeaders.setContentLength(String.valueOf(bufferLength));
        requestHeaders.setContentType(mediaType);

        if (sent != 0 || bufferLength != size) {
            // Only set content range when file will span multiple chunks.
            requestHeaders.setContentRange(sent + "-" + (sent + bufferLength - 1) + "/" + size);
        }

        HttpResponse response = request.execute();

        sent += bufferLength;
        bufferLength = 0;

        HttpHeaders responseHeaders = response.getHeaders();

        int statusCode = response.getStatusCode();
        if (statusCode == GoogleDriveConnection.RESPONSE_308_RESUME_INCOMPLETE) {
            nextLocation = responseHeaders.getLocation();
            return false;
        } else if (statusCode >= 200 && statusCode < 400) {
            Document responseDom = DomUtil.load(response.getContent());
            return true;
        } else {
            Log.w(LOG_TAG, "Google Drive upload error: Invalid response code to upload request: " + statusCode);
            throw DirectoryException.networkErrorHost(null, catalog.getHostName());
        }
    } catch (IOException ex) {
        Log.w(LOG_TAG, "Google Drive write error.", ex);
        throw DirectoryException.networkErrorHost(ex, catalog.getHostName());
    } catch (SAXException ex) {
        throw DirectoryException.networkErrorHost(ex, catalog.getHostName());
    }
} 
```

另一个可能很重要的注意事项：SSLException 失败是由 Content-Range 标头的存在触发的。如果我省略它，则第一个大于块大小的文件将成功上传，无一例外。服务器返回 201 Created 并创建了截断 512KiB 大小的文件。

再次感谢！

**更新 2**

我现在有一个纯 Java 应用程序可用于演示该问题。这被打包为一个包含库的 Eclipse 项目，但在其他地方使用应该很简单。 [http://android.nextapp.com/test/DriveUpload.zip](http://android.nextapp.com/test/DriveUpload.zip)

需要一个身份验证令牌来测试它。它需要三个命令行参数才能运行：

[文件名] [内容/类型] [AuthToken]

（我目前正在从真实应用程序的调试输出中剪切/粘贴 authtokens）

这是此应用程序的修剪输出：

```
TOKEN=********
FILE=/tmp/1199Panigale.jpg
Headers: POST Request
-- User-Agent: DriveUpload
-- GData-Version: 3.0
-- Authorization: GoogleLogin auth=********
-- X-Upload-Content-Type: image/png
-- X-Upload-Content-Length: 1635085
[POST Request] --------------------------------------------------------
<entry xmlns="http://www.w3.org/2005/Atom">
<title>1199Panigale.jpg</title>
</entry>
Executing post request: https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3Aroot/contents?convert=false
Post complete, response=200
Headers: POST Response
-- Server: HTTP Upload Server Built on Apr 23 2012 11:11:29 (1335204689)
-- Location: https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3Aroot/contents?convert=false&upload_id=********2
-- Date: Sat, 28 Apr 2012 04:51:47 GMT
-- Pragma: no-cache
-- Expires: Fri, 01 Jan 1990 00:00:00 GMT
-- Cache-Control: no-cache, no-store, must-revalidate
-- Content-Length: 0
-- Content-Type: text/html
Preparing PUT request #0
Headers: Put Request
-- User-Agent: DriveUpload
-- GData-Version: 3.0
-- Authorization: GoogleLogin auth=********
-- Content-Type: image/png
-- Content-Range: 0-524287/1635085
[writeTo]
[getCotent]
Read: 4096, total: 4096
Read: 4096, total: 8192
Read: 4096, total: 12288
Read: 4096, total: 16384

[---skip a few---]

Read: 4096, total: 270336
Read: 4096, total: 274432
Read: 4096, total: 278528
Read: 4096, total: 282624
Read: 4096, total: 286720
Read: 4096, total: 290816
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Broken pipe
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
[writeTo]
[getCotent]
Read: 4096, total: 4096
Read: 4096, total: 8192
Read: 4096, total: 12288
Read: 4096, total: 16384
Read: 4096, total: 20480

[---skip a few---]

Read: 4096, total: 274432
Read: 4096, total: 278528
Read: 4096, total: 282624
Read: 4096, total: 286720
Read: 4096, total: 290816
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Broken pipe
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
[writeTo]
[getCotent]
Read: 4096, total: 4096
Read: 4096, total: 8192
Read: 4096, total: 12288
Read: 4096, total: 16384
Read: 4096, total: 20480

[---skip a few---]

Read: 4096, total: 278528
Read: 4096, total: 282624
Read: 4096, total: 286720
Read: 4096, total: 290816
Read: 4096, total: 294912
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Broken pipe
Apr 27, 2012 9:49:02 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
[writeTo]
[getCotent]
Read: 4096, total: 4096
Read: 4096, total: 8192
Read: 4096, total: 12288
Read: 4096, total: 16384
Read: 4096, total: 20480

[---skip a few---]

Read: 4096, total: 278528
Read: 4096, total: 282624
Read: 4096, total: 286720
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at sun.security.ssl.OutputRecord.writeBuffer(OutputRecord.java:314)
    at sun.security.ssl.OutputRecord.write(OutputRecord.java:303)
    at sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:768)
    at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:756)
    at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:108)
    at org.apache.http.impl.io.AbstractSessionOutputBuffer.write(AbstractSessionOutputBuffer.java:153)
    at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:114)
    at driveupload.UploadStream$1.writeTo(UploadStream.java:149)
    at org.apache.http.entity.HttpEntityWrapper.writeTo(HttpEntityWrapper.java:96)
    at org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo(EntityEnclosingRequestWrapper.java:108)
    at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:120)
    at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:264)
    at org.apache.http.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:224)
    at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:255)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:647)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
    at driveupload.DriveUpload.executeRequest(DriveUpload.java:71)
    at driveupload.UploadStream.putNext(UploadStream.java:191)
    at driveupload.UploadStream.write(UploadStream.java:225)
    at java.io.OutputStream.write(OutputStream.java:116)
    at driveupload.DriveUpload.test(DriveUpload.java:127)
    at driveupload.DriveUpload.main(DriveUpload.java:44) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:41:55.757

问题原来是我没有在“Content-Range”标题前加上“字节”。我不知道为什么我在前六次检查标题是否与规范一致时没有找到这个。:)

感谢您的帮助，很抱歉这个非问题打扰您。

尽管规范表明对 PUT 请求的响应将为下一次上传提供“位置”标头，但我确实注意到了。我没有看到一个，但如果我坚持以前发布的位置，它就可以正常工作。如果要提供位置 URL，我的代码现在只需更新位置 URL，如果没有，则继续使用先前发布的位置 URL。

# java - 使用运行时在其本机应用程序中打开文件。（Windows 7的）

> ID：10350667
> 
> 赞同：0
> 
> 时间：2012-04-27T12:32:36.907
> 
> 标签：java, windows-7, applet

# 背景

我有一个想要恢复的旧小程序。所有功能均可在 Windows XP 中运行。但是，在 Windows 7 中，无法在其本机应用程序中打开文件（下面的部分代码）。什么都没有发生，没有错误或类似的东西。我正在使用*Java 版本 1.5.0 (J2SE 5.0)*，因此*Desktop.getDesktop();* 不管用！

# 代码

```
public void start(String sFileName, String sDir, ctgraphics gGfx) {
    String command = '"' + sDir + sFileName + '"';
    Runtime myRuntime = Runtime.getRuntime();
    try {
        myRuntime.exec("rundll32 SHELL32.DLL,ShellExec_RunDLL " + command);
        gGfx.setStatusText("File opened.");
        gGfx.drawStatusBar(1);
    } catch (IOException e) {

        System.out.println("Error " + e.getMessage());
    }

} 
```

# 问题

为什么上面的代码在 Windows 7 中不起作用，我需要做什么才能在其本机应用程序中打开文件（考虑到我使用的是 Java v. 1.5）？

.

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:35:57.300

阅读[当 Runtime.exec() 不会时](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。它描述了许多常见的陷阱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:35:08.873

您可能想要使用桌面支持，请查看此链接：

[桌面.open](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)

您只需`File`使用要打开的文件的路径创建一个，然后调用`Desktop.getDesktop().open(file)`.

在 1.5 之前桌面是一个库，然后它成为标准 JDK，您可以考虑使用此选项。

在这里你可以找到一个教程：

[java 1 2004的javadesktop教程](http://www.google.com.ar/url?sa=t&rct=j&q=&esrc=s&source=web&cd=9&ved=0CGwQFjAI&url=http://javadesktop.org/jdic/presentations/BOF-9871_JDIC_JavaOne05.pdf&ei=JJaaT9GvE4WcgQf1suHoDg&usg=AFQjCNFYRY0WOBUqpHO02K48uq_647-O1A&sig2=VO_-k3w-7NU1if5Ie5c2gg)

希望这可以帮助

这是项目站点：

[JDIC项目](http://www.javadesktop.org/articles/jdic/index.html)

在这里你可以找到罐子：

[带有 jdic jars 的 Maven 仓库](http://www.astrogrid.org/maven/jdic/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:41:23.797

1.  单行调用`RunTime.exec()`很少起作用。请务必阅读并实施[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)的所有建议。
2.  将参数分解成一个数组，以便更容易/更可预测地解析。
3.  从 1.5 开始，J2SE 提供了[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)提供诸如[`redirectErrorStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28boolean%29). 反过来，该方法可以更容易地实施第 1 点的一些建议。

# java - Hibernate Envers 管理的审计表的主键是什么？

> ID：10350673
> 
> 赞同：0
> 
> 时间：2012-04-27T12:33:00.527
> 
> 标签：java, hibernate, hibernate-envers

我正在使用 Hibernate Envers 来审计一些实体。我手动创建了关联的审计表。但是，我无法确定审计表的主键应该是什么。例如，考虑一个用于存储客户的虚构表格：

```
CREATE TABLE CUSTOMER
(
    CUSTOMER_ID   INTEGER,
    CUSTOMER_NAME VARCHAR(100),

    PRIMARY KEY (CUSTOMER_ID)
) 
```

然后创建审计表：

```
CREATE TABLE CUSTOMER_REVISION
(
    REVISION_ID      INTEGER,
    REVISION_TYPE_ID INTEGER,
    CUSTOMER_ID      INTEGER,
    CUSTOMER_NAME    VARCHAR(100),

    PRIMARY KEY (???)
) 
```

以下是我考虑的选项：

## 首要的关键：`REVISION_ID`

这不能是主键，因为同一类的多个实体可能在同一修订期间被修改。

## 主键： ( `REVISION_ID`, `CUSTOMER_ID`)

这似乎更有可能，但我不确定 Envers 是否会在每次修订时为每个客户插入多条记录。

## 主键： ( `REVISION_ID`, `REVISION_TYPE_ID`, `CUSTOMER_ID`)

这似乎有点矫枉过正，但 Envers 可能会在每个客户的每个修订版本中插入不同类型的记录 ( `add`,`modify`或)。`delete`

## 主键：新列

也许主键必须只是包含合成主键的另一列。

* * *

**Hibernate Envers 管理的审计表的真正主键是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:57:35.900

从[文档](http://docs.jboss.org/envers/docs/index.html#schema)中的示例来看，我的示例中的主键似乎是 ( `REVISION_ID`, `CUSTOMER_ID`)。这是文档中的示例：

```
create table Address (
    id integer generated by default as identity (start with 1),
    flatNumber integer,
    houseNumber integer,
    streetName varchar(255),
    primary key (id)
);

create table Address_AUD (
    id integer not null,
    REV integer not null,
    flatNumber integer,
    houseNumber integer,
    streetName varchar(255),
    REVTYPE tinyint,
    ***primary key (id, REV)***
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-08T18:10:39.697

审计表的主键是审计表的原始id（id）和修订号（rev）的组合。作为官方文档，在给定的版本中，给定的实体实例最多可以有一个历史条目，这仅仅意味着上述两列的唯一组合。

# android - 屏幕锁定时使用音量键

> ID：10350675
> 
> 赞同：1
> 
> 时间：2012-04-27T12:33:05.423
> 
> 标签：android

此代码不起作用将屏幕锁定。如果我想在屏幕锁定时使用音量键怎么办？

我的代码是：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    int action = event.getAction();
    int keyCode = event.getKeyCode();
        switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            if (action == KeyEvent.ACTION_UP) {
                //TODO
            }
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            if (action == KeyEvent.ACTION_DOWN) {
                //TODO
            }
            return true;
        default:
            return super.dispatchKeyEvent(event);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:50:19.737

您可以注册`BroadcastReceiver`操作“android.media.VOLUME_CHANGED_ACTION”：

```
android.media.VOLUME_CHANGED_ACTION 
```

其他方法是： [Android 上的音量键](https://stackoverflow.com/questions/3220556/taking-over-the-volume-key-on-android)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-28T07:26:49.707

在服务中执行此操作：

```
public class MyService extends Service {

@Override
public void onCreate() {
    super.onCreate();
    final BroadcastReceiver vReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
             //your code here
        }
    };
    registerReceiver(vReceiver, new IntentFilter("android.media.VOLUME_CHANGED_ACTION"));
}

} 
```

然后注册 BroadcastReceiver 与动作`Intent.ACTION_SCREEN_OFF`，当屏幕关闭时连续播放无声的声音，并`Intent.ACTION_SCREEN_ON`在屏幕打开时停止音乐的动作。音量按钮仅在播放音乐时激活。

# facebook-graph-api - 使用图形 API 检索动作的标题

> ID：10350676
> 
> 赞同：2
> 
> 时间：2012-04-27T12:33:05.610
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-opengraph

我在 Graph API 资源管理器中使用以下查询，我只想获取以前在时间轴上发布的操作的标题字段，但问题是使用下面的代码我得到了所有字段，例如：标题、图像、URL 等。

```
https://graph.facebook.com/me/app_namespace:read/article?fields=title 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:28:26.313

据我所知，`fields`它只适用于 Graph API 调用的一个子集，例如`/me`，但 Facebook 文档确实说它应该适用于*大多数*领域。这可能是一个错误，但我没有看到任何提及它是对象/操作的一部分。

我会提交一个错误，看看它是否“按设计”。

# paypal - 此商家已禁用 PayPal Direct Payments Recurring

> ID：10350677
> 
> 赞同：2
> 
> 时间：2012-04-27T12:33:08.173
> 
> 标签：paypal

我正在尝试使用直接付款创建定期配置文件，但我收到此错误（命令`CreateRecurringPaymentsProfile`）：

```
Array
(
   [TIMESTAMP] => [not-relevant]
   [CORRELATIONID] = [not-relevant]
   [ACK] => Failure
   [VERSION] => 50.0
   [BUILD] => 2764190
   [L_ERRORCODE0] => 11586
   [L_SHORTMESSAGE0] => DPRP is disabled.
   [L_LONGMESSAGE0] => DPRP is disabled for this merchant.
   [L_SEVERITYCODE0] => Error
) 
```

非经常性交易和 Express Checkout Recurring Payments 会正常处理。一切都在沙盒中工作。我尝试联系 PayPal 的支持，但他们不知道问题出在哪里。该错误是自我描述的，但我只是不知道如何启用定期付款。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:51:52.057

首先，确保在创建沙盒帐户时，将国家/地区设置为“美国”，将类型设置为“Website Payments Pro”。将其设置为“英国”将在您的沙箱中导致此错误。

美国沙盒帐户默认启用 DPRP，因此您无需执行任何其他操作。

由于您的沙盒帐户现在将使用美元，因此您必须向其中添加其他货币（这将避免您以后遇到无法自动接受测试付款的问题）。这可以通过以下方式完成：

1.  developer.paypal.com 上“测试帐户”页面上的“进入沙盒测试站点”
2.  登录，然后单击导航栏中的“个人资料”链接
3.  单击“管理货币配置文件”，然后将您需要的货币添加到帐户中。

# c# - 如何在 iframe 中捕获图像（url）？

> ID：10350678
> 
> 赞同：2
> 
> 时间：2012-04-27T12:33:09.717
> 
> 标签：c#, javascript, jquery, asp.net, iframe

在这里，我试图在 iframe 中捕获图像（url）。但它不起作用。这是我的代码：

```
<div id="iframe">
    <table width="100%" border="0" align="left" cellpadding="0" cellspacing="0" class="border2">
        <tr>
            <td height="403">
                <asp:UpdatePanel ID="Update" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <iframe id="IFTrendAnalysis" name="IFTrendAnalysis" scrolling="auto" runat="server" width="100%" height="403" frameborder="0"></iframe>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="imgBTNSalesTrendChart" />
                    </Triggers>
                </asp:UpdatePanel>
            </td>
        </tr>
    </table>
</div> 
```

和图像路径（动态生成）

> [http://10.232.151.132:8080/pentaho/getImage?image=picture658447691538512233.png](http://10.232.151.132:8080/pentaho/getImage?image=picture658447691538512233.png)

和

```
$(function () {
    $("#MainContent_IFTrendAnalysis img").click(function () {
        var update = $("<div>").append(
            $("<img>").attr("src", $(this).attr("src"))
        ).html();

        $("#content").val(function (i, v) {
            return v + update;
        });
    });
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:56:57.200

如果您的 iframe 页面与父页面位于同一域中，那么这应该可以帮助您：

```
var name = "img_Sample";
$('#MainContent_iframeDetail').get(0).contentWindow.document.getElementById(name).src 
```

我认为，您也应该能够使用 Jquery 来代替`document.getElementByID`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T05:28:10.867

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#MainContent_IFTrendAnalysis').find('img').live('click', function () {
                var obj = $(this);

                $('#content').val(function (i, value) {
                    if (($.trim(value).length === 0) || ($('<div>' + value + '</div>').find('[src="' + obj.attr('src') + '"]').length === 0)) {
                        return value + $('<div></div>').append($('<img />', { 'src': obj.attr('src') })).html();
                    }
                    else {
                        $('#imgExistMessage').fadeIn(500).fadeOut(500);

                        return value;
                    }
                });

            });
        });
    </script>
</head>
<body>
    <span id="imgExistMessage" style="font-size: 15px; font-weight: bolder; color: Red;
        display: none;">Image has been already selected.</span>
    <br />
    <textarea id="content" cols="50" rows="20">   
    </textarea>
    <div id="MainContent_IFTrendAnalysis">
        <img src="https://lh3.googleusercontent.com/-ZkMSKCbY0Y8/TRCpCX5p35I/AAAAAAAAABQ/ZL2nsL-ir7U/s277/3.jpg"
            width="100" height="100" />
        <img src="https://lh5.googleusercontent.com/-y301Ju4n32g/TRCtzBfoiZI/AAAAAAAAABc/3tGEuAD3R8I/w487-h365-k/51.jpg"
            width="100" height="100" />
        <img src="../../Images/Desert.jpg" width="100" height="100" />
    </div>
    <!--  <iframe id="MainContent_IFTrendAnalysis" src="http://api.jquery.com/append/" width="300px"
        height="500px"></iframe>-->
</body>
</html>

    enter code here 
```

# php - 如何在php中生成一个简短的唯一ID？

> ID：10350680
> 
> 赞同：3
> 
> 时间：2012-04-27T12:33:10.023
> 
> 标签：php

为了生成唯一的 ID，我想我必须在 php.ini 中使用 uniqid 函数。
但是 uniqid 默认生成一个 13 位长的 HEXA 数字。

```
4f66835b507db 
```

我想将此数字减少到 7 位长的 NUMERIC 数字，但我想保留唯一性。是否可以 ？

```
4974012 
```

此号码将用作用户 ID。身份验证将使用 id 和密码完成。

有人说uniqid不是唯一的！这是一个糟糕的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:37:05.030

任何“唯一”数字在生成足够多的记录后最终都会发生冲突。为了确保唯一性，您需要将生成的值存储到数据库中，并且在生成下一个值时，您需要检查是否没有冲突。

但是，在实践中，应用程序通常将 ID 生成为简单的序列 1,2,3,... 这样您就知道在用完数据类型之前不会发生冲突（UINT 通常为 32 位长，这给出了你有 40 亿个唯一 ID）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T12:53:21.920

[Uniqid](http://php.net/manual/en/function.uniqid.php)不能保证是唯一的，即使是全长。

此外， uniqid 旨在仅**在本地**是唯一的。这意味着如果您在两台或多台服务器上同时创建用户，您最终可能会为两个不同的用户使用一个 ID，**即使您使用全长 uniqid 也是如此**。

我的建议：

*   如果您真的在寻找**全局**唯一标识符（即您的应用程序在具有单独数据库的多个服务器上运行），您应该使用[UUIDs](http://en.wikipedia.org/wiki/Universally_unique_identifier)。这些甚至比 uniqid 返回的还要长，但实际上没有发生碰撞的机会。

*   如果您只需要**本地**唯一标识符，请在数据库中坚持使用 AUTO_INCREMENT。这比检查数据库中是否已经存在短随机 ID （稍微）快一点并且（一点）安全。

**编辑：**正如下面的评论所示，您不仅在寻找用户的 ID，而且还被迫为您的用户提供一个随机登录名......这很奇怪，但没关系。在这种情况下，您可以尝试`rand`在循环中使用，直到您得到一个在您的数据库中不存在的。

伪代码：

```
$min = 1;
do {
    $username = "user" . rand($min, $min * 10);
    $min = $min * 10;
} while (user_exists($username));
// Create your user here. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:37:28.577

编写一个 while 循环，生成所需长度的随机字母和数字，循环直到它创建一个尚未使用的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:39:43.887

好吧，通过将其减少到 7 个字符并且只有数字，您将“唯一性”减少了很多。

我建议使用用户 ID 的自动增量，如果它必须是 7 位数字，则从 1000000 开始。

如果你真的必须在没有自动增量的情况下生成它，你可以使用它`mt_rand()`来生成一个 7 位长的随机数：

```
$random = mt_rand(1000000, 9999999); 
```

这并不理想，因为您需要检查该号码是否已被其他用户使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:45:28.193

如果您使用的是数据库。`id`将一列定义为`unique`and `auto-incremented`，然后让数据库管理您的 id。

它更安全。

阅读更多：[mysql-doc](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T13:37:57.827

看看这篇文章

*   [使用 PHP 创建短 ID - 像 Youtube 或 TinyURL](http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl)

它解释了如何生成简短的唯一 ID，就像 youtube 一样。

实际上，文章中的函数与[php 函数 base_convert](http://php.net/manual/fr/function.base-convert.php)非常相关，它将一个数字从一个基数转换为另一个数（但最多只能达到 36 个基数）。

# html - 顶栏位置和浏览器窗口大小

> ID：10350681
> 
> 赞同：0
> 
> 时间：2012-04-27T12:33:10.883
> 
> 标签：html, css, position

这是母版页：

```
<div id="top">

    <div id="left">
        <!-- menu with 5 items -->
    </div>

    <div id="rigth">
        <!-- menu with 3 items -->
    </div>
    </div>

<div id="title">
    <h1>My MVC Application</h1>
</div>
</div> 
```

这是我的CSS：

```
#left
{
float: left;
margin-left:-100px;
height: 30px;
}

#rigth
{
float: right;       
height: 30px;
right:0px;
margin-right: 0px;
}

#top
{
top: 0px;
left: 100px;    
position: fixed;
width: 95%;
background: url(../../Content/images/myImage.png) no-repeat center center;

} 
```

当浏览器窗口很大时，一切都很好。但是当我最小化它时，栏会扩大它的高度并且“右”低于“左”。如何改变这个？我希望权利不可见。有点像gmail的顶栏。位置是固定的，因为我希望在滚动时显示条形图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:53:59.220

你混淆了'px'和'percent'这主要不是问题。但是您应该尝试仅使用百分比来定位屏幕上的元素

# winsock - WinSock 错误 10061

> ID：10350683
> 
> 赞同：0
> 
> 时间：2012-04-27T12:33:18.183
> 
> 标签：winsock, winsock2, winsockets

我使用winsock 编写了一个简单的客户端/服务器应用程序。服务器和客户端通过本地主机上的 TCP 端口 76567（只是我选择的一个随机数）进行连接和通信。我在三台台式机上测试过，两台运行 XP，另一台运行 Win7，我还在四台笔记本电脑上测试过，三台运行 Win7，一台运行 XP。该应用程序在所有台式机和 XP 笔记本电脑上都可以正常工作，但在所有三台 Win7 笔记本电脑上，当客户端尝试连接到服务器时，我都会收到错误 10061！

我已经关闭了防火墙，但问题仍然存在，我还环顾四周，看看是什么导致了这个错误，看起来客户端正在尝试连接到非监听服务器。但是，服务器调用 listen() 成功返回！很奇怪，这个问题似乎只发生在 Win7 笔记本电脑上，有什么想法吗？

这是我的套接字初始化代码：

```
// Initialise Winsock
iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
if(iResult != 0)
{
    printf("WSAStartup failed: %d\n", iResult);
}

// Create a server socket
ZeroMemory(&hints, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;
hints.ai_flags = AI_PASSIVE;

iResult = getaddrinfo(NULL, DEFAULT_PORT, &hints, &result);
if(iResult != 0)
{
    printf("getaddrinfo failed: %d\n", iResult);
    WSACleanup();
}

// Create a socket to listen for clients
listenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
if(listenSocket == INVALID_SOCKET)
{
    printf("Error at socket(): %d\n", WSAGetLastError());

    freeaddrinfo(result);
    WSACleanup();
}

// Bind socket to ip address and port
iResult = bind(listenSocket, result->ai_addr, (int) result->ai_addrlen);
if(iResult == SOCKET_ERROR)
{
    printf("bind failed with error: %d\n", WSAGetLastError());

    freeaddrinfo(result);
    closesocket(listenSocket);
    WSACleanup();
}
freeaddrinfo(result);

// Listen for connection requests
if(listen(listenSocket, SOMAXCONN) != 0)
{
    printf("Listen failed with error: %d\n", WSAGetLastError());

    closesocket(listenSocket);
    WSACleanup();
} 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:39:25.087

IP 端口为 16 位整数，因此允许的最大端口号为 0xFFFF (65535)。这里发生的是一种整数溢出。由于您所需的端口号 (76567) 不适合 16 位，因此该数字被截断，仅使用最低 16 位。这为您提供了端口号 11031。该行`addr.sin_port = htons(76567);`应该给您一个编译器警告，因为参数`htons()`不能 fin into `uint16_t`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:41:33.880

`getaddrinfo()`返回给定`hints`条件的所有可用地址的链接列表。即使机器只有一个网络适配器，它也可以分配多个 IP 地址，即使是 localhost。您正在将服务器套接字绑定到找到的第一个 IP/端口对`getaddrinfo()`，因此客户端可能会尝试连接到实际上没有在服务器上侦听的不同 IP/端口，例如，如果服务器绑定到您的 LAN/Internet IP，但客户端正在连接`127.0.0.1`。`127.0.0.1`除非服务器绑定到，否则客户端无法连接`127.0.0.1`。

在多宿主/多 IP 环境中，您应该在调用时使用通配符`0.0.0.0`IP（又名） ，而不是. 这会将套接字绑定到所有已安装网络适配器的所有可用 IP。这样，客户端可以连接到服务器绑定的任何 IP，包括. 实际上，鉴于您显示的代码，您甚至根本不需要使用：`INADDR_ANY``bind()``result->ai_addr``127.0.0.1``getaddrinfo()`

```
// Initialise Winsock
iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
if(iResult != 0)
{
    printf("WSAStartup failed: %d\n", iResult);
}

// Create an IPv4 server socket to listen for IPv4 clients
listenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
if(listenSocket == INVALID_SOCKET)
{
    printf("Error at socket(): %d\n", WSAGetLastError());
    WSACleanup();
}

// Bind socket to IPv4 address and port
sockaddr_in addr;
memset(&addr, 0, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_port = htons(76567);
addr.sin_addr.s_addr = INADDR_ANY;

iResult = bind(listenSocket, (sockaddr*)&addr, sizeof(addr));
if(iResult == SOCKET_ERROR)
{
    printf("bind failed with error: %d\n", WSAGetLastError());
    closesocket(listenSocket);
    WSACleanup();
}

// Listen for IPv4 connection requests
if(listen(listenSocket, SOMAXCONN) != 0)
{
    printf("Listen failed with error: %d\n", WSAGetLastError());
    closesocket(listenSocket);
    WSACleanup();
} 
```

# forms - Symfony2：大型表单的最佳实践

> ID：10350685
> 
> 赞同：1
> 
> 时间：2012-04-27T12:33:19.197
> 
> 标签：forms, model, symfony, entity

我将设置一些包含多达 100 个字段的大型表单。

现在我的问题是是否有一些关于处理此类表格的最佳实践。

尤其：

1.  实体关系
2.  自己形成对象

有人对此类任务有经验吗？我应该将所有内容放在一个实体中，一种形式，在子窗体中使用 jQuery 结构化，还是应该尽可能将属性分组到数组中？

问候， 博多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:43:17.493

我正在创建一些由多个实体构建的复杂表单。我为每个实体[创建一个表单类](http://symfony.com/doc/current/book/forms.html#creating-form-classes)，然后创建一个复合表单类，其中包含我需要的各种表单组合（这在某种程度上类似于 PéCé 的建议）。

如果我不需要所有字段，那很好，因为我可以控制在树枝模板中呈现哪些字段。如果我需要不在表单类中的字段，我可以将它们添加到模板中并根据需要处理表单数据。对于所有这些努力，我获得了一些内置的验证和灵活性，可以重用来自多个实体和捆绑包的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:04:54.307

虽然官方文档显示了许多直接链接到实体的表单示例，但我认为这不是最好的方法。在极少数情况下，当您的表单具有与您的实体完全相同的字段时，这很好。

您的表单必须代表您在浏览器中获得的内容，因此只有 html 输入/textearea/select。我通常创建一个 formData 类，就像一个实体，它包含验证约束并具有与表单相同的结构。

在加载表单之前，您必须使用持久数据初始化此 formData 对象，并在提交后，使用您的 formData 对象更新实体...

# css - Firefox 打印在第一页末尾切割画布，我如何让它不这样做？

> ID：10350688
> 
> 赞同：4
> 
> 时间：2012-04-27T12:33:24.723
> 
> 标签：css, image, firefox, google-chrome, printing

[http://fiddle.jshell.net/bTtKT/show/](http://fiddle.jshell.net/bTtKT/show/)

如果我在 Chrome 中将上述页面打印为 A4 Landscape，考虑到页面上画布的大小，我会按预期得到两页，但是如果我在 Firefox 中执行相同操作（例如打印预览），它只会给我一页和因此将图像/画布切成两半。如果我在 Firefox 中更改比例，但我确实开始看到整个图像（但它太小了），所以图像作为一个整体存在，但 Firefox 接缝忽略了它大于一页的原因。

如何让 Firefox 识别图像需要多于一页，以便我可以以正确的尺寸打印整个图像？

（可以在此处编辑上述页面示例：http: [//jsfiddle.net/bTtKT/](http://jsfiddle.net/bTtKT/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:19:00.893

我没试过，但你可以试试：

```
canvas { page-break-inside: avoid; } 
```

见：[https ://developer.mozilla.org/en/CSS/page-break-inside](https://developer.mozilla.org/en/CSS/page-break-inside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T11:46:26.200

将此样式放在包含画布的 div 上可能会对您有所帮助：

```
page-break-inside: avoid
clear: both
float: none 
```

# html - cufon 画布大小的问题

> ID：10350690
> 
> 赞同：1
> 
> 时间：2012-04-27T12:33:32.990
> 
> 标签：html, css, menu, cufon

我有一个测试站点[测试站点](http://b2b.tangent-design.com/)，我使用 cufon 在顶部导航菜单上显示字体，它工作正常，但是如果您导航到[博客部分](http://b2b.tangent-design.com/blog/)，菜单文本会受到干扰，我花了几个小时才弄清楚没有成功，任何想法如何让菜单字体像所有其他页面一样在博客部分对齐。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:43:00.107

我建议使用`@font-face`而不是 cufon。

它[几乎适用于所有浏览器](http://caniuse.com/#search=@font-face)（至少从 5.5 版开始支持 IE，耶）。

**[对于懒惰的人，谷歌在这里](http://www.google.com/webfonts)**有各种各样的免费网络字体

如果您想要一些特别的东西，您必须使用您选择的字体（如果您有版权或使用免费字体），并将其转换为您需要的格式（网络上有大量的转换器）。

之后，您可以查看[Paul Irish 的关于 @font-face 的文章](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)。你去吧。

实际上是这样的：

```
@font-face {
  font-family: 'Graublau Web';
  src: url('GraublauWeb.eot');
  src: local('☺'),
    url("GraublauWeb.woff") format("woff"),
    url("GraublauWeb.otf") format("opentype"),
    url("GraublauWeb.svg#grablau") format("svg");
} 
```

# c# - 替换字符串中的第一个匹配项

> ID：10350699
> 
> 赞同：3
> 
> 时间：2012-04-27T12:34:21.680
> 
> 标签：c#, .net, replace

我有这个字符串：

```
Hello my name is Marco 
```

我想用 . 替换第一个空格（`Hello`和之间`my`）`<br />`。只有第一个。

在 C#/.NET 3.5 上最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T12:38:08.737

```
 public static class MyExtensions
 {

   public static string ReplaceFirstOccurrance(this string original, string oldValue, string newValue)
    {
     if (String.IsNullOrEmpty(original))
        return String.Empty;
     if (String.IsNullOrEmpty(oldValue))
        return original;
     if (String.IsNullOrEmpty(newValue))
        newValue = String.Empty;
     int loc = original.IndexOf(oldValue);
     return original.Remove(loc, oldValue.Length).Insert(loc, newValue);
    }
} 
```

并像这样使用它：

```
string str="Hello my name is Marco";  
str.ReplaceFirstOccurrance("Hello", "<br/>");
str.ReplaceFirstOccurrance("my", "<br/>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T12:38:12.680

无需添加子字符串，以下只会找到第一个空间实例。来自[MSDN](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)：

> 报告此实例中第一次出现指定字符串的从零开始的索引。

```
 string x = "Hello my name is Marco";
  int index = x.IndexOf(" ");
  if (index >= 0)
  {
      x=x.Remove(index,1);
      x = x.Insert(index, @"<br />");
  } 
```

**编辑：**如果您不确定是否会出现空间，则必须进行一些验证。我已经相应地编辑了答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T12:36:18.643

```
string tmp = "Hello my name is Marco";
int index = tmp.IndexOf(" ");
tmp = tmp.Substring(0, index) + "<br />" + tmp.Substring(index + 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T12:38:05.843

给你，这会工作：

```
var s = "Hello my name is Marco";
var firstSpace = s.IndexOf(" ");
var replaced = s.Substring(0,firstSpace) + "<br/>" + s.Substring(firstSpace+1); 
```

你可以把它变成一个扩展方法：

```
public static string ReplaceFirst(this string input, string find, string replace){
  var first= s.IndexOf(find);
  return s.Substring(0,first) + replace + s.Substring(first+find.Length);
} 
```

然后用法是

```
var s = "Hello my name is Marco";
var replaced = s.ReplaceFirst(" ","<br/>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:37:47.517

```
string[] str = "Hello my name is Marco".Split(' ');
string newstr = str[0] + "<br /> " + string.Join(" ", str.Skip(1).ToArray()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-14T09:33:06.090

只需使用

> ```
> Replace("Hello my name is Marco", " ", "<br />", 1, 1) 
> ```

# internet-explorer - PIE 根本不适用

> ID：10350700
> 
> 赞同：0
> 
> 时间：2012-04-27T12:34:25.643
> 
> 标签：internet-explorer, behavior, css

所以我尝试使用 PIE.htc 为 IE7/8 渲染 box-shadow。我根据文档设置了所有内容，但无论是在 IE8 还是 7 中，它都不起作用，没有阴影。我四重检查了[css3 pie](http://css3pie.com/)上的文档和演示，我搜索了很多并分析了我的实现，但我只能找不到问题的根源。两个月前这里有另一个关于相同问题的线程，但也没有解决方案。我真的希望有人看到我可能做错了什么，哦，为了避免无用的评论，我已经尝试过使用 PIE.php，也不起作用。

附上一些图片以获取更多信息。

使用 IE 开发者工具进行检查 ![IE 开发者工具](../Images/4f537b892568cd32173aa34165386998.png)

直接获取源码 ![试图获取源](../Images/60340075cb780c2af454682b0d2086c4.png)

我的 CSS ![CSS](../Images/75cc781bdb3131887afc8ccbed8f7353.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:32:02.507

这真的很奇怪，经过一些（随机）调整后，它会在页面加载后突然被应用，但只是 10 次中的 1 次......当它被应用时，它会破坏一些按钮的布局（它们会无缘无故地缩小宽度） . 我们可能会将项目范围缩小到 IE8 中的无阴影按钮-...

# xml - XQuery - 单个文件或多个文件在任何 XML 数据库中都很好

> ID：10350706
> 
> 赞同：0
> 
> 时间：2012-04-27T12:34:49.407
> 
> 标签：xml, xquery, exist-db, basex

我有一个包含简历的巨大 XML 文件。该文件有两种格式，即一个包含所有简历的单个主文件

```
<Resumes>
  <Resume>
    <Name>ABC</Name>
    ......
    ......
  </Resume>
  <Resume>
    <Name>PQR</Name>
    ......
    ......
  </Resume>
  ......
  ......
</Resumes> 
```

和多个文件用于 ex-

文件 1-

```
<Resumes>
  <Resume>
    <Name>ABC</Name>
    ......
    ......
  </Resume>
</Resumes> 
```

文件-2

```
<Resumes>
  <Resume>
    <Name>PQR</Name>
    ......
    ......
  </Resume>
</Resumes> 
```

等等。

我想使用`baseX`XML `eXist`DB 来存储 XML。因此，将来，如果我想 **添加更多**简历（以 XML 格式），那么哪一个会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T00:03:56.377

对于 eXist-db，让我引用[Wolfgang Meier](http://exist-open.markmail.org/thread/byuzpoj7cyfmlqdo)在exist-open 上的一篇文章来回答类似的问题：

> 我认为没有理论上的限制，但肯定有一些**实际的考虑**。存储一个非常大的文档比存储许多小文档更能阻塞数据库。它需要单个事务（以及足够的磁盘空间用于事务日志）。
> 
> 我用于一些自动化性能测试的 dblp 参考书目是一个超过 600mb 的文档。如果您稍微增加缓存大小和内存设置，这将很好地加载。我知道其他用户必须处理更大的文档（许多 GB），**但是如果您有选择，我绝对会建议将您的数据拆分为更易于处理的小块。**

诚然，自 2009 年 11 月 Wolfgang 撰写这篇文章以来，eXist-db 变得更加高效和强大，但我认为他的建议仍然适用。最后的两个注意事项：

1.  确保您使用最新版本的 eXist，例如[1.4.2](http://atomic.exist-db.org/blogs/eXist/Release142)或[2.0 Tech Preview](http://sourceforge.net/projects/exist/files/Stable/2.0/)。这些受益于我所说的进步。

2.  要发挥 eXist-db 的最大性能，请阅读 eXist-db 文档文章，标题为[Performance Tuning](http://exist-db.org/exist/tuning.xml)。

# php - PHP 获取原始 HTTP 请求（php://input 不起作用）

> ID：10350708
> 
> 赞同：1
> 
> 时间：2012-04-27T12:34:58.450
> 
> 标签：php, apache, http, wampserver

我正在尝试访问在 PHP 中发送到服务器的原始 HTTP 请求。

但是，所有输入/输出流都不起作用。

我不能使用`php://input`，并且我不想“插入”来自数组的请求，例如`$_COOKIES, $_POST`等`$_POST, $_GET`，其他数组工作正常。我在 Windows 7 上使用 WAMPServer。

谁能帮我解决输入/输出流的问题或找到另一种获取原始请求数据的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:48:47.303

来自 PHP 文档：

> php://input 是一个只读流，允许您从请求正文中读取原始数据

这意味着您只能读取正文数据，而不是标题或原始请求。如果您在 Apache 下运行，则可以使用该函数`apache_request_headers`获取所有标头。要获得“请求”行（请求的第一行），我想您需要连接可以从 $_SERVER 变量中获得的字符串。

# c# - 为标记 ASP.NET 动态添加属性

> ID：10350719
> 
> 赞同：1
> 
> 时间：2012-04-27T12:35:37.537
> 
> 标签：c#, asp.net

我将如何在我的 ASPX 页面上查找（来自代码隐藏），然后向其中添加属性“runat=server”？我尝试过使用 第二个显然不起作用，因为 Head 标签没有 ID `Page.header.attributes.add(...)`。`(HtmlHead) Page.FindControl("head");`

我不知道如何更改此属性，也无法更改或向 ASPX 页面添加任何其他代码 - 例如 ID 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:42:31.510

不幸的是，这是不可能的。

该`runat="server"`属性允许后面的代码“看到”它所装饰的元素。如果页面标记中不存在该属性，则无法从后面的代码访问该元素，并且您将无法对其进行操作。

实现您想要的唯一方法是向页面标记中的元素添加`runat="server"`（可能还有一个`ID`属性）。只有这样，您才能从后面的代码中添加其他属性、事件处理程序等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:44:06.883

runat 指令是一个编译时指令。

您不能在运行时将属性添加到现有元素。

# c - 存储从 1 到 1000 的素数的链表

> ID：10350724
> 
> 赞同：2
> 
> 时间：2012-04-27T12:36:02.463
> 
> 标签：c, linked-list

正如您将在以下程序的注释中看到的那样，我应该创建一个列表来存储从 1 到 1000 的所有素数并释放节点。

其中只有两个功能是我的工作。但是，我已经很久没有弄清楚为什么这个程序不能编译了。各位看错了吗？这是一个已经交上来的作业，所以仅供我个人参考。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/* given data structure declaration */
struct record {
  int             data;
  struct record * next;
};

typedef   struct record   RecordType;

/* DO NOT MODIFY */
/* print a list */
void print_list(RecordType * list)
{
  RecordType * visitor = list;
  int count = 0;

  while (visitor != NULL)
  {
    printf("%d ", visitor->data);
    visitor = visitor->next;
    count++;
  }
  printf("\n");
  printf("There are %d items in the list.\n", count);
}

/* MY WORK HERE */
/* free every node in the list */
void free_list(RecordType * list)
{
    while (list->data != 2){
        free(list->next);
        list->next = list;
    }
}

/* MY WORK HERE */
/* this function may call other functions created by students */
/* create a list storing all prime numbers in [1, 1000] in ascending order */
/* return a pointer to the starting point of the list */
RecordType * create_list_prime_in_1_to_1000()
{
    RecordType * begin, *tail, *temp;
    int i = 0;
    begin = malloc(sizeof(RecordType));
    begin->data = 0;
    begin->next = NULL;
    tail = begin;
    while(i<1000){
        temp = malloc(sizeof(RecordType));
        temp -> data = ++i;
        tail -> next = temp;
        tail -> temp;
        tail -> next = NULL;
    }
}

int isPrime(int n){
    int d;

    for (d = 2; d < n; d = d + 1)
        if (n % d == 0)
            return 0;

    return 1;
}

/* DO NOT MODIFY */
/* main program */
int main(void)
{
  RecordType * start;

  /* create a linked list to store all the prime numbers in 1 - 10 */
  /* this is a naive way by hard-coding */

  start = malloc(sizeof(RecordType));
  start->data = 2;
  start->next = malloc(sizeof(RecordType));
  start->next->data = 3;
  start->next->next = malloc(sizeof(RecordType));
  start->next->next->data = 5;
  start->next->next->next = malloc(sizeof(RecordType));
  start->next->next->next->data = 7;
  start->next->next->next->next = NULL;

  print_list(start);

  free_list(start);

  /* i am expected to expected to build a list iteratively rather than hard-code */

  start = create_list_prime_in_1_to_1000();

  print_list(start);

  free_list(start);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:38:13.910

您已`tail`声明为：

```
RecordType * begin, *tail, *temp; 
```

并且`RecordType`作为：

```
struct record {
        int             data;
        struct record * next;
};    
typedef   struct record   RecordType; 
```

接下来你有：

```
tail -> temp; 
```

这不起作用，因为`RecordType`没有名为 temp 的成员。

我认为应该是：

```
tail = temp; 
```

**运行时错误的原因似乎是因为：**

```
void free_list(RecordType * list)
{
        while (list->data != 2){
                free(list->next);
                list->next = list;
        }
} 
```

这是不正确的。你需要类似的东西：

```
void free_list(RecordType * list)
{
        // keep going till there are nodes.
        while (list){
                // save the link to the rest of the nodes.
                RecordType *temp = list->next;

                // free the current node.
                free(list);

                // repeat the process starting at the next node.
                list = temp;
        }
} 
```

# google-app-engine - GAE WSGI 应用程序 URL 映射

> ID：10350728
> 
> 赞同：1
> 
> 时间：2012-04-27T12:36:20.153
> 
> 标签：google-app-engine

我有一个 App Engine 项目结构设置如下：

*   应用程序.yaml
*   索引.yaml
*   主文件
*   静态 [目录]
    *   索引.html
*   应用程序 [目录]
    *   脚本1.py
    *   脚本2.py

我的 app.yaml 看起来像这样

```
application: appname
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /(.*\.html)
  mime_type: text/html
  static_files: static/\1
  upload: static/(.*\.html)
  expiration: "1h"

# application scripts
- url: /app/(.+)
  script: main.py

# index files
- url: /(.+)/
  static_files: static/\1/index.html
  upload: static/(.+)/index.html
  expiration: "15m"

- url: /(.+)
  static_files: static/\1/index.html
  upload: static/(.+)/index.html
  expiration: "15m"

# site root
- url: /
  static_files: static/index.html
  upload: static/index.html
  expiration: "15m"

libraries:
- name: webapp2
  version: "2.5.1" 
```

我的 main.py 只是默认的“Hello World”示例应用程序：

```
#!/usr/bin/env python
import webapp2

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('Hello world!')

    #print("Executing script!")
app = webapp2.WSGIApplication([(r'/app/(.*)', MainHandler)],
                              debug=True) 
```

现在，可以按预期访问静态 html。映射到 app.yaml 中指定的 main.py 脚本的 url 有效，我知道该脚本正在执行。我遇到的问题是在 main.py 中指定到 WSGIApplication 的 URL 映射。我希望能够使用 url 访问应用程序脚本： localhost:808x/app/something 我已经尝试过使用以下模式：

```
r'/app/(.*)'
r'/(.*)'
r'/'
r'/app/' 
```

上述模式都不会导致调用“get”响应处理程序（即我没有得到“Hello World”响应）。我已经尝试从文档中收集我做错了什么。我认为这一切都归结为我刚刚开始掌握正则表达式。有人可能会指出我需要将应用程序处理程序映射到什么模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:52:39.397

这个图案怎么样？

```
r'/app/.*' 
```

如果有任何正则表达式分组，则需要视图函数的参数。

此外，如果您以 .py 之类的形式指定脚本，则需要在 main.py 中添加 main() 函数`main.py`。main() 函数如下所示：

```
from google.appengine.ext.webapp.util import run_wsgi_app
...
...
def main():
    run_wsgi_app(app)

if __name__ == '__main__':
    main() 
```

您也可以使用此表格：

```
script: main.app 
```

使用后一种形式，您不需要 main() 函数。

# php - 选择所有匹配两个字段并使用 mysql 按这两个字段分组

> ID：10350734
> 
> 赞同：4
> 
> 时间：2012-04-27T12:36:50.890
> 
> 标签：php, mysql, select, grouping

我有一个消息系统，它兼作消息系统和聊天系统，它们由一个称为源的字段来区分。

我有消息部分正确排序和分组但是在聊天部分它没有相应地分组，请参阅下面的我的 SQL：

```
SELECT * 
FROM messages
WHERE ( senderID = "1" OR receiverID = "1" ) 
AND source = "1" 
GROUP BY receiverID, senderID 
ORDER BY addedDate DESC LIMIT 10 
```

所以我期望的结果是每场比赛只有一场，即每场对话一场

但是由于某种原因我得到了两个。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:42:35.570

每次聊天您可能会得到两个答案，因为您会让每个人都担任两个职位

```
ChatID  Sender Receiver
1       1      2
2       2      1
3       1      2
4       2      1

So, you'll have a record grouped by 
Sender / Receiver
1        2         and
2        1 
```

我认为您正在寻找的是对话中不同的人，无论他们处于什么位置，上述内容都应该被视为“一次聊天”。为了纠正这个问题，我会做类似的事情......

```
select 
      PreQuery.*,
      m2.Message,
      m2.SenderID,
      m2.ReceiverID
   from
      ( SELECT 
              if( m.senderID < m.receiverID, m.senderID, m.receiverID ) as Person1,
              if( m.senderID < m.receiverID, m.receiverID, m.senderID ) as Person2,
              max( m.ID ) as LastMessageIDPerChat,
              max( m.AddedDate ) as LastMessageDate
           FROM 
              messages m
           WHERE 
                  m.Source = "1"
              AND "1" IN ( SenderID, ReceiverID )
           GROUP BY
              Person1, 
              Person2
           ORDER BY 
              m.AddedDate DESC 
           LIMIT 10 ) PreQuery

         JOIN Messages m2
            on PreQuery.LastMessageIDPerChat = m2.ID 
```

这将确保 ID 较低的始终位于第一位，而 ID 较高的人始终位于第二位，以防止上述错误重复。

另请注意... GROUP BY 通常期望所有非分组依据字段与某些聚合相关联，否则，它将仅获取具有限定条件的记录的第一个实例。因此，如果您想在不同日期的对话中包含相同的人，您需要将“AddedDate”添加到组中，以便它可以...

```
Person1   Person2  on 4/20
Person1   Person3  on 4/20
Person3   Person4  on 4/20
Person1   Person2  on 4/18
Person1   Person5  on 4/17
Person3   Person4  on 4/15 
```

为了获得最后发送者的状态，我必须包装每个对话配对人的查询并获取该对话的最后一个 ID。然后，将其重新加入该 ID 上的消息（如果 ID 实际上是消息表的主键 ID，请根据需要进行调整）。从加入中，我可以获得对话的最后一条消息，以及该交易的发件人 ID 和收件人 ID 是谁（以及您想要从现在的别名“m2”参考中获得的任何其他数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:52:55.927

您确定您的 ID 不是整数吗？

```
SELECT
    receiverID,
    senderID,
    MAX(addedDate) as maxAddedDate
FROM 
    messages 
WHERE 
    ( 
        senderID = 1
        OR receiverID = 1 
    )  
    AND source = 1
GROUP BY
    receiverID, 
    senderID  
ORDER BY 
    addedDate DESC 
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:45:31.370

看一下这个。

```
SELECT
    receiverID,
    senderID,
    MAX(addedDate) as maxAddedDate
FROM messages 
WHERE ( senderID = 1 OR receiverID = 1) AND source = 1
GROUP BY receiverID, senderID  
ORDER BY addedDate DESC 
```

您没有提到分组字段的任何聚合。

如果您根据任何分组字段有多个记录，那么应该发生什么？

你应该有总和，计数，...

# html - IE中不显示标题标签

> ID：10350735
> 
> 赞同：0
> 
> 时间：2012-04-27T12:36:58.290
> 
> 标签：html, css, cross-browser

在[http://ginc.brokencogsolutions.com/](http://ginc.brokencogsolutions.com/)我们正在为某人构建一个演示站点，但 h1、h2 等没有出现在 IE 中。

这和我的造型有关系吗？我不认为这是字体问题，但我可能是错的。到目前为止，这似乎是我发现的唯一差异。

[http://ginc.brokencogsolutions.com/css/style.css](http://ginc.brokencogsolutions.com/css/style.css)是样式表，如果有人愿意查看它并引导我朝着正确的方向前进。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T13:19:56.920

cufon 的问题。为什么你使用cufon，请使用字体

# android - 在多个 gmail 处于活动状态时处理 C2DM 注册

> ID：10350739
> 
> 赞同：1
> 
> 时间：2012-04-27T12:37:14.660
> 
> 标签：android, android-c2dm

假设我有一台使用 2 个 gmail 帐户登录的设备。A@gmail.com 和 B@gmail.com。我创建了一个页面来检索所有活动的 gmail 并允许用户选择使用哪个。但是，在用户决定使用哪个电子邮件后，我应该如何处理所选帐户？

除了执行以下代码之外，我还应该做什么？

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); // boilerplate
registrationIntent.putExtra("sender", roleEmail);
startService(registrationIntent); 
```

我还查看了 ChromeToPhone 示例，根据他们的代码，选定的帐户名称被保存到 SharedPreferences 中，我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:14:56.043

您为此收到了错误的电子邮件，您没有使用用户电子邮件发送 C2DM，您创建了一个新的 gmail，然后您将其与服务器以及您的应用程序一起使用来发送消息，而不是用户个人的 gmail。所以简而言之，所有用户都可以使用 1 gmail。

你应该多读一些：[https ://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

# c# - MVVM 模式和依赖孩子

> ID：10350746
> 
> 赞同：1
> 
> 时间：2012-04-27T12:37:33.943
> 
> 标签：c#, wpf

我正在使用 MVVM 并且（仍然 - 我对它很陌生）在模式上有点挣扎。我有一个名为 Mission 的对象，它有 2 个孩子，网络和平台。一个任务可能有 1 到多个平台，并且有 1 或 2 个网络（主要的始终存在，备选的网络是可选的）。有一个名为 NetworkPlatform 的 Network and Platform 的子节点，其数量取决于平台和网络的数量 - 如果有 5 个平台并且他们没有定义备用网络，则将有 5 个 NetworkPlatforms，否则为 10 个。所以如果一个添加了平台 我需要添加一个或两个网络平台，具体取决于替代网络是否存在。同样，如果他们选择定义以前不存在的备用网络，我需要为每个平台添加一个网络平台。同上删除。

我有一种用于任务的伞视图模型，它实例化一些像这样的子视图模型

```
public MissionFullDataViewModel(Mission mission):base(mission)
{
MissionVM = new MissionViewModel(mission);
PlatformsVM = new PlatformsViewModel(mission);
PrimaryNetworkVM = new NetworkViewModel(mission, mission.PrimaryNetwork);
//AlternateNetworkVM = new NetworkViewModel(mission, mission.AlternateNetwork);
} 
```

我已经评论了备用的，因为我还不太确定如何处理它。用户可能会通过复选框表明他们想要一个，但该应用程序也将用于显示现有数据，因此需要确定备用数据是否存在。还不太确定。

我正在处理 NetworkViewModel 中的 NetworkPlatforms，它们是这样的 observablecollection：

```
private ObservableCollection<NetworkPlatform> networkPlatforms;
public ObservableCollection<NetworkPlatform> NetworkPlatforms
{
get
{
    if (networkPlatforms == null)
    {
          networkPlatforms = new ObservableCollection<NetworkPlatform>(Network.NetworkPlatforms);
    }
        return networkPlatforms;
    }
}
} 
```

我显然需要编写一些方法来从该集合中添加和删除 NetworkPlatform。我的平台是 PlatformsViewModel 中的一个可观察集合。我有一个数字微调器供用户指定平台数量和一个添加新平台或删除最后 x 平台的函数，如下所示：

```
private void ResyncPlatforms(int newValue)
    {
        int oldValue = this.Platforms.Count;
        int diff = newValue - oldValue;
        if (diff > 0)
        {
            for (var i = 0; i < diff; i++)
            {
                var newPlatform = new Platform();
                newPlatform.Mission = Mission;
                this.Platforms.Add(newPlatform);
                missionRepository.AddPlatformToMission(Mission, newPlatform);//TODO need to tell the Network VM to add a network platform
            }
        }
        else
        {
            for (var i = 0; i > diff; i--)
            {
                var platToRemove = Platforms.Last();
                this.Platforms.Remove(platToRemove);
                missionRepository.RemovePlatformFromMission(Mission, platToRemove);//TODO need to tell the Network VM to remove network platform
            }
        }
    } 
```

存储库是 LINQToSQL 后端的带有 CRUD 选项的包装器。Add...和 ​​Remove... 方法告诉数据库在提交时插入/删除（当用户保存时）。

那么，当 PlatformsVM 在重新同步方法中添加/删除平台时，如何让我的 NetworkVM 添加/删除 NetworkPlatforms？

我知道我可以让我的 Resync 函数调用 NetworkViewModel 中的方法，这将添加和删除 networkplatforms 它的集合，并且当用户打开或关闭备用网络时，我可能会在伞形视图模型中执行类似的操作。但我认为必须有更好的方法，因为这样做我的 Platforms VM 需要访问主要和备用（如果存在）网络的 NetworkviewModels，而当备用网络时我真的不知道该怎么做网络打开和关闭。

让我的networkviewmodel监听PlatformVM的Platforms observable集合的变化会更好吗？如果是的话怎么做？

我不太清楚该怎么做，希望能得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:53:38.177

很抱歉，但我真的无法完全按照您的要求进行操作。有什么办法可以让它更简洁一点吗？

> 让我的networkviewmodel监听PlatformVM的Platforms observable集合的变化会更好吗？如果是的话怎么做？

现在这个我可以回答了。ObservableCollection 是可观察的。它会在添加和删除内容时发出 CollectionChanged 事件，因此只需订阅该事件并做出相应反应：

```
private void SubscribeToPlatformChanges()
{
    ((INotifyCollectionChanged)_PlatformVM.Platforms).CollectionChanged += (s, e) =>
    {
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:   //platforms were added - use e.NewItems
            case NotifyCollectionChangedAction.Add:   //platforms were removed - use e.OldItems
            case NotifyCollectionChangedAction.Reset: //all platforms were removed
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:03:27.727

正确，这最好使用 .NET 中的事件系统的观察者模式来处理。您可以：

*   `PlatformsViewModel`向(think `PlatformAdded`& `PlatformRemoved`)添加新事件
*   或使用现有的`ObservableCollection`

这两种方法之间的区别在于，在第二种方法中，您`NetworkViewModel`将更多地耦合到`PlatformsViewModel`- 即。它需要知道它是如何存储平台的，并且这个存储是它可能需要处理的事件的可观察集合。

请注意，如果您的聚合视图模型`MissionFullDataViewModel`（

无论哪种方式，您都应该使用聚合视图模型来绑定这两个对象，例如：

```
public MissionFullDataViewModel(Mission mission):base(mission)
{
     MissionVM = new MissionViewModel(mission);
     PlatformsVM = new PlatformsViewModel(mission);
     PrimaryNetworkVM = new NetworkViewModel(mission, mission.PrimaryNetwork);

     // #1: direct binding -- tightly coupled
     PlatformsVM.Platforms.CollectionChanged += NetworkVM.PlatformsChangedHandler;
     // #2: direct binding -- less tightly coupled
     PlatformsVM.PlatformAdded += NetworkVM.PlatformsChangedHandler;
     PlatformsVM.PlatformRemoved += NetworkVM.PlatformsChangedHandler;
     // #3: indirect binding -- less tightly coupled
     PlatformsVM.Platforms.CollectionChanged += this.HandlePlatformsChange;
     // #4: indirect binding -- loosely coupled
     PlatformsVM.PlatformAdded += this.HandlePlaftormsChange;
     PlatformsVM.PlatformRemoved += this.HandlePlatformsChange;
} 
```

`HandlePlatformsChange`作为一种*中介模式*实用程序；`PlatformsVM`它可能会在最终调用适当的方法之前准备来自事件的数据`NetworkVM`。

In the last scenario, nobody knows anything - just the required data to perform task. And this is approach I'd suggest. Platforms and Networks don't need to know much about one another and *coupling logic* is performed by entity that knows about those two either way - `MissionFullDataViewModel`.

# javascript - 检测移动浏览器

> ID：10350750
> 
> 赞同：-1
> 
> 时间：2012-04-27T12:37:50.643
> 
> 标签：javascript, mobile, jquery-mobile

我正在为我的网站完成一个移动版本，我正在使用 JQueryMobile 进行编码，所以我必须对移动网站进行重定向，但由于有很多不支持 JQuery Mobile 的旧手机，我想为移动网站制作另一个版本只使用css和html。有什么方法可以检测旧手机和智能手机并重定向到不同的网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:29:50.447

尝试使用第三方应用程序，例如[CodePlex 上列出的](http://51degrees.codeplex.com/)51 度移动检测框架。在您的解决方案中实施它时，网站上有大量文档可供使用。

# maven - Maven Github 存储库 + Artifactory

> ID：10350753
> 
> 赞同：3
> 
> 时间：2012-04-27T12:38:00.760
> 
> 标签：maven

我在这里的服务器中运行了一个工件，并且我的 settings.xml 配置为使用它有一个镜像。

但是，我使用的一个 dep 在[github 页面](https://github.com/gwtbootstrap/maven/)中，并且似乎人工制品没有得到它，因为它让我“无法下载等等。”。

我尝试在 Artifactory 远程存储库中添加存储库，单击测试，它向我显示了

> 连接失败：错误 403：禁止

我正在使用正确的 URL（我认为）： http: [//gwtbootstrap.github.com/maven/snapshots](http://gwtbootstrap.github.com/maven/snapshots)

有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:11:58.563

我认为网址应该是：

*   [https://github.com/gwtbootstrap/maven/tree/gh-pages/snapshots](https://github.com/gwtbootstrap/maven/tree/gh-pages/snapshots)

# c++ - libstdc++ 中 basic_filebuf 的默认缓冲区大小

> ID：10350759
> 
> 赞同：2
> 
> 时间：2012-04-27T12:38:32.533
> 
> 标签：c++, buffer

有谁知道来自 GNU GCC 的 libstdc++ 中 basic_filebuf 的默认缓冲区大小？我知道成员函数 pubsetbuf() 并且我很确定缓冲区大小是实现定义的。在 C 中很简单，从`<cstdio>`.

也许变量被称为**extern_buf**、**XSIZE**、**intern_buf**或**ISIZE**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:48:13.907

我找到了。C++ 从 C 中获取 BUFSIZ（请参阅 参考资料）。文件**fstream**和**fstream.tcc**包括类**basic_filebuf**。

注意：来自 GCC 的 LIBSTDC++

来自文件**fstream**

```
#include <istream>
#include <ostream>
#include <bits/codecvt.h>
#include <cstdio>             // For BUFSIZ
#include <bits/basic_file.h>  // For __basic_file, __c_lock
#ifdef __GXX_EXPERIMENTAL_CXX0X__
#include <string>             // For std::string overloads.
#endif

/**
 *  Actual size of internal buffer. This number is equal to the size
 *  of the put area + 1 position, reserved for the overflow char of
 *  a full area.
 */
size_t          _M_buf_size; 
```

来自文件**fstream.tcc**

```
template<typename _CharT, typename _Traits>
    basic_filebuf<_CharT, _Traits>::
    basic_filebuf() : __streambuf_type(), _M_lock(), _M_file(&_M_lock),
    _M_mode(ios_base::openmode(0)), _M_state_beg(), _M_state_cur(),
    _M_state_last(), _M_buf(0), _M_buf_size(BUFSIZ),
    _M_buf_allocated(false), _M_reading(false), _M_writing(false), _M_pback(), 
    _M_pback_cur_save(0), _M_pback_end_save(0), _M_pback_init(false),
    _M_codecvt(0), _M_ext_buf(0), _M_ext_buf_size(0), _M_ext_next(0),
    _M_ext_end(0)
    {
      if (has_facet<__codecvt_type>(this->_M_buf_locale))
    _M_codecvt = &use_facet<__codecvt_type>(this->_M_buf_locale);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T13:58:49.370

**8 KB**

它可能因实现而异。由于我开始了一个新的个人项目，我自己对此感到好奇。我的搜索开始于`stdio.h`彼得的回答。一个简单的：

`cat /usr/include/stdio.h | grep -i bufsiz`产生了重新定义。

`grep -rwnl /usr/include/ -e`首先`_IO_BUFSIZ`（在 中定义`libio.h`）被附加，然后`_G_BUFSIZ`（在 中定义`_G_config.h`）。重新定义止步于此。

`grep -i _g_bufsiz /usr/include/_G_config.h`

# python - 使用 Cython 重载 Python 数学函数

> ID：10350765
> 
> 赞同：9
> 
> 时间：2012-04-27T12:39:14.433
> 
> 标签：python, cython

这是我的基本问题：

我有一个导入的 Python 文件

```
from math import sin,cos,sqrt 
```

我需要这个文件仍然 100% 兼容 CPython，以允许我的开发人员编写 100% CPython 代码并使用为 Python 开发的出色工具。

现在输入 Cython。在我的 Python 文件中，三角函数被调用了数百万次（代码的基础，无法更改）。有什么方法可以通过主 python 文件中的一些 Python-fu 或 Cython 魔法，否则我可以使用 C/C++ 数学函数，使用 Cython 代码的一些变体

```
cdef extern from "math.h":
    double sin(double) 
```

这会给我带来接近 C 的性能，这太棒了。

[Stefan 的演讲](http://www.behnel.de/cython200910/talk.html)特别说这不能做，但是演讲已经有两年了，而且有很多有创造力的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T16:21:01.837

在 Cython 文档的[示例](http://docs.cython.org/src/tutorial/external.html)中，他们使用 C 库中的 cimport 来实现此目的：

```
from libc.math cimport sin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:57:32.147

我不是 Cython 专家，但 AFAIK，你所能做的就是写一个 Cython 包装器`sin`并调用它。不过，我无法想象这真的会比 快`math.sin`，因为它仍然使用 Python 调用语义——开销在于调用函数的所有 Python 内容，而不是实际的三角计算，使用时在 C 中完成CPython 也是。

您是否考虑过使用[Cython 纯模式](http://docs.cython.org/src/tutorial/pure.html)，这使得源 CPython 兼容？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-12T19:51:55.807

八年后回答这个问题，这就是我在 Ubuntu 19.10 上使用来自 Ubuntu 存储库的系统 CPython vesion 3.7.5 和 Cython3 版本 0.29.10 的方法。

[有关纯 Python 模式](https://cython.readthedocs.io/en/latest/src/tutorial/pure.html)的 Cython 文档给出了一个有效的示例。它看起来与此处旧答案中的示例有些不同，所以我猜该文档已经更新了。

Python 文件需要*条件*导入，使用普通 CPython 可以正常工作：

```
#!/usr/bin/env python3
# from: https://cython.readthedocs.io/en/latest/src/tutorial/pure.html
# mymodule.py

import cython

# override with Python import if not in compiled code
if not cython.compiled:
    from math import sin

# calls sin() from math.h when compiled with Cython and math.sin() in Python
print(sin(0.5)) 
```

Cython 语言结构必须放在同名但后缀为“.pxd”的文件中：

```
#cython: language_level=3
# from: https://cython.readthedocs.io/en/latest/src/tutorial/pure.html
# mymodule.pxd

# declare a C function as "cpdef" to export it to the module
cdef extern from "math.h":
    cpdef double sin(double x) 
```

我使用“--embed”选项为独立的 Linux ELF 可执行文件创建 C 代码来测试它。GCC 编译器行需要“-lm”来导入包含 sin 的数学模块。

```
cython3 --embed mymodule.py

gcc -o mymodule mymodule.c -I/usr/include/python3.7 -lpython3.7m -lm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:16:54.883

我可能误解了您的问题，但[Cython 与外部 C 代码接口的文档](http://docs.cython.org/src/userguide/external_C_code.html#resolving-naming-conflicts-c-name-specifications)似乎建议使用以下语法：

```
cdef extern from "math.h":
    double c_sin "sin" (double) 
```

它为函数提供`sin`了 C 代码中的名称（以便它正确链接到来自 的函数`math.h`）和`c_sin`Python 模块中的名称。不过，我不确定我是否理解在这种情况下实现了什么 - 为什么要`math.sin`在 Cython 代码中使用？你有一些静态类型的变量和一些动态类型的变量吗？

# javascript - 创建内部 HTML 以附加到 div

> ID：10350767
> 
> 赞同：0
> 
> 时间：2012-04-27T12:39:16.800
> 
> 标签：javascript

我正在创建一个 Javascript 类

课是这个

```
(function(window){

    function Person(id,name,position,imageUrl){

    this.id = id;
    this.name = name;
    this.position = position;
    this.imageUrl = imageUrl;

    }

    Person.prototype.getPersonDiv = function(){

      var persondiv; 

    }

}(window)); 
```

我正在使用这个类来动态创建一个 div。div的基本结构会是这样的

```
<div id = "employee1" class = 'person-profile'>

 <div class = 'avatar'>
   <img src = ""/>
 </div>

 <div class = 'employee-details'>
   <p>this.id <br/> this.name <br/> this.position<p>   
 </div>

</div> 
```

div idemployee1 将通过连接字符串“employee”和id（类的属性）来创建。同样，img url 应该来自 imageUrl（类的属性）。同样，所有员工的详细信息。

我打算将它写为内部 HTML 或附加。我似乎无法使字符串正确。

该字符串将写入 getPersonDiv 函数中的 persondiv 变量，并在我调用该函数时返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:50:40.283

你可以尝试这样的事情，使用某种 javascript 微模板：

```
(function(window){

    function Person(id,name,position,imageUrl){

    this.id = id;
    this.name = name;
    this.position = position;
    this.imageUrl = imageUrl;

    }

    Person.prototype.getPersonDiv = function(){
      var _this = this;

      /* create basic person template */
      var personTPL = "<div class = 'employee-details'>"
          + "<p>{id}<br/>{name}<br/>{position}<p></div>";

      /* change any placeholder with instance properties */
      return personTPL.replace(/\{([^}]+)\}/g, function(tpl, key) {
             return  _this[key] || "undefined"
          });  
    };

     var me = new Person("10", "Fabrizio", "javascriptmonkey", "http://...");

     /* return HTML */
     console.log(me.getPersonDiv());

     /** e.g.
      *
      * <div class = 'employee-details'><p>10<br/>
      * Fabrizio<br/>javascriptmonkey<p></div>  
      */
}(window)); 
```

小提琴示例：http: [//jsfiddle.net/6qZg5/](http://jsfiddle.net/6qZg5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:52:10.787

你在寻找这样的东西[吗](http://jsfiddle.net/YHZBS/1/)？
如果是这样，您需要通过将一些预定义的 html 标记与您的人员数据连接起来来动态创建 div：

```
Person.prototype.getPersonDiv = function(){
 return '<div id = "employee1" class = "person-profile"> <div class = "avatar"> <img src = "'+ this.imageUrl +'"/> </div> <div class = "employee-details"> <p>' + this.id + '<br/>' + this.name + ' <br/>' + this.position + '<p> </div> </div>'; 
} 
```

我建议你看看一些 javascript 模板引擎。这是使用 john resig 的微模板引擎的演示：http: [//jsfiddle.net/YHZBS/2/](http://jsfiddle.net/YHZBS/2/)。

希望对你有效。

# javascript - 使用 jQuery/JavaScript 生成元描述和关键字

> ID：10350782
> 
> 赞同：0
> 
> 时间：2012-04-27T12:40:07.210
> 
> 标签：javascript, jquery, meta-tags

我想在我的页面中包含一个 javascript/jquery 脚本，该脚本将自动从特定元素的内容生成元描述。但我不知道从哪里开始。这里有人可以指导我完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:43:33.827

就像创建一个新的元标记一样简单，将它的 name 属性和 value 属性设置为目标元素的内容

```
$('<meta />').attr({
  name: 'description',
  value: $('#idOfElementWidthDescriptionContent').text()
}).appendTo('body'); 
```

# php - 自动完成插件未在 php jquery 中传递值

> ID：10350790
> 
> 赞同：0
> 
> 时间：2012-04-27T12:40:34.880
> 
> 标签：php, jquery, autocomplete

我正在使用自动完成

[http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)

下面我有两页`index.php`和`ajx_page.php`

## 索引.php

```
<form name="send_coup_ajx_form" id="send_coup_ajx_form" method="post">

    <select name="member_type" id="member_type">
        <option value="customer_type">Customer</option>
        <option value="BPartner_type">Business Partner</option>                
    </select>

    <input type="text" name="sel_rad" id="resultant_text" />

    <input type="submit" name="submit" value="go" />

</form>

<script type="text/javascript">
    $(document).ready(function(){

        $("#resultant_text").autocomplete("ajx_page.php", {
            width: 260,
            matchContains: true,
            //mustMatch: true,
            //minChars: 0,
            //multiple: true,
            //highlight: false,
            //multipleSeparator: ",",
            selectFirst: false
        });

    });

</script> 
```

下面的代码

## ajx_page.php

```
<?php
    $select_type = $_GET['member_type'];
    $type = $_GET['sel_rad'];
?> 
```

当我在文本框中输入时，它给了我一个错误

`Notice: Undefined index: member_type in ajx_page.php on line 2`

这意味着`member_type`不会进入该页面..

当我评论所有这些代码并将下面的代码放入`ajx_page.php`

```
<?php
    echo "Name1\n";
    echo "Name2\n";
    echo "Name3\n"
?> 
```

它显示自动完成功能列表。但是当我想获取该对象的值时，`member_type`它说的是一个错误..

**那么我如何使用这个自动完成插件传递额外的值**

我已将图像添加到 @veeTrain 覆盖问题

![在此处输入图像描述](../Images/31162fcccc56f26c911e44b700e01629.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:50:23.543

我认为为 bassistance 的自动完成传递附加参数，唯一的方法是修改 autocomplete.js 文件。我以前做过类似的事情，但是方法是相当硬编码的。贴在下面供您参考（大约在第 376 行）：

```
$.ajax({
    // try to leverage ajaxQueue plugin to abort previous requests
    mode: "abort",
    // limit abortion to this input
    port: "autocomplete" + input.name,
    dataType: options.dataType,
    url: options.url,
    data: $.extend({
        member_type: ($("#member_type").length != 1)?$("#member_type").val():-1,
        q: lastWord(term),
        limit: options.max
    }, extraParams),
    success: function(data) {
        var parsed = options.parse && options.parse(data) || parse(data);
        cache.add(term, parsed);
        success(term, parsed);
    }
}); 
```

我只在原始代码中添加了一行，在第 10 行：`member_type: ...`。请注意，如果在该页面上找不到该对象，我会传入“-1”以防止 javascript 错误。希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:05:00.457

我不确定自动完成插件是否旨在处理这种类型的场景。

但是，如果您想手动将这些值传递到您的 php 脚本中，那么它会非常简单（至少在这种情况下，您只尝试发送两个字段）。

```
var memberType = $("#member_type>option:selected").val();
var selRad = $("#resultant_text").val();
$("#resultant_text").autocomplete("ajx_page.php?member_type="+memberType+"&sel_rad="+selRad, {
//... 
```

但这可能不是您正在寻找的答案。

**更新**：我很高兴发送值的语法对您有用。

看起来你有重叠的 id 被打印出来——这就是你所说的“粗体”吗？显然，您没有使用正确的分隔符来创建第二个自动完成建议。我不确定自动完成处理程序想要在项目之间描述什么。未定义可能会出现，因为找不到您的项目之一。您应该使用浏览器的开发人员工具来调试发送的内容。

此外，如果您想要选项的文本而不是 the，`value`那么您需要访问select 下拉菜单的`.text()`而不是 the 。`.val()`

**更新**：[这篇文章](https://stackoverflow.com/questions/9296842/jquery-autocomplete-with-php-source)可能对自动完成的期望有什么要说的。

# java - 如何在非事务数据库中实现事务

> ID：10350791
> 
> 赞同：0
> 
> 时间：2012-04-27T12:40:37.450
> 
> 标签：java, database, transactions

如何在非事务数据库中实现事务。

1）请解释如何在java端做到这一点。

注意：我将分享我为寻找答案所做的努力。

假设您在单个事务中有两个插入和两个更新。所以你将有四个线程执行每条指令，一个线程将监控它们。如果其中一个线程出现任何故障，那么监控线程将取消所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:50:14.510

参与事务的每个线程都被赋予一个事务 id。您需要创建一个他们可以写入的结构，以跟踪数据（或键）以撤销更改。

就像一个真实的数据库一样，当你进行更新时，需要存储更改前的数据和记录更改后的数据。您需要这个，因为您可能需要它来查找记录。

插入要容易一些，只需删除记录。

删除也需要存储之前删除的数据。

因此，您创建的任何结构都需要一个事务 ID、一个表名和一个列数据列表（可以是字符串的映射、存储列名的对象、列数据）。

这应该是一个不错的开始...

# java - java、linux开发机中的苹果推送通知服务

> ID：10350792
> 
> 赞同：0
> 
> 时间：2012-04-27T12:40:40.460
> 
> 标签：java, ios, linux, ssl, apple-push-notifications

我正在使用 mac 开发移动应用程序，但它连接到我在 linux 上运行的测试服务器，我想使用开发人员证书在此服务器上启用 APN，问题是，是否可以安装它我的测试服务器上的证书还是我必须在我的 linux 机器上设置测试服务器？

为了更清楚一点：

我的开发机器：Mac。测试服务器：一台运行 liferay 6.0.6 的 linux 机器

我想在测试服务器上安装开发证书，以便测试推送通知。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:53:22.837

我对“liferay”一无所知，但这就是我使用证书设置 APN 连接（在 Rails 服务器上）的方式。请注意，您需要将证书转换为 .pem 文件（使用 'openssl pkcs12 -in myfile.p12 -out myfile.pem'）：

```
 @@apn_cert       = nil
  APN_SSL_KEY_FILE = 'lib/SSLCert_Private_Key.pem'
  APN_SSL_HOST     = 'gateway.sandbox.push.apple.com'
  #  APN_SSL_HOST     = 'gateway.push.apple.com'
  APN_SSL_PORT     = 2195
  APN_SSL_PASSWORD = '<password>'

  def configure_apn_cert
    puts "APN Service: Configuring APN cert"
    @@apn_cert         = File.read(File.join(RAILS_ROOT, APN_SSL_KEY_FILE))
    @@apn_context      = OpenSSL::SSL::SSLContext.new
    @@apn_context.key  = OpenSSL::PKey::RSA.new(@@apn_cert, APN_SSL_PASSWORD)
    @@apn_context.cert = OpenSSL::X509::Certificate.new(@@apn_cert)
  end

  def create_and_configure_apn_server
    configure_apn_cert if not @@apn_cert
    puts "APN Service: Configuring APN SOCKET and SSL connection"
    @apn_socket       = TCPSocket.new(APN_SSL_HOST, APN_SSL_PORT)
    @apn_ssl          = OpenSSL::SSL::SSLSocket.new(@apn_socket, @@apn_context)
    @apn_ssl.sync     = true
    @apn_ssl.connect
  end

  def close_apn_server
    @apn_ssl.close
    @apn_socket.close
  end

  def package_build_for_apn( token, content )
    "\0\0 #{token}\0#{content.length.chr}#{content}"
  end

  def package_send_to_apn( package )
    puts "APN Service: Sending #{package}"
    bytes_written = @apn_ssl.write( package )

    if bytes_written != package.length then
      puts "APN Service: SSL write failed"
      package_to_apn_show_write( bytes_written, package)
    end
  end

  def apn_deliver_payload( token, payload )
    # Convert the device string back into a byte string
    tokenBinary = Base64.decode64( token )

    # Transform the payload into an APN byte string
    apn_content      = payload.to_hash.to_json
    apn_content_len  = apn_content.length

    # Build the apn_package per APN specification
    apn_package = "\0\0 #{tokenBinary}\0#{apn_content_len.chr}#{apn_content}"

    # Actually send it.
    package_send_to_apn( apn_package )
  end

  def package_to_apn_show_write( bytes, package)
    puts "Wrote: #{bytes_written}/ Tried: #{package.length}"
    puts "Package: '#{package}'"
  end

  def package_to_apn_debug( token, content, package )
    puts "Token(#{token.length}): #{token}"
    puts "Content(#{content.length}): #{content}"
    puts "Package(#{package.length}): #{package}"
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:02:38.417

我想回答我自己的问题，因为它可能对某人有所帮助，首先，我在需要生成的证书和如何获取设备令牌之间存在严重的混淆。

这些是我完成这项工作的步骤：

*   创建了一个应用程序 ID。
*   使用“钥匙串访问”创建了一个证书签名请求，并获得了我再次使用钥匙串访问安装​​的推送通知的开发证书。
*   将证书导出为 .p12 文件。
*   使用 notnoop java 库（位于中央 maven 存储库）发送推送通知。

这是一个示例片段，显示了证书适合的位置：

```
ApnsService service =
    APNS.newService()
    .withCert("/path/to/certificate.p12", "MyCertPassword")
    .withSandboxDestination()
    .build(); 
```

该方法的第二个参数是钥匙串访问让您设置的 p12 文件的密码。

最后，为了粘合，我使用`[UIApplication sharedApplication]`实例注册接收推送通知，并通过在 AppDelegate 上实现一个方法，我得到了我需要的 NSData 格式的令牌，所以你需要转换成一个十六进制字符串（有示例代码在这个网站上的许多网站和问题中）。

就是这样，这就是过程。

希望这可以帮助！！

# hibernate - 使用休眠二级缓存或查询缓存进行延迟获取查询

> ID：10350794
> 
> 赞同：2
> 
> 时间：2012-04-27T12:40:43.710
> 
> 标签：hibernate, caching, lazy-loading, second-level-cache

我使用 ehcache 2.5.2 库成功设置了休眠 3.6.2 以使用二级缓存。

我可以在日志和统计信息中看到实体填充了二级缓存，并且我想要缓存的查询被缓存了。

当我在 hbm.xml 文件中使用 XML 配置时，所考虑的类具有

```
<cache usage="read-write"/> 
```

子元素。

定义了以下属性：

```
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=org.hibernate.cache.EhCacheProvider
hibernate.cache.use_query_cache=true 
```

但是，hibernate 不会缓存它生成的查询以执行实体或集合的延迟加载。我可以在 postgresql 日志中看到它们使用相同的参数一遍又一遍地执行。

是否有执行此操作的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:03:59.113

您只需要确保使用`@Cache`注释映射您的类和关系。

你可以在这里读更多关于它的内容：

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-cache-mapping](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-cache-mapping)

# c++ - 我怎样才能使这个模板方法更优雅？（或：需要不太明确的模板参数）

> ID：10350795
> 
> 赞同：1
> 
> 时间：2012-04-27T12:40:43.903
> 
> 标签：c++, templates, lambda, c++11

我的目标是拥有一个模板函数，它将输入对象的 std::vector 和函数对象作为输入。然后，此模板函数将使用函数对象和线程池将输入向量转换为转换对象的 std::vector。

下面包含的示例代码。

我真的希望能够使用比首先创建本地函数对象然后传递所有模板参数更短的语法。

使用 gcc 编译：g++ -std=C++0x bla.cpp

```
#include <vector>
#include <functional> 
#include <iostream>

// SYNTAX:
// vector<ResultType> transformed = multiTransform(const vector<InputType>, Transform t)
// where Transform t takes a single InputType as an argument
// ConvertedType has to be default constructible
template <class ConvertedType, class InputType, class Transform>
std::vector<ConvertedType> multiTransform(const std::vector<InputType>& inputs, Transform t) {
  std::vector<ConvertedType> results(inputs.size());
  {
    // boost::threadpool::pool pool(boost::thread::hardware_concurrency());
    for(auto it = inputs.begin(); it != inputs.end(); ++it){
      auto inputDereferenced = *it;
      auto functor = [&, it, inputDereferenced](){
        auto result = t(inputDereferenced);
        results[it - inputs.begin()] = std::move(result);
      };
      // pool.schedule(functor);
      functor();
    }
  }
  return results;
}

int main() {
  std::vector<int> input = {1,2,3};
  // auto output = multiTransform(input, [](int a){return float(a);}); // does not compile
  auto lambda = [](int a){return a/2.0;};
  auto output = multiTransform<float, int, decltype(lambda)>(input, lambda);

  for(auto it : output){
    std::cout << it << std::endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:48:22.600

这适用于 g++ 4.6.3：

```
auto output = multiTransform<float>(input, [](int a){return a/2.0;}); 
```

您还可以使您的模板声明更复杂一点：

```
template <class InputType, class Transform>
auto
multiTransform(const std::vector<InputType>& inputs, Transform t)
  -> std::vector<decltype(t(*inputs.begin())) >
{
  typedef decltype(t(*inputs.begin())) ConvertedType;
  std::vector<ConvertedType> results(inputs.size());
  {
    // boost::threadpool::pool pool(boost::thread::hardware_concurrency());
    for(auto it = inputs.begin(); it != inputs.end(); ++it){
      auto inputDereferenced = *it;
      auto functor = [&, it, inputDereferenced](){
        auto result = t(inputDereferenced);
        results[it - inputs.begin()] = std::move(result);
      };
      // pool.schedule(functor);
      functor();
    }
  }
  return results;
} 
```

那么你可以使用

```
auto output = multiTransform(input, [](int a){return a/2.0;}); 
```

# asp.net - 如何将 dnn 网站转换为移动版？

> ID：10350796
> 
> 赞同：1
> 
> 时间：2012-04-27T12:40:46.997
> 
> 标签：asp.net, dotnetnuke

我有一个由 dnn6 制作的网站。我需要添加该网站的移动版本。我该如何解决这个问题。或者是否可以转换移动兼容网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T06:19:34.103

有几种方法可以做到这一点。您需要评估每一个并确定最符合您的目标和您感到满意的给药量的最佳路线。要记住的另一件事是您最终向访问者提供的用户体验。

可能最灵活的解决方案是使用[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)来根据当前查看网站的设备的尺寸调整和更改内容和布局——无论我们谈论的是哪种设备。 [美国运动员杂志](http://www.americanathletemag.com/)很好地展示了这种方法。

您还可以在您的主站点上设置一个移动部分，或者在另一个站点上显示针对移动查看优化的内容。在这种情况下，您将创建一个移动友好设计，为移动访问者提供最佳用户体验，并以同样友好的方式维护内容。然后，使用内置的重定向工具将访问者重定向到您网站的移动网站或移动部分。自 v06.01.05 起，它们出现在 DNN 的所有版本中。这种方法的一个例子可以在[DotNetNuke 日](http://dayofdotnetnuke.com/)及其[移动版本](http://m.dayofdotnetnuke.com/)中看到。

当然还有其他方法可以进行，但这些是最常见的。在任何一种情况下，您都可以使用内容共享来更轻松地维护内容，但您确实应该在易于管理与访问者的预期用户体验之间取得平衡。

[DotNetNuke Wiki 中](http://www.dotnetnuke.com/Resources/Wiki/Page/DotNetNuke-61-Developer-Quick-Start.aspx)有更多关于移动功能的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T02:30:21.413

像上面所说的 Will 有不同的方法。

1.  您可以创建子门户（yourdomain.com/mobi 或 mobi.yourdomain.com）并修改现有皮肤（查看 codeplex 以获取 MIT 许可移动皮肤：[http ://dotnetnuke.codeplex.com/site/search?query =mobile%20skin](http://dotnetnuke.codeplex.com/site/search?query=mobile%20skin) ) 您需要进行重定向，这样当一个小显示器拉起网站时，它会将用户带到移动版本。子门户的问题是您必须维护两个单独的版本……因此，如果您打算进行许多更改，请考虑选项 2。

2.  您也可以将皮肤的移动版本上传到根门户，但您需要进行皮肤调整，因为您希望移动皮肤拉出一个动态菜单。如果您选择此路径，您可以在不同的页面上使用相同的模块实例（因此您只需进行一次更改，它将在桌面皮肤和移动皮肤上复制）。

3.  您可以稍等片刻... DNN 6.2 将发布，具有移动重定向功能（目前仅在 DNN Pro 和 Enterprise 中提供）。我不确定 DNN 是否会发布带有新版本的移动皮肤。

如果您需要帮助，我很乐意向您收取正确的解决方案 :) ack !!

# javascript - 反序列化 JavaScript 对象实例

> ID：10350797
> 
> 赞同：1
> 
> 时间：2012-04-27T12:41:02.947
> 
> 标签：javascript, oop

我正在开发一个大量使用 JavaScript 的应用程序。我试图包括一些面向对象的实践。在这次尝试中，我创建了一个像这样的基本类：

```
function Item() { this.init(); }
Item.prototype = {
  init: function () {
    this.data = {
      id: 0,
      name: "",
      description: ""     
    }
  },

  save: function() {
    alert("Saving...");
    $.ajax({
      url: getUrl(),
      type: "POST",
      data: JSON.stringify(this.data),
      contentType: "application/json"
    });
  }
} 
```

我在我的应用程序中创建 Item 实例，然后将它们保存到本地存储，如下所示：

```
Item item = new Item();
window.localStorage.setItem("itemKey", JSON.stringify(item)); 
```

在另一个页面上，或者在另一个时间，我正在从本地存储中检索该项目，如下所示：

```
var item = window.localStorage.getItem("itemKey");
item = JSON.parse(item);
item.save(); 
```

不幸的是，似乎没有达到“保存”功能。在控制台窗口中，有一条错误提示：

*save_Click（匿名函数）onclick*

我有一种预感，“（匿名函数）”是控制台窗口的表达方式“调用 item.save()，但 item 是匿名类型，所以我正在尝试访问匿名函数”。我的问题是，我不确定如何再次将“var item”转换为 Item 类实例。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:45:43.883

*简短的回答：*

函数不能序列化为 JSON。

*解释：*

JSON 是一种基于 JS 文字语法子集的跨平台序列化方案。既然如此，它只能存储某些东西。根据[http://www.json.org/](http://www.json.org/)：

*   对象：对象是一组无序的名称/值对。对象以 {（左大括号）开始，以 }（右大括号）结束。每个名称后跟 :（冒号），名称/值对用 ,（逗号）分隔。
*   数组：数组是值的有序集合。数组以 [（左括号）开头，以 ]（右括号）结尾。值用 ,（逗号）分隔。
*   values：值可以是双引号中的字符串，也可以是数字，也可以是 true 或 false 或 null，也可以是对象或数组。这些结构可以嵌套。

函数无法序列化为 JSON，因为另一个非 JS 平台将无法反序列化和使用它。反过来考虑这个例子。假设我的服务器上有一个 PHP 对象，其中包含属性和方法。如果我用 PHP 序列化该对象，`json_encode()`并且输出中包含方法，我的 JavaScript 将如何解析和理解方法中的 PHP 代码，更不用说使用这些方法了？

您在生成的 JSON 中看到的是`toString()`您正在使用的平台上函数的值。JSON 序列化程序调用`toString()`任何不适合 JSON 的序列化内容。

我相信您的解决方案是停止将实例存储在 JSON/本地存储中。相反，为您在需要时设置回新实例的实例保存相关数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:17:33.010

我知道这个问题已经得到解答，但是我偶然发现了这个问题，如果有人感兴趣，我想分享一个解决这个问题的方法。

而不是这样做：

```
var item = window.localStorage.getItem("itemKey");
item = JSON.parse(item);
item.save(); 
```

做这样的事情：

```
// get serialized JSON
var itemData = window.localStorage.getItem("itemKey");
//instantiate new Item object
var item = new Item();
// extend item with data
$.extend(item, JSON.parse(itemData));

// this should now work
item.save(); 
```

只要您要调用的函数（即 save()）是原型而不是实例方法（通常是这种情况，并且确实是 OP 的原始问题中的情况），这将起作用。

该`$.extend`方法是jquery的实用方法，但自己滚动很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:46:55.480

您只能将普通对象存储在 DOMstorages 中（cookies、urlparams...、所有需要通过`JSON.stringify`/进行序列化的东西`JSON.parse`）。那么你在发送ajax数据时做了什么

```
ajaxsend(this.data); 
```

也适用于字符串序列化。您只能存储数据，不能存储实例属性（如原型、构造函数等）。所以使用

```
savestring(JSON.stringify(item.data)); 
```

这是可能的，因为它`item.data`是一个普通的对象。而当恢复它时，你只会得到那个纯数据对象。在您的情况下，很容易`Item`从纯数据重建实例，因为您的 Items 将它们的值（仅）保存在公共可用属性中：

```
var item = new Item;
item.data = JSON.parse(getjsonstring()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:47:07.573

你不能那样做，javascript怎么可能知道那个项目有保存功能？json 不允许函数作为数据。只需阅读 json 规范，您无法保存函数。

您需要做的是在要存储的哈希中创建一个序列化和反序列化方法。这将指定要导出的内容以及在解析相应的 json 字符串后如何“唤醒”对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T17:11:54.237

**免责声明**

不是全职 JS 开发者，答案可能有一些小错误：

**长无聊的解释**

正如@JAAulde 所提到的，您的对象无法序列化为 JSON，因为具有功能，您使用的技术不允许这样做。

许多人忘记或忽略了应用程序中使用的对象可能与从存储中保存/恢复的对象不完全相同。

**简短快速的回答**

由于您已经将对象的数据成员封装到一个字段中，您可能想尝试这样的事情：

```
// create J.S. object from prototype
Item item = new Item();

// assign values as you app. logic requires
item.data.name = "John Doe";
item.data.description = "Cool developer, office ladies, love him";

// encoded item into a JSON style string, not stored yet
var encodedItem = JSON.stringify(item.data)

// store string as a JSON string
window.localStorage.setItem("itemKey", encodedItem);

// do several stuff

// recover item from storage as JSON encoded string
var encodedItem = window.localStorage.getItem("itemKey");

// transform into J.S. object
item.data = JSON.parse(encodedItem);

// do other stuff 
```

干杯。

# python - 如何为 Pyramid 中的每个视图添加条件重定向？

> ID：10350798
> 
> 赞同：1
> 
> 时间：2012-04-27T12:41:05.230
> 
> 标签：python, redirect, request, conditional, pyramid

我想在每个请求之前检查一个条件并调用不同的视图。这是如何实现的？

我能想到的一种解决方案是向订阅者 NewRequest 添加一些内容，但我被卡住了：

```
@subscriber(NewRequest)
def new_request_subscriber(event):
  if condition:
    #what now? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:50:33.440

```
@subscriber(NewRequest)
def new_request_subscriber(event):
  if condition:
    raise pyramid.httpexceptions.HTTPFound(location=somelocation) ## to issue a proper redirect 
```

更多信息可以在这里找到：http: [//pyramid.readthedocs.org/en/latest/api/httpexceptions.html#pyramid.httpexceptions.HTTPFound](http://pyramid.readthedocs.org/en/latest/api/httpexceptions.html#pyramid.httpexceptions.HTTPFound)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:12:01.417

好吧，您提供的有关“条件”或“调用不同视图”的含义的信息很少，所以我假设您不想调用重定向，而是希望应用程序认为正在使用不同的 URL请求。为此，您可以查看`pyramid_rewrite`，这对于这些事情非常方便，或者您可以更改`NewRequest`订阅者中的请求路径，因为它在 Pyramid 调度到视图之前被调用。

```
if request.path == '/foo':
    request.path = '/bar':

config.add_route('foo', '/foo') # never matches
config.add_route('bar', '/bar') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:12:47.317

“检查条件......并调用不同的视图”的另一个选项是使用自定义视图谓词

来自[Cris McDonough 的博客文章](http://www.plope.com/weird_pyramid_urldispatch)：

```
 def example_dot_com_host(info, request):
       if request.host == 'www.example.com:
           return True 
```

那是那里的自定义谓词。如果主机名是 www.example.com，则返回 True。以下是我们如何使用它：

```
 @view_config(route_name='blogentry', request_method='GET')
  def get_blogentry(request):
      ...

  @view_config(route_name='blogentry', request_method='POST')
  def post_blogentry(request):
      ...

  @view_config(route_name='blogentry', request_method='GET', 
               custom_predicates=(example_dot_com_host,))
  def get_blogentry_example_com(request):
      ...

  @view_config(route_name='blogentry', request_method='POST', 
               custom_predicates=(example_dot_com_host,))
  def post_blogentry_example_com(request):
      ... 
```

但是，对于您的特定问题（如果用户无权查看页面，则显示登录页面）实现此目的的更好方法是[设置](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/security.html#protecting-views-with-permissions)视图权限，以便框架在用户无权时引发异常，然后[为该异常](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/views.html?awesome#custom-exception-views)注册一个自定义视图，该视图将显示一个登录表单。

# jboss6.x - 启动 JBoss AS 的最佳方式

> ID：10350804
> 
> 赞同：3
> 
> 时间：2012-04-27T12:41:53.787
> 
> 标签：jboss6.x

我想问什么是启动 jboss AS 的最佳方式。

因为，每当我关闭终端或按 ctrl+c 时，已经用`run.sh`脚本启动的 jboss 就会从关机开始。`export LAUNCH_JBOSS_IN_BACKGROUND=1`在通过脚本启动 jboss 之前，我已经尝试过执行，`.run.sh`但这对我帮助不大。

其次，我想知道如何验证 jboss 是否正在运行，除了浏览`localhost:8080`或`localhost:8080/admin-console`.

我同时使用 mac-osx/linux 和 Jboss-AS-6.0.0.Final。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T12:44:57.603

`nohup /usr/local/jboss/bin/run.sh -b 0.0.0.0 > /dev/null &`应该启动 jb 以及在后台运行它。

您可以使用检查 jboss 是否正在运行`ps -ef | grep java`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:52:50.433

对于问题的第一部分，尝试运行：

``./run.sh &``

这会将进程发送到后台。一旦 JBoss 完成启动，只需按 Enter。

如果您需要将该进程带回前台，请运行`fg`. 如果你想停止 JBoss，你可以按下 CTRL-C。

要验证 jboss 是否正在运行，您可以运行如下内容：

``ps -ef | grep jboss``

或者

``ps -ef | grep run.sh``

这将显示 JBoss 或 run.sh 脚本的进程 ID。

我希望这有帮助。

# javascript - javascript 尝试使用 json 解析捕获

> ID：10350809
> 
> 赞同：3
> 
> 时间：2012-04-27T12:42:14.653
> 
> 标签：javascript, json, try-catch

我有几个来自服务器的 json 对象。目前，我正在使用浏览器的 json 功能（我的应用程序仅支持现代浏览器）将 json 解析为对象。

我应该使用 try/catch 来使我的应用程序更健壮，还是使用 try/catch 会产生另一组问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:44:16.233

try..catch 不是让问题消失的神奇构造。问题是，你会在你的 catch { } 子句中加入什么？

如果您可以在 json 损坏的情况下做一些有用的事情。可以让您确保应用程序的状态再次正确的东西，那么它是有意义的。

但是，您收到损坏的 json 的机会有多大？如果您自己生成和解析 json，则可能性很小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:43:53.740

使用`try / catch`块的一般规则是，*只有在你 100% 知道下一步该做什么时才使用它*。

换句话说，如果由于解析 JSON 对象失败而无法继续应用程序流程，则抛出错误或不使用`try / catch`.

除此之外，您可以使用`json2.js`或任何其他支持原生 JSON 的库来支持老式浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:44:35.777

响应的验证应该在 SERVER 中，而不是在客户端。
所以你不必担心解析是否会失败，（除非程序员失败了......）

**客户端验证依赖于服务器端，而不是相反。**

# c# - 带有@HTML.Action(...) 的部分视图

> ID：10350810
> 
> 赞同：2
> 
> 时间：2012-04-27T12:42:20.850
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个强类型的部分视图，应该显示用户登录的帐户名称：

```
 @model MyNamespace.Models.AccountNameViewModel

@if (Request.IsAuthenticated)
{
    @Html.Action("AccountName", "AccountNameController", Model)
    Logged in to **@Model.AccountName**
} 

```

我有一个控制器：

```
public class AccountNameController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [ChildActionOnly]
    public ActionResult AccountName(AccountNameViewModel model)
    {
        ... Do somthing with the repository to populate the model
        return PartialView(model);

    }
} 
```

我想要做的是添加一个共享的局部视图，显示用户登录的帐户的名称。我得到的是以下错误：

```
The controller for path '/ParentViewPath/' was not found or does not implement IController. 
```

我是否至少朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T12:46:31.250

您必须删除`controller`通话中的部分

```
 @Html.Action("AccountName", "AccountName", Model) 
```

要渲染局部视图，您还可以调用

```
 @Html.Partial("AccountName", "AccountName", Model) 
```

# cocoa - 嵌套的 AVMutableComposition

> ID：10350813
> 
> 赞同：11
> 
> 时间：2012-04-27T12:42:38.370
> 
> 标签：cocoa, avfoundation, avmutablecomposition

我正在尝试在嵌套层次结构中使用 AVMutableComposition。因此，我必须将一个作品放入另一个作品中。这样做会导致以下错误消息：

> AVCompositionTest[45347:10703] comp2 >>> 操作无法完成

我使用以下代码剪断。

```
AVAsset *audioAsset = [AVAsset assetWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"02 Undefined" ofType:@"mp3"]]];

AVMutableComposition *comp1 = [AVMutableComposition composition];

BOOL success = YES;
NSError *error = nil;

success = [comp1 insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration)
                         ofAsset:audioAsset
                          atTime:kCMTimeZero
                           error:&error];

if (!success) {
    NSLog(@"comp1 >>> %@", [error localizedDescription]);
}

AVMutableComposition *comp2 = [AVMutableComposition composition];

success = [comp2 insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration)
                         ofAsset:comp1
                          atTime:kCMTimeZero
                           error:&error];

if (!success) {
    NSLog(@"comp2 >>> %@", [error localizedDescription]);
} 
```

是否可以嵌套组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T07:55:45.963

无法嵌套`AVMutableComposition`资产。

# oracle - ORA-00054 错误的原因是什么？

> ID：10350821
> 
> 赞同：0
> 
> 时间：2012-04-27T12:43:15.647
> 
> 标签：oracle, oracle11g, ora-00054

来自 Oracle 的文档：-

```
ORA-00054 resource busy and acquire with NOWAIT specified   

  Cause: Resource interested is busy.
  Action: Retry if necessary. 
```

在我们的代码中，我们发出一个`SELECT FOR UPDATE NOWAIT`命令来锁定我们将要更新的行。

现在的逻辑是，如果它返回 SQL 错误`54`，则假定另一个用户正在尝试更新同一条记录。这个逻辑有效吗？

从 Oracle 的文档看来，如果数据库不堪重负，那么这也可能导致引发此错误。

当我们只使用上面的 SQL 命令时，这个错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:10:38.603

SELECT ... FOR UPDATE 尝试获取表上的 RS（行共享）锁和行上的 X（排他性）锁。如果另一个会话在表上具有排他锁（例如创建索引）或在行上具有排他锁（更新、删除或选择更新），则查询将等待另一个事务释放锁（提交或回滚）一般），除非您已指定现在。

所以一种可能性是不指定NOWAIT。

我不认识数据库可能由于“不堪重负”而引发此错误的情况。

# image - 如何在上传的图片下添加描述

> ID：10350827
> 
> 赞同：1
> 
> 时间：2012-04-27T12:43:41.893
> 
> 标签：image, drupal, drupal-7

我在名为“产品”的内容类型中创建了一个图像字段，但没有描述框选项，因为它显示在文件字段中。有没有办法在每张产品照片下添加产品描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:04:40.330

我知道这不是最佳解决方案，但您可以使用[field_collection](http://drupal.org/project/field_collection)来实现这一点。安装模块，然后`field_collection`为您的内容类型添加一个新的类型字段，然后`admin/structure/field-collections`您可以在下面添加图像和文本区域字段。现在您应该能够向您的节点添加图像和相应的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T19:14:20.617

试试 Drupal 7 的[Image Field Caption](http://drupal.org/project/image_field_caption)模块。

它为图像字段添加了一个额外的文本区域。它类似于图像字段中已有的 alt/title 文本字段，除了它是一个接受长字符串或 html 内容的文本区域。

1.  下载模块
2.  启用模块
3.  添加带有图像字段的内容类型，或使用带有图像字段的现有内容类型
4.  添加或编辑具有图像字段的节点
5.  在图像字段标题文本区域中输入文本或 html
6.  保存节点并查看它以查看图像字段下方显示的标题

要覆盖标题的显示方式，请复制 image_field_caption.tpl.php 文件并将其放在主题目录中，例如：

```
sites/all/themes/MY_THEME/image_field_caption.tpl.php 
```

现在修改 html 以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:48:27.560

这已被确定为一个问题 - 从 D6 到 D7 将图像字段集成到核心中，不幸的是，除了 alt 和标题之外，还丢失了描述字段的选项。

试试这个补丁： [http ://drupal.org/node/1067620#comment-5958190](http://drupal.org/node/1067620#comment-5958190)

# c# - C# Regex.Replace 第一组

> ID：10350828
> 
> 赞同：3
> 
> 时间：2012-04-27T12:43:44.287
> 
> 标签：c#, regex

如何使用 Regex.Replace 中的第一组？
我试过`$1`像[文档](http://msdn.microsoft.com/en-us/library/taz3ak2f.aspx)说的那样使用。另外，我是否使用分组也没关系`?:`......

```
string text = "&lt;font color=&quot;#aa66bb&quot;&gt;farbig&lt;/font&gt;"     

/// this does not work
Regex.Replace(text, "&lt;font color=&quot;#(?:[\\d\\w]{6})&quot;&gt;", "<font color=\"#$1\">");
// => "<font color=\"#$1\">farbig&lt;/font&gt;"

// this works fine though  
Regex.Match(text, "&lt;font color=&quot;#([\\d\\w]{6})&quot;&gt;").Groups[1];
// => aa66bb 
```

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:53:43.290

难道只是你在这里使用的是非捕获组吗？

```
Regex.Replace(this.Text, "&lt;font color=&quot;#(?:[\\d\\w]{6})&quot;&gt;", "<font color=\"#$1\">"); 
```

它是：

```
(?:[\\d\\w]{6}) 
```

代替

```
([\\d\\w]{6}) 
```

您可以使用 @btw 转义所有特殊字符：`@"(?:[\d\w]{6})"`

还有，你试过了吗

```
"<font color=\"#" + $1 + "\">" 
```

否则我认为 c# 不会从普通字符串值中知道 $1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:54:24.843

这不是您所问问题的答案，但要执行您在示例中尝试的操作，您可以`HtmlDecode`按照[此处](https://stackoverflow.com/questions/122641/how-can-i-decode-html-characters-in-c)所述使用并避免整个问题。

# javascript - Javascript 保留字

> ID：10350829
> 
> 赞同：3
> 
> 时间：2012-04-27T12:43:44.773
> 
> 标签：javascript

我制作了一个与 FF 一起工作的对象，但导致 IE 出错（预期的标识符、字符串或数字）

```
var a={text:'abc',class:'def'}; 
```

经过一番研究，我发现 class 是一个保留字。引用“类”这个词解决了这个问题。

```
var a={text:'abc',"class":'def'}; 
```

是否建议始终引用对象名称以消除这些错误？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:49:03.083

看看这里：

[https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)

并且不要使用对象文字中未引用的任何这些词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T12:46:27.043

不，这不是通常推荐的东西。

IS 建议不要使用这样的保留字。你可以很容易地变成`class`其他任何东西。

# c - 在语句表达式中“重新定义”变量是否安全？

> ID：10350836
> 
> 赞同：0
> 
> 时间：2012-04-27T12:44:20.163
> 
> 标签：c, gcc, c99, gnu99

我的问题是关于[语句表达式](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Statement-Exprs.html)，它是作为 GNU C 中的扩展添加的。考虑以下代码：

```
#include <stdlib.h>
#include <stdio.h>

int main(void)
{
    int i = 0;
    printf("%d\n", i);

    {int i = 1;printf("%d\n", i);}

    printf("%d\n", i);
    return EXIT_SUCCESS;
} 
```

编译 ( `gcc -Wall -std=gnu99 lala.c -o lala`) 并运行将产生：

```
0
1
0 
```

这种做法（使用扩展）相当普遍，尤其是`container_of`在 Linux 内核中：

```
#define container_of(ptr, type, member) ({ \
                const typeof( ((type *)0)->member ) *__mptr = (ptr); 
                (type *)( (char *)__mptr - offsetof(type,member) );}) 
```

与这种情况类似，我想定义一个宏来声明一个局部变量并对其进行处理。但是，我希望这样做不会污染当前范围内可用的变量名，并避免可能的重新定义。我无法在文档中找到关于在重新定义的情况下范围界定如何发生的信息。

在上述情况下，编译器不会发出有关重新定义的警告。我的问题是我是否可以依靠语句表达式内部的变量不会影响外部范围内的同名变量这一事实？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:53:07.927

当然这是安全的，这就是范围的用途。

（正如 dreamlax 在他的评论中指出的那样，带有两个下划线的标识符是为实现（编译器、库、托管环境......）保留的，所以你不应该使用它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:12:33.947

关于范围

从 3.1.2.1 ANSI C（类似 C99 中的 6.2.1）：

> 如果声明标识符的声明符或类型说明符出现在块内或函数定义中的参数声明列表内，则标识符具有块作用域，其终止于关闭关联块的 }

...

> 如果一个词法相同标识符的外部声明存在于相同的名称空间中，它会被隐藏，直到当前作用域终止，之后它再次变为可见。

因此，假设编译器是兼容的，您应该能够假设表达式内的变量不会影响外部范围内的变量

# algorithm - 如何将遗传算法与一些启发式方法结合起来

> ID：10350837
> 
> 赞同：4
> 
> 时间：2012-04-27T12:44:19.950
> 
> 标签：algorithm, scheduling, heuristics, hybrid, genetic

我正在研究大学调度问题并为此使用简单的遗传算法。实际上它工作得很好，并将目标函数值从 0% 优化到 90%（大约）1 小时。但是随后该过程会急剧变慢，并且需要数天才能获得最佳解决方案。我看到很多论文认为将其他算法与基因混合是合理的。请你给我一些建议，告诉我什么算法可以与遗传算法混合，以及如何应用这种算法来加快求解过程。主要问题是如何将任何启发式方法应用于这种复杂结构的问题？我不知道如何在那里应用，例如贪婪启发式。

提前感谢大家！非常感谢您的帮助！

* * *

问题描述：

1.  我有：

    *   由 ScheduleSlot 对象填充的数组
    *   由课程对象填充的数组
2.  我愿意：

    *   标准两点分频器
    *   突变（将随机课程移动到随机位置）
    *   粗选（仅选择 n 个最佳个体进入下一个种群）

***@Dougal***和***@izomorphius***的附加信息：
我正在尝试构建一个大学时间表，该课程表在课程、重叠和针对团体和教授的地理分布课程之间没有中断。
适应度函数非常简单：适应度 = -1000*numberOfOverlaps - 1000*numberOfDistrebutedLessons - 20*numberOfBreaks。（或类似的东西，我们可以简单地改变变量的系数）
在开始的时候，我生成我的个人只是将课程放在随机的房间、时间和日期。
如上所述，突变和交叉非常简单：

1.  交叉- 取父调度，随机选择交叉点和交叉范围，只交换父调度的部分，生成两个子调度。
2.  突变 - 采用儿童时间表并将 n 个随机课程移动到随机位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:41:05.900

我最初的观察：您选择了 前面的系数`numberOfOverlaps`，`numberOfDistrebutedLessons`而且`numberOfBreaks`有些随机。我的经验表明，通常这些选择都不是最好的选择，您最好让计算机选择它们。我建议编写第二种算法来选择它们——可以是神经网络、第二种遗传算法或爬山算法。这个想法是 - 计算一段时间后你得到的结果有多好，并尝试优化这 3 个值的选择。

另一个想法：得到结果后，你可以尝试暴力优化它。我的意思是以下 - 如果您遇到最初的问题，“愚蠢”的解决方案将是检查所有可能性的回溯，这通常使用[dfs](http://en.wikipedia.org/wiki/Depth-first_search)完成。现在这会很慢，但您可以尝试使用[深度优先搜索和迭代加深](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)，或者简单地使用深度受限的 DFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:38:51.453

对于许多问题，我发现 Lamarckian 风格的 GA 效果很好，将局部搜索结合到 GA 算法中。

对于您的情况，我会尝试引入部分系统搜索作为本地搜索。有两种明显的方法可以做到这一点，您可能应该同时尝试这两种方法。

1.  与局部搜索迭代交替的 GA 迭代。例如，对于您的本地搜索，您可以暴力破解一天内分配的所有课程，同时保持其他所有内容不变。另一种可能性是将随机选择的课程移动到所有空闲位置以找到最佳选择。关键是最小化暴力搜索的成本，同时仍然有机会找到局部改进。

2.  在执行本地搜索的突变和交叉旁边添加一个新运算符。（您可能会发现变异算子在混合方案中不太有用，因此只需替换它可能是可行的。）

本质上，您将把 GA 的全局探索与有效的局部搜索结合起来。一些 GA 框架包含有助于这种组合的功能。例如，[GAUL](http://gaul.sourceforge.net/tutorial/evolution.html)实现了上面的替代方案 1，在每次迭代中使用全部种群或仅使用新的后代。

# c++ - 将 nullptr 分配给函数指针变量是否安全？

> ID：10350838
> 
> 赞同：12
> 
> 时间：2012-04-27T12:44:24.823
> 
> 标签：c++, c++11, function-pointers

我创建了一个接受函数指针的函数，例如

```
typedef CString(*GetLabelFunc)(const CSomeObject* const pObject);

void DoSomething(GetLabelFunc funcGetLabel); 
```

该函数可能会接收一个空指针并在这种情况下返回一个空字符串。当使用 NULL 和 nullptr 作为参数时，这在 MSVC++ 2010 中工作得非常好 - 但我不认为在这种特殊情况下成功编译是安全港......

现在我想知道传递`nullptr`是否等同`NULL`于函数指针。我问的原因是例如`void*`不接受函数指针（或者至少不应该使用它）。所以也许有类似的原因 nullptr 不应该用于函数指针 - 这意味着它是否设计为仅适用于对象指针？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T12:51:09.237

是的，nullptr 被指定为可转换为所有指针类型的空指针值，包括函数指针类型。

参见 [conv.ptr] 4.10/1 和 [basic.compound] 3.9.2/3。

# java - 在 Java 中重新抛出时抛出异常

> ID：10350842
> 
> 赞同：0
> 
> 时间：2012-04-27T12:44:49.230
> 
> 标签：java, exception, exception-handling, casting

比较这两种方法：

```
void foo() throws SomeSuperException {
    try {
        //...
    } catch (SomeSuperException e) {
        if (e instanceof SomeSubException) {
            throw e;
        }
    }
}

void bar() throws SomeSubException {
    try {
        //...
    } catch (SomeSuperException e) {
        if (e instanceof SomeSubException) {
            throw (SomeSubException) e;
        }
    }
} 
```

除了方法签名（ bar 可以声明`throws SomeSubException`而不是`throws SomeSuperException`），这两种方法之间有什么实际区别吗？

**需要明确的是：**我知道这是一种可怕的异常处理方法，不应该这样做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:48:36.103

不同之处在于，在第一种情况下，外部调用者不知道您的具体`SomeSubException`信息，因此在翻译中会丢失一些细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:49:28.793

不，没有（大）差异。从普通开始，抛出最具体的异常是最好的选择，而不是超级或更广泛的异常。这允许您在覆盖的 catchBlock 中处理更多情况。

# java - Java获取半月数

> ID：10350850
> 
> 赞同：1
> 
> 时间：2012-04-27T12:45:31.857
> 
> 标签：java, date, calendar

我会从一个日期开始得到一年半月的数字。例如，我有 13-Mar-2012，结果是 6。

我已尝试使用 Calendar 类，但无法正常工作：

```
 Calendar cal = (GregorianCalendar) Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,13);
    cal.set(Calendar.MONTH, 2);
    cal.set(Calendar.YEAR, 2012);
    int weekNum = cal.get(Calendar.WEEK_OF_YEAR);
    System.out.println("Weeknum:" + ((weekNum/2))); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:37:13.000

假设这里定义的半个月：[http ://en.wikipedia.org/wiki/Half-month](http://en.wikipedia.org/wiki/Half-month)

```
 Calendar cal = (GregorianCalendar) Calendar.getInstance();
  cal.set(Calendar.DAY_OF_MONTH, 13);
  cal.set(Calendar.MONTH, 2);
  cal.set(Calendar.YEAR, 2012);
  // remember, we have a zero based month
  int halfMonth = cal.get( Calendar.MONTH ) * 2 + 1;
  // 1-15 is first half-month 16-end of month is second
  int remainder = cal.get( Calendar.DAY_OF_MONTH ) / 16; 
  halfMonth += remainder;

  System.out.println( halfMonth ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:48:30.300

```
Calendar cal = (GregorianCalendar) Calendar.getInstance();
cal.set(Calendar.DAY_OF_MONTH,13);
cal.set(Calendar.MONTH, 2);
cal.set(Calendar.YEAR, 2012);
int hafMonthCount = cal.get(Calendar.DAY_OF_YEAR) / 14 ;
//here you must multiply by 2 :)
System.out.println("HalfMonthCount:" + hafMonthCount ); 
```

- -更新

由于您使用的概念未在 Java 中实现（在法语中我们有 quizaine 的概念 14 天，但在英语中我不能说），您必须自己计算它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:27:25.190

通过示例显示您的代码发生了什么的详细信息。假设我们有以下四个不同的值`WEEK_OF_YEAR`：

```
WEEK_OF_YEAR: 1
WEEK_OF_YEAR: 2
WEEK_OF_YEAR: 3
WEEK_OF_YEAR: 4 
```

如果我们将这些值除以 2 会发生什么？

```
WEEK_OF_YEAR: 1          (weekNum/2) = 1/2 = 0 
WEEK_OF_YEAR: 2          (weekNum/2) = 2/2 = 1
WEEK_OF_YEAR: 3          (weekNum/2) = 3/2 = 1
WEEK_OF_YEAR: 4          (weekNum/2) = 4/2 = 2 
```

所以你的代码的问题是它会在一年的第一周导致值 0。所以你想要在你的代码中做的就是`(weekNum/2)`用`((weekNum + 1)/2)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T06:35:55.837

# java - java - 如何在java中使用lightcouch api将批量文档保存在couchdb中

> ID：10350853
> 
> 赞同：6
> 
> 时间：2012-04-27T12:45:34.233
> 
> 标签：java, couchdb

我正在使用 [lightcouch API](http://www.lightcouch.org/javadocs/index.html)通过 Java 连接到 couchdb。我可以使用 dbclient.save(object) 方法保存单个文档。但是，我的要求是一次保存批量文档。我找不到任何与使用 Lightcouch api 保存批量文档相关的方法。请提出任何可能的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T08:11:45.237

我决定试一试。我有一个数据库，其中包含描述一个人的文档。

这是我`Person`扩展^([LightCouch](http://www.lightcouch.org/))的课程：[`Document`](http://www.lightcouch.org/javadocs/org/lightcouch/Document.html)

```
public class Person extends Document {

    private String firstname = "";
    private String lastname = "";
    private int age = -1;

    public Person(String firstname, String lastname, int age) {
        super();
        this.setFirstname(firstname);
        this.setLastname(lastname);
        this.setAge(age);
    }

    // setters and getters omitted for brevity

} 
```

算法很简单。

1.  创建类型数组`Document`
2.  将您的文档放入数组中
3.  创建 HTTP POST 请求
4.  将 JSON 转换后的数组放入请求正文中
5.  发送

这大概是代码的样子。

*注意：为简洁起见省略了 try/catch！当然，您应该使用它们。*

```
public static void main(String[] args) {

    // You could also use a List and then convert it to an array
    Document[] docs = new Document[2];
    docs[0] = new Person("John", "Smith", 34);
    docs[1] = new Person("Jane", "Smith", 30);

    DefaultHttpClient httpClient = new DefaultHttpClient();

    // Note the _bulk_docs
    HttpPost post = new HttpPost("http://127.0.0.1:5984/persons/_bulk_docs");

    Gson gson = new Gson();
    StringEntity data = 
        new StringEntity("{ \"docs\": " + gson.toJson(docs) + "}");
    data.setContentType("application/json");
    post.setEntity(data);

    HttpResponse response = httpClient.execute(post);

    if (response.getStatusLine().getStatusCode() != 201) {
        throw new RuntimeException("Failed. HTTP error code: "
            + response.getStatusLine().getStatusCode());
    }
    BufferedReader br = new BufferedReader(
        new InputStreamReader((response.getEntity().getContent())));
    String output;
    while ((output = br.readLine()) != null) {
        System.out.println(output);
    }
    httpClient.getConnectionManager().shutdown();
} 
```

我将在这个例子中描述两个值得注意的部分。

第一个是文档的收集。在这种情况下，我使用数组而不是`List`示例。

```
Document[] docs = new Document[2];
docs[0] = new Person("John", "Smith", 34);
docs[1] = new Person("Jane", "Smith", 30); 
```

您也可以使用 a `List`，然后使用 Java 的实用方法将其转换为数组。

第二个是`StringEntity`。根据 CouchDB 在[HTTP Bulk Document API](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Modify_Multiple_Documents_With_a_Single_Request)上关于使用单个请求修改多个文档的文档，您的请求正文的 JSON 结构应该如下所示。

```
{
  "docs": [
    DOCUMENT,
    DOCUMENT,
    DOCUMENT
  ]
} 
```

这就是有点丑陋的`StringEntity`定义的原因。

```
StringEntity data = new StringEntity("{ \"docs\": " + gson.toJson(docs) + "}"); 
```

作为响应，您将获得一个 JSON 数组，其中包含对象，其字段表示插入文档的 *_id* 和 *_rev* 以及事务状态指示器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T08:35:11.840

我做了同样的事情，但是使用 spring Rest Template 我创建了一个类，该类将保存要按照以下方式更新的文档。

```
 public class BulkUpdateDocument {

    private List<Object> docs;
    } 
```

我的 Rest 代码如下所示。

```
 BulkUpdateDocument doc = new BulkUpdateDocument(ListOfObjects);

    Gson gson = new Gson();
    RestTemplate restTemplate = new RestTemplate();

    HttpHeaders header = new HttpHeaders();
    header.setContentType(MediaType.APPLICATION_JSON_UTF8);
    HttpEntity<?> requestObject = new HttpEntity<Object>(gson.toJson(doc), header);

    ResponseEntity<Object> postForEntity = restTemplate.postForEntity(path + "/_bulk_docs", requestObject, Object.class); 
```

# jboss7.x - 无法从 Eclipse Indigo 启动 JBoss7

> ID：10350855
> 
> 赞同：0
> 
> 时间：2012-04-27T12:45:46.580
> 
> 标签：jboss7.x, eclipse-indigo, jboss-tools

我不知道我哪里出错了。我安装了 Eclipse Indigo、JBoss 7.1、JBoss 工具。我有这个配置在我的 Windows7 64 位系统上工作。我正在尝试使用相同的配置设置同事的 Windows XP 32 位计算机，但无法启动服务器。我已经配置了服务器，但是当我尝试启动服务器时，我收到一个错误，表明它无法启动服务器，但没有列出特定的错误。

*   我可以使用standalone.bat 文件从命令提示符启动JBoss。

*   我可以在 Eclipse 中配置standalone.xml 文件。我通过检查独立/配置目录中的文件确认了这一点。

*   当我尝试从 Eclipse 中发布项目时，它不会发布。

*   没有任何内容写入 server.log

*   启动参数与我计算机上的参数相匹配。

我无法弄清楚我错过了什么。任何建议，将不胜感激！

编辑：
我做了更多检查。我能够发布到服务器，并且能够从命令提示符启动服务器（使用已发布的应用程序）。那部分有效。当我尝试从 Eclipse 中启动服务器时，它给了我“Server JBoss 7.1 Runtime Server failed to start”。它也从不向 Eclipse 中的控制台选项卡写入任何内容，所以我不知道为什么它无法启动。

同样在“服务器”选项卡中，有一个名为“服务器详细信息”的条目。当我展开该条目时，它显示“未连接”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T20:51:46.947

我的问题的答案是 Eclipse 已配置为使用 java JDK，而不是 JRE。一旦我切换到使用 JDK，它就开始正常工作。由于某种原因，JBoss 将在 64 位 Windows 下使用 JRE 启动，但在 32 位下您需要使用 JDK。我在这里找到了答案：[https ://community.jboss.org/thread/169097](https://community.jboss.org/thread/169097)

# maven - 绑定 mvn jetty:run 到不同的阶段？

> ID：10350857
> 
> 赞同：1
> 
> 时间：2012-04-27T12:45:49.220
> 
> 标签：maven, maven-jetty-plugin

我有一个 maven webapp，可以使用 jetty 运行。如果我打电话给码头

```
mvn jetty:run 
```

它在安装阶段之前执行。但是，我只想在 Maven 生命周期的最后运行 jetty。我怎样才能做到这一点？

或者换一种说法。jetty maven 插件的运行目标默认绑定到某个 maven 阶段。我可以更改该绑定吗？

**更新：**为了确保，我不想知道每次执行 maven 阶段时如何自动执行码头，就像预集成测试一样。我只想将码头运行目标绑定到稍后的阶段，以便在手动调用它时执行额外的 Maven 阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:10:19.693

这是不可能的（使用预定义的包装，如`jar`or `war`）。在 Maven 中，您运行插件的目标*或*阶段（启动生命周期）。如果您运行目标，则仅执行此目标。如果您运行阶段，则生命周期会从开始运行到包含的该阶段。尝试运行（之后`mvn clean`）`mvn install:install`（仅目标），然后`mvn install`（默认生命周期到`install`包含的阶段）。

您可以通过创建自己的打包类型来创建自己的插件目标来绑定生命周期的阶段。预定义的包装类型（`jar`、`war`、`ear`等）已指定此绑定。

# grails - Grails文件上传Kendoui

> ID：10350861
> 
> 赞同：0
> 
> 时间：2012-04-27T12:46:10.087
> 
> 标签：grails, kendo-ui

有人可以告诉我在 kendoui 中上传文件的运行示例吗？

因为我试图上传文件并将其上传到视图页面但是当我点击保存按钮时我在显示页面中找不到该文件。我在互联网上搜索它然后我发现了一些服务器问题。所以有人请告诉我在我的情况下如何使用服务器。我正在做一个 grails 项目

我用过的代码：--

```
<tr class="prop">
 <td valign="top" class="name">
 <label>File Upload</label>
  <input name="photos[]" id="photos" type="file" /><script>$(document).ready(function ()$("#photos").kendoUpload({

  autoUpload:true,
  upload: onUpload,
  error: onError

   });
       function onError(e) {
                   // Array with information about the uploaded files
         var files = e.files;

            if (e.operation == "upload") {
              alert("Failed to uploaded " + files.length + " files");
                                        }

         // Suppress the default error message
                  e.preventDefault();
                 },
             function onUpload(e) {
               var files = e.files;
      if (e.operation == "upload") {
          alert("Successfully uploaded " + files.length + " files");
                   }
          });</script>
                    </td>
              </tr> 
```

我正在添加视图文件：- create.gsp

```
<%@ page import="ten.SkeletonBill"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="layout" content="billing" />
<get var="entityName"
value="${message(code: 'skeletonBill.label', default: 'SkeletonBill')}" />
<title><g:message code="default.create.label"
args="[entityName]" /></title>
<script src="source/kendo.all.js"></script>
<link href="styles/kendo.common.css" rel="stylesheet" />
<link href="styles/kendo.default.css" rel="stylesheet" />

</head>
<body>
<content tag="menu-function">
<li><span class="k-link"><a href="#"
onclick="SkeletonBillForm.submit();return false;"><i
class="icon-plus-sign"></i>
<g:message code="default.button.save.label" /></a></span></li>
</content>
<div class="body">
<h1>
<g:message code="default.create.label" args="[entityName]" />
</h1>
<g:if test="${flash.message}">
<div class="message">
${flash.message}
</div>
</g:if>
<g:hasErrors bean="${skeletonBillInstance}">
<div class="alert alert-error">
<a class="close" data-dismiss="alert">×</a>
<g:renderErrors bean="${skeletonBillInstance}" as="list" />
</div>
</g:hasErrors>
<g:uploadForm name="SkeletonBillForm" action="save" method="post">
<div class="dialog">
<table>
<tbody>

<tr class="prop">
<td valign="top" class="name"><label for="bones"><g:message
code="skeletonBill.bones.label" default="Bones" /></label></td>
<td valign="top"
class="value ${hasErrors(bean: skeletonBillInstance, field: 'bones', 'errors')}">
<g:textField name="bones"
value="${fieldValue(bean: skeletonBillInstance, field: 'bones')}" />
</td>
</tr>

<tr class="prop">
<td valign="top" class="name"><label for="dateOfBirth"><g:message
code="skeletonBill.dateOfBirth.label" default="Date Of Birth" /></label>
</td>
<td valign="top"
class="value ${hasErrors(bean: skeletonBillInstance, field: 'dateOfBirth', 'errors')}">
<g:textField name="dateOfBirth"
value="${skeletonBillInstance?.dateOfBirth}" /> <script>$(document).ready(function () {$("#dateOfBirth").kendoDatePicker({format:"yyyy-MM-dd"})});</script>
</td>
</tr>
<tr class="prop">
<td valign="top" class="name">
<label>File Upload</label>

<input name="excelSheet" id="excelSheet" type="file" />

<script>
$(document).ready(function() {
    $("#excelSheet").kendoUpload();
},

        function onError(e) {
// Array with information about the uploaded files
            var files = e.files;

            if (e.operation == "upload") {
                alert("Failed to uploaded " + files.length + " files");
            }

// Suppress the default error message
            e.preventDefault();
        },
        function onUpload(e) {
            var files = e.files;
            if (e.operation == "upload") {
                alert("Successfully uploaded " + files.length + " files");
            }
        });
</script>
</td>
</tr>

</tbody>
</table>
</div>
</g:uploadForm>
</div>
</body>
</html> 
```

还有Controller.gsp

```
def save = {
    def skeletonBillInstance = new SkeletonBill(params)

    if(!skeletonBillInstance.empty){
        println "Name: ${skeletonBill.bones}"
        flash.message = "${message(code: 'default.created.message', args: [message(code: 'skeletonBill.label', default: 'SkeletonBill'), skeletonBillInstance.id])}"
        redirect(action: "show", id: skeletonBillInstance.id)
    }
} else {
render(view: "create", model: [skeletonBillInstance: skeletonBillInstance])
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:44:34.127

几件事 1) 如果你想使用 KendoUI，我不会使用 gsp 标签。请使用普通的表单标签来定义您的表单，如果您这样做，grails 会使用原型插件。2）我不会将脚本代码与标签混合。3) 如果您使用的是 grails 2.0，可以使用 KendoUI 插件，您可以在[http://grails.org/plugin/kendo-ui找到更多信息](http://grails.org/plugin/kendo-ui)

希望有帮助。

# java - 转换列表 成视频文件？

> ID：10350865
> 
> 赞同：5
> 
> 时间：2012-04-27T12:46:40.373
> 
> 标签：java, image, video

我有`Image`实例列表并希望将其转换为视频文件。

```
 List<Images> images.. 
```

如何将列表转换为视频文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:07:52.687

您可以使用 xuggler - [http://www.xuggle.com/xuggler/](http://www.xuggle.com/xuggler/) Xuggler 是一个免费的开源库，供 Java 开发人员进行视频处理，它在底层使用了非常强大的 FFmpeg 媒体处理库，本质上扮演着围绕它们的 java 包装器。

不错的教程： [http ://www.javacodegeeks.com/2011/02/introduction-xuggler-video-manipulation.html](http://www.javacodegeeks.com/2011/02/introduction-xuggler-video-manipulation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:50:52.887

您需要一个库来创建它。这里有一些关于此的帖子：

[寻找一个java包来创建视频](https://stackoverflow.com/questions/2175210/looking-for-a-java-package-to-create-video)

[使用 xuggler 从一组图像创建视频](https://stackoverflow.com/questions/9175543/video-creation-from-a-set-of-images-with-xuggler)

或那里的教程： [http ://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html](http://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html)

# c++ - 如何强制耦合多态类型和枚举值？

> ID：10350866
> 
> 赞同：1
> 
> 时间：2012-04-27T12:46:46.770
> 
> 标签：c++, design-patterns, types, polymorphism

我有一个状态机，它向外部接收器发送一些消息（例如文本）。在转换到这个状态（我们称之为*Dispatching*）之前，前一个状态需要在某个地方存储该消息，以便*Dispatching*可以稍后获取它。当消息在一个上下文中创建并在另一个上下文中使用时，它将在堆上创建，并且*状态管理器*对象（管理状态、转换和事件循环）保持一个指向它的引用/指针。状态对象在状态机通过状态时被创建和销毁。每个状态都继承抽象基类`State`：

```
enum StateID
{
   STATE_A,
   STATE_B,
   ...
};

class State
{
public:
   State(StateID stateID, StateManager& sm) : 
      stateID_(stateID), sm(sm_){}
   virtual ~State(){};
   virtual StateID HandleEvent(const Event& e) = 0;
   StateID id() const {return stateID_;}
protected:   
   StateID stateID_;
   StateManager& sm_;    
}; 
```

为了使将数据传递到下一个状态通用，我提出了*StateData*的想法——一条从一个状态传递到下一个状态的信息。它存储在动态内存中，状态管理器保留对它的引用，以便每个状态都可以访问它。由于可能会将不同类型的数据传递给不同的状态，因此可以将*StateData*制作为抽象基类，专门针对每个特定状态：

```
struct StateData
{
   virtual ~StateData() = 0;
};

struct StateAData : public StateData
{
   int n_;   
   StateAData(int n) : n_(n){}
};

struct StateBData : public StateData
{
   std::string str_;   
   StateBData(const std::string& str) : str_(str){}
};

...

class StateManager
{       
   boost::scoped_ptr<State> pCurrState_;
   boost::scoped_ptr<StateData> pStateData_;
   ...
public: 
    void runEventLoop()
    {
        while(true)
        {
            ...  
            //get event from a queue    
            ...

            StateID nextStateID = pCurrState_->HandleEvent(e);

            if(nextStateID == pCurrState_->id())
                continue;               

            pCurrState_.reset(0);

            switch(nextStateID)
            {
                case STATE_A:                                           
                    pCurrState_.reset(new StateA(*this));
                    break;
                case STATE_B:                               
                    pCurrState_.reset(new StateB(*this));
                    break;
                case STATE_C:                   
                    pCurrState_.reset(new StateC(*this));                       
                    break;
                ...
            }
        }   
    }
    ...       
};

class StateA
{
public:
   StateA(StateManager& sm) : State(STATE_A, sm){}

   StateID HandleEvent(const Event& e)
   {      
      switch(e.ID)
      {
         case EVENT_1:
         {
             StateAData* pData = reinterpret_cast<StateAData*>(stateMachine_.pStateData_.get());
             // do something with data, e.g. use it for transition logic
             if(pData->n_ % 2)
             {
                 stateMachine_.pStateData_.reset(new StateBData("Hello from StateA"));
                 return STATE_B;  
             }
             else
             {
                 ...
             } 
             break; 
         }             
         ... 
      }
   }    
   ...          
} 
```

以下几行有一个陷阱：

```
stateMachine_.pStateData_.reset(new StateBData("Hello from StateA"));
return STATE_B; 
```

如果转换逻辑发生变化，因此我们需要从这里转到`STATE_C`，开发人员可能会忘记将类型更改`StateBData`为`StateCData`：

```
stateMachine_.pStateData_.reset(new StateBData("Hello from StateA"));
return STATE_C; 
```

`StateC`...这会在尝试转换`StateData`为.时导致不良行为`StateCData`。

**如何避免这种情况？如何强制匹配创建对象的类型和返回的枚举值？**

是的，这段代码很臭，这是使用两部分信息并`enum`用于区分状态类型而不是类型本身的结果。`HandleEvent`可以返回`StateXData`并根据这个返回的类型（因为它携带有关下一个状态的信息）状态管理器将确定（通过使用 RTTI）下一个状态转换到（`X`），但我不喜欢这个解决方案。

另一个想法是创建下一个状态的实例并将其数据传递给它的构造函数，但这种方法会污染状态机设计，因为会在前一个状态被破坏之前创建一个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:01:51.297

制作基类的`enum`一部分或在基类中提供一个纯`virtual`函数来返回 this `enum`。这样，状态本身就会公布它的类型。

# java - 如何在 Mac OS X 10.7.3 上安装 JDK7 (Java 7)？

> ID：10350867
> 
> 赞同：13
> 
> 时间：2012-04-27T12:46:54.750
> 
> 标签：java, macos, java-7

在 Mac OS X 10.7.3 上安装 JDK7 (Java 7) 的链接是什么？

它安装什么版本？

它安装在我的盒子的什么位置？

我该如何使用它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-27T12:54:20.987

[从 Oracle 下载 Java SE 7u4。](http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u4-downloads-1591156.html)（这仅是 64 位）

这安装到`/Library/Java/JavaVirtualMachines/1.7.0.jdk`.

但是，当您运行`java -version`它时，它仍然会输出`1.6`或其他一些旧版本。 [请按照以下自述说明进行操作：](http://www.oracle.com/technetwork/java/javase/downloads/jdk-for-mac-readme-1564562.html)

`Java Preferences`中打开`/Applications/Utilities`。拖动`Java SE 7`到顶部。现在它将成为您的默认 JVM。再次运行`java -version`，您应该会看到如下内容：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-bxx)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b17, mixed mode) 
```

完成后，新安装的 Eclipse 应该默认选择 JDK7。除此以外：

1.  转到`Eclipse`-> `Preferences...`-> `Java`->`Installed JREs`
2.  点击`Add...`
3.  选择`Standard VM`
4.  粘贴`/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home`到`JRE home`
5.  将其更改`JRE name`为有用的东西，例如`Java SE 7`
6.  点击`Finish`
7.  选中新创建的 JRE 旁边的复选框。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T19:04:25.950

确保您没有在 .bash_profile 中设置 JAVA_HOME，否则这可能会阻止 java -version 返回所需的结果。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-27T12:51:03.870

您只需[在此处](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载它，将其安装在您喜欢的位置，并将其包含在您的路径中或在您的 IDE 中选择该 JDK

# wordpress - get_categories 按元键问题排序？

> ID：10350870
> 
> 赞同：1
> 
> 时间：2012-04-27T12:47:04.393
> 
> 标签：wordpress

我正在尝试寻找一种按元值排序类别的方法。从我读到的，似乎我可以使用：

get_categories('child_of=92&hide_empty=false&orderby=meta_value&meta_key=date&order=ASC');

但是，这根本不起作用，类别仍然不是我想要的顺序。我想知道我怎么能：

1.  更正它以使其正常工作
2.  打印出 sql 看看里面到底发生了什么？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:08:16.653

首先，我必须提到我正在使用模块自定义类别字段，其次我是一个完整的 WP 新手

无论如何，在得知默认情况下无法做到这一点后，我查看了 get_categories 函数并最终想出了一个解决方案

```
function category_custom_field_get_terms_orderby( $orderby, $args ){
    if($args['orderby'] == 'category_custom_field' && isset($args['category_custom_field'])) 
        return 'cv.field_value';
    return $orderby;
}

function category_custom_field_get_terms_fields( $selects, $args ){
    if($args['orderby'] == 'category_custom_field' && isset($args['category_custom_field']))
        $selects[] = 'cv.*';
    return $selects;
}

function category_custom_field_terms_clauses($pieces, $taxonomies, $args){
    global $wpdb;
    if($args['orderby'] == 'category_custom_field' && isset($args['category_custom_field']))
        $pieces['join'] .= " LEFT JOIN $wpdb->prefix" . "ccf_Value cv ON cv.term_id = tt.term_id AND cv.field_name = '".$args['category_custom_field']."'";
    return $pieces;
}    

add_filter('get_terms_orderby', 'category_custom_field_get_terms_orderby',1,2);

add_filter('get_terms_fields', 'category_custom_field_get_terms_fields',1,2);

add_filter('terms_clauses', 'category_custom_field_terms_clauses',1,3); 
```

（上面的代码可以放到主题functions.php文件中）

那么获取类别的代码是：

```
get_categories('child_of=92&hide_empty=false&orderby=category_custom_field&category_custom_field=date&order=DESC'); 
```

非常感谢任何更正！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:14:52.633

您还可以为 get_categories 提供新的元数据并使用`usort`.

```
$subcategories = get_categories();

foreach ($subcategories as $subcategory) {
$subcategory->your_meta_key = your_meta_value;
}

foreach ($subcategories as $subcategory) {
blah blah blah
}

function my_cmp($a, $b) {
if ($a->ordering == $b->ordering) {
return 0;
}
return ($a->ordering < $b->ordering) ? -1 : 1;
}

usort($subcategories, "my_cmp"); 
```

# c# - 埋葬 SQL 异常时的 ADO.NET 有趣的连接池行为

> ID：10350874
> 
> 赞同：0
> 
> 时间：2012-04-27T12:47:52.797
> 
> 标签：c#, ado.net

我正在捕获一个 sql 异常，而不是重新抛出它。这似乎意味着连接没有像我预期的那样返回到池中。这可能吗？

```
 using (IDbCommand paymentCommand = this.Connection.CreateCommand())
        {
            try
            {
                //database stuff
            }
            catch (SqlException ex)
            {
               //LOG CALL
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:25:03.080

目前尚不清楚您对连接池的体验。但是，我肯定会在**声明****中包含您的联系`using`**。

这是我通常使用的（注意这`dac.GetConnection()`只是一个集中代码以获取连接对象的类）：

```
using (SqlConnection connection = dac.GetConnection())
{
  using (SqlCommand command = new SqlCommand("myProc", connection))
  {
    command.CommandType = CommandType.StoredProcedure;
    try
    {
      connection.Open();           
      //add params, run query

    }
    catch (Exception ex)
    {
      //handle/log errror
    }
    finally
    {
      if (connection.State == ConnectionState.Open)
        connection.Close();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:52:09.097

为什么不将 using(...){} 放在 try{} 块中？这样即使抛出异常，使用块也会处理掉 IDBcmd obj。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:56:37.687

您的问题不清楚您是如何创建连接的，但您确实需要确保打开它，然后关闭它，无论是否有错误。

通常我会做这样的事情：

```
SqlConnection connection = null;
try {
    connection.Open();

    // Do stuff like run a query, setup your IDbCommand, etc.
} catch (Exception ex) {
    // Log error
} finally {
    if (connection != null) {
        connection.Close();
    }
} 
```

这样，无论发生什么，您的连接都将关闭并返回到池中。如果您未能关闭（），您将“泄漏”该连接并最终用完池连接以进行提取。连接的生命周期通常应该只与发出 sql 命令所需的时间一样长，此时您应该关闭它。

# objective-c - ios备份使用http

> ID：10350876
> 
> 赞同：0
> 
> 时间：2012-04-27T12:47:56.337
> 
> 标签：objective-c, cocoa, http, ios5

我现在花了几个小时寻找这个问题的答案，但我似乎无法在任何地方找到它。

是否有任何教程或示例代码可帮助设置 http 连接，以便用户可以使用浏览器将应用程序 coredata sqlite 文件保存到桌面和/或将以前的 sqlite 备份发送到应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:54:26.867

您可以使用[Cocoa HTTP 服务器](https://github.com/robbiehanson/CocoaHTTPServer)。我以前用过，效果很好。

它有：

*   内置支持 bonjour 广播 IPv4 和 IPv6 支持
*   使用 GCD 和标准套接字的异步网络
*   密码保护支持
*   SSL/TLS 加密支持
*   速度极快且内存效率极高
*   极强的可扩展性（完全基于 GCD）
*   大量注释的代码
*   也支持非常容易扩展的 WebDAV！

# git - 来自 git-svn 桥的 git rebase

> ID：10350877
> 
> 赞同：0
> 
> 时间：2012-04-27T12:47:57.877
> 
> 标签：git, git-svn

我有一个 git repo 几周前导入了一个 svn repo 的子目录。我试图从 svn repo 中提取更改并得到以下信息：

```
$ git svn fetch
    M   data/tree.js
Author: merger not defined in /Users/astacy/work/static_authors file

$ git svn rebase 
Index mismatch: 0415f543471e6a8f9b3ec787020bbe395c44d4f4 != a6767586c9e4f74cd279b0b42cc2545eac190704
rereading 76a26e5c064f05d26fa51aa2b2b715d50a7651b4
    M   data/tree.js
Author: merger not defined in /Users/astacy/work/static_authors file 
```

`git status`说工作目录是干净的，但`data/tree.js`我的 git repo 中没有更新文件。 ***我如何把这个改变拉进来？***

### 更多信息：

我不记得我最初是如何进行导入的，但我认为它类似于：

```
$ git svn init <url> 
```

`.git/config`有这个：

```
[svn-remote "svn"]
    url = svn+ssh://astacy@example.com/var/svn/siq_repo
    fetch = my/path/to/directory/gloss:refs/remotes/trunk
[svn]
    authorsfile = /Users/astacy/work/static_authors 
```

此外，有问题的文件在`data/tree.js`初始导入后立即移动到`src/data/tree.js`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:37:50.650

`git svn rebase`似乎对失踪的作者很挑剔：它只是停止变基。*将用户合并*的条目添加到文件 */Users/astacy/work/static_authors* 中，你应该很高兴：

例子：`merger = merger's name <mergers@emailadress>`

# c++ - 运行 VS2008 解决方案时出现运行时错误；解决方案构建良好

> ID：10350879
> 
> 赞同：1
> 
> 时间：2012-04-27T12:48:07.733
> 
> 标签：c++, visual-studio, visual-studio-2008, visual-c++, runtime-error

我收到错误对话框：

> “无法启动程序“C:\Users\James\Desktop\MyAppSourceCode\Release\Myapp.exe”
> 。C:\Users\James\Desktop\MyAppSourceCode\Release 不是有效的工作目录。"

当我尝试运行（F5 或 F10）VS2008 解决方案（VC++）时。

它正在编译，没有错误。我还尝试清洁整个溶液并重建它。但仍然收到此错误。

在解决方案目录中也有一个名为 Release 的文件夹。

我不明白为什么会出现这样的错误。我强烈认为这是一个 VS 问题，因为相同的代码在另一个系统中运行良好。

任何人都可以帮助我摆脱这个运行时错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:32:56.987

设置你的工作目录。

如果您的代码位于已编译的二进制文件附近，请在项目选项卡中打开调试并将其设置为 $(ProjectDir)。您可以将地址更改为 nmake 放置它们的另一个文件夹。

# touch - MotionEvent 坐标到场景坐标

> ID：10350880
> 
> 赞同：1
> 
> 时间：2012-04-27T12:48:13.270
> 
> 标签：touch, andengine, multi-touch

我正在 AndEngine 中使用多点触控开发应用程序。为了获取我使用的触摸手指的坐标，`pSceneTouchEvent.getMotionEvent().getX([pointer index])`因为 TouchEvent 没有等效的 getter，只有`pSceneTouchEvent.getX()`.

问题是 MotionEvent 返回屏幕上的坐标，而 TouchEvent 返回场景上的坐标。当我放大或缩小时，屏幕和场景坐标不匹配，所以我需要将屏幕坐标转换为场景坐标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-25T12:30:49.640

面对同样的问题并有解决办法。首先我想解释一下，然后将转换方法粘贴。

**问题**

您想要的*坐标*是与您的场景起点 (0,0) 相关的场景坐标（即 AndEngine anchorCenter 位于左下角）。边界：从 (0,0) 到 [Camera.getSurfaceWidth(), Camera.getSurfaceHeight()]。

您从 MotionEvent 获得的坐标是*屏幕坐标*，范围从 (0,0) 到 [displayMetrix.widthPixels, displayMetrix.heightPixels]，它们独立于缩放或相机到场景的位置。

**解决方案说明**

对于*横坐标*（通常为*x*），您必须将*屏幕*坐标转换为相关的*场景坐标*（以相机宽度为界）并将总和与相机左角位置（在场景中）相加。在公式中它看起来像：

```
x = cameraStartX + screenX * camera.width / display.width

cameraStartX - the camera left corner x position on the scene
screenX - x you get from MotionEvent
camera.width - just getWidth() from your camera method
display.width - display width from DisplayMetrics 
```

对于*纵坐标*（通常是*y*），您必须对横坐标执行相同的操作，但请记住它具有不同的方向。所以公式会有所改变：

```
y = cameraStartY+(display.heigth-screenY)*camera.height/display.heigth

cameraStartY - camera left corner y position on the scene
screenX - y you get from MotionEvent
camera.height - just getHeight() from your camera method
display.height - display height from DisplayMetrics 
```

**方法实现示例**

```
public static void convertScreenToSurfaceCoordinates(
        final Camera camera,
        final Context context,
        final float[] screenCoordinates,
        final float[] surfaceCoordinates) {
    //you may want to have a separate methods and fields for display metrics
    //and no Context as a method param
    WindowManager windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = windowManager.getDefaultDisplay();
    DisplayMetrics metrics = new DisplayMetrics();
    display.getMetrics(metrics);
    float displayWidth = Math.max(metrics.widthPixels, metrics.heightPixels);
    loat displayHeight = Math.min(metrics.widthPixels, metrics.heightPixels); 

    //abscissa
    surfaceCoordinates[Constants.VERTEX_INDEX_X] = camera.getXMin()
            + screenCoordinates[Constants.VERTEX_INDEX_X] * camera.getWidth()
            / displayWidth;
    //ordinate
    surfaceCoordinates[Constants.VERTEX_INDEX_Y] = camera.getYMin()
            + (displayHeight - screenCoordinates[Constants.VERTEX_INDEX_Y])
            * camera.getHeight() / displayHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:03:15.560

找到解决方案。Andengine 以与 Android 不同的方式处理触摸事件，因此没有触摸坐标的历史记录。在处理事件之前，我只是将它们自己存储在私有变量中：

```
if (pSceneTouchEvent.getPointerID() == 0) {
    pointer0LastX = pSceneTouchEvent.getX();
    pointer0LastY = pSceneTouchEvent.getY();
}
if (pSceneTouchEvent.getPointerID() == 1) {
    pointer1LastX = pSceneTouchEvent.getX();
    pointer1LastY = pSceneTouchEvent.getY();
} 
```

然后我只是访问这些而不是从 TouchEvent 中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:59:48.243

您可以从 TouchEvent 访问原始 MotionEvent。

# android - 是否需要颜色和尺寸资源？

> ID：10350881
> 
> 赞同：0
> 
> 时间：2012-04-27T12:48:18.727
> 
> 标签：android, xml, android-layout, localization, colors

在 Android 中，是否有必要将颜色和尺寸定义为 res 目录中的 xml 资源，而不是直接在布局 xml 文件中指定颜色代码/尺寸。我理解您使用字符串在资源中定义它们以进行本地化。这些怎么样2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:58:20.930

没有必要将它们放在 xml 中，但这样更有用，如果您想要为不同的屏幕尺寸提供不同的颜色，那么您编写的代码更少，这是一个标准......使用 xml 有很多好处......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:59:50.600

实际上这不是必需的，但它可能在许多情况下对您有所帮助，即。如果你想改变你所有的文本视图的文本颜色，你只需要在你的“颜色”文件中改变它。

# c# - iOS 上的 SQLite - SQL 从一个文件复制到另一个文件

> ID：10350894
> 
> 赞同：3
> 
> 时间：2012-04-27T12:48:49.737
> 
> 标签：c#, sql, ios, sqlite, xamarin.ios

我的 iOS 应用程序中有 2 个数据库文件：

*   一个原始数据库（只读，保存在我的应用程序的主目录中）
*   用户的数据库（保存在用户的`Documents`文件夹中）

我需要运行 SQL 查询以从原始数据库复制到用户的数据库，例如：

```
INSERT INTO UserDatabase.MyTable
SELECT * FROM OriginalDatabase.MyTable; 
```

这可能来自在 iOS 上运行的 SQLite 吗？问题是两个数据库位于不同的文件夹中。我想避免在代码（C#）中做这项工作，这是显而易见的方式，只是慢得多。

我的应用程序是用 C#/MonoTouch 编写的，但这可能无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:44:01.993

使用@Peter M 的链接解决。

这是在 iOS 上执行此操作的 SQL：

```
 ATTACH DATABASE '../YourApp.app/YourDatabase.db' AS OriginalDatabase;

    INSERT INTO Main.MyTable
    SELECT * FROM OriginalDatabase.MyTable;

    DETACH DATABASE OriginalDatabase; 
```

请注意 的使用`Main`，这是您连接到的数据库`SqliteConnection`，在我的情况下，它位于`Documents`文件夹中。

您可以针对`OriginalDatabase`、连接、子选择等执行任何您需要的操作。

# css - 如何设置 CSS 表格的最大高度？

> ID：10350895
> 
> 赞同：0
> 
> 时间：2012-04-27T12:48:51.457
> 
> 标签：css, css-tables

我正在尝试使用本文中概述的方法在 div 中垂直居中文本：http: [//css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

```
.container {
    width: 160px;
    margin: 80px auto;
    padding: 5px;
    height: 60px;
    max-height: 60px;
    border: 1px solid black;
    display: table;
}

.container p {
    height: 60px;
    max-height: 60px;
    display: table-cell;
    vertical-align: middle;
    text-align: center;
}
```

```
<div class="container">
<p>This is a lot of text. A really large amount of text, even. So much text here. And it just keeps going, oh my. Wow - so much text.</p>
</div>

<div class="container">
<p>Here's one line.</p>
</div>
```

JSFiddle在这里：http: [//jsfiddle.net/Vc88w/2/](http://jsfiddle.net/Vc88w/2/)

div 不得大于指定的 60px 高度，并且应隐藏任何溢出的文本。当没有足够的文本使 div 溢出时，CSS 表格技巧可以正常工作，但是当文本过多时，它会迫使 div 大于 60px（第一个示例），这不是我想要的。

除了 height 和 max-height 之外，还有一个 CSS 规则可以让我覆盖 CSS 表格的高度吗？或者，在容器 div 上强制最大高度为 60px 的同时，我还能如何实现垂直居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:08:22.657

是的，您必须在“.container”中将“display:table”更改为“display:block”

```
.container {
width: 160px;
margin: 80px auto;
padding: 5px;
height: 60px;
max-height: 60px;
border: 1px solid #000;
overflow: hidden;
display: block;
} 
```

# actionscript-3 - 如何在 Flex Chart 中绘制色带？

> ID：10350903
> 
> 赞同：0
> 
> 时间：2012-04-27T12:49:30.000
> 
> 标签：actionscript-3, apache-flex, actionscript, flex-charting

我想在我的弹性图表中绘制一个自定义背景，垂直轴是线性的，水平轴是类别。在后台，我想根据用户提供的数据对区域进行着色。我在图表背景元素中尝试了 CartesianDataCanvas 和网格线，但没有得到好的解决方案。有人有想法吗？我更喜欢使用没有 mxml 的脚本。提前致谢..

我正在添加我的代码以显示我在使用 CartesianDataCanvas 时遇到的问题。它在面积图中工作得很好，但我想在气泡图中绘制。由于气泡系列不是从水平类别轴的起点开始，CartesianDataCanvas 从第一个气泡的中点开始绘制。但我试图在图表的整个宽度中绘制矩形。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" >

    <fx:Script><![CDATA[
        import mx.charts.ChartItem;
        import mx.charts.LinearAxis;
        import mx.charts.chartClasses.CartesianCanvasValue;
        import mx.charts.chartClasses.CartesianTransform;
        import mx.charts.series.items.ColumnSeriesItem;
        import mx.collections.ArrayCollection;
        import mx.containers.Box;
        import mx.containers.HBox;
        import mx.controls.Alert;
        import mx.core.INavigatorContent;
        import mx.events.FlexEvent;

        [Bindable]
        public var profits:ArrayCollection = new ArrayCollection([
            {Month:'jan', Profit:130},
            {Month:'feb', Profit:75},
            {Month:'mar', Profit:110},
            {Month:'apr', Profit:300}
        ]);
        [Bindable]
        public var ratios:Array=['25','25','25','50'];
        [Bindable]
        public var colors:Array=['0xff0000','0x00ff00','0x0000ff','0xc0c0c0']
        private function draw():void {
            canvas.clear();
            canvas2.clear();
            if(colors.length==ratios.length){
                var canvasWidth = canvas.width;
                var canvasHeight = canvas.height;
                var sumRatio:Number=getSum(ratios);
                var nextMax:Number=0;
                for(var j:int=0, colnum:int=colors.length-1;j<colors.length;j++,colnum--){
                    canvas.beginFill(uint(colors[colnum]));
                    canvas2.beginFill(uint(colors[colnum]));
                    var minPt:Array;
                    var minimumPoint:Point;
                    if(j==0){
                        minimumPoint=new Point(0,0);

                    }else{
                        minimumPoint=new Point(0, canvasHeight*nextMax);
                    }
                    minPt= canvas.localToData(minimumPoint);
                    var division:Number=Number(ratios[colnum])/sumRatio;
                    var maxPt:Array = canvas.localToData(new Point(canvasWidth,minimumPoint.y+canvasHeight*division));
                    nextMax+=division;
                    canvas.drawRect(minPt[0], maxPt[1], maxPt[0], minPt[1]);
                    canvas.endFill();
                    canvas2.drawRect(minPt[0], maxPt[1], maxPt[0], minPt[1]);
                    canvas2.endFill();
                }

            }

        }

        private function getSum(array:Array):Number{
            var sum:Number=0;
            for(var i:int=0;i<array.length;i++){
                if(!isNaN(Number(array[i]))){
                    sum+=Number(array[i]);
                }
            }
            return sum;
        }

    ]]></fx:Script>
    <s:HGroup>

            <mx:AreaChart id="myChart"  showDataTips="true"
                          dataProvider="{profits}" 
                          selectionMode="single" creationComplete="draw()"
                          >
                <mx:annotationElements>
                    <mx:CartesianDataCanvas id="canvas" alpha="0.2" includeInRanges="true"/>
                </mx:annotationElements>

                <mx:horizontalAxis>
                    <mx:CategoryAxis  
                        dataProvider="{profits}" 
                        categoryField="Month"
                        />
                </mx:horizontalAxis>

                <mx:series>
                    <mx:AreaSeries
                        id="series1"
                        xField="Month" 
                        yField="Profit" 
                        displayName="Profit"
                        selectable="true" 
                        >

                    </mx:AreaSeries>
                </mx:series>
            </mx:AreaChart>
            <mx:Legend dataProvider="{myChart}"/>
        <mx:BubbleChart id="mybubChart"  showDataTips="true"
                        dataProvider="{profits}" 
                        selectionMode="single" creationComplete="draw()"
                        >
            <mx:annotationElements>
                <mx:CartesianDataCanvas id="canvas2" alpha="0.2" includeInRanges="true"/>
            </mx:annotationElements>
            <mx:horizontalAxis>
                <mx:CategoryAxis  
                    dataProvider="{profits}" 
                    categoryField="Month"
                    />
            </mx:horizontalAxis>
            <mx:series>
                <mx:BubbleSeries
                    id="series2"
                    xField="Month" 
                    yField="Profit" 
                    radiusField="Profit"
                    displayName="Profit"
                    selectable="true" 
                    >
                    <mx:fill>
                        <mx:SolidColor color="0x663399"/>
                    </mx:fill>
                </mx:BubbleSeries>
            </mx:series>
        </mx:BubbleChart>
        <mx:Legend dataProvider="{mybubChart}"/>
    </s:HGroup>
</s:Application> 
```

# php - Javascript字节数组到二进制字符串？

> ID：10350905
> 
> 赞同：1
> 
> 时间：2012-04-27T12:49:53.780
> 
> 标签：php, javascript, encoding, binary

这是我的字节数组： `var $x = [108,181,183,176,140,239,53,105,104,47,47,21,147,67,96,87,175,35,67,97]`

它有一个相当于乱码的二进制 PHP：`$x = "lµ·°Œï5ih//“C``W¯#Ca";`

现在，我可以使用什么来`javascript:btoa(SOME_ENCODING_FUNCTION($x));`完美匹配`<?php base64_encode($x); ?>`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:54:30.483

```
String.fromCharCode.apply(null, $x); 
```

将返回要在中使用的字符串`btoa`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:52:09.017

您可以使用 base64_encode 函数，但它的 javascript 版本

[http://phpjs.org/functions/base64_encode:358](http://phpjs.org/functions/base64_encode:358)

PHP JS 是一个很好的项目，旨在将 PHP 函数移植到 javascript，所以如果你需要一个与 PHP 函数完全相同的 javascript 函数，谷歌搜索“phpjs _function_name_”通常会给你你想要的:)

# php - 获取下一个即将到来的游戏，在星期一显示

> ID：10350906
> 
> 赞同：0
> 
> 时间：2012-04-27T12:49:56.023
> 
> 标签：php, mysql

周六会有比赛，但不是每个周末。如果下周六有即将到来的比赛，我想在新的一周展示。

如果我们在前星期一，我正在考虑这样的事情来提前 6 天检查，如果星期六有比赛，它应该找到它。但当然它缺少部分，只是一个开始，但我卡住了。至于现在它会找到 1 个月后的下一场比赛，它应该只显示那周是否有比赛。

```
"Select * From games Where date > DATE_ADD(CURDATE(),INTERVAL 6 DAY)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:58:33.990

您可以使用 PHP 的[`DateTime`](http://us3.php.net/manual/en/book.datetime.php)类来查找下周六的日期：

```
$nextSaturday = new DateTime('next Saturday'); 
```

从那里，只需选择日期所在的位置，`$nextSaturday->format('Y-m-d')`即可找到下周六的比赛（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:12:44.003

您要让数据库获取的是“未来 6 天内的所有游戏”真的

```
SELECT * FROM `games` WHERE `date` >= CURDATE()
AND `date` <= DATE_ADD(CURDATE, INTERVAL 6 DAY) 
```

...或者您可以使用`BETWEEN`...

```
SELECT * FROM `games` WHERE `date` 
BETWEEN CURDATE()
AND DATE_ADD(CURDATE(), INTERVAL 6 DAY) 
```

* * *

[编辑]

刚刚弄清了问题标题中“在星期一显示”的含义……您实际上只想在星期一执行查询:)

因此，您要么只想在星期一**运行**查询（在应用程序级别完成），要么在其中运行查询，`AND DAYOFWEEK(CURDATE()) = 2`这样它就像

```
SELECT * FROM `games` WHERE `date` >= CURDATE()
AND `date` <= DATE_ADD(CURDATE, INTERVAL 6 DAY)
AND DAYOFWEEK(CURDATE()) = 2 
```

尽管这样的效率相当低，因为即使不需要，您也会**始终运行查询 - 最好让应用程序****只在 Mondays 执行它**。

在这种情况下，您最好使用 drrcknlsn 的解决方案，使用 PHP 的`DateTime`对象并执行类似的操作（或将整个事情整合到 Cron 作业中）：

```
if(date("N") == 1) {
  $oNextSaturday = new DateTime('next Saturday');
  $sFetchUpcomingGames = "SELECT * FROM `games` WHERE `date` = '{$oNextSaturday->format('Y-m-d')}'";

  //execute the database query and perform relevant outputs, and so on
} 
```

# html - 边框半径在 IE7 或 8 中不起作用

> ID：10350908
> 
> 赞同：-4
> 
> 时间：2012-04-27T12:50:03.663
> 
> 标签：html, css

我正在制作一个类示例边框半径，该类在 Firefox 和 Chrome 中正常工作。

但是边界半径中的 IE7 和 8 无法正常工作。

那么我们如何在 IE7 或 IE8 中修复边界半径曲线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:54:08.347

边框半径是 IE8 及以下不原生支持的 CSS3 功能。

您可以查看[http://css3pie.com/](http://css3pie.com/)，这是一个 javascript 库，它模仿了现代浏览器上可用的一些 CSS3 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:55:16.383

我们将 pie 用于 css3 属性-它将占用所有浏览器，请检查链接

[http://css3pie.com/](http://css3pie.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:56:34.053

border-radius 是 css3 属性，IE7 或 IE8 不支持 css3。如果你想把边界半径设置得那么糟糕，请参考这个网站[Css3pie](http://css3pie.com/)。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:14:30.450

[IE8 及更低](http://caniuse.com/#search=border-radius)版本中不可用的border-radius 。但是，您基本上有 3 个选择：

*   以防万一，没有这些圆形边框并不重要：对于不支持的浏览器，只需将其省略即可。
*   使用图像切片（例如推拉门技术）
*   使用专有的`.htc`和`VML`模拟 IE 中的圆角。一个著名且非常可靠的框架是[CSS3Pie](http://css3pie.com)（但还有其他几个，只需选择您喜欢的一个）

# windows-phone-7 - 批量推送到 Windows 通知服务器

> ID：10350915
> 
> 赞同：1
> 
> 时间：2012-04-27T12:50:17.803
> 
> 标签：windows-phone-7, push-notification, mpns

我们设法创建了一项服务，它将通知推送到 Windows Nofification Server (WNS)，并且运行良好。

我们只需要每天向 WNS 推送一次通知。因此，我想知道是否有任何方法可以将 Uris 批处理到一个调用中，然后我们可以将其发送到 WNS，而不是像注册的客户一样进行多次调用。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:21:56.997

不，架构就是这样构建的。您必须拨打与客户一样多的电话。但这是怎么回事？请求在性能和流量上很便宜。

# javascript - 分页符页面的特定部分

> ID：10350920
> 
> 赞同：1
> 
> 时间：2012-04-27T12:50:28.853
> 
> 标签：javascript, css, asp.net-mvc-3, browser, printing

我试图将页面的特定部分带到下一页，在第一页上保留该药水之后的其余页面元素，让我用一个图来解释

![在此处输入图像描述](../Images/52fc1d3c12b2f87290e2062b75250432.png)

我想将`tr`with`class=nextpage`带到下一页并保持页面的其余部分不变，以便最终打印看起来像

![在此处输入图像描述](../Images/6304dce06f90cc815adf39f83fd08ee3.png)

有可能实现吗？或者我是否必须考虑其他一些选项，比如 iText sharp（虽然我也不知道如何使用它）.. 请帮我找到方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:10:05.113

因此，通常您会编写以下 CSS 来获取下一页上的元素并完成：

```
.nextPage {
  page-break-before: always;
} 
```

但这仅适用于块元素。您可以添加`display:block`到您的 CSS 类，但这会改变表格行的格式。也许最好的做法是将表格行中第一个单元格的内容包装在一个 div 中，这是一个块元素：

```
<table>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><div class="nextPage"></div></td><td></td>
  </tr>
</table> 
```

# javascript - 为什么这个鼠标悬停脚本不能正常工作？

> ID：10350921
> 
> 赞同：0
> 
> 时间：2012-04-27T12:50:29.283
> 
> 标签：javascript

我写了这个脚本：

```
var elms = document.getElementsByTagName('li');

for (var i = 0; i < elms.length; i++){
  if (elms[i].className == 'liitem'){
  var delete_id = elms[i].id;
  elms[i].onmouseover = function(){  
    document.getElementById("delete-" + delete_id).style.display = "block";
    }
  elms[i].onmouseout =  function(){  
    document.getElementById("delete-" + delete_id).style.display = "none";
    }
   }
}​ 
```

HTML：

```
<li class="liitem" id="205">
    <span>
        <a href="http://www.google.com/finance/portfolio?action=view&pid=1" target="_blank">One:</a> </span>
    <br>
    <ul><li>
        <span><a href="http://www.google.com" target="_blank">www.google.com</a> </span><span id="delete-205" style="float:right;font-size:11px;display:none;"><a href="">delete</a></span></li></ul>
</li><br>

<li class="liitem" id="204">
    <span>
        <a href="http://www.google.com/finance/portfolio?action=view&pid=1" target="_blank">Two:</a> </span>
    <br>
    <ul><li>
        <span><a href="http://www.google.com" target="_blank">www.google.com</a> </span><span id="delete-204" style="float:right;font-size:11px;display:none;"><a href="">delete</a></span></li></ul>
</li><br>

<li class="liitem" id="203">
    <span>
        <a href="http://www.google.com/finance/portfolio?action=view&pid=1" target="_blank">Three:</a> </span>
    <br>
    <ul><li>
        <span><a href="http://www.google.com" target="_blank">www.google.com</a> </span><span id="delete-203" style="float:right;font-size:11px;display:none;"><a href="">delete</a></span></li></ul>
</li><br>
​ 
```

现场演示：http: [//jsfiddle.net/5FBjm/1/](http://jsfiddle.net/5FBjm/1/)

但它不能正常工作。我希望当鼠标悬停在`<li>`“liitem”类的某个元素上时，显示该元素的“删除”链接（具有相同的 ID）。

相反，在我的脚本中，只出现最后一个“删除”。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:53:49.327

替换`delete_id`为`this.id`它可以工作：http: [//jsfiddle.net/5FBjm/4/](http://jsfiddle.net/5FBjm/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:53:17.267

您有一个变量范围问题 - 在回调中`delete_id`始终分配最后一个值，而不是注册回调时的值。

在 Google 上搜索“javascript 循环范围回调”，了解如何修复它的*数百个示例（其中很多在这里）。*

* * *

编辑 - 正如@gabitzish 指出的那样，您可以使用`this.id`

这仅适用于浏览器将当前元素作为`this`回调传递。

由于您需要的循环变量实际上是该元素的`id`，因此您可以直接使用它而不必担心循环范围问题。如果它是不是元素属性的其他变量，则上面的答案将适用。

# iphone - Interface Builder 中的组视图

> ID：10350931
> 
> 赞同：17
> 
> 时间：2012-04-27T12:51:20.873
> 
> 标签：iphone, uiview, interface, interface-builder, nib

有没有办法在另一个视图中移动一组视图**而不将所有视图集中在中心**？

编辑：这里有一些带有过程的图像。

1.- 我有一个带有单独子视图（标签、按钮、图像...）的视图 ![在此处输入图像描述](../Images/4d9ecfd17f5740d028959995be6e62b7.png)

2.- 我创建一个新视图（将包含所有子视图） ![在此处输入图像描述](../Images/37e467973e64ec2363e09cca65353feb.png)

3.- 选择所有子视图并将它们放在新的超级视图中。 ![在此处输入图像描述](../Images/f0f8b261ed19932fdb6b9e6ac57d0347.png)

4.-当子视图在新的“超级”视图中时，它们都居中，我需要重新定位所有。 ![在此处输入图像描述](../Images/d70d98dd45a0e31310de19e28bfe50b8.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-01T15:50:52.083

我找到了一个你不会相信的非常好的解决方案..！

我有一组大约 30 个标签和按钮逐个像素地定位，所以无论如何我都必须移动它们，同时保留它们彼此的相对位置。这是我所做的：

1.  选择所有视图（标签、按钮等）
2.  编辑器 -> 嵌入 -> 视图。（现在，它们在视图中）
3.  *随心所欲地*移动该视图。（哎呀，您甚至可以将其剪切并粘贴到新的 NIB 上！）
4.  选择视图，Editor -> Unembed ！:D

我没有在任何地方读过这个，我昨天想出了它.. 我 100% 肯定有人在我之前找到了这种方式。

**编辑：**

~~似乎 Xcode 4.5 使这个答案过时了。复制/粘贴一堆视图现在会保留它们彼此的相对位置。如果您养成使用它的习惯，请不要为此烦恼！~~

其实我觉得这个答案还是可行的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:57:29.787

![在此处输入图像描述](../Images/12f572159838cef7bb0711495e3e8341.png)

您可以制作一个视图，除了 xib 的主视图添加该视图包含所有图像视图，此视图中的标签如下图所示。分配`IBoutlet`给 ViewInvoiceNumber 并在设置框架时添加子视图将根据该视图（如组）移动。但是您必须输入所有标签、按钮、图像视图作为该视图的子视图。

希望对你有帮助...

# jakarta-ee - 耳朵战争和财产的位置

> ID：10350936
> 
> 赞同：0
> 
> 时间：2012-04-27T12:51:42.183
> 
> 标签：jakarta-ee, web-applications, classpath, war, ear

我有一个具有以下结构的耳朵文件

```
META-INF/
META-INF/MANIFEST.MF
META-INF/application.xml
META-INF/build.properties
doi-ejb.jar
doi-web.war
lakshmi-ejb.jar
lakshmi-std-cmp-ejb.jar
lib/
lib/commons-1.0.jar
lib/commons-web-1.0.jar
lib/doi-int-test-lib.jar
lib/doi-lib.jar
lib/doi-unit-test-lib.jar
lib/lakshmi-lib.jar
lib/lakshmi-std-cmp-lib.jar 
```

战争文件 ( `doi-web.war`) 包含

```
META-INF/
META-INF/MANIFEST.MF
WEB-INF/
WEB-INF/classes/
WEB-INF/classes/ch/[...]
WEB-INF/classes/common-messages.properties
WEB-INF/classes/common-messages_de.properties
WEB-INF/classes/common-messages_it.properties
WEB-INF/classes/commons.properties
WEB-INF/classes/messages.properties
WEB-INF/faces-config.xml
WEB-INF/glassfish-web.xml
WEB-INF/web.xml
resources/
resources/css/[...]
resources/images/[...]
resources/scripts/
view/[...] 
```

我可以在 Glassfish 中部署 ear 文件而不会出现任何错误：

```
[...]

javax.enterprise.system.container.web.com.sun.enterprise.web || WEB0671: Loading application [doi#doi-web.war] at [/doi]
javax.enterprise.system.tools.admin.org.glassfish.deployment.admin || doi was successfully deployed in 5,251 milliseconds. 
```

如果我尝试启动应用程序，我会得到：

```
[...]
Caused by: java.util.MissingResourceException: Can't find bundle for base name /commons, locale en_US
at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)
at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)
at java.util.ResourceBundle.getBundle(ResourceBundle.java:705)
at ch.ethz.id.wai.web.controller.ApplicationSettingsController.setup(ApplicationSettingsController.java:25)
... 67 more 
```

现在据我了解，这意味着`/commons.properties`应该在类路径中。目录`WEB-INF/classes`不应该在类路径中吗？Glassfish 会读取该`WEB-INF`目录，因为该`web.xml`文件已被识别。

# c++ - 在简单的情况下使用 scoped_ptr 是不是有点矫枉过正？

> ID：10350937
> 
> 赞同：5
> 
> 时间：2012-04-27T12:51:53.370
> 
> 标签：c++, boost, scoped-ptr

我在这样的小函数中使用 scoped_ptr。这样我就不必调用删除。这是这种用法的过度杀伤力吗？我的团队成员更喜欢原始指针和删除。如果碰巧在非常关键的路径中使用 scoped_ptr，使用它的成本是多少？这不应该是内联的并且完全等同于在优化的二进制文件中使用普通删除吗？

```
void myfunc()
{
  boost::scoped_ptr<myobj> objptr = someFactory::allocate();
  callsomeotherfunc(objptr.get());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T12:54:25.367

我不确定性能是否受到影响，但`scoped_ptr`在这里使用可以确保`myfunc()`异常安全：如果`callsomeotherfunc()`抛出异常，动态分配的内存仍将被释放。如果`scoped_ptr`未使用并且`callsomeotherfunc()`可以抛出，则该函数的结构必须与此类似：

```
void myfunc()
{
    myobj* objptr = someFactory::allocate();

    try
    {
        callsomeotherfunc(objptr);
        delete objptr;
    }
    catch (const some_exception&)
    {
        delete objptr;
        throw;
    }
} 
```

这很容易出错，因为该函数的所有未来修改都需要确保`delete objptr;`在所有可能的退出点上调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:57:15.660

我不会`scoped_ptr`为此目的使用，而是`unique_ptr`在 C++11 和`auto_ptr`较旧的编译器中使用，这两者对于您的特定用例都是等效的。至于它是否是矫枉过正，不，不是，它是提供异常安全的唯一选择（比如说在代码中的任何东西`myfunc`或者`callsomeotherfunc`抛出，你希望内存被释放）。在性能方面，这三个选项等效于`delete`在未引发异常的情况下在函数末尾调用，并且比使用带有 a 的`try/catch`块`delete`在发生异常时重新引发异常更快。

此外，您似乎是从工厂分配的，在某些设计中，工厂将有一个`deallocate`需要调用的操作，而不是`delete`. 如果是这种情况，您可能会考虑使用不同的智能指针（来自标准，如果是释放内存的正确方法`shared_ptr`，这将是矫枉过正；或者您还可以提供*删除器*的一些不足）`delete``managed_ptr`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:56:21.920

**不它不是。**使用智能指针（例如异常安全和自动资源清理）的好处远高于使用智能指针创建、维护和销毁所需的几个额外字节内存和几个额外 CPU 时钟的性能损失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:58:42.827

我认为与 scoped_ptr 用法等效的是：

```
void myfunc()
{
  myobj* objptr = someFactory::allocate();
  try
  {
      callsomeotherfunc(objptr);
  }
  catch (...)
  {
      delete objptr;
      throw;
  }
  delete objptr;
} 
```

我知道我更喜欢写哪个版本...*

# jquery - 无法使用 jQuery 调用 flickr api

> ID：10350946
> 
> 赞同：0
> 
> 时间：2012-04-27T12:52:31.367
> 
> 标签：jquery, ajax, json, flickr

我在我的网站上运行此代码以获取一组照片，但我总是会出错。控制台日志显示“parsererror”。我究竟做错了什么？

中间.php

```
<?php die(file_get_contents($_REQUEST['url'])); ?> 
```

脚本.js

```
//Flickr
var url = encodeURIComponent('http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=1408bff5f72a4b84b924d13e8562b6a2&photoset_id=77649470@N03&photoset_id=72157629903184261&format=json');
$.ajax({
    url: "middle.php?url="+url,
    dataType: "json",
    success: function(){
        console.log("yes");
    },
    error: function(jqXHR, textstatus, errorThrown){
        console.log("nooo");
        console.log( textstatus );
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:58:36.503

如果您因为跨域安全问题而遇到问题，您需要创建一个“中间人”页面。我将使用 PHP 作为我的示例。我将创建一个`middle.php`接受不同域的 url，获取文本/代码并返回它。我的 JS 会将此视为同站点请求，并且一切都将是花花公子。

**中间.php**

```
<?php die(file_get_contents($_REQUEST['url'])); ?> 
```

如果您使用的不是 PHP，您可以在自己的环境中应用相同的策略。

然后你的 ajax 调用将如下所示..

```
var url = encodeURIComponent('http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=1408bff5f72a4b84b924d13e8562b6a2&photoset_id=77649470@N03&photoset_id=72157629903184261&format=json');

$.ajax({
    url: "middle.php?url="+url,
    dataType: "json",
    success: function(){
        console.log("yes");
    },
    error: function(jqXHR, textstatus, errorThrown){
        console.log("nooo");
        console.log( textstatus );
    }
}); 
```

但是，我更喜欢`getJSON()`用于获取 JSON 数据，而不是`ajax()`

```
$.getJSON("middle.php?url="+url, function(obj){
    if (obj.photoset){
        console.log("Success");
    } else {
        console.log("Error");
    }
}); 
```

# erlang - 在使用 key-to-pid 机制时处理临时 gen_servers 状态的保存

> ID：10350947
> 
> 赞同：2
> 
> 时间：2012-04-27T12:52:38.353
> 
> 标签：erlang, concurrent-programming, autosave, gen-server

我想知道当它们与密钥相关联时如何处理临时 gen_servers 状态的保存。

要将键与进程关联，我使用了一个名为 pidstore 的进程。Pidstore 最终启动进程。我给 pidstore 一个 Key 和一个 M,F,A，它在全局中查找密钥，然后如果找到则返回 pid 或应用 MFA（必须返回 {ok, Pid}），用密钥注册 Pid全局并返回 Pid。

我可能有许多不活动的 gen_servers，它们的状态可能很大。因此，我设置了 handle_info 回调以将状态保存在我的数据库中，然后停止该过程。gen_servers 在他们的主管中被认为是暂时的，所以它们不会重新启动，直到有东西再次需要它们。

问题从这里开始：如果我在代表 {car, 23} 的进程中的 handle_info 的保存步骤期间用它的键调用一个进程，比如 {car, 23}，我会按预期取回 pid，因为过程正在保存且未完成。所以我会用 gen_server:call 调用我的进程，但我永远不会有响应（并达到默认的 5 秒超时），因为进程正在停止。（问题一）

为了解决这个问题，进程可以从全局注销自己，然后保存它的状态，然后停止。但是，如果我在注销后但在保存完成之前需要它，我将加载一个新进程，该进程可能会在数据库中加载未更新的值。（问题 B）

为了再次解决这个问题，我可以确保数据库中的加载和保存被排队并且不能并发。这可能是一个瓶颈。（问题 C）

我正在考虑另一种解决方案：我的进程在保存之前可以告诉 pidstore 他们很忙。pidstore 将保留一个繁忙进程的列表，并对这些键的任何需求做出“忙碌”响应。保存完成后，进程将告诉 pidstore no_more_busy 并在询问密钥时启动新进程。（即使旧的过程没有完成，它已经完成保存，所以它可以花时间独自死去）。

这对我来说似乎有点混乱，但是尝试多次从密钥中获取 Pid 感觉更简单，而不是包装对 gen_server 的每次调用以处理可能的超时。（当流程完成但仍在全球注册时）。

我对所有这些半问题和半解决方案有点困惑。您在这种情况下使用的设计是什么，或者我该如何避免这种情况？

我希望我的信息清晰易读，也请告诉我英文错误。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:00:55.350

也许您想在`gen_server:call`. 这将阻止其他呼叫在您写入 DB 时进入。

一般来说，听起来您已经创建了一个进程寄存器。如果您想在本地注册，您可能想查看 gproc ( [https://github.com/uwiger/gproc](https://github.com/uwiger/gproc) )，它在这方面做得很好。使用 gproc，您可以完全按照上面描述的方式进行操作，使用密钥注册进程。`init`如果您在函数中注册 gproc 并在写入 DB 时取消注册，也许就足够了。`terminate`您也可以在函数中写入 DB 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:06:45.473

现在我决定坚持 erlang “让它崩溃”的哲学。如果一个进程在关闭时收到消息，这些消息将不会得到答复，并将触发 gen_server:call/* 超时。

我认为在正确的地方处理这个超时会很无聊，我现在还没有决定在哪里，但这是特定于我的应用程序的，所以在这里没有意义。

# javascript - 包含 cookie 的 javascript

> ID：10350953
> 
> 赞同：0
> 
> 时间：2012-04-27T12:52:50.720
> 
> 标签：javascript, cookies

我正在开发一个使用 cookie 的程序。这是一个购物车应用程序。我想问的是，有什么方法可以让用户输入的确切值存储在 cookie 中？

我的页面设置方式是一个表格中有两个项目已经设置了价格，用户只输入数量。用户输入数量，点击添加到购物车，然后点击链接查看购物车。该链接将用户带到另一个页面，该页面的数量、价格和总价显示在表格中。

我的查看购物车页面现在显示用户输入的数量。但现在我的下一个问题是获取要显示的每个项目的总数。我尝试使用我的 retr() 函数中的最后一行代码，但没有任何成功。有任何想法吗？这是我的查看购物车链接页面

```
<html>
    <head>
        <title> Cart </title>
        <h1> My cart </h1>
        <script type = "text/javascript">

            function retr()
            {
                var cke = document.cookie;

if (cke.length>0) {
start = cke.indexOf("Circle=");
if (start!= -1) {
start = start + 7
end = cke.indexOf("$", start);
if (end == -1) end = cke.length;
qu1 = cke.substring(start, end);
document.getElementById("q1").value = qu1;
}
}

if (cke.length>0) {
start = cke.indexOf("$");
if (start!= -1) {
start = start + 1
end = cke.indexOf("e", start);
if (end == -1) end = cke.length;
pr1 = cke.substring(start, end);
document.getElementById("p1").value = pr1;
}
}

if (cke.length>0) {
start = cke.indexOf("Stickman=");
if (start!= -1) {
start = start + 9
end = cke.indexOf("$", start);
if (end == -1) end = cke.length;
qu2 = cke.substring(start, end);
document.getElementById("q2").value = qu2;
}
}

if (cke.length>0) {
start = cke.indexOf("$");
if (start!= -1) {
start = start + 55
end = cke.indexOf("e", start);
if (end == -1) end = cke.length;
pr2 = cke.substring(start, end);
document.getElementById("p2").value = pr2;
}
}
document.getElementById("t1").value = qu1 * pr1;
document.getElementById("tot").value = document.getElementById("t1") + document.getElementById("t2");

            }
        </script>
    </head>
    <body onload = "retr()">
        <table border = "1">
            <td>Circle </td>
            <td><input type = "text" size = "8" id = "q1" readonly = "readonly" /></td> 
            <td> <input type = "text" size = "8" id = "p1" readonly = "readonly" /> </td>
            <td> <input type = "text" size = "8" id = "t1"> </td>
            <tr> </tr>
            <td> Stickman </td>
            <td> <input type = "text" size = "8" id = "q2" readonly = "readonly" /></td>
            <td> <input type = "text" size = "8" id = "p2" readonly = "readonly" /> </td>
            <td> <input type = "text" size = "8" id = "t2"> </td>
            <tr> </tr>
            <td colspan = "3"> TOTAL: </td>
            <td> <input type = "text" size = "8" id = "tot"> </td>
        </table> 
        <br /> <br />
        <input type ="text" id = "ret" readonly = "readonly" />
        <br / > <br />
        <input type = "button" value = "Checkout">
        <br /> <br />
        <a href = "store.html" > Continue Shopping </a>
    </body>
</html> 
```

# c - 检测到堆栈粉碎。C 编程

> ID：10350965
> 
> 赞同：-1
> 
> 时间：2012-04-27T12:53:35.753
> 
> 标签：c, stack, stack-smash

我正在尝试运行 C 程序。它似乎工作正常，但最后它显示：

检测到堆栈破坏

这是代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

extern int errno;

int main(int argc, char *argv[]){  /*Para pasar argumentos a la funcion main*/

char id[7]="\0";       
char orden[10]="\0";   
char arg[3]="\0";
char idhijo[7]="\0";      
char ordenhijo[10]="\0";   
char arghijo[3]="\0";

int i=0, j=0, k=0;

int a=1, pipe1[2], pipe2[2], control, argument=0, status, posx=50, posy=50, s, t, arg_val=0, orden_val=0;

FILE *fichero;

char mensaje1[4], mensaje2[4], mensaje3[6];
char posxpadre[4]="50", posypadre[4]="50", hijoPID[4];

system("clear");

control = pipe(pipe1);
if(control !=0){

perror("pipe1");
exit(errno);
}

control = pipe(pipe2);
if(control !=0){

perror("pipe2");
exit(errno);
}

control = fork();                            

fichero=fopen(argv[1], "r");
if (fichero){

while((i != EOF) && (j != EOF) && (k != EOF)){

if((i != EOF) && (j != EOF)  && (k != EOF)){

     if (control ==-1){

     perror("fork");
     exit(errno);

  }

  if (control !=0){

        k=fscanf(fichero, "%s", id);
        i=fscanf(fichero, "%s", orden);
        j=fscanf(fichero, "%s", arg);

        if(Robot_valido(id)){  

            write(pipe1[1], id, 7);
                write(pipe1[1], arg, 3);
                write(pipe1[1], posxpadre, 4);            
                write(pipe1[1], posypadre, 4);
                write(pipe1[1], orden, 10);

            read(pipe2[0], posxpadre, 4);
            read(pipe2[0], hijoPID, 6);
            read(pipe2[0], posypadre, 4);            

            printf("Hijo con PID %s desplazo el robot a la posicion: (%s, %s)\n\n", hijoPID, posxpadre, posypadre);

            }
 }

else{

    read(pipe1[0], idhijo, 7);
    read(pipe1[0], arghijo, 3);
    read(pipe1[0], posxpadre, 4);
    read(pipe1[0], posypadre, 4);
    read(pipe1[0], ordenhijo, 10);

    if (Robot_valido(idhijo)!=0){

        Orden_valida(ordenhijo, arghijo, &orden_val, &arg_val);

        if (orden_val !=0 && arg_val !=0){

            argument=atoi(arghijo);
            posy=atoi(posypadre);
            posx=atoi(posxpadre);

        if (strcmp(ordenhijo, "arriba")==0){

             if (posy>1){

               while (argument > 0){

                   if (posy>0){

                   posy--;
                   argument--;
                       }

                   else{

                   argument=0;
                   }
               }
                   }
             }

         if (strcmp(ordenhijo, "abajo")==0){

                   if (posy<100){

               while (argument > 0){

                    if (posy<100){
                    posy++;
                    argument--;

                     }

                     else{

                     argument=0;
                     }
                 }
                    }
             }

         if (strcmp(ordenhijo, "derecha")==0){

                    if (posx<100){

                  while (argument > 0){

                   if (posx<100){
                       posx++;
                       argument--;

                       }

                   else{
                        argument=0;
                   }
                 }
                }
             }

         if (strcmp(ordenhijo, "izquierda")==0){

                 if (posx>0){

                  while (argument > 0){

                    if (posx>0){
                       posx--;
                       argument--;
                        }

                    else{

                       argument=0;
                    }
                      }
                 }
             }

         printf("Robot desplazado hasta la posicion: (%d, %d)\n", posx, posy);

         sprintf(mensaje1, "%d", posx);   
         sprintf(mensaje2, "%d", posy);
         sprintf(mensaje3, "%d", getpid());      

         write(pipe2[1], mensaje1, 4);
             write(pipe2[1], mensaje3, 6);
         write(pipe2[1], mensaje2, 4);

         }

    }

    }
  } 
}

 close(pipe1[0]);
 close(pipe1[1]);
 close(pipe2[0]);
 close(pipe2[1]);

 }

 } 
```

有谁知道为什么会这样？我在谷歌做了很多研究，但我尝试的每一个可能的答案都没有奏效。任何帮助都会非常有帮助。

谢谢你们！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:56:53.660

您在非常小的缓冲区中执行大量 I/O。如果其中任何一个溢出，它们很可能会破坏堆栈。

如果可能的话，你应该在 Valgrind 中运行你的程序。您还可以尝试增加缓冲区的大小，并从`fscanf()`更安全的方式切换（例如读取一整行`fgets()`然后在内存中解析它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-22T19:51:51.407

```
 read(pipe2[0], hijoPID, 6); 
```

应该

```
 read(pipe2[0], hijoPID, 4); 
```

但这不是唯一的问题。你应该为你的宽度使用常量，这样就不会发生这种情况。

```
const int hijoPID_l = 4;
read(pipe2[0], hijoPID, hijoPID_l); 
```

此外，当您执行 fscanf 时，您应该指定宽度。

```
k=fscanf(fichero, "%7", id);
i=fscanf(fichero, "%10", orden);
j=fscanf(fichero, "%3", arg); 
```

如果您使用常量作为长度，例如，

```
char fmt_id[8];
sprintf(fmt_id, "%%%d", id_l);
k=fscanf(fichero, fmt_id, id); 
```

可用于在循环开始时动态创建格式字符串，然后为每个`fscanf()`.

# java - 从 Java 共享或发送复杂数据到 Coldfusion

> ID：10350971
> 
> 赞同：0
> 
> 时间：2012-04-27T12:53:45.457
> 
> 标签：java, coldfusion

我正在编写 JavaClass，它读取 Excel 文件并创建一个 Collection 对象。将结构从 Java 传递到 Coldfusion 的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:38:14.607

让 java 类返回[java.util.Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。CF 会自动[将其转换为](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7884.html)可以与任何 CF 结构函数一起使用的结构。

也就是说，克雷格提出了一个很好的观点。如果您使用的是 CF9 或 Railo，两者都有可用的电子表格功能。您可能想使用这些进行调查，而不是自己动手。

# mysql - ORDER BY MySQL 和时间戳

> ID：10350973
> 
> 赞同：0
> 
> 时间：2012-04-27T12:53:51.037
> 
> 标签：mysql, timestamp, sql-order-by

我想按他们的时间戳对我的帖子进行排序，但事实并非如此，我也不知道为什么。当我在没有顺序的情况下执行查询时，它可以工作，但是当我添加 ORDER BY 时，它不起作用。

这是我的查询：

```
SELECT * FROM Posts INNER JOIN Topics ON idTopic = idTopics  
INNER JOIN Users ON idUserPosts = idUsers
WHERE idTopic = :idTopic LIMIT :limit_down, :limit_up 
ORDER BY Posts.datePosts DESC; 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:56:10.183

尝试反转 ORDER BY/LIMIT：

```
SELECT * FROM Posts 
INNER JOIN Topics ON idTopic = idTopics  
INNER JOIN Users ON idUserPosts = idUsers
WHERE idTopic = :idTopic 
ORDER BY Posts.datePosts DESC
LIMIT :limit_down, :limit_up; 
```

order by 需要在限制之前，否则限制不太有用：您将获得表的前 X 行，但“第一”使用什么标准？然后你会订购这些结果。

如果您真的愿意，您也可以这样做，但请考虑一下您当时在做什么：

```
SELECT * FROM (
    SELECT Posts.datePosts orderField, * FROM Posts 
    INNER JOIN Topics ON idTopic = idTopics  
    INNER JOIN Users ON idUserPosts = idUsers
    WHERE idTopic = :idTopic 
    LIMIT :limit_down, :limit_up;
)
ORDER BY orderField DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:55:33.227

试试这个：

```
SELECT * FROM Posts INNER JOIN Topics ON idTopic = idTopics  
INNER JOIN Users ON idUserPosts = idUsers
WHERE idTopic = :idTopic
ORDER BY Posts.datePosts DESC
LIMIT :limit_down, :limit_up; 
```

限制必须是应用于查询的最后一件事，因此 order by 需要放在第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:57:53.500

似乎 dateposts 是一个日期字段，那么为什么不试试这个

```
SELECT * FROM Posts INNER JOIN Topics ON idTopic = idTopics  
INNER JOIN Users ON idUserPosts = idUsers
WHERE idTopic = :idTopic LIMIT :limit_down, :limit_up 
ORDER BY DATE(Posts.datePosts) DESC; 
```

# c++ - 无法使用 MinGW 构建 wxMSW-2.8.12

> ID：10350974
> 
> 赞同：1
> 
> 时间：2012-04-27T12:53:51.563
> 
> 标签：c++, mingw, wxwidgets, mingw32

我已经尝试了两种不同版本的 gcc（4.6 和 4.7），其中有几种配置，包括

```
make -f makefile.gcc USE_OPENGL=1 BUILD=debug SHARED=0 RUNTIME_LIBS=static UNICODE=1
make -f makefile.gcc MONOLITHIC=1 BUILD=debug SHARED=0 UNICODE=1
make -f makefile.gcc USE_OPENGL=1 BUILD=debug UNICODE=1 
```

这是错误

```
../../src/msw/thread.cpp:525: error: cast from 'void*' to 'THREAD_RETVAL' loses precision
../../src/msw/thread.cpp: In member function 'wxThreadError wxThreadInternal::WaitForTerminate(wxCriticalSection&, void**, wxThread*)':
../../src/msw/thread.cpp:845: error: cast from 'void*' to 'DWORD' loses precision
../../src/msw/thread.cpp: In member function 'void wxThread::Exit(void*)':
../../src/msw/thread.cpp:1165: error: cast from 'void*' to 'unsigned int' loses precision 
```

我的平台是 Windows 7 64 位，但我没有尝试构建 64 位库（无论如何都不是故意的）
我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:26:16.873

DWORD 是 32 位值，而在 64 位架构上，指针是 64 位值。代码应该使用 DWORD_PTR，它在 x86_64 上定义为 64 位值，在 x86 上定义为 32 位。可能您应该将其构建为 32 位应用程序，而避免尝试将其构建为原生 64 位应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T00:30:27.780

尝试使用 MinGW-w64 构建 wxWidgets 时会发生错误。就我而言，问题的根源在于我安装了 Strawberry Perl 5.14.2.1 (64bit) 并且不知道 perl 已经安装了路径中的 gcc 编译器。

# mongodb - NoSQL 数据库：读取一致性如何？

> ID：10350978
> 
> 赞同：5
> 
> 时间：2012-04-27T12:54:02.817
> 
> 标签：mongodb, couchdb, acid, oracle-nosql, nosql

据我所知，NoSQL 数据库对于高强度数据读取应用程序可能是一个不错的选择，但如果您需要做大量数据更新并且事务性对您来说非常重要（如果没有酸合规性）。正确的？可能太简单了。

但无论如何，假设我部分正确，至少我现在担心 NoSQL 数据库如何维护您正在读取或写入的数据的“读取一致”视图。还是他们？如果他们不这样做，那不是一个很大的问题吗？

我的意思是，如果您正在阅读（或更新）的数据在您阅读时发生变化，那么您可能会得到一个不一致/脏的结果集。来自 Oracle rdbms 背景，所有这些都是为您处理的，我发现缺乏读取一致性并不是一个大问题，这让我感到困惑。很可能我错过了所有这一切的一些关键点。有人可以让我直截了当吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:53:06.103

我是 Oracle NoSQL 数据库的开发人员，将回答您与该特定 NoSQL 系统相关的问题。

Oracle NoSQL 数据库 API 允许程序员通过每个 API 调用指定读取一致性级别。四个可能的值，从最严格到最宽松，是 Absolute、Time、Version 和 None。Absolute 表示始终从复制主机读取，以便返回最新的值。“时间”表示系统可以从任何副本返回一个值，该值至少在主节点的某个时间增量内（例如，从主节点 2 秒内的任何副本读取值）。对系统的每次读写调用都会返回一个“版本句柄”。当指定 Consistency.Version 时，可以将此版本句柄传递给任何读取调用，并告诉系统从至少与该版本一样最新的任何副本读取。这对于读取修改写入（又名 CAS）场景很有用。最后一个值 Consistency.None 表示可以使用任何副本（即不保证一致性）。

我希望这是有帮助的。

查尔斯·兰姆

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:24:43.120

NoSQL 数据库可以是读一致的，尽管如果不是严格如此，这通常不是什么大问题，请查看[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)。在这方面已经进行了大量研究，我建议阅读[Amazon 的 Dynamo 论文](http://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf)，以快速了解分布式系统（如 NoSQL 数据库）面临的一些问题和解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:36:17.003

MongoDB 允许应用程序使用“写关注”来选择所需的读取一致性级别。此概念允许您的应用程序阻塞，直到给定写入满足特定条件。

例如，只要将操作传送到主服务器，您就可以认为任何写入都是成功的。或者，您可以阻塞直到写入已传播到副本集中的大多数节点。通过这种方式，您可以根据口味混合性能/一致性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T14:50:43.623

这取决于您使用的 NoSQL 数据库，因为每个数据库都实施不同的策略。例如，您可以阅读[Riak](http://wiki.basho.com/Eventual-Consistency.html)对其“最终一致性”模型的解释或 Lars Hofhansel 关于[HBase 中 ACID 的文章](http://hadoop-hbase.blogspot.com/2012/03/acid-in-hbase.html)

# java - 2011-02-28的下一年是什么？

> ID：10350979
> 
> 赞同：-4
> 
> 时间：2012-04-27T12:54:07.827
> 
> 标签：java

很明显，2011-01-01 的下一年是 2012-01-01，而 2011-03-01 的下一年是 2012-03-01。

但是，2011-02-28 的下一年是什么？2012 年 2 月 28 日还是 2012 年 2 月 29 日？

赞，我从 2011-02-28 开始持有股票一年，截止日期是什么时候？

在 java 中，我知道 2012-02-29 的前一年（ Calendar.add(Calendar.YEAR, -1) ）是 2011-02-28。但是，2011-02-28 的下一年是 2012-02-28。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:56:05.897

我认为这取决于您的业务规则。对我来说，从 2 月 28 日开始的一年总是下一年的 2 月 28 日。您在特定日期购买股票，而不是根据某些规定，即当月的最后一天。如果您在 27 日买入股票，那么从那时起就是 27 日。等等等等。

但是您的企业可以自由地以不同的方式定义它。我认为这根本不是一个编程问题，而是一个业务逻辑问题。

# c# - 将 JSON 字符串反序列化为 c# 对象

> ID：10350982
> 
> 赞同：26
> 
> 时间：2012-04-27T12:54:19.720
> 
> 标签：c#, json, asp.net-mvc-3, c#-4.0

我的应用程序位于用 C# 编码的 Asp.Net MVC3 中。这就是我的要求。我想要一个格式如下的对象。这个对象应该在我反序列化 Json 字符串时实现。

```
var obj1 = new { arg1=1,arg2=2 }; 
```

![在此处输入图像描述](../Images/4f0b42c240f4b234d4a071273b4ca6b1.png)

使用以下代码后：

```
string str = "{\"Arg1\":\"Arg1Value\",\"Arg2\":\"Arg2Value\"}";
JavaScriptSerializer serializer1 = new JavaScriptSerializer();
object obje = serializer1.Deserialize<object>(str); 
```

我得到的对象，即**obje**不充当 obj1

![在此处输入图像描述](../Images/2e9e3c1e4f79ab0fc1c0a7d65a778ced.png)

在这里，在这个例子中，我的 JSON 字符串是静态的，但实际上 JSON 字符串将在运行时动态生成，所以我无法一直获取 Arg1 和 Arg2。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T13:10:54.330

我认为 JavaScriptSerializer 不会创建动态对象。

所以你应该先定义类：

```
class MyObj {
    public int arg1 {get;set;}
    public int arg2 {get;set;}
} 
```

并反序列化它而不是`object`：

```
serializer.Deserialize<MyObj>(str); 
```

不是testet，请尝试。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-27T10:45:34.247

使用此代码：

```
var result=JsonConvert.DeserializeObject<List<yourObj>>(jsonString); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-27T13:13:44.413

我相信你正在寻找这个：

```
string str = "{\"Arg1\":\"Arg1Value\",\"Arg2\":\"Arg2Value\"}";
JavaScriptSerializer serializer1 = new JavaScriptSerializer();
object obje = serializer1.Deserialize(str, obj1.GetType()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-05T19:12:24.360

这可能有用：

```
var serializer = new JavaScriptSerializer();
dynamic jsonObject = serializer.Deserialize<dynamic>(json); 
```

其中“json”是包含 JSON 值的字符串。然后从您可以使用的 jsonObject 中检索值

```
myProperty = Convert.MyPropertyType(jsonObject["myProperty"]); 
```

将 MyPropertyType 更改为正确的类型（ToInt32、ToString、ToBoolean 等）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-04T14:23:27.990

同样的问题也发生在我身上。因此，如果服务将响应作为 JSON 字符串返回，您必须先反序列化该字符串，然后您才能正确反序列化对象类型：

```
string json= string.Empty;
using (var streamReader = new StreamReader(response.GetResponseStream(), true))
        {
            json= new JavaScriptSerializer().Deserialize<string>(streamReader.ReadToEnd());

        }
//To deserialize to your object type...
MyType myType;
using (var memoryStream = new MemoryStream())
         {
            byte[] jsonBytes = Encoding.UTF8.GetBytes(@json);
            memoryStream.Write(jsonBytes, 0, jsonBytes.Length);
            memoryStream.Seek(0, SeekOrigin.Begin);
            using (var jsonReader = JsonReaderWriterFactory.CreateJsonReader(memoryStream, Encoding.UTF8,          XmlDictionaryReaderQuotas.Max, null))
            {
                var serializer = new DataContractJsonSerializer(typeof(MyType));
                myType = (MyType)serializer.ReadObject(jsonReader);

            }
        } 
```

4 当然它会工作.... ;)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-30T12:40:23.787

解决方案 ：

```
 public Response Get(string jsonData) {
     var json = JsonConvert.DeserializeObject<modelname>(jsonData);
     var data = StoredProcedure.procedureName(json.Parameter, json.Parameter, json.Parameter, json.Parameter);
     return data;
 } 
```

模型：

```
 public class modelname {
     public long parameter{ get; set; }
     public int parameter{ get; set; }
     public int parameter{ get; set; }
     public string parameter{ get; set; }
 } 
```

# image - 如何在 Groovy 中调整图像大小？

> ID：10350984
> 
> 赞同：6
> 
> 时间：2012-04-27T12:54:21.853
> 
> 标签：image, groovy, jpeg

如何在 Groovy 中调整/缩小 JPG 图像的大小？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T13:06:55.247

或者，如果您不想加载外部依赖项，只需正常执行：

```
import static java.awt.RenderingHints.*
import java.awt.image.BufferedImage
import javax.imageio.ImageIO

def img = ImageIO.read( new File( '/tmp/image.png' ) )

def scale = 0.5

int newWidth = img.width * scale
int newHeight = img.height * scale

new BufferedImage( newWidth, newHeight, img.type ).with { i ->
  createGraphics().with {
    setRenderingHint( KEY_INTERPOLATION, VALUE_INTERPOLATION_BICUBIC )
    drawImage( img, 0, 0, newWidth, newHeight, null )
    dispose()
  }
  ImageIO.write( i, 'png', new File( '/tmp/scaled.png' ) )
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T12:54:39.480

imgscalr库有一个简单的 API 可以实现这一点**[。](https://github.com/rkalla/imgscalr)**

*   下载 imgscalr-lib jar [（当前版本 4.2）](https://github.com/downloads/thebuzzmedia/imgscalr/imgscalr-lib-4.2.zip)
*   然后，您可以在一次调用中调整图像大小，例如`Scalr.resize(imageIn, 1800)`
*   默认情况下，纵横比保持不变，第二个参数是新图像的最大宽度（或高度）

这是一个完整的工作示例...

```
import org.imgscalr.Scalr
import java.awt.image.BufferedImage
import javax.imageio.ImageIO

def imageFile = new File("C:\\resize-image\\fullsize.jpg")
def imageIn = ImageIO.read(imageFile);
def newFile = new File("C:\\resize-image\\resized.jpg")

BufferedImage scaledImage = Scalr.resize(imageIn, 1800);
ImageIO.write(scaledImage, "jpg", newFile);

println "Before: Width:"+imageIn.getWidth()+" Height:"+imageIn.getHeight()+" Size: "+ imageFile.size()
println "After: Width:"+scaledImage.getWidth()+" Height:"+scaledImage.getHeight() +" Size: "+ newFile.size() 
```

将 imgscalr 库添加到您的类路径或使用 -cp 调用 groovy ...

> groovy -cp imgscalr-lib-4.2.jar resize-image.groovy

# telerik - RadTreeView 在上下文菜单单击时自动退出编辑模式

> ID：10350993
> 
> 赞同：1
> 
> 时间：2012-04-27T12:54:57.267
> 
> 标签：telerik, rad-controls, radtreeview

我有一个像这样的 radTreeView。

```
<telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" LoadingPanelID="RadAjaxLoadingPanel1">
<telerik:RadTreeView ID="RadTreeView1" CheckBoxes="true" Runat="server" 
    OnContextMenuItemClick= "menuClicked" OnClientContextMenuItemClicking="clientMenuClicking"
    OnNodeEdit="RadTreeView1_NodeEdit">

<ContextMenus>
        <telerik:RadTreeViewContextMenu ID="ctxMenuAdd" runat="server">
            <Items>
                <telerik:RadMenuItem Value="addNode" Text="Add Node">
                </telerik:RadMenuItem>
                <telerik:RadMenuItem Value="delNode" Text="Delete Node">
                </telerik:RadMenuItem> 
                <telerik:RadMenuItem Value="renNode" Text="Rename Node">
                </telerik:RadMenuItem>                  
            </Items>
         </telerik:RadTreeViewContextMenu>
</ContextMenus>

</telerik:RadTreeView>
</telerik:RadAjaxPanel> 
```

这是客户端的 ContextMenuClicking javascript。

```
function clientMenuClicking(sender, args) 
    {
        var menuItem = args.get_menuItem();
        var treeNode = args.get_node();
        menuItem.get_menu().hide();

        switch (menuItem.get_value()) 
        {
            case "addNode":
                var windowResult = window.showModalDialog("newNode.html", "Enter Value", "dialogHeight: 300px; dialogWidth: 300px;");                    
                document.getElementById("HiddenField1").value = windowResult;
                break;
            case "renNode":
                treeNode.startEdit();                    
                break;                
        }
    } 
```

最后这是 onNodeEdit 的服务器端代码

```
protected void RadTreeView1_NodeEdit(object sender, RadTreeNodeEditEventArgs e)
    {
        e.Node.Text = e.Text;
    } 
```

问题是，当我右键单击节点并选择“重命名”时，节点仅会在一瞬间变成一个文本框，然后它会返回正常模式。

我怎样才能摆脱这个问题？

# iphone - iPhone 发布到 Facebook 应用程序墙

> ID：10350994
> 
> 赞同：0
> 
> 时间：2012-04-27T12:55:00.650
> 
> 标签：iphone, ios, facebook, facebook-graph-api

在我的 iPhone 应用程序中，我只想将消息发布到 Facebook 应用程序页面。

我已经下载并实现了 facebook-sdk，并查看了演示应用程序。

我读到的是，看起来我必须做三件事： - 登录 facebook（完成！） - 获取访问令牌 - 发布消息（这与发布到我自己的墙上一样吗）

使用graph-api是否正确？

任何人都可以在正确的轨道上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:01:29.780

可能这能解决你的问题

```
- (void) SendTextMsg
{
  NSMutableDictionary *param = [NSMutableDictionary dictionary];
  [facebook dialog:@"feed" andParams:param andDelegate:self];
} 
```

# javascript - Javascript 和 Canvas - 正弦波动画

> ID：10350996
> 
> 赞同：3
> 
> 时间：2012-04-27T12:55:10.843
> 
> 标签：javascript, canvas, trigonometry

所以，我有下面的代码来动画一些东西......这是非常基本的......

```
SetInterval(function() {
   particlesY -= 1;
}, 10); 
```

然后是这样的循环：

```
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.drawRect(50, particlesY, 32, 32); 
```

这很好用，但我想要一点 X 轴变化 - 我可以`Math.random()`用来获得随机方向，但结果非常生涩而且非常可笑。

我认为正弦波会给我一个很好的平滑 X 轴变化。

有任何想法吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:09:50.567

正弦波应该相当简单：

```
ctx.drawRect( Math.sin(particlesY) * 100, particlesY, 32, 32); 
```