# StackOverflow 问答 11479000-11479999

# javascript - 甜蜜的缩略图预览画廊

> ID：11479003
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:07:45.160
> 
> 标签：javascript, css, wordpress

我正在尝试在我的网站上实现这个画廊：http: [//tympanus.net/Tutorials/SweetThumbnails/](http://tympanus.net/Tutorials/SweetThumbnails/)

我正在使用网站提供的 CSS 和 JavaScript，但我不知道需要做什么才能将其添加到我的 Wordpress 主题中。

这就是我所拥有的：http: [//jsfiddle.net/3n4tm/](http://jsfiddle.net/3n4tm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:28:12.113

他们提供的 HTML 结构需要在某个地方进入您的主题模板。完全取决于您需要它显示的位置。如果你想要主页，你可以根据你的主题将它添加到 index.php 或 home.php 中。如果您希望它显示在 WordPress 页面上，[您可能需要创建一个特殊的页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)，其中包含您的代码以及 WordPress 循环、标题等。

CSS 将进入您主题的样式表 (style.css) 或自定义样式表，一些主题使 custom_style.css 或 custom.css 文件可用于您自己的自定义样式。

Javascript 可以全部放入一个 .js 文件中（创建您自己的文件，称为 sweetthumbs.js 之类的文件，并将所有代码转储到其中），然后在该区域的相应页面上调用您的 WordPress 主题。（通常这在 header.php 中，然后 header.php 包含在主题中的其他 .php 模板中）。你会像这样加载它`<script type="text/javascript" src="/path/to/your/file/sweetthumbs.js"></script>`。.js 文件需要上传到您的服务器，最好是到您正在使用的主题的主题文件夹中（在您的站点根目录/安装 WordPress 的位置，然后`/wp-content/themes/yourthemename`）

# asp.net - ASP.NET MVC 3 中的大量延迟

> ID：11479006
> 
> 赞同：3
> 
> 时间：2012-07-13T22:08:22.357
> 
> 标签：asp.net, asp.net-mvc

在一页上，我看到一些我无法解释的 AJAX 请求有 500 毫秒的延迟。有问题的页面在加载时会触发两个 AJAX 请求以执行相同的操作，其中一个将被阻止。这是为什么？

在调用方法之前 ASP.NET 堆栈做了`Application_AcquireRequestState`什么？我使用了 MiniProfiler 的 ghetto 分析方法，当`Application_AcquireRequestState` 被调用时，我可以看到在调用这两个`Application_PostMapRequestHandler`和`Application_AcquireRequestState`.

我完全禁用了会话状态。

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Appfail.WebForms" version="1.1.0" targetFramework="net45" />
  <package id="AttributeRouting" version="2.5.1.0" targetFramework="net45" />
  <package id="AttributeRouting.Core" version="2.5.1.0" targetFramework="net45" />
  <package id="AttributeRouting.Core.Web" version="2.5.1.0" targetFramework="net45" />
  <package id="AutoMapper" version="2.1.267" />
  <package id="CodeContracts.Unofficial" version="1.0.0.2" targetFramework="net45" />
  <package id="DataAnnotationsExtensions" version="1.1.0.0" />
  <package id="DataAnnotationsExtensions.MVC3" version="1.1.0.0" />
  <package id="DiffPlex" version="1.2.0" targetFramework="net45" />
  <package id="DotNetOpenAuth.Core" version="4.1.0.12182" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth.Consumer" version="4.1.0.12182" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth.Core" version="4.1.0.12182" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth2.Client" version="0.25.0-draft1" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth2.ClientAuthorization" version="0.25.0-draft1" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth2.Core" version="0.25.0-draft1" targetFramework="net45" />
  <package id="DotNetOpenAuth.OpenId.Core" version="4.1.0.12182" targetFramework="net45" />
  <package id="DotNetOpenAuth.OpenId.RelyingParty" version="4.1.0.12182" targetFramework="net45" />
  <package id="DynamicQuery" version="1.0" />
  <package id="EntityFramework" version="5.0.0" targetFramework="net45" />
  <package id="LinqKit" version="1.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Mvc" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Web.Optimization" version="1.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" />
  <package id="MiniProfiler" version="2.0.2" />
  <package id="MiniProfiler.EF" version="2.0.3" />
  <package id="morelinq" version="1.0" targetFramework="net45" />
  <package id="Newtonsoft.Json" version="4.5.8" targetFramework="net45" />
  <package id="RequestReduce" version="1.8.76" targetFramework="net45" />
  <package id="WebActivator" version="1.5.1" />
  <package id="WebGrease" version="1.1.0" targetFramework="net45" />
</packages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:40:14.477

也许不相关，但我遇到了同样的问题，因为我在 Global.asax Application_Start() 方法中做了很多初始化。一旦我将它们最小化，我的第一个冷负荷就变得比以前快得多。

# git - git 别名可以在其名称中包含句点 (.) 吗？

> ID：11479010
> 
> 赞同：4
> 
> 时间：2012-07-13T22:08:44.610
> 
> 标签：git, alias

我发现自己经常输入`git st .`（其中`st`已别名为`status`）来获取当前目录文件的状态。

我经常把它打错，因为`git st.`它当然不会被识别。

我很想能够别名`st.`，但似乎我不能。如果我添加`st. = status .`到我的 .gitconfig 别名，我会`fatal: bad config file`在 git 调用时收到错误消息。

是否可以创建一个带有句点的别名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T22:19:23.380

不，这是不可能的（无需更改和重新编译 Git 本身）。从[git-config](http://git-scm.com/docs/git-config)文档：

> 变量名不区分大小写，只允许使用字母数字字符和`-`，并且必须以字母字符开头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T22:17:38.530

不; 如果您查看[`config.c`](https://github.com/git/git/blob/master/config.c#L1253-L1272)，它必须是字母数字。

```
/*
 * Validate the key and while at it, lower case it for matching.
 */
*store_key = xmalloc(strlen(key) + 1);

dot = 0;
for (i = 0; key[i]; i++) {
    unsigned char c = key[i];
    if (c == '.')
        dot = 1;
    /* Leave the extended basename untouched.. */
    if (!dot || i > baselen) {
        if (!iskeychar(c) ||
            (i == baselen + 1 && !isalpha(c))) {
            error("invalid key: %s", key);
            goto out_free_ret_1;
        }
        c = tolower(c);
    } else if (c == '\n') {
        error("invalid key (newline): %s", key);
        goto out_free_ret_1;
    }
    (*store_key)[i] = c;
}
(*store_key)[i] = 0; 
```

# html - CSS：页面和宽度 100%

> ID：11479011
> 
> 赞同：0
> 
> 时间：2012-07-13T22:09:00.233
> 
> 标签：html, css

现在我可能在这里很愚蠢，但我有以下css：

```
*{
    margin:0;
    padding:0;
}

body {
    background:url(../img/bg/bg-body.jpg) repeat top left #f0f0f0;
    font-family:"ProximaNova", Arial, Helvetica, sans-serif;
    color:#ffffff;
    width:100%;
}

#header {
    background: #000000;
    border-bottom: 1px solid #282828;
    height:126px;
    min-width:1000px;
    zoom:1;
}

#header #nav {
    height:46px;
    line-height:46px;
    margin-top:10px;
    background:url(../img/bg/nav/nav-bg.png) repeat-x top left #000000;
} 
```

问题是当用户放大页面时会发生这种情况：

![](../Images/6748834cb11e70c8be8644468c1a1ada.png)

而它应该是这样的：

![](../Images/b6fd0b402ff1aa949e7036846a296ab5.png)

我需要这方面的帮助，如果我能得到任何帮助，我将不胜感激。

@Jessica，这是 html 代码：

```
<div id="header">

<div id="content-wrap" class="header">

<div id="logo"></div>

<!--Begin News-->
<div id="news-scroller">
<b>Recent News: </b>
    <span id="quote-left">"</span>
        <div id="news-content">
            <a href="#">
            <?php
            if (mysql_num_rows($news)== 0){
                echo "There is currently no news from the Bowlplex Doubles, however there will be soon!";
            } else {
            echo $output['content'];
            }
            ?>
            </a>
        </div>
    <span id="quote-right">"</span>
    <div id="post">
        <b>Posted</b> <?php echo $output['date'].",&nbsp;".$output['time']; ?>
    </div>
</div>
<!--/End News-->

</div>

<!--Begin Navigation-->
<div id="nav">

<ul>

<a href="/"><li class="active">Home</li></a>
<a href="/scores"><li>Scores</li></a>
<a href="/entries"><li>Entry Forms</li></a>
<a href="/scoreboard"><li>Live Scoreboard</li></a>
<a href="/contact"><li>Contact</li></a>
<a href="/archive"><li class="last">Archive</li></a>

</ul>

</div>
<!--/End Navigation-->

</div>
<!--/End Header--> 
```

**更新**

新代码：

```
body {
    background:url(../img/bg/bg-body.jpg) repeat top left #f0f0f0;
    font-family:"ProximaNova", Arial, Helvetica, sans-serif;
    color:#ffffff;
    width:100%;
}
#header {
    background: #000000;
    border-bottom: 1px solid #282828;
    height:126px;
    min-width:100%;
    min-width:1000px;
    zoom:1;
} 
```

然而问题依然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:16:33.210

min-width:1000px 大卫，尝试将此属性设置为百分比。您的 HTML 代码是什么样的？可以发一下吗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:18:58.617

我发现这个问题可以通过在 body 上设置 min-width 来解决。我通常只使用 960px 或类似的东西。

```
body { min-width: 1000px; } 
```

[我在这里](https://stackoverflow.com/questions/4736077/background-is-only-as-wide-as-viewport)问了一个类似的问题

# java - setMaximumSize 对 boxlayout 中排列的 JPanel 的影响

> ID：11479012
> 
> 赞同：2
> 
> 时间：2012-07-13T22:09:04.787
> 
> 标签：java, swing, layout, jpanel, sizing

我注意到在 boxlayout 中设置最大尺寸有些奇怪。

我需要在窗口右侧运行一列面板，并尝试使用框式布局对其进行设置。可能有 8-10 或 30-40，所以我给它们足够的空间来容纳 30-40，但如果只有 8-10，它们会分散开来占用所有可用空间，看起来很奇怪。所以我想我会为他们设置MaximumSize 以阻止这种情况发生......

...我一直以他们中的大多数人消失而告终。

所以我把它分解成一堆非常基本的彩色面板，试图看看发生了什么，我已经想出了如何继续，但我不喜欢它。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class BoxLayoutDemo extends JFrame {

  public BoxLayoutDemo() {
    super("JScrollPane Demonstration");
    setSize(800, 600);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    init();
    setVisible(true);
  }

  public void init() {
    setLayout(null);

    JPanel rightPanel = new JPanel();
    rightPanel.setBounds(400,0,400,600);
    rightPanel.setLayout(new BoxLayout(rightPanel, BoxLayout.PAGE_AXIS));

    JPanel greenPanel = new JPanel();
    JPanel bluePanel = new JPanel();
    JPanel yellowPanel = new JPanel();
    greenPanel.setBackground(Color.GREEN);
    bluePanel.setBackground(Color.BLUE);
    yellowPanel.setBackground(Color.YELLOW);

    rightPanel.add(greenPanel);
    rightPanel.add(bluePanel);
    rightPanel.add(yellowPanel);

    add(rightPanel);

  }

  public static void main(String args[]) {
    new BoxLayoutDemo();
  }
} 
```

...这正是我所期望的：三个彩色框占据了屏幕的右半部分。

如果我添加如下内容：

```
greenPanel.setMaximumSize(new Dimension(400,100));
bluePanel.setMaximumSize(new Dimension(400,100));
yellowPanel.setMaximumSize(new Dimension(400,100)); 
```

然后三个彩色框每个都只有 100px 高，只占屏幕的上半部分左右，这也是我所期望的。

但如果我这样做...

```
greenPanel.setMaximumSize(new Dimension(400,100));
yellowPanel.setMaximumSize(new Dimension(400,100)); 
```

蓝色面板将其他两个面板压低到只有几个 px 高。

这可能不会成为问题，我可以为所有内容设置最大尺寸，但在这并不可行的假设情况下，有没有办法改变这种行为，或者这只是盒子布局做？

编辑：

好的，所以我们将 test1 称为：

```
greenPanel.setMinimumSize(new Dimension(400,100));
yellowPanel.setMinimumSize(new Dimension(400,100)); 
```

...这对任何东西都没有影响，因为绿色和黄色面板无论如何都高约 200 像素。

测试2：

```
greenPanel.setMaximumSize(new Dimension(400,100));
yellowPanel.setMaximumSize(new Dimension(400,100)); 
```

...导致蓝色面板挤出最初描述的绿色和黄色面板。

测试3：

```
greenPanel.setMinimumSize(new Dimension(400,100));
greenPanel.setMaximumSize(new Dimension(400,100));
yellowPanel.setMinimumSize(new Dimension(400,100));
yellowPanel.setMaximumSize(new Dimension(400,100)); 
```

...应该会产生 100 px 高的绿色和黄色面板，正如您所描述的，除了在实践中实际发生的事情与 test2 中的完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:31:48.597

问题是，bluePane 的默认最大尺寸现在是 32767x32767...

布局管理器基本上会尝试为蓝色提供最大的空间（默认的最小尺寸在我的 PC 上似乎是 10x10（默认的首选尺寸也是如此））

如果不使用 setMaximumSize，我将您的代码更改为使用 minimumSize

```
greenPanel.setMinimumSize(new Dimension(400,100));
yellowPanel.setMinimumSize(new Dimension(400,100)); 
```

我可以得到想要的结果，因为布局管理器不能再为蓝色窗格分配更多空间。

**更新**

然后我错过了一些东西。

如果我使用您的默认代码，我会正常设置所有三个面板。如果我只使用绿色和黄色（最大尺寸），那么它们会像你描述的那样被压扁如果我设置绿色和黄色的最小尺寸，我会正常设置三个面板

这是我使用的代码。

```
public void init() {

    setLayout(null);

    JPanel rightPanel = new JPanel();
    rightPanel.setBounds(400,0,400,600);
    rightPanel.setLayout(new BoxLayout(rightPanel, BoxLayout.PAGE_AXIS));

    JPanel greenPanel = new JPanel();
    JPanel bluePanel = new JPanel();
    JPanel yellowPanel = new JPanel();

      Dimension size = new Dimension(400, 100);

      // Default
    //    greenPanel.setMaximumSize(size);
    //    bluePanel.setMaximumSize(size);
    //    yellowPanel.setMaximumSize(size);

      // Test 1
    //    greenPanel.setMaximumSize(size);
    //    yellowPanel.setMaximumSize(size);

      // Test 2
      greenPanel.setMinimumSize(size);
      yellowPanel.setMinimumSize(size);

    greenPanel.setBackground(Color.GREEN);
    bluePanel.setBackground(Color.BLUE);
    yellowPanel.setBackground(Color.YELLOW);

    rightPanel.add(greenPanel);
    rightPanel.add(bluePanel);
    rightPanel.add(yellowPanel);

    add(rightPanel);

  } 
```

你的默认

![您的默认设置](../Images/c88182ab35262e47370a944f4170f004.png)

仅限绿色和黄色最大（蓝色默认尺寸）

![测试 1 - 仅限绿色和黄色最大值](../Images/8d406c2e4769149ec0c7b0ef3934fefe.png)

仅限绿色和黄色最小值（蓝色默认尺寸）

![测试 2 - 仅绿色和黄色最小值](../Images/ac180c5315f0e616b78cca6f6d3a0fad.png)

现在认真想想发生了什么。

在默认测试下，布局管理器已确定它可以按比例布局所有面板（因为高度相同）。它必须这样做，因为已经设置了最大尺寸并且它有空间这样做。事实上，如果我根本没有设置任何尺寸（全部默认），它们会以这种方式布局

在测试 1 中，决定蓝色窗格比绿色和黄色（蓝色**最大**高度 = 32767，绿色和黄色**最大**高度 = 100）需要更多空间，因此将它们压扁（绿色和黄色最小高度为 10 像素）

在测试 2 中，决定蓝色窗格应该接收最大的大小（因为它的**MAX**大小为 32767，但最小和首选大小为 10），但也发现绿色和黄色窗格不能小于 100像素，因此它将剩余空间分配给蓝色（在这种情况下约为 100 像素）。

**更新 2**

好的，这就是我已经解决的问题：P。基本上，仅使用最小值或仅使用最大值之间的区别在于这些大小的默认大小（最小/最大/首选项）。

当您仅使用最小值时，总组合最大高度为 98301（每个组件最大为 32767）。这需要在组件之间进行划分。布局使用分解方法（根据需要为所有组件提供 % 的空间）。为此，它使用 max 和 pref 大小的组合。

当我只使用最小尺寸时，实际上分配了 200 像素的绿色和黄色 - 这归结为最大尺寸值。仅使用最大尺寸，绿色和黄色分配了 11 个像素（因为蓝色获得了最大份额）。

...所以是的，在这种情况下，最小尺寸被忽略了。

如果分配的空间量 (600) >= 总首选空间 (30)，则布局管理器使用此路径。如果分配的空间 (600) 小于总首选空间，布局管理器将使用 pref/min 大小的组合来计算因式...

文档实际上说布局管理器可能会忽略这些（最大/最小/首选项）值中的一个或多个，因为它们只是一个指导方针。

但是，如果改用 pref 大小，蓝色和绿色分配 229 像素（蓝色只有 140）。

在这种情况下，我会选择最大和首选尺寸的组合，或者使用类似 GridBagLayout 的东西。

我没有用过它，但很多人都对 MigLayout 发誓。

干草，谢谢你提出一个有趣的问题；）

# javascript - 重复的 JavaScript (jQuery) 代码

> ID：11479015
> 
> 赞同：2
> 
> 时间：2012-07-13T22:09:22.350
> 
> 标签：javascript, jquery, non-repetitive

这是我正在做的简单的事情。我有一些 div，每个名为“.item-1”、“.item-2”等。当用户将鼠标悬停在“.item-1”上时，“#city-info-1”div 向上滑动，而它当用户悬停时向下滑动。我足够了解这样做，并且足够了解我的编码方式并不是最好的方式。只是好奇其他人会如何做到这一点，所以我不必每次都重复几乎相同的代码。感谢任何建议:)

```
 $('#city-info-1, #city-info-2, #city-info-3, #city-info-4, #city-info-5, #city-info-6, #city-info-7').hide();

    $('.item-1').hover(function() {
        $('#city-info-1').stop().slideToggle(400);
    }, function() {
        $('#city-info-1').hide();
    });

    $('.item-2').hover(function() {
        $('#city-info-2').stop().slideToggle(400);
    }, function() {
        $('#city-info-2').hide();
    });

    $('.item-3').hover(function() {
        $('#city-info-3').stop().slideToggle(400);
    }, function() {
        $('#city-info-3').hide();
    });

    $('.item-4').hover(function() {
        $('#city-info-4').stop().slideToggle(400);
    }, function() {
        $('#city-info-4').hide();
    });

    $('.item-5').hover(function() {
        $('#city-info-5').stop().slideToggle(400);
    }, function() {
        $('#city-info-5').hide();
    });

    $('.item-6').hover(function() {
        $('#city-info-6').stop().slideToggle(400);
    }, function() {
        $('#city-info-6').hide();
    });

    $('.item-7').hover(function() {
        $('#city-info-7').stop().slideToggle(400);
    }, function() {
        $('#city-info-7').hide();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:11:52.147

根据您当前的标记，您可以使用[`start with`](http://api.jquery.com/attribute-starts-with-selector/)选择器：

> 描述：选择具有指定属性的元素，其值恰好以给定字符串开头。

```
$('div[id^=city-info]').hide();

$('div[class^=item]').hover(function() {
      var cls = $(this).attr('class').replace('item', "")
      $('#city-info' + cls).stop().slideToggle(400);
  }, function() {
      $('#city-info' + cls).hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:16:20.050

为每个项目设置一个唯一的 ID（只有一些前缀和整数，即“i-666”），并为所有项目设置相同的类。

```
$('.item').hover(function() {
  var item_id = item.attr('id');
  $('#city-info-' + item_id).stop().slideToggle(400);
}, function() {
  $('#city-info-' + item_id).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:11:19.767

使用通用 css 类并将行为附加到它而不是特定元素。

例子：

[http://jsfiddle.net/K3mbE/1/](http://jsfiddle.net/K3mbE/1/)

**Javascript**：

```
$('.slider').hover(function() {
  $(this).find('div').stop().slideToggle(400);
}, function() {
  $(this).find('div').hide();
}); 
```

**HTML**：

```
<div class="slider">Seattle
    <div>It rains a lot</div>
</div>
<div class="slider">New York
    <div>Greatest city on earth</div>
</div>
<div class="slider">Trantor
    <div>Greatest city in the galexy</div>
</div> 
```

  ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T22:12:45.107

一个 div 可以有多个类，所以你可以让每个 div 有一个共同的类名

```
<div class="item item-1"></div>
<div class="item item-2"></div>
<div class="item item-3"></div>
... 
```

所以你可以选择：

```
$('.item').hover(function() {
        ...
    }, function() {
       ....
    }); 
```

请向我们展示您的 html，因为这看起来像是您可以简单地使用 css 做的事情

# javascript - 在 JavaScript 中向函数添加行为？

> ID：11479024
> 
> 赞同：2
> 
> 时间：2012-07-13T22:10:25.250
> 
> 标签：javascript

假设我正在编写一个网络应用程序，并且我想在函数在多个位置声明后向函数添加某些行为，而不覆盖函数的旧行为。

这是一些简化的代码（注意**window.onmousedown**函数

```
var createMenu = function(){
    var menu = document.createElement('ul');
    /* add things to the menu */
    window.onmousedown = function(e){
         menu.style.background = "red";
    }
}

var createSidebar = function(){
    var sidebar = document.createElement('div');
    /* add things to the sidebar */
    window.onmousedown = function(e){
         sidebar.id = "clicked";
    }
}

var createMenu();
var createSidebar(); 
```

在这种情况下，window.onmousedown 不会做它本来应该做的两件事——它在 createSidebar 中的定义将覆盖它在 createMenu 中的定义。是否有一种标准的方法来实现一种行为，其中 windows.onmousedown 将保留这两种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:13:02.493

使用[addEventListener()](https://developer.mozilla.org/en/DOM/element.addEventListener)添加您的事件。它允许您为元素上的事件注册多个事件处理程序。忘记您在示例中使用的旧事件模型。

对于 IE8 及更早版本，您必须使用`attachEvent()`.

[Quirksmode 上的高级事件注册模型](http://www.quirksmode.org/js/events_advanced.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:25:21.770

这不是最佳实践，但您可以执行以下操作：

```
var createMenu = function(){
    var menu = document.createElement('ul');
    /* add things to the menu */
    window.onmousedown = function(e){
         menu.style.background = "red";
    }
}

var createSidebar = function(){
    var sidebar = document.createElement('div');
    var oldonmousedown = window.onmousedown;
    /* add things to the sidebar */
    window.onmousedown = function(e){
         sidebar.id = "clicked";
         oldonmousedown()
    }
}

var createMenu();
var createSidebar(); 
```

但是您应该在[bažmegakapa 的回答](https://stackoverflow.com/a/11479052/1512640)`addEventListener()`中使用或`attachEvent()`喜欢

# shell - 新的python版本，现在不能空闲启动

> ID：11479025
> 
> 赞同：0
> 
> 时间：2012-07-13T22:10:31.130
> 
> 标签：shell, user-interface, python-idle

已经运行 Python 2.7.2 几个月了，在我的 64 位计算机上使用 32 位版本。今天运行了 2.7.3、64 位的安装程序。现在我不能闲着开始。我在程序文件中看到 Python 的答案，我正在运行 Win7，我相信这台机器的正确位置是 C:\，而不是程序文件。至少那是我拥有 2.7.2 的地方并且它起作用了。

所以尝试 C:\Python27\Lib\idlelib\idle.py 或 C:\Python27\Lib\idlelib\idle.pyw

这些都不会打开空闲。使用 .py 文件时，控制台窗口会在瞬间打开并消失。在 .pyw 上，据我所知，什么都没有发生。pyw 在屏幕上的文件类型中说：“没有控制台”

开始菜单中的旧快捷方式在属性下显示为“目标：python 2.7.2”，但我看不到更改目标的方法。

还尝试从 Powershell、命令行、Python 命令行、运行中打开。这些都没有奏效。

当我下载 2.7.3 时，它说它正在覆盖 Python27 中的文件。

现在卸载提供了两个卸载程序： 2.7.3 和 2.7.2 ，但据我所知，磁盘上有一个 Python 程序，并且认为它是 2.7.3。我开始卸载并尝试全新安装，但我想我会先问，而不是冒险进一步搞砸我的机器。提前感谢您的帮助。我确实阅读并尝试使用网站上类似问题的所有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:29:34.147

我今天遇到了这个。基本上已经安装了一个较旧的版本（我认为它是 2.7.2），2.7.3 64 位破坏了它。

起初 CLI python 可以工作，但 IDLE 拒绝启动，甚至没有错误。卸载/重新安装几次都没有用，问题变得更奇怪了，因为它找不到刚刚下载的 msi，等等。然后我注意到它并没有删除 Python27 文件夹中的所有内容。

手动删除文件夹是不够的，我发现它正在 App Data\Roaming (Windows 7) 下存储另一个文件夹。删除这个最终允许重新安装工作（并显示为新安装的程序，而不是像它一直存在的那样不突出显示它）。

我正要放弃 64 位版本并尝试 32 但似乎 Python 卸载程序/安装程序并没有正确清理所有文件（如果它是注册表项，我仍在挖掘）。

# jquery - 计算所有 div 的高度

> ID：11479026
> 
> 赞同：0
> 
> 时间：2012-07-13T22:10:33.770
> 
> 标签：jquery

我需要计算所有 div 的总高度，但我得到的高度只有一个......

```
var myHeight = function() {
    var dHeight = 0;
    $(".myItem").each(function() {
        dHeight += $(this).height();
    });
    return dHeight;
} 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:13:01.900

大概你的意思是`return dHeight`，不是`return myHeight`（后者是函数，而不是递增的变量）。

[编辑 - 根据下面 OP 的评论，这显然是一个错字，不是问题的原因]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:16:38.327

您的代码的核心是正确的。看我的[例子](http://jsfiddle.net/menislici/SESkv/)。因此，将它包装在一个函数中并返回`dHeight`应该可以实现您想要做的事情。

**更新**好的，[这是](http://jsfiddle.net/menislici/SESkv/1/)您的功能正常工作。你的代码很短，写得很好，可读性很强，并且做了它应该做的（尝试`div`通过添加 's 来调整 's 的高度`<br />`）。

# android - 有没有办法在不加载到内存的情况下在 android 上裁剪大图像？

> ID：11479027
> 
> 赞同：5
> 
> 时间：2012-07-13T22:10:41.443
> 
> 标签：android, image, memory, sd-card, crop

我不想在屏幕上显示位图。只是试图从 sdcard 的原始图像中创建一个最大正方形图像，然后上传到服务器。有没有办法在不将图像加载到内存的情况下裁剪图像？还是分块加载图像然后保存到文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T22:15:31.573

我不知道我是否很好地理解了这个问题，但这可能会有所帮助：

[http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)

BitmapRegionDecoder 可用于从图像中解码矩形区域。当原始图像很大并且您只需要图像的一部分时，BitmapRegionDecoder 特别有用。

希望有所帮助:)

# java - java.lang.IllegalArgumentException：尝试创建新连接时表中的值无效

> ID：11479041
> 
> 赞同：3
> 
> 时间：2012-07-13T22:11:52.723
> 
> 标签：java, rabbitmq

我正在尝试从 Java 连接到本地 RabbitMQ 服务器。我目前`ConnectionFactory`在 Spring 中配置了我的实例，如下所示：

```
<bean class="org.rabbitmq.client.ConnectionFactory">
    <property name="host" value="localhost"/>
    <property name="port" value="5672"/>
    <property name="username" value="user"/>
    <property name="password" value="password"/>
</bean> 
```

当我尝试获取新连接时：

```
connectionFactory.newConnection(); 
```

我收到以下错误：

```
java.lang.IllegalArgumentException: invalid value in table
    at com.rabbitmq.client.impl.Frame.fieldValueSize(Frame.java:306)
    at com.rabbitmq.client.impl.Frame.tableSize(Frame.java:246)
    at com.rabbitmq.client.impl.ValueWriter.writeTable(ValueWriter.java:120)
    at com.rabbitmq.client.impl.MethodArgumentWriter.writeTable(MethodArgumentWriter.java:139)
    at com.rabbitmq.client.impl.AMQImpl$Connection$StartOk.writeArgumentsTo(AMQImpl.java:161)
    at com.rabbitmq.client.impl.Method.toFrame(Method.java:83)
    at com.rabbitmq.client.impl.AMQCommand.transmit(AMQCommand.java:102)
    at com.rabbitmq.client.impl.AMQChannel.quiescingTransmit(AMQChannel.java:316)
    at com.rabbitmq.client.impl.AMQChannel.quiescingTransmit(AMQChannel.java:298)
    at com.rabbitmq.client.impl.AMQChannel.quiescingRpc(AMQChannel.java:233)
    at com.rabbitmq.client.impl.AMQChannel.rpc(AMQChannel.java:224)
    at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:209)
    at com.rabbitmq.client.impl.AMQChannel.rpc(AMQChannel.java:202)
    at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:340)
    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)
    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
    at com.tkassembled.dispatcher.service.RabbitMQQueueService.init(RabbitMQQueueService.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1184)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1091)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

在 RabbitMQ 日志中：

```
=ERROR REPORT==== 13-Jul-2012::15:24:30 ===
exception on TCP connection <0.1159.0> from 127.0.0.1:55154
{handshake_timeout,frame_header} 
```

* * *

### 更新

我现在也注意到一些非常奇怪的事情。如果我`ConnectionFactory`在 Spring 中创建实例，那么所有调用都`newConnection()`将失败，即使我没有在其上设置任何属性：

```
<bean class="org.rabbitmq.client.ConnectionFactory">
    <!-- nothing -->
</bean> 
```

但是，如果我`ConnectionFactory`在 Spring 容器之外创建实例然后调用`newConnection()`，则不会引发错误：

```
ConnectionFactory connectionFactory = new ConnectionFactory();
connectionFactory.setHost("localhost");

Connection connection = connectionFactory.newConnection(); 
```

我究竟做错了什么？得到这样一个仅`ConnectionFactory`在 Spring 容器中创建时才会发生的随机错误似乎有点奇怪。Spring 容器与在原始 Java 中创建它有什么不同呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-11T08:06:17.927

我有同样的问题，它在我的标题中：

```
Map<String, Object> headers = new HashMap<>();
headers.put("user-id", event.uid);
[...]
channel.basicPublish(exchangeName, "???", new AMQP.BasicProperties.Builder().headers(headers).build(), payload.getBytes(UTF_8)); 
```

（BasicProperties.Builder() 已被缩短以提高可见性）

问题已通过标头中的字符串值而不是 UUID 解决：

```
Map<String, Object> headers = new HashMap<>();
headers.put("user-id", event.uid.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T07:57:09.977

我实现了 Rabbitmq ConnectionFactory 的一些包装器。它是从带有主机/端口/等的 Spring 配置中配置的。并且有简单的方法 getConnection()

```
ConnectionFactory factory = new ConnectionFactory(); 
factory.setHost(getHostName());
factory.setUsername(getUserName());
factory.setPassword(getPassword());
factory.setAutomaticRecoveryEnabled(true);
Connection connection = factory.newConnection(); 
```

如果您只需要一个连接（真的吗？），您可以在构造函数中使用此方法...

# mysql - 如何在不计算原始计数的情况下找到重复计数

> ID：11479043
> 
> 赞同：2
> 
> 时间：2012-07-13T22:12:11.393
> 
> 标签：mysql, join, duplicates

我需要计算 mysql 数据库中重复电子邮件的数量，但不计算第一个（认为是原始的）。在该表中，查询结果应该是单个值“3”（2 个重复的 x@q.com 加上 1 个重复的 f@q.com）。

桌子

```
ID | Name  | Email
1  | Mike  | x@q.com
2  | Peter | p@q.com
3  | Mike  | x@q.com
4  | Mike  | x@q.com
5  | Frank | f@q.com
6  | Jim   | f@q.com 
```

我当前的查询产生的不是一个数字，而是多行，每个电子邮件地址一个，无论表中有多少此电子邮件的重复项：

```
SELECT value, count(lds1.leadid) FROM leads_form_element lds1 LEFT JOIN leads lds2 ON lds1.leadID = lds2.leadID 
     WHERE lds2.typesID = "31" AND lds1.formElementID = '97'  
     GROUP BY lds1.value HAVING ( COUNT(lds1.value) > 1 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:21:16.863

这不是一个查询，所以我不确定它是否适用于您的情况，但您可以执行一个查询来选择总行数，执行第二个查询来选择不同的电子邮件地址，然后将两者相减。这会给你重复的总数......

```
select count(*) from someTable;
select count(distinct Email) from someTable; 
```

事实上，我不知道这是否可行，但您可以尝试在一个查询中完成所有操作：

```
select (count(*)-(count(distinct Email))) from someTable 
```

就像我说的，未经测试，但让我知道它是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:29:13.163

尝试在子查询中进行分组，然后进行总结。就像是：

```
select sum(tot)
from
(
    select email, count(1)-1 as tot
    from table
    group by email
    having count(1) > 1
) 
```

# sql - SELECT 语句的 SQL 别名

> ID：11479044
> 
> 赞同：28
> 
> 时间：2012-07-13T22:12:20.507
> 
> 标签：sql, select, alias

我想做类似的事情

```
(SELECT ... FROM ...) AS my_select
WHERE id IN (SELECT MAX(id) FROM my_select GROUP BY name) 
```

是否有可能以某种方式执行“AS my_select”部分（即为 SELECT 语句分配别名）？

（注意：这是一个理论问题。我意识到我可以在不为 SELECT 语句分配别名的情况下做到这一点，但我想知道我是否可以这样做。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-13T22:17:46.847

不确定您尝试使用该语法表示的确切内容，但在几乎所有 RDBMS-es 中，您都可以在 FROM 子句中使用子查询（有时称为“内联视图”）：

```
SELECT..
FROM (
     SELECT ...
     FROM ...
     ) my_select
WHERE ... 
```

在高级“企业”RDBMS-es（如 oracle、SQL Server、postgresql）中，您可以使用通用表表达式，它允许您按名称引用查询并多次重复使用它：

```
-- Define the CTE expression name and column list.
WITH Sales_CTE (SalesPersonID, SalesOrderID, SalesYear)
AS
-- Define the CTE query.
(
    SELECT SalesPersonID, SalesOrderID, YEAR(OrderDate) AS SalesYear
    FROM Sales.SalesOrderHeader
    WHERE SalesPersonID IS NOT NULL
)
-- Define the outer query referencing the CTE name.
SELECT SalesPersonID, COUNT(SalesOrderID) AS TotalSales, SalesYear
FROM Sales_CTE
GROUP BY SalesYear, SalesPersonID
ORDER BY SalesPersonID, SalesYear; 
```

（来自[http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)的示例）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T22:19:20.993

您可以使用 SELECT 语句的 WITH 子句来执行此操作：

```
;
WITH my_select As (SELECT ... FROM ...) 
SELECT * FROM foo
WHERE id IN (SELECT MAX(id) FROM my_select GROUP BY name) 
```

这就是 ANSI/ISO SQL 语法。我知道 SQL Server、Oracle 和 DB2 都支持它。不知道其他...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T22:14:37.500

是的，但您只能在子选择中选择一列

```
SELECT (SELECT id FROM bla) AS my_select FROM bla2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-15T09:25:12.307

您可以将其存储到临时表中。

因此，您将使用临时表，而不是执行 CTE/sub 查询。

关于这些的好文章在这里[http://codingsight.com/introduction-to-temporary-tables-in-sql-server/](http://codingsight.com/introduction-to-temporary-tables-in-sql-server/)

# javascript - JavaScript OOP 类和声明

> ID：11479048
> 
> 赞同：5
> 
> 时间：2012-07-13T22:12:43.943
> 
> 标签：javascript, jquery, oop

我发现在 javascript 中掌握 OOP 真的很困难。

通常我希望必须创建一个类，然后从该类创建对象。

但是，根据一个教程，以下创建了一个对象。

```
var egg = {} 
```

我不是只制作了一个名为 egg 的对象而没有实际制作一个类吗？

如果是这样，我将如何从一个对象制作多个对象：S

同样根据一个不同的教程，一个对象如下所示，这与我上面所说的完全不同：S

```
var Block = function(){

} 
```

谁能帮我解开我的困惑:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T22:35:44.640

上述两个例子都是正确的。简而言之，javascript中的一切都是一个对象。类不存在，但有很多方法可以模仿它们。我最喜欢的方法如下：

```
 var myClass = function() { <----------------------------- class declaration

            var prop1,   
                prop2,   <------------------------------------ private properties
                prop3;

            var addMe = function( arg1, arg2 ) { <------------ private method
                var result = arg1 + arg2;
                return result;
            }

            var obj = { <------------------------------------- constructor method 
                Prop1: prop1,
                Prop2: value2,  <----------------------------- public properties
                Prop3: value3,

                Method: function() { <------------------------ public method
                    obj.prop3 = obj.prop1 + obj.prop2;   
                    return obj.prop3;
                }
            }

            obj.Prop4 = addme( prop1, prop2 ); <-------------- public property set 
                                                               with the private method
            return obj;
    }

    var myClassObj = new myClass; 
```

myClassObj 现在是 myClass 的一个对象，具有四个公共属性 Prop1、Prop2、Prop3、Prop4 和一个名为 Method 的公共方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:22:09.733

> 我不是只制作了一个名为 egg 的对象而没有实际制作一个类吗？

这是正确的。您所做的只是实例化基础*对象*`Object`- 您没有制作任何可以制作.

 *在 JavaScript 中，没有形式化的类概念——只有类的模拟，通过实例化而不是调用函数来实现。

```
function Animal() { this.animal = true; }
Animal.prototype.sayHi = function() { alert(this.name+' says hi!'); }
function Dog(name) { this.name = name; }
Dog.prototype = new Animal();
...
var fido = new Dog('Fido');
fido.sayHi(); //"Fido says hi!"; 
```

请注意，第 4 行只是模拟继承的几种方法之一。

所以在 JavaScript 中，类和函数都只是函数。没有任何东西可以阻止在没有操作员的情况下调用用于实例化的函数`new`，反之亦然。

在前一种情况下，常见的解决方法是检查构造函数是否为“类”（如果被调用但未实例化，构造函数将为`Object`）并根据需要重新路由：

```
function Dog(name) {
    //if we weren't instantiated, the constructor will be Object, not Dog
    if(this.constructor != Dog) return new Dog(name);
    this.name = name;
}
var fido = Dog(); //bad - invocation should be instantiation 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T22:30:49.690

Yes`var egg = {}`是一个对象，但它不是一个对象的实例。

在 javascript 中，简单地这样说，基本上就是 js 的单例思想，意思就是它完全一样。

```
//this is a js singleton, and all properties of this object are public.
var egg = {
    name: 'humpty',
    smush: function() { console.log('splat!'); },
    weight: '4oz'
};
console.log(egg.weight); //4oz 
```

而更传统的*对象*类型是将其设为一个函数，然后您可以实例化：

```
var Egg = function( name, weight ) {
    var name = name;
    this.smush = function() { console.log('splat!'); }
    this.weight = weight;
};
var e2 = new Egg('dumpty','6oz');
console.log(e2.name); //will not return name. (since i wrote var name and not this.name, its "private" and thus cannot be accessed.)
console.log(e2.weight); //4oz 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T22:54:07.093

Javascript 是一种与您目前所学的语言不同的语言。当您更改语言时，您不能期望事情会完全按照它们的方式工作。

快速预览：在 javascript 中，您可以将函数分配给变量。我敢打赌你用过的其他语言，那是不可能的：

```
var myCounter = 1;
var myFunction = function(x){ return x + 1; }; 
```

回到你的问题：在 javascript 中没有“真正的类”。只有对象。我知道这起初可能听起来令人困惑。

Javascript 的对象模型称为“原型继承”。它不同于“经典”（双关语）继承。而且它[也不是很干净地实现](http://javascript.crockford.com/prototypal.html)。

基本上，您从一组减少的对象（数组、函数、对象等是对象，而不是类）开始，然后使用这些对象来构建其他对象。它们之间的关系可以是“类和实例的”，但它们不是必须的。它们也可以是其他类型的关系。

由于没有类，因此您无法创建它们。但是你可以创建一个常规对象，将它分配给变量 Car，然后想“我将使用这个对象来创建许多其他对象。这些其他对象默认情况下会有一些属性，比如方法和东西，使它们表现得像汽车”。语言允许你这样做。Car 的行为就像其他语言中的类一样，它产生的对象将“像 Car 的实例”。

但是，对于 javascript，它们看起来像对象，它们之间有一些关系。

在某种程度上，原型继承是经典继承的“超集”。你可以做经典继承，也可以做其他事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-13T22:51:14.583

您想查看 JavaScript 的“原型继承”。 [http://www.crockford.com/javascript/inheritance.html](http://www.crockford.com/javascript/inheritance.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-25T01:59:10.430

使用 jQuery 创建面向对象。利用 constructor() 方法并从类范围内访问公共和私有方法。

```
/*
 * myClass
 */
var myClass = function(options){

    /*
     * Variables accessible
     * in the class
     */
    var vars = {
        myVar  : ''
    };

    /*
     * Can access this.method
     * inside other methods using
     * root.method()
     */
    var root = this;

    /*
     * Constructor
     */
    this.construct = function(options){
        $.extend(vars , options);
    };

    /*
     * Public method
     * Can be called outside class
     */
    this.myPublicMethod = function(){
        console.log(vars.myVar);

        myPrivateMethod();
    };

    /*
     * Private method
     * Can only be called inside class
     */
    var myPrivateMethod = function() {
        console.log('private method called');
    };

    /*
     * Pass options when class instantiated
     */
    this.construct(options);

};

/*
 * USAGE
 */

/*
 * Set variable myVar to new value
 */
var newMyClass = new myClass({ myVar : 'new Value' });

/*
 * Call myMethod inside myClass
 */
newMyClass.myPublicMethod(); 
```*

# constants - 为什么库的 C 头文件中的常量总是定义为十六进制？

> ID：11479061
> 
> 赞同：7
> 
> 时间：2012-07-13T22:14:07.143
> 
> 标签：constants, convention, hex

无论我使用哪个 C 兼容库，当我查看标头定义的常量时，它们总是定义为十六进制值。例如，在 GL/gl.h 中：

```
#define GL_POINTS                               0x0000
#define GL_LINES                                0x0001
#define GL_LINE_LOOP                            0x0002
#define GL_LINE_STRIP                           0x0003
#define GL_TRIANGLES                            0x0004
#define GL_TRIANGLE_STRIP                       0x0005
#define GL_TRIANGLE_FAN                         0x0006
#define GL_QUADS                                0x0007
#define GL_QUAD_STRIP                           0x0008
#define GL_POLYGON                              0x0009 
```

这种约定有什么特别的原因吗，为什么不简单地使用十进制值呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T22:45:04.733

有多种可能的原因：

1) 位标志更容易用十六进制表示，因为每个十六进制数字正好代表 4 位。

2）即使对于不是明确位标志的值，也经常有故意的位模式，当写成十六进制时更明显。

例如，所有的 AlphaFunction 都以 0x02 开头，并且只有一个字节不同：

```
#define GL_NEVER                          0x0200
#define GL_LESS                           0x0201
#define GL_EQUAL                          0x0202
#define GL_LEQUAL                         0x0203
#define GL_GREATER                        0x0204
#define GL_NOTEQUAL                       0x0205
#define GL_GEQUAL                         0x0206
#define GL_ALWAYS                         0x0207 
```

3）十六进制值允许有前导零，因此更容易排列值。这可以使阅读（和校对）更容易。您可能会惊讶于十六进制和八进制文字中允许使用前导零，但十进制不允许使用前导零，但[C++ 规范](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)非常明确地表示

> 十进制整数文字（以十为基数）以 0 以外的数字开头，由一系列十进制数字组成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:25:47.370

如果常量值指的是位标志，并且打算组合，那么十六进制表示法是一种方便的方式来显示哪些位被表示。

例如，来自 Boost 标头：

```
// Type encoding:
//
// bit 0: callable builtin
// bit 1: non member
// bit 2: naked function
// bit 3: pointer
// bit 4: reference
// bit 5: member pointer
// bit 6: member function pointer
// bit 7: member object pointer

#define BOOST_FT_type_mask                            0x000000ff // 1111 1111 
#define BOOST_FT_callable_builtin                     0x00000001 // 0000 0001
#define BOOST_FT_non_member                           0x00000002 // 0000 0010
#define BOOST_FT_function                             0x00000007 // 0000 0111
#define BOOST_FT_pointer                              0x0000000b // 0000 1011
#define BOOST_FT_reference                            0x00000013 // 0001 0011
#define BOOST_FT_non_member_callable_builtin          0x00000003 // 0000 0011
#define BOOST_FT_member_pointer                       0x00000020 // 0010 0000
#define BOOST_FT_member_function_pointer              0x00000061 // 0110 0001
#define BOOST_FT_member_object_pointer                0x000000a3 // 1010 0001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:26:37.683

它更短，但更重要的是，如果它们是位标志，则更容易将它们组合并制作掩码。

# ios - 是否可以通过 Facebook open graph api 标记用户/页面？

> ID：11479062
> 
> 赞同：3
> 
> 时间：2012-07-13T22:14:09.103
> 
> 标签：ios, facebook, api, facebook-opengraph

我在 SO 上找到[了这篇文章](https://stackoverflow.com/questions/6270588/how-to-tag-user-page-in-facebook-post-to-property-using-graph-api-no-php-or-jav)以及网络上的其他一些链接，但它们似乎都已过时，似乎表明 FB 尚未通过 Open Graph API 公开这一点，我在网络上找不到任何相反的东西。我正在尝试找到一种将图像发布到用户墙*并*能够在帖子标题或标题中标记多个用户的方法？

是否仍然无法通过 api 执行此操作或以某种方式达到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:25:10.647

### 在照片标题中标记用户/页面

这是不可能通过*Graph API*实现的，*据我所知*，旧`@[user_id:0:link_text]`的目前不可用。可悲的是，我要说在写这篇文章时这是不可能的。

^(如果我遇到任何相关信息，我会用相关信息更新这篇文章。)

* * *

### 在照片中标记用户/页面

这可以通过*Graph API*实现。

如果您点击以下链接，有关如何完成您正在寻找的内容的文档位于标题*“**标签**”下：*

*   **[developer.facebook.com - 核心概念 › 图形 API › 照片](https://developers.facebook.com/docs/reference/api/photo/)**

* * *

![facebook 图形 api 标签 照片 文档](../Images/bb89fe0e3855f59279fad196d192af00.png)

# python - Python中的多元线性回归

> ID：11479064
> 
> 赞同：144
> 
> 时间：2012-07-13T22:14:40.700
> 
> 标签：python, numpy, statistics, scipy, linear-regression

我似乎找不到任何进行多重回归的 python 库。我发现的唯一东西只做简单的回归。我需要根据几个自变量（x1、x2、x3 等）对因变量 (y) 进行回归。

例如，使用此数据：

```
print 'y        x1      x2       x3       x4      x5     x6       x7'
for t in texts:
    print "{:>7.1f}{:>10.2f}{:>9.2f}{:>9.2f}{:>10.2f}{:>7.2f}{:>7.2f}{:>9.2f}" /
   .format(t.y,t.x1,t.x2,t.x3,t.x4,t.x5,t.x6,t.x7) 
```

（上面的输出：）

```
 y        x1       x2       x3        x4     x5     x6       x7
   -6.0     -4.95    -5.87    -0.76     14.73   4.02   0.20     0.45
   -5.0     -4.55    -4.52    -0.71     13.74   4.47   0.16     0.50
  -10.0    -10.96   -11.64    -0.98     15.49   4.18   0.19     0.53
   -5.0     -1.08    -3.36     0.75     24.72   4.96   0.16     0.60
   -8.0     -6.52    -7.45    -0.86     16.59   4.29   0.10     0.48
   -3.0     -0.81    -2.36    -0.50     22.44   4.81   0.15     0.53
   -6.0     -7.01    -7.33    -0.33     13.93   4.32   0.21     0.50
   -8.0     -4.46    -7.65    -0.94     11.40   4.43   0.16     0.49
   -8.0    -11.54   -10.03    -1.03     18.18   4.28   0.21     0.55 
```

我将如何在 python 中回归这些，以获得线性回归公式：

> Y = a1x1 + a2x2 + a3x3 + a4x4 + a5x5 + a6x6 + +a7x7 + c

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-13T22:41:50.063

[`sklearn.linear_model.LinearRegression`](http://scikit-learn.org/stable/modules/linear_model.html#ordinary-least-squares)会做的：

```
from sklearn import linear_model
clf = linear_model.LinearRegression()
clf.fit([[getattr(t, 'x%d' % i) for i in range(1, 8)] for t in texts],
        [t.y for t in texts]) 
```

然后`clf.coef_`会有回归系数。

[`sklearn.linear_model`](http://scikit-learn.org/stable/modules/linear_model.html)也有类似的接口来对回归进行各种正则化。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-02-20T02:53:40.180

这是我创建的一个小工作。我用 R 检查了它，它工作正常。

```
import numpy as np
import statsmodels.api as sm

y = [1,2,3,4,3,4,5,4,5,5,4,5,4,5,4,5,6,5,4,5,4,3,4]

x = [
     [4,2,3,4,5,4,5,6,7,4,8,9,8,8,6,6,5,5,5,5,5,5,5],
     [4,1,2,3,4,5,6,7,5,8,7,8,7,8,7,8,7,7,7,7,7,6,5],
     [4,1,2,5,6,7,8,9,7,8,7,8,7,7,7,7,7,7,6,6,4,4,4]
     ]

def reg_m(y, x):
    ones = np.ones(len(x[0]))
    X = sm.add_constant(np.column_stack((x[0], ones)))
    for ele in x[1:]:
        X = sm.add_constant(np.column_stack((ele, X)))
    results = sm.OLS(y, X).fit()
    return results 
```

结果：

```
print reg_m(y, x).summary() 
```

输出：

```
 OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.535
Model:                            OLS   Adj. R-squared:                  0.461
Method:                 Least Squares   F-statistic:                     7.281
Date:                Tue, 19 Feb 2013   Prob (F-statistic):            0.00191
Time:                        21:51:28   Log-Likelihood:                -26.025
No. Observations:                  23   AIC:                             60.05
Df Residuals:                      19   BIC:                             64.59
Df Model:                           3                                         
==============================================================================
                 coef    std err          t      P>|t|      [95.0% Conf. Int.]
------------------------------------------------------------------------------
x1             0.2424      0.139      1.739      0.098        -0.049     0.534
x2             0.2360      0.149      1.587      0.129        -0.075     0.547
x3            -0.0618      0.145     -0.427      0.674        -0.365     0.241
const          1.5704      0.633      2.481      0.023         0.245     2.895

==============================================================================
Omnibus:                        6.904   Durbin-Watson:                   1.905
Prob(Omnibus):                  0.032   Jarque-Bera (JB):                4.708
Skew:                          -0.849   Prob(JB):                       0.0950
Kurtosis:                       4.426   Cond. No.                         38.6 
```

`pandas`提供了一种运行 OLS 的便捷方法，如本答案中所述：

[使用 Pandas 数据框运行 OLS 回归](https://stackoverflow.com/questions/19991445/run-an-ols-regression-with-pandas-data-frame)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-10-28T02:02:22.493

只是为了澄清，你给出的例子是*多元*线性回归，而不是*多元*线性回归。[区别](https://en.wikipedia.org/wiki/Linear_regression#Simple_and_multiple_regression)：

> 单个标量预测变量 x 和单个标量响应变量 y 的最简单情况称为简单线性回归。对多元和/或向量值预测变量（用大写 X 表示）的扩展称为多元线性回归，也称为多元线性回归。几乎所有现实世界的回归模型都涉及多个预测变量，线性回归的基本描述通常用多元回归模型来表述。但是请注意，在这些情况下，响应变量 y 仍然是一个标量。另一个术语多元线性回归是指y是向量的情况，即与一般线性回归相同。

简而言之：

*   *多元*线性回归：响应 y 是标量。
*   *多元*线性回归：响应 y 是一个向量。

（另一个[来源](https://stats.stackexchange.com/q/2358/12359)。）

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-11-13T21:01:59.500

您可以使用[numpy.linalg.lstsq](http://docs.scipy.org/doc/numpy-1.3.x/reference/generated/numpy.linalg.lstsq.html)：

```
import numpy as np

y = np.array([-6, -5, -10, -5, -8, -3, -6, -8, -8])
X = np.array(
    [
        [-4.95, -4.55, -10.96, -1.08, -6.52, -0.81, -7.01, -4.46, -11.54],
        [-5.87, -4.52, -11.64, -3.36, -7.45, -2.36, -7.33, -7.65, -10.03],
        [-0.76, -0.71, -0.98, 0.75, -0.86, -0.50, -0.33, -0.94, -1.03],
        [14.73, 13.74, 15.49, 24.72, 16.59, 22.44, 13.93, 11.40, 18.18],
        [4.02, 4.47, 4.18, 4.96, 4.29, 4.81, 4.32, 4.43, 4.28],
        [0.20, 0.16, 0.19, 0.16, 0.10, 0.15, 0.21, 0.16, 0.21],
        [0.45, 0.50, 0.53, 0.60, 0.48, 0.53, 0.50, 0.49, 0.55],
    ]
)
X = X.T  # transpose so input vectors are along the rows
X = np.c_[X, np.ones(X.shape[0])]  # add bias term
beta_hat = np.linalg.lstsq(X, y, rcond=None)[0]
print(beta_hat) 
```

结果：

```
[ -0.49104607   0.83271938   0.0860167    0.1326091    6.85681762  22.98163883 -41.08437805 -19.08085066] 
```

您可以通过以下方式查看估计的输出：

```
print(np.dot(X,beta_hat)) 
```

结果：

```
[ -5.97751163,  -5.06465759, -10.16873217,  -4.96959788,  -7.96356915,  -3.06176313,  -6.01818435,  -7.90878145,  -7.86720264] 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-11-24T00:12:00.080

使用`scipy.optimize.curve_fit`. 而且不仅适用于线性拟合。

```
from scipy.optimize import curve_fit
import scipy

def fn(x, a, b, c):
    return a + b*x[0] + c*x[1]

# y(x0,x1) data:
#    x0=0 1 2
# ___________
# x1=0 |0 1 2
# x1=1 |1 2 3
# x1=2 |2 3 4

x = scipy.array([[0,1,2,0,1,2,0,1,2,],[0,0,0,1,1,1,2,2,2]])
y = scipy.array([0,1,2,1,2,3,2,3,4])
popt, pcov = curve_fit(fn, x, y)
print popt 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-09-11T15:55:55.040

将数据转换为 pandas 数据框 ( `df`) 后，

```
import statsmodels.formula.api as smf
lm = smf.ols(formula='y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7', data=df).fit()
print(lm.params) 
```

默认情况下包含截距项。

有关更多示例，请参阅[此笔记本](http://nbviewer.ipython.org/github/justmarkham/DAT4/blob/master/notebooks/08_linear_regression.ipynb "这个笔记本")。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-12-09T07:22:04.567

我认为这可能是完成这项工作的最简单方法：

```
from random import random
from pandas import DataFrame
from statsmodels.api import OLS
lr = lambda : [random() for i in range(100)]
x = DataFrame({'x1': lr(), 'x2':lr(), 'x3':lr()})
x['b'] = 1
y = x.x1 + x.x2 * 2 + x.x3 * 3 + 4

print x.head()

         x1        x2        x3  b
0  0.433681  0.946723  0.103422  1
1  0.400423  0.527179  0.131674  1
2  0.992441  0.900678  0.360140  1
3  0.413757  0.099319  0.825181  1
4  0.796491  0.862593  0.193554  1

print y.head()

0    6.637392
1    5.849802
2    7.874218
3    7.087938
4    7.102337
dtype: float64

model = OLS(y, x)
result = model.fit()
print result.summary()

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                  1.000
Method:                 Least Squares   F-statistic:                 5.859e+30
Date:                Wed, 09 Dec 2015   Prob (F-statistic):               0.00
Time:                        15:17:32   Log-Likelihood:                 3224.9
No. Observations:                 100   AIC:                            -6442.
Df Residuals:                      96   BIC:                            -6431.
Df Model:                           3                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P>|t|      [95.0% Conf. Int.]
------------------------------------------------------------------------------
x1             1.0000   8.98e-16   1.11e+15      0.000         1.000     1.000
x2             2.0000   8.28e-16   2.41e+15      0.000         2.000     2.000
x3             3.0000   8.34e-16    3.6e+15      0.000         3.000     3.000
b              4.0000   8.51e-16    4.7e+15      0.000         4.000     4.000
==============================================================================
Omnibus:                        7.675   Durbin-Watson:                   1.614
Prob(Omnibus):                  0.022   Jarque-Bera (JB):                3.118
Skew:                           0.045   Prob(JB):                        0.210
Kurtosis:                       2.140   Cond. No.                         6.89
============================================================================== 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-08T22:23:01.257

可以使用上面提到的 sklearn 库处理多重线性回归。我正在使用 Python 3.6 的 Anaconda 安装。

创建模型如下：

```
from sklearn.linear_model import LinearRegression
regressor = LinearRegression()
regressor.fit(X, y)

# display coefficients
print(regressor.coef_) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-14T07:25:34.580

您可以使用[numpy.linalg.lstsq](http://docs.scipy.org/doc/numpy-1.3.x/reference/generated/numpy.linalg.lstsq.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-26T09:37:25.897

您可以使用下面的函数并将其传递给 DataFrame：

```
def linear(x, y=None, show=True):
    """
    @param x: pd.DataFrame
    @param y: pd.DataFrame or pd.Series or None
              if None, then use last column of x as y
    @param show: if show regression summary
    """
    import statsmodels.api as sm

    xy = sm.add_constant(x if y is None else pd.concat([x, y], axis=1))
    res = sm.OLS(xy.ix[:, -1], xy.ix[:, :-1], missing='drop').fit()

    if show: print res.summary()
    return res 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-27T09:33:12.833

Scikit-learn 是 Python 的机器学习库，可以为您完成这项工作。只需将 sklearn.linear_model 模块导入您的脚本。

在 Python 中使用 sklearn 查找多元线性回归的代码模板：

```
import numpy as np
import matplotlib.pyplot as plt #to plot visualizations
import pandas as pd

# Importing the dataset
df = pd.read_csv(<Your-dataset-path>)
# Assigning feature and target variables
X = df.iloc[:,:-1]
y = df.iloc[:,-1]

# Use label encoders, if you have any categorical variable
from sklearn.preprocessing import LabelEncoder
labelencoder = LabelEncoder()
X['<column-name>'] = labelencoder.fit_transform(X['<column-name>'])

from sklearn.preprocessing import OneHotEncoder
onehotencoder = OneHotEncoder(categorical_features = ['<index-value>'])
X = onehotencoder.fit_transform(X).toarray()

# Avoiding the dummy variable trap
X = X[:,1:] # Usually done by the algorithm itself

#Spliting the data into test and train set
from sklearn.model_selection import train_test_split
X_train, X_test, y_train, y_test = train_test_split(X,y, random_state = 0, test_size = 0.2)

# Fitting the model
from sklearn.linear_model import LinearRegression
regressor = LinearRegression()
regressor.fit(X_train, y_train)

# Predicting the test set results
y_pred = regressor.predict(X_test) 
```

就是这样。您可以将此代码用作在任何数据集中实现多元线性回归的模板。要通过示例更好地理解，请访问：[带示例的线性回归](https://medium.com/data-science-everywhere/linear-regression-is-simple-81a05da5e0e1)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-11T21:04:35.897

这是一种替代的基本方法：

```
from patsy import dmatrices
import statsmodels.api as sm

y,x = dmatrices("y_data ~ x_1 + x_2 ", data = my_data)
### y_data is the name of the dependent variable in your data ### 
model_fit = sm.OLS(y,x)
results = model_fit.fit()
print(results.summary()) 
```

代替`sm.OLS`你也可以使用`sm.Logit`or`sm.Probit`等​​。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-11T14:36:46.733

可以使用[OpenTURNS](http://openturns.org/)来找到像这样的线性模型。

在 OpenTURNS 中，这是通过`LinearModelAlgorithm`从数值样本创建线性模型的类来完成的。更具体地说，它建立了以下线性模型：

Y = a0 + a1.X1 + ... + an.Xn + epsilon，

其中误差 epsilon 是具有零均值和单位方差的高斯分布。假设您的数据在 csv 文件中，这是一个获取回归系数 ai 的简单脚本：

```
from __future__ import print_function
import pandas as pd
import openturns as ot

# Assuming the data is a csv file with the given structure                          
# Y X1 X2 .. X7
df = pd.read_csv("./data.csv", sep="\s+")

# Build a sample from the pandas dataframe
sample = ot.Sample(df.values)

# The observation points are in the first column (dimension 1)
Y = sample[:, 0]

# The input vector (X1,..,X7) of dimension 7
X = sample[:, 1::]

# Build a Linear model approximation
result = ot.LinearModelAlgorithm(X, Y).getResult()

# Get the coefficients ai
print("coefficients of the linear regression model = ", result.getCoefficients()) 
```

然后，您可以通过以下调用轻松获得置信区间：

```
# Get the confidence intervals at 90% of the ai coefficients
print(
    "confidence intervals of the coefficients = ",
    ot.LinearModelAnalysis(result).getCoefficientsConfidenceInterval(0.9),
) 
```

您可以在 OpenTURNS 示例中找到更详细的示例。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-11T22:24:08.523

尝试使用高斯族的广义线性模型

```
y = np.array([-6, -5, -10, -5, -8, -3, -6, -8, -8])
X = np.array([
    [-4.95, -4.55, -10.96, -1.08, -6.52, -0.81, -7.01, -4.46, -11.54],
    [-5.87, -4.52, -11.64, -3.36, -7.45, -2.36, -7.33, -7.65, -10.03],
    [-0.76, -0.71, -0.98, 0.75, -0.86, -0.50, -0.33, -0.94, -1.03],
    [14.73, 13.74, 15.49, 24.72, 16.59, 22.44, 13.93, 11.40, 18.18],
    [4.02, 4.47, 4.18, 4.96, 4.29, 4.81, 4.32, 4.43, 4.28],
    [0.20, 0.16, 0.19, 0.16, 0.10, 0.15, 0.21, 0.16, 0.21],
    [0.45, 0.50, 0.53, 0.60, 0.48, 0.53, 0.50, 0.49, 0.55],
])
X=zip(*reversed(X))

df=pd.DataFrame({'X':X,'y':y})
columns=7
for i in range(0,columns):
    df['X'+str(i)]=df.apply(lambda row: row['X'][i],axis=1)

df=df.drop('X',axis=1)
print(df)

#model_formula='y ~ X0+X1+X2+X3+X4+X5+X6'
model_formula='y ~ X0'

model_family = sm.families.Gaussian()
model_fit = glm(formula = model_formula, 
             data = df, 
             family = model_family).fit()

print(model_fit.summary())

# Extract coefficients from the fitted model wells_fit
#print(model_fit.params)
intercept, slope = model_fit.params

# Print coefficients
print('Intercept =', intercept)
print('Slope =', slope)

# Extract and print confidence intervals
print(model_fit.conf_int())

df2=pd.DataFrame()
df2['X0']=np.linspace(0.50,0.70,50)

df3=pd.DataFrame()
df3['X1']=np.linspace(0.20,0.60,50)

prediction0=model_fit.predict(df2)
#prediction1=model_fit.predict(df3)

plt.plot(df2['X0'],prediction0,label='X0')
plt.ylabel("y")
plt.xlabel("X0")
plt.show() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-30T11:12:23.077

线性回归是开始人工智能的一个很好的例子

这是使用 Python 进行多元线性回归的机器学习算法的一个很好的示例：

```
##### Predicting House Prices Using Multiple Linear Regression - @Y_T_Akademi

#### In this project we are gonna see how machine learning algorithms help us predict house prices. Linear Regression is a model of predicting new future data by using the existing correlation between the old data. Here, machine learning helps us identify this relationship between feature data and output, so we can predict future values.

import pandas as pd

##### we use sklearn library in many machine learning calculations..

from sklearn import linear_model

##### we import out dataset: housepricesdataset.csv

df = pd.read_csv("housepricesdataset.csv",sep = ";")

##### The following is our feature set:
##### The following is the output(result) data:
##### we define a linear regression model here: 

reg = linear_model.LinearRegression()
reg.fit(df[['area', 'roomcount', 'buildingage']], df['price'])

# Since our model is ready, we can make predictions now:
# lets predict a house with 230 square meters, 4 rooms and 10 years old building..

reg.predict([[230,4,10]])

# Now lets predict a house with 230 square meters, 6 rooms and 0 years old building - its new building..
reg.predict([[230,6,0]])

# Now lets predict a house with 355 square meters, 3 rooms and 20 years old building 
reg.predict([[355,3,20]])

# You can make as many prediction as you want.. 
reg.predict([[230,4,10], [230,6,0], [355,3,20], [275, 5, 17]]) 
```

我的数据集如下：

[![在此处输入图像描述](../Images/d8e51ce42a3ff94e130817c5aeb4c8f6.png)](https://i.stack.imgur.com/5eWkv.png)

# python - 使用 matplotlib 中的 show() 和 close()

> ID：11479065
> 
> 赞同：11
> 
> 时间：2012-07-13T22:14:43.050
> 
> 标签：python, matplotlib, show

我在使用 matplotlib 时遇到了一些问题....我无法一次打开 2 个窗口来显示带有 show() 的图像，似乎脚本在我使用 show 的行处停止并且不会继续，除非我关闭手动显示。有没有办法关闭脚本中的图形窗口？

以下代码没有按我的意愿运行：

```
import matplotlib.pyplot as plt
from time import sleep
from scipy import eye

plt.imshow(eye(3))
plt.show()
sleep(1)
plt.close()
plt.imshow(eye(2))
plt.show() 
```

我预计第一个窗口会在 1 秒后关闭，然后再打开第二个窗口，但是直到我自己关闭窗口才会关闭。我做错了什么，还是它应该是这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T16:24:47.140

plt.show() 是一个*阻塞*函数。

本质上，如果你想同时打开两个窗口，你需要创建两个图形，然后在最后使用 plt.show() 来显示它们。事实上，一般的经验法则是你设置你的情节，而 plt.show() 是你做的最后一件事。

所以在你的情况下：

```
fig1 = plt.figure(figsize=plt.figaspect(0.75))
ax1 = fig1.add_subplot(1, 1, 1)
im1, = plt.imshow(eye(3))

fig2 = plt.figure(figsize=plt.figaspect(0.75))
ax2 = fig2.add_subplot(1, 1, 1)
im2, = plt.imshow(eye(2))

plt.show() 
```

您可以使用`axes(ax2)`.

我整理了一个综合示例，演示了为什么 plot 函数会阻塞以及如何将其用于回答另一个问题：[https](https://stackoverflow.com/a/11141305/1427975) ://stackoverflow.com/a/11141305/1427975 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-12T13:29:29.703

我使用 PyScripter 和 Python 2.7 并且还遇到了`plt.show()`阻塞所有执行的问题，直到您手动关闭图形。

我发现将 Python 引擎更改为“远程 (Wx)”可以让脚本在之后运行`plt.show()`- 所以可以使用`plt.close()`.

# arrays - Mongodb：使用嵌套数组中的值进行查询

> ID：11479068
> 
> 赞同：0
> 
> 时间：2012-07-13T22:15:15.220
> 
> 标签：arrays, mongodb

我有以下架构、博客收藏和friendscoll，如下所示

```
blogpostcollection
    {
      "_id" : ObjectId("4fff0bf18bf0d19c4f1a5826"),
      "author" : "joe",
      "text" : "Here is the text...",
      "userid" : 0
    }
    {
      "_id" : ObjectId("4fff0bf18bf0d19c4f1a5827"),
      "author" : "blake",
      "text" : "Here is the text...",
      "userid" : 1
    }
    {
      "_id" : ObjectId("4fff0bf18bf0d19c4f1a5828"),
      "author" : "joe",
      "text" : "Here is the text...",
      "userid" : 2
    }

myfriendscoll
    {
      "myid": 999,
      "data": [
        {
          "uid": 1, 
          "name": "Raul"
        }, 
        {
          "uid": 3, 
          "name": "John K"
        } ]
    } 
```

我想在 myfriendscoll 集合中找到 blogpostcollection 中的所有文档，其中 userid 作为 uid 存在。所以实际上，就像..

```
var user = db.myfriendscoll.findOne({"myid" : 999}, {"data.uid": 1});
db.blogpostcollection.find( {"userid" : {$in : user.data.uid}}); 
```

这不起作用，但有没有办法让它工作？...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:13:47.660

如果您使用的是开发版本 2.1，或者当您在发布后移至 2.2 时，您可以使用聚合框架从第一个查询中获取您想要的格式：

```
var ret=db.myfriendscoll.aggregate([
             {$match:{"myid" : 999}},
             {$project:{_id:0,uid:"$data.uid"}}
]);
var uids=ret.result[0].uid;
db.blogpostcollection.find({userid:{$in:uids}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:26:38.593

您需要将实际的 uid 值提取到一个数组中以与 $in 一起使用。试试这个：

```
var user = db.myfriendscoll.findOne({"myid" : 999}, {"data.uid": 1});
var uids = user.data.map(function(v){ return v.uid });
db.blogpostcollection.find( {"userid" : {$in : uids}}); 
```

# java - JSF，AJAX，使用 selectOneMenu 更新动态表

> ID：11479076
> 
> 赞同：2
> 
> 时间：2012-07-13T22:16:22.167
> 
> 标签：java, ajax, jsf

我对 jsf 很陌生，我用 ajax 卡在了更新表中。

我需要一张与选择菜单一起工作的表格，表格需要在更改时刷新。表格的列取决于菜单值，每个值的列数可以不同。

我的代码：

```
<h:form>
        <h:selectOneMenu id="selectOneMenu"  value="#{reservationGuestBean.currentPremiseId}" >
            <f:selectItems value="#{reservationGuestBean.premiseNames}" var="p" itemLabel="#{p.label}" itemValue="#{p.value}" />
            <a4j:ajax event="change" listener="#{reservationGuestBean.premiseChanged}" ajaxSingle="true" render=":currentPremiseId, :reservationsHeading, :reservationsBody" />
        </h:selectOneMenu> 
    </h:form>
    <div><h:outputText id="currentPremiseId" value="PremiseId: #{reservationGuestBean.currentPremiseId}" /></div>
    <table id="reservationsTable">
        <tr>
            <ui:repeat id="reservationsHeading" var="col" value="#{reservationGuestBean.reservationTableHeading}">
                <th>#{col}</th>
            </ui:repeat>
        </tr>
        <ui:repeat id="reservationsBody" var="row" value="#{reservationGuestBean.reservationTableRows}">
            <tr>
                <ui:repeat id="reservationsRowContent" var="cell" value="#{row}">
                    <td>#{cell.value}</td>
                </ui:repeat>
            </tr>
        </ui:repeat>
    </table> 
```

使用该代码，我可以重新加载 div 的内容，但不能重新加载表格、标题或内容。在萤火虫中，我可以看到具有所需响应的更新请求（带有 xml 的 xml），但未更新选定的表元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:46:23.940

快速而肮脏的答案是将您的表格包装在一个 中`h:panelGroup`，并在 的渲染标签上使用它的 id `a4j:ajax`：

```
<h:panelGroup id="myTable">
    <table>
    ...
    </table>
</h:panelGroup> 
```

话虽如此，您可能想学习使用该组件`h:datatable`，而不是自己使用`ui:repeat`.

它易于使用，并且将成为 JSF 视图中的一个有意义的组件，而纯 HTML 表不是（这就是为什么您不能只在 ajax 标记中重新呈现它的原因）。您可以从执行[本文中的示例](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)开始。

# php - Twitter Bootstrap 哪个 PHP 框架

> ID：11479077
> 
> 赞同：3
> 
> 时间：2012-07-13T22:16:31.147
> 
> 标签：php, twitter-bootstrap

我知道的所有 PHP 框架都与 jQuery UI 等其他 UI 框架深度集成。我想知道是否有任何框架与 twitter bootstrap 或任何独立于任何 UI 框架的内置集成框架让我选择我想要的任何东西。有没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:36:21.723

我认为允许您使用 Twitter 的 Bootstrap 的一个好的 php 框架是 Symfony2 [http://symfony.com/](http://symfony.com/)。他们有一个名为 Assetic 的客户端资源管理系统，它允许你打包任何你想要的库。因此，虽然它不提供与 twitter 客户端框架的集成，但它确实允许您编写自己的框架。[在http://symfony.com/doc/current/cookbook/assetic](http://symfony.com/doc/current/cookbook/assetic)查看。希望有帮助。

# matlab - 特征曲线（线）的网格堆叠

> ID：11479080
> 
> 赞同：0
> 
> 时间：2012-07-13T22:16:36.820
> 
> 标签：matlab, math, pde

我希望能够模拟特征曲线（线）上的双曲线方程。我将从一个基本的开始。u_{t}+2u_{x}=u^{2}，初始数据为 u(x,0)=cos(x)。解为 u(x,t)=cos(x-2t)/(1-t*cos(x-2t))，其中特征曲线为 x=2*t+x_{0}。所以解决方案是根据特征（特征方法）定义的。

```
x=zeros(10,5);
u=zeros(10,5);
x0=linspace(0,10,10);
t=linspace(0,5,5);
for i=1:length(x0)
    for j=1:length(t)
        x(i,j)=2*t(j)+x0(i);
        if t(j)*cos(x(i,j)-2*t(j))==1
            u(i,j)=0;
        else
            u(i,j)=cos(x(i,j)-2*t(j))/(1-t(j)*cos(x(i,j)-2*t(j)));
        end
    end
end
mesh(u) 
```

显然，特征线网格和矩形网格不适合。如何根据特征绘制解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:16:11.790

首先，由于这条线，您没有矩形网格

```
x(i,j)=2*t(j)+x0(i); 
```

我不完全确定你在问什么。我的印象是您可能想要`u`在不规则网格上绘制表面`x`。如果情况确实如此，您可能会发现以下类似使您能够做您需要的事情 - 尽管看起来您确实需要对您的代码进行一些调整。

[http://blogs.mathworks.com/videos/2007/11/02/advanced-matlab-surface-plot-of-nonuniform-data/](http://blogs.mathworks.com/videos/2007/11/02/advanced-matlab-surface-plot-of-nonuniform-data/)

或者，您可以重新设计您的代码，从而`x`产生一个矩形网格 - 我不能肯定地说，因为您可能只考虑这些特定点是有原因的。

如果你没有得到更好的答案，上面的链接可以让你得到你想要的（假设我已经正确理解了你的问题）。

# ios - iOS 模拟器退出

> ID：11479081
> 
> 赞同：2
> 
> 时间：2012-07-13T22:16:37.013
> 
> 标签：ios, contacts, simulator

突然间我无法正常运行 iOS 模拟器。内置应用程序不再工作（通讯录、Safari 等）。但是，我可以构建和安装我自己的应用程序。

我试图访问联系人应用程序，以便手动添加联系人，但随后出现错误`"The simulated application quit."`

如果我通过运行我的应用程序在 XCode 中启动模拟器，选择`Hardware > Home`，然后我可以打开内置应用程序，包括联系人，但是我无法添加联系人，因为它崩溃了。我重置了模拟器，并将联系人的 SQL DB 移开。

我正在运行 Xcode 4.3.2，模拟器位于...

`XCode4 > Platforms > iPhoneSimulator.platform > Developer > Applications`

有什么建议吗？什么会突然导致这种情况？该错误似乎与我的代码无关，因为此时它完全存在于模拟器中。

注意：我从 Snow Leopard 升级到 Lion，以便可以运行 Xcode 4.3.2。这是几周前的事了。

`Scenario #1`

1.  重启
2.  打开位于的 iOS 模拟器应用程序`XCode4 > Platforms > iPhoneSimulator.platform > Developer > Applications`
3.  选择任何应用程序。例如，联系人应用程序或设置或 Safari 或照片。
4.  模拟器因错误而崩溃`"The simulated application quit."`

`Scenario #2`

1.  重启
2.  打开 Xcode 4.3.2。
3.  构建并运行我正在开发的访问联系人应用程序的应用程序。
4.  应用程序运行
5.  选择硬件 > 主页
6.  内置应用程序打开并运行良好，除了联系人应用程序。
7.  启动联系人应用程序
8.  选择“+”按钮添加联系人。
9.  尝试输入名字。
10.  模拟器因错误而崩溃`"The simulated application quit."`

更新：我找到了解决方法。我应该澄清一下我是在 iPad 模式下使用模拟器运行的。我切换到 iPhone 模式并且能够毫无问题地添加联系人。然后我切换回 iPad，以便继续开发。我的应用程序是通用应用程序，在 SDK 代码中访问联系人没有问题。我目前得出的结论是，带有联系人的模拟器存在错误，或者某些东西出现了错误。无论如何，我又重新开始了。下一步是更新到最新的 Xcode 4.3.3。但是，我不想在大量开发期间这样做。我会在有能力的时候更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:09:34.240

您是否尝试过卸载/重新安装 Xcode 和开发者工具？

# c# - C# 泛型类型事件参数

> ID：11479088
> 
> 赞同：2
> 
> 时间：2012-07-13T22:17:52.533
> 
> 标签：c#, silverlight, events

这是我对自定义事件参数的类定义

```
using System;

public class DeserializeEventArgs<T> : EventArgs
{
    public DeserializeEventArgs(T deserializeResult)
    {
        this.DeserializeResult = deserializeResult;
    }

    public T DeserializeResult
    {
        get;
        private set;
    }
} 
```

我想在要触发此事件的代码中执行此操作

```
public event EventHandler<DeserializeEventArgs<T>> DeserializeEvent; 
```

而且它不会编译（T 下的红线表示未找到类型）。不知道这是否是正确的使用方法，任何有经验的人请分享一些想法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T22:22:41.480

我相信当你声明你的事件时，你需要给它一个使用的类型，就像你对 EventHandler 所做的那样

```
public event EventHandler<DeserializeEventArgs<T>> DeserializeEvent; 
```

需要是

```
public event EventHandler<DeserializeEventArgs<YourType>> DeserializeEvent; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:22:06.440

`T`是一个类型参数 - 本质上是您将要使用的实际类型的替代品。无论您想通过`Deserialize`事件传递什么类型的对象，您都应该将其名称放在那里。

如果您的班级被称为“数据”，那么：

```
public event EventHandler<DeserializeEventArgs<Data>> DeserializeEvent; 
```

# java - 线性布局不显示项目

> ID：11479089
> 
> 赞同：0
> 
> 时间：2012-07-13T22:17:53.220
> 
> 标签：java, android, xml

我想要做的是添加创建一个定位一些本地业务的应用程序。所以我正在做的活动显示了商业信息。一些企业在城市有几家商店，而另一些则只有一家。所以这是我的问题：在视图中，我有包含所有元素的滚动视图，以及滚动视图内的线性布局。如果企业有不止一个商店，我会将每个商店信息添加到一个新的文本视图中，并将文本视图添加到布局中（这都是通过代码完成的）。但是在显示布局的那一刻，它只显示一个商店，而不是显示 3 或 4。我做错了什么？下面是 setupViews() 方法，它是改变显示的方法：

```
private void setupViews() throws SQLException {
        ImageView iv = (ImageView) findViewById(R.id.negocio_logo);
        try {
            iv.setImageBitmap(BitmapFactory.decodeByteArray(toShow.getImgSrc(),
                    0, toShow.getImgSrc().length));
        } catch (NullPointerException npe) {
            iv.setBackgroundColor(Color.WHITE);
        }
        TextView nombreEmpresa = (TextView) findViewById(R.id.nombre_empresa);
        nombreEmpresa.setText(toShow.getNombre());
        TextView descripcionEmpresa = (TextView) findViewById(R.id.descripcion_empresa);
        descripcionEmpresa.setText(toShow.getDescripcion());
        TextView direccionEmpresa = (TextView) findViewById(R.id.direccion_empresa);
        direccionEmpresa.setText(toShow.getDireccion());

        LinearLayout rl = (LinearLayout) findViewById(R.id.linear_layout_si);
        TextView suc = (TextView) findViewById(R.id.sucursales_empresa);
        sucursalDAO sDAO = new sucursalDAO();
        boolean tieneSucursales = sDAO.hasSucursales(toShow.getId());
        if (tieneSucursales == false) {
            suc.setVisibility(View.GONE);
            // sucs.setVisibility(View.GONE);

        } else {
            suc.setVisibility(View.VISIBLE);

            ArrayList<String> sucursales = sDAO.getStringSucursales(toShow
                    .getId());
            ArrayList<TextView> tvs = new ArrayList<TextView>();
            for (int i = 0; i < sucursales.size(); i++) {
                TextView tv = new TextView(this);
                tv.setText(sucursales.get(i));
                tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                tvs.add(tv);
            }
            for (int i = 0; i < tvs.size(); i++) {
                rl.addView(tvs.get(i), i);

            }

        }

    } 
```

这是我认为的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RL"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/White"
    android:orientation="vertical" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/widgetscroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/White"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/negocio_logo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:contentDescription="@string/logo_negocio" />

            <TextView
                android:id="@+id/datos_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/negocio_logo"
                android:background="@drawable/barra"
                android:text="@string/datos_empresa"
                android:textColor="@color/White" />

            <TextView
                android:id="@+id/nombre_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/datos_empresa"
                android:text="@string/testing" />

            <TextView
                android:id="@+id/descripcion_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/nombre_empresa"
                android:text="@string/testing" />

            <TextView
                android:id="@+id/direccion_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/descripcion_empresa"
                android:text="@string/testing" />

            <TextView
                android:id="@+id/sucursales_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/direccion_empresa"
                android:background="@drawable/barra"
                android:text="@string/sucursales"
                android:visibility="gone" />

            <LinearLayout
                android:id="@+id/linear_layout_si"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/sucursales_empresa" >
            </LinearLayout>

            <TextView
                android:id="@+id/contacto_empresa"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/linear_layout_si"
                android:text="@string/testing" />

        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:21:33.133

我想你忘了在 LinearLayout 上设置方向，它显示的是水平的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:19:08.447

我敢打赌你忘了`orientation`设置`LinearLayout`.

# ruby-on-rails - 有很多限制

> ID：11479091
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:17:58.313
> 
> 标签：ruby-on-rails, ruby, activerecord

我想为 has_many 关联设置一个限制。例如，一辆汽车有 4 个轮胎。因此 Car 表应该有 4 个外键来记录 Tire 表中的记录。（请注意，在这种情况下，每个轮胎可以有不同的优先级，因此我需要 4 个键）

无论如何，我可以在声明关联时指定汽车记录中轮胎钥匙的数量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:16:48.940

我不认为`has_many`协会有这样的选择，但您可以`before_create`在您的轮胎模型中进行验证。假设您独立创建轮胎，而不是通过使用嵌套形式的汽车，下面是您的`RAILS_APP/app/models/tire.rb`.

```
Class Tire < ActiveRecord::Base
  belongs_to :car
  before_create :four_tires_per_car

  private
  def four_tires_per_car
    # can't create more tires if the car in question already has four tires
    errors[:base] << "A car can have a maximum of four tires" if car.tires.count == 4
  end
end 
```

如果您使用嵌套表单通过汽车创建轮胎，您可以相应地修改此示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:22:12.713

没有 afaik，但您可以使用 cancan gem 来实现这一点。例如在ability.rb里面

```
can :create, Car do |car|
   car.tires.count <= 4
end 
```

# javascript - 使用 handlebars.js 模板以数组中的最后一项为条件

> ID：11479094
> 
> 赞同：83
> 
> 时间：2012-07-13T22:18:36.080
> 
> 标签：javascript, arrays, helpers, handlebars.js, templating

我正在为我的模板引擎使用handlebars.js，并且希望仅当它是模板配置对象中包含的数组中的最后一项时才进行条件段显示。

```
{
  columns: [{<obj>},{<obj>},{<obj>},{<obj>},{<obj>}]
} 
```

我已经引入了一个助手来进行一些相等/大于/小于比较，并且已经成功地以这种方式识别了初始项目，但是没有运气访问我的目标数组的长度。

```
Handlebars.registerHelper('compare', function(lvalue, rvalue, options) {...})

"{{#each_with_index columns}}"+
"<div class='{{#equal index 0}} first{{/equal}}{{#equal index ../columns.length()}} last{{/equal}}'>"+
"</div>"+
"{{/each_with_index}}" 
```

有谁知道一条捷径、不同的方法和一些车把的优点，这将使我不必撕入 handlebars.js 引擎来确定最佳路线？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-11-05T08:56:09.797

从 Handlebars 1.1.0 开始， first 和 last 已成为 each 助手的原生功能。见票[#483](https://github.com/wycats/handlebars.js/issues/483)。

用法就像[Eberanov 的](https://stackoverflow.com/users/1034657/ebaranov)助手类：

```
{{#each foo}}
    <div class='{{#if @first}}first{{/if}}{{#if @last}} last{{/if}}'>{{@key}} - {{@index}}</div>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-08-17T08:23:37.463

> 从 Handlebars v1.1.0 开始，您现在可以在每个帮助器中使用`@first`和布尔值来解决这个问题：`@last`

```
{{#each foo}}
    <div class='{{#if @first}}first{{/if}}
                {{#if @last}} last{{/if}}'>
      {{@key}} - {{@index}}
    </div>
{{/each}} 
```

* * *

我写的一个快速帮手是：

```
Handlebars.registerHelper("foreach",function(arr,options) {
    if(options.inverse && !arr.length)
        return options.inverse(this);

    return arr.map(function(item,index) {
        item.$index = index;
        item.$first = index === 0;
        item.$last  = index === arr.length-1;
        return options.fn(item);
    }).join('');
}); 
```

然后你可以写：

```
{{#foreach foo}}
    <div class='{{#if $first}} first{{/if}}{{#if $last}} last{{/if}}'></div>
{{/foreach}} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-19T01:58:24.693

如果您只是尝试处理数组的第一项，这可能会有所帮助

`{{#each data-source}}{{#if @index}},{{/if}}"{{this}}"{{/each}}`

@index 由 each 助手提供，对于第一项，它将等于零，因此可以由 if 助手处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T02:09:18.363

解决方案：

```
<div class='{{#compare index 1}} first{{/compare}}{{#compare index total}} last{{/compare}}'></div> 
```

利用以下博客和要点中的助手...

[https://gist.github.com/2889952](https://gist.github.com/2889952)

[http://doginthehat.com.au/2012/02/comparison-block-helper-for-handlebars-templates/](http://doginthehat.com.au/2012/02/comparison-block-helper-for-handlebars-templates/)

```
// {{#each_with_index records}}
//  <li class="legend_item{{index}}"><span></span>{{Name}}</li>
// {{/each_with_index}}

Handlebars.registerHelper("each_with_index", function(array, fn) {
  var total = array.length;
  var buffer = "";

  //Better performance: http://jsperf.com/for-vs-foreach/2
  for (var i = 0, j = total; i < j; i++) {
    var item = array[i];

    // stick an index property onto the item, starting with 1, may make configurable later
    item.index = i+1;
    item.total = total;
    // show the inside of the block
    buffer += fn(item);
  }

  // return the finished buffer
  return buffer;

});

Handlebars.registerHelper('compare', function(lvalue, rvalue, options) {

    if (arguments.length < 3)
        throw new Error("Handlerbars Helper 'compare' needs 2 parameters");

    operator = options.hash.operator || "==";

    var operators = {
        '==':       function(l,r) { return l == r; },
        '===':      function(l,r) { return l === r; },
        '!=':       function(l,r) { return l != r; },
        '<':        function(l,r) { return l < r; },
        '>':        function(l,r) { return l > r; },
        '<=':       function(l,r) { return l <= r; },
        '>=':       function(l,r) { return l >= r; },
        'typeof':   function(l,r) { return typeof l == r; }
    }

    if (!operators[operator])
        throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator);

    var result = operators[operator](lvalue,rvalue);

    if( result ) {
        return options.fn(this);
    } else {
        return options.inverse(this);
    }

}); 
```

**请注意起始索引正确为 1。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-02T16:57:38.357

[我对Matt Brennan](https://stackoverflow.com/users/805227/matt-brennan)的助手做了一些改进，您可以将此助手与对象或数组一起使用，此解决方案需要[下划线](http://underscorejs.org/)库：

```
Handlebars.registerHelper("foreach", function(context, options) {
  options = _.clone(options);
  options.data = _.extend({}, options.hash, options.data);

  if (options.inverse && !_.size(context)) {
    return options.inverse(this);
  }

  return _.map(context, function(item, index, list) {
    var intIndex = _.indexOf(_.values(list), item);

    options.data.key = index;
    options.data.index = intIndex;
    options.data.isFirst = intIndex === 0;
    options.data.isLast = intIndex === _.size(list) - 1;

    return options.fn(item, options);
  }).join('');
}); 
```

用法：

```
{{#foreach foo}}
    <div class='{{#if @first}}first{{/if}}{{#if @last}} last{{/if}}'>{{@key}} - {{@index}}</div>
{{/foreach}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-15T14:41:18.680

仅供参考：如果您遇到 Handlebars < 1.1.0（像我一样），您可能想尝试以下解决方法：

`isLast`在您正在迭代的对象上定义一个属性并像使用它一样使用它

`{{#each objectsInList}}"{{property}}": "{{value}}"{{#unless isLast}},{{/unless}}{{/each}}`

构建一个 JSON 对象。

# c# - 游戏中的控制台式界面

> ID：11479108
> 
> 赞同：2
> 
> 时间：2012-07-13T22:19:33.023
> 
> 标签：c#, debugging, user-interface, xna

我目前正在使用 XNA 用 C# 编写一个非常简单的 2d 游戏。

我想知道如何在游戏或图形软件中实现控制台类型的界面，例如 Skyrim 或 Counter-strike 或其他更多游戏？

这些“控制台”可以让您通过各种命令直接在游戏中更改许多参数。

我发现这对于调试目的非常有趣，我希望在我的程序中实现类似的东西。有没有一种特殊的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:45:19.057

[https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)可能会有所帮助。据我所知，XNA 不提供任何类型的预制开发控制台工具或类。

最简单的方法就是在屏幕上放几个精灵——一个黑盒子和几行白色文本。XNA 已经有一些方法可以用你想要的任何颜色和字体在屏幕上绘制文本字符串。输入一些代码来检测按键并在键入时构造一个字符串。

稍难的部分是解析和执行用户的命令。看看旧的冒险游戏文本解析器可能是相关的。

至于如何实际修改代码的各种参数，您只需为各种属性包含必要的 getter 和 setter，并让您的文本解析器调用正确的方法。

# python - QFileDialog 打开两个对话框

> ID：11479109
> 
> 赞同：1
> 
> 时间：2012-07-13T22:19:42.507
> 
> 标签：python, qt, pyqt, qfiledialog

我想将选定文件的位置存储为 Python 中的字符串。我正在尝试使用 QFileDialog 来完成此操作，我有：

```
self.filedialog = QtGui.QFileDialog(self)
self.filedialog.show()
filepath = str(self.filedialog.getOpenFileName()) 
```

这将打开两个 QFileDialog 窗口。有趣的是，其中一个窗口没有继承我的 GUI 的“样式”，设置了我的 setStyle，但确实返回了文件路径字符串。另一个 QFileDialog 确实继承了样式，但不能返回文件路径字符串。我发现[QFileDialog 文档](http://qt-project.org/doc/qt-5.0/qfiledialog.html#setDirectory)很有帮助，但无法创建一个 QFileDialog 框，它既能生成文件路径字符串，又能继承我的 GUI 的样式。我犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:47:33.797

您实际上创建了 2 个窗口。

该函数`QFileDialog.getOpenFileName`是静态的，这意味着它创建自己的`QFileDialog`对象，显示窗口，等待用户选择文件并返回选择的文件名。

您应该只需要该行：

```
filepath = str(QFileDialog.getOpenFileName()) 
```

如果您在应用程序级别设置样式（使用`QApplication.setStyle`），如果您使用非本机对话框，它可能会应用于窗口：

```
filepath = str(QFileDialog.getOpenFileName(options=QFileDialog.DontUseNativeDialog))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:43:46.120

`getOpenFileName`是[“创建模态文件对话框”](http://doc.qt.nokia.com/4.7-snapshot/qfiledialog.html#getOpenFileName)的便捷功能。这就是你得到第二个对话框的原因。

用于`filedialog.exec()`显示对话框并`fileDialog.selectedFiles()`获取文件名。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-19T01:53:59.457

exec是python中的保留字，必须使用exec_()。

```
dialog = QFileDialog(self)
dialog.exec_()
for file in dialog.selectedFiles():
    print file 
```

# android - 什么是适配器？

> ID：11479110
> 
> 赞同：-5
> 
> 时间：2012-07-13T22:19:44.237
> 
> 标签：android, adapter

我已经看到用于各种 xml 组的适配器，例如 listview imageview、gallery，它到底是做什么的。我阅读了谷歌上的文档，但它似乎对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:21:05.683

适配器以自定义方式将消费者（例如 a `AdapterView`、like a `ListView`）连接到数据源。

消费者本质上向适配器请求单独的视图，适配器的职责是构建它们。

# opencv - cvCvtColor 失败

> ID：11479112
> 
> 赞同：0
> 
> 时间：2012-07-13T22:20:07.563
> 
> 标签：opencv

我尝试根据本网站 [http://www.lirtex.com/robotics/fast-object-tracking-robot-computer-vision/上写的内容运行以下程序](http://www.lirtex.com/robotics/fast-object-tracking-robot-computer-vision/)

初始化参数

```
CvCapture *capture = cvCaptureFromCAM(0);

int width = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH );
int height = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT );

IplImage *frame;

 CvSize size = cvSize(640,480);
cvNamedWindow( "Camera", CV_WINDOW_NORMAL  );
cvNamedWindow( "HSV", CV_WINDOW_NORMAL  );
cvNamedWindow( "EdgeDetection", CV_WINDOW_NORMAL  );

cvResizeWindow("Camera",640,480);
cvResizeWindow("HSV",640,480);
cvResizeWindow("EdgeDetection",640,480);

IplImage *  hsv_frame    = cvCreateImage(size, IPL_DEPTH_8U, 3);
IplImage*  thresholded   = cvCreateImage(size, IPL_DEPTH_8U, 1); 
```

当我像这样调用函数 cvCvtColor 时：

```
cvCvtColor(frame, frame  , CV_BGR2HSV); 
```

第二个参数等于第一个它的工作

但是当我像这样调用函数时

```
cvCvtColor(frame, hsv_frame  , CV_BGR2HSV); 
```

它失败并引发异常

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:00:35.733

Array*帧*是捕获图像的大小，而 *hsv_frame* 已被硬编码为 640x480。颜色空间转换操作（cvCvtColor）要求源和目标的大小相同，因此例外。

解决方案：

一种。通过设置使用与输入相同的大小

`CvSize size = cvSize(frame->width, frame->height);`

-或者-

湾。如果您希望最终的 o/p 为 640x480，请使用以下命令将输入​​调整为所需大小：`cvResize`

最后一点：与 C 接口相比，C++ 接口更直观、更稳定，并且增加了一些特性。我建议转移到 OpenCV 的 C++ 接口

# asp.net - 在响应中仅返回“OK”的 GET 页面示例

> ID：11479117
> 
> 赞同：0
> 
> 时间：2012-07-13T22:20:44.187
> 
> 标签：asp.net, jquery-plugins, session-timeout, timeout-dialog.js

我试图在我的 ASP.Net 应用程序中使用 jQuery 插件“超时对话框”来提醒用户他/她的会话即将到期。该插件位于：[http](http://rigoneri.github.com/timeout-dialog.js/) ://rigoneri.github.com/timeout-dialog.js/ 。它说名为“keep-alive-url”的参数之一如下：

**keep_alive_url** - 执行 GET 请求以保持会话活动的 url。这个 GET 需要一个“OK”的纯 HTTP 响应。

**如何在 ASP.Net 或简单的 html 中创建一个在其 http 响应中返回纯“OK”的页面？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:42:53.330

尝试：

```
Response.StatusCode = 200; 
```

在 ASP.NET 代码后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:32:06.380

这让我难倒了一段时间。

某些原因它需要是 404 Not Found

```
<cfheader statusCode="404" statusText="Not Found"> 
```

# php - PHP IIS7 VERB PUT 获取数据

> ID：11479122
> 
> 赞同：0
> 
> 时间：2012-07-13T22:21:10.763
> 
> 标签：php, iis-7, httpverbs

我有另一个问题类似于我在这里提出的问题： [JS Ajax calls PHP and getting ajax call data](https://stackoverflow.com/questions/11385668/js-ajax-calling-php-and-getting-ajax-call-data)

但是这次我处理的是 PUT 动词。我正在阅读以获取 php 中的数据应该使用以下内容：

```
file_get_contents("php://input") 
```

资源：[http ://www.lornajane.net/posts/2008/accessing-incoming-put-data-from-php](http://www.lornajane.net/posts/2008/accessing-incoming-put-data-from-php)

但是对于put，这似乎不起作用。我觉得它可能与 IIS 7 可能会删除数据有关？.. 我安装了 webDav 并且必须删除它才能让 put 动词得到解决想知道 IIS 中是否还有其他东西可能会阻止数据在服务器级别解析？

我的 ajax 请求如下所示

```
 var data = '{"storyId":"2","storyName":"a Changed Story.","authorId":"5", "published":"1"}'; 

                $.ajax({
                    type: "PUT",
                    url: BaseUrl + "Story/2",   
                    data: data,
                    success: function(data){
                        console.log(data);
                    },
                    error: function(request){
                        console.log(request);
                    },
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:28:08.097

`PUT`并非所有浏览器都支持和`DELETE`via 。并且是所有浏览器都支持的仅有的两个。`$.ajax``POST``GET`

作为参考，请在此处查看有关 `$.ajax 的 jQuery 文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

此外，您需要更改 HTTP 守护程序的设置以允许您的脚本访问 put。这是通过将以下内容添加到您的根 .htaccess 来完成的：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ handler.php?uri=$1 [L,QSA] 
```

请注意，您必须有权`mod_rewite`进行这些修改。

请参阅`PUT`此处的 php 文档：http: [//php.net/manual/en/features.file-upload.put-method.php](http://php.net/manual/en/features.file-upload.put-method.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:47:37.447

WooHoo 由于这个问题，我想通了。

[PHP 获取 PUT 请求正文](https://stackoverflow.com/questions/9684315/php-get-put-request-body)

出于某种原因，如果您像这样请求“PUT”的数据

```
file_get_contents("php://input") 
```

在第一次读取时，它将获取所有数据。但是，像这样使用它获取数据的第二次尝试将返回 null。这不是 POST 的情况。我只需要这样做，以便我们只请求一次上述数据。

我的理论（可能是BS）；) 我认为它读取 PUT 请求的方式就像读取文件或流，如果有办法将读取器重新设置为开始可能可以获得该数据。这只是我关于它如何工作的理论我真的没有任何资源支持它是这样工作的。

# c++ - 在matlab mex文件中动态链接时枚举的typeid发生变化

> ID：11479139
> 
> 赞同：1
> 
> 时间：2012-07-13T22:23:16.040
> 
> 标签：c++, matlab, boost, mex, typeid

我有一个 C++ 库，它有一个返回 a 的特定函数`boost::any`，它的值类型是`enum`在不同的包含库中定义的特定类型。这通常工作正常。

但是，当我从 Matlab mex 文件动态链接到我的库时，我的库`typeid(the_enum_t)`中制作的东西和调用者中制作的东西似乎不同，因为它不比较`==`. 由于我实际上正在使用[`flann`](https://github.com/mariusmuja/flann/)，其版本基于`boost::any`执行检查`type_info::==`，这会使一切都中断。静态链接工作得很好，但这在这里有点痛苦，我真的宁愿让它工作。

我认为`type_info::==`应该跨图书馆边界始终如一地工作。这是否与 Matlab 如何从 mex 动态加载库有关？

* * *

[这是一些重现此代码的代码（也可在此 gist](https://gist.github.com/3121435)中以易于下载的形式使用 makefile 获得）。

首先，定义枚举 ( `flann`) 的库的替身：

```
namespace library {
    enum the_enum_t { el_one, el_two, el_three };
} 
```

现在我的图书馆的代理，`stubby.hpp`：

```
#include <boost/any.hpp>
#include "the_enum.hpp"
boost::any the_function(); 
```

及其实施`stubby.cpp`：

```
#include "stubby.hpp"
boost::any the_function() {
    return boost::any(library::el_two);
} 
```

最后，测试代码，它是为独立而不是为 mex 文件`test.cpp`编译的：`-DNO_MEX`

```
#include "stubby.hpp"
#include <boost/any.hpp>

#ifdef NO_MEX
#include <cstdio>
using std::printf;
int main() {
#else
#include "mex.h"
void mexFunction(int nlhs, mxArray **plhs, int nrhs, const mxArray **prsh) {
#endif
    boost::any val_any = the_function();
    printf("%s (equal: %d)\n",
            val_any.type().name(),
            val_any.type() == typeid(library::the_enum_t));
} 
```

我得到了预期的输出

```
N5flann17flann_algorithm_tE (equal: 1) 
```

从每个

```
$ g++ -o test{,.cpp} -DNO_MEX libstubby.a && ./test      
$ g++ -o test{_s,.cpp} -DNO_MEX libstubby.so && ./test_s
$ ln -sf test{,_s}.cpp && mex test_s.cpp libstubby.a && matlab -r test 
```

但是动态链接 mex 文件不起作用：

```
$ mex test.cpp libstubby.so && matlab -r test
N5flann17flann_algorithm_tE (equal: 0) 
```

我看到同样的行为

*   Matlab R2011b 和 R2011a，OSX 10.7，苹果 gcc 4.2.1
*   Matlab R2011b，CentOS 5.7，gcc 4.1.2
*   Matlab R2010a，Ubuntu 11.04，gcc 4.4.5

奇怪的是，我本可以在几个月前发誓它可以工作，但也许我只是在测试方面做得不好。

显然我可以通过静态链接来解决这个问题。但是为什么会这样呢？它与 Matlab 加载 mex 文件及其库的方式有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:35:43.860

Boost 有一个解决这个问题的方法；见[https://svn.boost.org/trac/boost/ticket/754](https://svn.boost.org/trac/boost/ticket/754)

boost 可能无法启用解决方法。尝试`-DBOOST_AUX_ANY_TYPE_ID_NAME`根据该票证上的补丁传递编译器标志。

# java - 使用 maven bundle 插件进行 osgi 开发并设置依赖项

> ID：11479142
> 
> 赞同：1
> 
> 时间：2012-07-13T22:23:43.810
> 
> 标签：java, maven, osgi, bundle

我正在使用 maven (maven-bundle-plugin) 和 apache karaf 进行 osgi bundle 开发的第一步。我的问题是：如何导入另一个捆绑包的包？

如果我有两个捆绑包 A 和 B。假设捆绑包 A 导出一个包“package.from.bundle.A”。我可以在 Bundle A Project 的 pom.xml 中声明：

```
 ...
<instructions>
 ...
  <Export-Package>
    package.from.bundle.A*;version=${project.version}
  </Export-Package>
  <Import-Package>
       *
  </Import-Package>
</instructions>
... 
```

但是我如何声明我想在 Bundle B 中使用该包？如果我只是在项目 B 的 pom 文件的 import-package 标记之间写包名，这不起作用...

```
 ...
<instructions>
 ...
  <Export-Package>
  </Export-Package>
  <Import-Package>
       package.from.bundle.A
  </Import-Package>
</instructions>
... 
```

maven 如何知道这个包与哪个捆绑项目相关？如何使用 maven 在我的包之间使用依赖项？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:13:39.543

maven bundle 插件在幕后使用 bnd，它使用字节码分析从编译的代码中追溯地计算导入。包导出更多地是一种设计，这就是为什么需要明确指定它们的原因。

您可以查看目标文件夹中生成的清单，我建议您确保了解代表您所做的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T18:51:56.927

您必须将 maven 依赖项设置为您需要的所有包。这对于 maven 中的编译步骤是必要的。maven bundle plugin 或 bnd 会分析构建结果。它会自动检测您提供的所有包并导出它们，除非它们中有一些名称，例如 impl。它还检测您导入的所有包并为它们创建 Import-Package 语句。因此，在大多数情况下，您不必配置导入和导出。因此，只需将它们留空并检查罐子中的清单。仅当它不正确时，您必须手动配置。如果您配置其他导入，请不要忘记添加 ,*。如果您忘记了这一点，则不会添加自动检测到的包，您必须手动指定所有您通常不想要的包。

# utf-8 - 检测 UTF-8 编码（MS IDE 是如何做到的）？

> ID：11479143
> 
> 赞同：7
> 
> 时间：2012-07-13T22:23:52.133
> 
> 标签：utf-8, character-encoding, ide

各种字符编码的一个问题是包含文件并不总是被清楚地标记。使用“字节顺序标记”或 BOM 标记某些内容的约定不一致。但本质上，您必须被*告知*文件编码是什么，才能准确读取它。

我们构建了读取源文件的编程工具，这让我们很伤心。我们有办法指定默认值，并嗅探 BOM 等。而且我们在约定和默认值方面做得很好。但是我们（我假设其他所有人）挂断的地方是没有 BOM 标记的 UTF-8 文件。

最近的 MS IDE（例如，VS Studio 2010）显然会“嗅探”文件以确定它是否是 UTF-8 编码而没有 BOM。（在工具业务中，我们希望与 MS 兼容，因为它们的市场份额，即使这意味着必须与他们一起越过“愚蠢”的悬崖。）我对他们使用什么特别感兴趣启发式（尽管启发式的讨论很好）？怎么可能是“对的”？（考虑以这种方式解释的 ISO8859-x 编码字符串）。

编辑：这篇关于检测字符编码/集的论文非常有趣： [http ://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html](http://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html)

编辑 2012 年 12 月：我们结束了对整个文件的扫描，以查看它是否包含任何违反 UTF-8 序列的行为……如果没有，我们将其称为 UTF-8。该解决方案的坏处是，如果字符是 UTF-8，则必须处理两次字符。（如果不是 UTF-8，这个测试可能会很快确定，除非文件发生在所有 7 位 ASCII 上，此时像 UTF-8 一样读取不会受到伤害）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T17:41:23.823

如果编码是 UTF-8，那么您在 0x7F 上看到的第一个字符必须是 UTF-8 序列的开头。所以测试它。这是我们使用的代码：

```
unc ::IsUTF8(unc *cpt)
{
    if (!cpt)
        return 0;

    if ((*cpt & 0xF8) == 0xF0) { // start of 4-byte sequence
        if (((*(cpt + 1) & 0xC0) == 0x80)
         && ((*(cpt + 2) & 0xC0) == 0x80)
         && ((*(cpt + 3) & 0xC0) == 0x80))
            return 4;
    }
    else if ((*cpt & 0xF0) == 0xE0) { // start of 3-byte sequence
        if (((*(cpt + 1) & 0xC0) == 0x80)
         && ((*(cpt + 2) & 0xC0) == 0x80))
            return 3;
    }
    else if ((*cpt & 0xE0) == 0xC0) { // start of 2-byte sequence
        if ((*(cpt + 1) & 0xC0) == 0x80)
            return 2;
    }
    return 0;
} 
```

如果返回 0，则它不是有效的 UTF-8。否则跳过返回的字符数并继续检查下一个超过 0x7F 的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-09T21:13:41.283

Visual Studio Code 使用[jschardet](https://github.com/aadsm/jschardet)，它返回猜测值和置信度。它都是开源的，所以你可以检查代码。

[https://github.com/microsoft/vscode/issues/101930#issuecomment-655565813](https://github.com/microsoft/vscode/issues/101930#issuecomment-655565813)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T20:46:02.160

我们刚刚找到了解决方案基本上，当您不知道文件/流/源的编码时，您需要检查整个文件和/或查找部分文本以查看是否获得 UTF-8 匹配。我看到这类似于某些抗病毒产品的作用，检查已知病毒子串的部分

也许我建议您将调用应用于类似于我们在读取文件/流时所做的函数，逐行确定是否找到 UTF-8 编码

请参考我们下面的帖子

参考。- [https://stackoverflow.com/questions/17283872/how-to-detect-utf-8-based-encoded-strings](https://stackoverflow.com/questions/17283872/how-to-detect-utf-8-based-encoded-strings)

# python - 文件末尾的 csv.DictReader 异常

> ID：11479144
> 
> 赞同：1
> 
> 时间：2012-07-13T22:23:51.890
> 
> 标签：python, csv

我使用以下代码作为解析[FCC License View](http://www.fcc.gov/developer/license-view-api)示例[数据集](http://data.fcc.gov/download/license-view/fcc-license-view-data-sample.csv)的概念证明：

```
import csv

if __name__ == '__main__':
    csv_file = open('fcc-license-view-data-sample.csv', 'rb')
    dialect = csv.Sniffer().sniff(csv_file.read(1024))
    csv_file.seek(0)
    data = csv.DictReader(csv_file, dialect=dialect)
    for item in data:
        print item 
```

模块打印完所有数据后，抛出异常：

> ```
> File "C:\Python27\lib\csv.py", line 104, in next
> row = self.reader.next() 
> ```
> 
> _csv.Error：字符串内的换行符

为什么会出现这个异常？我怎样才能避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:31:28.170

该 CSV 文件示例似乎被中途截断。结局是

```
 "2600 TOWER OAKS BOULEVARD","ROCKVILLE","MD","2085 
```

注意未闭合的引号。

如果您只想对样本进行操作，请不要处理最后一行。我认为这应该有效：

```
def all_but_last_line(file):
    last = next(file)
    for line in file:
        yield last

if __name__ == '__main__':
    with open('fcc-license-view-data-sample.csv', 'rb') as csv_file:
        dialect = csv.Sniffer().sniff(csv_file.read(1024))
        csv_file.seek(0)
        data = csv.DictReader(all_but_last_line(csv_file), dialect=dialect)
        for item in data:
            print item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T08:40:23.823

我发布了，肯定很晚才回答这个问题，但是因为我遇到了同样的问题，所以有一个技巧

也许那是因为您扫描目录以查找 csv 文件并在 python 中消化它们。

我在上传期间不拍摄文件的技巧是：

使用[inotify](http://pyinotify.sourceforge.net/)系统检查已关闭的文件。

或者对于类似 cron 的进程，创建一个“中间房间”：ftp 目录 > 进程目录并使用 bash 技巧：

```
source=directorySource
destination=directoryDestination
cd $source
for file in `find $source  -mtime +1  -print `
do 
    mv $file $destination$file
done 
```

# php - 如果信息已更新，则显示文本，否则隐藏

> ID：11479146
> 
> 赞同：0
> 
> 时间：2012-07-13T22:24:14.667
> 
> 标签：php, mysql, forms, pseudocode, if-statement

我想知道是否有人可以帮助我。我相信这将非常简单。

我有一个表格，用户可以在其中更新他们的帐户信息。在配置文件中，它会打印出此信息。但是，如果它是空的，他们无论如何都会将文本隐藏在它旁边。

例如，如果 $data['work'] 为空，我想隐藏“Works at”。

```
<?php echo "Works at ".$data['work']."" ?> 
```

我打算尝试一个案例并打破数据库中的状态 1。但是由于他们提供的信息如此之多，我认为这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:28:09.257

```
<?php
if(!empty($data['work']))
  echo "Works at ".$data['work'];
?> 
```

**编辑：**要真正确定用户没有输入一些空格，您可以扩展它来修剪值：

```
<?php
$trimmed = trim($data['work']);
if(!empty($data['work']))
  echo "Works at ".$data['work'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:26:52.817

```
<?php if ($data['work'] != ""): ?>
  Works at <?php echo $data['work']; ?>
<?php endif; ?> 
```

或者

```
<?php
if ($data['work'] != "") {
  echo "Works at ".$data['work'];
}
?> 
```

或者

```
<?php
echo ($data['work'] != "") ? "Works at ".$data['work'] : null;
?> 
```

您可以使用 trim-function 来确保只有空格的字符串也将与此条件匹配：`trim($data['work'])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:47:06.347

您可以使用三元运算符，通过先修剪检查是否没有提供空白空间

```
echo trim($data['work']) != '' ? 'Works at ' . $data['work'] : ''; 
```

使用 htmlentities 转义输出也是一个好习惯

```
echo trim($data['work']) != '' ? 'Works at ' . htmlentities($data['work'], ENT_QUOTES, 'UTF-8') : ''; 
```

# list - 解析字符串中的单词

> ID：11479147
> 
> 赞同：0
> 
> 时间：2012-07-13T22:24:16.903
> 
> 标签：list, haskell

我希望我清楚我的问题！

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:52:13.350

`words`中的函数`Prelude`将为您过滤掉空格（按所需类型查找函数的好方法是[Hoogle](http://www.haskell.org/hoogle/?hoogle=String%20-%3E%20%5BString%5D)）。

```
Prelude> :t words
words :: String -> [String] 
```

您只需要使用适当的过滤器来组合它，该过滤器使用`Set`. 这是一个非常基本的：

```
import Data.Set (Set, fromList, notMember)

parser :: String -> [String]
parser = words . filter (`notMember` delims)
   where delims = fromList ".,!?" 
```

`parser "yeah. what?"`将返回`["yeah", "what"]`。

查看[Learn You A Haskell](http://learnyouahaskell.com/)以获得一些很好的介绍性材料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:33:14.197

您需要[Data.List.Split](http://hackage.haskell.org/packages/archive/split/0.1.4.3/doc/html/Data-List-Split.html)，它涵盖了绝大多数拆分用例。

对于您的示例，只需使用：

```
splitOneOf ".,!?" 
```

如果你想摆脱连续分隔符之间的“空词”，只需使用：

```
filter (not . null) . splitOneOf ".,!?" 
```

如果您希望这些分隔符来自您已经存储它们的集合，那么只需使用：

```
import qualified Data.Set as S

s :: S.Set Char

split = filter (not . null) . splitOneOf (S.toList s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:33:37.833

在您学习的过程中，以下是从头开始的方法。

```
import qualified Data.Set as S 
```

首先，单词边界的集合：

```
wordBoundaries :: S.Set Char
wordBoundaries = S.fromList " ." 
```

([`Data.Set.fromList`](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Set.html#v%3afromList)接受一个元素列表；`[Char]`与 相同`String`，这就是为什么我们可以在这种情况下传递一个字符串。)

接下来，将字符串拆分为单词：

```
toWords :: String -> [String]
toWords = fst . foldr cons ([], True)
  where 
```

[`fst`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3afst)and的文档[`foldr`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3afoldr)非常清楚，但是[`.`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3a.)如果您以前没有遇到过函数组合，那么 for 的文档就有点简洁了。

给定的参数`toWords`被馈送到`foldr cons ([], True)`. `.`然后从中获取结果`foldr cons ([], True)`并将其提供给`fst`. 最后，结果 from`fst`用作`toWords`自身的结果。

我们还需要定义`cons`：

```
 cons :: Char -> ([String], Bool) -> ([String], Bool)
    cons ch (words, startNew)
        | S.member ch wordBoundaries = (              words, True)
        | startNew                   = ([ch]        : words, False)
    cons ch (word : words, _)        = ((ch : word) : words, False) 
```

家庭作业：弄清楚它是做什么`cons`的以及它是如何工作的。`foldr`如果您首先确保您了解如何调用它，这可能会更容易。

# ruby-on-rails - Rails - 正确的模型设置

> ID：11479150
> 
> 赞同：0
> 
> 时间：2012-07-13T22:24:28.073
> 
> 标签：ruby-on-rails, model, installation

我对rails有点陌生，正在设置我的模型。我的应用程序的某个部分依赖于三个独立的模型。

### 食谱

`has_many :recipe_ingredients`

### 配方成分

```
belongs_to :recipe
has_one :ingredient 
```

### 成分

`#blank right now`

这是合适的模范组织吗？我将配方成分作为单独模型的原因是因为我想将重量和数量值存储到它。

谢谢，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:00:51.307

我会说这几乎是正确的。唯一的问题是，因为 RecipeIngredient`has_one`成分，成分记录必须存储 recipe_ingredient_id（请参阅[has_one 关联](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)），因此单个成分将绑定到 recipe_ingredient（因此关联的配方）。这可以防止您在不同的食谱中重复使用相同的成分。

相反，请使用以下内容：

食谱：

```
has_many :recipe_ingredients
has_many :ingredients, :through => :recipe_ingredients 
```

配方成分：

```
belongs_to :recipe
belongs_to :ingredient 
```

成分：

```
has_many :recipe_ingredients
has_many :recipes, :through => recipe_ingredients 
```

这在食谱和成分之间建立了多对多的关系，因此成分可以重复用于多个食谱。每种成分的数量将存储在 RecipeIngredients 中。

如果您需要澄清，请告诉我。

# .net - 当我得到序列化异常时访问 WCF 服务中的消息

> ID：11479153
> 
> 赞同：2
> 
> 时间：2012-07-13T22:24:59.237
> 
> 标签：.net, json, wcf, rest, ierrorhandler

在 WCF 服务中，我有自定义`IErrorHandler`. 效果很好，我通过记录错误修复了很多东西。我得到的最后一个错误是序列化异常：

```
Unexpected end of file. Following elements are not closed: Source, item, root.

There was an error deserializing the object of type System.Collections.Generic.List`1[[My.Web.Services.Dto.Log, My.Web.Services.Dto, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]. Unexpected end of file. Following elements are not clo 
```

这告诉我消息没有正确地从客户那里传来。有什么办法可以让我看到它是什么消息？我可以从内部访问 HTTP 发布参数`IErrorHandler`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:38:55.240

[IErrorHandler](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)在响应消息被传递到发生序列化的通道堆栈之前被调用。因此，如果序列化遇到问题，将不会调用您的自定义错误处理程序。最好的办法是使用[跟踪](http://msdn.microsoft.com/en-us/library/aa738639.aspx)来记录消息并检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:03:55.750

创建一个 WCF [MessageInspector](http://msdn.microsoft.com/en-us/library/aa717047.aspx)，（IDispatchMessageInspector）它将让您在反序列化之前访问消息，请参阅链接示例中的 AfterReceiveRequest 方法。伊恩·皮克内尔（Ian Picknell）有一个更长的[帖子](http://ianpicknell.blogspot.it/2011/03/implementing-idispatchmessageinspector.html)，其中包含更多细节

# visual-studio-2010 - Windows XP 中的部署错误 [错误：SQL Server 数据库未安装或未运行]

> ID：11479155
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:25:10.663
> 
> 标签：visual-studio-2010, sql-server-2008, c#-4.0, windows-xp, clickonce

我最近开发了一个**POS 系统**并正在部署它。

**应用规格：**

*   该应用程序基本上是一个POS系统。
*   后端 = SQL Server 2008 Express R2。
*   前端 = C#
*   我还使用了 SMO 库。
*   部署方法 = 单击一次。
*   目标框架 = 4.0。
*   开发工具 = Visual Studio 2012 RC。
*   操作系统 = Windows 7 家庭高级版。
*   使用了一些 SQL 功能包，如共享管理对象、CLR 类型。和别的。

选择了先决条件，我也将它们打包。

在全新的 Windows 7 中，安装很好。并且应用程序正在运行最新。

在win XP下安装没问题。但是当我启动应用程序时。它与此错误有关。

```
SQL Server database is not installed and or not running. 
```

和应用程序退出。

**重要提示：** 我正在测试的“WINDOWS XP SP3 专业版”安装在虚拟机上

在代码中，我正在运行一些 SMO 库函数，以便为应用程序的首次使用安装 *.sql 脚本。

安装了 SQL Server 2008 R2 及其所有依赖项。和其他功能包。所有的先决条件都安装在 XP 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:18:59.223

您可以在 XP VM 上运行 SQLServer Management Studio 并查看 SQLServer 吗？如果您在 VM 上运行 SQLServer 配置管理器，然后单击 SQL Server 服务，它是否显示该服务正在运行？

您如何配置连接？您是否为 SQLServer 网络配置启用了命名管道和 TCP/IP？SQL Native Client 配置怎么样？

您是否在 ClickOnce 部署中将 SQLServer Express 勾选为先决条件？如果运行 setup.exe 会发生什么？它是否识别它已安装？

已安装的 SQLServer Express - 它是命名实例，还是您将其保留为 ".\SQLExpress" ？ClickOnce 应用程序使用的连接字符串是否正确？

# ios - jQuery Mobile 自定义选择菜单适用于 Mobile Safari，但不适用于 UIWebView

> ID：11479157
> 
> 赞同：1
> 
> 时间：2012-07-13T22:25:45.693
> 
> 标签：ios, ipad, jquery-mobile, uiwebview, xamarin.ios

我`jQuery Mobile`在一个运行在`UIWebView`. 该应用程序是编写的，`Monotouch`并具有多个选项卡，其中一个选项卡显示 web 视图中的`html5`内容。`jQuery Mobile`允许`html5`内容与应用程序的本机部分具有一致的外观和感觉。我正在尝试构建`html5`使用`jQuery Mobile`自定义选择菜单的功能，换句话说，选择`data-native-menu`属性设置为`false`，在这里我遇到了一个奇怪的问题。我已将问题提炼为一个简单的示例；这是代码：

```
<body>
    <div data-role="page" data-theme="b" id="forms">
        <div data-role="content">
             <select id="test" data-native-menu="false">
                 <option value="abc">ABC</option>
                 <option value="def">DEF</option>
                 <option value="ghi">GHI</option>
                 <option value="jkl">JKL</option>
                 <option value="mno">MNO</option>
                 <option value="pqr">PQR</option>
                 <option value="abc1">ABC</option>
                 <option value="def1">DEF</option>
                 <option value="ghi1">GHI</option>
                 <option value="jkl1">JKL</option>
                 <option value="mno1">MNO</option>
                 <option value="pqr1">PQR</option>
                 <option value="abc2">ABC</option>
                 <option value="def2">DEF</option>
                 <option value="ghi2">GHI</option>
                 <option value="jkl2">JKL</option>
                 <option value="mno2">MNO</option>
                 <option value="pqr2">PQR</option>
             </select>
        </div> <!--content-->
    </div> <!-- page-->
</body> 
```

当我在其中运行此代码`Firefox`或`Safari`它工作正常时。此外，如果我在其`Mobile Safari`上运行它`iPad`也可以正常工作。但是，当我`UIWebView`在我的应用程序中运行这个时，弹出窗口只显示选择且显示覆盖值少量项目时正确显示并关闭。相反，当显示全屏弹出窗口时，关闭弹出窗口时会出错。因此，例如，使用我上面粘贴的代码，如果`iPad`在`portrait mode`. 但是如果我打开`iPad`应用程序`landscape mode`并单击选择，那么覆盖的项目太多，而是会显示全屏弹出窗口。然后，当我尝试关闭此全屏弹出窗口时，将发生以下两种情况之一：

*   1）第一次加载页面时，弹出窗口根本不会关闭。它根本不会响应任何触摸事件。

*   2）如果我在 webview 中重新加载页面内容并重试，现在当我尝试关闭弹出窗口时，整个*UIWebView将消失。*这种情况将在页面的第二次和每次后续加载时发生。

奇怪的是，当我在调试模式下运行应用程序时，当我尝试从弹出窗口中选择一个项目或单击*X*关闭它时，我没有看到任何异常抛出。webview 就*消失了*。我可以说 webview 已经消失了，因为我`UITabBarController`有一个背景图像显示在每个选项卡上，除了在它所在的选项卡上`UIWebView`，因为 webview 覆盖了此选项卡上的背景图像。当我尝试关闭弹出窗口时，背景图像突然出现在原本为空的屏幕上......这意味着 webview 现在已经消失了。

我真的需要能够在我的`html5`内容中使用自定义选择菜单，所以我希望其他人以前遇到过这种情况并且知道这里发生了什么。那么，有谁知道是什么导致了这种奇怪的行为，`UIWebView`或者知道这个问题的解决方法？

我`iPad`正在运行的`iOS`版本`5.0.1 (9A405)`和`jQuery Mobile`我尝试过的版本是`alpha 4.1`和`1.1.0`. 这两个版本的`jQuery Mobile`. `iPad`如果需要有关我的或开发设置的其他信息，请告诉我。

更新：

请忽略我上面所说的关于 UIWebView 消失的内容。这实际上并没有发生。事实上，webview 中发生了异常，并且重定向到了嵌入在应用程序包中的错误 html 页面。此错误屏幕具有与 上相同的背景图像`UITabBarController`，因此我得出了错误的结论。所以，我现在知道 webview 中发生了一些异常，但它仍然非常多！:) 当我知道更多时，我会发布更新。

更新 2：

我现在知道出了什么问题，尽管我还不知道如何解决它。这就是正在发生的事情：单击弹出窗口时，`jQuery Mobile`正在添加`#&ui-state=dialog`到 url。在其他浏览器中，此更改会反映在浏览历史记录中，因此通过`back`对浏览历史记录执行的操作来关闭弹出窗口。在我的 UIWebView 的情况下，对 url 的更改**没有**反映在历史记录中，因此单击关闭要么什么都不做（历史记录为空），要么返回太远（到一个预加载屏幕，其中只有在实际内容已加载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:22:47.540

我实际上发现这个问题毕竟不是由*UIWebview引起的。*当我将代码简化为 webview 时*，*我发现它可以正常工作。`ASIHTTPRequest`发生此问题是因为在我的 webview中我正在使用**这**就是导致 url 的更改未反映在浏览器历史记录中的原因。

在这个阶段我还没有查看*哪里* `ASIHTTPRequest`出了问题，但我认为这超出了这个问题的范围。当我在 ASIHTTPRequest 中处理这个问题时，我将发布关于它的单独问题。

不过，我确实设法解决了这个问题，并且解决方法涉及更改`jQuery Mobile`源以补偿上一页未存储在历史记录中的事实。在 'jQuery Mobile' 的 1.1.1 版本中，在第*4177*和*6933*行找到以下代码：

```
window.history.back(); 
```

注释掉这些行并将它们替换为以下内容：

```
$.mobile.changePage( $.mobile.urlHistory.getPrev().url ); 
```

现在“jQuery Mobile”实际上将导航到上一个*url*，而不是回复浏览器历史记录。这比使用浏览器历史记录稍慢，但在我的情况下，当所需的页面没有正确保存到历史记录时，它更可靠。

# java - 如何在 Eclipse 中导出 Java 应用程序？

> ID：11479159
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:25:49.587
> 
> 标签：java, eclipse, export, executable-jar

在 Netbeans 中，只需单击即可清理/构建，即可在项目工作区中创建一个名为的漂亮文件夹`dist/`，并包含一个 runnable `.jar`，所有这些都在后台没有重复的弹出菜单。

Eclipse 中是否有某种设置可以使相同的过程更快更容易，甚至使用先前设置的设置直接导出的热键也可以工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:31:05.590

在eclipse中并不是特别难。

1.  右键单击项目名称并选择导出。
2.  打开Java部分，选择“Runnable Jar File”，点击“Next”
3.  使用适当的选项填写提供的表格。

就是这样。

# knockout.js - jquery 小部件，_raise 事件未按预期运行

> ID：11479160
> 
> 赞同：0
> 
> 时间：2012-07-13T22:26:00.507
> 
> 标签：knockout.js, jquery

我正在尝试创建一个可以与 Knockout.js 一起使用的小部件

我从[这里](http://jqueryui.com/demos/widget/)获取了这个例子的 jquery 演示小部件：

我的代码在[这里](http://jsfiddle.net/6W9AY/)

我想要做的是绑定到对象内的自定义事件：

```
 this._trigger("random", event, colors) 
```

所以在我的淘汰赛绑定中，我有这个代码：

```
ko.utils.registerEventHandler(element, "random", function (event) {
            alert("Got to here");
        }); 
```

我希望在触发触发器时触发警报，但它没有发生。

但是，如果我在[此](http://jsfiddle.net/6W9AY/1/)修改后的代码中绑定到 click.colorize，则警报会触发。

谁能解释为什么没有拾取触发的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:56:31.330

解决方案是设置小部件的 eventPrefix - 请参见[此处](http://jsfiddle.net/6W9AY/3/)

```
 widgetEventPrefix: "color", 
```

然后像以前一样引发事件：

```
 this._trigger("foo"); 
```

捕捉它如下：

```
 ko.utils.registerEventHandler(element, "colorfoo", function (event) {
        alert("Got to here"); 
```

注意“color”和“foo”的连接。

# javascript - 在 Javascript 中创建二维矩阵

> ID：11479167
> 
> 赞同：0
> 
> 时间：2012-07-13T22:26:53.410
> 
> 标签：javascript, html

我正在使用 Google Visualization API 创建一个表格。为了设置列的头部，这是一个有效的矩阵：

```
var rows = [['Id', 'Site', 'Site Code', 'TC 10', 'TC9x Test', 'Tc9x Build', 'Oracle Autotest', 
                        'Database', 'Baseline', 'push_windows', 'push_unix', 'license', 'tcx', 
                        'eng', 'perforce_proxy', 'volume_server', 
                        'Windows Ref Unit Location', 'Unix Ref Unit Location',
                        'Windows RTE Location', 'Unix RTE Location', 'Windows Toolbox Location', 
                        'Unix Toolbox Location', 'UGII License File', 'UGS License Server', 'Unix Dev Units', 
                        'Unix Devop Path', 'Perforce Proxy Path', 'Primary Contact', 'Secondary Contact', 'Num Users']]; 
```

我知道`rows`是一个 1xn 矩阵（这是有效的）。

现在，我必须更改我的代码，并从数据库中加载列。现在，假设我的所有列都存储在`columns`一个数组中。如何创建如上所示的类似矩阵`rows`？我写了以下代码：

```
var rows = [[]];
for(var i = 0; i < columns.length; i++){
    rows[0][i] = columns[i];
} 
```

但是，我收到以下错误：

```
Not a valid 2D array. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:34:08.273

工作正常：

```
var rows = [[]];
var columns = ["a","b","c"];
for(var i = 0; i < columns.length; i++){
  rows[0][i] = columns[i];
} 
```

那么这个错误是什么意思呢？或者你可能需要检查你的`columns`数组

# javascript - 以秒为单位的 Javascript 模糊时间（例如“10 分钟前”）

> ID：11479170
> 
> 赞同：9
> 
> 时间：2012-07-13T22:27:19.607
> 
> 标签：javascript, jquery, date, time

我正在制作一个计数“秒前”的 javascript 计数器。我在 JS 时间对象中有我的时间，我在堆栈溢出时在这里找到了一个“时差”函数片段，但它显示“2 小时前”。如何让它显示“5 小时 10 分 37 秒前”。

这是我正在使用的：

此函数将当前时间和某事物的时间戳转换为“20 秒前”，而不是一个神秘的日期：

```
function timeDifference(current, previous) {
    var msPerMinute = 60 * 1000;
    var msPerHour = msPerMinute * 60;
    var msPerDay = msPerHour * 24;
    var msPerMonth = msPerDay * 30;
    var msPerYear = msPerDay * 365;

    var elapsed = current - previous;

    if (elapsed < msPerMinute) {
         return Math.round(elapsed/1000) + ' seconds ago';   
    } else if (elapsed < msPerHour) {
         return Math.round(elapsed/msPerMinute) + ' minutes ago';   
    } else if (elapsed < msPerDay ) {
         return Math.round(elapsed/msPerHour ) + ' hours ago';   
    } else if (elapsed < msPerMonth) {
         return 'approximately ' + Math.round(elapsed/msPerDay) + ' days ago';   
    } else if (elapsed < msPerYear) {
         return 'approximately ' + Math.round(elapsed/msPerMonth) + ' months ago';   
    } else {
         return 'approximately ' + Math.round(elapsed/msPerYear ) + ' years ago';   
    }
} 
```

这就是我用来“计数”每秒时间的方法。我想说“5 小时 3 分钟 10 秒前”，然后 1 秒后，“5 小时 3 分钟 11 秒前”

```
var newTime = new Date(data.popular[i].timestamp*1000)
var relTime = timeDifference(new Date(),newTime)

setInterval(function(){
    var theTimeEl = $('.timestamp-large').filter(function(){
        return $(this).html() == relTime
    });
    newTime.setSeconds(newTime.getSeconds() + 1);
    var relTime = timeDifference(new Date(), newTime);
    $(theTimeEl).html(relTime);
    console.log(relTime)
}, 1000) 
```

变量 newTime 是 UTC javascript 日期格式的时间。relTime 是“秒前”格式。间隔循环通过一堆时间戳元素，并为每个时间戳选择正确的元素。然后它在时间上增加一秒，将其转换回“模糊时间”（几秒前），用新时间替换 html 并将其记录在控制台中。

**如何将“5 小时前”更改为“5 小时 37 分钟 10 秒前”？时差函数需要修改。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T23:16:40.480

这是一个接近您要求的功能。

```
var timeparts = [
   {name: 'year', div: 31536000000, mod: 10000},
   {name: 'day', div: 86400000, mod: 365},
   {name: 'hour', div: 3600000, mod: 24},
   {name: 'minute', div: 60000, mod: 60},
   {name: 'second', div: 1000, mod: 60}
];

function timeAgoNaive(comparisonDate) {
   var
      i = 0,
      l = timeparts.length,
      calc,
      values = [],
      interval = new Date().getTime() - comparisonDate.getTime();
   while (i < l) {
      calc = Math.floor(interval / timeparts[i].div) % timeparts[i].mod;
      if (calc) {
         values.push(calc + ' ' + timeparts[i].name + (calc != 1 ? 's' : ''));
      }
      i += 1;
   }
   if (values.length === 0) { values.push('0 seconds'); }
   return values.join(', ') + ' ago';
}

console.log(timeAgoNaive(new Date(Date.parse('Jun 12 2006 11:52:33'))));
console.log(timeAgoNaive(new Date(new Date().getTime() - 3600000)));
console.log(timeAgoNaive(new Date())); 
```

结果：

```
6 years, 33 days, 4 hours, 52 minutes, 22 seconds ago
1 hour ago
0 seconds ago 
```

我称其为“幼稚”，因为它并没有真正关注我们计算时间的人类方式。如果它恰好是“1/1/2013 12:01:00 am”，则与“1/1/2012 12:01:00 am”相比应该产生“1年，0个月，0天，0小时，0分钟, 0 秒前”。但它不会通过扩展您提供的函数中的逻辑来做到这一点，它也不会在我的函数中这样做（加上我的函数不会使用几个月）。比 365 天更好的近似年份是 365.24，但这也被忽略了。

我按照您的要求排除了空的时间部分，当没有找到时间部分时，至少留下“0 秒”。

现在，如果你想要那种类似人类的计算方式，你必须决定一些事情。您不能只使用越界，因为 2 月 28 日至 3 月 1 日不是整月。其次，这里有一个问题会暴露真正的问题：

*   2 月 2 日到 3 月 31 日是多少个月和几天？

如果将 2 月 2 日至 3 月 2 日计算为 1 个月，则为 1 个月 29 天。但如果是 1 月 2 日到 3 月 1 日呢？他们之间经过的天数相同。现在是 1 个月（整个 4 月）+ 3 月 1 天 + 1 月 31 天 1 个月 32 天吗？您是否希望您的月份与物理日历一致，以便人类可以用手指回溯并从中获取正确的日期？这比你想象的要难得多。

如果您可以回答有关如何进行“类似人类的经过时间计算”的明智而完整的规则，那么也许我可以为您编写另一个函数来完成它。

**更新**

这是一个新函数，它执行数月，一年有 365.24 天（一个月有 30.43666666 天）：

```
var timeparts = [
   {name: 'millenni', div: 31556736000, p: 'a', s: 'um'},
   {name: 'centur', div: 3155673600, p: 'ies', s: 'y'},
   {name: 'decade', div: 315567360},
   {name: 'year', div: 31556736},
   {name: 'month', div: 2629728},
   {name: 'day', div: 86400},
   {name: 'hour', div: 3600},
   {name: 'minute', div: 60},
   {name: 'second', div: 1}
];

function timeAgoNaive2(comparisonDate) {
   var i = 0,
      parts = [],
      interval = Math.floor((new Date().getTime() - comparisonDate.getTime()) / 1000);
   for ( ; interval > 0; i += 1) {
      var value = Math.floor(interval / timeparts[i].div);
      interval = interval - (value * timeparts[i].div);
      if (value) {
         parts.push(value + ' ' + timeparts[i].name + (value !== 1 ? timeparts[i].p || 's' : timeparts[i].s || ''));
      }
   }
   if (parts.length === 0) { return 'now'; }
   return parts.join(', ') + ' ago';
}

console.log(timeAgoNaive2(new Date(Date.parse('Jun 12 2006 11:52:33'))));
console.log(timeAgoNaive2(new Date(new Date().getTime() - 3600000)));
console.log(timeAgoNaive2(new Date()));
console.log(timeAgoNaive2(new Date(-92709631247000))); 
```

输出：

```
6 years, 1 month, 1 day, 10 hours, 53 minutes, 44 seconds ago
1 hour ago
now
2 millennia, 9 centuries, 8 decades, 4 months, 26 days, 22 hours, 41 minutes, 47 seconds ago 
```

它仍然很幼稚，但它做得更好。另外，它适用于像公元前这样的真正古老的日期。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:38:40.673

改变逻辑，这样它不仅可以找到最大的度量单位，还可以对其余部分做一些事情。

基本上你需要做的是从最大的增量开始，找到值，然后从总数中减去它以获得余数。然后重复。

可能是这样的，我没有测试过。

```
var elapsed = current - previous;
var remainder = elapsed;

int years;
int months;

years = Math.floor(remainder/msPerYear);
remainder = remainder % msPerYear;

months = Math.floor(remainder/msPerMonth);
remainder = remainder % msPerMonth;

// repeat 
```

然后从变量中构建你的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:06:48.543

这应该可以解决问题：

```
var msPerMinute = 60 * 1000;
var msPerHour = msPerMinute * 60;
var msPerDay = msPerHour * 24;
var msPerMonth = msPerDay * 30;
var msPerYear = msPerDay * 365;

function timeDifference(current, previous) {

var remainder = current - previous;   
var message = "";
var sep = "";

var years = Math.floor(remainder/msPerYear);
remainder = remainder - years * msPerYear;
if (years > 0) {
   message += years + " years";
   sep = ", ";
   console.log(message);
}

var months = Math.floor(remainder/msPerMonth);
remainder = remainder - months * msPerMonth;
if (months > 0) {
   message += sep + months + " months";
   sep = ", ";
   console.log(message);
}

var days = Math.floor(remainder/msPerDay);
remainder = remainder - days * msPerDay;
if (days > 0) {
   message += sep + days + " days";
   sep = ", ";
   console.log(message);
}

var hours = Math.floor(remainder/msPerHour);
remainder = remainder - hours * msPerHour;
if (hours > 0) {
   message += sep + hours + " hours";
   sep = ", ";
   console.log(message);
}

var minutes = Math.floor(remainder/msPerMinute);
remainder = remainder - minutes * msPerMinute;
if (months > 0) {
   message += sep + minutes + " minutes";
   sep = ", ";
   console.log(message);
}

var seconds = Math.floor(remainder/1000);
remainder = remainder - seconds * 1000;
if (months > 0) {
   message += sep + seconds + " seconds";
   sep = ", ";
   console.log(message);
}

message += " ago";

var pos = message.lastIndexOf(',');
message = message.substring(0,pos) + ' and' + message.substring(pos+1)

return message;
};

var output = timeDifference(new Date(2012, 10, 20, 12, 0, 59), new Date(2012, 2, 13, 10, 15, 12));
console.log(output); 
```

输出：8 个月 12 天 1 小时 45 分 47 秒前

这当然可以重构为更少重复。你可以试试这个小提琴：http: [//jsfiddle.net/vawEf/](http://jsfiddle.net/vawEf/)

# python - 做错误的列表理解

> ID：11479172
> 
> 赞同：0
> 
> 时间：2012-07-13T22:27:37.583
> 
> 标签：python, list-comprehension

我一直在尝试在上下文中进行列表理解的每一次迭代。

我收到来自数据库的呼叫，将其转换为`[['item', long integer]]`.

我想将长整数转换为常规整数，因为我其余的数学都是常规积分。

我正在尝试这个：

```
catnum = c.fetchall()
catnum = [list(x) for x in catnum]
for x in catnum:
        [int(y) for y in x] 
```

我也尝试过 x[1] 和其他一些东西（它总是在列表中的位置 1）

没运气。如何仅将列表中的第二个值转换为常规整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:32:02.627

这行得通吗？

```
catnum=[[x,int(y)] for x,y in catnum] 
```

但是，我认为值得一问为什么需要进行这种转换。Python 应该可以在任何常规整数可以工作的地方很好地处理长整数。将它们保留为长整数会有轻微的性能损失，但在大多数情况下，我认为这不能证明转换为常规整数的额外工作是合理的。

**为阅读评论的人编辑** *，我的第一个答案是不正确的，并且不涉及列表理解。它依赖于对 catnum 中的元素进行变异，但由于这些元素在元组中，它们不能被变异。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:33:36.090

```
[[x[0],int(x[1])] for x in catnum] 
```

这将返回一个列表列表，其中名称中的第一个条目和第二个条目是向下转换为普通整数的值。

# c# - 使用 IE 兼容模式的缺点

> ID：11479173
> 
> 赞同：0
> 
> 时间：2012-07-13T22:27:42.580
> 
> 标签：c#, asp.net-mvc, html, internet-explorer

> **可能重复：**
> [使用 Internet Explorer 兼容模式的缺点](https://stackoverflow.com/questions/6125040/cons-of-using-internet-explorers-compatibility-mode)

在像往常一样将其上传到主机之前，我在 IE 中浏览了我的网站，但我注意到一些奇怪的东西，例如，在某处显示的完全一样的项目（在部分视图中提交按钮），有些地方没有……我知道大部分技巧在 IE 中，但我从未见过这样的东西，但是当我在 IE 8 设置中设置兼容模式时，一切正常，我使用的是 HTML5。所以我想从代码中触发它，这个声明会将 IE 置于兼容模式吗？

```
<meta http-equiv=“X-UA-Compatible” content=“IE=7; IE=8” /> 
```

如果是这样，使用此命令有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:08:51.070

这会导致高于 7（或 8）的版本（例如 IE9（或 8））呈现为旧版本。这样做的缺点是您失去了新版本提供的功能，从而降低了访问者的潜在体验质量。

`X-UA-Compatible`通常，当您没有时间让现有网站在更网络友好的 IE 版本上正确呈现时，您会使用元标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:16:17.177

我知道的缺点包括：

1.  您将失去更新的 IE JavaScript 功能。例如，如果您将其设置回低于 IE8 的任何值，您将丢失本机 JSON，因为它是由 IE8 引入的。然后你必须在你的页面中包含 json2.js（或类似的）才能使用 JSON。

2.  它与旧的 IE 并不完全相同。具有 IE8 兼容模式的 IE9 与真正的 IE8 并不完全相同。有细微的差别。不断改进您的页面，总有一天您会发现您在 IE8 兼容模式和真正的 IE8 下的显示方式有所不同。

除非您只需要快速修复并且以后不需要修改此页面，否则请尽量避免在兼容模式下使用。

# wordpress - 如何使用 5 个最新帖子显示所有月份？

> ID：11479176
> 
> 赞同：0
> 
> 时间：2012-07-13T22:28:14.197
> 
> 标签：wordpress

我需要显示所有有活动帖子的月份，并且在每个月内我需要显示至少 5 个与每个月相关的帖子。HTML 将如下所示：

```
<ul>
    <li><a href="#">Souvlaki ignitus carborundum</a></li>
    <li><a href="#">Defacto lingo est igpay atinlay</a></li>
    <li><a href="#">Quote meon an estimate</a></li>
    <li><a href="#">Souvlaki ignitus carborundum</a></li>
    <li><a href="#">Defacto lingo est igpay atinlay</a></li>
    <li><a href="#">Quote meon an estimate</a></li>
</ul>
<h6>April:</h6>
<ul>
    <li><a href="#">Sic tempus fugit esperanto hiccup</a></li>
    <li><a href="#">Epsum factorial non deposit</a></li>
</ul>
<h6>May</h6> 
```

我将如何处理或可以使用哪些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:54:07.457

这应该可以解决问题。

```
<?php for ($i=1; i<12; $i++)
{
    $month=$i;
    $nQuery = new WP_Query("monthnum=$month&order=ASC&posts_per_page=5" );
    if (nQuery->have_posts()) : while (nQuery->have_posts()) : nQuery->the_post(); ?>
    //INSERT PREFFERED DATA HERE!!!
}?> 
```

# object - 电晕sdk。addEventListener “点击”到一个类的许多实例

> ID：11479180
> 
> 赞同：2
> 
> 时间：2012-07-13T22:28:52.067
> 
> 标签：object, lua, addeventlistener, coronasdk, instances

我有一个类实例的二维数组（主要是一些文本）我想添加......

```
 addEventListener("tap", functiontocall) 
```

到所有实例（所以当你点击一个它会改变颜色和东西）我尝试在几个地方添加它，但它们都没有工作。在类本身，类构造函数中，以及在我的循环中生成大批。有任何想法吗？这是for循环顺便说一句...

```
 mainarray = {}

    for x = 1, 5, 1 do
    mainarray[x] = {}

    for y = 1, 5, 1 do
    mainarray[x][y] = diceclass.new(x,y)
            --mainarray[x][y].dicetext:addEventListener("tap", bloop)  I tried this and it didnt work.
    end
    end 
```

奇怪的是，如果我以后把它们放进去，它们真的起作用了！但它在我的循环中不起作用......

```
 mainarray[1][1].dicetext:addEventListener("tap", bloop)
    mainarray[1][2].dicetext:addEventListener("tap", bloop) 
```

所以我可以添加 25 行代码！尽管除了愚蠢之外，这并不好，因为我最终希望事件触发特定对象本身内的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T04:33:11.930

试试下面的代码。这可能会帮助您：

```
local mainarray = {}
for x = 1, 5, 1 do
mainarray[x] = {}      -- See where it is initialized --
for y = 1, 5, 1 do
    mainarray[x][y] = display.newText(x.."|"..y,10,10,nil,10)
    mainarray[x][y].x = 20+math.random(300)
    mainarray[x][y].y = 20+math.random(460)
    mainarray[x][y].tag = x.."|"..y
end
end

local function printTag(e)
    print(e.target.tag)
    return true;
end
for x = 1, 5, 1 do
for y = 1, 5, 1 do
  mainarray[x][y]:addEventListener("tap",printTag)
end
end 
```

继续编码............ :)

# wordpress - 通过在其间插入 index.php 来重定向 URL，并在重定向 url 中的字符串之后截断 url

> ID：11479181
> 
> 赞同：0
> 
> 时间：2012-07-13T22:29:02.433
> 
> 标签：wordpress, .htaccess, url, redirect, truncate

我最近将我的博客从一个 cms 移植到 wordpress，所以我在重定向标签 URL 时遇到了麻烦，就像这样

```
http://site.com/blog/tag/tagname/foobar 
```

这里**“tagname”**是使用 WordPress 创建的标签的名称，
“ **foobar”**可以是任何字符串

我希望它永久重定向（301）它到

```
http://site.com/blog/index.php/tagname/ 
```

**这样标签名称之后的字符串，即“foobar”被截断，“index.php”被添加在中间。**

我知道有很多关于 .htaccess 的帖子，但除了基本规则之外，我对它的语法知之甚少。因此，我无法理解针对其他问题给出的具体解决方案以将其应用于我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:53:05.930

这应该这样做：

```
RewriteEngine on
#redirects from http://site.com/blog/tag/{tagname}/foobar to http.//site.com/blog/index.php/{tagname}
RewriteRule ^/blog/tag/([a-zA+])/[a-zA-Z]+$ /blog/index.php/$1/ [R=301,L] 
```

# javascript - SVG 甜甜圈切片作为路径元素（环形扇区）

> ID：11479185
> 
> 赞同：7
> 
> 时间：2012-07-13T22:29:20.850
> 
> 标签：javascript, svg

好吧，当然，这不是一个错误，但我对如何通过贝塞尔曲线在点之间获得完美的圆弧感到困惑。

我需要这样的形状：

![在此处输入图像描述](../Images/8fe32f207ecea8c7015917d233851241.png)

所以我一直在用以下公式从中心点、半径和角度计算四个角点：(x?,y?)=(x+d cos α,y+d sin α)，在我的咖啡脚本看起来像这样：

```
x1 = centerPointX+outerRadius*Math.cos(currentAngle)
y1 = centerPointY+outerRadius*Math.sin(currentAngle)
x2 = centerPointX+innerRadius*Math.cos(currentAngle)
y2 = centerPointY+innerRadius*Math.sin(currentAngle)
x3 = centerPointX+outerRadius*Math.cos(currentAngle2)
y3 = centerPointY+outerRadius*Math.sin(currentAngle2)
x4 = centerPointX+innerRadius*Math.cos(currentAngle2)
y4 = centerPointY+innerRadius*Math.sin(currentAngle2) 
```

如何获取我拥有的信息并生成具有完美圆形曲线的路径元素？

（PS 我对 SVG 很陌生，如果你想帮助我使用 d= 的正确语法，那会很酷，但我总是可以自己写。我想要帮助的挑战实际上更多的是与 Bézier .

**更新/解决方案**

使用以下指南下方的答案是我实际使用的功能：

```
annularSector = (centerX,centerY,startAngle,endAngle,innerRadius,outerRadius) ->               
    startAngle  = degreesToRadians startAngle+180
    endAngle    = degreesToRadians endAngle+180
    p           = [ 
        [ centerX+innerRadius*Math.cos(startAngle),     centerY+innerRadius*Math.sin(startAngle) ]
        [ centerX+outerRadius*Math.cos(startAngle),     centerY+outerRadius*Math.sin(startAngle) ]
        [ centerX+outerRadius*Math.cos(endAngle),       centerY+outerRadius*Math.sin(endAngle) ]
        [ centerX+innerRadius*Math.cos(endAngle),       centerY+innerRadius*Math.sin(endAngle) ] 
    ]
    angleDiff   = endAngle - startAngle
    largeArc    = (if (angleDiff % (Math.PI * 2)) > Math.PI then 1 else 0)
    commands    = []

    commands.push "M" + p[0].join()
    commands.push "L" + p[1].join()
    commands.push "A" + [ outerRadius, outerRadius ].join() + " 0 " + largeArc + " 1 " + p[2].join()
    commands.push "L" + p[3].join()
    commands.push "A" + [ innerRadius, innerRadius ].join() + " 0 " + largeArc + " 0 " + p[0].join()
    commands.push "z"

    return commands.join(" ") 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T14:25:48.173

## 演示： http: [//phrogz.net/svg/procedural_annular_sector.xhtml](http://phrogz.net/svg/procedural_annular_sector.xhtml)

用法：

```
annularSector( myPathElement, {
  centerX:100, centerY:150,
  startDegrees:190, endDegrees:230,
  innerRadius:75, outerRadius:100
}); 
```

核心功能：

```
// Options:
// - centerX, centerY: coordinates for the center of the circle    
// - startDegrees, endDegrees: fill between these angles, clockwise
// - innerRadius, outerRadius: distance from the center
// - thickness: distance between innerRadius and outerRadius
//   You should only specify two out of three of the radii and thickness
function annularSector(path,options){
  var opts = optionsWithDefaults(options);
  var p = [ // points
    [opts.cx + opts.r2*Math.cos(opts.startRadians),
     opts.cy + opts.r2*Math.sin(opts.startRadians)],
    [opts.cx + opts.r2*Math.cos(opts.closeRadians),
     opts.cy + opts.r2*Math.sin(opts.closeRadians)],
    [opts.cx + opts.r1*Math.cos(opts.closeRadians),
     opts.cy + opts.r1*Math.sin(opts.closeRadians)],
    [opts.cx + opts.r1*Math.cos(opts.startRadians),
     opts.cy + opts.r1*Math.sin(opts.startRadians)],
  ];

  var angleDiff = opts.closeRadians - opts.startRadians;
  var largeArc = (angleDiff % (Math.PI*2)) > Math.PI ? 1 : 0;
  var cmds = [];
  cmds.push("M"+p[0].join());                                // Move to P0
  cmds.push("A"+[opts.r2,opts.r2,0,largeArc,1,p[1]].join()); // Arc to  P1
  cmds.push("L"+p[2].join());                                // Line to P2
  cmds.push("A"+[opts.r1,opts.r1,0,largeArc,0,p[3]].join()); // Arc to  P3
  cmds.push("z");                                // Close path (Line to P0)
  path.setAttribute('d',cmds.join(' '));

  function optionsWithDefaults(o){
    // Create a new object so that we don't mutate the original
    var o2 = {
      cx           : o.centerX || 0,
      cy           : o.centerY || 0,
      startRadians : (o.startDegrees || 0) * Math.PI/180,
      closeRadians : (o.endDegrees   || 0) * Math.PI/180,
    };

    var t = o.thickness!==undefined ? o.thickness : 100;
    if (o.innerRadius!==undefined)      o2.r1 = o.innerRadius;
    else if (o.outerRadius!==undefined) o2.r1 = o.outerRadius - t;
    else                                o2.r1 = 200           - t;
    if (o.outerRadius!==undefined)      o2.r2 = o.outerRadius;
    else                                o2.r2 = o2.r1         + t;

    if (o2.r1<0) o2.r1 = 0;
    if (o2.r2<0) o2.r2 = 0;

    return o2;
  }
} 
```

# android - 样式化操作栏下拉菜单

> ID：11479186
> 
> 赞同：17
> 
> 时间：2012-07-13T22:29:40.193
> 
> 标签：android, android-theme

我正在使用继承自的自定义主题，`DarkActionBar`并且我想将下拉菜单自定义为白色，就像使用 Light Holo 主题时一样。

我已经能够使用以下方法将背景更改为白色：

```
<style name="MyTheme" parent="@style/Theme.Light.DarkActionBar">
    <item name="android:actionDropDownStyle">@style/MyDropDownNav</item>
</style>
<style name="MyDropDownNav">
    <item name="android:background">@drawable/spinner_background_white</item>
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_whyite</item>
    <item name="android:dropDownSelector">@drawable/selectable_background_white</item>
</style> 
```

但我不知道如何将文本颜色更改为黑色。因为在设置白色可绘制后，问题是文本不可见，因为在白色背景上是白色的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-14T10:51:40.233

经过一番调查，我回答自己。除了问题的样式，您还需要：

*   自定义`android:spinnerDropDownItemStyle`以`actionBarWidgetTheme`更改其文本外观。
*   也不要忘记下拉列表由您使用的适配器管理。那么如果你使用标准的 ( `simple_dropdown_item_1line`) 就没有问题了。但是，如果您使用像我这样的自定义（能够添加图标）**不要忘记** `style="?attr/spinnerDropDownItemStyle"`在您的布局 TextView 中应用。

那么最终的自定义样式是：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="Theme.myapp" parent="@style/Theme.Light.DarkActionBar">
    <item name="android:actionDropDownStyle">@style/myapp_DropDownNav</item>        
    <item name="android:actionBarWidgetTheme">@style/myapp.actionBarWidgetTheme</item>
</style>

<style name="myapp.actionBarWidgetTheme" parent="@style/Theme.">
     <item name="android:spinnerDropDownItemStyle">@style/myapp.Widget.DropDownItem.Spinner</item>
</style>

<style name="myapp_DropDownNav" parent="@style/Widget.Spinner.DropDown.ActionBar">
    <item name="background">@drawable/spinner_background_ab_myapp</item>
    <item name="android:background">@drawable/spinner_background_ab_myapp</item>
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_myapp</item>
    <item name="android:dropDownSelector">@drawable/selectable_background_myapp</item>
</style>

<style name="myapp.Widget.DropDownItem.Spinner" parent="Widget.DropDownItem.Spinner">
    <item name="android:textAppearance">@style/myapp.TextAppearance.Widget.DropDownItem</item>
</style>

<style name="myapp.TextAppearance.Widget.DropDownItem" parent="TextAppearance.Widget.DropDownItem">
    <item name="android:textColor">@color/black</item>
</style> 
```

其中drawables`myapp_DropDownNav`是白色背景的，您可以使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)中的[ActionBar Style生成器生成](http://jgilfelt.github.com/android-actionbarstylegenerator/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:59:31.650

尝试设置[`itemTextAppearance`](http://developer.android.com/reference/android/R.attr.html#itemTextAppearance)。那应该达到你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-08T05:17:15.403

我偶然发现了可能是最简单的方法。我正在使用 AppCompat 库。

```
<style name="ApplicationTheme" parent="@style/Theme.AppCompat">
    <item name="android:actionBarWidgetTheme">@style/Theme.AppCompat.Light</item>
    <item name="actionBarWidgetTheme">@style/Theme.AppCompat.Light</item>
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:02:15.177

我的建议是简单地从 Sherlock.Light 主题继承并将适用的字段更改为 Dark 值。对于我的应用程序，我们想要一个白色的“向上”图标，以及用于操作标签的白色文本。我不提供我的操作栏图标的深色版本，所以无论如何它们都是白色的。因此，经过几个小时的折腾并遵循不同人的建议，我终于在 ABS 主题文件中找到了我想要的东西。

我从 Sherlock.Light 继承（嗯，技术上是 HoloEverywhereLight.Sherlock 但是......）并更改：

```
<item name="android:actionMenuTextColor">@color/White</item>
<item name="actionMenuTextColor">@color/White</item>
<item name="android:homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_dark</item>
<item name="homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_dark</item>
<item name="android:dividerVertical">@drawable/abs__list_divider_holo_dark</item>
<item name="dividerVertical">@drawable/abs__list_divider_holo_dark</item> 
```

就是这样。这比尝试扩展类、重新设计代码等更简单、更容易。

# asp.net - Windows 2008 / IIS 7 网站在 64 位模式下工作正常 在 32 位模式下无法正常工作

> ID：11479188
> 
> 赞同：0
> 
> 时间：2012-07-13T22:29:43.000
> 
> 标签：asp.net, windows, iis-7, windows-server-2008

我正在 Windows 2008 / iis7 上构建网站，需要 32 位模式来实现报告功能。应用程序池一切正常，允许 32 位应用程序设置为 false，但是当我将应用程序池设置为允许 32 位应用程序设置为 true 时，我收到 404 错误，因为被调用的路径正在更改。以下是来自 IIS 日志的剪辑：

> uat 设置为 false - 工作正常 304 表示请求已缓存 2012-07-09 18:29:56 xxx.xx.xxx.xx GET /Metron/images/flags/ae.png - 80 - xxx.xx.xxx .xxx Mozilla/4.0+（兼容；+MSIE+8.0；+Windows+NT+6.1；+WOW64；+Trident/4.0；+SLCC2；+.NET+CLR+2.0.50727；+.NET+CLR+3.5。 30729;+.NET+CLR+3.0.30729;+.NET4.0C;+.NET4.0E;+InfoPath.2;+MS-RTC+LM+8) 304 0 0 109
> 
> uatext 设置为 true - /Metron 从路径中删除，浏览器抛出 404 错误。404 错误表示请求项目已移动或找不到。2012-07-09 18:24:33 xxx.xx.xxx.xx GET /images/flags/ae.png - 80 - xxx.xx.xxx.xxx Mozilla/4.0+(兼容;+MSIE+8.0;+Windows +NT+6.1；+WOW64；+Trident/4.0；+SLCC2；+.NET+CLR+2.0.50727；+.NET+CLR+3.5.30729；+.NET+CLR+3.0.30729；+.NET4。 0C；+.NET4.0E；+InfoPath.2；+MS-RTC+LM+8) 404 0 2 93。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:12:11.173

似乎即使您尝试使用的 .NET 框架可用，但它可能未正确绑定到 IIS 安装。导航到 c:\Windows\Microsoft.NET\Framework\，然后导航到与您尝试使用的 .NET 版本对应的目录。通过：aspnet_regiis.exe -i 安装框架。另请参阅：http: [//msdn.microsoft.com/en-us/library/k6h9cz8h](http://msdn.microsoft.com/en-us/library/k6h9cz8h(v=vs.80).aspx) (v=vs.80).aspx 。另请参阅此 StackOverflow 问题：[How do I fix 404.17 error on Win Server 2k8 and IIS7](https://stackoverflow.com/questions/87107/how-do-i-fix-404-17-error-on-win-server-2k8-and-iis7)

# windows - 指定 pwszTimestampURL 时 CryptUIWizDigitalSign 失败

> ID：11479190
> 
> 赞同：4
> 
> 时间：2012-07-13T22:30:10.613
> 
> 标签：windows, pinvoke, code-signing, authenticode

我在调用[CryptUIWizDigitalSign](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380292%28v=vs.85%29.aspx)以使用我们的公共代码签名证书以编程方式签署可执行文件时遇到问题，但不显示任何 UI。该证书是 Comodo 代码签名证书。

当时间戳 URL 参数设置为 null 时，它可以正常工作，但是每当我传入除 null 以外的任何内容时，调用都会失败（返回零）。

问题在于，没有时间戳，就没有副署，因此进一步存在签名有效性问题。

环境是 Windows 7 x64。有一个工作标准的互联网连接。从嗅探网络流量来看，似乎没有尝试`CryptUIWizDigitalSign`联系时间戳服务器。

我通过 PInvoke 从 .NET 调用它，但我怀疑这会产生什么不同。

网上关于这个功能的不多...

```
Dim cert As X509Certificate2 = New X509Certificate2("mycert.pfx", "password")
Dim pSigningCertContext As IntPtr = cert.Handle

Dim digitalSignInfo As CRYPTUI_WIZ_DIGITAL_SIGN_INFO 
    = New CRYPTUI_WIZ_DIGITAL_SIGN_INFO
digitalSignInfo.dwSize = Marshal.SizeOf(digitalSignInfo)
digitalSignInfo.dwSubjectChoice = CRYPTUI_WIZ_DIGITAL_SIGN_SUBJECT_FILE
digitalSignInfo.pwszFileName = "C:\temp\installer.exe"
digitalSignInfo.dwSigningCertChoice = CRYPTUI_WIZ_DIGITAL_SIGN_CERT
digitalSignInfo.pSigningCertContext = pSigningCertContext
digitalSignInfo.pwszTimestampURL = "http://timestamp.comodoca.com/authenticode"
digitalSignInfo.dwAdditionalCertChoice = 0
digitalSignInfo.pSignExtInfo = IntPtr.Zero

If (Not CryptUIWizDigitalSign(CRYPTUI_WIZ_NO_UI, IntPtr.Zero, vbNullString, 
                              digitalSignInfo, pSignContext)) Then
    Throw New Win32Exception(Marshal.GetLastWin32Error(), 
        "CryptUIWizDigitalSign")
End If 
```

CRYPTUI_WIZ_DIGITAL_SIGN_INFO 类型定义为：

```
<StructLayout(LayoutKind.Sequential)> _
Public Structure CRYPTUI_WIZ_DIGITAL_SIGN_INFO
    Public dwSize As Int32
    Public dwSubjectChoice As Int32
    <MarshalAs(UnmanagedType.LPWStr)> Public pwszFileName As String
    Public dwSigningCertChoice As Int32
    Public pSigningCertContext As IntPtr
    Public pwszTimestampURL As String
    Public dwAdditionalCertChoice As Int32
    Public pSignExtInfo As IntPtr
End Structure

Public Const CRYPTUI_WIZ_DIGITAL_SIGN_SUBJECT_FILE As Int32 = 1
Public Const CRYPTUI_WIZ_DIGITAL_SIGN_CERT As Int32 = 1
Public Const CRYPTUI_WIZ_NO_UI As Int32 = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:50:36.310

您已将`MarshalAs`属性应用到`pwszFileName`但未应用`pwszTimestampURL`，这有什么原因吗？它们在[CRYPTUI_WIZ_DIGITAL_SIGN_INFO 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380676%28v=vs.85%29.aspx)中的描述相同：

pwsz文件名：

> 指向以空字符结尾的 Unicode 字符串的指针，该字符串包含要签名的文件的路径和文件名。如果为 dwSubjectChoice 成员指定了 CRYPTUI_WIZ_DIGITAL_SIGN_SUBJECT_FILE，则使用此成员。

pwszTimestampURL:

> 指向包含时间戳 URL 的以 null 结尾的 Unicode 字符串的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:08:49.313

固定 - 仅适用于 32 位进程。

# macos - Sublime Text 2：如何将光标定位在缓冲区的开头/结尾？

> ID：11479195
> 
> 赞同：38
> 
> 时间：2012-07-13T22:30:39.607
> 
> 标签：macos, keyboard-shortcuts, sublimetext2

我觉得不得不问一个看似基本的问题很愚蠢。我用谷歌搜索了很多，我检查了 Default(OSX).sublime-keymap 文件，但我不知道：

**如何使光标跳转到 OSX 上 Sublime2 中当前缓冲区的开头/结尾？**

Home/End 分别滚动到顶部/底部，但它们不会*将光标定位*在缓冲区的开始/结束处。

当然有办法做到这一点。一些应用程序（例如 Intellij）为此使用 CMD+Home/End，但这也不起作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-29T17:54:57.687

这些对我有用（OS X 10.7.5 上的 Sublime Text 2 v2.0.1）

*   `⌘-↑</kbd>: start of buffer`
*   `⌘-↓</kbd>: end of buffer`

CMD-up 和 -down 组合是在 OS X 上移动到文本缓冲区的开头和结尾的默认快捷方式。例如，它们也适用于 Safari 文本区域。因此，它们未在键映射文件中列出。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-03-14T07:46:29.047

在 Windows 中，您可以使用

`Ctrl`+ `Home`-> 到文件的开头
`Ctrl`+ `End`-> 到文件的结尾

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-07-19T09:30:21.910

自定义“移动到文件开头”和“移动到文件末尾”的快捷方式

```
{ "keys": ["ctrl+home"], "command": "move_to", "args": {"to": "bof"} },
{ "keys": ["ctrl+end"], "command": "move_to", "args": {"to": "eof"} },
{ "keys": ["ctrl+shift+end"], "command": "move_to", "args": {"to": "eof", "extend": true} },
{ "keys": ["ctrl+shift+home"], "command": "move_to", "args": {"to": "bof", "extend": true } }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T14:06:51.023

一个“几乎”的解决方案：根据标准 OSX 键绑定，`shift + home/end`将光标从当前位置移动到`home/end`，并选择中间的文本。这样做的副作用是光标位于`home/end`.

我仍然想知道如何在不选择中间文本的情况下执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T03:21:21.890

> 达尔文 abcmacbook.local 14.3.0 达尔文内核版本 14.3.0：2015 年 3 月 23 日星期一 11:59:06 PDT；根：xnu-2782.20.48~5/DEVELOPMENT_X86_64 x86_64
> 
> OSX 优胜美地版本：10.10.3 (14D136)
> 
> 在 Sublime Text Stable Channel build 3083 中：

Command + 向下箭头将我带到缓冲区的末尾

Command + 向上箭头将我带到缓冲区的开头

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-29T17:22:42.007

看看这是否有效

开始 » CMD + 左箭头

结束 » CMD + 右箭头

# c++ - Possibly not so classic gcc/g++ file error

> ID：11479198
> 
> 赞同：0
> 
> 时间：2012-07-13T22:30:54.763
> 
> 标签：c++, gcc, g++

to be short and sweet, this is happening right now and has never happened to me before today:

```
 g++ assn1m.c segment.cpp
/tmp/cc2yUKRO.o: In function `bit_to_ascii(char const*, char*)':
segment.cpp:(.text+0x0): multiple definition of `bit_to_ascii(char const*, char*)'
/tmp/cc2Xgj7t.o:assn1m.c:(.text+0x0): first defined here
/usr/lib/gcc/i586-suse-linux/4.4/../../../crt1.o: In function `_start':
/usr/src/packages/BUILD/glibc-2.10.1/csu/../sysdeps/i386/elf/start.S:115: undefined reference to `main'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:34:57.393

You have two definitions of the function `bit_to_ascii(char const*, char*)`, one of which is in assn1m.c and the other of which is in segment.cpp. This is often caused by defining it in a header file without `inline` and including it in multiple source files.

Note that in C99, the `inline` specifier works slightly differently than in C++. You may have to define it as `extern inline` to get it to work properly.

You also didn't define the `main` function anywhere for your program's entry point, or you're not linking in the object file where it's defined, though that's a separate issue from the multiple definitions error.

# php - Laravel 和 Simpletest

> ID：11479200
> 
> 赞同：4
> 
> 时间：2012-07-13T22:31:21.893
> 
> 标签：php, unit-testing, phpunit, simpletest, laravel

我正在尝试使用 Simpletest 对 Laravel 进行单元测试。

我知道 Laravel 集成了 PHPUnit 支持，并且我知道 PHPUnit 是行业标准，但是在我的上一个项目（CakePHP 1.3）中使用了 simpletest，我希望我也可以在 Laravel 中使用。

到目前为止，Laravel 文档中没有提到 Simpletest。博客/教程的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:08:11.250

我不明白你遇到的问题。您可以选择要使用的单元测试工具，因为您应该只测试自己编写的代码，而不是其他人的代码。

您可以创建一个类似“simpletests”的文件夹，然后在其中放置引导程序和测试并运行它。

但是，如果你不是一个简单的测试专家，你真的应该使用 PHPUnit。不是因为它几乎是标准的，而是当你在 PHPUnit 框架内有单元测试支持时，你应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:30:20.617

如果您想要一个解决方案轻松自动地执行您的测试套件，我建议您使用 phpunit 和[watchr](https://github.com/mynyml/watchr "观察者")的组合。

Watchr 是一个小巧灵活的 ruby​​ gem，可以监视您指定的所有文件并在您保存它们时执行脚本。你只需要安装 gem 并在你的项目中添加一个像我一样的配置文件：[https](https://gist.github.com/alexandre-butynski/5460980) ://gist.github.com/alexandre-butynski/5460980 。

然后，只需`watchr watchr.rb`在控制台中键入以在您保存文件时自动执行测试。我的配置文件根据保存的文件指定要执行的测试。例如，如果您更新`UserController.php`, only`UserControllerTest.php`将被执行。

我的配置文件添加了一个咆哮集成以在每次测试执行后显示消息。您需要小图像才能使其正常工作。不要犹豫，向我询问有关此工具的更多解释。

# c++ - 真的有 Flex++ 扫描仪吗？

> ID：11479201
> 
> 赞同：1
> 
> 时间：2012-07-13T22:31:27.273
> 
> 标签：c++, bison, yacc, lex, flex++

我在 Debian Squeeze 上运行，我使用 apt-get install flex 安装了 flex/flex++。

但是我注意到 flex++ 只是 flex 的一个符号链接。那么，真的存在一个生成 c++ 扫描器的“程序”flex++，还是只是一个我应该切换的 flex 标志？

还有一个通病：网上的很多例子都不能在flex或flex++下“编译”。Flex 给出以下错误：

```
test.lex:1: invalid character: %
... 
```

处理输入时：

```
%name Test 
```

这里有什么问题？

Flex/Flex++ 版本为 2.5.35

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T01:07:23.513

实际上有一个 Flex++ 项目，但它与原来的 Flex 是分开的：

*   [http://flexcpp.sourceforge.net/](http://flexcpp.sourceforge.net/)

Flex 确实支持生成用于 C++ 的扫描仪代码，但它被归类为实验性的（尽管它已经存在了很长一段时间）：

*   [弹性手册](http://westes.github.io/flex/manual/Cxx.html)

符号链接的解释是，一些程序会根据调用方式修改其行为。出于兼容性原因，他们检查`argv[0]`并查看可执行文件名称。例如，当作为 运行时`flex++`，它可以启用`-+`C++ 支持标志。

（BusyBox 使用这种技术让一个二进制文件像许多单独的程序一样运行，从而节省空间。）

# sql - 合并两个 SQL 表

> ID：11479205
> 
> 赞同：2
> 
> 时间：2012-07-13T22:31:57.957
> 
> 标签：sql, join, hive

通过比较我猜的 Col1 和 Col11，加入两个表并获取 Table1 中缺少的第一个表数据和第二个表数据。因为所有 ID（Col1 和 Col11）都应该放在一起

**表格1**

```
Col1      Col2            Col3                  Col4      Col5            Col6 
1345653   330760137950    2012-07-09 21:40:29   1345653   331760137950    1341895229
1345653   110909316904    2012-07-09 21:29:06   1345653   111909316904    1341894546
1345653   221065796761    2012-07-09 19:31:48   1345653   221065796761    1341887518 
```

**表2**

```
Col11        Col22         Col33                  
1345653      330760137950   2012-07-09 21:40:29     
1345653      110909316904   2012-07-09 21:29:06     
1345653      221065796761   2012-07-09 19:31:48     
1345653    **150851771618**   2012-07-09 18:57:33 
```

如果您查看以上两个表格数据，则在`Table2`mean`Col22-150851771618`中缺少最后一行`Table1`。所以我需要显示`Table1`完整的数据和最后一行，`Table2`因为 Col22`Table1`通过加入`Col1`and丢失`Col11`，就像下面的输出一样。

```
1345653   330760137950    2012-07-09 21:40:29   1345653   331760137950    1341895229
1345653   110909316904    2012-07-09 21:29:06   1345653   111909316904    1341894546
1345653   221065796761    2012-07-09 19:31:48   1345653   221065796761    1341887518
1345653 **150851771618**  2012-07-09 18:57:33   NULL       NULL           NULL 
```

我怎样才能`JOIN`通过加入`Col1`和来做到这一点`Col11`？我对此有很多困惑。谁能帮我？

**更新：- 更多场景**

**表格1**

```
Col1            Col2            Col3                   Col4       Col5                Col6
1345653     330760137950    2012-07-09 21:40:29     1345653     331760137950        1341895229
1345653     110909316904    2012-07-09 21:29:06     1345653     111909316904        1341894546
1345653     221065796761    2012-07-09 19:31:48     1345653     221065796761        1341887518

704318001   320941581940    2012-07-09 14:44:48     704318001   321941581940        1341870288 
```

**表2**

```
Col11        Col22         Col33                   Col44   Col55   Col66
1345653      330760137950   2012-07-09 21:40:29     NULL    NULL    NULL
1345653      110909316904   2012-07-09 21:29:06     NULL    NULL    NULL
1345653      221065796761   2012-07-09 19:31:48     NULL    NULL    NULL
1345653    **150851771618**   2012-07-09 18:57:33   NULL    NULL    NULL

704318001  **290738585064**    2012-07-09 14:36:49     NULL    NULL    NULL 
```

所以输出应该是这样的——对于这个 ID 的含义`1345653`，我需要所有记录在同一个地方并且与`704318001`. 所以如果你看一下输出，所有的`1345653`都在一起，而且`704318001`都在一起。

```
1345653   330760137950    2012-07-09 21:40:29   1345653   331760137950    1341895229
1345653   110909316904    2012-07-09 21:29:06   1345653   111909316904    1341894546
1345653   221065796761    2012-07-09 19:31:48   1345653   221065796761    1341887518
1345653 **150851771618**  2012-07-09 18:57:33   NULL       NULL           NULL

704318001   320941581940    2012-07-09 14:44:48     704318001   321941581940        1341870288 
704318001  **290738585064**    2012-07-09 14:36:49     NULL    NULL    NULL 
```

基本上，获取第一个完整的表和第二个表，其数据不在 Table1 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T22:35:56.020

一个[`LEFT JOIN`](http://www.w3schools.com/sql/sql_join_left.asp)应该工作..

但是根据您的数据，我认为您应该加入`Col22`，`Col2`因为`Col1`并且`Col11`没有唯一值，所以我不知道它们是如何关联的。

```
SELECT t2.Col11, t2.Col22, t2.Col33, t1.Col4, t1.Col5, t1.Col6
FROM 
    Table2 t2 LEFT JOIN
    Table1 t1 ON t1.Col2 = t2.Col22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:27:53.893

正如我所看到的，您需要从 table2 添加行，在 table1 的前三列中找不到匹配项。您可以将[union all](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29)和[exists](http://msdn.microsoft.com/en-us/library/ms188336.aspx)结合起来。如果数据库支持，[除非](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29)您可以使用它而不是存在。

```
select Col1, Col2, Col3, Col4, Col5, Col6
  from table1
union all
select Col11, Col22, Col33, null, null, null
  from table2
 where not exists (select null
                     from table1
                    where table1.col1 = table2.col11
                      and table1.col2 = table2.col22
                      and table1.col3 = table2.col33) 
```

[澄清后更新：如果您可以使用 union all 并 left join 这个 SQL FIDDLE 应该会有所帮助：](http://sqlfiddle.com/#!3/6e19a/6)

```
select buyer_id, item_id, created_time, user_id, product_id, timestamps
  from TestingTable1
union all
select t2.buyer_id, t2.item_id, t2.created_time, null, null, null
  from TestingTable2 t2
  left join TestingTable1 t1
    on t1.buyer_id = t2.buyer_id
   and t1.item_id = t2.item_id
   -- remove this line if you identify duplicated record
   -- by buyer and item only
   and t1.created_time = t2.created_time
 where t1.buyer_id is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:40:03.123

我不太确定，预期的输出到底是什么 - 例如，您只需要部分外连接还是完全外连接？假设您需要完全外连接，这可能会奏效（T-SQL 语法）：

```
select
    coalesce(t1.col1, t1.col11),
    coalesce(t1.col2, t1.col22),
    coalesce(t1.col3, t1.col33),
    coalesce(t1.col4, t1.col44),
    coalesce(t1.col5, t1.col55),
    coalesce(t1.col6, t1.col66),
from
    Table1 t1
    full outer join Table2 t2 on t2.Col22 = t1.Col2 
```

希望这是你需要的。它应该在列 Col2-Col22 上连接两个表中的所有行，并显示 Table1 中的每个列对值，如果有空值，它应该显示 Table2 中的值

编辑：您不能加入 Col1-Col11 上的表格。这实际上会在这个例子中产生笛卡尔积。但可能 - 取决于数据的真实含义 - 在 Col1=Col11 和 Col2=Col22 上可能有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T22:42:29.557

为什么不简单地——

```
SELECT * FROM Table2; 
```

否则请让问题更清楚。

# java - 使用像 Ebean 这样的 ORM 是否会使封装变得不可能？值得关心吗？

> ID：11479207
> 
> 赞同：1
> 
> 时间：2012-07-13T22:32:02.637
> 
> 标签：java, orm, encapsulation

我是一所大学的计算机科学专业的学生，​​从事独立研究。由于我刚刚学习，我正在努力确保自己掌握基础知识，为未来养成良好的习惯。

最近我开始尽可能地执行封装。例如，`Collections.unmodifiableList()`用于返回不可修改的列表。在我的研究中，我将 Ebean 用于我的数据库模型并发现，1）每个类都必须有一个公共的无 arg 构造函数和 2）每个字段的公共 getter 和 setter。我知道 Ebean 使用反射的工作方式需要这个，这让我想知道：封装有那么重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:23:41.950

Ebean 不需要任何公共构造函数/getter/setter。构造函数可以是私有的，您可以让 Ebean 直接使用字段。

[请参阅用户指南](http://www.avaje.org/doc/ebean-userguide.pdf)的第 14 章。

Hibernate 和 myBatis（虽然不是 ORM）也可以处理私有构造函数/字段。

# ruby - 我需要做什么才能让 Hash.from_xml() 工作？

> ID：11479210
> 
> 赞同：13
> 
> 时间：2012-07-13T22:32:42.053
> 
> 标签：ruby, xml, hash, activesupport

我在代码中安装了“ActiveSupport”并需要“active_support”，但是当我尝试使用该`Hash.from_xml()`方法时出现“无方法错误”。

我错过了什么？

```
$ gem list 
```

返回：

```
\*** LOCAL GEMS \***

activesupport (3.2.6)  
bundler (1.1.4)  
i18n (0.6.0)  
json (1.7.3)  
mime-types (1.19)  
multi_json (1.3.6)  
rake (0.9.2.2)  
rest-client (1.6.7)  
rubygems-bundler (1.0.3)  
rvm (1.11.3.5) 
```

和：

```
$ ruby -v 
```

返回：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

的内容`file.rb`是：

```
require 'active_support'  
require 'rest-client'  
require 'json'  
token = "xxx"  
user = "xxx"  
survey_id = "xxx"  
responses_from_api = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php?Request=getLegacyResponseData&User=#{user}&Token=#{token}&Version=2.0&SurveyID=#{survey_id}&Format=XML"  
responses = Hash.from_xml(responses_from_api).to_json  
puts responses 
```

和：

```
$ ruby file.rb 
```

返回：

```
file.rb:8:in `<main>': undefined method `from_xml' for Hash:Class (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-13T23:15:31.993

只是`require 'active_support'`做的不多，你必须用手把碎片拉进去。如果您想要所有 ActiveSupport：

```
require 'active_support/all' 
```

或者如果你只想要哈希扩展：

```
require 'active_support/core_ext/hash' 
```

# ruby-on-rails-3 - Heroku 在活动管理员上返回 Postgres 错误

> ID：11479215
> 
> 赞同：0
> 
> 时间：2012-07-13T22:33:17.643
> 
> 标签：ruby-on-rails-3, heroku, activeadmin

我将我的应用程序部署到 Heroku。当我想查看记录时，它返回一个错误：

```
2012-07-13T22:28:04+00:00 app[web.1]: Started GET "/admin/non_profits/1" for 200.40.55.210 at 2012-07-13 22:28:04 +0000
2012-07-13T22:28:06+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  operator does not exist: character varying = integer
2012-07-13T22:28:06+00:00 app[web.1]: LINE 1: ...Profit' AND "active_admin_comments"."resource_id" = 1 AND "a...
2012-07-13T22:28:06+00:00 app[web.1]: HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:05:58.030

是的，我建议将您的开发数据库更改为 PG。如果您在他们的 Cedar 堆栈[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)上，Heroku 强烈建议您这样做。

这应该可以帮助您在开发中复制问题。

# ios - iOS 中的转换

> ID：11479220
> 
> 赞同：1
> 
> 时间：2012-07-13T22:34:04.843
> 
> 标签：ios, graphics, core-graphics, cgaffinetransform, cgpath

我一直试图解决这个问题几个小时，但没有找到任何东西。我确定解决方案很简单，但是我似乎看不到它。

我正在尝试显示具有完全不同的内部坐标系的路径。我正在使用 a`CGAffineTransformation`将其转换为屏幕坐标系。很简单。但是 1\. 有效， 2\. 不显示任何内容，出于性能原因，我真的很想避免使用 1.。

变换矩阵`Identity`在绘制调用之前和之后（此处未显示），以防您想知道。此外，我`CGContextGetPathBoundingBox`在这两种情况下都运行了，在 2 中似乎没有发生仿射变换。

**1.手动变换路径**

```
// Get the transform
CGAffineTransform transform = box.transform;

// Add a transformed copy of the path
CGContextAddPath(offscreenContext, CGPathCreateCopyByTransformingPath(way.path, &transform));
CGContextDrawPath(offscreenContext, kCGPathFillStroke); 
```

**2\. 尝试让 iOS 发挥它的魔力**

```
// Set the current transformation
CGAffineTransform transform = box.transform;
CGContextConcatCTM(offscreenContext, transform);

// Draw the path without transforming, iOS *should* do that for us
CGContextAddPath(offscreenContext, way.path);
CGContextDrawPath(offscreenContext, kCGPathFillStroke); 
```

任何想法？

# oracle - 将 dd hh:mm:ss 转换为整数

> ID：11479223
> 
> 赞同：2
> 
> 时间：2012-07-13T22:34:44.627
> 
> 标签：oracle, plsql

我有一个 char 中的列，格式为“dd hh:ms:ss” 是否有任何函数或某些东西可以将其更改为整数？（我正在使用 Oracle 10）

这是我的全部操作

(21/06/2012 20:33:00-21/06/2012 13:01:00)+(22/06/2012 10:29:00-2/06/2012 04:39:00)+(00 04:20:48)

日期在时代，但我实际上有一个 fn 将它们更改为日期时间。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:09:00.970

看看[TO_DSINTERVAL](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions184.htm)。例如：

```
SQL> SELECT TRUNC(SYSDATE) + to_dsinterval('00 04:20:48') the_date from dual;

THE_DATE
-------------------
07/13/2012 04:20:48 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:03:47.107

尝试以下操作：

```
invResult  INTERVAL DAY TO SECOND;

invResult  := (TO_DATE('21/06/2012 20:33:00', 'DD/MM/YYYY HH24:MI:SS') -
               TO_DATE('21/06/2012 13:01:00', 'DD/MM/YYYY HH24:MI:SS')) +
              (TO_DATE('22/06/2012 10:29:00', 'DD/MM/YYYY HH24:MI:SS') -
               TO_DATE('2/06/2012 04:39:00',  'DD/MM/YYYY HH24:MI:SS')) +
              TO_DSINTERVAL('00 04:20:48'); 
```

那应该让你接近。

分享和享受。

# c++ - Linux 上的用户界面

> ID：11479224
> 
> 赞同：1
> 
> 时间：2012-07-13T22:34:48.260
> 
> 标签：c++, linux, window

说到 Linux，我是一个完全的新手，我在第三学期的 OS 课程中接触了一些它，但仅此而已。我的操作系统交互仅限于使用 WinAPI。我正在为我的游戏引擎编写低级系统，即**上下文创建、文件处理、HID、线程等**，我希望能够在 Windows 和 Linux 上实现相同的功能.

在查找有关 Linux 接口系统的信息时，我只能找到对 Qt 等库的建议。这是一个很棒的库，我在 Windows 上使用过它，但是我对走阻力最小的道路并不感兴趣，因为我在学习使用 Linux 的过程中。感觉令人生畏，因为 Linux AFAIK 没有像 Windows.h 这样的东西。

你们能不能给我指出正确的方向？**Linux 将哪些本机（如果存在）库用于窗口系统（或者只是一种创建 OpenGL 上下文的方式，但具有窗口焦点、相对鼠标坐标、窗口最小化等 Windows 功能），来自键盘/鼠标/等的输入., 文件 i/o 和线程？**不必具体，能够在 Google 中输入一些内容并获得正确的结果会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T01:00:30.920

GNU/Linux 系统上的图形显示通常使用[X Window System](https://en.wikipedia.org/wiki/X_Window_System)或简称 X11 完成。但与 Windows 不同的是，X11 没有“内置”的 UI 控件集，如按钮和标签。它是一个较低级别的 API，只处理打开一个窗口并将内容绘制到其中。

要构建 UI，您*可以*使用原始 X11 并自己绘制所有内容，但大多数程序都使用*工具包*，这是一个构建在 X11 之上并实现常用控件（例如按钮）和事件处理基础设施的库跟他们。 [GTK](http://www.gtk.org/)和[Qt](http://qt.nokia.com/)是当今最常见的两个，但还有其他一些，例如[Motif](https://en.wikipedia.org/wiki/Motif_%28widget_toolkit%29)（它更老，看起来不太好）。请注意，[GNOME](http://www.gnome.org/)桌面环境是使用 GTK 构建的，而[KDE](http://www.kde.org/)是使用 Qt 构建的。

如果你想在 X11 中使用 OpenGL，你可以使用[GLX](https://en.wikipedia.org/wiki/GLX)创建一个 GL 上下文并将它与一个窗口相关联。它在设计上类似于用于在 Windows 中设置 GL 上下文的[WGL](https://en.wikipedia.org/wiki/WGL_%28software%29)接口，但不同的是，为其中一个编写的代码不能用于另一个。为了方便和可移植性，应用程序通常使用更高级别的库，例如[GLFW](http://www.glfw.org/)或[SFML](http://www.sfml-dev.org/)来处理 GL 上下文创建。

正在开发一个名为[Wayland](https://en.wikipedia.org/wiki/Wayland_%28display_server_protocol%29)的新窗口框架，它将（可能）最终取代 X11。更高级别的库（如 GTK 和 Qt）将被移植以使用 Wayland 作为后端——就像他们可以使用 Windows GDI 和 Apple Quartz 作为后端一样——因此使用这些高级工具包的应用程序不会受到太大影响到韦兰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:39:56.153

OpenGL 网站是一个很好的资源

[http://www.opengl.org/wiki/Getting_Started#Linux](http://www.opengl.org/wiki/Getting_Started#Linux)

# c# - 如何在 Metro/WinRT 中数据绑定嵌套的 ListView ItemTemplates？

> ID：11479228
> 
> 赞同：7
> 
> 时间：2012-07-13T22:35:17.930
> 
> 标签：c#, data-binding, microsoft-metro, windows-runtime, winrt-xaml

在我的 ViewModel 中，我有一个对象集合，每个对象都包含另一个集合。我试图通过使用嵌套的 ListView ItemTemplates 在我的视图中显示它。这是我的 ViewModel 代码的简化：

```
public ViewModelObject
{
    public ObservableCollection<OuterObject> OuterCollection { get; }
}

public OuterObject
{
    public string OuterTitle;
    public ObservableCollection<InnerObject> InnerCollection { get; }
}

public InnerObject
{
    public string InnerTitle;
} 
```

下面是我尝试在我的 XAML 中使用此 ViewModel 的简化：

```
<ListView ItemsSource="{Binding OuterCollection}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding OuterTitle}"/>
                <ListView ItemsSource="{Binding InnerCollection}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding InnerTitle}"/>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

如果我删除内部 ListView，外部 ListView 绑定工作得很好。我只是不知道如何正确地将内部集合对象绑定到内部 ListView。我试过用`{Binding OuterCollection.InnerCollection}`,`{Binding DataContext.InnerCollection}`和进行内部绑定`{Binding RelativeSource={RelativeSource TemplatedParent}, Path=InnerCollection}`，但所有这些都会导致它崩溃。实现这种嵌套绑定的正确方法是什么？

**编辑：**我应该补充一点，这是从 Windows Phone 7 移植的应用程序，它试图找到`LongListSelector`WinRT 中不可用的替代品。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T19:28:52.797

我想出了解决方案！它需要结合我以前尝试的解决方案。嵌套 ListView 中内部集合的正确绑定是：

```
{Binding RelativeSource={RelativeSource TemplatedParent},
                         Path=DataContext.InnerCollection} 
```

此外，根据嵌套 ListViews 的用途，我发现最好将 ItemsView 用于外部集合，将 ListView 用于内部集合。否则，两个控件的可选择性会相互重叠。

# php - MySQL / PHP - 这是一种在查询中转义的好方法吗？

> ID：11479233
> 
> 赞同：3
> 
> 时间：2012-07-13T22:35:47.893
> 
> 标签：php, security, prepared-statement

我终于做出了我认为是执行查询的好、安全和快速的方法，但我想在整个站点上实施它之前完全确定。

我的代码：

```
$email = $_POST['email'];
$displayName = $_POST['displayName'];
$pass = $_POST['pass1'];

if($stmt = $link -> prepare("INSERT INTO profiles (email, displayName, password) VALUES (?, ?, md5(?))")) {

        /* Bind parameters
            s - string, b - boolean, i - int, etc */
        $stmt -> bind_param("sss", $email, $displayName, $pass);

        /* Execute it */
        $stmt -> execute();

        echo "You are now registered.<br />";
        echo "<a href=\"login.php\">Login</a>";

        /* Close statement */
        $stmt -> close();
    } 
```

顺便说一句，stmt 是什么意思/代表什么？

编辑，新代码：

```
 /* Create a prepared statement */

    $stmt = $link -> prepare("INSERT INTO profiles (email, displayName, password,
    dateRegistered) VALUES (?, ?, md5(?), NOW())");

    if ( false===$stmt ) {
      die('prepare() failed: ' . htmlspecialchars($link->error));
    }

    $rc = $stmt -> bind_param("sss", $email, $displayName, $pass);
    if ( false===$rc ) {
      die('bind_param() failed: ' . htmlspecialchars($stmt->error));
    }

    /* Execute it */
    $rc = $stmt->execute();
    if ( false===$rc ) {
      die('execute() failed: ' . htmlspecialchars($stmt->error));
    }

    echo "You are now registered.<br />";
    echo "<a href=\"login.php\">Login</a>";

    /* Close statement */
    $stmt -> close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:45:02.313

是的 - 这是一个准备好的语句，它几乎可以避免 SQL 注入的风险，这是准备好的语句背后的主要目的。

唯一的缺点是，当用于必须处理不同查询的实用程序时，它们可能会很麻烦，比如动态数量的字段。不过，您可以使用[反射来解决这个问题](http://www.devmorgan.com/blog/2009/03/27/dydl-part-3-dynamic-binding-with-mysqli-php/)。

不过有几点建议：

*   md5 密码？可能不是最安全的选择。考虑使用加密盐（如果你用谷歌搜索的话，会有很多东西）

*   您似乎直接从`$_POST`超全局获取数据而没有检查或清理，但我想这只是为了减少这个 SO 问题的代码片段长度。永远不要直接从输入插入到查询 - 应该有一个验证/转义/编码等阶段。

*   你似乎没有检查语句的执行是否成功——你假设它是成功的，然后继续进行反馈。首先检查错误。

# javascript - 同一页面上的多个幻灯片

> ID：11479234
> 
> 赞同：0
> 
> 时间：2012-07-13T22:35:51.953
> 
> 标签：javascript, slideshow

我无法在一页上运行多个幻灯片。我正在尝试使用我给出的代码（我知道它已经过时了）。我的第一个问题是使用多个同名函数，我通过将函数嵌入到其他函数中来区分它们（例如：show1() show2()）来解决这个问题。这是我到目前为止所拥有的，我不确定现在是什么问题，因为它可能是多方面的，而且我缺乏 javascript 知识。任何帮助都会非常感谢您！

```
<!-- The following script is for the rotating images for the banner ad in right column            -->
<SCRIPT LANGUAGE="JavaScript">
<!-- Beginning of JavaScript -

if (document.images) {
ads = new Array(5);
ads[0] = "./images/okuma.jpg";
ads[1] = "./images/schlumberger.gif";
ads[2] = "./images/uesystems_logo.jpg";
ads[3] = "./images/brady.jpg";
ads[4] = "./images/ats.png";
}

newplace = new Array(5);
newplace[0] = "http://www.okuma.com/home.html" 
newplace[1] = "http://www.slb.com/"
newplace[2] = "http://www.uesystems.com/"
newplace[3] = "http://www.bradyid.com/bradyid/cms/contentView.do/6974/Visual-     Workplace.html"
newplace[4] = "http://www.advancedtech.com/"

var timer = null
var counter = 0

function banner() {
        timer=setTimeout("ban()", 6000);
        counter++;
        if (counter >= 5)
        counter = 0;
        document.bannerad1.src = ads[counter];
}

function show1(){
function gothere() {
        counter2 = counter;
        window.open(newplace[counter2]);
}
}
// - End of JavaScript - -->

</script>

<!-- The following script is for the rotating images for the banner ad in right column(2)  -->
<SCRIPT LANGUAGE="JavaScript">
<!-- Beginning of JavaScript -

if (document.images) {
ads = new Array(4);
ads[0] = "./marcon/images/arms_reliability_logo.jpg";
ads[1] = "./marcon/images/brunson_logo.jpg";
ads[2] = "./marcon/images/ctc_logo.jpg";
ads[3] = "./marcon/images/descase_logo.jpg";
}

newplace = new Array(4);
newplace[0] = "http://www.globalreliability.com/home" 
newplace[1] = "http://www.brunson.us"
newplace[2] = "http://www.ctconline.com/_home.aspx"
newplace[3] = "http://www.des-case.com"

var timer = null
var counter = 0

function banner() {
        timer=setTimeout("banner()", 6000);
        counter++;
        if (counter >= 4)
        counter = 0;
        document.bannerad2.src = ads[counter];
}
function show2(){
function gothere() {
        counter2 = counter;
        window.open(newplace[counter2]);
}
}
// - End of JavaScript - -->

</script> 
```

和

```
 <p align="center"><font size="2"><b>Companies Supporting<br />R&M Research:</b><br  />     (click logo for company info)</font></p>
        <p align="center"><a href="javascript:show1()"><IMG   SRC="./images/schlumberger.gif" WIDTH="180" HIGHT="200" BORDER="0" NAME="bannerad1"></a>
</p>
       <br />

            <hr noshade="noshade" size="0" color="#4c617e" />
 <br />

        <p align="center"><font size="1"><b>Thank you to the following for<br />their MARCON '12 support</b><br />(click logo for company info)</font></p>
        <p align="center"><a href="javascript:show2()"><IMG  SRC="./marcon/images/arms_reliability_logo.jpg" WIDTH="180" HIGHT="200" BORDER="0"   NAME="bannerad2"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:55:49.953

看看这个工作示例。希望您可以通过学习一点点 JavaScript 知识。

[http://jsfiddle.net/RRjGP/3/](http://jsfiddle.net/RRjGP/3/)

# ruby-on-rails - 在 Rails 项目中使用金融 gem

> ID：11479236
> 
> 赞同：1
> 
> 时间：2012-07-13T22:36:00.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, gem

我正在尝试将“财务”宝石用于 Rails 项目。我已经通过编辑我的 Gemfile 并使用“捆绑安装”成功安装了 gem。我已经包括了这一行：

application_controller.rb

```
include Finance 
```

这使我可以访问控制器中的金融 gem 功能。但是，我的数字出了点问题。如果您转到以下链接，您可以看到一个如何创建 Rate 对象并使用它来查找摊销的简单示例：

[http://rubydoc.info/gems/finance/1.1.2/frames](http://rubydoc.info/gems/finance/1.1.2/frames)

但是，在控制器中，当我尝试使用提供的代码将 Rate 对象设置为变量时：

```
@rate = Rate.new(0.0425, :apr, :duration => 30.years) 
```

...这会引发错误“错误的参数类型 Flt::DecNum (expected scalar Numeric)”

发生的事情是我传递给 Rate 的值“0.0425”显然是 Float/DecNum 但它需要一个数字对象。如果我使用下面的代码将数字转换为 Numeric 类型，错误就会消失，但创建的 Rate 对象并不能真正正常工作：

```
@rate = Rate.new(0.0425.to_c, :apr, :duration => 30.years) 
```

总而言之，我只是希望能够在控制器和/或助手中使用财务 gem，但似乎会产生一些错误，因为我传递的数字类型错误。任何人都可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:03:13.637

由于这个问题没有引起注意，我想发布我的解决方案，以防其他人遇到这个问题。

所以，我最终没有使用这个 gem，只是自己编写方法。原因是这个 gem 是专门为 Ruby 编写的，而不是为 Rails 编写的。其他用户遇到了和我一样的错误，如果你在 Rails 网站上使用它，唯一的解决办法是破解 gem 中的实际代码。

因此，至少目前的解决方案是不要将这个 gem 用于 Rails，仅用于纯 Ruby。我相信作者清楚地说明了这一点，但我忽略了一些事情。

谢谢！

# ios - iOS - 为什么在故事板中创建按钮时没有创建属性字段？

> ID：11479237
> 
> 赞同：0
> 
> 时间：2012-07-13T22:36:02.860
> 
> 标签：ios, ios5

我在情节提要中制作了一个提交按钮，并连接到相应控制器的 .h 。

我需要做的是向上移动一些元素。对于具有属性的元素，我只是做了这样的事情：

```
CGPoint pt = test.center;
pt.y -= 60;
test.center = pt; 
```

但是该按钮没有为其创建属性。有人可以帮我理解如何移动按钮以及为什么没有为按钮自动创建属性但所有其他 ui 元素都有一个属性吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:39:15.073

您需要为一个按钮建立两个连接，一个用于操作，一个作为插座。您在弹出的小对话框中选择您正在制作的内容：

![选择行动或出口](../Images/a1e8fac9f13e81f66031142aec1c4f6e.png)

您可以将它们视为彼此的倒数。动作连接是指向控制器的按钮（与以编程方式将目标/动作传递给按钮相同），出口是指向按钮的控制器，因此它可以随时操作它。

# android - 为什么 Android 游标在第一行结果之前开始，在最后一行之后结束？

> ID：11479245
> 
> 赞同：6
> 
> 时间：2012-07-13T22:37:03.620
> 
> 标签：android, sqlite, android-cursor

我试图理解为什么他们会在一行中的第一个位置之前开始光标，以及为什么它会在最后一个位置之后结束。这样做有继承优势吗？

例如：

> ```
> public abstract int getPosition () 
> ```
> 
> 自：API 级别 1 返回行集中游标的当前位置。该值从零开始。当第一次返回行集时，光标将位于位置 -1，即第一行之前。返回最后一行后，再次调用 next() 将使光标离开最后一个条目，位于 count() 的位置。
> 
> 返回当前光标位置。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T22:48:18.727

因为`Cursor`不保证 a 会填充行。如果你`Cursor`从一个有 0 行的数据库中得到一个返回，那么初始位置为 0 没有意义，因为位置 0 没有行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T22:40:49.427

所以你可以这样做：

```
Cursor c = db.rawQuery(...);
while (c.moveToNext()) {
    // deal with one row at a time
} 
```

这是迄今为止迭代游标结果的最巧妙方法（请参阅[迭代 Android 游标的最佳方法是什么？](https://stackoverflow.com/questions/10723770/what-is-the-neatest-way-to-iterate-over-the-results-in-an-android-cursor)），如果它没有在第一行**之前开始，它将无法工作。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:49:15.590

Android[`SQLiteCursor`](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html)是原生 SQLite 数据库游标的包装对象，它是一种控制结构，可让您遍历数据库中的记录。
我假设，在调用`setPosition`或`moveToFirst`本地游标之前，甚至不会将查询结果加载到内存中以节省空间。

# php - 图片上传表单给我“没有这样的文件或目录”错误

> ID：11479246
> 
> 赞同：0
> 
> 时间：2012-07-13T22:37:07.460
> 
> 标签：php

PHP：

```
if((isset($_POST['title']))&&(isset($_POST['body']))){ 

$maxSize = 4000; 
$acceptType = array( 
     'png' => 'image/png',
     'jpe' => 'image/jpeg',
     'jpeg' => 'image/jpeg',
     'jpg' => 'image/jpeg',
     'gif' => 'image/gif',
);

$title = mysql_real_escape_string($_POST['title']); 
$body = mysql_real_escape_string($_POST['body']); 

if((isset($_FILES['image']))&&(is_uploaded_file($_FILES["image"]["tmp_name"]))){ 

   $image_dest = "/it/images/".rand(1,1000)."-".basename($_FILES['image']['name']);

   if($_FILES['image']['size'] <= $maxSize*1024) {

       if(in_array($_FILES['image']['type'], $acceptType)) {

           if(move_uploaded_file($_FILES['image']['tmp_name'], $image_dest)) // line 44
                $message="Ok";
        }
   }

}
} 
```

HTML：

```
<form action="createblog.php" method="post" enctype="multipart/form-data">
    <p>
        <label>Title:</label>
        <input type="text" size="100" name="title">
    </p>
    <p>
        <label>Image:</label>
        <input type="file" name="image">
    </p>
    <p>
        <label>Image Caption:</label>
        <input type="text" size="100" name="imagecaption">
    </p>
    <p>
        <label for="editor1">Body:</label>
        <textarea class="ckeditor" cols="50" id="editor1" name="body" rows="10"></textarea>
    </p>
    <p>
        <input type="submit" value="Submit" />
    </p>
</form> 
```

为什么我会收到此错误？

```
Warning: move_uploaded_file(/it/images/865-Star_Trek_Logo.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/content/08/1936/html/it/createblog.php on line 44

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/php0hvJSh' to '/it/images/865-Star_Trek_Logo.jpg' in /home/content/08/1936/html/it/createblog.php on line 44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:42:05.587

您必须指定完整路径：

```
$image_dest = "/home/content/08/1936/html/it/images/".rand(1,1000)."-".basename($_FILES['image']['name']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:42:28.793

您的 $image_dest 的开头应该是：

```
/home/content/08/1936/html/it/images/ 
```

您正在尝试使用相对路径，而绝对路径是必需的，因此：

```
$image_dest = "/home/content/08/1936/html/it/images/".rand(1,1000)."-".basename($_FILES['image']['name']); 
```

另请注意，您必须对`images`目录进行chmod`777`以允许将文件上传到该目录。

# json - 如何使用 JSON 数据制作 HIVE 表？

> ID：11479247
> 
> 赞同：39
> 
> 时间：2012-07-13T22:37:12.983
> 
> 标签：json, hadoop, hive, amazon-emr, emr

我想用一些 JSON 数据（嵌套）创建一个 Hive 表并对其运行查询？这甚至可能吗？

我已经将 JSON 文件上传到 S3 并启动了 EMR 实例，但我不知道在 hive 控制台中输入什么才能让 JSON 文件成为 Hive 表？

有没有人有一些示例命令让我开始，我找不到任何对谷歌有用的东西......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-13T21:16:24.293

实际上没有必要使用 JSON SerDe。这里有一篇很棒的博文（我与作者没有任何关系）：

[http://pkghosh.wordpress.com/2012/05/06/hive-plays-well-with-json/](http://pkghosh.wordpress.com/2012/05/06/hive-plays-well-with-json/)

其中概述了使用内置函数 json_tuple 在查询时解析 json 的策略（不是在表定义时）：

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-json_tuple](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-json_tuple)

所以基本上，您的表模式只是将每一行加载为单个“字符串”列，然后根据每个查询的需要提取相关的 json 字段。例如，来自该博客文章的查询：

```
SELECT b.blogID, c.email FROM comments a LATERAL VIEW json_tuple(a.value, 'blogID', 'contact') b 
AS blogID, contact  LATERAL VIEW json_tuple(b.contact, 'email', 'website') c 
AS email, website WHERE b.blogID='64FY4D0B28'; 
```

以我卑微的经验，这已被证明更可靠（我遇到了处理 JSON serdes 的各种神秘问题，尤其是嵌套对象）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-16T21:16:10.927

您需要使用 JSON serde 以便 Hive 将您的 JSON 映射到表中的列。

一个很好的例子向您展示了这里的情况：

[http://aws.amazon.com/articles/2855](http://aws.amazon.com/articles/2855)

不幸的是，提供的 JSON serde 不能很好地处理嵌套的 JSON，因此您可能需要将 JSON 展平才能使用它。

这是文章中正确语法的示例：

```
create external table impressions (
    requestBeginTime string, requestEndTime string, hostname string
  )
  partitioned by (
    dt string
  )
  row format 
    serde 'com.amazon.elasticmapreduce.JsonSerde'
    with serdeproperties ( 
      'paths'='requestBeginTime, requestEndTime, hostname'
    )
  location 's3://my.bucket/' ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-13T18:00:51.050

我只需要解决同样的问题，到目前为止，还没有一个与 JSON SerDes 相关联的方法看起来足够好。亚马逊的可能很好，但我在任何地方都找不到它的来源（有人有链接吗？）。

HCatalog 内置的 JsonSerDe 对我有用，即使我实际上并没有在其他任何地方使用 HCatalog。

[https://github.com/apache/hcatalog/blob/branch-0.5/core/src/main/java/org/apache/hcatalog/data/JsonSerDe.java](https://github.com/apache/hcatalog/blob/branch-0.5/core/src/main/java/org/apache/hcatalog/data/JsonSerDe.java)

要使用 HCatalog 的 JsonSerDe，请将 hcatalog-core .jar 添加到 Hive 的 auxpath 并创建您的 hive 表：

```
$ hive --auxpath /path/to/hcatalog-core.jar

hive (default)>
create table my_table(...)
ROW FORMAT SERDE
  'org.apache.hcatalog.data.JsonSerDe'
...
; 
```

我在这里写了一篇文章，提供了更多详细信息

[http://ottomata.org/tech/too-many-hive-json-serdes/](http://ottomata.org/tech/too-many-hive-json-serdes/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-17T05:04:04.990

hcatalog-core 中的 Hive 0.12 及更高版本具有 JsonSerDe，它将序列化和反序列化您的 JSON 数据。因此，您需要做的就是创建一个外部表，如下例所示：

```
CREATE EXTERNAL TABLE json_table (
    username string,
    tweet string,
    timestamp long)
ROW FORMAT SERDE
'org.apache.hive.hcatalog.data.JsonSerDe'
STORED AS TEXTFILE
LOCATION
 'hdfs://data/some-folder-in-hdfs' 
```

对应的 json 数据文件应类似于以下示例：

```
{"username":"miguno","tweet":"Rock: Nerf paper, scissors is fine.","timestamp": 1366150681 }
{"username":"BlizzardCS","tweet":"Works as intended.  Terran is IMBA.","timestamp": 1366154481 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-09T17:38:03.873

# 从 .json 文件生成 SerDe 架构

如果您的 .json 文件很大，手动编写架构可能会很乏味。如果是这样，您可以使用这个方便的工具自动生成它。

[https://github.com/strelec/hive-serde-schema-gen](https://github.com/strelec/hive-serde-schema-gen)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-06T21:54:23.050

JSON 处理功能现在在 Hive 中可用，开箱即用。

> Hive 4.0.0 及更高版本

```
CREATE TABLE ... STORED AS JSONFILE 
```

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-StorageFormatsStorageFormatsRowFormat,StorageFormat,andSerDe](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-StorageFormatsStorageFormatsRowFormat,StorageFormat,andSerDe)

*   [https://issues.apache.org/jira/browse/HIVE-18785](https://issues.apache.org/jira/browse/HIVE-18785)
*   [https://issues.apache.org/jira/browse/HIVE-19899](https://issues.apache.org/jira/browse/HIVE-19899)

每个 JSON 对象都必须展平以适合一行（不支持换行符）。这些对象不是正式 JSON 数组的一部分。

```
{"firstName":"John","lastName":"Smith","Age":21}
{"firstName":"Jane","lastName":"Harding","Age":18} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-23T04:57:18.753

要从 JSON 文件创建 Hive 表，您需要根据专门针对您的 JSON 结构的[HiveQL DDL 标准编写 CREATE TABLE 语句。](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTableCreate/Drop/TruncateTable)

如果您使用的是嵌套的 JSON 文件，这可能会非常复杂，因此我建议您使用这个快速简便的生成器：[https ://hivetablegenerator.com/](https://hivetablegenerator.com/)

使用 HiveQL 分析 JSON 文件需要`org.openx.data.jsonserde.JsonSerDe`或`org.apache.hive.hcatalog.data.JsonSerDe`才能正常工作。

**org.apache.hive.hcatalog.data.JsonSerDe**
这是[来自 Apache 的默认 JSON SerDe](https://docs.aws.amazon.com/athena/latest/ug/json-serde.html#hive-json-serde)。这通常用于处理事件等 JSON 数据。这些事件表示为由新行分隔的 JSON 编码文本块。Hive JSON SerDe 不允许映射或结构键名称中的重复键。

**org.openx.data.jsonserde.JsonSerDe**
[OpenX JSON SerDe](https://github.com/rcongiu/Hive-JSON-Serde)类似于原生 Apache；但是，它提供了多个可选属性，例如“ignore.malformed.json”、“case.insensitive”等等。在我看来，它通常在处理嵌套的 JSON 文件时效果更好。

以这个示例复杂的 JSON 文件为例：

```
{
  "schemaVersion": "1.0",
  "id": "07c1687a0fd34ebf8a42e8a8627321dc",
  "accountId": "123456677",
  "partition": "aws",
  "region": "us-west-2",
  "severity": {
      "score": "0",
      "description": "Informational"
  },
  "createdAt": "2021-02-27T18:57:07Z",
  "resourcesAffected": {
      "s3Bucket": {
          "arn": "arn:aws:s3:::bucket-sample",
          "name": "bucket-sample",
          "createdAt": "2020-08-09T07:24:55Z",
          "owner": {
              "displayName": "account-name",
              "id": "919a30c2f56c0b220c32e9234jnkj435n6jk4nk"
          },
          "tags": [],
          "defaultServerSideEncryption": {
              "encryptionType": "AES256"
          },
          "publicAccess": {
              "permissionConfiguration": {
                  "bucketLevelPermissions": {
                      "accessControlList": {
                          "allowsPublicReadAccess": false,
                          "allowsPublicWriteAccess": false
                      },
                      "bucketPolicy": {
                          "allowsPublicReadAccess": true,
                          "allowsPublicWriteAccess": false
                      },
                      "blockPublicAccess": {
                          "ignorePublicAcls": false,
                          "restrictPublicBuckets": false,
                          "blockPublicAcls": false,
                          "blockPublicPolicy": false
                      }
                  },
                  "accountLevelPermissions": {
                      "blockPublicAccess": {
                          "ignorePublicAcls": false,
                          "restrictPublicBuckets": false,
                          "blockPublicAcls": false,
                          "blockPublicPolicy": false
                      }
                  }
              },
              "effectivePermission": "PUBLIC"
          }
      },
      "s3Object": {
          "bucketArn": "arn:aws:s3:::bucket-sample",
          "key": "2021/01/17191133/Camping-Checklist-Google-Docs.pdf",
          "path": "bucket-sample/2021/01/17191133/Camping-Checklist-Google-Docs.pdf",
          "extension": "pdf",
          "lastModified": "2021-01-17T22:11:34Z",
          "eTag": "e8d990704042d2e1b7bb504fb5868095",
          "versionId": "isqHLkSsQUMbbULNT2nMDneMG0zqitbD",
          "serverSideEncryption": {
              "encryptionType": "AES256"
          },
          "size": "150532",
          "storageClass": "STANDARD",
          "tags": [],
          "publicAccess": true
      }
  },
  "category": "CLASSIFICATION",
  "classificationDetails": {
      "jobArn": "arn:aws:macie2:us-west-2:123412341341:classification-job/d6cf41ccc7ea8daf3bd53ddcb86a2da5",
      "result": {
          "status": {
              "code": "COMPLETE"
          },
          "sizeClassified": "150532",
          "mimeType": "application/pdf",
          "sensitiveData": []
      },
      "detailedResultsLocation": "s3://bucket-macie/AWSLogs/123412341341/Macie/us-west-2/d6cf41ccc7ea8daf3bd53ddcb86a2da5/123412341341/50de3137-9806-3e43-9b6e-a6158fdb0e3b.jsonl.gz",
      "jobId": "d6cf41ccc7ea8daf3bd53ddcb86a2da5"
  }
} 
```

将需要以下创建表语句：

```
CREATE EXTERNAL TABLE IF NOT EXISTS `macie`.`macie_bucket` (
    `schemaVersion` STRING,
    `id` STRING,
    `accountId` STRING,
    `partition` STRING,
    `region` STRING,
    `severity` STRUCT<
    `score`:STRING,
`description`:STRING>,
    `createdAt` STRING,
    `resourcesAffected` STRUCT<
    `s3Bucket`:STRUCT<
    `arn`:STRING,
`name`:STRING,
`createdAt`:STRING,
`owner`:STRUCT<
    `displayName`:STRING,
`id`:STRING>,
`defaultServerSideEncryption`:STRUCT<
    `encryptionType`:STRING>,
`publicAccess`:STRUCT<
    `permissionConfiguration`:STRUCT<
    `bucketLevelPermissions`:STRUCT<
    `accessControlList`:STRUCT<
    `allowsPublicReadAccess`:BOOLEAN,
`allowsPublicWriteAccess`:BOOLEAN>,
`bucketPolicy`:STRUCT<
    `allowsPublicReadAccess`:BOOLEAN,
`allowsPublicWriteAccess`:BOOLEAN>,
`blockPublicAccess`:STRUCT<
    `ignorePublicAcls`:BOOLEAN,
`restrictPublicBuckets`:BOOLEAN,
`blockPublicAcls`:BOOLEAN,
`blockPublicPolicy`:BOOLEAN>>,
`accountLevelPermissions`:STRUCT<
    `blockPublicAccess`:STRUCT<
    `ignorePublicAcls`:BOOLEAN,
`restrictPublicBuckets`:BOOLEAN,
`blockPublicAcls`:BOOLEAN,
`blockPublicPolicy`:BOOLEAN>>>,
`effectivePermission`:STRING>>,
`s3Object`:STRUCT<
    `bucketArn`:STRING,
`key`:STRING,
`path`:STRING,
`extension`:STRING,
`lastModified`:STRING,
`eTag`:STRING,
`versionId`:STRING,
`serverSideEncryption`:STRUCT<
    `encryptionType`:STRING>,
`size`:STRING,
`storageClass`:STRING,
`publicAccess`:BOOLEAN>>,
    `category` STRING,
    `classificationDetails` STRUCT<
    `jobArn`:STRING,
`result`:STRUCT<
    `status`:STRUCT<
    `code`:STRING>,
`sizeClassified`:STRING,
`mimeType`:STRING>,
`detailedResultsLocation`:STRING,
`jobId`:STRING>)
ROW FORMAT SERDE 
     'org.openx.data.jsonserde.JsonSerDe'
LOCATION
     's3://awsexamplebucket1-logs/AWSLogs/' 
```

如果您需要来自 Amazon 的有关如何使用 AWS Athena 的嵌套 JSON 文件创建表的更多信息，请查看此链接：[https ://aws.amazon.com/blogs/big-data/create-tables-in-amazon-athena -from-nested-json-and-mappings-using-jsonserde/](https://aws.amazon.com/blogs/big-data/create-tables-in-amazon-athena-from-nested-json-and-mappings-using-jsonserde/)

# .net - 我可以用来阻止.NET 的流？

> ID：11479253
> 
> 赞同：1
> 
> 时间：2012-07-13T22:38:36.820
> 
> 标签：.net, stream

在问了这个问题 [写入 TcpClient 和 NetworkStream](https://stackoverflow.com/q/11478875/34537)之后，看来我必须编写另一个流，该流将以较小的流读取并继续运行，直到获得我喜欢的大小（或直到错误/超时）。

有什么内置的吗？还是在流行的 3rd 方库中？我只想确保我的 TCP 读取长度足够大，以便在开始对其进行操作之前初始化我的结构或填充数组。所以我希望 Read() 阻塞，直到它准备好。当底层流 (TCP) 超时或在其他大小上关闭时，可能会引发异常。（或者是对文件 IO 流有用的 EOF）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:49:12.830

我想[`BinaryReader.ReadBytes()`](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readbytes.aspx)这正是你想要的。它可以返回少于请求的字节数，但是根据文档，只有在到达流的末尾时才会发生这种情况。

# java - JMX 未在指定的端口上运行

> ID：11479255
> 
> 赞同：3
> 
> 时间：2012-07-13T22:38:44.560
> 
> 标签：java, jmx

我正在尝试通过 JMX 为我的世界服务器启用远程调试，但我似乎无法让它工作。

我在命令行上使用它来启动它：

`java -Dcom.sun.management.jmxremote.port=3000 -jar craftbukkit.jar`

显然，我没有设置任何身份验证或其他任何东西，但该过程似乎可以正确启动。我删除了所有的身份验证选项，没有任何改变。

但是，当我运行时：

`lsof | grep 3000` 或者 `netstat | grep 3000`

什么都没有返回。知道为什么这不能正确监听端口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:50:15.680

添加`-Djava.rmi.server.hostname = host ip`. 随着

```
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=false 
```

加上这个`-Djava.rmi.server.hostname = host ip`会强制 RMI 服务使用主机 ip 而不是`127.0.0.1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:25:40.550

除了您已经设置的属性之外，您还需要显式禁用身份验证 (com.sun.management.jmxremote.authenticate=false) 并禁用 SSL (com.sun.management.jmxremote.ssl=false)。将它们捆绑在一起，这是完整的命令行：

`java -Dcom.sun.management.jmxremote.port=3000 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -jar craftbukkit.jar`

请注意，这种配置被认为是不安全的，因为任何能够猜到端口 3000 的人都可以与您的机器建立 JMX 连接、浏览 MBean 属性并运行 MBean 操作。如果您对安全配置感兴趣，本文档有更多详细信息：

[http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)

# mysql - MySQL SELECT 使用基于来自另一个字段的数据的字符串

> ID：11479258
> 
> 赞同：0
> 
> 时间：2012-07-13T22:39:00.363
> 
> 标签：mysql, left-join, full-text-search, concat

这有效：

```
SELECT `nid`, CONCAT('node/', `nid`) AS `vpath`, `title`
FROM `node` WHERE MATCH(`title`) AGAINST ('a*' IN BOOLEAN MODE) 
```

那么为什么这不起作用：

```
SELECT `nid`, CONCAT('node/', `nid`) AS `vpath`, `title`, `alias`
FROM `node` WHERE MATCH(`title`) AGAINST ('a*' IN BOOLEAN MODE)
LEFT JOIN `url_alias` ON `url_alias`.`source` = `vpath` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:43:44.013

JOIN 应该放在 WHERE 语句之前。尝试：

```
SELECT `nid`, CONCAT('node/', `nid`) AS `vpath`, `title`, `alias`
FROM `node`
LEFT JOIN `url_alias` ON `url_alias`.`source` = `vpath`
WHERE MATCH(`title`) AGAINST ('a*' IN BOOLEAN MODE) 
```

[MYSQL 选择语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# c++ - 使用 std::vector 时访问冲突

> ID：11479259
> 
> 赞同：0
> 
> 时间：2012-07-13T22:39:11.020
> 
> 标签：c++, stdvector

我收到以下错误：

*   TBG.exe 中 0x012a4bd9 处的未处理异常：0xC0000005：访问冲突读取位置 0x0000002c。

指向vector.h的size()方法。使用此方法时似乎会发生：

```
void Player::printInventory(){
    if(inventory.size() != 0){
        for(unsigned int i=0; i<inventory.size(); i++){
            cout<<inventory[i] << endl;
        }
    }
} 
```

* * *

完整代码：

播放器.h：

```
#pragma once
#include <vector>
#include <memory>

using namespace std;

class Player
{
private:
    int health;
    string name;
    vector<int> inventory;

public:
    Player(void);
    Player(string);
    ~Player(void);
    void changeHealth(int);
    void addToInventory(int);
    void removeFromInventory(int);
    void printInventory();
}; 
```

播放器.cpp：

```
#include "Player.h"
#include <iostream>
#include <string.h>

Player::Player(void)
{
    health = 20;
}

Player::Player(string newName)
{
    name = newName;
    health = 20;
}

Player::~Player(void)
{
}

void Player::changeHealth(int amount){
    health += amount;
}

/*void Player::addToInventory(int item){
    inventory.push_back(item);
}

void Player::removeFromInventory(int itemID){

    for(unsigned int i=0; i<inventory.size(); i++){
        if(inventory[i] == itemID)
            inventory.erase(inventory.begin()+i);
    }

}*/

void Player::printInventory(){
    if(!inventory.empty()){
        for(unsigned int i=0; i<inventory.size(); i++){
            cout<<inventory[i] << endl;
        }
    }
} 
```

主要的：

```
#include "World.h"
#include "Player.h"
#include <iostream>
#include <memory>

World world;

void main(){

    unique_ptr<Player> player(new Player("Ted"));
    world.setPlayer(move(player));
    int selection = 0, inventoryOption = 0, exitOption = 0;

    do{
        inventoryOption = 0;
        exitOption = inventoryOption + 1;

        cout<< inventoryOption <<". View Inventory"<<endl;
        cout<< exitOption <<". Quit game";

        cin>>selection;

        if(selection == inventoryOption){
            player->printInventory();
        }
        else{
        }

    }while(selection != exitOption);

} 
```

请原谅混乱，此代码是从具有相同错误的先前代码中删除的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T22:51:35.080

您正在使用`move`the `unique_ptr`，使其不再指向`new Player`，然后您正在使用它：

```
world.setPlayer(move(player));

...

player->printInventory(); 
```

不要`move`仅仅用来编译代码；使用`shared_ptr`，以便您可以拥有多个指向该对象的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:41:37.570

使用 !inventory.empty() 代替 inventory.size() != 0。因此，对于代码，当您移动 unique_ptr 时，unique_ptr 将被释放，因此它将指向零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T22:51:54.090

看起来您正在使用一些空对象。在崩溃之前在函数中打印 this(Player) 的值。

# c# - 转换对象而不是向上转换

> ID：11479261
> 
> 赞同：0
> 
> 时间：2012-07-13T22:39:18.357
> 
> 标签：c#, casting

是否可以以不可逆的方式向上转换对象，这会导致数据丢失。

例如我有两个类：

```
public class A
{
    public string Name { get; set; }
}

public class B : A
{
    public int Length { get; set; }
} 
```

而这个简单的代码：

```
var b = new B {Length = 10, Name = "B Object"};

var a = b as A; 
```

我想知道是否有一种方法，如果我`a`转换回`B`类型对象，该属性`Length`将不存在并且是`default(int)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T22:43:58.387

您不能以这种方式丢失信息。'b' 和 'a' 引用的对象是同一个对象。从代码的角度来看，类型转换只会影响成员访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:44:53.800

施放时，您不会更改对象本身。只是对对象的引用类型发生了变化。

因此，即使引用的`A`类型是 ，对象的实际类型仍然是`B`。如果将引用转换回`B`对象仍然是完整的，因为它的类型从未改变。

这就像通过马 (A) 的剪影看独角兽 (B)。即使你没有看到角，它看起来只是一匹马，但角仍然存在，当你移除切口时，你会看到它仍然是一只独角兽。:)

# arrays - Codeigniter 动态下拉菜单

> ID：11479262
> 
> 赞同：0
> 
> 时间：2012-07-13T22:39:23.943
> 
> 标签：arrays, codeigniter, drop-down-menu

我看到有很多关于动态下拉列表的问题，所以我希望我的不会被掩盖。我在一个模型中有这个方法，它从表中提取数据并创建一个数组以用于构建 codeigniter 下拉列表。

```
 `// method in the model
 public function house_dropdown()
 {
      $dbres = $this->db->get('house'); //used php5 method chaining
       //cycle through result and create array to be made a drop down.
      $dbarray = array();
      foreach($dbres->result_array() as $db)
      {
         $dbarray[$db['house_id']] = $db['house_name'];
       }
         return $dbarray;
}` 
```

`这将创建数组并在控制器中使用并发送到如下视图： ````
 $this->data['house'] = $this->gen_model->house_dropdown();
 $this->template->set($this->data)
                       ->set_partial('maincontent','partials/maincontent/admin/register')
                       ->build('layouts/default');// creates a from element like so
 echo form_dropdown($house);

```` 

但这是我在下拉元素处得到的错误：

```
`A PHP Error was encountered
Severity: Warning
Message: Illegal offset type in isset or empty
Filename: helpers/form_helper.php
Line Number: 319
A PHP Error was encountered
Severity: Notice
Message: Array to string conversion
Filename: helpers/form_helper.php
Line Number: 329` 
```

`所以我很难过！因为我不知道去哪里看，因为我知道表单助手不会有错误，而且在我的代码中我什么也看不到。任何帮助将不胜感激。提前致谢。`

 `PS。在 foreach 之后，我在 $dbarray 上做了一个 var 转储，它表明该数组已被填充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:03:08.690

您向函数传递了错误数量的参数，应该是

```
echo form_dropdown('name_of_the_dropdown', $house, 'current_selected_item'); 
```

从`codeigniter`文档

```
$options = array(
     'small'  => 'Small Shirt',
     'med'    => 'Medium Shirt',
     'large'   => 'Large Shirt',
     'xlarge' => 'Extra Large Shirt',
 );

$shirts_on_sale = array('small', 'large');

echo form_dropdown('shirts', $options, 'large'); 
```

会产生：

```
<select name="shirts">
    <option value="small">Small Shirt</option>
    <option value="med">Medium Shirt</option>
    <option value="large" selected="selected">Large Shirt</option>
    <option value="xlarge">Extra Large Shirt</option>
</select> 
```

**参考：** [**表单助手**](http://codeigniter.com/user_guide/helpers/form_helper.html)``

# iphone - 卡在 initWithNibName

> ID：11479264
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:39:55.010
> 
> 标签：iphone, ios5, interface-builder, xcode4.3

我使用故事板创建了一个应用程序。有两个视图控制器第一个视图或初始视图是 UnifeyeMobileViewController，第二个视图控制器称为 SecondViewController。两者都通过导航视图控制器内的 segue 连接。SecondViewController 有两个按钮。在 secondViewController 内第一个按钮的 IBAction 上，我正在尝试运行以下代码。

我正在尝试在以前版本的 xcode 中使用现有应用程序中的以下代码，我们使用 XIB 而不是情节提要，但以下代码不适用于情节提要，它会在 presentModelViewController 语句中生成错误消息。

```
UnifeyeMobileHelloWorld* unifeyeMobileViewController = [[UnifeyeMobileHelloWorld alloc] initWithNibName:@"UnifeyeMobileViewController" bundle:nil];
unifeyeMobileViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[viewController presentModalViewController:unifeyeMobileViewController animated:YES];
[unifeyeMobileViewController release]; 
```

UnifeyeMobileHelloWorld 是我在这里以编程方式生成的视图控制器。从文件->新建->文件->UIViewController的objective C类子类中导入UIController类。将此文件命名为UnifeyeMobileHelloWorld。并在实现文件中添加功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:27:02.457

所以你想创建一个从第二个视图控制器到第一个的模态segue？只有一个 segue 会更有意义，从第一个 (UnifeyeMobileHelloWorld) 到第二个的模态。然后当有人点击你想把他们送回去的按钮时，你可以打电话

`[self dismissModalViewControllerAnimated:YES];`//如果你愿意，也可以不

不确定这是否适合您应用程序的其余设计，如果您在第二个视图之后有更多视图，请将其设置为从 UnifeyeMobileHelloWorld 到第二个的推送序列，顶部的导航栏将有一个后退按钮自动地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:34:37.647

# 编辑：无操作方法：

您在上面的评论中粘贴的错误表明问题实际上出在其他地方。您按下的按钮配置为使用 selector: 向 SecondViewController 发送消息`btnHelloWorld:`，而 SecondViewController*没有该 selector 的方法*。如果您重命名方法并且不将故事板中的按钮重新连接到新方法，则可能会发生这种情况。所以打开情节提要，然后从按钮重新ctrl-拖动到SecondViewController中适当的动作方法。

# 原答案：

看来（通过我们上面的对话），您需要复制 XIB 文件，或者将 XIB 的内容移动到您的故事板并使用更现代的过渡技术（即拖放 segue 过渡）。

*要按照您尝试的方式*使用视图控制器，它需要 3 个文件：

1.  .h
2.  他们
3.  .xib（或 .nib）

您的情况似乎缺少#3。需要它来布局 ViewController 的子视图并初始化它们的连接，至少，因为您正在调用“initWithNibName:”，它**需要一个 *ib 文件**

# opencart - VQMod 停止工作

> ID：11479267
> 
> 赞同：0
> 
> 时间：2012-07-13T22:40:21.367
> 
> 标签：opencart

我正在使用 Open cart V.1.5.3.1。我的 VqMod 突然停止工作（我安装了 1.Ajax-Enable-Disable-Product，2.vqmod_admin_ajax_edit_quantity 两者都不起作用。）我尝试重新安装 VQMod，但问题仍然存在。即使在我使用 MAMP 的本地计算机上，VQMod 也已停止运行。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:17:18.420

确保 vqmod 文件夹和 vqmod/vqcache 文件夹是可写的（755 或 777）。

```
Also be sure index.php and admin/index.php are writable.
    If not sure which you need, first try 755.
    If you get errors about permissions, then try 777\. 
```

# objective-c - 如何有效地使用 MVC 架构

> ID：11479268
> 
> 赞同：0
> 
> 时间：2012-07-13T22:40:22.783
> 
> 标签：objective-c, ios, cocoa-touch, model-view-controller, design-patterns

我对视图和视图控制器的职责感到困惑。

我已经阅读了[关于 MVC 的 Apple 文档，](http://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)但它没有说明任何回答我的问题的明确示例。

我有一个简单的数据库应用程序，它从数据库中提取数据并使用 UITableView 显示它。

我的视图是自定义视图。它基本上是在 UIView 中彼此相邻显示的 UITableView 的集合，显示从数据库计算的数据。

我的视图控制器为每个 UITableview 实现了委托。

我有一个容器视图（UIVIew），其中包含所有 UITableview viewController ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath
{

   UIView *containerForAllview = [tableview superview];
   //container view contains list of dataset . each of which is displayed 
   //  by it's own    respective tableview

   if(tableview = atableview){
      array = containerForAllview.getDatafortable(atableview);

    }else if(tableview = btableview){
     array = containerForAllview.getDatafortable(btableview);
    }
    /// like this for few more tables 

    // configure cells using this array
    cell.text = [array objectAtIndex:indexpath.row].name;
} 
```

我觉得我的设计有些可疑。

1.  View Controller 是否需要了解我的整个视图 Hierarchy 。最初我认为我的 ContainerView 会抽象一切。
2.  （其职责是处理用户事件）tableviews 的委托应该由 containerView 或我的 viewcontroller 实现。
3.  如果我的视图处理事件，那么我的 UIViews 需要引用我的数据模型，这违反了 MVC 架构的概念。
4.  我的容器视图持有列表数组来提供它的表格视图是错误的还是我应该将该逻辑移动到视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:45:04.920

视图控制器应该负责管理其下的整个视图层次结构。视图只管理它们知道何时发生以及通知谁的事件。他们实际上很少对此做任何事情。他们只是通知他们的事件委托（通常是他们拥有的视图控制器）。

通常，只有您的 viewController（即*控制器*）直接与您的模型对话，并告诉视图他们需要知道什么，并响应视图有关 UI 事件的通知。

具体回应：

1.  是的，ViewController 就像您需要它们一样了解它们管理的整个层次结构。
2.  viewController 处理委托方法，而不是视图。
3.  不，他们只是告诉 VC 事件发生了（通过委托，而不是通过具体*了解*他们的 VC 的任何信息，除了 VC 已经告诉视图（通过各种机制）在哪种情况下调用哪些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:49:44.497

修改设计以遵循 MVC 架构的一种简单方法是为每个表创建一个单独的数据类。

你可以做一些`TableA`有数据源和委托的事情`TableAData`——它是一个完全独立的类。然后你只需要确保它`TableAData`声明了一个协议，这样就`TableA`可以监听委托方法`TableAData`并相应地修改它的显示！

MVC 架构非常简单——让另一个类完成所有数据处理。一旦这个类处理数据，通知视图控制器，以便它可以更新用户界面！这是通过委托或通知完成的，其中包括键值观察。

# c# - 尝试使用 Web 服务，但没有响应请求返回数据

> ID：11479274
> 
> 赞同：0
> 
> 时间：2012-07-13T22:41:08.780
> 
> 标签：c#, web-services, no-data

我正在尝试使用 Web 服务，但由于某种原因，我的请求没有返回任何数据。我创建了对 Web 服务的服务引用。这是我的代码：

```
 static void Main(string[] args)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://127.0.0.1/MyWS/MyService.asmx");

        request.Headers.Add(@"SOAPAction", "\"http://tempuri.org/GetUser");
        request.ContentType = "text/xml;charset=\"utf-8\"";
        request.Accept = "text/xml";
        request.Method = "POST";
        request.ContentLength = 8000;  

        XmlDocument soapEnvelopeXml = new XmlDocument();
        soapEnvelopeXml.LoadXml(@"<?xml version=""1.0"" encoding=""utf-8""?>
                                    <soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
                                      <soap:Header>
                                        <ServiceAuthHeader xmlns=""http://tempuri.org/"">
                                          <SiteName>MySiteName</SiteName>
                                          <Password>password</Password>
                                          <AgencyName>MyDept</AgencyName>
                                          <UserName>Mark</UserName>
                                          <ApplicationName>CSharpApp</ApplicationName>
                                          <DatabaseName>DBName</DatabaseName>
                                        </ServiceAuthHeader>
                                      </soap:Header>
                                      <soap:Body>
                                        <GetUser xmlns=""http://tempuri.org/"">
                                          <UsrNum>1</UsrNum>
                                        </GetUser>
                                      </soap:Body>
                                    </soap:Envelope>");

        using (Stream stream = request.GetRequestStream())
        {
            using (StreamWriter streamWriter = new StreamWriter(stream))
            {
                streamWriter.Write(soapEnvelopeXml);
            }
        }

        WebResponse response = request.GetResponse();
    } 
```

这是我的请求的格式：

```
POST /MyWS/MyService.asmx HTTP/1.1
Host: 127.0.0.1
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/GetUser"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <ServiceAuthHeader xmlns="http://tempuri.org/">
      <SiteName>string</SiteName>
      <Password>string</Password>
      <AgencyName>string</AgencyName>
      <UserName>string</UserName>
      <ApplicationName>string</ApplicationName>
      <DatabaseName>string</DatabaseName>
    </ServiceAuthHeader>
  </soap:Header>
  <soap:Body>
    <GetUser xmlns="http://tempuri.org/">
      <UsrNum>int</UsrNum>
    </GetUser>
  </soap:Body>
</soap:Envelope> 
```

以下是返回响应的方式：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetUserResponse xmlns="http://tempuri.org/">
      <GetUserResult>
        <Usrnum>int</Usrnum>
        <UsrTitle>string</UsrTitle>
        <Userfnam>string</Userfnam>
        <Userlnam>string</Userlnam>
        <UserName>string</UserName>
        <Agtnum>int</Agtnum>
        <Unit>string</Unit>
        <Dbnum>int</Dbnum>
        <UsrGrpName>string</UsrGrpName>
        <PWord>string</PWord>
        <UsrTs>int</UsrTs>
        <IconColor>string</IconColor>
        <IconStyle>string</IconStyle>
        <ShortUserName>string</ShortUserName>
        <UsrContactPhone>string</UsrContactPhone>
        <UsrContactEmail>string</UsrContactEmail>
        <Agency>string</Agency>
      </GetUserResult>
    </GetUserResponse>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:48:48.960

你到底为什么要手动构建请求？

当您添加服务引用时，Visual Studio 所做的是生成一个实现服务客户端的类 - 为您完成所有这些工作。

您可以在创建服务引用时指定的命名空间中找到客户端。

例如，如果您指定了 Svc 命名空间，您可能会在以下位置找到您的客户端`Svc.SiteAuth`

所以使用它如下：

```
var client = new Svc.SiteAuth();
Svc.GetUserResult response = client.GetUser(1); 
```

`response`将是一个填充有服务设置的属性（`PWord`、`Agency`和所有其他...）的实例。

# java - 需要有关 Quadtrees java 的帮助

> ID：11479277
> 
> 赞同：2
> 
> 时间：2012-07-13T22:41:38.160
> 
> 标签：java, 2d, simulation, particles, quadtree

我一直在寻找一些在我的 2D 模拟中实现四叉树的方法，以使碰撞检测更快，但我发现这个概念很难掌握。sim 效果很好，因为现在它只是一旦我超过 160-180 个粒子，它就会变得非常慢，因为碰撞检测会毫无必要地通过所有粒子，而且非常愚蠢。现在它只是一堆或圆圈在屏幕周围相互碰撞，我可以通过单击并拖动鼠标以新的速度和位置产生新的。

**编辑1：**

好吧，我想我现在可以创建树了，正如您在图像中看到的那样

我的四叉树图片：http: [//i.stack.imgur.com/c4WNz.jpg](http://i.stack.imgur.com/c4WNz.jpg)

所以现在的问题是如何让它对我的碰撞检测有用......

每次检查时都必须从零开始创建整个树吗？

我在等待时将要做的事情，希望它在某种程度上是正确的：P

1_检查每个节点中是否有球，如果没有，则将该节点排除在外。2_继续检查交叉点，直到我达到叶层并将那些相交的球添加到叶节点。3_在我继续前进之前在叶节点碰撞球？？

这是我的 QuadTreeNode 类：

```
public class QuadTreeNode { 
    private QuadTreeNode parent;
    private QuadTreeNode[] children;    
    private int id;
    private double x;
    private double y;
    private double width;
    private double height;

public QuadTreeNode(double x, double y, double width, double height, int id, QuadTreeNode parent){
    this.x = x;
    this.y = y;
    this.width =  width;
    this.height = height;
    this.children = new QuadTreeNode[4];
    this.id = id;
    this.parent = parent;
    //System.out.println("<x:>"+x+"<y:>"+y+"<w:>"+width+"<h:>"+height);     
    if (this.width>=1000/12 && this!=null){
        nodes+=1;
        this.children[0] = new QuadTreeNode(x, y, width/2, height/2, id+1, this);
        this.children[1] = new QuadTreeNode(x + width/2, y, width/2, height/2, id+2, this);
        this.children[2] = new QuadTreeNode(x, y + height/2, width/2, height/2, id+3, this);
        this.children[3] = new QuadTreeNode(x + width/2, y + height/2, width/2, height/2, id+4, this);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:07:50.967

> 我觉得这个概念很难掌握

主意：

*   单元格的递归分区，因为：

    *   单元格包含固定数量的基元。
    *   发生最大分区数。
*   从整个场景的边界框开始。

*   递归：如果单元格中的原语太多，则划分单元格。
*   空房间不分区（自适应分区）
*   几何所在的精细分区。

提示：由于层次结构中有许多上下移动，遍历相对昂贵。

*   将图元保存在内部节点或叶子中。

遍历： - 使用根的轴对齐边界框进行测试（第一：整个场景）

提示：第一个命中不可能是最近的。

简而言之，这就是四叉树或八叉树 (3D) 的原理。我在这里有一张 cg 幻灯片，它用图像进行了描述，但我不想全部上传。我认为这不是您问题的完整答案，但也许会有所帮助。

# rest - 为什么在构建 REST 端点时“/game/owner_id/1234”比“/game?owner_id=1234”更好？

> ID：11479281
> 
> 赞同：0
> 
> 时间：2012-07-13T22:42:24.523
> 
> 标签：rest

问题说明了一切。我经常看到前者完成，但在我看来，它为前端和后端开发人员提供了更多的工作，而不仅仅是使用标准的 HTTP 查询参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:51:18.543

我不知道“更好”，但它的一个优点是*它显示了层次结构*，而只有查询参数的表单没有：

查看资源很快表明它与“特定 [游戏] 所有者”有关。虽然，也许`/games/owner/XYZ`比`/games/owner_id/XYZ`..更合适

另外，我认为它看起来“更漂亮”。

我不同意它“做更多工作”的提议，因为它*仍然*只是一个 URI，并且*仍然*有一些定义的 API。REST-ful 框架通常支持将 URL 映射作为标准包的一部分。

# email - 在网络表单中上传 PDF，加密然后通过电子邮件发送

> ID：11479287
> 
> 赞同：2
> 
> 时间：2012-07-13T22:43:04.793
> 
> 标签：email, pdf, encryption, upload

我有一个客户要求他们的用户下载一个 PDF 文档以填写其中包含一些非常敏感的数据（SSN 等），然后他们要求他们填写他们填写的表格并重新上传它到网站...但是当他们这样做时，他们希望文件通过电子邮件发送给他们。

现在，在您开始抱怨如何更容易地建立一个在线表格来收集这些数据之前......相信我，我已经去过那里了。我试图说服他们这不是理想的方式——但是，任何与世界上任何客户合作过的人都知道，有时客户希望事情按照他们的方式完成，这就是它的结束。

话虽这么说，我想找到一种方法让用户上传文档，加密它（使用我的客户可以用来解密它的某种密钥），通过电子邮件将其发送给他们，然后从我的服务器上删除吸盘因为我不希望这些信息坐在那里。

我在运行 IIS6 的 Windows 2003 服务器上。我一直在玩 GPG4WIN，但运气不佳。我对使用 ASP.NET 或 PHP 的想法或解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:44:17.857

您可以提供允许用户上传文档的表单和另一个用于从用户那里获取密码和电子邮件地址的表单。

在服务器端，您可以使用 PDF 库来设置用户提供的密码。（ASP.NET 或 PHP 本身不支持 PDF 处理） 之后，可以删除原始文档，并将加密的文档邮寄到用户的电子邮件地址。

您可以在 IIS 服务器上安装许多免费和商业库。我的公司 Gnostice 有一个可以做到这一点的免版税商业 PDF 库。PHP 也可能有一些用于加密 PDF 文档的可安装库。

# mfc - CTreeCtrl 展开而不滚动

> ID：11479288
> 
> 赞同：0
> 
> 时间：2012-07-13T22:43:08.683
> 
> 标签：mfc

在我的 CTreeCtrl 中，当我展开一个不可见的节点时，控件会自动重新定位树以使展开的节点可见。有什么办法可以防止这种行为？

用例：我有一棵树，它从远程源异步加载项目，并且可能正在构建树的“底部”很长一段时间，目前在完成时跳转到每个节点的树行为非常分散注意力用户。

当前解决方法：

```
/******************************************************************************
 Expand an item while retaining the tree position
 ******************************************************************************/
void CFileOpenTreeView::ExpandWithoutJumping(HTREEITEM hItem)
{
    // This still flickers for some reason, but at least it doesn't jump
    LockWindowUpdate();
    HTREEITEM hFirstVisible = GetTreeCtrl().GetFirstVisibleItem();

    GetTreeCtrl().Expand(hItem, TVE_EXPAND);

    GetTreeCtrl().SelectSetFirstVisible(hFirstVisible);
    UnlockWindowUpdate();
    Invalidate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:52:23.037

要回答您的直接问题，您可以在填充控件时关闭窗口刷新，使用`CWnd::LockWindowUpdate()`and `CWnd::UnlockWindowUpdate()`。

不过，总的来说，如果可以的话，您可能需要重新考虑您的策略。例如，您可以在不展开父节点的情况下填充树中的子节点。

此外，在您描述的用例中，您可能希望仅在用户展开父节点时才动态填充节点的子节点。

# mysql - MySql - 表 'proc' 未使用 LOCK TABLES 锁定

> ID：11479289
> 
> 赞同：3
> 
> 时间：2012-07-13T22:43:42.443
> 
> 标签：mysql

我的应用程序包含一个函数，在该函数中我试图锁定一个表，更新它（使用存储过程）然后解锁它。代码类似于：

```
LOCK TABLE mytable WRITE;
CALL myStoredProc;
UNLOCK TABLES; 
```

调用该函数时，`CALL myStoredProc;`执行该部分时会出错，并给出以下错误消息：

```
Table 'proc' was not locked with LOCK TABLES 
```

我尝试锁定`mysql.proc`，`mytable`但这似乎没有帮助。关于这种情况的任何想法？

**更新：** 第一个存储过程如下：

```
CALL mystoredproc2(NOW());
UPDATE mytable SET _column = NOW();
SELECT * FROM mytable WHERE _column > NOW(); 
```

如您所见，上面的存储过程嵌套了另一个。第二个只包含一个更新语句：

```
UPDATE mytable2 SET _column = _now; 
```

仅供参考：我也锁定`mytable2`了 lock 语句，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:21:52.823

我将嵌套存储过程作为一系列 SQL 语句移到了`mystoredproc2`外部，这就成功了。`mystoredproc`

# python - 比较数组中的对象属性：Python

> ID：11479292
> 
> 赞同：0
> 
> 时间：2012-07-13T22:43:47.337
> 
> 标签：python

我有一门课，它定义了水滴如何在 3 维空间中移动。

我需要比较每个液滴的位置，以确定它们是否在一定时间后相互碰撞。我定义它们的位置的方式是使用三个值，`x`, `y`, `z`。每个值都是水滴的一个属性。

我有大量的水滴放入阵列中。我的代码如何在不重复比较的情况下比较所有这些，因为如果它们碰撞会形成更大的液滴？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:51:03.003

您可能希望调查[octrees](http://en.wikipedia.org/wiki/Octree)的用法。通过将您的点保持在八叉树中，您可以大大减少您必须进行的比较次数（因为您已经知道某些点绝对不会与其他点发生冲突）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:59:14.110

可以按位置排序吗？那么你只需要比较相邻的元素......如果你采取的步长很小，你只能每隔几步排序一次并比较相邻的几个液滴，必要时合并。

```
import numpy as np

def merge(p1,p2):    
    #somehow merge particles.  With real particles, mass might matter too,
    #but my particles only have position :-)
    return (p1+p2)/2 #average location of particles.

def merge_particles(particles,merge_dist_squared):
    #Merge particles in 1 pass through the list
    #This will always work if the particles are sorted in order
    #It will fail if the particles aren't sorted well enough.
    i=1
    output=[]
    prev=particles[0] #location of previous (first) particle
    while i<(len(particles)):
        dist_vec=(particles[i]-prev)
        dist_squared=np.dot(dist_vec,dist_vec)
        if dist_squared > merge_dist_squared: #particle isn't close enough to merge
            output.append(prev)
            prev=particles[i]
        else:                       #particle is close enough to merge
            prev=merge(prev,particles[i])
        i+=1

    output.append(prev) #Have to make sure we add the last particle.

    return output

#create N particles:
N=1000
particles=[np.random.random(3) for x in xrange(N)]
particles.sort(key=tuple) #sort particles based on position.
particles=merge_particles(particles,0.1**2)
print len(particles) 
```

# cassandra - 为什么我的 Cassandra 节点无法加入环？

> ID：11479294
> 
> 赞同：4
> 
> 时间：2012-07-13T22:44:30.040
> 
> 标签：cassandra

我有一个正在加入现有集群的 Cassandra 节点。它开始自我引导，流式传输一堆数据（通过 监控`nodetool netstats`），然后似乎完成了 - 但它实际上并没有加入环。这是怎么回事？我如何弄清楚发生了什么？日志中完全没有错误，时间充裕，Cassandra 进程做的很少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T22:44:46.810

在这种情况下，我打开了所有的调试登录`/etc/cassandra/log4j-server.properties`，并筛选了大量的输出，直到我注意到一些关于`OutboundTCP: attempting to connect to *host*`这些的声明出现在某些主机上，但没有出现在其他主机上。进一步调查显示，由于网络配置是我自己的错误，集群中某些节点之间的连接有限：新节点只能连接到集群中其他 5 台主机中的 3 台。

修复此问题后，节点能够传输额外的数据，我可以自由地追求宗教满足的生活。[*](http://www.imdb.com/title/tt0080339/quotes) *（另外，我`nodetool repair`因为偏执狂跑遍了整个地方。）*

# java - 重复插入

> ID：11479300
> 
> 赞同：0
> 
> 时间：2012-07-13T22:45:00.737
> 
> 标签：java, sql, transactions, transactionscope

在并发请求的情况下，我遇到了重复插入的以下问题。

我有两张桌子：

```
create table tbl (
  val varchar2(1000)
);

create table tbl2 (
  val varchar2(1000)
); 
```

`tbl2`只有在表`tbl`为空的情况下，我才需要在表中插入一些值。因此，在我的 Java 代码中，我使用隔离级别 = READ COMMITED 进行事务处理：

```
//start transaction
int result = jdbcTemplate.queryForInt("select count(*) from tbl");
if (result == 0) {
  int update = jdbcTemplate.update("insert into tbl2(val) values(?)", "di" + UUID.randomUUID().toString());
}
//end transaction 
```

这里的问题是：实际上有人可以在`if (result == 0)`我的更新语句之间插入数据。所以我会有重复的条目。

我的例子过于简单，但我的实际情况要复杂得多，但基本思想是一样的：我需要在插入之前从 Javacode 内部进行几次选择。

那么，如何避免这种情况（我对 db 端解决方案和 java 端解决方案感兴趣）？

PS数据库是Oracle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:26:10.763

我认为处理这种情况的最佳方法可能是在数据库级别。您可以使用如下查询：

```
insert into tbl2 values(xx) where not exists (select 1 from tbl1) 
```

所以你的查询可能会变成这样

```
int update = jdbcTemplate.update("insert into tbl2(val) values(?) where not exists (select 1 from tbl1)", "di" + UUID.randomUUID().toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:52:09.867

不太清楚你为什么要做你正在做的事情，但你可以先锁定桌子。

```
LOCK TABLE tbl IN SHARE MODE; 
```

记得提交；释放锁。

# android - 当应用程序在后台一段时间后，活动堆栈似乎被清除了

> ID：11479306
> 
> 赞同：1
> 
> 时间：2012-07-13T22:45:16.490
> 
> 标签：android, android-activity, android-lifecycle

我有一个具有以下流程的应用程序：

```
Loading activity -> activity 1 -> activity 2 
```

`finish()`在启动活动 1 后使用关闭加载活动的位置。

当单击主页按钮并在一段时间后（似乎是 30 分钟或更长时间）重新启动它时，我期待以下行为之一：

1.  活动仍然存在 - 从活动 2 继续。
2.  活动被终止 - 从加载活动重新启动。

但是，发生的情况是应用程序从`activity 1`. 我假设这意味着活动任务已被清除，因为如果未关闭加载活动，则应用程序会从那里启动（但我确实需要关闭它）。

这个假设是正确的还是背后有不同的解释？在这种情况下，为了让应用程序从加载活动中重新启动，可以做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:41:32.767

从加载活动启动活动 1 时，您可以尝试将 FLAG_ACTIVITY_NO_HISTORY 标志添加到意图。

```
 Intent intent = new Intent(this, A.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    startActivity(intent); 
```

一旦活动 1 被导航离开它就完成了。如果这不是适当的标志，还有许多其他标志可供选择，它们可以[操纵历史堆栈](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)。

# ios - 如何使视图的一部分可滚动？

> ID：11479308
> 
> 赞同：0
> 
> 时间：2012-07-13T22:45:21.113
> 
> 标签：ios, xcode, html, uiscrollview, scroll

这可能已经被问了很多，所以我更多地寻找可以研究这个的地方的方向，除非它是一个简单直接的答案。我想不出合适的术语来搜索它；我只是不断获得相同的标准`UIScrollView`信息。

我了解如何制作可滚动视图，但我找不到任何关于在我的视图中心制作一个 310 x 310 像素部分以使其可滚动的内容，例如网页中心的可滚动 div，因此它可以有一个在中心滚动的内容周围的漂亮图像边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:53:24.627

只需创建一个 UIScrollView 并将其框架设置为您想要的大小和位置，然后将其添加到另一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:52:57.693

您可以使用 的`addSubview`方法完成此操作`UIView`。

创建一个`UIImageView`跨越屏幕大小（或您希望它占用的任何空间）的空间。这将包含您所指的“图像边框”。假设该视图名为`backgroundImageView`。

然后创建你的`UIScrollView`; 假设它被称为`myScrollView`. 现在对于这一行：

```
[backgroundImageView addSubview:myScrollView]; 
```

这将添加`myScrollView`到`backgroundImageView`视图层次结构中。现在你设置`myScrollView`' 在 的坐标系中的位置`backgroundImageView`。所以要居中，这样做：

```
 [myScrollView setFrame:CGRectMake((backgroundImageView.frame.size.width - myScrollView.frame.size.width) / 2, (backgroundImageView.frame.size.height - myScrollView.frame.size.height) / 2, myScrollView.frame.size.width, myScrollView.frame.size.height)]; 
```

瞧，你完成了:)

# javascript - JS/Ajax：提交表单而不刷新页面或单击按钮

> ID：11479309
> 
> 赞同：4
> 
> 时间：2012-07-13T22:45:24.050
> 
> 标签：javascript, jquery, ajax

我正在尝试在没有按钮单击或页面刷新的情况下提交表单。提交表单后，我将通过 php.ini 回显输入字段中的值。问题是我添加了一个计时器，但根本没有做任何事情。一旦用户停止输入，我如何设置计时器给两秒钟（keyup）然后取值？[例子](http://webprolearner2346.zxq.net/registration-form/)

**JS**

```
<script>
$(function() {

var timer;

$(".submit").click(function() {

  $('submit').on('keyup', function() {

    var name = $("#name").val();

    var dataString = 'name='+ name;

            $.ajax({
            type: "POST",
            url: "index.php",
            data: dataString,
            success: function(result){
            /*$('.success').fadeIn(200).show();
            $('.error').fadeOut(200).hide();*/
            $('#special').append('<p>' +  $('#resultval', result).html() + '</p>');

                }

           });
            return false;
});

}, 2000;

});
</script> 
```

**PHP**

```
 <?php
 if($_POST){
     $url     = $_POST['name'];
     echo ('<b><span id="resultval">'.$url.'</span></b>');
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:13:11.917

[http://jsfiddle.net/earlonrails/pXA6U/2/](http://jsfiddle.net/earlonrails/pXA6U/2/)

```
$(function() {
 var timer = null; 
 var dataString;
 function submitForm(){
   alert("success");
   $.ajax({ type: "POST",
            url: "index.php",
            data: dataString,
            success: function(result){
              alert("success");
            }

   });
   return false;
 }
 $('#submit').on('keyup', function() {
    clearTimeout(timer);
    timer = setTimeout(submitForm, 2000);
    var name = $("#name").val();
    dataString = 'name='+ name;
 });

}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:59:37.667

我使用以下内容提供带有可视计时器的自动刷新页面。它做的比你需要的要多，但它可以被剥离成更简单的东西。

在页面加载时启动它

```
auto_refresh(); 
```

支持功能如下

```
/**
 * This function checks if the auto-refresh check box is checked and then refreshes the page.
 *
 *
 */
 function auto_refresh() {
    // ****************************************
    //           Countdown display
    // **************************************** 
    $("#countdown").progressbar({ value: 100 });
    check_refresh(120, 120);
    $("#autorefresh").click(function() {
            if ($(this).attr("checked") == "checked") {
                $("#countdown").progressbar("option", "disabled", false );
                $("#countdown").progressbar("option", "value", 100);
                check_refresh(120, 120);
            } 
        });
 } 
```

和...

```
/**
 * This functions sets the time interval used to auto-refresh the page.
 */
function check_refresh(countdownValue, secondsRemaining) {
    var autorefresh = $("#autorefresh");

    if ($(autorefresh).attr("checked") == "checked") {      
        setTimeout(function() {
            var value = Math.round(secondsRemaining / countdownValue * 100);
            // consoleDebug("Seconds remaining: " + secondsRemaining);
            secondsRemaining -= 10;
            $("#countdown").progressbar("option", "value", value);
            if (secondsRemaining < 0) {
                loadDashboard();  // <--- Launch whatever you want here.
                check_refresh(120, 120);
            } else {
                check_refresh(countdownValue, secondsRemaining);
            }
        }, 10000);
    } else {
        $("#countdown").progressbar({ disabled: true });
    }
} 
```

# xcode4 - 如何在 Xcode 中编写一个程序来检查是否存在特定的 iCal 日历并访问该日历以添加事件？

> ID：11479314
> 
> 赞同：0
> 
> 时间：2012-07-13T22:46:53.657
> 
> 标签：xcode4

我知道 EKEventStore 类具有返回事件存储日历对象数组的@property NSArray *calendars，但是当我只知道日历的标题时，我不知道如何访问该数组中的特定日历。我可以在网上找到的唯一示例是访问 defaultCalendarForNewEvents 的程序，但我想要的日历不是默认日历。我也不知道日历的唯一标识符，我只知道标题。我尝试使用 valueForKey 方法访问名为 BART 的日历，但我所做的绝对是错误的，有人可以帮忙吗？这是我尝试过的：

@interface BARTClass : NSObject {

```
EKEventStore    *eventStore;

EKCalendar      *bart

NSArray         *calendars; 
```

}

@property (nonatomic, 保留) EKEventStore *eventStore;

@property (nonatomic, 保留) NSArray *calendars;

@property（非原子，保留）EKCalendar *bart;

-（EKCalendar）getBartCalendar；

@结尾

...

@执行

@synthesize 日历、bart、eventStore；

-（EKCalendar）getBartCalendar {

```
[self setEventStore: [[EKEventStore alloc] init]];

[self setCalendars = [eventStore calendars]];

NSArray *titles = [calendars valueForKey:@"title"];

[self setBart:[titles valueForKey:@"BART"]]; 
```

...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:52:35.463

我想你已经接近目标了。

你可以这样做：

```
EKEventStore *eventStore = [[EKEventStore alloc]init];

EKCalendar *bart;

NSArray *myCals = [eventStore calendars];

for (int i=0; i < [myCalls count]; i++) {
    bart = [myCals objectAtIndex:i];
    if (bart.title isEqualToString:@"Bart"){
       break;
    }
    else {
      bart = nil;
    }
} 
```

如果日历“Bart”存在，您将在循环结束时获得它。

# php - file_put_contents php 权限

> ID：11479315
> 
> 赞同：2
> 
> 时间：2012-07-13T22:46:54.187
> 
> 标签：php, apache, file, permissions

这是关于我的系统配置以及 apache/php 如何受此影响的问题。当我转移到生产环境时，在我的开发服务器上运行的代码无法运行，这就是我将错误归结为的问题。我想在 php 中使用 file_put_contents 来简单地在我的系统上创建一个文件。这是我正在使用的非常简单的代码：

```
print file_put_contents("testfile.txt","this is my test")?"made file":"failed"; 
```

没有错误被抛出，但它总是打印“失败”。当我在普通目录中运行它时，不会生成任何文件，但是当我将它移动到具有 777 权限的目录时，它会生成文件*，但仍然会打印“失败”并且什么都不保存*。如果我将 php 文件本身更改为具有 777 权限，则没有任何变化。如果我将目标文件（testtext.txt）更改为具有 777 权限，则没有任何变化。

当我将 php 文件的所有者更改为与创建的 testfile.txt 相同时，没有任何变化。当我尝试相对路径与绝对路径时，没有任何变化。出于某种原因，我可以让 php 创建文件，但它始终为空，并且使用 file_put_contents 我无法写入任何内容。

创建的文件位于“www-data”的所有者和组中，如果有帮助，我将作为 root 用户。我该怎么做才能让它工作？我认为我的 php 版本正在使用 suhosin 扩展，如果这可能与它有任何关系（或者如果你认为有办法在 php 或 suhosin ini 文件中解决这个问题，我也可以这样做）。

在过去的几天里，我一直在寻找这个几个小时。

编辑：基于以下评论的更新。当我在 CLI 模式下运行它时，**它确实可以工作**，但是由于我需要通过 apache 运行它，我该如何使用这个事实？这是否告诉我们一些关于停止文件写入的位置或内容的信息？此外，file_put_contents 调用实际上返回“false”而不是零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:28:00.027

您必须为 apache 用户设置权限为 777。Apache 还需要能够“创建”新文件。我敢肯定，如果您尝试写入具有 777 权限的文件，它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:28:36.857

该函数返回写入文件的字节数，失败时返回 FALSE。

确保它`mydir`是可写的（由 apache 用户 - apache2 或 www-data）。要检查内容是否已写入文件，请使用 === 运算符：

```
$file = "mydir/testfile.txt";

$result = file_put_contents($file,"this is my test");

if ($result === false)
{
  echo "failed to write to $file";
}
else
{
  echo "successfully written $result bytes to $file";
} 
```

对于调试，我建议在 php 文件的顶部定义它：

```
error_reporting(-1);
ini_set('display_errors', true); 
```

# wpf - 在 WPF 窗口的构造函数中，InitializeComponent() 之前应该做什么，之后应该做什么？

> ID：11479318
> 
> 赞同：8
> 
> 时间：2012-07-13T22:47:22.800
> 
> 标签：wpf, coding-style

一般来说，我之前一直在初始化`Window`自身的属性，然后`InitializeComponent()`设置包含在其中的控件。但是，我并没有那么一致，我也没有真正注意到排序有问题。所以：

*   我（可能）在做一些可怕的事情吗？特别是之前设置子控件的属性有什么问题`InitializeComponent()`吗？
*   在这方面有什么好的风格？

编辑：由于我得到的前两个答案有点矛盾，让我更具体一点：

```
public Foo Foo {get; protected set}
public FooWindow (Foo foo)
{
    Foo = foo;
    this.Closing += FooWindow_Closing;
    Foo.Frobbed += Foo_Frobbed;

    InitializeComponent();

    this.DataContext = this;
    this.Title = Foo.Name() + " Window";

    FooListView.ItemSource = Foo.CalculateList();

    FocusManager.SetFocusedElement(this, FooListView);
} 
```

这是对的吗？我应该只做 MVVM 而我的`Window`构造函数中没有任何东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T23:12:35.077

通过在某些其他代码之后调用 InitializeComponents，您可能会冒着意外用 XAML 中设置的内容覆盖属性或使用未初始化对象的风险。通常，代码隐藏的优先级高于 XAML，因此我会将 InitializeComponents（也称为解析和加载 XAML）留在顶部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:55:35.657

在回答您的具体问题时：

> 我（可能）在做一些可怕的事情吗？特别是在 InitializeComponent() 之前设置子控件的属性有什么问题吗？

在您调用 InitializeComponents 之前，您的子控件可能在代码中不可用。这样做通常是不好的形式。

> 在这方面有什么好的风格？

这将是一个品味问题，但通常我会建议，如果您要利用 XAML 为您提供的分离，那么我会尽可能地采用它。如果您正在做与 UI 相关的逻辑操作，请尝试在 XAML 中进行。这与其说是 MVVM 的事情，不如说是表示与逻辑的分离。示例代码中的大部分内容都可以通过声明方式完成，即使只是通过 ValueConverters。

例如，如果 Foo 是一个 DependencyProperty，那么您也可以将它附加到 XAML 中并将回调添加为 ValueChanged 回调的一部分。同样，这不是 MVVM，但它是 WPF 的基础。

对于大多数其他事情，您实际上可能希望等到 OnLoaded 被调用，而不是在构造函数中进行工作。

希望有帮助，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T15:12:17.230

**在调用InitializeComponent()**之前，我通常会调用任何不需要 Visual Tree 的东西。

我的所有实现都使用 MVVM 模式，所以我更喜欢在 UI 加载到客户端之前实例化并填充我的 ViewModel。

如果你总是先加载**InitializeComponent()**，你会冒着创建一个糟糕的用户体验的风险，因为它会显示一个突然更新的未填充视图，而不是一个在它进入视图时填充的视图。

# mysql - 实体上的 ExecuteCommand

> ID：11479320
> 
> 赞同：0
> 
> 时间：2012-07-13T22:47:37.000
> 
> 标签：mysql, linq, entity, execute

```
protected void Button2_Click(object sender, EventArgs e)
{
    Response.Write(Execute("SELECT NOW()"));
}

public string Execute(string storedProcedureName)
{
    using (EntityConnection connection = (EntityConnection)new EGModel.EGEntity().Connection)
    {
        using (EntityCommand command = connection.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = storedProcedureName;
            connection.Open();
            return command.ExecuteScalar().ToString();
        }
    }
} 
```

我收到错误“查询语法无效。靠近第 1 行，第 13 列。”；我很好奇，为什么会出现这个错误？（Mysql实体连接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:04:38.343

```
 var A = new EGModel.EGEntity().Connection;

    var command = ((EntityConnection)(A)).StoreConnection.CreateCommand();
    command.CommandType = System.Data.CommandType.Text;
    command.CommandText = "SELECT NOW()";
    ((EntityConnection)(A)).StoreConnection.Open();
    string id = (string)command.ExecuteScalar(); 
```

@GTSouza 感谢您的评论，

# css - IE9 中的 CSS 额外空间问题

> ID：11479327
> 
> 赞同：-1
> 
> 时间：2012-07-13T22:49:08.710
> 
> 标签：css

我的网站是跨浏览器兼容的，但在 IE9 中它显示了导航和内容部分之间的额外空间。

你可以在[这里](http://gotskinswholesales.com/index.php?main_page=page&id=16)看到问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:04:15.563

您会得到很多空白，因为您使用的是 position:relative ，然后使用 clear="all" 标记。这会将您的所有内容推低到此之下。尝试使用绝对定位 (position:absolute;) 代替并使父容器 position:relative;

不过，我认为您在这里要担心的还有很多。您的编码是一团糟，并且很难查明错误（尽管我认为就是这样）。我建议把你所有的 CSS 放在一个单独的 style.css 样式表中，并考虑对 javascript 做同样的事情。

此外，您的脚本中有**161 个错误和****194 个警告**。（请访问[http://validator.w3.org/](http://validator.w3.org/)亲自查看）。这些错误会给你带来各种各样的问题，并且很难让所有东西都按照你的喜好进行布局（谷歌也会惩罚你的搜索引擎结果）。我知道有很多错误，但是通过并修复它们并不会那么糟糕，因为大多数都是重复的。您还将学习各种新事物:) 希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:09:57.367

造成空间的是`div`with `id="navBreadCrumb"`，因为它的上边距为`190px`. `div`边距与外部元素一起折叠并将with向下推`id="new_main"`。然后您使用相对定位使内容显示`90px`更进一步。

如果您删除边距和相对定位，您就可以摆脱`100px`空白空间。

# objective-c - NSRegularExpression 添加转义字符

> ID：11479333
> 
> 赞同：3
> 
> 时间：2012-07-13T22:49:29.180
> 
> 标签：objective-c, ios, regex

我正在尝试`[word]`用`\[word\]`using替换`NSRegularExpression`：

```
NSRegularExpression *metaRegex = [NSRegularExpression regularExpressionWithPattern:@"([\\[\\]])"
                                                                           options:0
                                                                             error:&metaRegexError];

NSString *escapedTarget = [metaRegex stringByReplacingMatchesInString:string
                                                              options:0
                                                                range:NSMakeRange(0, string.length)
                                                         withTemplate:@"\\$1"]; 
```

但是这个的输出是`$1word$1`。您会认为第一个字符`\`会转义第二个`\`字符，但它看起来像是在转义`$`字符...我如何告诉它转义`\`而不是转义`$`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:54:13.190

尝试：

```
@"\\\\$1" 
```

用于替换模板。基本上：`\\`将转义`\`字符串，所以它是`@"\$1"`当它被发送到正则表达式时。然后`\`转义`$`模板中的 ，导致您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:58:08.830

您实际上需要四个反斜杠，如下所示：

```
@"\\\\$1" 
```

为什么需要这个笨重的系统？嗯，这样想吧。该`\`字符用作 C 转义字符*和*正则表达式转义字符。所以，如果你创建一个只有一个反斜杠的表达式，你可能会得到一个错误，因为 NSString 本身会让你使用特殊字符`\$`。要转义斜线，您需要使用两个斜线，这将在最终的 NSString 数据中仅计算为一个。

但是，您确实需要将 NSString 本身中的两个反斜杠发送到正则表达式解析器，因此您需要转义字符串文字本身中的*两个*反斜杠。因此，`\\\\`解析为`\\`实际数据，然后正则表达式解析器将其折叠为单个文字`\`字符

# c++ - 复制对象时，带有 MSVC 2010 Debug 的 OpenMP 构建奇怪的错误

> ID：11479337
> 
> 赞同：11
> 
> 时间：2012-07-13T22:49:44.670
> 
> 标签：c++, visual-c++, openmp

我有一个相当复杂的程序，在 MSVC 2010 调试模式下使用 OpenMP 构建时会遇到奇怪的行为。我已经尽力构建了以下最小的工作示例（尽管它并不是最小的），它缩小了实际程序的结构。

```
#include <vector>
#include <cassert>

// A class take points to the whole collection and a position Only allow access
// to the elements at that posiiton. It provide read-only access to query some
// information about the whole collection
class Element
{
    public :

    Element (int i, std::vector<double> *src) : i_(i), src_(src) {}

    int i () const {return i_;}
    int size () const {return src_->size();}

    double src () const {return (*src_)[i_];}
    double &src () {return (*src_)[i_];}

    private :

    const int i_;
    std::vector<double> *const src_;
};

// A Base class for dispatch
template <typename Derived>
class Base
{
    protected :

    void eval (int dim, Element elem, double *res)
    {
        // Dispatch the call from Evaluation<Derived>
        eval_dispatch(dim, elem, res, &Derived::eval); // Point (2)
    }

    private :

    // Resolve to Derived non-static member eval(...)
    template <typename D>
    void eval_dispatch(int dim, Element elem, double *res,
            void (D::*) (int, Element, double *))
    {
#ifndef NDEBUG // Assert that this is a Derived object
        assert((dynamic_cast<Derived *>(this)));
#endif
        static_cast<Derived *>(this)->eval(dim, elem, res);
    }

    // Resolve to Derived static member eval(...)
    void eval_dispatch(int dim, Element elem, double *res,
            void (*) (int, Element, double *))
    {
        Derived::eval(dim, elem, res); // Point (3)
    }

    // Resolve to Base member eval(...), Derived has no this member but derived
    // from Base
    void eval_dispatch(int dim, Element elem, double *res,
            void (Base::*) (int, Element, double *))
    {
        // Default behavior: do nothing
    }
};

// A middle-man who provides the interface operator(), call Base::eval, and
// Base dispatch it to possible default behavior or Derived::eval
template <typename Derived>
class Evaluator : public Base<Derived>
{
    public :

    void operator() (int N , int dim, double *res)
    {
        std::vector<double> src(N);
        for (int i = 0; i < N; ++i)
            src[i] = i;

#pragma omp parallel for default(none) shared(N, dim, src, res)
        for (int i = 0; i < N; ++i) {
            assert(i < N);
            double *r = res + i * dim;
            Element elem(i, &src);
            assert(elem.i() == i); // Point (1)
            this->eval(dim, elem, r);
        }
    }
};

// Client code, who implements eval
class Implementation : public Evaluator<Implementation>
{
    public :

    static void eval (int dim, Element elem, double *r)
    {
        assert(elem.i() < elem.size()); // This is where the program fails Point (4)
        for (int d = 0; d != dim; ++d)
            r[d] = elem.src();
    }
};

int main ()
{
    const int N = 500000;
    const int Dim = 2;
    double *res = new double[N * Dim];
    Implementation impl;
    impl(N, Dim, res);
    delete [] res;

    return 0;
} 
```

真实程序没有`vector`etc。但是`Element`, `Base`,`Evaluator`和`Implementation`捕获了真实程序的基本结构。在调试模式下构建并运行调试器时，断言在`Point (4)`.

通过查看调用堆栈，这是调试信息的更多详细信息，

在进入`Point (1)`时，本地`i`具有价值`371152`，这很好。变量`elem`没有显示在框架中，这有点奇怪。但由于 at 的断言`Point (1)`没有失败，我想这很好。

然后，疯狂的事情发生了。`eval`对by的调用`Evaluator`解析为它的基类，因此`Point (2)`被执行。此时，调试器显示`elem`has ，在将其**通过值**传递给之前`i_ = 499999`不再`i`用于创建。下一点，这一次，它解析为has ，它超出了范围，这是调用被定向到并且断言失败时的值。`elem``Evaluator`**`Base::eval``Point (3)``elem``i_ = 501682``Point (4)`**

 **看起来每当`Element`对象按值传递时，其成员的值都会更改。多次重新运行程序，会发生类似的行为，但并不总是可以重现。在实际程序中，这个类被设计成一个迭代器，它迭代一个粒子集合。虽然它迭代的东西不像容器那样精确。但无论如何，关键是它足够小，可以有效地按值传递。因此，客户端代码知道它有自己的副本`Element`而不是一些引用或指针，并且只要他坚持`Element`只提供写访问的接口，就不需要担心线程安全（太多）到整个集合的单个位置。

我用 GCC 和 Intel ICPC 尝试了相同的程序。没有什么意外发生。在实际程序中，产生正确的结果。

我是否在某处错误地使用了 OpenMP？我认为`elem`大约创建的`Point (1)`应该是循环体的本地。另外，在整个程序中，没有产生比`N`产生更大的价值，那么那些新的价值是从哪里来的呢？

**编辑**

我更仔细地查看了调试器，它显示虽然在通过值传递`elem.i_`时发生了更改，但指针并没有随之改变。按值传递后具有相同的值（内存地址）`elem``elem.src_`

**编辑：编译器标志**

我使用 CMake 生成 MSVC 解决方案。我不得不承认我不知道如何使用 MSVC 或 Windows。我使用它的唯一原因是我知道很多人都在使用它，所以我想针对它测试我的库以解决任何问题。

CMake生成的项目，使用`Visual Studio 10 Win64`目标，编译器标志似乎是 `/DWIN32 /D_WINDOWS /W3 /Zm1000 /EHsc /GR /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1`这里是在Property Pages-C/C++-Command Line中找到的命令行 `/Zi /nologo /W3 /WX- /Od /Ob0 /D "WIN32" /D "_WINDOWS" /D "_DEBUG" /D "CMAKE_INTDIR=\"Debug\"" /D "_MBCS" /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /openmp /Fp"TestOMP.dir\Debug\TestOMP.pch" /Fa"Debug" /Fo"TestOMP.dir\Debug\" /Fd"C:/Users/Yan Zhou/Dropbox/Build/TestOMP/build/Debug/TestOMP.pdb" /Gd /TP /errorReport:queue`

这里有什么可疑之处吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T18:21:25.950

显然，MSVC 中的 64 位 OpenMP 实现与代码不兼容，未经优化编译。

为了调试您的问题，我修改了您的代码以`threadprivate`在调用之前将迭代编号保存到全局变量中`this->eval()`，然后在开头添加一个检查`Implementation::eval()`以查看保存的迭代编号是否不同于`elem.i_`：

```
static int _iter;
#pragma omp threadprivate(_iter)

...
#pragma omp parallel for default(none) shared(N, dim, src, res)
    for (int i = 0; i < N; ++i) {
        assert(i < N);
        double *r = res + i * dim;
        Element elem(i, &src);
        assert(elem.i() == i); // Point (1)
        _iter = i;             // Save the iteration number
        this->eval(dim, elem, r);
    }
}
...

...
static void eval (int dim, Element elem, double *r)
{
    // Check for difference
    if (elem.i() != _iter)
        printf("[%d] _iter=%x != %x\n", omp_get_thread_num(), _iter, elem.i());
    assert(elem.i() < elem.size()); // This is where the program fails Point (4)
    for (int d = 0; d != dim; ++d)
        r[d] = elem.src();
}
... 
```

似乎随机的值`elem.i_`变成了不同线程中传递给 的值的不良混合`void eval_dispatch(int dim, Element elem, double *res, void (*) (int, Element, double *))`。这种情况在每次运行中都会发生数百次，但只有在值`elem.i_`变得足够大以触发断言时才会看到它。有时会发生混合值没有超过容器的大小，然后代码在没有断言的情况下完成执行。此外，您在断言之后的调试会话中看到的是 VS 调试器无法正确处理多线程代码:)

*这只发生在未优化的 64 位模式下*。它不会发生在 32 位代码中（调试和发布）。*除非优化被禁用，否则*它也不会在 64 位版本代码中发生。`this->eval()`如果将调用放在关键部分中，也不会发生这种情况：

```
#pragma omp parallel for default(none) shared(N, dim, src, res)
    for (int i = 0; i < N; ++i) {
        ...
#pragma omp critical
        this->eval(dim, elem, r);
    }
} 
```

但是这样做会取消 OpenMP 的好处。这表明调用链下游的某些事情是以不安全的方式执行的。我检查了汇编代码，但找不到确切的原因。我真的很困惑，因为 MSVC`Element`使用简单的按位复制（甚至是内联）实现了类的隐式复制构造函数，并且所有操作都在堆栈上完成。

这让我想起了这样一个事实：Sun（现在是 Oracle）的编译器坚持认为，如果启用 OpenMP 支持，它应该提高优化级别。不幸的是`/openmp`，MSDN 中的选项文档没有说明可能来自“错误”优化级别的可能相互引用。这也可能是一个错误。如果可以访问，我应该使用另一个版本的 VS 进行测试。

**编辑：**我按照承诺深入挖掘并在 Intel Parallel Inspector 2011 中运行代码。它按预期发现了一种数据竞争模式。显然当这一行被执行时：

```
this->eval(dim, elem, r); 
```

根据 Windows x64 ABI 的要求，创建一个临时副本`elem`并按地址传递给该`eval()`方法。奇怪的事情来了：这个临时副本的位置并不像人们期望的那样在实现并行区域（MSVC 编译器顺便调用它）的 funclet 的堆栈上，`Evaluator$omp$1<Implementation>::operator()`而是它的地址被作为第一个参数函数。由于这个参数在所有线程中都是相同的，这意味着进一步传递给的临时副本`this->eval()`实际上在所有线程之间共享，这很荒谬，但仍然是正确的，因为可以很容易地观察到：

```
...
void eval (int dim, Element elem, double *res)
{
    printf("[%d] In Base::eval()    &elem = %p\n", omp_get_thread_num(), &elem);
    // Dispatch the call from Evaluation<Derived>
    eval_dispatch(dim, elem, res, &Derived::eval); // Point (2)
}
...

...
#pragma omp parallel for default(none) shared(N, dim, src, res)
    for (int i = 0; i < N; ++i) {
        ...
        Element elem(i, &src);
        ...
        printf("[%d] In parallel region &elem = %p\n", omp_get_thread_num(), &elem);
        this->eval(dim, elem, r);
    }
}
... 
```

运行此代码会产生类似于以下内容的输出：

```
[0] Parallel region &elem = 000000000030F348 (a)
[0] Base::eval()    &elem = 000000000030F630
[0] Parallel region &elem = 000000000030F348 (a)
[0] Base::eval()    &elem = 000000000030F630
[1] Parallel region &elem = 000000000292F9B8 (b)
[1] Base::eval()    &elem = 000000000030F630 <---- !!
[1] Parallel region &elem = 000000000292F9B8 (b)
[1] Base::eval()    &elem = 000000000030F630 <---- !! 
```

正如预期的那样`elem`，在执行并行区域（点`(a)`和`(b)`）的每个线程中都有不同的地址。但请注意，传递给的临时副本`Base::eval()`在每个线程中具有相同的地址。我相信这是一个编译器错误，它使隐式复制构造函数`Element`使用*共享变量*。这可以通过查看传递给的地址来轻松验证——它位于 的地址和`Base::eval()`的地址之间，即在共享变量块中。对程序集源的进一步检查表明，临时位置的地址确实作为参数传递给实现 OpenMP 分叉/连接模型的分叉部分的函数。`N``src``_vcomp_fork()``vcomp100.dll`

由于基本上没有编译器选项可以影响此行为，除了启用导致 , 和所有内容被内联的优化`Base::eval()`，`Base::eval_dispatch()`因此`Implementation::eval()`不会制作临时副本`elem`，我发现的唯一解决方法是：

1) 将`Element elem`参数设为`Base::eval()`引用：

```
void eval (int dim, Element& elem, double *res)
{
    eval_dispatch(dim, elem, res, &Derived::eval); // Point (2)
} 
```

这确保了`elem`实现并行区域的 funclet 堆栈中的本地副本`Evaluator<Implementation>::operator()`被传递，而不是共享的临时副本。这将作为另一个临时副本进一步按值传递，`Base::eval_dispatch()`但它保留其正确值，因为这个新的临时副本在堆栈中`Base::eval()`而不是在共享变量块中。

2) 提供显式复制构造函数`Element`：

```
Element (const Element& e) : i_(e.i_), src_(e.src_) {} 
```

我建议您使用显式复制构造函数，因为它不需要对源代码进行进一步更改。

显然这种行为也存在于 MSVS 2008 中。我必须检查它是否也存在于 MSVS 2012 中，并可能向 MS 提交错误报告。

此错误不会在 32 位代码中显示，因为每个通过值对象传递的整个值都被推送到调用堆栈上，而不仅仅是指向它的指针。**

# parsing - 如何在scala中解析没有空格的嵌入关键字

> ID：11479338
> 
> 赞同：1
> 
> 时间：2012-07-13T22:49:53.677
> 
> 标签：parsing, scala

我正在尝试通过一些没有分隔符（如空格）的关键字来拆分输入。

```
object MyParser extends JavaTokenParsers {
  def expr = (text | keyword).+
  def text = ".+".r ^^ ("'"+_+"'")
  def keyword = "ID".r ^^ ("["+_+"]")
}

val p = MyParser
p.parse(p.expr, "fooIDbar") match {
  case p.Success(r, _) => r foreach print
  case x => println(x.toString)
} 
```

这输出如下。

```
>> 'hogeIDfuga' 
```

但我真正想做的就是这样。

```
>> 'hoge'[ID]'fuga' 
```

它似乎`text`吞噬了所有的角色。我试图表达 [`text`不包含`keyword`]，但我不能。如何在正则表达式或 Scala 解析器中表达它？或任何其他解决方案？

我看过一些帖子[1](https://stackoverflow.com/questions/3770569/how-to-combine-regexp-and-keywords-in-scala-parser-combinators) [2](https://stackoverflow.com/questions/1528333/parser-combinator-how-to-terminate-repetition-on-keyword)，但在我的情况下它们不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:31:32.767

First, `keyword` is a constant word so you don't need a regex, a plain string is enough. Second, a `text` is some string that doesn't contain a `keyword`, not any string. Try this:

```
import util.parsing.combinator._

object MyParser extends JavaTokenParsers {
  def expr = (text | keyword).+
  def text = """((?!ID).)+""".r ^^ ("'"+_+"'")
  def keyword = "ID" ^^ ("["+_+"]")
}

val p = MyParser
p.parse(p.expr, "fooIDbar") match {
  case p.Success(r, _) => r foreach print
  case x => println(x.toString)
} 
```

As for the trick of writing a regex that `not matching` something, read [this](https://stackoverflow.com/a/406408/448141).

# java - interviewstreet.com - 字符串相似度

> ID：11479339
> 
> 赞同：7
> 
> 时间：2012-07-13T22:49:54.870
> 
> 标签：java

我正在尝试解决 interviewstreet.com 上的字符串相似性问题。我的代码适用于 7/10 案例（并且超过了其他 3 个案例的时间限制）。

这是我的代码 -

```
public class Solution {

    public static void main(String[] args) {

        Scanner user_input = new Scanner(System.in);

        String v1 = user_input.next();
        int number_cases = Integer.parseInt(v1);

        String[] cases = new String[number_cases];
        for(int i=0;i<number_cases;i++)
            cases[i] = user_input.next();

        for(int k=0;k<number_cases;k++){
            int similarity = solve(cases[k]);   
            System.out.println(similarity);
        }
    }

    static int solve(String sample){

        int len=sample.length();
        int sim=0;
        for(int i=0;i<len;i++){
            for(int j=i;j<len;j++){
                if(sample.charAt(j-i)==sample.charAt(j))
                    sim++;
                else
                    break;
            }
        }
        return sim;
    }
} 
```

问题来了——

对于两个字符串 A 和 B，我们将字符串的相似度定义为两个字符串共有的最长前缀的长度。例如，字符串“abc”和“abd”的相似度为2，而字符串“aaa”和“aaab”的相似度为3。

计算字符串 S 与其每个后缀的相似度总和。

**输入：**
第一行包含测试用例 T 的数量。接下来的 T 行中的每一行都包含一个字符串。

**输出：**
输出包含对应测试用例答案的 T 行。

**约束：**
1 <= T <= 10
每个字符串的长度最多为 100000，并且只包含小写字符。

**样本输入：**
2
ababaa
aa

**样本输出：**
11
3

**解释：**
对于第一种情况，字符串的后缀是“ababaa”、“babaa”、“abaa”、“baa”、“aa”和“a”。这些字符串中的每一个与字符串“ababaa”的相似度分别为 6,0,3,0,1,1。因此答案是 6 + 0 + 3 + 0 + 1 + 1 = 11。

对于第二种情况，答案是 2 + 1 = 3。

如何提高代码的运行速度。由于该网站没有提供它使用的测试用例列表，因此变得更加困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:52:30.470

我使用 char[] 而不是字符串。它将运行时间从 5.3 秒减少到 4.7 秒，并且对于测试用例，它确实有效。这是代码 -

```
static int solve(String sample){    
        int len=sample.length();
        char[] letters = sample.toCharArray();
        int sim=0;
        for(int i=0;i<len;i++){
            for(int j=i;j<len;j++){
                if(letters[j-i]==letters[j])
                    sim++;
                else
                    break;
            }
        }
    return sim;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T12:09:33.377

使用了不同的算法。运行 n 次循环，其中 n 等于主字符串的长度。对于每个循环，生成从第 i 个字符串开始的字符串的所有后缀，并将其与第二个字符串匹配。当你发现不匹配的字符打破循环时，将 j 的值添加到计数器整数 c。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

class Solution {

    public static void main(String args[]) throws Exception {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    int T = Integer.parseInt(in.readLine());
    for (int i = 0; i < T; i++) {
        String line = in.readLine();
        System.out.println(count(line));
    }
    }

    private static int count(String input) {
    int c = 0, j;
    char[] array = input.toCharArray();
    int n = array.length;
    for (int i = 0; i < n; i++) {
        for (j = 0; j < n - i && i + j < n; j++)
        if (array[i + j] != array[j])
            break;
        c+=j;
    }
    return c;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-21T13:11:15.920

我花了一些时间来解决这个问题，这是我的代码示例（它适用于我，并通过所有测试用例）：

```
static long stringSimilarity(String a) {
        int len=a.length();
        char[] letters = a.toCharArray();
        char localChar = letters[0];
        long sim=0;
        int sameCharsRow = 0;
        boolean isFirstTime = true;
        for(int i=0;i<len;i++){
            if (localChar == letters[i]) {
                for(int j = i + sameCharsRow;j<len;j++){
                    if (isFirstTime && letters[j] == localChar) {
                        sameCharsRow++;
                    } else {
                        isFirstTime = false;
                    }
                    if(letters[j-i]==letters[j])
                        sim++;
                    else
                        break;
                }
                if (sameCharsRow > 0) {
                    sameCharsRow--;
                    sim += sameCharsRow;
                }
                isFirstTime = true;
            }
        }
        return sim;
} 
```

关键是我们需要对相同内容的字符串进行加速，然后我们在测试用例 10 和 11 下会有更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T23:07:43.140

使用样本字符串的长度进行初始化`sim`，并以 1 开始外循环，因为我们现在提前将样本字符串与其自身的比较将其自己的长度值添加到结果中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T20:12:49.163

```
import java.util.Scanner;

public class StringSimilarity 
{
public static void main(String args[])
 {
  Scanner user_input = new Scanner(System.in);
  int count = Integer.parseInt(user_input.next());
  char[] nextLine = user_input.next().toCharArray();
    try 
     {
       while(nextLine!= null )
       {
  int length = nextLine.length;
  int suffixCount =length;
  for(int i=1;i<length;i++)
  {
          int j =0;
          int k=i;
          for(;k<length && nextLine[k++] == nextLine[j++];  suffixCount++);
  }
       System.out.println(suffixCount);
      if(--count < 0)
      {
      System.exit(0);
      }
    nextLine = user_input.next().toCharArray();
     }
   }
   catch (Exception e) 
   {
   // TODO Auto-generated catch block
   e.printStackTrace();
   }
  }
} 
```

# c++ - 将扫描码转换为 ASCII

> ID：11479340
> 
> 赞同：1
> 
> 时间：2012-07-13T22:50:02.197
> 
> 标签：c++, text-editor, allegro5

我正在用 C++ 实现我自己的文本编辑器。它会……好的。;P

我需要一种将键码（特别是 Allegro，他们称之为扫描码）转换为 ASCII 字符的方法。我可以轻松地完成 AZ，并且将它们转换为 az 也很容易。我目前所做的是在 Allegro 中使用一个函数，该函数从扫描码 (al_keycode_to_name) 中返回一个名称，这意味着如果按下的键是 AZ，它将返回“A”到“Z”。这很容易，但我不能简单地阅读特殊字符，如“，”，“;” 等等，这就是我遇到困难的地方。

有没有办法自动做到这一点？也许是一个这样做的图书馆？真正的诀窍是考虑不同的布局。

这是我到目前为止所拥有的，以防万一有人感兴趣。InputState 类基本上是 Allegro 输入状态的副本，具有附加功能（例如 keyDown、keyUp、keyPress）：

```
 void AllegroInput::TextInput(const InputState &inputState, int &currentCharacter, int &currentRow, std::string &textString)
    {
        static int keyTimer = 0;
        static const int KEY_TIMER_LIMIT = 15;
        for (int i = 0; i < 255; i++)
        {
            if (inputState.key[i].keyDown)
            {
                keyTimer++;
            }
            if (inputState.key[i].keyPress)
            {
                keyTimer = 0;
            }

            if ((inputState.key[i].keyPress) || ((inputState.key[i].keyDown) && (keyTimer >= KEY_TIMER_LIMIT)))
            {
                std::string ASCII = al_keycode_to_name(i);

                if ((ASCII.c_str()[0] >= 32) && (ASCII.c_str()[0] <= 126) && (ASCII.length() == 1))
                {
                    textString = textString.substr(0, currentCharacter) + ASCII + textString.substr(currentCharacter, textString.length());
                    currentCharacter++;
                }
                else 
                {
                    switch(i)
                    {
                        case ALLEGRO_KEY_DELETE:
                            if (currentCharacter >= 0) 
                            {
                                textString.erase(currentCharacter, 1);
                            }
                            break;

                        case ALLEGRO_KEY_BACKSPACE:
                            if (currentCharacter > 0) 
                            {
                                currentCharacter--;
                                textString.erase(currentCharacter, 1);
                            }
                            break;

                        case ALLEGRO_KEY_RIGHT:
                            if (currentCharacter < textString.length())
                            {
                                currentCharacter++;
                            }
                            break;

                        case ALLEGRO_KEY_LEFT:
                            if (currentCharacter > 0)
                            {
                                currentCharacter--;
                            }
                            break;
                        case ALLEGRO_KEY_SPACE:
                            if (currentCharacter > 0)
                            {

                                textString = textString.substr(0, currentCharacter) + " " + textString.substr(currentCharacter, textString.length());
                                currentCharacter++;
                            }
                            break;

                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:32:00.360

您应该使用`ALLEGRO_EVENT_KEY_CHAR`带有`event.keyboard.unichar`值的事件来读取文本输入。`ALLEGRO_EVENT_KEY_DOWN`并`ALLEGRO_EVENT_KEY_UP`对应于被按下的物理键。它们与可打印字符之间没有 1:1 的对应关系。

假设使用死键将两个键转换`e'`为`é`. 您将获得两个用于`e`and的按键事件`'`（并且对于捕获正确的输入都没有用），但一个按键 char 事件带有`é`. 或者相反，也许有人映射`F4`到一个释放整段文本的宏。在这种情况下，您将有多个字符来按下一个键。

或者一个简单的测试：如果你按住一个键五秒钟，你会得到一个`ALLEGRO_EVENT_KEY_DOWN`但多个`ALLEGRO_EVENT_KEY_CHAR`，因为操作系统的键盘驱动程序发送重复事件。

您可以使用`ALLEGRO_USTR`这些 un​​icode 字符串轻松存储。

```
ALLEGRO_USTR *input = al_ustr_new("");

// in the event loop
al_ustr_append_chr(input, event.keyboard.unichar); 
```

如果按下退格键等，还有删除字符的方法。您可以直接通过字体插件使用 ustr 数据类型`al_draw_ustr(font, color, x, y, flags, input)`，或者您可以使用`al_cstr(input)`获取指向 UTF-8 字符串的只读指针。

# mysql - Rails left join on two keys 不返回连接字段

> ID：11479341
> 
> 赞同：0
> 
> 时间：2012-07-13T22:50:08.430
> 
> 标签：mysql, ruby-on-rails, left-join

我有两个表事件和作业

```
events                       assignments
=====                        ============
sport_id                     sport_id
home_school_id               school_id
name                         division_id 
```

我正在尝试选择事件并像这样加入任务：

```
joins = "LEFT JOIN assignments sa on events.sport_id = sa.sport_id 
         AND events.home_school_id = sa.school_id"
events = Event.find(:all, :joins => joins) 
```

问题是这不会返回除法_id。为什么不 ？是因为没有协会吗？

我不应该做`events.first.division_id`吗？我已经在 mysql 中尝试过，它工作正常。

# 编辑

我的事件模型关联

```
has_many :assignments,
  :primary_key => :sport_id,
  :foreign_key => :sport_id,
  :finder_sql =>
      'SELECT sa.* ' +
      'FROM events e, assignments sa ' +
      'WHERE e.sport_id = sa.sport_id AND e.home_school_id = sa.school_id ' +
      'ORDER BY e.event_date' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:26:17.880

你应该试试：

```
events = Event.find(:all, :include => [:assignments]) 
```

然后得到里面的除法：

```
events.first.assignment.division_id 
```

这假设您告诉事件是 has_many :assignments

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:54:23.390

我最终使用了`composite_primary_keys`gem： [https ://github.com/drnic/composite_primary_keys](https://github.com/drnic/composite_primary_keys)

这允许您拥有多个外键。之后我只是做了一个包含（就像GrantG的回答）。最后，我使用 rails 的 group by 函数将另一个表中的数据放入哈希中：

```
divisions_hash = events.group_by{|item| item.assignment.division_id} 
```

据我所知，我最初想做的事情（在每条记录的活动记录结果中加入其他表属性）现在在 Rails 中是不可能的。

# magento - Magento 产品页面

> ID：11479343
> 
> 赞同：0
> 
> 时间：2012-07-13T22:50:30.550
> 
> 标签：magento, styles

我究竟可以在哪里修改产品页面上按钮之类的样式？

我遇到的具体问题是添加到购物车按钮继承了黑色字体，因此黑色背景难以辨认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:39:39.870

对于每个样式修改，您可以参考您的 skin/frontend/package/theme 文件夹的 style.css。使用带有 firefox 的 firebug 插件来检查任何特定对象的行号和所需的样式。

关于您的添加到购物车按钮：您可以为按钮标签内的 span 元素提供颜色背景。

希望有帮助。

# android - 在 Android 上使用“dumpsys meminfo”时，“PAGECACHE_OVERFLOW”是什么意思？

> ID：11479344
> 
> 赞同：2
> 
> 时间：2012-07-13T22:50:50.887
> 
> 标签：android

我正在探索我的应用程序无法在其 sqlite 数据库中存储数据的问题。当我查看我的应用程序的“dumpsys meminfo”结果时，我发现了以下内容：

```
SQL

heap: 265

MEMORY_USED: 265

PAGECACHE_OVERFLOW: 177

MALLOC_SIZE: 50 
```

是什么`PAGECACHE_OVERFLOW`意思？如果不好，有什么建议可以避免吗？

# javascript - 编辑“tweet this”按钮以仅发布部分页面标题

> ID：11479355
> 
> 赞同：1
> 
> 时间：2012-07-13T22:51:41.207
> 
> 标签：javascript, twitter, share, page-title

我的博客将所有页面标题格式化为：“文章标题 | Slacktory | 这似乎是合法的。”

目前，Twitter 的官方“tweet this”按钮在任何单个帖子页面上都会格式化一条推文以包含整个标题。

如何编辑代码以省略“ | Slacktory | That似乎是合法的。” 部分，只留下唯一的页面标题？

[如果Twitter 的推文按钮文档](https://dev.twitter.com/docs/tweet-button)中有任何相关信息，我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:54:01.610

只需将`data-text`属性设置`<a>`为您的标题。

```
<a href="http://twitter.com/share" data-text="Article Title">Tweet</a> 
```

# java - 为什么 GridBagLayout 锚点不适用于多个按钮？

> ID：11479356
> 
> 赞同：1
> 
> 时间：2012-07-13T22:51:51.353
> 
> 标签：java, swing, anchor, gridbaglayout

我试图将两个按钮堆叠在一起并将它们锚定到面板的顶部，但第二个按钮留在面板的中心。

在此代码中，我创建了一个拆分窗格，然后向其中添加了两个面板。一个面板包含按钮（我感兴趣的面板），另一个包含一个文本字段。这些按钮使一些文本出现在文本字段中。

我想弄清楚 GridBagLayout 参数的哪个正确组合将允许我将两个按钮放在一起（中间没有间隙）并将它们锚定到面板的顶部。我用 weighting 和 gridy 参数尝试了一些不同的东西，但无济于事。

提前感谢您的时间和回复。

```
package gridbagtest;

import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class GridBagTest
{
    public static void main(String[] args)
    {
        JFrame gridTest = new JFrame("Grid Bag Layout Test");

        JSplitPane splitPaneHorizontal = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);

        final JTextField blah = new JTextField(30);
        JPanel textPane = new JPanel();
        textPane.add(blah);

        JPanel buttonPane = new JPanel();
        buttonPane.setBackground(Color.WHITE);
        buttonPane.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.HORIZONTAL;
        c.anchor = GridBagConstraints.FIRST_LINE_START;
        c.gridx = 0;
//      c.gridy = GridBagConstraints.RELATIVE;
        c.gridy = 0;
        c.weightx = 1;
        c.weighty = 1;

        JButton flightPlanButton = new JButton("First Button");

        flightPlanButton.addActionListener(new ActionListener() 
        {
            public void actionPerformed(ActionEvent e) 
            {   blah.setText("First Button pushed");    }
         });

        buttonPane.add(flightPlanButton, c);

        JButton powerButton = new JButton("Second Button");
        powerButton.addActionListener(new ActionListener()                            
        {
            public void actionPerformed(ActionEvent e) 
            {   blah.setText("Second Button pushed");   }
        });

        c.gridy = 1;
        buttonPane.add(powerButton, c);

        splitPaneHorizontal.setTopComponent(new JScrollPane(buttonPane));
        splitPaneHorizontal.setBottomComponent(textPane);   

        gridTest.add(splitPaneHorizontal);
        gridTest.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gridTest.pack();
        gridTest.setSize(600,800);
        gridTest.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:56:04.137

我认为一个问题是您没有在按钮下方添加任何内容来填充空白空间。有很多方法可以解决这个问题。一种是完全避免使用 GridBagLayout，将 JButton 放入使用 BoxLayout 的 JPanel 中，然后将该 JPanel 放入另一个在 BorderLayout.PAGE_START（或 NORTH）位置使用 BorderLayout 的 JPanel 中。另一个，我将展示你是否将按钮的重量设置为 0，然后添加另一个组件，例如空 JLabel 或者在这里我使用 box 类中的胶水，给它一个合适的重量，合适的高度，比如说剩余，看看会发生什么：

```
 JPanel buttonPane = new JPanel();
  buttonPane.setBackground(Color.WHITE);
  buttonPane.setLayout(new GridBagLayout());
  GridBagConstraints c = new GridBagConstraints();
  c.fill = GridBagConstraints.HORIZONTAL;
  c.anchor = GridBagConstraints.FIRST_LINE_START;
  c.gridx = 0;
  c.gridy = 0;
  c.weightx = 1;
  c.weighty = 0;

  JButton flightPlanButton = new JButton("First Button");

  flightPlanButton.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent e) {
        blah.setText("First Button pushed");
     }
  });

  buttonPane.add(flightPlanButton, c);

  JButton powerButton = new JButton("Second Button");

  c.gridy = 1;
  buttonPane.add(powerButton, c);

  c.gridy = 2;
  c.fill = GridBagConstraints.BOTH;
  c.anchor = GridBagConstraints.LINE_END;
  c.weighty = 100.0;
  c.gridheight = GridBagConstraints.REMAINDER;
  buttonPane.add(Box.createGlue(), c); 
```

另外，我相信 Devon_C_Miller 所说的，如果你正在改变字段，你需要创建一个新的 GridBagConstraint 是不正确的，事实上 Oracle 在它自己的 GridBagLayout API 中挑战了这一点。

Devon_C_Miller 补充一点：可以肯定的是，我检查了 GridBagLayout 源代码，发现该类将这些信息存储在一个`HashTable<Component, GridBagConstraints>`名为*comptable*的变量中，并且在将`setConstraints(...)`信息放置在该表中的方法中，首先*克隆*了 GridBagConstraints 对象在将其添加到表之前，完全证明不需要创建新的 GridBagConstraints 对象（尽管这样做通常是一种很好的编程习惯，但出于其他原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:39:49.817

如果您添加一个新的 GridBagConstraints 对象并将其用于添加第二个按钮，则可以修复您的代码。

```
        GridBagConstraints d = 新的 GridBagConstraints();
        d.fill = GridBagConstraints.HORIZONTAL;
        d.gridx = 0;
        d.gridy = 0;
        d.weightx = 0;
        d.weighty = 0;

```

然后在你的添加中使用它。

```
        buttonPane.add(flightPlanButton, d);

```

我运行了这段代码，它像你想要的那样堆叠了按钮。

# php - 如果出现 SMTP 421 错误怎么办？

> ID：11479366
> 
> 赞同：1
> 
> 时间：2012-07-13T22:52:57.380
> 
> 标签：php, smtp, gmail, pear

我有一些帮助发送电子邮件的 PHP 代码。它的工作方式是有一个唯一密钥列表，每个密钥都必须发送到不同的电子邮件地址。有时我们需要能够一次发送 1000 个这样的密钥，因此需要发送 1000 封电子邮件。

我将[这篇文章](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)中的 Pear Mail SMTP 代码与 gmail 一起使用。仅发送少量密钥时效果很好。但是，当我尝试发送许多密钥（超过 100 个）时，我经常会收到此错误：

![在此处输入图像描述](../Images/c3ea41976bc0a6b0418b9e8e58bc7cc6.png)

根据我的阅读，这意味着无论出于何种原因，SMTP 服务器现在都没有接收电子邮件，并且拒绝传输，建议稍后再试。我不太确定要在这里做什么来处理这个问题。我应该让脚本暂停几秒钟然后再试一次吗？错误是否意味着不同的东西？我是什么做的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T23:04:01.757

不要将 Gmail 用于群发邮件。这是个人电子邮件服务，而不是批量邮件。

有大量的商业批量邮件服务可用。这里有几个；还有其他人。

*   [发送网格](http://sendgrid.com/)
*   [邮筒](http://www.mailgun.com/)
*   [Amazon SES](http://aws.amazon.com/ses/)（简单电子邮件服务）
*   [邮戳](http://postmarkapp.com/)
*   [套接字实验室](http://socketlabs.com/)
*   [邮递](http://www.mailjet.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:58:45.207

分批发送 50 个密钥，每批之间的时间间隔很小。该错误意味着您试图同时打开太多的 SMTP 连接。

# delphi - Delphi中的数据库用户名和密码？

> ID：11479370
> 
> 赞同：3
> 
> 时间：2012-07-13T22:53:25.723
> 
> 标签：delphi, delphi-7

我想在 Delphi 中创建一种登录窗口。不幸的是，我无法让它匹配用户名和密码。

我有一个基本的 .mdb 数据库，带有一个用户表。在此表中，有一个用户名和密码。我希望 Delphi 检查数据库中的用户名和密码，如果它与编辑框中的用户名和密码匹配，它会转到下一个表单或显示一条消息，否则它什么也不做。当我输入数据库的第一行，用户名和密码值时，我得到了成功，但是第二行，什么都没有。我觉得我需要一种方法让它移动到第二行值并检查这些值等等。数据库中目前也没有任何关系。

这是我的数据访问布局：ADOConnection -> ADOTable -> DataSource

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:47:28.303

根据您的猜测，一种解决方案可以是逐条移动记录以检查每个记录。例子：

```
function MatchPass(Table: TADOTable; const Name, Pass: string): Boolean;
begin
  Result := False;
  Table.First;
  while not Table.Eof do begin
    if Table.FieldByName('Username').AsString = Name then begin
      Result := Table.FieldByName('Password').AsString = Pass;
      Exit;
    end;
    Table.Next;
  end;
end; 
```

可以这样称呼：

```
 if MatchPass(ADOTable1, Edit1.Text, Edit2.Text) then
    .. 
```

另一种解决方案是让 ADOTable 搜索相应的记录：

```
function MatchPass(Table: TADOTable; const Name, Pass: string): Boolean;
begin
  Result := Table.Locate('Username;Password', VarArrayOf([Name, Pass]), []);
end; 
```

# matlab - 确定/保存文本在matlab中的位置

> ID：11479371
> 
> 赞同：0
> 
> 时间：2012-07-13T22:53:30.960
> 
> 标签：matlab, plot, textlabel

我使用 绘制了几个点`scatter`，然后使用`text`. 这些标签的位置与点的位置+一些偏移量相同。其中一些文本标签相互重叠，因此我以交互方式移动它们（使用鼠标）。我可以使用属性编辑器单独检查每个文本的新位置。然而，这是非常耗时的。有没有更好的方法来获取所有这些文本标签的坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:15:28.777

您可以使用[findobj](http://www.mathworks.com/help/techdoc/ref/findobj.html)获取作为当前轴子的文本对象的句柄（或另一个句柄......您的选择）：

```
text_handles = findobj('parent',gca,'type','text'); 
```

然后你可以得到这些文本对象的位置：

```
positions = get(text_handles,'position'); 
```

您可能需要做更多的工作来将每个文本对象与其数据点相关联——我建议`UserData`为此利用属性系统，也许通过字段，尽管有很多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:02:49.267

如果您想稍后在绘图中轻松执行此操作，例如：

```
h=text(2.9,7.5,'MyText'); 
```

这会将“MyText”放在位置 2.9 和 7.5。

然后改变位置使用：

```
set(h,'Position',[2.5 7]); 
```

这会将位置更改为 2.5 和 7。

稍后如果您需要再次查看文本的位置，请使用：

```
get(h); 
```

希望这可以帮助。

# visual-studio-2010 - 在 MS Visual Express 2010 上设置 OpenCV 2.4.2

> ID：11479372
> 
> 赞同：2
> 
> 时间：2012-07-13T22:53:38.233
> 
> 标签：visual-studio-2010, opencv

我正在尝试在 VS2010 中设置 OpenCV2.4.2 但没有成功。我将 sourceforge.net 上的 OpenCV 文件下载到目录`C:\Opencv`中，并且 lib 文件夹按预期丢失。

尝试使用 OpenCV wiki 中的指南构建/生成库文件时，SVN 存储库生成器无法下载，尽管我已无线连接到互联网。

我尝试在 VS2008 上设置 OpenCV2.1，并且没有出现重大问题。

有没有更简单的方法来获得所需的库文件等，而无需太多汗水？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:15:38.553

回答你自己的问题感觉有点尴尬，但让我来做吧。我按照此链接 < [http://www.youtube.com/watch?v=kZvjTTK9zTw](http://www.youtube.com/watch?v=kZvjTTK9zTw) > 安装 OpenCV 2.3.1。我认为它不起作用，因为我无法成功加载图像。

显然，我犯了一个大错误：图像文件扩展名。文件的名称以 .jpg 结尾，我试图加载“文件名”，更改它，然后它工作正常。

按照上面的链接，对我来说，甚至比 opencv.org 教程更简单。我想遵循与视频中相同的说明也适用于 OpenCV 2.4.2。

谢谢大家... Ruzzar

# github - 如何在 Github 搜索中使用“created:”

> ID：11479376
> 
> 赞同：2
> 
> 时间：2012-07-13T22:54:21.393
> 
> 标签：github

在 Github 高级搜索中，我发现：`created: the date it was created`

但是如何使用这个？如何在我的关键字中搜索（类似于 2012-05-05）到 2012-07-05 存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:42:11.580

2013 年 1 月更新：来源“[全新代码搜索](https://github.com/blog/1381-a-whole-new-code-search)”：

下面的查询现在将表示为：“ [`created:2012-05-05..2012-07-05`](https://github.com/search?q=created:2012-05-05..2012-07-05&type=Repositories&ref=searchresults)”。

* * *

（原答案：2012 年 7 月）

语法是**[SolrQuerySyntax中描述的语法](http://wiki.apache.org/solr/SolrQuerySyntax)**

您的查询将是**[这个](https://github.com/search?q=created%3a%5B2012-05-05%20TO%202012-07-05%5D&repo=&langOverride=&start_value=1&type=Repositories&language=)**：

```
https://github.com/search?q=created%3A[2012-05-05+TO+2012-07-05]&repo=&langOverride=&start_value=1&type=Repositories&language= 
```

不要忘记选择“搜索”选择器，将“存储库”值放入其中，以限制对存储库的搜索。

# java - 正则表达式匹配不在字符串文字内的逗号

> ID：11479377
> 
> 赞同：0
> 
> 时间：2012-07-13T22:54:23.627
> 
> 标签：java, regex, groovy, basic

在 BASIC 中，打印语句可能如下所示：

```
100 PRINT "Copyright, Adrian McMenamin","maybe" 
```

这应该在第一条语句和第二条语句之间放置一个制表符空间。

我正在为 Groovy/Java 中的 BASIC 开发 DSL/解释器，它需要解析这一行并生成如下内容：

```
print "Copyright, Adrian McMenamin", "    ","maybe" 
```

（因为 Groovy 将逗号解释为仅分隔打印函数的参数。）

那么什么正则表达式可以区分不在引号内的逗号和那些在引号内的逗号（不用担心 PRINT 或行号等）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T23:00:08.557

您正在查看正则表达式无法处理的[解析](http://en.wikipedia.org/wiki/Parsing)和[语法。](http://en.wikipedia.org/wiki/Formal_grammar)通常，您需要计算超出正则表达式范围的左括号或右括号。你可能想看看像[ANTLR](http://www.antlr.org/)这样的解析器来解决这个问题。仅此任务可能有点*矫枉过正*，但我​​想您将不得不翻译多种类型的基本语句，然后解析器才是您真正需要的，而不是正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:45:57.703

我实现了一个非常简单的解析器，它只计算开引号（模 2）。考虑到 BASIC 字符串文字的简单规则，它就可以工作。我设计了一个非常漂亮的递归函数，它使用了一个可以正常工作的正则表达式：

```
100 PRINT "Copyright, 2012", "Adrian McMenamin" 
```

但这失败了：

```
100 PRINT "Copyright, 2012" 
```

哦，好吧，猜猜这只是类似 DFA 的方案的限制。

# scala - 添加到 Akka 的配置文件

> ID：11479379
> 
> 赞同：1
> 
> 时间：2012-07-13T22:55:23.137
> 
> 标签：scala, config, dispatcher, akka

我的环境是 eclipse indigo，我正在尝试添加一个自定义调度程序。

```
import akka.actor.Actor
import akka.actor.ActorRef
import akka.dispatch.MessageDispatcher
import akka.dispatch._
import akka.event.Logging
import akka.actor.ActorSystem
import akka.actor.Props
import akka.dispatch;

class MyActor extends Actor {
    Console.println("World!");
    val log = Logging(context.system, this)
    def receive = {
        case "test" => log.info("received test")
        case _      => log.info("received unknown message")
    }
}  

object Main extends App {    

    val system = ActorSystem("MySystem")
        Console.println("Hello");
    val myActor = system.actorOf(Props[MyActor].withDispatcher("my-dispatcher"), name = "myactor")
} 
```

我正在关注这个例子。[http://doc.akka.io/docs/akka/2.0.2/scala/dispatchers.html](http://doc.akka.io/docs/akka/2.0.2/scala/dispatchers.html)

我已经尝试将它添加到 akka-2.0.2/config/application.config 中的 application.config

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T23:08:42.960

在您的项目中，只需放入`application.conf`文件`src/main/resources`夹中。那应该行得通。

# ruby-on-rails - 在 Rails 中使用 simple_form、nested_form 和 Twitter Bootstrap 添加控件

> ID：11479381
> 
> 赞同：6
> 
> 时间：2012-07-13T22:55:25.140
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

我正在使用 simple_form、nested_form 和 Twitter Bootstrap，并尝试将 nested_form 中的“删除链接”与对象放在同一行。

现在它看起来像这样：

[http://grab.by/eKDS](http://grab.by/eKDS)

我希望它看起来像这样：

[http://grab.by/eKEc](http://grab.by/eKEc)

这是我的代码的样子：

```
<%= cform.simple_fields_for :licensings do |lf| %>
  <%= lf.input :state, :collection => us_states, :wrapper => false %>
  <%= lf.link_to_remove "Remove this Licensing", :class => 'btn btn-mini btn-danger' %>
<% end %> 
```

我已经尝试将第二个 link_to_remove 放在第一个 lf.input 的块中，但是实际的下拉列表没有出现。我查看了 simple_form 的代码，但我无法追踪是否有办法实现这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T21:53:21.737

感谢您的回答，但我无法工作。我在 Google Groups 邮件列表中找到了答案：

[https://groups.google.com/forum/?fromgroups#!topic/plataformatec-simpleform/hL9ek5svyAU](https://groups.google.com/forum/?fromgroups#!topic/plataformatec-simpleform/hL9ek5svyAU)

```
 <%= cform.simple_fields_for :licensings do |lf| %>
    <%= lf.input :state do %>
      <%= lf.input_field :state, :collection => us_states  %>
      <%= lf.link_to_remove "Remove this Licensing", :class => 'btn btn-mini btn-danger' %>
    <% end %>
  <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:27:48.807

您是否尝试将“内联”类添加到嵌套表单中？

```
<%= form_for @test, :html => { :class => 'form-inline' } do |f| %>
  <%= f.text_field :some_field, :class => 'text_field' %>
  <%= f.submit "Save", :class => 'btn btn-primary' %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:26:49.880

正如您在[文档](https://github.com/plataformatec/simple_form)中看到的，您可以创建自定义包装器。您必须在 simple_form 的初始化程序中添加类似这样的内容：

```
config.wrappers :inline do |b|
  b.use :placeholder
  b.use :label_input
end 
```

并像这样使用它：

```
<%= cform.simple_fields_for :licensings do |lf| %>
  <%= lf.input :state, :collection => us_states, :wrapper => inline %>
  <%= lf.link_to_remove "Remove this Licensing", :class => 'btn btn-mini btn-danger' %>
<% end %> 
```

# javascript - 使用简单脚本进行 HTML 和 JavaScript (jQuery) 过滤

> ID：11479382
> 
> 赞同：0
> 
> 时间：2012-07-13T22:55:28.197
> 
> 标签：javascript, jquery, html

我有这个小脚本，我正试图在我的网页上工作，它应该通过运行一个小而简单的 javascript 来过滤我链接到的一堆编程视频，如下所示。我想通过制作来改进它，除非满足所有要求，否则它不会显示结果。例如，如果我过滤“python”和“easy”，我只想要同时满足这两个要求的结果。我希望我能理解自己，我也相信这是一个相当简单的解决方法。请快速查看下面的代码并尽快做出响应:)

[http://jsfiddle.net/uNAXC/](http://jsfiddle.net/uNAXC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:14:27.550

您应该首先“构建”您的过滤器，然后应用它。

```
$('div.tags').delegate('input:checkbox', 'change', function()
{
     var $lis = $('.results > li').hide();
     var filter = '';

     //For each one checked
     $('input:checked').each(function()
     {
          filter += '.' + $(this).attr('rel');
     });

     $lis.filter(filter).show();
    console.log(filter);
}).find('input:checkbox').change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:19:32.637

您需要有一个字符串来存储您的选择器过滤器，然后使用它：

[http://jsfiddle.net/uNAXC/2/](http://jsfiddle.net/uNAXC/2/)

我在里面放了一个 div，这样你就可以看到实际的选择器字符串

# jquery - jquery验证 - 远程方法在有效后不会触发

> ID：11479383
> 
> 赞同：11
> 
> 时间：2012-07-13T22:55:29.110
> 
> 标签：jquery, jquery-validate

```
email1: {
                    required: true,
                    blacklist: true,
                    beanEmailValidator: true,
                    minlength: 6,
                    maxlength: 70,
                    remote: {
                        type: "GET",
                        url: llbFieldValJSONURL,
                        data: {
                              fieldData : function() {
                                return $("#enterEmail").val();
                              }                           
                         },
                        dataType:"json",
                        dataFilter: function(data) {
                            var json = jQuery.parseJSON(data);
                            if(json.error == "true") {
                                return "\"" + json.errorMessage + "\"";
                            } else {
                                return success;

                            }

                        }
                    }

                } 
```

此函数检查用户名的唯一性，如果不唯一则返回错误。问题是远程方法在有效后不会进行任何额外的调用。我需要它在每次输入/更改值时触发。

例如，如果我输入 3 个非唯一用户名，则每次都会进行调用。如果我输入一个唯一的用户名，则调用正确并且用户名返回为有效。所以该字段是有效的。现在，如果我输入另一个非唯一（无效）用户名，远程方法将不会再次触发。

想知道它是否以某种方式缓存响应？

无效（非唯一）响应：

```
{"error":"true","errorMessage":"<b>The User Name you chose is already in use.</b>  Please enter another name."} 
```

有效（唯一）响应：

```
{"error":"false","errorMessage":""} 
```

**编辑**

在 SO 上看到了这个：

[https://stackoverflow.com/a/1821667/335514](https://stackoverflow.com/a/1821667/335514)

```
$("#site").change(function() {
  $("#email").removeData("previousValue");
}); 
```

所以插件似乎正在缓存响应。插件是否有关闭缓存的方法，或者`cache: false`在 ajax 调用中添加一个可以做同样的事情？

**编辑**

这些方法都不起作用。似乎一旦一个字段被标记为有效，它就不会再次进行远程调用。关于如何修复的想法？将函数放入它自己的 addMethod 会阻止这种情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T23:29:43.243

**更新/解决方案：**

查看 的源代码`jquery.validate.js`，特别是这个片段：

```
success: function(response) {
    validator.settings.messages[element.name].remote = previous.originalMessage;
    var valid = response === true;

    if ( valid ) {   ... 
```

由于响应被评估为 JSON，因此您应该调用`return "true"`. [文档](http://docs.jquery.com/Plugins/Validation/Methods/remote)中也指出了这一点

> “响应被评估为 JSON，并且对于有效元素必须为真”

但是，如果您忽略了以下是隐式设置的事实，那么在查看执行***完全等于***测试的源代码时可能会非常混乱`dataType: json`

**结束更新**

* * *

在进行更多调查后，我会说您的“dataFilter”不应该返回“成功”

参考回调函数队列@http [://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> 成功接收响应数据后立即调用 dataFilter 回调。它接收返回的数据和 dataType 的值，并且**必须**返回（可能已更改的）数据以传递成功。

我的猜测是您的 JS 在尝试执行时中断`return success`，因此不会发送进一步的验证请求

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-25T17:17:33.923

我有相同的症状，但它是由不同的问题引起的。

如果 jQuery 远程验证方法认为字段的值没有改变，它看起来不会触发另一个 ajax 调用。这对我来说是个问题，因为我在表单中的两个字段上进行了远程验证：手机号码（IE 555-123-1234）和国家代码（美国的 IE 1）。

如果手机号码没有变化，但国家代码有变化，我们需要重新验证。但是，如果验证绑定到手机号码字段，插件不会进行另一个 ajax 调用，因为它的值没有改变。

您可以在远程方法中看到插件在哪里进行缓存：

```
if ( previous.old === optionDataString ) {
    return previous.valid;
} 
```

该插件使用 jQuery 的 $data 方法和“previousValue”键存储先前的值。因此，就我而言，我所要做的就是清除这个值：

```
$("#my-phone-number-element").removeData("previousValue");
$("#my-phone-number-element").valid(); 
```

# javascript - Javascript连续输入字符串保持项目淡入

> ID：11479385
> 
> 赞同：1
> 
> 时间：2012-07-13T22:55:34.487
> 
> 标签：javascript, jquery

我不想为在文本框中键入的比尔盖茨的每个字母在 ifs 中写 ifs，我是将这些字母拆分成一个数组还是什么？

```
function callManagers(val){ 
    var val = $("#limitedtextarea").val();
    if (val.indexOf('@BillGates')<=-1) {
        if(val.indexOf('@') > -1) {
            if (val.indexOf('b') > -1 || val.indexOf('B') > -1) {
                $("#test").fadeIn();
            }
        }
    }
} 
```

我希望用户输入 Bill Gates，并且只要他们这样做，测试就会保持淡入，但如果他们输入错误的 Bill Gates 就会淡出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:02:34.087

为什么不是这个？

```
var str = "@BillGates",
    val = $("whatever").val();
if(str.indexOf(val) === 0) { //means val is a substring of "@BillGates"
   //do fade in
} 
```

# geolocation - 为什么我的地理坐标总是错误的？

> ID：11479387
> 
> 赞同：1
> 
> 时间：2012-07-13T22:55:50.037
> 
> 标签：geolocation, twitter

我正在`@JoeMaxiTaxis`从我的 Android 手机发送一条推文。问题是，坐标根本不显示。

我仔细检查了 GPS 是否启用，并且在 Twitter 应用程序上启用了该位置。

这是我在服务器上得到的响应：

```
{ in_reply_to_status_id_str: null,
  contributors: null,
  place: null,
  in_reply_to_screen_name: 'JoeMaxiTaxis',
  text: '@joemaxitaxis lll',
  favorited: false,
  in_reply_to_user_id_str: '634579476',
  coordinates: null,
  geo: null,
  retweet_count: 0,
  created_at: 'Fri Jul 13 22:13:01 +0000 2012',
  source: '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>',
  in_reply_to_user_id: 634579476,
  in_reply_to_status_id: null,
  retweeted: false,
  id_str: '223902880527167488',
  truncated: false,
  user: 
   { favourites_count: 0,
     friends_count: 0,
     profile_background_color: 'C0DEED',
     following: null,
     profile_background_tile: false,
     profile_background_image_url_https: 'https://si0.twimg.com/images/themes/theme1/bg.png',
     followers_count: 0,
     profile_image_url: 'http://a0.twimg.com/sticky/default_profile_images/default_profile_0_normal.png',
     contributors_enabled: false,
     geo_enabled: true,
     created_at: 'Wed Jul 07 16:19:53 +0000 2010',
     profile_sidebar_fill_color: 'DDEEF6',
     description: '',
     listed_count: 0,
     follow_request_sent: null,
     time_zone: 'Dublin',
     url: null,
     verified: false,
     profile_sidebar_border_color: 'C0DEED',
     default_profile: true,
     show_all_inline_media: false,
     is_translator: false,
     notifications: null,
     profile_use_background_image: true,
     protected: false,
     profile_image_url_https: 'https://si0.twimg.com/sticky/default_profile_images/default_profile_0_normal.png',
     location: 'Dublin, Ireland',
     id_str: '163924257',
     profile_text_color: '333333',
     name: 'Eamonn Hynes',
     statuses_count: 6,
     profile_background_image_url: 'http://a0.twimg.com/images/themes/theme1/bg.png',
     id: 163924257,
     default_profile_image: true,
     lang: 'en',
     utc_offset: 0,
     profile_link_color: '0084B4',
     screen_name: 'rainbowcabs' },
  id: 223902880527167500,
  entities: { user_mentions: [ [Object] ], urls: [], hashtags: [] } } 
```

任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:35:28.627

您的 HTTP 请求是否获取包含 GPS 坐标（经度和纬度）`long`的参数？`lat`无论您的应用程序使用 GPS 做什么，如果 Twitter 没有同时获取`long`和`lat`参数，并且如果您没有“启用地理”，则 Twitter 将无法通过其余的书面推文向您返回位置。

# javascript - 如何使用 Jquery 获取特定 Id 的所有选定下拉值

> ID：11479389
> 
> 赞同：4
> 
> 时间：2012-07-13T22:55:51.453
> 
> 标签：javascript, jquery

我有一个带有多个`select`下拉菜单的表单，这些下拉菜单以 id: 包开头，由用户动态添加。我的目标是将这些`select`下拉列表中的所有选定值放入一个数组中。这是我到目前为止的代码。

```
$(document).ready(function() {

    arr = new Array();

    $(document).on('change', 'select[id ^="package"]', function() {
        arr.push($(this).val());
        alert(arr.join('\n')); //for testing
    });

}); 
```

目前我所做的只是将选定的值推送到数组中，而不是为特定索引设置值。因此，如果我不断切换特定的值`select`，我将继续将值推送到数组中。如何确定我当前所在的选择器，以便我可以获取数组的索引以相应地修改数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:10:57.720

你可以使用 jQuery[`map()`](http://api.jquery.com/jQuery.map/)方法：

> 将数组或对象中的所有项目转换为新的项目数组。

```
$(document).on('change', 'select[id ^="package"]', function() {
    var arr = $('select[id ^="package"]').map(function(){
       return this.id + " " + this.value
    })
}); 
```

[演示](http://jsfiddle.net/yRP6R/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:58:58.463

这是你要找的吗？

```
$(document).on('change', 'select[id ^="package"]', function() {
     $(this).find('option:selected').each(function(i){
           arr[i] = $(this).val();
     });
}); 
```

# symfony1 - 在非对象上调用成员函数 - php

> ID：11479391
> 
> 赞同：1
> 
> 时间：2012-07-13T22:56:44.107
> 
> 标签：symfony1, doctrine-orm, php

这是我的代码`SessionManager.php`：

```
private function generateAuthToken($user)
{
    $bits = '';

    $fp = @fopen('/dev/urandom', 'rb');
    if ($fp !== false) {
        $bits .= @fread($fp, 128);
        @fclose($fp);
    }

    return sha1($bits . time() . microtime() . $user->getUsername());
} 
```

我收到此错误：

> 致命错误：在第 49 行的 /home/shwetanka/src/Practo/PvrBundle/Manager/SessionManager.php 中的非对象上调用成员函数 getUsername()

当我在`var_dump($user);`问题行之前做的时候，我正在打印完整的用户对象。我无法理解这个错误的原因。该函数存在于 User 类中。即使我尝试调用该类的任何其他函数，即使那样我也会得到该函数的相同错误。我是 php 新手，很难调试这个问题。

$user 也是 User 实体的对象。我正在使用 symfony2，这个对象是通过使用这个返回给我的：

```
$ur = $this->getDoctrine()->getRepository('PractoPvrBundle:User');
$user = $ur->findBy(array('email' => $email)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:59:32.140

将用户从返回中取出，例如：

```
$username = $user->getUsername();
return sha1($bits . time() . microtime() . $username); 
```

如果这不能解决它，出于调试目的，您可以尝试：

```
$username = 'N/A';
if(is_object($user) && method_exists($user, 'getUsername')) 
{
    $username = $user->getUsername();
} 
```

您也可以将参数 $user 转换为：

```
private function generateAuthToken(User $user) {... 
```

如果您获得不同的类实例或非对象，这将引发错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:00:15.360

有时在隐式转换为字符串的上下文中，PHP 在方法调用方面表现不佳……我不知道为什么。尝试这个：

```
$username = $user->getUsername();
return sha1($bits . time() . microtime() . $username); 
```

# 编辑：

另外，我怀疑您实际上是在处理数组而不是对象。该行：

```
$user = $ur->findBy(array('email' => $email)); 
```

*可能*旨在返回许多结果。使用 current() 获取第一个：

```
$user = current($ur->findBy(array('email' => $email))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:40:16.837

```
$ur = $this->getDoctrine()->getRepository('PractoPvrBundle:User');
$user = $ur->findBy(array('email' => $email)); 
```

**-> findBy**返回对象数组，使用**-> findOneBy**

# python - Python 中列表中的 for 循环有什么作用？

> ID：11479392
> 
> 赞同：31
> 
> 时间：2012-07-13T22:56:46.227
> 
> 标签：python, loops

有人可以向我解释这个 Python 代码片段的最后一行吗？

`Cell`只是另一个类。我不明白如何使用`for`循环将`Cell`对象存储到`Column`对象中。

```
class Column(object):

    def __init__(self, region, srcPos, pos):

        self.region = region
        self.cells = [Cell(self, i) for i in xrange(region.cellsPerCol)] #Please explain this line. 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-13T23:00:07.360

您询问的代码行是使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来创建一个列表并将该列表中收集的数据分配给`self.cells`. 它相当于

```
self.cells = []
for i in xrange(region.cellsPerCol):
    self.cells.append(Cell(self, i)) 
```

***说明***：

为了最好地解释*它是如何*工作的，一些简单的例子可能有助于你*理解*你拥有的代码。如果您要继续使用 Python 代码，您将再次遇到列表推导，您可能想自己使用它。

请注意，在下面的示例中，两个代码段是*等效*的，因为它们创建了一个`list`存储在 list 中的值`myList`。

例如：

```
myList = []
for i in range(10):
    myList.append(i) 
```

相当于

```
myList = [i for i in range(10)] 
```

列表推导也可以更复杂，例如，如果您有一些条件确定值是否应该进入列表，您也可以使用列表推导来表达这一点。

此示例仅收集列表中的偶数值：

```
myList = []
for i in range(10):
    if i%2 == 0:     # could be written as "if not i%2" more tersely
       myList.append(i) 
```

和等效的列表理解：

```
myList = [i for i in range(10) if i%2 == 0] 
```

最后的两个注意事项：

*   您可以有“嵌套”列表理解，但它们很快就会变得难以理解:)
*   列表推导将比等效的 for 循环运行得更快，因此通常是关注效率的普通 Python 程序员的最爱。

好的，最后一个示例显示您还可以将函数应用于您在列表中迭代的项目。这使用[float()](http://docs.python.org/library/functions.html#float)将字符串列表转换为浮点值：

```
data = ['3', '7.4', '8.2']
new_data = [float(n) for n in data] 
```

给出：

```
new_data
[3.0, 7.4, 8.2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:59:11.987

就像你这样做一样：

```
def __init__(self, region, srcPos, pos):
    self.region = region
    self.cells = []
    for i in xrange(region.cellsPerCol):
        self.cells.append(Cell(self, i)) 
```

这称为[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。

# regex - 如何在 javascript 中找到这段文本字符串？

> ID：11479395
> 
> 赞同：0
> 
> 时间：2012-07-13T22:57:07.480
> 
> 标签：regex

我正在使用 jQuery 并检索到一个包含元素所有类的字符串，如下所示：

```
var classes = $('[class^="menu-icon-"]').attr('class'); 
```

字符串打印如下内容：“foo menu-icon-icon-name bar”

如何找出字符串中的“图标名称”部分是什么，不管它是什么？

在元素可能包含的任何其他类中，它将始终具有格式为“menu-icon-{icon-name-here}”的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:02:26.480

假设你有一个 div 的类作为字符串

```
var class = "foo menu-icon-icon-name bar" 
```

如果您确定“”之后总会有一个空格，您应该能够执行类似的操作

```
var name = class.match(/menu-icon-(.*) /)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:17:39.123

这适用于所有情况-

```
var menuname = classes.substr(classes.indexOf("menu-icon") + 10).split(" ")[0]; 
```

# php - php正则表达式忽略图像url的大小

> ID：11479411
> 
> 赞同：2
> 
> 时间：2012-07-13T22:59:34.090
> 
> 标签：php, regex

我如何在 PHP 中使用正则表达式来实现这一点

```
http://www.domain.com/path/to/image/ipsum_image.jpg 
```

匹配这个并忽略大小部分

```
http://www.domain.com/path/to/image/ipsum_image-300x200.jpg 
```

请记住，300x200 可以是任何东西，从 4charsx4chars 到 1charx1char

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:04:26.433

```
$subject = 'http://www.domain.com/path/to/image/ipsum_image-300x200.jpg';
$result = preg_replace('&(-[0-9]{1,4}x[0-9]{1,4})&is', '', $subject); 
echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:05:40.713

```
$str= "http://www.domain.com/path/to/image/ipsum_image-300x200.jpg";
$regex= '/(\d{1,4})x(\d{1,4}).jpg$/i';
preg_match($regex, $str, $match, PREG_OFFSET_CAPTURE, 3);
print_r($match); 
```

# javascript - JavaScript中的数组理解？

> ID：11479418
> 
> 赞同：7
> 
> 时间：2012-07-13T23:00:20.407
> 
> 标签：javascript, python, list, list-comprehension

我想知道将（从 Python）列表理解转换为 Javascript 的最简洁的方法是什么。有什么可以使这个可读而不是一团糟吗？

```
 non_zero_in_square = [ grid[row][col]
                           for row in range(start_row, start_row+3)
                           for col in range(start_col, start_col+3)
                           if grid[row][col] is not 0
                         ] 
```

*这是列表推导的一个很好的例子，因为它有多个`for`s 和 和一个`if`。*

我应该补充一点，[这里](https://stackoverflow.com/a/8273091)`range`已经涵盖了这一点（我不能没有）。`range`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:10:32.557

好吧，使用该方法执行此操作会有些混乱`.map()`，因为外部调用确实需要返回数组。因此，您可能最适合行人：

```
var nonZero = [];
for (var row = startRow; row < startRow + 3; ++row)
  for (var col = startCol; col < startCol + 3; ++col)
    if (grid[row][col] !== 0) nonZero.push(grid[row][col]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:09:33.537

Coffee 脚本支持列表理解语法，并且可能是最简洁的，因为它完全遵循语法。不幸的是，它是一个中介，会被编译成多行 javascript

[http://coffeescript.org/#loops](http://coffeescript.org/#loops)

他们向您展示了它是如何转换为普通 javascript 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T16:34:11.440

[Mozilla JS 文档，ES 1.7 原生支持它们](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Predefined_Core_Objects?redirectlocale=en-US&redirectslug=JavaScript/Guide/Predefined_Core_Objects#Array_comprehensions)。

例子：

```
var numbers = [1, 2, 3, 4];
var doubled = [i * 2 for (i of numbers)]; 
```

# scala - 播放 2 - 在所有响应上设置标题？

> ID：11479424
> 
> 赞同：18
> 
> 时间：2012-07-13T23:01:37.713
> 
> 标签：scala, playframework-2.0

我知道[在 Play 2.0 (scala) 中设置 HTTP 标头？](https://stackoverflow.com/questions/8199490/setting-http-headers-in-play-2-0-scala)您可以根据具体情况设置响应标头，例如，`Ok("hello").withHeaders(PRAGMA -> "no-cache")`.

如果您想在所有操作的响应中设置该标头或几个不同的标头怎么办？你不想`withHeaders`到处重复。而且由于这更像是应用程序范围的配置，您可能不希望 Action 编写者必须使用不同的语法来获取您的标头（例如`OkWithHeaders(...)`）

我现在拥有的是一个看起来像的基本 Controller 类

```
class ContextController extends Controller {
 ...
 def Ok(h: Html) = Results.Ok(h).withHeaders(PRAGMA -> "no-cache")
} 
```

但这感觉不太对。感觉应该有更多 AOP 风格的方式来定义默认标头并将它们添加到每个响应中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T13:54:38.540

这个话题现在已经很老了，但是在 Play 2.1 中它现在变得更加简单了。你的`Global.scala`班级应该是这样的：

```
import play.api._
import play.api.mvc._
import play.api.http.HeaderNames._

/**
 * Global application settings.
 */
object Global extends GlobalSettings {

  /**
   * Global action composition.
   */
  override def doFilter(action: EssentialAction): EssentialAction = EssentialAction { request =>
    action.apply(request).map(_.withHeaders(
      PRAGMA -> "no-cache"
    ))
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T07:02:11.453

在您的`Global.scala`中，将每个调用包装在一个操作中：

```
import play.api._
import play.api.mvc._
import play.api.Play.current
import play.api.http.HeaderNames._

object Global extends GlobalSettings {

  def NoCache[A](action: Action[A]): Action[A] = Action(action.parser) { request =>
    action(request) match {
      case s: SimpleResult[_] => s.withHeaders(PRAGMA -> "no-cache")
      case result => result
    }
  }

  override def onRouteRequest(request: RequestHeader): Option[Handler] = {
    if (Play.isDev) {
      super.onRouteRequest(request).map {
        case action: Action[_] => NoCache(action)
        case other => other
      }
    } else {
      super.onRouteRequest(request)
    }
  }

} 
```

在这种情况下，我只在开发模式下调用该操作，这对于无缓存指令最有意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T09:38:36.297

实现细粒度控制的最简单方法是使用包装的操作。在你的情况下，它可能是这样的：

```
object HeaderWriter {
    def apply(f: Request[AnyContent] => SimpleResult):Action[AnyContent] = {
        Action { request =>
            f(request).withHeaders(PRAGMA -> "no-cache")
        }
    }
} 
```

并以这种方式使用它：

```
def doAction = HeaderWriter { request =>
    ... do any stuff your want ...
    Ok("Thats it!")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T06:17:51.980

方法也很多。您可以使用[action-composition](http://www.playframework.org/documentation/2.0.2/ScalaActionsComposition)。然后，您必须在要在此处设置的每个控制器上声明标头。另一种选择是使用[GlobalSettings](http://www.playframework.org/documentation/2.0.2/ScalaGlobal)。java也有类似的解决方案。

# assembly - 以下汇编代码有什么问题？

> ID：11479425
> 
> 赞同：0
> 
> 时间：2012-07-13T22:53:17.773
> 
> 标签：assembly, x86, dos, nasm

获取输入字符串的代码

在 Windows 机器上使用 nasm 组装：`nasm file.asm -o file.com`

```
;read the string
mov ah,0x0A ;read 
mov dx,buffer   ;pointer to buffer
int 0x21

;newline
mov ah,2
mov dl,10
int 0x21
mov dl,13
int 0x21

;put $ sign at end of string
mov bx,buffer+1
mov dx,buffer+2
add dl,byte[bx]
mov bx,dx
mov byte[bx],'$'

;output
mov dx,buffer+2
mov ah,9
int 0x21

;exit
mov ah,0x4c
int 0x21

;buffer

buffer:
db 255  ;len of buffer
db 0    ;num of char read
db 255  ;actual string

;############################ 
```

它是长度不超过 2 个字符的字符串的工作文件，之后它会发出垃圾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T23:21:35.227

这是应该如何修复的。查看带有 的行`;;`。

```
bits 16 ;; you have to tell NASM to generate 16-bit code
org 0x100 ;; you have to start generating addresses at 0x100 for .COM programs

;read the string
mov ah,0x0A ;read 
mov dx,buffer   ;pointer to buffer
int 0x21

;newline
mov ah,2
mov dl,10
int 0x21
mov dl,13
int 0x21

;put $ sign at end of string
mov bx,buffer+1
mov dx,buffer+2
add dl,byte[bx]
adc dh, 0 ;; we're doing 16-bit+8-bit=16-bit addition
mov bx,dx
mov byte[bx],'$'

;output
mov dx,buffer+2
mov ah,9
int 0x21

;exit
mov ah,0x4c
int 0x21

;buffer

buffer:
db 254; 255  ;len of buffer ;; my doc says the range is 1 to 254
; db 0    ;num of char read ;; you only need to reserve memory
; db 255  ;actual string ;; you only need to reserve memory
resb 255 ;; reserve memory (1 for length, 254 for text)
resb 1 ;; reserve memory for "$" 
```

如果缓冲区是 .COM 程序中的最后一件事，您实际上可以删除 .COM 之后的所有行`db 254`。

# html - DIVs没有拉伸属性？

> ID：11479426
> 
> 赞同：0
> 
> 时间：2012-07-13T23:02:07.910
> 
> 标签：html, css, stretching

所以，我在一个粉丝网站上工作，我不知道为什么我的“内容”类 div 不会伸展。它应该是 100% 的最小高度，但它没有这样做。此外，我无法将它延伸到位于其中的“column2”div。抱歉，如果这是一个简单的修复，我对此很陌生。我不知道从哪里开始发布代码供你们参考，所以如果你愿意，只需到[这里](http://www.theguildwars2hq.com/enemies/)查看页面源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:15:37.767

*实际上，它确实延伸到底部 --- html*元素的底部。问题是你的右栏是`position: absolute`. 每当您将元素设置为绝对定位时，它都会与正常流程分离，因此其容器不会拉伸以包含它（这是下拉菜单等所需的效果）。

相反，您应该使用`float: right`右列上的属性，然后在底部添加一个空 div，即`clear: both`，以确保 div 正确拉伸。

# cuda - 如何在 CUDA 4.1/4.2/5.0 中输出带 C/C++ 注释的 PTX

> ID：11479427
> 
> 赞同：10
> 
> 时间：2012-07-13T23:02:24.253
> 
> 标签：cuda, llvm, ptx

有人知道如何使用新的 LLVM 后端使用 C/C++ 代码注释 PTX 汇编器吗？

可以使用 CUDA 4.0 或更早版本轻松获得它，但 NVCC 在将 CUDA 工具包升级到 4.2 版后拒绝了我的所有标志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T13:38:58.667

来自 CUDA 6.0 预览版的 nvcc 支持选项`--source-in-ptx.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-28T20:12:48.677

您可能希望使用`--source-in-ptx`和`-G`nvcc 标志来查看 PTX 文件中的原始代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T12:35:02.437

nvcc.exe *--opencc-options -LIST:source=on -ptx kernel.cu*工作吗？我已经安装了 cuda 4.2，这个命令在 ptx 汇编器行之间生成带有注释 C 代码的 *.ptx 文件。

# spring - 如何在 Spring MVC 拦截器中使用 URI 模板？

> ID：11479434
> 
> 赞同：3
> 
> 时间：2012-07-13T23:02:57.717
> 
> 标签：spring, spring-mvc

我有一个类似于下面示例的控制器 uri 层次结构。

```
@RequestMapping(value="company/{id}")
public abstract class BaseCompanyController 
{
  // variety of helper methods, protected autowired objects 
}

@Controller
@RequestMapping(value = "company/{id}/documents")
public class DocumentsController extends BaseCompanyController
{
  // document controller methods 
   @RequestMapping(value="something",.... etc)
   public void doSomething(){}
}

@Controller
@RequestMapping(value = "company/{id}/financials")
public class FinancialsController extends BaseCompanyController
{
  // financials controllers methods 
} 
```

我想要做的是定义一些代码在任何子控制器中的任何处理程序方法之前执行。例如，我想在 DocumentsController 上调用 doSomething 方法之前运行一些代码。对于特定的 URI 层次结构，我想做的事情是独一无二的。

如果我在处理程序方法之前使用拦截器执行，我如何从 URI 中提取 URI 参数，例如 /company/{id} 中的公司 ID？我真的不想手动解析 URL？

可以使用诸如 /company/{id} 之类的 URI 来缩小拦截器的范围，拦截器映射是否理解 URI 模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:34:52.980

您只能对某些 URI 使用拦截器，并为每个URI 使用`<mvc:mapping/>`和属性：`path`

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/company/*/documents" />
        <bean class="com.mypackage.DocumentsInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

参考[这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-interceptors)。

# iphone - CoreImage人脸检测方法在视频直播中不能正常工作

> ID：11479438
> 
> 赞同：0
> 
> 时间：2012-07-13T23:03:35.290
> 
> 标签：iphone, ipad, ios5, image-processing, core-image

我正在处理来自实时 iPad 相机的帧。我正在使用 CoreImage 人脸检测方法。它在特写镜头上效果很好。但是当我远离相机时，我的整个身体都在视野中。它不检测面部。请高手指点问题出在哪里...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:45:43.610

![我找到了问题](../Images/60c7771846900a479589c75fcbb0a94d.png)我已经找到了问题，请不要遮住你的眼睛和/或嘴巴。

iPad 的摄像头的分辨率明显低于 iPhone 摄像头，因此从远处看，人脸检测不起作用是有道理的，因为分辨率不够高，或者面部特征的最小尺寸可能没有“没有遇到，因为否则设备会在各种小物体中提取人脸。

# mysql - 如何从数据库中选择来组织像这个报告这样的数据

> ID：11479441
> 
> 赞同：1
> 
> 时间：2012-07-13T23:04:14.063
> 
> 标签：mysql, database

我有一个表，其中每条记录是：ID、groupID 和一个注释字段。ID 不是唯一的，它可以与多个 groupID 关联。并且每个 ID-groupID 组合可以与多个注释相关联。**我在这里尝试打印的主要数据是注释字段。**

```
id             | groupID    | notes
------------------------------------------------------------------
JWOFJ903JCKDF8 | groupID-22 | new id, new id-groupID combo
JWOFJ903JCKDF8 | groupID-33 | repeat id (line 1), new id-groupID combo
JWOFJ903JCKDF8 | groupID-33 | repeat id (lines 1&2), repeat id-groupID (line 2)
...
DF8#CKJ90JJ3WO | groupID-22 | new id, new id-groupID combo
DF8#CKJ90JJ3WO | groupID-44 | repeat id (line 4), new id-groupID combo
... 
```

打印数据时，如何选择笔记，以便将属于同一 ID-groupID 组合的所有笔记组合在一起？并且所有属于同一 id 的 groupID 都分组在一起？

所以我的报告看起来像这样：

```
JWOFJ903JCKDF8
   -groupID-22
      - [line 1 of the data] new id, new id-groupID combo
   -groupID-33
      - [line 2 of the data] repeat id (line 1), new id-groupID combo
      - [line 3 of the data] repeat id (lines 1&2), repeat id-groupID (line 2)
DF8#CKJ90JJ3WO
   -groupID-22
      - [line 4 of the data] new id, new id-groupID combo
   -groupID-44
      - [line 5 of the data] repeat id (line 4), new id-groupID combo 
```

我应该指出，这张表非常大——超过 200,000 条记录并且还在增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:22:42.077

事实上很简单：

1/ 选择所需的记录（按 id 和 groupId 排序）

```
SELECT id,groupID,notes
  FROM <your table name>
 WHERE ...
 ORDER BY id, groupID
 LIMIT ... 
```

2/ 使用 WHERE 限制结果以检索简单 id 和/或 LIMIT 的结果（我怀疑您是否想在单个报告中显示这 20 万条记录）。阅读 SELECT 命令的 Mysql 文档

3/ 在您的前端，每次更改 id 或 groupID 时，使用变量来计算结果和缩进

如果我可以建议，您的数据库模型应该这样更改：

*   列 id 应该是唯一的，就像一个自动增量键
*   一个新列（我们称之为键）应该存储当前 id
*   如果列 groupId 引用现有的表组，请以相同的方式更改此表：

    *   一个唯一的自动增量 id 列，一个名称，
    *   并在您的记录表中​​，仅存储组表 ID 作为列名建议

# android - 使用计时器显示图像不起作用

> ID：11479446
> 
> 赞同：0
> 
> 时间：2012-07-13T23:05:07.827
> 
> 标签：android

您好，当我在“开始”选项中单击菜单充气机时，我需要在 5 秒内显示 12 个图像。

我创建了一个显示图像的方法：

```
private void mostrarImgs() {

    if ( ultT < prtT ) {   
        if (mostrar) { 
            ((ImageView)findViewById(imgIds[ultIndice])).setVisibility(View.INVISIBLE);
        }else{
            ((ImageView)findViewById(imgIds[prmIndice])).setVisibility(View.INVISIBLE);  
        }
    }
    mostrar = !mostrar;   
    } 
```

在“充气机”中：

```
 public boolean onOptionsItemSelected(MenuItem item) {

    super.onOptionsItemSelected(item);

    switch (item.getItemId()){

    case R.id.texto1:
 Timer cambioImg = new Timer();
        cambioImg.schedule(new TimerTask() {
            @Override
            public void run() {
                runOnUiThread(new Runnable() {
                    public void run() {
                        mostrarImgs();
                    }
                });
            }
        }, 0, 180 * 1000);
        return true; 
```

我的问题是它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:07:33.723

我认为您在这两种情况下都设置了 setVisibility(View.INVISIBLE)。所以总是不可见，你需要改变其中之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:15:27.853

在这里你有：

```
private void mostrarImgs() {

if ( ultT < prtT ) {   
    if (mostrar) { 
        ((ImageView)findViewById(imgIds[ultIndice])).setVisibility(View.INVISIBLE);
    }else{
        ((ImageView)findViewById(imgIds[prmIndice])).setVisibility(View.INVISIBLE);  
    }
}
mostrar = !mostrar;   
} 
```

您必须制作其中之一，`VISIBLE`否则它们将永远是`INVISIBLE`

# objective-c - 将 libccv 与 UIImage 一起使用

> ID：11479449
> 
> 赞同：1
> 
> 时间：2012-07-13T23:05:35.530
> 
> 标签：objective-c, ios, computer-vision

假设我有一个 UIImage（或 NSData）对象，我的目标是将它与 libccv 一起使用，而无需事先将任何内容写入磁盘。我的问题是我不知道如何从这样的对象到 ccv_dense_matrix_t。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:29:05.180

在即将发布的 0.2 版本中，我重载了 ccv_read 函数，以便您可以将内存区域读入 ccv。首先，您可以从 UIImage ( [http://developer.apple.com/library/mac/#qa/qa1509/_index.html](http://developer.apple.com/library/mac/#qa/qa1509/_index.html) ) 获取 CGImageRef，从那里，您可以创建一个 ccv_dense_matrix_t 对象（是否复制或不取决于您）使用 ccv_read 很简单：

```
ccv_dense_matrix_t* x = 0;
ccv_read(data, &x, CCV_IO_ARGB_RAW | CCV_IO_GRAY, height, width, stepSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:41:00.237

该库仅提供 ccv_read() 来在已发布的 API 中进行此转换。如果您阅读此函数的代码，您可能会发现可以链接到接受数据指针的内部函数。

也就是说，当您可以通过几个 iOS API 调用将数据保存在应用程序的 tmp 目录中的文件中时，为什么还要麻烦呢？如果文件很小，您创建它，使用它，然后删除它可能永远不会真正写入闪存 - 它只会驻留在系统缓存中。

# int - currentCategoryId = currentId 变量 int？

> ID：11479453
> 
> 赞同：1
> 
> 时间：2012-07-13T23:06:11.907
> 
> 标签：int, nopcommerce

使用 Nop Commerce 我需要更改类别导航以获取 childsiblingsonly。

父类别的 categoryID 和 ParentCategoryID 为 0。子类别具有 categoryID 并映射到具有自己 CategoryId 的 ParentCategoryID，如下例所示。

```
ID PCID NAME 
10  0   Computers 
11  10  Software 
12  10  Hardware
13  0   Football
14  13  Tottenham
15  15  Manchester United 
```

目录控制器中有两种方法，如下所示的非操作和公共操作。当我从子类别导航到产品时，导航视图会消失，但如果有意义，我希望它保留在产品连接到的 currentCategory Id 上。

```
[NonAction]
    private IList<CategoryNavigationModel> GetOnlySiblings(Category currentCategory) 
    { 
        var result = new List<CategoryNavigationModel>();
        int Id = 0;
        if (currentCategory != null)
            Id = currentCategory.Id;

        foreach (var category in _categoryService.GetAllCategoriesByParentCategoryId(Id)) 
        {
            var model = new CategoryNavigationModel()
            {
                Id = category.Id,
                Name = category.GetLocalized(x => x.Name),
                SeName = category.GetSeName(),
                IsActive = currentCategory != null && currentCategory.Id == category.ParentCategoryId,
                NumberOfParentCategories = 0,
            };

            result.Add(model); 
        } 
        return result; 
    } 
```

和公共行动

```
[ChildActionOnly]
    //[OutputCache(Duration = 120, VaryByCustom = "WorkingLanguage")]
    public ActionResult CategoryNavigation(int currentCategoryId, int currentProductId)
    {
        string cacheKey = string.Format(ModelCacheEventConsumer.CATEGORY_NAVIGATION_MODEL_KEY, currentCategoryId, currentProductId, _workContext.WorkingLanguage.Id);
        var cacheModel = _cacheManager.Get(cacheKey, () =>
        {
            var currentCategory = _categoryService.GetCategoryById(currentCategoryId);
            if (currentCategory == null && currentProductId > 0)
            {
                var productCategories = _categoryService.GetProductCategoriesByProductId(currentProductId);
                if (productCategories.Count > 0)
                    currentCategory = productCategories[0].Category;
            }
            var breadCrumb = currentCategory != null ? GetCategoryBreadCrumb(currentCategory) : new List<Category>();
            var model = GetOnlySiblings(currentCategory);
            return model;
        });

        return PartialView(cacheModel);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:51:47.333

为什么不尝试重用现有逻辑，如下所示：

```
public IList<CategoryNavigationModel> GetOnlySiblings(int currentCategoryId)
        {
            var currentCategory = _categoryService.GetCategoryById(currentCategoryId);
            var siblingCategories = GetChildCategoryNavigationModel(new List<Category>(), currentCategory.ParentCategoryId, currentCategory, 0);

            return siblingCategories;
        } 
```

# objective-c - 对 NSMutable 字典进行排序

> ID：11479454
> 
> 赞同：1
> 
> 时间：2012-07-13T23:06:14.600
> 
> 标签：objective-c

任何正确方向的指示将不胜感激，

我有一个格式的 NSDictionary：

```
{
3 = "special-collection-procedures-see-notes|";
13 = "<p>None Given</p>";
16 = "";
6 = "<p>Arrange for sample to be separated at an interim site and subsequently transport frozen to lab, if it cannot reach lab within one hour.</p>";
9 = "<p>Stored in laboratory at -20C</p>";
12 = "<p>None</p>";
2 = "images/tubes/lightblue_tube_large.png";
15 = "";
5 = "";
8 = "Up to 28 days";
11 = "<p>Some indications: Hereditary Angioedema</p><p>Sample type is citrated plasma though plain serum can also be used.</p>";
1 = " Functional C1 esterase inhibitor";
14 = "|";
4 = "5-10 mL";
7 = "<p>Frozen if unable to deliver within one hour</p>";
10 = "<p>expressed as a percentage of a control serum with 75% -125% being classed as normal.</p>"; 
```

}

我想对键进行排序，以便顺序为：

```
1 = " Functional C1 esterase inhibitor";
2 = "images/tubes/lightblue_tube_large.png"; 
```

等等。

我有这段代码：

```
NSArray *myArray; 

myArray = [[valuesDictionary allKeys] sortedArrayUsingComparator: ^(id obj1, id obj2) {

    if ([obj1 integerValue] > [obj2 integerValue]) {

        return (NSComparisonResult)NSOrderedDescending;
    }
    if ([obj1 integerValue] < [obj2 integerValue]) {

        return (NSComparisonResult)NSOrderedAscending;
    }

    return (NSComparisonResult)NSOrderedSame;
}];

NSMutableDictionary *sortedDisplay = [[NSMutableDictionary alloc] init];

for (id object in myArray) {
    // do something with object
    [sortedDisplay setObject:[valuesDictionary objectForKey:object] forKey:object];

} 
```

这给了我一个排序的 myArray：1、2、3、4、5、6、7、8、9、10、11、12、13、14、15、16

但是最终的“排序”可变字典没有排序，即它的

sortedDisplay的打印说明：

```
{
13 = "<p>None Given</p>";
12 = "<p>None</p>";
11 = "<p>Some indications: Hereditary Angioedema</p><p>Sample type is citrated plasma though plain serum can also be used.</p>";
7 = "<p>Frozen if unable to deliver within one hour</p>";
6 = "<p>Arrange for sample to be separated at an interim site and subsequently transport frozen to lab, if it cannot reach lab within one hour.</p>";
2 = "images/tubes/lightblue_tube_large.png";
1 = " Functional C1 esterase inhibitor";
14 = "|";
15 = "";
10 = "<p>expressed as a percentage of a control serum with 75% -125% being classed as normal.</p>";
9 = "<p>Stored in laboratory at -20C</p>";
8 = "Up to 28 days";
5 = "";
4 = "5-10 mL";
3 = "special-collection-procedures-see-notes|";
16 = ""; 
```

}

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:10:03.810

> 我究竟做错了什么？

试图对字典进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T23:26:05.073

您将要创建一个排序数组：

```
 NSArray *sortedKeys = [dictionary keysSortedByValueWithOptions:NSNumericSearch usingComparator:^NSComparisonResult(NSString *a, NSString *b){
        return [a compare:b];
    }];
    //Now you have an array of sorted keys

    NSMutableArray *sortedArray = [[NSMutableArray alloc] initWithCapacity:sortedKeys.count];
    for (NSString *key in sortedKeys){
        NSDictionary *dict = [NSDictionary dictionaryWithObject:[dictionary valueForKey:key] forKey:key];
        [sortedArray addObject:dict];
    }
    //Now you have a sortedArray of key-value pairs 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T23:16:57.513

Tommyo 是对的，你不能对`NSDictionary`. 其目的是在性能方面有效地存储和检索数据。

如果您需要按特定顺序存储数据，请使用`NSArray`键（正如您已经在做的那样），并在需要时使用它来访问字典值。

# windows-7 - 为什么应用程序会崩溃而不留下崩溃转储？

> ID：11479459
> 
> 赞同：0
> 
> 时间：2012-07-13T23:06:49.800
> 
> 标签：windows-7, crash-dumps

我有一个应用程序崩溃了

> “异常未知软件异常 (0x4000000015) 发生在位置 0x76d66109 的应用程序中。单击确定以终止程序”

但没有故障转储存储在 CrashDumps 文件夹或可靠性历史记录中的任何引用中。

如何强制记录故障转储？

Windows 7 企业版，64 位。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T08:57:22.797

使用第三方崩溃报告工具，如[CrashRpt](http://code.google.com/p/crashrpt/)。

# php - Magento PDF发票：如何防止总计部分的翻译

> ID：11479460
> 
> 赞同：1
> 
> 时间：2012-07-13T23:06:59.870
> 
> 标签：php, magento

我想了解 Magento 打印 PDF 发票时如何省略翻译部分。总计部分包括小计、总计、折扣等。我对在语言环境文件夹中翻译这些不感兴趣，因为这些术语已在网站前端的其他部分使用，我想始终打印用简单的英文发票。

```
print_r($total);
$total->setOrder($order)->setSource($source);
if ($total->canDisplay()) {
    foreach ($total->getTotalsForDisplay() as $totalData) {
        print_r($total);
        ....
    }
} 
```

我想我找到了告诉 Magento 翻译这些术语的代码。

```
print_r($total);

Mage_Tax_Model_Sales_Pdf_Subtotal Object
(
    [_data:protected] => Array
        (
            [@] => Array
                (
                    [translate] => title
                )

            [title] => Subtotal
            [source_field] => subtotal
            [font_size] => 7
            [display_zero] => 1
            [sort_order] => 100
            [model] => Mage_Tax_Model_Sales_Pdf_Subtotal Object
 *RECURSION*
        )

    [_hasDataChanges:protected] => 1
    [_origData:protected] => 
    [_idFieldName:protected] => 
    [_isDeleted:protected] => 
    [_oldFieldsMap:protected] => Array
        (
        )

    [_syncFieldsMap:protected] => Array
        (
        )

)

print_r($total);

Array
(
    [amount] => US$11.99
    [label] => ì†Œê³„:    // translated term
    [font_size] => 7
) 
```

我试过做`$total['@'] = array('translate'=>'')`，但它仍然将“小计”翻译成另一种语言。有任何想法吗？

# coffeescript - d3 Rickshaw Graph 禁用悬停效果

> ID：11479463
> 
> 赞同：2
> 
> 时间：2012-07-13T23:07:20.470
> 
> 标签：coffeescript, d3.js

我在 d3 上使用人力车。当我将鼠标悬停在条形图上的条上时，我想显示 x 轴值，但我想禁用显示系列类型和 y 轴值的悬停效果。

有没有办法只显示一个而不显示另一个？我试过这样做，但它不起作用（我正在将此咖啡脚本编译为 javascript）：

```
hoverDict =
  graph: graph
  xFormatter: (x) ->
    today = new Date()
    today.setDate(today.getDate()- x + 1)
    return today.toDateString()
  yFormatter: null
hoverDetail = new Rickshaw.Graph.HoverDetail(hoverDict) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:21:54.260

我想到了。您必须为 .item.active 字段编辑 rickshaw.css：

```
.rickshaw_graph .detail .item.active {
opacity: 1;
display:none;
} 
```

制作 display:none 将使 yFormatter 不显示。

# jquery - 如何使用 Mousenter 事件渲染 Rails Partial

> ID：11479470
> 
> 赞同：2
> 
> 时间：2012-07-13T23:07:54.107
> 
> 标签：jquery, ruby-on-rails

这里有点 jQuery/JavaScript 初学者所以提前感谢您提供的任何帮助。

我有一个页面`index.erb`，其中包含：

```
 <div class="box">
   change me out
 </div>

 <div class="box">
   <p>change me out</p>
 </div> 
```

和部分`_more_info.erb`

```
<div class="update">
  <p>You've been changed</p>
</div> 
```

当用户在任何一个上执行“mouseenter”事件时，呈现部分的最佳方式是`class=box`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:20:20.273

在你的 CSS 中：

`.update { display: none; }`

在 jQuery 文档就绪函数中：

`$('.box').mouseenter(function() { $('.update').show(); });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:41:18.947

```
var boxHtml = $(".box").html();

$(".box")
    .mouseover(function() {
            $(".box").html("<%= escape_javascript(render(:partial => 'more_info')) %>");      
    })
    .mouseout(function() {
           $(".box").html(boxHtml);
    }); 
```

# tcl - 在文件中查找搜索字符串并使用这些行在 TCL 中进行处理

> ID：11479471
> 
> 赞同：0
> 
> 时间：2012-07-13T23:08:11.320
> 
> 标签：tcl

更准确地说：

我需要查看一个文件 abc.txt，其内容如下：

```
files/f1/atmp.c        98   100  

files/f1/atmp1.c       89   100 

files/f1/atmp2.c  !!   75   100

files/f2/btmp.c        92   100

files/f2/btmp2.c  !!   85   100

files/f3/xtmp.c        92   100 
```

脚本需要找到“！！” 并使用这些行打印出以下内容作为输出：

```
atmp2.c  75

btmp2.c  85 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:28:14.123

这应该可以解决问题。

```
set data {files/f1/atmp.c        98   100  
files/f1/atmp1.c       89   100 
files/f1/atmp2.c  !!   75   100
files/f2/btmp.c        92   100
files/f2/btmp2.c  !!   85   100
files/f3/xtmp.c        92   100}

set lines [split $data \n]
foreach line $lines {
  set match [regexp {(\S+)\s+!!\s+(\d+)} $line -> file num]
  if {$match} {puts "$file $num"}
} 
```

虽然 regexp 有一个 -all 开关，但我认为我们不能在这里使用它，因为我们只能使用 -all 获得最后一个匹配变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:21:37.617

如果您的文件不是很大，您可以将整个内容放入内存中，将这些行拆分为一个 TCL 列表，然后遍历该列表以查找匹配项。例如：

```
set fh [open foo]
set lines [read $fh]
close $fh

set lines [split $lines "\n"]
foreach line $lines {
    if { [regexp {.*/(\S+\.c)\s*!!\s*(\d+)} $line match file data] } {
        puts "$file $data"
    }
} 
```

这将成功返回带有“!!”的行 在他们中。使用您发布的语料库，结果是：

```
atmp2.c 75
btmp2.c 85 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:38:19.170

诀窍是将从文件中读取行的代码与检测匹配行并提取相关部分的正则表达式结合起来（使用 的一步过程`regexp`）。唯一棘手的部分是弄清楚*究竟*要使用什么作为正则表达式，这样你才能得到你想要的。我猜你在 . 之后的文件名部分之后`/`，这些文件名不会包含空格，并且你所追求的数字是双感叹号后的第一个数字序列的全部。（其他格式也是可能的，其中一些更容易使用其他工具提取，例如`scan`.）这会给我们这样的结果：

```
set f [open abc.txt]
while {[gets $f line] >= 0} {
    if {[regexp {([^\s/]+)\s+!!\s+(\d+)} $line -> name value]} {
        # Or do whatever you want with these
        puts "$name $value"
    }
}
close $f 
```

（`gets`带有两个参数的命令返回读取行的长度，或者`-1`失败。对于*普通文件*，唯一的失败模式是 EOF，所以我们可以在得到负值时终止循环。其他类型的通道可能更复杂...... )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T18:55:58.970

在这种情况下，我可能会想 exec 到 awk：

```
set output [exec awk {$2 == "!!" {print $1, $3}} abc.txt]
puts $output 
```

# ruby - 使用 rest-client 获取请求的正确语法

> ID：11479478
> 
> 赞同：4
> 
> 时间：2012-07-13T23:09:14.737
> 
> 标签：ruby, rest-client

现在我可以提出如下请求：

```
user = 'xxx'  
token = 'xxx'  
survey_id = 'xxx'  
response = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php?Request=getLegacyResponseData&User=#{user}&Token=#{token}&Version=2.0&SurveyID=#{survey_id}&Format=XML" 
```

但是应该有一些更好的方法来做到这一点。我试过这样的事情：

```
response = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php", :Request => 'getLegacyResponseData', :User => user, :Token => token, :Version => '2.0', :SurveyID => survey_id, :Format => 'XML'</code> 
```

及其变体（字符串而不是键的符号，包括{和}，使键小写等），但我尝试的任何组合似乎都不起作用。这里的正确语法是什么？

* * *

我尝试了下面的第一个建议。它没有用。作为记录，这有效：

```
surveys_from_api = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php?Request=getSurveys&User=#{user}&Token=#{token}&Version=#{version}&Format=JSON" 
```

但这不是：

```
surveys_from_api = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php", :params => {:Request => 'getSurveys', :User => user, :Token => token, :Version => version, :Format => 'JSON'} 
```

（我设置了*version = '2.0'*）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T06:37:26.940

您需要使用符号 :params 指定查询字符串参数。否则它们将被用作标题。

带参数的示例：

```
response = RestClient.get "https://survey.qualtrics.com/WRAPI/ControlPanel/api.php", :params => {:Request => 'getLegacyResponseData', :User => user, :Token => token, :Version => '2.0', :SurveyID => survey_id, :Format => 'XML'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-28T10:56:23.890

I had the same problem with Rest-Client (1.7.2) I need to put both params and HTTP headers.

I solved with this syntax:

```
params = {id: id, device: device, status: status}
headers = {myheader: "giorgio"}

RestClient.put url, params, headers 
```

I hate RestClient :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T13:05:12.813

在[rest-client api docs](http://www.rubydoc.info/gems/rest-client/1.6.3/RestClient/Request#initialize-instance_method)中，我看到这`headers`是一个`Hash`，如果你想同时提供 - 标头和参数，那么你需要在哈希中使用一个`:params`键。`headers`例如

`headers = { h1 => v1, h2 => v2, :params => {my params} }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T09:03:32.813

你真正需要的是`URI.encode_www_form()`方法。

```
uri = URI("https://survey.qualtrics.com/WRAPI/ControlPanel/api.php")
request_params = {
  Request: 'getLegacyResponseData',
  ...
}
uri.query = URI.encode_www_form(request_params)
response = RestClient.get(uri.to_s) 
```

# python - 平均降雨量计算器

> ID：11479485
> 
> 赞同：2
> 
> 时间：2012-07-13T23:09:55.590
> 
> 标签：python, average

这是我迄今为止编写的更新程序：

```
# This program averages rainfall per month.  It asks the user for the number
# of years.  It will then display the number of months, the total inches of
# rainfaill, and the average rainfall per month for the entire period.

# Get the number of years.

total_years = int(input('Enter the amount of years: '))

# Get the amount of rainfall for each month of each year.

for years in range(total_years):
    # Initialize the accumulator.
    total = 0.0
    print('Year', years + 1)
    print('----------------')
    for month in ('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'):
        inches = float(input(month))
        total += inches

total_inches = total

total_month = total_years * 12

average_inches = total / total_month

        # Display the average.
print('The total number of months is: ', total_month)
print('The total inches of rainfall is: ', total_inches)
print('The average rainfall per month for the entire period is: ', average_inches)

print() 
```

这是我在尝试测试代码时收到的新错误消息：

```
Traceback (most recent call last):   File
"C:/Users/Alex/Desktop/Programming Concepts/Homework 2/Chapter
5/Average Rainfall maybe.py", line 23, in <module>
average_inches = total / month
TypeError: unspupported operand type(s) for /: 'float' and 'str' 
```

关于如何修复/改进此代码的任何想法？

现在，我需要解决的只是我的计算。我认为他们错了（第 23-27 行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:50:13.323

错误消息引用了发生错误的位置：

```
average_inches = total / month 
```

具体来说，

```
TypeError: unspupported operand type(s) for /: 'float' and 'str' 
```

..是说它不能将浮点数（`total`）除以字符串（`month`）。

`month`是完全错误的除以（它只是一个包含“January”或其他内容的字符串）..你想除以[月数](http://docs.python.org/library/functions.html#len)

作为提示，我建议先做：

```
ALL_MONTHS = ('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'): 
```

然后将循环更改为：

```
for month in ALL_MONTHS: 
```

这样你`ALL_MONTHS`以后可以再次参考...

# android - Android 兼容性问题

> ID：11479496
> 
> 赞同：0
> 
> 时间：2012-07-13T23:11:15.833
> 
> 标签：android, google-maps, compatibility

我正在开发一个使用谷歌地图（谷歌 API）的安卓应用程序。此时它只是一个带有指南针的简单地图，它会获取用户单击的位置的地址。问题如下：

最低 SDK 版本：API **8级**

目标 SDK：API 级别**14**

**正如我认为的那样，这应该在8**到**14**的范围内正常工作。但它只能在 API 级别**14**上正常工作。**我在Android 2.3.3 (API 10)**上测试了该应用程序，但缺少指南针，地址功能也无法正常工作。

需要明确的是，问题是：

如何正确地做到兼容性？

提前致谢

**注意：**我使用的是模拟器（在 Eclipse 上）而不是真实设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:14:38.663

模拟器在使用 Google Maps API 时遇到了很多麻烦。要使用 Goole Maps API 进行任何实际测试，您应该拥有一个真实的设备。

# php - 为什么 MySQL 添加撇号？

> ID：11479498
> 
> 赞同：0
> 
> 时间：2012-07-13T23:11:19.783
> 
> 标签：php, mysql, codeigniter, activerecord, where

这是我正在构建的 where 子句：

```
 $where = "requesterid='".$memberid."' AND recieverid='".$tomemberid."' OR requesterid='".$tomemberid."' AND recieverid='".$memberid."'"; 
```

现在`$memberid`和`$tomemberid`都是整数。这是我执行它时的错误：

> 'where 子句'中的未知列'requesterid='6''

SQL：

```
SELECT * FROM (`friendships`) WHERE `requesterid='6'` AND
recieverid='5' OR requesterid='5' AND recieverid='6' 
```

为什么 MySQL 在数字 6 后添加撇号？我打印出来了`$memberid`，它之后/之前没有显示任何撇号或其他任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:14:21.533

如果这些是数值，您可以省略撇号

```
$where = "(requesterid=$memberid AND recieverid=$tomemberid) OR (requesterid=$tomemberid AND recieverid=$memberid)"; 
```

# c# - Windows 窗体中的“iframe”

> ID：11479499
> 
> 赞同：0
> 
> 时间：2012-07-13T23:11:36.680
> 
> 标签：c#, winforms

我想准备带有静态部分和可变内容的单个窗口，就像 HTML 中的 iframe（带有菜单和页面本身）。如何通过 Windows 窗体设计器执行此操作？我可以使用标签，也许以某种方式禁用在它们之间手动切换的可能性......但我想有一些更优雅的方式来做到这一点，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:21:34.890

创建一个用户控件并将其放置在窗体上。用户控件将是您的“iframe”，表单的其余部分将是“静态”内容。

# android - 启动应用程序和登录的 Bash 脚本 - 卡住，光标不会在页面下移动

> ID：11479502
> 
> 赞同：1
> 
> 时间：2012-07-13T23:12:09.300
> 
> 标签：android, bash, shell, input, adb

我想做的：清除数据，然后启动我的应用程序。在第一页，向下选项卡并同意条件，然后在下一页选项卡向下到登录文本字段，输入用户名、密码，然后点击登录。

发生的情况是数据被清除，应用程序启动，然后应用程序只是坐在条款/条件屏幕上，光标不会向下移动到按钮。

我错过了什么？我是否需要将焦点移到屏幕上，以便光标在移动之前获得一个位置？

```
#!/bash/src

adb shell pm clear com.myapp.package
adb shell am start -n com.myapp.package/com.myapp.package.Main
adb shell input keyevent 20 
adb shell input keyevent 20
adb shell input keyevent 20
adb shell input keyevent 20
adb shell input keyevent 21
adb shell input keyevent 66
adb shell input text "username"
adb shell input keyevent 20
adb shell input text "password"
adb shell input keyevent 20
adb shell input keyevent 66 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:13:25.253

您可以尝试发送一个返回按钮，看看您是否可以取消条款和条件：

```
adb shell input keyevent 4 
```

# spotify - 我可以做一个 Spotify 应用程序的有限测试版吗？

> ID：11479503
> 
> 赞同：-1
> 
> 时间：2012-07-13T23:12:09.257
> 
> 标签：spotify

想知道，一旦我提交了一个概念并获得批准，我是否能够在提交它以供普遍使用之前与真正的 Spotify 用户测试我的应用程序。如果是这样，我该怎么做？我希望我可以有一个人们可以接受条件并单击接受的页面，然后它将在他们的安装中安装该应用程序，但它在一般应用程序商店中不可见。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:16:09.827

目前没有可用的托管测试环境。如果您想测试应用程序，您必须手动分发应用程序包并要求 Spotify 用户在 developer.spotify.com 上获取应用程序开发人员权限

# c++ - 获取所有函数参数名称

> ID：11479505
> 
> 赞同：1
> 
> 时间：2012-07-13T23:12:26.283
> 
> 标签：c++

我想要的一个例子是：

```
char const * bar (T1 x, T2 y) {
    return "bar";
}

char const * foo (T1 z, T2 w) {
    return bar(__PARAMS__);
} 
```

应该扩大到

```
char const * bar (T1 x, T2 y) {
    return "bar";
}

char const * foo (T1 z, T2 w) {
    return bar(z, w);
} 
```

有没有办法在不手写的情况下实现这样的远程操作？

原因：这将有助于我想要实现的代码生成方案的模板元编程。它可以让我从字面上复制和粘贴这些行。周围的东西（咳咳！）

```
void f0 () {
    DumpCode(__PARAMS__); // DumpCode();
}

void f1 (T1 x) {
    DumpCode(__PARAMS__); // DumpCode(x);
}

void f2 (T1 x, T2 y) {
    DumpCode(__PARAMS__); // DumpCode(x, y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T22:29:46.330

C 甚至 C++ 都无法以编程方式获取当前函数参数的名称或类型，也无法获取当前函数本身。他们让你得到的最接近的东西是`__func__`，它只是当前函数名称的*字符串表示形式。*

因此，您将不得不在某处捕获参数的名称，以便您可以在参数列表和参数列表中使用它们`DumpCode`。当我们想要捕获一大块文本然后一次将其替换到两个地方时，就需要一个**宏**。

至于有选择地扩展类型，只要你的所有类型都是 typedef 的，这相当容易。如果您必须处理选择性地扩展`int (*x)()`vs `x`，您将不得不重构此代码，使其更加难看。

```
#define PARAMS(x) x
#define ARGS(x)

#define P(TYPE) TYPE(T1) z, TYPE(T2) w
char const * foo (P(PARAMS)) {
    return bar(P(ARGS));
}
#undef P

#define P(TYPE)
void f0 (P(PARAMS)) {
    DumpCode(P(ARGS)); // DumpCode();
}
#undef P

#define P(TYPE) TYPE(T1) x
void f1 (P(PARAMS)) {
    DumpCode(P(ARGS)); // DumpCode(x);
}
#undef P

#define P(TYPE) TYPE(T1) x, TYPE(T2) y
void f2 (P(PARAMS)) {
    DumpCode(P(ARGS)); // DumpCode(x, y);
}
#undef P 
```

# python - 如何在python中提取属性的值？

> ID：11479506
> 
> 赞同：0
> 
> 时间：2012-07-13T23:12:27.143
> 
> 标签：python, beautifulsoup

我有一个 html 文件说：

```
<html>...  
  <li id="123"></li>
  <li id="3455"></li>
  ....
</html> 
```

如何使用 BeautifulSoup 在 python 中获取所有 id 的值？所需的输出是：`["123","3455"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:26:53.267

要获得您想要的列表，请使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。它可以在一行中完成，如下所示（最后一行）：

```
html = '<html> <li id="123"></li><li id="3455"></li> </html>'
soup = BeautifulSoup(html)

attrs = [li['id'] for li in soup.find_all('li')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:21:43.977

```
from BeautifulSoup import BeautifulSoup

foo = '<html> <li id="123"> </li> <li id="3455"></li> </html>'

soup = BeautifulSoup(foo)

for id in soup.html.findAll('li'):
    print id['id'] 
```

# objective-c - 计算被拖拽的UIView在Superview子视图中哪个UIView占据更大的区域

> ID：11479507
> 
> 赞同：0
> 
> 时间：2012-07-13T23:12:31.230
> 
> 标签：objective-c, uiview, position

我想在行和列中找出按行和列排序的 UIView、超级视图内的子视图，同时拖动其中一个，然后让它与其他所有视图中的哪一个与其更大区域相交。

我需要这个在相交的 UIView 之间插入可拖动的 UIView。

我必须计算 frame.origin 值吗？如果是，我可以举个例子吗？或者这可能使用 iOS SDK 发生？

我已经知道 CGRectIntersectsRect 但这给了我第一个相交的 UIView。尽管它最可能需要将 UIView 放置在其他 UIView 之间。我有一个使用 pointInside 的例子，但没有运气。

代码：

```
CGPoint centerInView = [viewDragged convertPoint:viewDragged.center toView:view]; // Checking with the views inside NSMutableArray in a for in statement

if ([view pointInside:centerInView withEvent:nil]) // This if statement almost never is true sometimes only 
```

其他方法：

```
if (CGRectIntersectsRect(viewDragged.frame, view.frame)) // This always happens for the first UIView in subviews that intersects. Not so applicable for information 
```

基本上这个想法是在最近的 UIViews 之间插入可拖动的视图。

想象屏幕中有 1,2,3,4,5 个相同大小的视图，并尝试拖动第一个让它在 4,5 之间移动，然后有 2,3,4,1,5。你明白了。这一切都应该在没有任何新网格的帮助下发生。我需要的唯一部分是计算您将 1 UIView 放在 4,5 之间。

我可以开始计算帧、原点，但这对我来说听起来效率不高。有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T19:35:40.950

我现在这是一个老问题，但这可能会有所帮助。具有最大 CGRect 交点的视图被“选中”。

```
CGRect intersect = CGRectZero;
UIView *selectedDropView = nil;
for (UIView *dropView in dropViews) {
    CGRect intersectTmp = (CGRectIntersection(self.frame, dropView.frame));
    if (intersectTmp.size.width * intersectTmp.size.height > intersect.size.width * intersect.size.height) {
        intersect = intersectTmp;
        selectedDropView = dropView;
    }
} 
```

# python - 为什么我的 SQL 查询不起作用？

> ID：11479508
> 
> 赞同：0
> 
> 时间：2012-07-13T23:12:31.370
> 
> 标签：python, sql

我发布这个，并得到这个错误：

```
c.execute("""update resulttest set category=""" + key + ", value=""" + str(value))

OperationalError: (1054, "Unknown column 'composed' in 'field list'") 
```

我正在尝试更新列类别和字段，组成只是类别中的一个值。

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:19:29.860

您可以使用插值和参数化查询来更容易阅读语法，没有转义引号或任何东西。

`c.execute("""update resulttest set category=?, value=?""", (key, value))`

[https://stackoverflow.com/a/775399/594589](https://stackoverflow.com/a/775399/594589)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:15:59.530

```
// **mysql based**
string cmd = "UPDATE resulttest SET category=\"" + key + "\", value=\"" + str(value) + "\"";

// **sql based**
string cmd = "UPDATE resulttest SET category='" + key + "', value='" + str(value) + "'";

// make sure you command output a escaped format
// UPDATE resulttest SET category='test', value='test'
// UPDATE resulttest SET category="test", value="test"

c.execute(cmd); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T23:18:22.757

如果您生成查询字符串，然后在尝试执行之前将其打印出来，您可能会看到一些有趣的东西。你试过吗？

我认为您的引号可能没有正确完成。也就是说，也许您希望查询看起来像这样：

`update resulttest set category='somekey', value='composed'`

我不认为这是您正在编写的查询字符串所得到的。

# php - Foreach 循环中的 If 语句

> ID：11479512
> 
> 赞同：1
> 
> 时间：2012-07-13T23:13:16.383
> 
> 标签：php, arrays, if-statement, foreach

我有一个 php 页面，我正在尝试简化它并且遇到了一些我无法单独解决的问题。我的表单获取用户数据，发布到自身，验证字段是否已填写，然后将表单内容/发布到 mysql 数据库。

我遇到的问题是，我不想有 20 个 if()/elseif 语句，而是想将变量名称加载到数组中，循环遍历该数组，如果变量没有填充到表单中，它会产生错误消息. 不幸的是，无论字段中是否包含值，我的代码都会显示错误消息。

作为附加说明，我可以将 $ShippingCo 添加到我的表单中并回显它，但仍然会显示未完成的通知。

此外，如果脚本进入 if 语句，我希望它在关闭后停止执行页面的其余部分，我尝试退出；没有成功。

这是我所拥有的：

```
<?php

$ShippingCo = $_POST['ShippingCo'];
$ShipAcct = $_POST['ShipAcct'];
$ShipService = $_POST['ShipService'];
$FOB = $_POST['FOB'];
$Terms = $_POST['Terms'];

$ENote[] = '$Terms';
$ENote[] = '$FOB';
$ENote[] = '$ShippingCo';
$ENote[] = '$ShipAcct';
$ENote[] = '$ShipService';

$Emessg[] = 'Shipping Terms';
$Emessg[] = 'FOB Method';
$Emessg[] = 'Shipping Company';
$Emessg[] = 'Shipping Account';
$Emessg[] = 'Shipping Service Type';

foreach ($ENote as $a => $b) {

if(!$$ENote[$a]){       //I intentionally put the '$$' in this line otherwise none of the messages show. . . with data in the variables or not.

$error = "Error!  Please Add the $Emessg[$a]!";
?>
<table width="800" align="center">
<tr>
<td align="center">

<h2>Sales Order Entry Form</h2>
</td>
</tr>
<tr>
<td align="center">
<h3>
<font color="red">
<?php
echo "$error";
?>
</font>
</h3>
</td>
</tr>
<tr>
<td align="center">
Please press back to properly complete the form</td>
</tr>
</table>

<?php
}
}
?> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:43:13.737

我怀疑语法`$$ENote[$a]`可能被解释为`($$ENote)[$a]`而不是`$($ENote[$a])`（括号不是合法语法，仅用于演示）。

所以我建议一个中间变量，或者复杂的语法：

```
foreach ($ENote as $a => $b) {
  $varname = $ENote[$a];
  if(!$$varname){ 
```

或（未经测试，只是预感它可能会起作用）：

```
foreach ($ENote as $a => $b) {
  if(!${$ENote[$a]}){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:45:44.593

为什么不创建一个数组或所有字段并将该数组传递给一个函数，然后在该函数中循环遍历每个项目，如果为空则抛出错误？

像这样的东西：

```
function checkEmpty($some_array) {
    foreach($some_array as $key=>$value) {
      if($value=="") {
         or if(empty($key)) {   ///throw error }
         //put error message and exit

       }

    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:13:25.133

这里有几个问题在起作用。

首先，每个`$ENote`条目必须省略前导`$`。[变量变量](http://php.net/manual/en/language.variables.variable.php)不得包含该`$`部分。

```
$ENote[] = 'Terms';
$ENote[] = 'FOB';
... 
```

其次，正如 ctrahey 所说，您需要将变量名存储到一个变量中，以便用另一个`$`.

以下是一些代码清理技巧：

*   将两个数组合并为一个（地图）。
*   `$_POST`从循环内分配给命名变量。
*   用于`break`退出循环。

这将消除大部分冗余。

```
$ENote = array(
    'Terms' => 'Shipping Terms',
    'FOB' => 'FOB Method',
    ...
);

foreach ($ENote as $field => $title) {
    $value = $$field = $_POST[$field];
    if (!$value) {
        ... display error using $title ...
        break;  // exit loop
    }
} 
```

# github - Github 是否有显示文件版本之间差异的视图？

> ID：11479516
> 
> 赞同：-1
> 
> 时间：2012-07-13T23:13:47.117
> 
> 标签：github, diff, revision-history

我正在寻找一个突出显示文件更改的视图，类似于您在查看 SO 项目的“编辑”按钮或 wiki 页面的历史时可以看到的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:16:14.360

例如[https://github.com/clojure/clojure/commit/c89bf2e9bcfc1bca62e36dee2d78a48f8c38c15c](https://github.com/clojure/clojure/commit/c89bf2e9bcfc1bca62e36dee2d78a48f8c38c15c)

您正在寻找“差异”又名“变更集”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T11:49:07.570

注意：更改集视图不仅提供 diff（逐行或[并排](https://stackoverflow.com/a/25657797/6309)），现在（2014 年 9 月 4 日）提供**逐字 diff**。

看：

## “ [Diffs 中更好的单词突出显示](https://github.com/blog/1885-better-word-highlighting-in-diffs)”

> 提交、比较视图和拉取请求现在突出显示单个更改的单词而不是整个更改的部分，让您更容易准确地查看添加或删除的内容。

![https://cloud.githubusercontent.com/assets/917945/4137704/c79d41de-3389-11e4-9730-434b99d7e8f8.gif](../Images/a36752b0db128835882e387c4a6c2039.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T11:39:00.210

另请参阅[比较跨时间的提交](https://help.github.com/articles/comparing-commits-across-time/)。

# django - Django：Heroku 迁移导致错误

> ID：11479517
> 
> 赞同：1
> 
> 时间：2012-07-13T23:14:00.327
> 
> 标签：django, heroku, django-south

我已经完成了我的第一个 Django 应用程序，并且在 Heroku 中遇到了迁移问题。我在本地使用 South 迁移，然后尝试将这些迁移移动到 Heroku 上的数据库。

当我跑的时候：

```
heroku run stentorian/manage.py syncdb migrate report 
```

我收到以下错误：

```
['/app/stentorian', '/app/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg', '/app', '/app/.heroku/venv/lib/python27.zip', '/app/.heroku/venv/lib/python2.7', '/app/.heroku/venv/lib/python2.7/plat-linux2', '/app/.heroku/venv/lib/python2.7/lib-tk', '/app/.heroku/venv/lib/python2.7/lib-old', '/app/.heroku/venv/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7', '/usr/local/lib/python2.7/plat-linux2', '/usr/local/lib/python2.7/lib-tk', '/app/.heroku/venv/lib/python2.7/site-packages', '/app/.heroku/venv/lib/python2.7/site-packages/PIL']
Error: Command doesn't accept any arguments 
```

我已经对此进行了研究，但似乎无法找到解决此问题的方法。在此之前，我将 django-flaggit 应用程序安装到我的应用程序中，该应用程序不使用迁移，并且必须使用传统的同步数据库来在 Heroku 中设置表。我想知道这是否有影响。

如果有人对此问题有任何见解，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:57:57.787

您在这里所做的实际上是连续调用两个不同的命令：`syncdb`和`migrate`.

south 的通常工作流程是运行 syncdb 以同步所有不支持 south 的应用程序，然后迁移以在支持 south 的应用程序上工作。实际上，如果您只是在安装了 south 的情况下运行 syncdb，它会告诉您哪些应用程序未同步并且必须迁移。

所以，总结一下：

```
heroku run stentorian/manage.py syncdb 
heroku run stentorian/manage.py migrate report 
```

# winapi - http请求的进程ID，安装程序

> ID：11479522
> 
> 赞同：1
> 
> 时间：2012-07-13T23:14:42.480
> 
> 标签：winapi, http, process, installation, windows-installer

我试图找出在安装 msi 包期间是否发出了任何 http 请求。在我看来，发出 http 请求的过程与执行安装程序的过程没有任何血缘关系。

例如，我安装了一个在安装过程中进行 http 调用的应用程序。使用 SysInternals 进程监视器，我看到安装开始时创建的进程。使用 MS NetworkMonitor，我可以看到用于生成 http 请求的过程。事后在Process Monitor中过滤显示http进程和install进程之间没有关系。

我在想，无论何时发出 http 请求，操作系统都会以某种方式说要使用新进程。我最重要的要求是我能够将一个与另一个相关联，以便明确地说“此应用安装在安装期间调用了这些 http 资源”。所以我不必完全理解这一切在幕后是如何运作的，但是，我现在处于停滞状态。我得出的结论是，没有办法将两者联系起来。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:01:48.077

Okay, let's assume that `msiexec.exe` invokes a helper and that helper invokes whatever is causing the HTTP traffic. Right after the first helper spawns the child it kills itself. This process is too short-lived to normally see the relationships here.

Enter the "Process Tree" feature of Process Monitor. Keep Process Monitor running without any filters on process events. After you are done you can then press `Ctrl`+`T` to see the Process Tree (see below).

![Process Tree feature](../Images/cd3ce5367f76336bd04c64e13968a048.png)

The grayed icons tell you the process is not active anymore. Furthermore the last column is the end time of the process. But best of all you can see which process created which other process from this, even for very very short-lived processes.

Mark Russinovich, author of Process Monitor and its predecessors, [demonstrated this](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/SIA302) at TechEd about a month ago.

Although this may not answer the question entirely, it should get you going in the right direction. After all Process Monitor also includes network activity filtering (albeit crude, compared to Network Monitor and Wireshark :)).

btw: the green bar in the above screenshot is the "timeline" where you can see the runtime of the process in relation to other processes. Very nifty.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:50:07.960

您是否使用自定义操作来发出 Web 请求？Windows Installer 服务进程在与您的主设置实例不同的 MSIEXEC 实例中运行自定义操作。

更多信息在这里：http: [//blogs.msdn.com/b/astebner/archive/2005/03/02/384088.aspx](http://blogs.msdn.com/b/astebner/archive/2005/03/02/384088.aspx)

# javascript - 如何使用目录中的文件 url 在 javascript 中添加第二个类？

> ID：11479524
> 
> 赞同：2
> 
> 时间：2012-07-13T23:15:14.137
> 
> 标签：javascript, jquery, expression, filepath, addclass

我正在使用以下 javascript 添加基于 url 名称的类。

```
$(function(){
    var loc = window.location.pathname.match(/^\/?(\w+)\b/);
    if(loc) $(document.body).addClass(loc[1].toLowerCase());
} 
```

它工作正常，除非文件在目录中，它只添加文件夹名称而不是文件名。我添加了第二个要添加的变量，但是我没有正确的表达式，它不断将整个 url products/nameofile.php 添加为类

```
$(function(){
    var loc = window.location.pathname.match(/^\/?(\w+)\b/);
    var loc2 = window.location.pathname.match(/^\/?(.*)\b/);
    if(loc) $(document.body).addClass(loc[1].toLowerCase());
    if(loc2) $(document.body).addClass(loc2[1].toLowerCase());
} 
```

我想知道为目录中的文件添加要为第二个类添加的类的正确表达式。而不是 'products/nameofile.php' 我只想将 'nameofile' 类添加到正文中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:22:44.827

尝试这个：

```
$(function(){
    var loc = window.location.pathname.split("/");
    if (loc[loc.length-1]) {
       var cls = loc[loc.length-1]].split('.');
       $('body').addClass(cls[0].toLowerCase());
   }
}) 
```

[演示](http://jsfiddle.net/jKPCj/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:25:23.593

不使用正则表达式，但也许这会为您指明正确的方向。

[http://jsfiddle.net/aTnyk/](http://jsfiddle.net/aTnyk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:28:12.513

不要使用正则表达式，只需使用简单的`split()`and `pop()`：

```
var loc = window.location.pathname.split('/').pop(); 
```

# c# - 如何将字符串转换为 linq 表达式？

> ID：11479525
> 
> 赞同：9
> 
> 时间：2012-07-13T23:15:14.420
> 
> 标签：c#, asp.net-mvc-3, linq, generics

类似：[将字符串转换为 Linq.Expressions 或使用字符串作为选择器？](https://stackoverflow.com/q/2783432/1026459)

类似的一个：[将 Linq 表达式作为字符串传递？](https://stackoverflow.com/q/3280422/1026459)

另一个具有相同答案的问题：[如何从 C# 中的字符串创建基于动态 lambda 的 Linq 表达式？](https://stackoverflow.com/q/10114841/1026459)

问一个有很多类似问题的东西的原因：

这些类似问题的公认答案是不可接受的，因为它们都引用了 4 年前为旧框架 (.net 3.5) 编写的库（假定它是由代码大师 Scott Gu 编写的），除了提供链接作为答案。

有一种方法可以在不包含整个库的情况下在代码中执行此操作。

以下是针对这种情况的一些示例代码：

```
 public static void getDynamic<T>(int startingId) where T : class
    {
        string classType = typeof(T).ToString();
        string classTypeId = classType + "Id";
        using (var repo = new Repository<T>())
        {
            Build<T>(
             repo.getList(),
             b => b.classTypeId //doesn't compile, this is the heart of the issue
               //How can a string be used in this fashion to access a property in b?
            )
        }
    }

    public void Build<T>(
        List<T> items, 
        Func<T, int> value) where T : class
    {
        var Values = new List<Item>();
        Values = items.Select(f => new Item()
        {
            Id = value(f)
        }).ToList();
    }

    public class Item
    {
     public int Id { get; set; }
    } 
```

请注意，这并不是要将整个字符串转换为表达式，例如

```
query = "x => x.id == somevalue"; 
```

而是试图只使用字符串作为访问

```
query = x => x.STRING; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T23:50:04.207

这是一个表达式树尝试。我仍然不知道这是否适用于实体框架，但我认为值得一试。

```
Func<T, int> MakeGetter<T>(string propertyName)
{
    ParameterExpression input = Expression.Parameter(typeof(T));

    var expr = Expression.Property(input, typeof(T).GetProperty(propertyName));

    return Expression.Lambda<Func<T, int>>(expr, input).Compile();  
} 
```

像这样称呼它：

```
Build<T>(repo.getList(), MakeGetter<T>(classTypeId)) 
```

如果您可以使用 a`Expression<Func<T,int>>`代替 a `Func`，那么只需删除对 的调用`Compile`（并更改 的签名`MakeGetter`）。

* * *

**编辑**：在评论中，TravisJ 问他如何像这样使用它：`w => "text" + w.classTypeId`

有几种方法可以做到这一点，但为了便于阅读，我建议先引入一个局部变量，如下所示：

```
var getId = MakeGetter<T>(classTypeId);

return w => "text" + getId(w); 
```

要点是 getter 只是一个函数，您可以像平常一样使用它。像这样读`Func<T,int>`：`int DoSomething(T instance)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T00:14:49.330

这是我的测试代码（linqPad）为您提供的扩展方法：

```
class test
{
   public string sam { get; set; }
   public string notsam {get; set; }
}

void Main()
{
   var z = new test { sam = "sam", notsam = "alex" };

   z.Dump();

   z.GetPropertyByString("notsam").Dump();

   z.SetPropertyByString("sam","john");

   z.Dump();
}

static class Nice
{
  public static void  SetPropertyByString(this object x, string p,object value) 
  {
     x.GetType().GetProperty(p).SetValue(x,value,null);
  }

  public static object GetPropertyByString(this object x,string p)
  {
     return x.GetType().GetProperty(p).GetValue(x,null);
  }
} 
```

结果：

![结果](../Images/8d3d58c2f22f0457d45ff5c4ce6378b4.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T23:46:45.900

我还没有尝试过，不确定它是否会起作用，但你可以使用类似的东西：

`b => b.GetType().GetProperty(classTypeId).GetValue(b, null);`

# ruby - Ruby Grit：查找 2 个分支之间的提交

> ID：11479541
> 
> 赞同：0
> 
> 时间：2012-07-13T23:18:40.123
> 
> 标签：ruby, git, grit

我想比较 2 个分支并显示存在于一个但不存在于另一个的提交。这可以从命令行工作`git log --pretty=oneline branch_b ^branch_a --no-merges`并给我想要的东西，但我想在 Grit 中模拟相同的东西来获得使用对象而不是字符串。这在 Grit 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:50:42.300

我认为这样的事情应该可以解决问题：

```
require 'grit'
repo = Grit::Repo.new(".")
repo.commits_between("branch_b", "branch_a") 
```

请参阅[http://grit.rubyforge.org/classes/Grit/Repo.html#M000227](http://grit.rubyforge.org/classes/Grit/Repo.html#M000227)获取文档（[http://grit.rubyforge.org/](http://grit.rubyforge.org/)获取完整文档）。

这会给你提交数组中的对象，但它不会像 git 命令那样格式化输出。此外，它不排除合并提交。

为了获得格式化输出，请尝试以下操作：

```
puts repo.commits_between("branch_b", "branch_a").map { |c| ["*", c.id_abbrev, c.authored_date.to_date, c.short_message] * " " } 
```

# php - MySQL get 哪里有很多多对多的匹配？

> ID：11479542
> 
> 赞同：1
> 
> 时间：2012-07-13T23:18:40.513
> 
> 标签：php, mysql, sql, many-to-many

好吧，这对我来说是一个令人头疼的问题。我有一个带有标签的帖子系统。标签与帖子是多->多关系。

问题是我想根据与当前帖子匹配的标签数量来选择其他帖子。

一个快速的视觉示例：

```
PostA: TagA, TagB
PostB: TagC
PostC: TagA
PostD: TagA, TagB 
```

所以如果我输入 PostA，它会给我 PostD，PostC。

我真的不知道从哪里开始，我希望比我更聪明的人已经遇到了这个问题并且可以提供一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T23:24:15.080

好的，假设您的 tagged posts 表实际上如下所示：

```
PostA   TagA
PostA   TagB
PostB   TagC
PostC   TagA
PostD   TagA
PostD   TagB 
```

那么你想要

```
SELECT post FROM tagged_posts
  WHERE post != 'PostA'
  AND tag in (SELECT tag FROM tagged_posts WHERE post = 'PostA')
  GROUP BY post
  ORDER BY COUNT(*) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:11:27.737

如果有人感兴趣，这里是 wordpress 版本。它使用标签（但可以轻松修改类别）。希望它也对其他人有所帮助。

注意：需要两个变量，$wpdb 类（如果在函数中调用，则需要全局化）和 $post->ID，它是通过调用 the_post() 自动设置的，否则需要手动设置。

```
$query = $wpdb->get_results("
SELECT posts.*
FROM {$wpdb->term_relationships} as relate
LEFT JOIN {$wpdb->term_taxonomy} as taxonomy
    ON relate.term_taxonomy_id = taxonomy.term_taxonomy_id
LEFT JOIN {$wpdb->terms} as terms
    ON taxonomy.term_id = terms.term_id
LEFT JOIN {$wpdb->posts} as posts
    ON posts.ID = object_id
WHERE object_id != '{$post->ID}'
    AND taxonomy = 'post_tag'
    AND taxonomy.term_id in
        (
            SELECT term_id
            FROM {$wpdb->term_relationships} as relate
            LEFT JOIN {$wpdb->term_taxonomy} as taxonomy
                ON relate.term_taxonomy_id = taxonomy.term_taxonomy_id
            WHERE object_id = '{$post->ID}'
        )
GROUP BY object_id
ORDER BY COUNT(*) desc
"); 
```

# iphone - 不同类型的 initWithNibName

> ID：11479543
> 
> 赞同：0
> 
> 时间：2012-07-13T23:18:41.420
> 
> 标签：iphone, objective-c, ios, xcode, interface-builder

有人可以让我理解以下代码片段之间的区别。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization

    }  
    return self; 
} 
```

和

```
-(id)initWithCoder:(NSCoder *)decoder 
```

苹果文档说从情节提要中实例化视图控制器时使用 initWithCoder。请有人可以使用 initWithCoder 方法编写示例代码来启动视图控制器。

我实际上是 ios 编程的新手，所以只想知道其中的区别。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:25:05.383

最重要的区别是 initWithCoder: 在从情节提要中提取 VC 时调用，而 initWithNibName 则不调用。出于所有意图和目的，您可以忽略该`WithCoder:`位（将其传递给 除外`[super initWithCoder:decoder]`）。该方法是 Cocoa 中对象归档/序列化库的一部分，在需要对实例化对象进行归档/取消归档时使用它们。

这样想会有所帮助：*当您在 Xcode 中构建应用程序时，*您的 ViewController 实际上会被实例化和初始化，然后归档**到您的 storyboard**中。然后在运行时，故事板被视为存档，您的工作更像是“从存档重新初始化”而不是传统的 init。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:46:25.640

它通常在从 IB（笔尖，或从情节提要）创建时被调用，但是当对象被归档或序列化时也会被调用（查看 NSUnarchiver）。

至于实现它，你可以像对待它一样对待它 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 但是，你只需要确保你将额外的参数传递给 super调用它时的类：

```
- (id)initWithCoder:(NSCoder*) coder
{
    self = [super initWithCoder: coder];
    if (self) {
        // do your setup here.
    }
    return self;
} 
```

您可能永远不会调用它，但如果您使用嵌入在 nib 中的自定义类/视图，界面构建器会调用它。如果你在代码中初始化它，你应该使用 initWithNibName。

# configuration - Hadoop Configuration.addDefaultResource() 不工作

> ID：11479545
> 
> 赞同：1
> 
> 时间：2012-07-13T23:19:27.997
> 
> 标签：configuration, hadoop, configuration-files

我的以下代码不会产生预期的输出：

```
public static void main(String[] args) throws MalformedURLException {

    Configuration.addDefaultResource("/home/some_user/conf.xml");
    Configuration conf = new Configuration();
    System.out.println(conf);
    System.out.println(conf.get("color"));
    assertThat(conf.get("color"), is("yellow"));
} 
```

该属性`color`在 conf.xml 文件中设置如下：

```
<property>
        <name>color</name>
        <value>yellow</value>
        <description>Color</description>
</property> 
```

看起来文件`conf.xml`没有被合并到默认配置中。

的文档`Configuration.addDefaultResource(String param)`说参数应该在类路径中。当我已经为程序提供完整的绝对路径时，我不明白如何将文件添加到类路径中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:30:37.250

第一个观察：我不知道您使用哪个版本的 hadoop，但 addDefaultResource() 已被弃用很长时间。

在更高版本的 Hadoop 中，完成您想要的标准方法是：

```
Configuration conf = new Configuration()
conf.addResource("path/to/file");
... 
```

Regarding the classpath issue, you have to simply place the config file in the classpath. So you have to discover what the classpath is to(it is either an environment var or the one which you set with -classpath option). If you didn't use the -classpath option and there is no classpath environment variable then it is automatically set to the current directory (".")

# java - Android 相机 setJpegQuality 被忽略

> ID：11479548
> 
> 赞同：21
> 
> 时间：2012-07-13T23:20:02.413
> 
> 标签：java, android, camera

似乎 Camera.Parameters 的 setJpegQuality 方法被忽略了，至少在我尝试过的设备上（Nexus S、Galaxy S2）。

它是否适用于其他任何人，或者这是一个已知问题，或者我做错了什么，或者......？

下面是设置参数的代码。jpeg quality 1 非常有特色，因此很容易从视觉上确定它是否有效……但事实并非如此！此处设置的其他参数（例如棕褐色）起作用。

```
 camera = Camera.open();
    final Camera.Parameters parameters = camera.getParameters();
    parameters.setJpegQuality(1);
    parameters.setPictureFormat(ImageFormat.JPEG);
    // Let's set a SEPIA effect, just to verify these parameters are working at all!
    parameters.setColorEffect(Camera.Parameters.EFFECT_SEPIA);
    // I've seen this syntax too on the internet, presumably it's legacy.
    parameters.set("jpeg-quality", 1);
    camera.setParameters(parameters); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:59:28.007

设置图片的所有属性：

```
parameters.setPreviewSize(854, 480);  // (h, w)
   parameters.setPictureFormat(ImageFormat.JPEG);
   parameters.set("jpeg-quality", 100);
   parameters.set("orientation", "landscape");
   parameters.set("rotation", 90);
   mCamera.setParameters(parameters);
   mCamera.startPreview(); 
```

# javascript - 在指定的小时/分钟更换幻灯片

> ID：11479549
> 
> 赞同：0
> 
> 时间：2012-07-13T23:20:17.097
> 
> 标签：javascript, jquery, slideshow, jquery-cycle

我正在做一个项目，目标是在节日的大屏幕上展示信息。主要关心的是在适当的时间获得适当的内容，即下一个乐队播放等等。根据一天中的时间，还会有不同的信息。

我渴望创建一些我可以远程更改的东西，即如果程序有任何更改。演唱会进行时，现场摄像机的视频会投射到屏幕上，所以我有很多机会在没有人注意的情况下更改内容和刷新页面。

jQuery Cycle 和其他幻灯片脚本做了很多工作，但我还没有找到任何提供其他设置然后是特定间隔的解决方案。在这种情况下这是行不通的，因为简单的刷新会破坏整个事情......

总而言之，我正在寻找一种可以实现这一点的解决方案：

*   8 月 2 日 6:03:30：放映幻灯片 1
*   8 月 2 日 6:05:00：放映幻灯片 2
*   8 月 2 日 6:10:00：放映幻灯片 3

...等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:30:02.873

大概是这样的？ [http://jsfiddle.net/pMXNQ/](http://jsfiddle.net/pMXNQ/)

# rest - 是否可以将 EJB 项目公开为 RESTful WS？

> ID：11479551
> 
> 赞同：1
> 
> 时间：2012-07-13T23:20:49.830
> 
> 标签：rest, ejb-3.0, jax-rs, distributed-computing

我使用 jersey 实现了一个 RESTful Web 服务并将其部署在 Tomcat 上，我使用 DAO 类来操作数据库操作，使用实体来包装数据库记录。并在单独的包装中进行处理。我想使用 EJB 使这个系统分布式。首先，做这个改变会很容易。或者我需要从头开始重写。其次，我仍然需要 REST WS，那么是否可以将 EJB 公开为 REST WS 以及如何公开？REST WS 是在同一个 EJB 项目中还是在不同的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:07:54.617

您绝对可以将其用作 EJB 和 REST WS。将您的 Tomcat 安装升级到[TomEE Plus](http://tomee.apache.org)，然后添加`@Stateless`或添加`@Singleton`到现有的 REST 服务。

您将不再需要 Jersey，因为 Java EE 版本的 Tomcat (TomEE) 包含用于 JAX-RS 支持的 CXF。

此示例没有很好地记录，但显示了一个结合了 EJB 和 JAX-RS 的功能应用程序。

[http://tomee.apache.org/examples-trunk/rest-on-ejb/README.html](http://tomee.apache.org/examples-trunk/rest-on-ejb/README.html)

# .net - 我可以将 App_Start 文件夹的名称更改为 AppStart 吗？

> ID：11479552
> 
> 赞同：3
> 
> 时间：2012-07-13T23:20:53.633
> 
> 标签：.net, asp.net-web-api

我不喜欢 .Net 文件夹中的下划线约定，我想将新 WebApi 项目的 App_Start 文件夹重命名为 AppStart。这样做会破坏某些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:24:14.417

*“WebActivator 是一个 NuGet 包，它允许其他包轻松地将启动和关闭代码引入 Web 应用程序。这提供了一个比必须使用许多包的启动逻辑修改 global.asax 更简洁的解决方案。”*

如果您使用似乎越来越流行的[WebActivator ，您可能会遇到一些困难。](https://github.com/davidebbo/WebActivator)请参阅 David Ebbo 关于“ [NuGet 和 WebActivator](http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html)的 App_Start 文件夹约定”的帖子。请参阅GitHub 页面上“**请遵循文件夹约定**”下的要点。

如果你有一个 WebAPI 项目，你很可能已经对 WebActivator 产生了依赖——我有，但没有意识到它是什么——所以我的建议是不要管它。事情已经够复杂了！

# android - android中的自定义TextView具有不同的颜色词

> ID：11479560
> 
> 赞同：15
> 
> 时间：2012-07-13T23:22:10.350
> 
> 标签：android, textview

是否可以`textview`为每个单词设置不同的颜色？甚至每一个字母？我尝试扩展`textview`和创建它，但是我想到的问题是，如何用不同的颜色同时绘制所有文本？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-13T23:28:11.453

利用[`android.text.Spannable`](http://developer.android.com/reference/android/text/Spannable.html)

```
final SpannableStringBuilder str = new SpannableStringBuilder(text);
str.setSpan(
    new ForegroundColorSpan(Color.BLUE), 
    wordStart, 
    wordEnd, 
    SpannableStringBuilder.SPAN_EXCLUSIVE_EXCLUSIVE
);
myTextView.setText(str); 
```

**编辑**：使所有“Java”变为绿色

```
final Pattern p = Pattern.compile("Java");
final Matcher matcher = p.matcher(text);

final SpannableStringBuilder spannable = new SpannableStringBuilder(text);
final ForegroundColorSpan span = new ForegroundColorSpan(Color.GREEN);
while (matcher.find()) {
    spannable.setSpan(
        span, matcher.start(), matcher.end(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
    );
}
myTextView.setText(spannable); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-13T23:38:44.940

该类允许您通过该方法应用 CharacterStyle (ie) 的`SpannableString`扩展，轻松地以一种方式格式化字符串的某些部分（跨度）和另一种格式。`ForegroundColorSpan``setSpan`

你可以试试这个：

```
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    richTextView = (TextView)findViewById(R.id.rich_text);

    // this is the text we'll be operating on
    SpannableString text = new SpannableString("Lorem ipsum dolor sit amet");

    // make "Lorem" (characters 0 to 5) red
    text.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0);

    // make "ipsum" (characters 6 to 11) one and a half time bigger than the textbox
    text.setSpan(new RelativeSizeSpan(1.5f), 6, 11, 0);

    // make "dolor" (characters 12 to 17) display a toast message when touched
    final Context context = this;
    ClickableSpan clickableSpan = new ClickableSpan() {
        @Override
        public void onClick(View view) {
            Toast.makeText(context, "dolor", Toast.LENGTH_LONG).show();
        }
    };
    text.setSpan(clickableSpan, 12, 17, 0);

    // make "sit" (characters 18 to 21) struck through
    text.setSpan(new StrikethroughSpan(), 18, 21, 0);

    // make "amet" (characters 22 to 26) twice as big, green and a link to this site.
    // it's important to set the color after the URLSpan or the standard
    // link color will override it.
    text.setSpan(new RelativeSizeSpan(2f), 22, 26, 0);
    text.setSpan(new URLSpan("http://www.chrisumbel.com"), 22, 26, 0);
    text.setSpan(new ForegroundColorSpan(Color.GREEN), 22, 26, 0);

    // make our ClickableSpans and URLSpans work
    richTextView.setMovementMethod(LinkMovementMethod.getInstance());

    // shove our styled text into the TextView        
    richTextView.setText(text, BufferType.SPANNABLE);
} 
```

结果将如下所示：

![在此处输入图像描述](../Images/401fbdb41e50b73cff7aef73ca59bf5d.png)

有关详细信息，请参阅 Chris Umbel[博客](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T23:29:01.020

是的，您可以使用[Spannable](http://developer.android.com/reference/android/text/Spannable.html)和[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)来做到这一点。有关示例，请参阅[是否有任何关于 Spanned 和 Spannable 文本](https://stackoverflow.com/questions/2159847/is-there-any-example-about-spanned-and-spannable-text)的示例。

有关格式化文本的各种方式（背景色、前景色、可点击等），请参阅[CharacterStyle](http://developer.android.com/reference/android/text/style/CharacterStyle.html)。

# ruby-on-rails - 错误：操作控制器：安装引导程序/custom.css.scss 时捕获异常

> ID：11479561
> 
> 赞同：1
> 
> 时间：2012-07-13T23:22:12.510
> 
> 标签：ruby-on-rails, activerecord, twitter-bootstrap

我卡住了...我正在阅读 Hartls RoR 教程，但不知何故我无法摆脱一个错误。一切顺利，直到第 5.1.1 节结束。当我安装引导程序并设置 custom.css.scss

我只是把我认为你可能需要回答我的问题的东西放在这里。不知道进一步了，希望你能帮助我解决这个问题......

这就是我在本地主机上测试运行时抛出的内容

```
ActiveRecord::ConnectionNotEstablished

ActiveRecord::ConnectionNotEstablished

Rails.root: C:/Ruby193/bin/rails_projects/sample_app
Application Trace | Framework Trace | Full Trace

activerecord (3.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:409:in `retrieve_connection'
activerecord (3.1.1) lib/active_record/connection_adapters/abstract/connection_specification.rb:107:in `retrieve_connection'
activerecord (3.1.1) lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
activerecord (3.1.1) lib/active_record/query_cache.rb:65:in `rescue in call'
activerecord (3.1.1) lib/active_record/query_cache.rb:59:in `call'
activerecord (3.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:477:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (3.1.1) lib/active_support/callbacks.rb:392:in `_run_call_callbacks'
activesupport (3.1.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/reloader.rb:68:in `call'
rack (1.3.6) lib/rack/sendfile.rb:101:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
railties (3.1.1) lib/rails/rack/logger.rb:13:in `call'
rack (1.3.6) lib/rack/methodoverride.rb:24:in `call'
rack (1.3.6) lib/rack/runtime.rb:17:in `call'
activesupport (3.1.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.3.6) lib/rack/lock.rb:15:in `call'
actionpack (3.1.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.1.1) lib/rails/engine.rb:456:in `call'
railties (3.1.1) lib/rails/rack/content_length.rb:16:in `call'
railties (3.1.1) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.3.6) lib/rack/handler/webrick.rb:59:in `service'
C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

Request

Parameters:

None

Show session dump

Show env dump

GATEWAY_INTERFACE: "CGI/1.1"
HTTP_ACCEPT: "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
HTTP_ACCEPT_ENCODING: "gzip, deflate"
HTTP_ACCEPT_LANGUAGE: "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3"
REMOTE_ADDR: "127.0.0.1"
REMOTE_HOST: XXXXXXXXXXXXX
SERVER_NAME: "localhost"
SERVER_PROTOCOL: "HTTP/1.1"

Response

Headers:

None 
```

...

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

我尝试了其他gem文件，例如这个，也不起作用（尽管它在这里回答了一个不同的问题）：

```
source 'http://rubygems.org'

gem 'rails', '3.1.1'

gem 'sqlite3'

group :development do
  gem 'rspec-rails', '2.6.1'
end

group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'webrat', '0.7.1'
end

group :assets do
  gem 'sass-rails',   '~> 3.1.4'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

# coldfusion - vCalendar 代码忽略 说明字段中标记后的所有内容

> ID：11479562
> 
> 赞同：0
> 
> 时间：2012-07-13T23:22:17.760
> 
> 标签：coldfusion, vcalendar

在我运行一个之后，我正在传递一个描述字段

```
cfset local.description = rereplacenocase(arguments.description,chr(13),'<br>','all') 
```

到DESCRIPTION:#local.description#\n

它只显示第一行直到第一个 BR。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:55:49.973

改为使用`replace()`。你不是真的在这里做正则表达式......

```
var description = replace(arguments.description, chr(13), '<br>', 'all'); 
```

或者，使用类似[paragraphFormat()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e24.html)或[paragraphFormat2()](http://www.cflib.org/udf/paragraphformat2)

# android - Android TCP 客户端/服务器崩溃

> ID：11479565
> 
> 赞同：1
> 
> 时间：2012-07-13T23:22:43.277
> 
> 标签：android, tcp, crash

您好，我对 TCP 很陌生，我想构建一个多人游戏。但是我遇到了一个致命错误，每次打开“Client.java”类时我的应用程序都会崩溃。

我得到一个 android.os.NetworkOnMainThreadException，我已经在 android 清单中添加了 INTERNET 权限。我从另一个使用 Intent 去这个类，是的，我有 setOnClickListener(this); 在那里并将 Activity 添加到manufest，因此它不会因此而崩溃。如果这是一个好主意，我在应用程序中构建 TCP 服务器和客户端，那么我将如何使其成为公共主机？就像我需要为主机付费然后在服务器和客户端中使用 ip/port 一样？

无论如何，这是代码：

```
package com.theory.game;
import java.io.BufferedReader; 
import java.io.IOException; 
import java.io.InputStreamReader; 
import java.io.PrintWriter; 
import java.net.Socket; 
import java.util.Scanner; 
import android.app.Activity; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.Button; 
import android.widget.EditText; 
import android.widget.TextView; 

public class Client extends Activity { 
/** Called when the activity is first created. */ 
Scanner scanner = new Scanner(System.in); 
//StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 

@Override 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.client); 
    //StrictMode.setThreadPolicy(policy);  
    final EditText msg = (EditText) findViewById(R.id.etMsg); 
    Button send = (Button) findViewById(R.id.bSend); 
    final TextView convo = (TextView) findViewById(R.id.tvConvo); 
    final TextView status = (TextView) findViewById(R.id.tvStatus); 

    try { 
        send.setOnClickListener(new View.OnClickListener() { 

            Socket s = new Socket("10.0.2.2", 8080); 
            String message = msg.getText().toString(); 

            @Override 
            public void onClick(View v) { 
                status.setText("..."); 
                PrintWriter outp = null; 
                BufferedReader inp = null; 
                status.setText("Established connection.."); 
                String serverMsg = null; 

                try { 
                    outp = new PrintWriter(s.getOutputStream(), true); 
                    inp = new BufferedReader(new InputStreamReader(s.getInputStream())); 
                    serverMsg = inp.readLine(); 
                } catch (IOException e) { 
                    e.printStackTrace(); 
                } 
                convo.append(serverMsg + "\n"); 

                if (message != null) { 
                    if (msg.getText().toString().trim() == "QUIT") { 
                        try { 
                            s.close(); 
                        } catch (IOException e) { 
                            e.printStackTrace(); 
                        } 
                        status.setText("Disconnected from server."); 

                    } else { 
                            try { 

                                convo.append(message + "\n"); 
                                outp.println(message);  
                                serverMsg = inp.readLine(); 
                                convo.append(serverMsg + "\n"); 
                            } catch (IOException e) { 
                                e.printStackTrace(); 
                            } 
                    } 

                } 
                else 
                    status.setText("Problem in connection..!"); 
            } 
        }); 
    } catch (IOException e) { 
        e.printStackTrace(); 
    } 
} 
}

`FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity 
android.os.NetworkOnMainThreadException
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime(706):  at android.app.ActivityThread.handleLaunchActivity
E/AndroidRuntime(706):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime(706):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-13 22:53:18.542: E/AndroidRuntime(706):  at android.os.Handler.dispatchMessage(Handler.java:99)

E/AndroidRuntime(706):  at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(706):  at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(706):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(706):  at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(706):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

E/AndroidRuntime(706):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(706):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(706): Caused by: android.os.NetworkOnMainThreadException
E/AndroidRuntime(706):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)

E/AndroidRuntime(706):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
E/AndroidRuntime(706):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
E/AndroidRuntime(706):  at libcore.io.IoBridge.connect(IoBridge.java:112)
E/AndroidRuntime(706):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
E/AndroidRuntime(706):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
E/AndroidRuntime(706):  at java.net.Socket.startupSocket(Socket.java:566)
E/AndroidRuntime(706):  at java.net.Socket.tryAllAddresses(Socket.java:127)
E/AndroidRuntime(706):  at java.net.Socket.<init>(Socket.java:177)
E/AndroidRuntime(706):  at java.net.Socket.<init>(Socket.java:149)
E/AndroidRuntime(706):  at com.theory.game.Client$1.<init>(Client.java:35)
E/AndroidRuntime(706):  at com.theory.game.Client.onCreate(Client.java:33)
E/AndroidRuntime(706):  at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(706):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)

E/AndroidRuntime(706):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

E/AndroidRuntime(706):  ... 11 more ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:31:01.567

您的目标是 SDK 11 或更高版本并启用了严格模式吗？每当您尝试在主线程上执行网络操作时，都会引发 NetworkOnMainThreadException。将您的网络代码移至 AsyncTask。您不仅会处理异常，还会改进您的应用程序。

使用 AsyncTask 非常简单，并且有很多很好的教程。[Lars Vogel的](http://www.vogella.com/articles/AndroidPerformance/article.html)[Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)和教程。

# c++ - 在 C++ 服务和用户模式应用程序崩溃后收集崩溃 .dmp 和 .hdmp 文件

> ID：11479571
> 
> 赞同：3
> 
> 时间：2012-07-13T23:23:05.883
> 
> 标签：c++, winapi, crash, crash-reports, crash-dumps

我正在使用 WinAPI 在 C++/MFC 中进行编码。我的软件由本地服务和为登录的 Windows 用户提供用户界面的用户模式应用程序组成。我正在寻找一种方法来收集 .dmp 和 .hdmp 文件，以防这些模块中的任何一个发生崩溃。我知道[WER](http://msdn.microsoft.com/en-us/library/bb513641%28v=vs.85%29)应该收集它们并将它们提交给 Microsoft。有没有办法收集这些文件并将它们保存在硬盘上的某个位置？

PS。我需要它在 Windows XP SP3、Vista、7、8 下工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:49:21.697

Windows 2000 和 XP 已经使用 DrWatson 保存故障转储。运行`drwtsn32.exe`允许您获取/配置日志和转储文件的路径。

Windows Vista+ 仅使用 WER，默认情况下不保存转储，但您可以[启用创建用户模式转储](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)。
我将`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps\DumpType`值设置为 2 以保存完整转储，默认情况下存储在`%LOCALAPPDATA%\CrashDumps`( `C:\Users\dee.earley\AppData\Local\CrashDumps`) 中。

安装[WinDebug 之](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)类的调试器还可以让您在发生异常时从用户模式应用程序和服务中捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:49:25.900

如果您正在寻找一种在客户方面处理崩溃的方法，那么最好的解决方案是使用 google-breakpad 库。在您的情况下，异常处理程序将在磁盘上写入转储文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:25:55.960

Microsoft 的 DebugDiag 工具对于监控进程以及在异常和崩溃时吐出转储文件非常有用。

[http://www.microsoft.com/en-us/download/details.aspx?id=26798](http://www.microsoft.com/en-us/download/details.aspx?id=26798)

我已经在多个客户环境中使用它来追踪我无法在自己的环境中重现的问题。

# jquery - 删除组中单击的复选框上的“悬停”功能

> ID：11479572
> 
> 赞同：0
> 
> 时间：2012-07-13T23:23:12.310
> 
> 标签：jquery

我正在尝试删除组中单击的复选框上的“悬停”功能。我可以通过以下方式在组中的所有复选框上执行此操作：

```
$(document).off('hover', '.myClass .leftSpan'); 
```

有没有办法从点击的复选框中删除它？

“悬停”功能首先将悬停放在那里，单击旨在开始填充记录集，但我想要：

```
$(document).on('hover', '.myClass .leftSpan', function () {
    var parID = $(this).prev('input').prop('id')
    $('#lblOutput').text(parID);
    GetSites(parID, 'false');
    GetGroupMetadataFromGroupID(parID);
}); 
```

这是点击功能：

```
$(document).on('click', '.myClass .leftSpan', function () {
    var parID = $(this).prev('input').prop('id')
    $('#lblOutput').text(parID);
    GetSites(parID, 'false');
    GetGroupMetadataFromGroupID(parID);
    $(document).off('hover', parID);
}); 
```

但它不起作用。我需要对任何被点击的人做这件事。这可能是从一个到所有被点击。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:44:54.247

`$(document).off("hover", ".myClass:checked");`?

甚至更好

`$(".myClass:checked").off("hover")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:57:55.147

真正简单的解决方案。我没有找到删除悬停属性的令人满意的方法，因此我重新配置了代码测试是否选中了复选框，如果选中，则错过调用与复选框相关的位置列表的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:42:39.600

您可以使用命名空间事件，它会更容易且更具可读性。

```
var myhover = function () { ... }
$(document).on('hover.myhover', '.myClass .leftSpan', myhover) //on
$(document).off('hover.myhover') //off 
```

在任何情况下，除非您的元素是您的直接子元素，否则`body`应该使用最近的静态父元素，而不是`document`为了获得最佳性能。

# java - 具有类层次结构的 UML 类图组合

> ID：11479574
> 
> 赞同：5
> 
> 时间：2012-07-13T23:23:27.577
> 
> 标签：java, uml, composition, class-diagram

我想知道我是否可以像我所做的那样对下面两个类层次结构之间的关系进行建模：

![汽车发动机组成关系](../Images/61a9adf899e59e92668734cf32786c55.png)

代表此含义的代码将类似于：

```
public abstract class Car
{
    protected Engine engine;  
}
public class StreetCar extends Car
{
     public StreetCar()
     {
          engine = new StreetEngine();
     }
} 
```

...类似地，对于 OffroadCar 类，它会执行类似`engine = new OffroadEngine()`. 我没有包含任何关于加速（）方法的内容，它不相关。

我只想知道合成是否正确建模，或者添加那么多合成箭头是否多余甚至错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:56:34.227

在回答问题之前，这是其中一种情况，将层次关系与组合关系分开是一个好主意，就好像它们在不同类型的图表中一样。

注意：我在图中添加了引擎，作为“受保护”和“类”前缀，以避免混淆。

**(1) 组成图**

“CarClass”的一个对象，它由一个“EngineClass”的单个对象组成。

```
..............................................................................
..+-------------------------------------+........+-------------------------+..
..|           <<abstract>>              |........|      <<abstract>>       |..
..|             CarClass                |........|       EngineClass       |..
..+-------------------------------------+........+-------------------------+..
..| [#] Engine: EngineClass             |<*>-----+ [+] startEngine(): void |..
..+-------------------------------------+........+-------------------------+..
..| [+] acelerate(): void <<virtual>>   |.....................................
..+-------------------------------------+.....................................
.............................................................................. 
```

**(2.1) 继承图**

在某些情况下，“CarClass”的对象可能有子类。

```
...........................................
..+-------------------------------------+..
..|           <<abstract>>              |..
..|             CarClass                |..
..+-------------------------------------+..
..| [#] Engine: EngineClass             |..
..+-------------------------------------+..
..| [+] acelerate(): void <<override>>  |..
..+-----------------+-------------------+..
.................../.\.....................
................../...\....................
.................+--+--+..............................................................
....................|.................................................................
....................+------------------------------------------+......................
....................|..........................................|......................
..+-----------------+-------------------+....+-----------------+-------------------+..
..|           <<concrete>>              |....|           <<concrete>>              |..
..|            StreetCarClass           |....|           OffRoadCarClass           |..
..+-------------------------------------+....+-------------------------------------+..
..| [+] acelerate(): void <<override>>  |....| [+] acelerate(): void <<override>>  |..
..+-------------------------------------+....+-------------------------------------+..
...................................................................................... 
```

**(2.2) 继承图**

在某些情况下，“EngineClass”的对象可能有子类。

```
...........................................
..+-------------------------------------+..
..|           <<abstract>>              |..
..|             EngineClass             |..
..+-------------------------------------+..
..| [+] acelerate(): void <<override>>  |..
..+-----------------+-------------------+..
.................../.\.....................
................../...\....................
.................+--+--+..............................................................
....................+------------------------------------------+......................
....................|..........................................|......................
....................|..........................................|......................
..+-----------------+-------------------+....+-----------------+-------------------+..
..|           <<concrete>>              |....|           <<concrete>>              |..
..|          StreetEngineClass          |....|          OffRoadEngineClass         |..
..+-------------------------------------+....+-------------------------------------+..
..| [+] startEngine(): void <<override>>|....| [+] startEngine(): void<<override>> |..
..+-------------------------------------+....+-------------------------------------+..
...................................................................................... 
```

**3 个回答**

现在，这是一种情况，其中一个类有一个至少一个组成成员，并且当主类被覆盖时，它的类型可能被覆盖。这有时被称为“并行层次软件模式”或“双层次软件模式”。

您只提到了每个主类的 2 个子类，但实际上可能还有更多。

通常我制作这样的图表有两种方式。一个，我制作了第一个图表，添加了一条注释，表明它是这种情况。

**3.1 主要并行层次图**

```
..............................................................................
..+-------------------------------------+........+-------------------------+..
..|           <<abstract>>              |........|       <<abstract>>      |..
..|             CarClass                |........|        EngineClass      |..
..+-------------------------------------+........+-------------------------+..
..| [#] Engine: EngineClass             |<*>-----+ [+] startEngine(): void |..
..+-------------------------------------+........+------------+------------+..
..| [+] acelerate(): void <<virtual>>   |.....................|...............
..+--------------+----------------------+.....................|...............
.................|............................................|...............
.................+--------------------------------------------+...............
.................|............................................................
........+--------+-------+....................................................
........|   Note:        |....................................................
........|   Paralell     /....................................................
........|   Hierarchy   /| ...................................................
........|              / |....................................................
........+-------------/--+....................................................
.............................................................................. 
```

第二种情况，当两个类都有都添加成员的子类时。

**3.2 附加并行层次图**

```
..............................................................................
..+---------------------------------------+........+-------------------------+..
..|             <<concrete>>              |........|       <<concrete>>      |..
..|            OffRoadCarClass            |........|    OffRoadEngineClass   |..
..+---------------------------------------+........+-------------------------+..
..| [+] createEngine(): void <<override>> |<*>-----+ [+] startEngine(): void |..
..+---------------------------------------+........| [+] nitroLevel(): void  |..
..| [+] useNitro(): void                  |........+------------+------------+..
..| [+] acelerate(): void <<override>>    |.....................|...............
..+--------------+------------------------+.....................|...............
.................|..............................................|...............
.................+----------------------------------------------+...............
.................|............................................................
........+--------+-------+....................................................
........|   Note:        |....................................................
........|   Paralell     /....................................................
........|   Hierarchy   /| ...................................................
........|              / |....................................................
........+-------------/--+....................................................
.............................................................................. 
```

如果需要，我可能会添加其他图表。

**4 给我看代码**

为了管理这种“并行”层次结构，通常，复合成员的创建由覆盖方法管理。

```
public abstract class EngineClass
{
    public void startEngine() { ... }  
} // EngineClass

public abstract class CarClass
{
    protected EngineClass engine;  

    public CarClass()
    {
      // ...
    }

    public EngineClass createEngine()
    {
      EngineClass Result = new EngineClass();
      return Result;
    }

    public void start()
    {
      this.Engine = createEngine();
    }
} // CarClass

public class StreetCarClass extends CarClass
{
     public StreetCarClass()
     {
       // ...
     }

    @override
    public EngineClass createEngine()
    {
      EngineClass Result = new StreetCarEngineClass();
      return Result;
    }
} // StreetCarClass 

public class OffRoadCarClass extends CarClass
{
     public OffRoadCarClass()
     {
       // ...
     }

    @override
    public EngineClass createEngine()
    {
      EngineClass Result = new OffRoadCarEngineClass();
      return Result;
    }
} // OffRoadCarClass 

public class ExampleClass
{
    public static main()
    {
      EngineClass OffRoadCar = new OffRoadCarClass();
      OffRoadCar.start();
    }
} // OffRoadCarClass 
```

干杯。

PS我可以，你，haz一个Fishburguer吗？

# core-data - 核心数据建模多对多

> ID：11479576
> 
> 赞同：0
> 
> 时间：2012-07-13T23:23:56.420
> 
> 标签：core-data, many-to-many

我有以下内容：

**交易**、**联系方式和**交易联系方式。一个**Deal**可以有多个**Contacts**。一个**联系人**可以属于多个**交易**。**DealContact**用于使用两种关系来维护这两种关系：**一对一**称为**交易**和**一对多**称为**联系人**。我还需要在**DealContact**中单独存储主要联系人。这是另一个称为**primary****的一对一**关系。

 ****然后， Contact**有一个与**DealContact****相反的一对多**，称为**dealcontacts**和**一个**称为**primarydealcontact**的一对多。**Deal与****DealContact**没有相反的关系。**交易也与Contact**没有直接关系。

 ******在 SQL 中，我会使用连接表对此进行建模。我正在尝试使用**DealContact进行此操作，因为除了****Deal**和相关的**Contacts**之外，我还需要存储其他属性。

有关此设置是否正确或设置更简单的任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:12:35.420

让我用一个小的老式 ASCII 模型来说明问题。

```
Deal
- stuff

Contact
- stuff
- dealcontacts ->> DealContact
- primarydealcontact -> DealContact

DealContact
- stuff
- deal -> Deal
- contacts ->> Contact
- primary -> Contact 
```

好的。

这东西不是很核心。

先说第一件事。

`Deal`: 我看不出与 不成反比的意义`DealContact.deal`。您必须`Deal`手动处理删除，以确保没有`DealContact`相关的`Deal`. 这种反向关系几乎不会让你付出任何代价。

`Contact`: 为什么是`Contact.primarydealcontract`一对一的关系？你确定一个`Contact`不能是几个的主要联系人`Deal`？

无论如何都要详细说明。让我们讨论什么不是非常核心数据。`DealContact`.

那个实体有什么意义？基本上，您已`Deal`连接到许多`Contact`，包括主要的`Contact`. 中的附加字段`DealContact`肯定与 the`Deal`或 a相关`Contact`，那么为什么要为它们提供专用实体呢？

这就是我看到实体的方式：

```
Deal
- stuff // from Deal & from DealContact
- contacts ->> Contact
- primarycontact -> Contract

Contact
- stuff
- deals ->> Deal.contacts
- dealsprimary ->> Deal.primarycontact 
```

Core Data 将创建必要的关系表来跟踪多对多关系。Core Data 在这方面做得很好。

当然我不知道你申请的所有细节，所以我的建议是，好吧，一个建议。而已。它可能适合您的需求，也可能不适合。但考虑到你所说的，它应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:06:27.123

所以事实证明，在重新设计了我的核心数据模型并删除了 DealContact 实体后，我发现我实际上并没有将 DealContact 对象（它具有核心数据访问器）传递给集合中的 removeContactsObject。清除此问题后（通过从模型中删除 DealContact 实体大大简化了此问题）[deal removeContactsObject:oneContact] 完全按预期工作。********

# sql - 带有 RETURNS TABLE(id integer) 的 PostgreSQL 存储过程返回所有 NULL

> ID：11479577
> 
> 赞同：9
> 
> 时间：2012-07-13T23:24:06.907
> 
> 标签：sql, postgresql, plpgsql

我在 PostgreSQL 8.4 中有一个存储过程，它根据作为参数传入的整数值调用另一个存储过程。调用这些存储过程以便它们应该返回与一个整数列的关系。我遇到的问题是外部存储过程总是返回具有正确行数但所有 id 为 NULL 的关系。

这是简化为最简单形式的存储过程：

```
CREATE OR REPLACE FUNCTION spa(count integer) 
RETURNS TABLE (id integer) AS $$
BEGIN
    RETURN QUERY SELECT generate_series(1, count);
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION spb(count integer) 
RETURNS TABLE (id integer) AS $$
BEGIN
    RETURN QUERY SELECT generate_series(1, count);
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION conditional_relation_return(objectType integer, count integer) 
RETURNS TABLE (id integer) AS $$
BEGIN
    IF objectType = 1 THEN
        RETURN QUERY SELECT id FROM spa(count);
    ELSIF objectType = 2 OR objectType = 3 THEN
        RETURN QUERY SELECT id FROM spb(count);
    END IF;

END;
$$ LANGUAGE plpgsql; 
```

如果你称之为：

```
# select * from conditional_relation_return(1, 2);
 id 
----

(2 rows) 
```

或者更具体地说：

```
# select count(*) from conditional_relation_return(1, 2) where id is null;
 count 
-------
     2
(1 row) 
```

但是，如果您调用其中一个引用的存储过程，您会得到正确的结果：

```
# select * from spa(2);
 id 
----
  1
  2
(2 rows) 
```

那么为什么 conditional_relation_return 返回所有的 NULL 呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T00:47:46.530

`id`spa 与 out 参数 id ( `RETURNS TABLE (id integer)`)冲突。Postgresql 8.4 没有抱怨，它从参数 id 中选择 id 而不是更理智的一个（spa 的 id）。

Postgresql 9.1 对您的原始代码的抱怨：

```
ERROR:  column reference "id" is ambiguous
LINE 1: SELECT id FROM spa(count)
               ^
DETAIL:  It could refer to either a PL/pgSQL variable or a table column.
QUERY:  SELECT id FROM spa(count)
CONTEXT:  PL/pgSQL function "conditional_relation_return" line 4 at RETURN QUERY 
```

要修复它，请完全限定查询中的 id：

```
CREATE OR REPLACE FUNCTION conditional_relation_return(
    objectType integer, count integer) 
RETURNS TABLE (id integer) AS $$
BEGIN
    IF objectType = 1 THEN
        RETURN QUERY SELECT x.id FROM spa(count) as x;
    ELSIF objectType = 2 OR objectType = 3 THEN
        RETURN QUERY SELECT x.id FROM spb(count) as x;
    END IF;

END;
$$ LANGUAGE plpgsql; 
```

输出：

```
test=# select * from conditional_relation_return(1, 2);
 id 
----
  1
  2
(2 rows) 
```

* * *

Postgresql 尊重您从`RETURNS TABLE`. 它仍然`x.id`插入`id`到您的`RETURNS TABLE`. 因此，即使您决定重命名`RETURNS TABLE`返回列的名称，它仍会`x.id`使用该名称，例如

```
CREATE OR REPLACE FUNCTION conditional_relation_return(
    objectType integer, count integer) 
RETURNS TABLE (hahah integer) AS $$
BEGIN
    IF objectType = 1 THEN
        RETURN QUERY SELECT x.id FROM spa(count) as x;
    ELSIF objectType = 2 OR objectType = 3 THEN
        RETURN QUERY SELECT x.id FROM spb(count) as x;
    END IF;

END;
$$ LANGUAGE plpgsql; 
```

输出：

```
test=# select * from conditional_relation_return(1, 2);
 hahah 
-------
     1
     2
(2 rows) 
```

注意`hahah`列

# javascript - 在 onkeyup 模拟按钮点击

> ID：11479579
> 
> 赞同：3
> 
> 时间：2012-07-13T23:24:29.150
> 
> 标签：javascript, asp.net, events

我有两个带有相应两个按钮的文本框。我希望当 TextBox 具有焦点并且用户按 Enter 键时，事件处理程序后面的相应 Button 代码会像被单击一样执行。这是一个示例代码：

ASP:

```
<asp:TextBox ID="TextBox1" runat="server" onkeyup="myfunction1(event)"></asp:TextBox>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button 1" usesubmitbehavior="false" />

<asp:TextBox ID="TextBox2" runat="server" onkeyup="myfunction2(event)"></asp:TextBox>
<asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Button 2" usesubmitbehavior="false" />

<asp:Label ID="Label1" runat="server"></asp:Label>

<script type="text/javascript">
    function myfunction1(e) {
        if (e.keyCode == 13)
            document.getElementById('<%= Button1.ClientID %>').click();
    }
    function myfunction2(e) {
        if (e.keyCode == 13)
            document.getElementById('<%= Button2.ClientID %>').click();
    }
</script> 
```

代码背后：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "Button 1 was clicked";
}

protected void Button2_Click(object sender, EventArgs e)
{
    Label1.Text = "Button 2 was clicked";
} 
```

但是当我在任何文本框中按 Enter 时，它总是执行`Button1`事件处理程序后面的代码。如果我单击按钮，它显然可以按预期工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:47:13.937

默认情况下，ASP 按钮呈现为提交按钮。当表单元素处于焦点时， Enter 的默认操作`keypress`（发生在 after `keydown`， before `keyup`）是提交表单。如果 HTML 表单包含多个提交按钮，则第一个是默认提交按钮。

将所有这些放在一起，当您`keypress`（记住，发生在 after `keydown`， before `keyup`）使用 Enter 键时，表单将通过默认提交按钮 ( `Button1`) 提交。

你有很多选择来解决这个问题。我建议使用一个`input type="button"`而不是一个 ASP 按钮，`runat=server`并从那里处理点击事件。

相关：[具有不同按钮类型的 Asp 按钮](https://stackoverflow.com/questions/4608921/asp-button-with-different-button-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:53:36.237

您可以通过将集合放在面板控件中并设置面板的 DefaultButton 属性来实现您的要求

例子：

```
<asp:Panel ID="Panel1" runat="server" DefaultButton="Button1" Height="72px">

   <asp:TextBox ID="TextBox1" runat="server" onkeyup="myfunction1()"></asp:TextBox>
   <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button 1" />

   <asp:TextBox ID="TextBox2" runat="server" onkeyup="myfunction2()"></asp:TextBox>
   <asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Button 2" />

</asp:Panel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T17:29:37.643

将按钮设置`UseSubmitBehavior`为`false`最简单的解决方案。来自[@jbabey 链接](https://stackoverflow.com/q/4608921/131874)中的[这个答案](https://stackoverflow.com/a/10812667/131874)。

# xml - 如何在保留换行符的同时整理一些 XML？

> ID：11479585
> 
> 赞同：0
> 
> 时间：2012-07-13T23:25:26.753
> 
> 标签：xml, newline, tidy

作为团队的一部分，我正在处理一些 XML 文件。由于有些人有不同的缩进设置，格式有时会搞砸，使用自动化工具重新漂亮打印文件很方便。有没有办法在不删除空行中的所有换行符的情况下漂亮地打印 XML？这些是我正在使用的人类可读/编辑的 XML 文件（Ant 脚本、配置文件、专有的类似 XHTML 的东西等）。这些文件中的换行符是将文本/代码流分解成块，对于使文件易于阅读非常重要。

我使用 EditPadPro 作为我的文本编辑器（它可以很好地使用外部工具），并使用 HTML Tidy 作为我的 XML 格式化程序，但我不喜欢它删除换行符。我可以使用什么工具来正确格式化/漂亮打印 XML，而不删除换行符？

烦人的 XML 示例：

```
<thing>
  <frob>
    </frob>

  <!-- Done frobbing; now for BAZ. -->
        <baz />
</thing> 
```

首选输出：

```
<thing>
  <frob>
  </frob>

  <!-- Done frobbing; now for BAZ. -->
  <baz />
</thing> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:50:00.807

您可以使用 XML 解析器对其进行解析并再次转储它。这是Python中的代码：

```
from xml.parsers.expat import ParserCreate

class process:
    def __init__(self):
        self.level = 0
    def start_element(self, name, attrs):
        attr = ''
        for i, j in attrs.iteritems():
            attr += ' {0}="{1}"'.format(i, j)
        print '{0}<{1}{2}>'.format('  '*self.level, name, attr)
        self.level += 1
    def end_element(self, name):
        self.level -= 1
        print '{0}</{1}>'.format('  '*self.level, name)
    def char_data(self, data):
        data = data.strip()
        if data:
            print '  '*self.level+data

if __name__ == '__main__':
    import sys
    for f in sys.argv[1:]:
        p = ParserCreate()
        q = process()
        p.StartElementHandler = q.start_element
        p.EndElementHandler = q.end_element
        p.CharacterDataHandler = q.char_data
        p.ParseFile(open(f)) 
```

将其另存为`xml_prettifier.py`并运行`python xml_prettifier.py <file>.xml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:38:56.163

当您全选并重新缩进（Ctrl+A、Ctrl+I）时，[Eclipse XML 编辑器会执行此操作。](http://www.eclipse.org/)这有点矫枉过正，因为 Eclipse 是一个完整的 IDE，而不是一个轻量级的文本编辑器，但如果你不顾一切，它是一个解决方案。

请注意，使用 XML 编辑器重新缩进会执行其他操作，例如在默认情况下将超过 80 个字符的元素拆分为多行，这当然可以进行调整或禁用。

# c# - 基于派生类的基类 Equals()

> ID：11479588
> 
> 赞同：2
> 
> 时间：2012-07-13T23:26:06.787
> 
> 标签：c#, inheritance, casting

我有两个类都派生自同一个父类：

```
public class People{
    public string BetterFoot;

    public override bool Equals(object obj){
        if (obj == null || this.GetType() != obj.GetType())
            return false;
        People o = (People)obj;
        return (this.BetterFoot == o.BetterFoot);
    }

public class LeftiesOrRighties: People{
    public string BetterHand;

    public override bool Equals(object obj){
        if (obj == null || this.GetType() != obj.GetType())
            return false;
        LeftiesOrRighties o = (LeftiesOrRighties)obj;
        return (this.BetterFoot == o.BetterFoot) &&
        (this.BetterHand == o.BetterHand)
    }
}

public class Ambidextrous: People{
    public string FavoriteHand;
} 
```

（那里也有 GetHashCodes，但我知道它们有效。）我想根据它们的根 Equals() 比较它们的集合：

```
ThoseOneHanded = new List<LeftiesOrRighties>(){new LeftiesOrRighties(){BetterFoot = "L"}};
ThoseTwoHanded = new List<Ambidextrous>(){new Ambidextrous(){BetterFoot = "L"}};
//using NUnit
Assert.That ((People)ThoseOneHanded[0], Is.EqualTo((People)ThoseTwoHanded[0]))); 
```

不幸的是，这会返回`false`。

为什么？铸造不应该使它们（出于所有意图和目的，如果不完全是）相同的类型，从而使用基本方法吗？如果不是，我如何真正将底层类型转换回`People`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:31:36.717

Cast 不会更改对象本身，因此 GetType 的结果将始终相同，因此您`this.GetType() != obj.GetType()`将是 true，因此该函数将返回 false。

以下逻辑可能会获得您想要的行为（并且您不需要强制转换为 People）

```
public class People 
{ 
    public string BetterFoot; 

    public override bool Equals(object obj)
    { 
        var o = obj as People;
        if (o == null) return false;
        return (this.BetterFoot = o.BetterFoot); 
} 

public class LeftiesOrRighties: People 
{ 
    public string BetterHand; 

    public override bool Equals(object obj) 
    { 
        var o = obj as LeftiesOrRighties; 
        if ( o == null) return base.Equals(obj);
        return (this.BetterFoot = o.BetterFoot) && (this.BetterHand = o.BetterHand) 
    } 
} 

public class Ambidextrous: People
{ 
    public string FavoriteHand; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:01:51.360

As Bob Vale pointed out, the `cast` does not change type.

The standard solution used across the .NET Framework is to use custom object implementing [IEqualityComparer](http://msdn.microsoft.com/en-us/library/system.collections.iequalitycomparer.aspx) or its generic variant. Then your compare/find method takes 2 objects/collections and uses comparer to perform the custom comparison.

I.e. many `LINQ` methods take custom compare to find/filter objects like [Enumerable.Distinct](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

```
public static IEnumerable<TSource> Distinct<TSource>(
    this IEnumerable<TSource> source,
    IEqualityComparer<TSource> comparer
) 
```

Sample comparer:

```
class Last3BitsComparer : IEqualityComparer<int>
{
    public bool Equals(int b1, int b2)
    {
        return (b1 & 3) == (b2 & 3);
    }
    public int GetHashCode(int bx)
    {
        return bx & 3;
    }
} 
```

# php - 从 PHP 输出图形、CSV 和 Excel 文件

> ID：11479592
> 
> 赞同：-1
> 
> 时间：2012-07-13T23:26:42.420
> 
> 标签：php

我有一个 PHP 代码，它将生成运行良好的图形和 HTML 表。- Main_data.php
CSV 输出 PHP 工作正常。- CSV.php
Excel 输出 PHP 工作正常。

运行 Main_data.php 时如何输出所有三个报告？

我试图在 Main_data.php 中包含 Csv.php。我无法从 main_data.php 生成结果。

关于如何在我的脚本中实现该功能的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:33:42.660

制作函数`displayGraph()`和`displayCSV()`. 通过从和
复制代码将它们放在一个文件中，将该文件包含在要从中显示图形和 CSV 的文件中并执行函数。`main_data.php``csv.php`

# java - 如何构建/运行这个简单的 Mahout 程序而不会出现异常？

> ID：11479600
> 
> 赞同：8
> 
> 时间：2012-07-13T23:28:04.293
> 
> 标签：java, hadoop, mahout

我想运行我在 Mahout In Action 中找到的这段代码：

```
package org.help;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.Text;
import org.apache.mahout.math.DenseVector;
import org.apache.mahout.math.NamedVector;
import org.apache.mahout.math.VectorWritable;

public class SeqPrep {

    public static void main(String args[]) throws IOException{

        List<NamedVector> apples = new ArrayList<NamedVector>();

        NamedVector apple;

        apple = new NamedVector(new DenseVector(new double[]{0.11, 510, 1}), "small round green apple");        

        apples.add(apple);

        Configuration conf = new Configuration();
        FileSystem fs = FileSystem.get(conf);
        Path path = new Path("appledata/apples");

        SequenceFile.Writer writer = new SequenceFile.Writer(fs,  conf, path, Text.class, VectorWritable.class);

        VectorWritable vec = new VectorWritable();
        for(NamedVector vector : apples){
            vec.set(vector);
            writer.append(new Text(vector.getName()), vec);
        }
        writer.close();

        SequenceFile.Reader reader = new SequenceFile.Reader(fs, new Path("appledata/apples"), conf);

        Text key = new Text();
        VectorWritable value = new VectorWritable();
        while(reader.next(key, value)){
            System.out.println(key.toString() + " , " + value.get().asFormatString());
        }
        reader.close();

    }

} 
```

我编译它：

```
$ javac -classpath :/usr/local/hadoop-1.0.3/hadoop-core-1.0.3.jar:/home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT.jar:/home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-job.jar:/home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-sources.jar -d myjavac/ SeqPrep.java 
```

我把它罐了：

```
$ jar -cvf SeqPrep.jar -C myjavac/ . 
```

现在我想在我的本地 hadoop 节点上运行它。我试过了：

```
 hadoop jar SeqPrep.jar org.help.SeqPrep 
```

但我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/mahout/math/Vector
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

所以我尝试使用 libjars 参数：

```
$ hadoop jar SeqPrep.jar org.help.SeqPrep -libjars /home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT.jar -libjars /home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-job.jar -libjars /home/hduser/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-sources.jar -libjars /home/hduser/mahout/trunk/math/target/mahout-math-0.8-SNAPSHOT.jar -libjars /home/hduser/mahout/trunk/math/target/mahout-math-0.8-SNAPSHOT-sources.jar 
```

并遇到了同样的问题。我不知道还能尝试什么。

我的最终目标是能够将 hadoop fs 上的 .csv 文件读入稀疏矩阵，然后将其乘以随机向量。

**编辑：**看起来 Razvan 得到了它（注意：请参阅下面的另一种方法来做到这一点，它不会弄乱你的 hadoop 安装）。以供参考：

```
$ find /usr/local/hadoop-1.0.3/. |grep mah
/usr/local/hadoop-1.0.3/./lib/mahout-core-0.8-SNAPSHOT-tests.jar
/usr/local/hadoop-1.0.3/./lib/mahout-core-0.8-SNAPSHOT.jar
/usr/local/hadoop-1.0.3/./lib/mahout-core-0.8-SNAPSHOT-job.jar
/usr/local/hadoop-1.0.3/./lib/mahout-core-0.8-SNAPSHOT-sources.jar
/usr/local/hadoop-1.0.3/./lib/mahout-math-0.8-SNAPSHOT-sources.jar
/usr/local/hadoop-1.0.3/./lib/mahout-math-0.8-SNAPSHOT-tests.jar
/usr/local/hadoop-1.0.3/./lib/mahout-math-0.8-SNAPSHOT.jar 
```

进而：

```
$hadoop jar SeqPrep.jar org.help.SeqPrep

small round green apple , small round green apple:{0:0.11,1:510.0,2:1.0} 
```

**编辑：** 我正在尝试不将 mahout jar 复制到 hadoop lib/

```
$ rm /usr/local/hadoop-1.0.3/lib/mahout-* 
```

然后当然：

```
hadoop jar SeqPrep.jar org.help.SeqPrep

Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/mahout/math/Vector
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149)
Caused by: java.lang.ClassNotFoundException: org.apache.mahout.math.Vector
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

当我尝试 mahout 作业文件时：

```
$hadoop jar ~/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-job.jar org.help.SeqPrep

Exception in thread "main" java.lang.ClassNotFoundException: org.help.SeqPrep
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

如果我尝试包含我制作的 .jar 文件：

```
$ hadoop jar ~/mahout/trunk/core/target/mahout-core-0.8-SNAPSHOT-job.jar SeqPrep.jar org.help.SeqPrep

Exception in thread "main" java.lang.ClassNotFoundException: SeqPrep.jar 
```

**编辑：**显然我一次只能向hadoop发送一个罐子。这意味着我需要将我制作的类添加到 mahout 核心作业文件中：

```
~/mahout/trunk/core/target$ cp mahout-core-0.8-SNAPSHOT-job.jar mahout-core-0.8-SNAPSHOT-job.jar_backup

~/mahout/trunk/core/target$ cp ~/workspace/seqprep/bin/org/help/SeqPrep.class .

~/mahout/trunk/core/target$ jar uf mahout-core-0.8-SNAPSHOT-job.jar SeqPrep.class 
```

进而：

```
~/mahout/trunk/core/target$ hadoop jar mahout-core-0.8-SNAPSHOT-job.jar org.help.SeqPrep

Exception in thread "main" java.lang.ClassNotFoundException: org.help.SeqPrep 
```

**编辑：**好的，现在我可以做到这一点而不会弄乱我的 hadoop 安装。我在之前的编辑中更新了错误的 .jar。它应该是：

```
~/mahout/trunk/core/target$ jar uf mahout-core-0.8-SNAPSHOT-job.jar org/help/SeqPrep.class 
```

然后：

```
~/mahout/trunk/core/target$ hadoop jar mahout-core-0.8-SNAPSHOT-job.jar org.help.SeqPrep

small round green apple , small round green apple:{0:0.11,1:510.0,2:1.0} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T07:12:29.963

您需要使用 Mahout 提供的“作业”JAR 文件。它打包了所有依赖项。您还需要将您的课程添加到其中。这就是所有 Mahout 示例的工作方式。您不应该将 Mahout jar 放在 Hadoop 库中，因为这种“安装”程序在 Hadoop 中太深了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T08:33:18.420

如果您将从[https://github.com/tdunning/MiA](https://github.com/tdunning/MiA)存储库获取示例代码，那么它包含 Maven 的即用`pom.xml`型文件。当您使用 编译代码时`mvn package`，它将`mia-0.1-job.jar`在`target`目录中创建 - 此存档包含所有依赖项，除了 Hadoop 的，因此您可以在 Hadoop 集群上运行它而不会出现问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:31:24.540

```
<dependency>
    <groupId>org.apache.mahout</groupId>
    <artifactId>mahout-math</artifactId>
    <version>0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mahout</groupId>
    <artifactId>mahout-collections</artifactId>
    <version>1.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T12:52:22.650

我所做的是使用我的 jar 和所有 mahout jar 文件设置 HADOOP_CLASSPATH，如下所示。

导出 HADOOP_CLASSPATH=/home/xxx/my.jar:/opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0.p0.22/lib/mahout/mahout-core-0.7-cdh4.3.0.jar :/opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0.p0.22/lib/mahout/mahout-core-0.7-cdh4.3.0-job.jar:/opt/cloudera/parcels/CDH -4.3.0-1.cdh4.3.0.p0.22/lib/mahout/mahout-examples-0.7-cdh4.3.0.jar:/opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0。 p0.22/lib/mahout/mahout-examples-0.7-cdh4.3.0-job.jar:/opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0.p0.22/lib/mahout/mahout -integration-0.7-cdh4.3.0.jar:/opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0.p0.22/lib/mahout/mahout-math-0.7-cdh4.3.0.jar

然后我能够运行 hadoop com.mycompany.mahout.CSVtoVector iris/nb/iris1.csv iris/nb/data/iris.seq

因此，您必须在 HADOOP_CLASSPATH 中包含所有 jar 和 mahout jar，然后您可以使用
hadoop运行您的类`<classname>`

# html - Facebook Like Box 未在 Wordpress 上显示

> ID：11479606
> 
> 赞同：-1
> 
> 时间：2012-07-13T23:28:59.043
> 
> 标签：html, facebook, wordpress

我有一个问题，Facebook Like Box 没有显示在自托管的 Wordpres 网站上，有什么想法吗？过去我已经成功地将它添加到网站，但它根本没有显示，我真的不知道为什么。

帮助将不胜感激。

链接：[http ://www.mostdealsforyou.com/](http://www.mostdealsforyou.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:03:01.860

看来您还没有在网站中嵌入 JS。根据 Facebook 文档，您需要尽早将其放入正文中：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

而且您的代码似乎与 Facebook 为我生成的不同：

```
<div class="fb-like" data-href="http://www.mostdealsforyou.com/" data-send="true" data-width="292" data-show-faces="true"></div> 
```

**或者，您可以只使用 iFrame：**

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.mostdealsforyou.com%2F&amp;send=false&amp;layout=standard&amp;width=292&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:80px;" allowTransparency="true"></iframe> 
```

如果您想更改此行为，只需查看[Facebook 的like button generator 即可](https://developers.facebook.com/docs/reference/plugins/like/)。

# html - 使用 AddThis 进行 CSS 定位

> ID：11479608
> 
> 赞同：2
> 
> 时间：2012-07-13T23:29:01.507
> 
> 标签：html, css, html-table, addthis

我目前有一个表格“解决方案”来格式化 AddThis Div 按钮。您可以在以下网址看到：[http ://www.siding4u.com/save-on-siding.php](http://www.siding4u.com/save-on-siding.php)

在页面顶部它正确显示： ![AddThis 按钮的格式设置在图像的右侧并在页面顶部偏移](../Images/3150a3f07f3a731096b9a3379eef925c.png)

这是代码（解决方法）：

```
<table align="center" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="60%" align="right"><img title="Help us. Help you." src="http://www.siding4u.com/media/shareaholic/img_help-us-help-you_right_yellow-text.png" alt="TEXT: Sharing is caring! Help us. Help you." width="360" height="23" /></td>
    <td width="40%" align="left"><!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=siding4u"></script>
<!-- AddThis Button END --></td>
  </tr>
</table> 
```

我有/想要将我所有的表格布局转换为 CSS，但我似乎无法让 AddThis 按钮配合。他们似乎总是“左对齐”或以某种方式中断 - 无论我尝试什么。

我猜这是一个简单的解决方法，但我是那些似乎无法将 CSS 鞭打成形状的 CSS“块头”之一。

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:15:36.663

在 css 中对齐图像是基于它们在页面上的位置而不是它们的对齐方式（带有类的元素`addthis_button_preferred_1...n`可能应该控制这一点）在表格中，您可以将其对齐为左/中/右等，而使用 CSS，您的目标是对齐它的子元素将位于中间的方式。

**HTML：**

```
<div id='wrapper'> <!-- parent div containing the help-us-help-you image and the buttons-->
    <div id="help_us"><!-- float:left because we want the image div and the button dive to be besides eachother -->
        <img title="Help us. Help you." src="http://www.siding4u.com/media/shareaholic/img_help-us-help-you_right_yellow-text.png" alt="TEXT: Sharing is caring! Help us. Help you." width="360" height="23"/>
    </div>
    <div id='buttons'><!-- this div should also be floated left and have padding, to align the buttons correctly -->

        <!-- each of the link elements should get some padding -->
        <a class="addthis_button_preferred_1 button_preferred"></a>
        <a class="addthis_button_preferred_2 button_preferred"></a>
        <a class="addthis_button_preferred_3 button_preferred"></a>
        <a class="addthis_button_preferred_4 button_preferred"></a>
        <a class="addthis_button_compact button_preferred"></a>
        <a class="addthis_counter addthis_bubble_style button_preferred"></a>
    </div>
</div> 
```

整个示例[在这个小提琴上](http://jsfiddle.net/R3ks9/)在线，希望有助于对齐，并且是一个纯 CSS 解决方案，根本没有表格！

ps 作为旁注，我建议您使用[jsfiddle](http://jsfiddle.net/)解决 CSS/HTML/javascript 问题，它确实可以帮助我们更好地查看问题，并更快地进行更改。

**编辑** 对于第二个问题：

```
<div align="center" style="margin-bottom:0; margin-top:5px;"> 
<div id='wrapper'> 
...
​&lt;/div>
...
</div> 
```

对于这个元素，由于某种原因，高度为 48 px，这会在两个元素之间产生间隙。所以应用一个高度，改变：

`style="margin-bottom:0; margin-top:5px;"`

**到：**

`style="margin-bottom:0; margin-top:5px;height:23px;"`

# haskell - 在 Pipes-2.1.0 包中完成

> ID：11479611
> 
> 赞同：2
> 
> 时间：2012-07-13T23:29:37.073
> 
> 标签：haskell, monads, categories, monad-transformers, iterate

我正在使用 Pipes-2.1.0 包和 zeromq3-haskell 包来构建一个小消息管道。除了我无法理解 Frames 的最终确定之外，一切似乎都进展顺利。

在接下来的框架中，我获得了两个资源；zeromq 上下文和 zeromq 套接字。然后我不断地等待消息（以 的形式`ByteStrings`）在 zeromq 套接字上发布。

```
{-# LANGUAGE RebindableSyntax    #-}
{-# LANGUAGE ScopedTypeVariables #-}

module PipesZeroMQ where

import           Control.Frame
import           Control.IMonad.Do
import           Control.IMonad.Trans
import qualified Control.Monad          as M
import           Data.ByteString        (ByteString)
import           Data.String
import           Prelude                hiding (Monad(..))
import qualified System.ZMQ3            as ZMQ

type Address = String

fromList :: (M.Monad m) => [b] -> Frame b m (M a) (M a) ()
fromList xs = mapMR_ yield xs

publisher :: Address -> Frame Void IO (M ByteString) C ()
publisher addr = do
  c  <- liftU $ ZMQ.init 1
  s  <-liftU $ ZMQ.socket c ZMQ.Pub
  liftU $ ZMQ.bind s addr   
  liftU $ print "Socket open for business!!!"

  foreverR $ do
    bs <- await
    finallyF (ZMQ.close s M.>> ZMQ.term c M.>> print "ZMQ socket closed") $ do
         (liftU $ ZMQ.send s [] bs)
         (liftU (print "Sending message")) 
```

现在如果我试试这个：

```
λ> runFrame $ (publisher localAddress) <-< (fromList ["This", "that", "that"] >> close) 
```

我明白了：

```
"Socket open for business"
"Sending message"
"ZMQ socket closed"
*** Exception: ZMQError { errno = 88, source = "send", message = "Socket operation on non-socket" } 
```

`publisher`收到后完成，但一个`BytesString`。

为什么会这样？

我对在 Pipes-2.1.0 中使用 Frames 进行最终确定有什么误解？

如果我开始攻击外面的树，它还有机会吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:21:22.153

您在编写`publisher`函数时犯了一个错误：

```
foreverR $ do
    bs <- await
    finallyF (ZMQ.close s M.>> ZMQ.term c M.>> print "ZMQ socket closed") $ do
         (liftU $ ZMQ.send s [] bs)
         (liftU (print "Sending message")) 
```

您可能想将`finallyF`OUTSIDE 放在`foreverR`循环之外：

```
finallyF (...) $ foreverR $ do
    bs <- await
    liftU $ ZMQ.send s [] bs)
    liftU (print "Sending message") 
```

你写它的方式，它在每​​次发送后完成，所以它完全按照你告诉它做的事情：每次发送后完成。 `finallyF`一旦它包装的动作完成后调用终结器，无论它是否成功终止。你也可以`catchF`在这种情况下使用，因为循环永远不会终止：

```
 catchF (...) $ foreverR $ do
    bs <- await
    liftU $ ZMQ.send s [] bs)
    liftU (print "Sending message") 
```

或者，您可以将其保留在循环内但切换到，`catchF`以便在每次发送后不会运行终结器：

```
foreverR $ do
    bs <- await
    catchF (ZMQ.close s M.>> ZMQ.term c M.>> print "ZMQ socket closed") $ do
         (liftU $ ZMQ.send s [] bs)
         (liftU (print "Sending message")) 
```

另外，如果您计划编写基于管道的 zeroMQ 库，请与我保持联系，因为我计划在下一个版本中将帧返回到普通的 monad，同时对功能进行许多新的增强，例如关闭和重新初始化资源的能力。要联系我，请使用我的 gmail.com 地址和用户名 Gabriel439。

# c# - 事件未命中 WCF 服务实现

> ID：11479615
> 
> 赞同：0
> 
> 时间：2012-07-13T23:30:40.917
> 
> 标签：c#, wcf, event-handling, servicecontract

我有一个 WCF 服务接口、一个实现合同的类和一个托管 winforms 应用程序。然后这会启动连接回 WCF 服务器的工作进程，然后应该触发事件。客户端工作进程在调用方法时没有任何问题，然后我希望在 Windows 窗体应用程序中也调用附加的事件处理程序，但这没有发生：

```
 xWCFService xWCFService = new xWCFService();
                    xWCFService.eventWorkerProcessStart += new EventHandler<WorkerProcessProgressChangedEventArgs>(xWCFService_eventWorkerProcessStart);
                    xWCFService.eventWorkerProcessStop += new EventHandler<WorkerProcessProgressChangedEventArgs>(xWCFService_eventWorkerProcessStop);
                    xWCFService.eventWorkerProcessUpdateProgress += new EventHandler<WorkerProcessProgressChangedEventArgs>(xWCFService_eventWorkerProcessUpdateProgress);
                    xWCFService.eventWorkerProcessError += new EventHandler<WorkerProcessProgressChangedEventArgs>(xWCFService_eventWorkerProcessError);

                    ServiceHost xServiceHost = new ServiceHost(xWCFService, new Uri(serviceAddress));

                    xServiceHost.AddServiceEndpoint(typeof(IxWCFServiceContract), new NetTcpBinding(), address);
                    xServiceHost.Open(); 
```

我将 Service 类的实例传递给 servicehost，它是一个单例实例。我很感激任何可以提供的帮助/见解，说明我为什么没有引用正确的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:08:33.653

经过大量阅读，我注意到客户端代码中的错误：

```
 static xWCFService xwcfService = new xWCFService();

           ....
       {
            EndpointAddress endPoint = new EndpointAddress(new Uri(string.Format(xWCFServerBaseAddress, address) + address));
            Binding binding = new NetTcpBinding();
            xChannelFactory = new ChannelFactory<IxWCFServiceChannel>(binding, endPoint);
            xChannelFactory.Open();
            xServiceChannel = xChannelFactory.CreateChannel();
            xServiceChannel.Open();

            **xwcfService.WorkerProcessStartedParsing(strGuidClientIdentifier);** 
```

最后一行是我的错误，我是通过服务实现类的实例来调用服务的。当我使用 xServiceChannel 调用服务上的方法时，会引发所有事件。

# android - 在 android 浏览器中打开 content:// url

> ID：11479616
> 
> 赞同：3
> 
> 时间：2012-07-13T23:30:49.930
> 
> 标签：android, android-intent

我正在构建一个使用自定义内容提供程序来提供 HTML 页面的应用程序（就好像它是一个 Web 服务器，但从数据源提供服务）。从一个活动中，我想使用 content:// 方案将用户发送到一个页面，但我想使用处理可浏览 URI 的默认应用程序（而不仅仅是 android 浏览器，以适应不同的默认浏览器用户）。

[根据https://stackoverflow.com/a/10532319/1524800](https://stackoverflow.com/a/10532319/1524800)给出的答案（我的实现基本相同），我可以显式打开默认的 android 浏览器，但我更愿意使用用户的默认浏览器使用隐含的意图。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:36:46.510

这样做而不是这样做

```
Uri uri = Uri.fromFile(file);
Intent browserIntent = new Intent(Intent.ACTION_VIEW);
browserIntent.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
browserIntent.setData(uri);
startActivity(browserIntent); 
```

尝试这个

```
final Intent browserIntent = new Intent(Intent.ACTION_VIEW);
browserIntent.setDataAndType(Uri.fromFile(file), "text/html");
startActivity(Intent.createChooser(browserIntent, "Open with...")); 
```

# c# - 在将列表设置为新集合之前清除列表会产生什么副作用？

> ID：11479618
> 
> 赞同：0
> 
> 时间：2012-07-13T23:31:09.380
> 
> 标签：c#, list

我继承了一些代码。我看到这段代码存在：

```
private List<int> Data { get; set; }

private CsClipboard()
{
    Data = new List<int>();
}

public List<int> ComponentIDs
{
    get
    {
        return Data;
    }
    set
    {
        Data.Clear();
        Data = value;
    }
} 
```

在将 Data 设置为 value 之前，我没有看到任何理由调用 clear 。我想知道 C# 中是否存在我想在设置值之前调用 clear 的场景，而不是触发 OnClear 事件。这是一个相当大的技术代码库。债务，所以只是过于谨慎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:36:39.857

该代码可能会产生一些令人讨厌的副作用。

发生的事情是原始列表被清除。因此，代码中保存原始列表的所有其他位置现在都将保存一个空列表。

每个新的获取请求都将保存新列表。但是数据在整个程序中不是并发的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T23:38:36.210

通常，您应该避免返回可变列表的公共属性。一旦消费者获得对它的引用，您就不再能够保证应该是内部细节的状态。在 setter 中清除列表只会加剧问题，因为现在您正在清除消费者可能仍然引用的列表（即使它不再是正确的列表。）

您应该考虑更改该属性，以便它返回列表当前状态的副本（最好是只读的）。该`AsReadOnly()`方法可以在这里提供帮助。如果你不能这样做，至少在设置新值之前不要清除列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T23:35:34.590

> 除了触发 OnClear 事件之外，我想在设置值之前调用 clear 。

List 类没有事件[MSDN](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

那么如何为列表编写自己的自定义 Clear 方法

我的意思是列表类的扩展方法，它将使用您的 Clear 方法和您的自定义逻辑

# sql - 将从sql调用显示的日期/时间元素划分为单独的div？

> ID：11479621
> 
> 赞同：1
> 
> 时间：2012-07-13T23:31:28.850
> 
> 标签：sql, date, time

这个sql调用，

```
<div class="dateOnAd"><?php print $row['dttm_modified']; ?></div> 
```

输出：2012-05-22 15:07:28。

我需要想办法将输出分成不同的 div

```
<div class="example-date">
   <span class="day">31</span> 
   <span class="month">July</span> 
   <span class="year">2009</span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:09:32.337

```
<div class="example-date">
    <span class="day"><?php echo date('d', $row['ddtm_modified']); ?></span>
    <span class="month"><?php echo date('F', $row['ddtm_modified']); ?></span>
    <span class="year"><?php echo date('Y', $row['ddtm_modified']); ?></span>
</div> 
```

您可以在此处阅读有关该`date()`功能的更多信息：[`date`](http://us.php.net/manual/en/function.date.php).

# mysql - 显示每月更新总数

> ID：11479623
> 
> 赞同：0
> 
> 时间：2012-07-13T23:31:40.200
> 
> 标签：mysql, reporting

你知道如何解决这个问题吗？

这是我拥有的数据库的一个示例：profile_table

```
user_id    status   points   created_at 
01          1        20       2011-01-01 01:03:35
02          1        50       2011-01-02 01:03:35
03          1        800      2011-01-04 01:03:35
04          1        152      2011-02-15 01:03:35
05          1        388      2011-02-20 01:03:35
06          0        40       2011-02-25 01:03:35
07          1        246      2011-02-26 01:03:35
08          1        335      2011-02-27 01:03:35
09          1        521      2011-03-08 01:03:35
10          1        5354     2011-03-14 01:03:35
11          0        22       2011-03-18 01:03:35
12          1        234      2011-04-03 01:03:35
13          1        222      2011-04-05 01:03:35
14          1        396      2011-04-24 01:03:35 
```

第二个表：spend_points

```
price_id    spend_points   created_at
1           20             2011-01-01 01:03:35
2           10             2011-01-02 01:03:35
3           30             2011-01-05 01:03:35
8           40             2011-01-06 01:03:35
14          10             2011-02-03 01:03:35
7           50             2011-02-06 01:03:35
14          10             2011-02-07 01:03:35
2           10             2011-03-03 01:03:35
14          60             2011-03-12 01:03:35
14          10             2011-04-07 01:03:35
2           70             2011-04-12 01:03:35
14          80             2011-04-15 01:03:35
14          20             2011-04-21 01:03:35 
```

第一个表属于一个组，该组只能在 'price_id' = 14 的项目上花费积分。在spend_points 表中，我们有所有项目花费，并且有一些 14。我正在尝试构建的查询应该显示可以在 price_id = 14 上花费的所有用户的数据。该表应该包含他们拥有的总点数、总花费点数和他们迄今为止拥有的所有点数。当您只想要这些数据时听起来很容易，但对我来说问题是当我试图记录这一点时。每个新月它都应该显示上个月和上个月的更新，依此类推。

状态 = 0 表示非活动和

所以决赛桌应该是这样的。

```
Detail                    January   February  March  April 
Total Active Users        3         7         9      12
Total Inactive Users      0         1         2      2
Total Point               807       2031      7928   8780      
Spend Points              0         20        80     190
Points So Far             807       2051      8008   8970 
```

你们知道怎么做吗？:'(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:05:16.337

它很长，但它会做到……基于一年……如果您的数据跨越数年，只需在每个选择/联合中添加一个适用的“年份”where 子句。查询的前提是每个月预先声明，这样我们就知道给定月份聚合的“截止”日期在哪里（即：一月是所有小于二月的总和，二月是所有三月的总和， ETC）。每个人都需要每个月都有自己的枢轴汇总，这就是为什么这么长的原因，但是，很容易遵循以获得您的结果。不是我打算如何进行这样的查询，尤其是在一个大集合上——我希望有一个表，其中包含预期聚合的每月/每年的“汇总”值，并且在适用的情况下，有一个触发器只需根据需要更新计数，点数。

```
set @jan := date( "2011-01-01" );
set @feb := date( "2011-02-01" );
set @mar := date( "2011-03-01" );
set @apr := date( "2011-04-01" );
set @may := date( "2011-05-01" );
set @jun := date( "2011-06-01" );
set @jul := date( "2011-07-01" );
set @aug := date( "2011-08-01" );
set @sep := date( "2011-09-01" );
set @oct := date( "2011-10-01" );
set @nov := date( "2011-11-01" );
set @decem := date( "2011-12-01" );
set @nextYr := date( "2012-01-01" );

select 
      'Active Users' as Detail,
      sum( if( pt.status = 1 and pt.created_at < @feb, 1, 0 )) January,
      sum( if( pt.status = 1 and pt.created_at < @mar, 1, 0 )) February,
      sum( if( pt.status = 1 and pt.created_at < @apr, 1, 0 )) March,
      sum( if( pt.status = 1 and pt.created_at < @may, 1, 0 )) April,
      sum( if( pt.status = 1 and pt.created_at < @jun, 1, 0 )) May,
      sum( if( pt.status = 1 and pt.created_at < @jul, 1, 0 )) June,
      sum( if( pt.status = 1 and pt.created_at < @aug, 1, 0 )) July,
      sum( if( pt.status = 1 and pt.created_at < @sep, 1, 0 )) August,
      sum( if( pt.status = 1 and pt.created_at < @oct, 1, 0 )) September,
      sum( if( pt.status = 1 and pt.created_at < @nov, 1, 0 )) October,
      sum( if( pt.status = 1 and pt.created_at < @decem, 1, 0 )) November,
      sum( if( pt.status = 1 and pt.created_at < @nextYr, 1, 0 )) December
   from
      profile_table pt
union
select 
      'Inactive Users' as Detail,
      sum( if( pt.status = 0 and pt.created_at < @feb, 1, 0 )) January,
      sum( if( pt.status = 0 and pt.created_at < @mar, 1, 0 )) February,
      sum( if( pt.status = 0 and pt.created_at < @apr, 1, 0 )) March,
      sum( if( pt.status = 0 and pt.created_at < @may, 1, 0 )) April,
      sum( if( pt.status = 0 and pt.created_at < @jun, 1, 0 )) May,
      sum( if( pt.status = 0 and pt.created_at < @jul, 1, 0 )) June,
      sum( if( pt.status = 0 and pt.created_at < @aug, 1, 0 )) July,
      sum( if( pt.status = 0 and pt.created_at < @sep, 1, 0 )) August,
      sum( if( pt.status = 0 and pt.created_at < @oct, 1, 0 )) September,
      sum( if( pt.status = 0 and pt.created_at < @nov, 1, 0 )) October,
      sum( if( pt.status = 0 and pt.created_at < @decem, 1, 0 )) November,
      sum( if( pt.status = 0 and pt.created_at < @nextYr, 1, 0 )) December
   from
      profile_table pt
union
select 
      'Total Points' as Detail,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @feb, 1, 0 )) January,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @mar, 1, 0 )) February,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @apr, 1, 0 )) March,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @may, 1, 0 )) April,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @jun, 1, 0 )) May,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @jul, 1, 0 )) June,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @aug, 1, 0 )) July,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @sep, 1, 0 )) August,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @oct, 1, 0 )) September,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @nov, 1, 0 )) October,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @decem, 1, 0 )) November,
      sum( pt.points * if( pt.status = 1 and pt.created_at < @nextYr, 1, 0 )) December
   from
      profile_table pt
union
select 
      'Spend Points' as Detail,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @feb, 1, 0 )) January,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @mar, 1, 0 )) February,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @apr, 1, 0 )) March,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @may, 1, 0 )) April,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @jun, 1, 0 )) May,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @jul, 1, 0 )) June,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @aug, 1, 0 )) July,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @sep, 1, 0 )) August,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @oct, 1, 0 )) September,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @nov, 1, 0 )) October,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @decem, 1, 0 )) November,
      sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @nextYr, 1, 0 )) December
   from
      spend_points sp
union
select 
      'Points So Far' as Detail,
      PointsPerMonth.January + SpendPerMonth.January January,
      PointsPerMonth.February + SpendPerMonth.February February,
      PointsPerMonth.March + SpendPerMonth.March March,
      PointsPerMonth.April + SpendPerMonth.April April,
      PointsPerMonth.May + SpendPerMonth.May May,
      PointsPerMonth.June + SpendPerMonth.June June,
      PointsPerMonth.July + SpendPerMonth.July July,
      PointsPerMonth.August + SpendPerMonth.August August,
      PointsPerMonth.September + SpendPerMonth.September September,
      PointsPerMonth.October + SpendPerMonth.October October,
      PointsPerMonth.November + SpendPerMonth.November November,
      PointsPerMonth.December + SpendPerMonth.December December 
   from
      ( select 
              sum( pt.points * if( pt.status = 1 and pt.created_at < @feb, 1, 0 )) January,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @mar, 1, 0 )) February,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @apr, 1, 0 )) March,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @may, 1, 0 )) April,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @jun, 1, 0 )) May,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @jul, 1, 0 )) June,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @aug, 1, 0 )) July,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @sep, 1, 0 )) August,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @oct, 1, 0 )) September,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @nov, 1, 0 )) October,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @decem, 1, 0 )) November,
              sum( pt.points * if( pt.status = 1 and pt.created_at < @nextYr, 1, 0 )) December
           from
              profile_table pt ) PointsPerMonth,
      ( select
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @feb, 1, 0 )) January,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @mar, 1, 0 )) February,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @apr, 1, 0 )) March,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @may, 1, 0 )) April,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @jun, 1, 0 )) May,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @jul, 1, 0 )) June,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @aug, 1, 0 )) July,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @sep, 1, 0 )) August,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @oct, 1, 0 )) September,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @nov, 1, 0 )) October,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @decem, 1, 0 )) November,
              sum( sp.spend_points * if( sp.price_id = 14 and sp.created_at < @nextYr, 1, 0 )) December
           from
              spend_points sp ) SpendPerMonth 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T00:00:26.683

In the spreadsheet world, people call what you want to make a "pivot table". You're not going to get that out of MySQL without hand-building some massive ugly queries - it just doesn't fit in with what an RDBMS is meant to do. You just have to get the per-month values & build out your report at the application level. Similarly, those running totals are best just handled manually.

# python - 有没有办法保证 NetworkX 的分层输出？

> ID：11479624
> 
> 赞同：97
> 
> 时间：2012-07-13T23:32:02.127
> 
> 标签：python, networkx

**我正在尝试制作树**结构的流程图。我已经能够使用 networkx 创建具有代表性的图形，但是我需要一种在输出绘图时显示**树结构的方法。**我正在使用 matplotlib.pylab 绘制图表。

我需要以类似于[此处](https://graphviz.gitlab.io/_pages/Gallery/directed/Genetic_Programming.html)显示的结构显示数据。虽然我没有子图。

我怎么能保证这样的结构？

不信者的例子：

![各种 NetworkX 布局](../Images/704d676b1301650f53cb54411061a542.png)

我已经能够使用 pylab 和 graphviz 显示图表，但都没有提供我正在寻找的树结构。我已经尝试了 networkx 必须提供的每个布局，但没有一个显示**层次结构**。我只是不确定要给它什么**选项/模式，****或者**我是否需要使用权重。任何建议都会有所帮助。

@jterrace：

这是我用来制作上述图的粗略轮廓。我添加了一些标签，但除此之外它是相同的。

```
import networkx as nx
import matplotlib.pyplot as plt
G = nx.Graph()

G.add_node("ROOT")

for i in xrange(5):
    G.add_node("Child_%i" % i)
    G.add_node("Grandchild_%i" % i)
    G.add_node("Greatgrandchild_%i" % i)

    G.add_edge("ROOT", "Child_%i" % i)
    G.add_edge("Child_%i" % i, "Grandchild_%i" % i)
    G.add_edge("Grandchild_%i" % i, "Greatgrandchild_%i" % i)

plt.title("draw_networkx")
nx.draw_networkx(G)

plt.show() 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-07-14T13:27:20.313

如果您使用有向图，那么 Graphviz 点布局将对树执行您想要的操作。这是一些类似于上述解决方案的代码，显示了如何做到这一点

```
import networkx as nx
from networkx.drawing.nx_agraph import graphviz_layout
import matplotlib.pyplot as plt
G = nx.DiGraph()

G.add_node("ROOT")

for i in range(5):
    G.add_node("Child_%i" % i)
    G.add_node("Grandchild_%i" % i)
    G.add_node("Greatgrandchild_%i" % i)

    G.add_edge("ROOT", "Child_%i" % i)
    G.add_edge("Child_%i" % i, "Grandchild_%i" % i)
    G.add_edge("Grandchild_%i" % i, "Greatgrandchild_%i" % i)

# write dot file to use with graphviz
# run "dot -Tpng test.dot >test.png"
nx.nx_agraph.write_dot(G,'test.dot')

# same layout using matplotlib with no labels
plt.title('draw_networkx')
pos=graphviz_layout(G, prog='dot')
nx.draw(G, pos, with_labels=False, arrows=False)
plt.savefig('nx_test.png') 
```

![Graphviz 输出](../Images/f1ac44de67447cd6b6101be1191390a8.png)

![NetworkX/Matplotlib 输出](../Images/319e13dbe209d47b31c5e69417d27d4f.png)

**更新**

这是为 networkx-2.0 更新的版本（以及即将推出的 networkx-2.1 也会绘制箭头）。

```
import networkx as nx
from networkx.drawing.nx_agraph import write_dot, graphviz_layout
import matplotlib.pyplot as plt
G = nx.DiGraph()

G.add_node("ROOT")

for i in range(5):
    G.add_node("Child_%i" % i)
    G.add_node("Grandchild_%i" % i)
    G.add_node("Greatgrandchild_%i" % i)

    G.add_edge("ROOT", "Child_%i" % i)
    G.add_edge("Child_%i" % i, "Grandchild_%i" % i)
    G.add_edge("Grandchild_%i" % i, "Greatgrandchild_%i" % i)

# write dot file to use with graphviz
# run "dot -Tpng test.dot >test.png"
write_dot(G,'test.dot')

# same layout using matplotlib with no labels
plt.title('draw_networkx')
pos =graphviz_layout(G, prog='dot')
nx.draw(G, pos, with_labels=False, arrows=True)
plt.savefig('nx_test.png') 
```

[![在此处输入图像描述](../Images/5e805ca56c6691adf72a783f3a3a8c88.png)](https://i.stack.imgur.com/R9mbj.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-14T02:19:59.407

您可以使用 pygraphviz 来接近：

```
>>> import pygraphviz
>>> import networkx
>>> import networkx as nx
>>> G = nx.Graph()
>>> G.add_node("ROOT")
>>> for i in xrange(5):
...     G.add_node("Child_%i" % i)
...     G.add_node("Grandchild_%i" % i)
...     G.add_node("Greatgrandchild_%i" % i)
...     G.add_edge("ROOT", "Child_%i" % i)
...     G.add_edge("Child_%i" % i, "Grandchild_%i" % i)
...     G.add_edge("Grandchild_%i" % i, "Greatgrandchild_%i" % i)

>>> A = nx.to_agraph(G)
>>> A.layout('dot', args='-Nfontsize=10 -Nwidth=".2" -Nheight=".2" -Nmargin=0 -Gfontsize=8')
>>> A.draw('test.png') 
```

结果： ![在此处输入图像描述](../Images/e3f82d4d3d13e9601979be042c828ad4.png)

注意我从您上面发布的链接中复制了 graphviz 选项。我不确定为什么第四个孩子被画在顶部而不是严格的垂直格式。也许对 Graphviz 选项有更多了解的人可以提供帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-24T18:14:43.510

如果您不想安装 graphviz，则可以将[grandalf用于仅 python 的解决方案。](https://github.com/bdcht/grandalf)

另外，这种可视化被称为[分层图形绘制](https://en.wikipedia.org/wiki/Layered_graph_drawing)或[杉山式图形绘制](https://en.wikipedia.org/wiki/Layered_graph_drawing)，它可以显示多种图形，包括非树。

有关详细信息和实施，请参阅[我对不同问题的回答。](https://stackoverflow.com/a/64516717/6844235)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-09T08:51:07.967

另请参阅@Abdallah Sobehy 创建的层次结构，无需使用任何额外的模块/库（如'pygraphviz'），在 [使用networkx打印python图时保留左右子节点](https://stackoverflow.com/questions/33439810/preserving-the-left-and-right-child-while-printing-python-graphs-using-networkx)

也许图表不如上面的那么好，但它完成了所要求的工作！

# git - git reset --soft 并返回到最新的提交

> ID：11479626
> 
> 赞同：18
> 
> 时间：2012-07-13T23:32:10.003
> 
> 标签：git, github

所以我只是做了一个 git --reset soft 来回到之前的提交。现在如果我想回到我之前的最新提交怎么办？即：最新的提交？我尝试做 git log，但那里列出的提交没有最新的提交。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-13T23:52:48.350

`git reset`如果您只想返回并查看旧提交，则使用该工具是错误的，因为正如您所发现的，在许多模式下，它实际上通过删除提交来改变历史记录。

如果您想暂时在工作树中恢复旧的提交，只需使用`git checkout`. 在这种情况下，`git checkout HEAD^`将带您返回一个提交。`git checkout HEAD~3`将带您退回三个提交，依此类推。或者你可以给它从`git log`.

然后，您可以通过执行`git checkout master`（替换`master`为任何分支的名称）返回到最新的提交。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-13T23:39:22.020

你想基本上撤消你的重置吗？它不会出现在您的 git 日志中，因为您已将其还原。但是它会显示在您的

```
git reflog 
```

这将为您提供所有不同分支的列表。

```
git reset HEAD@{1} 
```

如果您的重置是您做的最后一件事，应该可以解决您的问题。

# iphone - iOS - 如何将文本字段提示设置为斜体（使用常规实际文本）？

> ID：11479628
> 
> 赞同：3
> 
> 时间：2012-07-13T23:32:22.327
> 
> 标签：iphone, ios, uitextfield

是否有任何简单的方法可以将文本字段的提示设置为斜体，同时保持实际文本非斜体？下图显示了我正在尝试完成的工作，但实际上并没有工作，因为在第一个文本字段中键入的文本仍然是斜体。

![文本字段](../Images/104b37af6cc2e567e6ed5ea6886a3a09.png)

如果没有简单的方法可以做到这一点，我想我必须在每个文本字段上实现方法来检查文本的长度，如果为零，则应用斜体字体。这会奏效，对吧？有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T23:41:16.467

尝试这个：

```
UIFont* italicFont = [UIFont italicSystemFontOfSize:[UIFont systemFontSize]];    
[yourTextField setValue:italicFont forKeyPath:@"_placeholderLabel.font"]; 
```

* * *

编辑：

好的，这是另一种（合法的）方法：

*   1.子类`UITextField`和覆盖`drawPlaceholderInRect:`：

文本字段子类.h：

```
@interface TextFieldSubclass : UITextField

@end 
```

文本字段子类.m：

```
- (void) drawPlaceholderInRect:(CGRect)rect 
{
    [[UIColor lightGrayColor] setFill];
    UIFont* italicFont = [UIFont italicSystemFontOfSize:[UIFont systemFontSize]];
    [[self placeholder] drawInRect:rect withFont:italicFont];
} 
```

*   2.更改您的`UITextField`类并将其设置为TextFieldSubclass：

![在此处输入图像描述](../Images/378ee4f2cbe3706d5bf8bf579e066368.png)

就是这样。享受。

# command-line - 在一个打印作业中打印多个文件

> ID：11479632
> 
> 赞同：0
> 
> 时间：2012-07-13T23:32:44.167
> 
> 标签：command-line, printing

我有一个程序可以将时间表作为单独的 .xps 文件输出到一个文件夹中。我正在寻找一种使用命令行同时打印所有这些文件的方法。由于可能有数百个这样的文件，因此将它们作为一个打印作业打印也很重要，这样其他文档就不会在它们中间打印。

我断断续续地寻找了大约两个月的时间来寻找一种方法来做到这一点。到目前为止，我一无所获。我将不胜感激有关如何执行此操作的任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:11:15.410

我最终将文件转换为 PDF。然后我下载了 pdftk，它是一个命令行工具，可用于将多个 PDF 文件合并为一个。现在我可以运行 pdftk 然后打印组合文件。不幸的是，在 Windows 中没有更好的方法来处理这个问题，但至少它可以工作。

# c# - 如何在 C# 中模仿任何特定的桌面应用程序命令？

> ID：11479634
> 
> 赞同：0
> 
> 时间：2012-07-13T23:32:54.260
> 
> 标签：c#, macros, automation, command, controls

抱歉这个菜鸟问题，我只是想要一些关于我需要学习什么才能完成这些任务的指示。

我想知道自动化控制任何特定软件需要哪些技能和工具。我的目标是简化类似于创建微型的任务。

但是，我知道很多宏程序使用屏幕 x 和 y 坐标，但我相信更好的方法是借助作弊引擎等帮助读取内存？那是我需要的工具吗？还是有更适合任务的替代方案？

基本上我想说，也许是一个 C# winform，带有某些按钮，可以帮助我执行一系列命令。它类似于游戏机器人程序，但不是为游戏而设计的，而是为其他与办公室相关的任务而设计的。例如打开文件、基本编辑和关闭。

例如：

打开 excel 打开文件 xyz 读取单元格 B4 值（也许我可以在其他地方使用该值并将其显示在 winform 上，甚至抓取并在 C# 中进行一些进一步计算并将其放回 excel）移动到 F1 并输入值 1234 保存文件退出擅长

我基本上是在寻找一种方法来使宏成为任何程序，而不仅仅是 excel，而且没有使用 x 和 y 坐标的缺点，因为如果程序窗口移动，它会导致宏发生故障。

因此，读取程序的内存是否考虑最佳解决方案？因此，我可以与任何程序的文件、数据和命令进行交互，以实现一些桌面使用自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:48:02.713

“阅读程序的记忆”很有趣，但不是自动化任何事情的必要可靠方法。

它对于作弊者很有用，因为通常愿意为作弊工作付出很长的路要走的人，因此会检查正确的版本，获取特定的作弊补丁/版本，禁用所有保护功能等等。

对于一般的宏创建，它的用处要小得多，因为您将反对内置的障碍（如安全 ACL、地址空间随机化 - ASR、自动更新或 JIT 编译）和显式创建的障碍（如调试器保护）。我相信普通人不太可能限制功能以使宏工作......

# objective-c - iOS - 如何创建我的所有控制器都可以调用的“实用程序”类

> ID：11479638
> 
> 赞同：9
> 
> 时间：2012-07-13T23:33:54.780
> 
> 标签：objective-c, ios, ios5

我是 iOS 和 obctive-c 的新手，所以我不太确定如何最好地完成这个看似简单的任务。

我想要的是用伪代码制作一个看起来像这样的类：

```
class UtilityClass
{
    // Have a method that I can pass parameters to 
    String doCalculation ( String art1 , String arg2 )
    {
        return arg1 + arg2;
    }
} 
```

我的不确定性是：

1) xCode 似乎倾向于以相对扁平的方式布置我的文件结构。那么我应该创建一个 utils 目录并将这个文件放在 utils/fileName 下吗？通常我习惯了至少有一些 src 目录，但到目前为止，我还没有被任何东西提示创建一个。2）我如何从我的控制器导入和调用这个类/函数？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T23:46:35.770

只需创建一个名为 Utilities 的新组，然后在其中创建您的类。喜欢，

```
utils.h 
utils.m 
```

稍后在您的 ViewController 的头文件中添加。

```
#import "utils.h" 
```

如果这个 utils 类被很多控制器在非常胖的项目中使用，那么，找到一个名为的文件，应该在支持文件组内。

```
YourAppName-Prefix.pch 
```

在那个文件中，你有一个这样的代码块，

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>
#endif 
```

只需编辑此块并在`utils.h`此处添加您的引用，这样您的整个项目就可以创建 utils 对象，而无需显式导入到它们自己的标头中。

像这样编辑。，

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>
    #import "utils.h"
#endif 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-28T14:04:40.300

首先在 Xcode 中创建一个新文件并**取消选中**xib 文件。随意命名项目。并从 NSObject 扩展它。

要创建静态方法，您必须将函数开头替换为 + 之类

界面。班级

```
@interface Utility : NSObject
+ (int)getNumber;
+ (void)setNumber:(int)number;
@end 
```

.m 类

```
#import "Utility.h"

@implementation Utility

static int number = 1;

+ (int)getNumber {
  return number;
}

+ (void)setNumber:(int)newNumber {
  number = newNumber;
}

+ (id)alloc {
  [NSException raise:@"Cannot be instantiated!" format:@"Static class 'ClassName' cannot be instantiated!"];
  return nil;
}

@end 
```

在任何其他 ViewController 中调用它

```
 NSLog(@"number = %d", [Utility getNumber]);
    [Utility setNumber:3];
    NSLog(@"number = %d", [Utility getNumber]); 
```

[详情..](http://eureka.ykyuen.info/2010/04/20/objective-c-create-a-static-class/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T23:49:07.040

将文件存储在哪里取决于您，只要确保 XCode 知道在哪里可以找到它们。类本身应该像任何其他 Objective C 类一样，只是让它继承自`NSObject`而不是图形类之一：

```
// MyClass.h
@interface MyClass : NSObject {
    int instanceVar;
}
@property (nonatomic, assign) int property;
@end

// MyClass.m
#import "MyClass.h"
@implementation MyClass
@synthesize property;
-(id) init {
    ...
}
-(int) function  {
    ...
}
@end 
```

要在另一个文件中使用该类，只需像任何其他类一样导入标题

```
#import "MyClass.h" 
```

# jquery - jQuery 和常规 javascript：防止 jQUery onclick 基于父结果触发

> ID：11479639
> 
> 赞同：0
> 
> 时间：2012-07-13T23:33:56.713
> 
> 标签：jquery, onclick, form-submit, onclicklistener

我有一些简单的 HTML：

```
 <input type="submit" value="Save" onclick="return isAbleToSubmit();" id="testSubmit" class="alertWhenDone"/>
function isAbleToSubmit() {
    return confirm ("Do you want to continue?");
} 
```

我比 jQuery 代码：

```
$(".alertWhenDone").click(function (event) {
   alert ("i am done");
} 
```

如果他们在确认时选择是，我只希望在完成时发出警报。做这个的最好方式是什么？

请注意，我将其分开，因为我希望所有类`alertWhenDone`都具有显示处理链接消息的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:58:43.447

您可以从输入中删除 onClick 事件并执行以下操作：

```
$(function(){

 $('#testSubmit').click(function(){
    $return = confirm ("Do you want to continue?");
    if ($return == true){
        if ( $(this).hasClass('alertWhenDone') == true){
            //doStuff
            alert('done');                
        }
    }
 })        
}) 
```

[例子](http://jsfiddle.net/EmpbY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:36:35.653

您可以使用`data-*`属性并将`prompt`字符串存储在其中。尝试这个：

```
<input type="submit" value="Save" data-confirm="Do you want to continue?" id="testSubmit" class="alertWhenDone"/> 
```

```
$("input[type=submit]").click(function (event) {
   if (confirm ($(this).data('confirm'))) {
        alert ("i am done");
   }
}) 
```

[演示](http://jsfiddle.net/y62eD/)

# ios - 使用 appcelerator 实时改变音高

> ID：11479643
> 
> 赞同：1
> 
> 时间：2012-07-13T23:34:29.733
> 
> 标签：ios, titanium-mobile, pitch, pitch-shifting

我是 Appcelerator 的 Titanium SDK 的新手，所以如果这个问题有一个明显的答案，我提前道歉。

有没有办法使用 appcelerator 实时改变声音的音高？有没有可以做到这一点的模块？

在寻找答案时，我发现了一些可以做到这一点的 Objective-c 库（例如 dirac-2）。有没有什么方法可以在没有专用模块的情况下通过 Titanium 与此类库进行交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:08:01.710

经过一番搜索，我找到了一个模块 - 零延迟声音 - 可以实时控制样本音高。

[https://marketplace.appcelerator.com/apps/891?1475082272](https://marketplace.appcelerator.com/apps/891?1475082272)

此外，这个模块的支持是值得称道的。

# c++ - 初学者二十一点游戏

> ID：11479645
> 
> 赞同：2
> 
> 时间：2012-07-13T23:34:34.110
> 
> 标签：c++, blackjack

我目前正在将语言从 Java（初学者）切换到 C++，并想复制我用 Java 制作的 BlackJack 游戏，但在使用代码块在 C++ 中进行设置时遇到了困难。

代码设计：

*   枚举的等级和花色。

*   Rank 和 Suit 的 52 种变体一起形成了 52 个卡片对象

*   将对象存储在向量中

*   随机化向量

*   将两张卡片从 Vector 弹出到 Player

*   向庄家弹出一张牌

*   当玩家或庄家发牌时，计算取回的牌，value += to int player/dealerValue；

我不知道如何实现这一目标：

甲板.cpp：

```
 for(Suit suit: Suit.values()) {
        for (Rank rank : Rank.values()) {   
           add(new Card(rank, suit));   
        }
    }
     createDeck()
     shuffleDeck()
     dealUser()
     dealerDealer() 
```

播放器.cpp

```
 userVector
     dealerVector
     getUserVector()
     getDealerVector()
     addCardUser()
     addCardDealer()
     calcUserValue()
     calcDealerValue() 
```

卡片.cpp

```
 card(Rank rank, Suit suit) { }
     getSuit()
     getRank() 
```

黑杰克.cpp

```
 call deck constructor
    Player user  =  new Player()
    Player dealer = new Player() 
```

---游戏代码---

有人可以为我介绍或指导我一些好的资源：

*   管理头文件

*   我需要的一些方法的简短骨架代码块

*   但最重要的是，我是否需要为这个程序使用指针？几天来，我只能访问在线 YouTube 教程，而我的 c++ 书籍到货了，并且对任何类型的内存管理都没有信心。

*   这个程序的任何通用 c++ 技巧都会很棒。

非常感谢您花时间和耐心阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:44:31.867

为了解决您的观点：

## 管理头文件

不要打扰。只需将所有内容都放在一个源文件中（与 Java 不同，您完全可以在 C++ 中执行此操作）。如果您愿意，也许稍后您可以将其分解为多个源文件。

## 方法的骨架代码块

如果您已经获得了用 Java 编写的代码，那么您的骨架块就在那里。

## 我必须使用指针吗？

可能不是。但是，如果您只是想开始使用看起来像您的 Java 代码的程序，您总是可以简单地忽略手动内存管理，`new`调用`delete`. 你会到处都有内存泄漏，但一次只有一件事，对吗？

典型的“现代”C++ 风格几乎完全避免使用原始指针。您可以稍后再进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:13:23.867

我从“边做边学”的角度来解决这个问题......所以这个答案的目的是让你走上正轨，这样你就可以开始实验了。

1.  **设计**：两种语言非常相似，因此无论是 Java 还是 C++，类和类结构都无关紧要，因此当您使用 C++ 时，您可以继续“用 Java 术语”思考。您可以从相同的设计开始。

2.  **文件组织**：将 .java 文件视为对应于 .h 文件和 .cpp 文件对（并非总是如此，扩展名可能会根据偏好而有所不同，但现在就可以了）。将 Java 代码复制到 .h 头文件中，并将函数定义隔离到对应的 .cpp 文件中。通常的语法清理是必要的 - 将导入替换为`#include<header.h>`定义，用类名作为函数定义的前缀（记住使用`ClassName::`语法）。还要记住，包含头文件并不意味着您包含上下文 - 您仍然需要使用适当的命名空间来引用它。**注意**：这一步*会*产生编译错误，但这可能是学习和习惯差异的最佳方式。

3.  **内存管理**：在您的 Q 指针上，良好的 C++ 编程约定表示：*指针 = no-no，堆栈变量和智能指针 = yes-yes*。将堆栈变量用于普通/临时变量。对于参数等，请使用`boost::shared_pointer`（下载并安装[boost 库](http://www.boost.org/)）。它的用法就像一个普通的 C++ 指针（即使用`newlyDealtCard->member`句法）。简而言之，原因是共享指针模仿了 Java 对象模型——对象分配创建引用而不是副本，并且当所有引用不再使用时，对象会自动删除。100 次中有 99 次行为是相同的，这会节省你花在理解其他事情上的时间。一旦您对 C++ 如何表示和处理内存感到满意，您就可以开始使用其他智能指针类型。句法：

    Card newdealtCard = new Card(randomSuite, randomValue); //Java

    boost::shared_pointer newdealtCard(new Card(randomSuite, randomValue)); //C++

4.  **继承**：对于`interface`s，使用关键字`class`。并声明函数[pure virtual](http://en.wikipedia.org/wiki/Virtual_function#Abstract_classes_and_pure_virtual_functions)。从这些“接口”或其他类派生时，现在使用公共继承。C++ 中还有另外两种类型，一旦你变得更舒服，就可以开始查找它们。

其余的差异主要是语法或只是名称不同的标准函数，它们不涉及视角的改变。希望随着您编写更多代码，您将能够在这些选项之外进行探索。

祝你好运！

# python - Celery 3.0.1 中的框架错误

> ID：11479647
> 
> 赞同：6
> 
> 时间：2012-07-13T23:34:46.313
> 
> 标签：python, django, rabbitmq, celery

我最近从 2.3.0 升级到 Celery 3.0.1，所有任务都运行良好。很遗憾。我经常收到“框架错误”异常。我也在运行主管来重新启动线程，但由于这些线程从未真正被杀死，主管无法知道需要重新启动芹菜。有没有人见过这个？

```
2012-07-13 18:53:59,004: ERROR/MainProcess] Unrecoverable error: Exception('Framing Error, received 0x00 while expecting 0xce',)
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/__init__.py", line 350, in start
    component.start()
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/consumer.py", line 360, in start
    self.consume_messages()
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/consumer.py", line 445, in consume_messages
    drain_nowait()
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 175, in drain_nowait
    self.drain_events(timeout=0)
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 171, in drain_events
    return self.transport.drain_events(self.connection, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 262, in drain_events
    return connection.drain_events(**kwargs)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 97, in drain_events
    chanmap, None, timeout=timeout)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 155, in     _wait_multiple
    channel, method_sig, args, content = read_timeout(timeout)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 129, in read_timeout
    return self.method_reader.read_method()
  File "/usr/local/lib/python2.7/dist-packages/amqplib/client_0_8/method_framing.py", line 221, in read_method
    raise m
Exception: Framing Error, received 0x00 while expecting 0xce 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T01:48:54.960

虽然我不确定为什么会发生这种情况，但从 切换`amqplib`到`librabbitmq`帮助我克服了这个麻烦。

我没有改变任何配置，只是：

```
pip uninstall amqplib
pip install librabbitmq 
```

并重新启动芹菜工人。

得到了这个想法形式[https://github.com/celery/celery/issues/922](https://github.com/celery/celery/issues/922)

# mysql - 通过 phpmyadmin 数据库导入在服务器上的 SQL 查询出错

> ID：11479653
> 
> 赞同：-1
> 
> 时间：2012-07-13T23:36:36.027
> 
> 标签：mysql, database, phpmyadmin, webserver

我正在尝试通过将数据库导入我的服务器`phpMyAdmin`，但出现以下错误，需要一些帮助才能找到问题。

> ```
> SQL query:
> 
> --
> -- Database: `mydata`
> --
> -- --------------------------------------------------------
> --
> -- Table structure for table `add_place`
> --
> CREATE TABLE IF NOT EXISTS  `add_place` (
> 
>  `id` INT( 11 ) NOT NULL AUTO_INCREMENT ,
>  `place_name` VARCHAR( 50 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `place_tel` VARCHAR( 50 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `place_email` VARCHAR( 250 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `url` VARCHAR( 150 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `place_address` VARCHAR( 150 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `place_describe` TEXT CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `place_cat` VARCHAR( 150 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
>  `image` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
> PRIMARY KEY (  `id` )
> ) ENGINE = INNODB DEFAULT CHARSET = latin1 AUTO_INCREMENT =21;
> 
> MySQL said: 
> 
> #1046 - No database selected 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:39:46.260

首先输入这个命令：

```
use mydatabase; 
```

（显然用“mydatabase”代替您的数据库名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:40:03.173

您需要选择您正在使用的数据库。 `add_place`是您的表，您必须添加`database_name.add_place`以确保 PHPMyAdmin 可以将其添加到正确的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:42:04.143

您首先需要创建一个数据库，然后`Import`在其中使用。换句话说，创建数据库后，您还需要单击 phpMyAdmin 左侧的名称。只有在那之后，您才能使用`Import`选项，因为您在 PMA 中处于正确的“深度”。如果您已经拥有要将数据导入到的数据库，则只需在 PMA 左侧的数据库列表中单击它。

如果您尝试通过主页上的“导入”直接导入数据，它将假定您的 SQL 转储包含对数据库本身的引用，而您的代码显然不是这种情况。

# php - 如何在 Codeigniter 分页中使用页码而不是偏移量？

> ID：11479656
> 
> 赞同：5
> 
> 时间：2012-07-13T23:36:45.517
> 
> 标签：php, mysql, codeigniter, pagination

我已阅读有关 Stackoverflow 的所有问题，但没有看到该问题的明确答案。我目前正在使用 codeigniter 分页库来生成使用限制和偏移量的分页链接：

```
$config['base_url'] = base_url() . 'explore/featured/index/';
    $config['total_rows'] = $this->Projects_model->get_featured_count();//Count featured projects
    $config['per_page'] = 12;
    $config['uri_segment'] = 4;
    $config['display_pages'] = FALSE;
    $config['next_link'] = 'Older &rarr;';
    $config['prev_link'] = '&larr; Newer';
    $this->pagination->initialize($config);
    $limit = $config['per_page'];
    $offset = $this->uri->segment(4);

    $data['pagination'] = $this->pagination->create_links();

    $data['projects'] = $this->Projects_model->get_featured($limit, $offset); //get featured projects from database 
```

上面的代码限制了我的查询的输出值，并使用了我的第 4 个 URI 段中包含的偏移量。

如何将以下代码更改为页码？？？似乎是不可能的，因为我将不再能够在我的网址中使用偏移量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T23:43:27.103

在某些时候，CI 更新了他们的[分页库](http://codeigniter.com/user_guide/libraries/pagination.html)以（最终）适应这个：

> `$config['use_page_numbers'] = TRUE;`
> 
> 默认情况下，URI 段将使用您正在分页的项目的起始索引。如果您希望显示实际页码，请将其设置为 TRUE。

如果您使用的版本没有此功能并且无法更新整个 CI 安装，您应该可以直接放入最新的分页库。

要计算您的数据库偏移量，请使用`$limit * $page_number`其中“page_number”是您的 URL 中的值（在您的情况下为第 4 段）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-05T20:24:58.530

`$limit * $page_number`上面提到的没有返回真正的偏移量作为起点，并且在页码为 1 时产生了问题，因为此时偏移量必须为 0。这对我有用：

```
$offset = ($page_number  == 1) ? 0 : ($page_number * $config['per_page']) - $config['per_page']; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-21T06:24:10.423

只需使用：

```
$offset = ($this->uri->segment(4)) ? $this->uri->segment(4) : 1;
$data['projects'] = $this->Projects_model->get_featured($limit, $limit*($offset-1)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-01T11:08:15.673

```
$page_num = $this->uri->segment(1);
$offset = ($page_num  == NULL) ? 0 : 
          ($page_num * $config['per_page']) - $config['per_page']; 
```

# vim - Vundle：激活翡翠高亮？

> ID：11479657
> 
> 赞同：2
> 
> 时间：2012-07-13T23:37:03.877
> 
> 标签：vim, express, pug

Mac OSX 10.7、Vim 7.3

我已经为 Vim 安装了 Vundle，并且在我的`~/.vimrc`:

```
Bundle "gmarik/vundle"
Bundle "pangloss/vim-javascript"
Bundle "https://github.com/digitaltoad/vim-jade.git" 
```

然后我运行（在 Vim 中）`:BundleInstall!`：，vim 给出了一个不错的结果`Done!`，没有提到任何错误。

Javascript文件突出显示就好了。但是当我打开一个玉文件（`express/views/index.jade`）时，我没有得到任何颜色突出的爱。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T04:38:15.233

对于新版本的 Vundle，将其添加到您的`.vimrc`：

```
Plugin 'digitaltoad/vim-jade' 
```

并运行

```
:PluginInstall 
```

这对我行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T19:41:43.013

只需使用存储库的名称

```
Bundle 'digitaltoad/vim-jade' 
```

然后

```
$vim +BundleInstall! +BundleClean +q 
```

重新加载 vim。刚为我工作。

# javascript - 可点击的 div 标签使用 not() 该 div 内的任何 div 标签

> ID：11479659
> 
> 赞同：1
> 
> 时间：2012-07-13T23:37:32.003
> 
> 标签：javascript, jquery, html, click

一个非常没有吸引力的标题，但我不知道如何解释它。

我有以下代码，这是我的导航栏。每个“组”都是一个带有下拉菜单的选项。如果您想直观地查看此内容，可以在 www.titaniumwebdesigns.com 上查看

```
<nav>
  <ul>
    <div id="line"><img src="/images/nav/line.png" alt="" /></div>
    <li>
      <div class="group">
        <div class="outside"><div class="sub a media"></div></div>
        <div class="inside"><div class="sub b gallery"></div></div>
        <div class="circle selected"><div class="sub c showcase"></div></div>
      </div>
      <div class="text portfolio"></div>
    </li>
    <li>
      <div class="group">
        <div class="outside"><div class="sub a everything-else"></div></div>
        <div class="inside"><div class="sub b development"></div></div>
        <div class="circle"><div class="sub c design"></div></div>
      </div>
      <div class="text services"></div>
    </li>
    <li>
      <div class="group">
        <div class="outside"><div class="sub a the-company"></div></div>
        <div class="inside"><div class="sub b the-director"></div></div>
        <div class="circle"><div class="sub c employees"></div></div>
      </div>
      <div class="text about"></div>
    </li>
    <li>
      <div class="group">
        <div class="outside"><div class="sub a arrange-a-meeting"></div></div>
        <div class="inside"><div class="sub b get-in-touch"></div></div>
        <div class="circle"><div class="sub c support"></div></div>
      </div>
      <div class="text contact"></div>
    </li>
    <li>
      <div class="group">
        <div class="outside"><div class="sub a facebook"></div></div>
        <div class="inside"><div class="sub b twitter"></div></div>
        <div class="circle"><div class="sub c blog"></div></div>
      </div>
      <div class="text social"></div>
    </li>
  </ul>
  <div class="clear"></div>
</nav> 
```

我希望用户单击 .outside、.inside 或 .circle 并让它找出它必须找到哪个 index() 然后找到它的链接，然后使用一些不错的 jQuery 效果重定向或滑入。这是一个例子：

```
var _0 = "portfolio.php";
var _1 = "showcase.php"; //etc...

//below within $(document).ready() {
$(".group div").not(".sub").click(function() {
  alert($(this).index()); //or find the appropriate page using the variables above
}); 
```

然而，它只是没有按预期的方式工作。我知道 .sub 在选定的 div 内，但有没有办法忽略这些，即使它们在该 div 标签内？我想点击 .outside、.inside、.circle 并且发生了一些事情，但同时，我想点击 .sub 并且什么也没有发生，即使它们在其他 div 内。CSS 要求它们位于这些 div 标签内，但在视觉上，它们是使用 CSS 从 div 标签中删除的，因此您不会在同一个地方单击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:04:02.177

you should use a more specific selector:

```
$(".group").children('div').click(...) 
```

or

```
$(".group > div").click(...) 
```

This will make only .inner, .outer, and .circle clickable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:47:25.947

只是不要为那些有子类的人做任何事情。像这样：

```
//below within $(document).ready() {
$(".group div:odd").click(function(e) {
  if ($(this).hasClass("sub"))
  {
    e.stopPropagation();
    return;
  }
  alert($(this).index()); //or find the appropriate page using the variables above
}); 
```

# ruby-on-rails - rails3 sqlite日期比较返回空集

> ID：11479661
> 
> 赞同：1
> 
> 时间：2012-07-13T23:38:05.330
> 
> 标签：ruby-on-rails, ruby, sqlite, datetime, activerecord

我正在尝试选择 SQLite DB 中具有未来日期的所有记录。

```
Record.where('scheduled_date > ?', Time.now) 
```

在我的计算机上，这当前返回一个空数组。

但是，如果我使用以下内容：

```
Record.all.map { |record| record if record.scheduled_date > Time.now } 
```

我收到了一个包含未来日期的所有记录的数组。

此外，我的同事在他的机器上运行相同的 Rails 项目，能够使用 ActiveRecord 查询成功返回预期的结果数组。在最近取消我对项目的更改后，此查询对他不起作用，他的计算机表现得像我的一样。

我怀疑这个 Rails 项目中的 SQLite (v. 1.3.6) 或 Rails3 (v. 3.2.3) 可能存在环境事故，不知道去哪里找。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T15:55:59.313

问题源于 SQLite 将日期时间值存储为字符串这一事实。因此，您必须完全匹配格式，同时考虑到字典排序顺序。对于 mySQL、Oracle、Postgres 等，列具有不同的数据类型，这绝不是问题。

获得预期结果的另一种方法是执行“datetime(the_column) >= ?” 甚至是“datetime(the_column) >= datetime(?)”，尽管这当然效率要低得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:32:22.553

我的 sqlite3 开发数据库也有类似的问题。

我们使用 ActiveSupport::TimeWithZone::to_s(:db) 为数据库播种（调用 ActiveRecord::connection.execute 以提高速度 - 不要因为我同事的代码评判我 :)。

```
sql =<<-EOL
  INSERT INTO some_table(day)
    VALUES('#{Time.zone.now.beginning_of_day.to_s(:db)}')
EOL
SomeTable.connection.execute(sql) 
```

对于查询，我将 TimeWithZone 范围传递给 ARel in 语句（以在其间生成 sql）。

```
SomeTable.where(SomeTable.arel_table[:day].in((Time.zone.now.beginning_of_day)..(1.day.from_now))) 
```

to_s(:db) 的时间戳看起来像这样：`2013-10-01 04:00:00`

arel 生成的查询中的时间戳如下所示：`2013-10-01 04:00:00.000000`

尽管这些应该是等价的，但数据库将后者解释为晚于前者。我花了很长时间才偶然发现小数秒的差异，对我来说它看起来像是一个 sqlite3 实现错误（参见：[https](https://bugs.freedesktop.org/show_bug.cgi?id=50575) ://bugs.freedesktop.org/show_bug.cgi?id=50575 ）。

我有一种感觉，这可能不是你的问题（因为 iso8601 解决了它），但希望这会给别人一些挫折！

# url - 动态添加 url 到链接

> ID：11479663
> 
> 赞同：0
> 
> 时间：2012-07-13T23:38:20.000
> 
> 标签：url, hyperlink

如何将 url 'http://www.sportingpulse.com/mobile/' 动态添加到这些链接的开头。我想在我们的网站 www.saintsbc.com 上显示这些篮球夹具链接，但不想每次都手动输入起始网址。我们的网站目前使用 php 和 javascript。所以两者都可以。

```
 <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223615"><div class="list-name">2012 Winter 18 Girls A</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223609"><div class="list-name">2012 Winter 16 Boys CR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223712"><div class="list-name">2012 Winter 18 Girls AR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223698"><div class="list-name">2012 Winter 16 Boys D</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223635"><div class="list-name">2012 Winter 18 Girls B</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223648"><div class="list-name">2012 Winter 16 Boys DR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223583"><div class="list-name">2012 Winter 16 Boys E</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223601"><div class="list-name">2012 Winter 23 Girls A</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223608"><div class="list-name">2012 Winter 18 Boys A</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223691"><div class="list-name">2012 Winter 23 Girls AR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223637"><div class="list-name">2012 Winter 18 Boys AR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223578"><div class="list-name">2012 Winter 18 Boys B</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223711"><div class="list-name">2012 Winter 23 Girls B</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223620"><div class="list-name">2012 Winter 18 Boys BR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223661"><div class="list-name">2012 Winter 18 Girls BR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223573"><div class="list-name">2012 Winter 18 Boys C</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223639"><div class="list-name">2012 Winter 23 Girls BR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223679"><div class="list-name">2012 Winter 23 Girls C</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223676"><div class="list-name">2012 Winter 20 Boys A</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223579"><div class="list-name">2012 Winter 20 Boys AR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223686"><div class="list-name">2012 Winter 23 Boys A</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223592"><div class="list-name">2012 Winter 20 Boys B</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223704"><div class="list-name">2012 Winter 23 Boys AR</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223662"><div class="list-name">2012 Winter 23 Boys B</div></a></li>
      <li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223685"><div class="list-name">2012 Winter 23 Boys BR</div></a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:37:35.097

解决了...即使上面的链接没有指定我的 url 主机，默认情况下它们必须自动添加。所以我修改了代码以使用“替换”将我的 url 主机更改为外部主机。再次感谢大卫。

```
<script type="text/javascript">
  var ul = document.getElementById("mylinks");
  var lis = ul.getElementsByTagName("li");
  var MYurl = "http://" + window.location.host + "/mobile/";
  var NEWurl = "http://www.sportingpulse.com/mobile/";
  for(var i = 0; i < lis.length; i++)
  {
    lis.item(i).childNodes[0].href = lis.item(i).childNodes[0].href.replace(MYurl, NEWurl);
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:27:51.510

如果 <ul> 或 <ol> 有一个 id 可能用 javascript 做这样的事情

```
<ul id="mylinks">
<li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223615"><div class="list-name">2012 Winter 18 Girls A</div></a></li>
<li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223609"><div class="list-name">2012 Winter 16 Boys CR</div></a></li>
<li><a href="mobile.cgi?a=CF&amp;aID=2307&amp;cID=223712"><div class="list-name">2012 Winter 18 Girls AR</div></a></li>
</ul>

<script type="text/javascript">
var ul = document.getElementById("mylinks");
var lis = ul.getElementsByTagName("li"); 
var preurl = "http://www.sportingpulse.com/mobile/";

for( var i = 0; i < lis.length; i++ ) 
{ 
    lis.item(i).childNodes[0].href = preurl + lis.item(i).childNodes[0].href;
}
</script> 
```

# java - 找到一对 QuadCurve2D 的交点

> ID：11479664
> 
> 赞同：4
> 
> 时间：2012-07-13T23:38:21.007
> 
> 标签：java, geometry, java-2d, bezier

`QuadCurve2D`有没有一种简单的方法来近似两个实例相交的点（如果有的话） ？

也就是说，我如何计算该图中红点的坐标？没有明显的方法`QuadCurve2D`可以做到这一点。

![两条二次贝塞尔曲线（蓝色），近似交点（红色）](../Images/e3db4a615aca00cfa81cd3799044063d.png)

（注意：这些点并不准确，因为我已经为图表手动调整了它们。还要注意“缺失的”第四点，即使它位于（无限）抛物线上，它也不位于曲线段上。）

这两个曲线段是使用以下代码创建的：

```
QuadCurve2D curve1 = new QuadCurve2D.Double(-2.00, -2.00, +0.75, +4.75, +2.00, -0.75);
QuadCurve2D curve2 = new QuadCurve2D.Double(-2.50, -0.75, +5.50, -0.50, +0.50, +1.25); 
```

注 2：我还希望能够与直线和二次曲线相交，但我认为这可以通过将控制点之一设置为与端点共线来处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:55:52.927

取决于您是对近似解还是对精确解（最高双精度）感兴趣。对于近似值，您可以简单地将曲线参数化为某个函数*f* ( *t* )，然后进行一些间隔嵌套以找到*t*的值，从而最小化曲线之间的距离。

对于精确的解决方案，您必须找到两个圆锥截面相交的四个点。[在 wikipedia 上](http://en.wikipedia.org/wiki/Conic_section#Intersecting_two_conics)有一个简短的段落。[投影几何透视](https://rads.stackoverflow.com/amzn/click/com/3642172857)一书有一个较长的部分来解释细节。当然有各种语言可用的实现。刚才我想到了[Asymptote的那个。](http://www.piprime.fr/files/asymptote/geometry/modules/geometry.asy.html#intersectionpoints%28conic,conic%29)[但是，一般情况下](http://www.piprime.fr/files/asymptote/geometry/modules/geometry.asy.html#intersectionpoints%28bqe,bqe%29)的实现看起来非常可怕，所以可能是他们在那里做的事情过于复杂。

一旦你有了所有四个交点，你仍然需要决定它们中的哪一个位于由 QuadCurve 的端点分隔的圆锥部分，但相比之下这应该很简单。所以总的来说，你有这三个步骤：

1.  从端点和控制点计算圆锥截面的矩阵
2.  使用铅笔中的简并元素相交圆锥截面
3.  确定这些交点是否位于端点之间

如果您对这些步骤之一的数学细节有疑问，最好在[数学堆栈交换](https://math.stackexchange.com/)上询问。不仅那里的人们在解决数学问题方面有更多经验，而且用于排版数学的 MathJax 功能将使答案比这里的答案所希望的更具可读性。

至于你关于直线的注释2：到目前为止这更容易，因为如果你用坐标来表达这个问题，你只会得到一个二次方程，而不是天真的方法的4次方程一般问题，如果您按照上述参考资料的描述解决它，仍然是 3 级。可以编写通用方法，使圆锥与直线相交是解决方案中的一个步骤，因此为此提供一种方法可能会足够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:08:27.390

一种实用的方法是`Area`通过添加曲线并关闭结果来创建两个 s，这些`Area`s 的交点应该将所有原始交点作为某些线段的端点。因此，迭代生成的路径，忽略任何 Bézier 控制点，对于遇到的每个线段端点，检查它是否位于原始曲线上。

或者看看这是如何实现的`Area`，看看你是否可以根据你的需要进行调整。如果您的许可允许包含 GPL2 代码。

# ruby-on-rails - 从表中提取数据

> ID：11479665
> 
> 赞同：1
> 
> 时间：2012-07-13T23:38:33.380
> 
> 标签：ruby-on-rails, xpath

我是 Ruby 和 Xpath 的新手。我需要从表中提取系统功能

[http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1](http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1)

到目前为止，我已经尝试定位所有的 td 标签，该页面不使用 CSS id，所以我不能以这种方式定位。

我尝试了以下代码

```
doc.xpath('//tr/th/span[normalize-space(text())="System features"]/..') 
```

但它什么也不返回；（

有谁知道解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:19:21.837

该表达式在给定的源上应该可以正常工作，但它并不是真正的惯用语。您可能想使用更像这样的东西：

```
//tr/th[span[normalize-space()='System features'] 
```

1.  `normalize-space`需要一个字符串参数。通过采用文档顺序中的第一个文本节点来传递`text()`强制转换为字符串的节点集。这在您的文档中并不重要，因为只有一个子文本节点，但您应该知道这是正在发生的事情。
2.  您不需要`/..`在表达式末尾使用回溯树。您可以使用嵌套谓词测试孩子的存在，`span`从而直接选择所需的`th`。

如果您想利用目标`th`仅包含一个子`span`节点这一事实，您可以编写以下简化表达式：

```
//tr/th[normalize-space(span)='System features'] 
```

那么，为什么不工作？很难说，但这可能是因为您用来解析文档的工具创建的结构与它在文字源中的显示方式不同（例如，因为输入不是格式正确的 XML）。尝试稍微不同的表达方式：

```
//*[span[@class='themebody' and normalize-space()='System features']] 
```

或者，也许您应该首先验证您是否可以检索`span`自身，然后从中构建表达式：

```
//span[@class='themebody' and normalize-space()='System features'] 
```

# jquery - 为什么按钮不关闭？

> ID：11479671
> 
> 赞同：0
> 
> 时间：2012-07-13T23:39:23.440
> 
> 标签：jquery

我在下面有一段代码，其中包含按钮 AZ。每个按钮都可以打开和关闭。

```
<?php
    $a = range("A","Z");
?>

<?php
        $i = 1;
        foreach($a as $key => $val){
            if($i%7 == 1) echo"<tr><td>";
            echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
            if($i%7 == 0) echo"</td></tr>";
            $i++;
        }
    ?> 
```

下面是我试图打开和关闭正确按钮的代码，但问题是它没有关闭按钮。

```
var answers = '#answer'+btn;
$('.answers.answerBtnsOn').find('answerBtnsOn').addClass('answerBtnsOff'); 
```

现在，如果我将最后一行代码更改为以下代码：

```
$('.answerBtnsOn').find('answerBtnsOn').addClass('answerBtnsOff'); 
```

然后它可以工作，但问题是我所有的按钮都有“.answerBtnsOn”类，我只希望关闭“answers”变量中的按钮。

所以我把代码改成这样：

```
$('.answerBtnsOn', answers).addClass('answerBtnsOff'); 
```

但是它不会关闭任何按钮，为什么它不会关闭任何打开的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:47:18.150

尝试这个

```
$('.answers.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff'); 
```

或者

```
$('.answers').filter('.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff'); 
```

在您的代码中，您永远不会删除`on`类，只是在其`off`上添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:47:57.323

试试`toggleClass()`。看起来您只是在添加类而不是更改它或删除以前的类。

有关完整文档，请参阅 jQuery 网站：[http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

就像声明的那样：

```
$('#foo').toggleClass(className, addOrRemove); 
```

相当于：

```
if (addOrRemove) {
  $('#foo').addClass(className);
} else {
  $('#foo').removeClass(className);
} 
```

所以在你的代码中，我会写：

```
$('.answerBtnsOn', answers).toggleClass('answerBtnsOn'); 
```

当然，除非您的按钮关闭状态与未按下的默认状态不同，否则对于按钮来说这将是非常奇怪的。无论哪种方式，您都可以使用此功能轻松切换两个类。

# javascript - 声明对象的最佳方式是什么？

> ID：11479675
> 
> 赞同：1
> 
> 时间：2012-07-13T23:40:07.383
> 
> 标签：javascript, oop, object

在javascript中声明对象的最佳方式是什么？

这个

```
var Class = function(){};

Class.prototype.print = function(){
    console.log('hello world');
}; 
```

或者这个

```
var Class_2 = {};

Class_2.print = function(){
    console.log('hello world');
}; 
```

在这种情况下，我应该使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:56:04.793

这取决于您是要创建一个类还是单个对象。

JavaScript OOP 模型基于原型，而不是类。这就是为什么您不仅可以将属性和方法添加到类（意味着该类的所有“实例”都将具有该属性或方法），还可以添加到特定对象。因此，您可以拥有类 C 的对象 A 和 B 实例，并且您可以向 A 添加只有 A 具有而 B 没有的特殊行为……这一切听起来很奇怪，因为 JavaScript 实际上没有类。它只有原型，您可以或多或少地使用原型可以做的事情来“模拟”类。在 JavaScript 中，当对象 A 是另一个对象 B 的“实例”时，您实际上是在说 B 是 A 的原型。这意味着您将根据 A 与 B 的差异来定义 A。

在现实世界中，这意味着您与绵羊的第一次相遇是与多莉，一只又大又白、多毛的绵羊。所以你说 Dolly.color = white; Dolly.hair = a_lot; Dolly.size = 大；然后有人问你羊的颜色是什么，因为你只认识多莉，你认为所有的羊都和多莉一模一样，你回答是白色的……然后你遇到了另一只羊，皮特，但这只羊又黑又大，而且哈里。所以你说 Pete 和 Dolly 完全一样，除了 Pete 是黑色的......所以你会说 Pete.Prototype = Dolly （这意味着它和 dolly 完全一样），但是你会覆盖颜色并说不一样：Pete.color = black;

要在 JavaScript 中“模拟”类，您要做的是定义一个名为 Sheep 的“理想”绵羊，它拥有所有绵羊的所有“默认”品质，并将其用作所有其他绵羊的原型。

[在 JavaScript](http://www.phpied.com/3-ways-to-define-a-javascript-class/)中有很多方法可以定义类。但是您应该始终记住，您实际上不是在定义类，而是在定义原型和模拟类。如果您真的想了解正在发生的事情以及如何充分利用它，您最好尝试[学习原型。](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:42:32.690

这取决于你的目的是什么。

第一个可以实例化

```
var obj = new Class('...'); 
```

第二个可用于利用命名空间

# mysql - 如何在这个 MySQL 查询上排序？

> ID：11479677
> 
> 赞同：1
> 
> 时间：2012-07-13T23:40:24.667
> 
> 标签：mysql, sql, sql-order-by

我目前的查询：

```
SELECT *
FROM `reported_users`
GROUP BY `reported_user`
ORDER BY ??? 
```

我有一张`reported_users`桌子。当我网站上的用户报告另一个用户违反规则时，报告的用户将作为一行插入此表中。所以同一个用户可以在表中有多行。为了确保我只`GROUP BY`在`reported_user`现场使用一次就获得每个用户。但是我怎样才能让`ORDER BY`被报道最多的用户到最少。因此，如果表格如下所示：

```
reported_user | reporter
---------------------------
Joe           | Bob
Jake          | Nady
Lisa          | Tim
Joe           | Jim
Joe           | Foo
Lisa          | Bar 
```

查询应返回：

```
Joe (3)
Lisa (2)
Jake (1) 
```

我还想返回每个用户被举报的次数。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:43:28.053

```
SELECT reported_user, count(*)
FROM reported_users
GROUP BY reported_user
ORDER BY count(*) desc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T23:43:47.683

```
SELECT reported_user, count(*)
FROM reported_users
GROUP BY reported_user
ORDER BY count(*) Desc 
```

# java - 更改 java JFrame 的图块

> ID：11479681
> 
> 赞同：0
> 
> 时间：2012-07-13T23:41:27.727
> 
> 标签：java, swing, jframe

我想知道，以后如何将 Java JFrame GUI 的标题设置为不同的名称？我的程序是一个基本的文本编辑器，我想将标题更改为您刚刚保存文件的任何内容，或者如果您点击新建文件按钮，或者您刚刚启动应用程序，则为新建文件。我现在使用的方法只是一个简单`setName("" + file + "");`的文件，其中文件是刚刚写入或读取的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:44:23.130

[setTitle](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setTitle%28java.lang.String%29)是您需要的，而不是 setName。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:44:50.393

您可以使用[Frame#setTitle(String)](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setTitle%28java.lang.String%29)设置 JFrame 的标题。

```
yourJFrame.setTitle("words.txt"); 
```

# node.js - 将我的 node.js express 应用程序升级到 v0.8.2 并且没有方法“输入”错误

> ID：11479684
> 
> 赞同：0
> 
> 时间：2012-07-13T23:41:54.217
> 
> 标签：node.js

该应用程序在 v0.6.6 下运行，现在我在应用程序首次启动时得到以下信息。任何建议将不胜感激。提前致谢。

```
< events.js:80
<       this.domain.enter();
<                   ^
< TypeError: Object localhost:3111 has no method 'enter'
<     at HTTPServer.EventEmitter.emit (events.js:80:19)
<     at Server._listen2 (net.js:926:10)
<     at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:48:16.380

当我将节点从 0.6.6 更新到 0.8.9 时，我刚刚遇到了同样的错误。我将问题跟踪到：[https ://github.com/joyent/node/issues/3922](https://github.com/joyent/node/issues/3922)

在我的情况下，从节点事件继承的模块还包含一个名为“域”的属性。将此属性重命名为“域”以外的名称是一种对我有用的解决方法。（或者，重构为不从事件继承会更好。）

如果您依赖遇到此问题的第 3 方模块，那么您的选择可能会受到更多限制，直到在节点中解决该错误或使用解决方法更新第 3 方模块。

# asp.net-mvc - 多级 MVC 路由

> ID：11479687
> 
> 赞同：0
> 
> 时间：2012-07-13T23:42:13.580
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有特殊需要。我有一个包含五个模块的应用程序：-

1.  会员资格
2.  出租
3.  行政
4.  会计
5.  报告

我正在使用 MVC 开发应用程序。我想为此应用程序提供不同类型的路由，如下所示：-

```
/Module/Page/Action 
```

例子是：-

```
/Membership
/Membership/Home/
/Accounting
/Accounting/Home/
/Membership/Membership/Edit/1
/Accounting/JournalVoucher/Delete/1 
```

等等

请注意，每个模块都会重复主页。

我的应用程序中有大约 70 个屏幕。你能告诉我实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:51:57.580

我在这里看不到任何并发症。由于您没有提及您正在使用的任何语言或框架，假设您正在使用 PHP/CodeIgniter。

```
/Membership
/Membership/Home/
/Accounting
/Accounting/Home/
/Membership/Membership/Edit/1
/Accounting/JournalVoucher/Delete/1 
```

要处理这些 URL，您只需创建 2 个控制器 -

```
membership_controller
function Home

accounting_controller
function home
function membership($action, $param)
function journalvoucher($action, $param) 
```

关于你提到的结构 -

```
/Module/Page/Action 
```

对于每个模块，创建一个控制器。为每个页面创建一个函数。将动作作为参数传递给函数。

如果你有可变数量的参数，那么让第二个参数是一个数组。

# c# - 填充字典的算法 > 类型对象

> ID：11479690
> 
> 赞同：0
> 
> 时间：2012-07-13T23:42:52.160
> 
> 标签：c#, dictionary

我的数据库表如下所示：

```
Room        Item        Description
------------------------------------
Bedroom     Chair       Leather
Bedroom     Bed         Comfortable
Office      Desk        Very Small
Office      Book Shelf  Lot of Books 
```

我想将此数据库表填充到以下 Dictionary 类型对象中

```
Dictionary<string, Dictionary<string,string> 
```

我该怎么做呢？

我开始按如下方式编写代码，但由于我不知道如何正确填充它，所以我无法继续。

```
Dictionary<string, Dictionary<string,string>> roomfurnitures= new Dictionary<string,Dictionary<string, string>>();

Dictionary<string, string> furniture= new Dictionary<string, string>();

            using (SqlDataReader reader = this.m_cmdGetFurnitureByRoom.ExecuteReader())
            {
                while (reader.Read())
                {
                    string roomtype = reader.GetString(reader.GetOrdinal("Room"));

                    string item = reader.GetString(reader.GetOrdinal("Item"));
                    string description = reader.GetString(reader.GetOrdinal("Description"));

                    //I do not know how to populate the roomfurnitures dictionary poperly 
                }
            } 
```

正确填充 roomfurnitures 字典后，我希望它看起来像这样。请帮忙。

```
Bedroom        Chair           Leather                   
               Bed             Comfortable
Office         Desk            VerySmall
               BookShelf       Lot of Books 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:05:56.550

您可以使用 a`DataTable`填充 a `DataAdapter`，然后使用`Linq-To-DataSet`,`Enumerable.GroupBy`和`Enumerable.ToDictionary`：

```
var tblRooms = new DataTable();
using(var con = new SqlConnection(connectionString))
using (var da = new SqlDataAdapter(sql, con))
{
    da.Fill(tblRooms);
}
Dictionary<string, Dictionary<string,string>> roomGroups =  tblRooms
    .AsEnumerable()
    .GroupBy(r => r.Field<string>("Room"))
    .ToDictionary(g => g.Key, g =>  g.ToDictionary(
        r => r.Field<string>("Item"), 
        r => r.Field<string>("Description"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:53:21.377

要记住的重要一点是，当你第一次遇到一个新房间时，你需要实例化它的 Dictionary。在您的评论位置添加类似这样的内容：

```
if (!roomfurnitures.ContainsKey(roomtype))
    roomfurnitures[roomtype] = new Dictionary<string, string>(); // the first time we've seen this

// get the dictionary for the specific room
var room = roomfurnitures[roomtype];

// now we can add the furniture to the room
room[item] = description; 
```

# javascript - 无法真正理解 Javascript 中的构造函数和原型关系

> ID：11479691
> 
> 赞同：3
> 
> 时间：2012-07-13T23:42:57.103
> 
> 标签：javascript, constructor, prototype

我是 Javascript 的初学者，很难理解构造函数和原型属性之间的关系。

我知道 Prototype 对象有一个`constructor`指向构造函数的属性。并且构造函数有一个`prototype`指向原型对象的属性。

这是我试图理解的代码（我的问题在代码中注释）：

```
function Car(){};
var myCar = new Car();
console.log(Object.getPrototypeOf(myCar)); //why this prints "Car" Object ? isn't it the constructor not the prototype object ? why the prototype object is not printed ?

var Vehicle = {
    getName : function(){
        return "hello";
    }
};
Car.prototype = Vehicle ; //I'm trying to change the prototype property in the constructor to "Vehicle" Object is that done right ?
console.log(Object.getPrototypeOf(myCar).getName()); //Why am i getting getName() function does not exist ? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T23:49:15.173

> 为什么这会打印“汽车”对象？不是构造函数不是原型对象吗？为什么不打印原型对象？

这就是 Chrome（或您使用的浏览器）命名对象的方式。如果您仔细查看属性，它确实是`Car.prototype`：

![在此处输入图像描述](../Images/a0e2900c5e9390d6258364862b9d9e9d.png)

> 我正在尝试将构造函数中的原型属性更改为“车辆”对象，这样做对吗？

您不能更改现有对象的原型，只能扩展它。设置`Car.prototype = Vehicle;`只会改变**未来**实例的原型`Car`，现有的仍然会引用原始原型对象，它没有`getName`属性：

```
// create a new instance after setting the new prototype
var myCar2 = new Car();
// yields false
console.log(Object.getPrototypeOf(myCar) === Object.getPrototypeOf(myCar2)); 
```

* * *

这实际上与原型无关，而与 JavaScript 中赋值和引用的工作方式有关。想象一下，我有以下对象：

```
var foo = {
    bar: {
        answer: 42
    }
}; 
```

并假设我分配`foo.bar`给另一个对象的属性：

```
var baz = {};
baz.xyz = foo.bar; 
```

现在设置`foo.bar`为其他值，比如`foo.bar = {}`，不会改变 的值`baz.xyz`，它仍然会引用之前的对象。

只有**扩展**原始对象（扩展原型）或更改其属性才会产生效果，因为两者都`foo.bar`引用`baz.xyz`同一个对象：

```
foo.bar.answer = 21;
console.log(baz.xyz.answer); // shows 21
// console.log(foo.bar === baz.xyz); // yields true 
```

# php - Ajax 被 Wordpress 警告破坏：通过 ob_start() 解决？

> ID：11479697
> 
> 赞同：3
> 
> 时间：2012-07-13T23:43:49.853
> 
> 标签：php, ajax, wordpress, buffer, ob-start

我正在为`WordPress`. 我的目标是让它适用于所有人。有些页面使用`ajax`响应。一些用户激活了 WP_DEBUG 常量，该常量显示来自主题和其他插件的错误和警告。

这破坏了我的 Ajax PHP，因为我包含了`Wordpress`核心，然后 WP 可以在一些博客中显示警告！

我解决这个问题的旧方法是：

```
<?php
ob_start();
//The wordpress core require
ob_end_clean();

//Now the ajax response:
echo '0';
?> 
```

然而，一位用户报告了一个非常奇怪的错误：`ajax`页面没有响应，只在 Opera 中有效，而谷歌浏览器显示：错误 330 (net::ERR_CONTENT_DECODING_FAILED)：

挖掘用户网络服务器，我发现 WP 配置或插件使用 ob_start("ob gzhandler")。

ob_get_status(true) 显示在我的工作网络服务器中：

```
Array
(
    [0] => Array
        (
            [chunk_size] => 4096
            [type] => 1
            [status] => 0
            [name] => default output handler
            [del] => 1
        )

    [1] => Array
        (
            [chunk_size] => 0
            [size] => 40960
            [block_size] => 10240
            [type] => 1
            [status] => 0
            [name] => default output handler
            [del] => 1
        )

) 
```

在错误的网络服务器中：

```
Array
(
    [0] => Array
        (
            [chunk_size] => 4096
            [type] => 1
            [status] => 0
            [name] => default output handler
            [del] => 1
        )

    [1] => Array
        (
            [chunk_size] => 0
            [size] => 40960
            [block_size] => 10240
            [type] => 1
            [status] => 0
            [name] => default output handler
            [del] => 1
        )

    [2] => Array
        (
            [chunk_size] => 0
            [size] => 40960
            [block_size] => 10240
            [type] => 1
            [status] => 0
            [name] => ob_gzhandler
            [del] => 1
        )

) 
```

我的用户网络服务器中的序列是：

*   我的代码调用 ob_start()
*   包括WP核心，WP初始化所有并调用ob_start("ob gzhandler")
*   当我的代码调用 ob_end_clean() 时，它失败了。

我需要一种安全的方法来隐藏 WP 警告，但我无法破坏启用 GZIP 的配置（我怀疑是某些插件）。如果不可能，我更喜欢在警告系统中留下破坏 ajax 并忘记缓冲方法。

我认为一个干净的方法可能是：

```
$buffers = count(ob_get_status(true));
ob_start();
//The wordpress core require
if (count(ob_get_status(true)) == $buffers + 1) {
ob_end_clean();
} else {
ob_flush();
}
//Now the ajax response:
echo '0'; 
```

但我担心通过 PHP 版本和配置、WP 版本、插件和配置的一些无限组合会破坏某些人。您认为解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:05:52.767

如果您在插件（或functions.php）所需的任何文件中的open php 标记之前留下任何空格或行，它将破坏Wordpress AJAX。

打破阿贾克斯：

```
 <?php 
```

不会破坏 AJAX：

```
<?php 
```

# javascript - 获取对象 Javascript 或 jQuery 的最后一个值

> ID：11479698
> 
> 赞同：0
> 
> 时间：2012-07-13T23:44:12.750
> 
> 标签：javascript, jquery

我有一个对象，我试图获取每个键的最后一个值并将其放入另一个对象中。

```
var setA = {
    'a':'001, 007, 101',
    'b':'052, 004, 006, 005',
    'c':'003, 002, 001'
} 
```

我想要做的是得到最后一个这样的：

```
var setB = {
    'a':'101',
    'b':'005',
    'c':'001'
} 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T23:50:48.547

一个循环？

```
var setB = {}
for (var o in setA) {
  var s = setA[o].split(', '),
      x = s[s.length - 1]
  setB[o] = x
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T23:51:03.703

为什么不只是：

```
var setB = {
    'a':setA.a.split(',').pop().trim(),
    'b':setA.b.split(',').pop().trim(),
    'c':setA.c.split(',').pop().trim()
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7KetR/)。

实际上，这会获取从变量 in `setA.a`（等等......）返回的值，将该字符串在`,`字符处拆分为一个数组，弹出该数组的最后一个值并从中修剪空格。

当我记得可以将字符串视为字符数组时，从[jbabey的回答中提出了以下内容：](https://stackoverflow.com/a/11479762/82548)

```
var setA = {
    'a': '001, 007, 101',
    'b': '052, 004, 006, 005',
    'c': '003, 002, 001'
},
    setB = {
    'a': setA.a.slice(-3),
    'b': setA.b.slice(-3),
    'c': setA.c.slice(-3)
}

console.log(setB);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7KetR/)。

参考：

*   [`pop()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/pop).
*   [`slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice).
*   [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split).
*   [`trim()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T23:48:24.120

您可以为此使用正则表达式

```
var setB = {
    'a':setA.a.match(/(\d+)$/)[1],
    'b':setA.b.match(/(\d+)$/)[1],
    'c':setA.c.match(/(\d+)$/)[1]
} 
```

`/(\d+)$/`将匹配字符串中的最后一位数字

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T23:53:25.400

如果你知道你总是想要字符串的最后 3 个字符，你可以使用[substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)

```
var setA = {
    'a':'001, 007, 101',
    'b':'052, 004, 006, 005',
    'c':'003, 002, 001'
}

var setB = {};

for (var item in setA) {
    setB[item] = setA[item].substring(setA[item].length-3);
} 
```

[http://jsfiddle.net/X6J2p/](http://jsfiddle.net/X6J2p/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T23:56:48.427

这段代码可以解决问题：

```
var setB={},temp,prop;
for(prop in setA){
    temp=setA[prop].split(', ');
    temp=temp[temp.length-1];
    setB[prop]=temp;
} 
```

# apache - htaccess 和 mod_rewrite 用于 IPN 重定向

> ID：11479700
> 
> 赞同：1
> 
> 时间：2012-07-13T23:44:30.943
> 
> 标签：apache, .htaccess, mod-rewrite, paypal-ipn, recurring-billing

我更改了 Paypal 的 IPN 地址，并想使用 htaccess 规则将消息转发给新的处理程序，但是我无法让它工作。

下面的代码有什么问题？--我希望它将 /?page=gf_paypal_ipn 的请求重定向到[https://www.gfreely.com/members/payment/paypal-pro/ipn](https://www.gfreely.com/members/payment/paypal-pro/ipn)并且它不起作用！啊! 请帮忙！

```
<IfModule mod_rewrite.c>
RewriteCond %{REQUEST_URI} ^/?page=gf_paypal_ipn [NC]
RewriteRule ^.*$ https://www.gfreely.com/members/payment/paypal-pro/ipn [P]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:01:49.520

基于[http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html](http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html)这应该可以解决问题：

```
RewriteCond %{QUERY_STRING}     ^page=gf_paypal_ipn    [NC]
RewriteRule ^.*$ https://www.gfreely.com/members/payment/paypal-pro/ipn [P] 
```

# java - 第一个android项目构建错误

> ID：11479705
> 
> 赞同：0
> 
> 时间：2012-07-13T23:45:05.980
> 
> 标签：java, android, ant

我只是在尝试使用 Android + Java。

我遵循本指南：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

一切照原样做。我只将“DisplayMessageActivity”类名更改为“DisplayMsgActivity”我已经更新了清单，以及对此类的所有引用，但我仍然收到 2 个错误：

```
-compile:
[javac] Compiling 4 source files to /home/juanchi/Dropbox/Dev/ArrayAppProject/bin/classes
[javac] /home/juanchi/Dropbox/Dev/ArrayAppProject/src/com/jnix/arrayapp/DisplayMsgActivity.java:7: duplicate class: DisplayMsgActivity
[javac] public class DisplayMsgActivity extends Activity {
[javac]        ^
[javac] /home/juanchi/Dropbox/Dev/ArrayAppProject/src/com/jnix/arrayapp/ArrayAppActivity.java:20: cannot access com.jnix.arrayapp.DisplayMsgActivity
[javac] bad class file: RegularFileObject[/home/juanchi/Dropbox/Dev/ArrayAppProject/src/com/jnix/arrayapp/DisplayMsgActivity.java]
[javac] file does not contain class com.jnix.arrayapp.DisplayMsgActivity
[javac] Please remove or make sure it appears in the correct subdirectory of the classpath.
[javac]         Intent intent = new Intent(this, DisplayMsgActivity.class);
[javac]                                          ^
[javac] 2 errors 
```

构建失败 /home/juanchi/android-sdks/tools/ant/build.xml:680：执行此行时发生以下错误：/home/juanchi/android-sdks/tools/ant/build.xml:693：编译失败的; 有关详细信息，请参阅编译器错误输出。

总时间：5秒

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:21:49.243

尝试声明：

```
package com.jnix.arrayapp 
```

在文件 DisplayMsgActivity 的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:00:01.073

清理并构建项目。有时它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T01:01:29.957

每个人都使用 eclipse 进行学习和开发。只需在 Eclipse 中创建项目。您可以将源代码导入您的 Eclipse 项目并从那里开始。我将从 Eclipse 内部的基本项目开始，而不是外部。在日食之外工作更令人沮丧。使用 eclipse 的原因还有很多，比如良好的 logcat 视图、调试等。

# iframe - Windows 8 Metro 应用程序 iframe

> ID：11479713
> 
> 赞同：1
> 
> 时间：2012-07-13T23:47:12.260
> 
> 标签：iframe, windows-8, google-api, microsoft-metro

我已经搜索并搜索了这个问题的答案，但我似乎无法找出我做错了什么。我正在构建一个将绑定到 Google 的 API 的 Windows 8 应用程序，我对整个 iframe 概念很感兴趣。我一个又一个例子，似乎没有任何效果。下面是我正在尝试使用的两个页面的片段，以及我得到的错误。任何帮助将不胜感激。提前致谢！

```
<html>
<head>
<meta charset="utf-8" />
<title>WinWebApp1</title>
<!-- WinJS references -->
<script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>
<!-- WinWebApp1 references -->
</head>
<body>
<div>
 <iframe id="Iframe" src="ms-app-web:///page.html"></iframe>
</div>
</body>
</html> 
```

第2页

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>
<body>
<div>This is a test</div>
</body>
</html> 
```

我得到错误

```
APPHOST9624: The app can’t use script to load the ms-app-web:///page.html url because the url launches another app. Only direct user interaction can launch another app. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:15:49.360

我遇到了同样的问题。您想要的绝对是“ms-appx-web”。

```
<iframe id="Iframe" src="ms-appx-web:///page.html"></iframe> 
```

# magento - 分析 Magento API 调用的简单方法

> ID：11479722
> 
> 赞同：2
> 
> 时间：2012-07-13T23:48:13.423
> 
> 标签：magento

有没有一种简单的方法来分析 Magento API 调用？做了一些搜索，我想出的最好结果是[这个](http://www.coolryan.com/magento/2012/04/06/varien-profiler-for-magento/)家伙提到没有任何功能。

我想在 Varien/Profiler.php 中弹出一个快速日志语句应该不会太难，但我认为这可能有点开箱即用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:19:07.027

不，afaik 没有 OOB/内置方式来分析 Magento API 调用。

大多数 API 方法最终都使用标准模型，这些模型*确实*嵌入了`Varien_Profiler`调用，因此您仍然可以获得一些分析数据。看看`Mage_Core_Block_Profiler::_toHtml()`怎么做。

*但是*，API 服务器和适配器（SOAP 等）afaik 中没有`Varien_Profiler`嵌入调用，因此您不会获得这些区域的任何分析数据（至少在不更改代码的情况下不会）。

### PHP 探查器

我宁愿推荐安装 PHP 分析器而不是使用`Varien_Profiler`.

PHP 分析器通常会自动覆盖*所有*正在执行的 PHP 代码。它适用于*任何*PHP 脚本，您无需更改 PHP 脚本中的任何内容即可使其正常工作。

[Xdebug 的 Profiler](http://www.xdebug.org/docs/profiler)与一些分析/可视化前端（例如[webgrind](http://code.google.com/p/webgrind/)或[KCachegrind](http://kcachegrind.sourceforge.net/cgi-bin/show.cgi) ）相结合，可以为您提供详细的分析数据，甚至是 Magento API 调用。

# c# - 实体管理器 - 更新我的模型的参考 ID

> ID：11479724
> 
> 赞同：0
> 
> 时间：2012-07-13T23:48:36.943
> 
> 标签：c#, asp.net-mvc-3, entity-framework, updatemodel

我有一个`Tablo`对象，它有一个对象的引用`Ressam`。在我的编辑操作中`Tablo`，我也希望能够更改`Ressam`引用，即引用另一个`RessamId`. 这是控制器代码，假设我只想更改调用中`Ressam`的：`Tablo`

```
 [HttpPost]
    public ActionResult EditTablo(Tablo tablo, int? RessamId, HttpPostedFileBase image)
    {
        // Here, I successfully get RessamId, no problem there
        if (ModelState.IsValid)
        {

            // this is where I attach the Tablo object
            if (tablo is TuvalBaski)
            {
                container.Urun.Attach((TuvalBaski)tablo);
            }
            else if (tablo is YagliBoya)
            {
                container.Urun.Attach((YagliBoya)tablo);
            }

            // and this is the part where I change the Ressam reference
            if (RessamId == null)
            {
                tablo.Ressam = null;

                container.Ressam.Attach(tablo.Ressam);
                TryUpdateModel(tablo.Ressam);
            }
            else
            {

                tablo.Ressam = (from table in container.Ressam
                                where table.RessamId == RessamId
                                select table).Single();

                //container.Ressam.Context.ObjectStateManager.ChangeObjectState(tablo.Ressam, System.Data.EntityState.Modified);
                //container.ObjectStateManager.ChangeObjectState(tablo.Ressam, System.Data.EntityState.Modified);

                container.Ressam.Attach(tablo.Ressam);
                TryUpdateModel(tablo.Ressam);
            }

        return View(tablo);
    } 
```

顺便说一句，这行不通。如何更新我的`Tablo`实体中的参考 ID，以便它可以显示另一个`Ressam`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:44:53.447

您必须将`tablo`实例附加到上下文。

```
[HttpPost]
public ActionResult EditTablo(Tablo tablo, int? RessamId, HttpPostedFileBase image)
{ 
    if (ModelState.IsValid)
    {
        container.Tablo.Attach(tablo);
        container.ObjectStateManager
            .ChangeObjectState(tablo, System.Data.EntityState.Modified);

        if (RessamId != null)
        {
            tablo.Ressam = (from table in container.Ressam
                            where table.RessamId == RessamId
                            select table).Single();

            TryUpdateModel(tablo.Ressam);
        }

        container.SaveChanges();
    }

    return View(tablo);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:11:53.393

不用多说，这是完成这项工作的代码：

```
 [HttpPost]
        public ActionResult EditTablo(Tablo tablo, int? RessamId, HttpPostedFileBase image)
        {
            if (ModelState.IsValid)
            {
                if (tablo is TuvalBaski)
                {
                    container.Urun.Attach((TuvalBaski)tablo);
                }
                else if (tablo is YagliBoya)
                {
                    container.Urun.Attach((YagliBoya)tablo);
                }

                if (RessamId == null)
                {
                    if(tablo.Ressam != null)
                    {
                        container.Ressam.Detach(tablo.Ressam);
                    }

                    tablo.Ressam = null;
                }
                else
                {
                    if (tablo.Ressam != null)
                    {
                        container.Ressam.Detach(tablo.Ressam);
                    }

                    tablo.Ressam = (from table in container.Ressam
                                    where table.RessamId == RessamId
                                    select table).Single();

                    container.Ressam.Attach(tablo.Ressam);
                }

                TryUpdateModel(tablo);
                container.SaveChanges();
            }

            return View(tablo);
        } 
```

# spring-mvc - Spring MVC - Bean 名称“command”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：11479727
> 
> 赞同：1
> 
> 时间：2012-07-13T23:48:51.720
> 
> 标签：spring-mvc

我正在开发一个 Spring 3.1 MVC 应用程序，但我的 JSP 不会出现。我在浏览器屏幕中收到以下内容。

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /GuestBook.jsp at line 31

28:     <form:form method="post" action="GuestBook.jsp">
29:         <table>
30:             <tr>
31:                 <td><form:label path="comment.name">Name</form:label></td>
32:                 <td><form:input path="comment.name" /></td>
33:             </tr>
34:             <tr>

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:429)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 

java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute
    org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194)
    org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    org.apache.jsp.GuestBook_jsp._jspx_meth_form_005flabel_005f0(GuestBook_jsp.java:269)
    org.apache.jsp.GuestBook_jsp._jspx_meth_form_005fform_005f0(GuestBook_jsp.java:214)
    org.apache.jsp.GuestBook_jsp._jspService(GuestBook_jsp.java:127)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

这是完整的表格。

```
<form:form method="post" action="GuestBook.jsp">
    <table>
        <tr>
            <td><form:label path="comment.name">Name</form:label></td>
            <td><form:input path="comment.name" /></td>
        </tr>
        <tr>
            <td><form:label path="comment.message">Message</form:label></td>
            <td><form:textarea path="comment.message" rows="10" cols="50" /></td>
        </tr>
        <tr>
            <td><input type="submit" value="Submit comment" /></td>
            <td>&nbsp;</td>
        </tr>
    </table>
</form:form> 
```

这就是我的控制器类中的内容。

```
@Controller
@RequestMapping("GuestBook")
public class CommentController {
    @RequestMapping(value = "/GuestBook", method = RequestMethod.POST)
    public String addComment(@ModelAttribute("comment") Comment comment, BindingResult result) {
        CommentDAO commentDAO = new CommentDAO();
        java.util.Date today = new java.util.Date();
        java.sql.Date date = new java.sql.Date(today.getTime());
        comment.setDate(date);

        if (commentDAO.writeComment(comment) == true) {
            return "redirect:GuestBook.jsp";
        }

        return "redirect:Oops.jsp";
    }

    @RequestMapping("/GuestBook")
    public ModelAndView showComments() {
        return new ModelAndView("comments", "command", new Comment());
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T23:59:15.230

You have to bind your `form:form` to a model or command object, if you don't explicitly specify, the taglib assumes that there is a model attribute called `command`.You can do this:

```
<form:form method="post" action="GuestBook.jsp" modelAttribute="comment">
 <table>
    <tr>
        ...
        <td><form:input path="name" /></td>
       ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:24:56.020

1）正如Biju所说，添加modelAttribute =“comment”

2）将comment.name、comment.message改为name、message

3) 返工你的 GET 处理程序：

```
 @RequestMapping(method=RequestMethod.GET)
    public String addCommentForm(ModelMap model) {
        model.addAttribute("comment", new Comment());
        return "comments";
    } 
```

# c++ - PEM_read_RSA_PUBKEY 返回并破坏应用程序

> ID：11479730
> 
> 赞同：0
> 
> 时间：2012-07-13T23:49:12.557
> 
> 标签：c++, openssl, rsa

我正在尝试`RSA`使用`OpenSSL`.

```
RSA *rsaPubKey = RSA_new();
FILE *file;
file = fopen("PubKey.pem","r");

if(file){
    rsaPubKey = PEM_read_RSA_PUBKEY(file, &rsaPubKey ,NULL,NULL);
}
.......... //some stuff 
return 0 
```

执行`PEM_read_RSA_PUBKEY`应用程序后终止，没有错误。我不知道出了什么问题！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:06:00.933

我在一个旧项目中使用了以下代码：

```
BIO *bioPub = BIO_new_file(pubkeyPath, "r");
RSA *pubkey = PEM_read_bio_PUBKEY(bioPub, NULL, NULL, NULL);
/* do some stuff */
RSA_free(pubkey);
BIO_free(bioPub); 
```

您是否尝试过以下操作？

```
FILE *file = fopen("PubKey.pem","r");
RSA *rsaPubKey = PEM_read_RSA_PUBKEY(file, NULL, NULL, NULL); 
```

# java - Eclipse 无法识别 Java 项目；类路径问题

> ID：11479735
> 
> 赞同：4
> 
> 时间：2012-07-13T23:50:01.763
> 
> 标签：java, eclipse, classpath

我是一个非常缺乏经验的程序员。我刚刚参加了为期一周的关于在 Eclipse 中进行 Java 编程的课程。当我回到家并在我的家用电脑上安装了 Eclipse 时，我能够调出我在编辑器中制作的程序，但 Eclipse 无法运行它；它只接受 .ant 文件。

我能够让项目显示在项目资源管理器中（通过导入它们）并更改类路径以识别这些项目，但是在运行>运行配置>Java应用程序中选择主类的选项中没有显示任何内容。我很困惑，因为我在一周的 Java 经验中没有被教导使用 Eclipse 的这些特性。任何帮助将不胜感激。

**更新**：当我尝试配置构建路径/类路径时，我*仍然*没有在运行>运行配置>Java应用程序中选择主类的选项，即使遵循洛根的建议也是如此。JRE 系统库仍在构建路径上，但在我的项目属性中它的图标上有一个红色的 X。另外，这也在我的项目属性窗口的顶部：

“缺少构建路径条目：org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7

更糟糕的是，当我单击“运行”按钮时，运行脚本的文件类型选项取决于我选择的内容。如果我在 Project Explorer 中选择了项目，选项是 Java Applet 和 Java Application，但如果我选择了显示中的代码，则会出现 .ant 文件选项。

另外，源文件夹的名称前面没有#。

还有一条更重要的信息：由于某种原因，从未下载过 Eclipse SDK 文件夹。但是，我提取了 Juno 文件夹中的所有 .zip 文件，Eclipse 应用程序确实出现了。

帮助将不胜感激，特别是作为关于做什么的文字、直接的指示。谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-14T02:29:00.927

我想我以前遇到过这个。您需要将 JRE 系统库添加到您的项目构建路径库中。

包资源管理器中的项目应该在源文件夹之后显示 JRE 系统库（如果有的话）。

*   右键单击您的项目并选择属性。
*   单击左侧选项树中的 Java Build Path 选项。
*   在 Java Build Path 窗口中，单击 Libraries 选项卡。
*   确保列出了 JRE 系统库，如果没有，请单击添加库按钮。
*   然后选择 JRE System Library，然后你可以指向一个或使用 Eclipse 使用的那个。
*   单击完成，然后返回您的项目。

还要检查您的源代码文件夹是否在项目的构建路径上。如果该文件夹位于构建路径上，则您的源文件夹应在名称前加上 # ，例如 #src。如果它没有 # 符号，您可能需要使用您的代码右键单击该文件夹并将其添加到构建路径。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-21T22:00:28.570

我通过 Eclipse ->preferences-->java-->installed jre -> 在我的情况下选择标准 Vm (Mac OSX) /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/ 解决了这个问题主页.完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:32:37.350

使用 Eclipse JUNO 设置 java 环境来配置 FX 项目。

*   转到窗口-> 首选项
*   选择已安装的 JRE
*   添加缺少的 JRR (7)

然后在创建 JavaFx 项目之后。

阿肖克·帕尔马

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T23:55:22.007

首先，您必须确保已安装 Eclipse for JAVA。你必须知道，当涉及到 Java 项目时，eclipse 有它自己的结构。遵循本教程，我认为这可能会对您有很大帮助。

[http://eclipsetutorial.sourceforge.net/totalbegginer01/lesson01.html](http://eclipsetutorial.sourceforge.net/totalbegginer01/lesson01.html)

大多数 IDE，包括 Eclipse，不运行文件（至少不是以直接的方式），因此您必须创建一个项目并将现有的 (.java) 文件导入其中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-29T17:07:44.240

For `Java 1.7`or `1.8`on`Mac OSX`您可以按照以下步骤操作：

1.  在终端 shell 上使用`/usr/libexec/java_home -v 1.8`命令来查找您的 java 1.8 主目录。
2.  转到`Eclipse ->Preferences->Java->Installed JREs`并按下`Add`按钮，然后选择`Standard VM`并在我的情况下添加`/Library/Java/JavaVirtualMachines/jdk1.8.0_51.jdk/Contents/Home`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T15:04:21.727

此错误是由 JRE 系统库引起的。也许您没有为运行 Eclipse 项目提供适当的 JRE。所以请按照以下步骤操作。

1.  右键单击项目并选择属性。
2.  单击左侧菜单中的 Java Build Path 选项。
3.  在 Java Build Path 窗口中，单击 Libraries 选项卡。
4.  确保列出了 JRE 系统库，如果未列出，则可以通过单击右侧菜单中的“添加库”来添加。
5.  因此，如果 JRE System Library 已经列出，那么 **双击JRE System Library 之前在****Java Build Path**窗口**Libraries**选项卡上显示错误。
6.  然后它将打开另一个名为**JRE System Library**的窗口。所以在那个窗口中选择**Alternate JRE**。从该下拉列表中选择您的 JRE。

就我而言，它是 java-8-openjdk-amd64 ，因为我使用的是 ubuntu 16.04。像这样，您也可以选择您的 JRE 系统库。

# android - Java jersey RESTful Web 服务请求

> ID：11479746
> 
> 赞同：3
> 
> 时间：2012-07-13T23:50:57.100
> 
> 标签：android, json, web-services, jersey

我一直在关注一个关于宁静服务的教程，它工作正常。但是有些东西我还不太明白。这是它的外观：

```
@Path("/hello")
public class Hello {

    // This method is called if TEXT_PLAIN is request
    @GET
    @Produces( MediaType.TEXT_PLAIN )
    public String sayPlainTextHello() 
    {
        return "Plain hello!";
    }

    @GET
    @Produces( MediaType.APPLICATION_JSON )
    public String sayJsonTextHello() 
    {
        return "Json hello!";
    }

    // This method is called if XML is request
    @GET
    @Produces(MediaType.TEXT_XML)
    public String sayXMLHello() {
        return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
    }

    // This method is called if HTML is request
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello() 
    {
        return "<html> " + "<title>" + "Hello fittemil" + "</title>"
                + "<body><h1>" + "Hello!" + "</body></h1>" + "</html> ";
    }
} 
```

困扰我的是我无法使用正确的操作。当我从浏览器请求服务时，会调用相应的 sayHtmlHello() 方法。但现在我正在开发一个 android 应用程序，我想在 Json 中获得结果。但是当我从应用程序调用服务时，会调用 MediaType.TEXT_PLAIN 方法。我的 android 代码与此类似：

[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

如何从我的 android 应用程序中调用使用 MediaType.APPLICATION_JSON 的方法？此外，我想让那个特定的方法返回一个对象，如果我在那里也能得到一些指导，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:15:06.157

我有使用 Jersey 在 java (JAX-RS) 中实现 REST 的个人经验。然后我通过一个 Android 应用程序连接到这个 RESTful Web 服务。

在您的 Android 应用程序中，您可以使用 HTTP 客户端库。它支持 POST、PUT、DELETE、GET 等 HTTP 命令。例如使用 GET 命令并以 JSON 格式或 TextPlain 传输数据：

```
public class Client {

    private String server;

    public Client(String server) {
        this.server = server;
    }

    private String getBase() {
        return server;
    }

    public String getBaseURI(String str) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpGet getRequest = new HttpGet(getBase() + str);
            getRequest.addHeader("accept", "application/json");
            HttpResponse response = httpClient.execute(getRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } 
        return result;
    }

    public String getBaseURIText(String str) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpGet getRequest = new HttpGet(getBase() + str);
            getRequest.addHeader("accept", "text/plain");
            HttpResponse response = httpClient.execute(getRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return result;
    }

 private StringBuilder getResult(HttpResponse response) throws IllegalStateException, IOException {
            StringBuilder result = new StringBuilder();
            BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())), 1024);
            String output;
            while ((output = br.readLine()) != null) 
                result.append(output);

            return result;      
      }
} 
```

然后在一个 android 类中你可以：

```
Client client = new Client("http://localhost:6577/Example/rest/");
String str = client.getBaseURI("Example");    // Json format 
```

解析 JSON 字符串（或者可能是 xml）并在 ListView、GridView 和...中使用它

我简要浏览了您提供的链接。那里有一个好点。您需要在 API 级别 11 或更高级别的单独线程上实现网络连接。看看这个链接：[HTTP Client API level 11 or higher in Android](https://stackoverflow.com/questions/10904225/http-client-api-level-11-or-greater-in-android)。

这是我在 Client 类中使用 HTTP 发布对象的方式：

```
public String postBaseURI(String str, String strUrl) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpPost postRequest = new HttpPost(getBase() + strUrl);
            StringEntity input = new StringEntity(str);
            input.setContentType("application/json");
            postRequest.setEntity(input);
            HttpResponse response = httpClient.execute(postRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return result;
    } 
```

在 REST WS 中，我将对象发布到数据库：

```
 @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.TEXT_PLAIN)
    public Response addTask(Task task) {        
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        session.save(task);
        session.getTransaction().commit();
        return Response.status(Response.Status.CREATED).build();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:19:56.307

在上面你评论的代码中

```
// This method is called if TEXT_PLAIN is request
@GET
@Produces( MediaType.TEXT_PLAIN )... 
```

请注意，注释`@Produces`指定了 OUTPUT mimetype。要指定 INPUT mimetype，请改用`@Consumes`注释。

查看[博客文章](http://technopaper.blogspot.com.es/2009/03/jersey-annotations-explained.html)了解更多关于 Jersey 注释的信息：

@Consumes – 此注解指定资源类的方法可以接受的媒体类型。这是一个可选的，默认情况下，容器假定任何媒体类型都是可接受的。该注解可用于过滤客户端发送的请求。在接收到错误媒体类型的请求时，服务器会向客户端抛出错误。

@Produces——这个注解定义了资源类的方法可以产生的媒体类型。与@Consumes 注释一样，这也是可选的，默认情况下，容器假定任何媒体类型都可以发送回客户端。

# javascript - 使用自定义按钮控制 Soundcloud HTML5 Widget Player

> ID：11479747
> 
> 赞同：2
> 
> 时间：2012-07-13T23:50:57.507
> 
> 标签：javascript, custom-controls, soundcloud

我想做一些类似于我在 SoundClouds HTML5 Widget API PLayground 页面上看到的事情，他们有控制播放器的外部按钮： [http ://w.soundcloud.com/player/api_playground.html](http://w.soundcloud.com/player/api_playground.html)

最终我将隐藏播放器小部件本身并将这些按钮用作音乐控制器。

任何建议或提示都会很棒，我在这里发布：http: [//jsfiddle.net/alexsethalex/qcKed/1/](http://jsfiddle.net/alexsethalex/qcKed/1/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T15:49:45.200

您是否查看了[Widget API 文档](http://developers.soundcloud.com/docs/api/html5-widget)？

这是一个超级简单的例子：

```
<!doctype html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://w.soundcloud.com/player/api.js"></script>
  <script>
   $(document).ready(function() {
     var widget = SC.Widget(document.getElementById('soundcloud_widget'));
     widget.bind(SC.Widget.Events.READY, function() {
       console.log('Ready...');
     });
     $('button').click(function() {
       widget.toggle();
     });
   });
  </script>
</head>
<body>
  <iframe id="soundcloud_widget"
      src="http://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/39804767&show_artwork=false&liking=false&sharing=false&auto_play=true"
      width="420"
      height="120"
      frameborder="no"></iframe>
  <button>Play / Pause</button>
</body>
</html> 
```

# git - 如何获取 `git log -- filename` 来显示合并提交

> ID：11479757
> 
> 赞同：0
> 
> 时间：2012-07-13T23:52:00.083
> 
> 标签：git, logging

我试图用来`git log`查找特定文件何时被带入主文件。（简化的）版本历史如下所示：

```
*   f77cac3 Merge branch 'branch2'
|\  
| *   da35250 Merge branch 'branch1' into branch2
| |\  
| | * 90ab3e3 adding foo on branch1
| * | 42a0367 adding bar in branch2
| |/  
* | 853b691 changes to baz on master
* | c7b6c72 baz file on master
|/  
* e195580 first commit 
```

我想找出哪个提交将文件'foo'引入了master（应该是f77cac3）。但是，运行`git log --foo`会给出 90ab3e3。在更复杂的情况下，对分支 1 和分支 2 上的文件 foo 进行了多次更改，所有这些提交都会显示，但不会显示合并提交。我已经阅读了 git 帮助，以及在 Stack Overflow 上搜索和搜索，但我找不到这样做的方法。

以下是可用于重新创建以下场景的命令：

```
mkdir testgit
cd testgit
git init
vim README
git add README
git commit
git checkout -b branch1
vim foo
git add foo
git commit
git checkout master
git checkout -b branch2
vim bar
git add bar
git commit
git checkout master
vim baz
git add baz
git commit
vim baz
git add baz
git commit
git checkout branch2
git merge --no-ff branch1
git checkout master
git merge --no-ff branch2 
```

在这一点上我真的很难过，非常感谢任何指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:42:30.013

所以这就是我刚刚想到的：正确的咒语是`git log --first-parent -- foo`，但是，它仅在您的 git 版本为 1.7.9.1 或更高版本时才有效，因为在该版本之前`--first-parent`已损坏。唉，当我遇到这个问题时，我使用的是旧版本，并发现在 1.7.9.1 的发行说明中提到了修复（https://github.com/git/git/blob/master/Documentation/RelNotes /1.7.9.1.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:56:54.940

~~您可以在这里做的最好的事情是使用`git blame`或`git bisect`找到包含更改的第一个提交，然后按照子提交链找到第一个合并提交。~~

~~Git 并没有真正属于分支的某些提交的概念。是的，提交包含在分支中，可能只包含也可能不包含在一个分支中。您正在尝试做的事情需要记录每个提交所在的分支。这是 Mercurial 所做的事情，但不是 Git。~~

* * *

稍微阅读一下您的问题，您可能不需要以自动方式执行此操作。在这种情况下，您只需查看由`git log --sparse -- foo`

不同之处在于`--sparse`它将列出所有已行走的父母，并且它将首先行走具有完全相同内容的父母（在这种情况下，合并的右侧）。

# jquery - 使用 jQuery 重置或刷新 div

> ID：11479759
> 
> 赞同：0
> 
> 时间：2012-07-13T23:52:22.203
> 
> 标签：jquery, jquery-ui

我有一个包含几个选项的下拉列表，如果我选择其中一个选项，则获得下拉框的功能，我仅使用 jquery 来突出显示所选选项。我将能够仍然单击下拉列表并重新选择其中一个选项。假设我做错了选择如何在不刷新页面的情况下更改它。

jQuery

```
$("#list").live("click",function(){
   $(".choose").toggle();
   $("#list li").click(function(){
     var id = $(this).text();
     $("#list").html(id );
  });
}); 
```

html

```
<ul id="list">
  <li class="choose">link 1</li>
  <li class="choose">link 2</li>
</ul> 
```

我希望能够从列表中重新选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:55:23.363

您的 html 不正确。第一行——

```
<ul id="list> 
```

应该

```
<ul id="list"> 
```

# ios - 在 UIView2 上方显示 UIView1，但在 UIView1 上方显示 UIView2 输入方式

> ID：11479765
> 
> 赞同：3
> 
> 时间：2012-07-13T23:53:59.403
> 
> 标签：ios, ios5, uiview, core-graphics, calayer

这是一个奇怪的场景，但我有两个重叠的 UIView，我需要在另一个之上显示一个，但在接收输入时给予较低的优先级。如果那有意义的话。如果需要，我可以澄清。

最好我想在 Interface Builder 中执行此操作，但假设这是不可能的，有没有办法以编程方式执行此操作？

编辑：得到它的工作，感谢@jaydee3。只需重写`hitTest:`UIView1 的方法如下。UIView2 是`self.otherView`.

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    if (self.otherView && [self.otherView pointInside:[self.otherView convertPoint:point fromView:self] withEvent:event])
    {
        return [self.otherView hitTest:[self.otherView convertPoint:point fromView:self] withEvent:event];
    }

    return [super hitTest:point withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:32:33.730

# c# - 对从数据库中获取的模型对象进行缓慢的 C# 迭代

> ID：11479766
> 
> 赞同：0
> 
> 时间：2012-07-13T23:54:04.340
> 
> 标签：c#, linq, entity-framework, foreach

我正在尝试从数据库中获取业务模型实体，然后对其进行迭代以搜索字符串。但是，在我的本地主机中，此操作大约需要`7 to 9 seconds for 500 objects`.

```
public List<FileFolder> SearchFolders(int id, string searchString) 
{
    /* Placeholder that references folders that passes search criteria */
    List<FileFolder> addedFolders = new List<FileFolder>();

    /* Get the folder with specified id, also include Folders
     * that this folder has. No problem here works perfectly fine
     * and fast */
    FileFolder folder = dbSet.Include("Folders").
                             .Where(q => q.FileFolderID == id)
                             .ToList().FirstOrDefault();

    /* This takes too much time as I mention, up to 9 seconds
     * for 500 Folders */
    foreach (FileFolder f in folder.Folders)
    {
       if (f.Name.Contains(searchString))
       {
           addedFolders.Add(f);
       }

    }
    return addedFolders;
} 
```

我正在将获取的数据转换为 List 以便我可以安全地说所有数据现在都在内存中？因此，在访问文件夹时，foreach 循环不应再进行任何 db 调用。我也检查了`.Include`方法，它工作正常。

这种缓慢迭代的原因可能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:07:22.547

尝试使用它而不是 Foreach：

```
 if (folder!=null)
       {
           addedFolders.AddRange(folder.Folders.Where(f=>f.Name.Contains(searchString)));
       } 
```

完整的代码如下所示：

```
public List<FileFolder> SearchFolders(int id, string searchString) 
{
    /* Placeholder that references folders that passes search criteria */
    List<FileFolder> addedFolders = new List<FileFolder>();

    /* Get the folder with specified id, also include Folders
     * that this folder has. No problem here works perfectly fine
     * and fast */
    FileFolder folder = dbSet.Include("Folders").
                             .Where(q => q.FileFolderID == id)
                             .FirstOrDefault();

    if (folder!=null)
    {
       addedFolders.AddRange(folder.Folders.Where(f=>f.Name.Contains(searchString)));
    }
    return addedFolders;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T02:55:11.767

```
/* This takes too much time as I mention, up to 9 seconds
 * for 500 Folders */ 
```

请记住，这是 linq。事情不会马上发生。在第一次迭代之前，它实际上并没有开始运行查询`foreach()`。

这个查询真正慢的是这个

```
FileFolder folder = dbSet.Include("Folders").
                         .Where(q => q.FileFolderID == id)
                         .FirstOrDefault(); 
```

真正的问题是如何定义 dbSet 的“文件夹”。你有很多内置的 FK 连接吗？如果是这样，这样一个简单的请求就可以拉动您的整个数据库。这一切都取决于什么取决于“文件夹”。

您甚至可以在调试器中看到这一点，当您跨过 foreach 循环时，您会看到它“弹出”回 linq 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:25:21.663

关于你的线路：

```
foreach (FileFolder f in folder.Folders) 
```

我猜，但看起来你有一个文件夹表，其中子文件夹存储在同一个表中，ID 使用 FK 关系链接回父 ID？如果您有一个较深的文件夹层次结构，您可能最终会遇到递归问题，因为父母链接到孩子，链接到孩子，链接到孩子等等。我不知道 EF（对 EF 不太熟悉）会如何处理，但我猜这就是问题所在。

# java - 从默认相机拍摄的时间戳图像

> ID：11479767
> 
> 赞同：2
> 
> 时间：2012-07-13T23:54:09.740
> 
> 标签：java, android, bitmap, merge, timestamp

我正在尝试对从相机获取的图像进行时间戳记。这个源代码是从开发者网站提供的，我正在尝试添加它。通过创建时间戳位图并通过意图合并相机拍摄的图像。请任何见解、建议或评论将不胜感激。我在创建的示例中确实有一些我可能需要也可能不需要的代码。Android 开发者原始源代码[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

```
public class PhotoIntentActivity extends Activity {

private static final int ACTION_TAKE_PHOTO_B = 1;

private static final String BITMAP_STORAGE_KEY = "viewbitmap";
private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
private ImageView mImageView;
private Bitmap mImageBitmap;

private String mCurrentPhotoPath;

private static final String JPEG_FILE_PREFIX = "IMG_";
private static final String JPEG_FILE_SUFFIX = ".jpg";

private AlbumStorageDirFactory mAlbumStorageDirFactory = null;

/* Photo album for this application */
private String getAlbumName() {
    return getString(R.string.album_name);
}

//change from private to public 5:32 7/13
public File getAlbumDir() {
    File storageDir = null;

    if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

        storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

        if (storageDir != null) {
            if (! storageDir.mkdirs()) {
                if (! storageDir.exists()){
                    Log.d("TimeStamped", "failed to create directory");
                    return null;
                }
            }
        }

    } else {
        Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
    }

    return storageDir;
}
//change from private to public 5:32 7/13
public File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
    File albumF = getAlbumDir();
    File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);
    return imageF;
}
//change from private to public 5:32 7/13
public File setUpPhotoFile() throws IOException {

    File f = createImageFile();
    mCurrentPhotoPath = f.getAbsolutePath();

    return f;
}

//change from private to public 5:32 7/13
public void setPic() {

    /* There isn't enough memory to open up more than a couple camera photos */
    /* So pre-scale the target bitmap into which the file is decoded */

    /* Get the size of the ImageView */
    int targetW = mImageView.getWidth();
    int targetH = mImageView.getHeight();

    /* Get the size of the image */
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    /* Figure out which way needs to be reduced less */
    int scaleFactor = 1;
    if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
    }

    /* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    /* Decode the JPEG file into a Bitmap */
  //        Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
 //     
 //     /* Associate the Bitmap to the ImageView */
 //     mImageView.setImageBitmap(bitmap);
    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions); 
    //Time Stamp the Bitmap
    Bitmap replacedBitmap = timestampItAndSave(bitmap); 

// replacing bitmap with a time stamped bitmap  
    mImageView.setImageBitmap(replacedBitmap); 
    mImageView.setVisibility(View.VISIBLE);
}
//  new code        

//toEdit
// new code 5:38 7/13 changed from private
public Bitmap timestampItAndSave(Bitmap toEdit){
    Bitmap dest = Bitmap.createBitmap(toEdit.getWidth(), toEdit.getHeight(), Bitmap.Config.ARGB_8888);

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

    Canvas cs = new Canvas(dest);
    Paint tPaint = new Paint();
    tPaint.setTextSize(35);
    tPaint.setColor(Color.BLUE);
    tPaint.setStyle(Style.FILL);
    float height = tPaint.measureText("yY");
    cs.drawBitmap(dest, 100 ,100, tPaint);
    cs.drawText(dateTime, 20f, height+15f, tPaint);

    try {
        dest.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/timestamped")));
   //           dest.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/timestamped")));

    } catch (FileNotFoundException e) {
    e.printStackTrace();
    return null;
  }
    return dest;
}

 public Bitmap combineImages(Bitmap bitmap, Bitmap dest) { // can add a 3rd parameter 'String loc' if you want to save the new image - left some code to do that at the bottom 
        Bitmap timestampedandmerged = null; 

        int width, height = 0; 

        if(bitmap.getWidth() > dest.getWidth()) { 
          width = bitmap.getWidth(); 
          height = bitmap.getHeight() + dest.getHeight(); 
        } else { 
          width = dest.getWidth(); 
          height = bitmap.getHeight() + dest.getHeight(); 
        } 

        timestampedandmerged = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 

        Canvas comboImage = new Canvas(timestampedandmerged); 

        comboImage.drawBitmap(bitmap, 0f, 0f, null); 
        comboImage.drawBitmap(dest, 0f, bitmap.getHeight(), null); 

         // this is an extra bit I added, just incase you want to save the new image somewhere and then return the location
       // new code 5:38 7/13
        String tmpImg = String.valueOf(System.currentTimeMillis()) + ".png"; 
       // new code 5:38 7/13
        OutputStream os = null; 
        try { 
          os = new FileOutputStream(timestampedandmerged + tmpImg); 
          timestampedandmerged.compress(CompressFormat.PNG, 100, os); 
        } catch(IOException e) { 
          Log.e("combineImages", "problem combining images", e); 
        } 
        // new code 5:38 7/13
        return timestampedandmerged; 
      } 

private void galleryAddPic() {
        Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
        File f = new File(mCurrentPhotoPath);
        Uri contentUri = Uri.fromFile(f);
        mediaScanIntent.setData(contentUri);
        this.sendBroadcast(mediaScanIntent);
}

private void dispatchTakePictureIntent(int actionCode) {

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    switch(actionCode) {
    case ACTION_TAKE_PHOTO_B:
        File f = null;

        try {
            f = setUpPhotoFile();
            mCurrentPhotoPath = f.getAbsolutePath();
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
        } catch (IOException e) {
            e.printStackTrace();
            f = null;
            mCurrentPhotoPath = null;
        }
        break;

    default:
        break;          
    } // switch

    startActivityForResult(takePictureIntent, actionCode);
}

private void handleBigCameraPhoto() {

    if (mCurrentPhotoPath != null) {
        setPic();
        galleryAddPic();
        mCurrentPhotoPath = null;
    }

}

Button.OnClickListener mTakePicOnClickListener = 
    new Button.OnClickListener() {

    public void onClick(View v) {
        dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mImageView = (ImageView) findViewById(R.id.imageView1);
    mImageBitmap = null;

    Button picBtn = (Button) findViewById(R.id.btnIntend);
    setBtnListenerOrDisable( 
            picBtn, 
            mTakePicOnClickListener,
            MediaStore.ACTION_IMAGE_CAPTURE
    );

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
        mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
    } else {
        mAlbumStorageDirFactory = new BaseAlbumDirFactory();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case ACTION_TAKE_PHOTO_B: {
        if (resultCode == RESULT_OK) {
            handleBigCameraPhoto();
        }
        break;
    } // ACTION_TAKE_PHOTO_B
  } 

}

   // Some lifecycle callbacks so that the image can survive orientation change

protected void onSaveInstanceState(Bundle outState) {
    outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);
        outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );
        super.onSaveInstanceState(outState);
}

protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
    mImageView.setImageBitmap(mImageBitmap);
    mImageView.setVisibility(
            savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                    ImageView.VISIBLE : ImageView.INVISIBLE
    );

}

/**
 * Indicates whether the specified action can be used as an intent. This
 * method queries the package manager for installed packages that can
 * respond to an intent with the specified action. If no suitable package is
 * found, this method returns false.
 * http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html
 *
 * @param context The application's environment.
 * @param action The Intent action to check for availability.
 *
 * @return True if an Intent with the specified action can be sent and
 *         responded to, false otherwise.
 */
public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}

private void setBtnListenerOrDisable( 
        Button btn, 
        Button.OnClickListener onClickListener,
        String intentName
) {
    if (isIntentAvailable(this, intentName)) {
        btn.setOnClickListener(onClickListener);            
    } else {
        btn.setText( 
            getText(R.string.cannot).toString() + " " + btn.getText());
        btn.setClickable(false);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:59:36.180

一种粗略但快速的方法是创建一个由图像组成的 ImageButton 并在图像上简单地设置文本。我认为这行得通。试试看，让我知道。

# python - 如何检查程序/目录/文件是否经常使用？（在 Windows 中）

> ID：11479768
> 
> 赞同：2
> 
> 时间：2012-07-13T23:54:10.487
> 
> 标签：python, windows

例如，如果用户玩了很多俄罗斯方块，我可以通过 Python 来检查吗？它能否判断俄罗斯方块游戏目录中的目录/文件是否正在使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:09:57.810

一种方法是跟踪不同时间片的所有文件修改时间并批量运行程序。然后，您将跟踪所有修改时间或最后一次修改和更改次数。

看看这个： [如何在 Python 中获取文件创建和修改日期/时间？](https://stackoverflow.com/questions/237079/how-to-get-file-creation-modification-date-times-in-python)

我不知道 Windows 专门统计了一个文件被本地使用的次数。但是 FWIW，TechNet 上有一些讨厌的 VBScript 代码基本上做同样的事情（[这里](http://blogs.technet.com/b/heyscriptingguy/archive/2008/03/13/how-can-i-find-the-number-and-size-of-all-the-files-recently-modified-or-added-to-a-computer.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:31:39.597

1.  您只需要检查更改的文件吗？看门狗可以监视文件夹中的所有更改。[https://github.com/gorakhargosh/watchdog/](https://github.com/gorakhargosh/watchdog/) （这是一个python项目）据我了解，它无法检测到只读选项。
2.  Process Monitor [http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) 它可以监控所有FS操作并将其保存到日志文件中。您可以尝试通过 python 解析结果。

# python - 使用异常跳出while循环

> ID：11479769
> 
> 赞同：2
> 
> 时间：2012-07-13T23:54:22.890
> 
> 标签：python, events, exception

好的，所以说我有一个 Tkinter 窗口和一个 while 循环。Tkinter 窗口正在一个单独的线程中运行，而 while 循环在 main 中。前任：

```
 def quit_me():
      raise ValueError("Exception to quit while loop")
      exit()
  root = Tk()
  start_new_thread(root.mainloop,())
  root.protocol("WM_DELETE_WINDOW", quit_me)
  def main():
      while (true):
          try:
              pass #do stuff here
          except ValueError:
              break 
```

这可能吗？我已经在我的应用程序中尝试过，但它似乎不起作用。有一个更好的方法吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:57:16.010

不会跨线程抛出异常。除非您最终`#do stuff here`实际调用该`quit_me()`函数，否则您的主线程将永远不会看到抛出的异常。

您可以使用全局执行此操作：

```
QuitNow = False

def quit_me():
    QuitNow = True

def main():
    while not QuitNow:
        #do stuff here 
```

# formatting - 在 Sublime Text 2 中构建输出是时髦的字符

> ID：11479774
> 
> 赞同：5
> 
> 时间：2012-07-13T23:55:22.077
> 
> 标签：formatting, sublimetext2

例如，当我使用以下命令运行构建时：

```
{
    "cmd": ["grunt"]
} 
```

我在控制台中得到 bash 格式输出。有没有办法显示格式或删除格式字符？

```
[4mRunning "lint:files" (lint) task[24m... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T02:06:13.063

如果传递 no-color 标志，输出看起来会更好：

```
{
  "cmd": ["grunt", "--no-color"]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T22:11:19.620

这在 ST2 中是不可能的。这是官方的功能请求：

[http://sublimetext.userecho.com/topic/55640-htmlansi-in-output/](http://sublimetext.userecho.com/topic/55640-htmlansi-in-output/)

# php - 为什么类型转换不是 PHP 函数参数中的选项

> ID：11479782
> 
> 赞同：6
> 
> 时间：2012-07-13T23:56:21.407
> 
> 标签：php, function, types, parameters, casting

对你们中的许多人来说，这听起来像是一个愚蠢的问题，但它让我想知道为什么 PHP 不允许在其函数参数中进行类型转换。许多人使用这种方法来转换他们的参数：

```
private function dummy($id,$string){
    echo (int)$id." ".(string)$string
} 
```

或者

```
private function dummy($id,$string){
    $number=(int)$id;
    $name=(string)$string;
    echo $number." ".$name;
} 
```

但是看看许多其他编程语言，它们接受类型转换到它们的函数参数中。但是在 PHP 中这样做可能会导致错误。

```
private function dummy((int)$id,(string)$string){
    echo $id." ".$string;
} 
```

> 解析错误：语法错误，意外的 T_INT_CAST，需要 '&' 或 T_VARIABLE

或者

```
private function dummy(intval($id),strval($string)){
    echo $id." ".$string;
} 
```

> 解析错误：语法错误，意外 '('，期待 '&' 或 T_VARIABLE

只是想知道为什么这不起作用以及是否有办法。如果没有办法，那么走常规方式对我来说没问题：

```
private function dummy($id,$string){
    echo (int)$id." ".(string)$string;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T00:01:50.970

PHP 确实对数组和对象具有[基本的类型提示功能](http://www.php.net/manual/en/language.oop5.typehinting.php)，但它不适用于标量类型。

> PHP 5 引入了类型提示。函数现在可以强制参数为对象（通过在函数原型中指定类的名称）、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。但是，如果将 NULL 用作默认参数值，则将允许它作为任何以后调用的参数。
> 
> 如果类或接口被指定为类型提示，那么它的所有子级或实现也被允许>ed。
> 
> 类型提示不能用于标量类型，例如 int 或 string。特征也是不允许的。

### 数组提示示例：

```
public function needs_array(array $arr) {
    var_dump($arr);
} 
```

### 对象提示示例

```
public function needs_myClass(myClass $obj) {
    var_dump($obj);
} 
```

如果您需要强制执行标量类型，则需要通过类型转换或检查函数中的类型并在它接收到错误类型时采取相应措施或采取相应措施来实现。

### 如果你得到错误的类型，抛出异常

```
public function needs_int_and_string($int, $str) {
   if (!ctype_digit(strval($int)) {
     throw new Exception('$int must be an int');
   }
   if (strval($str) !== $str) {
     throw new Exception('$str must be a string');
   }
} 
```

### 只是默默地输入参数

```
public function needs_int_and_string($int, $str) {
   $int = intval($int);
   $str = strval($str);
} 
```

## 更新：PHP 7 添加标量类型提示

PHP 7 引入了具有严格和非严格模式的[标量类型声明。](http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration)`TypeError`如果函数参数变量与声明的类型不完全匹配，现在可以在严格模式下抛出 a ，或者在非严格模式下强制类型。

```
declare(strict_types=1);

function int_only(int $i) {
   // echo $i;
}

$input_string = "123"; // string
int_only($input);
//  TypeError: Argument 1 passed to int_only() must be of the type integer, string given 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:02:40.310

PHP 仅允许对象类型使用此功能，我怀疑这是因为该语言的类型非常松散。考虑一下：

```
<?php
class Foo {

    public function dummy(int $id, string $string){
        echo $id." ".$string;
    }

}

$foo = new Foo();
$foo->dummy(1, "me"); 
```

这段代码在*语法上*没问题（即它可以编译），但是，有一个运行时错误：

> Catchable fatal error: Argument 1 passed to Foo::dummy() must be an instance of int, integer given, called in /Users/christrahey/tes.php on line 11 and defined in /Users/christrahey/tes.php on line 4

Notice that it is looking for an *instance* of a class named `int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-27T15:48:28.007

For all the people coming here from Google, you probably know that now, with php 7.x, you can declare all parameter types, including scalars:

```
<?php
declare(strict_types=1);
function foo(int $i){
    echo $i;
}

foo(20);
//foo('abvc'); //Fatal error: Uncaught TypeError: Argument 1 passed to foo() must be of the type integer, string given
foo('12');//this will be OK, *unless* we enable strict types at the first line 
```

More:

[http://php.net/manual/en/migration70.new-features.php](http://php.net/manual/en/migration70.new-features.php)

# lua - 如何在 Lua 中下载文件，但在工作时写入本地文件

> ID：11479783
> 
> 赞同：5
> 
> 时间：2012-07-13T23:56:30.657
> 
> 标签：lua, download, luasocket

我正在尝试制作一个更新程序，因此当我的 Lua 应用程序过期时，它将使用**LuaSocket**下载更新的 .exe 文件（它可以运行我的 Lua 代码）。

在这个更新程序中，我希望它显示到目前为止已经下载了多少。但是，对于以下 HTTP 请求，它会阻止应用程序，直到完全下载：

```
local b, c, h = http.request("https://www.example.com/Download/Example.exe?from="..Game.Version) 
```

我正在使用线程下载它，但是在线程内部完成下载之前我仍然无法写入文件，因此进度条将变为 0%、100%，中间没有任何内容。

我可以做些什么来下载远程文件，但在下载时将其保存到本地文件？

cURL 可以做到这一点。我不知道 LuaSocket 或 Lua 的其他东西是否可以。:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T09:40:35.500

你是对的 - cURL 可以做到。LuaSocket 没有这个功能。您可以创建一个 LTN12 接收器来报告进度，但在完全下载之前您不会知道文件的总大小，所以它有点没用。为什么不使用[luacurl](http://luacurl.luaforge.net/)呢？

```
local curl = require "luacurl"
local c = curl.new()

function GET(url)
    c:setopt(curl.OPT_URL, url)
    local t = {} -- this will collect resulting chunks
    c:setopt(curl.OPT_WRITEFUNCTION, function (param, buf)
        table.insert(t, buf) -- store a chunk of data received
        return #buf
    end)
    c:setopt(curl.OPT_PROGRESSFUNCTION, function(param, dltotal, dlnow)
        print('%', url, dltotal, dlnow) -- do your fancy reporting here
    end)
    c:setopt(curl.OPT_NOPROGRESS, false) -- use this to activate progress
    assert(c:perform())
    return table.concat(t) -- return the whole data as a string
end

local s = GET 'http://www.lua.org/'
print(s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T21:07:21.130

您可以通过发出 HEAD 请求并从 Content-Length 标头获取文件大小来节省对 cURL 的依赖：

```
require "socket.http"

local resp, stat, hdr = socket.http.request{
  url     = "http://www.lua.org/ftp/lua-5.2.1.tar.gz",
  method  = "HEAD",
}

print(hdr["content-length"])
-- 249882 
```

也就是说，如果这就是您使用 LuaSocket 的全部目的，那么 cURL 可以说是一个更好的选择。

# multithreading - LeaveCriticalSectionWhenCallbackReturns 的意义何在？

> ID：11479787
> 
> 赞同：2
> 
> 时间：2012-07-13T23:56:59.680
> 
> 标签：multithreading, winapi, threadpool

我不明白这个 API 的意义。难道你不能在你的函数返回时使用普通的 C 或 C++ 技术离开 CS 吗？这个 API 会为您做什么，而您无法直接做到这一点？

作为[参考，这里是 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684171%28v=vs.85%29.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:10:06.480

问题是回调函数可能有多种返回方式，您必须确保它们中的每一种都释放临界区。这些函数在逻辑上表明该资源属于回调函数，并使其成为回调函数的责任释放它。这有点类似于[`finally`](https://stackoverflow.com/questions/1158667/why-use-finally-in-try-catch).

这是一个便利功能。如果它恰好符合您的要求，那就太好了。如果没有，你可以做任何你需要的事情。

# python - 'x' 是此函数的无效关键字参数

> ID：11479791
> 
> 赞同：3
> 
> 时间：2012-07-13T23:58:19.280
> 
> 标签：python, python-2.7

我正在尝试编写一些东西来检查整数（z）是否在 x 和 y 的范围内，x 是最小数，y 是最大值。我通过检查 z 是否小于最小数字或大于最大数字来做到这一点。如果其中任何一个为真，则返回无效，否则确认。检查值的最大值、最小值和数量由 raw_input 确定。这是代码：

```
int(x = raw_input('x:\n')) #max number
int(y = raw_input('y:\n')) #min number
int(z = raw_input('z:\n')) #number to check.
if z < y:
    print 'invalid.'
elif z > x :
    print 'invalid.' 
```

我可以很好地输入 x 值，但是当我尝试输入 y 值时，出现以下错误：

```
Traceback (most recent call last):
  File "C:/Python27/random/bark", line 2, in <module>
    int(y = raw_input('y:\n')) #min number
TypeError: 'y' is an invalid keyword argument for this function 
```

我不知道我做错了什么，我在别处问过没有回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T00:00:19.783

In place of this:

```
int(x = raw_input('x:\n')) #max number 
```

try this:

```
x = int(raw_input('x:\n')) #max number 
```

similarly for the other input statements.

Built-in Python function [raw_input()](http://docs.python.org/library/functions.html#raw_input) "reads a line from input, converts it to a string ". In order for you to use to use the input as an integer, you need to convert the `string` to `int` with the help of the [int()](http://docs.python.org/library/functions.html#int) function which converts "a string or number to a plain integer". From your code it looks like you had the basic idea, but your syntax was a bit tangled up.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T00:05:45.147

与 C 不同，Python 赋值语句不能用作参数中的表达式。

例如，以下内容根本不合法，并且将导致`SyntaxError`：

```
if name = name + 1:
    pass 
```

在这种情况下，您收到 a`TypeError`而不是 a`SyntaxError`的原因是 Python 的关键字参数功能。Python 允许您以以下形式将命名参数传递给函数：`foo(arg1=0, second_argument="hello")`. 因此，解释器认为这就是你想要做的。

您收到的错误消息是 Python 解释器认为您将关键字参数传递给`int()`. `int()`，当然，不采用关键字参数“x”（或“y”或“z”），因此错误。这是你应该做的：

```
x = int(raw_input("x:\n"))
y = int(raw_input("y:\n"))
z = int(raw_input("z:\n")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:02:29.610

try this

```
x,y,z, = int(raw_input("x:")),int(raw_input("y:")),int(raw_input("z:")) 
```

this is the output

```
>>> x,y,z, = int(raw_input("x:")),int(raw_input("y:")),int(raw_input("z:"))
x:5
y:6
z:7
>>> x
5
>>> y
6
>>> z
7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T01:35:46.507

如果你想要一个更短的版本，试试这个：

```
x,y,z = (int(raw_input(var+':')) for var in "xyz") 
```

（它与 Joran Beasley 的版本相同）

# ruby-on-rails - Arbitrary precision with dates in Rails and MongoDB

> ID：11479796
> 
> 赞同：1
> 
> 时间：2012-07-13T23:59:28.213
> 
> 标签：ruby-on-rails, mongodb, date, time

What would be a good way of storing date/time data with various precisions in a single field or attribute. For example, if I had a Movie class with a release_date property, and sometimes it would be a specific date like 2012-12-24, and other times it may just be 1948, with no month or day. Ruby doesn't allow for zero-value date parts.

My only good idea so far has been to store the data polymorphicly with another field storing the time as either Number or Time, and the date value would always be stored as an integer, but even that seems really ugly. Other than that all I can think of is storing each data part separately, but that sounds like it would make sorting a nightmare.

Perhaps there's a common way of doing this that I'm unaware of.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:20:10.740

使用[部分日期](http://rubygems.org/gems/partial-date)gem。

> 一个简单的日期类，可用于将部分日期值存储在单个列/属性中。示例用例将包括完整日期未知的档案或目录条目。年份是可选的，可以是负值。月份和日期是可选的，但月份必须在日期之前设置
> 
> PartialDate::Date 使用 30 位寄存器作为日期实例的后备存储，并使用位摆弄来获取或设置年、月和日值。

# sql - 复式应计会计概念

> ID：11479800
> 
> 赞同：3
> 
> 时间：2012-07-14T00:00:12.563
> 
> 标签：sql, accounting

我有一个关于物业管理的会计问题。

第 1 步：住宅业主：彼得

我向彼得收取 200 美元的月管理费。所以：

```
Type      Name     Debit Account        Credit Account      Amount
------    -----    ------------------   --------------      ------    
Charge    Peter    Management Income    Acc Receivable      200.00 
```

第2步：

我向彼得收取 50 美元的煤气费。所以：

```
Type      Name     Debit Account        Credit Account      Amount
------    -----    ------------------   --------------      ------   
Charge    Peter    Utilities Income     Acc Receivable      50.00 
```

这里我的应收账款余额 = 250，管理收入 = 200，公用事业收入 = 50。

现在，彼得要付给我 200 美元的管理费……所以

第 3 步：

```
Type      Name     Debit Account        Credit Account      Amount 
------    -----    ------------------   --------------      ------ 
Payment   Peter    Acc Receivable       Management Income   200 
```

这里我的应收账款余额 = 50，管理收入 = 0，公用事业收入 = 50

我已经看到付款会自动在未存款资金中生成另一条记录，因为是我收到但尚未存入银行的钱。

我的问题是该交易的借方账户和贷方账户是什么，或者我该如何处理。

```
Type      Name     Debit Account        Credit Account      Debit     
------    -----    ------------------   --------------      ------    
Payment   Peter    Undeposited Funds        **???**         200.00 
```

因为当我存入该金额时，我知道下一条记录应如下所示：

```
Type      Name     Debit Account        Credit Account      Debit     
------    -----    ------------------   --------------      ------    
Deposit   ME       Bank Account         Undeposited Funds   200.00 
```

关于如何处理这个的任何线索？创建未存入资金记录时，贷方帐户是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:15:37.537

编辑：考虑以下示例：当您向电话公司发送支票时。支付账单，第一件事就是打电话给公司。当他们收到您的支票时，他们会记入您帐户上的应付余额并借记一个名为“支票存款”的暂记帐户。当您的支票在电话公司的银行账户中结清时，电话公司。贷记“银行现金”并借记“支票存款”。如果您的支票被退回，电话公司。将记入“已退回支票”并从您的帐户余额中扣除该金额加上服务费。

编辑（认为是解决方案）：

例如

1.  我向住宅业主收取 200 美元的维护费。在那一刻，我记录了 2 笔交易：1）将向 Maint 借记 200 美元。收入账户 2) 将 200 记入应收账款账户。

2.  住宅业主支付了 200 美元的维护费。在那一刻，我记录了 3 笔交易：1）将 200 记入应收账款账户 2）将 200 记入 Maint。收入账户 3) 将借记 200 到未存入资金账户（资产账户）。

3.  我去将 200 付款存入我的银行账户……在那一刻我记录了 2 笔交易：1）将 200 记入银行账户 2）将 200 记入未存款资金。

这样我的余额将显示如下：

```
Account            Debit    Credit    Balance
Maint. Income      200      200       0
Receivables        200      200       0
Undep. Funds       200      200       0
Bank Account       200      0         200 
```

我认为这个解决方案有效......刚刚创建了数据库表，一切都很好......你怎么看？

> 嗯，你为什么要借记银行账户而不是贷记银行账户？.. 如果你借记银行账户 200，余额将为 -200。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:59:59.550

在会计方面，当您收到客户的付款时，您贷记客户并借记“未存入资金”。然后，当您将钱存入银行时，您从银行借记并贷记“未存入资金”。

# php - Can normal functions emulate OOP?

> ID：11479801
> 
> 赞同：2
> 
> 时间：2012-07-14T00:00:15.583
> 
> 标签：php, functional-programming

Can OOP programming be emulated with just normal functions? Like with using static variables and anonymous functions: [http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:08:07.937

是的。深入浅出，“对象只是函数的记录”，这在编程语言理论中是众所周知的。也就是说，如果您的语言具有一些类似记录的特性和适当的一等函数（即“闭包”），那么“类”只是一个返回此类记录的函数。例如，在一些伪语法中（因为我的 PHP 是初级的）：

```
func Point(x, y) {
  var my_x = x
  var my_y = y
  var this = {
    getX : func() { return my_x }
    getY : func() { return my_y }
    move : func(dx, dy) { my_x += dx; my_y += dy }
    dist : func() { return sqrt(this.getX()**2 + this.getY()**2) }
  }
  return this
}

var p = Point(0, 3)
p.move(2, -5)
p.getY()  // -2 
```

请注意所有“方法”如何只是关闭局部变量（因此被隐藏）的一流函数。

如果您还想要继承，那么编码会涉及更多，但仍然是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T00:15:17.857

静态变量用于编写过程代码，乍一看像 OOP。

OOP 是一种设计模式，与您使用的语言的哪个方面无关。阅读以下文章将使您受益匪浅：[OOP vs Procedural Code](http://blog.ircmaxell.com/2012/07/oop-vs-procedural-code.html)。它解释了编写面向对象的代码（即使只有函数）。

此外，您应该意识到[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)是一种完全不同的开发范式。有针对这种范式的函数式语言：JavaScript、Scala、Haskell、Erlang。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T00:17:50.890

我认为我能很快想到的最接近的方法是编写所有函数以将它们的第一个参数作为要操作的数据结构。可以这样想：

OOP 本质上只是将已知的数据结构与适当的行为相结合。

因此，如果您愿意相信自己只传递函数知道如何使用的数据结构，您可以对它进行程序化建模，每个“类”在全局空间中有两个数组，一个用于“实例”，一个用于“函数”（字面意思是可调用的数组，以它们的名称为键）。

我写了一些代码，将“类”定义为本质上是方法的集合，这些方法基本上可以`$self`按照他们想要的方式处理（只要他们都知道会发生什么）。这是一个非常酷的想法（感谢您的提问！）。请注意匿名函数的使用，理论上，可以将其聚合为函数原型数组并用于许多不同的类（即，只有一个“描述”或“__toString”类，适用于所有类）。

# 编辑：工作代码：

```
<?php

// The "Runtime" //
function makeObject($class, $constructorArgs) {
  global $classes;
  $constructorArgs = (array) $constructorArgs;
  $instance =  $classes[$class]['instances'][] = array();
  $instance['_class'] = $class;
  $instance = callMethod($instance, 'construct', $constructorArgs);
  return $instance;
}
function callMethod($instance, $method, $args = array()) {
  global $classes;
  return call_user_func_array($classes[$instance['_class']]['methods'][$method], array_merge(array($instance), $args));
}

// Class definition for "Person" //
$classes['Person'] = array();
$classes['Person']['methods'] = array();
$classes['Person']['methods']['construct'] = function($self, $name) {
    $self['name'] = $name;
    return $self;
};
$classes['Person']['methods']['sayHello'] = function($self) 
{
    echo "hello, my name is " . $self['name'] . "\n";
};
$classes['Person']['instances'] = array();

// Begin "Application" code.
// equivalent to: 
// $person = new Person("sally");
// $person->sayHello();

$person = makeObject('Person', "sally");
callMethod($person, "sayHello"); 
```

这显然可以通过许多有趣和有趣的方式进行扩展。例如，您可以重新设计“方法”函数的结构，使其也接受 $parent 参数，并允许子类调用其父类，并允许 callMethod() 在子类未实现继承方法时查找继承的方法。这很有趣。请注意，只有最后两行实际上是“应用程序代码”……其余的相当于声明性“设置”代码（类似于类定义）和“运行时”函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T00:48:00.057

OOP 是关于拥有一个初始化对象的构造函数，其他函数可以使用`this`关键字“静态”访问。

所以是的，您可以在不使用诸如“class”、“this”或 __construct 之类的语言结构的情况下进行 OOP。

**正常面向对象**：

```
class Something{
    public $member_var;

    public function __construct(){
        $this->member_var="x";
    }

    public function fill($strValue){
        $this->member_var=$strValue;
    }
}
$objInstance=new Something();

$objInstance->fill("abc"); 
```

**使用过程语言构造的 OOP**（我已经避免使用 Object 类来远离任何 OOP 的东西，但是最好将它用于 $self 类型，也许能够使用 -> 访问器，或者利用自动通过引用传递）：

```
function Something_constructor(&$self){
    $self=array(
        "member_var"=>"x",
    );
}

function fill(&$self, $strValue){
    $self["member_var"]=$strValue;
}

Something_constructor($arrInstance);

fill($arrInstance, "abc"); 
```

使用 PHP >=5.3 的新匿名函数特性，您可以将成员函数作为属性添加到 $self 数组/对象中，因为您可以直接调用 ( `$self["fill"]("abcde")`)。如果对 $self 使用对象数据类型，则可以使用更好的访问器。

根据您设计代码的方式，这种程序风格的 OOP 可能会被调整为在简单的 RPC 场景中很好地工作（但是，构造函数永远不会返回可用的 $self 对象/数组，所以您最好完全使用 OOP 并拥有相同的问题）。

如果走 (object)array() 路线，您可以将填充函数作为属性存储在对象中，但您永远不会有`$this`引用（不将其作为参数传递）或原型或任何其他类型的继承。你最好坚持使用 PHP 中的 class 关键字，没有理由绕过它。

如果您还需要继承，这就是它变得丑陋的地方：您需要创建重命名的函数以进行覆盖，为`$self`数组/对象创建“类型”转换函数等。

可以办到。如果您有复杂的需求（如继承），它可能会变得非常难看。如果你有真正简单的需求，不那么丑陋，甚至可能有优势。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T00:36:34.130

是的。例如，也许，在函数式语言中重载一个函数在某种程度上等同于 OOP 中的继承。但关键是，你甚至不应该*考虑*让用函数式语言编写的代码看起来像 OOP。将它们视为不同的工具，以实现相同的目标。

*从理论上讲，* OOP促进了更清洁的代码库，并且*据说*可以更轻松地重用代码。当它出现时，围绕这些概念进行了很多炒作，今天很多人甚至会说这是过度炒作。函数式语言在过去几年重新获得了应有的尊重，许多人已经意识到 OOP 只是一个 BUZZ 词，绝不是代码质量的保证。

函数式编程有许多编码技术和方法可以使它像 OOP 一样优雅。为工作使用正确的工具是任何项目的良好开端，正确使用它是您应该关注的主要部分。试图使特定项目的代码库看起来像使用函数式语言的 OOP 不会带来任何好处，并且必然会让某人感到痛苦：如果不是你，那就是必须维护它的人。

您的主要目标之一是拥有一个尽可能易于理解的代码库，并且有许多特定于函数式编程的方法可以处理这个问题，就像 OOP 中的方法一样。在我（非常谦虚的）看来，函数式编程甚至有一个优势，因为它更灵活。

我见过并管理过相当大的项目，这些项目让我很高兴。还有一些小的 OOP 项目，你很难理解。即使使用了正确的工具，在错误的人手中也会带来不好的结果。

我的 2 美分，快乐编码！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-14T00:38:50.170

很多人对 OOP 到底是什么有不同的看法……我认为 OOP 是一种以非常具体的方式设计程序的方法，使用对象作为程序或计算的系统隐喻，可以帮助你灌输你的结果过程和软件具有许多非常好的、有用和强大的品质。

考虑到这一点，您可以在使用任何语言时应用 OOP 方法，在某些语言中比在其他语言中更容易做到这一点......通常在“OOP”语言中最简单，而这些语言不是强迫你的语言编写 OOP 代码（因为这是不可能的），但这为您提供了一组功能，如果您想遵循 OOP 方法，将使您的生活更轻松......

最后，要“模拟 OOP”足够好，最困难的“事情”是使用“行为”或“代码”作为数据的能力......这可以通过很多方式实现，比如 lambda 函数，或者一流的函数，或函数指针等......大多数现代语言至少支持其中一个。

# java - Empty result for Db4o queryByExample() method when I specifiy a Class

> ID：11479803
> 
> 赞同：0
> 
> 时间：2012-07-14T00:00:23.293
> 
> 标签：java, class, dynamic, classloader, db4o

So I'm having a strange problem with the Db4o API. I'm trying to retrieve certain classes of objects (depending on a user's query, but that's not really relevant), from a database. The database *definitely* has objects with the classes I want to retrieve. So for example, when I queryByExample() for just any Object, and then print out the Classes of each element of the object set, like so...

```
public void evaluateQuery(ObjectContainer db) {
    if (this.hasPredicate) {
        ;
    } else {
        if (this.isNode) {
            ObjectSet nodes = db.queryByExample(Object.class);
            ListIterator listIter = nodes.listIterator();
            while (listIter.hasNext()) {
                Object node = listIter.next();
                System.out.println("Object has Class: " + node.getClass());
            }
        }
    }
} 
```

... and I get a result like this...

```
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class Node
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode
Object has Class: class SubNode 
```

...As you can see, the database has object with Classes set to Node and SubNode. Now, I'd like the code to actually work like this...

```
public void evaluateQuery(ObjectContainer db) {
    if (this.hasPredicate) {
        ;
    } else {
        if (this.isNode) {
            ObjectSet<Node> nodes = db.queryByExample(Node.class);
            ListIterator<Node> listIter = nodes.listIterator();
            while (listIter.hasNext()) {
                Node node = listIter.next();
                System.out.println("Object has Class: " + node.getClass());
            }
        }
    } 
```

.. but when I do this, the ObjectSet is invariably empty, and I can't seem to figure out why. I load a certain subset of Classes, such as the above Node Class, into the environment with ClassLoader at runtime, and they're definitely in there, as I instantiate/use them in other contexts with no problems.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:53:48.673

这实际上是一个包导入问题。出于某种原因，在使用 db4o 时说...

导入 com.db4o.*；

没有解决依赖关系，说....

导入 com.db4o.query.Predicate。

...做。奇怪的....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:13:59.523

使用直接查询对应项。它将检索给定类的所有实例。而且它与 Java 泛型的交互也更好 =)

```
List<Node> nodes = db.query(Node.class);
// do stuff 
```

# jqplot - jqplot height 100% instead of fixed height

> ID：11479804
> 
> 赞同：4
> 
> 时间：2012-07-14T00:00:25.490
> 
> 标签：jqplot

For some reason my `jqplot` (from a plugin) has a fixed height. This question is directly for people who use this plugin. Do you know how to make the height dynamically change depending on that of its parent? Like via just a 100% height?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:10:25.140

我认为最好的方法是在初始化图表之前确定父容器的高度。容器也必须被拉伸以填充使用 CSS 技术为图表保留的空间。你可以这样做：

**HTML：**

```
<div class="container"><div id="chart"></div></div> 
```

**jQuery代码：**

```
var containerHeight = $("#chart").parent("div.container").height();
var chart = $.jqplot('chart', [data], {
    height: containerHeight,
    ...
}); 
```

当然，这种方法并不适合所有的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:11:16.753

这就是我所做的。将 .96 更改为 1，您应该能够实现您想要的。

```
$('#ChartID').height($('#ParentElement').height() * 0.96);
$('#ChartID').width($('#ParentElement').width() * 0.96); 
```

我在绘制图表后调用这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T09:51:47.410

使用以下步骤；我认为绘制动态高度图很有用

```
var minHeight=100;

if (30 * label.length > minHeight){
minHeight = 30 * label.length;
}
$('#chart1').height(minHeight); 
```

# regex - Rename a string from app.js to app.min.js in bash

> ID：11479808
> 
> 赞同：2
> 
> 时间：2012-07-14T00:01:28.217
> 
> 标签：regex, bash

What's the quickest way to take a string like "app.js" and rename it to "app.min.js" in bash?

I was hoping for an awk regex or something where I can do:

```
s/(.*?)\.js/$1.min.js/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:05:20.143

这是一种方式：

```
string=app.js
string=${string/./.min.} 
```

# python - What is the Python equivalent for a case/switch statement?

> ID：11479816
> 
> 赞同：610
> 
> 时间：2012-07-14T00:01:59.410
> 
> 标签：python, switch-statement, case-statement

Is there a Python equivalent for the case statement such as the examples available in VB.NET or C#?

* * *

## 回答 #1

> 赞同：742
> 
> 时间：2012-07-14T00:05:45.890

### Python 3.10 及更高版本

在 Python 3.10 中，他们引入了*模式匹配*。

[Python 文档](https://docs.python.org/3.10/whatsnew/3.10.html#pep-634-structural-pattern-matching)中的示例：

```
def http_error(status):
    match status:
        case 400:
            return "Bad request"
        case 404:
            return "Not found"
        case 418:
            return "I'm a teapot"
        case _:
            return "Something's wrong with the internet" 
```

### Python 3.10 之前

虽然[官方文档](http://docs.python.org/tutorial/controlflow.html)很高兴不提供 switch，但我已经看到了[使用字典的解决方案](http://bytebaker.com/2008/11/03/switch-case-statement-in-python/)。

例如：

```
# define the function blocks
def zero():
    print "You typed zero.\n"

def sqr():
    print "n is a perfect square\n"

def even():
    print "n is an even number\n"

def prime():
    print "n is a prime number\n"

# map the inputs to the function blocks
options = {0 : zero,
           1 : sqr,
           4 : sqr,
           9 : sqr,
           2 : even,
           3 : prime,
           5 : prime,
           7 : prime,
} 
```

然后调用等效的 switch 块：

```
options[num]() 
```

如果您严重依赖失败，这将开始崩溃。

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2012-07-14T10:39:09.650

直接替换是`if`// `elif`。`else`

但是，在许多情况下，有更好的方法可以在 Python 中完成。请参阅“ [Python 中 switch 语句的替换？](https://stackoverflow.com/questions/60208/replacements-for-switch-statement-in-python) ”。

# java - I have an array where I need to get the length and it's giving me trouble

> ID：11479817
> 
> 赞同：-1
> 
> 时间：2012-07-14T00:02:04.587
> 
> 标签：java, arrays, average

The array in the main method looks like this:

```
double[] x = { 11.11, 66.66, 88.88, 33.33, 55.55 }; 
```

And the code that's giving me trouble is:

```
public static double computeAverage(double[] x){

        double xTotal = 0.0;

        for (int i = 0; i < x.length(); i++)
        {
            xTotal = xTotal + x[i]; 
        }
        double computeAverage = xTotal / x.length();
        return computeAverage;
} 
```

About the only thing I know for sure is that I'm trying to get the length of the array x and it's giving me an error because it's a double and not an integer. Does the "double" has an equivalent to "length" I can try?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:05:37.973

`length()`不是任何数组类的方法。相反，您应该通过`length`字段获取长度。不带参数访问字段（即不带括号）。

```
for (int i = 0; i < x.length; i++)
{ 
```

# java - Lucene skips years when NumericRangeQuery on dates

> ID：11479829
> 
> 赞同：0
> 
> 时间：2012-07-14T00:04:05.813
> 
> 标签：java, lucene

We are running a Lucene query for the date range 20000101 to 20070531, but Lucene only returns documents with a publicationDate between 20000101-20000701 and 20070101-20070531\. Lucene skips several years. When running different date sets the results are similar.

Full insert code:

```
Document doc = new Document();
doc.add(new Field("pageNumber", article.getPageNumber(), Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.add(new NumericField("publicationDate", 8, Field.Store.YES, true).setIntValue(Integer.parseInt(article.getPublicationDate())));
doc.add(new Field("headline", article.getHeadline(), Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("text", article.getText(), Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("fileName", article.getFileName(), Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.add(new Field("mediaType", article.getMediaType(), Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.add(new Field("mediaSource", article.getMediaSource(), Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.add(new Field("overLap", article.getMediaType(), Field.Store.YES, Field.Index.NOT_ANALYZED));
doc.add(new Field("status", article.getMediaType(), Field.Store.YES, Field.Index.NOT_ANALYZED));
indexWriter.addDocument(doc); 
```

Document count code:

```
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    Directory index = new SimpleFSDirectory(new File(LUCENE_INDEX_DIRECTORY));
    IndexReader reader = IndexReader.open(index);

    Query sourceQuery = new TermQuery(new Term("mediaSource", source));
    QueryParser queryParser = new QueryParser(Version.LUCENE_36, "text", analyzer);
    Query textQuery = queryParser.parse(terms);
    Query dateRangeQuery = NumericRangeQuery.newIntRange("publicationDate", startDate, endDate, true, true);

    BooleanQuery booleanQuery = new BooleanQuery();
    booleanQuery.add(sourceQuery, BooleanClause.Occur.MUST);
    booleanQuery.add(textQuery, BooleanClause.Occur.MUST);
    booleanQuery.add(dateRangeQuery, BooleanClause.Occur.MUST);

    IndexSearcher searcher = new IndexSearcher(reader);

    TotalHitCountCollector collector = new TotalHitCountCollector();
    searcher.search(booleanQuery, collector);

    System.out.println("start: " + startDate);
    System.out.println("end: " + endDate);
    System.out.println("total: " + collector.getTotalHits());

    String hitCount = String.valueOf(collector.getTotalHits());
    searcher.close();
    reader.close();
    analyzer.close();
    return hitCount; 
```

Full document list:

```
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    Directory index = new SimpleFSDirectory(new File(LUCENE_INDEX_DIRECTORY));
    IndexReader reader = IndexReader.open(index);

    Query sourceQuery = new TermQuery(new Term("mediaSource", source));
    QueryParser queryParser = new QueryParser(Version.LUCENE_36, "text", analyzer);
    Query textQuery = queryParser.parse(terms);
    Query dateRangeQuery = NumericRangeQuery.newIntRange("publicationDate", startDate, endDate, true, true);

    BooleanQuery booleanQuery = new BooleanQuery();
    booleanQuery.add(sourceQuery, BooleanClause.Occur.MUST);
    booleanQuery.add(textQuery, BooleanClause.Occur.MUST);
    booleanQuery.add(dateRangeQuery, BooleanClause.Occur.MUST);

    IndexSearcher searcher = new IndexSearcher(reader);
    TotalHitCountCollector collector = new TotalHitCountCollector();
    searcher.search(booleanQuery, collector);

    Sort sort = new Sort(new SortField("publicationDate", SortField.INT));

    if (collector.getTotalHits() > 0) {
        TopDocs topDocs = searcher.search(booleanQuery, collector.getTotalHits(), sort);

        int i = 0;
        for (ScoreDoc scoreDoc : topDocs.scoreDocs) {
            ArrayList<String> resultRow = new ArrayList<String>();
            Document doc = searcher.doc(scoreDoc.doc);
            resultRow.add(String.valueOf(i));
            resultRow.add(doc.get("publicationDate"));
            resultRow.add(doc.get("mediaSource"));
            resultRow.add(doc.get("fileName"));
            resultRow.add(doc.get("headline"));
            resultRow.add(doc.get("pageNumber"));
            ql.results.put(String.valueOf(i), resultRow);
            i++;
        }
    } else {
        ArrayList<String> resultRow = new ArrayList<String>();
        resultRow.add("0");
        resultRow.add("0");
        resultRow.add("0");
        resultRow.add("0");
        resultRow.add("0");
        resultRow.add("0");
        ql.results.put("0", resultRow);
    } 
```

Truncated results (last 10 of 2058 documents):

```
20021231   Iraq Belongs on the Back Burner
20021231    With Missionaries Spreading, Muslims' Anger Is Following
20021231    WHITE HOUSE CUTS ESTIMATE OF COST OF WAR WITH IRAQ
20021231    Bring Back the Draft
20040101    Pakistani Leader's New Tactic: Persuasion
20040101    What We Will Do in 2004
20040101    Ethnic Morass Bogs Down Afghan Talks On Charter
20040101    U.S. Hunts Terror Clues in Case of 2 Brothers
20040101    Giving Up Those Weapons: After Libya, Who Is Next?
20040101    An Odd Sight in Iran as Aid Team Tents Go Up: The U.S. Flag
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T22:52:34.720

问题是 NumericRangeQueries 无法正常工作。使用带有字符串值的 RangeQuery 可以解决问题。

# android - ClassDefNotFoundError in my own classes

> ID：11479833
> 
> 赞同：3
> 
> 时间：2012-07-14T00:05:14.977
> 
> 标签：android, noclassdeffounderror, android-2.3-gingerbread

I developed the project in Eclipse, then moved to IntelliJ IDEA CE 12, then moved back to the Eclipse. IDEA had converted it to eclipse project not correctly, so I imported project from existing source and added line

```
<nature>com.android.ide.eclipse.adt.AndroidNature</nature> 
```

to the section. Ok, it compiles successfully, but generates a lot of strange errors for the classes written by me and then crashes.

LogCat output:

```
E/dalvikvm( 9673): Could not find class 'com.capsule.launcher.views.Screen', referenced from method com.capsule.launcher.views.Workspace$1.onPageSelected
W/dalvikvm( 9673): VFY: unable to resolve check-cast 458 (Lcom/capsule/launcher/views/Screen;) in Lcom/capsule/launcher/views/Workspace$1;
D/dalvikvm( 9673): VFY: replacing opcode 0x1f at 0x0010
W/dalvikvm( 9673): Unable to resolve superclass of Lcom/capsule/launcher/views/CellLayout; (346)
W/dalvikvm( 9673): Link of class 'Lcom/capsule/launcher/views/CellLayout;' failed
W/dalvikvm( 9673): Unable to resolve superclass of Lcom/capsule/launcher/views/DockBar; (455)
W/dalvikvm( 9673): Link of class 'Lcom/capsule/launcher/views/DockBar;' failed
W/dalvikvm( 9673): VFY: unable to find class referenced in signature (Lcom/capsule/launcher/views/DockBar;)
W/dalvikvm( 9673): Unable to resolve superclass of Lcom/capsule/launcher/views/CellLayout; (346)
W/dalvikvm( 9673): Link of class 'Lcom/capsule/launcher/views/CellLayout;' failed
W/dalvikvm( 9673): Unable to resolve superclass of Lcom/capsule/launcher/views/DockBar; (455)
W/dalvikvm( 9673): Link of class 'Lcom/capsule/launcher/views/DockBar;' failed
E/dalvikvm( 9673): Could not find class 'com.capsule.launcher.views.DockBar', referenced from method com.capsule.launcher.views.WorkspaceHolder.onLayout
W/dalvikvm( 9673): VFY: unable to resolve instanceof 456 (Lcom/capsule/launcher/views/DockBar;) in Lcom/capsule/launcher/views/WorkspaceHolder;
D/dalvikvm( 9673): VFY: replacing opcode 0x20 at 0x001b
D/AndroidRuntime( 9673): Shutting down VM
W/dalvikvm( 9673): threadid=1: thread exiting with uncaught exception (group=0x40d6e300)
E/AndroidRuntime( 9673): FATAL EXCEPTION: main
E/AndroidRuntime( 9673): java.lang.NoClassDefFoundError: com.capsule.launcher.views.DockBar
E/AndroidRuntime( 9673):    at com.capsule.launcher.LauncherActivity.createWorkspace(LauncherActivity.java:116)
E/AndroidRuntime( 9673):    at com.capsule.launcher.LauncherActivity.onCreate(LauncherActivity.java:58)
E/AndroidRuntime( 9673):    at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime( 9673):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime( 9673):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
E/AndroidRuntime( 9673):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime( 9673):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime( 9673):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime( 9673):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 9673):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 9673):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime( 9673):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 9673):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 9673):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime( 9673):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime( 9673):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  301):   Force finishing activity com.capsule.launcher/.LauncherActivity
D/dalvikvm( 9673): GC_CONCURRENT freed 4207K, 20% free 19381K/23943K, paused 13ms+4ms, total 52ms
W/ActivityManager(  301): Activity pause timeout for ActivityRecord{418f0cd0 com.capsule.launcher/.LauncherActivity}
D/dalvikvm(  301): GC_CONCURRENT freed 1886K, 28% free 22076K/30279K, paused 4ms+9ms, total 99ms
W/ActivityManager(  301): Activity destroy timeout for ActivityRecord{418f0cd0 com.capsule.launcher/.LauncherActivity}
D/Finsky  ( 7843): [1] 5.onFinished: Installation state replication succeeded. 
```

It worked fine in IDEA and Eclipse before!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:51:27.150

我不知道您的项目发生了什么，但请在 Eclipse 中尝试：Project--> Clean--> YourProject

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T04:41:27.907

在 Eclipse 中清理并构建您的项目。如果启动器 Activity 使用其包名正确定义，请检查 Android Manifest 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T09:32:31.210

Its not a good idea to use it like this(**manually**) rather we can export projects from IntelliJ IDEA to Eclipse in simple steps.

please follow this standard document for the above.

[http://www.jetbrains.com/idea/webhelp/exporting-intellij-idea-project-to-eclipse.html](http://www.jetbrains.com/idea/webhelp/exporting-intellij-idea-project-to-eclipse.html)

hope this will help you.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T01:28:13.443

如果您在项目中使用库，请尝试在构建路径中添加到库导出

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T09:01:38.717

如果您确实有旧的工作 eclipse 项目，则从 IntelliJ IDEA 项目复制/替换所有新代码和 jar 到它。请记住仅复制/替换代码和 jar，而不是 IntelliJ IDEA 特定的设置文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T09:25:10.610

右键单击有问题的项目并选择属性。
选择适当的 Android 版本（1.1、1.5 或 1.5 与 google api）并说好。
再次右键单击项目并选择“Android工具>修复项目属性”
修复一次导入（如果需要）
刷新项目，您应该准备好无需任何手动编辑

希望这可以帮助。

# javascript - 如何在javascript中对用户函数进行自定义回调

> ID：11479835
> 
> 赞同：2
> 
> 时间：2012-07-14T00:05:19.167
> 
> 标签：javascript, jquery, callback

在使用 jquery 等第三部分库时，我一直使用回调，但是我遇到了需要设置自己的回调的问题。以我当前的代码为例：

```
// Get All Rates
function getAllRates() {
    $('#shiplist tr.mainRow').each(function() {

        var curid = $(this).attr("id");
        var cursplit = curid.split("_");
        var shipid = cursplit[1];

        getRate(shipid);

    });

} 
```

这将遍历所有具有类“mainRow”的表行，并且每个主行的 id 为“shipment_#####”，因此对于每一行，它由 _ 拆分以获得实际的船舶 id，然后使用调用“getRate”函数，该函数使用 UPS 或 USPS api 向服务器发送 ajax 调用，以获取给定货件的费率。

这适用于 UPS，所有行立即开始加载并独立返回其费率。现在问题出在 Stamps.com，他们使用经过身份验证的肥皂对话，因此需要从第一次通话中接收验证字符串并在下一次通话中使用，依此类推。

所以基本上我需要修改上面的函数来执行“getRate()”函数并等待它完成，然后再执行下一次迭代。

有谁知道我怎么能不费吹灰之力地做到这一点？

编辑 - 澄清所提出的问题：

我想采用以下功能：

获取率（船ID）；

并像这样访问它：

getRate(shipid, function(shipList) { _Function_data_here_ });

当我定义 getRate 函数时，如何定义它以使其具有回调能力？这是如何运作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:17:23.963

我建议您一次提取所有 ID 并将它们传递给您的函数。这样，您可以轻松地单独处理第一个，然后再处理其余的。使用延迟对象，这真的很容易。

例如：

```
function extractAllIds(callback) {

    var ids = $('#shiplist tr.mainRow').map(function() {
        return this.id.split('_')[1];
    }).get();

    callback(ids);
}

function getRates(ids) {
    var first = ids.shift();

    $.ajax({data: first, ...}).done(function(response) {
        // extract the authenticator string
        for(var i = ids.length; i--; ) {
            $.ajax({data: ids[i], ...});
        }
    });
}

extractAllIds(getRates); 
```

无论如何，您都不能`$.each`等待 Ajax 调用的响应。

# interop - 保存为 2007 格式时连接字符串不起作用

> ID：11479844
> 
> 赞同：0
> 
> 时间：2012-07-14T00:07:14.883
> 
> 标签：interop, excel-2007, oledb, vb.net-2010, excel-2010

我对 OleDB & Excel 很困惑。

我有2个文件：

```
One is saved in Excel 2007
One is saved in Excel 2010 
```

这是因为某些计算机具有 2007 和其他 2010 版本的 Microsoft Excel。

在 vb.net 我使用：

```
 m_sConn1 = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source='{0}';Extended Properties='Excel 12.0;HDR=NO;IMEX=1';", file) 
```

什么时候做：

```
conn1 = New System.Data.OleDb.OleDbConnection(m_sConn1)
conn1.open() 
```

使用 save-in-2010 文件我得到 0 个错误。有了 2007 年保存的那个，我得到了

```
"External table is not in the expected format" 
```

这是两个版本的字符串连接吗？我应该改用互操作吗？（因为该文件是使用 Interop Excel 12.0 自动生成的，并且适用于 2007 年和 2010 年）。

我已经安装了 2007 Office System 驱动程序：来自[http://www.microsoft.com/en-us/download/details.aspx?id=23734的数据连接组件](http://www.microsoft.com/en-us/download/details.aspx?id=23734)

编辑：

*   如果我在 2010 年打开 2007 文件并保存它，oleDB 读取它就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:46:34.067

这是一个已经报告的错误。只有 Excel 2007 有此错误，MS 知道但从未解决。

该项目只能使用 w/excel 2007。

# java - 关于不同报价的问题

> ID：11479846
> 
> 赞同：0
> 
> 时间：2012-07-14T00:07:39.407
> 
> 标签：java, android, xml, quotes, symbols

我在java中解析xml时遇到了一些问题。在文本中找到的引用在不同的浏览器文本编码中是这样的：

```
iso-8859-1 | utf-8
(â€œ | “
â€   | ”
â€™  | ’ 
```

我试图在 xml 字符串中解析两者以显示在我的 android 应用程序中。但是，这两个符号都无法成功解析。

在解析文本之前，我被迫替换“to”和“to”（并在 php 中对它们进行编码）。

我可以知道为什么吗？XML 解析器不允许任何特殊符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:59:45.827

大多数 XML 解析器应该使您能够指定输入的编码。如果您使用的是 XMLPullParser，您可以像这样更改它：

```
parser.setInput(this.getInputStream(),"UTF-8"); 
```

如果您将 SAX 与 InputStream 一起使用，请更改 InputStream 的编码，如下所示：

```
is.setEncoding("UTF-8"); 
```

# java - 在 Java 中连接 Web 服务

> ID：11479847
> 
> 赞同：0
> 
> 时间：2012-07-14T00:07:40.127
> 
> 标签：java, android, wcf, web-services, ksoap2

我正在使用 ksoap2 连接 web 服务 - WCF。但 java 有异常：“java.io.IOException：服务器返回 HTTP 响应代码：415 用于 URL：http://localhost:2967/SAT_Service.svc”。

我的方法：

```
public static String SOAP_ACTION = "http://tempuri.org/SAT_IService/";
public static String NAMESPACE = "http://tempuri.org/";
public static String URL="http://localhost:2967/SAT_Service.svc";

public static String GetString(String name)
{
    String rs="";
    request=new SoapObject(NAMESPACE,name);

    SoapSerializationEnvelope envelope = 
    new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE transp=null;
    transp=new HttpTransportSE(URL);
    try
    {
        transp.call(SOAP_ACTION+name, envelope);
        Object rsl=envelope.getResponse();
        rs=rsl.toString();
    }catch(Exception ex)
    {
        ex.printStackTrace();
    }
    return rs;
} 
```

异常是什么意思？Java（使用 ksoap2）如何连接和调用方法 webservice 在 WCF 中有会话？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:17:17.120

在进行黑莓应用程序开发时，我曾使用 KSOAP 2 来使用 Web 服务。问题在于 WCF 服务。如果不使用 wcf 服务（.svc），如果您可以制作旧的普通 Web 服务（.amsx），它会正常工作。原因是 WCF 默认使用 SOAP 1.2，而旧的 Web 服务 (.asmx) 默认使用 SOAP 1.1。KSOAP 是一个相当古老的库，仅用于 SOAP 1.1

这是我遇到的[问题的链接](https://stackoverflow.com/questions/9799225/blackberry-consume-net-soap-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:49:40.393

HTTP 响应代码：415 用于 URL：http://localhost:2967/SAT_Service.svc 表示：

服务器拒绝为请求提供服务，因为请求的实体采用所请求方法的请求资源不支持的格式。

该 URL 不应该采用 Web 服务 URL 的格式，例如“http://server/Service.asmx”吗？

# php - 处理 QRCode 生成服务器端并存储在数据库中的库？

> ID：11479848
> 
> 赞同：1
> 
> 时间：2012-07-14T00:07:42.433
> 
> 标签：php, javascript, jquery, qr-code

我想要完成的事情：

当用户点击“生成二维码”时，javascript 将获取本地机器的日期时间并根据 MMDDYYHHMMSS 格式创建一个 md5 哈希。我想获取该哈希并让服务器根据该哈希生成一个 QRCode 并将其存储在服务器的媒体文件夹中。然而，所有 QRCode 的库都接受输入并生成没有图像资源的 QRCode 客户端，所以我无法存储它。

有人对我应该如何处理这种实现有任何答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:11:32.033

我创建了一个服务器端 PHP 库，它将生成 JPG / PNG / GIF 或您的二维码。

[https://github.com/edent/QR-Generator-PHP/](https://github.com/edent/QR-Generator-PHP/)

因此，获取哈希，将其传递给您的网络服务器。生成二维码，然后保存。

# jquery - 打开手风琴面板验证错误

> ID：11479854
> 
> 赞同：5
> 
> 时间：2012-07-14T00:09:13.960
> 
> 标签：jquery, jquery-validate, validation, jquery-ui-accordion

我正在使用 jQuery 手风琴将我的表单拆分为几个面板，并使用 jQuery 验证来检查所需的字段。只要它们在打开的面板中，就可以很好地显示已验证字段中的错误。

一个例子。假设我有树形手风琴面板，首先我有两个需要验证的表单字段。现在，如果访问者切换到面板二或三并提交表单而没有填写面板一上的必填字段，我希望第一个手风琴面板打开并显示错误。

有谁知道使这项工作的方法？

这是我今天使用的代码：

```
$(document).ready(function() {
$("#accordion").accordion({
    autoHeight: false,
    navigation: true,
});

$("#validate_form").validate({
    rules: {
        page_title: "required",
        seo_url: "required",
        AccordionField: {
            required: true
        }
    },
    ignore: [],
    messages: {
        page_title: "Please enter a page title",
        seo_url: "Please enter a valid name"
    }
 }); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T08:21:35.407

要解决您问题中的具体问题，您只需提供一个[invalidHandler](http://docs.jquery.com/Plugins/Validation/validate#toptions)回调函数，该函数调用手风琴小部件的[activate()](http://jqueryui.com/demos/accordion/#method-activate)方法即可打开第一个窗格：

```
$("#validate_form").validate({
    // your options,
    invalidHandler: function(form, validator) {
        if (validator.numberOfInvalids() > 0) {
            $("#accordion").accordion("activate", 0);
        }
    }
}); 
```

也就是说，处理一般情况（任何窗格上的无效元素）并切换到适当的窗格可能会更好。为此，我们必须从`invalidHandler`回调中获取第一个无效元素。我们可以匹配`errorClass`验证引擎使用的（`error`默认情况下），但是我们不能盲目匹配，因为该类也应用于错误消息标签。[使用:input](http://api.jquery.com/input-selector/)选择器限制结果将帮助我们。

从那里，我们可以使用[最接近的()](http://api.jquery.com/closest/)来匹配祖先的手风琴窗格，并使用[index()](http://api.jquery.com/index/)来获取它相对于其他窗格的索引，这导致我们使用以下代码：

```
$("#validate_form").validate({
    // your options,
    invalidHandler: function(form, validator) {
        if (validator.numberOfInvalids() > 0) {
            validator.showErrors();
            var index = $(":input.error").closest(".ui-accordion-content")
                                         .index(".ui-accordion-content");
            $("#accordion").accordion("activate", index);
        }
    }
}); 
```

*更新：*我们还必须`showErrors()`在我们的 中显式调用`invalidHandler`，因为这个函数首先负责用`error`类装饰无效元素，但通常只在之后调用。（来源：http: [//forum.jquery.com/topic/jquery-validate-invalidhandler-is-called-before-the-errors-are-shown-maybe-better-vice-versa](http://forum.jquery.com/topic/jquery-validate-invalidhandler-is-called-before-the-errors-are-shown-maybe-better-vice-versa)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T16:46:06.253

API 略有变化，这是一个基于未来任何人选择的答案的工作示例。请注意，`ignore`这是防止手风琴中的隐藏字段被验证器忽略所必需的。

```
$('form').validate({
    invalidHandler: function(event, validator) {
        if (validator.numberOfInvalids() > 0) {
            validator.showErrors();
            // Open accordion tab with errors
            var index = $(".has-error")
                .closest(".ui-accordion-content")
                .index(".ui-accordion-content");
            $(".accordion").accordion("option", "active", index);
        }
    },
    ignore: [],
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T18:41:50.237

对于那些使用 MVC 的人，invalidHandler 是为你创建的。当我尝试覆盖它时（来自[https://github.com/jzaefferer/jquery-validation/issues/765](https://github.com/jzaefferer/jquery-validation/issues/765)）

```
$form.off('invalid-form.validate')
                .on('invalid-form.validate', newInvalidHandler); 
```

该表单将始终提交。

我的解决方案是拉出函数并在单击提交时调用它。我还不得不拔出忽略=[]

```
function ShowPanel() {
    var validator = $("form").validate();
    if (validator.numberOfInvalids() > 0) {
        validator.showErrors();
        var index = $(".input-validation-error")
                    .closest(".ui-accordion-content")
                    .index(".ui-accordion-content");
        $("#accordion").accordion("option", "active", index);
    } 
}

$("#Save").click(function () { if (!$("form").valid()) { ShowPanel(); } });

$("form").data("validator").settings.ignore = []; 
```

# c++ - 在 C++ 中重载括号赋值

> ID：11479855
> 
> 赞同：4
> 
> 时间：2012-07-14T00:09:25.793
> 
> 标签：c++, operator-overloading, nsobject

我正在将一个 Objective-C 应用程序移植到 C++ 中，我决定创建一个类似于 NSObject 和 NSDictionary 的类。如果你不熟悉这个系统，NSObject 是一个对象，它所有对象都继承了 Obj-C 中的形式，然后它里面有一个引用计数机制。当没有更多引用时，对象会释放自己。

在我的代码中，我希望能够执行以下操作

```
CMDictionary["Key"] = Object; 
```

在内部，这存储为

```
Map<string, CMObject*> mDictionary 
```

每当一个新对象被分配给该对象时，字典必须通过调用其保留函数以及对该新对象可能已替换的任何对象调用释放来保留该对象。我的问题源于这样一个事实，即我无论如何都找不到运行代码并确定何时在赋值中使用括号，因为我不希望在编写类似的东西时调用保留函数

```
CMDicionary["key"]->StringValue(); 
```

无论如何都会这样做，还是我只需要使用 getter/setter 函数来修改我的字典

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:23:12.450

在这种情况下，您通常会执行以下操作：

```
Object const& Map::operator[](string) const;
Object& Map::operator[](string); 
```

请注意，我写`Object&`的是`Object`. 无论如何，您都可以实例化一个新对象并将其分发出去，依赖于一个`Object& Object::operator=(Object const&)`要实现的属性，然后在您的函数返回**后**`Map::operator[]`执行分配（不用担心，在大多数情况下编译器会优化它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:14:34.953

您应该重载`operator[]`以接受字符串。

[http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T00:23:55.290

考虑编写一个类似于该对象的新类`shared_ptr<CMObject*>`并在该对象内部执行保留/释放。

# c++ - 将 x-1 计算为变量然后使用它会更好吗？

> ID：11479859
> 
> 赞同：1
> 
> 时间：2012-07-14T00:09:52.673
> 
> 标签：c++, optimization

将 x-1 计算为变量然后使用它会更好吗？

我有一个 for 循环和内部（x-1）。创建新变量 y=x-1，然后在循环中使用 y，而不是在 for 循环中重新计算多次是否更好？我会省很多减法。不确定这是否是一些优化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:14:16.990

不要低估或高估编译器的能力。

先介绍一下。

查看函数优化版本的汇编语言列表。
编译器可能能够将 X-1 与另一条指令结合起来。

等到代码完全工作并且健壮后再进行优化。通常情况下，代码在优化后更难调试，您可能会浪费时间优化不经常使用的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T00:12:35.193

如果`x`在循环内没有改变，那么编译器很可能会优化它并只计算一次，所以它应该没关系。（当然，如果`x`在循环内确实发生了变化，那么不用说你应该在循环内重新计算它）。

除了优化方面，编写代码可能更重要，因此它对其他程序员（例如，维护代码的人）最有意义。如果`x-1`在循环内使用会使代码更清晰，那么几乎可以肯定的是，这样写会更好。除非循环对整体性能非常关键，否则（在我看来）最好专注于使代码更易于阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T00:13:10.587

是的，这将有助于加快您的代码。任何减少您需要执行的计算次数的事情都会提高代码的速度，尤其是当您的循环经过大量迭代时。

如果您可以只做一次，则无需一遍又一遍地做某事:)

不过，这是假设`x`在您的循环期间不会改变。如果`x`确实发生了变化，那么您需要重新计算它，因为`y`每次循环都会有所不同。

# c++ - 判断文件是否是 FTP 服务器上的目录

> ID：11479860
> 
> 赞同：1
> 
> 时间：2012-07-14T00:09:55.660
> 
> 标签：c++, c, ftp, libcurl, ftp-server

我正在编写一个使用 libcurl 与 Apache FtpServer 接口的 c++ 程序。我最初使用该`LIST`命令来获取目录的内容，但它给了我很多我没有但不得不解析任何导致大量不必要开销的方式的信息（尤其是当我使用数十万文件）。此外，我需要一个有效的时间戳，它给了我一个不包括年份的速记（因此在 1 月 1 日，与 FTP 服务器相比，我计算机上的所有文件都显得过时了）。我的解决方案是使用该`NLST`命令仅获取名称，然后使用`MDTM`. 这很棒，但后来我遇到了无法判断文件是否是目录的主要问题。

我认为最简单的方法是使用权限来查看第一个标志是否设置为`d`. FTP 似乎没有此功能。有没有一种简单的方法来判断文件名是目录还是文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:04:07.910

您可以尝试对`CWD`文件使用命令来测试它是否是目录。但是失败可能意味着没有权限，所以你需要检查错误代码。例如：

```
ftp> cd atom.xml
550 Can't change directory to atom.xml: Not a directory 
```

或者，您可以`NLST`在要测试的文件上再次使用该命令。如果它是一个普通文件，你只会得到文件名。否则，您将获得目录的内容列表。

```
ftp> nlist atom.xml
200 PORT command successful
150 Connecting to port 53912
atom.xml
226 1 matches total

ftp> mkdir foo
257 "foo" : The directory was successfully created
ftp> nlist foo
200 PORT command successful
150 Connecting to port 53928
226 0 matches total 
```

# php - 使用 ajax 处理动态内容时 PHP 循环不起作用

> ID：11479861
> 
> 赞同：0
> 
> 时间：2012-07-14T00:10:01.243
> 
> 标签：php, jquery, ajax

我最近试图让我的网站更有活力。它在很大程度上基于 php，我尝试研究使用 ajax 动态更改页面。但是，我偶然发现了通过 ajax 加载 php 循环的问题。我查找了一个使动态页面成为可能的脚本：[http ://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp](http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp)

```
switch($_GET['page'])  {
case 'page1' : $page = 'Page 1';
                break;
case 'page2' : $page = 'Page 2';
                break;
case 'page3' : $page = 'Page 3';
                break;
case 'page4' : $page = 'Page 4';
                break;
}
echo $page; 
```

例如，如果您更改

```
 case 'page1' : $page = 'Page 1'; 
```

进入一个循环

```
 case 'page1' : for ($i=0;$i<2;$i++){$page .= $i;}; 
```

它只是没有做任何事情。有任何想法吗？:)

编辑：我希望它输出给定循环通常输出的内容。在处理它时似乎存在某种冲突。发布的没有循环的代码可以按预期工作，但是当您使用 php 循环时，它将无法正常工作。

EDIT2：我已经确定问题出在循环上，所以我认为没有必要拿出我正在使用的代码。我只是在那里放了一个简单的循环作为例子。该代码基本上是遍历数据库中的数据条目并输出它们。如果有人能指出为什么这不起作用以及是否有解决方法，我会很高兴。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:21:45.673

使用[正则表达式替换](http://php.net/manual/en/function.preg-replace.php)

```
echo preg_replace('/page([0-9]+)/i', 'Page $1', $_GET['page']); 
```

`case 'page1' : for ($i=0;$i<2;$i++){$page .= $i;};`什么都不做的原因`$page`是空的。尝试

```
case 'page1' : $page = 'page'; for ($i=0;$i<2;$i++){$page .= $i;}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:04:21.583

当我将你的循环放入一个函数时：

函数 testthis()
{
for ($i=0;$i<2;$i++){$page .= $i;};
}

它抛出一个错误：“注意：未定义的变量：demo.php 中的页面”

当我在循环之外声明 $page - 只需放入以下行： $page = ""; 它有效 - 没有错误。

所以 - 我的建议 - 在循环外声明 $page 并将其设置为空字符串“”。看看是否能解决问题。

根本原因似乎是您将字符串连接到尚未声明的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:31:05.143

我不相信您可以将 for 循环用作 case 语句的值。看下面的结果：

[http://ideone.com/GXXMs](http://ideone.com/GXXMs)

在没有看到你的真实代码和知道你真正目标的情况下，我最好的建议是在输入 switch 语句**之前预处理你的循环。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T00:31:36.247

也许问题在于没有尝试在 PHP 案例中执行循环。

您似乎正在使用 $_GET['page'] 调用从 QueryString 中获取值。如果您在 URL 语法中定义了“页面”（例如：foo.php?page=page1），这将起作用。在此示例中，您从未在查询字符串中定义名为“page”的变量，而只是将 #page1 放在 URL 的末尾。这意味着您的 switch 语句中的任何情况都不会执行，因为它们与 $_GET 返回的空值不匹配。

尝试解析查询字符串以将“#”之后的任何内容放入您在 case 语句中使用的参数中。

# backbone-views - 我如何知道主干视图模板何时完成渲染？

> ID：11479864
> 
> 赞同：1
> 
> 时间：2012-07-14T00:10:27.367
> 
> 标签：backbone-views

我将 Backbone.js、Require.js 和 Underscore.js 用于单页站点。

我有一个容器视图来处理子视图的换入和换出。

对于我的一个子视图，我需要知道 HTML 模板的渲染何时完成。原因如下：我的子视图 (view_subview.html) 的 html 模板包含一个 iframe 和一个表单：

```
<iframe name="myIFrame" id="myIFrame"></iframe>

<form action="http://myendpt.com/do" method="get" id="myForm" target="myIFrame">
    <input type="hidden" name="param1" value="value1"/>
</form> 
```

通过提交表单，myendpt.com/do 将处理生成要在 iframe 中显示的内容。

我试图弄清楚事情的时间安排，以便我可以在表单加载后提交表单。

我的子视图如下所示：

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'config',
    'text!templates/view_subview.html'
], function ($, _, Backbone, Config, tpl) {
    var SubView = Backbone.View.extend({

        template: _.template(tpl),

        initialize: function () {
        },

        render: function (eventName) {
            $(this.el).html(this.template({config: Config}));
            $('#myForm').submit();
            return this;
        },
    });
    return SubView;
}); 
```

render() 中的 $('#myForm').submit() 调用实际上并没有提交表单。这大概是因为 HTML 仍在加载中，文档还没有准备好。

如果我将 $('#myForm').submit() 调用移到我的容器视图中，我可以让它工作，但我希望 SubView 拥有表单的提交。我的容器视图（和其他不相关的子视图）不需要知道或关心 SubView 中发生的事情。

在 SubView（并且仅在 SubView）中检测 HTML 已完全加载以便我可以调用提交的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:38:22.740

当你的 iframe 加载并准备好时，你为什么不触发一个事件？您的渲染函数可以绑定到该事件；仅是以下几行：

```
render: function(eventName){
    $(this.el).html(this.template({config:Config})
        .bind('formReady',function(){
             $('#myForm',this.el).submit();
        })
    return this;
} 
```

并且，只需让您的 iframe 触发 onload 事件：

```
<iframe onload='$(this).trigger('formReady');' .... > 
```

# android-fragments - 如何在 Fragments 中实现按钮

> ID：11479865
> 
> 赞同：0
> 
> 时间：2012-07-14T00:10:31.377
> 
> 标签：android-fragments

我发现一个不错的布局

[http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

我将按钮添加到 xml 片段，但我不知道如何实现按钮，我的意思是，我不知道如何为按钮工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:20:49.573

每个`Fragment`都会加载它自己的布局，并且布局本身由一些按钮组成 - 我是对的吗？

如果是这样，您可以将 s 检索`Button`到变量中。考虑以下：

```
Button myButtonOne = (Button) myView.findViewById(R.id.button_one);
myButtonOne.setOnClickListener(
    new OnClickListener() {
        @Override
        public void onClick(View view) {
             handleButtonClick(view.getId());
        }
    }
);

private void handleButtonClick(final int resourceId) {
    switch( resourceId ) {
        case R.id.button_one:
            //Do something
            break;

        case R.id.button_two:
            //Do something
            break;

        case R.id.button_three:
            //Do something
            break;

        case R.id.button_four:
            //Do something
            break;

        case R.id.button_five:
            //Do something
            break;

        default:
            break;

    }

} 
```

这样，您添加您`OnClickListener`的 s，然后通过`handleButtonClick(int)`方法（存在于类中）维护它们。

# ruby - 用于匹配整个 JavaScript 函数定义的正则表达式？

> ID：11479870
> 
> 赞同：1
> 
> 时间：2012-07-14T00:11:46.970
> 
> 标签：ruby, regex

我正在尝试扫描一个在其中定义了许多函数的 JavaScript 文档，并从文档中删除一个函数。我希望我可以在这里做一个简单的正则表达式技巧。

例子：

一些 JavaScript 文档：

```
function wanted_foo(bar) {
  ...
  ...
}
function unwanted_foo(bar) {
  ...
  inner_foo {
     ...
     ...
  }
}
function wanted_foo(bar) {
  ...
  ...
  inner_foo {
     ...
     ...
  }
} 
```

这里明显的问题是我需要匹配“ `function unwanted_foo(bar) { ... }`”形式的东西，除了我只需要匹配到函数的最后一个花括号，而不需要匹配另一个函数的下一个花括号。有没有一种简单的正则表达式方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:29:42.047

普通的正则表达式无法做到这一点，因为它们无法计算先前匹配的大括号，因此无法找到最后一个，但似乎许多实现具有超出普通正则表达式的能力，而 Ruby 就是其中之一。

Hare 提供了一些关于此的参考，尽管它可能不是您所说的简单。

1.  [将ruby中的大括号与前面的字符匹配](https://stackoverflow.com/q/5428173/422353)
2.  [反向引用](http://www.regular-expressions.info/brackets.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:38:34.110

一个“技巧”是将计数器与正则表达式一起使用。

*   将您的计数器初始化为 0
*   匹配一些形式`/^\s*function\s+\w+\(.*\)\s*\{`，当你找到这个模式时，记住位置。
*   当您匹配该模式时，增加您的计数器
*   现在根据您找到的内容单独匹配`{`并增加或减少您的计数器。`}`
*   继续这样做，直到你的计数器再次为 0，那么你应该找到了一个函数

希望这对你有用吗？

# python - 更好地使用 re 以避免重复通过

> ID：11479871
> 
> 赞同：1
> 
> 时间：2012-07-14T00:11:59.753
> 
> 标签：python, regex, functional-programming, repeat

关于如何改进这种方法的任何想法？

这个想法是继续加入连字符，但在它们单独存在时将其删除。示例输出显示

```
def de_punctuate(xs):
    reg = re.findall(r"[\w'-]+", xs)
    #the pupose of `fun` is to only remove any hyphens that stand alone.
    #i want to keep hyphens-as-joining
    fun = functools.partial(operator.ne, '-')
    return filter(fun, reg)

def no_numbers(xs):
    isa = functools.partial(operator.contains, string.digits)
    fn = lambda x: ''.join(itertools.filterfalse(isa, x))
    return list(filter(fn, xs))

for d in data:
    print(d)
    print(no_numbers(de_punctuate(d))) 
```

输出示例：

```
Turistguide fikk 40.000 kroner i bot for smugling
['Turistguide', 'fikk', 'kroner', 'i', 'bot', 'for', 'smugling']

- Må kalles opp etter Dale Oen
['Må', 'kalles', 'opp', 'etter', 'Dale', 'Oen']

Kvinne skadet i MC-ulykke ved Haugastøl
['Kvinne', 'skadet', 'i', 'MC-ulykke', 'ved', 'Haugastøl'] 
```

输出是我想要的。但我觉得改进的正则表达式会有所帮助！

我认为这看起来有点干净：

```
def de_punctuate(xs):
    return re.findall(r"[\w']+(?:-[\w']+)*", xs)

def no_numbers(xs):
    return [ x for x in xs if not re.search(r'[0-9]', x) ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:20:13.253

尝试这样的事情：

```
re.findall(r"[\w']+(?:-[\w']+)*", myString) 
```

为了

```
myString = "walk-the-dog can - i - --have -- a- -- look at your pocket-book?" 
```

这产生：

```
['walk-the-dog', 'can', 'i', 'have', 'a', 'look', 'at', 'your', 'pocket-book'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T00:22:46.483

我不怎么使用 functools，所以我把它写成一个列表理解。
一行代码一次性搜索带有数字的单独连字符和标记。

```
[x for x in your_string.split() if x != '-' and not re.search(r'[0-9]', x)] 
```

在一个包含两个数字、一个独立连字符和一个单词中间的连字符的示例中使用它。

```
>>> def foo(your_string):
...     return [x for x in your_string.split() if x != '-' and not re.search(r'[0-9]', x)]
...
>>> your_string = 'Turistguide fikk 40.000 kroner i - bot for smugling MC-ulykke'
>>> foo(your_string)
['Turistguide', 'fikk', 'kroner', 'i', 'bot', 'for', 'smugling', 'MC-ulykke'] 
```

如果您需要处理多个连字符的独立运行，`if`则可以轻松修改第一个条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:53:16.840

尝试`reg = re.findall(r"[a-zA-Z0-9']+-*[a-zA-Z0-9']*", xs)`

顺便说一句，你不需要`list()`around`filter()`调用 in `no_numbers()`。

# c++ - 动态数组的大小与提交的值不匹配

> ID：11479886
> 
> 赞同：2
> 
> 时间：2012-07-14T00:15:25.417
> 
> 标签：c++, arrays, dynamic

我正在学习动态记忆，但有些事情不太对劲。我有一个接受数字作为输入的函数，并且应该创建一个该大小的数组。

```
class Doctor {
public:
    Doctor();
    void fillOut();
    void listPatients();
    void patientReset();
    ~Doctor();
private:
    string name;
    int numPatients;
    string *patientList;
};

Doctor::Doctor() {
    name = "";
    numPatients = 0;
    patientList = new string[numPatients];
} 
```

（第三个代码块中最相关的代码）。

```
void Doctor::fillOut() 
{
    string buffer = "";
    string buffer2 = "";
    size_t found;
    bool valid = false;
    int numP = 0;
    int tester = 0;
    bool validNum = false;

    while(!valid) 
    {
        cout << "Enter doctor name: ";
        getline(cin, buffer);
        found = buffer.find_first_of("1234567890!@#$%^&*()-=_+/<>?;':][");
        if(string::npos == found) 
        {
            name = buffer;
            valid = true;
        }
    }

    while (!validNum) 
    {
        cout << "\nEnter number of patients: ";
        buffer = "";
        getline(cin, buffer);
        buffer2 = buffer;
        stringstream ss(buffer);
        if(ss >> tester) 
        {
            stringstream ss2(buffer2);
            ss2 >> numP;
            validNum = true;
        }
        else 
        {
            cout << "Not a number. Please try again." << endl;
        }
    }

    patientList = new string[numP];
    cout << patientList->size() << endl;
    for(int i = 0; i < (numP + 0); i++) 
    {
        valid = false;
        while(!valid) 
        {
            cout << "\nEnter patient " << (i + 1) << ": ";
            getline(cin,buffer);
            found = buffer.find_first_of("1234567890!@#$%^&*()-=_+,./<>?;':][");
            if(string::npos == found) 
            {
                *(patientList + i - 0) = buffer;
                //patientList[i-1] = buffer;
                valid = true;
            }
            else 
            {
                valid = false;
            }
        }
    }
} 
```

然后我尝试显示列表的内容。

```
void Doctor::listPatients() 
{
    cout << "size: " << patientList->size() << endl;
    cout << "\nDoctor: " << name << endl;
    for(int i = 0; i < (patientList->size() - 1); i++) 
    {
        cout << "Patient " << (i+1) << ": " << patientList[i] << endl;
    }
    cout << "end patients" << endl;
} 
```

但由于某种原因，我提交的大小不是数组的大小。例如，在`fillOut()`我有函数输出大小。它每次输出大小为0。然后在 中`listPatients()`，我有一些东西可以再次打印尺寸，以验证我做对了。如果我最初输入 3，它在此函数中输出 5。

我完全迷惑了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T00:36:42.430

该行`patientList->size()`等效于，数组`patientList[0].size()`中初始字符串的长度。`patientList`在您刚刚分配数组时，结果始终为零；在其他情况下，它是第一个字符串的长度。

在 C++ 中制作容器的首选方法是`std::vector`或`std::array`。在您的情况下使用`std::vector`更合适，因为您的代码是`patientList`动态分配的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T00:24:06.153

好的，我发现了你的问题。您正在声明一个字符串数组。但是原始数组实际上只是指向数组内容的指针。当您调用 ->size 时，它​​会取消引用该指针，该指针指向数组中的第一个字符串并告诉您该字符串的大小。

如果您想要一个实际知道其大小的数组，请使用 std::array。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T00:38:10.857

好的，所以您将 patientList 声明为 string* 但是当您对此调用 size() 时，实际上是在您创建的数组中的第一项上调用它。编译代码的唯一原因是因为 string 具有 size() 函数，并且由于这是数组中包含的类型，因此您可以摆脱它，因为 patientList 实际上指向数组开头的项目（字符串）。通常，数组没有 size() 函数。

您将遇到的另一个问题是在您的循环中

```
for(int i = 0; i < (patientList->size() - 1); i++) {
                 ^
                 ^  
    cout << "Patient " << (i+1) << ": " << patientList[i] << endl;
} 
```

这将导致您的循环在 PatientList结束*之前终止一个。*你应该使用

```
for(int i = 0; i < patientList->size(); i++) {                                      
    cout << "Patient " << (i+1) << ": " << patientList[i] << endl;
} 
```

你最好在这里使用 std::vector 来放入你的字符串。在这里也要小心

```
 if(string::npos == found) {
        *(patientList + i - 0) = buffer;
        //patientList[i-1] = buffer;
        valid = true;
    }
    else {
        valid = false;
    } 
```

因为你只会在你的 if 语句为真的情况下分配给你的数组 - 当它为假时数组中的索引未初始化。老实说，我会从头开始并使用字符串向量。

# html - .htaccess 隐藏带有相对链接问题的 index.php

> ID：11479888
> 
> 赞同：2
> 
> 时间：2012-07-14T00:15:37.317
> 
> 标签：html, apache, .htaccess, codeigniter

这些天我正在尝试使用 CodeIgniter。

默认情况下，它在 URI 中有 index.php，如下所示

```
http://www.example.com/index.php/home 
```

`home`是控制器内部的一个函数

但我不想要，`index.php`所以我创建了 .htaccess 文件：

```
Allow from all
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond $1 !^(index\.php|img|robots\.txt|script|css)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

基本上它会自动添加“index.php”，除非条件匹配。

然而事情是这样的：
对于这样的URI：`http://www.example.com/home`
一切正常。

对于这样的 URI：`http://www.example.com/home/`
然后我网页中的相对链接变得疯狂。
例如： `css/common.css`被重定向到`index.php/home/css/common.css`导致找不到css文件。

日志是这样的：

```
strip per-dir prefix: [dir to my site]/home/css/common.css -> home/css/common.css
applying pattern '^(.*)$' to uri 'home/css/common.css'
rewrite 'home/css/common.css' -> 'index.php/home/css/common.css'
add per-dir prefix: index.php/home/css/common.css -> [dir to my site]/index.php/home/css/common.css
trying to replace prefix [dir to my site]/ with /
internal redirect with /index.php/home/css/common.css [INTERNAL REDIRECT]
add path info postfix: [dir to my site]/index.php -> [dir to my site]/index.php/home/css/common.css
strip per-dir prefix: [dir to my site]/index.php/home/css/common.css -> index.php/home/css/common.css
applying pattern '^(.*)$' to uri 'index.php/home/css/common.css'
pass through [dir to my site]/index.php 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:43:49.767

这里的问题不是你的重写规则——它们很好。发生的事情是浏览器认为`/home/`末尾带有斜杠的是一个真实的目录，因此它将所有相对链接添加到它认为它所在的目录的前缀。然后浏览器用 path 冲出对 CSS 文件的请求`/home/css/common.css`，这很自然, 被重写，因为它与您的支票不匹配。

我在这里看到的最快的解决方案是对 CSS 文件使用绝对路径。只需将它们链接为`/css/common.css`而不是您现在拥有的相对链接。

# php - PHP 中的 _SERVER 和 _POST

> ID：11479890
> 
> 赞同：0
> 
> 时间：2012-07-14T00:16:28.830
> 
> 标签：php

我是 PHP 编程新手，对 _SERVER 不太了解。_SERVER 关联数组可以在 PHP 程序中用于访问通过 post 方法从 HTML 表单提交的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:18:32.533

不，你想要 $_POST 。

$_POST 让你发布数据

$_GET 让你得到数据

$_REQUEST 让您获得、发布和 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:23:11.453

当您提交表单时，您可以使用 $_SERVER[] 从服务器获取信息，例如用户 IP 地址。提交表单后，您将使用它。您将使用 $_POST[] 来确保表单已提交并从已提交的表单中收集数据/变量。例如：

```
if(isset($_POST['submit'])) {
  $fname = $_POST['fname']; //<input type="text" name="fname" />
  $ip = $_SERVER['REMOTE_ADDR'];
  mysql_query("INSERT INTO ... using variables $fname and $ip...") or die("Error: " . mysql_error());
  header("location:?e=1"); //where you would use $_GET[] to tell the page an error message needs to be shown on screen.
  exit;
} 
```

# vba - 在我检查 VBA 中的重复项之前对 URL 进行排序

> ID：11479891
> 
> 赞同：0
> 
> 时间：2012-07-14T00:16:30.920
> 
> 标签：vba, sorting, excel, filter

我正在尝试使用 VBA 运行一些过滤器，然后将数据输出到“分析”表。

到目前为止一切正常 - 但我现在正试图消除 URL 重复。

`If unique_1 <> Sheets(1).Cells(x, 11) Then`

上面的代码片段将消除重复项，但前提是我已经按 URLS 排序（这不是我可以预先处理数据的事情）

我希望我可以使用 VBA 进行排序，但到目前为止还没有做到，我的眼睛正在杀死我。任何帮助，将不胜感激！

在此先感谢您的帮助！

```
If Sheets(1).Cells(x, 12) = "X URL" Then
        If Sheets(1).Cells(x, 9) > 4 And Sheets(1).Cells(x, 9) < 10 Then               
            '//NEED TO SORT URLS HERE FIRST - BEFORE I CAN FIND DUPES//                
            If unique_1 <> Sheets(1).Cells(x, 11) Then
                O_2 = O_2 + 1
            End If
               unique_1 = Sheets(1).Cells(x, 11)
        End If
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:36:46.053

`Range.Sort`在您尝试[排序](http://msdn.microsoft.com/en-us/library/bb238871%28v=office.12%29.aspx)的任何范围内使用

作为旁注，您列出的代码中似乎没有任何内容可以删除重复项。最多，它计算有多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:58:57.097

除非我误读了这个问题，否则为什么不对唯一条目使用自动过滤器？这将在您指定的列中输出一个列表，以便您查看发生了什么。

```
 Range("URL Range").AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range( _
        "Output Range"), Unique:=True 
```

# facebook - FB.api 同时发布到多个 id

> ID：11479892
> 
> 赞同：-2
> 
> 时间：2012-07-14T00:16:49.603
> 
> 标签：facebook, api

我这里有点麻烦。我一点都不擅长`javascript`。

问题是我正在尝试`Facebook`使用`FB.api`. 但是，它只有在一次只有一个朋友的情况下才有效。

这是我的代码：

```
 FB.api({ method: 'friends.get' }, function(result) { 
   var user_ids="" ;
   var totalFriends = result.length;
   var randNo = Math.floor(Math.random() * totalFriends);
   var numFriends = result ? Math.min(1,totalFriends) : 1;
   if (numFriends > 0) {
   for (var i=0; i<numFriends; i++) { 
        user_ids+= (',' + result[randNo]);
        randNo ++;
        if(randNo >= totalFriends){
            randNo = 0;
        } 
      }
    }

   FB.api(user_ids + '/feed', 'post', { message: txt2send },function(response) {
   if (!response || response.error) {
    alert('Error occured');
   } else {
  alert('Post ID: ' + response.id);
  }
 });
  }); 
```

的输出`user_ids`如下所示：,10083461349,100082391,19293822

希望你能帮我解决这个问题。请不要向我提供任何帮助链接，相信我，我已经尝试了一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:38:23.817

> 希望你能帮我解决这个问题。请不要向我提供任何帮助链接，相信我，我已经尝试了一切。

好，当然。但是，您并没有坚持文档所说的内容，而是尝试发明自己的“语法”——您真的认为这很有帮助……？

访问 Graph API 通常通过向`/someid/someendpoint/`.

但是*您*正在尝试的是（最终）提出请求

> /,10083461349,100082391,19293822/饲料

——这完全是一派胡言。您只是**无法**访问一次列出多个 id 的 Graph API。

如果您想发布到多个用户的订阅源，您必须为这些用户中的*每一位进行**一次*API 调用。

# css - 限制 webkit-overflow-scrolling

> ID：11479897
> 
> 赞同：3
> 
> 时间：2012-07-14T00:17:34.510
> 
> 标签：css, mobile-webkit

我有一个`div`需要水平滚动的。没有 ，这可以正常工作`-webkit-overflow-scrolling`，但我没有在 iPhone 上获得原生弹跳。它只按我的意愿水平滚动，而不是垂直滚动。

当我添加 CSS 属性并将其设置为 时`touch`，它会按预期水平滚动。但是，它也会垂直滚动。问题是，看起来可滚动区域与可视区域相同——即，内容在每个方向上反弹，但没有内容应该使其滚动。我可以将此滚动限制为仅水平滚动吗？

注意：`overflow-y`设置为`hidden`，并且`overflow-x`是`scroll`。我已经在网络检查器中验证了所有元素的高度都是 100px，所以我不相信有任何元素会导致滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T05:06:21.297

您是否尝试过这段代码。这将启用滚动。

```
overflow: auto;
-webkit-overflow-scrolling: touch; 
```

或者

```
overflow: auto;
-webkit-overflow-scrolling: auto; 
```

现在你应该可以滚动了。如果这不是您要寻找的内容，请附上示例页面。

# java - Java - 完成程序的另外 1 个步骤（作业）

> ID：11479899
> 
> 赞同：1
> 
> 时间：2012-07-14T00:18:30.757
> 
> 标签：java

我的最后一步是获取总和的整数百分比。所以如果我输入：2 1 1 2 输出应该是：2，也就是总和的 33.333%。1，占总和的 16.666%。1，占总和的 16.666%。2，占总和的 33.333%。

由于我对数组很陌生，所以我非常困惑。我不明白如何获得百分比，因为用户可以输入任意数量的整数。如果只有 2 个整数，就说 2 和 2，它们每个都是 50%

```
import java.util.Scanner;
   public class Integers {
   /* program 7-1*/
      public static void main(String[] args) 
      {
         Scanner keyboard = new Scanner(System.in);
         System.out.println("How many numbers will you enter?");
         int size = keyboard.nextInt();
         int[] entry = new int[size];

         System.out.println("Enter " + entry.length + " integers, one per line:");

         int sum = 0;
         for (int index = 0; index < entry.length; index++)
         {
            entry[index] = keyboard.nextInt();
            sum +=  size;
         }

         System.out.println("The sum is " + sum + "." + "\nThe numbers are:" );         
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:24:12.987

现在您已经有了所有条目和总和，您几乎就在那里：

*   您需要另一个循环来一次遍历一个条目
*   要计算百分比，请将条目乘以`100.0`，然后除以`sum`。请注意末尾的点零`100.0`- 它是故意存在的
*   如果您使用的是 Java 5 或更高版本，打印数字后跟百分号的一种非常方便的方法是[`printf`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29). 但是请注意，百分号`%`需要*转义*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:25:41.613

你得到什么答案是不正确的？这就是令人费解的地方。我查看了您的代码，但没有看到任何除法、百分比计算或输出。

我编译并运行了你的代码。这是我得到的输出。到现在为止还挺好。怎么了？你有什么问题？

```
"C:\Program Files\Java\jdk1.7.0_02\bin\java" -Didea.launcher.port=7533 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 120.11\bin" com.intellij.rt.execution.application.AppMain cruft.Integers
How many numbers will you enter?

4
Enter 4 integers, one per line:
2
1
1
2
The sum is 16.
The numbers are:

Process finished with exit code 0 
```

写更多的代码。小心记住整数除法不是你想要的。百分比需要加倍。

```
int x = 1/2;  // x will equal zero.  know why? 
```

您已经计算了总和。您知道，如果您输入十个数字，无论它们有多少或它们的值是多少，每个数字所代表的总和的百分比是该数字除以总和。你问的是这个吗？

1小时后：

整整一个小时，你似乎认为写评论比实际写你需要的四行代码更有教育意义。好吧，我会咬 - 这是你的解决方案。我会冒着激怒所有会被做作业的人激怒的人的风险。我想让你看看你甚至不会尝试*四行代码*是多么荒谬：

```
import java.util.Scanner;

public class Integers {

    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.println("How many numbers will you enter?");
        int size = keyboard.nextInt();
        int[] entry = new int[size];
        System.out.println("Enter " + entry.length + " integers, one per line:");
        int sum = 0;
        for (int index = 0; index < entry.length; index++) {
            entry[index] = keyboard.nextInt();
            sum += entry[index];  // this was wrong - I fixed it.
        }
        // This is all you had to do. 
        for (int anEntry : entry) {
            System.out.println(String.format("value: %d %6.2f%%", anEntry, anEntry * 100.0 / sum));
        }
        System.out.println(String.format("total: %d %6.2f%%", sum, 100.0));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:23:43.293

由于这不是家庭作业，因此我不会给您答案，而是给您一种您可以想出实施的方法（并从中学习:-D）

创建两个用户输入长度的数组，一个计数器用于第二个。第一个数组将是您当前拥有的数组。第二个将存储唯一值，计数器将表示该数组中有多少个唯一值。当用户输入一个值时，检查它是否在当前数组中，如果没有，则将其添加到唯一并递增计数器。然后在执行计算的程序结束时遍历唯一数组。

- 干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T00:46:29.417

如果您有未知数量的整数，用 ' ' 空格分隔，您可以将它们作为字符串输入并使用 String.split 函数 - 您可以在[http://docs.oracle.com/javase/1.5 找到文档。 0/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split(java.lang.String) ) - 这将为您提供一个尽可能大的数组，其长度存储在数组。

# oop - 实例变量是新的全局变量吗？

> ID：11479902
> 
> 赞同：6
> 
> 时间：2012-07-14T00:20:06.480
> 
> 标签：oop

最近我感觉实例变量和全局变量有同样的问题，我用谷歌搜索了一下，发现[这篇旧文章](http://blog.lab49.com/archives/172)或多或少地描述了我看到的潜在问题。

您使用什么好的做法来避免全局变量的相同问题影响实例变量或类变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:28:09.583

类比全局结构小得多，因此实例变量的影响要小得多。通过保持较小的班级规模并严格遵守单一职责原则，可以避免全局变量的大部分缺点。如果实例变量是从传入的参数创建的，那么我经常在构造函数中使该参数成为必需的，从而显式地显示依赖关系。实例变量也被很好地封装，永远不会在实例的方法之外直接修改，这使得很容易确定实例变量的修改位置。最后，实例变量必须对整个类有意义或必须是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:24:55.307

实例变量只能在特定类中访问。因此，为了防止实例变量被过度使用，请保持小类。如果一个类变大，决定它的某些部分是否可以重构为另一个更小的类，原始类使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:32:55.477

实例变量、全局变量或任何类型的变量都没有“问题”……它们都是工具。问题是有时很多程序员选择使用“错误的工具”。你必须仔细考虑你的选择意味着什么，这样你才能做出正确的选择。

为某事使用全局变量，例如 CurrentUserName... 意味着您说他 CurrentUserName 是众所周知的。并且每次“只能有一个” CurrentUserName 。如果您想允许用户同时登录，那可能是错误的（除非您真的很幸运，并且两个用户的名字相同）...

实例变量的一个真正错误使用是如果您将用户的电子邮件地址作为实例变量，然后您会意识到每个用户可以有多个电子邮件地址。

我还会举一个继承的例子，因为我认为它会更清楚：一个与继承相关的问题是，例如，如果你正在对典型的学生、教师问题进行建模，并且你尝试让 Student 成为 Person 的子类和教师 Person 的子类。然后你意识到有些人可能两者兼而有之……

从 Person 继承的 Student 是一种静态关系，在运行时无法更改。而且学生和老师不是静态的关系......一个人可以两者都不是，然后开始成为学生，然后开始成为老师，然后停止成为两者，但它始终是同一个人，并且那个型号处理不了。。。。

回到用户，该用户与多个电子邮件帐户“关联”...如果您放置一个实例变量，则说明他只是与单个电子邮件帐户“关联”，而您与您的问题域，这就是为什么你会有问题......

如果您说只有一个全球已知的当前用户名，这同样适用....

在所有情况下，问题都是您有一个问题域，并且您对其建模是错误的……您必须使您的程序和模型的行为与问题域相似……如果您不这样做，您将遇到问题，无论您选择哪种工具来解决您的问题。

顺便说一句：我也认为拥有电子邮件地址列表的用户是错误的，但这是出于完全不同的动机。我实际上会使用

```
class ContactInformation
{
    User contact;
    EMailAddress email;
} 
```

并记住对象不“拥有”或“拥有”其他对象......这是一个实现决定......对象只是“知道”其他对象......

# command-line - 如何在一行中编写多个环境环境变量？

> ID：11479904
> 
> 赞同：0
> 
> 时间：2012-07-14T00:20:38.900
> 
> 标签：command-line, capistrano

我正在使用 capistrano 将代码部署到我的主机。如果我想运行`cap roll HOSTS=server1, server2, ...`，我在服务器名称之间使用什么分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:10:11.000

你说得对，就是逗号。空格是你的问题。尝试引用：

```
cap roll HOSTS="server1, server2, server3" 
```

或者只是不使用空格，并且您不需要引用。

```
cap roll HOSTS=server1,server2,server3 
```

或者，如果您要部署到的一组服务器被定义为一个角色（它可能应该是），您可以使用 ROLES 环境变量。

```
cap roll ROLES=myrole 
```

或者，如果您想一次调用多个角色，也可以以与 HOSTS 变量相同的样式指定它们：

```
cap roll ROLES=myrole1,myrole2,myrole3 
```

（假设你在这里使用 Bash——我从来没有从另一个 shell 运行 cap，所以如果你使用像 windows shell 这样不寻常的东西，这可能不适用）

# php - php 到 mySQL 提交按钮有效，后端无效

> ID：11479907
> 
> 赞同：0
> 
> 时间：2012-07-14T00:21:21.400
> 
> 标签：php, mysql, ajax, forms, submit

所以我的问题是页面的美感一直有效，直到您点击提交按钮（它有效，因为有一个加载图像设置为在通过 jquery.contact.js 单击按钮后出现）。但是，它停留在加载图像处，不会返回一条消息说提交成功，也不会 PUT 到我的数据库中，也不会发送确认电子邮件（忽略）。

我想知道出了什么问题以及如何解决它，如果可能的话，请一对一完成，以便我可以快速完成？

这是脚本：

索引.php

```
<div id="contact">
        <h1>Contact us</h1>
          <form id="ContactForm" action="">
            <p>
                <label>Name</label>
                <input id="name" name="name" class="inplaceError" maxlength="120" type="text" autocomplete="off"/>
                <span class="error" style="display:none;"></span>
            </p>
            <p>
                <label>Email</label>
                <input id="email" name="email" class="inplaceError" maxlength="120" type="text" autocomplete="off"/>
                <span class="error" style="display:none;"></span>
            </p>
            <p>
                <label>Phone Number<span>(optional)</span></label>
                <input id="phone" name="phone" class="inplaceError" maxlength="120" type="text" autocomplete="off"/>
            </p>
            <p class="submit">
                <input id="send" type="button" name= "submit" value="Submit"/>
                <span id="loader" class="loader" style="display:none;"></span>
                <span id="success_message" class="success"></span>
            </p>
            <input id="newcontact" name="newcontact" type="hidden" value="1"></input>
        </form>
    </div>
    <div class="envelope">
        <img id="envelope" src="images/envelope.png" alt="envelope" width="246" height="175" style="display:none;"/>
    </div>
    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="javascript/jquery.contact.js" type="text/javascript"></script> 
```

联系方式.php

```
ini_set('display_errors', 1); error_reporting(E_ALL);

require_once("db.php");                 /* Database Class */
require_once('utils/is_email.php');     /* Email Validation Script */

/* Handle Ajax Request */
if(isset($_POST['newcontact'])){
$contact = new Contact();
unset($contact);
}
else{
header('Location: /');
}

/* Class Contact */
class Contact{

private $db;                        /* the database obj */

private $errors         = array();  /* holds error messages */
private $num_errors;                /* number of errors in submitted form */

public function __construct(){
    $this->db = new DB();
    if(isset($_POST['submit']))
        $this->processNewMessage();
    else
        header("Location: /");
}

public function processNewMessage(){

    $email      = $_POST['email'];
    $name       = $_POST['name'];
    $phone      = $_POST['phone'];

    /* Server Side Data Validation */

    /* Email Validation */
    if(!$email || mb_strlen($email = trim($email)) == 0)
        $this->setError('email','required field');
    else{
        if(!is_email($email))
            $this->setError('email', 'invalid email');
        else if(mb_strlen($email) > 120)
            $this->setError('email', 'too long! 120');
    }

    /* Name Validation */
    if(!$name || mb_strlen($name = trim($name)) == 0)
        $this->setError('name', 'required field');
    else if(mb_strlen(trim($name)) > 120)
        $this->setError('name', 'too long! 120 characters');

    /* Website Validation */
    if(!mb_eregi("^[a-zA-Z0-9-#_.+!*'(),/&:;=?@]*$", $phone))
        $this->setError('phone', 'invalid website');    
    elseif(mb_strlen(trim($phone)) > 40)
        $this->setError('phone', 'too long! max 40 characters');

    /* Errors exist */
    if($this->countErrors() > 0){
        $json = array(
            'result' => -1, 
            'errors' => array(
                            array('name' => 'email'     ,'value' => $this->error_value('email')),
                            array('name' => 'name'      ,'value' => $this->error_value('name')),
                            array('name' => 'phone'     ,'value' => $this->error_value('phone')),
                        )
            );              
        $encoded = json_encode($json);
        echo $encoded;
        unset($encoded);
    }
    /* No errors, insert in db*/
    else{
        if(($ret = $this->db->dbNewMessage($email, $name, $website, $message)) > 0){
            $json = array('result'      => 1); 
            if(SEND_EMAIL)
                $this->sendEmail($email,$name,$phone);
        }   
        else
            $json = array('result'      => -1); /* something went wrong in database insertion  */
        $encoded = json_encode($json);
        echo $encoded;
        unset($encoded);
    }
}

public function sendEmail($email,$name,$website,$message){
    /* Just format the email text the way you want ... */
    $message_body       = "Hello from www.masterplanme.com, ".$name."! \n (".$email." - ".$phone.") \n You are receiving this message because you have recently completed a contact fcrm with us. We will let you know of any updates to come in the near future. Thank you! \n \n \n DO NOT REPLY.";
    $headers            = "From Quantum Leap";

    return mail($email,MESSAGE_SUBJECT,$message_body,$headers);
}

public function setError($field, $errmsg){
    $this->errors[$field]   = $errmsg;
    $this->num_errors       = count($this->errors);
}

public function error_value($field){
    if(array_key_exists($field,$this->errors))
        return $this->errors[$field];
    else
        return 'ERROR';
}

public function countErrors(){
    return $this->num_errors;
}
}; 
```

数据库.php

```
require_once("config.php"); /* Configuration File */

class DB{

private $link;

public function __construct(){
    $this->link = mysqli_connect(DB_SERVER, DB_USER, DB_PASS,DB_NAME) OR die('Could not connect to MySQL: '.mysqli_connect_error()); 
}

public function __destruct() {
    mysqli_close($this->link);
}

public function dbNewMessage($email,$name,$website,$message){
    $email      = mysqli_real_escape_string($this->link,$email);
    $name       = mysqli_real_escape_string($this->link,$name);
    $phone      = mysqli_real_escape_string($this->link,$phone);

    mysqli_autocommit($this->link,FALSE);

    $query = "INSERT INTO CONTACT(pk_contact,name,email,phone) 
              VALUES('NULL','$name','$email','$phone')";
    mysqli_query($this->link,$query);

    if(mysqli_errno($this->link))
        return -1;
    else{
        mysqli_commit($this->link);
        return 1;
    }
}   
}; 
```

jquery.contact.js

```
$(document).ready(function() {
contact.initEventHandlers();
});
var contact = {
initEventHandlers   : function() {
    /* clicking the submit form */
    $('#send').bind('click',function(event){
        $('#loader').show();
        setTimeout('contact.ContactFormSubmit()',500);
    });
    /* remove messages when user wants to correct (focus on the input) */
    $('.inplaceError',$('#ContactForm')).bind('focus',function(){
        var $this       = $(this);
        var $error_elem = $this.next();
        if($error_elem.length)
            $error_elem.fadeOut(function(){$(this).empty()});
        $('#success_message').empty();  
    });
    /* user presses enter - submits form */
    $('#ContactForm input,#ContactForm textarea').keypress(function (e) {
        if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  
            $("#send").click();
            return false;  
        } 
        else  
            return true;  
    });
},
ContactFormSubmit   : function() {
    $.ajax({
           type     : 'POST',
           url      : 'php/contact.php?ts='+new Date().getTime(),
           dataType : 'json',
           data     : $('#ContactForm').serialize(),
           success  : function(data,textStatus){
                          //hide the ajax loader
                          $('#loader').hide();
                          if(data.result == '1'){
                              //show success message
                              $('#success_message').empty().html('Done!');
                              //reset all form fields
                              $('#ContactForm')[0].reset(); 
                              //envelope animation
                              $('#envelope').stop().show().animate({'marginTop':'-175px','marginLeft':'-246px','width':'492px','height':'350px','opacity':'0'},function(){
                                  $(this).css({'width':'246px','height':'175px','margin-left':'-123px','margin-top':'-88px','opacity':'1','display':'none'});
                              });
                          }
                          else if(data.result == '-1'){
                              for(var i=0; i < data.errors.length; ++i ){
                                  if(data.errors[i].value!='')
                                      $("#"+data.errors[i].name).next().html('<span>'+data.errors[i].value+'</span>').fadeIn();
                              }
                          }                       
                      },
           error    : function(data,textStatus){}
    });
}  
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T16:55:24.897

棘手的问题...我自己也遇到过。问题不在编程方面；在 PHP 环境的版本上。

该代码在 PHP 5.4.12 和 Apache 2.4.4 上完美运行。并且在 PHP 5.3.27 和 Apahe 2.2.25 上没有将“结果”识别为属性，因为没有价值。完全相同的代码！奇怪，但真实...

所以......我不认为，在语言方面，任何人都可以帮助你/我们。干杯!

PS - 这是葡萄牙语的错误，由 IE 浏览器返回（在更高版本的环境中使用的相同！），一旦您提交联系表格：

'================================================== ======================

Agente do Utilizador：Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.0；Win64；x64；Trident/5.0；.NET CLR 2.0.50727；SLCC1；Media Center PC 5.0；.NET CLR 3.5.30729；.NET CLR 3.0 .30729；.NET4.0C；.NET4.0E) Carimbo de data/hora：2013 年 9 月 25 日星期三 16:45:12 UTC

Mensagem: Não é possível obter o valor da propriedade 'result': o objecto é nulo ou não definido Linha: 40 Caráct: 10 Código: 0 URL: .../jquery.contact.js '======== ==================================================== =============

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:40:34.127

此代码似乎源自[http://tympanus.net/codrops/2010/03/12/php-mysql-contact-form-with-jquery/](http://tympanus.net/codrops/2010/03/12/php-mysql-contact-form-with-jquery/)上的“PHP/MySQL Contact Form with jQuery”演示，效果很好对我来说“开箱即用”。

由于您没有提及配置，我猜您也没有编辑 config.php 以反映您自己的数据库：

```
define('DB_SERVER'          , 'localhost');
define('DB_USER'            , 'root');
define('DB_PASS'            , '');
define('DB_NAME'            , 'ContactForm'); 
```

或者，您可能忘记将 SEND_EMAIL 从 false 更改为 true

```
define('SEND_EMAIL', true); 
```

# ruby - 在 Sinatra 应用程序中过滤模型之前

> ID：11479909
> 
> 赞同：0
> 
> 时间：2012-07-14T00:21:26.180
> 
> 标签：ruby, activerecord, sinatra

我正在使用 Sinatra，并将我的应用程序组织成模型、视图和路由（如[这里](https://stackoverflow.com/a/5030173/924643)建议的那样）。

我遇到了一些关于使用 before 过滤器和路由的指南（例如[Sinatra Book ）。](http://sinatra-book.gittr.com/#filters)有什么方法可以在模型过滤器之前使用吗？

如果有帮助，我正在使用 Sinatra ActiveRecord 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:29:39.670

ActiveRecord 具有开箱即用的前置过滤器。它支持`before_save`, `after_save`, `before_create`, `after_create`, 甚至`before_validation`和`after_validation`。

在这里查看详细说明：[http ://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# c++ - 无法使用基类的方法

> ID：11479915
> 
> 赞同：0
> 
> 时间：2012-07-14T00:22:46.367
> 
> 标签：c++, class, inheritance, methods

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:32:52.740

Either:

```
class Derived : public Base {
public:
    using Base::getTwo; // Add this line
    int getValue() {
        // no matching function for call to ‘Derived::getTwo()’
        return getTwo();
    }
    int getTwo(int) {
        return 2;
    }
} 
```

Or

```
 return Base::getTwo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:00:43.277

This is how the name lookup in C++ works:

```
namespace N1
{
    int getTwo();
    int getTwo(int, int);

    namespace N2
    {
        int getTwo(int);

        namespace N3
        {
            call getTwo(something char*);
        }
    }
} 
```

The current context is N3\. There is no `getTwo` on this layer. Ok, go to the upper layer. N2 contains one definition for `getTwo`. Compiler will try to use this definition and will not seach the upper context. The `getTwo` from N2 hides all definitions for `getTwo` on all upper layers. Sometimes this causes confusion with overloaded methods.

If you add `using Base::getTwo;`, you actually add a definition proxy to the inner context. The definitions of the upper context temsellves are not visible. But the proxy is visible.

# sql-server - 在 Group By 查询中包括缺失的月份

> ID：11479918
> 
> 赞同：15
> 
> 时间：2012-07-14T00:23:10.287
> 
> 标签：sql-server, tsql, group-by, date-range

我想我在这里有一个艰难的... :(

我试图按月计算订单数，即使是零。这是问题查询：

```
SELECT datename(month, OrderDate) as Month, COUNT(OrderNumber) AS Orders
FROM OrderTable
WHERE OrderDate >= '2012-01-01' and OrderDate <= '2012-06-30'
GROUP BY year(OrderDate), month(OrderDate), datename(month, OrderDate) 
```

我想要得到的是这样的：

```
Month            Orders
-----            ------
January          10
February         7
March            0
April            12
May              0
June             5 
```

...但我的查询跳过了 3 月和 5 月的一行。我已经尝试过`COALESCE(COUNT(OrderNumber), 0)`，`ISNULL(COUNT(OrderNumber), 0)`但我很确定分组导致它不起作用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-14T01:33:03.563

此解决方案不需要您对可能需要的月份列表进行硬编码，您只需提供任何开始日期和任何结束日期，它就会为您计算月份边界。它在输出中包含年份，因此它将支持超过 12 个月，因此您的开始日期和结束日期可以跨越年份边界并且仍然正确排序并显示正确的月份*和*年份。

```
DECLARE @StartDate SMALLDATETIME, @EndDate SMALLDATETIME;

SELECT @StartDate = '20120101', @EndDate = '20120630';

;WITH d(d) AS 
(
  SELECT DATEADD(MONTH, n, DATEADD(MONTH, DATEDIFF(MONTH, 0, @StartDate), 0))
  FROM ( SELECT TOP (DATEDIFF(MONTH, @StartDate, @EndDate) + 1) 
    n = ROW_NUMBER() OVER (ORDER BY [object_id]) - 1
    FROM sys.all_objects ORDER BY [object_id] ) AS n
)
SELECT 
  [Month]    = DATENAME(MONTH, d.d), 
  [Year]     = YEAR(d.d), 
  OrderCount = COUNT(o.OrderNumber) 
FROM d LEFT OUTER JOIN dbo.OrderTable AS o
  ON o.OrderDate >= d.d
  AND o.OrderDate < DATEADD(MONTH, 1, d.d)
GROUP BY d.d
ORDER BY d.d; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T01:13:53.820

由于您的查询无法猜测您想要的月份，因此您需要将想要存储的月份存储在某个地方，将它们与您的表连接起来，然后进行分组。就像是：

```
;With Months (Month) 
AS
(

    select 'January' as Month
    UNION
    select 'February' as Month
    UNION
    select 'March' as Month
    UNION
    select 'April' as Month
    UNION
    select 'May' as Month
    UNION
    select 'June' as Month
    UNION
    select 'July' as Month
    UNION
    select 'August' as Month
    UNION
    select 'September' as Month
    UNION
    select 'October' as Month
    UNION
    select 'November' as Month
    UNION
    select 'December' as Month

)
--Also you could have them in a "Months" Table 
```

然后就是`JOIN`这张桌子和你的桌子：

```
 Select 
    SELECT datename(month, OrderDate) as Month, COUNT(OrderNumber) 
    FROM Months T1
    LEFT JOIN OrderTable T2 on datename(month, T2.OrderDate) = T2.Month
    WHERE (T2.OrderDate >= '2012-01-01' and T2.OrderDate <= '2012-06-30') 
OR T2.OrderDate IS NULL --So will show you the months with no rows
    GROUP BY year(T2.OrderDate), month(T2.OrderDate), datename(month, T2.OrderDate) 
```

希望它有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T09:13:24.697

这是使用递归 CTE 的一个：

```
declare @StartDate datetime = '2015-04-01';
declare @EndDate datetime = '2015-06-01';

-- sample data
declare @orders table (OrderNumber int, OrderDate datetime);
insert into @orders
select 11, '2015-04-02'
union all
select 12, '2015-04-03'
union all
select 13, '2015-05-03'
;

-- recursive CTE
with dates
as (
    select @StartDate as reportMonth
    union all
    select dateadd(m, 1, reportMonth)
    from dates
    where reportMonth < @EndDate
    )
select 
    reportMonth,
    Count = count(o.OrderNumber)
from dates
left outer join @orders as o 
    on o.OrderDate >= reportMonth
    and o.OrderDate < dateadd(MONTH, 1, reportMonth)
group by 
    reportMonth
option (maxrecursion 0);
; 
```

# android - 如何告诉 Titanium 根据屏幕密度选择应用程序图标？

> ID：11479922
> 
> 赞同：3
> 
> 时间：2012-07-14T00:23:37.443
> 
> 标签：android, titanium

我开始认为 Titanium 对不同屏幕密度的应用程序图标没有真正的支持。可以设置目录结构，但 tiapp.xml 配置向导**需要**一个图标。

这是我的目录结构：

```
platform
    /android
        /res
            /drawable
                appicon.png
            /drawable-hdpi
                appicon
            ... etc, for mdpi, ldpi, and xhdpi
Resources
    /android
        /images
            ... Folders containing my splash screens (res-long-land-hdpi, res-long-land-ldpi, etc)
        appicon.png
    /ui
    app.js 
```

目前，Titanium`Resources/android/appicon.png`用作应用程序图标。我如何告诉它在运行时选择应用程序图标`platform/android/res`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T00:57:09.590

钛确实支持这一点。

像我上面那样创建目录结构，*并* `appicon.png`在`Resources/android/`. Titanium 将在编译项目时忽略`Resources/android/appicon.png`并正确使用`platform/android`.

# iis-7 - Visual Studio 2012 Web 部署到带有 IIS 7 和 /msdeploy.axd 404 错误的 Windows Server 2008 R2

> ID：11479927
> 
> 赞同：23
> 
> 时间：2012-07-14T00:24:05.823
> 
> 标签：iis-7, http-status-code-404, windows-server-2008-r2, visual-studio-2012, webdeploy

在 Visual Studio 2012 RC 中，当我尝试验证 Web 部署连接时，我收到以下错误消息：

[ERROR_DESTINATION_NOT_REACHABLE](http://learn.iis.net/page.aspx/1023/web-deploy-error-codes/#ERROR_DESTINATION_NOT_REACHABLE)

![在此处输入图像描述](../Images/2f4d7489fd24f79d095f929401ff259e.png)

在服务器上启动所需的 Web 管理服务并安装 Web Deploy 3.0 RC。

然后使用远程桌面连接我登录服务器并检查`IIS`位于`C:\inetpub\logs\LogFiles\W3SVC1`. 在那里我可以看到我验证连接的尝试，因为它们包含我的 IP 地址：

```
2012-07-13 20:58:49 185.201.117.17 HEAD /msdeploy.axd site=Default%20Web%20Site 8172 - 189.10.32.194 - 404 0 2 78 
```

它给了我一个404。

在尝试让它工作近 6 小时后（阅读了很多材料，包括 IIS 团队的这个伟大的故障排除指南，标题为[Troubleshooting Web Deploy questions with Visual Studio](http://learn.iis.net/page.aspx/1182/troubleshooting-web-deploy-problems-with-visual-studio/)和这个相关的问题[Visual Studio 2010 Web deployment task failed](https://stackoverflow.com/q/2946340/114029)）我决定要求在这里提供帮助，看看是否有人知道可能是什么问题......你知道是什么导致了这个 404 错误吗？

如果您需要更多信息，请问我，我会提供... :)

**编辑 1**

昨天我还在本地机器上尝试了以下`msdeploy`命令来列出`test`服务器上调用的文件夹的内容[它按预期工作]：

```
C:\Program Files\IIS\Microsoft Web Deploy V3>msdeploy -verb:dump -source:content
path=c:\test,computerName=xxxxxxxxxx.publiccloud.com.br,username=User,password=Password
Info: Using ID 'a246a13c-7777-4226-964c-fe9934c60b77' for connections to the rem
ote server.
MSDeploy.contentPath
c:\test
c:\test
c:\test\test.txt 
```

**编辑 2**

经过大量安装/重新安装操作后，当我尝试使用 VS 2012 RC 甚至命令行中的 msdeploy 发布网站时，我终于达到了 Windows Server 2008 返回 503 HTTP 错误的地步。

看起来现在最好的办法是全新安装 Windows Server 2008，因为我需要使用一个混乱的 VM 服务器映像。希望它能解决问题。

仅作记录，这是 VS 2012 尝试执行的 msdeploy 命令。我做了一个复制/粘贴，并在命令行中使用 msdeploy 进行了尝试：

```
C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe -source:manifest='E:\SISPEC\SISPEC\obj\Release\Package\SISPEC.SourceManifest.xml' -dest:auto,ComputerName="https://xxxxxxxxxx.publiccloud.com.br:8172/msdeploy.axd?site=Default%20Web%20Site",UserName='UserName',Password='Password',IncludeAcls='False',AuthType='Basic' -verb:sync -enableRule:DoNotDeleteRule -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -setParamFile:"E:\SISPEC\SISPEC\obj\Release\Package\SISPEC.Publish.Parameters.xml" -retryAttempts=2 
```

只是为了获得相同的 503 Server Unavailable 消息。

**编辑 3**

[这个问题在此处](http://forums.iis.net/t/1190501.aspx)的 IIS Web 部署工具 (MS Deploy) 论坛上被交叉发布。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-12T01:13:40.363

仅供参考 - 我也遇到了 404 错误。原来我必须下载完整的包并安装所有东西。

[http://www.iis.net/downloads/microsoft/web-deploy#additionalDownloads](http://www.iis.net/downloads/microsoft/web-deploy#additionalDownloads)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:15:37.133

我必须手动添加部署处理程序。在 IIS 管理器中，选择服务器，选择“IIS|处理程序映射|添加托管处理程序...”。

```
Request path: msdeploy.axd
Type: Microsoft.Web.Deployment.DeploymentAgentHandler,..., Version=9...
Name: Web Deploy Whatever 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T19:27:04.423

我有同样的错误（ERROR_DESTINATION_NOT_REACHABLE）。我可以通过打开端口 8172 来解决这个问题。

然后我遇到了错误：ERR_COULD_NOT_CONNECT_TO_REMOVESVC，我可以通过安装Web Deploy 3.0 的**每个组件来解决这个问题。**它试图点击 Web Deploy 3.0 安装程序默认不安装的 /MSDEPLOYAGENTSERVICE。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-09T20:09:18.687

在我的情况下，为 WMSVC 颁发的默认证书不是为机器名称颁发的。我的解决方案是：

1.  从我的域 CA 为机器名称颁发证书。如果您愿意信任证书，这可以是自签名的。
2.  在个人证书存储下安装该证书
3.  停止 Web 管理服务
4.  将证书更改为我正确颁发的证书
5.  重新启动服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T22:27:57.623

首先，我尝试修复 Web Deploy 3.0 的安装，但没有成功。删除和安装解决了我的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-14T00:44:05.770

你检查过你的处理程序吗？您可以通过在同一文件夹上创建一个 HTML 页面并尝试访问该 HTML 来测试这一点。如果可以，请检查您的站点是否具有必要的处理程序。此外，请确保您的 DNS 记录指向正确的 IP 地址。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-14T16:49:41.540

就我而言，我在服务器机器上同时拥有 Web Deploy 2.0 和 3.0。删除两者并仅安装 3.0 解决了我的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-15T12:53:33.217

如果所有先前的指示都失败了，并且如果您使用的是 Azure 虚拟机，其中 8172 的端点是打开的，我已经解决了它删除端点并再次打开它。我相信我第一次选择使用 Floating IP Enabled，但没有奏效。只需再次创建端点，选择禁用浮动 ip 并完成！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-26T03:19:34.317

确保 Web 管理服务已启动。

我删除了 SSL 证书，服务停止工作。

# .net - 通过 ICalUid 获得交换约会？

> ID：11479928
> 
> 赞同：9
> 
> 时间：2012-07-14T00:24:08.600
> 
> 标签：.net, exchange-server, exchangewebservices, exchange-server-2007

所以我正在使用给定的 ICalUid 创建 Exchange (2007) 约会：

```
var app = new Appointment(svc);
app.ICalUid = id;
app.Subject = "Test Appointment";
app.Recurrence = new Recurrence.DailyPattern(DateTime.Now, 3);
app.RequiredAttendees.Add("mstum@example.com");
app.AllowNewTimeProposal = false;
app.Body = new MessageBody(BodyType.HTML, "This is a <b>Test!</b>");
app.Save(); 
```

稍后，我想更新那个约会，此时我需要通过 ICalUid 找到它。

但是，似乎没有办法做到这一点？我`Appointment.Bind`只能针对我在更新时没有的 Exchange ID 使用（存储它是非常不切实际的）

我可以使用相同的 IcalUid 创建一个新约会，这看起来像是一个更新，但要求再次接受/拒绝，而不是只显示“不需要更新”。

有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:28:42.607

您可以使用 a`ExchangeService.FindItems`来搜索- 请参见下面的示例`Appointment`。`ICalUid`但请注意，它在查找重复出现的约会时遇到问题。

看：

*   [http://social.technet.microsoft.com/Forums/fi-FI/exchangesvrdevelopment/thread/26c2f76d-93bb-4a70-80e8-cf6cc9c66254](http://social.technet.microsoft.com/Forums/fi-FI/exchangesvrdevelopment/thread/26c2f76d-93bb-4a70-80e8-cf6cc9c66254)

遗憾的是您没有使用 Exchange 2010，因为`getICalUID()`EWS 托管 API 1.1.5 中有一个。

以下是一些其他链接，可以让您获得更满意的解决方案。

*   [http://blogs.msdn.com/b/mstehle/archive/2009/09/02/ews-uid-not-always-the-same-for-orphaned-instances-of-the-same-meeting.aspx](http://blogs.msdn.com/b/mstehle/archive/2009/09/02/ews-uid-not-always-the-same-for-orphaned-instances-of-the-same-meeting.aspx)

*   [http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/09883d57-e2a2-4db6-8800-9b9d251d6231/](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/09883d57-e2a2-4db6-8800-9b9d251d6231/)

*   [http://social.technet.microsoft.com/Forums/pl-PL/exchangesvrdevelopment/thread/5b67df1d-0a15-40cf-aa5e-ca811087d16d](http://social.technet.microsoft.com/Forums/pl-PL/exchangesvrdevelopment/thread/5b67df1d-0a15-40cf-aa5e-ca811087d16d)

*   [http://social.technet.microsoft.com/Forums/en/exchangesvrdevelopment/thread/a9148747-b51c-4b86-b942-27c1e87f4440](http://social.technet.microsoft.com/Forums/en/exchangesvrdevelopment/thread/a9148747-b51c-4b86-b942-27c1e87f4440)

*   [http://social.technet.microsoft.com/Forums/fi-FI/exchangesvrdevelopment/thread/1bab6e2c-805c-4999-babf-cc7c4aa0d669](http://social.technet.microsoft.com/Forums/fi-FI/exchangesvrdevelopment/thread/1bab6e2c-805c-4999-babf-cc7c4aa0d669)

*   [http://social.technet.microsoft.com/Forums/pl-PL/exchangesvrdevelopment/thread/09057b7d-45d7-48df-8ca1-df119637ff60](http://social.technet.microsoft.com/Forums/pl-PL/exchangesvrdevelopment/thread/09057b7d-45d7-48df-8ca1-df119637ff60)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T20:57:33.347

检查两种`FindAppointments`方法`ExchangeService`

[http://msdn.microsoft.com/en-us/library/dd635918(v=exchg.80](http://msdn.microsoft.com/en-us/library/dd635918(v=exchg.80) )

[http://msdn.microsoft.com/en-us/library/dd633767(v=exchg.80](http://msdn.microsoft.com/en-us/library/dd633767(v=exchg.80) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T23:01:38.240

2007年似乎根本没有办法。

# java - 通过重绘方法在 GUI 中添加组件

> ID：11479930
> 
> 赞同：4
> 
> 时间：2012-07-14T00:24:35.027
> 
> 标签：java, swing, user-interface, paint

我并不像我想象的那样理解 Java GUI。在我的框架绘制方法中，我想擦除所有当前按钮，并添加新按钮。（总体目标是有一个界面，用户可以看到角色并点击按钮下载与角色相关的文档。由于每个角色都不一样，当用户从我的列表中选择一个新用户时，一组新的文档和按钮将可供他们使用。）

这是我刚刚编写的一个测试框架，它显示了事情的发展方向。它具有我在实际程序中使用的类似范例，没有太多混乱：

```
public class GUITest extends JFrame
{

/**
 * @param args
 */
public static void main(String[] args)
{
    Container gui_test = new GUITest();

}

private JComponent content = null;

public GUITest()
{
    super();

    setVisible(true);
}

public void paint(Graphics g)
{
    this.removeAll();

    content = new JPanel();

    JComponent test_button = new JButton("New Button 1");
    JComponent button = new JButton("New Button 2");

    content.add(button);
    content.add(test_button);

    this.add(content);

    super.paint(g);
}

} 
```

如果没有调用 removeAll()，按钮将继续被抛出到 JPanel 之上，但是调用之后，什么都不会显示。我不知道为什么会这样，因为我正在适当地添加组件，对吗？

**编辑**
知道了，让我给你一个更详细的细分。一位客户正在通过查看西面板上游戏中的角色列表来导航我的程序。他们可以从列表中选择一行，该行将在东面板上显示字符详细信息。详细信息是图像和描述。最近，我为该特定字符添加了相关文档，它将显示在东面板的底部。我创建了按键监听器，因此客户端可以通过按 num 键快速查看文档，但我也想让他们能够单击按钮以启动 pdf 视图并查看文档的内容。

由于每个字符都有不同的相关文档和不同数量的文档，因此我每次都重新绘制按钮，以反映相关文档的数量和文档的适当标题。这就是重绘表现奇怪的地方。你给了我一个很好的解释，说明出了什么问题，但我现在不知道如何让客户访问文档，除了绘制文档的描述以及启动它所需的热键。那有意义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T00:29:19.723

***永远不要***在您的 GUI 中添加组件或删除 paint 或 paintComponent 方法中的组件。只是不要这样做。曾经。时期。

这些方法仅用于绘图，并且需要尽可能快，否则您的程序将显得无响应。不仅如此，您无法完全控制何时甚至是否调用这些方法，因此程序逻辑和结构不应进入这些方法。

而是使用事件侦听器（例如 ActionListeners、ListSelectionListeners）或键绑定对用户事件做出反应。

**编辑**
关于

> 明白了，让我给你一个更详细的细分。一位客户正在通过查看西面板上游戏中的角色列表来导航我的程序。他们可以从列表中选择一行，该行将在东面板上显示字符详细信息。详细信息是图像和描述。最近，我为该特定字符添加了相关文档，它将显示在东面板的底部。我创建了按键侦听器，因此客户端可以通过按 num 键快速查看文档，但我也想让他们能够单击按钮启动 pdf 视图并查看文档的内容。

我会使用 JList 来保存左侧的可选信息列表，并使用 ListSelectionListener 对其做出反应。在监听器中，我会更改相关的显示信息。我也避免将 KeyListeners 与 Swing 一起使用，而是倾向于使用 Key Bindings，因为它们在焦点方面更灵活且不那么僵化。

关于

> 由于每个字符都有不同的相关文档和不同数量的文档，因此我每次都重新绘制按钮，以反映相关文档的数量和文档的适当标题。这就是重绘表现奇怪的地方。你给了我一个很好的解释，说明出了什么问题，但我现在不知道如何让客户访问文档，除了绘制文档的描述以及启动它所需的热键。那有意义吗？

我不确定你在这里做什么或你想做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T02:10:26.650

> 由于每个字符都有不同的相关文档和不同数量的文档，因此我每次都重新绘制按钮，以反映相关文档的数量和文档的适当标题。这就是重绘表现奇怪的地方。你给了我一个很好的解释，说明出了什么问题，但我现在不知道如何让客户访问文档，除了绘制文档的描述以及启动它所需的热键。那有意义吗？

因此，与其“绘制”按钮，不如直接更改文本 (setText(...))。

当用户选择“char”时。您将需要重建屏幕的某些部分。更改列表模型（如上所述）并删除/添加文档容器上所需的任何按钮。

# java - Spring MVC 本地化 - 找不到属性文件

> ID：11479933
> 
> 赞同：0
> 
> 时间：2012-07-14T00:24:53.533
> 
> 标签：java, spring-mvc, localization, internationalization

我正在尝试在新的 Spring MVC 应用程序中进行基本本地化。我已经尝试了我能想到的一切，但无论我做什么，总是以以下异常告终。任何帮助将不胜感激...

我尝试将属性文件添加到每个目录，但它仍然给我一个错误。一旦我得到它的工作，我会系统地删除额外的。

例外：

```
07/13/2012 21:06:00.178 [DEBUG] [org.springframework.context.support.ReloadableResourceBundleMessageSource] No properties file found for [messages] - neither plain properties nor XML
07/13/2012 21:06:00.178 [DEBUG] [org.springframework.context.support.ReloadableResourceBundleMessageSource] No properties file found for [messages_en] - neither plain properties nor XML
07/13/2012 21:06:00.179 [DEBUG] [org.springframework.context.support.ReloadableResourceBundleMessageSource] No properties file found for [messages_en_US] - neither plain properties nor XML
07/13/2012 21:06:00.182 [ERROR] [org.springframework.web.servlet.tags.MessageTag] No message found under code 'test.testMessage' for locale 'en_US'.
javax.servlet.jsp.JspTagException: No message found under code 'test.testMessage' for locale 'en_US'. 
```

这是 JSP 条目（fmt:message 只显示 ???test.testMessage??? 而 spring:message 爆炸了）：

```
<h2><fmt:message key="test.testMessage" />!</h2>
<h2><spring:message code="test.testMessage" />!</h2> 
```

这是我的 comparison-servlet.xml 文件中的配置：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="messages" />
</bean> 
```

这是战争结构（请注意，我几乎在每个级别都添加了 messages.properties）：

```
messages.properties
src
    messages.properties
    main
        messages.properties
        java
        ...
        resources
            messages.properties
        webapp
            index.jsp
            messages.properties
            WEB-INF
                comparison-servlet.xml
                web.xml
                messages.properties
                jsp
                messages.properties
                    compare.jsp
                    globalIncludes.jsp
            classes
                messages.properties
            resources
                messages.properties
    test
        ... 
```

知道为什么它找不到肯定存在的文件吗？我是否需要明确设置有关类路径的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T08:35:16.150

尝试将messages.properties放在任何文件夹内的WEB-INF目录下，并使用`basename`属性设置路径。

例如：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/i18n/messages" />
</bean> 
```

[请参阅此处](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ReloadableResourceBundleMessageSource.html#setBasename%28java.lang.String%29)的Javadoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:52:38.583

问题出在战争文件本身。当属性文件被复制到目标目录并显示为好像它们包含在构建中时，maven pom 文件被设置为从构建的工件中明确排除属性文件。

一旦我从我的 pom 文件中删除它，一切都开始正常工作：

```
<configuration>
    <packagingExcludes>**/*.properties</packagingExcludes>
</configuration> 
```

# python - 哪个领域处理具有相似特征的词的提取？

> ID：11479935
> 
> 赞同：0
> 
> 时间：2012-07-14T00:24:58.027
> 
> 标签：python, machine-learning, nlp, nltk

我有一个带有以下形式的注释的数据集：`<Word/Phrase, Ontology Class>`，其中 Ontology Class 可以是以下之一`{Physical Object, Action, Quantity}`。我已经从大量文本语料库中为我的特定本体模型手动创建了这个数据集。

因为这个过程是手动的，所以我确信我可能错过了我的语料库中的一些单词/短语。如果是这种情况，我正在寻找从同一语料库中自动提取其他单词的方法，这些单词具有与标记数据集中这些单词一样的“特征”。因此，第一个任务是在我进行提取其他单词的任务之前定义“特征”。

我可以使用任何标准技术来实现这一目标吗？

**编辑：**对不起。我应该提到这些是在 WordNet 中找不到的特定领域的词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:49:41.943

看看NLTK 书的[第 6 章。](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html)根据您的描述，这听起来像是基于特征（“特征”）提取的监督分类技术可能是一个不错的选择。从书中：

> 如果分类器是基于包含每个输入的正确标签的训练语料库构建的，则称为监督分类器。

您可以使用您手动编码的一些数据来训练您的分类器。它可能看起来像这样：

```
def word_features(name):
    features = {}
    features["firstletter"] = name[0].lower()
    features["lastletter"] = name[-1].lower()
    for letter in 'abcdefghijklmnopqrstuvwxyz':
        features["count(%s)" % letter] = name.lower().count(letter)
        features["has(%s)" % letter] = (letter in name.lower())
    return features 
```

接下来，您可以根据已标记的一些数据训练分类器：

```
>> words = [('Rock', 'Physical Object'), ('Play', 'Action'), ... ]
>>> featuresets = [(word_features(n), g) for (n,g) in words]
>>> train_set, test_set = featuresets[500:], featuresets[:500]
>>> classifier = nltk.NaiveBayesClassifier.train(train_set) 
```

您可能应该对已标记的一半数据进行训练。这样你就可以用另一半来测试分类器的准确性。继续处理这些特征，直到分类器的准确性达到您的要求。

```
nltk.classify.accuracy(classifier, test_set) 
```

您可以按如下方式检查各个分类：

```
classifier.classify(word_features('Gold')) 
```

如果您不熟悉 NLTK，那么您也可以阅读前面的章节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:37:33.103

正如 jfocht 所说，您需要一个分类器来执行此操作。要训​​练分类器，您需要一组具有特征及其分类的“事物”训练数据。然后，您可以输入具有特征的新“事物”并进行分类。

这里的关键是你没有功能，你只有文字。一个想法是使用 WordNet，这是一个花哨的字典，从单词的定义中生成特征。WordNet 的最佳功能之一是它具有一个单词的层次结构，例如，

```
cat -> animal -> living thing -> thing .... 
```

您**可以**简单地通过遵循层次结构来做到这一点，但如果不能，您可以从中添加特征并对其进行训练。这可能比使用单词本身作为特征要好得多。

不管你发现 Wordnet 是否有用，你都需要一个特征集来训练你的分类器，并且你还必须用这些特征标记所有未分类的数据，所以除非你有某种方法可以计算地完成特征部分，否则它将减少手工做的工作

# javascript - 绑定 click 和 enter 键以实现可访问性

> ID：11479939
> 
> 赞同：2
> 
> 时间：2012-07-14T00:26:04.297
> 
> 标签：javascript, jquery, accessibility, tabindex

给定一个表格（请注意`tabindex`属性）

```
<form id="settings-form">
    <input type="text" />
    <input type="submit" />
    <a href="#" class="cancel-save" tabindex="0">cancel</a>
</form> 
```

将操作绑定到取消按钮

```
$('#settings-form').find('.cancel-save').click(function(){ alert('CANCEL SAVE'); }); 
```

现在，当用户想要取消更改时，他只需单击“取消”按钮。但是，如果他用键导航`TAB`然后按回车，则不会出现警报。

这种操作是否有一个“主事件”来处理输入、点击、空格等，无论用户可能拥有什么可访问性功能，而无需将其`<a>`转换为`<button>`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:36:24.007

要绑定到两者，您可以在方法的第一个参数中定义多个事件（在空格分隔的列表中）`on()`：

```
$('#settings-form').find('.cancel-save').on('keypress click',
    function(e){
        var eType = e.type;
        if (eType == 'click' || (eType == 'keypress' && e.which == 13)) {
            alert('CANCEL SAVE');
        }
    }); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/KNk8W/)。

参考：

*   [`on()`](http://api.jquery.com/on).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:10:10.567

取消按钮有什么作用？如果它的目的是重置表单中的值，那么您应该真正使用 HTML 输入类型的 reset 来代替，以便它适用于非 JS 用户：

如果你想给 JS 用户更丰富的体验，那么你可以绑定到表单重置事件并使用 prevent default，但非 JS 用户仍然可以获得预期的行为。一般来说，一个没有 JavaScript 什么都不做的锚可能会更好地实现（或者至少通过 JavaScript 注入），特别是如果你关心可访问性。

```
<form id="theForm">
    <input type="text" value=""/>
    <input type="submit" value=""/>
    <input type="reset" value="Cancel"/>
</form>

$("#theForm").bind("reset", function(e) {
    e.preventDefault();
    //Fancy reset handler
}); 
```

默认情况下，这应该包括鼠标、键盘或触摸交互，因为您绑定到表单事件。

# macos - 如何在 OS X 上按顺序运行多个脚本文件？

> ID：11479940
> 
> 赞同：3
> 
> 时间：2012-07-14T00:27:20.613
> 
> 标签：macos, batch-file, applescript

我有 10 个脚本文件，每个文件最多包含 100 个命令（每个命令需要 1 分钟）。目前它节省了我的时间，我只单击一个文件来执行 100 个命令，但我想要的是另一个脚本文件，它顺序执行 10 个脚本文件，而不是我等待每个文件完成然后通过单击执行第二个脚本文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:42:29.577

您只需像以前一样调用每个脚本，但用分号分隔它们 **`;`**

在每个脚本完成执行后，bash 将开始执行下一个脚本。

*在终端：*

```
./scriptsrc/script_1; ./scriptsrc/script_2; ./scriptsrc/script_n; 
```

如果您需要更多指导，[请查看此问题](https://stackoverflow.com/questions/3232305/run-multiple-commands-in-multiple-terminal-windows-with-a-single-bash-line)，它非常相似。

**编辑：** 如果你想从另一个脚本运行多个脚本，这可以通过添加 shebang 行来告诉内核文件是可执行的，然后只列出你想要的脚本：

```
#!/bin/bash

./scriptsrc/script_1 
./scriptsrc/script_2
./scriptsrc/script_n

echo "script execution complete" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T15:03:01.120

```
set a to alias POSIX file "/Users/Firebird/Documents/script1.scpt"
set b to alias POSIX file "/Users/Firebird/Documents/script2.scpt"
set c to alias POSIX file "/Users/Firebird/Documents/script3.scpt"

set theScriptFiles to {a, b, c}
repeat with scriptFile in theScriptFiles
    run script scriptFile
end repeat 
```

当我出于未知原因进行测试时，列表中的最后一个脚本在前几次没有运行，但是在我运行之后

```
set myList to {"Hello", "Goodbye", "I must be going"}
repeat with theItem in myList
    say theItem
end repeat 
```

有效！

为了确保所有脚本都运行，我告诉 Texteditor 为每个相应的脚本打开一个文件：

```
tell application "Finder" to open "Macintosh:Users:Firebird:Documents:ranscript1.rtf" 
```

[MacScripter http://macscripter.net/viewtopic.php?id=44260](http://macscripter.net/viewtopic.php?id=44260)这个线程也非常好

# git - 和其他人一起做一个项目，我需要撤消我朋友的最后 3 次提交

> ID：11479941
> 
> 赞同：0
> 
> 时间：2012-07-14T00:27:45.183
> 
> 标签：git

我的朋友正在做项目的一部分，而我正在做另一部分。

我的朋友刚刚提交了一些未经代码审查的代码。我需要撤消这个。但是，我也不希望他失去任何工作。

基本上，我想回到大约 20 分钟的时间 - 我希望他在他的机器上进行所有更改，但我希望我们的主分支没有这些更改。

这样做的最佳方法是什么？我担心执行 git reset --hard - 我认为这是永久性的，而且我担心这样做会在我朋友执行 git pull 时删除他计算机上的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:32:01.217

首先，即使你不小心永久删除了一些东西，Git 默认情况下会保留删除项目的记录几周，所以你可能仍然可以恢复。请注意，这仅适用于已在某个时间提交或隐藏的更改。

其次，如果他将更改移动到单独的分支并且不在该分支上远程签出，则在拉取时不会删除文件。或者他只是做一个抓取和樱桃挑选更改。

无论如何，我没有亲自尝试过，但我相信你想要的命令是

```
git reset --soft HEAD~3 
```

这会将 head 的位置更改为 3 次提交前，同时将较新的文件留在工作树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:41:09.457

试试这个

```
git reset HEAD^^^ 
```

`^`为要撤消的每个提交添加一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T02:32:32.127

我要做的是：

```
git log 
```

复制您要返回的提交的校验和（例如 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7），然后执行结帐。这将使用过去的版本更新您的工作树。

```
git checkout 085bb3 
```

您现在应该将工作文件复制到不同的目录（您当前不在工作树下）。

然后回到你的主/主分支

```
git checkout master 
```

现在你回到了你的工作树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T05:53:27.290

我为此推荐 git revert 。Revert 将创建一个新的提交，以撤销已恢复的提交。这意味着原始提交是完整的，并且还具有仅删除违规提交的好处，而不是此后发生的所有提交。所以，如果你想摆脱的提交是 xxxxx，你可以这样做：

```
git revert xxxxx 
```

默认情况下，提交消息会告诉其他人这是一个还原，并且它会显示原始提交 id，以便每个人都可以轻松找到还原的提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T17:24:12.373

这就是我要做的。 `git branch not_code_reviewed_yet`. 这将使用您朋友的更改创建一个分支，以便您稍后可以返回它们。 `git reset --hard <commit you want master to go back to>`. 这应该让 master 在您的朋友更改之前重新提交。版本图现在应该看起来像

```
A
 \-B-C-D 
```

A为主，D为`not_code_reviewed_yet`

# ruby-on-rails - 为什么 Rails 的 ERB 会从这个模板代码渲染输出？

> ID：11479944
> 
> 赞同：0
> 
> 时间：2012-07-14T00:28:08.087
> 
> 标签：ruby-on-rails, erb

我正在使用 Rails 3.0.3 和以下模板（扩展名为 .html.erb）：

```
<% "one"; "two"; capture do %>
    Three
<% end %> 
```

呈现为：

```
one 
```

为什么是这样？它似乎不应该渲染任何东西，因为我没有使用 <%=

编辑

由于似乎有些混乱，这里有一个更类似于我正在调试的实际模板代码的复制：

```
<% my_string = "" %>
<% my_string << capture do %>
    Hello
<% end %>
<%= my_string %> 
```

这呈现为：

```
 Hello    Hello 
```

因为由于某种原因，捕获的输出被附加到 my_string 并被渲染，而不仅仅是前者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:47:52.290

您正在使用 rails [capture 帮助](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture)程序，但您的语法错误。不知道为什么会打印出来`one`。在 rails 3.4 中它不会打印出任何东西。

这是使用它的正确方法

```
<% @number = capture do %>
   three
<% end %>

this is some html and here is my <%= @number %> 
```

将呈现的 html 是

```
this is some html and here is my three 
```

由于您的语法错误，我不会担心为什么会出现“一个”。相反，我会更专注于正确使用捕获助手。

* * *

**编辑：**

您的第二个（已编辑）示例与您的第一个示例不同。这是行号和对最后一行的轻微更改，因此您可以看到发生了什么。

```
1\. <% my_string = "" %>
2\. <% my_string << capture do %>
3\.     Hello
4\. <% end %>
5\. before <%= my_string %> after 
```

结果是`Hello before Hello after`。所以第 3 行被渲染，然后第 5 行被渲染`my_string`包含 value `Hello`。

如果你把它改成这个

```
 <% my_string = "" %>
 <% my_string = capture do %>  <!-- changed << to = -->
     Hello
 <% end %>
 before <%= my_string %> after 
```

那么结果就是`before Hello after`。

那么，这意味着什么？当你使用`<<`它时，它会搞砸`capture`方法，它会渲染捕获块内的东西，即使通常你不希望它这样做。

基本上，你不能在这里做你想做的事情，至少不能用你当前的语法。

# jquery - 将模态窗口居中在 div 的中间

> ID：11479951
> 
> 赞同：0
> 
> 时间：2012-07-14T00:29:23.450
> 
> 标签：jquery, html, window, modal-dialog, centering

我正在尝试将模态对话框窗口居中在外部 div 的中间（垂直和水平）。我正在为模态窗口使用 jquery 插件。这是我要完成的工作的图片

正如您在当前代码中看到的那样，我拥有它几乎居中但并不安静。这是我的 javascript 代码

```
$(id).css('top', $('#pagecontent').position().top + ($('#pagecontent').height() / 2) - ($(id).height() / 2));
$(id).css('left', $('#pagecontent').position().left + ($('#pagecontent').width() / 2) - ($(id).width() / 2)); 
```

pagecontent 是我试图将模态窗口居中的 div 矩形

任何帮助将不胜感激。

提前感谢卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:48:28.273

试试这个：首先，为父元素设置一个`relative`位置：

```
#pagecontent {position:relative;} 
```

然后，设置模态窗口的`absolute`位置也有 a`top`和`left`值 by `50%`：

```
#modal {
  position:absolute;
  top:50%;
  left:50%;
} 
```

最后，只需根据它设置模态窗口的和`margin-top`（`margin-left`负）除以二：`height``width`

```
$id.css({
    'margin-top': -($id.outerHeight() / 2),
    'margin-left': -($id.outerWidth() / 2)
}); 
```

**演示：http:** [//jsfiddle.net/tovic/2QVX8/24/](http://jsfiddle.net/tovic/2QVX8/24/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:09:55.070

如果没有提到的图片或指向实时站点的链接，就很难提供准确的答案。

尽管如此，通过查看您的代码，您正在使元素居中，但您没有考虑任何可能应用于它或其父级的或`margin`。`padding`

* * *

# **实际例子：**

让我们假设[以下示例](http://jsfiddle.net/zuul/BFUuY/)应用您的代码并进行必要的更正：

**假设以下标记：**

```
<div id="pagecontent">
  <div id="foobar">I'm at the very middle!</div>
</div> 
```

**使用以下 CSS：**

```
#pagecontent {
  margin: 10px;
  padding: 10px;
  height: 240px;
  width: 360px;
  border: 1px solid #D9D9D9;
  position: relative;
}

#foobar {
  position: absolute;
  width: 200px;
  height: 20px;
  line-height: 20px;
  border: 1px solid blue;
} 
```

**您的 jQuery 代码可以改进为：**

```
var $inner   = $('#foobar'),
    $wrapper = $('#pagecontent');

$inner.css({
    'top'  : ($wrapper.outerHeight() / 2) - ($inner.outerHeight(true) / 2),
    'left' : ($wrapper.outerWidth() / 2) - ($inner.outerWidth(true) / 2)
}); 
```

* * *

# 进一步说明：

要使用 jQuery 收集元素的宽度和高度，同时获取填充和边距声明所占用的空间，可以使用：

jQuery [.outerWidth()](http://api.jquery.com/outerWidth/)函数：

> **描述：**获取匹配元素集中第一个元素的当前计算宽度，包括填充和边框。
> 
> .outerWidth( [includeMargin] )
> 
> **includeMargin**一个布尔值，指示是否在计算中包括元素的边距。

![元素宽度模型框](../Images/f37a5adb3a57b79f6118b404a369ce72.png)

jQuery [.outerHeight()](http://api.jquery.com/outerHeight/)函数：

> **描述：**获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。
> 
> .outerHeight( [includeMargin] )
> 
> **includeMargin**一个布尔值，指示是否在计算中包括元素的边距。

![在此处输入图像描述](../Images/ec4abc34cd8e1239eab087a1761afd46.png)

# python - 如何编写更多 Pythonic 代码

> ID：11479955
> 
> 赞同：1
> 
> 时间：2012-07-14T00:29:52.793
> 
> 标签：python, python-2.7, idioms

今天从官网的教程开始学习python。

在阅读有关**filter(function, sequence)**的内容时，我想到了创建一个函数，如果数字是素数，则返回该函数以将其与过滤器一起使用。

```
notDividedBy = [2,3,4,5,6,7,8,9]

def prime(num):
    """True if num is prime, false otherwise"""    
    copy = notDividedBy[:]
    check = True
    if num in copy:
        copy.remove(num)
    for x in copy:
        if num % x == 0:
            check = False
            break
    return check 
```

上面的代码在 shell 中工作。

我的问题是：因为我觉得虽然是一个解决方案，但它不是最优雅的解决方案，任何人都可以将此代码转换为更像 python 的东西吗？（更好的结构？更少的行？）

我相信这将有助于我更好地理解该语言的基础知识。

问题是，不要使用任何进口或任何东西，只需简单的员工。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:38:46.707

创建许多列表的副本并不是一种特别有效的做事方式。而是使用`xrange()`(Python 2.x) 或`range()`(Python 3) 迭代器。这是您可以实现素性测试的一种（天真的）方法：

```
from math import sqrt

def isPrime(n):
    if n < 2: return False
    if n == 2: return True
    if not n % 2: return False #test if n is even

    #we've already remove all the even numbers, no need to test for 2
    #we only need to test up to sqrt(n), because any composite numbers can be
    #   factored into 2 values, at least one of which is < sqrt(n)
    for i in xrange(3, int(sqrt(n)) + 1, 2): 
        if not n % i:
            return False
    return True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T00:41:14.677

这个怎么样：

```
def is_prime(num):
    return not any(num%i == 0 for i in xrange(2,num/2+1))

for i in xrange(10):
    print i, is_prime(i) 
```

**解释**

从...开始：

```
(num%i==0 for i in xrange(2,num/2+1)) 
```

这是一个生成器表达式。我可以把它变成一个列表理解：

```
[num%i==0 for i in xrange(2,num/2+1)] 
```

列表推导等效于：

```
ll=[]
for i in xrange(2,num/2+1):
    ll.append(num%i==0) 
```

生成器和列表推导之间的区别在于，生成器仅在您对其进行迭代时放弃它的元素——而列表推导会预先计算所有值。不管怎样，从上面的代码中，你可以看到表达式生成了一个 True 和 False 的序列。如果数字可以除以 i，则为 True，否则为 False。如果我们生成一个所有假数的序列，我们就知道我们有一个素数。

下一个技巧是`any`内置函数。它基本上搜索一个可迭代对象并检查任何值是否为真。一旦它击中 a `True`，它就会返回 True。如果它到达可迭代的末尾，则返回`False`. 因此，如果整个序列为 False（素数），则`any`返回`False`，否则返回`True`。这对于`not_prime`函数来说是完美的，但我们的函数是`is_prime`，所以我们只需要使用`not`运算符反转该结果。

使用生成器表达式的好处是它简洁明了，而且它允许`any`在检查每个值之前返回，这意味着一旦找到一个除以的数字`num`，它就会返回而不是生成所有`num/2`数字。

无论如何，我希望这个解释是有帮助的。如果没有，请随时发表评论，我会尽力解释得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T00:39:35.293

一件事，如果您要以这种方式实施主要测试，没有理由使用辅助阵列

```
def prime(num):
    """True if num is prime, false otherwise"""    
    check = True
    #if num in copy:
    #    copy.remove(num)
    for x in range(2,x-1):
        if num % x == 0:
            check = False
            break
    return check 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T05:13:14.603

这是使用 filter() 的 2 衬里。

```
def prime(num):
    """True if num is prime, false otherwise"""
    if num < 2:
        return False
    return len(filter(lambda x: num % x == 0, range(2, num))) == 0 
```

# ruby-on-rails - Rails 中的 Github 身份验证 API

> ID：11479957
> 
> 赞同：3
> 
> 时间：2012-07-14T00:30:10.697
> 
> 标签：ruby-on-rails, ruby, github, github-api

我一直在努力寻找有关此信息的过程中感到沮丧，因为在 StackOverflow 和其他地方发布的许多相关主题的链接都是 404 的。Github API 只说明了如何从命令行执行操作，而我发现的所有 gem 都没有提供这种支持。然而，我知道这是可能的，因为我以前见过它。

我将如何获取用户当前的 Github 登录信息？也就是说，如果用户登录到 Github，我想找出并在我的网站中使用他们的一些用户信息。如果他们没有登录，我想连接到 Github 让他们登录。

是否有这方面的宝石，如果有，它是什么以及它是如何工作的（如果没有足够的文档）？如果没有，那么我该如何使用 Github API 在 Ruby 中执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T07:50:20.777

要使用 github 进行身份验证，请将优秀的[omniauth](https://github.com/intridea/omniauth/) gem 与（官方）[omniauth-github 策略](https://github.com/intridea/omniauth-github)一起使用。

[您可以在此处查看](https://github.com/intridea/omniauth-github/blob/master/lib/omniauth/strategies/github.rb)用户通过 github 进行身份验证时将获得的有关用户的基本信息。

这是人们发布[的omniauth策略列表。](https://github.com/intridea/omniauth/wiki/List-of-Strategies)有关一个好的[入门示例](https://github.com/mkdynamic/omniauth-facebook)，请参阅 facebook 策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T23:39:29.573

[我发现这篇关于使用Omniauth-Github](https://github.com/intridea/omniauth-github) gem的博客文章。从上到下提供了一个很棒的教程。

我今天使用它没有任何问题。博文：[Omniauth-Github 教程](http://natashatherobot.com/rails-omniauth-github-tutorial/)

# jquery - 当数据来自Web服务时如何在jquery自动完成中获取键值

> ID：11479961
> 
> 赞同：1
> 
> 时间：2012-07-14T00:31:00.753
> 
> 标签：jquery, asp.net, json, web-services, jquery-autocomplete

我的自动完成工作正常，因为我可以选择文本。但问题是我想获取所选项目的键值（Id）。所以我可以设置隐藏字段并使用服务器端。

这是我的网络方法代码：

```
[WebMethod]
    public List<string> AuotExtenderHotel(string hotelname)
    {
        DataSet ds = objHotelList.GetHotels(hotelname);
        List<string> result = new List<string>();
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            result.Add(dr["HotelName"].ToString());
        }
        return result;
    } 
```

这是我的jQuery自动完成代码

```
<script type="text/javascript">
    $(document).ready(function () { HotelText(); });
    function HotelText() {
        $(".txthotel").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "WebService.asmx/AuotExtenderHotel",
                    data: "{'hotelname':'" + $('.txthotel').val() + "'}",
                    dataType: "json",
                    success: function (data) {

                        response(data.d);

                    },
                    error: function (result) {
                        alert("Error");
                    }

                });
            }
        });
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:31:22.467

如果您的服务器没有返回除字符串数组之外的任何内容，您怎么能期望视图中的项目的 Id？我会修改 web 方法以返回一个 JSON 对象，其中包括 ID 和值对的对象。像

`[{ "id": "1", "label": "MyFirstHotel", "value": "MyFirstHotel" },{ "id": "2", "label": "MySecondHotel", "value": "MySecondHotel" }]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T04:38:15.613

我真的希望这已经弄清楚了，但以防万一......

文档状态选择了“选择”事件在选择项目时被解雇并将原型提供为存在`select: function(event, ui) { ... }`

在函数中放置一点`console.log(ui)`将 ui 对象显示为：

```
{
  item :
  {
    label : "the selected label",
    value : "the selected value"
  }
} 
```

# objective-c - 后缀到中缀转换器目标 C

> ID：11479963
> 
> 赞同：3
> 
> 时间：2012-07-14T00:31:07.927
> 
> 标签：objective-c, xcode, arrays, infix-notation, postfix-notation

我正在尝试制作一个 RPN 计算器程序，并希望有一个标签来显示您输入的表达式。如果您输入 3,5,4,+,/，标签将显示 ((4+5) / 3)。我在实现这一点时遇到了麻烦。我正在使用一个 mutableArray，我称之为堆栈，它同时包含数字和操作数。另一个主要问题是传递的字符串不会是一个完整的字符串，而是每次用户输入一个值时都会传递它，因此程序必须在堆栈上只有一个或两个项目的情况下连续运行。这是代码。

```
 + (NSString *)descriptionOfProgram:(id)program
{
NSMutableArray *stack;

if([NSArray isKindOfClass:[NSArray class]])
    stack = [program mutableCopy];

NSUInteger count = [stack count];
NSString* symbol;
NSMutableString *result;
[result appendString:@"("];

for( NSUInteger i=0; i<count; i++){

    if ([[stack lastObject] isEqualToString:@"+"] || [[stack lastObject] isEqualToString:@"-"] ||  [[stack lastObject] isEqualToString:@"/"] ||  [[stack lastObject] isEqualToString:@"*"] ||  [[stack lastObject] isEqualToString:@"sin"] || [[stack lastObject] isEqualToString:@"cos"] )
        {
            symbol = [stack lastObject];
            [stack removeLastObject];

        }
    else
        {

            if( [stack lastObject] != nil){
                [result appendString:[stack lastObject]];
                [stack removeLastObject]; }

         // [result stringByAppendingString:symbol];

            if( [stack lastObject]){
            [result appendString:[stack lastObject]];
                [stack removeLastObject];}

            [result appendString:@")"];

            [stack addObject:result];
        }
}

return [stack lastObject];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:40:19.730

代码中的一个主要问题是您对`stringByAppendingString`: 的使用，因为`NSString`它是*不可变*的，所以代码应该将从方法返回的结果分配给原始字符串，如下所示：

```
result = [result stringByAppendingString:[stack lastObject]]; 
```

当您需要动态连接多个字符串时，更好的方法是使用`NSMutableString`. 这是一个子类，`NSString`它允许您附加其他字符串，如下所示：

```
[result appendString:[stack lastObject]]; 
```

您可以使用该`stringWithFormat:`方法完全避免附加字符串。

以程序的内容开始堆栈也不是正确的做法：您应该`program`一个一个地遍历符号，压入数字，并通过弹出最后两个项目来处理操作，在左右两侧插入操作，在其周围添加括号，并将其推回堆栈。

```
+ (NSString *)descriptionOfProgram:(NSArray*)program {
    NSArray *ops = [NSArray arrayWithObjects:@"+",@"-",@"*",@"/",@"sin",@"cos",nil];
    NSMutableArray *stack = [NSMutableArray array];
    for (NSString *s in program) {
        if ([ops indexOfObject:s] != NSNotFound) {
            NSString *lhs = [stack lastObject];
            [stack removeLastObject];
            NSString *rhs = [stack lastObject];
            [stack removeLastObject];
            [stack addObject:[NSString stringWithFormat:@"(%@ %@ %@)", lhs, s, rhs]];
        } else {
            [stack addObject:s];
        }
    }
    return [stack lastObject];
} 
```

# ruby - 在 Fedora15 上使用 RVM 配置 Ruby 失败

> ID：11479967
> 
> 赞同：1
> 
> 时间：2012-07-14T00:32:05.153
> 
> 标签：ruby, installation, rvm

我跑来`rvm install 1.9.3`更新我的 Fedora 15 上的 Ruby。但它失败并显示消息：

```
 checking for an ANSI C-conforming const... no
    checking for working volatile... yes
    configure: error: ANSI C-conforming const and volatile are mandatory 
```

到处搜索，但找不到解决方案。任何人都可以帮忙吗？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:48:25.350

我无法使用 gcc-4.6.3 运行 rvm 来安装任何版本的 ruby​​。最后通过帖子中的建议解决它： [install bundler using rvm, ruby​​ 1.8.7 with gcc 4.7 on linux](https://stackoverflow.com/questions/10820323/install-bundler-using-rvm-ruby-1-8-7-with-gcc-4-7-on-linux/11496911#11496911)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:49:23.567

您是否安装了所有必需的依赖项？如果没有，请运行`rvm notes` 然后安装所需的软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T19:05:27.357

我在linux中安装时遇到了这个错误。原来是因为我添加了`--64`可能仅适用于[MAC](https://github.com/wayneeseguin/rvm/issues/639)的选项。当我删除该标志时，该错误消息消失了。

# php - 这个运算符 <> 在 php 中是什么意思？

> ID：11479973
> 
> 赞同：0
> 
> 时间：2012-07-14T00:33:09.423
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

'<>' 是什么意思？

```
if ($class->stuff <> 'specific') 
```

刚做一个小项目，遇到了一个奇怪的符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:34:43.220

它的意思是：

> 不同的

并且等价于`!=`

您可以[在此处查看包含所有比较运算符的表格](http://br.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:36:26.520

字面意思是“小于或大于”，意思是“不等于”

# php - 为 CakePHP 加载 Facebook 插件和配置应用程序

> ID：11479974
> 
> 赞同：2
> 
> 时间：2012-07-14T00:33:10.827
> 
> 标签：php, cakephp, cakephp-1.3

我是 CakePHP 的新手，但我已经开始使用 CakePHP 2.0。不幸的是，我的主机安装了 PHP 5.2.6，而 CakePHP 2 无法运行。我想在我的 CakePHP 1.3 应用程序中添加一个 Facebook 插件。我将插件下载到文件夹中并从`app\plugins\facebook`复制到`facebook.php``app\plugins\facebook\config\facebook.php``app\config\facebook.php`

```
class AppController extends AppController { 
    var $helpers    = array('Facebook.Facebook');     
} 
```

它报告缺少 facebook 助手`app\views\helpers\facebook.php`

```
<?php CakePlugin::load('Facebook'); ?> //in bootstrap.php is giving an error 
```

我会做些什么`bootstrap.php`来导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-09T07:44:09.523

您只需在 app/Config/bootstrap.php 中启用插件，您还需要添加您的 appID 和 AppSecret。

有关详细信息，您可以在以下链接中查看配置

[https://github.com/Pollenizer/CakePHP-Facebook-Plugin](https://github.com/Pollenizer/CakePHP-Facebook-Plugin)

希望对你有效。

# python - Python获取所有封闭文件的列表

> ID：11479978
> 
> 赞同：0
> 
> 时间：2012-07-14T00:33:54.570
> 
> 标签：python

我已经在这里待了几个小时...如何使用python从文件夹中获取所有封闭文件...现在封闭是指包含在文件夹中的文件夹中的所有文件等。所以所有文件超出了使用Python的某个点。

我曾尝试使用 glob.glob() 和 listdir() 来执行此操作，但它们仅适用于第一级代码。如果python有办法区分文件和文件夹，我可以让它工作吗？有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:35:20.827

你想要`os.walk()`。它将为您提供起始目录下每个目录中的文件和文件夹列表。

# javascript - 如何通过 Jquery 单击链接添加输入？

> ID：11479979
> 
> 赞同：2
> 
> 时间：2012-07-14T00:34:14.797
> 
> 标签：javascript, jquery

我有 4 个输入，其中 3 个是隐藏的。我想要的是每当用户将“添加更多图片”。它将显示隐藏的输入，与单击链接的时间一样多。我不知道它将如何在 Jquery 中工作？如果有人帮助我将不胜感激。

```
<html>
<head>
</head>
<body>
<form>
<input type="file" id="pic1" />
<input type="file" style="display:none;" id="pic2" />
<input type="file" style="display:none;" id="pic3" />
<input type="file" style="display:none;" id="pic4" />

<a href="#" id="AddMore">Add More Links</a>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:39:07.427

试试这个：

```
$('#AddMore').click(function(e){
   e.preventDefault();
   $('input[type="file"]:hidden:first').show()
}) 
```

[演示](http://jsfiddle.net/TaSPq/)

# css - 左边距的默认单位是什么

> ID：11479985
> 
> 赞同：1
> 
> 时间：2012-07-14T00:35:28.970
> 
> 标签：css

在 css 中，margin-left 的默认值为 0。我知道不需要单位，因为它是 0。不管是 em 还是 px。但是我在公司继承了代码，其中指出：

左边距：10；

我猜这意味着默认情况下为 10px？我想我可以同时尝试 em 和 px 看看什么时候看起来更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:44:29.837

没有默认单位。

CSS 无效，因为非零值没有单位。

浏览器将以不同的方式处理不正确的代码，具体取决于它是什么浏览器，以及页面呈现的模式。在 quirks 模式下（没有 doctype），大多数浏览器会尝试使用 unit 来更正代码`px`。在标准合规模式下（使用正确的文档类型），大多数浏览器将忽略该样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T00:36:19.127

`px`如果没有指定单位，旧版浏览器默认假定。较新的需要一个单位，因此将忽略该边距。

# youtube - 网站上的 Youtube 自动播放

> ID：11479994
> 
> 赞同：0
> 
> 时间：2012-07-14T00:36:43.070
> 
> 标签：youtube, embed

我正在尝试找到一种方法，让用户进入网站时自动开始播放 youtube 链接。有谁知道如何做到这一点。我已经在链接中阅读了有关使用自动播放的内容。这是嵌入我的页面的链接。

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/kttooVrewF8" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:42:45.017

这是您的链接的外观。只需在 url 后面加上 autoplay=1 即可。您也可以尝试将 ?autoplay=1 放在后面。希望这可以帮助。健康长寿·繁荣昌盛。

# ios - 多对多上的核心数据 removeObject 导致对象设置为 null

> ID：11479997
> 
> 赞同：1
> 
> 时间：2012-07-14T00:36:54.553
> 
> 标签：ios, core-data, many-to-many

我有两个对象 Contact 和 DealContact ，它们具有一对多和反向关系集。我在 DealContact 上有 Core Data 生成的访问器，称为**removeContactsObject**。DealContact 与称为联系人的联系人之间存在多对多关系。当我这样做时：

```
[dealContact removeContactsObject:oneContact]; 
```

在我保存或执行任何其他操作之前，它会导致 dealContact 对象变为 null。我还尝试了以下方法：

```
NSSet *contactSet = [dealContact mutableSetValueForKey:@"contacts"];
[contactSet removeObject:oneContact];
[dealContact setContacts:contactSet]; 
```

没有成功。dealContact 对象在任一操作后变为空。如何从关系中删除联系人对象（而不是删除）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:32:31.033

假设您没有使用 ARC。您可能只需要`retain`在删除之前向联系人对象发送一条消息。当对象从集合中移除时，它将被释放，managedObjectContext 默认不保留它的注册对象，因此集合可能是唯一持有它的对象。例如

```
[dealContact retain];
[dealContact removeContactsObject:oneContact];
//.... add to new relationship
[dealContact release]; 
```