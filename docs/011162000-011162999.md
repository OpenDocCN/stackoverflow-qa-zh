# StackOverflow 问答 11162000-11162999

# javascript - 我什么时候应该使用 this.x 和 var x？

> ID：11162005
> 
> 赞同：6
> 
> 时间：2012-06-22T18:22:11.423
> 
> 标签：javascript, oop

在制作 javascript 类函数时，我使用`this.`了很多。但是在使用它的同时，它让我想知道它是否会有所作为`var`。

```
var myClass = function() {
    this.x = 4;
    return {
        getVal: this.x
    };
} 
```

与使用 var 做同样的事情

```
var myClass = function() {
    var x = 4;
    return {
        getVal: x
    };
} 
```

有什么区别，我应该什么时候使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T18:28:20.257

带有`this`变成`public`变量的变量，带有`var`变成变量的`private`变量。

`this`用关键字声明的变量或函数成为类的**实例成员**，这意味着它们将在该类的每个新创建的实例中可用。当您使用 时`this`，您已经创建了一个类，您需要使用`new`关键字对其进行实例化，如下所示。

**例子：**

```
function Foo() {
  // private var
  var bar = 'I am bar';
  // public var
  this.baz = 'I am baz';
}

var f = new Foo;
console.log(f.bar); // undefined
console.log(f.baz); // I am baz 
```

* * *

> 在制作 javascript 类函数时，我正在使用它。很多。但是在使用它的同时，它让我想知道使用 var 是否会有所不同。

存在显着差异，`this`除非另有需要，否则不应使用不希望出现在类实例中的关键字创建变量。这只会产生开销，并且是Crockford 所说的**计算浪费。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:24:02.603

您可以使用 访问`this.x`，`myClass.x`但您不能这样做`var x`。这都是关于封装的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:28:38.140

如果你不需要继承，闭包（var 情况）和对象（this 情况）基本上做同样的事情并且[大致可以互换](http://c2.com/cgi/wiki?ClosuresAndObjectsAreEquivalent)。

要记住的差异：

*   当您使用“this”时，需要使用“new”调用构造函数，如果将方法存储在变量中或将它们作为回调传递，则需要使用 .call 调用方法。

*   如果您实例化大量对象，可能会有性能差异（当前引擎可能更好地使用对象 - 但前提是您将方法放在原型中而不是在构造函数中设置它们）

*   用“var”声明的变量是私有的，不能在函数外访问。有时这没问题，但这可能会阻止您进行继承（没有“在 Javascript 中保护”的概念）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T18:34:58.650

`this:x`就像实例变量。这些变量具有公共范围。在 OOP 中用作类变量。

虽然`var x;`范围有限。这些变量的行为类似于私有变量，并且可以在本地范围内访问。

# c# - UserPrincipal.GetGroups 与 UserPrincipal.GetAuthorizationGroups？

> ID：11162008
> 
> 赞同：9
> 
> 时间：2012-06-22T18:22:27.413
> 
> 标签：c#, asp.net-mvc-3, active-directory

我正在使用 ASP.Net 4.0 MVC 来查询活动目录。我正在尝试获取用户组成员身份的列表并遍历它们。我有一个奇怪的问题。要获取我正在使用的组：

```
 PrincipalSearchResult<Principal> groups = up.GetGroups(); 
```

这在 localhost 上运行良好，但在移动到 IIS6 时返回一个空集。所以我尝试使用这个：

```
 PrincipalSearchResult<Principal> groups = up.GetAuthorizationGroups(); 
```

这在 IIS6 上运行良好，但在 localhost 上返回一个空集。这两种方法有什么区别？为什么我可以在 IIS6 中使用一个，而不是在 localhost 上？为什么我可以在 localhost 而不是在 IIS6 中使用另一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-09-17T15:51:43.577

为什么部分已经回答，但这可能有助于想知道这两种方法之间功能差异的人。来自 MS 文档：

> [GetGroups](https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.accountmanagement.principal.getgroups?redirectedfrom=MSDN&view=netframework-4.7.2#overloads "获取组") - 返回组对象的集合，这些对象指定当前主体所属的组。
> 
> 此重载方法仅返回主体直接所属的组；不执行递归搜索。
> 
> [GetAuthorizationGroups](https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.accountmanagement.userprincipal.getauthorizationgroups?redirectedfrom=MSDN&view=netframework-4.7.2#System_DirectoryServices_AccountManagement_UserPrincipal_GetAuthorizationGroups "获取授权组") - 返回包含此用户所属的所有授权组的主体对象的集合。此函数仅返回属于安全组的组；不返回通讯组。
> 
> 此方法递归搜索所有组并返回用户所属的组。返回的集合还可能包括系统出于授权目的而将用户视为成员的其他组。

所以`GetGroups`获取用户是**直接**成员的所有组，并**获取**用户是**直接或间接**成员的所有**授权组。****`GetAuthorizationGroups`**

 ******尽管它们的命名方式不同，但其中一个不是另一个的子集。可能有由`GetGroups`不返回的组返回`GetAuthorizationGroups`，反之亦然。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T21:02:47.400

我假设`GetAuthorizationGroups()`调用 AD 中的 tokenGroups。要阅读此内容，您的服务帐户（或 IIS 计算机帐户，如果是网络服务）需要位于 AD 中的 Windows 授权访问组中。******

# javascript - 将 javascript 集成到 DOM 的主体代码中

> ID：11162011
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:22:46.753
> 
> 标签：javascript, html, dom

我需要 Javascript 专家的帮助。

一旦函数 write_it() 被执行，我似乎无法弄清楚如何将下面的代码集成到 DOM 中。此代码允许用户单击一行并将其突出显示。

这是需要插入到下面代码中的代码（不知何故）：

```
<script type="text/javascript" >
(function() {
var color = "#E1E0D7"
var rows = document.getElementById("mstrTable").getElementsByTagName("tr");
var n = rows.length;
var bgcs = [];
for(var i=0; i<n; ++i) bgcs[i] = rows[i].style.backgroundColor;
//rows[0].style.backgroundColor = color;
function changeColor(e) {
if(!e) e = window.event;
var o = e.target? e.target: e.srcElement;
while(o.tagName && o.tagName.toLowerCase()!="tr") o = o.parentNode;
for(var i=0; i<n; ++i) {
rows[i].style.backgroundColor = bgcs[i];
if(rows[i]==o) rows[i].style.backgroundColor = color;
}
}
if(document.addEventListener) for(var i=0; i<n; ++i) rows[i].addEventListener("click", changeColor, false);
else for(var i=0; i<n; ++i) rows[i].attachEvent("onclick", changeColor);
})();
</script>
<html>
<head>
    <title>Scrolling Data Grid</title>
<style>
/* ==================================================================== */
/* SCROLLING DATA GRID - IE ONLY!                                       */
/* ==================================================================== */
/* 
Tables inside a scrollingdatagrid should have:
 1\. border-collapse:separate
 2\. No border or margin
 3\. Background colors on all cells to avoid bleed-thru on scroll
 4\. cellspacing="0" on the <table> tag itself
*/
DIV.scrollingdatagrid {
    overflow-x:auto;
    overflow-y:auto;
    position:relative;
    padding:0px;
}
DIV.scrollingdatagrid TABLE {
    width : 98.7%; /* Make room for scroll bar! */
    margin:0px;
    border:0px;
    border-collapse:separate;
}
DIV.scrollingdatagrid TABLE TR .locked, DIV.scrollingdatagrid TABLE THEAD TR, DIV.scrollingdatagrid TABLE TFOOT TR {
    position:relative;
}
/* OffsetParent of the TR is the DIV because it is position:relative */
DIV.scrollingdatagrid TABLE THEAD TR {
    top:expression(this.offsetParent.scrollTop);
}

/* Make the z-index values very clear so overlaps happen as expected! */
DIV.scrollingdatagrid TD, DIV.scrollingdatagrid TH { z-index:1; }
DIV.scrollingdatagrid TD.locked, DIV.scrollingdatagrid TH.locked { z-index:2; }
DIV.scrollingdatagrid THEAD TR, DIV.scrollingdatagrid TFOOT TR { z-index:3; }
DIV.scrollingdatagrid THEAD TR TH.locked { z-index:4; }
</style>

<script type="text/javascript">
window.onload = function(){ write_it() }

function write_it() {

var cn      =   new ActiveXObject("ADODB.Connection")
var rs      =   new ActiveXObject("ADODB.Recordset")
var dbFile  =   "imts.mdb"
var dbPath  =   "G:\\AS\\Asf\\ASF\\IMTS\\V8\\database\\"

var mySQL   = "SELECT * FROM tbl_imts WHERE [FILE NUMBER] LIKE '%99%'"
var html    = ""

cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = " + dbPath + dbFile + "");
rs.Open(mySQL, cn, 1, 3)

html += '<table id="mstrTable" style="table-layout: fixed; font-family: arial; font-size: 9pt;" cellpadding="0" cellspacing="0">\n'
html += '<thead>\n'
html += '<tr>\n'
html += '<th class="locked" style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); text-align: center; height: 30px; width: 20px; color: rgb(102,102,102); background-color: rgb(212,208,200);">#</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(0).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(1).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(2).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(3).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(4).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(5).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(6).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(7).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(8).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(9).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(10).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(11).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(12).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(13).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(14).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: none; padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(15).name + '</th>\n'
html += '</tr>\n'
html += '</thead>\n'

rs.MoveFirst
var i = 0
html += '<tbody>\n'
while (!rs.eof) {
++i
html += '<tr style="color: rgb(102,102,102)">\n'
html += '<td class="locked" style="height: 20px; text-align: center; border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128);">'+i+'.</td>\n'
    for (var r = 0; r < rs.fields.count; ++r) {
    if (!rs.fields(r).value) { rs.fields(r).value = "&nbsp;" }
    html    +=  '<td style="border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128); padding-left: 5px; white-space: nowrap; overflow: hidden;">'+rs.fields(r).value+'</td>\n'
    }//end of for
    html    +=  '</tr>\n'
    rs.MoveNext 
    }//end of while
html += '</tbody>\n'
html += '</table>\n'

document.getElementById("p1").innerHTML = html
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:33:43.503

首先，您应该首先将顶部`<script>`块移动到`<head>`HTML 文档的一部分中。

然后，在你这样做之后，尝试更详细地描述你提供的代码的哪一部分想要进入 DOM。

也许您可以尝试描述您尝试过的方法以及您认为它不起作用的原因...

# php - 将 _blank 添加到所有外部链接

> ID：11162016
> 
> 赞同：3
> 
> 时间：2012-06-22T18:23:10.347
> 
> 标签：php, uri, str-replace

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)
> [解析包含“href”标签中特定单词的所有链接](https://stackoverflow.com/questions/8208240/php-parse-all-links-that-contain-a-speciffic-word-in-href-tag/8209363#8209363)

我正在使用以下函数将 _blank 添加到我网站上的所有链接中。

```
function targetBlank($text) {
  $return = str_replace('<a', '<a target="_blank"', $text);
  return $return;
} 
```

我正在寻找一种解决方案，仅将此功能应用于外部链接（而不是我的域）而不是所有链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:29:29.420

这是一个尝试的解决方案，它依赖于`$_SERVER['HTTP_HOST']`：

```
function targetBlank($text) {
  if( strpos( $text, $_SERVER['HTTP_HOST'] ) === false )
      return str_replace('<a', '<a target="_blank"', $text);
  return $text;
} 
```

未经测试，但它应该工作。@meager 也是正确的，因为如果该标签已经定义了一个目标，这将产生格式错误的锚标签，但是，因为它只会对您传入的 html 字符串进行操作，然后`<abbr>`等应该是安全的，只要您只通过带有锚标记的字符串。

# c# - 如何重命名和公开第 3 方 dll 中的类型

> ID：11162017
> 
> 赞同：0
> 
> 时间：2012-06-22T18:23:10.763
> 
> 标签：c#, .net-assembly

自定义程序集有没有办法重命名并公开第 3 方 dll 的类型？

```
// Assembly Foo (cannot change code)
namespace Foo
{
    enum XValues
    {
        Val1, Val2;
    }
}

// Assembly Bar
// References Foo
namespace Bar
{
    using Foo;
    // Code that exposes Foo.XValues as Bar.YValues
}

// Assembly Client
// References Bar
namespace Client
{
    void Main() {
        Console.WriteLine(Bar.YValues.Val1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:26:26.380

> 自定义程序集有没有办法重命名并公开第 3 方 dll 的类型？

不，是简短的答案。类型是类型是类型。您可以创建*自己的*枚举，`Bar`其中具有相同的值，并在需要时在它们之间进行转换。

你想达到什么目标——更大的图景是什么？可能有比您想的更好的解决方案。

# image - Matlab .exe 不工作

> ID：11162022
> 
> 赞同：0
> 
> 时间：2012-06-22T18:23:19.017
> 
> 标签：image, webcam, matlab, matlab-deployment

我有一个 Matlab 代码，我已将其制成 exe 并从 VB6 运行。我需要不断地在代码中保存从网络摄像头获取的图像，这似乎没有发生。当我运行exe时，图片不会保存在那个位置，而是只有在我关闭它之后才会保存。但我需要在运行 exe 文件期间保存图像。我的代码是：

```
function [im]=cam_img()
clear all
clc
tic;

vid=videoinput('winvideo');
vid.FramesPerTrigger=1;
while(1)
endtime=toc;
if(mod(round(endtime),3)==0)
    image=getsnapshot(vid);
    image=rgb2gray(image);
    imwrite(image,'pixellinkimage.jpg')
end
end
end 
```

我该怎么办？请告诉我。多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:34:39.417

你的问题是这样的：

```
while(1) 
```

这是一个无限循环，永远不会退出

# c# - 如何从 Winform 的按钮调用 WPF 命令？

> ID：11162026
> 
> 赞同：0
> 
> 时间：2012-06-22T18:23:30.627
> 
> 标签：c#, wpf, winforms

我正在使用 winform 并通过`ElementHost`.

如何`ICommand`从 Winforms 按钮的单击事件中调用 WPF？这些对我来说都是新的，所以请耐心回答这些问题。

我目前的代码是

```
CarView car = (CarView) CarHost.Child;         
CarViewModel cvm = (CarViewModel) car.DataContext;
cvm.SaveCommand.Execute(null); 
```

因此，通过这样做，我可以调用`SaveCommand`，但我没有得到任何数据。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:47:31.580

我可能在这里遗漏了一些东西。通常你会做这样的事情：

```
<Button Command="{Binding MyCommand}" /> 
```

然后当有人点击按钮时，MyCommand 的 Execute 方法就会被调用。

我想，从代码隐藏中，你可以调用：

```
private void OnClick(object sender, RoutedEventArgs e)
{
    if (MyCommand.CanExecute(null))
        MyCommand.Execute(null);
} 
```

但除了非常具体的情况（你没有提到），我不确定你为什么要那样做。我认为你肯定需要给我们更多的信息。

# android - android MAP半径和标记未居中

> ID：11162027
> 
> 赞同：1
> 
> 时间：2012-06-22T18:23:38.097
> 
> 标签：android, google-maps

嘿，这是我为获取半径和当前位置点而写的。但它没有居中和显示。我做错了什么？如下图所示，请善意地帮助我进行接线。谢谢你

![在此处输入图像描述](../Images/f56e04a948e67d2f2f2d28476967728f.png)

```
public class MappingActivity extends MapActivity {
    /** Called when the activity is first created. */

    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;
    Drawable d;
    List<Overlay> overlaylist;

    public double lat;
    public double lng;
    Button checkin, addplace;

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in
                                                                        // Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 10000; // in
                                                                    // Milliseconds

    protected LocationManager locationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapV = (MapView) findViewById(R.id.mapview);
        checkin = (Button) findViewById(R.id.check);
        addplace = (Button) findViewById(R.id.addp);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, new MyLocationListener());

        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            lat = 6;//location.getLatitude();
            lng = 77.6;//location.getLongitude();

        }

        Button check = (Button) findViewById(R.id.check);
        Button addplace = (Button) findViewById(R.id.addp);
        Button nearby = (Button) findViewById(R.id.point);

        check.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Checked the Plce");
            }
        });
        addplace.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Added the Plce");
            }
        });
        nearby.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Nearby the Plce");
            }
        });

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    public class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            String message = String.format("You are Here");

            Toast.makeText(MappingActivity.this, message, Toast.LENGTH_LONG)
                    .show();

            GeoP = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

            mControl = mapV.getController();
            mControl.animateTo(GeoP);
            mControl.setZoom(19);

            MapOverlay mapOverlay = new MapOverlay();
            List<Overlay> listOfOverlays = mapV.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);        
            mapV.invalidate();

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        class MapOverlay extends com.google.android.maps.Overlay
        {
            @Override
            public void draw(Canvas canvas, MapView mapView, boolean shadow) {

                 super.draw(canvas, mapView, shadow); 

                 Projection projection = mapView.getProjection();

                 Point pt = new Point();

                 projection.toPixels(GeoP ,pt);
                 float circleRadius = projection.metersToEquatorPixels(50);

                 Paint innerCirclePaint;

                 innerCirclePaint = new Paint();
                 innerCirclePaint.setColor(Color.BLUE);
                 innerCirclePaint.setAlpha(25);
                 innerCirclePaint.setAntiAlias(true);

                 innerCirclePaint.setStyle(Paint.Style.FILL);

                 Paint CirclePaint;
                 CirclePaint = new Paint();
                 CirclePaint.setColor(Color.BLUE);
                 CirclePaint.setAlpha(100);
                 CirclePaint.setAntiAlias(true);

               //---add the marker---
                    Bitmap bmp = BitmapFactory.decodeResource(
                        getResources(), R.drawable.point);            
                    canvas.drawBitmap(bmp, pt.x, pt.y-bmp.getHeight(), CirclePaint);              
                    super.draw(canvas,mapView,shadow);

                 canvas.drawCircle((float)pt.x, (float)pt.y, circleRadius, innerCirclePaint);

            }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:59:37.217

您的示例代码对我来说很好，但我使用它有点不同

```
public class Map extends MapActivity{

    private double latitude, longitude, accuracy;
    private int centerLatitude, centerLongitude;
    private MyLocationOverlay userLocationOverlay;
    private MapView mapView;
    private GeoPoint point, center;
    private MapController mapController;
    private CountDownTimer timer;
    @Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_view);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.dotpin);
    MyItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable, this);

    //Open Database
    DbHelper dbHelper = new DbHelper(getApplicationContext());
    SQLiteDatabase db = dbHelper.getReadableDatabase();

    //Get Values
    String[] Labels = {DbHelper.Latitude, DbHelper.Longitude, DbHelper.Accuracy};
    Cursor cursor = db.query(DbHelper.TABLE_NAME, Labels, null, null, null, null, null);
    if(cursor.moveToFirst()){
        do{
            latitude = cursor.getDouble(cursor.getColumnIndex(Labels[0])) *1000000;
            longitude = cursor.getDouble(cursor.getColumnIndex(Labels[1])) *1000000;
            accuracy = cursor.getDouble(cursor.getColumnIndex(Labels[2]));
        }while(cursor.moveToNext());
    }

    //Close Database
    cursor.close();
    db.close();
    dbHelper.close();

    //User Location Overlay
    userLocationOverlay = new MyLocationOverlay(getApplicationContext(), mapView);

    //Set Location Overlay
    point = new GeoPoint((int)(latitude),(int)(longitude));
    OverlayItem overlayitem = new OverlayItem(point, "Radius", String.format("%.0f m", accuracy));
    itemizedoverlay.addOverlay(overlayitem);

    //Add overlays
    MapOverlay mapOverlay = new MapOverlay();
    mapOverlays.add(mapOverlay);
    mapOverlays.add(userLocationOverlay);
    mapOverlays.add(itemizedoverlay);
}

@Override
protected void onResume() {
    super.onResume();
    userLocationOverlay.enableMyLocation();

    //Pan to location
    mapController = mapView.getController();

    //Update the map view
    zoomUpdate();

    //Refresh view
    mapView.postInvalidate();
}

@Override
protected void onPause() {
    super.onPause();
    userLocationOverlay.disableMyLocation();
    if(timer!=null)
        timer.cancel();
}

protected void zoomUpdate(){
    if(timer != null)
        timer.cancel();
    timer = new CountDownTimer(5000, 1000) {
        public void onTick(long millisUntilFinished){}
        public void onFinish() {
            if(userLocationOverlay.getMyLocation() != null)
                zoomInOnPoints(point, userLocationOverlay.getMyLocation());
            else
                Toast.makeText(getApplicationContext(), "Waiting for location", Toast.LENGTH_SHORT).show();
            zoomUpdate();
        }
    };

    timer.start();
}

@SuppressWarnings("deprecation")
private void zoomInOnPoints(GeoPoint setLocation, GeoPoint userLocation) {
    int x_pixels = getWindowManager().getDefaultDisplay().getWidth();
    int y_pixels = getWindowManager().getDefaultDisplay().getHeight();
    boolean set = false;
    int latSpan, longSpan, rightEdge, leftEdge, topEdge, bottomEdge;
    boolean setIsIn, userIsIn;
    center = new GeoPoint((point.getLatitudeE6() + userLocationOverlay.getMyLocation().getLatitudeE6())/2,(point.getLongitudeE6() + point.getLongitudeE6())/2);
    centerLatitude = center.getLatitudeE6();
    centerLongitude = center.getLongitudeE6();
    mapController.animateTo(center);
    while(!set){            
        latSpan = mapView.getLatitudeSpan();
        longSpan = mapView.getLongitudeSpan();
        rightEdge = centerLongitude+longSpan/2;
        leftEdge = centerLongitude-longSpan/2;
        topEdge = centerLatitude+latSpan/2;
        bottomEdge = centerLatitude-latSpan/2;
        setIsIn = setLocation.getLatitudeE6() > bottomEdge && setLocation.getLatitudeE6() < topEdge && setLocation.getLongitudeE6() < rightEdge && setLocation.getLongitudeE6() > leftEdge;
        userIsIn = userLocation.getLatitudeE6() > bottomEdge && userLocation.getLatitudeE6() < topEdge && userLocation.getLongitudeE6() < rightEdge && userLocation.getLongitudeE6() > leftEdge;
        if(setIsIn && userIsIn && mapView.getZoomLevel() < mapView.getMaxZoomLevel()){
            mapController.zoomInFixing(x_pixels/2, y_pixels/2);
            mapController.animateTo(center);
            mapView.postInvalidate();
        }
        else{
            while(!set){
                latSpan = mapView.getLatitudeSpan();
                longSpan = mapView.getLongitudeSpan();
                rightEdge = centerLongitude+longSpan/2;
                leftEdge = centerLongitude-longSpan/2;
                topEdge = centerLatitude+latSpan/2;
                bottomEdge = centerLatitude-latSpan/2;
                setIsIn = setLocation.getLatitudeE6() > bottomEdge && setLocation.getLatitudeE6() < topEdge && setLocation.getLongitudeE6() < rightEdge && setLocation.getLongitudeE6() > leftEdge;
                userIsIn = userLocation.getLatitudeE6() > bottomEdge && userLocation.getLatitudeE6() < topEdge && userLocation.getLongitudeE6() < rightEdge && userLocation.getLongitudeE6() > leftEdge;
                if(!(setIsIn && userIsIn) && mapView.getZoomLevel() > 1){
                    mapController.zoomOutFixing(x_pixels/2, y_pixels/2);
                    mapController.animateTo(center);
                    mapView.postInvalidate();
                }
                else{
                    set = true;
                }
            }
        }
    }
}

public class MyItemizedOverlay extends ItemizedOverlay {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public MyItemizedOverlay(Drawable arg0, Context context) {
        super(boundCenter(arg0));
        mContext = context;
        // TODO Auto-generated constructor stub
    }

    @Override
    protected OverlayItem createItem(int arg0) {
        return mOverlays.get(arg0);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return mOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected boolean onTap(int index) {
      OverlayItem item = mOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
    }
}

class MapOverlay extends com.google.android.maps.Overlay
{
    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {

         super.draw(canvas, mapView, shadow); 

         Projection projection = mapView.getProjection();

         Point pt = new Point();

         projection.toPixels(point ,pt);
         float circleRadius = projection.metersToEquatorPixels((float)accuracy);

         Paint innerCirclePaint;

         innerCirclePaint = new Paint();
         innerCirclePaint.setColor(Color.BLUE);
         innerCirclePaint.setAlpha(25);
         innerCirclePaint.setAntiAlias(true);

         innerCirclePaint.setStyle(Paint.Style.FILL);

         Paint CirclePaint;
         CirclePaint = new Paint();
         CirclePaint.setColor(Color.BLUE);
         CirclePaint.setAlpha(100);
         CirclePaint.setAntiAlias(true);

         canvas.drawCircle((float)pt.x, (float)pt.y, circleRadius, innerCirclePaint);
    } 
```

}

}

# android - Android 光标最大尺寸

> ID：11162031
> 
> 赞同：6
> 
> 时间：2012-06-22T18:23:51.853
> 
> 标签：android, database, sqlite, limit, android-cursor

看来android中的游标最多只能容纳1 MB的数据。

从 SQLite 数据库中保持在 1 MB 限制以下的表中提取最大行数的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T00:10:47.803

我认为没有确定正确限制的硬性和快速方法，但我查看了 CursorWindow 文档，发现这`copyStringToBuffer (int row, int column, CharArrayBuffer buffer)`似乎很有希望，因为 CharArrayBuffer 有一个名为 sizeCopied 的整数字段，并且该方法`copyStringToBuffer`在指定的行和列中获取文本。也许您可以从缓冲区中获取大小并为您拥有的每一行和每一列添加？如果你使用 SQLiteCursor，你可以使用它`setWindow(CursorWindow window)`来设置你自己的窗口。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T18:27:41.417

您可以放置​​ LIMIT 子句，以便部分获取行。

# jquery - 反转悬停状态

> ID：11162032
> 
> 赞同：0
> 
> 时间：2012-06-22T18:23:53.277
> 
> 标签：jquery, css, jquery-selectors, hover

我有一组缩略图图像，现在当图像悬停时会出现一些文本，所以我想做的是反转这种行为，默认显示悬停的文本，当文本悬停时显示图像。

缩略图图像的标记是由一些 jquery 函数生成的，这让我感到困惑。

这是代码：

```
<?php if($orderby == 'date'){ ?>
            var fg_divthumbimg = $(this).parent().parent().parent();
            fg_divthumbimg.css({'display':'block'});
        <?php }else{ ?>
            var fg_divthumvsecdiv = $("<div>").addClass("hoverbgpfthnailmiddle").css({'float':'left', 'line-height':'0', 'background-color':'<?php echo get_option("bgchanger_color"); ?>'}).append($(this)); //fg_divthumbimgi
            var fg_divhoverbg = $("<div>").addClass("hoverbgpfthnail").css({"background-color" : (srcobj.color)?srcobj.color:"#008eeb" }).append(fg_divthumvsecdiv);
            var fg_divhoverbgmetadata = $("<div>").addClass("hoverbgpfthnailmetadata").html('<span class="thumb_title">'+srcobj.thumb_title+'</span><span class="thumb_cats">'+srcobj.thumb_cats+'</span><span class="thumb_plus">+</span>');//.append(fg_divthumvsecdiv);
            var fg_divthumbimg = $("<div>").attr("class","imgcontainer").attr('rel', srcobj.rel).css({'display':'block', 'visibility':'visible', 'width':'0', 'overflow':'hidden'}).append(fg_divhoverbg);
            fg_divthumbimg.append(fg_divhoverbgmetadata);

            var fg_divhoverbghover = $("<div>").addClass("hoverbgpfthnailiface").hover(function(e){
                g_hover_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            },function(e){
                g_hoverout_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            }).click(function(){
                fg_imgpreview.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"));
            });
            if(jQuery.browser.msie){
                fg_divthumbimg.click(function(){
                    fg_imgpreview.apply($(this).children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"));
                }).hover(function(e){
                    g_hover_thumbnailsaltimg.apply($(this).children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                    e.stopPropagation();
                },function(e){
                    g_hoverout_thumbnailsaltimg.apply($(this).children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                    e.stopPropagation();
                });
                fg_divhoverbghover.unbind('click').unbind('hover');
            }

            fg_divthumbimg.append(fg_divhoverbghover);
            //fg_divthumvsecdiv.append(fg_divhoverbgmetadata);
            $(".imgscontainer").append(fg_divthumbimg);
        <?php } ?>

        //var fg_thumbimgpr = $(this).parent().parent(".imgcontainer");
        var fg_thumbimgpr = fg_divthumbimg;
        $(this).css({width: newimagewidth+'px'});
        fg_thumbimgpr.css({'visibility':'visible', width: newimagewidth+'px'});
        if(!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){
            $(this).css({'opacity':0}).animate({'opacity':1}, 400);
        }

    }; 
```

这是为缩略图生成的 html 代码：

```
 <div class="imgcontainer" rel=" all july " style="overflow: hidden; display: block; visibility: visible; width: 306px; ">
    <div class="hoverbgpfthnail" style="background-color: rgb(130, 187, 228); opacity: 1; ">
    <div class="hoverbgpfthnailmiddle" style="float: left; line-height: 0; background-color: rgb(0, 0, 0); ">
    <img class="pf_img" id="post-id-3370" style="cursor: pointer; width: 306px; opacity: 1; " src="http://whiteandgold.ro/ipp/wp-content/themes/konzept/image.php?width=400&amp;height=300&amp;cropratio=4:3&amp;image=http://whiteandgold.ro/ipp/wp-content/uploads/2012/06/fiestadelaqua.jpg">
    </div></div>
    <div class="hoverbgpfthnailmetadata" style="display: block; top: -7.2486857142857275px; opacity: 0; left: -307px; ">
    <span class="thumb_title">Fiesta del Agua</span><span class="thumb_cats">JULY</span><span class="thumb_plus">+</span>
    </div>
    <div class="hoverbgpfthnailiface"></div>
    </div> 
```

[你可以在这里](http://whiteandgold.ro/ipp/)看到一个现场版本：你能给我一些建议，关于如何改变它的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:30:11.783

这个块：

```
$("<div>").addClass("hoverbgpfthnailiface").hover(function(e){
                g_hover_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            },function(e){
                g_hoverout_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            }) 
```

包含两个`hover`函数——mouseenter 和 mouseleave，按顺序排列。要反转悬停效果，只需交换这两个内部函数：

```
$("<div>").addClass("hoverbgpfthnailiface").hover(function(e){
                g_hoverout_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            },function(e){
                g_hover_thumbnailsaltimg.apply($(this).parent().children(".hoverbgpfthnail").children(".hoverbgpfthnailmiddle").children(".pf_img"), [e]);
                e.stopPropagation();
            }) 
```

# java - 在 Java Swing 应用程序的屏幕的特定部分上持续的类似对话框的功能 - JDialog 功能是要走的路吗？

> ID：11162037
> 
> 赞同：2
> 
> 时间：2012-06-22T18:24:05.473
> 
> 标签：java, swing, jpanel, jdialog

扩展标题：

我有一个屏幕（我的主窗口，一个封装`JFrame`的 ），最有可能使用 a 创建`GridBagLayout`，因为我需要一个网格，其单元格是不同大小的矩形。其中一个矩形将是一个可延展的类似对话框的功能，根据应用程序的上下文具有不同的选项。

我的问题是，自定义 JDialogs 是否适合这里？或者我只是想要一个可重用的 JPanel，它具有我想要根据上下文显示或禁用的特定按钮？我希望这很清楚；谢谢。-B。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:30:42.843

解决`JPanel`方案。

JDialog 是一个重量级的[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，这意味着它的窗口由系统管理，不能作为另一个组件的子级嵌入。

# c# - MVC3 Ajax.BeginForm OnSuccess 不在 Firefox 中运行

> ID：11162038
> 
> 赞同：6
> 
> 时间：2012-06-22T18:24:06.270
> 
> 标签：c#, ajax, asp.net-mvc-3, firefox, forms

**最终编辑：**

在遵循 Darin Dimitrov 的回答后，我发现问题最终是对控制器方法的 AJAX 调用`UpdateForm()`返回了一个空字符串。这是我在遇到不同问题后不久发现必要的修改。传递一个空字符串会导致 Firefox 的解析器阻塞（而 Chrome 和 IE 显然不在乎）所以我用一个空的`div`.

**编辑：**

感谢 Darin Dimitrov 在下面的建议，我发现我遇到问题的原因是在提交相关表单时抛出错误。

![jQuery 错误](../Images/aa2989a2ebbc6e8d976d019a9f2820b9.png)

错误显示“无法在层次结构中的指定点插入节点”。每次提交表单时都会抛出此问题。我在 POST 数据中注意到它似乎认为这是一个 XMLHttpRequest。这是原因吗（有问题的 AJAX 请求只是返回 HTML）？这是来自 Firebug 的 POST 数据：

![发布数据 1](../Images/dc4e7d11118b10c09f260e8697095db1.png)

![发布数据 2](../Images/7b0d7e2970dc9f02688e70f79d6919c5.png)

![发布数据 3](../Images/f2c9cf5b9d744160540344c0ee9ad9a5.png)

此错误显示为“XML Parsing Error -- No Element Found”。

**仅供参考**-*返回的 HTML 始终是一个空字符串...*

* * *

我有一个在 IIS7 上运行的 MVC3 应用程序。在我的一个观点中，我有一个使用 Microsoft HTML 帮助函数构建的表单：

```
@using (Ajax.BeginForm("UpdateForm", new AjaxOptions { UpdateTargetId = "TargetDiv", InsertionMode = InsertionMode.InsertAfter, OnSuccess = "ClearTextBox" }))
{
    @Html.TextArea("txtInput", new { id = "txtInput", cols = "20", rows = "5", wrap = "virtual" })
    <input id="send" class="button" type="submit" value="Send"/><br />
} 
```

当控制器提供此视图时，这将生成以下 HTML：

```
<form action="/RootName/ControllerName/UpdateForm" data-ajax="true" data-ajax-mode="after" data-ajax-success="ClearTextBox" data-ajax-update="#TargetDiv" id="form0" method="post">
     <textarea cols="20" id="txtInput" name="txtInput" rows="5" wrap="virtual"></textarea>    
     <input id="send" class="button" type="submit" value="Send"><br>
</form> 
```

我基本上在这里尝试做的是将被`TextArea`调用文本中的文本`txtInput`，并将其附加到被`Div`调用函数的末尾，`TargetDiv`每当`Send`单击上面的按钮时，**并**`txtInput`在附加完成后通过`ClearTextBox()`方法（Javascript）清除文本. 附加始终适用于每个浏览器；当我在 Internet Explorer 或 Chrome 中运行时，文本的清除工作得很好。但是，Firefox 似乎不想调用该`ClearTextBox()`方法。

**`data-ajax-success`Firefox 与表单签名中的此选项不兼容吗？**

* * *

**我尝试过的事情**

我找到了这个人： [Ajax.BeginForm doesn't call onSuccess](https://stackoverflow.com/questions/7281290/ajax-beginform-doesnt-call-onsuccess)

解决方案是添加此脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

我正在调用这个脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

...但我试着换掉它以防万一。没有喜悦。

C# 聊天室中的一些人要求我尝试更改方法调用以包含括号，以便 HTML 如下所示：

```
<form action="/WebChat/TMWC/UpdateForm" data-ajax="true" data-ajax-mode="after" data-ajax-success="ClearTextBox()" data-ajax-update="#chatText" id="form0" method="post">
     <textarea cols="20" id="txtInput" name="txtInput" rows="5" wrap="virtual"></textarea>    
     <input id="send" class="button" type="submit" value="Send"><br>
</form> 
```

但这没有帮助。

C# Chat 中的人还建议我将 Javascript 调用替换为警报 - 如下所示：

```
<form action="/WebChat/TMWC/UpdateForm" data-ajax="true" data-ajax-mode="after" data-ajax-success="alert('yo!')" data-ajax-update="#chatText" id="form0" method="post">
     <textarea cols="20" id="txtInput" name="txtInput" rows="5" wrap="virtual"></textarea>    
     <input id="send" class="button" type="submit" value="Send"><br>
</form> 
```

虽然 Chrome 会弹出消息框，但 Firefox 不会！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:11:21.160

新创建的 ASP.NET MVC 3 应用程序中的状态没有重现。

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult UpdateForm()
    {
        return Content(DateTime.Now.ToLongTimeString());
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script type="text/javascript">
    function ClearTextBox() {
        $('textarea').val(''); 
    }
</script>

<form action="/Home/UpdateForm" data-ajax="true" data-ajax-mode="after" data-ajax-success="ClearTextBox" data-ajax-update="#TargetDiv" id="form0" method="post">
     <textarea cols="20" id="txtInput" name="txtInput" rows="5" wrap="virtual"></textarea>    
     <input id="send" class="button" type="submit" value="Send"><br>
</form>

<div id="TargetDiv"></div> 
```

在 Chrome、FF 和 IE 中运行良好。

此外，您可能希望确保 Content-Type 响应 HTTP 标头与您发送的实际响应相匹配。例如，我看到很多人`application/json`在响应正文中发送带有一些无效 JSON 的响应标头，这会导致更敏感的解析器阻塞。

# asp.net - 如何将 Sharepoint 博客集成到 ASP.NET Web 应用程序中？

> ID：11162042
> 
> 赞同：0
> 
> 时间：2012-06-22T18:24:16.720
> 
> 标签：asp.net, sharepoint

谷歌搜索没有得到任何有用的答案，所以我正在尝试你。

有没有人将 Sharepoint 博客集成到 ASP.NET Web 应用程序中？或者，您知道任何可用于检索和更新共享点博客内容的共享点网络服务吗？任何信息表示赞赏。

*   Sharepoint 是 MOSS 2010
*   该 Web 应用程序是一个 sitecore Intranet 门户 3.3，但这可能无关紧要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:49:27.383

对此没有简单的解决方案，但是您可以探索以下几种方法：

1) 在您的 .NET 应用程序中使用 SharePoint 博客 RSS 源以获取博客文章

2) 使用 SharePoint 客户端对象模型通过自定义代码与 SharePoint 交互。使用对象模型（通过 C# 或 VB），您可以创建新帖子（只是列表项）以及检索它们。这是开始使用客户端对象模型编写自定义代码的好地方：http: [//msdn.microsoft.com/en-us/library/ee857094.aspx](http://msdn.microsoft.com/en-us/library/ee857094.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:16:24.133

检查此开源 Web 部件

*   [http://www.bendsoft.com/downloads/sharepoint-web-parts/sharepoint-blog-reader/](http://www.bendsoft.com/downloads/sharepoint-web-parts/sharepoint-blog-reader/)

转换为通用 .net 使用会非常简单，请在他们的论坛 (http://forum.bendsoft.com) 上联系 Bendsoft，也许他们会帮助您完成一些工作。使用连接器时并不难。

该解决方案与 SP 2007、2010 以及 2013 等功能版本兼容。

# javascript - 我应该使用 self 还是 window 来引用全局范围？

> ID：11162045
> 
> 赞同：5
> 
> 时间：2012-06-22T18:24:35.230
> 
> 标签：javascript, coding-style, web-worker

作为一种风格约定，当我在全局范围内访问变量时，我喜欢明确，更喜欢

```
window.example = "Hello";
window.alert(window.example); 
```

不那么冗长

```
example = "Hello";
alert(example); 
```

我现在有一个可以直接从浏览器使用的模块，或者，如果它们可用，可以从网络工作者那里使用。在网络工作者中，全局对象被称为`self`，而在浏览器中，它被称为`window`。

该`window`对象具有 self 属性，`self.example = "Hello"`因此只要没有人重新声明`self`（就像他们经常做的那样：[var self = this](https://stackoverflow.com/questions/337878/js-var-self-this)），就可以在两种上下文中工作。

最好的约定是什么？

*   使用`self`并希望没有人声明冲突的`self`.
*   如果`window`已定义，则使用`window`，否则使用`self`。
*   还有什么？

考虑到这一点，我倾向于选择第二个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T18:28:23.207

在全局范围内，无论是在页面中还是在 web worker 中，您都可以编写如下代码：

```
(function( global ) {
  // ... whatever
}( this ); 
```

然后在那个主要的外部函数中，你可以使用“global”（或称它为“window”或“self”或“whatever”），它可以在任一上下文中工作（或在 Node.js 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:26:14.280

我建议

```
var global; try { global = window } catch(e) { global = self } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:27:51.037

您可以创建自己的对 window 或 self 的引用：

```
var my_window = window || self; 
```

# bash - 在文件名中使用计数变量

> ID：11162049
> 
> 赞同：11
> 
> 时间：2012-06-22T18:25:00.973
> 
> 标签：bash, loops, variables

我有一个快速的问题。我只是想知道在文件名中有一个循环计数器是否是有效格式（使用 bash shell 脚本）。我在想一些事情：

```
for((i=1; i <=12; i++))
do
  STUFF
  make a file(i).txt 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T18:34:05.180

这是一个快速演示。该`touch`命令更新文件的最后修改时间，如果不存在则创建它。

```
for ((i=1; i<=12; i++)); do
   filename="file$i.txt"
   touch "$filename"
done 
```

您可能希望在`$i`只有一位数字的情况下添加前导零：

```
for ((i=1; i<=12; i++)); do
   filename="$(printf "file%02d.txt" "$i")"
   touch "$filename"
done 
```

这将导致`file01.txt`,`file02.txt`等，而不是`file1.txt`, `file2.txt`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T22:31:42.650

如果您只想制作一堆文件并且不需要循环执行其他任何操作，则可以完全跳过循环：

```
touch file{1..12}.txt 
```

将它们全部集中在一个命令中。

如果你有 Bash 4，你可以像这样得到前导零：

```
touch file{01..12}.txt 
```

# html - 使用 CSS 在 DIV 中定位元素

> ID：11162050
> 
> 赞同：0
> 
> 时间：2012-06-22T18:25:06.643
> 
> 标签：html, css, css-float

我承认，我不擅长 CSS。一定是我缺乏设计能力。所以我正在努力完成四项小任务。

1.  移动时间框（即“01:04”和“12:13”）使其浮动到图像的右上边缘？
2.  将锻炼的描述移动到时间框和routineID下方的图像右侧？
3.  允许类“例程”的底部边框始终位于图像的正下方，就像它位于图像的顶部一样。
4.  即使在描述中添加了更多文本，也保持类“例程”的大小相同。我希望每个“例程”都具有相同的宽度和高度尺寸。

我在这里列出了所有内容：http: [//jsfiddle.net/n2learning/xMsrN/](http://jsfiddle.net/n2learning/xMsrN/)

很抱歉成为一个问题中有四个问题的烦人。任何帮助表示赞赏！

这是一个更新的 jsfiddle 链接：http: [//jsfiddle.net/n2learning/xMsrN/22/](http://jsfiddle.net/n2learning/xMsrN/22/) 跟进问题和评论 -

1.  “锻炼描述”仍然被抬高。试图让它显示在顶行下方，其中包括“时间”和“ID”。顶行也将（最终）包括小图像符号。
2.  我只是注意到图像大小不同。我尝试修改 '.routineImage' 给它一个宽度和高度属性，但这样做搞砸了。如何/在哪里标准化每个图像的大小？（图片来自youtube和其他视频来源）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:47:39.883

```
<ul id="routinefilter">
    <li  class='routine' data-id="15">
        <div class='routineImage'><img src=http://img.youtube.com/vi/UheCchftswc/2.jpg></div>
        <div class="routineTimeID"> <!-- added wrapper to keep it a single row -->
            <div class='routineID'>16</div>
            <div class='routineTime'>01:04</div>
        </div>
        <div class='routineDesc'>Use lighter weights on a barbell due to higher counts</div>
    </li>
</ul> 
```

CSS

```
#routineframe {
    height: 400px;
    border: dashed;
    font-family: Arial,helvetica,sans-serif;
    cursor: pointer;
    width: 60%;
    overflow: auto;
    }

#routinefilter {
    list-style: none;
    clear: both; /*keeps each <ul> seperate*/
    }

.routine{
    background: #F4F4F4;
    color: #41383C;
    font-size: 18px;
    border:2px solid #666;
    margin:5px;
    padding:5px;
    width: 95%;
    overflow: hidden; /*allows this to contain the floats*/
    }

.routine .routineImage{
    position: relative;
    float: left;
    display: inline;
    margin-left: auto;
    margin-right: auto;
    }

.routine .routineTime{
    position: relative;
    top: 0;
    float: left; /*this was floated the wrong way*/
    margin-left: auto;
    margin-right: 3px;
    border: 1px solid #666;
    background: white;
    color: navy;
    }

.routineTimeID { /*class added to keep the description from being in between the two elements*/
    width:140px;
    float: left;
    }

.routine .routineID{
    top: 0;
    float: right;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid #666;
    background: white;
    }

.routine .routineDesc{
   top: 0;
   margin-left: auto;
   margin-right: auto;
   font-size: 16px;
   } 
```

我试图记下我所做的所有更改以及原因。我想我都得到了...

然而，对于最后一个问题，你不能用 CSS 做到这一点。据我了解，如果添加更多文本，您希望文本大小自动缩小吗？这必须用JavaScript来完成，解决方案[在这里](https://stackoverflow.com/a/688362/1284654)

# c# - 使用数据绑定进行绑定

> ID：11162056
> 
> 赞同：0
> 
> 时间：2012-06-22T18:25:33.560
> 
> 标签：c#, wpf, devexpress

我有一个

```
ObservableCollection<Products> products 
```

在我的模型课和另一个

```
ObservableCollection<Foo> foo 
```

在 ViewModel 类中。

我已将产品绑定到 Developer Express GridControl，并且该网格中有一个列是 ComboBox。

如何在 ComboBox 中绑定*foo*集合？

这是我将产品绑定到 GridControl 的方式

```
<dxg:GridControl ItemsSource="{Binding Path=Model.Products}" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:32:22.563

像这样的东西应该工作：

```
<ComboBox ItemsSource="{Binding Path=DataContext.foo, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type dxg:GridControl}}}"/> 
```

# java - 试图在重心中获得位置，我想？

> ID：11162059
> 
> 赞同：1
> 
> 时间：2012-06-22T18:25:49.030
> 
> 标签：java, math, trigonometry

好的，所以我正在尝试实现这张图片中的内容： ![https://dl.dropbox.com/u/28109593/dotsexample.png](../Images/e43430de3d579fd33ca496c265f87e80.png)

我相信这将是一个重心坐标系统，但是 X 总是等于 1？基本上，当我向/远离三角形的最高点移动时，我只需要它增加/减少。这是到目前为止我得到的代码（注意我在java中使用LWJGL库）。

```
public float getDist( Vector3f p, Vector3f a, Vector3f b, Vector3f c )
   {
       Vector3f v0 = new Vector3f(0,0,0);
       Vector3f.sub( c, a, v0 );
       Vector3f v1 = new Vector3f(0,0,0);
       Vector3f.sub( b, a, v1);
       Vector3f v2 = new Vector3f(0,0,0);
       Vector3f.sub( p, a, v2 );

       float dot00 = Vector3f.dot(v0, v0);
       float dot01 = Vector3f.dot(v0, v1);
       float dot02 = Vector3f.dot(v0, v2);
       float dot11 = Vector3f.dot(v1, v1);
       float dot12 = Vector3f.dot(v1, v2);

       float inverse = 1.0f / (dot00 * dot11 - dot01 * dot01);
       float u = (dot11 * dot02 - dot01 * dot12) * inverse;
       float v = (dot00 * dot12 - dot01 * dot02) * inverse;

       if((u >= 0) && (v >= 0) && (u + v <= 1)) return (float) (Math.sin(u) * Math.cos(v));
       else return 0;
   } 
```

编辑：我想我要问的是：有没有办法得到三角形内的一个点从三角形在空间中的最低点经过的距离，其中 1 将是三角形上的最高点（最远从最低点）而不考虑它的偏离向量？IE 注意到图像上的两个红点具有相同的坐标，即使它们与顶部 x 的距离不同？

编辑2：![https://dl.dropbox.com/u/28109593/axisexample.png](../Images/5bbb9068f30493432a4dad7aa6269e94.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:25:59.373

如果我理解您的意思：您`abc`在 3D 坐标中有一个`p`三角形（

```
b  --------------- 1.0
|\
| \
| p\ ------------- (result)
|   \
a----c  ---------- 0.0 
```

你是正确的，因为这个结果是三角形上一个点的三个重心坐标之一。

我推荐如下内容：

*   求三角形平面的法线：`vABC = cross(c-a, b-a)`
*   找到垂直于`vABC`和的法线`ac`：`vPerpAC = cross(c-a, vABC)`
*   评估`ab`关于它的向量： `sAB = dot(vPerpAC, b-a)`
*   评估您的目标点： `sAP = dot(vPerpAC, p-a)`
*   您的最终结果是最后两次评估的比率： `return sAP / sAB`

这对于实际上不在三角形上的点应该是稳健的：它们有效地垂直投影到`abc`平面上。

* * *

请注意，如果您`abc`事先知道，您可以预先计算以下值：

*   缩放法线：`vScaled = vPerpAC / sAB`
*   缩放偏移量：`sScaled = dot(vScaled, a)`

`p`并更有效地计算一系列点的结果：

*   `return dot(vScaled, p) - sScaled`

这有效地预先计算了一个定向平面，预先缩放以直接提供所需的结果。

# c# - 您如何使用盲人屏幕阅读器在 Visual C# 或 Visual Basic（均为 2010）速成版中对文本编辑器进行硬编码？

> ID：11162061
> 
> 赞同：2
> 
> 时间：2012-06-22T18:26:01.543
> 
> 标签：c#

```
 System.Console.WriteLine("Hello StackOverflow folks!"); 
```

我想知道如何使用我刚刚使用的语言或 Visual Basic，利用 Visual Studio IDE 对文本编辑器进行硬编码。我知道有一个 GUI 设计器，但我正在为盲人使用屏幕阅读器，所以拖放控件并不是一件容易的事。我在互联网上寻找过这个，将搜索范围缩小到我的情况，但我找不到任何东西。你们会这么好心，帮我找到一个关于硬编码文本编辑器的教程吗？我真的很感激！谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:38:58.160

我会提前告诉你：我没有使用屏幕阅读器的经验。但我确实知道我在没有使用 Visual Studio 中的 GUI 设计器的情况下进行编程。如果您使用 Visual Studio 2008、2010 或最新的 2012 Release Candidate（目前可免费下载，有条件）会更容易。如果您使用这些 IDE，则可以使用 Windows Presentation Foundation Platform，它可以让您访问 XAML。这种标记语言将允许您创建丰富的 GUI，而无需拖放。诚然，您可以在纯代码隐藏（使用 C# 或 Visual Basic）中创建 Windows 窗体应用程序，但这会很痛苦。以下是 XAML 和 WPF 编程的一些基本教程：

[http://wpftutorial.net/XAML.html](http://wpftutorial.net/XAML.html)

[http://visualbasic.about.com/od/usingvbnet/a/wpfintro.htm（Visual](http://visualbasic.about.com/od/usingvbnet/a/wpfintro.htm) Basic）

[需要 XAML 教程](https://stackoverflow.com/questions/10749625/need-xaml-tutorial)（一个有大量教程答案的问题）

我希望你是最好的！

# android - 在 android 中使用 AsycTask 取消创建新线程

> ID：11162062
> 
> 赞同：0
> 
> 时间：2012-06-22T18:26:10.480
> 
> 标签：android

我有一个类 ShapesActivity.java 并在其布局中有一个按钮。我有另一个扩展视图的文件 ShapesView.java。我在这个类中有 AsyncTask 来移动创建的圆圈。现在，当我单击 ShapesActicity.java 类中的停止按钮时，我不想创建新的线程，因此圆圈应该停止在它所在的位置。我无法在 ShapesView 中实现按钮单击的事件处理程序，因此无法调用 cancel(true) 来阻止创建新线程。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:23:25.723

您的 AsyncThread 是否负责创建视图或动画视图？你说按 STOP 应该阻止进一步的 CREATION，这与动画没有任何关系。

如果您的意思是说您的线程正在为视图设置动画，并且 STOP 应该停止动画，那么您可以简单地向 AsyncTask 实现添加一个方法，该方法设置标志，告诉动画循环停止动画。然后你的 STOP 按钮只需要调用`mAnimThread.stopAnimating()`. 就像是：

```
class MyAnimThread extends AsyncTask<Void, Void, Void>
{
    boolean mRunning = true;

    public void stopAnimating()
    {
        mRunning = false;
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        while(mRunning)
        {
            //animate
        }

        return null;
    }
} 
```

添加一些您自己的源代码将有助于理解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:43:12.403

你想简单地为一个圆圈制作动画吗？如果是这样，你可能把事情复杂化了。你真的不需要 AsyncTask 来完成类似的事情。只需覆盖自定义视图的 draw() 方法并绘制到提供的 Canvas 对象。

# c++ - Winsock 发送数据 C++ 的问题

> ID：11162063
> 
> 赞同：1
> 
> 时间：2012-06-22T18:26:13.403
> 
> 标签：c++, sockets, winsock, send

我正在尝试使用 Winsock 编写一个简单的 FTP 客户端。

我有以下代码：

```
using namespace std;
#include <iostream>

#include <cstring>
#include <cstdio>

#include <winsock.h>
#include <windows.h>

int main() {

    const int MAX_TRIES = 10;

    char * host = "localhost";
    int port = 21;
    char * userName = "b8_8780454";
    char * pass = "test";
    char * testFileSource = "C:\\Windows\\notepad.exe";

    WSADATA WSAData;
    SOCKADDR_IN server;
    SOCKET sock;

    WSAStartup(MAKEWORD(2,2), &WSAData); 
    sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); 
    if (sock == INVALID_SOCKET) {
        cout<<"fail";
        return -1;
    }

    server.sin_family = PF_INET;
    server.sin_port = htons(port);
    server.sin_addr = *((struct in_addr *)gethostbyname(host)->h_addr);
    memset(server.sin_zero,0,8);

    int errorCode = connect(sock, (LPSOCKADDR)&server, sizeof(struct sockaddr));
    int tries = 0;

    while (errorCode == SOCKET_ERROR) {
        if (tries >= MAX_TRIES) {
           cout<<"fail 2";
           return -1;
        }
        errorCode = connect(sock, (LPSOCKADDR)&server, sizeof(struct sockaddr));
        tries++;
    }

     char serverMsg[2048];
     Sleep(1000);
     cout<<"Waiting for server response..."<<endl;
     int r = recv(sock,serverMsg,2048,0);
     serverMsg[r] = '\0';
     cout<<endl<<endl<<"Server said: "<<endl<<serverMsg<<endl<<endl;

     char userB[1024] = "USER ";
     strcat(userB,userName);
     cout<<"Sending... "<<userB<<endl;
     cout<<"sended: "<<send(sock, userB, strlen(userB), 0)<<" bytes"<<endl;
     Sleep(1000);
     cout<<"Waiting for server response..."<<endl;

     serverMsg[0] = '\0';
     recv(sock,serverMsg,2048,0); // <-- program keeps lock here
     cout<<endl<<endl<<"Server said: "<<endl<<serverMsg<<endl<<endl;
     getchar();
     return 0;
} 
```

我认为发送工作不正常，但它返回 >0 但在服务器端我看不到这个客户端发送任何数据。我想我的连接设置可能有问题，但我一直在检查一些网站，但我无法捕捉到错误

这是程序打印的内容：

等待服务器响应...

```
Server said:
220-FileZilla Server version 0.9.31 beta
220-written by Tim Kosse (Tim.Kosse@gmx.de)
220 Please visit http://sourceforge.net/projects/filezilla/

Sending... USER b8_8780454
sended: 15 bytes
Waiting for server response...

Server said:
421 Login time exceeded. Closing control connection.
by Tim Kosse (Tim.Kosse@gmx.de)
220 Please visit http://sourceforge.net/projects/filezilla/ 
```

在我的 FTP 服务器中，我看不到该客户端向服务器发送任何数据。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:31:43.303

您的用户名后需要一个新行 ( `\n`)。

```
 strcat(userB,userName);
 strcat(userB,"\n"); 
```

# html - HTML 电子邮件中的图像掩码

> ID：11162067
> 
> 赞同：3
> 
> 时间：2012-06-22T18:26:16.440
> 
> 标签：html, html-email

在基于表格的 HTML 电子邮件中，是否有可靠的方法将图像覆盖在另一个图像上？请记住，为了正确渲染，样式需要是内联的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:17:58.120

[显然](http://blog.mailermailer.com/2011/04/background-images-in-html-email-the-naked-truth/)，拥有适用于所有电子邮件阅读器的 bg 图像的唯一方法是为 body 标记的 HTML 背景属性（对于 Outlook 2007、2010）和占据整个页面的 HTML 表格的 HTML 背景属性指定一个（适用于所有其他电子邮件阅读器）。似乎不可能在所有电子邮件阅读器中显示在其他任何地方的 bg 图像。

一般来说，答案是“不”。您不能将前景内容叠加在其他前景内容之上，并且几乎不存在添加背景图像的选项。但是，如果您可以为 body 标签（和表格包装器）使用单个大 bg 图像，并结合一个或多个前景图像，那么“是”。

见：[http ://blog.mailermailer.com/2011/04/background-images-in-html-email-the-naked-truth/](http://blog.mailermailer.com/2011/04/background-images-in-html-email-the-naked-truth/)

**编辑：**

在 Litmus 中运行了一些详尽的测试后，答案是响亮的“不”。Outlook 2007 及更高版本仅支持两种显示背景图像的方式：使用标签`background`上的 HTML 属性`body`和使用标签上的内联`background-image`样式`body`。但在这两种情况下，Outlook 缩放图像的方式与其他电子邮件阅读器不同，并且无法阻止 bg 图像平铺。

出于所有实际目的，在支持各种电子邮件阅读器很重要的情况下：

1.  无法覆盖图像（或任何其他类型的内容）。
2.  不支持背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T16:31:28.557

据我所知，**并非所有浏览器都支持**背景图像。但是，您可能会发现[Campaign Monitor 中的此页面](http://backgrounds.cm/)很有用。至少可以快速测试代码以查看它是否适合您的读者需求 - 如果我是您，请在实施之前检查您的电子邮件统计数据与哪些客户工作。

我相信上述关于*“拥有适用于所有电子邮件阅读器的 bg 图像的唯一方法是为 body 标签的 HTML 背景属性指定一个”*的上述建议也是正确的，尽管 Campaign Monitor 似乎另有说明。我会仔细确定哪些浏览器/电子邮件客户端使用回退，以及这是否会对您的设计产生负面影响。

由于除了 Gmail 之外都支持[Z 索引](https://www.campaignmonitor.com/css/)（所以可能不是那么好），您可以尝试使用它来创建设计。鉴于 Gmail 不支持它并且回退可能是丑陋的罪恶，你可能不想尝试这个。

# python - 在处理之前要求对已解析的文本进行更正

> ID：11162069
> 
> 赞同：0
> 
> 时间：2012-06-22T18:26:48.627
> 
> 标签：python, input, user-interaction

我已经用 Python 编写了一个解析器，它获取（例如）播客中播放歌曲的曲目列表，并正确格式化曲目以便浏览到[last.fm 网站](http://www.last.fm)。

因为某些曲目列表具有奇怪的曲目，或者有时曲目可能被错误地解析，我希望要求用户更正已解析的输入。我知道该`raw_input()`功能，但这并不能让我打印默认文本（如完整的解析曲目列表），这意味着用户必须在更正之前复制/粘贴整个列表。

有没有办法打印一个“建议”来使用`raw_input()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:30:33.897

不确定这是否正是您想要做的，但如果您想获得逐行输入并具有默认值，这就是我为类似问题所做的：

```
def get_input(prompt, default):
    result = raw_input('%s [%s]:' % (prompt, default))
    result = result or default
    return result 
```

# c# - 使用进度条将控制台应用程序转换为表单？

> ID：11162070
> 
> 赞同：1
> 
> 时间：2012-06-22T18:26:50.133
> 
> 标签：c#, .net, winforms, progress-bar, console-application

我创建了一个运行大约需要 5 分钟的控制台应用程序。main 方法调用了大约 10 个完成工作的方法。

如何通过这 10 种方法将 Console App 更改为更新进度条/显示最新进度的 Windows Forms 应用程序？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:30:19.283

您可以`BackgroundWorker`在 Winforms 中使用组件。只需复制粘贴此代码。我用过一个`Label instead of ProgressBar`. `percentage completion`随着任务在后台进行，标签会更新。

耗时的方法/任务必须在`Do_Work`处理程序中调用。运行下面的示例。

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;
        BusinessClass _biz = new BusinessClass();
        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
            _worker.RunWorkerAsync();
        }

        /// Do the time consuming work here
        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;
                int junk = 0;
                for (i = 0; i <= 199990000; i++)
                {
                    int result = _biz.MyFunction(junk);
                    junk++;

                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // note I can pass the business class result also and display the same in the LABEL  
                        _worker.ReportProgress(percentComplete, result);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }
    }

    public class BusinessClass
    {
        public int MyFunction(int input)
        {
            return input+10;
        }
    }
} 
```

# c# - 在异常中封装控件

> ID：11162074
> 
> 赞同：0
> 
> 时间：2012-06-22T18:27:17.357
> 
> 标签：c#, .net

C#/.NET/GUI 编程相对较新，但在这里。现在我正在使用 WinForms 在工作中编写一个业务应用程序。我有大约 5 个文本框和 1 个组合框，我想验证它们是否为空，如果是，则告诉用户并将焦点放在该控件上。我该怎么做呢？

我可以有一个 if 语句来检查每个控件：

```
if (usernameField IsNullOrEmpty) then:
  setFocus(UsernameField);
  return;

if (addressField IsNullOrEmpty) then:
  setFocus(addressField);
  return;

continue with rest of application as normal... 
```

或者我可以在例外情况下这样做：

```
try {
  if (usernameField IsNullOrEmpty) then:
    throw new Exception(usernameField);

  if (addressField IsNullOrEmpty) then:
    throw new Exception(addressField);

} catch (Exception e) {
  setFocus(ControlField) // encapsulate in exception some way?
} 
```

或者为了防止代码重复，只需要写一个函数：

```
try {
  checkField(usernameField);

  checkField(addressField);

} catch (Exception e) {
  setFocus(ControlField) // encapsulate in exception some way?
} 

void checkField(control ctrl) {
  if (ctrl IsEmptyOrNull)
    throw new Exception(ctrl);
} 
```

对于 GUI 编程来说相对较新，文本字段为空是否应该例外，或者这是否会被视为正常的程序流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:33:24.853

不建议为程序流抛出异常。

编写一个辅助方法。

```
private bool IsTextboxValid(Textbox ctrl)
{
  if(string.IsNullOrEmpty(ctrl.Text))
  {  
    ctrl.Focus();
    return false;
  }
  return true;
} 
```

并使用它：

```
if(!IsTextboxValid(addressBox)) return;
if(!IsTextboxValid(nameBox)) return; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:35:25.570

我**不会**使用异常，在异常情况下应该抛出异常，用户不填写字段不算数。至于实际检测空控件和设置焦点，有很多方法，比如简单的 if 检查，以及更复杂的绑定和验证解决方案等等。

# html - 为响应式设计对齐图像

> ID：11162078
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:27:50.760
> 
> 标签：html, css

我想将 h2 两侧的两个图像均匀对齐以实现响应式设计，并在缩小浏览器时允许图像按比例缩小，最终在移动设备等小窗口中消失。想知道我做错了什么。

[提琴手](http://jsfiddle.net/tobeeornot/Cpua2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:33:49.177

h2也需要`float: left;`有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:44:24.233

您还需要创建一个 css 表，根据屏幕大小（以像素为单位）调用操作

见链接： [jsfiddle](http://jsfiddle.net/RbK2A/1/)

那么你所需要的就是使用 float left

```
#tag-container h2.tag {
    font-family: 'Droid Serif', serif;
    font-size: 52px;
    font-style: italic;
    color: #34291c;
    letter-spacing: 1px;
    text-shadow: 0px 1px 1px rgba(255,255,255,0.9);
    text-align: center;
    margin: 0;
    **float: left;** 
```

}

# android - 如何通过意图从我自己的活动中启动 connectbot

> ID：11162086
> 
> 赞同：4
> 
> 时间：2012-06-22T18:28:28.163
> 
> 标签：android, android-intent, android-activity, ssh

我的申请有问题。我想通过意图从我的应用程序启动 connectbot，如果我的活动开始，我也想启动 connectbot。如何从我的活动中意图连接机器人应用程序，请回答我的问题。谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:38:24.983

ConnectBot 的 AndroidManifest 具有以下意图过滤器：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="ssh" />
  <data android:scheme="telnet" />
  <data android:scheme="local" />
  <!-- format:  ssh://user@host:port/#nickname  -->
  <!-- format:  telnet://host:port/#nickname  -->
  <!-- format:  local://  -->
</intent-filter> 
```

这意味着您可以使用以下操作引发 Intent 以启动 ConnectBot 并打开 ConsoleActivity。ConsoleActivity 不对 Uri 做任何事情，因此您可以使用以“ssh://”开头的任何内容：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("ssh://user@host:port/#nickname"))); 
```

ConnectBot 还响应 ACTION_PICK 打开配置连接列表。ACTION_PICK 实际上会解析给定的 uri 并打开昵称，但前提是用户、主机和端口也是正确的。

# jquery - 对话框不显示

> ID：11162091
> 
> 赞同：1
> 
> 时间：2012-06-22T18:28:43.927
> 
> 标签：jquery, jquery-ui

我试图在单击按钮时显示一个 jquery 对话框（来自一些示例代码），但由于某种原因它不会。希望您能提供帮助：

```
<html>      
<head>
    <script type="text/javascript" src="jquery.js"/>
    <script type="text/javascript">
        $(document).ready(function() {
            var $dialog = $('<div></div>')
                .html('This dialog will show every time!')
                .dialog({
                    autoOpen: true,
                    title: 'Pick A Time Period:'
                });

            $('#reports').click(function() {
                $dialog.dialog('open');
                // prevent the default action, e.g., following a link
                return false;
            });
        })
    </script>
</head>
<body>
    <button id="reports">Hi</button>
</body>
</html> 
```

编辑：对不起，没有意识到 JQueryUI 是一个单独的文件。今天才学习 JQuery，所以对我来说都是新的

我现在为 JQueryUI 文件添加了正确的脚本行，但由于某种原因它仍然无法正常工作：

```
<html>      
<head>
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />   
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var $dialog = $('<div></div>')
                .html('This dialog will show every time!')
                .dialog({
                    autoOpen: true,
                    title: 'Pick A Time Period:'
                });

            $('#reports').click(function() {
                $dialog.dialog('open');
                // prevent the default action, e.g., following a link
                return false;
            });
        })
    </script>
</head>

<body>
    <button id="reports">Hi</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:32:03.660

应该：

```
<script type="text/javascript" src="jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:01:09.443

在 jquery 对话框脚本之前的 head 标记之间包含这一行，看看你得到了什么！

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script> 
```

# c# - 是否可以在运行时向 EXISTING 类添加方法？为什么或者为什么不？

> ID：11162094
> 
> 赞同：11
> 
> 时间：2012-06-22T18:28:57.517
> 
> 标签：c#, dynamic, reflection.emit

我想这可能会使用 Reflection.Emit，

但是[关于 SO 的类似问题](https://stackoverflow.com/questions/3551452/how-to-create-a-method-at-runtime-using-reflection-emit)仅回答如何动态创建类/方法，而不是如何更新现有类。

同样，是否可以在运行时删除方法/类？如果是这样，我想可以删除该类，然后使用其旧方法和新方法将其添加回来。

提前致谢。

PS我对此没有预期用途，这只是一个好奇的问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-22T18:33:19.283

在常规 C#/.NET 中，答案是简单的“否”。你能做的最多就是编写一个`DynamicMethod`可以**像**该类型的方法（访问私有字段等）一样的行为，但它永远不会出现在 API 上——你最终只会得到一个委托。

如果你使用`dynamic`，你几乎可以做任何你想做的事情。您可以`ExpandoObject`通过附加*委托*代替方法来模拟这一点，但是在自定义动态类型上，您几乎可以做任何事情 - 但这只会影响使用`dynamic`API 的调用者。举一个基本的`ExpandoObject`例子：

```
dynamic obj = new ExpandoObject();
Func<int, int> func = x => 2*x;
obj.Foo = func;
int i = obj.Foo(123); // now you see it
obj.Foo = null; // now you don't 
```

对于*属性和事件*（不是方法），您可以使用该`System.ComponentModel`方法来更改运行时出现的内容，但这只会影响通过 获得访问权限的调用者`System.ComponentModel`，这主要意味着：UI 数据绑定。这就是将`DataTable`列表示为伪属性的方式（暂时忘记“类型化数据集”——没有这些也可以工作）。

为了完整起见，我还应该提到*扩展方法*。这些更多的是编译器技巧，而不是运行时技巧 - 但*有点*允许您将方法添加到现有类型 - 对于“add”的小值。

ORM 等常用的最后一个技巧是动态**子类**化类型，并在子类中提供附加功能。例如，覆盖属性以拦截它们（延迟加载等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:32:52.843

> 是否可以在运行时删除方法/类？

假设这是可能的。对这些方法的调用将失败并产生未定义的（但通常是灾难性的）行为。

所以我确定这是不可能的。

# python - Python中struct成员的等价物（主要用于文档和阅读代码）

> ID：11162095
> 
> 赞同：1
> 
> 时间：2012-06-22T18:29:07.287
> 
> 标签：python, documentation, member

以与我可以说的相同的方式记录一个类的 (private -> _x) 数据成员会很有帮助：

```
struct foo {
  foo* p_a /* Documentation */
  foo ** pp_b /* Documentation */
}; 
```

但是对于 Python（可以说我们在这里使用不同的编程模型），首选的方法是什么？当我想立即查看此类模型的内容时，通过引用隐式定义它们不会减少它。

这对于直接转换为 UML 图等也很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:34:39.917

您可以使用文档字符串（三引号字符串）作为类或方法中的第一条语句；与文档字符串的标准格式最接近的东西被指定为[PEP 257](http://www.python.org/dev/peps/pep-0257/)。

```
class foo( object ):
    """
    This is a foo.
    _a is foo's a; there are many like it but this one is foo's.
    _b is foo's b and demons may fly out of your nose if you modify it.
    """

    def __init__( self ): ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:41:56.567

你是对的，Python*是*一种不同的编程模型。要理解的是，在 Python 中，当您看到以下内容时：

```
class Foo(object):
    ... 
```

这不是*真正*的“类声明”。这更像是一种“阶级创造”。在解释器到达`class..`行的那一刻，而不是之前，一个**类对象**被创建并准备好。关于这个类对象的一件事是它基本上*对它的实例一无所知*。

该类唯一可以访问实例（并且数据成员通常在实例上）的时间是当它实际通过一个方法运行时。这个语法：

```
def bar(self, x):
    ... 
```

很有趣。**明确**的第一个论点有点暗示正在发生一些不同的事情。没错：当您编写 时`instance.bar(x)`，真正发生的是`Foo.bar(instance, x)`.

这意味着`Foo`获得实例的唯一机会是使用方法。

因此，如果您想要一个*显式*的类模型，最好的办法可能是在`__init__`方法中显式地列出它。

```
class Foo(object):
    def __init__(self):
        self._bar = None  # Bar is an important "private" member
        self._baz = None  # As is baz
        self._fizzbuzz = 4  # Of course, you can also provide defaults here 
```

如果我在这里偏离了基础，我想得到纠正——但这就是我目前对 Python 的理解。

# java - 通过面板上的按钮从 JTabbedPane 中删除面板

> ID：11162099
> 
> 赞同：1
> 
> 时间：2012-06-22T18:29:28.530
> 
> 标签：java, swing, jtabbedpane

我有 2 个类，mainFrame 和面板。通过单击 mainFrame 上的按钮，我从另一个类调用面板并将其设置在 JFrame（mainFrame 类）中的选项卡式窗格中。现在，我在面板类的面板上有另一个按钮 (btnRemove)。因此，当我单击该按钮时，我想从 mainFrame 类的选项卡式窗格中删除我的面板。我如何正确地写我的听众？

主框架类：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
public class MainFrame extends JFrame {
JTabbedPane tPane = new JTabbedPane();
JButton btn = new JButton("Add panel");
public MainFrame(){
    setSize(400,300);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
    setLayout(new BorderLayout());
    add(tPane, BorderLayout.CENTER);
    add(btn,BorderLayout.NORTH);
    btn.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            panel p = new panel();
            tPane.add("Panel",p);
        }
    });
}

public static void main(String[] args){
    new MainFrame();
}
} 
```

面板类：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
public class Panel extends JPanel{
JButton btnRemove = new JButton("Remove panel");

public Panel(){
    setLayout(new FlowLayout());
    add(btnRemove);
    btnRemove.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:35:52.853

```
panel.this.getParent().remove(panel.this); 
```

如果您希望代码即使您将按钮嵌套在子面板中也能继续工作，您应该使用以下代码：

```
SwingUtilities.getAncestorOfClass(JTabbedPane.class, panel.this).remove(panel.this); 
```

旁注：请尊重 Java 命名约定：类以大写字母开头。

# android - 用于 OpenGL ES Android 的 GLSL

> ID：11162111
> 
> 赞同：1
> 
> 时间：2012-06-22T18:30:45.417
> 
> 标签：android, eclipse, opengl-es, shader

我想在我的 OpenGL 对象上使用着色，但似乎无法访问我的 opengl 包中的 GLSL 函数。Eclipse 中是否有可用于 OpenGL ES 的 GLSL 包？

**编辑**：正如蒂姆指出的那样。着色器被编写为文本文件，然后使用 glShaderSoure 加载，我有一个 C++ 着色器文件，我曾经为光线追踪应用程序编写过该文件。但是，我真的很困惑如何在 java 中实现。假设我在我的`Renderer`类中使用 gl object绘制了一个 2D 正方形，我`MySquare`将如何实现下面着色器文件的 java 等价物。

**着色器.vert**

```
 varying vec3 N;
     varying vec3 v;

void main()
{

// Need to transform the normal into eye space.
N = normalize(gl_NormalMatrix * gl_Normal);

// Always have to transform vertex positions so they end
// up in the right place on the screen.
gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}

  // Fragment shader for per-pixel Phong interpolation and shading. 
```

**着色器片段**

```
// The "varying" keyword means that the parameter's value is interpolated
// between the nearby vertices.
varying vec3 N;
varying vec3 v;

//Used for Environmental mapping shader calculations
const vec3 xUnitVec=vec3(1.0, 0.0, 0.0), yUnitVec=vec3(1.0, 1.0, 0.0);
uniform vec3 BaseColor, MixRatio;
uniform sampler2D EnvMap;

 void main()
{
    // The scene's ambient light.
    vec4 ambient = gl_LightModel.ambient * gl_FrontMaterial.ambient;

// The normal vectors is generally not normalized after being
// interpolated across a triangle.  Here we normalize it.
vec3 Normal = normalize(N);

// Since the vertex is in eye space, the direction to the
// viewer is simply the normalized vector from v to the
// origin.
vec3 Viewer = -normalize(v);

// Get the lighting direction and normalize it.
vec3 Light  = normalize(gl_LightSource[0].position.xyz);

// Compute halfway vector
vec3 Half = normalize(Viewer+Light);

// Compute factor to prevent light leakage from below the
// surface
float B = 1.0;
if(dot(Normal, Light)<0.0) B = 0.0;

// Compute geometric terms of diffuse and specular
float diffuseShade = max(dot(Normal, Light), 0.0);
float specularShade = 
  B * pow(max(dot(Half, Normal), 0.0), gl_FrontMaterial.shininess);

// Compute product of geometric terms with material and
// lighting values
vec4 diffuse = diffuseShade * gl_FrontLightProduct[0].diffuse;
vec4 specular = specularShade * gl_FrontLightProduct[0].specular;
ambient += gl_FrontLightProduct[0].ambient;

// Assign final color
gl_FragColor= ambient + diffuse + specular + gl_FrontMaterial.emission;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:39:10.877

在[learnopengles.com](http://www.learnopengles.com/android-lesson-one-getting-started/)上查看教程。他们会回答你的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:52:04.223

没有着色器文件的“java 等价物”。着色器是用 GLSL 编写的。无论您的 opengl 是用 java、c++、python 还是其他任何方式包装的，着色器都是相同的。除了 OpenGL 和 OpenGLES 之间的小的 API 差异之外，您可以在 Java 中上传与在 C++ 中使用的完全相同的着色器，逐个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T04:25:25.943

您可以使用此来源： [https ://github.com/markusfisch/ShaderEditor](https://github.com/markusfisch/ShaderEditor)

ShaderView 类是关键！GLSL 文件位于 raw 文件夹中。

# asp.net - 在 ASP.NET GridView 中显示分页，即使只有一个页面

> ID：11162113
> 
> 赞同：2
> 
> 时间：2012-06-22T18:30:46.837
> 
> 标签：asp.net, sql-server, gridview

在我的数据库中，我有 10000000 条记录。在 GridView First 我显示前 10 条记录。为了查看下一条记录，用户需要单击页码 (1,2,3,------10000)。但是当我第一次检索 10 条记录时，GridView 分页没有显示。

有没有办法在 ASP.NET GridView 中静态显示分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:58:11.683

对于这么多的记录，我不会推荐 Paging。您可以显示最近添加的前 20 条记录，并提供过滤掉记录的选项。用户可以输入关键字。使用此新结果集重新查询和重新绑定 GridView。

您也可以考虑使用[PetaPoco](http://www.toptensoftware.com/PetaPoco)，一种 Micro-ORM，它可以帮助您获取分页结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:11:02.090

有这么多记录，您确实需要考虑正在运行的确切查询以拉回数据。

有很多方法可以进行数据分页（[http://beyondrelational.com/modules/2/blogs/28/posts/10434/sql-server-server-side-paging-with-rownumber-function.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10434/sql-server-server-side-paging-with-rownumber-function.aspx)）。但是，“最佳”方式取决于您正在运行的 SQL Server 的确切版本。

本质上，解决方案归结为您通过某种类型的查询传递页码和每页的记录数。通常，作为查询的存储过程可能会非常混乱。

一旦到了那里，你就有一个选择。要么将总记录数作为查询中的 OUT 参数发回，然后正常返回结果集，要么将总记录数作为一列发回。这两种选择肯定存在效率问题，因为一种方式需要查询运行两次，另一种方式需要额外的数据列，这会增加网络流量。

一旦你解决了这个问题，你就可以准确地弄清楚你希望 UI 是如何工作的。

# powershell - 如何使用 powershell 在 Hyper-V 服务器上获取 VM 的位置

> ID：11162119
> 
> 赞同：0
> 
> 时间：2012-06-22T18:31:16.050
> 
> 标签：powershell, hyper-v

我的 Hyper-V 服务器将 vm 分为不同的逻辑驱动器。例如：服务器的 D 盘包含 4 个 vm，E 盘包含 3 个 vm。

1.  我知道 Hyper-V 服务器上的驱动器名称（例如：D:)，我如何获取该驱动器中虚拟机的名称。

2.  我知道 Hyper-V 服务器上虚拟机的名称，我如何才能在 Hyper-V 服务器上获取虚拟机所在的驱动器。

问候， 阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:19:11.237

看看这个脚本：

[http://jackiechen.org/2011/10/26/powershell-list-the-hyper-v-vm-vhd-location/](http://jackiechen.org/2011/10/26/powershell-list-the-hyper-v-vm-vhd-location/)

# java - Java 错误：方法 getMethod(String, Class ) 对于 Class 类型未定义

> ID：11162121
> 
> 赞同：2
> 
> 时间：2012-06-22T18:31:27.477
> 
> 标签：java, class, methods, compiler-errors, undefined

我正在尝试将一个方法作为参数传递给另一个类中的方法。该方法在第一个类中定义，另一个类的方法是静态的。看到它会更容易理解：

### 设置

```
public class MyClass extends ParentClass {
    public MyClass() {
        super(new ClickHandler() {
            public void onClick(ClickEvent event) {
                try {
                    OtherClass.responseMethod(MyClass.class.getMethod("myMethod",Boolean.class));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public void myMethod(Boolean success) {
        if(success.booleanValue()) {
            //do stuff
        }
    }
} 
```

*但是，当我尝试构建*时，出现以下错误：

### 错误

```
The method getMethod(String, Class<boolean>) is undefined for the type Class<MyClass> 
```

问题不在于它没有找到`myMethod`，它没有找到`Class<MyClass>.getMethod`，我不知道为什么。

## 更新

我们已经重新编写了这部分代码，并且没有使用“getMethod `or`getDeclaredMethod”。由于 npe 发现我正在做的事情存在一些问题，并且付出了很多努力来寻找答案，所以我接受了这个答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:33:49.380

## 更新 2

编译时错误表明您正在使用 Java 1.4 编译该类。现在，在 Java 1.4 中，将数组参数定义为 是非法的`Type...`，您必须将它们定义为`Type[]`，这就是`getMethod`为 定义 的方式`Class`：

```
Method getMethod(String name, Class[] parameterTypes) 
```

因此，您不能使用简化的 1.5 语法并编写：

```
MyClass.class.getMethod("myMethod",boolean.class)); 
```

你需要做的是：

```
MyClass.class.getMethod("myMethod",new Class[] {boolean.class})); 
```

## 更新 1

您发布的代码由于另一个原因无法编译：

```
super(new ClickHandler() {

    // This is anonymous class body 
    // You cannot place code directly here. Embed it in anonymous block, 
    // or a method.

    try {
        OtherClass.responseMethod(
            MyClass.class.getMethod("myMethod",boolean.class));
    } catch (Exception e) {
        e.printStackTrace();
    }
}); 
```

你应该做的是创建一个`ClickHander`接受 a 的构造函数`Method`，像这样

```
public ClickHandler(Method method) {

    try {
        OtherClass.responseMethod(method);
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

然后，在`MyClass`构造函数中像这样调用它：

```
public MyClass() {
    super(new ClickHandler(MyClass.class.getMethod("myMethod",boolean.class)));
} 
```

## 原始答案

更重要的是，来自 JavaDoc[`Class#getMethod(String, Class...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)

> 返回一个 Method 对象，该对象反映此 Class 对象表示的类或接口的指定公共成员方法。

而你的方法是`private`，不是`public`。

如果您想访问私有方法，您应该使用[`Class#getDeclaredMethod(String, Class...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)并通过调用[`setAccessible(true)`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:35:47.247

问题是您的代码无法编译

```
new ClickHandler() {
   // not in a method !!
        try {
            OtherClass.responseMethod(MyClass.class.getMethod("myMethod",boolean.class));
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

我假设 ClickHandler 有一个您应该定义的方法，并且您需要将此代码移至该方法。在任何情况下，您都不能将此代码放在方法或初始化程序块之外。

* * *

从[getMethod](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)

> 返回一个 Method 对象，该对象反映此 Class 对象表示的类或接口的指定公共成员方法。

你的方法是`private`，不是`public`

你可以使用的是getDeclaredMethod。

您遇到的另一个问题是此方法需要一个实例，而您似乎并未存储该实例。

# jquery - 使用 jQuery 的“点击显示”评论

> ID：11162124
> 
> 赞同：1
> 
> 时间：2012-06-22T18:31:43.787
> 
> 标签：jquery, wordpress, comments

我有一个 WordPress 博客，当用户点击“显示评论”时，我试图让评论部分出现一个简单的动画。我用

```
 <a href="#comments" id="showcomments">Show comments</a> 
```

接着：

```
<script type="text/javascript">
jQuery(function(){
jQuery("#showcomments").click(function () {
    jQuery("#comments").slideToggle("slow");
});
});
</script>

<div id="comments" style="display:none">
    ......
    </div> 
```

这就是我所取得的成就（向下滚动到“Commenta l'articolo！”）： [http ://multiformeingegno.it/riflessioni/topserver-server-virtuali-made-italy/](http://multiformeingegno.it/riflessioni/topserver-server-virtuali-made-italy/)

如您所见，如果我单击链接，评论部分会出现，但浏览器不会向下移动到该部分的开头，您必须手动向下滚动..您能帮帮我吗？谢谢！！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:36:38.453

在DIV id“comments”上方，输入以下代码：

```
<a name="comments"> 
```

您需要指出您希望用户在点击后去的位置。

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:36:56.193

您也可以使用 Jquery 来完成。

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

或者你可以使用一个锚'#'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:36:56.310

准备好使用文档

```
<script type="text/javascript">
$(document).ready(function(){
    $("#showcomments").click(function () {
      $("#comments").slideToggle("slow");
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:37:06.483

您需要将目标锚点放在评论框中

```
<a name="comment" ></a> 
```

这就是您的链接要关注的内容

# mysql - mysql程序中的参数错误

> ID：11162131
> 
> 赞同：0
> 
> 时间：2012-06-22T18:32:47.920
> 
> 标签：mysql, parameters, mysql-error-1064, ddl, procedure

此代码在参数声明中显示语法错误。请帮我解决

分隔符 $$

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `ADDCOURSE`(@Course varchar(45),@Branch varchar(45),@Batch INT)
BEGIN
    DECLARE I INT;
    SET I=1;
    LABEL1: LOOP
        INSERT INTO course 
        (Course, Branch, Batch)
         VALUES(@Course, @Branch, I);
        IF I <= @Batch THEN
            SET I=I+1;
            ITERATE LABEL1;
        END IF;
        LEAVE LABEL1;
     END LOOP LABEL1;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:52:48.670

试试这个：

`DELIMITER $$`

 ````
CREATE DEFINER = `root`@`localhost` PROCEDURE ADDCOURSE(
    Course varchar(45), Branch varchar(45), Batch INT
)

BEGIN
    DECLARE I INT;
    SET I = 1;
    LABEL1: LOOP
        INSERT INTO course 
        (Course, Branch, Batch)
         VALUES(@Course, @Branch, I);
        IF I <= @Batch THEN
            SET I=I+1;
            ITERATE LABEL1;
        END IF;
        LEAVE LABEL1;
    END LOOP LABEL1;
END

$$ 
````

# windows-phone-7 - 从 Skydrive 下载大文件到 Windows Phone 7

> ID：11162134
> 
> 赞同：1
> 
> 时间：2012-06-22T18:33:21.357
> 
> 标签：windows-phone-7, onedrive

我在 SkyDrive 下载过程中遇到了一些问题，希望您能帮助我。

按照标准的 SkyDrive API 和示例，我设置了一个浏览 SkyDrive 文件夹结构的页面，让用户单击文件，提示下载，一切正常。

我遇到问题的地方是当下载的文件很大时，我会在 100Mb 标记附近抛出 OutOfMemoryException。

丹尼斯在这里谈到了这个问题[http://dotnet.dzone.com/articles/2-things-you-should-consider](http://dotnet.dzone.com/articles/2-things-you-should-consider)但它与直接 URL 下载有关，而不是通过 SkyDrive 架构。

我尝试从 SkyDrive 中提取 URL 并以这种方式直接下载，但没有任何成功。

这是我正在使用的代码 - “项目”对象是 SkyDriveItem 类型，已遍历文件夹内容并选择了此文件。

```
LiveConnectClient downloadClient = new LiveConnectClient(App.Session);
                    try
                    {
                        downloadClient.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(downloadClient_DownloadCompleted);
                        downloadClient.DownloadProgressChanged += new EventHandler<LiveDownloadProgressChangedEventArgs>(downloadClient_DownloadProgressChanged);
                        downloadClient.DownloadAsync(item.ID + "/content", item); 
```

当文件不是太大时，这将正常工作，但如前所述，选择一个大文件 (>100Mb) 并因 OutOfMemory 异常而死。

任何指针？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:14:10.423

已解决 - 虽然我无法使用 downloadClient.DownloadAsync() 方法下载大文件，但使用 downloadClient.getAsync() 并通过常规 Stream 下载器使用 Pre-Authenticated URL 可以解决问题。

# sql-server - 用于还原的路径变量问题

> ID：11162143
> 
> 赞同：0
> 
> 时间：2012-06-22T18:34:08.383
> 
> 标签：sql-server

我对我的问题有点困惑。我在远程服务器上有一个备份文件，需要在本地恢复。我可以毫无问题地恢复文件，但是由于某些原因，当我将路径的变量附加到我的路径时，它是默认备份位置。如果我要直接放置路径，它会起作用，所以我不相信共享是问题所在。我包括了错误和路径变量的打印结果。我已经复制了打印的路径并用我的变量替换了它，它工作得很好。由于附加了路径，因此当然找不到文件。

我的剧本

```
 --Declare the Network Drive
 Exec XP_CMDSHELL 'net use Y: \\ProdServer\Backups'

--Declare the Filepath
declare @Backupfilename as nvarchar(500)
declare @filename as nvarchar(40)
Set @filename = ( Select Top(1) CONVERT(VARCHAR(36),name)+'.bak' from ProdServer.msdb.dbo.backupset WITH (nolock)
        where database_name='ProdDB'
            order by backup_set_id desc)

Set @Backupfilename = ''''+'Y:\' + @filename + ''''
Print @backupfilename

--Start the Actual Restore
RESTORE DATABASE [TESTRestore] FROM  
DISK = @BackupFileName WITH  FILE = 1,  
MOVE N'ProdDB' TO N'D:\Data\ProdDB_Test.mdf',  
MOVE N'ProdDB_Log' TO N'D:\ProdDB_Test.ldf', 
NOUNLOAD,  REPLACE, STATS = 10
GO

--Clear the Defined Network Path
EXEC XP_CMDSHELL 'net use Y: /delete' 
```

结果

```
'Y:\ProdDB_backup_201206220600.bak' 
```

> 消息 3201，级别 16，状态 2，第 15 行
> 无法打开备份设备 'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\'Y:\ProdDB_backup_201206220600.bak''。
> 操作系统错误 123（文件名、目录名或卷标语法不正确。）。
> 消息 3013，级别 16，状态 1，第 15 行
> RESTORE DATABASE 异常终止。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:37:48.587

我能够通过将路径传递到临时表中，然后在需要时调用它来解决问题。

# facebook - Facebook 给了我很多赞的页面，但赞数不同

> ID：11162153
> 
> 赞同：1
> 
> 时间：2012-06-22T18:35:00.447
> 
> 标签：facebook, web-applications, facebook-like, facebook-social-plugins

我确实在我的网站上添加了 fb 的点赞按钮，经过大约 70 次点赞后，我的链接在现成状态下获得了 fb 页面。
但是页面上的喜欢和我的链接相差很大。
谁能解释我如何匹配两者，例如计数或至少同步它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:34:58.037

我在这里假设了很多，因为您的问题并不完全清楚，但是听起来您是在说“赞”按钮上的计数，而该 URL 的“管理”页面上的赞数不匹配？这是预期的。URL 的点赞按钮计数包括该 URL 的虚拟“管理”页面中未包含的内容：

请参阅[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)：

> **我的“赞”按钮上显示的数字是由什么组成的？**
> 
> 显示的数字是以下各项的总和：
> 
> *   此网址的点赞数
> *   此 URL 的共享数量（这包括将链接复制/粘贴回 Facebook）
> *   Facebook 上有关此 URL 的故事的点赞数和评论数
> *   包含此 URL 作为附件的收件箱邮件数。

# c - 将元素添加到下一个未使用的索引 - C

> ID：11162154
> 
> 赞同：1
> 
> 时间：2012-06-22T18:35:03.627
> 
> 标签：c, arrays

我确定其他人已经问过这个问题，但是是否可以在不使用 for 循环首先找到该索引的情况下将一个元素插入到数组的下一个可用索引中？几乎像 list.add() 函数，但用于 C 中的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:55:27.760

不，您将不得不遍历数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:07:09.187

如果它真的是你想要的列表功能，你可以实现一个简单的链表而不是使用数组，例如：[http ://www.cprogramming.com/tutorial/c/lesson15.html](http://www.cprogramming.com/tutorial/c/lesson15.html)

# spring - 为 Bean ID 使用属性占位符

> ID：11162156
> 
> 赞同：5
> 
> 时间：2012-06-22T18:35:22.740
> 
> 标签：spring, spring-3, spring-integration

在 Spring 3.1 中，是否可以使用属性占位符来解析 bean 的 'id' 属性？

例如，我想在我的 context.xml 文件中执行以下操作：

```
<context:property-placeholder/>

<int:channel id="${channel.name}"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:10:02.303

不，不是 id 和 name 属性 - 这是基于我所看到的 PropertySourcesPlaceholderConfigurer 如何解析占位符。

# windows-phone-7 - WP7 Webbrowser/Http-request 仅在连接到 Zune 时工作

> ID：11162157
> 
> 赞同：0
> 
> 时间：2012-06-22T18:35:24.767
> 
> 标签：windows-phone-7, httpwebrequest, webbrowser-control

所以我一直在努力研究这个应用程序，试图找出这种奇怪的行为，我只是变得越来越困惑，所以我想也许一个更有经验的 WP7 开发人员可以对这个问题有所了解。

我有一个（正在工作？）应用程序，当我通过 Visual Studio 运行它时，甚至当手机插入计算机时，我都可以完美地运行它，但是一旦我断开手机与计算机的连接，我就不能再发送 Httprequests 和我的 webbrowser 控件不再从我的服务器加载页面。分解：

*   我在手机上打开该应用程序，同时它已插入托管服务器的机器，它工作得非常好，没有错误，所有请求都通过并且网络浏览器导航到页面。

*   现在，如果我在应用程序本地运行时从计算机上拔下它，我将失去在我的网络浏览器中发出请求或导航（到服务器托管页面）的所有能力。

*   现在，如果我将其重新插入所有“未找到服务器”和“我们在显示此页面时遇到问题”错误就会消失，并且我的应用程序会返回可用状态。

在手机可以从我的服务器发送和接收数据之前，是否必须接受某种许可，当手机连接到计算机时，该许可被覆盖？有没有其他人遇到过这个问题，或者我只是有什么问题？如果你能指出我正确的方向，那我很难找到问题所在。

编辑：好的，所以我认为它与连接到托管服务器的计算机有关。因为当我将它连接到我的 mac（没有 zune 或任何微软的东西）时，应用程序的响应与未连接相同（即没有 http 或 webbrowser）

*   刚刚尝试在插入服务器计算机时再次运行该应用程序，但没有运行 Zune 并且它不起作用（即没有 http 或 webbrowser）。所以 Zune 绝对是影响因素，有没有人知道当我拔掉它或关闭 Zune 时我没有在做什么？（注意：该应用程序是本机运行的，而不是通过 VS）

*   如果我在另一台运行 Zune 的计算机上运行它，它也不工作，我觉得很奇怪......

*   刚刚发现：[http ://answers.microsoft.com/en-us/zune/forum/zune_install-pc/cannot-connect-to-server-or-dns-error-related-to/b224cffb-3ec0-456a- 86f3-f9b931a92367](http://answers.microsoft.com/en-us/zune/forum/zune_install-pc/cannot-connect-to-server-or-dns-error-related-to/b224cffb-3ec0-456a-86f3-f9b931a92367)希望它能解决我的问题......我们会看到......（编辑：在这里找不到答案）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:08:59.497

哇！我不敢相信我会忽略这一点。所以我认为我使用的网络与我的手机使用的网络不同。您是否知道 Windows Phone（至少 Lumia 800）会自动使用它所插入的任何计算机的互联网，而不是它当前连接的无线网络（如果 Zune 在那台计算机上运行）？（好吧，我没有）最重要的是，我认为它连接到的网络（并且在我与服务器计算机断开连接时正在使用）无法与我的服务器正在运行的网络通信。这种组合很难弄清楚发生了什么，我花了很多时间试图弄清楚。

感谢您的建议，如果我浪费了任何人的时间，我们深表歉意。

# c# - 每次打开 Windows 窗体时，如何阻止 Visual Studio 放大控件？

> ID：11162158
> 
> 赞同：4
> 
> 时间：2012-06-22T18:35:25.287
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, windows-forms-designer

我有一个 Windows 窗体文件，每次我在 Visual Studio 中打开它时，它都会增加设计器文件中控件的大小。如果我保存表单，在编辑器中关闭它，然后再次打开它，那么控件都比以前大了一点。我可以看到控件上的大小属性在设计器文件中都在增加。

谁能向我解释如何解决这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-01T00:15:01.667

在使用 HD res 笔记本电脑与常规 1280 x 800 笔记本电脑在 Windows 8 上运行时，我遇到了 Visual Studio 的问题

高清笔记本电脑全新安装的 Windows 默认设置是将 Windows 程序中的字体大小增加 25%

查看屏幕分辨率 -> 使文本或其他项目更大或更小 -> 选择“让我为所有显示器选择一个缩放级别”以查看设置。就我而言，是 125%。

Visual Studio 似乎根据上面的设置设置了表单或控件 AutoScaleMode 设置。

在表单设计器中：在低分辨率笔记本电脑上 this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);

嗨 res this.AutoScaleDimensions = new System.Drawing.SizeF(7F, 16F);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:42:17.870

为了详细说明我的评论，当设计器加载/保存您的表单时，它将调用表单的公共属性和表单控件的 getter/setter。

这意味着如果您覆盖了表单的属性，并且访问/设置所述属性具有调整控件大小的副作用，则该大小调整将反映在设计器中。然后，当您保存表单时，该新大小将保留在设计器生成的代码中。每次重新打开表单时，都会发生这种调整。

这也适用于在设计器生成的代码中设置的属性的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:38:40.590

只需锁定控件，以免意外移动或调整它们的大小。

只需打开表单设计器，右键单击并从上下文菜单中选择“锁定控件”。

![在此处输入图像描述](../Images/f93d782e2975be8d9ce046355a67aa1b.png)

至于为什么 Visual Studio 会自动调整它们的大小，我只能猜测。

# iphone - iPhone的目标c中的按钮向下/向上？

> ID：11162180
> 
> 赞同：0
> 
> 时间：2012-06-22T18:37:13.550
> 
> 标签：iphone, objective-c, xcode

我有一个按钮，我想在用户按下它时调用一个函数，然后在他释放它时调用另一个函数。

现在我正在使用它来创建按钮：

```
[ScanButton addTarget:self action:@selector(scanButtonPressed) 
 forControlEvents:UIControlEventTouchUpInside]; 
```

调用scanButtonPressed。截至目前 scanButtonPressed 仅在发布时调用。我该如何改变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:38:49.327

通过尝试[除 之外`UIControlEventTouchUpInside`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW65)的控制事件怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:44:01.037

试试 - `UIControlEventTouchDown`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:49:30.737

这包含您可以传递给按钮 [UIControl Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)的所有不同事件。试试看这些；UIControlEventTouchUpInside 和 UIControlEventTouchDown 都可以。

# javascript - jQuery .html() 的回调函数？

> ID：11162181
> 
> 赞同：23
> 
> 时间：2012-06-22T18:37:14.240
> 
> 标签：javascript, jquery, ajax, json

我有以下代码：

```
$.ajax({
      type: 'GET',
      url: 'index.php?route=checkout/onepagecheckout/getpaypaldata',
      dataType: 'json',
      success: function(json) {
                              $('#pp_info').html(json['output']);
                              $('#payment').submit();
                              }
      }); 
```

ajax 请求接收一个包含 html 表单的 json 对象，例如：

```
<form id="payment" method="post" action="https://www.paypal.com/cgi-bin/webscr">
<input type="hidden" value="_cart" name="cmd">
<input type="hidden" value="1" name="upload">
<input type="hidden" value="test@yahoo.ca" name="business">
<input type="hidden" value="Sample Item Name" name="item_name_1">
<input type="hidden" value="TESTI-1" name="item_number_1">
<input type="hidden" value="104.98" name="amount_1">
<input type="hidden" value="1" name="quantity_1">
<input type="hidden" value="0" name="weight_1">
<input type="hidden" value="Type" name="on0_1">
<input type="hidden" value="As Shown" name="os0_1">
<input type="hidden" value="Delivery Date" name="on1_1">
<input type="hidden" value="Jun 23,2012" name="os1_1">
<input type="hidden" value="Comments" name="on3_1">
<input type="hidden" value="test message" name="os3_1">
</form> 
```

其中包含 PayPal 处理订单所需的信息。一切正常，除了我相信有时表单会在 jQuery .html 函数完成加载 html 内容之前提交。

.html 有回调函数吗？或我可以用来解决问题的任何其他方法？PayPal 数据以 HTML 表单的形式出现，我无法更改该部分，所以我只有一个选项，即以某种方式加载 html 内容并提交表单！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-22T19:51:33.373

你可以试试这个

```
success: function(json) {
    $('#pp_info').html(json['output']).promise().done(function(){
        $('#payment').submit();
    });
} 
```

# php - MySQL如何从表中直接检索数据到变量？

> ID：11162182
> 
> 赞同：0
> 
> 时间：2012-06-22T18:37:14.290
> 
> 标签：php, mysql, sql

这只是我的 php 片段：

```
$cookies=$_COOKIE['rwt'];
$user =mysql_query("SELECT user FROM users WHERE cookies='$cookies'"); 
```

如何从 MySQL 表中检索数据，直接到变量 $user？现在我得到奇怪的结果：Resource id #10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:37:59.167

您必须从获得的结果句柄中获取一行：

```
$user = mysql_query(blah blah blah);
$row = mysql_fetch_assoc($user);
echo $row['user']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:42:32.377

在不获取数组的情况下，您可以使用 mysql_result(); 获取单个列值；

```
$cookies=mysql_real_escape_string($_COOKIE['rwt']);
$userResource =mysql_query("SELECT user FROM users WHERE cookies='{$cookies}'");
$user=mysql_result($userResource,0,"user"); 
```

# vba - 在 Excel 2010 VBA 中创建数据透视表的宏过滤问题

> ID：11162183
> 
> 赞同：0
> 
> 时间：2012-06-22T18:37:17.207
> 
> 标签：vba, excel, excel-2010, pivot-table

我是 VBA 新手，正在尝试编写一个创建数据透视表的宏。我需要过滤各种字段，并尝试使用 PivotFilters.Add 和 PivotItems 只让某些事情通过......有时它可以工作，但有时它会引发错误。以下代码可以正常工作：

```
Sub CreatePivot()
Dim objTable As PivotTable, objField As PivotField

ActiveWorkbook.Sheets("CP Monthly Data").Select
Range("A1").Select
Set objTable = Sheet1.PivotTableWizard
objTable.Name = "Resource Requests"
objTable.InGridDropZones = True
objTable.RowAxisLayout xlTabularRow

Set objField = objTable.PivotFields("Company name")
objField.Orientation = xlRowField
objField.Position = 1

Set objField = objTable.PivotFields("Probability Status")
objField.Orientation = xlRowField
objField.Position = 2
objField.PivotItems("X - Lost - 0%").Visible = False
objField.PivotItems("X - On Hold - 0%").Visible = False
objField.AutoSort xlDescending, "Probability Status"

Set objField = objTable.PivotFields("Project")
objField.Orientation = xlRowField
objField.Position = 3

Set objField = objTable.PivotFields("Project manager")
objField.Orientation = xlRowField
objField.Position = 4

Set objField = objTable.PivotFields("Resource name")
objField.Orientation = xlRowField
objField.Position = 5
objField.AutoSort xlAscending, "Resource name"

Set objField = objTable.PivotFields("June, 2012")
objField.Orientation = xlDataField
objField.Function = xlSum
objField.NumberFormat = "##"
objField.Caption = "June"

Set objField = objTable.PivotFields("Workgroup Name")
objField.Orientation = xlPageField
objField.PivotItems("ATG").Visible = False
objField.PivotItems("India - ATG").Visible = False
objField.PivotItems("India - Managed Middleware").Visible = False

Application.DisplayAlerts = True
End Sub 
```

“资源名称”字段给我带来了问题。我只需要显示以“*TBD”开头的资源名称，并排除名称中包含“ATG”的资源名称。到目前为止，我已经尝试了以下方法：

```
Set objField = objTable.PivotFields("Resource name")
objField.Orientation = xlRowField
objField.Position = 5
objField.PivotFilters.Add xlCaptionContains, Value1:="TBD"
objField.PivotFilters.Add xlCaptionDoesNotContain, Value1:="ATG"
objField.AutoSort xlAscending, "Resource name" 
```

返回“运行时错误'1004'：应用程序定义或对象定义的错误

这不正是我所需要的，因为我还需要过滤掉名称中没有“TBD”的那些，但我也尝试过：

```
Set objField = objTable.PivotFields("Resource name")
objField.Orientation = xlRowField
objField.Position = 5
objField.PivotItems("*ATG*").Visible = False
objField.AutoSort xlAscending, "Resource name" 
```

返回“运行时错误'1004'：无法获取 PivotField 类的 PivotItems 属性

我还尝试录制宏并根据我的代码检查结果。结果使用我尝试过的 PivotFilters.Add 。录制的宏和我的代码之间的主要区别在于 PivotTableWizard 的使用，我开始怀疑这是否重要……我是新手，记得吗？

有想法该怎么解决这个吗？我正在使用 Excel 2010 并且已经花费了数小时来搜索它，但我尝试过的任何方法都没有奏效。提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:01:19.437

不幸的是，您不能将相同类型的过滤器应用于 PT 中的一个字段。[这个链接](http://blog.contextures.com/archives/2010/10/22/more-than-one-filter-on-pivot-table-field/)是一个不错的阅读。

要解决您的问题，您可以在上面的帖子中替换此代码块：

```
Set objField = objTable.PivotFields("Resource name")
objField.Orientation = xlRowField
objField.Position = 5
objField.AutoSort xlAscending, "Resource name" 
```

使用以下代码：

```
'1) Filter on any thing that contains `TBD`
Set objField = objTable.PivotFields("Resource name")
objField.Orientation = xlRowField
objField.Position = 5
objField.PivotFilters.Add xlCaptionContains, Value1:="TBD"

'2) Loop through the items in the field and uncheck anything with `ATG` in the name
Dim pi As PivotItem
Dim i as Integer

For i = 1 To objField.PivotItems.Count
    If InStr(1, objField.PivotItems(i), "ATG") <> 0 Then
        objField.PivotItems(i).Visible = False
    End If
Next

objField.AutoSort xlAscending, "Resource name" 
```

# linq-to-entities - 如何在 select 语句中使用 linq 查询来确定带有实体框架的布尔值

> ID：11162188
> 
> 赞同：0
> 
> 时间：2012-06-22T18:37:25.803
> 
> 标签：linq-to-entities, visual-studio-lightswitch, conditional-operator

我正在查询一组实体框架对象并通过 WCF RIA 服务将它们投影到灯光开关中。

在我的查询中，我在几个表之间执行连接，其中一个是汇总表的详细信息。我想确定哪个详细项目是列表中的“第一个”项目，并在枚举期间将其与我的投影中的当前项目进行比较。在投影中我想更改我的哪些可用属性设置这个特定投影的属性的原因。

这是这样减少的查询

```
var result = (from dataItem in (from x in Context.xs
              join y in Context.ys
              on x.property = y.property
              select new {x, y})
              .Select( (model, index) =>
                          new ObjectType 
                              { 
                                  Id = index,
                                  OneOfTwo = model.x.property,
                                  (
                                       from y in Context.ys 
                                       where y.SomeProperty == model.Property
                                       select y)
                                       .OrderBy(list=>list.Id)
                                       .FirstOrDefault()
                                       .ComparedProperty ==model.ComparedProperty
                                   ) 
                                   ? model.AnotherProperty
                                   : model.YetAnotherProerty
                              }
               ); 
```

我如何评估该内部查询而不会遇到 DataReader 错误，因为我试图在读取上下文时使用它？

更新：
我做了一些研究并意识到这不是 linq to sql 的问题，而是 linq to entity 的问题。本质上，该操作相当于使用不支持的参数化查询。在这种情况下有什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:53:19.813

LightSwitch 不会让您拥有一个属性为*dynamic*的实体。它必须被赋予一个*具体*的实体，所以我认为你不能做你想做的事，除非动态属性当然是相同的类型（你没有指定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:15:24.943

解决方案是将数据投影到 List 集合，我需要数据传输对象并利用 linq 到对象。然后我通过 WCFRIA 服务将我的收藏品暴露给 lightswitch。

# c# - WCF 错误“套接字连接已被释放”

> ID：11162190
> 
> 赞同：3
> 
> 时间：2012-06-22T18:37:33.417
> 
> 标签：c#, .net, wcf, .net-4.0

我有一个 WCF 服务，它可以根据输入参数返回大量数据。

该服务作为 ServiceHost 可执行文件在我的机器上运行，我现在正在使用 WCF 测试客户端进行测试。

这是我的主机配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_ExchangeRepository"
                         closeTimeout="00:01:00" openTimeout="00:01:00"
                         receiveTimeout="00:10:00" sendTimeout="00:10:00"
                         transactionFlow="false" transferMode="Streamed"
                         transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard"
                         listenBacklog="500"    maxBufferPoolSize="2147483646"
                         maxBufferSize="2147483646" maxConnections="500"
                         maxReceivedMessageSize="2147483647"  >
                    <readerQuotas
                        maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="4096" maxNameTableCharCount="2147483647" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
                    <security mode="None">
                    </security>
                </binding>          
            </netTcpBinding>
        </bindings>         
        <services>          
            <service name="MyCompany.MyApplication.DataServices.ExchangeRepository" 
                     behaviorConfiguration="MyCompany.MyApplication.DataServicesBehavior">
                <endpoint address ="" 
                          binding="netTcpBinding" 
                          contract="MyCompany.MyApplication.DataServices.IExchangeRepository"
                          bindingConfiguration="NetTcpBinding_ExchangeRepository" 
                          behaviorConfiguration="MyCompany.MyApplication.EndpointBehavior">
                    <identity>
                        <dns value="localhost"/>
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
                <host>
                    <baseAddresses>
                        <add baseAddress = "net.tcp://localhost:8896/ExchangeRepository/" />
                        <add baseAddress = "http://localhost:8895/ExchangeRepository/" />
                    </baseAddresses>
                </host>
            </service>
        </services>         
        <behaviors>
            <serviceBehaviors>
                <behavior name="MyCompany.MyApplication.DataServicesBehavior">
                    <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
                    <serviceMetadata httpGetEnabled="True"/>
                    <serviceDebug includeExceptionDetailInFaults="True" />
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
                <behavior name="MyCompany.MyApplication.EndpointBehavior">
                    <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
                </behavior>
            </endpointBehaviors>
        </behaviors>    
    </system.serviceModel>
</configuration> 
```

这是我的客户端配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="endpointBehaviour">
                    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IExchangeRepository" closeTimeout="00:10:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    transactionFlow="false" transferMode="Streamed" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="524288" maxBufferSize="2147483647" maxConnections="10"
                    maxReceivedMessageSize="2147483647">
                    <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="2147483647" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="None">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:8896/ExchangeRepository/"
                behaviorConfiguration="endpointBehaviour" binding="netTcpBinding"
                bindingConfiguration="NetTcpBinding_IExchangeRepository" contract="IExchangeRepository"
                name="NetTcpBinding_IExchangeRepository">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

这是我得到的错误：

```
The socket connection has been disposed.

Server stack trace: 
   at System.ServiceModel.Channels.SocketConnection.ThrowIfNotOpen()
   at System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.PreReadConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.ReadCore(Byte[] buffer, Int32 offset, Int32 count)
   at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.ServiceModel.Channels.MaxMessageSizeStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.ServiceModel.Channels.SingletonConnectionReader.Close(TimeSpan timeout)
   at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.Close()
   at System.ServiceModel.Channels.DelegatingStream.Close()
   at System.Xml.XmlBufferReader.Close()
   at System.Xml.XmlBaseReader.Close()
   at System.Xml.XmlBinaryReader.Close()
   at System.Xml.XmlReader.Dispose(Boolean disposing)
   at System.Xml.XmlReader.Dispose()
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)
   at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at IExchangeRepository.SearchExchangeRequest(String AccountNumber, Int32 StatusCode, Int32 StartDate, Int32 EndDate)
   at ExchangeRepositoryClient.SearchExchangeRequest(String AccountNumber, Int32 StatusCode, Int32 StartDate, Int32 EndDate)

Inner Exception:
The socket connection has been disposed.
Object name: 'System.ServiceModel.Channels.SocketConnection'. 
```

当返回的数据超过一定数量的记录时会发生错误。使用较少的数据，一切都按预期工作。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:29:19.613

好吧，这一切都是由愚蠢的数据问题引起的。错误信息绝对没用。启用跟踪允许查看实际异常。谢谢你，EkoostikMartin！

# php - 如何配置 Varnish VCL 文件以缓存 OSCommerce 站点？

> ID：11162192
> 
> 赞同：0
> 
> 时间：2012-06-22T18:37:39.127
> 
> 标签：php, linux, wordpress, varnish, oscommerce

我正在使用 Ubuntu Server 12.04 使用 Nginx、PHP-FPM、APC、Varnish 和 MySQL 构建一个用于开发目的的简单服务器设置。

但现在我想在这个测试环境中部署一个 OSCommerce 应用程序。经过一番谷歌搜索后，我找不到使用 Varnish 正确配置 OSCommerce 的方法。

实际上，我已经为 Wordpress 配置了 Varnish（varnish 文件和 default.vcl 文件），就像那里的一个（[GitHub-Nicolargo](https://github.com/nicolargo/varnish-nginx-wordpress)）一样，但只是做了一点修改。

那么，我应该为 WP 使用相同的配置吗？如果没有，有人知道如何（或我应该在哪里找到）为 OSCommerce 正确配置它？

拥抱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T07:30:12.367

为 Wordpress、Joomla、Drupal 或 OSCommerce 等开源模型配置 Varnish 很棘手：您可以拥有一个默认 VCL，它在 50% 的情况下工作得很好，但是一旦在 CMS 中激活了额外的模块，缓存就会停止在职的。那是因为每个模块都可以更改 cookie、缓存头、...

这几乎使每个 Varnish 实现都成为一项自定义工作：您可以从适用于基本 CMS 的基本 VCL 开始，但需要针对该站点进行微调。

因此，我建议从基本的 VCL 文件开始，例如您链接的文件或您可以在[此处](https://github.com/mattiasgeniar/varnish-3.0-configuration-templates)找到的文件。之后，运行 varnishlog/varnishhist/varnishstat 来找出哪些页面没有被缓存，确定原因（cookies/headers/invalid VCL）并修改适当的 VCL 文件。

我知道这不是您直接寻找的答案，但是如果您可以发布一些 varnishlog 的输出，其中 - 应该缓存的请求 - 没有 - 被缓存，我们可以从那里获取它。

# maven - 从 Heroku 配置的环境变量中触发 Maven 配置文件

> ID：11162194
> 
> 赞同：7
> 
> 时间：2012-06-22T18:37:41.700
> 
> 标签：maven, heroku

我正在尝试在我的 maven pom 中激活配置文件，如下所示：-

```
 <profile>
        <id>test</id>
        </properties>
        <activation>
            <property>
                <name>env.SITE</name>
                <value>test</value>
            </property>
        </activation>
    </profile> 
```

现在我将heroku配置为具有环境变量SITE，如下所示：-

heroku 配置：添加站点=测试。

我希望环境变量在推送代码时触发配置文件。然而，这并没有发生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-02T18:52:19.773

您可以在没有自定义构建包的情况下执行此操作。

在你的 pom.xml 中使用这个片段来显示 Heroku 上所有可用的属性并选择一个不在你本地的属性：http: [//florianlr.wordpress.com/2012/04/24/16/](http://florianlr.wordpress.com/2012/04/24/16/)

我使用了 env.DYNO

```
 <profile>
        <id>heroku</id>
        <activation>
            <property>
                <name>env.DYNO</name>
            </property>
        </activation>
    ...
    </profile>
    ... 
```

奇迹般有效：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-29T08:12:03.530

或者您可以引入自己定制的 Maven`settings.xml`文件，例如`heroku-settings.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

    <!-- activate by setting the MAVEN_SETTINGS_PATH config var to heroku-settings.xml in Heroku project settings tab.
    See https://devcenter.heroku.com/articles/using-a-custom-maven-settings-xml for more details.
     -->

    <activeProfiles>
        <activeProfile>production</activeProfile>
    </activeProfiles>
</settings> 
```

然后通过在 Heroku 项目设置选项卡中设置`MAVEN_SETTINGS_PATH`config var 来激活设置`heroku-settings.xml`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-03T04:36:52.063

您可以使用环境变量指定 Maven 配置文件`MAVEN_CUSTOM_OPTS`。

在你的 pom 中定义 maven 配置文件激活是基于属性的存在。如果您指定，下面的示例将使用开发配置文件，如果您不指定，则默认使用生产配置文件。[参考](https://maven.apache.org/guides/introduction/introduction-to-profiles.html)

```
<profiles>
    <profile>
        <id>production</id>
        <activation>
            <property>
                <name>!profile-development</name>
            </property>
        </activation>
    </profile>
    <profile>
        <id>development</id>
        <activation>
            <property>
                <name>profile-development</name>
            </property>
        </activation>
    </profile>
</profiles> 
```

在 Heroku 中设置`MAVEN_CUSTOM_OPTS`环境变量以使用配置文件。请注意，此变量会覆盖默认选项`-DskipTests`。[参考](https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-java)

```
MAVEN_CUSTOM_OPTS=-DskipTests -Dprofile-development 
```

在此示例中，不需要`MAVEN_CUSTOM_OPTS`声明生产配置文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T23:52:38.157

配置变量当前在编译时不可用。要更改 Maven 配置文件，您需要 fork [Heroku Java Buildpack](https://github.com/heroku/heroku-buildpack-java)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-13T21:02:14.403

我通过添加 Heroku Environment 解决了我的问题，如下所示：

```
MAVEN_CUSTOM_OPTS=-P<profile_id> 
```

并从 pom.xml 中删除“激活”标签。

顺便说一句，我不知道为什么这不起作用（在 Heroku 我有 ENVIRONMENT=test）

```
<profile>
  <id>test</id>
  <activation>
    <property>
      <name>env.ENVIRONMENT</name>
      <value>test</value>
    </property>
  </activation>
...
</profile> 
```

# drupal - 创建一个 Drupal 视图，加载共享任何一个分类术语的所有文章（上下文过滤器）

> ID：11162196
> 
> 赞同：1
> 
> 时间：2012-06-22T18:37:52.577
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

我有一个包含分类术语列表的自定义文章类型

例如，文章可以用一个位置和可能的多个主题来标记。

在任何给定文章的显示页面上，我希望能够拉出一个视图，该视图给出了共享任何分类术语的其他文章的列表。

如果一篇文章被标记为`recipes`&的主题`chicken`以及位置，`new york`我希望我的单一视图显示共享上述任何一个标签的五篇最新文章。

分类术语已以“术语参考”或“节点参考”类型的新字段的形式添加到文章中。( `field_topic`, `field_location`)

我知道我必须以某种方式使用上下文过滤器，但我在弄清楚如何设置和调试我的“默认参数”时遇到了一些麻烦。

我怀疑我必须选择：

*   来自 URL 的分类术语 ID
*   从节点页面加载默认过滤器
*   用 PHP 代码做一些事情

我真的很难让这个显示任何东西，我什至看不到调试方法来找出我得到的值是什么。

任何人都可以帮助解决这个问题吗？在这一点上，即使是一些关于正确方向的指导也会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:44:32.737

如果您有 Drupal 7 和 Views 3，您只需单击即可完成此操作（我确定您已经有了）。到目前为止，您的配置是正确的。

1.  如果未给出 arg，请选择“提供默认值”作为要执行的操作。
2.  从 URL 中选择术语 ID”
3.  选中“从节点页面加载默认过滤器，这对相关分类块有好处”
4.  :)

如果未给出参数，这将从当前节点的术语引用字段加载术语 ID。

# python - 在字典中使用字符串作为键总是更快吗？

> ID：11162201
> 
> 赞同：24
> 
> 时间：2012-06-22T18:38:19.913
> 
> 标签：python

在这个[页面上](http://wiki.python.org/moin/TimeComplexity)，我看到了一些有趣的东西：

*请注意，（在实践中）仅处理 str 键的 dicts 有一条快速路径；这不会影响算法的复杂性，但会显着影响常数因素：典型程序完成的速度。*

那么它到底是什么意思呢？

这是否意味着使用字符串作为键总是更快？

如果是，为什么？

**更新：**

感谢您对优化的建议！但实际上我更感兴趣的是显而易见的事实，而不是我们是否应该或何时应该进行优化。

**更新 2：**

感谢您提供出色的答案，我将在此处引用@DaveWebb 提供的[链接中的内容：](http://lewk.org/blog/python-dictionary-optimizations)

“……

**ma_lookup**最初设置为**lookdict_string**函数（在3.0 中重命名为**lookdict_unicode**），它假定字典中的键和正在搜索的键都是标准PyStringObject 的。然后它可以进行一些优化，例如减轻各种错误检查，因为字符串到字符串的比较不会引发异常。也不需要富对象比较，这意味着我们避免调用**PyObject_RichCompareBool**，并且总是直接使用**_PyString_Eq**。

……”

另外，对于实验数字，我认为如果没有 int 到 string 的转换，差异的大小会更大

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T18:47:58.503

Python dict 基础的 C 代码针对字符串键进行了优化。 [您可以在此处阅读](http://lewk.org/blog/python-dictionary-optimizations)相关内容（以及该博客所指的书中）。

如果 Python 运行时知道你的 dict 只包含字符串键，它可以做一些事情，例如不处理字符串到字符串比较不会发生的错误，并忽略丰富的比较运算符。这将使字符串键的常见情况只`dict`快一点。（更新：时间显示它不止一点。）

但是，这不太可能对大多数 Python 程序的运行时间产生重大影响。`dict`如果您已测量并发现查找是代码中的瓶颈， 则只需担心此优化。[正如名言所说，“过早的优化是万恶之源。”](http://en.wikiquote.org/wiki/Donald_Knuth)

唯一能看出事情到底有多快的方法是给它们计时：

```
>>> timeit.timeit('a["500"]','a ={}\nfor i in range(1000): a[str(i)] = i')
0.06659698486328125
>>> timeit.timeit('a[500]','a ={}\nfor i in range(1000): a[i] = i')
0.09005999565124512 
```

因此，使用字符串键比`int`键快约 30%，我不得不承认我对差异的大小感到惊讶。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T18:43:58.463

由于这仅影响恒定时间，因此可能根本不重要。您真正需要优化的唯一时间是当您使用非常大的数据集时 - 这不会产生任何影响。

这确实意味着，在您有以字符串为键的小型字典的情况下，Python 会很快——这是一种常见用法，因此已针对它进行了优化。

正如 Ignacio Vazquez-Abrams 指出的那样，将您的密钥转换为字符串可能会花费（远远）超过您可能从它作为 dict 的字符串中获得的轻微提升。

简而言之，使用与您的情况相关的内容 - 优化应该只在需要的地方进行，而不是之前。

一些测试：

```
python -m timeit -s "a={key: 1 for key in range(1000)}" "a[500]"
10000000 loops, best of 3: 0.0773 usec per loop

python -m timeit -s "a={str(key): 1 for key in range(1000)}" "a[\"500\"]"
10000000 loops, best of 3: 0.0452 usec per loop

python -m timeit -s "a={str(key): 1 for key in range(1000)}" "a[str(500)]"
1000000 loops, best of 3: 0.244 usec per loop 
```

如您所见，虽然基于字符串的 dict 更快，但相比之下转换密钥非常昂贵，完全降低了增益（然后是一些）。

所以是的，如果您使用的数据**仅用**作字典的键，并且您将它们存储在什么格式中并不重要，那么在小型字典中字符串更可取。实际上，这是一种非常罕见的情况（您可能已经在使用字符串了）。

# javascript - 纯css3的键盘导航

> ID：11162202
> 
> 赞同：4
> 
> 时间：2012-06-22T18:38:30.573
> 
> 标签：javascript, css, keyboard, navigation, lightbox

有没有办法在没有 js 或任何 js 库的情况下仅使用 css3 将键盘导航添加到链接？具体来说，我用一堆图像创建了一个纯 css3 灯箱效果，但我想使用左右键在图像之间导航而不点击屏幕上的任何位置，并使用转义来获得“取消”按钮的效果（类似于关闭）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:13:19.273

您所要求的对于级联样式表实际上是不可能的，您可以为时序设置动画或使用 CSS 进行动画、过渡等操作，但您无法仅使用 CSS 完成您想做的事情！

**原因**

1.  级联样式表用于制作页面的视觉元素，而不是 UX
2.  Css 没有与键盘交互的方法。

您可以添加一点 javascript 来实现这一点。但是因为你不想使用 javascript 你被卡住了！

**复选框黑客**

使用复选框单选框可以实现类似这样的功能，但最初需要再次关注焦点。这可以使用自动对焦属性来完成..

所以这个小提琴应该可以解决你的问题。

[http://jsfiddle.net/darkyen/NUtnX/](http://jsfiddle.net/darkyen/NUtnX/)

但我想事先警告你任何“模糊”都会导致失败。所以下面列出了更好的javascript代码变体

**JavaScript 代码**

实现你想要的 javascript 代码将包含非常少的 javascript 说你的标记是

所以你可以简单地分配一个 lil javascript

```
(function(){
 var slide = 0,  // Current slide 
     max   = 10, // Maximum Number of slides
 ele = document.getElementById("show");
     document.addEventListener('keydown',function(e){
          e.preventDefault();
          e.stopPropagation(); // To stop more event stuff and default behaviour
          key = e.keyCode; // To find out what key is this 
          if( key === 39 ){
              // Right arrow 
              // Aha we incremented the value!
              slide++;
              slide %= (max+1);
              // Increase the value of slide by 1 and keep em in limits
          }else if( key === 37){
              slide = (--slide >= 0)?slide: ( slide + max );
              // Will decrement the slide value by 1 and if they are less then 0 then   will cycle it to the last slide 
          }  

          ele.className.replace(/slide[0-9]/gi,'slide'+slide);                 
          // wasn't hard now was it ?     
     });
 })(); 
```

上面的最小 javascript 将完成更改幻灯片的任务，或者您始终可以看到[impress.js的源代码](https://github.com/bartaz/impress.js)

# java - 如何使用 KeyListener 接口？

> ID：11162203
> 
> 赞同：1
> 
> 时间：2012-06-22T18:38:33.210
> 
> 标签：java, listener, keypress, keylistener, keyevent

我刚开始使用`KeyListener`界面。我想创建一个非常简单的控制台应用程序。如果我按“ENTER”键，我希望程序打印“hi”。不幸的是，由于我缺乏知识，当我按下键盘上的回车键时，什么也没有发生。我没有使用 Scanner 类，因为它要求用户输入某些内容，或者只需按 Enter 即可执行某些内容。我希望一个过程继续进行，直到它被按键中断。这是我的代码到目前为止的样子：

```
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;

public class Trash implements KeyListener {
   public void keyPressed(KeyEvent e){
      System.out.println("hi");
      switch (e.getKeyCode()) {
         case KeyEvent.VK_ENTER:
            System.out.println("hi");
      }
   }

   public void keyTyped(KeyEvent e){}

   public void keyReleased(KeyEvent e){}

   public static void main (String [] args){
      Trash obj1 = new Trash();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:54:21.197

KeyListener 只能添加到 GUI 组件中。它不能在控制台应用程序中使用。这就是为什么它在一个`java.awt`子包中。AWT = Abstract Window Toolkit，Java 的基本 GUI 工具包。

如果您想在控制台中按下 enter 时中断“进程”，您应该为您的进程使用一个线程，另一个线程从标准输入读取并在输入某些内容时中断另一个线程。

# linux - 这个 shellscript 是做什么的？

> ID：11162210
> 
> 赞同：-5
> 
> 时间：2012-06-22T18:39:01.900
> 
> 标签：linux, shell, unix

```
#! /bin/bash
#
# clear_ram.sh - Clear as much user-space ram as possible 
#                       (until the OOM_killer gets us)
#

       swapoff -a
       mem=$(free -b | grep Mem | awk '{print $2}')
       mount none -t tmpfs -o size=$mem /tmp
       dd if=/dev/zero of=/tmp/zero.dat bs=1M &
       echo "17" > /proc/$(pidof dd)/oomadj
       while (pidof dd); do kill -USR1 $(pidof dd); done 
```

这是一个外壳脚本。这段代码有什么作用？

不是家庭作业

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:42:52.783

这个脚本

*   停用交换
*   获得以字节为单位的 RAM 量
*   挂载一个等于可用 RAM 的 ramdisk
*   通过 dd 将零写入 ramdisk
*   尝试将`dd`进程设置为内存不足杀手的第一块
*   `dd`只要它继续运行，就打印它的进程 ID及其当前状态

我说“尝试”是因为它应该写入`oom_adj`而不是写入`oomadj`，至少对于最近的内核来说，并且因为最大值是 15 而不是 17。

这里还有一个错误，因为它会打印**所有**正在执行的 PID 和状态`dd`，而不仅仅是脚本中的那个。

正如评论所说，最终内核内存不足杀手将终止该进程。

我很确定这是一件愚蠢的事情。我不知道为什么您实际上需要以这种方式将内存归零。

# java - 通过 JWS 启动 xuggle 应用程序时出现运行时异常

> ID：11162211
> 
> 赞同：2
> 
> 时间：2012-06-22T18:39:19.903
> 
> 标签：java, jnlp, java-web-start, xuggle, xuggler

当我通过 JWS 启动我的应用程序时出现以下异常。但是当作为没有 JNLP 的独立 Java 应用程序启动时，它工作得很好。

```
 Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
at com.xuggle.ferry.JNIMemoryManager.<init>(JNIMemoryManager.java:861)
at com.xuggle.ferry.JNIMemoryManager.<clinit>(JNIMemoryManager.java:860)
at com.xuggle.mediatool.MediaWriter.<clinit>(MediaWriter.java:119)
at com.xuggle.mediatool.ToolFactory.makeWriter(ToolFactory.java:149) 
```

这是 JNLP：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://localhost/MyApp" href="MyAppLauncher.jnlp">
<information>
    <title>MyAPP</title>
    <vendor>Me</vendor>
</information>
<resources>
    <!-- Application Resources -->
    <j2se version="1.6+"
          href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="MyAppJar.jar"
        main="true" />
    <jar href="xuggle-xuggler.jar" />
    <jar href="xuggle-xuggler-test.jar" />
    <jar href="slf4j-api-1.6.6.jar" />

</resources>
<application-desc
     name="MyApplication"
     main-class=
       "ApplicationMain"
     width="300"
     height="300">
 </application-desc>
<security>
 <all-permissions/>
</security>
<offline-allowed />
 <update check="background"/>
</jnlp> 
```

MyApp.jar 包含主类文件。所有使用的 JARS 都已签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:37:28.490

1.  `org.slf4j.LoggerFactory`确保资源中引用了包含的 Jar 。
2.  JNLP 无效。请务必使用[JaNeLA](http://pscode.org/janela/)检查（并纠正）它。

# sql - SQL 命令 WHERE 可以在同一命令行中但在 2 个不同的表上使用吗

> ID：11162212
> 
> 赞同：0
> 
> 时间：2012-06-22T18:39:26.357
> 
> 标签：sql, sql-server, sql-server-2008

我有两张表要连接在一起。

**表格1**

```
Year, ID, Theme, 
```

**表2**

```
First, Last, WeekID, Date, Affiliation 
```

我想使用这个命令

```
SELECT * 
FROM Table1 
CROSS JOIN Table2 
WHERE Table1.ID = 5 
    AND WHERE Table2.Date >= 1/1/2011 
    AND Table2.Date <= 12/30/2011 
ORDER BY Asc 
```

我想要发生的是选择表 1 中的所有行和列，其中 ID 列包含 int 值 5。在表 2 中，应选择给定日期范围内的所有列和行。

我想知道该`WHERE`子句是否应该`CROSS JOIN`像我上面所说的那样出现在该子句之后。我还应该删除第二个`WHERE`关键字，而是使用以下命令。

```
SELECT * 
FROM Table1 
CROSS JOIN Table2 
WHERE Table1.ID = 5 
    AND Table2.Date >= 1/1/2011 
    AND Table2.Date <= 12/30/2011 
ORDER BY Asc 
```

我的第三个问题是棘手的。可以在这样的单个命令中使用 2 个不同`WHERE`的子句但应用于单独的表吗？`WHERE Table1 (*Condition*) AND WHERE Table2 (*Condition*)`当我加入表格时，我可以有什么意思？

`JOIN`我想我可以通过为每个表创建 2 个单独的 SQL 命令 1 并避免使用and`2 WHERE`子句来轻松解决整个问题。这会是你推荐的吗？

最终结果看起来像这样

**表3**

```
ID, Year, Theme, WeekID, Date, First, Last, Affiliation 
```

然后，单元格将根据日期按升序排列。

示例表如下

**表3**

```
ID     Year     Theme     WeekID     Date          First      Last    Affiliation
5      2011     Stuff1    1          01/09/2011    Foo        Bar     Baz Inc
5      2011     Stuff2    2          01/14/2011    Flum       Baz     Bar Inc
5      2011     Stuff3    3          04/15/2011    Bar        Flum    Bub Inc
5      2011     Stuff4    4          05/01/2011    Bar        Foo     FlumBub Inc 
5      2011     Stuff5    5          08/16/2011    Bub        Baz     Foo Inc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:01:35.673

**问：**我想知道 WHERE 子句是否应该像我上面所说的那样在 CROSS JOIN 子句之后。

**A:**是的，这是该`WHERE`条款的正确放置。

**问：**我也应该删除第二个 WHERE 关键字，而是使用以下命令。

**A:**是的，从句在简单语句`WHERE`中只能出现一次。`SELECT`每个子查询都可以有自己的`WHERE`子句，但这实际上仍然是`WHERE`每个 SELECT 一个子句。

**问：**我的第三个问题比较棘手。可以在这样的单个命令中使用 2 个不同的 WHERE 子句但应用于单独的表吗？意思是当我加入表格时，我可以有 WHERE Table1 ( *Condition* ) 和 WHERE Table2 ( *Condition ) 吗？*

**A：**每个`WHERE`关键字只能出现一次`SELECT`。您可以在任何表中自由包含谓词。

* * *

另外，要回答一些您没有问的其他问题...

`ORDER BY`您需要在子句中提供一个表达式或表达式列表。默认顺序是`ASC`，所以这个关键字最常被省略。

Table2 的 Date 列上的谓词似乎表示日期文字。（正如它们在您的陈述中一样，它们似乎代表一个整数值，由一系列除法运算得出。

文字应显式转换为 DATETIME（以匹配 Date 列的数据类型）。SQL Server 不需要显式 CONVERT，但如果没有转换，您确实希望将它们表示为规范（明确）格式的字符串。（“2012 年 3 月 5 日”代表 3 月 5 日还是 5 月 3 日？）

SQL Server DATTIME 数据类型存储日期和时间组件。通常，当用户询问结束日期时，他们也意味着当天的任何时间。考虑到 '2011-12-30 09:30:00' 的 DATETIME 值不是 <= '2011-12-30'，我们通常会编写 LESS THAN 次日午夜的测试。

限定对列的引用是非常好的做法。这通常使用表别名来完成。表别名不是必需的，但它们是一种熟悉的模式，可以使阅读语句更容易。当表名是完全限定的时尤其如此`mydatabase.schema.MyLongAndUnWeILDyTblName`，并且在更复杂的表达式中使用完全限定的列名会使破译表达式变得非常乏味。（在你的情况下并不是一个真正的问题，但它是我们即使在简单的陈述中也遵循的模式。）

此外，最佳做法是避免在 SELECT 列表中使用 *（除非您从内联视图或语句中的 CTE 中进行选择）。而是列出您想要返回的特定表达式。对于测试和开发，使用 * 很好。除了那些小问题，你的陈述看起来不错。

（避免使用 * 和限定列名可以避免将来可能发生的问题，例如，当向表中添加新列时，会产生以前不存在的“模糊列”异常。（我们喜欢无需对应用程序中的每个 SQL 语句运行完整的回归测试即可添加列。）

鉴于您没有要求的所有信息......在我们的商店中，返回指定结果集的语句将采用如下格式：

```
SELECT t1.ID
     , t1.Year
     , t1.Theme
     , t2.WeekID
     , t2.Date
     , t2.First
     , t2.Last
     , t2.Affiliation
  FROM dbo.Table1 t1
 CROSS
  JOIN dbo.Table2 t2
 WHERE t1.ID = 5 
   AND t2.Date >= CONVERT(DATETIME,'2011-01-01',20)
   AND t2.Date <  CONVERT(DATETIME,'2011-12-31',20)
 ORDER
    BY t1.ID
     , t1.Year
     , t1.Theme
     , t2.WeekID
     , t2.Date
     , t2.First
     , t2.Last
     , t2.Affiliation 
```

* * *

在后来的评论中，Derek 指出该`Date`列是 VARCHAR。在那种不幸的情况下，我们需要知道日期的表示格式。

如果字符串表示不是规范格式，则 VARCHAR 比较将产生不希望的结果。

（注意字符串“3/5/2011”不在“1/1/2011”和“12/30/2011”之间。）

使用 DATETIME 数据类型存储日期值具有显着优势。如果这是不可能的（出于某人提出的任何阴险原因），并且字符串不是规范格式，那么谓词实际上应该更像：

```
AND CONVERT(DATETIME,t2.Date,101) >= CONVERT(DATETIME,'01/01/2011',101)
AND CONVERT(DATETIME,t2.Date,101) <  CONVERT(DATETIME,'12/31/2011',101) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:02:17.187

我认为你最好使用这样的 CTE：

```
WITH Table1CTE (COL1, COL2)
AS
(
SELECT COL1, COL2
FROM Table1 
WHERE Table1.ID = 5
),
Table2CTE (COL3, COL4)
AS
(
SELECT COL3, COL4
FROM TABLE2
WHERE Table2.Date >= 1/1/2011 
    AND Table2.Date <= 12/30/2011
)
SELECT *
FROM Table1CTE CROSS JOIN Table2CTE
ORDER BY COL1 ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:07:42.740

第一个`SELECT`命令

```
SELECT *  
FROM Table1  
CROSS JOIN Table2  
WHERE Table1.ID = 5  
    AND WHERE Table2.Date >= 1/1/2011  
    AND Table2.Date <= 12/30/2011  
ORDER BY Asc 
```

会产生一个

> 关键字 WHERE 附近的语法错误

只`WHERE`需要使用一个语句，任何其他条件都可以由 指定`AND`。

上面指定的日期也需要这样格式化

```
Table2.Date >= '01/01/2011'  AND Table2.Date <= '12/30/2011' 
```

否则，SQL 命令将执行整数运算并将类型转换为，`int`而不是将日期字符串与表中类型为 的日期匹配`varchar`。

# python - 面料相当于try finally

> ID：11162214
> 
> 赞同：5
> 
> 时间：2012-06-22T18:39:30.210
> 
> 标签：python, fabric

无论 Fabric 是否干净退出，我都需要执行一堆清理任务（主要是**删除临时文件和文件夹**）。

如何使用 Fabric 实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T22:06:19.037

在你的 fabfile 中放这样的东西：

```
from fabric.context_managers import settings

def task_name():
    # commands that are not expected to fail
    ...
    with settings(warn_only=True):
        # commands that might fail
        ...
    clean_up() 
```

`warn_only=True`如果您不在乎，您甚至可能希望对整个任务进行处理：

```
@with_settings(warn_only=True)
def task_name():
    ... 
```

（[更多信息](http://docs.fabfile.org/en/1.4.3/api/core/context_managers.html#fabric.context_managers.settings)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:35:50.613

您总是可以使用新的 execute() 并将其包装在 try/except 中，或者只查看 run() 的返回码。

# c# - 小数之间的区别？和 System.Nullable

> ID：11162216
> 
> 赞同：0
> 
> 时间：2012-06-22T18:39:32.773
> 
> 标签：c#, c#-4.0, fluent-nhibernate

> **可能重复：**
> [C# Nullable<int> vs. int?：有什么区别吗？](https://stackoverflow.com/questions/4028830/c-sharp-nullableint-vs-int-is-there-any-difference)

在转换可空类型时使用 NMG（Nhibernate 映射生成器）时，我得到了它们，`System.Nullable<decimal>` 而通过使用 Visual Nhibernate 跟踪包，我得到了可空类型为十进制？

我知道什么是十进制？确实，在非技术术语中的空值的情况下，它被接受而不会引发错误。

但我不知道小数之间是否有任何区别？和`System.Nullable<decimal>`与否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:44:11.457

来自[MSDN - Nullable 类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=VS.80%29.aspx)

> 语法**T** ? 是 的简写`System.Nullable<T>`，其中**T**是值类型。这两种形式可以互换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:43:02.350

没有不同。在编译时`decimal?`转换为。`Nullable<decimal>`它可以说语法糖

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:51:48.667

十进制？是一种简短的方法 System.Nullable 这已经回答了[吗？C# 中的（可为空）运算符](https://stackoverflow.com/questions/3183818/nullable-operator-in-c-sharp)

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:42:08.217

两者之间没有区别。类型？只是一种快捷表示法。

# mysql - 从用户控制器引用会话控制器以检查用户是否已登录

> ID：11162217
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:39:33.053
> 
> 标签：mysql, ruby, ruby-on-rails-3, testing

```
NoMethodError in UsersController#show

undefined method `signed_in?' for #<UsersController:0x5bf3980>

Rails.root: C:/test_app
Application Trace | Framework Trace | Full Trace

app/controllers/users_controller.rb:91:in `signed_in_user'

Request
Parameters:
{"id"=>"1"}

Show session dump

Show env dump
Response

Headers:
None 
```

在用户控制器

```
 def signed_in_user
      redirect_to signin_path, notice: "Please Sign In." unless signed_in?
    end 
```

在 SessionsController 中

```
 def signed_in?
    !current_user.nil?
  end 
```

* * *

```
module SessionsHelper

def sign_in(user)
   cookies.permanent.signed[:remember_token] = [user.id, user.salt]
   self.current_user = user
end

def sign_out
   cookies.delete(:remember_token)
   self.current_user = nil
end

 def current_user=(user)
       @current_user = user
 end

 def current_user
       @current_user ||= user_from_remember_token
 end

 def signed_in?
       !current_user.nil?
 end

 def create
         user = User.authenticate(params[:session][:email],
                                                          params[:session][:password])

         if user.nil?
                 flash.now[:error] = "Invalid email/password combination."
                 @title = "Sign In"
                 render 'new'
         else
             sign_in user
             flash.now[:error] = "Welcome, #{user.name}"
             render 'AdCon'
         end
 end

 def destroy
         sign_out
         redirect_to root_path
 end        

       private

               def user_from_remember_token
                       User.authenticate_with_salt(*remember_token)
               end

               def remember_token
                       cookies.signed[:remember_token] || [nil,nil]
               end  
end 
```

****编辑：* ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ****

我正在使用以下教程： [http](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users) ://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users @ Listing 9.12

清单 9.12。在过滤器之前添加一个 signed_in_user。

应用程序/控制器/users_controller.rb

```
class UsersController < ApplicationController
    before_filter :signed_in_user, only: [:edit, :update]
    .
    .
    .
    private

        def signed_in_user
             redirect_to signin_path, notice: "Please sign in." unless signed_in?
        end
end 
```

当我在 SessionsController 中包含助手时，我收到了消息

未定义的方法`signed_in?' for # 提取的源代码（在第 9 行附近）：

```
<div>
 <% if controller.signed_in?  %> <----LINE 9
 <%= link_to "Sign Out", signout_path, :method => :delete %>
 <% else %>
 <%= link_to "Sign IN" , signin_path %> 
```

我像这样包含了 Helper：class SessionsController < ApplicationController include SessionsHelper

我无法让它工作，所以我将辅助方法复制到 SessionsController 并且错误消失了。现在我遇到了 9.12 where signed_in 的问题？是一种未知的方法。这是有道理的，因为 signed_in? 通过助手在 SessionsController 中。UserController 可以访问该功能。我是rails新手，很困惑。

感谢所有的反馈

编辑：***** ** *** ** *** ** *** ** *** ** *** ****

这是应用程序控制器

```
class ApplicationController < ActionController::Base

  protect_from_forgery
  include ActionView::Helpers::SessionsHelper

  private

  def current_user
@current_user ||= User.find(session[:user_id]) if session[:user_id]
  end

  helper_method :current_user
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:53:21.537

你在错误的地方声明了你的共享方法。`signed_in?`应该在你的内部定义`ApplicationController`，它是你所有其他控制器的共享基类。本质上，你没有办法去做你想做的事情。`UsersController`无法访问您的`SessionController`方法，也不应该能够访问。这不是控制器的工作方式。

`current_user`, `current_user=`, 并且`signed_in?`都属于你的`ApplicationController`，而不是你的`SessionsController`，因为它们是共享的方法，旨在供*所有*从 . 继承的控制器使用`ApplicationController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:45:05.970

我发现，我打开了另一个项目的 sessionhelper 文件，我正在编辑那个文件，而不是与我当前项目关联的文件。谢谢您的帮助。

# android - android模拟器支持OpenGL ES2.0吗？

> ID：11162221
> 
> 赞同：0
> 
> 时间：2012-06-22T18:39:53.947
> 
> 标签：android, android-emulator

Android 模拟器是否支持 OpenGL ES2.0？我运行代码，但 Eclipse 给了我以下错误：

> 不幸的是 adb 已经停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:06:34.570

是的，Android Emulator 支持 OpenGL ES 2.0，如此[链接](http://android-developers.blogspot.com/2012/04/faster-emulator-with-better-hardware.html)中所述。如果您想利用此功能，则必须在创建新 AVD 时从硬件菜单中选择“GPU 仿真”选项。

# web-services - 从 Scala 访问 REST Web 客户端有哪些好的库？

> ID：11162222
> 
> 赞同：2
> 
> 时间：2012-06-22T18:39:54.910
> 
> 标签：web-services, scala, rest

我想做一个使用[Rdio API](http://developer.rdio.com/)的简单客户端。就图书馆而言，我有哪些选择？我知道 Play 中的 Dispatch 和 WS 库。

还有其他人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:14:50.247

老实说，我四处搜索并尝试了一些，但发现我更喜欢直接使用 Apache HttpClient 和 Jackson (JSON) 以及 jackson-module-scala 以及一些小的帮助类。

Apache HttpComponents：[http ://hc.apache.org/](http://hc.apache.org/)

jackson-module-scala：[https ://github.com/FasterXML/jackson-module-scala](https://github.com/FasterXML/jackson-module-scala)

这可能不是您要寻找的答案，但我发现我正在集成的不同 REST API 有各种怪癖和差异，这使得很难找到除此之外的“完美”抽象库，而 Scala 使它非常容易编写你自己有用的特征来支持这一点。例如：

```
val (statusCode, json) = getJsonFrom(url, ("Authorization" -> auth))
assert(statusCode == OK)
... 
```

如果您没有得到更好的答案，如果您有兴趣，我可以在 GitHub 上放置一些示例代码。

# svn - Subversion：从 .svn 目录中的文件中获取文件的历史记录？

> ID：11162223
> 
> 赞同：0
> 
> 时间：2012-06-22T18:40:00.593
> 
> 标签：svn, history

有没有办法直接使用 .svn 目录中的数据访问文件的历史记录？我从很久以前被关闭的服务器复制的文件，因此没有运行 SVN 服务器。我所拥有的只是当前文件和 .svn 目录中的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:48:59.400

不，所有历史记录都保存在服务器上。.svn 仅包含有关您的工作副本的信息。如果您的工作副本是 SVN 1.7 格式，您可以使用 SQLite 手动检查您拥有的信息（.svn/wc.db 是 SQLite 数据库）。例如，您可以使用这个数据库浏览器：[http ://sqljet.com/browser/browser.jnlp](http://sqljet.com/browser/browser.jnlp)

# java - 从数组生成唯一组合，但每个组合中都有每个元素。（爪哇）

> ID：11162226
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:40:13.720
> 
> 标签：java, combinations

我正在尝试从数组中生成所有可能的唯一组合，但它不像生成所有组合那样简单......例如。我有一个数组 {a,b,c,d,e,f} ...我的结果应该是这样的...

1.  ab、cd、ef
2.  美国广播公司，定义
3.  交流、BD、EF
4.  美国广播公司，编辑
5.  ....ETC

......基本上在每个结果集中都应该包含数组的所有元素......而且 'ab' 与 'ba' 相同， 'abcd' 与 'dcba' 或 'cbda' 相同。 ...位置无关紧要....并且不允许重复...'aaa'或'aa'无效...如果有人可以为这个问题提供解决方案，将不胜感激...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:19:37.023

我建议您构建所有可能的唯一集合大小集。然后以所有可能的顺序插入所有可能的值。例如，对于 5 个可能的值，您有设置的大小：

```
1 1 1 1 1
1 1 1 2
1 2 2
1 1 3
1 4
2 3
5 
```

现在，将实际值放入集合中。对于第一组集合大小，我们得到：

```
a, b, c, d, e 
```

这不是很有趣，因为所有集合的大小都相同，所以跳到第三组集合大小。在这里，我们填充集合然后移动它们，给我们：

```
a, bc, de
b, cd, ea
c, de, ab
d, ea, bc
e, ab, cd 
```

这不是一个完整的解决方案，但我将问题一分为二，我认为您可以从那里着手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:57:59.633

```
 String [] new_array=new String[N];
 array.length=length.of("befdac");
 for(int i=0;i < array.length;i++) //this is first digit

{

for(int j=0;j < array.length;j++) //this is second digit
{
if(i==j)continue;
       ................ same with other digits

        {
         if((i==j)||(i==k)) continue;
        // start counting in this most inner block
        new_array[i][j][k][l]...[last_digit]=byte(i+65)+byte(j+65)+byte(k+65)+.....+byte(last_digit+65);
        //65=a, 66=b,......

         }
 }
} 
```

new_array[][][][]...[] 将是我没有尝试过的代码。最好的事情你自己做。这没有优化。刚做第一个答案以获得一些分数

# c++ - 如何测量 Boost 图使用的内存？

> ID：11162227
> 
> 赞同：3
> 
> 时间：2012-06-22T18:40:23.703
> 
> 标签：c++, memory, boost, boost-graph

我有一个定义如下的图表（使用boost）：

```
struct NodeData{ /*...*/ };
struct EdgeData{ /*...*/ };
typedef adjacency_list<setS, setS, undirectedS, NodeData, EdgeData> MyGraph;
MyGraph G; 
```

该图是迭代更新的（通过添加/删除一些边/顶点）。在每次迭代中，我想评估这个图 G 占用的内存空间。我该怎么做？如果我计算 V =“NodeData 的大小”和 E =“EdgeData 的大小”并且在每次迭代中，图形使用的内存将与以下成正比：nbr_vertices * V + nbr_edges * E 是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:25:05.777

您可以尝试使用堆状态报告功能：http: [//msdn.microsoft.com/en-us/library/wc28wkas%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/wc28wkas%28v=vs.80%29.aspx)

# ant - 没有 ant java 任务的可运行 jar 文件 - 这怎么可能？

> ID：11162229
> 
> 赞同：0
> 
> 时间：2012-06-22T18:40:29.927
> 
> 标签：ant, jar, executable, heap-dump

我从以前的开发人员那里继承了一些代码，这些代码使用 Ant 构建到一个可执行的 jar 文件中，该文件通过双击运行。应用程序运行，但在某些情况下崩溃并出现 OutOfMemoryError。为了对此进行调查，我想将 -XX:+HeapDumpOnOutOfMemory jvm arg 添加到 Ant 构建文件中，据我了解，该`<jvmarg value="-XX:+HeapDumpOnOutOfMemory" />`元素需要执行一项`<java ...>`任务。但是，`<java ...>`在此代码库中的此或任何其他 Ant 构建文件中找不到任务。

这怎么可能？jar文件如何在没有`<java ...>`任务的情况下可执行？

我主要要求找出实际上使我的 jar 文件可执行的原因，以便我可以找出将该`<jvmarg />`元素放在哪里来调试 OOME。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:46:57.377

`<java>`任务不会创建可执行的 jar 文件。它执行一个Java程序。

我认为通过双击启动可执行 jar 文件时无法指定 VM 参数。如果要传递 VM 参数，请打开命令提示符并以这种方式执行 jar：

```
java -XX:+HeapDumpOnOutOfMemory -jar nameOfTheJar.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:47:10.430

您的 jar 是可执行的，因为它在 META-INF/MANIFEST.MF 文件中定义了 Main-Class。双击它运行对 Ant 没有任何作用。Ant只是用来打包jar。

为了添加参数并仍然通过双击启动，您可以创建一个快捷方式来运行 JB Nizet 的答案中的命令

# regex - 使用正则表达式时如何忽略空标签？

> ID：11162230
> 
> 赞同：-2
> 
> 时间：2012-06-22T18:40:33.140
> 
> 标签：regex

为了让它忽略空标签，我应该在我的正则表达式中包含什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:43:57.227

您需要指定引号之间至少需要 1 个字符：

所以是这样的：

```
(title|alt)="(.+)" 
```

# javascript - 如何访问使用 document.getElementsByClassName() 的 childNode？

> ID：11162233
> 
> 赞同：2
> 
> 时间：2012-06-22T18:41:16.190
> 
> 标签：javascript

```
<html>
<head></head>
<body>
<span class="mtb-price">
<label Class="mtb-ofr"><b class="lb1"></b>AAAAA</label></span>
<script>
var sku = document.getElementsByClassName("mtb-ofr").childNodes[1].nodeValue;
alert(sku);
</script>
</body>
</html> 
```

如何使用 document.getElementsByClassName() 访问具有类名“mtb-ofr”的 childNode？什么应该是 document.getElementsByClassName() 的替代方法来获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:47:26.290

`getElementsByClassName`返回一个数组。您需要首先从 NodeList 中获取元素。

```
document.getElementsByClassName("mtb-ofr")[0].childNodes[1].nodeValue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:50:37.983

更改标签的文本：

```
document.getElementsByClassName("mtb-ofr")[0].childNodes[1].nodeValue = 'something'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:45:11.090

使用 jQuery ！

```
$('label.mtb-ofr').children() 
```

你完成了 ！

您可以通过将参数传递给 children() 来进行更多过滤。

[http://api.jquery.com/children/](http://api.jquery.com/children/)

# java - 删除自定义按钮上的边框

> ID：11162236
> 
> 赞同：1
> 
> 时间：2012-06-22T18:41:31.300
> 
> 标签：java, swing, border, jbutton

我编写了这个尝试创建自定义 JButton 的小程序，不幸的是我无法移除边框。我以为 button.setBorder(null); 会删除它，但这是无效的。有谁知道如何从按钮上删除边框，所以它只是图标？非常感谢任何帮助。

我的代码如下：

```
package custombuttons;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class CustomButtons {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        CustomButtons h = new CustomButtons();
        h.setUp();
    }

    JFrame frame;
    JPanel panel;
    JButton button;
    BufferedImage b;
    String toolTip = "Configure";

    public void setUp() {
        frame = new JFrame("Custom Buttons");
        try {
            b = ImageIO.read(CustomButtons.class.getResource("/images/config.png"));
        } catch (IOException ex) {
            Logger.getLogger(CustomButtons.class.getName()).log(Level.SEVERE, null, ex);
            ex.printStackTrace();
        }

        Image b1 = (Image) b;
        ImageIcon iconRollover = new ImageIcon(b1);
        int w = iconRollover.getIconWidth();
        int h = iconRollover.getIconHeight();
        GraphicsConfiguration gc = frame.getGraphicsConfiguration();
        Image image = gc.createCompatibleImage(w, h, Transparency.TRANSLUCENT);
        Graphics2D g = (Graphics2D) image.getGraphics();
        g.drawImage(iconRollover.getImage(), 0, 0, null);
        g.dispose();

        ImageIcon iconDefault = new ImageIcon(b1);
        image = gc.createCompatibleImage(w, h, Transparency.TRANSLUCENT);
        g = (Graphics2D) image.getGraphics();
        g.drawImage(iconRollover.getImage(), 2, 2, null);
        g.dispose();
        ImageIcon iconPressed = new ImageIcon(b1);

        JButton button = new JButton();
        button.setIgnoreRepaint(true);
        button.setFocusable(false);
        button.setToolTipText(toolTip);
        button.setBorder(null);
        button.setContentAreaFilled(false);
        button.setIcon(iconDefault);
        button.setRolloverIcon(iconRollover);
        button.setPressedIcon(iconPressed);

        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        panel = new JPanel();
        panel.setOpaque(false);
        panel.add(button);
        frame.getContentPane().add(panel);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:48:03.823

在这里查看`button.setBorderPainted(false)` [更多关于 JButton 的信息](https://stackoverflow.com/a/7877817/714968)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:00:57.047

实际上，我在我的 Netbeans IDE 上测试了您的代码，并且没有您想要的边框，仅使用`button.setBorder(null);`or`button.setBorderPainted(false);`或，`both of them`但我认为您应该确保您的原始图像本身没有任何边框

# regex - 正则表达式匹配 URL 并排除其他

> ID：11162237
> 
> 赞同：0
> 
> 时间：2012-06-22T18:41:32.860
> 
> 标签：regex, redirect

我试图编写一个正则表达式来匹配任何东西`(.*)/feed/`，除了`(.*)/author/feed/`

目前，我可以`(.*)/feed/(.*)`很好地识别任何`/feed/`要重定向的字符串。但是，我不想排除那些有`/author/(.*)/feed/`

例如 - 匹配`http://www.site.com/ANYTHING/feed/`但排除`site.com/author/ANYTHING/feed/`

我应该澄清一下，我对正则表达式并不是非常熟悉，但这实际上是在用于 wordpress 的重定向插件中使用的，它声明“完全正则表达式支持”。

任何帮助将不胜感激。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:59:14.827

根据语言的不同，您可以使用否定的后视断言：

```
(.*)(?<!/author)/feed 
```

断言 ,`(?<!/author)`确保`/author`text 后面不匹配`/feed`，但不将其视为匹配。

# html - 用大量图像填充网页，滚动缓慢。

> ID：11162243
> 
> 赞同：0
> 
> 时间：2012-06-22T18:42:06.363
> 
> 标签：html, image, webpage-rendering

在我的页面上，我填充了很多图像，它们不是超高分辨率，但我聚合了图像，所以我没有以较小的尺寸存储。当我开始在页面上放很多东西时，它会变得迟缓。我能做些什么来解决这个问题吗？像某种即时图像压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:44:42.627

您是否研究过延迟加载图像的技术？[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

看起来问题是因为您使用全分辨率图片显示缩略图而发生的。这是一场表演的噩梦！您可能会受益于阅读：

[http://ask-leo.com/why_do_some_website_pictures_display_so_slowly.html](http://ask-leo.com/why_do_some_website_pictures_display_so_slowly.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:50:36.767

您确实需要对这些图像进行大拇指以使其更快。同时下载所有高分辨率图像是没有意义的。

# ios - 安装应用程序时是否会调用 IOS 通知或回调？

> ID：11162247
> 
> 赞同：2
> 
> 时间：2012-06-22T18:42:20.550
> 
> 标签：ios

我想在安装时进行一些设置，但不确定在安装我的应用程序时是否有事件 IOS 发送给我。

我想要做的是下载一些种子数据，这样当用户第一次启动我的应用程序时它就不会是空的。我猜可能里面有东西，`UIApplication`但我找不到任何东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T18:46:26.353

*如果您想在* **第一次启动**时进行某种设置，那么只需使用`NSUserDefaults`!

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  
    if (![defaults objectForKey:@"firstLaunch"]){
        [self performSelector:@selector(yourSetupView) withObject:nil afterDelay:0.5];
        [defaults setObject:[NSDate date] forKey:@"firstLaunch"];

    }          

    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

在这种情况下，当用户第一次运行应用程序时，会`yourSetupView`在非常小的延迟后出现。

# php - 正则表达式中的替代字符串

> ID：11162248
> 
> 赞同：0
> 
> 时间：2012-06-22T18:42:25.423
> 
> 标签：php, regex, pattern-matching

可悲的是，我不得不问这个问题，但在整个早上都在思考这个问题之后，我放弃了。在线搜索、手册页、文档，似乎都没有给我一个关于我尝试做的事情的决定性答案。

寻找 PHP 函数[preg_match](http://php.net/manual/en/function.preg-match.php)的正则表达式以匹配字符串与模式。现在这种模式让我头疼。

该模式应表达以下内容：字符串以“_MG_”或“IMG_”或“DSC_”开头，后跟四个数字，然后是可选的“-N”，其中 N 是另一个数字。例如，“IMG_0123”或“DSC_9876-3”是有效的。其他一切都应该被拒绝。

我想出了各种模式，但它们似乎都不起作用。例如，我试过

```
(_MG_|IMG_|DSC_)[0-9]{4}(-[0-9])? 
```

这在不同的变体中使用 ( ) 和撇号围绕各种子表达式并使用 ? vs {0,1} 等等。（我尝试使用 grep，但仍然没有匹配项。）是的，我知道我需要为 PHP 添加“/.../”，但为了便于阅读，我在这里省略了它。

我什至可以用一个表达式来表达这一点，还是必须多次调用匹配函数？如果需要多个匹配项，我最好为自己匹配的这个特定字符串编写一个小型解析器。

谢谢！

编辑：这是我正在使用的代码

```
// Iterate over all images in this gallery folder.
if ($h = opendir($dir)) {
  while (($f = readdir($h)) !== false) {

    // Skip images whose name doesn't match the requirement.
    if (0 == preg_match("/(_MG_|IMG_|DSC_)[0-9]{4}(-[0-9]){0,1}/", $f)) {
      continue;
    }

    ...
  }
} 
```

这也允许像“_MG_7020-1-2.jpg”或“_MG_7444-5-6.2.jpg”或“IMG_6543_2_4_tonemapped.jpg”这样的图像名称，但这不是我想要允许的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:59:33.087

我也运行了这个：

```
<?php
$matches = array();
preg_match('/(_MG_|IMG_|DSC_)[0-9]{4}(-[0-9])?/','IMG_0123-3',$matches );

var_dump($matches); 
```

输出：

```
array(3) {
  [0]=>
  string(10) "IMG_0123-3"
  [1]=>
  string(4) "IMG_"
  [2]=>
  string(2) "-3"
} 
```

似乎没问题，除非我遗漏了一些东西，或者除非你指的是 preg_match 如果不是所有 matchers () 匹配，则返回 false。

请注意 php 文档中 preg_match 的返回类型：

> preg_match() 返回模式匹配的次数。这将是 0 次（不匹配）或 1 次，因为 preg_match() 将在第一次匹配后停止搜索。相反 preg_match_all() 将继续直到它到达主题的末尾。如果发生错误，preg_match() 返回 FALSE。

因此，您实际上可能希望真正使用 preg_match_all()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:49:25.703

```
<?php

    $array = array('IMG_0123', 'DSC_9876-3', '_MG_1234', 'DSC_fail');

    foreach($array as $arr) {
        if(preg_match("/_MG_|IMG_|DSC_[0-9]{4}[-0-9]*/", $arr)) {
            echo $arr . ' => TRUE <br />';
        } else {
            echo $arr . ' => FALSE <br />';
        }
    }
?> 
```

以上对我来说按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:11:29.897

[根据这个 refiddle](http://refiddle.com/2ae)，你似乎已经解决得很好。您可以使用他们的“单元”测试功能附加“应该”和“不应该”匹配场景。当然，那个 refiddle 正在使用 javascript 的正则表达式，但我发现它们实际上是相同的，直到你进入反向引用和环视。

# iphone - 将 NSMutableArray 存储在 NSArray 中？

> ID：11162257
> 
> 赞同：0
> 
> 时间：2012-06-22T18:43:22.993
> 
> 标签：iphone, objective-c, ios, cocoa-touch, design-patterns

我有一个属性`NSArray`，`toolbarButtons`在一个实例中（当它`UIViewController`是模态的）它需要是一个属性，当它是非模态`NSMutableArray`时`UIViewController`，它只需要是一个`NSArray`。

我已经像这样初始化了属性：

```
@property (nonatomic, copy) NSArray *toolbarButtons; 
```

我正在初始化工具栏按钮，如下所示：

```
- (void) setToolbarButtons 
{
        UIBarButtonItem *exitButton = [[UIBarButtonItem alloc] initWithTitle:@"Exit" style:UIBarButtonItemStyleBordered target:self action:@selector(exitButtonPushed)];

        toolbarButtonsTemp = (NSMutableArray *)[[NSMutableArray alloc] init];
        [(NSMutableArray*)toolbarButtonsTemp addObject:exitButton];
        self.toolbarButtons = toolbarButtonsTemp;

        [exitButton release]; 
} 
```

然后稍后我在这样的子类中覆盖上述方法：

```
- (void) setToolbarButtons 
{
    [super setToolbarButtons];

    UIBarButtonItem *leftFlexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *toolButton = [[UIBarButtonItem alloc] initWithTitle:@"Tools" style:UIBarButtonItemStyleBordered target:self action:@selector(toolButtonPushed)];

    [(NSMutableArray*)self.toolbarButtons addObject:leftFlexibleSpace];
    [(NSMutableArray*)self.toolbarButtons addObject:toolButton];

    [toolButton release];
    [leftFlexibleSpace release];
} 
```

我收到以下错误：

```
[__NSArrayI addObject:]: unrecognized selector sent to instance 
```

我知道有很多解决方法，但从设计的角度来看，我只是想知道我正在做的事情是否可行以及如何纠正我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:56:21.910

```
@property ( nonatomic, copy ) NSArray* array 
```

方法：

```
- (void) setArray: (NSArray*) array
{
    _array = [array copy];
} 
```

[array copy] 总是返回一个不可变的 NSArray，即使 array 是一个 NSMutableArray。

```
@property ( nonatomic, copy ) NSMutableArray* array 
```

处理方式有点不同：

```
- (void) setArray: (NSMutableArray*) array
{
    _array = [array mutableCopy];
} 
```

在这种情况下，你可以做

```
self.array = (NSMutableArray*) [NSArray new]; 
```

并且数组将被分配一个 NSMutableArray，因为 mutableCopy 总是返回一个 NSMutableArray。

当然强烈反对后者。它现在有效。不能保证它会永远有效。

除了 NSMutableArray 之外，您的另一个选择是使用强大的属性并自己处理副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:49:19.637

你不能这样做！

当你：

```
 [(NSMutableArray*)self.toolbarButtons addObject:leftFlexibleSpace];
    [(NSMutableArray*)self.toolbarButtons addObject:toolButton]; 
```

您只是在转换属性，这意味着您在运行时承诺该属性是 NSMutableArray ......但您在撒谎！

我建议你相反：只需将其声明为 NSMutableArray（它是 NSArray 的子类，因此您可以在需要时将其用作 NSArray），并在需要时使用 NSMutableArray 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:46:08.797

在这种情况下，铸造将不起作用。您需要将您的属性更改为 NSMutableArray：

```
@property (nonatomic, copy) NSMutableArray *toolbarButtons; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:48:00.073

你应该只在你的属性中使用 NSMutableArray ，但你也可以总是做这样的事情......

```
 NSMutableArray *mutArray = [[NSMutableArray alloc] init];
    [mutaArray addObject:leftFlexibleSpace];
    [mutaArray addObject:toolButton];

    self.toolbarButtons = [NSArray arrayWithArray:mutArray]; 
```

# php - 试图遍历 php 中的对象崩溃

> ID：11162258
> 
> 赞同：1
> 
> 时间：2012-06-22T18:43:24.297
> 
> 标签：php, oop, object, loops, foreach

嗨，我有一个正在调用的对象，其中一些对象包含其他对象，我正在使用 foreach 遍历每个属性以将其放入一个新数组中，并在 foreach 中使用 if 语句来查看该属性是否包含另一个对象，如果它确实使用另一个 foreach 来获取对象属性中的对象属性。

问题是，一旦我进入 2 个级别，它就会崩溃，我知道通过执行返回 true 的 is_object 测试里面有一个对象，但是当我尝试遍历它的属性时，它只是没有从中获取任何信息。

```
private static function prepare_page($output_object) {
    foreach ($output_object as $object) {

    if (is_a($object, "subjects")) {
        $return_object["{{::SUBJECT::}}"] = $object->name;
    }

    if (is_a($object, "posts")) {
        $return_object["{{::POST::}}"] = $object->name;

        foreach ($object as $atribute => $value) {

            if (is_object($value) || is_array($value)) {

                foreach ($object as $property => $val) {

                    if (is_object($val)) {

                        echo "It's an object inside an object";
                            dump($val);
                            //works till here lets me know its an object and shows the $val with its contents (objects)

                            foreach ($val as $ob => $at) {
                                //breaks down here if i dump the $ob or $at it doesn't do anything      
                                if (!is_object($at)) {
                                    $return_object["{{::>>".strtoupper($ob)."::}}"] = $at;
                                } else {
                                    //  repeat process
                                }
                            }
                    } else {
                        $return_object["{{::==".strtoupper($property)."::}}"] = $val;
                    }

                }
            } else {
                if (!is_object($value) && !is_array($value)) {
                    $return_object["{{::".strtoupper($atribute)."::}}"] = $value;
                } 
            }
        }
    }
}
return $return_object;
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:27:33.637

好吧，我可能是错的，但我相信这里的问题是你如何处理对象。

你看，如果对象是对象而不是数组，is_object() 返回 true。foreach 循环适用于数组，但不适用于对象。

为了让它工作，您可能必须首先将您的对象转换为数组。

你为什么不尝试这样做：

前

```
foreach ($val as $ob => $at) { 
```

调用函数将其转换为数组，如下所示：

```
$val = object_to_array($val);
foreach ($val as $ob => $at) { 
```

然后在代码中的某处声明该函数，在所有循环结构之外。函数如上：

```
function object_to_array($object) {
    $array = array();
    if (is_object($object)) {
        $array = get_object_vars($object);
    }
    return $array;
} 
```

希望我能提供帮助！=)

# windows - 在 Windows 命令行上使用 7-zip 解压缩 *.tar.bz2

> ID：11162260
> 
> 赞同：2
> 
> 时间：2012-06-22T18:43:31.510
> 
> 标签：windows, powershell, windows-7, 7zip, cppunit

我在 powershell 脚本中有一个函数，应该解压我的 CppUnit.tar.bz2 文件。我已经安装了 7-zip，在我的功能中我有以下内容：

```
Function untar ($targetFile) {        
        $z ="7z.exe"

        $defaultDestinationFolder = 'C:\Program Files\'
        $destinationFolder = (Get-Item $defaultDesitantionFolder).fullname

        $tarbz2Source = $targetFile
        & "$z" x -y $tarbz2Source

        $tarSource = (get-item $targetFile).basename
        & "$z" x -y $tarSource -o $destinationFolder

        Remove-Item $tarSource
} 
```

运行它会提取我想要的所有文件，但所有文件都以“，v”作为结尾：

```
...
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\estring.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestSuite.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\Test.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestCase.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TextTestResult.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\Makefile.am,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestSuite.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\Exception.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\cppunit.dsw,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestFailure.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestCaller.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestResult.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TextTestResult.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestRegistry.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestFailure.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\Exception.h,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestRegistry.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\cppunit.dsp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestResult.cpp,v
Extracting  cppunit-cvs-repo-archive\cppunit\cppunit\Attic\TestCase.cpp,v

Everything is Ok

Folders: 149
Files: 1128
Size:       20671974
Compressed: 21626880 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:01:22.313

`,v`后缀表示这些不是文件本身，而是由 CVS 维护的版本历史文件——每个文件`,v`不仅包含文件的最新版本，还包含用于重建文件任何先前版本的增量。`Attic`它们都在一个子目录中的事实表明它们都在某个时候被删除`cvs remove`了。这些以及基目录的事实表明`cppunit-cvs-repo-archive`您需要将解压缩的存档视为 CVS 存储库，并使用适当的工具检查您要使用的文件，而不仅仅是“修复”看起来像错误名称的文件。 .

# android - Eclipse/adb/DDMS：Samsung S2 4.0.3 无法被 Eclipse 识别

> ID：11162261
> 
> 赞同：3
> 
> 时间：2012-06-22T18:43:34.937
> 
> 标签：android, eclipse, debugging, adb, ddms

我使用两台设备来开发我的 Android 应用程序：

*   三星平板电脑 Galaxy tab 10.1 (Android 3.1)
*   三星 S2 (Android 4.0.3)

我在 Mac OSX Lion 上开发。

我的问题是 Eclipse 无法识别我的 Samusung S2（我的平板电脑一切正常！！）。更准确地说，我的 S2 在 DDMS 或“Android 设备选择器”（当您在 Eclipse 中启动应用程序时出现的窗口，您可以在其中选择物理设备或仿真器）中每 1 分钟出现 1 秒，然后消失！！！这真让我抓狂。

我绝对尝试了我在论坛上找到的所有内容：

*   通过 SDK 管理器更新所有模块
*   通过帮助更新 Eclipse => 检查更新
*   尝试了 3 种不同的 USB 电缆...
*   尝试通过 DDMS 或在命令行中重置 adb（adb kill-server 然后 adb start-server）
*   我检查了我的 S2 上是否设置了 USB 调试

垃圾三星应用程序“Kies”会引发一些问题吗？（我的平板电脑不是这种情况）其他想法？

有谁能够帮我 ？？？！！！

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:19:27.063

最后，我的三星 S2 上的微型 USB 连接出现物理问题......我将它退回给三星，他们修复了它！似乎 S2 上的微型 USB 连接非常脆弱……尤其是当您经常连接/断开设备时！希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:17:52.330

使用 Kies 强制重新安装驱动程序。

在凯斯（版本 2.3.2.12054_20）中：

*   工具 > 连接错误疑难解答。
*   按照向导进行操作（有一个“重新安装设备驱动程序”阶段）。

我没有特别的信心这会解决你的问题。我提供它作为尝试的东西。

# php - Zend框架安装错误

> ID：11162262
> 
> 赞同：0
> 
> 时间：2012-06-22T18:43:47.953
> 
> 标签：php, zend-framework, phpunit

我在 Ubuntu 12.04 中安装 Zend 框架。当我尝试使用命令创建一个新项目时，`zf create project zf_test`它给出了这个错误：

> 测试注意：在您的 include_path 中找不到 PHPUnit，因此不会创建测试操作。

我需要知道那条消息是什么以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:09:18.390

可能您需要在系统中安装 PHPUnit。请遵循本教程（适用于 ubuntu 11.04，但也适用于更高版本）[http://www.giocc.com/installing-phpunit-on-ubuntu-11-04-natty-narwhal.html](http://www.giocc.com/installing-phpunit-on-ubuntu-11-04-natty-narwhal.html)

# git - 如何让 Git 将文件视为二进制文件？

> ID：11162267
> 
> 赞同：131
> 
> 时间：2012-06-22T18:44:08.087
> 
> 标签：git

中型项目存在问题，其中 Visual Studio 项目文件由于 git 将它们视为文本并合并而不断出现问题。我只想将文件设置为二进制文件，这样 git 就不会自动合并这些文件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-06-22T18:50:02.240

是的，使用[属性](http://git-scm.com/docs/gitattributes)。在您的`.gitattributes`文件中放入类似的内容（如果它不存在则创建它）：

```
*.sln binary
*.suo binary
*.vcxproj binary 
```

这里[`binary`其实是一个预定义的宏](http://git-scm.com/docs/gitattributes#_defining_macro_attributes)，相当于`-diff -merge -text`.

如果您希望仍然能够看到差异，您可以使用：

```
*.sln -merge -text 
```

这样，`*.sln`文件不会被合并，不会被 eol 标准化，但同时可以区分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-06T11:44:54.157

您应该在文件中定义二进制文件属性`.gitattributes`（如果不存在则创建它），将这些行放入其中，以防止将其作为文本差异文件处理：

```
# Define binary file attributes.
# - Do not treat them as text.
# - Include binary diff in patches instead of "binary files differ."
*.sln     -text diff
*.suo     -text diff
*.vcxproj -text diff
*.gif     -text diff
*.gz      -text diff
*.ico     -text diff
*.jpeg    -text diff 
```

# clips - 测试空变量

> ID：11162269
> 
> 赞同：0
> 
> 时间：2012-06-22T18:44:13.123
> 
> 标签：clips

我有两个堆栈，一个目标和一个正在更改的堆栈。当我完成目标堆栈的每一步时，我会从中删除一个字段。我知道当堆栈现在为空时，我已经完成了一个特定的目标。我正在尝试编写一个规则来测试变量何时为空，但我不断收到错误消息：[EXPRNPSR1] A function name must be an symbol。这是我的规则。

```
(defrule done
   (declare (salience 30))
   ?stack <- (curr-stack $?thusfar)
   ?goal <- (goal-stack ?H)
   (test (= ?H ()))
=>
   (retract ?stack ?goal)) 
```

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:53:37.060

`$?foo`是一个多字段变量（其中包含 0 个或多个内容）。 `?foo`是单个字段变量（仅 1 个）。

因此，`?foo`就您对堆栈的指示而言，测试“空虚”对您没有多大帮助。

我的多字段变量中是否至少包含一件事？

```
(test (> (length $?foo) 0)) 
```

我的多字段变量是空的吗？

```
(test (= (length $?foo) 0)) 
```

# networking - 如何知道远程通讯端的MAC地址？

> ID：11162270
> 
> 赞同：2
> 
> 时间：2012-06-22T18:44:22.463
> 
> 标签：networking, network-programming, linux-kernel, kernel-module

首先，我需要在内核空间中知道这一点，所以请考虑到这一点。

不，我不能使用其他设备的 IP 地址和 ARP 它（这里解释原因太长了）但我根本不能使用 ARP，ARP 不适用于我正在处理的项目。

是否有一个功能/实用程序可以用来知道连接到我已经拥有的给定 net_device 的连接中另一端的 MAC 地址，而不管 IP 是什么？

提前致谢，如果我的问题不清楚或没有意义，请发表评论，我会确保编辑问题以解释/填补空白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:02:20.340

“我需要和邻居说话”这类问题的标准协议是[LLDP](http://en.wikipedia.org/wiki/Link_Layer_Discovery_Protocol)。目前，这通常通过 Linux 系统上的 OpenLLDP（用户空间）实现。但是，似乎有一些[内核空间补丁](http://lwn.net/Articles/503421/)可能对您有所帮助：

假设您有可能在另一端启用 LLDP，您应该能够使用它来发现该设备。

# gcc - Libxml2：对 xmlTextReaderConstName 的未定义引用

> ID：11162271
> 
> 赞同：4
> 
> 时间：2012-06-22T18:44:24.350
> 
> 标签：gcc, linker, libxml2

我像往常一样安装了最新的[libxml2-2.8.0](ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz)：`$ ./configure`, `$ make`, `$ make install`.

给出这个`$ xml2-config --cflags --libs`输出：

```
-I/usr/local/include/libxml2
-L/usr/local/lib -lxml2 -lm 
```

但试图编译任何例子......

```
$ gcc `xml2-config --cflags --libs` xmltest.c 
```

链接器说：

```
/tmp/cc8ezrPl.o: In function `processNode':
xmltest.c:(.text+0x19): undefined reference to `xmlTextReaderConstName'
xmltest.c:(.text+0x38): undefined reference to `xmlTextReaderConstValue'

...etc. 
```

我用谷歌搜索的任何东西都可以通过`xml2-config --cflags --libs`标志或升级到最新版本的 libxml2 或其他方式来解决。不幸的是，两者都不适合我。

识别问题的步骤是什么？

使用 Ubuntu 12.04 64 位。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T03:10:59.403

仅应在源文件之后指定库，以便链接器可以解析源文件中未定义的引用。尝试用这个编译示例

```
gcc -I/usr/local/include/libxml2 -L/usr/local/lib xmltest.c -lxml2 -lm 
```

# c++ - 是否可以从 cpp 中定义的静态方法调用私有构造函数？

> ID：11162273
> 
> 赞同：5
> 
> 时间：2012-06-22T18:44:24.703
> 
> 标签：c++

一个 C++ n00b 问题。是否可以从 cpp 中定义的静态方法调用私有构造函数？如果可能的话，我想将方法​​保留在头文件之外——我认为应该有办法做到这一点。尝试此操作时出现错误：

“无法访问在 SomeClass 类中声明的私有成员”

```
/////////////////
// SomeClass.h //
/////////////////

class SomeClass {
    public:
        static SomeClass SomeMethod();
    private:
        SomeClass(int i);
}

///////////////////
// SomeClass.cpp //
///////////////////

static SomeClass OSImplementation() {
    return SomeClass(0);
};

// calls implementation
SomeClass SomeClass::SomeMethod() {
    return OSImplementation();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:52:58.653

你可以交`OSImplementation`朋友的方法。

或者您可以`OSImplementation`在类中创建一个静态方法（但必须在标题中声明）。

或者，可能最常见的方法是拥有一个内部实现类，如下所示：

```
class SomeClass {
public:
    //...
private:
    struct Impl;
    Impl* intern;
}; 
```

在您的 cpp 文件中，您声明`struct SomeClass::Impl`.

在您的构造函数中，创建`SomeClass::Impl`实例。在析构函数中删除它。并实现复制构造函数和赋值运算符！

这称为 PIMPL（指向实现的指针）习语（[维基百科](http://en.wikipedia.org/wiki/Opaque_pointer)，[c2.com](http://c2.com/cgi/wiki?PimplIdiom)）。它在像 Qt 这样的大型项目中被大量使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:01:01.010

是的，通过结交`OSImplementation()`SomeClass 的朋友，这是可能的。下一个示例使用 g++ 4.6.1 编译没有警告和错误：

```
#include <iostream>

// declare in hpp
class SomeClass {

   friend SomeClass OSImplementation();

    public:
        static SomeClass SomeMethod();

        void foo();

    private:
        SomeClass(int);
};

int main()
{
  auto obj = SomeClass::SomeMethod();

  obj.foo();
}

// define in cpp
SomeClass SomeClass::SomeMethod(){
  return SomeClass( 5 );
}

SomeClass::SomeClass(int){
}

void SomeClass::foo(){
  std::cout<<"foo"<<std::endl;
}

SomeClass OSImplementation()
{
  return SomeClass::SomeMethod();
} 
```

# android - 如何在 DialogFragment 中实现 AutoCompleteTextView

> ID：11162274
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:44:25.607
> 
> 标签：android

将它放在 onCreateView 方法中的 DialogFragment 中时出现空指针异常

```
 AutoCompleteTextView med =(AutoCompleteTextView)getActivity().findViewById(R.id.new_autoCompleteT);
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_1, item);
 med.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:56:38.097

您似乎正在尝试`View`从关联的`Activity`. 您应该检查对 的调用`getActivity()`，也许它返回 null 因为它尚未附加的活动。检查`onActivityCreated (Bundle savedInstanceState)`方法，从[文档](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)：

```
Called when the fragment's activity has been created and this fragment's view hierarchy instantiated. It can be used to do final initialization once these pieces are in place, such as retrieving views or restoring state. 
```

# perl - 什么是 @。在 Perl 中？

> ID：11162279
> 
> 赞同：6
> 
> 时间：2012-06-22T18:45:01.283
> 
> 标签：perl, variables

perl中的`@.`变量是什么？

它似乎是一个特殊的、可写的全局变量，并且（令人惊讶的是）不会插入双引号字符串：

```
use strict;
use warnings;

                 # Under 5.8, 5.10, 5.12, 5.14, and 5.16,
                 # the following lines produce:

@. = (3, 2, 1);  # no error
print "@.\n";    # "@."
print @., "\n";  # "321"

eval 'my @.; 1'  # Can't use global @. in "my" at (eval 1)
  or die $@;     #  line 1, near "my @." 
```

我不记得以前遇到过它，也没有在`perlvar`nor中看到它`perldata`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T19:01:40.300

[perldoc perlvar](http://perldoc.perl.org/perlvar.html)状态：

> Perl 变量名也可以是数字序列或单个标点符号或控制字符。这些名称都是为 Perl 的特殊用途而保留的；

和

> 以数字、控制字符或标点字符开头的 Perl 标识符不受包声明的影响，并且总是强制在`package main`; 它们也免于`strict 'vars'`错误。

您正在使用保留名称。您不应该期望能够依赖任何功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T18:52:21.647

`$.`是最近文件句柄的当前行号（或记录号）。

`@.`没有特殊意义或用途

* * *

`"@."`不插值，但`"@{.}"`会。

`@.`保留供将来使用，不应使用

# facebook - 上传的照片被组合在一起

> ID：11162283
> 
> 赞同：0
> 
> 时间：2012-06-22T18:45:13.723
> 
> 标签：facebook, publish, photos

我的一个应用程序将照片发布到 Facebook 时间轴...过去，如果有人在一天中的不同时间发布照片，他们会在时间轴上显示为单独的已发布项目。

然而，现在它将这些照片组合在一起。

示例：我在上午 11 点、下午 2 点、下午 5 点通过应用发布了一张照片。

过去发生的事情：每张照片都会单独发布。

现在发生的情况：它们都组合在一起。（下午 5 点的照片与上午 11 点和下午 2 点的照片一起显示在时间轴上）。

他们都会去同一张专辑（我想要）——我只是想让他们分开出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:22:14.980

我们有同样的问题。过去两周似乎发生了变化：fb 如何对待通过 API 发布的照片​​。

以前，每隔一小时发布的任何内容都将被视为独立帖子。现在，我们正在观察最多相隔 5 小时发布的内容的分组。

# silverlight - 2010 年工具包中的 silverlight 数据表：取消编辑并非在所有情况下都有效

> ID：11162285
> 
> 赞同：0
> 
> 时间：2012-06-22T18:45:21.427
> 
> 标签：silverlight, dataform

您正在使用有问题的控件（DataForm）并调用 CancelEdit() 并且在某些情况下它不会取消。你拉出一些你的听力。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:45:21.957

在调用 CancelEdit() 之前立即调用 BeginEdit()。万岁！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T15:43:02.397

绑定到 dataForm 的对象必须实现 IEditableObject。然后 CancelEdit 调用将起作用

# objective-c - 在目标 c 控制台应用程序中取消隐藏鼠标光标的简单实用程序

> ID：11162287
> 
> 赞同：1
> 
> 时间：2012-06-22T18:45:29.957
> 
> 标签：objective-c, console-application, exc-bad-access, nscursor

我正在尝试创建一个简单的控制台应用程序来取消隐藏光标，因为我使用的程序存在错误并间歇性地隐藏光标（宁愿编写一个快速实用程序而不是等待修复错误）。我添加了 AppKit 框架并编写了以下简单的控制台应用程序 (main.m)：

```
#import <Foundation/Foundation.h>
#import <AppKit/NSCursor.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        [NSCursor unhide];
    }
    return 0;
} 
```

但我在线路上得到一个 EXC_BAD_ACCESS `[NSCursor unhide]`。知道我做错了什么吗？

我正在使用 XCode 4.3.2 在 Lion 上运行它

我也愿意用 AppleScript 来做这件事，但我也无法在那里完成它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:03:33.980

你试图做的事情是行不通的。游标对象由每个应用程序管理和拥有。您不能影响另一个应用程序的光标（没有代码注入）。

你得到一个`EXC_BAD_ACCESS`因为你的程序实际上没有光标。一个将在通常的 GUI 应用程序启动过程中创建，即，`NSApplicationMain()`如果您创建了一个“Cocoa 应用程序”，但您仍然只能影响您自己的应用程序的光标。

AppleScript 似乎有更大的成功机会，因为它允许您执行一些直接影响其他应用程序的代码，但我完全不确定它是否具有像这样管理光标的功能——它似乎也有点AS的低级。

# c# - 使用 linq 查询处理异常

> ID：11162292
> 
> 赞同：0
> 
> 时间：2012-06-22T18:45:42.313
> 
> 标签：c#, linq, exception-handling

如何处理 linq 查询中的异常？例如，如果我有以下查询：

```
var query = (from d in GetLHDb().daily_average
             where d.findnsave_site_id == fnsID 
                   && d.test_path_id == pathId 
                   && d.date > nTimesDays 
                   && d.date <= yesterday
             select new
             {
                 loadtime = d.loadtime,
                 created_at = d.date
             }).ToArray(); 
```

例如，我如何处理查询中的空异常？我在网上搜索过，但其中很多都是针对 VB 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:49:22.317

```
try
{
    var query = (from d in GetLHDb().daily_average
    where d.findnsave_site_id == fnsID && d.test_path_id == pathId && d.date > nTimesDays && d.date <= yesterday
    select new { loadtime = d.loadtime, created_at = d.date }).ToArray();
}
catch (NullReferenceException e)
{
    ReportError();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:49:31.063

在您的情况下，就像您在代码中的任何其他位置一样。把你包`.ToArray()`在一个`try/catch`块里。尽管在您的情况下，我只会更具防御性并正确处理空值。

```
try
{
    var query = (from d in GetLHDb().daily_average
    where d.findnsave_site_id == fnsID && d.test_path_id == pathId && d.date >                           nTimesDays && d.date <= yesterday
select new { loadtime = d.loadtime, created_at = d.date }).ToArray();
}
catch (Exception)
{
  //do what you need to
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:59:34.890

在您的示例中，我看到三个可能的地方可能会出现空引用异常，即`GetLHDb().daily_average`在 GetLHDB 为空时访问、尝试枚举`daily_average`为空或尝试访问空引用时的字段`d`（*我'甚至不确定这是否会发生*）。

我建议将结果存储`GetLHDb()`到局部变量（例如，`lhdb`），然后对其进行空值检查。如果它不为 null，请执行 nll check-on `lhdb.daily_average`。如果那不为空，请继续您的查询。

**更新：**此外，如果`d`为 null，您可以使用 . 开头的 where 子句`d != null`。

```
var lhdb = GetLHDb();
if(lhdb != null && lhdb.daily_average != null)
{
    var query = (from d in lhdb.daily_average
                 where d != null // If d can't be null, remove this
                       && d.findnsave_site_id == fnsID 
                       && d.test_path_id == pathId 
                       && d.date > nTimesDays 
                       && d.date <= yesterday
                 select new
                 {
                     loadtime = d.loadtime,
                     created_at = d.date
                 }).ToArray();

    // Process the results
} 
```

# javascript - 可以禁用 MarkdownDeep Markdown 编辑器中的预览窗格吗？

> ID：11162295
> 
> 赞同：0
> 
> 时间：2012-06-22T18:45:50.713
> 
> 标签：javascript, markdown, markdowndeep

我正在开发一个 ASP.NET MVC 项目，该项目使用[MarkdownDeep 编辑](http://www.toptensoftware.com/markdowndeep/editor)器在基本的 Markdown 输入文本框（非常类似于 Stackoverflow 编辑器窗口）之上添加丰富的编辑器。

一般来说，它工作得很好。但是，在某些情况下，我想禁用预览窗口。这是由 MDD 在 textarea 下方自动生成的。这可以禁用吗？

为了清楚起见，我知道我可以使用 CSS 来*隐藏*预览。但是在某些设备上它很慢并且使打字很痛苦。我想完全*关闭*该功能。除了如何自定义预览之外，我在文档中看不到任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:54:29.637

在[文档](http://www.toptensoftware.com/markdowndeep/editor)中，它特别提到建议您在文档中已经有了 div 预览，因为如果找不到它，它将被创建，因此，如果必须发生任何重新布局，可能会刷新可见的页面。

> 注意：相关的 div 都是可选的，如果缺少，插件将创建它们。但是...如果您这样做，您可能会在加载过程中遇到页面跳动。即：建议明确包括它们。

[因此，从这个声音来看，在API](http://www.toptensoftware.com/markdowndeep/api)页面中似乎没有任何选项可以关闭它，我会说不，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T02:29:58.837

我在这里有点困惑：如果您不想要预览，请使用常规文本区域而不是 mdd_editor... 所以，在您不需要预览的场景下，实例化一个普通的香草编辑器。我在这里想念什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T14:42:56.757

我知道这很旧，但我在 mdd 上寻找其他东西。我最近也有同样的要求。只需注释掉代码

```
// Update the DOM
if (this.m_divHtml)
    this.m_divHtml.innerHTML=output; 
```

在 MarkdownDeepEditor.js 中

# php - PHP中的多个复选框进入数据库

> ID：11162296
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:45:57.720
> 
> 标签：php, mysql

我有一些代码允许用户选择多个复选框。

```
while($data2 = mysql_fetch_array($result)) {
    echo "<input type=\"checkbox\" name=\"pid[]\" value=\"{$data2['product_id']}\">         {$data2['product_id']} {$data2['product_name']}</option>";
    echo"<br/>";
} 
```

我想在数据库中输入检查的值。

```
$pid = $_POST['pid'];
for ($i = 0; $i < count($pid); $i++) {

    $information="INSERT INTO     orders(productid,product_discount,amount,customerid,order_date,quantity) VALUES('$pid','$discount','$amount','$custid',CURDATE(),'')";
    $result=mysql_query($information) or die(mysql_error());
} 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:48:32.930

注意 SQL 注入。

`mysql_*`已弃用；改用[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:48:57.610

由于 $pid 是一个数组，因此您不能按原样插入它。尝试这个 ：

```
$pid=$_POST['pid'];
for ($i=0;$i<count($pid);$i++)
{

$information="INSERT INTO     orders(productid,product_discount,amount,customerid,order_date,quantity) VALUES($pid[$i],'$discount','$amount','$custid',CURDATE(),'')";
$result=mysql_query($information) or die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:49:20.040

```
foreach ($_POST['pid'] as $pid) {
 $information="INSERT INTO
                  orders(productid,product_discount,amount,customerid,order_date,quantity) 
               VALUES('$pid','$discount','$amount','$custid',CURDATE(),'')";
 $result=mysql_query($information) or die(mysql_error());
} 
```

# directx - 将托管 DirectX 与 .Net Framework 4.0 一起使用时程序崩溃

> ID：11162300
> 
> 赞同：0
> 
> 时间：2012-06-22T18:46:14.317
> 
> 标签：directx, directsound, managed-directx

我们在将 DirectSound 与托管 DirectX dll 和 .Net Framework 4.0 一起使用时遇到问题

该程序在 .Net Framework 2.0 上运行良好 - 但我们需要升级到 4.0 才能使用其他一些组件。

当程序调用 Sound 模块时，它会崩溃并出现以下异常。

有人看过这个并知道如何修复它吗？

```
==============================================
System.IO.FileNotFoundException was unhandled
Message=Could not load file or assembly 'Microsoft.DirectX, Version=2.0.0.0, Culture=neutral,    PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.
Source=Microsoft.DirectX.DirectSound
FileName=Microsoft.DirectX, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
FusionLog=""
[stack dump snipped]
InnerException: System.IO.FileNotFoundException
Message=Could not load file or assembly 'Microsoft.DirectX, Version=1.0.2902.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.
FileName=Microsoft.DirectX, Version=1.0.2902.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35

FusionLog==== Pre-bind state information ===
LOG: User = *****************
LOG: DisplayName = Microsoft.DirectX, Version=1.0.2902.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
(Fully-specified)
LOG: Appbase = file:///C:/Users/*********/Documents/Visual Studio 2010/Projects/************/bin/x86/Debug/
LOG: Initial PrivatePath = NULL

Calling assembly : Microsoft.DirectX.DirectSound, Version=1.0.2902.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\***********\Documents\Visual Studio 2010\Projects\****************\bin\x86\Debug\***************.exe.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Redirect found in application configuration file: 1.0.2902.0 redirected to 2.0.0.0.
LOG: Post-policy reference: Microsoft.DirectX, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: The same bind was seen before, and was failed with hr = 0x80070002.
InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T19:28:55.810

正式地，旧的 DirectX 托管 1.1 程序集不支持 .NET 4.0。有关详细信息，请参阅此[博客](http://blogs.msdn.com/b/chuckw/archive/2010/12/09/directx-and-net.aspx)文章。

您可以考虑使用[SlimDX](http://www.slimdx.org/)或其他替代方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T20:14:40.590

```
 <!--  Uncomment this section when switching from Net2.0 to Net 4.0 
  It is intended to fix problems loading DirectX dlls  - per Microsoft-->

 <!-- 

  <startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0"/>

   </startup>
 --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:51:20.847

我知道这是一个迟到的回复，但为了让我能够正常工作，我必须找到两个 DirectX DLL `Microsoft.DirectX`，`Microsoft.DirectX.DirectInput`然后添加作为对项目的引用。

然后只需使用 DirectX 命名空间来调用方法。

# paperclip - 回形针安装错误

> ID：11162301
> 
> 赞同：0
> 
> 时间：2012-06-22T18:46:18.310
> 
> 标签：paperclip

我无法理解安装失败的原因：

```
pkerur@ubuntu:~$ rails --version
Rails 3.2.3

pkerur@ubuntu:~$ uname -a

Linux ubuntu 3.2.0-24-generic #38-Ubuntu SMP Tue May 1 16:21:07 UTC 2012 i686 i686 i386 GNU/Linux

pkerur@ubuntu:~$ ruby --version

ruby 1.9.3p0 (2011-10-30 revision 33570) [i686-linux]

pkerur@ubuntu:~$ sudo gem install paperclip

ERROR:  Error installing paperclip:
    paperclip requires Ruby version >= 1.9.2.

pkerur@ubuntu:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:23:03.567

[捆绑安装和红宝石版本？](https://stackoverflow.com/questions/11416529/bundle-install-and-ruby-versions/11530207#11530207)

从源代码构建它：

[http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/](http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:21:10.083

`sudo command`和之间有很大的区别`command`，因为 sudo'ing 弄乱了环境变量。我敢打赌，如果你这样做`sudo ruby -v`，它不会是 1.9.3。

解决方案将取决于很多事情。试试rvm？试试宝石？使非超级用户可写入的任何文件夹都不需要 sudo？( `sudo chown <your_yourname> <directory> -R`)

# javascript - 从 postMessage 事件接收到的 eval() 代码有多安全？

> ID：11162310
> 
> 赞同：1
> 
> 时间：2012-06-22T18:47:13.373
> 
> 标签：javascript, jquery, security, eval, postmessage

我正在发送父文档中定义的 javascript 函数的代码：

```
var fn = function(){ 
           // code here that is going to be eval'd
         };

$('#iframe').get(0).contentWindow.postMessage(encodeURI(fn.toString())); 
```

要在 iframe 中评估：

```
$(window).bind('message', function(e){
  eval('(' + decodeURI(e.originalEvent.data) + ')();');
}); 
```

我这样做的原因是因为我可以更轻松地管理代码，因为这样所有的 js 都在一个文件中:)

但它安全吗？

唯一可以修改代码的人是在哪台计算机上评估代码的同一个人，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:16:38.523

除了[应尽可能避免](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)[的一般规则`eval`](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)外，您当前的代码并不安全。

[跨文档消息传递](http://www.w3.org/TR/webmessaging/)应该是跨域通信的安全技术。这里最重要的方面是尊重来源：发送者可以决定消息可以发送到哪个来源的文档，而接收者可以决定它可以接受来自哪个来源的消息。

但在您的情况下，您的发件人既没有指定收件人来源，也没有收件人检查发件人来源。这是一个安全漏洞，因为您的发件人可以将消息发送给错误的收件人（您的框架的文档更改），或者您的收件人接受来自错误发件人的带有潜在恶意代码的消息（您的文档嵌入在恶意页面中）。

因此，为了使您的跨文档消息传递安全，请始终在[`postMessage`](https://developer.mozilla.org/en/DOM/window.postMessage)调用中指定发件人的来源：

```
otherWindow.postMessage(message, "http://example.org:8080"); 
```

并在收到消息时始终检查来源：

```
function receiveMessage(event) {  
    if (event.origin !== "http://example.org:8080") return;
    // ...
}
window.addEventListener("message", receiveMessage, false); 
```

如果您在同一来源内进行通信，则可以使用`window.location.origin`：

```
// sender
otherWindow.postMessage(message, window.location.origin);

// recipient
if (event.origin !== window.location.origin) return; 
```

`window.location.origin`似乎仅在 WebKit 中可用，这里有一个解决方法：

```
if (!window.location.hasOwnProperty("origin")) {
    window.location.origin = window.location.protocol + "//" + window.location.host;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:57:20.967

关于“安全”，你说的是一个窗口，它在技术上完全由用户控制（如果用户足够精明的话），与另一个这样的窗口或 iframe 通信。所以基本上这一切都在用户的控制之下。它和客户端上的其他任何东西一样安全，也就是说，*客户端上没有任何东西是安全的；那里是狂野的西部*。如果用户不想受到保护，您就无法保护用户免受他/她自己的伤害。

话虽如此，通常有更好的方法来完成这项工作`eval()`。几乎总是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:51:40.103

> eval() 有多安全？

一点都不安全。

[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:51:06.377

不，操纵要执行的代码和其他东西很容易，而且 eval 不是让事情正常工作的好方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:54:32.393

使用该`eval()`函数意味着如果任何攻击者将 javascript 注入您的站点，他可以在 eval 函数中执行任何类型的流氓代码。

# javascript - 我可以创建与现有函数同名的函数来自定义它吗？

> ID：11162311
> 
> 赞同：5
> 
> 时间：2012-06-22T18:47:13.530
> 
> 标签：javascript

我的网站上有一些 console.log 命令。

是否可以用我自己的函数覆盖 console.log？我想自定义该函数，以便它仅在特定变量设置为 true 时记录。

最后，我仍然需要从这个函数调用真正的 console.log。

谢谢凯文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:50:08.683

只需创建一个闭包，并将原始`console.log`函数存储在局部变量中。
然后覆盖`console.log`，并在您检查后调用原始函数：

```
(function(){
    var original = console.log;

    console.log = function(){
        if ( log ) { // <-- some condition
            original.apply(this, arguments);
        }
    };
})(); 
```

这是小提琴：http: [//jsfiddle.net/J46w8/](http://jsfiddle.net/J46w8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:50:35.267

先保存旧的`console.log()`。

```
var reallog = console.log;
console.log = function(s) {
    if(s == "a") {
        reallog("a");
    }
}
console.log("b"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:50:45.633

```
console.constructor.prototype.log = function(msg) {
    alert(msg);
}; 
```

# ms-access - Access SQL中的日期排名？

> ID：11162321
> 
> 赞同：1
> 
> 时间：2012-06-22T18:47:56.413
> 
> 标签：ms-access

我有一个查询从具有列 UseDates 的表中提取过去六个月的数据（因此，截至今天 6 月，该表的日期为 2011 年 12 月至 2012 年 5 月）。

我希望包含一个“排名”列，将 1 与所有 12 月日期、2 与所有 1 月日期等相关联——最多 6 个对应于一个月前的日期。如果我从现在开始一个月后打开这个查询，那么 1 将与一月相关联，等等。

我希望这是有道理的！

例如，如果我现在运行查询

```
UseDate        Rank
12/31/2011     1
1/12/2012      2
...
5/23/2012      6 
```

例如，如果我在 8 月运行查询：

```
UseDate        Rank
2/16/2012      1
3/17/2012      2
...
7/21/2012      6 
```

例如，如果我在 3 月份运行查询：

```
UseDate        Rank
9/16/2011      1
10/17/2011     2
...
2/24/2012      6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:51:54.813

您可以使用[月份函数并从](http://www.techonthenet.com/access/functions/date/month.php)[now](http://www.techonthenet.com/access/functions/date/now.php)函数的`UseDates`结果中减去它。如果它变为负数，只需添加 12。此外，您可能希望添加 1，因为您从 1 而不是 0 开始。显然它应该适用于半年的日期范围。当您需要“排名”几年时，您会遇到麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:58:23.080

```
SELECT
    UseDates,
    DateDiff("m", Date(), UseDates) + 7 AS [Rank]
FROM YourTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:02:29.693

您可以使用计数进行排名。

```
SELECT 
   Table.ADate, 
   (SELECT Count(ADate) 
    FROM Table b 
    WHERE b.ADate<=Table.ADate) AS Expr1
FROM Table3; 
```

您必须在子查询中重复任何 where 语句：

```
SELECT 
   Table.ADate, 
   (SELECT Count(ADate) 
    FROM Table b 
    WHERE b.ADate<=Table.ADate And Adate>#2012/02/01#) AS Expr1
FROM Table3
WHERE   Adate>#2012/02/01# 
```

# android - Appcelerator / Android：无法使用文件系统列出二级目录

> ID：11162324
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:48:03.763
> 
> 标签：android, filesystems, appcelerator-mobile

我需要有关我在 Appcelerator Titanium for Android 中使用的应用程序的帮助。

我得到了下面的代码，它允许我向模拟器显示附加 SD 的第一（根）级别（图像示例如下）：

```
 /*
 *
 * Dynamic data, 
 * taken from the SD card
 * 
 */

//Get the SD card reference
var dir = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory);

//Get the directory listing
var directoryStr = dir.getParent().getDirectoryListing();

//Convert the listing into an array for display in tableview
var directoryArr = directoryStr.toString().split(',');

//Initialize tabledata 
var dirData = [];

for (var i=0; i < directoryArr.length; i++) {

      dirData.push({ leftImage:'/images/folder.png', title: directoryArr[i], value: Titanium.Filesystem.externalStorageDirectory + Titanium.Filesystem.separator + directoryArr[i], hasChild:true });   

      Ti.API.info(Titanium.Filesystem.externalStorageDirectory + directoryArr[i]);

};

  //Table view for directories
var tableDirs = Ti.UI.createTableView({
    data: dirData       
}); 
```

输出如下：

![使用上述代码输出数据](../Images/71068a0a49ee9999bb67c6ca63f747b0.png)

下面的代码应该给我列出其中目录的字符串，例如，上图中的图像目录。

```
 tableDirs.addEventListener('click', function (e) {

    if (e.rowData.hasChild) {

        //Get the SD card reference
        var secDir = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory + '/' + e.rowData.title);

        //Get the directory listing
        var secDirStr = secDir.getDirectoryListing();

        alert(secDirStr);

    };

}); 
```

但相反，我得到了这个：

![无法理解如何处理该对象](../Images/0ce156d5d8cdf8ca982e70c05b0789fd.png)

给我一个我不知道如何处理的对象。

有时如果我使用以下代码：

```
 var dir = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory + '/Images'); 
```

目录列表返回给我一个文件“deploy.json”。

任何指针将不胜感激。我对 Android 开发相当陌生，所以我可能会遗漏一些明显的东西。

提前致谢！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:47:19.517

getDirectoryListing() 返回一个数组。要查看其内容，您必须查看数组中的特定项目，例如：**secDirStr[0].toString();**

试试下面的 for 循环来查看它的内容：

```
if (e.rowData.hasChild) {

    //Get the SD card reference
    var secDir = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory + '/' + e.rowData.title);

    //Get the directory listing
    var secDirStr = secDir.getDirectoryListing();

    for (i=0, max=secDirStr.length; i<max; i++){
        alert(secDirStr[i].toString());
    }
}; 
```

# java - 无法发送短信；在 Java/Scala Google Voice API 中出现 500 错误

> ID：11162327
> 
> 赞同：0
> 
> 时间：2012-06-22T18:48:09.917
> 
> 标签：java, scala, voip, google-voice

我有这个代码：

```
val voice = new Voice("<un>", "<pw>")
voice.login()
// The ID isn't specced well in the source code, not sure what it needs to be
voice.sendSMS("<number>", "hello", "343434") 
```

我在浏览器中收到此错误（Play 2.0）：

```
Server returned HTTP response code: 500 for URL: https://www.google.com/voice/b/0/sms/send/] 
```

堆栈跟踪是：

```
[info] play - Application started (Dev)
[info] application - index:
https://www.google.com/accounts/ClientLogin - OK
Logged in to Google - Auth token received
https://www.google.com/voice/b/0/settings/tab/phones - OK
https://www.google.com/voice/b/0 - OK
Successfully Received rnr_se.
smsdata: id=hello&phoneNumber=XXXXXXXX&conversationId=343434&text=hello&_rnr_se=XXXXXXXXXXXXXXX
[error] application - 

! @6an08o8h8 - Internal server error, for request [GET /smsTest] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[IOException: Server returned HTTP response code: 500 for URL: https://www.google.com/voice/b/0/sms/send/]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.1]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.1]
    at akka.actor.Actor$class.apply(Actor.scala:311) [akka-actor.jar:2.0.1]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.1]
    at akka.actor.ActorCell.invoke(ActorCell.scala:619) [akka-actor.jar:2.0.1]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196) [akka-actor.jar:2.0.1]
Caused by: java.io.IOException: Server returned HTTP response code: 500 for URL: https://www.google.com/voice/b/0/sms/send/
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436) ~[na:1.6.0_31]
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234) ~[na:1.6]
    at com.techventus.server.voice.Voice.sendSMS(Voice.java:1669) ~[google-voice-java-1.14.jar:na]
    at controllers.Application$$anonfun$smsTest$1.apply(Application.scala:47) ~[classes/:na]
    at controllers.Application$$anonfun$smsTest$1.apply(Application.scala:45) ~[classes/:na]
    at play.api.mvc.Action$$anon$1.apply(Action.scala:170) ~[play_2.9.1.jar:2.0.1]
[info] Compiling 1 Scala source to /Users/franklovecchio/Desktop/dev/applications-voip/target/scala-2.9.1/classes... 
```

我正在使用[最新的 jar](https://code.google.com/p/google-voice-java/downloads/detail?name=google-voice-java-1.14-java6.jar)。

目前有人可以发短信吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:49:29.207

尝试使用构建在 Akka 之上的 JSON Spray。您将需要以下导入：

```
import java.io._;
import java.net.InetAddress;
import java.util.Properties;
import java.util.Date;
import javax.mail._;
import javax.mail.internet._;
import javax.activation._;
import cc.spray.json._ 
```

基本上，伪代码或算法与您在 Java 中实现的相同，只是您将使用 Scala 进行编码。

Twitter 的 finagle 是服务器请求和响应的良好支柱。

# c++ - 如何以及在注册表中编写什么以在 Windows 启动时自动重启程序

> ID：11162332
> 
> 赞同：0
> 
> 时间：2012-06-22T18:48:35.393
> 
> 标签：c++, windows, visual-studio-2010, registry

我想以这样一种方式设计程序，即无论何时安装它，它都应该在 Windows 的所有用户上的 Windows 启动时自动重新启动......

我最重要的要求是我不能授予我的程序管理员权限，因为它必须在有限帐户中运行，或者有时在启用 UAC 的管理员帐户上运行到最高级别......

我应该在注册表中写什么和在哪里实现这一点。或者如果无法为没有管理员权限的所有用户修改注册表，那么在 Windows 启动后是否有任何替代方法来重新启动程序？

据我所知，另一种方法是将我们的程序安装在 Start Up 文件夹中.. 但是请让我知道是否可以在没有管理员权限的情况下在所有用户的启动文件夹中安装程序，并且是否可以执行所有写入操作启动文件夹即使对于受限帐户用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:53:20.867

简单的答案是：你不能。Vista 及更高版本（如果您不是在高级用户或管理员帐户下运行，则为 XP）对`HKEY_LOCAL_MACHINE`.

您还需要管理权限才能为所有用户安装应用程序；如果没有该权限，您只能为当前登录的用户安装。这意味着在“所有用户”启动文件夹中安装快捷方式也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:38:36.557

除非存在可利用的安全漏洞，否则只有管理员帐户才能执行影响机器上其他用户的操作，例如在 HEY_LOCAL_MACHINE 中设置密钥、通过任务计划程序注册程序以供其他用户运行或安装服务。这是设计使然。

# c# - Windows Phone 7 使用 Web 服务 JSON 数据

> ID：11162335
> 
> 赞同：0
> 
> 时间：2012-06-22T18:48:46.297
> 
> 标签：c#, json, windows-phone-7, mobile

我现在正在学习 Windows Phone 7 开发，我正在使用 C#，因为这是我最熟悉的语言。

现在，我想创建以下流程：用户在文本字段中输入内容并按下按钮 -> 我向他显示“请稍候”消息框并将文本字段文本发送到 WebService（可能通过 HTTPS），当收到 WebService 响应时，我将根据响应数据向他显示另一个屏幕。

这个 WebService 只检索 JSON 数据，所以我需要解析 JSON 数据。

我想我已经能够发送数据并从服务器检索响应，但是，我不知道如何显示这个“加载”消息框，在 dode 时隐藏它，并启动一个新屏幕（阻止访问第一个）。

单击按钮时：

```
 HttpWebRequest wr = (HttpWebRequest)System.Net.WebRequest.Create("http://example.com/");
        wr.Method = "POST";
        wr.ContentType = "application/x-www-form-urlencoded";

        wr.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), wr); 
```

GetRequestStreamCallback 方法：

```
 void GetRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest wr = (HttpWebRequest)asynchronousResult.AsyncState;
        Stream postStream = wr.EndGetRequestStream(asynchronousResult);;
        byte[] byteArray = Encoding.UTF8.GetBytes("key=" + someText.Text);
        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        wr.BeginGetResponse(new AsyncCallback(GetResponseCallback), wr);
    } 
```

GetResponseCallback 方法：

```
 void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        try
        {
            HttpWebRequest wr = (HttpWebRequest)asynchronousResult.AsyncState;
            HttpWebResponse response = (HttpWebResponse)wr.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamReader = new StreamReader(streamResponse);
            MessageBox.Show(streamReader.ReadToEnd()); // ???
            streamReader.Close();
            streamResponse.Close();
            response.Close();
        }
        catch (WebException e)
        {
            // Does nothing
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:59:03.970

无论您使用哪种方法来[指示进度](http://mobile.dzone.com/articles/31-days-mango-day-15-progress)，在调用服务之前将其打开，`myProgressIndicator.Show = true;`然后在回调中并在完成任何其他处理后将其关闭，`myProgressIndicator.Show = false;`. 不要忘记在 catch 中关闭它以进行异常处理。

[Coding4Fun](http://coding4fun.codeplex.com/)有一个进度覆盖。

# c# - 为什么实现内部接口的方法必须是公共的

> ID：11162336
> 
> 赞同：5
> 
> 时间：2012-06-22T18:48:46.320
> 
> 标签：c#, c#-4.0

我正在开发一个实现内部接口的内部类。谁能解释为什么我不能将我的方法声明为内部方法，为什么会出现以下错误：“无法实现接口成员，因为它不是公共的”。

我知道我必须将该方法声明为公共的，但这对我来说绝对没有意义。

如果接口和类都是内部的，那么将方法声明为 public 有什么意义？这不是误导吗？

我[在这个网站上阅读了一个相关的问题](https://stackoverflow.com/questions/7238575/why-must-an-c-sharp-interface-method-implemented-in-a-class-be-public)。它不是完全重复的，因为我的课程是内部课程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T18:51:56.860

简单地说：因为这是语言设计者设计它的方式。即使在内部接口中，方法也是隐式公开的。它确实使事情变得简单，但在其他方面却很痛苦。

如果你想要一个公共类来“隐藏”内部接口的使用，你可以使用显式接口实现——尽管这有其他缺点。

当然，如果您的类是内部的，那么无论如何方法是公共的都没有关系 - 其他程序集将无法调用这些方法，因为它们看不到类型。

我绝对同意 C#（或一般的 .NET）没有像围绕内部接口那样精心设计。

就您收到错误消息的*确切原因而言 - C# 4 规范（接口映射）的第 13.4.4 节是原因。*仅针对非静态公共成员和显式接口成员实现找到实现 - 如果接口中有任何未实现的成员，则会发生错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-27T18:03:23.190

我知道这很旧，但也许有人觉得它有用。您可以像这样完成一种内部接口方法：

```
internal interface IFoo
{
    void MyMethod();
}

public abstract class Foo : IFoo
{
    void IFoo.MyMethod()
    {
        MyMethod();
    }

    internal abstract void MyMethod();
} 
```

所以你所有的内部类都应该从 Foo 派生并被迫实现抽象的 MyMethod。但是您当然可以将它们全部视为 IFoo。但是程序集之外的那些类不会提供 MyMethod 类。

因此，您可以在内部将您的类视为 IFoo 并依赖 MyMethod。缺点是您的所有类都需要从 Foo 派生，如果您需要另一个基类，这可能是一个问题。

但是我发现如果抽象基类是通用的而接口不是，它会很有帮助。也许它在某些情况下很有用。

# javascript - 如何在 IE9 中使用 jQuery 通过锚点提交表单

> ID：11162339
> 
> 赞同：1
> 
> 时间：2012-06-22T18:49:00.370
> 
> 标签：javascript, jquery, html, internet-explorer

我有一些效果：

```
<a href="#" >click me</a> 
```

和：

```
$(document).ready(function() {
  $('a').click(function() {
    $('<form action="/" method="post"></form>').submit();
    return false;
  }
} 
```

预期的结果是单击锚点将提交表单并重定向页面。这适用于 Chrome 和 Firefox。在 Internet Explorer 9 中，浏览器只跟随指向 # 的链接。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:07:08.543

试试这个

```
 $('a').click(function() { 
        var form = '<form action="/" method="post"></form>';
        $('body').append(form);
        $('form:last').submit();
    } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:56:45.750

我会先尝试将表单附加到正文中。但是，为什么你需要一个表格呢？

```
$(document).ready(function() {
  $('a').click(function() {
    $.post("/");
    return false;
  }
}); 
```

# bash - 使用变量从 bash 运行 IDL 程序

> ID：11162341
> 
> 赞同：7
> 
> 时间：2012-06-22T18:49:04.720
> 
> 标签：bash, idl-programming-language

我在 IDL 中编写了一个程序来根据命令行参数生成散点图。我可以像这样直接在终端中成功调用程序：

> idl -e "scatterplot_1_2d_file.pro" $infile $outfile $title $xtitle $ytitle $xmin $xmax $ymin $ymax $timescale

其中 $* 指的是输入的一些字符串文字。问题是，我认为我可以只输入那一行，将变量名代替文字，放入 bash 脚本中，并生成一百万个散点图在我休息的时候。不幸的是，如果我这样做，我会收到错误：

> idl: -e 选项不能与批处理文件一起指定

所以我的下一个尝试是尝试将这些命令写入一个 IDL 批处理文件，然后我会运行该文件。

该尝试如下所示：

```
#!/bin/bash

indir=/path/to/indir/
outdir=/path/to/outdir/

files=`ls $indir`
batchfile=/path/to/tempbatchfile.pro

echo .r "/path/to/scatterplot_1_2d_file.pro" >> $batchfile

for file in $files
  do
  name=${file%\.*}
  echo scatterplot_1_2d_file $indir$name.txt $outdir$name.jpg $name "Gauge Precipitation (mm)" "NMQ Precipitation (mm)" "*" "*" "*" "*" 2 >> $batchfile
done #done file                                                                                                                                                                                                

echo exit >> $batchfile

idl <<EOF                                                                                                                                                                                                      
@/path/to/scatterplot_1_2d_file                                                                                                                                                                  
EOF                                                                                                                                                                                                            

rm $batchfile 
```

我不知道脚本生成的大部分错误是否相关，所以我只发布开始，如果您需要，我会在稍后发布其余部分：

```
[foo]$ bash script_thing.sh
IDL Version 6.3 (linux x86 m32). (c) 2006, Research Systems, Inc.
Installation number: 91418.
Licensed for personal use by XXXXXXXXX only.
All other use is strictly prohibited.

PRO scatterplot_1_2d_file
                         ^
% Programs can't be compiled from single statement mode.
  At: /path/to/scatterplot_1_2d_file.pro, Line 1
% Attempt to subscript ARGS with <INT      (       1)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       2)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       3)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       4)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       5)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       6)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       7)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       8)> is out of range.
% Execution halted at: $MAIN$          
% Attempt to subscript ARGS with <INT      (       9)> is out of range.
% Execution halted at: $MAIN$ 
```

我不知道我是否只是在尝试做一些无法完成的事情，但它似乎并不喜欢它。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T15:16:03.810

有两种方法可以解决这个问题：使用`COMMAND_LINE_ARGS`或构造一个有效的 IDL 例程调用。此例程同时使用：

```
pro test, other_args
  compile_opt strictarr

  args = command_line_args(count=nargs)

  help, nargs
  if (nargs gt 0L) then print, args

  help, other_args
  if (n_elements(other_args) gt 0L) then print, other_args
end 
```

通过以下两种方式之一从命令行调用它：

```
Desktop$ idl -e "test" -args $MODE
IDL Version 8.2, Mac OS X (darwin x86_64 m64). (c) 2012, Exelis Visual Information Solutions, Inc.
Installation number: 216855.
Licensed for use by: Tech-X Corporation

% Compiled module: TEST.
NARGS           LONG      =            1
test
OTHER_ARGS      UNDEFINED = <Undefined>
Desktop$ idl -e "test, '$MODE'"
IDL Version 8.2, Mac OS X (darwin x86_64 m64). (c) 2012, Exelis Visual Information Solutions, Inc.
Installation number: 216855.
Licensed for use by: Tech-X Corporation

% Compiled module: TEST.
NARGS           LONG      =            0
OTHER_ARGS      STRING    = 'test'
test 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T11:30:49.267

我不知道 IDL，但这里有一些可能对您的 Bash 脚本有帮助的修复：

```
#!/bin/bash

indir=/path/to/indir/
outdir=/path/to/outdir/

# (commented out) files=`ls $indir` # no, just no
batchfile=/path/to/tempbatchfile.pro

echo ".r /path/to/scatterplot_1_2d_file.pro" > "$batchfile"  # overwrite the file on the first write, put everything inside the quotes

for file in "$indir/"*
    do
    name=${file%\.*}
    echo "scatterplot_1_2d_file $indir$name.txt $outdir$name.jpg $name Gauge Precipitation (mm) NMQ Precipitation (mm) * * * * 2" # quote the whole thing once, it's simpler and echo doesn't do anything differently
done >> "$batchfile" # do all the output from the loop
echo exit >> "$batchfile"

# *** where does idl learn the location of "$batchfile"? ***
idl <<EOF                                                                                                                                                                                                      
@/path/to/scatterplot_1_2d_file                                                                                                                                                                  
EOF                                                                                                                                                                                                            

rm "$batchfile" 
```

要修复您的命令行版本，请使用引用：

```
idl -e "scatterplot_1_2d_file.pro" "$infile" "$outfile" "$title" "$xtitle" "$ytitle" "$xmin" "$xmax" "$ymin" "$ymax" "$timescale" 
```

扩展时始终引用变量。

# php - 预加载网络资产：加载小于文件的完整大小

> ID：11162343
> 
> 赞同：0
> 
> 时间：2012-06-22T18:49:11.657
> 
> 标签：php, javascript, asp.net

您（我、我们、每个人等）无疑知道在网站上加载和预加载资产的方法。但我想知道是否有可能，无论是服务器端还是客户端，部分加载资产。

假设我的网站上有 10 张图片，全部 500kb。

但在用户触发事件之前，这些图像不会立即可见。

是否有可能在加载时加载每个图像的 200kb，然后在需要时加载剩余的 300kb？

我不需要有关预加载的信息，因为它在许多地方都有很好的记录，只要部分加载资产是任何人都尝试过并实现的

感谢您的任何想法

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:02:51.083

您当然可以执行部分​​加载，只加载 500 张图像中的 X。但是，仅加载 500K 文件中的 200K 似乎不太可能在 Web 上有用——尤其是对于图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:57:21.807

不完全是您正在寻找的东西，但是那里有延迟加载插件，它们会延迟图像的加载，直到用户将它们滚动到视图中。

目前大多数框架都有一个插件（ Mike Tuupola[的 jQuery 的 Lazy Loading](http://www.appelsiini.net/projects/lazyload)插件曾经不能正常工作，但似乎他已经做了一些工作）。我还找到了[MooTools](http://davidwalsh.name/mootools-lazyload)、[Prototype](http://www.bram.us/projects/js_bramus/lazierload/)和[YUI的示例](http://yuilibrary.com/yui/docs/imageloader/)

# google-apps-script - 检索 Google 驱动器文件夹内容与 Google 文档文件夹 - 有什么不同？

> ID：11162349
> 
> 赞同：0
> 
> 时间：2012-06-22T18:49:23.240
> 
> 标签：google-apps-script

如何修改此脚本？我想学习本教程，但我相信它是在驱动器替换文档之前编写的。

第 1 部分：在文件柜中嵌入文件夹

将 Google Docs 文件夹与站点文件柜链接

在您的站点中打开脚本编辑器。单击**更多操作**>**管理站点**。在左侧边栏中，点击**Apps Scripts**。单击启动编辑器。将以下代码复制并粘贴到编辑器中。

```
function showFolderInSite() {
  var files = DocsList.getFolderById("PASTE_FOLDER_ID_HERE").getFiles();
  var page = SitesApp.getPageByUrl("PASTE_PAGE_URL_HERE");
  for(i in files){
    page.addWebAttachment(files[i].getName(), '', files[i].getUrl());
  }
} 
```

在 Google 文档中打开您的文件夹，然后从浏览器窗口中的 URL 复制文件夹 ID。文件夹 ID 是`folder.#.`URL 部分之后的所有内容。例如，给定以下示例 url

[https://docs.google.com/?tab=mo&authuser=0#folders/folder.0.0B3xR7WfXrj7aOGY4Y2M3OWItZjAyYy00ZTM5LTg3MTgtNjNkYWZhZTZmYmU3](https://docs.google.com/?tab=mo&authuser=0#folders/folder.0.0B3xR7WfXrj7aOGY4Y2M3OWItZjAyYy00ZTM5LTg3MTgtNjNkYWZhZTZmYmU3)

文件夹 ID 是此部分：`0B3xR7WfXrj7aOGY4Y2M3OWItZjAyYy00ZTM5LTg3MTgtNjNkYWZhZTZmYmU3`. 请注意，它是`folder.0.`. 下图还显示了文件夹 ID：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:06:08.410

文件夹 url 的构建方式有一些细微的变化，但想法总是相同的：ID 是相同类型的两个项目之间不同的所有内容（2 个电子表格，2 个文件夹......这就是它们构建的方式urls)
在下面的这个例子中，ID 只是后面的东西`folders/`

即获取此文件夹中文件的代码行如下：

```
var files = DocsList.getFolderById("0B3qSFd3iikE3TkN2THNDUnAwX2s").getFiles(); 
```

希望这将帮助您完成您的教程。

![典型的文件夹 url](../Images/41cc515acdd732cb0e52bfe32c056fd8.png)

请注意，某些 url 更复杂，因为在 ID 字符串后面添加了一些参数（实际上大部分时间都是这种情况；-)

# python - 使用 openpyxl 移动到相邻单元格

> ID：11162355
> 
> 赞同：1
> 
> 时间：2012-06-22T18:49:33.740
> 
> 标签：python, excel, openpyxl

我有一个算法可以在单元格中找到一个值，对于这种情况，可以说单元格是 C10。我需要在 D 列中的旁边查看一个值，如果该值与我需要的不匹配，则从该值上移一个单元格并检查匹配等。到目前为止，我有这个：

```
bits = [] 

for row in ws.iter_rows(row_offset=4,column_offset=3):
    #skip over empty rows
    if row:
        #current cell is in column C
        cell = row[2]
        try:
            #find the lowest address in the excel sheet
            if cell.internal_value == min(address):
                #somehow match up in column d
                for '''loop and search col D''':
                    if str(row[3].internal_value).upper == ('CONTROL 1' or 'CON 1'):
                        #add bits
                        for cell in row[4:]:
                            bits.append(cell.internal_value)    
        #pass over cells that aren't a number, ie values that will never match an address
        except ValueError:
            pass
        except TypeError:
            pass 
```

有没有办法做到这一点？我知道使用`row[3]`D 列中的比较进行比较，但如果第一次不正确，我不知道如何上列。或者换句话说，改变行中的值`row[value]`，我需要知道什么值/如何在列中移动。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:36:53.133

```
bits = []
min_address = False
for row in ws.iter_rows(row_offset=4,column_offset=3):
    c = row[2]
    d = row[3]
    if not d.internal_value: #d will always have a value if the row isn't blank
        if min_address: 
            break #bits is what you want it to be now
        bits = [] #reset bits every time we hit a new row
        continue #this will just skip to next row

    for bits_cell in row[4:]:
        if bits_cell.internal_value:
            bits.append(bits_cell.internal_value)
    if c.internal_value:
        if c.internal_value == min(address):
            min_address = True #we set it to true, then kept going until blank row 
```

# c# - 如何以编程方式设置 HeaderedContentControl 的 HeaderTemplate 属性

> ID：11162356
> 
> 赞同：0
> 
> 时间：2012-06-22T18:49:39.960
> 
> 标签：c#, wpf, header

我在 WPF 中工作，我需要设置HeaderedContentControl的**标题的文本和工具提示。**所以我想做的是创建一个模板，如下所示：

```
 System.Windows.DataTemplate template = new System.Windows.DataTemplate();
 template.DataType = typeof(HeaderedContentControl);

 System.Windows.FrameworkElementFactory blockFactory = new System.Windows.FrameworkElementFactory(typeof(TextBlock));
 blockFactory.SetValue(TextBlock.TextProperty, "The Header Text");
 blockFactory.SetValue(TextBlock.ToolTipProperty, "The ToolTip");

 template.VisualTree = blockFactory;

 myHeaderedContentControl.HeaderTemplate = template; 
```

但是当我运行程序时，标题显示为空。我究竟做错了什么？

希望有人可以帮助，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:04:03.043

不知道为什么要以这种方式使用模板。为什么不使用文本块设置标题属性？

```
myHeaderedContentControl.Header = new TextBlock 
{
    Text = "Some text", 
    ToolTip = "Some tooltip"
}; 
```

此外，最好在 XAML 中定义所有内容：

```
<HeaderedContentControl x:Name="control">
    <HeaderedContentControl.Header>
        <TextBlock Text="Some text" ToolTip="Some tooltip"/>
    </HeaderedContentControl.Header>
</HeaderedContentControl> 
```

# c# - C# 列表 列出转换

> ID：11162361
> 
> 赞同：9
> 
> 时间：2012-06-22T18:49:55.660
> 
> 标签：c#, type-conversion

所有，我有没有精神（这不是问题）。我想转换`List<string[]>`为`List<object[]>`

```
List<string[]> parameters = GetParameters(tmpConn, name);
List<object[]> objParams = parameters.OfType<object[]>(); 
```

这不起作用，但除非我忘记了一些东西，否则应该可以使用这种方法进行转换（不需要 Lambdas）？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T18:51:38.020

你想使用类似的东西：

```
List<object[]> objParams = parameters.OfType<object[]>().ToList(); 
```

或在 C# 4.0 中，只需

```
List<object[]> objParams = parameters.ToList<object[]>(); 
```

或者

```
List<object[]> objParams = parameters.ConvertAll(s => (object[])s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T18:55:28.377

`OfType<string[]>`返回一个`IEnumerable<string[]>`，而不是一个`List<object[]>`。

`Enuemrable.OfType`过滤掉任何无效的演员表。您可能要考虑`Enumerable.Cast`改为，如果您犯了错误会抛出。如果`string[]`不继承自`object[]`（我真的不记得了），您可能需要调用`Enumerable.Select`以提供转换。

您肯定需要在某处进行 Enumerable.ToList 调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T18:58:18.430

由于数组协方差，在 .NET 4.0 中，您可以这样做：

```
// Works because:
// a) In .NET, a string[] is an object[]
// b) In .NET 4.0, an IEnumerable<Derived> is an IEnumerable<Base>              
var result = parameters.ToList<object[]>(); 
```

但请注意，除了字符串之外，您将无法对这些数组进行变异（因为数组协方差并不是真正安全的）。

如果你想要真正灵活的可写对象数组，你可以这样做：

```
var result = parameters.Select(array => array.ToArray<object>())
                       .ToList(); 
```

（或者）

```
var result = parameters.ConvertAll(array => array.ToArray<object>()); 
```

然后你可以用你喜欢的几乎任何类型的实例替换每个内部数组的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:57:48.867

这样做怎么样

```
List<string[]> sList = new List<string[]> {new []{"A", "B"}};
List<object[]> oList = sList.Cast<object[]>().ToList(); 
```

# sql-server-2005 - 具有潜在空字段的 COALESCE - SQL Server 2005

> ID：11162363
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:50:03.410
> 
> 标签：sql-server-2005, coalesce

问题是：当患者进入医生办公室时，他们可以测量 3 次血压。第一次是bp1；第二次是bp2，最后一次是bp3。

我需要找到病人最后一次检查血压的时间以及是什么时候。我想我可以使用 COALESCE(bp3,bp2,bp1)。然而; 系统并不总是将未使用的字段设为 NULL。有时，它们是空的。

数据的一个例子是：

患者 ID bp1 bp2 bp3 12345 140/90 134/30
12346 NULL 128/68 NULL

然后，我想我会使用 COALESCE(NULLIF(bp3,bp2),bp1) 但这不起作用，因为有时数据库显示 bp1 为 NULL 或 bp1 和 bp3 为 NULL，但 bp2 中有血压。

有人对如何解决这个问题有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:57:17.043

案子呢？我不知道数据类型，所以我猜是 INT

```
case when bp3 > 0 then bp3
     when bp2 > 0 then bp2
     else bp1
end as bp 
```

对于字符串（varchar）数据类型

```
case when len(bp3) > 0 then bp3
     when len(bp2) > 0 then bp2
     else bp1
end as bp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:59:23.687

您必须单独 NULLIF 每一列才能使 COALESCE 语句起作用。

例如，

```
COASLESCE(NULLIF(bp3, 0), NULLIF(bp2, 0), NULLIF(bp1, 0)) 
```

# sql - 在函数中使用查询结果（postgres 8.3）

> ID：11162365
> 
> 赞同：7
> 
> 时间：2012-06-22T18:50:13.847
> 
> 标签：sql, postgresql

我正在尝试做这样的事情：

```
select char_length(select text_field from table where key = 1) 
```

我认为这行不通，因为查询的返回类型是表，而不是字符串或文本变量。

有没有办法从 select 语句中指定结果的行、列？

编辑：我忽略了提到，char_length 是一个函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T19:01:41.167

将查询结果传递给函数时，只需将查询括在括号中：

```
select char_length((select text_field from table where key = 1)); 
```

外括号用于函数，内括号将查询转换为结果。

此语法并非特定于 postgres - 它适用于所有 SQL 服务器。

[此链接](http://sqlfiddle.com/#!1/81b7e/1)显示上述代码正确执行（感谢[@Fahim Parkar](https://stackoverflow.com/users/1066828/fahim-parkar)）

虽然，您可以将查询重构为不需要此语法，但这就是您“将查询结果传递给函数”的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:57:17.450

```
select char_length(text_field) from "table" where key = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:13:57.707

假设 key 是主键或唯一键，下面的第一个示例将起作用。它仅在子查询仅返回 1 行时才有效。第二个示例适用于 1 行或更多行。

```
select char_length((select text_field from table where key = 1));
select char_length(text_field) from table where key = 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:53:02.170

它应该是

```
select char_length(text_field) from "table" where key = 1 
```

我也相信，你的表名不是`table`.

# twitter-bootstrap - 使用 Twitter Bootstrap，如何自定义一个页面的 h1 文本颜色，而其他页面保持默认？

> ID：11162366
> 
> 赞同：24
> 
> 时间：2012-06-22T18:50:14.680
> 
> 标签：twitter-bootstrap, textcolor

在我的索引页面上，我希望 h1 文本颜色为白色并带有阴影，但我不想更改 h1 在其他页面上的默认行为。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-10-17T09:24:33.493

在引导程序 3 中，这里是更改文本颜色的类：

```
<p class="text-muted">...</p> //grey
<p class="text-primary">...</p> //light blue
<p class="text-success">...</p> //green
<p class="text-info">...</p> //blue
<p class="text-warning">...</p> //orangish,yellow
<p class="text-danger">...</p> //red 
```

[Helper classes - Contextual colors](http://getbootstrap.com/css/#helper-classes-colors)下的文档。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-22T19:07:31.320

您可以将自己的 id 或类添加到索引页面的 body 标记中，以使用自定义样式定位该页面上的所有元素，如下所示：

```
<body id="index">
   <h1>...</h1>
</body> 
```

然后，您可以使用您的类或 id 来定位您希望修改的元素，如下所示：

```
#index h1 {
   color:red;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-06T06:49:07.203

您还可以应用引导程序本身提供的默认“文本”类

```
 <h1 class='text-info'>Hey... I'm blue</h1> 
```

[http://twitter.github.io/bootstrap/base-css.html](http://twitter.github.io/bootstrap/base-css.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-22T00:33:16.357

在我自己仔细阅读之后（使用 Connor Leech 回答中的文本颜色类）

被警告要特别注意“navbar-text”类。

例如，要在导航栏上显示绿色文本，您可能很想这样做：

```
<p class="navbar-text text-success">Some Text Here</p> 
```

这行不通！！"navbar-text" 覆盖颜色并将其替换为标准导航栏文本颜色。

正确的做法是将文本嵌套在第二个元素 EG 中：

```
<p class="navbar-text"><span class="text-success">Some Text Here</span></p> 
```

或者在我的情况下（因为我想要强调文字）

```
<p class="navbar-text"><strong class="text-success">Some Text Here</strong></p> 
```

当你这样做时，你会得到与导航栏高度正确对齐的文本，你也可以改变颜色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-21T22:29:33.863

除了@Connor Leech 的回答。

如果您想创建自己的新自定义排版类型，请在您的 css 文件中定义以下内容。

```
.text-foo {
  .text-emphasis-variant(#FFFFFF);
} 
```

mixin`text-emphasis-variant`在 Bootstrap 的`mixins.less`文件中定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-28T04:56:18.397

bootstrap 3 中有带有上下文颜色的辅助类，请在 html 属性中使用这些类。

```
<p class="text-muted">...</p>
<p class="text-primary">...</p>
<p class="text-success">...</p>
<p class="text-info">...</p>
<p class="text-warning">...</p>
<p class="text-danger">...</p> 
```

**参考： http:** [//getbootstrap.com/css/#type](http://getbootstrap.com/css/#type)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-18T13:53:54.703

解决这个问题的最好方法是从使用他们的定制工具定制 Bootstrap 开始。

[http://getbootstrap.com/customize/](http://getbootstrap.com/customize/)

转到@headings-color 并将其从“继承”更改为您希望标题在整个站点中出现的内容（如果您喜欢默认设置，只需将其更改为#333）。

请注意，这将按照您的要求使您的所有标题保持相同的颜色。

现在，为了完成您想要的，在您进行此更改后，您现在可以在您自己的 CSS 中专门覆盖它们以将您自己的颜色应用到它们。我一直发现“继承”关键字在框架中很痛苦。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-05T13:15:37.420

您可以使用字体样式，例如：

```
 <font color="white"><h1>Header Content</h1></font> 
```

# multithreading - 如何在 perl 中创建共享变量（哈希数组）

> ID：11162368
> 
> 赞同：0
> 
> 时间：2012-06-22T18:50:17.357
> 
> 标签：multithreading, perl

> **可能重复：**
> [Perl：使用共享多维散列的线程](https://stackoverflow.com/questions/3702024/perl-threading-with-shared-multi-dimensional-hash)

我有一段看起来像这样的代码（过于简单）：

```
my @arr;
foreach $t (1..8){
     load_arr($t);
}

sub load_arr{
    my ($t) = @_;
    #get some data form somewhere
    #and put it into $a, $b, $c, $d
    $arr[$t]{$a}{$b}{$c} = $d;
} 
```

load_arr 实际上需要很长时间，因为它在大型数据集上循环（为简单起见未显示循环）

我想重写代码看起来像这样。

```
my @arr :shared;
my @threads;
foreach $t (1..8){
    push @threads, threads->create(\&load_arr,$t);
}
$->join for @threads;
.... 
```

问题是当我运行它时，我收到以下错误：

```
Thread 1 terminated abnormally: Invalid value for shared scalar at ... 
```

我正在寻求有关如何正确分享这些内容的帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:53:59.257

我用这样的东西。

```
#!/usr/bin/perl -w
use threads;
use threads::shared;
my  @ThreadInput  :shared=(); 
```

@ThreadInput 对我的脚本中生成的所有线程都是可见的。

# php - 在子文件夹中路由控制器

> ID：11162369
> 
> 赞同：0
> 
> 时间：2012-06-22T18:50:21.600
> 
> 标签：php, model-view-controller, codeigniter, url-routing

好的，所以我正在尝试为我的由 Code Igniter 提供支持的网络应用程序创建一个管理部分，但我很困惑。我听说 CodeIgniter 允许将控制器嵌套在控制器目录下的子文件夹中，但我无法让它工作。

例如，我的目录设置如下：

```
CI
 |-controllers
 |       |------admin
 |       |         |--main.php
 |       |         |--project.php
 |       |
 |       |--page.php
 |... 
```

我的路由是这样的：

```
$route['admin/'] = "admin/index";
$route['admin/index'] = "admin/index";
$route['admin/project/(:any)'] = "admin/project/$1";
$route['admin/project'] = "admin/project/list"; 
```

但除了普通的管理员路线外，没有其他路线有效。我是否缺少配置设置或其他内容？有人会向我解释子文件夹中的路由控制器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:19:12.067

实际上，我发现了我的问题。我一直在重构一些代码，在这样做时，我需要拆分一些文件。我只是使用“另存为...”并复制和粘贴，这样做，我忘了重命名我的类。我没有意识到这一点，因为我的文件名是正确的，但是它们分别包含的类的命名方式不同。

我有`class Admin extends CI_Controller{`，`admin/main.php`而不是`class Main`...

# ios - UIWebView 过渡到 Youtube 视频不保持横向

> ID：11162372
> 
> 赞同：2
> 
> 时间：2012-06-22T18:50:29.683
> 
> 标签：ios

我有一个正在开发的应用程序，并且我有一个横向的 youtube 频道的网络视图，但是当视频出现时，它以纵向播放。如何强制视频以横向全屏播放？

# python - 模块库中的 web.py 全局变量

> ID：11162378
> 
> 赞同：0
> 
> 时间：2012-06-22T18:50:40.603
> 
> 标签：python, singleton, web.py

存在三个模块。配置，主要和组件

## 配置文件

```
value = 0 
```

## 组件.py

```
import Cfg

class index:
    def GET(self):
        return Cfg.value 
```

## 主文件

```
from Test import Cfg
import Component

urls = ('/', 'Component.index')

if __name__ == '__main__':

    Cfg.value = 1
    app = web.application(urls, globals())
    app.run() 
```

Component.Index 的 Get 方法返回 0，但我期待 1。我错过了什么？

## 编辑#1

首先修改 main.py 进行测试：

```
from test import Cfg
import Component
import test

if __name__ == '__main__':
    importedCfg = id(Cfg)
    cfgInComponent = id(Component.Cfg)
    cfgInTest = id(test.Cfg)

    print importedCfg, cfgInComponent, cfgInTest
    print importedCfg == cfgInComponent == cfgInTest 
```

结果 ：

> 36202928 36203088 36202928 假

main.py 中的第二次修改：

```
import Cfg
import Component

if __name__ == '__main__':
    importedCfg = id(Cfg)
    cfgInComponent = id(Component.Cfg)
    # cfgInTest = id(test.Cfg)

    print importedCfg, cfgInComponent
    print importedCfg == cfgInComponent 
```

> 36858160 36858160 真

如果您不想创建多个实例，则应遵循第二种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:36:47.130

可能发生的情况是，如果您的 pythonpath 包含包的父目录和包的子目录，您最终可能会遇到 python 认为它导入了不同模块的情况，因为它以不同的方式获取它们。

这是一个完整的工作示例。

```
import tempfile
import sys
import os

base = tempfile.mkdtemp()
os.mkdir(os.path.join(base, 'examplepackage'))

f = open(os.path.join(base, 'examplepackage', '__init__.py'), 'w')
f.close()
f = open(os.path.join(base, 'examplepackage', 'bar.py'), 'w')
f.write('a = 1')
f.close()

sys.path.append(base)
sys.path.append(os.path.join(base, 'examplepackage'))

import examplepackage.bar as package_bar
import bar
bar.a = 2
print bar.a
print package_bar.a
print [m for m in sys.modules.keys() if 'bar' in m] 
```

你会看到它`bar.a`已经改变了，而且`package_bar.a`没有。您还将看到`sys.modules`缓存中有两个模块，名称中都有“bar”。该字典是导入后放置模块的地方，并键入它们的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:09:05.270

比较结果：

```
from Test import Cfg
import Component

if __name__ == '__main__':
    assert id(Cfg) == id(Component.Cfg) 
```

和

```
import Cfg
import Component

if __name__ == '__main__':
    assert id(Cfg) == id(Component.Cfg) 
```

这意味着执行“从模块”导入会创建不同的`Cfg`. （我也不知道这一点）。

Python 2.7 和 Python 3.2 中存在此行为（Python 2.6 未经测试）。

# html - 空文本区域将字符串放在数据库中

> ID：11162380
> 
> 赞同：0
> 
> 时间：2012-06-22T18:50:44.083
> 
> 标签：html

我将一些输入文本替换为 textarea。现在，当我将内容保存在数据库中时，textarea 正在数据库中保存一个字符串“”。由于它是一个空内容，我想在数据库中保存 null ，就像它发生在输入文本字段中一样。你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:54:37.497

这对你有用吗？

```
if(empty($_POST['textarea'])){
     $_POST['textarea']=NULL;
} 
```

您还需要确保 SQL 列支持 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:54:37.537

在将用户输入添加到数据库之前，您应该先对用户输入进行清理。`null`如果字符串为空，请让您的消毒剂在保存之前将其更改为。

您可能会从阅读有关[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的文章中受益（我假设您正在使用 PHP，但本主题适用于任何连接到数据库的代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T00:08:15.960

我的元素中有两个空格。看一下代码：

```
 <li class="comentarios">
            <label for="comentarios">Comentários:</label>
            <textarea type="text" rows="5" cols="50"> @comentarios </textarea>
        </li> 
```

# forms - 访问组合框选择需要更改标签控件中的值

> ID：11162382
> 
> 赞同：2
> 
> 时间：2012-06-22T18:50:53.377
> 
> 标签：forms, ms-access, combobox

在表单上，​​我有一个组合框，其中 RowSource 来自查询（特别是查询中的计算字段）。当用户进行选择时，我想使用来自同一查询的不同列更新同一表单上的标签，但当然与选择相关联。

我对 VBA 和编写查询以及诸如此类的东西很好，但我对 Access 表单不是很熟悉。

顺便说一句，我试图寻找这个问题的答案，但这非常困难，因为我不知道我想要做的这个东西到底叫什么。一个很好的链接到一个解释这一点的网站会非常好（如果它已经存在于其他地方，则无需在这里写一堆东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:22:33.893

在我的组合框的更新后事件中`cboUserID`，我可以将标签控件 , 设置`lblFoo`为组合的选定行中第二列的值。

```
Me.lblFoo.Caption = Me.cboUserID.Column(1) 
```

如果您的组合框绑定到表单记录源中的字段，您可能还希望从表单的 On Current 事件中执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:07:36.150

您可以使用 column 属性来引用组合的绑定列以外的任何内容。

```
Rowsource: SELECT ID, SName, FName FROM Table

Me.MyCombo.Column(2) 
```

这将返回 FName。

-- [http://msdn.microsoft.com/en-us/library/aa224084(v=office.11 ​​).aspx](http://msdn.microsoft.com/en-us/library/aa224084(v=office.11).aspx)

```
Me.MyLabel.Caption = Me.MyCombo.Column(2) 
```

# c# - 瞥见 MVC3 消失的 ViewMODEl 页面

> ID：11162384
> 
> 赞同：0
> 
> 时间：2012-06-22T18:51:15.707
> 
> 标签：c#, asp.net-mvc-3, entity-framework, glimpse

我有一个视图模型的强类型视图，并且自从我今天早上进行了一些代码更新以来，它的运行速度非常慢。我安装了 Glimpse MVC 以查看是否可以更好地了解可能发生的情况。Glimpse 适用于除 ViewModel 页面之外的每个页面 - 选项卡消失但不输出任何信息。

我的 Glimpse 日志文件说：

```
2012-06-22 13:50:29.5831|INFO|Glimpse.Core.Module|BeginRequest handling complete for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:29.5851|WARN|Glimpse.Mvc3.Plugin.Execution|get_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-06-22 13:50:29.5851|WARN|Glimpse.Mvc3.Plugin.Execution|set_Binders method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-06-22 13:50:29.5851|WARN|Glimpse.Mvc3.Plugin.Execution|GetType method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-06-22 13:50:29.6101|WARN|Glimpse.Mvc3.Plugin.Execution|MemberwiseClone method of System.Web.Mvc.ControllerActionInvoker type is not proxyable.|
2012-06-22 13:50:30.5192|INFO|Glimpse.Core.Module|PostRequestHandlerExecute handling complete for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:30.5212|INFO|Glimpse.Core.Module|PostReleaseRequestState handling complete for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:30.5462|WARN|Glimpse.Core.Plumbing.GlimpseSerializer|Serializer error|System.ObjectDisposedException--The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.--   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Newtonsoft.Json.Serialization.JsonArrayContract.CreateWrapper(Object list)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContract collectionValueContract)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract)
2012-06-22 13:50:30.5602|WARN|Glimpse.Core.Plumbing.GlimpseSerializer|Serializer error|System.ObjectDisposedException--The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.--   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Newtonsoft.Json.Serialization.JsonArrayContract.CreateWrapper(Object list)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContract collectionValueContract)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract)
2012-06-22 13:50:30.5602|INFO|Glimpse.Core.Module|Glimpse JSON payload created for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:30.5702|INFO|Glimpse.Core.Module|Glimpse output generated for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:30.5702|INFO|Glimpse.Core.Module|RequestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results) persisted|
2012-06-22 13:50:30.5702|INFO|Glimpse.Core.Module|EndRequest handling complete for requestId 64d0e726-a756-4c1a-a9c4-629231948aa2 (/SurveyResponse/Results)|
2012-06-22 13:50:30.6272|INFO|Glimpse.Core.Module|BeginRequest handling complete for requestId 44be221e-a7e2-4ac7-bd4c-29ae2b9ad12f (/Glimpse.axd)|
2012-06-22 13:50:30.6422|WARN|Glimpse.Core.Validator.GlimpseRequestValidator|Glimpse.Core.Validator.ContentTypeValidator invalided request (it will now be ignored) with id 44be221e-a7e2-4ac7-bd4c-29ae2b9ad12f (/Glimpse.axd)|
2012-06-22 13:50:30.6482|WARN|Glimpse.Core.Validator.GlimpseRequestValidator|Glimpse.Core.Validator.ContentTypeValidator invalided request (it will now be ignored) with id 44be221e-a7e2-4ac7-bd4c-29ae2b9ad12f (/Glimpse.axd)|
2012-06-22 13:50:30.6482|WARN|Glimpse.Core.Validator.GlimpseRequestValidator|Glimpse.Core.Validator.ContentTypeValidator invalided request (it will now be ignored) with id 44be221e-a7e2-4ac7-bd4c-29ae2b9ad12f (/Glimpse.axd)|
2012-06-22 13:50:30.6642|WARN|Glimpse.Core.Validator.GlimpseRequestValidator|Glimpse.Core.Validator.ContentTypeValidator invalided request (it will now be ignored) with id 44be221e-a7e2-4ac7-bd4c-29ae2b9ad12f (/Glimpse.axd)| 
```

导致性能不佳的代码是在我的 group by 查询中添加这些 Select 语句：

```
 var data = from SurveyResponseModel in db.SurveyResponseModels
                       group SurveyResponseModel by SurveyResponseModel.MemberId into resultCount
                       select new ResultsViewModel()
                       {
                           MemberId = resultCount.Key,
                           PatientFollowUpResult = db.SurveyResponseModels.Count(r => r.PatientFollowUp),
                           ChangeCodingPracticeResult = db.SurveyResponseModels.Count(r => r.ChangeCodingPractice),

                           ChangesOthersResult = resultCount.Select(r => r.ChangesOthers),

                           YesBarriersOthersResult = resultCount.Select(r => r.YesBarriersOthers),

                           AddressBarriersOthersResult = resultCount.Select(r => r.AddressBarriersOthers),
                           TotalResponsesResult = db.SurveyResponseModels.Count(),
                       }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:02:23.870

我想说这里发生的事情是 Glimpse 正在触发模型中属性的延迟加载。不幸的是，Glimpae 目前不支持这种情况。要测试是否是这种情况，请尝试禁用视图选项卡，看看您是否有同样的问题。

# java - Java webapp 过滤器导致无法在 Tomcat 上启动服务器

> ID：11162386
> 
> 赞同：0
> 
> 时间：2012-06-22T18:51:22.320
> 
> 标签：java, tomcat, web-applications, servlet-filters

我的 Tomcat 上有 3 个应用程序，并且一切正常，导致了这个混乱。在开始之前，我需要重新配置我的 tomcat 日志记录，因为这可能无法正常工作，但我觉得我的应用程序无法启动，原因可能是我今天作为第一个计时器实现的过滤器配置错误：

```
package org.thejarbar.web.filters;

import java.io.*;
import java.util.regex.Pattern;
import javax.servlet.*;
import javax.servlet.http.*;

public final class JSessionFilter implements Filter {

    public void init(FilterConfig filterConfigObj) {

    }

    public void doFilter(ServletRequest _req, ServletResponse _res,
                         FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) _req;
        HttpServletResponse res = (HttpServletResponse) _res;
        String url =req.getRequestURL().toString();

        if(Pattern.compile(Pattern.quote("jsessionid"), Pattern.CASE_INSENSITIVE).matcher(url).find()){

            String redirectURL = "http://thejarbar.org";
            res.setStatus(res.SC_MOVED_PERMANENTLY);
            res.setHeader("Location",redirectURL);
            res.setHeader( "Connection", "close" );
        }

        chain.doFilter(req, res);
    }

    public void destroy() { }
} 
```

在 web.xml 中配置：

```
<filter>
    <filter-name>sessionFilter</filter-name>
    <filter-class>org.thejarbar.web.filters.JSessionFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>sessionFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我怀疑存在内存问题，但不知道为此在我的 Unix 客户机上运行什么命令，并且删除我的主应用程序旁边的最大应用程序并不能解决这个问题（这应该释放足够的资源）。

在我发布的内容中是否有任何可见的东西可以归咎和纠正？应用程序：[在此处输入链接描述](http://thejarbar.org)并在此处[输入链接描述](http://buhaugane.com)似乎已部署但无法访问（如果您尝试）。

在我的开发系统上一切运行顺利。

**编辑**Managed 以再次获取日志文件：

```
INFO | jvm 1 | 2012/06/23 01:19:58 | Jun 23, 2012 1:19:58 AM org.apache.catalina.startup.Catalina start
INFO | jvm 1 | 2012/06/23 01:19:58 | SEVERE: Catalina.start:
INFO | jvm 1 | 2012/06/23 01:19:58 | org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.startup.Catalina.start(Catalina.java:624)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
INFO | jvm 1 | 2012/06/23 01:19:58 | at java.lang.reflect.Method.invoke(Method.java:597)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
INFO | jvm 1 | 2012/06/23 01:19:58 | at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
INFO | jvm 1 | 2012/06/23 01:19:58 | at java.lang.reflect.Method.invoke(Method.java:597)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.tanukisoftware.wrapper.WrapperStartStopApp.run(WrapperStartStopApp.java:264)
INFO | jvm 1 | 2012/06/23 01:19:58 | at java.lang.Thread.run(Thread.java:662)
INFO | jvm 1 | 2012/06/23 01:19:58 | Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
INFO | jvm 1 | 2012/06/23 01:19:58 | at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:16:53.960

如果您的“主站点”文件是 Tomcat 的`conf/web.xml`，那么您正在编辑错误的文件。恢复原状`conf/web.xml`（或从 下载新副本`tomcat.apache.org`），然后`WEB-INF/web.xml`改为编辑您的 webapp 文件。这样，您`Filter`将从您的 webapp 加载，`WEB-INF/classes`而`WEB-INF/lib/*.jar`不是尝试为Tomcat目录中的*所有应用程序加载它。*`lib/`显然，您需要确保您`org/thejarbar/web/filters/JSessionFilter.class`的`WEB-INF/classes`文件位于`WEB-INF/lib`.

另请注意，您在过滤器中所做的工作比严格必要的要多：您不需要...

1.  为每个请求编译一个正则表达式模式（执行一次）
2.  完全使用正则表达式模式*（*您可以使用简单的子字符串搜索）
3.  `;jsessionid=`如果您真的不想接受带有嵌入会话 ID 的 URL，您可能应该寻找
4.  您需要在`return`其中声明，否则您将返回一个`Redirect`加号，*仍然*处理原始请求
5.  有一种 API 方法已经可以告诉您您想知道的内容（见下文）

试试这个：

```
public void doFilter(ServletRequest _req, ServletResponse _res,
                     FilterChain chain) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) _req;
    HttpServletResponse res = (HttpServletResponse) _res;

    if(request.isRequestedSessionIdFromURL())
    {
        String redirectURL = "http://thejarbar.org";
        res.setStatus(res.SC_MOVED_PERMANENTLY);
        res.setHeader("Location",redirectURL);
        res.setHeader( "Connection", "close" );
    }
    else
    {
        chain.doFilter(req, res);
    }
} 
```

这应该比您最初发布的内容要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:25:54.300

我解决了我的问题。我的托管服务提供商有关于我的 tomcat 日志记录位置的过时文档。即我`catalina.out`在`var/log/tomcat7`location 下，无处可下`/opt/tomcat7`。

查看日志我看到了`UnsupportedClassVersion`异常并下载了一个与我的生产环境匹配的jdk。带来不便敬请谅解。

# javascript - 在固定定位的 div 上隐藏/显示 Jquery 的问题

> ID：11162387
> 
> 赞同：3
> 
> 时间：2012-06-22T18:51:25.837
> 
> 标签：javascript, html, css, show-hide

我在网页/视点底部有一个粘性页脚，以及应该隐藏/显示菜单的可点击链接“切换菜单”。问题是我无法隐藏菜单，我发现问题出在应该隐藏/显示的元素的 CSS 中。这是固定位置 {position:fixed;} ...当我删除“固定”时，菜单的隐藏和显示工作 100% 但显然菜单不再位于浏览器的底部。

我怎样才能使用固定定位来完成这项工作？

显示/隐藏的 Javascript 如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" 
type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

    $(".slidingDiv").show();
    $(".show_hide").show();

$('.show_hide').click(function(){
$(".slidingDiv").slideToggle();
});

});

</script> 
```

HTML 类似于：

```
<div id="stick_footer_title"><a class="show_hide" href="#">Toggle Menu
 &#x25BC;</a></div>
<div class="slidingDiv">
<div id="stickyfooter">

<ul id="footer_menu"> 
    <li class="imgmenu"><a href="#"></a></li>

    <li><a href="#intro">Intro</a></li>
    <li><a href="#photos">Photos</a></li>

</ul>
</div>
    </div> 
```

仅供参考：位置：修复；css 适用于 STICKYFOOTER div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:02:03.297

如果您隐藏“stickyfooter” div 而不是容器会怎样？这样，容器将始终固定（并显示），但是当您隐藏内容时，它不会显示任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:33:31.983

如果可以，将固定位置从 #stickyfooter 移动到 .slidingDiv，或者在 #stickyfooter 中创建一个新元素，您将隐藏/显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:58:15.020

你可以尝试给出一个持续时间参数吗？

像这样：

```
$(".slidingDiv").slideToggle("slow"); 
```

# php - PHP MYSQL 组合的转换问题

> ID：11162395
> 
> 赞同：0
> 
> 时间：2012-06-22T18:51:53.463
> 
> 标签：php, mysql, sql, casting

我觉得我的选角有问题。

```
$db = mysqli_connect('127.0.0.1','root','password','test');
if (! $db) { die("Can't connect: " . mysqli_connect_error( )); }

$new_table = $_POST["newtablename"];
$old_table = $_POST["oldtablename"];
$numberRows = $_POST["numberrows"];
$startRow = $_POST["startrow"];
$counter = 0;

drop_table($db, $new_table);

create_table($db, $new_table);

for($counter = 0; $counter < $numberRows; $counter += 1)
{
   $currentRow = getRow($db, $old_table);
   $ID = $currentRow(1);
   $Partner = $currentRow(2);
   $Merchant = $currentRow(3);
}

function getRow($db, $old_table)
{
    $select = "SELECT ID, Partner, Merchant FROM " .$old_table;
    $q = mysqli_query($db, $select);
    $row = mysqli_fetch_row($q);

    return $row;
}

 function create_table($db, $new_table){
    $create = "CREATE TABLE " .$new_table. "(ID INT, Partner VARCHAR(20), Merchant       VARCHAR(30))";

    $q = mysqli_query($db, $create);
} 

 function drop_table($db,$new_table){
     $drop = "DROP TABLE IF EXISTS " .$new_table;
     $q = mysqli_query($db, $drop);
     } 
```

这是我得到的错误

致命错误：函数名称必须是第 26 行 C:\xampp\htdocs\myfiles\mysqli_combined_functions.php 中的字符串

第 26 行是我设置 $ID = $currentRow(1) 的地方。我的印象是该行将作为变量数组返回，并且使用正确的数字我可以访问我想要的变量。假设那是真的（如果不是，请告诉我）然后我认为它正在以 INT 的形式读取 ID，这就是我拥有的 SQL 表中的内容。有人可以帮我把它转换成字符串吗？或者我完全错过了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:53:16.450

您使用方括号来访问数组的元素。

```
$currentRow[1] 
```

请记住，第一个索引也将为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:54:07.037

不铸造。这些是数组索引，请注意方括号。`[` `]`

```
 $currentRow = getRow($db, $old_table);
   $ID = $currentRow[1];
   $Partner = $currentRow[2];
   $Merchant = $currentRow[3]; 
```

# python - 在 wxPython 中的 matplotlib 上弹出注释

> ID：11162401
> 
> 赞同：1
> 
> 时间：2012-06-22T18:52:16.873
> 
> 标签：python, annotations, matplotlib, wxpython, matplotlib-basemap

我设置了两个面板 wxPython GUI。在我的右侧面板中，我有一个使用 Basemap 的地图显示。在这张（美国的）底图上，我绘制了不同城市的散点图。我希望能够单击这些点并在我的 GUI 中有一个弹出窗口，提供与我选择的那个点相关的一些信息（例如城市、纬度/经度等——我会存储所有这些信息以列表或其他方式）。

我遇到了 AnnoteFinder，但这似乎在我的 GUI 中不起作用（如果我使用 itelf 的 Basemap 而不是在我的 2 面板 GUI 中，它将起作用）。此外，这只是将一些文本放在点的顶部——我宁愿显示一个小窗口。

到目前为止我的代码示例：

```
#Setting up Map Figure
self.figure = Figure(None,dpi=75)
self.canvas = FigureCanvas(self.PlotPanel, -1, self.figure)
self.axes = self.figure.add_axes([0,0,1,1],frameon=False)
self.SetColor( (255,255,255) )

#Basemap Setup
self.map = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64,
                    urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45,
                    lon_0=-95, resolution='h', area_thresh=10000,ax=self.axes)
self.map.drawcoastlines()
self.map.drawcountries()
self.map.drawstates()
self.figure.canvas.draw()

#Set up Scatter Plot
m = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64,
            urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45,
            lon_0=-95, resolution='h', area_thresh=10000,ax=self.axes)

x,y=m(Long,Lat)

#Scatter Plot (they plot the same thing)
self.map.plot(x,y,'ro')
self.map.scatter(x,y,90)

self.figure.canvas.draw() 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:10:02.413

看看[这个答案](https://stackoverflow.com/questions/4652439/is-there-a-matplotlib-equivalent-of-matlabs-datacursormode)。基本上，您设置了一个在图表上创建注释的选择事件。此注释可以作为工具提示样式的文本框弹出。

请注意，这不会产生真正的 GUI“窗口”（即，对话框或其他带有关闭按钮、标题栏等的控件），而只是图本身的注释。但是，通过查看代码，您可以看到它如何确定您单击的艺术家（例如，点）。一旦你有了这些信息，你就可以用它运行任何你想要的代码，例如创建一个 wxPython 对话框而不是注释。

**编辑**关于最后几行的问题：根据您的代码，看起来您想要这样做：

```
pts = self.map.scatter(x, y, 90)
self.figure.canvas.mpl_connect('pick_event', DataCursor(plt.gca()))
pts.set_picker(5) 
```

**另一个编辑**是关于在注释中有不同文本的问题：您可能需要稍微使用事件对象来提取您想要的信息。如[http://matplotlib.sourceforge.net/users/event_handling.html#simple-picking-example](http://matplotlib.sourceforge.net/users/event_handling.html#simple-picking-example)所述，不同的艺术家类型（即不同类型的图）将提供不同的事件信息。

我有一些旧代码几乎完全符合您的描述（单击地图上的某个点时显示城市名称）。我不得不承认我不记得它到底是如何工作的，但是我的代码在 DataCursor 中有这个：

```
def __call__(self, event):
    self.event = event
    xdata, ydata = event.artist._offsets[:,0], event.artist._offsets[:,1]
    #self.x, self.y = xdata[event.ind], ydata[event.ind]
    self.x, self.y = event.mouseevent.xdata, event.mouseevent.ydata
    if self.x is not None:
        city = clim['Name'][event.ind[0]]
        if city == self.annotation.get_text() and self.annotation.get_visible():
            # You can click the visible annotation to remove it
            self.annotation.set_visible(False)
            event.canvas.draw()
            return
        self.annotation.xy = self.x, self.y
        self.annotation.set_text(city)
        self.annotation.set_visible(True)
        event.canvas.draw() 
```

`clim['Name']`是城市名称列表，我可以使用它来索引该列表，`event.ind`以获取与所选点对应的城市名称。根据数据的格式，您的代码可能需要稍有不同，但这应该会给您一个想法。

# lda - LDA 主题建模 - 训练和测试

> ID：11162402
> 
> 赞同：41
> 
> 时间：2012-06-22T18:52:19.667
> 
> 标签：lda, topic-modeling

我已经阅读了 LDA，并且我了解当一个人输入一组文档时如何生成主题的数学原理。

参考资料说，LDA 是一种算法，给定一组文档，仅此而已（无需监督），可以发现该集合中文档表达的“主题”。因此，通过使用 LDA 算法和吉布斯采样器（或变分贝叶斯），我可以输入一组文档，作为输出，我可以获得主题。每个主题都是一组具有指定概率的术语。

我不明白的是，如果以上是真的，那为什么很多主题建模教程都在谈论将数据集分为训练集和测试集呢？

谁能解释一下 LDA 如何用于训练模型的步骤（基本概念），然后可以用来分析另一个测试数据集？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-25T22:51:01.733

将数据拆分为训练集和测试集是评估学习算法性能的常见步骤。对于监督学习来说，它更加明确，您在训练集上训练模型，然后查看它在测试集上的分类与真实类标签的匹配程度。对于无监督学习，这样的评估有点棘手。在主题建模的情况下，性能的常见衡量标准是[困惑](http://en.wikipedia.org/wiki/Perplexity)度。您在训练集上训练模型（如 LDA），然后您会看到模型在测试集上的“困惑”程度。更具体地说，您测量测试文档的字数如何由主题所代表的字分布表示。

困惑度有利于模型或参数设置之间的相对比较，但它的数值并没有多大意义。我更喜欢使用以下有点手动的评估过程来评估主题模型：

1.  *检查主题*：查看每个主题中可能性最高的单词。它们听起来像是形成了一个有凝聚力的“主题”还是只是一些随机的词组？
2.  *检查主题分配*：从训练中拿出一些随机文档，看看 LDA 分配给他们的主题。手动检查指定主题中的文档和最热门的单词。看起来主题是否真的描述了文档实际上在谈论什么？

我意识到这个过程并不像人们想象的那么好和量化，但老实说，主题模型的应用也很少是量化的。我建议根据您应用的问题评估您的主题模型。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T08:23:14.117

使用训练数据进行评估可能会受到过度拟合的一般规则也适用于像 LDA 这样的无监督学习——尽管它并不那么明显。LDA 优化了一些目标，即。生成概率，在训练数据上。可能在训练数据中，两个词表示一个主题，比如美国政治的“白宫”。假设这两个词只出现一次（在训练数据中）。然后，如果您对训练数据进行评估，那么任何完全依赖于它们仅指示政治而没有其他任何东西的假设的算法都会做得很好。但是，如果还有其他主题，例如“架构”，那么您可能会质疑，这是否真的是正确的学习内容。拥有一个测试数据集可以在一定程度上解决这个问题：

1.  由于“白宫”关系在训练数据中似乎很少见，因此在测试数据中可能根本不会出现。如果是这样，评估会显示您的模型在多大程度上依赖于虚假关系，与更一般的关系相比，这些虚假关系实际上可能没有帮助。
2.  “白宫”出现在测试数据中，比如“美国政治”出现一次，建筑文档中出现一次。那么它只表明“美国政治”的假设太强了，性能指标会更差，表明你的模型过度拟合。

# java - Java DateFormat 格式和解析给出了意想不到的结果

> ID：11162404
> 
> 赞同：0
> 
> 时间：2012-06-22T18:52:21.733
> 
> 标签：java, simpledateformat

运行以下代码时出现意外输出，

```
DateFormat df = new SimpleDateFormat("YYYY-MM-dd");
Date date = df.parse("2012-06-23");
System.out.println(df.format(date)); 
```

输出 : 2012-01-01

我期待 2012-06-23 作为输出，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:53:34.110

yyyy 应该全部小写，试试看是否有区别...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:02:49.857

请参阅 Java 中的此[日期和时间](http://www.tutorialspoint.com/java/java_date_time.htm)。您将获得使用的日期格式

使用“y”而不是“Y”。

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
Date date = df.parse("2012-06-23");
System.out.println(df.format(date)); 
```

# bash - 使用 Bash 打开并将数据写入文本文件？

> ID：11162406
> 
> 赞同：317
> 
> 时间：2012-06-22T18:52:22.533
> 
> 标签：bash, shell

如何在 Linux 中通过 shell 脚本自动将数据写入文本文件？

我能够打开文件。但是，我不知道如何向它写入数据。

* * *

## 回答 #1

> 赞同：528
> 
> 时间：2012-06-22T18:59:35.780

简短的回答：

```
echo "some data for the file" >> fileName 
```

但是，[`echo`不能以理想的方式处理行尾字符 (EOF)](https://unix.stackexchange.com/a/58312/364698)。因此，如果您要追加多行，请使用`printf`：

```
printf "some data for the file\nAnd a new line" >> fileName 
```

`>>`and运算符对于*重定向命令的输出*非常`>`有用，它们可以与多个其他 bash 命令一起使用。

 ** * *

## 回答 #2

> 赞同：165
> 
> 时间：2013-08-14T08:40:33.233

```
#!/bin/sh

FILE="/path/to/file"

/bin/cat <<EOM >$FILE
text1
text2 # This comment will be inside of the file.
The keyword EOM can be any text, but it must start the line and be alone.
 EOM # This will be also inside of the file, see the space in front of EOM.
EOM # No comments and spaces around here, or it will not work.
text4 
EOM 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-06-22T22:57:44.310

您可以将命令的输出重定向到文件：

```
$ cat file > copy_file 
```

或附加到它

```
$ cat file >> copy_file 
```

如果你想直接写命令是`echo 'text'`

```
$ echo 'Hello World' > file 
```

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2014-04-24T20:58:52.000

```
#!/bin/bash

cat > FILE.txt <<EOF

info code info 
info code info
info code info

EOF 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2017-05-27T21:50:39.237

我知道这是一个该死的老问题，但是由于 OP 是关于脚本的，而且由于 google 把我带到这里的事实，还应该提到同时打开文件描述符以进行读取和写入。

```
#!/bin/bash

# Open file descriptor (fd) 3 for read/write on a text file.
exec 3<> poem.txt

    # Let's print some text to fd 3
    echo "Roses are red" >&3
    echo "Violets are blue" >&3
    echo "Poems are cute" >&3
    echo "And so are you" >&3

# Close fd 3
exec 3>&- 
```

然后`cat`终端上的文件

```
$ cat poem.txt
Roses are red
Violets are blue
Poems are cute
And so are you 
```

此示例导致打开文件poem.txt 以对文件描述符3 进行读写。它还表明*nix 框知道更多的fd，而只是stdin、stdout 和stderr (fd 0,1,2)。它实际上有很多。通常可以在其中找到内核可以分配的最大文件描述符数，`/proc/sys/file-max`或者`/proc/sys/fs/file-max`使用任何高于 9 的 fd 都是危险的，因为它可能与 shell 内部使用的 fd 冲突。所以不要打扰，只使用 fd 的 0-9。如果您在 bash 脚本中需要更多 9 个文件描述符，则无论如何都应该使用不同的语言 :)

无论如何，fd 可以以许多有趣的方式使用。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2016-01-14T04:16:52.583

我喜欢这个答案：

```
cat > FILE.txt <<EOF

info code info 
...
EOF 
```

但建议`cat >> FILE.txt << EOF`您是否只想在文件末尾添加一些内容而不清除已经存在的内容

像这样：

```
cat >> FILE.txt <<EOF

info code info 
...
EOF 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-05-07T11:47:29.650

根据@lycono 的要求，将我的评论作为答案

如果您需要使用 root 权限执行此操作，请执行以下操作：

```
sudo sh -c 'echo "some data for the file" >> fileName' 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2018-06-02T06:31:09.697

对于此处文档不可用的环境（`Makefile`、`Dockerfile`等），您通常可以使用`printf`合理易读且有效的解决方案。

```
printf '%s\n' '#!/bin/sh' '# Second line' \
    '# Third line' \
    '# Conveniently mix single and double quotes, too' \
    "# Generated $(date)" \
    '# ^ the date command executes when the file is generated' \
    'for file in *; do' \
    '    echo "Found $file"' \
    'done' >outputfile 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-11-21T04:24:45.640

我认为有一些非常好的答案，但没有对所有可能性的简明总结；因此：

大多数答案背后的核心原则是[重定向](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)。两个是写入文件的重要重定向运算符：

## 重定向输出：

`echo 'text to completely overwrite contents of myfile' > myfile`

## 附加重定向输出

`echo 'text to add to end of myfile' >> myfile`

## 这里的文件

`echo 'text'`其他人提到，您也可以通过“Here Document”交互式地写入文件，而不是从固定输入源（如. 那些答案，例如

`cat > FILE.txt <<EOF`或者`cat >> FILE.txt <<EOF`

使用相同的重定向运算符，但通过“Here Documents”添加另一层。在上述语法中，您通过`cat`. 仅在给交互式输入提供一些特定字符串（在本例中为“EOF”）后才进行写入，但这可以是任何字符串，例如：

`cat > FILE.txt <<'StopEverything'`或者`cat >> FILE.txt <<'StopEverything'`

也可以。这里 Documents 还寻找各种分隔符和其他有趣的解析字符，因此请查看文档以获取更多信息。

## 这里字符串

有点令人费解，更多的是理解重定向和 Here Documents 语法的练习，但您可以将 Here Document 样式语法与标准重定向运算符组合成 Here String：

重定向 cat 输入的输出

`cat > myfile <<<'text to completely overwrite contents of myfile'`

附加 cat 输入的重定向输出

`cat >> myfile <<<'text to completely overwrite contents of myfile'`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-03T16:04:15.223

如果你使用变量，你可以使用

```
first_var="Hello"
second_var="How are you" 
```

如果要连接两个字符串并将其写入文件，请在下面使用

```
echo "${first_var} - ${second_var}" > ./file_name.txt 
```

您的 file_name.txt 内容将是“你好 - 你好吗”

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-05T11:55:42.247

也可以使用here document和vi，下面的脚本生成一个3行和变量插值的FILE.txt

```
VAR=Test
vi FILE.txt <<EOFXX
i
#This is my var in text file
var = $VAR
#Thats end of text file
^[
ZZ
EOFXX 
```

然后文件将有3行如下。"i" 是启动 vi 插入模式，类似地用 Esc 和 ZZ 关闭文件。

```
#This is my var in text file
var = Test
#Thats end of text file 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-02T07:21:36.750

这种方法有效并且是最好的

```
cat > (filename) <<EOF
Text1...
Text2...
EOF 
```

基本上，文本将搜索关键字“EOF”，直到它终止写入/附加文件

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2019-11-27T05:22:52.797

这是我的回答。$ 猫文件 > 复制文件*

# android - Android：SQLite 数据库——添加和游标

> ID：11162407
> 
> 赞同：0
> 
> 时间：2012-06-22T18:52:22.980
> 
> 标签：android, database, cursor

我试图了解游标是如何工作的，但我不理解这段代码的一部分——（从[http://www.vogella.com/articles/AndroidSQLite/article.html 摘录](http://www.vogella.com/articles/AndroidSQLite/article.html)）

```
public Comment createComment(String comment) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_COMMENT, comment);
        long insertId = database.insert(MySQLiteHelper.TABLE_COMMENTS, null,
                values);
        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
        cursor.moveToFirst();
        Comment newComment = cursorToComment(cursor);
        cursor.close();
        return newComment;
    } 
```

有人可以解释一下这里发生了什么吗？这就是我认为正在发生的事情 - 他正在将值插入到名为 comment 的列下的表中。然后，他进行查询，将光标设置到他在表中添加评论的位置。

然后我对他为什么做 cursor.moveToFirst() 感到困惑。光标不是指向他刚刚添加的当前评论吗？我以为他正试图返回他刚刚插入表格的评论，所以他不能删除 moveToFirst() 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:56:48.400

```
 Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null); 
```

返回结果是游标对象。

```
 cursor.moveToFirst(); 
```

确保您指向游标对象（或）游标中的第一个元素不为空。

```
 Comment newComment = cursorToComment(cursor); 
```

调用另一个方法来遍历游标并执行方法内部的逻辑编码，返回`Comment`对象。

```
 cursor.close(); 
```

关闭光标，使其符合 GC 条件，并且内存将被释放。

```
 return newComment; 
```

将评论对象返回给调用者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:58:23.783

[来自http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)的文档

查询返回：“一个光标对象，位于第一个条目之前。”

然后，[http://developer.android.com/reference/android/database/Cursor.html](http://developer.android.com/reference/android/database/Cursor.html)

moveToFirst() 说：“将光标移动到第一行。”

# grails - Grails withFormat 执行

> ID：11162411
> 
> 赞同：0
> 
> 时间：2012-06-22T18:52:50.773
> 
> 标签：grails

我在向**Grails 1.3.7**发送带有`format=json`查询字符串参数的 POST 时遇到问题。

根据 Grails`withFormat`文档 - [http://grails.org/doc/1.3.7/ref/Controllers/withFormat.html](http://grails.org/doc/1.3.7/ref/Controllers/withFormat.html)，此参数应该导致`withFormat`闭包在其中执行`json`闭包。

IE：

```
withFormat {
    json {
        // this logic should be executed if the query string has format=json
    }
} 
```

在这种情况下，控制器方法服务于多种内容类型。有一些逻辑应该只对表单运行，所以`withFormat`像这样添加了一个闭包：

```
withFormat {
    form {
        // form specific logic
    }
} 
```

注意没有`json`阻塞，因为如果这是一个 json 请求，就没有相应的逻辑可以执行。问题是即使在我们发送`format=json`查询字符串的请求上，表单块也正在执行。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:52:51.600

显然，如果您没有在 withFormat 中指定匹配的闭包，Grails 仍然会运行一个。Grails 文档确实指出，如果请求格式为“全部”，它将执行 withFormat 块中的第一个闭包。我想如果您的请求格式与 withFormat 块中的一个闭包不匹配，Grails 默认运行第一个闭包。

为了解决这个问题，我们在 withFormat 中放置了一个空的 json 闭包，从那时起 Grails 会按预期处理所有内容。

```
withFormat {
    json {
        // do nothing
    }
    form {
        // form specific logic
    }
} 
```

# python - 使用 lxml 解析 xml 块

> ID：11162421
> 
> 赞同：1
> 
> 时间：2012-06-22T18:53:28.310
> 
> 标签：python, xml, lxml

给定以下xml：

```
<language>en-US</language>
<provider>VenturesLLC</provider>
<video>
    <original_spoken_locale>en-US</original_spoken_locale>
    <vendor_offer_code>TEST_VENDOR</vendor_offer_code>
    <release_date>2011-01-15</release_date>
    <title>Moving Forward</title>
    <vendor_id>ASDF_ING_2012</vendor_id>
</video> 
```

我正在寻找检索**整个** `<video>`块。但是，当我这样做时：

```
>>> f=open('metadata.xml')
>>> contents=f.read()
>>> node=etree.fromstring(contents)
>>> node.xpath("//*[local-name()='video']")[0].text
'\n 
```

请注意，如果我做了类似的事情，`node.xpath("//*[local-name()='original_spoken_locale']")[0].text`我会得到正确的`'en-US'`. 我将如何提取这个完整的文本以便我可以得到：

```
text = """    
<video>
    <original_spoken_locale>en-US</original_spoken_locale>
    <vendor_offer_code>TEST_VENDOR</vendor_offer_code>
    <release_date>2011-01-15</release_date>
    <title>Moving Forward</title>
    <vendor_id>ASDF_ING_2012</vendor_id>
</video>""" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:03:28.883

您的`.text`呼叫不起作用，因为您的视频节点没有文本 - 它有其他节点子节点。您需要使用将这些节点转换为字符串`tostring`

```
In [1]: from lxml import etree

In [2]: xml = '''<xml>
   ...: <language>en-US</language>
   ...: <provider>VenturesLLC</provider>
   ...: <video>
   ...:     <original_spoken_locale>en-US</original_spoken_locale>
   ...:     <vendor_offer_code>TEST_VENDOR</vendor_offer_code>
   ...:     <release_date>2011-01-15</release_date>
   ...:     <title>Moving Forward</title>
   ...:     <vendor_id>ASDF_ING_2012</vendor_id>
   ...: </video></xml>'''

In [3]: tree = etree.fromstring(xml)

In [4]: vid = tree.xpath('//video')[0]

In [5]: etree.tostring(vid, pretty_print=True)
Out[5]: '<video>\n  <original_spoken_locale>en-US</original_spoken_locale>\n  <vendor_offer_code>TEST_VENDOR</vendor_offer_code>\n  <release_date>2011-01-15</release_date>\n  <title>Moving Forward</title>\n  <vendor_id>ASDF_ING_2012</vendor_id>\n</video>\n'

In [6]: print _
<video>
  <original_spoken_locale>en-US</original_spoken_locale>
  <vendor_offer_code>TEST_VENDOR</vendor_offer_code>
  <release_date>2011-01-15</release_date>
  <title>Moving Forward</title>
  <vendor_id>ASDF_ING_2012</vendor_id>
</video> 
```

# php - php通过html标签发布

> ID：11162422
> 
> 赞同：0
> 
> 时间：2012-06-22T18:53:28.467
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:58:37.347

使用`<a>`标签发出 POST 请求的唯一方法是让它通过 javascript 提交表单：

```
<form method="post" id="hidden_form" name="hidden_form" action="script.php">
    <input type="hidden" name="foldername" value="<?php echo $b ?>" />
</form>

...

<a href="#" onclick="document.getElementById('hidden_form').submit(); return false">post me</a> 
```

您还可以从 javascript 更新隐藏元素的值，因此当您单击特定链接时，它会将其中一个值设置为特定于该链接的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:00:25.933

GET 有什么问题？

```
<a href="somefile.php?variable=value&anothervar=awesome">Click me</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:59:10.320

唯一的方法是通过 JS 来实现。您可以发送指定 POST 的 AJAX 请求，也可以创建隐藏表单并提交。这是一个例子

```
document.getElementById('my-link').onclick = function(){
    // Code to submit the hidden form or to send an AJAX request specifying POST
    return false; // to prevent the default behavior
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:59:56.987

我知道用香草锚标签无法做到这一点。您可以在 javascript 中建立点击事件处理程序来提交 XHR 请求。但是，我过去通过将多个表单标签与单个提交实体（`<input type='submit'`、`<button type='submit'`等）一起使用来实现这一点。

您的表格如下所示：

```
<form action="{$_SERVER['PHP_SELF']}" method="post">
    <input type="hidden" name="foldername" value="YOURVALUEHERE">
    <input type="submit">
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:00:10.193

就像 draw010 说的，如果你绝对需要 POST 方法。否则，大多数单页网站使用 index.php?a=1&b=2 之类的东西，您可以使用 $_GET["a"] 获得 "a" 和 "b" ...

# java - Java：在顶部显示文本

> ID：11162423
> 
> 赞同：0
> 
> 时间：2012-06-22T18:53:32.707
> 
> 标签：java, swing, jtextarea, caret

我有一个简单的显示例程

```
 public static void showEngineAnalysis(String message) {

    if (message.length() > 0)
        message += "\n";
    Application.obj.engineOutput.append(message);

} 
```

从下面的输入流中打印数据

```
 public void getEngineOutputOriginal(Process engine) 
  {
        try {

                  BufferedReader reader =
                  new BufferedReader(new InputStreamReader(engine.getInputStream()), 1);
                  String lineRead = null;
                  while((lineRead = reader.readLine()) != null) 

                  Application.showEngineAnalysis(lineRead);//send engine analysis to print method

             }
                    catch(Exception e) {
                      e.printStackTrace();
                    }
  } 
```

我希望显示例程在我的 JTextArea (engineOutput) 顶部而不是底部打印下一行，即来自：

1.  e7e6 b1c3 2\. c5d4 e3d4
2.  e7e6 c4d5 2\. e6d5
3.  c5d4 e3d4 2\. b8c6

至

1.  c5d4 e3d4 2\. b8c6
2.  e7e6 c4d5 2\. e6d5
3.  e7e6 b1c3 2\. c5d4 e3d4

我完全想不通（我试过插入符号位置等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:00:00.083

您可以插入文本而不是附加它。

```
public static void showEngineAnalysis(String message) {
    if (message.length() > 0)
        message += "\n";
    Application.obj.engineOutput.insert(message, 0);
} 
```

# sql-server - 如何选择列和聚合函数？

> ID：11162425
> 
> 赞同：4
> 
> 时间：2012-06-22T18:53:35.627
> 
> 标签：sql-server, aggregate-functions

假设我有一张公司表：

```
Company
coID | coName | coCSR 
```

该`coCSR`字段是与帐户处理程序表相关的数字 ID：

```
AccountHandler
ahID | ahFirstName | ahLastName 
```

我还有一张订单表：

```
Order
orID | orCompanyID | orDate | orValue 
```

现在我需要生成的输出结构如下：

```
Company | Account handler | No. of orders | Total of orders 
```

这是我尝试过的查询，它会产生错误：

```
SELECT coID, coName, ahFirstName+' '+ahLastName AS CSRName, COUNT(orID) AS numOrders, SUM(orValue) AS totalRevenue
FROM Company
LEFT JOIN AccountHandler ON coCSR = ahID
LEFT JOIN Order ON coID = orCompanyID
WHERE coCSR = 8
AND orDate > getdate() - 365
ORDER BY coName ASC 
```

错误是：**列名 'AccountHandler.ahLastName' 在 ORDER BY 子句中无效，因为它不包含在聚合函数中并且没有 GROUP BY 子句。**

如果我使用`GROUP BY coID`，我会**在关键字“WHERE”附近得到不正确的语法。**如果由于聚合函数而将 更改为`WHERE`，`HAVING`则会收到错误消息，告诉我删除聚合函数或 GROUP BY 子句中不包含的每个其他列名。

我不得不承认，除了最基本的 SQL 命令，我还不懂任何东西的逻辑和语法，我只是想应用我以前见过的东西，但它不起作用。请帮助我完成这项工作。更好的是，你能帮我理解为什么它现在不起作用吗？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:04:35.787

一方面，您的查询可能会丢失`FROM Company`，但在您撰写帖子时可能会以某种方式丢失。

您似乎在按公司汇总数据。因此，您需要按公司分组。您尝试分组失败的最可能原因可能是因为您放`GROUP BY`错了位置。我想你把它放在 before `WHERE`，但实际上它应该放在它之后（和 before `ORDER BY`）：

```
SELECT
  c.coID,
  c.coName,
  a.ahFirstName + ' ' + a.ahLastName AS CSRName,
  COUNT(o.orID) AS numOrders,
  SUM(o.orValue) AS totalRevenue
FROM Company c
LEFT JOIN AccountHandler a ON c.coCSR = a.ahID
LEFT JOIN [Order] o ON c.coID = o.orCompanyID
WHERE c.coCSR = 8
AND o.orDate > getdate() - 365
**GROUP BY ...**
ORDER BY c.coName ASC 
```

另一个问题是，按*什么*分组。SQL Server 要求在`GROUP BY`. 因此，您的`GROUP BY`子句应如下所示：

```
GROUP BY
  c.coID,
  c.coName,
  a.ahFirstName,
  a.ahLastName 
```

请注意，您不能通过在`SELECT`子句中分配给它们的别名来引用列（例如`CSRName`）。但是您可以使用`ahFirstName+' '+ahLastName`表达式而不是相应的列，在这种特殊情况下不会有任何区别。

如果您需要向此查询添加更多非聚合列，则必须将它们添加到`SELECT`和`GROUP BY`。在某些时候，这可能会变得有点乏味。我建议您尝试以下方法：

```
SELECT
  c.coID,
  c.coName,
  a.ahFirstName + ' ' + a.ahLastName AS CSRName,
  ISNULL(o.numOrders,    0) AS numOrders,
  ISNULL(o.totalRevenue, 0) AS totalRevenue
FROM Company c
LEFT JOIN AccountHandler a ON c.coCSR = a.ahID
LEFT JOIN (
  SELECT
    orCompanyID,
    COUNT(orID)  AS numOrders,
    SUM(orValue) AS totalRevenue
  FROM [Order]
  GROUP BY
    orCompanyID
  WHERE orDate > getdate() - 365
) o ON c.coID = o.orCompanyID
WHERE c.coCSR = 8
ORDER BY c.coName ASC 
```

也就是说，聚合`Order`仅在表上完成。然后将聚合的行集连接到其他表。您现在可以将更多属性拉到输出中，也可以`Company`不用`AccountHandler`担心将它们添加到输出中，`GROUP BY`因为在该级别不再需要分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:08:32.013

您可以更改如下查询吗？你应该添加`Max`和`Group By Clause`

```
SELECT 
        MAX(C.coID), 
        C.coName, 
        MAX(AH.ahFirstName+' '+ AH.ahLastName ) AS CSRName, 
        COUNT(O.orID) AS numOrders, 
        SUM(O.orValue) AS totalRevenue
From Company C
LEFT JOIN AccountHandler AH ON C.coCSR = AH.ahID
LEFT JOIN Order O ON C.coID = O.orCompanyID
WHERE   C.coCSR = 8 AND 
        O.orDate > getdate() - 365
Group by C.coName
ORDER BY C.coName ASC 
```

## 我的建议

您应该为选定的列名称使用别名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:19:53.620

```
SELECT 
      --<<<non aggregate section of SELECT clause
     coID   
     , coName
     , [CSRName] = CONVERT(VARCHAR(100),ahFirstName + ' ' + ahLastName) 

      --<<<aggregate section of SELECT clause
     , [numOrders] = COUNT(orID)
     , [totalRevenue] = SUM(orValue) 
FROM   --<<<<<<sql is not too happy without FROM
    Company c
    LEFT JOIN AccountHandler a
       ON coCSR = ahID
    LEFT JOIN Order o
       ON coID = orCompanyID
WHERE coCSR = 8
   AND orDate > getdate() - 365
GROUP BY
     coID   
     , coName
     , CONVERT(VARCHAR(100),ahFirstName + ' ' + ahLastName) --<<<<looks like aggregate but is just text manipulation
ORDER BY coName ASC 
```

你有两个聚合函数；一个`COUNT`和一个`SUM`; 这意味着您需要进行一些分组，一般的经验法则是`GROUP BY`select 子句的非聚合部分

OP 中真正的大问题是，当您 JOIN 两个表时，无论哪种风格（LEFT、RIGHT、OUTER、INNER、CROSS），它都必须在 FROM 子句中，并且需要在连接的任一侧指定一个表

然后，如果加入多个表，您可能希望为每个表使用别名；我刚刚使用了单个小写字母；c/o/a。尽管查看您的列名可能不需要这些，因为所有列都是唯一命名的。

# symfony - Symfony2 web profiler 中的“初始化时间”包括什么？

> ID：11162429
> 
> 赞同：3
> 
> 时间：2012-06-22T18:53:48.560
> 
> 标签：symfony

我正在查看 Symfony2 网络分析器中的时间线。总请求时间为 800ms，初始化时间为 750ms。详细的细分显示了 50 毫秒内发生的所有有用信息。但是这 750 毫秒有什么意义呢？如果是缓存预热，为什么即使在后续刷新时它也会保留？

注意：这是开发环境。我不是在进行性能调整，我只是好奇为什么它占了时间配置文件的很大一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T23:06:27.200

代码的相关部分在这里：

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/DataCollector/TimeDataCollector.php#L110](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/DataCollector/TimeDataCollector.php#L110)

具体来说`This is the time spent until the beginning of the request handling.`

# asp.net - 目录上的“401 Unauthorized”

> ID：11162430
> 
> 赞同：91
> 
> 时间：2012-06-22T18:53:50.530
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7

我认为这是一个 IIS 错误，因为如果我在本地机器上运行该项目就不会发生这种情况。

我有我的样式表`~/Content/css`

该目录中的任何文件都不会加载到页面上，当我直接导航到它们时，出现服务器错误：

> **401 - 未经授权：由于凭据无效，访问被拒绝。**
> 
> 您无权使用您提供的凭据查看此目录或页面。

这只发生在该目录中，我访问任何其他文件都没有问题。我需要在 IIS7 中做些什么来阻止这种情况吗？

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2014-05-14T22:30:22.830

1.  打开 IIS 并选择导致 401 的站点
2.  在 IIS 标头中选择**身份验证属性**
3.  选择**匿名身份验证**
4.  右键单击它，选择**编辑**并选择**应用程序池标识**
5.  重新启动站点，它应该可以工作

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-22T19:10:53.493

您可能没有该文件夹的**IUSR_computername*权限***。我刚刚快速浏览了一下，看起来您会[在这里找到所需的信息](http://support.microsoft.com/kb/313075)。

如果不是这种情况，浏览器是否会提示您输入用户名和密码？如果是这样，可能是 IIS 配置为仅使用集成身份验证，[如此处所述](http://support.microsoft.com/kb/871179)。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-12-27T19:30:28.263

*   打开**IIS**
*   **选择您遇到问题的站点**

*   选择下面

[![在此处输入图像描述](../Images/efe321e9b6ae4eb45cec13a2c1382c01.png)](https://i.stack.imgur.com/k6djr.png)

**- 右键单击​​匿名身份验证，然后单击编辑并按照下面的操作**

[![在此处输入图像描述](../Images/92f166f457cca77380ea886db44808ae.png)](https://i.stack.imgur.com/yCMkd.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-20T03:42:06.687

您无权使用您提供的凭据查看此目录或页面。

尽管用户已经通过 Active Directory 进行了身份验证，但还是发生了这种情况。

Access Denied 错误可能有很多原因，但是如果您认为您已经从 Web 应用程序中正确配置了所有内容，那么可能会忘记一些细节。确保您授予**Authenticated Users**访问您的 Web 应用程序目录的适当权限。

以下是我为解决此问题而采取的步骤。

1.  右键单击存储 Web 应用程序的目录并选择属性，然后单击安全选项卡。

2.  单击单击编辑...，然后单击添加...按钮。在 Enter the object names to select. 中输入 Authenticated Users，然后**添加**按钮。在输入要选择的对象名称中输入 Authenticated Users。

3.  单击“**确定**”，您应该会看到 Authenticated Users 作为用户名之一。如果尚未选中，请在低端的“经过身份验证的用户的权限”框上给予适当**的权限。**

4.  单击**确定**两次关闭对话框。它应该立即生效，但如果您想确定，您可以为您的 Web 应用程序重新启动 IIS。

刷新您的浏览器，它现在应该显示网页。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-22T18:56:19.180

您需要检查服务器上的文件夹权限，并检查您用于运行应用程序的帐户是否有权访问该文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-02T23:21:52.073

在我们的例子中，它是应用程序中指定的 Windows 集成身份验证`web.config`

但是 IIS 机器上根本没有安装 windows-auth 模块。

只是添加另一个可能的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-09T00:06:29.417

对我来说，匿名用户访问在服务器级别很好，但仅在我的一个“虚拟”文件夹中有所不同。

花了我很多时间，然后从同事那里得到了一些帮助，以了解 IIS 在虚拟文件夹级别也有“身份验证”设置 - 希望这可以帮助其他人解决我的困境。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-11-15T17:38:03.073

我发现的另一个简单修复是删除本地 IIS 站点（从 IIS 管理器中），然后从 Visual Studio 中 Web 项目的“属性”重新创建虚拟目录。

# wso2 - 如何禁用 WSO2 BAM Thrift 身份验证

> ID：11162431
> 
> 赞同：1
> 
> 时间：2012-06-22T18:53:54.020
> 
> 标签：wso2, thrift, wso2carbon, wso2bam

是否可以禁用 WSO2 BAM thrift 身份验证？我们在与“localhost”不同的主机上发布 BAM，我们收到以下错误

```
507672 [pool-7-thread-30] ERROR org.wso2.carbon.bam.agent.publish.ThriftAuthenti
cationClient  - Transport Exception for user : admin for url : https://XXX.YYY.ZZZ
.WWW:PORT/
org.apache.thrift.transport.TTransportException: javax.net.ssl.SSLHandshakeExcep
tion: java.security.cert.CertificateException: No subject alternative names pres
ent
        at org.apache.thrift.transport.THttpClient.flush(THttpClient.java:154) 
```

我们在[这里](https://stackoverflow.com/questions/10834673/localhost-used-as-common-name-in-the-default-wso2-certificate-creates-no-subje)看到我们应该重新生成信任库；但是我们想知道是否可以禁用身份验证，因为我们目前只是在运行测试。

谢谢你的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:11:28.410

基本上在 WSO2 BAM 中，我们只能在初始身份验证后通过 Thrift 传输数据。但是为了提高效率，我们可以通过 Thrift 发送有效负载数据而无需身份验证。但即使在这种情况下，JSP 页面也需要初始身份验证。

对于完全认证的数据，使用 ssl://192.168.1.2:9:7611 之类的格式，对于不认证数据，使用 tcp://192.168.1.2:9:7711 之类的连接 URL 格式。

请注意，7611 和 7711 与 Thrift 服务器端口号相关。

# gradle - 使用配置注入时，gradle 中路径的根是什么？

> ID：11162432
> 
> 赞同：1
> 
> 时间：2012-06-22T18:53:54.143
> 
> 标签：gradle

我正在为 gradle 使用配置注入并且有类似的东西

```
subprojects {

    dependencies {
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'webserver/play-1.2.4/framework', include: '*.jar')
    }
} 
```

我的目录结构是

```
project
  subproject1
  subrpoject2 
```

我运行命令

gradle subproject1:dependencies，它是空的 :( :(

太棒了，相对文件路径应该是什么才能正常工作？？？？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:12:48.213

目前，该`dependencies`任务仅显示存储库依赖项。您可以打印配置解析为的文件：

任务日志 << {configurations.compile.each { println it } }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:32:58.587

此外，事实证明，配置注入，路径是相对于子项目的，所以我猜在某些情况下可能需要 ../ 。

# php - 来自不同目录的 PHP 命名空间调用函数

> ID：11162439
> 
> 赞同：0
> 
> 时间：2012-06-22T18:54:29.277
> 
> 标签：php, namespaces

我正在尝试降低 php 的命名空间技术，但这里有一些问题：

为什么我不能从 B 类调用方法 testA？另外我想补充一点，我使用的是 5.3。

在库中->

```
<?php
namespace lib;

class A{

        public static function testA(){

                  echo "I am inside A";
        }
 } 
```

在根目录->

```
<?php

class B{

    public function showSomething(){
               lib\A::testA();
    } 

 $test = new B();
 $test->showSomething(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:07:06.687

使用命名空间您只封装项目但不包含它。我看不到包含类文件。包括它或使用[autoload](http://php.net/manual/en/language.oop5.autoload.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:57:04.767

确保包含包含 A 类的文件。

# c# - 使用反射从接口获取类型

> ID：11162446
> 
> 赞同：0
> 
> 时间：2012-06-22T18:54:40.680
> 
> 标签：c#, .net, reflection

给定以下类型

```
private class MyTestDummyClassValidationDef : ValidationDef<MyTestDummyClass>
    {
        ...
    }

public class ValidationDef<T> : IValidationDefinition<T>, IConstraintAggregator, IMappingSource where T : class        
{        }

public interface IMappingSource
{
    IClassMapping GetMapping();
}

public interface IClassMapping
{
    Type EntityType { get; }
    ...
} 
```

在配置时，我知道所有的 ValidationDefinitions；上面的“MyTestDummyClassValidationDef”就是这种定义的一个例子。

如果您遵循继承/实现线索，最后是由 IClassMapping 公开的 EntityType。

作为我的验证基础设施的一部分，可能会要求各种对象进行自我验证。对象可能有也可能没有为它们定义的 ValidationDef，因为验证不适用于该对象或尚未编写定义。如果一个对象被要求验证自己并且没有定义，那么将发生运行时错误。

所以，我想要的是有一个 EntityTypes 列表，我可以用来在运行时检查。如果要求验证自身的对象不在列表中，那么我可以避免否则会发生的运行时错误。

我该怎么做？

干杯，
贝里尔

# 我正在寻找的代码

```
public EntityValidator(ValidatorEngine validatorEngine, IEnumerable<Type> defTypes) {

ValidationDefs = new List<Type>();
foreach (var type in defTypes) 
{
    if (type.BaseType.GetGenericTypeDefinition() != typeof(ValidationDef<>)) continue;

    var mappingSource = (IMappingSource) Activator.CreateInstance(type);
    var entityType = mappingSource.GetMapping().EntityType;
    ValidationDefs.Add(entityType);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:08:30.913

如果我理解正确，您想调用方法的显式接口实现，即实现接口方法并且仅在接口本身中可见的方法，而不是在类中。

为此，首先检索(with )的`Type`对象。在该对象上，调用以检索该属性的实例。`IClassMapping``typeof(IClassMapping)``GetProperty``PropertyInfo``EntityType`

然后，您应该能够通过调用`PropertyInfo.GetValue`您的`ValidationDef<T>`实例来检索属性值。

例如，使用此方法：

```
Type GetEntityType(ValidationDef<T> def)
{
    PropertyInfo prop = typeof(IClassMapping).GetProperty("EntityType");
    return (Type)prop.GetValue(def, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:20:53.583

好的，在澄清之后（请参阅问题的评论），这是在程序集中查找 ValidationDef 的所有实现并创建其 EntityType 属性的值列表的方法：

```
List<Type> entityTypes = new List<Type>();

foreach (Type type in Assembly.GetExecutingAssembly().GetTypes())
{
    if (InheritsFromValidationDef(type))
    {
        IMappingSource mappingSource = (IMappingSource)Activator.CreateInstance(type);
        entityTypes.Add(mappingSource.GetMapping().EntityType);
    }
}

private static bool InheritsFromValidationDef(Type type)
{
    Type baseType = type.BaseType;
    bool result = baseType != null && 
                  baseType.IsGenericType &&
                  baseType.GetGenericTypeDefinition() == typeof(ValidationDef<>);
    return result;
} 
```

这里有几点需要注意：

*   正在检查当前程序集中的类型 ( `Assembly.GetExecutingAssembly`)。显然，这对于您的场景可能或可能不够。
*   `BaseType`返回正在检查的类型的直接父级。同样，您可能希望在继承链的更上方检查类型层次结构。
*   假设所有检查的类型都有一个无参数的构造函数。否则，`Activator.CreateInstance`位将不起作用。

尽管可以按照您的要求进行操作，但我想**强烈强调**，您的验证需求很可能有很多、*更简单的解决方案。*从您告诉我们的解决方案来看，很明显它有一些严重的缺陷：

*   您怎么可能对无法验证的对象调用验证？我想这是你所有悲伤的根源。
*   您的继承层次结构过于复杂且难以理解。为什么需要这么多接口？

也许尝试创建一个单独的问题来详细说明您的验证需求。我确信可以找到更简单的解决方案。

# jsf - JSF h:selectBooleanCheckbox inside ui:repeat - varStatus.index 有效，var 无效

> ID：11162447
> 
> 赞同：3
> 
> 时间：2012-06-22T18:54:48.820
> 
> 标签：jsf, mojarra, uirepeat

有人可以解释一下这种现象吗？

我正在使用 Mojarra 2.1.6 - Glassfish 3.1.2。

我在`ui:repeat`. 正在循环我的`ui:repeat`托管 bean 中的布尔值列表。每个单独的复选框都绑定到该列表的一个元素。例如：

```
<ui:repeat var="checkbox" value="#{checkboxTestBean.list}" varStatus="status">
  <h:selectBooleanCheckbox value="#{checkbox}"/>
</ui:repeat> 
```

问题是这些值没有应用于托管 bean。当我提交并重新呈现表单时，这些值不会粘住。

*但是*，如果我明确索引托管 bean 元素，通过将`value=#{checkbox}`上面更改为`value="#{checkboxTestBean.list[status.index]}"`，一切正常。

任何想法为什么会这样？

XHTML：

```
<h:form>
<div>
Using value="#\{var\}"
<ui:repeat var="checkbox" value="#{checkboxTestBean.list}" varStatus="status">
    <h:selectBooleanCheckbox value="#{checkbox}"/>
</ui:repeat>
</div>

<div>
Using value="#\{varStatus.index\}"
<ui:repeat var="checkbox" value="#{checkboxTestBean.list}" varStatus="status">
    <h:selectBooleanCheckbox value="#{checkboxTestBean.list[status.index]}"/>
</ui:repeat>
</div>
<h:commandLink actionListener="#{checkboxTestBean.actionListener}">
PROCESS FORM
    <f:ajax execute="@form" render="@form"/>
</h:commandLink>
</h:form> 
```

爪哇：

```
@ManagedBean
@ViewScoped
public class CheckboxTestBean {

public List<Boolean> list = new ArrayList<Boolean>();

public CheckboxTestBean() {
    for (int i = 0; i < 5; i++) {
        list.add(Boolean.FALSE);
    }
}

public void actionListener(ActionEvent evt) {
    System.out.println("*** dumping whole form");
    System.out.println("*** list = " + list);
}

public List<Boolean> getList() {
    return list;
}

public void setList(List<Boolean> list) {
    this.list = list;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:59:50.903

那是因为`Boolean`as 作为一个不可变类没有值的 setter 方法。当按索引将其引用为列表项时，EL 将能够`List`像这样在按索引上设置新值`list.add(status.index, newValue)`。另一种方法是使其成为可变模型类的属性并拥有它的集合，而不是像`List<Item>`您引用的那样`<h:selectBooleanCheckbox value="#{item.checkbox}"/>`。

这与 没有特别关系`Boolean`，例如`List<String>`在`<ui:repeat><h:inputText>`.

### 也可以看看：

*   [在 List<String> 上使用 <ui:repeat><h:inputText> 不会更新模型值](https://stackoverflow.com/questions/10780858/jsf-2-executing-values-in-uirepeat-doesnt-commit-the-values/10784078#10784078)

# sql - 使用 CTE 分配额外的税分

> ID：11162453
> 
> 赞同：1
> 
> 时间：2012-06-22T18:55:24.570
> 
> 标签：sql, loops, common-table-expression

我有一个像这样的税收数据表

```
DECLARE @TaxSummary TABLE(
    TaxRegionType           SMALLINT NOT NULL,
    ActualRegionTaxTotal    NUMERIC(10,2) NULL,
    LineRegionTaxTotal      NUMERIC(10,2) NULL,
    ExtendedRegionTaxTotal  Numeric(14,6) NULL
) 
```

而且我有一定数量的美分分配给该表中的每个区域类型......假设我有 5 额外的美分，所以我有

```
Declare @Cents int = 5

Declare @Delta = 0.01 
```

目前我用这样的while循环更新表格

```
SET @Count = 0
    WHILE (@Count < @Cents)
      BEGIN
        SET @Count = @Count + 1

            UPDATE @TaxSummary
            SET ActualRegionTaxTotal = ActualRegionTaxTotal + @Delta
            WHERE TaxRegionType =
            (SELECT TOP(1) TaxRegionType
            FROM @TaxSummary
            WHERE ExtendedRegionTaxTotal <> 0
            ORDER BY ExtendedRegionTaxTotal-ActualRegionTaxTotal DESC)

      END 
```

有没有办法使用 CTE 来完成？还是非循环？基本上我想从差异最大的行开始为每一行添加一分，并继续添加到差异最大的行，直到使用所有额外的美分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:47:17.147

Ok, here is what I have and it only sets new_tax for each region to 10.01 so it only uses 2 cents and not all 5.....that is why I am confused...am I missing something?

```
DECLARE
    @OrderTotalTax      NUMERIC(10,2),
    @CollectedTax       NUMERIC(10,2),
    @RegionTotalTax     NUMERIC(10,2)

DECLARE @TaxSummary TABLE
(
    TaxRegionType           SMALLINT NOT NULL,
    ActualRegionTaxTotal    NUMERIC(10,2) NULL,
    LineRegionTaxTotal      NUMERIC(10,2) NULL,
    ExtendedRegionTaxTotal  Numeric(14,6) NULL
)

insert into @TaxSummary (TaxRegionType, ActualRegionTaxTotal, LineRegionTaxTotal,
ExtendedRegionTaxTotal )
values ( 1, 10.00, 0, 10.04 )

insert into @TaxSummary (TaxRegionType, ActualRegionTaxTotal, LineRegionTaxTotal,
ExtendedRegionTaxTotal )
values ( 2, 10.00, 0, 10.01 )

-- RegionTotalTax = 20.00
SELECT @RegionTotalTax = SUM(ActualRegionTaxTotal) from @TaxSummary

Declare @Cents int = 0

set @OrderTotalTax = 20.05

-- Cents will be 20.05-20.00*100 = 5
SET @Cents = ABS((@OrderTotalTax - @RegionTotalTax) * 100)

-- Distribute one cent at a time
Declare @Delta DECIMAL(18,2) = 0.01

select
TaxRegionType,
ActualRegionTaxTotal old_tax,
ActualRegionTaxTotal + case when rn <= @Cents then 0.01 else 0 end new_tax
from
(
select
TaxRegionType, 
ActualRegionTaxTotal,
row_number () over (partition by null order by ExtendedRegionTaxTotal-
ActualRegionTaxTotal desc) rn
from 
@TaxSummary 
) d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:54:54.317

这可能会给您一个总体思路来帮助您入门 - 只需在每一行中添加一分钱，直到内联视图中的行号等于您尝试丢失的额外行号：

```
declare @cents int = 5

select
region,
tax old_tax,
tax + case when rn <= @cents then 0.01 else 0 end new_tax

from
(
select
region, 
tax,
row_number () over (partition by null order by tax desc) rn

from 
dbo.taxsummary 
) d 
```

# c - 使用生成的文件生成依赖项

> ID：11162456
> 
> 赞同：1
> 
> 时间：2012-06-22T18:55:28.680
> 
> 标签：c, makefile, code-generation, gnu-make

我想对从`flex`和生成的文件使用自动依赖生成`bison`。

现在，我正在这样做：

```
CSRC=$(wildcard *.c)
OSRC=grammar.y scanner.l
OUTPUT_DIR="../bin"

SOLIDC_OBJS=solid_ast.o solid_strbuf.o solid_strlit.o solidc.o 
SOLIDL_OBJS=solidl.o solid_ast.o solid_strbuf.o

CFLAGS += -MD -MP
CC=clang
BISON=bison
FLEX=flex
MKDIR=mkdir -p

all: solidc

solidc: setup $(SOLIDC_OBJS)
    $(BISON) -vd grammar.y
    $(FLEX) --header-file=scanner.yy.h -o scanner.yy.c scanner.l
    $(CC) -o $(OUTPUT_DIR)/$@ $(SOLIDC_OBJS) scanner.yy.o grammar.tab.o

setup:
    @$(MKDIR) $(OUTPUT_DIR)

run:
    $(OUTPUT_DIR)/$(OUTPUT_NAME)

clean:
    $(RM) $(wildcard $(OUTPUT_DIR)/*) $(wildcard *.o) $(wildcard *.d) \
        $(wildcard scanner.yy.*) $(wildcard grammar.tab.*) \
        $(wildcard grammar.output)

-include $(SRC:%.c=%.d) scanner.yy.d grammar.tab.d 
```

但这不起作用，因为`scanner.yy.d`并且`grammar.tab.d`永远没有机会生成。

解决此问题的最佳方法是什么？

* * *

> 请注意，这个问题实际上与 [GNU make: Generate automatic dependencies with generated header files](https://stackoverflow.com/questions/5229561/gnu-make-generating-automatic-dependencies-with-generated-header-files)不同，因为除了许多其他事情之外，我使用的是“效率较低”的`-include`方法而不是 。`sef`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:00:23.700

如果我理解正确，您可以只 make`grammar.tab.o`和`scanner.yy.o`先决条件`solidc`，然后对象规则将为它们生成依赖文件，与任何对象相同。

```
SOLIDC_OBJS=solid_ast.o solid_strbuf.o solid_strlit.o solidc.o grammar.tab.o scanner.yy.o

all: solidc

grammar.tab.c: grammar.y
    $(BISON) -vd grammar.y

scanner.yy.c: scanner.l
    $(FLEX) --header-file=scanner.yy.h -o scanner.yy.c scanner.l

solidc: setup $(SOLIDC_OBJS)
    $(CC) -o $(OUTPUT_DIR)/$@ $(SOLIDC_OBJS) 
```

（我们可以稍微收紧这些规则，但让我们先让它们发挥作用。）

# json - 无法访问我的 JSON 结果中的对象

> ID：11162457
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:55:29.603
> 
> 标签：json, node.js

xml2js 获取我的 xml 结果，以便我可以访问这些值。我在尝试访问 GetProvidersResponse 并遍历 GetProvidersResult 和 Providers 时遇到了一些问题。如何访问这些项目？

```
{ 'xmlns:s': 'http://schemas.xmlsoap.org/soap/envelope/' }
{ GetProvidersResponse: 
   { '@': { xmlns: 'http://www.kareo.com/api/schemas/' },
     GetProvidersResult: 
      { '@': [Object],
        ErrorResponse: [Object],
        SecurityResponse: [Object],
        Providers: [Object] } } } 
```

当我尝试 console.log(resultObject.GetProvidersResponse) 我得到未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:38:35.553

我使用了休闲 console.log(result['s:Body'].GetProvidersResponse.GetProvidersResult.Providers.ProviderData[0]);

并且能够看到数据。

# c# - 设置 WCF DataMember 属性的默认值

> ID：11162459
> 
> 赞同：4
> 
> 时间：2012-06-22T18:55:44.117
> 
> 标签：c#, wcf

我想在下面的类中添加一个新属性 bool IsValid。我希望此属性不是必需的，并且默认设置为 false。我将此对象用于 wcf 目的，如何将默认值设置为 false？

```
[DataContract]
    public class OrderLineItem : IExtensibleDataObject
    {
        ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; }

        [DataMember]
        public Guid LineItemID { get; set; }

        [DataMember(IsRequired = true, EmitDefaultValue=false)]
        public string ProductID { get; set; }

        [DataMember(IsRequired = true, EmitDefaultValue=false)]
        public decimal Quantity { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T19:02:58.293

**更新**：我回答它时考虑了如何为任意类型定义默认值，但是，正如评论中提到的@HatSoft，你不需要做任何事情来设置属性`false`的默认值`bool`，因为它已经是该类型的默认值。不过，我会把这个答案留给一般情况。

无法在 [DataMember] 属性本身上设置默认值，但您可以使用 [OnDeserializing] 回调来设置它。这样，如果它不是来自网络，它将具有由反序列化之前运行的代码设置的值。

```
[DataContract]
public class OrderLineItem : IExtensibleDataObject
{
    ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; }

    [DataMember]
    public Guid LineItemID { get; set; }

    [DataMember(IsRequired = true, EmitDefaultValue=false)]
    public string ProductID { get; set; }

    [DataMember(IsRequired = true, EmitDefaultValue=false)]
    public decimal Quantity { get; set; }

    [DataMember(IsRequired = false, EmitDefaultValue = false)]
    public bool IsValid { get; set; }

    [OnDeserializing]
    void BeforeDeserialization(StreamingContext ctx)
    {
        this.IsValid = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T19:36:08.137

默认情况下它将是假的，所以不需要做任何其他事情。

```
[DataMember] 
public bool IsValid { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-26T14:51:41.127

我建议执行以下操作：

```
 private string _recordId;

    [DataMember]
    public String RecordId
    {
        get { return _recordId ?? (_recordId = Guid.NewGuid().ToString()); }
        set { _recordId = value; }
    } 
```

这里“_recordId = Guid.NewGuid().ToString());” 当对象是时将默认值设置为 Guid

# c# - 类型转换问题

> ID：11162461
> 
> 赞同：0
> 
> 时间：2012-06-22T18:55:57.073
> 
> 标签：c#, sql

我在处理类型转换时遇到了麻烦...

**代码：**

```
public static string isLocalIncidentSubmitted()
{

    string query = "SELECT Submit From [MVCOmar].[dbo].PrideMVCSubmitLog WHERE ReportID=@existingNum";

    DataTable dt = new DataTable();
    SqlConnection connection = new SqlConnection(connectionStr4);

    SqlCommand command = new SqlCommand(query, connection);
    command.Parameters.AddWithValue("@existingNum", MyGlobals1.secondversionDisplayTesting);

    connection.Open();
    SqlDataAdapter adp = new SqlDataAdapter(command);
    adp.Fill(dt);
    connection.Close();
    command.Dispose();
    connection.Dispose();

        return dt.Rows[0]["Submit"].ToString();   

} 
```

表提交的类型为 varchar

我收到一个很大的错误，但这里是它的前几行：

```
System.Data.SqlClient.SqlException：从字符串转换为唯一标识符时转换失败。
在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection）
在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection）
在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning（TdsParserStateObject stateObj）
在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）
在 System.Data.SqlClient.SqlDataReader.HasMoreRows()

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:58:56.730

看起来你`ReportID`是 SQL 中的`Guid`or `uniqueidentifier`，但你试图给它一个字符串值。您确定您在该查询中使用了正确的字段吗？

如果你`MyGlobals1.secondversionDisplayTesting`是一个字符串，那么这样做：

```
Guid g = Guid.Parse(MyGlobals1.secondversionDisplayTesting);
command.Parameters.AddWithValue("@existingNum", g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:06:44.960

尝试使用[.Add](http://msdn.microsoft.com/en-us/library/40959t6x)而不是 .AddWithValue 以便您可以指定参数的类型和大小，如下所示：

```
command.Parameters.Add("@existingNum", SqlDbType.UniqueIdentifier).Value = MyGlobals1.secondversionDisplayTesting; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:04:32.267

看起来问题不在于您返回的内容，而在于您尝试执行的 SQL。将除 return 语句之外的所有内容都包装在 try/catch 中，我相信您会找到对此的确认。您的 SQL 就是您的问题所在。

> 来自 MSDN (http://msdn.microsoft.com/en-us/library/ms187942.aspx)：uniqueidentifier 类型被视为用于从字符表达式转换的字符类型，因此受截断规则的约束用于转换为字符类型。也就是说，当字符表达式转换为不同大小的字符数据类型时，对于新数据类型来说太长的值将被截断。请参阅示例部分。
> 
> 示例 下面的示例将 uniqueidentifier 值转换为 char 数据类型。

```
 DECLARE @myid uniqueidentifier = NEWID();
 SELECT CONVERT(char(255), @myid) AS 'char'; 
```

# php - 模板文件中的 Magento getIsAnchor()

> ID：11162462
> 
> 赞同：1
> 
> 时间：2012-06-22T18:56:03.347
> 
> 标签：php, magento, magento-1.6

如果类别具有分层导航，我正在尝试`$this->getIsAnchor()`从类别模板文件中调用以显示某些信息。该函数总是返回 false，即使它应该为 true。

以这种方式从模板文件调用函数有问题吗？如果是这样，调用此函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T19:17:12.690

您需要对类别进行此调用：

```
$_category->getIsAnchor(); 
```

根据您要实现的目标，您可能会发现使用 layout.xml 是一种更简洁的选择。分层和非分层类别有不同的句柄：

**非分层分类手柄**

`<catalog_category_default>`

**分层类别句柄**

`<catalog_category_layered>`

# android - 发送 USSD 代码时的奇怪行为 (Android)

> ID：11162465
> 
> 赞同：1
> 
> 时间：2012-06-22T18:56:18.670
> 
> 标签：android, ussd

我有应用程序，它发送一些 USSD 代码。在一种情况下，来自带有界面的用户操作，在另一种情况下 - 当收到一些 SMS（带通配符）时。

我有一个发送 USSD 的代码：

```
private static void setCallDivert (Context context, String phoneNo) {
    String callForwardString = "**21*" + phoneNo + "#";
    Log.i("Call forward string", callForwardString);

    Intent intentCallForward = new Intent(Intent.ACTION_CALL);
    intentCallForward.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    Uri uri2 = Uri.fromParts("tel", callForwardString, "#");
    intentCallForward.setData(uri2);                                
    context.startActivity(intentCallForward);
    divertDbRecord (context, true, phoneNo);
} 
```

当它从按钮 onClick 方法调用时，它工作正常。

当它从 SMS Handler 调用时，会出现消息“呼叫转移连接问题或无效的 MMI 代码”。

在 logcat 中，我可以看到一个请求。在这两种情况下都是一样的。

当然，我是在真正的 Android 手机上测试它，而不是在模拟器上。

也许，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T13:50:24.803

您需要对您的 Uri 哈希进行编码

```
public static final String encodedHash = Uri.encode("#"); 
```

这允许拨号器正确解释 # 值

# javascript - 使用 javascript 从标头中删除 javascript 标签

> ID：11162469
> 
> 赞同：0
> 
> 时间：2012-06-22T18:56:36.747
> 
> 标签：javascript, css, dom, xhtml-1.1

假设我有一个主页，它使用 iframe 对象作为缓冲区从同一域加载外部页面（出于安全原因）。我选择这种方法是因为 XMLHttpRequest 无法从所有浏览器中的字符串外部 xhtml 内容进行解析。

在 iframe 中加载内容后，我使用“contentDocument”属性“窃取”它的内容，然后将所有 css 样式和脚本标签附加到父级的标题并最终删除 iframe（注意 CSS 和脚本是内联的在第二个文档中，所以根本没有外部链接）。

现在一切都很好 - 我可以调用新的 javascript 函数并且 css 也可以正常工作。

我的问题是：我能够管理删除新附加的 css 样式，但使用 javascript 不起作用。是否有任何解决方案可以从同一文档中删除标题新添加的脚本标签？

我什至绝望地尝试过这个（css消失了，javascript仍然存在......）

```
 function emptyheader()
    {
        /* var container = document.getElementById("container"); */

        var header = document.getElementsByTagName('head')[0];  

        /* styles = header.getElementsByTagName('style'); */
        /* scripts = header.getElementsByTagName('script'); */

          while(header.hasChildNodes())
          header.removeChild(header.firstChild);    
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:26:28.747

我不是岸我明白你的意思。但这是一个如何添加然后删除脚本的示例（据我所知，将脚本标记添加到正文是可以的）。

```
<script>
function addAndRemoveScript() {
    var a = document.createElement("script");
    a.src = "yourscript.js";
    document.body.appendChild(a);
    document.body.removeChild(document.body.getElementsByTagName("script")[0])
    document.body.removeChild(document.body.getElementsByTagName("script")[0])
}
window.onload = addAndRemoveScript();
</script> 
```

# svn - 使用 Assembla 时，如何从 Subversion 中的旧版本创建标签？

> ID：11162473
> 
> 赞同：23
> 
> 时间：2012-06-22T18:56:53.973
> 
> 标签：svn, branch, assembla

我使用 Assembla 来管理我的 Subversion 存储库。我已经开始对我的代码库进行一些重大修改，并想为我最近的生产版本创建一个标签（我在几周前将该版本推送到生产环境时忘记了这样做）。

我目前使用的是修订版 588，并且想要创建修订版 577 的标签。我如何使用 Assembla 中的 Subversion 从命令行执行此操作？

假设我的 Assembla SVN URL 是：[https ://subversion.assembla.com/svn/my_assembla_svn_directory/](https://subversion.assembla.com/svn/my_assembla_svn_directory/)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-22T19:35:59.867

您始终可以使用该`-r`参数来引用特定版本。这样做时，您还可以使用`@rev`修订固定来确保您指的是特定修订的 Subversion 修订的布局。以下将从修订版 577 上的主干创建一个标签并调用此标签`REV-1.2`：

```
$ svn cp -r 577 https://subversion.assembla.com/svn/my_assembla_svn_directory/trunk
    https://subversion.assembla.com/svn/my_assembla_svn_directory/tags/REV-1.2 
```

如果您没有`trunk`、`branches`和`tags`目录，则需要移动您的工作以创建一些：

```
$ # Move the current directory to the "trunk"
$ svn cp https://subversion.assembla.com/svn/my_assembla_svn_directory \
    https://subversion.assembla.com/svn/my_assembla_svn_directory/trunk

$ # Make a corresponding tags and branches directories too
$ svn mkdir https://subversion.assembla.com/svn/my_assembla_svn_directory/branches
$ svn mkdir https://subversion.assembla.com/svn/my_assembla_svn_directory/tags

$ # Now, we can delete the old location. Let your developers know this,
$ # so they're not surprised by this and will be able to do a "svn relocate"
$ svn delete https://subversion.assembla.com/svn/my_assembla_svn_directory/

$ # Whoops. I should have done the tagging when I had a chance. 
$ #Oh well, we'll use the `@rev` pinning:

$ svn -r557 cp https://subversion.assembla.com/svn/my_assembla_svn_directory@557 \
      https://subversion.assembla.com/svn/my_assembla_svn_directory/tags/REL-1.2 
```

* * *

Subversion 不实现*标记*和*分支*，除非作为副本。这并不罕见。Perforce 以同样的方式实现分支。事实上，一旦你习惯了它，它就会非常有效：

*   很容易看到有效的分支和标签（只需`svn ls`在正确的目录上做一个
*   标签和分支的完整历史很容易看到。你可以看到谁做了改变，什么时候，为什么，等等。
*   显示标签或分支的完整历史。如果有人更改标签或分支，您会非常清楚地看到是谁做的。
*   当开发人员在各种分支和主干中挑选要分支或标记的内容时，它不鼓励您在许多其他版本控制系统中看到的仓促类型的分支。这使得跟踪历史非常困难。Subversion 的方案鼓励您将分支和标签视为影响项目中的所有文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T19:04:08.473

直接来自[SVN 文档](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.tags.mksimple)：

> 如果您想创建与 HEAD 修订版中完全相同的 /calc/trunk 快照，请复制它：
> 
> ```
> $ svn copy http://svn.example.com/repos/calc/trunk \
>            http://svn.example.com/repos/calc/tags/release-1.0 \
>            -m "Tagging the 1.0 release of the 'calc' project."
> 
> Committed revision 902. 
> ```
> 
> 此示例假定 /calc/tags 目录已经存在。（如果没有，您可以使用 svn mkdir 创建它。）复制完成后，新的 release-1.0 目录永远是您复制时 /trunk 目录在 HEAD 修订版中的快照。当然，您可能希望更准确地了解您复制的是哪个修订版本，以防其他人在您不注意的情况下对项目进行了更改。**因此，如果您知道 /calc/trunk 的修订版 901 正是您想要的快照，您可以通过将 -r 901 传递给 svn copy 命令来指定它**。

（强调我的）

# ember.js - 忽略或替换无法编译的 Handlebars 块

> ID：11162474
> 
> 赞同：1
> 
> 时间：2012-06-22T18:56:57.520
> 
> 标签：ember.js, javascript-framework, handlebars.js

在 Ember.js 的车把模板中，我有如下块：

```
{{content.some_attribute}}
{{content.some_other_attr}}
{{content.more_attr}} 
```

其中一些属性不存在，我正在慢慢实现它们。

有没有办法让这些模板编译并*忽略*不评估或更好的块，用 html 元素*替换*它们，以便更容易在浏览器中发现它们？

（模板很大，正在慢慢从ERB转换，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:20:14.533

> 有没有办法让这些模板编译并忽略不评估的块

不存在的属性是`undefined`，并且根本不会被渲染。换句话说`{{thisDoesNotExist}}`，它将是不可见的——它会编译得很好。

> 或者更好的是，*将*它们替换为 html 元素，以便更容易在浏览器中发现它们

正如 Cory 所说，您可以使用`undefined`Ember.Handlebars.registerBoundHelper[来](http://emberjs.com/api/classes/Ember.Handlebars.html#method_registerBoundHelper)检查.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:16:42.750

对于车把助手来说，这似乎是一个完美的案例。助手可以验证该值并返回您想要的值或 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:56:05.110

## 下面的代码应该非常小心地使用，因为它没有在应用程序中进行过测试。

`undefined`替换模板中可能值的一种可能解决方案是覆盖`Ember.getPath`，它用于在模板中查找路径的值，请参见[http://jsfiddle.net/pangratz666/hKK8p/](http://jsfiddle.net/pangratz666/hKK8p/)：

```
var getPath = Ember.getPath;
Ember.getPath = function(obj, path) {
    var value = getPath(obj, path);
    return (Ember.none(value) ? 'OMG %@ is not defined!!'.fmt(path) : value);
}; 
```

如果此代码将在应用程序中**临时**使用，我还将对`undefined`值的检查限制为特定的`obj`. 所以沿着这些思路：

```
App.objectWhichHasUndefinedProps = Ember.Object.create({
    ...
});

Ember.View.create({
    templateName: 'templateWithAttributes',
    objBinding: 'App.objectWhichHasUndefinedProps'
}).append();

var getPath = Ember.getPath;
Ember.getPath = function(obj, path) {
    var value = getPath(obj, path);
    if (obj === App.objectWhichHasUndefinedProps) {
        return (Ember.none(value) ? 'OMG %@ is not defined!!'.fmt(path) : value);
    }
    return value;
}; 
```

# spring - 在应用程序上下文之外应用弹簧方面（在存根单元测试中）

> ID：11162484
> 
> 赞同：0
> 
> 时间：2012-06-22T18:57:29.727
> 
> 标签：spring, unit-testing, mockito, aop

这是一个奇怪的。我有一些测试失败，因为正在应用一个方面，所以自动装配服务为空，随之而来的是坏事。问题是我无法理解这个方面是*如何*被应用的，因为在测试中我用 new 构造了被测对象。

```
@RunWith(MockitoJUnitRunner.class)
public class TheControllerTest {

    @Spy
    private TheController controller = new TheController();

    @Mock
    private HttpServletRequest request;

    @Mock
    private ConfigService configService;
  ....

@Before
public void setup() {
    controller.setConfigService(configService);
....
    }

@Test
public void testGetAccountsList() throws Exception {
Mockito.when(accountService.getAllAccounts()).thenReturn(Arrays.asList(account1,     account2));

    Map<String, Object> result = controller.getAccountsList(request);
...    
}
} 
```

我显然省略了很多代码，但实际上，我只是不明白，鉴于控制器是如何实例化的，它本可以应用建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:57:08.923

一个可能的原因可能是如果您在 Eclipse 中运行它 - 在启用了 ajbuilder 的项目中，即使您明确期望 Spring AOP 通过动态代理，ajbuilder 实际上会执行编译团队编织，因此您会看到建议增强类即使使用正常的“新”。你能检查一下吗，解决方法是禁用“ajbuilder” - 这是一个参考 - [JUnit weaving wrong Spring AOP Bean](https://stackoverflow.com/q/10129929/204788)

# iphone - 如何在后台线程中延迟调用方法

> ID：11162499
> 
> 赞同：14
> 
> 时间：2012-06-22T18:58:38.793
> 
> 标签：iphone, objective-c, ios

我有一个我想`-viewDidLoad`在后台线程之后调用的方法。有没有办法结合这两种方法：

`[self performSelector:(SEL) withObject:(id) afterDelay:(NSTimeInterval)]`

和

`[self performSelectorInBackground:(SEL) withObject:(id)]`?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T19:06:28.300

Grand Central Dispatch[`dispatch_after()`](http://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW3)将在指定队列的指定时间后执行一个块。如果您创建一个后台队列，您将拥有您想要的功能。

```
dispatch_queue_t myBackgroundQ = dispatch_queue_create("com.romanHouse.backgroundDelay", NULL);
// Could also get a global queue; in this case, don't release it below.
dispatch_time_t delay = dispatch_time(DISPATCH_TIME_NOW, seconds * NSEC_PER_SEC);
dispatch_after(delay, myBackgroundQ, ^(void){
    [self delayedMethodWithObject:someObject];
});
dispatch_release(myBackgroundQ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T19:10:07.910

尝试以下操作：

```
// Run in the background, on the default priority queue
dispatch_async( dispatch_get_global_queue(0, 0), ^{
    [self performSelector:(SEL) withObject:(id) afterDelay:(NSTimeInterval)]
}); 
```

代码未测试

请注意，您的选择器/方法不得使用 UIKit（因此不要更新 UI）或访问 UIKit 属性（如框架），因此您的选择器可能需要将工作重新启动到主线程。例如

```
(id)SomeMethod:UsingParams: {

    // Do some work but the results

    // Run in the background, on the main queue
    dispatch_async(dispatch_get_main_queue(), ^{
        // Do something UIKit related
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T19:00:07.870

```
[self performSelector:(SEL) withObject:(id) afterDelay:(NSTimeInterval)] 
```

在被调用的线程上执行选择器。因此，当您从后台线程调用它时，它将在那里运行...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T19:07:31.580

您可以按照示例执行此操作：

```
dispatch_time_t delay = dispatch_time( DISPATCH_TIME_NOW, <delay in seconds> * NSEC_PER_SEC );
dispatch_after( delay, dispatch_get_main_queue(), ^{
    [self performSelectorInBackground: <sel> withObject: <obj>]
}); 
```

不知何故混合解决方案。最好坚持使用完整的 GCD 方法。

# data-mining - 有没有关于使用大数据的好网站？

> ID：11162514
> 
> 赞同：-2
> 
> 时间：2012-06-22T18:59:51.237
> 
> 标签：data-mining, bigdata

我正在寻找人们解释他们如何使用大数据解决性能和其他问题的网站\博客。我知道一些有关可扩展 Web 应用程序和网站的资源（如 twitter、facebook）。没关系，但我正在寻找主要用于数据挖掘的具体算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:09:25.417

实际上，很多在大数据上做的事情都不符合“数据挖掘”的条件。他们最多*将*先前学习的规则应用于统一的大数据，主要是预测消费者对向他们提供广告的兴趣。但这主要归结为“对体育感兴趣”类型的决定。相当大的错误率在这里是可以接受的，因为向对体育不感兴趣的人提供体育广告几乎没有成本。网络上充斥着谷歌将人们置于错误的消费群体中的故事。甚至经常错误地预测性别。

每当您看到“大数据”时，请谨慎对待。它主要是吹牛和流行语宾果游戏。大数据的挑战仍然在于实际完成它，而不是（尚未）正确完成它。

一个很好的例子是这篇文章：[http ://www.technologyreview.com/web/39487/](http://www.technologyreview.com/web/39487/)

雅虎预测（使用推特“大数据”并推送这篇声称他们比出口民意调查要好得多的文章。吹嘘吹嘘）“罗姆尼有 90% 的机会赢得南卡罗来纳州”。实际上，罗姆尼得到了 28%，而金里奇得到了 40%。

或者尝试一些“情绪分析”类型的工具。他们会告诉你，包含“小狗”的推特帖子是正面的，包含“蟑螂”的帖子是负面的。这就是他们如今通过“情绪分析”获得的质量。同样，他们非常专注于从数据中获取*任何东西*，他们还没有真正分析（甚至*验证*）结果。对不起。我敢打赌，我会因为如此批评而遭到一些反对，但这就是每天都在发生的事情。请参阅雅虎示例。他们显然能够处理他们的“大数据”，但他们的结果肯定还没有准备好迎接黄金时段，他们仍然需要努力。

同样，对于某些情况，例如广告定位，错误率可能非常高。任何比随机更好的东西，都比随机更好！这意味着比只投放随机广告更多的钱。所以它不是一文不值；只是可能无法与非大数据方法相提并论。

# netsuite - 无法调试 Netsuite Restlet

> ID：11162515
> 
> 赞同：1
> 
> 时间：2012-06-22T18:59:51.487
> 
> 标签：netsuite

我似乎无法调试restlet。我不断收到错误：

```
INVALID_HOST
Invalid host debugger.netsuite.com. Please send RESTlet requests to https://rest.netsuite.com/. 
```

即使我的部署将外部 URL 列为： `https://debugger.netsuite.com/app/site/hosting/restlet.nl?script=58&deploy=1`并且其状态为“正在测试”

我登录 debugger.netsuite.com，单击以使用现有脚本，它为我提供了一个 cookie。我将此 cookie 添加到我的 HTTP 请求标头中，但仍然返回上述错误。

我发送的请求标头是：

```
Cookie: NS_VER=2012.1.0; JSESSIONID=$session_id
Content-Type: application/json
Authorization: NLAuth nlauth_account=$account_id,nlauth_email=$email,nlauth_signature=$password,nlauth_role= 
```

有谁知道为什么我无法连接到调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T22:50:41.587

如上所述，带有“授权”标头和 Cookie 会产生您看到的错误。此外，请确保以下事项：

*   RESTlet 以“测试”模式部署
*   您是 RESTlet 的所有者
*   您的 Netsuite 帐户已启用调试。对此不是 100% 确定，但我有两次登录，只有一次能够成功调试 RESTlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T02:04:39.353

Look for Advanced Rest Client in the google webstore. The service is free and works very well when debugging Netsuite Restlet.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:09:45.017

您可能不再需要它，但 NetSuite 在线帮助有一个页面专门说明如何在 NetSuite 调试器中调试您的 RESTlet。它将过程描述为登录到 Debugger 服务器，然后单击“Debug Existing”，然后让您的脚本运行。这样，调试器就知道如何为您提供帮助。按照您的方式，您试图通过调试器服务器运行脚本，但没有给它机会来获取该脚本的执行并控制它。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:23:06.917

你在正确的轨道上。您只需删除您的授权数据，因为您已经在使用来自 Debugger 的 Cookie 进行身份验证。

SuiteAnswers 中也提供了此解决方案

# c++ - C++11 元编程 - 在编译期间查找枚举值（值包含间隙）

> ID：11162525
> 
> 赞同：6
> 
> 时间：2012-06-22T19:00:17.543
> 
> 标签：c++, enums, c++11, metaprogramming

有没有办法**在编译时**验证给定值是否在给定枚举的值范围内，因此有效？

```
enum myenum { val1 = 10, val2 = 30, val3 = 45 }

template <myenum t>
class myClass
{ ... }

myClass<10> a; // fails, OK
myClass<val1> b; // compiles OK
myClass<myenum(24)> c; //compiles, NOT OK! 
```

在那里使用第二个模板非类型布尔参数将很有用，并且该布尔值的值将由元函数给出，给定值将验证该值是否在 myenum 的值内。

我查看了各种与枚举相关的问题，例如如何迭代枚举，似乎无法完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:08:33.627

```
enum myenum { val1 = 10, val2 = 30, val3 = 45 };
template<myenum e> struct is_valid_myenum { static const bool value = (e==val1 || e==val2 || e==val3); };

template<myenum t>
class myClass
{
    static_assert(is_valid_myenum<t>::value, "t must be a valid enum value");
};

myClass<10> a; // fails, OK
myClass<val1> b; // compiles OK
myClass<myenum(24)> c; // fails, OK 
```

* * *

如果您真的非常想避免重复（并且对使用某些外部工具生成源代码不感兴趣），您可以求助于宏骇客。

```
#define LIST \
    ITEM(val1,10)\
    ITEM(val2,30)\
    ITEM(val3,45)

#define ITEM(NAME,VALUE) NAME = VALUE,

enum myenum { LIST };

#undef ITEM

#define ITEM(NAME,VALUE) e==NAME ||

template<myenum e> struct is_valid_myenum { static const bool value = ( LIST false ); };

template<myenum t>
class myClass
{
    static_assert(is_valid_myenum<t>::value, "t must be a valid enum value");
};

myClass<10> a; // fails, OK
myClass<val1> b; // compiles OK
myClass<myenum(24)> c; // fails, OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:07:07.537

您永远无法阻止其他开发人员自作主张。你永远不可能赢。只要确保您的 API 不会让事情**变得简单**。

如果他取了一个无效的值，强制转换，然后传递给你，那纯粹是他的问题。这与您为他提供一个以类型指针`T*`作为参数的函数相同的问题，但他获取一些随机数据（任意类型），将其强制转换`T*`并传入。

这就是强制转换的工作原理：进行强制转换的人有责任保证被强制转换的表达式可以安全地解释为他强制转换的类型的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:21:03.087

如果枚举的名称对您来说并不重要，也许您可​​以将其传输到数组中，例如：

```
const int myenum[]={10,30,45} 
```

然后使用索引从 myenum 中引用它们。

```
template<unsigned int t>
class myClass
{
    static_assert(t < sizeof(myenum)/sizeof(int), "t must be a valid enum index");
    int val=myenum[t];
    ...
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:06:54.277

如果没有以元编程形式重新声明您的所有信息，这是无法做到的。但是，您可以例如执行以下操作：

```
enum myenum { val1 = 10, val2 = 30, val3 = 45 };
typedef vector_c< myenum, val1, val2, val3 > typed_myenum;

typedef
    contains< typed_myenum, integral_c< myenum, val >::value
    val_found; 
```

使用来自**Boost.MPL**的功能，尽管实际语法可能有点偏离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:09:35.233

没有办法在运行时检查值是否在枚举的有效范围内，在编译时则更少。

检查的唯一方法是对每个值进行暴力检查。像这样的东西：

```
enum lala
{
  A = 10,
  B = 20,
  C = 30
};

template< int value >
struct T
{
  static_assert( (value == A) || (value == B ) || (value == C), "wrong value" );
};

int main()
{
  T< 10 > t10;
  T< 20 > t20;
  T< 25 > t25;
  T< 30 > t30;

  (void)t10;(void)t20;(void)t25;(void)t30;
} 
```

# java - 将命令行命令添加到文件重命名批处理

> ID：11162527
> 
> 赞同：0
> 
> 时间：2012-06-22T19:00:28.057
> 
> 标签：java, windows

我有一个工作文件重命名 java 工具，现在我想添加一个 if 条件来运行命令行命令，如果我选中一个框作为它重命名的每个文件的重命名过程的一部分。

稍后我将更改 dos 代码，但我发现它是一个有效的示例。我的部分问题是我的文件重命名是它自己的类，所以我还需要弄清楚如何组合这个类或以某种方式从我的主重命名类中引用 dos 命令。

**更新**

我用答案中的更改更新了代码，但是命令行命令不起作用，它使 java 崩溃而没有错误。该命令确实从 cmd 行工作。

```
import java.io.IOException;
import java.io.InputStream;

public class doscommandrun {
     public static void run() {  
         final String dosCommand = "cmd converter.exe file.doc -android -o file.txt";
            try {
                final Process process = Runtime.getRuntime().exec(
                        dosCommand + " ");
                final InputStream in = process.getInputStream();
                int ch;
                    while((ch = in.read()) != -1) {
                        System.out.print((char)ch);
                    }
                    } catch (IOException e) {
                        e.printStackTrace();
            }
        }
    } 
```

`enter code here`文件重命名代码：

```
private void renameFile(){

    boolean operationResult = false;
    boolean overallResult = true;
    int failCount = 0;

    /* the operation of this part is ensured by the chooseDirectory()
     * WE get the list of files in the directory
     * get the conditions set by users
     * and perform the file rename operation.
     */

    //Let's get all the information from user
    String[] fileList = directory.list();  //the list of files in the directory
    String Prefix = txtPrefix.getText();
    String Rename = txtRename.getText();
    String Suffix = txtSuffix.getText();
    String digits = (String) cboSequence.getSelectedItem();
    int StartingNum;
    String generatedSequence;
    File oldFile;

    //let's call the output frame
    if(cbxOutput.isSelected() && OUTPUT_ON == false){
        buildOutput();
        OUTPUT_ON = true;
    }

    //display the list of files and readability of each file
    for(int i = 0; i < fileList.length; i++){   
        oldFile = new File(directory.getPath()+"/"+ fileList[i]);
        String readability = fileList[i] +" - readable?: "+oldFile.canRead();
        System.out.println(readability);

        if(OUTPUT_ON)
            txaOutput.append("\n"+readability);
    }

    for(int i = 0; i < fileList.length; i++){

        /* get the file extension that we need, and form a new name, 
         * we would check if the Ignore File Extension is selected
         */
        oldFile = new File(directory.getPath()+"/"+ fileList[i]);

        String fileExtension;

        if(cbxIgnoreExtension.isSelected() == true ){
            fileExtension = "";
        }
        else
            fileExtension = getFileExtension(fileList[i]);

        //this part get the original filename       
        String fileName = getFileName(fileList[i]);

        String inputInfo = "The input filename->"+ fileList[i] + "\nfile name->" + fileName + "\nextension->" + fileExtension;   
        System.out.println(inputInfo);

        if(OUTPUT_ON)
            txaOutput.append("\n"+inputInfo);

        /* generate sequence for the Name
         *if the digits selection is NONE, we ignore it
         */
        if(digits.equals("None") == true){
            generatedSequence = "";
        }
        else{
            StartingNum = Integer.parseInt(txtSequence.getText());
            generatedSequence = nameSequence(StartingNum + i, digits);
        }

        //this is affected by the RenameOption, if Rename has something then only we RENAME
        if(cbxRename.isSelected() == true){
            fileName = Rename + generatedSequence;   //the fileName will change.
        }
        else{
            //if Rename has nothing, but the txtSequence has some Value, we take it to the naming too
            fileName = fileName.substring(0,4)+ generatedSequence;
            if(cbxAndroid.isSelected() == true ){
                doscommandrun.run();
                }

        //the New File Name
        String newFileName = Prefix + fileName.substring(0,4) + Suffix + fileExtension;
        String tentativeName = "new Filename will be ->"+newFileName+"\n";
        System.out.println(tentativeName);

        if(OUTPUT_ON)
            txaOutput.append("\n"+tentativeName);

        // ! Perform the file rename, if the Experimental Mode is not selected
        if(cbxExperiment.isSelected() == false){

            operationResult = oldFile.renameTo(new File(directory.getPath()+"/"+newFileName));
            String renameResult = "\t*Rename successfully?: " + operationResult+"\n\n";
            System.out.println(renameResult);
                if(operationResult == false)
                    failCount++;

                if(OUTPUT_ON)
                    txaOutput.append("\n"+renameResult);

            //make up the overall result
            overallResult = (operationResult && overallResult);
        }

    }

    if(cbxExperiment.isSelected() == false){
        System.out.println("Overall Result: "+overallResult);
        if(overallResult)
            JOptionPane.showMessageDialog(null, "All files renamed successfully!");
        else
            JOptionPane.showMessageDialog(null, "File renamed with "+ failCount+ " failure(s)");
    }//end if
    }

}//end renameFile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:05:10.960

您可以在调用的 doccommandrun 类中创建一个静态方法，该方法将在调用`run()`时执行当前在 main 方法中的内容。

```
public class DosCommandRun 
{
   public static void run() 
   {
      //..do stuff from main
   }
} 
```

现在，每当您想调用 dos 命令时，您都可以将其插入`DosCommandRun.run()`代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:27:43.610

我在我的 renametool 类中的 cmd 之后添加 /c

我仍然有问题，但枯萎了一个不同的问题。

# asp.net - 在 asp.net 中设置图表的最低级别

> ID：11162534
> 
> 赞同：0
> 
> 时间：2012-06-22T19:01:23.967
> 
> 标签：asp.net, charts

默认情况下，ASP.NET 图表控件的最低级别是`0`，我想将此级别设置为`-1`. 这样`0`就可以正确显示 y 轴上的值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:13:12.127

这应该有效。

```
var chart = new Chart();

//
// Code to define chart areas etc...
//

chart.ChartAreas[0].AxisY.Minimum = -1; 
```

# c# - 使用 OleDbDataReader 使用未分配的局部变量 c#

> ID：11162538
> 
> 赞同：-3
> 
> 时间：2012-06-22T19:01:31.067
> 
> 标签：c#, oledbdatareader

我遇到了问题，一直在撞墙......当我调用“dbReader = dbCommand.ExecuteReader();”时，我不断收到“使用未分配的局部变量” 它说使用未分配的局部变量“dbCommand”。有人可以看看这个并告诉我我在哪里以及我做错了什么吗？提前谢谢你。

```
 public void computerList()
    {
        //Create SQL strings
        string sql = "SELECT Computers FROM [Sheet1$]";

        //Create the instances
        OleDbConnection dbConnection;
        OleDbDataAdapter dbAdapter;
        OleDbCommand dbCommand;
        OleDbDataReader dbReader; 
        DataTable dataTable;

        //Call the instance
        dbConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.4.0;Data Source=Y:\\\\serverName\\Share\\document.xls;Extended Properties='Excel 12.0 Xml;HDR=YES'");
        dbAdapter = new OleDbDataAdapter(sql, dbConnection);
        dataTable = new DataTable();
        dbConnection.Open();
        dbReader = dbCommand.ExecuteReader();

        while (dbReader.Read())
        {
            int iRow = dataTable.Rows.Count;
            //MessageBox.Show("Count " + iRow.ToString());
            //MessageBox.Show(dbReader.ToString());
            for (int i = 0; i < iRow; i++)
            {
                int loopID = i;
                string rowData = dataTable.TableName;
                MessageBox.Show("Count" + loopID);
                MessageBox.Show(dbReader.GetString(iRow));
            }

        }
        //Close Connections 
        dbReader.Close();
        dbConnection.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:07:14.570

你不见了

```
OleDbCommand oCommand = new OleDbCommand (sql , dbConnection) 
```

你正在初始化`dbAdapter = new OleDbDataAdapter(sql, dbConnection);`

反而..

您还应该使用 using 语句来处理和关闭连接和读取器，而不是

```
dbReader.Close();
dbConnection.Close(); 
```

我会这样重写它......

```
public void computerList()
    {
        //Create SQL strings
        string sql = "SELECT Computers FROM [Sheet1$]";       

        using (OleDbConnection dbConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.4.0;Data Source=Y:\\\\serverName\\Share\\document.xls;Extended Properties='Excel 12.0 Xml;HDR=YES'"))
        {
           //dbAdapter = new OleDbDataAdapter(sql, dbConnection); //You dont need it
           //dataTable = new DataTable(); //don't need it
           dbConnection.Open();
           using(OleDbCommand oCommand = new OleDbCommand (sql , dbConnection))
           {
              using(OleDbDataReader dbReader = dbCommand.ExecuteReader())
              {
                   while (dbReader.Read())
                   {
                      //int iRow = dataTable.Rows.Count; //always zero you never used the datable
                      //MessageBox.Show("Count " + iRow.ToString());
                      //MessageBox.Show(dbReader.ToString());
                      for (int i = 0; i < dbReader.FieldCount; i++)
                      {
                          //int loopID = i; //dont need it
                          //string rowData = dataTable.TableName; //Dont need it
                          MessageBox.Show("Count" + i);
                          MessageBox.Show(dbReader.GetString(i));
                       }

                    }
               } //reader closed and disposed          
           }//command disposed
        } //connection closed and disposed
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:05:12.787

您需要初始化 dbCommand

```
//Call the instance
dbConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.4.0;Data Source=Y:\\\\serverName\\Share\\document.xls;Extended Properties='Excel 12.0 Xml;HDR=YES'");
dbCommand = new OleDbCommand("SELECT * FROM TableName", dbConnection);
dbAdapter = new OleDbDataAdapter(sql, dbConnection);
dataTable = new DataTable();
dbConnection.Open();
dbReader = dbCommand.ExecuteReader(); 
```

# c - 让 IE 浏览器打开文件

> ID：11162540
> 
> 赞同：1
> 
> 时间：2012-06-22T19:01:38.053
> 
> 标签：c, winapi, com, ole

我通过 COM/OLE 在我的 win32-C 应用程序中嵌入了默认的 Internet Explorer。我显示了一个网页，其中包含一个链接（锚标记）来保存/打开文件。当我单击链接时，它会在后台进行一些处理，但没有给我一个对话框，要求我保存或打开文件。从提琴手我知道它正在写入缓存但无法访问它或显示任何弹出窗口。

我希望看到对话框要求我保存或打开文件（默认）

如果我从 IE 浏览器执行此操作，那么一切正常。

编辑：我尝试了一个[示例代码](http://www.codeproject.com/Articles/3365/Embed-an-HTML-control-in-your-own-window-using-pla)，在其中我确实看到了[对话框](http://imageshack.us/f/204/stdapp.png)，为我提供了保存、打开文件的选项，尽管用[我的代码](http://imageshack.us/f/651/myappb.png)记录了所有内容，但我仍然看不到该框。

我正在考虑无模式对话框问题，但我可以在我的代码中看到一个[消息框。](http://imageshack.us/f/21/modeless.png)所以无模式对话框没有被禁用。

无法获得如何让它工作。

（注：请看附件图片）

编辑：我在我的代码中编辑了 EmbedBrowser 函数，我的浏览器没有得到指向我的 IOleClientSite 对象的指针

新代码：- [http://paste.ubuntu.com/1062010/](http://paste.ubuntu.com/1062010/)

但问题依旧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:14:22.373

我弄清楚了这个问题。
实现了接口DWebBrowserEvents2的invoke方法，下载时不显示文件下载框。修改它以允许相同。

# jquery - 如何将表单提交添加到 jquery 可放置脚本？

> ID：11162544
> 
> 赞同：0
> 
> 时间：2012-06-22T19:02:00.917
> 
> 标签：jquery, jquery-ui

当我将一个项目拖到列表中时，除了提交之外，将执行以下 jQuery。

jQuery：

```
...
$( "#group ul" ).droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    accept: ":not(.ui-sortable-helper)",
    drop: function( event, ui ) {
        // ****** THIS WORKS
        $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
        // ****** THIS IS NOT EXECUTING
        $(this).parents('form: first').submit();
        return false;
    }
... 
```

每个组都有一个表格。第一个表单 id 为 0，第二个表单 id 为 1，依此类推（源视图）：

```
<div id="team">
   <form accept-charset="UTF-8" action="/items/create_from_drop" data-remote="true" html="{:id=&gt;0}" method="post">
      ...
      <input id="group_id" name="group_id" type="hidden" value="3" />
      <ul>
          ... item list
      </ul>
   </form>

   <form accept-charset="UTF-8" action="/items/create_from_drop" data-remote="true" html="{:id=&gt;1}" method="post">
      ...
      <input id="group_id" name="group_id" type="hidden" value="5" />
      <ul>
          ... item list
      </ul>
   </form>
</div> 
```

有两个问题：

1.  首先，当下降发生时，我希望我可以触发具有相同事件的表单提交。那没有发生。
2.  我已提交“表单：第一”。如何更改选择器以根据 id 提交表单？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:09:18.267

尝试使用最接近（）而不是父母，这应该只得到一个元素。除此之外，请检查表单上是否有任何 onSubmit 事件，以及问题是否与此处理程序无关。

才意识到一件事……

在 $("#group ul").droppable...

id 组的元素在哪里？

# macos - 可以从其数据分叉中重建别名文件吗？

> ID：11162550
> 
> 赞同：3
> 
> 时间：2012-06-22T19:02:38.257
> 
> 标签：macos, alias, finder

Mac 别名文件有一个资源分支，其中包含一个“alis”资源，该资源是别名记录，可能还有一些图标资源。数据分支似乎包含别名记录和图标数据，但我不知道确切的格式是什么。它似乎不是数据分支、AppleSingle 数据或 MacBinary 数据中的资源分支。

如果我从别名文件中删除资源派生，Snow Leopard 中的 Finder 无法解析它，但 Lion 中的 Finder 可以（假设别名文件在完整的情况下可以解析）。

我想知道如何在无法解析别名的机器上以编程方式修复缺少资源分叉的别名文件（例如，因为它指向该网络上不存在的网络卷）。

# python - 如何从 pymongo 发出“show dbs”

> ID：11162551
> 
> 赞同：68
> 
> 时间：2012-06-22T19:02:43.367
> 
> 标签：python, mongodb, pymongo

我正在使用 pymongo，但我不知道如何执行相当于“show dbs”的 mongodb 交互式 shell。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-06-22T19:09:09.557

```
from pymongo import MongoClient
# Assuming youre running mongod on 'localhost' with port 27017
c = MongoClient('localhost',27017)
c.database_names() 
```

2020 年更新：

> 弃用警告：database_names 已弃用

使用以下内容：

```
c.list_database_names() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-11-28T13:51:57.773

就像今天一样

```
from pymongo import MongoClient
# client = MongoClient('host', port_number)
client = MongoClient('localhost', 27017)
cursor = client.list_databases()
for db in cursor:
    print(db) 
```

或者

```
from pymongo import MongoClient
# client = MongoClient('host', port_number)
client = MongoClient('localhost', 27017)
for db in client.list_databases():
    print(db) 
```

如果您使用 database_names，您将收到“DeprecationWarning: database_names is deprecated. Use list_database_names instead.”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-02T18:03:57.390

用Python3.5，可以这样试试

```
from pymongo import MongoClient
client = MongoClient('localhost', 27017)
print(client.list_database_names()) 
```

# python - with-as 技术是否适用于 cx_Oracle？

> ID：11162553
> 
> 赞同：1
> 
> 时间：2012-06-22T19:02:48.340
> 
> 标签：python, exception-handling, cx-oracle

在最新版本的 python 中，即使在以下（缩进的）代码块中发生异常，也可以使用类似`with open('abc.txt') as f:`的方法来保证文件已关闭。我想知道这种技术是否也适用于 cx_Oracle 连接对象。例如，如果在后续代码块中发生错误，我是否可以这样做来保证数据库连接关闭：

```
with cx_Oracle.connect('uname/pwd@schema.db') as conn:
  c = conn.Cursor()
  c.execute("Select * from table1")
  #...etc 
```

目前我可以通过使用 try...except...finally 来实现这一点，但我更喜欢 with...as 技术。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T19:09:50.307

是的，[该`Connection`对象可以充当上下文管理器](https://cx-oracle.readthedocs.io/en/latest/api_manual/connection.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T19:14:19.630

即使 Connection 对象自己没有这样做（显然它确实这样做了），只要它提供了一个方法，就可以很容易地使用[contextlib.closure](http://docs.python.org/library/contextlib.html#contextlib.closing)`.close()`制作自己的包装器

```
>>> from contextlib import closing
>>> 
>>> class FakeC(object):
...     def close(self):
...         print 'closing!'
...     def execute(self, cmd):
...         print cmd
... 
>>> with closing(FakeC()) as c:
...     c.execute("fred")
...     raise Exception("something went wrong!")
... 
fred
closing!
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
Exception: something went wrong! 
```

其他变体几乎同样容易。

[在上面写上“是！” 答案已发布并决定发布它。]

# javascript - 百分比后的Javascript onChange总和输入

> ID：11162556
> 
> 赞同：0
> 
> 时间：2012-06-22T19:02:53.787
> 
> 标签：javascript

```
<form name="cost">
    <table border="1">
        <tr>
            <td>Cost</td>
            <td><input type="text" name="cost" /></td>
        </tr>
        <tr>
            <td>Discount</td>
            <td><input type="text" name="discount" /> (<span id="discount2"></span>)%</td>
        </tr>
        <tr>
            <td>Net Cost</td>
            <td><input type="text" name="net" /></td>
        </tr>
    </table>
</form> 
```

大家好，我真的需要javascript编程的帮助。表格的过程是：

1.  在成本中放入一些
2.  然后放多个折扣（自动计算 span#discount2=cost*discount/100）
3.  净成本自动更新 = 成本折扣

我尝试了很多次，但没有运气加上缺乏 javascript 知识。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:13:59.943

首先，创建一个函数来做到这一点

```
function calculateDiscount()
{
var cost = document.getElementById('cost').value;
var discount = document.getElementById('discount').value;
//do the math
var net = cost-discount;
//update
document.getElementById('discount2').innerHTML = cost*(discount/100);
document.getElementById('net').value = net;
} 
```

您还需要更新您的 html，将 ID 添加到所有元素并调用该函数

```
<form name="cost">
<table border="1">
<tr><td>Cost</td><td><input type="text" id="cost" name="cost" onChange="calculateDiscount(); return false;" /></td></tr>
<tr><td>Discount</td><td><input onChange="calculateDiscount(); return false;" type="text" id="discount" name="discount" /> (<span id="discount2"></span>)%</td></tr>
<tr><td>Net Cost</td><td><input type="text" name="net" id="net" /></td></tr>
</table>
</form> 
```

# .net - (ABCPdf) 添加 HTML 失败：RPC 到 Gecko 引擎进程失败

> ID：11162559
> 
> 赞同：2
> 
> 时间：2012-06-22T19:03:00.777
> 
> 标签：.net, iis, gecko, abcpdf

我有一个 MVC .NET 应用程序，它使用 ABCPdf 来生成和提供 PDF 文件。它在我们的几台开发机器上运行良好，但有一台机器无法运行它。

该机器是 Windows Server 2003 - 32 位。

我们首先尝试对所有 ABCPdf 文件进行 bin 部署，但出现此错误。在机器上安装 ABCpdf 后，我们仍然收到此错误。

这是我们得到的错误（安装 ABCPdf 之前和之后）：

```
WebSupergoo.ABCpdf8.Internal.PDFException: Failed to add HTML: RPC to Gecko engine process failed.Remote process terminated unexpectedly.
[PDFException: Failed to add HTML: RPC to Gecko engine process failed.Remote process terminated unexpectedly.]
   WebSupergoo.ABCpdf8.Doc.AddUrl(String url, Boolean paged, Int32 width, Boolean disableCache) +181
   WebSupergoo.ABCpdf8.Doc.AddImageUrl(String url, Boolean paged, Int32 width, Boolean disableCache) +78
   WebSupergoo.ABCpdf8.Doc.AddImageUrl(String url) +64 
```

是否存在我们可能缺少的依赖项？我们需要在服务器机器上配置什么吗？

编辑：有问题的机器是一个更安全和限制性更强的环境。如果此错误似乎表明存在权限问题，请提出一些与 ABCPdf 权限相关的想法。

编辑2：

我们尝试运行这里找到的简单项目：http: [//www.websupergoo.com/support.htm#deploy](http://www.websupergoo.com/support.htm#deploy) [http://www.websupergoo.com/download/testscripts8net.zip](http://www.websupergoo.com/download/testscripts8net.zip)

这个项目给了我们同样的错误，这可能表明这不是权限问题。

这台机器上也安装了 ABCPdf7，所以我们尝试了这里的建议：[https](https://stackoverflow.com/a/9706680/320623) ://stackoverflow.com/a/9706680/320623 但这也没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T04:57:47.750

查看此链接 - [http://devio.wordpress.com/category/abcpdf/](http://devio.wordpress.com/category/abcpdf/)似乎很有希望。

在我的情况下，我能够通过移动服务器来获得一个可行的解决方案，所以从来没有找到这个问题的根本原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:25:35.507

您是否确定在开发人员机器上安装了 ABCpdf 版本？在我看来，ABCpdf 的次要版本之间的兼容性似乎有点难以处理——尤其是在同一台机器/服务器上运行多个使用不同版本 ABCpdf 的解决方案时。因此，请注意确切的版本号 - 8.1.0.6 到 8.1.0.7 似乎会让你大吃一惊。

尝试将文件`%ProgramFiles%\WebSuperGoo\ABCpdf .NET 8.1\ABCGecko`从工作机器复制到没有工作的机器上。（您可能必须先停止该过程`abcgeckowp`，它会在第一个 PDF 生成请求时自动重新启动）。

当我遇到同样的错误时为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:51:05.250

已经有一段时间了，但我认为问题在于我实际上在我的 bin 部署中丢失了一些文件。随意投反对票。

# objective-c - 将使用 JSON 解析的 Twitter 提要中的数据保存到 Plist

> ID：11162561
> 
> 赞同：0
> 
> 时间：2012-06-22T19:03:06.440
> 
> 标签：objective-c, xcode, uitableview, plist

我有一个`UITableView`来自 searchtwitter.com 的提要。我还有一个带有图像的详细信息表和`UILabel`. 我已经完成了所有这些工作，但我想`UIButton`在详细信息页面上添加一个，它将`UIImage`和标签保存到属性列表中。我对此很陌生；这是我到目前为止所拥有的（不工作）。

```
- (IBAction)SaveFriend:(id)sender
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentDirectory = [path objectAtIndex:0];

    NSString *plistPath = [documentDirectory stringByAppendingPathComponent:@"TwitterFriends.plist"]; 

    NSDictionary * tweet = [[NSDictionary alloc]init];

    NSString *text =  [tweet objectForKey:@"from_user"];
    NSString *user = [tweet objectForKey:@"from_user_name"];

    personName.text = text;
    personInfo.text = user;  

    // create dictionary with values in UITextFields
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: personName, personInfo, nil] forKeys:[NSArray arrayWithObjects: @"Name", @"info", nil]];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData) 
    {
        // write plistData to our Data.plist file
        [tweet writeToFile:plistPath atomically:YES];
    }
    else 
    {
        NSLog(@"Error in saveData: %@", error);
       [error release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:17:09.350

不要使用 .plist，而是尝试使用 NSArray 或 NSMutableArray，然后使用 writeToFile 方法。例如：

```
NSMutableArray *temp = [NSMutableArray new];
[temp addObject:image];
[temp addObject:label];
[temp writeToFile:[self saveFilePath:@"filename"] atomically:YES];

//Returns the saved information path
- (NSString*) saveFilePath: (NSString *) add
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *path = [paths objectAtIndex:0];
    NSString *filename = [path stringByAppendingPathComponent:add];
    return filename;
} 
```

# eclipse - 设置 eclipse PDT 以使用 Xdebug 调试驻留在远程服务器上的网站

> ID：11162562
> 
> 赞同：3
> 
> 时间：2012-06-22T19:03:21.323
> 
> 标签：eclipse, eclipse-pdt

我已经尝试了很多，但无法理解使用 eclipse Indigo PDT 和 Xdebug 调试驻留在远程服务器上的 PHP 网站所涉及的步骤。以下是我的配置。

远程：LAMP、Xdebug（完全设置）

本地：LAMP、带 RSE 的 Eclipse PDT、

我的主要问题是关于我需要在本地使用 eclipse 进行的设置才能调试远程网站。具体来说：

1.  我需要在本地创建一个新的eclipse项目吗？如果是，我应该从哪里加载源文件以及如何加载？我是否需要与服务器上的源文件完全相同的副本？

2.  在开始调试之前，我是否需要将所有文件都保存在本地？我只将 index.php 复制到本地项目并开始调试。我在开始调试网站时收到了远程连接，并且可以单步执行 index.php，但在那之后就不行了。如果我不需要事先在本地拥有所有源文件，如何在 20 次函数调用后到达的文件中设置断点？

3.  需要设置哪些其他设置来链接本地和远程项目。我需要添加新的 PHP 服务器吗？调试配置的设置应该是什么？

我知道 sshfs 并尝试使用此链接进行设置：http: [//www.docplanet.org/php/how-to-debug-php/](http://www.docplanet.org/php/how-to-debug-php/) 但 eclipse 花了很长时间在服务器上构建项目文件并挂起。

我已经看遍了。一个很好的链接将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:24:37.633

我也在eclipse论坛上发布了这个问题并得到了答案： http: [//www.eclipse.org/forums/index.php/mv/msg/365474/890896/#msg_890896](http://www.eclipse.org/forums/index.php/mv/msg/365474/890896/#msg_890896)

所以这里是答案：

1.  是的，您在本地需要源文件和 Eclipse 项目。没有调试器提供源文件。我在 SO 上读到，对于 PHP，我们只需要正在调试的行相同，而对于 C#，整个项目必须是一个副本。

2.  是的，您需要本地文件并在其中设置断点。

3.  我发现的一件事是您不需要像我们对普通项目那样启动调试器。Eclipse 在您设置调试器的那一刻开始接受调试连接。因此，您只需要打开启用调试的网页，eclipse 就会捕获连接并通知您。

# jquery - Eyecon jQuery 颜色选择器 Onchange 背景更改

> ID：11162564
> 
> 赞同：0
> 
> 时间：2012-06-22T19:03:30.563
> 
> 标签：jquery, color-picker

我正在使用 eyecon [http://www.eyecon.ro/colorpicker/的颜色选择器](http://www.eyecon.ro/colorpicker/)

我想做的很简单（这就是我的想法），我想在使用 jQuery 下拉颜色选择器调色板后立即更改 Body 背景 这是我正在寻找的示例，但除了我想添加颜色选择框而不是单击文本并出现框我真的不喜欢我想要颜色选择框，只要它下拉调色板我想在这里看到颜色变化的实时预览和示例我想做，但不是单击文本，而是显示颜色选择器框。

演示[http://jsbin.com/ozibiq/](http://jsbin.com/ozibiq/)

# php - 以特殊字符突出显示搜索结果中的查询

> ID：11162566
> 
> 赞同：1
> 
> 时间：2012-06-22T19:03:34.580
> 
> 标签：php, highlight, substr

我有这个 PHP 代码来突出显示搜索结果中的查询。

```
 if (isset($_REQUEST['k'])){
        $k = htmlentities($_REQUEST['k']);
        $position = 0;

        while ($position = stripos($text, $k, ($position)?$position+30:0) and $position !== false){
            $text = substr_replace($text, '</span>', $position + strlen($k), 0 );
            $text = substr_replace($text, '<span class="highlight">', $position, 0);
        }
    } 
```

问题是，如果我搜索“cafe”之类的内容，可能会出现带有“cafe”（é）的结果，并且不会突出显示这些词......

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:14:13.533

这是一个链接，其中包含一个规范化数组和几个我认为您正在尝试实现的示例 - [http://ie2.php.net/strtr](http://ie2.php.net/strtr)

# c# - 如何从代码隐藏c#中显示隐藏的div

> ID：11162567
> 
> 赞同：2
> 
> 时间：2012-06-22T19:03:34.800
> 
> 标签：c#, asp.net, html

我正在尝试初始化一个用户控件，该控件包含一个在页面首次加载时隐藏的 gridview。当用户单击页面上的“搜索”按钮时，我想显示该用户控件中的网格视图。我尝试了很多不同的方法来显示和隐藏用户控件。我尝试将用户控件放在 div 中，然后使用 style="display: none" 将 div 初始化为隐藏，然后在代码中将样式更改为“块”。我尝试使用 2 个类，其中一个类的显示设置为无，另一个类的显示设置为阻止，然后根据用户单击“搜索”按钮在这两个类之间切换。我尝试使用面板并将其可见性设置为真/假，但是当我在用户单击搜索按钮后将其可见性设置为 true 时，面板永远不会显示。我尝试过的所有方法，除了使用面板及其可见性选项外，都给我以下例外：

```
{InnerText = '((System.Web.UI.HtmlControls.HtmlContainerControl)(divGrid)).InnerText' threw an exception of type 'System.Web.HttpException'} 
```

这是我正在使用的导致我出现此错误的代码：

标记：

```
<div id="divGrid" runat="server">
    <uc1:ContactsGridUserControl ID="ContactsGridUserControl1" runat="server" UpdateMode="Conditional"/>      
</div> 

<asp:Button ID="btnSearch" runat="server" Text="Search" Font-Size="Small" Height="30px" 
                Width="67px" ClientIDMode="Static" onclick="btnSearch_Click"></asp:Button> 
```

后面的代码：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    //string redirect = CommonStrings.editContactPage;
    bool bStatus = false;

    try
    {
        bStatus = validateFields();

        if (bStatus)
        {
            divGrid.Style["display"] = "block";           

        }
        else
        {
            lblError.Text = "Please enter characters for at least one field below";

        }
    }
    catch (Exception ex)
    {
        lblError.Text = "Exception: " + ex.ToString();
    }
}

protected bool validateFields()
{
    try
    {
        if ((txtbxFirstName.Text != null && txtbxFirstName.Text.Length > 0) ||
            (txtbxLastName.Text != null && txtbxLastName.Text.Length > 0) ||
            (txtbxPhoneNum.Text != null && txtbxPhoneNum.Text.Length > 0) ||
            (txtbxCity.Text != null && txtbxCity.Text.Length > 0) ||
            (txtbxZipCode.Text != null && txtbxZipCode.Text.Length > 0) ||
            (txtDate1.Text != null && txtDate1.Text.Length > 0) ||
            (txtDate2.Text != null && txtDate2.Text.Length > 0) ||
            (txtbxCompanyName.Text != null && txtbxCompanyName.Text.Length > 0))
        {
            return true;

        }
        else
        {
            return false;
        }
    }
    catch (Exception ex)
    {
        lblError.Text = "Exception: " + ex.ToString();
        return false;
    }
} 
```

完整堆栈跟踪：（我在 Visual Studio 中右键单击调用堆栈窗口并选择“显示外部代码”。我不确定我是否这样做是为了显示完整堆栈跟踪，而不是显示堆栈顶部的内容默认）

> App_Web_gjla55xr.dll!AdvancedSearch.btnSearch_Click(object sender, System.EventArgs e) 第 50 行 C# System.Web.dll!System.Web.UI.WebControls.Button.OnClick(System.EventArgs e) + 0x77 字节
> System.Web.dll !System.Web.UI.WebControls.Button.RaisePostBackEvent(string eventArgument) + 0x71 字节
> System.Web.dll!System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(string eventArgument) + 0xb字节
> System.Web.dll!System.Web.UI.Page.RaisePostBackEvent(System.Web.UI.IPostBackEventHandler sourceControl, string eventArgument) + 0xe 字节
> System.Web.dll!System.Web.UI.Page.RaisePostBackEvent(System. Collections.Specialized.NameValueCollection postData) + 0x25 字节
> System.Web.dll!System.Web.UI.Page.ProcessRequestMain(bool includeStagesBeforeAsyncPoint, bool includeStagesAfterAsyncPoint) + 0x15bc 字节
> System.Web.dll!System.Web.UI.Page.ProcessRequest(bool includeStagesBeforeAsyncPoint, bool includeStagesAfterAsyncPoint) + 0x8d 字节
> System.Web.dll!System.Web.UI.Page.ProcessRequest() + 0x4f 字节 System.Web.dll!System.Web.UI.Page.ProcessRequestWithNoAssert(System.Web.HttpContext 上下文) + 0x16 字节
> System.Web。 dll!System.Web.UI.Page.ProcessRequest(System.Web.HttpContext 上下文) + 0x32 字节
> App_Web_gjla55xr.dll!ASP.advancedsearch_aspx.ProcessRequest(System.Web.HttpContext context) + 0x33 字节 C# System.Web.dll!System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x65 字节系统.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step, ref bool completedSynchronously) + 0x4c 字节 System.Web.dll!System.Web.HttpApplication.ApplicationStepManager.ResumeSteps(System.Exception 错误) + 0x13e 字节
> System.Web.dll!System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest（System.Web.HttpContext 上下文，System.AsyncCallback cb，对象 extraData）+ 0xf8 字节
> System.Web.dll!System.Web.HttpRuntime.ProcessRequestInternal(System.Web.HttpWorkerRequest WR) + 0x1a2 字节 System.Web.dll!System.Web.HttpRuntime.ProcessRequestNoDemand(System.Web.HttpWorkerRequest WR) + 0x7d 字节
> 系统。 Web.dll!System.Web.HttpRuntime.ProcessRequest(System.Web.HttpWorkerRequest wr) + 0x47 字节
> WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Request.Process() + 0x17b 字节 WebDev.WebHost40.dll!Microsoft。 VisualStudio.WebHost.Host.ProcessRequest(Microsoft.VisualStudio.WebHost.Connection conn) + 0x6c 字节
> [Appdomain 转换]
> WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(object acceptedSocket) + 0x83 字节
> mscorlib.dll!System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(object state) + 0x2d bytes mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xb0 字节
> mscorlib.dll!System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() + 0x5a 字节 mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch() + 0x147 字节
> mscorlib.dll!System.Threading._ThreadPoolWaitCallback .PerformWaitCallback() + 0x2d 字节
> [原生到托管转换]

编辑：我解决了我的问题的答案。我需要用一个 ajax 更新面板包围用户控件，并将一个 asyncpostbacktrigger 连接到 Search 按钮单击事件。我还用另一个面板围绕用户控件，并从后面的代码中将该面板的可见性设置为真/假。

更新代码：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
        <asp:Panel ID="pnlGrid" Visible="false" runat="server">   
            <uc1:ContactsGridUserControl ID="ContactsGridUserControl1" runat="server" UpdateMode="Conditional"/>
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnSearch" EventName="Click" />
    </Triggers> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:32:11.427

我相信所有 ASP.NET WebForms 控件的基类是 HtmlControl，它具有**[Visible](http://msdn.microsoft.com/en-US/library/system.web.ui.control.visible%28v=vs.80%29)**属性。这会工作吗？：

```
divGrid.Visible = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:00:29.707

我想出了我的问题的答案。我必须用更新面板包围用户控件，并将触发器设置为搜索按钮的单击事件。我还用一个面板包围了用户控件，并简单地将可见设置为真/假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-10T09:55:29.427

我实际上遇到了这个问题。我`divControl.Visible = false;`在 Page_Load 事件中使用过，神秘地解决了代码破坏了我的页面格式的问题。所以最后我尝试 `divControl.Style.Add("visibility", "hidden");`了 Page_Load 事件 `divControl.Style.Add("visibility", "visible");`在所需的方法上它得到了解决，而不是破坏页面格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:27:16.140

如果我没记错的话，我不久前也遇到过类似的问题，这是由于如果控件在页面加载时（或启动时的某个时间点）不可见，则处理在某些时候无法正常工作。我现在不太记得细节了。

解决的想法：

*   使用 jquery 在文档准备好时隐藏它
*   在“隐藏”时使元素的位置离开屏幕，并在您想要显示它时将其移回它所在的位置

如果这些都不起作用，请发布完整的堆栈跟踪。

# sql-server-2008 - 分组选择语句

> ID：11162570
> 
> 赞同：0
> 
> 时间：2012-06-22T19:04:01.133
> 
> 标签：sql-server-2008, tsql, select

我有这个丑陋的`SELECT`声明：

```
 Select 'Urbain' as Véhicule, Count( DISTINCT Plaintes.IDEvenements) as Hebdomadaire
        FROM Plaintes join PVehicule on Plaintes.IDEvenements = PVehicule.IDEvenements 
        join EvVehicule on PVehicule.IDVehicule = EvVehicule.IDVehicule
        join Classe_Vh on EvVehicule.IDClasse = Classe_Vh.IDClasse
        join Type_Voy on Classe_Vh.IDTYPE_VOYAGE = Type_Voy.IDTYPE_VOYAGE
        Where Plaintes.Date >= @Sunday AND Plaintes.Date < DATEADD(Day, 7, @SUNDAY) AND Description = 'Urbain' 
```

这给了我这个结果：

![在此处输入图像描述](../Images/327328f881dbb5e2a9000196709f82f3.png)

我需要复制这个查询几次并更改一个简单的关键字，比如`Nolise`to`Scholar`等等。

我知道如果我只是复制它，我会收到不同的请求：

![在此处输入图像描述](../Images/9f49b5441b956e17348265a3086c5212.png)

我想要的是一个包含所有内容的数组，就好像它是一个单独的`SELECT`而不改变我的整个请求一样。有没有简单的方法可以做到这一点？

![在此处输入图像描述](../Images/615b5feae67f1a03ab55b47a010556c7.png)

编辑：

假设我想添加另一个必须检查另一个日期条件的列。

Hebdomadaire 这意味着每周一次的英语测试，看看它是否在本周：

```
 Where Plaintes.Date >= @Sunday AND Plaintes.Date < DATEADD(Day, 7, @SUNDAY) 
```

我会添加一个年度专栏来对此进行测试：

```
 Where Plaintes.Date >= 2012/01/01 
```

我怎样才能进行查询，以便只对第一个条件进行每周测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:06:55.227

使用`GROUP BY Description`：

```
SELECT
    Description as Véhicule,
    Count(DISTINCT Plaintes.IDEvenements) as Hebdomadaire
FROM Plaintes
JOIN PVehicule ON Plaintes.IDEvenements = PVehicule.IDEvenements 
JOIN EvVehicule ON PVehicule.IDVehicule = EvVehicule.IDVehicule
JOIN Classe_Vh ON EvVehicule.IDClasse = Classe_Vh.IDClasse
JOIN Type_Voy ON Classe_Vh.IDTYPE_VOYAGE = Type_Voy.IDTYPE_VOYAGE
WHERE Plaintes.Date >= @Sunday AND Plaintes.Date < DATEADD(Day, 7, @SUNDAY)
GROUP BY Description 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:07:08.200

```
Select description as Véhicule
    , Count( DISTINCT Plaintes.IDEvenements) as Hebdomadaire
FROM Plaintes join PVehicule on Plaintes.IDEvenements = PVehicule.IDEvenements 
join EvVehicule on PVehicule.IDVehicule = EvVehicule.IDVehicule
join Classe_Vh on EvVehicule.IDClasse = Classe_Vh.IDClasse
join Type_Voy on Classe_Vh.IDTYPE_VOYAGE = Type_Voy.IDTYPE_VOYAGE
Where Plaintes.Date >= @Sunday 
AND Plaintes.Date < DATEADD(Day, 7, @SUNDAY) 
AND Description IN ('Urbain','Scholar','otherthing') 
```

# mongodb - mongodb-插入时限制嵌入项

> ID：11162572
> 
> 赞同：0
> 
> 时间：2012-06-22T19:04:28.043
> 
> 标签：mongodb, mongodb-.net-driver

我想设计一个架构，其中 post 不能包含超过 10 个标签。

我怎么能做到这一点？

任何人请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:42:35.643

这个问题在这里得到了回答：[https ://groups.google.com/group/mongodb-user/browse_thread/thread/b07397a005de86ed](https://groups.google.com/group/mongodb-user/browse_thread/thread/b07397a005de86ed)

# javascript - 检索所选行中的值

> ID：11162573
> 
> 赞同：2
> 
> 时间：2012-06-22T19:04:30.463
> 
> 标签：javascript, html, dom

鉴于下面的代码，我怎样才能对其进行修改，以便它会提醒我任何选定行的第一列中的值是什么？

即选定的行是第二个，所以，alert("oranges")

```
<html>
<head>
<script type="text/javascript">
window.onload = function() {

var x = '<table id="mstrTable" border="1" cellspacing="1" width="100">\n'
      + '<tr><td>Apples</td><td>Carrots</td></tr><tr><td>Oranges</td><td>Celery</td></tr>\n'
      + '</table>\n' 
document.getElementById('test').innerHTML = x
var color = "#E1E0D7"
var rows = document.getElementById("mstrTable").getElementsByTagName("tr");
var n = rows.length;
var bgcs = [];
for(var i=0; i<n; ++i) bgcs[i] = rows[i].style.backgroundColor;

function changeColor(e) {
if(!e) e = window.event;
var o = e.target? e.target: e.srcElement;
while(o.tagName && o.tagName.toLowerCase()!="tr") o = o.parentNode;
    for(var i=0; i<n; ++i) {
    rows[i].style.backgroundColor = bgcs[i];
    if(rows[i]==o) rows[i].style.backgroundColor = color;
    }
}//end of function

if(document.addEventListener) for(var i=0; i<n; ++i) rows[i].addEventListener("click", changeColor, false);
else for(var i=0; i<n; ++i) rows[i].attachEvent("onclick", changeColor);

}//end of onload()
</script>
</head>
<body>
<div id="test"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:07:48.310

```
var rows = document.getElementById("mstrTable").getElementsByTagName("tr");
function getFirstCol(row){
    alert(row.getElementsByTagName('td')[0].innerHTML);
}
// Example usage
getFirstCol(rows[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:08:41.267

`tr`更改颜色时获取节点的子节点。

```
if(rows[i]==o) {
    rows[i].style.backgroundColor = color;
    console.log(rows[i].children[0])
} 
```

[演示](http://jsfiddle.net/uwzKg/1/)

# c - 运行时 fscanf() 出现“访问冲突”，但调试时没有

> ID：11162574
> 
> 赞同：3
> 
> 时间：2012-06-22T19:04:31.623
> 
> 标签：c, struct, access-violation, scanf

有谁知道这里可能会发生什么？

我明白了

```
Unhandled exception at 0x5081f508 (msvcr100d.dll) in myProgram.exe: 0xC0000005: Access violation writing location 0x041e0010. 
```

在这一行：

```
fscanf(fp, " %lf %lf %lf\n", &vertices[i].x, &vertices[i].y, &vertices[i].z ); 
```

运行我的程序时，但是当我在调试模式（Visual Studio 2010）下单步执行时，一切正常；按`fscanf()`预期读取文件。

异常实际上是在`input.c`' 行引发的：

```
#else  /* _UNICODE */
       _FASSIGN( longone-1, (char*)pointer , pFloatStr, (char)decimal, _loc_update.GetLocaleT());
#endif  /* _UNICODE */ 
```

如果我没错的话。而且我不知道这些关于 UNICODE 的评论是什么意思，这正是我将它们包括在这里的原因。

* * *

## 附加信息

### 调用堆栈：

```
msvcr100d.dll!_fassign_l(int flag, char * argument, char * number, localeinfo_struct * plocinfo)  Line 258 + 0x6 bytes  C++   

>msvcr100d.dll!_input_l(_iobuf * stream, const unsigned char * format,    localeinfo_struct * plocinfo, char * arglist)  Line 1281 + 0x21 bytes C++

msvcr100d.dll!vfscanf(int (_iobuf *, const unsigned char *, localeinfo_struct *, char *)* inputfn, _iobuf * stream, const char * format, localeinfo_struct * plocinfo, char * arglist)  Line 61 + 0x13 bytes    C

msvcr100d.dll!fscanf(_iobuf * stream, const char * format, ...)  Line 99 + 0x18 bytes   C

myProgram.exe!main(int argc, char * * argv)  Line 166 + 0x49 bytes  C++

myProgram.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes    C

myProgram.exe!mainCRTStartup()  Line 371    C 
```

### 其他一些信息

该程序是关于使用 OpenGL 进行着色的`vertices`，您在调用中看到的`fscanf()`是以下数组：

```
typedef struct _Vertex {
    double  x, y, z;
    int polygonsThisPartOf; // Number of polygons this vertex is a part of
    Point normal;
} Vertex; 
```

在我的程序的第一个版本中，它`vertices`是一个数组数组，一切运行良好；`vertices`在我修改代码以用作上述`struct`s的数组后，此异常开始发生。

### 数组的分配

```
 //                                              ˇ THIS is the mistake
vertices = (Vertex *) malloc(vcount * sizeof(Vertex *));
if (vertices == NULL) exit(-2); 
```

`vcount`是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:16:47.667

过去，当我遇到无法在调试版本中重现的错误时，几乎总是缓冲区溢出或某种指针错误。

调试版本可能会稍微不同地构建堆栈；堆栈上可能有额外的东西，有时当您注销缓冲区的末尾时，写入会进入调试内容，并且没有任何明显的坏事发生。当然，这假设缓冲区是在堆栈上分配的。或者，如果缓冲区在堆中，那么您的调试版本可能在堆上有额外的东西（可能是额外的字符串）。

因此，请检查您的变量`i`并确保它没有从数组末尾索引。并检查您的变量`fp`并确保它指向合理的地方；如果它是由指针算术确定的，请确保指针算术是正确的。

如果它没有在调试版本中重现，那么您应该检测您的发布版本以打印的值`i`、该缓冲区的当前长度，因此您可以查看是否在缓冲区内）。`fp``fp``fp`

PS我听说过这种称为“Heisenbug”的错误。尝试调试它会改变它的行为！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:08:30.477

1）您的“fscanf（）”语法看起来不错。

2）“_UNICODE”消息（在您进入的 MSVC 内部）仅表示您正在使用所有 Win32 代码的 16 位 Unicode 版本，它需要 16 位 Unicode 格式字符串（而不是 8 位 ASCII 格式字符串）。

这是正常的，也是意料之中的。如果您在 Visual Studio 中从源代码编译所有内容，那应该不是问题。

3) 我会集中精力确保您的数组元素“vertices[i]”已成功分配。

建议：

在“fscanf()”处设置断点，并在调试器中调用 fscanf*之前查看变量。*

此外，您可能希望在 fscanf 之前添加它，并将断点放在此调试行：

```
 vertices[i].x = vertices[i].y = vertices[i].z = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:09:39.297

问题出在代码的某个地方，它甚至可能与您的 fscanf 调用无关，某个内存位置写入的字节数超出了它最可能容纳的字节数。当您在调试模式下运行时，它分配的内存比需要的多，因此您通常不会在调试模式下看到错误，但一个好的调试器应该会在您写入超过缓冲区长度时告诉您。

# c# - 列出 TFS 项目中使用的“区域”

> ID：11162577
> 
> 赞同：2
> 
> 时间：2012-06-22T19:04:38.223
> 
> 标签：c#, tfs, workitem

我一直在使用 C# 中 Microsoft.TeamFoundation 模式中的 WorkItem 对象，但想知道是否有人知道我将如何引用“区域”类型的对象，或者就此而言，“迭代”。

似乎这些在 TFS 中被视为对象，但我没有遇到任何关于如何在 C# 中引用这些的信息。

您可以使用 WIQL 按 [Area] 或 [Iteration] 过滤 WorkItem，但是如果我想用所有 Areas 或 Iterations 填充 ComboBox 怎么办？

另外，如何查看我工作场所的 TFS 项目的数据库结构？

多谢你们，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:40:02.007

看看[这篇博文](http://blogs.microsoft.co.il/blogs/shair/archive/2009/01/30/tfs-api-part-9-get-area-iteration-programmatically.aspx)。有示例代码和演示。

这是一个可以完成这项工作的快速[LINQPad查询（下载](http://linqpad.net)[VS2010](http://sdrv.ms/MKIvNx) / [VS2012](http://sdrv.ms/MKIrxg)）：

```
void Main()
{
    const String CollectionAddress = "http://tfsserver:8080/tfs/MyCollection";
    const String ProjectName = "MyProject";

    using (var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
        new Uri(CollectionAddress)))
    {
        tfs.EnsureAuthenticated();
        var server = tfs.GetService<ICommonStructureService>();

        var projectInfo = server.GetProjectFromName(ProjectName);
        var nodes = server.ListStructures(projectInfo.Uri).Dump();

        // You should be able to re-factor this with "Iteration"
        // for getting those too.
        var nodesXml = server.GetNodesXml(
            nodes
                .Where(node => node.Name == "Area")
                .Select(node => node.Uri).ToArray(),
            true);

        var areaPathAndId =
            XElement.Parse(nodesXml.OuterXml)
            .Descendants("Node")
            .Select(xe => new 
            { 
                Path = xe.Attribute("Path").Value, 
                ID = xe.Attribute("NodeID").Value, 
            })
            .Dump();        
    }
} 
```

# c# - 如何在 Windows 窗体应用程序中将多行文本框文本传递给水晶报表

> ID：11162578
> 
> 赞同：0
> 
> 时间：2012-06-22T19:04:38.507
> 
> 标签：c#, crystal-reports

我有带有多行文本框的 c# 表单。我想将多行文本框文本发送到水晶报表公式字段。我知道如何传递文本框文本。

请提供可以演示相同内容的代码片段或文章。

例如：多行文本框中的 I/P 是：

```
Hello
World 
```

水晶报表中的 O/P 应该是：

```
Hello
World 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:55:02.893

我已经成功使用了这个

```
string test = "";
string multilinetextboxvalue = multiline.text;
string[] parseLines = multilinetextboxvalue.Split(new string[] { "\n", "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
foreach(string line in parseLines)
{ test += line + "' & chr(010) & '"; }
test = test.remove(test.Length -16, 16);
multiline.text = "'" + test + "'"; 
```

# ruby-on-rails - M. Hartl 的 Ruby on Rails 教程。第10章考试不及格

> ID：11162580
> 
> 赞同：1
> 
> 时间：2012-06-22T19:04:53.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

嗨，我是通过 Hartl 工作的新手。我被困在第 10 章的微博上。当我跑步时

```
bundle exec rspec spec/requests/authentication_pages_spec.rb 
```

终端返回这些失败消息：

```
Failures:

1) authentication authorization in the Users controller submitting to the update action 
 Failure/Error: before { put user_path(user) }
 AbstractController::ActionNotFound:
   The action 'update' could not be found for UsersController
 # ./spec/requests/authentication_pages_spec.rb:78:in `block (5 levels) in <top (required)>'

2) authentication authorization in the Users controller as wrong user submitting a PUT request to the Users#update action 
 Failure/Error: before { put user_path(wrong_user) }
 AbstractController::ActionNotFound:
   The action 'update' could not be found for UsersController
 # ./spec/requests/authentication_pages_spec.rb:110:in `block (6 levels) in <top (required)>'

3) authentication authorization in the Users controller as non-admin user submitting a DELETE request to the Users#destroy action 
 Failure/Error: before { delete user_path(user) }
 AbstractController::ActionNotFound:
   The action 'destroy' could not be found for UsersController
 # ./spec/requests/authentication_pages_spec.rb:122:in `block (6 levels) in <top (required)>'

Finished in 1.54 seconds
21 examples, 3 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:79 # authentication authorization in the Users controller submitting to the update action 
rspec ./spec/requests/authentication_pages_spec.rb:111 # authentication authorization in the Users controller as wrong user submitting a PUT request to the Users#update action 
rspec ./spec/requests/authentication_pages_spec.rb:123 # authentication authorization in the Users controller as non-admin user submitting a DELETE request to the Users#destroy action 
```

这是我的 authentication_pages_spec.rb 文件

```
require 'spec_helper'

describe "authentication" do
subject { page }
let(:user) { FactoryGirl.create(:user) }

describe "signin page" do
before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
before { visit signin_path }

describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
end

describe "with valid information" do
  before { sign_in user }

  it { should have_selector('title', text: user.name) }

  it { should have_link('Users',    href: users_path) }
  it { should have_link('Profile',  href: user_path(user)) }
  it { should have_link('Settings', href: edit_user_path(user)) }
  it { should have_link('Sign out', href: signout_path) }

  it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end
 end
end

describe "authorization" do

describe "for non-signed-in users" do
  let(:user) { FactoryGirl.create(:user) }

  describe "when attempting to visit a protected page" do
    before do
      visit edit_user_path(user)
      fill_in "Email",    with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    describe "after signing in" do

      it "should render the desired protected page" do
        page.should have_selector('title', text: 'Edit user')
      end
    end
  end
 end

  describe "in the Users controller" do

    describe "visiting the edit page" do
      before { visit edit_user_path(user) }
      it { should have_selector('title', text: 'Sign in') }
    end

    describe "submitting to the update action" do
      before { put user_path(user) }
      specify { response.should redirect_to(signin_path) }
    end

  describe "visiting the user index" do
      before { visit users_path }
      it { should have_selector('title', text: 'Sign in') }
    end

 describe "in the Microposts controller" do

    describe "submitting to the create action" do
      before { post microposts_path }
      specify { response.should redirect_to(signin_path) }
    end

    describe "submitting to the destroy action" do
      before { delete micropost_path(FactoryGirl.create(:micropost)) }
      specify { response.should redirect_to(signin_path) }
    end
  end

 describe "as wrong user" do
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
 end

describe "as non-admin user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:non_admin) { FactoryGirl.create(:user) }

  before { sign_in non_admin }

  describe "submitting a DELETE request to the Users#destroy action" do
    before { delete user_path(user) }
    specify { response.should redirect_to(root_path) }        
  end
end
end
end
end 
```

我不确定是什么原因造成的。有任何想法吗？谢谢西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:15:18.537

您是否在 user_controller.rb 中定义了更新和销毁操作？

这是我的供参考。

```
class UsersController < ApplicationController
  before_filter :signed_in_user,  only: [:index, :edit, :update]
  before_filter :correct_user,    only: [:edit, :update]
  before_filter :admin_user,      only: :destroy

  def index
    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = "Profile updated"
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed"
    redirect_to users_path
  end

  private
    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_path, notice: "Please sign in"
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to root_path unless current_user?(@user)
    end

    def admin_user
      redirect_to root_path unless current_user.admin?
    end
end 
```

# php - 为 foreach() 提供的参数无效；

> ID：11162584
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:05:20.407
> 
> 标签：php, codeigniter

我收到此错误，

为 foreach() 提供的参数无效；未定义的变量：行............第 13 行视图中的错误......

请帮助我..我不知道错误在哪里

**1.控制器**

```
function customer_area() {

  $this->load->model('cus_model');

  $data['rows']=$this->cus_model->cusall();

  $this->load->view('customer_view',$data);

} 
```

**2.型号**

```
function cusall() {     
  $q = $this->db->get('customer');        
  $this->db->select('*');
  if($q->num_rows()>0) {    
    foreach($q->result() as $rows){      
      $data[]=$rows;
    }
    return $data;
  }
}` 
```

**3.views**

```
<table border="1" height="200" width="200" bordercolor="#003366">
      <tr><th>ID</th></td><th>NAME</th><th>Type</th><th>Address</th><th>Mobile</th><th>Skype_Id</th><th>Email</th><th colspan="2">Actiom</th></tr>

      foreach($rows as $r)

    {
      echo "<tr>";
      echo "<td>". $r->id ."</td>";
      echo "<td>". $r->name ."</td>";
      echo "<td>". $r->type ."</td>";
      echo "<td>". $r->address ."</td>";
      echo "<td>". $r->mobile ."</td>";
      echo "<td>". $r->skype_id ."</td>";
      echo "<td>". $r->email ."</td>";
      echo "<td>". anchor('customer/input/'.$r->id,'Edit') ."</td>";    
      echo "<td>". anchor('customer/del/'.$r->id,'Delete') ."</td>";
      echo "</tr>"; 
      echo "<br>"; 
      }

      ?>
      </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:20:36.143

在您的模型中，返回 $q->result() 而不是循环遍历并将行放入数组中。

实际上，您几乎可以将其简化为：

新功能：

```
function cusall()       
{
    $q = $this->db->get('customer');
    return $q->result();
} 
```

# tfs - 以编程方式获取 TFS 构建定义元数据

> ID：11162585
> 
> 赞同：3
> 
> 时间：2012-06-22T19:05:49.857
> 
> 标签：tfs, build, metadata, definition, tfs-sdk

我想从 TFS 构建定义中获取并以编程方式编辑所有过程参数元数据。有谁知道这是怎么做到的吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:47:11.253

~~这取决于您所追求的，许多标准构建属性可以使用[CodePlex](http://teamprojectmanager.codeplex.com/)上提供的 TFS 团队项目管理器应用程序进行设置。~~

**根据以下评论更新。**

您需要使用 TFS API。[这里](http://blogs.microsoft.co.il/blogs/shair/archive/2011/01/11/tfs-api-part-33-get-build-definitions-and-build-details.aspx)有一个很好的介绍。如果需要设置自定义属性，可以修改[`ProcessParameters`](http://blogs.msdn.com/b/willbar/archive/2010/06/03/deserializing-process-parameters.aspx)（[和MSDN](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.client.ibuilddefinition.processparameters.aspx)）

`ProcessParameter`s 仅在参数与默认值不同时具有条目。尝试编辑现有构建定义并将设置更改为非默认值。`BuildSettings`具有要构建的解决方案的路径和要使用的配置。这可能是您想要编辑路径以匹配您的分支的地方。您还需要更改`Workspace.Mappings`新构建定义的属性。

# php - php配置找不到-lmysqlclient

> ID：11162586
> 
> 赞同：0
> 
> 时间：2012-06-22T19:06:09.010
> 
> 标签：php, mysql

我正在尝试使用 MYSQL (5.0.91) 配置 PHP 安装 (5.4.3)，以便与依赖 MDB2 mysql 模块的 PHP Web 应用程序一起使用。当我使用 PEAR 安装时，pear 告诉我 PHP 没有所需的 mysql 扩展。

一些谷歌搜索引导我检查 PHP.ini 文件，我发现其中 extension=php_mysql.dll 被注释掉了。我打开了它并重新启动了php。PHP 抱怨找不到 php_mysql.dll。

我意识到这可能是因为我没有在打开 --with-sql 标志的情况下安装 php。重新配置给我留下以下错误：

```
checking for MySQL support... yes
checking for specified location of the MySQL UNIX socket... /project/mullenl
checking for mysql_close in -lmysqlclient... no
checking for mysql_errno in -lmysqlclient... no
configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information. 
```

快速查看配置日志会发现问题：

```
/usr/bin/ld: cannot find -lmysqlclient 
```

当我在我的 mysql 安装中检查我的 lib 目录时，会出现以下内容：

```
libdbug.a   
libmysql.imp      
libmysqlclient.so*     
libmysqlclient.so.15.0.0*      
libmysqlclient_r.so*     
libmysqlclient_r.so.15.0.0*  
libmysys.a      
libndbclient.la*  
libndbclient.so.2*
libmygcc.a  
libmysqlclient.a  
libmysqlclient.so.15*  
libmysqlclient_r.a         
libmysqlclient_r.so.15*  
libmystrings.a               
libndbclient.a  
libndbclient.so*  
libndbclient.so.2.0.0* 
```

我不太确定下一步该做什么，但确实需要以这种方式配置 PHP 以支持 MDB2:MYSQL 模块。我怀疑（？）我不能这样做的原因是因为我没有安装 MYSQL 的开发版本，但我不确定情况是否如此。一如既往，任何想法、想法或建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:12:34.513

该`php_mysql.dll`扩展仅在 Windows 上使用，看起来您在 Unix/Linux 上。

如果您查看您的`phpinfo()`，您的配置选项是什么？

`--with-mysql=mysqlnd`您可以通过添加`./configure`选项将 mysql 构建到 PHP中。

如果您有在系统上编译的自定义版本的 mysql，则指定安装它的路径，而不是使用 mysql 本机驱动程序 (mysqlnd)`--with-mysql=/usr/lib`

# pyqt4 - 连接、重新连接插槽到信号 - 这会导致崩溃吗？

> ID：11162603
> 
> 赞同：0
> 
> 时间：2012-06-22T19:07:23.567
> 
> 标签：pyqt4, signals-slots

在 PyQt4 应用程序中，我根据用户操作将滑块连接到一个或另一个插槽。我更改插槽分配以响应按钮单击。几个不同的槽做不同的事情，太不同了，不能用一些“if”语句合并到一个槽中。

这个应用程序经常崩溃。我想知道像这样动态地将插槽重新分配给一个信号是否符合规定。这是否会导致 PyQt4 内部的悬空指针、内存损坏或其他不良情况？如果我做的没问题，我会在别处寻找错误。

这是我的应用程序的一个非常草图的版本：

```
def MyThing(QWidget):

    (in some approprate place)
       self.s = QSlider()

    def MethodOne(self):   # this is a slot handling a button click
       self.s.valueChanged.connect(self.someslot1)

    def MethodTwo(self):   # likewise
       self.s.valueChanged.connect(self.someslot2)

    def someslot1(self, svalue):  # slider movement handler
       (compute, show info based on slider position)

    def someslot2(self, svalue):   # similar to someslot1
       .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:55:25.950

如果调用 connect 时 2 个连接的对象仍然存在，则它本身不会导致崩溃。

根据您的代码，您似乎没有断开先前连接的插槽（`self.s.valueChanged.disconnect()`例如），这可能导致每个信号都多次调用两个插槽，这意味着您的应用程序可能会随着时间的推移而变慢，并且可能崩溃取决于您在插槽中执行的操作。

# c++ - 使用 ifstream 读取字节

> ID：11162608
> 
> 赞同：8
> 
> 时间：2012-06-22T19:07:39.087
> 
> 标签：c++, file-io

我对 c++ 比较陌生，并且对 ifstream 有一些问题。我要做的就是逐字节读取文件，但是在文件中间读取总是失败。我的代码：

```
void read(ifstream&f)
{
    unsigned char b;
    for (int i=0;;++i)
    {
        if(!f.good())
        {
            cout<<endl<<"error at: "<<i;
            return;
        }
        f>>b; // b=f.get(); and f.read(&b, 1); doesnt work either
        cout<<b;
        /* ... */
    }
} 
```

它正确读取前几百个字节，然后跳过文件的其余部分。缓冲有问题吗？我做错什么了？

编辑：

我刚刚发现了一些可能的原因：在文件中我使用 CRLF 行结尾（2 个字节），但是上述所有方法都只返回 LF，所以在每一行的末尾我只增加了一个，但是有文件中的 2 个字节。所以我的问题是：我怎样才能分别获得 CR 和 LF ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T19:11:45.013

尝试

```
f.read(&b, 1); 
```

两者`<<`和`get()`都适用于*text*，而不是二进制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:54:30.423

我终于通过以二进制模式打开文件来让它工作（感谢 Alex 引起我的注意）。

似乎 CR 字符混淆了 ifstream 和 cout，这引起了我的困惑，我会记住这一点。

# php - PHP WordPress 只显示一篇文章

> ID：11162612
> 
> 赞同：0
> 
> 时间：2012-06-22T19:08:06.460
> 
> 标签：php, wordpress

我需要这个 php 代码来显示最近的帖子。也许是在帖子上显示的 if 语句。有任何想法吗？任何帮助表示赞赏。

```
 $temp = $wp_query;  // assign orginal query to temp variable for later use   
    $wp_query = null;
    $wp_query = new WP_Query($args); 
    if( have_posts() ) : 

        while ($wp_query->have_posts()) : $wp_query->the_post(); 
    ?>

        <a href="<?php the_permalink() ?>" <?php post_class() ?> id="post-<?php the_ID(); ?>">
            <?php the_post_thumbnail("events-thumb"); ?>
            <h3><?php the_title(); ?></h3>
            <p><?php echo nl2br(get_post_meta($post->ID, 'proj_address', true)); ?></p>
            <span></span>
            <div style="clear:both;"></div>
        </a>

        <?php endwhile; ?>
    <?php 

        endif;
        $wp_query = $temp;  //reset back to original query
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:05:04.733

我更新了您的代码以获取最新帖子。

```
 <?php 
            $args = array(
                'numberposts'     => 1,
                'orderby'         => 'post_date',
                'order'           => 'DESC',
                'post_status'     => 'publish'
            ); 
            $temp = $wp_query;  // assign orginal query to temp variable for later use   
            $wp_query = null;
            $wp_query = new WP_Query($args); 
            if( have_posts() ) : 

                while ($wp_query->have_posts()) : $wp_query->the_post(); 
        ?>

            <a href="<?php the_permalink() ?>" <?php post_class() ?> id="post-<?php the_ID(); ?>">
                <?php the_post_thumbnail("events-thumb"); ?>
                <h3><?php the_title(); ?></h3>
                <p><?php echo nl2br(get_post_meta($post->ID, 'proj_address', true)); ?></p>
                <span></span>
                <div style="clear:both;"></div>
            </a>

        <?php endwhile; 
            endif;
            $wp_query = $temp;  //reset back to original query
        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T19:48:02.560

```
function home_post_limit( $query ) {
    if ( $query->is_home() && $query->is_main_query() ) {
        $query->set( 'posts_per_page', 1 );
    }
}
add_action( 'pre_get_posts', 'home_post_limit' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:50:48.640

在`$args`这一行中，您可以为查询放置任何参数：

```
$wp_query = new WP_Query($args); 
```

所以你可以在那里添加你的帖子限制：

```
$wp_query = new WP_Query( 'numberposts=1' ); 
```

[（ Codex](http://codex.wordpress.org/Class_Reference/WP_Query)中有更多 WP 查询参数）

# c - c 将几个参数传递给线程

> ID：11162613
> 
> 赞同：2
> 
> 时间：2012-06-22T19:08:06.687
> 
> 标签：c, multithreading, pthreads, posix

当我创建一个线程时，我想传递几个参数。所以我在头文件中定义了以下内容：

```
struct data{
  char *palabra;
  char *directorio;
  FILE *fd;
  DIR *diro;
  struct dirent *strdir; 
```

};

在 .c 文件中，我执行以下操作

```
if (pthread_create ( &thread_id[i], NULL, &hilos_hijos, ??? ) != 0){
       perror("Error al crear el hilo. \n");
       exit(EXIT_FAILURE);
} 
```

我如何将所有这些参数传递给线程。我想：

1）先用malloc给这个结构分配内存，然后给每个参数一个值：

```
 struct data *info
 info = malloc(sizeof(struct data));
 info->palabra = ...; 
```

2) 定义

```
 struct data info 
 info.palabra = ... ; 
 info.directorio = ...; 
```

然后，我如何在线程中访问这些参数 void thread_function ( void *arguments){ ??? }

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T19:11:56.013

这是一个工作（且相对较小）的示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>

/*                                                                                                                                  
 * To compile:                                                                                                                      
 *     cc thread.c -o thread-test -lpthread                                                                                         
 */

struct info {
    char first_name[64];
    char last_name[64];
};

void *thread_worker(void *data)
{
    int i;
    struct info *info = data;

    for (i = 0; i < 100; i++) {
        printf("Hello, %s %s!\n", info->first_name, info->last_name);
    }
}

int main(int argc, char **argv)
{
    pthread_t thread_id;
    struct info *info = malloc(sizeof(struct info));

    strcpy(info->first_name, "Sean");
    strcpy(info->last_name, "Bright");

    if (pthread_create(&thread_id, NULL, thread_worker, info)) {
        fprintf(stderr, "No threads for you.\n");
        return 1;
    }

    pthread_join(thread_id, NULL);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:11:55.357

不要使用选项#2。该`data`结构可以被覆盖（显式地，例如使用相同的结构来启动另一个线程，或者隐式地，例如将其覆盖在堆栈上）。使用选项#1。

要获取您的数据，请在线程开始时执行

```
struct data *info = (struct data*)arguments; 
```

然后`info`正常访问。确保`free`在线程完成时执行此操作（或者，我更喜欢让调用者在加入线程后释放它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:16:41.257

像上面第一种情况一样创建指向结构的指针：

```
//create a pointer to a struct of type data and allocate memory to it
struct data *info
info = malloc(sizeof(struct data));

//set its fields
info->palabra   = ...;
info->directoro = ...;

//call pthread_create casting the struct to a `void *`
pthread_create ( &thread_id[i], NULL, &hilos_hijos, (void *)data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:19:10.023

1）你需要使用 malloc 而不是像下面这样定义

```
struct data *info;
info = (struct data *)malloc(sizeof(struct data)); 
```

并在 pthrad 调用中传递结构的指针，如下所示

```
pthread_create ( &thread_id[i], NULL, &thread_fn, (void *)info ); 
```

2）您可以在线程函数中访问它们，如下所示

```
void thread_function ( void *arguments){

struct data *info = (struct data *)arguments;

info->....

} 
```

# php - 从 PHP codeigniter 应用程序连接到 MemSQL

> ID：11162619
> 
> 赞同：4
> 
> 时间：2012-06-22T19:08:40.383
> 
> 标签：php, codeigniter, database-connection, singlestore

[MemSQL 是新的](http://developers.memsql.com/). Stackoverflow 没有返回任何带有关键字“MemSQL”的搜索结果。MemSQL 声称与 MySQL 绝对相似，只是 MemSQL 快了 30 倍。我只是在研究 MemSQL，偶然发现了这个想法。还无法尝试，但我有一个与 DataBaseConnector 相关的非常基本的问题。

关于如何将现有的 PHP 应用程序与 MySQL SQLs 连接到 MemSQL 数据库，我找不到任何特定的说明。但是，[这个 MemSQL 页面](http://developers.memsql.com/docs/1b/guides/from_mysql.html)说：

> 要转换您的应用程序，只需将连接凭据更改为指向 MemSQL。

现在任何有经验的人都可以澄清如果我只更改我的 MemSQL 服务的端口号，那么所有当前编写的 SQL 都可以像以前使用 MySQL 一样正常工作吗？它是否也能够与我的 codeigniter 应用程序中当前编写的 Active-Records 语句一起使用？

***[考虑到我已经从 MySQL 导出了数据，并按照同一页面中的说明将数据导入到 MemSQL。]***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-22T22:39:08.617

```
echo '<pre>';
mysql_connect(":var/lib/memsql-ops/data/=memsql.sock",'root','');

$q = mysql_query('SHOW DATABASES;');

while ( $row = mysql_fetch_array($q, MYSQL_ASSOC) ) :
    print_r($row);
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:19:45.023

In theory it should.

Take a look here to see all the supported/unsupported commands

[http://developers.memsql.com/docs/1b/](http://developers.memsql.com/docs/1b/)

The one big downside i can see so far is there is a limit 2 two table joins per statement.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:39:03.187

Ruby 活动记录适用于 MemSQL。您可以使用 mysqldump 将数据移植过来。

# asp.net - ASP.NET 数据上下文问题

> ID：11162621
> 
> 赞同：0
> 
> 时间：2012-06-22T19:08:43.237
> 
> 标签：asp.net, vb.net, datacontext

我正在调用我的 DataContext 对象的 ExecuteQuery 方法。结果，我希望每一行都有一个字符串和一个整数，但是当我运行 ToList 函数时，我的所有值都是空的和 0。我所有的结果都应该是不同的字符串和数字。如果我直接运行它，我的查询运行完美，但 ExecuteQuery 返回垃圾而不是有效结果。这可能是什么原因？

先感谢您。

编辑：

```
public function something as List(of Pair(of String, Integer))
            Dim c As TTDataContext = ContextFactory.CreateDataContext()
            Dim startValueLen = CStr(StartValue).Length
            Dim query As String = "select top " & CStr(Limit) & " case " &
                                                                   " when WONum like '0000%' then SUBSTRING(WONum, 5, Len(WONum) - 4) " &
                                                                   " when WONum like '000%' then SUBSTRING(WONum, 4, Len(WONum) - 3) " &
                                                                   " when WONum like '00%' then SUBSTRING(WONum, 3, Len(WONum) - 2) " &
                                                                   " when WONum like '0%' then SUBSTRING(WONum, 2, Len(WONum) - 1) " &
                                                                   " else WONum " &
                                                                   " end as retVal, " &
                                                                   " case " &
                                                                   " when WONum like '0000%' then 1 " &
                                                                   " when WONum like '000%' then 2 " &
                                                                   " when WONum like '00%' then 3 " &
                                                                   " when WONum like '0%' then 4 " &
                                                                   " else LEN(WONum) " &
                                                                   " end as retLen " &
                                                                   " from TblWorkOrder " &
                                                                   " where CompanyID = " & CStr(CompanyID) & " and LEN(WONum) >= " & CStr(startValueLen) & " and (WONum > '" & CStr(StartValue) & "' or LEN(WONum) > " & CStr(startValueLen) & ") " &
                                                                   " order by retLen, retVal"
            Dim temp = c.ExecuteQuery(Of Pair(Of String, Integer))(query)
            Return temp.ToList
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:39:44.223

问题的原因是我的 Pair 类具有 First 和 Second 属性，而我没有将结果返回为 First 和 second。因此问题的解决方案是将第一个值返回为 First，将第二个值返回为 Second，而不是 retVal 和 retLen。

# extjs - 如何将面板添加到 rowBody 中的 extjs 网格面板

> ID：11162622
> 
> 赞同：3
> 
> 时间：2012-06-22T19:08:51.537
> 
> 标签：extjs, gridpanel

我不想在 ext 网格面板中添加 ext 面板而不是 html。我现在拥有的是这样的：

```
features: [{
    ftype: 'rowbody',
    getAdditionalData: function (data, rowIndex, record, orig) {
        var headerCt = this.view.headerCt,
            colspan = headerCt.getColumnCount();
        // Usually you would style the my-body-class in CSS file
        return {
            rowBody: '<div style="padding: 1em">' + record.get("description") + '</div>',
            rowBodyCls: "my-body-class",
            rowBodyColspan: colspan
        };
    }
}], 
```

但我希望包含一个标准面板，而不是 rowBody，这样我就可以添加按钮和其他布局。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:39:05.003

我正在使用 ExtJS 4.2，为了使其工作，控制器代码如下所示：

```
Ext.define('My.controller.MyController1', {
extend: 'Ext.app.Controller',

onGridPanelExpandbody: function(rowNode, record, expandRow, eOpts) {
    var id = 'group-row-' + record.get('Id');
    var tpl = new Ext.XTemplate('<tpl foreach=".">',
                                '<p> {#}.{$} - {.}</p>', 
                                '</tpl>');
    var el = document.getElementById(id);
    tpl.overwrite(el,record.data);
},

init: function(application) {
    this.control({
        "gridpanel[itemid='usergroupsList'] tableview": {
            expandbody: this.onGridpanelExpandbody
        },
    });
},
} 
```

注意区别，你的`grid`，我的代码是`gridpanel tableview`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:13:33.520

所以这就是我用自定义面板替换 rowBody 所做的

在我看来，我创建了这个：

```
plugins: [{
    ptype: 'rowexpander',
    rowBodyTpl : ['<div id="group-row-{groupId}"> </div>']
}] 
```

在我的控制器中，我添加了一个如下所示的 expandbody 侦听器：

```
 'myList grid[itemid = usergroupsList]' : {
    select: this.onSelect,
    expandbody: this.onExpandBody
 } 
```

和 onExpandBody

```
onExpandBody: function(rowNode, record, expandRow) {                
    var row = 'group-row-' + record.get('groupId');
    var elem = document.getElementById(row);
    elem.innerHTML = '';
    var innerPanel = Ext.widget('panel',{                
        html: '<p>'+record.get('description')+'</p>',
        height: 100,
        flex: 1,
        border:0
        }]
    });
    innerPanel.render(row); 
```

而不是每次都创建面板，您可以使用 xTemplate 定义一个组件来呈现到这个 id。

# batch-file - wget 使用批处理文件

> ID：11162625
> 
> 赞同：3
> 
> 时间：2012-06-22T19:09:10.107
> 
> 标签：batch-file, wget

我正在尝试在批处理文件中使用 wget 下载文件，如果文件全部存在并且它没有更改，我不想下载文件所以我`-N` 也在使用我正在从我的个人 FTP 服务器下载文件所以我想隐藏我的**用户名**和**密码**详细信息，所以我决定使用`>nul 2>&1` 这样我的批处理文件来隐藏输出：

```
@echo off
blah blah
.....
echo please wait...
wget -N ftp://XXXXXXXXXX@YYYYYYY.com/file.jpg >nul 2>&1 
```

现在有两个问题：

1.  窗口标题仍会显示我的用户名和密码，如何隐藏标题或更改标题？

2.  用户不知道操作是成功（下载完成）还是失败（没有互联网或不存在文件）或者它没有下载，因为文件已经存在，我想知道我是否可以制作 3 IF STATEMENTS

    ```
    IF file was downloaded then echo file download

    IF file wasn't downloaded then echo error

    IF file wasn't downloaded because was the same then echo file didnt change 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:31:24.853

Wget 有内置的开关，如果文件已经存在，将阻止下载。它有开关来做你想做的大部分事情，所以你根本不必把“if”语句放在批处理文件中。

wget 有一个广泛的开关列表。真的，它的开发人员已经想到了几乎所有事情。阅读那些文档，如果我记得它们大约有 150-200 页长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:43:05.950

我同意 PA 的观点，如果文件是敏感文件，那么在控制台输出中隐藏密码在安全性方面不会起多大作用。但是，要回答 OP 的问题：

1\. title 命令可以改变当前窗口的标题。

```
title My CMD Window 
```

如果您遇到的问题是 wget 命令的弹出窗口出现并在那里显示用户名和密码，您可以使用以下命令。抱歉，我不熟悉 wget 所以我不确定它的行为，希望这会有所帮助。

```
start "My WGET Window" wget -N ftp://XXXXXXXXXX@YYYYYYY.com/file.jpg >nul 2>&1 
```

2\. 之前和之后的几次检查将是有益的。首先，检查文件是否存在，如果它已经存在，甚至不要打扰 wget（假设从你的帖子的措辞中你不想覆盖文件）。

```
if exist file.jpg echo File already exists!&pause&goto :EOF
:: run wget here
if exist file.jpg (echo File download successful.) else (echo File download UNSUCCESSFUL.) 
```

我们不需要检查所有三个条件，因为文件要么事先存在（在这种情况下批处理退出），要么在这种情况下我们测试是否成功下载。请注意，很难检查部分文件。

所以，把它们放在一起：

```
@echo off
blah blah
.....
title My CMD Window
if exist file.jpg echo File already exists!&pause&goto :EOF
echo please wait...
start "My WGET Window" wget -N ftp://XXXXXXXXXX@YYYYYYY.com/file.jpg >nul 2>&1
if exist file.jpg (echo File download successful.) else (echo File download UNSUCCESSFUL.) 
```

# android - android 使用 XML 布局中的视图来绘制画布

> ID：11162626
> 
> 赞同：6
> 
> 时间：2012-06-22T19:09:11.313
> 
> 标签：android, xml, view, android-canvas

所以基本上我想使用 xml 布局，但我也想要一个可以执行图形的画布。我所做的是在我的 xml 布局中创建一个视图，如下所示。然后在我的应用程序中，我让视图绘制了画布，但它不起作用。我不确定我解决这个问题的方法是完全错误的还是什么。因此，请看一下我的代码，并告诉我您是否看到了快速修复或是否有更好的方法。在此先感谢我真的很感激。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/bTest"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<View
    android:id="@+id/vMain"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

那是xml布局

```
package sm.view.test;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Align;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;

public class ViewActivity extends Activity implements OnTouchListener {
/** Called when the activity is first created. */

View v;
Button b;
boolean isRun =true;
SurfaceHolder ourHolder;
Thread ourThread;
Canvas canvas;
boolean isTure = true;
TheSurface ourSurfaceView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b= (Button) findViewById(R.id.bTest);
    v = (View) findViewById(R.id.vMain);

    canvas = new Canvas();
    ourSurfaceView = new TheSurface(this);
    ourSurfaceView.setOnTouchListener(this);
    v.draw(canvas);
   // v.setBackgroundColor(Color.BLUE);
}
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    ourSurfaceView.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    ourSurfaceView.resume();
}

public boolean onTouch(View arg0, MotionEvent arg1) {
    // TODO Auto-generated method stub
    return false;
}
public class TheSurface extends SurfaceView implements Runnable{

    public TheSurface(Context context) {
        super(context);
        ourHolder= getHolder();

    }
    public void resume(){
        isRun= true;
        ourThread = new Thread(this);
        ourThread.start();  
    }
    public void pause(){
        isRun = false;
        while(true){
            try {
                ourThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        ourThread= null;
    }

    public void run() {
        // TODO Auto-generated method stub

        Paint textPaint = new Paint();
        textPaint.setColor(Color.WHITE);
        while(isTure){
        if(!ourHolder.getSurface().isValid())
            continue;
        //v.draw(canvas);

         canvas = ourHolder.lockCanvas();
        canvas.drawLine(0, 0, canvas.getWidth(), canvas.getHeight(), textPaint);
        ourHolder.unlockCanvasAndPost(canvas);
        v.draw(canvas);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:22:20.267

从这里开始（这也需要您输入命名空间部分“yourProjectNamespace”）：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical" >  

    <Button android:id="@+id/bTest"
        android:layout_width="wrap_content"     
        android:layout_height="wrap_content"
        android:text="Button" />    

    <sm.view.test.TheSurface android:id="@+id/vMain"
        android:layout_width="wrap_content"     
        android:layout_height="wrap_content" />  

</LinearLayout> 
```

在你的 TheSurface

实现可覆盖的例程：

```
public TheSurface(Context C){
    super(C);

    // Other setup code you want here
}

public TheSurface(Context C, AttributeSet attribs){
    super(C, attribs);

    // Other setup code you want here
}

public TheSurface(Context C, AttributeSet attribs, int defStyle){
    super(C, attribs, defStyle);

    // Other setup code you want here
}

protected void onDraw(Canvas canvas){
    super.onDraw(canvas);

    Paint textPaint = new Paint();
    textPaint.setColor(Color.WHITE);

    canvas.drawLine(0, 0, canvas.getWidth(), canvas.getHeight(), textPaint);

    // Other drawing functions here!!!
} 
```

这应该可以完成您的绘图！

同样在我的情况下，您不必将其实现为SurfaceView，您可以将其实现为View，并且不需要实现runnable！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:44:35.920

我不是 100% 确定我了解您要做什么，但是基于您在调用 View.draw() 后似乎没有对画布做任何事情的事实，我相信您可能会感到困惑。View.draw(Canvas) 将视图绘制到画布上，它不会改变视图。

但是，如果您从位图创建画布，则可以将位图设置为 ImageView 的图像：

```
Bitmap bm = Bitmap.createBitmap( x-size, y-size, Config.ARGB_8888);
Canvas c = new Canvas(bm);

Paint textPaint = new Paint();
textPaint.setColor(Color.WHITE);
canvas.drawLine(0, 0, canvas.getWidth(), canvas.getHeight(), textPaint);

ImageView iView = (ImageView) view;
iView.setImageBitmap(bm); 
```

但是，与实现您自己的视图相比，这是一种不太正确的方法：

```
button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            ((MyView)view).mContextVariable = true; //or false, etc
            //you might not need this invalidate, because the click event probably causes and invalidate to be called
            view.invalidate();
        }
    }

    class MyView extends View
    {
        Paint myPaint;
        boolean mContextVariable;

        public MyView(Context context) 
        {
            super(context);

             textPaint = new Paint();
             textPaint.setColor(Color.WHITE);

        }

        @Override
        protected void onDraw(Canvas canvas)
        {
            if(mContextVariable)
            {
                canvas.drawLine(0, 0, canvas.getWidth(), canvas.getHeight(), textPaint);
            }
            else
            {
                //draw something else
            }
            canvas.drawText("testing", 0,0, textPaint);
        }
    } 
```

# dbpedia - 来自 DBpedia 查找 API 的常见单词的奇怪结果

> ID：11162627
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:09:13.760
> 
> 标签：dbpedia

我用关键字和前缀搜索了一些通用关键字，例如*它*、*那里*、*他*等。最令人惊奇的是，它给出了错误的结果，并且处理请求的时间比*诺基亚*等命名实体多 10 倍左右，*三星*、*麦当劳*。

谁能解释我为这些关键字得到的奇怪结果

*   它====> [http://dbpedia.org/resource/United_States](http://dbpedia.org/resource/United_States)

*   那里====> [http://dbpedia.org/resource/United_States](http://dbpedia.org/resource/United_States)

为什么结果是错误的，为什么处理这些请求需要这么多时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:11:02.350

我想知道您正在使用“there”或“it”之类的查询寻找什么样的结果？

在搜索引擎术语的上下文中，这些通常被称为停用词，有时会被完全忽略，因为它们非常常见，以至于它们与搜索查询或结果几乎没有相关性。我认为实际上这就是查找工具现在所做的，因为我没有得到您提到的相同结果。

为什么查询需要更长的时间？这可能是因为这些词非常频繁，并且对它们的查询会返回更多结果。这意味着搜索引擎在找出最相关的结果方面还有更多工作要做。

为什么 United_States 排名第一？可能是因为 United_States 的 wiki 页面在来自其他 Wikipedia 页面的入站链接方面排名最高。这是查找工具中使用的相关算法的核心。从本质上讲，指向 United_States 的“there”、“it”等词的链接比任何其他页面都多，因此它被认为与这些术语最相关。

# asp.net-mvc-3 - 无效的对象名称 dbo.TableName

> ID：11162631
> 
> 赞同：2
> 
> 时间：2012-06-22T19:09:19.713
> 
> 标签：asp.net-mvc-3, entity-framework, tsql, azure, ef-code-first

我在这里收到以下错误：http: [//mvcbense.azurewebsites.net/](http://mvcbense.azurewebsites.net/)

> 无效的对象名称“dbo.BlogPosts”。

这是一个使用 Entity Framework Code First 的 MVC3 应用程序。我在别处看过，只发现了一些关于改变我认为是什么的模式的东西`dbo.`。

我对 EF 还很陌生，但看起来好像 EF 为我创建了这些，所以我不确定该怎么做。在我的本地 SQL Server Express 中查看，所有表`dbo.`上都有架构。为什么我可以在本地运行它们但不能发布到 Azure？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:12:07.170

问题是您没有正确配置 SQL Azure 以首先迁移基于 SQL Express 的架构。当您创建基于本地 SQL Server 的 ASP.NET Windows Azure 网站时，您必须先手动迁移配置为 SQL Azure 的本地数据库，然后将您的 ASP.NET 应用程序发布到 Windows Azure 网站。如果您不这样做，您的 ASP.NET 网站将无法运行。

根据例外情况，缺少初始数据库表，因此您需要从下面的列表中选择任何合适的数据库迁移方法，首先迁移您的数据库，然后运行您的 Windows Azure 网站：

[将数据库迁移到 Windows Azure SQL 数据库（以前称为 SQL Azure）](http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T10:33:50.217

Stan 建议的一个更简单的解决方案在这里有效： [http ://social.msdn.microsoft.com/Forums/windowsazure/en-US/9c20a99c-80c9-4b1d-afa4-26b9b418f435/connect-to-sql-azure-via -sql-server-management-studio-失败](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/9c20a99c-80c9-4b1d-afa4-26b9b418f435/connect-to-sql-azure-via-sql-server-management-studio-failed)

摘抄：

> 1.  取消弹出的第一个连接对话框。
> 2.  单击工具栏（左上角）中的“新建查询”按钮
> 3.  输入服务器名称：完整的服务器名称登录：只有用户名（没有@...）
> 4.  在选项下，连接到数据库，我输入了 TestDb1
> 5.  点击连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T10:48:00.017

我也遇到了同样的问题，但是在使用数据库优先方法时。我的服务/服务的主机 web.config 中的连接字符串不正确。我更改了连接字符串并且它起作用了。

# html - 如何阻止选择框选择文本在 chrome 浏览器中换行？

> ID：11162635
> 
> 赞同：4
> 
> 时间：2012-06-22T19:09:45.763
> 
> 标签：html, css, google-chrome

我不希望选择框中所选选项的文本换行。它不包含在 IE 或 Firefox 中。看起来像

![在此处输入图像描述](../Images/06ced05cb7a14af60d9835e28b47e276.png)

但在 Chrome 浏览器中看起来像

![在此处输入图像描述](../Images/83b66164ec20548b58d9df17995aa9fb.png)

如何使文本不在 Chrome 浏览器中换行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T19:15:51.910

您是否尝试过使用`white-space: nowrap;`CSS 属性？它应该将您的文本推入一行。您可能还需要`width:auto`在您的`<select>`盒子上使用 - 我不确定我是否可以在没有看到您的标记和 CSS 的情况下提供更多指导。

# php - 使用 PHP 登录 Facebook，然后使用 get args 重定向到 URL

> ID：11162639
> 
> 赞同：1
> 
> 时间：2012-06-22T19:09:52.557
> 
> 标签：php, facebook, redirect, get

我正在尝试在我的网站上登录 Facebook，但遇到了问题。

我已经使用[这个](http://dan.cx/blog/2010/09/integrating-facebook-logins-into-your-php-website-easily)类在 PHP 中使用 Facebook 登录。

我在我的站点中创建了一个名为的 PHP 文件，`login.php`其中包含以下代码

```
$facebook = new FacebookLogin(APP_ID, APP_SECRET);
$user = $facebook->doLogin();
// then initialize the SESSION variables here using $user info
header("Location: ' . $url); 
```

现在的问题是，我想将 get 参数传递给 the `login.php`，并且从这个参数中我可以知道我将重定向到的 $url 。但是`FacebookLogin`该类正在进行重定向调用，因此 login.php 中的 get 参数丢失了，所以我决定`$this->url`在`FacebookLogin`构造函数中添加 login.php 参数：

```
$this->my_url = 'http://' . $_SERVER['SERVER_NAME'] .  $_SERVER['PHP_SELF'] . '?' . $_SERVER['QUERY_STRING']; 
```

现在的问题是这也不起作用`verifyLogin()`，因为 URL 不正确，此行返回空结果：

```
$result = @file_get_contents(self::TOKEN_URL . '?' . http_build_query($data)); 
```

它应该返回`access_token`

所以你怎么看？

简单地说，我需要一种用户单击链接以通过 Facebook 登录的方式，但在返回用户之前，我想通过 PHP 中的代码传递，然后重定向到用户在获取参数中单击指定的 url。

对不起，这可能很愚蠢，但我花了很多时间试图解决这个问题，几个小时后就有了最后期限。

感谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:43:25.840

您尝试使用[PHP-SDK](https://developers.facebook.com/docs/reference/php/)实现的目标很简单：

```
$facebook = new Facebook(array(
  'appId' => 'YOUR_APP_ID',
  'secret'=> 'YOUR_APP_SECRET'
));

$loginURL = $facebook->getLoginUrl(array(
  //'redirect_uri'=>'URL_WHERE_USER_WILL_BE_LANDED_AFTER_LOGIN' 
));

header("Location: {$loginURL}"); 
```

如果您希望将一些数据传递给您的应用程序以供用户返回授权后的后续步骤使用，请将其作为 URL 参数的一部分传递`redirect_uri`给`getLoginUrl`.

因此，例如，如果您将通过`http://my.app.com/?link_to_visit=some_link`，因为`redirect_url`您将被重定向到该 URL 而不是当前 URL（在授权之前）。

稍后您可以：

```
$facebook = new Facebook(array(
  'appId' => 'YOUR_APP_ID',
  'secret'=> 'YOUR_APP_SECRET'
));

$userId = $facebook->getUser();
$accessToken = $facebook->getAccessToken();

$linkToVisit = $_REQUEST['link_to_visit']; 
```

**顺便说一句**，为了人类，不要使用几年前由名声不详的人编写的一些愚蠢的客户端，而支持官方的 Facebook PHP-SDK，它们确实遵循平台上的所有变化（而且它们是巨大的）......

# javascript - 隐藏在另一个 div 之后的 div

> ID：11162643
> 
> 赞同：1
> 
> 时间：2012-06-22T19:10:35.877
> 
> 标签：javascript, jquery, html

我有一系列`<div class="clear-both"></div>`经过一系列的div。

我想删除`<div class="clear-both"></div>`该复选框出现后显示的任何内容。

例如，

```
<input type="checkbox" value="male"> Male?

<div class="clear-both"></div> 
```

如果用户选中该框，我希望`<div class="clear-both"></div>`它下方的右侧消失。

页面上有大约十几个 clear-both div 的实例。

我假设我必须为每个复选框设置一个类，以监听用户何时选中该框，但我不确定如何删除复选框下方的 clear-both div。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:12:16.673

```
$('input[type=checkbox]').on('click', function() {
    $(this).next('div.clear-both').hide();
}): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:13:02.663

> 我想删除该复选框出现后显示的任何内容。

你可以`next()`这样使用：

```
$('input[type=checkbox]').click(function(){
   $(this).next('div.clear-both').remove();
}); 
```

这将删除`div`单击复选框的下一个元素，无论哪个被单击。

**更多的：**

[http://api.jquery.com/next/](http://api.jquery.com/next/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:19:16.743

虽然使用 jQuery/JavaScript 很容易做到这一点，但您也不*需要*使用 JavaScript；可以改用 CSS（取决于您的跨浏览器要求）：

```
.clear-both {
    height: 1em;
    background-color: #0f0;
}

input:checked + .clear-both {
    background-color: #00f;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fySkx/)。

请注意，我使用变色只是因为我不确定您希望哪个状态`.clear-both`可见/隐藏。显然，根据您的需要调整样式。

为了进一步阐明这种方法的局限性，在跨浏览器兼容性方面，根据[Sitepoint](http://reference.sitepoint.com/css/pseudoclass-checked)的说法，任何版本的 Internet Explorer 都不支持这种方法（尽管它们只列出了 IE 最高版本 8）。

然而[Quirksmode 澄清 IE 9+](http://www.quirksmode.org/css/contents.html#t33) do/es 支持`:checked`伪类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T19:24:30.610

如果你不想使用 jQuery：

```
window.onload = function(){
  var elements = document.getElementsByTagName("input");
  for(var i=0;i<elements.length;i++) {
     var element = elements[i];
     if(element.type == "checkbox")
        element.onchange = function() { this.nextElementSibling.style.display = "none"; };
  }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:20:09.700

使用该`next`功能的两个建议都只适用于下面的一个 div。你说你想删除所有这些，所以你应该看看这个`nextAll`函数：

[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

# php - 在 PHP 中集成 R 脚本

> ID：11162645
> 
> 赞同：0
> 
> 时间：2012-06-22T19:10:52.293
> 
> 标签：php, r

我正在尝试在 PHP 中集成 R 脚本以显示图形。为此，我使用了本网站[http://www.r-bloggers.com/integrating-php-and-r/](http://www.r-bloggers.com/integrating-php-and-r/)中给出的示例，它可以工作。

经过一些调整，我在浏览器中测试了我的代码，但没有任何反应。但是，如果我在 IDE Geany 代码中对其进行测试，它可以正常工作。

有谁知道发生了什么？我该如何解决这个问题？

这是我的 R 代码：

```
args <- commandArgs(TRUE)
n=as.integer(args[1]);
library(gdata);
casa=setwd("/var/www")
fpath = file.path(casa, "Azevedo_JAM_final.xls");
dados = read.xls(fpath, header=F);
#(irrelevant code to the problem)

png(filename="medias.png", width=800, height=800)
barplot(df$vmedia, main="Medias", names.arg=df$vlabels,cex.names=0.6,las=2)
dev.off(); 
```

这是我的 php 代码

```
<?php

  $N = 2;

  exec("Rscript infografics.r $N"); 

  // return image tag
  echo("<img src='medias.png?' />");

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-31T12:03:40.443

这对我来说很好。干杯!

[http://www.r-bloggers.com/integrating-php-and-r/](http://www.r-bloggers.com/integrating-php-and-r/)

# javascript - 如何使用 JQuery 将事件处理程序绑定到 iframe 的 onload？

> ID：11162650
> 
> 赞同：4
> 
> 时间：2012-06-22T19:11:15.403
> 
> 标签：javascript, jquery, iframe

我在绑定以使用 JQuery 时遇到了一些麻烦。

```
<iframe id="wufooFormz7x3k1" height="281" allowtransparency="true" frameborder="0" scrolling="no" style="width:100%;border:none" src="http://foo111.com"></iframe>

<script>
jQuery('#wufooFormz7x3k1').ready(function()
{
  jQuery('#wufooFormz7x3k1').bind('onload', alert('hi1'));
  jQuery('#wufooFormz7x3k1').bind('onload', function() { alert('hi2') });
});
</script> 
```

第一个绑定会生成一个警报，但随后会引发此错误，并且不会为 iframe 的任何后续加载触发警报（这是我要检测的内容）。

```
Uncaught TypeError: Cannot read property 'handler' of undefined and won't be triggered for subsequent onloads. 
```

第二个绑定根本不会触发。

理想情况下，我想要绑定 iframe 的 onload，以便每次重新加载 iframe 时都可以生成警报。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T19:11:53.697

使用加载事件。

```
jQuery('#wufooFormz7x3k1').bind('load', function() { alert('hi2') }); 
```

第一次尝试发出警报，因为您正在执行警报并将警报的返回值作为函数传递，但是该返回值不是函数，因此会发生错误。

此外，以下内容不是必需的，并且并没有真正按照您的想法进行。

```
jQuery('#wufooFormz7x3k1').ready(function() 
```

这忽略了`'#wufooFormz7x3k1'`and 使用`document`。由于脚本直接位于 iframe 标记之后，因此您可以省略它，因为 iframe 将准备就绪。

# c# - C#在不创建实例的情况下获取属性值？

> ID：11162652
> 
> 赞同：37
> 
> 时间：2012-06-22T19:11:25.273
> 
> 标签：c#, properties, instance

是否可以在不创建实例的情况下获得价值？

我有这堂课：

```
public class MyClass
{
    public string Name{ get{ return "David"; } }

    public MyClass()
    {
    }
} 
```

现在我需要获取值“David”，而不创建 MyClass 的实例。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-22T19:29:26.780

**真实答案**：没有。它是一个*实例*属性，因此您只能在实例上调用它。您应该创建一个实例，或者将属性设为静态，如其他答案所示。

有关静态成员和实例成员之间区别的更多信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/aa645629.aspx)

**面面相觑，但仍然正确的答案**：

> 是否可以在不创建实例的情况下获得价值？

是的，但只能通过一些非常可怕的代码创建一些 IL 传入`null`（`this`您不会在您的财产中使用），使用[`DynamicMethod`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx). 示例代码：

```
// Jon Skeet explicitly disclaims any association with this horrible code.
// THIS CODE IS FOR FUN ONLY. USING IT WILL INCUR WAILING AND GNASHING OF TEETH.
using System;
using System.Reflection.Emit;

public class MyClass
{
    public string Name { get{ return "David"; } }
}

class Test    
{
    static void Main()
    {
        var method = typeof(MyClass).GetProperty("Name").GetGetMethod();
        var dynamicMethod = new DynamicMethod("Ugly", typeof(string), 
                                              Type.EmptyTypes);
        var generator = dynamicMethod.GetILGenerator();
        generator.Emit(OpCodes.Ldnull);
        generator.Emit(OpCodes.Call, method);
        generator.Emit(OpCodes.Ret);
        var ugly = (Func<string>) dynamicMethod.CreateDelegate(
                       typeof(Func<string>));
        Console.WriteLine(ugly());
    }
} 
```

请不要这样做。**曾经。**太可怕了 它应该被践踏，切成小块，点燃，然后再次切割。不过很有趣，不是吗？;)

这是有效的，因为它使用`call`而不是`callvirt`. 通常 C# 编译器会使用`callvirt`调用*，即使它没有调用虚拟成员*，因为它会“免费”进行空引用检查（就 IL 流而言）。像这样的非虚拟调用*不会*首先检查无效性，它只是调用成员。如果您`this`在属性调用中进行检查，您会发现它为空。

编辑：正如 Chris Sinclair 所指出的，您可以使用开放的委托实例更简单地做到这一点：

```
var method = typeof(MyClass).GetProperty("Name").GetGetMethod();
var openDelegate = (Func<MyClass, string>) Delegate.CreateDelegate
    (typeof(Func<MyClass, string>), method);
Console.WriteLine(openDelegate(null)); 
```

（但同样，请不要！）

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-06-22T19:12:41.863

您可以将该属性*设为静态*

```
public static string Name{ get{ return "David"; } } 
```

用法：

```
MyClass.Name; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T23:20:38.493

您的要求确实看起来很奇怪，但我认为您正在寻找某种元数据。您可以使用属性来实现此目的：

```
public class NameAttribute : Attribute {
  public string Name { get; private set; }
  public NameAttribute(string name) {
    Name = name;
  }
}

[Name("George")]
public class Dad { 
  public string Name { 
    get { 
      return NameGetter.For(this.GetType()); 
    }
  }
}

[Name("Frank")]
public class Son : Dad {
}

public static class NameGetter {
  public static string For<T>() {
    return For(typeof(T));
  }
  public static string For(Type type) {
    // add error checking ...
    return ((NameAttribute)type.GetCustomAttributes(typeof(NameAttribute), false)[0]).Name;
  }
} 
```

现在这段代码可以获取有和没有实例的名称：

```
Console.WriteLine(new Dad().Name);
Console.WriteLine(new Son().Name);
Console.WriteLine(NameGetter.For<Dad>());
Console.WriteLine(NameGetter.For<Son>()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T19:23:43.473

正如许多其他人所指出的那样，您可以将您的财产设为[static 。](http://msdn.microsoft.com/en-us/library/79b3xss3)

```
public static string Name{ get{ return "David"; } } 
```

请注意，这意味着您的 MyClass 实例将不再拥有自己的 Name 属性，因为静态成员属于该类，而不是它的单个对象实例。

**编辑：** 在注释中，您提到要覆盖子类中的 Name 属性。同时，您希望能够在类级别访问它（访问它而不创建类的实例）。

对于静态属性，您只需`Name`在每个类中创建一个新属性。由于它们是`static`，因此您总是（几乎总是，是的反射）将使用特定的类来访问它们，因此您将指定`Name`要获取的版本。如果您想尝试破解其中的多态性并从 MyClass 的任何给定子类中获取名称，您可以使用反射来实现，但我不建议您这样做。

使用您评论中的示例：

```
public class Dad 
{ 
    public static string Name { get { return "George"; }
}

public class Son : Dad
{
    public static string Name { get{ return "Frank"; }
}

public static void Test()
{
    Console.WriteLine(Dad.Name); // prints "George"
    Console.WriteLine(Son.Name); // prints "Frank"
    Dad actuallyASon = new Son();
    PropertyInfo nameProp = actuallyASon.GetType().GetProperty("Name");
    Console.WriteLine(nameProp.GetValue(actuallyASon, null)); // prints "Frank"
} 
```

~~附带说明一下，由于您声明的属性只有一个 getter 并且它返回一个常量值，因此我建议您可能使用[const](http://msdn.microsoft.com/en-us/library/e6w8fe1b.aspx)或静态[只读](http://msdn.microsoft.com/en-us/library/acdd6hb7%28v=VS.71%29.aspx)变量。~~

 ~~```
public const string Name = "David";
public static readonly string Name = "David"; 
```~~ 

两者的用法相同：

```
string name = MyClass.Name; 
```

~~的主要优点（和缺点）`const`是在编译代码时，所有对它的引用实际上都被它的值替换。这意味着它会快一点，但是如果你改变了它的值，你将需要重新编译所有引用它的代码。~~

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-23T15:27:46.640

每当您编写 C# 代码时，请始终检查您的方法和属性 getter/setter 代码是否对类的其他实例成员有*任何作用。*如果没有，请务必应用*static*关键字。当然这里的情况，它可以轻松解决您的问题。

我真正发布这个问题的原因是在某些答案中存在一些语言偏见。不能对空对象调用实例方法的 C# 规则是特定的 C# 语言规则。毫无疑问，这是一个非常明智的方法，它确实有助于解决 NullReferenceExceptions，它们是在调用站点而不是在很难诊断*this*引用为 null 的方法内部的某个地方引发的。

但这当然不是 CLR 的要求，也不是在 CLR 上运行的每种语言的要求。事实上，即使 C# 并没有始终如一地强制执行它，您也可以在扩展方法中轻松绕过它：

```
public static class Extensions {
    public static bool IsNullOrEmpty(this string obj) {
        return obj != null && obj.Length > 0;
    }
}
...
        string s = null;
        bool empty = s.IsNullOrEmpty();    // Fine 
```

并且使用不具有相同规则的语言的属性也可以正常工作。像 C++/CLI 一样：

```
#include "stdafx.h"

using namespace System;
using namespace ClassLibrary1;    // Add reference

int main(array<System::String ^> ^args)
{
    MyClass^ obj = nullptr;
    String^ name = obj->Name;     // Fine
    Console::WriteLine(name);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T19:12:50.957

创建静态属性：

```
public class MyClass
{
    public static string Name { get { return "David"; } }

    public MyClass()
    {
    }
} 
```

像这样得到它：

```
string name1 = MyClass.Name; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T19:13:19.743

创建静态类或静态属性，您不必显式实例化它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-22T19:13:29.913

这是不可能的。作为`Name`一个实例属性，如果你有一个实例，你只能获取它的值。

另外，请注意，您不是在谈论*参数*，而是在谈论*属性*。

# javascript - GET请求让我喝酒

> ID：11162653
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:11:25.007
> 
> 标签：javascript, jquery, html, get, external

所以这是交易。我有一个 id="followers" 的 html 文件。我正在尝试使用 jQuery 发出获取请求以从 twitter api 获取 xml 标记：

(http://api.twitter.com/1/users/show.xml?screen_name=nightoutinc

并使用准确的信息更新 id。

我的 jquery 没有收到任何控制台错误，这让我相信一切都正确，我只是没有正确实现 get 请求。

我的 Jquery 看起来像这样：

```
(function ($){

getFollowers = function(){

$.get("http://api.twitter.com/1/users/show.xml?screen_name=nightoutinc", function(data){

$("followers").follower_count(data);

});

};

}); 
```

我的 html 头看起来像这样

```
<script type="text/javascript" src="javascripts/jquery.js"></script>

<script type="text/javascript" src="javascripts/getfollowers.js">

$(document).ready(function(){

getFollowers();

});

</script> 
```

请告诉我，怎么了？！？

-布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:17:18.260

看起来你有范围问题。而且看起来您的函数没有被调用；只定义。尝试将其包装到一个实际被调用的父函数中。

```
(function($) {

    function getFollowers() {
        // Implementation here.
    }

    $(document).ready(function() {
        getFollowers();
    });

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:17:40.897

您的 jquery 对象选择器似乎错误

```
$("followers") 
```

应该

```
$("#followers") 
```

注意表示 ID 的井号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:13:44.080

你说响应是 XML 对吗？然后`data`将是一个 XML DOM，而不是您可以插入页面的字符串或 HTML。

我只能找到 JSON 的文档，但假设 XML 具有奇偶性：

```
$(function(){
    $.get('http://api.twitter.com/1/users/show.xml?screen_name=nightoutinc', function(xml){
        nbFollowers = $(xml).find('followers_count').text();
        $('#followers').html(nbFollowers ? nbFollowers : 0);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:14:46.287

你定义了follower_count吗？

我想应该是 $("followers").html(data); 不是 $("followers").follower_count(data);

# asp-classic - 在经典 ASP 中将 SMTP Mailer 转换为 CDOSYS 以获取联系表单

> ID：11162654
> 
> 赞同：1
> 
> 时间：2012-06-22T19:11:28.883
> 
> 标签：asp-classic, smtp, contact-form, cdo.message

我目前正在更新旧服务器上的许多测试站点，以便在接下来的几个月中旧服务器停止运行时它们不会中断。特别是一个站点的联系表已经损坏。当用户在填写信息后点击提交时，会出现以下错误：

```
Server object error 'ASP 0177 : 800401f3'

Server.CreateObject Failed

/contactsubmit.asp, line 79

800401f3

Set Mailer = Server.CreateObject("SMTPsvg.Mailer")
Mailer.FromName = "Web Visitor"
If request("email") <> "" then
  Mailer.replyto = request("email")
Else
  Mailer.replyto = "noEmailEntered@domain.com"
End If
Mailer.FromAddress = "my@email.com"
Mailer.RemoteHost = "hostserver"
If TempTest = TRUE then
Else
  Mailer.AddRecipient siteOwner, ContactEmail
  If ContactCC <> "" then
    Mailer.AddCC siteOwner, ContactCC
  End If
End If
If DesignerEmail <> "" then
    Mailer.AddBCC DesignerEmail, DesignerEmail
End If
Mailer.Subject = siteOwner & " Contact Form"
Mailer.ContentType = "text/html"
Mailer.BodyText = strBody
If Mailer.SendMail then
  response.redirect "contact.asp?sent=yes"
Else
  response.redirect "contact.asp?sent=no"
End If 
```

有人告诉我 SMTP 不再需要发送电子邮件，所以我尝试将其全部更改为 CDOSYS。但有趣的是，这台服务器上有更多的站点，我使用相同的 SMTP 代码进行了测试。使用 CDOSYS 的更改：

```
Set Mailer = Server.CreateObject("CDO.Message")
Mailer.From = "Web Visitor <my@email.com>"
If request("email") <> "" then
  Mailer.ReplyTo = request("email")
Else
  Mailer.ReplyTo = "noEmailEntered@domain.com"
End If
Mailer.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "hostserver"
If TempTest = TRUE then
Else
  Mailer.AddRecipient siteOwner, ContactEmail
  If ContactCC <> "" then
    Mailer.Cc siteOwner, ContactCC
  End If
End If
If DesignerEmail <> "" then
    Mailer.Bcc DesignerEmail, DesignerEmail
End If
Mailer.Subject = siteOwner & " Contact Form"
Mailer.HTMLBody = strBody
If Mailer.Send then
  response.redirect "contact.asp?sent=yes"
Else
  response.redirect "contact.asp?sent=no"
End If 
```

但现在我得到这个错误：

```
Microsoft VBScript runtime error '800a01b6'

Object doesn't support this property or method: 'Mailer.AddRecipient'

/contactsubmit.asp, line 89 
```

我尝试将其更改为`Mailer.Add`和更改`Mailer.AddAddress`，但没有成功。有谁知道我怎样才能解决这个错误并希望让它工作？我以前从未使用过邮件服务器，所以如果这是一个简单的修复方法，我深表歉意，但我已经搜索了过去 3 个小时，无法找到一个好的替代`.AddRecipient`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:18:23.767

CDO.Message 对象仅具有 的字符串属性，`To`您可以为其分配标准的分号分隔的 smtp 电子邮件地址列表，例如：`Cc``Bcc`
`"Joe Bloggs" <joeB@somecompany.com>; "Fred Smith" <fSmith@smiths.co.uk>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:43:33.873

尝试执行以下使用 CDO 发送邮件的最简单方法，然后从中获取相关字段并应用于您的脚本：

```
Set myMail=CreateObject("CDO.Message")
myMail.Subject="Sending email with CDO"
myMail.From="mymail@mydomain.com"
myMail.To="someone@somedomain.com"
myMail.TextBody="This is a message."
myMail.Send
set myMail=nothing 
```

如您所见，添加收件人的方式是这样的：

```
myMail.To="someone@somedomain.com" 
```

[您可以在此处](http://www.w3schools.com/asp/asp_send_email.asp)查看更多示例

希望这可以帮助。

# html - .HTM 文档的链接不会在 Google 地球的 HTML 弹出窗口中打开

> ID：11162658
> 
> 赞同：0
> 
> 时间：2012-06-22T19:11:42.387
> 
> 标签：html, hyperlink, kml, google-earth, arcmap

在 ArcMap 中，我从各种 shapefile 创建了 KML，其属性/列包含与特定点相关的 HTM 文档的位置。

当我通过 ArcMap 中的验证按钮测试 HTML 弹出窗口时，效果很好。它可以很好地打开链接的文档。当我简单地在 word pad 中输入链接并另存为 .htm 时，链接也可以正常工作，例如

> *测试链接*

当我在 Google 地球中特定地标的弹出窗口中有这个相同的链接时，该文档将无法打开。文本是蓝色的，表示超链接，但单击时没有任何反应。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:12:47.053

Google 地球默认启用安全性，除非明确要求，否则不允许任意 KML 访问用户文件。

在 Google 地球的工具/选项菜单下，单击常规选项卡，然后选中“*允许访问本地文件和个人数据*”。然后你应该被允许访问本地文件。

保持链接文件相对于 KML 文件的位置是最简单的方法，因为绝对 URL 可能很麻烦。如果文件名或路径中有空格或特殊字符，旧版本的 Google 地球也会出现一些问题。

# javascript - 使用 JavaScript 生成调色板

> ID：11162664
> 
> 赞同：3
> 
> 时间：2012-06-22T19:11:58.287
> 
> 标签：javascript, colors

我想生成每 5、15、17 或 51 个 RGB 值的调色板。

像这样的东西：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Color Palette</title>
<style type="text/css">
div{margin:0;width:20px;height:20px;float:left}
.clear{clear:both}
</style>
</head>
<body>
<script>
var r = 0,
    g = 0,
    b = 0;

function createBr() {
    var b = document.createElement('br');
    b.style.clear = 'both';
    document.body.appendChild(b);
}

function createDiv(r,g,b) {
var a = document.createElement('div');
a.style.background = 'rgb(' + r + ',' + g + ',' + b + ')';
document.body.appendChild(a);
}

function createColorPalette(value) {
var v = 255/value;
    for(i = 0; i < v; i++) {
        r = r + value;
        g = g + value;
        b = b + value;
        createDiv(r,g,b);
    }
createBr();
}

// put in 5,15,17 or 51 as value below
window.onload = createColorPalette(17);
</script>
</body>
</html> 
```

我不够聪明，无法弄清楚如何用一个小脚本生成所有 3375 种颜色。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:33:35.077

循环遍历每种颜色的分数，如下所示：

```
function createColorPalette(value) {
    var v = 255/value;
    for( var rStep = 0, r = 0; rStep < v; rStep++) {    
        for( var gStep = 0, g = 0; gStep < v; gStep++ ) {       
            for( var bStep = 0, b = 0; bStep < v; bStep++ ) {                                                  
                createDiv(r,g,b);
                b += value;
            }
            g += value;
        }
        r += value;
    }
    createBr();
} 
```

# ajax - Yandex AJAX 爬取

> ID：11162665
> 
> 赞同：4
> 
> 时间：2012-06-22T19:12:08.883
> 
> 标签：ajax

对于 Googlebot 的 AJAX 抓取，我在我的网站中使用“_escaped_fragment_”参数。
现在我检查了 Yandex 对我网站的搜索结果。
我看到搜索结果中不存在 AJAX 响应。
Yandex 是否有类似 "_escaped_fragment_" 的选项？

否则，我应该检查用户代理，如果用户代理包含“YandexBot”然后提供非 AJAX 页面？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T08:19:05.633

I found out that Yandex also supports [Google's proposition for AJAX crawling](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started). No need to change any code if you optimized your site for Googlebot crawling.

# java - JMenuItem 不被键盘输入键激活

> ID：11162666
> 
> 赞同：1
> 
> 时间：2012-06-22T19:12:13.970
> 
> 标签：java, macos, swing, unix, jmenuitem

我会自动生成一组 JMenuItem 并将它们添加到每个右键单击事件的 JPopUpMenu 中。问题是当我在所选菜单上按回车键时，我为菜单项设置的操作没有运行。我可以使用向上/向下键在菜单上导航，但是，该操作只能通过鼠标单击来运行。

这是创建菜单项的代码：

```
private JMenuItem createMenuItem(TaskFactory tf, String title, boolean useCheckBoxMenuItem, String toolTipText) {

    enter code hereJMenuItem item;
    PopupAction action = new PopupAction(tf, title);
    if ( useCheckBoxMenuItem )
        item = new JCheckBoxMenuItem(action);
    else
        item = new JMenuItem(action);
    item.setEnabled(tf.isReady());
    item.setToolTipText(toolTipText);
    return item;
}

private class PopupAction extends AbstractAction {

    TaskFactory tf;
    PopupAction(TaskFactory tf, String title) {
        super( title );
        this.tf = tf;
    }
    public void actionPerformed(ActionEvent ae) {
        m_view.manager.execute(tf.createTaskIterator());
    }
} 
```

我试过将focusable设置为true，但这没有用。我已经在 Mac 10.7、Java 版本 1.6.0_33 和 Ubuntu Java 版本 1.6.0_26 上进行了尝试。我使用了标准的挥杆外观。在 Mac 上运行时：外观是[Mac OS X 的 Aqua 外观 - com.apple.laf.AquaLookAndFeel]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:19:29.100

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:19:26.200

AFAIK，这就是外观的工作方式。可以通过按空格键单击按钮和菜单项。Enter 用于单击默认按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T02:45:11.603

这[`ImageApp`](https://stackoverflow.com/a/5129757/230513)似乎`Action`适用于添加到菜单栏的项目和通过添加到上下文菜单的项目`setComponentPopupMenu()`。要么 要么`Enter`从`Space`菜单栏或上下文菜单中唤起选定的菜单项。

顺便说一句，请注意`getMenuShortcutKeyMask()`用作跨平台`MASK`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:20:17.720

You need to add a KeyListener to your JMenuItem, and set the item as focusable. Have your JMenuItem requesting focus with

```
JMenuItem.requestFocus(); 
```

When it has focus, the implemtation is easy

In your keylistener:

```
 @Override
        public void keyReleased(KeyEvent e) {
            if (e.getKeyCode() == e.VK_ENTER) {
                // do stuff
            }

        } 
```

# ios - MPMoviePlayerController 如何对 HTTP 404 和 504 错误做出反应？

> ID：11162670
> 
> 赞同：1
> 
> 时间：2012-06-22T19:12:34.750
> 
> 标签：ios, mpmovieplayercontroller

我在 MPMoviePlayerController 的参考页面或 Apple 开发者论坛中找不到任何信息。你们有谁知道如果我们服务器在流式传输时将 404 或 504 扔回播放器会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:46:49.570

我们设置了一个 Web 服务器来测试它，并发现：

*   404：播放器将跳过片段，请求并播放下一个片段（因此用户会在电影中看到跳帧）。如果您向播放器抛出 503，则会出现相同的行为。

*   504：播放器不会请求任何其他片段，当缓冲区用完时将终止播放会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:29:24.507

MPMoviePlayerController 依靠通知来报告任何事件或错误。

[MPMoviePlayerController - 加载电影时捕获网络错误](https://stackoverflow.com/questions/4150085/mpmovieplayercontroller-catching-network-errors-when-loading-a-movie)

# java - 捕获 NumberFormatException 是一种不好的做法吗？

> ID：11162671
> 
> 赞同：10
> 
> 时间：2012-06-22T19:12:36.420
> 
> 标签：java, parsing, exception, exception-handling, numberformatexception

我必须解析一个可以假定十六进制值或其他非十六进制值的字符串

`0xff`,`0x31`或`A`, `PC`, `label`, 等等。

我用这段代码来划分两种情况：

```
String input = readInput();

try {
    int hex = Integer.decode(input);            
    // use hex ...

} catch (NumberFormatException e) {
   // input is not a hex, continue parsing
} 
```

这段代码可以被认为“丑陋”或难以阅读吗？还有其他（也许更优雅）的解决方案吗？

编辑：我想澄清一下（在我的情况下）**不存在错误的输入**：我只需要区分它是否是十六进制数字。为了完整起见，我正在为[DCPU-16](http://0x10c.com/doc/dcpu-16.txt)制作一个简单的汇编程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T20:02:14.460

异常处理是 Java 编程语言的一个组成部分（也是设计目标之一）......你不应该仅仅因为你认为它们“丑陋”而抛弃它们。

也就是说，如果您想要一种简单易读的方式来处理`NumberFormatException`s，您可以考虑改用[`NumberUtils`](http://tinyurl.com/6qalmct)该类。

该`toInt(String str, int defaultValue)`方法将 a 转换为 a `String`，`int`如果转换失败，则返回默认值。如果字符串为`null`，则返回默认值。

```
 NumberUtils.toInt(null, 1) = 1
 NumberUtils.toInt("", 1)   = 1
 NumberUtils.toInt("1", 0)  = 1 
```

该方法封装了异常捕获和处理，如下面的[源代码](http://tinyurl.com/6rt8cmm)所示。因此，客户端只需要进行一次方法调用。

```
public static int toInt(String str, int defaultValue) {         
    if(str == null) {
        return defaultValue;
    }
    try {
        return Integer.parseInt(str);
    } catch (NumberFormatException nfe) {
        return defaultValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:15:37.933

你的问题是我今天看到的第二个问题。

不，捕捉这个异常是非常合适的。

与一般的“异常”相比，捕获*更明确*的异常（如“NumberFormatException”）*绝对是更好的形式。*

 *恕我直言...

PS： 你把例外放在*哪里：在这个级别或更高级别，是一个不同的问题。*

经验法则是“您知道发生了什么以及如何最好地恢复的最低级别”。

或者，换一种说法（引用下面的链接）：

“一个方法应该只在它能够以某种合理的方式处理异常时才捕获它。”

这里有一些讨论：

*   [在什么级别以及如何适当地捕获异常](https://stackoverflow.com/questions/10977482/at-what-level-and-how-is-appropriate-to-catch-exceptions)

*   [为什么我不应该将每个块都包装在“try”-“catch”中？](https://stackoverflow.com/questions/2737328/why-should-i-not-wrap-every-block-in-try-catch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:18:01.830

不，这不是“坏习惯”。这取决于情况。

例如，作为一个Android，如果用户在一个应该只接受整数的文本框中输入一个字符串“123a”，并且随后被解析，则会抛出异常导致应用程序崩溃。在这种情况下，捕获异常并提示用户重新输入文本是非常有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T19:44:46.653

在您的情况下，我更喜欢使用`isHexDigit`方法之类的东西`NumberFormatException`，除非您可以对数据格式做出一些假设 - 从您的描述来看，似乎没有关于何时遇到十六进制数字与. 非十六进制数字。

这是因为应该使用异常来处理*异常情况*，并且如果您对数据的期望是：*十六进制数字或非十六进制数字，以空格分隔*，那么遇到除十六进制数字之外的标记没有什么异常。

此外，使用异常*确实*会降低代码的可读性：没有对数据的注释，它隐藏了散布的非十六进制数字是可接受的和预期的输入的事实。

说明了这种偏好后，我可能会使用异常处理来处理这种情况，而且我当然看到很多这样做的代码。decode/parseInt/NumberFormatException 的组合为您提供了许多好的功能。如果没有明确解释我在做什么的明确评论，我不会使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:14:49.570

这取决于上下文，在许多情况下它很糟糕，但如果它是一个很可能有错误输入的地方并且你有一个默认设置，那么你会想要抓住它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T19:25:26.000

它的`Not about how good you code looks`，但是`how good your code works`………… `Ya offcourse it should be readable,` **正如那句名言……**

**任何傻瓜都可以编写计算机可以理解的代码，但只有伟大的程序员才能编写人类可以理解的代码。**

在某些情况下它完全没问题，你需要有这样的例外。

`When you want to catch multiple exceptions which belong to the same inheritance tree,` `then create a try block, and multiple catch blocks from more specific to more` `abstract.`

例如：

```
`Animal <--- Carnivores <--- Dog` 
```

现在假设有一个**DogException, CarnivoresException, AnimalException**。

那么一定是这样的，

```
try{

           // your code 

     }
      catch(DogException d){}
      catch(CarnivoresException c){}
      catch( AnimalException a){} 
```

**上面的捕获已经从更具体到更抽象级联，以便异常被捕获到它的原因。**

**如果没有继承，那么 catch 可以按任何顺序...**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T20:09:25.597

这是你能做的最好的。方法要么返回某种成功/错误指示符，要么抛出异常，这只是哪个最方便的问题。在这里，Sun 为我们做出了决定，因此无需辩论。

让我感到困扰的是，异常将包含完整的堆栈跟踪！在您的特定情况下，如果您正在阅读数百万个这些字符串，您*会*注意到（完全不必要的）性能不佳。如果这对您很重要，您可能需要考虑编写自己的方法（您可以使用 Sun 代码作为指导。）然后您可以自己决定是否要使用异常。如果这样做，请保留异常的静态副本并始终将其抛出以节省分配时间。并覆盖`fillInStackTrace`所以它什么都不做，并且您的异常中没有毫无意义的堆栈跟踪。*

# ios - 在情节提要中链接“表格视图控制器”以加载.xib？

> ID：11162673
> 
> 赞同：0
> 
> 时间：2012-06-22T19:12:46.027
> 
> 标签：ios, xcode, storyboard

我正在制作一个基于表视图控制器的 iOS 应用程序，其中包含 100 多个单元格。这将很难在 Storyboard 中导航，所以有没有办法可以链接表视图单元格以打开 .xib 文件，然后在 .xib 文件中使用“返回”按钮链接回故事板？

我做了一个空的应用程序与故事板一起使用，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:23:22.260

没有什么可以阻止您手动在代码中加载 XIB。事件`tableView:didSelectRowAtIndexPath:`还在。

# wordpress - 在固定的 div 中加载 Wordpress 小部件

> ID：11162676
> 
> 赞同：0
> 
> 时间：2012-06-22T19:12:59.007
> 
> 标签：wordpress, html, widget, fixed

我正在一个销售各种产品的网站上工作。目前，我们在 Wordpress 中将这些产品呈现为固定宽度（无侧边栏）页面。我正在使用“简单的 WP 购物车”来推动交易（因为所有其他解决方案都是臃肿和破坏的东西）。使用此插件，您将获得一个包含购物车的小部件...

我想要做的是将该购物车加载到位于页面一侧的固定 div，就像您现在在各种网站上看到的所有“反馈”和“社交”栏一样。我已经完成了 div，所以这不是问题，但我似乎无法加载小部件。

所以基本上：如何在不是 Wordpress 中“指定”侧边栏的 div 中加载小部件或小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:12:29.613

您需要将其“指定”为**侧边栏。**.. :-)

“侧边栏”实际上是小部件的占位符。

```
<div id="mysidebar">
   <?php dynamic_sidebar( 'Right Sidebar' ); ?>
</div> 
```

来自法典：

您可以通过名称（如果给定字符串）或 ID（如果给定整数）加载特定的侧边栏。例如，

`dynamic_sidebar('my_name')`

将为已注册的侧边栏创建一个侧边栏（小部件占位符）：

```
register_sidebar(array('name'=>'my_name',)). 
```

在这里阅读更多信息：[http ://codex.wordpress.org/Function_Reference/dynamic_sidebar](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)

# python - 使用 Twisted 的代理用户名/密码

> ID：11162680
> 
> 赞同：3
> 
> 时间：2012-06-22T19:13:16.027
> 
> 标签：python, proxy, twisted

我正在尝试使用 Twisted 的[ProxyAgent](http://twistedmatrix.com/documents/12.1.0/api/twisted.web.client.ProxyAgent.html)类连接到代理服务器并发出 HTTP 请求，但是服务器需要用户名和密码。是否可以使用 ProxyAgent 将这些凭据指定给服务器？

```
endpoint = TCP4ClientEndpoint(reactor, host, port)
agent = ProxyAgent(endpoint)

# Maybe need to pass auth credentials in the header here?
body = agent.request("GET", path) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:41:47.500

找出问题所在，必须在标头中设置 Proxy-Authorization 字段：

```
endpoint = TCP4ClientEndpoint(reactor, host, port)
agent = ProxyAgent(endpoint)

headers = {}
auth = base64.b64encode("%s:%s" % (username, password))
headers["Proxy-Authorization"] = ["Basic " + auth.strip()]

body = agent.request("GET", path, Headers(headers)) 
```

# python - Tkinter，Python 中的图像分层 [想通了（额头）]

> ID：11162682
> 
> 赞同：1
> 
> 时间：2012-06-22T19:13:21.440
> 
> 标签：python, tkinter, turtle-graphics

我正在使用一个名为 cTurtle 的图形模块，它建立在 TKinter 之上。每个可控的“乌龟”都有一个由 TKinter 分配给它的图像。我正在尝试向模块添加一种方法，该方法允许我更改给定“海龟”的分层位置。或者换句话说，我想添加一个方法，允许我将给定的图像放在显示列表的顶部。当我调用我所做的方法时，我收到此错误

```
 Traceback (most recent call last):
  File "C:\Documents and Settings\login\Desktop\pYTHON EXPERIMENTS\canvastest.py", line 22, in <module>
    bob.visUp()
  File "C:\Documents and Settings\login\Desktop\pYTHON EXPERIMENTS\jTurtle.py", line 2017, in visUp
    titem = self.turtle._item
  File "C:\Documents and Settings\login\Desktop\pYTHON EXPERIMENTS\jTurtle.py", line 542, in _visUp
    def _visUp(self, item):
  File "<string>", line 1, in type
  File "C:\Python32\lib\tkinter\__init__.py", line 2325, in type
    return self.tk.call(self._w, 'type', tagOrId) or None
_tkinter.TclError: invalid command name ".16847312" 
```

有人知道为什么该函数拒绝我传递给它的东西吗？引号中的数字似乎是一个对象 ID，应该可以工作。

编辑得好，我在这里对自己造成了极大的伤害，因为我没有粘贴所有相关内容。几天前我编写了这些新方法，并一直在尝试调试。原来我第一次对它们进行了正确编码。问题在于我如何称呼他们。我在 exitOnClick() 之后添加了 visup() 测试行，这意味着该小部件实际上已经被销毁了。但是，嘿，我第一次编码正确！有点...

# php - 如何在不加载页面 2 次的情况下在 facebook 中返回正确的 id？

> ID：11162689
> 
> 赞同：0
> 
> 时间：2012-06-22T19:13:55.123
> 
> 标签：php, facebook, api

因为当我使用函数getUser() 时没有得到正确的id？收据是之前登录工作的人的 ID，我必须重新加载页面。如何在不加载页面 2 次的情况下返回正确的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:15:36.940

[`Facebook::getUser()`](https://developers.facebook.com/docs/reference/php/facebook-getUser/)（如果您使用原始 PHP-SDK）从以下位置检索用户的详细信息： * URL 参数 * Facebook JS-SDK 或 PHP-SDK 设置的 Cookie * 应用程序会话

因此，除非活动会话（不是 Facebook 会话，而是用于您的应用程序的会话）存在并包含识别您的用户所需的所有详细信息，否则无法知道他的 Facebook 用户`id`。

如果您无法`id`通过调用`getUser`它来获取用户，则意味着目前不存在该数据，您将需要对用户进行身份验证：

*   将用户重定向到由返回的 URL[`Facebook:getLoginUrl()`](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)
*   等待 JS-SDK 自动更新用户登录状态（如果`status:true`已传递给 FB.init）
*   `FB.getLoginStatus`手动调用（JS-SDK）

要在加载相同的两次之前检索用户的详细信息，您有两个选项：

1.  增加应用程序中的会话生命周期
2.  将用户重定向到由返回的 URL [`Facebook:getLoginUrl()`](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)（这将加载您的页面两次，但第一次只会触发重定向），授权流程只会将用户带回您的应用程序，并提供其识别所需的所有详细信息。

# php - 在 PostgreSQL 中存储类似 BLOB 的数据

> ID：11162695
> 
> 赞同：1
> 
> 时间：2012-06-22T19:14:36.093
> 
> 标签：php, postgresql

我最近从 MySQL 切换到 PostgreSQL。然而，我还有一个问题。

以前，我会在 MySQL 中以 BLOB 格式存储小图像。

PostgreSQL 不知道 BLOB 之类的东西。

我尝试改用 BYTEA 字段类型。我猜这实际上插入了一个大的（十六进制？）字符串，但现在我一直试图让这个字符串恢复在 PHP 中显示实际图像。

有任何想法吗？提前致谢。

这是我用来将图像保存在数据库中的一段代码：

```
$data = bin2hex(file_get_contents('php://input'));

if (!empty($data)) {
  $sql = "UPDATE asset SET data = X'%s' WHERE uuid = '%s'";
  $args = array($data, $asset_uuid);
} 
```

使用 psql (9.1.3) 和 php 5.3.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:06:12.727

Bytea 是一个字节数组。这不是一点模式。[请参阅PostgreSQL Lexical Structure](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html)的第 4.2.1.5 节。

输入 bytea 的正确方法是使用十六进制值的 '\x...'。所以你想要的是 SET data = '\x%s'。

您可能还想使用[pg_prepare](http://us2.php.net/manual/en/function.pg-prepare.php)查看准备好的语句。

编辑：我能够将（文本）文件插入到 bytea 中：

```
$source = file_get_contents( 'hello.php' );
$insert = pg_prepare( $conn, '', 'insert into t (name, data) values($1,$2)' );
pg_execute( $conn, '', array( 'hello.php', $source ) ); 
```

第三次编辑：这可以很好地将文件插入数据库。但是，PHP 中的 pgsql 驱动程序非常不礼貌。检索实际数据的唯一方法是使用*旧*的bytea 转义机制，详见此处：[pg_unescape_bytea](http://www.php.net/manual/en/function.pg-unescape-bytea.php)。

```
pg_query('SET bytea_output = "escape";');

$result = pg_query( 'select data from t' );

while ( $row = pg_fetch_row( $result ) ) {
    echo pg_unescape_bytea( $row[0] );
} 
```

我很抱歉这有多烦人。PHP 中的 PostgreSQL 接口可以对二进制值进行一些大修。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:01:56.807

要使用 pg_* API**插入 bytea 内容**，二进制值应始终通过`pg_escape_bytea()`函数运行，即使它已传递给`pg_execute`or`pg_query_params`函数。这是因为 pg_* 层不“知道”特定参数具有二进制内容，并且无论如何它都没有实现对参数类型的任何真正支持。所以必须使用文本表示。可以是`escape`form `hex`，也可以是form，与PG服务器无关，与 的值无关，`bytea_output`仅对从服务器读取的值有意义。

例子：

```
$esc=pg_escape_bytea("\000\001\002");
pg_query_params('INSERT INTO some_table(some_col) VALUES($1)', array($esc)); 
```

* * *

要使用 pg_* API**读取 bytea 内容**，必须`pg_unescape_bytea()`在 fetch 之后运行该值。假设客户端库不早于 9.0（libq.so.5.3 或更高版本），它可以解码`hex`形式或`escape`形式的内容，并且会自动检测它。只有使用较旧的库才需要强制`bytea_output`它`escape`正确解码，无论是动态地`SET`还是静态地用于整个数据库（`ALTER DATABASE SET bytea_output=escape`）或`postgresql.conf`整个实例。

例子：

```
 $p=pg_query("SELECT some_col FROM some_table WHERE...");
  $r=pg_fetch_array($p);
  $contents = pg_unescape_bytea($r[0]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T22:10:57.633

这里发布的两个答案都给了我一些想法，但没有一个是 100% 的答案。

因此，我将在此答案中解释我为使其正常工作所做的工作。

显示图像时，我使用了这个：

```
header('Content-Type: image/jpeg');

$data = pack("H*", pg_unescape_bytea($data));

echo $data; 
```

我正在运行 PHP 5.3.8，在 PHP 5.4.0 中你可以使用 hex2bin 而不是 pack。

将图像添加到数据库时，我使用了这个：

```
$data = pg_escape_bytea($data); // Escape input for PostgreSQL
$sql  = "UPDATE asset SET data = '%s'WHERE uuid = '%s'"; 
```

我很高兴它现在正在工作。谢谢丹尼尔和约翰！

# javascript - 如何组合 2 个点击事件功能

> ID：11162699
> 
> 赞同：0
> 
> 时间：2012-06-22T19:14:50.770
> 
> 标签：javascript, jquery

我目前有这个，它工作得很好，但我想有一个更好的方法来做同样的事情，可能有一个单一的功能而不是 2 个独特的功能并保存行。只是比这么多行更优雅的方式。以下 2 个函数看起来很相似，但它们的作用略有不同，如您所见。任何人？谢谢

```
$("#container").on({
"mouseenter": function () {
    $(this).stop().animate({
        "opacity": "1"
    }, 400);
    $(this).prev(".caption").stop().fadeTo(0, 0).css('visibility', 'visible').fadeTo('fast', 1);
},
"mouseleave": function () {
    $(this).stop().animate({
        "opacity": "0.3"
    }, 400);
    $(this).prev(".caption").stop().fadeTo(0, 1).css('visibility', 'visible').fadeTo('fast', 0);
}
}, "img");

$("#container").on({
"mouseenter": function () {
    $(this).stop().animate({
        "opacity": "0.3"
    }, 400);
},
"mouseleave": function () {
    $(this).stop().animate({
        "opacity": "1"
    }, 400);
}
}, ".gallery a img"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:17:44.030

您可以使用逗号`,`或`add()`函数指定多个选择器：

```
$("#container, #container2, #container3") 
```

# 更新

```
$("#container, #container2, #container3").on({
"mouseenter": function (e) {
   var id = e.target.id;
   if (id === 'container') {
     // code for #container
   }
   else if (id === 'container2') {
     // code for #container2
   }
   else if (id === 'container3') {
     // code for #container3
   }
},
"mouseleave": function (e) {
   var id = e.target.id;
   if (id === 'container') {
     // code for #container
   }
   else if (id === 'container2') {
     // code for #container2
   }
   else if (id === 'container3') {
     // code for #container3
   }
}
}, "img"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:18:27.227

您可以尝试创建一些通用函数来处理大多数此类事件。

例如：

```
function someEvent(container, opacity) 
{
    $(container).stop().animate({
        "opacity": opacity
    }, 400);
}

$("#container").on({
   "mouseenter": someFunction($(this), '0.3');
  },
   "mouseleave": someFunction($(this), '1');
  }
}, ".gallery a img"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:25:29.510

您可以将通用代码提取到两个函数中，“变亮”和“变暗”

```
brighten = function(container,hasCaption) {
    container.stop().animate({opacity:1},400);
    if(hasCaption) {
        container.prev(".caption").stop().fadeTo(0, 0).css('visibility', 'visible').fadeTo('fast', 1);
    }
}

dim = function(container,hasCaption) {
    container.stop().animate({opacity:0.3},400);
    if(hasCaption) {
        container.prev(".caption").stop().fadeTo(0, 1).css('visibility', 'visible').fadeTo('fast', 0);
    }
} 
```

然后你的事件绑定看起来像：

```
$("#container").on({
    "mouseenter": function () { brighten($(this),true); },
    "mouseleave": function () { dim($(this),true); }
}, "img");

$("#container").on({
    "mouseenter": function () { dim($(this)); },
    "mouseleave": function () { brighten($(this)); }
}, ".gallery a img"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T19:29:54.210

这应该可以帮助你。
每个元素都有不同的不透明度，所以如果你必须`if`为每个元素制作一个不透明度，这将是一个问题，所以最好的方法是使用[jQuery.data()](http://api.jquery.com/jQuery.data/)存储它。

JS

```
jQuery('#container1').data('opacity', {'enter': 0.1, 'leave': 1});
jQuery('#container2').data('opacity', {'enter': 0, 'leave': 0.1});

jQuery('#container1, #container2').on({
    "mouseenter": function() {
        var $element = jQuery(this);
        $element.stop().animate({
            "opacity": $element.data('opacity').enter;
        }, 400);
        if($element.is('#container1')) {
            $element.prev(".caption").stop().fadeTo(0, 0).css('visibility', 'visible').fadeTo('fast', 1);
        }
    },
    "mouseleave": function() {
        var $element = jQuery(this);
        $element.stop().animate({
            "opacity": $element.data('opacity').leave;
        }, 400);
        if($element.is('#container1')) {
            $element.prev(".caption").stop().fadeTo(0, 1).css('visibility', 'visible').fadeTo('fast', 0);
        }
    }
}, "img"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T19:37:20.663

未测试：无论如何，最好将代码保存在命名空间中，并从事件中调用相应的函数。

```
$("#container").on({
"mouseenter": function () {
    var galleryImg = $(this).parents('.gallery').length >=1;
    $(this).stop().animate({
        "opacity": galleryImg? 0.3 : 1
    }, 400);
    if(!gallerImg)$(this).prev(".caption").stop().fadeTo(0, 0).css('visibility', 'visible').fadeTo('fast', 1);
},
"mouseleave": function () {
   var galleryImg = $(this).parents('.gallery').length >=1;
    $(this).stop().animate({
        "opacity": galleryImg? 1 : 0.3
    }, 400);
    if(!gallerImg)$(this).prev(".caption").stop().fadeTo(0, 1).css('visibility', 'visible').fadeTo('fast', 0);
}
}, "img"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T22:29:30.087

其他一些答案可能更优雅，但如果你只是想减少行数并减少重复，你可以将它分解为一个可重用的函数并像这样调用它两次：

```
function imageMouseover(selector, filterSelector, mouseEnterOpacity, mouseLeaveOpacity, fadeCaption) {
    $(selector).on({
        "mouseenter": function () {
            $(this).stop().animate({
                "opacity": mouseEnterOpacity
            }, 400);
            if (fadeCaption) {
                $(this).prev(".caption").stop().fadeTo(0, 0).css('visibility', 'visible').fadeTo('fast', 1);
            }
        },
        "mouseleave": function () {
            $(this).stop().animate({
                "opacity": mouseLeaveOpacity
            }, 400);
            if (fadeCaption) {
                $(this).prev(".caption").stop().fadeTo(0, 1).css('visibility', 'visible').fadeTo('fast', 0);
            }
        }
    }, filterSelector);
} 
```

您可以调用它两次，仅指定正在更改的内容：

```
imageMouseover("#container", "img", "1", "0.3", true);
imageMouseover("#container", ".gallery a img", "0.3", "1", false); 
```

# android - 降序 SQLite 整数而不是字符串

> ID：11162700
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:15:08.773
> 
> 标签：android, database, sqlite, cursor

我已经设法让我的 SQLite 数据库按分数列按降序显示，但问题是我认为它将该列识别为字符串而不是 int，因为它按以下顺序出现：

7、6、4、2、1、19、

而且我不知道如何更改它，即使我确定这很简单。这是我当前的代码：

```
public class CodeBreakerDB {

public static final String KEY_ROWID = "_id"; //Referencing a specific row in the database.
public static final String KEY_NAME = "player_name"; 
public static final String KEY_SCORE = "player_score"; 

private static final String DATABASE_NAME = "PlayerScoresdb"; //Labeling the database 
private static final String DATABASE_TABLE = "playerTable"; //Labeling the table

private static final int DATABASE_VERSION = 1; 

private DbHelper scoreHelper;
private final Context scoreContext;
private SQLiteDatabase scoreDb;

//databaseHelper to help set up database
private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME , null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) { //Method only called on first use to generate db.

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_SCORE + " INTEGER);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { //Method called after first use

        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

}

public CodeBreakerDB(Context c){
    scoreContext = c;
}

public CodeBreakerDB open() throws SQLException{
    scoreHelper = new DbHelper(scoreContext); //Gets aspects set up for the database including name and version.
    scoreDb = scoreHelper.getWritableDatabase(); //Opening of database through scoreHelper.
    return this;
}

public void close (){
    scoreHelper.close(); //Closes the scoreHelper class. 
}

public long createScoreEntry(String name, String score) { // Writing to the actual database. 

    ContentValues cv = new ContentValues(); 
    cv.put(KEY_NAME, name);
    cv.put(KEY_SCORE, score);
    return scoreDb.insert(DATABASE_TABLE, null, cv);

}

public String getRank() {

    String[] rank = new String[]{ KEY_ROWID };
    Cursor c = scoreDb.query(DATABASE_TABLE, rank, null, null, null, null, KEY_SCORE+" DESC"); 
    String rankResult = "";

    int iRow2 = c.getColumnIndex(KEY_ROWID); //Cursor looking for column setting equal to these ints.

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) { 
        //Move to first row - where cursor starts and moves to next row as long it is not after last row.
        rankResult = rankResult + c.getString(iRow2) + "\n"; 
        //Returning value of row that it is currently on.
    }
    return rankResult;  //returning result
}

public String getName() {

    String[] name = new String[]{ KEY_NAME };
    Cursor c = scoreDb.query(DATABASE_TABLE, name, null, null, null, null, KEY_SCORE+" DESC");  //reading information from db.
    String nameResult = "";

    int iRow1 = c.getColumnIndex(KEY_NAME); //Cursor looking for column setting equal to these ints.

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) { 
        //Move to first row - where cursor starts and moves to next row as long it is not after last row.
        nameResult = nameResult + c.getString(iRow1) + "\n"; 
        //Returning value of row that it is currently on.
    }
    return nameResult;  //returning result
}

public String getScore() {

    String[] score = new String[]{ KEY_SCORE };
    Cursor c = scoreDb.query(DATABASE_TABLE, score, null, null, null, null, KEY_SCORE+" DESC"); 
    String scoreResult = "";

    int iRow2 = c.getColumnIndex(KEY_SCORE); //Cursor looking for column setting equal to these ints.

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) { 
        //Move to first row - where cursor starts and moves to next row as long it is not after last row.
        scoreResult = scoreResult + c.getString(iRow2) + "\n"; 
        //Returning value of row that it is currently on.
    }
    return scoreResult; //returning result
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:27:46.560

```
public long createScoreEntry(String name, String score) { // Writing to the actual database. 

    ContentValues cv = new ContentValues(); 
    cv.put(KEY_NAME, name);
    cv.put(KEY_SCORE, score);
    return scoreDb.insert(DATABASE_TABLE, null, cv);

} 
```

您将 KEY_SCORE 作为字符串。注意`score`类型是字符串。

也许你应该使用这个

```
cv.put(KEY_SCORE, Integer.parseint(score)); 
```

编辑：

还要更改您在哪里提取值的代码。IE

```
 rankResult = rankResult + c.getString(iRow2) + "\n"; 
```

至

```
rankResult = rankResult + Integer.toString(c.getInt(iRow2)) + "\n"; 
```

还删除您的表并重新创建它。

# html - 在哪里可以找到 HTML5 规范的旧版本？

> ID：11162702
> 
> 赞同：2
> 
> 时间：2012-06-22T19:15:19.420
> 
> 标签：html, diff, specifications

我很难找到 HTML5 规范的旧版本。我一直在寻找资源，例如[WHATWG 的版本](http://www.whatwg.org/specs/web-apps/current-work/multipage/)或[HTML5 与 HTML4 的差异，](http://www.w3.org/TR/html5-diff/)而我的 google-fu 让我失望了。

是否有可以浏览不同版本的 HTML5 规范并（*更重要的是*）比较不同版本的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:40:36.687

这取决于您想要回溯多远，但是对于查看早期版本，有几个选项会浮现在脑海中。

[最新版本](http://dev.w3.org/html5/spec/index.html)的规范在一开始就有一个指向一些以前草稿的链接列表。

另一个选项是[Wayback Machine](http://wayback.archive.org/web/%2a/http://dev.w3.org/html5/spec/)，但它似乎在 2011 年中期停止索引页面。

虽然不知道你会如何比较它们。您可能会更好地查看[差异跟踪器](http://html5.org/tools/web-apps-tracker)，尽管它正在跟踪 WHATWG 版本的更改。

# python - 在 Python 中从许多包含所需字符串的文件中查找一个

> ID：11162711
> 
> 赞同：5
> 
> 时间：2012-06-22T19:15:59.380
> 
> 标签：python

我有一个像'apples'这样的字符串。我想找到这个字符串，我知道它存在于数百个文件中的一个中。例如

```
file1
file2
file3
file4
file5
file6
...
file200 
```

所有这些文件都在同一个目录中。使用python查找包含此字符串的文件的最佳方法是什么，知道只有一个文件包含它。

我想出了这个：

```
for file in os.listdir(directory):
    f = open(file)
    for line in f:
        if 'apple' in f:
            print "FOUND"
    f.close() 
```

还有这个：

```
grep = subprocess.Popen(['grep','-m1','apple',directory+'/file*'],stdout=subprocess.PIPE)
found = grep.communicate()[0]
print found 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T19:22:17.710

鉴于文件都在同一个目录中，我们只得到一个当前目录列表。

```
import os

for fname in os.listdir('.'):    # change directory as needed
    if os.path.isfile(fname):    # make sure it's a file, not a directory entry
        with open(fname) as f:   # open file
            for line in f:       # process line by line
                if 'apples' in line:    # search for string
                    print 'found string in file %s' %fname
                    break 
```

这会自动获取当前目录列表，并检查以确保任何给定条目都是文件（不是目录）。

然后它打开文件并逐行读取（*为了避免内存问题，*它不会一次全部读取）并在每一行中查找目标字符串。

当它找到目标字符串时，它会打印文件的名称。

此外，由于文件是使用打开的，`with`所以当我们完成（或发生异常）时它们也会自动关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:24:54.063

为简单起见，假设您的文件位于当前目录中：

```
def whichFile(query):
    for root,dirs,files in os.walk('.'):
        for file in files:
            with open(file) as f:
                if query in f.read():
                    return file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T19:24:54.567

```
for x in  os.listdir(path):
    with open(x) as f:
        if 'Apple' in f.read():
         #your work
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:26:45.930

一种惰性评估，基于迭代工具的方法

```
import os
from itertools import repeat, izip, chain

gen = (file for file in os.listdir("."))
gen = (file for file in gen if os.path.isfile(file) and os.access(file, os.R_OK))
gen = (izip(repeat(file), open(file)) for file in gen)
gen = chain.from_iterable(gen)
gen = (file for file, line in gen if "apple" in line)
gen = set(gen)
for file in gen:
  print file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T11:54:06.043

打开你的终端并写下这个：

*   不区分大小写的搜索

```
grep -i 'apple' /path/to/files 
```

*   递归搜索（通过所有子文件夹）

```
grep -r 'apple' /path/to/files 
```

# mysql - char_length 没有像想象的那样工作

> ID：11162721
> 
> 赞同：3
> 
> 时间：2012-06-22T19:17:20.863
> 
> 标签：mysql

以下是我所拥有的

```
+++++++++++++++
+ id + myData +
+++++++++++++++
+ 1  + ABCD   +
+ 2  + ABCDD  +
+++++++++++++++ 
```

当我执行

```
select char_length((select myData from mytable where id = 1)) as MyLength; 
```

我得到的结果为

```
++++++++++++
+ MyLength +
++++++++++++
+  4       +
++++++++++++ 
```

但是当我执行查询时，

```
select char_length((select myData from mytable) as MyLength; 
```

我得到错误

```
DDL and DML statements are not allowed in the query panel for MySQL; only SELECT statements are allowed. 
```

## [演示](http://sqlfiddle.com/#!2/cc039/3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:19:44.997

您将整个查询输出包装在`CHAR_LENGTH()`. 将 应用于`WHERE id = 1`子查询时，它返回单行，并且由于您选择了单列，因此您将返回一个字符串值，该字符串值`CHAR_LENGTH()`将作为其参数接受。

如果子查询`select mySata from mytable`返回多行，`char_length()`则不能接受它作为输入。相反，只需在常规语句中应用`CHAR_LENGTH()`to即可查看多行的长度。`myData``SELECT`

```
SELECT CHAR_LENGTH(myData) AS myLength FROM mytable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:12:26.233

随着`char_length((select myData from mytable))`您将行集对象传递给函数，这`char_length`是无法处理的。

When calling functions with query results, make sure you select only one row, and only one column, so the result can be interpreted as a single value.

# uml - 信用卡或现金支付是用例吗？

> ID：11162722
> 
> 赞同：2
> 
> 时间：2012-06-22T19:17:29.633
> 
> 标签：uml

我正在研究用例图。客户可以通过信用卡或现金或支票付款。我知道我应该在图表中提及它们。但它们是应该在用例下列出的三个不同的主要用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:24:35.087

通常，什么是或不是用例取决于您应用的用例理念。我参加的 UML 课程的教授非常清楚，在他看来，用例只能是演员*想要*做的事情。

因此，“输入密码”永远不会是一个用例，因为用户不想输入密码。输入密码只是用例中的一个步骤，例如“检查账户余额”。

我认为支付是一个非常相似的案例。客户不想为自己付费；用户付费是因为它是更大流程的一部分，这是一个用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:27:48.677

您可以为支付用例建模，然后创建三个扩展用例，每种支付方式一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:21:20.203

仅当您正在建模的系统对不同的付款方式做出不同的响应时。

# ios - 不使用 EAGLContext 的 OpenGL ES 示例

> ID：11162733
> 
> 赞同：0
> 
> 时间：2012-06-22T19:18:26.363
> 
> 标签：ios, opengl-es, opengl-es-2.0

我想更好地了解iOS下OpenGL ES framebuffers、renderbuffers等的创建、分配和绑定。我了解 EAGLContext 和 EAGLSharegroup 类通常管理此类对象的分配和绑定。但是，苹果文档建议可以在不使用 EAGLContext 类的情况下进行 GL 屏幕外渲染，我对如何进行感兴趣。有没有人有任何代码示例的指针？

我也会对展示如何使用 EAGLContext 完成屏幕外渲染的示例感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:13:44.320

在 iOS 上使用 OpenGL ES 渲染内容的唯一方法是通过 EAGLContext 实现。来自[OpenGL ES 编程指南](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithOpenGLESContexts/WorkingwithOpenGLESContexts.html)：

> 在您的应用程序可以调用任何 OpenGL ES 函数之前，它必须初始化一个 EAGLContext 对象并将其设置为当前上下文。

我认为以下几行可能会引起一些混乱：

> EAGLContext 类还提供了您的应用程序用于将 OpenGL ES 内容与 Core Animation 集成的方法。如果没有这些方法，您的应用程序将仅限于使用屏幕外图像。

这意味着如果您想将内容呈现到屏幕上，您需要使用一些仅由 EAGLContext 类提供的额外方法，例如`-renderbufferStorage:fromDrawable:`. 即使您要在屏幕外绘制，您仍然需要一个 EAGLContext 来管理 OpenGL ES 命令，但是需要这些特定于 EAGLContext 的特定方法才能在屏幕上绘制。

对于第二个问题，如何设置屏幕外渲染将取决于此屏幕外渲染的配置（纹理支持的 FBO、深度缓冲区等）。例如，以下代码将设置一个没有深度缓冲区的简单 FBO，并渲染到已设置的`outputTexture`纹理：

```
glActiveTexture(GL_TEXTURE1);
glGenFramebuffers(1, &filterFramebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, filterFramebuffer);
glBindTexture(GL_TEXTURE_2D, outputTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)currentFBOSize.width, (int)currentFBOSize.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, outputTexture, 0); 
```

对于代码示例，您可以查看我如何在开源[GPUImage](https://github.com/BradLarson/GPUImage)框架（仅进行简单的图像渲染）或我的开源[Molecules](http://sunsetlakesoftware.com/molecules)应用程序（使用深度缓冲区进行更复杂的离屏渲染）中执行此操作。

# c# - 在里面获取一个保留html标签的子字符串

> ID：11162736
> 
> 赞同：0
> 
> 时间：2012-06-22T19:18:30.877
> 
> 标签：c#

使用全文搜索的搜索过程（这意味着：很难在过程之外重现匹配）返回突出显示内部匹配字符串的行，例如：

```
"i have been <em>match</em>ed"
"a <em>match</em> will happen in the word <em>match</em>"
"some random words including the word <em>match</em> here" 
```

现在我需要获取字符串的前 x 个字符，但是里面的 html 标签遇到了一些麻烦。

喜欢：

```
"i have been <em>mat</em>..." -> first 15 characters
"a <em>match</em> will happen in the word <em>m</em>..." -> first 33 characters
"some rando..." -> first 10 characters 
```

我试过用一些 if else，但最后我得到了一个大意大利面。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:22:48.353

我建议编写一个带有几个状态的简单解析器 - `InText`, `InOpeningTag`,`InClosingTag`是我想到的几个。

只需遍历字符，弄清楚你是否是`InText`，只计算那些字符......一旦达到限制，不要再添加任何文本，如果你在开始和结束标签之间，只需添加结束标签。

如果您不知道我在说什么，请查看[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)的源代码（查找`Parse`方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:32:06.400

`<em>`这应该只基于标签做你想要的。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace Test
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var dbResults = GetMatches();
            var firstLine = HtmlSubstring(dbResults[0], 0, 15);
            Console.WriteLine(firstLine);
            var secondLine = HtmlSubstring(dbResults[1], 0, 33);
            Console.WriteLine(secondLine);
            var thirdLine = HtmlSubstring(dbResults[2], 0, 10);
            Console.WriteLine(thirdLine);

            Console.Read();
        }

        private static List<string> GetMatches()
        {
            return new List<string>
            {
                "i have been <em>match</em>ed"
                ,"a <em>match</em> will happen in the word <em>match</em>"
                , "some random words including the word <em>match</em> here"
            };
        }

        private static string HtmlSubstring(string mainString, int start, int length = int.MaxValue)
        {
            StringBuilder substringResult = new StringBuilder(mainString.Replace("</em>", "").Replace("<em>", "").Substring(start, length));

            // Get indexes between start and (start + length) that need highlighting.
            int matchIndex = mainString.IndexOf("<em>", start);
            while (matchIndex > 0 && matchIndex < (substringResult.Length - start))
            {
                int matchIndexConverted = matchIndex - start;
                int matchEndIndex = mainString.IndexOf("</em>", matchIndex) - start;

                substringResult.Insert(matchIndexConverted, "<em>");
                substringResult.Insert(Math.Min(substringResult.Length, matchEndIndex), "</em>");

                matchIndex = mainString.IndexOf("<em>", matchIndex + 1);
            }

            return substringResult.ToString();
        }
    }
} 
```

# javascript - Ajax 检查模型更新 - 有没有比计时器更好的解决方案？

> ID：11162739
> 
> 赞同：0
> 
> 时间：2012-06-22T19:18:39.180
> 
> 标签：javascript, ruby-on-rails, ajax

在 Rails 应用程序中，我想在模型中的信息更新后更新页面上的信息。有没有更好的解决方案可以通过发送请求的 settimeout /setinterval 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:24:30.360

您可以让您的应用使用[Pusher](http://pusher.com/)（或类似的，如[Private Pub](http://railscasts.com/episodes/316-private-pub)

1.  Javascript 会监听（订阅）消息
2.  您的应用程序发送完成的消息
3.  Javascript刷新内容（页面刷新或从ajax获取内容）

# google-maps - 我在哪里可以找到谷歌地图中使用的小红点图像？

> ID：11162740
> 
> 赞同：18
> 
> 时间：2012-06-22T19:18:45.667
> 
> 标签：google-maps, marker

我正在寻找[这里](https://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=restaurant,%20dallas,%20tx&sll=37.0625,-95.677068&sspn=47.617464,93.076172&ie=UTF8&hq=restaurant,&hnear=Dallas,%20Texas&z=13)显示的红点， 我可以在不同的地方找到大量的图钉和阴影。但是找不到这个小点……有人可以帮我吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-11-12T23:20:57.610

你根本不需要任何图像。

```
var circle = {
    path: google.maps.SymbolPath.CIRCLE,
    fillColor: 'red',
    fillOpacity: .4,
    scale: 4.5,
    strokeColor: 'white',
    strokeWeight: 1
};

// stack exchange headquarters
var location = {lat: 40.7087507876002, lng: -74.00675015738136};

var map = new google.maps.Map(document.getElementById('map'), {
    center: location,
    zoom: 13,
});

var marker = new google.maps.Marker({
    position: location,
    map: map,
    icon: circle, // set the icon here
}); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-12-02T20:01:49.363

你可以在这里找到一些：

红圈 - [https://storage.googleapis.com/support-kms-prod/SNP_2752125_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2752125_en_v0)

蓝色圆圈 - [https://storage.googleapis.com/support-kms-prod/SNP_2752068_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2752068_en_v0)

粉红色圆圈 - [https://storage.googleapis.com/support-kms-prod/SNP_2752264_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2752264_en_v0)

黄色圆圈 - [https://storage.googleapis.com/support-kms-prod/SNP_2752063_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2752063_en_v0)

绿圈 - [https://storage.googleapis.com/support-kms-prod/SNP_2752129_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2752129_en_v0)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-22T19:30:02.580

您是否只是想复制标记的样式？

如果您使用的是 Chrome，只需按 F12 即可获得开发者工具，转到资源，然后选择 Frames->Maps->Images。

所有图像都显示在那里以及它们的位置。

[https://maps.gstatic.com/mapfiles/markers2/red_markers_A_J2.png](https://maps.gstatic.com/mapfiles/markers2/red_markers_A_J2.png)

我相信这些就是你在说的？

如果您谈论的是非常小的红点，它们似乎是地图图像本身的一部分。

但是，有一个看起来完全一样的小蓝点，[https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle_blue.png](https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle_blue.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T19:33:29.730

点来自这张图片：[https](https://maps.gstatic.com/mapfiles/mv/imgs8.png) ://maps.gstatic.com/mapfiles/mv/imgs8.png （但它们更容易从[https://maps.gstatic.com/mapfiles/mv/imgs2.png](https://maps.gstatic.com/mapfiles/mv/imgs2.png)获取）

就版权而言，如果您打算使用它们，您应该阅读服务条款 (http://maps.google.com/help/terms_maps.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T19:45:16.117

Afaik 没有指向小 FusionTables 红点的静态链接......

另请参阅[https://groups.google.com/group/fusion-tables-users-group/browse_thread/thread/670a2af718afc97b?pli=1](https://groups.google.com/group/fusion-tables-users-group/browse_thread/thread/670a2af718afc97b?pli=1)

这是指向其他静态链接列表的两个链接 [https://sites.google.com/site/gmapicons/home/](https://sites.google.com/site/gmapicons/home/)和 [https://sites.google.com/site/gmapsdevelopment/](https://sites.google.com/site/gmapsdevelopment/)

另一种方法是使用这个 [http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_red.png](http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_red.png)

这就是我在 Fusion Tables with Markerclusterer 的（测试）地图上所做的

# php - 贝宝不检查帐单地址是否与信用卡匹配

> ID：11162742
> 
> 赞同：0
> 
> 时间：2012-06-22T19:18:55.603
> 
> 标签：php, paypal

所以我使用 php api 进行 paypal dodirectpayment，今天早上我们注意到，如果你的信用卡上的所有内容都正确，并且有一个有效的地址，但如果地址与信用卡的账单地址不匹配，交易将仍然通过。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-07T19:50:49.233

*   信用卡上的名字在在线交易中永远不会匹配。这是一种错误的印象。对于任何支付提供商（不仅仅是 PayPal），只有信用卡号、到期日期、发行日期（如果适用；欧洲卡）、3 位 CVV/CVV2/CSC 代码检查“匹配”。

这样做的原因是，有些公司卡或礼品卡上**没有名字**，但这并不意味着它们被取消资格。

*   [地址验证系统 (AVS)](http://en.wikipedia.org/wiki/Address_Verification_System)仅验证地址中的数字。这些数字包括建筑物/单元编号和邮政编码（自然识别城市和州）。

例如，如果我的帐单详细信息真的是：

> 约翰·史密斯
> 123 Main St
> Los Angeles, California
> 95000

这可能会经历：

> 布莱恩·亚当斯
> 123 Second St
> Sacramento, California
> 95000

维基百科条目提到：

> 例如，如果地址是 101 Main Street, Highland, CA 92346，在美国，AVS 将检查 101 和 92346。持卡人可能会收到来自电子商务验证系统的假阴性或部分拒绝 AVS，这可能需要手动发卡银行对 AVS 条目的覆盖、语音授权或重新编程。

验证姓名/地址的几种方法：

*   使用 PayPal 的[地址验证 API](https://developer.paypal.com/docs/classic/api/merchant/AddressVerify_API_Operation_NVP/)，该 API 将地址与用户帐户上已确认的地址进行匹配。

*   邮寄信件：虽然速度较慢且不适合您的场景，但[Google](https://support.google.com/adsense/answer/157667?hl=en)使用了这个。生成验证码，将其打印在信函上并邮寄到地址。要求用户登录其帐户并输入验证码以验证其地址的信函。

*   最不可靠：使用公共记录，包括 WhitePages。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T23:06:31.593

当然这是个问题，如果地址不匹配那明显是诈骗！- 我们通过艰难的方式学到了这一点，损失了大约 5,000 英镑。如果送货地址与帐单地址不匹配，信誉好的商家会自动拒绝交易是常见的做法。

我对您的客户的建议是不要使用 PayPal，因为即使该卡与账单/送货地址匹配，该人在使用他们的虚拟终端时可以使用的名称也不需要匹配，并且他们不会反对银行/信用卡的退款如果他们决定退款，公司会为您服务。然后，您在民事法院没有案件，因为您付款时使用的名称也不是卡注册的名称，可悲！我现在正在与 PayPal 抗争，因为它允许这种情况发生，这将无处可去，但至少我可以说我试过了。在没有警方或 PayPal 帮助的情况下，我们不得不自己打击几起欺诈案件。

我对您的客户的建议是，使用一个可信赖的商家，该商家使用第三方安全机制来匹配卡的名称和银行以及账单/送货地址，例如 SagePay。

# scala - haskell scala 互操作性

> ID：11162743
> 
> 赞同：5
> 
> 时间：2012-06-22T19:19:00.363
> 
> 标签：scala, haskell, language-interoperability

我是 Scala 初学者，来自 Object Oriented Paradigm。在了解 Scala 的函数式编程部分时，我被引导到 Haskell - 纯函数式编程语言。

探索 SO question-answers，我发现 Java - Haskell 具有互操作性。

我很想知道 Scala-Haskell 互操作性是否同样存在？

用 Haskell 编写的函数库可以在 Scala 应用程序中使用吗？

> 根据唐斯图尔特给出的答案：**这是可能的。**

在 Scala 应用程序中集成 Haskell 函数库将是直接且容易的，还是需要复杂的调整？

使用集成的 Haskell 函数库，Scala 应用程序将在 JVM 上运行还是需要不同的安排？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:21:24.550

这是可能的，但我不知道有任何例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T22:35:22.847

> 我发现 Java - Haskell 具有互操作性。我很想知道 Scala-Haskell 互操作性是否同样存在？

好吧，鉴于互操作性是可传递的，并且鉴于`(hj_interop : Haskell <-> Java)`和`(js_interop : Java <-> Scala)`，我们因此得出结论`Haskell <-> Scala`。

如果你愿意`Haskell -> Scala`，那么只需`Haskell -> Java`从`hj_interop`和`Java -> Scala`从`js_interop`。如果你愿意`Scala -> Haskell`，那么只需`Scala -> Java`从`js_interop`和`Java -> Haskell`从`hj_interop`。

这不是关于如何实现 Haskell - Scala 互操作性的非常简单的解释，但鉴于现有的互操作性，您只需以显而易见的方式组合它们。据我所知，Scala 没有提供与 Haskell 的任何直接、方便的互操作性，只是为`scalaz`Scala 添加了额外的 Haskell 风格。据我所知，Haskell 没有提供与 Scala 的任何直接、方便的互操作性。

# sql-server - SQL Server Management Studio 2012 与 Visual Studio 2012

> ID：11162755
> 
> 赞同：4
> 
> 时间：2012-06-22T19:19:34.050
> 
> 标签：sql-server, visual-studio-2012, ssms

我将迁移到 Visual Studio 和 SQL Server 的 2012 版本。因此，我有一个关于比较 VS2012 和 SSMS 2012 的问题。

首先，我已经阅读了主题 «[***为什么我应该使用 Visual Studio 2010 而不是 SSMS 进行数据库开发？***](https://dba.stackexchange.com/questions/7599/why-should-i-use-visual-studio-2010-over-ssms-for-my-database-development)»，但既然他们在谈论 2010，我想重点关注新的 2012 版本。

所以，这是我的问题：

1.  Visual Studio 2012 和 SQL Server Management Studio 2012 在 SQL Server & DB 管理方面到底有什么区别？
2.  差距是什么，我可以在 SSMS 2012 中做什么，而这在 VS 2012 中是不可能的？

特别是如果我谈论的是数据库创建和维护的基本级别，我应该安装 SSMS 还是 VS 就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:15:59.877

就我个人而言，我会选择两者，但我是一名更专注于以管理为中心的工作流程的 DBA。我对使用 VS 作为 SQL Server 管理接口不太熟悉，但是看着它，看起来你在 VS 中可以做很多在 SSMS 中可以做的事情，但也有很多事情是你做不到的。

如果您想监控复制订阅和其他基于代理的作业，安装 SSMS 会让您的生活更轻松。SSMS 更容易促进基本（和更高级）的 DBA 任务。灾难恢复、复制、SQL Server 代理、服务控制等。这些都是包含 SSMS 的原因。

他们不是竞争对手，而是为特定目的而创建的工具。如果您的工作描述表明这两种工具都可以简化您的工作流程，那么请务必同时安装这两种工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:17:19.867

如果我是你，我会继续使用 VS2010/SQL 2008。我现在有一个问题悬而未决，因为从 Visual Studio 2012 中管理 SQL 数据库似乎不像 2010 年那样工作。添加时没有“创建表”或“显示表数据”选项，就像 2010 年那样一个直接的 SQL Server 数据库 (.mdf) 到您的项目。无论如何，您都需要使用单独的工具，例如 SSDT 或 SSMS。

# php - 透明PNG变成黑色

> ID：11162756
> 
> 赞同：0
> 
> 时间：2012-06-22T19:19:36.827
> 
> 标签：php, png, transparent, alpha

我已经查看了许多其他线程，人们遇到了 png 图像变黑的问题，它应该是透明的，并且没有一个解决方案对我有用。

也许我在代码中的其他地方出错了？也许我的网络服务器不支持 imagealhpableending？

感谢任何可以提供帮助的人。

```
 $photo = imagecreatefrompng( "{$thumb_folder}{$new_file_name}" );
        $width = imagesx($photo);
        $height = imagesy($photo);

        $new_width = 32;
        $new_height = floor($height / ($width / $new_width)); 

        $temp_photo = imagecreatetruecolor($new_width, $new_height);

        imagealphablending($temp_photo, false);

        imagesavealpha($temp_photo, true);

        $transparent = imagecolorallocatealpha($temp_photo, 255, 255, 255, 127);

        imagefilledrectangle($temp_photo, 0, 0, $new_width, $new_height, $transparent);

        imagecopyresampled($temp_photo, $photo, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        imagepng($temp_photo, "{$thumb_folder}{$new_file_name}" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:21:59.230

无论如何，分配给图像的第一种颜色始终是背景颜色，因此无需绘制填充的矩形。从代码中删除它，看看你得到了什么。

# android - 为什么android SimpleCursorAdapter bindView 复制第一行？

> ID：11162758
> 
> 赞同：0
> 
> 时间：2012-06-22T19:19:42.383
> 
> 标签：android, simplecursoradapter

我已经扩展了 SimpleCursorAdapter 并且遇到了一个奇怪的 bindView 问题，它似乎在第一行被调用了两次。

只有第一行似乎是重复的。我感觉它与光标的定位方式有关，但是查看了所有适配器类，似乎无法找到发生这种情况的位置。

这是我的 bindView 代码，我插入了一些日志来显示我所看到的。

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    final ViewBinder binder = getViewBinder();
    final int count = mTo.length;
    final int[] from = mFrom;
    final int[] to = mTo;

    Log.v("builder", "cursor count"+cursor.getCount() );

    Log.v("builder", "mTo.length"+count);
    //Bind all Views
    for (int i = 0; i < count; i++) {
        final View v = view.findViewById(to[i]);
        if (v != null) {
            boolean bound = false;
            if (binder != null) {
                bound = binder.setViewValue(v, cursor, from[i]);
            }

            if (!bound) {
                String text = cursor.getString(from[i]);
                v.setVisibility(View.VISIBLE);
                if (text == null && !(v instanceof ImageView)) {
                    text = "";
                    v.setVisibility(View.GONE);
                } 

                if (v instanceof TextView) {
                    setViewText((TextView) v, text);
                    if (v instanceof EditText){
                        EditText et = (EditText) v;
                        Log.v("builder", "setting up edittext"+cursor.getPosition()+i);
                    //  setUpEditors(view, et);
                    }
                } else if (v instanceof ImageView) {
                    setViewImage((ImageView) v, text);
                } else {
                    throw new IllegalStateException(v.getClass().getName() + " is not a " +
                            " view that can be bound by this SimpleCursorAdapter");
                }

            }
        }
    }

} 
```

这是我的输出，光标中只有一项

```
06-22 15:15:03.797: V/builder(27573): cursor count1
06-22 15:15:03.797: V/builder(27573): mTo.length5
06-22 15:15:03.807: V/builder(27573): setting up edittext02
06-22 15:15:03.807: V/builder(27573): setting up edittext03
06-22 15:15:03.807: V/builder(27573): setting up edittext04
06-22 15:15:03.887: V/builder(27573): cursor count1
06-22 15:15:03.887: V/builder(27573): mTo.length5
06-22 15:15:03.897: V/builder(27573): setting up edittext02
06-22 15:15:03.897: V/builder(27573): setting up edittext03
06-22 15:15:03.907: V/builder(27573): setting up edittext04 
```

这里有 2 件商品

```
06-22 15:17:28.337: V/builder(27573): cursor count2
06-22 15:17:28.337: V/builder(27573): mTo.length5
06-22 15:17:28.337: V/builder(27573): setting up edittext02
06-22 15:17:28.337: V/builder(27573): setting up edittext03
06-22 15:17:28.337: V/builder(27573): setting up edittext04
06-22 15:17:28.417: V/builder(27573): cursor count2
06-22 15:17:28.417: V/builder(27573): mTo.length5
06-22 15:17:28.417: V/builder(27573): setting up edittext02
06-22 15:17:28.427: V/builder(27573): setting up edittext03
06-22 15:17:28.427: V/builder(27573): setting up edittext04
06-22 15:17:28.517: V/builder(27573): cursor count2
06-22 15:17:28.517: V/builder(27573): mTo.length5
06-22 15:17:28.527: V/builder(27573): setting up edittext12
06-22 15:17:28.527: V/builder(27573): setting up edittext13
06-22 15:17:28.527: V/builder(27573): setting up edittext14 
```

这是ListView所在的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" android:orientation="vertical">

<TextView
    android:id="@+id/textView6"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/labels_background"
    android:text="@string/lb_item_type"
    android:textSize="@dimen/dm_maint_tv" />

<CheckBox
    android:id="@+id/mt_base"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/lb_base" />

<TextView
    android:id="@+id/textView10"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:background="@color/labels_background"
    android:text="@string/lb_build"
    android:textSize="@dimen/dm_maint_tv" />

<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="0dp" android:layout_weight="1" android:id="@+id/builder">

    <ListView
        android:id="@+id/mt_build_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </ListView>

    <ImageView
        android:id="@+id/mt_additem"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="3dp"
        android:layout_marginTop="3dp"
        android:scaleType="centerInside"
        android:src="@drawable/ic_input_add" android:layout_gravity="top|right"/>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:52:49.087

如果您看到每个项目的序列`newView`/`bindView`被调用两次，那么您可能正在使用高度设置为 wrap_content 的 ListView，这总是一个坏主意。你能确认你没有这样做吗？

另外，我不能肯定地说，但这可能是完全有效的行为，如果你的第一个列表项被调用两次，我的意思是。听起来Android必须测量第一个列表项（这需要系统调用`bindView`一次）*然后*填充列表项（也可以通过调用`bindView`。填充第一行后（需要两次调用`bindView`），每个后续的宽度列表项是已知的，每个项目只需要一次调用`bindView`。让我知道这是否有意义......

无论哪种方式，我希望这不是您担心的事情……再一次调用`bindView`不会杀死您的应用程序。:)

# html - 如何使此显示内联

> ID：11162759
> 
> 赞同：0
> 
> 时间：2012-06-22T19:19:43.040
> 
> 标签：html, css, html-lists, inline

当我尝试在一行中显示列表但它没有这样做时，有人可以帮我找到错误。

```
#main-nav ul ul li { display: inline; } 
```

但文本不显示行。请看一下 jsfiddle.net/EZJwM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:46:55.903

我改变了

```
display: inline 
```

到

```
float:left 
```

并得到了这个[http://jsfiddle.net/EZJwM/5/](http://jsfiddle.net/EZJwM/5/)

菜单未居中，但它们显示在一行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:42:44.017

[解决您的问题 js fiddle demo](http://jsfiddle.net/sssonline2/nuKY6/)

我改为`display:block`将`display:inline`它放在一条线上，但你必须考虑到你的风格设计，我认为`main-nav`你应该使用 css 类来避免与你真正想要的东西相交，否则你会变得如此模糊

改变 1

`#main-nav ul li{ display: inline; }`

改变2

`#main-nav a:after { color: #aeaeae; content: attr(data-description); font-size: 11px; font-style: italic; font-weight: 400; display: inline; line-height: 0; margin: 3px 0 -3px; text-transform: lowercase; }`

改变 3

`#main-nav ul ul a { border: 0; border-bottom: 1px solid #252525; border-top: 1px solid #4c4c4c; color: #fff; display: inline; font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif; font-size: 11px; letter-spacing: 0; font-weight: 400; padding: 8px 20px !important; text-align: left; text-transform: none; }`

# algorithm - 如何有效地枚举 n 维网格中的所有球体点

> ID：11162761
> 
> 赞同：5
> 
> 时间：2012-06-22T19:19:45.780
> 
> 标签：algorithm

比如说，我们有一个 N 维网格和其中的某个点 X，坐标为 (x1, x2, ..., xN)。为简单起见，我们可以假设网格是无界的。

假设有一个半径 R 和一个以 X 为中心的半径的球体，即网格中所有点的集合，使得它们到 X 的曼哈顿距离等于 R。

我怀疑他们将是 2*N*R 这样的点。

我的问题是：我如何以有效和简单的方式枚举它们？“枚举”是指算法，在给定 N、X 和 R 的情况下，该算法将生成形成该球体的点列表（其中点是它的坐标列表）。

更新：最初我错误地将我使用的度量标准称为“汉明距离”。我向所有回答问题的人道歉。感谢 Steve Jessop 指出这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:07:09.827

考虑限制超球面的最小轴对齐超立方体，并编写一个程序来枚举超立方体内的网格点。

然后，您只需要一个简单的过滤器功能，它可以让您丢弃立方体上而不是超球面中的点。

对于小尺寸，这是一种简单而有效的解决方案。例如，对于 2D，为边界正方形枚举的点中有 20% 被丢弃；对于 6D，几乎 90% 的超立方体点被丢弃。

对于更高的维度，您将不得不使用更复杂的方法：遍历每个维度（如果维度的数量是可变的，您可能需要使用递归函数）。对于每个循环，您必须根据已计算的网格组件的值调整最小值和最大值。好吧，尝试为 2D 做它，枚举一个圆的点，一旦你理解了它，将这个过程推广到更高的维度将非常简单。

**更新**：呃，等一下，你想使用曼哈顿距离。将[交叉多面体](http://en.wikipedia.org/wiki/Cross_polytope)称为“球体”可能是正确的，但我发现它很混乱！在任何情况下，您都可以使用相同的方法。

如果您只想枚举交叉多面体的超曲面上的点，那么解决方案也非常相似，您必须以适当的限制遍历每个维度。例如：

```
for (i = 0; i <= n; i++)
  for (j = 0; j + i <= n; j++)
    ...
       for (l = 0; l + ...+ j + i <= n; l++) {
         m = n - l - ... - j - i;
         printf(pat, i, j, ..., l, m);
       } 
```

对于以这种方式生成的每个点，您将不得不考虑否定任何组件所产生的所有变化以覆盖所有面，然后用向量 X 置换它们。

**更新**

X = 0 情况下的 Perl 实现：

```
#!/usr/bin/perl

use strict;
use warnings;

sub enumerate {
    my ($d, $r) = @_;

    if ($d == 1) {
        return ($r ? ([-$r], [$r]) : [0])
    }
    else {
        my @r;
        for my $i (0..$r) {
            for my $s (enumerate($d - 1, $r - $i)) {
                for my $j ($i ? (-$i, $i) : 0) {
                    push @r, [@$s, $j]
                }
            }
        }
        return @r;
    }
}

@ARGV == 2 or die "Usage:\n  $0 dimension radius\n\n";
my ($d, $r) = @ARGV;
my @r = enumerate($d, $r);
print "[", join(',', @$_), "]\n" for @r; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:13:31.593

您可以从中心递归地工作，计算一次零距离并处理对称性。这个 Python 实现适用于低维“stem”向量，一次实现一个一维切片。也可以反过来做，但这意味着在部分超球面上进行迭代。虽然在数学上相同，但两种方法的效率在很大程度上取决于语言。

如果您事先知道目标空间的基数，我建议您编写一个迭代实现。

下面在我的笔记本电脑上以大约 200 毫秒的时间在六个维度上列举了一个 R=16 超级乐高积木上的点。当然，随着维度的增加或球体的增大，性能会迅速下降。

```
def lapp(lst, el):
    lst2 = list(lst)
    lst2.append(el)
    return lst2

def hypersphere(n, r, stem = [ ]):
    mystem  = lapp(stem, 0)
    if 1 == n:
            ret = [ mystem ]
            for d in range(1, r+1):
                    ret.append(lapp(stem,  d))
                    ret.append(lapp(stem, -d))
    else:
            ret     = hypersphere(n-1, r, mystem)
            for d in range(1, r+1):
                    mystem[-1] = d
                    ret.extend(hypersphere(n-1, r-d, mystem))
                    mystem[-1] = -d
                    ret.extend(hypersphere(n-1, r-d, mystem))
    return ret 
```

（此实现假设超球面以原点为中心。之后平移所有点比携带中心坐标更容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:34:45.213

输入：半径 R，尺寸 D

*   生成 R 的所有[整数分区](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)，其基数 ≤ D
*   对于每个分区，将其排列而不重复
*   对于每个排列，旋转所有的符号

例如，python中的代码：

```
from itertools import *

# we have to write this function ourselves because python doesn't have it...
def partitions(n, maxSize):
    if n==0:
        yield []
    else:
        for p in partitions(n-1, maxSize):
            if len(p)<maxSize:
                yield [1] + p
            if p and (len(p)<2 or p[1]>p[0]):
                yield [ p[0]+1 ] + p[1:]

# MAIN CODE    
def points(R, D):
    for part in partitions(R,D):             # e.g. 4->[3,1]
        part = part + [0]*(D-len(part))      # e.g. [3,1]->[3,1,0]    (padding)
        for perm in set(permutations(part)): # e.g. [1,3,0], [1,0,3], ...
            for point in product(*[          # e.g. [1,3,0], [-1,3,0], [1,-3,0], [-...
                  ([-x,x] if x!=0 else [0]) for x in perm
                ]):
                yield point 
```

半径=4，尺寸=3的演示：

```
>>> result = list( points(4,3) )

>>> result
[(-1, -2, -1), (-1, -2, 1), (-1, 2, -1), (-1, 2, 1), (1, -2, -1), (1, -2, 1), (1, 2, -1), (1, 2, 1), (-2, -1, -1), (-2, -1, 1), (-2, 1, -1), (-2, 1, 1), (2, -1, -1), (2, -1, 1), (2, 1, -1), (2, 1, 1), (-1, -1, -2), (-1, -1, 2), (-1, 1, -2), (-1, 1, 2), (1, -1, -2), (1, -1, 2), (1, 1, -2), (1, 1, 2), (0, -2, -2), (0, -2, 2), (0, 2, -2), (0, 2, 2), (-2, 0, -2), (-2, 0, 2), (2, 0, -2), (2, 0, 2), (-2, -2, 0), (-2, 2, 0), (2, -2, 0), (2, 2, 0), (-1, 0, -3), (-1, 0, 3), (1, 0, -3), (1, 0, 3), (-3, -1, 0), (-3, 1, 0), (3, -1, 0), (3, 1, 0), (0, -1, -3), (0, -1, 3), (0, 1, -3), (0, 1, 3), (-1, -3, 0), (-1, 3, 0), (1, -3, 0), (1, 3, 0), (-3, 0, -1), (-3, 0, 1), (3, 0, -1), (3, 0, 1), (0, -3, -1), (0, -3, 1), (0, 3, -1), (0, 3, 1), (0, -4, 0), (0, 4, 0), (0, 0, -4), (0, 0, 4), (-4, 0, 0), (4, 0, 0)]

>>> len(result)
66 
```

（上面我过去常常`set(permutations(...))`得到不重复的排列，这通常效率不高，但由于点的性质，这里可能无关紧要。如果效率很重要，你可以用你选择的语言编写自己的递归函数。）

这种方法是有效的，因为它不随超体积缩放，而只是随超曲面缩放，这就是您要枚举的内容（除了非常大的半径之外可能无关紧要：例如，将为您节省大约 100 倍的速度如果你的半径是 100）。

# wordpress - PHP 代码卡在缓存中 [Memcached] (WordPress)

> ID：11162764
> 
> 赞同：0
> 
> 时间：2012-06-22T19:19:55.697
> 
> 标签：wordpress, caching, nginx, memcached

我的网站在我们的缓存方法和我的 php 代码没有刷新或刷新方面遇到了一些问题。

首先，我的网站是一个位于专用 Nginx 网络服务器上的 WordPress 网站。我使用 W3 Total Cache 进行初始缓存设置。一切都设置为通过 Memcached 进行缓存。（我应该注意，我的网站在这台服务器上有点像“访客”，这是一个运行其他东西的半社区捐赠半赞助服务器。管理员很熟练，但也是志愿者。我得到了他们的全力支持用于修复问题，但他们没有时间解决我非常奇怪的问题（特别是因为我自己要求为该站点打开缓存）。如果我们有一些关于该做什么的提示，它会让事情变得更容易我们比在黑暗中拍摄;）所以欢迎任何建议。）

在某些时候，我们注意到对 php 页面的更改以及 Wordpress 和插件更新根本不起作用，而服务器上的代码反映了更新，页面仍然通过旧的 php 代码处理。

这提出了几个独特的问题。W3 Total Cache 将其设置存储在 php 文件中。其他 php 文件，删除后停止工作，但是当它们恢复到服务器时，memcached 仍然坚持使用其超旧的 memcached 副本。W3 Total Cache 设置，无论是我删除还是更改了设置 php 文件，都不会停止通过缓存的 memcached 数据运行所有内容。

服务器管理员尝试重新启动 memcached，然后刷新它。这些似乎都没有任何效果。所有其他基本设置似乎都设置正确。

当然，我们仍然可以添加新插件，所有来自数据库的数据都可以正常工作。

服务器上至少一个不是 wordpress 的其他站点也使用 memcached，没有任何问题。

任何帮助表示赞赏，如果需要，应该能够提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:49:37.737

这听起来很明显，但你没有提到它：

您是否尝试完全关闭 Total Cache 插件以确认您可以在禁用缓存时看到更改？

在您完成此操作并确保获得预期的结果之前，无法知道 memcached 确实是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:41:44.777

您的设置中有 apc.stat = 0 吗？重启php引擎有帮助吗？

# regex - 快速正则表达式帮助：从 html 中获取文本

> ID：11162771
> 
> 赞同：0
> 
> 时间：2012-06-22T19:20:30.063
> 
> 标签：regex

我有以下 html 片段：

```
<h1 class="header" itemprop="name">Some text here<span class="nobr"> 
```

我想获取html标签之间的文本，我已经为此苦苦挣扎了几个小时，请帮助我！什么正则表达式可以解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:25:14.970

您不应该为此使用正则表达式，而应该使用一些 HTML 解析器。由于您没有指定语言，因此很难提供帮助，但是您可以通过谷歌搜索找到它...

* * *

如果您仅针对这种情况需要它，则可以使用正则表达式`/>(.*?)</`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:35:41.133

就像其他人所说的那样-**您不应该使用正则表达式来解析 HTML**。但除此之外，以下内容将为您获取该文本：

`(?<=\>).+(?=\<)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:29:30.903

在 Javascript 中，您可以通过以下方式访问该信息：

```
document.getElementsByTagName("h1").item(0).textContent 
```

或者

```
document.getElementsByClassName("header").item(0).textContent 
```

# javascript - 从内联 javascript 调用 .removeClass() 不起作用

> ID：11162775
> 
> 赞同：0
> 
> 时间：2012-06-22T19:20:57.137
> 
> 标签：javascript, jquery, coldfusion

我正在进行内联 javascript 调用。它到达脚本，但对 .removeClass() 的调用不起作用（Coldfusion 9）。

```
<cfif isDefined('get_contact.C_ADDRESS_SAME') AND get_contact.C_ADDRESS_SAME EQ 0 >       
    <script language="javascript">
        show_address(0);
    </script>
</cfif> 
```

这是脚本：

```
<script type="text/javascript">
    function show_address(str)
    {
        //alert(str);
        if (str == 0) {
           //   $("#c_address").addClass("hidden");
           $("#c_address").removeClass("hidden");
        }
        else {
            //$("#c_address").removeClass("hidden");
            $("#c_address").addClass("hidden");
        }
    }
</script> 
```

警报有效，但 removeClass() 无效。当我从 onclick 事件中调用它时，它工作正常。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:23:09.160

试试这样：

```
$(document).ready(function(){
    show_address(0);
}); 
```

DOM 层次结构需要完全构建。只有在此之后，您才能访问和修改 DOM 元素。传递给[ready](http://api.jquery.com/ready/)的处理程序保证在 DOM 准备好后执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:27:08.457

你需要用

```
$(function(){

}); 
```

这可以确保在您开始使用 jQuery 之前加载 DOM。

# javascript - 两个功能中只有一个同时工作

> ID：11162776
> 
> 赞同：0
> 
> 时间：2012-06-22T19:20:58.520
> 
> 标签：javascript, jquery, html

jquery.tools.js 带有 1.3.2.min.js （我用这个 1.4 测试并且工作正常，如果我删除其余的语句（动态菜单）。如果我删除另一个，它们都可以工作请帮助我

```
<!-- scroll pics -->
<script type="text/javascript" src="js/jquery-1.4.min.js"></script>
<script type="text/javascript" src="lib/jquery.tools.js"></script>
<!-- dinamic menu --> 
<script type="text/javascript" src="js/jquery.easing.min.js"></script>
<script type="text/javascript" src="js/jquery.lavalamp.min.js"></script>
<script type="text/javascript" src="js/cufon.yui.js"></script>
<script type="text/javascript" src="js/myriad.js"></script>
<script type="text/javascript">
    $(function() {
        $("#four").lavaLamp({
            fx: "backout", 
            speed: 700
        });
    });
</script>
<script type="text/javascript">
    Cufon.replace('li a', {hover: true});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:25:09.110

老实说，您最好的做法是升级到最新版本的 jQuery。1.3.2 3岁以上。1.4 2岁以上。那是现在的古老历史。

当前版本是 1.7.2，可在[http://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)或[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/获得jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

您不必使用与 jQuery 工具捆绑在一起的 jQuery 版本。

# database - 我应该如何在我的数据库中构建这些数据？

> ID：11162777
> 
> 赞同：0
> 
> 时间：2012-06-22T19:21:05.317
> 
> 标签：database, serialization, data-structures, maintainability

因此，我正在构建此功能，以允许用户将个人资料保存到列表中。有点像播放列表的名称，用户 ID 和唯一的个人资料数据作为一个数组，其中包含个人资料 ID 和个人资料所在州的缩写。

更具体地说，我想知道我是否应该让列表成为具有以下列的表中的单行：`list_id`, `list_name`, `user_id`, `serialized_list`。

其中`serialized_list`列是包含状态键和配置文件 ID 的数组。

我想出的另一种选择是有两张桌子。一个带有列：`list_id`, `list_name`, `user_id`.

另一个每个列表项都有一行：`row_id`, `list_id`, `state`, `profile_id`.

我是一个数据库 n00b，所以我不完全确定应该考虑什么，但我想我在问这些（或另一种选择）在速度和可维护性方面哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:25:31.210

我总是发现最好使用您提到的第二种方式，因为您直接调用行而不是删除序列化列表。如果您要从序列化列表中查找 profile_id 和 state，您可以轻松地在同一个查询中以第二种方式进行操作。

# vim - 如何在 Vim 中的分离行范围内重复相同的搜索和替换命令？

> ID：11162784
> 
> 赞同：8
> 
> 时间：2012-06-22T19:21:26.867
> 
> 标签：vim, replace

我有一种情况，我想`FOO`用`BAR`整个文件替换。但是，我只想在某些地方执行此操作，例如在第 68–104、500–537 和 1044–1195 行之间。在实践中，我将标记放在感兴趣的行（通过`ma`、`mb`、`mc`等）并运行以下命令：

```
:'a,'b s/FOO/BAR/g | 'c,'d s/FOO/BAR/g | 'e,'f s/FOO/BAR/g 
```

我不得不用不同的搜索和替换术语等重复数十次，`s/CAT/DOG`每次都必须重写命令行变得很痛苦。我很幸运，我只需要将搜索限制在三个地方（想象一下如果有 30 或 40 个命令行会变得多么混乱）。

没有写一个函数，有没有更简洁的方法呢？

在相关说明上。我复制`FOO`到`s` （搜索）寄存器和`BAR`（`r` 替换）并尝试运行

```
:'a,'b s/\=@s/\=@r/ | 'c,'d s/\=@s/\=@r/ | 'e,'f s/\=@s/\=@r/ 
```

这可以让我不必每次都重写命令行，但是，唉，它没有用。替换位 `\=@r`很好，但是 `\=@s`搜索模式中的位给了我一个错误。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:55:28.223

如果您需要在一堆不同范围的行上执行一组逐行操作（如替换），您可以使用的一个技巧是通过首先添加前缀来使这些行看起来不同（不被任何人共享）的其他行）。

我通常这样做的方法是缩进整个文件，例如`>G`在第一行执行的操作，然后使用`:s/^ /X/`命令或块视觉在我想要的行上用 X 替换前导空格。

然后`:g`结合使用`:s`。例如：

```
:%g/^X/s/FOO/BAR/g
:%g/^X/s/BAZ/QUUX/g 
```

最后，删除临时前缀。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T02:43:43.523

为了摆脱重新键入相同搜索模式、替换字符串和标志的必要性，可以简单地使用 `:&` 带有`&` 标志的命令：

```
:'a,'bs/pat/str/g | 'c,'d&& | 'e,'f&& 
```

（详情请参阅`:help :&`。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T20:11:27.133

受@Vdt 回答的启发：

我不确定，但是您可以将所有替换内容写在一个文件中，然后我认为该文件是该文件的来源。 `substitutions.vim`：

```
68,104s/FOO/BAR/g
168,204s/FOO/BAR/g
618,644s/FOO/BAR/g
681,1014s/FOO/BAR/g
.
.
.
68,104s/BAZ/BOOO/g
168,204s/BAZ/BOOO/g 
```

然后`:so substitutions.vim`也许你也可以将它用于相同结构的多个文件。`e`如果不清楚在相应的行块上找到替换，您可以添加一个以添加忽略错误消息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T19:38:07.997

而不是使用标记使用这个：

`:68,104s/FOO/BAR/g << substitue from line 68 to 104`

这应该会让你的工作更轻松、更清晰。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T22:07:19.097

当在封闭折叠上执行时，替换仅限于该折叠。

1.  折叠每个区域
2.  将光标放在一个闭合的折叠处
3.  执行替换：`:s/foo/bar<CR>`
4.  `zj`使用或移动到下一个闭合折叠`zk`
5.  使用命令行历史：`:<C-p><CR>`或`:<Up><CR>`执行相同的替换
6.  重复……</li>

您也可以`c`在替换结束时添加标志，以便 Vim 在实际执行之前要求您确认。如果您有很多匹配项，这可能会很乏味。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T20:03:19.827

使用`q:`，您可以调用以前的命令行并将它们作为普通 Vim 缓冲区进行编辑，因此您可以快速替换`FOO`和`BAR`其他内容，然后重新执行该行`Enter`。

`s/\=@s/\=@r/`不起作用；正如您所说，这仅适用于更换部件。但是对于模式，可以使用`Ctrl`++来插入`R` `Ctrl`register`R` `s`的内容，而不是`\=@s`. 最好使用默认寄存器，那么它很简单`s//`，但您可能已经知道了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-30T07:51:05.793

这是最简单的方法

```
:5,10s/old/new/g 
```

5,10 : startlinenum,endlinenum

# firebug - FireBug 的 Net 选项卡没有显示 http 响应？

> ID：11162785
> 
> 赞同：2
> 
> 时间：2012-06-22T19:21:33.037
> 
> 标签：firebug, httpwebresponse

我正在使用[这个简单的 node.js 代码示例](https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js)，但我不明白为什么 FireBug 没有在其网络选项卡中显示 html 响应。

我已经清除并禁用了 FireFox 缓存。我启动服务器并直接导航到`http://127.0.0.1:3000/login`. 在 FireBug 的 Net 选项卡中查看时，响应与预期一致（即它具有 html 代码）。

输入登录详细信息并单击提交会显示一个很好`POST /login`的`127.0.0.1:3000`参数`username=bob&password=secret`（尽管它对登录页面也有相同的响应？...有点奇怪，不太明白）。此发布请求显示为“302 已临时移动”，这是预期的，因为[处理对“/login”的 POST 请求的 node.js 代码](https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js#L114)会重定向到“/”。但是`GET 127.0.0.1:3000`，FireBug 中显示的请求没有任何响应或 HTML 组件。那么为什么这个内容没有显示在 FireBug 的 Net 选项卡中呢？如果您然后点击刷新，您将看到 GET 请求的响应部分填充了预期的 html。

奇怪的。FireBug 中的错误还是我遗漏了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:49:43.650

是的，这只是一个 FireBug 错误。签入 Chrome，所有响应都按预期进行。

# java - xjc 和大量剧集文件

> ID：11162786
> 
> 赞同：0
> 
> 时间：2012-06-22T19:21:41.413
> 
> 标签：java, jaxb, xsd, xjc

我一直在尝试使用 JAXB-RI，它是 xjc 来为我的 XSD 生成类（当我说我的 XSD 时，我的意思是非常糟糕的 XSD。稍后会详细介绍）。

我遇到的第一个问题是，我在整个设置中只有两个命名空间。尽管如此，同样的东西在单独的文件中被定义了多次，名称略有不同，但在 XSD 中没有任何区别。例如，我可以有两个 XSD

bar_v01_00.xsd

```
<xsd:schema xmlns="http://www.foo.com/" targetNamespace="http://www.foo.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xsd:element name="foo">
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:element name="elem1" type="xsd:string" />
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

bar_v02_00.xsd

```
<xsd:schema xmlns="http://www.foo.com/" targetNamespace="http://www.foo.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xsd:element name="foo">
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:element name="elem1" type="xsd:string" />
                <xsd:element name="elem2" type="xsd:string" />
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

所以，相同的名称，相同的命名空间，只是不同的文件。我通过指定两个不同的包来解决这个问题，所以 bar_v01_00.xsd 会进入

```
package www.foo.com.bar.Major01.Minor00; 
```

bar_v02_00.xsd 会编译成

```
package www.foo.com.bar.Major02.Minor00; 
```

可以肯定的是，不优雅，但有效。现在，这些文件可以包含/导入，每个文件本身都可以包含更多的包含/导入，其中一些可以达到 32 级！总的来说，这些包含是有原因的，即它们被多次重复使用。

我拥有超过 120 个服务，每个服务都有一个请求和响应 XSD，并且可能有一半具有上述多个版本。我设法将其重构为总共 636 个文件，这绝非易事。

我不想将 300 个相同的常见事物的副本生成到单独的包中，所以我尝试使用 .episode 文件。这行得通，但仅限于 3 个深度的包含级别。如果我尝试包含超过 3 个 .episodes，xjc 就会死掉。我尝试将剧集放入 jar 文件中，然后意识到它只会以这种方式查找一集。如果我尝试将剧集的内容合并到一个文件中，它也不起作用。

有什么我能做的，还是我被困在这里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:44:43.770

我找到了一种更好的方法，可以将所有相关的剧集文件添加到一个要包含的大文件中。需要一些工作、一些解析和一些思考，但这一切都是自动化的并且有效。

# c++ - 在其他静态库中引用静态库 (Visual Studio 2010)

> ID：11162789
> 
> 赞同：1
> 
> 时间：2012-06-22T19:22:09.337
> 
> 标签：c++, visual-studio-2010, static-libraries, static-linking, code-reuse

为了能够通过多个应用程序重用代码段，我决定创建我经常需要的函数/类的静态库。因此，我可以更改静态库的代码，并且所有引用该库的应用程序都具有更新的功能。

该架构在概念上如下图所示：

```
AppA -> LibA
     \
      -> LibCommon -> LibX
     /             -> LibY
AppB 
```

每个应用程序（AppA、AppB）驻留在不同的解决方案中，以使内容清晰分开。

为了在 Visual Studio 2010 中充分发挥作用，我必须在其解决方案中添加应用程序使用的每个 Lib 的项目，在其中添加包含其头文件的文件夹，`Additional Include Directories`并添加对直接使用的项目的引用。

前任。对于 AppA，我会；

1.  包括LibA、LibCommon、LibX和LibY的项目；
2.  `Additional Include Directories`在属性中添加 LibA 和 LibCommon 的路径
3.  在主应用程序中添加对 LibA 和 LibCommon 的引用，然后在 LibCommon 的项目中添加对 LibX 和 LibY 的引用。

我的第一个问题是：有没有办法只导入应用程序直接需要的库？（LibA 和 LibCommon）

我的第二个问题：有没有更好的方法来轻松管理 Visual Studio 2010 中的可重用代码？（这里是初级程序员！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:10:47.630

您实际上并不需要包含这些库的项目。您只需要编译器的 .h 文件和链接器的 .lib 文件。我要做的是首先在一些固定的目录结构中组织 libs 项目。然后，我会在 LibCommon.h 中添加一些类似的内容：

```
#include "LibXDir/LibX.h"
#include "LibYDir/LibY.h"
#ifdef _DEBUG
#pragma comment (lib, "LibCommon.lib")
#pragma comment (lib, "LibXDir/Debug/LibX.lib")
#pragma comment (lib, "LibXDir/Debug/LibY.lib")
#else
#pragma comment (lib, "LibCommon.lib")
#pragma comment (lib, "LibXDir/Release/LibX.lib")
#pragma comment (lib, "LibXDir/Release/LibY.lib")
#endif 
```

有了这个，你只需要在你的应用程序中包含 LibCommon.h，它会负责引入其余的库。您可能需要设置额外的包含和库目录，具体取决于您的设置。或者，您可以将所有 .lib 文件创建或复制到某个中央 lib 目录，这可能是您必须添加的唯一 lib 目录。

我假设您在处理应用程序时不会修改库。如果是，则必须在更改库后重新创建库，这可以通过将其项目添加到解决方案中来完成。但是您仍然可以将大多数依赖项设置在单个文件上，而不是在项目设置上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:32:56.170

只需添加@eran 发布的正确答案：

您可以在属性中包含路径，属性-> 配置属性-> VC++ 目录-> 包含目录。您可以在属性中包含库路径，属性-> 配置属性-> VC++ 目录-> 库目录。

# qt - QProgressDialog 不显示在前面

> ID：11162790
> 
> 赞同：0
> 
> 时间：2012-06-22T19:22:11.017
> 
> 标签：qt, progressdialog

我有一个 QProgressDialog 需要在应用程序进行更新时弹出。它一直躲在窗户后面。

```
 dialog->setWindowTitle("Test");
            QLabel * labl  = new QLabel(this);
            labl->setPixmap(QPixmap("icon.png"));
            labl->setText("");
            dialog->setLabel(labl);
            dialog->setCancelButton(NULL);
            dialog->show(); 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:54:59.440

事实上，您没有提供足够的信息来解决问题，我猜您忘记了提出您的对话框（因为它是之前创建和隐藏的）。所以尝试将代码更改为：

```
....
dialog->show();
dialog->raise();
dialog->activateWindow();
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T19:29:07.030

我遇到了同样的问题，当我有一个模态 QDialog 和一个 QProgressDialog 时，尽管 QProgressDialog 来自 QDialog 本身，但 QDialog 总是在顶部。问题是缺少分配给 QProgressDialog 的父级；只需确保将生成 QProgressDialog 的小部件分配为父级即可。

# jquery - 在显示带按钮的模式之前使用 jQuery Validate 验证 Bootstrap 表单？

> ID：11162791
> 
> 赞同：-2
> 
> 时间：2012-06-22T19:22:12.817
> 
> 标签：jquery, jquery-validate, twitter-bootstrap

我在经过 jQuery 验证的表单顶部有两个按钮：一个保存更改（表单的提交按钮），另一个显示一个 TermsOfService 对话框，当同意时将运行一些其他代码。

```
<button class="btn" value="Save Changes" 
        name="submit" type="submit" id="entryFormSave">Save changes</button>

<button class="btn" 
        data-toggle="modal" 
        href="#modal-TOS" 
        data-backdrop="true" 
        data-keyboard="true" 
        id="entryFormSubmit">Submit for review</button> 
```

第一个/提交按钮验证表单 -**我希望第二个按钮也验证表单，如果它通过验证，则显示 TOS 模式。**

任何帮助是极大的赞赏。

**更新：**我尝试了很多东西，但没有一个奏效。我注意到在添加 data-toggle="modal" 时，它会禁用触发验证的按钮。最新的迭代是： `$('#entryFormSubmit').click(function(){ validate(); });`

我在表单中放置的任何按钮都会验证表单；但是，一旦我添加了 data-toggle="modal" 属性，验证就会被禁用，而且我还不足以让 JS 专家了解下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:35:40.900

@frictionlesspauley - 谢谢你的小片段。我最终回到了 Jquery Validate 页面，发现如果我返回 false - 我中断了模式的显示，这是所需要的。

这是我使用的：

```
$("#entryFormSubmit").click(function() {
    var ValidStatus = $("#entryForm").valid();

    if (ValidStatus == false) {
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:29:16.717

点击时调用[.valid()](http://docs.jquery.com/Plugins/Validation/valid)：

```
 $(function(){
     $('#entryFormSubmit').on('click', function(){
         if($('#formid').valid()){
            //do whatever... call like calling $('formid').submit();
         }
      }
  }); 
```

# facebook - 给定 URL 从 Facebook 检索 action-instance-id

> ID：11162793
> 
> 赞同：1
> 
> 时间：2012-06-22T19:22:15.923
> 
> 标签：facebook, facebook-graph-api

## tl; dr：不，没有办法。

* * *

使用 JS SDK调用`publish_action`实际上非常简单。但是（根据我从阅读文档中收集到的小信息），我无法*查询*facebook 以让它返回我已经发布的对象的操作实例 ID……有吗？

例子：

用户 A 加载页面，页面向 发送`FB.api`调用`/me/news.reads`，返回操作实例 ID。

用户 A 重新加载页面，页面再次`FB.api`调用`/me/news.reads`，但这一次，Graph API 返回：

```
{
    error: {
        code: 3501,
        message: 'blahblahblah... already associated... blah blah'
        type: 'OAuthException'
    }
} 
```

非常标准的东西，并且是预期的，因为我关闭了多次发布相同 URL 的功能。

现在，我有什么方法可以通过传入 URL 从 Graph API 中检索以前发布的操作实例 ID，还是由我来处理返回的操作实例 ID（来自原始发布尝试）并保存它到数据库？我希望我不必那样做...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:51:06.393

不，除了以下方法之外，没有其他方法可以检索已发布操作的实例：

*   通过以下方式访问操作`id`：
    `http://graph.facebook.com/ACTION_ID`
*   访问由特定用户发布的所有实例：
    `http://graph.facebook.com/USER_ID/NAMESPACE:ACTION`(`NAMESPACE:ACTION`可以替换为[内置操作](https://developers.facebook.com/docs/opengraph/actions/builtin/)之一的名称，例如`news.reads`,`music.listend`等。

如果您想访问连接/引用特定对象的已发布操作的详细信息，您需要将该数据保存在您的终端以供以后使用。

# java - 在 Java 和 Python 中生成相同的随机数

> ID：11162798
> 
> 赞同：9
> 
> 时间：2012-06-22T19:22:56.047
> 
> 标签：java, python

如果给定相同的种子，是否可以在 python 中生成与 java 中相同的随机数

以更准确的方式解释，是否可以在Python中使用java中的线性同余公式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T19:29:58.953

你看过这个项目吗？[http://pypi.python.org/pypi/java-random](http://pypi.python.org/pypi/java-random)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-29T21:53:31.930

使用[Pyjnius](https://pyjnius.readthedocs.io/en/stable/index.html)：

```
from jnius import autoclass

rand = autoclass('java.util.Random')()

rand.setSeed(12345)

print(rand.nextInt(50))
print(rand.nextInt(50))
print(rand.nextInt(50))
print(rand.nextInt(50)) 
```

# windows - 如何从服务器正确识别 IE10 Metro 和 IE10 Desktop 以返回“手指友好”或“鼠标友好”界面？

> ID：11162799
> 
> 赞同：3
> 
> 时间：2012-06-22T19:22:59.347
> 
> 标签：windows, windows-8, windows-runtime, browser-detection, internet-explorer-10

我读过，由于两者之间的用户代理相同，因此推荐的方法是使用特征检测。在某些情况下，这很好，很好，您可能希望显示 Flash 视频/电影/应用程序与 javascript 幻灯片，但我的问题是根据用户的输入设备显示正确的界面。

我所做的假设是，如果用户在“Metro”IE10 中，他们可能希望使用手指而不是鼠标。既然如此，我想给他们一个带有大命中框的界面。

我的问题：有没有办法区分并显示适当的界面？还是我坚持让用户通过我网站上设置 cookie 的链接手动切换模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T10:31:33.077

仍然无法从残缺的 Metro IE 中检测到正常的 IE，但知道您可以在服务器上知道用户是否有触摸屏[http://blogs.msdn.com/b/ie/archive/2012/07/12 /ie10-user-agent-string-update.aspx](http://blogs.msdn.com/b/ie/archive/2012/07/12/ie10-user-agent-string-update.aspx)

该帖子包含有关如何在 javascript 中执行检测的其他评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:29:18.147

如果您使用 msPointerPoint 接口，您的客户端将收到相同的消息，无论他们使用鼠标还是触摸。您还可以使用手势 api - IE 博客上只有[一篇博客文章](http://blogs.msdn.com/b/ie/archive/2012/06/20/go-beyond-pan-zoom-and-tap-using-gesture-events.aspx)讨论了如何使用鼠标浏览器中的手势。

IE 公开了一个统一的消息堆栈，因此您可以使用相同的输入处理，并且无论您使用的是触摸/笔还是鼠标，您的 UI 都可以正常工作。

# c# - 如何将资源文件中的图标转换为图像以在按钮上使用？

> ID：11162800
> 
> 赞同：7
> 
> 时间：2012-06-22T19:23:01.010
> 
> 标签：c#, winforms, resources, icons

我正在尝试使用作为资源添加的图标作为按钮上的图像。我知道这是可能的，因为我可以通过设计师在其他项目中做到这一点。但是，我正在尝试用代码来做到这一点。[我按照此问题](https://stackoverflow.com/questions/90697/how-to-create-and-use-resources-in-net)已接受答案中的步骤将图标作为资源添加到我的项目中。该资源名为`CancelButtonIcon`.

现在，我正在尝试使用以下代码将该图标添加为标准按钮上的图像：

```
this.CancelButton.Image = (System.Drawing.Image)Properties.Resources.CancelButtonIcon; 
```

但是，我收到一条错误消息：

```
Cannot convert type 'System.Drawing.Icon' to 'System.Drawing.Image' 
```

在我使用设计器时 Visual Studio 自动生成的代码中，如下所示：

```
((System.Drawing.Image)(resources.GetObject("SaveButton.Image"))); 
```

这是通过“属性”窗口手动添加资源的结果。如何将此图标资源转换为图像以便可以在按钮上使用？通过设计器添加它不是一种选择（此按钮是以编程方式创建的，因此在设计器中不存在）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T19:26:50.650

您可以[`Icon.ToBitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.icon.tobitmap.aspx)为此目的使用该方法。注意 a[`Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)是一个`Image`.

```
CancelButton.Image = Properties.Resources.CancelButtonIcon.ToBitmap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T14:53:11.980

不知道为什么，但是每当我尝试使用接受的答案的方法时，`.ToBitmap()`调用都会给我数组索引超出范围的异常。我通过这样做解决了这个问题：

```
System.Drawing.Icon.FromHandle(Properties.Resources.CancelButtonIcon.Handle).ToBitmap(); 
```

# google-apps-script - 在 Google 电子表格之间复制图像

> ID：11162801
> 
> 赞同：0
> 
> 时间：2012-06-22T19:23:02.833
> 
> 标签：google-apps-script

我有一个用户在 Google 电子表格中创建了大约 50 张工作表。每个页面都有一些信息和一些图片。用户没有意识到他们不能单独共享工作表，现在需要将它们分成 50 个不同的工作表。

数据很简单，我使用以下代码作为证明（我还没有构建循环，一旦我知道这会起作用，我会处理它）。但是，我也不知道如何将图像移动/复制到新工作表上。

有什么建议么？

```
function splitSheets(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var newSS = SpreadsheetApp.create("Testing");

  var dataRange = ss.getSheetByName("CHE").getDataRange();
  var data = ss.getSheetByName("CHE").getDataRange().getValues();
  newSS.getRange(dataRange.getA1Notation()).setValues(data);

  Browser.msgBox(newSS.getUrl());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:40:58.703

你能简单地使用这个`copyTo()`方法吗？

```
function splitSheets(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var newSS = SpreadsheetApp.create("Testing");
  ss.getSheetByName("CHE").copyTo(newSS);

  Browser.msgBox(newSS.getUrl());
} 
```

# com - 如何使用 JScript 创建使用“以管理员身份运行”的快捷方式

> ID：11162802
> 
> 赞同：8
> 
> 时间：2012-06-22T19:23:04.387
> 
> 标签：com, activex, shortcut, jscript, wsh

我有一个使用`cscript.exe`. 它在桌面（和开始菜单）上创建一个快捷方式，该快捷方式`cscript.exe`使用参数运行以运行另一个 JScript 脚本。在相关部分，它看起来像这样：

```
function create_shortcut_at(folder, target_script_folder)
{
    var shell = new ActiveXObject("WScript.Shell");
    var shortcut = shell.CreateShortcut(folder + "\\Run The Script.lnk");
    shortcut.TargetPath = "cscript";
    shortcut.Arguments = "\""+target_script_folder+"\\script.js\" /aParam /orTwo";
    shortcut.IconLocation = target_script_folder+"\\icon.ico";
    shortcut.Save();
} 
```

它被称为`create_shortcut_at(desktop_folder, script_folder)`.

就目前而言，这很有效。它创建桌面图标，正确指向脚本并在双击时运行它。问题是它确实需要“以管理员身份”运行脚本。

而且该脚本确实需要“以管理员身份”运行——它安装应用程序（适用于所有用户）并重新启动计算机。（对于那些感兴趣的人，脚本是 wpkg.js。将其修改为自我提升是不可取的。）

由于快捷方式的目标实际上是“cscript.exe”，因此我不能使用清单进行升级。从理论上讲，我可能可以在 windows 目录中安装一个 cscript.exe.manifest，但即使这样可行，由于显而易见的原因，这将是一个糟糕的主意。

我也不想使用虚拟脚本，因为这是要处理的额外文件，而且手头还有另一个看似合理的解决方案：选中快捷方式上的“以管理员身份运行”框。

30 秒的调查表明 WScript.Shell ActiveX 对象没有为此所需的接口。其他调查表明 IShellLinkDataList 确实如此。但是，IShellLinkDataList 是一个通用的 COM 接口。我在互联网上看到了几个例子，大多数链接[在这里](http://blogs.msdn.com/b/oldnewthing/archive/2007/12/19/6801084.aspx)。但是，所有示例都是在编译后的代码（C++、C#，甚至 JScript.NET）中完成的。我非常喜欢能够直接在 JScript 中执行此操作，从`cscript.exe`.

也就是说，我完全赞成我没有考虑过的想法或其他解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T01:50:47.320

将快捷方式文件标记为需要提升的官方方法是通过`IShellLinkDataList`. 在自动化环境中使用该界面很困难。

但是，如果您对 hack 感到满意，您可以在脚本中完成，只需在 .lnk 文件中翻转一点即可。

当您勾选 Shell Properties 框的 Advanced 选项卡中的“以管理员身份运行”框时，或者当您[使用 IShellLinkDataList 将标志设置](http://blogs.msdn.com/b/oldnewthing/archive/2007/12/19/6801084.aspx)为 include`SLDF_RUNAS_USER`时，您基本上只是在文件中设置了一位。

您可以“手动”执行此操作，而无需通过 COM 接口。它是字节 21，您需要将 0x20 位设置为打开。

```
(function(globalScope) {
    'use strict';
    var fso = new ActiveXObject("Scripting.FileSystemObject"),
        path = "c:\\path\\goes\\here\\Shortcut2.lnk",
        shortPath = path.split('\\').pop(),
        newPath = "new-" + shortPath;

    function readAllBytes(path) {
        var ts = fso.OpenTextFile(path, 1), a = [];
        while (!ts.AtEndOfStream)
            a.push(ts.Read(1).charCodeAt(0));
        ts.Close();
        return a;
    }

    function writeBytes(path, data) {
        var ts = fso.CreateTextFile(path, true),
            i=0, L = data.length;
        for (; i<L; i++) {
            ts.Write(String.fromCharCode(data[i]));
        }
        ts.Close();
    }

    function makeLnkRunAs(path, newPath) {
        var a = readAllBytes(path);
        a[0x15] |= 0x20; // flip the bit. 
        writeBytes(newPath, a);
    }

    makeLnkRunAs(path, newPath);

}(this)); 
```

ps：

```
function createShortcut(targetFolder, sourceFolder){
    var shell = new ActiveXObject("WScript.Shell"),
        shortcut = shell.CreateShortcut(targetFolder + "\\Run The Script.lnk"),
        fso = new ActiveXObject("Scripting.FileSystemObject"),
        windir = fso.GetSpecialFolder(specialFolders.windowsFolder);

    shortcut.TargetPath = fso.BuildPath(windir,"system32\\cscript.exe");
    shortcut.Arguments = "\"" + sourceFolder + "\\script.js\" /aParam /orTwo";
    shortcut.IconLocation = sourceFolder + "\\icon.ico";
    shortcut.Save();
} 
```

# url - 从 wiki 文本中的链接确定确切的 URL

> ID：11162803
> 
> 赞同：0
> 
> 时间：2012-06-22T19:23:06.070
> 
> 标签：url, wikipedia, url-encoding, mining

在维基百科的文章文本中，可能会提到这样的链接：**[Category:ABC]**，但是确切的 wiki url 将具有像**Category:A_B_C**这样的后缀 ，我可以从中获取有关 wiki 用于从中获取 url 的所有这些规则的信息文本中的链接？（例如，将空格转换为下划线、首字母大写、处理非 ascii 字符等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:09:19.043

大致如下：

*   规范化命名空间，例如`category:`--> `Category:`。
*   标题的首字母大写，例如`Category:foo`--> `Category:Foo`。注意：这取决于维基设置，例如，维基词典上的标题从不大写。
*   用下划线替换空格，例如`Foo bar`--> `Foo_bar`。
*   使用 PHP 的标准函数对所有常用字符进行百分比编码`urlencode()`，但以下字符除外：`;:@$!*(),/`.

有关完整的技术细节，您可以查看[这个](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/Title.php;h=046fadb13aad0077eb3edc8f0b12c60ce3752daa;hb=HEAD)（函数 getLocalUrl()）和[这个](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/GlobalFunctions.php;h=ba9bf745569bbaf4136743191dec57993e817728;hb=HEAD)（函数 wfUrlencode()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:59:03.723

没有“等”，您已经提到了所有规则：

1.  空格转换为下划线
2.  文章标题的第一个字母大写（命名空间的第一个字母也大写，如果有的话）
3.  整个链接是[百分比编码的](http://en.wikipedia.org/wiki/Percent-encoding)

请注意，规则 #1 和 #2 不是强制性的：如果您创建自己的 URL 而不遵循它们，维基百科仍将正确显示该页面。

`WP:WikiProject Computing`如果您包含命名空间别名 ( → `Wikipedia:WikiProject_Computing`) 和跨维基链接 ( `wikia:gameofthrones:Westeros`→ )，事情会变得更加复杂`http://www.wikia.com/wiki/c:gameofthrones:Westeros`。

# eclipse - IBM JRE 是标准 VM 吗？

> ID：11162811
> 
> 赞同：4
> 
> 时间：2012-06-22T19:23:46.113
> 
> 标签：eclipse, jvm, virtual-machine, java

我正在向 Eclipse 添加一个 JRE，我得到了 3 个选项：

*   执行环境描述
*   标准 1.1.x 虚拟机
*   标准虚拟机

我想知道是否：

1.  所有的 JRE 最终都是虚拟机？
2.  在这种情况下，VM 是否意味着 JVM？
3.  如果 IBM JRE 特别是标准 VM？
4.  这 3 个选择如何相互关联？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T19:30:24.360

这里的VM是指JVM。JRE 或 JDK 的任何实现都包含一个 Java 虚拟机。据我所知，IBM 实现与 Java 规范完全兼容，因此您无需担心兼容性问题。发行版的名称可能包括它兼容的 Java 规范的版本。

您提供的选项允许您在与 Java 1.1.X 版本兼容的 JVM 或与更高版本兼容的 JVM 之间进行选择（最新的是 7，但对 6 的支持也相当广泛）。除非您要维护一些古老的遗留代码，否则您需要将“标准 VM”添加到您的 IDE。

# r - 在 R 代码中使用 ggplot 时在图例列表中创建列

> ID：11162816
> 
> 赞同：8
> 
> 时间：2012-06-22T19:24:19.657
> 
> 标签：r, ggplot2

我正在使用`ggplot`（包名称：ggplot2）绘制 15 条线，每条线代表一个单独的实体，并希望为其创建一个图例。但是，我无法将图例条目分成一列以上。有人可以建议如何在 ggplot 环境中做同样的事情。

目前，我正在使用以下命令来创建图例：

```
opts(title=plotName,legend.position='bottom') 
```

但是，这给出了一个单列图例。结果，图表中的大部分区域被图例本身占据。将它分成 2 或 3 列确实有助于解决问题，同时将图例保持在图表的底部。我也尝试过`legend.direction`，但是这个命令在一行中显示图例，这也是不可取的，除非我可以将它分布在 2-3 行中。

```
opts(title=plotName,legend.position='bottom',legend.direction="horizontal") 
```

提前致谢， 穆尼什

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-19T16:40:50.190

使用 ggplot 的新主题环境只需要一个简单的：`+ guides(col=guide_legend(ncol=2))`将您的图例格式化为 2 列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T19:37:28.013

您可以`guide_legend()`用来控制 ggplot 图例的布局和外观。特别是，它需要参数`nrow`和`ncol`，这是您所追求的。

[这是从非常有用的文档Changes and added to ggplot2-0.9.0.pdf](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf)的第 2 节中获取的示例 。

```
library(ggplot2)

q <- ggplot(diamonds, aes(x = table, fill = clarity)) +
     geom_histogram() +
     scale_y_continuous()

q + guides(fill = guide_legend(nrow = 4, title.hjust = 0.4,
        title.theme = theme_text(size = 12, face = "bold"))) +
xlim(45, 75) 
```

# ruby-on-rails - 基本的 Ruby on Rails 未定义方法问题

> ID：11162820
> 
> 赞同：0
> 
> 时间：2012-06-22T19:24:34.510
> 
> 标签：ruby-on-rails, ruby, sqlite, rails-activerecord

我是 RoR 开发的相对业余爱好者（大约一个月的经验），到目前为止，我一直在引用来自不同控制器的变量，没有任何问题。我正在为博客开发 CMS，但我无法让博客作者的用户名出现在索引或显示页面上。我收到“nil:NilClass 的未定义方法‘用户名’”错误。但是，我可以得到身份证。任何人都可以帮助指出我的代码中的错误吗？我将不胜感激。

这是博客模型：

```
 class Blog < ActiveRecord::Base
    attr_accessible :post, :title

    has_one :users
    belongs_to :user

        end 
```

这是博客控制器的显示和索引部分：

```
 def index
      @users = User.all
      @blogs = Blog.all

     respond_to do |format|
       format.html # index.html.erb
       format.json { render json: @blogs }
       end
         end

       # GET /blogs/1
       # GET /blogs/1.json
   def show
     @blog = Blog.find(params[:id])
     @users = User.all      

         respond_to do |format|
           format.html # show.html.erb
           format.json { render json: @blog }
         end
      end 
```

这是 index.html.erb 代码：

```
 <% @blogs.each do |blog| %>
       <tr>
        <td><%= blog.title %></td>
        <td><%= blog.post %></td>
        <td><%= blog.user.username %></td> #blog.user_id works perfectly here.
        <td><%= link_to 'Show', blog %></td>
        <td><%= link_to 'Edit', edit_blog_path(blog) %></td>
        <td><%= link_to 'Destroy', blog, method: :delete, data: { confirm:'sure?'} %></td>
       </tr>
         <% end %> 
```

这是 show.html.erb 文件的代码：

```
 <p>
      <b>Title:</b>
       <%= @blog.title %>
       </p>

       <p>
       <b>Author:</b>
        <%= @blog.user.username %>
       </p>

       <p>
       <b>Post:</b>
       <%= @blog.post %>
       </p> 
```

这是博客控制器中的创建代码：

```
 Here is the create code:

    # POST /blogs
    # POST /blogs.json
        def create
         @blog = Blog.new(params[:blog])
         @blog.user_id = current_user

           respond_to do |format|
            if @blog.save
              format.html { redirect_to @blog, notice: 'Blog was successfully created.' }
              format.json { render json: @blog, status: :created, location: @blog }
               else
                format.html { render action: "new" }
                format.json { render json: @blog.errors, status: :unprocessable_entity }
              end
            end
          end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:29:20.000

```
class Blog < ActiveRecord::Base
   attr_accessible :post, :title

    #has_one :users // remove this line of code..
    belongs_to :user

end 
```

还要检查，可能是 user_id 指向一个不存在的用户记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T08:37:32.007

请检查您的 blogs 表并查看 user_id 是否存在于每个创建的博客中。

还要检查您的用户模型是否根据您所需的关联进行更改。

如果您使用的是一对一关系，那么您的用户模型应该有

```
class User < ActiveRecord::Base
  has_one :blog
end 
```

或者如果您使用的是一对多关系，那么用户模型应该有

```
class User < ActiveRecord::Base
  has_many :blogs
end 
```

通过以下方式更改您的博客模型。

```
class Blog < ActiveRecord::Base
   attr_accessible :post, :title
   belongs_to :user
end 
```

尝试通过在您的博客控制器中添加以下更改来创建新博客。

```
def create
 @blog = Blog.new(params[:blog])
 @blog.user_id = current_user.id

 respond_to do |format|
  if @blog.save
   format.html { redirect_to @blog, notice: 'Blog was successfully created.' }
   format.json { render json: @blog, status: :created, location: @blog }
  else
   format.html { render action: "new" }
   format.json { render json: @blog.errors, status: :unprocessable_entity }
  end
 end
end 
```

您的用户表是否有用户名列？

# android - R 无法解析为变量 - Eclipse

> ID：11162823
> 
> 赞同：-2
> 
> 时间：2012-06-22T19:24:51.043
> 
> 标签：android

我正在开发一个项目，修改来自蓝牙 Android 应用程序 Blueterm 的代码。在构建项目时，我收到多个错误，说“R 无法解析为变量”。我尝试清理项目，以及删除 R.java 文件，但没有成功。我还确保 AndroidManifest.xml 文件中的包名称是正确的。

我现在被困住了，真的很想对此有任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:38:19.607

我刚刚使用了一个新项目（R.Java）的复制和粘贴，它修复了所有问题。缺少 R Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:44:03.653

查看有问题的文件并查看 R 在哪个包中。如果您将代码导入到您的项目中，它可能指向旧包中的 R。

例如，我最近复制`com.android.HttpAuthenticationDialog`到一个项目中。它引用`R`期望它`com.android`是应用程序的包。由于该项目实际上`com.example`是`com.android.R`不存在的。

我需要将类移动到`com.example`包中或添加`import com.example.R;`到 Java 文件中。

如果您更新 AndroidManifest.xml 以使用不同的包，也会发生这种情况。例如，如果您从 更改`com.bluetooth`为`com.mybluetooth`，则 R 类将移至`com.mybluetooth.R`. 任何期望`com.bluetooth.R`存在的类都会有这个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:59:38.130

因此，即使我多次修复了 R.java。我一直有各种各样的问题。我一个接一个修好了。

但我发现了一些奇怪的东西；

在我的 SRC 文件夹（对于我的项目）中，R.java 文件夹被锁定（这是在 windows 中而不是在 eclipse 中）。它上面有一个锁形图标。我右键单击并获得了它的所有权。在清理、保存和等待之后，最终 Eclipse 修复了它，现在错误消失了。

如果您需要知道如何获取文件的所有权，只需在 google 上搜索即可。

如果您知道我的一个文件是如何像这样被锁定的，那就太好了！谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T04:53:47.493

这是由您的 android sdk 管理器上的更新引起的。打开sdk manager，更新以下3个工具：

“android sdk 工具”、“android sdk 平台工具”、“android sdk 构建工具”

重启eclipse，按“Ctrl+Shift+O”

就是这样，您的项目应该构建资源

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:28:24.367

有几个原因。

1.  确保您的变量确实存在。记住“@+id/varName”
2.  确保您没有导入 android.R.* 而不是您的项目资源
3.  确保您的任何其他 XML 文件中没有任何错误。如果有它根本无法创建您的 R.java 文件，因此您应该有一堆错误。

# r - 如何在 knitr 中使用 ggmap 库的 get_map 函数？

> ID：11162824
> 
> 赞同：3
> 
> 时间：2012-06-22T19:24:52.130
> 
> 标签：r, knitr, ggmap

我所有的 R 代码都在独立脚本中按预期运行。一旦进入 R Markdown 文件，get_map() 调用就会中断。

```
map <- get_map(location = 'minneapolis', zoom = 9) 
```

我收到一个错误：

> 标签：unnamed-chunk-2
> sink() 中的警告：没有要删除的 sink
> 标签：unnamed-chunk-2
> process_file(text) 中的错误：
> 从第 53-64 行退出：close.connection(con) 中的错误：无效的连接
> 调用: knit -> process_file
> 执行停止 knitr 以状态 1 终止

有什么想法为什么 knitr 和 get_map 玩得不好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T00:56:59.120

我花了一段时间才弄清楚问题所在。根本原因是对它的四个功能`ggmap`“粗鲁” ：、和; 使用该[包](http://cran.r-project.org/web/packages/evaluate/index.html)评估 R 代码，该代码打开文本连接以记录 R 输出。因为已经关闭了所有的连接，将无法再次关闭它的连接，这导致了你看到的错误。有关详细信息，请参阅[https://github.com/hadley/evaluate/blob/master/R/watcher.r](https://github.com/hadley/evaluate/blob/master/R/watcher.r)。`closeAllConnections()``mapdist()``geocode()``revgeocode()``route()``knitr`[`evaluate`](http://cran.r-project.org/web/packages/evaluate/index.html)`ggmap``evaluate`

通常应该*明确*使用该函数关闭哪些连接，使用该`close()`函数很危险，`closeAllConnections()`因为这可能会关闭不应该关闭的连接。我不明白作者为什么要使用它，我想你需要向他报告这个问题。最后，我们应该能够无错误地运行它：

```
library(evaluate); library(ggmap)
evaluate("map <- get_map(location = 'minneapolis', zoom = 9)") 
```

# java - EAR - 引用另一个项目中的类导致 NoClassDef

> ID：11162828
> 
> 赞同：0
> 
> 时间：2012-06-22T19:24:59.340
> 
> 标签：java, jakarta-ee, weblogic, weblogic-10.x

我正在使用 WebLogic Server v10.3

在我的 WebLogic Workshop 中，我创建了一个 Portal EAR 项目，以及另外两个项目：

门户网站 Web 项目
Web 服务项目

现在门户网站项目引用了网络服务项目中的一个类。一切构建和发布都很好，但是当我尝试运行 Web 项目时，我得到了一个 NoClassDefFound ，用于我在 Web 服务项目中引用的类。我检查了 EAR 项目中的 Java EE Module Dependencies，web 项目和 web 服务项目都在那里。我还缺少什么？

# linux - 可以有比端口号更多的 TCP 套接字吗？

> ID：11162829
> 
> 赞同：0
> 
> 时间：2012-06-22T19:25:01.727
> 
> 标签：linux, sockets, ssl, tcp

我在 Linux 上打开到 993 的 SSL 连接。我的程序在 993 个打开的套接字附近崩溃。我记得在某处看到一些关于 TCP 编程的文档讨论这样的限制。我的问题是：我是否记得正确的东西，如果是这样，这是如何工作的？或者我是在胡编乱造。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:14:02.077

同时打开的描述符或套接字的数量，或传递给调用的描述符数量（例如`select`或`poll`一侧）与另一侧的特定端口号之间没有关系。

您最有可能看到值 993，因为它是 1024 减去之前在系统上打开的一些其他完全不相关的描述符/套接字。

讨论的所有限制都适用于单个进程，因此您应该能够弄清楚这一点，例如使用`strace`

# spring - 表达式 springMacroRequestContext 未定义

> ID：11162830
> 
> 赞同：3
> 
> 时间：2012-06-22T19:25:03.120
> 
> 标签：spring, spring-mvc, junit, freemarker, htmlunit

我正在尝试使用 htmlunit、junit 和 freemarker 模板进行 freemarker 单元测试。但是当我使用 <@spring.message "data"> 它给了我这个例外。

```
freemarker.core.InvalidReferenceException: Expression springMacroRequestContext is undefined on line 89, column 134 in spring.ftl.
at freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:125)
at freemarker.core.TemplateObject.invalidTypeException(TemplateObject.java:135)
at freemarker.core.Dot._getAsTemplateModel(Dot.java:78)
at freemarker.core.Expression.getAsTemplateModel(Expression.java:89)
at freemarker.core.MethodCall._getAsTemplateModel(MethodCall.java:86)
at freemarker.core.Expression.getAsTemplateModel(Expression.java:89)
at freemarker.core.Expression.getStringValue(Expression.java:93)
at freemarker.core.DollarVariable.accept(DollarVariable.java:76)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.IfBlock.accept(IfBlock.java:82)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.Macro$Context.runMacro(Macro.java:172)
at freemarker.core.Environment.visit(Environment.java:614)
at freemarker.core.UnifiedCall.accept(UnifiedCall.java:106)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.MixedContent.accept(MixedContent.java:92)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.Macro$Context.runMacro(Macro.java:172)
at freemarker.core.Environment.visit(Environment.java:614)
at freemarker.core.UnifiedCall.accept(UnifiedCall.java:106)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.MixedContent.accept(MixedContent.java:92)
at freemarker.core.Environment.visit(Environment.java:221)
at freemarker.core.Environment.process(Environment.java:199)
at freemarker.template.Template.process(Template.java:237) 
```

关于这个例外的任何想法，我该如何解决这个问题？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:00:46.897

我不确定处理这个问题的正确方法是什么，因为我只花了大约一个小时试图自己解决这个问题。但是对我有用的是使用以下命令手动将“springMacroRequestContext”添加到数据模型中：

```
HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();
model.put("springMacroRequestContext", new RequestContext(request, null, null, null)); 
```

请注意，这仍然必须在有效请求中发生。因此，这可能不适用于 cron 作业或计划任务，因为没有当前请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T23:23:58.783

您需要在 Spring controllerContext.xml 中配置 Freemarker View Resolver。具体来说，添加：

```
<property name="exposeSpringMacroHelpers" value="true"/> 
```

所以它看起来像：

```
<bean id="freemarkerViewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
    <property name="cache" value="true"/>
    <property name="prefix" value=""/>
    <property name="suffix" value=".ftl"/>
    <property name="exposeSpringMacroHelpers" value="true"/>
    <property name="exposeSessionAttributes" value="true"/>
    <property name="contentType" value="text/html;charset=UTF-8"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-13T14:44:11.337

扩展 Brad Parks 关于手动添加的答案`springMacroRequestContext`：

对（如果您的对象是 WebApplicationContext 中的 bean，则`WebApplicationContext`可以轻松访问）的引用就足够了，因为您可以模拟请求：`@Autowired`

```
// Declare WebApplicationContext as an instance variable
@Autowired
WebApplicationContext ctx;

// Then in the method...:
    // (The mock object is from the org.springframework.mock.web package)
    MockHttpServletRequest req = new MockHttpServletRequest();
    // secret sauce:
    req.setAttribute(RequestContext.WEB_APPLICATION_CONTEXT_ATTRIBUTE, ctx);
    // Create a MacroRequestContext for Freemarker to use
    model.put("springMacroRequestContext", new RequestContext(req)); 
```

# asp.net - Ajax Control Toolkit 和 Jquery 在 ASP.NET 4.0 中无法相处

> ID：11162837
> 
> 赞同：1
> 
> 时间：2012-06-22T19:25:25.957
> 
> 标签：asp.net, ajax, visual-studio-2010, .net-4.0, ajaxcontroltoolkit

我已经为此苦苦挣扎了几个小时，似乎无法弄清楚发生了什么或与此相关的任何相关网站。我要做的就是同时使用 Ajax Control Toolkit 和 JQuery。

以下是重新创建我的问题所需的唯一代码。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestForm.aspx.cs" Inherits="TestWebsite.TestForm" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
        <script type="text/javascript" 
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
        language="javascript" /> 
</head>
<body>
    <form id="form1" runat="server">
    <ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajax:ToolkitScriptManager>
    <div>

    </div>
    </form>
</body>
</html> 
```

万一这很重要，我正在使用 Visual Studio 2010 专业版。我的 asp.net 网站的目标是 .NET 4.0 框架。我正在使用版本为 4.1.60501.0 的 AjaxControlToolkit.dll。Jquery 是 1.7.2 分钟版本。

如果我注释掉 jquery 脚本行或 ToolkitScriptManager，我不会收到任何 javascript 错误。如果它们都包括在内，我会收到错误消息

“Microsoft JScript 运行时错误：Sys.ArgumentException：找不到具有 id 'form1' 的元素。参数名称：elementOrElementId”

Stacktrace 给了我 DomElement$resolveElement(elementOrElementId, containerElement) javascript 函数作为罪魁祸首。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T19:50:10.030

听起来很可笑，请将您的脚本标签更改为：

```
<script type="text/javascript" 
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
        language="javascript"></script> 
```

请注意我正在使用结束脚本标记（这很重要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:32:30.617

*该元素具有服务器端 ID `form1`，您不能在客户端使用此 ID。您必须使用服务器端属性`this.form1.ClientID`来获取客户端它（类似于`ctrl00_form1`）。`runat="server"`或者，如果您不用于访问表单服务器端，则可以删除。*

**编辑：**

**我可能误解了您的问题：如果此代码引发异常，您可能必须以这种方式编写脚本标记：（`<script type="..." src="..."></script>`非自关闭但为空）。**

# java - O（1）中的getKey（B）一对一映射数据结构（A，B）？

> ID：11162843
> 
> 赞同：9
> 
> 时间：2012-06-22T19:25:51.633
> 
> 标签：java, contains, one-to-one

这个问题最初措辞错误，请参阅下面的编辑。我会把它留给上下文。

我一直在考虑构建双射（即一对一）映射的智能方法。映射函数 A->B（多对一）基本上是 HashMap(A,B) 所做的。如果我现在想要一个数据结构在 O(1) 中实现与 contains() 一对一的东西，那么我可以使用 java 标准库中的东西吗？请注意，我现在什么都不需要这个，这只是我最近想到的东西，无法想出一个数据结构，所以答案并不着急。有这样的课吗？如果不是，你认为这是为什么？

我只能在 SO 上找到关于休眠的东西，这对我没有帮助。

编辑：我的问题措辞不当，所以需要做出一些解释。

我的意思是“向后”映射 B->A。HashMap(A,B) 在 O(1) 中包含 contains(A) 和 contains(B)，所以这甚至不是我的意思，抱歉造成混淆。我的意思是，是否有一个数据结构映射 A<->B 在 O(1) 中具有 getValue(A) 和 getKey(B)？

我意识到这可以通过维护包含相同关系的两个 HashMap (A,B) 和 (B,A) 来完成，但我认为应该有一个数据结构来处理它，而不必“手动”进行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T19:49:52.313

我认为你不会比两个 HashMap 做得更好。编写包装器接口非常简单：

```
class OneToOneMap<Key, Value> {

    public void add(Key k, Value v) {
        if (!keyToVal_.contains(k) && !valToKey_.contains(v)) {
            keyToVal_.add(k, v);
            valToKey_.add(v, k);
        }
    }

    private HashMap<K, V> keyToVal_;
    private HashMap<V, K> valToKey_;
} 
```

我不确定这是否是有效的 Java，但你明白了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T19:42:18.553

我不知道现有的类对 containsKey 和 containsValue 执行 O(1)，但您可以通过扩展 HashMap 来实现，以便在插入时将每个值添加到内部 HashSet。重载 containsValue 以查找值 HashSet。标准的 HashMap 有 O(1) containsKey，但 O(n) containsValue。

同样，您可以在插入中强制执行 1:1 并检查现有值。

请注意，如果您遇到大量冲突，则 HashSet 查找在最坏的情况下可能会达到 O(n)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T20:59:35.230

如果您愿意使用第三方库，Guava 为此提供了一个不错的 API，如[`BiMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/BiMap.html). `getKey`它提供了一个`inverse()`返回 a 的视图，而不是一个方法`BiMap<V, K>`。（当然，它确实提供恒定时间`containsValue`。）

目前，`HashBiMap`基本上两个`HashMap`s 在内部保持同步——尽管它如何保持它们相互匹配非常一致——但未来的实现可能会变得更加智能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-26T11:34:39.603

我有同样的需求，想出了这个可能有用的 BiMap。它只使用一个 hashmap 并返回一个 entry 对象，以便可以为返回值提供特定类型并允许映射到 null。

```
public class BiMap<T1, T2>
{
    public static class Entry<T1, T2>
    {
        public final T1 item1;
        public final T2 item2;

        public Entry( T1 item1, T2 item2 )
        {
            this.item1 = item1;
            this.item2 = item2;
        }
    }

    private final HashMap< Object, Entry<T1, T2> > mappings = new HashMap<>();
    private int loopedLinkCount;

    public void put( T1 item1, T2 item2 )
    {
        remove(item1);
        remove(item2);
        Entry<T1, T2> entry = new Entry<T1, T2>( item1, item2 );
        mappings.put( item1, entry );
        mappings.put( item2, entry );
        if( Objects.equals(item1, item2) ){
            loopedLinkCount++;
        }
    }

    /**
     * 
     * @param key 
     * @return an entry containing the key and it's one to one mapping or null if there is
     * no mapping for the key.
     */
    public Entry<T1, T2> get( Object key )
    {
        return mappings.get( key );
    }

    public Entry<T1, T2> remove( Object key )
    {
        Entry<T1, T2> entry = mappings.remove( key );
        if( entry == null ){
            return null;
        }
        if( Objects.equals( entry.item2, entry.item1 ) ){
            loopedLinkCount--;
            return entry;
        }
        return mappings.remove( Objects.equals( key, entry.item1 )  ?  entry.item2  :  entry.item1 );
    }

    public Set< Entry<T1, T2> > entrySet()
    {
        return new HashSet<>( mappings.values() );
    }

    public int size()
    {
        return ( mappings.size() + loopedLinkCount ) / 2;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T19:32:00.560

我最初的想法只是使用标准映射，如果您有完美的哈希函数，您可以使用 HashMap 作为一对一映射。如果我了解您在做什么，则以下内容就足够了：

```
Map<String,Object> map = new HashMap<String,Object>(); 
```

# ruby - 在rails中格式化浮动时间

> ID：11162846
> 
> 赞同：3
> 
> 时间：2012-06-22T19:26:38.780
> 
> 标签：ruby, ruby-on-rails-3, datetime, floating-point

我有一个名为 dispatched_time 的日期时间，我从 Time.now 中减去它会产生一个浮点数，即：302.332，这是一个名为 elapsed_time 的方法。我需要找到一种方法来获取该数字的值并将其格式化为我认为的时间。即：13:20。

我尝试使用 elapsed_time.strftime("%H%M") 但 strftime 不会处理浮点数。

有人可以帮我在几秒钟内将浮点数转换为 HH:MM 格式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:57:55.617

你可以试试`Time.at(elapsed_time).utc.strftime("%H:%M")`。这应该为您提供两次之间的小时/分钟，就像它本身就是一个时间一样创建。请注意，如果两次之间的时间间隔超过 24 小时，这可能效果不佳，在这种情况下，您需要在`"%d"`传递给的字符串中添加天参数 ( ) `strftime`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:14:31.007

您可以尝试使用 dotiw 或 ruby​​-duration gem。它可能会为您简化事情。

# magento - 如何在 magento 中创建多个自定义主题

> ID：11162851
> 
> 赞同：0
> 
> 时间：2012-06-22T19:27:20.040
> 
> 标签：magento, magento-1.5

我想在 magento 1.5.1 中创建多个自定义主题。我已经有 mytheme 文件夹 `app/design/frontend/base/mytheme` 和 skin 文件夹 `skin/frontend/base/mytheme/`

现在我想创建另一个我放在 `app/deisgn/frontend/default/newtheme/template`& 下的自定义主题`app/deisgn/frontend/default/newtheme/layout`

但问题是`newtheme`无法访问包含我的图像内容的媒体文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:04:58.357

“媒体”文件夹是指 Magento 根目录中的媒体文件夹还是皮肤文件夹中的“图像”等文件夹？

无论您如何设置主题结构，访问都不会有任何问题。

如果您指的是 'skin/frontend/base/mytheme/' 文件夹中的某个文件夹，那是因为您的新主题将回退到 'default/default' 然后 'base/default' 并且它不会进入您的原始文件夹. 如何设置主题结构确实不是一个好主意，但一个快速解决问题的方法是为您的新主题创建一个新的皮肤文件夹，并从旧皮肤文件夹复制任何图像。

希望有帮助。

托尼

# mysql - 用户对话的数据库模式

> ID：11162852
> 
> 赞同：2
> 
> 时间：2012-06-22T19:27:24.983
> 
> 标签：mysql, database-schema

我一直在考虑如何在我正在建立的网站**中为用户对话构建数据库模式。**

我所说的“对话”是指一个类似于普通私人消息系统的系统，但类似于 Facebook 的离线聊天。

到目前为止，我有这个：

```
id
from_id
to_id
content
created_on 
```

它有效，但我无法找到一种方法将每个对话的所有最后交换的消息都放入一个列表中，这让我认为这可能`db schema`不是要走的路。

假设有一个`users`带有主要数字 id 的表，那么`db schema`处理用户对话的最佳方法是什么？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:47:47.493

我会这样做：

![在此处输入图像描述](../Images/50956f16c498bfbe017a8e6e97d65b4c.png)

*   表用户拥有您拥有的用户 ID + 其他信息。
*   存储用户与用户对话的关系表，但这是 1 个用户与 1 个用户聊天，如果您希望 N 个用户与 M 个用户同时对话它应该是不同的设计。

因为现在我认为这很好，因为您可以保存发送消息的人、发送给谁、消息是什么、时间和状态（已读、删除、未读、隐藏等）。

我很确定有不止一种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:45:50.910

我认为您不需要 from_id 和 to_id，只需要 from_id。您将按日期确定对话中的第一条和最后一条消息。

但是，为了简单和性能起见，我会制作一个以用户为中心的联结表：

```
user_id  with_user_id conversation_id  last_read_id
-------  ------------ ---------------  --------------
1        2            1                1
1        3            2                0
2        1            1                2
3        1            2                1 
```

然后，对于对话：

```
id  conversation_id  from_id  content  created_on
--  ---------------  -------  -------  ----------
1   1                1        hello    2012-06-01 12:00:00 
2   1                2        hi       2012-06-01 12:10:01
3   2                3        howdy    2012-06-01 12:40:10 
```

因此，当某人想要开始对话时，您可以检查连接表以查看他们是否已经在与该人进行对话。如果是，请恢复它。

如果是新对话，请确保在联结表中为每个用户添加记录。联结表中的 last_read_id 列引用了对话表中的 id。

要获取用户 1 的所有未读消息：

```
SELECT c.* FROM junction j
JOIN conversation c
ON c.conversation_id = j.conversation_id
AND c.id > j.last_read_id
WHERE j.user_id = 1
ORDER BY c.created_on DESC 
```

结果是：

```
id  conversation_id  from_id  content  created_on
--  ---------------  -------  -------  ----------
3   2                3        howdy    2012-06-01 12:40:10
2   1                2        hi       2012-06-01 12:10:01 
```

要获取用户 1 和用户 2 之间的所有消息（从用户 1 的角度来看）：

```
SELECT c.* FROM junction j
JOIN conversation c
ON c.conversation_id = j.conversation_id
WHERE j.user_id = 1 AND j.with_user_id = 2
ORDER BY c.created_on DESC 
```

结果是：

```
id  conversation_id  from_id  content  created_on
--  ---------------  -------  -------  ----------
2   1                2        hi       2012-06-01 12:10:01
1   1                1        hello    2012-06-01 12:00:00 
```

# javascript - cdonts 附件电子邮件

> ID：11162853
> 
> 赞同：0
> 
> 时间：2012-06-22T19:27:26.640
> 
> 标签：javascript, asp-classic, cdonts

有没有办法让 ASP 经典 cdonts 电子邮件，将文件附加到表单并通过电子邮件作为附件发送。

如果有办法，你会怎么做？你需要像第三方 dll 文件。

好的，所以我需要一个示例，允许您在表单上附加您想要附加的任何文件，然后当您点击提交按钮时，电子邮件将与附件一起发送出去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:27:14.847

[您可以从该网站](http://www.bigresource.com/Tracker/Track-asp-lzVfnQzk/)下载 zip 文件，其中包含的示例代码完全符合您的要求。

# drupal - 如何在 .views-view-grid 中的 3 列中的 2 列之间添加垂直边框

> ID：11162855
> 
> 赞同：1
> 
> 时间：2012-06-22T19:27:33.597
> 
> 标签：drupal, views, border

我对这个 Drupal 有点陌生，但我会尽力解释我的困境。我正在编辑一个在网格周围有边框的网站。我已经想出了如何关闭网格周围的边框。我试图在第 1 列和第 2 列之间仅显示 1 条垂直线，在第 2 列和第 3 列之间显示 1 条垂直线。我想我可以在两列的一侧放置一个边框，或者创建一些规则，在两列之间放置一条垂直线。

无论哪种方式，我都不太了解我的 CSS 来实现这一点。

这是我现在的视图（网格边框关闭）：[1]：http: [//i.stack.imgur.com/hnNVO.jpg](http://i.stack.imgur.com/hnNVO.jpg)

这是我当前的 style.css 代码：

```
 .views-view-grid td {
    border-color: #CCCCCC;
    border-style: solid;
    border-width: 0px;
    width: 33%;
    }

    .views-view-grid tr {
    border-left: 0px solid #CCCCCC;
    border-right: 0px solid #CCCCCC;
    } 
```

非常感谢任何帮助、建议或指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:15:40.863

这很容易做到，方法是为所有*<td>元素赋予一个**border-right*，然后从最后一个元素中删除它。

 *```
.views-view-grid td {
   border-right: 1px solid black;
} 
```

Drupal 通常会自动将类放在列表中的第一个和最后一个元素或类似的东西上。您可以使用这些类从最后一个元素中删除边框。我不知道使用网格时它的行为如何，但由于您使用的是视图，因此您也可以使用 HTML 列表显示。如果您在*<li>*元素上使用*float:left*，它的行为将与您的屏幕截图一样。

 *如果要保留当前设置，可以尝试使用伪选择器：

```
.views-view-grid td:last-child {
    border-right: none;
} 
```**

# powershell - 在 Powershell 中运行 Start-Website 命令时出现“无法创建文件”错误

> ID：11162857
> 
> 赞同：41
> 
> 时间：2012-06-22T19:27:41.803
> 
> 标签：powershell, iis-7

目前我正在尝试运行这个powershell脚本：

```
Param (
    $websiteName,
    $physicalPath
)

import-module WebAdministration
$website = get-website | where-object { $_.name -eq "$websiteName" }
if($website -eq $null){
    New-webapppool -Name "$websiteName"
    Set-WebConfiguration -filter "/system.applicationHost/applicationPools/add[@name='$websiteName']" -PSPath IIS:\ -value (@{managedRuntimeVersion="v4.0"})
    New-website -Name "$websiteName" -PhysicalPath "$physicalPath" -ApplicationPool "$websiteName"
    start-website "$websiteName"
} 
```

我使用以下命令运行脚本：

```
& .\InstallWebsite.ps1 -websiteName "MyWebsite" -physicalPath "C:\TEST\MyWebsite" 
```

一切正常，除了 if 语句中的最后一个命令：

```
start-website "$websiteName" 
```

当该命令运行时，我收到以下错误，我无法成功排除故障：

```
Start-Website : Cannot create a file when that file already exists. (Exception from HRESULT: 0x800700B7)
At line:1 char:14
+ start-website <<<<  "MyWebsite"
    + CategoryInfo          : InvalidOperation: (:) [Start-Website], COMException
    + FullyQualifiedErrorId : InvalidOperation,Microsoft.IIs.PowerShell.Provider.StartWebsiteCommand 
```

如果重要，我还有以下脚本可以删除网站：

```
Param (
    $websiteName,
    $appPoolName
)

import-module WebAdministration
$website = get-website | where-object { $_.name -eq "$websiteName" }
if($website -ne $null){
    remove-website -Name "$websiteName"
    remove-webapppool -Name "$websiteName"
} 
```

我使用以下命令运行它：

```
& .\UninstallWebsite.ps1 -websiteName "MyWebsite" -appPoolname "MyWebsite" 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-23T00:05:38.620

错误信息：

> Start-Website ：当该文件已存在时无法创建该文件。

...通常意味着您有绑定冲突，其中已经有一个站点在相同的 IP 地址、端口上运行，如果您正在使用它们，则为主机标头。

我会在 IIS MMC 中检查您的新站点绑定，然后找出其他东西是否使用完全相同的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-01T06:59:32.157

启用详细的错误跟踪以查找原因。就我而言，它是一个`mimeType`复制默认元素的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-05T19:32:59.520

我遇到了同样的错误。当我尝试远程添加 WebBinding 到我的 IIS 站点时，会发生这种情况，同时使用来自不同代理机器的 Invoke-Command。

它对我有用，也许它也可以帮助某人：

```
$Mutex = New-Object -TypeName System.Threading.Mutex($false, "Global\Mutex")    
if ($Mutex.WaitOne(300000)) {
   #For example
   #$Command = {
        #New-WebBinding -name $iis_site_name -Protocol https -HostHeader             
           #$iis_host_name -Port 443 -SslFlags 1
   #}
   #Invoke-Command -Command $Command
} else {
   Write-Warning "Timed out acquiring mutex!"
}

$Mutex.Dispose() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-12T06:34:51.717

在 IIS 配置中没有任何网站时，也会发生同样的错误。原因是 applicationHost.config 末尾的附加旧记录。这些都在 IIS 管理器中不可见。删除这些 XML 记录后，问题就解决了。

# javascript - Javascript中带有停止字符的正则表达式

> ID：11162861
> 
> 赞同：1
> 
> 时间：2012-06-22T19:27:55.513
> 
> 标签：javascript, jquery, regex

我正在使用 jQuery 切换功能来更改文本输入的某些字符。每次用户点击一个按钮，输入值都会得到按钮的值（这是一个带有数字的|）。当用户再次点击按钮时，脚本需要移除按钮的字符输入值。

例如，如果输入的值为 0|1|2|3|4|5 并且按钮的值为 0| 值，当用户第一次点击按钮时，输入的值应该变成1|2|3|4|5，但是当用户第二次点击按钮时，输入的值应该变成1|2| 3|4|5|0。

我做到了，它工作得很好，直到我注意到我的正则表达式不是那么准确。

看看这些字符：0|1|2|3|4|5|6|7|8|9|10

有两个数字与正则表达式匹配：|1 和 |10

所以，我需要修复它，看看我的代码：

```
 $('.topmenu_permission').toggle(function(){
    var permission = $(this).attr('name');
    var valor = $('#userpermission').val();

    var pattern = permission, re = new RegExp(pattern, "g");

    valor = valor.replace(pattern, '');

    $('#userpermission').val(valor + '' + permission);

    $(this).css({ 'background' : 'green', 'color' : 'white' });

    return false;

}, function(){
    var permission = $(this).attr('name');
    var valor = $('#userpermission').val();

    var pattern = permission, re = new RegExp(pattern, "g");

    valor = valor.replace(pattern, '');

    $('#userpermission').val(valor);

    $(this).css({ 'background' : '#ddd', 'color' : '#000' });

    return false;
}); 
```

* * *

非常感谢你们，我将字符串转换为数组，现在它工作得很好。

看最终代码：

```
 $('.topmenu_permission').toggle(function(){
    var needle = $(this).attr('name').replace('|', '');
    var myString = $('#userpermission').val();
    myString = myString.split('|');
    var index = $.inArray(needle, myString);
    if( index >= 0)
    {
        myString.splice(index,1);
    }
    myString = myString.join('|');
    myString = myString + '|' +  needle;
    $('#userpermission').val(myString);
    $(this).css({ 'background' : 'green', 'color' : 'white', 'text-shadow' : 'none' });
    return false;
}, function(){
    var needle = $(this).attr('name').replace('|', '');
    var myString = $('#userpermission').val();
    myString = myString.split('|');
    var index = $.inArray(needle, myString);
    if( index >= 0)
    {
        myString.splice(index,1);
    }
    myString = myString.join('|');
    $('#userpermission').val(myString);
    $(this).css({ 'background' : '#ddd', 'color' : '#000' });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:33:38.327

一种方法是将字符串临时转换为数组，用于`$.inArray()`查找匹配项，将其从数组中删除，然后将数组转换回分隔字符串。

这不涉及正则表达式，但它完成了工作。

```
var needle = "1";
var myString = "0|1|3|10|25";
var myNewString = myString; // the initial value of the result
var myArray = myString.split("|");
var needleLocation = $.inArray(needle,myString);
if (needleLocation >= 0) {
    myNewString = myArray.splice(needleLocation,1).join("|");
}
alert(myNewString); 
```

更多信息：[http ://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

还发现了这一点，这可能会有所帮助：[字符串操作 - 从列表中删除元素](https://stackoverflow.com/questions/6258185/string-manipulation-removing-an-element-from-a-list)

# regex - 重定向 URL 以包含 ? 那是失踪

> ID：11162862
> 
> 赞同：1
> 
> 时间：2012-06-22T19:28:11.583
> 
> 标签：regex, apache, .htaccess

如何替换 url（在 htaccess 文件中），如下所示： [http ://example.com/linkName](http://example.com/linkName)

有了这个： [http ://example.com/?linkName](http://example.com/?linkName)

我还想确保这样的链接不受影响： [http ://example.com/redirect.php?linkName](http://example.com/redirect.php?linkName)

我不太清楚正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:38:04.890

对于任何目录：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*/|)(.*)$ $1?$2 [L,QSA] 
```

这会将[http://mysite.com/dir/linkName](http://mysite.com/dir/linkName)重定向到[http://mysite.com/dir/?linkName](http://mysite.com/dir/?linkName)

* * *

仅适用于根目录：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(/?)(.*)$ $1?$2 [L,QSA] 
```

这会将[http://mysite.com/dir/linkName](http://mysite.com/dir/linkName)重定向到[http://mysite.com/?dir/linkName](http://mysite.com/?dir/linkName)

# c# - 数据网格和 90000 行。最好的办法

> ID：11162863
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:28:15.610
> 
> 标签：c#, datagrid

我有数据网格和 90000 行。

90000 行数据网格打开得很晚。9秒打开。什么是加快开放速度的最佳方法？

我的代码：

```
string sqlSorgu = "SELECT "+
              " customer.id," +
              " customer.medaxil_status," +
              " customer.hesab_nomresi," +
              " customer.soyad ," +
              " customer.ad ," +
              " customer.ataadi ," +
              " customer.mebleg ," +
              " customer.teskilat_kodu" +

                   " FROM customer  ORDER BY customer.id ASC ";
                    OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sqlSorgu, Program.esas.bazayaQosul);

                    setx = new DataSet();
                     datatabmedaxil = new DataTable();
                    setx.Tables.Add(datatabmedaxil);

                    dataAdapter.Fill(datatabmedaxil);
                    MedaxilGridView1.DataSource = datatabmedaxil;

            if (this.MedaxilGridView1.RowCount > 0)
            {
                for (int i = 0; i < this.MedaxilGridView1.RowCount; i++)
                {
                    if (this.MedaxilGridView1["medaxil_status", i].Value.ToString() == "1")
                        this.MedaxilGridView1.Rows[i].DefaultCellStyle.BackColor = Color.Pink;
                    else
                        this.MedaxilGridView1.Rows[i].DefaultCellStyle.BackColor = Color.Empty;
                }
            } 
```

**请帮我**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:42:32.637

虽然我几乎同意其他所有人的观点，即单个视图中的 90,000 行是完全不可用的，但有时支付账单的人会做出愚蠢的决定......

看起来这可能适合您的需求：

在 Windows 窗体 DataGridView 控件中使用实时数据加载实现虚拟模式：[MSDN](http://msdn.microsoft.com/en-us/library/ms171624.aspx "MSDN")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:12:13.980

同意其他人的观点，即 90000 行无论如何都不可用。StackOverflow 上有一篇关于分页的文章：

[使用 Linq 实现分页](https://stackoverflow.com/questions/548475/efficient-way-to-implement-paging)

我还强烈建议您不要依赖控件来处理分页。它所要做的就是将这 90000 行放入内存并通过它们进行页面。一样慢，一样可怕，一样无法使用。

除了分页之外，您还需要考虑将集合大小减小到合理数量的方法。即使分页 90000 行对任何人来说都太多了。这表示在每页显示 54 个项目时必须翻阅 1667 页才能到达最后一条记录的用户体验。问问自己，您是否愿意翻阅这么多项目才能找到您想要的东西？

至于你的 Foxpro 声明？有很多因素在起作用，例如本地与远程、数据大小、数据存储方式等。来自本地硬盘驱动器的 140000 行和 200 字节数据与使用 XML 序列化的 90000 行有很大不同，来自一项服务，该服务将发送到每行有 1K 数据的公司服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:35:11.307

我知道没有简单直接的解决方案。

我会考虑使用来控制它的选项：

*   搜索过滤器
*   将输出限制为合理的行数（例如 1000）并显示列表被截断的警告。
*   分页（将结果拆分为页面）

# mercurial - Mercurial hg glog 是否可以仅限于分支

> ID：11162864
> 
> 赞同：2
> 
> 时间：2012-06-22T19:28:17.517
> 
> 标签：mercurial, dvcs

Mercurial log 允许您将查询限制为分支：

hg log -b 默认

但是 Mercurial glog 没有

hg glog -b default => 错误信息

有没有办法像这样过滤 glog？也许是一个丑陋的 Perl 或 Python 脚本在运行

hg glog --style xml | perl UglyScript

我正在查看 revsets，但还没有想出办法来做到这一点。

--

顺便说一下，为什么我要这样做，以防有更好的方法：我的队友认为我太冗长并且做了太多细粒度的提交，所以我想给他们一种方法来过滤掉我来自 hg 的提交消息格洛格。我会把我的东西放在树枝上。我希望他们能够忽略我的分支（或标签，或标签，或......）（目前，我在每次推送到项目 masterrter 时都在编辑历史记录，这既浪费又脆弱。）

“hg log -b”很好，但真的想要 glog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:43:10.237

啊哈！我找到了部分答案：

hg glog –r '分支（默认）'</p>

hg log –r 'branch(default)' 就像 hg log –b default 一样工作

除了它们的顺序相反。（不像[http://markmail.org/thread/43yvy7mljdfgp75h](http://markmail.org/thread/43yvy7mljdfgp75h)说 -bx == -r 'branch(x)'

hg log –r 'reverse(branch(default))'</p>

修改规则！

# android - 按下 BACK 按钮时，警报框不可见

> ID：11162867
> 
> 赞同：0
> 
> 时间：2012-06-22T19:28:46.457
> 
> 标签：android, alert, back-button

在我的应用程序中，有一个按钮可以将图片上传到 Facebook。按下此按钮时，会出现一个警报框以获取用户标题，然后上传图片。现在，如果我在将图片上传到 facebook 时按 BACK 按钮（在给出并`OK`按下标题后），那么我会再次看到我的活动，但这次当我再次尝试上传图片时，我没有看到警告框（尽管它处于隐形模式，因为如果我点击`OK`按钮的位置，然后图片就会上传。这里发生了什么？

```
//Listener to button to upload to facebook
class ButtonListener3 implements View.OnClickListener{

        @Override
    public void onClick(View v) {

        Pic.this.Commentbox();

    }
}

public void Commentbox(){
    value="";
    alert1 = new AlertDialog.Builder(this);

    alert1.setTitle("Write caption");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    alert1.setView(input);

    alert1.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    value = input.getText().toString();
    Pic.this.fb();
     }
    });

    alert1.setNegativeButton("No, thanks", new DialogInterface.OnClickListener()      {
     public void onClick(DialogInterface dialog, int whichButton) {
       value="";
       Pic.this.fb();
    }
    });

     alert1.show();

}

    public void fb(){
final Facebook facebook=new Facebook(ID);
facebook.authorize(Pic.this, new String[] { "publish_stream" },
        new DialogListener() {

    @Override
    public void onFacebookError(FacebookError e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onError(DialogError dialogError) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onComplete(Bundle values) {
        postToWall(values.getString(Facebook.TOKEN));                                              
    }

    private  void postToWall(String accessToken) {    

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.PNG, 100, baos);
        byte[] data = baos.toByteArray();
        Bundle bundle = new Bundle();

        bundle.putString(Facebook.TOKEN, accessToken);
        bundle.putByteArray("facebookPictureData", data);
        // The byte array is the data of a picture.
        bundle.putByteArray("picture",     getIntent().getExtras().getByteArray("data"));
        bundle.putString("caption",value); 

        try {
            facebook.request("me/photos", bundle, "POST");
            Toast.makeText(getApplicationContext(),"Picture uploaded to your facebook account successfully",
                    Toast.LENGTH_SHORT).show();

        } catch (FileNotFoundException fileNotFoundException) {
            Toast.makeText(getApplicationContext(),"Picture upload failed, try again",
                    Toast.LENGTH_SHORT).show();
        } catch (MalformedURLException malformedURLException) {
            Toast.makeText(getApplicationContext(),"Picture upload failed, try again",
                    Toast.LENGTH_SHORT).show();
        } catch (IOException ioException) {
            Toast.makeText(getApplicationContext(),"Picture upload failed, try again",
                    Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onCancel() {
        // TODO Auto-generated method stub
    }
});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:00:21.313

旋转设备以确定窗口是否不可见（它将保持不可见）或是否存在重绘问题（它将出现）。

重绘问题不是 Android 错误，而是您应用的设计问题。您不应该在主 (UI) 线程上采取需要花费数秒时间的操作，因为这样做会在操作期间阻止重绘。

您可以使用@azgolfer 评论中的提示（将上传重构为`AsyncTask`）。创建您的子类`AsyncTask`并`fb`在其`doInBackground`方法中执行。创建它的实例并`execute`从`OnClick`处理程序。用于`onPostExecute`宣布已完成的上传并创建一个`ProgressBar`用于显示任务进度的。

事实上，你有太多的`OnClick`处理程序代码（就持续时间而言）。

或者，您可以随时调用`invalidate`以实现类似的效果，例如设备旋转：

```
ViewGroup everything = findViewById (R.id.mainLayout);
everything.invalidate(); 
```

但这不是推荐的设计，如果您决定采用这种方式，您可能会发现自己在多个方面与框架作斗争。

# java - Java 中的 Space Invaders... 组件或绘图

> ID：11162870
> 
> 赞同：0
> 
> 时间：2012-06-22T19:28:49.557
> 
> 标签：java, swing, user-interface

我在 Java 方面经验丰富，并且在 Swing（表单类型应用程序）方面做了一些工作，但我从来不需要比这更强大的功能，所以我不太了解 GUI 方面的情况。这是我从我一直在做的一点点阅读中收集到的。我确定它已经关闭了。

在编写太空入侵者类型的游戏时，我想到的两种方法是：

1.  为所有增量绘画和分层创建一个大组件和代码。
2.  在包含文本和图像的 JLayeredPane 中创建一堆嵌套的绝对定位的 JPanel，然后仅对可能需要重绘的那些调用 repaint()。然后覆盖paintComponent()（不确定是否自动清除以前的内容）。根据我的阅读，这将处理组件的分层和重绘，而无需重绘整个屏幕。

它是否正确？如果是这样，哪种方法更适合该项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:40:57.863

当谈到用 Java 进行游戏编程时，真正要考虑的一件事是切换到主动渲染。

正如我们所知，Swing 负责在另一个线程中进行渲染，称为 Event Dispatch Thread。这被称为被动渲染，因为您并没有真正渲染您自己的可视化组件，而是您定义了您的应用程序的外观，Swing 会在他需要时实际绘制它。

游戏通常在全屏模式下运行，并且通常需要更多地控制“何时”、“如何”和“什么”将被绘制。这称为主动渲染。在这种情况下，您必须禁用 Even Dispatch Thread 并自己进行渲染。

这一切都说得通，因为游戏通常在一个大循环中运行。游戏循环的一个示例是：

1.  获取输入数据（键盘、操纵杆等）
2.  网络通信（在客户端-服务器游戏的情况下）
3.  根据输入数据处理逻辑。（最终，当用户告诉它时，这将导致游戏退出）。
4.  更新游戏的状态机。
5.  根据新状态重绘场景
6.  重新启动循环。

有很多来源，但我可以建议第一次阅读以澄清这一点：[被动与主动渲染](http://docs.oracle.com/javase/tutorial/extra/fullscreen/rendering.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:49:33.780

**关于你的方法的一些想法**

第一种方法可能会执行得更好，因为您可以只为整个绘图使用单个 VolatileImage。但是，您认为它比第二种方法更复杂是正确的，因为您必须自己处理所有分层。

第二种方法很好，不仅仅是因为您已经陈述的原因，还因为如果您需要在鼠标进入屏幕上的特定“精灵”时执行类似处理之类的操作，Java 的 JPanel 实现会自动提供给您。也就是说... Space Invaders 克隆通常由键盘控制，因此您是否实际使用此功能完全是另一回事。

底线......我通常最终会在`paint()`范式中做这种事情。分层油漆一点也不难，特别是对于像 Space Invaders 这样简单的东西，如果您决定将其`VolatileImage`用作后台缓冲区，它将更容易提高性能。

**其他想法**

正如其他人所说，很难在摇摆中获得一致的“帧速率”，因为您无法控制“何时”渲染某些东西 - 这是由 EDT 决定的，它与您的代码异步运行。如果您决定依赖 EDT，您可以尝试使用 a`SwingTimer`进行渲染。还要格外小心地同步您的渲染和更新到底层游戏状态。

# php - 无法使用 mkdir 创建目录

> ID：11162871
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:28:52.347
> 
> 标签：php

当客户登录时，我想在他的 id 下创建所有文件夹。我这样做是这样的：

```
<?php
include('connect.php');

$aid = $_SESSION['application_id'];

$sql = "select * from ApplicationRegister where application_id= $aid" ;
echo $sql;
$result = mysql_query($sql) or die (mysql_error());
while ($row = mysql_fetch_assoc($result))
{
  echo "<table width='65%' cellpadding='4' border='0'>";

  echo "<tr><td> <h4> Company Name:   </h4></td> <td>" . $row['CompanyName'] . "</td> </tr> ";

  echo "<tr><td> <h4> Company E-mail:   </h4></td> <td>" . $row['CompanyEmail'] . "</td> </tr>";

  echo "<tr><td> <h4> Registration Type:   </h4> </td> <td>". $row['RegistrationType'] . "</td></tr>";

  echo "<tr><td> <h4> Plan:   </h4> </td> <td>" . $row['ApplicationPlan'] . "</td></tr>";

  echo "<tr><td> <h4> Registered Date:   </h4> </td><td>" . $row['Createddate'] . "</td></tr>";

  echo "</table>";
}

$file = $_SERVER['DOCUMENT_ROOT']; 
echo $file;

mkdir("$file/opencart/images/$application_id/products/");
mkdir("$file/localhost/opencart/images/$application_id/category/");
mkdir("$file/localhost/opencart/$application_id/application/");

echo "directory created";
?> 
```

我什至检查了文件夹权限。它都是读写的，但没有创建文件夹。请帮我弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:32:18.793

`$application_id`未设置。

`$row['application_id']`应该与您的查询一起设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:32:37.603

是`$application_id`在任何地方定义的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T19:32:17.340

尝试呼应你`mkdir`的 s，看看他们在生产什么

```
mkdir("$file/opencart/images/$application_id/products/");
mkdir("$file/localhost/opencart/images/$application_id/category/");
mkdir("$file/localhost/opencart/$application_id/application/"); 
```

但是，它们看起来确实不一致 - 第一个缺少`localhost`其他目录，如果缺少较低级别的目录 ( `$file/opencart/images/$application_id/`)，则不会创建子目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:32:55.190

您确定要放入文件夹的文件夹存在吗？例如，您的第一个 mkdir 确保 opencart、images、$application_id 存在，如果不存在，请在 mkdir 之前对那些执行 mkdir。

# c# - Linq to Entity Query 非常慢

> ID：11162873
> 
> 赞同：0
> 
> 时间：2012-06-22T19:29:17.120
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我有一个运行非常缓慢的 LINQ to Entity 查询。此查询在特定数据库上执行一些计算逻辑，然后将结果传递给 ViewModel。查询非常快，直到我在查询底部添加了 4 个选择语句。我需要选择语句才能返回结果响应的集合。为什么查询运行这么慢？

```
 var data = from SurveyResponseModel in db.SurveyResponseModels
                       group SurveyResponseModel by SurveyResponseModel.MemberId into resultCount
                       select new ResultsViewModel()
                       {

                           YesBarriersOthersResult = resultCount.Select(r => r.YesBarriersOthers),
                           NoBarriersOthersResult = resultCount.Select(r => r.NoBarriersOthers),
                           TotalResponsesResult = db.SurveyResponseModels.Count(),
                       };

            return View(data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:37:16.547

我很难告诉你这里到底出了什么问题，但是在遇到与 orms 和所有类似的问题时，我可以建议调试问题的最佳方法是找出实际生成的 sql 语句并针对数据库运行。很多时候，您的 ORM 可能会运行太多 sql 语句来获得相同的简单结果。

# javascript - 浮动表头 + 圆角的副作用

> ID：11162889
> 
> 赞同：0
> 
> 时间：2012-06-22T19:30:15.707
> 
> 标签：javascript, jquery, html, css

请参考[this fiddle](http://jsfiddle.net/KSZMy)。向下滚动时，表格单元格出现在圆角中。我该如何隐藏它？

## 解释

我有一个数据表，当滚动标题保持固定时，数据会滚动（使用 javascript）。

问题是我的标题有圆角，当我的表格滚动时，单元格出现在圆角区域，如下图所示。

### 我应该怎么做才能避免这种情况？

![在此处输入图像描述](../Images/659239e896dd4dbfd91dfee7d4e986ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:33:24.257

将元素后面的背景与正文背景匹配：

```
thead tr { background: #fff; } 
```

[http://jsfiddle.net/Wexcode/CDSdU/](http://jsfiddle.net/Wexcode/CDSdU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:33:08.407

使标题的父级具有 a `background-color:white;`，然后确保它是固定元素。

# android - 如何使主页按钮更改为另一个活动

> ID：11162890
> 
> 赞同：0
> 
> 时间：2012-06-22T19:30:19.163
> 
> 标签：android, android-activity

我是 Eclipse 的新手，我想看看这是否可能。

我想做的是做一个访客模式。当用户使用我的应用程序时，会有一个文本框和一个按钮。当用户输入他们选择的电话号码时，我希望它更改为拨号器。当按下主页按钮时，我希望将主页按钮重定向到密码活动。我该怎么做呢？

编辑-好的，所以也许我不清楚我的应用程序要做什么。这是一种访客模式，因此可以说有人要求使用您的手机。你可以去这个应用程序，他们把他们想打电话的人放在文本框中。当他们完成通话时，它会更改为密码活动。那有帮助，还是我需要将其设置为通话结束时更改为密码活动的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:41:55.523

防止用户通过主页按钮进入主屏幕的唯一方法似乎是声明一个新的启动器活动，但是，用户必须在安装相关应用程序后验证何时使用主页按钮。通过在清单中添加意图过滤器可以轻松地声明启动器活动：

```
 <intent-filter>
        <category android:name="android.intent.category.LAUNCHER" />
        <action android:name="android.intent.action.MAIN" />
    </intent-filter> 
```

即使这对您来说是可以接受的，它仍然会给您留下处理最近应用程序按钮的问题。幼儿锁似乎已经解决了这个问题，但我不知道如何。

对我来说，这种情况也是最不满意的。为什么 google 不实现基于权限的模态应用程序模式超出了我的理解。它严重限制了设备可用于的应用范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:33:53.800

在公共 API 中，应用程序无法拦截主页按钮。

唯一的例外是，如果您将应用程序创建为备用主屏幕。然后让您的用户将其设置为他们设备的默认主屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:34:14.283

主页按钮不能被覆盖，也不应该被覆盖，因为这是用户可以完全退出应用程序的一种方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:35:09.083

是的，这是个坏主意。也许解释一下为什么你想让主页按钮进入密码屏幕？我们也许可以建议一个适合 Android 的更好的实现。

# c# - 在类和表单之间传输数据

> ID：11162896
> 
> 赞同：0
> 
> 时间：2012-06-22T19:30:38.237
> 
> 标签：c#, class, user-interface, nullreferenceexception

长期读者，第一次海报：

我一直在尝试学习 C# 并编写游戏程序，但我对如何将数据从逻辑类传输到我的 GUI 以及反之亦然感到困惑。转移字符串是理想的，而且看起来很简单，所以我希望有人能帮助我。

在最基本的情况下，我想知道为什么这不起作用：

```
namespace MyGame
{
    public partial class GameWindow : Form
    {
        public LogicClass gameLogic;
        public GameWindow()
        {
            InitializeComponent();
        }
    private void startButton_Click(object sender, EventArgs e)
    {
        string toDisplay = gameLogic.getString();
        this.label1.Text = toDisplay;
    }
} 
```

和游戏逻辑类

```
namespace MyGame
{
    public class LogicClass
    {
        public string getString()
        {
            return "success!";
        }
    }
} 
```

我已经尝试了几天来找出为什么我在 line 上得到一个 nullReferenceException

```
string toDisplay = gameLogic.getString(); 
```

当然，这不是我想做的最终结果，但是如果有人可以向我解释这里发生了什么以及如何将字符串从不同的类传递到 GUI，我想我会能够立足于如何做我想做的其他事情。我已经看到很多关于将数据从表单传输到其他表单的事情，但是我找不到关于类到表单的内容。我知道这是可以做到的；它太简单了，不可能。谁能帮我吗？

谢谢！杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:19:53.823

您的数据传输逻辑很好，异常的原因是 gameLogic 从未实例化。你可以`public LogicClass gameLogic;`用`public LogicClass gameLogic = new LogicClass();`

或者`gameLogic = new LogicClass();`在调用 InitializeComponent() 之后添加构造函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T23:47:41.113

或者您可以将`getstring`方法定义为`Static`.

```
Public Static String getstring() 
```

这将帮助您在不实例化类的情况下调用该方法。

# java - 如何在android中使用文件发送参数

> ID：11162898
> 
> 赞同：7
> 
> 时间：2012-06-22T19:30:46.533
> 
> 标签：java, php, android

我在android中上传图像。目前我的代码只上传文件，但我也想发送一些参数。我正在尝试关注

```
FileInputStream fileInputStream = new FileInputStream(sourceFile);
        URL url = new URL(upLoadServerUri);
        conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
        conn.setDoInput(true); // Allow Inputs
        conn.setDoOutput(true); // Allow Outputs
        conn.setUseCaches(false); // Don't use a Cached Copy
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("ENCTYPE", "multipart/form-data");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
        conn.setRequestProperty("uploaded_file", fileName);
        dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
        dos.writeBytes(lineEnd);

        //Sending data
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"paramName\"" + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes(globalUID); 
```

在服务器端，我使用的是 php。这是我试图获取该参数的方式

```
$param = $_POST["paramName"];
target_path1 = "./places_photos/" . $param; 
```

但是我当前的代码确实上传了文件，但它不发送参数。如何发送参数以及如何在服务器端获取它们？

**更新**

目前，图像保存在变量`places_photos`中提到的目录中。`$target_path1`我想要的是将该图像保存在用户的目录中，并且该目录被命名为用户 ID。但不幸的是，我没有在服务器端获得用户 ID。如何将用户 ID 连同文件一起发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:04:12.313

你想让 php 知道你的文件名吗？如果您的回答是肯定的，那么您可以对您的代码进行一些更改。

（我假设您已经创建了一个最大大小的缓冲区并读取文件并将其写入表单）

首先改变你不需要这个来发送paramName：

```
//Sending data
dos.writeBytes(twoHyphens + boundary + lineEnd);
dos.writeBytes("Content-Disposition: form-data; name=\"paramName\"" + lineEnd);
dos.writeBytes(lineEnd);
dos.writeBytes(globalUID); 
```

这样做：

```
dos.writeBytes(lineEnd);
dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd); 
```

并在您的 php 中，更改您的代码：

```
$param = $_POST["paramName"]; 
```

至

```
$param = basename( $_FILES['uploaded_file']['name']); 
```

你可以查看[这篇](http://www.coderzheaven.com/2012/03/29/uploading-audio-video-or-image-files-from-android-to-server/)文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:44:13.913

设置一个带有用户 ID 的 cookie。在服务器上，您可以检索 cookie 并检查用户 ID。（但请注意，这不安全，也不传递 userid 参数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:25:39.793

在此之后应该添加另一个 lineEnd：

```
dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"paramName\"" + lineEnd);
    dos.writeBytes(lineEnd);
    dos.writeBytes(globalUID);
    dos.writeBytes(lineEnd); <-- add this 
```

还要确保添加多部分边界的结尾（以“--”开头的行）在您的情况下，添加以下内容：

```
dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T08:56:23.210

您的代码有点混乱，请仔细检查您的变量...例如，您`target_path1`的前面没有 $，检查是否有任何其他服务器变量返回任何有效输出。

但是，如果一切都失败了，您可以重命名正在上传的文件 - 包括文件名中的参数，并在提取参数后再次在服务器端重命名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-02T09:11:21.367

这很简单...100% 的工作解决方案

使用 UTF-8 在 url 中发送参数。添加这一行

```
 // open a URL connection to the Servlet
                FileInputStream fileInputStream = new FileInputStream(sourceFile);
                URL url = new URL("http://your fileaddress.php***?yourphpsideparametername="+URLEncoder.encode(yourperameter, "UTF-8")***  ); 
```

然后第二次在连接请求中添加这一行

```
 conn.setRequestMethod("POST");
               ***conn.setRequestProperty("Accept-Charset", "UTF=8");***
                conn.setRequestProperty("Connection", "Keep-Alive"); 
```

在 php 代码中添加这一行

```
 $yourperameter =$_GET['yourparameter'];
    $file_path = "doc/".$yourperameter."/";

    $file_path = $file_path . basename( $_FILES['uploaded_file']['name']);
    $title =$_FILES['title'];
    //$descr=$file_path . basename( $_FILES['uploaded_file']['desc']);

     if(move_uploaded_file($_FILES['uploaded_file']['tmp_name'], $file_path)) {
        echo "success";
    } else{
        echo "fail";
    } 
```

# python - Python 新手 - 检查字符串不工作的用户输入返回错误

> ID：11162899
> 
> 赞同：1
> 
> 时间：2012-06-22T19:30:51.357
> 
> 标签：python

我正在尝试修改下面的代码以检查用户的输入。如果输入是字符串，我想生成错误，请参阅函数choiceTest()。但这不起作用，我得到以下异常，你能帮助格雷厄姆吗

```
Choice your option:k
Traceback (most recent call last):
  File "C:\Users\Graham\bkup-workspaces\workspace\python-1\calculator.py", line 54, in <module>
    choice = menu()
  File "C:\Users\Graham\bkup-workspaces\workspace\python-1\calculator.py", line 18, in menu
    return input ("Choice your option:")    
  File "C:\Users\Graham\Desktop\letsussee\eclipse-java-helios-win32\eclipse\plugins\org.python.pydev_2.5.0.2012040618\PySrc\pydev_sitecustomize\sitecustomize.py", line 210, in input
    return eval(raw_input(prompt))
  File "<string>", line 1, in <module>
NameError: name 'k' is not defined 
```

编码：

```
# calculator program

# NO CODE IS REALLY RUN HERE, IT IS ONLY TELLING US WHAT WE WILL DO LATER
# Here we will define our functions
# this prints the main menu, and prompts for a choice
def menu():
    #print what options you have

        print "Welcome to calculator.py"
        print "your options are:"
        print " "
        print "1) Addition"
        print "2) Subtraction"
        print "3) Multiplication"
        print "4) Division"
        print "5) Quit calculator.py"
        print " "
        return input ("Choice your option:")    
# this adds two numbers given

def add(a,b):
    print a, "+", b, "=", a + b

# this subtracts two numbers given
def sub(a,b):
    print b, "-", a, "=", b - a

# this multiplies two numbers given
def mul(a,b):
    print a, "*", b, "=", a * b

# this divides two numbers given
def div(a,b):
    print a, "/", b, "=", a / b

# decide if the choice is valid or not 
def choiceTest():

    isinstanceValue = isinstance(choice,int)
    instancevalueout = str(isinstanceValue)
    print "value is" + instancevalueout
    if not instancevalueout is "True":
       print " NOT AN INTEGER " + instancevalueout
       raise SystemExit

# NOW THE PROGRAM REALLY STARTS, AS CODE IS RUN
loop = 1
choice = 0
isinstanceValue = True
instancevalueout = ""

while loop == 1:
    choice = menu()
    choiceTest()
    if choice == 1:
        add(input("Add this: "),input("to this: "))
    elif choice == 2:
        sub(input("Subtract this: "),input("from this: "))
    elif choice == 3:
        mul(input("Multiply this: "),input("by this: "))
    elif choice == 4:
        div(input("Divide this: "),input("by this: "))
    elif choice == 5:
        loop = 0

print "Thankyou for using calculator.py!"

# NOW THE PROGRAM REALLY FINISHES 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:33:34.410

您的问题是您正在使用[`input()`](http://docs.python.org/library/functions.html#input)which（在 Python 2.x 中）将输入解析为 Python 代码，这意味着只有当用户输入用引号括起来的字符串时，它才会按预期工作。

你可能想要[`raw_input()`](http://docs.python.org/library/functions.html#raw_input)它给你一个字符串（就像`input()`在 3.x 中一样），并且更安全，因为它不允许执行任意代码。请注意，您可以尝试将其转换为数字，如果失败则捕获异常，告诉您用户尚未输入数字。

类型检查在 Python 中是不受欢迎的，因为它任意限制类——这是 Python 通常不会做的事情，因为它是鸭子类型的——最好尝试做你想做的事情，如果失败则捕获异常，优雅地处理它. 这被称为*请求宽恕，而不是许可*。

# windows-7 - 如何在 WMP 上通过 RTSP 运行 H.264？

> ID：11162900
> 
> 赞同：0
> 
> 时间：2012-06-22T19:30:54.610
> 
> 标签：windows-7, h.264, rtsp, windows-media-player, ms-media-foundation

我听说 Windows Media Player 在尝试通过 RTSP 播放 H.264 视频时遇到问题。[我刚刚全新安装了 Windows 7，它声称本机支持 H.264（实际上播放来自http://www.h264info.com/clips.html](http://www.h264info.com/clips.html)的 simpsons 样本确实没问题）。但是当我尝试查看通过 RTSP 流式传输的同一个文件时，它会抱怨并且不播放视频说：

“Windows Media Player 无法播放文件。找不到播放文件所需的一个或多个编解码器。”

它怎么能抱怨一个完全能够解码同一个文件的编解码器呢？

我正在使用 Unreal Media Server 流式传输此文件并从同一台计算机连接。

有什么办法可以让 Win 7 上的 WMP 通过 RTSP 播放 H264？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:36:23.130

虽然`RTSP`Media Foundation 支持，但我认为不支持 H.264 RTP Payload。

请参阅[http://social.msdn.microsoft.com/Forums/da/mediafoundationdevelopment/thread/4ac87f5f-b8c5-471a-a424-55c0fff04eac](http://social.msdn.microsoft.com/Forums/da/mediafoundationdevelopment/thread/4ac87f5f-b8c5-471a-a424-55c0fff04eac)

> 另一个问题是 RTSP 源仅支持少数 RTP 有效负载格式 - ASF、MP3 和 LPCM。如果您的相机流式传输 MPEG4、MJPEG 或其他格式，RTSP 源将无法处理它。

# c++ - 简单的数值表达式求解器

> ID：11162902
> 
> 赞同：3
> 
> 时间：2012-06-22T19:31:08.587
> 
> 标签：c++, data-structures, binary-tree

首先，对不起我的英语不好。

对于我关于算法和数据结构类的最后一个项目，我需要在 C++ 中创建一个简单的数值表达式求解器。它需要解决简单的表达式，如`3*12+(4-6)`. 我设法拆分表达式并将运算符与数字分开，但我不能再进一步了。诀窍是将运算符放在二叉树上，但我没有设法做到这一点。

该程序只需要使用默认的 C++ 库。也许我可以建立一些基本的实现？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:49:16.067

暂时忘记二叉树。

您需要将表达式转换为[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。在该转换期间，您正在构建一棵二叉树！

[反向波兰符号][2]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:17:29.273

看看这个[http://www.codeproject.com/KB/recipes/rwformulaparser.aspx](http://www.codeproject.com/KB/recipes/rwformulaparser.aspx)我认为这个项目会解决你的问题 Josemi

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T21:31:13.273

您需要将其转换为反向波兰符号，转换的算法有点复杂，但许多网站详细说明了确切的步骤。做多位数字会使它变得更复杂一些。

您需要知道的最重要的事情是，对于 RPN，您必须使用堆栈，而不是二叉树。等式切换到 RPN 后，您会将其数字清空到堆栈中，直到遇到运算符，然后您将从堆栈中取出前两个数字并对它们进行运算并将最终值放回堆栈中. 最后，您将在堆栈上留下一个数字，这将是您等式的答案。

# macos - 核心数据：删除具有非可选关系的对象后保存错误

> ID：11162905
> 
> 赞同：0
> 
> 时间：2012-06-22T19:31:21.603
> 
> 标签：macos, core-data, relationship

我有一个简单的数据模型：父实体与子实体具有可选的一对多关系。反向关系（子 -> 父）是强制性的（非可选的）。

删除子对象后，Core Data 拒绝保存，抱怨子实体中缺少必需的属性。如果反向关系是可选的，错误就会消失。

为什么我不能在合乎逻辑的情况下建立强制性的反向关系（*即*孩子*必须*有父母）？为什么 Core Data 抱怨*删除对象的*不一致？这是预期的行为吗？

感谢您的任何澄清。

编辑：根据要求，我附上了我的测试数据模型的图片： 关于删除代码的问题，没有。这一切都是通过在应用程序窗口 nib 中设置的绑定来完成的。您可以在此处加载测试项目：[父子测试项目](http://www.freefilehosting.net/testrelationship)。可能应该提到这个项目是基于架构的。
[![测试父子Core Data模型](../Images/4828c9de37c1c2a71b79262bd95c92cb.png)](https://i.stack.imgur.com/NyKbO.gif)
`NSArrayController``NSPersistentDocument`

我观察到的行为如下：如果创建的父级没有子级，则文档可以正常保存。如果创建了一个子项，然后又删除了该子项，则在尝试保存文档时会出现错误消息：
[![父子错误信息](../Images/b3c332dd240a4db580c9762bab05bc83.png)](https://i.stack.imgur.com/W5ClY.gif)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:06:55.053

我刚刚发现了我自己问题的答案。

我观察到的对象在从关联中删除后仍然存在的问题与控制器和方法`NSArrayController`的默认操作有关。根据 Apple 文档（[NSArrayController -removeObject: method](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSArrayController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSArrayController/removeObject%3a)）： `-remove:``-removeObject:`

> 但是，如果接收者的 contentSet 绑定到关系，removeObject: 默认情况下只从关系中删除对象（而不是从对象图中）。但是，您可以为 contentSet 绑定设置“删除时删除对象”选项，在这种情况下，对象被标记为删除以及从关系中删除。

这同样适用于该`-remove:`方法。在子数组控制器 contentSet 绑定中设置“删除时删除对象”可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:51:49.680

查看您的附加信息，会弹出一件事：**删除规则**。

`Cascade`让我们想一想你们的`children`关系可能会发生什么。

```
Child deleted --> cascade = parent deleted --> possible other orphaned children 
```

也许这就是正在发生的事情？尝试将删除规则设置为`Nullify`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:33:24.657

或许你反了？

> **child**与 parent的一对一关系**不**应该是可选的。**父母**
> 与孩子的一对多关系**应该**是可选的。

 ****我刚刚测试了这个设置，它可以工作。****

# jquery - 有没有使用 AJAX/jQuery 上传图像而不使用 Flash 或 iframe 的方法？

> ID：11162907
> 
> 赞同：2
> 
> 时间：2012-06-22T19:31:36.140
> 
> 标签：jquery, image, flash, iframe, upload

还要尽量避免使用任何插件（当然，除了 jQuery，不管你是否称它为插件）。我已经有一个大型系统，并且真的不想用大量插件加载它。当然，如果我也需要，我会寻找重量很轻的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:37:10.067

试试这个，[http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:34:48.717

我不这么认为。即使一些著名的 JavaScript 图片上传插件在后台使用 iFrame。

# git - 区分两个分支以显示在一个分支中引入的更改

> ID：11162910
> 
> 赞同：5
> 
> 时间：2012-06-22T19:32:10.427
> 
> 标签：git, diff

我知道`git diff branch1 branch2`。但是，我希望看到仅在一个分支中引入的更改。我可以通过以下方式获得此功能：

```
git checkout branch1
git merge branch2
git reset origin/branch1
git diff 
```

有没有更短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T19:54:09.933

你可以做：

```
git diff branch1...branch2 
```

（注意是三个点）

...这将向您展示`branch2`自从它偏离`branch1`（或者，严格来说，自合并基础以来）以来引入的所有更改。`..`和`...`中`git diff`和的不同用法`git log`可能有点令人困惑，因此您可能会发现[此答案](https://stackoverflow.com/a/5257065/223092)中的图表很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:35:00.883

您需要找到两个分支的最近公共根的哈希，为此您使用 git merge-base：

```
git merge-base branch1 branch2 
```

然后，您可以使用 git log 获取从该公共根到分支头的更改日志：

```
git diff <common base hash>..branch2 
```

# python - django视图同步

> ID：11162911
> 
> 赞同：0
> 
> 时间：2012-06-22T19:32:11.410
> 
> 标签：python, django, graph, synchronization, views

我需要创建一个页面，其中页面的一部分是相当长的计算结果，另一部分是显示计算的一些中间结果的图表。我实现它的方式是我有两个视图。一个视图进行计算并将中间结果存储在会话变量中。第二个视图从会话变量中检索中间结果，并使用 matplotlib 将值显示为图像。

问题是我找不到在第一个视图完成后执行第二个视图的方法。如果第二个视图首先执行，那么我会在图中看到旧数据。

这是一些伪代码：

视图.py：

```
def calc(request):
  ...
  do calculations
  store interim results in session variable
  return render_to_response(...'result':value...)

def graph(request)
  retrieve interim results from session variable
  create and return HttpResponse(content_type='image/png') with graph 
```

网址.py：

```
(r'^report/$', 'calc',),
(r'^report/graph.png/$', 'graph',), 
```

resultAndGraph.html：

```
Result: {{result}}
<img src="graph.png" width="400" height="400"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:10:44.490

我建议您设置[Memcache](http://memcached.org/)并使用[Django Caching 框架，而不是使用会话变量](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs)

但是，如果您想使用两个视图，则可以使用[HttpResponseRedirect从第一个视图重定向到第二个视图](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T12:53:36.733

如果您有一个长时间运行的进程，请使用像[celery](http://celeryproject.org/)这样的任务队列并将任务卸载到单独的进程。

在您的第二个视图中，只需检查此过程是否已完成，然后显示更新的信息（它也可以显示该过程仍在运行的通知）。

[`django-celery`](http://pypi.python.org/pypi/django-celery)通过使用@cberner 建议的缓存机制，与 django 集成很容易。

# internet-explorer-8 - 使用 border-radius.htc 不会导致 IE8 的圆角

> ID：11162915
> 
> 赞同：0
> 
> 时间：2012-06-22T19:32:20.387
> 
> 标签：internet-explorer-8, rounded-corners

我正在尝试使用 border-radius.htc 解决方案来获得圆角以在 IE8 中显示，但我遇到了困难。在 HTML 文件中，我使用放置在页面顶部附近的 IE8 条件来调用 IE8 特定样式表。在该样式表中，我有以下规则：

```
.navbar .nav .active > a,
.navbar .nav .active > a:hover {
behavior: url("border-radius.htc");
-webkit-border-radius: 5px 5px 0px 0px;
-moz-border-radius: 5px 5px 0px 0px;
border-radius:  5px 5px 0px 0px;
position:  relative;
zoom:  1; 
```

}

当我在 IE8 中查看页面时，角落仍然是方形的。谁能告诉我为什么在 IE8 中没有应用圆角？我的 CSS 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:46:49.563

代替border-radius使用PIE.htc，从[http://css3pie.com/](http://css3pie.com/)下载它并放在你的文件中，代码是正确的，只需将behavior：url（“border-radius.htc”）替换为behavior：网址（“PIE.htc”）。

# iphone - UIVIew Controller 中何时调用 ViewDidUnload 和 Dealloc 方法？

> ID：11162921
> 
> 赞同：0
> 
> 时间：2012-06-22T19:32:38.470
> 
> 标签：iphone, ios, memory-management, dealloc

我已经阅读了很多关于此的答案，如果我想使用模拟器进行检查，我仍然会感到困惑。有什么方法可以确定在哪个时间调用了哪些方法？有人说当您更改视图控制器时调用 dealloc () 方法，当您返回时调用 viewdidunload。我想知道这两种方法何时被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:37:44.343

当控制器从内存中删除时，会调用 dealloc 方法。当控制器即将从存在中删除时调用此方法（您应该释放所有内容并执行常规清理）。

viewDidUnload 方法在视图被销毁时被调用。调用此方法后，控制器可能会继续存在。在这种方法中，您应该释放任何支持视图且不再需要的东西。

如果您想确切地查看它们何时被调用，您可以输入 NSLog() 语句并监控日志。

# c - c中的字符串指针

> ID：11162931
> 
> 赞同：0
> 
> 时间：2012-06-22T19:33:33.647
> 
> 标签：c, pointers

```
#include<stdio.h>
int main()
{
    char *s[] = { "knowledge","is","power"};
    char **p;
    p = s;
    printf("%s ", ++*p);
    printf("%s ", *p++);
    printf("%s ", ++*p);

    return 0;
} 
```

输出：

> 知识知识

请特别解释第二条语句的输出。`printf()`我认为因为`++`和`*`具有相同的优先级，因此`*p++` `p`应该先递增然后使用`*`（一元运算符从右到左的关联性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:42:25.167

第一个递增 *p 并显示字符串（将其设置为 knowldege 中的 n）。第二个显示字符串 *p 然后递增 p（将其移动到“is”）。第三个递增 *p 然后显示字符串（从“is”中的 s 开始）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:54:54.093

根据[C++ 运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)：

1.  *"*" 与前缀*"++ " 具有相同的优先级，但必须从右**到左**进行评估。

    printf("%s", ++*p);

所以 first`*p`被评估，然后`++(*p)`，导致第一个字符串中的第二个字符。

1.  “*”的优先级低于**后缀***“* ++”。

    printf("%s", *p++);

所以 first`p`是递增的，**但**它是一个*post-increment*。操作返回的值*是原始*值。这样，`*`对原始指针进行操作，该指针指向第一个字符串上的第二个字符。

请注意，这一次，`++`是操作结束`p`，而不是结束`*p`。

1.  由于“2”，`p`指向第二个字符串。当你这样做时，`++*p`你现在指向第二个字符串的第二个字符（“s”）。当您再次使用*pre-increment*时，传递给的值`printf`已经更改。

    printf("%s", ++*p);

如果您进行一些更改并打印指针值（忽略警告），我可能会更清楚：

```
printf("%s [%p]\n", ++*p, p );
printf("%s [%p]\n ", *p++, p );
printf("%s [%p]\n ", ++*p, p );

nowledge [0x7fff6f5519e0]
nowledge [0x7fff6f5519e8]
 s [0x7fff6f5519e8] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T19:44:32.123

增量后缀运算符 ( `p++`) 计算的值是`p`。递增前缀运算符 ( `++p`) 计算的值是`p+1`。

在您的第二个 printf 中，`*p++`评估`*p`将评估的内容，但具有递增的副作用`p`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T21:56:01.977

当遇到棘手的运算符序列时，通常很容易将其重写为一系列简单的语句。你的块变成：

```
p[0]++;  //skips over the 'k' in knowledge
printf("%s", *p);
printf("%s", *p);
p++;     //moves to the next word
p[0]++;  //skips over the 'i' in is
printf("%s", *p); 
```

# windows - 如何在 VB6 中显示纯粹用于验证用户帐户的 Windows 登录表单？

> ID：11162937
> 
> 赞同：3
> 
> 时间：2012-06-22T19:33:50.410
> 
> 标签：windows, vb6

我们有一个旧的**VB6**应用程序，它曾经在各种用户帐户下运行。我们不得不将它移动到一个“公共”机器上，多个用户使用同一个帐户，该帐户会自动登录。

有没有办法弹出官方的 Windows 身份验证表单，让用户输入他们的凭据并将状态天气传回给我，或者身份验证是否发生或失败？

我可以让用户将他们的用户名/密码输入到我自己创建的表单中，并使用附加的代码来验证身份验证。问题是这看起来很粗略，我宁愿没有潜在的访问用户密码的权限。

这是我可以用来验证用户身份的代码：

```
on error resume next
strUserName = "username"
strPassword = "password"
strADsPath = "WinNT://domainname"
iFlags = "0"

' bind to the ADSI object and authenticate Username and password 
Set oADsObject = GetObject(strADsPath)
strADsNamespace = left(strADsPath, instr(strADsPath, ":"))

set oADsNamespace = GetObject(strADsNamespace)
Set oADsObject = oADsNamespace.OpenDSObject(strADsPath, "domainname\" & strUserName, strPassword, 0)

If not (Err.number = 0) Then
    MsgBox(strUserName + " Failed.")
Else
    MsgBox(strUserName + " Authenticated.")
End If 
```

我希望这样的事情：

```
if (AuthenticateUser() <> true)
    MsgBox(strUserName + " Failed.")
Else
    MsgBox(strUserName + " Authenticated.")
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:07:17.213

您可以尝试一个小的存根可执行文件，它只使用动词/操作运行主要的存根可执行`ShellExecute()`文件`"runas"`。这应该会导致 Windows 提示输入用户名/密码来运行。不过，这可能会限制他们与其他应用程序交互的访问权限。

# powershell - PowerShell将文本行添加到多个文件

> ID：11162939
> 
> 赞同：2
> 
> 时间：2012-06-22T19:33:55.797
> 
> 标签：powershell

Powershell体验3小时...

场景：需要在多个文件夹和子文件夹中的多个ASPX文件的顶部添加一行代码

这可能吗？

我已经想出了如何搜索文件，但添加那行代码是我卡住的地方。这就是我所拥有的，这是行不通的

```
Get-ChildItem C:\domain_3 -recurse -include "*.aspx" |
Foreach-Object { 
    Add-Content -Path $targetFile -Value "<%@ Page Language="C#" Inherits="LandingPages.LandingPage" %>"; 
} 
```

谢谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T22:00:11.497

```
$header=@"
"<%@ Page Language="C#" Inherits="LandingPages.LandingPage" %>
"@

Get-ChildItem C:\domain_3 -Recurse -Filter *.aspx | Foreach-Object { 
    $header`n" + (Get-Content $_.FullName | Out-String) | Set-Content -Path $_.FullName
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:04:37.730

这有效[对编码部分不太确定]

```
$file="F:\Default2.aspx"
$content = Get-Content $file
$content = "<%@ Page Language=`"C#`" Inherits=`"LandingPages.LandingPage`" %>" + $content;
Set-Content $file $content 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:52:21.383

试试这个（我现在无法测试）

创建一个函数：

```
function Insert-Content ($file) {
BEGIN {
$content = Get-Content $file
}
PROCESS {
$_ | Set-Content $file
}
END {
$content | Add-Content $file
}
} 
```

然后使用它：

```
(dir c:\domain_3 -r -filter *.txt ) | % { '<%@ Page Language="C#" Inherits="LandingPages.LandingPage" %>' | insert-content $_.fullname } 
```

# javascript - 控制器重定向后，Javascript 不在视图中执行

> ID：11162942
> 
> 赞同：3
> 
> 时间：2012-06-22T19:34:10.510
> 
> 标签：javascript, asp.net-mvc-3, jquery-mobile

我在注销后遇到问题，我重定向到我网站的登录页面。但是，除非我刷新，否则登录页面的 javascript 根本不会执行。

我正在使用以下链接调用 Account 控制器的 LogOff 操作（此代码位于单独的控制器中）：

```
@Html.ActionLink("Logout", "LogOff", "Account", null, new { data_icon = "gear", @class = "ui-btn-right" }) 
```

Account 控制器中的 LogOff 方法如下所示，其中我传递了一个注销参数，以便在登录视图中检测我从注销操作来到这里：

```
public ActionResult LogOff()
{
    return Redirect(Url.Action("LogOn", "Account", new RouteValueDictionary(new { logout = true })));
} 
```

检查萤火虫，我注意到javascript

```
$(document).ready(function () { ... }); 
```

在我的登录页面中使用的根本不执行。

此外，登录页面的 url 显示为“localhost:#####/Account/LogOff”，而不是我预期的“localhost:#####/Account/LogOn?logout=True”。

如果我之后尝试提交登录表单，那么我将被发送到一个空白页面，其 url 为“http://localhost:#####/?logout=True”

所以我想知道我做错了什么导致页面无法加载其javascript，以及如何解决这个问题。

谢谢！

**更新：** 这是我的登录控制器方法：

```
public ActionResult LogOn()
{
    List<SelectListItem> cpList = new List<SelectListItem>();

    // Retrieve the list of central points from web.config
    NameValueCollection centralPoints = (NameValueCollection)ConfigurationManager.GetSection("CentralPointDictionary");

    foreach (string cp in centralPoints)
        cpList.Add(new SelectListItem { Text = cp as string, Value = centralPoints[cp] as string });

    // Check for a cookie containing a previously used central point
    string selectedCP = string.Empty;
    if (ControllerContext.HttpContext.Request.Cookies["LastCentralPoint"] != null)
        selectedCP = ControllerContext.HttpContext.Request.Cookies["LastCentralPoint"].Value;
    else if (cpList.Count > 0)
        selectedCP = cpList[0].Text;
    LogOnModel loginModel = new LogOnModel { CentralPointsList = new SelectList(cpList, "Value", "Text", selectedCP) };
    return View(loginModel);
} 
```

我的观点的主体：

```
<div data-role="page" id="page">
    <div data-role="header" data-position="inline">
        <div id="languageContainer" data-role="fieldcontain">
        <select id="languageSelect" data-mini="true" data-theme="b" data-overlay-theme="d" data-native-menu="false" data-inline="true">
            <option value="English">English</option>
            <option value="Français">Français</option>
        </select>
        </div>
    </div><!-- /header -->

    <div data-role="content" id="contentFrame" class="frame">
        <div id="controlFrame">
            @using (Html.BeginForm())
            {
            <div id="centralPoint" class="frame">
                    @Html.DropDownListFor(model => model.CentralPointAddress, Model.CentralPointsList, new { id = "centralPointSelect", name = "centralPoint", data_mini = "true", data_inline = "true", data_native_menu = "false" })
            </div>
                <div id="errorMsg">@Html.ValidationSummary()</div>
            <div id="credentialsFrame" class="frame">
                @Html.TextBoxFor(m => m.UserName, new { id = "userField", type = "text", name = "Username" })
                @Html.PasswordFor(m => m.Password, new { id = "passField", type = "password", name = "Password" }) 
            </div>
            <input id="loginBtn" type="submit" value="Login" />
            <div id="rememberMe" class="frame">
                        @Html.CheckBoxFor(m => m.RememberMe, new { @class = "custom", data_mini = "true" })
                        @Html.LabelFor(m => m.RememberMe)
            </div>
            <div id="forgotPassFrame">
                <input id="forgotPass" type="button" data-mini="true" value="Forgot password?" />
            </div>
            @Html.HiddenFor(m => m.Encrypted, new { id = "encrypted", value = "false" })
            }
        </div>
        @using (Html.BeginForm("SuccessfulLogin", "Account", FormMethod.Get, new { id = "successForm" }))
        {
            <input id="returnUrl" name="returnUrl" type="hidden" />
        }
    </div><!-- /content -->
 </div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:51:59.093

事实上，这个问题与 jQuery Mobile 有关。来自 JQM 文档：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

仅对我来说，“pageinit”不起作用，但“pagechange”成功了。

所以我最终要做的是：从 $(document).ready() 中提取我的原始代码并将其插入到一个单独的函数中。现在看起来像这样：

```
$(document).ready(DocumentReady);

$(document).bind("pagechange", function () {
    // check if we just logged out to ensure we don't call DocumentReady() 
    // twice in succession
    if (window.location.href.indexOf("LogOff") > -1) {
        DocumentReady();
    }
});

function DocumentReady() {
    // some initialization code
}); 
```

* * *

## 然而...

这解决了我的 javscript 没有执行的第一个问题，但是我的 UI 没有显示 javascript 所做的更改。

正如 JQM 文档所述，整个应用程序在单个文档中运行。所以我的 LogOff 控制器方法（重定向到 LogOn）导致一个新的登录页面被注入（或附加）到现有页面中。然后，当我的 javascript 代码使用 访问文本输入字段时`$("#userField")`，它是从在应用程序一开始加载的页面访问该字段，而**不是在注销后显示的那个！**

我后来发现，通过为 window.location 赋值来更改页面位置会导致完全刷新。因此，在注销时，我可以这样做，而不是调用控制器方法：

```
$("#logoutBtn").click(function () {
    window.location = $.mobile.path.parseUrl(window.location.href).domain + "/Account/LogOn";
}); 
```

由于这会导致页面完全刷新，$(document).ready() 事件被触发，这意味着我之前所说的关于绑定到“pagechange”或“pageinit”的内容不再需要，尽管仍然很好了解使用 jQuery 移动时。刷新还加载了一个全新的 DOM，因此我可以确定我的 javascript 会影响页面上显示的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:59:19.093

使用`RedirectToAction()`而不是`redirect()`.

# ios - 从 appDelegate 更新另一个视图控制器中的标签

> ID：11162949
> 
> 赞同：4
> 
> 时间：2012-06-22T19:34:48.373
> 
> 标签：ios, uiviewcontroller, uilabel, uiapplicationdelegate, settext

我想从 appDelegate 更新我的一个 ViewController 中的标签。视图控制器中的标签都在 IB 中链接并设置了属性。

在 AppDelegate .h

我正在为视图控制器创建一个 ivar，因此我可以像这样从委托访问视图控制器上的标签。

```
someViewController *myView; 
```

并在 AppDelegate.m 文件中

```
myView.theLabel.text = @"Whatever"; 
```

我也试过`myView.theLabel setText: @"whatever";`

我还尝试将 myView 设为属性并将其合成。我已经尝试过代码`applicationDidFinishLaunching`，`applicationWillEnterForeground`但是标签永远不会更新。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:09:41.087

我想 myView 还没有创建，所以你有一个空引用。

试试这个来测试这个理论：

```
someViewController *myView;
if(myView)
    NSLog(@"Object has been created");
else
    NSLog(@"You have a null reference - The Object hasn't been created yet"); 
```

如果是这种情况，请将行更改为以下内容以创建它：

```
someViewController *myView = [[someViewController alloc] initWithNibName:@"SomeViewController" bundle:nil];
myView.theLabel.text = @"Something";
self.window.rootViewController = myView; 
```

是的，您在 appDelegate 中创建了您的第一个视图，然后将 rootViewController 设置为该第一个视图。

# java - 带有 logback 的行号

> ID：11162951
> 
> 赞同：1
> 
> 时间：2012-06-22T19:34:55.050
> 
> 标签：java, logback

我想在我的 logback 配置中添加行号（只是一个在每个日志行上不断递增的顺序整数） - 我该怎么做？我查看了[文档](http://logback.qos.ch/manual/layouts.html)中可用的属性，但在任何地方都看不到它。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:13:25.757

正如彼得所提到的，编写[自定义转换说明符](http://logback.qos.ch/manual/layouts.html#customConversionSpecifier)是目前（2012 年 6 月）的最佳选择。这是示例代码：

```
import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.classic.pattern.ClassicConverter ;
import java.util.concurrent.atomic.AtomicLong;

public class LocalSequenceNumberConverter extends ClassicConverter {

  AtomicLong sequenceNumber = new AtomicLong(0);

  @Override
  public String convert(ILoggingEvent event) {
    return Long.toString(sequenceNumber.getAndIncrement());
  }
} 
```

如果您需要进一步的帮助，请在 logback-user 邮件上发帖。

# java - Java 扩展数组列表 功能

> ID：11162954
> 
> 赞同：4
> 
> 时间：2012-06-22T19:34:59.693
> 
> 标签：java, list, inheritance, arraylist

假设我有

```
class Dummy {
    String a, b;
    public Dummy(String a, String b) {
        this.a = a;
        this.b = b;
    }
    public String toString(){
        return a+b;
    }
    public String getA() {
        return a;
    }
    public String getB() {
        return b;
    } 
```

}

我想拥有

```
List<Dummy> myList = new ArrayList<Dummy>() {{
     add(new Dummy("test", ""));
     add(new Dummy("boo", "o"));
}};

System.out.println( myList.toString());
System.out.println( myList.getAs());  //should return ["test", "boo"]
System.out.println( myList.getBs());//should return ["", "o"] 
```

如果你明白我的意思

可能必须创建类扩展`ArrayList<Dummy>`？

**编辑：**

看起来不错

```
class Dummy {
    String a, b;
//...
    public static String toAString(List<Dummy> l){
       String s="";
       for (Dummy d : l){
           s+=d.a;
       }
       return s;
    }
} 
```

**编辑2：**

我将在 Dummy 中只有 2 个字符串，这样做会更好`ArrayList<String []>`吗？在记忆方面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:06:46.920

在 Java 8 之前的版本中，您可以使用其中一种功能性惯用语 API，例如 Guava，如下所示：

```
Function<Dummy, String> getAFunc = new Function<Dummy, String> {
    @Override
    public String apply(Dummy dummy) {
        return dummy.getA();
    }
}

Function<Dummy, String> getBFunc = new Function<Dummy, String> {
    @Override
    public String apply(Dummy dummy) {
        return dummy.getB();
    }
}

System.out.println( Lists.transform(myList, getAFunc) );
System.out.println( Lists.transform(myList, getBFunc) ); 
```

同意这是非常丑陋和冗长的，当 Guava 团队说[滥用功能习语让他们哭泣](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)时，他们所指的是一些东西。

[但是等等，有希望，并且有一种方法可以使用开源**Funcito**库](http://funcito.googlecode.com)使这段代码更优雅、更短、更普遍适用于任何情况（**免责声明**：我是主要作者）

现在你可以简单地写

```
Function<Dummy, AType> getAFunc = functionFor( callsTo(Dummy.class).getA() );
Function<Dummy, BType> getBFunc = functionFor( callsTo(Dummy.class).getB() );

System.out.println( Lists.transform(myList, getAFunc) );
System.out.println( Lists.transform(myList, getBFunc) ); 
```

简洁的关键是使用 Funcito 来编写你的函数。即使假设 A & B 不是字符串，它也可以工作，正如我在示例中所示。现在，您可以将它用于除 Dummy 之外的任何类型，以及使用 getter 方法的任意数量的字段，通过使用 Funcito 快速生成包装适当方法的函数。如果您愿意，Funcito 还可以与 Guava 以外的一些替代功能 API 一起使用。

请注意，以上使用来自 Guava 的导入和来自 Funcito 的静态导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:29:08.280

`getA`定义与和对应的一等函数`getB`。我正在`Function`使用[番石榴](http://code.google.com/p/guava-libraries/)。

```
class Dummy {
    String a, b;
    public Dummy(String a, String b) {
        this.a = a;
        this.b = b;
    }
    public String toString(){
        return a+b;
    }
    public String getA() {
        return a;
    }
    public String getB() {
        return b;
    }
    public static Function<Dummy, String> getA = new Function<Dummy, String>() {
      public String apply(Dummy d) {
        return d.a;
      }
    }
    public static Function<Dummy, String> getB = new Function<Dummy, String>() {
      public String apply(Dummy d) {
        return d.b;
      }
    }
} 
```

这就是你可以使用它的方式：（`Iterables`下面也来自 Guava）。

```
List<Dummy> myList = new ArrayList<Dummy>() {{
     add(new Dummy("test", ""));
     add(new Dummy("boo", "o"));
}};

System.out.println( myList.toString());
System.out.println( Iterables.transform(myList, Dummy.getA)); // returns ["test", "boo"]
System.out.println( Iterables.transform(myList, Dummy.getB)); // returns ["", "o"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:38:48.200

是的，你是对的，你需要扩展 ArrayList 来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T22:37:59.893

快速扩展 ArrayList 变得站不住脚，因为您最终需要一个 MoronArrayList、一个 GeniusArrayList、一个 DummyHashMap、一个 DummyQueue 等......

@missingfaktor 建议的番石榴是一种选择。另一种选择，如果确实经常需要，则将实用方法放在*Dummy*类中。例如

```
public static String toAStrings(Collection<Dummy> collection) {
   StringBuilder sb = new StringBuilder;
   boolean firstTime = true;
   for (Dummy dummy : collection) {
      if (!firstTime )
         sb.append(",");
      firstTime = false;
      sb.append(dummy.getA());
   }

   return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:45:07.857

```
 List<Dummy> myList = new ArrayList<Dummy>() 
      myList.add(new Dummy("test", ""));     
      myList.add(new Dummy("boo", "o")); 

                     for(Dummy dumdum : myList) {
                     System.out.println(dumdum.getA() + " " + dumdum.getB());
                      } 
```

这是你要找的，还是我误解了你的问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T19:48:45.397

**使用组合而不是继承............**

**考虑同一个包中的所有类。**

`Dummy Class:`

```
class Dummy {
    String a, b;
    public Dummy(String a, String b) {
        this.a = a;
        this.b = b;
    }
    public String toString(){
        return a+b;
    }
    public String getA() {
        return a;
    }
    public String getB() {
        return b;
    }

} 
```

`Test Class:` **已编辑**

```
public class Test{
 Test t = new Test();                   
 List<Dummy> myList = new ArrayList<Dummy>();
 public static void main(String[] args){
 t.myList.add(new Dummy("test", ""));
 t.myList.add(new Dummy("boo", "o"));
for (Dummy d : t.myList)
{
  System.out.println(d.toString());
  System.out.println(d.getA());  
  System.out.println(d.getB()); 
  }
 } 
} 
```

# java - 是否有充分的理由从非子类访问受 Java 保护的方法？

> ID：11162959
> 
> 赞同：1
> 
> 时间：2012-06-22T19:35:17.930
> 
> 标签：java, inheritance, protected

不从定义类继承的类可以访问受保护的方法这一事实一直困扰着我。我经常在抽象类中使用抽象保护方法来让子类定义功能。实际上，这些是私有方法——它们不打算在类层次结构之外调用。然而，Java 并没有给我一个这样说的方法，因为受保护的方法可以被包中的任何类调用。

我的问题是，允许这样做的设计原理是什么？是否存在需要一种只能在包中或由包外的随机子类调用的方法的有效用例？我从来没有遇到过这种情况，我想知道其他人是否遇到过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:15:40.810

在大型项目中，测试类调用被测类的内部方法是很常见的，并且受保护或包级访问允许这样做。

在我看来，`protected`修饰符更像是一种文档功能，而不是用于封装代码的强制机制。通过将方法或字段标记为受保护，您向其他开发人员表明，相关代码是内部实现细节，在未来版本中可能会发生变化，而不是该类的公共 API 的一部分。

通过强制转换和反射，其他开发人员通常可以获得您不希望他们使用的代码。如果一个方法调用在被其他类调用时可能有害，则解决方案不是尝试使用 Java 的访问规则将其锁定。它是重构类以支持不可变的数据结构和干净的关注点分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:52:36.057

这个问题的解决方案听起来像是重新组织您的项目以包含多个包，以便每个包都有超类、它们的子类，没有别的。这更像是一种解决方法，而不是一个硬而快速的解决方案，但它应该做你想做的事情。

# linux - 主要编号次要编号和驱动程序加载

> ID：11162960
> 
> 赞同：5
> 
> 时间：2012-06-22T19:35:40.057
> 
> 标签：linux, linux-kernel, driver, device

我是初学者。我对与设备驱动程序相关的主要编号和次要编号有所了解。我还知道大多数可以插入 Linux 系统的设备都有一个主编号。并根据这个主设备号，加载相应的驱动程序。我有这个疑问，请告诉我内核在插入设备时如何从设备中读取主设备号？请解释从设备插件到驱动加载的步骤，尽可能简单。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T23:13:02.117

主要/次要数字用于**块**和**字符**设备。

您没有从设备中*检测*到主要号码。也许您认为 USB 设备可以传达设备编号而 Linux 使用这些设备编号，但 USB 供应商/产品 ID 与主要编号无关。如果您将一个完全哑巴的串行设备插入串行端口会怎样？内核无法知道您插入/拔出某些东西。

因此，例如，如果您想要字符设备的主要号码，您可以使用

```
int alloc_chrdev_region(dev_t *dev, unsigned int firstminor, unsigned int count, char *name); 
```

就像 NKamrath 说的那样，或者您使用绝对的。但是，请注意，[许多是保留的](http://kernel.org/doc/Documentation/devices.txt)。

据我所知，这是您要求的步骤：

1.  您将一些块/字符设备插入到一些**总线**。
2.  根据总线（USB、PCI、PCI Express、SCSI、I²C 等），总线（可能）会发送一个**中断信号**，该信号有一天会到达 CPU 并因此到达 Linux。
3.  中断例程完成必要的工作，知道总线类型及其内部机制，为该设备加载适当的**驱动程序**（如果存在，并且确定存在）并执行其初始化功能。
4.  设备驱动程序的初始化函数注册（例如`register_chrdev_region`）一个主号码，如果它有一个保留（参见这个著名的[保留列表](http://kernel.org/doc/Documentation/devices.txt)）；否则它会要求内核为其分配一个（例如`alloc_chrdev_region`）；驱动程序还将为此驱动程序保留一个次要区域。
5.  驱动程序设置了一些回调（打开/关闭/读/写）并要求内核将它们与设备号相关联。

此时，您可以使用驱动程序的设备号与驱动程序进行通信，但是如何呢？还没有任何内容`/dev`...一种方法是`mknod`在您知道要与之交流的主要/次要对时使用。你会发出：

```
# mknod /dev/mydevice c 232 4 
```

...即：请创建一个设备节点，在`/dev/mydevice`该设备节点处链接到`c`具有主要 232 和次要 4 的字符 ( ) 设备。但是你怎么知道这些数字呢？它们可能是绝对的（保留列表），也可能是驱动程序`printk`的，因此您可以手动进行。

但这里有更好的东西。

仍然在设备驱动程序的初始化函数中：驱动程序将设备注册为[Sysfs](http://en.wikipedia.org/wiki/Sysfs)设备（请参阅参考资料`device_create`）。这会将设备放入`/sys`树中，其节点（一个目录）将有一个名为`uevent`. 如果你`cat`这样做，它会输出类似

```
MAJOR=232
MINOR=4
DEVNAME=whatever 
```

试试看：

```
$ cat /sys/class/tty/console/uevent 
```

是否匹配

```
$ ls -l /dev/console 
```

?

现在，[udev](http://en.wikipedia.org/wiki/Udev)是负责管理`/dev`. 总的来说，它只是扫描`/sys`树以便`/dev`自动填充。您可能还会看到所有主要/次要字符和块设备，如下所示：

```
$ ls /sys/dev/char
$ ls /sys/dev/block 
```

就是这样。如果您想更好地理解这一切，请开发一个虚拟驱动程序并尝试使其自动出现在`/dev`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:50:09.177

如果您事先知道主要号码，则可以使用

```
int register_chrdev_region(dev_t first, unsigned int count); 
```

为了允许内核动态地为设备分配主设备号，请使用

```
int alloc_chrdev_region(dev_t *dev, unsigned int firstminor, unsigned int count, 
                    char *name); 
```

要阅读主要号码，请使用

```
int MAJOR(dev_t dev); 
```

要插入设备或驱动程序，您必须使用该`insmod`命令。然后内核会尝试使用你给它的号码，或者如果你使用了 alloc 函数，就会动态地给它分配一个空闲的主号码。正确解释内核和驱动程序设计的内部工作需要大量解释。但是，有一本很棒的免费书籍，它很容易阅读（对于代码书），名为[Linux Device Drivers 3rd Edition](http://lwn.net/Kernel/LDD3/)，即使您只阅读前 3 章（大约 100 页），它也会为您提供很好的驱动程序介绍你会很好地理解我认为你在问什么。此外，示例的所有源代码都是可用的，因此您可以破解他们的演示并更快地开始编写驱动程序！

# .htaccess - 目录到具有相同名称的子域

> ID：11162967
> 
> 赞同：1
> 
> 时间：2012-06-22T19:36:10.730
> 
> 标签：.htaccess, redirect, directory, rewrite, subdomain

谢谢阅读。我已经进行了搜索，阅读了多个帖子（丢失计数），但仍然遇到一些看似简单的问题。我正在尝试从以下位置重定向或重写：

```
http://www.mysite.com/blog/ 
```

到

```
http://www.blog.mysite.com/ 
```

首先，这应该放在根目录的 htaccess 文件中还是 blog 子目录中？其次，我的一些尝试如下：

（尝试1）

```
RewriteCond %{HTTP_HOST} ^mysite\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.com$
RewriteRule ^blog\/?$ "http\:\/\/www\.blog\.mysite\.com\/" [R=301,L] 
```

（尝试 2）

```
RewriteCond %{HTTP_HOST} ^(www\.)?blog\.mysite\.com$
RewriteCond %{REQUEST_URI} mysite.com/blog
RewriteRule ^(.*)$ /blog/$1 [L] 
```

（尝试 3）

```
RewriteRule http://mysite.com/blog http://www.blog.mysite.com/$1 [R=301,L] 
```

（尝试4）

```
rewriterule ^blog/(.*)$ http://www.blog.mysite.com/$1 [r=301,nc] 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:41:52.380

您的第一次尝试看起来几乎是正确的。我将删除`OR`条件并将它们打包到一个正则表达式中，并从重写目标中删除所有转义的斜杠和引号：

```
# Also, are you missing RewriteEngine On?
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$ [NC]
# Redirect and place everything after /blog onto /
RewriteRule ^blog(.*)$ http://www.blog.mysite.com$1 [R=301,L] 
```

这应该放在根目录的 .htaccess 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T11:43:33.447

一个简单的代码就可以做到这一点。采用

```
Redirect /blog http://blog.mysite.com/ 
```

# javascript - HTML 表单提交的两种不同操作

> ID：11162972
> 
> 赞同：1
> 
> 时间：2012-06-22T19:36:27.683
> 
> 标签：javascript, html, forms, redirect

我正在尝试编写一个执行以下操作的 HTML 文件：它采用一组具有通用名称的表单字段，并将它们提交到文件“delete.py”，然后它采用一组不同的表单字段并提交这些值到“test.pl”文件中。当我点击提交按钮时，这一切都会发生。我不想被重定向到“delete.py”页面，但我确实希望在提交时被重定向到“test.pl”页面。

这可能吗？我怎样才能做到这一点？

如果这太复杂了，我在想的是把 delete.py 变成一个中间重定向页面，它会执行要发送到 test.pl 页面的 post 值。我不知道如何重定向帖子值，所以如果有人认为这会更好，我会很感激知道如何重定向帖子值。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:40:33.143

您可以：

`iframe`使用`target`表单的属性提交给一个。

...或者您可以使用 AJAX 提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:39:19.370

您可以`delete.py`执行一些代码，然后执行标头重定向，`test.pl`只要您`delete.py`没有向页面写入任何内容。

以下是如何进行标头重定向：

```
Status: 302 Temporarily moved
Location: http://some.org/new-URL.html 
```

在 Python 中，在脚本的末尾：

```
print("Status: 302 Temporarily moved")
print("Location:http://some.org/new-URL.html")
print # to end the CGI response headers. 
```

确保在该页面之前没有任何其他输出。

[参考问题](https://stackoverflow.com/questions/5320916/how-to-do-simple-http-redirect-using-python)

# javascript - 让表单中的每个输入一个一个出现？

> ID：11162975
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:36:35.750
> 
> 标签：javascript, jquery, ajax, forms

我使用 jquery 并希望每个表单文本输入一个一个出现，用户输入数据然后下一个出现。在他们完成单个问题段中的整个表单后，我希望提交整个表单的回复。

这可能吗？还是我必须让表格完整显示才能获得我想要的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:54:56.487

哇，每个人都比我快，好吧，我会把手放在锅里：

[这个 jsFiddle](http://jsfiddle.net/TSFkH/1/)向您展示了我提出的实现。它显示了您基本上如何遍历表单以获取下一个容器并在按下回车键 (13) 时显示它。

不要忘记 stopPropagation / preventDefault 否则当按下回车键时你最终会提交表单。

您可以为该项目是最后一个调用 $(this).parents("form").submit(); 的元素添加一个例外。而不是试图找到下一个元素并显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:50:30.660

带有触发新输入的锚点

```
$(document).on('click','a.more-inputs',function(){
    $lastInput = $(this).prev('input[type="text"]'); //anchor should be next element of present input otherwise use a different selector input.one-more:last-child or so
    if($lastInput.val() && $lastInput){
        $(this).before($lastInput.clone().val(''));//anchor should be where last comment says or else use different code
        }
    else{
        $lastInput.focus();
        }
    return false;
    }); 
```

填充输入的模糊事件触发新输入

```
$(document).on('blur','input[type="text"].one-more',function(){
    $lastInput = $(this);
    if($lastInput.val() && $lastInput){
        $(this).after($lastInput.clone().val(''));
        }
    else{
        $lastInput.focus(); //fill this before getting next one
        }
    return false;
    }); 
```

用输入键按下当前输入触发新输入

```
$(document).on('keypress','input[type="text"].one-more',function(e){
    if(e.keyCode == 13){
     $lastInput = $(this);
      if($lastInput.val() && $lastInput){
        $(this).after($lastInput.clone().val(''));
        }
     else{
        $lastInput.focus(); //fill this before getting next one
        }
    }
    return false;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:43:01.453

我建议在表单中包含所有输入，并在用户完成输入后简单地隐藏和显示。

```
$("#next").click(function() {        
    $("input").hide();
    $("input").eq(++currentIndex).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:48:00.450

您可以渲染整个表单，将每个表单元素包装在一个 div 中：

```
<form>
  <div class="control-wrap">
    <label for="a">Field label</label>
    <input type="text" name="a">
  </div>
  <div class="control-wrap">
    <label for="b">Second Field label</label>
    <input type="text" name="b">
  </div>
  ...
</form> 
```

隐藏除第一个之外的所有包装器，并且当用户模糊每个元素时，显示下一个，但前提是（1）下一个表单元素仍然隐藏，并且（2）用户在字段中输入了一些内容。

```
$('.control-wrap').hide().eq(0).show();
$('input').on('blur',function(e){
  var input = $(this);
    if(input.val().length > 0) {
      input.parents('.control-wrap').next('.control-wrap:hidden').show().find('input').focus();
    }            
}); 
```

这过于简单化了，只适用于文本字段，但希望它可以作为一个起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:49:10.357

试试这个

```
 $(document).ready(function(){
                $('input:text').keypress(function(e){

                    var code = (e.keyCode ? e.keyCode : e.which);
                     if(code == 13) { //Enter keycode
                       $(this).next().show();
                       $(this).hide();
                     }
                });

            }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T19:49:22.033

[这样的](http://jsfiddle.net/sKK3G/1/)事情可以让你开始。

# c# - 找不到我的 CLR 项目的 System.ServiceModel 参考

> ID：11162976
> 
> 赞同：1
> 
> 时间：2012-06-22T19:36:54.880
> 
> 标签：c#, .net, reference, clr, sqlclr

我正在尝试在我的 CLR 项目中添加 System.ServiceModel 引用。当我在我的 CLR 项目上单击“添加引用”时，我在尝试执行此操作时弹出的窗口中看到的只是项目和 SQL Server 选项卡。在 SQL Server 选项卡下没有 System.ServiceModel 引用。无论我将项目定位到什么框架，我都看不到 System.ServiceModel 参考。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:28:03.187

实际上，我不确定您是否应该有能力做到这一点。至少，在VS2010中我不能这样做，我工作的同事也不能这样做。您只能看到 SQL 和 Project 选项卡，并且您在项目引用中获得 ServiceModel 引用的唯一时间是您将服务引用添加到实际的 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:03:52.487

尝试这个：

[http://community.aspnix.com/windows-manuals-tutorials-tos/1867-system-servicemodel-assembly-found.html](http://community.aspnix.com/windows-manuals-tutorials-tos/1867-system-servicemodel-assembly-found.html)

> 大家好，
> 
> 我今天在我的域中遇到了这个问题。经过一番调查，结果发现即使在服务器上安装了 .Net 3.0，IIS 似乎也没有找到执行 WCF 或 Cardspace 代码所需的 system.service 程序集。在服务器上运行 ServiceModelReg.exe（您必须要求支持人员为您执行此操作）可以解决问题。
> 
> 这是运行的完整命令：%WINDOWS%Microsoft.NETFrameworkv3.0Windows Communication FoundationServiceModelReg.exe /i /x
> 
> 完成此操作后，您的 Web 应用程序将能够为 system.servicemodel 程序集实例化对象。

我在自己的机器上找到了这个文件，应该可以解决问题。

# javascript - Accordian 隐藏/显示布局在 IE7 中无法正常工作

> ID：11162980
> 
> 赞同：0
> 
> 时间：2012-06-22T19:37:12.210
> 
> 标签：javascript, accordion, show-hide

我们网站上有这段代码，当您单击隐藏/显示按钮时，它会动态创建一个新的 div，其中包含隐藏（或显示）的其他视频。问题是在 IE7 中，缩略图没有正确加载到页面上 - 它们显示在链接文本的顶部而不是左侧，就像顶部手风琴 div 中的其余缩略图一样。

此页面上有一个示例：

[http://www.asme.org/kb/news---articles/media/2012/05/video-early-disease-detection-using-nanotechnology](http://www.asme.org/kb/news---articles/media/2012/05/video-early-disease-detection-using-nanotechnology)

我已经修复了一些 CSS 问题，但我认为这里的问题不是 CSS——而是 article.js 页面上的 JavaScript 代码。

任何人都可以指出我的解决方案的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:10:14.653

我认为您的问题是元素在插入图像时没有可见的容器，因此它将其扔到容器的最顶部，并且不遵守定义的规则。

我会在容器可见后插入它，或者尝试在向下滑动期间/之后更改特征......我知道这很笼统，但这是我目前最好的建议。我希望这会有所帮助。

# web-services - 从 PowerBuilder 中将 PowerBuilder Web 服务部署到 IIS 时遇到问题

> ID：11162990
> 
> 赞同：1
> 
> 时间：2012-06-22T19:37:56.717
> 
> 标签：web-services, iis-7, powerbuilder, powerbuilder-build-deploy

我在 PowerBuilder 12 中开发了一个 Web 服务。我可以使用项目绘制器将其推送到在我的本地计算机 (localhost) 上运行的 IIS 7，它工作正常。我也可以将它部署到 msi，将 msi 复制到服务器并安装它，它就可以工作了。我不能做的是从 PowerBuilder 中的画家直接部署到在 Web 服务器上运行的 IIS 7。当我尝试时，我得到：

```
Checking IIS server...
Deployed failed. 
```

和错误选项卡说：

```
IIS is not accessible. Please check the server address and port number. 
```

我已确保安装了 IIS 6 兼容性。有任何想法吗？

**更新**
根据 DisplacedGuy，我在服务器上安装了 Web Deploy 3.0。我还确保端口 8172 已打开。但我仍然收到相同的错误消息。

当我按下部署按钮时，我已经能够通过 Process Monitor 确定 PowerBuilder 正在执行的一些步骤。简化版：它正在创建一个复制到服务器的 vbs 文件。然后它在服务器上运行这个脚本。该脚本输出一个包含有关 IIS 的信息的文本文件。然后它将这个文本文件复制回我的电脑。正是在这一点上，我得到了“IIS 不可访问”的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T03:27:25.073

我最近遇到了同样的问题。我必须在远程 IIS 服务器上安装**Web Deploy**并确保**端口 8172**也已打开。一旦你这样做了，来自 PB 的发布就会很好地工作。

希望这可以帮助。

*编辑 10-31-12*我尝试将项目绘制器的“部署”选项卡中的 IIS 服务器地址更改为我知道不存在的 IIS 网站，例如 matrix/dummyfolder 以查看是否会收到与您相同的消息。我没有，消息是“在网络上找不到服务器“矩阵/fummyfolder”。我不认为这是问题，但我想我至少会为你尝试。

*编辑 11-2-12*以下是一些常见的 Web 部署问题/要求：

1.  您尝试连接的站点/应用程序的 IIS 管理器权限。通过 IIS 管理器设置，单击站点并设置部署属性。
2.  msdeploy 的委派规则，规定您可以执行 ContentPath 操作（请参阅[此](http://www.iis.net/learn/publish/using-web-deploy/configure-the-web-deployment-handler)）。
3.  对文件的实际文件系统/ACL 访问。

祝你好运。

# iphone - RestKit 和核心数据整数数组

> ID：11162994
> 
> 赞同：0
> 
> 时间：2012-06-22T19:38:22.927
> 
> 标签：iphone, ios, json, core-data, restkit

我的核心数据模型中有一个整数数组。它被设置为可变形的。

我从服务器返回的 JSON 为我提供了以下格式的数字列表：

```
{ "numbers": [10, 3, 2], "name": "John Smith" } 
```

我配置我的对象映射如下：

```
[dataMapping mapKeyPath:@"numbers" toAttribute:@"numberList"];
[dataMapping mapKeyPath:@"name" toAttribute:@"fullName"]; 
```

fullName 没有问题，它是一个字符串。

但是，加载对象后 numberList 仍然为空（所有常规参数都加载正常）。我在网上四处张望，但不知道要寻找什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:07:45.967

这听起来像是您的价值转换器的问题。试试这个，告诉我它是否有效。这是 ARC 代码。

。H

```
@interface NSArrayValueTransformer : NSValueTransformer

@end 
```

.m

```
#import "NSArrayValueTransformer.h"

@implementation NSArrayValueTransformer

+ (BOOL) allowsReverseTransformation {
    return YES;
}

+ (Class) transformedValueClass {
    return [NSData class];
}

- (id) transformedValue:(id)value {
    if( !value ) 
        return nil;

    if( [value isKindOfClass: [NSData class]] )
        return value;

    return [NSKeyedArchiver archivedDataWithRootObject: value];
}

- (id) reverseTransformedValue:(id)value {
    return [[NSKeyedUnarchiver unarchiveObjectWithData: value] mutableCopy];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T00:44:57.220

当我处理 json 时，预期的 keyPath 将类似于您示例中的“data.numbers”。

换句话说，您的 json 结果中的第一项仍然很重要。

# php - 如何使用来自 MySQL 的 5 个不同结果集填充 HTML 表中的 5 个不同列

> ID：11162995
> 
> 赞同：0
> 
> 时间：2012-06-22T19:38:30.257
> 
> 标签：php, mysql, for-loop

我有一个具有以下结构的表，让我们用字母命名标题：

```
A | B | C | D | E 
```

我想对我的 mysql 服务器执行 5 个不同的查询，我想以下列方式用它们填充整个表：

第一个结果集完成整个`A`列，然后用另一个结果我想完成 de column `B`，然后剩下的 3 个。

如果我使用 for 语句，for 以这种方式填充它们：在我回显表标题后，它开始填充 column的第二个`A`单元格，然后是 column 的第二个单元格`B`，然后是第二个单元格，`C`直到它完成整行。

我想要的是完成 column 的第一个单元格`A`，然后是 column 的第二个单元格`A`，然后是 column 的 3 个单元格，`A`依此类推。

当我完成整个专栏时。我想完成专栏`B`，然后`C`、`D`和`E`。

我希望我足够清楚。

我想用 PHP 并使用 for 循环来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:45:58.823

您是否尝试将此作为视觉效果？如果是这种情况，最好先加载所有单元格，然后将它们放入带有 Visible="false" 的标签中，然后使用 JQuery 并按 A 列和单元格然后按 B 和按单元格等顺序返回并设置为可见="true" 给出填充列 a 然后 b 的滚动效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:47:44.607

我的第一个想法是在循环第一列值时布局整个表格。因此，当您转储该值时，还要为该行添加空单元格。

```
<table>
<tr>
<td>Value 1</td><td></td><td></td><td></td>
</tr> 
```

然后，当您遍历后续列值时，使用 jquery 将它们放在正确的单元格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T05:28:13.967

我刚刚发布了一个非常相似问题的答案和示例代码。它假设您只有 1 个数据集，但希望将其显示在列中。您可以在此处找到答案： [是否可以按列填充值？](https://stackoverflow.com/questions/18111815/is-it-possible-to-fill-a-table-with-values-in-column-wise/21036717#21036717) 如果你喜欢这个答案，请投票。

# java - 在 Java 中验证 NTLMv2 身份验证

> ID：11162996
> 
> 赞同：2
> 
> 时间：2012-06-22T19:38:46.510
> 
> 标签：java, authentication, netbeans, ntlm, ntlmv2

所以我试图用 NTLMv2 和 Java 找出一个奇怪的错误。似乎 NTLM 忽略了我在基于 Java 的身份验证期间传入的任何信息，并在其他地方找到了这些信息。因此，即使我提供了不正确的信息，NTLM 也会在我的机器上进行身份验证，并且即使提供了正确的信息，它也不会在任何其他机器上工作。如果相关，端点是 MOSS 2007 Web 服务 API。

这是我用来进行身份验证的过程：

1) 传入目标站点和登录信息。

```
try {
    JLists list = new JLists(siteUrl, DEFAULT_SP_USERNAME,
        DEFAULT_SP_PASSWORD);
    list.addList(name, description, 101);

} catch (Exception e) {
     e.printStackTrace();
} 
```

2）将默认身份验证器设置为我自己的NTLMAuthenticator，创建服务存根并传入登录信息。

```
public JLists(String siteURI, String username, String password)
        throws Exception {

    String endpointURI = siteURI + "/_vti_bin/Lists.asmx";

    Authenticator.setDefault(new NtlmAuthenticator(username, password));

    port = sharePointListsAuth(username, password);
    BindingProvider bp = (BindingProvider) port;
    bp.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
            endpointURI);
}

private ListsSoap sharePointListsAuth(String userName, String password) throws Exception {
    ListsSoap port = null;
    if (userName != null && password != null) {
        try {
            service = new Lists();
            port = service.getListsSoap();
            ((BindingProvider) port).getRequestContext().put(BindingProvider.USERNAME_PROPERTY, userName);
            ((BindingProvider) port).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, password);
        } catch (Exception e) {
            throw new Exception("Error: " + e.toString());
        }
    } else {
        throw new Exception("Couldn't authenticate: Invalid connection details given.");
    }
    return port;
} 
```

这是 NTLMAuthenticator 类的副本：

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;

class NtlmAuthenticator extends Authenticator {

  private final String username;
  private final char[] password;

  public NtlmAuthenticator(final String username, final String password) {
    super();
    this.username = username;
    this.password = password.toCharArray(); 
  }

  public PasswordAuthentication getPasswordAuthentication() {
    return (new PasswordAuthentication (username, password));
  }
} 
```

3) 拨打我的服务电话。我在这部分并没有真正遇到任何问题，但如果有人需要代码，我也会发布它。

我觉得 Java 以某种方式引用了我的 Active Directory 信息，并使用它来代替提供的信息，但我不知道在什么时候会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:10:16.817

问题似乎是基于 Java 的“单点登录”功能。因为我在 Windows 机器上尝试 NTLM 身份验证，Java 有一个硬编码值，默认为当前帐户的登录信息，然后仅在失败时使用 Java Authenticator。

如果不反编译Java源并自己修改该变量，似乎没有办法绕过这个问题，但幸运的是，在我的应用程序的最终情况下不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T05:54:08.003

你可以提供你自己的

```
public class Handler extends jdk6.sun.net.www.protocol.http.Handler 
```

通过一些反射，您可以获得 HttpURLConnection 类的字段，并对其进行修改。

```
field.setAccessible( true );
field.setBoolean( connection, false ); 
```

字段是“tryTransparentNTLMServer”和“tryTransparentNTLMProxy”；

# c++ - icpc（或我猜是gcc）的预处理输出中的包含路径/数字是什么意思？

> ID：11162998
> 
> 赞同：0
> 
> 时间：2012-06-22T19:38:49.817
> 
> 标签：c++, include, c-preprocessor, compiler-flags

如果我在编译时使用 -E 标志，我会得到预处理的输出。

此输出中的某些行是：-

```
# 4 "../Framework.h" 2
# 1 "../Basic.h" 1
# 1 "/usr/include/c++/4.1.2/queue" 1 3 
```

这是什么意思？您是否可以向我指出更多信息的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:53:32.117

它们是有关已处理代码的编译器（如果编译器生成调试信息，则为调试器）的信息。我不知道确切的语法，但它们会告知包含路径、包含文件中“#include”指令的位置以及包含文件中预处理器未删除的下一行的位置。使用该信息（并计算未注释的行），编译器可以为您提供诊断，将您指向正确的行以及它是如何包含在内的。