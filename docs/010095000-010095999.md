# StackOverflow 问答 10095000-10095999

# freepascal - Pascal 将列表视图从主窗体传递到非模态窗体

> ID：10095001
> 
> 赞同：2
> 
> 时间：2012-04-10T19:16:54.223
> 
> 标签：freepascal, lazarus

我的主窗体中有一个列表视图，我希望另一个非模态窗体能够添加内容。我如何将列表视图传递给非模态表单？我希望能够修改它的表单由 MainForm 在单击按钮时显示，只需使用 Form.Show。

我还应该澄清一下，我希望表单不使用主表单以避免循环引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:21:06.680

**注意：**该问题最初标记为 Delphi。我不知道 FPC/Lazarus，所以下面的一些细节可能不准确，但这些概念仍然有效。

* * *

我猜你有一个代表主要形式的全局变量，`MainForm`为了论证而命名。最快和最简单的方法是简单地使用`MainForm.ListView`让您的其他表单引用主表单的列表视图。

我对这种方法并不十分热衷，因为这意味着另一种形式依赖于主形式的实现。

* * *

作为替代方案，您可以将对列表视图的引用传递给其他表单。例如，您可以`SetListView`在其他表单中添加一个过程：

```
type
  TMyOtherForm = class(TForm)
  private
    FListView: TListView;
  public
    procedure SetListView(Value: TListView);
  end;
.....
procedure TMyOtherForm.SetListView(Value: TListView);
begin
  FListView := Value;
end; 
```

然后在主窗体中，可能在主窗体的`OnCreate`事件处理程序中，您可以调用此方法：

```
procedure TMainForm.FormCreate(Sender: TObject);
begin
  MyOtherForm.SetListView(ListView);
end; 
```

这并不比第一个建议好多少。另一种形式仍然依赖于主要形式的实现，尽管可以说是一种不太重要的依赖关系。

* * *

如果您想让这两个表单的耦合度更低，那么主表单可以公开一个接受添加到列表中的方法：

```
procedure TMainForm.AddToList(const Name: sting; const Time: TDateTime);
var
  Item: TListItem;
begin
  Item := ListView.Items.Add;
  Item.Caption := Name;
  Item.SubItems.Add(DateTimeToStr(Time));
end; 
```

在您的其他表单单元中，您将主表单单元添加到实施部分的使用子句中。这允许您访问`MainForm`全局变量，您可以调用

```
MainForm.AddToList(Name, Time); 
```

这种方法在我看来是最好的，因为它允许主窗体将其列表实现保持为自己私有。

* * *

您在评论中声明您希望避免由于`uses`子句引起的任何循环引用。这很容易安排，因为上述任何一项都不需要修改`uses`来自两个单元的接口部分的子句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:24:57.833

最简单和最好的方法是向接收表单添加一个方法——即上面带有 ListView 的表单——上面写着“AddThingsToListView”，并让它接受你想要添加的东西（可能是一个 TListItem？）

这样，您就可以调用

```
MyMainForm.AddThingsToListView(ANewListItem); 
```

从任何地方。

换句话说，不要将列表视图传递给非模态表单；相反，让主窗体能够接受对其列表视图的添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:22:28.633

我做什么：对于这种情况：我通常声明一个数据模块，并将大部分不适合非GUI库单元的代码放入数据模块中。数据模块可以引用表单，反之亦然，但没有一个表单相互引用。

在此示例中，您的 Form2 可以使用 DataModule，您可以执行以下任一操作：

1.  在数据模块中有一个对 MainForm 的 ListView 的全局引用，并从您的表单中使用它。
2.  在数据模块中有一个函数/类，可让您更新列表，并从表单中调用它。

无论哪种方式，您的表单只需要知道数据模块，其余的由数据模块完成。您可以添加/删除/更改表单，通常您只需更新 DM。

# centos - CentOS 5.8 上的 EPL 问题

> ID：10095003
> 
> 赞同：0
> 
> 时间：2012-04-10T19:17:04.523
> 
> 标签：centos, rpm, epl

我正在尝试在 CentOS 5.8 64 位机器上安装 R。我正在尝试获取 rpm，但收到“未知或意外错误”的错误消息。这是我正在使用的 sudo rpm -Uvh [http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm](http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:59:42.600

这是我找到问题答案的地方。 [http://www.geekdevs.com/2011/09/solved-fedora-release-conflicts-with-epel-release-5-4-noarch-on-fedora-15/](http://www.geekdevs.com/2011/09/solved-fedora-release-conflicts-with-epel-release-5-4-noarch-on-fedora-15/)

# asp.net-mvc-3 - 在 MVC 3 中使用多选列表

> ID：10095005
> 
> 赞同：0
> 
> 时间：2012-04-10T19:17:09.767
> 
> 标签：asp.net-mvc-3, multi-select

现在，我正在处理 MVC 3 中的多选列表。今天早些时候，我克服了一个很大的障碍，即使用数据库中的版本数据填充下拉列表。问题是它显示了表格列 VERSION 中的每个项目。我知道这是一个简单的修复，但我似乎无法弄清楚.... 我在想我所要做的就是添加一个带有枚举器的 if 语句，该语句类似于以下伪代码。

```
while VERSION <> null 
if version = version 
then don't display version
end while 
```

目前它正在显示所有 387 行版本，我需要它显示的是版本的第一个实例，所以如果版本是 1.5，它只显示第一个，所以我可以抓住它作为另一条记录，我希望这能让感觉。我在下面包含了我的控制器类和我的编辑类。如果您需要我的任何其他课程进行诊断，请告诉我。感谢您的帮助！

## 编辑 04/11/12

看来我需要澄清一些我的要求，所以这是我为你们做的尝试。

我需要帮助的是修复 selectList 代码，因此它只返回 VERSION 的第一个实例。当我单击下拉列表时，它会填充 VERSION 列中的每一行，这意味着我在下拉列表中有 385 个实例，表示版本 1.2 和两个 1.3 实例。我想做的是用版本 1.2 和 1.3 的两个实例填充下拉列表。请帮助如果我有更多积分，我会提供赏金，但我是新手，所以我只能说，如果你能提供帮助，我保证会投票！谢谢你的帮助！

## 控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Web.UI.WebControls;
using System.Web;
using System.Web.Mvc;
using DBFirstMVC.Models;
using System.Data;
using PagedList;
using PagedList.Mvc;
using DBFirstMVC.Controllers;
using System.IO;
using DBFirstMVC;
using System.Web.UI;

namespace DBFirstMVC.Controllers

{
    public class PaController : Controller
    {
        PaEntities db = new PaEntities();

        // Index Method 
        public ViewResult Index(string sortOrder, string currentFilter, string     searchString, int? page)
        {
            ViewBag.CurrentSort = sortOrder; //ViewBag property provides the view with the current sort order
            ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "PA desc" : ""; // Calls the sortOrder switch/case PA desc or default 
            ViewBag.MPSortParm = sortOrder == "MP" ? "MP desc" : "MP asc"; // Calls the sortOrder switch/case MP desc or MP asc
            ViewBag.IASortParm = sortOrder == "IA" ? "IA desc" : "IA asc"; // Calls the sortOrder switch/case IA desc or IA asc
            ViewBag.VersionSortParm = sortOrder == "VERSION" ? "Version desc" : "Version asc"; // Calls the sortOrder switch/case Version desc or Version asc
            ViewBag.IAMP_PKSortParm = sortOrder == "IAMP_PK" ? "IAMP_PK desc" : "IAMP_PK asc"; // Calls the sortOrder switch/case IAMP_PK desc or IAMP_PK asc

            if (Request.HttpMethod == "GET") 
            {
                searchString = currentFilter; //sets the currentFilter equal to Searchstring
            }
            else
            {
                page = 1;                   // defaults to page 1
            }
            ViewBag.CurrentFilter = searchString; // Provides the view with the current filter string

            var IAMP = from p in db.iamp_mapping select p;

            if (!String.IsNullOrEmpty(searchString))
            {
                IAMP = IAMP.Where(p => p.PA.ToUpper().Contains(searchString.ToUpper())); //selects only records that contains the search string
            }

            switch (sortOrder) // switch case changes based on desired sort 
            {
                case "Pa desc":
                    IAMP = IAMP.OrderByDescending(p => p.PA);
                    break;
                case "MP desc":
                    IAMP = IAMP.OrderByDescending(p =>p.MAJOR_PROGRAM);
                    break;
                case "MP asc":
                    IAMP = IAMP.OrderBy(p =>p.MAJOR_PROGRAM);
                    break;
                case "IA desc":
                    IAMP = IAMP.OrderByDescending(p => p.INVESTMENT_AREA);
                    break;
                case "IA asc":
                    IAMP = IAMP.OrderBy(p => p.INVESTMENT_AREA);
                    break;
                case "Version asc":
                    IAMP = IAMP.OrderBy(p => p.VERSION);
                    break;
                case "Version desc":
                    IAMP = IAMP.OrderByDescending(p => p.VERSION);
                    break;
                case "IAMP_PK asc":
                    IAMP = IAMP.OrderBy(p => p.IAMP_PK);
                    break;
                case "IAMP_PK desc":
                    IAMP = IAMP.OrderByDescending(p => p.IAMP_PK);
                    break;
                default:
                    IAMP = IAMP.OrderBy(p => p.PA);
                    break;
            }
            int pageSize = 15; // number of records shown
            int pageNumber = (page ?? 1); // start page number

            return View(IAMP.ToPagedList(pageNumber, pageSize)); // uses pagedList method to return correct page values
        }

        // Instantiates create method
        // GET: /Pa/Create

        public ActionResult Create()
        {
            SetVersionViewBag();
            return View();
        }

        // Create method adds records to Database and saves changes 
        // POST: /Pa/Create

        [HttpPost]
        public ActionResult Create(iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    db.iamp_mapping.Add(IAMP);
                    db.SaveChanges();
                }

                return RedirectToAction("Index");
            }
            catch
            {
                ViewBag.VERSION = new MultiSelectList(db.iamp_mapping, "VERSION", "VERSION", IAMP.VERSION);
                return View(IAMP);
            }
        }

        // Instantiates Edit Method
        // GET: /Pa/Edit/5

        public ActionResult Edit(string id)
        {

            using (var db = new PaEntities())
            {
                iamp_mapping IAMP = db.iamp_mapping.Find(id);
                SetVersionViewBag(IAMP.VERSION);
                return View(IAMP);
            }
        }

        // Edit method modifies existing records and saves changes
        // POST: /Pa/Edit/5

        [HttpPost]
        public ActionResult Edit(string id, iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    db.Entry(IAMP).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("");
                }
            }
            catch
            {
                SetVersionViewBag(IAMP.VERSION);
                return View(IAMP);
            }
        }

        // Instantiates delete method
        // GET: /Pa/Delete/5

        public ActionResult Delete(string id)
        {
            using (var db = new PaEntities())
            {

                return View(db.iamp_mapping.Find(id));
            }
        }

        // Delete method renames primary key and then removes record from database
        // POST: /Pa/Delete/5

        [HttpPost]
        public ActionResult Delete(string id, iamp_mapping IAMP)
        {
            try
            {
                using (var db = new PaEntities())
                {
                    var vIAMP = db.iamp_mapping.Find(id);
                    db.Entry(vIAMP).State = EntityState.Deleted;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }

            }
            catch (Exception e)
            {
                throw (e);
                //return View();
            }
        }
        public ActionResult IAMP_Mapping(iamp_mapping IAMP)
        {
            var iamp_mapping = db.iamp_mapping as IEnumerable<iamp_mapping>;
            var grid = new GridView
            {
                DataSource = from p in iamp_mapping
                             select new
                             {
                                 PA = p.PA,
                                 MP = p.MAJOR_PROGRAM,
                                 IA = p.INVESTMENT_AREA,
                                 VERSION = p.VERSION,
                                 IAMP_PK = p.IAMP_PK
                             }
            };
            grid.DataBind();

            Response.ClearContent();
            Response.AddHeader("content-dispostion", "inline; filename= Excel.xls");

            Response.ContentType = "application/vnd.ms-excel";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            grid.RenderControl(htw);
            Response.Write(sw.ToString());
            Response.End();
            return View("Index");
        }

        public ActionResult SelectVersion() {
            List<SelectListItem> versions = new List<SelectListItem>();

            versions.Add(new SelectListItem { Text = "Action", Value = "0" });

            versions.Add(new SelectListItem { Text = "Drama", Value = "1" });

            versions.Add(new SelectListItem { Text = "Comedy", Value = "2", Selected = true });

            versions.Add(new SelectListItem { Text = "Science Fiction", Value = "3" });

            ViewBag.VersionType = versions;

            return View();

            }
        public ViewResult VersionChosen(string VersionType)
        {
            ViewBag.messageString = VersionType;
            return View("Information");
        }

        public enum eVersionCategories { Action, Drama, Comedy, Science_Fiction };

        private void SetViewBagVersionType(eVersionCategories selectedVersion)
        {

            IEnumerable<eVersionCategories> values =
                Enum.GetValues(typeof(eVersionCategories))

                .Cast<eVersionCategories>();

            IEnumerable<SelectListItem> versions =
                from value in values
                select new SelectListItem
                {
                    Text = value.ToString(),

                    Value = value.ToString(),

                    Selected = value == selectedVersion,
                };

            ViewBag.VersionType = versions;

        }

        public ActionResult SelectVersionEnum()
        {

            SetViewBagVersionType(eVersionCategories.Drama);

            return View("SelectVersion");

        }

        public ActionResult SelectVersionEnumPost()
        {

            SetViewBagVersionType(eVersionCategories.Comedy);

            return View();

        }

        [HttpPost]

        public ActionResult SelectVersionEnumPost(eVersionCategories VersionType)
        {

            ViewBag.messageString = VersionType.ToString() + " val = " + (int)VersionType;

            return View("Information");
        }

        private void SetVersionViewBag(string VERSION = null)
        {

            if (VERSION == null)
                ViewBag.VERSION = new MultiSelectList(db.iamp_mapping, "VERSION", "VERSION");
            else
                ViewBag.VERSION = new MultiSelectList(db.iamp_mapping.ToArray(), "VERSION", "VERSION", VERSION);

        }

    }
} 
```

## 编辑.CSHTML

```
@model DBFirstMVC.Models.iamp_mapping

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {

    @Html.ValidationSummary(true)
    <fieldset>
        <legend>iamp_mapping</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.PA)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PA)
            @Html.ValidationMessageFor(model => model.PA)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.MAJOR_PROGRAM)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.MAJOR_PROGRAM)
            @Html.ValidationMessageFor(model => model.MAJOR_PROGRAM)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.INVESTMENT_AREA)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.INVESTMENT_AREA)
            @Html.ValidationMessageFor(model => model.INVESTMENT_AREA)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.VERSION)
        </div>
        <div class="editor-field">

            @Html.DropDownList("Version", ViewBag.Version as MultiSelectList)
            @Html.ValidationMessageFor(model => model.VERSION)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IAMP_PK)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IAMP_PK)
            @Html.ValidationMessageFor(model => model.IAMP_PK)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "")
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:21:07.133

```
SELECT DISTINCT
     Version
FROM YourTable 
```

这将为您提供不同的版本列表。目前尚不清楚您希望对控制器和视图提供什么帮助。

编辑：

或者，如果您想在控制器中使用 linq（假设 Version 是 db.iamp_mapping 的属性）

```
db.iamp_mapping.Select(x => new iamp_mapping{Version = x.Version}).Distinct().ToList(); 
```

# asp.net-mvc - 集成测试设计

> ID：10095006
> 
> 赞同：0
> 
> 时间：2012-04-10T19:17:10.997
> 
> 标签：asp.net-mvc, testing, integration-testing

我想为我的应用程序编写一些集成测试。我无法找到有关此主题的示例的相关信息，所以我在这里问。

让我们有一个带有简单 CRUD 场景的控制器。

有创建方法、编辑方法和删除方法。

我的问题是如何设计测试用例。

我在想两种方法来测试它。

1.

*   测试 1 创建项目 - 只需插入一个项目
*   测试 2 编辑项目 - 从第一个测试加载项目并进行编辑
*   测试 3 删除项目 - 删除测试 2 和 3 中使用的项目。

在这种情况下，所有测试更像是一个大测试用例。

1.  *   测试 1 创建项目 - 插入一个项目，检查它是否存在并删除它。
    *   测试 2 编辑项目 - 插入项目，加载项目，编辑并删除项目。
    *   测试 3 删除项目 - 插入项目并删除项目

在这种情况下，测试看起来是独立的，但它们有一些重复的部分（插入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:42:28.640

完成 CRUD（创建、读取、更新、删除）测试以确保系统正在执行 CRUD 活动，例如创建、检索、更新和删除。

在 CRUD 场景中，测试用例相互依赖，因此要测试 CURD 场景，您需要编写或检查以下内容 -

步骤 1 - 您是否能够创建或添加数据？

第 2 步 - 您是否能够读取或访问已保存或插入的数据？

步骤 3 - 您是否能够删除数据及其关系。

您还可以使用一些自动化工具，例如 Watij 或 Selenium。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:24:29.363

对于您描述的 CRUD 场景，可以使用三个单独的数据库事务及其关联的断言来实现测试。

第 1 步 - 插入项目

第 2 步 - 断言项目已成功插入

第 3 步 - 编辑项目

第 4 步 - 断言项目已成功编辑

第 5 步 - 删除项目

第 6 步 - 断言该项目已成功删除

# linux - 再次将交换发送到内存的命令

> ID：10095011
> 
> 赞同：0
> 
> 时间：2012-04-10T19:17:37.307
> 
> 标签：linux, memory, swap

有没有办法将交换的内存发送回主内存？

**编辑：**我有一个运行并吃掉所有内存的进程，所以现在，每次我使用另一个应用程序时，它都会有一些东西在交换中，所以重新加载到内存需要时间。现在消耗内存的过程已经停止，我想**强制**让所有的东西再次进入内存。所以我只会等待一次，让那些在内存中的东西再次交换到内存中，而不是每次我重用打开的应用程序时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:23:02.957

不直接；此外，通常您不想这样做，因为通常交换的是不再需要的部分（初始化代码）。解决这个问题的唯一方法是要求内核禁用交换区域，即使那样也不是立即的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:21:26.270

内核会在需要时自动、透明地将数据交换回 RAM。

您可以避免使用`mlock()`or被换出`mlockall()`，但您可能不应该这样做。如果您的应用程序最终被换出，则可能是使用了太多内存，或者机器中的内存太少，或者正在运行的进程太多。您的应用使用`mlock()`.

# php - 使用 php 配置文件连接数据库而不是 PDO 连接线

> ID：10095022
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:18:11.253
> 
> 标签：php, mysql, pdo

我有以下几行用于数据库连接的代码，但是我只想使用我的 include("config.php") 而不是这长长的代码行，我将如何去做

```
try {
    $dbh = new PDO('mysql:host=localhost;dbname=lms;charset=UTF-8', 'root', 'password');
}
catch (PDOException $e) {
    die('unable to connect to database ' . $e->getMessage());
}    

// create LM object, pass in PDO connection
$lm = new lazy_mofo($dbh); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:21:19.833

只需要创建一个config.php文件，比如假设这个文件存放在web根目录( `/var/www/`)中，那么config.php的内容是这样的：

```
<?php

    try {
        $dbh = new PDO('mysql:host=localhost;dbname=lms;charset=UTF-8', 'root', 'password');
    }
    catch (PDOException $e) {
        die('unable to connect to database ' . $e->getMessage());
    }    

    // create LM object, pass in PDO connection
    $lm = new lazy_mofo($dbh);

?> 
```

然后在您的其他 PHP 脚本中使用该`include`函数：

```
<?php

    include '/var/www/config.php';
    ... 
```

现在在您的 PHP 脚本中，您可以访问`$lm`对象和`$dbh`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:20:48.490

例如`include("config.inc.php")`对于 config.inc.php：

```
<?php
try {
    $dbh = new PDO('mysql:host=localhost;dbname=lms;charset=UTF-8', 'root', 'password');
}
catch (PDOException $e) {
    die('unable to connect to database ' . $e->getMessage());
}
$lm = new lazy_mofo($dbh); 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:52:11.840

你可以在你的包含文件中创建一个 db 包装类，然后真的很懒惰=）

```
 define('DB_TYPE', 'mysql');
    define('DB_HOST', 'localhost');
    define('DB_NAME', 'lms');
    define('DB_USER', 'root');
    define('DB_PASS', 'password');

    class Database{

        public function __construct() {

            $db = new PDO(DB_TYPE.':host='.DB_HOST.';dbname='.DB_NAME, DB_USER, DB_PASS);
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }

    }

    $o = new Database(); 
```

# vba - 当单元格值为#N/A 时如何隐藏列 (G-AZ)

> ID：10095024
> 
> 赞同：0
> 
> 时间：2012-04-10T19:18:11.633
> 
> 标签：vba, excel, vlookup

我目前有一个用标题填充第 1 行（单元格 G1-AZ1）的 vlookup，如果 vlookup 没有任何结果/#N/A，我想隐藏列（G1-AZ1）。我知道这是一个简单的宏，但我是 VBA 的新手，我在网上搜索的运气为零。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:43:52.057

尝试这个：

1.  循环遍历标题单元格
2.  `EntireColumn.Hidden`根据您的条件设置属性
3.  用于`.ScreenUpdating = False`防止屏幕闪烁和加速

* * *

```
Sub HideColumns()
    Dim rng As Range
    Dim cl As Range

    Application.ScreenUpdating = False
    Set rng = [G1:AZ1]
    For Each cl In rng
        If IsError(cl) Then
            cl.EntireColumn.Hidden = cl = CVErr(xlErrNA)
        Else
            cl.EntireColumn.Hidden = cl = ""
        End If
    Next
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:23:38.403

我通常将这些公式放在*ISNA()*中，然后只使用 Excel 过滤器来隐藏空行

```
=IF(ISNA(VLOOKUP(A3,G1:H7,2,FALSE)),"",VLOOKUP(A3,G1:H7,2,FALSE)) 
```

# sql-server - 递归顺序 (SQL Server CTE)

> ID：10095032
> 
> 赞同：2
> 
> 时间：2012-04-10T19:18:51.290
> 
> 标签：sql-server, recursion, common-table-expression, with-statement

我可以通过使用 SQL Server 的 With 命令 (CTE) 来实现递归。

```
WITH MyCTE(ParentID,ID,Name,Level)
AS
(
SELECT ManagerID AS ParentID, UserID AS ID, UserName AS Name, 0 AS Level 
FROM USERS U       
WHERE U.ManagerID IS NULL

UNION ALL

SELECT U.ManagerID AS ParentID, U.UserID AS ID, U.UserName AS Name, H.Level+1 AS Level
FROM USERS U
INNER JOIN MyCTE H ON H.ID = U.ManagerID
)

SELECT ParentID,ID FROM MyCTE 
```

返回

```
ParentID    ID
NULL        1
1           2
1           3
2           4 
```

我想要实现的是反转这个结果集。即，将根节点和最深的子节点反转为，

```
ParentID    ID
NULL        4
4           2
2           1
3           1 
```

无法弄清楚如何以编程方式实现这一点（最好使用 CTE），例如使用参数来确定递归顺序等。非常感谢任何帮助，谢谢。

编辑 ：

稍微修改一下，将我的第一个 CTE 的结果插入到临时表中，然后使用另一个递归我将顺序反转为（我知道“WHERE T.ID = (SELECT MAX(ID) FROM @tmp)”在实际情况下不起作用，我还必须用“Level”列确定最深的节点，只是为了简化这个例子），

```
 INSERT INTO @tmp
 SELECT ParentID,ID,Level FROM MyCTE
 WITH MyCTE2(ParentID,ID,Level)
 AS
 (
 SELECT NULL AS ParentID, ID AS ID, 0 AS Level FROM @tmp T 
 WHERE T.ID = (SELECT MAX(ID) FROM @tmp)

 UNION ALL

 SELECT R2.ID AS ParentID, T.ParentID AS ID, R2.Level+1 FROM @tmp T
 INNER JOIN MyCTE2 R2 ON R2.ID = T.ID
 WHERE T.ParentID IS NOT NULL
 ) 
```

原始结果（删除了 1,3 对）

```
ParentID   ID   Level
  NULL      1     0
    1       2     1
    2       4     2 
```

结果反转，

```
ParentID   ID   Level
  NULL      4     0
    4       2     1
    2       1     2 
```

编辑2：

我做了这样的事情，

```
SELECT TTT.ParentID,TTT.ID,TTT.Level FROM
(
SELECT ParentID,ID,Level FROM MyCTE2
UNION ALL
SELECT TT.ID AS ParentID,TT.ParentID AS ID,(SELECT Level+1 FROM @tmp WHERE ID=TT.ID) 
AS  Level  FROM
(
SELECT ID FROM @tmp
EXCEPT
SELECT ID FROM MyCTE2
)T INNER JOIN @tmp TT ON TT.ID = T.ID
)TTT
ORDER BY TTT.Level 
```

给，

```
ParentID    ID  Level
NULL        4   0
4           2   1
2           1   2
3           1   2 
```

这可能包含错误，我还不确定，只是想显示以确保对 (3,1) 对 2 级是否正确？想了很久，可能会犯一些愚蠢的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:02:31.067

样本数据

```
declare @T table
(
  ParentID int,
  ID int
)

insert into @T values
(NULL,        1),
(1   ,        2),
(1   ,        3),
(2   ,        4) 
```

从根递归：

```
;with C as
(
  select ParentID, ID
  from @T
  where ParentID is null
  union all
  select T.ParentID, T.ID
  from @T as T
    inner join C
      on T.ParentID = C.ID
)
select *
from C 
```

结果

```
ParentID    ID
----------- -----------
NULL        1
1           2
1           3
2           4 
```

从叶子递归：

```
;with C as
(
  select null as PParentID, ID, ParentID
  from @T
  where ID not in (select ParentID 
                   from @T 
                   where ParentID is not null)
  union all
  select C.ID, T.ID, T.ParentID 
  from @T as T
    inner join C
      on T.ID = C.ParentID 
)
select distinct
       PParentID as ParentID,
       ID
from C 
```

结果：

```
ParentID    ID
----------- -----------
NULL        3
NULL        4
4           2
2           1
3           1 
```

如果您有许多分支，您将有重复的行合并在一起。使用`distinct`可以解决这个问题。

要获得正确的级别，您需要首先从上到下计算级别。将其存储在表变量（或临时表）中，然后将其用作叶->根递归的源。

```
-- Primary key and unique is in there to get the indexes used in the recursion  
declare @T2 table
(
  ParentID int,
  ID int,
  Level int,
  primary key (ID),
  unique(ParentID, ID)
)

;with C as
(
  select ParentID, ID, 0 as Level
  from @T
  where ParentID is null
  union all
  select T.ParentID, T.ID, Level + 1
  from @T as T
    inner join C
      on T.ParentID = C.ID
)
insert into @T2
select ParentID, ID, Level
from C

;with C as
(
  select null as PParentID, ID, ParentID, Level
  from @T2
  where ID not in (select ParentID 
                   from @T2 
                   where ParentID is not null)
  union all
  select C.ID, T.ID, T.ParentID, T.Level
  from @T2 as T
    inner join C
      on T.ID = C.ParentID 
)
select distinct
       PParentID as ParentID,
       ID,
       max(Level) over() - Level as level
from C 
```

结果：

```
ParentID    ID          level
----------- ----------- -----------
NULL        3           1
NULL        4           0
2           1           2
3           1           2
4           2           1 
```

用多 CTE 查询替换 @T2 是可能的，但这是一个非常糟糕的主意。它会降低性能，因为每次递归都会重建第一个 CTE。至少这是我对正在发生的事情的猜测，但相信我这并不快。

# backbone.js - 无法让 Backbone.Router 与咖啡脚本一起使用

> ID：10095035
> 
> 赞同：2
> 
> 时间：2012-04-10T19:19:00.990
> 
> 标签：backbone.js, coffeescript

这让我现在快疯了。我无法让一个简单的路由器工作......

```
 jQuery ->
        class MyRouter extends Backbone.Router
            routes:
              ""            :"index"
              "/list"       :"showList"
              "/item/:id"   :"showItem"
            index: =>
              alert "index"
            showList: =>
              alert "get the lists"
            showItem: (id)=>
              alert "the item #{id}"

         @app = window ? {}
         @app = window.app ? {}
         @app.myRouter = MyRouter
         Backbone.history.start() 
```

我总是收到这个错误： `index.js:50Uncaught TypeError: Cannot call method 'start' of undefined`

我看到了这个：[启动backbone.js历史时无法调用未定义的'start'。](https://stackoverflow.com/questions/7343357/cannot-call-start-of-undefined-when-starting-backbone-js-history)

但这并没有帮助=（...

我相信这很容易，但我有点卡在这里......请帮助......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:20:17.653

您没有创建 Backbone.Router 的实例，因此`Backbone.history.start()`会失败。

```
@app.myRouter = new MyRouter() 
```

您发布的链接确切地告诉您问题所在：

> TypeError：无法调用未定义的方法“开始”**
> 
> 嗯，出于某种原因，Backbone.history 是未定义的，因此它上面没有 start 方法。事实证明，一旦创建了一个至少指定了一个路由***的控制器***，Backbone.js 就会创建一个名为 Backbone.history（小写“h”）的 Backbone.History（大写“H”）实例。这是有道理的，因为只有在有要响应的路线时才需要历史管理。

# android - 执行 sqlite 时出现运行时错误

> ID：10095036
> 
> 赞同：0
> 
> 时间：2012-04-10T19:19:04.470
> 
> 标签：android, database, sqlite

收到错误`04-12 08:38:33.943: E/Database(441): Failure 1 (near "Table": syntax error) on 0x341088 when preparing 'CREATE TABLE Table (_id INTEGER PRIMARY KEY,location_name TEXT NOT NULL,longi TEXT NOT NULL,lati TEXT NOT NULL);'.` 我在 Eclipse 中遵循了[Android 'create table if not exist' 错误，](https://stackoverflow.com/questions/9236904/android-create-table-if-not-exist-error-in-eclipse?answertab=active#tab-top) 但我的表代码仍然相同
，如下所示

```
public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub
                db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                        KEY_ROWID + " INTEGER PRIMARY KEY," +
                        KEY_LOCATION + " TEXT NOT NULL," +
                        KEY_LONGI + " TEXT NOT NULL," + KEY_LATI + " TEXT NOT NULL);"
                ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:23:05.767

`TABLE`是 SQLite 中的[保留字](http://www.sqlite.org/lang_keywords.html)，因此您不能在`Table`不转义或重命名表的情况下命名表。

# python - 为什么使用 sys.path.append(path) 而不是 sys.path.insert(1, path)？

> ID：10095037
> 
> 赞同：92
> 
> 时间：2012-04-10T19:19:12.647
> 
> 标签：python, path, python-import, pythonpath

**编辑：**根据 Ulf Rompe 的评论，**使用 "1" 而不是 "0" 很重要**，否则会破坏[sys.path](http://docs.python.org/library/sys.html#sys.path)。

我做 python 已经有一段时间了（一年多了），我总是很困惑为什么人们推荐你使用`sys.path.append()`而不是`sys.path.insert()`. 让我演示一下。

假设我正在开发一个名为 PyWorkbooks 的模块（安装在我的计算机上），但我同时正在开发一个包含 PyWorkbooks 的不同模块（比如说 PyJob）。当我在 PyJob 上工作时，我发现我正在纠正的 PyWorkbooks 中的错误，所以我想导入一个开发版本。

有多种方法可以同时处理这两种方法（例如，我可以将我的 PyWorkbooks 项目放在 PyJob 中），但有时我仍然需要使用路径。但是，**我不能简单地对`sys.path.append()`PyWorkbooks 所在的文件夹执行操作**。为什么？因为python会先找到我安装的PyWorkbooks！

这就是为什么你必须做一个 sys.path.insert(1, path_to_dev_pyworkbooks)

总之：

```
sys.path.append(path_to_dev_pyworkbooks)
import PyWorkbooks # does NOT import dev pyworkbooks, imports installed one 
```

或者：

```
sys.path.insert(1, path_to_dev_pyworkbooks) # based on comments you should use **1 not 0**
import PyWorkbooks # imports correct file 
```

这在过去给我造成了一些挂断，如果我们（作为一个社区）开始推荐`sys.path.insert(1, path)`，我真的很喜欢它，就像你手动插入一条路径我认为可以肯定地说那是你想要的路径使用！

还是我有什么问题？这是一个有时困扰我的问题，我希望它公开！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-10T22:47:18.533

如果您确实需要使用 sys.path.insert，请考虑保留 sys.path[0] 原样：

```
sys.path.insert(1, path_to_dev_pyworkbooks) 
```

这可能很重要，因为第 3 方代码可能依赖于[sys.path 文档](http://docs.python.org/library/sys.html#sys.path%20documentation)一致性：

> 在程序启动时初始化时，此列表的第一项 path[0] 是包含用于调用 Python 解释器的脚本的目录。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-10T19:23:47.757

如果您有多个版本的包/模块，则需要使用[virtualenv](http://www.virtualenv.org/en/latest/index.html)（强调我的）：

> `virtualenv`是创建隔离 Python 环境的工具。
> 
> 正在解决的基本问题是依赖关系和版本之一，以及间接权限。**想象一下，您有一个应用程序需要 LibFoo 版本 1，但另一个应用程序需要版本 2。您如何同时使用这两个应用程序？**如果您将所有内容都安装到`/usr/lib/python2.7/site-packages`（或任何您的平台的标准位置），很容易导致您无意中升级不应升级的应用程序。
> 
> 或者更一般地说，如果你想安装一个应用程序并*让它保持不变*怎么办？如果应用程序正常工作，其库或这些库版本的任何更改都可能破坏应用程序。
> 
> 另外，如果您无法将软件包安装到全局`site-packages`目录中怎么办？例如，在共享主机上。
> 
> 在所有这些情况下，`virtualenv`都可以为您提供帮助。它创建了一个具有自己的安装目录的环境，它不与其他 virtualenv 环境共享库（并且可选地也不访问全局安装的库）。

这就是人们认为`insert(0,` 错误的原因——它是管理多个环境问题的不完整的权宜之计解决方案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-24T18:01:20.733

您混淆了附加和前置的概念。以下代码在前面：

```
sys.path.insert(1,'/thePathToYourFolder/') 
```

它将新信息放在口译员将要经过的搜索序列的开头（准确地说是第二个）。`sys.path.append()`把事情放在搜索序列的最后。

建议您使用类似的东西，`virtualenv`而不是手动将包目录编码到`PYTHONPATH`每次。要设置将站点包和可能的 python 版本分开的各种生态系统，请阅读以下两个博客：

1.  [python生态系统介绍](http://mirnazim.org/writings/python-ecosystem-introduction/)

2.  [引导 python 虚拟环境](http://ncoghlan_devs-python-notes.readthedocs.org/en/latest/venv_bootstrap.html)

如果你决定走下环境隔离的道路，你肯定会通过研究 virtualenvwrapper 受益：http: [//www.doughellmann.com/docs/virtualenvwrapper/](http://www.doughellmann.com/docs/virtualenvwrapper/)

# javascript - 尖括号（< 或 >）在正则表达式中是否特殊？

> ID：10095039
> 
> 赞同：21
> 
> 时间：2012-04-10T19:19:23.320
> 
> 标签：javascript, regex

我试图让一个正则表达式接受 < 和 > 作为我的外部分隔符来获取它们之间的所有内容。

所以像这样的内容

```
< tfdsfa  > 
```

应该抓住。

我是否必须转义 < 和 > 字符或什么？

我的脚本生成的正则表达式：

```
/<[^(>)]*>/g 
```

文件中的代码：

```
data.method.highlight = function() {
    var x = data.syntax,
        text = data.$.span.html();
    for (var i=0, len = x.length; i < len; i++) {
        var rx;
        if (x[i].range) {
            rx = new RegExp(x[i].tag[0] + "[^(" + x[i].tag[1] + ")]*" + x[i].tag[1], "g");
            console.log(rx);
        }
        else {
            var temprx = x[i].tag[0];
            for (var z = 1; z < x[i].tag.length; z++) {
                temprx += "|" + x[i].tag[z];
            }
            rx = new RegExp(temprx, "g");
        }
        text = text.replace(rx,function (match) {
            console.log("looping - range");
            return '<span class="' + x[i].class.default + '">' + match + '</span>';
        });
        data.$.span.html(text);
    }
}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T19:22:18.340

正则表达式中既不是元字符`<`也不是元字符。`>`

这对我有用：

```
'<foo> and <bar>'.match(/<[^>]*>/g); // ["<foo>", "<bar>"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-23T11:38:51.657

当您尝试将结果插入 HTML 并且浏览器*认为*它不是有效的 HTML 标记时，您可能会遇到问题，例如`<blablabla>`.

# vb.net - 快速将字符串转换为整数数组

> ID：10095044
> 
> 赞同：0
> 
> 时间：2012-04-10T19:20:02.290
> 
> 标签：vb.net, string

将字符串转换为表示字符代码的短整数数组的最快方法是什么？

我现在正在使用它，但它可能会更快：

```
Dim shortsarray(mystring.Length - 1) as Short
For i As Integer = 0 To mystring.Length - 1
  shortsarray(i) = AscW(mystring.Chars(i))
Next 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:46:20.843

我不知道你想解决什么样的问题。但是，作为替代方案，您可以将字符串转换为字符数组

```
Dim chars() As Char = mystring.ToCharArray() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:25:41.517

```
Dim shortsarray(mystring.Length - 1) as Short //One calculation
For i As Integer = 0 To mystring.Length - 1   //One calculation, repeats n times
  shortsarray(i) = AscW(mystring.Chars(i))    //Three calculations, repeats n times
Next 
```

因此，这应该在 O(3n+1) 或 O(n) 中运行。这与输入的长度呈线性关系，并且由于您正在进行字符转换，因此您无法期望得到太大的改进。我认为这可能与您预期的一样好，尽管可能有一个库可以一次性转换整个单词，从而使您的代码更干净。

如果您需要提高性能，您需要首先分析您的整个程序。这个片段可能不是问题。

# java - 在按钮上添加图像图标？

> ID：10095046
> 
> 赞同：0
> 
> 时间：2012-04-10T19:20:18.353
> 
> 标签：java, image, button, icons

我正在制作一个棋盘游戏，我在棋盘上有一个 3 x 10 的按钮。如何在按钮上添加图像图标来表示板件？

我只需要前 10 个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:23:31.967

```
BufferedImage im = ImageIO.read(yourFile);
ImageIcon ii = new ImageIcon(im);
JButton b = ...;
b.setIcon(ii); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T10:48:37.973

JButton 按钮；Button=new JButton(new ImageIcon("image_path"));

# c - 似乎 setlocale() 在链接库中不起作用

> ID：10095047
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:20:20.340
> 
> 标签：c, locale, static-libraries, setlocale, fann

```
#include <qapplication.h>
#include <qmainwindow.h>
#include "mainwindow.hpp"
#include "../RegisterOfErrors.hpp"
#include <clocale>

extern std::string* Error::DescriptionOfErrors;

int main (int argc, char *argv[])
{
   std::locale::global(std::locale("en_US"));
   setlocale(LC_ALL, "en_US");
   FILE *conf = fopen("dupa.txt", "r");
   float dupa;
   fscanf(conf, "%f", &dupa);
   printf("%f\n", dupa);
   Error::setDescriptionOfErrors();
   QApplication app(argc, argv);
   MainWindow window;
   window.show();
   return app.exec();
} 
```

我的默认语言环境是“es_ES”，所以“，”是小数点。这是我的代码。在文件“dupa.txt”中是一个数字“1.0344”，它可以正常工作。然而，在代码的更深处，我正在使用 fann 库，它在 g++ 中通过“-ldoublefann”链接并从文件中读取一些数据，并且在这个库中仅适用于“，”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:46:22.430

问题是由 Qt 引起的。

有一些代码

```
#include "doublefann.h"
#include "fann_cpp.h"
#include <clocale>

int main() {
    setlocale(LC_ALL, "en_US");
    const int max_neurons = 20;
    const int neurons_between_reports = 1;
    const double desired_error = 0.0001;    
    FANN::neural_net* repetition_ann;
    repetition_ann = new FANN::neural_net();
    repetition_ann->create_shortcut(2, 2, 1);
    repetition_ann->cascadetrain_on_file("train.dat", max_neurons, neurons_between_reports, desired_error);
} 
```

这段代码按我的预期工作 - 它从文件“train.dat”中读取带有“.”的数字，并打印带有“.”的数字。这些情况之间的区别：在第一种情况下，类似的代码在 qtapplication 的某个地方，这段代码是独立的。Qt 设置自己的语言环境，因此解决方案是添加一行：`std::locale::global(std::locale("en_US"));`和`#include <QtCore>`

# ios - 如何编写软件将文件同步到ipad

> ID：10095048
> 
> 赞同：1
> 
> 时间：2012-04-10T19:20:21.003
> 
> 标签：ios, ipad, sync

我有这样的想法，即每次将 ipad 插入计算机时，编写一个应用程序来自动将文件同步到 ipad 的特定位置。问题是我以前从未开发过这样的软件。现在我有两个大问题： - 如何检测 ipad 何时插入计算机？- 如何通过 ipad 连接和复制文件？

为了清楚起见，我要开发的应用程序应该具有类似的功能，如**iTools**（不是**iTunes**）。

这里有没有人有开发这种应用程序的经验？请您与我分享如何开始这个项目，因为我一无所知:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:33:24.123

有一个相当简单的选择；使用基于互联网的服务来完成这项任务——就像 DropBox、iCloud 和类似服务已经做到的那样。[也许你可以通过简单地连接到DropBox](https://www.dropbox.com/developers)、[SugarSync](https://www.sugarsync.com/developer)或类似的 API 来更接近你的目标。

使用直接 (USB-) 连接到设备将很难实现，而且据我所知，这会阻止您通过 Apple 的渠道销售生成的软件。我并不是说这是不可能的（参见[iExplorer](http://www.macroplant.com/iexplorer/)），但我是说这种努力将涉及对未记录功能的大量逆向工程，其程度可能在某些国家被认为是非法的。此外，维护此类软件的要求非常高，因为 Apple 经常在其通信协议中引入更改。

# java - SAX 解析器在换行后不读取

> ID：10095054
> 
> 赞同：4
> 
> 时间：2012-04-10T19:20:55.293
> 
> 标签：java, sax

我正在使用 SAX 解析器来解析预制文本，如下所示：

```
<content><![CDATA[(a) Definitions. 
   (i) term - Definition of term
   (ii) term 2 - Definition of term 2
   (iii) term 3 - Definition of term 3]]>
</content> 
```

我的处理程序

```
public void characters(char ch[], int start, int length){
    if (content) {
        contentText = new String(ch, start, length));
    }   
} 
```

但是，我只在字符缓冲区中得到第一行“(a) Definitions.”。其他行没有被复制。如何访问缺少的行？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:23:39.763

根据[SAX 解析器规范](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/ContentHandler.html)，您可能会收到多个回调`characters`，代表相同字符块的块。您应该将连续的组合成一个字符串。

> Parser 将调用 [ `characters`] 方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:23:25.560

无法保证`characters()`将使用*完整*的文本调用。您需要整理每次调用的结果，并在处理完结束元素后检查字符串。

# python - 无法导入ndb

> ID：10095059
> 
> 赞同：1
> 
> 时间：2012-04-10T19:21:08.913
> 
> 标签：python, google-app-engine

我刚刚接触了 Google App Engine。我加入了一个项目，但不知道它是如何工作的，所以如果这个问题看起来很愚蠢，我很抱歉。

我的问题是查看日志，它说它无法导入ndb。我查了一下，发现这应该默认出现在谷歌应用引擎的 1.6.4 版本中。

我试图从控制台导入它，它也不起作用。我安装的 python 和 google app 引擎都很干净，我今天都安装了。

我应该怎么办？

我正在使用 python 2.7 和 google app engine 1.6.4 在 Windows 上工作。

这是给我带来问题的代码行：

```
from wtforms.ext.appengine.ndb import model_form 
```

这是错误：

> INFO 2012-04-10 19:44:34,582 dev_appserver.py:2884]“GET / HTTP/1.1”500 - 错误 2012-04-10 19:47:05,239 wsgi.py:189] 回溯（最近一次通话最后） ：文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py”，第 187 行，在句柄处理程序 = _config_handle.add_wsgi_middleware(self._LoadHandler()) 文件“C:\Program文件 (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py"，第 236 行，在 _LoadHandler **导入中**(cumulative_path) 文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 676 行，装饰返回 func(self, *args, **kwargs) 文件“C: \Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 1850 行，在 load_module 中返回 self.FindAndLoadModule(submodule, fullname, search_path) File "C:\Program Files (x86)\Google \google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 676 行，在装饰中返回 func(self, *args, **kwargs) 文件 "C:\Program Files (x86)\Google\google_appengine\google\appengine\ tools\dev_appserver_import_hook.py”，第 1722 行，在 FindAndLoadModule 描述中）文件“C：\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 676 行，在装饰中返回 func(self, *args, **kwargs) 文件 "C:\Program Files (x86)\ Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 1665 行，在 LoadModuleRestricted 描述中）文件“C:\Users\chobeat\workspace\pappa Mi\py\main.py”，第 38 行，来自 py。评论导入 * 文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 676 行，装饰返回 func(self, *args, **kwargs) 文件“C: \Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 1850 行，在 load_module 返回 self.FindAndLoadModule(submodule, fullname,search_path) 文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 676 行，装饰返回 func(self, *args, **kwargs) 文件“C:\ Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 1722 行，在 FindAndLoadModule 描述中）文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook .py”，第 676 行，在装饰中返回 func(self, *args, **kwargs) 文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 1665 行，在 LoadModuleRestricted 描述中）文件“C:\Users\chobeat\workspace\pappa Mi\py\comments.py”，第 20 行，从 py.form 导入 IspezioneForm，NonconformitaForm、DietaForm、NotaForm 文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 676 行，装饰返回 func(self, *args, **kwargs) 文件“ C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 1850 行，在 load_module 中返回 self.FindAndLoadModule(submodule, fullname, search_path) File "C:\Program Files (x86) \Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 676 行，在装饰返回 func(self, *args, **kwargs) 文件“C:\Program Files (x86)\Google\google_appengine\google\ appengine\tools\dev_appserver_import_hook.py”，第 1722 行，在 FindAndLoadModule 描述中）文件“C：\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py"，第 676 行，在装饰中返回 func(self, *args, **kwargs) 文件 "C:\Program Files (x86)\ Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py”，第 1665 行，在 LoadModuleRestricted 描述中）文件“C:\Users\chobeat\workspace\pappa Mi\py\form.py”，第 6 行，来自 wtforms。 ext.appengine.ndb import model_form ImportError: No module named ndb\Users\chobeat\workspace\pappa Mi\py\form.py"，第 6 行，来自 wtforms.ext.appengine.ndb import model_form ImportError: No module named ndb\Users\chobeat\workspace\pappa Mi\py\form.py"，第 6 行，来自 wtforms.ext.appengine.ndb import model_form ImportError: No module named ndb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:30:31.127

您需要像这样导入它：

`from google.appengine.ext import ndb`

如果您只是说`import ndb`您错过了一些导入路径信息。不要害怕将有问题的代码复制到您的问题中。通常，这将提供重要的线索。

更新： WTForms 不包含在 AppEngine SDK 中。您需要在系统上[安装它](http://wtforms.simplecodes.com/docs/dev/crash_course.html#download-installation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:20:46.723

```
from wtforms.ext.appengine.ndb import model_form 
```

不能工作。wtforms 没有 ndb 包。它应该是：

```
from wtforms.ext.appengine.db import model_form 
```

# ruby-on-rails - 使用 CouchRest 模型在 CouchDB 中保留外部更改

> ID：10095072
> 
> 赞同：1
> 
> 时间：2012-04-10T19:22:26.857
> 
> 标签：ruby-on-rails, ruby, http, rest, couchdb

我[`couchrest_model`](https://github.com/couchrest/couchrest_model)用来管理 Rails 中的一些数据库。到目前为止，它就像一个魅力，但我注意到如果我`PUT`通过 HTTP 请求获取一些数据，CouchRest 模型似乎没有意识到所做的更改，因此它会擦除整个记录。当然，我可以在 Futon 中看到变化，但在 Rails 中看不到。当我进入控制台时，之前保存的实例不存在。

当然，我可以一直使用 HTTP，但我真的很想利用`ActiveRecord`课堂上可用的验证和其他好东西。

有没有机会让这两个家伙一起工作？

* * *

附言

如果您认为/知道这种方法适用于任何其他 CouchDB Ruby/Rails gem，请告诉我！=) 我提到了 CouchRest 模型，因为 IMO 它是目前最新和最先进的宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:47:03.550

我意识到这个非常简单，只是我使用了错误的工具（除了是一个合适的 n00b 之外）。AFAICT，不可能`CouchRest Model`仅用于在 CouchDB 后端执行持久操作。所有以某种方式改变数据库记录的外部调用都会以某种方式从`ActiveARecord`. 相反，您可能更愿意使用[`CouchPotato`](https://github.com/langalex/couch_potato)，因为它支持持久性操作。

如果有人想出比这个更好的主意，我会很高兴打勾。

# c++ - 简单的 2D 碰撞检测 C++

> ID：10095076
> 
> 赞同：2
> 
> 时间：2012-04-10T19:22:38.200
> 
> 标签：c++, 2d, collision-detection, glreadpixels

我对这一切有点陌生，但我正在尝试用 C++ 制作一个简单的 2D 游戏。我决定做一种迷宫类型的游戏，我正在做的是将迷宫绘制为纹理，然后当我的角色在这个迷宫中移动时使用另一个纹理。

但是，我在碰撞检测方面非常挣扎，因此我的角色不只是穿过墙壁。有人告诉我，我可以使用 glReadPixels 来查找背景的颜色，但是每当我尝试这样做时，它都会忽略颜色并继续穿过墙壁。

任何人都可以帮我解决这个问题并告诉我该怎么做，因为我在任何地方都找不到任何可以提供帮助的东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:29:22.100

根据迷宫类型，如果您只有单位长度的垂直和水平墙，您可以在 2D 数组/矩阵中表示迷宫和当前位置，并根据新位置的内容决定新位置是​​否可以移动在迷宫矩阵中的位置。

您将不得不对矩阵坐标和屏幕坐标进行一些转换

好处：

*   你不需要从屏幕上阅读
*   迷宫可以比屏幕上的大——只画相关部分

缺点：

*   你只能有“bolck”类型的地形（例如垂直/水平墙）
*   如果你想添加移动敌人，碰撞检测可能太粗糙（你不能“仅仅通过头发/像素”避开怪物）

# windows - 在 Windows 上运行标准 ML

> ID：10095085
> 
> 赞同：4
> 
> 时间：2012-04-10T19:23:07.840
> 
> 标签：windows, sml, smlnj, ml, polyml

我一直在寻找一些关于如何让 Standard ML 在 Windows 上运行的好文档。有人对此有很好的指导吗？

我曾尝试使用本指南在 cygwin 中编译 sml/nj：[http ://www.smlnj.org/install/index.html](http://www.smlnj.org/install/index.html)

```
$ config/install.sh
config/install.sh: Using shell /bin/sh.
config/install.sh: SML root is /usr/local/sml.
config/install.sh: Installation directory is /usr/local/sml.
config/install.sh: Installing version 110.74.
config/install.sh: URL of source archive is http://smlnj.cs.uchicago.edu/dist/working/110.74/.
config/install.sh: Script /usr/local/sml/bin/.arch-n-opsys reports ARCH=x86; OPSYS=win32; HEAP_SUFFIX=x86-win32.
/usr/local/sml/config/unpack: The run-time tree already exists.
config/install.sh: Compiling the run-time system.
(nmake /Fmakefile.win32 MAKE="nmake /Fmakefile.win32" RUNTIME="run.x86-win32.exe" VERSION="v-x86-win32" CC="cl" CFLAGS="/Zi" CPP="cl /E /EP" TARGET=X86 DEFS="  /DHOST_X86 /DTARGET_X86 /DOPSYS_WIN32 /DVREGS /DINDIRECT_CFUNC /DDLOPEN" XOBJS="" XLIBS="" LD_LIBS="" XCLIBS="" run.x86-win32.exe)
make: -c: Command not found
mk.x86-win32:26: recipe for target `all' failed
make: *** [all] Error 127
config/install.sh: !!! Run-time system build failed for some reason. 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T22:02:36.963

[莫斯科 ML](http://www.itu.dk/~sestoft/mosml.html) (MosML) 在 Windows 上开箱即用（不需要 cygwin）。您可以下载 zip 文件或自解压安装程序。

该网站还包含一个相当不错的文档（适用于某些 MosML 特定部分）和指向其他良好参考的链接。

关于您的问题，您参考的指南没有提到在 Windows 上编译 sml/nj。仅仅使用 cygwin 并不能使它成为“linux”（cygwin 有很多怪癖）。源代码包含一些关于如何在 cygwin 上安装（和编译）的[注释。](http://www.smlnj.org/dist/working/110.73/NOTES/CYGWININSTALL)请注意，如果您使用的是旧版本的 sml/nj，那么它不一定与 cygwin 兼容。

在旁注中。有一个适用于 Windows 的 msi 安装程序，为什么不使用它呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T19:44:37.597

在标准 ML 的悠久历史中，它的最佳实现鲜为人知：[Poly/ML](http://www.polyml.org/)已成为一个流行的噱头。

Github 上的[版本](https://github.com/polyml/polyml/releases)还包括适用于 Windows 的 MSI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:07:36.390

如果您正在寻找一个快速而肮脏的实现，您可能想尝试[Cambridge ML](http://www.cl.cam.ac.uk/teaching/1011/FoundsCS/usingml.html)。我们用它在剑桥教授本科生 ML。不是大规模开发的最佳选择，但足以教授语言的基础知识。

# flex4 - Flex 4 蒙皮“库”

> ID：10095088
> 
> 赞同：0
> 
> 时间：2012-04-10T19:23:24.360
> 
> 标签：flex4, adobe, skinning

我是 Flex 4 皮肤的新手，并且一直在学习教程，开发我自己的一些皮肤等。我只是想知道是否有发布“皮肤库”的最佳实践。

例如，假设我只想发布 3 个按钮皮肤。我是只编译 3 个实际皮肤文件的 swc，还是制作 3 个按钮——每个皮肤一个按钮——然后只编译这些按钮的 swc？或者你是否同时包含皮肤和按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:28:05.420

我会选择选项 1 - 一个包含所有资源（可能是图形文件或 .fxg 文件）、自定义 ActionScript 皮肤类（如果创建移动皮肤）或没有自定义按钮类的 .mxml 皮肤文件的 .swc。

听起来您正在考虑创建自定义 Button 类，它们之间的区别只是它们“穿”的皮肤。Button 的外观类可以在实例化时设置（或在 mxml 或 css 中以声明方式设置）这一事实为保留常规按钮并仅创建不同的部分（外观）提供了很好的理由。

如果您想添加或修改其功能，而不是外观，您只想扩展控件。

# android - 如何在 Android 上将 Hamcrest 匹配器与 jUnit 一起使用

> ID：10095096
> 
> 赞同：3
> 
> 时间：2012-04-10T19:23:38.900
> 
> 标签：android, unit-testing, junit, hamcrest

我对 Android 有点陌生，并且一直在努力研究如何在我的测试项目中包含 Hamcrest 匹配器。该代码看起来应该在 Eclipse 中运行，没有指示错误。但是当我运行测试时，Hamcrest 类没有加载。我得到“NoClassDefFoundError：org.hamcrest.Matchers”。

我花了过去 3 个小时浏览论坛，发现有人以前遇到过这种情况，但没有运气。我一定是在做一些愚蠢的事情，因为 IDE 可以看到这些类，但运行时却没有。

这里是测试源：

```
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.equalTo;
import org.hamcrest.Matcher;
import android.test.InstrumentationTestCase;

public class AppDescLoaderTest extends InstrumentationTestCase {

  public void testHamcrest() {
    assertThat(3, equalTo(3));
  }
} 
```

我尝试将 hamcrest-all-1.2.jar 添加为库和外部 jar。两种方式的结果相同，代码在 IDE 中看起来不错，但无法在运行时加载类。

我的理论是 hamcrest.jar 不与 .apk 文件一起使用，这就是它的类没有被加载的原因。如果这是真的，我如何将它与 .apk 文件一起推送到 android？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:00:35.047

假设您使用的是当前的 R17 工具，那么...

> 我尝试将 hamcrest-all-1.2.jar 添加为库和外部 jar。两种方式的结果相同，代码在 IDE 中看起来不错，但无法在运行时加载类。

步骤#1：撤消所有这些。

`libs/`步骤#2：在项目的根目录中创建一个目录。

第 3 步：将您的 JAR 放入`libs/`.

你完成了。这曾经只是命令行构建的秘诀，但现在它也是基于 Eclipse 的构建的秘诀。

# php - 警告：mysql_fetch_array()：提供的参数无效

> ID：10095098
> 
> 赞同：0
> 
> 时间：2012-04-10T19:23:41.523
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

我有以下 mysql 查询，它产生了上述错误，我不知道为什么，任何帮助将不胜感激。

```
$tableName="livetrack";     
$targetpage = "visitors.php";   
$limit = "$pagination"; 

$query = "SELECT COUNT(*) as num FROM $tableName where member_id = '$site_id' and display = 'yes'";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num];

$stages = 3;
$page = mysql_escape_string($_GET['page']);
if($page){
    $start = ($page - 1) * $limit; 
}else{
    $start = 0; 
    }   

// Get page data

$query1 = "SELECT * FROM $tableName  WHERE date >= ( NOW() - '$fdate' ) and ip ='$ip' and  member_id = '$site_id' and display = 'yes'  and category= '$categories' and type ='$vtype' order by id DESC LIMIT $start, $limit";
$result = mysql_query($query1);

// Initial page num setup
if ($page == 0){$page = 1;}
$prev = $page - 1;  
$next = $page + 1;                          
$lastpage = ceil($total_pages/$limit);      
$LastPagem1 = $lastpage - 1;                    

$paginate = '';
if($lastpage > 1)
{ 
```

下面的代码是生成错误消息的地方。

```
while($row = mysql_fetch_array($result))
    { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:18:17.530

您应该打印出原始查询，然后在 mysql 中手动运行它（通过 mysql 工具或类似 phpMyAdmin 的工具）。

你有错误吗？（大概）

如果是，请修复查询。

如果没有，您应该在每次运行查询时以及在尝试访问结果之前检查 mysql 错误。

例如：

1.  $query = 'SELECT * FROM users;';
2.  $result = mysql_query($query);
3.  if(mysql_error() != '') { echo 'mysql 查询错误：#'.mysql_errno().' - '.mysql_error();
4.  否则 { $data = mysql_fetch_array($result); }

第二种可能的可能性是您没有与数据库的有效连接，或者您连接到错误的数据库。

# java - 如何在 ServletContextListener 中运行线程？爪哇

> ID：10095100
> 
> 赞同：0
> 
> 时间：2012-04-10T19:23:52.023
> 
> 标签：java, multithreading, servlets, servlet-listeners

我的 ServletContextListener：

```
@WebListener
public class RunServlet implements ServletContextListener {

    private ScheduledExecutorService scheduler;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        System.out.println("ready");
        scheduler = Executors.newScheduledThreadPool(10);
        scheduler.execute(new RunThread("http://stackoverflow.com"));
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        scheduler.shutdownNow();
        System.out.println("removed");
    }
} 
```

实现 Runnable 的类是 RunThread（从网页中获取所有链接，点击链接，解析网页并使用 jsoup 和 hibernate 将单词保存到数据库中）：

```
public class RunThread implements Runnable{
    private Document html;
    private String url;

    private static final int threads_num = Runtime.getRuntime().availableProcessors()*4;
    private int links = 0;
    private int alinks = 0;

    public RunThread(String url){
        this.url = url;
        try {
            this.html = Jsoup.connect(url).get();
            this.links = html.select("a[href]").size();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        if(alinks != links){
            Elements collectedLinks = html.select("a[href]");
            ExecutorService executor = Executors.newFixedThreadPool(threads_num);
            for(Element link:collectedLinks){
                if(alinks == links) break;
                else{
                    String current = link.attr("abs:href");
                    if(!current.equals(url) && current.startsWith(url)&& !current.contains("#")){
                        executor.execute(new RunThread(current));
                        alinks++;
                    }
                }
            }
        }
        AnalyzePage(html, url);
    }

    private void AnalyzePage(Document doc,String url){
        String text = doc.body().text();
        SaveTextToDB(text,url);
    }

    public void SaveTextToDB(String text, String link){
        TreeMap<String, Integer> frequencyMap = new TreeMap<String, Integer>();
        StringTokenizer parser = 
            new StringTokenizer(text.replaceAll("[0-9]+","").replaceAll("[^a-zA-Zа-яА-Я]-[^a-zA-Zа-яА-Я]", " "), " \t\n\r\f.,;:!?%#+№/<←→↓@'\"—«»©“\\(\\)");
        while (parser.hasMoreTokens()) {
            String currentWord = parser.nextToken();
            Integer frequency = frequencyMap.get(currentWord);
        if (frequency == null) {
            frequency = 0;
        }
        frequencyMap.put(currentWord, frequency + 1);
    }

    for (Map.Entry<String,Integer> entry : frequencyMap.entrySet()){
        Indexation word = new Indexation();
        IndexationPK pk = new IndexationPK();
        pk.setLink(link);
        pk.setWord(entry.getKey());
        word.setFrequency(entry.getValue());
        word.setIndexationPK(pk);
        IndexationDAO indDAO = new IndexationDAOImpl();
        indDAO.AddRecord(word);
    }}
} 
```

我收到下一个错误：

```
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:695)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:640)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:381)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:364)
    at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:143)
    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:132)
    at com.mstu.service.RunThread.<init>(RunThread.java:35)
    at com.mstu.service.RunThread.run(RunThread.java:53)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Exception in thread "pool-9-thread-1" java.lang.NullPointerException
    at com.mstu.service.RunThread.AnalyzePage(RunThread.java:63)
    at com.mstu.service.RunThread.run(RunThread.java:59)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:695)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:640)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:381)
    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:364)
    at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:143)
    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:132)
    at com.mstu.service.RunThread.<init>(RunThread.java:35)
    at com.mstu.service.RunThread.run(RunThread.java:53)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
java.net.SocketTimeoutException: Read timed out 
```

怎么了？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:27:34.843

我怀疑这与您的线程无关，但是

```
 this.html = Jsoup.connect(url).get(); 
```

无法连接到您给定的 URL。这是否作为独立组件运行？值得测试这个独立的（将其拉出`Runnable`并使其成为一个可以轻松测试的独立类），并检查是否需要设置 HTTP 代理等。

（我可能会在`run()`方法中运行上述内容，而不是在对象创建中获取连接并挂在它上面，直到执行程序准备好运行它）

# haskell - 易安装失败

> ID：10095102
> 
> 赞同：10
> 
> 时间：2012-04-10T19:24:04.733
> 
> 标签：haskell

很想试试 Yi 编辑器，但不幸的是，它在安装过程中一直失败。

首先我得到：

```
> cabal install yi
haskell-src-exts-1.13.0 failed during the configure step. The exception was:
ExitFailure 1
yi-0.6.5.0 depends on haskell-src-exts-1.13.0 which failed to install. 
```

然后当我尝试安装时，`haskell-src-exts`我被这个难住了：

```
setup: The program happy version >=1.17 is required but it could not be found.
cabal: Error: some packages failed to install:
haskell-src-exts-1.13.0 failed during the configure step. The exception was:
ExitFailure 1 
```

安装快乐`cabal install happy`（当时是版本 1.18.9）没有帮助，因为它仍然会产生上述错误！

我正试图在 ArchLinux 上实现这一点。此外，Windows 安装也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T19:34:10.017

`cabal`如果尚未安装程序，则将程序安装到`~/.cabal/bin`（在 Unix 上；不知道 Windows），并且不会警告您将其添加到您的`$PATH`; 它也（除非你有最新的未发布版本，从它的 repo 构建）不知道它已经这样做了，因为它只跟踪库，而不是可执行文件。您将需要手动添加`$HOME/.cabal/bin`到您的`$PATH`，以便找到

（**编辑**是迂腐的）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-12T21:15:47.830

在 ubuntu 上，我使用 apt-get 而不是通过 cabal 安装了快乐，这很有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T23:59:43.333

我在安装依赖于 haskell-src-exts 的 hprotoc 时遇到了同样的问题。我认为的问题是我正在运行修改路径的 sudo 命令。当我在下面的问答中采取建议的行动时，它解决了寻找快乐的问题。

[sudo 更改 PATH - 为什么？](https://stackoverflow.com/questions/257616/sudo-changes-path-why)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-29T23:27:31.383

这是我在 ArchLinux 下用 GTK+ 安装 Yi 所做的。

首先，我试过`cabal install yi`了，我得到了和你一样的错误。

为了解决这个错误，我`happy`使用这个命令安装：

```
yaourt -S happy 
```

然后，我收到另一个错误，因为`alex`需要该包。所以，我安装了它：

```
yaourt -S alex 
```

之后，由于`gtk2hs`缺少软件包，我遇到了一些错误。我安装了它们：

```
yaourt -S haskell-cairo haskell-glib haskell-gtk haskell-pango 
```

最后，我能够安装 Yi：

```
cabal install yi -fvty -fpango 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:46:56.100

Leksah 使用 Yi 作为组件，尝试安装 leksah。我曾经有过类似的错误消息，haskell-src-exts 错误是由于内存不足。重新启动您的计算机，除了控制台之外没有其他任何东西在运行，然后重试。

# javascript - 在javascript或jquery中计算三角形的一侧（余弦定律）

> ID：10095107
> 
> 赞同：-6
> 
> 时间：2012-04-10T19:24:28.197
> 
> 标签：javascript, jquery, math, geometry

我需要计算三角形的一侧。我有两个边的角度和宽度。经过搜索，我发现了如何做到这一点，但我需要用 javascript 或 jquery 来做。

这是计算[余弦定律的方法](http://www.calculatorsoup.com/calculators/geometry-plane/triangle-theorems.php#law_of_cosines)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:27:38.507

使用正弦规则： http:
[//media.tiscali.co.uk/images/feeds/hutchinson/ency/c02395.jpg](http://media.tiscali.co.uk/images/feeds/hutchinson/ency/c02395.jpg)

如果你有边 a 和角 A，并且你想计算边 b 的长度并且你有角 b，那么公式将是

```
b = sin B * (a/sinA) 
```

在 Javascript 中，这可以通过

```
var B = 45; //size of angle B
var a = 5;  //length of side a
var A = 45; //size of angle A
var calculateLength = Math.sin(B/180*Math.PI) * (a/Math.sin(A/180*Math.PI)); 
```

这是一个活生生的[例子](http://jsfiddle.net/xsGtx/2/)

# extjs - ExtJS4 - 如何在 selectionchange 上获取父网格？

> ID：10095116
> 
> 赞同：5
> 
> 时间：2012-04-10T19:24:56.187
> 
> 标签：extjs, extjs4, extjs-mvc

我对 ExtJS3 几乎没有经验，现在从版本 4 开始。

在我的控制器中，我有这个：

```
init: function ()
{
    this.control({
        "userlist":
        {
            selectionchange: function (view, selected, opts)
            {
                 //get to grid??
            }
        }
    });
} 
```

如何在不使用 id 的情况下访问发生此事件的网格？如果选择了项目，我想启用/禁用网格工具栏 ( `tbar`) 上的按钮，但我不想提供任何 id（不是栏，不是单个按钮）

编辑：解决方案是使用`refs`控制器中的属性：

```
refs:
[
    {
        ref: "list",
        selector: "userlist"
    }
],

selectionchange: this.activateTbButtons

activateTbButtons: function (selected, opts)
{
    if (selected.selected.length == 1)
    {
        var tb = this.getList().query("toolbar");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T14:09:57.430

刚刚发现可以使用属性视图，以及 Ext.selection.Model 下的视图。

当您假设打开对象的多个实例时，这可能很有用。

因此，要访问示例中的网格：

```
selectionchange: function (view, selected, opts) {
 //get to grid??
 var grid = view.view.ownerCt;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:33:40.597

遇到同样的问题，发现以前的答案缺少一些要点。简而言之，我建议：

```
selectionchange: function (selModel, selected, eOpts) {
  var grid = selModel.view.ownerCt;
} 
```

Adezj 已经提出了这一点，尽管它引用了将视图作为第一个参数的 selectionchange 事件，并且不适用于 ExtJS 4.0.7+。（不认为 selectionchange 曾经将观点作为论据吗？）

请注意，这可能不被 ExtJS 正式支持，因为 API 文档中根本没有提到选择模型的视图属性。

另一种方法是使用 Ext.ComponentQuery.query(...) 或在控制器中定义 refs，正如 Arun V 所建议的那样，这基本上只是 Ext.ComponentQuery.query() 的一个方便的包装器。如果您只有网格类的单个实例，这可以正常工作，但您需要注意以防您有同一个网格类的*多个*实例。只需执行 Ext.ComponentQuery.query('xtype-of-your-grid') 将返回您的网格的*所有*实例，并且您会发现用户在哪个实例中选择了一些东西。

因此，一般来说，我强烈建议您始终从触发事件的组件或对象开始向上工作，以确保您位于组件层次结构的正确分支中，除非您确定永远不会拥有多个您为其编写控制器的那个类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T19:29:09.370

**编辑**

我查看了 selectionChange 事件的文档：

```
selectionchange( Ext.selection.Model this, Ext.data.Model[] selected, Object eOpts ) 
```

视图未传递给`selectionchange`处理程序。处理此问题的一种简单方法是使用`Ext.getCmp()`或使用 refs，如 docs for 中所示`Ext.app.Controller`：

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.app.Controller](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.app.Controller)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-13T00:39:22.237

//获取网格

```
var grid = selectionModel.view.ownerCt.ownerCt; 
```

# php - Cookie 未在 IE 或 Chrome 中设置

> ID：10095120
> 
> 赞同：0
> 
> 时间：2012-04-10T19:25:02.893
> 
> 标签：php, cookies

我有这两个我正在设置的 cookie，它们在 Firefox 中工作，但在其他地方没有，我不知道为什么，我一直在谷歌搜索试图找到答案......这是我的 cookie

```
setcookie("expire", 'Baldhead' , time() + 1800, "/");
setcookie("baldhead", 'Baldhead' , time() + 7200, "/"); 
```

为什么他们不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:39:17.477

确保这是从脚本输出的第一件事！

它是通过 HTTP 标头发送的。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

您的更多来源会有所帮助，因此我们可以看到生成它的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:48:15.507

你可以使用这个

```
setcookie("expire",'Baldhead',time()+1800);
setcookie("baldhead",'Baldhead',time()+7200); 
```

希望这对你有用。

# c# - WMI 的 C# 友好替代方案，用于按所有者迭代远程进程？

> ID：10095121
> 
> 赞同：0
> 
> 时间：2012-04-10T19:25:06.540
> 
> 标签：c#, .net, wmi

我们有一些有效的代码，但是太慢了。我们使用 System.Management.ManagementObjectSearcher 为“Select * from Win32_Process”运行 ObjectQuery。然后我们迭代返回的列表，调用“GetOwner”（通过 InvokeMethod）来查看进程是否由我们正在搜索的用户执行，并且然后调用“终止”（也通过 InvokeMethod）。

通过一些额外的异常处理来解决在迭代过程中终止的进程，这很有效，但是在我们需要运行它的具有数千个进程的机器上，迭代所有进程需要整整一个小时。

是否有不涉及在目标服务器上占用空间的替代方法？远程部分是我们正在做的事情的关键。如果我们必须去本地，我们可以选择 win32 api，但我想如果在本地运行 WMI 会足够快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:35:14.193

不幸的是，如果您想提高性能，WMI 检索进程所有者的速度非常慢，那么您必须使用 WInAPi 函数[`OpenProcessToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379295%28v=vs.85%29.aspx)和[`CloseHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx).

检查这个样本

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Security.Principal;
using System.Runtime.InteropServices;

namespace ConsoleApplicationTest
{
    class Program
    {
        static uint TOKEN_QUERY = 0x0008;

        [DllImport("advapi32.dll", SetLastError = true)]
        static extern bool OpenProcessToken(IntPtr ProcessHandle, UInt32 DesiredAccess, out IntPtr TokenHandle);

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool CloseHandle(IntPtr hObject);

        static void Main(string[] args)
        {
            foreach (Process p in Process.GetProcesses())
            {
                IntPtr TokenHandle = IntPtr.Zero;
                try
                {
                    OpenProcessToken(p.Handle, TOKEN_QUERY, out TokenHandle);
                    WindowsIdentity WinIdent = new WindowsIdentity(TokenHandle);
                    Console.WriteLine("Pid {0} Name {1} Owner {2}", p.Handle, p.ProcessName, WinIdent.Name);
                }
                catch (Exception Ex)
                {
                    Console.WriteLine("{0} in {1}", Ex.Message, p.ProcessName);
                }
                finally
                {
                    if (TokenHandle != IntPtr.Zero) { CloseHandle(TokenHandle); }
                }
            }
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:18:18.910

我不确定哪个工作缓慢，迭代或调用方法。我猜应该是后一种吧。

*   您可以尝试 ManagementClass.GetInstances() 而不是运行 wmi 查询吗？
*   尝试遍历返回的 WMI 实例并将它们缓存到队列中。然后，您将能够创建多个线程。他们每个人都在队列中选择一个实例并调用方法。

# jquery - 在 jQuery scrollTop 动画期间打印滚动高度

> ID：10095128
> 
> 赞同：3
> 
> 时间：2012-04-10T19:25:49.533
> 
> 标签：jquery, animation, scrolltop

jQuery animate 可以在动画时发送滚动高度还是我应该创建一个单独的函数，如果是后者，该函数将如何运行？

[http://jsfiddle.net/A2s9Q/](http://jsfiddle.net/A2s9Q/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:09:56.580

您可以使用滚动处理程序来更新标签。

```
$(document).scroll(function(){
    $("#scrollHeight").html($(document).scrollTop());
}); 
```

[http://jsfiddle.net/A2s9Q/7/](http://jsfiddle.net/A2s9Q/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:31:13.547

使用`setTimeout`：

```
(function updateScrollheight(){
    if(animating){
        $('#scrollHeight').html($(document).scrollTop());
        setTimeout( updateScrollheight, 200 );
    }
})(); 
```

这是**[演示](http://jsfiddle.net/WLTFu/1/)**：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:42:17.773

您可以使用 .animate(properties, options) 中的 step 选项，其中 tihs 与其他选项一起进入选项数组

```
step: function( now, fx ){$('#scrollHeight').html(now)} 
```

# php - 如何统计 SQL 中最常见的值？

> ID：10095132
> 
> 赞同：1
> 
> 时间：2012-04-10T19:26:10.627
> 
> 标签：php, mysql, count, mysql-num-rows

目前我有以下代码：

```
$forummost = mysql_query("

 SELECT door, 
 COUNT(door) AS doorCount 
 FROM forum_posts 
 GROUP BY door 
 ORDER BY COUNT(door) 
 DESC

");
$forummostc = mysql_num_rows($forummost);
$forummostf = mysql_fetch_assoc($forummost); 
```

有人能解释一下为什么**mysql_num_rows($forummost)**不起作用吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:36:47.963

`mysql_num_rows`计算查询返回的行数。您的查询是`what is the count for each door`每扇门只返回一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:41:36.097

[GROUP BY](http://www.w3schools.com/sql/sql_groupby.asp)只选择 mysql 中该列的不同值。在您的情况下，正如所指出的那样，它会选择尽可能多的行，因为`door`存在不同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:43:41.623

试试这个，我测试过，它有效..

```
<?php 
$link = mysql_connect('localhost','root',''); 
if (!$link) 
{ 
    die('Could not connect to MySQL: ' . mysql_error()); 
} 
echo 'Connection OK'."</br>"; 

$forummost = mysql_query("
    SELECT door, 
COUNT(door) AS doorCount 
FROM forum_posts 
GROUP BY door 
ORDER BY COUNT(door) 
DESC
");

$forummostc = mysql_num_rows($forummost);

if ($forummostc == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

while ($row = mysql_fetch_assoc($forummost)) {
    echo $row["door"];
    echo $row["doorCount"];

}

mysql_free_result($forummost);

mysql_close($link); 

?> 
```

# javascript - Chrome 中的 Firefox 书签

> ID：10095137
> 
> 赞同：0
> 
> 时间：2012-04-10T19:27:03.203
> 
> 标签：javascript, google-chrome, bookmarklet

我写了一个在 Firefox 中运行良好的小书签，尝试在 Chrome 中使用它但没有任何运气。刚刚尝试了一个存根书签 javascript:alert('wtf'); 这在 Firefox 中运行良好，但在 Chrome 中根本不行。试图拆开我预先安装的几个 Chrome 书签，但无法弄清楚它们为什么运行而我的却没有。在查找这方面的文档时遇到了很多麻烦，我想我会问：

我使用的 javascript 在 Firefox 和 Chrome 之间几乎相同，书签的 javascript: 命令在我的 Firefox 书签和预安装的 chrome 书签之间是相同的，所以这里还有其他事情吗？

这是实际的书签（不仅仅是存根） javascript:function(){myscript=document.createElement('SCRIPT');myscript.type='text/javascript';myscript.src='http://applegator.net/ script.js';document.getElementsByTagName('head')[0].appendChild(myscript);}

当它登陆 chrome 时发生了一些奇怪的格式化事情，仍在尝试对其进行整理，但认为它基本上是正确的。

我对 Chrome 很陌生，所以也许这与他们有关，只是想不通。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:39:43.403

您必须在 javascript 之后放置一个空格： alert('like so');

如果您想做更复杂的事情，请使用闭包：

javascript: a=function(){alert('poop');alert('morepoop');}();

这 （）; 是闭包自调用的快捷方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:39:22.350

我刚刚在 Chrome 中成功添加了您的书签。但是，我发现书签不会在某些重要页面上运行，例如新标签页或以`chrome://`.

也许您选择的测试页面是您的问题？

# mercurial - Mercurial更新失败时如何使Jenkins构建失败

> ID：10095138
> 
> 赞同：3
> 
> 时间：2012-04-10T19:27:05.930
> 
> 标签：mercurial, jenkins

我有一个 Jenkins 版本，可以从 Mercurial 中检查代码。有一种情况是 Mercurial 存储库损坏并且更新失败，但是 Jenkins 构建仍会继续并报告成功。在这种情况下，Jenkins 构建是否有可能失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:59:57.843

我在使用 SVN 时遇到过类似的问题。

假设 Mercurial 在更新失败时输出警告/错误，您可以使用 Text Finder 插件：[https](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin) ://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin来解析警告消息并失败如果找到。

或者，如果 Mercurial 在成功更新时输出成功消息，您可以对其进行解析，如果未找到成功消息则失败。

# .net - 如何将 Enterprise Library 升级到最新版本？

> ID：10095139
> 
> 赞同：6
> 
> 时间：2012-04-10T19:27:09.417
> 
> 标签：.net, visual-studio-2010, enterprise-library

我目前在我的几个应用程序中使用 Enterprise Library 的异常日志记录功能。

不久前，我在我的机器上安装了 Enterprise Library，以便我可以从我的 Visual Studio 工具栏启动配置实用程序。在我的最新项目之前，一切都很棒。

几周前，我使用 NuGet 将我需要的企业库库下载到我的项目中。它提取的库是 5.0.505.0 版本。我在我的机器上安装的企业库是 5.0.414.0。我最初配置了项目中的所有内容，并且配置文件中的所有引用都设置为.414。自然，它不会运行，所以我将它们全部更改为 .505 并且一切都运行了。现在的问题是我需要进行一些更改，并且由于版本冲突，编辑器将无法运行。

因此，我查看了[MSDN](http://msdn.microsoft.com/en-us/library/ff632023.aspx)并尝试下载此[更新](http://www.microsoft.com/download/en/details.aspx?id=6836)，但更新无法运行，说明安装了旧版本的 Enterprise Library。

我考虑过卸载然后重新安装最新的企业库，这可能会起作用。但是，我想检查是否有人知道更集成的升级方法？

**有什么方法可以在不卸载和重新安装的情况下升级 Enterprise Library？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T07:23:00.713

从[可选更新 1](http://www.microsoft.com/download/en/details.aspx?id=6836)链接：

> 从 Enterprise Library 5.0 升级时，您有两种选择：
> 
> 1.  卸载 Enterprise Library 5.0，然后执行全新安装。
>     
>     
> 2.  通过以下方式从命令提示符将 Enterprise Library 5.0 升级到可选更新 1：(a) 将 Enterprise Library 5.0 可选更新 1.msi 文件重命名为 Enterprise Library 5.0.msi 和 (b) 从命令提示符执行以下命令：
>     
>     
> 
> msiexec /i "企业库 5.0.msi" REINSTALLMODE=vomus REINSTALL=ALL

如果您想“保留” 5.0.414.0 版本，请备份 C:\Program Files (x86)\Microsoft Enterprise Library 5.0\Bin 目录，您始终可以从备份目录中引用 414 个程序集并通过设置运行配置工具了一个配置集。请参阅[使用不兼容的 Enterprise Library 副本避免配置陷阱以](http://blogs.msdn.com/b/tomholl/archive/2007/04/19/avoiding-configuration-pitfalls-with-incompatible-copies-of-enterprise-library.aspx?Redirected=true)获取仍然相关的旧文章（具有适当的版本更改）。

此外，如果您从[可选更新 1 下载](http://www.microsoft.com/download/en/details.aspx?id=6836)或NuGet 上的[EnterpriseLibrary.config](http://visualstudiogallery.msdn.microsoft.com/029292f0-6e66-424f-8381-3454c8222f9a)安装 Microsoft.Practices.EnterpriseLibrary.ConfigConsole.vsix，它将添加一个上下文敏感配置工具，允许您基于每个解决方案设置二进制文件路径（并避免像以前的方法一样修改注册表）。如果您备份了 414 二进制文件，这将允许您在一个针对 414 的解决方案和另一个针对 505 的解决方案中运行配置工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:01:48.327

它可通过扩展管理器作为 Visual Studio 扩展使用。

转到 Extension Manager 并在 Online Gallery 中搜索**enterpriselibrary.config 。**当前版本是 5.0.505.0。

# c# - 将属性绑定到自定义控件

> ID：10095141
> 
> 赞同：0
> 
> 时间：2012-04-10T19:27:18.527
> 
> 标签：c#, asp.net, custom-controls

我有一个正在使用的自定义控件库，并且我添加了一个名为的属性，该属性`DataCodeField`的作用与`DataTextField`继承自`ComboBox`.

```
 DummyData data1 = new DummyData(12, "Jon", 1);
    DummyData data2 = new DummyData(15, "Bill", 2);
    DummyData data3 = new DummyData(23, "Ted", 1);

    var people = new List<DummyData>{data1, data2, data3};

    ddlTest.DataSource = people;
    ddlTest.DataTextField = "Name";
    ddlTest.DataCodeField = "Age";
    ddlTest.DataValueField = "Id";
    ddlTest.DataBind();

    var id = ddlTest.SelectedValue;
    var index = ddlTest.SelectedIndex;
    var name = ddlTest.SelectedItem;
    var age = ?? 
```

当我将它绑定到新的`DataCodeField`. 我知道我必须覆盖`OnDataBinding`事件才能做到这一点，但我似乎找不到从哪里开始。任何帮助，将不胜感激。我的最终目标是在组合框被数据绑定后访问这样的年龄。

或者，有没有办法访问绑定的数据源，然后根据 selectedIndex 从该对象访问年龄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:41:32.527

如果您将数据源保存在视图状态中，您可以使用以下方法访问选定的年龄；

```
var age = People[ddlTest.SelectedIndex].Age; 
```

# maven - Maven SAR 打包：如何更改包结构？

> ID：10095142
> 
> 赞同：0
> 
> 时间：2012-04-10T19:27:29.283
> 
> 标签：maven, build, jboss, pom.xml, sar

我一直在尝试让 Maven 打包一个 SAR，并且一直在使用带有 jboss-sar 打包类型的 maven jboss 打包插件。

默认情况下，插件似乎将类目录（来自 src/main/java）打包到 SAR 的根目录（com/../etc）。出于我的目的，我需要它位于 WEB-INF/classes/com/.../etc 中，但我无法说服插件更改类打包目录。

我已经使用 maven 程序集插件来使用程序集描述符来更改布局，但这似乎有点矫枉过正，这也意味着生成了两个 SAR（一个使用标准格式，一个使用程序集修改格式，这是不可取的）。

我对 maven 很陌生，并且花了很多时间试图找到解决这个问题的巧妙方法，但到目前为止，我只为基本上是一个简单问题的问题提出了过于复杂的解决方案。

（请注意，符合这个存档结构是我无法控制的，偏离它不是一个可行的选择）

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:30:35.220

这听起来你需要一个[战争插件](http://maven.apache.org/plugins/maven-war-plugin/)，它打包一个包含 WEB-INF/classes 文件夹等的战争。此外，在你的情况下，你必须将项目的打包更改为“war”而不是“jar”或“sar”。

# css - Safari 中的 CSS 错误，但 Chrome/Firefox 中没有

> ID：10095146
> 
> 赞同：0
> 
> 时间：2012-04-10T19:27:36.083
> 
> 标签：css, html, twitter-bootstrap

[https://gist.github.com/2354116](https://gist.github.com/2354116)

如果您在 Chrome/Firefox 中查看上述页面，那么一切似乎都很好。底部的 div（两个标题和社交图标）被包裹在一个容器 div 中并且居中没有问题。

如果在 Safari 中查看，那么这三个 div 根本不居中：/

我不知道这是为什么....有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:28:12.427

**注意：**必须对您的设计进行很多假设，因此修改任何不符合您原始设计的内容。

首先，您没有正确包含页面元素（内容、轮播、页脚），您当前有多个宽度容器试图并排放置，这在多个地方破坏了您的设计。

你的内容容器是`width:940px`，你的`.wrapper`div 是`width:750px`，你的`.paramWrapper`div 是`width:870px`，你的`.carousel`div 是`width:735px`。您必须选择一个宽度并坚持下去，然后使用边距将内容相应地推送到您的页面上。我使用`860px`，这是`span11`类的宽度。

接下来，您将`bootstrap.css`直接修改样式表，这意味着无论何时更新引导程序，如果您覆盖引导程序样式表，所有更改都将丢失，因此创建另一个样式表并将所有自定义样式放在那里并加载它“之后”标题中的引导样式表。

现在到你原来的问题上，底部`.paraWrapper`div 没有正确堆叠，因为你`870px`的容器中设置了宽度，并且其中的元素加起来不等于该宽度：

`span3`+ `span3`+ `span2`+ 边距 =`640px`

所以这不是问题或错误，它只是你的布局。

这是我很快提出的一个固定版本，因此您将不得不再次修改元素以适合您的设计：http: [//jsfiddle.net/rzSFa/3/](http://jsfiddle.net/rzSFa/3/)，这是它的外观[演示](http://jsfiddle.net/rzSFa/3/show/)像。

顺便说一句，你使用响应式引导样式表是徒劳的，它目前在你的情况下没有做太多，那么为什么还要使用它呢？您可以轻松地修改一些媒体查询以支持我的固定版本，但您的将根本不起作用，因为您声明所有自己的类都具有自定义宽度，因此包含它没有意义。

# c# - 将转换后的字典（c#）的节点/属性名称更改为 XML

> ID：10095149
> 
> 赞同：2
> 
> 时间：2012-04-10T19:27:57.150
> 
> 标签：c#, xml, dictionary

我已经使用这篇文章将我的字典转换为 xml：

[将 Dictionary<string, string> 转换为 xml 的简单方法，反之亦然](https://stackoverflow.com/questions/1799767/easy-way-to-convert-a-dictionarystring-string-to-xml-and-visa-versa)

我在做什么：

```
Dictionary<int, string> dicEntityRules = new Dictionary<int, string>();
// add the items to dicEntityRules    

DataContractSerializer serializer = new DataContractSerializer(dicEntityRules.GetType());

         using (StringWriter sw = new StringWriter())
         {
             using (XmlTextWriter writer = new XmlTextWriter(sw))
             {                    
                 writer.Formatting = Formatting.Indented;

                 serializer.WriteObject(writer, dicEntityRules);

                 writer.Flush();

                 sw.ToString();
             }

         } 
```

但是，我的 xml 是这样的：

```
<KeyValueOfintstring>
    <Key>2048</Key>
    <Value>66</Value>
  </KeyValueOfintstring> 
```

我可以更改此节点/属性名称吗？

我想要一些这样的：

```
 <Order>
        <entity>2048</entity>
        <rule>66</rule>
      </Order> 
```

问候。

墨菲 [[|]] 的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:24:33.130

将您的字典转换为 a`List<Order>`并将其序列化：

```
void Main()
{
    var dicEntityRules = new Dictionary<int, string>();

    dicEntityRules.Add(1, "One");

    // Convert to List<Order>
    var orders = dicEntityRules.Select (er => 
        new Order {entity=er.Key, rule=er.Value}).ToList();

    var serializer = new DataContractSerializer(typeof(List<Order>));

    using (var sw = new StringWriter())
    {
        using (XmlTextWriter writer = new XmlTextWriter(sw))
        {                    
            writer.Formatting = Formatting.Indented;

            serializer.WriteObject(writer, orders);

            writer.Flush();

            var s = sw.ToString();
        }
    }
}

[DataContract()]
public class Order
{
    [DataMember]
    public int entity { get; set; }
    [DataMember]
    public string rule { get; set; }
} 
```

# linux - Linux 中的 std.net.curl 链接器错误

> ID：10095150
> 
> 赞同：9
> 
> 时间：2012-04-10T19:28:00.447
> 
> 标签：linux, ubuntu, ld, d

我正在尝试使用 DMD 2.058 在 32 位 Ubuntu Linux (11.10 Ocelot) 上使用 std.net.curl。

当我构建 ( `dmd source.d`) 时，我得到：

```
/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/libphobos2.a(curl.o): In function `_D3std3net4curl4Curl19_sharedStaticCtor30FZv':
std/net/curl.d:(.text._D3std3net4curl4Curl19_sharedStaticCtor30FZv+0x6): undefined reference to `curl_global_init'
/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/libphobos2.a(curl.o): In function `_D3std3net4curl4Curl19_sharedStaticDtor31FZv':
std/net/curl.d:(.text._D3std3net4curl4Curl19_sharedStaticDtor31FZv+0x4): undefined reference to `curl_global_cleanup'
/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/libphobos2.a(curl_12fd_140.o): In function `_D3std3net4curl4HTTP4Impl6__dtorMFZv':
std/net/curl.d:(.text._D3std3net4curl4HTTP4Impl6__dtorMFZv+0x12): undefined reference to `curl_slist_free_all'
/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/libphobos2.a(curl_12fd_140.o): In function `_D3std3net4curl4HTTP3dupMFZS3std3net4curl4HTTP':
std/net/curl.d:(.text._D3std3net4curl4HTTP3dupMFZS3std3net4curl4HTTP+0x53): undefined reference to `curl_slist_append'

[snip] 
```

我添加`-L-lcurl`到我的命令行（完整命令：）`dmd source.d -L-lcurl`，但我得到完全相同的结果。我安装了 libcurl4-openssl。我可以毫无问题地在这台计算机上构建一个[简单的 C curl](http://curl.haxx.se/libcurl/c/simple.html)`gcc simple.c -lcurl`程序（ ）。我不确定从这里到哪里来解决这个问题。

*更新：*以下是链接器的调用方式`dmd -v`：

```
gcc source.o -o source -m32 -lcurl -Xlinker -L/usr/lib -Xlinker -L/usr/lib64 -Xlinker --no-warn-search-mismatch -Xlinker --export-dynamic -lphobos2 -lpthread -lm -lrt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:16:05.047

正如您自己发现的那样，库的顺序不正确。引用*“GCC 简介”中的*一句话：*“调用另一个库中定义的外部函数的库应该出现在包含该函数的库之前。”* 在你的情况下`libphobos`调用外部库的（libcurl）函数，所以我想`libphobos`应该在`libcurl`.

该书可在线获取。与 OT 相关的章节在这里： http: [//www.network-theory.co.uk/docs/gccintro/gccintro_18.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T10:27:37.700

DMD 编译器在这方面显然被破坏了。我发布了一个补丁来修复它（也许不是最好的），但编译器的维护者根本不相信这需要修复，所以没有太多关于它的讨论。

*   [https://github.com/D-Programming-Language/dmd/pull/497](https://github.com/D-Programming-Language/dmd/pull/497)
*   [http://d.purmagic.com/issues/show_bug.cgi?id=7044](http://d.puremagic.com/issues/show_bug.cgi?id=7044)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T12:09:03.310

似乎是修复 phobos2/curl 链接器顺序问题的最简单方法，如本线程其他地方所述：

```
dmd source.d -L-lphobos2 -L-lcurl 
```

对我来说就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T22:16:44.053

我想知道我是否通过获取链接器命令`-v`并对其进行重新排序，以便`-lcurl`最后链接没有问题。

```
gcc source.o -o source -m32 -Xlinker -L/usr/lib -Xlinker -L/usr/lib64 -Xlinker --no-warn-search-mismatch -Xlinker --export-dynamic -lphobos2 -lpthread -lm -lrt -lcurl 
```

我仍然很好奇是否有办法在不手动运行链接器的情况下解决这个问题。

# datetime - 有没有更好的方法将 (MS) DateTime 编码为 Int？

> ID：10095153
> 
> 赞同：0
> 
> 时间：2012-04-10T19:28:15.600
> 
> 标签：datetime, drop-down-menu, type-conversion

背景（可以忽略/跳过）：

我觉得应该有更好的方法来做我正在做的事情，但我不知道它是什么，我认为我的解决方案有效，但我想我会问是否有更优雅或更快的东西或任何。

我正在使用 MS Razor MVC 开发一个网页，它使用 Html.DropDownList，它提供了一个选择列表 UI 控件，它将选择作为显示字符串映射到整数 ID 代码。（我*认为*我不能让它将字符串映射到 DateTime 值。）

但在某些情况下，我想从存储为 DateTime 对象的日期中进行选择。我意识到我可以在内存中创建另一个表，将 ID 代码与 DateTime 值相关联，但我想相反（也因为我认为我可能想将日期编码为整数，以解决网页烦恼的另一种解决方法），我会编码日期为 int。

问题：

如何最好地将 DateTime 对象的日期转换为 int 值，然后将 DateTime 的日期从编码的 int 设置回该日期。我的解决方案的主要丑陋之处在于 DateTime 提供了一个只读的 DayOfYear 函数，但我不知道将日期设置回（Date，DayOfYear），所以我编写了一个带有循环的方法，它很可爱但可能很慢.

我当前（好的）解决方案：

```
 public int encodeDate(DateTime date)
    {
        return ((date.Year - 2012) * 400) + date.DayOfYear;
    }

    public DateTime decodeDateCode(int dateCode)
    {
        int year = (dateCode / 400) + 2012;
        int day = dateCode % 400;
        // MS DateTime doesn't provide a direct reverse conversion for DayOfYear, so find it:
        int month = 1;
        int mThresh = DateTime.DaysInMonth(year, month);
        while (day > mThresh)
        {
            day -= mThresh;
            month++;
            mThresh = DateTime.DaysInMonth(year, month);
        }
        DateTime dateValue = new DateTime(year, month, day);
        return dateValue;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:47:42.297

何即将将时间戳格式化为 POSIX 时间（POSIX 时间/Unix 时间，请参阅[http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)）？

我自己也有类似的问题，在这里找到了一个很好的解决方案：[将 Unix 时间戳转换为 .NET DateTime](http://codeclimber.net.nz/archive/2007/07/10/convert-a-unix-timestamp-to-a-.net-datetime.aspx)

从链接：

```
DateTime ConvertFromUnixTimestamp(double timestamp)
{

}

double ConvertToUnixTimestamp(DateTime date)
{

} 
```

# python - Django 模板：格式化不应包含空格的控制结构

> ID：10095154
> 
> 赞同：2
> 
> 时间：2012-04-10T19:28:31.637
> 
> 标签：python, django, django-templates

我有一个代码格式问题。我需要输出一系列字符串，并且打印的字符串之间不应该有空格（因为我实际上是按段打印单词，突出显示拼写错误），但是我有点困惑如何缩进代码以使其可读。问题是当我识别代码时，换行符和空格成为输出的一部分。

```
<b>{% for sub in segment.details %}{% if sub.is_marked %}<u>{{sub.text}}</u
>{% else %}{{sub.text}}{% endif %}{% empty %}{{ segment.text }}{% endfor %}</b> 
```

显然，`{% spaceless %}`tag 在这里是无用的，因为它只去除 和 之间的`>`空格`<`。我可以，但我不想将其他段包装在单独的跨度中。在 XSLT 中通常`<xsl:text/>`用于此目的，Django 模板中的最佳实践是什么？

UPD：将我的最终解决方案作为单独的答案发布在下面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:34:09.310

您总是可以将换行符放在模板注释标签中：

```
<b>{% for sub in segment.details %}{# 
     #}{% if sub.is_marked %}{#
        #}<u>{{sub.text}}</u>{#
        #}{% else %}{{sub.text}}{#
     #}{% endif %}{#
     #}{% empty %}{{ segment.text }}{#
   #}{% endfor %}</b> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:20:11.397

你可以根据需要制作一个标签——最近我所有的 django 项目都有一个 templatetags 目录来存放这样的东西。它在时间/可读性 IMO 上很快就收回了成本。我最常见的标签是跨项目共享的。

最近的版本使简单的标签创建变得非常容易，这就是为什么它现在在我的工作流程中（尽管这与这个无关......）。

```
@register.tag
def remove_whitespace(parser, token):
    nodelist = parser.parse(('endremove_whitespace',))
    parser.delete_first_token()
    return RemoveSpaces(nodelist)

class RemoveSpaces(template.Node):
    def __init__(self, nodelist):
        self.nodelist = nodelist
    def render(self, context):
        output = self.nodelist.render(context)
        return ''.join(output.split()) # modify behavior if desired

{% load mytags %}
{% remove_whitespace %}
<b>All whitespace stripped</b>
{% endremove_whitespace %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:43:45.553

为了完整起见，我决定发布我的最终解决方案：

标签的`strip_spacenodes`代码：

```
def _strip__space__text_nodes(nodelist):
    for node in nodelist:
        if isinstance(node, template.TextNode):
            if not node.s.strip():
                node.s = ''
        else:
            for list_ in node.child_nodelists:
                _strip__space__text_nodes(getattr(node, list_, ()))

class StripSpaceNodes(template.Node):
    def __init__(self, nodelist):
        self.nodelist = nodelist
        _strip__space__text_nodes(nodelist)
    def render(self, context):
        return self.nodelist.render(context)

@register.tag
def strip_spacenodes(parser, token):
    nodelist = parser.parse(('endstrip_spacenodes',))
    parser.delete_first_token()
    return StripSpaceNodes(nodelist) 
```

用法：

```
{% strip_spacenodes %}
    {% for segment in segments %}
        {% if segment.is_marked %}
            {##}<b>{##}
                {% for sub in segment.details %}
                    {% if sub.is_marked %}
                        {##}<u>{{sub.text}}</u>{##}
                    {% else %}
                        {{sub.text}}
                    {% endif %}
                {% empty %}
                    {{ segment.text }}
                {% endfor %}
            {##}</b> {##}
        {% else %}
            {{ segment.text }}
        {% endif %}
    {% endfor %}
{% endstrip_spacenodes %} 
```

注意将`{##}`带有换行符和空格的单个 TextNode 在 HTML 标记之前分成三个节点的块：仅空格 TextNode、CommentNode 和带有 HTML 标记的 TextNode。仅包含空格的 TextNode 将被剥离。

# vb.net - 如何使用 VB.Net 在文本文档中换行

> ID：10095155
> 
> 赞同：6
> 
> 时间：2012-04-10T19:28:40.473
> 
> 标签：vb.net

使用

```
File.AppendAllText("c:\mytextfile.text", "This is the first line")
File.AppendAllText("c:\mytextfile.text", "This is the second line") 
```

如何使第二行文本出现在第一行下方，就好像我按了 Enter 键一样？这样做只是将第二行放在第一行旁边。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T19:32:05.917

使用`Environment.NewLine`

```
File.AppendAllText("c:\mytextfile.text", "This is the first line")
File.AppendAllText("c:\mytextfile.text", Environment.NewLine + "This is the second line") 
```

或者您可以使用`StreamWriter`

```
Using writer As new StreamWriter("mytextfile.text", true)
    writer.WriteLine("This is the first line")
    writer.WriteLine("This is the second line")
End Using 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:37:00.980

如果你有很多这样的调用，最好使用 StringBuilder：

```
Dim sb as StringBuilder = New StringBuilder()
sb.AppendLine("This is the first line")
sb.AppendLine("This is the second line")
sb.AppendLine("This is the third line")
....
' Just one call to IO subsystem
File.AppendAllText("c:\mytextfile.text", sb.ToString()) 
```

如果您确实有很多字符串要编写，那么您可以将所有内容包装在一个方法中。

```
Private Sub AddTextLine(ByVal sb As StringBuilder, ByVal line as String)
    sb.AppendLine(line)
    If sb.Length > 100000 then
        File.AppendAllText("c:\mytextfile.text", sb.ToString()) 
        sb.Length = 0
    End If        
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T19:30:26.327

也许：

```
File.AppendAllText("c:\mytextfile.text", "This is the first line")
File.AppendAllText("c:\mytextfile.text", vbCrLf & "This is the second line") 
```

[`vbCrLf`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.constants.vbcrlf.aspx)是换行符的常数。

# mysql - MySQL - 使用外键索引插入

> ID：10095157
> 
> 赞同：0
> 
> 时间：2012-04-10T19:28:52.803
> 
> 标签：mysql, insert, bulkinsert, insert-update, lastinsertid

这是场景：我有 2 个表和 2 个临时表。在将用户数据插入官方表之前，我将它们插入到临时表中以让他们进行检查。有一个`company`包含公司信息的`contact`表格，以及一个包含联系信息的表格。该`contact`表有一个称为该表`company_id`的外键索引的`company`字段。

临时表的设置方式相同。

我想做类似的事情：`INSERT INTO company () SELECT * FROM temp_company;`和`INSERT INTO contact () SELECT * FROM temp_contact`

我的问题是，如何使用这样的语句将外键从表转移`temp_company`到新插入的 id `company`？有没有办法做到这一点？

目前我是：

1.  抓取临时行
2.  一个接一个地插入它们
3.  获取最后一个插入 id
4.  然后使用新的最后插入 ID 插入联系人

我只是不知道这是否是最有效的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:49:37.243

如果两个表中的列数相同，那么您应该能够使用那里的语法吗？只需取出`()`. 只要确保没有任何重复的主键：

```
INSERT INTO company SELECT * FROM temp_company;
INSERT INTO contact SELECT * FROM temp_contact; 
```

您还可以专门指定要插入的列，这样您就可以准确指定要插入的列作为新 ID。

```
INSERT INTO company (`ID`,`col_1`,...,`last_col`) SELECT `foreign_key_col`,`col_1`,...,`last_col` FROM temp_company;
INSERT INTO contact (`ID`,`col_1`,...,`last_col`) SELECT `foreign_key_col`,`col_1`,...,`last_col` FROM temp_contact; 
```

只需确保您选择了正确的列数。

# facebook-graph-api - Facebook Graph API 调用仅发送给指定的第一人

> ID：10095159
> 
> 赞同：0
> 
> 时间：2012-04-10T19:29:05.500
> 
> 标签：facebook-graph-api

我有以下 Facebook Graph API 调用：

```
 FB.ui({
        method: "send",
        to: '123123,456456',
        name: 'People Argue Just to Win',
        link: 'http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html'
    }, function(response) {
        // some stuff
    }); 
```

每当它被调用时，我的消息的唯一接收者是具有 id 的用户`123123`。如果我切换这两个号码，则`456456`是唯一的收件人。

据我所知，我使用的 API 完全符合我的预期，那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:07:23.907

`send`指定多个收件人的方法似乎不可能： [http ://bugs.developers.facebook.net/show_bug.cgi?id=18806](http://bugs.developers.facebook.net/show_bug.cgi?id=18806)

不过，看起来确实可以使用该`apprequests`方法完成：

```
 FB.ui({
        method: 'apprequests',
        message: 'My message',
        data: {},
        title: "My Title",
        to: [123123, 456456]
    }); 
```

就我的目的而言，这已经足够接近了。

# git - git：合并两个分支：正确的步骤是什么？

> ID：10095160
> 
> 赞同：2
> 
> 时间：2012-04-10T19:29:08.013
> 
> 标签：git, github

对于我的一个项目，我通常需要从开发分支创建新分支，当我完成工作（在新分支中）时，我需要将新分支合并到开发分支中。这是我做的步骤：

```
 git clone –b development <git repository url>
 git branch new-branch
 git checkout new-branch
 git push --all 
```

我在新分支中编写代码并在新分支中提交/推送代码。

现在我需要将新分支合并到开发中（请注意，当我在新分支中完成任务时，开发分支会进一步提交其他开发人员）。我的查询是将新分支合并到开发分支并将其推送到远程存储库的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:36:31.720

我更喜欢将功能分支作为压扁的提交放在上面，`develop(ment)`然后将其丢弃。

```
git checkout development
git merge --squash new-branch
git branch -D new-branch
git push origin :new-branch 
```

这样，您将保留一个包含整个功能的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:37:35.290

如果其他人正在推动“发展”，那么正如您可能已经看到的那样，您的推动可能会由于“非快进”警告而失败。因此，正确的方法是首先从开发、构建和测试中提取更改，然后再推回开发。以下是适合您的工作流程：

```
$ git clone -b development <development repository>  <devdir>; cd <devdir>
$ git checkout -b new-branch
$ <edit, build test>
$ git add ...
$ git commit ...
# repeat above 3
#
# now you want to get your changes back on development
$ git pull origin development
$ <build, test - to ensure new-branch works w/ latest development>
$ git push origin new-branch:development 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T04:49:00.363

```
git checkout master
git merge dev
git commit -m 'merged branches' 
```

# c# - 使用 GData 将任何文件上传到 Google Docs

> ID：10095163
> 
> 赞同：0
> 
> 时间：2012-04-10T19:29:20.863
> 
> 标签：c#, .net, gdata, gdata-api, google-docs-api

我正在尝试使用 Google Docs GData API (.NET) 将文件上传到我的文档，但我不断收到错误消息。我找不到任何使用这种方法的例子，所以我什至不确定我是否正确使用它。

```
DocumentsService docService = new DocumentsService("MyDocsTest");
docService.setUserCredentials("w****", "*****");

DocumentsListQuery docQuery = new DocumentsListQuery();
DocumentsFeed docFeed = docService.Query(docQuery);

foreach (DocumentEntry entry in docFeed.Entries)
{
    Console.WriteLine(entry.Title.Text);
}

Console.ReadKey();
Console.WriteLine();

if (File.Exists(@"testDoc.txt") == false)
{
    File.WriteAllText(@"testDoc.txt", "test");
}

docService.UploadDocument(@"testDoc.txt", null); // Works Fine
docService.UploadFile(@"testDoc.txt", null, @"text/plain", false); // Throws Error 
```

上面的代码会抛出 GDataRequestException：

```
Execution of request failed: https://docs.google.com/feeds/default/private/full?convert=false 
```

这有点令人恼火，因为这个 API 可能非常有用。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:25:37.677

经过大量的实验和研究，我得到了它的工作。在我的困境中，将把这个留给其他人。我将留下使用速记以供参考。

```
// Start the service and set credentials
Docs.DocumentsService service = new Docs.DocumentsService("GoogleApiTest");
service.setUserCredentials("username", "password");

// Initialize the DocumentEntry
Docs.DocumentEntry newEntry = new Docs.DocumentEntry();
newEntry.Title = new Client.AtomTextConstruct(Client.AtomTextConstructElementType.Title, "Test Upload"); // Set the title
newEntry.Summary = new Client.AtomTextConstruct(Client.AtomTextConstructElementType.Summary ,"A summary goes here."); // Set the summary
newEntry.Authors.Add(new Client.AtomPerson(Client.AtomPersonType.Author, "A Person")); // Add a main author
newEntry.Contributors.Add(new Client.AtomPerson(Client.AtomPersonType.Contributor, "Another Person")); // Add a contributor
newEntry.MediaSource = new Client.MediaFileSource("testDoc.txt", "text/plain"); // The actual file to be uploading

// Create an authenticator
Client.ClientLoginAuthenticator authenticator = new Client.ClientLoginAuthenticator("GoogleApiTest", Client.ServiceNames.Documents, service.Credentials);

// Setup the uploader
Client.ResumableUpload.ResumableUploader uploader = new Client.ResumableUpload.ResumableUploader(512);
uploader.AsyncOperationProgress += (object sender, Client.AsyncOperationProgressEventArgs e) =>
    {
        Console.WriteLine(e.ProgressPercentage + "%"); // Progress updates
    };
uploader.AsyncOperationCompleted += (object sender, Client.AsyncOperationCompletedEventArgs e) =>
    {
        Console.WriteLine("Upload Complete!"); // Progress Completion Notification
    };

Uri uploadUri = new Uri("https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false"); // "?convert=false" makes the doc be just a file
Client.AtomLink link = new Client.AtomLink(uploadUri.AbsoluteUri);
link.Rel = Client.ResumableUpload.ResumableUploader.CreateMediaRelation;
newEntry.Links.Add(link);

uploader.InsertAsync(authenticator, newEntry, new object()); // Finally upload the bloody thing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T00:25:38.213

您能否检查正在抛出的 GDataRequestException 的 ResponseString 属性以获得详细的错误消息？

在尝试调试此类问题时，使用 Fiddler 之类的工具捕获您的请求也会对您有很大帮助。

# installation - ubuntu - 如何以该用户身份安装软件，而不是使用 sudo。收到错误“无法打开锁定文件”

> ID：10095168
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:29:34.030
> 
> 标签：installation, sudo, elasticsearch

我被告知不要使用 sudo 以便相关软件包由普通用户在本地安装。

鉴于我得到以下信息，我该怎么做：

```
apt-get install elasticsearch

E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)
E: Unable to lock the administration directory (/var/lib/dpkg/), are you root? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:32:25.933

谁告诉你这可能是错误的。在 Ubuntu（或任何 Debian 衍生产品）上安装软件需要 root 权限。预打包的软件只能以 root 身份安装。

不过，可以手动编译和安装软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:32:55.020

您将不得不将自己放在 sudoers 列表中或使用 sudo。如果你没有权限，你真的别无选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:06:20.217

apt-get upgrade 也需要root权限，所以：

```
sudo apt-get update && sudo apt-get upgrade 
```

# c# - 检测winform的控件

> ID：10095177
> 
> 赞同：0
> 
> 时间：2012-04-10T17:16:50.537
> 
> 标签：c#, .net, winforms

我有一个圆形区域光标，它是一个连接到光标的圆形 winform（半透明）。单击时，我想在光标/表单区域下方的父winform区域中获取控件。这些控件必须以不同形式的圆形布局排列。我正在研究 C#.NET。

请告诉我如何访问winform的控件并在上面描述的我的应用程序的上下文中更改它们的位置？比如我需要什么课程、程序、资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:51:30.180

表单上的所有控件都有坐标 (X,Y) 来描述表单上的位置。因此，您需要获取“圆光标”覆盖的点列表（点是坐标），然后检查每个点的控件。（然后删除您的列表）

参见：[C#获取窗体上某个位置的控件](https://stackoverflow.com/questions/4776299/c-sharp-get-the-control-at-a-certain-position-on-a-form)

# jquery - 视频、flash 或... HTML 视频

> ID：10095179
> 
> 赞同：0
> 
> 时间：2012-04-10T19:30:45.140
> 
> 标签：jquery, html, flash, video, self

我对 HTML、CSS、JS 或 PHP 并不陌生，我已经做了 diff。网页，但每次我包含来自 YouTube 或其他外部网站的视频时，我总是使用 iframe 或嵌入代码。所以，今天我开始制作自己的个人页面，我想知道如何插入自己的视频。我有两个不同的网络主机，一个用于上传视频，另一个用于网页。所以流（我正确吗？）来自主机#1，主机#2 用于网页。

我什至不知道如何在线格式化或转换视频 mpeg、avi 到 flv（使用我自己的页面），但这不是我发表这篇文章的原因。我是否需要将它们转换为 flv，才能将视频放在我的页面上？转换后的视频质量如何（质量下降）？

如何制作自己的在线视频播放器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:33:31.593

我更喜欢使用 Vimeo 上传我的视频，他们会为您完成所有转换和优化，当然还会在他们的服务器上托管视频。当我在自己的服务器上加载视频时，由于带宽限制和吞吐量，它们很快就会减慢速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:38:48.243

[DIVE INTO HTML5有](http://diveintohtml5.info/)[一篇关于 HTML5 视频](http://diveintohtml5.info/video.html)的优秀文章。您应该阅读 AZ 的这篇文章（喝杯咖啡）。它解决了与 HTML5 视频相关的几乎所有问题，包括您应该转换为 HTML5 视频的原因、视频格式、如何转换视频以及如何在页面中添加标记以播放这些视频。

如果您想知道如何播放 HTML5 视频，请查看[HTML5 视频播放器比较图表](http://praegnanz.de/html5video/)。仅供参考，HTML5 视频播放器是浏览器原生 HTML5 播放器的 JavaScript 包装器，它应该提供皮肤、API、事件和 Flash 回退支持。

话虽如此，如果您不关心自定义皮肤、事件处理、API 等，则根本不需要 HTML5 播放器。您所需要的只是[Video for Everyone](http://camendesign.com/code/video_for_everybody#video-code)建议的“代码” （但您仍然需要 SWF 文件播放 MP4 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:39:12.930

如果您需要将视频文件转换为另一种格式，我会尝试一下：[Miro Video Converter](http://www.mirovideoconverter.com/)

# java - 将图像大小调整为固定分辨率后如何去除不必要的黑色背景？

> ID：10095182
> 
> 赞同：1
> 
> 时间：2012-04-10T19:31:13.000
> 
> 标签：java, image, java-2d

在将每个图像添加到我的数据库之前，我一直在将其调整为固定分辨率。为此，我一直在使用 FileUpload 和以下代码：-

```
logo_name = System.currentTimeMillis() + ".png";
            File  uploadedFile = new File("/www/static.appcanvas.com/"+logo_name);
            BufferedImage bi = ImageIO.read(item.getInputStream()); 
            Image img = bi.getScaledInstance(125,125,Image.SCALE_SMOOTH);
            BufferedImage img_logo = new BufferedImage(125,125,BufferedImage.TYPE_INT_RGB);
            Graphics2D g = img_logo.createGraphics();
            g.drawImage(img,0,0,null); 
            if(g != null) g.dispose();
            ImageIO.write(img_logo,"png",uploadedFile) 
```

我得到了所需分辨率的图像，但有一个我无法删除的不必要的黑色背景。前图：[http](http://www.rocketcampus.com/images/test.png) ://www.rocketcampus.com/images/test.png 后图： http: [//static.appcanvas.com/1334085929080.png](http://static.appcanvas.com/1334085929080.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:17:29.703

您可以将您的类型更改`BufferedImage`为`BufferedImage.TYPE_INT_ARGB`具有透明背景。

这对我有用：

```
public static void main(String[] args) throws IOException {
    FileInputStream item = new FileInputStream("D:/tmp/OpenFlexo_07.gif");
    String logo_name = System.currentTimeMillis() + ".png";
    File uploadedFile = new File("d:/www/static.appcanvas.com/" + logo_name);
    BufferedImage bi = ImageIO.read(item);
    Image img = bi.getScaledInstance(125, 125, Image.SCALE_SMOOTH);
    BufferedImage img_logo = new BufferedImage(125, 125, BufferedImage.TYPE_INT_RGB);
    Graphics2D g = img_logo.createGraphics();
    g.drawImage(img, 0, 0, null);
    if (g != null) {
        g.dispose();
    }
    uploadedFile.getParentFile().mkdirs();
    uploadedFile.createNewFile();
    ImageIO.write(img_logo, "png", uploadedFile);

} 
```

# .net - CSLA 框架中的 BusinessBase 和 BusinessListBase 类是什么？

> ID：10095184
> 
> 赞同：1
> 
> 时间：2012-04-10T19:31:15.130
> 
> 标签：.net, csla

我正在学习使用 CSLA 框架用 VB.net 编写的大型遗留应用程序。许多对象似乎继承自 BusinessBase 和 BusinessListBase。当我在 Visual Studio 中“转到定义”时，我看到这些类是 CSLA 命名空间的一部分。这些课程是什么？它们在 CSLA 框架中扮演什么角色？它们与根对象和子对象等其他 CSLA 概念有何关系？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T20:09:24.733

BusinessBase 和BusinessListBase 是所有可编辑（即非只读）业务对象继承的抽象基类。任何一个都可以是根对象或子对象，具体取决于业务对象图。这些类为应用程序中的实例类提供 CSLA 框架属性和方法，例如 IsNew、IsDirty 和 Save()。基类还完成与 DataPortal 通信、检查子类定义的业务规则、管理对象的编辑/撤消级别等繁重的工作。简而言之，业务对象继承这些类之一，以便与 CSLA 框架的其余部分集成。在 CSLA 框架的范围内，如果业务对象需要执行任务或公开属性，这些类就是发生这种情况的地方。

这些类不做的一些*事情*：

*   定义业务属性（它们确实定义了对象/生命周期管理属性，例如 IsNew、IsSavable 等，但没有定义保存相关业务数据的属性）
*   初始化业务属性（同样，CSLA 的管理属性由基类处理）
*   分配业务规则（如“客户名称必须有值”）
*   与数据库对话
*   将对象标记为可序列化
*   通过调用确定哪个 foo.DataPortal_X 方法被执行`DataPortal.Fetch<foo>(args);`（由 DataPortal 完成）

BusinessListBase 用于列表类，并且继承了 .NET 基本列表功能，因此作为列表的 CSLA 业务对象只需要继承 BusinessListBase。您可以按照您的期望从 BusinessListBase 添加、删除等对象，因为该对象是一个列表。

ReadOnlyBase 和 ReadOnlyListBase 是抽象基类，它们的用途与其业务对应物相同，但也确保对象是只读的。它们提供的主要是业务基础的一个子集，还有一些额外的约束，例如阻止属性实现 setter。

我建议查看[这个问题](https://stackoverflow.com/questions/479497/how-can-i-learn-csla-net-fast)以获取有关 CSLA 的一些权宜之计信息。

# raii - 为什么RAII如此命名？

> ID：10095185
> 
> 赞同：8
> 
> 时间：2012-04-10T19:31:19.257
> 
> 标签：raii

我对这个习语的感觉是它很有用，因为它确保在使用它们的对象超出范围后释放资源。

换句话说，它更多的是关于**de-acquisition**和**de-initialisation**，那么为什么这个成语会这样命名呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T19:51:45.160

首先，我应该指出，它被广泛认为是一个名称不佳的成语。许多人更喜欢 SBRM，它代表堆栈绑定资源管理。虽然我（不情愿地）同意使用“RAII”只是因为它广为人知和使用，但我确实认为 SBRM 可以更好地描述真实意图。

其次，当RAII 是新的时，它既适用于资源的获取，也适用于资源的释放。特别是，在当时很常见的是，初始化分两步进行。您首先定义一个对象，然后才动态分配与该对象关联的任何资源。许多风格指南都提倡这一点，主要是因为当时（在 C++ 有异常处理之前）没有很好的方法来处理构造函数中的失败。因此，风格指南经常说，构造函数应该只做最少的工作，特别是避免任何可能失败的事情——尤其是分配资源（还有一些人仍然这么说）。

不过，其中相当一部分已经处理了在析构函数中*释放*资源的问题，因此这与以前的做法并没有那么明显的区别。

# lotus-domino - Domino Microsoft Visual C++ 调试错误：nHTTP.EXE

> ID：10095187
> 
> 赞同：0
> 
> 时间：2012-04-10T19:31:50.170
> 
> 标签：lotus-domino

这个错误今天在我们运行 Domino 8.5.3 的开发服务器上发生了两次：

[http://dl.dropbox.com/u/40159/DominoDebugError.png](http://dl.dropbox.com/u/40159/DominoDebugError.png)

发生这种情况时，它会减慢 HTTP 爬行速度，我们必须重新启动服务器。任何人对为什么会发生这种情况或预防方法有任何想法？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T00:24:20.213

基于[此](https://stackoverflow.com/questions/793375/what-could-cause-damage-after-normal-block-error)，Domino 服务器的 HTTP 任务中似乎发生了内存损坏。如果您没有在服务器上运行任何可能导致此问题的自定义或第 3 方加载项，那么这似乎是 IBM 的问题，您应该致电他们寻求支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:56:14.640

您是否在 Lotusscript 中处理任何 UTF-8 文件？如果您注意文件不是 UTF-8 格式，那么您将遇到内存损坏。

# wpf - WPF 列表和 ObservableCollections

> ID：10095194
> 
> 赞同：2
> 
> 时间：2012-04-10T19:32:26.830
> 
> 标签：wpf, mvvm, dns, viewmodel

所以这可能已经以更一般的形式得到了回答，但这里有一个更具体的案例，我想知道应该如何解决这个问题。我正在编写一个 WPF 应用程序并尝试使用 MVVM 模式（第一次使用这种模式）。

我的域对象 Viper 具有多个属性和集合，并在多个现有应用程序中使用。我现在已经实现`INotifyPropertyChanged`了我想在我的新 WPF 应用程序中绑定的所有属性。我现在正在创建一个位于域对象和 WPF 视图之间的视图模型。问题是 Viper 对象中作为集合的所有属性都是 Lists 而不是 ObservableCollections。我不能简单地将它们设为 ObservableCollections，因为这会影响使用此对象模型的所有其他应用程序（不支持诸如`AddRange`等）。

这个新的 WPF 应用程序维护了一个 Viper 对象列表，这些对象将用于（通过视图模型）控制 GUI。为了让事情更复杂一点，应用程序将以数据的形式接收`List<Viper>`数据。该应用程序循环遍历此 Viper 对象列表，并将每个传入的 Viper 数据合并到现有的 Viper 中（按索引）。因此，假设我的传入 Viper 对象将一个项目添加到现有 Viper ( `List<Event>`) 的 Events 属性中，因为这不是`ObservableCollection`GUI 不会更新事件网格。即使我在视图模型中将其转换为`List<Event>`底层`OC<Event>`Viper 对象，它会合并所有属性和集合，而不是视图模型，因此修改仍然不会触发任何事件，因为视图模型 OC 没有更新。Viper 对象和所有子对象都实现了一个自定义`MergeWith()`确定传入数据应如何合并的函数。一些执行替换，一些附加，一些更新。

处理这种情况的正确方法是什么？让我知道是否有任何不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:09:18.353

在 MVVM 中有两种方法可以将 a 的属性暴露`Model`给`View`from `ViewModel`：或者通过将整个 Model 暴露给 View，或者通过在 ViewModel 中暴露 View 关心的单个属性。

这两种方法同样有效，尽管您经常使用哪种方法取决于具体情况。

在您的情况下，您必须使用并非旨在通知 UI 更改的现有模型对象，我将使用在 ViewModel 中为视图创建属性的第二种方法。

例如，

```
<DataGrid ItemsSource="{Binding SelectedViper.Events}" /> 
```

```
public class ViperViewModel : INotifyPropertyChanged
{
    private Viper _selectedViper;

    public Viper SelectedViper 
    { 
        get { return _selectedViper; }
        set
        {
            if (value != _selectedViper)
            {
                _selectedViper= value;
                RaisePropertyChanged("SelectedViper");
            }
        }
    }
} 
```

会成为：

```
<DataGrid ItemsSource="{Binding ViperEvents}" /> 
```

```
public class ViperViewModel : INotifyPropertyChanged;
{
    private Viper _selectedViper;
    private ObservableCollection<Event> _viperEvents;

    public ViperViewModel()
    {
        this.PropertyChanged += ViperViewModel_PropertyChanged;
    }

    void ViperViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "SelectedViper")
        {
            if (SelectedViper == null)
                ViperEvents = null;
            else
                ViperEvents = new ObservableCollection<Event>(SelectedViper.Events);
        }
    }

    public Viper SelectedViper
    { 
        get { return _selectedViper; }
        set
        {
            if (value != _selectedViper)
            {
                _selectedViper= value;
                RaisePropertyChanged("SelectedViper");
            }
        }
    }

    public ObservableCollection<Event> ViperEvents
    { 
        get { return _viperEvents; }
        set
        {
            if (value != _viperEvents)
            {
                _viperEvents = value;
                RaisePropertyChanged("ViperEvents");
            }
        }
    }
} 
```

前面的工作要多一些，但它使维护变得更加简单

作为替代方案，您可以覆盖`ObservableCollection`该类并实现`List<T>`您感兴趣的方法。例如，我有一个`ObservableCollectionEx`当前实现`Contains`、`IndexOf`、`AddRange`和的类`RemoveRange`。如果您有兴趣，[这里](https://stackoverflow.com/a/7599398/302677)`Sort`有一个方法示例。

当然，这也意味着您可能必须更新使用该属性的所有其他内容以使用 an`ObservableCollectionEx<T>`而不是 a`List<T>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:15:34.450

这里的想法基本上是在绑定中保持相同的集合并抑制通知，直到您需要它们。

```
public class Oc<T> : ObservableCollection<T>
{
    private object _lockObject;
    private bool _suppressChangeNotification;

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        if (!_suppressChangeNotification)
            base.OnCollectionChanged(e);
    }

    public void Merge(IEnumerable<T> newItems )
    {           
        //don't know if you need a lock..that's your determination
        lock (_lockObject)
        {
            _suppressChangeNotification = true;
            foreach (var newItem in newItems)
            {
                //whatever you do here, insert/remove based on some condition
                //i'll just put insert for now
                InsertItem(0,newItem);
            }
             _suppressChangeNotification = false;
             OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:36:06.757

解决此问题的一种方法是将`Merged`事件添加到正在调用的 Viper 对象`MergeWith()`。这样，您的视图模型可以订阅该事件并在更新发生时自行更新。

# selenium - id 不存在时查找标签文本

> ID：10095195
> 
> 赞同：2
> 
> 时间：2012-04-10T19:32:32.937
> 
> 标签：selenium, selenium-webdriver

我正在使用 selenium Web 驱动程序在以下 html 标记中查找标签文本：

```
<tr id="row" style="display: inline; padding-left: 10px; padding-right: 10px;">
<td>
<table width="776" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td align="right">&nbsp;</td>
<td>&nbsp;</td>
<td align="right">&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td width="92" height="25" align="left">**Label Text&nbsp**;</td>
<td width="227">
<td width="170" align="left">">**Label Text 2&nbsp**;</td>
</td>
</tr> 
```

我使用了 driver.findElement(By.id("row")).getText()，但它什么也没得到。如何让它打印标签文本。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:05:57.677

要访问“标签文本”单元格，您需要搜索单元格本身，而*不是*包含它们的行。如果您使用的是 WatiN，就会出现这种情况。使用“标签文本”查找任何元素的另一种方法是：

```
ReadOnlyCollection<IWebElement> temp = driver.FindElements(By.XPath("//td[@text='Label Text'])); 
```

如果您的示例中的“标签文本”是不同文本的占位符，这将变得很棘手，您可以尝试抓取包含这些单元格的 tableRow 中的每个单元格。但是，只有第一行似乎有一个 id。希望这可以帮助！

编辑：或者，如果您确切知道您想要哪个单元格并且它具有独特的大小（如您的示例），那么一个（非常）hacky 解决方案您可以尝试查找所有单元格，然后手动搜索它们的宽度。例如：foreach(IWebElement temp in tempCells) { if(temp.Size.Width == 170) temp.Text; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:50:31.893

```
driver.FindElement(By.XPath(xpath)).GetAttribute("text") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:16:10.697

使用方法`getText`

```
driver.findElement(By.xpath("")).getText(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T00:02:45.710

我的看法：

```
List<WebElement> list;
list = driver.findElements(By.xpath("id('row')//td[string-length(text()) > 1]")); 
```

这应该得到一个文本节点长于 1 字符`List`的元素（如果实际计数为 5 =)，则更改为 5）。`<td>``&nbsp;`

或者可能

```
list = driver.findElements(By.xpath("id('row')//td[@align='left']")); 
```

如果您想要获得的所有元素确实有共同点`align = 'left'`，那么可以在您的示例中看到。

# android - 设置背景Drawable时填充在哪里？

> ID：10095196
> 
> 赞同：91
> 
> 时间：2012-04-10T19:32:37.283
> 
> 标签：android

我的视图`EditText`和`Button`视图中有这个问题，我有一个很好的填充物让它们远离文本，但是当我改变背景`setBackgroundDrawable`或`setBackgroundResource`填充物永远丢失时。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-02-25T05:58:33.380

我发现添加一个 9 补丁作为背景资源会重置填充 - 虽然有趣的是，如果我添加了一个颜色或非 9 补丁图像，它没有。解决方案是在添加背景之前保存填充值，然后再设置它们。

```
private EditText value = (EditText) findViewById(R.id.value);

int pL = value.getPaddingLeft();
int pT = value.getPaddingTop();
int pR = value.getPaddingRight();
int pB = value.getPaddingBottom();

value.setBackgroundResource(R.drawable.bkg);
value.setPadding(pL, pT, pR, pB); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-03T19:16:31.687

我能够将元素包装在另一个布局中，在本例中为`FrameLayout`. `FrameLayout`这使我能够在不破坏包含的填充的情况下更改背景`RelativeLayout`。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/commentCell"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:background="@drawable/comment_cell_bg_single" >

    <RelativeLayout android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="20dp" >

    <ImageView android:id="@+id/sourcePic"
               android:layout_height="75dp"
               android:layout_width="75dp"
               android:padding="5dp"
               android:background="@drawable/photoframe" 
     />
... 
```

`Drawable`另一个选项是在按照上面的建议设置背景后以编程方式设置它。只需确保计算像素以校正设备的分辨率。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-01T22:14:21.093

我在 TextView 中遇到了这个问题，所以我将 TextView 子类化并创建了该方法的 Override`TextView.setBackgroundResource(int resid)`方法。像这样：

```
@Override
public void setBackgroundResource(int resid) {
    int pl = getPaddingLeft();
    int pt = getPaddingTop();
    int pr = getPaddingRight();
    int pb = getPaddingBottom();

    super.setBackgroundResource(resid);

    this.setPadding(pl, pt, pr, pb);
} 
```

这样，它在设置资源之前获取项目的填充，但实际上并没有弄乱方法的原始功能，除了保留填充。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-24T00:08:04.583

还没有彻底测试过这个超级彻底，但这种方法可能有用：

```
 /**
 * Sets the background for a view while preserving its current padding. If the background drawable
 * has its own padding, that padding will be added to the current padding.
 * 
 * @param view View to receive the new background.
 * @param backgroundDrawable Drawable to set as new background.
 */
public static void setBackgroundAndKeepPadding(View view, Drawable backgroundDrawable) {
    Rect drawablePadding = new Rect();
    backgroundDrawable.getPadding(drawablePadding);
    int top = view.getPaddingTop() + drawablePadding.top;
    int left = view.getPaddingLeft() + drawablePadding.left;
    int right = view.getPaddingRight() + drawablePadding.right;
    int bottom = view.getPaddingBottom() + drawablePadding.bottom;

    view.setBackgroundDrawable(backgroundDrawable);
    view.setPadding(left, top, right, bottom);
} 
```

使用它而不是 view.setBackgroundDrawable(Drawable)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-17T14:20:01.113

只是为了解释发生了什么：

它实际上是一个功能。您可能用作背景的布局可绘制对象可以通过这种方式定义填充：

```
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:paddingRight="8dp"
    >
    ...
</layer-list> 
```

此填充将与新的可绘制背景一起设置。没有填充时，默认值为 0。

来自 Romain Guy 撰写的电子邮件的更多信息： [https ://www.mail-archive.com/android-developers@googlegroups.com/msg09595.html](https://www.mail-archive.com/android-developers@googlegroups.com/msg09595.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-16T22:07:40.260

向后兼容版本的cottonBallPaws 的答案

```
/** 
  * Sets the background for a view while preserving its current     padding. If the background drawable 
  * has its own padding, that padding will be added to the current padding. 
 *  
 * @param view View to receive the new background. 
 * @param backgroundDrawable Drawable to set as new background. 
 */ 
@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
@SuppressWarnings("deprecation")
public static void setBackgroundAndKeepPadding(View view, Drawable backgroundDrawable) {
    Rect drawablePadding = new Rect();
    backgroundDrawable.getPadding(drawablePadding);
    int top = view.getPaddingTop() + drawablePadding.top;
    int left = view.getPaddingLeft() + drawablePadding.left;
    int right = view.getPaddingRight() + drawablePadding.right;
    int bottom = view.getPaddingBottom() + drawablePadding.bottom;

    int sdk = android.os.Build.VERSION.SDK_INT;
    if(sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
        view.setBackgroundDrawable(backgroundDrawable);
    } else {
        view.setBackground(backgroundDrawable);
    }
    view.setPadding(left, top, right, bottom);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T19:39:24.437

您可以通过使用 9-patch 图像并在可绘制对象中定义内容区域来提供一些填充。 [检查这个](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

您还可以从 xml 或以编程方式在布局中设置填充

xml 填充标签

```
android:padding
android:paddingLeft
android:paddingRight
android:paddingTop
android:paddingBottom 
```

在调用 setBackgroundDrawable 后，您可以尝试在代码中手动设置填充，方法是在 EditText 或按钮视图上调用 setPadding

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-26T11:39:05.567

对于普通搜索者，

只需在 setBackgroudDrawable 之后添加 setPadding。当您更改可绘制对象时，您必须再次调用 setPadding。

喜欢：

```
view.setBackgroundDrawable(backgroundDrawable);
view.setPadding(x, x, x, x); 
```

最干净的方法是在指向可绘制图像文件的 xml-drawable 中定义填充

伟大的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-07T09:50:21.120

结合所有的解决方案，我在 Kotlin 中写了一个：

```
fun View.setViewBackgroundWithoutResettingPadding(@DrawableRes backgroundResId: Int) {
    val paddingBottom = this.paddingBottom
    val paddingStart = ViewCompat.getPaddingStart(this)
    val paddingEnd = ViewCompat.getPaddingEnd(this)
    val paddingTop = this.paddingTop
    setBackgroundResource(backgroundResId)
    ViewCompat.setPaddingRelative(this, paddingStart, paddingTop, paddingEnd, paddingBottom)
}

fun View.setViewBackgroundWithoutResettingPadding(background: Drawable?) {
    val paddingBottom = this.paddingBottom
    val paddingStart = ViewCompat.getPaddingStart(this)
    val paddingEnd = ViewCompat.getPaddingEnd(this)
    val paddingTop = this.paddingTop
    ViewCompat.setBackground(this, background)
    ViewCompat.setPaddingRelative(this, paddingStart, paddingTop, paddingEnd, paddingBottom)
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-03-09T18:15:47.483

我的解决方案是扩展视图（在我的情况下为*EditText*）并覆盖`setBackgroundDrawable()`和`setBackgroundResource()`方法：

```
// Stores padding to avoid padding removed on background change issue
public void storePadding(){
    mPaddingLeft = getPaddingLeft();
    mPaddingBottom = getPaddingTop();
    mPaddingRight = getPaddingRight();
    mPaddingTop = getPaddingBottom();
}

// Restores padding to avoid padding removed on background change issue
private void restorePadding() {
    this.setPadding(mPaddingLeft, mPaddingTop, mPaddingRight, mPaddingBottom);
}

@Override
public void setBackgroundResource(@DrawableRes int resId) {
    storePadding();
    super.setBackgroundResource(resId);
    restorePadding();
}

@Override
public void setBackgroundDrawable(Drawable background) {
    storePadding();
    super.setBackgroundDrawable(background);
    restorePadding();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-29T09:12:36.120

只需在 android studio 中将 lib 更改为 v7:22.1.0 就像这样 compile 'com.android.support:appcompat-v7:22.1.0'

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-16T17:01:20.300

大多数答案都是正确的，但应该正确处理背景设置。

首先获取视图的填充

```
//Here my view has the same padding in all directions so I need to get just 1 padding
int padding = myView.getPaddingTop(); 
```

然后设置背景

```
//If your are supporting lower OS versions make sure to verify the version
if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    //getDrawable was deprecated so use ContextCompat                            
    myView.setBackgroundDrawable(ContextCompat.getDrawable(context, R.drawable.bg_accent_underlined_white));
} else {
    myView.setBackground(ContextCompat.getDrawable(context, R.drawable.bg_accent_underlined_white));
} 
```

然后设置视图在背景更改之前的填充

```
myView.setPadding(padding, padding, padding, padding); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-25T03:48:47.043

我找到了另一个解决方案。我遇到了与Buttons类似的问题。最后，我补充说：

```
android:scaleX= "0.85"
android:scaleY= "0.85" 
```

它对我有用。默认填充几乎相同。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-27T23:04:08.397

也许它与某人有关

在选择器中使用可绘制的小技巧不会删除填充

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/anything" />
</selector> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-25T14:42:39.527

就我而言，我有一个可绘制对象并且非常愚蠢，我没有看到 xml 中的填充都设置为 0。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-04-08T14:42:50.810

这里是cottonBallPaws 的setBackgroundAndKeepPadding 的改进版本。即使您多次调用该方法，这也会保持填充：

```
/**
 * Sets the background for a view while preserving its current padding. If the background drawable
 * has its own padding, that padding will be added to the current padding.
 */
public static void setBackgroundAndKeepPadding(View view, Drawable backgroundDrawable) {

    Rect drawablePadding = new Rect();
    backgroundDrawable.getPadding(drawablePadding);

    // Add background padding to view padding and subtract any previous background padding
    Rect prevBackgroundPadding = (Rect) view.getTag(R.id.prev_background_padding);
    int left = view.getPaddingLeft() + drawablePadding.left -
            (prevBackgroundPadding == null ? 0 : prevBackgroundPadding.left);
    int top = view.getPaddingTop() + drawablePadding.top -
            (prevBackgroundPadding == null ? 0 : prevBackgroundPadding.top);
    int right = view.getPaddingRight() + drawablePadding.right -
            (prevBackgroundPadding == null ? 0 : prevBackgroundPadding.right);
    int bottom = view.getPaddingBottom() + drawablePadding.bottom -
            (prevBackgroundPadding == null ? 0 : prevBackgroundPadding.bottom);
    view.setTag(R.id.prev_background_padding, drawablePadding);

    view.setBackgroundDrawable(backgroundDrawable);
    view.setPadding(left, top, right, bottom);
} 
```

您需要通过 values/ids.xml 定义资源 id：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="prev_background_padding" type="id"/>
</resources> 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-09-30T17:03:10.513

我使用这个非常简单的解决方法，我`accentColor`在`style.xml`下面定义了一个

```
<item name="colorAccent">#0288D1</item> 
```

然后我在我的`Button`标签中使用以下任一样式

```
style="@style/Base.Widget.AppCompat.Button.Colored"
style="@style/Base.Widget.AppCompat.Button.Small" 
```

例如 ：

```
<Button
    android:id="@+id/btnLink"
    style="@style/Base.Widget.AppCompat.Button.Colored"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/tvDescription"
    android:textColor="@color/textColorPrimary"
    android:text="Visit Website" />

<Button
    android:id="@+id/btnSave"
    style="@style/Base.Widget.AppCompat.Button.Small"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/tvDescription"
    android:layout_toRightOf="@id/btnLink"
    android:textColor="@color/textColorPrimaryInverse"
    android:text="Save" /> 
```

# java - Berkeley DB JE 5.0.x 在 Maven Central 中的坐标是什么？

> ID：10095199
> 
> 赞同：5
> 
> 时间：2012-04-10T19:32:51.980
> 
> 标签：java, maven, berkeley-db, berkeley-db-je

[Berkeley DB JE 5.0.x](http://www.oracle.com/technetwork/database/berkeleydb/downloads/index-098622.html)在 Maven Central（或其他一些 repo）中的坐标是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:11:02.150

[Shaun Hare](https://stackoverflow.com/a/10095243/959118)提供的链接（Oracle 的 bdb[下载页面](http://www.oracle.com/technetwork/database/berkeleydb/downloads/maven-087630.html)）现在包含访问 Oracle 的 Maven 存储库的示例 Maven 配置。

按照该示例，我通过直接添加 Oracle 的存储库来包含 bdb je。如果您使用的是 Nexus 等存储库管理器，则可以在其中包含存储库：

```
<dependencies>
  <dependency>
    <groupId>com.sleepycat</groupId>
    <artifactId>je</artifactId>
    <version>5.0.58</version>
  </dependency>
</dependencies>

<repositories>
  <repository>
    <id>oracleReleases</id>
    <name>Oracle Released Java Packages</name>
    <url>http://download.oracle.com/maven</url>
    <releases>
      <enabled>true</enabled>
    </releases>
    <snapshots />
  </repository>
</repositories> 
```

编辑：修复损坏的超链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:36:26.000

见这里[http://www.oracle.com/technetwork/database/berkeleydb/downloads/maven-087630.html](http://www.oracle.com/technetwork/database/berkeleydb/downloads/maven-087630.html)

所以[http://mvnrepository.com/artifact/com.sleepycat/je/4.0.92](http://mvnrepository.com/artifact/com.sleepycat/je/4.0.92)

编辑对不起错误的版本我建议

```
wget http://download.oracle.com/maven/com/sleepycat/je/5.0.34/je-5.0.34{.jar,.jar.md5,.jar.sha1,.pom,.pom.md5,.pom.sha1,-sources.jar,-sources.jar.md5,-sources.jar.sha1,-javadoc.jar,-javadoc.jar.md5,-javadoc.jar.sha1} 
```

并上传到自己的仓库

○

# php - UPDATE all rows after 2nd row,by ADDING 1 to these rows

> ID：10095202
> 
> 赞同：1
> 
> 时间：2012-04-10T19:32:57.750
> 
> 标签：php, mysql

I have a table like this:

```
id  subject        position         visible

1   Home               1               1
2   About us           2               1
3   Our partners       3               1
18  Products           4               1
19  Extra              5               0 
```

I want to add number 1 to all rows after position=2, like this:

```
id  subject        position         visible

1   Home               1               1
2   About us           2               1
3   Our partners       4               1
18  Products           5               1
19  Extra              6               0 
```

I tried like this, but this doesnt work:

```
$row=mysql_query("SELECT * FROM table");
$count=mysql_num_rows($row);
$position=3;
$add=($position+1);
while($position<=$count)
{
    $sql="UPDATE subjects SET position=$add WHERE position=$position";
    mysql_query($sql);
    $add++;
    $position++;
} 
```

After applying above code, my table looks like this:

```
id  subject        position         visible

1   Home               1               1
2   About us           2               1
3   Our partners       6               1
18  Products           6               1
19  Extra              6               0 
```

Is there any solution?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T19:34:25.053

Why not just:

```
UPDATE subjects SET position=position+1 WHERE position>2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:35:03.250

```
UPDATE subjects SET position=position + 1 WHERE position >= 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:37:36.600

```
 update subjects set position = position +1 where position >2 
```

# git - 如何让 gitk 只显示本地分支？

> ID：10095205
> 
> 赞同：15
> 
> 时间：2012-04-10T19:33:21.657
> 
> 标签：git, git-branch, gitk

如何让 gitk 只显示本地分支？甚至更好 - 我可以隐藏没有相应本地分支的远程分支吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T13:40:37.743

您可以创建一个仅显示本地分支的新“视图”，如下所示：

1.  转到视图 -> 新视图...（或按 Shift-F4）
2.  在出现的对话框中，给“视图名称”一些有意义的东西，比如“本地分支”
3.  检查参考区域中的“所有（本地）分支”
4.  选中“记住此视图”以保存这些设置以供将来启动

现在，您应该在“视图”菜单中看到“本地分支”选项。选择此视图将仅显示本地分支中存在的提交。请注意，您可能仍会看到远程分支标签，但前提是它们指向的提交位于本地分支中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-05T17:54:32.220

由于我在搜索中找到了这个问题，接受的答案对我不起作用，我最终找到了一个解决方案，我想我会分享：

```
gitk --argscmd='git for-each-ref --format="%(refname)" refs/heads' 
```

如果您添加一个分支然后使用 F5 刷新正在运行的 gitk，它甚至会更新。您还可以包含以下标签：

```
gitk --argscmd='git for-each-ref --format="%(refname)" refs/heads refs/tags' 
```

或使用 rev-list （更短，但有点作弊）：

```
gitk --argscmd='git rev-list --no-walk --branches --tags' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T14:51:30.487

经过一些实验，我找到了解决方案。以下命令有效：

```
echo $(git branch) | gitk 
```

它仅显示那些具有相应本地分支的远程分支。使用它很重要，`echo $(git branch)`因为它强制`branch`返回原始分支列表而不是格式化输出，如下所示：

```
$ git branch
  develop
  release-M4.1
  vendor
* xflow 
```

# objective-c - setFrame 不适用于子视图

> ID：10095212
> 
> 赞同：2
> 
> 时间：2012-04-10T19:34:07.253
> 
> 标签：objective-c, ios, cocoa-touch, uiview, subview

我正在 iOS5 (iPad) 上实现一个滑动抽屉。我通过子类化 UIView 创建了抽屉。抽屉被添加到主视图中，效果很好。但是，当我尝试使用滑动手势和 setFrame 在屏幕上/关闭抽屉时，抽屉不会移动。

我相信我已经正确实现了手势识别器，并且框架也设置正确。然而，抽屉就是不动。关于我做错了什么有什么想法吗？

下面是我的代码：

从我的控制器的 viewDidLoad 调用以下方法：

```
- (void)loadVerticalDrawer
{
    NSLog(@"LoadVerticalDrawer Executed");
    verticalDrawerHidden = YES;
    if (verticalDrawerHidden) {
    verticalDrawer = [[VerticalDrawer alloc] initWithFrame:CGRectMake(514, 250, 60, 248)];//adjust verticalDrawer height and width here;
    } else {
    verticalDrawer = [[VerticalDrawer alloc] initWithFrame:CGRectMake(464, 250, 60, 248)];//adjust verticalDrawer height and width here;    
    }

    verticalDrawer.appsManager = appsManager;
    verticalDrawer.delegate = self;
    [self.view addSubview:verticalDrawer];
} 
```

以下也从 viewDidLoad 调用：

```
rightDrawerLeftSwipe = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightDrawerHandleSwipeLeft:)] autorelease];
    rightDrawerLeftSwipe.direction = UISwipeGestureRecognizerDirectionLeft;
    rightDrawerLeftSwipe.numberOfTouchesRequired = 1;
    rightDrawerLeftSwipe.delegate = self;
    [verticalDrawer addGestureRecognizer:rightDrawerLeftSwipe];

    rightDrawerRightSwipe = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightDrawerHandleSwipeRight:)] autorelease];
    rightDrawerRightSwipe.direction = UISwipeGestureRecognizerDirectionRight;
    rightDrawerRightSwipe.numberOfTouchesRequired = 1;
    rightDrawerRightSwipe.delegate = self;
    [verticalDrawer addGestureRecognizer:rightDrawerRightSwipe]; 
```

最后，这是 Right Swipe 的处理程序：

```
-(void) rightDrawerHandleSwipeRight:(UISwipeGestureRecognizer*) recognizer
{
    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        if (!verticalDrawerHidden){
        verticalDrawerHidden = YES;
        float x = verticalDrawer.frame.origin.x;
        float y = verticalDrawer.frame.origin.y;
        float width = verticalDrawer.frame.size.width;
        float height = verticalDrawer.frame.size.height;

        NSLog(@"Swipe left, Vertical drawer, x=%f, y=%f, width=%f, height=%f:", x,y,width,height);
        x+=50;
        [verticalDrawer setFrame:CGRectMake(x,y,width,height)];
        NSLog(@"Swipe left, Vertical drawer, x=%f, y=%f, width=%f, height=%f:", x,y,width,height);
        return;
        }
        else {
            return;
        }
    }
} 
```

请注意，根据日志，verticalDrawer 的框架已正确设置（并且正在根据需要调用滑动处理程序），只是视图根本没有移动！

# nginx - 如何在 localhost 上测试 nginx 子域

> ID：10095219
> 
> 赞同：35
> 
> 时间：2012-04-10T19:34:26.447
> 
> 标签：nginx, subdomain

我想在将配置上传到服务器之前测试 nginx 子域。我可以在本地主机上测试它吗？我试试

```
server {
    listen       80;
    server_name  localhost;

    location / {
        proxy_pass http://localhost:8080;
    }
}

server {
    listen       80;
    server_name  sub.localhost;

    location / {
        proxy_pass http://localhost:8080/sub;
    }
} 
```

它不起作用。我应该更改我的主机文件以使其正常工作吗？另外，在将站点上传到服务器后，我应该更改 DNS 记录并添加 sub.mydomain.com 吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-02T07:54:29.030

是的，将“127.0.0.1 sub.localhost”添加到您的主机文件中。该子必须以某种方式解决。那应该行得通。

然后，一旦您准备好上网，是的，为子域添加一个 a 或 cname 记录。

当我使用 proxy_pass 时，我还包括来自 nginx 的 proxy.conf。 [http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-04T05:31:08.697

在基于 Linux 的操作系统中，只需编辑为`sudo` `/etc/hosts`文件并更改`127.0.0.1 localhost`为`127.0.0.1 *.localhost`.

所以在`/etc/nginx/sites-enabled/<environment>/<your_project_name>`编辑`server_name`键为`<subdomain>.localhost`.

重新加载 nginx 和网络服务。

```
$ sudo service nginx reload
$ sudo service networking reload 
```

`http://<subdomain>.localhost`然后在网址栏尝试。

这个对我有用。

**更新**

在我看来，更好的解决方案是创建一个仅在子域不存在时才响应的虚拟服务器， at `/etc/nginx/sites-enabled/development/default`，作为默认服务器（请记住，您只能将一个服务器定义为默认服务器）。

```
server {
  listen 80 default_server;
  root /var/www/html/errors/404;
  server_name *.localhost *.<host-name>;

  location / {
    index subdomain.html;
  }

} 
```

确保在`nginx.conf`（通常在`/etc/nginx/nginx.conf`）包含`include /etc/nginx/sites-enabled/**/*;`此虚拟服务器的工作。如果没有，把它然后运行`$ sudo service nginx reload`。

在这种情况下，不必放入`*.localhost`，`/etc/hosts`而只需放入`localhost`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-19T04:44:32.777

对于拥有自己域名的公共网络服务器，您只需在 DNS 配置中使用 CNAME 记录添加规范名称：

```
CNAME    *    example.com. 
```

完成后，设置您的 nginx 设置

```
server_name  *.example.com example.com; 
```

在本地设置中，您可以为 nginx 保留相同的配置，但除非您有本地 DNS 设置，否则您必须编辑 /etc/hosts 文件并手动添加每个子域。通配符在 /etc/hosts 文件中不起作用。

```
127.0.0.1  abc.example.com def.example.com ghi.example.com 
```

通常建议使用 .local 作为本地域的命名空间。

# ios - iOS Modal Segue 丢弃源 ViewController？

> ID：10095222
> 
> 赞同：2
> 
> 时间：2012-04-10T19:34:41.750
> 
> 标签：ios, objective-c, delegates, segue, viewcontroller

在进行模态转场时，执行转场后原始 ViewController 是否会被丢弃？我将目标控制器的委托设置为源 ViewController，但是当目标 ViewController.viewDidLoad 时，self.delegate 为 nil ...

以下代码将产生日志消息“ListViewController.viewDidLoad: My delegate is nil :(”

[来源] MapViewController：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"mapToList"]){
        NSLog(@"MapViewController.prepareForSegue: Segue mapToList being called, setting LisViewController's delegate to myself");
        [segue.destinationViewController setDelegate:self];
        if(!self){
            NSLog(@"MapViewController.prepareForSegue: I am nil.");
        } else {
            NSLog(@"MapViewController.prepareForSegue: I am NOT nil.");
        }
    }
} 
```

[目的地] ListViewController：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if(!self.delegate){
        NSLog(@"ListViewController.viewDidLoad: My delegate is nil :(");
    } else {
        NSLog(@"ListViewController.viewDidLoad: My delegate populated");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:21:53.970

您的代码似乎是正确的，我唯一不同的是在我拥有的骨架框架中测试它，这是一个嵌套在导航控制器中的 tableviewcontroller。我刚刚使用以下代码进行了测试，它对我来说很好：

根视图控制器.h：

```
@interface RootTableViewController : UITableViewController <newTest> 
```

为 Segue 做准备（在 rootViewController 中）：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

 if ([segue.identifier isEqualToString:@"segueToModalView"]){
       [segue.destinationViewController setDelegate:self];  
 }
} 
```

模态视图控制器.h的顶部：

```
@protocol newTest <NSObject>
  -(void) hello;
@end 
```

模态视图中的属性声明：

```
@property (nonatomic, strong) id <newTest> delegate; 
```

模态视图中的 ViewDidLoad：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   NSLog(@"%@", self.delegate);
} 
```

我的 self.delegate 的 NSLog 正确打印出来，我的代码似乎与您的代码或多或少相同。您的财产申报正确吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T15:14:07.827

这是一个老问题，但我在自己遇到同样的问题时遇到了这个问题。这里有几件事：

1.  对于那些不明白为什么有人想要使用带有模态显示的导航控制器的人 - 它可以获得导航栏的好处，而不必像 tw airball 那样将 UINavigationBar 嵌入到您自己的视图控制器中。
2.  为了在不求助于 tw airball 的情况下解决问题，请记住，在这种情况下，segue 的目标视图控制器是导航控制器……而不是嵌入在导航中的视图控制器。

所以修复在您的 prepareForSeque 中：

```
UINavigationController *navController = segue.destinationViewController;
MyRealDestViewController *myRealDestViewController = (MyRealDestViewController)navController.topViewController;
myRealDestViewController.delegate = self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T17:34:49.943

如果 segue 是对 a`NavigationController`则`destinationViewController`失去委托。

我通过将模态 segue 放入`destinationViewController`，然后添加`NavigationBar`并`Bar Buttons`模拟导航控制器来解决这个问题（我假设您将“完成”和“取消”按钮包装`destinationViewController`在 a中）。`NavigationController`

将委托设置为正常`rootViewController`：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

   if ([segue.identifier isEqualToString:@"segueToModalView"]){
     [segue.destinationViewController setDelegate:self];  
   }
} 
```

希望有帮助

# css - 字体质量问题（Firefox、Chrome、Opera）

> ID：10095223
> 
> 赞同：0
> 
> 时间：2012-04-10T19:34:42.347
> 
> 标签：css, font-face

检查网站：

[http://tinyurl.com/caljnqb](http://tinyurl.com/caljnqb)

我正在使用字体：

```
@font-face {
    font-family: 'SegoeUI';
    src: url('{site_url}themes/site_themes/agile_records/fonts/segoeui.eot?') format('eot'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeui.woff') format('woff'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeui.ttf')  format('truetype'),
         url('{site_url}themes/site_themes/agile_records/fonts/segoeui.svg#SegoeUI2') format('svg');
    font-style: normal;
    font-weight: normal;
    }
@font-face {
    font-family: 'SegoeUIBold';
    src: url('{site_url}themes/site_themes/agile_records/fonts/segoeuib.eot?') format('eot'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuib.woff') format('woff'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuib.ttf')  format('truetype'),
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuib.svg#SegoeUI3') format('svg');
    font-style: normal;
    font-weight: bold;
    }
@font-face {
    font-family: 'SegoeUIItalic';
    src: url('{site_url}themes/site_themes/agile_records/fonts/segoeuii.eot?') format('eot'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuii.woff') format('woff'), 
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuii.ttf')  format('truetype'),
         url('{site_url}themes/site_themes/agile_records/fonts/segoeuii.svg#SegoeUI4') format('svg');
    font-style: italic;
    font-weight: normal;
    } 
```

Firefox、Chrome 和 Opera 浏览器的输出存在问题。在 IE 上一切正常。字体看起来很锋利。为什么会发生？也许我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:53:58.027

不同的浏览器以不同的方式呈现字体。

我过去使用的解决方案是重新安排字体提供给字体的顺序，具体取决于哪个浏览器正在呈现页面。通常我的问题出在早期版本的 IE 中，所以我使用了一个单独的样式表，它在 ttf 文件之前提供了 .woff 文件。因为有些浏览器只能读取某些字体类型的文件，但可以同时读取这两种文件，并且在找到一个有效的文件后就停止寻找。如果您重新排列它们，您可能能够使用渲染更好的一个。

如果您最终使用单独的 css，您可以使用 $_SERVER 数组 http_user_agent 属性来设置基于浏览器的字体 css。

googles Droid 字体是一种有时会根据浏览器呈现有趣的字体，因此研究可能会帮助您找到其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:34:38.307

似乎有一些技巧可以正确排序每种格式

参见例如

> 这是修改后的 Fontspring 防弹语法，首先为 svg 服务：

```
@font-face {
font-family: ‘MyWebFont’;
src: url(‘webfont.eot’);
src: url(‘webfont.eot?#iefix’) format(‘embedded-opentype’),
    url(‘webfont.svg#svgFontName’) format(‘svg’),
    url(‘webfont.woff’) format(‘woff’),
    url(‘webfont.ttf’)  format(‘truetype’);
} 
```

来自[http://www.fontspring.com/blog/smoother-web-font-rendering-chrome](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome)

[从http://www.w3.org/TR/WOFF/#appendix-b](http://www.w3.org/TR/WOFF/#appendix-b)开始，您还可以注意为 WOFF 字体使用正确的**mime 类型**

```
application/font-woff 
```

确保浏览器正确处理

# google-analytics - 使用 Google Analytics（分析）自定义变量跟踪单个用户

> ID：10095225
> 
> 赞同：22
> 
> 时间：2012-04-10T19:35:04.973
> 
> 标签：google-analytics, userid

我一直在为我的公司开发一个支持中心，我们需要在个人用户登录时对其进行跟踪。如果可能，我们还希望跟踪详细信息，例如访问的页面和在网站上花费的时间。我可以使用自定义变量跟踪有多少人登录到该站点，但我无法跟踪单个用户。这是我用来尝试获取个人用户 ID 的代码：

```
 $(document).ready( function() {
var welcomeEmail = document.getElementById('welcome_email').innerHTML;

var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30086012-1']);

var welcomeEmail;

if( $('#welcome_email').length > 0 ) {
                //This block of logic makes sure that the welcome_email element actually exists, it will not exist if a user is not logged in yet
                welcomeEmail = document.getElementById('welcome_email').innerHTML;
}

  _gaq.push(['_setCustomVar',1,'UserEmail',welcomeEmail,1]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

我错过了什么/做错了什么。感谢任何反馈。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-10T16:42:42.467

我会说隐私政策已经改变。

> 您不会（也不会允许任何第三方）使用服务来跟踪、收集或上传任何可识别个人身份的数据（例如姓名、电子邮件地址或账单信息），或其他可以合理链接的数据谷歌的此类信息。

UserID 不会向 Google 公开有关访问者的任何 PII，而这似乎正是他们所关心的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-10T11:17:50.560

只是为了记录。以下是 Google 关于如何完成此操作的指南： [https ://developers.google.com/analytics/devguides/collection/analyticsjs/user-id?hl=en](https://developers.google.com/analytics/devguides/collection/analyticsjs/user-id?hl=en)

**重要信息** 它确实需要您将您的资产升级到 Universal Analytics。

**更新 2**：截至 2014 年 4 月 2 日，此功能已退出测试版并已广泛使用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-10T22:32:55.497

这违反了[Google Analytics 服务条款](http://www.google.com/analytics/tos.html)。参见第 7 条隐私。

> 7.隐私。您不会（也不会允许任何第三方）使用服务来跟踪或收集互联网用户的个人身份信息，您也不会（或允许任何第三方）关联从您的网站收集的任何数据（或此类第三方的网站），其中包含来自任何来源的任何个人身份信息，作为您使用（或此类第三方的使用）服务的一部分。您将拥有并遵守适当的隐私政策，并将遵守与收集您网站访问者的信息有关的所有适用法律。您必须发布隐私政策，并且该政策必须提供您使用收集匿名流量数据的 cookie 的通知。

和

> 虽然用户名或用户 ID 不是直接的 PII，但如果它用于与来自后端系统的人绑定……那就违反了服务条款。

Google Analytics 不是用于此类跟踪的工具。托管在您自己的服务器上的自定义后端解决方案是更好的选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T10:27:35.223

[本文](http://cutroni.com/blog/2011/05/05/merging-google-analytics-with-your-data-warehouse/)指的是新政策。设置使用 Google Analytics 中的自定义变量选项设置的用户 ID 并不违反他们的隐私政策。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-16T08:55:10.177

请注意:: 允许 Google 个人识别 << 这是否意味着，如果 google 无法识别此用户是否可以接受他们的政策？

您不会上传任何允许 Google 识别个人身份的数据（例如某些姓名、社会保险号、电子邮件地址或任何类似数据），或永久识别特定设备的数据（例如唯一设备标识符，如果此类标识符不能被重置），即使是散列形式。如果您上传任何允许 Google 识别个人身份的数据，您的 Google Analytics 帐户可能会被终止，并且您可能会丢失您的 Google Analytics 数据。

[https://developers.google.com/analytics/devguides/collection/protocol/policy](https://developers.google.com/analytics/devguides/collection/protocol/policy)

# c - C/C++ 二进制复制数组函数不起作用

> ID：10095226
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:35:05.477
> 
> 标签：c, arrays, pointers, binary

我写了一个函数，它将一个结构数组二进制复制到另一个。问题是它不能正常工作，我不知道为什么。对我来说一切似乎都很好。

*   像素是具有 3 个无符号字符的结构，sizeof(pixel) = 3，
*   pixarr1 是指向二维动态数组 [8][2] 的指针，
*   pixarr2 是指向二维动态数组 [8][n] 的指针。例如，n = 8，这并不重要。

我需要做这样的事情：

```
for(int i=0; i<8; i++) {
    for(int y=0; y<2; y++) {
        arr2[i][y] = arr1[i][y];
    }
} 
```

但我想做“二进制”。像这样：

```
void copyStruct(pixel*** pixarr1, int startline, int height, pixel*** pixarr2) {

    pixel** arr1 = *pixarr1;
    pixel** arr2 = *pixarr2;
    unsigned char buffer[16];

    int sizeofstruct = height*3*8;
    int padding;

    for(int i=0; i<=sizeofstruct; i+=16) {
        if ( i+16 > sizeofstruct) {
            padding = sizeofstruct-i;
            memcpy(buffer, arr1+i, padding);
            memcpy(arr2+(startline*8)+i, buffer, padding);
        } else {
            memcpy(buffer, arr1+i, 16);
            memcpy(arr2+(startline*8)+i, buffer, 16);
        }
    }
} 
```

我犯了什么错误？

PS。对不起，源代码的问题，这个编辑器是..

聚苯乙烯。请不要专注于指针的使用。我必须使用它们。如果我在函数内外打印指针，我会看到相同的地址，所以这很好（在我的逻辑中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:27:32.867

您可以使用指针将数组传递给函数，但不能使用指针对指针传递多维数组。您可以在此处阅读有关创建指向多维数组的指针的更多信息：

*   [创建指向二维数组的指针](https://stackoverflow.com/questions/1052818/c-create-a-pointer-to-two-dimensional-array)
*   [http://www.eskimo.com/~scs/cclass/int/sx9a.html](http://www.eskimo.com/~scs/cclass/int/sx9a.html)

**编辑：** 我们真的需要更多信息。“不能正常工作”到底是什么意思？数据被复制但最后一个字节丢失？程序崩溃？机器蓝屏并开始冒烟？请准确告诉我们您看到该程序的作用以及它与您的预期有何不同。

鉴于此处完成的指针操作量，我强烈建议在调试器中单步执行代码，并在每一步仔细检查每个指针。这应该清楚地表明事情开始出错的地方，并就原因给出强有力的提示。

如果更高级别（非`memcpy`）版本代码有效，我建议检查为该函数发出的程序集，并将其与为`memcpy`基于 - 的版本发出的程序集进行比较。一些库`memcpy`使用字节大小的副本循环实现，这将使您的二进制版本实际上等同于更高级别的版本。如果是这种情况，那么`memcpy`除了增加复杂性之外，您可能不会通过使用该版本获得太多收益。

# arrays - 如何将多个文件读入多维数组

> ID：10095234
> 
> 赞同：3
> 
> 时间：2012-04-10T19:35:40.537
> 
> 标签：arrays, r

我想制作3维数组。

这是我尝试过的：

```
z<-c(160,720,420)
first_data_set <-array(dim = length(file_1), dimnames = z) 
```

我正在阅读的数据处于一个级别。（只有x和y）还有其他相同格式的数据，我需要把它们和第一个数据放在同一个数组中。所以一旦我读完所有数据，它们都在同一个数组中，但没有覆盖。

所以我认为数组必须是3维；否则我无法将我读取的所有数据都保存在循环中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T19:54:56.557

假设您有两个大小为 3x4 的矩阵：

```
m1 <- matrix(rnorm(12), nrow = 3, ncol = 4)
m2 <- matrix(rnorm(12), nrow = 3, ncol = 4) 
```

如果要将它们放在一个数组中，请首先制作一个 NA 数组：

```
A <- array(as.numeric(NA), dim = c(3,4,2)) 
```

然后用数据填充图层：

```
A[,,1] <- m1
A[,,2] <- m2 
```

正如@Justin 所建议的，您也可以将矩阵放在一个列表中：

```
A2 <- list()
A2[['m1']] <- m1
A2[['m2']] <- m2 
```

* * *

从文件中读取矩阵：使用列表可以更轻松地从目录中的文件中获取这些矩阵，而无需提前指定维度。假设您想要所有带有扩展名的文件`csv`：

```
myfiles <- dir(pattern = ".csv")
for (i in 1:length(myfiles)){
   A2[[myfiles[i]]] <- read.table(myfiles[i], sep = ',')
} 
```

# facebook - HTML5 与 XFBML？在 HTML5 页面上？

> ID：10095237
> 
> 赞同：7
> 
> 时间：2012-04-10T19:35:55.623
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

听起来像一个愚蠢的问题，但...

我正在将 Facebook Javascript SDK 添加到一个似乎是 HTML5 的网站，它有一个
`<!doctype html>`和一个`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`，所以我假设这是原始作者的意图。

但是，查看该站点的 Google Analytics（分析），可能有不少人使用 IE8 访问该站点。

我们不想使用 iFrame，因为 XFBML 和 HTML5 版本更加通用。

所以这就是为什么我要问我是否应该为页面使用 HTML5 或 XFBML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:13:27.700

如果你的页面是html5，那么有些浏览器不支持，如果你想支持所有浏览器不要用html5，就这么简单。

话虽如此，我认为您将使用哪个选项并没有太大区别，这是因为在这两种情况下，您都在加载相同的 facebook javascript sdk，然后它会呈现放置占位符的插件。两个版本之间的唯一区别是您如何在占位符中定义插件选项，在 html5 中您使用*data-*属性，而在 xfbml 版本中您只需定义 facebook 命名空间并使用自定义属性。但是这两个版本都应该适用于 facebook 支持的所有浏览器，如果您使用 html5 版本，您将获得的最多的是在某些浏览器中无效的 html，但它应该仍然有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T19:40:42.383

您应该使用 XFBML，因为我看到您在 Google Analytics 服务上获得了更多 IE 用户，所以我认为很难忽略所有这些用户。

# javascript - phonegap 文件编写器

> ID：10095238
> 
> 赞同：1
> 
> 时间：2012-04-10T19:36:06.140
> 
> 标签：javascript, ios, cordova, filewriter

我正在使用 phonegap 开发一个移动 Web 应用程序，并可能稍后将其转移到其他平台，例如 android 等。

我希望能够写入设备上的本地文件，但是，无论我做什么，它都不起作用。没有适当的文档来支持此类问题。

如果有人可以提供帮助，我将不胜感激。

这是我的html文件：

```
 <!DOCTYPE html>
<html>
  <head>
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />-->
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="jquery/jquery.mobile-1.0.1.min.css"/>
  <script src="jquery/jquery-1.6.4.min.js"></script>
  <link rel="stylesheet" type="text/css" href="styles.css"/>
  <script src="jquery/jquery.mobile-1.0.1.min.js"></script>
  <title>Hello World</title>  

    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />-->        

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="NativeControls.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
  </head>
    <body onload="onBodyLoad()">
      <div data-role="page" id="mainpage"> 
          <div data-role="header">
              <h1>LOGIN</h1>
          </div>
          <div data-role="content">
            <img src="images/cslogosmall2.png" style="margin-top: -10px; margin-left: -5px;"/>
            <form id="login" method="post">
              <p>
              <ul data-role="listview" data-theme="g" id="contentlist">
                  <b>Program:</b>
                  <input type="text" id="program"/>
                  <b>Username:</b>
                  <input type="text" id="username"/>
                  <b>Password:</b>
                  <input type="password"  id="password"/>
              </ul>
              </p>
              <br/>
                <button type="submit" data-theme="a" id="submit" value="Submit"></button>
                <a href="offline.html" onclick="test();">Offline</a>
            </form>
          </div>
          <!--<div data-role="footer"> 
              <h1> Main Page Footer </h1>
          </div>-->
      </div>
      <div data-role="page" id="contentpage"> 
          <div data-role="header"> 
              <h1> Content Page </h1>

          </div>
          <div data-role="content">
              <a href="#" data-role="button" onclick="history.go(-1);return false;" onClick=buttonDemo()> Back to Main Page </a>
              <a href="#" data-role="button" id="beepbtn" onClick=beepbeep()> Beep!</a>
          </div>
          <div data-role="footer"> 
              <h1> Content Page Footer </h1>
          </div>
      </div>      
  </body>
</html> 
```

这是我的 javascript 文件：

```
 function validate() {

    navigator.notification.alert("validate called");
    var program = document.getElementById('program');
    var username = document.getElementById('username');
    var password = document.getElementById('password');

    if (!program || program == "") {
        navigator.notification.alert("Please enter a program");
        return false;
    }
    else if (!username || username == "") {
        navigator.notification.alert("Please enter a username");
        return false;
    }
    else if (!password || password == "") {
        navigator.notification.alert("Please enter a password");
        return false;
    }
    return true;
}

function beepbeep() {
    //navigator.notification.alert("Beep function called");
    navigator.notification.beep();
}

$(document).ready(function() {

    $('#submit').click(function() {
        var program = document.getElementById('program').value;
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;

        if (!program || program == "") {
            alert("Please enter a program", null, "ClearSpider", "OK");
            return false;
        }
        else if (!username || username == "") {
            alert("Please enter a username", null, "ClearSpider", "OK");
            return false;
        }
        else if (!password || password == "") {
            alert("Please enter a password", null, "ClearSpider", "OK");
            return false;
        }
        return true;
    });

    document.addEventListener("deviceready", onDeviceReady, false);
    window.addEventListener("resize", orientationChange, false);

});

function test() {

    console.log("fail");
    var fs = FileWriter.write(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    alert(LocalFileSystem.PERSISTENT);
    alert("Test called");
}

function onTabBarItem(id) 
{ 
    alert("hello");
    //jQT.goTo("#" + id, "slide"); 
    // if you need to modify the tabbar items that are shown, you should do 
    // so here. 
} 

function fail(error) {
    console.log(error.code);
}

function gotFS(fileSystem) {
    alert("at gotFS");
    fileSystem.root.getFile("readme.txt", {create: true}, gotFileEntry, fail); 
}

function gotFileEntry(fileEntry) {
    alert("at gotFileEntry");
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    alert("at gotFileWriter");
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.write("some sample text");
    // contents of file now 'some sample text'
    writer.truncate(11);
    // contents of file now 'some sample'
    writer.seek(4);
    // contents of file still 'some sample' but file pointer is after the 'e' in 'some'
    writer.write(" different text");
    // contents of file now 'some different text'
}

/* When this function is called, Cordova has been initialized and is ready to roll */
/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
 see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
 for more details -jm */
function onDeviceReady() {
  // Initializating TabBar

    //window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    navigator.notification.alert("hi kaan", null, "hey", "SWEET");
    Cordova.exec("NativeControls.createTabBar");
    //var options = "top";
    var options = "bottom";

    navigator.notification.alert(window.requestFileSystem);

    window.onorientationchange = function() {
        var orientation = window.orientation;

        switch(orientation) {
            case 0:

                Cordova.exec("NativeControls.showTabBar", options);
                Cordova.exec("NativeControls.showToolBar");

                /* Add a descriptive message on "Handling iPhone or iPod touch Orientation Events"  */
                document.getElementById("currentOrientation").innerHTML="Now in portrait orientation (Home button on the bottom).";
                break; 

            case 90:

                Cordova.exec("NativeControls.showTabBar", options);
                Cordova.exec("NativeControls.showToolBar");

                document.getElementById("currentOrientation").innerHTML="Now in landscape orientation and turned to the left (Home button to the right).";
                break;

            case -90: 

                Cordova.exec("NativeControls.showTabBar", options);
                Cordova.exec("NativeControls.showToolBar");

                document.getElementById("currentOrientation").innerHTML="Now in landscape orientation and turned to the right (Home button to the left).";
                break;

            default:

                Cordova.exec("NativeControls.showTabBar", options);
                Cordova.exec("NativeControls.showToolBar");

                document.getElementById("currentOrientation").innerHTML="Now the orientation must be -180\. default: case: ";
                break;         
        }//end switch
    }//end window.orientationchange

    //var taboptions = {"onSelect":onTabBarItemSelect};
    var moreNum = 1;

    Cordova.exec("NativeControls.showTabBar", options);

    var onSelect = {"onSelect":onTabBarItem};
    //onSelect = "hahaha";

    Cordova.exec("NativeControls.createTabBarItem", "test", "test", "tabButton:Recents", onSelect);
    Cordova.exec("NativeControls.createTabBarItem", "test2", "test2", "tabButton:Search", onSelect);
    Cordova.exec("NaviteControls.createTabBarItem", "test3", null, "tabButton:More", onSelect);

    Cordova.exec("NativeControls.showTabBarItems", "test", "test2", "test3"); 
    Cordova.exec("NativeControls.selectTabBarItem", "test");

    //Cordova.exec("NativeControls.tabBarItemSelected", "1");

     /*nativeControls = window.plugins.nativeControls;
     navigator.notification.alert(nativeControls);
     nativeControls.createTabBar();

  // Books tab
  nativeControls.createTabBarItem(
    "books",
    "Books",
    "tabButton:Recents",
    "",
    {"onSelect": function() {
      books();
    }}
  );

  // Stats tab
  nativeControls.createTabBarItem(
    "finished",
    "Finished",
    "tabButton:Recents",
    "",
    {"onSelect": function() {
      finished();
    }}
  );

  // About tab
  nativeControls.createTabBarItem(
    "about",
    "About",
    "tabButton:Recents",
    "",
    {"onSelect": function() {
      about();
    }}
  );

  // Compile the TabBar
  nativeControls.showTabBar();
  nativeControls.showTabBarItems("books", "finished", "about");
  nativeControls.selectTabBarItem("books");*/
}

function orientationChange() {
    var nativeControls = window.plugins.nativeControls;
    nativeControls.resizeTabBar();
}

function books() {

}

function about() {

}

function finished(){

} 
```

请注意，此行不起作用： `navigator.notification.alert(window.requestFileSystem);`不显示警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:27:54.343

我昨天成功看到警报时正在使用 1.4.1。当我切换到 1.5.0 时，警报打印为 null。这是因为在 cordova-1.5.0 中添加了 require 命名空间。

但是，即使在 1.5.0 中，[API 示例](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#File)仍然适用于我：

```
function gotFS(fileSystem) {
    navigator.notification.alert(window.requestFileSystem);
    myFS = fileSystem;
    console.log(fileSystem.name);
    console.log(fileSystem.root.name);
    $('#file-system-text').html("File System: <strong>" + fileSystem.name + "</strong> " +
            "Root: <strong>" + fileSystem.root.name + "</strong>");
    fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, createGotFileEntry, writeFail);
}
function createFile() { // button onclick function
    if (myFS) {
        gotFS(myFS);
    } else {
        navigator.notification.alert(window.requestFileSystem);
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, failFS);

    }
} 
```

# ms-access - 在 Access 中探索文件

> ID：10095242
> 
> 赞同：4
> 
> 时间：2012-04-10T19:36:23.163
> 
> 标签：ms-access, vba

我有一个用户用来上传 CSV 文件的表单。现在，用户必须在文本框中输入文件的完整文件路径。如何获得浏览文件弹出窗口以允许用户导航到文件而不必键入整个路径？功能是否已经存在而我只是不知道如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:46:37.243

您可以使用 API 调用创建自己的类。[在这里你有代码](http://www.vbaccelerator.com/home/VB/Utilities/GUI_Resource_Tracer/VB6_GuiResTracer_zip_GCommonDialog_cls.asp)。或者，您可以添加对 Microsoft Office xx 对象库的引用并使用 FileDialog 类。 [这里有一个使用示例。](https://stackoverflow.com/questions/1091484/how-to-show-open-file-dialog-in-access-2007-vba)

我更喜欢第一种方法，因为您没有附加到外部库。

# windows - 模糊（失焦）窗口

> ID：10095244
> 
> 赞同：4
> 
> 时间：2012-04-10T19:36:30.097
> 
> 标签：windows, gtk, window, pygtk

快速提问：如何在 PyGTK 中模糊（不聚焦）一个窗口，而不在其他窗口上创建或设置焦点？我在 PyGTK 文档中找不到（或者我不知道在哪里搜索）解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T17:12:37.310

```
# Assuming a Gtk.Window named 'win'...
win.set_focus(None) 
```

有关详细信息，请参阅[http://www.pygtk.org/pygtk2reference/class-gtkwindow.html#method-gtkwindow--set-focus上的文档](http://www.pygtk.org/pygtk2reference/class-gtkwindow.html#method-gtkwindow--set-focus)

> 如果焦点为无，则未设置窗口的焦点小部件。

# android - Android 后退按钮应表现为 UP 按钮

> ID：10095247
> 
> 赞同：0
> 
> 时间：2012-04-10T19:36:45.817
> 
> 标签：android, android-activity

我的应用程序有几个活动，可以被认为是层次结构中的单独级别。您在活动 A 中选择一个对象，这会将您带到活动 B，您可以在其中添加、修改和删除一些 C 级参数等。如果我遍历了 A->B->C，则将我的更改保存在 C 中，这会自动获取我回到 B 级，然后按下后退按钮，它会带我回到活动 C，因为那是看到的最后一个活动。现在，我知道你要说什么了。使用 android:noHistory="true"。好吧，我不能使用它，因为其中一些活动会启动对话框，当您关闭对话框时，android 会将您带回最后一个“常规”（即 noHistory="false"）活动。我已经尝试覆盖 onBackPressed，它在应用程序退出之前一直有效。我也试过 android:finishOnTaskLaunch="

如果后退按钮始终充当向上按钮，我会喜欢它。它永远不应该让你下降一个层次。只能上。

我的目标是 API 级别 8。似乎 api 11 有一些用于清除历史堆栈的选项。我可以在 API 8 中做些什么来使其正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:51:20.010

> 如果我已经遍历 A->B->C，将我的更改保存在 C 中，这会自动将我带回 B 级，然后按返回按钮，它将带我回到活动 C，因为那是看到的最后一个活动。

`finish()`在它“自动带我回到 B 级”之后让C 调用（大概是通过调用`startActivity()`）。然后，从 B 按下 BACK 将使用户返回到 A。

> 如果后退按钮始终充当向上按钮，我会喜欢它。它永远不应该让你下降一个层次。只能上。

然后`finish()`，当您完成所有“向下”活动时，如果用户没有通过按 BACK 退出它们自己执行此操作。

# java - 你如何在eclipse中修改可执行jar类？

> ID：10095250
> 
> 赞同：0
> 
> 时间：2012-04-10T19:36:50.463
> 
> 标签：java, executable-jar, twitter4j

我试图在这里学习一个教程，该教程将帮助我修改 twitter4j 可执行 jar 中的一些源代码，以允许我使用 twitter 的本机图像上传 api，不幸的是，我很难弄清楚这是如何完成的，因为这些文件不允许我要在 Eclipse 中完全编辑它们，[下面的教程](http://sholtz9421.wordpress.com/2011/10/29/using-update_with_media-with-twitter4j/#comment-17)看起来很简单，但作者没有包括如何编辑文件的步骤，假设这是我只能假设的常识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:40:42.407

您有两种选择。

1）获取原始源代码，并在进行更改后打包jar。

2）解压jar（任何标准解压程序都应该这样做），进行更改，然后重新打包jar。

也就是说，仔细阅读这些链接（我没有深入研究）表明这些是您可以使用的库 - 而不是您需要修改才能开始工作的库。你想通过修改库来实现什么？

# cakephp - 新服务器上 CakePHP 2.1 的返回结果中缺少模型

> ID：10095252
> 
> 赞同：2
> 
> 时间：2012-04-10T19:37:00.653
> 
> 标签：cakephp, cakephp-2.1

我们的站点在旧服务器上运行良好，但我们最近将它移到了新服务器上，并且立即，站点上的所有内容看起来都一团糟（即在视图中找不到它正在寻找的数据）。

经过进一步调查，之前返回的内容是这样的：

```
$articles[0]['Article']['title'] 
```

现在正在返回：

```
$articles[0][0]['title'] 
```

起初，我们被告知 PDO 未安装（或已损坏或其他原因），但我们一遍又一遍地使用 PDO 重建 Apache，它显示 PHP 和 MySQL 都启用了 PDO。

我试过搜索，但要么我在搜索错误的东西，要么那里没有好的信息。有什么想法可能导致这种情况和/或我们如何解决它？

* * *

**编辑：**

它在更新之前也可以在此服务器上运行，更新到 5.3（不确定之前的版本是什么）

**编辑 2**

根据建议，我将数据源更改为[HpMysql](https://github.com/lorenzo/HipHop/blob/master/Model/Datasource/Database/HpMysql.php) 这使其工作。但它并没有回答我的问题，因为我认为它是一个临时修复 - 我仍然想知道问题是什么，以及如何在不必使用此解决方法的情况下修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:11:56.597

**原始海报（我）的回答：**

据我们的服务员说，“加载PDO有两种方式。第一种是使用easyapache安装PDO php扩展。第二种是通过PECL安装PDO。看起来问题模块不同。”

显然，这台服务器上有 PECL，而不是普通的 easyapache PDO。当他删除它并使用easyapache PDO重新启动/重置它时，一切都很好。

所以 - 听起来像 CakePHP 需要“正常”的 PDO。

谜团已揭开。

如果您有 PECL，则可以使用此解决方法：

在您的数据源文件夹中创建一个文件“HpMysql.php”并添加此代码/类：[https ://github.com/lorenzo/HipHop/blob/master/Model/Datasource/Database/HpMysql.php](https://github.com/lorenzo/HipHop/blob/master/Model/Datasource/Database/HpMysql.php)

将你的 database.php 'datasource' 更改为 'HpMysql'

* * *

**不同的问题：（**原来是相同的答案）：

[$this->Auth->login() 创建返回 1 行的正确查询，但 IF 检查失败（服务器特定问题）](https://stackoverflow.com/questions/11421213/this-auth-login-creates-correct-query-that-returns-1-row-but-fails-if-chec)

# php - Vimeo API 集成

> ID：10095254
> 
> 赞同：0
> 
> 时间：2012-04-10T19:37:19.393
> 
> 标签：php, api, vimeo

我正在尝试创建一个使用 viemo api 搜索视频然后以 xml 格式输出的站点。我有一个好的开始，但现在我陷入了困境。用户输入正在发布，但萤火虫控制台上没有显示任何结果......

这是我用于 vimeo api 集成的 .php：

```
 <?
include('connect.php');

$video_id= $_POST['text'];

$url = 'http://vimeo.com/api/rest/v2';
$url .= '?';
$url .= 'method=vimeo.videos.search&';
$url .= 'oauth_consumer_key='.$api_key2.'&';
$url .= 'per_page=10&';
$url .= 'query='.$video_id.'&';
$url .= 'sort=relevant&';
$url .= 'full_response=1';

$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
$curl_response = curl_exec($ch);
curl_close($ch);

$xmlObject = simplexml_load_string($curl_response);

$title= 'title';
$id = 'id';
$video_url = 'videosurl';
$thumbnails = 'thumbnail[1]';
$outputXML .= "";

$outputXML .= "<rsp>\n";

foreach($xmlObject->videos as $video) {
    $videoTagBegin = "\t<video>\n";
    $urlXML = "\t\t<videosurl>".$video->attributes()->$video_url."</videosurl>\n";
    $titleXML = "\t\t<title>".$video->attributes()->$title."</title>\n";
    $thumbXML = "\t\t<thumbnail>".$video->attributes()->$thumbnails."</thumbnail>\n";
    $videoTagEnd = "\t</video>\n";
    $outputXML .= $videoTagBegin.$titleXML.$thumbXML.$urlXML.$videoTagEnd;
}
$outputXML .= "</rsp>";

print $outputXML;

?> 
```

任何帮助，将不胜感激。我完全被困住了。

如果它有帮助的话，这是我的 JS....

```
function closeDivs(e) {
    e.preventDefault();
    $('').empty();
};

$(document).ready(function() {

    $('#searchbtn').bind('click' || 'enter',function(e) {
        if ($.trim($('#searchBox').val()) !== '') {
            $('#videos').empty();
            closeDivs(e);
            $('#videos').append('<img src="img/loading.gif" alt="loading" class="loading" />');
            getEvents(e);
            getVideos(e);
        }
    });

function getEvents(e) {
    e.preventDefault();
    var text = 'event_id='+$('#searchBox').val();
    $.ajax({
        url: 'getEvents.php',
        dataType: 'xml',
        type: 'POST',
        data: text,
        success: function(data) {                   
            },

        error: function(data) {
                console.log('Error: ' + data);
        }

    })
};

function getVideos(e) {
    e.preventDefault();
    var text = 'video_id='+$('#searchBox').val();
    $.ajax({
        url: 'getVideos.php',
        dataType: 'xml',
        type: 'POST',
        data: text,
        success: function(data) {                               

        },
        error: function(data) {
                console.log('Error: ' + data);
        }

    })
};
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:45:44.607

看来您从 curl 中没有得到任何回报尝试像这样修改您的代码以查看是否有任何错误

```
if($curl_response===false)
{
    exit('Curl error: ' . curl_error($ch));
} 
```

在你关闭 curl 电话之前 - 看看发生了什么

# vb.net - VB.net 方法的返回值。System.__Com.object

> ID：10095257
> 
> 赞同：1
> 
> 时间：2012-04-10T19:37:33.677
> 
> 标签：vb.net, visual-studio-2010, com, upnp

我知道这是一个愚蠢的问题，但我找不到有关它的信息。

```
Public Function TestFunc() As String

        Dim lMapper = cRouter.StaticPortMappingCollection
        Dim lMappedPort As NATUPNPLib.IStaticPortMapping
        Dim Test As String

        Test = lMapper.Add(80, "UDP", 8080, "192.168.1.100", True, "Local Web Server").ToString
        MsgBox(Test)
End Function 
```

lMapper.Add 将返回类似此处 S_OK 等的内容 -> [http://msdn.microsoft.com/en-us/library/aa366148(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa366148(v=vs.85).aspx)

如何获得这个值？以我的方式，我得到 *System.__ComObject* ;[

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:52:38.413

您只需要将它转换为这样的 IStaticPortMapping

```
 lMappedPort  = DirectCast(lMapper.Add(80, "UDP", 8080, "192.168.1.100", True, "Local Web Server"), IStaticPortMapping) 
```

# clojure - 管理clojure中的括号数量

> ID：10095264
> 
> 赞同：9
> 
> 时间：2012-04-10T19:37:54.110
> 
> 标签：clojure, lisp, readability, code-readability

我是 clojure 的新手，我正在努力解决的主要问题是编写可读的代码。我经常会得到像下面这样的函数。

```
(fn rep 
  ([lst n]
    (rep (rest lst)
    n
    (take n 
      (repeat (first lst)))))
  ([lst n out]
    (if
      (empty? lst)
      out
      (rep 
        (rest lst) n
        (concat out (take n 
          (repeat 
            (first lst)))))))) 
```

有很多末端支架的堆积。减少这种情况或以一种更容易发现缺失括号的方式对其进行格式化的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T20:17:53.600

使用 Emacs 的`paredit`模式（也在其他一些编辑器中模拟）意味着您通常 - 除非您使用鼠标/强制非结构化选择复制/粘贴 - 处理匹配的括号/大括号/括号和相关的缩进，不需要计数。

带有[https://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)（强烈推荐！）的 Emacs 默认为 clojure 启用了 paredit。否则，请参阅 [http://emacswiki.org/emacs/ParEdit](http://emacswiki.org/emacs/ParEdit)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-10T20:20:46.580

除了拥有支持大括号匹配的编辑器之外，您还可以尝试减少代码嵌套。我相信您的功能可以重写为：

```
(defn rep [coll n] (mapcat (partial repeat n) coll)) 
```

当然，这更像是一门艺术（工艺）而不是科学，但有一些指示（按随机顺序）：

*   [4clojure](http://www.4clojure.com)上的问题及其顶级用户的解决方案（在解决特定问题后可见） - 我相信 Chris Houser 在处理`chouser`
*   说到 CH——“Clojure 的乐趣”是一本非常有用的读物
*   在 clojure.core 上浏览文档 - 那里有很多有用的功能
*   `->`和`->>`线程宏对于扁平化嵌套代码*非常*有用
*   stackoverflow - 世界上一些最聪明和最有帮助的人在那里回答问题;-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T19:48:33.033

在这种情况下，为括号着色的编辑器非常有用。例如，这是您的代码在我的 vim 编辑器中的样子（使用[vimclojure](http://writequit.org/blog/?p=386)）：

![彩虹色](../Images/178f8e5499ce7d78d20542d7ecfdb063.png)

由于您没有说明您使用的是哪个编辑器，因此您必须为您的编辑器找到适当的彩虹着色功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T20:28:53.920

```
(fn rep 
  ([lst n]
    (rep lst n nil))
  ([lst n acc]
    (if-let [s (seq lst)]
      (recur (rest s) n (concat acc (repeat n (first s))))
      acc))) 
```

我认为这更具可读性。注意：

*   尾递归时应该使用 recur
*   你应该测试`seq`- 见[http://clojure.org/lazy](http://clojure.org/lazy)
*   重复可以计数
*   concat 将丢弃 nil，这样可以避免重复自己
*   你不需要为每个打开的括号开始一个新行

至于括号 - 你的编辑器/IDE应该照顾好它。我这里是瞎写的，如有错误请见谅...

[Rafał Dowgird 的代码更短；我也在学习……】

[更新：]重新阅读“懒惰”链接后，我认为我一直在错误地处理懒惰序列，

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-10T20:37:18.803

我无法足够强烈地回应使用 paredit 或其他编辑器中的某些类似功能的价值。它使您完全无需关心括号 - 它们总是完美匹配自己，并且像“更改`(foo (bar x) y)`为`(foo (bar x y))`”这样的繁琐且容易出错的编辑任务变成了一次击键。在一周左右的时间里，paredit 会让你难以置信，因为它会阻止你手动做事情，但是一旦你学会了自动处理 parens 的方法，你将永远无法回头。

我最近听到有人说，我认为它大致准确，写 lisp 没有 paredit 就像写 java 没有自动完成（可能，但不是很愉快）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-10T19:44:15.617

我不确定您是否可以避免所有括号。但是，我看到 Lispers 所做的是使用带有括号匹配/突出显示甚至彩虹括号的编辑器：http://emacs-fu.blogspot.com/2011/05/toward-balanced-and-colorful-delimiters [。 html](http://emacs-fu.blogspot.com/2011/05/toward-balanced-and-colorful-delimiters.html)

坦率地说，这些特性对非 Lisp 编辑器也很有用 :)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T22:36:27.430

始终使用由至少 75% 的消费后材料制成的 100% 回收的右括号；那么你不必为使用这么多而感到难过。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-11T00:31:13.080

随意格式化它。以读者喜欢的任何风格显示代码是编辑器的工作。我喜欢 C 风格的分层树形格式，在它们自己的行上带有一个括号（所有的 LISPers 都对此大发雷霆:-)))))))))))))

但是，我有时会使用这种风格：

```
 (fn rep 
  ([lst n]
    (rep (rest lst)
    n
    (take n 
      (repeat (first lst)) )  )   )    ) 
```

这是对括号间隔的传统样式的更新（log2 分支级别）

我喜欢空间的原因是我的视力很差，我根本无法阅读密集的文字。所以对于那些即将告诉我按照我所说的传统方式做事的愤怒的 LISPers，好吧，每个人都有自己的方式，放松，没关系。

等不及有人在 Clojure 中编写了一个像样的编辑器，它不是文本编辑器而是*表达式*编辑器**，然后格式问题就消失了。我自己写一个，但需要时间。这个想法是通过对表达式应用函数来编辑表达式，我使用拉链来导航代码，逐个表达式，而不是单词、字符或行。代码由您想要的任何显示功能表示。

** 是的，我知道有 emacs/paredit，但我尝试了 emacs 并且不喜欢它，抱歉。

# android - Android SharedPreference 存储

> ID：10095268
> 
> 赞同：0
> 
> 时间：2012-04-10T19:38:13.110
> 
> 标签：android, preferences, sharedpreferences

我有一个preferences.xml 文件，用于设置将在整个应用程序中使用的首选项。现在，我只是将preferences.xml 文件设置为我们想要的方式，我想知道对于我们想要存储的每个首选项，我们是否需要使用代码来实际保存首选项以便以后可以检索它，或者确实它会自动保存吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:46:59.267

如果您的`preferences.xml`文件将被更改/更新，您将需要编写代码以便将更改**保存**在首选项中。例如，如果我必须每次在 xml中更新“*分数”，我会使用如下代码：*

```
SharedPreferences sp = getSharedPreferences("preferences",Context.MODE_PRIVATE);
   Editor ed =sp.edit();
   ed.putInt("score", 1000);
   ed.commit(); 
```

# version-control - Perforce 文件夹的服务器端复制/移动 - 没有本地文件同步

> ID：10095269
> 
> 赞同：8
> 
> 时间：2012-04-10T19:38:26.447
> 
> 标签：version-control, perforce, depot

在我目前正在进行的项目中，我们在 /branches 和 /tags 文件夹中有很多文件夹（从 Subversion 迁移到 Perforce 后留下的）。

我想清理混乱 - 我想直接在仓库上远程移动/复制/重命名文件夹，而不是在本地获取它们。我无法在本地获取它们，因为我们正在谈论数百 GB 甚至数百万个文件 - 数十个分支 x ~5GB。

**是否可以命令 Perforce 仅在服务器上移动文件夹？**

（我没有直接访问 Perforce 机器的权限，我无法在服务器上移动文件夹或更新 Perforce 数据库）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:11:40.710

`p4 copy -v`允许您复制库中的文件，而无需将这些文件同步到您的工作区。（有关详细信息，请参阅[`copy`参考资料。）](http://www.perforce.com/perforce/doc.current/manuals/cmdref/copy.html)

`p4 delete -v`允许您删除仓库中未同步到工作区的文件。（有关更多详细信息，请参阅[`delete`参考资料](http://www.perforce.com/perforce/doc.current/manuals/cmdref/delete.html)或[知识库文章 #1148](http://kb.perforce.com/article/1148/deleting-a-file-without-syncing)。）

还`p4 move -k`允许您在仓库中移动文件而不在本地移动它们，但如果您没有将它们同步到您的工作区，我不确定这是否适用。（有关详细信息，请参阅[`move`参考资料。）](http://www.perforce.com/perforce/doc.current/manuals/cmdref/move.html)

您也可以使用 a`copy`后跟 a来完成移动`delete`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T22:15:08.743

我*认为*您可以构建一个工作区来映射所有相关文件。你可以运行`sync -k`让 Perforce 认为你在本地拥有这些文件。然后您可以运行`move -k`以移动服务器上的文件。

仅供参考，`p4 copy`创建一个新分支，同时`p4 move`将现有分支移动到新位置。

# apache - 如何组合不同的AddHandler？

> ID：10095273
> 
> 赞同：1
> 
> 时间：2012-04-10T19:38:57.920
> 
> 标签：apache, .htaccess, url-rewriting, universal-code

昨天，我在[问关于使 .htaccess 文件“通用”](https://stackoverflow.com/questions/10075885/how-to-create-universal-htaccess-file)的问题，以便我可以在不同的服务器上使用它。
今天，我发现问题只是因为 1 行，
“AddHandler”

在 1 台服务器上它通过在顶部添加来工作

```
AddHandler x-httpd-php5-cgi .html 
```

在另一台服务器上它正在使用，

```
AddHandler x-httpd-php5 .php .html 
```

但是当我结合这两行时，它只适用于单个服务器。难道不能结合不同的“AddHandler”在所有服务器上工作吗？

# c# - Convert.Int64 未重新调整 LINQ To 实体

> ID：10095276
> 
> 赞同：2
> 
> 时间：2012-04-10T19:39:01.430
> 
> 标签：c#, linq, linq-to-entities

我收到以下异常：LINQ to Entities 无法识别“Int64 ToInt64(System.String)”方法，并且该方法无法转换为存储表达式。

我有 long.Parse(ProjectID.ToString()) 并且我看到建议是使用 Convert.ToInt64 但我仍然遇到相同的异常

```
string projID = ProjectFileID.ToString();

            var d = (from f in context.FileInfo
                     where f.ID == Convert.ToInt64(projID)
                     select (f)); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T19:42:22.700

只需在查询之外进行转换，因此您可以将结果直接与类型变量进行比较`long`：

```
// TODO: Error handling
long projID = Convert.ToInt64(ProjectFileID.ToString());

var d = (from f in context.FileInfo
         where f.ID == projID
         select (f)); 
```

此外，鉴于您正在调用`ToString()`，`ProjectFileID`您是否可以改为使用它，因为它看起来肯定是一个`int`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:44:17.460

原因是它试图在查询本身内部进行转换，而幕后 SQL 没有对该扩展的定义。解决方法是将查询转换为 long 外部（到临时变量）并将其传递给 LINQ。

# java - 使用 jsoup 提取标题、描述和 h1 形成一个 url

> ID：10095277
> 
> 赞同：0
> 
> 时间：2012-04-10T19:39:04.327
> 
> 标签：java, jsoup

我想从 JAVA 中的 url 中提取标题、描述、H1。我在这里尝试[使用 URL 获取标题、元描述内容](https://stackoverflow.com/questions/9958425/get-title-meta-description-content-using-url)的示例，但它弹出错误：无法从静态上下文引用非静态方法 getMetaTag(org.jsoup.nodes.Document,java.lang.String)

现在有人为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:32:34.917

这意味着方法 getMetaTag 不是静态的，您正试图直接从静态方法调用它。
静态成员不能直接调用实例成员
在这里查看：http: [//docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)
编辑：尝试实例化类。

```
new YourClass().getMetaTag(); 
```

# c# - Switch case 中多余的大括号的作用是什么？

> ID：10095280
> 
> 赞同：56
> 
> 时间：2012-04-10T19:39:08.820
> 
> 标签：c#, switch-statement

我对这件事很好奇......见例子：

```
switch(x)
{
    case(a):
        {
        //do stuff
        }
        break;
    case(b):
        //do stuff
        break;
} 
```

我一生都像案例 b 那样做，但是由于 C# 允许我使用它，而 Visual Studio 允许我折叠那个东西，我很好奇 - 案例 a（带大括号）和案例 b 之间的真正区别是什么?

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-10T19:47:11.373

一对带有零个或多个语句的大括号（不是*括号*--`[]`而不是*括号*--`()`而是*大括号* `{}`）是 C# 中的合法语句，因此可以出现在语句可能合法出现的任何地方。

正如其他人指出的那样，这样做的典型原因是因为这样的语句引入了一个新的*局部变量声明空间*，然后定义了在其中声明的局部变量的*范围*。（回想一下，元素的“范围”是*程序文本的区域，在该区域中，元素可以通过其非限定名称来引用*。）

我注意到这在语句中*特别*有趣，`switch`因为 switch 中的范围规则有点奇怪。有关它们有多奇怪的详细信息，请参阅我关于该主题的文章中的“案例 3：”：

[http://ericlippert.com/2009/08/13/four-switch-oddities/](http://ericlippert.com/2009/08/13/four-switch-oddities/)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-04-10T19:44:53.720

大括号 {} 用于定义一组操作的范围。奇怪的是，以下将编译和工作：

```
private void ConnectionStateChange(object sender, StateChangeEventArgs e)
{
    string s = "hi";
    switch(s)
    {
        case "hi":
            {
                int a = 1;
                a++;
            }
            {
                int a = 2;
                a++;
            }
            break;
    }

    {
        int a = 1;
        a++;
    }
    {
        int a = 2;
        a++;
    }
} 
```

如您所见，在该方法中，我创建了四个变量，每个变量称为 a。每个都是完全独立的，因为作为局部变量，它们只存在于自己的范围内。

这有某种意义吗？

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-10T19:40:43.467

它创建了一个新范围，您可以在其中创建新变量。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-10T19:42:08.347

它为您使用的变量创建了新的范围。变量的范围有时可能很棘手。例如在您发布的代码中；

```
switch(x)
{
    case(a):
        {
        int i = 0;
        }
        break;
    case(b):
        i = 1; // Error: The name 'i' doesn't exist in the current context
        break;
} 
```

该错误在这里是有意义的，因为`case(b)`变量`a`被超出范围访问。现在另一方面，

```
switch(x)
{
    case(a):
        {
        int i = 0;
        }
        break;
    case(b):
        int i = 1; // Error: A local variable named 'i' cannot be declared in this scope because it would give a different meaning to 'i', which is already used in a 'child' scope to denote something else
        break;
} 
```

以上两个错误看起来相互矛盾。为了解决这个问题，您应该在两个 case 语句中分别定义范围，

```
switch(x)
{
    case(a):
        {
        int i = 0;
        }
        break;
    case(b):
        {
        int i = 1; // No error
        }
        break;
} 
```

[Eric Lippert在他的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/08/13/four-switch-oddities.aspx)上分享了一个很好的链接来解释 case 语句中的变量作用域。你应该看看它。

# postgresql - 在 postgres 中的每个“对象”下生成所有“数据字典”报告

> ID：10095289
> 
> 赞同：1
> 
> 时间：2012-04-10T19:39:42.857
> 
> 标签：postgresql, report, pgadmin

我有一个包含大约 50 个表的数据库。我想在每个表上运行报告“数据字典”。

理想情况下，我希望它们都在一个报告中，例如，在 PGAdminIII 中，如果我右键单击选择“表”，我将获得所有“对象”的报告，每个对象下都有一个数据字典报告。

是否有自动执行此操作的方法，或者我可以安装到 postgres 的插件？或者有没有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:42:20.907

如果我理解正确，您指的是鼠标右键单击 PgAdminIII 中的表并选择报告 > 数据字典报告的能力？

我不知道 PgAdminIII 有什么方法可以做到这一点。您可以考虑使用其他工具，例如 SchemaSpy。另一种选择（正如@kgrittn 所暗示的）是使用带有 \H 标志的 psql \d 来生成 html 输出。[我的解决方案](https://github.com/gsiems/DataDict)（因为 SchemaSpy 没有做我需要的事情，而且我需要 Postgres 和 Oracle 的相同输出）是使用 perl、DBD::Pg 和 Template::Toolkit 推出我自己的解决方案。

**更新：**添加了 GitHub 链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-13T00:29:57.670

我用 Python 编写了一个相当简单的 Postgres 数据字典生成器，它涵盖了指定数据库中的所有模式和表。如果它不完全符合您的要求，那么修改将相当容易。

[https://github.com/kylejmcintyre/pypostgreports](https://github.com/kylejmcintyre/pypostgreports)

# c# - 在 XNA 应用程序中移动单个精灵时卡顿

> ID：10095290
> 
> 赞同：6
> 
> 时间：2012-04-10T19:39:46.713
> 
> 标签：c#, xna, sprite

**更新：我在这里上传了一段显示口吃的视频：http: [//intninety.co.uk/xnastutter.mp4](http://intninety.co.uk/xnastutter.mp4)如果您不是在 1920x1080 观看视频，您可能需要仔细查看视频，但您会在那里看到每 2 秒左右移动时会出现相当明显的口吃，我建议在 Windows Media Player 而不是您的网络浏览器中查看它，以确保视频本身不会断断续续，从而防止您看到实际的口吃**

我最近拿起了一个我不久前开始的项目，但是我仍然在努力解决我留下的问题！

目前我有一个非常简单的应用程序，它在屏幕上只有一个精灵，并使用方向键四处移动。问题是每两秒钟左右，游戏就会卡顿，并且精灵似乎会向后跳，然后非常快地向后跳。

精灵本身是一个 55x33 的位图，所以不是很大，使用的代码如下。希望这足以让人们了解可能是什么问题的一些想法，如果需要一段视频来确切了解口吃的样子，我可以将其放在一起并在需要时将其上传到某个地方。

正如您将在代码中看到的那样，它确实通过使运动发生更大来补偿帧之间的时间损失，但是这种下降在时间方面非常一致地发生，这让我相信我在某处做错了什么。

我已经在几台不同的机器上尝试过，但问题仍然存在于所有机器上，如果有人有任何想法或可以看到它在哪里我搞砸了，如果你能指出它，将不胜感激**。**

谢谢 ：）

**游戏的构造器设置图形设备管理器**

```
graphics = new GraphicsDeviceManager(this);
graphics.IsFullScreen = true;
graphics.SynchronizeWithVerticalRetrace = false;
graphics.PreferredBackBufferWidth = 1920;
graphics.PreferredBackBufferHeight = 1080;
Content.RootDirectory = "Content";
this.IsFixedTimeStep = false; 
```

**来自游戏更新方法的代码**

```
KeyboardState keyboard = Keyboard.GetState();
GamePadState gamePad = GamePad.GetState(PlayerIndex.One);

if (keyboard.IsKeyDown(Keys.Escape)) {
    this.Exit();
}

if ((keyboard.IsKeyDown(Keys.Left)) || (gamePad.DPad.Left == ButtonState.Pressed))
{
    this.player.MoveLeft((float)gameTime.ElapsedGameTime.TotalMilliseconds); 
} else if ((keyboard.IsKeyDown(Keys.Right)) || (gamePad.DPad.Right == ButtonState.Pressed))
{
    this.player.MoveRight((float)gameTime.ElapsedGameTime.TotalMilliseconds);
}

if ((keyboard.IsKeyDown(Keys.Up)) || (gamePad.DPad.Up == ButtonState.Pressed))
{
    this.player.MoveUp((float)gameTime.ElapsedGameTime.TotalMilliseconds);
} else if ((keyboard.IsKeyDown(Keys.Down)) || (gamePad.DPad.Down == ButtonState.Pressed))
{
    this.player.MoveDown((float)gameTime.ElapsedGameTime.TotalMilliseconds);
}

base.Update(gameTime); 
```

**上述更新方法中看到的“移动”方法**

```
public void MoveLeft(float moveBy)
{
    this.position.X -= (moveBy * this.velocity.X);
}
public void MoveRight(float moveBy)
{
    this.position.X += (moveBy * this.velocity.X);
}

public void MoveUp(float moveBy)
{
    this.position.Y -= (moveBy * this.velocity.Y);
}

public void MoveDown(float moveBy)
{
    this.position.Y += (moveBy * this.velocity.Y);
} 
```

**游戏的抽奖方式**

```
GraphicsDevice.Clear(Color.CornflowerBlue);

spriteBatch.Begin();

spriteBatch.Draw(this.player.Texture, this.player.Position, null, Color.White, this.player.Rotation, this.player.Origin, 1.0f, SpriteEffects.None, 0.0f);

spriteBatch.End();

base.Draw(gameTime); 
```

**编辑：忘了提，Move 方法中使用的速度对象是 Vector2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:27:29.807

我设法看到它在一瞬间发生了一次，这导致了我认为是问题所在。由于您将原始`ElapsedGameTime.TotalMilliseconds`值用作运动的一个因素，因此您的程序经历的所有计算机延迟都将直接应用于运动。例如，如果您的计算机 (OS) 在二十分之一秒内执行其他操作，则经过时间值将累积到约 50 毫秒的值，而通常约为 0.3 毫秒。这将导致帧的运动量是正常帧的 150 倍。

要手动导致这种情况发生，您可以执行以下操作：

```
// define a frame counter
private int mCounter;

...

protected override void Update(GameTime pGameTime)
{
   // save the elapsed time value
   float time = (float)pGameTime.ElapsedGameTime.TotalMilliseconds;

   ...

   // force a long frame every 2500th frame (change depending on your framerate)
   if (mCounter++ > 2500)
   {
      mCounter = 0;
      time = 75; // about 225 times longer frame
   }

   ...

   // use the time value in your move calls
   if ((keyboard.IsKeyDown(Keys.Left)) || (gamePad.DPad.Left == ButtonState.Pressed))
      mPlayer.MoveLeft(time); 
```

为了防止这种情况发生，（除了设置`IsFixedTimeStep = true;`，它会立即修复它；但假设你想`IsFixedTimeStep`成为`false`），你应该使用一个时间值，如上所述，但限制它。由您来确定经过的时间与运动的比例，并确定允许通过每帧的合适时间。前任：

```
protected override void Update(GameTime pGameTime)
{
   // save the elapsed time value
   float time = (float)pGameTime.ElapsedGameTime.TotalMilliseconds;
   if (time > 1)
      time = 1;

   ...

   if ((keyboard.IsKeyDown(Keys.Left)) || (gamePad.DPad.Left == ButtonState.Pressed))
      mPlayer.MoveLeft(time);

   ... 
```

虽然这将纠正您当前程序的问题，但您的帧只有 0.3 毫秒，因为没有发生太多事情。一旦您的游戏有更多内容，每帧将花费更多时间，并且您希望上限远高于 1 毫秒。

***编辑：***要清楚，这是您的 CPU/OS 的“停机时间”。它不会消失*，这取决于你是在它发生时向前跳一堆（例如，如果经过的时间达到 2000 毫秒，这可能会导致问题），或者限制这些尖峰并让它们导致落后; 无论哪种方式，您的议案中都会有一个无法填补的“漏洞”。这真的很正常，而且并不像看起来那么重要。一旦你的游戏中发生了更多事情，它就会变得越来越不引人注目。它目前非常突出，特别是因为只有两个图形存在，没有其他任何事情发生。

*（实际上，您可能会寻找可以关闭的其他应用程序和进程，以防止 CPU 被其他程序借用，但由于您使用的是多任务操作系统，因此您永远无法保证拥有 CPU给自己。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:04:57.217

*再次更新*

刚刚有一个想法。你有没有检查过`(float)gameTime.ElapsedGameTime.TotalMilliseconds`不会导致无穷大或负数？经过时间变为负数可以解释你的精灵向后跳跃然后向前跳跃。

它的键盘。您可以通过将左右移动更改为鼠标左键和鼠标右键单击来证明这一点。使用 keydown 和 keyup 触发器来设置状态而不是 iskeydown。

更新：

似乎有几件事会导致 XNA 中出现“卡顿”。我认为您的问题肯定是键盘问题。但是，我只能假设您已经使用 GamePad 测试了您的代码并且它也遭受了同样的影响。

还有另一个问题，`IsFixedTimeStep`但您已经将其设置为 false。快速的谷歌搜索表明，有很多人遇到这些类型的问题，但没有任何明确的解决方法。

[在http://forums.create.msdn.com/forums/t/9934.aspx?PageIndex=6](http://forums.create.msdn.com/forums/t/9934.aspx?PageIndex=6)有一个很长的讨论

其他要看的东西：

尝试将帧速率限制为 60 fps。无论如何，没有任何理由超越这一点。一种力量表明，一个不做任何事情的 2d 应用程序可能会以非常高的吞吐量停止图形管道。

检查是否曾经调用过 IsSlowRunning。垃圾收集和混沌理论可能会导致此设置。我

# javascript - 多数组JS

> ID：10095291
> 
> 赞同：1
> 
> 时间：2012-04-10T19:39:49.063
> 
> 标签：javascript, arrays

我有一个简单的数组问题，我无法解决。

示例：http: [//jsfiddle.net/8jyUT/](http://jsfiddle.net/8jyUT/)

为什么第二个 console.log 不能正确显示数组？

（我在 Chrome 上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:43:45.610

它正在记录数组，但它似乎是空的，因为您没有以数字方式填充它（这就是数组的填充方式）。您仍然可以访问`name`数组的属性，

```
var albums = new Array();
var album = new Array();
album['name'] = 'This is War';
albums.push(album);

console.log(albums);            
console.log(albums[0].name);​ 
```

在 JS 中，任何对象都可以有属性，而数组就是对象。如果您对数组方法或任何数组方法都没有使用数字排序`album`，那么请使用对象而不是数组：

```
var albums = [], album = {};
album['name'] = 'Test';
albums.push(album)

console.log(albums);            
console.log(albums[0].name);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:50:58.080

我能够通过添加来获得要显示的值`['name']`。我不确定这有多大帮助。如果您检查当前代码，它确实显示它是一个数组，但您需要指定第二个索引才能显示一个值。如果您正在寻找具有更多属性的东西，我建议您使用对象而不是数组。

# php - 每次点击图像时 jCarousel 初始化/刷新/重新加载

> ID：10095293
> 
> 赞同：2
> 
> 时间：2012-04-10T19:40:03.437
> 
> 标签：php, javascript, jquery, jcarousel

我正在使用 jCarousel (http://sorgalla.com/projects/jcarousel/) 进行图片预览，但面临一个问题：我不知道如何重新加载/刷新 jCarousel 动态列表。

我有几个类别的图像。当我单击其中一张图片时，我需要创建列表并从该元素开始预览。我有一些代码，但不知道如何在单击以其他图像开始预览的其他图像后重新创建所有列表。这是我的代码：

```
$(document).ready(function(){
$("ul#stage li").live('click', function() {

    var ul = $(this).parent();
    var index = +(ul.children().index(this))+1;

    var mycarousel_itemList = [ ];

    $('li[data-id]').each(function () {
        var $this = $(this);
            mycarousel_itemList.push({
                url : $this.attr("data-img"),
                title : $this.attr("data-title")
            });
    });

    function mycarousel_itemLoadCallback(carousel, state) {
        for (var i = carousel.first; i <= carousel.last; i++) {
            if (carousel.has(i)) {
                continue;
            }
            if (i > mycarousel_itemList.length) {
                break;
            }
            carousel.add(i, mycarousel_getItemHTML(mycarousel_itemList[i-1]));
        }
    };

    function mycarousel_getItemHTML(item) {
        return '<img src="' + item.url + '" width="800" height="600" alt="' + item.url + '" />';
    };
        alert(index);
    jQuery('#mycarousel').jcarousel({
        itemLoadCallback: {onBeforeAnimation: mycarousel_itemLoadCallback},
        size: mycarousel_itemList.length,
        scroll: 1,
        start: index,
        wrap: 'last',
        animation: 'fast',
        visible: 1
    });

    document.getElementById('popup-content').style.background='url('+$(this).attr("data-img")+') no-repeat center';
    document.getElementById('fades').style.display='block';
    document.getElementById("light").style.display = "block";
    $("#light").fadeTo("slow", 1);
});
}); 
```

一切都是这样的：有图像>我单击其中一个>带有jCarousel和一个可见图像的弹出式节目，然后我可以滚动浏览所有其他图像。

它工作得很好，但只是第一次。当我单击其他图像（关闭弹出窗口后）时，视图以最后打开的图像开始。

如果有什么不够清楚 - 请问。我会尽量让它更精确。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:36:29.460

可以重新创建jCarousel，首先使用$('#mycarousel').remove(); 然后再次初始化 jCarousel。我真的不明白你想要做什么，但这在大多数情况下会有所帮助，当然 jCarousel 应该有 Destroy 方法，但它没有。

为什么在某些情况下不使用 jquery 选择器？

# c++ - 为什么 Codan 找不到 size_t

> ID：10095295
> 
> 赞同：11
> 
> 时间：2012-04-10T19:40:14.113
> 
> 标签：c++, eclipse, eclipse-cdt, code-analysis, coldfire

我刚刚开始使用 Eclipse Indigo（来自 Galileo），每次使用 size_t 时，我都会在排水沟中发现小红虫。

![在此处输入图像描述](../Images/e87062dad94cb8e778bcefd4924e5993.png)

代码编译没有问题，但我怀疑我必须明确添加包含目录的路径。我已经有通常的嫌疑人在那里了。我正在使用 Gnu 工具链为 ColdFire 处理器进行交叉编译，因此除了来自芯片制造商的标准包含之外，我还拥有 m68k-elf 下的包含

```
\include  
\include\c++\4.2.1
\include\c++\4.2.1\include
\include\c++\4.2.1\m68k-elf 
```

## 更新

我注意到这个工具链的唯一位置 stddef.h 是在一个`lib`目录中

```
gcc-m68k\lib\gcc\m68k-elf\4.2.1\include 
```

我添加了该路径，父路径和`\include-fixed`来自父路径，但问题仍然存在。

## 测试注意事项

在测试什么有效，什么无效时，我注意到了几件事

1.  修改代码分析首选项设置时不会重新触发代码分析，我仍然需要更改编辑器（只需添加空格即可）
2.  关闭代码分析设置`Symbol is not resolved`不会使错误消失。
3.  关闭所有`Syntax and Semantic Errors`，触发分析，返回并重新打开它们，然后关闭`Symbol is not resolved`可以防止错误再次出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:06:11.207

检查首选项 -> C/C++ -> 索引器下的索引器设置。

那里有一个名为“预先归档以索引”的字段。它的内容应该是：

```
cstdarg, stdarg.h, stddef.h, sys/resource.h, ctime, sys/types.h, signal.h, cstdio 
```

如果其中还有其他内容，请尝试将其替换为上述内容，然后重建索引，看看是否能解决问题。

（特别是，如果您在该字段中的值是`stdarg.h, stddef.h, sys/types.h`，那么我可以很好地猜测出了什么问题。回到 Eclipse Ganymede 中，该字段的值是`stdarg.h, stddef.h, sys/types.h`。在较新的版本（Galileo 和 Indigo）中，它已更改到上面。但是，由于该字段是“首选项”的一部分，如果您导出您的 Ganymede 首选项并将它们导入到 Galileo/Indigo，该字段将被旧的 Ganymede 值覆盖。我前一阵子被这个烧毁了。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:43:48.047

为了确保得到`size_t`你应该`#include`的标题`<cstddef>`；那么，它会是`std::size_t`，除非你也放了 a`using namespace std`或 a `using std::size_t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T07:29:48.153

如果您的工具链可以仅使用其默认包含路径和符号编译代码，那么只需将 Eclipse 设置为使用它们就足够了。转到`C/C++ Build -> Discovery Options`项目属性中，对于每种语言，`Compiler invocation command`将本地编译器（例如`g++`）更改为您的交叉编译器（例如，`C:\nburn\gcc-m68k\bin\g++`也许？）。然后在下一次构建中，自动发现将运行并将项目中显示的所谓“内置”路径和符号更新为`C/C++ General -> Paths and Symbols`编译器报告的任何内容，您可以再次重新索引以确保任何警告因为旧的“内置”已经消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T17:41:33.260

在遇到这个问题并且搜索显示两个堆栈溢出问题遇到相同的问题之后，我想我会提交我如何修复它，因为它让我非常恼火以至于无法进行实际调查。

我正在运行 Fedora，令人讨厌的是，它在 /usr/include/linux.... 中有一个 stddef.h 文件，它实际上是空的。因此，即使我在包含路径中有编译器的 stddef.h，索引器实际上也在解析另一个空文件。所以需要做的是：

**使用编译器特定的包含路径（在我的情况下是 /usr/lib/gcc/x86_64-redhat-linux/4.7.2/include/）为您的路径和符号列表添加前缀**，以避免解析其他空的 stddef.h。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T10:05:16.227

我实际上有同样的问题。这个问题似乎与 fquinner 的帖子中描述的问题相同，位于其中的 stddef.h`/usr/include/linux/stddef.h`也是空的。奇怪的`stddef.h`是，eclipse找到了正确的，甚至可以毫无问题地打开。

如果您只需要像我一样通过 eclipse 修复索引（例如在使用另一个构建工具构建时），可以通过定义`__SIZE_TYPE__`预期类型来解决这个索引问题，例如`long unsigned int`在`C/C++ General -> Paths and Symbols`.

# php - apache 中的 mod_rewrite 条件以删除 .php 未按预期工作

> ID：10095298
> 
> 赞同：0
> 
> 时间：2012-04-10T19:40:30.347
> 
> 标签：php, .htaccess, url, mod-rewrite, forwarding

```
RewriteEngine On

RewriteRule ^/showlisting/(.*)$ showlisting.php/$1 [L]
RewriteRule ^/listings/(.*)$ listings.php/$1 [L]

RewriteCond %{HTTP_HOST} ^mydomain\.
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L]

ErrorDocument 404 /notfound 
```

在上面，这就是我想要实现的目标：

1.  我想转发任何 URL，例如 www.mydomain.com/showlisting/my-listing-data/with-more-slashes/and-some-text 以显示 www.mydomain.com/showlisting* *.php* */的内容my-listing-data/with-more-slashes/and-some-text 但带有 URL 掩码，因此 .php 不会出现在浏览器窗口中。
2.  当出于 SEO 目的的请求中不存在 www 时，我还想附加 www，尽管我不确定这些天这有多重要。

当我访问 www.mydomain.com/showlisting/my-listing-data/with-more-slashes/and-some-text 但是它显示 404 错误，但是将 .php 添加到显示列表中，它工作正常。有任何想法吗？

但是请注意，附加的 www. 工作正常 - 这不是我正在努力的部分，尽管我无论如何都包含了代码的那部分以进行全面分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:50:30.740

也许

```
RewriteEngine On

RewriteRule ^showlisting/(.*)$ showlisting.php/$1 [L]
RewriteRule ^listings/(.*)$ listings.php/$1 [L]

RewriteCond %{HTTP_HOST} ^mydomain\.
RewriteRule ^$ http://www.mydomain.com/ [R=301,L]

ErrorDocument 404 /notfound 
```

# python - 无法修复 pyparsing 错误...

> ID：10095299
> 
> 赞同：6
> 
> 时间：2012-04-10T19:40:32.373
> 
> 标签：python, parsing, testing, pyparsing

# 概述

所以，我正在重构一个项目，我正在分离出一堆解析代码。我关心的代码是pyparsing。

即使在花了很多时间阅读官方文档之后，我对 pyparsing 的理解也很差。我遇到了麻烦，因为（1）pyparsing 采用（故意）非正统的解析方法，并且（2）我正在处理我没有编写的代码，评论很差，以及一组非基本的现有语法。

（我也联系不上原作者。）

## 未通过测试

我正在使用[PyVows](http://heynemann.github.com/pyvows/)来测试我的代码。我的一项测试如下（我认为即使您不熟悉 PyVows 也很清楚；如果不熟悉，请告诉我）：

```
def test_multiline_command_ends(self, topic):
                output = parsed_input('multiline command ends\n\n',topic)
                expect(output).to_equal(
r'''['multiline', 'command ends', '\n', '\n']
- args: command ends
- multiline_command: multiline
- statement: ['multiline', 'command ends', '\n', '\n']
  - args: command ends
  - multiline_command: multiline
  - terminator: ['\n', '\n']
- terminator: ['\n', '\n']''') 
```

但是当我运行测试时，我在终端中得到以下信息：

### 失败的测试结果

```
Expected topic("['multiline', 'command ends']\n- args: command ends\n- command: multiline\n- statement: ['multiline', 'command ends']\n  - args: command ends\n  - command: multiline") 
      to equal "['multiline', 'command ends', '\\n', '\\n']\n- args: command ends\n- multiline_command: multiline\n- statement: ['multiline', 'command ends', '\\n', '\\n']\n  - args: command ends\n  - multiline_command: multiline\n  - terminator: ['\\n', '\\n']\n- terminator: ['\\n', '\\n']" 
```

**笔记：**

由于输出到终端，因此预期输出（第二个）具有额外的反斜杠。这很正常。在这段重构开始之前，测试运行没有问题。

## 预期行为

输出的第一行应该与第二行匹配，但事实并非如此。具体来说，它不包括第一个列表对象中的两个换行符。

所以我得到了这个：

```
"['multiline', 'command ends']\n- args: command ends\n- command: multiline\n- statement: ['multiline', 'command ends']\n  - args: command ends\n  - command: multiline" 
```

当我**应该**得到这个时：

```
"['multiline', 'command ends', '\\n', '\\n']\n- args: command ends\n- multiline_command: multiline\n- statement: ['multiline', 'command ends', '\\n', '\\n']\n  - args: command ends\n  - multiline_command: multiline\n  - terminator: ['\\n', '\\n']\n- terminator: ['\\n', '\\n']" 
```

在代码的前面，也有这样的语句：

```
pyparsing.ParserElement.setDefaultWhitespaceChars(' \t') 
```

…我*认为*应该完全防止这种错误。但我不确定。

即使不能确定地确定问题，简单地缩小问题所在的范围也将是一个巨大的帮助。

请让我知道我可能会如何采取一两步来解决这个问题。

* * *

**编辑：**所以，嗯，我应该为此发布解析器代码，不是吗？（感谢您的提示，@andrew Cooke！）

# 解析器代码

这是`__init__`我的解析器对象。

我**知道**这是一场噩梦。这就是我重构项目的原因。☺

```
def __init__(self, Cmd_object=None, *args, **kwargs):
        #   @NOTE
        #   This is one of the biggest pain points of the existing code.
        #   To aid in readability, I CAPITALIZED all variables that are
        #   not set on `self`.
        #
        #   That means that CAPITALIZED variables aren't
        #   used outside of this method.
        #
        #   Doing this has allowed me to more easily read what
        #   variables become a part of other variables during the
        #   building-up of the various parsers.
        #
        #   I realize the capitalized variables is unorthodox
        #   and potentially anti-convention.  But after reaching out
        #   to the project's creator several times over roughly 5
        #   months, I'm still working on this project alone...
        #   And without help, this is the only way I can move forward.
        #
        #   I have a very poor understanding of the parser's
        #   control flow when the user types a command and hits ENTER,
        #   and until the author (or another pyparsing expert)
        #   explains what's happening to me, I have to do silly
        #   things like this. :-|
        #
        #   Of course, if the impossible happens and this code
        #   gets cleaned up, then the variables will be restored to
        #   proper capitalization.
        #
        #   —Zearin
        #   http://github.com/zearin/
        #   2012 Mar 26

        if Cmd_object is not None:
            self.Cmd_object = Cmd_object
        else:
            raise Exception('Cmd_object be provided to Parser.__init__().')

        #   @FIXME
        #       Refactor methods into this class later
        preparse    = self.Cmd_object.preparse
        postparse   = self.Cmd_object.postparse

        self._allow_blank_lines  =  False

        self.abbrev              =  True       # Recognize abbreviated commands
        self.case_insensitive    =  True       # Commands recognized regardless of case
        # make sure your terminators are not in legal_chars!
        self.legal_chars         =  u'!#$%.:?@_' + PYP.alphanums + PYP.alphas8bit
        self.multiln_commands    =  [] if 'multiline_commands' not in kwargs else kwargs['multiln_commands']
        self.no_special_parse    =  {'ed','edit','exit','set'}
        self.redirector          =  '>'         # for sending output to file
        self.reserved_words      =  []
        self.shortcuts           =  { '?' : 'help' ,
                                      '!' : 'shell',
                                      '@' : 'load' ,
                                      '@@': '_relative_load'
                                    }
#         self._init_grammars()
#         
#     def _init_grammars(self):
        #   @FIXME
        #       Add Docstring

        #   ----------------------------
        #   Tell PYP how to parse
        #   file input from '< filename'
        #   ----------------------------
        FILENAME    = PYP.Word(self.legal_chars + '/\\')
        INPUT_MARK  = PYP.Literal('<')
        INPUT_MARK.setParseAction(lambda x: '')
        INPUT_FROM  = FILENAME('INPUT_FROM')
        INPUT_FROM.setParseAction( self.Cmd_object.replace_with_file_contents )
        #   ----------------------------

        #OUTPUT_PARSER = (PYP.Literal('>>') | (PYP.WordStart() + '>') | PYP.Regex('[^=]>'))('output')
        OUTPUT_PARSER           =  (PYP.Literal(   2 * self.redirector) | \
                                   (PYP.WordStart()  + self.redirector) | \
                                    PYP.Regex('[^=]' + self.redirector))('output')

        PIPE                    =   PYP.Keyword('|', identChars='|')

        STRING_END              =   PYP.stringEnd ^ '\nEOF'

        TERMINATORS             =  [';']
        TERMINATOR_PARSER       =   PYP.Or([
                                        (hasattr(t, 'parseString') and t)
                                        or 
                                        PYP.Literal(t) for t in TERMINATORS
                                    ])('terminator')

        self.comment_grammars    =  PYP.Or([  PYP.pythonStyleComment,
                                              PYP.cStyleComment ])
        self.comment_grammars.ignore(PYP.quotedString)
        self.comment_grammars.setParseAction(lambda x: '')
        self.comment_grammars.addParseAction(lambda x: '')

        self.comment_in_progress =  '/*' + PYP.SkipTo(PYP.stringEnd ^ '*/')

        #   QuickRef: Pyparsing Operators
        #   ----------------------------
        #   ~   creates NotAny using the expression after the operator
        #
        #   +   creates And using the expressions before and after the operator
        #
        #   |   creates MatchFirst (first left-to-right match) using the
        #       expressions before and after the operator
        #
        #   ^   creates Or (longest match) using the expressions before and
        #       after the operator
        #
        #   &   creates Each using the expressions before and after the operator
        #
        #   *   creates And by multiplying the expression by the integer operand;
        #       if expression is multiplied by a 2-tuple, creates an And of
        #       (min,max) expressions (similar to "{min,max}" form in
        #       regular expressions); if min is None, intepret as (0,max);
        #       if max is None, interpret as expr*min + ZeroOrMore(expr)
        #
        #   -   like + but with no backup and retry of alternatives
        #
        #   *   repetition of expression
        #
        #   ==  matching expression to string; returns True if the string
        #       matches the given expression
        #
        #   <<  inserts the expression following the operator as the body of the
        #       Forward expression before the operator
        #   ----------------------------

        DO_NOT_PARSE            =   self.comment_grammars       |   \
                                    self.comment_in_progress    |   \
                                    PYP.quotedString

        #   moved here from class-level variable
        self.URLRE              =   re.compile('(https?://[-\\w\\./]+)')

        self.keywords           =   self.reserved_words + [fname[3:] for fname in dir( self.Cmd_object ) if fname.startswith('do_')]

        #   not to be confused with `multiln_parser` (below)
        self.multiln_command  =   PYP.Or([
                                        PYP.Keyword(c, caseless=self.case_insensitive)
                                        for c in self.multiln_commands
                                    ])('multiline_command')

        ONELN_COMMAND           =   (   ~self.multiln_command +
                                        PYP.Word(self.legal_chars)
                                    )('command')

        #self.multiln_command.setDebug(True)

        #   Configure according to `allow_blank_lines` setting
        if self._allow_blank_lines:
            self.blankln_termination_parser = PYP.NoMatch
        else:
            BLANKLN_TERMINATOR  = (2 * PYP.lineEnd)('terminator')
            #BLANKLN_TERMINATOR('terminator')
            self.blankln_termination_parser = (
                                                (self.multiln_command ^ ONELN_COMMAND)
                                                + PYP.SkipTo(
                                                    BLANKLN_TERMINATOR,
                                                    ignore=DO_NOT_PARSE
                                                ).setParseAction(lambda x: x[0].strip())('args')
                                                + BLANKLN_TERMINATOR
                                              )('statement')

        #   CASE SENSITIVITY for
        #   ONELN_COMMAND and self.multiln_command
        if self.case_insensitive:
            #   Set parsers to account for case insensitivity (if appropriate)
            self.multiln_command.setParseAction(lambda x: x[0].lower())
            ONELN_COMMAND.setParseAction(lambda x: x[0].lower())

        self.save_parser        = ( PYP.Optional(PYP.Word(PYP.nums)^'*')('idx')
                                  + PYP.Optional(PYP.Word(self.legal_chars + '/\\'))('fname')
                                  + PYP.stringEnd)

        AFTER_ELEMENTS          =   PYP.Optional(PIPE +
                                                    PYP.SkipTo(
                                                        OUTPUT_PARSER ^ STRING_END,
                                                        ignore=DO_NOT_PARSE
                                                    )('pipeTo')
                                                ) + \
                                    PYP.Optional(OUTPUT_PARSER +
                                                 PYP.SkipTo(
                                                     STRING_END,
                                                     ignore=DO_NOT_PARSE
                                                 ).setParseAction(lambda x: x[0].strip())('outputTo')
                                            )

        self.multiln_parser = (((self.multiln_command ^ ONELN_COMMAND)
                                +   PYP.SkipTo(
                                        TERMINATOR_PARSER,
                                        ignore=DO_NOT_PARSE
                                    ).setParseAction(lambda x: x[0].strip())('args')
                                +   TERMINATOR_PARSER)('statement')
                                +   PYP.SkipTo(
                                        OUTPUT_PARSER ^ PIPE ^ STRING_END,
                                        ignore=DO_NOT_PARSE
                                    ).setParseAction(lambda x: x[0].strip())('suffix')
                                + AFTER_ELEMENTS
                             )

        #self.multiln_parser.setDebug(True)

        self.multiln_parser.ignore(self.comment_in_progress)

        self.singleln_parser  = (
                                    (   ONELN_COMMAND + PYP.SkipTo(
                                        TERMINATOR_PARSER
                                        ^ STRING_END
                                        ^ PIPE
                                        ^ OUTPUT_PARSER,
                                        ignore=DO_NOT_PARSE
                                    ).setParseAction(lambda x:x[0].strip())('args'))('statement')
                                + PYP.Optional(TERMINATOR_PARSER)
                                + AFTER_ELEMENTS)
        #self.multiln_parser  = self.multiln_parser('multiln_parser')
        #self.singleln_parser = self.singleln_parser('singleln_parser')

        self.prefix_parser       =  PYP.Empty()

        self.parser = self.prefix_parser + (STRING_END                      |
                                            self.multiln_parser             |
                                            self.singleln_parser            |
                                            self.blankln_termination_parser |
                                            self.multiln_command            +
                                            PYP.SkipTo(
                                                STRING_END,
                                                ignore=DO_NOT_PARSE)
                                            )

        self.parser.ignore(self.comment_grammars)

        # a not-entirely-satisfactory way of distinguishing
        # '<' as in "import from" from
        # '<' as in "lesser than"
        self.input_parser = INPUT_MARK                + \
                            PYP.Optional(INPUT_FROM)  + \
                            PYP.Optional('>')         + \
                            PYP.Optional(FILENAME)    + \
                            (PYP.stringEnd | '|')

        self.input_parser.ignore(self.comment_in_progress) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T03:53:53.993

我怀疑问题是 pyparsing 的内置空格跳过，默认情况下会跳过换行符。尽管`setDefaultWhitespaceChars`用于告诉 pyparsing 换行符很重要，但此设置仅影响*在*调用`setDefaultWhitespaceChars`. 问题是 pyparsing 试图通过在导入时定义许多便利表达式来提供帮助，例如`empty`for `Empty()`、`lineEnd`for`LineEnd()`等。但由于这些都是在导入时创建的，因此它们是使用原始默认空白字符定义的，其中包括`'\n'`.

我可能应该在 中执行此操作`setDefaultWhitespaceChars`，但您也可以自己清理它。在调用之后`setDefaultWhitespaceChars`，在 pyparsing 中重新定义这些模块级表达式：

```
PYP.ParserElement.setDefaultWhitespaceChars(' \t')
# redefine module-level constants to use new default whitespace chars
PYP.empty = PYP.Empty()
PYP.lineEnd = PYP.LineEnd()
PYP.stringEnd = PYP.StringEnd() 
```

我认为这将有助于恢复嵌入式换行符的重要性。

解析器代码上的其他一些位：

```
 self.blankln_termination_parser = PYP.NoMatch 
```

应该

```
 self.blankln_termination_parser = PYP.NoMatch() 
```

您的原作者可能过于激进地使用 '^' 而不是 '|'。仅在可能会意外解析一个表达式时才使用“^”，而您确实会解析一个较长的表达式，该表达式位于备选列表的后面。例如，在：

```
 self.save_parser        = ( PYP.Optional(PYP.Word(PYP.nums)^'*')('idx') 
```

数字的 Word 或单独的 之间没有可能的混淆`'*'`。 `Or`（或`'^'`运算符）告诉 pyparsing 尝试评估所有备选方案，然后选择最长的匹配项 - 如果是平局，则选择列表中最左边的备选方案。如果您 p​​arse `'*'`，则无需查看它是否也可能匹配更长的整数，或者如果您解析整数，则无需查看它是否也可以作为 lone 传递`'*'`。所以把它改成：

```
 self.save_parser        = ( PYP.Optional(PYP.Word(PYP.nums)|'*')('idx') 
```

使用 parse 操作将字符串替换为 '' 更简单地使用`PYP.Suppress`包装器编写，或者如果您愿意，可以调用`expr.suppress()`which returns `Suppress(expr)`。结合对“|”的偏好 在'^'上，这个：

```
 self.comment_grammars    =  PYP.Or([  PYP.pythonStyleComment, 
                                          PYP.cStyleComment ]) 
    self.comment_grammars.ignore(PYP.quotedString) 
    self.comment_grammars.setParseAction(lambda x: '') 
```

变成：

```
 self.comment_grammars    =  (PYP.pythonStyleComment | PYP.cStyleComment
                                ).ignore(PYP.quotedString).suppress() 
```

关键字具有自动避免歧义的内置逻辑，因此 Or 完全不需要它们：

```
 self.multiln_command  =   PYP.Or([ 
                                    PYP.Keyword(c, caseless=self.case_insensitive) 
                                    for c in self.multiln_commands 
                                ])('multiline_command') 
```

应该：

```
 self.multiln_command  =   PYP.MatchFirst([
                                    PYP.Keyword(c, caseless=self.case_insensitive) 
                                    for c in self.multiln_commands 
                                ])('multiline_command') 
```

（在下一个版本中，我将放宽那些初始化程序以接受生成器表达式，这样 [] 就变得不必要了。）

这就是我现在所能看到的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:39:50.617

# 我修好了它！

Pyparsing 没有错！

我曾是。☹</p>

通过将解析代码分离到不同的对象中，我产生了问题。最初，一个属性用于根据第二个属性的内容“更新自身”。由于这一切都包含在一个“神级”中，所以效果很好。

只需将代码分离到另一个对象中，第一个属性就在实例化时设置，但如果它所依赖的第二个属性发生变化，则不再“自我更新”。

## 细节

该属性`multiln_command`（不要与`multiln_commands`-aargh 混淆，多么令人困惑的命名！）是一个 pyparsing 语法定义。如果发生更改，该`multiln_command`属性应该已更新其语法`multiln_commands`。

尽管我知道这两个属性的名称相似但用途却大不相同，但相似性确实使追查问题变得更加困难。我没有重命名`multiln_command`为`multiln_grammar`.

# 然而！☺</h1>

我很感谢@Paul McGuire 的精彩回答，我希望它能在未来为我（和其他人）节省一些悲伤。虽然我觉得我造成了这个问题有点愚蠢（并将其误诊为 pyparsing 问题），但我很高兴提出这个问题（以 Paul 的建议的形式）有一些好处。

* * *

祝大家解析愉快。:)

# c# - 在 c# 项目中使用 Wordpress 模板

> ID：10095305
> 
> 赞同：0
> 
> 时间：2012-04-10T19:41:02.243
> 
> 标签：c#, asp.net, wordpress, templates

那里有很多 Wordpress 模板，其中大部分都设计得很好。

我想知道，有没有办法在 c# 项目中轻松使用 Wordpress 模板。

有没有开箱即用的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:42:56.743

不，没有什么“开箱即用”的。

如果您希望这样做，您将需要编写自己的转换器，但翻译单个页面应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:49:38.493

只需获取 WP 站点的输出 HTML 和 CSS 的副本，然后围绕它应用/构建您的 ASP.NET 站点。这本身很简单。大多数人感到困惑的是，当 ASPNET 中混有母版页时；但是，这不是问题。只需开始（使用 WP 网站生成的 HTML），从外向内创建主 div，使用母版页，然后使用页面中的内容区域。母版页通常包含所有页面或部分页面共有的显示元素。

# android - 图像周围有白色边框

> ID：10095306
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:41:08.513
> 
> 标签：android, android-imageview, alphablending, alpha-transparency

在不同背景上使用时如何去除图像周围的白色边框？

![在此处输入图像描述](../Images/b8982f9e929034a837256e11b829868f.png)

[http://groups.google.com/group/android-developers/browse_thread/thread/f4ef24e03431bbe4/ce7f19488fd0388a?lnk=gst&q=Crop+Image+View+that+fits+to+the+image#ce7f19488fd0388a](http://groups.google.com/group/android-developers/browse_thread/thread/f4ef24e03431bbe4/ce7f19488fd0388a?lnk=gst&q=Crop+Image+View+that+fits+to+the+image#ce7f19488fd0388a)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:59:30.840

OK, I have seen the image and you want the ImageView to be *of the same shape* as your image because you don't want to see the white border around your image.

Well,in short, I don't think **that is possible** AFAIK. ImageView is a rectangular view which asks for height,width.

However, rather than try to do the impossible, I would suggest you to use **alpha-masking**( subset of alpha blending, google them to know more).

**A little theory:** depending on the alpha bits for each pixel in your Bitmap (the translucency bits), the extent of blending of that pixel with over-written pixel is determined. Considering extremes, if alpha is 255, overwriting pixel is used instead of the over-written one (**fully opaque**, in regular terms); if alpha is 0, overwriting pixel is just ignored (**transparent**). For other alphas in between: there is blending.

In your case you *would* have to make the alpha of the border **zero**, to achieve complete blend. Outlining the steps:.

1.  The drawable to be used **can't** be a JPEG( JPEG doesn't store alpha values per pixel). Go for PNGs

    2.You **will need** to create and keep your bitmap drawable in that way beforehand(use google for alpha blending PNGs) such that the borders have zero alpha value ( use softwares like Paint.NET for ex).

2.  If images are being created dynamically, you would need to use a blending equation ( for details read materials by Porter and Duff).

    For ex, this is PNG image with transparent pixels having alpha 0 other than the alphabet itself
    . ![original PNG with alpha blending](../Images/49b4193b0d2ed723133aa66ab58f6456.png)

![aplha blended PNG on colored background](../Images/36b8e20f5e438cdd20f933eeb66b543a.png)

Above is the alpha blended PNG on colored background of an Activity. I hope this is what you really want to achieve, and my answer is actually useful .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:48:33.197

如果您尝试将其用作主屏幕背景，然后将其布局权重和高度设置为“fill_parent”，则背景可以是您希望它作为参考的任何图像，就像您所做的 SRC 调用一样。这将使图像仅填满屏幕，并允许您使用 SCR 命令在屏幕上写入。如果您给我们更多您所做的事情，我们可以提供更多帮助。

# objective-c - 单个 UI 事件的多个 IBAction

> ID：10095314
> 
> 赞同：2
> 
> 时间：2012-04-10T19:41:29.767
> 
> 标签：objective-c, ios, interface-builder, ibaction

问这个问题我有点尴尬……如果我想在使用 UIButton 时发生两种截然不同的事情，我可以在 Interface Builder 中连接它吗？我找不到向事件添加多个操作的方法。

显而易见的答案是连接一个动作，并在同一个代码块中执行这两种方法。但我非常喜欢连接到“saveItem”的按钮操作，而不是一些通用的“buttonPressed”方法。

我想我也可以在代码中添加操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:43:35.880

不幸的是，没有办法用内置的 UI 类来做到这一点。您必须连接到一个 IBAction，然后调用您要调用的方法。

# delphi - Delphi5 DirectoryExists()

> ID：10095318
> 
> 赞同：2
> 
> 时间：2012-04-10T19:41:42.957
> 
> 标签：delphi, directory, delphi-5

我在 Win2000 上使用 D5，但为所有平台构建应用程序。

我可以`FileExists`在我的 D5 应用程序中使用，但`DirectoryExists`它是一个未声明的标识符。

它们都来自我放在我的使用列表中的 SysUtils.Pas。谁能建议我如何使用此功能，如果没有，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T19:46:40.950

该`DirectoryExists`函数在`FileCtrl`单元中声明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T19:47:09.720

DirectoryExists 位于 D5 的 FileCtrl 单元中。

# java - java中的整数赋值

> ID：10095320
> 
> 赞同：1
> 
> 时间：2012-04-10T19:41:55.197
> 
> 标签：java, integer

```
public class Example {

    public static void main(String args[]) {
        int a = 0153;
        int b=a;
        System.out.println(""+b);
    }
} 
```

有人可以解释为什么它会打印`107`而不是打印`153`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:45:01.623

107的八进制是0153

在 Java 中，您可以通过添加前导零来创建八进制文字，如下所示： int a = 0755; 当心！指定八进制文字是很常见的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:45:09.837

因为以 开头的数字`0`在 Java 中被视为八进制值。`0153`八进制是`107`十进制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:55:14.553

你写为八进制，打印默认为十进制。

```
 Input                            Prints (decimal)

Decimal   153                             153
         ^
         No leading zero (digits 0-9) 

Octal    0153                             107
         ^
         leading zero (digits 0-7)

Hex      0x153                            339
         ^^
         leading 0x (digits 0-F) 
```

# android - 我有一个可以在一台开发机器上运行但不能在另一台机器上运行的 andengine 程序？

> ID：10095321
> 
> 赞同：0
> 
> 时间：2012-04-10T19:41:57.987
> 
> 标签：android

由于我不会让您感到厌烦的原因，我必须更换开发计算机，而且对于我的一生，我无法让我的项目在第二台机器上工作。

我有一个库，它是一个 .jar 文件，两台机器都可以访问。但是程序在机器 A 上运行良好，但在机器 BI 上得到以下错误。起初我想检查清单，但是，完全相同的项目在机器 A 上运行良好。所以它一定是我在 B 上的开发环境有问题。对吗？我想不出它可能是什么。我在 B 上的 api 比 A 多。

```
04-10 20:21:50.826: W/dalvikvm(1487): Unable to resolve superclass of          Lcom/webs/thefineanimationemporium/BoxingTmcthreeActivity; (117)
04-10 20:21:50.826: W/dalvikvm(1487): Link of class  'Lcom/webs/thefineanimationemporium/BoxingTmcthreeActivity;' failed
04-10 20:21:50.826: D/AndroidRuntime(1487): Shutting down VM
04-10 20:21:50.826: W/dalvikvm(1487): threadid=1: thread exiting with uncaught      exception (group=0x2aac8578)
04-10 20:21:50.856: E/AndroidRuntime(1487): FATAL EXCEPTION: main
04-10 20:21:50.856: E/AndroidRuntime(1487): java.lang.RuntimeException: Unable to instantiate activity     ComponentInfo{com.webs.thefineanimationemporium/com.webs.thefineanimationemporium.BoxingTmc threeActivity}: java.lang.ClassNotFoundException: com.webs.thefineanimationemporium.BoxingTmcthreeActivity in loader dalvik.system.PathClassLoader[/data/app/com.webs.thefineanimationemporium-1.apk]
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1581)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at android.os.Looper.loop(Looper.java:138)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at  android.app.ActivityThread.main(ActivityThread.java:3701)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
04-10 20:21:50.856: E/AndroidRuntime(1487):     at dalvik.system.NativeStart.main(Native Method)
04-10 20:21:50.856: E/AndroidRuntime(1487): Caused by: java.lang.ClassNotFoundException: com.webs.thefineanimationemporium.BoxingTmcthreeActivity in loader dalvik.system.PathClassLoader[/data/app/com.webs.thefineanimationemporium-1.apk]
 04-10 20:21:50.856: E/AndroidRuntime(1487):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
 04-10 20:21:50.856: E/AndroidRuntime(1487):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
 04-10 20:21:50.856: E/AndroidRuntime(1487):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
 04-10 20:21:50.856: E/AndroidRuntime(1487):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 04-10 20:21:50.856: E/AndroidRuntime(1487):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
 04-10 20:21:50.856: E/AndroidRuntime(1487):    ... 11 more
 04-10 20:21:55.216: I/Process(1487): Sending signal. PID: 1487 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:49:03.777

对我来说，在第二台设备上安装听起来像是一个狡猾的安装，因为找不到其中一个被调用的类。您是否尝试过重新安装？

编辑：很抱歉听起来像来自技术支持热线的人......

# javascript - 声明变量时使用 try catch

> ID：10095323
> 
> 赞同：0
> 
> 时间：2012-04-10T19:42:11.627
> 
> 标签：javascript, variables, try-catch

出于某种原因（我不打算在这里说明原因）我需要使用 javascript 来获取 12 个隐藏输入字段的值并为每个值设置一个变量。

我不确定最好的方法是什么。我希望能够获取这些值，如果没有创建它们，即输入字段不存在，那么 id 会产生错误。

使用 try / catch 会对此有好处，还是我应该简单地使用 typeof 来检查变量是否已创建？

将它们也放入一个数组中以便我可以循环检查它们的存在是一个好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:01:19.227

这是做这件事的简单方法。try-catch 相当重。另外，你会把错误扔到哪里？与其在错误中展开你的流程，不如将你的错误收集到一个结构良好的响应中。这样，如果您的第一个丢失了，但另一个 X 没有，那么您仍然可以完成一些工作。

```
if ( typeof( something ) !== "undefined" ) { doStuff(); } 
```

否则，我需要更多信息来帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:58:50.520

```
if(document.getElementById("someID")){
// add the value since the input exists
}
else{
// skip or use default - and inform if need be
} 
```

示例实现：http: [//jsfiddle.net/zVz6h/1/](http://jsfiddle.net/zVz6h/1/)

代码：

```
 function getValueArray(idArray){
var valArray = [];
for(var i=0;i<idArray.length;i++){    
    if(document.getElementById(idArray[i])){
    valArray.push(document.getElementById(idArray[i]).value);       
    }
    else{
    valArray.push("not defined");
    }
}
    return valArray;

}

var txtIDs = ["txt1","txt2","txt3","txt4","txt5","txt6","txt7","txt8"];

alert(getValueArray(txtIDs)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:06:49.223

这是一个简单的函数，它将检查页面上是否包含 12 个输入元素。如果您需要检查单个输入元素是否存在，请提供更多信息。

```
 function SaveInputValues() {

    var inps = document.getElementsByTagName('input');
    if (inps.length !== 12) {
      return alert("There must be exactly 12 input elements. You have included " + inps.length + ".");
    }
    var vals = [];
    for (i = 0; i < inps.length; i++) vals.push(inps[i].value);
    inps = null; // provides closure
  } 
```

# jquery - iScroll4 在 IE7 和 IE8 中不起作用

> ID：10095324
> 
> 赞同：1
> 
> 时间：2012-04-10T19:42:11.923
> 
> 标签：jquery, slider, iscroll4

我制作了一个显示大量图像的应用程序。我使用 iscroll4 通过触摸（移动）和鼠标（网络）平滑地滑动它们，但它在 IE7 或 IE8 中不起作用。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:30:23.683

检查此链接[https://groups.google.com/forum/#!searchin/iscroll/ie8/iscroll/c9iX8vixgbM/OjwdKvRy1EAJ](https://groups.google.com/forum/#!searchin/iscroll/ie8/iscroll/c9iX8vixgbM/OjwdKvRy1EAJ)并尝试**Alan H** js 文件。

这也适用于 IE7，尽管在 IE 中仍然缺少对 iscroll 的事件侦听器支持。

您也可以尝试添加`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" >`，也可以尝试`IE=EmulateIE7`在您的`html head tag`. 这适用于兼容视图，但在标准视图中存在一些问题。

您可以查看以下网址[http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode)以获得更好的理解。让我知道这是否有帮助。

# iphone - 在同一个 UIImageView 上使用 2 个 UIPinchGestureRecognizers

> ID：10095325
> 
> 赞同：0
> 
> 时间：2012-04-10T19:42:12.390
> 
> 标签：iphone, ios5, uigesturerecognizer, uipinchgesturerecognizer

我有一个图像视图，我想在不保持纵横比的情况下捏合以重新缩放。为了做到这一点，我认为这可能是可行的：

1.  使用两个捏合手势识别器，一个水平拉伸，一个垂直拉伸。
2.  使用一个捏合识别器，但一个接一个地应用两个变换。

这是我的捏处理功能：

```
- (void) pinch:(UIPinchGestureRecognizer *)recognizer {
    static CGRect initialBounds;

    if (recognizer.state == UIGestureRecognizerStateBegan)
    {
        initialBounds = imageView.bounds;
    }
    CGFloat factor = [(UIPinchGestureRecognizer *)recognizer scale];

    //scale horizontally
    CGAffineTransform zt = CGAffineTransformScale(CGAffineTransformIdentity, 
                                                     factor-(1.0-factor), 1.0);
    imageView.bounds = CGRectApplyAffineTransform(initialBounds, zt);

    //now scale vertically
    zt = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, factor);
    imageView.bounds = CGRectApplyAffineTransform(initialBounds, zt);
    return;
} 
```

出于某种原因，转换只是垂直进行（最后一个）。我尝试将第二个 CGRectApplyAffineTransform 的第一个参数更改为 imageView.bounds，但它仍然不起作用。

谁能告诉我哪里出错了？

此外，当使用两个捏合手势识别器时，会发生同样的事情——实际上只有一个被识别。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:07:32.323

你的第二个是从 CGAffineTransformIdentity 开始的。相反，传入zt。

# c# - 如何开始使用 ASP.Net MVC 4 / Azure 和 MonoDevelop？

> ID：10095326
> 
> 赞同：1
> 
> 时间：2012-04-10T19:42:13.630
> 
> 标签：c#, asp.net-mvc, azure, monodevelop

有没有人使用 MonoDevelop 开发过 ASP.Net MVC4 Web API 项目？我的最终目标是部署在 Azure 上。如果是这样，是否易于设置？有什么陷阱吗？

我是 ASP.Net MVC 4 和 Azure 服务的忠实粉丝，但我还没有放弃我的 MacBook Air……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:31:58.947

我能想到的最好方法是在您构建项目之后，必须有人在 Windows 机器上运行 cspack。看一眼：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx)

# android - 对话框中的 Android 链接

> ID：10095335
> 
> 赞同：1
> 
> 时间：2012-04-10T19:42:43.103
> 
> 标签：android

如何添加指向对话消息的链接？

我尝试了以下代码，但链接在 onclick 上没有任何作用：

```
builder.setMessage(Html.fromHtml(
      "Click on the  " +
      "<a href=\"http:\\www.google.com\">link</a> " +
       "to download.")); 
```

它对任何一个都不起作用`//www.google.com`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T13:42:20.170

使用以下代码转换您的 HTML 标记（包括可点击的超链接）：

```
((TextView) new AlertDialog.Builder(this)
    .setTitle("Info")
    .setIcon(android.R.drawable.ic_dialog_info)
    .setMessage(Html.fromHtml("<p>Sample text, <a href=\"http://google.nl\">hyperlink</a>.</p>"))
    .show()
    // Need to be called after show(), in order to generate hyperlinks
    .findViewById(android.R.id.message))
    .setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:05:03.150

您需要使用 Linkify

```
final SpannableString m = new SpannableString(message);
Linkify.addLinks(m, Linkify.WEB_URLS);

    aDialog = new AlertDialog.Builder(getActivity())
            .setTitle(title)
            .setMessage(m)
            .setNeutralButton(R.string.ok,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        doNeutralClick();
                    }
                }
            )
            .create();

    aDialog.show();

    ((TextView) aDialog.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance()); 
```

看到[这个问题](https://stackoverflow.com/questions/1997328/android-clickable-hyperlinks-in-alertdialog)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:58:40.800

对话框的标准实现不允许你做这些花哨的事情。您需要通过为其设置自定义布局内容来创建自定义对话框。例如：

```
Dialog dialog = new Dialog(context);
dialog.setContentView(R.layout.layout_dialog); 
```

有关更多详细信息，请阅读[this](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)和[this](http://www.mkyong.com/android/android-custom-dialog-example/)。

# c# - 如何检测 EF 实体中是否缺少依赖项？

> ID：10095336
> 
> 赞同：0
> 
> 时间：2012-04-10T19:42:49.627
> 
> 标签：c#, linq, entity-framework-4.1, rdbms, referential-integrity

示例情况（我已经更直接地提出了这个问题并且没有收到任何反馈，所以请原谅这个抽象的例子，但我只是想更好地提出这个问题）：

为简洁起见（实际模型有数百行）。对数据库进行建模以表示房屋。房子可以有房间、窗户和院子。一个房间可以有家具或电子产品。家具可以是沙发、桌子或椅子。沙发具有图案、材料和尺寸。

F. Bar 先生的房子是 Bar's Crazy Couches 的展示厅。每个月，Bar 先生的房间都会展示数百张沙发。Bar 先生喜欢知道人们何时喜欢他的沙发，并为每个房间设置保留反馈。

Bar 先生的兄弟 Ed 先生运行他的数据库管理系统。埃德先生决定搬走有一段时间没用过的沙发！

假设该删除被接受、存档、或放置在分区中、或标记为非活动的（即它没有被阻止，这是一个选项）。

如何在一个房间中确定这个依赖沙发的缺失，该房间的房间引用了使用 Entity Framework 4.1 从 linq 查询中移除的沙发？

调用查询可能看起来像这样（为简洁起见，我只留下了主题部分），但它会有一个难以捕捉的异常。

```
public House getHouse(object id){
 using( DbContext context = new FooBarContext()){
  DbSet<House> dbSet = context.Set<House>();
  IQueryable<House> query = dbSet;
  query = query.Where(h => h.HouseKey == id);
  query = query.Include(h => h.Room);
  query = query.Include(h => h.Room.Couch);
 }
 return query.ToList();
}

var house = getHouse(9).FirstOrDefault(); 
```

房子将填充正确的房子。它将包括适当的房间。然而，一个房间会提到一张坏掉的沙发。`try{}catch{}`到此为止的任何操作都不会导致捕获到任何异常。这仅适用于索引号为 9 的房屋。在代码中，这很容易成为许多不同房屋组成的列表。

我怎样才能确保房子里有一个房间，里面有一个被拆除的沙发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:38:10.280

正如您可能想象的那样，这不会很漂亮。基本上，您必须进行左连接，然后从返回的所有房屋/房间访问所有沙发。当您尝试访问坏沙发时，您会得到`SystemException`：

```
A relationship multiplicity constraint violation occurred: 
    An EntityReference expected at least one related object, 
    but the query returned no related objects from the data store.

try
{
    var test = (from h in context.Set<House>()
                join r in context.Set<Room>()
                  on h.Room.Id equals r.Id into houseRoom
                from joinHouseRoom in houseRoom.DefaultIfEmpty()
                join c in context.Set<Couch>()
                  on r.Couch.Id equals c.Id into houseRoomCouch
                from joinHouseRoomCouch in houseRoomCouch.DefaultIfEmpty()
                select h).ToList()
                         .Select(x => x.Room.Couch.Material)
                         .ToList();
}
catch(SystemException se)
{
    Console.WriteLine(se.Message);
} 
```

# php - “字段列表”中的未知列“xxx”，Codeigniter

> ID：10095338
> 
> 赞同：1
> 
> 时间：2012-04-10T19:42:59.953
> 
> 标签：php, codeigniter, activerecord, join

我一直在查看这个错误一段时间，但看不到我的 codeigniter sql 查询做错了什么，有人可以建议吗？

**“字段列表”中的未知列“album_images.album_id”**

```
 $this->db->select('
        albums.id as album_id,
        albums.album_title,
        album_images.album_id,
        album_images.image_id,
        AVG(views.id) as views_id,
        views.views as views_total,
        images.id, 
        images.alpha_id,
        images.user,
        images.image_title,
        images.image_type,
        images.file_ext,
        images.image_width,
        images.image_height,
        images.file_size,
        images.submitted,
        images.status'
    );

    $this->db->from('images', 'albums', 'album_images', 'views');
    $this->db->join('albums', 'albums.id = album_images.album_id');
    $this->db->join('views', 'views.id = images.id', 'left');
    $this->db->where('albums.id', $id);
    $this->db->where('images.status', 1); //fiter out deleted ones

    $this->db->group_by('images.id');

    $query = $this->db->get();
    return $query->result(); 
```

我已经多次检查了所有内容的所有拼写，但仍然得到相同的结果。我确实尝试重新排序 this->db->from 行，将 album_images 移动到开头使错误更改为 images.id 。如果那是相关的。

有人知道我在这里做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:03:29.400

```
SELECT ... FROM (`images`) JOIN `albums` ON `albums`.`id` = `album_images`.`album_id` ... 
```

如果您在两个表 ( `images`, `albums`) 之间进行连接，则需要制定这两个表之间的关系。在您的情况下，您在两个表之间进行连接，但关系与第三个表 ( `album_images`)，因此找不到该字段。

另见：

*   [如何使用 CodeIgniter 对 3 个表进行 INNER JOIN](https://stackoverflow.com/q/7440371/367456)
*   [在 codeigniter 中加入两个以上的表](https://stackoverflow.com/q/5743295/367456)
*   [Codeigniter 中的多个连接](https://stackoverflow.com/q/4916498/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T10:56:43.363

试试这个你给出重复的列名我更正它你检查它是否有效

```
$this->db->select('
        albums.id as albums_id,
        albums.album_title,
        album_images.album_id,
        album_images.image_id,
        AVG(views.id) as views_id,
        views.views as views_total,
        images.id, 
        images.alpha_id,
        images.user,
        images.image_title,
        images.image_type,
        images.file_ext,
        images.image_width,
        images.image_height,
        images.file_size,
        images.submitted,
        images.status'
    ); 
```

# c# - 是否有一种工具可以通过包装成员字段或属性来实现接口？

> ID：10095339
> 
> 赞同：11
> 
> 时间：2012-04-10T19:43:01.833
> 
> 标签：c#, visual-studio, resharper

我发现自己经常做以下事情，以至于我觉得必须有一个自动化的解决方案：

我有一个包装类，比如 ListWrapper，它包装了一个 IList：

```
public class ListWrapper : IList 
{
    private IList _list;

    // ... Implement IList by redirecting every call to _list
} 
```

是否有任何工具可以自动生成此实现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T19:54:41.483

使用 ReSharper，在类中点击“alt-insert”，然后选择“委派成员”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:49:14.453

任何模拟框架，其中大多数使用 Castle Dynamic Proxy IIRC。

看看起订量

实际上，这是一个类似问题的答案：

[自动创建派生类型](https://stackoverflow.com/questions/1275433/how-do-moq-and-nhibernate-automatically-create-derived-types)

# file-io - 当输入文件中缺少其中一个变量时，从文件中读取已知数量的变量

> ID：10095342
> 
> 赞同：2
> 
> 时间：2012-04-10T19:43:12.513
> 
> 标签：file-io, fortran, text-files

我已经检查过类似的帖子。解决方案由 MSB 在此处[Reading data file in Fortran with known number of lines but unknown number of entries in each line 给出](https://stackoverflow.com/questions/7314216/reading-data-file-in-fortran-with-known-number-of-lines-but-unknown-number-of-en/7315185)

所以，我遇到的问题是我试图从文本文件中读取输入。在一行中应该有 3 个变量。但有时输入文件可能有 2 个变量。在这种情况下，我需要将最后一个变量设为零。我尝试将 READ 语句与 IOSTAT 一起使用，但如果只有两个值，它会转到下一行并读取下一个可用值。当没有第三个值时，我需要在读取 2 个值后让它停在第一行。

我找到了一种方法来做一个评论/除了我试图阅读的类型之外（在这种情况下，我正在阅读浮点数，而评论是一个字符）这使得 IOSTAT>0 并且我可以将其用作查看。但如果在某些情况下我可能没有该评论。我想确保它甚至可以正常工作。

部分代码

```
 read(15,*) x
    read(15,*,IOSTAT=ioerr) y,z,w
    if (ioerr.gt.0) then
        write(*,*)'No value was found'
        w=0.0;
        goto 409
        elseif (ioerr.eq.0) then
        write(*,*)'Value found', w
        endif
  409   read(15,*) a,b
        read(15,*) c,d 
```

输入文件的形式是

```
 -1.000  abcd                                                                        
    12.460  28.000  8.00 efg                                                                            
    5.000   5.000   hijk                                                                            
    20.000  21.000  lmno 
```

即使没有“8.00 efg”，我也需要让它工作

对于这种情况

```
 -1.000  abcd                                                                        
     12.460 28.000                                                                              
     5.000  5.000   hijk                                                                            
     20.000 21.000  lmno 
```

我不能使用 MSB 建议的字符串方法。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:58:09.957

您也许可以使用奇妙命名的冒号编辑描述符。如果 I/O 列表中没有其他项目，这允许您跳过格式的其余部分：

```
Program test

  Implicit None

  Real :: a, b, c
  Character( Len = 10 ) :: comment

  Do

     c = 0.0
     comment = 'No comment'
     Read( *, '( 2( f7.3, 1x ), :, f7.3, a )' ) a, b, c, comment

     Write( *, * ) 'I read ', a, b, c, comment

  End Do

End Program test 
```

例如，使用 gfortran 我得到：

```
Wot now? gfortran -W -Wall -pedantic -std=f95 col.f90
Wot now? ./a.out
  12.460  28.000  8.00 efg
 I read    12.460000       28.000000       8.0000000     efg       
  12.460  28.000  
 I read    12.460000       28.000000      0.00000000E+00           
^C 
```

这适用于 gfortran、g95、NAG 编译器、英特尔的编译器和 Sun/Oracle 编译器。但是我应该说我并不完全相信我理解这一点 - 如果未读取 c 或评论，它们是否保证分别为 0 和所有空格？不确定，需要在别处询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:53:39.973

我有一个例程计算一条线上的实数。我认为你可以很容易地适应你的目的。

```
subroutine line_num_columns(iu,N,count)
    implicit none

    integer(4),intent(in)::iu,N

    character(len=N)::line
    real(8),allocatable::r(:)
    integer(4)::r_size,count,i,j

    count=0 !Set to zero in case of premature return

    r_size=N/5 !Initially try out this max number of reals
    allocate(r(r_size))

    read(iu,'(a)') line

50  continue
    do i=1,r_size
        read(line,*,end=99) (r(j),j=1,i) !Try reading i reals
        count=i
        !write(*,*) count
    enddo
    r_size=r_size*2 !Need more reals
    deallocate(r)
    allocate(r(r_size))
    goto 50

    return

99  continue
    write(*,*) 'I conclude that there are ',count,' reals on the first line'

end subroutine line_num_columns 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T01:16:42.170

我似乎记得过去尝试做类似的事情。如果您知道文件的一行大小不会超过某个数字，您可以尝试以下操作：

```
...
character*(128) A  

read(15,'(A128)') A  !This now holds 1 line of text, padded on the right with spaces
read(A,*,IOSTAT=ioerror) x,y,z
if(IOSTAT.gt.0)then
   !handle error here
endif 
```

我不完全确定这个解决方案从一个编译器到下一个编译器的可移植性，我现在没有时间在 f77 标准中阅读它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:30:42.307

如果 Fortran 90 解决方案很好，您可以使用以下过程来解析具有多个实数值的行：

```
subroutine readnext_r1(string, pos, value)
  implicit none
  character(len=*), intent(in)    :: string
  integer,          intent(inout) :: pos
  real,             intent(out)   :: value

  integer                         :: i1, i2

  i2 = len_trim(string)

  ! initial values:
  if (pos > i2) then
     pos   = 0
     value = 0.0
     return
  end if

  ! skip blanks:
  i1 = pos
  do
     if (string(i1:i1) /= ' ') exit
     i1 = i1 + 1
  end do

  ! read real value and set pos:
  read(string(i1:i2), *) value
  pos = scan(string(i1:i2), ' ')
  if (pos == 0) then
     pos = i2 + 1
  else
     pos = pos + i1 - 1
  end if

end subroutine readnext_r1 
```

该子例程从字符号“pos”开始的字符串“string”中读取下一个实数，并返回“value”中的值。如果已到达字符串的末尾，则 'pos' 设置为零（并返回值 0.0），否则 'pos' 递增到所读取的实数后面的字符位置。

因此，对于您的情况，您将首先将该行读取为字符串：

```
character(len=1024) :: line
...
read(15,'(A)') line
... 
```

然后解析这个字符串

```
real    :: y, z, w
integer :: pos
...
pos = 1
call readnext_r1(line, pos, y)
call readnext_r1(line, pos, z)
call readnext_r1(line, pos, w)
if (pos == 0) w = 0.0 
```

最后的“如果”甚至没有必要（但这样更透明，恕我直言）。

请注意，如果行上有第三个条目不是实数，则此技术将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T19:33:57.267

我知道以下简单的解决方案：

```
 w = 0.0
      read(15,*,err=600)y, z, w
      goto 610
600   read(15,*)y, z
610   do other stuff 
```

但它包含“goto”运算符

# android - 如何在 Android 中创建始终处于顶部的全屏覆盖活动

> ID：10095344
> 
> 赞同：22
> 
> 时间：2012-04-10T19:43:15.790
> 
> 标签：android, android-layout, android-activity, window

我希望能够创建一个始终位于 Android 显示屏前面的 Activity。它应该不接收任何输入，只需将其传递给它下面的任何应用程序。类似于HUD的东西。

我能够研究我需要将基础窗口类型设置为 TYPE_SYSTEM_ALERT 但看起来 Android 忽略了我的代码 - 即使我从清单中删除 android.permission.SYSTEM_ALERT_WINDOW 权限也不会引发异常。（必须使用此窗口类型）。当我尝试在对话框上使用 ALERT 类型时，它工作正常，但我无法将对话框变成全屏透明实体。这是我的代码，也许缺少一些简单的东西。

```
public void onCreate(Bundle savedInstanceState) {       
     super.onCreate(savedInstanceState);        

     requestWindowFeature(Window.FEATURE_NO_TITLE);
     getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
     getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);             
     getWindow().setBackgroundDrawableResource(android.R.color.transparent);
     getWindow().setFormat(PixelFormat.TRANSLUCENT);
     setContentView(R.layout.main);
} 
```

必须在 xml 清单中从外部启用半透明设置，否则它也不起作用。

```
 <item name="android:windowIsTranslucent">true</item> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T14:03:31.793

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
WindowManager.LayoutParams.FLAG_FULLSCREEN,
WindowManager.LayoutParams.FLAG_FULLSCREEN,
WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
PixelFormat.TRANSLUCENT);

WindowManager wm = (WindowManager) getApplicationContext()
    .getSystemService(Context.WINDOW_SERVICE);

ViewGroup mTopView = (ViewGroup) App.inflater.inflate(R.layout.main, null);
getWindow().setAttributes(params);
wm.addView(mTopView, params); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-04T23:44:33.770

我发现[接受的答案（由 tmouse 提供）](https://stackoverflow.com/questions/10095344/how-to-create-always-top-fullscreen-overlay-activity-in-android/10107525#10107525)对我来说不太适用。也许它适用于较旧的 API 级别？我正在使用 API 级别 24。

该特定答案建议：

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
    PixelFormat.TRANSLUCENT
); 
```

这有一个问题。存在的构造函数`WindowManager.LayoutParams`如下：

[![在此处输入图像描述](../Images/41a599193d0c7b8954df95b74fc7a9cf.png)](https://i.stack.imgur.com/oZWRU.png)

因此，该`WindowManager.LayoutParams.FLAG_FULLSCREEN`标志被用作*and的**显式值`int w``int h`*。这可不好！您的视图尺寸设置为 1024*1024 - 因此它不会*填满*屏幕。即使您*明确*设置布局的宽度和高度以匹配设备的尺寸：屏幕方向更改时它们也**不会更新。**我们需要一种不同的方法……</p>

* * *

我发现全屏覆盖的*正确结构是这样的：*

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, // TYPE_SYSTEM_ALERT is denied in apiLevel >=19
    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_FULLSCREEN,
    PixelFormat.TRANSLUCENT
); 
```

这意味着我们不再*明确*指定宽度和高度。布局完全依赖于我们的标志。

是的，`WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN`仍然是必需的标志吗？如果要绘制状态栏等装饰，则必须使用它。

`WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY`应该使用而不是`TYPE_SYSTEM_ALERT`API 级别 >=19。这是我前段时间写的一篇笔记，遗憾的是我一直无法找到引用来证实我为什么这么认为，所以请加一点盐。

* * *

额外说明（如果您正在阅读本文，您可能正在尝试制作全屏覆盖）：

您的清单将需要这些权限（[在此处](https://stackoverflow.com/a/34061521/5257399)进行说明）：

```
<uses-permission android:name="android.permission.ACTION_MANAGE_OVERLAY_PERMISSION"/>
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
```

我的理解是这`SYSTEM_ALERT_WINDOW`是所需的实际权限，但这`ACTION_MANAGE_OVERLAY_PERMISSION`也是必需的：它允许您在运行时请求用户授予`SYSTEM_ALERT_WINDOW`权限。

我[在这里](https://github.com/Birch-san/touhou-walk)提供了我的工作 API 级别 24 应用程序的源代码，该应用程序创建了一个全屏覆盖。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T09:38:31.253

看看这个

在您的 AndroidManifest.xml 文件中提及它

```
<activity android:name=".MyActivity" android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

如果你想让你的活动全屏和透明

看看这个

```
<activity android:name=".MyActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen" /> 
```

# database - 免费的地理数据（首都、兴趣点、...）数据库

> ID：10095353
> 
> 赞同：1
> 
> 时间：2012-04-10T19:44:11.060
> 
> 标签：database, web-services

有谁知道也可以用于商业目的的免费地理数据数据库（根据知识共享许可许可的东西）？

我需要像世界各地的大写字母、poi's 等 GeoData。数据至少应包括姓名、国家、坐标（纬度/经度）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:51:24.067

试试[GeoNames](http://www.geonames.org/)。它没有 POI，但除此之外它非常完整。

# node.js - Mongoose 和 MongoHQ

> ID：10095357
> 
> 赞同：0
> 
> 时间：2012-04-10T19:44:39.670
> 
> 标签：node.js, mongodb, mongoose, mongohq

为什么猫鼬没有连接到 MongoHQ 我正在使用给定的 URL

```
mongoose.connect('mongodb://' + user + ':' + pass + '@' + host + ':' + port + '/' + name) 
```

它不报告任何错误，但数据库没有任何变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:47:58.157

如果你想让它报告错误，你必须处理错误情况。

```
mongoose.connect('mongodb://' + user + ':' + pass + '@' + host + ':' + port + '/' + name', function(err) {
    if (err) throw err;
}); 
```

# c# - 如何在这个 foreach 上添加另一个 where 子句？

> ID：10095360
> 
> 赞同：0
> 
> 时间：2012-04-10T19:44:50.153
> 
> 标签：c#, xml, linq

是否可以在此添加另一个 where 子句，还是我需要再做一个 foreach？

```
foreach (Point point in _Points.Where(x => x.Name == "Test"))
{
} 
```

基本上我想添加的也是 where `x.name = "Test"`&& where`!x.asset.StartsWith("INV")`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T19:46:23.853

你可以把它放在同一个 Where 子句中：

```
foreach (Point point in _Points.Where(x => x.Name == "Test" && !x.Asset.StartsWith("INV"))
{ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:49:05.007

您还可以链接 LINQ 运算符

```
foreach (Point point in _Points
    .Where(x => x.Name == "Test")
    .Where(x => !x.asset.StartsWith("INV")))
{

} 
```

有时我发现链接起来更易读，`Where`而不是`&&`在一个表达式中搞乱很多。

另请注意，在这种情况下，良好的换行可以提高可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:48:15.243

是的，你可以在这里的另一个地方

```
foreach (Point point in _Points.Where(x => x.Name == "Test")
                               .Where(x=>!x.asset.StartsWith("INV")))
  {

  } 
```

或者更好的选择

```
foreach (Point point in _Points.Where(x => x.Name == "Test" && !x.asset.StartsWith("INV")))
  {

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T19:48:05.903

以上将做的伎俩，但你也可以做

```
_Points.Where( x => x.Name == "Test" && !x.Asset.StartsWith("INV")).ToList().ForEach(yourmethod()); 
```

# xcode - 提交到存储失败并显示“验证失败”

> ID：10095367
> 
> 赞同：0
> 
> 时间：2012-04-10T19:45:05.553
> 
> 标签：xcode, app-store

通过 XCode 4.2 将我的应用提交到应用商店时，我看到以下问题：

上传到 iTunes 商店时出错。

我点击“完成”，在组织者中，状态为“验证失败”

*   这是我已经成功提交到商店十几次的应用程序。
*   我最近确实将它转换为支持 iphone 和 ipad 的通用版本。我确实根据苹果的必需列表添加了所有必需的图标和启动画面图像
*   我将部署目标从 3.2 提升到 ios 4.0
*   该应用程序作为真正的 iphone 和 ipad 上的临时构建运行良好。

该错误消息并没有给我太多继续。有什么方法可以获取有关验证失败的更多信息？日志很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:47:00.030

通常对我有用的方法：

*   重试验证
*   清理并重建（重新验证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:07:33.797

只需运行苹果最新的 java 更新来解决这个问题。

# javascript - 循环中的对象创建中断；展开的作品

> ID：10095371
> 
> 赞同：0
> 
> 时间：2012-04-10T19:45:15.337
> 
> 标签：javascript, google-maps-api-3

我正在做一些测试并遇到了这种奇怪的情况：第一种情况（在循环中分配像 InfoWindows 这样的对象）没有按预期工作，而一个一个地编写分配确实有效。

当鼠标悬停在标记上时，预期的行为是信息窗口打开。许多窗户应该同时保持打开状态。

从表面上看，我看不出有什么区别。这是怎么回事？我为每个案例展示了相关代码和完整的 JSFiddle。

**不工作** [JSFiddle](http://jsfiddle.net/HHb3J/)

```
 iwArray = [];
    for (var i = 0; i < 3; i++) {
      iwArray[i] = new google.maps.InfoWindow({content: "w "});
      google.maps.event.addListener(marker[i], 'mouseover', function(e) {
        iwArray[i].open(map, this);
      });
    } 
```

**有效，但丑陋的** [JSFiddle](http://jsfiddle.net/HHb3J/1/)

```
 iwArray = [];

    iwArray[0] = new google.maps.InfoWindow({content: "w 0"});
    google.maps.event.addListener(marker[0], 'mouseover', function(e) {
      iwArray[0].open(map, this);
    });

    iwArray[1] = new google.maps.InfoWindow({content: "w 1"});
    google.maps.event.addListener(marker[1], 'mouseover', function(e) {   
      iwArray[1].open(map, marker[1]);
    });

    iwArray[2] = new google.maps.InfoWindow({content: "w 2"});
    google.maps.event.addListener(marker[2], 'mouseover', function(e) {
      iwArray[2].open(map, marker[2]);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:48:32.353

```
var iwArray = [];
for (var i = 0; i < 3; i++) {
  iwArray[i] = new google.maps.InfoWindow({content: "w " + i });
  google.maps.event.addListener(marker[i], 'mouseover', createListener(i, map));
}

function createListener(i, map) {
    return function(e) {
        iwArray[i].open(map, this);
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:49:24.460

使用闭包：

```
 for (var i = 0; i < 3; i++) {
    (function(i){
       iwArray[i] = new google.maps.InfoWindow({content: "w "});
       google.maps.event.addListener(marker[i], 'mouseover', function(e) {
          iwArray[i].open(map, this);
       });
    })(i);
} 
```

# c - 查找数组中整数的最大连续和

> ID：10095375
> 
> 赞同：3
> 
> 时间：2012-04-10T19:45:38.143
> 
> 标签：c, arrays, algorithm

我有这个实现，这个程序的结果是 100，但正确答案是 103。有谁知道这个实现有什么问题，或者是否有更好的方法来查找数组中整数的最大连续和？

**提前致谢。**

```
#include <stdio.h>

int main(void) {
int a[] = { -3, 100, -4, -2, 9, -63, -200, 55 };
int max_sum, temp_sum, i, n = 12, t;
temp_sum = max_sum = a[0];
for (i = 1; i < n; i++) {
    if (a[i] > 0)
        temp_sum += a[i];
    else {
        t = 0;
        while (a[i] < 0 && i < n) {
            t += a[i];
            i++;
        }
        if (temp_sum + t > 0) {
            temp_sum = temp_sum + t + a[i];
            if (temp_sum > max_sum)
                max_sum = temp_sum;
        } else if (i < n)
            temp_sum = a[i];
    }
}
if (temp_sum > max_sum)
    max_sum = temp_sum;
printf("Maximum Numbers is %d \n", max_sum);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:54:58.187

您没有使用正确的索引：

见这里演示：[http ://codepad.org/wbXZY5zP](http://codepad.org/wbXZY5zP)

```
int max_sum, temp_sum, i, n = 8, t;
temp_sum = max_sum = a[0];
for (i = 0; i < n; i++) {
    (...)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T19:54:39.527

我建议[Kadane 的算法](http://en.wikipedia.org/wiki/Maximum_subarray_problem#Kadane.27s_algorithm)。在 C++ 中，它将是这样的（未经测试）：

```
int maxSubarray(std::vector<int> a) {
    int maxAll = 0, maxHere = 0;
    for (size_t i = 0; i < a.size(); ++i) {
        maxHere = std::max(a[i], maxHere + a[i]);
        maxAll = std::max(maxAll, maxHere);
    }
    return maxAll;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:12:35.040

正如其他用户所指出的，您的实施索引不正确。但是，我认为有必要添加一个答案，以指出如果所有值都是负数（并且最接近正数不在第一位），则您的实现将失败。

一个快速解决这个问题的方法是在分配临时总和时添加一个检查`a[i] < 0 && temp_sum + t < 0`- 在最后一个 else 块的情况下。

```
} else if (i < n) {
    temp_sum = a[i];
    if (temp_sum > max_sum)
       max_sum = temp_sum;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:06:11.627

如果它正在寻找不是从索引 0 开始的最大连续总和，最简单的方法是有两个循环

```
int max_sum, temp_sum, i, n = 8, t;
max_sum = a[0];
for (t = 0; t < n; t++) {
    temp_sum = 0;
    for (i = t; i<n; i++) {
        temp_sum += a[i];
        if (temp_sum > max_sum)
            max_sum = temp_sum;
    }
} 
```

# c# - 在数据表的列表视图中显示图像

> ID：10095376
> 
> 赞同：2
> 
> 时间：2012-04-10T19:45:39.140
> 
> 标签：c#, asp.net, listview

我有一个带有图像类型列的 SQL Server 2008 表，我用它来存储图像（在 SQL 图像类型中）。

我有一个 ASPX 页面，上面有一个列表视图，它绑定到一个数据表，该数据表是从包含该图像的查询中填充的。填充数据表时获取图像字段的值。

现在我想显示该列表视图的每个字段的图像。我使用`<%# Eval("ColumnA") %>`like 语法来显示从该查询中获取的文本，但我不知道如何显示来自该查询的图像。（例如使用哪个控件？使用哪个语法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:03:19.953

尝试[数据 URL 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
<img src="<%# ReturnEncodedBase64UTF8(Eval("ColumnA")) %>" />

protected static string ReturnEncodedBase64UTF8(object rawImg)
{
    string img = "data:image/gif;base64,{0}"; //change image type if need be
    byte[] toEncodeAsBytes = (byte[])rawImg;        
    string returnValue = System.Convert.ToBase64String(toEncodeAsBytes);
    return String.Format(img, returnValue);
} 
```

# iphone - 启动画面图像的方向不正确

> ID：10095377
> 
> 赞同：0
> 
> 时间：2012-04-10T19:45:51.483
> 
> 标签：iphone, objective-c, ios, uiimageview, splash-screen

我想使用自定义启动画面，所以我在我的应用程序委托中执行此操作

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    homeNavigationController = [[UINavigationController alloc] init];
    homeNavigationController.navigationBarHidden = NO;

    [homeNavigationController pushViewController:viewController animated:NO];

    // Add the view controller's view to the window and display.
    [window addSubview:homeNavigationController.view];
    [window makeKeyAndVisible];

    [self animateSplash];

    return YES;
}

- (void)animateSplash {

    CGRect cgRect = [[UIScreen mainScreen] bounds];
    CGSize cgSize = cgRect.size;

    // set default portrait for now, will be updated if necessary
    NSString *imageName = @"splash_screen.png";
    CGRect imageFrame = CGRectMake( 0, 0, cgSize.width, cgSize.height );

    imageStage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]];
    imageStage.frame = imageFrame;

    [window addSubview:imageStage];
    [window bringSubviewToFront:imageStage];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelay:2];
    [UIView setAnimationDuration:3.0f];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:window cache:YES];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(startupAnimationDone:finished:context:)];

    imageStage.alpha = 0.0f;

    [UIView commitAnimations];
}

- (void)startupAnimationDone:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {

    // remove and clean up splash image view
    [imageStage removeFromSuperview];
    [imageStage release];
    imageStage = nil;

} 
```

这项工作正常，但由于我的应用程序在横向（主页按钮右侧）模式下启动，我的启动图像方向设置不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:06:08.897

只需使用旋转的图像以在您的方向上看起来正确。

如果您出于某种原因真的想在代码中执行此操作，请查看[如何将 UIImage 旋转 90 度？](https://stackoverflow.com/questions/1315251/how-to-rotate-a-uiimage-90-degrees)用于旋转 UIImage 的不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:07:59.507

你需要告诉 iOS 你想在横向模式下启动你的应用程序。您可以按照 Apple[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)的指示来实现此目的。

# java - 关闭 ByteArrayOutputStream 的最佳方法是什么？

> ID：10095379
> 
> 赞同：4
> 
> 时间：2012-04-10T19:46:11.200
> 
> 标签：java, memory, stream, heap-memory, bytearrayoutputstream

我需要优化使用过多堆内存的应用程序。使用 ByteArrayOutputStream 变量后，我在关闭该变量时遇到问题。我尝试过使用 close() 但它不起作用。这是代码：

```
ByteArrayOutputStream zipOutTempStream = new ByteArrayOutputStream();
//arquivo.getZipStream() has the XML received by FTP.
//STreamEtils is the function who transfers the XML to zipOutTempStream
StreamUtils.copiarStream(arquivo.getZipStream(), zipOutTempStream);

            //Creating a new XML to write over this.
            File arquivo1 = new File("C:/XML.xml");
            if (arquivo1.exists()) {
                System.out.println("ele existe");
            } else {
                if (arquivo1.createNewFile()) {
                    System.out.println("arquivo criado");
                } else {
                    System.out.println("arquivo não criado");
                }
            }

            FileOutputStream arquivo2 = new FileOutputStream(arquivo1);
            //Copy the unziped XML to the new xml created.
            StreamUtils.copiarStream(StreamUtils                .uncompressXmlFromZipStream(new ByteArrayInputStream(zipOutTempStream.toByteArray())), arquivo2);
            arquivo.setZipStream(null);
            arquivo.setXmlStream(null)      
return arquivo; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T19:51:16.973

您不能关闭 ByteArrayOutputStream，因为它的[close()](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html#close%28%29)方法记录为

> *关闭 ByteArrayOutputStream 无效。可以在流关闭后调用此类中的方法，而不会生成 IOException。*

这个输出流由一个数组支持；它**不是**缓冲流。如果您觉得它使用了太多内存，您应该使用适当的 OutputStream 将字节直接输出到某个端点，例如文件或套接字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:51:44.963

我认为您不小心使用了太多内存。`close()`与它无关。实际上没有必要关闭`ByteArrayOutputStream`。在这里，您将 ZIP 文件复制到包装`byte[]`数组中：

```
ByteArrayOutputStream zipOutTempStream = new ByteArrayOutputStream();
StreamUtils.copiarStream(arquivo.getZipStream(), zipOutTempStream); 
```

几行之后，您将`byte[]`数组转换回`InputStream`：

```
StreamUtils.copiarStream(StreamUtils.uncompressXmlFromZipStream(
  new ByteArrayInputStream(zipOutTempStream.toByteArray())
), arquivo2); 
```

似乎这个生成`byte[]`的数组非常大（通过日志确认）。而不是将整个 ZIP 文件存储在内存中 (in `byte[]`) 存储在一个临时文件中并读回它。

# android - 如何获取 utf-8 格式的 html 源代码？

> ID：10095382
> 
> 赞同：0
> 
> 时间：2012-04-10T19:46:20.963
> 
> 标签：android, post, android-webview

我编写此代码是为了从站点获取 html 源代码。

```
 HttpURLConnection connection;
        OutputStreamWriter request = null;

        URL url = null;
        String response = null;
        String parameters = "aranan="+et.getText();

        try
        {
            url = new URL("http://www.fragmanfan.com/arama.asp");
            connection = (HttpURLConnection) url.openConnection();
            connection.setDoOutput(true);
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

            request = new OutputStreamWriter(connection.getOutputStream());
            request.write(parameters);
            request.flush();
            String line = "";
            InputStreamReader isr = new InputStreamReader(connection.getInputStream());
            BufferedReader reader = new BufferedReader(isr);
            StringBuilder sb = new StringBuilder();
            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
            // Response from server after login process will be stored in response variable.
            response = sb.toString();
            // You can perform UI operations here
            browser.loadDataWithBaseURL(null, response,"text/html", "UTF-8", null);

            isr.close();
            reader.close();
        }
        catch(IOException e)
        {
            // Error
        }
    }
}); 
```

但是有一个问题。它是：响应（具有html源的变量）不是utf-8格式。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:30:54.917

. . .

```
 InputStreamReader isr = new InputStreamReader(connection.getInputStream(),"ISO-8859-9"); 
```

. . .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T00:22:25.203

由于您的响应似乎是单个字符串中的 HTML 网页，因此您应该确保页面的 head 标签包含定义编码的标签。如果不是，您可以自己将其附加到您的 StringBuilder。您可以这样做：

```
final StringBuilder sb = 
new StringBuilder("<html><head>"+ "<meta http-equiv=\"content-type\"content=\"text/html;charset=utf-8\" />"+ "</head><body>");
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
    }
response = sb.toString();
sb.append(response);
sb.append("</body></html>"); 
```

然后您可以正确地将您的 HTML 加载到您的 webview / 浏览器。（这对我有用，所以我确定它确实有效=]）

pd 确保接受正确回答您问题的答案，以便人们继续回答您未来的问题。 [https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)

# php - 如何在php中获取最大日期的数据

> ID：10095386
> 
> 赞同：0
> 
> 时间：2012-04-10T19:46:36.287
> 
> 标签：php, mysql, sql

我有三张桌子..

```
SEEKER
seeker_nic--- username---request_fulfilled
111-----------ali--------YES
222-----------bilal------YES 
```

第二张桌子是

```
DONOR
donor_nic---username----area
999----------Fahad-------UK
555----------SAJAD------USA
777---------HAMZA-------PK 
```

第三张桌子是

```
STATUS
status-id---seeker_nic---donor_nic--requestfulfilled_by----request_fulfilled_date 
1 -------------111-------999---------- Fahad-------------2012/04/09
2 -------------111-------555---------- SAJAD-------------2012/05/15
3--------------222------777-----------HAMZA--------------2012/07/20 
```

现在我想用最新数据为 SEEKER (111) 提供这个结果..

```
seeker_nic---username--- request_fulfilled---requestfulfilled_by----area---request_fulfilled_date
111-----------ali--------YES-----------------SAJAD-----------------USA--------2012/05/15 
```

我正在尝试此查询，此查询显示 rite seeker_nic 和 requestfulfilled_date，但它显示错误的捐助者 nic、区域和 requestfulfilled_by...

```
SELECT seeker.seeker_nic, donor.donor_nic, donor.area, 
status.requestfulfilled_b , max( status.`request_fulfilled_date` ) AS request_fulfilled_date
FROM seeker
JOIN STATUS ON seeker.seeker_nic = status.seeker_nic
JOIN DONOR ON status.donor_nic = donor.donor_nic
WHERE seeker.username = '$uname'
GROUP BY status.`seeker_nic` 
```

我得到这样的答案....

```
seeker_nic---username--- request_fulfilled---requestfulfilled_by--------area--------request_fulfilled_date
111-----------ali---------------YES-----------------HAMZA--------------PK------------2012/05/15 
```

请帮助我.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:19:40.913

试试这个：

```
SELECT seeker.seeker_nic, donor.donor_nic, donor.area, status.requestfulfilled_by, status.request_fulfilled_date
FROM seeker
JOIN (
  SELECT seeker_nic, max(request_fulfilled_date) as last_date
  FROM status
  GROUP BY seeker_nic
) x ON x.seeker_nic = seeker.seeker_nic
JOIN STATUS 
  ON x.seeker_nic = status.seeker_nic
  AND x.last_date = status.request_fulfilled_date
JOIN DONOR 
  ON status.donor_nic = donor.donor_nic
WHERE seeker.username = '$uname' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:35:02.063

如果您需要为某个特定用户选择最新日期，则不需要`GROUP BY`子句：

```
SELECT
    status.request_fulfilled_date, # status.requestfulfilled_by,
    seeker.seeker_nic, seeker.username, seeker.request_fulfilled,
    donor.donor_nic, donor.username, donor.area 
FROM      status
LEFT JOIN seeker ON status.seeker_nic = seeker.seeker_nic
LEFT JOIN donor  ON status.donoc_nic  = donor.donor_nic
WHERE seeker.username = 'ali'
ORDER BY status.request_fulfilled_date DESC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:27:15.890

```
SELECT x.seeker_nic, y.username, y.request_fulfilled,
       x.requestfulfilled_by, z.area, x.request_fulfilled_date
FROM status x, seeker y, donor z
WHERE x.seeker_nic=y.seeker_nic AND y.seeker_nic=111 AND z.donor_nic=x.donor_nic; 
```

# java - 准确（方位角）罗盘方向 Android 3.2 平板电脑

> ID：10095388
> 
> 赞同：0
> 
> 时间：2012-04-10T19:46:42.997
> 
> 标签：java, android, rotation, tablet, compass-geolocation

亲爱的程序员/脚本/工程师/其他人，

**问题：** 我目前正在为 Android 3.2 平板电脑开发增强现实应用程序，但在获取准确的指南针读数时遇到了一些问题。我需要准确地知道平板电脑所面对的 (z) 方向，从北方测量。不管是度数还是弧度数都没有关系。

我目前尝试过的：

1.  我使用磁力计和加速度计来计算角度。它有一个很大的缺点。如果旋转 90 度，传感器将测量更大或更小的角度。即使我在远离金属或任何磁性物体的开阔场地中。即使是偏角也不能解决它。

2.  使用陀螺仪将是一种选择。我试图测量旋转速度并将测量的单位存储到一个变量中以了解确切的视图方向。不过，似乎有一个因素会导致失真。我发现快速旋转会扭曲准确的方向测量。陀螺仪的漂移并没有那么麻烦。该应用程序检查其他传感器是否有任何移动。如果没有检测到，则不考虑陀螺仪的旋转变化。

3.  旋转矢量工作正常。它有一些问题，如陀螺仪。如果你缓慢移动并突然停下来，它会飘走几秒钟。另一个问题是快速旋转会不准确，具体取决于速度和您转了多少圈。（当我向各个方向摆动平板电脑时，你不会想知道我的同事是如何看我的……）

4.  Sensor.Orientation，没什么好说的。由于某种原因它已被弃用，所以我不会使用它。互联网上的很多例子都在使用这种传感器，它可能与磁/加速度计组合相同。

所以我目前没有想法。你能帮我进行头脑风暴/解决方案吗？提前谢谢你，罗兰

*   编辑1：我愿意提供我尝试过的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:09:34.263

我总结一下我们的意见：

1.  从这段[视频](http://www.augmentedplanet.com/2010/04/mixare-video-explains-mobile-compass-accuracy-issues/)中可以清楚地看出，手机上的传感器一开始就不是很准确。[这](https://stackoverflow.com/questions/6256256/android-compass-seems-unreliable)也很有趣
2.  重要的是，用户通过保持手机平放的 8 字形动作来校准传感器。应用程序可以以编程方式检查是否需要进行此类校准并通知用户。有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/7099568/in-android-can-i-programmatically-detect-that-the-compass-is-not-yet-calibrated)
3.  为了消除抖动，从传感器获得的值需要通过某种低通滤波器进行滤波。这也在StackOverflow 上进行[了讨论。](https://stackoverflow.com/questions/7598574/how-to-improve-accuracy-of-accelerometer-and-compass-sensors)
4.  获得的方向不是真正的北方。要获得真北，必须使用[GeomagneticField](http://developer.android.com/reference/android/hardware/GeomagneticField.html)

# ajax - Icefaces 3.0.1 FileEntry：永远不会调用 FileEntryListener

> ID：10095389
> 
> 赞同：0
> 
> 时间：2012-04-10T19:46:43.213
> 
> 标签：ajax, jsf-2, icefaces, icefaces-3

1.1、IceFaces 3.0.1 和 JSF 2.1 并尝试使用 ace:fileentry。我不明白为什么永远不会调用监听器！甚至 IDE 也会向我发送警告“pruebaBean.sampleListener 是未知属性”。这是我正在做的一个简短示例。单击提交按钮时，没有任何反应。有人能帮我吗 ？？可能是某种错误？

prueba.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:ice="http://www.icesoft.com/icefaces/component"
       xmlns:ace="http://www.icefaces.org/icefaces/components">

 <h:head>
 </h:head>
 <h:body>
     <ice:form id="usuarioForm">
         <ice:panelGrid columns="2">
             <ace:fileEntry id="fileEntryImage" absolutePath="c:\iTablero\imagenes"
                             useSessionSubdir="false" useOriginalFilename="false"
                             fileEntryListener="#{pruebaBean.sampleListener}"/>
             <ice:commandButton type="submit" value="Subir archivo"/>
         </ice:panelGrid>
         <ice:messages/>
     </ice:form>
 </h:body> 
```

PruebaBean.java：

```
 package com.itablero.backingbeans;

 import java.io.Serializable;
 import javax.annotation.ManagedBean;
 import javax.faces.bean.RequestScoped;
 import org.icefaces.ace.component.fileentry.FileEntry;
 import org.icefaces.ace.component.fileentry.FileEntryEvent;
 import org.springframework.stereotype.Controller;

 @ManagedBean
 @Controller
 @RequestScoped
 public class PruebaBean implements Serializable {

     public void sampleListener (FileEntryEvent e) {
         System.out.println("it work!");
         FileEntry fe = (FileEntry) e.getComponent();
         //some others operations
     }
 } 
```

* * *

# 更新 1

感谢@fischermatte，我发现问题是将 ice:commandButton 替换为 h:commandButton。但是当我将它应用到原始的完整表格并且没有工作时。永远不会调用 fileEntryListener 方法。有人可以在这里看到错误吗？逻辑上前面的例子和下面的代码有相同的web.xml、faces-config.xml等。注意提交文件的按钮是h:commandButton，还有一个ice:commandButton代表完整的表单。我已经尝试更改此 por en h:cb。这是原始表单（显示在弹出/模式窗口中）和 bean：

usuariosList.xhtml

```
 <ice:panelPopup rendered="#{usuariosBean.showPopup}"
                            visible="#{usuariosBean.showPopup}"
                            modal="true"
                            autoCentre="true">

                <f:facet name="header">
                    <h:panelGroup>
                        <h:panelGroup style="float: left;">
                            Usuario
                        </h:panelGroup>
                        <h:panelGroup style="float: right;">
                            <ice:form>
                            <h:commandButton image="/resources/images/popup-close.png"
                                            alt="Cerrar" title="Cerrar"
                                            style="height: 11px; width: 11px; border: 0;"
                                            action="#{usuariosBean.closePopup}"/>
                            </ice:form>
                        </h:panelGroup>
                    </h:panelGroup>
                </f:facet>
                <f:facet name="body">
                    <ice:form id="usuarioForm">
                        <ice:panelGrid columns="2">
                            <p>Nombre:</p>
                            <ice:inputText id="nombre" label="nombre" value="#{usuariosBean.usuario.nombre}" size="40" />
                            <p>Imagen:</p>
                            <ice:graphicImage value="#{usuariosBean.usuario.imagen}"/>
                            <ace:fileEntry id="fileEntryImage" absolutePath="c:\iTablero\imagenes"
                                            useSessionSubdir="false" useOriginalFilename="false"
                                            fileEntryListener="#{usuariosBean.formListener}"/>
                            <h:commandButton type="submit" value="Subir archivo"/>
                        </ice:panelGrid>
                        <ice:messages for="usuarioForm"/>
                        <ice:commandButton value="Guardar" action="#{usuariosBean.save()}" />
                    </ice:form>
                </f:facet>                    
            </ice:panelPopup> 
```

UsuariosBean.java

```
package com.itablero.backingbeans;

import com.itablero.excepciones.DAOException;
import com.itablero.modelo.Usuario;
import com.itablero.servicios.AdminService;
import java.io.Serializable;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import org.icefaces.ace.component.fileentry.FileEntry;
import org.icefaces.ace.component.fileentry.FileEntryEvent;
import org.icefaces.ace.component.fileentry.FileEntryResults;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

@ManagedBean
@Controller
@ViewScoped
public class UsuariosBean implements Serializable {

@Autowired
private AdminBean adminBean;
@Autowired
private AdminService adminService;
private Usuario usuario = new Usuario();
private boolean showPopup;

//getter and setters 

public boolean isShowPopup() {
    return showPopup;
}

public void setShowPopup(boolean showPopup) {
    this.showPopup = showPopup;
}

public void openPopup() {
    this.showPopup = true;
}

public void closePopup() {
    this.showPopup = false;
    this.usuario = new Usuario();
}

public String edit(Usuario usuario) {
    this.usuario = usuario;
    this.showPopup = true;
    return "usuariosList";
}

public String delete(Usuario usuario) {
    adminService.delete(usuario);
    return "usuariosList";
}

public String save() {
    try {
        usuario.setTutor(adminBean.getLoggedTutor());
        adminService.save(usuario);
    } catch (DAOException ex) {
        Logger.getLogger(TutoresBean.class.getName()).log(Level.SEVERE, null, ex);
    }
    usuario = new Usuario();
    this.showPopup = false;
    return "usuariosList";
}

public void formListener(FileEntryEvent e) {
    System.out.println("Entro");
    FileEntry fe = (FileEntry)e.getComponent();
    FileEntryResults results = fe.getResults();
    //other stuff
}

} 
```

* * *

# 更新 2

我想我知道为什么不起作用，但需要一些修复帮助。我按照@fischermatte 的建议进行了更正，但没有奏效。

要使用表单访问此页面，首先必须导航到主页`/admin/admin.html`，如果在浏览器中查看 URL `http://localhost:8084/iTablero/admin/admin.html`。此页面有一个菜单，其中一个菜单选项将我带到有问题表单的页面。但是，因为是 AJAX 调用（如果我没记错的话）浏览器中的 URL 不会改变，它会保留`http://localhost:8084/iTablero/admin/admin.html`. 并且 fileEntry 从不调用监听器。现在，如果我自己输入 URL `http://localhost:8084/iTablero/admin/usuariosList.html`，页面会像以前一样正确显示，但现在文件输入完美！我不知道如何解决这个问题，是否必须使用重定向？我认为是 AJAX 周围的东西.......请帮助！:-D

* * *

# 更新 3

那是菜单，没有重定向是行不通的。

```
 <h:form>
            <ice:menuBar orientation="horizontal">
                <ice:menuItem value="Tutores" action="tutoresList"/>
                <ice:menuItem value="Usuarios" action="usuariosList"/>
                <ice:menuItem value="Tableros" action="tablerosList"/>
                <ice:menuItem value="Simbolos" action="simbolosList"/>
                <ice:menuItem value="Estadisticas" action="estadisticas"/>
                <ice:menuItem value="Salir" action="#{adminBean.logout()}"/>
            </ice:menuBar>
       </h:form> 
```

`action="usuariosList?faces-redirect=true"`工作正常。已经通过向前导航到只有 FileEntry 的基本页面表单进行测试，但也不起作用。同样，如果我使用重定向，工作正常。我认为这个组件和前向导航存在某种问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:00:04.730

You have to use JSF's commandbutton instead of icefaces's: `<h:commandButton type="submit" value="Subir archivo"/>`. It is a known issue in ICEFaces, see [ace:fileEntry wiki](http://wiki.icesoft.org/display/ICE/FileEntry).

**Update 1**

Plus you either remove the rendered attribute in the popup or update the popup when opening it like here:

```
<h:form>
    <h:commandButton value="Show Popup" action="#{usuariosBean.showPopupAction}">
        <f:ajax render=":popupPanelGroup"/>
    </h:commandButton>
</h:form>
<h:panelGroup id="popupPanelGroup">
    <ice:panelPopup visible="#{usuariosBean.showPopup}" rendered="#{usuariosBean.showPopup}" modal="true" autoCentre="true">
     ...
    </ice:panelPopup>
</h:panelGroup> 
```

# php - 如何修复 Open Graph Dashboard 上的“应用程序有太多对象类型”错误？

> ID：10095390
> 
> 赞同：2
> 
> 时间：2012-04-10T19:46:45.007
> 
> 标签：php, facebook-graph-api

我正在开发一个集成到 facebook 开放图形中的 Web 应用程序，并且最初创建了许多对象（20 或 30 个），代表应用程序上的每种项目类型，我很快发现这样做是错误的，它会是更好地创建对象类型，我设法将应用程序简化为 6 个对象。但是在删除几乎所有对象后，我无法添加第 7 个对象，因为我仍然得到“应用程序的对象类型太多”。错误。我该如何摆脱它？

# asp.net-mvc - 带有 mvc 3 和 ef 4.3 的 MiniProfiler

> ID：10095398
> 
> 赞同：0
> 
> 时间：2012-04-10T19:47:27.237
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, mvc-mini-profiler

所以我刚刚将 miniprofiler.mvc 安装到我的网络项目中，它似乎工作正常。除了我无法弄清楚如何设置 EF Code First 并且文档似乎已经过时。

我的项目有一个 MyApp.DAL 项目，其中有 EF 的东西。

我需要做什么才能开始分析 EF？请帮忙？

**更新：**

我已经安装了 MiniProfiler.EF 2.0.2 现在我得到了

> 无法加载文件或程序集 'EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:49:35.583

你确定从 Nuget 安装 EF 包吗？
[http://nuget.org/packages/MiniProfiler.EF](http://nuget.org/packages/MiniProfiler.EF)

> PM> 安装包 MiniProfiler.EF

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T15:48:17.473

我通过简单地将 EF 添加到我的 Web 项目来“修复”它

这并不理想，但现在可以。

# android - 等待另一个活动的结果

> ID：10095402
> 
> 赞同：2
> 
> 时间：2012-04-10T19:47:52.090
> 
> 标签：android, android-activity, concurrency, synchronization

在一项活动（比如 A）中，我必须根据另一项活动（B）的结果执行某项任务。我使用 startActivityForResult() 开始活动 B。伪代码是这样的：（在活动A中）

```
//Statements
//startActivityForResult(activityB)
//get the result in some local variable for activity A. result is a boolean
//if(result==true) do something
//else do something else 
```

现在我面临的问题是，在启动活动 B 后，它不会等待结果从 B 到达。相反，它继续并使用布尔结果的默认值。有什么解决办法吗？

如果这个特定的块在另一个线程中，我可以编写一个同步块并在启动活动 B 后发出 wait()，然后在 onActivityResult() 中发出 notify()。但既然只有一个线程，那不是一个选择，对吧？

应该提到 activityB 接受用户输入是/否并返回它。所以在启动它时，结果不是立即可用的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:55:08.667

> 有什么解决办法吗？

`onActivityResult()`如[Android 文档中所述，](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)将代码清单中的最后两行放入。

更重要的是，您还需要重写activityB 以实际按照使用说明`setResult()`将结果传递回activityA。

# regex - 最多只替换一行中的 N 个匹配项

> ID：10095403
> 
> 赞同：8
> 
> 时间：2012-04-10T19:47:56.647
> 
> 标签：regex, perl

在 Perl 中，如何编写一个正则表达式，每个字符串最多只替换 N 个匹配项？

即，我正在寻找 和 之间的中间`s/aa/bb/;`立场`s/aa/bb/g;`。我想允许多次替换，但最多只能替换 N 次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T22:35:42.923

我能想到三种可靠的方法。第一种是将第 N 次匹配后的所有内容替换为自身。

```
my $max = 5;
$s =~ s/(aa)/ $max-- > 0 ? 'bb' : $1 /eg; 
```

如果匹配的次数远远超过 N，那效率就不是很高。为此，我们需要将循环移出正则表达式引擎。接下来的两种方法是这样做的方法。

```
my $max = 5;
my $out = '';
$out .= $1 . 'bb' while $max-- && $in =~ /\G(.*?)aa/gcs;
$out .= $1 if $in =~ /\G(.*)/gcs; 
```

而这一次，就地：

```
my $max = 5;
my $replace = 'bb';
while ($max-- && $s =~ s/\G.*?\Kaa/$replace/s) {
   pos($s) = $-[0] + length($replace);
} 
```

* * *

你可能会想做类似的事情

```
my $max = 5;
$s =~ s/aa/bb/ for 1..$max; 
```

但该方法对于其他模式和/或替换表达式将失败。

```
my $max = 5;
$s =~ s/aa/ba/ for 1..$max;  # XXX Turns 'aaaaaaaa'
                             #     into 'bbbbbaaa'
                             #     instead of 'babababa' 
```

当然，每次从字符串的开头开始可能会很昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:20:34.223

您可以使用`/e`评估右侧的标志作为表达式：

```
my $n = 3;    
$string =~ s/(aa)/$n-- > 0 ? "bb" : $1/ge; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T20:00:55.260

你想要的在正则表达式中是不可能的。但是您可以将替换放在 for 循环中：

```
my $i;
my $aa = 'aaaaaaaaaaaaaaaaaaaa';
for ($i=0;$i<4;$i++) {
    $aa =~ s/aa/bb/;
}
print "$aa\n"; 
```

结果：

> bbbbbbbbaaaaaaaaaaaa

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T20:19:38.367

这是使用 /e 修饰符的解决方案，您可以使用 perl 代码生成替换字符串：

```
  我的 $count = 0;
  $string =~ s{ $pattern }
              {
                $计数++;
                如果（$count < $limit）{
                  $替换;
                } 别的 {
                  $&; # 伪造无操作，替换为原始匹配。
                }
              }xeg;

```

使用 perl 5.10 或更高版本，您可以删除 $& （具有奇怪的性能并发症）并通过 /p 修饰符使用 ${^MATCH}

```
  $string =~ s{ $pattern }
              {
                $计数++;
                如果（$count < $limit）{
                  $替换;
                } 别的 {
                  ${^匹配};
                }
              }xegp;

```

太糟糕了，你不能这样做，但你不能：

```
  最后如果 $count >= $limit;

```

# javascript - 理解 Javascript/Node 中闭包的变量捕获

> ID：10095404
> 
> 赞同：27
> 
> 时间：2012-04-10T19:47:56.783
> 
> 标签：javascript, node.js, closures

除了标准之外，Javascript 中的变量捕获是否有明确的来源（阅读标准很痛苦）？

在以下代码`i`中按值复制：

```
for (var i = 0; i < 10; i++)
{
    (function (i)
    {
        process.nextTick(function ()
        {
            console.log(i)
        })
    }) (i)
} 
```

所以它打印 1..10。`process.nextTick`是`setTimeout(f,0)`in 节点的类比。

但在下一个代码中，我似乎没有被复制：

```
for (var i = 0; i < 10; i++)
{
        var j = i
        process.nextTick(function ()
        {
            console.log(j)
        })
} 
```

它打印 9 10 次。为什么？我对参考/一般文章更感兴趣，而不是解释这种具体的捕获案例。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T19:50:23.990

我没有方便的参考。但底线是：首先，您显式地传入`i`一个匿名函数，该函数创建了一个新范围。您没有为任何一个`i`或`j`第二个创建新范围。此外，JavaScript 总是捕获变量，而不是值。所以你也可以修改 i 。

JavaScript`var`关键字具有函数作用域，而不是块作用域。因此 for 循环不会创建范围。

请注意，非标准[`let`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/let)关键字具有本地范围。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T20:01:53.730

在 JavaScript 中，函数*包含*在其自身范围之外的范围内定义的变量，使得它们具有对变量的“活动”引用，而不是任何特定时间其值的快照。

因此，在您的第二个示例中，您创建了十个*包含*变量的匿名函数（in `process.nextTick(function(){...})`）（和，在创建匿名函数时它们始终具有相同的值）。这些函数中的每一个都在外部 for 循环完全运行*后*使用at的值，因此在调用每个函数时。也就是说，首先你的 for 循环完全运行，然后你的匿名函数运行并使用已经设置为 10 的值！*`j``i``j`*`j=i=10``j`**

 **在您的第一个示例中，情况略有不同。通过将调用包装`process.nextTick(...)`在它自己的匿名函数中，并通过调用包装函数（并顺便将旧变量*隐藏*到函数参数中）将 的值绑定`i`到函数局部范围内，您可以捕获当时的变量*值*，而不是保留其值在内部匿名函数的外壳中更改的*封闭引用。**`i``i``i`**`i`***

 ***为了稍微澄清您的第一个示例，请尝试将匿名包装函数更改为使用名为`x`( `(function (x) { process.nextTick(...); })(i)`) 的参数。在这里，我们清楚地看到在调用匿名函数的那一刻`x`取值，`i`因此它将获取 for 循环 (1..10) 中的每个值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T19:50:34.523

它在您的第二个示例中被复制（或分配），只是只有一个变量副本，`j`它将具有它最后具有的值，即 9（for 循环的最后一个 rev）。`for`您需要一个新的函数闭包来为循环的每个 rev 创建一个变量的新副本。您的第二个示例只有一个变量，该变量对 `for`循环的所有转速都是通用的，因此它只能有一个值。

我不知道关于这个主题的任何权威文章。

javascript 中的变量的作用域是函数级别。javascript 中没有块作用域。因此，如果您希望 for 循环的每个 rev 都有一个新版本的变量，您必须使用一个新函数（创建一个函数闭包）在每次`for`循环中捕获该新值。如果没有函数闭包，一个变量将只有一个值，该值对该变量的所有用户都是通用的。

当您在函数开头以外的某个位置声明诸如 your 之类的变量`var j = i;`时，javascript 会将定义提升到函数的顶部，并且您的代码将与此等效：

```
var j;
for (var i = 0; i < 10; i++)
{
        j = i;
        process.nextTick(function ()
        {
            console.log(j)
        })
} 
```

这就是所谓`variable hoisting`的术语，如果您想了解更多相关信息，您可以使用 Google 搜索。但是，关键是只有函数作用域，因此在函数中任何位置声明的变量实际上在函数顶部声明一次，然后分配给函数中的任何位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T02:13:21.363

对于第一个例子，`i`'s 是不一样的。

```
for (var i = 0; i < 10; i++) {
    (function (i) { //  capture i as the new i in this closure scope.
        process.nextTick(function () {
            console.log(i) //  reference new i (captured).
        })
    })(i)
} 
```

[闭包/价值捕获 - Rosetta Code](https://rosettacode.org/wiki/Closures/Value_capture)*****

# facebook-graph-api - 不允许此操作设置用户消息，因为未请求批准此属性

> ID：10095409
> 
> 赞同：0
> 
> 时间：2012-04-10T19:48:29.060
> 
> 标签：facebook-graph-api

有谁知道这意味着“此操作不允许设置用户消息，因为未请求批准此属性”。

我正在尝试向 Facebook Graph 发布一个行动，他们正在返回该消息。

我的应用操作已获批准。用户令牌有效。

不知道发生了什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T19:51:12.130

当您有未经批准的操作并且您没有使用用于创建操作的 facebook 帐户时，会发生这种情况

# android - 使用 Wi-Fi Direct 可以进行多播吗？

> ID：10095414
> 
> 赞同：6
> 
> 时间：2012-04-10T19:48:34.987
> 
> 标签：android, wifi-direct, wifip2p

我对 Android ICS 中的新 Wi-Fi Direct 功能有点困惑。是否可以创建具有*多个*设备的 P2P 组，并将多播数据包从源对等方发送到其他对等方？

不幸的是，我没有任何支持 Wi-Fi Direct 的设备，所以我只能浏览我在网上找到的示例。在这些示例中，我只能找到建立一对一连接的对等方。那么，多播可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:51:49.437

> 是否可以创建具有多个设备的 p2p 组？

根据行业白皮书和技术规范，是的，可以创建具有多个设备的组，您将拥有一对多连接、一个组所有者 (GO) 和多个客户端。

> 从源对等方发送多播数据包到其他对等方？

根据技术规范，GO 应充当 DHCP 服务器并为连接的客户端（应充当 DHCP 客户端）提供 IP 地址。每个设备都可以很容易地知道自己的 IP 和 GO 的 IP，因此应该可以使用地址 255.255.255.255 进行广播。

关于正确的多播，我不确定，我想这取决于创建的 DHCP 服务器的功能。

# axapta - 如何从表 id 中获取 Common 对象？

> ID：10095415
> 
> 赞同：2
> 
> 时间：2012-04-10T19:48:48.750
> 
> 标签：axapta, x++, aot, dynamics-ax-2012

如何通过 a 实例化一个通用类型对象（AX 中的表的基类）`TableId`？此外，我们还能用 TableId 做什么？

我的目标是发送`tableid`到我的方法，在那里，我将创建 id 所属表的缓冲区。可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:12:38.880

可以这样做：

```
public static Common makeRecord(TableId _tableId)
{
    return new DictTable(_tableId).makeRecord();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:55:31.160

是的，你可以这样做。这是一个网页解释： http: [//www.doens.be/2009/07/select-a-record-from-a-table-when-you-only-have-the-tableid/](http://www.doens.be/2009/07/select-a-record-from-a-table-when-you-only-have-the-tableid/)

# python - 类方法在 Python 2.7.1 中返回错误的数字

> ID：10095421
> 
> 赞同：0
> 
> 时间：2012-04-10T19:49:03.900
> 
> 标签：python, oop, class, methods

我正在编写一个小游戏来学习 Python。我创建了一个可以导入到我的 main.py 文件中的武器类。

这是我制作的课程：

```
class weapon(object):

    def __init__(self, name):
        self.weaponName = name

    def weaponStrength(self, level, strength):
        self.weaponLevel = level
        self.weaponStrength = strength
        damage = self.weaponStrength * level

        print "Damage is equal to %r" % damage

        return damage 
```

以下是使用武器类创建的对象。

```
# Creates an Object called sword using the weaponsClass
sword = weapon("sword")

# Calls a method of the weaponsClass to calculate weapon Strength. Returns a int
sword.weaponStrength(3, 20)

# Creates an Object called Magic Staff using the weaponsClass
magicStaff = weapon("Magic Staff")

# Calls a method of the weaponsClass to calculate weapon Strength. Returns a int
magicStaff.weaponStrength(5, 30)

# Sets a variable
swordStrength = sword.weaponStrength

# Sets a variable
magicStaffStrength = magicStaff.weaponStrength

# Prints the variable
print swordStrength

# Prints the variable
print magicStaffStrength 
```

我试图弄清楚为什么 SwordStrength 和 magicStaffStrength 等于传递给该方法的强度值。

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:52:30.247

您正在覆盖`weapon`命名空间中的武器强度：

```
self.weaponStrength = strength 
```

和

```
def weaponStrength(...): 
```

实际上是矛盾的。也许考虑一下您的命名约定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:19:41.247

此方法试图做两件事：

存储武器等级和武器强度

计算和返回伤害

我认为这是一个糟糕的设计，因为第一个目的表明该函数应该被调用，`setWeaponLevelAndStrength`而第二个目的表明它应该被调用`calculateDamage`。`weaponStrength`如果您还希望有一个具有该名称的属性，那么显然是一个糟糕的名称选择

```
def weaponStrength(self, level, strength):
    self.weaponLevel = level                #first purpose
    self.weaponStrength = strength          #first purpose
    damage = self.weaponStrength * level    #second purpose

    print "Damage is equal to %r" % damage  #second purpose

    return damage 
```

我建议你把方法一分为二

```
def setWeaponLevelAndStrength(self, level, strength):
    self.weaponLevel = level
    self.weaponStrength = strength

def calculateDamage(self)
    damage = self.weaponStrength * self.weaponLevel

    print "Damage is equal to %r" % damage

    return damage 
```

# c# - AppSettings 与 Web.Config 中的项目特定设置

> ID：10095423
> 
> 赞同：3
> 
> 时间：2012-04-10T19:49:05.200
> 
> 标签：c#, web-config, settings, application-settings

好的，所以这个让我有点困惑。我有以下内容：

```
string csvOfAttributes = CableSolve.Web.Properties.Settings.Default.GenerateBoothReportAttributes; 
```

在我的 web.config 中：

```
<CableSolve.Web.Properties.Settings>
  <setting name="GenerateBoothReportAttributes" serializeAs="String">
    <value>327, 329, 330, 369, 342</value>
  </setting>
</CableSolve.Web.Properties.Settings> 
```

我对此有两个问题：

*   如果我从 web.config 文件中省略我的设置，我会收到**编译错误。**这怎么可能？Web.config 是用户可编辑的；我只期望运行时错误。如果我编译我的应用程序，部署，然后用户编辑这个设置的名称——那不会破坏编译的代码吗？
*   我可能会将此设置存储在我的 web.config 文件的 appConfig 部分中。要访问这些值，我会通过 ConfigurationManager ——如果设置丢失，我只会在运行时收到一个空对象。这似乎不太有利，因为我倾向于更喜欢在编译期间出现的错误，但这让我想知道：**这两个选项之间有什么区别以及我应该何时使用它们？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:34:10.187

我认为答案主要包含在问题中：整个区别在于基本的键值对模式与更复杂的模式。通过扩展，差异涉及弱类型与强类型，以及运行时与编译时。一般来说，后者更好，就像 .NET 比 Javascript “更好”一样：您会尽早收到错误警报，而不是让它们以不可预测和难以追踪的方式冒泡到您的应用程序中。强模式偏好的例外情况可能包括：

*   您的应用程序需求在不断发展，因此您不想锁定模式
*   您正在使用不同开发人员或应用程序将使用的根级别配置
*   您希望允许“无效”配置并在运行时处理它们

# jquery - 我无法让这个 AJAX jquery 教程工作。不会加载页面

> ID：10095424
> 
> 赞同：2
> 
> 时间：2012-04-10T19:49:05.690
> 
> 标签：jquery, html, ajax

我的页面不会加载。谁能提出什么问题？我尝试将文件路径更改为不同的文件，以防导致问题。但仍然没有一个正在加载。应该发生的是，当用户单击链接时，页面应该加载到 div 中。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title> jquery example</title>
<style>
</style>
</head>
<body>

<a class="menu_top" href="pages/home1.php">Home</a>/
<a class="menu_top" href="portfolio.php">Portfolio</a>/
<a class="menu_top" href="contact.php">Contact</a>

<div id="#content_area"></div>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery_code.js"></script>
</body> 
```

jQuery

```
$(document).ready(function() {
    $('#content_area').load($('.menu_top:first').attr('href'));
});

$('.menu_top').click(function() {
    var href = $(this).attr('href');
    alert('clicked');
    $('#content_area').hide().load(href).fadeIn('normal');
    return false;
});​ 
```

当我单击 .menu_top 元素时，我能够看到警报。但它不会将其加载到页面上。我尝试将文件重命名为 .html，但它仍然无法使用。我在 xammp 本地主机上运行，​​这似乎适用于其他一切。我检查了我的控制台是否有错误，它没有返回任何错误。

我刚刚完成了一些以前的 ajax 教程，他们加载数据没有任何问题，所以我排除了它与本地主机有关的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:04:51.580

从您的 ID 中删除哈希 :)

`<div id="#content_area"></div>`

至

`<div id="content_area"></div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:51:23.857

我相信你正在寻找`$('.menu_top:first-child')`

# sitecore - 自定义表单内的 Sitecore RTE

> ID：10095426
> 
> 赞同：0
> 
> 时间：2012-04-10T19:49:13.023
> 
> 标签：sitecore, rte

我正在 Sitecore 中编写一个页面，用户可以通过输入一些非常基本的信息来创建 Sitecore 项目。其中一项要求是此表单中的 Sitecore RTE。RTE 应该具有所有可用的命令按钮，并且可以像链接到默认情况下的“媒体库”、“Flash”、“项目”等一样工作。

该控件工作正常，但我无法让任何 Sitecore 命令工作。我得到一个 -

> 缺少 Web.config 注册！Telerik 对话框需要在 web.config 文件中注册 HttpHandler。请使用控件的智能标记自动添加处理程序，或查看帮助以获取更多信息：控件 > RadEditor > 对话框 > 简介。

我检查了所有 Telerik 设置并注册了处理程序。我不确定我还能做些什么来解决这个问题。

这对客户来说非常重要。此外，如果您可以提出任何替代方案，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:41:22.253

您可以尝试以下帮助文章中提供的建议：[http ://www.telerik.com/support/kb/aspnet-ajax/editor/error-web-config-registration-missing-the-telerik-dialogs-require- a-httphandler-registration-in-the-web-config-file.aspx](http://www.telerik.com/support/kb/aspnet-ajax/editor/error-web-config-registration-missing-the-telerik-dialogs-require-a-httphandler-registration-in-the-web-config-file.aspx)

# c# - 使用 ChildWindows 的事件处理程序内存泄漏

> ID：10095438
> 
> 赞同：0
> 
> 时间：2012-04-10T19:49:50.230
> 
> 标签：c#, silverlight, events

我只是想确保下面的代码不会导致在这种情况下 ChildWindow Login 永远不会被 GC 收集。只是为了澄清示例，这来自一个被所有其他页面继承的 silverlight 页面，因此是 virtual void pageloaded 方法。

```
public class MyPage : Page
{
    // Executes when the user navigates to this page.
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        _user = App.AuthenticatedUser;
        if (!_user.IsValid)
        {
            Login loginWindow = new Login(_user);
            loginWindow.Closed += new EventHandler(PageLoaded);
            loginWindow.Show();
        }
        else
            PageLoaded(this, e);
    }

    //to be overridden by the pages extending this page control
    protected virtual void PageLoaded(object sender, EventArgs e) { } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:17:44.723

这可以。loginWindows 的 Close 事件知道您的处理程序，而不是相反，因此表单不会有任何关系阻止 GC 拾取它。

如果定义您的事件的对象将在应用程序中持续很长时间（并且您不希望事件处理程序关联持续相同的持续时间），那么取消注册事件处理程序就变得很重要。

# php - 推荐jQuery 1.6.4 ajax PHP 表单邮件脚本

> ID：10095439
> 
> 赞同：1
> 
> 时间：2012-04-10T19:49:50.590
> 
> 标签：php, jquery, ajax, forms

**推荐 jQuery 1.6.4 ajax php 表单邮件脚本？**

我一直在寻找适合我可以使用的 jQuery 1.6.4 ajax php 的脚本。我遇到的很多内容都是脚本的一部分，需要花费大量时间来组合。有没有什么从头到尾清楚描述的。如果可能的话，还有一个带有 check.php 脚本的表单。

我正在使用带有 php 脚本的 ajax post 使用 jQuery 1.6.4 表单邮件。如果未填写单个输入字段，则会出现 jQuery 错误消息。

注册 ID 号并选择模块主题 1 或主题 2 并提交。这将转到 subjectData.mysql 数据库

我已经使用 jQuery 1.6.4 设计了一个表单邮件。

```
<div class="field"><!-- Start Login--> 
     <form action="register.php" method="post" class="register">
         <fieldset class="ui-widget ui-widget-content">
         <label for="textinput1"><strong>Log in to register a module</strong></label>
         <input id="textinput1" placeholder="people number" type="text"  /></fieldset>
         <fieldset data-role="controlgroup">
         <input id="textinput2" placeholder="Password" type="password" /></fieldset> 
         <fieldset data-role="controlgroup" data-mini="true">
         <input type="radio" name="radio-choice-1" id="radio-mini-1" value="modNo1" checked="checked" />

         <label for="radio-mini-1">subject 1</label>
         <input type="radio" name="radio-choice-1" id="radio-mini-2" value="modNo2"  />
         <label for="radio-mini-2">subject 2</label></fieldset>
         <input type="submit" data-theme="a" name="submit" value="Register" />
         <button data-theme="b" id="reset" type="reset">Reset</button>
     </form>
</div>

         <!-- END Login-->
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:23:58.793

我同意 prodigitalson，你需要知道一些 php 来编写你需要的代码并使用 php 构建响应，以便 jquery ajax 接收它并根据该响应做一些 javascript 魔术。但是您必须对那个自定义位进行编码。

表单很可能会将 POST 数据发送到 check.php，所有数据都将在此处进行处理，然后它将构建一个 json 编码的响应，以使用表单回复页面。然后，您需要该页面上的一些 javascript 代码来：

1.  [防止发送按钮的默认操作](http://api.jquery.com/event.preventDefault/)，并将表单提交与 ajax 绑定到该单击事件。
2.  在 check.php 上构建 php 代码以处理 POST 数据（`$_POST`PHP 中的数组）并准备一个 json 编码响应（构建一个数组，完成后，回显`json_encode`它的输出）。
3.  构建 javascript 代码来处理来自 check.php 的 ajax 响应

关于如何使用 php 响应 jquery ajax 请求的一些示例代码[here](http://brian.dobberteen.com/code/responding-to-jquery-ajax-request-with-php/)

# visual-studio-2010 - 一遍又一遍地引用代码的最佳方法是什么？

> ID：10095440
> 
> 赞同：0
> 
> 时间：2012-04-10T19:49:54.960
> 
> 标签：visual-studio-2010, function

举个例子，假设我想在多个区域引用一个 msgbox，我可以为此创建一个函数吗？私人还是公共？差异？

这是一个例子。

```
Public Function Message() As String
   MsgBox("Test Message")
End Function 
```

另外，为什么我会收到以下消息：`Function 'Message' doesn't return a value on all code paths. A null reference exception could occur at run time when the result is used`

似乎它只是一个警告，当我调用该函数时它似乎起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:52:00.010

使它 `Sub`不期望返回值。

```
Public Sub Message() As String
   MsgBox("Test Message")
End Sub 
```

# c# - 迭代变量和查找特定类型实例的技术

> ID：10095448
> 
> 赞同：8
> 
> 时间：2012-04-10T19:50:36.130
> 
> 标签：c#, reflection, iteration

我想在我的进程中遍历内存中的变量（通过插件动态加载），并查找特定类型的实例。

以前我可以找到特定类型（或内存中的所有类型）。我可以创建类型的实例，我可以获取作为不同类型的字段包含的实例，但我不知道只是“搜索”特定类型的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:57:11.837

一种方法是使用 windbg 和 sos。您可以 !dumpheap 使用 -type 标志。

# mercurial - 用于更改文件的 Mercurial 预提交脚本

> ID：10095449
> 
> 赞同：0
> 
> 时间：2012-04-10T19:50:38.467
> 
> 标签：mercurial, mercurial-hook

尽管 Mercurial 具有去中心化的性质，但我们有一个集中的服务器，我们都推送到它，它会在夜间进行构建、打包等......

这是我们想要实现的目标：源代码控制的文件之一包含主要+次要版本号，理想情况下，每次提交都必须增加这些版本号。由于在开发人员的机器上不可能进行集中编号，因此我们正在考虑在主服务器上使用一个预提交脚本，该脚本将为每个推送的提交写入一个新的次要版本号到该文件。问题是/是：

*   因为它是预先提交的，所以这个文件更改可以是同一个提交的一部分吗？
*   如果不是，预提交是否会导致另一个提交，你如何防止它级联/递归？
*   如何做到这一点？
*   有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:09:55.120

“预提交”脚本仅在**提交**时触发。当用户**推**送到他们已经提交的“中央”服务器时，预提交钩子做任何事情都为时已晚。当开发人员推送时，您可以触发在“中央”服务器上运行`changegroup`的`incoming`钩子，但这些不能修改提交——提交已经提交/烘焙/完成，他们只能对它们做出反应.

作为一个建议，实际上不要将版本字符串放入文件中——每次提交都会更改一个文件，这只会让合并变得很痛苦。而是执行以下一项或多项操作：

*   有一个 CI 服务器（如 Jenkins）在每次推送时构建并使用 Jenkins 构建号，它可以传递到您的构建脚本中
*   使用 Mercurial nodeid (hash) 作为版本字符串的一部分，这样您就可以始终准确地知道构建中的修订版本——并且不要将它放在文件中，只需在构建（或部署）脚本中查询它
*   使用`changegroup`钩子自动标记推送，它为提交应用一个漂亮的（可能是连续的）名称（注意，这几乎使你的提交数量翻了一番，因为每个标签都是一个提交）

就个人而言，我在构建脚本中使用了类似的东西：

```
build.sh --version_string=$(hg log -r . --template '{latesttag}.{latesttagdistance}-{node|short}') 
```

这让我得到了看起来像“ `1.0.3-5fd8ed67272e`”的版本字符串，可以粗略地解读为“从变更集三个提交构建，因为版本 1.0 被标记为 nodeid 5fd8ed67272e”，这非常好——而且它从来没有保存到文件中`VERSION`当我的部署脚本将其上传到服务器时，编译（用于编译语言）或写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:46:38.047

有关此问题的一些评论和想法，请参阅Mercurial 文档中的[此页面](http://mercurial.selenic.com/wiki/KeywordPlan)。另请参阅[如何在 Mercurial 中扩展某些版本关键字？](https://stackoverflow.com/questions/3032251)以及那里引用的其他 SO 答案。

# java - Eclipse 中未更新的更改

> ID：10095454
> 
> 赞同：0
> 
> 时间：2012-04-10T19:51:03.597
> 
> 标签：java, html, eclipse, tomcat

我正在使用 Eclipse Indigo 在 html 中编写一个简单的注册表单。但是在服务器 Apache Tomcat 6.0 上运行一次后，它给出了完美的输出。但是后来如果我试图修改 html 表单中的任何值，那么它不会更新导致浏览器输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:02:01.653

在 Eclipse 窗口的“服务器”视图上按“重新发布”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T11:04:49.233

我报告了一个类似的事实及其解决方案：文件的幻想名称。日蚀霓虹灯。我创建：带有红色按钮代码的 Red.html 和带有绿色按钮代码的 Green.html。我从 Eclipse ide 中选择 Google 浏览器并正确显示两个 html。然后我从 Eclipse ide 中销毁 Red.html 并将 Green.html 重命名为 Red.html。我启动重命名的 Red.html，我看到一个红色按钮而不是绿色按钮。我打开谷歌设置，取消了前一小时的导航数据。现在 Red.html 显示绿色按钮。我这样做了，因为 Internet Explorer，没有参与以前的操作，工作正常：现在的 Red.html 显示绿色按钮。由于我是 Eclipse 新手，所以我没有尝试过上一个答案中的 ide 方式。我谨慎地尝试了浏览器端：只有 1 小时的导航。

# ruby-on-rails - Heroku 上的 rails 3.1.3 应用程序找不到（或预编译）供应商/资产

> ID：10095455
> 
> 赞同：1
> 
> 时间：2012-04-10T19:51:05.017
> 
> 标签：ruby-on-rails, asset-pipeline

我的 rails 3.1 应用程序在本地运行良好，但是当我在 Heroku 上运行它时，日志显示 Rails 没有在`vendors/assets/javascripts`目录中找到 javascripts，即使手动浏览它们也是如此。

我正在使用 plupload-rails3 gem，并且 gem 的 javascripts 没有在 Heroku 上加载，但在我的本地开发机器上加载正常。

在我的 assets/javascripts/application.js 我有：

```
//= require_tree ../../../vendor/assets/javascripts/plupload-rails3
//= require_tree ../../../vendor/assets/stylesheets/plupload-rails3
//= require_tree ../../../vendor/assets/images/plupload-rails3 
```

当我在 Heroku 上运行我的应用程序时，日志显示 Rails 尝试加载每个 plupload javascript，但使用令牌标识符失败：

ActionController::RoutingError (没有路由匹配 [GET] "/assets/plupload-rails3/plupload/js/plupload.full-f4741a878138cea127e6b38b6a08cf12.js"):

所以 plupload 小部件不会显示在 Heroku 的页面上（但当我在本地运行时会显示）。

但是，如果我手动浏览该位置（没有 ID 令牌）：

[http://MYAPPNAME.herokuapp.com/assets/plupload-rails3/plupload/js/plupload.full.js](http://MYAPPNAME.herokuapp.com/assets/plupload-rails3/plupload/js/plupload.full.js) 我确实看到了该文件。

我也尝试在本地预编译资产，然后推送到 Heroku，结果相同。

因此，我的应用程序中的某些内容被 Heroku 上的 Rails 访问供应商/资产管道破坏了。

（我`config.assets.compile = true`的 production.rb 文件中有。原始设置 false 导致应用程序在找不到预编译资产时崩溃，至少现在它没有崩溃，但它忽略了 javascript 小部件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:07:21.510

Application.js 是 javascript 的清单文件，您不想在其中包含图像或 css。vendor/assets/javascripts 应该已经在它正在搜索的路径中，所以只需包括：

```
//= require_tree ./plupload-rails3 
```

编辑：您可以执行类似的操作以将 css 包含在 application.css 中，图像不需要包含在清单中。

查看 Rails 指南：[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)和 Ryan Bates Railscast [http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)了解更多信息。

Edit2：刚刚浏览了 gem，你跑了吗

```
bundle exec rake plupload_rails3:install_assets 
```

安装资产？如果没有，请运行它，然后尝试上面的代码。

# php - PHP 的 mail() 函数在 GoDaddy 专用服务器上不起作用

> ID：10095456
> 
> 赞同：1
> 
> 时间：2012-04-10T19:51:08.863
> 
> 标签：php, email

我有一个由 GoDaddy 在虚拟专用平台上托管的网站，但我无法让该`mail()`功能在我的 PHP 脚本中正常工作。我正在尝试在人们首次注册我的网站时向他们发送带有验证码的电子邮件，该`mail()`功能适用​​于 Gmail 地址，但不适用于 AOL 甚至 GoDaddy 的电子邮件服务等其他人！

我尝试与多个 GoDaddy 支持代表交谈，但他们在这个问题上并没有真正的帮助。我在网上环顾四周，这似乎是在 GoDaddy 上托管网站的人的一个非常常见的问题。当我的电子邮件失败时，我不会收到退回的电子邮件，所以很难知道发生了什么。

这是我的PHP代码：

```
$sendtoemail  = 'newsignup@aol.com';
$emailsubject = "Please validate your email";
$emailbody    = "Validation info, blah blah.";
$emailheader  = 'From: admin@example.com' . "\r\n" . 
                'X-Mailer: PHP' . "\r\n" . 
                'Reply-To: admin@example.com' . "\r\n" . 
                '-fadmin@example.com'; 
mail($sendtoemail, $emailsubject, $emailbody, $emailheader); 
```

当我检查`/usr/local/psa/var/log/maillog`（通过 PuTTY SSH 访问）时，我遇到了一些错误，这些错误都以：`deferral: ./Maildir:_No_such_file_or_directory/`

我还在我的主机帐户上激活了反向 DNS，并创建了一个 SPF DNS 记录，该记录通过“仅 GoDaddy”发送电子邮件，并选中了“包括 PTR”框以进行 DNS 查找。这是在 GoDaddy 的 DNS 管理器上“区域文件编辑器”的“TXT（文本）”部分下。（希望这对你比对我更有意义）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-12T18:22:00.337

这是一个旧线程，但我想我会添加我的经验，以防他们帮助别人。

我在使用 mail() 时遇到了非常相似的问题，我致电了 GoDaddy 的技术服务。我在电话上打了 2 个小时，在对 mail() 进行了 30 次左右的测试调用（他们甚至上传了自己的“testmail”脚本）后，我没有成功收到一封电子邮件（尽管 mail() 返回的值为 1 ，即成功）。最终结果是他告诉我电子邮件服务器中继“排队”。两个小时后，一名技术支持人员和他的“系统管理员”......仍然是同样的问题。

解决方案是使用 php 库[swiftmailer](http://swiftmailer.org/)而不是普通的旧 mail() 函数。使用 swiftmailer 立即发送的电子邮件。希望这对其他人有帮助！

不用说，我已经改变了托管服务提供商！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:55:56.757

我不确定 GoDaddy 是否支持 PHP Mail，这对于网络托管公司来说通常是一个大问题，因为它在脚本中用于发送垃圾邮件。

最好的办法是检查 GoDaddy 在那里托管的 PEAR 扩展，如果他们有 PEAR 邮件，您可以使用它。如果没有，那么您应该尝试使用经过身份验证的邮件发送。

如果你需要，我可以给你一个 PEAR 和 Authenticated mail 的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:04:51.847

您需要为 GoDadday 使用 PHP mail() 的默认变量，我不知道，但是当我使用您的代码段时，它也对我不起作用，但是通过使用标准变量，我收到了邮件；是的，不要将变量用于专用电子邮件地址，像我一样放入 mail() 函数，![在此处输入图像描述](../Images/26e1b95bbdfd3e6724f0bba2965c6633.png)

试试希望对你也有用；

```
$subject = "Please validate your email";
$message   = "Validation info, blah blah. 2nd msg";
$Header = 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$Header .= 'From: Lux <info@luxstyles.com >' . "\r\n";

if(mail('info@luxstyles.com', $subject, $message, $Header))

echo "email sent";

else 

echo "email sending fail"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T23:05:19.857

所以我在godaddy豪华主机上使用php的邮件功能做了一些工作。它会发送到我的 gmail 帐户，但使用 Godaddy 上的域的实际电子邮件帐户从未发送过邮件。我必须相信有某种方法可以解决这些疯狂。如果您没有从 mail() 收到邮件，我的建议是尝试使用不同的电子邮件。我知道这会影响您对电子邮件发送位置的完美设置，但至少您会收到电子邮件。一旦您真正收到邮件，也许您可​​以使用转发技巧将邮件发送到您选择的收件箱。

# iphone - [__NSCFNumber 长度]：无法识别的选择器发送到实例 0x6d21350

> ID：10095459
> 
> 赞同：20
> 
> 时间：2012-04-10T19:51:20.037
> 
> 标签：iphone, ios, xcode

这个错误可能意味着什么？

```
[__NSCFNumber length]: unrecognized selector sent to instance 0x6d21350 
```

这是我的代码：

```
 NSString *urlString = @"http://api.twitter.com/1/statuses/update.json";
    NSURL *url = [NSURL URLWithString:urlString];

    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    [params setObject:status forKey:@"status"];
    [params setObject:replyToID forKey:@"in_reply_to_status_id"];
    [params setObject:@"1" forKey:@"include_entities"];

    // Build the request with our parameter
    TWRequest *request = [[TWRequest alloc] initWithURL:url parameters:params requestMethod:TWRequestMethodPOST];

    // Attach the account object to this request
    [request setAccount:twitterAccount];

    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (!responseData) {
            // inspect the contents of error 
            NSLog(@"%@", [error localizedDescription]);

            self.alert = [[UIAlertView alloc] initWithTitle:@"HTTP error" message:@"I could not connect to the Twitter API." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
            [self.alert show];

            [self.replyDelegate replyRequestSuccessful:NO];
        }
        else {
            /*NSString *responseDataAsString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
             NSLog(responseDataAsString);*/

            NSError *error;
            NSArray *replyResponse = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];

            if (!replyResponse) {
                NSLog(@"%@", [error localizedDescription]);

                self.alert = [[UIAlertView alloc] initWithTitle:@"JSON error" message:@"I could not parse the JSON response from the Twitter API." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
                [self.alert show];

                [self.replyDelegate replyRequestSuccessful:NO];
            }
            else {
                [self.replyDelegate replyRequestSuccessful:YES];
            }
        }
    }]; 
```

我试过debuggin，一旦进入performRequestWithHandler它就死了。它进入 else 块并因上述错误而死。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-10T19:56:23.923

这意味着您正在传递一个`NSNumber`被调用代码期望一个`NSString`或其他具有`length`方法的对象的位置。您可以告诉 Xcode 中断异常，以便查看`length`调用该方法的确切位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T13:26:11.343

特别是这行代码：

```
[params setObject:replyToID forKey:@"in_reply_to_status_id"]; 
```

这`replyToID`不是一个字符串或有一个方法`length`。如果您没有这个，或者如果您在将其`replyToID`设置为参数之前将其转换为字符串，它应该可以工作。

# mysql - 带有 MYSQL 检查和安装的 Visual Studio Windows 安装程序

> ID：10095462
> 
> 赞同：1
> 
> 时间：2012-04-10T19:51:36.563
> 
> 标签：mysql, visual-studio-2010, windows-installer

我有一个 VB Windows 窗体应用程序，它使用 mysql 数据库来跟踪应用程序中的所有内容。我知道会发生的问题是大多数应用程序用户都没有 MYSQL，更不用说知道如何正确安装它了。 . 要在用户系统上安装应用程序，我使用 Visual Studio 安装程序来处理 msi 文件的创建。首先需要发生的是安装程序需要检查主机系统上是否安装了 MYSQL 并验证服务器名称..如果为真，则导入数据库，如果不是，则安装，然后是导入数据库...这里的导入不是问题...如何使安装程序使用受控参数（例如服务器名称等）安装mysql。有什么想法吗？？？在过去的 3 个小时里，我一直在谷歌上寻找面包屑，但无济于事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:58:02.710

通常将现有的包（如 MySQL 安装程序）添加为先决条件。Visual Studio 安装项目不支持自定义先决条件创建。但是，这可以通过手动生成所需的清单来完成。

您可以在此处找到清单结构：http: [//msdn.microsoft.com/en-us/library/ms229223 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms229223(VS.80).aspx)

这些清单可以使用[Bootstrapper Manifest Generator](http://archive.msdn.microsoft.com/Wiki/View.aspx?ProjectName=bmg)工具自动生成。

生成包清单后，您可以将所有这些文件（包括包）添加到 Visual Studio 必备项文件夹中的单独文件夹中，例如：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\ 
```

然后，您可以在设置项目属性页面中选择先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:18:56.850

嗯……这是个好问题。我脑海中首先浮现的就是：

您可以在您的应用程序而不是安装程序中构建检查并警告用户。如果需要，您可以提供另一个安装程序以确保一切都可用（MySQL 和数据库本身）。

我希望它能进一步帮助你。此致，罗兰

# git - 如何忽略 Git 存储库中的特定文件？

> ID：10095463
> 
> 赞同：1
> 
> 时间：2012-04-10T19:51:37.847
> 
> 标签：git, github

我正在使用 github 托管一个 git 存储库，我需要在某些机器上克隆该存储库（这些机器不用于更改代码）它们仅用于保存软件代码的副本。

我使用以下命令行将远程存储库克隆到本地计算机：

```
git clone -b master git://github.com/jquery/jquery.git jquerylocal 
```

当我需要同步（获取文件的更改和添加的新文件）以`jquerylocal`最新版本命名的本地文件夹时，问题就出现了，因为我的机器添加了名为的文件`.DS_Store`并给了我以下错误：

```
error: Your local changes to the following files would be overwritten by merge:
    .DS_Store 
```

我想说 git 忽略我在本地目录中创建的所有文件并替换为新文件并对现有文件进行新的更改。

我也想知道如何说 git 忽略一些要同步的文件夹和文件。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:02:23.983

你想创建一个[`.gitignore`](http://help.github.com/ignore-files/)文件，它会指示 Git 完全按照你的要求去做；忽略具有特定文件名模式的文件。在您的情况下，您需要使用一行创建一个 .Gitignore 文件：

```
.DS_Store 
```

这应该位于 Git 存储库的根目录中。

如果你已经签入了一些`.DS_Store`文件，你会希望 Git 停止跟踪它们。您可以`git rm .DS_Store`用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:01:47.850

`.gitignore`在项目的根目录中创建一个名为的文件。

编辑该文件并将 .DS_Store 添加到该文件。`git add .gitignore`和`git commit`那个文件。

然后`git rm`是所有那些 .DS 文件。推动你的改变。

Git同步：

拉取更改

`git pull`

推送更改

`git push`

您需要做的就是`git pull`在远程机器上。如果有任何冲突，那些看起来像是你不应该提交的文件，因为它们似乎是由你的构建系统自动生成的。一旦您删除了任何已提交的 .DS_Store 文件并将其添加到其中，`.gitignore`您就不必再担心同步该文件，因为它将被 git 忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:04:32.190

如果可以删除本地添加的`.DS_Store`文件（以及任何其他本地更改），那么您可以在拉取新更改之前执行[git clean 。](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)

这个问题也可能会回答您的需求：[如何强制“git pull”覆盖本地文件？](https://stackoverflow.com/questions/1125968/force-git-to-overwrite-local-files-on-pull)

# c++ - 如何在 x64 代码中获得 exp() 函数的内在函数？

> ID：10095465
> 
> 赞同：9
> 
> 时间：2012-04-10T19:51:41.930
> 
> 标签：c++, visual-studio-2010, visual-c++, visual-c++-2010, intrinsics

我有以下代码，并期望使用该`exp()`函数的内在版本。不幸的是，它不在 x64 构建中，因此比类似的 Win32（即 32 位构建）要慢：

```
#include "stdafx.h"
#include <cmath>
#include <intrin.h>
#include <iostream>

int main()
{
  const int NUM_ITERATIONS=10000000;
  double expNum=0.00001;
  double result=0.0;

  for (double i=0;i<NUM_ITERATIONS;++i)
  {
    result+=exp(expNum); // <-- The code of interest is here
    expNum+=0.00001;
  }

  // To prevent the above from getting optimized out...
  std::cout << result << '\n';
} 
```

我正在为我的构建使用以下开关：

```
/Zi /nologo /W3 /WX-
/Ox /Ob2 /Oi /Ot /Oy /GL /D "WIN32" /D "NDEBUG" 
/D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /Gm- 
/EHsc /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope 
/Yu"StdAfx.h" /Fp"x64\Release\exp.pch" /FAcs /Fa"x64\Release\" 
/Fo"x64\Release\" /Fd"x64\Release\vc100.pdb" /Gd /errorReport:queue 
```

如您所见，我确实有`/Oi`，`/O2`并且`/fp:fast`根据[MSDN 关于内在函数的文章的](http://msdn.microsoft.com/en-us/library/tzkfha43.aspx)要求。然而，尽管我努力调用标准库，`exp()`但在 x64 构建上的执行速度变慢了。

这是生成的程序集：

```
 for (double i=0;i<NUM_ITERATIONS;++i)
000000013F911030  movsd      xmm10,mmword ptr [__real@3ff0000000000000 (13F912248h)]  
000000013F911039  movapd     xmm8,xmm6  
000000013F91103E  movapd     xmm7,xmm9  
000000013F911043  movaps     xmmword ptr [rsp+20h],xmm11  
000000013F911049  movsd      xmm11,mmword ptr [__real@416312d000000000 (13F912240h)]  
  {
    result+=exp(expNum);
000000013F911052  movapd     xmm0,xmm7  
000000013F911056  call       exp (13F911A98h) // ***** exp lib call is here *****
000000013F91105B  addsd      xmm8,xmm10  
    expNum+=0.00001;
000000013F911060  addsd      xmm7,xmm9  
000000013F911065  comisd     xmm8,xmm11  
000000013F91106A  addsd      xmm6,xmm0  
000000013F91106E  jb         main+52h (13F911052h)  
  } 
```

正如您在上面的程序集中看到的那样，有一个`exp()`函数调用。现在，让我们看看`for`使用 32 位构建为该循环生成的代码：

```
 for (double i=0;i<NUM_ITERATIONS;++i)
00101031  xorps       xmm1,xmm1  
00101034  rdtsc  
00101036  push        ebx  
00101037  push        esi  
00101038  movsd       mmword ptr [esp+1Ch],xmm0  
0010103E  movsd       xmm0,mmword ptr [__real@3ee4f8b588e368f1 (102188h)]  
00101046  push        edi  
00101047  mov         ebx,eax  
00101049  mov         dword ptr [esp+3Ch],edx  
0010104D  movsd       mmword ptr [esp+28h],xmm0  
00101053  movsd       mmword ptr [esp+30h],xmm1  
00101059  lea         esp,[esp]  
  {
    result+=exp(expNum);
00101060  call        __libm_sse2_exp (101EC0h) // <--- Quite different from 64-bit
00101065  addsd       xmm0,mmword ptr [esp+20h]  
0010106B  movsd       xmm1,mmword ptr [esp+30h]  
00101071  addsd       xmm1,mmword ptr [__real@3ff0000000000000 (102180h)]  
00101079  movsd       xmm2,mmword ptr [__real@416312d000000000 (102178h)]  
00101081  comisd      xmm2,xmm1  
00101085  movsd       mmword ptr [esp+20h],xmm0  
    expNum+=0.00001;
0010108B  movsd       xmm0,mmword ptr [esp+28h]  
00101091  addsd       xmm0,mmword ptr [__real@3ee4f8b588e368f1 (102188h)]  
00101099  movsd       mmword ptr [esp+28h],xmm0  
0010109F  movsd       mmword ptr [esp+30h],xmm1  
001010A5  ja          wmain+40h (101060h)  
  } 
```

那里有更多代码，但速度更快。我在 3.3 GHz Nehalem-EP 主机上进行的时序测试产生了以下结果：

32 位：

> 对于循环体平均执行时间：34.849229 个周期/10.560373 ns

64 位：

> 对于循环体平均执行时间：45.845323 个周期/13.892522 ns

确实是非常奇怪的行为。为什么会这样？

***更新：***

我创建了[Microsoft Connect 错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/736364/functions-that-are-marked-as-sse-intrinsics-have-no-intrinsic-version)。随意支持它以从 Microsoft 本身获得关于浮点内在函数使用的权威答案，尤其是在 x64 代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:30:30.267

在 x64 上，使用 SSE 执行浮点运算。这没有内置操作`exp()`，因此调用标准库是不可避免的，除非您编写自己的内联手动矢量化`__m128d exp(__m128d)`（[使用 SSE 的指数函数的最快实现](https://stackoverflow.com/questions/47025373/fastest-implementation-of-exponential-function-using-sse)）。

我想你所指的 MSDN 文章是用 32 位代码编写的，考虑到 8087 FP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T13:26:47.560

我认为微软提供 32 位 SSE2 exp() 的内在版本的唯一原因是标准调用约定。32 位调用约定要求将操作数压入主堆栈，并将结果返回到 FPU 堆栈的顶部寄存器中。如果您启用了 SSE2 代码生成，则返回值可能会从 FPU 堆栈弹出到内存中，然后从该位置加载到 SSE2 寄存器中，以便对结果进行任何数学运算。显然，在 SSE2 寄存器中传递操作数并在 SSE2 寄存器中返回结果会更快。这就是 __libm_sse2_exp() 所做的。在 64 位代码中，标准调用约定传递操作数并在 SSE2 寄存器中返回结果，因此具有内在版本没有优势。

exp() 的 32 位 SSE2 和 64 位实现之间的性能差异的原因是微软在这两种实现中使用了不同的算法。我不知道他们为什么要这样做，并且它们会为某些操作数产生不同的结果（相差 1ulp）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:26:58.343

*编辑*我想在这个讨论中添加指向[AMD 的 x64 指令集手册](http://developer.amd.com/documentation/guides/Pages/default.aspx#manuals)和[Intel 的参考](http://download.intel.com/design/intarch/manuals/24319101.pdf)的链接。

在初始检查中，应该有一种方法可以使用 F2XM1 来计算指数。但是，它在 x87 指令集中，[隐藏在 x64 模式中。](https://stackoverflow.com/questions/1067630/sse2-option-in-visual-c-x64)

[如VirtualDub 讨论板上](http://www.virtualdub.org/blog/pivot/entry.php?id=107)的帖子所述，明确使用 MMX/x87 是有希望的。 而且，这就是[在 VC++ 中实际编写 asm 的方法。](http://www.sciencezero.org/index.php?title=How_to_write_x64_assembly_functions_in_Visual_C%2b%2b)

# c - 非接口函数原型应该放在哪里？

> ID：10095469
> 
> 赞同：1
> 
> 时间：2012-04-10T19:51:47.083
> 
> 标签：c, header-files, function-prototypes

我反复阅读过，头文件应包含其他文件使用源代码所需的所有声明。然后假设您有一个不被其他源文件直接使用的函数（换句话说，一个非接口函数）。它的原型是否应该放在 .c 文件的顶部，因为它不会被其他文件使用？还是应该将它与所有其他函数一起放在头文件中，以便将 .c 文件中存在的函数完全汇总到一个地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:55:07.600

标头包含接口信息（外部世界使用“模块”中的功能所需的任何信息——例如.c 文件）。所以内部函数（不从外部使用），不要进入标题

在 .c 文件中，它取决于组织

*   有些人喜欢在顶部列出所有内部函数声明，所以它们在一个地方。
*   其他依赖于排序，因此函数由使用时间定义（在另一个函数中）；并且仅在必要时前向声明它（例如相互调用的递归函数）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:53:28.590

是的，私有函数的原型应该和函数放在同一个`.c`文件中。标头定义了外部接口。

与前向声明不同，一些程序员更喜欢按照函数的使用顺序来定义函数，这样就不需要原型了。当然，如果两个或多个函数相互调用，则不能这样做。

我个人的偏好是首先声明所有的函数，这样你就会对文件有一个概览。

如果您有在单个模块中使用的函数（一小组共同实现一个功能单元的文件），那么创建*第二*个特定于模块的头文件是完全合理的。模块中的所有文件——但没有外部源文件——都会`#include`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T20:03:54.203

如果该函数未被其他 .c 文件使用，则它不应在头文件中有原型。您应该给它[静态](https://stackoverflow.com/questions/5319361/static-function-in-c) 修改器，并将原型放在使用它的（唯一）.c 文件的顶部。

如果合理可行，您可以在调用它的所有函数之前定义该函数，因此您甚至不需要原型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T19:58:18.557

鉴于头文件本质上是在 C 中声明外部接口的唯一方法，因此不属于该接口的内容不应出现在头文件中。

C 是什么，有时这并不实际，因为外部可见定义的内部视图需要引用它；在这种情况下，您可以将它放在标题中，但受`#define`明确指示其内部出处的 a 保护，并且同样用于`#ifdef`选择需要它的定义的内部版本和外部版本。（您会经常在系统头文件中看到这一点。）不过，最好尽量避免这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T20:03:24.267

在我看来，将原型语法中的所有函数声明放在`.c`源文件的顶部是一种很好的风格。它还可以为读者记录您的源代码。

您不想将声明放在`.h`头文件中，因为您会不必要地暴露程序的内部结构。

哦，别忘了`static`在函数声明中添加说明符。

# javascript - 使用 YUI2 insertAfter() 插入 javascript var 作为标记

> ID：10095475
> 
> 赞同：1
> 
> 时间：2012-04-10T19:52:08.043
> 
> 标签：javascript, html, yui2

我正在尝试将 javascript 中的元素定义为字符串，然后将其插入。是我定义错了，还是有其他问题？

```
var NEW_ROW= '<TR class="NewRow"></TR>';
YAHOO.util.Dom.insertAfter(NEW_ROW, referenceNode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:29:27.080

这是相反的：

```
YAHOO.util.Dom.insertAfter(referenceNode, NEW_ROW); 
```

# php - 根据 MySQL 查询输出设置单元格的背景颜色

> ID：10095479
> 
> 赞同：0
> 
> 时间：2012-04-10T19:52:16.313
> 
> 标签：php, mysql

我是 PHP 新手，并试图学习足够的知识来完成一些基本功能。我已经能够为我的用户创建一个表格来编辑自己并重新显示，但我遇到了一个问题。使用下面的脚本，用户可以输入他们对各种产品的技能水平。我希望能够突出显示他们输入“0”或空白的每个单元格。用户的输入将介于 0-5 之间（如果尚未填写，则为空白）。

这一切都是在我的本地主机上完成的，所以我承认所有的安全措施都不在那里。

我已经阅读了很多帖子并试图自己弄清楚，但我相信我在做一些根本错误的事情。

对此的任何帮助将不胜感激。众所周知，我会为那些帮助我编码的人买啤酒（通过贝宝）:)

这是我现有的用于打印数据库结果的代码：

```
<?php
//This will connect to the database in order to begin this page
mysql_connect("localhost", "root", "time2start") or die (mysql_error());
//Now we will select the database we need to talk to
mysql_select_db("joomla_dev_15") or die (mysql_error());
$query = "SELECT * FROM enterprise_storage WHERE id=1";
$result = mysql_query($query) or die (mysql_error());
echo "<table border='1'>";
echo "$row";
echo "<tr> <th>Product</th> <th>Wayne Beeg</th> <th>Paul Hamke</th> <th>Steve Jaczyk</th>       <th>David Jontow</th> <th>Ed MacDonald</th> <th>Michael Munozcano</th> <th>Ron Shaffer</th>  <th>Luke Soares</th>  <th>Josh Wenger</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
// Print out the contents of each row into a table
echo "<tr><td>"; 
echo $row['model'];
echo "</td><td>"; 
echo $row['beeg'];
echo "</td><td>"; 
echo $row['hamke'];
echo "</td><td>"; 
echo $row['jaczyk'];
echo "</td><td>"; 
echo $row['jontow'];
echo "</td><td>"; 
echo $row['macdonald'];
echo "</td><td>"; 
echo $row['munozcano'];
echo "</td><td>"; 
echo $row['shaffer'];
echo "</td><td>"; 
echo $row['soares'];
echo "</td><td>"; 
echo $row['wenger'];
echo "</td></tr>"; 
} 
echo "</table>";
?>
<FORM>
<INPUT TYPE="BUTTON" VALUE="Return to the Home Page"       ONCLICK="window.location.href='http://localhost/~user/joomla15/custom/skilldisplay.php'"> 
</FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:59:35.290

也许

```
while($row = mysql_fetch_array( $result )) {
// Print out the contents of each row into a table
echo "<tr>";
foreach($row as $content) {
    if($content == 0) {
        echo "<td style='background-color:gray;'>";
    }
    else {
        echo "<td style='background-color:green;'>";
    }
    echo $content . "</td>";
}
echo $row['wenger'];
echo "</td>"; 
}
echo "</tr></table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:29:47.617

好的，所以我终于设法让它工作了。上面的两个回复帮助我找出了正确的方法来做到这一点。

当然，我的方法可能不是最好的方法，但我已经对其进行了测试，它可以满足我的需求。对于任何未来的搜索者，这就是我所做的：

```
 <?php
    //This will connect to the database in order to begin this page
    mysql_connect("localhost", "root", "time2start") or die (mysql_error());
    //Now we will select the database we need to talk to
    mysql_select_db("joomla_dev_15") or die (mysql_error());
    $query = "SELECT * FROM enterprise_storage";
    $result = mysql_query($query) or die (mysql_error());
    echo "<table border='1'>";
    echo "$row";
    echo "<tr> <th>Product</th> <th>Wayne Beeg</th> <th>Paul Hamke</th> <th>Steve Jaczyk</th> <th>David Jontow</th> <th>Ed MacDonald</th> <th>Michael Munozcano</th> <th>Ron Shaffer</th> <th><a href='http://localhost/~user/joomla15/custom/updateform.php'>Luke Soares</a></th> <th>Josh Wenger</th> </tr>";
    // keeps getting the next row until there are no more to get
    while($row = mysql_fetch_array( $result )) {
// Print out the contents of each row into a table
echo "<tr><td>"; 
echo $row['model'];
echo "</td>";
if ($row['beeg'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['beeg'] ;
}else{
    echo '<td>' .$row['beeg'];
}
echo "</td>"; 
if ($row['hamke'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['hamke'] ;
}else{
    echo '<td>' .$row['hamke'];
}
echo "</td>"; 
if ($row['jaczyk'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['jaczyk'] ;
}else{
    echo '<td>' .$row['jaczyk'];
}
echo "</td>"; 
if ($row['jontow'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['jontow'] ;
}else{
    echo '<td>' .$row['jontow'];
}
echo "</td>"; 
if ($row['macdonald'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['macdonald'] ;
}else{
    echo '<td>' .$row['macdonald'];
}
echo "</td>"; 
if ($row['munozcano'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['munozcano'] ;
}else{
    echo '<td>' .$row['munozcano'];
}
echo "</td>"; 
if ($row['shaffer'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['shaffer'] ;
}else{
    echo '<td>' .$row['shaffer'];
}
echo "</td>"; 
if ($row['soares'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['soares'] ;
}else{
    echo '<td>' .$row['soares'];
}
echo "</td>"; 
if ($row['wenger'] == '0'){
    echo '<td bgcolor="#FF0000">' . $row['wenger'] ;
}else{
    echo '<td>' .$row['wenger'];
}
echo "</td></tr>"; 
```

} 回声“”；

?>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:00:10.057

尝试这样的事情

将此添加到您生成的文档中

```
<style type="text/css">
    .red{ background-color: red; }
</style> 
```

这是你的 PHP：

```
<?php
// sanitize value
$value = trim($row['model']);
$class = (empty($value)) ? 'red' : '';

// display
echo "<td class=\"$class\">$value</td>"; 
...
?> 
```

# c++ - C++ 中服务器实例的全局变量

> ID：10095480
> 
> 赞同：2
> 
> 时间：2012-04-10T19:52:28.050
> 
> 标签：c++

在查看 Web 服务器的一些现有代码时，我看到服务器类有一个`main.cc`文件和另一个`server.h`文件`server.cc`。

```
// main.cc
#include "server.h"
int main() {
  foo::server = new foo::Server();
  server->Serve();  // runs forever
}

// server.cc
namespace foo {
  Server *server;

  // class member definitions ...
} 
```

是否有充分的理由不只`foo::Server *server`在 main 中定义？

这种编码风格的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:55:32.987

**编辑**

用于维护。很直观，您有`foo::server`in的定义`server.cc`。如果您只有一个变量，则收益不会直接可见。但是假设你有几十个变量。使用这种风格，您可以确切地知道在哪里寻找定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:56:04.987

我认为这类似于在lib中声明的`cout` **对象。**`iostream`大多数时候只有一个`ostream`类对象，那么为什么不创建它一次可见的everywere（`iostrem`包括在哪里）？

# c# - 你如何获取他们的文本框的值并将它们传输到richtextbox？

> ID：10095488
> 
> 赞同：-2
> 
> 时间：2012-04-10T19:52:53.583
> 
> 标签：c#, .net, winforms, textbox, richtextbox

你如何获取他们的文本框的值并将它们传输到richtextbox？

我创建了一个包含 button1、richtextbox 和 webbrowser（设置为 facebook）的 Windows 应用程序表单。

我想要这个按钮 1，如果单击它，它将复制在 facebook.com 的注册表单中键入的值，然后将其粘贴到richtextbox。

这些是其文本框的 ID。

“名字”
“姓氏”
“reg_email__”
“reg_email_confirmation__”
“reg_passwd__”
“sex”
“birthday_month”
“birthday_day”
“birthday_year”

您如何以编程方式获取在 facebook 文本框中输入的值，然后将它们传输到 Richtextbox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:30:59.323

假设您正在`WinForms`使用该`WebBrowser`控件的`Document`属性。它返回一个类型为 的对象`HtmlDocument`。`HtmlDocument`反过来有一个`GetElementById`返回类型对象的方法`HtmlElement`。该`OuterHtml`属性最终包含有关文本框的信息。使用`Regex`表达式，您可以提取所需的信息

```
HtmlElement tb = webBrowser1.Document.GetElementById("firstname");

string outerHtml = tb.OuterHtml;
// Yields a text which looks like this
// <INPUT id=firstname class=inputtext value=SomeValue type=text name=firstname>

string text = Regex.Match(outerHtml, @"value=(.*) type=text").Groups[1].Value;
// text => "SomeValue" 
```

我希望能够访问 HTML-DOM 对象模型；但是它似乎对 c# 隐藏。

* * *

编辑：

组合框产生不同类型的信息。请注意，我在`InnerHtml`这里使用。

```
HtmlElement cb = webBrowser1.Document.GetElementById("sex");

string innerHtml = cb.InnerHtml;
// Yields a text which looks like this where the selected option is marked with "selected"
// <OPTION value=0>Select Sex:</OPTION><OPTION value=1>Female</OPTION><OPTION selected value=2>Male</OPTION>

Match match = Regex.Match(innerHtml, @"<OPTION selected value=(\d+)>(.*?)</OPTION>");
string optionValue = match.Groups[1].Value;
string optionText = match.Groups[2].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:33:45.013

您是否要求有人为您编写程序？怀疑会发生这种情况。

所以，忽略“为什么？”这个明显的问题，我会给出一些指示。首先，查看您感兴趣的页面的查看源代码。有时（使用固定格式 - 尤其是具有固定和唯一名称的文本框）将 html 源代码作为文本扫描并使用你想要的名字。如果在构建时没有填充文本框（即值不在视图源中），那么您可能必须通过 DOM 并单独访问控件。

根据您访问此页面的方式和时间，您可能会发现这些字段根本没有被 FB 填充（出于明显的安全原因），并且仅作为用户的输入（因此我之前的“为什么？”问题）。

# mysql - mysql派生表，性能，替代

> ID：10095489
> 
> 赞同：1
> 
> 时间：2012-04-10T19:52:56.440
> 
> 标签：mysql, ruby-on-rails, join, query-optimization, derived-table

我有以下表格，

1.  **link_books_genres** , *表结构 -> book_id,genre_id*
2.  **流派**，*表结构 -> 流派 ID，流派名称*

给定一组 book_ids，我想形成以下结果，

```
result_set structure -> genre_id, genre_name, count(book_id). 
```

我写了这个查询，

```
SELECT one.genre_id,
       one.genre_name, 
       two.count 
FROM   genres as one,(SELECT genre_id,
                   count(book_id) as count 
                   FROM link_f2_books_lists GROUP BY genre_id) as two 
WHERE  one.genre_id = two.genre_id; 
```

我不知道这是否是最好的解决方案，但我希望尽可能优化它，或者它是否格式良好、经过验证。

PS 它是用 ruby​​ on rails 完成的，所以任何面向 rails 的方法也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:57:06.243

您的查询未使用 SQL-92`JOIN`语法，而是使用较旧的隐式连接语法。是时候（20 年了），你应该开始使用它了。

`COUNT`使用别名等关键字也不是很好。您可以使用`cnt`or`book_count`代替：

```
SELECT one.genre_id,
       one.genre_name, 
       two.cnt 
FROM   
       genres AS one
     INNER JOIN
       ( SELECT genre_id,
                COUNT(book_id) AS cnt 
         FROM   link_f2_books_lists 
         GROUP BY genre_id
       ) AS two 
           ON one.genre_id = two.genre_id ; 
```

* * *

MySQL 通常用 快一点`COUNT(*)`，所以如果`book_id`不能`NULL`，改用`COUNT(book_id)`将`COUNT(*)`是一个小的性能提升。

* * *

当然，您可以在没有派生表的情况下重写 Join：

```
SELECT one.genre_id,
       one.genre_name, 
       COUNT(*) AS cnt 
FROM   
       genres AS one
     INNER JOIN
       link_f2_books_lists AS two 
           ON one.genre_id = two.genre_id 
GROUP BY  one.genre_id ; 
```

在这两个版本中，您都可以按顺序更改`INNER JOIN`为`LEFT OUTER JOIN`不显示任何书籍（0 个）的流派。但是然后使用`COUNT(two.book_id)`and not `COUNT(*)`，以获得正确的结果。

上述版本（和您的版本）将不包括这些类型（这是使用`JOIN`语法的一个很好的理由，所需的更改非常简单。尝试使用您的`WHERE`版本！）

* * *

`LEFT JOIN`版本也可以这样写：

```
SELECT one.genre_id,
       one.genre_name, 
       ( SELECT COUNT(*) 
         FROM   link_f2_books_lists AS two 
         WHERE  one.genre_id = two.genre_id 
       ) AS cnt 
FROM   
       genres AS one ; 
```

* * *

关于性能，没有什么比自己测试更好的了。这一切都取决于您使用的 MySQL 版本（较新的版本将有更好的优化器，可以通过更多选项来选择创建执行计划，并且可能会将不同的版本识别为等效），表的大小，您拥有的索引，数据的分布（有多少不同的类型？平均每种类型有多少本书？等），你的内存（和其他 MySQL）设置以及我现在可能忘记的许多其他因素。

一个建议是，`(genre_id, book_id)`在大多数情况下，索引对所有版本都是有用的。

作为一般建议，在多对多表上同时拥有 a`(genre_id, book_id)`和索引通常是好的。`(book_id, genre_id)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:59:26.187

```
SELECT one.genre_id, one.genre_name,  count(two.book_id) 
FROM genres as one, link_books_genres as two 
WHERE one.genre_id=two.genre_id
GROUP BY genre_id 
```

# objective-c - UIControl 在 ios ipad 应用程序中创建弹出窗口

> ID：10095491
> 
> 赞同：3
> 
> 时间：2012-04-10T19:53:13.957
> 
> 标签：objective-c, ios, cocoa-touch, ipad

我想在 ipad 应用程序中创建一个弹出窗口（如图所示）。我应该使用什么 UI 控件。如果有人可以向我推荐一个教程，那就太好了。我正在寻找仅 ipad 的应用程序。

![ipad弹出窗口](../Images/bac9f563441e8f0251ed7289dbc0490c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:58:22.647

这是以模态模式呈现的视图控制器。见 - [presentModalViewController:animated:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentModalViewController%3aanimated%3a)

[iOS 视图控制器编程指南 - 模态视图的表示样式](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW15)

# python - 在python中替换字符串

> ID：10095492
> 
> 赞同：1
> 
> 时间：2012-04-10T19:53:23.957
> 
> 标签：python, c, string, parsing, replace

我在 C 代码中有以下序列：

```
variable == T_CONSTANT 
```

或者

```
variable != T_CONSTANT 
```

使用 Python，如何分别用`SOME_MACRO(variable)`或替换这些？`!SOME_MACRO(variable)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:57:28.037

一个非常简单且容易出错的方法是使用正则表达式：

```
>>> s = "a == T_CONSTANT"
>>> import re
>>> re.sub(r"(\w+)\s*==\s*T_CONSTANT", r"SOME_MACRO(\1)", s)
'SOME_MACRO(a)' 
```

类似的正则表达式可用于该`!=`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:02:10.290

好的，我知道您已经接受了另一个答案。但是，我只是忍不住把它扔掉，因为您的问题是经常出现的问题，并且正则表达式可能并不总是合适的。

这段代码定义了一个微小的有限非递归[解析表达式语法](https://en.wikipedia.org/wiki/Parsing_expression_grammar)，它允许您根据一系列已编译的正则表达式、替代项（不同匹配字符串的元组）和纯字符串来描述您正在搜索的内容。这种格式比计算机语言的正则表达式更方便，因为它看起来类似于语言语法的正式规范。基本上，`[varname, ("==", "!="), "T_CONSTANT"]`描述了您要查找的内容，并且该`action()`功能描述了您找到它时想要执行的操作。

我已经包含了一个示例“C”代码的语料库来演示解析器。

```
import re

# The @match()@ function takes a parsing specification and a list of
# words and tries to match them together. It will accept compiled
# regular expressions, lists of strings or plain strings. 

__matcher = re.compile("x") # Dummy for testing spec elements.
def match(spec, words):
    if len(spec) > len(words): return False

    for i in range(len(spec)):
        if   type(__matcher) is type(spec[i]):
            if not spec[i].match(words[i]): return False
        elif type(()) is type(spec[i]):
            if words[i] not in spec[i]: return False
        else:
            if words[i] != spec[i]: return False

    return True

# @parse()@ takes a parsing specification, an action to execute if the
# spec matches and the text to parse. There can be multiple matches in
# the text. It splits and rejoins on spaces. A better tokenisation
# method is left to the reader...

def parse(spec, action, text):
    words = text.strip().split() 

    n = len(spec)
    out = []
    while(words):
        if match(spec, words[:n+1]): out.append(action(words[:n+1])); words = words[n:]
        else: out.append(words[0]); words = words[1:]

    return " ".join(out)

# This code is only executed if this file is run standalone (so you
# can use the above as a library module...)

if "__main__" == __name__:
    # This is a chunk of bogus C code to demonstrate the parser with:

    corpus = """\
/* This is a dummy. */
variable == T_CONSTANT
variable != T_CONSTANT
/* Prefix! */ variable != T_CONSTANT
variable == T_CONSTANT /* This is a test. */
variable != T_CONSTANT ; variable == T_CONSTANT /* Note contrived placement of semi. */
x = 9 + g;
"""

    # This compiled regular expression defines a legal C/++ variable
    # name. Note "^" and "$" guards to make sure the full token is matched.
    varname = re.compile("^[A-Za-z_][A-Za-z0-9_]*$")

    # This is the parsing spec, which describes the kind of expression
    # we're searching for.
    spec = [varname, ("==", "!="), "T_CONSTANT"]

    # The @action()@ function describes what to do when we have a match.
    def action(words):
        if "!=" == words[1]: return "!SOME_MACRO(%s)" % words[0]
        else:                return "SOME_MACRO(%s)"  % words[0]

    # Process the corpus line by line, applying the parser to each line.
    for line in corpus.split("\n"): print parse(spec, action, line) 
```

如果你运行它，结果如下：

```
/* This is a dummy. */
SOME_MACRO(variable)
!SOME_MACRO(variable)
/* Prefix! */ !SOME_MACRO(variable)
SOME_MACRO(variable) /* This is a test. */
!SOME_MACRO(variable) ; SOME_MACRO(variable) /* Note contrived placement of semi. */
x = 9 + g; 
```

哦，好吧，我玩得很开心！; - )

# coldfusion - CFLOOP 复制

> ID：10095496
> 
> 赞同：0
> 
> 时间：2012-04-10T19:53:29.463
> 
> 标签：coldfusion, coldfusion-9, cfloop

我有一个由两个循环生成的下拉列表。内部循环生成一系列数字，即从 0 到 23。外部循环是一个查询循环，它根据存储在我的数据库中的值从 23 个数字中选择正确的值。

我的问题是这两个循环冲突导致从 0 到 23 的数字显示两次。如何保持两个循环但避免这个问题？当通过尝试提交表单两次并删除用户的输入来提交表单时，此问题也会导致问题。

这是我的代码：

```
<select id="openHours#CountVar#" name="openHours#CountVar#">
 <cfloop query="doctorHours" >                
   <cfloop from="0" to="23" index="OpenHours"> 
   <option value="#openHours#"
      <cfif TimeFormat(doctorHours.openTime,'HH') EQ OpenHours AND CountVar EQ doctorHours.day > selected="selected"</cfif>>#OpenHours#</option>
   </cfloop>
  </cfloop>
</select> 
```

这是我对该查询的 CFDUMP

```
query
RESULTSET   
query
    CLOSETIME           DAY DOCTORID            OPENTIME
1   1970-01-01 16:00:00.0   4   2011041516290025478779  1970-01-01 10:00:00.0
2   1970-01-01 16:00:00.0   1   2011041516290025478779  1970-01-01 13:00:00.0
3   1970-01-01 16:00:00.0   2   2011041516290025478779  1970-01-01 13:00:00.0
CACHED  false
EXECUTIONTIME   0
SQL select doctorID, opentime, closetime, day from doctorBusinessHours where doctorID='2011041516290025478779' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:30:47.203

您应该只返回您需要的时间，然后循环创建下拉列表：

`DATEPART(hh,yourdate)`将返回您的日期时间值的小时数：

```
<cfquery name="doctorHours" datasource="#ds#">
    SELECT doctorID,DATEPART(hh,openTime) As OpenHours, DATEPART(hh,closetime) As CloseHours 
    FROM   doctorHours 
    WHERE  day = #CountVar#
    AND    doctorID='#docID#'
</cfquery> 
```

`ValueList`会将您的查询结果转换为列表：

```
<cfset openTimesList = ValueList(doctorHours.OpenHours) />
<cfset closeTimesList = ValueList(doctorHours.CloseHours ) /> 
```

`ListContains`将返回列表中值的索引：

```
<select id="openHours#CountVar#" name="openHours#CountVar#">
    <cfloop from="0" to="23" index="OpenHours"> 
       <option value="#openHours#"
           <cfif ListContains(openTimesList,OpenHours) NEQ 0 > 
              selected="selected"
           </cfif>
       >#OpenHours#</option>
   </cfloop>
</select> 
```

您可以对 closeTimesList 使用相同的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:11:26.040

嗯....上面代码中显示的值的数量将等于查询返回的记录数 X 23。如果查询返回 2 条记录，您将看到 46 个选项，依此类推。您似乎认为该查询只有 1 条记录。我建议也许它有更多。

在您的查询中尝试 LIMIT 1 或 TOP 1 - 或使用 Maxrows（如评论中所建议的那样）......但请确保您知道您包含什么以及您排除了什么。您需要知道为什么您的查询不是您所期望的:)

# python - 从谷歌应用引擎表单中的日期字段中提取数据

> ID：10095497
> 
> 赞同：0
> 
> 时间：2012-04-10T19:53:31.017
> 
> 标签：python, google-app-engine, date

我在 GAE-python 中创建了一个包含日期字段的简单表单。我尝试从中提取数据，但不断出现异常。
我的代码是；

```
temp_var = datetime.strptime(cgi.escape(self.request.get('exam_date')),"%m/%d/%Y")
pledge_data.checkup_date = temp_var.strftime('%m/%d/%Y') 
```

例外是；

```
BadValueError: Property checkup_date must be a date 
```

我在这里很困惑。strftime 不应该将其转换为日期对象吗？

编辑：我正在解析的日期是一个字符串“05/23/2011”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:05:51.557

您正在exam_date 上执行strptime，它会在您将其重新转换为带有strftime 的字符串之后立即返回一个日期

尝试：

```
temp_var = datetime.strptime(cgi.escape(self.request.get('exam_date')),"%m/%d/%Y")
pledge_data.checkup_date = temp_var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:07:30.457

第一行你已经得到了一个日期：

```
temp_var = datetime.strptime("05/23/2011","%m/%d/%Y")

temp_var
>> datetime.datetime(2011, 5, 23, 0, 0) 
```

文档[在这里](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)。

# c++ - 如何让 uint8_t const* 指向与 char* 相同的地址？

> ID：10095499
> 
> 赞同：0
> 
> 时间：2012-04-10T19:53:37.483
> 
> 标签：c++, ns-3

在 C++ 程序中，我有一个 char* 指向包含 BUFFER_SIZE 个字符的数组的开头（每个字符的大小为一个字节）。我现在想在 NS3 模拟中使用该代码，数据包将 uint8_t const* 作为输入，指向缓冲区。

为了创建指向第一个提到的缓冲区的“uint8_t const*”，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:48:49.540

您必须使用`reinterpret_cast`：

```
int main () {
 char buffer[10];
 reinterpret_cast<unsigned char const *>(buffer);
} 
```

或使用 C 风格的演员表：

```
int main () {
 char buffer[10];
 (unsigned char const *)buffer;
} 
```

# jquery - 如果鼠标右键按下（按下），则在悬停时执行某些操作

> ID：10095500
> 
> 赞同：1
> 
> 时间：2012-04-10T19:53:38.063
> 
> 标签：jquery, hover, mouse

当鼠标悬停在图像上并且按住鼠标右键时，我需要缩放图像。就像是：

```
$('img').hover(
     function(){
       if (the-right-mouse-button-is-pressed){
         $(this).animate({
         width:  $(this).width() *2,
         height: $(this).height()*2,
         }, 500);
       }
     },
}); 
```

我需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:10:54.073

**编辑：**对于您的以下评论，

> 谢谢。但是，它需要右键单击图片。如果您在屏幕的其他位置按住右键然后传递图像，则它不起作用

您需要添加 mouseup 事件并有条件地缩放。见下面的代码，[**DEMO**](http://jsfiddle.net/PhM8P/3/)

```
var hasExpanded = false;
$('img').on('mousedown mouseup', function(e) {
    if (e.which == 3) {
            if (!hasExpanded) {
            $(this).animate({
                width: $(this).width() * 2,
                height: $(this).height() * 2,
            }, 500);
        }
        hasExpanded = true;
    }
}).mouseleave(function(e) {
    if (hasExpanded  == true) {
    $(this).animate({
        width: $(this).width() / 2,
        height: $(this).height() / 2,
    }, 500);
    hasExpanded = false;
}
}); 
```

* * *

你需要的东西不能通过悬停来实现。将触发悬停，`mouseeneter`它只会被调用一次，并且它无法记录`mousedown`稍后发生的事件。

您需要实现`mousedown`处理程序。见下文，

[**DEMO**](http://jsfiddle.net/skram/PhM8P/2/) - Demo 两者都有`mousedown`并`mouseleave`实施。

```
$('img').mousedown(function(e) {
    if (e.which == 3) {
        $(this).animate({
            width: $(this).width() * 2,
            height: $(this).height() * 2,
        }, 500);
    }
}); 
```

# sql - Oracle SQL：即使特定值不存在也返回记录

> ID：10095509
> 
> 赞同：1
> 
> 时间：2012-04-10T19:54:28.667
> 
> 标签：sql, oracle, join

我有一个查询，我试图从查询特定 ID 的表中提取一些值。如果该值不存在，我仍然希望查询返回一条只有我正在寻找的 ID 值的记录。这是我到目前为止所尝试的。

```
Select attr.attrval, attr.uidservicepoint, sp.servicepointid 
From bilik.lssrvcptmarketattr attr 
Join bilik.lsmarketattrtype type on attr.uidmarketattrtype = type.uidmarketattrtype AND 
type.attrtype IN ('CAPACITY_REQUIREMENT_KW') and TO_CHAR( attr.starttime , 'mm/dd/yyyy')in ('05/01/2011') 
Right Outer Join bilik.lsservicepoint sp on attr.uidservicepoint = sp.uidservicepoint
Where sp.servicepointid in ('RGE_R01000051574382') Order By sp.servicepointid ASC 
```

在此示例中，我正在尝试查找 RGE_R01000051574382。如果表 SP.servicepointid 中不存在该值，我希望它仍然在一条记录中返回“RGE_R01000051574382”，而我要提取的其他值则为空。通常，当我运行它时，我会一次提取大约 1000 个特定值。

如果有人对此有任何见解，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:16:53.097

I think you're saying you want to have a record returned, with the servicepointid column populated, but all others null?

In that case, use a union.

```
select   ...your query without order by...
and      sp.servicepointid = 'RGE_R010000515743282'
union
select   null, null, 'RGE_R010000515743282'
from     dual
where    not exists (select 'x' from (...your query without order by...)) 
```

Here's a complete example:

```
create table test (id number, val varchar2(10));
insert into test (id, val) values (1, 'hi');

select   id,
         val
from     test
where    id = 1
union
select   1,
         null
from     dual
where    not exists (select   'x'
                     from     test
                     where    id = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:57:09.197

如果我理解正确，您只需将`WHERE`子句移入`JOIN`子句即可。

```
select attr.attrval,
    attr.uidservicepoint,
    sp.servicepointid
from bilik.lssrvcptmarketattr attr
join bilik.lsmarketattrtype type on attr.uidmarketattrtype = type.uidmarketattrtype
    and type.attrtype in ('CAPACITY_REQUIREMENT_KW')
    and TO_CHAR(attr.starttime, 'mm/dd/yyyy') in ('05/01/2011')
right outer join bilik.lsservicepoint sp on attr.uidservicepoint = sp.uidservicepoint
    and sp.servicepointid in ('RGE_R01000051574382')
order by sp.servicepointid 
```

# error-handling - NSURLConnection 没有调用 didFailWithError。

> ID：10095512
> 
> 赞同：0
> 
> 时间：2012-04-10T19:54:40.330
> 
> 标签：error-handling, timeout, nsurlconnection, nsurlconnectiondelegate

我正在尝试编写一些代码来检查数据源的 URL，然后用来自该 URL 的对象填充一个数组。它实际上运行良好，但如果 Web 连接或地址出现问题，我想用捆绑文件中的数据填充数组。我遇到的问题是该`connection didFailWithError`方法永远不会被调用。我尝试传递一个简单的字符串，但它没有调用。我希望该应用程序仍然适用于使用 ipod touch 或处于飞行模式的人。

`connection didReceiveResponse`工作没有问题。

这就是我正在使用的。

```
- (void)loadListData{
NSLog(@"Loading data from sources");

NSURLRequest *listURLRequest = [NSURLRequest requestWithURL:integerPhoneListURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:1.0];
[[NSURLConnection alloc] initWithRequest:listURLRequest delegate:self];

  if (!listConnectFail){
        phoneListJSON =[NSData dataWithContentsOfURL:integerPhoneListURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:phoneListJSON waitUntilDone:YES];

    } else {
        //This will tell us if there is an error loading the file
        NSLog(@"File not found on web init from file");
        phoneListJSON =[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"contactlist" ofType:@"json"]];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:phoneListJSON waitUntilDone:YES];
    }

//Initialize the filtered list with array of customer objects. Based on original data
filteredList = [[NSMutableArray alloc] init];

for (NSDictionary *dict in phoneListOriginal) {
    contact *single = [[contact alloc] init];
    single.fName = [dict objectForKey:@"fName"];
    single.lName = [dict objectForKey:@"lName"];
    single.extension = [dict objectForKey:@"extension"];
    single.title = [dict objectForKey:@"title"];
    single.department = [dict objectForKey:@"department"];
    single.cellNumber = [dict objectForKey:@"cellNumber"];
    //NSLog(@"%@", single.lName);
    [filteredList addObject:single];
}

NSLog(@"Array filteredLIst contains %d records",[filteredList count]); } 
```

-（无效）连接：（NSURLConnection *）连接didFailWithError：（NSError *）错误{

```
listConnectFail = YES; 
NSLog(@"Connection Failed, pulling from file"); } 
```

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response { listConnectFail = NO; NSLog(@"连接成功，从 API 填充"); }

我知道这可能是我没有看到的愚蠢的东西，但我可以使用帮助来查看我没有看到的东西

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:03:56.853

您如何确认您的代表没有收到消息？你检查过日志吗？

您的代码似乎假定 NSURLConnection 的初始化完成后将立即设置“listConnectFail”，但情况并非如此。

```
[[NSURLConnection alloc] initWithRequest:listURLRequest delegate:self];
if (!listConnectFail){...} 
```

NSURLConnection 文档指出“随着负载的进行，委托将接收委托消息。”

但是，我不确定飞行模式，也许可以同步检测到这个特定的错误。

# jquery - Coldfusion CFC在Jquery中返回JSON显示，如何处理来自CFC的多条记录并在Jquery中显示？

> ID：10095520
> 
> 赞同：4
> 
> 时间：2012-04-10T19:55:08.123
> 
> 标签：jquery, coldfusion, cfc

我需要一种从coldfusion中获取json返回并在jquery中显示的方法

```
<cfquery name="users" datasource="#thedb#">
In this query I can get 1 record to 25 or even more results         
</cfquery> 
```

这是我对 jquery 的输出，不确定这是否是一个好方法，但是....这就是我现在处理多条记录的方式。

```
<cfset var user = structNew()/>

<cfset thenumber = 1>   
        <cfloop query="users"> 
        <cfset user["newrequestor#theNumber#"] = users.requestor/>
        <cfset user["newrequestorusername#theNumber#"] = users.requestor_username/>
        <cfset user["newrequestorphone#theNumber#"] = users.requestorphone/>
        <cfset user["newrequestoremail#theNumber#"] = users.requestoremail/>
        <cfset user["newthedate#theNumber#"] = users.thedate/>
        <cfset user["newapproved#theNumber#"] = users.approved/>
        <cfset user["newcomments#theNumber#"] = users.comments/>
        <cfset user["newviewed#theNumber#"] = users.viewed/>
        <cfset thenumber = thenumber + 1>
        </cfloop>

<cfreturn user> 
```

CFC 结束

这是我的 jquery，我将其手动设置为获取第一条记录...不知道如何循环以返回所有记录。

在这里，我将我的论点传递给 cfc 以获得我的结果。效果很好

```
thedata = instance.getSearch($("#therequestor").val(), $("#fromDate").val(), $("#toDate").val(), $("#theapproved").val(), $("#theroom").val()); 
```

接下来我在 jquery 中构建一行来处理我的第一条记录，手动设置不是动态的。

```
var new_Return = '<tr id="newReturn"><th style="text-align:left;" id="first">Request Date:</th><td>'+thedata.newthedate1+'</td><td>&nbsp&nbsp&nbsp&nbsp</td><th style="text-align:left;" id="first">Requestor:</th><td>'+thedata.newrequestor1+'</td><td>&nbsp&nbsp&nbsp&nbsp</td><th style="text-align:left;" id="first">Approved:</th><td>'+thedata.newapproved1+'</td><td>&nbsp&nbsp&nbsp&nbsp</td><th style="text-align:left;" id="first">Viewed:</th><td>'+thedata.newviewed1+'</td></tr>';
        $("#theReturnFormTable").append(new_Return) 
```

在我的 div 标签中显示第一个结果很好，如果我有多个记录，我该如何循环示例 thedata.newrequestor1 是我的第一条记录

那么我可以拥有更多更多

thedata.newrequestor2 是我的第二个 thedata.newrequestor3 是我的第三个等等。

我如何在 jquery 中处理这个问题，或者我必须在coldfusion cfc 中开始不同的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T20:34:07.253

您可以只调用远程函数并让 ColdFusion 将查询对象序列化为 JSON 吗？（注意 returnFormat="JSON"）

```
<cffunction name="getUsers" access="remote" returnType="query" returnFormat="JSON">
   <cfquery name="users" datasource="#thedb#">
       In this query I can get 1 record to 25 or even more results         
   </cfquery>
   <cfreturn users>
</cffunction> 
```

JSON 格式将如下所示：

```
{"COLUMNS":["NEWREQUESTER","NEWREQUESTERUSERNAME"],"DATA":[["1","JOHN DOE"],["2","JIM DOE"]]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:18:31.387

将您的用户存储在一个数组中并返回该数组。

```
<cfset var userArr = arrayNew(1)/>
<cfloop query="users">
    <cfset var user = structNew()/>
    <cfloop list="#users.columnlist#" index="column">
        <cfset user[column] = users[column]>
    </cfloop>
    <cfset ArrayAppend(userArr, user)/>
</cfloop>
<cfreturn userArr /> 
```

这会在 javascript 中创建一个对象数组，如下所示：

```
[
    {
        newrequestrr:"foobar",
        newrequestorusername:"foobar",
        ...
    },
    ...
] 
```

**更新：**我使代码更加动态。我在我的 udf 库中使用了一个自定义函数来进行从查询结构到行结构数组的转换，我对其进行了修改以使用您的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T05:27:48.157

如果你想要一些具有正常 json 结构的东西，你将不得不创建它。如果您正在与 CORS 作战，请 PM 我。我在 Angular 7 前端使用它。`returnType="query"`从您的 cffunction 标签中删除；它只是返回半生不熟的准 json 格式。希望这可以帮助某人。

```
<cffunction name="getRecipies" access="remote" returnFormat="JSON"

    <cfquery name="qryRecipies" datasource="#VARIABLES._dsnName#" username="#VARIABLES._dsnUsername#" password="#VARIABLES._dsnPassword#">
        SELECT *        
        FROM recipes
    </cfquery>

    <cfset prepArr = arrayNew(1)/>
    <cfloop query="qryRecipies">
        <cfset prep = structNew()>
        <cfset prep["id"] = qryRecipies.id>    
        <cfset prep["name"] = qryRecipies.name>
        <cfset prep["description"] = qryRecipies.description>
        <cfset prep["imagePath"] = qryRecipies.imagePath>
        <cfset ArrayAppend(prepArr, prep)/>
    </cfloop>

    <cfreturn serializeJSON(prepArr) />   
</cffunction> 
```

# vector - 标准化一个向量？

> ID：10095524
> 
> 赞同：2
> 
> 时间：2012-04-10T19:55:14.120
> 
> 标签：vector, normalization

你如何标准化一个 M*N 向量，使其所有元素的总和现在等于 1。我在网上浏览了一下，似乎没有什么能完全符合我的需要。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:58:05.203

您将所有元素相加，然后将每个元素除以总和。

显然，除法（至少）需要是浮点数。由于这表示浮点矩阵，因此在保持最大精度的同时进行求和将是非常重要的。

举个例子，如果你有一个大元素和很多小元素，你可能会得到一个更准确的结果，把所有小元素加在一起，*然后*把这个和加到大元素上，而不是把每个小元素都加起来。一个单独的大元素。

编辑：我想我应该补充一点，在数值分析的高级大师威廉·卡汉之后，处理这个问题的常用方法称为卡汉求和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T17:46:44.783

我认为你必须将每个向量分量除以向量的欧式距离

# .net - 强烈地将反射 .GetValue() 对象强制转换为通用 DbSet

> ID：10095526
> 
> 赞同：4
> 
> 时间：2012-04-10T19:55:28.747
> 
> 标签：.net, vb.net, entity-framework, generics, reflection

我在 VS 2010 (.Net 4.0) 中使用 EF 4.3.1 从数据库中加载许多参考表，以便将它们绑定到 WinForms 应用程序中的控件。

在表单加载时，我正在预取数据以便将其存储在本地，并且我正在创建一个 BindingSource 对象字典，我可以使用它来将本地数据绑定到控件。目的是尽量减少 EF 的自我验证对冷查询的影响，以便更快地加载表单并提高 UI 响应能力。

我编写了代码来为给定的 DbSet 集合创建和获取 BindingSource 对象，如下所示：

```
Private _dictBindings As New Dictionary(Of String, BindingSource)

Private Sub ValidateBinding(Of T As Class)(ByRef DbCollection As DbSet(Of T))
   Dim strClassName As String = DbCollection.[GetType]().GetGenericArguments(0).Name
   If Not _dictBindings.ContainsKey(strClassName) Then
      _dictBindings.Add(strClassName, New BindingSource With {.DataSource = DbCollection.Local.ToBindingList})
   End If
End Sub

Public Function GetBinding(Of T As Class)(ByRef DbCollection As DbSet(Of T)) As BindingSource
   ValidateBinding(Of T)(DbCollection)
   Return _dictBindings(DbCollection.[GetType]().GetGenericArguments(0).Name)
End Function 
```

这段代码有效，我可以打电话

```
ValidateBinding(Db.ProvinceStates) 
```

或者

```
ComboBox1.DataSource = GetBinding(Db.Cities) 
```

但是，我想在启动时对模型中的所有 DbSet 集合调用 ValidateBinding，并且我想使用反射来遍历上下文中的可用集合，因为我们目前正在加载 66 个表，以后可能会添加更多。

我编写了以下代码：

```
For Each propSet As PropertyInfo In Db.GetType.GetProperties(BindingFlags.Instance Or BindingFlags.Public).Where(Function(P) P.PropertyType.IsGenericType)
    ValidateBinding(propSet.GetValue(Db, Nothing))
Next 
```

...但它不起作用，因为 propSet.GetValue() 返回一个 Object 而不是 DbSet(of T)。即使我通过反射知道类型，我也无法将对象转换为适当类型的 DbSet。

我无法访问 C# Dynamic 类型，而且我知道将泛型与反射混合起来很痛苦，但是有没有一种解决方案可以让我将反射的 DbSet 传递给我的函数？也许使用 Method.Invoke 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:27:16.400

我想我已经解决了，解决方案是 Method.Invoke。

首先，我已将我的函数转换为扩展方法。虽然这不是必需的，但它确实允许我写：

```
db.ProvinceStates.ValidateBinding 
```

和

```
ComboBox1.DataSource = db.Cities.GetBinding 
```

其次，我使用 GetMethod、MakeGenericMethod 和 Invoke 编写了以下内容：

```
Dim methodLoad = GetType(DbExtensions).GetMethod("Load", BindingFlags.Static Or BindingFlags.Public)

For Each propSet As PropertyInfo In Db.GetType.GetProperties(BindingFlags.Instance Or BindingFlags.Public).Where(Function(P) P.PropertyType.IsGenericType)
   Dim oSet As Object = propSet.GetValue(Db, Nothing)
   methodLoad.Invoke(Nothing, {oSet})

   Dim methodValidateBinding = GetType(DbSetExtender).GetMethod("ValidateBinding", BindingFlags.Static Or BindingFlags.Public).MakeGenericMethod(propSet.PropertyType.GetGenericArguments(0))
   If methodValidateBinding IsNot Nothing Then
      methodValidateBinding.Invoke(Nothing, {oSet})
   End If
Next 
```

这会用一块石头杀死两只鸟并加载所有 66 个表的数据，并创建它们的 BindingSource 对象以将控件绑定到。（DbSetExtender 是我自己的模块，我将扩展方法放入其中，而 DbExtensions 是 .Net 框架的一部分。）

# jquery - jQuery Accordion 的 FUEL CMS / CodeIgniter 问题 - 不工作 @ all

> ID：10095528
> 
> 赞同：2
> 
> 时间：2012-04-10T19:55:35.157
> 
> 标签：jquery, codeigniter, fuelcms

我无法让 jQuery UI Accordion 在我的一个非常简单的 CodeIgniter 视图中工作，不确定发生了什么，但我怀疑它与我链接文件的方式有关。我已经尝试了我能想到的所有可能的相对 URL 组合。

这是我的控制器，它加载我的标题视图，然后是主视图。这是有效的，因为我可以看到所有的 HTML，只是 jQuery 没有做它的事情：

**控制器：**

```
function __construct()
{
    parent::__construct();
}

public function index()
    {
      $this->load->view('header');
      $this->load->view('main');
    }
} 
```

我的 2 个观点：

**标题视图**

```
<!doctype html>
<html lang="en">
<head>
  <title>my site</title>
  <meta charset="UTF-8" />
  <meta name="ROBOTS" content="ALL" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="keywords" content="<?=fuel_var('meta_keywords')?>" />
  <meta name="description" content="<?=fuel_var('meta_description')?>" />
  <!-- Base Spider CSS -->
  <link type="text/css" rel="stylesheet" href="<?php echo base_url(); ?>assets/css/sunny/jquery-ui-1.8.18.custom.css" />
  <!-- [END] -->
  <script src="<?php echo base_url(); ?>assets/js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8" />
  <script src="<?php echo base_url(); ?>assets/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript" charset="utf-8" />

  <script>
$(function() {
    $( "#accordion" ).accordion();
});
</script> 
```

**主视图**

```
<body>
  <div id="accordion">
    <h3><a href="#">First header</a></h3>
      <div>First content</div>
    <h3><a href="#">Second header</a></h3>
      <div>Second content</div>
  </div>
</body>
</html> 
```

当我回显我的 base_url() 时，我得到[http://www.mywebsite.com/site1/](http://www.mywebsite.com/site1/) **

我的 CSS、JS 和其他资产在站点根级别的文件夹中 + assets + js + css + images

我确保这些文件夹都是可写的，不知道它还能是什么。控制器正在正确呈现视图并且 HTML 正在显示，只是没有 jQuery 操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:13:26.093

看起来您在呈现的 HTML 中缺少 jquery 函数：

```
<script>
    $(function() {
        $( "#accordion" ).accordion();
    });
</script> 
```

# r - 使用 Roxygen 在同一个文件中记录两个 S3 方法

> ID：10095529
> 
> 赞同：23
> 
> 时间：2012-04-10T19:55:36.747
> 
> 标签：r, documentation, roxygen2

我有两种密切相关的 S3 泛型（在另一个包中定义）方法，因此我想将它们记录在同一个`Rd`文件中。`R CMD check`但是，当我分别记录他们的论点时，我从“文档对象中的重复 \argument 条目”中收到警告

```
##' Create a ggplot of a Kaplan-Meier Survival curve(s)
##'
##' @param data  A \code{survfit} object returned from \code{\link{survfit}}
##' @param \dots Unused
##' @return A ggplot2 object
autoplot.survfit <- function(data, ...) {
    NULL
}

##' @rdname autoplot.survfit
##' @param data A \code{\link{survfit.fortify}} object returned from \code{\link{fortify.survfit}}
autoplot.survfit.fortify <- function(data, ...) {
    NULL
} 
```

第一个参数必须是`data`因为这是泛型定义的。但是，对于不同的方法，它的文档是不同的，只是因为它必须属于不同的类。我可以为此拥有两个单独的文档文件，但它们紧密耦合，因此我想将它们放在一起。我可以在第一次调用中列出所有可能的类，`data`而在随后的调用中没有任何内容，但这意味着我正在用第一个函数记录第二个函数，而不是像 Roxygen 那样将它们全部放在一起。

是否有可能让 roxygen 从多种方法中创建一个合法的（不重复参数）？如果没有，处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:43:13.043

我认为 S3 泛型方法背后的想法是，不必对同一个参数有不同的描述。

`##' @method`如果您使用和生成 S3 方法文档，从使用部分可以清楚地看出哪些类被接受（对于发生分派的参数）`##' @S3method`。对于其他参数，我想说需要不同的描述可能表明应该使用不同的参数名称。

所以从：

```
##' Create a ggplot of a Kaplan-Meier Survival curve(s)
##'
##' @param data  the object to be plotted
##' @param \dots Unused
##' @method autoplot survfit
##' @S3method autoplot survfit
##' @return A ggplot2 object
autoplot.survfit <- function(data, ...) {
    NULL
}

##' @rdname autoplot.survfit
##' @method autoplot survfit.fortify
##' @S3method autoplot survfit.fortify
autoplot.survfit.fortify <- function(data, ...) {
    NULL
} 
```

我和`roxygen2`

```
Create a ggplot of a Kaplan-Meier Survival curve(s)

Description:

Create a ggplot of a Kaplan-Meier Survival curve(s)

Usage:

     ## S3 method for class 'survfit'
      autoplot(data, ...)

     ## S3 method for class 'survfit.fortify'
      autoplot(data, ...)

Arguments:

    data: the object to be plotted

     ...: Unused

Value:

     A ggplot2 object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:56:08.190

If the argument names need different descriptions, it is acceptable to document the separate methods in separate files. This is not my opinion, it is how they do it in the R source code. And if they do it, it must be right. Look at the documentation pages for the package "stats". Note there are separate files for predict.arima, predict.gls, and so forth.

In the R source, there are several different files for print methods. Observe:

```
$ find . -name "print*.Rd"
./base/man/print.Rd
./base/man/print.dataframe.Rd
./base/man/print.default.Rd
./stats/man/print.power.htest.Rd
./stats/man/printCoefmat.Rd
./stats/man/print.ts.Rd
./tools/man/print.via.format.Rd` 
```

I do not agree with the previous poster who suggested that you should re-name the arguments if they need different descriptions. That under-cuts the object-oriented idea of polymorphism, which encourages us to not proliferate different names unless necessary.

# grails - grails .removeFrom 当对象存在于类中的其他位置时

> ID：10095530
> 
> 赞同：0
> 
> 时间：2012-04-10T19:55:46.657
> 
> 标签：grails, grails-orm, has-many, removechild

所以基本上我有两个类：

```
Class User {
  String Name
}
Class Project {
  User requestedBy
    static hasMany =
    [
      assignedTo: User  
    ]
} 
```

现在，我可以将 requestedBy 设置为 User 1。我也可以执行 Project.addToAssignedTo(User 1)。

当我想将用户从已分配到的用户中删除时，问题就出现了，因为它们已经作为请求者存在。我可以毫无问题地删除其他用户：

Project.removeFromAssignedTo(User 1).save(failOnError: true, flush: true)

我没有收到任何错误，只是没有删除数据。任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:41:48.653

当为同一个类定义多个关系时，您应该定义双向关系，并[使用该`mappedBy`属性](http://grails.org/doc/latest/ref/Domain%20Classes/mappedBy.html)来定义该关系的双方：

```
class User {
  String Name

  hasMany = [requestedProjects: Project, assignedProjects: Project]

}
class Project {
  User requestedBy
    static hasMany =
    [
      assignedTo: User  
    ]

    static mappedBy = [requestedBy: 'requestedProjects', assignedTo: 'assignedProjects']

} 
```

希望这可以解决您的问题。

# javascript - ES5：一旦所有项目都用 forEach 回调，就返回父函数

> ID：10095531
> 
> 赞同：0
> 
> 时间：2012-04-10T19:55:51.750
> 
> 标签：javascript, asynchronous, for-loop, ecmascript-5

我正在考虑使用 ES5 的新[Array.forEach()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)。我相信每个项目的回调应该并行执行。我想要一个函数在处理完所有值后返回。

```
// I'd like to make parent_function return a new array with the changed items.
function parent_function(array_of_things) {
    new_array = []
    array_of_things.forEach( function(thing) {
        new_array.push('New '+thing)
        if ( new_array.length === array_of_things.length ) {
            // OK we've processed all the items. How do I make parent_function return the completed new_array? 
            return new_array
        }
    })
} 
```

**我怀疑这可能是错误的方法**：因为 parent_function 可能在每个回调被触发之前完成。在这种情况下，**触发自定义事件**（由我们处理完所有项目后生成的任何需要的数据来处理）可能是最好的方法。但是我在 MDC 文档中没有找到任何提及。

但我对 JS 还很陌生，希望得到一些同行评审来确认！

**编辑：看起来 forEach() 毕竟是同步的。**之后我记录了结果数组并看到不一致的结果——有时是两个项目，有时是四个项目，等等，这让我觉得它是异步的。如果你正在阅读这篇文章并有类似的行为，我建议你阅读这篇[关于 Chrome 数组日志记录中的问题的文章](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:14:05.960

The forEach() call is synchronous, you can just return the new Array when the forEach() is finished:

```
function parent_function(array_of_things) {
  var new_array = [];
  array_of_things.forEach(function(thing) {
    new_array.push('New '+thing);
  });
  return new_array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:01:36.007

不，所有这些迭代器函数都是同步的。这意味着，回调一个接一个地执行下一个项目，然后最终`forEach()`返回（并返回未定义）。

如果您想要`new_array`每个回调调用的结果，您可以查看[`map()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map).

# magento - Magento - 可配置产品的自定义选项不显示在管理员中

> ID：10095533
> 
> 赞同：1
> 
> 时间：2012-04-10T19:55:59.503
> 
> 标签：magento

我在 Magento 1.6.2.0 版中设置了可配置的产品，并带有项目颜色或设计的自定义选项。

在前端，这显示并完美运行，但是当您转到结帐页面时，您看不到您选择的自定义选项，并且在管理员和发票电子邮件中也没有显示自定义选项，因此无法为客户完成订单.

您可以在我们的网站上查看示例：http: [//tinyurl.com/cns5sph](http://tinyurl.com/cns5sph)

如果您在哪里选择绿色的 5 包，我们在结帐时和管理员中看到的就是商品名称，即。eco 多色 5 件装，但没有显示额外的自定义颜色选项。

即使更新到最新版本的 Magento ver.1.6.2.0 我仍然遇到这个问题。

有任何想法吗..？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:33:53.207

您是否在 Magento 的“内容管理系统”中创建了这些额外的选项，或者您是否添加了一些代码来实现这一点？

Magento 对您如何创建产品线非常挑剔。在大多数情况下，您可以对产品进行分组或设置一些额外的选项。在这种情况下，您可以创建一个产品，即绿灯笼，并制作一组包含 5 个、10 个或更多灯笼的新产品。

# iphone - 将应用程序从 iPhone 迁移到 iPad - 不同的视图控制器层次结构

> ID：10095535
> 
> 赞同：0
> 
> 时间：2012-04-10T19:56:09.700
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我已经搜索过这个问题，但我什么也没找到，所以我希望这个问题不会重复。

我有一个完整的 iPhone 应用程序。在这个应用程序上，我有两个这样的视图控制器： ![MainStoryboard-iPhone.storyboard](../Images/f002d8f77509a1207d50278c6dc9e680.png)

收藏夹由 控制`IVFavouritesViewController`，动词列表由 控制`IVFirstViewController`。我想在单个 iPad 视图控制器上做同样的事情，如下所示：

![MainStoryboard-iPad.storyboard](../Images/1b8476588e241eb50ca5c96ac0bb3cbd.png)

如您所见，我有两个表格视图，还有一个 UISearchBar，就像 iPhone 故事板上的一样。所以我想在 iPad 上的同一个视图上使用 iPhone viewControllers，尽可能少地改变它们。最好的方法是什么？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:47:12.303

好吧，你可以制作第三个 View 控制器，它就像另外两个的容器一样。它只有两个子视图，其中填充了来自两个现有控制器的视图。

# android - 摄像机活动不适用于示例代码

> ID：10095539
> 
> 赞同：0
> 
> 时间：2012-04-10T19:56:27.647
> 
> 标签：android, camera, illegalargumentexception

我正在尝试使用默认相机应用程序使用意图处理记录/拍照，但似乎无法让默认代码正常工作。[http://developer.android.com/guide/topics/media/camera.html](http://Android%20Delevopers%20%7C%20Camera)

此代码适用于冰淇淋三明治，但适用于 Gingerbread (2.3) 尝试录制视频时，图像/预览被冻结，当我尝试重新拍摄视频时，它崩溃。

从堆栈跟踪来看，它似乎确实支持视频格式，但它在文档中明确支持它......

任何帮助或想法将不胜感激。:)

我的代码：

```
public class CameraInterface {
    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;

    public static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    public static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;

    private static Uri fileUri;

    public static void takePicture(Activity activity){
        // create Intent to take a picture and return control to the calling application
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

        // start the image capture Intent
        activity.startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }

    public static void takeVideo(Activity activity){
        //create new Intent
        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name

        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); // set the video image quality to high

        // start the Video Capture Intent
        activity.startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);
    }

    /** Create a file Uri for saving an image or video */
    private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }

    /** Create a File for saving an image or video */
    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        } else if(type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "VID_"+ timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }
} 
```

堆栈跟踪：

```
 E/videocamera(17373)    Couldn't view video file   ///mnt/sdcard/Pictures/MyCameraApp/VID_20120410_151830.mp4              
 E/videocamera(17373)    android.content.ActivityNotFoundException   No Activity found to handle Intent { act=android.intent.action.VIEW dat=file   ///mnt/sdcard/Pictures/MyCameraApp/VID_20120410_151830.mp4 }            
 E/videocamera(17373)       at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java    1409)           
 E/videocamera(17373)       at android.app.Instrumentation.execStartActivity(Instrumentation.java   1379)           
 E/videocamera(17373)       at android.app.Activity.startActivityForResult(Activity.java    2827)           
 E/videocamera(17373)       at android.app.Activity.startActivity(Activity.java 2933)           
 E/videocamera(17373)       at com.android.camera.VideoCamera.startPlayVideoActivity(VideoCamera.java   488)            
 E/videocamera(17373)       at com.android.camera.VideoCamera.onClick(VideoCamera.java  501)            
 E/videocamera(17373)       at android.view.View.performClick(View.java 2485)           
 E/videocamera(17373)       at android.view.View$PerformClick.run(View.java 9080)           
 E/videocamera(17373)       at android.os.Handler.handleCallback(Handler.java   587)            
 E/videocamera(17373)       at android.os.Handler.dispatchMessage(Handler.java  92)         
 E/videocamera(17373)       at android.os.Looper.loop(Looper.java   130)            
 E/videocamera(17373)       at android.app.ActivityThread.main(ActivityThread.java  3683)           
 E/videocamera(17373)       at java.lang.reflect.Method.invokeNative(Native Method)             
 E/videocamera(17373)       at java.lang.reflect.Method.invoke(Method.java  507)            
 E/videocamera(17373)       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java   839)            
 E/videocamera(17373)       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java  597)            
 E/videocamera(17373)       at dalvik.system.NativeStart.main(Native Method)                
 W/dalvikvm(17373)   threadid=1  thread exiting with uncaught exception (group=0x40015560)              
 E/AndroidRuntime(17373)     FATAL EXCEPTION     main               
 E/AndroidRuntime(17373)     java.lang.IllegalArgumentException  Unknown URL file   ///mnt/sdcard/Pictures/MyCameraApp/VID_20120410_151830.mp4          
 E/AndroidRuntime(17373)        at android.content.ContentResolver.delete(ContentResolver.java  688)            
 E/AndroidRuntime(17373)        at com.android.camera.VideoCamera.deleteCurrentVideo(VideoCamera.java   1090)           
 E/AndroidRuntime(17373)        at com.android.camera.VideoCamera.onClick(VideoCamera.java  497)            
 E/AndroidRuntime(17373)        at android.view.View.performClick(View.java 2485)           
 E/AndroidRuntime(17373)        at android.view.View$PerformClick.run(View.java 9080)           
 E/AndroidRuntime(17373)        at android.os.Handler.handleCallback(Handler.java   587)            
 E/AndroidRuntime(17373)        at android.os.Handler.dispatchMessage(Handler.java  92)         
 E/AndroidRuntime(17373)        at android.os.Looper.loop(Looper.java   130)            
 E/AndroidRuntime(17373)        at android.app.ActivityThread.main(ActivityThread.java  3683)           
 E/AndroidRuntime(17373)        at java.lang.reflect.Method.invokeNative(Native Method)             
 E/AndroidRuntime(17373)        at java.lang.reflect.Method.invoke(Method.java  507)            
 E/AndroidRuntime(17373)        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java   839)            
 E/AndroidRuntime(17373)        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java  597)            
 E/AndroidRuntime(17373)        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:22:23.727

原来这是姜饼上的相机类的问题，结果只是返回 null。不过，我在这里找到了解决方法。

[谢谢mister.com/2012/03/16/android_null_data_camera_intent](http://thanksmister.com/2012/03/16/android_null_data_camera_intent/)

# objective-c - 控制程序执行顺序的技术

> ID：10095540
> 
> 赞同：3
> 
> 时间：2012-04-10T19:56:27.880
> 
> 标签：objective-c, arrays, oop, design-patterns

我正在与代码“执行顺序”的概念搏斗，到目前为止我的研究还不够。我不确定我的措辞是否不正确，这个概念可能有更合适的术语。如果有人能阐明我下面的各种绊脚石，我将不胜感激。

我了解，如果您一个接一个地调用一个方法：

```
[self generateGrid1];
[self generateGrid2]; 
```

两种方法都运行，但 generateGrid1 不一定要等待 generateGrid2。但如果我需要它怎么办？假设 generateGrid1 进行一些复杂的计算（需要未知的时间）并填充 generateGrid2 用于其计算的数组？每次触发事件时都需要执行此操作，而不仅仅是一次初始化。

我需要一种按顺序调用方法的方法，但有一些方法等待其他方法。我研究过回调，但在我见过的所有示例中，这个概念总是与代表结合在一起。

我也不确定何时确定我不能合理地期望一行代码被及时解析以供使用。例如：

```
int myVar = [self complexFloatCalculation];
if (myVar <= 10.0f) {} else {} 
```

我如何确定某些事情是否需要足够长的时间来实施检查“在我开始我的事情之前是否完成了其他事情”。只是反复试验？

或者，也许我将一个方法作为另一个方法的参数传递？它是否在执行方法之前等待对参数进行评估？

```
[self getNameForValue:[self getIntValue]]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:30:00.243

> 我了解，如果您一个接一个地调用一个方法：
> 
> ```
> [self generateGrid1];
> [self generateGrid2]; 
> ```
> 
> 两种方法都运行，但 generateGrid1 不一定要等待 generateGrid2。但如果我需要它怎么办？

错误的。`generateGrid1`将运行，然后`generateGrid2`将运行。这种顺序执行是过程语言的基础。

从技术上讲，编译器可以重新排列语句，但*前提*是最终结果与原始结果无法区分。例如，看下面的代码：

```
int x = 3;
int y = 4;

x = x + 6;
y = y - 1;

int z = x + y;
printf("z is %d", z); 
```

`x+6`不管是先发生还是先发生，都无关紧要`y-1`。*所写*的代码除了计算之外没有使用任何一个中间值`z`，这可以按任何顺序发生。因此，如果编译器由于某种原因可以通过重新排列这些行来生成更高效的代码，则允许这样做。

但是，您永远无法看到这种重新排列的效果，因为一旦您尝试使用其中一个中间值（例如，记录它），编译器就会识别出该值正在被使用，并得到摆脱会破坏您的日志记录的优化。

所以真的，编译器不需要按照提供的顺序执行你的代码；它只需要生成与您提供的代码**功能相同的代码。**这意味着如果您将调试器附加到使用适当优化编译的程序，您实际上*可以*看到这些优化的效果。这会导致各种令人困惑的事情，因为调试器正在跟踪的源代码不一定与编译器生成的编译代码的代码逐行匹配。这就是为什么对于程序的调试版本几乎总是关闭优化的原因。

**无论如何**，关键是编译器只有在可以证明没有效果的情况下才能进行这些技巧。Objective-c 方法调用是动态绑定的，这意味着编译器绝对不能保证在调用该方法时在运行时实际会发生什么。由于编译器无法保证会发生什么，因此编译器永远不会重新排序 Objective-C 方法调用。但是，这又回到了我之前所说的相同原则：编译器可能会更改执行顺序，但前提是用户完全察觉不到。

换句话说，不要担心。您的代码将始终从上到下运行，每个语句都在等待它之前的语句完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T20:06:02.843

通常，您在所描述的样式中看到的大多数方法调用都是*同步*的，这意味着它们将具有您想要的效果，按照语句编码的顺序运行，其中第二次调用只会在第一次调用完成*后*运行，并且返回。

此外，当一个方法接受参数时，它的参数在方法被调用*之前被评估。*

# java - 从 Clojure 调用的 App Engine URLFetch 服务会产生 AccessControlException

> ID：10095541
> 
> 赞同：1
> 
> 时间：2012-04-10T19:56:27.960
> 
> 标签：java, google-app-engine, ssl, clojure

我正在尝试在 Clojure 中构建一个简单的 Web 小部件，它应该获取 Picasa 提要，从那里检索缩略图 URL，并返回将插入页面的 HTML（使用 JQuery AJAX 调用）。Picasa 提要有一个 https://... 网址。当我使用 mvn jetty:run 在本地 Jetty 实例中运行它时，一切正常；但是，当我尝试在本地 GAE 实例 (mvn gae:run) 中运行时，它会因 AccessControlException 而失败。我已经阅读了 GAE 文档，但这表明对于来自 Java 的 URLFetch，应该只使用普通的 Java URLConnection 类，Google 将在其中提供自己的实现。据我所见，我只使用 Clojure/Java 互操作，完全按照他们的示例进行操作。

Google 示例代码如下所示：

```
import java.net.URL;
// (other imports omitted)
try {
    URL url = new URL("http://www.example.com/atom.xml");
    BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
    String line;
    while ((line = reader.readLine()) != null) {
        // ...
    } 
```

有趣的是，这是直接在 URL 上调用 openStream，尽管文档在其他地方提到使用 UrlConnection。我都试过了，但结果是一样的。我相应的 Clojure 代码，使用 openConnection：

```
 (if (.startsWith str-url "https://picasaweb.google.com")
    (let [feed-url (java.net.URL. str-url)
          connection (.openConnection feed-url)
          xmltags (xml-seq (parse (.openStream connection)))]
  ; ... 
```

当我在 GAE 中运行它时，我得到以下堆栈跟踪（截断）

```
java.lang.ExceptionInInitializerError
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at     sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122) 
```

最后在底部：

```
Caused by: java.security.AccessControlException: access denied     (java.security.SecurityPermission getProperty.ssl.KeyManagerFactory.algorithm)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:252)
    at java.security.Security.getProperty(Security.java:725)
    at org.eclipse.jetty.util.ssl.SslContextFactory.<clinit>(SslContextFactory.java:92)
    ... 74 more 
```

我一直在谷歌搜索，看看是否应该在 appengine-web.xml 或其他地方添加任何设置，但我什么也没看到。我读到的所有内容都告诉我这应该“正常工作”，但事实并非如此。欢迎任何建议；如果需要，我可以发布完整的源代码或完整的堆栈跟踪，尽管我认为以上内容几乎是相关的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:04:24.373

[`openStream()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URL.html#openStream%28%29)是`openConnection().getInputStream()`,`openConnection()`返回的简写`URLConnection`。

# c++ - C++ 模板参数作为基类

> ID：10095542
> 
> 赞同：2
> 
> 时间：2012-04-10T19:56:33.750
> 
> 标签：c++, templates

为什么派生类在模板化时不允许访问其受保护的基类成员？

```
class MyBase {
protected:
    int foo;
};

template<typename Impl>
class Derived : public Impl {
public:
    int getfoo() {
            return static_cast<Impl*>(this)->foo;
    }
}; 
```

编译器抱怨 foo 受到保护。为什么？

```
error: int MyBase::foo is protected 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T20:02:17.677

您正在`foo`通过 a`MyBase*`而不是 a访问`Derived<MyBase>*`。您只能通过您自己的类型访问受保护的成员，而不是通过基本类型。

试试这个：

```
int getfoo() {
        return this->foo;
} 
```

从 C++ 2003 标准 11.5/1 开始`[class.protected]`：“当派生类的朋友或成员函数引用基类的受保护的非静态成员函数或受保护的非静态数据成员时……访问必须通过指向、引用、或派生类本身的对象（或从该类派生的任何类）”

# sql - 我可以使用时区在 SQL Server 视图中查询 DateTime 吗？

> ID：10095543
> 
> 赞同：2
> 
> 时间：2012-04-10T19:56:35.430
> 
> 标签：sql, sql-server-2008-r2

我在 SQL Server 2008 R2 中有一个 DateTime 字段。我有一些查询该字段的视图，例如

```
SELECT * 
FROM table1 
WHERE CONVERT(DATE, TransactionDate) = 'April 10 2012'. 
```

服务器时间设置为德克萨斯时间，我想使用 EST 查询这些数据。换句话说

```
SELECT * 
FROM Table1
WHERE TransactionDate = 'April 10 2012 Eastern Standard Time' 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:58:29.833

试一试。

"DATETIMEOFFSET 数据类型

目前在列中保存日期和时间时，不会指示该日期和时间属于哪个时区。当您处理包括具有不同时区的多个不同国家的数据时，这一点尤其重要。新数据类型`DATETIMEOFFSET`定义了一个日期，该日期与具有时区意识并基于 24 小时制的一天中的时间相结合。以下脚本说明了`DATETIMEOFFSET`数据类型的用法。

```
DECLARE @dt DATETIMEOFFSET(0)

SET @dt = '2007-10-29 22:50:55 -1:00'

DECLARE @dt1 DATETIMEOFFSET(0)

SET @dt1 = '2007-10-29 22:50:55 +5:00'

SELECT DATEDIFF(hh,@dt,@Dt1) 
```

[http://www.sql-server-performance.com/2007/datetime-2008/](http://www.sql-server-performance.com/2007/datetime-2008/)

# html - 表和浮动

> ID：10095546
> 
> 赞同：3
> 
> 时间：2012-04-10T19:56:46.310
> 
> 标签：html, css, html-table, css-float

我在表格中遇到浮动标题的问题。我的标题应该是`colspan="2"`，但是当我设置`float:left`为 td 元素 "header" 时，colspan 停止工作。我想要这样的东西：

```
+-------------------------------------------------+
|Header headher header header                     |
+-------------------------------------------------+
|Something     | Something                        |
+-------------------------------------------------+ 
```

但我明白了：

![在此处输入图像描述](../Images/48bc12ef2a336e6dcfb3ecb7a2e8ff9c.png)

我的代码：

```
<table border="1">
    <thead>
        <tr>
            <th colspan="2" style="float: left;">Header header</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Something</td>
            <td>Something</td>
        </tr>

    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T20:04:58.973

不使用`float:left`，使用`text-align:left`。

```
<table border="1">
    <thead>
        <tr>
            <th colspan="2" style="text-align: left;">Header header</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Something</td>
            <td>Something</td>
        </tr>

    </tbody>
</table> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UPxQr/)**。

# events - 制作插件时我可以监听来自 Notepad++ 的事件吗

> ID：10095547
> 
> 赞同：2
> 
> 时间：2012-04-10T19:56:48.113
> 
> 标签：events, plugins, notepad++

我似乎无法找到有关这是否可能的信息，但我想知道是否可以让 notepad++ 插件监听来自 notepad++/scintilla 应用程序的事件。如果是这样，这些事件是什么，我在哪里可以找到它们的列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:01:14.653

我找到了答案，您使用所有插件模板附带的 beNotified(...) 方法来“监听”事件/通知。

# jquery - jQuery - 单击一个 div，关闭所有其他问题

> ID：10095551
> 
> 赞同：1
> 
> 时间：2012-04-10T19:57:16.480
> 
> 标签：jquery, html, css

我有一组 div，当我单击一个时，它应该打开那个特定的，并关闭所有其他打开的。如果有的话，应该只有一个开放的 div。难以排除我点击关闭的那个。有人有什么想法吗？Javascript和HTML遵循：

```
 $('.m_box').hide();
    $('.a_box').hide();

    $('#m2012').click(function(){
        //$('.m_box').hide();
        $('#m2012_box').toggle();
    });

    $('#m2011').click(function(){
        //$('.m_box').hide();
        $('#m2011_box').toggle();
    });

    $('#m2010').click(function(){
        //$('.m_box').hide();
        $('#m2010_box').toggle();
    });

    <div id="m2012" style="float:left; margin:0 69px 0 0; width:15px; height:19px; cursor:pointer;">
        <div id="m2012_box" class="m_box" style="float:left; display:block; position:absolute; width:308px; height:351px; top:20px; margin-left:-37px; color:#ffffff; background:url('images/graph/list_background_left.png'); z-index:2000;">
            <div class="list_header">
                <p>2012</p>
            </div>
            <div class="items">
                <div class="list_item">
                    Milestone 1
                </div>
                <div class="list_item">
                    Milestone 2
                </div>
                <div class="list_item">
                    Milestone 3
                </div>
                <div class="list_item">
                    Milestone 4
                </div>
                <div class="list_item">
                    Milestone 5
                </div>
                <div class="list_item">
                    Milestone 6
                </div>
            </div>
        </div>
    </div>

    <div id="m2011" style="float:left; margin:0 69px 0 0; width:15px; height:19px; cursor:pointer;">
        <div id="m2011_box" class="m_box" style="float:left; display:block; position:absolute; width:308px; height:351px; top:20px; margin-left:-37px; color:#ffffff; background:url('images/graph/list_background_left.png'); z-index:2000;">
            <div class="list_header">
                <p>2011</p>
            </div>
            <div class="items">
                <div class="list_item">
                    Milestone 1
                </div>
                <div class="list_item">
                    Milestone 2
                </div>
                <div class="list_item">
                    Milestone 3
                </div>
            </div>
        </div>
    </div>

    <div id="m2010" style="float:left; margin:0 69px 0 0; width:15px; height:19px; cursor:pointer;">
        <div id="m2010_box" class="m_box" style="float:left; display:block; position:absolute; width:308px; height:351px; top:20px; margin-left:-37px; color:#ffffff; background:url('images/graph/list_background_left.png'); z-index:2000;">
            <div class="list_header">
                <p>2010</p>
            </div>
            <div class="items">
                <div class="list_item">
                    Milestone 1
                </div>
                <div class="list_item">
                    Milestone 2
                </div>
                <div class="list_item">
                    Milestone 3
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:04:55.247

尝试：

```
$('.list_header').click(function() {
    $(this).parent().parent().siblings().find('.items').hide();
    $(this).siblings().show();    
});​ 
```

证明：http: [//jsfiddle.net/iambriansreed/J97Kq/](http://jsfiddle.net/iambriansreed/J97Kq/)

为了清楚起见，我的小提琴删除了您的内联 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:04:16.367

要从选择器中排除单击的 div 的孩子（我看到的唯一），您可以使用`not`：

```
$('#m2012, #m2011, #m2010').click(function() {
    $('.m_box').not($(this).children().show()).hide();
}); 
```

UPD：修改了代码，以便它打开孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:02:13.857

您应该使用 common 类和 visible 来选择所有并首先隐藏它们。

```
$('.m_box').click(function(){
    $('.m_box:visible').hide();
    $(this).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:02:27.683

有两个很棒的预建 jQuery 库可以处理这个问题：

*   [jQuery 工具](http://jquerytools.org/)（特别是[选项卡](http://jquerytools.org/demos/tabs/index.html)功能，可以作为[手风琴](http://jquerytools.org/demos/tabs/accordion.html)实现）
*   [jQuery UI](http://jqueryui.com)，它也有一个[手风琴](http://jqueryui.com/demos/accordion/)功能

jQuery 工具将提供最大的灵活性，并且实现这一点应该相对简单。jQuery UI 在某种程度上强制了某种样式，因此如果您想使用库，工具可能是正确的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T20:08:21.050

你应该使用一个选择器来关闭所有具有特定索引的 div，这个选择器关闭所有索引大于 1 的 div。

```
 $('#m2012').click(function(){

 $('#m2012_box').toggle();

      //index a integer value

     $("div:gt(1)").hide();

}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-10T20:01:24.200

您可以尝试在单击事件时使用 jQuery 淡入和淡出 div。这是一个例子；

```
$('#clickme').click(function() {
  $('#book').fadeOut('slow', function() {
    // Animation complete.
  });
}); 
```

这意味着，当 div click me 被点击时，它会在 book div 中淡出或淡出

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-10T20:00:19.173

您可以关闭其他 div 检查它们是否使用 :visible 选择器[http://api.jquery.com/visible-selector/打开](http://api.jquery.com/visible-selector/)

# java - 将静态属性添加到构造函数属性

> ID：10095558
> 
> 赞同：-1
> 
> 时间：2012-04-10T19:57:43.270
> 
> 标签：java, static

问题如下：

> （储蓄账户类）创建类 SavingsAccount。使用静态变量年利率来存储所有账户持有人的年利率。该类的每个对象都包含一个私有实例变量 SavingBalance，指示储蓄者当前的存款金额。提供方法 calculateMonthlyInterest 以通过将 SavingBalance 乘以 AnnualInterestRate 除以 12 来计算每月利息——这个利息应该添加到 Savings-Balance 中。提供一个静态方法 modifyInterestRate 将年利率设置为新值。编写一个程序来测试类 SavingsAccount。实例化两个 SavingAccount 对象，saver1 和 saver2，余额分别为 $2000.00 和 $3000.00。将年利率设置为 4%，然后计算 12 个月的每个月的利息并打印两个储户的新余额。接下来，将年利率设置为 5%，计算下个月的利息并打印两个储蓄者的新余额。

我解决了这一切，但余额并没有增加——它保持不变。它应该随着年利率的每次变化而增加（至少，这是我所理解的）。

```
class SavingsAccount
{
    static double annualInterestRate;
    private double savingsBalance;

    public SavingsAccount(double balance)
    {
        savingsBalance = balance;
    }

    public double calculateMonthlyInterest()
    {
        return (savingsBalance*annualInterestRate)/12;
    }

    public static void modifyInterestRate(double rate)
    {
        annualInterestRate = rate;
    }

    public static double getannualInterestRate(){return annualInterestRate;}

    public double getsavingsBalance(){return savingsBalance;}

}

public class SavingsTest
{
    public static void main(String args[])
    {
        SavingsAccount saver1 = new SavingsAccount(2000.0);
        SavingsAccount saver2 = new SavingsAccount(3000.0);

        SavingsAccount.modifyInterestRate(4);

        System.out.printf("Balance for Saver1 = %.2f\nBalance for Saver2 = %.2f\nInterest Rate = %.2f\n\n",saver1.getsavingsBalance()+saver1.calculateMonthlyInterest(),saver2.getsavingsBalance(),SavingsAccount.getannualInterestRate());

        SavingsAccount.modifyInterestRate(5);

        System.out.printf("New Balance for Saver1 = %.2f\nNew Balance for Saver2 = %.2f\nInterest Rate = %.2f\n\n",saver1.getsavingsBalance(),saver2.getsavingsBalance(),SavingsAccount.getannualInterestRate());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:03:13.837

您没有修改`savingsBalance`此代码中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:09:44.827

```
public double addMonthlyInterest()     {    
  savingsBalance += (savingsBalance*annualInterestRate)/12;
  return savingBalance;     
} 
```

这将返回新的余额和“增量”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:11:01.403

在您的第一个打印语句中，对于第一个参数，您在计算每月利息并将它们加在一起之后计算余额，并且没有将新值设置为类成员 SavingBalance 的值。

在您的第二个打印语句中，由于您没有通过设置器将计算值设置回类成员，因此它只是打印出实例化类的原始值。

附带说明，不要在打印语句中进行内联计算。它们令人困惑，任何人都不容易阅读。一个好的方法是在方法中初始化本地成员，并使用它们进行计算和打印本地成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T04:21:09.250

只是想分享我的答案。

公共类 SavingsAccount {

```
private static float annualInterestRate = 0f;
private float savingsBalance;

public SavingsAccount(float balance) {
    savingsBalance = balance;
}

public static void setAnnualInterestRate(float t) {
    if (t >= 0 && t <= 1)
        annualInterestRate = t;
    else
        throw new IllegalArgumentException("Annual interest rate should be between 0 and 1");
}

private float calculateMonthlyInterest() {
    return savingsBalance * annualInterestRate / 12;
}

public float getSavingsBalance() {
    return savingsBalance + calculateMonthlyInterest();
}

public float getAnnualInterestRate(){
    return annualInterestRate;
}

public String toString() {
    return String.format("Balance: %.2f", getSavingsBalance());
} 
```

}

主要是

```
 SavingsAccount s1 = new SavingsAccount(2000);
    SavingsAccount s2 = new SavingsAccount(3000);
    SavingsAccount.setAnnualInterestRate(0.04f);

    System.out.println("S1: " + s1);
    System.out.println("S2: " + s2);

    SavingsAccount.setAnnualInterestRate(0.05f);
    System.out.println("S1: " + s1);
    System.out.println("S2: " + s2); 
```

# xpages - 如何覆盖或添加到 XPages NotesXspDocument 事件？

> ID：10095559
> 
> 赞同：3
> 
> 时间：2012-04-10T19:57:56.327
> 
> 标签：xpages

我有一个自定义控件，我将数据源传递到其中。customcontrol.xsp-config 文件属性：

```
<property>
  <description>The src Datasource source data (WIP)</description>
  <display-name>Source Datasource</display-name>
  <property-name>srcDatasource</property-name>
  <property-class>com.ibm.xsp.model.domino.DominoDocumentData</property-class>
  <property-extension>
    <required>true</required>
    <designer-extension>
      <category>1\. Workflow Parameters</category>
      <editor>com.ibm.workplace.designer.property.editors.dataSourcePicker</editor>
    </designer-extension>
  </property-extension>
</property> 
```

我想`querySaveDocument`使用自定义控件`beforePageLoad`事件中的代码向此数据源添加一些逻辑。此逻辑将向文档添加读者和作者姓名项目以及其他一些控制值。

如何将我的代码添加到此事件中？

提前致谢...

/新人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:25:35.110

您可以在这里找到解决方案：

[http://dontpanic82.blogspot.com/2010/03/xpages-dynamically-binding-document.html](http://dontpanic82.blogspot.com/2010/03/xpages-dynamically-binding-document.html)

归功于汤米·瓦兰德...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:28:11.683

我一直在阅读有关 xpage 的 computeWithForm 属性的信息。可以设置为 onload、onsave 或两者。

来自掌握 Xpages 书：

> 对于 XPages Domino Document 数据源，如果设置了*computeWithForm*，那么表单中指定的所有字段都将附加到正在创建的文档中。执行任何用于计算默认值的公式，并将结果存储在相应的字段中。

也许它适合您的需求

编辑：似乎这篇文章有一个错误：

> [http://www.thenorth.com/apblog4.nsf/0/17B0E8334B2DCA68852579B400639D62](http://www.thenorth.com/apblog4.nsf/0/17B0E8334B2DCA68852579B400639D62)

不确定它是否由 ibm 修复，是否有解决方法。

Edit2：不确定，但这可能会有所帮助 [来自 Xsnippets.org](http://openntf.org/XSnippets.nsf/snippet.xsp?id=save-datasource-fire-querysavepostsave-events)

这是对另一个问题的[回答。](http://openntf.org/XSnippets.nsf/snippet.xsp?id=save-datasource-fire-querysavepostsave-events)

# haskell - 为 MongoDB 文档添加 NFData 实例

> ID：10095569
> 
> 赞同：0
> 
> 时间：2012-04-10T19:58:45.463
> 
> 标签：haskell

我正在尝试与 forkIO 同时运行一些计算，并且在每个线程中我想编写一个 MongoDB [Document](http://hackage.haskell.org/packages/archive/bson/0.1.7/doc/html/Data-Bson.html#t%3aDocument)。因为我希望在线程上实际完成计算，所以我想完全评估这个文档，所以我使用了 Strict MVars。

但是，当我尝试这个时，我得到

```
No instance for (NFData Field)
  arising from a use of `putMVar' 
```

这意味着（我假设）我需要为 Document 添加一个实例声明才能对其进行评估。

不幸的是，由于 Document 的结构有点复杂，我不知道该怎么做。

我通常不熟悉 NFData 以及如何制作它的实例，所以我真的不知道如何开始这样做。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T22:27:51.407

编写一个 的实例`NFData`应该不会太难，但是对于具有复杂结构的类型来说，它可能会非常重复。由于您的`Document`类型是 的同义词`[Field]`，并且`Control.DeepSeq`已经导出`instance NFData a => NFData [a]`，因此您确实需要`Field`.

使用该[`deepseq-th`](http://hackage.haskell.org/package/deepseq-th-0.1.0.2)包，您可以使用 Template Haskell 自动派生实例，从而节省您的繁琐：

```
{-# LANGUAGE TemplateHaskell #-}

import Control.DeepSeq.TH

import Data.Bson

deriveNFData ''Field 
```

那应该这样做。

# oracle - 如何获得长期运行的报告当前状态？

> ID：10095573
> 
> 赞同：1
> 
> 时间：2012-04-10T19:58:55.153
> 
> 标签：oracle, oas, oraclereports

在 Oracle 应用服务器 10g 中运行长时间运行的报告时，报告的状态存在于 OAS 管理控制台中，类似于“25 of 3225 Pages completed”。

我如何从 OAS 获得这个值，以便能够以 oracle 形式将其显示给用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:32:10.293

不确定，但它可能存储在 v$session_longops 中。有关示例，请参见[此处](http://www.dba-oracle.com/longops.htm)。

一些 oracle 代码写入 V$session_longops，但您也可以使用一些提供的 PLSQL 函数将其编码到您自己的应用程序中。

如果 OAS 或报告本身正在向此处写入内容，您可以从 oracle 表单中获取该信息，以便在报告运行时显示给用户。

在上面的代码运行的同时，可以通过如下方式查询到 v$session_longops 视图的内容。

```
COLUMN opname FORMAT A20
COLUMN target_desc FORMAT A20
COLUMN units FORMAT A10

SELECT
  opname,
 target_desc,
  sofar,
  totalwork,
  time_remaining,
  units
FROM  
  v$session_longops 
```

下面列出了此 v$session_longops 查询的预期输出类型。

```
OPNAME               TARGET_DESC               SOFAR  TOTALWORK UNITS
-------------------- -------------------- ---------- ---------- ----
BATCH_LOAD           BATCH_LOAD_TABLE              3         10 rows 
```

# javascript - jQuery .pdf 函数未在 Joomla 中运行

> ID：10095574
> 
> 赞同：0
> 
> 时间：2012-04-10T19:58:56.667
> 
> 标签：javascript, jquery, pdf, joomla

我已经安装了简单的文件夹列表，它正在为我正在处理的网站输出菜单。我想要一个 jQuery 函数，它可以在新窗口中打开每个 .pdf，但它目前不起作用。

这是我的 jQuery

```
<script type="text/javascript">
jQuery(function($) {
    $('a[href$=".pdf"]').attr('target', '_blank');
}); 
</script> 
```

网址：[http ://www.thewatermansarms.net](http://www.thewatermansarms.net)

你能帮忙解释为什么它不工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:01:07.697

您应该在该代码块*之前*包含一个指向 jQuery 库的链接。

# android - Eclipse：不断收到“错误：应用程序需要 API 版本 15。设备 API 版本是 14 (Android 4.0.2)。”

> ID：10095583
> 
> 赞同：3
> 
> 时间：2012-04-10T19:59:43.467
> 
> 标签：android, eclipse, target

我一直在安装了 API 版本 15 的设备上测试 Android 应用程序。我现在必须切换到具有版本 14 的其他设备（三星 Galaxy Nexus，如果重要的话）。即使我将“项目构建目标”从 Google API 15 更改为 14，当我尝试时仍然收到以下消息在新设备上执行应用程序：

**错误：应用程序需要 API 版本 15。设备 API 版本是 14 (Android 4.0.2)。**

清理所有项目没有帮助。重新启动 Eclipse 没有帮助。我用 target=14 创建了一个简单的新测试应用程序，它运行良好。

为什么对旧项目的更改没有生效？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:06:16.027

你必须改变`minSdkVersion`你的`AndrodManifest.xml`. 有关详细信息，请参阅[此帖子](https://plus.google.com/108284392618554783657/posts/LaHVTVHoHRe)及其所基于的[博客条目](http://simonvt.net/2012/02/07/what-api-level-should-i-target/)。

# html - 画布项目未正确渲染

> ID：10095585
> 
> 赞同：2
> 
> 时间：2012-04-10T19:59:51.360
> 
> 标签：html, canvas, html5-canvas, draw

我已经定义了两个函数来渲染一个圆形和一个三角形。非常直接的东西。

```
function circle(offset, size){
  var color = $("#color option:selected").val();
  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");
  radius = size * 1;

  context.beginPath();
  context.arc(offset, 2, radius, 0, 2 * Math.PI, false);
  context.fillStyle = color;
  context.fill();
 }

 function triangle(offset, size){
  var color = $("#color option:selected").val();
  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");
  var width = size * 6;
  var height = size * 5;
  var padding = 0;

  // Draw a path
  context.beginPath();
  context.moveTo(offset + width/2, padding);
  context.lineTo(offset + width, height + padding);
  context.lineTo(offset, height + padding);
  context.closePath();

  // Fill the path
  context.fillStyle = color;
  context.fill();
} 
```

我已将画布添加到我的页面中：

```
<canvas id="canvas"></canvas> 
```

出于某种原因，我可以看到圆形和方形没有正确渲染。请参阅随附的屏幕截图。

![在此处输入图像描述](../Images/9c660c0ed5163d332a5d59ff822bb584.png)

![在此处输入图像描述](../Images/95a896a3ca784cea0df0bdbcd2f66f94.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:29:47.887

我几乎可以保证这是因为您使用 CSS 宽度和高度而不是`<canvas>`html 属性来设置画布的宽度和高度。

您需要在画布标签中定义宽度/高度：`<canvas width="500" height="500">`

或在代码中：

```
var canvas = document.getElementById("canvas");
canvas.width = 500;
canvas.height = 500; 
```

而不是CSS。如果你这样做：

`<canvas style="width: 500px; height: 500px;">`

然后你会有一个 300x150 的画布（默认大小），它被缩放/扭曲为 500x500，这几乎肯定是你得到的。

（我写了上面的手绘，所以可能有错字，但你明白了）

# android - 带有颜色的android简单列表视图

> ID：10095587
> 
> 赞同：1
> 
> 时间：2012-04-10T19:59:57.663
> 
> 标签：android, android-layout

我在一个活动中工作以显示字符串列表，就像这样：

```
 protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    String[] lKeys = new String[mKey.size()];
    int i = 0;
    if (lKeys != null) {
        for (Iterator<String> ite = mKey.iterator(); ite.hasNext();) {
            String element = ite.next();
            if (element.contains("Data")) {
                lKeys[i++] = element;
            } else {
                lKeys[i++] = element + ": " + mValue.get(element);
            }               
        }
    }
    //
    this.setTitle(mTitle);
    setListAdapter(new ArrayAdapter<String>(this,R.layout.popupactivity,lKeys)); 
```

用这个 xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tvResults"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="#000000"
    android:background="#ffffff"
    android:layout_marginLeft="5dp"
    android:textSize="12sp" 
    android:padding="5dp" >
</TextView> 
```

这很好用，但我需要在列表的行中添加一些颜色。谁能帮我？

真的感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:04:40.920

您可以通过扩展 SimpleAdapter 为 ListView 的每一行的背景添加不同的颜色，并覆盖 getView() 方法并将背景颜色应用于当前视图行。之后使用自定义适配器作为您的列表。

```
public class CustomList extends SimpleAdapter {
private int[] colors = new int[] { 0x30ADD8E6, 0x30800080 };

public CustomList(Context context, List<HashMap<String, String>> items, int resource, String[] from, int[] to) {
    super(context, items, resource, from, to);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
  View view = super.getView(position, convertView, parent);
  int colorPos = position % colors.length;
  view.setBackgroundColor(colors[colorPos]);
  return view;
}} 
```

下一步是使用 customList 适配器作为您的列表。像这样

```
myList = new CustomList (this,R.layout.lay,R.layout.grid_item,from,target); 
```

# javascript - jQuery change() 在页面加载时触发

> ID：10095588
> 
> 赞同：1
> 
> 时间：2012-04-10T19:59:59.940
> 
> 标签：javascript, jquery

此代码会在页面加载时触发，但不会在实际发生更改事件时触发。

```
jQuery('select#order_note_type').change(function() {
  //random code here
}); 
```

我必须补充一点，它不在`ready`方法内。我需要绑定吗？

**编辑**：我将代码更改为内部`$(document).ready()`并使用绑定，但我仍然让我的方法仅在页面加载时触发：

```
jQuery(document).ready(onReady);

function onReady() {
  jQuery('select#order_note_type').bind('change',showTrackingInfo);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:06:39.420

```
$(document).ready(function() {
   $('select#order_note_type').bind('change',showTrackingInfo); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:22:55.923

我有同样的问题。就我而言，这是因为我在更改事件代码之后触发了控件上的一些事件。因此，我建议您尝试将此更改事件移至脚本的末尾，并将此脚本最后包含在页面中。

# java - 聊天应用短信泡泡 ( android )

> ID：10095590
> 
> 赞同：0
> 
> 时间：2012-04-10T20:00:01.783
> 
> 标签：java, android, listview, sms, chat

我正在开发 android 聊天应用程序。我需要使用气泡来聊天短信。有没有这方面的工作示例。如果从事此类应用程序工作的人可以通过一些工作示例来指导我，那将非常有用。

我已经发送和接收短信，但我无法在气泡和列表视图中显示它，谁能指导我明确的步骤：我该怎么做，我需要多少活动，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:14:48.693

[here](http://thetechnib.blogspot.com/2010/12/android-tutorial-custom-adapter-for.html) is a tutorial to make one **note:** The images used in the bubble is in the 9 patch format you should read about it [here](http://developer.android.com/guide/developing/tools/draw9patch.html)

# c++ - 在 Arduino 环境中启用异常

> ID：10095591
> 
> 赞同：3
> 
> 时间：2012-04-10T20:00:05.830
> 
> 标签：c++, exception, ide, arduino

根据对有关 arduino 环境是否支持异常[的问题的回答](https://stackoverflow.com/questions/461836/arduino-c-code-can-you-use-virtual-functions-and-exceptions#answer-464097)，理论上可以在 Arduino 板上运行“异常”二进制文件。

我将如何更改我的 Arduino IDE 以允许这样做？具体来说，如何防止 IDE`-fno-exceptions`在调用编译器时包含该标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:41:54.560

Arduino IDE 传递`-fno-exceptions`给它使用的编译器 ( `avr-gcc`)。这样做是因为编译器的文档指定它是必需的（请参阅[http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_cplusplus](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_cplusplus)）。

由于编译器的正确运行需要此参数（正确或错误），因此 Arduino IDE 不提供更改此参数的方法。

不过，如果您想尝试删除此参数以查看它有什么效果，您需要编辑 Arduino 源代码（当前为[https://github.com/arduino/Arduino/blob/master/app/src中的第 589 行/processing/app/debug/Compiler.java](https://github.com/arduino/Arduino/blob/master/app/src/processing/app/debug/Compiler.java)）并自己重建IDE。

# android - 如何在 Android ScrollView 中获取页码或正确的位置

> ID：10095599
> 
> 赞同：0
> 
> 时间：2012-04-10T20:00:56.797
> 
> 标签：android, position, scrollview

我有一个包含两个 ImageView 的 LinearLayout。LinearLayout 在 ScrollView 内。当我滚动屏幕时，我想知道两个 ImageViews 相对于滚动的确切位置。getScrollY() 无法正常工作，因为 ImageViews 在 action_up 之后继续滚动，并且在这种情况下不会更新 getScrollY 中的值。我有这些信息来禁用或启用屏幕上的其他元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:09:56.590

如果您的 2 个视图相同/相似，则将它们添加到 ListView，然后您可以设置一个 OnScrollListener，它会告诉您视图何时滚动以及可见项的索引。

# python - CherryPy 索引路径

> ID：10095600
> 
> 赞同：0
> 
> 时间：2012-04-10T20:00:56.993
> 
> 标签：python, cherrypy

我有一个应用程序，其中`/index`路径具有特殊含义。我不希望 path`/`成为`/index`. 现在，当我访问时`/`，cherrypy 在内部将我重定向到`index`视图（对象方法）。

如何将路径路由`/`到除 之外的某个视图`index`？例如，就我而言，我希望它与`/status`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:23:54.770

您应该能够[安装](http://docs.cherrypy.org/dev/refman/tree.html#cherrypy.tree.mount) `/`到与 相同的位置`/status`，在您的代码中您可能拥有的某处可能有这样的一行：

```
cherrypy.tree.mount(Status(), '/status', config) 
```

将其更改为以下内容：

```
status = Status()
cherrypy.tree.mount(status, '/status', config)
cherrypy.tree.mount(status, '/', config) 
```

# xmpp - 使用 php 通过 bosh 服务器连接到 google talk

> ID：10095605
> 
> 赞同：0
> 
> 时间：2012-04-10T20:01:27.680
> 
> 标签：xmpp

我正在创建自己的 php bosh 连接器，以便可以将 attach() 连接到 strophe。这是我的交换，我收到错误的身份验证错误（这是谷歌特定的错误）。strophe连接成功后，似乎和strophe内的交换完全一样，你知道是什么问题吗？

```
<body rid='5559198240000' xmlns='http://jabber.org/protocol/httpbind'
to='babson.edu' xml:lang='en' wait='60' hold='1' window='5'
content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0'
xmlns:xmpp='urn:xmpp:xbosh'/>

string(500) "<body xmlns='http://jabber.org/protocol/httpbind'
inactivity='60' secure='true' authid='BECF5BCD50577C01' content='text/xml;
charset=utf-8' window='5' polling='15'
sid='4ad843a8e15c79e34976783c96785bd5' requests='2'
wait='60'><stream:features xmlns:stream='http://etherx.jabber.org/streams'
xmlns='jabber:client'><mechanisms
xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>PLAIN</mechanism><mecha
nism>X-GOOGLE-TOKEN</mechanism><mechanism>X-OAUTH2</mechanism></mechanisms>
</stream:features></body>"

<body rid='5559198240001' xmlns='http://jabber.org/protocol/httpbind'
sid='4ad843a8e15c79e34976783c96785bd5'><auth
xmlns='urn:ietf:params:xml:ns:xmpp-sasl'
mechanism='PLAIN'>same_base_64_translated_string_as_in_strophe=</auth></bod
y>

string(24) "Error=BadAuthentication 
```

我已经检查过了，base_64 SASL 编码的字符串与我成功连接的 strophe 日志中的字符串完全相同。但是我的 php 程序发送相同的 xml 得到这个 BadAuthentication 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:11:31.523

我使用了错误的卷曲标题：

这是使用 curl 与 BOSH 交谈的正确方法，以供找到此帖子的其他人使用：

```
$ch = curl_init($bosh_url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlpost);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$header = array('Accept-Encoding: gzip, deflate','Content-Type: text/xml; charset=utf-8');
curl_setopt($ch, CURLOPT_HTTPHEADER, $header );
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($ch);
var_dump($response); 
```

# c# - 菜单快捷键范围

> ID：10095611
> 
> 赞同：2
> 
> 时间：2012-04-10T20:01:59.313
> 
> 标签：c#, wpf, xaml, menuitem, keyboard-shortcuts

当我单击菜单条然后按快捷键时，它可以工作，但不能正常工作。有什么东西可以设置快捷键的范围吗？

**XAML：**

```
<Window x:Class="NewGUI_WPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:common="clr-namespace:Common;assembly=RecentFileListLib"
    Title="Sezor" Height="Auto" Width="Auto" WindowStartupLocation="Manual" Icon="/NewGUI_WPF;component/Images/i161.ICO" WindowStyle="SingleBorderWindow" Focusable="False" ResizeMode="CanResize" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="243" d:DesignWidth="314" SizeToContent="Manual" WindowState="Maximized">

<Window.CommandBindings>
    <CommandBinding Command="Save" Executed="SaveCommand" />
    <CommandBinding Command="Open" Executed="OpenCommand" />
</Window.CommandBindings>

<Grid>
    <Menu Height="23" Name="main_menu" VerticalAlignment="Top" HorizontalAlignment="Stretch" IsMainMenu="True">
        <MenuItem Name="MI_Case" Header="Case">
            <MenuItem Header="Open" Command="Open">
                <MenuItem.Icon>
                    <Image Height="16" Width="16" Source="/NewGUI_WPF;component/Images/openHS.png" />
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Save" Name="MainMenu_File_Save" Command="Save">
                <MenuItem.Icon>
                    <Image Height="16" Width="16" Source="/NewGUI_WPF;component/Images/saveHS.png" />
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Save as" Name="MainMenu_File_SaveAs" Click="MainMenu_File_SaveAs_Click" />
            <common:RecentFileList x:Name="RecentFileList" />
            <MenuItem Header="Quit" Click="MainMenu_File_Quit_Click" />
        </MenuItem>
        <MenuItem Header="View">
            <MenuItem Header="Input File" Click="MainMenu_View_InputFile_Click" />
            <MenuItem Header="Mesh File" Click="MainMenu_View_meshFile_Click" />
            <MenuItem Name="MainMenu_View_Summary" Header="Summary" Click="MainMenu_View_summary_Click" />
        </MenuItem>
        <MenuItem Header="Define" >
            <MenuItem Header="Input File" Click="MainMenu_Define_InputFile_Click" Name="MainMenu_Define_InputFile" />
            <MenuItem Header="Mesh File" Click="MainMenu_Define_MeshFile_Click" Name="MainMenu_Define_MeshFile" />
            <MenuItem Header="Simulation File" Click="MainMenu_Define_SimulFile_Click" Name="MainMenu_Define_SimulFile" />
            <MenuItem Header="Boundaries" Click="MainMenu_Define_BC_Click" />
            <MenuItem Header="Initials" Click="MainMenu_Define_Initials_Click" />
            <MenuItem Header="Spatial Discretization" Click="MainMenu_Define_SpatDis_Click" />                
            <MenuItem Header="Flow" Click="MainMenu_Define_Flow_Click" />
            <MenuItem Header="Material" Click="MainMenu_Define_Material" />
            <MenuItem Header="Algoritm" Click="MainMenu_Define_Algoritm" />
            <MenuItem Header="Gradient Reconstruction">
                <RadioButton Content="Least-Squares" Checked="Least_Squares_Checked" Name="rad_GR_LS" />
                <RadioButton Content="Green-Gauss" Click="Green_Gauss_Checked" Name="rad_GR_GG" />
            </MenuItem>
        </MenuItem>
        <MenuItem Header="Run" >
            <MenuItem Header="Simulation" Click="MainMenu_Run_Simulation_Click" />
        </MenuItem>
    </Menu>
    <Frame Height="Auto" HorizontalAlignment="Left" Margin="40,60,30,20" Name="frm_summary" VerticalAlignment="Top" Width="Auto" NavigationUIVisibility="Hidden" />
    <StatusBar Height="23" Name="statusBar1" VerticalAlignment="Bottom" Margin="0">
        <TextBlock Name="statBar_text_1"></TextBlock>
    </StatusBar>
</Grid> 
```

**代码：**

```
private void OpenCommand(object sender, ExecutedRoutedEventArgs e) {...}  
private void SaveCommand(object sender, ExecutedRoutedEventArgs e) {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:44:52.667

看起来您需要在方法中添加`CanExecute`相应`CommandBinding`的代码。

这是一个连接`Control-S`启动`Help`命令的最小演示。

XAML：

```
<Window x:Class="stackoverflow___scope_of_menu_shortcut_key.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.CommandBindings>
        <CommandBinding Command="Help" CanExecute="HelpCanExecute" Executed="HelpExecuted"/>
    </Window.CommandBindings>

    <Window.InputBindings>
        <KeyBinding Command="Help" Key="S" Modifiers="Control"/>
    </Window.InputBindings>

    <Menu>
        <MenuItem Header="File">
            <MenuItem Header="Help" Name="HelpMenu" Command="Help"/>
        </MenuItem>
    </Menu>

</Window> 
```

后面的代码：

```
using System.Windows;
using System.Windows.Input;

namespace stackoverflow___scope_of_menu_shortcut_key
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void HelpCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = true;
        }

        private void HelpExecuted(object sender, ExecutedRoutedEventArgs e)
        {
            System.Diagnostics.Process.Start("http://www.microsoft.com");
        }
    }
} 
```

请注意，如果您注释掉该行：

```
e.CanExecute = true; 
```

键绑定不再起作用。

这是您的示例，已精简到最低限度。这适用于我的系统：

XAML：

```
<Window x:Class="stackoverflow___scope_of_menu_shortcut_key.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.CommandBindings>
        <CommandBinding Command="Save" Executed="MyCommand" />
    </Window.CommandBindings>

    <MenuItem Header="Save" Command="ApplicationCommands.Save"/>

</Window> 
```

后面的代码：

```
using System.Windows;
using System.Windows.Input;

namespace stackoverflow___scope_of_menu_shortcut_key
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void MyCommand(object sender, ExecutedRoutedEventArgs e)
        {
            System.Diagnostics.Process.Start("http://www.microsoft.com");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:56:36.003

`Focusable="False"`在您的`Window`标签中删除。

# java - 哪些 java.util.concurrent 类可以让我组织我的读/写？

> ID：10095622
> 
> 赞同：2
> 
> 时间：2012-04-10T20:02:55.193
> 
> 标签：java, java.util.concurrent

假设我有一些想要同步访问的资源。大多数这些访问都是只读的。我想一次允许尽可能多的只读访问系统可以处理。但是，我希望能够停止阅读，进行一些写入，然后再次允许阅读。

所以读取线程可能看起来像这样

```
Resource r = null;
readLock.acquire();
r = resources.get();
readLock.release(); 
```

任何数量的线程都可以同时执行此操作，这不是问题。

写线程看起来像这样：

```
readLock.acquireOnlyMe(); // waits for all other threads to relase
                          // all other threads block when they try to acquire
r = resources.get();
r.setData(data);
readLock.release(); 
```

现在，我正在使用`ReentrantLock`既可读取又可写入的 a 。但显然，当我宁愿它们同时工作时，这会导致读取按顺序工作。

我能做些什么来解决这个问题？

这似乎被[称为读者-作者问题](http://en.wikipedia.org/wiki/Readers-writer_lock)，wiki 条目列出了一些 C 实现，但没有用于 Java。

编辑：我对任何可以完成工作的 Java 库持开放态度。标题说 java.util.concurrent 是因为答案似乎很可能就在那儿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:46:36.290

如果您想将编写器线程限制为一个，那么 ReentrantReadWriteLock 将是您的人选。

不止一个 - 你可能想使用信号量锁定你的作家。我建议将初始许可计数基于核心数量 - 可能是核心+1。

# css - 空的，受保护的 mixin 在 LESS 中的相同规则下将其他 mixin 归零

> ID：10095623
> 
> 赞同：4
> 
> 时间：2012-04-10T20:03:00.500
> 
> 标签：css, less

我一直在尝试让以下受保护的 mixin 在我们的 LESS 样式表中正常工作：

```
#font {
    .body( @size: 15px, @lineHeight: 18px, @weight: normal ) {
        font: @weight @size~"/"@lineHeight Arial, sans-serif;
    }
    .marginLeft( @margin ) when ( @margin = 0 ) { }
    .marginLeft( @margin ) when not ( @margin = 0 ) {
        margin-left: @margin;
    }
    .marginTop( @margin ) when ( @margin = 0 ) { }
    .marginTop( @margin ) when not ( @margin = 0 ) {
        margin-top: @margin;
    }
    .DinBold( @size: 14px, @lineHeight: 20px, @offsetTop: 0, @offsetLeft: 0 ) {
        #font > .marginLeft( @offsetLeft );
        #font > .marginTop( @offsetTop );
        font: @size~"/"@lineHeight 'DINBold', Arial, sans-serif;
    }
} 
```

这里的想法是，如果任何字体偏移量为零，我不希望设置边距样式。现在，当两个参数不为零时，它可以正常工作，例如：

```
#font > .DinBold( 42px, 42px, -7px, -3px ); 
```

但是@offsetLeft 为 0 的那一刻，无论是显式的还是隐式的：

```
#font > .DinBold( 42px, 42px, -7px ); 
```

或者

```
#font > .DinBold( 42px, 42px, -7px, 0 ); 
```

似乎即使是margin-top也不会暴露。如果你翻转它，将marginTop mixin 放在marginLeft mixin 之前，并为@offsetTop 传递0，这似乎向我暗示，第一次命中空mixin 时，所有后续的mixin 调用可能会发生同样的事情忽略 - 对此有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:46:13.677

我一直在努力解决同样的问题，重新编写了一些用lessphp编译好的LESS，但不是用lessjs。似乎空的 mixin 会阻止同一规则集中的所有后续 mixin 或包含 mixin 的渲染。但是将任何内容放入空的 mixin 中，一切正常。

因此，简单的解决方案是将 LESS 注释 (//) 放在空的 mixin 中，令我惊讶的是这很好用。只有两个简单的正斜杠在他们自己的行上，没有别的，LESS 注释不会在输出 CSS 中呈现，所以你有你的空 mixin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:00:08.300

我放弃了以前的答案，因为它们不适合你。我很惊讶它们不起作用，因为[LESS 信息](http://lesscss.org/)似乎表明它应该能够处理非零情况。

然而，我有一个新的想法，基于[模式匹配](http://lesscss.org/#-pattern-matching-and-guard-expressions)。试试下面的。它旨在允许您在没有设置边距的情况下只传入两个参数，或者四个参数，但第三个参数可以是“top”或“left”，以允许第四个参数只设置一个或另一个，或者您可以传递两个数字并设置顶部和左侧（按该顺序）。这样可以避免调用`.marginLeft/Top`if 不需要，并接受 a`0`如果您选择传入一个。

```
#font {
    .body( @size: 15px, @lineHeight: 18px, @weight: normal ) {
        font: @weight @size~"/"@lineHeight Arial, sans-serif;
    }
    .marginLeft( @margin ) when isnumber(@margin) {
        margin-left: @margin;
    }
    .marginTop( @margin ) when isnumber(@margin) {
        margin-top: @margin;
    }

    .DinBold( @size: 14px, @lineHeight: 20px) {
        font: @size~"/"@lineHeight 'DINBold', Arial, sans-serif;
    }

    .DinBold( @size: 14px, @lineHeight: 20px, top, @offsetTop: 0 ) {
        #font > .marginTop( @offsetTop );
        font: @size~"/"@lineHeight 'DINBold', Arial, sans-serif;
    }

    .DinBold( @size: 14px, @lineHeight: 20px, left, @offsetLeft: 0 ) {
        #font > .marginLeft( @offsetLeft );
        font: @size~"/"@lineHeight 'DINBold', Arial, sans-serif;
    }

    .DinBold( @size: 14px, @lineHeight: 20px, @offsetTop: 0, @offsetLeft: 0 ) {
        #font > .marginLeft( @offsetLeft );
        #font > .marginTop( @offsetTop );
        font: @size~"/"@lineHeight 'DINBold', Arial, sans-serif;
    }
} 
```

# python - Python 历史与设计：为什么是 subclass() 而不是丰富的比较？

> ID：10095628
> 
> 赞同：2
> 
> 时间：2012-04-10T20:03:21.793
> 
> 标签：python, computer-science, language-design, language-history

在 Python 中，比较运算符 -- `<`, `<=`, `==`, `!=`, `>`, `>=`-- 可以实现为表示与实现类相关的任何内容。在 Python 2 中是通过覆盖完成的`__cmp__`，而在 Python 3 中是通过覆盖`__lt__`和朋友完成的。具有`issubclass()`内置方法而不是允许诸如`bool < int`(true)、`int < object`(true) `int <= int`、 或`int < float`(false) 之类的表达式的优点是什么。特别是，我会注意到排序的类`issubclass()`构成了数学意义上的[偏序集](http://en.wikipedia.org/wiki/Partially_ordered_set)。

我所想的 Python 3 等价物如下所示。这段代码不会替换`issubclass()`（尽管循环 MRO 会实现这一点，对吧？）。但是，这不是更直观吗？

```
@functools.total_ordering
class Type(type):
    "Metaclass whose instances (which are classes) can use <= instead issubclass()"
    def __lt__(self, other):
        try:
            return issubclass(self, other) and self != other
        except TypeError: # other isn't a type or tuple of types
            return NotImplemented
    def __eq__(self, other):
        if isinstance(other, tuple): # For compatibility with __lt__
            for other_type in other:
                if type(self) is type(other_type):
                    return False
            return True
        else:
            return type(self) is type(other) 
```

**实际问题：**拥有 issubclass() 内置方法而不是允许诸如 bool < int (true)、int < object (true)、int <= int 或 int < float (false) 之类的表达式有什么好处？ .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:07:40.533

粗体字的优点之一：

> `issubclass(class, classinfo)`
> 
> 如果 class 是 classinfo 的子类（直接、间接或虚拟），则返回 true。一个类被认为是它自己的一个子类。**classinfo 可能是类对象的元组，在这种情况下，将检查 classinfo 中的每个条目。**在任何其他情况下，都会引发 TypeError 异常。

另一个是它是描述性的。不是每个使用 Python 的人都是数学家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:07:50.437

因为它会违背 Python 的禅宗：http: [//www.python.org/dev/peps/pep-0020/](http://www.python.org/dev/peps/pep-0020/)

`Explicit is better than implicit.`

如果您单独查看以下代码行：

```
issubclass(a, b) 
```

很明显`a`and`b`是包含类的变量，我们正在检查是否`a`是`b`. 如果它们碰巧不包含类，你就会知道。

但是看着这个

```
a < b 
```

不会告诉你任何事情。您需要检查周围的代码以确定它们包含类，然后才能知道我们正在检查的类`a`是否是`b`. 如果说 a=5 和 b=6 它仍然会“正常”运行。

但是 Python 是灵活的，所以如果你*真的*想要这个，你可以实现一个具有你所展示的行为的基本类型。

实际上 - 顺便说一句 - 例如，C++ 中重载运算符的普遍存在是该语言的一个重大缺点（至少在我看来），因为当你看到`a + b`它时，它可能会发射你所知道的核导弹......直到您检查 a/b 的类型，查找类实现和`+`运算符重载实现（如果有的话......如果没有，看看父类是否有......如果没有，看看父类是否......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:12:26.233

我会说优势是非功能性的。唯一的技术区别是中`<`缀。

但这个问题与技术无关。它似乎与语义和易于阅读有关。

使用`<`将表示顺序。尽管类层次结构可以解释为“可排序的”，但它始终是一个近似值。对很多人来说，一个不明显的。

使用`issubclass`更清晰、更简单，除了它的实际作用之外，没有其他解释：检查`object`/`classinfo`是否是`class`.

朴素、简单、明确、有效。这些就是优点。也许你不/不能利用它们。但这已经是个人品味了。

# c# - Twitterizer2 1.2.4 Streaming API 异常 - 反序列化对象时意外结束

> ID：10095634
> 
> 赞同：0
> 
> 时间：2012-04-10T20:03:50.797
> 
> 标签：c#, json.net, twitterizer

任何帮助，将不胜感激。我在 JSON.Net 内的反序列化过程中抛出异常：

反序列化对象时意外结束。第 216 行，位置 2。

我的调用代码： var asyncResult = s.StartPublicStream(streamErrorCallback, statusCreatedCallback, statusDeletedCallback, eventCallback, rawJsonCallback);

在我的 rawJsonCallback 处理程序中设置断点显示（似乎是）从 API 返回的有效 JSON。

添加了 Twitterizer2 和 JSON.Net 的源代码，看起来 Twitterizer.Streaming.TwitterStream.ParseMessage(string) 在第 520 行附近失败了

```
var user = obj.SelectToken("user", false);
    if (user != null)
        {
            if (statusCreatedCallback != null && user.HasValues)
            {
                statusCreatedCallback(JsonConvert.DeserializeObject<TwitterStatus>(ConvertJTokenToString(obj)));

            }
            return;
        } 
```

在调用 DeserializeObject() 时。

Newtonsoft.Json.Serliazation.JsonSerializerInternalReader.PopulateObject() 失败，因为 reader.TokenType == None。

我怀疑合同类型/值与从 API 返回的对象之间存在差异，但我不确定如何进一步测试。无法编译 Json.Net 源代码，因此无法逐步完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:49:23.040

也许这可以解决你的问题。当我想将 twitterize 与 JSON.NET 4.5 一起使用时，我也遇到了类似的情况

[我按照有人在github](https://github.com/Twitterizer/Twitterizer/pull/55/files)上提到的步骤，然后我用新的 json lib 编译了整个源代码，瞧；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:57:33.583

问题是 Twitterizer 2.4 使用的是 NewtonSoft.Json v4.08，它破坏了它。安装 Newtonsoft.Json v4.03，你会没事的。

# c# - 将附加项目添加到列表框

> ID：10095636
> 
> 赞同：0
> 
> 时间：2012-04-10T20:03:52.073
> 
> 标签：c#

我在向列表框中添加项目时遇到了困难。我想在列表框的开头添加一个项目作为我的“默认”项目，但是我还将使用 .DataSource 从列表中添加项目列表......并且由于某种原因，应用程序在任何时候都会崩溃我尝试同时添加列表中的项目和默认项目。我正在尝试使用以下方法添加项目：

```
`productList.DataSource = salesManager.Products;
productList.DisplayMember = "IdAndName";
productList.ValueMember = "Id";
productList.Items.Insert(0, "ALL");` 
```

但出于某种原因VS不会让我。我也找到了这种方法并尝试应用它：

```
public void AddListLine(string lineIn)
    {
        productList.Items.Insert(0, "ALL");
        ((CurrencyManager)productList.BindingContext[productList]).Refresh();
    } 
```

但是它也不能正常工作。请问有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:09:13.530

它不起作用的原因是因为您试图添加一个类型的对象，`String`而其余的对象（我假设）是类型`Product`或类似的。运行时尝试访问`IdAndName`要显示的属性`Id`以及新列表项的显示属性和值属性，但它们不存在。

考虑添加某种“空白”产品对象。

```
public void AddListLine(string lineIn)
    {
        productList.Items.Insert(0, new Product { Id = "ALL", IdAndName = "ALL" });
        ((CurrencyManager)productList.BindingContext[productList]).Refresh();
    } 
```

# php - 定期检查网页的元素

> ID：10095638
> 
> 赞同：-5
> 
> 时间：2012-04-10T20:03:56.840
> 
> 标签：php, javascript

如何实现定期检查网页元素（例如`<div id="contentlist">`）是否已更改的 Web 服务；那么如果有变化，向电子邮件地址发送通知？

**更新**

有一个问题。网页是动态生成的，所以如果我查看 HTML 源代码，则 targe 元素中没有任何内容。

我想将其实现为 Web 服务。我可以在 cron 中这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:05:38.960

你听说过[Cron Jobs](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:05:55.310

您使用[cron](http://linux.die.net/man/5/crontab)，创建一个脚本来检查网页的元素是否已更改（例如 with `DOMDocument`），如果发生更改，则会向您发送一封电子邮件，然后您将其设置为 cron 间隔，以便您可以定义您想要的频率检查。完毕。

# java - 无法回复答案

> ID：10095640
> 
> 赞同：-5
> 
> 时间：2012-04-10T20:04:02.627
> 
> 标签：java

应该返回答案，但由于某种原因没有显示。我已经在 for 循环中打印并看到它是正确的答案。

```
public class Salary
{
    public static void main (String[]args)
    {
        double [] salary = {20000.00};
        double riseRate = 1.07;

        calculateSalary(salary, riseRate);
    }
    public static double [] calculateSalary(double [] salary, double riseRate)
    {
        for (int i=0; i<salary.length; i++)
        {
            salary [i] = salary [i] * riseRate;
        }
        return salary;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:06:03.780

那是因为你没有打印出答案。在中添加打印语句`main`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:06:12.477

```
System.out.println(calculateSalary(salary, riseRate)[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:24:29.170

您正在返回一个数组。薪水在你数组的第一个位置。如果您想查看您需要使用的薪水

```
return salary[0]; 
```

在你的方法中。

或者

```
System.out.println(calculateSalary(salary,riseRate)[0]); 
```

在主要。

您现在要打印的是实际数组，而不是值。

不过，我不确定您为什么要这样做。为什么不直接使用 double 而不是 double[]？

# java - 用编程语言制作输入输出命令

> ID：10095641
> 
> 赞同：0
> 
> 时间：2012-04-10T20:04:02.863
> 
> 标签：java, antlr, new-operator, printf

所以我正在制作一些基本的编程语言（只是为了练习）。我使用 ANTLR 制作了简单的语法。

让我们以此作为简单程序的示例。

```
begin
    int a;
    a = 3+4*4;
end 
```

让我们测试一下它是否与以下 java 类一起运行。

```
public class Test {
    public static void main(String[] args) throws RecognitionException {    
        CharStream charStream = new ANTLRStringStream("here goes the code");
        LangLexer lexer = new LangLexer(charStream);
        TokenStream tokeStream = new CommonTokenStream(lexer);
        LangParser parser = new LangParser(tokeStream);
        Lang.program();
        System.out.println("done");
    }
} 
```

现在我被困住了。我想做，例如“输入x”和“打印x”。因此，当您的代码中有“输入 x”时，程序希望您输入一些数字，并将给定值存储在 var X 中。使用 print X 它在控制台中输出该值。

```
begin
    int a, b, c;
    input a;
    input b;
    c = a + b;
    print c;
end 
```

有什么想法和建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:08:21.413

究竟如何做到这一点很难解释，因为您需要很多底层的东西（语法、AST walker、范围/符号表等）。

我写[了一篇博客，解释了如何创建一种小型编程语言](http://bkiers.blogspot.com/2011/03/creating-your-own-programming-language.html)。如果你通读它和/或下载最后一部分的 zip，你只需要添加一些东西来支持用户输入。这些是您需要进行的更改：

### 在文件 TL.g 中：

```
atom
  :  Number
  |  Bool
  |  Null
  |  lookup
  |  Input '(' String? ')' -> ^(Input String?) // added this line
  ;

Input : 'input'; // added this rule 
```

### 在文件 TLTreeWalker.g 中：

```
expression returns [TLNode node]
  :  ^(TERNARY a=expression b=expression c=expression) {node = new TernaryNode($a.node, $b.node, $c.node);}
  |  ^(In a=expression b=expression)                   {node = new InNode($a.node, $b.node);}
  |  ^('||' a=expression b=expression)                 {node = new OrNode($a.node, $b.node);}
  |  ^('&&' a=expression b=expression)                 {node = new AndNode($a.node, $b.node);}
  |  ^('==' a=expression b=expression)                 {node = new EqualsNode($a.node, $b.node);}
  |  ^('!=' a=expression b=expression)                 {node = new NotEqualsNode($a.node, $b.node);}
  |  ^('>=' a=expression b=expression)                 {node = new GTEqualsNode($a.node, $b.node);}
  |  ^('<=' a=expression b=expression)                 {node = new LTEqualsNode($a.node, $b.node);}
  |  ^('>' a=expression b=expression)                  {node = new GTNode($a.node, $b.node);}
  |  ^('<' a=expression b=expression)                  {node = new LTNode($a.node, $b.node);}
  |  ^('+' a=expression b=expression)                  {node = new AddNode($a.node, $b.node);}
  |  ^('-' a=expression b=expression)                  {node = new SubNode($a.node, $b.node);}
  |  ^('*' a=expression b=expression)                  {node = new MulNode($a.node, $b.node);}
  |  ^('/' a=expression b=expression)                  {node = new DivNode($a.node, $b.node);}
  |  ^('%' a=expression b=expression)                  {node = new ModNode($a.node, $b.node);}
  |  ^('^' a=expression b=expression)                  {node = new PowNode($a.node, $b.node);}
  |  ^(UNARY_MIN a=expression)                         {node = new UnaryMinusNode($a.node);}
  |  ^(NEGATE a=expression)                            {node = new NegateNode($a.node);}
  |  Number                                            {node = new AtomNode(Double.parseDouble($Number.text));}
  |  Bool                                              {node = new AtomNode(Boolean.parseBoolean($Bool.text));}
  |  Null                                              {node = new AtomNode(null);}
  |  lookup                                            {node = $lookup.node;}
  |  ^(Input String?)                                  {node = new InputNode($String.text);} // added this line
  ; 
```

添加以下类：

```
package tl.tree.functions;

import tl.TLValue;
import tl.tree.TLNode;

import java.io.PrintStream;
import java.util.Scanner;

public class InputNode implements TLNode {

    private String prompt;
    private PrintStream out;

    public InputNode(String p) {
        this(p, System.out);
    }

    public InputNode(String p, PrintStream o) {
        prompt = (p == null) ? "" : p;
        out = o;
    }

    @Override
    public TLValue evaluate() {
        out.println(prompt);
        Scanner keyboard = new Scanner(System.in);

        if(keyboard.hasNextDouble()) 
            return new TLValue(Double.valueOf(keyboard.nextDouble()));
        else if(keyboard.hasNextInt()) 
            return new TLValue(Integer.valueOf(keyboard.nextInt()));
        else if(keyboard.hasNextBoolean()) 
            return new TLValue(Boolean.valueOf(keyboard.nextBoolean()));
        else 
            return new TLValue(keyboard.nextLine().trim()); // else it's a plain string
    }
} 
```

如果您现在评估输入：

```
a = 10;
b = input("Enter a number: ");
println(a + b); 
```

系统会提示您该消息`Enter a number:`，然后将此编号添加到`a`控制台并打印到控制台。

# sql - 如何解析 JET/ACE SQL

> ID：10095646
> 
> 赞同：0
> 
> 时间：2012-04-10T20:04:25.147
> 
> 标签：sql, vb.net, parsing, ms-access, jet

我想强调的是，我正在寻找“正确”的方式来做这样的事情，尤其是 Access。下面是我想出的用于 SQL Server 的解决方案，但如果它不正确，或者它不适用于 Access，我也想知道这一点。

出于提供 ProgressBar 的目的，我使用以下函数来生成（可能更有效的）SQL 语句，以返回 SQL 语句*sql*将返回的记录数。它适用于 SQL Server 2008 数据库。我想对 Access 数据库使用类似的处理方法，但我没有发现与 JET/ACE 的 TSql100Parser 和 Sql100ScriptGenerator 类似的东西。这样的事情存在吗？有更好的通用解决方案吗？

```
Imports Microsoft.Data.Schema.ScriptDom
Imports Microsoft.Data.Schema.ScriptDom.Sql

Private Function GetCountSQL(ByVal sql As String) As String
    Dim _tsBatch As TSqlBatch
    Dim _peErrors As IList(Of ParseError) = Nothing
    Dim _tssFragment As TSqlScript
    Dim _tspParser As New TSql100Parser(False)
    Dim _retval As String = vbNullString
    Dim _sgScriptGenerator As New Microsoft.Data.Schema.ScriptDom.Sql.Sql100ScriptGenerator
    Dim _tsStatement As TSqlStatement

    _tssFragment = _tspParser.Parse(New StringReader(sql), _peErrors)
    If _peErrors Is Nothing OrElse _peErrors.Count = 0 Then
        For Each _tsBatch In _tssFragment.Batches
            For Each _tsStatement In _tsBatch.Statements
                If TypeOf _tsStatement Is Microsoft.Data.Schema.ScriptDom.Sql.SelectStatement AndAlso CType(_tsStatement, Microsoft.Data.Schema.ScriptDom.Sql.SelectStatement).OrderByClause IsNot Nothing Then
                    CType(_tsStatement, Microsoft.Data.Schema.ScriptDom.Sql.SelectStatement).OrderByClause = Nothing
                End If
            Next
        Next
        _sgScriptGenerator.GenerateScript(_tssFragment, _retval)
        _retval = String.Format("Select Count(*) FROM ({0}) SQ", _retval)
    End If
    Return _retval
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:58:33.207

我认为您不会为 Access 找到类似的东西。这个解析器本身是相当新的。我建议几乎唯一要做的就是使用基于正则表达式的解析。如果您想要的只是列数，您可以使用正则表达式来定位列表并使用拆分函数来计算列数。

# c# - Windows 应用商店应用中的 ComImport

> ID：10095647
> 
> 赞同：1
> 
> 时间：2012-04-10T20:04:25.740
> 
> 标签：c#, .net, windows-runtime, windows-store-apps

似乎这个属性现在映射到 CoCreateInstanceFromApp 过滤掉你可以创建的 COM（基本上没用 - 没有第三方等）。

所以我想问你是否知道一些简单的方法来实例化已经存在并使用 GUID 在系统上注册的 COM？

我只设法做了这样的破解（但这非常麻烦，只是为了防止微软阻止我做我一直做的事情并且没有问题）：

```
[ComVisible(true), ComImport,
 Guid("00000001-0000-0000-C000-000000000046"),
 InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IClassFactory
{
    [PreserveSig]
    int CreateInstance([In, MarshalAs(UnmanagedType.Interface)] object pUnkOuter,
                       ref Guid riid,
                       [Out, MarshalAs(UnmanagedType.Interface)] out object obj);

    [PreserveSig]
    int LockServer([In] bool fLock);
}

[DllImport("kernel32.dll")]
internal static extern IntPtr LoadLibrary(String dllname);
[DllImport("kernel32.dll")]
internal static extern IntPtr GetProcAddress(IntPtr hModule, String procname);

internal delegate int DllGetClassObjectDelegate([MarshalAs(UnmanagedType.LPStruct)] Guid clsid,[MarshalAs(UnmanagedType.LPStruct)] Guid riid, [MarshalAs(UnmanagedType.IUnknown)] out object ppv);

void LoadItDamnit() {
    IntPtr dll = LoadLibrary(path);
    IntPtr proc = GetProcAddress(dll, "DllGetClassObject");

    var getClassObject = (DllGetClassObjectDelegate)Marshal.GetDelegateForFunctionPointer(proc, typeof(DllGetClassObjectDelegate));

    int hr = getClassObject(IMYLIB_GUID, IUNKNOWN_GUID, out oFactory);

    IClassFactory factory = oFactory as IClassFactory;

    if (factory == null)
    {
           if (oFactory != null) Marshal.ReleaseComObject(oFactory);
           throw new Exception("Could not QueryInterface for the IClassFactory interface");
    }

    Guid myGUID = typeof(IMyInterface).GetGUID();
    hr = factory.CreateInstance(null, ref myGUID, out oMyObj);

    _obj = oMyObj as IMyInterface;
 } 
```

正如您所看到的，这需要在路径中包含 dll（或使用其他 API 来更改当前路径）以加载库，并且为了实现本来应该可用的东西有点太多的篡改......

如果有人知道一种更好的方法来实例化任何 COM 对象并更轻松地克服 Metro 的限制，我会买啤酒！

# java - 如何更改特定内容类型的 HTTP 标头？

> ID：10095655
> 
> 赞同：0
> 
> 时间：2012-04-10T20:04:48.663
> 
> 标签：java, internet-explorer, ssl, richfaces, flash

我正在使用 RichFaces，但我遇到了 fileUpload flash 组件 + IE + SSL 的问题。根据我所做的研究，我需要更改“Pragma”和“Cache-Control”HTTP 标头。

如何仅为 Flash 内容更改这些标题？我尝试使用 Servlet 过滤器。这是`doFilter()`方法：

```
chain.doFilter(request, response);
HttpServletResponse resp = (HttpServletResponse) response;
if (resp.getContentType() != null && resp.getContentType().contains("flash")) { // application/x-shockwave-flash
resp.setHeader("Pragma", "");
} 
```

正在执行过滤器，正在更改标头，但随后我用萤火虫检查，标头回到“无缓存”。这是我的最后一个过滤器，`web.xml`但就像其他过滤器将标题放回一样。

我也在使用 JBoss 5。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:15:41.987

尝试执行指令以在`doFilter()`. 这样：

```
HttpServletResponse resp = (HttpServletResponse) response;
if ( // .. your test ) {
  resp.setHeader("Pragma", "");
}
chain.doFilter(request, response); 
```

因为一旦服务器开始向客户端发送数据，您就无法设置标头字段。

自然地，您必须找到另一种方法来检查所请求资源的*contentType*。也许您可以根据[HttpServletRequest.getRequestURI()](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)和此值中的文件扩展名进行检查。

# api - 检索 Magento 前端会话的问题

> ID：10095657
> 
> 赞同：1
> 
> 时间：2012-04-10T20:04:52.843
> 
> 标签：api, session, magento, amf

我正在尝试使用对 Magento 客户 API 的 AMF 调用从 Flex 应用程序中检索客户的登录状态：

```
Mage::app('default');
    $session = Mage::getSingleton('customer/session', array('name'=>'frontend') );
    $sessId= $session->getSessionId();
    if($session->isLoggedIn()) {
        $name = "Hi ". Mage::getModel('customer/session')->getCustomer()->getName();
        return 'true' . $name;
    } 
    else{
        return 'false ' . $sessId;
    } 
```

仅返回 PHP 会话 ID：PHPSESSID=i5s1gcemc6r8uquadc4rsk9ou5

但是用户登录到下面的 ID frontend=3qdcimcdp7nq4bi8jlovqmnq61

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:56:30.773

使用以下代码获取客户 ID

```
Mage::getSingleton('core/session', array('name' => 'frontend')); 
$customer = Mage::getSingleton('customer/session',array('name' => 'frontend'));
echo $customerId = $customer->getCustomer()->getId(); 
```

# macos - 将 node.js 安装的节点文件夹放在哪里？

> ID：10095663
> 
> 赞同：2
> 
> 时间：2012-04-10T20:05:03.167
> 
> 标签：macos, node.js, installation

它当前在目录中：/Users/myusername/node

但我觉得它应该更接近根？也许在 /Developer 中？我无法在网上找到其他建议。我现在正在使用macosx lion。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T06:16:46.780

现在还有一个 Macintosh（或 Windows）安装程序可用于当前版本（0.6.18 目前是撰写本文时的最新版本）。通用 .pkg 安装程序将为您处理一切，因此您无需担心 :-)

如果您想知道安装在哪里结束，我最近在 OSX Lion 10.7.4 上安装了 v0.6.17，看起来大多数文件都在`/usr/local/`. 中的外壳命令`/usr/local/bin/`。全局 node_modules 和 npm in `/usr/local/lib/node_modules`.

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:23:00.770

由于您使用的是 Mac OS X，因此您可以使用 homebrew 来管理许多具有配方的东西的安装。Node.js 就是其中之一。

[关联](https://brew.sh/)

安装自制软件并更新后，您只需运行如下命令即可。

```
brew install node.js 
```

# android - 有什么方法可以清除我的应用在 ICS 中添加的语音邮件通知？

> ID：10095665
> 
> 赞同：0
> 
> 时间：2012-04-10T20:05:08.663
> 
> 标签：android, notifications, android-4.0-ice-cream-sandwich, voicemail

我的应用程序正在使用 ICS 中的新[VoicemailContract](http://developer.android.com/reference/android/provider/VoicemailContract.html)功能来插入显示在股票通话记录中的语音邮件。我已经让它工作得很好，但我不知道如何控制添加新语音邮件时弹出的新语音邮件通知。通知似乎由电话应用程序控制，即使我手动更新语音邮件的 IS_READ 属性，通知也不会消失。事实上，我可以完全删除语音邮件，并且通知不会消失。它消失的唯一方法是单击该通知，或者如果我手动进入通话记录并打开其中一个新语音邮件。

有谁知道如何从我的应用程序以编程方式控制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:24:33.090

不幸的是你不能。状态栏通知只能由放置它们的应用程序清除。手机应用程序是放置它的应用程序，这就是为什么只有该应用程序能够清除它的原因。

我希望自己有办法做到这一点，但目前还没有:(

# c# - 多次使用“from”是否等同于加入？

> ID：10095669
> 
> 赞同：6
> 
> 时间：2012-04-10T20:05:21.043
> 
> 标签：c#, linq

我遇到了以下代码，不知道在这段代码中有**两次**是什么意思。这是否意味着 Books 和 CSBooks 之间存在连接？

```
List<Product> Books = new List<Product>();   
            List<Product> CSBooks = new List<Product>();
            var AllBooks = from Bk in Books
                           from CsBk in CSBooks
                           where Bk != CsBk
                           select new[] { Bk, CsBk }; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T20:25:15.740

这有点像加入。当你说：

```
from customer in customers
join order in orders on customer.Id equals order.CustomerId
select whatever 
```

这本质上是一种更有效的写作方式：

```
from customer in customers
from order in orders
where customer.Id == order.CustomerId
select whatever 
```

你明白为什么吗？第一个说“嘿，查询处理器，客户和订单有一种特殊的关系，由客户 ID 和存储在订单中的客户 ID 的相等性定义”。第二个只是说“给我笛卡尔积 - 客户和订单的所有可能组合 - 然后过滤掉那些没有任何意义的”。它们具有相同的效果，但前者更有效。

但是，您可以使用多个“from”子句来做比笛卡尔积更花哨的事情。假设一个客户可以有多个地址：

```
from customer in customers
from address in customer.Addresses
select address 
```

**多个`from`子句实际上是“select many”。** 也就是说，它们采用一个序列，以及*一种从第一个序列的每个项目制作序列的方法，*并将*所有结果序列合并在一起*。

“select many”很简单，但非常强大；我们已经看到您可以使用“选择多个”来进行（缓慢但正确的）连接操作。事实上，如果您足够聪明并且不介意浪费大量时间和内存，您可以使用 select many 来进行*所有可能的查询。*例如：

```
from customer in customers
where customer.City == "London"
select customer 
```

可以在没有这样的“where”的情况下编写：

```
from customer in customers
from c in (customer.City == "London" ? 
               new Customer[] {customer} : 
               new Customer[] { } )
select c; 
```

这样做你会很疯狂，但`where`实际上`join`是*不必要*的——它们只是更快、更短、更有效的编写选择多的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:10:13.350

`from`两次是叉积。这是`Books`和的所有组合`CSBooks`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T20:10:47.380

它更像是连接的反面。我认为这样做的结果实际上是一个笛卡尔积。也就是说，由于`!=`，它会将第一个集合的每个元素连接到第二个集合的每个不等于第一个元素的元素上。

# asp.net-mvc-3 - 再次关于 MVC (Razor) 中的分页

> ID：10095673
> 
> 赞同：0
> 
> 时间：2012-04-10T20:05:42.983
> 
> 标签：asp.net-mvc-3

我已经阅读了很多关于 MVC 中分页的文章和答案。我已经设法通过分页（使用 PagedList）创建搜索结果，但现在我需要另一件事。我有一个流派列表，我想根据一个流派浏览该流派的所有专辑。url 是 Home/Browse/1（类型的 id）。我如何分页这个结果，因为它已经有一个参数 (genreid) ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:56:33.653

If you really want to understand how to paginate, I would suggest that you write your own custom paging logic instead of relying on someone else's `PagedList` abstraction.

When you need to paginate results, you need to also include 2 other aspects of the overall query that will be sent to the database: **Filtering**, and **Sorting**.

The reason why is because unless you also apply both sorting and filtering in combination with paging, you will not be able to compute the correct results.

For example, say I have a table of 100 rows and I want to show 10 rows per page. The first 10 rows sorted A-Z will be different than the first 10 rows sorted Z-A. So the table must be sorted before it can be paginated.

Your question has to do with filtering -- you want to filter out all of the albums that are not in a particular genre. Again, this means you must apply filtering before paginating the filtered results.

Ultimately your controller is going to have to hit the database to get the results. You can paginate by sending a filtered and sorted query to the database, then chopping out only a subset to display pagination to the user. However just because you can doesn't mean you should. Ideally, you would like to send the db 1 query that applies filtering, sorting, and pagination to return exactly the paged section you need.

You should be able to do this with a query like the following:

```
// assuming pageNumber is Nullable<int>, and is passed as action method argument
pageNumber = pageNumber ?? 1
var pageSize = 10;
var pageIndex = pageNumber.HasValue ? pageNumber.Value - 1 : 0;
var results = context.Albums
    .Where(a => a.GenreId == genreId) // filtering
    .OrderBy(a => a.GenreId) // sorting
    .Skip(pageSize * pageIndex) // skip this many rows (pagination start at)
    .Take(pageSize) // then give me this many rows (pagination chunk)
    .ToList() // execute the query against the database
;
return view(results); 
```

Your view would then have a model type like the following:

```
@model IEnumerable<Album> 
```

I assume that from using PagedList and MVC, you already know how to send the pageNumber parameter to the controller / action method. For your filtering URL (Home/Browse/1) you are passing the filtering parameter to the action method already.

If you ever decide you also want to allow the user to sort the results, you must also pass sorting information into the action method parameter. The code above assumes the natural ordering in the database (which will generally be by AlbumId).

Same goes with the pageSize. If you want to make any part of the query (sorting, filtering, pageSize, pageNumber) customizable to the user, you must pass these values as arguments to the action method. Otherwise, the controller will have to use compiled values as in the above example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:17:05.817

PagedList 的创建者在这里。你可以像这样做你要求的事情：

`http://localhost:1234/home/browse/1?page=2`

```
public class HomeController : Controller
{
  public object Browse(int genreId, int? page)
  {
    // the *page* variable is bound to the querystring value, not the route
    return View(Genres.All().ToPagedList(page ?? 1, 10);
  }
} 
```

# ssl - OpenSSL 可信 CA 证书的合理默认值？

> ID：10095676
> 
> 赞同：13
> 
> 时间：2012-04-10T20:05:52.213
> 
> 标签：ssl, openssl

有没有办法`SSL_CTX`使用一组合理的可信 CA 证书设置 OpenSSL 上下文 ()，*而无需*自己分发它们？我不想让他们保持最新的责任。IMO 任何现代操作系统都应该提供“让我获得受信任的 CA 证书”作为服务，但我不知道是否真的如此。

我不介意将这段代码写三遍（一次用于 Windows，一次用于 Mac OS X，一次用于 Linux），但我更愿意将其限制在这一点上。特别是，我宁愿不尝试编写代码来探听安装了哪些浏览器并尝试提取其受信任的证书。（显然这很[容易弄错](http://www.imperialviolet.org/2012/01/30/mozillaroots.html)。）

最近版本的 Linux 的答案似乎是调用`SSL_CTX_load_verify_locations`with `/etc/ssl/certs/ca-certificates.crt`（如果该文件存在）。

Windows 和 Mac OS X 是否有简单的答案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-26T21:36:49.203

这就是我最终做的事情：

在 Windows 上：使用 从 Windows`"ROOT"`证书存储中获取证书，使用`CertOpenSystemStore`循环遍历它们，从 的字段中`CertEnumCertificatesInStore`获取 X509 编码的原始证书，使用 创建 OpenSSL结构，然后使用将其添加到 OpenSSL 证书存储中。Windows 功能都可从.`pbCertEncoded``CERT_CONTEXT``X509``d2i_X509``X509_STORE_add_cert``crypt32.dll`

在 Mac OS X 上：使用 从`"/System/Library/Keychains/SystemRootCertificates.keychain"`钥匙串中获取证书，使用为钥匙串`SecKeychainOpen`中的证书创建迭代器，使用`SecKeychainSearchCreateFromAttributes`迭代`SecKeychainSearchCopyNext`，使用 获取原始 X509 证书`SecItemExport`，使用创建 OpenSSL 证书`d2i_X509`，然后使用 将其添加到 OpenSSL 存储中`X509_STORE_add_cert`。Mac 功能可从`/Systems/Library/Frameworks/Security.framework/Security`.

更好的方法可能是创建一个`X509_STORE`带有回调的 OpenSSL，该回调使用操作系统函数来验证单个根证书，而不是复制所有这些，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T20:30:53.053

在 OS X 上，您可以从用户的钥匙串中获取有关用户信任的证书的信息。这是一个链接，其中包含一些关于使用 Cocoa 收集该信息的非常好的信息：

[在钥匙串中获取证书](https://stackoverflow.com/questions/5767957/get-certificates-in-keychain)

如果 Cocoa 不能满足您的需求，并且您想直接从命令行执行所有操作，则可以使用实用程序 - `certtool`see`man certtool`和其他在线文档来了解它。要列出用户登录钥匙串中的所有证书，您可以这样做：

```
certtool y k=login.keychain 
```

或者获取内置可信系统根的列表：

```
certtool y k=/System/Library/Keychains/SystemRootCertificates.keychain 
```

有可能

```
certtool y k=/System/Library/Keychains/SystemCACertificates.keychain 
```

我确信还有其他方法可以使用系统接口获取该信息。

在 Linux 方面，是`/etc/ssl/certs/ca-certificates.crt`的，这是正确的方法。安装软件包后，该文件将存在于 Debian 衍生产品（包括 Ubuntu 变体）上`ca-certificates`，我不确定如何在基于 redhat 的系统上正确获取该文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T20:38:20.797

您可以使用从 Mozilla 转换列表[`curl`的脚本（来自](http://curl.haxx.se/docs/caextract.html)[Curl 的维护者的回答](https://stackoverflow.com/a/10024031/372643)）。根据[其代码](https://github.com/bagder/curl/blob/master/lib/mk-ca-bundle.pl)，它似乎在包含证书之前检查证书是否受信任。

# php - MySql：如果值存在则更新否则插入

> ID：10095680
> 
> 赞同：16
> 
> 时间：2012-04-10T20:06:06.510
> 
> 标签：php, mysql

我有一些看起来像这样的代码。表中还有一个我必须保留的自动增量字段（它在其他表中使用）。我想简化和优化这段代码。

```
$query ="SELECT * FROM models WHERE col1 = 'foo'";
$testResult = mysql_query($query) or die('Error, query failed');    

if(mysql_fetch_array($testResult) == NULL){
    //insert...
    $query ="INSERT INTO models (col1, col2, col3)
    VALUES ('foo', 'bar', 'alph')";
    $result = mysql_query($query) or die('Error, query failed');
}else{
    //update...
    $query = "UPDATE models
        SET col1='foo', col2='bar', col3='alph'
        WHERE col1='foo' AND col2='bar'";
        $result = mysql_query($query) or die('Error, query failed');        
} 
```

编辑：主键 id 是自动递增的字段。我永远不想改变这一点。但是，当另一个字段重复时，这就是我想要更新该记录的时候。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-10T20:13:34.410

如何替换成：

```
REPLACE INTO models
( col1, col2, col3 )
VALUES
( 'foo', 'bar', 'alpha' ) 
```

假设 col1 是您的主键，如果已存在值为 'foo' 的行，它将更新其他两列。否则它将插入一个新行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T20:15:18.690

You only need to update col3 on duplicate. This is exactly what you are asking for.

```
INSERT INTO models (col1, col2, col3)
VALUES ('foo', 'bar', 'alpha')
ON DUPLICATE KEY UPDATE col3='alpha'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T20:08:53.630

您可以尝试使用“INSERT ... ON DUPLICATE KEY UPDATE”语法

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
If you specify ON DUPLICATE KEY UPDATE, and a row is inserted that would cause a duplicate value in a UNIQUE index or PRIMARY KEY, an UPDATE of the old row is performed. For example, if column a is declared as UNIQUE and contains the value 1, the following two statements have identical effect:

INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=c+1;

UPDATE table SET c=c+1 WHERE a=1;
The ON DUPLICATE KEY UPDATE clause can contain multiple column assignments, separated by commas.

With ON DUPLICATE KEY UPDATE, the affected-rows value per row is 1 if the row is inserted as a new row and 2 if an existing row is updated.

If column b is also unique, the INSERT is equivalent to this UPDATE statement instead:

UPDATE table SET c=c+1 WHERE a=1 OR b=2 LIMIT 1;
If a=1 OR b=2 matches several rows, only one row is updated. In general, you should try to avoid using an ON DUPLICATE KEY clause on tables with multiple unique indexes.

You can use the VALUES(col_name) function in the UPDATE clause to refer to column values from the INSERT portion of the INSERT ... UPDATE statement. In other words, VALUES(col_name) in the UPDATE clause refers to the value of col_name that would be inserted, had no duplicate-key conflict occurred. This function is especially useful in multiple-row inserts. The VALUES() function is meaningful only in INSERT ... UPDATE statements and returns NULL otherwise. Example:

INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)
  ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b);
That statement is identical to the following two statements:

INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=3;
INSERT INTO table (a,b,c) VALUES (4,5,6)
  ON DUPLICATE KEY UPDATE c=9;
If a table contains an AUTO_INCREMENT column and INSERT ... UPDATE inserts a row, the LAST_INSERT_ID() function returns the AUTO_INCREMENT value. If the statement updates a row instead, LAST_INSERT_ID() is not meaningful. However, you can work around this by using LAST_INSERT_ID(expr). Suppose that id is the AUTO_INCREMENT column. To make LAST_INSERT_ID() meaningful for updates, insert rows as follows:

INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3;
The DELAYED option is ignored when you use ON DUPLICATE KEY UPDATE. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T20:10:18.163

对于 MySQL 5.0 + 使用：`INSERT ON DUPLICATE KEY UPDATE`

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# c# - WPF 的错误提供程序

> ID：10095687
> 
> 赞同：0
> 
> 时间：2012-04-10T20:06:21.840
> 
> 标签：c#, wpf, winforms, xaml, errorprovider

我应该在 WPF 中使用什么而不是 WinForms ErrorProvider 控件来显示错误消息？

我查看了 codeplex 和[http://gallery.expression.microsoft.com/](http://gallery.expression.microsoft.com/)，但没有看到任何类似的东西。

任何人都可以向我建议一个好的 WPF 替代品吗？

**更新：**

让我们采用[关于 WPF 验证的 codeproject 文章](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)中应用的标准方法：

```
<TextBox>
    <TextBox.Text>
        <Binding Path="Name">
            <Binding.ValidationRules>
                <ExceptionValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

这符合 .net 3 规则。在 .net 4 中，Expression Blend 生成如下代码：

```
<TextBox Margin="48,72,63,201" TextWrapping="Wrap" Text="{Binding Input, ElementName=Window, FallbackValue=1+1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TextChanged="TextBox_TextChanged" /> 
```

并尝试在此 TextBox 中添加 Binding.ValidationRules 会使代码崩溃。

在 .net 4 中添加验证的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:05:40.670

你可以自己做。看看[这里](https://stackoverflow.com/questions/10817039/wpf-validationerror-summary-behavior-control)，看看我做了什么。

![在此处输入图像描述](../Images/8695b38a51af0907702b4802ce8d394a.png)

# javascript - 删除 TinyMCE 控件并重新添加

> ID：10095696
> 
> 赞同：7
> 
> 时间：2012-04-10T20:07:08.537
> 
> 标签：javascript, html, tinymce, state

我有一个永远不会重新加载页面的 js 应用程序，因此在导航时我需要完全删除 TinyMCE 控件，然后我想在导航到需要它的区域时重新初始化。我尝试了这个问题的公认答案，但它似乎什么也没做。

[如何删除 tinyMCE 然后重新添加？](https://stackoverflow.com/questions/4651676/how-do-i-remove-tinymce-and-then-re-add-it)

```
 tinymce.EditorManager.execCommand('mceRemoveControl',true, editor_id); 
```

和我的具体暗示：

```
 //if I throw an alert here, it does get called, so I know it's not null
  if (tinyMCE.getInstanceById("main-text"))
            tinyMCE.EditorManager.execCommand('mceRemoveControl', true, "main-text"); 
```

我也试过

```
 tinyMCE.remove( tinyMCE.getInstanceById("main-text"));
  // AND
  tinyMCE.remove( "main-text"); 
```

我知道当我在条件中添加警报时，该语句会被执行......我知道这是正确的 ID——API 中是否还有其他东西我遗漏了？这不是 jQuery 版本。删除尝试后编辑器仍然存在，如果我通过导航回表单状态重新初始化它，我什至会得到一个具有相同 ID 的新编辑器。

**编辑：下面的解决方案在当前版本 3.5b3 中不起作用，仅在 3.4.9 中起作用。有一个错误，其中 't 未定义'**

以防万一，这是初始化后 DOM 的相关部分。

```
 <textarea id="main-text" style="display: none;" aria-hidden="true"></textarea>
<span id="main-text_parent" class="mceEditor defaultSkin" role="application" aria-labelledby="main-text_voice" style="display: inherit;">
<span id="main-text_voice" class="mceVoiceLabel" style="display:none;">Rich Text Area</span>
<table id="main-text_tbl" class="mceLayout" cellspacing="0" cellpadding="0" role="presentation" style="width: 100%; height: 400px;">
<tbody>
<tr class="mceFirst" role="presentation">
<td class="mceToolbar mceLeft mceFirst mceLast" role="presentation">
<div id="main-text_toolbargroup" aria-labelledby="main-text_toolbargroup_voice" role="group" tabindex="-1">
<span role="application">
</div>
<a onfocus="tinyMCE.getInstanceById('main-text').focus();" title="Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X" accesskey="z" href="#"></a>
</td>
</tr>
<tr>
<tr class="mceLast">
</tbody>
</table>
</span> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-25T11:46:53.300

任何遇到这个帖子的人。现在**tinymce 4.X**支持仅通过调用 remove 函数来删除一个或多个编辑器表单页面。

[http://www.tinymce.com/wiki.php/api4:method.tinymce.remove](http://www.tinymce.com/wiki.php/api4:method.tinymce.remove)

```
// Remove all editors bound to divs
tinymce.remove('div');

// Remove all editors bound to textareas
tinymce.remove('textarea');

// Remove all editors
tinymce.remove();

// Remove specific instance by id
tinymce.remove('#id'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T20:39:49.257

我遇到过几次。为了解决它，我确保 tinyMCe 控件没有焦点（在某些浏览器中导致一些错误），删除 tinyMCE 控件，并删除控件关联的文本区域。

以下是相关代码：

```
if (typeof tinyMCE != 'undefined') {
    tinyMCE.execCommand('mceFocus', false, 'main-text');
    tinyMCE.execCommand('mceRemoveControl', false, 'main-text');
    var container = document.getElementById('main-text-parent');
    container.removeChild(document.getElementById('main-text'));  
    //i normally just do $("#main-text").remove(); but you specified not using jquery, so this should, in theory, remove it, if main-text-parent is replaced with the parent container of your main-text.
} 
```

# apache-flex - 如何在 Flex 中向轴标签添加点击事件

> ID：10095697
> 
> 赞同：1
> 
> 时间：2012-04-10T20:07:18.530
> 
> 标签：apache-flex

我有一个带有垂直轴的条形图

```
<mx:verticalAxis >
    <mx:CategoryAxis id="catAxis" title="Employee"  categoryField="id"/>
</mx:verticalAxis> 
```

我希望垂直轴上的标签是可点击的。因此，当用户单击标签时，会触发单击事件，我可以对其进行处理。我对点击栏本身不感兴趣（我知道如何实现）

我尝试向 Mouse.Click 类型的 CategoryAxis 添加一个事件侦听器，但没有被触发。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:08:12.760

好的，我让它工作了。我将发布答案，以便其他有类似要求的人受益。所以，Timofei Davydik 帮助我找到了正确的方向。我创建了一个名为`MyLabelRenderer`extends的 ActionScript 类`ChartLabel`。在它的构造函数中，我添加了所有的事件监听器，比如我需要的鼠标点击事件。

这是棘手的部分。感谢 KB（朋友）提供正确的实例化。在我的图表所在的主应用程序中，我必须以这种方式实例化我的新类的一个实例`MyLabelRenderer`：

```
private var myLabelRenderer:ClassFactory = new ClassFactory(MyLabelRenderer); 
```

然后您可以通过以下方式将其分配给 AxisRenderer 对象：

```
<mx:verticalAxisRenderers>
    <mx:AxisRenderer axis="{catAxis}" labelRenderer="{myLabelRenderer}"/>
</mx:verticalAxisRenderers> 
```

祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:07:21.693

我建议如下：

1.  创建您的自定义轴渲染器（扩展`AxisRenderer`）并将其分配给您正在使用的`verticalAxisRenderer`样式属性。`Axis`
2.  创建自定义标签渲染器并将其分配给`labelRenderer`轴渲染器的属性。您可以在其中添加点击侦听器。*注意：标签渲染器必须实现 IDataRenderer 和 IFlexDisplayObject 接口。*

# java - 来自 Go 编程语言的 Android 应用

> ID：10095698
> 
> 赞同：18
> 
> 时间：2012-04-10T20:07:19.210
> 
> 标签：java, android, go

我从谷歌听到关于 Go 编程语言的嗡嗡声。Wikipedia 是这样描述它的：“Go 旨在提供静态类型编译语言的效率和动态语言的易于编程”。我在想，既然它是来自 android 制造商的语言，他们应该对创建 android 应用程序有一些支持。是否有任何工具可以从 Go 创建 android 应用程序？假设“SOMEDAY” android 可能基于 GO，Go 是否值得学习。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T20:15:10.477

There's currently no way to build Android apps with Go, and some hypothetical future version of Android isn't a good reason to invest time in Go today.

That said, Go *is* a great language, you can do a lot with it like write webservers, command line apps, and even AppEngine apps. So there's lots of good reasons to learn Go! But Android isn't one of them.

**Edit**: As of Go 1.5 it is possible to write Android apps completely in Go or as a Java app calling a Go JNI library. iOS is also expected to arrive in time for the final 1.5 release. Go to [https://github.com/golang/mobile](https://github.com/golang/mobile) for more details.

# c# - 从潜在客户“状态原因”中获取潜在客户“状态”

> ID：10095700
> 
> 赞同：2
> 
> 时间：2012-04-10T20:07:22.860
> 
> 标签：c#, dynamics-crm-2011

在 Dynamics CRM 中，潜在客户实体同时具有状态和状态原因。使用 API，我可以获得所有状态原因。我被绊倒的地方是当我的用户选择状态原因时，我想向后工作并找出与所选状态原因相关联的状态。

以下是我获取所有状态原因的方法：

```
 //get the list of status reasons 
 RetrieveAttributeRequest request = new RetrieveAttributeRequest();
 request.EntityLogicalName = "lead";
 request.LogicalName = "statuscode";

 RetrieveAttributeResponse response = RetrieveAttributeResponse)theOrgContext.Execute(request);
StatusAttributeMetadata picklist = (StatusAttributeMetadata)response.AttributeMetadata;
 foreach (OptionMetadata option in picklist.OptionSet.Options)
 {
  retval.ListOfStatuses.Add(option.Value.Value, option.Label.UserLocalizedLabel.Label.ToString());
 } 
```

要更新我只是使用 LINQ 的实体：

```
 //set the status to the new value
 theLead.StatusCode.Value = int.Parse(statusValue);

theLead.StateCode = ???

//mark the object as updated
theContext.UpdateObject(theLead);

//persist the changes back to the CRM system
theContext.SaveChanges(); 
```

我只是不知道如何查询 CRM 以确定我需要为 ???

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T22:32:02.620

您可以使用状态检索状态信息。

```
RetrieveAttributeRequest req = new RetrieveAttributeRequest();
req.EntityLogicalName = "lead";
req.LogicalName = "statuscode";
req.RetrieveAsIfPublished = true;
RetrieveAttributeResponse res = (RetrieveAttributeResponse)yourContext.Execute(req);

StatusAttributeMetadata attribute = (StatusAttributeMetadata)res.AttributeMetadata;
foreach (StatusOptionMetadata oStatusOptionMetaData in attribute.OptionSet.Options)
{
    var state = oStatusOptionMetaData.State.Value;
    var status = oStatusOptionMetaData.Value.Value;
} 
```

# python - 在python的for循环中声明可调用变量

> ID：10095702
> 
> 赞同：0
> 
> 时间：2012-04-10T20:07:24.100
> 
> 标签：python, variables, loops

我的 python 代码有问题。我正在使用 tkinter 在 python 中编写一个 GUI，它显示几个块，大约 10 行，每行有 4 个单选按钮，一个输入字段和一个比例。下面的代码

```
 for r,v,mi,ma,i in zip(self.radiobuttonShapes, self.valueShapes, self.minShapes, self.maxShapes, range(1,10)):
        ttk.Label(self.Shape, text="Shape " + str(i)).grid(column=0, row=i)
        ttk.Radiobutton(self.Shape, text="Off", variable=r, value=1, command=self.resetAllRadiosShape).grid(column=1, row=i)
        ttk.Radiobutton(self.Shape, text="Max", variable=r, value=2, command=self.resetAllRadiosShape).grid(column=2, row=i)
        ttk.Radiobutton(self.Shape, text="Min", variable=r, value=3, command=self.resetAllRadiosShape).grid(column=3, row=i)
        ttk.Radiobutton(self.Shape, text="Approx", variable=r, value=4, command=self.resetAllRadiosShape).grid(column=4, row=i)
        ttk.Entry(self.Shape, textvariable=v).grid(column=5, row=i)
        ttk.Scale(self.Shape, from_=mi, to=ma, variable=v).grid(column=6, row=i) 
```

这主要工作正常。当我想添加一个标签以将其全部放入并用另一行（包括输入字段和比例）扩展该标签以与 approx 选项一起使用时，我的问题就出现了。

我的问题包括无法动态创建变量，并且之后无法通过它们的方法访问它们。

可能不太清楚，但我认为下面的虚拟代码使它更容易。我希望能够使其部分处于非活动状态（未选择 approx 时的 approx 字段）。

```
for i in 1 2 3 4 5 6 7 8 9
    self.outerLabel$(i) = ttk.Label(self.Shape).grid(row=i)
    self.upperLabel$(i) = ttk.Label(self.outerLabel$(i)).grid(row=0)
    ttk.Radiobutton(self.upperLabel$(i)).grid(column=0)
    ttk.Radiobutton(self.upperLabel$(i)).grid(column=1)
    ttk.Radiobutton(self.upperLabel$(i)).grid(column=2)
    ttk.Radiobutton(self.upperLabel$(i)).grid(column=3)
    ttk.Entry(self.upperLabel$(i)).grid(column=4)
    ttk.Scale(self.upperLabel$(i)).grid(column=5)
    self.lowerLabel$(i) = ttk.Label(self.outerLabel$(i)).grid(row=1)
    ttk.Entry(self.lowerLabel$(i)).grid(column=0)
    ttk.Scale(self.lowerLabel$(i)).grid(column=1)
    self.lowerLabel$(i).configure(state=DISABLED) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:13:08.253

您应该为此使用[字典](http://docs.python.org/tutorial/datastructures.html#dictionaries)，而不是动态变量名称，设置代码如下所示：

```
def __init__(self):
    self.outerLabels = {}
    self.upperLabels = {}
    # whatever else is currently in __init__() 
```

无论代码来自您的问题：

```
for i in range(1, 10):
    self.outerLabels[i] = ttk.Label(self.Shape).grid(row=i)
    self.upperLabels[i] = ttk.Label(self.outerLabels[i]).grid(row=0)
    ttk.Radiobutton(self.upperLabels[i]).grid(column=0)
    ttk.Radiobutton(self.upperLabels[i]).grid(column=1)
    ttk.Radiobutton(self.upperLabels[i]).grid(column=2)
    ttk.Radiobutton(self.upperLabels[i]).grid(column=3)
    ttk.Entry(self.upperLabels[i]).grid(column=4)
    ttk.Scale(self.upperLabels[i]).grid(column=5)
    self.lowerLabels[i] = ttk.Label(self.outerLabels[i]).grid(row=1)
    ttk.Entry(self.lowerLabels[i]).grid(column=0)
    ttk.Scale(self.lowerLabels[i]).grid(column=1)
    self.lowerLabels[i].configure(state=DISABLED) 
```

# php - 重写包含问号的 URL

> ID：10095704
> 
> 赞同：1
> 
> 时间：2012-04-10T20:07:31.380
> 
> 标签：php, url-rewriting, get, query-string

我遇到了有关 URL 重写的问题。我正在使用 Apache 的 mod rewrite 来重写 URL。例如，我重写 URL

*   `www.website.com/some/path/`到
*   `request.php?string=some/path/`.

然后我显示此 URL 的特定响应。现在我的重写规则如下所示：

```
RewriteRule ^([a-z_/\?]+)$ request.php?string=$1 
```

但是如果我有 URL`www.website.com/some/data/?id=12&name=John`并重写它，问题就开始了，我得到这样的东西：`request.php?string=some/data/?id=12&name=John`. 似乎在这个例子中另一个问号混淆了 PHP。如果我尝试`$_GET['string']`在 request.php 中检索，我得到的只是：`some/data/`。

为了进一步参考，Gmail 对其 URL 做了类似的事情：
`https://mail.google.com/mail/?ui=1&shva=1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:11:44.877

我建议（作为马里奥）查看[QSA 标志（查询字符串附加）](http://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsa)。此外，我会将问号从正则表达式中的字符类中取出：

```
RewriteRule ^([a-z_/]+)$ request.php?string=$1 [L,QSA] 
```

# xml - JUnit 4 结果到 XML 转换

> ID：10095707
> 
> 赞同：3
> 
> 时间：2012-04-10T20:07:57.407
> 
> 标签：xml, junit, junit4, transformation

我一直在尝试编写代码以使用 Junit 报告的标准模式从 Junit Result 对象生成 XML 输出。

我使用 Junit 4 触发我的测试，因此我使用 JunitCore 实例来执行我​​的测试。因此，在我的情况下，使用 JunitTask 实例复制执行是没有意义的。

我正在覆盖 Junit4 中可用的 testRunfinished(Result) 方法。我想在这里编写转换逻辑，以便它生成 XML，然后可以使用标准 XSLT 查看。

一种方法是编写一个转换器，它创建一个文档对象，然后以编程方式添加节点，从而创建 XML。但这将硬连线报告结构。

Ant 公开的所有类似乎都与 Junit3 一起工作，并且似乎没有将执行测试和报告结果的关注点分开，因此它们强制执行（XMLResultAggregator）。

1.  有这样做的标准方法吗？Ant 或 Junit 暴露的库？
2.  是否有替代方法（Ant 不适合我）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:19:03.600

为什么不在标题报告中生成带有 CSS 的独立 HTML？甚至是纯 txt 报告。

我使用复制的模板生成了 XML 报告，然后使用 Java xml 框架填写了字段。

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult; 
```

# wordpress - 按自定义字段首字母过滤查询 - Wordpress

> ID：10095712
> 
> 赞同：0
> 
> 时间：2012-04-10T20:08:20.117
> 
> 标签：wordpress, indexing, custom-fields

我正在处理目录人员列表。我选择了一个自定义解决方案，因为用于此目的的插件对于我正在寻找的东西来说太复杂或太简单了。所以我创建了这个自定义的帖子类型“员工”，并附有自定义分类法（科学、数学、管理等），所以我有一个查询，我在表格中列出了所有这些帖子，我的代码如下所示。

```
<table class="directorytable">
   <thead>
      <th class="first-th">Portrait</th>
      <th>Name</th>
      <th>Position</th>
      <th>Phone</th>
      <th style="width:60px !important;text-align:center;">Email&nbsp;&nbsp;&nbsp;&nbsp;</th>
      <th style="width:60px !important;text-align:center;">Website&nbsp;&nbsp;</th>
      <th style="width:60px !important;text-align:center;">Details&nbsp;&nbsp;</th>  
   </thead>
<?php query_posts(array('post_type'=>'staff','orderby'=>'meta_value','meta_key'=>'staff_last_name','order'=>'asc'))?>
<?php while(have_posts()): the_post();?>

<tr>
    <td class="first-td"><a rel="lightbox" href="<?php the_permalink(); ?>"/><img src="<?php the_field('staff_portrait');?>" style="border-radius:2px; width:35px;"/></a></td>
<td><a rel="lightbox[1]" href="<?php the_permalink();?>"><?php the_field('staff_name');?> <?php the_field('staff_last_name');?></a> </td>
<td><?php the_field('staff_position'); ?></td>
<td><?php the_field('staff_phone');?> | <strong>Ext: </strong><?php the_field('staff_extension')?></td>
<td style="width:60px; text-align:center;"><a href="mailto:<?php the_field('staff_email');?>"><img src="/images/directory/mail.png"/></a></td>
<td style="width:60px; text-align:center;"><?php if(get_post_meta($post->ID,'staff_website', true)){?><a target="_blank" href="<?php the_field('staff_website');?>"><img src="/images/directory/document-globe.png"/></a><?php } else {?><?php echo '';?><?php } ?></td>
<td style="width:60px; text-align:center;"><a rel="lightbox[2]" href="<?php the_permalink();?>"><img src="/images/directory/magnifier-zoom.png"/></a></td>
</tr>   
<?php endwhile; ?>
</table> 
```

所以这个列表工作得很好，但我的客户要求我添加一个字母索引。因此，我需要在结果之前列出一个范围 az，然后单击时，仅显示其“staff_last_name”自定义字段（我正在使用 ACF）以所选字母开头的帖子。

我尝试过一些插件，如 AZIndex、WP-Snap 等，但没有一个对我有用。

对于此事，我将不胜感激任何建议/解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:27:27.300

我假设你有你正在搜索的初始值（即你正在生成链接 OK，然后检索传递的值，比如通过`$_GET`或添加 a `query_var`，如[本例所示](http://codex.wordpress.org/Custom_Queries#Custom_Archives)）。

我还假设您已经检查过它是否具有有效值（例如，是单个字母字符）。

假设该值存储在一个名为 的变量中`$initial`，将您的查询更改为类似

```
<?php query_posts (
        array(
            'post_type'=> 'staff',
            'orderby'  => 'meta_value',
            'meta_key' => 'staff_last_name',
            'order'    => 'asc',
            'meta_query' => array(
                array(
                    'key' => 'staff_last_name',
                    'value' => $initial,
                    'compare' => 'LIKE'
                )
            )
        )
    );
?> 
```

将生成您需要的大部分内容（有关更多详细信息，请参阅[WordPress 法典](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)），但不幸的是，它会`$initial`在姓氏的任何地方找到。如果查询区分大小写，并且只有第一个字符（和`$initial`）是大写的，这可能无关紧要。

如果它不能按您的需要工作，我可以想到三个选项：

1.  使用“BETWEEN”而不是“LIKE”，并传递您正在搜索的字母的值和后面的字母（按 ASCII 值递增）例如，如果您正在搜索以“A”开头的名称，则传递“A,B” ',
2.  使用上面的查询添加一个`get_meta_sql`过滤器，并将参数中的“'%”替换为“'”。如果您的查询中有任何其他 LIKE 条件，这可能会产生意想不到的副作用，或者
3.  添加`posts_where`过滤器以自行添加所需的 SQL。

# javascript - 在第一次和第二次点击时更改 URL

> ID：10095714
> 
> 赞同：3
> 
> 时间：2012-04-10T20:08:21.580
> 
> 标签：javascript, jquery

我已经在互联网和 stackoverflow 上搜索了如何触发第二次点击功能，这就是我发现的：

```
$('.elementclass').toggle(
function(){
   //on odd
    },
function(){
   //on even
}); 
```

这是完美的。现在根据这个我尝试更改我的文档的 URL，但有些东西不起作用。这是我的代码：

```
$('.orderby').toggle(
function(){
      document.location.href+='?orderby='+$(this).val()+'ASC';
},
function(){
      document.location.href+='?orderby='+$(this).val()+'DESC';
}); 
```

`$(this).val()`名称或日期之类的东西在哪里...

我想要完成的是：第一次单击按钮时，URL 更改为[http://blablabla/page.php?orderby=nameASC](http://blablabla/page.php?orderby=nameASC)，然后在第二次单击时，URL 更改为[http://blablabla/page。 php?orderby=nameDESC](http://blablabla/page.php?orderby=nameDESC)。

那么我的代码有什么问题？

**当用户单击按钮时，我不想刷新页面，我只想添加一些（在这种情况下为一个）参数，稍后可以使用 $_GET 但在同一 page.document.URL 上可以更新 +=？ orderby=nameASC 在第一次单击和第二次单击时需要删除 +=?orderby=nameASC 并且 document.URL 更新为 +=?orderby=nameDESC。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:11:54.313

您的页面更改，因此脚本再次加载。您需要测试您拥有的网址

**更新以处理不同的 orderby 值**

```
$(document).ready(function() {
  $('.orderby').click(
    function(){
     var srch = location.search;
     if (srch) srch = srch.substring(1); // lose the ?
     var val = $(this).val();

     if (srch.indexOf(val+"ASC")!=-1)
       srch = srch.replace(val+"ASC",val+"DESC");
     else if (srch.indexOf(val+"DESC")!=-1)
       srch = srch.replace(val+"DESC",val+"ASC");
       else if (!srch || srch.indexOf("orderby")!=-1) {
         // if srch was empty or contained another value than this'
         srch ='orderby='+$(this).val()+'ASC'; 
       }
     var loc = (location.search)?location.href.split("?")[0]:location.href;
     window.location = loc + "?"+srch;
  });
}); 
```

PS：document.location.href 在很多年前就被弃用了。请改用 document.URL 或 window.location.href

PPS：正如 MilkyWayJoe 正确指出的那样 - 为什么要麻烦 - 如果页面从服务器加载到当前页面而不是 iframe 或 ajaxed，然后在服务器上设置按钮的值并有一个正常的链接 - 这样就可以了即使关闭 JS 也可以工作

* * *

**更新2**

如果你使用 AJAX，你想做一些事情，比如

```
$(document).ready(function() {
  if (location.hash.indexOf(....) {
    // find the element which is mentioned in the orderby and click it
    var $elem = ....
    $elem.click(); // or trigger
  }

  $('.orderby').toggle(
    function(){
      $("#someLabel").html("DESC");
      var orderBy = $(this).val()+'ASC';
      location.hash = orderBy; // now URL will be ...#nameASC
      $("#content").load('soneserverprocess?orderby='+orderBy);
  },
  function(){
      $("#someLabel").html("ASC");
      var orderBy = $(this).val()+'DESC';
      location.hash = orderBy; // now URL will be ...#nameDESC
      $("#content").load('someserverprocess?orderby='+orderBy);
  });
}); 
```

如果要使用浏览器内排序，请使用其中之一

[http://www.tripwiremagazine.com/2012/02/jquery-filter-sort-plugins.html](http://www.tripwiremagazine.com/2012/02/jquery-filter-sort-plugins.html)

并且有

```
$(document).ready(function() {
  if (location.hash.indexOf(....) {
    // find the element which is mentioned in the orderby and click it
    var $elem = ....
    $elem.click(); // or trigger
  }

  $('.orderby').toggle(
    function(){
      $("#someLabel").html("DESC");
      var orderBy = $(this).val()+'ASC';
      location.hash = orderBy; // now URL will be ...#nameASC
      $("#content").sort(....); // depending on plugin
    },
    function(){
      $("#someLabel").html("ASC");
      var orderBy = $(this).val()+'DESC';
      location.hash = orderBy; // now URL will be ...#nameDESC
      $("#content").sort(....); // depending on plugin
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:17:26.107

当您导航到新页面（或重新加载当前页面）时，您的 Javascript 执行环境将被重置。这意味着该`toggle`函数每页只执行一次，因此永远不会使用第二个函数。

你最好做这样的事情：

```
$('.orderby').click(function() {
    if(/ASC$/.test(window.location.href) {
        // switch to DESC
    } else {
        // switch to ASC
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:18:18.340

根据您的代码，页面将在每次点击时重新加载，库也是如此~~。~~~~在这种情况下，~~只会执行切换函数中的第一个处理程序。所以它会一直如此`ASC`。

您可能需要一个简单的单击处理程序，并在处理程序内查找`window.location.search`has`ASC`或`DES`.

# c++ - C++ 二进制文件在 Windows XP 上不起作用

> ID：10095716
> 
> 赞同：1
> 
> 时间：2012-04-10T20:08:46.463
> 
> 标签：c++, visual-studio, windows-xp

我在 Windows 7 上的 VS 11 Beta 中编译了一个非常基本的 C++ 程序。

除运行时库外，所有项目设置均为默认设置。我将多线程 DLL (/MD) 更改为多线程 (/MT)。据我所知，这静态链接运行时库。

尝试在另一台安装了 VS 11 Beta 的 Windows 7 机器上运行此 exe 可以正常工作。

试图在没有安装 VS 的 windows XP 机器上运行它会导致弹出错误提示。

“ *** *.exe 不是有效的 Win32 应用程序”

是否需要更改某些设置才能使在 Win7 上使用 VS 11 Beta 编译的 XP 上的二进制工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:17:06.483

VS 11 不再支持 Windows XP。这是 Microsoft 的设计。

[http://connect.microsoft.com/VisualStudio/feedback/details/690617](http://connect.microsoft.com/VisualStudio/feedback/details/690617)

> 此行为是在 MFC 和 CRT for Visual Studio 11 Beta 中设计的。支持的最低操作系统是 Windows Server 2008 SP2 和 Windows Vista。Windows XP 不是 Beta 版本（设计时或运行时）支持的操作系统。

进一步阅读讨论，发布版本可能支持 Windows XP。不过我不会指望它。

**编辑：**微软让步了：[在 Visual Studio 2012 中使用 C++ 定位 Windows XP](http://blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:11:05.983

可能您为 64 位 Windows 编译。但是，Windows XP 仅支持 32 位代码。

# hadoop - 将目录而不是文件传递给hadoop-streaming？

> ID：10095717
> 
> 赞同：7
> 
> 时间：2012-04-10T20:08:49.990
> 
> 标签：hadoop, hadoop-streaming

在我的工作中，我需要解析许多历史日志集。个别客户（有数千个）可能有数百个按日期划分的日志子目录。例如：

*   日志/Customer_One/2011-01-02-001
*   日志/Customer_One/2012-02-03-001
*   日志/Customer_One/2012-02-03-002
*   日志/Customer_Two/2009-03-03-001
*   日志/Customer_Two/2009-03-03-002

每个单独的日志集本身可能有五到六级深度并包含数千个文件。

因此，我实际上希望单个地图作业能够处理遍历子目录：简单地枚举单个文件是我的分布式计算问题的一部分！

不幸的是，当我尝试将仅包含日志子目录的目录传递给 Hadoop 时，它抱怨我无法将这些子目录传递给我的映射器。（同样，我已经写信接受子目录作为输入）：

`$ **hadoop jar "${HADOOP_HOME}/contrib/streaming/hadoop-streaming-${HADOOP_VERSION}.jar" -input file:///mnt/logs/Customer_Name/ -file mapper.sh -mapper "mapper.sh" -file reducer.sh -reducer "reducer.sh" -output .**`

 `[ . . . ]` 

`12/04/10 12:48:35 ERROR security.UserGroupInformation: PriviledgedActionException as:cloudera (auth:SIMPLE) cause:java.io.IOException: Not a file: file:/mnt/logs/Customer_Name/2011-05-20-003 12/04/10 12:48:35 ERROR streaming.StreamJob: Error Launching job : Not a file: file:/mnt/logs/Customer_Name/2011-05-20-003 Streaming Command Failed! [cloudera@localhost ~]$`

有没有一种直接的方法来说服 Hadoop-streaming 允许我将目录分配为工作项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:54:43.767

Hadoop 支持输入路径为*正则表达式*。我没有尝试过很多复杂的正则表达式，但是简单的占位符**？**和*****确实有效。

因此，在您的情况下，我认为如果您将以下内容作为输入路径，它将起作用：

```
file:///mnt/logs/Customer_Name/*/* 
```

最后一个星号可能不需要，因为最终目录中的所有文件都会自动添加为输入路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:04:00.603

我想您需要研究编写一个自定义 InputFormat ，您也可以传递根目录，它将为每个客户创建一个拆分，然后每个拆分的记录读取器将执行目录遍历并将文件内容推送到您的映射器

# php - HTML页面中MySQL的下拉列表

> ID：10095718
> 
> 赞同：0
> 
> 时间：2012-04-10T20:08:50.260
> 
> 标签：php, html, drop-down-menu

我试图在 html 页面中放置一个从 mysql 生成的下拉列表，问题是这段代码在 php 页面中工作正常，但在 html 页面中没有，我已将它放在 php 标记中但没有显示任何内容，我将不胜感激这里的任何帮助都是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Add Qustions</title>
 </head>
 <body>
  <form action="saveQ.php" method="post" >

  <br />
  <?php   $connectdb = mysql_connect('localhost','root','sara') or die ("Not Connect");
  if (!$connectdb)
  {
      die('Could not connect :'. mysql_errno());
  }
  $selestdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");
   $qu = mysql_query("SELECT ID,Name FROM Course ORDER BY ID asc") or die ("mysql error");
    echo "Choose the course that you want to create the test for : <br /> ";
    echo " <select name='courseID' >Course</option>";
    echo "<option value=0>Course </option>";
     $curvalue=2;
    while  ($row = mysql_fetch_assoc($qu)){
    echo '<option value="' .$row[ID].'">' .$row[ID].' ' .$row[Name].'</option>';
    $curvalue = $curvalue+1;
     }
     echo "</select> "; ?>
     <br />
      /// some other unrelated code here 
    <input type="submit" value="Save Question" />
    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:16:27.830

I personally don't like to echo out html in PHP so i use this method, in any case your issue is html based and not php based...

## Example PHP Model to Query DB :

```
<?php
$selectdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");
$qu = mysql_query("SELECT ID,Name FROM Course ORDER BY ID asc") or die ("mysql error");
?> 
```

## Example View File to Handle the DOM and html.

```
<p>Choose the course that you want to create the test for:</p><br />
<select name="courseID">
    <option value="0">0 Course</option>
    <option value="1">1 Course</option>
  <?php while( $row = mysql_fetch_assoc($qu) ): ?>
    <option value="<?= $row['ID']; ?>"><?php echo $row['ID'].' '.$row['Name']; ?></option>
  <?php endwhile; ?>
</select> 
```

**In short, you have an error here:** `echo " <select name='courseID' >Course</option>";`.

**It should be:** `echo " <select name='courseID' >Course</select>";`

* * *

**Also, you dont need to set `$curvalue = $curvalue+1;` You can simply do `$curvalue++;` IE:**

```
<?php
  while  ($row = mysql_fetch_assoc($qu)){
  <select name="courseID">
  <option value="<?= $row['ID']; ?>"><?php echo $row['ID'].' '.$row['Name']; ?></option>
  </select>
   $curvalue++;
 } 
```

**Also note** that its considered best practice to not mix DOM with Server side code. IE you should put the while statement and select boxes in a seperate php view file that iterates through things, rather than using `echo`. This way there is less server processing and more client side processing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:25:30.883

我认为这个脚本是你想要做的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Add Qustions</title>
</head>
<body>
    <form action="saveQ.php" method="post">
        <br />
        <?php  
            $connectdb = mysql_connect('localhost','root','sara') or die ("Not Connect");
            if (!$connectdb) die('Could not connect :'. mysql_errno());

            echo "          Choose the course that you want to create the test for: <br />
            <select name=\"courseID\">
                <option value=\"0\">Course </option>\n";

            $selestdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");
            $qu = mysql_query("SELECT ID,Name FROM Course ORDER BY ID asc") or die ("mysql error");
            while ($row = mysql_fetch_assoc($qu))
                echo "              <option value=\"{$row["ID"]}\">{$row["ID"]} {$row["Name"]}</option>\n";

            echo "          </select> ";
        ?>
        <br />
        <!-- some other unrelated code here -->
        <input type="submit" value="Save Question" />
    </form>
</body>
</html> 
```

您的脚本名称应以 PHP 扩展名结尾，例如 .php 或 .phtml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:12:06.263

也许是因为你这样做：

```
echo " <select name='courseID' >Course</option>"; 
```

将其更改为：

```
echo "<select name='courseID'>"; 
```

# java - 从超类型回退到子类型

> ID：10095720
> 
> 赞同：2
> 
> 时间：2012-04-10T20:08:55.440
> 
> 标签：java, casting

假设我有一个超级类型（Shape）和两个孩子（如 Square、Circle）。

我正在尝试做这样的事情：

```
Shape shape = someObject.getShape();

if (shape instanceof Square){
    shape = (Square) shape;
    // do this
} else if (shape instanceof Circle) {
    shape = (Circle) shape;
    // do that
} 
```

此外，由于获取实例似乎不是正确的 OO 原则，还有其他方法吗？干杯。

**编辑。**我不是想在它们上调用方法，我想将它们传递给一些需要它们特定子类型的方法。

**edit2**基本上我有一个 Shape 类型的集合，所以我可以在其中保存两种类型的子类型。但是当涉及到处理时，我需要知道这两个子类中的哪一个，所以我可以将它传递给一个将子类型作为参数的方法。我可以轻松地使用超类型作为参数，但这并不安全，因为我处理的是特定于子类型的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T20:10:50.033

您需要正确声明变量，例如：

```
if (shape instanceof Square){
    Square square = (Square) shape;
    // do this with square
} else if (shape instanceof Circle) {
    Circle circle = (Circle) shape;
    // do that with circle
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:23:34.243

一旦你在 Java 中声明了一个引用，你就不能改变他的类型。当你这样做时：

```
Shape shape = someObject.getShape(); 
```

你是说：“在变量形状中存储对形状的引用”。由于您无法更改其类型，因此没有任何意义

```
shape = (Square) shape; 
```

因为您说形状（左侧）是一个形状，无论作业右侧是什么。

请记住：一旦为引用声明了类型，就无法更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T00:16:27.320

我真的不明白你想在这里完成什么，但当然你可以在形式上有所不同

```
shape.getClass().isAssignableFrom(Square.class) ? processSquare((Square)shape) : processCircle((Circle)shape) 
```

如果您首先检查实际课程，那么该演员将没有问题。

**编辑**您的形状类类型不会改变：

```
Shape[] shapes = new Shape[]{new Circle()} 
```

当您循环浏览您的形状集合时，当您调用时，`shapes[0].getClass()`您将获得`Circle.class`类型。因此，在您迭代形状集合并需要决定调用哪种类型的特定集合时，您可以调用`shape.getClass().isAssignableFrom(Circle.class)`例如切换案例。然后你可以转换类型并调用你需要的方法。无需将形状对象保存在不同的集合中

# python - python django 无法让任何视图工作

> ID：10095721
> 
> 赞同：1
> 
> 时间：2012-04-10T20:08:56.923
> 
> 标签：python, django

我一直在尝试设置 django，以便开始学习它。但我什至无法显示一个简单的视图。这是我的文件结构：

```
âââ __init__.py
âââ __init__.pyc
âââ manage.py
âââ media
âââ pages
âÂ Â  âââ views.py
âââ settings.py
âââ settings.pyc
âââ templates
âÂ Â  âââ base.html
âÂ Â  âââ home.html
âââ urls.py
âââ urls.pyc 
```

抱歉，奇怪的符号，这就是 linux 计算机使用 tree 命令打印出来的方式。这是我的网址文件：

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'testsite.pages.views.home', name='home'),
    # url(r'^testsite/', include('testsite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls))
) 
```

基本上，我希望 example.com 指向 pages.views.home 视图。但它找不到它并不断给我错误：`Could not import testsite.pages.views. Error was: No module named pages.views`

我对 python 和 django 都是新手，所以我可能正在做一些简单得愚蠢的事情。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:11:36.123

您需要添加`__init__.py`到您的`pages`目录中，以使其成为 python 用语中的“包”。

这是 python 的一些不明显的行为。现在你知道了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:11:57.693

```
Could not import testsite.pages.views. Error was: No module named pages.views 
```

您需要使其`pages`可导入。`__init__.py`在`pages`目录中放一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:11:39.470

我认为您需要`__init__.py`在`pages`目录中创建空白文件。

# php - 如何使用 PHP 从文档中删除无效的 XML 字符

> ID：10095728
> 
> 赞同：3
> 
> 时间：2012-04-10T20:09:26.033
> 
> 标签：php, xml

我试图生成一个大约 23 到 30 MB 的 XML 文档，当我用 Firefox 打开它时，我收到

```
XML Parsing Error: not well-formed
Location: file:///Users/User/Downloads/export(2).xml
Line Number 137725, Column 1343: 
```

之后，我尝试使用验证文档[`XML Nanny`](http://ditchnet.org/xmlnanny/)并收到以下错误：

```
Invalid Character (Unicode: 0xB) 
```

在几 (13) 条线路上：137725、137738、137751、137764、137777、137790、137803、137816、146834、189949、193444、193457、193470

我尝试了几种“解决方案”，其中包括：

1.  正则表达式：

    ```
    preg_replace(
      '/[^\x9\xA\xD\x20-\x{D7FF}\x{E000}-\x{FFFD}\x{10000}-\x{10FFFF}]+/'
      , ' ', $data->Description); 
    ```

    这里的问题是我不太确定这是有效的正则表达式，因为我收到内部服务器错误，因为我们的 apache 中启用了 mod 安全性。

2.  我试图用 BOM 将我的文件保存为 UTF-8，但那是绝望的尝试

3.  我尝试将 iconv 与 'UTF-8//IGNORE' 一起使用，但这并没有帮助

4.  我尝试使用逐个字符替换，但这不适用于我的文件，因为我有 230k 行..即使我替换了我遇到问题的特定标签，我也会在 php 中触发 max_execution_time 指令和我的脚本被杀了。

*目前我的解决方案是手动清除此无效字符的数据库记录，但这现在是解决我的问题的正确和正确的解决方案，因为将来此脚本将用于自动执行此导出，并且手动编辑不是选项或演讲主题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:22:05.287

我首先要坚持 XML Nanny 提供的信息：

```
Invalid Character (Unicode: 0xB) (several lines) 
```

`0xB` 是控制字符范围中的一个字符，但在 XML 文档中只允许非常有限的控制字符。我建议你开始用数字实体替换那些，然后再试一次：

```
$xml = strtr($xml, array("\x0B" => "&#x0B;")); 
```

Firefox 可能会接受这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:48:49.007

我曾经遇到过类似的问题。我所做的是在通过 XML 发送数据之前使用 base64encode 对数据进行加密，然后在收到数据后对其进行解码。告诉我这是否适合你。或者如果我没有清楚地理解你的问题？

# iphone - 使用 OpenGL 和 GLKit 的基于图块的游戏性能低下

> ID：10095730
> 
> 赞同：0
> 
> 时间：2012-04-10T20:09:28.253
> 
> 标签：iphone, objective-c, ios, opengl-es, glkit

我将 openGL 与 GLKit 一起使用来制作基于图块的游戏。在游戏中，屏幕中放置了大约 1024 个图块，问题是我每次调用 drawInRect 时都在渲染图块，并且性能损失非常大。

这就是我的渲染方式（tilesArray 是静态的，ballsArray 在屏幕上移动）：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(1, 1, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT);    
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    for (int i = 0; i < [self.tilesArray count]; i++){            
        RPSprite *tempTile = [self.tilesArray objectAtIndex:i];
        [tempTile render];
    }

    for (RPSprite *ball in self.ballsArray){
        [ball render];
    }
} 
```

正如我所说，tilesArray 在屏幕中是静态的，但 ballsArray 在屏幕上移动得非常快（每次更新）。如果我只放球，它会非常快，如果我添加瓷砖，它会非常慢（仅在模拟器中尝试过）

这就是我渲染的方式：

```
- (GLKMatrix4) modelMatrix {

    GLKMatrix4 modelMatrix = GLKMatrix4Identity;  
    modelMatrix = GLKMatrix4Translate(modelMatrix, self.position.x,320 - self.position.y - self.textureInfo.height, 0);
    return modelMatrix;

}

- (void)render { 

    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;
    self.effect.transform.modelviewMatrix = self.modelMatrix;

    [self.effect prepareToDraw];

    long offset = (long)&_quad;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:46:47.647

我修复了它，减少了瓷砖使用的图像的大小，并在视图中放置了一个特定的帧率。

# c# - 访问匿名类型集合中的属性 - C#

> ID：10095733
> 
> 赞同：4
> 
> 时间：2012-04-10T20:09:40.730
> 
> 标签：c#, asp.net, linq, drop-down-menu, anonymous-types

在下面的源代码中，我从`users`集合中选择了一个属性子集，我需要将它绑定到一个下拉列表：

```
var locationDepts = (from u in users select new { u.RcNumber, u.RcName }).Distinct().ToList();

if(!locationDepts.Count.Equals(0))
{
    ddlRCListPerBuilding.DataSource = locationDepts;
    ddlRCListPerBuilding.DataValueField = "RcNumber";

    //Want to format display test "RCNumber - RcName"
    ddlRCListPerBuilding.DataTextField = string.Format("{0} - {1}", locationDepts.RcNumber, locationDepts.RcName);

    ddlRCListPerBuilding.DataBind();
} 
```

我想将列表项显示文本格式化为匿名类型 RcNumber 和 RcName 的组合。如何访问匿名类型的属性以指示下拉列表项的文本格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:14:28.690

您可以在名为“Combined”的数据源中创建一个新属性

```
var locationDepts = (from u in users 
                    select new 
                    { 
                        u.RcNumber, 
                        Combined = u.RcNumber + " - " + u.RcName
                    }).Distinct().ToList();

if(locationDepts.Count > 0)
{
    ddlRCListPerBuilding.DataSource = locationDepts;
    ddlRCListPerBuilding.DataValueField = "RcNumber";
    ddlRCListPerBuilding.DataTextField = "Combined";
    ddlRCListPerBuilding.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T20:14:41.770

我只想更改匿名类型以包含已格式化的值：

```
var locationDepts = (from u in users select new { u.RcNumber, RcName = String.Format("{0} - {1}", u.RcNumber, u.RcName) }).Distinct().ToList();

if(!locationDepts.Count.Equals(0))
{
    ddlRCListPerBuilding.DataSource = locationDepts;
    ddlRCListPerBuilding.DataValueField = "RcNumber";

    ddlRCListPerBuilding.DataTextField = "RcName";

    ddlRCListPerBuilding.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:22:33.283

您可以使用视图模型

```
public class RcFields
{
    public int RcNumber { get; set; }
    public string RcName { get; set; } 
}

List<RcFields> locationDepts = (from u in users 
                                select new RcFields 
                                { 
                                   u.RcNumber, 
                                   u.RcName 
                                })
                                .Distinct()
                                .ToList(); 
```

然后

```
 ... locationDepts.RcName .. 
```

# asp.net-mvc - 使用 @Html.EditorForModel() 而不用 mvc 程序集污染我的域实体

> ID：10095739
> 
> 赞同：0
> 
> 时间：2012-04-10T20:10:07.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, editorformodel

是否可以使用该`@Html.EditorForModel()`方法但不会污染我的域实体，如 Product with`HiddenInput`等`DataType(MultiLine)`。需要`System.Web.Mvc`组装的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:12:48.197

是的，这是可能的，但它将使用默认值来渲染事物。
例如：字符串将是一行文本框。

无法将此元数据放在其他地方。（除非您自己编写新的 HTML 助手。）

我们通常做的是，`ViewModel`为每个域实体使用一个，然后我们将元数据放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:02:29.780

我通常有两种模型——一种是领域实体，另一种是专门包含我想要的属性。然后我在他们两个之间映射/复制。我有一个简单的类，可以自动将属性从一个对象复制到另一个对象，但您可以手动执行此操作或使用类似[Automapper](https://github.com/AutoMapper/AutoMapper)的东西。然后你对这个新模型使用@Html.EditorFor。

# c# - 缺少设置我的数据库 Visual Studio 2010 的步骤

> ID：10095740
> 
> 赞同：0
> 
> 时间：2012-04-10T20:10:13.227
> 
> 标签：c#, database, linq

我似乎错过了在 Visual Studio 中设置数据库的步骤。我创建了一个名为“PhotoDatabase”的 .mdf 数据库。在服务器资源管理器中，我添加了一个名为“tbl_Photo”的新表，其中包含以下列：Image_ID、Image、Thumbnail、Name、Description。

现在我在我的 PhotoRepository(.cs) 类中，并试图将图像数据添加到我的表中，但它似乎无法找到表。

```
DataContext db = new DataContext(@"C:\Dev\MyFlickr\MyFlickr.WCF\App_Data\PhotoDatabase.mdf");
db. 
```

我到处都说我应该能够在 db 之后看到我的表名。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:53:25.633

我想我找到了你的问题。看起来您还没有创建一个 dbml 文件来将您的表映射到实体。您需要做的是在您的项目中添加一个新项目。在“数据”小节下，您将看到“LINQ to SQL 类”。添加它，然后从服务器资源管理器窗口将您的表拖到该类上。之后，您应该能够将您的表视为一个实体，并且上面的代码应该可以工作（或接近它的代码）。例如，我创建了一个像您一样的文件，并且以下代码有效：

```
DataContext db = new DataContext(@"C:\Temp\Test.mdf");
Table<Table1> myTable = db.GetTable<Table1>(); 
```

但是，为了让它工作，我必须创建那个 dbml 文件并将 Table1 添加到设计器中。有关如何使用此代码的更多信息，您可以查看此 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb399375.aspx](http://msdn.microsoft.com/en-us/library/bb399375.aspx)

# python - 获取 IOError：[Errno 2] 没有这样的文件或目录？

> ID：10095742
> 
> 赞同：0
> 
> 时间：2012-04-10T20:10:17.147
> 
> 标签：python, ioerror

这是我的代码，用于读取我知道存在并且可以轻松访问的特定图像：

```
fft_image = imread("fft_pic.png ")
ave = average(fft_image)
fft_image -= ave
dsq_array = get_d(fft_image.shape)
fft_image /= dsq_array
fft_image[0,0] = 0.0
image = real(ifft2(fft_image)) 
```

我已经在代码的前面导入了所有这些库：

```
import numpy
from scipy import *
from pylab import *
import scipy
import os
import re 
```

fft_pic.png 与程序文件位于同一文件夹中。关于我为什么会收到此错误的任何建议或想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T20:11:56.093

看起来最后有一个额外的空间：

```
fft_image = imread("fft_pic.png ") 
```

# java - 是否有可以筛选无效 MySQL 日期的 Hibernate 注释？

> ID：10095745
> 
> 赞同：0
> 
> 时间：2012-04-10T20:10:34.137
> 
> 标签：java, mysql, hibernate, datetime, annotations

我正在使用 Hibernate 4.0.1.Final 和 MySQL 5.1。我的域对象包含映射到 DATETIME 列的 java.util.Calendar 对象...

```
@NotNull
@Column(name = "START_DATE")
private Calendar startTime; 
```

有时，当日期时间值超出 MySQL DATETIMEs 的范围时，我会得到一个异常......

```
org.hibernate.exception.DataException: Data truncation: Incorrect datetime value: '2099-01-01 00:00:00' for column 'START_DATE' at row 1
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:71)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy40.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:96)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:55)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2757)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3268)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:304)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:195)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:128)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:114)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:615)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:608)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:604)
    at com.myco.myproject.dao.EventsDaoImpl.saveEvent(EventsDaoImpl.java:64)
    at com.myco.myproject.services.EventServiceImpl.saveEvent(EventServiceImpl.java:64)
    at com.myco.myproject.services.EventServiceImpl.refreshEventsDb(EventServiceImpl.java:45)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy37.refreshEventsDb(Unknown Source)
    at com.myco.myproject.services.EventsServiceTest.refreshAllEvents(EventsServiceTest.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Incorrect datetime value: '2099-01-01 00:00:00' for column 'START_DATE' at row 1
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2939)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1623)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1715)
    at com.mysql.jdbc.Connection.execSQL(Connection.java:3249)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1268)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1541)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1455)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1440)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102)
    at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 62 more 
```

有没有办法向我的 Hibernate Java 列添加注释以筛选此异常？我希望最终我可以在尝试将域对象插入数据库之前添加一些逻辑来验证域对象。

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:19:38.000

您确定您的列是 DATETIME，而不是 TIMESTAMP？根据[文档](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)“2099-01-01 00:00:00”是 DATETIME 的有效日期（上限是“9999-12-31 23:59:59”）但对 TIMESTAMP*无效*（上限是“2038-01 -19 03:14:07”）。

# c++ - 在 Str 中转换为降低并保持 - C++

> ID：10095746
> 
> 赞同：1
> 
> 时间：2012-04-10T20:10:37.427
> 
> 标签：c++, file, loops, lowercase

我正在尝试将从文件中读取的字符串转换为小写，并将小写字符串保存在单独的字符串中以进行比较，但我想保留原始字符串以供演示，但我遇到了一些麻烦：

```
ifstream file;
string name,
       lnStr,
       searchStr,
       lowerStr;
int lineNum = 0;
int strCount;

while(getline(file, lnStr))
    {
        lowerStr = lnStr;
        for(int i = 0; lowerStr[i] != '\0'; i++){
            lowerStr[i] = tolower(lowerStr[i]);
        }
        if(lowerStr.find(searchStr, 0) < lnStr.npos)
        {
            cout << setw(5) << ++lineNum << ":" << lnStr << endl;
            strCount++;
        }
    } 
```

显然我不能在字符串上使用 sub[i] ，但是将它全部保存在一个数组中似乎太多了。我这样做是最有效的吗？如何将我的小写字符串和原始字符串分开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:16:22.983

无法保证`lowerStr[i]`永远`0`适用于`i`.

```
 for(int i = 0; lowerStr[i] != '\0'; i++){
        lowerStr[i] = tolower(lowerStr[i]);
    } 
```

试试这个：

```
// UNTESTED
for(int i = 0; i < lowerStr.size(); i++)
    lowerStr[i] = tolower(lowerStr[i]); 
```

或者，正如奥利建议的那样：

```
std::transform(lowerStr.begin(), lowerStr.end(), lowerStr.begin(), ::tolower); 
```

附言。我无法为您测试此修复程序，因为您没有提供完整的测试用例。如果你有，我会的。

# java - 插入树中

> ID：10095748
> 
> 赞同：0
> 
> 时间：2012-04-10T20:10:48.060
> 
> 标签：java, tree

**编辑**：正确的解决方案：

```
void add(Student s)
{
    if(root == null)
        root = new TreeNode(s);
    else
        insert(root,s);        
}

void insert(TreeNode tn, Student s)
{
    if(tn.sVal.compareTo(s) > 0)
    {
        if(tn.left != null)
            insert(tn.left, s);            
        else
        {
            tn.left = new TreeNode(s);
            tn.left.parent = tn;
        }
    }
    else if(tn.sVal.compareTo(s) < 0)
    {
        if(tn.right != null)
            insert(tn.right, s);
        else
        {
            tn.right = new TreeNode(s);
            tn.right.parent = tn;
        }
    }
    balance(tn);
} 
```

* * *

我正在尝试使用以下内容插入二叉树：

```
void add(Student s)
    {
        insert(root,s);
    }

private void insert(TreeNode t, Student s)
{        
    if(t == null)
        t = new TreeNode(s);        
    else if(t.sVal.compareTo(s) > 0)
        insert(t.right, s);
    else if(t.sVal.compareTo(s) < 0)
        insert(t.left,s);                
} 
```

但是，树仍然是空的，我不知道为什么。我讨厌如此含糊，但我在逻辑中找不到错误。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:32:06.340

这是一个重要提示：首先进行此更改，然后从那里进行调试：

```
if (t == null)
    throw new IllegalArgumentException(); 
```

还有一个更大的提示：当您创建新节点时，您还必须引用其父节点，以便将其添加到父节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:27:37.310

您的代码显示出对 Java 的基本误解，我将尝试帮助您了解哪里出错了。

当您调用 时`insert(root,s)`，您传递的是对指向的同一 TreeNode**对象的****引用**。然后，当您在函数内部分配时，您将**新的引用**分配给，而**不是**。**`root``t = new TreeNode(s)``insert`**`t`**`root`******

 ******Java 是按值传递的，在对象的情况下，这意味着它正在传递*引用的值*。如果你知道 C，你可以把它想象成一个指针。它是传递内存地址，而不是传递指向内存地址的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:53:52.133

It's a pointer issue. When you redefine pointer `a` using the `=` operator, all previous references to `a` are lost. In order to keep these references, you either have to change the object using member functions (class methods in Java) or write code to **directly** fix the references.

Put simply, redefining a pointer affects only that pointer. Anything which already references the pointer will **not** be updated.

Pseudocode Example:

```
Node a = new Node("hello")
Node b = a
a = new Node("goodbye")

print(a) // this prints "goodbye"
print(b) // this prints "hello" 
```

In order for `b` to point to the new `a`, you must write `b = a`.

Having sorted that out, you will need to rewrite your `insert()` method. Because a tree is recursive, a recursive `insert()` method should do the trick. There are a variety of resources online for recursive tree implementations if you need them: [Recursive Tree Java](http://www.java-forums.org/java-lang/7614-binary-tree-implementation-java.html)******

# concurrency - 理解 goroutine

> ID：10095751
> 
> 赞同：41
> 
> 时间：2012-04-10T20:10:51.417
> 
> 标签：concurrency, go, race-condition

我试图理解 Go 中的并发性。特别是，我编写了这个线程不安全的程序：

```
package main

import "fmt"

var x = 1

func inc_x() { //test
  for {
    x += 1
  }
}

func main() {
  go inc_x()
  for {
    fmt.Println(x)
  }
} 
```

我认识到我应该使用通道来防止竞争条件`x`，但这不是重点。程序打印`1`然后似乎永远循环（不再打印任何内容）。我希望它打印一个无限的数字列表，可能会由于竞争条件而跳过一些并重复其他的（或者更糟——在更新时打印数字`inc_x`）。

我的问题是：为什么程序只打印一行？

只是要明确一点：对于这个玩具示例，我不是故意使用频道。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-10T21:24:14.563

[*关于 Go 的goroutines*](https://golang.org/doc/effective_go.html#goroutines)有几点需要牢记：

1.  它们不是 Java 或 C++ 线程意义上的线程
    *   goroutines 更像[*greenlets*](https://greenlet.readthedocs.io/en/latest/)
2.  Go 运行时跨*系统线程多路复用 goroutine*
    *   系统线程的数量由环境变量控制，`GOMAXPROCS`目前我认为默认为 1。这在未来可能会改变
3.  goroutine 回退到当前线程的方式由几个不同的结构控制
    *   [*select 语句*](https://golang.org/ref/spec#Select_statements)可以将控制权交还给线程
    *   [*在通道*](https://golang.org/doc/effective_go.html#channels)上发送可以将控制权交还给线程
    *   执行 IO 操作可以将控制权交还给线程
    *   [`runtime.Gosched()`](https://golang.org/pkg/runtime/#Gosched)显式将控制权交还给线程

您看到的行为是因为 main 函数永远不会返回给线程，而是参与了一个繁忙的循环，并且由于只有一个线程，所以主循环没有地方运行。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-10T20:56:57.010

根据[this](http://code.google.com/p/go/issues/detail?id=1492)和[this](http://code.google.com/p/go/issues/detail?id=1671)，一些调用不能在 CPU 绑定的 Goroutine 期间调用（如果 Goroutine 永远不会屈服于调度程序）。如果需要阻塞主线程，这可能会导致其他 Goroutines 挂起（例如`write()`syscall 使用的情况`fmt.Println()`）

我发现的解决方案涉及调用[`runtime.Gosched()`](http://golang.org/pkg/runtime/#Gosched)您的 cpu-bound 线程以返回给调度程序，如下所示：

```
package main

import (
  "fmt"
  "runtime"
)

var x = 1

func inc_x() {
  for {
    x += 1
    runtime.Gosched()
  }
}

func main() {
  go inc_x()
  for {
    fmt.Println(x)
  }
} 
```

因为您在 Goroutine 中只执行一项操作，`runtime.Gosched()`所以被*非常*频繁地调用。调用`runtime.GOMAXPROCS(2)`init 会快一个数量级，但如果您执行的操作比递增数字更复杂（例如，处理数组、结构、映射等），则会非常不安全。

在这种情况下，最佳实践可能是使用通道来管理对资源的共享访问。

*更新：从 Go 1.2 开始，[任何非内联函数调用都可以调用调度程序。](http://tip.golang.org/doc/go1.2#preemption)*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-10T23:37:59.077

这是两件事的相互作用。一，默认情况下，Go 只使用单核，二，Go 必须协同调度 goroutine。您的函数 inc_x 不会产生，因此它垄断了正在使用的单核。缓解这些条件中的任何一个都会导致您期望的输出。

说“核心”有点夸张。Go 实际上可能在后台使用多个内核，但它使用一个名为 GOMAXPROCS 的变量来确定线程数来调度执行非系统任务的 goroutine。如[常见问题解答](http://golang.org/doc/go_faq.html#Why_no_multi_CPU)和[Effective Go](http://golang.org/doc/effective_go.html#parallel)中所述，默认值为 1，但可以使用环境变量或运行时函数将其设置得更高。这可能会提供您期望的输出，但前提是您的处理器具有多个内核。

独立于内核和 GOMAXPROCS，您可以让运行时中的 goroutine 调度程序有机会完成它的工作。调度程序不能抢占正在运行的 goroutine，但必须等待它返回运行时并请求一些服务，例如 IO、time.Sleep() 或 runtime.Gosched()。在 inc_x 中添加类似的内容会产生预期的输出。运行 main() 的 goroutine 已经在使用 fmt.Println 请求服务，因此现在两个 goroutine 现在周期性地屈服于运行时，它可以进行某种公平调度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T20:37:01.567

不确定，但我*认为*这`inc_x`会占用 CPU。由于没有 IO，它不会释放控制权。

我找到了解决这个问题的两件事。一个是`runtime.GOMAXPROCS(2)`在程序开始时调用，然后它会工作，因为现在有两个线程服务于 goroutings。另一种是`time.Sleep(1)`递增后插入`x`。

# java - Android NameValuePair 发送值

> ID：10095761
> 
> 赞同：1
> 
> 时间：2012-04-10T20:11:27.400
> 
> 标签：java, php, android, json

我有连接到 MySql 并将数据编码为 JSON 的 PHP 代码。稍后我会过滤它并获取特定的 JSON 对象。当我使用一个 NameValuePair 对象时它工作得很好，但现在我想使用用户名和密码等变量。现在我在 logcat 中收到此警报 解析数据时出错 .org.json.JSONException：org.json.JSONObject$1 类型的值 null 无法转换为 JSONArray。

我应该如何更改可以正常工作的代码？

```
$q=mysql_query("SELECT username, firstname, lastname, email, phone1, skype, city, description FROM mdl_user WHERE username LIKE '$username' AND password LIKE '$password'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

发送请求的代码：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("usern",""+usr));
        nameValuePairs.add(new BasicNameValuePair("passw",""+psw));
        InputStream is = null; 
        String result = "";
        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://ik.su.lt/~jbarzelis/Bdarbas/getUserInfo.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        } 
```

**已编辑**

```
$username = mysql_real_escape_string($_REQUEST['usern']);
$password = mysql_real_escape_string($_REQUEST['passw']);
$q=mysql_query("SELECT username, firstname, lastname, email, phone1, skype, city, description
FROM mdl_user WHERE username LIKE '$username' AND password LIKE '$password'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:16:58.487

如果这是您放在服务器端的整个代码，那么我想您需要首先将值输入`$username`并`$password`使用这样的`$_POST[]`方法

```
$username=$_POST["usern"];
$password=$_POST["passw"]; 
```

和同样的`password`。

因为到目前为止，您的`SELECT`语句返回的变量中没有值，该值以给出值错误`null`的格式发送给客户端。`JSON``null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:44:26.770

根据您的评论“我在尝试只使用用户名时使用了 LIKE，它运行良好。”

您以什么形式存储您的密码？纯文本（我希望不是）还是散列？如果散列，你在哪里执行散列？在php中，如果它是整个代码，你不会在你的java代码中这样做吗？如果没有，这就是你的答案。

至于 LIKE - 当然，它确实有效。LIKE 没有 = 严格，它会产生很大的开销。它应该只用于非常简单的搜索语句（VERY SIMPLE），当然不能用于授权。

# xml - 如何在没有 DOCTYPE、CDATA 或转义的 XML 中嵌入 XHTML？

> ID：10095766
> 
> 赞同：1
> 
> 时间：2012-04-10T20:11:40.203
> 
> 标签：xml, xhtml, schema, doctype, dtd

有没有什么方法可以在没有 DOCTYPE DTD 声明的情况下将 XHTML 实体引用嵌入到 XML 文本中？DOCTYPE 行导致它所针对的 java 服务器出现问题。

转义 &; 序列是不可接受的，也不能嵌入到 CDATA 中。参考文献需要验证。

可以从架构定义而不是 XML 数据文件中引用 DTD。

更广泛地说，在 XML 中嵌入 XHTML（或至少是实体引用）并对其进行验证的常见做法是什么？

一种可能的解决方案是将整个 XHTML 1.0 DTD 转换为模式，但这听起来不是最好的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:36:40.857

您是否尝试过没有 PUBLIC 或 SYSTEM 标识符的 DOCTYPE？

您可以将 ENTITY 声明直接添加到内部子集：

```
<!DOCTYPE foo [
<!ENTITY nbsp   "&#160;">
<!ENTITY copy   "&#169;">
<!ENTITY laquo  "&#171;">
<!ENTITY reg    "&#174;">
<!ENTITY deg    "&#176;">
<!ENTITY plusmn "&#177;">
<!ENTITY sup2   "&#178;">
<!ENTITY sup3   "&#179;">
<!ENTITY frac14 "&#188;">
<!ENTITY frac12 "&#189;">
<!ENTITY frac34 "&#190;">
]>
<foo/> 
```

或者您可以使用参数实体指向具有您的 ENTITY 声明的外部文件：

```
<!DOCTYPE foo [
<!ENTITY % ents SYSTEM "xhtml-lat1.ent">
%ents;
]>
<foo/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:47:26.420

如果您有 5 个预定义的实体引用以外的实体引用，并且没有文档类型，则 XML 格式不正确。

如果您使用数字字符引用而不是命名实体引用，则可以大大简化事情，因此请使用

`&#160;`代替`&nbsp;`

如果您控制它，可以通过修改原始生成，或者只是通过使用任何 xml 解析器或使用 perl 或等效的简单文本替换来扩展实体。您可以在此处[http://www.w3.org/2003/entities/2007/ 获取以 dtd 或 json 或其他格式设置的 html(5) 实体的完整列表](http://www.w3.org/2003/entities/2007/)

# css - 向上/向下排序在检票口上不起作用 - AjaxFallBackTable

> ID：10095774
> 
> 赞同：1
> 
> 时间：2012-04-10T20:12:15.550
> 
> 标签：css, wicket

我对 Ajaxfallbacktable 有问题 - 分页工作正常 - 数据加载 - 一切都很简单 - 即使默认排序也有效 - 但我不知道如何在每一列中添加 updown 按钮 - 这样我就可以排序无论如何我想要的桌子这是我的桌子

```
List<IColumn<logParsed>> columns = new ArrayList<IColumn<logParsed>>();

columns.add(new PropertyColumn<logParsed>(new Model<String>("Number of Entries"), "numberOfEntries") {
    @Override
    public String getCssClass()
    {
        return "numeric";
    }
});
columns.add(new PropertyColumn<logParsed>(new Model<String>("Last Seen"), "lastSeen"));
columns.add(new PropertyColumn<logParsed>(new Model<String>("Host Name"), "hostName") {
    @Override
    public String getCssClass()
    {
        return "hostname";
    }
});
columns.add(new PropertyColumn<logParsed>(new Model<String>("Log Message"), "logMessage"));

logProvider<logParsed> LogProvider = new logProvider<logParsed>(logParsedDao.findAll());
final AjaxFallbackDefaultDataTable<logParsed> dataTable = new AjaxFallbackDefaultDataTable<logParsed>("table", columns, 
        LogProvider, 10) {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    protected Item<logParsed> newRowItem(String id, int index, IModel<logParsed> model) {
        return new OddEvenItem<logParsed>(id, index, model);
    }
};

/* add(new OrderByBorder("sortByHighest", "numberOfEntries", LogProvider)
{
    private static final long serialVersionUID = 1L;

    @Override
    protected void onSortChanged()
    {
       dataTable.setCurrentPage(0);
    }
}); */
add(dataTable); 
```

* * *

这是我的数据提供者：

```
public class LogProvider<logParsed> extends SortableDataProvider{

/**
 * 
 */
private static final long serialVersionUID = 1L;
private LogParsedDao logParsedDao;

private List<logParsed> list =  new ArrayList<logParsed>();

public LogProvider(List<logParsed> sentList){

    setSort("numberOfEntries",SortOrder.DESCENDING);
    list = sentList;
}

public Iterator iterator(int first, int count) {

    //ArrayList<logParsed> newList = (ArrayList<logParsed>) logParsedDao.findAll();
    //Collections.sort(newList, comparator);
    Iterator<logParsed> iterator = null;

    try {
        if(getSort() != null) {
            Collections.sort(list, new Comparator<logParsed>() {
                private static final long serialVersionUID = 1L;

                    public int compare(logParsed sl1, logParsed sl2) {
                     int result=1;
                        PropertyModel<Comparable> model1= new PropertyModel<Comparable>(sl1, getSort().getProperty());
                        PropertyModel<Comparable> model2= new PropertyModel<Comparable>(sl2, getSort().getProperty());

                        if(model1.getObject() == null && model2.getObject() == null) 
                            result = 0;
                        else if(model1.getObject() == null) 
                            result = 1;
                        else if(model2.getObject() == null) 
                            result = -1;
                        else 
                            result = ((Comparable)model1.getObject()).compareTo(model2.getObject());

                        result = getSort().isAscending() ? result : -result;

                        return result;
                }
            });
        }

        if (list.size() > (first+count))
            iterator = list.subList(first, first+count).iterator();
        else
            iterator = list.iterator();
    } 
    catch (Exception e) {
        e.printStackTrace();
    }

    return iterator;

}

public int size() {
    // TODO Auto-generated method stub
    return list.size();
}

public IModel model(final Object object) {
    return new AbstractReadOnlyModel<logParsed>() {
        @Override
        public logParsed getObject() {
            return (logParsed) object;
        }
    };
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T03:11:52.143

使用`PropertyColumn`接收排序属性的构造函数：[PropertyColumn(displayModel, sortProperty, propertyExpression)](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/markup/html/repeater/data/table/PropertyColumn.html#PropertyColumn%28org.apache.wicket.model.IModel,%20java.lang.String,%20java.lang.String%29)。

# java - 为什么`main`在这里被调用了两次？

> ID：10095775
> 
> 赞同：2
> 
> 时间：2012-04-10T20:12:15.960
> 
> 标签：java, static, main

这是我的代码：

```
public class Test
{
   static 
   {
      main(null);
   }
   public static void main(String [] args)
   {
      System.out.println("done");
   }
} 
```

我得到以下输出：

```
done 
done 
```

有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:14:26.717

原因是它`main`被调用了两次：

1.  明确地，一旦加载类，就从[静态初始化块开始。](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)
2.  隐含地，在程序启动后立即进入程序。

如何解决这个问题？要么不显式调用它，要么重命名它，这样它就不会被自动调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:14:58.947

你觉得什么不寻常？该`static`块在加载类时执行一次（并且必须在执行方法之前加载它`main`。然后执行`main`方法本身。

看看这个修改后的版本：

```
public class Test {
    static {
        main(new String[]{"[done static]"});
    }

    public static void main(String[] args) {
        System.out.println(args.length > 0 ? args[0] : "[done]");
    }
} 
```

它打印：

```
[done static]
[done] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T20:14:44.620

因为

*   `static { ... }`当类在 JVM 中加载时调用该部分`Test`（它是一种静态构造函数）
*   而在`main`执行开始时调用该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T20:14:30.227

类的静态块在类首次加载时被调用。这是第一个完成的。第二个是因为您正在运行程序，然后调用了 main 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T20:16:00.887

虚拟机在加载 jar 时会自动调用 main。所以这是第一个“完成”，Java 程序的正常入口点。

编写第二个“完成”是因为您在静态类初始化程序中显式调用它。一旦你的类被虚拟机类加载器加载，你添加到“测试”类的“静态”部分就会被调用。

甚至应该在调用入口点 Main 之前调用静态初始化程序中的那个，因为需要在调用入口点之前加载类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T20:16:32.560

在调用之前`Test.main`，JVM 需要`Test`通过运行其静态初始化程序来初始化该类。此调用负责第一次调用`main()`. 初始化完成后，JVM 再次调用`main()`，最终生成您看到的输出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T20:19:11.153

Main 由 JVM 自动调用。不需要在静态部分中调用它。

```
public class Test
{
   public static void main(String [] args)
   {
      System.out.println("done");
   }
} 
```

上面的代码应该是这样的。

# algorithm - 实现非线性插值的方法？

> ID：10095777
> 
> 赞同：3
> 
> 时间：2012-04-10T20:12:31.693
> 
> 标签：algorithm, interpolation, bezier, curve

我需要实现一种方法，用于值之间的非线性插值、缓入、缓出、一般缓动曲线以及用户定义的曲线。

我对如何做到这一点有一个基本的想法 - 但我不确定它是否是最有效的解决方案。我的想法基本上如下：

使用二维三次、二次或 n 阶贝塞尔曲线来控制插值。线性遍历曲线得到非线性 Y 分量，并用它来赋值给一个简单的线性插值方法：

```
value = v1 + (v2 - v1) * t; 
```

其中 t 是控制曲线的非线性 Y 分量。

这允许自定义、用户定义的插值方法，但这是有代价的，一个非线性插值的成本等于：

> 1 + 2 * (n-1)

总插值，其中 n 是控制曲线的阶数或控制点数。

我不是数学家，这是我能想到的最好的，所以我的问题是是否有更好的解决方案？

编辑：我可能解释不正确，我不是母语人士，所以希望每个人都能理解： ![控制曲线插值](../Images/a5da7e2af763367631b72600b381ffe4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:33:39.323

据我了解，你`t`实际上是一个函数族*f [i] (u)*，其中*u*和*f [i] (u)*都在 0 和 1 之间。如果是这样，它不会比你更好'已经提出。

看起来您担心在实际曲线计算期间评估这些*f [i] (u)值。*如果您不想预先计算，则无法避免评估。如果性能是一个大问题并且您不需要非常精确，则可以根据需要计算*f [i] (u [j] )*的*[表格]**（例如0*和 1 之间的 100 或 1000 个离散点）每条曲线，当您需要采样点之间的值时，请对所需点周围的两个缓存值进行简单的线性插值。

# c++ - c++ SDL一起绘制文本和图形

> ID：10095778
> 
> 赞同：0
> 
> 时间：2012-04-10T20:12:33.870
> 
> 标签：c++, graphics, sdl, truetype, sdl-ttf

我正在做一个大项目，我想向用户展示看起来不错的信息。

我所需要的只是能够在里面绘制正方形和文本。

我画了文字和方块，但我不能把它们放在一起。我什至发现了一个问题所在。它是函数 SDL_SetVideoMode(mwidth,mheight,bpp,flags)。

这个地方被突出显示。提前致谢！

```
using namespace std;
#define SPACING 0
TTF_Font *font=0;
int  font_size=16;
SDL_Surface *screen;)

void draw_text_at(SDL_Surface *scr,char *msg, int x0, int y0)
{
   int h;
   SDL_Rect r;

   SDL_Color fg={0,0,0,255};
   h=TTF_FontLineSkip(font);

    r.x=x0;
    r.y=y0-h;
    r.x=x0-TTF_GetFontOutline(font);
    r.y+=h+SPACING-TTF_GetFontOutline(font);

    SDL_Surface *surf=TTF_RenderText_Blended(font,msg,fg);

      if(surf)
      {   SDL_BlitSurface(surf,0,scr,&r);
          SDL_FreeSurface(surf);
      }
}

void window::handle_key_down(SDL_keysym * keysym)
{
  switch(keysym->sym)
  {
    case SDLK_ESCAPE:
     exit(0);
     break;

    default:
     break;
  }
}

 void window::setup_opengl()
 {
  float ratio=(float)mwidth/(float)mheight;
  glShadeModel(GL_SMOOTH);
  glCullFace(GL_BACK);
  glFrontFace(GL_CCW);

  glEnable(GL_CULL_FACE);
  glClearColor(1.0f,1.0f,1.0f,1.0f);
  glViewport(0,0,mwidth,mheight);

  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();

  gluPerspective(60.0,ratio,1.0,1024.0);
  glEnable(GL_DEPTH_TEST);
  glDepthFunc(GL_LEQUAL);
  glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST);
 }

 void window::draw_screen()
 {
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glLoadIdentity();  // set  system of coordinates to the center of the screen
  glTranslatef(0.0,0.0,-10.0);
  glColor4f(0.0,1.0,1.0,1.0);

  glBegin(GL_QUADS);
   glVertex3f(-8, 0-2 ,0);
   glVertex3f(-2+-8,0-2 ,0);
   glVertex3f(-2+-8,-2-2,0);
   glVertex3f(0+-8, -2-2,0); 
  glEnd();

  glBegin(GL_QUADS);
   glVertex3f(-8+3, 0-2 ,0);
   glVertex3f(-2+-8+3,0-2 ,0);
   glVertex3f(-2+-8+3,-2-2,0);
   glVertex3f(0+-8+3, -2-2,0);
  glEnd ();

  SDL_GL_SwapBuffers( );
 }

void window(int quantity_of_disks, hard_disk &disk)
 {
   if((SDL_Init(SDL_INIT_VIDEO)<0))
    {printf("Could not initialize SDL: %s.\n", SDL_GetError());
    exit(-1); //return -1;
    }

   if(TTF_Init()==-1)
    {   printf("TTF_Init: %s\n", TTF_GetError());
        exit(-2);
    }

   const SDL_VideoInfo *info=NULL;
   int flags=0,bpp=0;
   info=SDL_GetVideoInfo();

   if(!info)
    {   fprintf(stderr,"Video query failed");
        SDL_Quit();
        exit(0);
    }

   bpp=info->vfmt->BitsPerPixel;

   SDL_GL_SetAttribute(SDL_GL_RED_SIZE,5);
   SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE,5);
   SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE,5);
   SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE,16);
   SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER,1); 
```

这里如果我将标志设置为零，我会看到文本
如果标志设置为 SDL_OPENGL 或 SDL_OPENGLBLIT ，我会看到方块

flas 被转移到函数 SDL_SetVideoMode 但我想同时看到。我试着改变它，但是..

```
 flags= 0;
 //   SDL_ANYFORMAT | SDL_OPENGLBLIT  | SDL_ASYNCBLIT 
```

这一刻就在这里：

```
 screen = SDL_SetVideoMode(mwidth,mheight,bpp,flags);

    if ( screen == NULL )
     { fprintf(stderr, "Couldn't set video mode: %s\n", SDL_GetError());
      exit(-2); //return -2;
      }
     SDL_WM_SetCaption ("MBR informant",NULL);
     setup_opengl();

     glMatrixMode(GL_MODELVIEW);

    char *path_to_font="freefont-ttf/sfd/FreeMono.ttf";
   load_font(path_to_font, font_size);

   SDL_FillRect(screen,0,~0);

   while (1)
     {  draw_screen();
        char *msg="we typed it";
        draw_text_at(screen,msg,50,50);
        SDL_Flip(screen);

       SDL_Delay(1000);
       process_events ();
      }

     SDL_Quit();
     } 
```

看起来像：

当变量标志 = 0 ![当变量标志 = 0](../Images/c12ebed461ce1ee8c43754bcf31dfc5c.png)

当变量标志 = SDL_OPENGL ![在此处输入图像描述](../Images/f1d9242e1c1806076f6c8238301ff81c.png)

由于代码量大，我只留下了与绘画有关的功能。完整文件：[http ://rghost.net/37518422](http://rghost.net/37518422)

**解决方案**

感谢 jrok 我已经解决了这个问题：我定义了矩形。SDL_Rect 矩形；矩形.x=0; rect.y=0; rect.w=150; rect.h=140;

我修改了一部分：

```
 while (1)
       {  draw_screen();
          char *msg="we typed it";
          draw_text_at(screen,msg,50,50);
          **SDL_FillRect (screen,&rect,100);**
          SDL_Flip(screen);
         SDL_Delay(1000);
        process_events ();
      } 
```

我得到了我想要的： ![在此处输入图像描述](../Images/cd848eddb2dfc993729e2b5a6d9091a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:30:20.757

你正在用 .blitting 文本`SDL_BlitSurface()`。我不知道它到底为什么会出错，但 SDL wiki cleary 说（[SDL_BlitSurface](http://sdl.beuc.net/sdl.wiki/SDL_BlitSurface)）：

`Like most surface manipulation functions in SDL, it should not be used together with OpenGL.`

如果你想坚持使用 OpenGL，这个问题涵盖了渲染文本的一些可能性：

[如何为 GUI 进行 OpenGL 实时文本渲染？](https://stackoverflow.com/questions/2071621/opengl-live-text-rendering)

# reporting-services - SSRS 组总计按总计

> ID：10095784
> 
> 赞同：1
> 
> 时间：2012-04-10T20:13:20.530
> 
> 标签：reporting-services, ssrs-grouping

我有一份按位置和charge_type 分组的报告，其中包含详细信息。我想在位置信息下方和总计上方显示 charge_type 总计。

当前报告，包括城市和类型部分之后的总数：

```
 +-------+------+-------------+
    | City  |Type  |  Detail     |
    +-------+------+-------------+
    |  A    |  a   |   1         | 
    |       |  b   |   2         | 
    |       |  c   |   3         | 
    |       |  d   |   4         | 
    |       |Total |   10        | 
    |  B    |  a   |   7         | 
    |       |  b   |   8         | 
    |       |  c   |   9         | 
    |       |  d   |   10        |  
    |       |Total |   34        | 
    |Grand  |      |             | 
    |Total  |      |   44        | 
    +-------+------+-------------+ 
```

我想要什么：

```
 +-------+------+-------------+
    | City  |Type  |  Detail     |
    +-------+------+-------------+
    |  A    |  a   |   1         | 
    |       |  b   |   2         | 
    |       |  c   |   3         | 
    |       |  d   |   4         | 
    |  B    |  a   |   7         | 
    |       |  b   |   8         | 
    |       |  c   |   9         | 
    |       |  d   |   10        | 
    |Total  |  a   |   8         |  
    |       |  b   |   10        |  
    |       |  c   |   12        |  
    |       |  d   |   14        |  
    |Grand  |      |             | 
    |Total  |      |   44        | 
    +-------+------+-------------+ 
```

我尝试添加范围，`=Sum(Fields!Detail.Value, "city")`例如，这让我觉得我走错了路，而且我没有其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:56:10.323

我认为实现您想要的最简单的方法是：

*   复制现有的 tablix 并在其下方直接粘贴新版本；
*   从旧的 tablix 中删除总计行；
*   从新的 tablix 中删除 City 组（但不是关联的列），并将 [City] 值替换为单词“Total”；
*   从新表中删除列标题（但不是关联的组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:49:56.873

我认为实现您想要的最简单的方法是：

复制现有的 tablix 并在其下方直接粘贴新版本；从旧的 tablix 中删除总计行；从新的 tablix 中仅删除 City 组（但不删除关联的列），并将 [City] 值替换为单词“Total”；从新表中删除列标题（但不是关联的组）。现在你可以得到你的实际要求

# c - argv 在 C 中从控制台输入读取 * 字符时出现问题

> ID：10095790
> 
> 赞同：2
> 
> 时间：2012-04-10T20:13:47.107
> 
> 标签：c, math, stderr, argv

我正在尝试从控制台读取： (int 1) operator (int 2) 或 returnType (int 1) operator (int 2) ，总共 4 - 5 个参数，并根据输入执行数学运算符。它适用于除 * （用于乘法）之外的所有内容。它从以下错误捕获中返回我的代码中的错误：

```
if(argc == 4){
    do this...
}
else if{ argc == 5){
    do this...
}
else {
    fprintf(stderr,"usage error, invalid arguments\n");
    return 3;
} 
```

无论我输入什么，它都会遇到这个错误。如果我以任何方式执行“test X string1 * string2”或“test string1 * string2”，4 或 5 个参数，它会给我一个错误（也为 1- 10 个参数，只是测试看看）。我认为不需要更多代码，因为它可能只需要操作 * （特殊字符？）的输入，但如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T20:15:18.137

它工作得很好。您的外壳正在使用通配符。引用它。

```
./someprogram a '*' b 
```

# macos - Os x terminal, ssh , and too many open files

> ID：10095796
> 
> 赞同：13
> 
> 时间：2012-04-10T20:14:29.447
> 
> 标签：macos, solr, ssh, terminal

I have some code that runs several rest queries over a connection that is ssh forwarded to an AWS machine (fyi: these queries are hitting a Solr server running on this machine), and the queries run against my localhost (which is forwarded to the AWS instance).

The code initially runs great getting data as necessary, but after running for a while, the code stalls (in eclipse).

**At this exact moment, the terminal (i.e. where I have started my ssh tunnel) goes completely frozen, filling up with the String :**

"accept : too many open files"

Because this infinite print is not associated with a bash terminal (i.e. I can't tell wether the ssh connection is still alive or not, and there is no text indicating which shell im in... just unpridled, relentless print statements) I cant tell wether it's coming from amazon, or from my client terminal.

**I want to find the cause of this behavior and pinpoint the machine which is causing my terminal to explode**

To test which of the two machines was causing the infinite print outs of the error, I ran the ulimit command on the server... and found **that the max number of open files allowed (on the aws server) was well above the amount of open files (also determined using ulimit) at any given time while the client program (running from my ide)** is executing.

I did the same test on my client , and found no significant increase in the number of open files.

Some side details : I'm running several hundreds of queries into a SOLR server that has over 100GB of data in a short time period.

Any hints **on how to determine why my sshd mac os x terminal is dying and infinitely printing this message** would be potentially very useful to me. Of course, wether or not they were specific to solr. That said, **any insights into why this would happen when using a solr service may also help** to solve this problem.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T23:10:11.557

您可以尝试查看`ulimit`（通过终端类型）：

```
ulimit -a 
```

具体来说，检查 的值`open files`。在我的机器（OS X）上，它报告 256。您可能想尝试将其增加到 512：

```
ulimit -n 512 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T10:58:41.750

这似乎对我有用：

```
echo 'kern.maxfiles=20480' | sudo tee -a /etc/sysctl.conf
echo -e 'limit maxfiles 8192 20480\nlimit maxproc 1000 2000' | sudo tee -a /etc/launchd.conf
echo 'ulimit -n 4096' | sudo tee -a /etc/profile 
```

然后重新启动 OS X。

[https://superuser.com/questions/302754/increase-the-maximum-number-of-open-file-descriptors-in-snow-leopard](https://superuser.com/questions/302754/increase-the-maximum-number-of-open-file-descriptors-in-snow-leopard)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T20:39:16.150

这里没有足够的信息可以确定，但听起来像是`ssh`在尝试在本地接受到转发套接字的连接时达到其每个进程的文件描述符限制，这反过来表明已经打开的连接没有及时关闭时尚。您可以运行`ssh`with`-d`查看连接和断开连接的详细信息；您可能想要捕获它的标准错误并使用脚本来跟踪套接字操作，因为它们将隐藏在许多其他调试信息中。

请注意，`ssh`它本身可能会限制其打开的文件描述符超出默认值，以避免对其转发端口的拒绝服务攻击；我在文档中没有看到任何迹象，但这是我所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T15:47:46.630

```
sudo launchctl limit maxfiles 1000000 unlimited 
```

或者

```
sudo sysctl -w kern.maxfilesperproc=1000000
sudo sysctl -w kern.maxfilesperproc=18000 
```

要使更改永久生效，请使用 sudo 将您的设置放入 /etc/sysctl.conf（您可能必须创建），如下所示：

```
kern.maxfiles=20480 
kern.maxfilesperproc=18000 
```

**注意 - 选择号码需要您自担风险**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T09:55:05.100

以下命令帮助了我，

```
launchctl limit maxfiles 
```

# javascript - 如何用JS在网站内显示“窗口”？

> ID：10095802
> 
> 赞同：0
> 
> 时间：2012-04-10T20:14:44.850
> 
> 标签：javascript, html

> **可能重复：**
> [用于在页面内创建 div 样式窗口的 JavaScript 库](https://stackoverflow.com/questions/199872/javascript-library-to-create-div-style-window-within-page)

我想显示我网站的“高于”标准内容的“窗口”，其中包含一些内容。我并不是要打开一个新的浏览器窗口。我的意思是制作某种浮动在页面其余部分上方的 div。它需要是可移动的，并且能够使用 JS 与网站的其余部分进行交互（所以没有 IFRAME），它还应该有一个图标，可以像 Windows 窗口一样在右上角关闭。我在一些在线 SAAS 系统中看到过这样的事情。你知道 JS 中有这样的库吗？我只需要这个，所以我不想要任何可以做其他事情的图书馆奶牛。只有窗户。它还应该兼容IE9，Chrome最新和FF最新。

我现在试着找到它一段时间。你知道这样的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:18:30.417

您的意思是页面内的对话框之类的东西吗？您可以在 JQuery UI 中找到一个：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# javascript - Parsing XML Response from SOAP API

> ID：10095806
> 
> 赞同：0
> 
> 时间：2012-04-10T20:14:58.953
> 
> 标签：javascript, xml, soap, appcelerator, appcelerator-mobile

I am using the suds.js library in Appcelerator to interact with a SOAP API. I've successfully sent a request and am looking for help parsing the response. I'd like to parse out the location name.

[http://pastie.org/private/rqekjes8qwlzwypw100vwa](http://pastie.org/private/rqekjes8qwlzwypw100vwa)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:46:38.193

我对 suds.js 了解不多，但 jQuery 可以相当轻松地解析您的 xml。

示例：http: [//jsfiddle.net/UprDs/1/](http://jsfiddle.net/UprDs/1/)

JS

```
var myXML = '<?xml version="1.0" encoding="utf-8" ?><Response>    <Data>        <MobileDropDetail>            <MobileDropTypeCode>Test</MobileDropTypeCode>            <MobileDropID>1</MobileDropID>        </MobileDropDetail>        <Locations>            <L>                <ID>1376</ID>                <Name>Testing Location</Name>            </L>            <L>                <ID>1403</ID>                <Name>Other Testing Location</Name>            </L>            <L>                <ID>1471</ID>                <Name>New Testing Location</Name>            </L>            <L>                <ID>1475</ID>                <Name>Test Los Angeles</Name>            </L>        </Locations>        <Groups>            <G>                <ID>251</ID>                <Name>Mobile Test Region</Name>            </G>            <G>                <ID>252</ID>                <Name>Mobile Demo Region</Name>            </G>        </Groups>        <LocationGroupPairs>            <LG>                <LID>1376</LID>                <GID>251</GID>            </LG>            <LG>                <LID>1475</LID>                <GID>251</GID>            </LG>            <LG>                <LID>1403</LID>                <GID>252</GID>            </LG>            <LG>                <LID>1471</LID>                <GID>252</GID>            </LG>        </LocationGroupPairs>    </Data>    <Error>        <Message>Success</Message>        <ReturnCode>1</ReturnCode>    </Error></Response>';

alert($(myXML).find('Locations Name:eq(0)').html());​ 
```

# c# - Null reference when switching between forms

> ID：10095808
> 
> 赞同：1
> 
> 时间：2012-04-10T20:15:06.217
> 
> 标签：c#, gridview, null, devexpress, xtragrid

I have a program that has a main form with a DevExpress XtraGrid control. It has many rows with data from my DB. I have an Edit form and an edit button on the main form to edit the selected row. I was able to pull the info for the selected object into the Edit form fine, but for some reason I am having trouble doing it again when I run the UPDATE command. I'm referring to the selected row on my main form as `gridView1.GetFocusedRow()` and this worked perfectly for my showAttributes method, but no longer works.

My code follows. It is returning an exception because 'call' is null. Just to note a few things: I've tried doing `main.gridView1.Focus()` and `main.gridView1.FocusRowHandle(0)` if I'm just editing the first row - neither fixed the problem. This seems to tell me that the row is still focused correctly but the reference was lost somehow.

**In Main.cs**

```
 private void btnEdit_Click(object sender, EventArgs e)
    {
        //This is the key, that lets you access an attribute of the selected row. 
        Object obj = gridView1.GetFocusedRow();

        //1) Show NewEdit Form
        Edit edit = new Edit();
        edit.Show();

        //2) Display properties of this object from DB
        edit.showAttributes(obj);
    } 
```

**In Edit.cs:**

```
 private void btnSubmit_Click(object sender, EventArgs e)
    {
        Main main = new Main();
        Object obj = main.gridView1.GetFocusedRow();
        try
        {
            performUpdate(obj);
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex);
        }
    }

    public void performUpdate(Object call1)
    {
        Main main = new Main();
        CallLog call = new CallLog();
        call = call1 as CallLog;

        executeSQLUpdate(call.Oid);
        main.xpServerCollectionSource1.Reload();
    } 
```

**Here is the showAttributes code - does the same thing but works**

```
 public void showAttributes(Object call1)
    {
        try
        {
            Main main = new Main();
            CallLog call = new CallLog();
            call = call1 as CallLog;

            txtCompany.Text = call.CompanyName;
            txtFirst.Text = call.FirstName;
            txtMiddle.Text = call.MiddleName;
            txtLast.Text = call.LastName;
            txtPhone.Text = call.PhoneNumber;
            txtFax.Text = call.Fax;
            txtEmail.Text = call.Email;
            txtAttention.Text = call.Attention;
            txtCareOf.Text = call.CareOf;
            txtAddress1.Text = call.Address1;
            txtAddress2.Text = call.Address2;
            txtCity.Text = call.City;
            txtState.Text = call.State;
            txtZip.Text = call.ZipCode;
            txtProvince.Text = call.Province;
            txtCountry.Text = call.Country;
            txtMessage.Text = call.Message;
            txtResponse.Text = call.Response;

            if (call.VIP == 1) { chkVIP.Checked = true; } else { chkVIP.Checked = false; }
            if (call.ThreatCall == 1) { chkThreat.Checked = true; } else { chkThreat.Checked = false; }
            if (call.FollowUp == 1) { chkFollowUp.Checked = true; } else { chkFollowUp.Checked = false; }
            if (call.EscalationRequired == 1) { chkEscalation.Checked = true; } else { chkEscalation.Checked = false; }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex);
            return;
        }
    } 
```

Also... I have tried doing this several other ways, without parameters, in different locations, etc. The problem is `main.gridView1.GetFocusedRow()` returns null. Also, running it as a series of methods from the main form does not work either (`gridView1.GetFocusedRow()` is also null).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:21:52.147

在 Edit.cs 你做

```
 Main main = new Main(); 
    Object obj = main.gridView1.GetFocusedRow(); 
```

这将创建一个新的 Main 而不显示它，然后尝试从 gridView 获取一个 obj 显然是 emtpy。在显示的所有代码中重复相同的错误。
另外，CallLog实例的创建和使用也很混乱。

# focus - How to change the Devexpress TextEdit current text on focus

> ID：10095810
> 
> 赞同：0
> 
> 时间：2012-04-10T20:15:17.270
> 
> 标签：focus, devexpress, onfocus, textedit

I've a Devexpress TextEdit control that displays a string something like "24 year." I want the text "years" to disappear every time the user clicks inside the text box (for editing purpose). And, I want the text to reappear when the focus is lost. How can i do this?

Thanks in advance

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:52:08.877

我相信您正在使用[TextEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsTextEdittopic)。因此，您可以使用以下代码片段：

```
textEdit.Properties.DisplayFormat.FormatString = "{0:d2} Year";
textEdit.Properties.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
textEdit.Properties.Mask.EditMask = "\\d{1,2}";
textEdit.Properties.Mask.IgnoreMaskBlank = false;
textEdit.Properties.Mask.MaskType = DevExpress.XtraEditors.Mask.MaskType.Regular;
textEdit.Properties.NullText = "Type your age here"; 
```

以下是相关的帮助主题：

*   [掩码编辑器概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument583)
*   [格式化](http://documentation.devexpress.com/#WindowsForms/CustomDocument587)

# jquery - JQuery UI dialog external css

> ID：10095816
> 
> 赞同：1
> 
> 时间：2012-04-10T20:15:46.857
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

I am using [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

```
$('#add_remarks').click(function(){
    $( "#remark-form" ).dialog( "open" );
});
$( "#remark-form" ).dialog({
    autoOpen: false,
    modal: true,
    buttons: {
        'Add Remarks': function() {
                alert('ok')
                },
                error: function(){
                    //alert('error');
                    //location.reload();
                }
            });
        },
        Cancel: function() {
            $(this).dialog( "close" );
        }
    },
    close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
    }
}); 
```

I would like to specify an external css class so I can define the width and the height of the remark-form from an external css file.

Do you know how to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:21:35.583

您可以使用`addClass`to..well，向您调用 .dialog 的 div 添加一个类。然后你可以随心所欲地设计。所以你的代码会变成

```
$( "#remark-form" ).addClass('your_class').dialog({
autoOpen: false,
modal: true,
buttons: {
    'Add Remarks': function() {
            alert('ok')
            },
            error: function(){
                //alert('error');
                //location.reload();
            }
        });
    },
    Cancel: function() {
        $(this).dialog( "close" );
    }
},
close: function() {
    allFields.val( "" ).removeClass( "ui-state-error" );
}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:31:10.837

你可以使用对话框类：

```
 $( "#selector" ).dialog({ dialogClass: 'myClass' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:26:47.703

从您在主题选项卡中提供的[链接](http://jqueryui.com/demos/dialog/)中，呈现的 html 代码将如下所示：

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable">
   <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
      <span id="ui-dialog-title-dialog" class="ui-dialog-title">Dialog title</span>
      <a class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
   </div>
   <div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
      <p>Dialog content goes here.</p>
   </div>
</div> 
```

因此，当您拥有`#remark-form`项目的选择器时，您所需要的一切：

```
#remark-form .ui-dialog { height: 100px !impportant; width 100px !important} 
```

然后您可以将此样式代码添加到您的 html 文档或外部 css 的 head 部分，然后您将其指向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:30:26.983

如果您想在页面加载后添加 CSS（例如，如果您有动态 CSS 文件），您可以使用

```
function includeCSSFile( file_url ) {
    var cssFile = document.createElement('link');
    cssFile.setAttribute('type', "text/css" );
    cssFile.setAttribute('rel', "stylesheet" );
    cssFile.setAttribute('href', file_url );
    document.getElementsByTagName("head").item(0).appendChild(cssFile);
} 
```

在你的主 javascript 文件上，所以在任何你想加载另一个 css 的地方你都必须调用这个函数

```
includeCssFile ( 'http://fonts.googleapis.com/css?family=Bad+Script' ) 
```

之后，您可以在代码上使用 $(selector).addClass(...) 。

我在一个网站上使用它并且它工作正常，其中 link_url 由 PHP 脚本给出，有时它是动态编写的......

# delphi - Data type mismatch in criteria expression when changing adoquery.active

> ID：10095817
> 
> 赞同：2
> 
> 时间：2012-04-10T20:15:48.877
> 
> 标签：delphi, delphi-7, tadoquery

i have the following query

```
SELECT *
FROM Project
WHERE Status = "In Progress" 
```

when i run the program it successfully lists all the project titles with the status 'In Progress' in a DBlookuplistbox, I have a button with the code:

```
adoqCurrentProjects.Active := false;
adoqCurrentProjects.Active := true; 
```

adoqCurrentProjects is the name of the adoquery, however when i click the button the error message 'Data type mismatch in criteria expression' appears. I would have thought that if i changed the amount of records in the Project table with the status "In Progress" and clicked the button it would just list the new results in the DBlookuplistbox as it does when i restart the program, any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:49:56.437

更新 ADOQuery 的替代过程可能是

```
with adoqCurrentProjects do begin
 close;
 sql.Clear;
 sql.Add('SELECT * FROM Project WHERE Status = '+condition);
 open;
end;

// Update DBlookuplistbox 
```

# java - 拖动旋钮后更改滑块的值

> ID：10095825
> 
> 赞同：0
> 
> 时间：2012-04-10T20:16:31.360
> 
> 标签：java, swing, jslider

当用户完成拖动时，我正在尝试使用自动将旋钮的位置移动到最近的刻度。用户单击时位置设置正确，但拖动旋钮时位置设置不正确。我该如何解决这个问题？[`JSlider`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSlider.html#JSlider%28%29) [`setValue(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSlider.html#setValue%28int%29)

```
 /**
     * Called when the slider is moved.
     * 
     * @access  public
     * @param   ChangeEvent
     * @return  void
     */
    public void stateChanged(ChangeEvent e) {
        JSlider source = (JSlider) e.getSource();

        if ( ! source.getValueIsAdjusting() ) {
            //let's only allow users to increment by TIMER_SPACING
            int fps = (int) source.getValue();
            int temp = fps % TIMER_SPACING;
            if ( temp > TIMER_SPACING / 2 ) {
                fps += TIMER_SPACING - temp;
            } else {
                fps -= temp;
            }

            source.setValue(fps);

            if ( fps == 0 ) {
                timer.stop();
            } else {
                if ( ! timer.isRunning() ) {
                    timer.start();
                }
                timer.setDelay(1000 / fps);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:01:59.980

非常简单的解决方案，谢谢[Andrew Thompson](https://stackoverflow.com/questions/10095825/change-value-of-slider-after-knob-is-dragged#comment12932280_10095825)：

```
slider.setSnapToTicks(true); 
```

# css - 改变链接的属性

> ID：10095828
> 
> 赞同：0
> 
> 时间：2012-04-10T20:16:43.717
> 
> 标签：css, css-selectors

我有以下`html`文字。

```
<ol class="otherstufflinks">
    <li> 
        <a href="./pythonNotes/index.html">Python notes</a>
    </li>
    <li> 
        <a href="./figure.html">Cool figure made using</a> 
        <a href="http://mbostock.github.com/d3/" class="nestedlink">d3.js library.</a>
    </li>             
</ol> 
```

`css`我文件中的相关部分是：

```
a:link, a:visited {
    color: steelblue;
    text-decoration: none;
}

a:hover {
    color: rgb(210,135,60);
}

.otherstufflinks > li,
.otherstufflinks a:link, .otherstufflinks a:visited 
{
    font-weight: normal;
    color: rgb(75,75,75);
}

.otherstufflinks a:hover  {
    color: rgb(210,135,60)
} 
```

我想为与 class 的链接选择不同的颜色，比如红色`nestedlink`。如果有人能告诉我该怎么做，将不胜感激？我尝试了以下但没有一个工作。

第一次尝试：

```
.nestedlink a:link, .nestedlink a:visited {
    color: red;
} 
```

第二次尝试：

```
.otherstufflinks .nestedlink a:link, .otherstufflinks .nestedlink a:visited {
        color: red;
   } 
```

我看不出我哪里错了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:18:33.320

```
a.nestedink:link, a.nestedlink:visited {
color: red;
} 
```

我相信使用 a 并且仅使用 .nestedlink，默认的 a:link 属性将覆盖 .nestedlink。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:18:20.420

你试一试

```
a.nestedlink:visited, a.nestedlink:visited {
    color: red;
} 
```

一定？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:19:39.027

你的css不好，试试：

```
a.nestedlink { color: red; } 
```

这意味着“适用于具有嵌套链接类的‘a’（锚）类型的元素”。您所拥有的意思是“将其应用于任何作为具有嵌套链接类的元素的后代的锚点”

# c# - 以不同数据类型数组作为值的字典

> ID：10095835
> 
> 赞同：4
> 
> 时间：2012-04-10T20:17:18.207
> 
> 标签：c#, arrays, dictionary

我正在尝试创建一个字典，其中包含整数、字符串和布尔数据类型的数组作为值。我想，我应该使用 object[] 作为值，所以声明看起来像这样：

```
Dictionary<long, object[]> netObjectArray = new Dictionary<long, object[]>(); 
```

每当我尝试将其元素的值设置为某个值时，VS 都会说在字典中找不到这样的键。

```
netObjectArray[key][2] = val; // ex: The given key was not present in the dictionary. 
```

我该如何正确使用它？

**UPD1：** 不知何故，在抛出此异常之前，以类似的方式使用另一个字典没有问题：

```
Dictionary<long, Vector2> netPositions = new Dictionary<long, Vector2>();
netPositions[key] = new Vector2(x, y); // works ok 
```

在此本地显示后，该值已分配，字典现在包含该条目。为什么我的其他字典不是这样？

**解决方案：**在将值写入值数组之前，我们必须首先初始化该数组。这段代码对我有用：

```
try { netObjectArray[key] = netObjectArray[key]; } // if the object is undefined,
catch { netObjectArray[key] = new object[123]; } // this part will create an object
netObjectArray[key][0] = new Vector2(x, y) as object; // and now we can assign a value to it :) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:22:28.500

这是预期的：如果密钥不存在于 中`Dictionary<K,V>`，则尝试读取该密钥失败。`key`您应该在访问之前为元素分配一个空数组。

当您不知道键是否存在时，这是访问字典的典型模式：

```
object[] data;
if (!netObjectArray.TryGetValue(key, out data)) {
    data = new object[MyObjCount];
    netObjectArray.Add(key, data);
}
data[2] = val; 
```

**编辑**（回应问题的编辑）

只有当您尝试使用以前未知的键读取字典时，您才会看到异常。像你这样的作业

```
netPositions[key] = new Vector2(x, y); 
```

是允许的，即使在分配时该键不在字典中：这将对您的字典执行“插入或更新”操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:25:13.660

尝试这样的事情：

```
Dictionary<long, object[]> netObjectArray = new Dictionary<long, object[]>();
for (int i = 0; i < 100; i++) netObjectArray[i] = new object[100];//This is what you're missing.
netObjectArray[key][2] = val; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:26:42.343

```
Dictionary<string, object[]> complex = new Dictionary<string, object[]>();

complex.Add("1", new object[] { 1, 2 });

object[] value = complex["1"];
value[1] = val; 
```

为我工作...

# memory-management - 重载运算符 new 使得部分代码使用重载的运算符，而其余部分使用默认值

> ID：10095859
> 
> 赞同：0
> 
> 时间：2012-04-10T20:18:47.197
> 
> 标签：memory-management, malloc, new-operator, overloading

我正在研究运行时数据流/模型分析器模块的内存分配器/快照组件。我们的部分要求是将测试程序的数据结构分配在我们控制的自定义内存区域中。为了避免更改测试程序，我们认为我们必须定义自己的 malloc/frees，而实际的快照/运行时检查器模块将使用系统 malloc，我们将通过 LD_PRELOADED 机制获得其指针（感谢 Stackoverflow）。然而，真正的问题在于operator new。我们可以像以前一样走同样的路，但是 new 可能在内部使用 malloc（虽然还没有查看内核/libstdc++ 代码来验证这一点），所以我们最终可能实际上将我们的 malloc 用于测试程序以及运行时检查器模块。我能想出的一种解决方案是重载 operator new 以某种方式找到调用者上下文。（我通常有一个语义，比如创建一个 C++ 对象<在构造函数中设置递归标志> 在析构函数中清除它），根据上下文使用我们的 malloc 或 glibc malloc 分配内存，然后使用 new 的放置语法来确保构造函数被调用。我真的很想要一些关于何时实际调用 C++ 构造函数的指针，我 90% 确定它是 new 的一部分，因为返回一个指向该对象的指针，但我见过的唯一 new 实现（VSCRT）使用 malloc 并且确实没有明显的构造函数调用。我的问题是：1）我想对我的总体想法提出一些反馈意见？2) 何时准确调用构造函数？（我通常有一个语义，比如创建一个 C++ 对象<在构造函数中设置递归标志> 在析构函数中清除它），根据上下文使用我们的 malloc 或 glibc malloc 分配内存，然后使用 new 的放置语法来确保构造函数被调用。我真的很想要一些关于何时实际调用 C++ 构造函数的指针，我 90% 确定它是 new 的一部分，因为返回一个指向该对象的指针，但我见过的唯一 new 实现（VSCRT）使用 malloc 并且确实没有明显的构造函数调用。我的问题是：1）我想对我的总体想法提出一些反馈意见？2) 何时准确调用构造函数？（我通常有一个语义，比如创建一个 C++ 对象<在构造函数中设置递归标志> 在析构函数中清除它），根据上下文使用我们的 malloc 或 glibc malloc 分配内存，然后使用 new 的放置语法来确保构造函数被调用。我真的很想要一些关于何时实际调用 C++ 构造函数的指针，我 90% 确定它是 new 的一部分，因为返回一个指向该对象的指针，但我见过的唯一 new 实现（VSCRT）使用 malloc 并且确实没有明显的构造函数调用。我的问题是：1）我想对我的总体想法提出一些反馈意见？2) 何时准确调用构造函数？然后使用 new 的放置语法来确保构造函数被调用。我真的很想要一些关于何时实际调用 C++ 构造函数的指针，我 90% 确定它是 new 的一部分，因为返回一个指向该对象的指针，但我见过的唯一 new 实现（VSCRT）使用 malloc 并且确实没有明显的构造函数调用。我的问题是：1）我想对我的总体想法提出一些反馈意见？2) 何时准确调用构造函数？然后使用 new 的放置语法来确保构造函数被调用。我真的很想要一些关于何时实际调用 C++ 构造函数的指针，我 90% 确定它是 new 的一部分，因为返回一个指向该对象的指针，但我见过的唯一 new 实现（VSCRT）使用 malloc 并且确实没有明显的构造函数调用。我的问题是：1）我想对我的总体想法提出一些反馈意见？2) 何时准确调用构造函数？1) 我想要一些关于我的总体想法的反馈？2) 何时准确调用构造函数？1) 我想要一些关于我的总体想法的反馈？2) 何时准确调用构造函数？

最好的，Subramanian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:53:22.250

当您重载`new`运算符时，您只会[重载内存分配过程](http://www.relisoft.com/book/tech/9new.html)，而不是对构造函数的调用（我相信，这是由编译器通过发出必要的代码来在返回的空间上调用构造函数来完成的`new`）——类似于`delete：仅释放分配的空间（在已经调用析构函数之后）。

因此，对您的问题的快速回答是，您可以重载运算符`new`/`delete`以使用您的特定内存分配方案（例如通过`malloc`/ `free`），并且对象创建将由生成的可执行代码处理。

注意：构造函数不需要任何额外的参数（你甚至不能为析构函数提供一个参数）——在调用构造函数时，内存已成功分配（否则构造函数将不会被调用)

# java - 二进制搜索是否需要随机访问？

> ID：10095865
> 
> 赞同：2
> 
> 时间：2012-04-10T20:19:10.077
> 
> 标签：java

我认为二进制搜索需要顺序。我不知道我是对还是错。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:24:18.683

您需要能够在随机位置（当前部分的中间）跳跃，所以是的，需要随机访问。（另外，一个要求是集合是有序的）。也就是说，当然，前提是您的结构是列表/数组。如果是二叉树，显然不需要随机访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T20:24:28.560

您可以在没有随机访问的情况下进行二进制搜索。例如，二叉树支持二进制搜索，但不支持随机访问（至少按照通常使用的术语——对集合中任何元素的恒定复杂性访问）。

元素的顺序必须允许与您正在搜索的键进行比较，以便您可以确定如果键大于某个值 X，那么它也大于所有其他小于的元素X（或者您可以使用小于而不是大于）。

虽然这种关系不必与数字排序相对应，但它确实必须能够根据仅与一个元素的比较，从考虑中排除一定百分比的元素（而不仅仅是单个元素）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T20:24:43.383

是的。二进制搜索必须能够以随机（非顺序）方式访问数据结构的所有元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T20:25:59.637

是的，它*确实*需要随机访问。二分搜索的整个想法是在每次迭代时将搜索空间细分为一半，并使用索引来确定新的搜索范围。如果您每次都必须遍历搜索空间才能到达中点，那么您将否定算法的要点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T20:24:23.120

二分查找是“跳到中间”。因此，数据上的某种**顺序**是必要的（这样中间的定义很好）并且需要**索引访问**而不是迭代（能够跳转，否则 O(log(CollectionSize)) 的运行时间不会是可能的）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T20:25:59.203

它必须在搜索发生之前排序，它可以按升序或降序排序，这两种排序之间的区别在于您应该在上半部分或下半部分查找下一个位置，并根据您要查找的键确定

```
int binary_search(int A[], int key, int imin, int imax)
{
  // test if array is empty
  if (imax < imin):
    // set is empty, so return value showing not found
    return KEY_NOT_FOUND;
  else
    {
      // calculate midpoint to cut set in half
      int imid = (imin + imax) / 2;

      // three-way comparison
      if (A[imid] > key):
        // key is in lower subset
        return binary_search(A, key, imin, imid-1);
      else if (A[imid] < key):
        // key is in upper subset
        return binary_search(A, key, imid+1, imax);
      else:
        // key has been found
        return imid;
    }
} 
```

如果您的数组按降序翻转二进制运算符，则此操作适用于升序

```
// three-way comparison
          if (A[imid] < key):
            // key is in lower subset
            return binary_search(A, key, imin, imid-1);
          else if (A[imid] > key):
            // key is in upper subset
            return binary_search(A, key, imid+1, imax);
          else:
            // key has been found
            return imid;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-22T19:26:43.257

值得补充的是，该`Collections.binarySearch`方法不需要搜索列表是 的实例，它的实现也`RandomAccess`将接受任何，如下所示：`List``LinkedList`

```
public static <T>
int binarySearch(List<? extends Comparable<? super T>> list, T key) {
    if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)
        return Collections.indexedBinarySearch(list, key);
    else
        return Collections.iteratorBinarySearch(list, key);
} 
```

BINARYSEARCH_THRESHOLD 等于 5000 (JDK 1.8)。当然，搜索和之前对 LinkedList 进行排序是非常低效的。此外，程序员更习惯于在数组而不是链表中考虑二进制搜索，因此`Collections.binarySearch`接受非 RandomAccess 集合的事实可能令人惊讶。

# c++ - C++。多线程瓶颈进入带有列表的单线程应用程序

> ID：10095867
> 
> 赞同：0
> 
> 时间：2012-04-10T20:19:12.117
> 
> 标签：c++, multithreading, list, concurrency, locking

我有一个多点触控应用程序。它有 3 个 ccv 应用程序向它发送 udp 数据包。创建的应用程序通过多线程的 ofxTuio 接收所有这些数据包。然后这些接触将进入我们在单个线程上编写的代码中。我们有显示对象。它们每个都有一个列表，其中包含指向它们包含的所有对象的指针。比如我们写过，onEnterFrame、addChild、removeChild；功能类似于您在 actionscript 中看到的显示列表语法。但是，由于多线程 tuio 事件，我们在对象列表上遇到了迭代错误（并发）问题。我们如何防止这种情况发生。似乎锁定（互斥锁）是不正确的，因为这些列表没有在多个线程上被访问。我为这个列表创建了一个自定义队列，当对象被删除或添加到列表中时，它们从不迭代，带有几个布尔值和一些额外的排队列表。我怀疑人们遇到过这样的事情，什么是正确的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:31:19.920

如果您有多个线程，标志是不够的。使用互斥锁或其他一些关键部分来锁定读写访问。这就是它们的用途，特别是如果您有任何异步或未经请求的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:41:15.987

使用互斥锁或原子 compare_and_swap 指令使您的数据结构线程安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:13:56.823

If you are using the std::list anything but removing from the list will not invalidate iterators, in fact you have to be iterating the element being removed for this to pose a problem. If you can structure your algorithm to handle it this way on the single thread this may be enough.

I'm curious as to what kind of iterator errors you are getting, are you getting incompatible errors? How do the display object's get their lists? Via this Queue? Once the object has the list can the list be changed?

# javascript - 如何在 1 行中对对象调用匿名 javascript 函数？

> ID：10095868
> 
> 赞同：0
> 
> 时间：2012-04-10T20:19:12.493
> 
> 标签：javascript, node.js, anonymous-function

我正在学习 javascript 匿名函数和范围，并试图理解一些东西，但已经变得有点卡住了。

我有以下三个功能：

```
var funcA = function (value) {
    test = value;
};

var funcB = function (value) {
    this.test = value;
};

var funcC = function (func,value) {
    var item = {};
    //single line invocation
} 
```

我正在尝试编写一行 javascript（它说`//single line invocation`），以便以下两个调用的结果会有所不同，而不是具有相同的效果：

```
funcC(funcA, "set");
funcC(funcB, "set"); 
```

由于 funcB 是在引用`this.test`，所以它会更改本地（实例）值是有道理的，因此我们可以使用 funcC 中的“item”对象。我尝试做一些匿名函数“东西”，比如：

```
item.(function(func,value){func(value)})(func, value); 
```

但是，就导致不同结果的陈述而言，我没有任何运气。（即，当我使用 node(.js) 运行我的代码时，`test`和`this.test`值都发生了变化）。

任何有助于更好地理解这一点的帮助都会很棒。

提前致谢，

典范RG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:23:01.917

您必须使用[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)来告诉它要处理的实例。

```
funcB.call(item, value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:26:16.900

您不能将匿名函数用作对象属性。你想做

```
var item = {"f": func};
item.f(value);
// item.test == value now 
```

正确的？JavaScript 这样做的方式是[`.call()`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)：

```
func.call(item, value);
// with the difference that item has no "f" property here 
```

您还可以使用`call`匿名函数表达式：

```
(function(val){ this.test = val; }).call(item, value);
// yet this equivalent looks much cleaner:
item.test = value; 
```

# physics - 开始使用 C++ 对磁场线进行建模

> ID：10095876
> 
> 赞同：1
> 
> 时间：2012-04-10T20:19:52.643
> 
> 标签：physics

我正在做一个使用 C++ 创建磁场线的项目。我使用过 C++ 的计算部分（并不真正关心设计或任何太花哨的东西），但我在创建磁场线时遇到了麻烦。我不确定如何对涉及交叉产品的东西进行建模

洛伦兹力 eqn：F = q(vx B)

我已经研究了可能的方法，例如改变半径相对于场的步长，但我也觉得我需要找到一种方法来改变场出现的角度。

我只想模拟一个简单的偶极磁铁。我会使用 C++ 生成点，然后将它们保存为 txt 文件并使用 gnu plot 绘制它们。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:39:50.480

我会这样开始：

对于您要创建的每条场线，从一个极附近的电荷（例如电子）开始，然后求解微分方程的初始值系统（例如 Runge-Kutta），直到到达另一极。这是一条线。

重复使用不同的起点（靠近一个极点）。

我正在谈论的方程的初始值系统是：

**F** = q( **v** x **B** )

d **v** / dt = (q/m) ( **v** x **B** )

希望这是一个好的开始。（我不会详细介绍 RK 方法，因为你提到你熟悉计算部分，如果你不熟悉它，它很受欢迎，所以你应该可以毫不费力地搜索它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:17:27.100

As GuyGreer suggests, you can start at a source and follow the field to the sink. A field line follows the vector of the field at every point, so ideally you would consider not just the direction of the field at the point but also the gradient of the field; otherwise you will need more points to obtain an accurate line.

An alternative method would be to draw a straight line from source to sink, and move along its length checking the field vector is aligned with the field line. Where it is not, break the line into two segments and move the centre point; in effect you are moving the line around to find the field line, and adding more line segments where it wiggles more. Ideally go with splines or some other curve.

You mention cross products. If you can obtain the value of a field vector at a point as a 3d vector, then its cross product with another vector is just the standard definition of a cross product:

```
// given vectors a and b with properties x, y and z representing the components
cross.x = a.y * b.z - a.z * b.y;
cross.y = a.z * b.x - a.x * b.z;
cross.z = a.x * b.y - a.y * b.z; 
```

# ajax - 基于 XMLHttpRequest 的 Windows 身份验证

> ID：10095878
> 
> 赞同：1
> 
> 时间：2012-04-10T20:20:00.120
> 
> 标签：ajax, wcf, model-view-controller, xmlhttprequest, windows-authentication

这是我的场景：

我的客户端在 DomainA 上运行。客户端点击 DomainB 上的 MVC Web 应用程序，并提示输入他们的登录凭据，他们提供并成功授予对应用程序的访问权限。

现在，当应用程序尝试向 WCF 服务（也在 DomainB 上运行，相同的服务器，不同的端口）发出 XMLHttpRequest 时，会再次提示用户输入他们的 DomainB 登录凭据。

**有没有办法将用户的 DomainB 凭据与 XMLHttpRequest 一起传递？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:00:08.137

我发现通过安全服务器（在我的情况下是 IIS 上的 Windows 身份验证）提交 ajax 请求的唯一方法是对所有 POST 请求使用 iframe，尽管 get 请求通过 xml 请求对象工作。它实际上工作得很好。

框架 ajax 的唯一副作用是浏览器历史记录被每个请求填充。只需确保不再执行 javascript，这不是什么大问题。您也可以尝试使用 javascript 来操作历史记录，尽管我在尝试时遇到了一些有趣的错误。

就多个域而言，我只是在阅读另一篇关于此的 SO 帖子：[在 iframe 中形成 POST 而不会影响历史](https://stackoverflow.com/questions/1597548/form-post-in-iframe-without-affecting-history)

# mysql - Rails3 和 Amazon RDS 中 SQL 视图的标准解决方案

> ID：10095882
> 
> 赞同：0
> 
> 时间：2012-04-10T20:20:26.830
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, amazon-rds

我正在寻找标准解决方案，如何通过使用迁移将 SQL 视图实施到 Rails3 项目中，以及是否有人对基于 Amazon RDS 和 MySql 数据库的该主题有经验。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:04:20.633

最后我通过[schema_plus](https://github.com/lomba/schema_plus) gem 解决了这个问题，它有一个 create_view 方法。而且我对 Amazone RDS 上的“rake db:migrate”没有任何问题。到现在为止还挺好。希望这个答案对某人有用。:)

# windows - 在 Windows 上为 stderr 更改文本输出颜色

> ID：10095886
> 
> 赞同：9
> 
> 时间：2012-04-10T20:20:39.070
> 
> 标签：windows, cmd, stderr, building

我最近发现了一篇文章，它提供了一个解决方案，让 stderr 的文本输出在 Linux (bash) 中具有不同的颜色

他们创建了以下 bash 脚本脚本

```
#!/bin/bash
{ $* 2>&1>&3|sed 's,.*,\x1B[33m&\x1B[0m,'>&2;} 3>&1 
```

这会导致输出在来自 stderr 时打印黄色文本。stdout 仍然打印相同的颜色。

该脚本保存在 $PATH 上名为 color 的目录中。这允许我使用 make 或 scons 运行脚本，它会将 stderr 中的所有文本以黄色显示。（可以通过将 33m 更改为 31m 使文本变为红色）

```
color make CPU=x64 
```

这对于在编译时查找错误非常有用。

是否有类似的脚本可用于 Windows cmd shell？

注意：如果有帮助，我已经在我的 Windows 计算机上安装了 sed。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:46:15.837

关于 Windows 的 cmd.exe 下对 ANSI 转义码的支持，请参见[ansicon](https://github.com/adoxa/ansicon)。将重定向逻辑转换为 cmd.exe 语法后，我准备了以下`color.bat`文件：

```
@Echo Off
(((%* 1>&3) 2>&1) | "c:\Program Files (x86)\GnuWin32\bin\sed.exe" "s,.*,\x1B[33m&\x1B[0m," 1>&2) 3>&1 
```

不幸的是，流混合在一起（在某些行中，stdout 和 stderr 中的字符在单行中混合在一起）。也许这种行为取决于使用的 sed.exe 版本，所以试一试。

如果这不起作用，请考虑使用最小的[cygwin](http://www.cygwin.com/)安装。我测试了你的`color.sh`脚本，我能够启动一个 .bat 文件，它可以正常工作而无需混合流。我使用的语法是：

```
./color.sh cmd /c test.bat 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T04:55:56.840

我设计了一种使用纯 Batch 命令获得等效解决方案的方法，即没有 Ansi、没有 sed.exe 等，只使用 findstr：

```
any_command 2>&1 1>&3 | findstr /N /A:4E "^" 
```

在这种情况下，不同的颜色不会被赋予来自 stderr 的整行，而只是赋予 findstr 提供的行号，然而，对于所述要求来说应该足够了。我将很快编写一个小的辅助 .exe 程序，它将以另一种颜色显示整个 stderr 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-03T00:01:57.493

@MBu，@gnash117

我重命名为`color`，`co`因为`COLOR`是一个 Windows 命令，我将其扩展为：

```
:: color output - Displays stderr output in different color
::
:: Credits to MBu and gnash117 at http://stackoverflow.com/questions/10095886/change-text-output-color-on-windows-for-stderr#10118710
:: 
:: Requires:
::   - http://sourceforge.net/projects/mingw/files/MSYS/
::   - http://adoxa.altervista.org/ansicon/
::   - http://www.autohotkey.com/
::
@echo off

if "%1"=="" goto :Help

:: 1;31 ... intense red foreground (see https://github.com/adoxa/ansicon/blob/master/sequences.txt for more colors)
:: \x07 ... BEL, but doesn't work :-(
(((%* 1>&3) 2>&1) | sed "s/.*/\x07\x1B[1;31m&\x1B[0m/" 1>&2) 3>&1
goto :EOF

:Help
setlocal
::------------------------------------------------
:: Adapt these in pairs according to your likings
set invokeKeys=[Shift]+[Enter]
set invokeHotkeys=+Enter
set invokeAfterRemoveKeys=[Alt]+[Enter]
set invokeAfterRemoveHotkeys=!Enter
set removeKeys=[Alt]+[c]
set removeHotkeys=!c
::-----------------------------------------------
set invokeText=invokes the entered command after preceding it with '%0 '
set invokeAfterRemoveText=invokes the entered command after removing the first three characters from the beginning
set removeText=removes the first three characters from the command line
echo Colors a command's stderr output as defined in %~f0
echo Usage:
echo   - Preceed a command with '%0 ' (e.g.: 'co dir not.existing.file' will show the resulting error message in a different color)
echo   - If the AutoHotkey script below is active:
echo     - %invokeKeys% ... %invokeText%
echo     - %invokeAfterRemoveKeys% ... %invokeAfterRemoveText%
echo     - %removeKeys% ... %removeText%
echo(
echo       The latter two are useful when using the command line history and having used %invokeKeys% before.
echo(
echo     Enabled by AutoHotkey script:
echo(
echo       #IfWinActive ahk_class ConsoleWindowClass
echo       ; %invokeText%
echo       %invokeHotkeys%::Send {Home}%0 {Enter}
echo       ; %invokeAfterRemoveText%
echo       %invokeAfterRemoveHotkeys%::SendInput {Home}{Del 3}{Enter}
echo       ; %removeText%
echo       %removeHotkeys%::SendInput {Home}{Del 3}{End}
echo       #IfWinActive
endlocal
:EOF 
```

# xaml - 在 Metro 应用程序中使用 Automapper

> ID：10095888
> 
> 赞同：2
> 
> 时间：2012-04-10T20:21:09.060
> 
> 标签：xaml, automapper, windows-8, microsoft-metro

我正在使用 XAML 编写一个 Windows 8 Metro 应用程序，并尝试使用 NuGet 向 Automapper 添加一个引用，它说它不受支持。有没有解决的办法？为 Metro 应用程序添加引用有哪些要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:48:28.127

NuGet 当前支持将包安装到 Metro 应用程序（[工作项 #1527](http://nuget.codeplex.com/workitem/1527)），但它确实需要为 WinRT 编译包库。

我看了一下 Automapper，它只支持 .Net 4.0 和 Silverlight 4，它需要更新的 WinRT 程序集。注意：其他没有程序集的包应该可以在 Metro 应用程序中正常安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:12:20.813

无论 NuGet 是什么 -*绝对*没有外部或第三方程序集可以包含在未首先在 WinRT 中重新编译的 Metro 项目中。有一个例外 -[可移植类库](http://blog.jerrynixon.com/2011/12/mango-sample-portable-assemblies.html)。但是 PCL 有很多限制，并不是您想要的。

# java - NoClassDefFoundError：com.google.api.client.extensions.android2.AndroidHttp

> ID：10095891
> 
> 赞同：0
> 
> 时间：2012-04-10T20:21:34.690
> 
> 标签：java, android, task, noclassdeffounderror

我想编写一个能够处理 Google 任务的小程序。[示例程序](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android?hl=de-DE)运行良好。

现在我想编写自己的应用程序，但我总是收到 NoClassDefFoundError。

我尝试了这个[解决方案](https://stackoverflow.com/a/9857657/1320448)，但这也不起作用。

堆栈跟踪：

```
04-10 19:40:19.573: E/AndroidRuntime(306): FATAL EXCEPTION: main
    04-10 19:40:19.573: E/AndroidRuntime(306): java.lang.NoClassDefFoundError: com.google.api.client.extensions.android2.AndroidHttp
    04-10 19:40:19.573: E/AndroidRuntime(306):  at org.todo.TodoActivity.<init>(TodoActivity.java:78)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at java.lang.Class.newInstanceImpl(Native Method)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at java.lang.Class.newInstance(Class.java:1429)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.os.Handler.dispatchMessage(Handler.java:99)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.os.Looper.loop(Looper.java:123)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at java.lang.reflect.Method.invoke(Method.java:521)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    04-10 19:40:19.573: E/AndroidRuntime(306):  at dalvik.system.NativeStart.main(Native Method) 
```

我能做些什么来解决这个问题？

（老实说，我已经尝试了几个小时 - 几周来解决我的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:31:01.547

解决这个问题的几个步骤：

1.  从项目中删除 JAR 文件，并清理构建项目
2.  如果您使用[Ant](http://en.wikipedia.org/wiki/Apache_Ant)构建，请手动删除`gen`和`bin`文件夹的内容。
3.  在您的项目中添加一个 JAR 文件。如果您正在使用使用此 JAR 文件的库项目，那么也添加库的类路径

这将解决您的问题。只是为了确定您使用的是哪个版本的 Android SDK。

# caching - Hit & Miss 使用 4-Way 关联缓存

> ID：10095893
> 
> 赞同：0
> 
> 时间：2012-04-10T20:21:39.903
> 
> 标签：caching, memory-management

问题 ：

```
Given a computer ,where were made the following memory accesses 

(from left to right) : 

5 ,10 ,2 ,34 ,18 ,4 ,22 ,21 ,11 ,2

* Decide if we have a HIT or MISS when dealing with a 4-way associative mapping ,
  when the total size of the cache is 32 blocks of 2 bytes !

* When you're done , write the final map of the cache 
```

我的答案 ：

集合的大小是 4 ，因此：

(块数)/(路数)=32/4=8

然后我们有一个缓存，有八个单元格，从 0 到 7（**如果我错了，请纠正我！！？**）

现在：5:(4,5)→5/2=2→2 % 8=2→cell 2→miss

10:(10,11)→10/2=5→5 % 8=5→单元格5→未命中

2:(2,3)→2/2=1→1 %8=1→单元格1→未命中

34:(34,35)→34/2=17→17 % 8=1→单元格1→未命中

18:(18,19)→18/2=9→9 % 8=1→单元格1→未命中

4：在单元格 2 中命中

22:(22,23)→22/2=11→11 % 8=3→单元格3→未命中

21:(20,21)→21/2=10→10 % 8=2→单元格2→未命中

11：命中单元格 5

2：在单元格 1 中命中

现在，缓存的最终映射是：

```
0: empty
1: (2,3) (34,35) (18,19)
2: (4,5) (20,21)
3: (22,23)
4: empty
5: (10,11)
6: empty
7: empty 
```

1.  我的回答正确吗？

2.  我对缓存的地图有误吗？

感谢您的帮助....我的考试很快:)

谢谢 ，

罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:44:15.493

一个简单的 Python 程序（忽略替换，因为没有替换）说你是正确的

```
from collections import defaultdict

d = defaultdict(list)

for item in (5 ,10 ,2 ,34 ,18 ,4 ,22 ,21 ,11 ,2):
    value = item // 2 * 2, item // 2 * 2 + 1
    cell = item // 2 % 8
    if value in d[cell]:
        print "HIT", cell
    else:
        d[cell].append(value)
        print "MISS", cell

for i in range(8):
    print i, d[i] 
```

--

```
MISS 2
MISS 5
MISS 1
MISS 1
MISS 1
HIT 2
MISS 3
MISS 2
HIT 5
HIT 1

0 []
1 [(2, 3), (34, 35), (18, 19)]
2 [(4, 5), (20, 21)]
3 [(22, 23)]
4 []
5 [(10, 11)]
6 []
7 [] 
```

# android - Android - 进度条上的非常奇怪的行为

> ID：10095895
> 
> 赞同：0
> 
> 时间：2012-04-10T20:21:47.797
> 
> 标签：android

我更新了我的代码，就像 Andro 写给我的一样：

```
public class ZiiziiActivity extends Activity {
    ProgressDialog pd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        pd = new ProgressDialog(ZiiziiActivity.this);
        final Handler handler = new Handler()
        {
            public void handleMessage(Message msg)
            {
                if(msg.what==0)
                {
                    pd.dismiss();
                }
            }
        };

        Button end = (Button) findViewById(R.id.button2);
        end.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                pd.setMessage("Working...");
                pd.setIndeterminate(true);
                pd.setCancelable(false);
                pd.show();
                Thread t = new Thread(new Runnable() {
                    @Override
                    public void run() {
                        for (int i=0;i<1000000;i++)
                        {
                            try {
                                Thread.sleep(100);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } //To denote a delay in background processing
                        }
                        handler.sendEmptyMessage(0);
                    }
                }); t.start();
            }
        });
    }
} 
```

**但是，当进步开始时，它永远不会结束。**

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:33:58.370

您的代码与您将执行以下操作相同。

```
pd.show();
pd.dismiss(); 
```

该方法`show`被调用，但对话框将立即被关闭，因为您的`for`循环根本没有时间消耗。此外，您正在阻止 UI。因此，如果您通过耗时的操作替换空的 for 循环，您的进度将不会运行，因为您阻塞了 UI 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:44:23.963

这很简单。这背后的基本事实如下。

您的进度对话框在主 UI 中运行。您的`for`循环在这里执行得如此之快并且具有更高的优先级，因此您无法看到您的进度对话框，但事实是，您的代码工作正常并且进度对话框确实显示了人眼无法捕捉的几分之一秒。

通常人们在后台线程而不是主线程中执行某些操作时会使用进度对话框。因此，您将不得不更改一些代码。他们是，

1）用这样的线围绕你的`for`循环，

```
 Button end = (Button) findViewById(R.id.button2);
    end.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            ProgressDialog pd = new ProgressDialog(ZiiziiActivity.this);
            pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pd.setMessage("Working...");
            pd.setIndeterminate(true);
            pd.setCancelable(false);
            pd.show();
            Thread t = new Thread(new Runnable() {
                @Override
                public void run() {
                    for (int i=0;i<1000000;i++)
                    {
                        Thread.sleep(100); //To denote a delay in background processing
                    }
                    handler.sendEmptyMessage(0);
                }
            });
            t.start();
        }
    }); 
```

2) 现在向你的 onCreate() 添加一个处理程序，如下所示：

```
 handler = new Handler()
    {
        public void handleMessage(Message msg)
        {
            if (msg.what == 0)
            {
                pd.dismiss();
            }
        }; 
```

请注意，您不能从后台线程更新您的 UI。因此，为了从其他工作线程更新 UI，您需要使用处理程序。因此，一旦您的 for 循环完成，将调用更新 UI 的处理程序。（在这种情况下，它会取消进度对话框）。

# android - 主类未调用 onCreate

> ID：10095900
> 
> 赞同：0
> 
> 时间：2012-04-10T20:22:03.697
> 
> 标签：android, oncreate

我已经阅读了很多文章，但没有一篇可以解决我没有在 XMLParsingExample 类中调用 onCreate 方法的问题。

onCreate 中的日志语句没有显示输出，跟踪显示类在 boolean finished=false 后退出，因此没有运行 onCreate。

这里的代码：

```
public class MyMap extends MapActivity {

private MapView mapView;
private MapController mc;
private OverlayItem overlayItem;
private List<Overlay> mapOverlays;
private Drawable drawable;
private Drawable drawable2;
private MyItemizedOverlay itemizedOverlayMyLoc;
private MyItemizedOverlay itemizedOverlayRust;
private LocationManager locMgr;
private MyLocationListener locLstnr;XMLParsingExample mXMLParsingExample;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        mc = mapView.getController();
        mapView.setBuiltInZoomControls(true);

        locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        locLstnr = new MyLocationListener();
        locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locLstnr);

        mapOverlays = mapView.getOverlays();

        // first overlay
        drawable = getResources().getDrawable(R.drawable.marker2);
        itemizedOverlayMyLoc = new MyItemizedOverlay(drawable, mapView);

        //                                  LAT                 LONG
        GeoPoint uwLoc = new GeoPoint((int)(52.22778*1E6),(int)(6.10428*1E6));
        overlayItem = new OverlayItem(uwLoc, "Uw locatie", "http://www.nu.nl");
        itemizedOverlayMyLoc.addOverlay(overlayItem);
        mapOverlays.add(itemizedOverlayMyLoc);

        // Rustpunten overlay
        drawable2 = getResources().getDrawable(R.drawable.rmarker3);
        itemizedOverlayRust = new MyItemizedOverlay(drawable2, mapView);

        mXMLParsingExample = new XMLParsingExample(); 
```

这里是未调用 oncreate 的类：

```
public class XMLParsingExample extends Activity {

/** Create Object For SiteList Class */
public SitesList sitesList = null;
public ProgressDialog progressDialog;
boolean finished=false;

    /** Called when the activity is first created. */
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.i("onCreate", "onCreate started");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:25:06.173

启动一个新的 Activity 不是通过实例化它 ( `new XMLParsingExample();`) 来完成的，而是有一个意图，例如：

```
Intent intent = new Intent(this, XMLParsingExample.class);
startActivity(intent); 
```

看看[这里](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:30:45.047

Binyamin Sharet 是正确的。

我认为您混淆了创建者方法，该方法在您分配对象时会被调用，并且`onCreate()`是一个 Android 生命周期回调函数，框架会在适当的时间自动调用。

创建者函数的名称中通常没有“create”。它共享您要实例化其对象的类的名称。在您的情况下，创建者将被称为`XMLParsingExample()`.

有关 Android 生命周期回调的更多信息，请参阅[http://developer.android.com/guide/topics/fundamentals/activities.html](http://developer.android.com/guide/topics/fundamentals/activities.html)。

# php - 如何从 Drupal 的自定义模块中保存复选框值？

> ID：10095902
> 
> 赞同：4
> 
> 时间：2012-04-10T20:22:09.683
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

如何使用 hook_submit 保存复选框的状态？

钩子形式：

```
$versionArray = array('ver 1.7.0.0-beta1' => 'ver 1.7.0.0-beta1', 'ver 1.6.2.0' => 'ver 1.6.2.0', 'ver 1.5.1.0' => 'ver 1.5.1.0', 'ver 1.4.2.0' => 'ver 1.4.2.0', 'ver 1.3.3.0' => 'ver 1.3.3.0');

$form['mage']['version'] = array(
    '#type' => 'checkboxes',
    '#title' => t('Select'),
    '#required' => TRUE,
    '#options' => $versionArray
); 
```

钩子提交：

```
....
$node->field_checkboxes[0]['value'] = $form_state['values']['mage']['version'];
....
node_save($node) 
```

我已正确保存所有其他字段，但这些字段仍为空白。

谢谢罗伯特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:42:43.157

在您的提交功能中尝试使用以下代码

```
$selected = array();
foreach($form_state['values']['version'] as $a => $b)
{
    if((string)$b != "0")
    {
         $selected[] = $b;
    }
}
variable_set("var_selected", $selected); 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T21:25:33.697

更简单：

```
$save_array = array_filter($form_state['values']['mage']['version']);
    $p=0;
        foreach ($save_array as $a => $b) {
            $node->field_checkboxes['und'][$p++]['value'] = $b; 
        }

...
node_save($node); 
```

# java - JAX-WS：在返回的 ArrayList 周围放置一个包装器

> ID：10095911
> 
> 赞同：2
> 
> 时间：2012-04-10T20:23:04.207
> 
> 标签：java, web-services, jax-ws

我有以下端点接口：

```
@WebService
public interface SEIWebService {

    @WebMethod
    @WebResult(name="CreateWorkOrderItemResponse")
    CreateWorkOrderItemResponse createWorkItem(@WebParam(name = "CreateWorkOrderItemRequest")CreateWorkOrderItemRequest request);
} 
```

实施：

```
@WebService(endpointInterface = "com.someCompany.SEIWebService", portName = "SEIWebServices")
public class SEIWebServiceImpl implements SEIWebService{

    @Override
    public CreateWorkOrderItemResponse createWorkItem(CreateWorkOrderItemRequest request) {
        CreateWorkOrderItemResponse response = new CreateWorkOrderItemResponse();
        response.setResponseCode("Testing Create 2222");
        response.addError("Error 1");
        response.addError("Error 2");

        return response;
    } 
```

最后，响应对象的代码

```
public class CreateWorkOrderItemResponse {
    private String responseCode = null;
    private ArrayList<String> errorList = new ArrayList<String>();

    public void setResponseCode(String responseCode) {
        this.responseCode = responseCode;
    }

    public String getResponseCode() {
        return responseCode;
    }

    public void addError(String error) {
        errorList.add(error);
    }

    public void setErrorList(ArrayList<String> errorList) {
        this.errorList = errorList;
    }

    public ArrayList<String> getErrorList() {
        return errorList;
    }
} 
```

当我运行此代码时，SoapUI 中的响应如下所示：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:createWorkItemResponse xmlns:ns2="http://someCompany.com/">
         <CreateWorkOrderItemResponse>
            <errorList>Error 1</errorList>
            <errorList>Error 2</errorList>
            <responseCode>Testing Create 2222</responseCode>
            <testList/>
         </CreateWorkOrderItemResponse>
      </ns2:createWorkItemResponse>
   </S:Body>
</S:Envelope> 
```

最后，**问题**......使用上面的代码，有没有办法改变它，所以我可以在 errorList 响应周围添加一个“包装器”？我希望 SOAP 消息响应如下所示：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:createWorkItemResponse xmlns:ns2="http://someCompany.com/">
         <CreateWorkOrderItemResponse>
            <Errors>
                <errorList>Error 1</errorList>
                <errorList>Error 2</errorList>
            </Errors>
            <responseCode>Testing Create 2222</responseCode>
            <testList/>
         </CreateWorkOrderItemResponse>
      </ns2:createWorkItemResponse>
   </S:Body>
</S:Envelope> 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:54:21.100

我想出了答案。我不得不为此使用`XmlElementWrapper`注释。所以现在的代码是：

```
public class CreateWorkOrderItemResponse {
    private String responseCode = null;
    private ArrayList<String> errorList = new ArrayList<String>();

    public void setResponseCode(String responseCode) {
        this.responseCode = responseCode;
    }

    public String getResponseCode() {
        return responseCode;
    }

    public void addError(String error) {
        errorList.add(error);
    }

    public void setErrorList(ArrayList<String> errorList) {
        this.errorList = errorList;
    }

    @XmlElementWrapper(name="error_list") 
    @XmlElement(name="error")
    public ArrayList<String> getErrorList() {
        return errorList;
    }
} 
```

# asp.net-mvc - 在每个控制器操作上注入 javascript - asp.net mvc

> ID：10095912
> 
> 赞同：4
> 
> 时间：2012-04-10T20:23:09.220
> 
> 标签：asp.net-mvc, controller, action, viewmodel

每当我们通过完整的回发或ajax调用调用任何动作控制器时，我想检查视图模型并根据某些逻辑注入一些要在浏览器中执行的javascript。该应用程序大部分已经编码，我想要做的是有一些通用代码可以做到这一点。我想知道最好的方法是什么。我正在考虑使用动作过滤器，然后检查模型，然后在需要时注入 js。但不确定这将如何处理执行的操作等事件。任何代码示例都会有所帮助。

另一种选择是在客户端进行。但再次不确定如何以通用方式正确执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T20:35:43.227

研究覆盖基本控制器的 OnActionExecuted 事件，该事件应该让您在视图模型被操作处理后访问它。不过我很好奇，您将如何将一段 javascript 代码注入到 AJAX 响应中，这通常是一个简单的 JSON 对象？

如果您真正要问的是如何从控制器注入 javascript，您可以在视图中添加以下内容：

```
<script type="text/javascript" defer="defer">
    @Html.Raw(ViewBag.StartupScript)
</script> 
```

您可以将以上内容添加到特定视图或布局页面。然后，您可以执行以下操作：

```
public class MyController : Controller
{
    public override void OnActionExecuted(...)
    {
        if (...)
        {
            ViewBag.StartupScript = "alert('hello world!');";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T19:01:11.710

要在回发和 ajax 调用上注入，您可以这样做：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
            StringBuilder sb = new StringBuilder();
            sb.Append("<script type=\"text/javascript\">\n\t");
            sb.Append("alert('Hello Injection');");
            sb.Append("</script>\n");
            if (filterContext.HttpContext.Request.IsAjaxRequest())
            {
                filterContext.HttpContext.Response.Write(sb.ToString());
            }
            else
            {
                ViewBag.StartupScript = sb.ToString();
            }
} 
```

可能不是最干净的解决方案，但有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T17:18:40.113

filterContext.HttpContext.Response.Write(sb.ToString()); 这将覆盖来自 Ajax 调用的部分视图，是否可以四处走走？

# linq-to-xml - 简单的 Linq to XML 查询不适用于 MSTest 文件 (*.trx)

> ID：10095913
> 
> 赞同：0
> 
> 时间：2012-04-10T20:23:11.323
> 
> 标签：linq-to-xml, mstest

我不明白为什么这个查询不起作用。

```
Assert.IsTrue(File.Exists(file));
XDocument doc = XDocument.Load(file);
var res = from o in doc.Descendants("Counters")
          select new 
          {
              Total = (string)o.Attribute("total"),
              Executed = (string)o.Attribute("executed"),
              Passed = (string)o.Attribute("passed"),
              Failed = (string)o.Attribute("failed")
          };

Assert.IsTrue(res.Count() > 0); 
```

我已经检查并仔细检查了该文件是一个 .trx 文件。我有一个大脑放屁还是我错过了什么？

谢谢，比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:15:23.950

查询未找到元素的最可能原因是在查询时未考虑 XML 中的默认命名空间以尝试是否

```
XDocument doc = XDocument.Load(file);
XNamespace df = doc.Root.Name.Namespace;
var res = from o in doc.Descendants(df + "Counters")
          select new 
          {
              Total = (string)o.Attribute("total"),
              Executed = (string)o.Attribute("executed"),
              Passed = (string)o.Attribute("passed"),
              Failed = (string)o.Attribute("failed")
          }; 
```

给你你正在寻找的结果。如果没有，则发布 XML 示例。

# javascript - 跨域 Ajax 调用不适用于 document.write

> ID：10095915
> 
> 赞同：0
> 
> 时间：2012-04-10T20:23:35.267
> 
> 标签：javascript, xml, ajax

我正在使用下面的这个 Ajax 脚本进行跨域 Ajax 调用，如果我使用它可以正常工作`alert(txt);`，但是当我将其更改`document.write(txt);`为打印结果时它停止工作并且我不确定它为什么不工作，

这可能是愚蠢的，但我就是想不通

```
 function xss_ajax(url) {
        var script_id = null;
        var script = document.createElement('script');
        script.setAttribute('type', 'text/javascript');
        script.setAttribute('src', url);
        script.setAttribute('id', 'script_id');

        script_id = document.getElementById('script_id');
        if(script_id){
            document.getElementsByTagName('head')[0].removeChild(script_id);
        }

        // Insert <script> into DOM
        document.getElementsByTagName('head')[0].appendChild(script);
    }

    function callback(data) {
        var txt = '';
        for(var key in data) {
           txt += key + "  " + data[key];

        }
      //alert(txt);
      document.write(txt);
   }

    var url = "http://myserver.com"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:26:04.590

我相信在某些浏览器中，您无法在文档加载完成后调用 document.write...

编辑：我要删除的这些东西肯定行不通。正如 Teemu 指出的那样，调用“open”会清除文档。此外，MDN 表示，如果您自己没有调用 .write，那么调用 .write 将隐式调用 .open。 ~~另一种可能性是文档没有呈现，因为当您开始编写时，您必须关闭流。您可以尝试（不确定这是否有效）：~~

 ~~```
document.open();
document.write('stuff');
document.close(); 
```~~  ~~但是，我强烈建议您只使用更标准的方法来写入文档，例如 appendChild 或使用框架（例如 jQuery）：

```
function callback(data) {
    var txt = '';
    for(var key in data) {
       txt += key + "  " + data[key];

    }
    //alert(txt);
    //document.write(txt);
    document.body.appendChild(document.createTextNode(txt));
} 
```~~

# c# - 无法在 ASP.NET C# 中删除 cookie

> ID：10095916
> 
> 赞同：1
> 
> 时间：2012-04-10T20:23:35.440
> 
> 标签：c#, asp.net, cookies, logout

我有一个 logout.aspx，当用户单击注销时会调用它，并且我想在其中删除 cookie，但它不会这样做......

```
public partial class LogoutUser : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        HttpCookie cookie;

        cookie = Request.Cookies.Get("Basket");
        if (cookie == null)
        {
            cookie = new HttpCookie("Basket");
        }

        foreach (string item in cookie.Values.AllKeys)
        {
            Response.Cookies[item].Expires = DateTime.Now.AddDays(-1);                
        }

        cookie.Expires = DateTime.Now.AddDays(-1d);
        Response.Cookies["Basket"].Expires = DateTime.Now.AddYears(-1);    
        Session.Abandon();   

        Response.Redirect("~/Default.aspx");
    }
} 
```

cookie 将值存储在篮子中，但注销后我仍然可以访问篮子，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:53:34.473

[这是一些相关文档](http://msdn.microsoft.com/en-us/library/ms178195.aspx)。

我相信你的错误是在这一行：

```
if (cookie == null) 
```

您正在检查 null，而不是检查 not null。因此，

```
HttpCookie cookie;

    cookie = Request.Cookies.Get("Basket");
    if (cookie != null)
    {
        cookie = new HttpCookie("Basket");
        cookie.Expires = DateTime.Now.AddDays(-1);
        Response.Cookies.Add(cookie);
    }

    Response.Redirect("~/Default.aspx"); 
```

应该做的伎俩。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:30:39.813

会不会是这个？

默认情况下，已放弃或过期会话的会话标识符被回收。也就是说，如果发出的请求包括过期或放弃会话的会话标识符，则使用相同的会话标识符启动新会话。您可以通过将sessionState 配置元素的**regenerateExpiredSessionId属性设置为****true**来禁用此功能。有关详细信息，请参阅会话标识符。

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx)

# php - Zend Framework 多步表单生成器

> ID：10095925
> 
> 赞同：1
> 
> 时间：2012-04-10T20:24:10.010
> 
> 标签：php, mysql, forms, zend-framework

我正在开发用于多步表单提交的表单生成器。

我有一个步骤表，每个步骤有多个组，每个组有多个问题，最后每个问题都有自己的选项，所有这些都与一个程序有关。

我正在使用 zend 框架进行构建。

我创建了一个 sql 语句以获得完整的结果集，如下所示

```
$resultSet = $db->fetchAll($db->select()->from(array('rs' => 'registration_steps'))
   ->joinInner(array('rg' => 'registration_groups'), 'rs.id = rg.registration_step_id')
   ->joinInner(array('rq' => 'registration_questions'), 'rq.registration_group = rg.id')
   ->joinInner(array('qo' => 'registration_question_options'), 'rq.id = qo.question_id', array('option_text'))
   ->where('rs.program_id =?', $program_id)); 
```

问题很明显，我得到了重复的结果，因为我正在使用选项进行内部连接。

虽然如果我在客户端解析整个事情，这可能会起作用，但我想找到一种更优化或更好的方法。

# ruby-on-rails - 太阳黑子、Solr、order_by、编码

> ID：10095926
> 
> 赞同：4
> 
> 时间：2012-04-10T20:24:17.220
> 
> 标签：ruby-on-rails, solr, sunspot

我在排序时遇到了一系列太阳黑子问题和编码问题。主要问题是使用带有口音的巴西单词。例如，对于一组名称：

*   阿尔贝托
*   安娜
*   玛丽亚
*   阿尔瓦罗

在调用 order_by 方法之后，名称 Álvaro 总是出现在列表的末尾。

这是我对列名的类设置：

```
class Student < ActiveRecord::Base
 searchable do
   text(:name)
   text(:code)
   string :name_sort do 
     name
   end
 end

 def search(options)
    students = Student.search do 
      fulltext(options[:data])
      order_by :name_sort
    end
    students.results
 end
end 
```

任何人都可以帮忙吗？谢谢路易斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:53:27.533

您可以尝试在索引时使用[音译](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-transliterate)

```
class Student < ActiveRecord::Base
  searchable do
    text(:name)
    text(:code)
    string :name_sort do 
      I18n.transliterate name
    end
  end

  def search(options)
    students = Student.search do 
      fulltext(options[:data])
      order_by :name_sort
    end
    students.results
  end
end 
```

# scala - 带有 TimeoutException 的 Akka 演员“询问”和“等待”

> ID：10095927
> 
> 赞同：6
> 
> 时间：2012-04-10T20:24:17.273
> 
> 标签：scala, actor, akka

我正在使用 Scala 和 Akka 建模一个简单的 P2P：

```
class Node() extends Peer with Actor {

  var peers: List[ActorRef] = List()

  def receive = {
    case _register(peer: ActorRef, p: Option[Int]) => {
      println("registering [" + peer + "] for [" + this + "]")
      peers = peer :: peers
    }
  }

}

sealed case class _register(val peer: ActorRef, var p: Option[Int] = None) 
```

然后是一个简单的网络：

```
class Network() extends Actor {

  def this(name: String) = {

    this()

    val system = ActorSystem(name)

    val s1 = system.actorOf(Props(new Node()), name = "s1")
    val s2 = system.actorOf(Props(new Node()), name = "s2")

    val c1 = system.actorOf(Props(new Node()), name = "c1")
    val c2 = system.actorOf(Props(new Node()), name = "c2")
    val c3 = system.actorOf(Props(new Node()), name = "c3")
    val c4 = system.actorOf(Props(new Node()), name = "c4")

    implicit val timeout = Timeout(5 second)

    s1 ? _register(c1)
    s1 ? _register(c2)
    s1 ? _register(c3)
    val lastRegistered = s2 ? _register(c4)
    Await.ready(lastRegistered, timeout.duration)

    println("initialized nodes")
  }
} 
```

我得到的输出*总是*这样的：

```
registering [Actor[akka://p2p/user/c1]] for [nl.cwi.crisp.examples.p2p.scala.Node@14b5f4a]
registering [Actor[akka://p2p/user/c2]] for [nl.cwi.crisp.examples.p2p.scala.Node@14b5f4a]
registering [Actor[akka://p2p/user/c3]] for [nl.cwi.crisp.examples.p2p.scala.Node@14b5f4a]
registering [Actor[akka://p2p/user/c4]] for [nl.cwi.crisp.examples.p2p.scala.Node@13c0b53]
[ERROR] [04/10/2012 22:07:04.34] [main-akka.actor.default-dispatcher-1] [akka://main/user/p2p] error while creating actor
java.util.concurrent.TimeoutException: Futures timed out after [5000] milliseconds
    at akka.dispatch.DefaultPromise.ready(Future.scala:834)
    at akka.dispatch.DefaultPromise.ready(Future.scala:811)
    at akka.dispatch.Await$.ready(Future.scala:64)
    at nl.cwi.crisp.examples.p2p.scala.Network.<init>(Node.scala:136)
    at nl.cwi.crisp.examples.p2p.scala.Main$$anonfun$11.apply(Node.scala:164)
    at nl.cwi.crisp.examples.p2p.scala.Main$$anonfun$11.apply(Node.scala:164)
    at akka.actor.ActorCell.newActor(ActorCell.scala:488)
    at akka.actor.ActorCell.create$1(ActorCell.scala:506)
    at akka.actor.ActorCell.systemInvoke(ActorCell.scala:591)
    at akka.dispatch.Mailbox.processAllSystemMessages(Mailbox.scala:191)
    at akka.dispatch.Mailbox.run(Mailbox.scala:160)
    at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:505)
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:997)
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1495)
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

我在 Akka 参考文档上遵循了[Futures的文档。](http://doc.akka.io/docs/akka/2.0/scala/futures.html#futures-scala)交换`Await.ready`没有`Await.result`任何效果。日志显示上次注册成功。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T20:38:43.110

您正在等待从 Node Actor 返回消息，但 Node Actor 没有向`sender`ActorRef 发送回消息，因此由创建的 Future[Any]`s1 ? _register`永远不会收到响应，因此 Future 永远不会完整。您可以`sender ! something`从 Node`receive`方法内部添加以发送响应，我不确定`something`在这种情况下有什么意义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T08:27:04.983

炖肉是对的，但你的网络演员中有一些令人担忧的代码：

```
val system = ActorSystem(name)

val s1 = system.actorOf(Props(new Node()), name = "s1")
val s2 = system.actorOf(Props(new Node()), name = "s2")

val c1 = system.actorOf(Props(new Node()), name = "c1")
val c2 = system.actorOf(Props(new Node()), name = "c2")
val c3 = system.actorOf(Props(new Node()), name = "c3")
val c4 = system.actorOf(Props(new Node()), name = "c4") 
```

为什么要创建一个新的 ActorSystem，为什么要在该 Actor 系统中创建顶级 Actor？

如果您需要访问演员的系统，您可以简单地调用：

```
context.system 
```

并且您应该避免“仅仅因为”创建顶级参与者，原因与您不应该通过将所有文件放在那里而使文件系统的根目录混乱的原因相同。要为 Network 创建子角色，只需执行以下操作：

```
context.actorOf(...) 
```

现在，一旦您在同一系统中创建多个网络参与者，您就会遇到问题，因为它会尝试创建同名的顶级参与者。

# xpages - 处理 xpages 扩展对话框的最佳实践？

> ID：10095930
> 
> 赞同：0
> 
> 时间：2012-04-10T20:24:23.553
> 
> 标签：xpages

我有一个放在自定义控件中的扩展页面对话框。该对话框用于搜索成本中心并返回市场、成本中心编号、成本中心名称等信息。

按下“选择”按钮并出现对话框。用户搜索并选择他们的成本中心。按下 OK 按钮并关闭对话框并更新 xPage 上的各个字段。

几个问题。

1.  目前CC上的“选择”按钮需要知道并引用CC内的对话框控件的名称。在我看来，这不是最佳做法。我的最终用户程序员需要知道 CC 中该对话框控件的 ID。我的“选择”按钮有什么办法可以“显示”CC，而CC实际上会显示对话框控件吗？

2.  My CC 使用自定义属性来存储来自所选成本中心的各种文档字段。然后，OK 按钮使用这些属性来设置 xPage 上的各个字段。这似乎又不是最佳实践。如果我想在另一个应用程序中使用该 CC，那么我可能需要在 OK 按钮中编辑代码。有没有更好的方法来处理这个问题？就像我可以在我的 xPage 上放置 CC 时设置它的属性一样，有没有一种方法可以告诉它在按下 OK 按钮时我想要执行的代码？

我认为的一件事是为需要通过 OK 按钮更新的字段设置属性，但这似乎并不那么灵活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:52:41.017

对于需要知道 id 的问题，不确定是否有错字，但我不明白为什么 cc 中的选择按钮不需要对话框的 id 才能打开它？你的意思是选择在抄送之外？无论哪种方式，您是否尝试过诸如在自定义控件上创建属性之类的方法，以便从外部您可以设置一些东西

```
<xc:mycustomControl showDialog="false"> 
```

然后当外部发生某些事情时更改 showDialog 并刷新 cc，然后在 cc 内部，您可以在页面加载之前/之后确定 showDialog 为真/假时会发生什么。

对于您的第二个问题，在我看来这应该是使用多米诺文档结构。我要做的是在页面上有一个 domino doc 数据源，而不是对话框拉出每一块并更新 ok 按钮。当通过对话框选择某些内容时，我将更新此源指向的文档，并将所有字段绑定到它们需要的任何字段。这样，在选择某些内容后，字段将更新为文档包含的内容，并且只要 domino 文档具有相同的字段名称，它将更加可重用

# css - 制作一个 div 开始中间页面，但是当用户向下滚动页面时，它仍然在顶部？

> ID：10095936
> 
> 赞同：1
> 
> 时间：2012-04-10T20:24:45.627
> 
> 标签：css, html, fixed

最好举个例子来说明我所描述的。

带有类别列表的 div 元素从页面中间开始，但是当用户向下滚动时，它仍然在顶部？

[http://www.khanacademy.org/](http://www.khanacademy.org/)

我知道如何制作固定元素。我的问题是如何让元素默认出现在页面的中心，但是当用户向下滚动时，元素将保持在顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:31:12.330

这是我认为您正在寻找的快速**[jsFiddle 示例。](http://jsfiddle.net/YYzVq/embedded/result/)**基本上，您有一个最初相对定位的 div，然后随着页面滚动，位置更改为固定。jQuery 在这里使用 $(window).scroll 事件来进行繁重的照明。

jQuery：

```
var stickerTop = parseInt($('#sticker').offset().top);
$(window).scroll(function() {
    $("#sticker").css((parseInt($(window).scrollTop()) + parseInt($("#sticker").css('margin-top')) > stickerTop) ? {
        position: 'fixed',
        top: '0px'
    } : {
        position: 'relative'
    });
});​ 
```

CSS：

```
body {
    width: 960px;
}
#mainbar {
    width: 660px;
    float: left;
}
#sidebar {
    width: 270px;
    float: right;
}
#sticker {
    width: 200px;
    padding: 10px;
    margin-top:25px;
    background: #eee;
    border: 1px solid #ccc;
}​ 
```

# actionscript-3 - 如何从 actionscript 进行 SQL 查询？

> ID：10095942
> 
> 赞同：1
> 
> 时间：2012-04-10T20:25:16.513
> 
> 标签：actionscript-3, flash

如何从 actionscript 进行 SQL 查询？并渲染所有结果

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T20:42:34.727

您必须调用服务器端脚本（例如 php），然后检索该脚本的输出

```
private var _loader:URLLoader;
private var _request:URLRequest;

private function loadData():void {
    _loader = new URLLoader();
    _request = new URLRequest("path/to/your/phpscript");
    _request.method = URLRequestMethod.POST;
    _loader.addEventListener(Event.COMPLETE, onLoadData);
    _loader.addEventListener(IOErrorEvent.IO_ERROR, onDataFailedToLoad);
    _loader.addEventListener(IOErrorEvent.NETWORK_ERROR, onDataFailedToLoad);
    _loader.addEventListener(IOErrorEvent.VERIFY_ERROR, onDataFailedToLoad);
    _loader.addEventListener(IOErrorEvent.DISK_ERROR, onDataFailedToLoad);
    _loader.load(_request);
}
private function onLoadData(e:Event):void {
    trace("onLoadData",e.target.data);
}
private function onDataFailedToLoad(e:IOErrorEvent):void {
    trace("onDataFailedToLoad:",e.text);
} 
```

一个示例 php 脚本：

```
<?php

    // defining main variables
    $dbHost = "localhost";
    $dbUser = "root";
    $dbPass = "";
    $dbName = "test";
    $dbTable = "data";

    // connecting and selecting database
    @mysql_connect($dbHost, $dbUser, $dbPass) or die(mysql_error());
    @mysql_select_db($dbName) or die(mysql_error());

    // getting data
    $data = "";
    $res = mysql_query("SELECT * FROM ".$dbTable." ORDER BY id") or die(mysql_error());
    while($row = mysql_fetch_object($res)) {
        $data .= "nname=".$row->name.", ";
        $data .= "city=".$row->city;
    }
    echo $data;

?> 
```

为了更好的工作流程，我建议研究 AMF ...

[这是关于 AMF 的教程](http://www.flash-db.com/Tutorials/helloAS3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:42:00.753

据我所知，在 Flex 中工作并没有真正等同于 JDBC 或 ODBC 的东西。由于 Flex/Flash 通常是客户端，而数据库通常是服务器端（共享），因此很可能并没有真正将其作为尝试交付的东西进行探索。一般来说，您会使用 Java、PHP、C#、ASP .NET、Python、C++ 或其他一些服务器端程序来建立与数据库的连接并运行查询。我所看到的与您的问题最接近的是： http: [//help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html)但仅适用于 AIR，不适用于远程 SQL 连接。我不完全确定编写一个类似 JDBC 的接口/实现来连接到任何给定的数据库需要做多少工作，我想这部分取决于 DBMS 的文档记录……无论哪种方式，我的猜测都是做大量的工作。

**编辑**

好吧，实际上在某种程度上吃了我的话，显然这有点可行：[http ://groups.google.com/group/flex_india/browse_thread/thread/d89bb5120fad7369?pli=1](http://groups.google.com/group/flex_india/browse_thread/thread/d89bb5120fad7369?pli=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T00:58:50.513

您 - 真的 - 不想从 Flex 执行 SQL 查询连接，尤其是在应用程序分发给用户的情况下。Flash/Flex 应用程序可以很容易地反编译成可读的源代码，如果你的 SQL 连接字符串在源代码中，你就会遇到各种安全问题。让 Flex 对 PHP、Python、Perl 或 Node 等服务器端语言使用 Restful Web API 来为您进行 SQL 数据处理是一个更好的主意。

即使您的应用程序是内部的，它仍然是一个更好的“纸上”概念，以防止 Flex 直接操作数据库。

# ios - 允许选择多个联系人的“告诉朋友”示例

> ID：10095948
> 
> 赞同：0
> 
> 时间：2012-04-10T20:25:43.990
> 
> 标签：ios

我想在我的应用程序中添加一个“告诉朋友”选项，允许用户选择多个联系人向他们发送电子邮件。联系人需要过滤到只有电子邮件地址的人。

有没有人知道我可以重复使用的现成示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:09:55.907

我最近搜索了同样的问题，发现了 iTellAfriend。这个对我有用。

[从github/iTellafriend](https://github.com/aporat/iTellAFriend)下载此源代码 。打开 zip 文件并在 src 文件中将 iTellAFriend.h 和 iTellAFriend.m 拖到您的项目中。选中“将项目复制到目标组文件夹（如果需要）”和“为任何添加的文件夹创建组文件夹”

在你的 appdelegate.m 添加`#import "iTellAFriend.h"`

将以下内容添加到您的 appdelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
      //[iTellAFriend sharedInstance].appStoreID = yourAppId;
        [iTellAFriend sharedInstance].appStoreID = 408981381; //example

        return YES;
} 
```

添加`#import "iTellAFriend.h"`到您的呼叫以下方法`ViewController.m`中的任何位置`ViewController.m`（最好在按钮中）

```
if ([[iTellAFriend sharedInstance] canTellAFriend]) {
            UINavigationController* tellAFriendController = [[iTellAFriend sharedInstance] tellAFriendController];
            [self presentModalViewController:tellAFriendController animated:YES];
        } 
```

在 iTellAFriend.m 中修改以下

```
- (UINavigationController *)tellAFriendController
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
  picker.mailComposeDelegate = self;

  [picker setSubject:self.messageTitle];
  [picker setMessageBody:[self messageBody] isHTML:YES];

  return picker;
} 
```

至

```
- (UINavigationController *)tellAFriendController
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
  picker.mailComposeDelegate = self;

    NSArray *toRecipients = [NSArray arrayWithObjects:@"xxxx@xxxx.com", @"xxxxx@xxxx.com", nil];
    [picker setToRecipients:toRecipients];

  [picker setSubject:self.messageTitle];
  [picker setMessageBody:[self messageBody] isHTML:YES];

  return picker;
} 
```

当您单击按钮时，将出现以下场景，它不会在模拟器上发送电子邮件，而是在设备上发送 ![在此处输入图像描述](../Images/ba8b4ed7b1dee3091673a1ea33600d8b.png)

# udp - 返回 N 协议

> ID：10095950
> 
> 赞同：1
> 
> 时间：2012-04-10T20:25:53.203
> 
> 标签：udp, protocols, packet, go-back-n

我正在尝试在两个单独的客户端和服务器应用程序上实现 Go back N 协议。假设我的序列号必须适合 3 位，因此 2^3 = 8 个最大数字，并且 2^3 - 1 = 7 窗口大小。

我最初发送我的整个窗口。前两个数据包（0 和 1）被正确接收。数据包 2 被丢弃。当 Receiver 收到数据包 3 到 6 时，它期待 2，因此它必须对收到的数据包表示它想要 2。

```
Sender     Receiver
  0           0
  1           1
  2    (packet dropped)
  3         nack2
  4         nack2
  5         nack2
  6         nack2 
```

当 Sender 收到第一个 nack2 时，它知道已经收到 0 和 1（通过捎带）并向前移动它的窗口，但它还必须从序列号 2 开始重新发送它的窗口（所以 2-3-4-5-6 - 并且可能是 7-0）。当 Sender 收到第二个 nack2 时，它已经发送了这些数据包。由于协议的原因，发送者将再次重新发送他的整个窗口，包括 2。现在接收者可能会收到 2（和其他），但在第二个 nack2 批次中，它将重新接收 2，这是乱序的，将必须 nack 其预期的数据包，依此类推。我在所有这些假设中都是正确的吗？

如果是这样，在我看来，Go Back N 发送的数据包比 Stop and Wait 多得多，尤其是您增加其窗口大小的次数越多。我没有得到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:41:57.457

我发现这个问题的解决方案是简单地使用更多位来表示序列号，因此具有更大的 MAX。如果您的 MAX 是 2 * Window size，则延迟的 2 不能被误解为正确的 ACK。

# android - Android 文本被包裹在按钮中 - 为什么？

> ID：10095954
> 
> 赞同：0
> 
> 时间：2012-04-10T20:26:08.543
> 
> 标签：android, layout

我有以下 XML：

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/verylongtext" android:layout_weight="1000" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="sometext" android:onClick="onClickButton" android:layout_weight="1" />

</LinearLayout> 
```

虽然我设置了 layout_weight 按钮上的文本仍然有换行符，但按钮应该显示

一些文本

但它显示

某事

分机

为什么会这样，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:33:05.503

包含`android:singleLine="true"`到**按钮**xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:37:33.527

您没有指定 的方向`LinearLayout`，因此它默认为水平。正在`TextView`挤压. `Button`另外，当你使用 时`android:layout_weight`，你往往不想将布局中的对象约束在相关维度中，所以你可以用“ `0px`”代替“ `wrap_content`”或“ `match_parent`”，让权重决定各自的比例大小。

# d3.js - 基于功能的子选择

> ID：10095955
> 
> 赞同：1
> 
> 时间：2012-04-10T20:26:12.557
> 
> 标签：d3.js

我有一些元素，我试图根据特定的样式值过滤掉它们（我只想要不透明度 = 1 的元素）。我正在查看[selection.filter](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)以及[selection.select](https://github.com/mbostock/d3/wiki/Selections#wiki-select)和[selection.selectAll](https://github.com/mbostock/d3/wiki/Selections#wiki-selectAll)的文档，但我对函数参数的正确用法感到困惑。

“select”表示它选择了第一个匹配元素（如预期的那样），但是过滤器文档中的示例显示它与一个函数一起使用，以在保持索引的同时选择“奇数”元素。

“selectAll”表示您可以返回一个元素数组，但函数参数以通常的方式为原始选择中的每个元素一个接一个地调用。我很难想象这个用例。

我想我想知道是否有任何教程或示例讨论这些函数的正确用法？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T21:09:26.827

如果要将选择减少到选定元素的子集，请使用**filter**。如果要选择后代元素，请使用**select**或**selectAll**。

大多数情况下，过滤器用于根据数据或索引过滤元素。`this`但是，您可以像在过滤器函数中一样访问选定的元素。因此，如果您选择了一些元素，并且您想将该选择减少到仅那些不透明度为 1 的元素，您可以说：

```
var opaque = selection.filter(function() {
  return this.style.opacity == 1;
}); 
```

为了安全起见，您可能更喜欢查看[计算的样式](https://developer.mozilla.org/en/DOM/window.getComputedStyle)而不是元素的样式属性。这样，如果不透明度是从样式表继承的，您将获得正确的值；否则，当样式被继承`this.style.opacity`时将是空字符串。

```
var opaque = selection.filter(function() {
  return window.getComputedStyle(this, null).getPropertyValue("opacity") == 1;
}); 
```

或者等效地，选择节点并使用[selection.style](https://github.com/mbostock/d3/wiki/Selections#wiki-style)：

```
var opaque = selection.filter(function() {
  return d3.select(this).style("opacity") == 1;
}); 
```

如果您按数据或按类而不是按计算的样式属性进行过滤，您可能会发现它更容易。例如，如果您在节点上设置了一个类，则可以改为按类过滤选择：

```
var opaque = selection.filter(".opaque"); 
```

# r - parSapply 在全局环境中找不到对象

> ID：10095956
> 
> 赞同：25
> 
> 时间：2012-04-10T20:26:13.123
> 
> 标签：r, parallel-processing

我正在尝试在多个内核上运行代码（我尝试了`snow`和`parallel`包）。我有

```
cl <- makeCluster(2)
y  <- 1:10
sapply(1:5, function(x) x + y)  # Works
parSapply(cl, 1:5, function(x) x + y) 
```

最后一行返回错误：

```
Error in checkForRemoteErrors(val) : 
  2 nodes produced errors; first error: object 'y' not found 
```

显然在全球环境中`parSapply`找不到。`y`有什么办法可以解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T20:39:10.240

The nodes don't know about the `y` in the global environment on the master. You need to tell them somehow.

```
library(parallel)
cl <- makeCluster(2)
y  <- 1:10
# add y to function definition and parSapply call
parSapply(cl, 1:5, function(x,y) x + y, y)
# export y to the global environment of each node
# then call your original code
clusterExport(cl, "y")
parSapply(cl, 1:5, function(x) x + y) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T03:16:40.270

值得一提的是，如果`parSapply`从函数中调用您的示例将起作用，尽管真正的问题是函数`function(x) x + y`的创建位置。例如，以下代码可以正常工作：

```
library(parallel)
fun <- function(cl, y) {
  parSapply(cl, 1:5, function(x) x + y)
}
cl <- makeCluster(2)
fun(cl, 1:10)
stopCluster(cl) 
```

这是因为在其他函数中创建的函数会与创建它们的本地环境一起序列化，而从全局环境创建的函数不会与全局环境一起序列化。这有时很有用，但如果您不知道这个问题，它也可能导致各种问题。

# java - 是否可以从 Spring 中的脚本调用控制器方法

> ID：10095959
> 
> 赞同：0
> 
> 时间：2012-04-10T20:26:18.817
> 
> 标签：java, spring, jsp, spring-mvc, scriptlet

我需要实现对控制器中的方法的调用。但我想从 scriptlet 调用这个方法，但我不知道该怎么做。我正在尝试将从服务器获取的数据导出到 CSV。

这是我到目前为止的脚本：

```
<%  
String csvDataIn = request.getParameter("exportCSVParam");
String csvFileName = request.getParameter("exportCSVFileName");
if (csvFileName == null || csvFileName == "") csvFileName = "export.csv";

String strHeader = "attachment; filename=" + csvFileName;
String contentType = "application/octet-stream";
response.setContentType(contentType);
response.addHeader("content-disposition",strHeader);

ServletOutputStream ostr = response.getOutputStream();    
String data=csvDataIn;//DATA GOES HERE;
ostr.write(data.getBytes("ISO-8859-1"));
ostr.flush();
ostr.close();
%> 
```

假设我想调用`getDataAsCsv()`我在控制器中的一个方法，该方法返回一个字符串，其中包含我想在该文件中打印的 CSV 数据。第 1 行和第 2 行 ( `csvDataIn`, `csvFileName`) 应该被删除，因为我不打算向这个 jsp 发送参数。你是怎样做的？。如何将控制器 bean 与这个 scriptlet 绑定。

我是春天的新手，我还在学习这个。可能解决方案非常简单，但我坚持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:28:06.907

你不能，因为你不应该。所有这些代码都应该放在控制器中。

（从技术上讲，您可以拥有一个 JSTL 函数并调用它，或者简单地调用一个静态方法，甚至使用 获取控制器`WebApplicationContextUtils.getRequiredWebApplicationContext(..).getBean(..)`，但所有这些都会很丑陋）

# drupal-7 - 如何管理分类页面中的节点数？

> ID：10095960
> 
> 赞同：3
> 
> 时间：2012-04-10T20:26:21.963
> 
> 标签：drupal-7, drupal-taxonomy

我正在使用 Drupal7 和[Joomlart的 JD Fashion 主题开发网站](http://www.joomlart.com/)

我在分类中创建了一个词汇表和术语。我使用这个术语进行菜单导航，并为每个菜单项添加了一些故事（节点）。

在后期设置中，我使用管理员/内容管理/后期设置将主页中的节点数保留为 3。

但它只适用于主页，不适用于内页。

我想将节点数限制为 3。

1.  我怎样才能做到这一点？
2.  他们是否有任何用于分页的模块或扩展来控制每页的文章数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:49:34.743

您可以在视图 UI 中打开**分类术语**视图，以更好地控制分类页面。此视图由分类模块自动生成，但默认禁用。

打开后，您可以在页面设置区域中将寻呼机设置为**显示指定数量的项目**，并将每页的项目数设置为所需的数量。

这将限制分类页面中显​​示的节点数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:14:09.247

您可以在没有视图的情况下执行此操作。分类页面中显​​示的节点数由`default_nodes_main`变量确定，该变量还控制主页中的节点数和博客文章的数量。

您可以在**admin/config/system/site-information** > front page > 在首页的节点数进行调整。

所以，要小心副作用。我在所有 D7 代码中进行了搜索，我发现它`default_nodes_main`出现在

*   blog.pages.inc:26
*   blog.pages.inc:66，**限制post数量**
*   node.module:2601，**限制粘性节点数**（首页）
*   taxonomy_pages.inc:55，**限制分类页面中的节点数**

知道后果，您可以使用该设置。

# php - WAMP 不显示嵌入的 .swf 文件

> ID：10095962
> 
> 赞同：0
> 
> 时间：2012-04-10T20:26:34.177
> 
> 标签：php, flash, wamp

下午好，

当我将 .swf 移动到特定文件夹时，可以说“c:/wamp/www/test/index.html”。我可以通过打开它附带的 .html 文件来测试它。它完美地播放了电影。

这也恰好在我的 wamp 文件夹中。我启动 wamp 并尝试使用 wamp 加载文件：

"http://127.0.0.1/test/index.html

网页加载，但我的电影没有开始。我可以在 flash 对象的底部看到控制栏，但它看起来像是在加载文件或其他东西时卡住了。出了点问题。

我继续检查我的 apache 错误日志文件：

```
[Thu Apr 12 00:17:42 2012] [notice] Apache/2.2.21 (Win64) PHP/5.3.8 configured -- resuming normal operations
[Thu Apr 12 00:17:42 2012] [notice] Server built: Sep 24 2011 19:57:51
[Thu Apr 12 00:17:42 2012] [notice] Parent: Created child process 5000
[Thu Apr 12 00:17:42 2012] [notice] Child 5000: Child process is running
[Thu Apr 12 00:17:42 2012] [notice] Child 5000: Acquired the start mutex.
[Thu Apr 12 00:17:42 2012] [notice] Child 5000: Starting 64 worker threads.
[Thu Apr 12 00:17:42 2012] [notice] Child 5000: Starting thread to listen on port 80.
[Thu Apr 12 00:17:42 2012] [notice] Child 5000: Starting thread to listen on port 80. 
```

我还检查了我的快速访问日志文件：

```
127.0.0.1 - - [12/Apr/2012:00:17:49 +0400] "GET /OktomberiSchool/ HTTP/1.1" 200 10878
127.0.0.1 - - [12/Apr/2012:00:17:49 +0400] "GET /OktomberiSchool/images/master_images/table_1_top_left_home.jpg HTTP/1.1" 304 -
127.0.0.1 - - [12/Apr/2012:00:17:51 +0400] "GET /OktomberiSchool/webpages/vidoes/vidoes.php HTTP/1.1" 200 10062
127.0.0.1 - - [12/Apr/2012:00:17:51 +0400] "GET /OktomberiSchool/webpages/vidoes/video_01.swf HTTP/1.1" 304 - 
```

我无法发现错误。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:27:47.043

我使用 adobe Flash 打开了 .fla 并看到了这个错误：

“视频播放器处于连接错误状态。当视频流尝试加载但不成功时，它会进入此状态。错误可能有两个原因：未连接到服务器或找不到流。”

然后让我震惊的是它没有找到视频。所以我把视频移到了同一个文件夹中，再次生成了 .swf 文件，Bob 就是你的叔叔。（有效。）

再一次，我希望这个解决方案对某人有所帮助。

# c# - 是否可能对继承层次结构中的类的泛型成员施加类型约束？

> ID：10095963
> 
> 赞同：0
> 
> 时间：2012-04-10T20:26:37.687
> 
> 标签：c#, generics, inheritance, polymorphism

我正在用 C# 编写一个应用程序，并且正在努力解决它的泛型实现。我有一个继承层次结构，它由另一个继承层次结构（模型和视图模型）镜像，如下所示：

```
class A_Content { }

class B_Content : A_Content
{
    public string Bar;
}

class C_Content : A_Content
{
    public string Foo;
}

class A { public A_Content content; }
class B : A { }
class C : A { }

public class Test
{
    IList<A> A_Collection = new List<A>();

    public Test()
    {
        B b = new B();
        C c = new C();

        b.content = new B_Content();
        c.content = new C_Content();

        A_Collection.Add(b);
        A_Collection.Add(c);
    }
} 
```

这工作得很好，但不会对 强制执行任何类型约束`content`，这让我每次想使用它时都将它转换为正确的派生类。我想诱使编译器强制执行 B 对象只有`B_Content`内容的约束。我的第一个切入点是：

```
class A_Content { }

class B_Content : A_Content
{
    public string Bar;
}

class C_Content : A_Content
{
    public string Foo;
}

class A { }
class B : A { B_Content content; }
class C : A { C_Content content; }

public class Test
{
    IList<A> A_Collection = new List<A>();

    public Test()
    {
        B b = new B();
        C c = new C();

        A_Collection.Add(b);
        A_Collection.Add(c);
    }
} 
```

`content`这很好用，但意味着当我只有一个 s 的集合时，我无法访问公共元素`A`。我真正想做的是：

```
abstract class A_Content { }

class B_Content : A_Content
{
    public string Bar;
}

class C_Content : A_Content
{
    public string Foo;
}

abstract class A<T> { T content; }
class B : A<B_Content> { }
class C : A<C_Content> { }

public class Test {
    IList<A<A_Content>> A_Collection = new List<A<A_Content>>();

    public Test()
    {
        B b = new B();
        C c = new C();

        A_Collection.Add(b);
        A_Collection.Add(c);
    }
} 
```

但是，这会产生一个错误，抱怨 B 不能隐式转换为 A。我尝试添加显式强制转换无济于事。有什么方法可以比第二个模型更优雅地表达我正在寻找的约束吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:37:04.107

目前还不完全清楚你在追求什么。你是否试图让它的每个实例`A`都有一个`Content`类型为 的属性，`A_Content`每个实例都有一个为`B`a 的`Content`属性，`B_Content`等等？如果是这样，你不能那样做*并且*有`B`/ `C`/等。继承自`A`。（无论如何，不​​是以无臭的方式）。的签名`A`表示该`Content`属性应该能够获取（并且可能设置）任何有效的`A_Content`. 您不能更改函数的返回类型或派生类中的属性或字段的类型。你*可以*使用泛型基本上将属性的类型一直推迟到类的使用，但这种语法会很丑陋，我不确定它会给你带来什么。

例如，您可以这样做：

```
public class A<TContent> where TContent : A_Content
{
    public TContent Content { get; set; }
} 

public class B<TContent> : A<TContent> where TContent : B_Content
{
   // nothing here, as the property is already defined above in A
}

public class C<TContent> : A<TContent> where TContent : C_Content
{
   // nothing here, as the property is already defined above in A
} 
```

但这意味着两件事：

*   在您使用`A`,的任何地方`B`，或者`C`您必须指定`TContent`(so `A_Content`,`B_Content`等) 的实际类型。这是一种痛苦
*   绝对没有什么能阻止你做类似的事情`A<B_Content>`（事实上，在这种情况下，本质上就是`B`这样，因为我们没有在类中添加任何内容）。

简而言之，我认为您需要退后一步并提出新的设计。

**顺便一提**

您的第二个示例没有运行（使用`List`）的原因是因为您已经告诉列表它需要包含`A<A_Content>`. 既然`B<B_Content>`不满足，那就行不通了。这是一个典型的方差问题，它让*很多*人感到困惑。但请考虑这种情况（此代码**不会编译**；它旨在说明根本原因）：

```
List<A<A_Content>> list = new List<A<A_Content>>();

list.Add(new B()); // this seems OK so far, right? 

A<A_Content> foo = list[0];

foo.content = new A_Content(): 
```

这显然会中断，因为`foo` *实际上*是 a `B<B_Content>`，所以运行时不会让您设置`content`为等于A_Content`的实例`B_Content`（或从它继承的东西）或从它继承的任何东西。`, but the signature of the class means you should be able to assign anything that's`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:41:41.857

您可以为此使用接口，以及接口成员的显式实现：

```
abstract class A_Content {}
class B_Content : A_Content {}
class C_Content : A_Content {}

interface IA
{
    A_Content content { get; }
}

abstract class A<T> : IA
    where T : A_Content
{
    T content;
    A_Content.content { get { return this.content; } }
}

class B : A<B_Content> {}
class C : A<C_Content> {} 
```

然后你可以制作一个`List<IA>`来保存`B`和`C`对象的同质集合。

事实上，使用 C# 4 及更高版本，您可以使接口成为通用和协变的；那么您可以隐式实现接口（只要您使用属性而不是字段）：

```
interface IA<out T>
{
    T content { get; }
}

abstract class A<T> : IA<T>
    where T : A_Content
{
    T content { get; set; }
}

class B : A<B_Content> {}
class C : A<C_Content> {} 
```

现在，`B`仍然不能转换为`A<A_Content>`，但*可以*转换为`IA<A_Content>`，因此您可以使用 a`List<IA<A_Content>>`来保存对象的同质集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:42:32.110

好吧，编译器会产生错误，因为确实`B`无法转换为`A<A_Content>`. 这是因为`A<A_Content>`不是**的**超类`B`。类的父类`B`是`A<B_Content>`.

恐怕你需要坚持铸造。这里需要它，因为您有`A`s 列表。如果您真的想避免强制转换（我不确定您为什么要这样做），您可以尝试使用动态调度。

您可以尝试创建一个`List<dynamic>`而不是`List<A>`. 不过，您至少需要 C# 4.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:43:23.843

希望我理解你的意图，所以

有这样的收藏

`IList<A>`意味着您希望拥有`A`具有不同*实现*场景的对象集合。

如果是基类型的属性，则该属性。这意味着基类型必须*公开*方法/属性 => 因此子类必须进行*具体*实现的状态和行为原语。

像这样的东西：

```
class A_Content {  public virtual string Bar {get;set;} }

class B_Content : A_Content
{
    public override string Bar {get;set;};
}

class C_Content : A_Content
{
    public override string Bar {get;set};
} 
```

在代码中的某处：

```
public Test()
{
      B b = new B();
      C c = new C();

      A_Collection.Add(b);
      A_Collection.Add(c);

      //so
      A_Collection[0].Bar // B::Bar 
      A_Collection[1].Bar //C::Bar 

} 
```

而且你不需要投射到真实的物体上。简单的 OOP 方法。

# compiler-construction - 英特尔 fortran 编译器在三重精度上崩溃

> ID：10095967
> 
> 赞同：4
> 
> 时间：2012-04-10T20:26:46.610
> 
> 标签：compiler-construction, fortran, precision

我试图编译一个具有三重精度的 f90 文件（我知道这并不常见，但无论如何......）。几分钟后，它说：

```
ifort: error #10106: Fatal error in /opt/intel/Compiler/11.1/072/bin/intel64/fortcom, terminated by kill signal
compilation aborted for foo.f90 (code 1) 
```

我的编译命令只是：

```
ifort -r16 foo.f90 
```

但是，当我使用双精度时，一切都很好，通过`-r16`将`-r8`.

你能告诉我这可能的原因是什么吗？我检查了我的代码，我想没有问题。当然，如果你需要我可以给你看。

我的编译器版本是*Version 11.1 Build 20100414*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:45:43.337

我认为 r16 是四倍精度，至少在常用的情况下，因为 4 个字节被认为是单精度。

由于有一个编译器选项可以启用 16 字节实数，我怀疑它被彻底破坏了。

我建议逐个编译以找出问题所在。快速测试（计算 2 的根）应该会告诉您编译器是否基本上可以处理 16 字节实数。

您是否在代码中使用指针、公共块、模块或外部库？

# ruby-on-rails - 密码摘要方法在本地主机上起作用但在 Heroku 上不起作用？（Hartl RubyOnRails 教程第 7 章）

> ID：10095969
> 
> 赞同：3
> 
> 时间：2012-04-10T20:26:54.677
> 
> 标签：ruby-on-rails, heroku, railstutorial.org

我一直在学习 Hartl 出色的 RoR (3.2) 教程（并始终部署到 Heroku），并且对为什么 Heroku 版本不再反映本地托管应用程序的行为感到困惑。

我在第 7.4.4 节的末尾：[http: //ruby.railstutorial.org/chapters/sign-up?version=3.2#top](http://ruby.railstutorial.org/chapters/sign-up?version=3.2#top)

我的本地托管应用程序通过了所有测试，并且能够在用户/电子邮件/密码输入不正确或不符合规范时创建新用户并提供适当的错误消息。在应用程序的 Heroku 部署中，我既没有成功创建用户，也没有更正错误页面，因为该版本中的密码摘要功能似乎有问题。我被带到一个通用的 Heroku “我们很抱歉，但出了点问题”页面。

“heroku logs”命令给了我：

`Started POST "/users" for 97.81.107.108 at 2012-04-10 19:41:17 +0000 2012-04-10T19:41:17+00:00 app[web.1]: Processing by UsersController#create as HTML 2012-04-10T19:41:17+00:00 app[web.1]: Parameters: {"utf8"=>"✓", "authenticity_token"=>"0jnDCpFnVq9fd/v1lgLNB7g0wHuXGi5bocTD3SINRzc=", "user"=>{"name"=>"helloq", "email"=>"this@this.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create my account"} 2012-04-10T19:41:17+00:00 app[web.1]: 2012-04-10T19:41:17+00:00 app[web.1]: app/controllers/users_controller.rb:12:in`创建' 2012-04-10T19:41:17+00:00 app[web.1]: 2012-04-10T19:41:17+00:00 app[web.1]: NoMethodError (undefined method `password_digest=' for #<User:0x0000000229e9e0>): 2012-04-10T19:41:17+00:00 app[web.1]: 2012-04-10T19:41:17+00:00 heroku[router]: POST simple-sword-1851.herokuapp.com/users dyno=web.1 queue=0 wait=0ms service=128ms status=500 bytes=643 2012-04-10T19:41:17+00:00 app[web.1]: Completed 500 Internal Server Error in 104ms 2012-04-10T19:41:17+00:00 app[web.1]: app/controllers/users_controller.rb:12:in`new'

当 password_digest 方法在本地部署中正常运行时，为什么我会收到 NoMethodError？我用 git 检查了我的本地版本和远程 heroku 版本是否相同，并且我确保迁移数据库并重新启动应用程序。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:11:30.107

我也在完成本教程，并且即将完成。我想跟进 Matthias 的评论。看第 7 章，他还没有告诉你如何在 Heroku 上重置数据库。如果您想完全清除数据库并重新运行迁移，请执行以下操作：

```
heroku pg:reset SHARED_DATABASE --confirm simple-sword-1851
heroku run rake db:migrate 
```

当我在迁移中搞砸了一些事情时，我偶尔会遇到一些问题。

# sql-server - SQL Server 缓冲区缓存内容

> ID：10095974
> 
> 赞同：2
> 
> 时间：2012-04-10T20:27:31.303
> 
> 标签：sql-server, performance

我的实例页面预期寿命会下降到几秒钟。
我知道这是由于代码错误，我试图找出缓冲区缓存中的对象页面。这将导致我找到导致问题的原因。Oracle 中的 v$bh 等价物。

**编辑**

我遇到了[这篇很棒的文章](http://www.sqlskills.com/BLOGS/PAUL/post/Performance-issues-from-wasted-buffer-pool-memory.aspx)，它讨论了我遇到的 pagelife 预期问题。以及如何找到缓冲区内容。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:41:19.747

此链接应为您提供用于此的查询：[http ://www.mssqltips.com/sqlservertip/2393/determine-sql-server-memory-use-by-database-and-object/](http://www.mssqltips.com/sqlservertip/2393/determine-sql-server-memory-use-by-database-and-object/)

注意：您没有说您使用的是哪个版本的 SQL Server，但这仅适用于 2005 及更高版本的机器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:02:40.303

[`sys.dm_os_buffer_descriptors`](http://msdn.microsoft.com/en-us/library/ms173442%28v=sql.105%29.aspx)有关于缓冲池内容的数据。您还将对[`sys.dm_db_index_usage_stats`](http://msdn.microsoft.com/en-us/library/ms188755%28v=sql.105%29.aspx)和感兴趣[`sys.dm_db_index_operational_stats`](http://msdn.microsoft.com/en-us/library/ms174281%28v=sql.105%29.aspx)。在这些之间，您将能够识别热物体。[`sys.dm_exec_query_stats`](http://msdn.microsoft.com/en-us/library/ms189741.aspx)将向您显示涉及大量页面的查询（高logical_reads）。

# linq-to-sql - SQL 到 Linq 到 SQL 的转换

> ID：10095975
> 
> 赞同：-1
> 
> 时间：2012-04-10T20:27:32.743
> 
> 标签：linq-to-sql

![数据库](../Images/171c5d550cb62dd9aea2a7b7222c7b15.png)

任何人都可以帮助我将以下 SQL 查询转换为 LinqToSql 语法。它涉及我的表中的多个表。我不确定我是否使用了正确的查询类型。任何帮助将不胜感激。

```
public IQueryable<tblCourseNeededHours>(int departmentId, string semester)
{
    return from = 
        "SELECT tblCourseNeededHours.Semester, tblCourseNeededHours.NeededHoursPerWeek, 
                tblCourseNeededHours.AssignToInstituteAdministrator, 
                tblCourseNeededHours.Freezed, tblCourse.CourseName, 
                tblInstitute.InstituteName, tblDepartment.DepartmentName
         FROM tblCourseNeededHours 
             INNER JOIN tblCourse ON 
                 tblCourseNeededHours.CourseID = tblCourse.CourseID 
             INNER JOIN tblInstitute ON 
                 tblCourse.InstituteID = tblInstitute.InstituteID 
             INNER JOIN tblDepartment ON 
                 tblInstitute.DepartmentID = tblDepartment.DepartmentID";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:38:26.550

Well, if you have proper foreign keys in your database you can just do

```
Var x = from nh in db.tblCourseNeededHours
        select nh.Semester, nh.xxxx, nh.tblCourse.CourseName, 
        nh.tbCourse.tblInstitute.CourseName 
```

and so forth.

No need to do any of the inner joins yourself. That is the beauty of Linq2Sql.

# c# - 为什么 DataGridView.AutoGenerateColumns 应用了 Browsable(false) 属性？

> ID：10095977
> 
> 赞同：1
> 
> 时间：2012-04-10T20:27:35.213
> 
> 标签：c#, winforms, datagridview

我只是好奇为什么 Windows DataGridView 控件对设计器隐藏其 AutoGenerateColumns 属性？

这个问题实在想不出好答案。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:41:41.500

看起来它是隐藏的，因为它是由辅助类控制的。根据[这个问题的公认答案，](https://stackoverflow.com/questions/1189576/datagridview-autogeneratecolumns-is-set-to-true-somehow) DataGridViewDesigner 的 Initialize() 方法（一个未记录且非常隐藏的帮助器类）根据是否指定了 DataSource 来设置 DGV 的 AutoGenerateColumns 属性，它会覆盖您可能在您的自己的代码。

逻辑是需要 DataSource 才能自动生成列；因此，让您在未指定的情况下尝试将此属性设置为 True 是无效的。相反，如果您在设计器中设置 DataSource，您可能希望 DGV 为您设置列，除非您还使用 Columns 属性设置了自己的列。

您可以通过在派生类中覆盖它并指定属性来公开此`[Browseable(true)]`属性。但是，正如上面的问题所示，您在构造函数或 InitializeComponent() 方法中设置的任何内容都将被 DGVDesigner 覆盖。

# javascript - d3 单击并拖动事件嵌套

> ID：10095979
> 
> 赞同：5
> 
> 时间：2012-04-10T20:27:43.677
> 
> 标签：javascript, events, svg, d3.js

我在 ag 元素中嵌套了很多元素，如下所示：

```
<g>
    <rect></rect>
    <text></text>
    ...
</g> 
```

但是，有些矩形我希望能够拥有自己的拖动事件。问题是当您将内容放入 ag 标签时，它的大小会扩大以包含这些标签。因此，即使我可以分配事件，也无法触发它们，因为 g 标签的事件在某种程度上更重要，即使 rect 位于它之上。

有没有你们知道的某种解决方法？

编辑：这是[一个简单的完整案例](http://jsfiddle.net/ZrCQE/)。一个矩形和一个 g 内的圆圈。g 是可拖动的，圆圈也应该是可拖动的，但不是。

```
var gDragBehav = d3.behavior.drag()
    .on('drag', gDragDrag)

function gDragDrag(d,i) {
    d.x += d3.event.dx;
    d.y += d3.event.dy;
    d3.select(this)
        .attr('x', d.x)
        .attr('y', d.y)
        .attr("transform", "translate(" + d.x + "," + d.y + ")");
}

var circleDragBehav = d3.behavior.drag()
    .on('drag', circleDragDrag);

function circleDragDrag(d,i) {
    console.log('dragging a circle')
    d.cx += d3.event.dx;
    d.cy += d3.event.dy;
    d3.select(this)
        .attr('cx', d.cx)
        .attr('cy', d.cy)
}

var svg = d3.select('body').append('svg')

var g = svg.selectAll('g').data([{x: 10, y:10}])
    .enter().append('g').call( gDragBehav )

g.append( 'rect' ).attr('width', 100 ).attr('height', 100 )

g.selectAll( 'circle' ).data([{cx: 0, cy:0}])
    .enter().append( 'circle' )
    .attr('cx', function(d) { return d.cx } ).attr('cy', function(d) { return d.cy } )
    .attr('r', 40 )
    .call( circleDragBehav ) 
```

编辑：这是一些代码

```
var group = this.d3svg.selectAll('g' + '.' + this.className)
  .attr('x', this.drawFuncs['x'] )
  .attr('y', this.drawFuncs['y'] )
  .attr("transform", this.drawFuncs['translate'] )
  .attr('class', this.className )
  .call(gDragBehav)
  .on( 'click', blockClickMenu )

ports = ['AtomicPort']
for ( port in ports ) {  
  drawPort.call( this, group, ports[port] )
}

function drawPort( d3svg, portName, redraw ) {
  d3svg.selectAll('rect.' + portName)
    .data( function(d) { return d.ports[ portName ] } )
    .enter().append('rect')
    .attr('x', this.drawFuncs['x'] )
    .attr('y', this.drawFuncs['y'] )
    .attr('width', this.drawFuncs['width'] )
    .attr('height', this.drawFuncs['height'] )
    .attr('class', portName )
    .call(portDragBehav)

  var portDragBehav = d3.behavior.drag()
    .on('drag', portDragDrag);

  function portDragDrag(d,i) {
    d.x += d3.event.dx;
    d.y += d3.event.dy;
    d3.select(this)
      .attr('x', d.x)
      .attr('y', d.y)
    d3.event.stopPropagation();
  }

  var gDragBehav = d3.behavior.drag()
    .on('dragstart', gDragStart)

  function gDragDrag(d,i) {
    d.x += d3.event.dx;
    d.y += d3.event.dy;
    d3.select(this)
      .attr('x', d.x)
      .attr('y', d.y)
      .attr("transform", "translate(" + d.x + "," + d.y + ")");
    d3.event.stopPropagation(); //Uncaught TypeError: Object #<Object> has no method 'stopPropagation'
  } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T20:54:33.997

SVG`<g>`元素没有大小或区域；它是所有后代的透明容器，并且不能拦截其他元素的事件（除非您添加要在“捕获阶段”期间触发的事件侦听器）。

作为父元素，事件会冒泡到它；`<rect>`您可能看到的是，无论您`<g>`用来触发*.*

要解决此问题，您需要阻止事件冒泡。在您的 mousedown （或其他）事件处理程序中`<rect>`添加：

```
function startDrag(evt){
  // whatever your code is here
  evt.stopPropagation();
} 
```

*如果没有您的实际代码（或者更好的是精简的测试用例），很难确定或进一步帮助您。*

* * *

**编辑**这是您的简单示例的工作版本：http: [//jsfiddle.net/ZrCQE/2/](http://jsfiddle.net/ZrCQE/2/)

具体来说，显然`d3.event`不是事件本身，而是具有`sourceEvent`引用实际事件的属性的对象。

```
var dragGroup = d3.behavior.drag()
  .on('dragstart', function() {
    console.log('Start Dragging Group');
  }).on('drag', function(d, i) {
    d.x += d3.event.dx;
    d.y += d3.event.dy;
    d3.select(this).attr("transform", "translate("+d.x+","+d.y+")");
  });

var dragCircle = d3.behavior.drag()
  .on('dragstart', function(){
    d3.event.sourceEvent.stopPropagation();
    console.log('Start Dragging Circle');
  })
  .on('drag', function(d,i){
    d.cx += d3.event.dx;
    d.cy += d3.event.dy;
    d3.select(this).attr('cx', d.cx).attr('cy', d.cy)
  });

var svg = d3.select('body').append('svg').attr('viewBox','-50 -50 300 300');

var g = svg.selectAll('g').data([{x:10,y:10}])
  .enter().append('g').call(dragGroup);

g.append('rect').attr('width', 100).attr('height', 100);

g.selectAll('circle').data([{cx: 90,cy:80}])
  .enter().append('circle')
    .attr('cx', function(d){ return d.cx })
    .attr('cy', function(d){ return d.cy })
    .attr('r', 30)
    .call(dragCircle);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T02:54:57.863

我有类似的问题（[http://jsfiddle.net/j8RZN/1/](http://jsfiddle.net/j8RZN/1/)），除了建议的解决方法似乎没有帮助。

```
userBox.data([userBox]).call(d3.behavior.drag() //makes the box to move
//titleBox.data([userBox]).call(d3.behavior.drag()  //does not make the box move
.on("dragstart", function() {})
.on("drag", function(d, i) {
console.log('box being dragged');
d.attr("transform", "translate(" + (d3.event.x) +  "," + (d3.event.y) + ")");
})
.on("dragend", function() {}));

circleDrag.call(d3.behavior.drag()
.on("dragstart", function() {})
.on("drag", function(d, i) {
 d3.event.sourceEvent.stopPropagation();
 console.log('small rectangle being dragged');
})
.on("dragend", function() {})); 
```

# entity-framework - EF 代码优先，模型属性类型到 db 数据类型

> ID：10095980
> 
> 赞同：1
> 
> 时间：2012-04-10T20:27:50.993
> 
> 标签：entity-framework, ef-code-first

EF 将从**String类型的属性创建****Nvarchar**数据类型。是否有一份清单，列出了 EF 如何处理其他类型以及它们将在从模型创建的数据库中表示的内容？谢谢，

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:32:24.053

检查映射表：[SQL-CLR Type Mapping](http://msdn.microsoft.com/en-us/library/bb386947.aspx)。您还可以使用以下方法更改该默认行为[`DbType attribute`](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.dbtype.aspx)：

```
[Column(DbType="NVarChar(10) NOT NULL")] 
```**

# php - 使用 google maps api 将当前 gps 坐标发送到 mySQL 数据库

> ID：10095983
> 
> 赞同：1
> 
> 时间：2012-04-10T20:28:25.557
> 
> 标签：php, jquery, mysql, google-maps-api-3, gps

我正在尝试在 jquery 中构建一个高尔夫应用程序，我可以使用按钮将当前 gps 坐标发送到 mySQL 数据库。

问题是我是 php 新手，我正在尝试找到我可以使用的代码。我建立了一个数据库：

1.  ID int 3 自增
2.  纬度浮动 10
3.  LON 浮点数 10

有人可以帮助一些html和php代码吗？

```
<!DOCTYPE html>
<html>
<body>
    <div data-role="page" id="page1">
        <div data-theme="b" data-role="header" data-position="fixed">
            <h5>
                Play 9 holes
            </h5>
        </div>
    </div>
<p id="demo">Click the button to get your position:</p>
<button onclick="getLocation()">Try It</button>
<div id="mapholder"></div>
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition,showError);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }

 function showPosition(position)
  {
  var latlon=position.coords.latitude+","+position.coords.longitude;

  var img_url="http://maps.googleapis.com/maps/api/staticmap?center="
   +latlon+"&zoom=14&size=400x400&sensor=false";
   document.getElementById("mapholder").innerHTML="<img src='"+img_url+"' />";
   }

 function showError(error)
  {
   switch(error.code) 
     {
   case error.PERMISSION_DENIED:
      x.innerHTML="User denied the request for Geolocation."
       break;
     case error.POSITION_UNAVAILABLE:
       x.innerHTML="Location information is unavailable."
        break;
     case error.TIMEOUT:
       x.innerHTML="The request to get user location timed out."
        break;
     case error.UNKNOWN_ERROR:
         x.innerHTML="An unknown error occurred."
       break;
     }
   }
 </script>
 </body>
 </html> 
```

此代码显示当前位置，但必须有一个请求函数可以将 position.coords.latitude+","+position.coords.longitude 发送到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:02:21.273

我真的不确定您要做什么，但是 Google Maps API 网站上有一些关于将 PHP 和 MySQL 与 Google Maps API 结合使用的文章：

[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)

[https://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)

[https://developers.google.com/maps/articles/phpsqlgeocode](https://developers.google.com/maps/articles/phpsqlgeocode)

# facebook - Facebook 画布应用程序和 Safari 5 - 发布到 iframe 的技巧不起作用

> ID：10095984
> 
> 赞同：1
> 
> 时间：2012-04-10T20:28:28.683
> 
> 标签：facebook, facebook-graph-api, safari

我的 facebook 应用程序和 Safari 5（仅限 Safari 5）有问题。以前，拥有一个 iframe 并在其上发布一个帖子以使跨域 cookie 工作就足够了。现在它似乎不再适用于 Safari 5

```
<body background="background.jpg" onload="document.forms['qmainapp'].submit();">
<form name="qmainapp" id="qmainapp" target="mainapp" method="POST" action="webappmainframe.php">
<input type="Text" name="aText" value="ddd">
</form>
<iframe name="mainapp" id="mainapp" frameborder="0" scrolling="no" width="480" height="800" marginwidth="0" marginheight="0" style="position:absolute; top:0; left:144;" >...Wait</iframe> 
```

# python - 推出网络身份验证系统

> ID：10095987
> 
> 赞同：15
> 
> 时间：2012-04-10T20:28:46.890
> 
> 标签：python, security

我正在构建一个需要用户身份验证和授权的站点。我最初的想法是使用 Flask 框架编写应用程序。但是，[我了解到 Flask 没有内置的身份验证系统](https://stackoverflow.com/a/6973165/1239405)。它确实有一个扩展烧瓶登录，但我还没有得到任何关于这个扩展是否写得好的确认。我读过很容易弄错身份验证。

1.  切换到 Django 或 web2py 之类的东西可能是个好主意，它们确实内置了身份验证系统？

2.  优秀的 Web 程序员通常会选择使用经过验证的真实身份验证系统，而不是尝试推出自己的身份验证系统吗？

3.  是否有一个很好的指南来展示有关构建身份验证/授权系统的最佳实践？

多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T19:42:22.887

如果您想为您的网站添加用户登录功能（即身份验证和授权），请使用现有框架。除非您是安全专家，否则编写安全系统的概率接近于 0。无论您使用何种编程语言和使用何种框架，这都适用。

不幸的是，我看到人们这样回答这个问题：“作为初学者，这并不难，而且编码很有趣。你需要一个地方来存储你的数据（比如说一个 mysql 数据库）。你应该存储加密版本的密码等。” 这个答案是完全错误的。

有可用的免费身份验证框架，请使用它们。例如，Django 和 web2py 具有内置的身份验证系统。许多框架没有内置身份验证（例如 Flask、webpy）；这并不意味着您应该推出自己的框架。这只是意味着您应该找到第 3 方身份验证软件。对于 Flask，有 Flask-login。

所以，我原来的问题的答案是：

1.) 是，或集成经过验证的第 3 方软件系统。

2.) 是的，最佳实践表明不要编写自己的身份验证系统。使用已经构建好的。

3.) 您不应该需要构建身份验证系统的指南，因为您不应该构建一个。然而，[OWASP](https://www.owasp.org/index.php/Main_Page)是一个很好的安全资源。

**Here's a brief summary:** Do not write your own authentication system. Use a pre-built authentication system that is trusted. If anyone has any recommendations for authentication systems that can be used with Python, feel free to post them.

# javascript - 使用jquery每4秒向div添加一个类的最佳方法是什么？

> ID：10095992
> 
> 赞同：1
> 
> 时间：2012-04-10T20:29:19.533
> 
> 标签：javascript, jquery

使用jquery每4秒向div添加一个类的最佳方法是什么？

```
<div class="34 post">
<img width="311" height="417" src="#" class="#" alt="newspapers" />
<h2><a href="#">Headline News Part 2</a></h2>
<p>testing new content</p>
</div>

<div class="9 post">
<img width="311" height="417" src="#" class="#" alt="newspapers" />
<h2><a href="#">Headline News Part 2</a></h2>
<p>testing new content</p>
</div>

<div class="6 post">
<img width="311" height="417" src="#" class="#" alt="newspapers" />
<h2><a href="#">Headline News Part 2</a></h2>
<p>testing new content</p>
</div> 
```

所以我希望第一个有一个“显示”类，然后在 4 秒后，我想删除那个类并将其添加到第二个类。然后再过 4 秒后，将其从第二个中删除并将其添加到第三个中。当它到达终点时，它会循环回来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:33:04.513

```
var $postDivs = $('div.post'), // assuming these won't change
    i = -1,
    CLASS_NAME = 'foo';

setInterval(function () {
    $postDivs.eq(i).removeClass(CLASS_NAME);
    i = (i+1) % $postDivs.length;
    $postDivs.eq(i).addClass(CLASS_NAME);
}, 4000); 
```

[http://jsfiddle.net/mattball/k2sJy/](http://jsfiddle.net/mattball/k2sJy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:38:33.960

If you want to create a simple infinite rotation of news items, you may try [jQuery cycle plugin](http://jquery.malsup.com/cycle/) for doing this.

# ruby-on-rails - 自定义模型方法，设置自动发送邮件的范围

> ID：10095994
> 
> 赞同：0
> 
> 时间：2012-04-10T20:29:35.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, named-scope, rails-models

这有几个阶段，由于我对 Rails 比较陌生，我不确定我是否以最好的方式处理这个问题。

用户关注公司，公司应用程序在特定日期打开和关闭。如果用户关注一家公司，我希望他们在以下情况下自动收到电子邮件：a) 公司申请打开，b) 公司申请关闭前一周，c) 公司申请关闭当天。

我尝试过使用命名范围。我有以下模型方法（我认为这需要一些工作）设置每个公司的范围，具体取决于日期。

示范公司.rb

```
 def application_status
     if open_date == Today.date
      self.opening = true
     else
      self.opening = false
     end 

    if ((close_day - Today.date) == 7)
     self.warning = true
      else
     self.warning = false
    end 

    if close_day == Today.date
     self.closing = true
      else
     self.closing = false
    end 
 end 
```

我希望每天对每个公司调用一次此方法，以便每个公司都有适当的范围 - 所以我尝试使用when gem（cron）和以下代码。在每个公司上运行上述模型方法。

时间表.rb

```
every 1.day do 
 runner "Firm.all.each do |firm|
  firm.application_status
 end"
end 
```

然后对于每个范围的打开、警告、关闭，我在无论何时调度文件中都有一个方法，为简单起见，我将只显示打开方法。以下查询已应用开放范围的所有公司，并对其运行 application_open_notification 方法。

时间表.rb

```
every 1.day do
 runner "Firm.opening.each do |firm|
  firm.application_open_notification
 end"
end 
```

这会在 Firm.rb 模型中调用以下方法

```
def application_open_notification
  self.users.each do |user|
   FirmMailer.application_open(user, self).deliver
  end
end 
```

这反过来又调用了拼图的最后一块......它应该向用户发送一封电子邮件，其中包括公司的名称。

```
def application_open(user,firm)
  @firm = firm
  @user = user
    mail to: @user.email, subject: @firm' is now accepting applications'
  end
 end 
```

这是解决这个问题的可行方法吗？特别是我对模型中的编码不是很熟悉。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:24:10.930

我猜`opening`,`warning`和`closing`是数据库字段，并且您的范围如下：

```
class Firm < ActiveRecord::Base
    scope :opening, :where => { :opening => true }
    # etc
end 
```

数据库（以及所有存储）有一个一般规则：如果不需要，不要存储可以计算的东西。

由于可以根据当天的日期和字段确定应用程序的状态`open_date`，因此`close_day`您可以根据需要计算它们，而不是为它们创建额外的字段。您可以使用 SQL 和 Active Record 执行此操作：

```
scope :opening, :where { :open_date => (Date.today .. Date.today+1) }
scope :warning, :where { :close_day => (Date.today+7 .. Date.today+8) }
scope :closing, :where { :close_day => (Date.today .. Date.today+1) } 
```

（请注意，这些选择时间范围。它们可能必须根据您是否使用`date`或`time`字段进行更改。）

但是还有另一个问题：如果由于某种原因（计算机崩溃、代码错误等）您的计划程序没有在特定日期运行，会发生什么？即使出现问题，您也需要一种确保最终发送通知的方法。有两种解决方案：

1.  编写您的日程安排程序以选择性地接受今天以外的日期（通过`ARGV`）
2.  为每家公司保留是否已发送每种通知的标志。这些必须存储在数据库中。

请注意，范围不是必需的。你可以这样做：

```
Firm.where(:open_date => (Date.today .. Date.today+1)).each do |firm|
   #...
end 
```

但范围至少包含了识别各种记录集的细节。

# linux - 在 Linux 中获取内存权限详细信息

> ID：10095997
> 
> 赞同：2
> 
> 时间：2012-04-10T20:29:55.330
> 
> 标签：linux, memory, memory-management, mprotect

我正在使用 mmap 分配内存，并使用 mprotect 将一些页面标记为 PROT_READ，而将一些页面标记为 PROT_NONE。我的实现具有基于内存权限的逻辑。目前我有内存位置信息，我如何获得它的当前保护状态？(PROT_READ/PROT_NONE)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:39:13.110

I don't know if there's a syscall to retrieve this information. Absolute worst case you could parse `/proc/<pid>/maps`.

# google-chrome-extension - 浮动 popup.html div

> ID：10095998
> 
> 赞同：3
> 
> 时间：2012-04-10T20:29:55.937
> 
> 标签：google-chrome-extension

我注意到当单击扩展图标时，用于 chrome 的[Buffer 应用程序](https://chrome.google.com/webstore/detail/noojglkidnpfjbincgijbaiedldjfbhh)对浮动 div 的处理方式略有不同。这是如何实现的？

我不相信他们会在新窗口中执行此操作，因为我没有看到生成的附加窗口。

基本上我需要的是在单击图标时显示的厚框。

任何有关如何做到这一点的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:38:27.567

他们使用来自该背景页面的 api 来监听单击事件以了解单击浏览器操作按钮的时间。

这是该 API 页面的链接：

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(tab.id, {'file': 'createPopup.js'}, function callBackStub(){})
}); 
```

***createPopup.js***

你的 html 将在一个字符串中。我个人建议这样写：

```
var widgetHtml = 
  '<div id="main">              '+
  '  <p>some stuff goes here</p>'+
  '</div>'; 
```

然后随着您的 html 的增长，您可以对开始引用和结束进行列编辑`'+`

好的，现在您要做的是将您的 html 放入 iframe 中，但不设置 src 属性。像这样：

```
var iframe = document.createElement('iframe');
document.documentElement.appendChild(iframe); //fastest way to append to DOM: http://jsperf.com/insertbefore-vs-appendchild/2
iframe.contentDocument.body.innerHTML = widgetHtml; 
```

为什么？因此，您的内容不会采用页面其余部分的样式。

嗯，然后您可以执行 translateX 或转换左/右位置以将元素滑入页面。

# ruby-on-rails-3 - 活动管理员覆盖控制器操作创建样式

> ID：10095999
> 
> 赞同：2
> 
> 时间：2012-04-10T20:29:56.843
> 
> 标签：ruby-on-rails-3, activeadmin

我正在使用带有`active admin`gem 的 Rails 3.1.3。

我正在尝试为我的模型覆盖创建控制器操作。所以在我的 activeadmin 模型资源编码中：

```
ActiveAdmin.register MyModel do
    form :partial => "form"
    menu :label => "MyModel"

    controller do
      def create
        begin
          @model = MyModel.new(params[:my_model])

          @model.save!

          redirect_to admin_my_model_path(@property)

        rescue Exception => e
          logger.error(e.message)
          render 'new'
        end
      end
    end
end 
```

然而，当我渲染新动作时，活跃管理员的美丽风格消失了。

哪个可能是问题？可以发布一个覆盖的创建操作示例吗？

提前致谢。

PD：对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:04:54.440

我在stackoverflow上找到了解决方案。链接：

[解决方案](https://stackoverflow.com/questions/7888563/active-admin-render-edit-page)