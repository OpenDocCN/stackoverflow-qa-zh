# StackOverflow 问答 10556000-10556999

# java - Salesforce：如何将 apex:inputField 的值传递给自定义扩展？

> ID：10556002
> 
> 赞同：1
> 
> 时间：2012-05-11T17:30:47.633
> 
> 标签：java, salesforce, visualforce

我目前正在 salesforce.com 上使用带有自定义扩展名的顶点表单开发一个表单。

该表格本身旨在预订具有最大插槽数的旅行。提交表单后，我需要检查以确保在表单中选择的日期和时间仍有可用的空位（因为在加载表单和提交之间没有预订）。

当调用 PageReference save() 时，我无法让自定义控制器接收提交的表单数据。

假设我有...

```
<apex:form>
<apex:pageBlock>
    <apex:inputField value="{!customObject__c.Date__c}"/>
    <apex:inputField value="{!customObject__c".Time__c}"/>
    <apex:commandButton value="{!save}"/>
</apex:pageBlock>
</apex:form> 
```

我的客户扩展框架是

```
public class myExtension {

    public myExtension(ApexPages.StandardController controller) {

    }

    public PageReference save(){
       return null;
    }

} 
```

如何让 save() 访问 inputField 值，以便对现有数据库对象运行查询？

任何关于如何实现/已经实现的例子都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:28:59.637

您的视觉力标记不正确。您需要使用方法设置 action 属性，并且 value 属性将是保存文本：

```
<apex:form>
    <apex:pageBlock>
        <apex:inputField value="{!customObject__c.Date__c}"/>
        <apex:inputField value="{!customObject__c".Time__c}"/>
        <apex:commandButton value="Save" action="{!save}"/>
    </apex:pageBlock>
</apex:form> 
```

但假设以上只是一个错字，您需要引用标准控制器传入的对象：

```
public class myExtension {
    private CustomObject__c customObject;

    public myExtension(ApexPages.StandardController controller) {
        customObject = (CustomObject__c) controller.getRecord();
    }

    public PageReference save(){
        //You can now access the customObject and it will contain the 
        //data input by the user
        customObject.Name = ''; //Access properties on the object

        update customObject;
       return null;
    }
} 
```

# c++ - 类型未命名类型或错误：字段类型不完整

> ID：10556007
> 
> 赞同：1
> 
> 时间：2012-05-11T17:31:05.203
> 
> 标签：c++, forward-declaration, incomplete-type

我不确定为什么会收到此错误...“错误：字段'config'的类型不完整”。我尝试使用#include 进行前向声明并包含标头...我只是想在 fInstance 中包含 fConfig...

```
#ifndef FINSTANCE_H
#define FINSTANCE_H

//#include "fConfig.h"
#include <vector>
#include <sys/types.h>
#include <string>

using namespace std;

class fConfig;

class fInstance
{
public:
    pid_t pid;
    fConfig config;
    vector<string> notes;
    vector<time_t> times;

    fInstance();
    virtual ~fInstance();
};

#endif // FINSTANCE_H

#ifndef FCONFIG_H
#define FCONFIG_H

#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <string>
#include <cstring>
#include <sys/types.h>
#include <fcntl.h>
#include "JWDSFork.h"
#include "fInstance.h"

using namespace std;

class fConfig
{
    private:
        pid_t pid, w;

    public:
        pid_t cPid;
        string name;

        int group;
        int instanceId;
        int numInstance;
        int tries;

        bool reply;
        bool debug;
        bool service;
        bool currentlyRunning;

        time_t startTime;
        time_t endTime;

        string path;

        fConfig();
        virtual ~fConfig();

        void start();
        string intToString(int);
        char* stringToChar(string);
};

#endif // FCONFIG_H 
```

**编辑：添加更改**

```
#ifndef FINSTANCE_H
#define FINSTANCE_H

#include "fConfig.h"
#include <vector>
#include <sys/types.h>
#include <string>
using namespace std;

//class fConfig;

class fInstance
{
public:
    pid_t pid;
    fConfig* config;
    vector<string> notes;
    vector<time_t> times;

    fInstance();
    virtual ~fInstance();
};

#endif // FINSTANCE_H

#ifndef FCONFIG_H
#define FCONFIG_H

#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <string>
#include <cstring>
#include <sys/types.h>
#include <fcntl.h>
#include "JWDSFork.h"
//#include "fInstance.h"

using namespace std;

class fConfig
{
    private:
        pid_t pid, w;

    public:
        pid_t cPid;
        string name;

        int group;
        int instanceId;
        int numInstance;
        int tries;

        bool reply;
        bool debug;
        bool service;
        bool currentlyRunning;

        time_t startTime;
        time_t endTime;

        string path;

        fConfig();
        virtual ~fConfig();

        void start();
        string intToString(int);
        char* stringToChar(string);
};

#endif // FCONFIG_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:34:40.320

您需要添加而不需要包含`#include "fConfig.h"`在，因为您似乎没有使用in类型。`fInstance.h``fInstance.h``fConfig.h``fInstance``fConfig.h`

当您转发声明类型时，编译器不知道该类型的内存布局，因此它将该类型视为**不完整类型**，并且编译器无法执行任何需要知道该类型的内存布局的操作。

您在转发声明它之后创建一个实例`fConfig`，为此编译器需要知道它的内存布局，`fConfig`但由于您只是转发声明它，它不知道这一点，因此会抱怨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:33:25.823

您需要将 的完整定义放在 的`fConfig`之前`fInstance`。前向声明不会做，因为你`fInstance`有一个`fConfig`数据成员，所以完整的类型是必要的：

在`fConfig.h`：

```
#ifndef FCONFIG_H
#define FCONFIG_H

class fConfig {
  // as in original
};

#endif 
```

在`fInstance.h`：

```
#ifndef FINSTANCE_H
#define FINSTANCE_H

#include "fConfig.h" // need to include to get full type

class fInstance {
  // as in original
};

#endif 
```

# c# - 实现通过 Form Get/Post 发送/接收数据的 Web 服务

> ID：10556008
> 
> 赞同：-1
> 
> 时间：2012-05-11T17:31:17.263
> 
> 标签：c#, visual-studio-2010, web-services

我最近需要开发一个新的 Web 服务，但我不完全确定如何处理它。

我熟悉普通的 WCF Web 服务，其中的 url 类似于

```
http://server/site/Service.svc/SomeMethod 
```

您可以将 XML/JSON 发布到。

新服务应该接受 HTML 文件发布，其中内容类型为

```
multipart/form-data 
```

据我了解，表单包含字段，其中一个包含我要解析的一堆 XML 数据。然后，我将通过将我自己的类似 html 文件发布到远程位置来做出回应。

我不完全确定如何开始。某种 WCF 服务？ASMX？甚至是客户端将发布到的实际 ASPX 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:44:01.607

您可以使用 .asmx 文件来创建 Web 服务，并可以通过 aspx 页面使用它

# php - MySQLi没有按顺序返回行

> ID：10556010
> 
> 赞同：0
> 
> 时间：2012-05-11T17:31:29.253
> 
> 标签：php, mysqli

这可能不是一个很难回答的问题。我在编写这个 PHP 函数时遇到了问题……它逐行返回行，但每次返回的行都递增 4。所以第一行将输出，然后是第 5 行，然后是第 9 行......

```
function showDatabases() {

# $_GET variables from the URL.
$database = mysql_real_escape_string($_GET['database']);
$table    = mysql_real_escape_string($_GET['table']);   

$mysqli = new mysqli('127.0.0.1', 'root', '', $database);

$query_one = $mysqli->query("SELECT * from $table");

$num_rows   = mysqli_num_rows($query_one);
$num_fields = mysqli_num_fields($query_one);

    for ($x = 0; $x < $num_rows; $x++) {
       for ($c = 0; $c < $num_fields; $c++) {
            $row = mysqli_fetch_row($query_one);
            echo($row[$c]."&nbsp;&nbsp;");
       }
    echo("<br/>");
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:34:21.020

`mysqli_fetch_row`获取整行并将指针移动到下一行。你应该每行只调用一次；现在您每列调用一次。

那是，

```
for ($x = 0; $x < $num_rows; $x++) {
   $row = mysqli_fetch_row($query_one);
   for ($c = 0; $c < $num_fields; $c++) {
        echo($row[$c]."&nbsp;&nbsp;");
   }
echo("<br/>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:44:21.700

你把事情复杂化了，你只需一个循环就可以做到

```
$query = "SELECT * from $table";
if ($result = $mysqli->query($query)) {
    while ($row = $result->fetch_assoc()) {
        echo $row['fieldname']."&nbsp;&nbsp;";
    }
} 
```

我建议您在某个时间添加订单，默认订单不是 id 订单。

# c# - 如果我从代码创建文本块，如何计算加载时文本块的高度和宽度？

> ID：10556019
> 
> 赞同：9
> 
> 时间：2012-05-11T17:32:19.303
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, actualwidth

```
TextBlock tbl= new TextBlock();
tbl.text="Kishore";

double x=tbl.ActualHeight;
double y=tbl.ActualWidth; 
```

如果我从 Metro 中加载的事件中执行代码 - winRT 将为两者返回 0。

我怎样才能`ActualWidth`参加`Loaded`或`SizeChanged`参加活动？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T02:14:16.560

调用[Measure()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.measure.aspx)然后[Arrange()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.arrange.aspx)然后`ActualWidth`和`ActualHeight`将被更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T13:00:12.847

也可以通过

```
UpdateLayout();
testBlock.ActualWidth 
```

这在计算多个对象的高度和宽度时可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T02:27:30.560

```
TextBlock tbl = new TextBlock();
tbl.Text = "Kishore";

tbl.Measure(new Size(0, 0));

double x = tbl.ActualHeight; 
```

# google-apps-script - 使用 UrlFetchApp.oAuthConfig 时，如何在不要求用户从脚本编辑器运行脚本的情况下获得用户的批准？

> ID：10556023
> 
> 赞同：1
> 
> 时间：2012-05-11T17:32:27.567
> 
> 标签：google-apps-script

我可以使用菜单项或按钮获得 DocsList/SitesApp/etc 的用户授权，但对基于 oAuthConfig 的 UrlFetch 操作的批准是不同的。看来您只能在脚本编辑器中批准那些。

有没有其他方法可以让我获得用户对特定 oAuth 范围的批准？我的用例是针对邮件迁移 API，Google Apps for Business 域中的任何用户都可以接受三足 oAuth。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:31:48.093

这是一种回归。oAuth 授权弹出窗口过去可以从菜单中正常工作，我敢肯定。这是一个奇怪的空白弹出窗口，只有一个“授权”按钮，很奇怪，但完成了工作。

显然我已经很长时间没有使用它了，因为[问题 677](http://code.google.com/p/google-apps-script-issues/issues/detail?id=677)（关于这个）于 2011 年 7 月开放：P

无论如何，您应该“加注星标”以跟踪更新并为它投票。

# c# - C# 可以阻止远程 Windows PC 上的 Internet 访问吗

> ID：10556025
> 
> 赞同：1
> 
> 时间：2012-05-11T17:32:37.243
> 
> 标签：c#, networking, router, connectivity, remote-administration

使用 C#，是否可以遍历连接到 LAN 的远程 Windows 计算机列表并仅打开/关闭特定 PC 的互联网访问，同时通过路由器提供互联网连接？所有这一切都无需在远程 PC 上安装任何客户端软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:34:00.250

这个答案最好作为评论提供，但写在那里有点长。

您应该考虑创建一个`Group Policy`.

这就是我们本地*网络管理员*所做的。

我们的生产车间有数百台 PC，它们必须连接到我们的网络才能通过本地服务器和远程工厂的服务器访问数据。

这些电脑通过公共配置文件访问我们的网络，该配置文件无法访问*互联网*。

我们还使用多个服务器（应用程序服务器、邮件服务器、Web 服务器、sql 服务器等）。

当公共帐户登录时，路由器拒绝访问 Web 服务器的流量。

如果经理或主管需要在生产车间查找零件，他们可以使用他们的帐户（即不是公共帐户）登录并访问互联网信息。

对我来说幸运的是，你没有问如何做到这一点，因为我不确定这是如何做到的。你只问有没有可能。

# java - resteasy中的继承冲突

> ID：10556033
> 
> 赞同：0
> 
> 时间：2012-05-11T17:32:51.083
> 
> 标签：java, rest, resteasy

我的问题很简单，我有一个具有以下 JAXRS 定义的通用父类

```
@POST
@Restricted(permissions = {"*_create"})
public Response save(T entity) throws Exception { 
```

我创建了一个具有泛型参数类型的特定子类`T`，`Access`它具有以下声明：

```
@POST
@Restricted(permissions = {"*_create"})
@Consumes({"application/x-www-form-urlencoded", "application/json", "application/xml"})
public Response save(final Access newAccess, @HeaderParam("Authorization") String token, @Context HttpServletRequest request) throws Exception { 
```

我的问题是 Resteasy 显然有一个随机行为，该行为是在战争启动时设置的，它将在应用程序生命周期内保持。有时它将传入的 POST 请求与父保存方法相关联，有时与子保存方法相关联。我的目标是让孩子被系统地使用，但我想避免更改我的父类，因为我的项目中的许多资源定义类都毫无问题地依赖它（并且不要覆盖例如 save 方法）。有没有一种简单的（比如resteasy）方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:54:12.057

至于现在我找到的解决方案是覆盖`public Response save(T entity) throws Exception`子类中的父方法签名，除了`@Override`. 方法定义包含一个`throw new UnsupportedOperationException();`.

```
@Override
public Response save(Access entity) throws Exception {
    throw new UnsupportedOperationException();
} 
```

这使得在这个子类中选择另一个带有 jaxrs 注释的保存声明，没有歧义。

# java - 使用 GridBagLayout 对齐面板

> ID：10556034
> 
> 赞同：6
> 
> 时间：2012-05-11T17:32:51.690
> 
> 标签：java, swing, layout, gridbaglayout

我对 java 并不完全陌生（我已经使用它一年了），但这是我第一次尝试摇摆。我正在尝试制作一个非常简单的聊天客户端来同时学习套接字和摆动。我的问题是“我必须怎么做才能正确对齐我的面板？”。我已经尝试了很多东西（虽然我的代码中没有它）。通常我自己做这样的事情，但我到了需要寻求帮助的地步。我需要改变重量吗？我希望客户看起来像这样。

![在此处输入图像描述](../Images/0ffe09eb83f58c555cac6d9b60074af7.png)

这就是它目前的样子。

![在此处输入图像描述](../Images/30447a83853cad80abbfb36241d96891.png)

这是我的代码。

```
package com.client.core;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Window extends JFrame{

private int screenWidth = 800;
private int screenHeight = 600;

public Window(){

    //Initial Setup
    super("NAMEHERE - Chat Client Alpha v0.0.1");
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(screenWidth,screenHeight);
    GridBagConstraints c = new GridBagConstraints();

    //Main Panel
    JPanel window = new JPanel();
    window.setLayout(new GridBagLayout());
    window.setBackground(Color.black);

    //Panels
    JPanel display = new JPanel();
    JPanel chat = new JPanel();
    chat.setLayout(new GridBagLayout());
    JPanel users = new JPanel();

    display.setBackground(Color.blue);
    c.gridx = 0;
    c.gridy = 0;
    c.insets= new Insets(5,5,5,5);
    window.add(display, c);

    chat.setBackground(Color.red);
    c.gridx = 0;
    c.gridy = 3;
    c.gridheight = 2;
    c.gridwidth = 1;
    c.insets= new Insets(5,5,5,5);
    window.add(chat, c);

    users.setBackground(Color.green);
    c.gridx = 2;
    c.gridy = 0;
    c.insets= new Insets(5,5,5,5);
    window.add(users, c);

    //Buttons

    //Text fields
    JTextArea text = new JTextArea("DEREADFADSFEWFASDFSADFASDF");
    c.gridx = 0;
    c.gridy = 0;
    chat.add(text);
    JTextField input = new JTextField("type here to chat", 50);
    c.gridx = 0;
    c.gridy = 1;
    c.insets= new Insets(5,5,5,5);
    chat.add(input);

    add(window);

}

static class ActLis implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub

    }

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T04:54:04.563

如果您想要这样的输出：

![信使窗口](../Images/4017f263f421040ce9937b795e267902.png)

您可以从此代码示例中获取帮助，但`ButtonPanel`如果不需要，您可以删除最后一个：

```
package to.uk.gagandeepbali.swing.messenger.gui;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.JTextField;

public class ChatPanel extends JPanel
{
    private JButton backButton;
    private JButton exitButton;
    private JButton sendButton;

    private JTextPane chatPane;
    private JTextPane namePane;
    private JTextField chatField;

    private GridBagConstraints gbc;

    private final int GAP = 10;
    private final int SMALLGAP = 1;

    public ChatPanel()
    {
        gbc = new GridBagConstraints();
    }

    protected void createGUI()
    {
        setOpaque(true);
        setBackground(Color.WHITE);
        setLayout(new BorderLayout(5, 5));

        JPanel centerPanel = new JPanel();
        centerPanel.setOpaque(true);
        centerPanel.setBackground(Color.WHITE);
        centerPanel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, 0, GAP));
        centerPanel.setLayout(new GridBagLayout());
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 5;
        gbc.weightx = 0.8;
        gbc.weighty = 1.0;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        chatPane = new JTextPane();
        JScrollPane scrollerChat = new JScrollPane();
        scrollerChat.setBorder(BorderFactory.createTitledBorder("Chat"));
        scrollerChat.setViewportView(chatPane);
        centerPanel.add(scrollerChat, gbc);

        gbc.gridx = 5;
        gbc.gridwidth = 2;
        gbc.weightx = 0.2;
        namePane = new JTextPane();
        JScrollPane scrollerName = new JScrollPane(namePane);
        scrollerName.setBorder(BorderFactory.createTitledBorder("Names"));
        centerPanel.add(scrollerName, gbc);

        gbc.gridx = 0;
        gbc.gridy = 5;
        gbc.gridwidth = 5;
        gbc.weightx = 0.8;
        gbc.weighty = 0.1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        chatField = new JTextField();
        chatField.setOpaque(true);
        chatField.setBorder(BorderFactory.createCompoundBorder(
                BorderFactory.createTitledBorder("")
                , BorderFactory.createEmptyBorder(SMALLGAP, SMALLGAP, SMALLGAP, SMALLGAP)));
        centerPanel.add(chatField, gbc);

        gbc.gridx = 5;
        gbc.gridwidth = 2;
        gbc.weightx = 0.2;
        sendButton = new JButton("Send");
        sendButton.setBorder(BorderFactory.createTitledBorder(""));
        centerPanel.add(sendButton, gbc);       

        JPanel bottomPanel = new JPanel();
        bottomPanel.setOpaque(true);
        bottomPanel.setBackground(Color.WHITE);
        bottomPanel.setBorder(
                BorderFactory.createTitledBorder(""));
        bottomPanel.setLayout(new BorderLayout());

        JPanel buttonPanel = new JPanel();
        buttonPanel.setOpaque(true);
        buttonPanel.setBackground(Color.WHITE);
        buttonPanel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, 0, GAP));
        backButton = new JButton("Back");
        exitButton = new JButton("Exit");
        buttonPanel.add(backButton);
        buttonPanel.add(exitButton);
        bottomPanel.add(buttonPanel, BorderLayout.CENTER);

        add(centerPanel, BorderLayout.CENTER);
        add(bottomPanel, BorderLayout.PAGE_END);
    }

    public JTextPane getChatPane()
    {
        return chatPane;
    }

    public JTextPane getNamePane()
    {
        return namePane;
    }

    public JTextField getChatField()
    {
        return chatField;
    }

    public JButton getExitButton()
    {
        return exitButton;
    }   

    public JButton getBackButton()
    {
        return backButton;
    }

    public JButton getSendButton()
    {
        return sendButton;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:50:55.290

你可以做什么，并且可能会给出想要的结果

```
JPanel somethingHere = ...;
JPanel chat = ...;
JPanel userList = ...;

JPanel leftPanel = new JPanel( new BorderLayout() );
leftPanel.add( somethingHere, BorderLayout.CENTER );
leftPanel.add( chat, BorderLayout.SOUTH );

JPanel total = new JPanel( new BorderLayout() );
total.add( leftPanel, BorderLayout.CENTER );
total.add( userList, BorderLayout.EAST ); 
```

更简单然后搞砸`GridBagLayout`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:46:02.513

到目前为止，这是我得出的结论。红框是我打算用 LWJGL 添加一个简单的 2D 头像界面的地方。

![在此处输入图像描述](../Images/2c12e6f3cf1ecbf7b65ec9c707372bac.png)

这是它的代码

```
package com.client.core;

import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class Window extends JFrame{

private int screenWidth = 800;
private int screenHeight = 600;

public Window(){

    //Initial Setup
    super("NAMEHERE - Chat Client Alpha v0.0.1");
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(screenWidth,screenHeight);

    //Main Panels
    JPanel window = new JPanel(new BorderLayout());
    JPanel center = new JPanel(new BorderLayout());
    JPanel right = new JPanel(new BorderLayout());

    //Panels
    JPanel display = new JPanel( new BorderLayout());
    display.setBackground(Color.red);
    JPanel chat = new JPanel();
    chat.setLayout(new BoxLayout(chat, BoxLayout.Y_AXIS));
    chat.setBackground(Color.blue);
    JPanel users = new JPanel(new BorderLayout());
    users.setBackground(Color.green);

    //TextFields
    JTextArea chatBox = new JTextArea("Welcome to the chat!", 7,50);
    chatBox.setEditable(false);
    JTextField chatWrite = new JTextField();
    JScrollPane userList = new JScrollPane();
    JTextField userSearch = new JTextField(10);
    userList.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    users.add(userList);
    users.add(userSearch, BorderLayout.NORTH);
    chat.add(chatBox);
    chat.add(chatWrite);
    chat.setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1));

    //Menu bar
    JMenuBar menu = new JMenuBar();
        JMenu file = new JMenu("File");
            JMenuItem exit = new JMenuItem("Exit");
            JMenuItem ipconnect = new JMenuItem("Connect to IP");
    file.add(ipconnect);
    file.add(exit);
    menu.add(file);

    //Main window adding
    right.add(users);
    center.add(display, BorderLayout.CENTER);
    center.add(chat, BorderLayout.SOUTH);
    window.add(center, BorderLayout.CENTER);
    window.add(right, BorderLayout.EAST);
    window.add(menu, BorderLayout.NORTH);
    add(window);

    //Listeners
    chatWrite.addKeyListener(new KeyLis());
    ipconnect.addActionListener(new ActLis());
    exit.addActionListener(new ActLis());
}

static class KeyLis implements KeyListener{

    @Override
    public void keyPressed(KeyEvent e) {
        if(e.getKeyCode() == KeyEvent.VK_ENTER){
            System.out.println("Message recieved.");
        }

    }

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent e) {
        // TODO Auto-generated method stub

    }

}

static class ActLis implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent e) {
    if(e.getActionCommand() == "Exit"){
        System.exit(0);
    } else if(e.getActionCommand() == "Connect to IP"){
        System.out.println("Connecting....");
        JFrame frameip = new JFrame();
        JPanel panelip = new JPanel();  
        JButton buttonip = new JButton("Hello");
        frameip.add(panelip);
        panelip.add(buttonip);
        JDialog ippop =  new JDialog(frameip, "Enter IP", false);
    }

    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-09T06:13:57.177

我必须使用 GridBagLayout 构建类似的布局。下面的代码显示了我是如何实现它的。

[![在此处输入图像描述](../Images/99fdd69d146dbae7642d490b891a16ab.png)](https://i.stack.imgur.com/XZABI.png)

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class GridBagLayoutTest {
    public GridBagLayoutTest() {

    JFrame jframe = new JFrame();
    jframe.setLayout(new GridBagLayout());
    jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jframe.setSize(800, 600);
    jframe.setVisible(true);

    // Left
    JPanel leftPanel = new JPanel(new GridBagLayout());
    leftPanel.setBackground(Color.YELLOW);

    GridBagConstraints gridBagConstraints = new GridBagConstraints();
    gridBagConstraints.fill = GridBagConstraints.BOTH;
    gridBagConstraints.weightx = .7f;
    gridBagConstraints.weighty = 1f;
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;

    jframe.add(leftPanel, gridBagConstraints);

    JPanel leftTopPanel = new JPanel(new FlowLayout());
    leftTopPanel.setBackground(Color.RED);

    GridBagConstraints gridBagConstraints0 = new GridBagConstraints();
    gridBagConstraints0.fill = GridBagConstraints.BOTH;
    gridBagConstraints0.weightx = 1f;
    gridBagConstraints0.weighty = .7f;
    gridBagConstraints0.gridx = 0;
    gridBagConstraints0.gridy = 0;

    leftPanel.add(leftTopPanel, gridBagConstraints0);

    JPanel leftMiddlePanel = new JPanel(new FlowLayout());
    leftMiddlePanel.setBackground(Color.BLACK);

    gridBagConstraints0 = new GridBagConstraints();
    gridBagConstraints0.fill = GridBagConstraints.BOTH;
    gridBagConstraints0.weightx = 1f;
    gridBagConstraints0.weighty = .2f;
    gridBagConstraints0.gridx = 0;
    gridBagConstraints0.gridy = 1;

    leftPanel.add(leftMiddlePanel, gridBagConstraints0);

    JPanel leftBottomBottomPanel = new JPanel(new FlowLayout());
    leftBottomBottomPanel.setBackground(Color.PINK);

    gridBagConstraints0 = new GridBagConstraints();
    gridBagConstraints0.fill = GridBagConstraints.BOTH;
    gridBagConstraints0.weightx = 1f;
    gridBagConstraints0.weighty = .1f;
    gridBagConstraints0.gridx = 0;
    gridBagConstraints0.gridy = 2;

    leftPanel.add(leftBottomBottomPanel, gridBagConstraints0);

    // Right
    JPanel rightPanel = new JPanel();
    rightPanel.setBackground(Color.GREEN);

    gridBagConstraints = new GridBagConstraints();
    gridBagConstraints.fill = GridBagConstraints.BOTH;
    gridBagConstraints.weightx = .3f;
    gridBagConstraints.weighty = 1f;
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;

    jframe.add(rightPanel, gridBagConstraints);
}

public static void main (String args[]) {
    new GridBagLayoutTest();
} 
```

# ruby - .irbrc 的 Ruby 等价物？

> ID：10556036
> 
> 赞同：1
> 
> 时间：2012-05-11T17:32:57.580
> 
> 标签：ruby, irb

虽然`irb`利用`.irbrc`在启动时自动执行某些操作，但我无法找到如何自动为`ruby`自身调用执行相同操作。任何可以找到此类文档的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:20:12.940

对于我需要这个（基本上从不）的环境，我使用了该`-r [filename]`选项和`RUBYOPT`环境变量。

*（您可能希望指定包含目录，可以通过多种方式完成，包括`-I [directory]`选项）。*

这与 Phrogz 的答案基本相同，但没有 shell 脚本。这些脚本更加通用，因为您可以使用任意数量的脚本来进行简单的预执行环境绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:30:56.483

就像您可以为该运行使用`ruby -rfoo`require 库一样，您可以指定每次运行 Ruby 时始终需要特定的库：`foo`

```
if [ -f "$HOME/.ruby/lib/mine.rb" ]; then
  RUBYLIB="$HOME/.ruby/lib"
  RUBYOPT="rmine"
  export RUBYLIB RUBYOPT
fi 
```

将您自己的自定义代码放在一个文件中（`mine.rb`如上所示），并让您的解释器始终将其目录添加到您的`$LOAD_PATH`（又名`$:`）并始终添加`require`它（运行其中的代码）。

上面的shell代码和背景信息在这里：
[http ://tbagery.com/2007/02/11/auto-loading-ruby-code.html](http://tbaggery.com/2007/02/11/auto-loading-ruby-code.html)

# ruby-on-rails-3 - Rails 3.2 RSpec 测试与 FactoryGirl 混淆

> ID：10556037
> 
> 赞同：1
> 
> 时间：2012-05-11T17:33:03.697
> 
> 标签：ruby-on-rails-3, rspec2, factory-bot

我正在构建一个简单的测试来为用户展示产品。我的规格如下所示：

```
require 'spec_helper'

describe "Show Products" do
  it "Displays a user's products" do
    product = Factory(:product)
    visit products_path
    page.should have_content("ABC1")
  end
end 
```

我的产品工厂看起来像这样：

```
FactoryGirl.define do
  factory :product do
    sequence(:identifier, 1000) {|n| "ABC#{n}" }
  end
end 
```

我有一个简单的看法：

```
<table id="products">
  <thead>
<th>Product ID</th>
  </thead>
  <tbody>
    <% for product in @products %>
      <tr>
        <td><%= @product.identifier %></td>
      </tr>
    <% end %>
  </tbody>
</table> 
```

我得到的错误是没有@products 之类的东西。嗯，是的。这就是我的问题。由于我的工厂被定义为“产品”，并且其中有一个序列，我如何将“产品”中的值放入一个名为“产品”的变量中。

我基本上对上面的 FactoryGirl 语法感到困惑。我怎样才能在一条线上生成多个产品，但工厂名称必须与模型匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T22:58:03.223

实例变量 @products 很可能在 ProductsController 的 index 操作中分配，或者如果不是，它可能应该在那里定义。

通常，在请求规范中发生的情况是，您使用工厂创建一个持久保存在数据库中的对象，控制器随后检索这些记录并将它们分配给视图可用的实例变量。由于看起来您正在呈现索引，因此我希望在您的控制器中看到类似的内容：

```
class ProductsController < ApplicationController::Base
  def index
    @products = Product.all
  end
end 
```

此实例变量将在呈现时可供视图使用。

此外，您的视图中似乎有错字。在迭代器中，您有：

```
for product in @products
  # do something with product
end 
```

这将遍历每一个产品，并使变量“产品”在块中可用。相反，您在块中使用@product，这似乎是一个错字。

# sql-server - SSDT 在 Visual Studio 2010 SP1 中不起作用

> ID：10556042
> 
> 赞同：4
> 
> 时间：2012-05-11T17:33:19.430
> 
> 标签：sql-server, visual-studio-2010, reporting-services, sql-server-data-tools

我在 Windows 7 上运行 Visual Studio 2010 SP1 Premium，并尝试创建 SQL Server Reporting Services (SSRS) 报告。我已经从[http://msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027)下载了新的 SQL Server Data Tools (SSDT)并安装/重新启动。如果我进入 VS Help->About，我可以在已安装产品列表中看到“Microsoft SQL Server Data Tools 10.3.20225.0”。但是，SSDT 似乎没有出现在“新建项目”窗口中，如果我尝试打开现有的 SSRS 2005 报告项目（在 BIDS/VS 2005 中创建），它会显示“'Reports.rptproj' 无法打开，因为此版本的应用程序不支持其项目类型 (.rptproj)。要打开它，请使用支持此类项目的版本”。

我对 VS/SSDT 不需要安装 SQL Server 的印象是否不正确？我在安装 SSDT 时是否缺少其他一些软件、软件包或步骤？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T22:07:49.457

对于 SQL Server 2012 SSRS，BIDS 的功能被 SSDT 取代。如果您使用的是 SQL Server 2008 R2（或更早版本）SSRS，那么您需要使用该版本的 SQL Server 的 BIDS。

安装 SSDT 时，它包含 BI 项目（即 SSAS、SSIS、SSRS）的模板。SSDT 可以作为独立应用程序安装，或者，如果您的机器上有 VS2010 SP1，那么 SSDT 将安装在 VS2010 内部。

对于 OLTP（包括离线）数据库项目，没有模板。而是有一个名为“SQL Server 对象资源管理器”的新视图。有关后者的更多信息，请参阅我的[博客文章](http://lynnlangit.wordpress.com/2011/11/21/sql-server-2012sql-server-data-tools/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T01:36:12.340

新项目类型位于**Other Languages** -> SQL Server-> SQL Sever Database Project 下。

**不要将**其与 Database->SQL Server->Advanced 下的旧项目混淆

SSDT 的 BIDS 部分是一种单独的安装。（尽管他们已尝试使其看起来像一次安装。）请参阅有关为什么可能未安装其中一个或另一个的信息：

[http://www.jamesserra.com/archive/2012/04/ssdt-installation-confusion/](http://www.jamesserra.com/archive/2012/04/ssdt-installation-confusion/)

# xml - 使用 R 的 XML 包抓取访问受限的网站

> ID：10556043
> 
> 赞同：3
> 
> 时间：2012-05-11T17:33:19.680
> 
> 标签：xml, r, proxy, web-scraping

我正在尝试使用 R 中的 XML 包从访问受限的网站（我机构的图书馆允许我访问）中抓取数据。该库允许我使用 EZproxy 进行访问。

```
base <- "the URL"
tabs <- readHTMLTable(base) 
```

这些行给了我下面的输出。饼干似乎发生了什么事。我电脑上的两个浏览器都启用了 cookie。如何成功地从网站上抓取数据？提前致谢！

```
$`NULL`
                                                                                                                                                                          V1
1                                                                                                                                                                           
2                                                                                                                                                           Cookies disabled
3                                                                                                                                                                           
4 Your browser currently does not accept cookies.\rCookies need to be enabled for Scopus to function properly.\rPlease enable session cookies in your browser and try again.

$`NULL`
  V1 V2 V3
1         

$`NULL`
                V1
1 Cookies disabled

$`NULL`
  V1
1   
2   
3 
```

# python - 如何在 Python 中从网站中提取表格

> ID：10556048
> 
> 赞同：17
> 
> 时间：2012-05-11T17:33:41.490
> 
> 标签：python, urllib

这里，

```
http://www.ffiec.gov/census/report.aspx?year=2011&state=01&report=demographic&msa=11500 
```

这里有张桌子。我的目标是提取表格并将其保存到 csv 文件中。我写了一段代码：

```
import urllib
import os

web = urllib.urlopen("http://www.ffiec.gov/census/report.aspx?year=2011&state=01&report=demographic&msa=11500")

s = web.read()
web.close()

ff = open(r"D:\ex\python_ex\urllib\output.txt", "w")
ff.write(s)
ff.close() 
```

我从这里输了。任何人都可以在这方面提供帮助？谢谢！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2017-06-12T18:36:46.797

[Pandas](http://pandas.pydata.org/)可以直接执行此操作，让您不必自己解析 html。[`to_html()`](http://pandas.pydata.org/pandas-docs/version/0.20/generated/pandas.read_html.html)从您的 html 中提取所有表并将它们放入数据框列表[中](https://pandas.pydata.org/pandas-docs/stable/dsintro.html)。 [`to_csv()`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)可用于将每个数据帧转换为 csv 文件。对于您示例中的网页，相关表是最后一个，这就是我`df_list[-1]`在下面的代码中使用的原因。

```
import requests
import pandas as pd

url = 'http://www.ffiec.gov/census/report.aspx?year=2011&state=01&report=demographic&msa=11500'
html = requests.get(url).content
df_list = pd.read_html(html)
df = df_list[-1]
print(df)
df.to_csv('my data.csv') 
```

如果您愿意，只需一行即可完成：

```
pd.read_html(requests.get(<url>).content)[-1].to_csv(<csv file>) 
```

**PS**只要确保您已经提前安装了`lxml`、`html5lib`和软件包。`BeautifulSoup4`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T17:41:49.247

所以本质上你想解析`html`文件以从中获取元素。您可以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)或[lxml](http://lxml.de/)来完成此任务。

您已经有了使用`BeautifulSoup`. 我将使用以下方法发布解决方案`lxml`：

```
from lxml import etree
import urllib.request

web = urllib.request.urlopen("http://www.ffiec.gov/census/report.aspx?year=2011&state=01&report=demographic&msa=11500")
s = web.read()

html = etree.HTML(s)

## Get all 'tr'
tr_nodes = html.xpath('//table[@id="Report1_dgReportDemographic"]/tr')

## 'th' is inside first 'tr'
header = [i[0].text for i in tr_nodes[0].xpath("th")]

## Get text from rest all 'tr'
td_content = [[td.text for td in tr.xpath('td')] for tr in tr_nodes[1:]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T18:56:29.720

我会推荐 BeautifulSoup，因为它具有最多的功能。我修改了一个我在网上找到的表格解析器，它可以从网页中提取所有表格，只要没有嵌套表格。一些代码特定于我试图解决的问题，但它应该很容易修改以供您使用。这是过去的bin链接。

[http://pastebin.com/RPNbtX8Q](http://pastebin.com/RPNbtX8Q)

您可以按如下方式使用它：

```
from urllib2 import Request, urlopen, URLError
from TableParser import TableParser
url_addr ='http://foo/bar'
req = Request(url_addr)
url = urlopen(req)
tp = TableParser()
tp.feed(url.read())

# NOTE: Here you need to know exactly how many tables are on the page and which one
# you want. Let's say it's the first table
my_table = tp.get_tables()[0]
filename = 'table_as_csv.csv'
f = open(filename, 'wb')
with f:
    writer = csv.writer(f)
    for row in table:
        writer.writerow(row) 
```

上面的代码是一个大纲，但是如果你使用来自 Pastbin 链接的表解析器，你应该能够到达你想去的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:42:15.440

您需要将表格解析为内部数据结构，然后以 CSV 格式输出。

用于`BeautifulSoup`解析表。 [这个问题](https://stackoverflow.com/questions/2870667/how-to-convert-an-html-table-to-an-array-in-python)是关于如何做到这一点的（接受的答案使用版本 3.0.8，它现在已经过时了，但您仍然可以使用它，或者将说明转换为使用 BeautifulSoup 版本 4）。

一旦您在数据结构中拥有表格（在这种情况下可能是列表列表），您可以使用[csv.write](http://docs.python.org/library/csv.html#writer-objects)将其写出来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T17:42:41.457

看看[BeautifulSOup](http://www.crummy.com/software/BeautifulSoup/)模块。在[文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)中，您会发现许多解析 html 的示例。

同样对于 csv 你有现成的解决方案 - [csv 模块](http://docs.python.org/library/csv.html)。

这应该很容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T17:42:59.333

用 BeautifulSoup查看这个答案[解析表并写入文本文件](https://stackoverflow.com/questions/2224602/parsing-table-with-beautifulsoup-and-write-in-text-file)。也使用谷歌与下一个词“python beautifulsoup”

# ruby-on-rails - 将 URL 传递给辅助方法中的代码。

> ID：10556050
> 
> 赞同：0
> 
> 时间：2012-05-11T17:33:55.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我创建了一个 Foo 控制器，Foo 视图允许用户输入和提交 URL。在我的 Foo 助手中，我有一段代码可以抓取用户输入的 URL（使用 nokogiri）。如何将从用户收到的 url 传递给帮助程序，以便可以解析 URL 并将其保存到数据库？我应该以不同的方式进行设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:44:38.800

> 在 Rails 3 中存档的一种方法是在控制器中调用 view_context 来为控制器创建一个新的 ActionView 实例，然后通过控制器中的这个实例可以使用所有辅助方法。

```
view_context.scrape_url_method_in_helper 
```

或者在 FooController 中执行此操作

```
include FooHelper 
```

另外，请阅读下面 rik.vanmechelen 的评论。

# css - 使用 nth:child 将 CSS 声明应用于多个元素

> ID：10556058
> 
> 赞同：0
> 
> 时间：2012-05-11T17:34:47.997
> 
> 标签：css, css-selectors

是否可以将一个 CSS 声明应用于多个 HTML 元素`nth-child`？

例如，我有一个嵌套列表，我想将背景颜色红色应用于列表项目 1，绿色用于列出项目 2 到 4，蓝色用于列出项目 5 到 8，黄色用于列出项目 9，仅使用 4 个 CSS 声明。

```
<ul id="nav">
  <li><a href="#">Home</a></li>
  <li><a href="#">About</a>
      <ul>
         <li><a href="#">Our Team</a></li>
         <li><a href="#">Our Goal</a></li>
      </ul>
  </li>
  <li><a href="#">Media</a>
      <ul>
         <li><a href="#">NLC in the News</a></li>
         <li><a href="#">Photos</a></li>
         <li><a href="#">Videos</a></li>
      </ul>
  </li>
  <li><a href="#">Events</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:41:29.257

我在这里看到 4 个外部`li`元素（主页、关于、媒体、事件）。如果这些对应于您所指的 4 个 CSS 声明（实际上是*rules*`:nth-child()` ），那么这只是解决方案的一部分：

```
#nav > li:nth-child(1) {
    background-color: red;
}

#nav > li:nth-child(2), #nav > li:nth-child(2) li {
    background-color: green;
}

#nav > li:nth-child(3), #nav > li:nth-child(3) li {
    background-color: blue;
}

#nav > li:nth-child(4) {
    background-color: yellow;
} 
```

如果您正在寻找适用于第 n 个外部`li`及其所有子`li`的公式，那么就是这样：

```
/* Of course, substitute n with the actual number */
#nav > li:nth-child(n), #nav > li:nth-child(n) li 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:41:00.487

## 使用子组（就像你一样）

好吧，在您的情况下，这更容易，因为它们是分组的。[这行得通](http://jsfiddle.net/9Y6nS/)。

```
#nav > li:nth-child(1) {background-color: red;}
#nav > li:nth-child(2), 
#nav > li:nth-child(2) > ul > li {background-color: green;}
#nav > li:nth-child(3), 
#nav > li:nth-child(3) > ul > li {background-color: blue;}
#nav > li:nth-child(4) {background-color: yellow;} 
```

## 对于单个列表（就像其他人可能有的那样）

*如果它都是一个 list 也是可能的*，但是您需要允许级联来提供帮助。[看这个例子](http://jsfiddle.net/9Y6nS/4/)：

**HTML**

```
<ul id="nav"> 
  <li><a href="#">Home</a></li> 
  <li><a href="#">About</a></li> 
  <li><a href="#">Our Team</a></li> 
  <li><a href="#">Our Goal</a></li> 
  <li><a href="#">Media</a></li> 
  <li><a href="#">NLC in the News</a></li> 
  <li><a href="#">Photos</a></li> 
  <li><a href="#">Videos</a></li>   
  <li><a href="#">Events</a></li> 
</ul> 
```

**CSS**

```
#nav > li:nth-child(1) {background-color: red;} 
#nav > li:nth-child(n+2) {background-color: green;} 
#nav > li:nth-child(n+5) {background-color: blue;} 
#nav > li:nth-child(n+9) {background-color: yellow;} 
```

# iphone - 移动录音的方向问题

> ID：10556063
> 
> 赞同：2
> 
> 时间：2012-05-11T17:35:16.450
> 
> 标签：iphone, video, ffmpeg

当我使用 FFMPEG 转换来自 iPhone 4 的 .mov 文件和来自 Android 的 .3gp 文件时。我需要将视频旋转 90 度，但 iPhone 4s 需要 180 度...

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:10:51.957

我不记得 Android 是如何处理这个问题的，但 iPhone 会在 mov 文件元数据中记录方向信息。根据录制时相机的握持方式，视频可能需要 0、90、180 甚至 270 度旋转才能在转换后直立播放。 ~~到目前为止，我不知道 ffmpeg 有任何添加来解析这个元数据，所以你必须手动使用`ffprobe -show_streams`或类似的东西，然后适当地设置旋转。~~

**更新**：正如[kibitzer 指出的那样，](https://stackoverflow.com/a/10591807/85950) ffmpeg 现在确实检测到视频已旋转，但尚未提供自动旋转修复。相反，您仍然必须解析旋转信息并使用 、 和 视频 过滤器的组合`transpose`来`vflip`正确`hflip`旋转视频。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T22:18:21.537

较新的 ffmpeg 返回一个*rotate:*元数据标头（当您运行时`ffmpeg -i`），它指定视频旋转的角度，因此您不必自己解析旋转矩阵，只需使用 ffmpeg 的过滤器旋转视频即可。

例如，如果 ffmpeg 输出*rotate: 90*那么你会运行类似：

`ffmpeg -y -i rotated_vid.mov -vf "transpose=1" correct_video.avi`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:17:21.440

我使用一个名为 mediainfo 的程序，它显示方向角度并输入 ffmpeg 选项：

-vf %旋转%

ffmpeg 在 95% 的情况下理解方向，但在某些情况下，在某些硬件中......

# iphone - UITextView 中的字体大小有点小

> ID：10556064
> 
> 赞同：0
> 
> 时间：2012-05-11T17:35:19.613
> 
> 标签：iphone, uifont

**如何将UITextView**中文本的字体大小设置为最大，以便轻松阅读。

目前我正在使用这个，我已经尝试了所有的**UIFonts**，但都是不可读的。

```
self.textView.font = [UIFont fontWithName:@"Georgia-Bold" size:12]; 
```

任何想法如何在不使用**UIFonts**的情况下使用更大的字体大小。

有两个 UITextView ，它们的大小是

```
self.textView = [[[UITextView alloc] initWithFrame:CGRectMake(10, 283, 300, 55)]autorelease];

self.textView = [[[UITextView alloc] initWithFrame:CGRectMake(10, 339, 300, 80)]autorelease]; 
```

文本字体大小要小一点，以便它易于阅读并适合此 UITextViews。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:36:45.360

您可以在设置大字体大小时使用 UILabel 的属性[adjustsFontSizeToFitWidth 。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:55:53.613

```
self.textView.font = [UIFont fontWithName:@"System" size:16]; 
```

您是否尝试过“系统”我认为这是默认字体。

# c++ - 是否有可以在一条指令中执行多个 SQL 语句（如在脚本中）的 c++（MFC）数据库对象？

> ID：10556065
> 
> 赞同：2
> 
> 时间：2012-05-11T17:35:22.750
> 
> 标签：c++, mfc

是否有可以在一条指令中执行多个 SQL 语句（如在脚本中）的 c++（最好是 MFC）数据库对象？像这样 ：

```
DatabaseObject.RunSQL("Insert into GN_Version values (1,2,3,4); Insert into GN_Version values (5,2,3,4); Insert into GN_Version values (3,2,3,4);"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:12:51.767

经过一番研究，我发现使用 SQL Server ODBC 驱动程序，[`CDatabase.ExecuteSQL`](http://msdn.microsoft.com/en-us/library/67cze9b7.aspx)可以在一条指令中执行多条语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:24:46.707

多年来一直使用 MFC 和 SQL Server。从来没有遇到过这样的功能。通常，会涉及到一些标记器来完成此操作。

作为比较，[SQLite](http://www.sqlite.org/)确实通过其 API 支持此类多语句。

# java - 在 Java 应用程序中查找线程创建的来源

> ID：10556066
> 
> 赞同：18
> 
> 时间：2012-05-11T17:35:25.193
> 
> 标签：java, multithreading, profiling

我正在开发一个存在线程问题的 Java 应用程序。

在使用附加了 Netbeans 分析器的应用程序一段时间后，我可以看到创建了几个线程。他们中的大多数完成了一些`.5 seconds`。我只能找到应用程序中使用的 SwingWorkers。

此外，分析器显示的大多数线程是普通线程，而不是 SwingWorkers。除非这些线程是由 SwingWorker 间接创建的，否则我怀疑应用程序使用的某个库正在创建它们。

现在我想删除这个问题。但是我找不到确定线程创建来源的方法。如果可以，请建议一些其他分析器/工具，通过它们我可以找到线程创建的来源（*方法*）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T17:58:22.557

如果使用 Eclipse 及其调试器是一个选项，您可以尝试以下操作：

*   将代码导入 Java 项目。
*   Ctrl-Shift-T（打开类型），输入“线程”。Thread 类的二进制源代码编辑器打开。
*   在大纲视图中选择所有线程构造函数，使用上下文菜单“切换方法断点”。这会为构造函数创建断点。
*   运行和调试。

或者

您可以获得[Yourkit Java profiler](http://www.yourkit.com/)，它也可用于评估。它可以显示在应用程序中创建的线程，包括它们的堆栈跟踪（也在线程完成之后）。它没有显示线程的创建位置，但线程的堆栈跟踪可能会为您提供有关所涉及库的一些线索。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T19:39:04.387

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)可以做到这一点。线程监视器视图显示创建线程的堆栈跟踪 - 如果当时 CPU 记录处于活动状态：

![在此处输入图像描述](../Images/a83c31be9247ba578ad9965f018653bd.png)

免责声明：我公司开发JProfiler

# php - PHP 的默认 ./configuration 选项是什么？

> ID：10556071
> 
> 赞同：0
> 
> 时间：2012-05-11T17:35:38.447
> 
> 标签：php, mysql

PHP 的默认 ./configuration 选项是什么？

我的基本要求是 PDO 和 mysql。

我需要在 ./configuration 中添加哪些选项？

我的 linux 发行版的 yum repo 不支持 mysql，所以我需要编译 PHP 源代码 :(

下面是我使用 yum install php 时的 phpinfo() 输出。

'

> ./configure''--build=x86_64-redhat-linux-gnu'''--host=x86_64-redhat-linux-gnu'''--target=x86_64-redhat-linux-gnu''--program-prefix= ' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '-- datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir= /usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir= lib64' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear''--with-bz2' '--with-curl' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/ usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir= /usr' '--with-openssl' '--with-png' '--with-pspell' '--with-expat-dir=/usr' '--with-pcre-regex=/usr' '- -with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem ' '--enable-sysvshm' '--enable-sysvmsg' '--enable-track-vars' '--enable-trans-sid' '--enable-yp' '--enable-wddx' '-- with-kerberos''--enable-ucd-snmp-hack''--with-unixODBC=shared,/usr' '--enable-memory-limit' '--enable-shmop' '--enable-calendar' '--enable-dbx' '--enable-dio' ' --with-mime-magic=/usr/share/file/magic.mime' '--without-sqlite' '--with-libxml-dir=/usr' '--with-xml' '--with- system-tzdata' '--with-apxs2=/usr/sbin/apxs' '--without-mysql' '--without-gd' '--without-odbc' '--disable-dom' '--disable -dba' '--without-unixODBC' '--disable-pdo' '--disable-xmlreader' '--disable-xmlwriter'--without-sqlite' '--with-libxml-dir=/usr' '--with-xml' '--with-system-tzdata' '--with-apxs2=/usr/sbin/apxs' '- -without-mysql' '--without-gd' '--without-odbc' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-pdo' '--禁用 xmlreader''--禁用 xmlwriter'--without-sqlite' '--with-libxml-dir=/usr' '--with-xml' '--with-system-tzdata' '--with-apxs2=/usr/sbin/apxs' '- -without-mysql' '--without-gd' '--without-odbc' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-pdo' '--禁用 xmlreader''--禁用 xmlwriter'

```
vim mysql.ini
; Enable mysql extension module
extension=mysql.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:46:58.333

尝试运行`yum install php-mysql`并查看是否将 MySQL 扩展添加到 PHP。

您可以运行`yum search php`以列出可以安装到 PHP 中的其他模块，例如`php-gd`等`php-pdo`。

# java - Android 如何复制 EditText 可绘制背景？

> ID：10556073
> 
> 赞同：0
> 
> 时间：2012-05-11T17:35:52.330
> 
> 标签：java, android, drawable, background-color

当验证失败时，我想更改我的edittext的背景颜色为红色，然后，当用户开始更正它时，返回原始颜色。

EditText 有圆角边框，因此在这里使用*setBackgroundColor( )*不起作用，因为它绘制了一个丑陋的矩形而不是漂亮的圆角矩形。

我试图保存背景并在之后恢复它。并使用新的 bakground 将其涂成红色。下面的代码不起作用，因为*tv.getBackground()*返回对**originalBg**和**errorBg**的相同引用。当我将滤色器设置为**errorBg 时**，我实际上也将其更改为**originalBg**。

如何将背景对象**复制**到**errorBg 中**，以便在那里更改颜色？

```
 final Drawable originalBg = tv.getBackground();
    final Drawable errorBg = tv.getBackground();   <-- this does not create a new Drawable, just the same reference
    errorBg.setColorFilter(0xFFff6347, Mode.MULTIPLY);
    tv.setBackgroundDrawable(errorBg);
    tv.invalidate();
    tv.addTextChangedListener(new TextWatcher() {

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            tv.setBackgroundDrawable(originalBg);
            tv.invalidate();
        }

        public void afterTextChanged(Editable s) {}

        public void onTextChanged(CharSequence s, int start, int before, int count) {}

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:43:44.143

您是否尝试过创建副本：

```
 final Drawable originalBg = tv.getBackground();
 final BitmapDrawable errorBg = new BitmapDrawable(getResources(), (BitmapDrawable) tv.getBackground(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:47:52.683

您可以使用 setColorFilter(null) 删除颜色过滤器

```
tv.getBackgroundDrawable().setColorFilter(0xFFff6347, Mode.MULTIPLY);
tv.invalidate();
tv.addTextChangedListener(new TextWatcher() {

   public void beforeTextChanged(CharSequence s, int start, int count, int after) {
               tv.getBackgroundDrawable().setColorFilter(null);
               tv.invalidate();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:44:52.630

您可以创建一个 xml 文件，该文件定义一个带有圆角的可绘制对象以用作您的背景。

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#ff6347"/>
    <corners android:radius="3dp"/>
</shape> 
```

将此文件放在您的 drawables 文件夹中，并使用`setBackgroundDrawable()`EditText 上的方法来使用它。您可能需要使用颜色和圆角半径来获得您想要的效果。不完全是您问题的答案，但希望它可以提供帮助。

# asp.net - 如何使用验证码创建自动电话呼叫

> ID：10556078
> 
> 赞同：0
> 
> 时间：2012-05-11T17:36:11.660
> 
> 标签：asp.net, asp.net-mvc, web-services, google-maps

我们将通过拨打他们列出的电话号码为我们的网络用户分配一个四位数的验证码。

这很像 Google Map for Business 的服务。在他们的服务中，如果网络用户想要声明列出的商店的所有权，用户可以请求拨打该公司的公开电话号码并获取验证码。正确输入该代码后，Google 地图会确认用户帐户是该企业的所有者。

但是你是怎么做到的？谁能给我一些见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:35:19.503

[Twilio Cloud Communications – 用于语音、VoIP 和短信的 API](http://www.twilio.com/ "Twilio Cloud Communications – 用于语音、VoIP 和短信的 API")

这个服务怎么样？

# unit-testing - MTM 编码 UI 测试手动执行：“未找到记录”

> ID：10556079
> 
> 赞同：1
> 
> 时间：2012-05-11T17:36:13.810
> 
> 标签：unit-testing, testing, coded-ui-tests, microsoft-test-manager

我已经进行了一些编码的 UI 测试来测试我正在处理的应用程序。我遵循以下帖子：[如何从 MTM 运行编码的 UI 测试](http://msdn.microsoft.com/en-us/library/dd553270.aspx)作为指导，以及以下关于如何创建假构建的帖子：[如何创建假构建定义和假构建](http://blogs.msdn.com/b/jpricket/archive/2010/02/23/creating-fake-builds-in-tfs-build-2010.aspx)

因此，在设置基础架构后，我尝试从 Microsoft 测试管理器 (MTM) 运行测试。虽然 MTM 不会中断或抛出错误，但它向​​我报告的结果是它找不到编码的 UI 测试记录。

在查看第一个链接的内容（如何从 MTM 运行编码的 UI 测试）时，我注意到有一小段文字说`"You must create a build definition that just has a share location added that is where your assemblies for your tests are located."`

这到底是什么意思呢？我该怎么做呢？我的构建定义将程序集放入 中`\\machine\share`，因此我复制了编码的 ui 测试，但我仍然得到相同的结果。

有什么我想念的吗？

谢谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:58:21.447

好吧，我不喜欢留下未回答的问题，所以我想回到这个问题。

构建定义的放置文件夹是定义 MTM 将在何处查找编码的 ui 测试记录/dll 的文件夹。

为了使其工作，只需构建和编译他们的测试/编码的 ui 测试，并将生成的程序集和资源放在构建定义中定义的文件夹中。

干杯!

# eclipse - 以递归方法访问 UI 时使用 SWT Eclipse 的线程

> ID：10556083
> 
> 赞同：0
> 
> 时间：2012-05-11T17:36:49.680
> 
> 标签：eclipse, multithreading, swt

我有一个这样的递归方法：

```
 protected void executeAction( TreeItem ti )
{
    boolean isChecked = ti.getChecked();

    if ( isChecked )
    {
        Somedata data = (SomeData) ti.getData();
        String action = data.getSelectedAction();
        ActionManager am = data.getActionManager();
        AbstractActionAgent agent = am.getAction( action );
        if ( agent != null )
        {                
            agent.updateModel( data );   //Makes a server trips and long computation               
        }
    }
    int itemcnt = ti.getItemCount();
    TreeItem[] childTrees = ti.getItems();

    for ( int i = 0; i < itemcnt; i++ )
    {
        executeAction( childTrees[i] );
    }
} 
```

我的 updateModel 方法冻结了 UI，所以我尝试使用 Job，但我的问题是我希望只为选中的 TreeItem 执行更新模型，它应该遵循选中的 TreeItems 的顺序。如果我使用 Job，我无法控制首先处理哪个选中的 TreeIem。我还尝试将整个 executeAction 方法放在一个 Job 中，但在访问 TreeItem 时遇到了无效线程。

我需要一些想法，以便我可以在保持顺序而不冻结我的 UI 的同时创建一个新线程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:16:28.833

你可以试试这个。在树中收集模型对象并在单独的作业中运行该 updateModel。下面的代码不运行。你可能需要稍微调整一下。

```
 class Node {
    private SomeData nodeData;
    private List<Node> children = new ArrayList(); 
```

// 创建 getter, setter.. }

```
protected void executeAction( TreeItem ti, Node parentNode ) {
boolean isChecked = ti.getChecked();
Node n = null;
if ( isChecked )
{
    Somedata data = (SomeData) ti.getData();
    if (parentNode != null) {
       n = new Node();
       n.setNodeData(data);
       parentNode.addChild(n);
    }

}
int itemcnt = ti.getItemCount();
TreeItem[] childTrees = ti.getItems();

for ( int i = 0; i < itemcnt; i++ )
{
    executeAction( childTrees[i],n );
} 
```

}

# c# - C# - 如何在读取（迭代）MemoryStream 时管理 ProgressEvent？

> ID：10556084
> 
> 赞同：0
> 
> 时间：2012-05-11T17:36:59.677
> 
> 标签：c#, progress-bar, memorystream

我正在编写一个 ClassLibrary，它将读取一个`MemoryStream`并在下一个方法上再次写入另一个`MemoryStream`..

我想要做的是提供`"something"`在执行阅读和写作循环时将处理进度事件......

阅读和写作不是由表单处理的。因此，在阅读过程中无法更新 ProgressBar

我不知道从哪里开始..

所以我要求一些建议和解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:42:20.047

你看过[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)课了吗？您可以将读/写功能包装在 a 中`BackgroundWorker`，并设计一种引发`ProgressChanged`事件的方法（每读/写这么多字节等）。您的表单 (UI) 可以订阅`OnProgressChanged`将更新进度条或其他内容的进度的事件。

**编辑：**这是对您需要完成的实际工作的非常概括的描述。但是在上面的链接中很好地解释了设置异步后台工作程序所需的所有小事情。对你来说最难的部分是结合 s 的读/写`MemoryStream`，以及计算进度。

# javascript - 使用 BrowserAction 设置背景图像

> ID：10556095
> 
> 赞同：0
> 
> 时间：2012-05-11T17:38:18.760
> 
> 标签：javascript, google-chrome, background, google-chrome-extension, browser-action

我正在学习如何编写 chrome 扩展程序，我发现了一个示例，其中使用浏览操作可以更改网页的背景颜色，我正在尝试做一些非常相似的事情，更改背景图像，但出于某种原因......它不起作用，js函数是：

```
function click(e) {
  chrome.tabs.executeScript(null,
      {code:"document.body.style.background=url('ffrontier.jpg')"});
  window.close();
} 
```

我很确定这与我的sintax有关，但我无法弄清楚，有人可以帮助我吗？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T05:36:19.633

首先，您需要在 manifest.json 文件中指定资源（参见[Web Accessible Resources](https://developer.chrome.com/extensions/manifest.html#web_accessible_resources)），如下所示：

```
"web_accessible_resources": ["ffrontier.jpg"] 
```

其次，您应该像这样指定完整的图片网址：

```
function click(e) {
  chrome.tabs.executeScript(null,
      {code:"var imgURL = chrome.extension.getURL('ffrontier.jpg'); document.body.style.backgroundImage='url(' + imgURL + ')'"});
  window.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T02:18:50.580

更新：只有像 url( [http://www.stackoverflow.com](http://www.stackoverflow.com) ) 这样的外部 url 有效，而不是本地文件。对不起。我只是删除了引号`url()`，它对我有用！

```
function click(e) {
  chrome.tabs.executeScript(null,
      {code:"document.body.style.backgroundImage = 'url(ffrontier.jpg)'"});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:39:28.170

您需要更改`background-image`属性，而不是`background`属性（指的是页面的背景颜色）。

```
function click(e) {
  chrome.tabs.executeScript(null,
      {code:"document.body.style[background-image]=\"url('ffrontier.jpg')\""});
  window.close();
} 
```

需要注意的一点：`document.body.style.background-image`将引发错误，因为您不能`-`在变量名中使用该符号。您必须改用对象语法：

```
document.body.style[background-image] 
```

# mongodb - 使用 C# 将嵌套文档插入 MongoDB

> ID：10556105
> 
> 赞同：4
> 
> 时间：2012-05-11T17:39:22.200
> 
> 标签：mongodb, mongodb-.net-driver

我正在尝试使用 C# 将嵌套文档插入到 MongoDB 中。我有一个名为类别的集合。在该集合中必须存在具有 2 个数组、一个命名类别和一个命名标准的文档。在这些数组中必须存在具有自己 ID 的新文档，这些文档还包含上面列出的同名数组。以下是我到目前为止的内容，但我不确定如何进行。如果您查看代码，我想要做的是添加嵌套在类别文档中的类别数组下的“namingConventions”文档，但是 NamingConventions 也必须具有唯一的 ID。

在这一点上，我不确定我是否已经以最好的方式完成了其中的任何一项，所以我愿意接受关于这整个事情的任何和所有建议。

```
namespace ClassLibrary1
{
using MongoDB.Bson;
using MongoDB.Driver;
public class Class1
{
       public void test()
        {
            string connectionString = "mongodb://localhost";
            MongoServer server = MongoServer.Create(connectionString);
            MongoDatabase standards = server.GetDatabase("Standards");
            MongoCollection<BsonDocument> categories = standards.GetCollection<BsonDocument>("catagories");

            BsonDocument[] batch = {
                                       new BsonDocument { { "categories", new BsonArray {} },
                                                        { "standards", new BsonArray { } }  },
                                       new BsonDocument { { "catagories", new BsonArray { } },
                                                        { "standards", new BsonArray { } }  },
                                   };
            categories.InsertBatch(batch);

            ((BsonArray)batch[0]["categories"]).Add(batch[1]);
            categories.Save(batch[0]);           
        }
    }
} 
```

为了清楚起见，这就是我需要的：

我正在做的是建立一个编码标准网站。该公司希望将所有标准存储在 MongoDB 中的树中。每样东西都必须有一个唯一的 ID，这样除了作为树被查询之外，它也可以被自己查询。一个例子可能是：

```
/* 0 */
{
  "_id" : ObjectId("4fb39795b74861183c713807"),
  "catagories" : [],
  "standards" : []
}

/* 1 */
{
  "_id" : ObjectId("4fb39795b74861183c713806"),
  "categories" : [{
      "_id" : ObjectId("4fb39795b74861183c713807"),
      "catagories" : [],
      "standards" : []
    }],
  "standards" : []
} 
```

现在我已经编写了代码来实现这一点，但问题似乎是当我将对象“0”添加到对象“1”中的类别数组时，它不是在进行引用，而是在复制它。这不会发生，因为如果进行更改，将对原始对象“0”进行更改，因此它们不会被推送到类别数组中正在创建的副本，至少这是发生在我身上的事情。我希望这能清除我正在寻找的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T17:47:03.133

因此，根据您的最新评论，这似乎是您正在寻找的实际结构：

```
{
    _id: ObjectId(),

    name: "NamingConventions",

    categories: [
        {
            id: ObjectId(),
            name: "Namespaces",
            standards: [
                {
                    id: ObjectId(),
                    name: "TitleCased",
                    description: "Namespaces must be Title Cased."
                },
                {
                    id: ObjectId().
                    name: "NoAbbreviations",
                    description: "Namespaces must not use abbreviations."
                }
            ]
        },
        {
            id: ObjectId(),
            name: "Variables",
            standards: [
                {
                    id: ObjectId(),
                    name: "CamelCased",
                    description: "variables must be camel cased."
                }
            ]
        }
    ]
} 
```

假设这是正确的，那么以下是插入其中之一的方法：

```
var collection = db.GetCollection("some collection name");

var root = new BsonDocument();
root.Add("name", "NamingConventions");
var rootCategories = new BsonArray();
rootCategories.Add(new BsonDocument
{
   { "id": ObjectId.GenerateNewId() },
   { "name", "Namespaces" },
   { "standards", new BsonArray() }
});

root.Add("categories", rootCategories);
//etc...
collection.Save(root); 
```

希望有帮助，如果没有，我放弃:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:07:09.997

所以，我想我对你的要求感到困惑。如果您只想将namingConventions 文档存储在数组中，则不需要它们的集合。相反，只需将它们添加到 bson 数组并存储它们。

```
var categoriesCollection = db.GetCollection<BsonDocument>("categories");

var category = new BsonDocument();
var namingConventions = new BsonArray();
namingConventions.Add(new BsonDocument("convention1", "value"));

category.Add("naming_conventions", namingConventions);

categoriesCollection.Insert(category); 
```

这将为一个类别创建一个新文档，在其中创建一个名为 Naming_conventions 的数组，其中包含一个名为“convention1”的元素和一个值为“value”的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:31:15.767

我也不太确定您要完成什么。也许如果您发布了一些 JSON 格式的示例文档，我们可以向您展示 C# 代码来编写与之匹配的文档。

或者，如果您想讨论您的架构，那么在 JSON 而不是 C# 的上下文中也可以更好地完成，并且一旦确定了架构，我们就可以讨论如何在 C# 中将文档写入该架构。

在您的原始描述中听起来不正确的一件事是“在该集合中必须存在 2 个数组”的声明。集合只能包含文档，不能包含数组。如果需要，文档本身可以包含数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-29T02:36:35.653

```
var filter = Builders<CollectionDefination>.Filter.Where(r => r._id== id);
var data = Builders<CollectionDefination>.Update.Push(f=> 
    f.categories,categoriesObject);
await _dbService.collection.UpdateOneAsync( filter,data); 
```

注意：确保嵌入的文档类型 [Categories] 是数组。

# android - 在 Android webview 上使用本地存储

> ID：10556111
> 
> 赞同：5
> 
> 时间：2012-05-11T17:39:47.177
> 
> 标签：android, webview, android-webview, local-storage

我正在尝试使用 Android 代码：我想使用 HTML 5 本地存储来存储一个值。在这个练习中，我使用了一个和这个一样简单的页面： [http ://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_webstorage_local_clickcount](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_webstorage_local_clickcount)

我的清单确实允许我上网，它的 min-sdk 为 7。

这是我的java代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    webview = (WebView) findViewById(R.id.webview);
    WebView webView = (WebView) findViewById(R.id.webview);
    webView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setDatabasePath("");
    webSettings.setDomStorageEnabled(true);
    webview.setWebChromeClient(new WebChromeClient());
    webview.loadUrl("http://www.xyz.com/test.html");
    ///xyz.com/test.html is a sample  :)
    webview.setWebViewClient(new HelloWebViewClient());
} 
```

我的问题是当我关闭应用程序时，本地存储的值不再存在。我可以使用默认浏览器浏览到同一页面，并且即使在关闭模拟器后该值也是持久的，这正是我正在寻找的行为。

这可能是一件非常简单的事情……有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T19:59:20.627

看来空字符串 DatabasePath 是问题所在。我尝试了类似的代码并且使用空字符串路径，应用程序退出后该值不会持续存在。如果我定义了一个特定的数据库路径，该值将按预期保留。

尝试：

```
webSettings.setDatabasePath("/data/data/"+this.getPackageName()+"/databases/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T15:59:29.053

如果您的应用程序使用多个 webview，您仍然会遇到麻烦：localStorage 未在所有 webview 之间正确共享。

如果您想在多个 web 视图中共享相同的数据，唯一的方法是使用 java 数据库和 javascript 接口修复它。

github上的[这个页面显示了如何做到这一点。](https://github.com/didimoo/AndroidLocalStorage)

希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T08:57:56.110

无法让它在所有设备上运行（尤其是使用 ICS）——即使使用数据库路径、启用 DOMStorage 等——使用 cookie 反而帮助了我。

# c++ - 对重载构造函数c ++的模棱两可的调用

> ID：10556113
> 
> 赞同：-2
> 
> 时间：2012-05-11T17:39:57.777
> 
> 标签：c++, constructor, overloading, ambiguous-call

我有这门课

```
class Field
{
    public:
        Field();
        ~Field();
        Field(const std::string& nameP, 
              const int idP , 
              const std::map<int,Field*> sequence=std::map<int,Field*>(), 
              const std::string& constval="",
              const std::string& presP="");
        std::string f_name;
        int f_id;
        std::string f_presence;
        std::string f_const;
        std::map<int,Field*> f_set;
}; 
```

问题是我的 Class Field 可以是一组其他字段，这就是我使用 map 的原因，或者它可以是一个常量值，这就是我使用 const 的原因，或者两者都不是，所以我使用了 3 个不同的构造函数，但是编译器拒绝他们告诉我“C++ 对重载字段的歧义调用......候选人是......）所以现在我试图将所有可能性放在一个中，但编译器再次给我带来了自我最后三个字段以来的大量错误。所以任何人可以告诉我应该怎么做才能让我的三个可能的构造函数?? PS：我真的需要知道关于这个歧义调用的答案，所以请不要继承建议！ps 导致错误的先前代码是这样的

```
class Field
{
    public:
        Field();
        ~Field();
        Field(const std::string& typeP, 
              const std::string& nameP, 
              const int idP , 
              const std::string& presP="");
        Field(const std::string& typeP, 
              const std::string& nameP, 
              const int idP , 
              const std::string& constval, 
              const std::string& presP="");
        Field(const std::string& typeP, 
              const std::string& nameP, 
              const int idP , 
              const std::map<int,Field*> sequence , 
              const std::string& presP="");
    /// field attributes
        std::string f_type;
        std::string f_name;
        int f_id;
        std::string f_presence;
        std::string f_const;
        std::map<int,Field*> f_set;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:11:44.877

这可能是 GCC 错误[（](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=39426)[57、39426](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57)）；它在 GCC 4.6 中工作，在 4.4 中失败。尝试将默认值括在括号中：

```
#include <map>
#include <string>

class Field
{
    public:

        Field();
        ~Field();
        Field(const std::string& nameP,
              const int idP ,
              const std::map<int,Field*> sequence
                =   ( std::map<int,Field*>() ), //<<<---- Fix is to () the default value
              const std::string& constval="",
              const std::string& presP="");
        std::string f_name;
        int f_id;
        std::string f_presence;
        std::string f_const;
        std::map<int,Field*> f_set;
};
int main() {} 
```

# php - 确认框不起作用

> ID：10556116
> 
> 赞同：0
> 
> 时间：2012-05-11T17:40:07.473
> 
> 标签：php, javascript, parsing

```
<input type="button" value="Delete" onclick=show_confirm(http://mydomain.com/delete.php)> 
```

我有这个按钮和这个 JavaScript 函数，但它们不起作用。当我单击按钮时，什么也没有发生。我的代码有什么问题？

```
function show_confirm(url){
   var r = confirm("Do you want to delete this?");
   if (r == true){
       window.navigate(url);
      }
   else{
       alert("You pressed Cancel.");
       }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:41:26.790

在双引号内传递 url。

```
<input type="button" value="Delete" onclick=show_confirm("http://mydomain.com/delete.php")> 
```

工作样本：http: [//jsfiddle.net/93QWJ/](http://jsfiddle.net/93QWJ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:48:20.090

您的 html 格式不正确。

```
<input type="button" value="Delete" onclick=show_confirm(http://mydomain.com/delete.php)> 
```

应该

```
<input type="button" value="Delete" onclick="javascript:show_confirm('http://mydomain.com/delete.php');" /> 
```

仅当`javascript:`页面上还有 VBScript 时才需要，但这是一个好习惯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T17:41:47.057

```
<input type="button" value="Delete" onclick="show_confirm('http://mydomain.com/delete.php')"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:42:44.783

没有像这样的 onclick 函数的引号
：“show_confirm(url)”

# ios - 如何从点击的位置获取 CGPoint？

> ID：10556120
> 
> 赞同：31
> 
> 时间：2012-05-11T17:40:46.220
> 
> 标签：ios, xcode, ipad, touch, cgpoint

我正在为 iPad 开发一个图形计算器应用程序，我想添加一个功能，用户可以点击图形视图中的一个区域来弹出一个文本框，显示他们触摸的点的坐标。我怎样才能从中获得 CGPoint？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-11T18:13:41.790

你有两种方式...

1.

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
  UITouch *touch = [[event allTouches] anyObject];
  CGPoint location = [touch locationInView:touch.view];
} 
```

在这里，您可以从当前视图获取位置...

2.

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[tapRecognizer setNumberOfTapsRequired:1];
[tapRecognizer setDelegate:self];
[self.view addGestureRecognizer:tapRecognizer]; 
```

在这里，当您想对您的特定对象或主视图的子视图做某事时，使用此代码

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-11T17:54:36.480

试试这个

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
  UITouch *touch = [touches anyObject];

  // Get the specific point that was touched
  CGPoint point = [touch locationInView:self.view]; 
  NSLog(@"X location: %f", point.x);
  NSLog(@"Y Location: %f",point.y);

} 
```

如果您希望查看用户将手指从屏幕上抬起的位置而不是触摸的位置，则可以使用“touchesEnded”。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-11-05T06:12:52.563

只是想折腾一个**Swift 4**答案，因为 API 看起来完全不同。

```
override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
    if let touch = event?.allTouches?.first {
        let loc:CGPoint = touch.location(in: touch.view)
        //insert your touch based code here
    }
} 
```

或者

```
let tapGR = UITapGestureRecognizer(target: self, action: #selector(tapped))
view.addGestureRecognizer(tapGR)

@objc func tapped(gr:UITapGestureRecognizer) {
    let loc:CGPoint = gr.location(in: gr.view)  
    //insert your touch based code here
} 
```

在这两种情况下`loc`都将包含在视图中被触摸的点。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-02T06:02:18.897

将 UIGestureRecognizer 与地图视图一起使用可能会更好，更简单，而不是尝试对其进行子类化并手动拦截触摸。

第 1 步：首先，将手势识别器添加到地图视图中：

```
 UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] 
    initWithTarget:self action:@selector(tapGestureHandler:)];
 tgr.delegate = self;  //also add <UIGestureRecognizerDelegate> to @interface
 [mapView addGestureRecognizer:tgr]; 
```

第 2 步：接下来，实现 shouldRecognizeSimultaneouslyWithGestureRecognizer 并返回 YES，以便您的点击手势识别器可以与地图同时工作（否则地图不会自动处理引脚上的点击）：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
shouldRecognizeSimultaneouslyWithGestureRecognizer
    :(UIGestureRecognizer *)otherGestureRecognizer
{
   return YES;
} 
```

第 3 步：最后，实现手势处理程序：

```
- (void)tapGestureHandler:(UITapGestureRecognizer *)tgr
{
   CGPoint touchPoint = [tgr locationInView:mapView];

   CLLocationCoordinate2D touchMapCoordinate 
    = [mapView convertPoint:touchPoint toCoordinateFromView:mapView];

   NSLog(@"tapGestureHandler: touchMapCoordinate = %f,%f", 
    touchMapCoordinate.latitude, touchMapCoordinate.longitude);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-11T17:54:45.787

如果您使用`UIGestureRecognizer`or`UITouch`对象，您可以使用该`locationInView:`方法`CGPoint`在用户触摸的给定视图中检索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T04:53:35.700

```
func handleFrontTap(gestureRecognizer: UITapGestureRecognizer) {
    print("tap working")
    if gestureRecognizer.state == UIGestureRecognizerState.Recognized { 
        `print(gestureRecognizer.locationInView(gestureRecognizer.view))`
    }
} 
```

# java - 我在调色板中的小部件标题，例如（TexField、Layouts、Form Widgets 和 Images & Media）是空白的，我该如何解决这个问题？178173

> ID：10556121
> 
> 赞同：0
> 
> 时间：2012-05-11T17:40:49.853
> 
> 标签：java, android, eclipse, android-layout, android-widget

我正在使用 Eclipse 在 Mac Os 上开发 android 应用程序，但是，TextField、Form Widget、Layouts 和 Images &Media 等文件夹的图形布局组件的标题已经从调色板中消失了，所以我有空白或空标题（没有还有一些小部件的字幕但是，显示了一些小部件）因为我安装了 Eclipse，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:05:26.997

将您的计算机系统语言从您的国家语言切换为英语！调色板中的小部件文件夹无法读取您所在国家/地区的语言，只有英语......固定给我

# javascript - 除了添加调试器之外，有没有更好的方法在 MVC3 应用程序中调试 javascript？

> ID：10556131
> 
> 赞同：0
> 
> 时间：2012-05-11T17:41:44.190
> 
> 标签：javascript, jquery, asp.net-mvc-3

我想在我的 .cshtml 文件中调试 javascript 并添加“调试器；” 很麻烦。

有没有更好的方法在 VS2010 下调试的 .cshtml 文件中调试 javascript？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:48:53.970

对我来说最好的方法一直是在浏览器中打开站点并使用浏览器的开发工具。如今，所有这些都允许设置断点、监视变量等。

# c - fgets 函数不保存字符串中的第一个字母

> ID：10556140
> 
> 赞同：1
> 
> 时间：2012-05-11T17:42:24.980
> 
> 标签：c

我编写了一个程序，它从用户那里获取一个数字，然后从用户那里获取每个数字的名称……例如，如果用户输入数字 10，它将采用 10 个名称并将其放入一个数组中结构......一切都很好，除了当我打印名字时，它跳过了第一个字母......就像我输入名字“Amit”一样，它打印“mit”......我输入的最后一个字符串根本没有保存。这是我写的：

```
const number_candidates; // Getting the number of candidates
#define MAX 256
#define min_candidate 10
#define max_candidate 60000

typedef struct candidate // Getting details for each candidate
{
    char name[MAX];
    int sing_grade;
    int per_grade;
    int cam_grade;
    int sharmanti_grade;
}candidate;

void get_details_candidates(candidate candidate[MAX])
{
 int i = 0;
 printf ("\n");
 for (i = 0 ; i < number_candidates ; i++)
 {
     printf ("Please enter the %d name: ", i + 1);
     fgets (candidate[i].name, MAX, stdin);
     getchar();
 }
} 
```

这里是印刷：

```
 for (i = 0 ; i < number_candidates ; i++)     
{
    printf ("%s\n", candidates[i].name);
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:45:10.840

为什么在 fgets() 之后有 getchar()？我认为这是你的罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T19:06:05.843

`getchar()`之后是吃下一行的`fgets()`第一个字母。

您读取名字的问题可能是由于输入流中的换行符引起的。要在输入循环之前刷新`stdin`，您可以使用以下内容：

```
while((c = getchar()) != '\n' && c != EOF)
/* discard the character */; 
```

我认为`fflush(stdin)`是未定义的行为，所以**不要那样做**。

# facebook-graph-api - 通过 Graph API 来自应用程序的 Facebook 墙贴

> ID：10556141
> 
> 赞同：0
> 
> 时间：2012-05-11T17:42:29.507
> 
> 标签：facebook-graph-api, facebook-wall

我有一个时间线应用程序，它通过 Graph API 创建一个墙贴。贴墙贴说明发帖是App创建的，没问题。但是，应用程序的链接指向 Canvas 页面：[http](http://apps.facebook.com/app_name_space) ://apps.facebook.com/app_name_space 。

我需要指向应用程序时间线版本的链接：http: [//www.facebook.com/pages/PAGENAME/PAGEID? sk=app_APPID](http://www.facebook.com/pages/PAGENAME/PAGEID?sk=app_APPID)

我已经在 Post 调用中尝试了“actions”参数，但这并没有解决问题。

* * *

**重定向画布页面**

由于您不能为此目的使用 301 重定向，这就是我所做的 (asp.net)：

1) 在网站根目录下创建一个名为“canvas”的文件夹。

2）在文件夹中添加一个default.aspx文件（不能使用静态文件作为app登陆页面）

3）将以下javascript添加到head标签：

```
 <script type="text/javascript">

       var parentPageName = '<%=ConfigurationSettings.AppSettings["ParentPageName"]%>';
       var appID = '<%=ConfigurationSettings.AppSettings["AppID"]%>';
       var myHREF = "http://www.facebook.com/" + parentPageName + "?sk=app_" + appID;
       top.location.href = myHREF;                                                        
</script> 
```

4) 将您的 App Canvas 网址更改为指向“画布”文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:31:05.920

这就是它的工作原理，“via”链接指向您的应用程序，而不是安装该应用程序的任意页面，因为它可以安装在任何 Facebook 页面上。

将登陆画布应用程序的用户重定向到页面选项卡，如果这是您想要的

# php - AJAX 无法获取属性 childNodes 的值

> ID：10556144
> 
> 赞同：0
> 
> 时间：2012-05-11T17:42:35.503
> 
> 标签：php, xml, ajax

我正在使用以下代码读取 XML 文件 -

```
var xmlhttp;
if (window.XMLHttpRequest)
{   // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{   // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {

        xmlDoc=xmlhttp.responseXML;

        tmp = xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
        alert ('-' + tmp + '-');
    }
}
xmlhttp.open("GET", "test3.php", true);
xmlhttp.send(); 
```

*   XML 文件

    ```
    <?xml version="1.0" encoding="ISO-8859-1"?>
    <note>
    <to>Tove</to>
    <from>Jani</from>
    </note> 
    ```

如果 XML 文件被称为 xxxx.PHP 或 xxxx.XML 以外的任何内容，我会收到错误“无法获取属性 childNodes 的值”。如果 XML 文件名为 xxxx.XML，它可以正常工作。文件完全相同，唯一的区别是扩展名。

这已经在 FF、Chrome 和 IE 中进行了测试，结果相同。这不是缓存问题。

我需要将扩展​​名设为 PHP，以便为 AJAX 生成动态内容。

这可能与 php.ini / apache.conf 有关还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:07:10.140

为了让您的浏览器将 XML 解释为 XML，服务器必须使用正确的`Content-type`标头 (ie `text/xml`) 发送它。默认情况下，您的服务器只会对`xml`文件扩展名执行此操作。

在您的 PHP 代码中，在输出任何 XML 之前，您可以`Content-type`像这样设置标头：

```
<?php
  header('Content-type: text/xml');
  // (...generate your XML...)
  echo $xml;
?> 
```

# php - 不能在 PHP 中设置任何类/成员变量？

> ID：10556145
> 
> 赞同：0
> 
> 时间：2012-05-11T17:42:38.467
> 
> 标签：php, object

```
class posts
{
    public function __construct($db)
    {
        $this->dbase = $db;
        $test = new post(1, $this->dbase);
    }
}

class post
{
    public function __construct($id, &$j)
    {

        $this->ID = $id;
        $this->dbase = $j;

        var_dump($this); // At this point, $this-ID and $this->dbase are both null.
    }
} 
```

这是我的问题。在“post”类中​​，我可以转出 $j 和 $id 并看到它们都完美通过了。但是，当我尝试设置 $this->ID = $id 或 $this->dbase = $j 时，没有设置任何内容。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:45:36.617

尝试：

```
class post
{
    var ID;
    var dbase;
    public function __construct($id, &$j)
    {

        $this->ID = $id;
        $this->dbase = $j;

        var_dump($this); // At this point, $this-ID and $this->dbase are both null.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:47:30.483

因为 post 类没有属性

试试这个

```
class post
{
    private $ID;
    private $dbase
    public function __construct($id, &$j)
    {

        $this->ID = $i;
        $this->dbase = $j;

        var_dump($this); // At this point, $this-ID and $this->dbase are both null.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:48:45.407

见 `$test->ID`或`$test->dbase`

```
class posts
{
    public function __construct($db)
    {
        $this->dbase = $db;
        $test = new post(1, $this->dbase);

        echo($test->dbase); // Here you can get all infos
    }
}

class post
{
    public function __construct($id, $j)
    {

        $this->ID = $id;
        $this->dbase = $j;
    }
}

new posts('foo'); 
```

# iphone - 在主视图控制器的自定义单元格中使用来自 UIButton 的 IBAction

> ID：10556148
> 
> 赞同：7
> 
> 时间：2012-05-11T17:42:44.320
> 
> 标签：iphone, objective-c, uibutton, nsnotificationcenter, ibaction

我创建了一个带有自己的 .m、.h 和 .xib 文件的自定义单元格。在单元格中，我有一个 UIButton，已添加到 IB 的 xib 中。

我可以在此自定义单元格的 .m 中从 UIButton 接收 IBAction，但实际上，我想将该按钮按下转发到托管表格（以及自定义单元格）的主视图 .m 并在那里使用操作.

在过去的 4 个小时里，我一直在尝试各种方法——我应该使用 NSNotificationCenter 吗？（我已经尝试了很多通知，但无法让它工作，并且不确定我是否应该坚持下去）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T19:42:30.093

您需要在单元格的 .h 文件中使用委托。像这样声明委托

```
@class MyCustomCell;
@protocol MyCustomCellDelegate
- (void) customCell:(MyCustomCell *)cell button1Pressed:(UIButton *)btn;
@end 
```

然后声明字段和属性

```
@interface MyCustomCell:UItableViewCell {
    id<MyCustomCellDelegate> delegate;
}

@property (nonatomic, assign) id<MyCustomCellDelegate> delegate;

@end 
```

在 .m 文件中

```
@synthesize delegate; 
```

并在按钮方法中

```
- (void) buttonPressed {
    if (delegate && [delegate respondToSelector:@selector(customCell: button1Pressed:)]) {
        [delegate customCell:self button1Pressed:button];
    }
} 
```

你的视图控制器必须像这样采用这个协议

.h 文件

```
#import "MyCustomCell.h"

@interface MyViewController:UIViewController <MyCustomCellDelegate>
.....
.....
@end 
```

在 cellForRow 的 .m 文件中：您需要将属性委托添加到单元格的方法

```
cell.delegate = self; 
```

最后你从协议中实现方法

```
- (void) customCell:(MyCustomCell *)cell button1Pressed:(UIButton *)btn {

} 
```

对不起我的英语和代码。从我的电脑上写的，没有 XCODE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T14:31:56.887

我遇到了同样的问题，我通过将单元格子类化到它自己的类中来解决它，并将按钮作为插座放在那里，并用模型中的数据填充单元格，同时使用返回我们当前正在查看的单元格的方法.

例如，如果您有一个 Person 类，并且每个人都有一个名字、一个姓氏和一些朋友。每次单击单元格中的按钮时，特定人的朋友数量就会增加 1。

```
_______________DATA SOURCE___________________________
#import <Foundation/Foundation.h>

@interface Person : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *comment;
@property (nonatomic) NSInteger numberOfFriends;

+(instancetype)personWithName:(NSString *)aName Surname:(NSString *)aSurname;

@end

#import "Person.h"

@implementation Person

+(instancetype)personWithName:(NSString *)aName Surname:(NSString *)aSurname{

    Person *person = [[Person alloc] init];
    [person setName:aName];
    [person setSurname:aSurname];
    [person setNumberOfFriends:0];

    return person;
}

@end

_____________________PERSON CELL________________________

#import <UIKit/UIKit.h>

@interface PersonCell : UITableViewCell

@property (strong, nonatomic) IBOutlet UILabel *friendsNum;
@property (strong, nonatomic) IBOutlet UIButton *friendsBtn;
@property (strong, nonatomic) IBOutlet UILabel *nameLabel;
@property (strong, nonatomic) IBOutlet UILabel *surnameLabel;

@end 
```

我个人创建了一个私有 NSArray 来保存我的 Person 对象的名称，以及一个私有 NSMutableDictionary 来保存我的 Person 对象，并且我将键设置为人名。

```
_____________________PERSON TABLE VIEW________________________    
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    PersonCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    NSString *name = [peopleNames objectAtIndex:indexPath.row];
    Person *person = [people objectForKey:name];

    if(cell == nil)
    {
        cell = [[PersonCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.nameLabel.text = person.name;
    cell.surname.Label.text = person.surname

    [cell.friendsButton addTarget:self action:@selector(moreFriends:) forControlEvents:UIControlEventTouchUpInside];

    cell.friendsNum.text = [NSString stringWithFormat:@"%i", person.numberOfFriends];

    return cell;
}

- (IBAction)moreFriends:(id)sender {
    UIButton *btn = (UIButton *)sender;
    PersonCell *cell = [self parentCellForView:btn];
    Person *person = [people objectForKey:cell.nameLabel.text];
    person.numberOfFriends++;
    [self.tableView reloadData];
}

-(PersonCell *)parentCellForView:(id)theView
{
    id viewSuperView = [theView superview];
    while (viewSuperView != nil) {
        if ([viewSuperView isKindOfClass:[PersonCell class]]) {
            return (PersonCell *)viewSuperView;
        }
        else {
            viewSuperView = [viewSuperView superview];
        }
    }
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:48:20.837

我建议使用[委托。](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:49:42.773

您可能只想为具有您的表格视图的视图控制器中的按钮添加一个选择器。

在你的 cellForIndexPath 函数中

```
[yourCell.button addTarget:self action:@selector(customActionPressed:) forControlEvents:UIControlEventTouchDown]; 
```

然后在“customActionPressed:(id) sender”方法中处理按钮按下

```
 //Get the superview from this button which will be our cell
UITableViewCell *owningCell = (UITableViewCell*)[sender superview];

//From the cell get its index path.
NSIndexPath *pathToCell = [myTableView indexPathForCell:owningCell];

    //Do something with our path 
```

这对您来说可能是一个更好的解决方案，除非有更多您没有列出的因素。

我有一个教程可能会解释更多[http://www.roostersoftstudios.com/2011/05/01/iphone-custom-button-within-a-uitableviewcell/](http://www.roostersoftstudios.com/2011/05/01/iphone-custom-button-within-a-uitableviewcell/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T17:52:05.533

为什么不为您的自定义单元格创建一个委托（使用@protocol）。然后，您可以将主视图指定为每个单元格的委托并适当地处理操作。

# c# - 微妙的清单 操纵

> ID：10556154
> 
> 赞同：1
> 
> 时间：2012-05-11T17:42:59.853
> 
> 标签：c#

我有两个`List<string>`（`listOfFullPaths`包含完整的数据库路径，例如“C:\MyDir\SomeDir\SomeDatabase.mdf”）和其他一些`List<string>`包含*一些*数据库名称（仅）（'listOfDatabases'）。所以每个可能包括

```
List<string> listOfFullPaths = new List<string>() 
{
    "C:\MyDir\SomeDir\SomeDatabase1.mdf",
    "C:\MyDir\SomeDir\SomeDatabase2.mdf",
    "C:\MyDir\SomeDir\SomeDatabase3.mdf"
}; 
```

另一个只是

```
List<string> listOfFullPaths = new List<string>() 
{
    "SomeDatabase1",
    "SomeDatabase2"
}; 
```

我的问题是返回**包含相应数据库****的完整路径的最有效方法是什么？`listOfFullPaths``listOfDatabases`**

注意：答案*不是*这样的

```
List<string> tmpList = new List<string>();
foreach (string database in listOfDatabases)
    if (listOfFullPaths.Contains(database))
        tmpList.Add(database);
listOfFullPaths.Clear();
listOfFullPaths = tmpList; 
```

虽然这是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:50:05.297

听起来您因为性能问题而拒绝嵌套循环？如果是这样，那么解决此问题的另一种方法如下。

```
var set = new Set<string>(listOfDatabases);
var list = new List<string>();
foreach (string fullPath in listOfFullPaths) {
  var name = Path.GetFileNameWithoutExtension(fullPath);
  if (set.Contains(name)) {
    list.Add(fullPath);
  }
}
listOfFullPaths = list; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:50:37.230

```
var fileNames = listOfFullpaths.Select(x => Path.GetFileNameWithoutExtension(x));
listOfFullPaths = listofDatabases.Where(x => fileNames.Contains(x)).ToList(); 
```

请注意，如果您事先知道`listOfFullPaths`是按数据库名称排序的，则可以提高效率。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T17:53:04.743

我认为，如果您想要最大的效率，您可以创建一个字典或散列集，并将数据库名称作为关键。

```
var listOfFullPaths = new List<string>() 
{
    "C:\MyDir\SomeDir\SomeDatabase1.mdf",
    "C:\MyDir\SomeDir\SomeDatabase2.mdf",
    "C:\MyDir\SomeDir\SomeDatabase3.mdf"
}.ToDictionary(k => Path.GetFilenameWithoutExtension(k)); 
```

然后您可以遍历 listOfDBs 并查找哈希

```
listOfDbs.Where(w => listOfFullPaths.Contains(w)); 
```

在这种情况下，您执行两个循环并利用字典的内置索引。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T17:50:41.253

假设两个列表都已填充，并且您无权访问磁盘上的文件，那么此 linq 将为您提供帮助。

```
using System.Linq;

List<string> listOfFullPaths = new List<string>() 
{
    @"C:\MyDir\SomeDir\SomeDatabase1.mdf",
    @"C:\MyDir\SomeDir\SomeDatabase2.mdf",
    @"C:\MyDir\SomeDir\SomeDatabase3.mdf"
};

List<string> listOfDatabases = new List<string>() 
{
    "SomeDatabase1",
    "SomeDatabase2"
};

var dbs =  from path in listOfFullPaths
           from db in listOfDatabases
           where System.IO.Path.GetFileNameWithoutExtension(path) == db
           select path; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T18:22:39.160

如果您想在速度方面有效地做到这一点（即在 O(n) 中），那么 JaredPar 的答案是正确的。这是一个更惯用的版本：

```
var set = new HashSet<string>(listOfDbs);
List<string> result = listOfFullPaths
    .Where(p => set.Contains(Path.GetFileNameWithoutExtension(p)))
    .ToList(); 
```

# git - 如何基于旧的 git 项目创建新的 git 项目

> ID：10556160
> 
> 赞同：2
> 
> 时间：2012-05-11T17:43:24.987
> 
> 标签：git

从远程存储库克隆后，我一直在使用 git 进行开发。我为自己的开发工作创建了一个本地分支。但是现在我需要使用不同的目录名称从我的工作中创建一个新的 git 项目。如何根据我所做的工作创建一个新的 git 项目，包括我在本地分支中所做的所有未推送的提交。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:49:31.483

只需克隆旧项目并修改远程。尝试这个：

```
$ git clone old.git new.git
$ cd new.git
$ git remote add origin <remote-path>
$ git push origin 
```

这将为您提供包含历史记录的完整本地副本，并且一旦远程修改，这将是一个完全独立的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-04T22:54:24.830

我遇到了同样的问题，因为我是 git 新手，所以我很难弄清楚所涉及的内容。我相信以下答案对初学者来说可能更清楚：

```
git clone <ssh|https>xyz.company.com/foo/bar.git
git remote remove origin
# then create another empty project on abc.company.com
git remote add origin https://abc.company.com/foo/bar.git
git push --force 
```

我所做的是使用一些公共 git 存储库，原作者不会费心更新或回答任何问题。原始程序甚至无法处理测试数据。所以我正在尝试基于这个非工作项目启动一个新项目。

# ruby - Ruby 中是否有“yield break”的等价物？

> ID：10556161
> 
> 赞同：1
> 
> 时间：2012-05-11T17:43:37.507
> 
> 标签：ruby, each, null, yield

我编写了以下 Ruby 代码：

```
def myItems
    if @item1
        yield @item1
    end
    if @item2
        yield @item2
    end
end 
```

现在我尝试使用：

```
myItems.each do |item|
    puts item
end 
```

但是，当 @item1 和 @item2 都为零时，我收到错误：

```
Error: #<NoMethodError: undefined method `each' for nil:NilClass>. 
```

我希望在 C# 中使用与“yield break”等效的方法来防止这种情况。有谁知道这在 Ruby 中是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:46:21.530

很难说出您要做什么，但我认为您只想：

```
myItems do |item|
  puts item
end 
```

您当前的代码假设 的返回值`myItems`是可枚举的（例如数组），并且在任何情况下（即使您`@item`的 s 不是`nil`）都是返回值。

或者，执行以下任一操作：

```
# Method that iterates over all items
def eachItem
  [@item1,@item2].compact.each do |item|
    yield item
  end
end

eachItem do |item|
  puts item
end 
```

...或这个：

```
# Give me an array of all non-nil items
def myItems
  [@item1,@item2].compact
end

myItems.each do |item|
  puts item
end 
```

*注意：我使用`camelCase`了方法名称，因为这是您最初使用的名称，但请注意，在 Ruby 中使用它是惯用的`snake_case`。*

*注意 2：将多个相似项存储为实例变量而不是集合似乎不如存储集合本身有用。但是，在不知道您的数据的情况下，我无法提出更好的方法来表示这一点。*

# asp-classic - 经典的 Asp server.scriptTimeout 替换

> ID：10556173
> 
> 赞同：0
> 
> 时间：2012-05-11T17:44:25.117
> 
> 标签：asp-classic

我正在研究经典的 asp 脚本，当单击创建文件按钮时会创建一个 excel 报告。问题是有时报告太大而超时。由于以下代码：

```
<%
Server.ScriptTimeout = 200
%> 
```

解决此问题的一种方法是增加时间。这将是非常简单的解决方案。但是我想从一些asp专家那里知道是否有其他有效的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:15:29.510

考虑让数据库而不是页面使用 DTS 或[SSIS](https://stackoverflow.com/questions/454802/what-is-the-ssis-package-and-what-does-it-do)来完成工作。或者，您可以从您的页面[启动 Stroed Proc 。](http://support.microsoft.com/default.aspx?scid=KB;EN-US;Q252987&)

# css - 覆盖数据表的primefaces 3.1 css

> ID：10556175
> 
> 赞同：2
> 
> 时间：2012-05-11T17:44:33.007
> 
> 标签：css, jsf-2, primefaces

我正在尝试覆盖 primefaces 3.1 中的 css 类，我正在寻找一种模式来覆盖类名。我试过了：

```
.ui-datatable table {}
.ui-datatable .ui-datatable-header,.ui-datatable .ui-datatable-footer {}
.ui-datatable .ui-datatable-header {}
.ui-datatable th,.ui-datatable tfoot td {}
.ui-datatable .ui-datatable-data td,.ui-datatable .ui-datatable-data-empty td{} 
```

但只有行内容集中但无法更改标题 bgcolor 和其他内容。然后我意识到可能是我覆盖的类可能没有被使用。令人惊讶的是，我发现生成的源代码没有使用这些作为类......

```
<div id="form:j_id1915418705_722af8cd" class="ui-datatable ui-widget">
<table role="grid"><thead><tr role="row">
    <th id="form:j_id1915418705_722af8cd:j_id1915418705_722af894" class="ui-state-default" role="columnheader">
        <div class="ui-dt-c">
            <span><span class="outputText">Model</span></span>
        </div>
    </th>
    <th id="form:j_id1915418705_722af8cd:j_id1915418705_722af942" class="ui-state-default" role="columnheader">
        <div class="ui-dt-c">
            <span><span class="outputText">Color</span></span>
        </div>
    </th></tr></thead><tfoot></tfoot>

    <tbody id="form:j_id1915418705_722af8cd_data" class="ui-datatable-data ui-widget-content">
        <tr data-ri="0" data-rk="BMW" class="ui-widget-content ui-datatable-even" role="row" aria-selected="false">
            <td role="gridcell">
                <div class="ui-dt-c">
                    <span class="outputText">BMW</span>
                </div>
            </td>
            <td role="gridcell">
                <div class="ui-dt-c">
                    <span class="outputText">Black</span>
                </div>
            </td>
        </tr>
        <tr data-ri="1" data-rk="Audi" class="ui-widget-content ui-datatable-odd" role="row" aria-selected="false">
            <td role="gridcell">
                <div class="ui-dt-c">
                    <span class="outputText">Audi</span>
                </div>
            </td>
            <td role="gridcell">
                <div class="ui-dt-c">
                    <span class="outputText">White</span>
                </div>
            </td>
        </tr>
    </tbody>
</table><input type="hidden" id="form:j_id1915418705_722af8cd_selection" name="form:j_id1915418705_722af8cd_selection" value="" autocomplete="off" /> 
```

有人可以告诉我如何更改表格标题、边框、交替行颜色...有人可以为我提供如何知道 PF 中的哪个类来覆盖查看生成的源代码的模式。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T19:16:43.213

第一个类包含在标记中：

```
<div id="form:j_id1915418705_722af8cd" class="ui-datatable ui-widget"> 
```

其他子类会自动将自己应用于其他元素。

如果您将这些样式包含在从 head 链接的单独 CSS 文件中，您的自定义 CSS 实际上可能会被 Primefaces CSS 样式覆盖。

要确保您的自定义 CSS 将自身应用于页面，请尝试将自定义 CSS 内联添加到页面正文，然后查看它是否适用。

# linux - 不断收到错误：“日期 --date=4 天前：找不到命令”

> ID：10556179
> 
> 赞同：1
> 
> 时间：2012-05-11T17:44:43.300
> 
> 标签：linux, bash, date

我在我的专用服务器上设置了一个脚本，将我所有的 Cpanel 备份文件备份到 Amazon S3，并且我每天晚上都通过 cron 运行它。

它昨晚完美运行并备份了所有内容，但随后继续删除了它备份的所有内容。它似乎与`date`命令有关，因为如果我将脚本的“删除”部分拉出并将其放入另一个文件并作为回显运行，我无法正确回显日期。我不断收到“找不到命令”错误：

这是备份脚本的完整代码：

```
#!/bin/bash

##Notification email address
_EMAIL=klawncare1212@gmail.com

ERRORLOG=/var/log/s3_backup_logs/backup.err`date +%F`
ACTIVITYLOG=/var/log/s3_backup_logs/activity.log`date +%F`

##Directory which needs to be backed up
SOURCE=/backup/cpbackup/daily

##Name of the backup in bucket
DESTINATION=`date +%F`

##Backup degree
DEGREE=4

#Clear the logs if the script is executed second time
:> ${ERRORLOG}
:> ${ACTIVITYLOG}

##Uploading the daily backup to Amazon s3
/usr/bin/s3cmd -r put ${SOURCE} s3://MK_Web_Server_Backup/${DESTINATION}/ 1>>${ACTIVITYLOG} 2>>${ERRORLOG}
ret2=$?

##Sent email alert
msg="BACKUP NOTIFICATION ALERT FROM `hostname`"

if [ $ret2 -eq 0 ];then
msg1="Amazon s3 DAILY Backup Uploaded Successfully"
else
msg1="Amazon s3 DAILY Backup Failed!!\n Check ${ERRORLOG} for more details"
fi
echo -e "$msg1"|mail -s "$msg" ${_EMAIL}

#######################
##Deleting backup's older than DEGREE days
## Delete from both server and amazon
#######################
DELETENAME=$(date --date="${DEGREE} days ago" +%F)

/usr/bin/s3cmd -r --force del s3://MK_Web_Server_Backup/${DELETENAME} 1>>${ACTIVITYLOG} 2>>${ERRORLOG} 
```

这是我正在测试的示例代码，它试图简单地回显上面的日期代码：

```
#!/bin/bash

##Backup degree
DEGREE=4

#######################
##Deleting backup's older than DEGREE days
## Delete from both server and amazon
#######################
DELETENAME=$(date --date="4 days ago" +%F)

echo ${DELETENAME} 
```

我究竟做错了什么？每次我通过 SSH 在我的 CentOS linux 服务器上运行这个小测试脚本时，我都会收到以下错误：

“日期 --date=4 天前：找不到命令”

因此，插入“度”变量值没有任何问题。而且，如果我只是简单地在 SSH ( `date --date="4 days ago" +%F`) 的提示符下执行相同的命令，它就像一个魅力一样，可以像我期望的那样输出数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:50:01.137

当您从常规终端运行脚本时，您可能会选择不同版本的 date 命令，而不是从脚本运行它，因为它们使用不同的路径。使用您要使用的日期命令版本的完整路径，或者在脚本开头显式设置路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T07:07:20.883

```
mydate4=`date -d "4 days ago " +%F` 
```

# jquery - jQuery平滑滚动

> ID：10556183
> 
> 赞同：7
> 
> 时间：2012-05-11T17:45:04.727
> 
> 标签：jquery, html, jquery-animate, smooth-scrolling

我试图实现平滑滚动到信息索引。我已经查看了这个 jsFiddle [http://jsfiddle.net/9SDLw/](http://jsfiddle.net/9SDLw/)，但我无法让它工作。将代码插入 HTML 文档的位置是否重要？

这是我的代码：

JS（在文件头）：

```
<script type="text/javascript">
$('a').click(function(){
    $('html, body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top
    }, 500);
    return false;
});​
</script> 
```

标记：

关联

```
<a href = "#G" rel = "" id="G" class="anchorLink">G</a><br /> 
```

锚

```
<a name = "G" id="G"><span class = "letters">G</span></a><br /> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T17:49:31.037

**[jsBin 演示](http://jsbin.com/dequku/2/)**

```
<ul id="links">
    <li><a href="#a">Go to a</a></li>
    <li><a href="#b">Go to b</a></li>
</ul> 
```

而不是您文档中的某个地方...

```
<h2 id="a">Article "a"</h2>
Lorem......
<h2 id="b">Article "b"</h2>
Lorem...... 
```

问：

```
$('#links a').click(function( e ){  
    e.preventDefault();
    var targetId = $(this).attr("href");
    var top = $(targetId).offset().top;
    $('html, body').stop().animate({scrollTop: top }, 1500);
}); 
```

上面所做的是使用检索到的锚点`href`并将其用作 jQuery 的**#** (id) 选择器。找到该 ID 元素，将其置顶`offset`并最终为页面设置动画。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-27T03:25:09.227

您必须用

```
$(document).ready(function(){ ... }); 
```

要不就

```
$(function(){ ... }); 
```

# javascript - style.backgroundColor 是 JavaScript 中的空字符串

> ID：10556185
> 
> 赞同：11
> 
> 时间：2012-05-11T17:45:15.050
> 
> 标签：javascript, html, properties

我在下面有以下代码，我正在尝试设置背景颜色。但是，背景颜色作为空字符串返回。我不知道为什么......它与javascript类型有关吗？

```
function function1(){
var color = document.getElementById('rg_vw.national_avg').style.backgroundColor;
//this below appears as an empty alert at runtime. it's an empty string. 
alert(color)
} 
```

就像进行完整性检查一样，如果我使用“值”属性，它会为该特定字段打印出正确的值……所以我对为什么 backgroundColor 是一个空字符串感到有点沮丧。

```
//this works just fine
var value = document.getElementById('rg_vw.national_avg').value
alert(value) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T17:50:54.707

除非您在元素本身上直接定义了 backgroundColor，否则您必须使用`getComputedStyle()`或`currentStyle`获取样式属性的值。

与多个浏览器兼容的方法如下所示：

```
function getStyle(el,styleProp)
{
    if (el.currentStyle)
        return el.currentStyle[styleProp];

    return document.defaultView.getComputedStyle(el,null)[styleProp];
} 
```

[您可以在jsFiddle](http://jsfiddle.net/4p65N/)上看到一个工作示例。

更多信息：

*   有关更多信息，请参阅[此页面](https://developer.mozilla.org/en/DOM/window.getComputedStyle)`getComputedStyle()`。
*   有关(IE)的更多信息，请参阅[此页面。](http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx)`currentStyle`
*   有关浏览器兼容性问题的更多信息，请参阅[此页面](http://www.quirksmode.org/dom/getstyles.html)。

# c++ - 如何确定浮点数中最后一个非零十进制数字？

> ID：10556191
> 
> 赞同：3
> 
> 时间：2012-05-11T17:45:44.747
> 
> 标签：c++, floating-point, ieee-754

我正在编写一个浮点打印和格式化库，并希望避免打印尾随零位。

为此，我想准确确定小数点后前 N 个小数位内的最后一个非零数字。我想知道是否有一种特别有效的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T19:21:59.190

这个（非平凡的）问题已经完全解决了。这个想法是打印足够多的数字，这样如果你将打印的数字转换回浮点数，你就会得到你开始的数字。

相关论文是 Robert Burger 和 R. Kent Dybvig 的“快速准确地打印浮点数”。你可以[在这里](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.52.2247)下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:48:45.813

您必须将浮点数转换为字符串，然后修剪尾随零。

我认为这不是很有效，但我觉得可能没有更简单的算法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:52:49.250

显而易见的解决方案是将所有数字放入 a`char[N]`并在打印前检查最后一位数字。但我敢打赌，你自己也考虑过。

我能想到的唯一其他解决方案是小数部分`2^(-n)`有`n`非零数字。

因此，如果二进制表示中的最后一个非零是`2^(-n)`，那么十进制扩展中将恰好有`n`非零数字。因此，查看*二进制*表示会告诉您有关*十进制*表示的一些信息。

但是，这只是部分解决方案，因为四舍五入可能会引入额外的尾随零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T07:47:30.760

```
std::cout.precision(n); 
```

//其中n是您要在小数点后显示的数字。如果在精度限制之前但在小数点之后存在零，将自动避免。

```
eg. std::cout.precision(5); 
```

然后我的条件被评估为 5.55000 只有 5.55 将被打印

# ruby - 在数组上循环

> ID：10556192
> 
> 赞同：3
> 
> 时间：2012-05-11T17:45:50.857
> 
> 标签：ruby

我在找出正确的方法时遇到了一些麻烦：

我有一个数组和一个单独的数组数组，我想与第一个数组进行比较。第一个数组是一个特殊的`Enumerable`对象，它恰好包含一个数组。

逻辑告诉我，我应该能够做到这一点：

```
[1,2,3].delete_if do |n|
  [[2,4,5], [3,6,7]].each do |m|
    ! m.include?(n)
  end
end 
```

我希望返回 => [2,3]

但它`[]`反而返回。

如果我这样做，这个想法就会奏效：

```
[1,2,3].delete_if do |n|
  ! [2,4,5].include?(n)
end 
```

它会回来

```
 => [2] 
```

我不能将值分配给另一个对象，因为`[1,2,3]`数组必须保留其特殊`Enumerable`对象。我敢肯定，对此的解释比我尝试的要简单得多。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:56:06.557

您还可以展平多维数组并使用[Array#&](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)交集运算符获得相同的结果：

```
# cast your enumerable to array with to_a
e = [1,2,3].each
e.to_a & [[2,4,5], [3,6,7]].flatten
# => [2, 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:50:38.237

你不能把两个内部数组加在一起，然后检查连接数组中的包含吗？

```
[1,2,3].delete_if do |n|
  !([2,4,5] + [3,6,7]).include?(n)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:51:03.193

问题是 的返回值`each`是被迭代的数组，而不是布尔值（丢失了）。由于数组为真，返回的值`delete_if`始终为真，因此所有元素都被删除。您应该改用[`any?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)：

```
[1,2,3].delete_if do |n|
  ![[2,4,5], [3,6,7]].any? do |m|
    m.include?(n)
  end
end
#=> [2, 3] 
```

# asp.net - 在向导步骤中的用户控件上调用函数

> ID：10556194
> 
> 赞同：0
> 
> 时间：2012-05-11T17:46:00.297
> 
> 标签：asp.net, vb.net, webforms

我有几个从以下抽象类继承的用户控件：

```
Public MustInherit Class CustomVRAUserControl
    Inherits System.Web.UI.UserControl

    Public MustOverride Sub ClearErrors()
    Public MustOverride Sub UpdateLabels()
    Public MustOverride Function Validate() As Boolean
    Public MustOverride Sub UpdateSession()

End Class 
```

我有一个使用用户控件的向导。对于某些条件，有一些动态的工作删除步骤。这是向导的示例：

```
<asp:Wizard ID="VRAWizard" runat="server"......>    
        <WizardSteps>
            <asp:WizardStep ID="wizResidentialAddress" runat="server" 
                Title="RESIDENTIAL ADDRESS" StepType="Step">
                  <uc2:ResidentialAddress ID="uctlResidentialAddress" runat="server" />                       
            </asp:WizardStep>

            <asp:WizardStep ID="wizMailingAddress" runat="server" 
                Title="MAILING ADDRESS"  StepType="Step">
                  <uc3:MailingAddress ID="uctlMailingAddress" runat="server" /> 
            </asp:WizardStep>
        </WizardSteps>
    </asp:Wizard> 
```

在我的向导类后面的代码中，我在 NextButton 单击上做了一些工作：

```
Protected Sub VRAWizard_NextButtonClick(sender As Object, e As System.Web.UI.WebControls.WizardNavigationEventArgs) Handles VRAWizard.NextButtonClick

        If VRAWizard.ActiveStep.ID = "wizResidentialAddress" Then
            uctlResidentialAddress.ClearErrors()
            If Not (uctlResidentialAddress.validate) Then
                uctlResidentialAddress.UpdateLabels()
                e.Cancel = True
            Else
                uctlResidentialAddress.UpdateSession()
            End If
        End If

        If VRAWizard.ActiveStep.ID = "wizMailingAddress" Then
            uctlMailingAddress.ClearErrors()
            If Not (uctlMailingAddress.validate) Then
                uctlMailingAddress.updateLabels()
                e.Cancel = True
            Else
                uctlMailingAddress.UpdateSession()
            End If
        End If 
```

显然，这是相当重复的。

我想做类似......

```
CType(VRAWizard.ActiveStep.Controls.Item(0), CustomVRAUserControl).ClearErrors()

    If Not (CType(VRAWizard.ActiveStep.Controls.Item(0), CustomVRAUserControl).Validate()) Then
        CType(VRAWizard.ActiveStep.Controls.Item(0), CustomVRAUserControl).UpdateLabels()
        e.Cancel = True
    Else
        CType(VRAWizard.ActiveStep.Controls.Item(0), CustomVRAUserControl).UpdateSession()
    End If 
```

但当然，这样做会产生运行时错误，因为编译器无法进行强制转换。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:31:52.267

它应该能够处理演员表。我认为集合中的第一个控件是文字，所以你必须这样做：

```
CType(VRAWizard.ActiveStep.Controls.Item(1), CustomVRAUserControl).ClearErrors() 
```

既然你再次使用它，你不妨将它设置为一个变量：

```
Dim objVRAControl As CustomVRAUserControl = CType(VRAWizard.ActiveStep.Controls.Item(1), CustomVRAUserControl) 
```

然后你可以这样做：

```
objVRAControl.ClearErrors() 
```

如果这不起作用，请使用 BreakPoint 和 Watch 变量来确保您使用的是正确的索引。

# django - 选择日期时间戳在星期几/时间范围内的模型

> ID：10556195
> 
> 赞同：0
> 
> 时间：2012-05-11T17:46:09.220
> 
> 标签：django, django-models, calendar

我有一周的开始日和一周的结束日作为配置模型中的选择

```
class config(models.Model)
...
    DAYS_OF_WEEK = (
    (0, 'Monday'),
    (1, 'Tuesday'),
    (2, 'Wednesday'),
    (3, 'Thursday'),
    (4, 'Friday'),
    (5, 'Saturday'),
    (6, 'Sunday'),
    )
    startday = models.Charfield(max_length = 1, choices=DAY_OF_WEEK)
    startday = models.Charfield(max_length = 1, choices=DAY_OF_WEEK)
    starttime = models.TimeField()
    endtime = models.Timefield() 
```

我有一个单独的模型，它有一个包含时间戳事件的日期时间字段。

```
class event(models.Model)
...
event_timestamp = models.DateTimeField() 
```

如何获取事件模型在开始日期/时间范围内的所有配置模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:48:57.940

我最终这样做了

```
day =  timestamp.weekday()
config = ZoneConfiguration.objects.get(video_channel = event.videochannel , zone_endday__gte = day, zone_startday__lte = day) 
```

并将开始和结束日期重新定义为整数。

```
DAYS_OF_WEEK = (
            (0,'Monday'),
            (1,'Tuesday'),
            (2,'Wednesday'),
            (3,'Thursday'),
            (4,'Friday'),
            (5,'Saturday'),
            (6,'Sunday')
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:03:01.757

正如 Django 文档所述，您可以按工作日过滤日期时间字段。也就是说，你可以做

```
Entry.objects.filter(pub_date__week_day=2) # Day 2 is Monday 
```

也许您还可以添加*范围*过滤器/运算符，如下所示

```
Entry.objects.filter(pub_date__week_day__range=(2,4)) # Monday to wednesday 
```

这至少适用于日期部分。

# xslt - 基于元素属性的 XSLT 分组

> ID：10556198
> 
> 赞同：0
> 
> 时间：2012-05-11T17:46:39.860
> 
> 标签：xslt, xpath, xslt-2.0

我的 XML 文件看起来像

```
<templates>
    <template type="ORC">
        <field/>
    </template>
    <template type="OBR">
        <field/>
    </template>
    <template type="OBX">
        <field/>
    </template>
    <template type="OBX">
        <field/>
    </template>
    <template type="SPM">
        <field/>
    </template>
    <template type="ORC">
        <field/>
    </template>
    <template type="OBR">
        <field/>
    </template>
    <template type="OBX">
        <field/>
    </template>
    <template type="OBX">
        <field/>
    </template>
    <template type="SPM">
        <field/>
    </template>
</templates> 
```

我想对订单详细信息（模板/@type='ORC'）进行分组，并使用 XSLT 2.0 将上述示例 XML 转换为以下格式

```
<templates>
    <order-details>
        <template type="ORC">
            <field/>
        </template>
        <template type="OBR">
            <field/>
        </template>
        <template type="OBX">
            <field/>
        </template>
        <template type="OBX">
            <field/>
        </template>
        <template type="SPM">
            <field/>
        </template>
    </order-details>
    <order-details>
        <template type="ORC">
            <field/>
        </template>
        <template type="OBR">
            <field/>
        </template>
        <template type="OBX">
            <field/>
        </template>
        <template type="OBX">
            <field/>
        </template>
        <template type="SPM">
            <field/>
        </template>
    </order-details>
</templates> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:28:25.343

您可以使用 的`group-starting-with`属性[`xsl:for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)以您想要的方式进行分组。

这里：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="templates">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:for-each-group select="template" 
                                group-starting-with="*[@type='ORC']">
                <order-details> 
                    <xsl:apply-templates select="current-group()"/>
                </order-details>
            </xsl:for-each-group>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的输入文档时，会产生您指定的预期输出：

```
<templates>
   <order-details>
      <template type="ORC">
         <field/>
      </template>
      <template type="OBR">
         <field/>
      </template>
      <template type="OBX">
         <field/>
      </template>
      <template type="OBX">
         <field/>
      </template>
      <template type="SPM">
         <field/>
      </template>
   </order-details>
   <order-details>
      <template type="ORC">
         <field/>
      </template>
      <template type="OBR">
         <field/>
      </template>
      <template type="OBX">
         <field/>
      </template>
      <template type="OBX">
         <field/>
      </template>
      <template type="SPM">
         <field/>
      </template>
   </order-details>
</templates> 
```

# jquery - 使用伪元素 jquery

> ID：10556200
> 
> 赞同：1
> 
> 时间：2012-05-11T17:46:46.623
> 
> 标签：jquery

我有一个带有一些`<tr>`and的 HTML 表格`<td>`，我需要为某些`<td>`元素设置一些属性。所以，问题是：

如果我这样写选择[**器**](http://jsfiddle.net/JTyju/3/)：

```
$("table tr:not(table tr:first)").css("background","#ccc"); 
```

它工作正常，但如果我尝试使用特定的表，什么都不会发生：

```
$("#tableTit tr:not(#tableTit tr:first)").css("background","#ccc"); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:48:08.697

您无需再次指定 ID。只需这样做：

```
$('#tableTit tr:not(:first)').css(...); 
```

或者正如@bažmegakapa 在评论中建议的那样：

```
$('#tableTit tr').not(':first').css(...); 
```

# servlets - java.lang.ClassNotFoundException: HttpServletRequest

> ID：10556201
> 
> 赞同：29
> 
> 时间：2012-05-11T17:46:47.960
> 
> 标签：servlets, tomcat7

我刚得到tomcat 7.0.27。我一直保持启动tomcat 45sec的时间。在tomcat上使用旧版本也可以正常运行。但运行它我得到以下错误：

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/VotingApp]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/VotingApp]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: HttpServletRequest
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredMethods(WebAnnotationSet.java:470)
    at org.apache.catalina.startup.WebAnnotationSet.loadMethodsAnnotation(WebAnnotationSet.java:275)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:137)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: HttpServletRequest
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more
May 11, 2012 10:09:21 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
May 11, 2012 10:09:21 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
May 11, 2012 10:09:21 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 561 ms 
```

我该如何解决该错误。我查看了一些类似的帖子，但没有发现它有用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-11T17:55:49.733

您的 Web 应用程序具有特定`servlet-api.jar`于 servlet 容器的库，例如其`/WEB-INF/lib`. 这是**不对**的。将它们全部删除。应该只包含特定于 Web 应用程序的`/WEB-INF/lib`库，而不是 servlet 容器。servlet 容器（如 Tomcat）应该已经提供了 servlet 容器特定的库。如果您从具有不同 make/version 的任意 servlet 容器提供库，您将遇到此类问题，因为您的 Web 应用程序将无法在与这些库不同的 make/version 的 servlet 容器上运行来源于。

当他们遇到编译时错误时，这是​​一个非常常见的初学者错误，因为他们没有正确设置他们的 IDE 项目。另请参阅[如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-29T12:51:47.170

> `Caused by: java.lang.NoClassDefFoundError: HttpServletRequest`

上述问题可能是因为`javax`找不到库。

我解决了同样的问题：右键
单击Eclipse中的项目`Properties`→→→→→`Java Build Path``Libraries``Add library...``Server Runtime``Apache Tomcat`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-02T07:36:57.773

在您的 pom.xml 中添加以下内容。它对我有用。

```
 <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.2</version>
     </dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-24T20:13:10.037

我在应用程序的 WEB-INF/lib 目录（或那里的任何其他 jar）中没有 servlet-api.jar。问题是在 WEB-INF/web.xml 我有这个......

```
 ...
    <servlet>
      <servlet-name>MyServlet</servlet-name>
      <servlet-class>com.bizooka.net.MyServlet</servlet-class>
    </servlet>
    <servlet-mapping>
      <servlet-name>MyServlet</servlet-name>
      <url-pattern>/MyServlet</url-pattern>
    </servlet-mapping>
    ... 
```

...根据教程。删除它仍然允许 servlet 运行，并且没有收到错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-15T11:50:09.817

我有同样的问题，原因是缺少 [commons-logging-1.2.jar](https://mvnrepository.com/artifact/commons-logging/commons-logging/1.2)

我将它添加到`lib`文件夹中，然后我的 Apache Tomcat 7 服务器执行没有问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-29T07:30:33.730

您应该在 WEB-INF/lib 文件夹中添加 servler-api.jar 文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-24T15:25:51.077

我得到了同样的错误

```
Caused by: org.apache.catalina.LifecycleException: A child container failed during start 
```

我从 eclipse 工作空间中删除了项目，删除了项目的 .settings 文件夹并重新导入到 eclipse 中。为我做了诀窍。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-28T04:31:14.593

当我尝试使用第一个 Spring MVC webapp 时，我确实遇到了同样的问题。我所做的是从链接[（下载 spring 框架）](http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.1.RELEASE-A.zip)下载了 jar 文件。在 zip 提取文件夹上的 jar 中，我预计使用的 jar 文件是

*   org.springframework.asm-3.0.1.RELEASE-A.jar

*   org.springframework.beans-3.0.1.RELEASE-A.jar

*   org.springframework.context-3.0.1.RELEASE-A.jar

*   org.springframework.core-3.0.1.RELEASE-A.jar

*   org.springframework.expression-3.0.1.RELEASE-A.jar

*   org.springframework.web.servlet-3.0.1.RELEASE-A.jar

*   org.springframework.web-3.0.1.RELEASE-A.jar

但是当我得到错误，寻找解决方案时，我发现我也需要以下 jar。

*   commons-logging-1.0.4.jar

*   jstl-1.2.jar

然后我分别搜索并下载了这两个jar文件，并将它们包含在 **/WEB-INF/lib**文件夹中。最后，我能够使用 Tomcat 服务器运行我的 webapp。:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-09T06:46:04.620

我也遇到了这个问题，我所做的只是从项目和 Eclipse 工作区中删除现有的服务器（在我的例子中是 Tomcat）配置。

就我而言，这个问题发生在我玩弄我的 Maven 设置并最终把它们搞砸时。但最终我修复了我的 Maven 问题，以实现 tomcat 服务器无法启动并且无法加载项目中涉及的各种应用程序的应用程序上下文。那时我决定放弃现有的服务器配置。

然后我再次重新添加了 Apache 服务器。然后是我的项目特定设置/添加。它终于像魅力一样起作用了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-28T21:27:18.130

我刚刚删除了 web.xml 文件中 servlet 的声明，它对我有用。

祝你好运

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-09T11:51:52.097

多谢你们。以上所有都失败了，除了从文件中删除所有内容`C:\Users\debasish\workspace\.metadata\.plugins\org.eclipse.wst.server.core`然后再次创建服务器。

但在删除这些文件内容之前先删除服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-02T10:38:26.427

这个适用于所有 Maven 用户，使用他们的依赖项作为类路径，而不是将它们复制到 /WEB-INF/lib 中：只需在之前添加这个（复制依赖库）`</plugin>`

```
<plugin>
    <artifactId>maven-dependency-plugin</artifactId>
        <executions>
            <execution>
                <phase>process-sources</phase>
                <goals>
                    <goal>copy-dependencies</goal>
                </goals>
                <configuration>
                    <outputDirectory>WebContent/WEB-INF/lib</outputDirectory>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-04-07T07:19:55.350

如果您正在使用但现在在工作区中关闭的任何项目可能会导致此问题，请尝试从 eclipse 内的服务器文件夹中删除上下文或打开项目。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-06-02T17:46:19.103

所以这个问题与 elcipse 的元数据错误有关。转到保存此配置的元数据文件夹。对我来说，其中一个错误是：

```
SEVERE: Error starting static Resources java.lang.IllegalArgumentException: Document base C:\Users\Cannibal\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\FoodQuantityService does not exist or is not a readable directory 
```

所以去那里你的 Eclipse 的工作区它对所有人都是不同的并删除它的所有内容。我的服务被命名为**FoodQuantityService ，所以我删除了*****org.eclipse.wst.server.core***中的所有文件，但在此之前从 Eclipse 中删除了您的服务器配置

![删除当前服务器配置](../Images/3a9cd561e7b559836c20c5ce635f0bca.png)

然后创建新的配置文件->新建->其他->服务器选择Tomcat，然后选择你想要发布的项目。启动服务器，一切都会好的。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-04-19T13:53:41.717

我在使用 eclipse-jee 时遇到了同样的问题。我发现这个问题的原因是我的 web-app 中有两个或多个重复的 @WebServlet("/yourServlet") 定义，所以解决方案是消除重复

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-07-01T21:48:13.267

1 在 Eclipse EE 项目资源管理器中右键单击“您的项目” 2 单击属性 3 单击目标运行时 4 您当前正在使用的版本的复选框 5 应用并关闭

这应该可以解决问题。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2013-10-23T17:37:08.580

确保导入正确的注释，因为我和你有同样的问题。

`javax.servlet.annotation.*`

# jquery - 悬停时的 Jquery（当我们悬停的元素上方有一个元素时）

> ID：10556202
> 
> 赞同：2
> 
> 时间：2012-05-11T17:46:52.417
> 
> 标签：jquery, hover

所以有两个元素在彼此之上。一旦元素（在顶部的元素下方）悬停，我如何调用函数？

非常感谢，我真的需要这个来工作：s

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:53:29.997

您可以使用 CSS[`pointer-events`](https://developer.mozilla.org/en/CSS/pointer-events)属性：

> 除了指示该元素不是鼠标事件的目标之外，值 none 还指示鼠标事件“通过”该元素并以该元素“下方”的任何内容为目标。

```
#top {
   pointer-events: none;
}

$('#underneath').hover(function(){
     ....  
}) 
```

# c# - 将具有变量名称/值对的 JSON 反序列化为 C# 中的对象

> ID：10556205
> 
> 赞同：7
> 
> 时间：2012-05-11T17:46:56.983
> 
> 标签：c#, .net, json, parsing, deserialization

我正在使用 C# .NET 4.0 将 JSON 解析为自定义对象。我正在使用 JavaScriptSerializer.Deserialize 将其映射到我编写的类。问题是，JSON 的名称/值对不是静态的，并且根据参数 isChain 的不同而有所不同，如以下 JSON 片段所示（底部有更好的链接）：

```
{
   "STATE_WALK_LEFT":{
      "isChain":"1",
      "x":"1"
   },
   "STATE_WALK_LEFT_0":{
      "x":"0"
   },
   "STATE_WALK_LEFT_1":{
      "x":"40"
   },
   "STATE_WALK_LEFT_2":{
      "x":"80"
   },
   "STATE_WALK_RIGHT":{
      "isChain":"0"
   },
   "STATE_RUN_LEFT":{
      "isChain":"0"
   }
} 
```

链可以在链中包含从 _STATE_0 到 _STATE_25 的任何条目。有什么方法可以存储这些数据，所以我不必像这样编写 12*26 空类：

```
public StateWalkLeft0 STATE_WALK_LEFT { get; set; }
public StateWalkLeft0 STATE_WALK_LEFT_0 { get; set; }
public StateWalkLeft1 STATE_WALK_LEFT_1 { get; set; }
public StateWalkLeft2 STATE_WALK_LEFT_2 { get; set; }
public StateWalkLeft3 STATE_WALK_LEFT_3 { get; set; } 
```

是否有一个库或其他方法可以用来部分解析*STATE_0*、STATE_1 等字段？您能否建议一种方法来添加这些最近添加的 JSON 对？

**编辑澄清**：为了了解我正在使用的内容，这里是从 JSON 派生的类：

[查看我的完整课程以了解 JSON 包含的内容](http://pastebin.com/Jmi1p6FF)

基本上，我只需要一种方法以某种方式将这些最近实现的链存储在此类中以进行处理。所有这些类/属性都是从这些 JSON 生成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:04:47.057

使用[Newtonsoft Json.NET](http://james.newtonking.com/projects/json-net.aspx)并作为以下代码的示例

```
internal struct ChainX
{
  public int x { get; set; }
  public int isChain { get; set; }
}

    static string json = 
@"{
   ""STATE_WALK_LEFT"":{
      ""isChain"":""1"",
      ""x"":""1""
   },
   ""STATE_WALK_LEFT_0"":{
      ""x"":""0""
   }, 
   ""STATE_WALK_LEFT_1"":{
      ""x"":""40""
   },
   ""STATE_WALK_LEFT_2"":{
      ""x"":""80""
   },
   ""STATE_WALK_RIGHT"":{
      ""isChain"":""0""
   },
   ""STATE_RUN_LEFT"":{
      ""isChain"":""0""
   }
}"; 
```

和一行代码反序列化为字典：

```
var values = JsonConvert.DeserializeObject<Dictionary<string, ChainX>>(json); 
```

之后，您可以通过字典键简单地访问值：

```
ChainX valueWalkLeft1 = values["STATE_WALK_LEFT_1"]; 
```

# apache - apache ab rool 返回未知错误 (10108) apr_sockaddr_info_get

> ID：10556208
> 
> 赞同：2
> 
> 时间：2012-05-11T17:47:18.173
> 
> 标签：apache, windows-7-x64, apachebench

我正在使用 Apache ab 进行测试。

但是当我像这样运行工具时：

```
ab -n10 'http://localhost'` 
```

它返回：

```
This is ApacheBench, Version 2.0.40-dev <$Revision: 1.121.2.4 $> apache-2.0
Copyright (c) 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright (c) 1998-2002 The Apache Software Foundation, http://www.apache.org/

Benchmarking 'http: (be patient)...apr_sockaddr_info_get() for 'http:: Unknown e
rror (10108) 
```

谁能帮我解决这个问题？

我正在使用 Windows 7。我已经安装了 apache，它使用以下方法成功返回了测试页面：

```
http://localhost 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T14:15:13.093

我遇到了同样的问题，我只是`ab -n 100 http://localhost:8080/`直接使用了没有引号的命令，并确保您的 httpd.conf 文件包含

```
#ServerName localhost 
```

它位于

> ..\Apache2.2\conf\

# c# - C# 中原始类型的容器是使用值语义还是指针/引用语义？

> ID：10556211
> 
> 赞同：3
> 
> 时间：2012-05-11T17:47:34.020
> 
> 标签：c#

当`List<>`在 C# 中创建 a 的原始类型（例如 a `List<int>`）时，列表中的元素是按值存储的，还是按引用存储的？

换句话说，C#`List<int>`等同于 C++`std::vector<int>`还是 C++ `std::vector<shared_ptr<int>>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:55:33.413

A内部`List<int>`会有一个`int[]`。通常不需要装箱 - 值直接存储在数组中。当然，如果您选择将`List<T>`用作非泛型`IList`，其中 API 是根据 定义的`object`，*则将*框：

```
List<int> list1 = new List<int>();

// No boxing or unboxing here
list1.Add(5);
int x = list1[0];

// Perfectly valid - but best avoided
IList list2 = new List<int>();

// Boxed by the caller, then unboxed internally in the implementation
list2.Add(5);

// Boxed in the implementation, then unboxed by the caller
int y = (int) list2[0]; 
```

请注意，短语“通过引用存储”是一个令人困惑的词——“通过引用”一词通常用于*参数传递*的上下文中，但它有些不同。

因此，虽然 a `List<string>`（例如）包含一个数组，其中每个元素值都是一个引用，但在 a 中，`List<int>`每个元素值只是一个`int`. 唯一涉及的引用是调用者对 的`List<int>`引用和对数组的内部引用。（数组类型本身*总是*引用类型，即使元素类型是值类型。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:34:34.657

那么如果你写这样的代码会发生什么：

```
struct MutableValueType
{
  public int ChangableInt32;
}

static class Program
{
  static void Main()
  {
     var li = new List<MutableValueType>();
     li.Add(new MutableValueType());
     li[0].ChangableInt32 = 42;
  }
} 
```

您会修改结构的副本，还是会更改`List<>`? 编译器会警告你吗？我想试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:48:52.570

值类型按值存储。（例如原语和结构）引用类型通过引用存储。（例如类）

# python - 如何将多个字符串从正则表达式存储到列表中？

> ID：10556215
> 
> 赞同：0
> 
> 时间：2012-05-11T17:47:52.727
> 
> 标签：python, arrays, list

这是我的字符串：

```
<span class="word">blue</span><span class="word">red</span><span class="word">yellow</span><span class="word">orange</span> 
```

通常我会使用它来将一个结果放入变量中：

```
result = re.search('(<span class="word">)(.*)(</span>)', string)
color = result.group(2) 
```

但是现在我想从我的字符串中获取**每个结果并将每个结果存储到一个列表中。**我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:56:04.477

有[re.findall](http://docs.python.org/library/re.html#re.findall)。对于较大的字符串，我推荐`re.finditer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:56:24.070

使用 findall 而不是搜索

> findall() 查找 RE 匹配的所有子字符串，并将它们作为列表返回。
> 
> finditer() 查找 RE 匹配的所有子字符串，并将它们作为迭代器返回。

[http://docs.python.org/howto/regex.html](http://docs.python.org/howto/regex.html)

# php - 我的 SELECT 查询错了吗？

> ID：10556218
> 
> 赞同：0
> 
> 时间：2012-05-11T17:47:55.583
> 
> 标签：php, xml, select

嘿，我正在尝试验证我的 xml 文件中的用户名和密码是否与我的数据库中的相同，但 mysql_num_rows 为零。所以我的 SELECT 查询一定有问题。这是我的代码：

```
 public function verifyDB()
{
   //connection to database
    mysql_connect('localhost','root','') or die(mysql_error());
    mysql_select_db('proiect_is') or die(mysql_error());

     $data =mysql_query("SELECT id FROM users WHERE userName ='$this->xml->parameters->username' AND password ='$this->xml->parameters->pass'");
    //we check if any row was returned
    echo $data;
     echo $this->xml->parameters->username."<BR>";
     echo $this->xml->parameters->pass."<BR>";
     print_r(mysql_num_rows($data));
    if (mysql_num_rows($data))
    {

       $row = mysql_fetch_assoc($data);
       $this->_id= $row['id'];
       echo $row;
       return true;
    }
    else
    {return false;}

} 
```

这是我的 xml 登录文件：

```
 <xml version="">
  <action>log_in</action>
  <parameters>
    <username>Ionel P</username>
<pass>abdef01</pass>
  </parameters>
 </xml> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T17:51:14.320

如果你在字符串中插入变量，你应该`{}`像这样使用：

```
"SELECT id FROM users WHERE userName ='{$this->xml->parameters->username}' AND password ='{$this->xml->parameters->pass}'" 
```

这告诉解析器插入变量`$this->xml->parameters->username`，否则它只会尝试使用`$this`（并留下`->xml->parameters->username`文本，最终以“ *[toString-Text of your Object]->xml->parameters->username* ” 结尾，这显然是错误的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:50:28.580

尝试：

```
$data =mysql_query("SELECT id FROM users WHERE userName ='".$this->xml->parameters->username."' AND password ='".$this->xml->parameters->pass."'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:51:35.070

做

```
$data =mysql_query("SELECT id FROM users WHERE userName ='$this->xml->parameters->username' AND password ='$this->xml->parameters->pass'");
echo mysql_error(); 
```

返回任何错误？这应该可以很好地指示问题出在哪里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:51:47.463

试试这个：

```
$data =mysql_query(sprintf("SELECT id FROM users WHERE userName ='%s' AND password ='%s'", mysql_real_escape_string($this->xml->parameters->username), mysql_real_escape_string($this->xml->parameters->pass))); 
```

# ruby-on-rails - 水豚中的after_request（在rspec中）？

> ID：10556220
> 
> 赞同：1
> 
> 时间：2012-05-11T17:48:03.677
> 
> 标签：ruby-on-rails, testing, rspec, capybara

我们希望在每次请求后验证页面上没有转义的 HTML 或 XSS。在 Cucumber 中，我们有一个 AfterStep 执行此操作（只要当前页面与前一页面不同）。

有没有办法做到这一点？

编辑：有关我希望找到的旧（不再工作）版本的示例，请参阅[https://gist.github.com/603295 。](https://gist.github.com/603295)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:06:09.780

Rspec 在钩子之后为您提供了这些：

[https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/before-and-after-hooks](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/before-and-after-hooks)

简而言之：

```
after(:each)
after(:all)
after(:suite) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T02:35:44.530

这是我能想到的最好的，非常接近（但是，它仍然只是在每个示例之后，而不是在每个请求之后）：

在我的规范助手中，我添加了如下内容：

```
RSpec.configure do |config|
  config.after(:each, type: :feature) do
    # this is run after each example in Capybara, and I did stuff like
    page.body.should_not match(UNESCAPED_REGEX)
  end
end 
```

# php - 如何使用 PHP 在给定关键字处拆分 PDF 文件？

> ID：10556221
> 
> 赞同：1
> 
> 时间：2012-05-11T17:48:08.047
> 
> 标签：php, pdf, split, keyword

我希望能够使用 PHP 解析 PDF 文件，特别是使用某些关键字搜索大型 PDF 文件，并在搜索的关键字处将其拆分为多个 PDF 文件。

我做了一些研究，发现了很多使用 PHP 编写 PDF 文件的方法，但很少有人解析和拆分 PDF 文件。

我可以去任何网站吗？我可以使用的库？

# c++ - 如何读取高度图值以生成地形？

> ID：10556223
> 
> 赞同：0
> 
> 时间：2012-05-11T17:48:11.513
> 
> 标签：c++, opengl, devil, heightmap

我正在尝试使用 OpenGL 中的高度图图像制作地形。作为实验，我使用 4x4 像素图像。这是放大的屏幕截图。所以你可以看到像素。

![在此处输入图像描述](../Images/6ff21511f2afbaef3d8ac818d4b676b3.png)

这是我的代码的一部分。

```
ILubyte * image = ilGetData();

int bpp =  ilGetInteger(IL_IMAGE_BPP);
std::cout << "BPP = " << bpp << std::endl;

for (int z=0; z < terrainHeight; ++z)
{
    for (int x=0; x < terrainWidth; ++x)
    {
        pVertices[z*terrainWidth+x] = NxVec3(NxF32(x),
            NxF32(image[z*terrainWidth+x]*bpp), NxF32(z));
    }
}

for (int i=0; i < vertexCount; ++i)
{
    std::cout << "x = " << pVertices[i].x << "\t y = " 
            << pVertices[i].y << "\t z = " << pVertices[i].z << std::endl;
} 
```

然后，我得到以下结果。

![在此处输入图像描述](../Images/46c6444c855041efce53d547bbda302b.png)

我期待（0,0），（1,1），（2,2）和（3,3）的零值（对于y坐标）。但结果不同。为什么我没有得到预期的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:59:21.650

我认为应该`image[(z*terrainWidth+x)*bpp]`代替`image[z*terrainWidth+x]*bpp`.

# .htaccess - 漂亮 url 的 htaccess 配置

> ID：10556225
> 
> 赞同：1
> 
> 时间：2012-05-11T17:48:15.093
> 
> 标签：.htaccess

我正在开发一个网站，我需要获得漂亮的网址。

在花了几个小时阅读大量教程之后，它总是给我一个错误..

我在根目录 (www.mysite.com/.htaccess) 中创建了 .htaccess 文件。

我会将网址从*www.mysite.com/subdirectory/news.php*转换为*www.mysite.com/subdirectory/news/*

我试过了

*RewriteRule ^subdirecotry/news.php$ www.mysite.com/subdirectory/news [L]*

但它没有用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:03:24.813

你可以试试：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(subdirecotry/news)\.php/?\s [NC]
RewriteRule ^ /%1 [R,L]

RewriteRule ^(subdirecotry/news)/?$ /$1.php [L,NC] 
```

# android - Android：在资源中存储类文件？

> ID：10556227
> 
> 赞同：0
> 
> 时间：2012-05-11T17:48:20.560
> 
> 标签：android

我正在尝试将保存的类二进制文件存储在我的应用程序资源中。我应该把它放在哪里以及如何在应用程序中访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:51:31.247

Dalv 机器不能使用 .class 文件。它仅适用于 .dex 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:52:30.467

像任何其他文件一样放入`res/raw`并访问它，但不要期望实际能够执行它。

# c# - 使用击键选择 DataGridView 行

> ID：10556229
> 
> 赞同：0
> 
> 时间：2012-05-11T17:48:44.750
> 
> 标签：c#, sorting, datagridview

您好，我有一个包含很多行的 datagridview。我希望能够单击一个单元格并键入一些字母并选择匹配的行（或滚动到它）。我可以找出它正在排序的列，但现在没有“搜索”功能。

当您打开 Window 的资源管理器窗口并单击文件时，您可以开始键入以将选择移动到与您的击键匹配的文件/文件夹。

这可能与 datagridview 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:12:39.157

我的意思是[DataGridRow.IsSelected](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridrow.isselected)属性。既然您说您知道哪些行包含您的结果，您可以调用[DataGridView.ClearSelection()](http://msdn.microsoft.com/en-us/library/bxdf3ekh.aspx)，然后将`IsSelected`包含数据的行的属性设置为 true。

# actionscript-3 - 滑块组件不适用于我的库项目

> ID：10556236
> 
> 赞同：0
> 
> 时间：2012-05-11T17:48:54.927
> 
> 标签：actionscript-3, flash, components, flash-cs5

出于某种原因，滑块扩展（滑动条）在代码中可以正常工作，但不适用于我的代码我只想获取滑块的值并使用它来更改语音我正在为此移动应用程序使用 fl 和 flash 库。

为什么我不能从 fl 库（对象）中获取属性值并在 flash 对象中直接或间接使用它？

我的代码：

```
 import flash.media.Microphone;
   import fl.events.SliderEvent;
   var mic:Microphone;
   gian_sildebar.addEventListener(SliderEvent.CHANGE, gianvalue);//error

  //Access of undefined property rate_sildebar.

  function setmic():void
   {
    var gainnumber:int=0;
gainnumber= gian_sildebar.value;//error yet "value" is int
mic.setGain(gainnumber);//error
} 
```

而其他代码仅通过使用 fl 库实现，并且它没有任何问题，所以使用相同的 addEventListener ？！谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:51:07.633

几个问题：

*   您从未初始化**mic**，因此它为空。使用[getMicrophone](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html#getMicrophone%28%29)函数获取麦克风实例。

*   函数[setGain](http://livedocs.adobe.com/flashmediaserver/3.0/hpdocs/help.html?content=00000153.html)不适用于 ActionScript 3。请改用[gain](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html#gain)属性。

假设滑块是[Slider](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/Slider.html)的一个实例（& 在范围内），正确的代码应该如下所示：

```
import flash.media.Microphone;
import fl.events.SliderEvent;

var mic:Microphone = Microphone.getMicrophone();

slider.addEventListener(SliderEvent.CHANGE, setmic);

function setmic(e:SliderEvent):void {

    mic.gain = slider.value as Number;  
} 
```

# c# - 通过 SendMessage 将字符串从 C# 发送到 MFC

> ID：10556244
> 
> 赞同：1
> 
> 时间：2012-05-11T17:50:00.713
> 
> 标签：c#, mfc, pinvoke

我知道如何通过使用 LPCTSTR 来 PInvoke 一个需要 CString 的方法，并设置 DllImport 以使用 LPstr 转换调用。

但是，在 LPARAM 是 IntPtr 的情况下，我将如何使用 SendMessage 呢？

这行得通吗？

```
 [DllImport("user32.dll", CharSet = CharSet.Ansi)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, 
        [MarshalAs(UnmanagedType.LPStr)] String lParam); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:01:16.147

您可以像这样简单地声明它：

```
[DllImport("user32.dll", SetLastError=true)]
static extern IntPtr SendMessage(
    IntPtr hWnd, uint Msg, IntPtr wParam, string lParam); 
```

默认编组是作为指向以空字符结尾的字符数组的指针。如果您真的想要 ANSI 版本，那么这是默认设置。`SetLastError`如果您想在失败的情况下捕获错误代码，您应该使用它。

我相信您知道，如果窗口处于不同的进程中，它将无法工作。

# jquery - 使用 jquery 检索 json 文件失败

> ID：10556253
> 
> 赞同：0
> 
> 时间：2012-05-11T17:50:39.280
> 
> 标签：jquery, json

调用 Web 服务时我得到一个 json 文件。

我正在尝试使用 jquery 检索数据并在 html5 页面上显示。当我在浏览器中打开说：SampleURI 时，我确实得到了 json 文件。

```
 {"employeeList":[{"birthDate":"1948-12-08T00:00:00-07:00","city":"Seattle","firstName":"Nancy","lastName":"Davolio","title":"Accountant"},{"birthDate":"1948-12-08T00:00:00-07:00","city":"Seattle","firstName":"Nancy","lastName":"Davolio","title":"Accountant"}]} 
```

这是我的脚本：

```
 $(document).ready(
        function() {$("#btnJson").click(function() {
                    var rootURL = "SampleURI";
                        $.ajax({
                                        type: "GET",
                                        url: rootURL,
                                        dataType: "json",
                                        data: "",
                                        success: renderList, // renderlist is function which display table
                            error: function() { alert("Failure");}
                                    });

                                 }//end function
                         );//end click    
        }//end function
);//end document 
```

这给了我失败的消息。

我是 jquery 的新手，所以任何人都可以告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:19:44.377

****除非服务器实现CORS ，否则****JSON**不允许跨域。**

 ****JSONP**允许跨域，但是服务器必须实现**JSONP**。

如果以上都不可能，您唯一的选择是在您的文件本地创建一个服务器端代理，该代理会为您发出请求并返回数据。

要测试 JSONP 支持，请转到

`SampleURI.com?jsonpcallback=foo` 或者 `SampleURI.com?callback=foo` 返回的 json 应该被包裹在`foo(thejson)`**

# xcode - Xcode 3.2.6 到 Xcode 4.2

> ID：10556255
> 
> 赞同：0
> 
> 时间：2012-05-11T17:50:43.023
> 
> 标签：xcode, layout, toolbar

xcode 4.2 是否有以下“工具栏”或“视图”或“窗口”，顶部有构建、停止、清理选项？如果是这样，它叫什么，我该如何启用它？

*图片为Xcode 3.2.6

![3.2.6](../Images/835f9aab6a0abdb527a8b19ad85bed0e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:23:06.103

我能找到的最接近的是工具栏。在这里能找到它：

![在此处输入图像描述](../Images/05f260033b58730a33ce04fc0dc5a659.png)

# excel-2007 - MS Excel eval() 类似函数

> ID：10556256
> 
> 赞同：4
> 
> 时间：2012-05-11T17:50:53.630
> 
> 标签：excel-2007

我试图找到最好的移动平均线并偶然发现了一个问题。

我可以创建具有`B233:B253`基于 n 的内容的单元格。但是，我无法将此值粘贴到`AVG()`函数中，该函数将值视为字符串。

有什么`eval()`功能吗？

VBA 已退出游戏，因为我将使用 MS Solver。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T21:40:05.213

有一种 eval 函数 -`INDIRECT`

示例
将 3 个值放在 A 列中，
将 A1:A3 放在 B1 中
`=AVERAGE(INDIRECT(B1))`将为您提供单元格 A1:A3 的平均值

# iphone - 边界中心

> ID：10556265
> 
> 赞同：1
> 
> 时间：2012-05-11T17:51:44.857
> 
> 标签：iphone, ios, cocoa-touch, uikit, bounds

我有一个全屏 UIScrollView 来显示我的图像，它使用来自苹果示例代码的 PhotoScroller.app 中的一些代码。我对获取 imageScrollView 边界的中心点有点困惑。

**图像滚动视图.m**

```
- (CGPoint)pointToCenterAfterRotation
{

NSLog(@"imageScrollView frame X and Y are %f and %f ",self.frame.origin.x, self.frame.origin.y);
NSLog(@"imageScrollView frame Width and Height are %f and %f ",self.frame.size.width, self.frame.size.height);
NSLog(@"imageScrollView bounds origin X and Y are %f and %f ",self.bounds.origin.x, self.bounds.origin.y);
NSLog(@"imageScrollView bounds Width and Height are %f and %f ",self.bounds.size.width, self.bounds.size.height);

NSLog(@"imageView frame origin X and Y are %f and %f", imageView.frame.origin.x, imageView.frame.origin.y);
NSLog(@"imageView frame size Width and Height are %f and %f", imageView.frame.size.width,imageView.frame.size.height);
NSLog(@"imageView bounds origin X and Y are %f and %f", imageView.bounds.origin.x,imageView.bounds.origin.y);
NSLog(@"imageView bounds size Width and Height are %f and %f", imageView.bounds.size.width,imageView.bounds.size.height);

CGPoint boundsCenter = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
CGPoint convertPoint = [self convertPoint:boundsCenter toView:imageView];

NSLog(@"boundsCenter X and Y are %f and %f ",boundsCenter.x, boundsCenter.y);
NSLog(@"convertPoint origin X and Y are %f and %f", convertPoint.x, convertPoint.y);

return [self convertPoint:boundsCenter toView:imageView];
}

- (void)setMaxMinZoomScalesForCurrentBounds
{
CGSize boundsSize = self.bounds.size;
CGSize imageSize = imageView.bounds.size;

// calculate min/max zoomscale
CGFloat xScale = boundsSize.width / imageSize.width;    // the scale needed to perfectly fit the image width-wise
CGFloat yScale = boundsSize.height / imageSize.height;  // the scale needed to perfectly fit the image height-wise
CGFloat minScale = MIN(xScale, yScale);                 // use minimum of these to allow the image to become fully visible
CGFloat maxScale = 1.0;
// don't let minScale exceed maxScale. (If the image is smaller than the screen, we don't want to force it to be zoomed.) 
if (minScale > maxScale) {
    minScale = maxScale;
}

self.maximumZoomScale = maxScale;
self.minimumZoomScale = minScale;
}
- (void)restoreCenterPoint:(CGPoint)oldCenter scale:(CGFloat)oldScale
{    
// Step 1: restore zoom scale, first making sure it is within the allowable range.
self.zoomScale = MIN(self.maximumZoomScale, MAX(self.minimumZoomScale, oldScale));

// Step 2: restore center point, first making sure it is within the allowable range.

// 2a: convert our desired center point back to our own coordinate space
CGPoint boundsCenter = [self convertPoint:oldCenter fromView:imageView];
// 2b: calculate the content offset that would yield that center point
CGPoint offset = CGPointMake(boundsCenter.x - self.bounds.size.width / 2.0, 
                             boundsCenter.y - self.bounds.size.height / 2.0);
// 2c: restore offset, adjusted to be within the allowable range
CGPoint maxOffset = [self maximumContentOffset];
CGPoint minOffset = [self minimumContentOffset];
offset.x = MAX(minOffset.x, MIN(maxOffset.x, offset.x));
offset.y = MAX(minOffset.y, MIN(maxOffset.y, offset.y));

NSLog(@"offset x is %f",offset.x);
NSLog(@"offset y is %f",offset.y);

self.contentOffset = offset;
} 
```

**在负责滚动视图的视图控制器中调用 pointToCenterAfterRotation。**

**滚动视图控制器.m**

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.wantsFullScreenLayout = YES;
[[UIApplication sharedApplication] setStatusBarHidden:YES];
actionSheetCoverView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)];
self.view = actionSheetCoverView;
self.imageScrollView = [[[ImageScrollView alloc] init] autorelease];
imageScrollView.frame = [self frameForScrollView];
[actionSheetCoverView addSubview:imageScrollView];
imageScrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
}

- (CGRect)frameForScrollView {
CGRect bounds = actionSheetCoverView.bounds;
CGRect frame = bounds;
return frame;
}

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{   
CGPoint restorePoint = [imageScrollView pointToCenterAfterRotation];
CGFloat restoreScale = [imageScrollView scaleToRestoreAfterRotation];
[imageScrollView setMaxMinZoomScalesForCurrentBounds];
[imageScrollView restoreCenterPoint:restorePoint scale:restoreScale]; 

}
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
CGPoint restorePoint = [imageScrollView pointToCenterAfterRotation];
//call here just for nslog the frame and bounds before rotation.

} 
```

由于`self.frame.origin`等于 (0, 0) 和`self.frame.size`= `self.bounds.size`，我认为 boundsCenter 应该是 self.bounds.size/2。但事实并非如此。为什么？真的很困惑！

**将屏幕从纵向旋转到横向：**

**NSLog 调用 willRotateToInterfaceOrientation:duration:**

```
2012-05-12 11:35:45.666 imageScrollView frame X and Y are 0.000000 and 0.000000 
2012-05-12 11:35:45.672 imageScrollView frame Width and Height are 320.000000 and 480.000000 
2012-05-12 11:35:45.677 imageScrollView bounds origin X and Y are 0.000000 and 0.000000 
2012-05-12 11:35:45.682 imageScrollView bounds Width and Height are 320.000000 and 480.000000 
2012-05-12 11:35:45.686 imageView frame origin X and Y are 0.000005 and 0.374437
2012-05-12 11:35:45.689 imageView frame size Width and Height are 320.000000 and 479.251129
2012-05-12 11:35:45.693 imageView bounds origin X and Y are 0.000000 and 0.000000
2012-05-12 11:35:45.697 imageView bounds size Width and Height are 641.000000 and 959.999939
2012-05-12 11:35:45.701 boundsCenter X and Y are 160.000000 and 240.000000 
2012-05-12 11:35:45.705 convertPoint origin X and Y are 320.500000 and 479.999969 
```

**NSLog 调用 willAnimateRotationToInterfaceOrientation:duration:**

```
2012-05-12 11:36:05.975 imageScrollView frame X and Y are 0.000000 and 0.000000 
2012-05-12 11:36:05.978 imageScrollView frame Width and Height are 480.000000 and 320.000000 
2012-05-12 11:36:05.983 imageScrollView bounds origin X and Y are 0.000000 and 0.000000 
2012-05-12 11:36:05.987 imageScrollView bounds Width and Height are 480.000000 and 320.000000 
2012-05-12 11:36:05.990 imageView frame origin X and Y are 80.000008 and 0.000017
2012-05-12 11:36:05.994 imageView frame size Width and Height are 320.000000 and 479.251099
2012-05-12 11:36:06.002 imageView bounds origin X and Y are 0.000000 and 0.000000
2012-05-12 11:36:06.006 imageView bounds size Width and Height are 641.000000 and 959.999878
2012-05-12 11:36:06.009 boundsCenter X and Y are 240.000000 and 160.000000 
2012-05-12 11:36:06.014 convertPoint origin X and Y are 320.500000 and 320.499969 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:05:38.987

你能 NSLog self.bounds.origin 吗？我认为问题在于您使用的中点函数为您提供了矩形相对于原点的中心。如果原点不是 (0,0)，则 boundsCenter 将不仅仅是 bounds.size/2

# jquery - 如何检查是否选中了表单的任何复选框以及如何判断是否未选中

> ID：10556271
> 
> 赞同：0
> 
> 时间：2012-05-11T17:52:15.560
> 
> 标签：jquery, checkbox, checked

我到处找，但这里的建议似乎都不适合我。如果选中了表单上的任何复选框（以及是否激活按钮），我如何使用 Jquery 检查，如果没有选中任何复选框，我如何停用按钮？到目前为止，我有这个：

```
<script type="text/javascript">
//form-1

if ($('#form-1 input=[type="checkbox"]:checked').length > 0) {
$('#form-1 a.green-btn').removeClass('inactive');
} else {
$('#form-1 a.green-btn').addClass('inactive');
}

</script> 
```

我哪里错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:54:32.930

您在 JQuery 选择器中遇到问题（应该是`input[type="checkbox"]`）。但是，您的代码可以在短时间内重写：

```
$("#form-1 a.green-btn").toggleClass("inactive", !$("#form-1 :checkbox:checked").length); 
```

**演示：http:** [//jsfiddle.net/yTPKL/](http://jsfiddle.net/yTPKL/)

**更新。**您还可以在复选框的 on`change`事件中检查复选框的状态：

```
$("#form-1 :checkbox").on("change", function() {
    $("#form-1 a.green-btn").toggleClass("inactive", !$("#form-1 :checkbox:checked").length);
}); 
```

**演示：http:** [//jsfiddle.net/yTPKL/1/](http://jsfiddle.net/yTPKL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:20:03.467

您可以通过以下方式检查您的复选框是否被选中

```
var check=$('<checkbox-element>').attr('checked'); 
```

这将返回真/假。之后您可以根据条件编写代码。

# opengl-es - 如何使用 OpenGL ES 清除具有 alpha 0 的纹理部分？

> ID：10556276
> 
> 赞同：1
> 
> 时间：2012-05-11T17:52:55.973
> 
> 标签：opengl-es, textures

我有一个纹理，可以在上面渲染 16 幅图。纹理大小为 1024x1024，分为 4x4“槽”，每个槽为 256x256 像素。

在将新图形渲染到插槽之前，我想清除它，以便擦除旧图形并且插槽完全透明（alpha = 0）。

有没有办法用 OpenGL 做到这一点，或者我只需要直接访问内存中的纹理像素并用 memset oslt 清除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:00:25.340

我想你会正常更新当前的纹理：

```
std::vector<unsigned char> emptyPixels(1024*1024*4, 0); // Assuming RGBA / GL_UNSIGNED_BYTE
glBindTexture(GL_TEXTURE_2D, yourTextureId);
glTexSubImage2D(GL_TEXTURE_2D,
                0,
                0,
                0,
                1024,
                1024,
                GL_RGBA,
                GL_UNSIGNED_BYTE,
                emptyPixels.data());  // Or &emptyPixels[0] if you're stuck with C++03 
```

即使您要替换每个像素，[glTexSubImage2D](http://www.opengl.org/sdk/docs/man4/xhtml/glTexSubImage2D.xml)也比重新创建新纹理更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:01:39.537

您的纹理是否主动绑定为帧缓冲区目标？（我假设是的，因为你说你正在渲染它。）

如果是这样，您可以设置一个`glScissor`测试，然后设置一个`glClear`来清除帧缓冲区的特定区域。

# c++ - put 由 GDB 执行的代码

> ID：10556279
> 
> 赞同：0
> 
> 时间：2012-05-11T17:53:26.480
> 
> 标签：c++, debugging, gdb

我有一个小问题。是否可以在 C/C++ 中放置一些与 GDB 进行更多交互的代码？

假设我有一个类似的功能

```
void gdb_print(const char*); 
```

这将在执行时在 gdb 中打印信息！如果不可能，那就太棒了。跟踪一些信息会很简单，而且以某种方式更快！

我需要这样的东西，因为我们正在编写一些插件，而来自 cout 或 cerr 的信息根本不会进入控制台。所以这将是一些离散的东西。此外，可以添加一些东西，如：

```
#ifdef __DEBUG__
  #define debug_msg(x) gdb_print(x)
#else
  #define debug_msg(x)
#endif 
```

如果它不存在，请告诉我您对此的看法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:46:43.437

> 我需要这样的东西，因为我们正在编写一些插件，而来自 cout 或 cerr 的信息根本不会进入控制台。

您始终可以使用以下命令写入控制台：

```
FILE *console = fopen("/dev/tty", "w");
if (console != NULL) fprintf(console, "Your debug message\n"); 
```

我不知道一种专门写入运行 GDB 的终端的方法（这很可能是调用程序本身的不同终端）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:03:45.250

尝试`stdout`使用`freopen`. 看到[这个](https://stackoverflow.com/questions/584868/rerouting-stdin-and-stdout-from-c)

`stdout`这是在运行时重定向到文件的示例代码：

```
/* freopen example: redirecting stdout */
#include <stdio.h>

int main ()
{
  freopen ("myfile.txt","w",stdout);
  printf ("This sentence is redirected to a file.");
  fclose (stdout);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:14:48.273

```
static int gdb = 0;
void gdb_print(char const * msg) {
    if(gdb) printf("\tGDB: %s\n", msg);
} 
```

在 gdb 中加载程序时，在 main 中设置断点，然后将 gdb 设置为非零值。这不是最干净的解决方案（当然也不是自动化的），但我认为它会给你你正在寻找的东西。确保使用每个处理器来删除非调试版本中的调用（让所有那些永远不会评估为真的额外比较毫无意义）。

# f# - 管道记录到对象参数列表

> ID：10556280
> 
> 赞同：1
> 
> 时间：2012-05-11T17:53:28.737
> 
> 标签：f#

鉴于我有类型：

```
type NewsMessage(identifier:string, headline:string) 
```

和这个记录：

```
type NewsMessageParams = { 
    identifier:string
    headline:string 
} 
```

是否有一种隐式的方式将记录适应类构造函数？

像这样：

```
let newsMessageParmas = {identifier=""; headline=""}
new NewsMessage(newsMessageParams) //this is where i need help 
```

您可以使用`||>`语法对元组执行此操作。我想用记录来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:07:33.033

像这样的东西会起作用：

```
let toClass {identifier = i; headline = h} = NewsMessage(i, h)

// Usage
let newsMessageParams = {identifier = ""; headline = ""}
let newsMessage = newsMessageParams |> toClass 
```

请注意，对象构造函数在 F# 中不是一流的，因此如果声明`NewsMessage`为可区分联合，则您有更多机会使用管道运算符：

```
type NewsMessage = NewsMessage of string * string
let toTuple {identifier = i; headline = h} = i, h

let newsMessageParams = {identifier = ""; headline = ""}
let newsMessage = newsMessageParams |> toTuple |> NewsMessage 
```

# c# - 获取正斜杠，方括号内除外

> ID：10556282
> 
> 赞同：5
> 
> 时间：2012-05-11T17:53:30.623
> 
> 标签：c#, regex

示例文本（我已突出显示所需`/`的 's）：

对[@Key=2]`/`项目`/`项目[Person/Name='Martin']`/`日期

我正在尝试获取不在方括号内的每个正斜杠，任何使用正则表达式的人都可以帮助我吗？用途是：

```
string[] result = Regex.Split(text, pattern); 
```

我已经用这段代码完成了，但想知道是否有一个更简单的正则表达式可以做同样的事情：

```
private string[] Split()
{
    List<string> list = new List<string>();
    int pos = 0, i = 0;
    bool within = false;
    Func<string> add = () => Format.Substring(pos, i - pos);
    //string a;
    for (; i < Format.Length; i++)
    {
        //a = add();
        char c = Format[i];
        switch (c)
        {
            case '/':
                if (!within)
                {
                    list.Add(add());
                    pos = i + 1;
                }
                break;
            case '[':
                within = true;
                break;
            case ']':
                within = false;
                break;
        }
    }
    list.Add(add());
    return list.Where(s => !string.IsNullOrEmpty(s)).ToArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:02:39.893

这不适用于一般情况，但可以正确处理大多数实际情况：

```
(?<!\[[^]]+)/ 
```

此表达式使用[负向后查找](http://www.regular-expressions.info/lookaround.html)来匹配正斜杠，除非它前面有一个方括号，后跟一个非右方括号的字符序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:08:45.387

using`Regex.Matches`可能是比尝试使用 split 更好的方法。您尝试匹配所需的输出，而不是指定要拆分的模式。这适用于基本情况：

```
string[] FancySplit(string input) {
    return Regex.Matches(input, @"([^/\[\]]|\[[^]]*\])+")
        .Cast<Match>()
        .Select(m => m.Value)
        .ToArray();
} 
```

正则表达式的方法是寻找一个序列：

*   不是`[`, `]`, 或`/`
    or的字符
*   `[`something形式的序列`]`，其中允许包含 something 。`/`

# jquery - 当使用 jQuery 选择特定标签时，如何更改标签文本？

> ID：10556283
> 
> 赞同：0
> 
> 时间：2012-05-11T17:53:31.473
> 
> 标签：jquery, label

我想只使用 #updatelabel 输入来更新我生成的每个标签。假设，我生成了 3 个文本框以及标签（带有增量 id），我只想更改标签 #2，那么我该怎么做呢？因为如果我选择更新标签#2，那么唯一更新的是标签#1，之后我无法更新任何其他标签。

这是一个演示[http://jsfiddle.net/H9mKZ/](http://jsfiddle.net/H9mKZ/)

我真的需要一个好的答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:57:49.167

一次只允许一个元素有一个 ID。而不是`$("#updatelabel")`你应该使用一个类`$(".updatelabel")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:00:15.760

虽然 tandu 关于 ID 属性是正确的，但您始终可以存储对单击的文本框的引用，而您只需要获取该值即可。这是一个更新的示例：http: [//jsfiddle.net/H9mKZ/1/](http://jsfiddle.net/H9mKZ/1/)

# android - 填写 PDF 表单的 Android 应用程序

> ID：10556285
> 
> 赞同：6
> 
> 时间：2012-05-11T17:53:43.993
> 
> 标签：android, pdf

我想为 PDF 表单设计一个应用程序，只是为了通过 Android 应用程序自动填写。我想向用户展示一些在 xml（android 应用程序 UI）上设计的表单，并用传入的信息填写 pdf 表单。我有 PDF 格式的表格，我只想将它与我的应用程序一起使用并存储。有什么建议可以完成这项任务吗？因为我无法弄清楚。它只是在 Android 上使用 Java 以编程方式填写 pdf 表单

帮助 .....

# php - 如何使用 PHP 更改 HTML 中的语言？

> ID：10556286
> 
> 赞同：0
> 
> 时间：2012-05-11T17:53:47.547
> 
> 标签：php, localization

我有一个简单的 html 网站。我想使用 php 根据国家代码更改该网站的语言。这意味着我想本地化我的网站。或将网站翻译成用户选择的语言任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:07:42.670

不，这并不意味着您要本地化您的网站。这意味着您假设您比他们更了解用户想要什么。在 UX.stackexchange.com 上查看[这个问题和答案](https://ux.stackexchange.com/questions/14127/a-good-solution-how-to-localize-and-let-user-choose-language-on-html-page)

您的方法存在的问题是您假设来自某个国家/地区顶级域的任何人都希望以该国家/地区的语言查看您的网站。正如评论者已经说过的那样；国外的外籍人士呢？某些尝试学习另一种语言并希望查看该语言内容的人呢？那些不止一次语言是标准的国家呢？**一个国家不是一种语言。**

你最好的选择（如果你真的想要一个本地化的网站）是允许用户选择他或她的查看语言。

允许用户通过下拉菜单或其他方法选择他们的语言，并使用[PHP 的 Gettext](http://php.net/manual/en/book.gettext.php)模块来帮助您进行内容翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:55:52.973

我根本不建议在 php 中这样做。我会尝试使用 jQuery 或 javascript。

或者让用户切换语言。您将不得不使用 Handlebars 或类似的东西来循环浏览多种语言。我不会看到为语言编写整个网站 20 次。

[http://handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:58:51.133

我建议允许用户选择他们自己的语言。但是，您可以使用这样的东西：

```
<?php
if (!isset($language)) {      
    $language = explode(',',$_SERVER['HTTP_ACCEPT_LANGUAGE']);      
    $language = strtolower(substr(chop($language[0]),0,2));      
}      
?> 
```

`$language`然后将包含您应该向用户显示的语言。你从那里做什么取决于你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:42:40.293

1-用这样的php创建一个类

```
class Language
{
function __construct($lan)
{
    require_once($lan . '.php');
}

} 
```

2-创建像 en.php 或 jp.php 这样的文件，然后在每个 lang 文件中使用类变量（en.php）：

```
 $this->firstpage="HOME";
   $this->login="LOGIN"; 
```

3-使用类在主页

```
 $language = new language($_POST["language"]); 
```

4-在这样的内容中使用 php 变量

```
 <a href=""> <?php $language->firstpage; ?> </a> 
```

对于小型网站，这是使用 php 更改语言的好方法；

# django - Django - 在 render_change_form (ModelAdmin) 中获取对象 ID

> ID：10556288
> 
> 赞同：5
> 
> 时间：2012-05-11T17:54:09.527
> 
> 标签：django, django-admin, django-modeladmin

我有这两个模型和模型管理员。在可用主机用户列表中添加新主机时，只会出现未分配给另一台主机的主机用户。问题是如果我编辑一个已经创建的主机，它的实际主机用户 ID 也会被过滤，所以我想做的是排除当前分配的主机用户 ID。如何在从 hostuser 字段中排除当前 id 中指定？

我需要的语句写在 *

提前致谢

模型.py

```
class HostUser(models.Model):
    name = models.CharField(max_length=200)
    {..More Data..}

class Host(models.Model):
    {..More Data..}
    hostuser = models.ForeignKey(HostUser, blank=True, null=True) 
```

管理员.py

```
class HostAdmin(admin.ModelAdmin):
    {..More Data..}
    def render_change_form(self, request, context, *args, **kwargs):
        list_names = Host.objects.values_list('hostuser__id', flat=True).exclude(hostuser__id=None).exclude(hostuser__id=**ACTUAL HOSTUSER_ID**)
        list_names = [int(ids) for ids in list_names]
        context['adminform'].form.fields['hostuser'].queryset = HostUser.objects.exclude(id__in=list_names)
        return super(HostAdmin, self).render_change_form(request, context, args, kwargs) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-08T18:05:25.340

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 使用 kwargs 解决，Modeladmin 如下所示：
> 
> ```
> def render_change_form(self, request, context, *args, **kwargs):
>     try:
>         list_names = Host.objects.values_list('hostuser__id', flat=True).exclude(hostuser__id=None).exclude(hostuser__id=kwargs['obj'].hostuser.id)
>     except:
>         list_names = Host.objects.values_list('hostuser__id', flat=True).exclude(hostuser__id=None)
>     list_names = [int(ids) for ids in list_names]
>     context['adminform'].form.fields['hostuser'].queryset = HostUser.objects.exclude(id__in=list_names)
>     return super(HostAdmin, self).render_change_form(request, context, args, kwargs) 
> ```

# c - libgcrypt v1.5.0 的编译器警告

> ID：10556299
> 
> 赞同：1
> 
> 时间：2012-05-11T17:55:12.410
> 
> 标签：c, libgcrypt

当我使用定义编译示例程序时`GCRYPT_NO_DEPRECATED`，我收到以下 6 个警告：

```
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1336: warning: ‘gcry_ac_io_mode_t’ is deprecated
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1337: warning: ‘gcry_ac_io_type_t’ is deprecated
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1344: warning: ‘gcry_ac_data_read_cb_t’ is deprecated
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1358: warning: ‘gcry_ac_data_write_cb_t’ is deprecated
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1393: warning: ‘gcry_md_algo_t’ is deprecated
/usr/local/Cellar/libgcrypt/1.5.0/include/gcrypt.h:1401: warning: ‘gcry_md_algo_t’ is deprecated 
```

手动定义`_GCRYPT_IN_LIBGCRYPT`可以解决 6 个警告，但该手册的劝告相当严格：

> 带有一个前置下划线的名称前缀是为内部使用而保留的，绝不应该被应用程序使用。

那么应该如何在没有警告的情况下编译 gcrypt 标头呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:53:07.510

gcrypt 作者说，“这是某些编译器中的错误”

建议的解决方法是

```
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"
before the include, and
#pragma GCC diagnostic warning "-Wdeprecated-declarations" 
```

[http://lists.gnupg.org/pipermail/gcrypt-devel/2011-July/001829.html](http://lists.gnupg.org/pipermail/gcrypt-devel/2011-July/001829.html)

[http://lists.gnupg.org/pipermail/gcrypt-devel/2011-July/001830.html](http://lists.gnupg.org/pipermail/gcrypt-devel/2011-July/001830.html)

# vb.net - 在按键事件中获取文本框的全文

> ID：10556304
> 
> 赞同：0
> 
> 时间：2012-05-11T17:55:46.167
> 
> 标签：vb.net, keypress

这是我的代码：

```
Private Sub prices_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles wholeprice_input_new_item.KeyPress, dozenprice_input_new_item.KeyPress, detailprice_input_new_item.KeyPress, costprice_input_new_item.KeyPress

        Dim TxtB As TextBox = CType(sender, TextBox)
        Dim rex As Regex = New Regex("^[0-9]*[.]{0,1}[0-9]{0,1}$")

        'MsgBox(TxtB.Text())    

        If (Char.IsDigit(e.KeyChar) Or e.KeyChar.ToString() = "." Or e.KeyChar = CChar(ChrW(Keys.Back))) Then
            If (TxtB.Text.Trim() <> "") Then
                If (rex.IsMatch(TxtB.Text) = False And e.KeyChar <> CChar(ChrW(Keys.Back))) Then
                    e.Handled = True
                End If
            End If
        Else
            e.Handled = True
        End If

    End Sub 
```

文本框的 Text 属性不包括最后按下的字符，例如：

```
 Text entered = "12.1"
 TxtB.Text = "12."

 Text entered = "11.."
 TxtB.Text = "11."

 Text entered = "12"
 TxtB.Text = "1" 
```

我想验证所有字符。如何使事件按键验证文本框中的所有字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:40:45.660

问题是在 KeyPress 事件中，正在按下的键尚未添加到文本框中。您可以将按下的字符添加到现有文本中，如下所示：

```
Dim TxtB As TextBox = CType(sender, TextBox)
If (Char.IsDigit(e.KeyChar) OrElse e.KeyChar = "."c Then
    Dim fullText As String = TxtB.Text & e.KeyChar
    'Do validation with fullText
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:56:14.180

实际上，它比这更复杂一些——例如，如果用户按下退格键会怎样？最好建议您改用 TextChanged 事件，该事件在 Text 属性被最后一次按下的键更新后触发。

# objective-c - 发布，在Objective C中

> ID：10556305
> 
> 赞同：-1
> 
> 时间：2012-05-11T17:55:48.203
> 
> 标签：objective-c, ios, cocoa-touch, memory-management

我正在做的是在分配 obj 和释放这个 obj 之后检查 retainCount。像下面

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    TestClass *ptr = [[TestClass alloc] init];
    NSLog(@"retain count of ptr is %d",[ptr retainCount]);
    [ptr release];  
    NSLog(@"Right after release:::::retain count of ptr is %d",[ptr retainCount]);
} 
```

在控制台上显示后得到的是

```
2012-05-11 13:51:09.515 memoryManagement[1807:f803] retain count of ptr is 1
2012-05-11 13:51:09.516 memoryManagement[1807:f803] Right after release:::::retain count of ptr is 1 
```

我不明白为什么释放后的retainCount仍然是1。应该是0。

请就这个问题给我建议，并指出我是否在我的代码中犯了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:11:13.343

Cocoa Club 的第一条规则是：不要使用`-retainCount`. Cocoa Club 的第二条规则是**不要使用`-retainCount`**.

首先，如果你认为你需要它，你几乎肯定不需要它。如果您使用它进行调试，则说明您使用了错误的工具。如果您将它用于应用程序逻辑，那么您的设计就会损坏。

其次，如果你必须问一个关于它的 StackOverflow 问题，你肯定不需要它。

第三，它很微妙，不可靠，可以在你背后做古怪的事情，而且通常会引起比你想象的更多的头痛。我推荐[Bill Bumgarner 的博文](http://www.friday.com/bbum/2011/12/18/retaincount-is-useless/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:20:43.840

对象的实际保留计数永远不会为零，因为当它为零时，没有任何东西可以引用它，并且它会被释放。但是，内存实际上并没有被清除，而且看起来内部`release`代码实际上并没有打扰减少计数。

此外，您违反了内存管理规则；你有一个你拥有的对象，然后你释放它。不再允许您通过该指针与该对象进行交互。

这里没什么可看的，也不必费心查看对象的保留计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:23:00.653

你有一个比使用retainCount 更糟糕的问题。

永远不要向你释放的对象发送消息——特别是如果你有理由认为它们的 retainCount 真的是 1。也许 release 是这样写的：

```
-(void) release {
     if ([self retainCount] == 1) {
         [self dealloc];
     }
     else {
        // reduce the retain count
     }
} 
```

在这种情况下，对象就消失了。你发送消息，如果对象仍然存在于已释放的内存中，它会报告 retainCount 为 1——没有人说如果它被释放，释放需要减少它（谁会知道？）。

一旦你调用 release——你承诺永远不会向对象发送消息——如果你违背了你的承诺，任何事情都可能发生。

Apple 文档解释了为什么 retainCount 不是你想象的那样

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

> 重要此方法在调试内存管理问题时通常没有价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。

文档还解释了您有时会看到一个巨大的数字，而不是您认为的 retainCount 应该是什么：

> 对于永远不会被释放的对象（也就是说，它们的释放方法什么都不做），这个方法应该返回 UINT_MAX。

不过，这与您的情况无关。如果您在初始化后立即在 ptr 上调用 retain，您可能会看到 retainCount 为 2 和 1（或 N 和 N-1），但不能保证这是真的。retainCount 比许多这些答案让你相信的更合乎逻辑，但它不能以你想要的方式可靠地使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:07:27.877

永远不要使用retainCount。这是令人困惑的，永远不会给你一个明确的答案。此外，如果您正确遵循内存管理准则，则永远不需要使用 retaincount。

在大多数情况下，它会为您提供模棱两可的输出。例如。[NSString stringwithstring:@"apple"] 有一个垃圾值作为保留计数，如 1124523415 等。

所以，永远不要相信retainCount。

# file - 是否可以将数字内容传送到用户的 google drive 帐户？

> ID：10556307
> 
> 赞同：1
> 
> 时间：2012-05-11T17:55:52.070
> 
> 标签：file, file-transfer, google-drive-api

在不使用 Google Checkout 的情况下，我想提供一个链接，允许用户将数字内容直接下载到他们的 Google Drive 帐户。有人对如何实现这一目标有建议吗？

1.  我们有自己的购物车系统并托管我自己的内容。
2.  我们只是希望提供指向我们内容的链接，将数字内容传输到消费者选择的位置。

——查尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:09:23.620

我们目前不为 Web 开发人员提供此类小部件。但是，您可以使用 REST API 来完成这样的事情。

请参阅[Drive API 文档](https://developers.google.com/drive/v1/reference/files/insert)了解如何在服务器端执行此操作。对于客户端应用程序（完整的 JavaScript），您可以参考 StackOverflow[答案](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript/10331393#10331393)。

Drive SDK 目前要求通过 Chrome 网上应用店将应用程序安装在用户帐户中；我们正在积极努力为用户和开发者提供更好的故事，敬请期待！

# css - 显示：阻止在 Chrome 或 Safari 中不起作用

> ID：10556310
> 
> 赞同：21
> 
> 时间：2012-05-11T17:55:59.123
> 
> 标签：css, firefox, google-chrome, safari

我有一个简单的需要垂直显示表格行的单元格。这在 FF 中工作得很好，但在 Ipad 上的 Chrome 或 Safari 中却不行。

下面的示例在 FF 中按预期呈现，每个行单元格在彼此下方，但在 Chrome 中，它似乎完全忽略了 display:block。

有什么问题 - 或者有更好的方法来做到这一点。

（想要这个的原因是我在 CSS 中使用 @media 来为小屏幕呈现不同的表格）

一个更直观的例子：

一张普通的桌子可能是

```
DATA1 | DATA2 | DATA3 
```

但使用显示：块，它应该是

```
DATA1
DATA2
DATA3 
```

非常感谢

```
<html>
<head>
<style>
    table,
    thead,
    tr,
    td
    {
        display:block;
    }
    table,tr
    {
        border : 1px dotted red;
    }
    td
    {
        border:1px dashed blue;
    }
    thead
    {
        display:none;
    }
</style>
</head>
<body>

<table>
<thead>
<tr>
    <td>Heading 1</td>
    <td>Heading 2</td>
    <td>Heading 3</td>
</tr>
</thead>
<tbody>
<tr>
    <td>Data 1</td>
    <td>Data 2</td>
    <td>Data 3</td>
</tr>
<tr>
    <td>Data 1</td>
    <td>Data 2</td>
    <td>Data 3</td>
</tr>
<tr>
    <td>Data 1</td>
    <td>Data 2</td>
    <td>Data 3</td>
</tr>

</tbody>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-11T18:13:46.843

**编辑2：**

我想我已经解决了你的问题。当没有为您的 html 声明时， Webkit 会覆盖`display: block;`并计算它在 td 中。`display: table-cell;``<!DOCTYPE>`

要解决此问题，我建议您在 html 顶部`<!DOCTYPE html>`之前设置。`<html>`

jsfiddle 可以工作的原因是该站点`<!DOCTYPE>`已经声明了一个。

试试这个，让我知道它是否能解决您的问题。如果没有，我会尝试找到另一个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-11T11:32:11.270

我用 th's 而不是 td 做了一个技巧。一个 css hack 只适用于 safari（不是一般的 webkit）。

HTML：

```
<table>
    <tr>
        <th>Cell 1</th> 
        <th>Cell 2</th>
    </tr>
</table> 
```

CSS：

```
table {
    width: 100%;
    text-align: left;
}

/* Safari 7.1+ */
_::-webkit-full-page-media, _:future, :root .safari_only {
    .safari-fix table tr {
        display: block;
        width: 100%;
    }
}
/* Safari 10.1+ */
@media not all and (min-resolution:.001dpcm) { 
    @media {
        .safari-fix table tr {
            display: block;
            width: 100%;
        }
    }
}

table th {
    width: 100%;
    display: block;
} 
```

这是我的[jsfiddle](https://jsfiddle.net/ktchwjrn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:28:17.453

> Chrome 或 Safari 中的表格损坏

许多情况发生在表中。

```
display:block;  
display:""; 
```

或者

```
display:block;
display:table-row; 
*display:block; 
```

# php - 如何解决这个未终止的字符串文字错误？

> ID：10556312
> 
> 赞同：2
> 
> 时间：2012-05-11T17:56:07.767
> 
> 标签：php, javascript, jquery

它给了我一个未终止的字符串文字错误：`var image_file_name = "<br/>`对于下面的这一行：

```
var image_file_name = "<?php echo str_replace("\n", "", $image_file_name); ?>"; 
```

关于如何解决这个问题的任何想法？对所有想法开放以进行测试:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:10:34.583

您要删除`\n`换行符，但不删除`\r`回车符。尝试删除两者。看起来 IE（可能还有其他浏览器）也将`\r`其视为换行符。

也许：

```
str_replace(array("\n","\r"), "", $image_file_name) 
```

*（我假设它`$image_file_name`包含 Windows 样式的`\r\n`换行符，而不是 *nix 样式的`\n`换行符。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:58:10.873

尝试这个：

```
var image_file_name = '<?php echo str_replace("\n", "", $image_file_name); ?>'; 
```

试图避免询问为什么要将 php 片段分配给 JavaScript 变量的诱惑......：p

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-08T05:12:23.917

请使用它将解决问题

```
 addcslashes($string, "\x00..\x1f\x22\x27\x5c") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:24:17.270

我通常做什么。

创建一个隐藏的输入类型，用 php 值填充他的值并使用选择器 $("#hiddenData").val();

因此，您无需使用 PHP 在脚本块中写入数据。如果您使用 mvc 框架，它会干净得多。

# android - Android TextView fill_parent

> ID：10556313
> 
> 赞同：0
> 
> 时间：2012-05-11T17:56:08.733
> 
> 标签：android, layout, textview, fill-parent

我需要构建一个类似于以下的布局：

![所需布局](../Images/a385ff94fec4475d0f449fb1ef58b14a.png)

左边三行是TextView，一开始总高度未知。右边的元素应该是任何可以动态改变其背景颜色的小部件。它应该跨越它的高度来填充父级。

我怎样才能做到这一点？我应该使用什么小部件来显示颜色？以及什么布局？

我为正确的元素使用 TextView 尝试了以下操作，但它没有填充父元素。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TextView 
    android:id="@+id/txtRow_color"
    android:layout_width="10dip"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"  
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:background="#ff23cf"      
    android:text="" />

    <TextView
        android:id="@+id/txtRow_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/txtRow_color"
        android:textColor="#FFFF66"
        android:text="@string/nullstring" />

    <TextView
        android:id="@+id/txtRow_Tweet"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:layout_below="@id/txtRow_name"
        android:layout_toLeftOf="@id/txtRow_color"
        android:layout_alignWithParentIfMissing="true"
        android:gravity="center_vertical"
        android:text="@string/nullstring" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:13:27.227

可以尝试

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:orientation="horizontal" android:weightSum="1">

    <LinearLayout android:layout_width="0dp"
        android:layout_height="wrap_content" android:orientation="vertical"
        android:layout_weight=".8">
        <TextView android:id="@+id/te" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="Text1" />
        <TextView android:id="@+id/tile" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="Text2" />
        <TextView android:id="@+id/e" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="Text3" />

    </LinearLayout>

    <LinearLayout android:layout_width="0dp"
        android:layout_height="fill_parent" android:layout_weight=".2"
        android:background="@color/green">

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:21:28.230

您可能必须使用两个嵌套的 LinearLayout，就像这样，我将使用一些重要属性将其存根：

```
<LinearLayout android:orientation= "horizontal">
  <LinearLayout android:orientation= "vertical" android:layout_height="fill_parent">
    <TextView android:layout_width="fill_parent" />
    <TextView android:layout_width="fill_parent" />
    <TextView android:layout_width="fill_parent" />
  </LinearLayout>
  <ImageView android:layout_height="fill_parent" />
</LinearLayout> 
```

由于您只是显示纯色，因此还有一些其他视图可以代替图像视图，这只是一个示例。您可以`setBackgroundColor()`在 ImageView 上使用来更改它的颜色。

# c# - 自动获取 SQLite 数据并将其插入到类中

> ID：10556314
> 
> 赞同：2
> 
> 时间：2012-05-11T17:56:10.803
> 
> 标签：c#, oop, sqlite, mvvm

我仍在学习 MVVM 模式，并且正在制作一个涉及 SQLite 数据库的新项目（C#4.0 和 WPF）。我`sql`过去很少使用数据库（），但我会做的是这样的：

```
Select * from persons; 
```

然后遍历结果并将`foreach`结果添加到 people 类中，例如

```
result[0] = person.name; 
result[1] = person.id; 
```

等等。然后我会使用一个`for`循环，直到我遍历所有行并将所有玩家添加到一个`List`（或 MVVM 的 ObservableCollection）。现在我想要更有活力，因为我会有更多的行我正在寻找类似的东西：

```
Person personone = "Select * from persons where ID = 1"; 
```

但这当然行不通。我曾尝试在 Google 上搜索我的问题，但没有找到答案。我找到了 SQL to LINQ，但它并不是我真正想要的东西。我发现的最相关的是[大量 sqlite 类](https://github.com/robconery/massive/blob/master/Massive.Sqlite.cs)，但它似乎不适用于 VS11，因为它似乎已被弃用。

如何更动态地将 SQLite 中的数据插入到类中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:58:38.640

[Dapper](http://code.google.com/p/dapper-dot-net/)是一个很好的解决方案。您可以将查询结果映射到自定义 POCO 或动态对象。

将查询结果映射到对象很简单：

```
var cn = ... //create your db connection
IEnumerable<MyClass> myList = cn.Query<MyClass>("select * from MyTable").ToList(); 
```

对于单个实例，您可以这样做：

```
MyClass myInstance = cn.Query<MyClass>("select * from MyTable where id = 1").SingleOrDefault(); 
```

# ruby - 使用 Ruby 测试单元在一个脚本中并行运行多个测试

> ID：10556318
> 
> 赞同：6
> 
> 时间：2012-05-11T17:56:24.927
> 
> 标签：ruby, unit-testing, parallel-processing, testunit

我在一个 ruby​​ 脚本中有 4 个测试，我使用命令运行

```
ruby test.rb 
```

输出看起来像

```
Loaded suite test
Started
....

Finished in 50.326546 seconds.

4 tests, 5 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
100% passed 
```

我想要实现的是，并行运行所有 4 个测试，而不是按顺序运行。像 4 个线程每个运行一个测试，有效地将执行时间减少到 4 个测试中最慢的一个 + 并行执行的时间很少。

我遇到了[这个](https://github.com/grosser/parallel_tests)，但这似乎并行运行多个 ruby​​ 测试文件 - 假设我有 test1.rb、test2.rb test3.rb，那么所有三个文件都将并行运行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:03:01.360

我尝试了`TestSuite`和的组合`Thread`：

```
gem 'test-unit'
require 'test/unit'
require 'test/unit/ui/console/testrunner'
# we're running the tests, so we don't want Test::Unit to automatically run everything for us.  See http://www.natontesting.com/2009/07/21/stop-rubys-testunit-suite-files-running-all-your-tests/
Test::Unit.run = true

class MyTest < Test::Unit::TestCase
  def test_1()
    assert_equal( 2, 1+1)
  end
  def test_2()  
    assert_equal( 2, 4/2)
  end
  def test_3()      
    assert_equal( 1, 3/2)
  end
  def test_4()  
    assert_equal( 1.5, 3/2.0)
  end
end

#create TestSuites.
test_1 = Test::Unit::TestSuite.new("Test 1")
test_1 << MyTest.new('test_1')
#Same a bit shorter
test_2 = Test::Unit::TestSuite.new("Test 2") << MyTest.new('test_2')
test_3 = Test::Unit::TestSuite.new("Test 3") << MyTest.new('test_3')
test_4 = Test::Unit::TestSuite.new("Test 4") << MyTest.new('test_4')

#run the suites
Thread.new{Test::Unit::UI::Console::TestRunner.run(test_1)}
Thread.new{Test::Unit::UI::Console::TestRunner.run(test_2)}
Thread.new{Test::Unit::UI::Console::TestRunner.run(test_3)}
Thread.new{Test::Unit::UI::Console::TestRunner.run(test_4)} 
```

它看起来不错，但我没有进行基准测试。

输出（见下文）有点混乱，每个线程都将他的消息发布到其他线程的消息中，但它似乎工作正常。所以也许你必须捕获每个线程的输出以获得更好的测试日志。

```
Loaded suite Test 4Loaded suite Test 1Loaded suite Test 2Loaded suite Test 3
Started
Started
.
Started
.
Started

.
.
Finished in 0.328125 seconds.

Finished in 0.328125 seconds.

1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
Finished in 0.765625 seconds.
Finished in 0.546875 seconds.
100% passed
1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications

3.05 tests/s, 3.05 assertions/s
100% passed
1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications

3.05 tests/s, 3.05 assertions/s

100% passed
100% passed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:40:58.740

```
gem install parallel_tests

parallel_test a_test.rb b_test.rb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:37:40.577

据说可以在 Ruby 1.9.3 中并行运行测试，但我还没有让它工作。

# cocoa - 显式设置 WebFrame 的数据源

> ID：10556319
> 
> 赞同：0
> 
> 时间：2012-05-11T17:56:28.320
> 
> 标签：cocoa, asynchronous, webview

是否可以手动创建 WebDataSource 对象，然后将创建的对象设置为 webFrame 对象的数据源？我似乎在 WebFrame 类上找不到允许设置数据源的方法。目标是异步预加载网页，而不必一次在 Web 视图中呈现它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:06:18.527

（我认为这是我刚才回答的[问题](https://stackoverflow.com/questions/10555403/must-webkit-always-be-used-on-the-main-thread/10555657)的后续行动？）

正如我在对该问题的评论中提到的那样，您使用其中一种`-[WebFrame load...]`方法来加载内容。当您发出加载请求时，WebView 会实例化 a `-provisionalDataSource`，而后者又变成了`-dataSource`（为了清晰命名！）。正如[课程文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebFrame_Class/Reference/Reference.html)总结的那样：

> 一旦接收到任何数据，临时数据源就会转换为已提交数据源。

除非您正在扩展 WebKit，否则我认为通常没有理由`WebDataSource`直接创建实例。让`WebFrame`你为你做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:14:15.117

只需使用屏幕外 WebView。它会为您加载资源，而不是浪费时间绘制自己。

# wordpress - WordPress NAV Walker 未显示

> ID：10556321
> 
> 赞同：0
> 
> 时间：2012-05-11T17:56:54.910
> 
> 标签：wordpress, wordpress-theming

我有一个自定义 wordpress 主题，我为导航实现了一个自定义 walker

在我的functions.php中，我有这段代码

```
class My_Walker extends Walker_Nav_Menu
    {
        function start_el(&$output, $item, $depth, $args) {
            global $wp_query;
            $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

            $class_names = $value = '';

            $classes = empty( $item->classes ) ? array() : (array) $item->classes;

            $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
            $class_names = ' class="' . esc_attr( $class_names ) . '"';

            $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

            $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
            $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
            $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
            $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

            $item_output = $args->before;
            $item_output .= '<a'. $attributes .'>';
            $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
            $item_output .= '<br /><span class="sub">' . $item->description . '</span>';
            $item_output .= '</a>';
            $item_output .= $args->after;

            $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
        }
    } 
```

在我的 header.php 中

```
<div id="access">
    <?php
    wp_nav_menu( array(
        'theme_location' => 'primary',
         'walker'=> new My_Walker
    ));
    ?>
</div> 
```

但是当我查看我的页面源时，元素中没有数据

```
<div id="access">
            <div class="menu"><ul><li id="menu-item-5" class=""><a><br /><span class="sub"></span></a></li><li id="menu-item-8" class=""><a><br /><span class="sub"></span></a></li><li id="menu-item-10" class=""><a><br /><span class="sub"></span></a></li><li id="menu-item-13" class=""><a><br /><span class="sub"></span></a></li><li id="menu-item-15" class=""><a><br /><span class="sub"></span></a></li><li id="menu-item-17" class=""><a><br /><span class="sub"></span></a></li></ul></div>
        </div> 
```

这应该是一个简单的步行者，但我不让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:52:13.700

改变：

```
'walker'=> new My_Walker 
```

至：

```
'walker'=> new My_Walker() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T11:52:54.257

有同样的问题，**希望你已经在你的 wp-admin 中正确设置菜单？**转到 wp-Admin-> Design-> 菜单并单击保存按钮为我解决了这个问题。

因为我在开发区尝试它，所以我只有我想在 nav_menu 中有链接的示例站点。有趣的事实是，walker 函数会触发，并获取博客中所有页面的 ID。但 $item->title 为 NULL。

# ruby-on-rails - ActiveRecord::ConnectionNotEstablished

> ID：10556328
> 
> 赞同：0
> 
> 时间：2012-05-11T17:58:07.103
> 
> 标签：ruby-on-rails

我创建了一个简单的应用程序

```
rails new simple_cms -d mysql2 
```

使用命令运行 WEBRick 后

```
 rails s 
```

我创建了一个控制器并查看

```
rails generate controller demo index 
```

当我将浏览器指向

```
 localhost:3000/demo/index 
```

我收到错误

```
ActiveRecord::ConnectionNotEstablished
Rails.root: /Users/username/Sites/simple_cms 
```

这是我的宝石文件

```
gem 'rails', '3.0.1'
gem 'mysql2', '0.3.11' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:00:16.583

您还需要创建一个 MySQL 数据库并在`config/database.yml`文件中配置连接详细信息。

如果您文件中的用户名和密码`database.yml`标识了对您的开发数据库具有全局 CREATE 权限的用户，那么您可以使用 rake 任务

```
rake db:create 
```

让 Rails 设置数据库。

# javascript - jQuery复杂的选择器问题

> ID：10556329
> 
> 赞同：1
> 
> 时间：2012-05-11T17:58:09.793
> 
> 标签：javascript, jquery, jquery-selectors

应该很容易。我正在为每个表格行添加一个按钮，该按钮从该行中的多个表格单元格中获取信息。

```
<tr>
  <td><img src='targetInfo' /></td>
  <td></td>
  <td>
    <div>CLICKED ELEMENT</div>
  </td>
</tr> 
```

我希望：

`this: $(this).closest('tr td:eq(0) img').attr('src');`或者

`this: $(this).closest('tr>td:eq(0)>img').attr('src');`

工作，但两者都不能正常工作。

目前我不得不使用下面的，这似乎是次优的。我的选择器中缺少什么？

```
$(this).closest('tr').children('td:eq(0)').children('img').attr('src'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:00:46.973

您当前的工作解决方案是最好的方法（或类似的方法，例如）：

```
$(this).closest('tr').children('td:eq(0) > img').attr('src'); 
```

对于这个问题，您将无法避免必须爬上树然后再下来。有几种方法可以实现这一点，但不是在单个选择器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:59:58.933

尝试：

```
$(this).closest('tr').find('td').eq(0).find('img').attr('src'); 
```

或者：

```
 $(this).closest('tr').find('td:first').find('img').attr('src'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:02:07.577

我最近做了类似的事情。我只是使用了父母和第一个孩子。

```
$(this).closest('tr').find('td:first-child img').attr('src') 
```

# ios - Momento 和 1 对多连接：CoreData 方法、设计注意事项和寻求意见

> ID：10556334
> 
> 赞同：2
> 
> 时间：2012-05-11T17:58:21.050
> 
> 标签：ios, core-data, uitableview

使用 Indexcard 隐喻的给定和基于核心数据的应用程序。每个索引卡可以选择与许多其他实体/表建立一对多的关系；即，我将使用 Momento 的“Moment”作为我的 Indexcard 对象和 Momento 的标签、位置等辅助工具的代理，用于这些其他对象/表格。

显示这些外部表关系是否存在于整个应用程序中可能最重要的 tableView 上的“最快”方法是什么？

*和*

布置单元格部分以显示关系是否存在以及每种关系类型的计数的最佳方法是什么？

同样，使用 Momento 作为设计模式。带有指向 Flickr[上的屏幕截图的链接](http://www.flickr.com/photos/billray/7177565588/in/photostream "链接到 Flickr 上的屏幕截图")（因为 stackOverflow 不允许我发布图片，因为我是菜鸟。）

也许我的前 RDBMS 东西正在污染我的思想，但他们没有做一个 mongo-join 来使值正确，不是吗？[标签、事件、人物、地点]。必须有一种更优雅的方式，我只是没有看到。

我在右侧布置单元格的想法是，如果“是”放置图标和计数，则可能使用一些布尔值，但这对于每个单元格来说似乎都相当昂贵。

我确信这个布局问题的答案将由问题第一部分中采用的方法驱动。出于维护原因，我似乎不想将辅助关系存储在“主要/时刻”IndexCard 对象中。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:11:29.327

如果您设置索引卡与标签（或其他）的一对多关系，则获取的索引卡对象应该具有标签的 NSSet 作为属性。其他人也一样，您应该能够获取集合的计数并将其显示在每个适当的图标旁边。

..除非我误解了你的问题。

编辑：要回答第二部分，您确实应该在 cellForRowAtIndex 路径中有一个条件来检查每个集合的计数，或者只用图标显示它（然后可能有 0，这通常很好），或者检查它是否是0 并隐藏图像，如果它是你说的。我认为这两种解决方案都不会减慢您的应用程序的速度，因为在呈现单元格时无论如何都已经获取了数据，但是您直接通过计数而不检查它是否为 0 的解决方案通常总体上会很快.

**编辑以提供一些示例代码：** 您的核心数据模型将有一个 IndexCard 实体，然后为每种类型的可能相关对象提供一个实体。

**1）型号：**

IndexCard - 与每个其他实体具有一对多的关系

标签

地点

人

2）创建此模型和相应的 Object 类后，您将得到一个 IndexCard 类，其标题中包含以下内容

```
@property (nonatomic, strong) NSSet *tags
@property (nonatomic, strong) NSSet *locations
@property (nonatomic, strong) NSSet *people 
```

当然还有以下实现

```
@dynamic tags
@dynamic locations
@dynamic people 
```

3）现在我们已经建立了这个核心数据模型，我们可以执行一个nsfetchrequest（当然，当使用一个tableview时，你应该使用一个nsfetchedresultscontroller，因为它会在你滚动表格时动态地获取它需要的IndexCards）。此代码假定我们在其范围内有一个可用的 NSManagedObjectContext（理想情况下是从 AppDelegate 传入并设置为 ivar），并且我们的 IndexCard 对象具有某种我们可以搜索的键/id 属性，我们称之为“数字”

```
NSNumber *numberWeWant = [NSNumber numberWithInt:1];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
request.entity = [NSEntityDescription entityForName:@"IndexCard" inManagedObjectContext:ourContext];
request.predicate = [NSPredicate predicateWithFormat:@"number == %@", numberWeWant];

NSError *error = nil;

NSArray *results = [context executeFetchRequest:request error:&error];

//didn't bother error checking in case no IndexCard matches
IndexCard *ourCard = [results lastObject];

//you can now use these to display in the cell or hide the appropriate icons if they = 0
int numTags = ourCard.tags.count;
int numLocations = ourCard.locations.count;
int numPeople = ourCard.people.count;

//just a sample of how we would access the individual related objects
for(Tag *tag in ourCard.tags)
{
    //do whatever you want with each tag here
} 
```

同样，此代码仅用于获取单个 IndexCard。在实际表中，您将在加载包含它的视图时初始化 nsfetchedresultscontroller，然后仅在 cellForRowAtIndexPath 中与 IndexPath.row 匹配的位置访问 IndexCard。

这也假设 IndexCard 可以关联的对象类型有限。如果类型可以随机更改和增加，则需要修改此方法。

希望这会有所帮助。

# php - 如何通过 phpmailer 在 PHP 和 MySQL 中发送多封电子邮件

> ID：10556338
> 
> 赞同：2
> 
> 时间：2012-05-11T17:58:39.147
> 
> 标签：php, mysql, phpmailer

我有个问题。当我单击发送按钮时，只会`zxc@hotmail.com`收到消息。

如何改变它？我正在使用 Gmail SMTP 发送出去。

数据库中有2条记录：

这是我的代码：

```
include "phpmailer/class.phpmailer.php";
$host = "localhost";
$user = "root";
$pass = "root";
$db = "mailTest";

mysql_connect($host, $user, $pass);
mysql_select_db($db);

$query = "SELECT email FROM list";

$recordset = mysql_query($query);
$row_recordset = mysql_fetch_assoc($recordset);
$tota_row_recordset = mysql_num_rows($recordset);
$msg = strip_tags($_POST['msg']);
$mail= new PHPMailer(); //建立新物件 
while($row = mysql_fetch_array($recordset))
{
    $to = $row['email'];
    $mail->AddAddress($to, "Test Message"); 
}      
$mail->IsSMTP();    
$mail->SMTPAuth = true;
$mail->SMTPSecure = "ssl";
$mail->Host = "smtp.gmail.com";     
$mail->Port = 465;      
$mail->CharSet = "big5";
$mail->Subject = "Test Message";     
$mail->Username = "xxxxxx";    
$mail->Password = "xxxxxx";   
$mail->Body = "$msg";
$mail->IsHTML(true);           
if(!$mail->Send()) {      
echo "Mailer Error: " . $mail->ErrorInfo;       
} else {      
header('Location: index.php');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:04:11.957

使用此循环，您每次迭代都会覆盖收件人，因此只有最后一个人留下来接收电子邮件：

```
while($row = mysql_fetch_array($recordset))
{
    $to = $row['email'];
}
$mail = new PHPMailer(); 
```

将您的代码更改为

```
$mail = new PHPMailer(); // create object FIRST
while($row = mysql_fetch_array($recordset))
{
    $to = $row['email'];
    $mail->AddAddress($to, "Test Message"); // add each DB entry to list of recipients
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T18:03:17.810

在下面试试这个：

```
while($row = mysql_fetch_array($recordset))
{
    $to = $row['email'];
    $mail= new PHPMailer();
    $mail->IsSMTP();

    $mail->SMTPAuth = true;

    $mail->SMTPSecure = "ssl";

    $mail->Host = "smtp.gmail.com";

    $mail->Port = 465;

    $mail->CharSet = "big5";

    $mail->Subject = "Test Message";

    $mail->Username = "xxxxxx";

    $mail->Password = "xxxxxx";

    $mail->Body = "$msg";

    $mail->IsHTML(true);

    $mail->AddAddress($to, "Test Message");

    if(!$mail->Send()) {

    echo "Mailer Error: " . $mail->ErrorInfo;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:21:35.460

```
if(isset($_POST['sbmit']))
{
    for($i=0;$i<count($_POST['email_address']);$i++)
    {

          $to = $_POST['email_address'][$i];
          echo $to."<br />";
          $subject = 'Thank you for Subscribing';
          $message = $_POST['news'];
          $headers = 'From: dhakalneil@gmail.com' . "\r\n" .
          'Reply-To: xyz@hotmail.com' . "\r\n" .
          'X-Mailer: PHP/' . phpversion();

         echo $_POST['email_address'][$i]."<br />";
         ini_set("SMTP","smtp.ntc.net.np" );
         ini_set('sendmail_from', 'dhakalneil@gmail.com');
         if( mail($to,$subject,$message,$headers))
         {
                echo "Mail has been sent to admin<br />";
         }
         else
         {
                echo "Mail could not been sent";
         } 

    }
}

?> 
```

# android - android按钮刷新

> ID：10556343
> 
> 赞同：0
> 
> 时间：2012-05-11T17:59:08.043
> 
> 标签：android, button, refresh

我正在构建一个基于 android 的应用程序来实现 twitter 搜索功能。按钮单击仅适用于第一个。如果我更改搜索词并再次单击该按钮，则无法刷新。任何人都可以给我一个提示？`公共类 TwitterSActivity 扩展 Activity 实现 OnClickListener{ EditText etQuery; 按钮 btnQuery;

```
class Tweet{
    public String username;
    public String message;
    public String image_url;
}

ArrayList<Tweet> tweets = new ArrayList<Tweet>();

@Override
public void onCreate(Bundle savedInstanceState) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    etQuery = (EditText) findViewById (R.id.et);
    btnQuery = (Button) findViewById (R.id.btn);
    btnQuery.setOnClickListener(this);
}

@Override
public void onClick(View v){

    if(v.getId() == R.id.btn){
        Toast.makeText(this, "Query submitted", Toast.LENGTH_LONG).show();

        Getdata getdata = new Getdata();
        String returned = null;
        String searchTerm = etQuery.getText().toString();
        try {
            returned = getdata.getInternetData(searchTerm);
        } catch (Exception e) {
            e.printStackTrace();
        }

        try{
            JSONObject jo = new JSONObject(returned);
            JSONArray ja = jo.getJSONArray("results");
            for(int i=0; i<ja.length(); i++){
                JSONObject job = ja.getJSONObject(i);
                Tweet tt = new Tweet();
                tt.username = job.getString("from_user");
                tt.message = job.getString("text");
                tt.image_url = job.getString("profile_image_url");
                tweets.add(tt);
            }
        }
        catch(JSONException e){
            Log.e("log_tag", "Error parsing data: "+e.toString());
        }

        ListView lv = (ListView) findViewById(R.id.listView1);

        class FancyAdapter extends ArrayAdapter<Tweet> {

            public FancyAdapter() {
                super(TwitterSActivity.this, android.R.layout.simple_list_item_1, tweets);
            }

            public View getView(int position, View convertView, ViewGroup parent){
                ViewHolder holder;
                if(convertView == null){
                    LayoutInflater inflater = getLayoutInflater();
                    convertView = inflater.inflate(R.layout.listitem, null);
                    holder = new ViewHolder(convertView);
                    convertView.setTag(holder);
                }
                else
                {
                    holder = (ViewHolder)convertView.getTag();
                }
                holder.populatefrom(tweets.get(position));
                return(convertView);
            }

            class ViewHolder {
                public TextView username = null;
                public TextView message = null;
                public ImageView image = null;

                ViewHolder(View listitem){
                    username = (TextView)listitem.findViewById(R.id.username);
                    message = (TextView)listitem.findViewById(R.id.message);
                    image = (ImageView)listitem.findViewById(R.id.avatar);
                }

                void populatefrom(Tweet t){
                    username.setText(t.username);
                    message.setText(t.message);
                    image.setImageBitmap(getBitmap(t.image_url));
                }
            }
        }

        FancyAdapter ar = new FancyAdapter();
        lv.setAdapter(ar);

    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
    }
    catch(Exception e) {return null;}
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:18:31.197

最后我弄清楚了，这是我修复它的方法：我更改`ArrayList<Tweet> tweets = new ArrayList<Tweet>();`为`final ArrayList<Tweet> tweets = new ArrayList<Tweet>();` 然后将其移动到 onClick() 方法下。没有 notifyDataSetChanged() 也能正常工作。

# .htaccess - 使用 .htaccess 永久重定向此 URL

> ID：10556347
> 
> 赞同：1
> 
> 时间：2012-05-11T17:59:29.380
> 
> 标签：.htaccess, redirect

我正在尝试永久重定向一个 url，但它似乎不起作用，这就是我在 .htaccess 文件中的内容

```
RewriteEngine on
rewriteRule ^modules\.php?name=My_Page$ http://mysite.net/mypage [R=permanent,L] 
```

如您所见，我想将 modules.php?name=My_Page 重定向到[http://mysite.net/mypage](http://mysite.net/mypage) 我感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:57:27.500

RewriteRule 中使用的路径不包含查询字符串。采用

```
RewriteEngine on
RewriteBase /

RewriteCond %{QUERY_STRING} ^name=My_Page$
rewriteRule ^modules\.php$ /mypage? [R=permanent,L] 
```

# c# - 如何管理具有多个分支的项目中的迁移？

> ID：10556348
> 
> 赞同：64
> 
> 时间：2012-05-11T17:59:36.027
> 
> 标签：c#, asp.net-mvc-3, version-control, entity-framework-4.3, entity-framework-migrations

我有一个使用 Entity Framework 4.3 和代码优先方法的 ASP.NET MVC3 项目。我使用迁移来使数据库保持最新。

该项目受源代码控制，我有许多分支机构。我刚刚意识到的是，当我想将我的一个分支合并到 master 时会出现问题。由于我在两个分支中都创建了迁移文件，所以当我合并时会有重叠的迁移，这可能会导致冲突。

有没有一种好方法来管理具有多个分支的项目中的迁移？

**更新**

一种方法是合并，然后删除在分支分离时创建的所有迁移文件，然后创建一个新的迁移文件，其中包含从创建分支到重新合并的所有更改。这适用于开发环境，您可以在其中转储数据库并使用所有迁移文件重新构建它。那么问题将是生活环境。由于您无法回滚到创建分支的时间而不会有丢失数据的风险，因此当您尝试使用新的迁移文件更新实时数据库时会发生冲突。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-17T19:58:41.577

**编辑：**我的一位同事发现这样做更容易，为了完整起见，我将原始答案留在了底部。

（非常重要）实时环境中的迁移不能与当前分支中的迁移冲突，否则您需要重做所有迁移并手动解决数据模型更改冲突。

1.  使用实时环境数据恢复您的开发数据库
2.  run `update-database`，它应该从您的分支运行迁移，并抱怨“无法更新数据库以匹配当前模型等等等等。”
3.  运行`add-migration MergeBranchBToMaster -ignoreChanges`，这将创建一个空迁移。
4.  `update-database`再次运行
5.  推动你的改变

第 3 步中的魔法基本上告诉 EF 关闭不匹配的模型，因此请确保您的迁移不会与实际环境中的迁移发生冲突。如果他们这样做了，您总是可以创建 SQL 脚本来推送丢失的迁移（这实际上是首选方法）。

**原始答案**

根据@Ladislav Mrnka 的回答，我找到了一个相当直接的解决方案。这将适用于实时环境[1]，您只需注意不要更改任何已部署的迁移。

1.  在合并之前，记下您添加的迁移 (MyMigration) 及其之前的迁移 (BaseMigration)

2.  在 git 中合并分支

3.  打开包管理器控制台，然后运行：UPDATE-DATABASE -TargetMigration:BaseMigration。这会将您的数据库恢复到应用任何冲突迁移之前的状态

4.  删除本地迁移 (MyMigration)

5.  运行：更新数据库。这将应用在其他分支中完成的所有较新的迁移。

6.  运行：添加迁移 MyMigration。这将根据数据库的当前状态重新生成本地迁移，例如 git -rebase。

7.  运行：更新数据库。使用本地迁移更新数据库。

如果您有多个本地迁移，这也适用，但它会将它们全部合并为一个。

[1] 通过使用实时环境，我的意思是生成的迁移可以应用于可能已经应用了一些/所有其他分支迁移的实时环境。这些步骤本身纯粹是出于开发目的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-09T13:05:02.330

在类似问题上处理实体框架迁移合并冲突有一个[更好的解决方案。](https://stackoverflow.com/questions/10171658/lose-ef-code-first-migration-when-working-on-different-tfs-branches)

合并后您需要做的就是在目标分支中重新构建迁移的元数据。那就是你不重新构建向上/向下代码，只是 resx 文件中的状态。

```
add-migration [the_migration_to_rescaffold_metadata_for] 
```

这几乎总是有效的。如果合并中的不同迁移以迁移不再可运行或产生意外结果的方式更改了数据库，则该过程将失败。话虽如此 - 我认为这是一种非常罕见的情况，因为大多数迁移应该是自动生成的，或者至少不依赖于迁移本身也没有更改的其他表。

重新脚手架状态失败的一种情况可能是：

*   列 foo 是一个 int 并且行包含 [0, 1, 2]

*   从分支 A 迁移 A 将 foo 更改为布尔值（0 将自动变为假，> 0 将变为真）

*   从分支 B 迁移 B 将 foo 更改为字符串。它希望它是一个 int 但它是一个布尔值，但迁移会成功。数据将丢失，因为当迁移 B 创建时，行将包含 ["0", "1", "2"]。当迁移 A 将列更改为布尔值（并且成功完成并获得预期结果）时，行现在将包含 ["0", "1", "1"] 并且迁移 B 的最终结果将与在B支线。

可能有更多的边缘情况，解决方案可能会出错。但是，如果向上/向下迁移代码不依赖于合并中另一个迁移更改的内容，那么只需更新迁移中的元数据就可以了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-12T11:11:55.843

合并迁移是恕我直言的手动任务。部分迁移代码是自动生成的，我们通常不会合并自动生成的代码——而是在合并后再次运行自动生成。

在 ADO.NET 团队提供一些建议之前，我会遵循简单的原则：

*   在进行合并之前，将主数据库恢复到分支之前使用的版本
*   合并你的分支
*   排除从合并程序集分支后创建的迁移类
*   为合并的代码库添加一个新的迁移，它将在合并分支之后将您的数据库迁移到分支之前的状态
*   如果您排除的迁移类包含一些自定义，请将它们合并到新的迁移类
*   运行迁移以将数据库迁移到当前合并版本

如果您的分支包含多个迁移步骤（版本），您将丢失它们并以两个版本结束 - 分支之前和合并之后。

编辑：

它不会在现场环境中工作。这里的问题是开发过程本身。如果您有实时环境，则应保持其分支不变（小错误修复除外）。如果您继续在该分支中使用生产部署进行开发，同时您在没有持续集成的情况下在单独的分支中构建另一个版本（= 持续将更改合并回主分支以将您的新开发与主代码库集成）问题。我认为迁移通常无法处理这个问题。

在这种情况下，唯一的选择可能是从合并的解决方案中删除所有迁移并`MigrationHistory`从数据库中删除表。然后您可以再次在项目上启用迁移并添加初始迁移以使用当前数据库作为起点=无法回到以前的版本，因为不存在有关以前迁移的信息。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-11-19T09:16:45.967

Rowan Miller 在第 9 频道制作了一个关于这个主题的精彩视频：[迁移 - 团队环境](https://channel9.msdn.com/Blogs/EF/Migrations-Team-Environments)。它指的是实体框架 6。

它描述了第一个开发人员 A 和 B 正在开发相同的模型并且 A 先签入的场景。现在开发者 B 必须处理他从 A 获得最新版本时遇到的问题。

这与不同分支之间的冲突本质上是相同的，因为一般问题是合并迁移更改同时完成，但实际上具有不同的模型源状态。

解决方案是：

*   在解决版本控制系统的冲突时，开发者 B 必须同时接受来自自己和开发者 A 的更改。
*   此时开发人员 B的`UpdateDatabase`命令仍然会失败（错误消息：*“无法更新数据库以匹配当前模型，因为有待处理的更改......”*）
*   `IgnoreChanges`开发人员 B 必须使用以下选项创建“空迁移” ：

`Add-Migration NameOfMigration -IgnoreChanges`

然后`UpdateDatabase`命令将成功。

**问题的根源**

更新数据库时发生错误的根源是因为 EF 将迁移引用的模型的快照存储在迁移文件中的 resx 文件中。

在这种情况下，开发人员 B 的“当前模型”快照在获取/合并开发人员 A 所做的更改后不正确。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-12T09:54:03.143

我对此进行了一些思考，我希望我能为这里提出的不同观点和实践做出贡献。

考虑一下您的本地迁移实际代表什么。在本地使用开发数据库时，我在向表中添加列等、添加新实体等时，使用迁移以最方便的方式更新数据库。

因此，Add-Migration 将**我**当前的模型（我们称之为模型 b）与**我**之前的模型（模型 a）进行对比，并生成从数据库中的 a => b 开始的迁移。

**对我来说，如果**每个人都确实拥有自己的数据库并且组织中存在某种阶段/测试/开发/生产数据库服务器，那么尝试将我的**迁移**与其他任何人的迁移合并是没有意义的。这一切都取决于团队是如何设置的，但是如果您想真正以分布式方式工作，那么将彼此与其他人所做的更改隔离开来是有意义的。

 **好吧，如果你在分布式工作并且有一些实体，例如，你工作的人。出于某种原因，许多其他人也在研究它。因此，您可以根据 sprint 中特定故事的需要添加和删除 Person 上的属性（我们在这里都在灵活地工作，不是吗？），例如您首先将社会安全号码转换为整数，因为您不是那个明亮，然后到一个字符串等。

您添加名字和姓氏。

然后你就完成了，你有十个奇怪的上下迁移（你可能在工作时删除了其中一些，因为它们只是垃圾），你从中央 Git 存储库获取一些更改。哇。你的同事鲍勃也需要一些名字，也许你们应该互相谈谈？

无论如何，他已经添加了 NameFirst 和 NameLast，我猜……那你怎么办？好吧，您合并、重构、更改，使其具有更合理的名称……例如 FirstName 和 LastName，您运行测试并检查他的代码，然后推送到中央。

但是迁移呢？好吧，现在是时候进行迁移中央仓库了，或者更具体地说，分支“测试”包含**从其**模型 a => 模型 b 的一个不错的小迁移。这次迁移将是一次且只有一次迁移，而不是十次奇怪的迁移。

你明白我在说什么吗？我们正在使用漂亮的小 pocos，它们的比较构成了实际的迁移。所以，我们根本不应该合并迁移，在我看来，我们应该有每个分支的迁移或类似的东西。

事实上，我们甚至需要在合并之后在分支中创建迁移吗？是的，如果这个数据库是自动更新的，我们需要。

必须再努力一些，至少这些是我对此的想法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-19T13:51:13.563

考虑使用不会导致这些冲突的其他迁移库，例如 FluentMigrator 或 Migrator.NET。

我不认为 EF 迁移真的准备好用于分支和合并的一般用途 - 这是很多工作，而且很容易犯令人讨厌的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-08T14:36:11.047

我认为@LavaEater 所说的很有意义。我正在实施一个分支策略（开发、主要、发布）并将其与开发、质量保证和发布过程中的环境保持一致。

*   开发分支 - 本地开发
*   主分支 - 合并来自开发分支的更改并部署到我的暂存环境（Azure 网站和 SQL 数据库）
*   发布分支 - 合并来自 Main 的更改并部署到生产环境（另一个 Azure 网站和 SQL 数据库）

我遇到了上面讨论的问题，在我看来，迁移的复杂性和潜在的变通办法给发布过程带来了很大的风险。在 Development、Main 和 Release 中有效地执行独立迁移意味着我在 Dev 中的构建中包含的模式不是进入 QA 的 Staging 模式，QA 签署的 Staging 模式不是部署到 Live 的模式（除非我遵循我确信可行但可能容易出错的建议解决方案之一）。

回应@LavaEater - 我首先从EF代码中获得的真正好处是什么？就个人而言，我认为我可以轻松地从代码生成模式（如果我愿意，可能会调整自动生成的迁移）。在那之后，迁移是一个简单的部署过程的复杂化。

我目前的想法是首先使用代码在开发中生成迁移，然后：-

*   选项 A) - 使用 Update-Database -script 编写架构更改脚本并将它们置于源代码控制之下。如果 2 个人修改同一个模型，仍然存在一些潜在的冲突，但我认为这更容易管理。

*   选项 B) - 使用 SQL Compare 之类的东西来生成架构更改脚本。这可能会更加灵活和透明，因为我想确切地看到我正在应用到我的生产数据库的架构更改（称我为偏执狂）。

我错过了什么吗？我想会有一些配置来禁用 Main 和 Release 分支中的代码优先迁移（假设数据库将由脚本创建和更新）。除此之外，这感觉像是一个安全的解决方案，但我会重视第二个意见。**

# c# - 单元测试异步操作

> ID：10556350
> 
> 赞同：14
> 
> 时间：2012-05-11T17:59:41.973
> 
> 标签：c#, unit-testing, testing, asynchronous

我想对我拥有的执行异步操作的方法进行单元测试：

```
 Task.Factory.StartNew(() =>
        {
            // method to test and return value
            var result = LongRunningOperation();
        }); 
```

我在我的单元测试（用 c# 编写）中存根了必要的方法等，但问题是在我断言测试之前异步操作没有完成。

我怎样才能解决这个问题？我应该创建 TaskFactory 的模拟或任何其他对异步操作进行单元测试的技巧吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T18:02:36.380

您必须有某种方法来伪造任务创建。

如果您将`Task.Factory.StartNew`调用移至某个依赖项 ( `ILongRunningOperationStarter`)，那么您可以创建一个替代实现，用于`TaskCompletionSource`创建在您希望它们完成的位置完成的任务。

它可能会有点毛茸茸，但*可以*做到。不久前我[在博客上写过这个](https://codeblog.jonskeet.uk/2011/11/25/eduasync-part-17-unit-testing/)——单元测试一个*接收*任务的方法，这当然让事情变得更容易。它在 C# 5 中的 async/await 上下文中，但适用相同的原则。

如果您不想伪造整个任务创建，您可以替换任务工厂，并以这种方式控制时间 - 但老实说，我怀疑这会更麻烦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-02T16:07:18.163

我建议在您的方法中使用特殊的单元测试实现来存根 TaskScheduler。您需要准备代码以使用注入的 TaskScheduler：

```
 private TaskScheduler taskScheduler;

 public void OperationAsync()
 {
     Task.Factory.StartNew(
         LongRunningOperation,
         new CancellationToken(),
         TaskCreationOptions.None, 
         taskScheduler);
 } 
```

在您的单元测试中，您可以使用[本博](http://svengrand.blogspot.de/2013/12/unit-testing-c-code-which-starts-new.html)文中描述的 DeterministicTaskScheduler在当前线程上运行新任务。您的“异步”操作将在您点击第一个断言语句之前完成：

```
[Test]
public void ShouldExecuteLongRunningOperation()
{
    // Arrange: Inject task scheduler into class under test.
    DeterministicTaskScheduler taskScheduler = new DeterministicTaskScheduler();
    MyClass mc = new MyClass(taskScheduler);

    // Act: Let async operation create new task
    mc.OperationAsync();
    // Act:  Execute task on the current thread.
    taskScheduler.RunTasksUntilIdle();

    // Assert
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:42:10.033

尝试这样的事情......

```
object result = null;
Task t =  Task.Factory.StartNew(() => result = LongRunningThing()); 

Task.Factory.ContinueWhenAll(new Task[] { t }, () => 
{
   Debug.Assert(result != null);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-03T11:17:35.057

设置 UI 和后台任务计划，并在单元测试中用这个替换它们。

以下代码是从互联网复制的，很抱歉缺少对作者的引用：

```
 public class CurrentThreadTaskScheduler : TaskScheduler
  {
    protected override void QueueTask(Task task)
    {
      TryExecuteTask(task);
    }

    protected override bool TryExecuteTaskInline(
       Task task,
       bool taskWasPreviouslyQueued)
    {
      return TryExecuteTask(task);
    }

    protected override IEnumerable<Task> GetScheduledTasks()
    {
      return Enumerable.Empty<Task>();
    }

    public override int MaximumConcurrencyLevel => 1;
  } 
```

所以要测试代码：

```
 public TaskScheduler TaskScheduler
    {
      get { return taskScheduler ?? (taskScheduler = TaskScheduler.Current); }
      set { taskScheduler = value; }
    }

    public TaskScheduler TaskSchedulerUI
    {
      get { return taskSchedulerUI ?? (taskSchedulerUI = TaskScheduler.FromCurrentSynchronizationContext()); }
      set { taskSchedulerUI = value; }
    }
  public Task Update()
    {
      IsBusy = true;
      return Task.Factory.StartNew( () =>
                 {
                   LongRunningTask( );
                 }, CancellationToken.None, TaskCreationOptions.None, TaskScheduler )
                 .ContinueWith( t => IsBusy = false, TaskSchedulerUI );
    } 
```

您将编写以下单元测试：

```
[Test]
public void WhenUpdateThenAttributeManagerUpdateShouldBeCalled()
{
  taskScheduler = new CurrentThreadTaskScheduler();
  viewModel.TaskScheduler = taskScheduler;
  viewModel.TaskSchedulerUI = taskScheduler;
  viewModel.Update();
  dataManagerMock.Verify( s => s.UpdateData( It.IsAny<DataItem>>() ) );
} 
```

# streaminsight - StreamInsight 获取时间范围内的最新事件

> ID：10556352
> 
> 赞同：0
> 
> 时间：2012-05-11T17:59:56.720
> 
> 标签：streaminsight

我想考虑基于有效负载的最新事件，即 StockTicksData id 并忽略时间窗口内的任何重复项

**有效载荷和查询**

```
var StockTicksData = new[]
{
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 01), Price = 100, ID = "000361105"    }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 02), Price = 200, ID = "000361105" }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 03), Price = 3000, ID = "000361105" }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 04), Price = 100, ID = "001055102" }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 05), Price = 700, ID = "001084102" }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 06), Price = 500, ID = "001084102" }, 
new { Timestamp = new DateTime(2012, 5, 9, 1, 00, 07), Price = 100, ID = "001084102" }, 
};
var stocks = StockTicksData.ToPointStream(Application, t =>
PointEvent.CreateInsert(t.Timestamp, t),
AdvanceTimeSettings.IncreasingStartTime);

var query = (from e in stocks
        group e by e.ID into ipGroup
        from win in ipGroup.TumblingWindow(TimeSpan.FromSeconds(2), 
            HoppingWindowOutputPolicy.ClipToWindowEnd)
        select new 
        {   
             CusipID = cusipGroup.Key,
             Timestamp = win.Max(e => e.Timestamp),
             Price = 0
        });

var cusipIdGroupCepStream = (from px in query
                         join lz in stocks
                         on new { px.CusipID, px.Timestamp }
                         equals new { lz.CusipID, lz.Timestamp }
                         select new 
                           {
                              CusipId = lz.CusipID,
                              Price = lz.Price,
                              TimeofArrival = lz.Timestamp
                           }); 
```

上面的查询工作正常，但是当我使用输入适配器时，我必须插入一个 cti 事件来刷新输出。这是代码

**Ticks Generator** 它的到达时间为

priceTick.TimeofArrival = DateTime.Now.AddTicks(1);

**输入适配器**

```
.... In a loop
{
currEvent = CreateInsertEvent();
currEvent.StartTime = priceTick.TimeofArrival; **// each event has time arrival from input which is t+1**
currEvent.Payload = new PriceTick { Id = priceTick.Id, Price = priceTick.Price, TimeofArrival = priceTick.TimeofArrival };
  pendingEvent = null;

 Enqueue(ref currEvent);

 // Also send an CTI event
 EnqueueCtiEvent(priceTick.TimeofArrival.AddTicks(1)); **// Added to flush the output**
 } 
```

**相同的查询没有给出带有输入适配器和 cti 事件的预期输出**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:37:10.533

上述查询在 LinqPad 中有效，因为没有要生成的 CTI 事件。使用输入/输出适配器配置时，相同的查询不会吐出完整的结果集。

为了刷新您需要配置的输出，通过输入工厂中的 ITypedDeclareAdvanceTimeProperties 生成 CTI 事件。它负责根据设置生成 CTI 事件。我正在使用以下配置

公共 AdapterAdvanceTimeSettings DeclareAdvanceTimeProperties(StockTickerInputConfig configInfo, EventShape eventShape) { return new AdapterAdvanceTimeSettings(new AdvanceTimeGenerationSettings(configInfo.CtiFrequency, TimeSpan.FromTicks(1)), AdvanceTimePolicy.Adjust); }

在每秒数据频率非常高的 Point 事件的情况下，它会丢弃/不将事件刷新到输出适配器。我必须手动将 LAST CTI 事件排入队列，以确保将结果刷新到输出适配器。

在我的最后一个数据馈送/事件入队后，输入工厂中的当前设置不负责生成最后一个 CTI。我在输入适配器中创建了一个条件来检查这是否是最后一个要入队的事件，然后通过 EnqueueCtiEvent 将 cti 事件入队

如果需要，我可以提供代码。让我知道任何人都有更好的方法来解决这个问题。

# c# - 在 C# 中调用存储过程

> ID：10556354
> 
> 赞同：2
> 
> 时间：2012-05-11T18:00:10.497
> 
> 标签：c#, stored-procedures

我想使用 C# 调用存储过程。

我想为过程调用创建一个简写。

我仍然不想重新定义连接并打开它。如何创建方法 - 我仍然没有打开与数据库的连接？

我使用以下代码：

```
SqlConnection conn = null;
SqlDataReader rdr  = null;

conn = new SqlConnection("");
conn.Open();

SqlCommand cmd  = new SqlCommand("Procedure", conn);
cmd.CommandType = CommandType.StoredProcedure;

rdr = cmd.ExecuteReader();

while (rdr.Read())
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:06:25.133

我不知道我是否理解你的要求，但你的意思是：

```
public static SqlReader executeProcedure(SqlConnection oConn, string commandName, Dictionary<string, object> params)
{
    SqlCommand comm = oConn.CreateCommand();
    comm.CommandType = CommandType.StoredProcedure;
    comm.CommandText = commandName;
    if (params != null)
        foreach(KeyValuePair<string, object> kvp in params)
            comm.Parameters.Add(new SqlParameter(kvp.Key, kvp.Value));
    return comm.ExecuteReader();
} 
```

一个使用示例可能是

```
Dictionary<string, object> paras = new Dictionary<string, object>();
paras.Add("user_name", "Timmy");
paras.Add("date", DateTime.Now);
SqlReader results = executeProcedure(oConn, "sp_add_user", paras);
while (results.Read())
{
    //do something with the rows returned
}
results.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T20:33:53.303

FlyingStreudel 的回答很好，但我已经修改了该代码以制作演示最佳实践的版本（底部的链接）。您还可以使用 Microsoft 的 Enterprise Library，它将为您提供强大的数据访问类。

```
private string _connectionString = "yourconnectionstring"; // from web.config, or wherever you store it
public static SqlDataReader executeProcedure(string commandName, 
                                         Dictionary<string, object> params)
{
    SqlConnection conn = new SqlConnection(_connectionString);
    conn.Open();
    SqlCommand comm = conn.CreateCommand();
    comm.CommandType = CommandType.StoredProcedure;
    comm.CommandText = commandName;
    if (params != null)
    {
        foreach(KeyValuePair<string, object> kvp in params)
            comm.Parameters.Add(new SqlParameter(kvp.Key, kvp.Value));
    }
    return comm.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
} 
```

使用，像这样：

```
Dictionary<string, object> paras = new Dictionary<string, object>();
paras.Add("user_name", "Timmy");
paras.Add("date", DateTime.Now);
using(SqlDataReader results = executeProcedure("sp_add_user", paras))
{
    while (results.Read())
    {
        //do something with the rows returned
    }
} 
```

参考：

[Microsoft 如何在企业库中使用连接](http://goo.gl/fzcHE)

[保持 SqlConnection 打开是 'foo bar'](https://stackoverflow.com/questions/10046214/sqlconnection-and-the-pool-is-keeping-an-open-connection-kung-foo-or-foo-bar)

[从类中返回数据读取器](https://stackoverflow.com/questions/1980404/asp-net-returning-a-reader-from-a-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:04:27.037

```
using (SqlConnection sqlConnection1 = new SqlConnection("Your Connection String")) {
using (SqlCommand cmd = new SqlCommand()) {
  Int32 rowsAffected;

  cmd.CommandText = "StoredProcedureName";
  cmd.CommandType = CommandType.StoredProcedure;
  cmd.Connection = sqlConnection1;

  sqlConnection1.Open();

  rowsAffected = cmd.ExecuteNonQuery();

}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:04:51.060

如果您希望重用此类代码，一种可能的解决方案是将此类方法（执行存储过程并返回结果的方法）包装到应用程序的通用数据访问层中。您必须考虑的变化是针对不返回结果或期望参数的过程。

例如，您可以将此 shell 代码包装为 ExecuteProcedure()，它需要返回数据库的连接字符串。

还有无数其他方法可以完成此类任务，因此您需要确定最适合您的特定要求的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T18:05:33.883

您可以包装此代码并将过程作为参数。像这样的东西：

```
public SqlCommand GetData(string procedure)
{
  var conn = new SqlConnection(connectionString);
  var cmd = new SqlCommand(procedure, conn);

  cmd.CommandType = CommandType.StoredProcedure;
  conn.Open();
  return cmd;
} 
```

此方法的唯一问题是您没有正确处理资源并且依赖调用者这样做。

# css - 将 qt4 小部件设置为比其当前颜色更暗/更亮

> ID：10556357
> 
> 赞同：1
> 
> 时间：2012-05-11T18:00:19.933
> 
> 标签：css, pyqt

我有一个 pyqt4 应用程序，它应该使用任意颜色方案运行。我想通过使它们比样式预定义的颜色更亮或更暗来使一些小部件更明显。我希望它适用于任何整体风格，并且不想在那里硬编码颜色。什么是调用`QWidget.setStyleSheet`方法会实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:14:05.253

我不确定这是可能的。没有要查询和解析的默认样式表，因为它是用户指定的值。

主题可能与平台相关，因此必须对小部件样式 -> 调色板 -> 属性进行大量处理，找出颜色值，并生成修改后的值以在样式表中指定。那时，您最好还是坚持使用调色板并修改它们的值，而不用担心样式表。

# c - Socket: Connect 在超时前会花 2 分钟寻找 IP。如何减少那个时间？

> ID：10556360
> 
> 赞同：2
> 
> 时间：2012-05-11T18:00:39.213
> 
> 标签：c, sockets, timeout, connect

我想减少 socket:connect 查找要连接的 IP/端口所需的允许超时时间？在某些使用 IP 10.0.0.x 的网络路由器（如 Netgear）上，超时只需不到一秒。

注意：“选择”稍后出现

```
host = gethostbyname("xxx");//invalid IP, 

memcpy(&(sin.sin_addr), host->h_addr, host->h_length);
sin.sin_family = host->h_addrtype;
sin.sin_port = htons(4000);

s = socket(AF_INET, SOCK_STREAM, 0);
hConnect = connect(s, (struct sockaddr*)&sin, sizeof(sin));//sits here for 2 minutes before moving on to the next line of code

bConn = 0;// no connect
if (hConnect == 0) {
    bConn = 1;// connect made
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:55:11.513

在调用 之前将套接字设置为非阻塞`connect()`，然后在其上执行`select()`or`poll()`以找出其上发生的任何事件。

注意：使用此设置，您将获得非零回报，`connect()`并且在没有连接但仍在尝试做的情况下返回并`errno`设置为。`EINPROGRESS``connect()`

有关更多信息，请参阅的手册页`ERRORS`部分。`connect()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T19:00:14.460

执行此操作的标准方法分为两个步骤：

1.  使用 O_NONBLOCK 连接（）
2.  使用 select() 超时

# amazon-ec2 - 在 AWS 服务器上运行脚本

> ID：10556362
> 
> 赞同：6
> 
> 时间：2012-05-11T18:00:45.940
> 
> 标签：amazon-ec2, amazon-web-services

我有一个脚本需要每天运行一次，需要大量内存。我想在专用的亚马逊盒子上运行它。

是否有一些自动化的方法来构建一个盒子，下载所有必需的软件（如 ruby​​），然后运行我的脚本。脚本运行后，我想关闭盒子。

我能想到的两个选择是：

1.  我正在考虑破解 EMR 来做到这一点。（我的脚本是针对空目录的映射器）
2.  Chef - 对于一个简单的脚本来说，这似乎太多了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T19:06:18.873

您可以使用官方 Ubuntu AMI、官方 Amazon Linux AMI 和任何其他支持用户数据脚本概念的 AMI 在启动时完成设置新的 EC2 实例。

创建一个脚本（bash、Perl、Python、

1.  不管），以#开头！
2.  运行 EC2 实例时将此脚本作为用户数据传递。
3.  该脚本将在首次启动时自动以 root 身份运行。

这是我介绍用户数据脚本概念的文章：

> 使用用户数据脚本自动设置 EC2 实例
> [http://alestic.com/2009/06/ec2-user-data-scripts](http://alestic.com/2009/06/ec2-user-data-scripts)

您的用户数据脚本可以安装所需的软件，对其进行配置，安装您的工作脚本，并设置一个每天运行一次工作脚本的 cron 作业。

**增强：**

如果安装脚本的运行时间不长（例如，不到一小时或几小时），那么您甚至不必每天 24 小时运行单个专用实例。您可以改为使用让 AWS 定期为您启动实例的方法。

这是我写的一篇文章，它通过示例命令提供了有关此方法的详细信息：

> 使用 Auto Scaling 按定期计划运行 EC2 实例
> [http://alestic.com/2011/11/ec2-schedule-instance](http://alestic.com/2011/11/ec2-schedule-instance)

一般方法是使用 Auto Scaling 定期使用您的用户数据脚本启动实例。您的作业将在完成后终止实例。他们的关键是暂停 Auto Scaling 重新启动已终止实例的正常愿望，这样您就无需为正在运行的实例付费，直到您的工作下次开始。

# css - 是否可以在 HTML5 中省略占位符/水印？

> ID：10556365
> 
> 赞同：23
> 
> 时间：2012-05-11T18:01:04.623
> 
> 标签：css, html, mobile-safari

我添加了这些CSS。但我不能让占位符/水印有省略号。他们确实有红色字体。

```
input::-webkit-input-placeholder {
    color:    red !important;
    max-width:  95% !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    overflow: hidden !important;
}

input:-moz-placeholder {
    color:    red !important;
    max-width:  95% !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    overflow: hidden !important;
} 
```

由于我正在为移动设备工作，我希望它可以在 Safari 中工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-04T16:56:50.777

# 是的

可以很简单地实现占位符的溢出省略：

```
::placeholder{
    text-overflow:ellipsis;
} 
```

```
::placeholder{
    text-overflow:ellipsis;
}

input{width:150px;}
```

```
<input placeholder="A long placeholder to demonstrate"></input>
```

也可以使用属性选择器来实现结果：

```
[placeholder]{
    text-overflow:ellipsis;
} 
```

> 这也会增加在某些浏览器中将省略号添加到输入值的副作用。这可能是也可能不是所希望的。

```
[placeholder]{
    text-overflow:ellipsis;
}

input{width:150px;}
```

```
<input placeholder="A long placeholder to demonstrate"></input>
<input value="A long value to demonstrate"></input>
```

* * *

在 Firefox 和 Chrome 中测试和工作。

像往常一样，IE 不会打球！

* * *

## 老浏览器

*   需要对旧版浏览器的支持？
*   IE玩不好？

我创建了一个小 CSS hack 来模拟占位符。使用此代码来模拟您的输入占位符。它有点脏，但可以提供早至**IE6**的支持。

```
.ellipsis{
  box-sizing:border-box;
  position:relative;
  padding:0 5px;
  background:#fff;
  color:rgba(0,0,0,0.5);
  width:100%;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.ellipsis input{
  box-sizing:border-box;
  position:absolute;
  top:0;
  left:0;
  height:100%;
  width:100%;
  display:block;
  background:none;
  border:1px solid #ddd;
  color:#000;
  padding:0 5px;
}
.ellipsis input:focus{
  background:#fff;
}
```

```
<div class="ellipsis">
  A Long Placeholder to demonstrate A Long Placeholder to demonstrate A Long Placeholder to demonstrate
  <input></input>
</div>
```

超出此范围的支持将需要 javascript。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-05-12T06:14:08.050

使用`:placeholder-shown`选择器效果很好，可以确保任何文本输入都不会被隐藏。 [兼容性也很稳固](https://caniuse.com/css-placeholder-shown)。

```
input:placeholder-shown {
  text-overflow: ellipsis;
}
```

```
<input placeholder="A Long Placeholder to demonstrate"></input>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T14:53:36.447

要覆盖尽可能多的浏览器，请尝试以下方法：

```
[placeholder]{
    text-overflow:ellipsis;
}
::-webkit-input-placeholder { /* Chrome/Opera/Safari */
    text-overflow:ellipsis;
}
::-moz-placeholder { /* Firefox 19+ */
    text-overflow:ellipsis;
}
:-ms-input-placeholder { /* IE 10+ */
    text-overflow:ellipsis;
}
:-moz-placeholder { /* Firefox 18- */
    text-overflow:ellipsis;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T03:45:30.073

根据[规范](http://dev.w3.org/csswg/css3-ui/#text-overflow)，`text-overflow`仅适用于块容器，如***div***和***p***标签。而且由于输入不是容器，因此您不能应用此 CSS 规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-19T08:32:46.920

只是`input { text-overflow: ellipsis; }`没有任何占位符伪代码就可以了。

# spring - 如何在 Hibernate + Spring 中使用 group_concat

> ID：10556368
> 
> 赞同：2
> 
> 时间：2012-05-11T18:01:22.973
> 
> 标签：spring, hibernate

`addSqlFunction()`当我使用 hibernate.cfg.xml 文件配置休眠时，如何在 spring 中使用？或者有没有其他方法可以使用 group_concat？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:07:56.680

如果您使用 Spring 的 HibernateTemplate 与 Hibernate 集成，有一个简单的解决方案。覆盖 Spring`LocalSessionFactoryBean`并实现方法`postProcessConfiguration`。

隧道尽头的光（config 是方法传递给你的对象`postProcessConfiguration`）：

```
config.addSqlFunction( “group_concat”, new StandardSQLFunction("group_concat", new StringType()); 
```

# java - 画布中的 MouseListener 不起作用

> ID：10556369
> 
> 赞同：1
> 
> 时间：2012-05-11T18:01:26.080
> 
> 标签：java, swing, animation, canvas, mouselistener

我在尝试用 Java 制作的游戏时遇到问题。我正在尝试将 MouseListener 附加到我的画布上，但是，当我单击画布时，什么也没有发生。我想我可能将 MouseListener 附加到错误的东西上，但我不知道将它附加到什么。我尝试将它附加到 JFrame 和画布上。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

import java.io.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import java.util.Random;

public class Gravity extends Canvas {

    public static final int screenw = 1024;
    public static final int screenh = 768;

    public static Random gen = new Random();

    public static Boolean started = false;

    public static int[] starx = new int[100];
    public static int[] stary = new int[100];
    public static Color[] starc = new Color[100];

    public static JFrame frame;
    public static Gravity canvas;
    public static Image buffer;
    public static Graphics bg;

    public static int[] xh = new int[1000];
    public static int[] yh = new int[1000];

    public static int i = 0;

    public static Image title;

    public static ArrayList<Integer> ptx = new ArrayList<Integer>();
    public static ArrayList<Integer> pty = new ArrayList<Integer>();
    double x = 100;
    double y = 100;

    public Gravity(){
    }

    public void paint (Graphics g) {
        frame.addMouseListener(new MouseListener(){
            public void mouseClicked(MouseEvent e){
                started = true;
                System.out.println("Mouse was clicked");
            }

            public void mouseEntered(MouseEvent arg0) {}
            public void mouseExited(MouseEvent arg0) {}
            public void mousePressed(MouseEvent arg0) {}
            public void mouseReleased(MouseEvent arg0) {}
        });

        buffer = createImage(screenw, screenh);
        bg = buffer.getGraphics();

        int w = getWidth();
        int h = getHeight();

        double px = getWidth()/2; 
        double py = getHeight()/2;

        bg.setColor(Color.BLACK);
        bg.fillRect(0, 0, w, h); //black background

        for (int j=0; j < 100; j++){ //make stars
            starx[j] = gen.nextInt(w);
            stary[j] = gen.nextInt(h);
            starc[j] = new Color(gen.nextInt(100)+156, gen.nextInt(100)+156, gen.nextInt(100)+156);
            bg.setColor(starc[j]);
            bg.drawLine(starx[j], stary[j], starx[j]+2, stary[j]+2);
            bg.drawLine(starx[j], stary[j]+2, starx[j]+2, stary[j]);
        }

        try {
            title = ImageIO.read(new ByteArrayInputStream(Base64.decode(""))); //I have omitted the Base64 code for the image for my title screen
        } catch (IOException e) {
            e.printStackTrace();
        }

        bg.drawImage(title, 100, 100, null);
        g.drawImage(buffer, 0, 0, null);

        while (!started){
            try {
                Thread.sleep(50);
            } catch (InterruptedException e1) {
                e1.printStackTrace();
            }
        }

        double xvel = -15;
        double yvel = 10;

        for (int j=0; j < 100; j++){ //store stars
            starx[j] = gen.nextInt(w);
            stary[j] = gen.nextInt(h);
            starc[j] = new Color(gen.nextInt(100)+156, gen.nextInt(100)+156, gen.nextInt(100)+156);
        }

        Image test = createImage(200,200);
        Graphics testg = test.getGraphics();
        testg.drawLine(50,50,150,150);

        while(true){
            g.drawImage(buffer, 0,0, null);
            try {
                Thread.sleep(33);
            } catch (Exception e) {
                e.printStackTrace();
            }

            bg.setColor(Color.BLACK);
            bg.fillRect(0, 0, w, h); //black background

            for (int j=0; j < 100; j++){ //draw stars
                bg.setColor(starc[j]);
                bg.drawLine(starx[j], stary[j], starx[j]+2, stary[j]+2);
                bg.drawLine(starx[j], stary[j]+2, starx[j]+2, stary[j]);
            }

            bg.setColor(Color.BLUE);

            if (i > 0){
                for (int z=0; z < i-1; z++){
                    bg.drawLine(ptx.get(z), pty.get(z), ptx.get(z+1), pty.get(z+1));
                }
            }

            bg.setColor(Color.CYAN);
            bg.fillOval((int)px, (int)py, 25, 25); //planet

            bg.setColor(Color.RED);
            bg.fillRect((int)(x-5),(int)(y-5),10,10); //ship

            double fg = (5*50000)/(Math.pow(dist(x,y,px,py),2));

            double m = (y-py)/(x-px);
            double ms = Math.sqrt(Math.abs(m));
            if (m < 0) ms = -ms;

            double xchg = fg;
            double ychg = fg*ms;

            if (x > px){
                xchg = -xchg;
                ychg = -ychg;
            }

            xvel += xchg;
            yvel += ychg;

            x += xvel;
            y += yvel;

            ptx.add((int)x);
            pty.add((int)y);

            i++;
        }
    }

    public static void main(String[] args){

        canvas = new Gravity();
        frame = new JFrame();
        frame.setSize(screenw, screenh);
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(canvas);

        frame.setVisible(true);
    }

    public static double dist(double x1, double y1, double x2, double y2){
        double x = x2-x1;
        double y = y2-y1;
        return Math.sqrt((x*x)+(y*y));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:38:43.613

一般提示，以点的形式：

1.  不要将 AWT（例如`Canvas`）与 Swing（例如`JFrame`）组件混合使用。代替 Canvas，使用 a`JPanel`和 override`paintComponent(Graphics)`而不是`paint(Graphics)`.
2.  不要打电话`Thread.sleep(n)`给美国东部时间。而是使用基于 Swing 的`Timer`调用`repaint()`
3.  不要对paint方法执行长时间运行的操作，尤其是启动一个无限循环！甚至缓冲区图像的创建也应该只在屏幕尺寸发生变化的情况下进行。（左为“待办事项”-BNI）
4.  在构造函数或方法中添加`MouseListener`一次，`init()`而不是每次调用paint。
5.  强烈推荐 Nate 的所有笔记编号列表。

试试这段代码，并仔细比较原始代码以查看更改。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Dimension;
import java.awt.event.*;
import java.util.ArrayList;

import java.io.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import java.util.Random;

public class Gravity extends JPanel {

    public static final int screenw = 800;
    public static final int screenh = 600;

    public static Random gen = new Random();

    public static int[] starx = new int[100];
    public static int[] stary = new int[100];
    public static Color[] starc = new Color[100];

    public static Image buffer;
    public static Graphics bg;

    public static int[] xh = new int[1000];
    public static int[] yh = new int[1000];

    public static int i = 0;

    public static ArrayList<Integer> ptx = new ArrayList<Integer>();
    public static ArrayList<Integer> pty = new ArrayList<Integer>();
    double x = 100;
    double y = 100;

    Timer timer;

    public Gravity(){
        // set thre PREFERRED size!
        setPreferredSize(new Dimension(screenw, screenh));
        addMouseListener(new MouseListener(){
                    public void mouseClicked(MouseEvent e){
                        System.out.println("Mouse was clicked");
                        timer.start();
                    }

                    public void mouseEntered(MouseEvent arg0) {}
                    public void mouseExited(MouseEvent arg0) {}
                    public void mousePressed(MouseEvent arg0) {}
                    public void mouseReleased(MouseEvent arg0) {}
        });
        ActionListener animation = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                repaint();
            }
        };
        timer = new Timer(50, animation);
    }

    @Override
    public void paintComponent(Graphics g) {
        buffer = createImage(screenw, screenh);
        bg = buffer.getGraphics();

        int w = getWidth();
        int h = getHeight();

        double px = getWidth()/2;
        double py = getHeight()/2;

        bg.setColor(Color.BLACK);
        bg.fillRect(0, 0, w, h); //black background

        for (int j=0; j < 100; j++){ //make stars
            starx[j] = gen.nextInt(w);
            stary[j] = gen.nextInt(h);
            starc[j] = new Color(gen.nextInt(100)+156, gen.nextInt(100)+156, gen.nextInt(100)+156);
            bg.setColor(starc[j]);
            bg.drawLine(starx[j], stary[j], starx[j]+2, stary[j]+2);
            bg.drawLine(starx[j], stary[j]+2, starx[j]+2, stary[j]);
        }

        g.drawImage(buffer, 0, 0, null);

        double xvel = -15;
        double yvel = 10;

        for (int j=0; j < 100; j++){ //store stars
            starx[j] = gen.nextInt(w);
            stary[j] = gen.nextInt(h);
            starc[j] = new Color(gen.nextInt(100)+156, gen.nextInt(100)+156, gen.nextInt(100)+156);
        }

        Image test = createImage(200,200);
        Graphics testg = test.getGraphics();
        testg.drawLine(50,50,150,150);

        g.drawImage(buffer, 0,0, null);
        try {
            Thread.sleep(33);
        } catch (Exception e) {
            e.printStackTrace();
        }

        bg.setColor(Color.BLACK);
        bg.fillRect(0, 0, w, h); //black background

        for (int j=0; j < 100; j++){ //draw stars
            bg.setColor(starc[j]);
            bg.drawLine(starx[j], stary[j], starx[j]+2, stary[j]+2);
            bg.drawLine(starx[j], stary[j]+2, starx[j]+2, stary[j]);
        }

        bg.setColor(Color.BLUE);

        if (i > 0){
            for (int z=0; z < i-1; z++){
                bg.drawLine(ptx.get(z), pty.get(z), ptx.get(z+1), pty.get(z+1));
            }
        }

        bg.setColor(Color.CYAN);
        bg.fillOval((int)px, (int)py, 25, 25); //planet

        bg.setColor(Color.RED);
        bg.fillRect((int)(x-5),(int)(y-5),10,10); //ship

        double fg = (5*50000)/(Math.pow(dist(x,y,px,py),2));

        double m = (y-py)/(x-px);
        double ms = Math.sqrt(Math.abs(m));
        if (m < 0) ms = -ms;

        double xchg = fg;
        double ychg = fg*ms;

        if (x > px){
            xchg = -xchg;
            ychg = -ychg;
        }

        xvel += xchg;
        yvel += ychg;

        x += xvel;
        y += yvel;

        ptx.add((int)x);
        pty.add((int)y);

        i++;
    }

    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame();

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().add(new Gravity());
                frame.setResizable(false);
                frame.pack();

                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }

    public static double dist(double x1, double y1, double x2, double y2){
        double x = x2-x1;
        double y = y2-y1;
        return Math.sqrt((x*x)+(y*y));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:21:44.780

由于永远不会退出的 while (!started) 循环，您的 paint() 方法正在占用处理鼠标单击事件的线程。started 永远不会为真，因为永远不会调用 MouseListener 的 mouseClicked()，因为 paint() 方法正在等待 started 为真！如果删除该循环，while (true) 循环将产生类似的效果。在paint() 运行时发生的任何鼠标事件都将排队，直到paint() 返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:26:43.333

使用 JComponent 而不是 Canvas。您需要将鼠标侦听器添加到该对象。您还需要在构造函数中设置鼠标侦听器，而不是 paint() 方法。

编辑：正如@AndrewThompson 指出的那样，您在 paint() 方法中做了很多工作。

```
public Gravity() {
    addMouseListener(new MouseListener() {

        @Override
        public void mouseClicked(MouseEvent e) {
            System.out.println("Mouse was clicked");
        }

        @Override
        public void mouseEntered(MouseEvent arg0) {
        }

        @Override
        public void mouseExited(MouseEvent arg0) {
        }

        @Override
        public void mousePressed(MouseEvent arg0) {
        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
        }
    });
}

@Override
public void paint(Graphics g) {

    buffer = createImage(screenw, screenh);
    bg = buffer.getGraphics();

    ...

    bg.setColor(Color.BLACK);
    bg.fillRect(0, 0, w, h); // black background

    for (int j = 0; j < 100; j++) { // make stars
        ...
    }

    bg.drawImage(title, 100, 100, null);
    g.drawImage(buffer, 0, 0, null);

    double xvel = -15;
    double yvel = 10;

    for (int j = 0; j < 100; j++) { // store stars
        ...
    }

    Image test = createImage(200, 200);
    Graphics testg = test.getGraphics();
    testg.drawLine(50, 50, 150, 150);

    g.drawImage(buffer, 0, 0, null);
    bg.setColor(Color.BLACK);
    bg.fillRect(0, 0, w, h); // black background

    for (int j = 0; j < 100; j++) { // draw stars
        ...
    }

    bg.setColor(Color.BLUE);

    if (i > 0) {
        for (int z = 0; z < i - 1; z++) {
            bg.drawLine(ptx.get(z), pty.get(z), ptx.get(z + 1), pty.get(z + 1));
        }
    }

    bg.setColor(Color.CYAN);
    bg.fillOval((int) px, (int) py, 25, 25); // planet

    bg.setColor(Color.RED);
    bg.fillRect((int) (x - 5), (int) (y - 5), 10, 10); // ship

    ....

    ptx.add((int) x);
    pty.add((int) y);
}

public static void main(String[] args) {
    ...

    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

    ...
} 
```

关于您的代码的注释：

1.  避免制作字段`public static`。99.9% 的情况下这是不必要的，而且通常会在以后导致麻烦。
2.  绘画代码似乎不必要地使用了缓冲区——`test`目前根本没有使用图像！
3.  我删除了`while(true)`循环，但注意到您正在绘制图像，修改图像，然后再次绘制图像。您可能可以一口气做到这一点。
4.  您应该能够`Image`完全避免使用缓冲区，因为每次`paint()`调用时都会创建一个新缓冲区，并在开始时将其清除。只需将图形直接绘制到`g`.
5.  避免在`paint()`方法内执行 I/O。在构建期间或在后台线程中加载图像。

# c++ - Eclipse CDT 编辑器无法识别 OpenGL 扩展

> ID：10556371
> 
> 赞同：1
> 
> 时间：2012-05-11T18:01:34.387
> 
> 标签：c++, eclipse, opengl, eclipse-cdt, glew

我在 Eclipse 中使用顶点数组对象和顶点缓冲区对象，但编辑器似乎无法识别函数声明。该程序编译和执行没有任何抱怨。

![截屏](../Images/88582f14a463d648ecab27a557c79de7.png)

（请注意，错误是“无法解析功能。”）

我试过同时使用 GLee 和 GLEW，但结果是一样的。关于如何让 Eclipse 识别编辑器中的功能的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T21:56:17.060

在某些情况下，重建索引时它可能会起作用（右键单击项目 > 索引 > 重建）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:33:13.080

我遇到了这个确切的问题，唯一解决它的是启动一个全新的 C++ 项目，制作第**一个**include `#include <GL/glew.h>`，然后复制其余代码。如果项目设置时没有 glew.h 作为第一次导入，它永远不会由于某种原因重新配置自己。

我尝试在 Eclipse 中手动弄乱项目和全局属性；除了上述之外，没有任何效果。

RE：Nicol Bolas 的回答是，Eclipse 确实无法很好地解析宏以生成所有工具提示和自动完成，但它会识别函数并强制执行正确的参数。

只需确保您拥有最新版本的 Eclipse CDT（和 GLEW）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:11:43.740

通常，像这样的 OpenGL 函数指针必须由解析为某个函数名称的宏来定义。这对 IDE 及其试图弄清楚发生了什么的尝试造成了严重破坏。

最终，如果您的 IDE 无法处理它，您只需要找到一种方法来忍受它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T03:12:35.550

我不知道 OpenGl Extensions 是否有什么特别之处，但我确实知道通常我必须深入到包含我的库的 .h 文件的根文件夹，并将所有文件夹显式添加到我的包含路径中。添加最顶层的父级并没有为编辑器削减它。一旦我将它们全部添加完毕，我就会重新构建索引（通常是为了让预先输入的功能正常工作）。奇怪的是，编辑器比编译器更挑剔，但我已经看到它发生在多个库中。

# javascript - 两个美元符号之间的文本 JavaScript 正则表达式

> ID：10556373
> 
> 赞同：1
> 
> 时间：2012-05-11T18:01:52.637
> 
> 标签：javascript, regex

我正在尝试使用 RegEx 选择两个美元符号之间的所有字符串。

```
text = text.replace(/\$.*\$/g, "meow"); 
```

我正在尝试将两个美元符号之间的所有文本变成“喵”（占位符）。

**编辑：** 原始问题发生了变化，因为解决方案过于本地化，但接受的答案是有用的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:06:05.040

`$text$`这非常接近您想要的，但是如果您的字符串中有多对，它将失败。如果你让你的`.*`中继器变得懒惰，它会解决这个问题。例如，

```
text = text.replace(/\$.*?\$/g, "meow"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T18:12:14.030

我看到一个问题：如果您有多个“模板”，例如

aasdasdsadsdsa $a$ dasdasdsd $b$ asdasdasdsa

您的正则表达式会将 '$a$ dasdasdsd $b$' 视为两个 dolar 信号之间的文本。您可以使用不太具体的正则表达式，例如

/\$[^$]*\$/​​g

在这个例子中考虑两个字符串

# ruby-on-rails - Tire Gem Ruby on Rails 多面搜索问题

> ID：10556375
> 
> 赞同：1
> 
> 时间：2012-05-11T18:01:55.833
> 
> 标签：ruby-on-rails, elasticsearch, faceted-search, tire

我正在尝试复制我使用轮胎宝石的工作卷曲请求。但是，当使用该库时，它似乎不允许我在一个方面设置多个字段。我想设置术语和过滤器字段，但是它们只是相互覆盖。这是我试图复制的 curl 请求的工作方面部分： "facets": { "person_value_f": { "terms": { "field":"person_value_f", "size":10 }, "nested" ：“档案”，“facet_filter”：{“term”：{“person_value_f”：“NO”}}}}

这是我尝试复制的代码： facet "person_value_f", :nested => "dossiers" do filter(person_value_f,"NO") terms "person_value_f" end

作为术语是最后一行代码，它是 curl 命令中唯一包含的部分。看一下轮胎库，它似乎并没有让你这样做，这看起来非常非常奇怪。如果我的 facet 是 person_value_f 并且我想看到的值是“NO”，我怎么能厌倦基本上做分面导航？提前致谢

# java - 访问 N 深度的布局元素

> ID：10556378
> 
> 赞同：0
> 
> 时间：2012-05-11T18:02:15.557
> 
> 标签：java, php, android

我在这里有一个非常烦人的问题，因为我仍在努力内化我正在做的每一件事，

我目前有一个 LinearLayout，然后在 Activity 的 onCreate 上，我将使用按钮填充或膨胀其他几个 LinearLayout，我的问题是，当我尝试访问按钮时，似乎我没有得到任何接近或更深LinearLayout，我能得到的只是 LinearLayout(Parent) 和另一个 LinearLayout(Children)，我相信有一种方法，我只是完全困惑如何去做。

```
LinearLayout
 ->LinearLayout(Child1)->Button1, Button2, Button3
 ->LinearLayout(Child2)->Button4, Button5, Button6 
```

我如何能够访问和获取按钮？

我的来源；

```
for (int x=0; x<ll.getChildCount(); x++){
  View v = ll.getChildAt(x);
  Class c = v.getClass();
  if(c == LinearLayout.class){
    for(int y=0; y< ; y++){
      **I know there is something that must be done here, likewise, is this the most
      efficient way of doing things?
    }
  }
 Log.i("test", c.getName());
} 
```

XML 中只有 LinearLayout(Parent) 存在，其他的都是膨胀的运行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:20:49.067

您应该能够简单地`v`转换为 a `LinearLayout`，然后像访问其父级一样访问其子级。就像是：

```
for (int x=0; x<ll.getChildCount(); x++){
  View v = ll.getChildAt(x);
  Class c = v.getClass();
  if(c == LinearLayout.class){
    //Cast to LinearLayout since View doesn't expose a way to access children
    LinearLayout innerLayout = (LinearLayout)v;
    for(int y=0; y<innerLayout.getChildCount() ; y++){
      Button b = (Button)innerLayout.getChildAt(y);

      //Do something with b
    }
  }
 Log.i("test", c.getName());
} 
```

根据您的确切层次结构，您可以通过删除反射并简单地进行空检查来简化此操作（如果需要，将其包装在 try/catch 中并捕获 a `ClassCastException`）。在需要遍历动态生成的布局树的情况下，我通常会这样做：

```
for (int i = 0; i < outerLayout.getChildCount(); ++i)
{
    try
    {
        LinearLayout innerLayout = (LinearLayout)outerLayout.getChildAt(i);

        if (innerLayout != null)
        {
            for (int j = 0; j < innerLayout.getChildCount(); ++j)
            {
                Button btn = (Button)innerLayout.getChildAt(j);

                //Do something with btn
            }
        }
    }
    catch (ClassCastException cEx)
    {
        Log.w("WARN", "Unexpected child type in outerLayout. " + cEx.getMessage());
    }
} 
```

这是一个未经测试的示例（可能需要更好的异常处理，具体取决于您的要求和布局），但希望它能为您提供总体思路。如果您想更加与类型无关，也可以使用强制转换来[`ViewGroup`](http://developer.android.com/reference/android/view/ViewGroup.html)代替。如果需要，这将允许您潜在地使用不同类型的布局容器作为子类，因为它们是子类`ViewGroup`（这是它们继承`getChildAt()`和继承的地方`getChildCount()`）。

# c++ - 使用 C++ TR1 生成随机数

> ID：10556379
> 
> 赞同：1
> 
> 时间：2012-05-11T18:02:18.037
> 
> 标签：c++, random, distribution, tr1, normal-distribution

我正在尝试从正态分布中生成随机数。当代码：

```
normal(eng) 
```

出现在 main() 中，程序运行正常。但是，如果它是从另一个函数调用的，则来自 main 的下一次调用将返回先前生成的相同值。下面是一些说明这一点的代码。输出的前几行是：

```
-0.710449
-0.710449
0.311983
0.311983
1.72192
1.72192
0.303135
0.303135
0.456779
0.456779 
```

有谁知道为什么会这样？

编译器是 Windows 上的 gcc 4.4.1。

```
#include <iostream>
#include <cmath>
#include <ctime>
#include <tr1/random>

typedef std::tr1::ranlux64_base_01 Engine;
//typedef std::tr1::mt19937 Engine;
typedef std::tr1::normal_distribution<double> Normal;

double random_normal(Engine eng, Normal dist) {
    return dist(eng);
}

int main ( int argc, char** argv ) {
    Engine eng;
    eng.seed((unsigned int) time(NULL));

    Normal normal(0,1);

    for (int i = 0; i < 100; i++)
    {
        std::cout << random_normal(eng, normal) << std::endl;
        std::cout << normal(eng) << std::endl;   
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:07:05.497

发生这种情况是因为您将引擎按值传递给 random_normal。random_normal 获取引擎的副本，因此原始引擎没有修改其状态，直接使用原始引擎将产生与 random_normal 获得的相同结果。

如果您修改 random_normal 以通过引用获取引擎：

```
double random_normal(Engine &eng, Normal Dist); 
```

那么原始引擎将被修改，您将不会得到重复的值。所有的标准发行版都通过引用它们的引擎。例如：

```
template<class IntType = int>
class uniform_int_distribution
{
...
    // generating functions
    template<class URNG>
    result_type operator()(URNG& g); 
```

# c++ - 解析树中的一元和二元减号

> ID：10556381
> 
> 赞同：7
> 
> 时间：2012-05-11T18:02:36.723
> 
> 标签：c++, operator-precedence, unary-operator, parse-tree, binary-operators

我正在创建一个包含类似于以下表达式的解析树

`3 - 4 * 8`

或者

`8 * -5`

或者

`-(10 * 1)`

我需要一种方法来区分一元和二元减号。我的语法现在的方式是首先达到二进制减号，但我正在考虑更改它并添加一个包含最后一个变量的标志变量。

例如：如果是`5 - 6`

该标志持有 5，如果它看到减号并且标志是一个数字，则跳过一元并转到二进制。

但是我不确定如何在 C++ 中实现这一点

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T18:13:15.370

实现解析器的最简单方法是使用[Recursive Descent](http://www.engr.mun.ca/~theo/Misc/exp%5fparsing.htm)方法。确保二进制减号的优先级高于一元减号，例如在引用的站点中：

```
 E -->  | E "+" E
        | E "-" E
        | "-" E
        | E "*" E
        | E "/" E
        | E "^" E
        | "(" E ")"
        | v 
```

# jquery - 测试具有输入类型文本的元素是否存在jquery

> ID：10556382
> 
> 赞同：0
> 
> 时间：2012-05-11T18:02:39.557
> 
> 标签：jquery, html

我想测试一个元素是否存在，但我不能这样做，`$('#id')length > 0`因为我正在测试一个可能不包含任何字符的输入元素，然后即使它存在它也会导致 0...

我如何测试这个元素是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:09:05.797

`length`属性未返回元素中的字符。但是 jQuery 对象中的元素数量。所以你应该很好地在你的情况下使用长度属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:05:05.640

代码中有错字！？

```
$('#id').length > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:09:35.363

这样做，[JsFiddle 上的 Demo](http://jsfiddle.net/cT5Zh/2/)

使用 jQuery

```
$('#id').length > 0 
```

使用 Javascript

```
if(document.getElementById('ID') != null)
{
    alert("Element found");
} 
```

# php - 从mysql表中选择最新元素

> ID：10556385
> 
> 赞同：0
> 
> 时间：2012-05-11T18:02:56.217
> 
> 标签：php, mysql

我需要编写一个查询来使用 mysql 表从两列中检索值

我的桌子有以下结构

```
| ID |  user_id   |        datetime     |        message     | 
| 1  |     21     | 2012-05-10 04:13:01 |        message1    |  
| 2  |     07     | 2012-05-10 04:17:51 |        message2    |  
| 3  |     21     | 2012-05-11 04:21:51 |        message3    | 
| 4  |     21     | 2012-05-11 04:43:51 |        message4    | 
| 5  |     07     | 2012-05-11 04:21:51 |        message5    | 
| 5  |     21     | 2012-05-11 04:43:51 |        message6    | 
```

我写了以下查询

$query="SELECT MAX(datetime) FROM `messages`where user_id=21 and date=2012-05-11";

但我没有从表中获取最新记录我得到空值

帮助我们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:06:04.327

您应该使用`DATE(date)`来获取时间戳的日期。MySQL 函数`DATE()`只提取没有小时、分钟和秒的日期。

这是您的查询：

```
SELECT MAX(datetime) 
FROM messages
WHERE user_id = 21 AND DATE(date) = '2012-05-11' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:06:11.560

```
$query="SELECT MAX(datetime) FROM messages where user_id=21 and date LIKE '2012-05-11%'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:05:34.500

您是否尝试过以下操作？

```
$query="SELECT MAX(datetime) FROM messages where user_id=21"; 
```

**更新：** 在您的问题中，您没有指定是否要检索某个日期的最后一条记录。如果你这样做，你需要使用 MySQL 的[date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:09:31.427

您的查询要求 ".....date=2012-05-11";" 但您的表没有名为 date 的字段？您的意思是日期时间吗？如果是这样，您可能想尝试 ".....日期时间如'2012-05-11%'";

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T18:11:18.837

您在寻找最新的记录吗？你可以用一个子查询来得到这个：

```
$query = "SELECT * FROM messages WHERE datetime = (SELECT MAX(datetime) FROM messages)"; 
```

# java - Java - 将类型列表转换为数组

> ID：10556388
> 
> 赞同：1
> 
> 时间：2012-05-11T18:03:04.640
> 
> 标签：java, arrays, list, reflection

这是我的方法

```
public AuctionItem[] getOpenAuctions() throws RemoteException {

    return itemList.toArray((AuctionItem[]) java.lang.reflect.Array
            .newInstance(itemList.getClass(), itemList.size()));

} 
```

这是我的错误

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.util.LinkedList; cannot be cast to [LAuction.AuctionItem;
at Auction.AuctionImpl.getOpenAuctions(AuctionImpl.java:44)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
at sun.rmi.transport.Transport$1.run(Unknown Source)
at sun.rmi.transport.Transport$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)
at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
at sun.rmi.server.UnicastRef.invoke(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
at $Proxy0.getOpenAuctions(Unknown Source)
at Seller.SellerMain.main(SellerMain.java:38) 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T18:04:47.800

尝试：

```
return itemList.toArray(new AuctionItem[itemList.size()]); 
```

您编写的代码的问题是`itemList.getClass()`返回 class `LinkedList`。因此，该`Array.newInstance()`方法正在创建一个`LinkedList[]`，然后您尝试将其类型转换为`AuctionItem[]`. 由于这两种类型的赋值不兼容，所以它抛出一个`ClassCastException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:07:34.870

`itemList.getClass()`返回`LinkedList.class`，因为它是一个 LinkedList。 `itemList.peek().getClass()`会解决这个问题，但前提是列表至少有一个元素。

为什么不只是：

```
public AuctionItem[] getOpenAuctions() {
    return itemList.toArray(new AuctionItem[itemList.size()]);
} 
```

# mysql - 如何获取表中可用的所需记录？

> ID：10556391
> 
> 赞同：1
> 
> 时间：2012-05-11T18:03:15.180
> 
> 标签：mysql, sql

我正在尝试根据使用 mysql 的条件在表之间获取记录。这是我的桌子。表名：trans_table，它有两个字段。

```
item    transaction
-----   -----------
item1   b
item2   b
item3   b
item3   c
item4   d
item5   b 
```

我正在尝试获取仅具有事务 b 的项目。因此，结果不包含任何其他事务。所需的输出将是这样的

```
item   transaction
-----  -----------
item1   b
item2   b
item5   b 
```

（因为 item3 具有交易 c 以及 b 和 item 4 和 item4 不包含交易 b）

我尝试了以下查询

```
1.`select * from trans_tbl where transaction = 'b'`

2.`select item,qty from trans_tbl where item in(select item from trans_table group by    item having count(item)=1);` 
```

通过上述两个查询，我无法获得所需的输出。那么还有其他方法可以得到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:52:21.140

另一种解决方案：

```
select distinct t1.item, t1.transaction
from trans_tbl t1
left join trans_tbl t2 on t1.name=t2.name and t1.transaction<>t2.transaction
where t2.name is null 
```

左连接和检查右部分是否为空就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:12:27.010

尝试这样的事情。它将所有项目组合在一起，并且只返回 1\. 有一个事务和 2\. 该事务是“b”的项目

```
select item, transaction
from trans_tbl
where transaction = 'b'
group by item, transaction
having count(item) = 1 
```

# javascript - 使用 JQuery 嵌套 HTML 标签

> ID：10556394
> 
> 赞同：2
> 
> 时间：2012-05-11T18:03:21.357
> 
> 标签：javascript, jquery, html

我正在学习 JQuery，我正在寻找一个链接列表，这些链接在单击时会触发另一个 Javascript 函数。我现在拥有的代码（如下）使`<li>`标签成功，但内部 JQuery 返回一个对象（“1\. [object Object]”）而不是带有链接标签的文本。

```
$('<li></li>', {
    text: $('<a></a>', {
        text: data[i].name,
        onclick: 'doSomething()'
    }),
    id: 'response'
}).appendTo('ol.responseList'); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:06:10.907

使用`html`而不是`text`.

```
$('<li></li>', {
    html: $('<a></a>', {
        text: data[i].name,
        onclick: 'doSomething()'
    }),
    id: 'response'
}).appendTo('ol.responseList'); 
```

PS我建议不要使用`onclick`属性来绑定事件。使用 jQuery 的事件 API。

```
$('<li></li>', {
    html: $('<a></a>', {
        text: data[i].name
    }).click(doSomething),
    id: 'response'
}).appendTo('ol.responseList'); 
```

更新：如果你想传递`i`给`doSomething`，你需要做这样的事情（循环外）：

```
function createFunc(i){
    return function(){
        doSomething(i);  // this will be the correct value of `i`
    };
} 
```

然后这样做：

```
$('<li></li>', {
    html: $('<a></a>', {
        text: data[i].name
    }).click(createFunc(i)),  // Yes, this should be `createFunc(i)`, it returns a function
    id: 'response'
}).appendTo('ol.responseList'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T18:06:58.350

继续附加到创建的元素。 `html`也可能有效，但我认为附加更清楚：

```
$("<li>", {id: 'respose'}).append(
   $("<a>", {text: data[i].name, onclick: doSomething})
).appendTo('ol.responseList'); 
```

# java - 包私有可见性语义是在哪一年引入 java 语言的？

> ID：10556401
> 
> 赞同：-3
> 
> 时间：2012-05-11T18:04:25.430
> 
> 标签：java, package-private

我可以回答类似问题的最佳方式是什么？

（Java 是哪一年引入的特性 XXX？）

我已经阅读了有关 java 版本历史的 wiki，但它的粒度太粗了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:10:12.547

Package-private 早在 Java 出现之前就已经存在。最初的 Oak 具有公共、受保护和默认（包私有）可见性。最终还是在 Java 1.0 之前引入了私有（现代“编译单元”私有）。

**编辑**：我刚刚检查了这个：Oak*调用*它`private`，但它的行为类似于 Java 的包私有：“特定包中的所有类都可以使用该包中的类中声明的所有变量和方法，而不管公共、受保护和私人声明。” （Oak 0.2 规范第 15 页）无论如何，日期至少是 1994 年（规范的 0.2 版），可能更早。

[这](http://www.javaspecialists.eu/archive/Issue055.html)是一篇关于 Java 历史的有趣文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:06:53.003

所有过去的版本都可用，并且上面有日期：

[http://docs.oracle.com/javase/specs/](http://docs.oracle.com/javase/specs/)

# mysql - mysql选择int作为货币或将int转换为货币格式？

> ID：10556404
> 
> 赞同：40
> 
> 时间：2012-05-11T18:04:31.367
> 
> 标签：mysql

有没有办法在选择货币格式时转换 int。我可以连接 '$' 符号，但是你如何放置 ,'s 呢？就像将 int =1000 变成 $1,000 一样？

或者有一个功能可以做到这一切？有字符串替换吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-11T18:08:09.633

FORMAT() 函数： [http ://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format)

```
SELECT CONCAT('$', FORMAT(val, 2)) ... ; 
```

# php - 递归循环和嵌套多维数组的问题

> ID：10556405
> 
> 赞同：0
> 
> 时间：2012-05-11T18:04:40.407
> 
> 标签：php, arrays, multidimensional-array

我这里有一个嵌套的多维数组：

```
Array
(
[merchant] => Array
    (
        [XML_Serializer_Tag] => Array
            (
                [id] => 736
                [name] => Cadbury Gifts Direct
            )

        [prod] => Array
            (
                [XML_Serializer_Tag] => Array
                    (
                        [0] => Array
                            (
                                [XML_Serializer_Tag] => Array
                                    (
                                        [id] => 88966064
                                        [pre_order] => no
                                        [web_offer] => no
                                        [in_stock] => no
                                        [stock_quantity] => 0
                                    )

                                [pId] => 608
                                [isbn] => 0000000000000
                                [text] => Array
                                    (
                                        [name] => 50% OFF 56g Creme Egg Minis
                                        [desc] => 50% OFF Creme Egg Minis in a 56g bag.
                                    )

                                [uri] => Array
                                    (
                                        [awTrack] => http://www.awin1.com/pclick.php?p=88966064&a=67702&m=736
                                        [awThumb] => http://images.productserve.com/thumb/736/88966064.jpg
                                        [awImage] => http://images.productserve.com/preview/736/88966064.jpg
                                        [mLink] => http://www.cadburygiftsdirect.co.uk/products/608-50-off-56g-creme-egg-minis.aspx
                                        [mImage] => http://www.cadburygiftsdirect.co.uk/images/thumbs/0001084.png
                                    )

                                [price] => Array
                                    (
                                        [XML_Serializer_Tag] => Array
                                            (
                                                [curr] => GBP
                                            )

                                        [buynow] => 0.31
                                        [store] => 0.00
                                        [rrp] => 0.00
                                        [delivery] => 0.00
                                    )

                                [cat] => Array
                                    (
                                        [awCatId] => 437
                                        [awCat] => Chocolate
                                        [mCat] => Full Range
                                    )

                                [brand] => 
                                [valFrom] => 0000-00-00
                                [valTo] => 0000-00-00
                                [comAmount] => 0.00
                            ) 
```

之后的段循环。

所以...

```
[1] => Array
[2] => Array
[3] => Array 
```

ETC...

我需要找到每个数组段的属性名称。

所以我使用了这个递归循环：

```
private function recursive_array($old_array, $new_array = array()) {

    foreach ($old_array as $key => $value) {

        if (is_array($value) && $key < 1) {
            $new_array = $this->recursive_array($value, $new_array);

        } else {
            if ($key < 1) {
                $new_array[] = $key;

            }
        }
    }
    return $new_array;
} 
```

这是输出：

```
array
  0 => string 'id' (length=2)
  1 => string 'name' (length=4)
  2 => string 'id' (length=2)
  3 => string 'pre_order' (length=9)
  4 => string 'web_offer' (length=9)
  5 => string 'in_stock' (length=8)
  6 => string 'stock_quantity' (length=14)
  7 => string 'pId' (length=3)
  8 => string 'isbn' (length=4)
  9 => string 'name' (length=4)
  10 => string 'desc' (length=4)
  11 => string 'awTrack' (length=7)
  12 => string 'awThumb' (length=7)
  13 => string 'awImage' (length=7)
  14 => string 'mLink' (length=5)
  15 => string 'mImage' (length=6)
  16 => string 'curr' (length=4)
  17 => string 'buynow' (length=6)
  18 => string 'store' (length=5)
  19 => string 'rrp' (length=3)
  20 => string 'delivery' (length=8)
  21 => string 'awCatId' (length=7)
  22 => string 'awCat' (length=5)
  23 => string 'mCat' (length=4)
  24 => string 'brand' (length=5)
  25 => string 'valFrom' (length=7)
  26 => string 'valTo' (length=5)
  27 => string 'comAmount' (length=9 
```

它还拾取的是顶部嵌套数组：

```
[XML_Serializer_Tag] => Array
            (
                [id] => 736
                [name] => Cadbury Gifts Direct
            ) 
```

这只是整个提要的详细信息，而不是各个部分。

我需要一种过滤掉顶部嵌套数组的方法，但请记住细节是动态的，因此键的名称可以从一个提要更改为下一个提要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:39:38.290

也许这个？

```
$riter = new RecursiveIteratorIterator(New RecursiveArrayIterator($array));
foreach ($riter as $key => $val) {
    if ($riter->getDepth() > 1) {
        echo "$key => $val\n";
    }
} 
```

默认情况下， RecursiveIteratorIterator 只访问叶节点（每条路径的最深层次）。getDepth() 可用于确定最小深度。我不确定1是否是正确的数字，但无论如何......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:42:10.943

用于`array_shift`弹出数组的第一个元素

# php - php会话不起作用，尝试了各种

> ID：10556408
> 
> 赞同：0
> 
> 时间：2012-05-11T18:04:48.987
> 
> 标签：php, session, variables, global-variables

在过去的 3 个小时里，我一直被困在一个问题上，这让我对 PHP 会话感到很困惑。Iv 从 session_is_registered 转到 $_SESSION 并且它不想工作。

请参阅下面的代码（在我想通过登录保护的页面的最顶部的所有文件中）：

```
 <?php

     session_start();

     if(!isset($_SESSION['user']))
         header("location: login.php");

    ?> 
```

在另一个页面 access.php 上，我有一个带有两个输入框和提交按钮的表单来检查输入并与 db 交叉引用它。当输入不正确的值时，我收到消息“无效登录”，这是正确的。但是当我输入正确的详细信息时，我会回到 login.php 页面，要求登录。

我正在保存会话并检查详细信息，如下所示：

```
 <?php
    session_start();
    include("dbfile.php");

    $sql = mysql_query("SELECT id FROM myTable WHERE user=$username AND pass=$pass");

    if(mysql_num_rows($sql)==1){

             $_SESSION['user'] = "Test";
             header("location: account.php");
    }else{

             header("location: login.php");      
    }
     ?> 
```

不幸的是，我在一个已关闭 register_globals 的共享服务器上，但不确定这是否是问题所在。如果我在其他页面上回显会话的输出，我什么也得不到。就像它甚至没有注册/保存会话一样。

我在浏览器上启用了 cookie/js。事实上，我已经在 4 个浏览器上进行了测试，但结果相同。谁会是这个的救生员..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T07:19:37.173

如果您遇到问题，例如您的 php 会话无法在您网站的所有页面上运行，请不要担心，如果您的问题与我以前在我的网站中遇到的问题相匹配，那么您可以轻松解决您的问题并且我解决了。

因此，假设在您的登录页面中，您以 ...

```
session_start();
$_SESSION['islogin'] = 'true'; 
```

但是您的“islogin”会话不适用于除少数页面之外的所有页面。比您的网址可能有问题。请检查您的网址中是否有“www”。如果不是，请在您的网址中添加“www”，然后重试。如果您想使用 htaccess 文件在您的网址中添加“www”，请尝试以下操作。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

在 .htaccess 文件中添加这三行代码。

可能是这种变化解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:29:59.900

尝试这个

```
$sql = mysql_query("SELECT id FROM myTable WHERE user='$username' AND pass='$pass'");

if(mysql_affected_rows()>0){

         $_SESSION['user'] = "Test";
         header("location: account.php");
}else{
         // die(mysql_error()); use this if you think maybe there is an error
         header("location: login.php");      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:18:25.563

试试这个当你在查询中使用invariable并且数据类型是整数时，你必须写“.$variable_name”。如果变量是数据类型是 varchar，那么你必须写成“'.$varable_name.'”

```
<?php
    session_start();
    include("dbfile.php");

    $sql = mysql_query("SELECT id FROM myTable WHERE user="'.$username.'" AND pass="'.$pass.'" ");

    if(mysql_num_rows($sql)==1){

             $_SESSION['user'] = "Test";
             header("location: account.php");
    }else{

             header("location: login.php");      
    }
     ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:09:26.627

尝试在您的查询中`$_POST['username']`，如果关闭`$POST['pass']`，变量`$username`和`$pass`不存在。`register_globals`（他们应该是。）

如果您想查看会话是否正常工作，请尝试以下操作：

```
<?php
    session_start();
    var_dump($_SESSION);
    $_SESSION['works'] = 'yes';
?> 
```

在第二个页面视图中，您应该在屏幕上获得结果。:)

# c# - 设置 WPF 编译器消息语言

> ID：10556410
> 
> 赞同：0
> 
> 时间：2012-05-11T18:04:57.437
> 
> 标签：c#, wpf, visual-studio, visual-studio-2010

> **可能重复：**
> [如何在调试时将 Visual Studio 异常消息语言更改为英语](https://stackoverflow.com/questions/529951/how-to-change-visual-studio-exception-message-language-to-english-while-debuggin)
> [如何更改 Microsoft C# 编译器错误消息的语言？](https://stackoverflow.com/questions/4096249/how-to-change-the-language-of-microsoft-c-sharp-compilers-error-messages)

我在 VS2010 中创建了一个新的 WPF 项目，突然间，我的错误变成了荷兰语。我在 VS2010 中的其余环境是英文的，我无法弄清楚为什么只有编译器消息设置为荷兰语。

有人可以详细说明一下吗？如何将编译器错误语言设置回英语？

# sql-server - 在 SQL Server 中存储 Bing 地图数据，从保存的位置创建路线

> ID：10556412
> 
> 赞同：0
> 
> 时间：2012-05-11T18:05:05.500
> 
> 标签：sql-server, windows-phone-7, geolocation, windows-phone-7.1, bing-maps

我想在 SQL Server 中以经度和纬度的形式存储位置。然后我想在 Bing Maps 上检索并显示它。目标是显示从用户当前位置到他们的路线。

我认为有一种与 Bing 地图不同的定位服务，也许它会为我提供我需要的东西。

如何做到这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:16:27.523

[这是一篇很好的文章](http://msdn.microsoft.com/en-us/magazine/hh148148.aspx)，展示了如何在 Windows Phone 应用程序中可视化路由。对于 SQL CE 存储，您可能希望[从这里开始](http://msdn.microsoft.com/en-us/library/hh202860%28v=VS.92%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:45:18.230

您可以查看 WP7 代码示例： http:
[//msdn.microsoft.com/en-us/library/ff431744](http://msdn.microsoft.com/en-us/library/ff431744(v=vs.92).aspx)
(v=vs.92).aspx本地数据库示例
位置服务示例

也试试这个：[http:// channel9.msdn.com/Series/Windows-Phone-7-Development-for-Absolute-Beginners/GPS-Location-API-and-Calling-Web-Services](http://channel9.msdn.com/Series/Windows-Phone-7-Development-for-Absolute-Beginners/GPS-Location-API-and-Calling-Web-Services)

# javascript - Google Chrome JavaScript 控制台上的语法错误

> ID：10556419
> 
> 赞同：0
> 
> 时间：2012-05-11T18:05:44.377
> 
> 标签：javascript, syntax, error-handling

我的代码出现语法错误，对于战舰游戏，输入应大于 0 且小于 11。

这是代码行，如果有人有任何建议，将不胜感激。

```
document.getElementById("bullet").elements['bulletX'].value(>0 && <11); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:22:46.840

```
var element = document.getElementById("bullet").elements['bulletX'].value;

if(element > 0 && element < 11) {
    // do the job
} 
```

# clojure - 在clojure中'for'实际上不是懒惰的吗？

> ID：10556421
> 
> 赞同：15
> 
> 时间：2012-05-11T18:05:47.777
> 
> 标签：clojure, list-comprehension, lazy-evaluation

```
(take 2 (for [x (range 10)
              :let [_ (println x)]
              :when (even? x)] x))
>> (* 0
* 1
* 2
* 3
* 4
* 5
* 6
* 7
* 8
* 9
0 2) 
```

我以为我只是非常密集。但不，事实证明 Clojure 实际上评估了任何惰性序列的前 32 个元素（如果可用）。哎哟。

我`for`在`:let`. 我很好奇为什么计算似乎是以广度优先而不是深度优先的方式进行的。似乎计算（虽然，公平地说，不是内存）正在爆炸，因为我一直在递归树的所有上层分支。Clojure 的 32 个分块强制进行广度优先评估，尽管代码的逻辑意图是深度优先。

无论如何，有没有简单的方法来强制 1 块而不是 32 块的惰性序列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T18:19:59.097

Michaes Fogus[写了一篇关于通过提供自定义 ISeq 实现来禁用此行为的博客条目](http://blog.fogus.me/2010/01/22/de-chunkifying-sequences-in-clojure/)。

从[Colin Jones 的修改版本中](https://gist.github.com/717761)无耻地窃取：

```
(defn seq1 [#^clojure.lang.ISeq s]
  (reify clojure.lang.ISeq
    (first [_] (.first s))
    (more [_] (seq1 (.more s)))
    (next [_] (let [sn (.next s)] (and sn (seq1 sn))))
    (seq [_] (let [ss (.seq s)] (and ss (seq1 ss))))
    (count [_] (.count s))
    (cons [_ o] (.cons s o))
    (empty [_] (.empty s))
    (equiv [_ o] (.equiv s o)))) 
```

[Clojure 的乐趣](http://joyofclojure.com/)中给出了一种更简单的方法：

```
(defn seq1 [s]
  (lazy-seq
    (when-let [[x] (seq s)]
       (cons x (seq1 (rest s)))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T00:34:39.587

要回答标题中的问题，不，`for`并不懒惰。 [但是](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/for)，它：

> 接受一个或多个 binding-form/collection-expr 对的向量，每个对后跟零个或多个修饰符，并**产生 expr 评估的惰性序列。**

（强调我的）

那么[这是怎么回事](https://stackoverflow.com/questions/7824501/how-does-clojures-laziness-interact-with-calls-to-java-impure-code#comment9537444_7824547)？

> 基本上 Clojure 总是严格评估。懒惰的 seqs 基本上使用与 python 相同的技巧和它们的生成器等。懒惰的衣服中的严格评估。

换句话说，`for` *急切地*返回一个*惰性*序列。在您要求之前不会对其进行评估，并且会被分块。

# java - 正则表达式未按预期工作

> ID：10556425
> 
> 赞同：0
> 
> 时间：2012-05-11T18:06:03.370
> 
> 标签：java, regex

我正在使用以下正则表达式。(?=.+[az])(?=.+[AZ])(?=.+[^a-zA-Z]).{8,}

我的目标是拥有一个具有以下 4 个属性中的 3 个的密码

大写字符、小写字符、数字、特殊字符

我正在使用[http://rubular.com/r/i26nwsTcaU](http://rubular.com/r/i26nwsTcaU)和[http://regexlib.com/RETester.aspx](http://regexlib.com/RETester.aspx)使用以下输入来测试表达式

```
P@55w0rd
password1P
Password1
paSSw0rd 
```

所有这些都应该通过，但只有第二个和第四个通过[http://rubular.com/r/i26nwsTcaU](http://rubular.com/r/i26nwsTcaU)并且所有这些都通过[http://regexlib.com/RETester.aspx](http://regexlib.com/RETester.aspx)。

我还有以下用于验证的代码

```
private void doValidate(String inputStr,String regex) {
    Pattern pattern = Pattern.compile(regex);
    if(!pattern.matcher(inputStr).matches()){
        String errMessage = "";
        throw new UniquenessConstraintViolatedException(errMessage);
    }
} 
```

此代码无法验证应该通过的“Password1”。就表达而言，我是这样理解的

```
must have lower (?=.+[a-z])
must have upper (?=.+[A-Z])
must have non alpha (?=.+[^a-zA-Z])
must be eight characters long .{8,} 
```

谁能告诉我我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:34:20.757

本质上，`.+`子表达式是罪魁祸首，它们应该是`.*`. 否则，前瞻部分会查找小写、大写或非字母，但如果每个相应类型的字符是字符串中的第一个字符，则不计算在内。因此，您验证的不是密码，而是第一个字符被截断的密码。虽然@Cfreak 不对，但他很接近 - 使用普通的正则表达式无法实现您正在做的事情，您必须使用他的建议。使用[前瞻](http://www.regular-expressions.info/lookaround.html)组 - `(?=)`- 可以做您需要的事情。不过，就我个人而言，我宁愿像@Cfreak 建议的那样对其进行编码——它更具可读性，并且您的意图从代码中也更加清晰。复杂的正则表达式往往难以编写，但在一段时间后几乎无法阅读、调试或改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:18:10.800

您的正则表达式现在说您必须有 1 个或多个小写字符，后跟 1 个或多个大写字符，然后是 1 个或多个大写或小写字符，然后是 8 个或更多字符。

除非您指定特定字符出现的位置，否则正则表达式不能执行 AND。您基本上需要将正则表达式的每个部分拆分为自己的正则表达式并检查每个部分。您可以使用 Java 具有的任何字符串长度方法检查长度（对不起，我不是 Java 开发人员，所以我不知道这是什么问题）。

伪代码：

```
if( regexForLower && regexForUpper && regexForSpecial && string.length == 8 ) {
     // pass
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:22:15.980

正如我在评论中所说，位置 0 大写字母被忽略。

这是一个所有四个密码都匹配的正则表达式。

```
(?=.+\\d)(?=.+[a-z])(?=\\w*[A-Z]).{8,} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T19:51:52.827

我不会使用这样的正则表达式。

*   很难理解
*   难以调试
*   难以扩展
*   你对它的结果无能为力

如果您想告诉客户他的密码有什么问题，您必须再次调查密码。在现实世界环境中，您可能希望支持来自外国语言环境的字符。

```
import java.util.*;
/**
    Pwtest

    @author Stefan Wagner
    @date Fr 11\. Mai 20:55:38 CEST 2012
*/
public class Pwtest
{

    public int boolcount (boolean [] arr) {
        int sum = 0;
        for (boolean b : arr) 
            if (b) 
                ++sum;
        return sum;
    }

    public boolean [] rulesMatch (String [] groups, String password) {
        int idx = 0;
        boolean [] matches = new boolean [groups.length];
        for (String g: groups) {
            matches[idx] = (password.matches (".*" + g + ".*"));
            ++idx;
        }
        return matches;     
    }

    public Pwtest ()
    {
        String [] groups = new String [] {"[a-z]", "[A-Z]", "[0-9]", "[^a-zA-Z0-9]"};
        String [] pwl = new String [] {"P@55w0rd", "password1P", "Password1", "paSSw0rd", "onlylower", "ONLYUPPER", "1234", ",:?!"};
        List <boolean[]> lii = new ArrayList <boolean[]> ();
        for (String password: pwl) {
            lii.add (rulesMatch (groups, password)); 
        }

        for (int i = 0 ; i < lii.size (); ++i) {
            boolean [] matches = lii.get (i); 
            String pw = pwl[i];
            if (boolcount (matches) < 3) {
                System.out.print ("Password:\t" + pw + " violates rule (s): ");
                int idx = 0; 
                for (boolean b: matches) {
                    if (! b) 
                        System.out.print (groups[idx] + " "); 
                    ++idx;
                }
                System.out.println (); 
            }
            else System.out.println ("Password:\t" + pw + " fine ");
        }
    }

    public static void main (String args[])
    {
        new Pwtest ();
    }
} 
```

输出：

```
Password:   P@55w0rd fine 
Password:   password1P fine 
Password:   Password1 fine 
Password:   paSSw0rd fine 
Password:   onlylower violates rule (s): [A-Z] [0-9] [^a-zA-Z0-9] 
Password:   ONLYUPPER violates rule (s): [a-z] [0-9] [^a-zA-Z0-9] 
Password:   1234 violates rule (s): [a-z] [A-Z] [^a-zA-Z0-9] 
Password:   ,:?! violates rule (s): [a-z] [A-Z] [0-9] 
Password:   Übergrößen345 fine 
Password:   345ÄÜö violates rule (s): [a-z] [A-Z] 
```

# c# - 从英国坐标转换为标准 WGS84 nmea

> ID：10556435
> 
> 赞同：1
> 
> 时间：2012-05-11T18:06:35.367
> 
> 标签：c#, windows, gps, coordinates, nmea

我已经发布了类似的帖子。理论上我确实得到了答案，但我真的需要有人来帮助我。

所以我正在使用这个[示例](http://www.codeproject.com/Articles/13577/GPS-Deriving-British-Ordnance-Survey-Grid-Referenc)来测试我的 GPS。我想要做的是如何获得标准的十进制值，如纬度和经度的 56,322415。因为现在我得到了 5304,254 的值。

我需要以这种形式使用它，因为我会将它用于 Google 地图。

您能否检查代码并告诉我应该遗漏什么或如何将其转换为 WGS84 格式。

谢谢你。

编辑：

这是解释我在运行程序时看到的图片 ![在此处输入图像描述](../Images/c06175c0bab6c1e73020d7300ac28595.png)

这是codeproject页面之一：

![在此处输入图像描述](../Images/af6107ebd75fc56d80fa89f5a059c3b9.png)

编辑2：

因此，当我使用[THIS CONVERTER](http://www.csgnetwork.com/gpscoordconv.html)查看获得学位时需要获得的十进制值时，我没有得到相同的值。

这是我应该得到的价值：

![在此处输入图像描述](../Images/0574ddd8fb786a4f1ed1b47eb5e0b1bf.png)

这是我在程序中得到的价值：

> 46.64662666666667

知道为什么我无法获得相同的转换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:17:29.167

ParseNMEA 函数中的以下行是从 WGS84 转换为英国条例调查坐标的行：

```
return Transform(deciLat, deciLon, height); 
```

因此，如果您删除该行并仅使用 deciLat 和 deciLon 值，则应该没问题...

**问题更新后的补充：**

您所指的代码没有考虑本地数字格式，因此如果出现问题，可能是因为错误的十进制符号匹配。

您可以使用以下函数进行转换，假设输入始终采用不变的文化（带小数点）：

```
string[] arrLon = strLon.Split(new char[]{'°', '"'}, StringSplitOptions.RemoveEmptyEntries);
double dblLon = double.Parse(arrLon[0]) + double.Parse(arrLon[1], new System.Globalization.NumberFormatInfo()) / 60;
double deciLon = arrLon[2] == "E" ? dblLon : - dblLon; 
```

**附加信息：**

NumberFormatInfo：http: [//msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:51:29.303

听起来您的问题现在已经解决了，我知道存在由不同的本地数字格式引起的问题，这些问题在其中一条评论中提出并解决：

[http://www.codeproject.com/Articles/13577/GPS-Deriving-British-Ordnance-Survey-Grid-Referenc?msg=2106791#xx2106791xx](http://www.codeproject.com/Articles/13577/GPS-Deriving-British-Ordnance-Survey-Grid-Referenc?msg=2106791#xx2106791xx)

如果你只是想要 lat 和 lon 的十进制值，我想你现在可以把整个东西扔掉，只使用 Dirk 提供的解决方案！=o)

亚历克斯

# .net - 确定应用程序架构

> ID：10556436
> 
> 赞同：1
> 
> 时间：2012-05-11T18:06:46.753
> 
> 标签：.net, architecture

我正在重新开发一个简单的应用程序，该应用程序现在作为一个面向公众的网站存在，在我们的 DMZ 中使用 SQL Server，这是我们桌面用户的另一个 Access 前端和后端。我还必须为没有网络访问（或互联网访问）的现场工作人员本地安装访问版本。

我正在尝试从头开始开发一个可以完成所有 3 种使用场景的应用程序：

1.  连接到我们网络的桌面用户
2.  没有网络连接或互联网的笔记本电脑用户
3.  公共网页用户

一点关于应用程序。它由文件系统上的 100,000 多个 tiff 图像组成。数据库存储有关图像的元数据以及图像的相对 URL。有图像表、用户表（跟踪谁使用它和权限）和历史表（跟踪谁编辑了图像表上的内容）。该系统仅由大约 3 个将联网的人编辑，它主要是一个查找系统。

我从 winforms 和 EF 4 开始，并意识到这对我的需求来说太过分了。所以问题是：有没有办法支持在运行时本地缓存数据库和文件以“使应用脱机”，然后在回到办公室时同步？（如果有，我希望他们从不选择该选项，安装时不会在他们的 PC 上放置一个空的 SQL 数据库，因为我可以预先在每台笔记本电脑上安装数据库，因为它们只是需要它的人）

我应该只使用 ADO.net 作为数据库并且查询非常简单吗？我能从 EF 获得什么吗？几乎没有关系，不同的业务逻辑等。唯一复杂的查询是使用 AND/OR 的字段值列表等查找文件元数据的搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:11:27.190

我认为您的场景是一个匹配良好 NoSQL 数据库的数据库。查看 CouchDB 并将其用作具有同步（复制）的存储。

引用 CouchDB：

> CouchDB 支持在不同机器上运行的多个数据库副本，并提供一种机制来同步它们的数据。这在偶尔连接的应用程序（例如 PDA）中很有用。在这种情况下，用户可以在断开模式下工作一段时间，并将其数据更改存储在本地。稍后当他连接回他的公司网络时，他可以将他的更改同步回他的公司数据库。

[您可以在此处](http://guide.couchdb.org/editions/1/en/index.html)或在[CouchDb 网站](http://www.couchbase.com/)上阅读“CouchDB：权威指南”一书。

CouchDb 具有 REST API，因此您可以使用任何 REST 客户端（甚至是 WebClient/HttpWeRequest），或者例如[RestSharp 库](http://restsharp.org/)。

或者看看[Mongo NoSQL](http://www.mongodb.org/)数据库的一面。它有一个很酷的特性，叫做 GridFS（分布式文件存储），可以帮助处理大量的二进制数据。并且获得几乎相同但使用 Mongo 复制功能。

# javascript - 音频不适用于phoneGap

> ID：10556437
> 
> 赞同：9
> 
> 时间：2012-05-11T18:06:52.230
> 
> 标签：javascript, html, cordova

嗨，我尝试为我的游戏添加声音，我使用 aphoneGap 代码来做到这一点：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Media Example</title>

    <script type="text/javascript" charset="utf-8" src="js/phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
    }

    // Audio player
    //
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    //
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, onSuccess, onError);

        // Play audio
        my_media.play();

        // Update my_media position every second
        if (mediaTimer == null) {
            mediaTimer = setInterval(function() {
                // get my_media position
                my_media.getCurrentPosition(
                    // success callback
                    function(position) {
                        if (position > -1) {
                            setAudioPosition((position) + " sec");
                        }
                    },
                    // error callback
                    function(e) {
                        console.log("Error getting pos=" + e);
                        setAudioPosition("Error: " + e);
                    }
                );
            }, 1000);
        }
    }

    // Pause audio
    // 
    function pauseAudio() {
        if (my_media) {
            my_media.pause();
        }
    }

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            my_media.stop();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    }

    // onSuccess Callback
    //
    function onSuccess() {
        console.log("playAudio():Audio Success");
    }

    // onError Callback 
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' + 
              'message: ' + error.message + '\n');
    }

    // Set audio position
    // 
    function setAudioPosition(position) {
        document.getElementById('audio_position').innerHTML = position;
    }

    </script>
  </head>
  <body>
    <a href="#" class="btn large" 

     onclick="playAudio('http://audio.ibeat.org/content/p1rj1s/p1rj1s_- 
      _rockGuitar.mp3');">Play Audio</a>
    <a href="#" class="btn large" onclick="pauseAudio();">Pause Playing Audio</a>
    <a href="#" class="btn large" onclick="stopAudio();">Stop Playing Audio</a>
    <p id="audio_position"></p>
     </body>
   </html> 
```

它工作正常，但是当我改变声音的来源时它不起作用这里的代码：

```
playAudio("file:///android_asset/www/sounds/introDino.mp3"); 
```

请有任何想法，提前谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T19:39:45.783

将路径更改为“/android_asset/www/sounds/introDino.mp3”，就可以了。阅读我的 Android 迷你教程：

[http://simonmacdonald.blogspot.com/2011/05/using-media-class-in-phonegap.html](http://simonmacdonald.blogspot.com/2011/05/using-media-class-in-phonegap.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:00:38.197

如果可用，此函数将使用 HTML5 Audio API 播放声音，如果不可用，则回退到 PhoneGap Media API：

```
function playAudio(src) {

    // HTML5 Audio
    if (typeof Audio != "undefined") { 
        new Audio(src).play() ;

    // Phonegap media
    } else if (typeof device != "undefined") {

        // Android needs the search path explicitly specified
        if (device.platform == 'Android') {
            src = '/android_asset/www/' + src;
        }

        var mediaRes = new Media(src,
            function onSuccess() {
                // release the media resource once finished playing
                mediaRes.release();
            },
            function onError(e){
                console.log("error playing sound: " + JSON.stringify(e));
            });
        mediaRes.play();

    } else {
        console.log("no sound API to play: " + src);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T13:55:14.073

由于新 Android 版本（可能在其他平台上）上的 Audio 对象可用且不是“未定义”，这两个先前的答案都将不起作用。所以我将代码升级为：

```
function playSound(src){
var devicePlatform = (typeof device !== 'undefined' && device.platform)? device.platform: null;
if (typeof Audio !== "undefined" && devicePlatform === null) {          // HTML5 Audio
    new Audio(src).play() ;
} else if ( devicePlatform ) {              // Phonegap media
if (devicePlatform === 'Android') {     // Android needs the search path explicitly specified
    src = '/android_asset/www/' + src;
}
var media  = new Media(src,
function onSuccess() {
    media.release();                // Release the media resource once finished playing
},
function onError(e){
    console.log("error playing sound: " + JSON.stringify(e));
}
);
media.play({numberOfLoops: 1});
} else {
    console.log("no sound API to play: " + src);
}
} 
```

还必须说，在所有之前你必须添加到cordova build 'device' 和 'media' 插件，否则什么都不会起作用。插件[在这里可用](http://plugreg.com/plugins)

# php - PHP 脚本在本地 IP 更改时挂起

> ID：10556442
> 
> 赞同：0
> 
> 时间：2012-05-11T18:07:08.043
> 
> 标签：php, mysql

我有一个脚本可以连接到远程 MySQL 主机来执行一些查询。一段时间后，它会挂起一条消息“MySQL 服务器已消失”。我有一个动态 IP，每天至少更改 3 次，我意识到它在 IP 更改时挂起。

因此，我更改了脚本以检测此错误，等待 30 - 90 秒并重新连接到服务器，但现在它在重新连接尝试时挂起。

这发生在linux和windows上。

这可能是什么原因？

编辑：我认为这很明显，但是更改的 IP 是运行脚本的本地 IP，MySQL 服务器位于固定 IP 上。本地电脑连接到 ADSL 路由器，我猜我的 ISP 正在强制重新连接（IP 更改）。我知道在 IP 更改时，所有现有连接都将丢失，包括。MySQL，但我说我正在重新连接 IP 更改并且它无法重新连接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:10:34.557

这种行为的一个原因可能是持久的数据库连接。为了澄清是否是这种情况，请重新启动您的 Apache 或 IIS Web 服务器，以防 IP 地址已更改。如果重启后一切正常，你就明白了。

[持久数据库连接](http://php.net/manual/en/features.persistent-connections.php)存储在后台，如果数据库连接的主机名和用户凭据匹配，则可以重复使用。mysql 库有所不同：[mysql_pconnect](http://php.net/manual/en/function.mysql-pconnect.php)用于持久连接，[mysql_connect](http://php.net/manual/en/function.mysql-connect.php)用于非持久连接。

此外，您可以检查 php.ini 的**mysql.allow_persistent**设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:14:34.450

您如何获得新的 IP 地址？如果您使用的是 DNS（包括动态 DNS），我猜您会遇到过时的 DNS 缓存。即使是 TTL 超过 90 秒的大多数动态 DNS 条目（并且某些中间缓存服务器可能会设置最小 TTL）。

# email - 将格式添加到从 powershell 脚本发送的电子邮件

> ID：10556444
> 
> 赞同：1
> 
> 时间：2012-05-11T18:07:27.150
> 
> 标签：email, powershell, formatting

我希望使用 powershell 发送一封电子邮件，如下所示

数据审计至少有一个问题。以下是审核

*   有 15 行过大
*   有 37 行太小了
*   没有空 asOfDates
*   有 55 行 asOfDates 过时

此审核将在 15 分钟后再次运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:13:04.237

您可以使用`send-mailmessage`html 参数并使用 html 标签格式化消息正文。

# matlab - Create third matrix in MATLAB from combination of two other matrices

> ID：10556449
> 
> 赞同：1
> 
> 时间：2012-05-11T18:07:45.387
> 
> 标签：matlab, matrix, element, bsxfun

I have two expressions in MATLAB that represent a 365x24 matrix. The first expression has 10, 365x24 matrices and is therefore

```
PV_power_output(:,:,K) 
```

and the second expression which is again 365x24 but with three possible matrices therefore is

```
WT_energy_supply(:,:,M);ode here 
```

Now, I am looking to create a third matrix that adds the elements in the same position above and thus form a 365x24 matrix. However I want a set of matrix with all possible combinations of the two expressions shown above (therefore this matrix must be 365x24x30.

How do I go about this? What about the [bsxfun](http://www.mathworks.se/help/techdoc/ref/bsxfun.html) function in MATLAB?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:25:23.900

Expand the original matrices (which for clarity I name `a` and `b`) with [repmat](http://www.mathworks.nl/help/techdoc/ref/repmat.html) and then just add them, bsxfun is not needed.

```
repmat(a,[1 1 size(b,3)]) + repmat(b,[1 1 size(a,3)])) 
```

**Update**

```
>> size(a)
ans = 
    364  24  10

>> size(b)
ans = 
    364  24  3

>> c=repmat(a,[1 1 size(b,3)])+repmat(b,[1 1 size(a,3)]);
>> size(c)
ans = 
    364  24  30 
```

It looks fine to me. Of course you'll have to replace my variables `a` and `b` with your variables `PV_power_output` and `WT_energy_supply`.

# r - 不规则时间序列上的滚动窗口

> ID：10556450
> 
> 赞同：11
> 
> 时间：2012-05-11T18:07:46.940
> 
> 标签：r, time-series, xts, zoo

我有一个不规则的事件（帖子）时间序列`xts`，我想计算在滚动的每周窗口（或每两周一次或 3 天等）内发生的事件数。数据如下所示：

```
 postid
2010-08-04 22:28:07    867
2010-08-04 23:31:12    891
2010-08-04 23:58:05    901
2010-08-05 08:35:50    991
2010-08-05 13:28:02   1085
2010-08-05 14:14:47   1114
2010-08-05 14:21:46   1117
2010-08-05 15:46:24   1151
2010-08-05 16:25:29   1174
2010-08-05 23:19:29   1268
2010-08-06 12:15:42   1384
2010-08-06 15:22:06   1403
2010-08-07 10:25:49   1550
2010-08-07 18:58:16   1596
2010-08-07 21:15:44   1608 
```

这应该产生类似的东西

```
 nposts
2010-08-05 00:00:00     10
2010-08-06 00:00:00      9
2010-08-07 00:00:00      5 
```

为期 2 天的窗口。我研究了`rollapply`、`apply.rolling`from`PerformanceAnalytics`等，它们都假设有规律的时间序列数据。我尝试将所有时间都更改为发布帖子的那一天，并每天使用类似`ddply`分组的方式，这让我很接近。但是，用户可能不会每天都发帖，所以时间序列仍然是不规则的。我可以用 0 填补空白，但这可能会使我的数据膨胀很多，而且它已经相当大了。

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-12T14:14:01.197

这是使用 xts 的解决方案：

```
x <- structure(c(867L, 891L, 901L, 991L, 1085L, 1114L, 1117L, 1151L, 
  1174L, 1268L, 1384L, 1403L, 1550L, 1596L, 1608L), .Dim = c(15L, 1L),
  index = structure(c(1280960887, 1280964672, 1280966285, 
  1280997350, 1281014882, 1281017687, 1281018106, 1281023184, 1281025529, 
  1281050369, 1281096942, 1281108126, 1281176749, 1281207496, 1281215744),
  tzone = "", tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
  .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", "POSIXt"),
  .indexTZ = "", tzone = "")
# first count the number of observations each day
xd <- apply.daily(x, length)
# now sum the counts over a 2-day rolling window
x2d <- rollapply(xd, 2, sum)
# align times at the end of the period (if you want)
y <- align.time(x2d, n=60*60*24)  # n is in seconds 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T08:45:09.710

这似乎有效：

```
# n = number of days
n <- 30
# w = window width. In this example, w = 7 days
w <- 7

# I will simulate some data to illustrate the procedure
data <- rep(1:n, rpois(n, 2))

# Tabulate the number of occurences per day:
# (use factor() to be sure to have the days with zero observations included)
date.table <- table(factor(data, levels=1:n))  

mat <- diag(n)
for (i in 2:w){
  dim <- n+i-1
  mat <- mat + diag(dim)[-((n+1):dim),-(1:(i-1))]
  }

# And the answer is.... 
roll.mean.7days <- date.table %*% mat 
```

似乎并不太慢（尽管`mat`矩阵将获得维度 n*n）。我尝试将 n=30 替换为 n=3000（这会创建一个包含 900 万个元素 = 72 MB 的矩阵），但它在我的计算机上仍然相当快。对于非常大的数据集，首先尝试一个子集......使用 Matrix 包（bandSparse）中的一些函数来创建矩阵也会更快`mat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T08:17:21.297

使用跑步者可以在滚动窗口上[应用任何 R 函数。](https://gogonzo.github.io/runner/articles/apply_any_r_function.html)OP 需要的是仅在指定时间点计算滚动窗口上的函数（长度）。使用`runner`用户需要指定`at`参数来指示应该计算哪些时间点输出。我们可以将`runner`我们在一侧创建的时间点向量作为`POSIXt`序列传递。
要使`runner`时间相关，必须按与对象`idx`相对应的日期来指定。`x`窗口长度可以设置为`k = "2 days"`

```
at <- seq(as.POSIXct("2010-08-05 00:00:00"), 
          by = "1 days",
          length.out = 4)

# [1] "2010-08-05 CEST" "2010-08-06 CEST" "2010-08-07 CEST" "2010-08-08 CEST"

runner::runner(
  x = x$postid,
  k = "2 days",
  idx = x$datetime,
  at = at,
  f = length
)
# [1]  3 10  9  5 
```

# c# - 如何将 Switch 与字典值一起使用？

> ID：10556451
> 
> 赞同：9
> 
> 时间：2012-05-11T18:07:47.793
> 
> 标签：c#, dictionary, switch-statement

在我的代码中，我想使用在数据包中编码为一个符号的项目的文本名称。

在通常情况下，`1012`这`cat, dog, cat, frog`对我来说很重要，但是像这样的对还有很多，所以很难记住所有这些。有时它们需要更改，所以我想我应该`Dictionary<string, int>`为此使用 a 。但是后来……</p>

```
switch (symbol)
{
    case "0": { /* ... */ }
    case "1": { /* ... */ }
    case "2": { /* ... */ }
    case "n": { /* ... */ }
} 
```

……变成……</p>

```
switch (symbol)
{
    case kvpDic["cat"]: { /* ... */ }
    case kvpDic["dog"]: { /* ... */ }
    case kvpDic["frog"]: { /* ... */ }
    case kvpDic["something else"]: { /* ... */ }
} 
```

工作室说我需要为我的开关使用常量。

我如何使它工作？

**Upd**：此类*动物*的数量及其值对仅在运行时才知道，因此代码不得使用常量（我猜）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T18:13:40.043

您可以将`Func<T>`或存储`Action`在字典中。

```
var dict = new Dictionary<int, Action>();
dict.Add(1, () => doCatThing()); 
dict.Add(0, () => doDogThing());
dict.Add(2, () => doFrogThing()); 
```

然后，像这样使用它：

```
var action = dict[1];
action(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:13:54.483

这不是 VS 限制，而是语言限制。因此，您将无法完全按照自己的意愿行事。一个想法是使用枚举。枚举不能为其条目使用 char 值，请查看[Why we can't have "char" enum types](https://stackoverflow.com/questions/572963/why-we-cant-have-char-enum-types)以获取一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:16:19.100

您想使用枚举，而不是字典。

```
enum AnimalsEnum { Dog, Cat, Bird, Fish };

public whathuh(AnimalsEnum whichAnimal) {
 switch(whichAnimal) {
   case AnimalsEnum.Dog:
   case AnimalsEnum.Cat:
...
}

} 
```

# sql-server-2008 - 如果所有行都为空，则隐藏列

> ID：10556454
> 
> 赞同：14
> 
> 时间：2012-05-11T18:07:58.813
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我在 SSRS 2008 中有一个 Tablix，我有一个有时有数据有时没有数据的列。如果没有行有数据，我想隐藏该列。

所以这将隐藏第 2 列：

```
Column 1     Column 2     Column 3     Column 4
1                            3            4
2                            3            4 
```

这不会隐藏第 2 列：

```
Column 1     Column 2     Column 3     Column 4
1                            3            4
2               2            3            4 
```

有没有办法在 SSRS 2008 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-22T15:29:47.423

非常老的帖子，但我在使用 SSAS 多维数据集时找到了更好的解决方案。由于所有聚合都已在 SSAS 中进行，因此您可以简单地检查层次结构的父级别是否具有值。

这是相应地完成的：

```
=IsNothing(Fields!Field.Value) 
```

SSRS 不需要求和或 if 语句。因为该函数的计算结果为`true`or `false`，并且因为表达式正在评估是否*隐藏*列（即*True*隐藏它），这正是您在公式中所需要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-11T21:00:09.487

如果您的字段包含值而不是数字，则以下内容应该可以隐藏列中每一行只有 NULL 值的列。

将此代码作为表达式放在要评估的每一列的列可见性对象中

```
=IIF(Count(Fields!<NAMEofCOLUMN>.Value) = Cint(0), True, False) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-06T11:37:20.063

在设计上，

转到列，右键单击并选择“列可见性”

选择`show`或`hide`基于表达式并给出表达式为：

```
=iif(Fields!column_name.Value=Nothing,True,False) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T20:24:00.383

我怀疑你必须要有创造力。例如，运行查询以获取列的非空行数。然后将计数结果用作列的可见性属性表达式的一部分。即如果计数大于零...显示。

这可能会有所帮助

[Reporting Services - 根据报表参数隐藏表格列](https://stackoverflow.com/questions/726783/reporting-services-hide-table-column-based-upon-report-parameter)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T20:02:10.007

选择 Tablix 中的所有列并将可见性 - 隐藏属性设置为：

```
=IIF(Fields!ColumnSample.Value = Nothing, True, False) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T12:31:51.750

您可以根据表达式探索 tablix 的列可见性属性：如果没有，则将条件评估为 Nothing。

按照链接：

[SSRS 2008 列可见性表达式评估为真，列不可见](https://stackoverflow.com/questions/9899518/ssrs-2008-column-visibility-expression-evaluates-to-true-column-not-visible)

# javascript - 如何在我们的 Drupal 站点的特定页面上实现 CSS + JavaScript 脚本？

> ID：10556457
> 
> 赞同：-2
> 
> 时间：2012-05-11T18:08:14.123
> 
> 标签：javascript, html, css, drupal, integration

在过去的几天里，我一直在这里问了很多问题，试图修补我正在构建的这个模板的不同区域。我只是想做一些有用的东西，这样就可以很容易地进入并更改我稍后将要创建的几个页面的所有内容（这在美学上看起来会更好，这只是让所有功能都可以工作）。

不过，我遇到了一个问题。我们使用 Drupal 作为我们的内容管理系统（不是我们的决定；我们的上级将它交给了我们）。主要问题是，由于它已分发给多个部门，因此我们无法控制其中的很多内容。把它放在一起的人是管理员，我们只是“用户”。

下面的代码有效，并且在我投入的少量时间中效果很好。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Text/Photo Swap Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">
function defaultText(){
    document.getElementById('textarea2').innerHTML = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi pulvinar lectus non lectus auctor egestas. Donec at nunc neque. Morbi ornare condimentum lobortis. Nam vehicula urna ac mauris pharetra rutrum. Duis et arcu eget sapien interdum porttitor ut et tortor. Maecenas ultricies dignissim pretium. Integer quis enim metus. Sed enim lacus, eleifend eu euismod volutpat, blandit eu sem. Vestibulum varius purus ut est accumsan pellentesque. Donec quis enim id lectus sollicitudin suscipit at volutpat augue. Curabitur et metus purus. Fusce luctus nunc vitae sapien pharetra id accumsan lectus malesuada.';
}
    function dogText(){
    document.getElementById('textarea2').innerHTML = 'The domestic dog (Canis lupus familiaris), is a subspecies of the gray wolf (Canis lupus), a member of the Canidae family of the mammilian order Carnivora. The term domestic dog is generally used for both domesticated and feral varieties. The dog may have been the first animal to be domesticated, and has been the most widely kept working, hunting, and companion animal in human history. The word dog may also mean the male of a canine species, as opposed to the word bitch for the female of the species.';
}function catText(){
    document.getElementById('textarea2').innerHTML = 'The domestic cat (Felis catus or Felis silvestris catus) is a small, usually furry, domesticated, carnivorous mammal. It is often called the housecat when kept as an indoor pet, or simply the cat when there is no need to distinguish it from other felids and felines. Cats are valued by humans for companionship and ability to hunt vermin and household pests. They are primarily nocturnal.';
}
function parrotText(){
    document.getElementById('textarea2').innerHTML = 'Parrots, also known as psittacines are birds of the roughly 372 species in 86 genera that make up the order Psittaciformes, found in most tropical and subtropical regions. The order is subdivided into three superfamilies: the Psittacoidea  parrots), the Cacatuoidea (cockatoos) and the Strigopoidea (New Zealand parrots). Parrots have a generally pantropical distribution with several species inhabiting temperate regions in the Southern Hemisphere as well. The greatest diversity of parrots is found in South America and Australasia.';
}
function lizardText(){
    document.getElementById('textarea2').innerHTML = 'Lizards are a widespread group of squamate reptiles, with more than 5600 species , ranging across all continents except Antarctica as well as most oceanic island chains. The group, traditionally recognized as the suborder Lacertilia, is defined as all extant members of the Lepidosauria (reptiles with overlapping scales), which are neither sphenodonts (i.e., tuatara) nor snakes ? they form an evolutionary grade. While the snakes are recognized as falling phylogenetically within the Toxicofera clade from which they evolved, the Sphenodonts are the sister group to the Squamates, the larger monophyletic group, which includes both the lizards and the snakes.';
}
function horseText(){
    document.getElementById('textarea2').innerHTML = 'The horse (Equus ferus caballus) is one of two extant subspecies of Equus ferus, or the wild horse. It is an odd-toed ungulate mammal belonging to the taxonomic family Equidae. The horse has evolved over the past 45 to 55 million years from a small multi-toed creature into the large, single-toed animal of today. Humans began to domesticate horses around 4000 BC, and their domestication is believed to have been widespread by 3000 BC. Horses in the subspecies caballus are domesticated, although some domesticated populations live in the wild as feral horses. These feral populations are not true wild horses, as this term is used to describe horses that have never been domesticated, such as the endangered Przewalski Horse, a separate subspecies, and the only remaining true wild horse. There is an extensive, specialized vocabulary used to describe equine-related concepts, covering everything from anatomy to life stages, size, colors, markings, breeds, locomotion, and behavior.';
}
function chickenText(){
    document.getElementById('textarea2').innerHTML = 'The chicken (Gallus gallus domesticus) is a domesticated fowl, a subspecies of the Red Junglefowl. As one of the most common and widespread domestic animals, and with a population of more than 24 billion in 2003, there are more chickens in the world than any other species of bird. Humans keep chickens primarily as a source of food, consuming both their meat and their eggs.';
}

//The switchImg function is what swaps out the awesome.png picture when thumbnails are clicked.
function switchImg(i){
document.images["awesome"].src = i;
}
</script>
<style>
<!--NEEDS TO BE FIXED-->
<!--This uses the picture in the URL as a background image, needs to be fixed to stretch across whole page; use %'s.-->
body {background: url('gradient.png');}

<!--This is all gallery stuff. Makes it all a certain size, floats it to the left, pads the images, makes the images appear in a span while the mouse
is hovering over it (might be taked out and replaced with JavaScript).-->
#gallery {position: relative; }
#gallery ul {list-style-type: none;
    width: 300px; }
#gallery li { display: inline; 
     float: left;
     padding: 5px; }
#gallery img {border-style: solid: 10px; border-color: #333; }
#gallery a { text-decoration: none;
             font-style: none;  
             color: #333; }
#gallery span {display: none; }
#gallery a:hover span {display: block;     
    position: absolute;
    top: 10px;
    left: 300px; 
    text-align: center; }

<!--NEEDS TO BE FIXED-->
<!--What does this do? Excellent question, my fine sir. This tries to float the image that changes on click to the right. -->   
#mainPicture {
    float: right;
        }

<!-- <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=>-->
.popOut
{
    cursor: default;
    list-style: none;
}
.popOut a
{
    cursor: default;
}
.popOut a .preview
{
    display: none;
}
.popOut a:hover .preview
{
    display: block;
    position: absolute;
    top: -33px;
    left: -45px;
    z-index: 1;
}
.popOut img
{
    background: #ebf0f3;
    border-color: #ebf0f3;
    border-style: solid;
    border-width: 1px;
    color: inherit;
    vertical-align: top;
    width: 100px;
    height: 75px;
}
.popOut li
{
    background: #ebf0f3;
    border-color: #CCCCCC;
    border-style: solid;
    border-width: 0px;
    color: inherit;
    display: inline;
    float: left;
    margin: 3px;
    padding: 2px;
    position: relative;
}
.popOut .preview
{
    border-color: #000;
    width: 200px;
    height: 150px;
}
.popOut p
{
    text-align: center;
}

#textarea
{
    background-color: #ebf0f3;
}
</style>
</head>

<body>
<!--NEEDS TO BE FIXED-->
<!--Give the awesome picture a similar outline to the preview pictures.-->
<!--This picture is the one that is going to change when pictures are clicked on.-->
<div class="mainPicture"><img id="awesome" src="awesome.png" height="300" width="400" alt=""><!--style="position:relative; left:600px; top:326px;"--></div>

<!--Alright, so this gallery is to hold all of the pictures. They're all set to be a certain size (100x75px) and expand to a larger size(400x300px). As it stands now, 
they're in an unordered list, and are set to change the awesome.png image whenever they are clicked.-->
<td width="1000" rowspan="3">
<div id="gallery">
    <ul class="popOut">
        <li onclick="dogText()">
            <a href="#" onclick="switchImg('dog.jpg')">
                <img src="dog.jpg" width="100" height="75" alt="dog"><img src="dog.jpg" width="100" height="75" alt="dog" class="preview"> 
            </a>
        </li>
        <li onclick="catText()">
            <a href="#" onclick="switchImg('cat.jpg')">
                <img src="cat.jpg" width="100" height="75" alt="cat"><img src="cat.jpg" width="100" height="75" alt="cat" class="preview"> 
            </a>
        </li>
        <li onclick="parrotText()">
            <a href="#" onclick="switchImg('parrot.jpg')">
                <img src="parrot.jpg" width="100" height="75" alt="parrot"><img src="parrot.jpg" width="100" height="75" alt="parrot" class="preview"> 
            </a>
        </li>
        <li onclick="lizardText()">
            <a href="#" onclick="switchImg('lizard.jpg')">
                <img src="lizard.jpg" width="100" height="75" alt="lizard"><img src="lizard.jpg" width="100" height="75" alt="lizard" class="preview"> 
            </a>
        </li>
        <li onclick="horseText()">
            <a href="#" onclick="switchImg('horse.jpg')">
                <img src="horse.jpg" width="100" height="75" alt="horse"><img src="horse.jpg" width="100" height="75" alt="horse" class="preview"> 
            </a>
        </li>
        <li onclick="chickenText()">
            <a href="#" onclick="switchImg('chicken.jpg')"> 
                <img src="chicken.jpg" width="100" height="75" alt="chicken"><img src="chicken.jpg" width="100" height="75" alt="chicken" class="preview"> 
            </a>
        </li>
        <li onclick="defaultText()">
            <a href="#" onclick="switchImg('awesome.png')" class="textualLink"><p>Click for Default Image</p></a>
        </li>
    </ul>

    <!--This textarea is the field where information about whatever is clicked will pop up, and hopefully stay there. By default, it should contain some sort of welcome message.-->
    <div id="textarea" style="height:600px;width:320px;font:14px;font:14px/26px Arial, Helvetica, sans-serif;overflow:scroll; position:relative;
    top:12px;"><p id="textarea2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi pulvinar lectus non lectus auctor egestas. Donec at nunc neque. Morbi ornare condimentum lobortis. Nam vehicula urna ac mauris pharetra rutrum. Duis et arcu eget sapien interdum porttitor ut et tortor. Maecenas ultricies dignissim pretium. Integer quis enim metus. Sed enim lacus, eleifend eu euismod volutpat, blandit eu sem. Vestibulum varius purus ut est accumsan pellentesque. Donec quis enim id lectus sollicitudin suscipit at volutpat augue. Curabitur et metus purus. Fusce luctus nunc vitae sapien pharetra id accumsan lectus malesuada.</p></div>
    </div>
    </div>
    </div>
</td>
</body>
</html> 
```

然而，今天我和我的伙伴花了几个小时试图找到一种方法来覆盖内置的 CSS 以及如何集成 JavaScript。

我看到页面告诉我只需在我尝试构建的页面/节点的源代码中放置和标记：

```
<head>
<script src="PathToJavaScriptFile.js.txt">
</script>
</head> 
```

我看到页面告诉我使用 php 标签将 JavaScript 代码合并到页面中，这与在普通 HTML 页面中的标签中的方式非常相似：

```
<?php
function switchImg(i){
document.images["awesome"].src = i;
}
?> 
```

我什至尝试使用我认为称为模块的简单旧方法将 .js 文件调用到页面中：

```
<?php
drupal_add_js('PathToJavaScriptFile.js.txt', 'external');
?> 
```

有趣的事实，伙计们：Drupal 是愚蠢的。这些都不起作用，而且我用 Google-fu 找到的每一件事都是这三个选择的变体。你们中有谁是 Drupal 的特别大师吗？如果你能帮我解决这个问题，我以我自己的生命发誓，我会烘烤并运送一批我祖母的著名巧克力曲奇饼给你。

我正在失去理智。我只想添加一些 CSS 和 JavaScript，这样我就可以给给我实习的人留下深刻印象：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:02:58.517

首先你开始解释你为什么使用drupal。然后你问你的问题。然后抱怨drupal。阅读提问技巧！您需要提供您使用的 drupal 版本。或者你是如何构建你的模块的。或与问题相关的详细信息。

drupal 的方式是不覆盖 css 和输出。**如果您的客户要求您使用 Drupal，而他发现您实际上并没有使用它，他会怎么想？**人们使用 drupal 是有原因的，并且是稳定性、可靠性、可扩展性等。

您需要创建一个页面类型的节点并在那里添加内容。然后您可以转到 sites/all/themes/your-theme-name/template.php 中的 template.php 文件并使用 theme_preprocess_page() 添加 js。

或者您可以在模块中执行此操作。例如，您不能只将代码添加到它们不包含的模块中（就像我认为您在示例中所做的那样）。它们是模块，它们以某些方式工作。

在您的模块（或您的主题）中，您可以创建一个钩子。（记得在管理配置页面中启用它）例如

```
//code not tested
function yourmodulename_preprocess_page(&$vars)
{
 drupal_add_js(drupal_get_path('theme', 'MYTHEME') .'/mytheme.js', 'file'); 
//read the functions documentation!
} 
```

其他几点。

*   为什么你的 javascripts 有 .txt 扩展名？
*   还有你用的是什么主题？我推荐你使用 Zen 主题。
*   我认为那条路有些奇怪。为什么你的文件在 PathToJavaScriptFile/. 通常js文件放在sites/all/themes/yourthemename的主题文件夹中
*   您发布的示例非常模糊，但是在 php 中使用 javascript 的示例是完全错误的。

编辑：考虑到您无权访问管理员或页面的其余部分。看看您是否可以创建一个节点并将 Full HTML 设置为格式过滤器。然后你可以从那里添加你的 Javascript 和 script 标签。

# mysql - 通过 Rails 将 SQL 文件或 Excel 文件中的数据导入数据库

> ID：10556458
> 
> 赞同：1
> 
> 时间：2012-05-11T18:08:23.197
> 
> 标签：mysql, sql, ruby-on-rails, database, import-from-excel

我有来自 Excel 电子表格的数据，我想通过 Rails 导入数据库。我正在使用 Rails 3.2.3 和 Ruby 1.9.2。

数据是用户名和密码，文件名是`member.xlsx`.

```
<%= form_for @member do |f| %>
    <%= f.text_field :import,
        :maxlength=>'50',
        :style=>'width: 250px;',
        :placeholder => 'browse file *.sql or *.xlsx' %>
    <%= f.submit  %><% end %> 
```

我的桌子：

```
create_table :members do |t|
  t.string :username
  t.string :password_hash
  t.string :password_salt 
```

解决了

**解决方案**

我正在使用电子表格 gem 来解析 Excel 文件，并使用 CarrierWave gem 来上传 Excel 文件。因为我正在为用户使用设计模型，所以这是用于导入文件的控制器的样子

```
def import
    if params[:excel_file].nil?
      redirect_to user_new_import_path, :flash => { :error => 'You have not selected a file'}
    else
      test_file = params[:excel_file]
      file = ExcelUploader.new
      file.store!(test_file)
      book = Spreadsheet.open "#{file.store_path}"
      sheet1 = book.worksheet 0
      sheet1.each 1 do |row|
        name = row[0]
        email = row[2]
        generated_password = Devise.friendly_token.first(6) 
        temp_password = generated_password
        @user = User.create(:name => name, :email => email, :password => temp_password, :password_confirmation => temp_password)     
         UserMailer.password_send(@user).deliver
      end
      if @user.save
        redirect_to users_path, :notice => "success"
      else
        redirect_to new_import_user_path, :flash => { :error => 'error. try again' }
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:17:56.883

导入 sql 文件是一个可怕的想法，因为 sql 可以对您的数据库做任何事情。

导入 Excel 文件工作正常。有 Excel gems 可以读取数据。[roo](http://rubygems.org/gems/roo) gem可用于 xlsx 格式，但我尚未对其进行测试。我告诉用户使用 Excel 以 xls 格式存储文件，然后他们上传。

更好的（从应用程序开发人员的角度来看）是导入 csv 文件。csv 的缺点是该文件仅包含一个表。

另一方面，Excel 导入的一个问题是人们可以为您提供多个选项卡文件、公式而不是单元格中的值等。 - 所以一定要包括大量的错误检查。

常见问题：当您的代码需要 Date 对象时，人们在 Excel 工作表中将日期作为字符串输入。或者人们作为字符串输入的数字。您的代码应该测试和处理这些问题。

见[http://rubygems.org/gems/roo](http://rubygems.org/gems/roo)

回复：“给我一些代码”——这不是 StackOverflow 的工作方式。希望以上内容对您的旅程有所帮助。

# xcode4 - Xcode 4 中的文本编辑宏？

> ID：10556459
> 
> 赞同：0
> 
> 时间：2012-05-11T18:08:31.123
> 
> 标签：xcode4, macros, key-bindings

我试图弄清楚如何在 Xcode 4 中定义新的文本编辑击键。

举一个例子，Xcode 似乎没有非常有用的 Emacs 连接行功能：删除当前行和上一行之间的换行符，并且还删除当前行开头的任何多余的缩进空白。即，从这里输入一个键：

```
 _measurement = 
        [DPLMeasurement newWithDate:measureDate inManagedObjectContext:[datastore managedObjectContext]]; 
```

对此：

```
 _measurement = [DPLMeasurement newWithDate:measureDate inManagedObjectContext:[datastore managedObjectContext]]; 
```

而不是这个：

```
 _measurement =         [DPLMeasurement newWithDate:measureDate inManagedObjectContext:[datastore managedObjectContext]]; 
```

我已经看到了显然是针对 Xcode 3 的用户脚本的说明。Xcode 4 不再有这样的东西了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:45:19.150

哈雷对这个问题的回答几乎符合我的要求：

[Xcode重复行](https://stackoverflow.com/questions/10266170/xcode-4-duplicate-line)

将以下内容添加到 plist 文件 /Developer/Library/PrivateFrameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist：

```
Join Previous Line
String
moveToBeginningOfLine:, moveWordRight:, moveWordLeft:, deleteToBeginningOfLine:, deleteBackward: 
```

我说“几乎”是因为它连接了两行，并删除了第二行开头的空格，但如果第一行没有以空格结尾，它只是将它们撞在一起，我必须输入所需的空间。如果标点符号恰好位于行首，它还会删除标点符号（如左括号）。所以我不完全在那里。

# apache-commons - Apache Camel 是否取代了 Apache 公共管道

> ID：10556463
> 
> 赞同：2
> 
> 时间：2012-05-11T18:09:05.213
> 
> 标签：apache-commons, apache-camel, pipeline

我正在实现一个并行化的数据处理系统，当它通过多个阶段时，它涉及到一堆数据的转换和过滤器。我认为[Apache Commons Pipeline](http://commons.apache.org/sandbox/pipeline/)项目非常适合此要求，但 Apache Camel 似乎提供了该功能的超集。Camel 会取代 Commons Pipeline 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:55:33.420

Apache Camels 的目标更多是成为分布式系统和系统集成中的中介/路由引擎。也就是说，正如您所注意到的，它非常轻量级，可以很容易地用作并行执行数据流的引擎。我认为您不应该将骆驼视为替代品，而是替代品。

# jquery - jQuery 特色内容小部件中“当前”幻灯片上的文本链接不起作用

> ID：10556465
> 
> 赞同：0
> 
> 时间：2012-05-11T18:09:13.657
> 
> 标签：jquery, widget, featured

我已经在我公司的一个网站上成功实现了一个 jQuery 特色内容小部件。我们发现的唯一问题是，在显示当前幻灯片时，“阅读更多”文本链接被停用。

旋转中只有三张幻灯片。可以单击每个选项卡以显示“当前”幻灯片。但是，阅读更多链接在“活动”或“当前”选项卡上被禁用。当幻灯片切换到下一张图片时，“阅读更多”链接就会启用。

这是相关网站的链接。如果您希望我提供代码，请告诉我。

[http://www.immunogenicitysummit.com/](http://www.immunogenicitysummit.com/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:51:05.157

您必须将此行添加到您的 JavaScript 代码中：

```
$('.link-more').click(function(e){e.stopPropagation()}); 
```

祝你好运 ;）

# debugging - Firefox SDK Extension Builder - 检查/调试面板的 html 和 dom

> ID：10556474
> 
> 赞同：4
> 
> 时间：2012-05-11T18:09:44.630
> 
> 标签：debugging, firefox-addon, firebug, firefox-addon-sdk, chromebug

你如何调试[面板的](https://addons.mozilla.org/en-US/developers/docs/sdk/1.4/packages/addon-kit/docs/panel.html)html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:57:17.883

我认为 DOM 检查器应该允许你这样做。

[https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/](https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/)

[https://developer.mozilla.org/En/DOM_Inspector](https://developer.mozilla.org/En/DOM_Inspector)

虽然它没有控制台，但你可以使用内置的 Scratchpad (Shift+F4) 手动运行一些 js。不过，您需要先启用对 chrome-scope 的访问。更多信息：[https ://developer.mozilla.org/en/Tools/Scratchpad#Using_Scratchpad_to_access_Firefox_internals](https://developer.mozilla.org/en/Tools/Scratchpad#Using_Scratchpad_to_access_Firefox_internals)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T05:20:08.543

如果您的意思是，如何使用 Firefox 开发工具或 Firebug 检查面板中的 html 元素，很遗憾，答案是您不能这样做——这些工具目前不支持面板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:02:35.590

好吧，似乎没有办法在面板中做到这一点。所以最好的方法是使用[选项卡](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/tabs.html)而不是面板。在其中轻松检查 HTML 没有问题。

*稍后可以通过“尝试并查看*”方法处理面板的一些细微变化和怪癖。

# python - 在单独的线程中运行 Tkinter 表单

> ID：10556479
> 
> 赞同：8
> 
> 时间：2012-05-11T18:10:03.157
> 
> 标签：python, multithreading, tkinter

我编写了一个简短的模块，可以传递图像并简单地创建一个 Tkinter 窗口并显示它。我遇到的问题是，即使我实例化并调用在单独的线程中显示图像的方法，主程序也不会继续，直到 Tkinter 窗口关闭。

这是我的模块：

```
import Image, ImageTk
import Tkinter

class Viewer(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):
        self.grid()

    def show(self,img):
        self.to_display = ImageTk.PhotoImage(img)
        self.label_image = Tkinter.Label(self,image=self.to_display)
        self.label_image.grid(column = 0, row = 0, sticky = "NSEW")
        self.mainloop() 
```

它似乎工作正常，除非我从下面的测试程序中调用它，它似乎不允许我的测试程序继续，即使在不同的线程中启动也是如此。

```
import Image
from viewer import Viewer
import threading

def showimage(im):
    view = Viewer(None)
    view.show(im)

if __name__ == "__main__":
    im = Image.open("gaben.jpg")
    t = threading.Thread(showimage(im))
    t.start()
    print "Program keeps going..." 
```

我认为也许我的问题是我应该在模块本身内创建一个新线程，但我只想尝试保持简单，因为我是 Python 新手。

无论如何，提前感谢您的帮助。

编辑：为了清楚起见，我只是想制作一个在 Tkinter 窗口中显示图像的模块，以便我可以在任何时候使用这个模块来显示图像。我遇到的问题是，任何时候程序使用这个模块，它都无法恢复，直到 Tkinter 窗口关闭。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T18:28:01.463

Tkinter 不是线程安全的，普遍的共识是 Tkinter 不能在非主线程中工作。如果您重写代码以使 Tkinter 在主线程中运行，您可以让您的工作人员在其他线程中运行。

主要的警告是工人不能与 Tkinter 小部件交互。他们必须将数据写入队列，而您的主 GUI 线程必须轮询该队列。

如果您所做的只是显示图像，那么您可能根本不需要线程。线程仅在您有一个长时间运行的进程时才有用，否则会阻塞 GUI。Tkinter 可以毫不费力地轻松处理数百个图像和窗口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T14:50:51.977

从您的评论看来，您根本不需要 GUI。只需将图像写入磁盘并调用外部查看器即可。

在大多数系统上，应该可以使用以下方式启动默认查看器：

```
import subprocess 

subprocess.Popen("yourimage.png") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T18:22:38.190

据我所知，Tkinter 不喜欢玩其他线程。看到这篇文章...[我需要一点关于 Python、Tkinter 和线程的帮助](https://stackoverflow.com/questions/3567238/i-need-a-little-help-with-python-tkinter-and-threading)

解决方法是在主线程中创建一个（可能是隐藏的）顶层，生成一个单独的线程来打开图像等 - 并使用共享队列将消息发送回 Tk 线程。

你的项目需要使用 Tkinter 吗？我喜欢Tkinter。它“又快又脏”。- 但在（很多）情况下，其他 GUI 工具包是可行的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-22T19:12:53.360

我试图从一个单独的线程运行 tkinter，这不是一个好主意，它会冻结。有一种解决方案有效。在主线程中运行 gui，并将事件发送到主 gui。这是一个类似的例子，它只是显示一个标签。

```
import Tkinter as t
global root;
root = t.Tk()
root.title("Control center")
root.mainloop()

def new_window(*args):
    global root
    print "new window"
    window = t.Toplevel(root)
    label = t.Label(window, text="my new window")
    label.pack(side="top", fill="both", padx=10, pady=10)
    window.mainloop()

root.bind("<<newwin>>",new_window)

#this can be run in another thread
root.event_generate("<<newwin>>",when="tail") 
```

# c - C 语言：在 Main() 内的函数中的 args。不清楚它们是什么

> ID：10556481
> 
> 赞同：0
> 
> 时间：2012-05-11T18:10:12.610
> 
> 标签：c, main, args

我一直在努力理解这段代码的一些片段。它要求输入一些字符串，将计算元音并显示结果。这是一些我不理解的定义，我理解的机制。

在 main() 内部的定义中。我不明白这个'（cad）'在entrada函数中的论点是什么。它上面的一行定义了一个由 3 个指向 char 的指针组成的数组，如果我相信的话，就是 char *cad[N]。我会说我的问题是 Main 函数中的所有内容，参数如何在函数的括号内有意义。之后我明白了。

```
# include<stdio.h>
# include<stdlib.h>
# include<string.h>
# include<ctype.h>
# define N 3

// Function Prototypes

void salida(char *[], int*);
void entrada(char *[]);
int vocales(char *);

int main ()
{
    char *cad[N];  // declaring an array of 3 pointers to char
    int j, voc[N]; // declaring ints and an array of ints
    entrada (cad);// Function to read in strings of characters. 
    // count how many vowels per line
    for (j = 0; j<N; j++)
    voc[j] = vocales(cad[j]); // it gets the string and sends it to function vocales to count how many vowels. Returns number to array voc[j]
    salida (cad, voc);
}

// Function to read N characters of a string
void entrada(char *cd[] ){
    char B[121]; // it just creates an array long enough to hold a line of text
    int j, tam;

    printf("Enter %d strings of text\n", N );

    for (j= 0; j < N; j++){
        printf ("Cadena[%d]:", j + 1);
        gets(B);
        tam = (strlen(B)+1)* sizeof(char); // it counts the number of characters in one line
        cd[j] = (char *)malloc (tam); // it allocates dynamically for every line and array index enough space to accommodate that line
        strcpy(cd[j], B); // copies the line entered into the array having above previously reserved enough space for that array index
    } // so here it has created 3 inputs for each array index and has filled them with the string. Next will be to get the vowels out of it

}

// Now counting the number of vowels in a line
int vocales(char *c){
    int k, j;

    for(j= k= 0; j<strlen(c); j++)
        switch (tolower (*(c+j)))
        {
            case 'a':
            case 'e':
            case 'i':
            case 'o':
            case 'u':
              k++;
              break;
        }
    return k;
}

// function to print the number of vowels that each line has
void salida(char *cd[], int *v)
{
    int j;

    puts ("\n\t Displaying strings together with the number of characters");
    for (j = 0; j < N; j++)
    {
        printf("Cadena[%d]: %s has %d vowels \n", j+1, cd[j], v[j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:22:11.393

`cad`是一个指针数组。它只有 N 个指针的空间，而不是实际的字符串数据。该`entrada`函数读取 N 个文本字符串。对于其中的每一个，它都会分配一些空间`malloc`并在那里复制字符串。 `entrada`将相应的指针`cad`（它视为`cd`）设置为指向分配的缓冲区。

当您将数组作为参数传递时，您不会传递副本。相反，第一个元素的地址被传递给函数。这就是如何`entrada`修改`cad`.

# c# - 通过gridview select将多变量传递到新页面

> ID：10556485
> 
> 赞同：0
> 
> 时间：2012-05-11T18:10:27.973
> 
> 标签：c#, asp.net

我有一个gridview，当我选择一行到新页面时，我想传递两个不同的ID。我需要它们是两个不同的变量，所以我不想将它们绑定在一起。

目前，我使用链接选择 SUBMITTEDJOBAPPLICATION 的值和 JOBAPPLICATIONID 变量的方式是相同的（这是不正确的）。我的意思是 SUBMITTEDJOBAPPLICATION 是正确的，但 JOBAPPLICATIONID 与 SUBMITTEDJOBAPPLICATION 相同，这是不正确的。

```
<asp:HyperLink ID="lnkSelect" runat='server' NavigateUrl='<%# String.Format("~/UnscreenedApplicantPage.aspx?SubmittedID={0}&jobID={0}", Eval("SUBMITTEDJOBAPPLICATION"), Eval("JOBAPPLICATIONID")) %>'>Select</asp:HyperLink> 
```

我该如何补救？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:15:08.537

改变 `SubmittedID={0}&jobID={0}`

至

```
SubmittedID={0}&jobID={1} 
```

在`String.Format("SubmittedID={0}&jobID={0}", Eval("SUBMITTEDJOBAPPLICATION"), Eval("JOBAPPLICATIONID"))`你只使用零索引，所以第一个参数将替换这两个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:20:39.890

你应该试试这个

```
<asp:HyperLink ID="lnkSelect" runat='server' NavigateUrl='<%# String.Format("~/UnscreenedApplicantPage.aspx?SubmittedID={0}&jobID={1}", Eval("SUBMITTEDJOBAPPLICATION").ToString(), Eval("JOBAPPLICATIONID").ToString()) %>'>Select</asp:HyperLink> 
```

你也需要`Eval("SUBMITTEDJOBAPPLICATION").ToString(), Eval("JOBAPPLICATIONID").ToString()`。

# ruby-on-rails - Rails 3为什么filter_parameters不起作用

> ID：10556486
> 
> 赞同：0
> 
> 时间：2012-05-11T18:10:31.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我`config.filter_parameters += [:password, :efile, :title]`在 application.rb 中有这一行。
但是当我尝试保存这样的模型时：

```
 @claim_db[:xml] = xml_builder.to_xml.gsub('utf-8', 'utf-16')
 @claim_db[:title] = title.present? ? title : nil
 @claim_db[:applicants] = applicants.present? ? applicants : nil
 @claim_db[:native_number] = nn.present? ? nn : nil
 @claim_db[:change_date] = Time.now
 @claim_db[:is_signed] = false
 @claim_db[:with_errors] = errors.count > 0
 @claim_db.save! 
```

在日志中获取：

```
 ←[1m←[36mAREL (2.0ms)←[0m  ←[1mINSERT INTO [edocs] ([eclaim_id], [materialtitl
e_id], [is_secondary], [title], [ext], [size], [code], [receive_date], [reg_date
], [reg_numb], [idcead], [efile]) VALUES (100003, 7, 0, N'test', N'rtf', 4, N'test', '2012-05-11 21:05:12
.125', NULL, NULL, NULL, 0x61737373)←[0m
  ←[1m←[35mEXECUTE (0.0ms)←[0m  COMMIT TRANSACTION 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:41:01.193

此配置设置用于参数记录 - 当您使用 params 散列访问控制器时，这些将从日志中的散列中省略。在生产模式下，不会记录您的 SQL 查询。

# sql - 在 Oracle SQL 中使用时间戳进行选择

> ID：10556487
> 
> 赞同：1
> 
> 时间：2012-05-11T18:10:33.283
> 
> 标签：sql, oracle, select, timestamp

我的问题是尝试使用 SELECT 语句并按特定列排序前 10 名。在搜索了很多论坛后，我设法编译了一些东西，但是我需要确认一个字段中的时间戳在上周内。我已经执行了这个，但是我不确定这是否正确，因为我无法打印 where 子句的值：

```
SELECT itemid, count(itemid) 
FROM Rateddate 
WHERE TO_CHAR(CURRENT_TIMESTAMP - DATE_RATED) < TO_CHAR(7)  
GROUP BY itemid; 
```

TLDR：

```
TO_CHAR(CURRENT_TIMESTAMP - DATE_RATED) < TO_CHAR(7) 
```

这是否确保 date_rated 时间戳小于一周？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:16:37.453

说起来更有意义

```
WHERE date_rated > sysdate - interval '7' day 
```

如果您想要过去 168 小时的数据。你可能想要

```
WHERE date_rated > trunc(sysdate) - interval '7' day 
```

如果您想要 7 天前一天中的任何时间点的数据，而不是关心当前时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:17:09.207

这不适合你吗：

```
 trunc(CURRENT_TIMESTAMP - DATE_RATED) < 7 
```

这是假设这`DATE_RATED`是一个日期字段。如果没有，您需要先将其转换为`TO_DATE()`.

# ios - 在 WebView(iOS) 中打开的 RSS 链接

> ID：10556489
> 
> 赞同：0
> 
> 时间：2012-05-11T18:10:39.013
> 
> 标签：ios, uitableview, rss, webview, nsstring

我的应用程序有一个 RSS tableView，在另一个页面上有一个 WebView。我可以通过单击 RSS 中的任何项目打开 WebView 但我无法传递链接并在 WebView 中显示网站下面是我的代码

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

    NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];

    // clean up the link - get rid of spaces, returns, and tabs...
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@" " withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    storyLink = [storyLink stringByReplacingOccurrencesOfString:@"  " withString:@""];

    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    browserScreen = [[DetailsViewController alloc] initWithNibName:@"DetailsViewController" bundle:nil];
    [self.view addSubview:browserScreen.view];

    // open in Safari --> this line works perfect but I want to open the link in my own Webview so I commented it out
    //[[UIApplication sharedApplication] openURL:[NSURL URLWithString:storyLink]];

 } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:17:45.807

假设 UIWebView 在您的 DetailsViewController 中，您必须在 DetailsViewController 中的 WebView 中设置 URL。

```
browserScreen.webView.request = [NSURLRequest requestWithURL:[NSURL URLWithString:storyLink]]; 
```

# gwt - 如何使用域类（RequestFactory）上的注释规则进行客户端验证？

> ID：10556491
> 
> 赞同：8
> 
> 时间：2012-05-11T18:10:57.453
> 
> 标签：gwt, bean-validation, requestfactory, hibernate-validator

我一直在使用 GWT 2.4 开发一个项目，并寻找一种方法来验证（JSR 303）我的客户端（代理）类，而无需从我的域类（服务器端）重新创建注释。我知道有一个带有 GWT 中继代码（验证）的示例，但它不使用 RequestFactory，它使用 RPC。

是否可以从客户端的域类中进行验证？与客户端代码共享我的域模型是否是最佳策略？

据我所知，GWT 团队正在 2.3 和 2.4 上开发此功能。它已经完成了，还是我应该等待 GWT 2.5？

这已经发布在 GWT 论坛上，但仍然没有答案。

[https://groups.google.com/forum/#!msg/google-web-toolkit/au_GCy_9WZQ/6296p5TcWdoJ](https://groups.google.com/forum/#!msg/google-web-toolkit/au_GCy_9WZQ/6296p5TcWdoJ)

谢谢。

**编辑：这就是在客户端验证的方式（未经测试）......**

```
@UiHandler("save")
void onSave(ClickEvent event) {
    Modulo modulo = new Modulo(); //domain class
    Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    Set<ConstraintViolation<Modulo>> violations = validator.validate(modulo, Default.class);
    delegate.saveClicked();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:14:05.627

找到了一个（临时）解决方案，可以在客户端和带有 RequestFactory**的服务器上使用相同的验证注释：**

将 JSR 303 注释放在由代理接口（客户端）和域类（服务器）实现的单独接口中。当然，这个接口必须在共享包中。

由于验证注释将自动向下传递继承层次结构，验证现在应该在客户端和服务器上工作。

## 例子

以下是用户尝试注册时使用的对象示例：

`UserProxyValid`是包含 JSR 303 验证注释的通用接口：

```
public interface UserProxyValid  {

  @NotBlank(
      groups = {ClientGroup.class, ServerGroup.class})
  @UniqueEmail(
      groups = {ServerGroup.class})
  String getEmail();

  @NotBlank(
      groups = {ClientGroup.class, ServerGroup.class})
  @Size(
      min = 4, max = 25,
      groups = {ClientGroup.class, ServerGroup.class})
  String getPassword();
} 
```

`User`是服务器上的域类：

```
public class User implements UserProxyValid {

  private String email;
  private String password;

  public String getEmail() {
    return email;
  }

  public void setEmail(String email) {
    this.email = email;
  }

  public String getPassword() {
    return password;
  }

  public void setPassword(String password) {
    this.password = password;
  }
} 
```

最后`UserProxy`是客户端：

```
@ProxyFor(value = User.class)
public interface UserProxy extends ValueProxy, UserProxyValid {

  String getEmail();
  void setEmail(String email);

  String getPassword();
  void setPassword(String password);
} 
```

## 团体

通过**组**，我们可以确保单独的验证要么在客户端上完成，要么仅在服务器上完成，或者同时在两者上完成。（和上面的例子一样，电子邮件唯一性的验证只能在服务器上完成。）

这是您在客户端上验证对象的方式：

```
Validator clientValidator = Validation.buildDefaultValidatorFactory().getValidator();
    Set<ConstraintViolation<UserProxy>> violations = clientValidator.validate(userProxy, ClientGroup.class); 
```

以下是在服务器上进行验证的方式：

```
Validator serverValidator = Validation.buildDefaultValidatorFactory().getValidator();
    Set<ConstraintViolation<User>> violations = serverValidator.validate(user, ServerGroup.class); 
```

## 对未来的希望

当然，如果没有额外的`UserProxyValid`类会更好。因此，一旦 Google 提供了[BeanValidation](http://code.google.com/p/google-web-toolkit/wiki/BeanValidation)的更新，我们就可以消除该类并将注释移至域类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T19:47:24.823

我发现最好的选择是等待。GWT 团队仍在进行客户端验证，预计将在夏季结束。

[http://code.google.com/p/google-web-toolkit/wiki/BeanValidation](http://code.google.com/p/google-web-toolkit/wiki/BeanValidation)

> 项目成员 ncha...@google.com 的评论，2012 年 4 月 10 日：
> 
> “我计划在今年夏天完成规范的实施。”

由于此应用程序没有太多输入数据，因此我选择仅在服务器上进行验证。

# iterm - iterm2 默认窗口大小

> ID：10556492
> 
> 赞同：45
> 
> 时间：2012-05-11T18:11:12.907
> 
> 标签：iterm

我正在尝试找到一个在新创建的窗口上设置默认窗口大小的地方。

在 iterm1 中有显示配置文件，我没有看到 iterm2。 [http://iterm.sourceforge.net/usage.shtml](http://iterm.sourceforge.net/usage.shtml)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-16T23:30:59.010

您必须在行和列中指定默认窗口大小。该设置可以在 iTerm > Preferences > Profiles > Window 中找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-16T19:59:52.710

在 Profile => Window 中进行更改后，请确保

```
Disable session-initiated window resizing 
```

未选中以使您的更改在默认 iterm 窗口中生效

然后重新启动项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-28T05:28:56.467

这是你可以设置窗口大小的屏幕

```
iTerm2 > Preferences > Profiles > Window > Settings for New Windows 
```

[![在此处输入图像描述](../Images/987732f0d028f913dbf3bc2dab4c2542.png)](https://i.stack.imgur.com/PvES2.jpg)

# google-maps-api-3 - Safari 的 OSX 和 Windows 之间的窗格事件不一致

> ID：10556498
> 
> 赞同：0
> 
> 时间：2012-05-11T18:11:33.687
> 
> 标签：google-maps-api-3

在 OSX 上使用**Safari**，窗格的 Google Map v3 实现不一致，并且根据正在使用的窗格阻止标记单击事件起作用。

如果您启用开发菜单，然后**覆盖用户代理以报告为 Safari for Windows**，则该实现将匹配所有其他浏览器（FF、IE、Chrome 等）。这似乎表明这是 Google API 中的一个问题，因为更改的只是用户代理字符串。

*顺便说一句，将标记添加到 overlayPane (#6) 实际上会将标记添加到 overlayShadow (#2) 窗格。因此，目前无法在任何浏览器或平台上向窗格 6 添加任何内容。*

使用以下示例，可以通过将鼠标悬停在每个标记上来观察问题。如果标记接收到悬停事件，它将变为绿色。

```
<style type="text/css">
    html, body, #map_canvas
    {
        margin: 0;
        padding: 0;
        height: 100%;
    }
</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var map;

    function initialize() {
        var myOptions = {
            zoom: 7,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

        for (var i = 0; i <= 5; i++) {
            var m = new marker(i);
            m.setMap(map);
        }
    }

    google.maps.event.addDomListener(window, 'load', initialize);

    function marker(index) {
        this._latlng = new google.maps.LatLng(-34.397 + (index * .1), 150.644 + (index * .1));
        this._div = null;
        this._index = index;
    }
    marker.prototype = new google.maps.OverlayView();
    marker.prototype.onAdd = function () {
        var div = document.createElement('DIV');
        var label = document.createTextNode(this._index + 1);

        div.appendChild(label);

        div.id = this._index + 1;
        div.style.border = "1px solid black";
        div.style.backgroundColor = "red";
        div.style.width = "20px";
        div.style.height = "20px";
        div.style.position = "absolute";

        google.maps.event.addDomListener(div, 'mouseover', function () {
            this.style.backgroundColor = "green";
        });

        google.maps.event.addDomListener(div, 'mouseout', function () {
            this.style.backgroundColor = "red";
        });

        this._div = div;

        var panes = this.getPanes();

        switch (this._index) {
            case (0):
                panes.overlayLayer.appendChild(div);
                break;
            case (1):
                panes.overlayShadow.appendChild(div);
                break;
            case (2):
                panes.overlayImage.appendChild(div);
                break;
            case (3):
                panes.floatShadow.appendChild(div);
                break;
            case (4):
                panes.overlayMouseTarget.appendChild(div);
                break;
            case (5):
                panes.overlayShadow.appendChild(div);
                break;
        }
    }
    marker.prototype.draw = function () {
        var projection = this.getProjection();
        if (projection) {
            var div = this._div;

            var point = projection.fromLatLngToDivPixel(this._latlng);
            if (point && div != null) {
                div.style.left = point.x - 10 + 'px';
                div.style.top = point.y + -10 + 'px';
            }
        }
    }
</script>
<div id="map_canvas"></div> 
```

有没有人找到解决此问题的方法，或者是否有待解决的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:22:01.973

关于您说“窗格的 Google Map v3 实现不一致并且根据正在使用的窗格阻止标记单击事件起作用”的问题的一部分，问题似乎是您可能正在尝试在不打算使用鼠标事件的窗格上使用鼠标事件：

窗格 1：`overlayLayer`- 来自[api-doc](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)：**它可能不会接收 DOM 事件。**

窗格 2：`overlayShadow`- 来自[api-doc](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)：**它可能不会接收 DOM 事件。**

关于您的问题中关注的部分`MapPanes`：

> *顺便说一句，将标记添加到 overlayPane (#6) 实际上会将* *标记添加到 overlayShadow (#2) 窗格。因此，目前无法在任何浏览器或* *平台**上向窗格 6 添加任何内容* 。

 *首先，没有`overlayPane`；如果您从下到上谈论窗格 6，我相信您的意思是：`floatPane`. 另外，我认为问题实际上是您的`switch`语句代码中的错误：

```
switch (this._index) {
    case (0):
        panes.overlayLayer.appendChild(div);
        break;
    case (1):
        panes.overlayShadow.appendChild(div);
        break;
    case (2):
        panes.overlayImage.appendChild(div);
        break;
    case (3):
        panes.floatShadow.appendChild(div);
        break;
    case (4):
        panes.overlayMouseTarget.appendChild(div);
        break;
    case (5):
        // This code is a duplicate of the code in case(1):
        panes.overlayShadow.appendChild(div);
        // I believe what you want here is:
        panes.floatPane.appendChild( div );
        break;
} 
```

我希望这是有帮助的 -*

# mysql - MySQL 查询错误 1054

> ID：10556505
> 
> 赞同：2
> 
> 时间：2012-05-11T18:12:02.610
> 
> 标签：mysql, sql

我有这个**MySQL**查询

```
SELECT count( * ) AS total
FROM `orders` o, `orders_status` s, `orders_status_history` osh
LEFT JOIN `orders_total` ot ON ot.orders_id = o.orders_id
WHERE o.orders_status = s.orders_status_id
AND osh.orders_id = o.orders_id
AND s.language_id = '5'
AND s.orders_status_id = '6'
AND ot.class = 'ot_total' 
```

收到此错误：

```
#1054 - Unknown column 'o.orders_id' in 'on clause' 
```

我的表架构如下：

```
CREATE TABLE IF NOT EXISTS `orders` (
  `orders_id` int(11) NOT NULL auto_increment,
  `customers_id` int(11) NOT NULL default '0',
  `last_modified` datetime default NULL,
  `orders_status` int(5) NOT NULL default '0',
  `orders_date_finished` datetime default NULL,
  `comments` text,
  `currency` char(3) default NULL,
  `currency_value` decimal(14,6) default NULL,
  `invoice_number` varchar(100) default NULL,
  PRIMARY KEY  (`orders_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=cp1251 AUTO_INCREMENT=8419 ; 
```

而且我不明白错误来自哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:14:22.990

您有一个`OR`作为您的订单表的表别名。您需要更改表别名。

```
SELECT count( * ) AS total
FROM `orders` o , `orders_status` s, `orders_status_history` osh
LEFT JOIN `orders_total` ot ON ot.orders_id = or.orders_id
WHERE o.orders_status = s.orders_status_id
AND osh.orders_id = or.orders_id
AND s.language_id = '5'
AND s.orders_status_id = '6'
AND ot.class = 'ot_total' 
```

您还应该更改您的 JOIN 语法

```
SELECT count( * ) AS total
FROM `orders` o 
LEFT JOIN `orders_status` s
    ON o.order_status = s.orders_status_id
LEFT JOIN `orders_status_history` osh
    ON osh.orders_id = o.orders_id  
LEFT JOIN `orders_total` ot 
    ON ot.orders_id = o.orders_id
WHERE s.language_id = '5'
    AND s.orders_status_id = '6'
    AND ot.class = 'ot_total' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:32:23.187

如[手册](http://dev.mysql.com/doc/en/join.html)所述：

> 以前，逗号运算符 ( `,`) 和`JOIN`两者具有相同的优先级，因此连接表达式`t1, t2 JOIN t3`被解释为`((t1, t2) JOIN t3)`。Now`JOIN`具有更高的优先级，因此表达式被解释为`(t1, (t2 JOIN t3))`. 此更改会影响使用`ON`子句的语句，因为该子句只能引用连接操作数中的列，并且优先级的更改会更改对这些操作数的解释。
> 
> 例子：
> 
> ```
> CREATE TABLE t1 (i1 INT, j1 INT);
> CREATE TABLE t2 (i2 INT, j2 INT);
> CREATE TABLE t3 (i3 INT, j3 INT);
> INSERT INTO t1 VALUES(1,1);
> INSERT INTO t2 VALUES(1,1);
> INSERT INTO t3 VALUES(1,1);
> SELECT * FROM t1, t2 JOIN t3 ON (t1.i1 = t3.i3); 
> ```
> 
> 以前，`SELECT`由于 as 的隐式分组， 是合法`t1,t2`的`(t1,t2)`。现在`JOIN`优先，所以`ON`子句的操作数是`t2`and `t3`。因为`t1.i1`不是任何一个操作数中的列，所以结果是`Unknown column 't1.i1' in 'on clause'`错误的。要允许处理连接，请将前两个表用括号显式分组，以便`ON`子句的操作数是`(t1,t2)`and `t3`：
> 
> ```
> SELECT * FROM (t1, t2) JOIN t3 ON (t1.i1 = t3.i3); 
> ```
> 
> 或者，避免使用逗号运算符，`JOIN`而是使用：
> 
> ```
> SELECT * FROM t1 JOIN t2 JOIN t3 ON (t1.i1 = t3.i3); 
> ```
> 
> 此更改也适用于将逗号运算符与`INNER JOIN`, `CROSS JOIN`,`LEFT JOIN`和混合的语句`RIGHT JOIN`，所有这些语句现在都比逗号运算符具有更高的优先级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:18:12.740

或者是一个mysql关键字！用其他东西替换它，例如_or & 再试一次！

# struts2 - Struts2 (2.3.1.2) 和 Sitemesh 2.3 - 排除不起作用

> ID：10556508
> 
> 赞同：0
> 
> 时间：2012-05-11T18:12:09.597
> 
> 标签：struts2, sitemesh

有人可以帮我解决如何排除子窗口的装饰吗？这是我的代码：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>Hello World Struts 2 Maven</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

     <listener>
        <listener-class>org.apache.struts2.dispatcher.ng.listener.StrutsListener</listener-class>
    </listener>

    <!--Filters  -->  

    <filter>
        <filter-name>struts-cleanup</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ActionContextCleanUp</filter-class>
    </filter>
    <filter>
        <filter-name>struts-prepare</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter</filter-class>
    </filter>
    <filter>
        <filter-name>struts-execute</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter</filter-class>
    </filter>
    <filter>
        <filter-name>sitemesh</filter-name>
        <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts-prepare</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <filter-mapping>
        <filter-name>sitemesh</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <filter-mapping>
        <filter-name>struts-execute</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <filter-mapping>
        <filter-name>struts-cleanup</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

</web-app> 
```

struts.xml：

```
<struts>

    <constant name="struts.devMode" value="true" />

    <package name="basicstruts2" extends="struts-default">

        <!-- If no class attribute is specified the framework will assume success and 
        render the result index.jsp -->
        <!-- If no name value for the result node is specified the success value is the default -->
        <action name="index">
            <result>/index.jsp</result>
        </action>
              <action name="child3">
            <result>/WEB-INF/popUp/Test.jsp</result>
        </action>

        <!-- If the URL is hello.action the call the execute method of class HelloWorldAction.
        If the result returned by the execute method is success render the HelloWorld.jsp -->
        <action name="hello" class="org.apache.struts.helloworld.action.HelloWorldAction" method="execute">
            <result name="success">/HelloWorld.jsp</result>
        </action>

    </package>

</struts> 
```

装饰器.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<decorators defaultdir="/decorators">
    <excludes>

        <pattern>/WEB-INF/popUp/Test.jsp</pattern>
        <pattern>/popUp/Test.jsp</pattern>
        <pattern>child3.html</pattern>
        <pattern>child3</pattern>
        <pattern>/default/child3</pattern>
        <pattern>/default/child3.html</pattern>
    </excludes> 
    <decorator name="main" page="layout.jsp">
        <pattern>/*</pattern>
    </decorator>
    <decorator name="panel" page="panel.jsp" />
</decorators> 
```

我已经在这个任务上花了 2 天时间，但还没有成功。任何人都可以帮助或指向我的一些链接吗？

问候， 纳齐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:43:18.910

我解决了这个问题。我添加了 struts2-sitemesh 插件并按照配置 web xml 的文档进行操作。现在我的装饰器工作得很好。

# python - Django 测试冻结在数据库创建

> ID：10556517
> 
> 赞同：3
> 
> 时间：2012-05-11T18:12:41.407
> 
> 标签：python, django, unit-testing

这是我第一次尝试使用 Django 进行单元测试，但进展并不顺利……

我有一些很奇怪的东西。当我使用以下命令启动测试时：./manage.py test，命令行冻结在“为别名'default'创建测试数据库......”。我已经等了 10 分钟，什么都没有……无法取消 (CTRL+C) 这件事。我必须关闭外壳并重新开始。

如果我“运行服务器”应用程序，一切正常。我看到它正在使用所有表创建一个名为“test_”的数据库，但之后立即停止，没有提示任何错误或其他东西。

有人对这一切有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:31:24.150

它终于起作用了！

问题来自南方。如果 South 在 INSTALLED_APPS 中，没有设置“SOUTH_TESTS_MIGRATE = False”，它会在创建测试数据库时冻结。也许只是执行时间太长，但我已经等了超过 15 分钟，而且它一直冻结。

这是有关此的文档： http: [//south.aeracode.org/docs/settings.html#south-tests-migrate](http://south.aeracode.org/docs/settings.html#south-tests-migrate)

# android - 为什么我的 Hello World Android Activity 没有跨越整个屏幕？

> ID：10556519
> 
> 赞同：0
> 
> 时间：2012-05-11T18:12:54.093
> 
> 标签：android, android-layout, android-activity, android-view

**更新**

添加以下样式并为我的应用程序设置它后，我已经让它绘制了整个屏幕：

```
<resources>
    <style name="app_theme" parent="android:Theme.NoTitleBar">
        <item name="android:windowBackground">@color/green</item>
    </style>    
</resources> 
```

在开发我的第一个 Android 应用程序时，我意识到我的应用程序视图永远不会跨越整个屏幕，而我下载的其他示例项目却可以。为了测试这一点，我创建了一个基本的活动类并将 a 的背景设置`TextView`为绿色，以查看它的跨度。如果这是一个愚蠢的问题，请原谅我，但我对此并不陌生。

这是屏幕截图：

![在此处输入图像描述](../Images/ce3e5c1d3f326e161c59601943b91c9a.png)

这是完整的 HomeActivity 源代码：

```
public class HomeActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

这是布局文件（`/res/layout/main.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:text="Hello World, StackOverflow"
    android:background="#00FF00"
    />
</LinearLayout> 
```

这是模拟器中另一个运行良好的应用程序的屏幕截图，横跨整个窗口：

![在此处输入图像描述](../Images/c5cbf3b9f62a25d25635eab192c46843.png)

**编辑**

我将我的 XML 文件编辑为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#00FF00"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:text="Hello World, StackOverflow"
    />
</LinearLayout> 
```

然后清理并建造，运行并获得相同的确切视图。

**编辑 2**

我按要求删除了“垂直”方向线，没有变化。

这是我的 AndroidManifest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.blah.blah.myCrap"
          android:versionCode="1"
          android:versionName="1.0">

    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application android:label="@string/app_name" >
        <activity android:name="HomeActivity"
                  android:label="@string/app_name">
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

在我的清单中添加了以下内容`<application>`

```
<supports-screens android:resizeable="true"
                      android:smallScreens="true" 
                      android:normalScreens="true" 
                      android:largeScreens="true"

                      android:anyDensity="true" /> 
```

还是尺寸不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:31:54.063

在 Android 2.2 模拟器上运行良好

![在此处输入图像描述](../Images/46716fdd7349f4339ed762c1bd590a0e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:38:56.790

检查您的清单以查看它是否支持不同的屏幕尺寸。您可以在此 QA 中找到更多信息（[fill_parent 不会在 LinearLayout 中填充整个屏幕](https://stackoverflow.com/questions/9504217/fill-parent-is-not-filling-entire-screen-in-linearlayout)）

显然，如果您不指定它支持小、正常、大、任意密度的屏幕尺寸，您可能会遇到布局无法填满整个屏幕的问题。

# javascript - 当 iframe 存在时，Android webview 将无法正确处理事件

> ID：10556524
> 
> 赞同：4
> 
> 时间：2012-05-11T18:13:35.260
> 
> 标签：javascript, android, iframe, webview, scroll

我遇到以下问题 - 我有一个 webview，我在其中加载了一个 iframe，我通过 javascript 修改（插入文本）的内容文档。问题是当内容变得太多（webview变得可滚动）并且当用户滚动时，触摸事件将无法正确处理 - 即用户将点击某处并且光标将出现在不适当的位置或不会完全出现。当不存在 iframe 时，不会观察到此行为。

欢迎任何有关如何解决此问题的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:35:12.560

问题可能是由于双滚动。

由于 iFrame 的内容超出了它的处理能力，因此使用触摸事件来滚动 iFrame。但是 webview 本身也可以滚动，因此很可能会出现奇怪的行为。

考虑当 iFrame 内容碰到边缘时会发生什么（用户一直向上或向下滚动 iFrame）。如果用户继续滚动 iFrame，会发生什么？它应该什么都不做并吃掉这个事件吗？反弹 iFrame 滚动内容？将事件传递给 webview 以便它可以滚动？

这是一个模棱两可的情况。Android 的反应方式可能会因触摸手势的不同而不一致，甚至可能因不同的 Android 版本而异。

您最好避免使用 iFrame 并直接修改 webview 内容，或者为 iFrame 提供 100% 的高度和 100% 的宽度，以便它占据整个 webview。

这将避免滚动冲突，并且 Android 应该不再对放置光标的位置感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:41:33.490

1.  为 iframe 设置固定高度。`<iframe ... scrolling="no" height="150px">`

2.  将 iScroll 应用于`div`iframe 中的内容。

iScroll 可在此处获得： [https ://github.com/cubiq/iscroll](https://github.com/cubiq/iscroll)

这是 iScroll 的演示：http: [//cubiq.org/dropbox/iscroll4/examples/simple/](http://cubiq.org/dropbox/iscroll4/examples/simple/)

# architecture - 跨集群管理大型对象。

> ID：10556528
> 
> 赞同：2
> 
> 时间：2012-05-11T18:13:50.987
> 
> 标签：architecture, hash, routing, distributed-computing, cluster-computing

我应该为下面的应用程序使用哪种架构？

在我们的 SAAS 应用程序中，每个客户都会获得一个文件目录。这些文件可能非常大，需要非常快速地读取和写入。有时，客户会看到非常重的使用量，并且需要将文件复制到多个盒子以处理负载。对文件的任何更改都需要在合理的时间段（不到一分钟）内复制。

每个客户都有一个子域 customername.mydomain.com。不知何故，对这个子域的请求需要被路由到一个包含客户文件的盒子。需要将客户添加到系统中并动态分配给盒子。

我想只拥有一个服务器列表，然后对客户名称进行散列以分配客户，但这使得添加额外的框变得困难。

我们使用亚马逊来托管应用程序。S3 可以成为解决方案的一部分。但是文件不能单独存在于 S3 上，因为没有快速随机访问文件内容。

我需要知道如何将客户分配到盒子、如何管理复制、如何正确路由子域以及如何以动态方式进行。我们首选的语言是 Java，但其他语言也可以。

我意识到这是一个巨大的问题。我怀疑是否有开箱即用的解决方案，但如果有，请列出它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T03:36:57.820

老实说，如果您已经在 AWS 中，请使用云形成按需启动一个盒子，在前面添加一个 ELB，以处理您的路由问题。

在机器启动时，将该客户的文件从 S3 下载到本地磁盘上。

设置一个每 30-60 秒运行一次的作业，以检查 S3 上的新文件，并按需推送/拉下它们。

# java - 如何为'x'的第n列设置列名

> ID：10556534
> 
> 赞同：0
> 
> 时间：2012-05-11T18:14:28.367
> 
> 标签：java, sql, sql-server

您好以下查询返回：没有为“t”的第 1 列指定列名。

```
 public ArrayList<DocumentModel> findByDate(String code, String date, String dateFinal) throws GeneralException{
    ArrayList<DocumentModel> docs = new ArrayList<DocumentModel>();
    String d1 = date;
    String delimiter = "-";
    String[]temp = d1.split(delimiter);
    String[]temp2 = dateFinal.split("-");
    String num="";
    String alfa="";
    if (code.compareTo("")!=0){
        String[] c1 = code.split(",");
        num = c1[0];
        alfa = c1[1];
    }

    try{
        String sql = "SELECT max(issuedate),airlineOid as airlineNumericCode FROM Document  WHERE ";

        if (alfa.compareTo("")!=0) sql+=" airlineOid='"+alfa+"' and ";

        sql+=" convert(varchar,issueDate,112) >= '" + temp[0]+ temp[1] +"00'  AND convert(varchar,issueDate,112) < '"+ temp2[0]+ temp2[1] +"32' group by airlineOid";

        String sql2="select d.*,'"+num+"' as airlineNumericCode from document d,("+sql+") as t where t.airlineOid=d.airlineOid and t.issueDate=d.issueDate ORDER BY issueDate DESC ";

        ResultSet rs = this.executeQuery(sql2);
        while(rs.next()){
            docs.add((DocumentModel)this.build(rs));
        }
        if(docs != null){
            return docs;
        } else {
            return docs = null;
        }
    } catch (SQLException ex){
        throw new GeneralException(ex);
    }
} 
```

我看不到应该在哪里指定名称。非常感谢你！最好的问候伊格纳西奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:17:21.313

您需要向 中添加列别名`max(issuedate)`，如下所示：

```
String sql = "SELECT max(issuedate) as MaxIssueDate, airlineOid as airlineNumericCode FROM Document  WHERE "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:20:51.753

我认为这是您的问题....您在 SQL 中将 airline0id 重命名为 airlineNumericCode。然后，在sql2 中，您尝试将其称为airline0id。试试这个：

```
String sql = "SELECT max(issuedate) as issueDate,airlineOid as airlineNumericCode FROM Document  WHERE ";

...

String sql2="select d.*,'"+num+"' as airlineNumericCode from document d,("+sql+") as t where t.airlineNumericCode=d.airlineOid and t.issueDate=d.issueDate ORDER BY issueDate DESC "; 
```

# java - 在pnml中使用java代码来表示Colored Petri Net

> ID：10556540
> 
> 赞同：3
> 
> 时间：2012-05-11T18:14:51.253
> 
> 标签：java, automation, modeling, petri-net, dining-philosopher

当我们编写有色 Petri 网 (CP-Net) 时，我们是否可以在声明部分使用 java 代码，就像下面 PNML 中的示例一样，或者我们也必须在这部分考虑一个标准？下面的例子是一个 XML 表示，但是我们可以用同样的方式在 pnml 中表示吗？如果没有，你能帮我吗？我们该怎么做？谢谢，

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<pnml>
  <net id="n1">
    <import>
      <text>import java.util.Iterator;</text>
    </import>
    <declaration>
      <text>int x = 1;

    public String left(int i) {
        String s = "";
        switch (i) {
            case 1:
                s = new String("b");
                break;
            case 2:
                s = new String("c");
                break;
            case 3:
                s = new String("d");
                break;
            case 4:
                s = new String("e");
                break;
            case 5:
                s = new String("f");
                break;
        }
        return s;
    }

    public String right(int i) {
        String s = "";
        switch (i) {
            case 1:
                s = new String("a");
                break;
            case 2:
                s = new String("b");
                break;
            case 3:
                s = new String("c");
                break;
            case 4:
                s = new String("d");
                break;
            case 5:
                s = new String("e");
                break;
        }
        return s;
    }

    public TokenSet lr(int i) {
        TokenSet tk = new TokenSet(new Token(right(i)));
        tk.add(new Token(left(i)));
        return tk;
    }</text>
    </declaration>
    <place id="p3">
      <graphics>
        <position x="475" y="325"/>
      </graphics>
      <name>
        <text>free forks</text>
        <graphics>
          <offset x="70" y="0"/>
        </graphics>
      </name>
      <initialMarking>
        <text>"a"</text>
        <text>"b"</text>
        <text>"c"</text>
        <text>"d"</text>
        <text>"e"</text>
      </initialMarking>
    </place>
    <place id="p2">
      <graphics>
        <position x="325" y="335"/>
      </graphics>
      <name>
        <text>eat</text>
        <graphics>
          <offset x="50" y="-10"/>
        </graphics>
      </name>
    </place>
    <place id="p1">
      <graphics>
        <position x="325" y="125"/>
      </graphics>
      <name>
        <text>think</text>
        <graphics>
          <offset x="60" y="-10"/>
        </graphics>
      </name>
      <initialMarking>
        <text>1</text>
        <text>2</text>
        <text>3</text>
        <text>4</text>
        <text>5</text>
      </initialMarking>
    </place>
    <arc id="o15" source="t5" target="p3">
      <expression>
        <text>lr(x)</text>
      </expression>
      <graphics>
        <position x="331" y="440"/>
        <position x="454" y="341"/>
      </graphics>
    </arc>
    <arc id="o7" source="t5" target="p1">
      <expression>
        <text>x</text>
      </expression>
      <graphics>
        <position x="325" y="450"/>
        <position x="325" y="515"/>
        <position x="185" y="515"/>
        <position x="185" y="75"/>
        <position x="325" y="75"/>
        <position x="325" y="99"/>
      </graphics>
    </arc>
    <arc id="o9" source="t4" target="p2">
      <expression>
        <text>x</text>
      </expression>
      <graphics>
        <position x="325" y="230"/>
        <position x="325" y="309"/>
      </graphics>
    </arc>
    <arc id="i17" source="p2" target="t5">
      <expression>
        <text>getTokenSet().size()&gt;0</text>
      </expression>
      <expression>
        <text>x = (Integer) (getTokenSet().get(0)).getObject()</text>
      </expression>
      <graphics>
        <position x="325" y="361"/>
        <position x="325" y="440"/>
      </graphics>
    </arc>
    <arc id="i11" source="p3" target="t4">
      <expression>
        <text>getTokenSet().size()&gt;0</text>
      </expression>
      <expression>
        <text>lr(x)</text>
      </expression>
      <graphics>
        <position x="453" y="310"/>
        <position x="332" y="230"/>
      </graphics>
    </arc>
    <arc id="i13" source="p1" target="t4">
      <expression>
        <text>getTokenSet().size()&gt;0</text>
      </expression>
      <expression>
        <text>x</text>
      </expression>
      <graphics>
        <position x="325" y="151"/>
        <position x="325" y="220"/>
      </graphics>
    </arc>
    <transition id="t4">
      <graphics>
        <position x="325" y="225"/>
      </graphics>
      <name>
        <text>take forks</text>
        <graphics>
          <offset x="-70" y="0"/>
        </graphics>
      </name>
      <guard>
        <text>boolean found = false;
            Iterator it = p1.getTokens().iterator();
            while (!found &amp;&amp; it.hasNext()) {
                Token token = (Token) it.next();
                int i = (Integer) token.getObject();
                if (p3.getTokens().containsAll(lr(i))) {
                    x = i;
                    found = true;
                }
            }
            return found;</text>
      </guard>
    </transition>
    <transition id="t5">
      <graphics>
        <position x="325" y="445"/>
      </graphics>
      <name>
        <text>put down forks</text>
        <graphics>
          <offset x="-70" y="0"/>
        </graphics>
      </name>
      <guard>
        <text>return true;</text>
      </guard>
    </transition>
  </net>
</pnml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:08:00.923

我想我找到了解决方案，我们不能使用相同的方式，我们可以使用像**[MathML](http://en.wikipedia.org/wiki/MathML)**（MathML 的一个子集）这样的语言来考虑标准。 [www.pnml.org/papers/forte06.pdf](http://www.pnml.org/papers/forte06.pdf)

谢谢大家的意见。。

# c# - 优化重复文件条目删除方法

> ID：10556544
> 
> 赞同：1
> 
> 时间：2012-05-11T18:15:19.817
> 
> 标签：c#, .net

我有以下代码要优化。由于我希望文件很大，因此我没有使用 HashMap 来存储行，而是选择了 String 数组。我尝试用大约 500,000 的 n 测试逻辑，它运行了大约 14 分钟。我肯定想让它比这快得多，并感谢任何帮助或建议。

```
 public static void RemoveDuplicateEntriesinFile(string filepath)
        {
              if (filepath == null)
                    throw new ArgumentException("Please provide a valid FilePath");
              String[] lines = File.ReadAllLines(filepath);
              for (int i = 0; i < lines.Length; i++)
              {
                    for (int j = (i + 1); j < lines.Length; j++)
                    {
                          if ((lines[i] !=null) && (lines[j]!=null) && lines[i].Equals(lines[j]))
                          {//replace duplicates with null
                                lines[j] = null;
                          }
                    }
              }

              File.WriteAllLines(filepath, lines);
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:27:30.660

“因为我希望文件很大，所以我没有使用 HashMap 来存储行，而是选择了 String 数组。”</p>

我不同意你的推理；文件越大，您从散列中获得的性能优势就越大。在您的代码中，您将每一行与*所有*后续行进行比较，整个文件需要 O(n²) 计算复杂度。

另一方面，如果您要使用高效的散列算法，那么每次散列查找将在 O(1) 内完成；处理整个文件的计算复杂度变为 O(n)。

尝试使用 a`HashSet<string>`并观察处理时间的差异：

```
public static void RemoveDuplicateEntriesinFile(string filepath)
{
    if (filepath == null)
        throw new ArgumentException("Please provide a valid FilePath");

    HashSet<string> hashSet = new HashSet<string>(File.ReadLines(filepath));
    File.WriteAllLines(filepath, hashSet);
} 
```

**编辑**：您能否尝试以下版本的算法并检查需要多长时间？它经过优化以最大程度地减少内存消耗：

```
HashAlgorithm hashAlgorithm = new SHA256Managed();
HashSet<string> hashSet = new HashSet<string>();
string tempFilePath = filepath + ".tmp";

using (var fs = new FileStream(tempFilePath, FileMode.Create, FileAccess.Write))
using (var sw = new StreamWriter(fs))
{
    foreach (string line in File.ReadLines(filepath))
    {
        byte[] lineBytes = Encoding.UTF8.GetBytes(line);
        byte[] hashBytes = hashAlgorithm.ComputeHash(lineBytes);
        string hash = Convert.ToBase64String(hashBytes);

        if (hashSet.Add(hash))
            sw.WriteLine(line);
    }
}

File.Delete(filepath);
File.Move(tempFilePath, filepath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:18:57.173

`lines[j] = null;`对我不起作用。`File.WriteAllLines(filepath, lines);`将这些行写为 "" (string.Empty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:22:38.477

您可以尝试创建一个新列表并将其添加到其中。

```
 public static void RemoveDuplicateEntriesinFile(string filepath)
        {
              if (filepath == null)
                    throw new ArgumentException("Please provide a valid FilePath");
              String[] lines = File.ReadAllLines(filepath);
              List<String> newLines=new List<String>()
              foreach (string s in lines)
              {
                   if (newLines.Contains(s)
                   continue;
                   newLines.add(s);
              }
              //not sure if you can do this with a list, might have to convert back to array
              File.WriteAllLines(filepath, newLines);
        } 
```

# hive - 在表的子集上运行 Hive 转换脚本

> ID：10556547
> 
> 赞同：2
> 
> 时间：2012-05-11T18:15:35.460
> 
> 标签：hive, subset, distribute

我有一个转换脚本（用 R 编写），我想在表的子集上运行它。即我想运行许多减少步骤，一个用于某个列的每个值。

假设原始表有列 {C1, C2, C3}，则转换应在 C1 的不同值上运行，并将 C2 和 C3 作为输入数据传递，将输出与 C1 的值一起作为结果。

我正在查看 Hive DISTRIBUTE 操作来解决这个问题，但无法弄清楚它的正确语法/机制。

例如，如果这是我的表：

```
C1,C2
a,1
a,2
b,1
b,2
b,3 
```

我的脚本返回表的每个子集 C1 的 C2 的平均值，那么结果应该是：

```
C1,D1
a,1.5
b,2 
```

这是我想做的**语法错误的伪代码。**假设 my_table 有 C1、C2 列：

```
from my_table
select
  C1,
  transform(
    C2
  )
using 'my_script.R'
distribute by C1
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:44:00.817

您的脚本是一个没有地图组件的化简脚本。您应该使用身份映射器（/bin/cat），然后将输入提供给 reduce 部分。在 map 和 reduce 之间是 shuffle 阶段，它将处理您的`DISTRIBUTE BY C1`子句。这是我写的快速的东西，还没有机会验证它：

```
FROM (
  FROM my_table
  MAP C1, C2
  USING '/bin/cat'
  AS C1, C2
  DISTRIBUTE BY C1 ) map_output
INSERT OVERWRITE TABLE mean_table
  REDUCE map_output.C1, C2
  USING 'my_script.R'
 AS C1, mean; 
```

不要忘记，它保证具有相同键值的所有记录（在您的情况下为 C1）都转到同一个 reducer（即脚本的相同实例化）。但是，您也可以将输入中具有不同 key 值的其他记录设置为相同的 reducer。

例如，您可以让所有 a,1 a,2 b,1 b,2 b,3 转到同一个 reduce 脚本。因此，您需要确保打破减速器中的输入记录集

# jquery - jquery 简单示例 change() 函数

> ID：10556548
> 
> 赞同：3
> 
> 时间：2012-05-11T18:15:48.117
> 
> 标签：jquery

我只是在学习 jQuery，我很菜鸟。

看，我们有 2 个 div 如下：

```
<div id="div1">
<ul>
    <li> This is Line 1</li>
    <li> This is Line 2</li>
    <li> This is Line 3</li>
    <li> This is Line 4</li>
    <li> This is Line 5</li>
</ul>
</div>

<div id="div2">
<ul>
    <li> <input type="text" /></li>
    <li> <input type="text" /></li>
    <li> <input type="text" /></li>
    <li> <input type="text" /></li>
    <li> <input type="text" /></li>
</ul>
</div> 
```

由于我刚刚学习change()函数，所以我想做的就是：当div2中输入框的每个值发生变化时，应将相同数字的div1 li更改为输入的值，例如如果我们开始输入在 div2 的第二个输入框中，第二个 li 文本应该是我们在第二个输入框中输入的内容。

这是我迄今为止尝试过的，但没有奏效：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#div2 :input').change(function(i){
            var str = $(this).text;
            $('#div1 li').eq(i).text(str);
        });
    });
</script> 
```

这有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T18:25:12.440

传递给`change()`函数的参数不是索引。它是一个[`event`对象](http://api.jquery.com/category/events/event-object/)。您需要自己获取索引，使用[`index()`](http://api.jquery.com/index/).

还有，[`text()`](http://api.jquery.com/text/)这里是不是方法不对，需要用到[`val()`](http://api.jquery.com/val/)获取输入的值。

```
$('#div2 :input').change(function() {
    var str = $(this).val(), // You need to use `val` to get the value (also, note the "()" here)
        index = $(this).parent().index(); // this gets the index of the input
    $('#div1 li').eq(index).text(str);
});​ 
```

演示：http: [//jsfiddle.net/skram/UJBCr/1/](http://jsfiddle.net/skram/UJBCr/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:17:00.213

使用[`val()`](http://api.jquery.com/val/)（因为你是在文本输入之后）不是`text()`：

```
 var str = $(this).val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:16:39.830

改变`var str = $(this).text`

作为

`var str = this.value; //or $(this).val()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T18:28:02.633

用这个：

```
 $('#div2 :input').change(function(e){
      var i = $('#div2 :input').index(this);
      $('#div1 li').eq(i).text( $(this).val() );
 }); 
```

[**演示**](http://jsfiddle.net/EAXfF/)

# javascript - jQuery：从下到上滑动切换

> ID：10556549
> 
> 赞同：6
> 
> 时间：2012-05-11T18:16:05.303
> 
> 标签：javascript, jquery, toggle, slide

我正在使用jQuery的slidetoggle，我想知道是否有一种方法可以让它从底部向上滑动，无论我在哪里似乎都找不到答案，这是我正在使用的代码：

```
jQuery(document).ready(function(){ 
    jQuery(".product-pic").hover(function(){
        jQuery(this).find('.grid-add-cart').slideToggle('2000', "easeOutBack", function() {
            // Animation complete.
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T18:25:46.363

你想实现这样的[**目标**](http://jsfiddle.net/Bongs/JVNMx/1/)吗？

HTML

```
<div id="box">
    <div id="panel">
    </div>
</div>​ 
```

CSS

```
#box
{
    height: 100px;
    width:200px;
    position:relative;
    border: 1px solid #000;
}
#panel
{
    position:absolute;
    bottom:0px;
    width:200px;
    height:20px;
    border: 1px solid red;
    display:none;
} 
```

JS

```
$("#box").hover(function(){
    $("#panel").slideToggle();
}, function(){
    $("#panel").slideToggle();
});​ 
```

或根据[Roko建议的更新](https://stackoverflow.com/users/383904/roko-c-buljan)

```
var panelH = $('#panel').innerHeight();

$("#box").hover(function(){
    $("#panel").stop(1).show().height(0).animate({height: panelH},500);
}, function(){
    $("#panel").stop(1).animate({height: 0},500, function(){
      $(this).hide();  
    });
});​ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T18:29:12.117

您可以通过在要切换的元素上使用包装器来做到这一点。将包装器的位置设置为相对，将元素的位置设置为绝对，并将底部属性设置为零。

就像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/tcMFF/)**一样。

jQuery：

```
$("button").click(function() {
    $("p").slideToggle("slow");
});​ 
```

CSS：

```
p { 
    position:absolute;
    bottom:0;
    display:none;
    padding:0;
    margin:0;
}

div {
    position:relative;
    width:300px;
    height:100px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T18:30:26.680

**[现场演示](http://jsbin.com/agumug/195/edit)**

```
jQuery(function($){

  $(".product-pic").hover(function( e ){
    var px  = e.type=="mouseenter"? 0 : 220 ;
    $(this).find('.grid-add-cart').stop().animate({top:px});
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:19:41.097

最简单的方法是为此使用 jQuery UI，单独的 jQuery 没有单独的功能。见[这里](http://docs.jquery.com/UI/Effects/Slide)和[这里](http://jqueryui.com/demos/toggle/)。

另一种方法是使用[animate](http://api.jquery.com/animate/)函数制作 CSS 动画。

# vb.net - 文件上传的上传进度条

> ID：10556551
> 
> 赞同：2
> 
> 时间：2012-05-11T18:16:07.647
> 
> 标签：vb.net

我有这段代码，如何将进度条合并到其中？

```
 Private Sub btn_upload_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_upload.Click

    Dim filePath As String = lbl_file.Text
    Dim slashPosition As Integer = filePath.LastIndexOf("\")
    Dim filenameOnly As String = filePath.Substring(slashPosition + 1)

    Dim request As System.Net.FtpWebRequest = DirectCast(System.Net.WebRequest.Create("ftp://.com/public_html/windows/" & filenameOnly), System.Net.FtpWebRequest)
    request.Credentials = New System.Net.NetworkCredential("", "")
    request.Method = System.Net.WebRequestMethods.Ftp.UploadFile
    Dim path As String = lbl_file.Text

    Dim file() As Byte = System.IO.File.ReadAllBytes(path)

    Dim strz As System.IO.Stream = request.GetRequestStream()

    strz.Write(file, 0, file.Length)

    strz.Close()
    strz.Dispose()

    MsgBox(path)

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:22:48.680

您可以读取和写入设定大小的块中的字节，然后根据总字节数计算百分比，而不是一次读取所有字节然后一次全部上传。作为一个简单的示例，您可以通过以下方式更新每发送一千字节的上传进度。

```
For offset as Integer = 0 to File.Length Step 1024
    ProgressBar1.Value = CType(offset * ProgressBar1.Maximum / File.Length, Integer)
    Dim chunkSize as Integer = File.Length - offset - 1
    If chunkSize > 1024 Then chunkSize = 1024
    strz.Write(file, offset, chunkSize)
Next
ProgressBar1.Value = ProgressBar1.Maximum 
```

# php - PHP/JAVASCRIPT 比较数组中的值

> ID：10556552
> 
> 赞同：0
> 
> 时间：2012-05-11T18:16:17.440
> 
> 标签：php, javascript, arrays, compare

我有一些 javascript 允许用户从一个存储桶中选择项目并移动到第二个存储桶。第一个桶是可能的选择减去那些选择。第二个桶是选择，每个项目在表中都有一行。但是，当用户第二次这样做时，我想保存如下：如果选择是新的，则添加一条新记录。如果已删除选择，请删除旧记录。如果选择不变，则保持不变。

具体例子。
在第一个存储桶中的 1,4,5 开始第二个存储桶中的 2,3
（这意味着有人之前选择了 2 和 3。表中存在 2 和 3 的行。在第一个存储桶 3,4 中选择 1,2,5 后第二个桶。（用户在第二个桶中保留了 3 个，但删除了 2 个并添加了 4 个。我想保留第 3 行，删除第 2 行并添加新的第 4 行。

有人建议我使用 JS 来确定要保留、添加或删除哪些行，但这已经证明超出了我有限的 JS 能力。

概念上会想象它会像（伪代码）......

```
var 2array = 3,4;
var 1array = 2,3;
var addarray = "";
var delarray = "";
foreach val as 2array{
if val in 1array { 
//ignore 
}
else
{
addarray = addarray+val
}
}
for each val as 1array {
if val in 2array {
ignore
}
else {
del array =delarray+val
}
} 
```

或类似的东西。

感谢您的任何建议！

# c# - 一次将datagridview的所有数据插入数据库

> ID：10556556
> 
> 赞同：9
> 
> 时间：2012-05-11T18:16:34.903
> 
> 标签：c#, sql-server, winforms

我有一个由各种操作和用户对数据的操作创建的 datagridview。我想一次将gridview的所有数据插入数据库，我知道我可以尝试类似这样的代码：

```
for(int i=0; i< dataGridView1.Rows.Count;i++)
    {
        string StrQuery= @"INSERT INTO tableName VALUES (" + dataGridView1.Rows[i].Cells["ColumnName"].Value +", " + dataGridView1.Rows[i].Cells["ColumnName"].Value +");";

      try
      {
        using (SqlConnection conn = new SqlConnection(ConnString))
        {
            using (SqlCommand comm = new SqlCommand(StrQuery, conn))
            {
                conn.Open();
                comm.ExecuteNonQuery();
            }
        }
      } 
```

但是每次插入记录时创建一个新连接是否公平？数据网格可能包含许多行......有没有办法一次将所有数据取出到服务器并在sql中循环以插入所有数据？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T18:26:18.140

如果你移动你的 for 循环，你就不必建立多个连接。只需快速编辑您的代码块（绝不完全正确）：

```
string StrQuery;
try
{
    using (SqlConnection conn = new SqlConnection(ConnString))
    {
        using (SqlCommand comm = new SqlCommand())
        {
            comm.Connection = conn;
            conn.Open();
            for(int i=0; i< dataGridView1.Rows.Count;i++)
            {
                StrQuery= @"INSERT INTO tableName VALUES (" 
                    + dataGridView1.Rows[i].Cells["ColumnName"].Text+", " 
                    + dataGridView1.Rows[i].Cells["ColumnName"].Text+");";
                comm.CommandText = StrQuery;
                comm.ExecuteNonQuery();
            }
        }
    }
} 
```

关于一次执行多个 SQL 命令，请看这个链接： [Multiple statements in single SqlCommand](https://stackoverflow.com/questions/3149469/multiple-statements-in-single-sqlcommand)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-01T17:09:11.750

我认为最好的方法是使用[TableAdapters](https://msdn.microsoft.com/en-us/library/ms233812.aspx)而不是使用 Commands 对象，它的 Update 方法将 Dataset 或 DataTable 中的所有更改（更新、插入和删除）直接发送到数据库。通常在使用 DataGridView 时，您绑定到 BindingSource，它允许您与 DataSource（如 Datatables 或 Datasets）进行交互。

如果你像这样工作，那么在你的有界 DataGridView 上你可以这样做：

```
this.customersBindingSource.EndEdit();
this.myTableAdapter.Update(this.myDataSet.Customers); 
```

“customersBindingSource”是 DataGridView 的数据源。

> 适配器的 Update 方法将更新单个数据表，并根据表中每个数据行的 RowState 执行正确的命令（INSERT、UPDATE 或 DELETE）。

来自：[https ://msdn.microsoft.com/en-us/library/ms171933.aspx](https://msdn.microsoft.com/en-us/library/ms171933.aspx)

因此，在使用 Update 方法时，在 DatagridView 中所做的任何更改都将反映在数据库中。

有关 TableAdapters 的更多信息：[https ://msdn.microsoft.com/en-us/library/bz9tthwx.aspx](https://msdn.microsoft.com/en-us/library/bz9tthwx.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T06:01:34.663

请看下面是否可以帮助你

类 Post_Sales

```
Public Shared Sub Post_sales()

    Dim ITM_ID As Integer

    Dim SLS_QTY As Integer

    Dim SLS_PRC As Double

    Dim SLS_AMT As Double

    Dim DSPL_RCT As String

    Dim TAX_CODE As Integer

    'Format the current  date and send it to a textbox
    Form1.TextBox6.Text = System.DateTime.Now.ToString((" yyyy-MM-dd"))

    'Open Connection

    Dim con As New SqlConnection("Initial Catalog=Your Database here;Data source=.;Network Library=DBMSSOCN;User ID=sa;Password=")

    con.Open()

    'Insert Records into the database

    For Each rw As DataGridViewRow In Form1.DataGridView1.Rows

        ITM_ID = rw.Cells("Column1").Value
        DSPL_RCT = rw.Cells("Column2").Value
        SLS_QTY = rw.Cells("Column3").Value
        SLS_PRC = rw.Cells("Column4").Value
        SLS_AMT = rw.Cells("Column5").Value
        TAX_CODE = rw.Cells("Column6").Value

        Dim cmd As New SqlCommand("INSERT INTO DAY_PLUSALES (DT,ITM_ID,DSPL_RCT,SLS_QTY,SLS_PRC,SLS_AMT,TAX_CODE) values ('" & Form1.TextBox6.Text & "','" & ITM_ID & "','" & DSPL_RCT & "','" & SLS_QTY & "','" & SLS_PRC & "','" & SLS_AMT & "','" & TAX_CODE & "')", con)

        cmd.ExecuteNonQuery()

    Next

    con.Close()

    MessageBox.Show("Records Added to the SQL Database successfully!", "Records Updated ")

End Sub 
```

结束类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:20:49.737

您可以对只打开一次的连接执行相同的操作。像这样的东西。

```
for(int i=0; i< dataGridView1.Rows.Count;i++)
  {
    string StrQuery= @"INSERT INTO tableName VALUES (" + dataGridView1.Rows[i].Cells["ColumnName"].Value +", " + dataGridView1.Rows[i].Cells["ColumnName"].Value +");";

  try
  {
      SqlConnection conn = new SqlConnection();
      conn.Open();

          using (SqlCommand comm = new SqlCommand(StrQuery, conn))
          {
              comm.ExecuteNonQuery();
          }
      conn.Close();

  } 
```

此外，根据您的具体情况，您可能需要考虑将网格绑定到数据库。这将大大减少手动工作量： [http ://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-database](http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-database)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:37:19.810

您有语法错误请尝试以下语法：

```
string StrQuery="INSERT INTO tableName VALUES ('" + dataGridView1.Rows[i].Cells[0].Value + "',' " + dataGridView1.Rows[i].Cells[1].Value + "', '" + dataGridView1.Rows[i].Cells[2].Value + "', '" + dataGridView1.Rows[i].Cells[3].Value + "',' " + dataGridView1.Rows[i].Cells[4].Value + "')"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-21T11:16:38.957

试试这个 100% 工作代码

```
string SQL = "", tableName = "tableName";
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    SQL = @"INSERT INTO " + tableName + " VALUES (";
    for (int col = 0; col < dataGridView1.ColumnCount; col++)
    {
        string data = "";
        if (dataGridView1.Rows[i].Cells[col].Value != null)
        {
            data = dataGridView1.Rows[i].Cells[col].Value.ToString();
        }
        SQL += "'" + data.Trim() + "'";
        if (col < dataGridView1.ColumnCount - 1)
        {
            SQL += ",";
        }
    }
    SQL += ")";
    string finalSQL = SQL;
    //INSERT to DB the finalSQL
} 
```

您的数据现在已准备好使用您的连接将 finalSQL 插入数据库中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-03T08:19:43.150

```
try
{
    string barcode = "", name = "";
    int qty = 0, unitprice = 0;
    for (int i = 0; i < dataGridView1.Rows.Count; i++)
    {
       barcode= dataGridView1.Rows[i].Cells["barcode"].Value.ToString();
        name = dataGridView1.Rows[i].Cells["name"].Value.ToString();
        qty = Int32.TryParse(dataGridView1.Rows[i].Cells["stkqty"].Value.ToString(),out qty)?qty:0;
        unitprice = Int32.TryParse(dataGridView1.Rows[i].Cells["unitprice"].Value.ToString(),out unitprice)?unitprice:0;
        SqlConnection conn = new SqlConnection(urls);
        conn.Open();
        String insertquery = "INSERT INTO Stock_Sale_Record(invoiceno,barcode,saleqty,proname,saleprice,duedate) VALUES (@invoiceno,@barcode,@saleqty,@proname,@saleprice,@duedate)";
        SqlCommand insertcommand = new SqlCommand(insertquery, conn);
        insertcommand.Parameters.AddWithValue("@invoiceno", invoicenolabel.Text.ToString());
        insertcommand.Parameters.AddWithValue("@barcode", barcode);
        insertcommand.Parameters.AddWithValue("@saleqty", qty);
        insertcommand.Parameters.AddWithValue("@proname", name);
        insertcommand.Parameters.AddWithValue("@saleprice", unitprice);
        insertcommand.Parameters.AddWithValue("@duedate", duedatetxt.Value.Date);
        insertcommand.ExecuteNonQuery();
        conn.Close();
    }
}
catch (Exception ex)
{
    MessageBox.Show(""+ex.Message);
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-12-27T11:40:43.127

```
for (int i = 0; i < dataGridView2.Rows.Count; i++)
{
SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=ID_Proof;Integrated Security=True");
                        SqlCommand cmd = new SqlCommand("INSERT INTO Restaurant (Customer_Name,Quantity,Price,Category,Subcategory,Item,Room_No,Tax,Service_Charge,Service_Tax,Order_Time) values (@customer,@quantity,@price,@category,@subcategory,@item,@roomno,@tax,@servicecharge,@sertax,@ordertime)", con);
                        cmd.Parameters.AddWithValue("@customer",dataGridView2.Rows[i].Cells[0].Value);
                        cmd.Parameters.AddWithValue("@quantity",dataGridView2.Rows[i].Cells[1].Value);
                        cmd.Parameters.AddWithValue("@price",dataGridView2.Rows[i].Cells[2].Value);
                        cmd.Parameters.AddWithValue("@category",dataGridView2.Rows[i].Cells[3].Value);
                        cmd.Parameters.AddWithValue("@subcategory",dataGridView2.Rows[i].Cells[4].Value);
                        cmd.Parameters.AddWithValue("@item",dataGridView2.Rows[i].Cells[5].Value);
                        cmd.Parameters.AddWithValue("@roomno",dataGridView2.Rows[i].Cells[6].Value);
                        cmd.Parameters.AddWithValue("@tax",dataGridView2.Rows[i].Cells[7].Value);
                        cmd.Parameters.AddWithValue("@servicecharge",dataGridView2.Rows[i].Cells[8].Value);
                        cmd.Parameters.AddWithValue("@sertax",dataGridView2.Rows[i].Cells[9].Value);
                        cmd.Parameters.AddWithValue("@ordertime",dataGridView2.Rows[i].Cells[10].Value);
                        con.Open();
                        cmd.ExecuteNonQuery();
                        con.Close();
                        MessageBox.Show("Added successfully!"); 
```

# java - 将java maven项目组件提取为单独的项目

> ID：10556561
> 
> 赞同：1
> 
> 时间：2012-05-11T18:16:40.643
> 
> 标签：java, maven, project-management, maven-3

我是 Maven 新手，并决定从我最近开始开发的项目开始。该项目是一个 Java 库，它解析用自然语言编写的单位转换查询，并执行从自然语言查询中解释出来的单位转换。

对于这个项目，我需要一个用于 Java 的变形库（复数/单数化单词），在考虑了一些选项后，我决定开发自己的。事实证明，有些人对**单独**使用这种变形功能产生了兴趣。

所以问题是，**将提供变形功能的类（在我的单位转换项目中的一个单独的包中）拆分成一个单独的新 Maven 项目的最佳方法是什么，在某种公共 Maven 存储库中发布这个变形库，并将其指定为我的单位转换库的依赖项**。这样，任何想要使用变形库的人都可以通过将其作为自己项目的依赖项来实现。

请注意，我的问题包括“在 Maven 存储库中发布一个库以便它可以成为其他项目的依赖项”的部分。我对 Maven 完全陌生，所以我真的没有掌握整个事情。我只是限制自己设置自己项目的依赖项，构建，运行等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:21:44.270

对于开源：

*   提供源代码，例如在 sourceforge.net
*   确保您的 POM 继承自（直接或间接）：

：

```
 <parent>
    <groupId>org.sonatype.oss</groupId>
    <artifactId>oss-parent</artifactId>
    <version>7</version>
  </parent> 
```

*   执行 Maven 发布以部署到 Maven 中心：按照以下步骤操作：[https ://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-9.StageaRelease](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-9.StageaRelease)

对于封闭源：

*   设置 Maven 存储库管理器，例如 Nexus
    *   确保公共组可供目标受众使用
*   配置Maven发布插件：[https ://maven.apache.org/plugins/maven-release-plugin/](https://maven.apache.org/plugins/maven-release-plugin/)

一般建议：

*   对于包名称以反向域名开头，例如。
    *   org.myproject.mycomponent（如果您有此项目的自定义域）
    *   com.mycompany.myproject.mycomponet（如果您的公司拥有域 mycompany.com）
    *   net.sourceforge.myproject.mycomponent（如果您将源代码托管在 myproject.sourceforge.net 并且没有自定义域）
*   组号：
    *   使用包名的开头，例如 com.mycompany.myproject
    *   通常对单个 VCS 存储库中的所有 Maven 项目使用相同的 groupId
*   artifactId：确保它足够独特，因为它将是 jar 文件名的开头，例如 mycompany-myproject-mycomponent
*   设置 CI 服务器，例如 Jenkins
    *   确保 CI 服务器由专门的系统用户运行
    *   将必要的凭据添加到 CI 用户的 settings.xml 文件中
    *   为“全新安装”配置作业
    *   配置发布库的作业（Jenkins 有一个特殊的插件来支持 Maven 发布）
*   考虑把你的 jar 变成一个 OSGi 包

# android - 在 Android 平板电脑上使用 StageVideo 闪烁？

> ID：10556562
> 
> 赞同：8
> 
> 时间：2012-05-11T18:16:59.520
> 
> 标签：android, actionscript-3, apache-flex, mobile, flash-builder

我有一个 stageVideo 类，我用它在平板电脑上播放视频，但每次我播放视频时，平板电脑屏幕都会闪烁几次（变黑然后出现大约四次左右）我想知道可能是什么原因这个。当我切换到播放视频的视图时，它会执行此操作。视频的 url 被传递给视频 mxml 视图。我正在使用 flex 4.6 和 Android 平板电脑（EEE 变压器素数）。

```
package ios 
{     
import flash.display.Sprite; 
import flash.display.StageAlign; 
import flash.display.StageQuality; 
import flash.display.StageScaleMode; 
import flash.events.Event; 
import flash.events.NetStatusEvent; 
import flash.events.StageVideoAvailabilityEvent; 
import flash.events.StageVideoEvent; 
import flash.geom.Rectangle; 
import flash.media.StageVideo; 
import flash.media.StageVideoAvailability; 
import flash.media.Video; 
import flash.net.NetConnection; 
import flash.net.NetStream; 

[Bindable] 
public class iOSStageVideo extends Sprite 
{ 
    private var videoPath:String; 
    private var videoWidth:Number; 
    private var videoHeight:Number; 
    private var _sv:StageVideo; 
    private var _vd:Video; 
    private var _obj:Object; 
    private var _ns:NetStream; 

    public function iOSStageVideo( path:String , w:Number , h:Number ):void
    { 
        videoPath = path; 
        videoWidth = w; 
        videoHeight = h; 
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage); 
    } 

    //stage is ready 
    private function onAddedToStage(e:Event):void
    { 
        stage.scaleMode = StageScaleMode.NO_SCALE; 
        stage.align = StageAlign.TOP_LEFT; 

        var nc:NetConnection = new NetConnection(); 
        nc.connect(null); 

        _ns =  new NetStream(nc); 
        _obj = new Object(); 

        _ns.client = _obj; _ns.bufferTime = 2; 
        _ns.client = _obj; 

        _obj.onMetaData = MetaData; 

        _sv = stage.stageVideos[0]; 
        _sv.viewPort = new Rectangle(0, 42, videoWidth , videoHeight ); 
        _sv.attachNetStream(_ns); 

        playVideo(); 
    } 

    //video is ready, play it 
    //public, can be called externally 
    public function playVideo():void{ 
        _ns.play( videoPath ); 
        _ns.addEventListener(NetStatusEvent.NET_STATUS, videoStatus); 
    } 

    //required metadata for stagevideo, even if not used 
    private function MetaData(info:Object):void{ } 

    //get video status 
    private function videoStatus(e:NetStatusEvent):void{ 

        switch(e.info.code){ 
            case "NetStream.Play.StreamNotFound": 
                //do something 
                break; 
            case "NetStream.Play.Start": 
                //do something 
                break 
            case "NetStream.Play.Stop": 
                //do something
                trace('the video has ended');
                stopVideo();
                break; 
            case "NetStream.Buffer.Empty": 
                //do something 
                break; 
            case "NetStream.Buffer.Full": 
                //do something 

                break; 
            case "NetStream.Buffer.Flush": 
                //do something 
                break; 
            case "NetStream.Play.Complete":
                //do something 
                break;
        } 
    } 

    //stop and clear the video 
    //public, can be called externally 
    public function stopVideo():void{  
        trace("StopVideo is ran.");
        _ns.close();
        _ns.dispose(); 
        dispatchEvent( new Event('videoDone', true ) ); 

    } 

    public function stopVideoBack():void {
        _ns.close();
        _ns.dispose(); 
    }
} 
```

}

这是我在视频完成时播放视频的视图的代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="" backgroundAlpha="0" creationComplete="init(event)" addedToStage="onAddedToStage(event)"  >

<fx:Script>
    <![CDATA[

        import ios.iOSStageVideo;
        import mx.core.UIComponent;
        import mx.events.FlexEvent;

        protected var path:String = new String(""); 
        protected var backPage:String = new String("");
        protected var vid:iOSStageVideo = new iOSStageVideo( path , 1280 , 720 );
        private var arr:Array;
        //protected var vid:iOSStageVideo; 
        protected var container:UIComponent = new UIComponent(); 

        protected function init(event:FlexEvent):void
        {
            // Sets up the back button to back to the right slide
            arr =  data as Array;
            trace(data);
            path = String(arr[0]);
            backPage = String(arr[1]) 

            //creates the video
            vid = new iOSStageVideo( path , 1280 , 720 );
            loadVideo();

            //takes out the trash when the back button is hit so the stage video is ready when the new view is loaded
            stage.addEventListener("keyDown", handleButtons, false,1);
            stage.addEventListener("keyUp", handleButtons, false, 1);
        }

        override public function createReturnObject():Object {
            var returnedObject:Object = new Object();
            returnedObject.myValue = arr[2];
            trace("arr[2] ->" + arr[2])
            return returnedObject;
        }

        protected function loadVideo():void
        {
            //loades the video
            vid.addEventListener('videoDone' , videoStop); 
            container.width = stage.stageWidth; 
            container.height = stage.stageHeight; 

            addElement( container ); 
            container.addChild( vid ); 

        }

        protected function playVideo(event:MouseEvent):void
        {
            vid.playVideo();
        }

        private function videoStop(e:Event):void {
                //removes container
                container.removeChild( vid ); 
                removeElement( container ); 
                navigator.popView();
        }

        private function removeEverything():void {
            vid.stopVideoBack();
            try
            {
                container.removeChild( vid ); 
                removeElement( container );
            } 
            catch(error:Error) 
            {
                trace("error with container");
            }
        }

        protected function onAddedToStage(event:Event):void
        {               
            if (stage.autoOrients) {
                stage.removeEventListener(StageOrientationEvent.ORIENTATION_CHANGING, orientationChanging);
                stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING, orientationChanging, false, 100, true);
            }
        }

        private function orientationChanging(event:StageOrientationEvent):void {
            event.stopImmediatePropagation();
            if (event.afterOrientation == StageOrientation.ROTATED_LEFT  || event.afterOrientation == StageOrientation.ROTATED_RIGHT) {
                event.preventDefault(); 
            }   
        }

        protected function handleButtons(event:KeyboardEvent):void
        {
            if (event.keyCode == Keyboard.HOME) {
                // Handle Home button.
            }
            else if (event.keyCode == Keyboard.BACK) {
                // Hanlde back button.
                removeEverything();
            }
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
</s:View> 
```

编译器参数

```
-locale en_US
-swf-version=13 
-target-player=11.0
-define CONFIG::LOGGING false 
-define CONFIG::FLASH_10_1 true 
```

*添加*了已更新的代码以具有 StageVideoEvent 侦听器并简化为一个视图（还知道将 renderMode 设置为 direct）

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="video" backgroundAlpha="0" creationComplete="init(event)" >
<fx:Script>
    <![CDATA[
        import mx.core.UIComponent;

        protected var videoPath:String = new String("video.mp4"); 
        private var videoWidth:Number = 1280;
        private var videoHeight:Number = 680; 

        private var stageVideoAvail:Boolean;
        private var sv:StageVideo;

        private function init(e:Event):void {
            trace("ran one");
            onAddedToStage(); 
        }

        private function onAddedToStage():void {
            trace('test');
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT; 

               stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoAvailability);

        }

        private function onStageVideoAvailability( e : StageVideoAvailabilityEvent ) : void
        {
            if (e.availability == StageVideoAvailability.AVAILABLE){
                stageVideoAvail = true;
                initVideo();
            } else {
                stageVideoAvail = false;
            }
        }

        private function initVideo():void
        {
            var obj:Object = new Object();
            var nc:NetConnection = new NetConnection();
            nc.connect(null);
            var ns:NetStream = new NetStream(nc);
            ns.client = obj;

            if(stageVideoAvail)
            {
                sv = stage.stageVideos[0];
                sv.addEventListener(StageVideoEvent.RENDER_STATE, onRender);
                sv.attachNetStream(ns);
                trace('available');
            }
            else
            {
                var vid:Video = new Video(videoWidth, 768);
                addChild(vid);
                vid.attachNetStream(ns);
                trace('not');
            }

            ns.play( videoPath );
        }

        private function onRender(e:StageVideoEvent):void
        {
            sv.viewPort = new Rectangle(0, 0, videoWidth, 768);
        }

        public function onMetaData(e:Object):void
        {

        }

        public function onXMPData(e:Object):void
        {

        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
</s:View> 
```

此应用程序中唯一的其他视图只有一个带有 navigator.pushView(Copyofvideo,null,null); 的按钮 并且当单击按钮时，屏幕会闪烁，然后播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:06:58.360

闪烁的一个可能原因是您在致电 之前没有听取[`StageVideo`](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/media/StageVideo.html)可用性`_ns.play()`。通过聆听[`StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY`](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/StageVideoAvailabilityEvent.html)，你可以管理得失`StageVideo`。

代替

```
private function onAddedToStage(e:Event):void
{ 
    ...
    _sv = stage.stageVideos[0]; 
    _sv.viewPort = new Rectangle(0, 42, videoWidth , videoHeight ); 
    _sv.attachNetStream(_ns); 

    playVideo(); 
} 
```

做这个

```
 private function onAddedToStage(e:Event):void
    {
        stage.addEventListener( StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoAvailability );
    }

    private function onStageVideoAvailability( event : StageVideoAvailabilityEvent ) : void
    {
        var available : Boolean = (event.availability == StageVideoAvailability.AVAILABLE);
        ...

        if ( available )
        {
            addStageVideo();
        }
        else
        {
            //implement an alternative e.g. addRegularVideo();
        }

        playVideo();
    } 
```

Adobe Developer Connection 在本教程中讨论了如何监听 StageVideo 的可用性：

[开始使用舞台视频](http://www.adobe.com/devnet/flashplayer/articles/stage_video.html)

本教程提供了更多代码示例：

[使用 Flex 4.5 和 FlashPlayer 10.2 在 FDT 中创建 StageVideo 测试](http://blog.patricktresp.de/2011/04/creating-a-stagevideo-test-in-fdt-with-flex-4-5-and-flashplayer-10-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T10:04:51.463

您是否尝试更改渲染模式？当舞台视频处于直接模式时，我遇到了问题。将其更改为 CPU 似乎可以解决我遇到的 StageVideo 问题。

# c# - 如何使用 .NET MVC3 生成解决一对多关系的视图模型？

> ID：10556567
> 
> 赞同：1
> 
> 时间：2012-05-11T18:17:15.620
> 
> 标签：c#, .net, asp.net-mvc, ado.net, linq-to-entities

## 技术细节

C#、ASP.NET 4、MVC 3、SQL 后端、ADO.NET (edmx)

## 背景/上下文

我已经使用 MVC 几年了，并且知道如何在 .NET 中有效地使用该模式；但是，我从未使用过.NET 的本机视图模型生成（即“创建新控制器”与脚手架和自动生成的CRUD 视图）。

一般来说，我喜欢自己创建 POCO，按照自己的模型模式打包它们，然后自己创建视图。然而，今天，我需要快速制作原型，我依靠 .NET 的自动化/模板来帮助我快速完成工作。

我已经生成了这个实体模型： ![在此处输入图像描述](../Images/de44b1a2a80a019e120cdd12692a4047.png)

由此，我能够自动生成简单的控制器和表单。

## 问题

请查看“flow_product”实体。您会注意到它与“optionGroup”实体具有一对多的关系。因此，我希望使用“编辑/创建”视图模型生成一个复选框列表来处理这种关联。相反，当我让 .NET 处理视图的生成时，我看到的只是`name`和的字段`description`。

我在这里错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:23:35.740

我不知道 MVC 对这样的列表有自动脚手架。然而，放入一个循环和一个复选框是一件非常简单的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:31:56.333

您可以创建新的 t4 模板来为您的强类型类创建编辑和详细信息页面等，并通过将它们放在您的个人资料下的 vs2010 文件夹中的文件夹中使它们在创建视图向导中可用，但没有像您描述的那样出现 OoTB。

如果您只是模拟一个原型，您可以查看动态数据网站项目。不知道它是否还在 2010 年。

# actionscript-3 - 动态属性不适用于自定义类

> ID：10556572
> 
> 赞同：1
> 
> 时间：2012-05-11T18:17:30.523
> 
> 标签：actionscript-3

这有效：

```
var o:Object = {};
o['one'] = 1; 
```

但是，如果我创建我的课程，并尝试同样的方法，它不会起作用。

```
class MyClass {}
var m:MyClass = new MyClass;
m['one'] = 1; // Error: Not possible to create property 'one' 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:24:37.243

尝试 ：

```
 dynamic class MyClass {} 
```

如果您查看 Object 类，它的定义如下：

```
public dynamic class Object extends * 
```

您可以在运行时向动态类添加属性。

# titanium - 如何在钛工作室定位钛移动sdk？

> ID：10556575
> 
> 赞同：1
> 
> 时间：2012-05-11T18:17:50.220
> 
> 标签：titanium, titanium-mobile

我已经在我的电脑中安装了钛工作室。我成功构建了 jdk 路径和 android sdk 路径。但是当我启动钛工作室并转到窗口--首选项--titaniumstudio--钛并找到 C:\Users\chaiti\AppData \Roaming\Titanium\mobile-sdk\win32\android 它显示Could not locate a Titanium Mobile SDK at the given path.because this when I create new project and run then it shows the following error:

```
[INFO] logfile = C:\Users\chaiti\My Documents\Titanium Studio Workspace\Hello\build.log
[INFO] Building Hello for Android ... one moment
[ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "C:\Users\chaiti\AppData\Roaming\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py", line 2119, in <module>
[ERROR]     s.build_and_run(False, avd_id, debugger_host=debugger_host)
[ERROR]   File "C:\Users\chaiti\AppData\Roaming\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py", line 1735, in build_and_run
[ERROR]     run.run([self.sdk.get_adb(), "start-server"], True, ignore_output=True)
[ERROR]   File "C:\Users\chaiti\AppData\Roaming\Titanium\mobilesdk\win32\2.0.1.GA2\android\run.py", line 30, in run
[ERROR]     print "[DEBUG] %s" % (subprocess.list2cmdline(args))
[ERROR]   File "C:\Users\chaiti\AppData\Local\Titanium Studio\plugins\com.appcelerator.titanium.python.win32_1.0.0.1331647813\python\lib\subprocess.py", line 503, in list2cmdline
[ERROR]     needquote = (" " in arg) or ("\t" in arg) or arg == ""
[ERROR] TypeError: argument of type 'NoneType' is not iterable 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:39:59.727

尝试为窗口设置路径--首选项--钛工作室--钛为

> C:\Users\chaiti\AppData\Roaming\Titanium

只要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:54:50.877

1.  Window->Preferences-Titanium Studio-Titanium，将Titanium SDK Home设置为
    `C:\Users\SIXBUBLE\AppData\Roaming\Titanium`

2.  关注[这个话题](http://developer.appcelerator.com/question/129786/could-not-locate-a-titanium-desktop-sdk-at-the-given-path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T10:31:42.763

我有同样的问题。但是，如果我只是定位到 C:\Users\SIXBUBLE\AppData\Roaming\Titanium，我会得到：Titanium SDK Home] The Desktop-SDK root path 'C:\Users\SIXBUBLE\AppData\Roaming\Titanium\sdk\ win32' 不是目录

# php - 正则表达式问题：匹配字符串中非链接的 utf-8 单词

> ID：10556584
> 
> 赞同：1
> 
> 时间：2012-05-11T18:18:31.673
> 
> 标签：php, regex

我有一个字符串（里面可以有 html 代码），我正在尝试查找一些单词并替换它们。我不太擅长正则表达式，并且在编写我需要的正则表达式时遇到了困难。最大的问题是字符串和标签都是 utf-8。

我已经设法找到一些对我有部分帮助的正则表达式模式：

1.  `/$search_tag/is`

此模式将匹配我要查找的所有单词，但如果在我的原始字符串中该单词是一个链接，那么我不希望它匹配，所以这无济于事。

1.  `\'(?!((<.*?)|(<a.*?)))(\b'.$search_tag.'\b)(?!(([^<>]*?)>)|([^>]*?</a>))\'is`

这第二种模式解决了我之前的问题，但只是部分解决了，如果我正在尝试的单词是标记为链接的单词的“组合”的一部分，那么这个特定的单词不匹配，但是如果只有单词被标记为链接然后我仍然得到一场比赛，我不想发生这种情况。

希望我能很好地描述这个问题以获得一些帮助。如果需要，我可以提供更多细节甚至一些例子。

# python - 如何更改元素的文本

> ID：10556587
> 
> 赞同：1
> 
> 时间：2012-05-11T18:18:48.360
> 
> 标签：python, python-2.5

如何在`field1.text`不编写完整文件的情况下仅更改元素的文本？（蟒蛇2.5）。

```
import xml.etree.cElementTree as ET 
import urllib2
import os

file("c:\Python25\wxTime.xml", 'w')
root = ET.Element("root")  
doc = ET.SubElement(root, "doc") 
field1 = ET.SubElement(doc, "wxpageTime") 
field1.set("name", "lastUpdate") 
field1.text = "Thu May 10 02:00:00 2012"
tree = ET.ElementTree(root)
tree.write("c:\Python25\wxTime.xml") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:28:49.073

你一般不能。您可以减少您所做的解析量，但是，正如@jdi 指出的那样，插入单个字节会修改该点之后的每个字节，因此需要特殊的特殊文件格式（例如数据库）。XML 不是这样设计的，因此写回整个文件是进行编辑的正常方式，就像您给出的示例一样。

# php - 提取文本中的url

> ID：10556588
> 
> 赞同：-1
> 
> 时间：2012-05-11T18:18:53.687
> 
> 标签：php

假设我们的文本中包含多个 url，所以我想提取该 url 并进行一些更改，然后显示文本。

这是我正在使用的代码

```
<?PHP
$text = "This is text with links http://google.com and www.yahoo.com";

$text = ereg_replace( "www\.", "http://www.", $text );
$text = ereg_replace( "http://http://www\.", "http://www.", $text );
$text = ereg_replace( "https://http://www\.", "https://www.", $text );

$reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

if(preg_match($reg_exUrl, $text, $url)) {

$text = preg_replace($reg_exUrl, '<a href="'.$url[0].'" rel="nofollow">'.$url[0].'</a>', $text);
echo $text;

}else{

echo "NO URLS";

}
?> 
```

**问题**

// 输出源（重复第一个链接）

```
This is text with links <a href="http://google.com" rel="nofollow">http://google.com</a> and <a href="http://google.com" rel="nofollow">http://google.com</a> 
```

它取决于数组，所以它只需要第一个 URL `$url[0]`，所以我如何申请在文本中找到的所有链接〜谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:22:06.980

您可以使用[`preg_match_all(...)`](http://nl.php.net/manual/en/function.preg-match-all.php)，它返回一个匹配数组。然后循环遍历结果 ( `$matches`) 并替换找到的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:38:37.187

更改下一行

```
$reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/"; 
```

至

```
$reg_exUrl = "/((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?)/"; 
```

和

```
$text = preg_replace($reg_exUrl, '<a href="'.$url[0].'" rel="nofollow">'.$url[0].'</a>', $text); 
```

至

```
$text = preg_replace($reg_exUrl, '<a href="\1" rel="nofollow">\1</a>', $text); 
```

# matlab - 'which' 命令在 MATLAB 中不起作用

> ID：10556590
> 
> 赞同：2
> 
> 时间：2012-05-11T18:18:58.740
> 
> 标签：matlab

我正在安装一个 MATLAB 工具箱，它通过调用来查找文件

```
which 
```

当我输入

```
which filename 
```

在 bash 中，我得到

```
/usr/local/bin/filename. 
```

但

```
which('filename') 
```

在 MATLAB 命令窗口中说

```
'filename' not found. 
```

我可以看到二进制文件在

```
/usr/local/bin. 
```

还，

```
/usr/local/bin 
```

被添加到 MATLAB 搜索路径中，所以我不确定这里发生了什么。有什么建议么？？

谢谢！！阿耶莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:43:39.653

您可以在此处使用 exists 而不是 which。如果文件在那里，exist 将返回代码 2。

但是，这确实有效。例如，我的搜索路径中有一个 .pdf 文件：

```
>> which('Fritsch FN - Monontone piecewise cubic interpolation')
'Fritsch FN - Monontone piecewise cubic interpolation' not found. 
```

查看无法找到它的内容，但是当我提供全名（包括扩展名）时，它可以正常工作。

```
>> which('Fritsch FN - Monontone piecewise cubic interpolation.pdf')
/Users/woodchips/Desktop/Fritsch FN - Monontone piecewise cubic interpolation.pdf 
```

当然，也有作品。

```
>> exist('Fritsch FN - Monontone piecewise cubic interpolation.pdf','file')
ans =
     2 
```

我的猜测是，您的问题出现是因为您未能包含扩展名。根据文档，这显然会自动查找 .m、.p 和 .mdl 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:30:13.523

bash`which`仅在 Linux 路径中定位可执行文件。MATLAB`which`命令仅定位 MATLAB 文件（`*.m`和`*.p`MDL 文件，根据命令的MATLAB[文档](http://www.mathworks.com/help/techdoc/ref/which.html)`which`）。MATLAB`which`不会定位其他二进制文件。在大多数情况下，如果文件以or命名并且其目录位于 Linux 路径和 MATLAB 路径中，则可以同时使用 bash`which`和 MATLAB来定位文件。`which``*.m``*.p`

我假设你有`filename`，`/usr/local/bin/`但没有`filename.m`。问题也可能是您的路径`filename.m`不在您的 MATLAB 路径中。使用`path`命令检查和修改您的 MATLAB 路径，或使用菜单：文件 -> 设置路径。

因此，如果`which`在某些 MATLAB 工具箱的安装脚本或安装函数（MATLAB 程序）中使用了命令，则它正在寻找 MATLAB 程序文件，`filename.m`或者`filename.p`，而不是常规的 Linux 二进制文件`filename`。

# ipad - 放大时的 iPad 图像质量

> ID：10556591
> 
> 赞同：0
> 
> 时间：2012-05-11T18:19:10.243
> 
> 标签：ipad, zooming, image-quality

早上好，

我有一系列平面图需要加载到 iPad 上。平面图是相当大的高质量图像。为了控制应用程序的外观和感觉，我需要将图像的宽度限制为 1020 像素。但是，我仍然需要能够放大并获得非常清晰的图像。在桌面浏览器上放大时，图像看起来很棒。但是，在 iPad 上放大时看起来很糟糕。

这是我用来加载图像的标签：

img src="/files/floorplans/{!$floorplan.ID}/{!$FloorplanID}/{!$floorplan.FileName}" width="1020"

你有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:28:50.837

嗯，1020 像素对于缩放来说是相对较低的（它与电子管电视的分辨率相同 :)，当您说“控制应用程序的外观和感觉”时，您是指加载图像或其他内容时的性能吗？精心制作的？

您还在 iPad 2 或 3 上查看图像吗？您可能知道 iPad 3 的 Retina 显示屏具有更好的分辨率。

我只能添加以确保您的 UIImageView 的大小与图像的大小相同

```
// Something like
UIImage* image = // your image from url
UIImageView* imageView = [UIImageView initWithImage:etc..];

imageView.image.size = image.size; 
```

另外，如果我没记错的话，如果您的图像视图嵌入在滚动视图中（很可能），那么它的框架也必须调整大小。

# python - 根据另一个类的字段动态获取字段类型（使用 Scapy 工具 - Python）

> ID：10556593
> 
> 赞同：2
> 
> 时间：2012-05-11T18:19:25.540
> 
> 标签：python, class, network-protocols, layer, scapy

我想知道如何根据另一个类的字段动态定义一个类的字段类型？？？我的意思是如何定义一个字段并将其从一个类链接到另一个类，例如：

```
class TemplateRecord(Packet):
    name = "Template Record"
    fields_desc = [ ShortField("Type", 0),
                    ShortField("Length", 0) ]

    def extract_padding(self, s):
            return "", s

class DataRecord(Packet):
    name = "Data Record"
    fields_desc = [ ==> Here i would like something like this :

            "if Type == 0 from Class TemplateRecord:
                IPField("ipsrc", "0.0.0.0"),
            if Type == 1 from Class TemplateRecord
                IPField("ipdst", "0.0.0.0"),
            if Type == 2 from Class TemplateRecord
                                    ByteField("DstMask", 0),

            ....etc..." 

        ]
    def extract_padding(self, s):
            return "", s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:07:58.317

我相信 Scapy 最接近您想要的功能是条件字段。格式为：

```
ConditionalField(XShortField("chksum",None),lambda pkt:pkt.chksumpresent==1) 
```

尝试将它与 Packet.underlayer 结合使用。

假设图层设置为 TemplateRecord()/DataRecord()

```
ConditionalField(IPField("ipsrc", "0.0.0.0"), lambda pkt:pkt.underlayer.Type==0),
ConditionalField(IPField("ipdst", "0.0.0.0"), lambda pkt:pkt.underlayer.Type==1),
ConditionalField(ByteField("DstMask", 0), lambda pkt:pkt.underlayer.Type==2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T14:58:07.673

您还可以使用 bind_layers 函数添加条件层。脚步：

1.  定义主pkt模板类（TemplateRecord）
2.  定义子 pkt 类（DataRecord1 for Type=1）
3.  使用 bind_layers 有条件地绑定 2 个数据包层。

您的案例的语法是：

```
bind_layers(TemplateRecord, DataRecordForType1, {'Type':1}) 
```

# ruby-on-rails-3 - 具有“belongs_to”定义的模型的关系 id 列和表上的类似列名之间的冲突

> ID：10556596
> 
> 赞同：0
> 
> 时间：2012-05-11T18:19:33.183
> 
> 标签：ruby-on-rails-3, associations

我正在使用 Rails 3 并尝试在`Reseller`名为`Company`.

我还有一个名为`reseller`.

因此，该表`companies`具有列`reseller:boolean`和`reseller_id:integer`。

当我`form_fields`在我的视图中看到这两列时出现错误：

`undefined method 'to_i' for "#<Reseller:0x007fc081e3cfa8>":Reseller`

错误发生在我希望处理 reseller:boolean 字段的地方：`<%= c.check_box :reseller %>`而不是 Reseller 关联。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:44:10.963

你放的那一刻

```
belongs_to :reseller 
```

在您的公司模型中，您遇到了冲突，因为这将为您的协会创建经销商方法。

解决方案是重命名您的布尔值或关联。您也可以在不更改数据库的情况下执行后者：

```
belongs_to :company_reseller, :foreign_key => :reseller_id 
```

# c# - 从 ASP.NET ListView 继承，“这里不允许，因为它没有扩展类 'System.Web.UI.UserControl'”

> ID：10556597
> 
> 赞同：0
> 
> 时间：2012-05-11T18:19:38.023
> 
> 标签：c#, asp.net, listview, user-controls

我正在尝试创建一个继承自`System.Web.UI.WebControls.ListView`. 代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Text.RegularExpressions;
using System.Text;

namespace MyCompany.MyProject
{        //I've tried this without the "<T>" as well.  Either seems to compile
         //but neither works at runtime.
    public partial class MyListView<T> : ListView
    {
    ...
    }
} 
```

标记：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyListView.ascx.cs" Inherits="MyCompany.MyProject.MyListView" %> 
```

一切都可以编译，但是当我尝试加载页面时，出现以下错误：

“'MyCompany.MyProject.MyListView' 在这里不允许，因为它不扩展类 'System.Web.UI.UserControl'。在 System.Web.UI.TemplateParser.ProcessError(String message) 在 System.Web.UI.TemplateParser System.Web.UI.TemplateParser.PostProcessMainDirectiveAttributes(IDictionary parseData) 处的 .ProcessInheritsAttribute(String baseTypeName, String codeFileBaseTypeName, String src, Assembly 程序集)"

我已经搜索了很长时间，试图确定出了什么问题或某种优雅的解决方法，但到目前为止我的搜索没有产生任何有用的结果。

提前感谢您抽出宝贵时间帮助我。

-一种

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:28:16.667

您的问题是您的标记定义了 a`Control`并且 a`ListView`是 a `WebControl`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:33:58.477

正如错误所说，您必须从“System.Web.UI.UserControl”继承才能创建自定义用户控件。要扩展服务器控件，您必须创建自定义 Web 服务器控件而不是自定义用户控件。以下链接说明了如何执行此操作： [演练：创建 Web 自定义控件](http://msdn.microsoft.com/en-us/library/aa728786%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T09:20:23.320

摆脱标记。将您继承的控件添加为一个简单的类。如果正确引用程序集，则可以在其他 aspx 页面中使用自定义列表视图而不会出现问题。以下是我对类似遗留代码所做的事情：

*   将一个普通的 MyListView.cs 类添加到您的项目中。
*   将“代码隐藏”文件中的所有代码复制到这个新文件中。
*   删除原来的**ascx**、**ascx.cs**和**ascx.designer.cs**文件。

在您的 aspx 页面中，像这样引用程序集：

```
<%@ Register Assembly="MyCompany.MyProject" Namespace="MyCompany.MyProject" TagPrefix="cc1" %> 
```

并在标记中使用您的控件，如下所示：

```
<cc1:MyListView ID="MyListView1" runat="server" /> 
```

# mysql - 此 SQL 语句有什么问题 - 语法错误 #1064？

> ID：10556606
> 
> 赞同：0
> 
> 时间：2012-05-11T18:20:34.057
> 
> 标签：mysql, sql, syntax, syntax-error

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data
ORDER BY id ASC 
WHERE unixtime <= CURDATE() LIMIT 10; 
```

或者

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data
ORDER BY id ASC 
WHERE unixtime < CURDATE() LIMIT 10; 
```

所有 phpAdmin 告诉我的是：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“WHERE unixtime <= CURDATE() LIMIT 10”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:22:47.073

您将`ORDER BY`and`WHERE`子句颠倒了。

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data
WHERE unixtime < CURDATE()
ORDER BY id ASC LIMIT 10; 
```

或者

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data
WHERE unixtime <= CURDATE() 
ORDER BY id ASC LIMIT 10; 
```

我刚刚意识到您的问题的一部分，因为您在`WHERE`子句中引用了别名。：

```
WHERE UNIX_TIMESTAMP(timestamp) <= CURDATE() 
```

或者

```
WHERE UNIX_TIMESTAMP(timestamp) < CURDATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:42:06.690

尝试这个

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data
WHERE (UNIX_TIMESTAMP(timestamp)) < CURDATE() ORDER BY id ASC  LIMIT 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:22:38.020

尝试以下操作：

```
SELECT id, content, UNIX_TIMESTAMP(timestamp) AS unixtime 
FROM data 
WHERE UNIX_TIMESTAMP(timestamp) <= CURDATE() 
ORDER BY id ASC LIMIT 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:22:41.387

您需要在 order by 语句之前使用 where 语句。

# ios - 是否可以决定 UITouch 绑定到哪个视图？

> ID：10556609
> 
> 赞同：0
> 
> 时间：2012-05-11T18:20:42.450
> 
> 标签：ios, uitouch, uiresponder, uievent

我有几个 UIView，它们的形状有些复杂，我通过每个 UIView 的 drawRect: 方法绘制了这些形状。我保存了对路径的引用（通过 CGPath 属性），并在我的触摸方法中使用它来检测触摸是否实际上在路径或形状（CGPathContainsPoint）内。由于形状的原因，视图的某些区域是透明的（显然，任何不是正方形/矩形的区域都将具有透明区域，假设视图的 backgroundColor 属性设置为 clearColor 或类似的）。

对于视图最终位于顶部或相互重叠的情况（经常发生），我正在测试触摸方法（touchesBegan 等）以查看触摸是否实际上在 CGPath 或形状内。如果触摸不在形状内，我会将触摸转发到下面的下一个视图，以查看它是否反过来通过了该要求。

可悲的是（令我沮丧的是），这与实际绑定到视图的触摸行为不同。我已经以各种方式解决了这个问题，除了一个特别的问题。每个视图都使用 UIRotationGestureRecognizer。但是，如果触摸源自另一个视图的透明区域，并且该视图将该触摸转发到其下方的视图，则永远不会触发 UIGestureRecognizer。

我已经从我知道的各个角度看待这个问题。我试图想办法将触摸重新分配或绑定到适当的视图，但我不知道这是否可能。只要视图只是将触摸转发到另一个视图，触摸将保持绑定到首先收到触摸的原始视图。

我想知道您是否可以通过子类化 UIApplication 或 UIWindow 并覆盖 sendEvent:" 方法来执行此操作。我不确定 Apple 在这方面可能会给您什么控制权。我无法做任何可能访问私有的事情API's. 我真的只需要一些方法来重新分配触摸，以便视图认为触摸属于它。

有任何想法吗？'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:06:57.607

You could do this by either subclassing UIView or subclassing UIGestureRecognizer.

# Subclassing UIView

By subclassing UIView (or any of its subclasses) and overriding

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event 
```

you can decide what points are considered to be inside your view. For points outside the path you simply return `NO`

# Subclassing UIGestureRecognizer

By subclassing UIGestureRecognizer (or any of its subclasses) and overriding

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

you can decide what touches the gesture recognizer should recognize. For all touches outside the path you should call (but not subclass)

```
- (void)ignoreTouch:(UITouch *)touch forEvent:(UIEvent *)event 
```

on yourself.

* * *

# Point inside of path?

In either case you need to know if the points is inside of the path that you say you've stored.

If the paths are already stored as `UIBezierPath`s you can simply call

```
- (BOOL)containsPoint:(CGPoint)point 
```

On the bezier path. The point or the touch may need to be converted to the same view coordinates as the path by calling

```
- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view 
```

or

```
- (CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view 
```

On your view.

If the path is stored as a CGPath you can create a UIBezierPath from it using

```
[UIBezierPath bezierPathWithCGPath:CGPath]; 
```

# java - 在循环中将数据添加到数组

> ID：10556614
> 
> 赞同：0
> 
> 时间：2012-05-11T18:20:49.033
> 
> 标签：java, twitter, twitter4j

我有一个“do - while”循环，其中包含 5000 个数字，在每次运行循环期间应该将其添加到数组中，如下所示：

问题是每次执行循环时，数字都会被覆盖，一旦循环结束，数组中只有最后一次运行的数据。

我使用这段代码：

```
 long cursor = -1;
    long[] fArray = new long[100000];  // more than enough space in array
    IDs ids = twitter.getFollowersIDs(name, cursor); // start with first page of 5000 numbers

    do 
    {                       
        ids = twitter.getFollowersIDs(name, cursor);            
        fArray = twitter.getFollowersIDs(name, cursor).getIDs(); // this gets Array with 5000 numbers every time until "empty"
        cursor = ids.getNextCursor();   // jump to next array with 5000 new numbers     
    } while (ids.hasNext()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:24:10.047

您总是只写入非常大的数组的前 5000 个元素。

相反，您希望将 getFollowersIDs() 调用的结果分配给单独的*本地*数组，然后使用[arraycopy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)将 5000 个当前关注者复制到更大的所有关注者数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:25:08.843

在线`fArray = twitter.getFollowersIDs(name, cursor).getIDs(); // this gets Array with 5000 numbers every time until "empty"` 您正在对您的数组进行简单的分配`fArray`。

你应该使用这样的东西

```
long tempArr[] = twitter.getFollowersIDs(name, cursor).getIDs();

for (int i = previous_length_of_array; i < previous_length_of_array + tempArray.length; i++)
   fArray[i] = tempArr[1 - previous_length_of_array]; 
```

PS：上面的代码没有经过测试也没有编译，只是试图给你举例说明你应该做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:04:38.480

一种想法是将 fArray 声明为二维的。示例简要代码：long fArray[][];

整数索引 = 0；

[在循环中开始] 一些代码......

fArray[index] = twitter.getFollowersIDs(name, cursor).getIDs(); 索引++；

一些代码... [在循环内结束]

我希望这很清楚和简单。

# c++ - 如何从 ActiveX C++ 类方法返回 struct 或 ptr 到 struct

> ID：10556615
> 
> 赞同：0
> 
> 时间：2012-05-11T18:20:49.007
> 
> 标签：c++, com, struct, activex, marshalling

我有一个最初用 MSVC++ 6.0 编写的非托管 C++ DLL。它有几个类和一些独立的 C 函数，我需要从 C# .NET 4.0 调用它们。我在这方面有过几次错误的开始。我知道有几种方法可以做到这一点（转换为 COM、MC++ 包装器、PInvoke），但尚不清楚哪种方法最直接。我目前的方法是将 C++ DLL 转换为 ActiveX 控件。我遇到的问题是，当尝试在 VS 2010 C++ ActiveX 项目中重新创建方法时，类向导不允许任何返回类型，除了基本类型、CString 或指向 CWnd 的指针。如何返回结构的副本或指向结构的指针？它没有

![允许的 ActiveX 返回类型](../Images/673dc5408ab5992c4297bcdce48ff9f0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:29:29.343

您不应该将非托管数据返回到托管代码（或任何代码）。如果您的 ActiveX 类正在分配此内存，则您的 ActiveX 类负责取消分配。

解决这个问题的一个常用方法是有一个方法返回一个 HRESULT 并接收具有数据大小的原始数据，或者如果你想要更托管的东西，它可以接收一个安全的字节数组（这可以映射到字节[] 在托管代码中）。

在您的方法实现中，您可以用结构的数据覆盖数组。

回到托管代码中，您需要将结构编组为字节数组，以便将其传递给您的新方法。[Marshal.StructureToPtr](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.structuretoptr.aspx#Y0)方法可能有助于此任务。

为了给你的类添加一个接收指针作为参数的方法，你可以使用你的activex控件默认界面的“添加方法”上下文菜单选项。见下图：

![在此处输入图像描述](../Images/5cdce5a30f1bd7811ffe6f87b1191899.png)

# c# - ASP 更新面板不工作

> ID：10556620
> 
> 赞同：0
> 
> 时间：2012-05-11T18:21:21.420
> 
> 标签：c#, asp.net, updatepanel

我有以下 ASP 面板

```
<asp:UpdatePanel ID = "UpdatePanel1" runat = "server">
      <ContentTemplate>
            <asp:TextBox ID="txtNumber" runat="server" ToolTip="The Assignment's Number" ValidationGroup="updateAssignment" AutoPostBack="True" ontextchanged="txtNumber_TextChanged"></asp:TextBox>

      </ContentTemplate>
</asp:UpdatePanel> 
```

脚本管理器也存在，但页面仍在回发。事情在其他页面中不会发生。我尝试将触发器添加到更新面板，控件是文本框，但它仍然执行回发。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:39:49.793

首先，服务器端代码不是客户端代码。textchanged 事件与 js onchange 事件有很大不同。当您失去焦点时，此代码会触发。您需要在文本框上将 autopostback 设置为 true，但将其作为触发器包含在内：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:TextBox ID="TextBox1" AutoPostBack="true" runat="server" ontextchanged="TextBox1_TextChanged"></asp:TextBox>
        </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="TextBox1" />
        </Triggers>
        </asp:UpdatePanel> 
```

正如您注意到的那样，仅将文本框设置为`Autopostback=true`不起作用，在`UpdatePanel`它之外会导致回发。但是，如果将它包装在更新面板上并指定 AsyncPostBackTrigger 并将 分配给`ControlID`有问题的文本框，它将为您工作。我刚刚在 chrome 和 IE 中对此进行了测试，并且可以正常工作。

# haskell - 准报价中的“准”是什么意思？

> ID：10556631
> 
> 赞同：42
> 
> 时间：2012-05-11T18:22:16.850
> 
> 标签：haskell, programming-languages, metaprogramming, quoting, nemerle

一些语言，如 Haskell（或 Nemerle）有[quasiquotations](http://www.haskell.org/haskellwiki/Quasiquotation)。我想知道“准”是什么意思，是否也存在没有“准”部分的“引用”。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-11T18:38:14.410

我相信这个概念来自 Lisp 语言。

用 Lisp 编写的程序由一系列列表列表等组成，如下所示：

```
 (defn f [x y] (+ x y)) 
```

由于这种统一性，可以将此类代码表示和操作为数据，因此上述字符序列被解释为文字列表。这是 Lisp 非常有用的特性，也是它们的显着特征之一。为方便起见，Lisp 语言允许“引用”有意义的序列，将它们从定义和表达式转换为列表。它看起来像这样：

```
 '(defn f [x y] (+ x y)) 
```

在这种情况下，它是一个文字列表，可直接用于使用 Haskell 和其他方法的类似物进行`head`解构`tail`。因此，“引用”的意思是“从列表中生成文字值”。

但是，直接使用`head`- 和 -`tail`类函数操作列表并不方便。当您开始编写复杂的宏甚至是宏生成宏时，这一点就会变得值得注意。所以这里出现了“准引用”，字面意思是“几乎是一个引用”。通常 quasiquotation 看起来像普通引用（但带有另一个引用符号）：

```
`(defn f [x y] (+ x y)) 
```

但它是更强大的东西。在 quasiquoted list 中，您可以用外部范围的实际值替换任意元素，基本上获得类似模式的东西。例子：

```
 (let [z 10] `(defn f [x y] (+ x y ~z))) 
```

在这里，我们将值绑定`10`到`z`变量，然后我们将其替换为 quasiquote。这个表达式产生

```
 '(defn f [x y] (+ x y 10)) 
```

这是一个简单的例子；Lisp 语言允许使用准引号做许多其他有用的事情。

这个概念已经转移到支持使用语法树进行操作的其他语言。例如，这里的 Haskell 工具是 Template Haskell，它完全支持准引用，即创建模板并用外部范围的值填充它们。在具有复杂语法的语言（如 Haskell）中，准引用和纯引用几乎成为操作语法树的唯一合理方法。

UPD：嗯，似乎在 Haskell 中它比简单的替换更复杂。Haskell 中的 Quasiquote 看起来像可以由用户定义的任意转换器和表达式评估器。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-11T18:56:47.737

这些概念存在于 Lisp 语言及其变体中。

在这些语言中，每当解释器看到一个列表`(a b c ... z)`时，它就会通过应用到其他元素来*评估*它。`a``b ... z`

如果您不希望对列表进行评估（因此将其解释为列表），则必须*引用*它。例如，`'(a b c)`评估为具有三个元素的列表，而不是`a`应用于`b`and `c`。您可以将报价视为*停止评估*。

现在 quasiquotation 的行为类似于引用，除了您可以在列表的某些部分内恢复评估。您用后撇号 ` 进行 quasiquote，并且您允许使用逗号运算符不引用某些子表达式*（*至少在 Scheme 中，我不知道其他 Lisp 变体）。例如

```
`(a ,(b c)) 
```

评估为具有两个元素的列表：`a`和 的评估结果`(b c)`。

这对于构建模板特别有用，您可以通过取消引用来填补漏洞。示例（取自[那里](ftp://ftp.cs.utexas.edu/pub/garbage/cs345/schintro-v14/schintro_129.html)）：

```
(define (create-shipping-employee-association name)
  `((name ,name)
    (employee-id-no ,(get-next-employee-id!))
    (department shipping)
    (hire-date ,(get-day) ,(get-month) ,(get-year)))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T16:58:20.587

在 Nemerle 中，准引用是（[http://nemerle.org/metaprogramming.pdf](http://nemerle.org/metaprogramming.pdf)）：

"

元语言是一种用于对此类操作进行编程的语言。它通常有自己的语法来描述对象语言的各种结构。

例如，在我们的系统中：

```
<[ 1 + f (2 * x) ]> 
```

表示表达式的语法树：

```
1 + f (2 * x) 
```

这个想法被称为准报价。

**准**前缀来自将元语言表达式的值插入引用的上下文的可能性。

if`g(y)`是这样一个表达式，我们可以这样写：

```
<[ 1 + $(g(y)) ]> 
```

它描述了一个语法树，它的第二部分被评估的结果替换`g(y)`

"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T18:26:02.163

引号只是一个字符串文字。 *准*引号是“引用”的，因为它们在某种意义上表示输入，而不是编译代码；它们只是以一种更容易从编译过程内部操作的形式来表示它（抽象语法树，您可以通过各种方式移植它，这些方式比在文本上操作更安全）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-13T12:09:39.927

Quasi 基本意思就是可以在引号里面放一个美元符号，然后再切换到不带引号的代码：

```
<[ WriteLine( $(ReadLine()) ) ]> 
```

这将在运行时输出在编译时输入的字符串（实际上我认为这在 Visual Studio 中不起作用，因为 ReadLine 需要控制台输入；但您可以从文件、网络等读取）。

# .net - 如何使透明控件在 MDI 表单下方显示表单的背景图像

> ID：10556647
> 
> 赞同：0
> 
> 时间：2012-05-11T18:23:40.933
> 
> 标签：.net, winforms, controls, transparency

我有一个带背景的 MDI 表单，以及徽标左上角的图片框。徽标的透明区域在常规表单上正确显示到表单的背景图像，但在 MDI 表单上，它在下方显示为灰色。

如何使图片框的透明区域显示背景而不是下面的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:37:12.313

不是我想如何解决问题，而是我在表单中停靠了一个面板并将其用作背景而不是表单的背景。我讨厌对这样的东西使用额外的容器控件，所以如果有人有更好的答案，请分享。

# java - Android：下载对象

> ID：10556655
> 
> 赞同：6
> 
> 时间：2012-05-11T18:24:22.073
> 
> 标签：java, android

所以我试图从存储在网络服务器上的文件中下载和加载一个对象。我使用的代码在 AsyncTask 的 try-catch 块中：

```
URL url = new URL("http://www.mydomain.com/thefileIwant");
URLConnection urlConn = url.openConnection();
ObjectInputStream ois = new ObjectInputStream(urlConn.getInputStream());
foo = (Foo) ois.readObject();
ois.close(); 
```

我使用以下代码构建文件：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("thefileIwant"));
oos.writeObject(foo);
oos.close(); 
```

当我尝试读取第一段代码中的对象时，我得到一个 IOExecption，表明 UTF 数据格式与 UTF-8 不匹配。我试过几次重新构建文件，它总是给我同样的错误。我可以下载这样的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:19:30.850

这看起来像一个编码问题。我认为 kichik 是正确的，并且很可能您的服务器使用错误的内容类型发送数据，但我认为您需要将其设置为`application/x-java-serialized-object`。尝试在打开 URLConnection 后立即添加以下行：

```
urlConn.setUseCaches(false);
urlConn.setRequestProperty("Content-Type", "application/x-java-serialized-object"); 
```

如果这不起作用（您的服务器可能无法使用该类型发送它），您可以尝试使用 Socket 而不是 UrlConnection，或者使用 XML 或 JSON 序列化您的对象并通过 HttpUrlConnection 获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:58:39.480

试试这个。它与您的代码相似，但有一些不同之处。顺序读/写可能有点过时，但对我来说效果很好。

```
 URL url = new URL("your URL");
  HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
  urlConn.setRequestMethod("GET");
  urlConn.setRequestProperty("Content-Type", "text/plain; charset=utf-8");
  urlConn.connect();
  InputStream is = urlConn.getInputStream();
  byte[] buffer = new byte[1024];
  int numRead = 0;
  FileOutputStream fos = new FileOutputStream("Your File");
  while ((numRead = is.read(buffer)) > 0) {
    fos.write(buffer, 0, numRead);
  }
  fos.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:49:01.283

这对我们有用，使用一些 Apache 库

```
 FileOutputStream fos = new FileOutputStream("Your File");
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        HttpClient client =  new DefaultHttpClient(ccm, params);

        HttpGet httpGet = new HttpGet(downloadURL);
        try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        Log.d(LOG_TAG, "code is " + statusCode);
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ( (len1 = content.read(buffer)) > 0 ) {
                fos.write(buffer,0, len1);
         }                              

         success = true;
        } else {
            Log.e(LOG_TAG_JSON, "Failed to download file " + downloadURL);
        }
        if (null != response.getEntity())
        {
            response.getEntity().consumeContent();
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.e(LOG_TAG, "downloadVersion " + e.toString());
        e.printStackTrace();
    } 
```

# visual-studio-2010 - 卸载/重新安装 VS2010 后无法打开 MVC 4 项目

> ID：10556656
> 
> 赞同：1
> 
> 时间：2012-05-11T18:24:30.797
> 
> 标签：visual-studio-2010, asp.net-mvc-4

卸载 VS 2010 并重新安装，然后重新安装 MVC4 后，我无法打开基于 MVC 4 的项目。我收到典型的“此安装不支持项目类型”错误。

编辑：我当前的`ProjectTypeGuids`值如下：

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:49:19.447

如果您确定安装正确，请在项目文件中将 ProjectTypeGuids 替换或删除到下面的这个。

```
 {349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc} 
```

参考： [“此安装不支持项目类型”错误](https://stackoverflow.com/questions/336235/the-project-type-is-not-supported-by-this-installation-error)

[VS2010 上的 MVC 项目错误：此安装不支持项目类型](https://stackoverflow.com/questions/8563325/mvc-project-on-vs2010-error-the-project-type-is-not-supported-by-this-installa)

请查看帮助菜单 >> 关于 Microsoft Visual Studio >> 已安装的产品？请检查“Microsoft Visual Web Developer 2010”是否已正确安装。

希望这些帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:21:15.693

我遇到了同样的问题，发现 ProjectTypeGuid 有另一个条目 {E53F8FEA-EAE0-44A6-8774-FFD645390401};。我刚刚删除它开始从 TFS 加载它。它开始工作......谢谢大家的线索。

# labview - LabVIEW中Zaber设备的意外响应

> ID：10556658
> 
> 赞同：0
> 
> 时间：2012-05-11T18:24:37.547
> 
> 标签：labview, zaber

当使用[Zaber 的 LabVIEW 驱动程序](http://www.zaber.com/wiki/Software/Labview_Driver)来控制他们的设备时，它有时会返回对命令的奇怪响应。例如，发送“绝对移动”命令可能会返回“设置目标速度”响应或“手动移动跟踪”响应，而不是预期的“绝对移动”响应。是什么原因造成的，如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:25:01.040

**原因**

此问题的最常见原因是您使用了写入命令 VI 发送命令，但从未读取响应。该响应位于串行端口的接收缓冲区中，直到您读取它。如果您稍后使用请求命令 VI，它将写入新命令，然后从仍在缓冲区中的旧命令读取响应。

如果您使用响应数据值来执行计算，这可能会混淆您的代码，但当您请求移动命令时，情况可能会更糟。请求命令 VI 知道移动何时完成的方式是设备发回响应。如果缓冲区中已经有响应，则看起来移动立即完成。您的 VI 看起来好像正在跳过移动命令。

这是一个*不正确的示例*，显示了问题是如何发生的。在发送移动到存储位置命令之前，移动相对命令不会完成。以下所有三个示例都可以从[我们的网站](http://zaber.com/software/LabVIEWResponses.zip)下载。

![响应处理不正确的接线图](../Images/d05d4850e96805ee80c235f3d4712f86.png)

导致此类问题的另一种方法是使用设备号零向多个设备发送命令，并且只读取第一个响应。（每个设备都会发送自己的响应。）如果在 VI 运行时使用手动控制旋钮或操纵杆，也会导致问题。当您的 VI 没有发送任何内容时，该动作将产生一堆响应。

**解决方案 1：请求命令 VI**

最简单的解决方案就是确保您阅读了对每个命令的每个响应。如果对每个命令都使用请求命令 VI，它将正确处理大多数情况。

这是上一个示例的更正版本，现在使用请求命令 VI。

![正确处理响应的接线图](../Images/a6d96b059a18afa675892b351c8775a1.png)

如果您使用设备编号为零向所有设备发送命令，那么您必须调整响应计数，以便它知道要等待多少响应。

在更复杂的情况下，例如同时移动两个设备，您可以结合使用 Write Command VI 和 Blocking Read Response VI 来确保您收到所有响应。有关更多详细信息，请参阅[同时请求示例](http://www.zaber.com/wiki/Software/Labview_Driver#Expert_-_Simultaneous_Requests)。

如果您在 VI 运行时使用手动控制旋钮或操纵杆，此解决方案将无济于事。

**解决方案 2：清除缓冲区**

也许您有一个复杂的 VI，它已经有大量写入，您不想将它们全部清理干净，或者您可能想在 VI 运行时使用手动控制旋钮或操纵杆。也许由于某些其他原因，响应模式无法完全预测。如果您无法避免在缓冲区中获得额外的响应，则可以在疯狂结束后将其清除。只需使用 Read Response VI（不是阻塞的 VI），只要找到响应就继续阅读。

这是现在清除缓冲区的相同示例。它会暂停十秒钟，因此您可以使用手动控制旋钮生成一些额外的响应。

![从缓冲区清除的响应接线图](../Images/6888d34a8888911a739d1a6774e45c45.png)

One trick with this solution is knowing when the craziness has ended. Ideally, the devices should not be moving, and you should wait at least 20 milliseconds before you start clearing out the buffer. That gives time for the devices to process the last command and send a response. If the devices are still moving, then you'll get an extra response when they finally finish.

**Solution 3: State Machine**

If your VI is really complicated or unpredictable, the [state machine pattern](http://www.ni.com/white-paper/3024/en) can be a robust approach. Instead of closely tying each request with its response, the VI keeps track of a global state, and deals with each response separately. See Zaber's [Write Commands and Read Responses VI](http://www.zaber.com/wiki/Software/Labview_Driver#Expert_-_Write_Commands_and_Read_Responses) for another example.

如果您有并行循环发送命令，这种方法也很有用。您不能同时从串行端口读取两个循环。

# fortran - Fortran 二维数组初始化

> ID：10556659
> 
> 赞同：4
> 
> 时间：2012-05-11T18:24:40.250
> 
> 标签：fortran, gfortran, intel-fortran

以下程序使用 ifort（版本 12）编译，但不能使用 GFortran（最高版本 4.8）编译：

```
PROGRAM TEST
IMPLICIT NONE
REAL,DIMENSION(2,2)::X=(/1,2,3,4/)

WRITE(*,*) X

END PROGRAM TEST 
```

GFortran 给出错误

```
REAL,DIMENSION(2,2)::X=(/1,2,3,4/)  
                       1  
Error: Incompatible ranks 2 and 1 in assignment at (1) 
```

Ifort 编译程序并给出预期的输出。这是 GFortran 中的错误还是英特尔 fortran 仅允许非标准数组初始化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T18:44:51.587

将数组声明行重写为：

```
REAL,DIMENSION(2,2) :: X = RESHAPE([1,2,3,4],[2,2]) 
```

ifort 以另一种方式编译它的原因是非标准实现。这是一种可以初始化等级高于 1 的数组的方法。

# numbers - 如何使用 DC 或其他方法将大数转换为 base 36

> ID：10556662
> 
> 赞同：0
> 
> 时间：2012-05-11T18:09:47.093
> 
> 标签：numbers, 64-bit, dc

我试图以不同的基数表示最大的 64 位无符号值。

对于基数 2（二进制），它将是 64 个 1：

```
 1111111111111111111111111111111111111111111111111111111111111111 
```

对于基数 16（十六进制），它将是 16 F

```
 FFFFFFFFFFFFFFFF 
```

对于基数 10（十进制），它将是：

```
 18446744073709551615 
```

我试图以 36 为基数来表示这个值（它使用 0-9 和 AZ）。有许多在线基础转换器，但它们都无法产生正确的表示，因为它们受到 64 位数学的限制。

有谁知道如何使用 DC（这是一个非常难以使用的字符串数学处理器，可以处理无限数量的数字）并且知道如何进行这种转换？或者任何人都可以告诉我如何使用不会因整数翻转而失败的计算器执行此转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:31:42.787

我用 ruby​​ 做了一个快速测试：

```
i = 'FFFFFFFFFFFFFFFF'.to_i(16)
puts i               #18446744073709551615
puts i.to_s(36)      #3w5e11264sgsf 
```

您也可以使用更大的数字：

```
i = 'FFFFFFFFFFFFFFFF'.to_i(16) ** 16
puts i                  
puts i.to_s(36) 
```

结果：

```
179769313486231590617005494896502488139538923424507473845653439431848569886227202866765261632299351819569917639009010788373365912036255753178371299382143631760131695224907130882552454362167933328609537509415576609030163673758148226168953269623548572115351901405836315903312675793605327103910016259918212890625
1a1e4vngailcqaj6ud31s2kk9s94o3tyofvllrg4rx6mxa0pt2sc06ngjzleciz7lzgdt55aedc9x92w0w2gclhijdmj7le6osfi1w9gvybbfq04b6fm705brjo535po1axacun6f7013c4944wa7j0yyg93uzeknjphiegfat0ojki1g5pt5se1ylx93knpzbedn29 
```

* * *

一个简短的解释大数字会发生什么：

正常数字是[`Fixnums`](http://www.ruby-doc.org/core-1.9.3/Fixnum.html)。如果您获得更大的数字，则该数字变为[`Bignum`](http://www.ruby-doc.org/core-1.9.3/Bignum.html)：

```
small = 'FFFFFFF'.to_i(16)
big = 'FFFFFFFFFFFFFFFF'.to_i(16) ** 16

puts "%i is a %s" % [ small, small.class ]
puts "%i\n is a %s" % [ big, big.class ]
puts "%i^2 is a %s" % [ small, (small ** 2).class ] 
```

结果：

```
268435455 is a Fixnum
179769313486231590617005494896502488139538923424507473845653439431848569886227202866765261632299351819569917639009010788373365912036255753178371299382143631760131695224907130882552454362167933328609537509415576609030163673758148226168953269623548572115351901405836315903312675793605327103910016259918212890625
 is a Bignum
268435455^2 is a Bignum 
```

从[Bignum 的文档中](http://www.ruby-doc.org/core-1.9.3/Bignum.html)：

> Bignum 对象包含 Fixnum 范围之外的整数。当整数计算会溢出 Fixnum 时，会自动创建 Bignum 对象。当涉及 B​​ignum 对象的计算返回适合 Fixnum 的结果时，该结果将自动转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-15T14:33:40.083

可以用 dc 完成，但输出不是非常有用。

```
$ dc
36
o
16
i
FFFFFFFFFFFFFFFF
p
 03 32 05 14 01 01 02 06 04 28 16 28 15 
```

这是解释：

单独输入一个数字会推动该数字

`o`弹出堆栈并设置输出基数。

`i`弹出堆栈并设置输入基数。

`p`以当前输出基数打印堆栈顶部的数字。但是，dc 将基数大于 16 的任何输出打印为二进制（不是 ASCII）。

在 dc 中，命令可能都放在同一行，如下所示：

```
$ dc
36o16iFFFFFFFFFFFFFFFFp
 03 32 05 14 01 01 02 06 04 28 16 28 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:01:19.610

1.  获取任何可以处理任意大整数的语言。Ruby、Python、Haskell，应有尽有。
2.  实现基本步骤：模 36 为您提供下一个数字，除以 36 为您提供去掉最后一位数字的数字。
3.  以您喜欢的方式将数字映射到字符。例如， `'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'[digit]`对我来说很好。在生成结果时将数字附加到结果中。
4.  ？？？
5.  返回连接的数字字符串。利润！

# php - 在 Magento 中查看具有产品属性的图像

> ID：10556663
> 
> 赞同：1
> 
> 时间：2012-05-11T18:24:49.210
> 
> 标签：php, magento, magento-1.5, magento-1.6

我正在用 magento 开发一家商店......我需要为 Lodge 创建一些“邮票”：

*   新产品
*   只有今天
*   免运费

最简单的方法是使用属性对吗？如何属性使用是/否，设置为是​​时显示图像，设置为否时不显示图像。

有谁知道做到这一点的最佳方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:33:42.897

您也可以使用类别来做到这一点——只有今天才有新产品，免费送货类别，并根据需要将产品移入和移出类别。然后可以将“印章”作为产品网格和/或详细信息页面中的附加 div 浮动在产品图像上。

如果需要，还可以更轻松地将这些产品作为一个组进行展示。例如：

```
$categoryIds = $_product->getCategoryIds();
if ( in_array('123',$categoryIds))
    echo '<div class="badge-a">&nbsp;</div>';               
elseif ( in_array('456',$categoryIds)) 
    echo '<div class="badge-b">&nbsp;</div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:19:15.290

我在 Roscius 的帮助下解决了我的“问题”......

我创建了三个类别，我希望它显示邮票。

免费送货 (ID 14) 新品 (ID 16) 仅限今天 (ID 17)

在类别中添加产品。

在 app/design/frontend/your-theme/your-theme/template/catalog/product 中的 list.phml 文件中

有一个代码 - （在我的情况下在第 90 行）

```
 <li class="item<?php if(($i-4)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>"> 
```

添加上述代码后

```
 <?php $categoryIds = $_product->getCategoryIds();
if ( in_array('14',$categoryIds))
echo '<div class="selo-list"><img src="/media/loja/selo-frete.png" alt="Frete Grátis"></div>';  
elseif ( in_array('16',$categoryIds)) 
echo '<div class="selo-list"><img src="/media/loja/selo-so-hoje.png" alt="Só Hoje"></div>';             
elseif ( in_array('17',$categoryIds)) 
echo '<div class="selo-list"><img src="/media/loja/selo-novo.png" alt="Novo"></div>';
?> 
```

我的 CSS 看起来像这样

```
 .selo-list {
position:absolute;
margin-left:15px;
top:170px; 
```

}

谢谢 Roscius 和社区。

# php - 存储站点全局变量

> ID：10556664
> 
> 赞同：2
> 
> 时间：2012-05-11T18:24:52.527
> 
> 标签：php, mysql, yii, global-variables

快速提问 - 我正在尝试确定存储一些站点变量的最佳方式。我想在我的网站中构建一个“控制面板”类型的功能，我可以在其中选择设置，它们将反映在我的网站中。

例如 - 我有一件我正在销售的商品，它有一个价格（以及一张显示价格的图片）。我希望能够从自定义后端页面设置这个全局变量，而不必去更改 img src 等。

这样做的最佳方法是什么？起初我认为是一个数据库表，但肯定会是一种仅访问少数站点变量的缓慢（ish）方式？我也考虑过一个文件，但想知道当值发生变化等时我将如何覆盖正确的位。

使用您的专业知识，请您推荐一条走下去的途径（如果有有利的方法），非常感谢！（如果其他人也使用它，我正在使用 Yii 框架）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:28:25.983

您可能需要考虑使用属性 (.ini) 文件。

该函数`parse_ini_file(string $filename)`返回一个由 .ini 文件存储的属性数组。

但是，php 没有编写包含的 ini 文件的功能，因此您需要一个自定义的。 [这](http://pinoytech.org/blog/post/Write-INI-files-with-PHP)是一个，`write_ini_file(array $assoc_arr, string $path)`它将数组键和值添加到给定路径的 ini 文件中，必要时用新键值替换旧键值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:32:56.627

在数据库中存储站点变量并不是一个坏主意。如果您担心性能，您可以使用[memcached](http://memcached.org/)缓存这些值以避免额外的数据库命中，然后您只需要根据您的使用场景正确地使缓存的值无效。

有关详细信息，请参阅以下文章：[PHP 性能系列：缓存技术](http://blog.digitalstruct.com/2008/02/27/php-performance-series-caching-techniques/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T19:54:12.950

您的要求与我的要求非常相似。受设置扩展 ( [http://www.yiiframework.com/extension/settings/](http://www.yiiframework.com/extension/settings/) ) 的启发，我创建了自己的设置 API，该 API 在整个应用程序中都可用。请参阅此[https://github.com/xtranophilist/awecms/blob/f9bfc5a09bf050373b710ca15f6685ad8fea9fcd/protected/components/Settings.php](https://github.com/xtranophilist/awecms/blob/f9bfc5a09bf050373b710ca15f6685ad8fea9fcd/protected/components/Settings.php) get、set 和 delete 方法非常灵活，也可以进行批量操作。

它还具有自动类型检测功能，并且可以从后端（即管理模块）管理设置值。

# visual-studio-2010 - Visual Studio 2010 - 无法加载文件或程序集“Microsoft.VisualStudio.VirtualTreeGrid”

> ID：10556667
> 
> 赞同：0
> 
> 时间：2012-05-11T18:25:01.363
> 
> 标签：visual-studio-2010

我今天允许 Windows 自动更新运行，但突然 Visual Studio 坏了：我无法再运行单元测试，当我尝试将文件检入 TFS 时，我看到了以下令人愉快的错误消息：

![在此处输入图像描述](../Images/d87df38caca85e1a048d0d89af0e8348.png)

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:13:26.033

看起来更新过程中出了点问题，您可以尝试：

1.  重新应用给定的更新（如果您确定了它）。
2.  修复 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:05:03.797

当一切都说完了，我不得不擦拭我的电脑并重新安装 Visual Studio。

# google-apps-script - 脚本编辑器/文件

> ID：10556668
> 
> 赞同：1
> 
> 时间：2012-05-11T18:25:07.220
> 
> 标签：google-apps-script, google-apps-script-editor

我刚刚在电子表格脚本编辑器中将我的 1800 行项目分成 12 个“文件”。我注意到 Find 功能只在活动文件中查找。

无论如何要进行全局查找吗？

也与项目中的文件有关，当引发错误时，将引用行号而不是文件名。

有没有办法确定哪个文件包含导致错误的行？

谢谢丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T21:43:48.257

要确定导致错误的文件，您必须尝试捕获错误并解析堆栈跟踪。这是我所做的：

```
function yourCallingfunction() {
  try {
    //do your thing
  } catch(err) {
    stack = parseErr_(err)
    Logger.log(stack);
    throw stack;
  }
}

//Try to parse errors stacktrace into a nicer format
function parseErr_(e) {
  var ret;
  if( e !== undefined && e !== null && e.stack ) {
    ret = e.name +': '+e.message+' \nStacktrace: \n';
    var stack = e.stack.replace(/\n/g,'').match(/:\d+( \([^\)]+\))?/g);
    for( var i in stack )
      ret += stack[i].replace(/[\(\):]/g,'').split(/ /).reverse().join(':') + ' \n';
  } else
    ret = e;
  return ret;
} 
```

关于全局查找，如果您的问题只是查找而不是替换，也有解决方法。看看这个：

```
function showMe() {
  for( var i in this )
    Logger.log(this[i].toString());
} 
```

但这些都不是实际的解决方案。您应该为@ScampMichael 链接的问题加注星标

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:49:51.447

没有办法进行全局查找。Find 只会在当前文件中查找。我同意应该有一个贯穿整个项目的查找和替换，我于 2011 年 9 月在问题跟踪器中提交并发布：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=822](http://code.google.com/p/google-apps-script-issues/issues/detail?id=822)

请去那里给它加星标以投票并收到有关此问题的任何进展的通知。

问题跟踪器中也提出了没有报告错误消息的文件名问题：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=747](http://code.google.com/p/google-apps-script-issues/issues/detail?id=747)

# javascript - 使用 jQuery 检查一组电子邮件地址

> ID：10556672
> 
> 赞同：2
> 
> 时间：2012-05-11T18:25:15.070
> 
> 标签：javascript, jquery, arrays, indexof

我正在使用 jQuery，并想检查一个电子邮件地址是否托管在免费电子邮件服务域（即 Yahoo、gmail、hotmail 等）中。

下面的代码可以做到这一点，但不幸的是，我不知道将域名放入数组中的语法，现在我可以检查（无需额外的 if 语句）电子邮件是否（在这种情况下）仅由 Yahoo 托管。

有什么类似的`if ($(this).val().indexOf("yahoo.com && gmail.com && hotmail.com && ... ") != -1)`吗？

这是脚本：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#bemail').click(
        function(e){
            e.preventDefault;
            if ($(this).val().indexOf("Business email is required") != -1) {
            $('#bemail').val("");
            }
    });

    $('#bemail').blur(function() {
        if ($(this).val().indexOf("yahoo.com") != -1)
        {
            $(this).val("Business email is required");
        }

    });

});
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:26:56.463

您可以创建一系列电子邮件服务，然后检查您的值以查看它是否等于您列出的任何电子邮件。为此，您可以使用 for 循环将数组中的每个值与输入值进行比较。你会做这样的事情：

```
var freeServices = ["yahoo.com", "gmail.com"];

$('#bemail').blur(function() {
    for(var i = 0; len = freeServices.length; i<len; i++) {
        if ($(this).val().indexOf(freeServices[i]) != -1) {
            $(this).val("Business email is required");
        }
    }
}); 
```

根据需要将电子邮件服务添加到数组中，同时保留语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:49:13.397

艾略特，谢谢你的解决方案。复制粘贴的代码不起作用（我不知道为什么，也许是因为 len 没有声明，虽然我试过了）所以我为像我这样不太了解 Javascript 的人修复了一点......这是适用于我的页面的代码：

```
$('#bemail').blur(function() {
var freeServices = ["yahoo.com","gmail.com","hotmail.com"];

    for(var i = 0; i < freeServices.length; i++)
    {
        if ($(this).val().indexOf(freeServices[i]) != -1)
        {
            $(this).val("Business email is required");
        }
    }
}); 
```

# html - www.flipboard.com 上的响应式 + 滚动效果

> ID：10556674
> 
> 赞同：0
> 
> 时间：2012-05-11T18:25:28.003
> 
> 标签：html, css, responsive-design

有谁知道flipboard页面的效果是如何产生的？我的意思是响应式视频和仅在您向下滚动时才会出现的菜单。您可以根据需要调整浏览器的大小。只有顶部 div 出现，没有菜单或白色页脚。但开始滚动，它就在那里。感谢您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T00:26:03.660

调整窗口大小并且图像位于包装器 div 时设置了上 div 尺寸

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T08:51:39.073

了解如何为那些想知道的人：

```
<script  type="text/javascript">
jQuery.event.add(window, "load", resizeFrame);
jQuery.event.add(window, "resize", resizeFrame);

function resizeFrame() 
{
    var h = $(window).height();
    var w = $(window).width();
    $("#home").css('height',h);
}
</script> 
```

home 是浏览器调整大小时应该调整大小的 div 的 id。'height',h 告诉浏览器将浏览器的 var 的 h 设置为 div 的 css 高度。

# javascript - 在 AJAX 响应中查找嵌套属性，try/catch 的案例？

> ID：10556675
> 
> 赞同：0
> 
> 时间：2012-05-11T18:25:30.437
> 
> 标签：javascript, try-catch

所以我正在编写一个浏览器应用程序，它从许多不同的公共 API（通过 JSONP）获取数据并使用该数据来装饰我的本地记录。

是的，这可以事先在服务器端完成，但我还没有。

我以前从未在 JavaScript 中使用过 try/catch。在尝试查找`response.foo.bar.baz`可能更改的响应时，现在是使用它的好时机吗？

或者，是否有一种更优雅的方法来查找深度嵌套的属性并且如果找不到它不会抛出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:34:59.230

你可以这样做：

```
response && response.foo && response.foo.bar && response.foo.bar.baz 
```

如果其中一个嵌套属性不存在，它将返回`undefined`，否则它将返回`response.foo.bar.baz`.

或者，您可以使用此功能：

```
function getNestedProperty(firstObject, propertiesArray)
{
    if(firstObject instanceof Object)
    {
        var currentObject = firstObject;
        for(var i = 0; i < propertiesArray.length; i++)
        {
            if(currentObject.hasOwnProperty(propertiesArray[i]))
            {
                currentObject = currentObject[propertiesArray[i]];
            }
            else
            {
                return false;
            }
        }
        return currentObject;
    }
    else
    {
        return false;
    }
} 
```

用法：

```
getNestedProperty(response, ['foo', 'bar', 'baz']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:35:13.723

写起来可能更容易：

```
try {
    response.foo.bar.baz;
}
catch (e) {
    //oops
} 
```

比：

```
if( response && response.foo && response.foo.bar && "baz" in response.foo.bar ) {

}
else {
    //oops
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:35:37.583

鉴于替代方案类似于：

```
if ('foo' in response &&
    'bar' in response.foo &&
    'baz' in response.foo.baz)
{
    ...
} 
```

在这种情况下，听起来像`try / catch`块可能是一个不错的选择！

# c++ - 如何在 MSVC 中静态链接库？

> ID：10556678
> 
> 赞同：3
> 
> 时间：2012-05-11T18:26:08.030
> 
> 标签：c++, visual-c++, static-linking, pdcurses

我正在 Microsoft Visual C++ 10 中编译我的程序，它使用 PDCurses 库。我已将它配置为链接到 pdcurses.lib，但是当我尝试运行应用程序时，系统抱怨它找不到“pdcurses.dll”。它不应该抱怨它。我曾经用 MinGW (GCC) 编译程序，当我尝试运行应用程序时它不会询问我任何 DLL。我该怎么做才能使 MSVC 静态链接 PDCurses？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T00:31:49.757

In MSVC `.lib` files can take two forms:

1.  a static library
2.  an import library

The former can be used to make your application aware of the exported entry points from a DLL, which will then be written to the import directory of your PE file (or into another similar location for delay-loaded imports).

The latter, however, will actually link the code it contains for every referenced function into your final binary. This is what you want, but you may have to build that static library yourself from the source code, if it is not provided by the release of the library that you want to link.

However, there is another possibility: you could simply be passing the wrong directory for the linker to find the `.lib` files. In this case you'd be linking against the import library instead of the static library. Make sure you check your build log for the paths used. This, however, only applies if the distribution of the library contains both types of libraries.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-12T00:35:48.960

The dll needs to be in the path.

# java - Java xml 解析 - 定位特定结果：

> ID：10556682
> 
> 赞同：0
> 
> 时间：2012-05-11T18:26:26.517
> 
> 标签：java, api, parsing, sax

所以过去几天我一直在玩 Sax，我完全无法处理我遇到的这个问题。

假设我有以下 xml

```
<PowerSystemRegions>
<PowerSystemRegion>
    <RegionId>1</RegionId>
    <RegionName>New England</RegionName>
    <Status>Normal</Status>
    <DateUpdated>2011-12-22T10:55:51.000-05:00</DateUpdated>
</PowerSystemRegion>
<PowerSystemRegion> 
```

我想首先检查以确保区域名称是新英格兰，然后根据该名称提取状态，但我认为它不会加载下一个 qName 或任何内容，因为它会再次从 main 调用。

到目前为止，这是我所拥有的，但我完全陷入了困境：

```
public void startElement (String uri, String name, String qName, Attributes atts) {
    boolean region = false;
    boolean regionName = false;
    boolean regionStatus = false;

    if (qName.compareTo("RegionName") == 0) {
        region = true;
        if(atts.getValue(0).compareTo("New England") == 0){

        }

        if (currentStatus == null){
        String cCond = atts.getValue(0);
        currentStatus = cCond;
        }   
    }
} 
```

比较名称是我的想法，一旦设置了所有 3 个布尔值，我就没事了……但后来我突然想到，由于字符串中只有一个 qName，它不会那样工作……Halp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:10:53.213

自从我使用 sax 以来已经有一段时间了，但我会尝试：您可以在处理程序字段中添加，例如：

```
public class SaxHandler {
    Integer regionId;
    String regionName;
    String regionStatus;

    (...)
} 
```

因此，在您的起始元素中，您可以执行以下操作：

```
public void startElement (String uri, String name, String qName, Attributes atts) {
    if (qname.equals("RegionName") {
        regionName = atts.getValue(0);
    }
    if (qname.equals("RegionId") {
        regionId = Integer.parseInt(atts.getValue(0));
    }
    if (qname.equals ("Status") {
        if(regionName.equals ("New England")) {
            //Do what you want here
        }

    }

} 
```

顺便说一句，它更好地使用equals而不是compareTo。只有在对元素进行排序时才使用 compareTo ;)

**编辑：**考虑对象，更好地使用类，而不是像我那样使用字段。使用 PowerSystem 对象从 xml 收集数据；）

# c++ - QFile::copy create 会创建文件的副本还是将内容从一个文件移动到另一个文件？

> ID：10556684
> 
> 赞同：5
> 
> 时间：2012-05-11T18:26:41.177
> 
> 标签：c++, qfile

我正在尝试使用 C++/Qt 将文件从一个位置复制到另一个位置（在设备中）

我试过 QFile::copy("path1/file","path2");

我想将path1中的文件复制到path2。path2 没有该文件。

我只是想知道这是否是正确的方法，因为上面的代码似乎不起作用。

另外，我应该在尝试复制之前打开文件吗？需要帮忙！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T18:48:24.760

如果您想使用相同的文件名复制`path1/file`到`path2`，您需要执行以下操作：

```
QFile::copy("path1/file", "path2/file"); 
```

复制允许您更改文件的名称。例子：

```
QFile::copy("path1/file1", "path1/file2"); 
```

这就是为什么您需要两次都包含文件名的原因。此外，不必先打开文件。为了回答标题问题，它复制了文件。`QFile::rename()`移动内容。

# jdbc - 使用准备好的语句的池化 JDBC 连接应该是短期的还是长期的？

> ID：10556687
> 
> 赞同：-5
> 
> 时间：2012-05-11T18:26:46.207
> 
> 标签：jdbc, prepared-statement, connection-pooling, c3p0

如果连接不是物理连接而是来自 ConnectionPoolDataSource 的抽象，那么将连接紧紧包裹在 SQL 操作周围还是让连接在应用程序中持续存在更好？（我正在使用 c3p0，作为记录。）

等效地（我认为）：如果每个应用程序我 getConnection() 一次，c3p0 是否会使它看起来像一个稳定的连接，即使底层物理连接死掉并恢复生机也不会死掉？

如果我应该使连接短暂，我如何使用持久的准备好的语句来编程呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:59:34.173

> *那么，这又回到了最初的问题——如果有很多连接，我如何在连接之间共享 PreparedStatement？我认为连接创建了自己的 PreparedStatements。*

如果这是您唯一的问题 - 老实说，从您最初的问题中并不清楚 - 那么您根本不需要担心这个。JDBC 驱动程序和数据库将在适用和必要时缓存它们。那不是你的责任。只需按照正常的 JDBC 习惯，在尽可能短的范围内获取和关闭 DB 资源。

或者，如果它是一个 Java EE Web 应用程序，请查看 JPA 以将 JDBC 样板简化为 oneliners，并查看 EJB 以将事务处理完全委托给容器，这样您就不需要摆弄（自动）提交和回滚。

# windows - 启动用 Python 编写的窗口服务时出现错误 1053

> ID：10556689
> 
> 赞同：0
> 
> 时间：2012-05-11T18:26:52.637
> 
> 标签：windows, service, python-2.7

我已经查看并尝试了其他人发布的这个问题的解决方案。一位用户说尝试从以下位置更改我的 setup.py 文件：

```
from distutils.core import setup
import py2exe

setup(console=["dev.py"]) 
```

至

```
from distutils.core import setup
import py2exe

setup(service=["dev.py"]) 
```

我得到以下结果：

```
running py2exe
*** searching for required modules ***
Traceback (most recent call last):
  File "C:\Python27\Scripts\distutils-setup.py", line 5, in <module>
  setup(service=["C:\Python27\Scripts\dev.py"])
File "C:\Python27\lib\distutils\core.py", line 152, in setup
  dist.run_commands()
File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
  self.run_command(cmd)
File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
  cmd_obj.run()
File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 243, in run
  self._run()
File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 296, in _run
  self.find_needed_modules(mf, required_files, required_modules)
File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 1274, in
find_needed_modules
  mf.import_hook(mod)
File "C:\Python27\lib\site-packages\py2exe\mf.py", line 719, in import_hook
  return Base.import_hook(self,name,caller,fromlist,level)
File "C:\Python27\lib\site-packages\py2exe\mf.py", line 136, in import_hook
  q, tail = self.find_head_package(parent, name)
File "C:\Python27\lib\site-packages\py2exe\mf.py", line 204, in find_head_package
  raise ImportError, "No module named " + qname
ImportError: No module named dev 
```

现在，当我在我的设置脚本中使用“控制台”运行 py2exe 时，它​​工作正常，但服务没有启动并且我收到错误消息。当我在我的设置脚本中使用“服务”运行 py2exe 时，py2exe 没有运行并告诉我它找不到我的模块。

我试图重新安装 py2exe 没有解决。我也尝试过改变：

```
def SvcDoRun(self):
    servicemanager.LogMsg(servicemanager.EVENTLOG_INFORMATION_TYPE,
                          servicemanager.PYS_SERVICE_STARTED,
                          (self._svc_name_,'')) 
```

至

```
def  SvcDoRun(self):
     self.ReportServiceStatus(win32service.SERVICE_RUNNING)
     win32event.WaitForSingleObject(self.hWaitStop, win32event.INFINITE) 
```

也没有什么不同。任何人都可以帮我吗？这是我正在做的事情。它监视服务器并每 60 秒返回一个文本文件，我用它来在任何给定的时间监视我的服务器。你们能提供的任何帮助都会很棒。

```
import win32serviceutil
import win32service
import win32event
import servicemanager
import socket
import wmi
import _winreg
from time import sleep
import os

class SrvMonSvc (win32serviceutil.ServiceFramework):
_svc_name_ = "SrvMonSvc"
_svc_display_name_ = "Server Monitor"

def __init__(self,args):
    win32serviceutil.ServiceFramework.__init__(self,args)
    self.hWaitStop = win32event.CreateEvent(None,0,0,None)
    socket.setdefaulttimeout(60)

def SvcStop(self):
    self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
    win32event.SetEvent(self.hWaitStop)

def SvcDoRun(self):
    servicemanager.LogMsg(servicemanager.EVENTLOG_INFORMATION_TYPE,
                          servicemanager.PYS_SERVICE_STARTED,
                          (self._svc_name_,''))
    self.main()

def main(self):
    host = wmi.WMI(namespace="root/default").StdRegProv
    try:
        result, api = host.GetStringValue(
        hDefKey = _winreg.HKEY_LOCAL_MACHINE,
        sSubKeyName = "SOFTWARE\Server Monitor",
        sValueName = "API")
        if api == None:
            raise Exception
        else:
            pass
    except:
        exit()

    while 1 == 1:
        with open("C:/test.txt", "wb") as b:
            computer = wmi.WMI(computer="exsan100")
            for disk in computer.Win32_LogicalDisk (DriveType=3):
                name = disk.caption
                size = round(float(disk.Size)/1073741824, 2)
                free = round(float(disk.FreeSpace)/1073741824, 2)
                used = round(float(size), 2) - round(float(free), 2)
                for mem in computer.Win32_OperatingSystem():
                    a_mem = (int(mem.FreePhysicalMemory)/1024)
                for me in computer.Win32_ComputerSystem():
                    t_mem = (int(me.TotalPhysicalMemory)/1048576)
                    u_mem = t_mem - a_mem
                for cpu in computer.Win32_Processor():
                    load = cpu.LoadPercentage
                print >>b, api
                print >>b, name
                print >>b, size
                print >>b, used
                print >>b, t_mem
                print >>b, u_mem
                print >>b, load
        b.close()
        date_list = []
        stamp = time.strftime("%c",time.localtime(time.time()))
        date_list.append(stamp)
        name = re.sub(r"[^\w\s]", "",date_list[0])
        os.rename("C:/test.txt", ("C:/%s.txt" % name))

        try:
            sleep(60.00)
        except:
            exit()

if __name__ == '__main__':
    win32serviceutil.HandleCommandLine(SrvMonSvc) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:11:22.557

您是否从最初的问题取得了进展。我在 python 服务中遇到了类似的问题，发现它缺少 DLL，因为“系统路径”（不是用户路径）不完整。

从命令提示符运行带有 -debug 的 pythonservice.exe 没有问题，因为它使用了正确的 PATH 环境变量，但如果您的服务作为系统服务安装，则值得检查系统路径变量是否具有所需 DLL 的所有路径（MSVC、Python、System32）。对我来说，它缺少 python DLLs 路径，之后它再次工作。

# actionscript-3 - 你能在flash builder中调试swc吗

> ID：10556691
> 
> 赞同：3
> 
> 时间：2012-05-11T18:27:02.900
> 
> 标签：actionscript-3, apache-flex, flash-builder, swc

您可以在 Flash Builder 中调试和单步调试 swc 文件的代码吗？

假设您甚至可以访问源代码（来自 flex 库项目或 flash 专业项目）！如果怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T19:38:06.580

是的，你可以，虽然有一些限制（当你这样做时 FlashBuilder 会告诉你），但简单的步进是没有问题的。

如果您在 FlashBuilder 中的项目中有源代码，FB 应该会自动找到相关的代码。如果不这样做，您可以手动将源代码关联到 swc。转到 Flex 构建路径窗口；点击swc旁边的箭头；双击显示“源附件”的行并输入源代码的路径。

![在此处输入图像描述](../Images/9a4d42f8fcc45614e12032feaf741255.png)

# php - PHP数据库连接失败

> ID：10556694
> 
> 赞同：0
> 
> 时间：2012-05-11T18:27:10.527
> 
> 标签：php, mysql

我有一个 php 文件，其中包含两个函数，一个用于连接到数据库，一个用于为购物车设置 cookied。这是那个文件：

```
<?php
$dbServer="localhost";
$dbName="test";
function ConnectToDb($server, $database){
    $s=@mysql_connect($server);
    $d=@mysql_select_db($database, $s);
    if(!$s || !$d)
    return false;
    else
    return true;
}

function GetCartId(){
    if(isset($_COOKIE["cartId"])){
    return $_COOKIE["cartId"];
}
else {
    session_start();
    setcookie("cartId", session_id(), time()+((3600*24)*30));
    return session_id();
}
}
?> 
```

连接到数据库的功能在这个特定程序的另一个 php 文件中运行良好。我在这个文件中遇到了问题：

```
<?php
include("db.php");

    switch($_GET["action"]) {
            case "add_item":
            {
                    AddItem($_GET["id"], $_GET["qty"]);
                    ShowCart();
            break;
            }
            case "update_item": {
                    UpdateItem($_GET["id"], $_GET["qty"]);
                    ShowCart();
            break;
            }
            case "remove_item": {
                    RemoveItem($_GET["id"]);
                    ShowCart();
            break;
            }
            default: {
                    ShowCart();
            }
    }

    function AddItem($itemId, $qty) {
            // Will check whether or not this item
            // already exists in the cart table.
            // If it does, the UpdateItem function
            // will be called instead

            $cxn = @ConnectToDb($dbServer, $dbName);
            // Check if this item already exists in the users cart table
            $result = mysql_query("select count(*) from cs368_cart where cookieID = '" . GetCartID() . "' and itemId = $itemId");
            $row = mysql_fetch_row($result);
            $numRows = $row[0];

            if($numRows == 0) {
                    // This item doesn't exist in the users cart,
                    // we will add it with an insert query
                    @mysql_query("insert into cs368_cart(cookieID, itemId, qty) values('" . GetCartID() . "', $itemId, $qty)");
            }
            else {
                    // This item already exists in the users cart,
                    // we will update it instead

                    UpdateItem($itemId, $qty);
                    }
            }

    function UpdateItem($itemId, $qty) {
            // Updates the quantity of an item in the users cart.
            // If the qutnaity is zero, then RemoveItem will be
            // called instead

            $cxn = @ConnectToDb($dbServer, $dbName);

            if($qty == 0) {
                    // Remove the item from the users cart
                    RemoveItem($itemId);
            }
            else {
                    mysql_query("update cs368_cart set qty = $qty where cookieID = '" . GetCartID() . "' and itemId = $itemId");
                    }
            }

    function RemoveItem($itemId) {
            // Uses an SQL delete statement to remove an item from
            // the users cart
            $cxn = @ConnectToDb($dbServer, $dbName);
            mysql_query("delete from cs368_cart where cookieID = '" . GetCartID() . "' and itemId = $itemId");
    }

    function ShowCart() {
            // Gets each item from the cart table and display them in
            // a tabulated format, as well as a final total for the cart
            $cxn = @ConnectToDb($dbServer, $dbName);
            $result = mysql_query("select * from cs368_cart inner join cs368_products on cart.itemId =
                    items.itemId where cart.cookieID = '" . GetCartID() . "' order by items.itemName asc")
                     or die("Query to get test in function ShowCart failed with error: ".mysql_error());
?> 
```

我能做些什么来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:40:43.617

首先：丢失@，并在其中放置一些适当的错误处理（当出现问题时这些函数返回false，您可以使用mysql_error和mysql_errno来记录它）。

第二：在有人通过 URL 偷偷输入一些额外代码之前，这些 $_GET 参数上的 mysql_real_escape_string 和 intval 。

第三：您正在访问 $dbServer 和 $dbName 作为函数 UpdateItem 的本地变量，而不是脚本的全局变量。您应该只连接到数据库一次（在原始 db.php 文件中），然后让查询函数处理其余的事情（因为只有一个连接，所以无论如何它们都默认为那个）。

# java - 在java中读取文件时遇到问题

> ID：10556695
> 
> 赞同：0
> 
> 时间：2012-05-11T18:27:15.000
> 
> 标签：java

我在 Java 中读取文件时遇到了一些问题。

文件是什么样子的：

```
Answer 1:
1\. This is an apple
2\. Something
Answer 2:
1\. This is a cool website 
2\. I love banana
3\. This is a table
4\. Programming is fun
Answer 3\. 
1\. Hello World
.... 
```

我想要做的是将它们分成两项：一项是答案编号；另一个是答案列表。

因此，假设我有一个名为 Answer: String of answer number List of answers 的对象类。

到目前为止，这是我在将代码放入对象类之前调试代码所做的工作。但我无法得到正确的结果

```
public void reader(String file) throws FileNotFoundException, IOException {
    FileReader fR = new FileReader(file);
    BufferedReader bR = new BufferedReader(fR);
    String line = null;

    int count = 0 ;
    String blockNum = "";
    String printState = "" ;
    while ((line = bR.readLine()) != null) {
        if(line.contains("Answer")){
            //System.out.println("Contain Answer statement: " + line);
            count++;
            blockNum = line; 
            printState = "";
        }
        else{
            //System.out.println("No Answer Statement: " + line);
            printState += line + " / " ;
        }

        System.out.println( count + " " + blockNum + "   " + printState );
    }

    // Close the input stream
    bR.close();
    fR.close();
} 
```

我很确定我在编码时做了一些愚蠢的事情。我不太确定如何阅读它，以便将它分开。

现在输出如下所示：

```
1 Answer 1:   
1 Answer 1:   1\. This is an apple / 
1 Answer 1:   1\. This is an apple / 2\. Something / 
2 Answer 2:   
2 Answer 2:   1\. This is a cool website  / 
2 Answer 2:   1\. This is a cool website  / 2\. I love banana / 
2 Answer 2:   1\. This is a cool website  / 2\. I love banana / 3\. This is a table / 
2 Answer 2:   1\. This is a cool website  / 2\. I love banana / 3\. This is a table / 4\. Programming is fun / 
3 Answer 3\.    
3 Answer 3\.    1\. Hello World / 
```

但我希望输出是这样的：

```
1 Answer 1:   1\. This is an apple / 2\. Something / 
2 Answer 2:   1\. This is a cool website  / 2\. I love banana / 3\. This is a table / 4\. Programming is fun /    
3 Answer 3\.    1\. Hello World / 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:34:34.920

您正在为您读取的每一行输入打印一行输出。尝试将 println 移动到检查答案的循环部分内，以确保只打印每个答案/答案值集一次。例如：

```
if(line.contains("Answer")) {
    if (printState != "") {
        System.out.println(count + " " + blockNum + "   " + printState);
    }
    ...
} 
```

编辑：您还需要在退出 while 循环时进行打印，以确保打印最后一个答案/答案值集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:44:01.970

一种解决方案使用 printTime 的标志作为布尔值。

```
boolean printTime = false;

...
   if(line.contains("Answer")) {

       if (printTime!= false) {
          System.out.println( count + " " + blockNum + "   " + printState );
          printTime=false;
       }
        ...
  }else{
        //System.out.println("No Answer Statement: " + line);
        printState += line + " / " ;
        printTime=true; // you have one answer 
  }
  ... 
```

在最后一个答案的最后添加一点额外的打印

这样，您可以在一行中为一个答案提供多个 printState。

但正确的“java”处理方式是创建你的对象：

```
List<Answer> listOfAnswer = new LinkedList<Answer>();
Answer answer;
...
if(line.contains("Answer")){
            //System.out.println("Contain Answer statement: " + line);
            count++;

            answer = new Answer(line);
            listOfAnswer.add(answer)
        }
        else{
            answer.add(new Answer(line));
        }
}
... 
```

并且只有在打印出来之后:)

```
System.out.println(listOfAnswer.toString()); 
```

更简单的解决方案是使用

```
Map<Integer, LinkedList<String>> answers = new LinkedHashMap<Integer, LinkedList<String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:58:12.883

请参阅工作示例：

```
public void reader(String file) throws FileNotFoundException,
        IOException {
    BufferedReader reader = new BufferedReader(new FileReader(file));
    String line = "";
    while (reader.ready()) {
        line = reader.readLine();
        if (!line.contains("Answer")) {
            System.out.print(line + " / ");
        } else {
            System.out.println();
            System.out.print(line + " ");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T20:14:38.777

主要输出问题是您在行迭代循环（while）内打印。

要解决它，您可以按照[@Albion 回答](https://stackoverflow.com/questions/10556695/having-trouble-reading-files-in-java/10556785#10556785)的内容并更改在 内完成打印的位置`while`，但正如他回答中的 EDIT 所述，存在缺陷，您必须在循环后打印额外的时间，以便得到正确的结果。

有另一种艰难的方法，那就是根本不在循环内打印它，我认为这是你的情况的正确方法。要做到这一点，您只需要使用 StringBuilder 而不是 String！

* * *

我还发现了一些不必要的变量，并且使用该`if(line.contains("Answer"))`方法也存在缺陷，即如果“Answer”字符串出现在其中一个选项文本中，它会得到一个真实的结果并弄乱你的结果，例如：

```
Answer 1:
1\. This is an apple
2\. Capitalizing Is The Answer!
3\. Something 
```

将输出：

```
1 Answer 1:  1\. This is an apple / 
2 2\. Capitalizing Is The Answer!  3\. Something 
```

在大多数情况下，找到动态模式的最佳方法（就像你的那样，因为它改变了数字，并且在最后一个答案中，' `:`' 也带有 ' `.`'）是使用（模式）匹配器！我使用了这个：`if(line.matches("Answer \\d[\\:\\.]"))`，如果您还不习惯，请参阅[Pattern Docs](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，因为`String.matches()`这是您在处理文本时可能会经常使用的东西。

* * *

解释每一个变化有点麻烦，代码很简单，你分析完就可以掌握了，所以我简单地发布一下我的方法：

```
public static void StackAnswer(String file) throws FileNotFoundException, IOException{
    BufferedReader br = new BufferedReader(new FileReader(file));
    StringBuilder output = new StringBuilder();
    int count = 0;
    while(br.ready()){
        String line = br.readLine().trim();
        if(line.matches("Answer \\d[\\:\\.]")){
            count++;
            output.append(System.lineSeparator()).append(count).append(' ').append(line);
        } else {
            output.append(" / ").append(line);
        }
    }
    System.out.println(output.toString().trim());
    br.close();
} 
```

祝你好运！

# java - 在自定义 maven 原型中使用的 JCodeModel

> ID：10556697
> 
> 赞同：0
> 
> 时间：2012-05-11T18:27:32.897
> 
> 标签：java, maven, maven-plugin, maven-archetype

我是 Maven 和 Jcodemodel 的新手。我正在尝试创建一个将接受 wsdl 并生成代码的原型。我需要通过实现接口为实现类文件创建java代码。我需要使用 JCodeModel 来生成 java 代码。但我是 JCode 的新手。如何在 Maven 原型中使用 Jcodemodel 生成 java 代码？

请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:41:01.033

Maven 将构建您的项目并自动化管理构建和项目的某些方面；但是，它不会为您决定项目做什么，或者如何编写项目。

您可能需要编写作为 Web 服务运行的 Java 代码（因为您提到了 WSDL）。该网络服务显然应该接受“某事”并以“某事”回复。这是一个猜测（这是一个非常模糊的问题），它应该接受的东西是对 Java 类的某种描述，而它应该回答的东西将是 Java 源代码或编译的 Java 类。

无论哪种情况，项目都可以由 Maven 管理，这意味着 Maven 将编译、测试和打包您的项目。在某些情况下，它也会部署它（如果您配置 Maven 这样做）。

现在，如果您希望 Maven 真正接受 WSDL 并生成代码，那么 Maven 将构建的内容将是静态的，这意味着“生成”的代码在 Maven 完成构建后将无法更改。你可以; 但是，构建可能会改变的“下一个”版本。如果这个场景听起来更像您的想法，那么您的“源”将是一个静态文件，“构建项目”将是源代码或与源对应的目标代码。

如果没有更多指导，这可能是您将获得的最佳指南。这是一个太模糊的问题，涵盖了太多的基础，无法明确地说出太多。你似乎同时在很多关键地方也缺乏很多知识；也许最好的解决方案是确定您可能需要复习的内容，按“需要什么”排序，然后从不依赖其他元素的元素开始。

# regex - 在反向 ISAPI 重写中删除文件扩展名

> ID：10556703
> 
> 赞同：0
> 
> 时间：2012-05-11T18:28:19.973
> 
> 标签：regex, iis, isapi-rewrite

所以我很难想出一个好的正则表达式模式来使用 Helicon ISAPI Rewrite 从 URL 中删除文件扩展名。它需要能够匹配任何类型的扩展并将其删除？它大部分是在 ISAPI 中完成的，因为缺少.. 我们应该说对应用程序源的控制（可能导致程序员愤怒的情况）。有任何想法吗？

谢谢！

* * *

例子

浏览器 URL：www.derp.com/folder/file.aspx --> IIS 请求 URL：www.derp.com/folder/file

浏览器 URL：www.derp.com/img/cutepuppy.jpg --> IIS 请求 URL：www.derp.com/img/cutepuppy

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:46:10.193

尝试使用以下内容：

```
RewriteRule ^([^.]+)\..+$ $1 [NC,R=301,L] 
```

# android - Android Proguard 语法错误

> ID：10556706
> 
> 赞同：0
> 
> 时间：2012-05-11T18:28:29.943
> 
> 标签：android, proguard

我正在尝试使用使用 Android SDK 的 Proguard 来混淆我的代码。我在 .pro 文件中遇到语法错误。我试图更新 proguard jar 文件，但没有任何帮助。我搜索了 SO 并找到了一个问题，但没有一个答案有帮助。

我已经包含了控制台日志和我的 proguard.cfg。我该如何解决这个问题？

我的控制台日志：

```
[2012-05-11 20:12:09 - WrtsMobile] Proguard returned with error code 1\. See console
[2012-05-11 20:12:09 - WrtsMobile] Error: @C:\Users\SEBAST~1\AppData\Local\Temp\android_5842287394885430823.pro (De syntaxis van de bestandsnaam, mapnaam of volumenaam is onjuist)
[2012-05-11 20:14:19 - WrtsMobile] Proguard returned with error code 1\. See console
[2012-05-11 20:14:19 - WrtsMobile] Error: @C:\Users\SEBAST~1\AppData\Local\Temp\android_5684176843163078198.pro (De syntaxis van de bestandsnaam, mapnaam of volumenaam is onjuist)
[2012-05-11 20:15:47 - WrtsMobile] Proguard returned with error code 1\. See console
[2012-05-11 20:15:47 - WrtsMobile] Error: @C:\Users\SEBAST~1\AppData\Local\Temp\android_9001247977726315753.pro (De syntaxis van de bestandsnaam, mapnaam of volumenaam is onjuist)
[2012-05-11 20:16:55 - WrtsMobile] Proguard returned with error code 1\. See console
[2012-05-11 20:16:55 - WrtsMobile] Error: @C:\Users\SEBAST~1\AppData\Local\Temp\android_3864890478425790438.pro (De syntaxis van de bestandsnaam, mapnaam of volumenaam is onjuist)
[2012-05-11 20:21:14 - WrtsMobile] Proguard returned with error code 1\. See console
[2012-05-11 20:21:14 - WrtsMobile] Error: @C:\Users\SEBAST~1\AppData\Local\Temp\android_7512228833969245252.pro (De syntaxis van de bestandsnaam, mapnaam of volumenaam is onjuist) 
```

我的 proguard.cfg：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keepattributes LineNumberTable

-keep public class * extends android.app.Activity
-keep public class * extends android.support.v4.app.FragmentActivity
-keep public class * extends android.app.Application

#To remove debug logs:
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** w(...);
}

#Maintain java native methods 
-keepclasseswithmembernames class * {
    native <methods>;
}

#To maintain custom components names that are used on layouts XML:
-keep public class * extends android.view.View {
    public <init>(android.content.Context);
}
-keep public class * extends android.view.View {
    public <init>(android.content.Context, android.util.AttributeSet);
}
-keep public class * extends android.view.View {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

#Maintain enums
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

#To keep parcelable classes (to serialize - deserialize objects to sent through Intents)
-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T23:33:25.780

您的构建过程似乎在文件名前添加了一个额外的“@”，导致找不到文件名。如果您使用的是 Android SDK，请确保您拥有最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:44:16.127

用最新版本（4.8）替换 Proguard 解决了这个问题，文件名中的 @ 只是错误的一部分：“它出现在这里”

# pipe - 将 ls 命令的输出提供给 head

> ID：10556707
> 
> 赞同：0
> 
> 时间：2012-05-11T18:28:42.990
> 
> 标签：pipe, head, ls

我想打印`ls`命令输出的前 10 行。

我试过`ls | head 10`了，显然没有用。

然后我尝试`ls | xargs -0 head 10`了，希望它会起作用，但它也没有。（它似乎在某种程度上有效，但是东西打印在同一行，这有点难以阅读！）

那么有没有人碰巧知道如何“抓取”一个 ls 输出的前 10 行？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:29:31.553

```
ls | head -10 
```

或者

```
ls | head -n 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:38:07.443

好问题，我认为 --format=horizo​​ntal 就足够了，但是列宽是未知的，因为您将输出从 ls 传送到 head 而不是终端。-w（屏幕宽度）解决了这个问题。

试试这个：

```
ls --format=horizontal -w80|head -n 10 
```

我只使用来自 GNU coreutils 的 ls 对此进行了测试。

# jquery - 左对齐时jquery选择器最后一个拇指（高级jquery）

> ID：10556714
> 
> 赞同：0
> 
> 时间：2012-05-11T18:29:22.770
> 
> 标签：jquery, css, jquery-selectors

**编辑：小心！第一行的最后一个盒子！CONTAINER 的宽度可以随时更改。IE。容器宽度 1000px = 每行 10 个框！需要选择该行的最后 10 个框。但是容器的宽度可以改变** ：

[检查示例](http://1lj.net/ex.html)

你看到盒子了吗？行。当页面全屏时，需要选择该行的最后一个框（第 8 个框）。当浏览器窗口小于 800 像素时 - 另一个框将位于最后一行位置（即第 7、第 6、第 5）

**=======================================**

如您所见，这里是包含小框的“内容 div”。内容 div 可以随时根据用户屏幕分辨率更改自己的宽度。而且每个“盒子”都会在屏幕上排成一行，但每次最后一个盒子都会不一样。

如何使用jquery获取屏幕第一行或第二行最后一个框的ID？即使内容 div 的大小发生了变化，是否有任何通用方法可以从框的行中获取 ID？

初始来源示例：

```
<style type="text/css">
.box{float: left;
height:100px;
width:100px;
}
.content {
    max-width: 800px;
    width: auto;
    margin: 0 auto;
}
</style>

<div class=content>
<div class=box id=xxx1>xxx</div>
<div class=box id=xxx2>xxx</div>
...
<div class=box id=xxx200>xxx</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:33:12.287

试试这个：

```
$(window).resize(function(){
    var w = $('.content').width() / 100;
    var id = $('.box').eq(w - 1).attr('id');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:31:04.700

```
$(".box").last()[0].id; // returns the ID of the last element with class "box" found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:44:14.663

现在我知道你想要什么，所以你可以使用以下代码：

```
var top = $('.box:first').offset().top; 
var firstLine = $('.box').filter(function(){
    return $(this).offset().top == top;
});
// now you can select any of first line element

  firstLine.last(); // Select Last item of first line
  firstLine.eq(3); // box 4 
```

在这种情况下，我得到第一个盒子偏移量并将其与其他盒子顶部偏移量进行比较......

# java - JSF：组件被多次添加

> ID：10556715
> 
> 赞同：0
> 
> 时间：2012-05-11T18:29:26.783
> 
> 标签：java, jsf

在我的应用程序中，我创建了一系列表单来编辑“潜在客户”的电子邮件地址。

每个表单中的字段都是以编程方式添加的，并且每个字段都会根据潜在客户的 ID 获得一个唯一的 ID。有 x 个潜在客户，因此调用此方法将每个潜在客户添加到视图中：

```
 public void addLead(HtmlPanelGrid grid, Lead lead, String beanName){
    updatedEmails.put(lead.getGuid(), lead.getEmail());
    wasAdded.put(lead.getGuid(), false);
    form = (HtmlForm)getApplication().createComponent(HtmlForm.COMPONENT_TYPE);
    form.setId("form"+lead.getGuid());
    grid.getChildren().add(form);

    HtmlOutputLabel label = (HtmlOutputLabel)getApplication().createComponent(HtmlOutputLabel.COMPONENT_TYPE);
    label.setId("ID"+lead.getGuid());
    label.setValue("Name: " + lead.getFirstName() +" " + lead.getLastName()+" Email: ");
    label.setStyleClass("hs-form label");
    form.getChildren().add(label);

    HtmlInputText inputText = (HtmlInputText)getApplication().createComponent(HtmlInputText.COMPONENT_TYPE);
    inputText.setId("input"+lead.getGuid());
    String binding = "#{" + beanName + "." + "updatedEmails[\""+lead.getGuid()+"\"]}";
    ValueExpression ve = getExpressionFactory().createValueExpression(getELContext(), binding, String.class);
    inputText.setValueExpression("value", ve);
    inputText.setStyleClass("hs-input");
    form.getChildren().add(inputText);

    HtmlCommandButton cmdButton = (HtmlCommandButton)getApplication().createComponent(HtmlCommandButton.COMPONENT_TYPE);
    cmdButton.setId("edit"+lead.getGuid());
    System.out.println("making edit button:" +lead.getGuid());
    String binding2  = "#{" + beanName + "." + "editEmail(\"" + lead.getGuid() + "\")}";
    System.err.println("binding:"+binding2);
    Class[] classList = new Class[1];
    classList[0] = String.class;
    MethodExpression ve2 = getExpressionFactory().createMethodExpression(getELContext(), binding2, null, classList);
    cmdButton.setActionExpression(ve2);
    cmdButton.setValue("Edit Email");
    cmdButton.setStyleClass("hs-button primary");
    System.out.println(cmdButton.toString());
    form.getChildren().add(cmdButton);

    HtmlCommandButton delButton = (HtmlCommandButton)getApplication().createComponent(HtmlCommandButton.COMPONENT_TYPE);
    delButton.setId("del"+lead.getGuid());
    String delBinding = "#{" + beanName + "." + "delLead(\"" + lead.getGuid() + "\")}";
    MethodExpression ve3 = getExpressionFactory().createMethodExpression(getELContext(), delBinding, null, classList);
    delButton.setActionExpression(ve3);
    delButton.setValue("Delete this Lead");
    delButton.setStyleClass("hs-button orange");
    form.getChildren().add(delButton);

} 
```

我遇到的问题是，当调用 editEmail 方法时，调用将转到 API 进行编辑，并且另一个确认成功的 JSF 组件被添加到视图中。这第一次工作正常。问题是，如果之后您按下任何其他编辑按钮再次调用 editEmail，它会尝试添加新的成功组件并再次添加第一个。这当然会引发错误，因为它们具有相同的 ID。这是 editEmail 方法。

```
public void editEmail(String guid){
    System.out.println("Edit Email Called: "+guid);
    leadToEdit = leads.get(guid);
    leadToEdit.setEmail(updatedEmails.get(guid));
    System.out.println(leads.get(guid).getEmail());
    try {
        URL url;
        if(useOAuth){
            url = new URL("https://api.hubapi.com/leads/v1/lead/" + guid + "?access_token=" + portal.getOauthToken());
        }
        else
            url = new URL("https://api.hubapi.com/leads/v1/lead/"+guid+"?portalId="+portal.getPortalID()+"&hapikey="+portal.getApiKey());
        System.out.println(url.toString());
        HttpURLConnection conn = (HttpURLConnection)url.openConnection();
        String request = "{\"email\":\""+leads.get(guid).getEmail()+"\"}";
        System.out.println(request);
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setRequestMethod("PUT");
        conn.setRequestProperty("Content-Type", "application/json");
        conn.setUseCaches(false);

        DataOutputStream osw = new DataOutputStream(conn.getOutputStream());
        osw.writeBytes(request);
        osw.flush();

        System.err.println(conn.getResponseCode());
        if(conn.getResponseCode()<300)
        {
            UIViewRoot ui = FacesContext.getCurrentInstance().getViewRoot();
            HtmlForm form = (HtmlForm)ui.findComponent("mainForm:form"+leadToEdit.getGuid());
            final HtmlOutputText output = (HtmlOutputText)getApplication().createComponent(HtmlOutputText.COMPONENT_TYPE);
            output.setId("output"+leadToEdit.getGuid());
            output.setValue("Edit Success");
            output.setStyleClass("hs-block-message success");
            form.getChildren().add(output);
        }
        else{
            UIViewRoot ui = FacesContext.getCurrentInstance().getViewRoot();
            HtmlForm form = (HtmlForm)ui.findComponent("mainForm:form"+leadToEdit.getGuid());
            final HtmlOutputText output = (HtmlOutputText)getApplication().createComponent(HtmlOutputText.COMPONENT_TYPE);
            output.setId("output"+leadToEdit.getGuid());
            output.setValue("Edit Failure");
            output.setStyleClass("hs-block-message error");
            form.getChildren().add(output);
        }

        } 
    catch (Exception ex) {
        Logger.getLogger(PortalView.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

可能是因为 bean 是会话范围的吗？

addLead 在创建包含所有组件的 PanelGrid 时在此处调用：

```
 public HtmlPanelGrid getMainGrid(){
    if(mainGrid==null){
        mainGrid = (HtmlPanelGrid)getApplication().createComponent(HtmlPanelGrid.COMPONENT_TYPE);
        mainGrid.setId("grid");
        for(Lead lead : leadArray){
            addLead(mainGrid, lead, "PortalView");
        }
    }
    return mainGrid;
} 
```

# r - R：在 ddply 中获取子集的长度

> ID：10556718
> 
> 赞同：1
> 
> 时间：2012-05-11T18:29:35.870
> 
> 标签：r

所以我有一个包含以下列的数据集：test_group、person_id、gross、购买。这本质上是一个人的列表，他们花了多少钱，他们购买了多少次，以及他们所在的群体。

我正在使用以下 ddply 代码来获取一些摘要统计信息：

```
mean_rpu <- ddply(data, .(test_group), summarise, total_rpu=sum(gross),
    total_users=length(person_id), total_purchasers=length(subset(data,  
    purchases > 0)$person_id), mean_rpu=mean(gross), sd_rpu=sd(gross)) 
```

我遇到的问题是“total_purchasers”摘要。我正在尝试计算每个 test_group 中购买者的人数。当前代码仅显示整个数据集中的 total_purchasers，不代表 test_group 因子。我可以用这个做任何优化吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T18:32:27.700

如果没有可重现的例子，很难确定，但也许你想要这个：

```
total_purchasers=length(person_id[purchases>0]) 
```

# objective-c - 在 iOS 中将 PDF 文本写入 PDFContext

> ID：10556719
> 
> 赞同：3
> 
> 时间：2012-05-11T18:29:36.997
> 
> 标签：objective-c, ios, pdf-generation, core-graphics

通过以下方式绘制到 pdf 上下文非常简单：

```
UIGraphicsBeginPDFContextToFile(pdfFile, CGRectZero, nil);
UIGraphicsBeginPDFPageWithInfo(sheet.frame, nil);    
CGContextRef ctx = UIGraphicsGetCurrentContext();

CGRect text_rect = ...
NSFont *font = ...
NSString * str = @"foo";
[str drawInRect:text_rect withFont:font];

...draw to context... 
```

然而，文本显然是光栅化的......无论如何，是否有实际将*pdf*样式文本添加到 pdf 文件？所以用户可以选择它，复制它等。可能通过核心图形以外的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:00:02.290

这绝对是可能的。 [这是一个教程](http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1)，展示了如何在 iOS 5 中生成和显示带有文本的 PDF 文档。

当我下载并运行项目时，放大时文本似乎没有被光栅化。当我在 OS X 的预览中打开生成的 PDF 时，我可以选择并复制文本。

此示例使用 Core Text 将文本绘制到 CGContext 中。`+[PDFRenderer drawText]`如果您想尝试，应该很容易更改以尝试其他方法。

例如，我将其更改为使用与您类似的代码，并且效果很好：

```
CGRect text_rect = { 0, 100, 300, 50 };
UIFont *font = [UIFont systemFontOfSize:12];
NSString * str = @"Added foo bar";
[str drawInRect:text_rect withFont:font]; 
```

# visual-studio-2010 - .TT 文件在编辑器中未按预期工作

> ID：10556720
> 
> 赞同：0
> 
> 时间：2012-05-11T18:29:40.290
> 
> 标签：visual-studio-2010

我安装了带有 T4 编辑和 modelig 工具的 VS 2010 SP1 问题是突然所有来自 .tt 文件的图标都消失了，并且它有未知的图标。当我在 VS 简单文本编辑器中打开它时，它打开时无法打开，没有任何工作，重新安装扩展并没有解决问题。我在打开时收到通知，提示有可用的扩展更新，它说建模和编辑工具更新可用。但是当我点击下载按钮时没有任何反应。请有人推荐我的项目严重依赖.tt的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:03:28.523

我发现 Visual Studio 安装有问题，所以干净重新安装后一切正常

# java - java.io.IOException：读取传输编码时过早的 EOF：分块的 http 响应

> ID：10556721
> 
> 赞同：0
> 
> 时间：2012-05-11T18:29:45.350
> 
> 标签：java, http, http-headers

我编写了一个小型命令行程序来读取网页并将响应正文打印到终端。

这适用于大多数网站，但是当从该网址读取分块响应时：http: [//www.pampers.co.uk/home](http://www.pampers.co.uk/home)我得到以下回溯：

```
java.io.IOException: Premature EOF
at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:538)
at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582)
at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669)
at java.io.FilterInputStream.read(FilterInputStream.java:116)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2668)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.Reader.read(Reader.java:123)
at HttpPageReader.main(HttpPageReader.java:44)` 
```

我已经对字符集进行了硬编码以匹配此页面的响应。我应该采取哪些步骤来调试此问题？我假设这不是 Java 错误，而是 Web 服务器返回的内容的问题 - 但是我已经在我的 Web 浏览器中查看了该页面，并且还使用 curl 下载了它，两者都没有问题。

代码如下，应该很容易复制粘贴和独立运行：

```
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.logging.Logger;

public class HttpPageReader
{    
private final static Logger logger = Logger.getLogger(HttpPageReader.class.getName());

private static final int SECOND_IN_MILLI_SECONDS = 1000;
private static final int TIME_OUT_MILLI_SECONDS  = 10 * SECOND_IN_MILLI_SECONDS;

public static void main(String[] args)
{
    if ( args.length != 1)
    {
        logger.warning("Please provide a url to download");
        System.exit(1);
    }
    logger.info("Downloading url " + args[0] + "...");

    try
    {
        URL url = new URL(args[0]);

        HttpURLConnection httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setUseCaches(false);
        httpConn.setRequestProperty("User-Agent", "My User Agent");
        httpConn.setRequestProperty("Accept", "*/*");
        httpConn.setConnectTimeout(TIME_OUT_MILLI_SECONDS);
        httpConn.setReadTimeout(TIME_OUT_MILLI_SECONDS);

        InputStreamReader inputStreamReader = new InputStreamReader(httpConn.getInputStream(), "utf-8");                        
        char chars[] = new char[1000];
        int numRead = inputStreamReader.read(chars);
        StringBuffer stringBuffer = new StringBuffer();
        while (numRead != -1)
        {
            stringBuffer.append(new String(chars, 0, numRead));
            numRead = inputStreamReader.read(chars);
        }

        logger.info("done");            
        logger.info(stringBuffer.toString());

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

}   
} 
```

更新：按照建议使用 IOUtils.toString(httpConn.getInputStream(), "utf-8") 给出了几乎相同的回溯 - 所以问题仍然存在，我该如何调试这个问题？

给出：

```
java.io.IOException: Premature EOF
at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:538)
at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582)
at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669)
at java.io.FilterInputStream.read(FilterInputStream.java:116)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2668)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.Reader.read(Reader.java:123)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1928)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1907)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:1884)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:1834)
at org.apache.commons.io.IOUtils.toString(IOUtils.java:705)
at org.apache.commons.io.IOUtils.toString(IOUtils.java:730)
at HttpPageReader.main(HttpPageReader.java:40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:02:54.813

你试过使用`IOUtils.toString(inputStream)`吗？

[Apache Commons IOUtils](http://commons.apache.org/io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:47:29.483

试试这个.....这样更容易......记住不要用n个东西重载程序，直到你真的需要它们......

只需复制粘贴此代码并尝试...然后尝试以您自己的方式修改它...祝您好运！！！

```
package com.my;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Scanner;

public class TestSrc {
    public static void main(String[] args) {
        try {
            URL url = new URL("http://www.pampers.co.uk/home");
            try {
                InputStream i = url.openStream();
                Scanner scan = new Scanner(i);

                while (scan.hasNextLine()) {
                    System.out.println(scan.nextLine());
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
    }
} 
```

# php - 使用 PHPExcel 读取 excel 文件时出现问题

> ID：10556722
> 
> 赞同：0
> 
> 时间：2012-05-11T18:29:51.963
> 
> 标签：php, phpexcel

我在使用 PHPExcel 读取文件时遇到问题。这是我得到的错误：

```
( ! ) Fatal error: Class 'PHPExcel_Cell' not found in /Applications/MAMP/htdocs/TestRailIntegration/Classes/PHPExcel/Reader/Excel2007.php on line 739
Call Stack
#   Time    Memory  Function    Location
1   0.0023  649920  {main}( )   ../testRailScripting.php:0
2   0.0030  755712  PHPExcel_IOFactory::load( ) ../testRailScripting.php:23
3   0.0038  797288  PHPExcel_Reader_Excel2007->load( )  ../IOFactory.php:193 
```

这是我的代码：

```
<?php 
include './Classes/PHPExcel.php';

echo 'Hello world' . "\n";
$FileName = $_FILES["fileName"]["name"];

$inputFileName=$_FILES["fileName"]["tmp_name"];
echo $inputFileName;

if(file_exists("uploadedFiles/".$_FILES["fileName"]["name"])){
    echo $_FILES["fileName"]["name"]." already exists";
}
else{
    move_uploaded_file($_FILES["fileName"]["tmp_name"],"uploadedFiles/".$_FILES["fileName"]["name"]);
    echo $_FILES["fileName"]["name"]." has been moved";
}

$PHPExcelObj = PHPExcel_IOFactory::load($inputFileName);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:33:07.677

我看到您将文件移动到“uploadedFiles”文件夹，所以：

```
$PHPExcelObj = PHPExcel_IOFactory::load("uploadedFiles/".$inputFileName); 
```

# android - Android 模拟器快照错误

> ID：10556725
> 
> 赞同：69
> 
> 时间：2012-05-11T18:30:05.130
> 
> 标签：android, eclipse, android-emulator

在 eclipse 3.7.0 中启动我的应用程序时，我收到一个错误...

Emulator] 模拟器：错误：无法从快照加载虚拟机。已为不同的硬件配置保存快照。

我已经多次运行此应用程序而没有出现错误，但现在显示此错误。我检查了我的 AVD 管理器，我的平台和 API 级别是正确的。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-11T19:17:53.960

问题不在于您的应用程序，而在于已保存的 AVD 快照。自从您上次成功运行 AVD 配置以来，它已被编辑。即使更改皮肤/显示分辨率也会产生此错误。您可以：

1.  将 AVD 配置改回原来的样子。
2.  编辑 AVD 以禁用快照。或者
3.  下次启动 AVD 时，取消选中*Launch with snapshot*，但保持选中*Save snapshot*。这样，快照将在启动时被忽略，但在您退出时会被覆盖。然后，您将能够像以前一样使用快照进行后续运行。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-14T17:00:36.710

通过以下方式解决问题：

1.  去项目并选择清洁
2.  转到窗口>AVD 管理器>删除并创建一个新的 AVD
3.  重新启动应用程序，模拟器将需要几分钟才能加载。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-27T10:04:16.623

要删除系统中存储的快照列表：

```
rm ~/.android/avd/[your_avd_name]/snapshots.img* 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-26T15:40:17.863

我和Timmmm有同样的问题，没有什么能解决的。

通过命令行 emulator.exe -avd avdname -snapshot default-boot 给了我同样的错误。但我也注意到它可以从 GUI 启动。

我进入`C:\users\uname\.android\avd\The_avd\`并删除了`snapshots.img.default-boot`快照和快照iso文件。

这比重新创建机器更容易，但会删除您的快照，然后您可以像往常一样再次使用它。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-05-11T18:36:30.010

转到窗口-> Android 虚拟设备管理器，选择您的虚拟设备并禁用从快照启动并保持保存到快照选项，然后单击启动。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-06-01T04:49:46.753

也许尝试在**Android 虚拟设备管理器**中禁用硬件快照？它应该安装在您安装 android SDK 的任何位置。

![在此处输入链接描述](../Images/789279198d995d5cc1a26ae7d4300571.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-29T16:24:59.417

就我而言，这似乎是由于我在同一应用程序的两次启动之间关闭了我的 AVD，我在第二次启动时收到了此错误消息。

我不需要“清理”项目，只需使用 AVD 管理器手动启动 AVD，等待它启动并在启动完成后再次启动应用程序。为我工作。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-31T12:35:52.573

最后我得到了解决方案，请按照以下步骤操作：

1）打开 avd 管理器
2）选择给出此错误的 avd-“错误：无法从快照加载 VM。快照已保存用于不同的硬件配置。”
3）单击开始
4）现在取消选中这两个选项-“从快照启动”和“保存快照”
5）现在检查“擦除用户数据”
6）立即启动 avd
7）一旦显示“ANDROID”，关闭 avd
8）现在再次打开 avd 管理器
9）取消选中“擦除用户数据”
10）检查这两个选项 -“从快照启动”和“保存快照”
11）现在启动 avd，它可以很容易地从快照加载没有错误

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-22T22:24:00.793

在此之前，您可能一直在尝试从 AVD 启动模拟器，现在则从命令行启动。大多数 AVD 使用 arm 指令集，因此您可能必须尝试以下操作：

```
emulator64-arm -avd <your avd label> -no-snapshot-load -no-snapshot-save 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-06T03:59:14.557

这是一个[已知问题](http://code.google.com/p/android/issues/detail?id=29923)。希望它会在 Android SDK 的下一个版本中得到修复，但谁知道呢？我认为来自[user1165694](https://stackoverflow.com/users/1165694/user1165694)的解决方案比关于该问题的建议解决方案更容易。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-28T18:21:20.100

如果有人使用**IntelliJ**，为了禁用快照，请执行以下操作：

1.  打开 AVD
2.  选择您的设备，然后按开始...
3.  取消选中启动快照

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-07-29T07:47:00.753

请注意：在 Eclipse 之后关闭模拟器也会导致同样的错误。在这种情况下，当然没有硬件更改，但会出现此错误：

> 无法从快照加载虚拟机。已为不同的硬件配置保存快照。

所以总是在模拟器之前关闭 Eclipse。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-16T22:10:08.177

遇到了这个问题。并找到了方法。当我不更改配置中的任何内容，而只是再次启动模拟器时。您需要在模拟器中单击“电源”按钮，然后将其关闭。从快照开始后发生的一件烦人的事情是 - 我需要单击电源按钮才能解锁模拟器。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-05-22T12:10:11.193

就我而言，当我插入未启用 USB 调试模式的设备时，会显示此错误。因此，根据我上次运行的配置，找不到设备并且运行应用程序导致显示此错误消息。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-09T06:03:59.670

这是因为退出模拟器的过程没有正确完成。尝试通过以下方式找到正在运行的模拟器

**ps -ef |grep 模拟器**

然后它将列出所有模拟器任务。尝试通过杀死正在运行的模拟器

**杀死 -9**

**注意**：不要杀死以下

用户 0 11:27 pts/11 00:00:00 grep --color=auto emulator

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2012-05-11T18:37:48.793

清理项目并在具有相同 api 级别的模拟器上运行。

如果项目的 api 级别并在具有相同 api 级别的模拟器上运行后仍然无法解决更改。

就我而言，它运行......

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2014-04-24T11:57:43.937

这更容易。您只需要更改您的虚拟 Android 设备的名称，然后删除您不充电并准备好的设备 :)

# java - 无法从属性文件中读取

> ID：10556728
> 
> 赞同：1
> 
> 时间：2012-05-11T18:30:11.353
> 
> 标签：java, junit

我正在构建一个 Java 程序，它将自动运行大约一百个测试。程序本身处于生产的最后阶段，我的老板希望我取出所有硬编码的变量并将它们存储在 .properties 文件中。现在我有两个 java 文件 Logic.java 和 Tests.java，以及一个属性文件 xxx.properties。但是，当我运行代码（Tests.java 中的 JUnit 测试）时，似乎永远不会加载属性。相关代码如下：

在 Logic.java 中

```
Properties properties = new Properties();

String val1;
String val2;
...
String last_val;

public void importProperties() {
  try {
    properties.load(new FileInputStream("xxx.properties"));
    val1 = properties.getProperty("val1-property-name");
    ...
    lastVal = properties.getProperty("lastVal-property-name");
  } catch (Exception e) {
    e.printStackTrace();
  }
}

public void test() {
   importProperties();
   //Testing code follows, several method calls referencing val1, val2, etc
} 
```

在 Tests.java 中

```
Logic logic = new Logic();

@Before
public void before() {
    logic.importProperties();
}

@Test
public void test1() {
  logic.testMethod();
}

//More tests 
```

}

我应该在 @Before 方法中导入属性并设置 Logic.java 中的字符串 vals，因为我没有创建 Logic 的新实例（或者我相信），但是当我尝试查找字符串的值时（将字符串值写入日志文件），所述文件中没有文本。我知道日志文件写入有效，因此没有将字符串设置为其属性值。我的属性文件也正确写入，如有必要，我可以提供更多信息。谢谢！

编辑：因此，经过一系列故障排除后，看起来好像确实正在读取属性文件，因为 properties.keys() 调用返回了所有键。但是，它没有将字符串设置为键值。仍在进行故障排除，但任何想法都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:39:01.653

代替

```
properties.load(new FileInputStream("xxx.properties")); 
```

和

```
properties.load(new InputStreamReader(Logic.class.getResource("xxx.properties").openStream(), "UTF8")); 
```

＆ 再次测试。我希望它能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:48:16.420

我认为找不到您的属性文件，这就是整个问题。

而不是创建一个新的 FileInputStream 尝试使用下面的代码行

```
properties.load(this.getClass().getResourceAsStream("xxx.properties")); 
```

# css - 在 IE9 中未加载 CSS 背景图像

> ID：10556731
> 
> 赞同：3
> 
> 时间：2012-05-11T18:30:24.927
> 
> 标签：css, internet-explorer, quirks-mode

我有一张我正试图在 IE9 中加载的图像。我可以让图像以怪癖模式加载，但无法以标准模式加载。它在 Firefox 和 Chrome 中都能很好地呈现。

这是CSS：

```
@charset "UTF-8";
/* 
    Background-Styles 
*/

body {
    margin:0px; padding:0px;
    background-color:#bfbfbf;
    font-family:"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color:#7f7d78;
    font-size:13px;
    line-height:19px;
}
#main {
    background:#bfbfbf;
    /*padding-bottom:30px;*/
    min-height: 715px;
}
#main .container {
    /*background:#6d6f71;*/ 
    background: #343a3f; /* Old browsers */
    background: #6d6f71; /* Old browsers */
    background: url(images/ES_header_background_gradient2.png), -moz-linear-   gradient(-45deg, #6d6f71 0%, #3c3d3e 42%, #3c3d3e 45%, #6d6f71 100%); /* FF3.6+ */
    background: url(images/ES_header_background_gradient2.png), -webkit-gradient(linear, left top, right bottom, color-stop(0%,#6d6f71), color-stop(42%,#3c3d3e), color-stop(45%,#3c3d3e), color-stop(100%,#6d6f71)); /* Chrome,Safari4+ */
    background: url(images/ES_header_background_gradient2.png), -webkit-linear-gradient(-45deg, #6d6f71 0%,#3c3d3e 42%,#3c3d3e 45%,#6d6f71 100%); /* Chrome10+,Safari5.1+ */
    background: url(images/ES_header_background_gradient2.png), -o-linear-gradient(-45deg, #6d6f71 0%,#3c3d3e 42%,#3c3d3e 45%,#6d6f71 100%); /* Opera 11.10+ */
    background: url(images/ES_header_background_gradient2.png), -ms-linear-gradient(-45deg, #6d6f71 0%,#3c3d3e 42%,#3c3d3e 45%,#6d6f71 100%); /* IE10+ */
    background: url(images/ES_header_background_gradient2.png), linear-gradient(-45deg, #6d6f71 0%,#3c3d3e 42%,#3c3d3e 45%,#6d6f71 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6d6f71', endColorstr='#6d6f71',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

.container {
    height: 60px;
    width:1024px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
    display:block;
}
/* 
    Header-Styles 
*/

#header {
    padding-top:20px;
    padding-bottom:20px;
    width:1024px;
    margin:0 auto;
    position:relative;
    margin-bottom:1px;
    height:20px;
}
#logo h1, #logo small {
    margin:0px;
    display:block;
    text-indent:-9999px;
}
#logo {
    background-image:url(images/logo.png);
    background-repeat:no-repeat;
    width:194px;
    height:83px;
}
ul#menu {
    margin:0px; 
    padding:0 0 0 25px;
    right:0px;
}
ul#menu li {
    display:inline;
    margin-right:20px;
}
ul#menu li a {
    text-decoration:none;
    color:#FFFFFF;
    font-family:"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 700;
    font-size:16px;
    /*font-weight:bold;*/
    text-transform:uppercase;
}
ul#menu li p {
    margin: 0px;
}

/* 
    Content-Styles 
*/

.splash{
    width:1024px;
    height: 290px;
    background: url("images/ES_splash3.2.jpg") no-repeat 100% 100%;
    display:block;
    margin:0px;
    padding:0px;
}
.content{
    height: 363px;
    width: 1024 px;
    background-color: #FFFFFF;
    display:block;
}
.splash_content_top{
    height: 135px;
    width: 750px;
    /*background: blue;*/
}
.splash_content_bottom{
    height: 228px;
    width: 1024px;
}

#about{
    width: 135px;
    font-size:26px;
    font-weight:bold;
    color: #e87411;
    padding-top:25px;
    padding-left:25px;
    position:absolute;
}
#about_content{
    float:right;
    width: 575px;
    padding-top:25px;
}

#payroll{
    width:341px;
    min-height: 225px;
    float:left;
}
#hr{
    width:342px;
    min-height: 225px;
    float:left;
}
#staffing{
    width:341px;
    min-height: 225px;
    float:left;
}
#payroll_top{
    background-image: url('images/ES_content_icon_div1.png');
    width:70px;
    height:49px;
    margin-left:15px;
    position:absolute;
}
#hr_top{
    background-image: url('images/ES_content_icon_div2.png');
    width:72px;
    height:48px;
    margin-left:15px;
    position:absolute;
}
#staffing_top{
    background-image: url('images/ES_content_icon_div3.png');
    width:72px;
    height:53px;
    margin-left:15px;
    position:absolute;
}
#payroll_name{
    float: right;
    font-size:24px;
    font-weight:bold;
    margin-right:165px;
    margin-top:18px;
    margin-bottom:15px;
}
#hr_name{
    float: right;
    font-size:24px;
    font-weight:bold;
    margin-right:37px;
    margin-top:18px;
    margin-bottom:15px;
}
#staffing_name{
    float: right;
    font-size:24px;
    font-weight:bold;
    margin-right:153px;
    margin-top:18px;
    margin-bottom:15px;
}
.div_ul{
    margin-left:12px;
    margin-top:60px;
}
.div_ul ul{
    list-style:none;
    margin:0 0 1em 25px;
    padding: 0;
}
.div_ul ul li{
    line-height:1.3em;
    margin: .25em 0;
    padding: 0 0 0 15px;
    background:url(images/ul_dot.png) no-repeat 0 3px;;
}

/* 
    Tag-Styles 
*/

.tagButton {
    border-top: 1px solid #d4d4d4;
    background: #eeeeee; /* Old browsers */
    background: -moz-linear-gradient(top, #eeeeee 0%, #d5d5d5 50%, #c9c9c9 51%, #c9c9c9 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(50%,#d5d5d5), color-stop(51%,#c9c9c9), color-stop(100%,#c9c9c9)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #eeeeee 0%,#d5d5d5 50%,#c9c9c9 51%,#c9c9c9 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #eeeeee 0%,#d5d5d5 50%,#c9c9c9 51%,#c9c9c9 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #eeeeee 0%,#d5d5d5 50%,#c9c9c9 51%,#c9c9c9 100%); /* IE10+ */
    background: linear-gradient(top, #eeeeee 0%,#d5d5d5 50%,#c9c9c9 51%,#c9c9c9 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#c9c9c9',GradientType=0 ); /* IE6-9 */
    padding: 6px 12px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
    -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
    box-shadow: rgba(0,0,0,1) 0 1px 0;
    text-shadow: rgba(0,0,0,.4) 0 1px 0;
    color: #000000;
    font-size: 18px;
    font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    text-decoration: none;
    vertical-align: middle;
    text-align:center;
    width: 147px;
    cursor: pointer;
}

.tag{
    height: 424px;
    width: 291px;
    z-index: 100;
    background: url(images/ES_tag.png);
    position: absolute;
    top:-2px;
    left:750px;
}

#homepageTag{
    margin-left: 58px;
    margin-top: 358px;
    margin-bottom: 21px;
}

#saveForm{
    font-size: 13px;
    width: 100px;
}

/*
    Form
*/

#data{
    width: 500px;
    height: 600px;
    padding: 25px;
}

#data ul{
    list-style: none;
}
#data .error{
    color: red;
}

.form_input{
    width: 175px;
}

/* 
    Block-Styles 
*/
.block {
    border:1px solid #a3a09e;
    background-color:#ffffff;
    margin-bottom:20px;
    position:relative;
}

.image_block {
    height:290px;
    margin-top: 1px;

}
.image_block img {

    margin-left: auto;
    margin-right: auto;
}

#block_featured {
    height: 100px;
}

/*
    Footer-Styles
*/

#footer {
    background: #343434;
    width: 1024px;
    height: 57px;
    margin: 0 auto;
    font-family:"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-size:10px;
}

#footer .container{
    display: inline;
}

.footer_column {
    float:left;
    width:120px;
    margin-right:30px;
}
#footer .long {
    width:610px;
}
#footer h3 {
    color:#e2dddc;
    text-transform:uppercase;
    font-size:10px;
}

.footer_column ul li, .footer_column ul {
    list-style:none;
    margin:0px;
    padding:0px;
}

.social{
    float: left;
    height: 31px;
    width: 31px;
    margin-top:14px;
    margin-right: 15px;
    background:#838383;
    border-radius: 5px;
    -moz-box-shadow: 3px 3px 4px #000;
    -webkit-box-shadow: 3px 3px 4px #000;
    box-shadow: 0px 1px 6px #000;
    /* For IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000');

}

#social1{
    margin-left: 25px;
}

.social_images{
    margin-left: 3px;
    margin-top: 4px;
}

#copyright{
    padding-top:20px;
    padding-left: 810px;
    font-size:13px;
}

.under_footer{
    width: 1024px;
    height: 238px;
    /*background: #656565;*/
    background: #656565; /* Old browsers */
    background: url(images/footer_gradient.png), -moz-linear-gradient(-45deg, #656565 0%, #797979 39%, #797979 54%, #656565 100%); /* FF3.6+ */
    background: url(images/footer_gradient.png), -webkit-gradient(linear, left top,   right bottom, color-stop(0%,#656565), color-stop(39%,#797979), color-stop(54%,#797979),   color-stop(100%,#656565)); /* Chrome,Safari4+ */
    background: url(images/footer_gradient.png), -webkit-linear-gradient(-45deg, #656565 0%,#797979 39%,#797979 54%,#656565 100%); /* Chrome10+,Safari5.1+ */
    background: url(images/footer_gradient.png), -o-linear-gradient(-45deg, #656565 0%,#797979 39%,#797979 54%,#656565 100%); /* Opera 11.10+ */
    background: url(images/footer_gradient.png), -ms-linear-gradient(-45deg, #656565 0%,#797979 39%,#797979 54%,#656565 100%); /* IE10+ */
    background: url(images/footer_gradient.png), linear-gradient(-45deg, #656565 0%,#797979 39%,#797979 54%,#656565 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#656565',  endColorstr='#656565',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
    margin-top: 12px;
}

/*
    Clear
*/

.clear {
    clear: both;
} 
```

这是HTML：

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Title</title>
<link href="main.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="js/fancybox/jquery.fancybox-1.3.4.css"    type="text/css" media="screen" />

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> 
<![endif]-->
<!--<script type="text/javascript" src="js/additional-methods.min.js"></script>-->
<script type="text/javascript" src="js/fancybox/jquery.fancybox-1.3.4.js"></script>
</head>

<body>
<div id="main">

    <div class="container">

        <div id="header">

            <ul id="menu">
                <li><a>Payroll</a></li>
                <li><a>Benefits</a></li>
                <li><a>Accounting</a></li>
                <li><a>Human Resources</a></li>
                <li><a>Risk Management</a></li>
                <li><a>Staffing</a></li>
            </ul>

            <div class="tag">
                <a id="inline" href="#data"><input id="homepageTag" class="tagButton" value="Email Us"/></a>
            </div>

        </div>

        <div class="splash"></div>
        <div class="content">
            <div class="splash_content_top">
                <div id="about">
                    About Us
                </div>
                <div class="clear"></div>
                <div id="about_content">
                    From finding you the right employees to processing paychecks, Employ Source is your<br>
                    professional employment partner.  We handle payroll, benefits, accounting, HR, risk<br>
                    management and staffing support for small to medium sized businesses.  It's our personal<br> 
                    dedication to one-on-one customer support that makes Employ Source the right choice for all<br> 
                    your employment solutions.
                </div>
            </div>
            <div class="clear"></div>
            <div class="splash_content_bottom">
                <div id="payroll">
                    <div id="payroll_top"></div>
                    <div id="payroll_name">Payroll</div>
                    <div class="div_ul">
                        <ul>
                            <li>Dedicated payroll representatives</li>
                            <li>Certified payroll processing</li>
                            <li>Detailed management reports</li>
                            <li>State and federal deposits and filings</li>
                        </ul>
                    </div>
                </div>
                <div id="hr">
                    <div id="hr_top"></div>
                    <div id="hr_name">Human Resources</div>
                    <div class="div_ul">
                        <ul>
                            <li>Customized employee handbooks</li>
                            <li>Pre-employment screenings</li>
                            <li>New hire processing</li>
                            <li>Employment law compliance and training</li>
                        </ul>
                    </div>
                </div>
                <div id="staffing">
                    <div id="staffing_top"></div>
                    <div id="staffing_name">Staffing</div>
                    <div class="div_ul" id="rightside">
                        <ul>
                            <li>Job placements for employees and employers</li>
                            <li>Temp, temp-to-hire and permanent placements</li>
                            <li>Resume assistance for employees seeking work</li>
                            <li>Joint management options for employers</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--<div class='image_block'>
            <img src="images/ES_splash2.jpg"/>
        </div>
        <div class='image_block'>
            <img src="images/ES_content.jpg"/>
        </div>-->

    </div>

</div>

<div id="footer">
    <div class="container">
        <div id="social1" class="social"><img class="social_images" src="images/linkdin.png"/></div>
        <div class="social"><img class="social_images" src="images/facebook.png"/></div>
        <div class="social"><img class="social_images" src="images/twitter.png"/></div>    
    </div>
    <div id="copyright">
    &#169; Copyright 
    </div>
    <div class="clear"></div>
    <div class="under_footer">

    </div>
</div>
<div style="display:none">
    <div id="data">

        <form id="es_contact_form" method="post" action="" onSubmit="return validateCaptcha()">
        <div class="form_description">
            <h2>Contact </h2>
            <p>Thank you for contacting Employ Source!</p>
        </div>                      
        <ul >

            <li id="li_1" >
                <label class="description" for="name">Name </label>
                <div class="form_input">
                    <input id="name" name="name" class="removeval" type="text" maxlength="255" value=""/> 
                </div> 
            </li>       
            <li id="li_2" >
                <label class="description" for="phone">Phone </label>
                    <div class="form_input">
                        <input id="phone" name="phone" class="removeval" type="text" maxlength="255" value=""/> 
                    </div> 
            </li>       
            <li id="li_3" >
                <label class="description" for="email">Email </label>
                    <div class="form_input">
                        <input id="email" name="email" class="removeval" type="text" maxlength="255" value=""/> 
                    </div> 
            </li>       
            <li id="li_4" >
                <label class="description" for="remail">Re-enter Email </label>
                    <div class="form_input">
                        <input id="remail" name="remail" class="removeval" type="text" maxlength="255" value=""/> 
                    </div> 
            </li>       
            <li id="li_5" >
                <label class="description" for="comments">Comments/Questions </label>
                    <div class="form_input">
                        <textarea id="comments" name="comments" class="removeval"></textarea> 
                    </div> 
            </li>
            <li>
                <label class="description" for="comments">&nbsp;</label>
            <script type="text/javascript"
               src="http://www.google.com/recaptcha/api/challenge?k=">
            </script>
            <noscript>
               <iframe src="http://www.google.com/recaptcha/api/noscript?k="
                   height="300" width="500" frameborder="0"></iframe><br>
               <textarea name="recaptcha_challenge_field" rows="3" cols="40">
               </textarea>
               <input type="hidden" name="recaptcha_response_field"
                   value="manual_challenge">
            </noscript>
            <p style="color: red;" id="captchaStatus">&nbsp;</p>

            </li>

            <li class="buttons">
                <input type="hidden" name="form_id" value="408860" />

                <input id="saveForm" class="tagButton" type="submit" name="submit" value="Submit" />
            </li>

        </ul>
    </form>

    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
    jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
    }, "Please specify a valid phone number");

    var validator = $("#es_contact_form").validate({
        rules: {
            name: "required",
            phone: {required:true, phoneUS:true},
            email: {required:true, email:true},
            remail: {required: true, email: true, equalTo:'#email'},
            comments: "required"
        },
        messages: {
            name: " Required field, please enter!",
            phone: {required:' Required field, please enter!', phoneUS:' Please enter a valid phone number'},
            email:{required:' Required field, please enter!', email:' Not a valid email address, please re-enter!'},
            remail:{required:' Required field, please enter!', email:' Not a valid email address, please re-enter!', equalTo:"Please enter the same email address!"},
            comments: " Required field, please enter!"
        }
    });
    $("a#inline").fancybox({
        onClosed: function(){
            validator.resetForm();
            $("#captchaStatus").html("&nbsp;");
            $('.removeval').val('').removeClass('error');
        }
    });
});
function validateCaptcha(){
        challengeField = $("input#recaptcha_challenge_field").val();
        responseField = $("input#recaptcha_response_field").val();
        //alert(challengeField);
        //alert(responseField);
        //return false;
        var esform = $('#es_contact_form').serialize();
        var html = $.ajax({
        type: "POST",
        url: "scripts/ajax.recaptcha.php",
        data: esform,//"recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" + responseField,
        async: false
        }).responseText;

        if(html == "success")
        {
            alert('Thank you for contacting Employ Source!');
            return true;
        }
        else
        {
            $("#captchaStatus").html("Your captcha is incorrect. Please try again");
            Recaptcha.reload();
            return false;
        }
    }
</script>

</body>
</html> 
```

这是我正在使用的 DOCTYPE：

```
<!doctype html> 
```

同样，这将毫无问题地在 FF、Chrome 和 Safari 中呈现。当我尝试在 IE 9 中查看它时，它不会出现，但是当我在 quirks 模式下查看它时，它会出现。

我确定这是我忽略的东西，但过去几个小时我一直在盯着这个问题无济于事。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:16:14.857

尝试使用 svg 而不是 IE9 的过滤器。我使用这个方便的工具[colorzilla.com/gradient-editor](http://colorzilla.com/gradient-editor)确保勾选 IE9 支持框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T19:09:36.593

I saw a problem like this here few days ago : [Banner isn't showing up in IE7 and IE8](https://stackoverflow.com/questions/10435468/banner-isnt-showing-up-in-ie7-and-ie8#comment13471150_10435468)

What I suggest is to save the file in PNG instead. If it PNG already, try JPEG. Just so you see if the picture itself is the problem.

# javascript - 使用 JavaScript 的动态表生成器

> ID：10556735
> 
> 赞同：1
> 
> 时间：2012-05-11T18:30:38.260
> 
> 标签：javascript, html-table

我尝试根据用户输入动态生成表格。这个想法是让用户插入行数并自动生成html。

我已经编写了一些代码并使用 jslint 对其进行了调试，但是它不起作用，尽管在 jslint 中没有明显的错误。我究竟做错了什么？

代码如下：

```
<body style="background-color: #777; color: ddd;">
    <div style="margin: 20px;">
        <h1>Program de calculare determinant matrice de orice grad.</h1>
    </div>
    <div>
        Introduceti gradul matricii
        <input id="grad" type="text" value="" onChange="readGrad ()" >            
        <input style="margin-top: 20px;" type="button" name="Calculate determinant" value="Generati tabel" onClick="genTable (k,k)">
    </div>
    <form name="Det Matrice">
        <div style="margin-top: 100px; float: left; width: 100%;">
            Introduceti valorile:
            <table style="text-align: center;">
                <tr id="container"></tr>
            </table>
            <br>
        </div>
        <div style="float: left; margin-top: 20px;">            
            <input type="button" name="Calculate determinant" value="Calculati determinant" onClick="calcDet (k,k);">
        </div>
    </form>    
</body>

<script>
function readGrad() {
    var k = parseInt(document.getElementById("grad").value);
    if (isNaN(k)) {
        alert('Gradul introdus nu este intreg, reintroduceti gradul matricii');
    }
}

function genTable(i, j) {
    var myTable = '<TABLE BORDER="1">\n <TBODY>\n';
    for (i = 0; i < k; i++) {
        myTable += '  <TR>\n';
        for (j = 0; j < k; j++) {
            myTable += '    <TD> @ </TD>\n';
        }
        myTable += '  </TR>\n';
    }
    myTable += ' </TBODY>\n</TABLE>\n';
    document.getElementById('container').innerHTML = myTable;
}
</script> 
```

也可以在这里查看：http: [//jsfiddle.net/pYc4P/18/](http://jsfiddle.net/pYc4P/18/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:38:21.100

而不是`onClick="calcDet (k,k);">`做`onClick="genTable(k,k);">`

然后 ：

```
var k;
function readGrad() {
    k = parseInt(document.getElementById("grad").value);
    if (isNaN(k)) {
        alert('Gradul introdus nu este intreg, reintroduceti gradul matricii');
    }
} 
```

代替 ：

```
 <table style="text-align: center;">
        <tr id="container"></tr>
    </table> 
```

做`<div id="container"></div>`

演示：http: [//jsfiddle.net/pYc4P/20/](http://jsfiddle.net/pYc4P/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:38:46.507

**使用 jQuery！**

如果您不知道 jQuery 是什么，它是一个用于简化跨浏览器 html 编辑和其他强大功能的 javascript 库。您不必再担心 html 字符串操作了。我知道您是用 javascript 编写代码的，但这里是 jQuery 代码，可以按照您的要求进行操作。

```
<body>
    <input id="numtxt"/>
    <button id="tableGenerateBtn">Submit</button>
    <table id="mainTable">
    </table>

    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#tableGenerateBtn').click(function()
            {
                //Get value stored in textbox and make sure it's a number
                var square = $('#numtxt').val();
                if (square != Number.NaN)
                {
                    var tableBody = $(document.createElement('tbody'));    
                    var row = $(document.createElement('tr'));

                    //Create a prototype of the type of cell we want
                    //In each cell we shall display the text "Cell"
                    var cell = $(document.createElement('td')).html('Cell');    

                    for (var i = 0; i < square; i++)
                    {
                        var newRow = row.clone();
                        tableBody.append(newRow);
                        for (var j = 0; j < square; j++)
                            newRow.append(cell.clone());
                    }
                    $('#mainTable').append(tableBody);
                }
            });
        });
    </script>
</body> 
```

将来，将 css 样式应用于新元素是小菜一碟。

```
//If you had a css class MyStyle that you wanted to add to all cells
//it's as easy as changing
var cell = $(document.createElement('td')).html('Cell'); 
//to
var cell = $(document.createElement('td')).addClass('MyStyle').html('Cell'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T22:19:26.343

试试[Jnerator](http://jnerator.com)

```
function updateTable() {
    var rows = 0 + tagRows.value;
    var cols = 0 + tagCols.value;

    var jtable = $j.table({ class: 'my-table' });
    for (var i = 0; i < rows; i++) {
        var jrow = $j.tr();
        for (var j = 0; j < cols; j++) {
            jcol = $j.td('row: ' + i + '; col: ' + j);
            jrow.child.add(jcol);
        }
        jtable.child.add(jrow);
    }
    tagContainer.innerHTML = jtable.html();
} 
```

参见示例： http: [//jsfiddle.net/jner​​ator /PCrKZ/](http://jsfiddle.net/jnerator/PCrKZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:36:06.453

变量“k”未在 genTable() 中定义。Javascript 具有函数范围，因此在 readGrad() 中定义的“k”在 genTable() 中不可用。

# javascript - 如何在咖啡脚本中预处理或包含咖啡脚本？

> ID：10556736
> 
> 赞同：0
> 
> 时间：2012-05-11T18:30:40.307
> 
> 标签：javascript, coffeescript

我正在接手我同事的咖啡脚本项目。他将所有类都编码在一个咖啡脚本文件中。

我喜欢将所有类分离到它们自己的文件中。我发现我可以分离文件然后将类导出到“窗口”对象。该方法的问题在于咖啡脚本会生成单独的 javascript 文件。

有没有办法分离咖啡脚本文件，然后将它们编译成一个 js 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:39:00.723

是的。Coffescript 编译器有一个专门`--join`针对这种情况的命令。你可以这样做：

```
coffee --join project.js --compile myCoffeeFolder/*.coffee 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T11:24:15.023

您可能希望将您的咖啡脚本文件编译成单独的 js 文件，以快速检查生成的 js 代码是否符合您的期望。在这种情况下，您可以在第二步中使用[uglifyjs](https://github.com/mishoo/UglifyJS)将它们编译成一个文件，甚至将其缩小（以加快加载速度等）。

# windows - 安装服务器（在 Windows 上）和客户端工具（在 Windows、Linux 和 Apple 上）以进行版本控制

> ID：10556738
> 
> 赞同：1
> 
> 时间：2012-05-11T18:30:45.003
> 
> 标签：windows, linux, macos, tortoisesvn, visualsvn-server

我在 Windows Server 2008 上安装并配置了 Visual SVN 服务器。我还能够在 Windows 上安装 Tortoise SVN 作为我的客户端工具。我想要一个类似于 Tortoise SVN 的用于 Linux 和 Apple 操作系统的客户端工具。

[http://www.visualsvn.com/server/licensing/](http://www.visualsvn.com/server/licensing/)

**与这些安装相关的几个问题......**

(1) 推荐的存储库协议是什么，它们之间有什么区别（即：https、svn等）？

(2) Linux 或 Apple 操作系统是否需要特定协议？

(3) 有哪些推荐的 Linux 和 Apple 客户端 SVN 工具连接到我的 Visual SVN 服务器？现在，我只在 Windows 上配置了 Tortoise SVN 作为我的客户端工具，用于签入/签出源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:10:40.373

1.  VisualSVN 服务器仅支持 HTTP(S) 访问。建议使用 HTTPS，因为它是安全的。

2.  不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:35:54.190

对于 Linux，请尝试[http://rabbitvcs.org](http://rabbitvcs.org)。

对于 MacOS，XCode 应该支持 SVN。也请查看此链接： [http ://alternativeto.net/software/tortoisesvn/?platform=mac](http://alternativeto.net/software/tortoisesvn/?platform=mac)

假设您也在开发，Eclipse SVN 插件在所有平台上都是流行的最爱。

# python - 带有hg转换的神秘用户名

> ID：10556739
> 
> 赞同：2
> 
> 时间：2012-05-11T18:30:56.327
> 
> 标签：python, svn, mercurial, mercurial-convert

我有一个克隆的 mercurial 存储库和一个签出的 subversion 存储库。

当我签出 subversion repo 时，我选择将密码保存为纯文本。

我想将 mercurial repo 导入 subversion，所以我使用 mercurial 的 convert 扩展。

```
hg convert --debug --dest-type svn hgrepo svnrepo 
```

在第一次提交之前一切看起来都很好：

```
Password for '"Michael': 
```

它停下来并要求输入与用户名“迈克尔”相对应的密码，但我的用户名是迈克尔。

谁能告诉我它从哪里提取这个用户名，或者我如何覆盖它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:17:20.413

检查你的 ~/.hgrc 文件或 .hg/hgrc 文件，第二个应该在 repo 中，第一个应该在你的主目录中。这些文件是 mercurial 读取的配置和用户信息。

[http://www.selenic.com/mercurial/hgrc.5.html](http://www.selenic.com/mercurial/hgrc.5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:21:38.233

你检查过 mercurial.ini

```
[ui]
username=Xyz 
```

# ant - 如何根据需要 p4add 或 p4edit 文件？

> ID：10556744
> 
> 赞同：0
> 
> 时间：2012-05-11T18:31:20.743
> 
> 标签：ant, perforce

我正在为 Ant 使用 Perforce 任务，并且如果 Perforce 不知道它或者如果它不知道它，我想要一个文件。

我可以：

```
<p4add changelist='${p4.change}' failonerror='false'>
    <fileset file='my-file'/>
</p4add>
<p4edit changelist='${p4.change}'>
    <fileset file='my-file'/>
</p4edit> 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:18:30.197

```
<trycatch property='my-file-is-new'><try>
    <p4edit view='my-file'/>
</try><catch>
    <touch file='my-file'/>
    <p4add>
        <fileset file='my-file'/>
    </p4add>
</catch></trycatch>

<if><isset property="my-file-is-new"/><then>
    <echo message="p4 added my-file"/>
</then><else>
    <echo message="p4 edited my-file"/>
</else></if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T01:56:42.917

p4fstat 任务可以根据存储库中文件的状态进行过滤。这似乎是一种更简洁的方法，但可能需要更多行的 Ant 脚本。

# c# - 用户集合？找不到dll

> ID：10556748
> 
> 赞同：0
> 
> 时间：2012-05-11T18:31:52.443
> 
> 标签：c#

我添加了使用 Microsoft.SharePoint.Client；

但是还是报错，是不是我需要下载一些dll？

这是错误：

> 命名空间“Microsoft”中不存在类型或命名空间名称“SharePoint”（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:34:08.853

> （您是否缺少程序集参考？）

这是重要的部分。你说你`using`为命名空间添加了一个语句，但是你添加了一个程序集引用吗？

首先，您需要 DLL。接下来，右键单击项目的“引用”部分（解决方案资源管理器窗口），单击“添加引用”，然后浏览到 DLL。添加它，你应该可以开始了。

# css - DIV 宽度在 IE 中可以，但在 Chrome 中不起作用

> ID：10556750
> 
> 赞同：1
> 
> 时间：2012-05-11T18:32:08.560
> 
> 标签：css, internet-explorer, google-chrome, html

我有一个具有以下 CSS 属性的包装器 DIV：

```
height: auto !important;
margin: 0 auto -125px;
min-height: 100%; 
```

在那个 DIV 里面，我还有另外两个 DIV。第一个是与页面左侧对齐的菜单，具有以下 CSS 属性：

```
float: left;
width: 160px; 
```

菜单右侧应显示页面内容。这是另一个DIV。如果我只是在其中输入一些内容（一些静态文本），一切都很好（即，它出现在菜单的右侧并跨越屏幕的其余部分）。但是，如果我允许 Kendo 网格填充它，它会破坏菜单，并且要么占据整个屏幕（如果我不使用任何 CSS 属性），甚至延伸到菜单下方（即使它只包含一行数据），或者它显示为菜单右侧的一个很小的区域，具体取决于我将“显示”设置为什么。

这个 DIV 在 IE 中显示得很好（即，它出现在菜单的右侧并占据了屏幕空间的剩余部分，与浏览器宽度无关——当我调整浏览器大小时，网格列也会调整大小）。我如何让它在 Chrome 中也能正常工作？

**更新：**

我删除了 IE 的浏览器数据，结果发现这在 IE 中也被破坏了。

**更新：**

这是一些代码和一些屏幕截图：

```
 <body>

        <div class="wrapper">

            <div id="sidebar" class="hidden">
                <ul id="sidebarItems">
                    <li><a href="/Labor/1234" id="navMenuItemLabor">Labor</a></li>
                    <li><a href="/Sales/1234" id="navMenuItemSales">Sales</a></li>
                    <li><a href="/Quotes/1234" id="navMenuItemQuotes">Quotes</a></li>
                    <li><a href="/Price/1234" id="navMenuItemPrice">Price</a></li>
                    <li><a href="/PurchaseOrder/1234" id="navMenuItemPurchaseOrder">Purchase Order</a></li>
                    <li><a href="/Catalog/1234" id="navMenuItemCatalog">Catalog</a></li>
                </ul>
            </div>

<div id="grid"></div>

<script type="text/javascript"> 
    $("#grid").kendoGrid({
        dataSource: {
            type: "json",
            transport: {
                read: {
                    url: '/Sales/GetSalesHistory/1234',
                    dataType: "json",
                    type: "GET",
                    data: { id: "1234" }
                }
            },
            pageSize: 15,
            schema: {
                data: "data",
                total: "total"
            }
        },
        columns: [
            { field: "DateString", title: "Date" }
        ],
        pageable: true,
        sortable: true
    });
</script>

<script type="text/javascript"> 

    // Show the side menu.
    $("#sidebar").removeClass("hidden").addClass("visible");

    // Highlight menu item for current page.
    $("#sidebar a").removeClass("SelectedNavItem").addClass("UnselectedNavItem");
    $("#navMenuItemSales").removeClass("UnselectedNavItem").addClass("SelectedNavItem");

</script>

            <div class="push"></div>            
        </div>

        <script src="/Scripts/jquery.validate.min.js" type="text/javascript"> </script> 
        <script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"> </script> 

        <script type="text/javascript">
            $("#topmenu").kendoMenu({
                dataSource:
                    [
                        {
                            text: "Home",
                            url: "/"
                        },
                        {
                            text: "Search",
                            url: ""
                        },
                        {
                            text: "Admin",
                            url: ""
                        }
                    ]
            });

            $("div.detailsMenuItem").hover(
                function ()
                {
                    $(this).addClass("HoverSidebar");
                },
                function ()
                {
                    $(this).removeClass("HoverSidebar");
                }
            );
        </script>

    </body>
</html> 
```

**截图**

它应该看起来如何（除了自动跨越可用的屏幕宽度）——这个 CSS 是：向左浮动，宽度 500

![向左浮动，宽度 500](../Images/3c69e410e09600eeada72b7d34ff9bbb.png)

这里是：向右浮动，宽度 500

![向右浮动，宽度 500](../Images/767818b79e3574e6c3b0724d5582d908.png)

这是：向左浮动

![向左飘浮](../Images/714d56d40398298da1cfd8af13647132.png)

如果我没有指定任何属性（如果我只输入一点文本，这在没有网格的情况下也可以工作）：

![网格的 DIV 中没有 CSS](../Images/31b741ead8fad71160733d03e9eeba8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:18:48.790

`display:table`为我解决了 Chrome 问题。正在使用 display:inline 作为容器 div。在 Chrome、IE 和 FF 中正确显示的两个并排显示表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:51:45.573

1）你很困惑:)

2）试试这个...

```
<div id="wrapper">

    <div class="menu">
      your menu
    </div>

    <div class="content">
      your content
    </div>

</div> 
```

CSS：

```
#wrapper {display: table; width: 100%;}
.menu, .content {display: table-cell;}
.menu {width: 160px;}
.content {width: 500px;} 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T15:46:47.150

使用这个语法

```
.menu, .content {display: table-cell;} 
```

# android - android getsharedPreferences 不确定如何显示隐藏其他活动

> ID：10556756
> 
> 赞同：1
> 
> 时间：2012-05-11T18:32:25.290
> 
> 标签：android, sharedpreferences

我决定使用 sharedPreferences，这样我就可以在我的活动首选项中存储一个切换按钮的值。在我的主要活动中，当用户单击 Preferences 活动中的 twitter 按钮时，我想隐藏一个 twitter 按钮。

```
 private SharedPreferences prefs;
private String prefName = "MyPref";
private ToggleButton timer, twitter;
// this is the key used to set the timer to visible or hidden
private static final String TIMER_KEY = "timekey";
private static final String TWITTER_KEY= "tweet";
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preferences);
        timer = (ToggleButton)findViewById(R.id.timer_pref);
        twitter =(ToggleButton)findViewById(R.id.twitter_pref);
        timer.setChecked(true);
        twitter.setChecked(true);
       // Toast.makeText(Preferences.this, timer, Toast.LENGTH_SHORT).show();
        Button b = (Button) findViewById(R.id.home_btn);
        b.setOnClickListener(new View.OnClickListener()
        {
        // now add the new screen

            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                // get the shared perference data

                Intent i = new Intent(Preferences.this, AndroidGUIActivity.class);
                startActivity(i);

            }
        });

         twitter.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            prefs = getSharedPreferences("MyPref", 0 );
                SharedPreferences.Editor editor = prefs.edit();

                if (timer.isChecked() == true)
                {
                editor.putBoolean("twitterButtonStatus", true);
                }
                else if(timer.isChecked() == false)
                {
                    editor.putBoolean("twitterButtonStatus", false);    
                }

                // now save the value that is passed to the editor.putBoolean function
                // the twitter data hase been saved
                editor.commit();

                // now store the variable so that it can be copied to another activity
                Bundle b = new Bundle();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:28:13.910

无需通过使用意图的活动来转移偏好。

您可以从任何活动中访问您的“共享”首选项。

您只需将带有字符串键的按钮状态放在里面：

```
SharedPreferences settings = getSharedPreferences("MyPrefs", 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("twitterButtonStatus", buttonStatus); 
```

在另一个活动中，您使用字符串键（“twitterButtonStatus”）检索这些首选项：

```
SharedPreferences settings = getSharedPreferences("MyPrefs", 0);
boolean buttonStatus = settings.getBoolean("twitterButtonStatus", false);  // second param is default! 
```

见：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

编辑：

您现在正在保存 SharedPrefs，要让它们恢复并设置您的 Button Gone，请执行以下操作：

```
SharedPreferences settings = getSharedPreferences(prefName, 0);
boolean buttonStatus = settings.getBoolean(TWITTER_KEY, true);  //2nd is default
if(buttonstatus==false) twitter.setVisibility(View.GONE); 
```

# ruby - 将 Ruby 链接到加密库

> ID：10556761
> 
> 赞同：0
> 
> 时间：2012-05-11T18:32:45.883
> 
> 标签：ruby, linux

```
ruby -e 'require "digest/md5"' 
```

抛出错误：

```
<internal:lib/rubygems/custom_require>:29:in `require': libcrypto.so.0.9.8: cannot open shared object file: No such file or directory - /opt/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest/md5.so (LoadError)
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from -e:1:in `<main>' 
```

知道如何将 Ruby 链接到加密库吗？

尝试在 QNAP NAS 服务器上运行 Ruby on Rails。

操作系统是ARM Linux。

**编辑：**

试图使用

```
export LD_LIBRARY_PATH=/share/MD0_DATA/.qpkg/Optware/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest:$LD_LIBRARY_PATH
export RUBYLIB=/share/MD0_DATA/.qpkg/Optware/local/lib/ruby/1.9.1/armv5tel-linux-eabi/digest:$RUBYLIB 
```

但我不知道我是否做得对。

**解决了**

```
ln -s /share/MD0_DATA/.qpkg/Optware/lib/libcrypto.so.0.9.8 /lib/libcrypto.so.0.9.8 
```

成功了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:10:53.400

按照运行提供的说明`rvm requirements`为我解决了这个问题。

# javascript - window.open 具有相同域的跨脚本？

> ID：10556762
> 
> 赞同：0
> 
> 时间：2012-05-11T18:32:48.450
> 
> 标签：javascript

我有一些 javascript 代码可以将数据传递到 Intranet 站点的弹出窗口。然而，IE9 声称它是跨脚本，即使它是同一个域。奇怪的是，如果我将代码从 window.open 更改为 window.location，一切都很好。但是，它必须是一个弹出窗口。

此外，我传递给弹出窗口的数据包含 html 代码。

我尝试使用 javascript 的转义和 encodeURI，但没有任何运气。

任何帮助将不胜感激。

```
EDIT: code 
JQuery.ajax({
...
...
...
success
{
 window.open("mydomain/mypage?data="+data,"Test","width=350,height=350");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:57:22.683

参见 jsfiddle [http://jsfiddle.net/DKehT/1/](http://jsfiddle.net/DKehT/1/)

你甚至不需要编码。编码是自动完成的

```
var a="<htm>"
window.open("http://mydomain.com/mypage?data="+a,"Test1","width=350,height=350"); 
```

# validation - ASP.NET MVC 2：模型验证 - 已使用用户名？

> ID：10556767
> 
> 赞同：2
> 
> 时间：2012-05-11T18:33:15.873
> 
> 标签：validation, asp.net-mvc-2, entity-framework-4

我正在关注 Scott Gu 的博客：[这里](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

在他的博客中，他谈到了客户端和服务器端验证。

如何验证用户名是否已被使用并将其作为验证错误消息显示给用户？

在 Scott 的博客中，这与验证是否`Title`是唯一的相同：

```
public class Dinner
{
    public int DinnerID { get; set; }

    [Required(ErrorMessage = "Please enter a Dinner Title")]
    [StringLength(20, ErrorMessage = "Title is too long")]
    public string Title { get; set; }

    [Required(ErrorMessage = "Please enter the Date of the Dinner")]
    public DateTime EventDate { get; set; }

    [Required(ErrorMessage = "Please enter the location of the Dinner")]
    [StringLength(30, ErrorMessage = "Address is too long")]
    public string Address { get; set; }

    [Required(ErrorMessage = "Please enter your email address")]
    [RegularExpression(".+\\@.+\\..+", ErrorMessage = "Please enter a valid email address")]
    public string HostedBy { get; set; }

    public virtual ICollection<RSVP> RSVPs { get; set; }
} 
```

我的第一个猜测是，这是在模型控制器中完成的，这里：

```
 //
    // POST: /Home/Create

    [HttpPost]
    public ActionResult Create(Dinner dinner) 
    {
        if (ModelState.IsValid) 
        {
            nerdDinners.Dinners.Add(dinner);
            nerdDinners.SaveChanges();

            return RedirectToAction("Index");
        }

        return View(dinner);
    } 
```

并且由于`Title`存储在数据库服务器中，这将是服务器端验证。

我知道如何检查 是否`Title`是唯一的，但我不知道如何使验证消息出现在视图中，就像使用`[Required]`or之类的声明一样`[StringLength()]`。例如，这是我可以检查唯一性的方法：

```
 [HttpPost]
    public ActionResult Create(Dinner dinner) 
    {
        if (ModelState.IsValid) 
        {
            foreach (var existingDinner in nerdDinners.Dinners)
            {
                if(existingDinner.Title == dinner.Title)
                {
                    **// TODO: display validation error message?**
                }

            }

            nerdDinners.Dinners.Add(dinner);
            nerdDinners.SaveChanges();

            return RedirectToAction("Index");
        }

        return View(dinner);
    } 
```

使用我的想象力和一根魔杖，我想创建一个名为的新声明`[TitleIsUnique]`，其执行方式与其他验证声明一样。

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:20:31.473

您可以创建一个如上所述的自定义属性并使用`IValidateObject`，但我更喜欢将我的错误添加到我的应用程序的一个层中的 ModelState 中。

为此，您可以使用[ModelState.AddModelError](http://msdn.microsoft.com/en-us/library/dd470776)

如果您使用`ModelState.AddModelError("Title", "Title must be unique");`它将向该`Title`字段添加错误。

如果您使用`ModelState.AddModelError("*", "Title must be unique");`它将为页面添加一般错误消息。

```
 [HttpPost]
  public ActionResult Create(Dinner dinner) 
  {
      if (ModelState.IsValid) 
      {
          if(nerdDinners.Dinners.Any(d => d.Title == dinner.Title))
          {
              ModelState.AddModelError("Title", "The title is not unique");
              return View(dinner);
          }

          nerdDinners.Dinners.Add(dinner);
          nerdDinners.SaveChanges();

          return RedirectToAction("Index");
      }

      return View(dinner);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:32:39.837

您可能正在考虑实现您自己的从 CustomAttribute 派生的属性。看看这篇博[文 http://blogs.msdn.com/b/adonet/archive/2011/05/27/ef-4-1-validation.aspx](http://blogs.msdn.com/b/adonet/archive/2011/05/27/ef-4-1-validation.aspx) - 它展示了如何验证唯一性。在帖子中，IValidatableObject 接口用于执行验证，但您应该可以通过创建 CustomAttribute 来实现。

# powershell - 如何将文件从旧文件夹结构移动到新文件夹？

> ID：10556768
> 
> 赞同：2
> 
> 时间：2012-05-11T18:33:22.520
> 
> 标签：powershell, batch-file, path, cmd, cmdlets

我想修改我现有的文件夹结构。我有一个按以下方式组织的文件树：

```
Client Name
  State/Province
    City
      Order Number 
```

但是我已经修改了它，在订单号之前添加一个地址，用连字符分隔，如下所示：

```
Client Name
  State/Province
    City
      Order Number - Address 
```

我使用生成原始文件夹的宏创建了新的文件夹结构，我认为这比重命名现有文件夹要容易得多。

所以现在我想将空文件夹上传到我的服务器，但在此之前，我想从所有旧结构中获取文件并将它们放入新结构中。

简单地说，我正在尝试编写一个脚本以将原始层次结构中的文件夹名称与包含原始名称和地址的新层次结构相匹配，然后将原始文件夹中的文件复制到新结构中名称相似的文件中。

我该怎么做？VBA、Powershell、批处理命令？我不是很精通PS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:41:37.367

将[foreach](http://technet.microsoft.com/en-us/library/ff730944)循环与[Get-ChildItem](http://technet.microsoft.com/en-us/library/ff730953)、 [Copy-Item](http://technet.microsoft.com/en-us/library/ee692702)和[Test-Path](http://technet.microsoft.com/en-us/library/ff730955) Powershell [cmdlet](http://technet.microsoft.com/en-us/library/bb648597)一起使用：

```
#Get all address subfolders
$addr_folders = Get-ChildItem c:\"Client Name"\State/Province\City\ -recurse | Where-Object {$_.PSIsContainer -eq $True}

#Loop through all address subfolders
foreach ($address in $addr_folders)
{
  #Copy contents from existing subfolder path to new folder
  if (Test-Path c:\"Client Name"\State/Province\City\"Order Number"\$address)
    {
   Copy-Item c:\"Client Name"\State/Province\City\"Order Number" c:\"Client Name"\State/Province\City\"Order Number - " $address
    }
} 
```

# php - MAMP的php交互模式坏了？

> ID：10556771
> 
> 赞同：5
> 
> 时间：2012-05-11T18:33:41.907
> 
> 标签：php, mamp

我在 Mac OS X Lion 10.7.3 上使用 MAMP 版本 2.0.5 (2.0.5)。当我尝试使用 php 的交互模式时

```
/Applications/MAMP/bin/php/php5.3.6/bin/php -a 
```

它显示`Interactive mode enabled`然后挂起。没有命令起作用。

这个[论坛帖子](http://forum.mamp.info/viewtopic.php?f=2&t=7878)说其他人发现它坏了。有没有人找到解决办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:13:15.553

这很可能是由于您使用的 PHP 没有使用 readline 支持 (--with-readline) 编译造成的。由于库问题或许可问题，某些发行版无法使用该选项进行编译，例如 Debian - [http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=576218](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=576218)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T19:00:24.083

它工作正常。

看到后输入`Interactive mode enabled`：

```
<?php
echo "test\n";
?> 
```

然后按 ctrl+d。

`test`将被打印。

另见这个问题：[mac os php intratactive mode has no prompt](https://stackoverflow.com/questions/4836915/mac-os-php-intratactive-mode-has-no-prompt)

要使用 OS X 附带的默认`php`版本，您可以在终端中执行此操作：

```
mv /Applications/MAMP/bin/php/php5.3.6/bin/php /Applications/MAMP/bin/php/php5.3.6/bin/php.bak
ln -s /usr/bin/php /Applications/MAMP/bin/php/php5.3.6/bin/php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T19:01:25.353

你必须安装 php5-readline 扩展

```
sudo apt-get install php5-readline 
```

# c++ - 如何在微控制器上运行 opencv？

> ID：10556772
> 
> 赞同：3
> 
> 时间：2012-05-11T18:33:43.110
> 
> 标签：c++, opencv, microcontroller

我对电子领域和控制器知之甚少。但是我想知道如何将opencv程序与红绿灯结合起来？我知道答案是微控制器，但我只知道有一个编译器 AVR 可以将 C 编译为十六进制，然后使用微控制器。

但是 OpenCV（我认为我不会在 C 上运行）是高级别的，可能不适用于 AVR。

那么我应该怎么做才能将机器视觉程序（通过 OpenCV 和 C++）和交通红灯的计时器结合起来呢？

*   由于某些原因，更改我的编程语言和库对我来说非常困难。
*   我的程序必须是实时的。
*   如果有另一个系统（不是控制器和......），它的成本并不高并且可以运行 opencv 程序，它可以被我使用。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T12:38:35.630

答案不是微控制器。太低一级了。获取带有 DSP（数字信号处理器）的 ARM SoC（片上系统）。它们很常见。例如，树莓派中使用的 BCM2835。根据 Broadcom 的说法，它应该可以处理 220 兆像素/秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:52:26.507

我最初将此问题报告为[可能重复](https://stackoverflow.com/questions/10348075/opencv-on-ti-microcontroller)，但您提出了一些其他需要解决的问题。

OpenCV从**2.0 版本开始**提供**C 接口**和**C++ 接口**。所以理论上，可以使用 C 编译器配置和构建 OpenCV，但我不知道这项任务背后的难度，因为我自己从未做过。请注意，大多数 C++ 接口仅编码为 C 接口的包装器。

 **关于实现**实时处理**，这完全取决于您设备的**处理能力**以及您选择在解决方案中使用的**算法。**

[我们最近在这个线程](https://stackoverflow.com/questions/10535182/advice-for-real-time-image-processing/10536166#10536166)中讨论了实时处理和 OpenCV 。**

# serial-port - 手动 PRINT 命令时串口输出旧值

> ID：10556773
> 
> 赞同：0
> 
> 时间：2012-05-11T18:33:48.450
> 
> 标签：serial-port, compact-framework2.0

我有一个通过串口连接到天平的应用程序。天平很大，不能按 PRINT 按钮。所以我的应用程序要求余额在某个用户操作时以编程方式打印。balance 接口允许它，并定义了一个打印命令。所有工作一段时间。然后在对几个项目进行加权后，天平开始输出之前的重量......我在这一点上感到困惑，因为定义的命令很少，并且没有太多可以做的选择。每次之后，我都已经在刷新 OUT 缓冲区。所以我不知道为什么它一直给我旧的价值。

这是我的代码：

```
 if (askedToPrint)
        {
                _sp.DiscardOutBuffer();

                //ask the balance to print
                _sp.Write("P\r\n");

         } 
```

_sp - 是一个 SerialPort 对象

我正在使用 WinCE 6.0 和 Compact Framework 2.0/C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:41:10.827

如果您正在使用 Readline() 或 Read() 从串行端口读取数据，则余额可能已发送多个排队的数据包。因此，在阅读之前，您必须丢弃已经挂起的数据包。另一种方法是在编写打印请求之前使用 ReadExisting() 方法读取所有可用数据。因此，在发送命令后，如果您的余额仍在发送旧数据包，则可能是余额有问题。

# php - 为什么 PEAR 不能在我的 PHP Windows 安装上工作？

> ID：10556780
> 
> 赞同：2
> 
> 时间：2012-05-11T18:34:19.350
> 
> 标签：php, windows-7, cygwin, cmd, pear

我在 Windows 7 上运行 Wampserver，我似乎无法让 PEAR 工作。好吧，这并不完全正确——显然它可以在命令行（cmd.exe 和 Cygwin）上运行。这是我在 PHP.Net 上找到的示例程序，它显示是否安装了 PEAR：

```
<?PHP

require_once 'System.php';
var_dump(class_exists('System', false));

?> 
```

在命令行上，它返回“bool(true)”，在浏览器中我得到

```
Warning: require_once(System.php) [function.require-once]: failed to open stream: No such file or directory in C:\wamp\www\foobar.php on line 3

Fatal error: require_once() [function.require]: Failed opening required 'System.php' (include_path='.;C:\php\pear') in C:\wamp\www\foobar.php on line 3 
```

老实说，我不确定我做错了什么。似乎两者都应该工作，但我很难过。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:39:29.960

看起来您的 apache（或其他网络服务器）选择了错误的 php.ini。

*   创建一个页面调用`phpinfo()`
*   在浏览器中加载页面
*   检查`PHP.ini`其使用的路径。
*   将您的正确复制`php.ini`到该位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:57:25.727

根据您的评论，看来您`include_path`是错误的。去改变你的 PHP.ini 并将你的包含路径设置为：

```
include_path = ".;C:\wamp\bin\php\php5.3.10\pear" 
```

# ruby-on-rails - 在 Rails 的数据库中存储用户角色的位置？使用 CanCan、Devise 和 Role_Model

> ID：10556781
> 
> 赞同：1
> 
> 时间：2012-05-11T18:34:19.800
> 
> 标签：ruby-on-rails, ruby, devise, roles, cancan

我有一个使用 Devise 设置了身份验证的 rails 应用程序。我正在添加 CanCan 和 Role_Model。添加能力似乎很容易。但是我不确定在哪里存储用户的角色。我是不是该：

1.  在用户数据库表中为角色添加一列？

2.  为角色和角色用户添加一个或多个单独的表？

3.  在其他地方添加角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:43:32.120

这取决于角色将如何在您的应用程序中实现。

1.  如果角色将被继承，例如`admin`< `registered user`< `guest`，这意味着管理员能够做所有事情`reg. user`并且`guest`能够（等等），那么您可能只想`role`在公共用户模型上添加一个字段。

2.  如果您的应用程序中的“操作”与不继承权限的特殊角色相关联（与上面不同），即您需要在管理员上拥有多个角色才能与应用程序进行一些常见的交互（如来宾），那么您需要一个连接表，用`user_id, role_id`对填充。

我个人更喜欢第一种选择。

# javascript - 可以用科学计数法对表格进行排序的javascript库

> ID：10556783
> 
> 赞同：0
> 
> 时间：2012-05-11T18:34:26.390
> 
> 标签：javascript, html

我正在为我的表使用 javascript 类 sorttable（请参见此处：[http](http://www.kryogenix.org/code/browser/sorttable/) ://www.kryogenix.org/code/browser/sorttable/ ）

但是，我有一张使用科学记数法的表格。当我对列进行排序时，它看起来像这样......

```
9.43947E-20
9.41332E-22
9.36423E-22
9.35113E-18
9.2744E-23
9.18754E-22
9.09174
8.3981E-22
7.72743E-19
7.69538E-18
7.23656E-19 
```

它没有正确排序。我希望它看起来像这样...

```
9.09174
9.35113E-18
7.69538E-18
7.72743E-19
7.23656E-19
9.43947E-20
9.41332E-22
9.36423E-22
8.3981E-22
9.2744E-23 
```

有没有可以做到这一点的javascript函数？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:36:44.107

以上将使用我的[sortTable](http://phrogz.net/JS/sorTable/)库（目前恰好也在背面使用 jQuery）：

## 演示：http: [//jsfiddle.net/bBJBa/1/](http://jsfiddle.net/bBJBa/1/)

他们的关键是将字符串值转换为使用类似`*1`或`parseFloat`代替的数字`parseInt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:37:47.067

```
var myArrayOfNumbersAsStrings.sort(function(a,b){
    if(parseFloat(a) < parseFloat(b)) return -1;
    if(parseFloat(a) > parseFloat(b)) return 1;
    return 0;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:40:46.420

尝试这个：

```
numbers.sort(function(a, b) {
  return Number(a) - Number(b);
}); // => The array "numbers" is now sorted numerically ascending. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:59:29.523

您希望它们从大到小排序-

```
 var A= [
        '9.43947E-20',
        '9.41332E-22',
        '9.36423E-22',
        '9.35113E-18',
        '9.2744E-23',
        '9.18754E-22',
        '9.09174',
        '8.3981E-22',
        '7.72743E-19',
        '7.69538E-18',
        '7.23656E-19'
    ];
    A.sort(function(a, b){
        return b-a;
    }).join('\n')

    /*  returned value: (String)
    9.09174
    9.35113E-18
    7.69538E-18
    7.72743E-19
    7.23656E-19
    9.43947E-20
    9.41332E-22
    9.36423E-22
    9.18754E-22
    8.3981E-22
    9.2744E-23
    */ 
```

# c# - 在 Azure 上缓存 ASP.NET 页面

> ID：10556787
> 
> 赞同：1
> 
> 时间：2012-05-11T18:34:42.720
> 
> 标签：c#, asp.net, azure, azure-caching

在 Azure 上[缓存 ASP.NET 页面](http://msdn.microsoft.com/en-us/library/06bh14hk.aspx)时是否有任何特殊注意事项？我知道页面缓存由 IIS 在内存中管理，但它是否依赖与 asp.net 缓存相同的提供程序？

我需要缓存数百个页面，每个页面平均为 100KB，我想知道这是否会在 Azure 上按预期运行，因为 Azure 存在内存限制注意事项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:58:22.680

我建议将[Azure 缓存服务](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)用于**输出缓存**ASP.NET 页面。它易于配置，可供部署中的所有 VM 节点使用。

Azure 缓存依赖于[`DistributedCacheOutputCacheProvider`](http://msdn.microsoft.com/en-us/library/windowsazure/gg185670.aspx). 您还可以控制您的[缓存配额大小](http://msdn.microsoft.com/en-us/library/windowsazure/gg618005.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T19:17:55.363

完全同意@SilverNonja 的评论，但我只想评论“Azure 上的内存限制考虑”。由于 Windows Azure 内存的限制，我不认为您的目标受到限制，因为您肯定可以在单个 VM 中获得很多，但是您可以从一个 VM 中为那么多用户提供服务。您确实必须运行同一应用程序的多个实例，然后拥有本地计算机特定的缓存是问题所在。

使用云解决方案，您有多个实例正在运行，创建基于本地缓存的解决方案会带来几个问题，因为请求在不同的时间由不同的实例提供服务。拥有一个共享资源的集中位置是最好的，所有实例都可以在其中查找数据是最好的方法，这就是为什么 Windows Azure 缓存是可供您使用的最佳/快速选项的原因。

这里还有一个非常简单的示例，可以将 Azure 缓存与 ASP.NET 应用程序一起使用： [https ://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:54:01.077

您可能想尝试最新的 Windows Azure 缓存（预览版）。它具有更好的功能集和改进的延迟。欲了解更多信息 - [http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/9a2dbd9f-1b9d-4249-a48b-216d9dfdc2bc](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/9a2dbd9f-1b9d-4249-a48b-216d9dfdc2bc)

# eclipse-plugin - eclipse cdt - 2种安装方法，对它们感到困惑

> ID：10556791
> 
> 赞同：0
> 
> 时间：2012-05-11T18:35:04.500
> 
> 标签：eclipse-plugin, eclipse-cdt

我去eclipse下载网站

我发现 Eclipse CDT - 在我的标准 Eclipse SDK（不是 cdt）中**独立的 eclipse 版本我可以这样做：**

帮助->安装新软件->然后我会弹出一个窗口并要求我提供如下所示的网址： ![在此处输入图像描述](../Images/736fb8a3cc2001ec1bce97c963df4341.png)

所以你可以安装它

这是一个单独的独立 Eclipse CDT： ![在此处输入图像描述](../Images/ab1733033adf37b683ecf275d701d2b3.png)

这是一个独立的 Eclipse SDK： ![在此处输入图像描述](../Images/90218945fa4adb6525779f97ea3afa10.png)

**我的问题是：1.单独的 Eclipse CDT和**将 CDT 插件安装到 Eclipse SDK有什么区别，**或者它们是一样的吗？** 2\. 什么更好？使用单独的 Eclipse CDT 还是**在**我的 Eclipse SDK 中安装插件更好？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:55:51.427

简短的回答：两者之间没有重要的区别[1]。

更长的答案：Eclipse IDE 只不过是一堆插件，它们一起工作以创建代码编辑（和其他东西）的功能。

当您访问[http://eclipse.org/downloads](http://eclipse.org/downloads)时，您会看到一堆不同的包。每个包都提供了一组特定的功能，但这只是一种方便，因此您不必安装 vanilla SDK，然后安装您*真正*需要的东西。php 开发人员不需要 C++ 编译器，反之亦然。但是，您*可以*根据需要安装它。它的核心是在所有发行版之间重复使用相同的小插件集。

您可以在这里比较不同的发行版：http: [//www.eclipse.org/downloads/compare.php](http://www.eclipse.org/downloads/compare.php)

[1]：实际上，不同之处在于 SDK 包含所有功能的源代码以及 Java 编译器和插件开发工具。C++ 工具不包括这些。

# ios - 为什么 armv6 是适用于 iOS 5 的有效架构？

> ID：10556792
> 
> 赞同：4
> 
> 时间：2012-05-11T18:35:05.903
> 
> 标签：ios, xcode4.3, armv7, armv6, build-settings

有人能告诉我为什么用 iOS 5.0 的 iOS 部署目标创建一个新项目，默认情况下在项目 > 构建设置中包含 armv6 作为有效架构吗？默认的 info.plist 文件仅在所需设备功能中列出 armv7。

据我了解，如果我正在为 iOS 5 或更高版本构建只能在 armv7 设备（即 iPhone 3GS 或更高版本、iPod 3G 或更高版本以及 iPad）上运行。因此，我应该能够删除所有 armv6 引用，并将 Build Active Architecture Only 设置为 YES。

任何人都可以确认或澄清吗？谢谢。

XCode v4.3.2，基础 SDK 5.1，iOS 部署目标 iOS 5.0，iPhone 设备系列

PS - 我知道删除 armv6 会减小二进制文件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:52:57.187

$(VALID_ARCHS) 定义了 Xcode 目标支持的架构集。$(ARCHS) 告诉 Xcode 要构建什么架构。实际为每个目标构建的是 $(VALID_ARCHS) 和 $(ARCHS) 的交集。

$(VALID_ARCHS) 通常用于避免为整个项目支持的某些架构构建目标。如果您不需要这样做，您可以放心地忽略它。

# c# - 柏拉图立体的可见性

> ID：10556793
> 
> 赞同：1
> 
> 时间：2012-05-11T18:35:07.140
> 
> 标签：c#, 3d, visibility

我正在做的事情将绘制具有可见性和恒定阴影的柏拉图立体。我必须在没有 opengl 或 directX 的情况下这样做。我现在正在解决能见度。我可能会被画家算法解决，但我不知道如何在我的代码中实现它。这就是我的画法。 **所以我在征求意见如何在我的代码中实现画家算法。**我已经对这个算法有所了解 - 理论上。只需按照 z 坐标对面进行排序就足够了。

![在此处输入图像描述](../Images/0292c57c86846e01606497460e23c289.png)
对于投影，我使用类投影矩阵，并且像 OpenGL 中一样有数组 vertexBuffer 和 indexBuffer。
我用 C# 在 Visual Studio 2010 中完成所有工作。

**投影矩阵**

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace KPG3D
{
    /// <summary>
    /// Structure of 3D point
    /// </summary>
    public struct Point3D
    {
        public float X;
        public float Y;
        public float Z;

        public Point3D(float x, float y, float z)
        {
            X = x;
            Y = y;
            Z = z;
        }
    }

    public class ProjectionMatrix
    {
        public float[,] projectionMatrix = new float[4, 4]; //projection matrix

        /// <summary>
        /// Konstructor of projection matrix
        /// </summary>
        public ProjectionMatrix()
        {
            setIdentity();
        }

        /// <summary>
        /// Konstructor of projection matrix
        /// </summary>
        public ProjectionMatrix(float zNear, float zFar, float viewportWidth, float viewportHeight)
        {
            setIdentity();
            float Q = zFar / (zFar - zNear);
            float w = 2 * zNear / viewportWidth;
            float h = 2 * zNear / viewportHeight;

            projectionMatrix[0, 0] = w;
            projectionMatrix[1, 1] = h;
            projectionMatrix[2, 2] = Q;
            projectionMatrix[3, 2] = 1;
            projectionMatrix[2, 3] = -Q * zNear;
        }

        /// <summary>
        /// Konstructor of projection matrix
        /// </summary>
        public ProjectionMatrix(float d, float z)
        {
            setIdentity();//set identity matrix

            projectionMatrix[0, 0] = d / (d - z);
            projectionMatrix[1, 1] = d / (d - z);
            projectionMatrix[2, 2] = 0;
        }

        /// <summary>
        /// Set the matrix to identity
        /// </summary>
        public void setIdentity()
        {
            projectionMatrix[0, 0] = 1;
            projectionMatrix[0, 1] = 0;
            projectionMatrix[0, 2] = 0;
            projectionMatrix[0, 3] = 0;

            projectionMatrix[1, 0] = 0;
            projectionMatrix[1, 1] = 1;
            projectionMatrix[1, 2] = 0;
            projectionMatrix[1, 3] = 0;

            projectionMatrix[2, 0] = 0;
            projectionMatrix[2, 1] = 0;
            projectionMatrix[2, 2] = 1;
            projectionMatrix[2, 3] = 0;

            projectionMatrix[3, 0] = 0;
            projectionMatrix[3, 1] = 0;
            projectionMatrix[3, 2] = 0;
            projectionMatrix[3, 3] = 1;
        }

        /// <summary>
        /// Aplicate projection on set point
        /// </summary>
        /// <param name="p">Point want to transformate</param>
        /// <returns>Transformated point</returns>
        public Point3D multiply(Point3D p)
        {
            Point3D result;

            float tmp = projectionMatrix[3, 0] * p.X + projectionMatrix[3, 1] * p.Y + projectionMatrix[3, 2] * p.Z + projectionMatrix[3, 3] * 1;

            result.X = (projectionMatrix[0, 0] * p.X + projectionMatrix[0, 1] * p.Y + projectionMatrix[0, 2] * p.Z + projectionMatrix[0, 3] * 1) / tmp;
            result.Y = (projectionMatrix[1, 0] * p.X + projectionMatrix[1, 1] * p.Y + projectionMatrix[1, 2] * p.Z + projectionMatrix[1, 3] * 1) / tmp;
            result.Z = (projectionMatrix[2, 0] * p.X + projectionMatrix[2, 1] * p.Y + projectionMatrix[2, 2] * p.Z + projectionMatrix[2, 3] * 1) / tmp;

            return result;
        }
    }
} 
```

**形式**

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Drawing2D;

namespace KPG3D
{
    public partial class Form1 : Form
    {
        private Bitmap canvasBitmap; //bitmap of drawing area
        private Graphics g;          //access to graffics

        private List<Point3D> vertexBuffer = new List<Point3D>(); //list of all vertices
        private List<int> indexBuffer = new List<int>();//list of all indices
        private Point3D centroid = new Point3D(0, 0, 0);// center of object

        private ProjectionMatrix projection = null;   //projection matrix

        private bool rotation = false;
        private int objectID = 0;

        public Form1()
        {
            InitializeComponent();

            //create bitmap and set to canvas
            canvasBitmap = new Bitmap(canvas.Width, canvas.Height);
            canvas.Image = canvasBitmap;

            //prepare grafics
            g = Graphics.FromImage(canvasBitmap);
            g.SmoothingMode = SmoothingMode.AntiAlias;

            Matrix origin = new Matrix();
            origin.Translate(canvas.Width / 2, canvas.Height / 2);
            g.Transform = origin;
        }

        /// <summary>
        /// Reaction on click on start button
        /// </summary>
        private void buttonStart_Click(object sender, EventArgs e)
        {
            if (projection == null)
            {
                projection = new ProjectionMatrix(1, 100, 1, 1);
                //createBox();
                //createTetrahedron();
                createChosenObject();
            }

            Timer t = new Timer();
            t.Tick += new EventHandler(timerDrawing);//set tick method
            t.Interval = 30; //every 30 ms
            t.Enabled = true;
            t.Start();
        }

        /// <summary>
        /// Create tetrahedron
        /// </summary>
        private void createTetrahedron() 
        {

            Point3D a = new Point3D(-3,-3, 7);//h
            Point3D b = new Point3D( 3,-3,13);//c
            Point3D c = new Point3D( 3, 3, 7);//a
            Point3D d = new Point3D(-3, 3,13);//f

            vertexBuffer.Add(a);
            vertexBuffer.Add(b);
            vertexBuffer.Add(c);
            vertexBuffer.Add(d);

            //acb
            indexBuffer.Add(0);
            indexBuffer.Add(2);
            indexBuffer.Add(1);

            //adc
            indexBuffer.Add(0);
            indexBuffer.Add(3);
            indexBuffer.Add(2);

            //cdb
            indexBuffer.Add(2);
            indexBuffer.Add(3);
            indexBuffer.Add(1);

            //adb
            indexBuffer.Add(0);
            indexBuffer.Add(3);
            indexBuffer.Add(1);

            centroid = new Point3D(0, 0, 10);
        }

        /// <summary>
        /// Create chosen object
        /// </summary>
        private void createChosenObject() {
            switch (objectID) {
                case 1:
                    createTetrahedron();
                    break;
                case 2:
                    createHexahedron();
                    break;
                case 3:
                    createOctahedron();
                    break;
                case 4:
                    createDodecahedron();
                    break;
                case 5:
                    createIcosahedron();
                    break;
                default:
                    //do nothing
                    break;
            }

        }

        /// <summary>
        /// Rotate direcion vector by the specified angle
        /// </summary>
        /// <param name="vector">Direction vector</param>
        /// <param name="angle">Angle of rotation</param>
        /// <returns></returns>
        private Point3D rotateVector(Point3D vector, Point3D centroid, double angle)
        {
            vector.X -= centroid.X;
            vector.Y -= centroid.Y;
            vector.Z -= centroid.Z;

            Point3D result;
            result.X = vector.X * (float)Math.Cos(angle) - vector.Z * (float)Math.Sin(angle);
            result.Z = vector.X * (float)Math.Sin(angle) + vector.Z * (float)Math.Cos(angle);
            result.Y = vector.Y;

            result.X += centroid.X;
            result.Y += centroid.Y;
            result.Z += centroid.Z;

            return result;
        }

        /// <summary>
        /// Reaction on timer
        /// </summary>
        private void timerDrawing(Object obj, EventArgs ea)
        {

            //rotation of object
            if (rotation == true)
            {
                for (int i = 0; i < vertexBuffer.Count; i++)
                {
                    vertexBuffer[i] = rotateVector(vertexBuffer[i], centroid, 0.02);
                }
            }

            //drawing of object
            draw(vertexBuffer, indexBuffer);

            //refresh what is on canvas
            canvas.Invalidate();
        }

        /// <summary>
        ///Draw point and triangles
        /// </summary>
        /// <param name="vert"></param>
        /// <param name="ind"></param>
        private void draw(List<Point3D> vert, List<int> ind)
        {
            //clear drawing area
            g.Clear(Color.Maroon);

            //prepare pen and brush
            Pen pen = new Pen(Color.Black, 1);
            SolidBrush brush = new SolidBrush(Color.Black);
            SolidBrush faceBrush = new SolidBrush(Color.FromArgb(75, Color.Green));

            //draw edges
            for (int i = 0; i < ind.Count / 3; i++)
            {
                Point3D A = projection.multiply(vert[ind[3 * i + 0]]);
                Point3D B = projection.multiply(vert[ind[3 * i + 1]]);
                Point3D C = projection.multiply(vert[ind[3 * i + 2]]);

                //count to 2D
                PointF a = new PointF(A.X * 200, -A.Y * 200);
                PointF b = new PointF(B.X * 200, -B.Y * 200);
                PointF c = new PointF(C.X * 200, -C.Y * 200);

                g.FillPolygon(faceBrush, new PointF[] { a, b, c });

                //draw triangle
                g.DrawLine(pen, a, b);
                g.DrawLine(pen, b, c);
                g.DrawLine(pen, c, a);
            }

            //draw element
            for (int i = 0; i < vert.Count; i++)
            {

                Point3D p = projection.multiply(vert[i]); //projection from 3D to 2D
                g.FillRectangle(brush, p.X * 200 - 2, -p.Y * 200 - 2, 4, 4);

            }

        }

        /// <summary>
        /// Printscreen to file
        /// </summary>
        private void buttonPrintScreen_Click(object sender, EventArgs e)
        {
            canvas.Image.Save("out.png");
        }

        private void checkBoxRotate_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxRotate.Checked) rotation = true;
            else rotation = false;
        }

        private void objectChooser_SelectedIndexChanged(object sender, EventArgs e)
        {
            //set ide of chosen object
            if(objectChooser.SelectedItem.Equals("Tetrahedron")) objectID = 1;
            else if (objectChooser.SelectedItem.Equals("Box")) objectID = 2;
            else if (objectChooser.SelectedItem.Equals("Octahedron")) objectID = 3; 
            else if(objectChooser.SelectedItem.Equals("Dodecahedron")) objectID = 4;
            else if (objectChooser.SelectedItem.Equals("Icosahedron")) objectID = 5; 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:46:56.157

如果您必须考虑相交的三角形（见图），我认为最简单的解决方案将涉及 z 缓冲区（它们很容易创建和使用）。如果您不必渲染相交的三角形，那么您提出的 z 排序解决方案将更简单并且可以正常工作。

![在此处输入图像描述](../Images/175594a543e09ca1faff05b5e5184c11.png)

# css - “Scrambled” webkit 滚动条（试图重现 Google+ 的滚动条）

> ID：10556803
> 
> 赞同：1
> 
> 时间：2012-05-11T18:36:07.197
> 
> 标签：css, webkit, scrollbar, pseudo-class

我正在尝试在我的网站上重现 google+ 的滚动条。由于某些原因，我有时无法弄清楚这个滚动条的外观是混乱的。通过加扰，我的意思是滚动条是多色的，有一条黑线跨越它，并且`scrollbar-thumb`不可见。这是一个屏幕截图，向您展示我的意思：

![在此处输入图像描述](../Images/e2260be2be4f4ab2871230d3a919c6a1.png)

这是一个[jsfiddle](http://jsfiddle.net/trpeters1/XkGuu/31/)，不幸的是，滚动条看起来很正常，所以我无法重现我的问题。

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，如果这有助于思考我现有的 CSS 是如何搞砸的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T23:09:35.440

这是用于滚动条的代码参见下面的代码：

```
::-webkit-scrollbar {
height: 16px;
overflow: visible;
width: 16px;
}
::-webkit-scrollbar-thumb {
background-color: rgba(0,0,0,.2);
background-clip: padding-box;
border: solid transparent;
border-width: 1px 1px 1px 6px;
min-height: 28px;
padding: 100px 0 0;
box-shadow: inset 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 0 rgba(0,0,0,.07);
::-webkit-scrollbar-button {
height: 0;
width: 0;
}

::-webkit-scrollbar-track {
background-clip: padding-box;
border: solid transparent;
border-width: 0 0 0 4px;
} 
```

# c# - 如何在 C# 中将十六进制字符串转换为字节？

> ID：10556805
> 
> 赞同：12
> 
> 时间：2012-05-11T18:36:11.893
> 
> 标签：c#, string, byte

如何将此字符串转换为字节？

```
string a = "0x2B"; 
```

我试过这段代码，(byte)(a); 但它说：

> 无法将类型字符串转换为字节...

当我尝试这段代码`Convert.ToByte(a);`和 this`byte.Parse(a);`时，它说：

> 输入字符串的格式不正确...

什么是正确的代码？

但是当我在一个数组中声明它时，它是可以接受的......

例如：

```
byte[] d = new byte[1] = {0x2a}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T18:41:46.553

您必须指定要使用的基数，`Convert.ToByte`因为您的输入字符串包含一个十六进制数字：

```
byte b = Convert.ToByte(a, 16); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T18:43:16.783

```
byte b = Convert.ToByte(a, 16); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T18:39:24.633

您可以使用[Convert](https://msdn.microsoft.com/en-us/library/system.convert.aspx)助手类的[ToByte](http://msdn.microsoft.com/en-us/library/y57wwkzk.aspx)函数：

```
byte b = Convert.ToByte(a, 16); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T18:44:26.120

您可以使用[UTF8Encoding](https://msdn.microsoft.com/en-us/library/system.text.utf8encoding(v=vs.110).aspx)：

```
public static byte[] StrToByteArray(string str)
{
    System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
    return encoding.GetBytes(str);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T18:39:06.437

**更新：**

正如其他人所提到的，我最初使用`byte.Parse()`with 的建议`NumberStyles.HexNumber`实际上不适用于带有“0x”前缀的十六进制字符串。最好的解决方案是`Convert.ToByte(a, 16)`按照其他答案中的建议使用。

原答案：

> 尝试使用以下内容：
> 
> ```
> byte b = byte.Parse(a, NumberStyles.HexNumber, CultureInfo.InvariantCulture); 
> ```

# c# - 使链表线程安全

> ID：10556806
> 
> 赞同：10
> 
> 时间：2012-05-11T18:36:21.233
> 
> 标签：c#, multithreading

我知道以前有人问过这个问题（我会继续研究），但我需要知道如何以线程安全的方式制作特定的链表函数。我当前的问题是我有一个线程循环遍历链表中的所有元素，而另一个线程可能会在此列表的末尾添加更多元素。有时会发生一个线程尝试将另一个元素添加到列表中，而第一个线程正忙于迭代它（这会导致异常）。

我正在考虑添加一个变量（布尔标志）来表示列表当前正忙于迭代，但是我如何检查它并等待第二个线程（如果它等待就可以了，因为第一个线程运行很快）。我能想到的唯一方法是使用 while 循环不断检查这个忙标志。我意识到这是一个非常愚蠢的想法，因为它会导致 CPU 努力工作而没有做任何有用的事情。现在我在这里寻求更好的见解。我已经阅读过关于锁等的内容，但它似乎与我的情况无关，但也许我错了？

同时，如果我找到解决方案，我会继续搜索互联网并回复。

编辑：让我知道我是否应该发布一些代码来解决问题，但我会尝试更清楚地解释它。

所以我有一个类，其中包含需要处理的元素的链表。我有一个线程通过函数调用（我们称之为“processElements”）遍历这个列表。我有第二个线程，它以不确定的方式添加要处理的元素。但是，有时它会在 processElements 运行时尝试调用此 addElement 函数。这意味着当第一个线程迭代它时，一个元素被添加到链表中。这是不可能的并且会导致异常。希望这可以清除它。

我需要添加新元素以产生的线程，直到 processElements 方法完成执行。

*   对于任何绊倒这个问题的人。接受的答案将为您提供一个快速、简单的解决方案，但请查看下面 Brian Gideon 的答案以获得更全面的答案，这肯定会给您更多的洞察力！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-11T19:00:08.220

异常可能是由于在迭代过程中通过`IEnumerator`. 您可以使用几种技术来维护线程安全。我将按难度顺序介绍它们。

**锁定一切**

到目前为止，这是获取线程安全数据结构的最简单和最简单的方法。当读取和写入操作的数量相等时，此模式效果很好。

```
LinkedList<object> collection = new LinkedList<object>();

void Write()
{
  lock (collection)
  {
    collection.AddLast(GetSomeObject());
  }
}

void Read()
{
  lock (collection)
  {
    foreach (object item in collection)
    {
      DoSomething(item);
    }
  }
} 
```

**复制阅读模式**

这是一个稍微复杂的模式。您会注意到数据结构的副本是在阅读之前制作的。当读取操作的数量与写入的数量相比很少并且复制的惩罚相对较小时，这种模式很有效。

```
LinkedList<object> collection = new LinkedList<object>();

void Write()
{
  lock (collection)
  {
    collection.AddLast(GetSomeObject());
  }
}

void Read()
{
  LinkedList<object> copy;
  lock (collection)
  {
    copy = new LinkedList<object>(collection);
  }
  foreach (object item in copy)
  {
    DoSomething(item);
  }
} 
```

**复制-修改-交换模式**

最后，我们有了最复杂和最容易出错的模式。**我实际上不建议使用这种模式，除非你*真的*知道你在做什么。**与我在下面的任何偏差都可能导致问题。这很容易搞砸。事实上，我过去也无意中把这个搞砸了。您会注意到数据结构的副本是在所有修改之前制作的。然后修改副本，最后将原始引用替换为新实例。基本上我们总是把`collection`它当作不可变的。当写入操作的数量与读取的数量相比很少并且复制的惩罚相对较小时，这种模式很有效。

```
object lockobj = new object();
volatile LinkedList<object> collection = new LinkedList<object>();

void Write()
{
  lock (lockobj)
  {
    var copy = new LinkedList<object>(collection);
    copy.AddLast(GetSomeObject());
    collection = copy;
  }
}

void Read()
{
  LinkedList<object> local = collection;
  foreach (object item in local)
  {
    DoSomething(item);
  }
} 
```

*更新：*

所以我在评论区提出了两个问题：

*   为什么`lock(lockobj)`而不是`lock(collection)`在写端？
*   为什么`local = collection`在阅读方面？

关于第一个问题，考虑 C# 编译器如何扩展`lock`.

```
void Write()
{
  bool acquired = false;
  object temp = lockobj;
  try
  {
    Monitor.Enter(temp, ref acquired);
    var copy = new LinkedList<object>(collection);
    copy.AddLast(GetSomeObject());
    collection = copy;
  }
  finally
  {
    if (acquired) Monitor.Exit(temp);
  }
} 
```

现在希望更容易看出如果我们使用`collection`锁定表达式会出现什么问题。

*   线程 A 执行`object temp = collection`。
*   线程 B 执行`collection = copy`。
*   线程 C 执行`object temp = collection`。
*   *线程 A 使用原始*引用获取锁。
*   *线程 C 使用新*引用获取锁。

显然，这将是灾难性的！由于多次进入临界区，写入会丢失。

现在第二个问题有点棘手。您不一定*必须*使用我上面发布的代码来执行此操作。但是，那是因为我`collection`只用过一次。现在考虑以下代码。

```
void Read()
{
  object x = collection.Last;
  // The collection may get swapped out right here.
  object y = collection.Last;
  if (x != y)
  {
    Console.WriteLine("It could happen!");
  }
} 
```

这里的问题是它`collection`可能随时被换掉。这将是一个*非常*难以找到的错误。这就是为什么我在执行此模式时总是在读取端提取本地引用。这确保我们在每个读取操作上使用*相同*的集合。

**同样，因为这些问题非常微妙，我不建议使用这种模式，除非你*真的*需要。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T18:48:17.577

下面是一个快速示例，说明如何使用锁来同步您对列表的访问：

```
private readonly IList<string> elements = new List<string>();

public void ProcessElements()
{
    lock (this.elements)
    {
        foreach (string element in this.elements)
            ProcessElement(element);
    }
}

public void AddElement(string newElement)
{
    lock (this.elements)
    {
        this.elements.Add(element);
    }
} 
```

语句意味着执行线程应该在`lock(o)`对象上获取互斥锁`o`，执行语句块，最后释放对象上的锁`o`。如果另一个线程尝试同时获取锁`o`（对于相同的代码块或任何其他），那么它将阻塞（等待）直到锁被释放。

因此，关键点是您对`lock`要同步的所有语句使用相同的对象。您使用的实际对象可能是任意的，只要它是一致的。在上面的示例中，我们将集合声明为只读，因此我们可以安全地将其用作我们的锁。但是，如果不是这种情况，您应该锁定另一个对象：

```
private IList<string> elements = new List<string>();

private readonly object syncLock = new object();

public void ProcessElements()
{
    lock (this.syncLock)
    {
        foreach (string element in this.elements)
            ProcessElement(element);
    }
}

public void AddElement(string newElement)
{
    lock (this.syncLock)
    {
        this.elements.Add(element);
    }
} 
```

# c++ - 为什么在我的代码中删除 ostringstream 对象会导致分段错误？

> ID：10556808
> 
> 赞同：0
> 
> 时间：2012-05-11T18:36:26.963
> 
> 标签：c++, stringstream, ostringstream

```
#include <iostream>
#include <sstream>
#include <fstream>
#include <iomanip>
#include <string>

using namespace std;

int main()
{
    ostringstream out;
    ostringstream tmpstr;
    tmpstr << "ritesh is here";
    out << tmpstr.str().c_str();
    out << endl;
    cout << out.str();
    if(tmpstr.rdbuf()!=NULL)
        cout << "tmpstr not null" <<endl;
    else
        cout << "tmpstr null" <<endl;
    delete tmpstr.rdbuf();   // This line gives me segmentation fault
    cout <<"deleted" << endl;
} 
```

该行`delete tmpstr.rdbuf();` 给出了分段错误。我猜 rdbuf 返回 char* 指针，因此 . 我可以对其使用删除来释放分配给的内存空间`tmpstr`

我在某处错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T18:39:20.713

是的，你错误地认为你可以`delete`做一些你没有分配的东西。

只有`delete`你自己`new`编辑过的东西。不要`delete`别人的东西。

# javascript - jQuery-用var提交表单

> ID：10556811
> 
> 赞同：0
> 
> 时间：2012-05-11T18:36:31.397
> 
> 标签：javascript, jquery, html, forms

您好，当我点击提交时，我在函数中有一个 var...我想将 var"fieldNames" 传递给我的表单...。

```
$(document).ready(function() {
$("#submit").click(function() {
    $("#sortable").each(function() {

        var fieldNames = $(this).sortable('toArray').toString();

    });
    $("#detColumnSortorder").submit;
}); 
```

});

我想在我的表单中传递这个：fieldNames

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:40:18.120

在表单中放入一个隐藏的输入字段。然后在隐藏字段上设置值。这样当表单提交时，隐藏字段中的值将被提交。

HTML：

```
<input type="hidden" name="fieldNames" value="" /> 
```

jQuery：

```
$(document).ready(function() {
$("#submit").click(function() {
    $("#sortable").each(function() {    
        var fieldNames = $(this).sortable('toArray').toString();
        $('input[name=fieldNames]').val(fieldNames);
    });
    $("#detColumnSortorder").submit;
}); 
```

# c - 如何将 DWORD 转换为 HEX

> ID：10556815
> 
> 赞同：3
> 
> 时间：2012-05-11T18:36:39.977
> 
> 标签：c, hex, dword

我目前正在使用 C Builder：

> ```
> DWORD finalAddress = 0xFFFFFFFF;
> TListItem *ListIt;
> ListIt->Caption = finalAddress; 
> ```

这将输出：4294967295（在 DEC 中为 0xFFFFFFFF）

我希望它显示 0xFFFFFFFF。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:44:38.030

假设您可以访问 C++ 标准库，请尝试以下操作：

```
#include <sstream>
#include <iostream>
#include <string>

std::ostringstream ss;
ss << std::hex << finalAddress;

AnsiString ansiHex = AnsiString (ss.str().c_str());
ListIt->Caption = ansiHex; 
```

最后一项任务可能不起作用 - 我无权访问 Embarcadero 的标题，所以我不知道`ListIt->Caption`. 可能需要执行额外的转换。

# css - CSS - 类选择器在 IExplorer 中不起作用

> ID：10556818
> 
> 赞同：0
> 
> 时间：2012-05-11T18:36:53.893
> 
> 标签：css, internet-explorer

我动态地创建了以下 div 结构：

```
<div id=Box>
   <div id=outer>
       <div id="inner1" class="split_right">
          some 
       </div>
       <div id="inner2" class="split_left">
          some 
       </div>
          .....
          .....
       <div id="inner(n)" class="split_right">
          some 
       </div>
       <div id="inner(n+1)" class="split_left">
          some 
       </div>

   </div>
</div> 
```

div 的数量取决于一个数组中传递的 s 的数量。问题是，我想给 split_right 和 split_left 一个 CSS 规则，如下所示：

```
.split_left {
float: left;
margin: 0px 10px 5px 10px;
}
.split_right {
float: right;
margin: 0px 10px 5px 10px;
} 
```

这适用于 chrome 和 safari，但不适用于任何 IE6+

我究竟做错了什么？？

**更新**

这就是我想要做的：

[http://postimage.org/image/g2t4qsq4v/](http://postimage.org/image/g2t4qsq4v/)

外部 div 的固定宽度等于 2*inner div 宽度 + 50 像素，因此 2 s 可以在同一行中组合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:56:25.967

不确定究竟什么在 IE 中不起作用，我不知道你是否有一个定义宽度的包装器，它正好适合那些。但是 IE 6 中有一个著名的错误 .. 也许 7 我也不确定。如果您在同一方向上浮动左和边距，例如左浮动，并且在 IE 6 中左边距为 xx 个像素，它将使边距加倍。因此，如果您确实定义了这些框应该适合的间距，那么在 IE 中它很可能会换行到下一行，使其看起来不像浮动

添加

```
display: inline; 
```

到每个拆分类的 css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:47:47.180

试试这个：

```
<div id=Box>
   <div id=outer>
       <div id=inner1 class="split_right">
          some image
       </div>
       <div id=inner2 class="split_left">
          some image
       </div>
          .....
          .....
       <div id=inner(n) class="split_right">
          some image
       </div>
       <div id=inner(n+1) class="split_left">
          some image
       </div>

   </div>
</div> 
```

你忘记了引号

# iphone - 框架 Y 没有改变？

> ID：10556825
> 
> 赞同：1
> 
> 时间：2012-05-11T18:37:24.143
> 
> 标签：iphone, objective-c, uinavigationbar, frame

这是一个自定义导航栏，由 UIView 制成。它不控制 setFrame 的 setter 方法。我觉得也许我错过了一些简单的东西。

```
if (self.statusBarHiddenInitially == NO) {
        self.navigationBar.frame = CGRectMake(self.navigationBar.frame.origin.x,
                                              20,
                                              self.navigationBar.frame.size.width,
                                              self.navigationBar.frame.size.height);
        NSLog(@"test frame: %f", self.navigationBar.frame.origin.y);
    } 
```

测试帧返回`0.000000`。

# c++ - QSqlDatabase 并连接到 .sqlite 文件

> ID：10556828
> 
> 赞同：3
> 
> 时间：2012-05-11T18:37:33.627
> 
> 标签：c++, sqlite, qt

当我尝试使用 exe 连接到同一文件夹中的数据库文件时，发生了一些奇怪的事情。不显示错误消息，并且未加载数据库中的数据。

```
sdb = QSqlDatabase::addDatabase("QSQLITE");
sdb.setDatabaseName("lang.sqlite");

if (!sdb.open())
{
    qDebug() << sdb.lastError().text();

    QMessageBox msgBox;
    msgBox.setIcon(QMessageBox::Critical);
    msgBox.setText(sdb.lastError().text());
    msgBox.setStandardButtons(QMessageBox::Ok);
    msgBox.exec();
} 
```

但是，如果我将数据库移动到另一个文件夹 - 一切正常。

```
sdb = QSqlDatabase::addDatabase("QSQLITE");
sdb.setDatabaseName("db\\lang.sqlite");

if (!sdb.open())
{
    qDebug() << sdb.lastError().text();

    QMessageBox msgBox;
    msgBox.setIcon(QMessageBox::Critical);
    msgBox.setText(sdb.lastError().text());
    msgBox.setStandardButtons(QMessageBox::Ok);
    msgBox.exec();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:02:45.000

试试这个：

```
sdb.setDatabaseName(qApp->applicationDirPath()
                    + QDir::separator()
                    + "lang.sqlite" ); 
```

# java - 发送和接收UDP数据包？

> ID：10556829
> 
> 赞同：22
> 
> 时间：2012-05-11T18:37:34.673
> 
> 标签：java, udp, firewall

我已经编写了一个程序来将 UDP 数据包从客户端发送到服务器。

这是发射器代码：

```
import java.io.IOException;
import java.net.*;

public class JavaApplication9 {    
    public static void main(String[] args) throws UnknownHostException, SocketException, IOException  {
        // TODO code application logic here
        byte[] buffer = {10,23,12,31,43,32,24};
        byte [] IP = {-64,-88,1,106};
        InetAddress address = InetAddress.getByAddress(IP);
        DatagramPacket packet = new DatagramPacket(
                buffer, buffer.length, address, 57
                );
        DatagramSocket datagramSocket = new DatagramSocket();
        datagramSocket.send(packet);
        System.out.println(InetAddress.getLocalHost().getHostAddress());
    }
} 
```

接收代码函数是这样的：

```
public void run() {
    try {
        DatagramSocket serverSocket = new DatagramSocket(port);
        byte[] receiveData = new byte[8];
        byte[] sendData = new byte[8];

        while (true) {
              DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
              serverSocket.receive(receivePacket);
              String sentence = new String( receivePacket.getData());
              System.out.println("RECEIVED: " + sentence);
              InetAddress IPAddress = receivePacket.getAddress();
              String sendString = "polo";
              sendData = sendString.getBytes();
              DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, port);
              serverSocket.send(sendPacket);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我使用了 Wireshark 程序。UDP 数据包在接收方的 Wireshark 程序中被接收到，但 Java 程序无法识别它，程序只是一直监听端口而没有任何反应？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-08T18:41:12.913

接收方必须设置接收方的端口以匹配发送方 DatagramPacket 中设置的端口。对于调试，请尝试侦听端口 > 1024（例如 5000 或 9000）。< 1024 的端口通常由系统服务使用，需要管理员权限才能绑定到此类端口。

如果接收方将数据包发送到它正在侦听的硬编码端口（例如端口 57）并且发送方在同一台机器上，那么您将创建一个到接收方本身的环回。始终使用数据包中指定的端口，如果是生产软件，则需要检查以防止出现这种情况。

数据包无法到达目的地的另一个原因是发送方指定的 IP 地址错误。UDP 与 TCP 不同，即使地址不可达，UDP 也会尝试发送数据包，并且发送方不会收到错误指示。您可以通过在接收器中打印地址来检查这一点，作为调试的预防措施。

在您设置的发件人中：

```
 byte [] IP= { (byte)192, (byte)168, 1, 106 };
 InetAddress address = InetAddress.getByAddress(IP); 
```

但使用字符串形式的地址可能更简单：

```
 InetAddress address = InetAddress.getByName("192.168.1.106"); 
```

换句话说，您将目标设置为 192.168.1.106。如果这不是接收者，那么您将不会收到数据包。

这是一个可以工作的简单 UDP 接收器：

```
import java.io.IOException;
import java.net.*;

public class Receiver {

    public static void main(String[] args) {
        int port = args.length == 0 ? 57 : Integer.parseInt(args[0]);
        new Receiver().run(port);
    }

    public void run(int port) {    
      try {
        DatagramSocket serverSocket = new DatagramSocket(port);
        byte[] receiveData = new byte[8];
        String sendString = "polo";
        byte[] sendData = sendString.getBytes("UTF-8");

        System.out.printf("Listening on udp:%s:%d%n",
                InetAddress.getLocalHost().getHostAddress(), port);     
        DatagramPacket receivePacket = new DatagramPacket(receiveData,
                           receiveData.length);

        while(true)
        {
              serverSocket.receive(receivePacket);
              String sentence = new String( receivePacket.getData(), 0,
                                 receivePacket.getLength() );
              System.out.println("RECEIVED: " + sentence);
              // now send acknowledgement packet back to sender     
              DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length,
                   receivePacket.getAddress(), receivePacket.getPort());
              serverSocket.send(sendPacket);
        }
      } catch (IOException e) {
              System.out.println(e);
      }
      // should close serverSocket in finally block
    }
} 
```

# javascript - 如果满足某些条件，则取消排序

> ID：10556835
> 
> 赞同：0
> 
> 时间：2012-05-11T18:37:54.447
> 
> 标签：javascript, jquery, tablesorter

我正在使用 jquery 插件[表](http://tablesorter.com/docs/)排序器，但遇到以下情况：我的网格允许内联版本，如果版本处于活动状态，我想禁止用户对列进行排序，因为这会导致麻烦。

如何在某些条件下禁止排序？我认为事件`sortStart`会帮助我，但我没有取消排序的机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:41:46.240

如果没有关于您的问题的足够信息，我可以说最安全的方法是定义一个标志变量（布尔值），当内联编辑正在进行时将设置为 true，并在编辑完成时设置为 false。然后，如果您的标志变量为真，您可以重新编码排序事件以返回假。

更新

这是解决方案： http: [//tablesorter.com/docs/example-options-headers.html](http://tablesorter.com/docs/example-options-headers.html)。您可以使用此示例中的代码禁用排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:45:03.350

编辑时，设置`locked`为`true`：

```
$(document).ready(function() { 
    $("table").tablesorter(); 
    //assign the sortStart event 
    $("table").bind("sortStart",function() { 
        if(locked) return false;
    }); 
}); 
```

我会在一分钟内测试这个。

# android - 当 EditText 有焦点时，如何从屏幕上删除 Admob 广告？

> ID：10556836
> 
> 赞同：0
> 
> 时间：2012-05-11T18:37:54.643
> 
> 标签：android, focus, admob

我搜索了一番，发现没有办法确定软键盘是否出现。但是，我相信当我单击 EditText 字段时必须调用一个动作。我想要一种在 EditText 字段具有焦点时销毁/处置广告的方法。

我在其中有一个 RelativeLayout 和一个 ScrollView。ScrollView 下面是我的广告。基本上，我这样做是为了让广告不在 ScrollView 中，所以它总是在显示，但我不希望它在键盘启动时显示，因为它会干扰用户。我已经让 adView.destroy() 与 onClick 在 EditText 上一起工作，但我需要在 EditText 上单击一次。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:40:55.160

我们不能设置 adMob 或它的父视图的可见性消失吗？

# php - 开发机器的 PHP 文件权限

> ID：10556844
> 
> 赞同：0
> 
> 时间：2012-05-11T18:38:18.403
> 
> 标签：php, linux, apache, permissions, file-permissions

我刚刚升级了我的开发机器并移到了我正在开发的网站。但是，权限似乎没有正确移动。开发机器是运行 Apache 的 Linux 机器，其中所有文件夹和子文件夹设置为 755，所有子文件夹中的所有文件和文件设置为 644。

而不是我必须运行命令：

`chmod 755 <folder name here>`

`chmod 644 <file name here>`

有没有更快的方法来做到这一点，而不必单独处理每个文件和文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:39:54.423

chmod 递归工作：

```
chmod xxx -R /path/ 
```

更多信息： http: [//linux.die.net/man/1/chmod](http://linux.die.net/man/1/chmod)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:40:05.220

尝试`find . -type d | xargs chmod 755`和`find . -type f | xargs chmod 644`。

# java - Spring @ModelAttribute - 如何只创建一次

> ID：10556846
> 
> 赞同：0
> 
> 时间：2012-05-11T18:38:25.783
> 
> 标签：java, spring

我在函数级别有一个 @ModelAttribute 在我的控制器中创建一个对象。我正在使用 DispatcherPortlet，因此我有一个用于 portlet VIEW 模式的控制器。

上述步骤对于表单与创建的对象正确加载是必需的。

用户填写表单并提交它，@ModelAttribute 填充了用户输入，但每次调用控制器时都会创建一个对象，即使表单从未涉及。

我如何设计使对象仅在需要时创建一次。

# ios - 从主视图切换到其他视图

> ID：10556854
> 
> 赞同：1
> 
> 时间：2012-05-11T18:38:56.530
> 
> 标签：ios, cocoa-touch, view, uikit, viewcontroller

我正在尝试使用按钮从一个视图 (XIB) 转到另一个视图。我正在使用 Xcode 4.3.2 和 iOS 5。我从创建项目（单视图应用程序）开始。然后我在 Interface Builder 中创建我的按钮，在头文件中创建我的插座，在 .m 文件中创建我的 IBAction。接下来，我在 Xcode 中右键单击我的项目文件夹并选择“新建文件”。然后我选择了“Object-C Class”并将其命名为“SecondViewController”。创建了两个新文件，“SecondViewController.h”和“SecondViewController.m”。然后我返回并在 Xcode 中右键单击我的项目文件夹，选择“新建文件”并从“用户界面”选项中选择“查看”。

现在我有了一个空的 IBAction（我的按钮），我想用它来转到一个名为 SecondViewController.xib 的新视图。

如果到目前为止新的 XIB 和 .h/.m 文件的创建是正确的，那么我将如何使用我的按钮“到达”或显示我的第二个视图来执行此操作？请记住，我仍处于初学者水平，感谢您的帮助和耐心:)

我可以告诉我的主视图和我的 SecondView 之间的唯一区别是在头文件中：

主视图头文件：

```
@interface ButtonToNewViewViewController : UIViewController 
```

第二种查看头文件：

```
@interface SecondViewController : NSObject 
```

IBA动作：

```
-(IBAction)nextView:(id)sender
{
    // go to new view
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T19:08:42.363

这是一个相当简单的任务，许多在线教程都涵盖了这个任务，但无论如何我都会给你一些帮助。:-)

首先，当你创建 时`SecondViewController`，记得将它创建为 的子类`UIViewController`，而不是`NSObject`。因此，除非您对这些文件进行了大量工作，否则您可以继续重新创建它们。同时，您可以通过选中创建过程中的复选框来确保 Xcode 自动为您创建 xib 文件。

创建`SecondViewController`（.h、.m 和 .xib）后，打开`ButtonToNewViewController.m`并放在`#import "SecondViewController.h"`文件顶部。在您的方法`nextView:`中，您可以使用这两行代码更改为第二个视图控制器：

```
SecondViewController *second = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
[self presentViewController:second animated:YES completion:nil]; 
```

这应该会弹出第二个视图控制器，并带有一些简单的动画。确保您传递给的字符串`initWithNibName:`与您的 .xib 文件具有相同的名称。

如果你想回到`ButtonToNewViewController`，你可以在一个方法中使用它`SecondViewController`：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

这应该让事情弄清楚一点。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T10:25:20.913

对于返回此问题的任何人，从 iOS 6 开始，现在已弃用以下语法

```
[self presentModalViewController: ] 
```

替换非常相似

```
[self presentViewController:viewController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:06:59.350

您可以使用以下命令从一个 xib 更改为另一个。

```
- (IBAction)showInfo1:(id)sender
{    
    mySecondViewController *controller = [[mySecondViewController alloc] initWithNibName:@"nameOfMyXib" bundle:nil];
    [self setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:controller animated:YES];
} 
```

# ajax - 来自 ajax 和 getjson 响应的数据不适用于页面的其余部分 javascript

> ID：10556860
> 
> 赞同：0
> 
> 时间：2012-05-11T18:39:14.623
> 
> 标签：ajax, document-ready, bxslider

我遇到了问题，毫无疑问我怀疑我的 AJAX 和 JSON 新手技能。我的设置是这样的：我有一个在我的 HTML 末尾调用的墙板 javscript 对象。墙板实例化后，我有创建 BXSlider 对象的脚本标签（不喜欢这些挂在我的 HTML 的尾部）。我的墙板对象和我的 bxslider 对象都有内部 ajax 调用，其中一个是 getJSON。我的问题是这样的：毫不奇怪，我的异步调用没有及时返回响应以使页面接受数据。当然，如果我抛出一个 alert('test'); 它为 Firefox 12 提供了足够的加载时间，但在 Safari 5.1 或 IE 9 中仍然无法正常工作。

HTML：

```
<!DOCTYPE html>

<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Wallboard</title>
<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery.bxSlider.min.js" type="text/javascript"></script>
<script src="Scripts/wallboard.js" type="text/javascript"></script>
<script type="text/javascript" src="Scripts/yui.js"></script>
<style type="text/css">
body {
    overflow-x: auto;
    overflow-y: auto;
}
body, h1 {
    margin: 0;
}
#container {
    display: inline;
}
#leftPanel {
    position:fixed;   
    width: 350px;
    background-color: #E0DEDE;
    border-right: 1px solid gray;
    border-left: 1px solid gray;
}
#rightPanel {
    position: relative;
    margin-left: 352px;   
    background-color: #F2EFEF;
    border-left: 1px solid #FFF;
}
#rightPanelStatus {
    position: absolute;
    bottom: 0px;
    width: 100%;
    background-color: gray;
    border-top: 1px solid darkgray;
}
#rightPanelStatus .cmdBar {
    text-align: center;
}
#slideContainer { 
    list-style: none;
}
li {
    text-align: center;
}
img {
    height: 169px;
    width: 169px;
}   
.slideControl {
    display: inline;
    cursor: pointer;
}
#playControl, #pauseControl {
    margin: 10px;
    padding: 0 5px 0 5px;
}
</style>
</head>
<body onresize="changeHeight();">
  <div id="container">
    <div id="leftPanel">
      <ul id="slideContainer">  
      </ul>
    </div>
    <div id="rightPanel">
      <div id="rightPanelContainer">
      </div>
      <div id="rightPanelStatus">
        <div class="cmdBar"><div id="playControl" class="slideControl">Play</div><div id="pauseControl" class="slideControl">Pause</div></div>
      </div>
    </div>
  </div>
</body>
<script type="text/javascript">
    /* scale container height to adjust to browser window size. IE 7 hates this! */
    function changeHeight() {
        var sh = 460;
        if (document.body && document.body.offsetWidth) {
            sh = document.body.offsetHeight;
        }
        if (document.compatMode == 'CSS1Compat' &&
        document.documentElement &&
        document.documentElement.offsetWidth) {
            sh = document.documentElement.offsetHeight;
        }
        if (window.innerWidth && window.innerHeight) {
            sh = window.innerHeight;
        }
        document.getElementById("container").style.height = sh + "px";
        document.getElementById("leftPanel").style.height = sh + "px";
        document.getElementById("rightPanel").style.height = sh + "px";

    }
    /* initial call to get browser screen size after page loads */
    changeHeight();
</script>    
<script type="text/javascript">

    /* wallboard object */
    myWallboard = new wallboard();
    myWallboard.loadSlides();

    alert('test'); // THIS IS THE ABOVEMENTIONED ALERT TEST
    $(document).ready(function () {

        /* slider object */
        var slider = $('#slideContainer').bxSlider({
            auto: true,
            autoControls: false,
            mode: 'vertical',
            controls: false,
            speed: 1000,
            displaySlideQty: 5,
            moveSlideQty: 1,
            onBeforeSlide: function (currentSlide) {
            myWallboard.setSlideSpeed(slider, currentSlide, myWallboard.slides);
            myWallboard.AJAXRequest(myWallboard.slides[currentSlide][1], 'rightPanelContainer');
            }
        });
        var cs = slider.getCurrentSlide();
        myWallboard.setSlideSpeed(slider, cs, myWallboard.slides);
        myWallboard.AJAXRequest(myWallboard.slides[cs][1], 'rightPanelContainer');
        /* controls */
        $('#pauseControl').click(function () {
            document.getElementById('pauseControl').style.backgroundColor = "#C4C4C4"
            document.getElementById('pauseControl').style.padding = "4px"
            document.getElementById('playControl').style.backgroundColor = ""
            document.getElementById('playControl').style.padding = "0 4px 0 4px"
            myWallboard.stopSlideTimer();
            slider.stopShow();
            return false;
        });
        $('#playControl').click(function () {
            document.getElementById('playControl').style.backgroundColor = "#C4C4C4"
            document.getElementById('playControl').style.padding = "4px"
            document.getElementById('pauseControl').style.backgroundColor = ""
            document.getElementById('pauseControl').style.padding = "0 4px 0 4px"
            slider.startShow();
            return false;
        });
    });
</script>
</html> 
```

墙板.js

```
/* wallboard constructor */
function wallboard() {
    var t = 0;
    var _this = this;
    this.slides = new Array(5);
    /* create a multidimensional array of each slide. */
    for (var i = 0; i < this.slides.length; i++) {
        /* create next dimension (url) */
        this.slides[i] = new Array(3);
    }
    this.loadSlides = function () {
        var _this = this;
        $.getJSON('jsonReturn.aspx', function (json, status) {
            var i = 0;
            $.each(json, function (key, val) {
                _this.slides[i][0] = val.imagePath;
                _this.slides[i][1] = val.url;
                _this.slides[i][2] = val.duration;
                i++;
            });
            for (var i = 0; i < _this.slides.length; i++) {
                document.getElementById('slideContainer').innerHTML += '<li><img src="' + _this.slides[i][0] + '" /></li>\n';
            }
        });
    }
    this.startSlide = function (slider) {
        slider.startShow();
    }
    this.stopSlideTimer = function () {
        try {
            // alert("pausing slides. killing setTimeout " + t);
            clearTimeout(t);
            return false;
        }
        catch (err) {
            alert("Could not stop slide timer.");
        }
    }
    this.setSlideSpeed = function (slider, cs, sa) {
        var _this = this;
        clearTimeout(t);
        slider.stopShow();
        //alert('testing sa[cs][2]: ' + sa[cs][2]);
        t = setTimeout(function () { _this.startSlide(slider); }, sa[cs][2] * 1000);
    }
    this.AJAXRequest = function (uri, div) { // leftover YUI, replace with jQuery
        // Create a YUI instance using io-base module.
        YUI().use("io-base",
        function (Y) {
            /* the following can be used to post variables to a page this
            may be useful for sending parameters to a server side page */
            var cfg = {
                method: 'POST',
                form: {
                    id: 'myform',
                    useDisabled: false
                }
            };
            {
                // Define a function to handle the Ajax response data.
                function complete(id, o, args) {
                    // used for debugging
                    //alert("id:" + id + ", o.responseText: " + o.responseText + ", args: " + args);
                    // put the html returned in the main slide div
                    document.getElementById(div).innerHTML = o.responseText;
                };
                // Subscribe to event "io:complete", and pass an array
                // as an argument to the event handler "complete"
                Y.on('io:complete', complete, Y, ['arguments (these may not be needed)']);
                var request = Y.io(uri);
            }
        });
    }
} 
```

那么，如何重新编写代码以使 AJAX 调用完成并且数据可用于 bxslider 和墙板对象？虽然我发现了很多关于类似问题的问题，但我无法使用他们的解决方案来解决这个问题。

谢谢，布赖恩

# c# - 如何获取长期访问令牌 Google API

> ID：10556864
> 
> 赞同：7
> 
> 时间：2012-05-11T18:39:30.710
> 
> 标签：c#, winforms, .net-4.0, google-docs-api, google-data-api

在谷歌文档中它说

```
// Once the user authorizes with Google, the request token can be exchanged
// for a long-lived access token.  If you are building a browser-based
// application, you should parse the incoming request token from the url and
// set it in OAuthParameters before calling GetAccessToken(). 
```

但它没有说明或说明如何做到这一点:(

有谁知道如何为桌面应用程序做到这一点？

代码示例非常受欢迎！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T16:50:18.077

好的，一段时间后我解决了。

获得访问令牌后，您还将获得刷新令牌。存储那个令牌！

在您发出下一个请求之前，`parameters.AccessToken = StoredRefreshToken`也要这样做`parameters.RefreshToken = StoredRefreshToken``OAuthUtil.RefreshAccessToken(parameters);`

然后你应该很好地提出请求！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T19:13:50.597

您是否将[AuthSub 与 .NET 客户端库一起](https://developers.google.com/gdata/articles/authsub_dotnet)使用。如果是这样，试试这个

```
if (Request.QueryString["token"] != null)
{
    String token = Request.QueryString["token"];
    Session["token"] = AuthSubUtil.exchangeForSessionToken(token, null).ToString();
    Response.Redirect(Request.Url.AbsolutePath, true);
}​ 
```

PS：上面的链接有完整的代码清单。

# c# - 如何在服务器标记的 aspx 文件中调用代码隐藏函数

> ID：10556867
> 
> 赞同：3
> 
> 时间：2012-05-11T18:39:49.483
> 
> 标签：c#, asp.net, html

我有一个 TabPanel，我想使用函数后面的代码设置其 HeaderText 属性，例如。

```
<asp:TabPanel ID="id" runat="server" HeaderText='<%= String.Format("{0}","some text") %>'> 
```

我不能将函数调用放在开始和结束标记之间，因为它是一个 TabPanel，但是当我执行上述操作时，我只会在页面上得到一个空标题。我也试过 <%# %> （我不确定两者之间的区别）。

String.Format 只是一个例子，而不是我试图调用的真正函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:47:32.420

我知道有些属性不支持内联语法，不幸的是，这可能就是其中之一。语法看起来不错，这让我认为可能是这种情况。要解决此问题，只需`HeaderText`在代码隐藏中设置。

至于 和 之间的区别`<%= ... %>`，`<%# ... %>`后者严格用于数据绑定语法：

```
<Columns>
    <asp:TemplateField>
        <ItemTemplate>
            <%# Eval("SomeValue") %>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

**编辑**

实际上有一种我以前没有想到的更简单的方法。只需使用`HeaderTemplate`动态设置列标题文本：

```
<Columns>
    <asp:TemplateField>
        <HeaderTemplate>
            <%# Eval("SomeHeaderValue") %>
        </HeaderTemplate>
        <ItemTemplate>
            <%# Eval("SomeValue") %>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:46:49.897

尝试：

`HeaderText='<%# TabPanel_HeaderText %>'`

在后面的代码中

```
protected string TabPanel_HeaderText
{
    get { return String.Format("{0}","some text"); }
} 
```

# asp.net - 从来自 NSUrlRequest 的 httpcontext 获取变量

> ID：10556869
> 
> 赞同：1
> 
> 时间：2012-05-11T18:39:50.290
> 
> 标签：asp.net, objective-c, web-services, httprequest, httpcontext

> **可能重复：**
> [从来自 NSUrlRequest 的 httpcontext 获取变量](https://stackoverflow.com/questions/10559551/get-variable-from-httpcontext-coming-from-nsurlrequest)

这个问题将是 Iphone 和 asp.net 服务器之间的 http 连接“POST”的一个很好的教程 :) 我想要做的是将图像从 iphone 发送到 Asp.net 服务器；这是我在objective-c中的uploadImage函数：

```
- (IBAction)uploadImage {
/*
 turning the image into a NSData object
 getting the image back out of the UIImageView
 setting the quality to 90
*/
NSData *imageData = UIImageJPEGRepresentation(image.image, 33);
// setting up the URL to post to
NSString *urlString = @"MyWebServiceUrl";

// setting up the request object now
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

/*
 add some header info now
 we always need a boundary when we post a file
 also we need to set the content type

 You might want to generate a random boundary.. this is just the same 
 as my output from wireshark on a valid html post
*/
NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

/*
 now lets create the body of the post
*/
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; filepath=\"ProfilePic\"; filename=\"ipodfile\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[request setHTTPBody:body];

// now lets make the connection to the web
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"%@", returnString); 
```

}

这是我的 webService 函数，它解析发送的数据并保存文件：

```
public class SaveData : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        bool hasErrors = false;
        HttpFileCollection filesPosted = context.Request.Files;
        String filePath = context.Request.QueryString["filepath"];
        String fileName = context.Request.QueryString["filename"];
        try
        {
            if (String.IsNullOrEmpty(fileName) || String.IsNullOrEmpty(filePath) || filesPosted.Count <= 0)
                hasErrors = true;

            if (!hasErrors)
            {
                HttpContext.Current.Response.Write(WriteFile(filesPosted[0], filePath, fileName));
            }
            else
            {
                context.Response.Write("Failed: parsing error");
            }
        }
        catch (Exception ex)
        {
            context.Response.Write("Failed: exception error:::" + ex.Message);
        }

    }

    private string WriteFile(HttpPostedFile file, String filePath, String fileName)
    {
        System.IO.Directory.CreateDirectory(filePath);
        int counter = 0;
        string path = String.Format("{0}\\{1}.jpg", filePath, fileName);
        while (System.IO.File.Exists(path))
        {
            counter++;
            path = String.Format("{0}\\{1}-{2}.jpg", filePath, fileName, counter);
        }

        file.SaveAs(path);
        return path;
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

我的问题来自这两行

```
 String filePath = context.Request.QueryString["filepath"];
        String fileName = context.Request.QueryString["filename"]; 
```

context.Request.QueryString 返回 null 所以我的 hasErrors 是假的；任何如何解决这个问题的想法将不胜感激，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:58:15.897

经过一天的尝试后，这里的解决方案：

客户端代码：

```
// post body
NSMutableData *body = [NSMutableData data];

// add params (all params are strings)
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"filename"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%@\r\n", imageName] dataUsingEncoding:NSUTF8StringEncoding]];

// add image data
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"myImage\"; filename=\"image.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
} 
```

Asp.net 服务器代码：

```
String filePath = context.Request.Form["filename"]; 
```

希望你喜欢这个问题（教程）；）

# selenium - Selenium IDE 不记录自动计算

> ID：10556871
> 
> 赞同：0
> 
> 时间：2012-05-11T18:39:53.567
> 
> 标签：selenium, ide

好的，所以我有一个表格。我在一个文本框中输入数值，同时系统在第二个（只读）文本框中计算并显示值。当我用 IDE 记录它时，第二个文本框没有任何值。

当我说“同时”时，我的意思是当我在 text_box_1 中输入“1”时，text_box_2 会同时显示“1”。这些只是示例编号，但是，这就是它在应用程序中的工作方式。

如果有人可以指导我如何确保 IDE 记录 text_box_2 中显示的内容，我将不胜感激。

谢谢，弗拉德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:00:49.367

这是因为第二个框很可能是通过一些 javascript 更新程序写入的。为了让它工作，您可能必须使用 Selenium WebDriver 的“SendKeys”，它实际上会模拟输入框。我不确定为什么 IDE 的输入不这样做，但想法是触发 javascript 'update' 或 'change' 事件，以便它将填充第二个框中的文本。如果这不起作用，您还可以手动调用 javascript 更新；虽然这不是推荐的方法。我不使用 IDE，因此可能有人会有更好的解决方案，但我建议如果您正在进行此类测试，您可能需要考虑迁移到 WebDriver（但这纯粹是我的意见！:)）。

# java - 如何防止 servlet 在响应中转义双引号

> ID：10556873
> 
> 赞同：0
> 
> 时间：2012-05-11T18:39:56.430
> 
> 标签：java, tomcat, libcurl

我将带有嵌入式双引号的数据从 libcurl 客户端发布到 Tomcat servlet。servlet 读取数据并将其发送回我的客户端。

我发送的内容如下所示

```
{
   "id": 1,
   "name": "Foo",
} 
```

但是我从 servlet 收到的内容看起来像这样

```
{
   \"id\": 1,
   \"name\": \"Foo\"
} 
```

即所有的双引号都被转义了。

如何防止 servlet 转义引号？我的 servlet 在 doPost 方法中做这样的事情

```
public void doPost(HttpServletRequest request,
                      HttpServletResponse response)
        throws IOException, ServletException
{
    BufferedReader reader = request.getReader();
    StringBuilder content = new StringBuilder();
    char[] buffer = new char[4 * 1024];
    int len = 0;
    while (len >= 0) { 
        len = reader.read(buffer, 0, buffer.length); 
        if (len > 0) { 
            content.append(buffer, 0, len);
        }
    }

    PrintWriter out = response.getWriter(); 
    out.print(content.toString())
} 
```

***编辑***
这解决了我的问题。

```
URLEncoder.encode(content.toString(),"UTF-8") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:45:52.793

在编写字符串之前对其进行编码。

# unicode - 应该在输出中过滤的 Unicode 字符列表？

> ID：10556875
> 
> 赞同：20
> 
> 时间：2012-05-11T18:40:14.357
> 
> 标签：unicode, escaping, jsonp, data-quality

最近，由于浏览器支持的数据质量问题，我遇到了一个错误，我正在寻找一个安全的规则来应用字符串转义而不是双倍大小，除非需要。

UTF-8 字节序列“E2-80-A8”（U+2028，行分隔符），Unicode 数据库中完全有效的字符。但是，该序列表示行分隔符（是的，除“0A”之外）。

糟糕的是，许多浏览器（包括 Chrome、Firefox 和 Safari；我没有测试其他浏览器）无法处理包含该 Unicode 字符的字符串的 JSONP 回调。JSONP 包含在我无法控制的非 Unicode HTML 中。

浏览器只是在此类 JavaScript 上报告了 INVALID CODE/syntax 错误，从调试工具和所有文本编辑器看起来都是有效的。我猜它可能会尝试将“E2-80-A8”转换为 BIG-5 并破坏 JS 语法。

以上只是 Unicode 如何意外破坏您的系统的一个示例。据我所知，一些黑客可以使用 RTL 和其他控制字符来为他们谋福利。Unicode 规范中有很多“引号”、“空格”、“符号”和“控件”。

问题：

是否有一个 Unicode 字符列表供每个程序员了解隐藏的功能（和错误），我们可能不希望它们在我们的应用程序中有效。（例如 Windows 在文件名中禁用 RTL）。

编辑：

我不要求 JSON 或 JavaScript。我要求在所有程序中处理 Unicode 的一般最佳实践。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T19:18:13.063

它破坏了 javascript，因为字符串中不能有换行符：

```
var myString = "

";

//SyntaxError: Unexpected token ILLEGAL 
```

现在，UTF-8 序列`"E2-80-A8"`解码为 un​​icode 代码点[`U+2028`](http://www.fileformat.info/info/unicode/char/2028/index.htm)，其处理方式类似于 javascript 中的换行符：

```
 var myString = " ";

//Syntax Error 
```

但是，写起来是安全的

```
var myString = "\u2028";
//you can now log myString in console and get real representation of this character 
```

这就是正确编码的 JSON 所具有的。我会考虑正确编码 JSON，而不是保留不安全字符的黑名单。（它们是 U+2028 和 U+2029 AFAIK）。

在 PHP 中：

```
echo json_encode( chr(0xe2). chr(0x80).chr(0xA8 ) );
//"\u2028" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T16:45:59.637

查看 Unicode 图表。有一个非打印字符列表。这些是潜在的麻烦制造者。你的朋友 U+2028 有很多朋友：[http](http://www.unicode.org/charts/PDF/U2000.pdf) ://www.unicode.org/charts/PDF/U2000.pdf而且它不只是在 2000 范围内。

您可以将它们全部核对，也可以将它们分成不同的类别（像 U+2028 这样的 SEP 字符变为 \n 或正确转义）等。

高温高压

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T18:00:45.550

有一个字符属性数据库和一个描述它的报告，[UNICODE CHARACTER DATABASE](http://unicode.org/reports/tr44/#Properties)，它很好地说明了浏览器“应该”如何处理代码点。我喜欢这个词，“应该”。最安全的将是白名单，您可能会选择 L|M|N|S、字母或标记、数字或符号。

看看图书馆的[ICU 项目](http://site.icu-project.org/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T01:11:07.097

AZ、az 和 0-9 通常是安全的。在这 62 个字符之外，您将遇到某些系统的问题。没有人可以给你其他答案。

例如，您提到域名。处理 Unicode 域名的唯一方法是遵循 RFC 3454 和 RFC 5890-5893，并仅以这种方式处理数据。大多数 Unix 文件系统上的文件名是不包括 / 或 \0 的任意字节字符串。在功能上将 Unix 上的文件名视为 Unicode 字符串而不破坏任何内容本身就是一个问题。请注意，Windows 文件名不是 AZ 安全的；NUL 和 PRN 之类的东西是保留名称。每个领域都有自己的小问题和怪癖，没有简单的总结足以满足任何地方的需要。

# javascript - 将“getHours()”方法的 1-24 小时更改为 1-12 小时

> ID：10556879
> 
> 赞同：23
> 
> 时间：2012-05-11T18:40:26.543
> 
> 标签：javascript, time, hour

当我在 javascript 中使用“getHour()”方法时，它会显示军用时间格式。我需要它以 1-12 之间的数字显示小时。谁能告诉我该怎么做？这是我正在使用的代码：

```
function updateclock()
{

    var time = new Date();
    var todisplay = '';

    if (time.getHours() < 10) todisplay += time.getHours();
    else todisplay += time.getHours();

    if (time.getMinutes() < 10) todisplay += ':0' + time.getMinutes();
    else todisplay += ':' + time.getMinutes();

    document.getElementById("clock").innerHTML = todisplay;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-07-17T13:42:19.077

为什么不做简短的方式呢？数学，人！:)

```
// returns the hours number for a date, between 1 and 12
function hours12(date) { return (date.getHours() + 24) % 12 || 12; } 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-11T18:42:57.970

这会将 13 - 24 校正回 1 - 12 的范围，并将 0 校正回 12：

```
var hours = time.getHours();
if (hours > 12) {
    hours -= 12;
} else if (hours === 0) {
   hours = 12;
} 
```

此外，您需要停止在代码中重复自己。每次调用`time.getHours()`和`time.getMinutes()`存储它们的值*一次*，*然后*担心添加前导零，例如：

```
function updateclock() {

    function pad(n) {
         return (n < 10) ? '0' + n : n;
    }

    var time = new Date();
    var hours = time.getHours();
    var minutes = time.getMinutes();

    if (hours > 12) {
        hours -= 12;
    } else if (hours === 0) {
        hours = 12;
    }

    var todisplay = pad(hours) + ':' + pad(minutes);
    document.getElementById("clock").innerHTML = todisplay;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-26T09:04:50.310

```
function getClockTime(){
   var now    = new Date();
   var hour   = now.getHours();
   var minute = now.getMinutes();
   var second = now.getSeconds();
   var ap = "AM";
   if (hour   > 11) { ap = "PM";             }
   if (hour   > 12) { hour = hour - 12;      }
   if (hour   == 0) { hour = 12;             }
   if (hour   < 10) { hour   = "0" + hour;   }
   if (minute < 10) { minute = "0" + minute; }
   if (second < 10) { second = "0" + second; }
   var timeString = hour + ':' + minute + ':' + second + " " + ap;
   return timeString;
} 
```

> 此功能将在 1-12 小时内提供完美的时间格式

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-26T01:23:18.977

其他答案确实很好。但我认为，也可以包括以下内容。

```
var d = new Date();
var hour = d.getHours(); 
var minute = d.getMinutes();
var fulltime = "";

// create a 24 elements(0-23) array containing following values
const arrayHrs = [12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11];

    // since getMinutes() returns 0 to 9 for upto 9 minutes, not 00 to 09, we can do this
    if(minute < 10) {
        minute = "0" + minute;
    }

    if( hour < 12) {
        // Just for an example, if hour = 11 and minute = 29
        fulltime = arrayHrs[hour] + ":" + minute + " AM"; // fulltime = 11:29 AM
    }
    else {
        // similarly, if hour = 22 and minute = 8
        fulltime = arrayHrs[hour] + ":" + minute + " PM"; // fulltime = 10:08 PM
    } 
```

看看我在 arrayHrs 中做了什么；）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-06T04:36:09.807

**最短：**

```
const hours12 = date => (date.getHours() % 12  || 12); 
```

**如果您需要使用 0 填充：**

```
const hours12 = date => ("0"+(date.getHours() % 12  || 12)).slice(-2); 
```

**另一个选项，还有 AM & PM：**

```
const hours12 = date => date.toLocaleString('en-US', { hour: 'numeric', hour12: true }) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-09T08:51:17.677

使用它的简单方法。

```
setInterval(function() {

var d = new Date();

document.getElementById("demo").innerHTML = 
d.getHours() % 12+" : "+d.getMinutes()+" : "+d.getSeconds();

}, 1000);
```

```
<p id="demo" ></p>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-16T07:00:02.317

这会将 24h 时间转换为 12h，并添加 AM 和 PM 后缀。

```
const hours12 = (date) => {
    let ampm = date.getHours() >= 12 ? 'pm' : 'am';
    return `${(date.getHours() % 12  || 12)} ${ampm}`;
};
console.log(hours12(new Date()));
```

*@chickens 的修改版本。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-09T01:49:48.003

类似于接受的答案，但没有`||`运算符。

纯算术：

```
// returns the hours number for a date, between 1 and 12
function hours12(date) { return (date.getHours() + 11) % 12 + 1; } 
```

在这里测试一下。模拟 0 - 23 小时：

```
var demoTable = document.getElementById("demo");

// simulate getHours() values 0-23
for (i = 0; i < 24; i++) {
  var row = demoTable.insertRow(-1);
  var format24Cell = row.insertCell(0);
  var conversionCell = row.insertCell(1);
  var format12Cell = row.insertCell(2);
  format24Cell.innerHTML = i;
  conversionCell.innerHTML = "( <b>" + i + "</b> + 11) % 12 + 1 =";

  // conversion takes place here
  format12Cell.innerHTML = (i + 11) % 12 + 1;
}
```

```
table {
  border-collapse: collapse;
  width: 100%;
}

table,
th,
td {
  border: 1px solid black;
}

th {
  padding: 0, 5px
}

td {
  padding-left: 5px;
}
```

```
<table id="demo">
  <tr>
    <th colspan="3">24 to 12 Hour Format Conversion Demo</th>
  <tr>
  <tr>
    <th>24 Hour Format</th>
    <th>Conversion</th>
    <th>12 Hour Format</th>
  </tr>
</table>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-04T16:27:13.040

这可以使用 .getHours() 函数轻松实现。请记住，getHours 返回 0 到 23 之间的整数值，因此您所要做的就是检查 0 值

```
let date = new Date()
let hour = (date.getHours()===0)? 24:date.getHours()
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-14T05:58:06.557

```
getDateTime = () => {
    const today = new Date();
    const day = today.toLocaleDateString('en-us', { weekday: 'short' });
    const month = today.toLocaleString('en-us', { month: 'short' });
    const date = today.getDate()
    const year = today.getFullYear()
    const hours = today.getHours()
    const minutes = today.getMinutes().toString()
    var dayORnight = "AM";
    if (hours > 11) { dayORnight = "PM"; }
    if (hours > 12) { hours = hours - 12; }
    if (hours == 0) { hours = 12; }
    if (hours < 10) { hours = "0" + hours; }
    if (minutes < 10) { minutes = "0" + minutes; }

    const datetime = `${day}, ${month} ${date}, ${year} at ${hours}:${minutes} ${dayORnight}`;
    console.log(datetime)
} 
```

# twitter - 识别 twitter 个人资料具有默认图像

> ID：10556886
> 
> 赞同：0
> 
> 时间：2012-05-11T18:41:02.053
> 
> 标签：twitter

全部

我想计算我的追随者个人资料是否具有默认的 Twitter 个人资料图片。（简而言之，不会更改默认图片）例如。

![在此处输入图像描述](../Images/733bbf8ef38c8931884690423fb4d9b6.png)

那可能吗 ？如何？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:00:41.977

是的，这是可能的！

首先找出您的关注者 ID 列表：[https ://dev.twitter.com/docs/api/1/get/followers/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)

然后查找您的关注者： [https ://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

`"default_profile_image":true`如果他们有默认的个人资料图片，您将收到关注者。

例如，如果您使用 JSON查询[自己的 Twitter 帐户：](https://twitter.com/#!/ajaypatel_aj) [https ://api.twitter.com/1/users/lookup.json?screen_name=ajaypatel_aj](https://api.twitter.com/1/users/lookup.json?screen_name=ajaypatel_aj)

你会看见：

```
"default_profile_image":false 
```

或使用 XML：[https ://api.twitter.com/1/users/lookup.xml?screen_name=ajaypatel_aj](https://api.twitter.com/1/users/lookup.xml?screen_name=ajaypatel_aj)

你会看见：

```
<default_profile_image>false</default_profile_image> 
```

# c# - 无法启用此约束，因为并非所有值都有对应的父值

> ID：10556887
> 
> 赞同：9
> 
> 时间：2012-05-11T18:41:04.180
> 
> 标签：c#, asp.net, sql, ado.net, dataset

我在数据集中有三个嵌套表。我根据语言 ID 显示数据，即：EN 为 1 FR 为 2，NL 为 3。数据库中存在法语和英语，但荷兰语尚不存在，当用户选择 NL 时出现以下错误：

> 无法启用此约束，因为并非所有值都具有相应的父值。

下面是我用来获取数据的代码。当我尝试在数据集中创建关系时会发生错误。

```
 (ds.Relations.Add(new DataRelation("Cat_SubCat", dk1, dk2)); 
```

现在我的问题是，如何使用下面的给定代码检查数据集或数据库中是否存在该值？

```
 public static DataTable GetData(Int32 languageID)
    {
        DataSet ds = new DataSet();

        string commandText = @"SELECT * FROM AlacarteCat where languageID = @ID;
                               SELECT * FROM AlacarteSubCat where languageID = @ID;
                               SELECT * from AlacarteItems where languageID = @ID";

        using (SqlConnection myConnection = new SqlConnection(Common.GetConnectionString("SQLConnectionString")))
        {
           SqlCommand command = new SqlCommand(commandText, myConnection);
            command.Parameters.Add("@ID", SqlDbType.Int);
            command.Parameters["@ID"].Value = languageID;

            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = command;
            da.TableMappings.Add("AlacarteCat", "AlacarteCat"); // table 0
            da.TableMappings.Add("AlacarteSubCat", "AlacarteSubCat"); // table 1
            da.TableMappings.Add("AlacarteItems", "AlacarteItems"); // table 2
            da.Fill(ds, "AlacarteCat");

            DataColumn dk1 = ds.Tables[0].Columns["ID"];
            DataColumn dk2 = ds.Tables[1].Columns["AlacarteCatID"];
            DataColumn dk3 = ds.Tables[1].Columns["ID"];
            DataColumn dk4 = ds.Tables[2].Columns["AlacarteSubCatID"];
            DataColumn dk5 = ds.Tables[0].Columns["id"];
            DataColumn dk6 = ds.Tables[2].Columns["AlacarteCatID"];
            ds.Relations.Add(new DataRelation("Cat_SubCat", dk1, dk2));
            ds.Relations.Add(new DataRelation("SubCat_Items", dk3, dk4));
            ds.Relations.Add(new DataRelation("Cat_Items", dk5, dk6));

            if ((ds != null))
            {
                return ds.Tables["AlacarteCat"];
            }
            return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-03T20:30:26.703

默认情况下，当您创建关系时，它会强制执行外键约束，通过设置为 false，您会告诉它您不想强制执行关系。

`ds1.DataRelation.Add(“relCustOrder”, parentCol, childCol, false)`

解决方案是将 DataRelation 类中的约束设置为 false

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-18T13:48:28.127

在 select 语句中使用子查询来控制相关的行。它会工作的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-04-11T13:12:22.097

我通过添加缺少的表条目解决了我的问题。我用来从 sql server 表构建菜单树。

您也必须在表格中丢失一个条目

一些 childCol 正在变为 NULL

# sql - 在不存在的地方使用参数插入

> ID：10556888
> 
> 赞同：0
> 
> 时间：2012-05-11T18:41:18.930
> 
> 标签：sql, sql-server, tsql

以下查询不会失败，但也不会插入唯一值。

我只想插入唯一值

```
DECLARE @user_id AS varchar(80) 
DECLARE @real_name as varchar(250) 
```

--新的唯一值是“aaa”并且它们不存在于目标表中

```
SET @user_id = 'aaa'
SET @real_name = 'aaa'

INSERT INTO TargetTable
  ([user_id],real_name)
SELECT @user_id, @real_name
WHERE NOT EXISTS
  (SELECT [user_id],real_name FROM TargetTable) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:59:54.833

如果您在插入时遇到问题，请尝试以下不同的方法：

```
-- if the count of records with that @user_id and @real_name is less or equal to 0, 
-- that means it's not in the table
IF (0 >= (SELECT COUNT(*) FROM TargetTable WHERE @user_id = [user_id] AND @real_name = [real_name]))
BEGIN
   -- then call a normal insert
   INSERT
     INTO TargetTable ([user_id], real_name )
   VALUES             (@user_id , @real_name)

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:50:32.537

查询插入行的唯一方法是，如果数据库中没有包含“aaa”、“aaa”的行。

看，你在做

```
SELECT 'aaa','aaa'
WHERE NOT EXISTS
(SELECT [user_id],real_name FROM TargetTable) 
```

因此，它的`'aaa','aaa'`结果集“减去”或“除外”由目标表上每一行的 user_id 和 real_name 列形成的结果集。

所以如果 'aaa','aaa' 已经存在于第二个结果集中，它将被排除在最终结果集中，因此不会被插入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:57:18.610

万一有人仍然关心，或者稍后再看这个问题......

最初的问题是 OP 使用了一个`WHERE NOT EXISTS`子句来检查目标表中存在的*任何*行，而不是*特定*的行。只需检查您要插入的数据：

```
DECLARE @user_id AS varchar(80)  
DECLARE @real_name as varchar(250)  

 --New Unique values are "aaa" and they do not exist in the target table
SET @user_id = 'aaa' 
SET @real_name = 'aaa' 

INSERT INTO TargetTable 
  ([user_id],real_name) 
SELECT @user_id, @real_name 
WHERE NOT EXISTS 
  ( SELECT 42 FROM TargetTable WHERE [user_id] = @user_id AND real_name = @real_name ) 
```

（当前）接受的答案鼓励不安全的设计，其中执行两个单独的查询而没有`TRANSACTION`. 查询之间发生的变化可能会导致不愉快的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T21:06:33.887

这是为了解决user92546的顾虑。插入发生在查询 TargetTable 的同一查询中。唯一的子选择是针对变量的，它们显然不会在此插入过程中发生变化，而表可能会在任何微秒内发生变化。

```
DECLARE @user_id AS varchar(80)  
DECLARE @real_name as varchar(250)  

 --New Unique values are "aaa" and they do not exist in the target table
SET @user_id = 'aaa' 
SET @real_name = 'aaa' 

INSERT INTO TargetTable ([user_id],real_name) 
SELECT T1.user_id, T1.real_name 
FROM (select @user_id [user_id], @real_name [real_name] ) T1
LEFT JOIN TargetTable T2
   on T1.user_id = T2.user_id
     and t1.real_name = T2.real_name
     and T2.user_id = @user_id
     and T2.real_name = @real_name
WHERE T2.user_id is null 
```

# python - 在 Python 中读取和写入文件

> ID：10556891
> 
> 赞同：1
> 
> 时间：2012-05-11T18:41:45.817
> 
> 标签：python, file, file-io

我正在编写一个有两个输入的脚本：

1.  包含名称列表的文件，
2.  不同的文件（可以是空的或非空的）

该脚本的目的是从第一个文件中获取名称，访问某个 API 并获取有关每个名称的信息，然后将该信息写入第二个文件。如果第二个文件已经包含信息，则脚本读取写入文件的最后一行，在第一个文件中找到该条目，然后从该条目开始。但是，在读取和写入第二个文件时，我遇到了麻烦。

当我将第二个文件类型设置为“r+”然后在 file_two.read() 上进行打印时，它会显示第二个文件的内容。当我在下一行进行另一次打印时，它将文件显示为空。同样，当我将文件类型设置为“a+”时，两次都显示文件完全为空，即使我可以清楚地看到文本文件中的信息确实存在。有谁知道发生了什么？

这是处理写入的代码段：

```
def write_to_file(filename, users):
    pages = range(0, len(users) - 100, 100)
    for page in pages:
        user_names = get_users(users[page: page+100])
        lines = [format_user(user) for user in user_names]
        output_text = '\n'.join(lines)
        with filename as output_file:
            output_file.write(output_text.encode('utf-8')) 
```

这是调用上述函数的代码段。

```
file_one = args.file1
file_two = args.file2
users = read_names_automatic(file_one)
write_to_file(file_two, users) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:58:16.380

> 当我将第二个文件类型设置为“r+”然后在 file_two.read() 上进行打印时，它会显示第二个文件的内容。当我在下一行进行另一次打印时，它将文件显示为空。

是的，这是预期的行为。文件指针指向文件末尾的末尾`file_two.read()`，因此任何进一步读取的尝试都会返回一个空字符串。例如，检查以下内容：

```
with open("test.txt") as f:
    print f.readline() # => prints the first line, sets file pointer to second line
    print f.read() # => prints everything from the second line on 
```

要将文件指针重置到文件的开头：

```
with open("test.txt") as f:
    print f.read() # => prints entire file, sets file pointer to end of file
    f.seek(0) # => reset file pointer to beginning of file
    print f.read() # => prints entire file 
```

> 同样，当我将文件类型设置为“a+”时，两次都显示文件完全为空，即使我可以清楚地看到文本文件中的信息确实存在。

当 you`open("test.txt", "a+")`时，文件指针设置为文件末尾，因此任何读取尝试都会产生一个空字符串。实际上，这就是允许您*附加*到文件的原因。如果你`file_two.seek(0)`再接再厉`file_two.write()`，所写的文字会被添加到开头`file_two`。

# perl - Perl 命令行 - 如果找到字符串替换下一行

> ID：10556894
> 
> 赞同：3
> 
> 时间：2012-05-11T18:41:47.127
> 
> 标签：perl

我是一个完全 Perl 的菜鸟，并试图弄清楚这件事是否可以完成。我有一个文本文件，其中包含公式名称等数据，然后是下一行（单行）中的公式，如下所示 -

```
Formula Name = abc formula for TAT
count(a)+500 
```

公式名称是唯一的。我需要搜索公式名称，然后在下一行替换公式。做这个的最好方式是什么？可以用perl命令行完成吗？

似乎命令行一次读取一行文件，我需要使用`-0NNN`开关才能在多行上进行操作。但我不确定如何使用它。

提前致谢！

Ĵ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:57:54.320

您不需要使用该`-0777`选项，您可以简单地阅读并丢弃一行，然后将您想要的任何内容添加到当前行。

```
perl -pe 'if (/Formula Name/) { <>; $_ .= "new formula$/"; }' filename 
```

我曾经`$/`代表您的换行符，因为它应该与 readline 使用的相同。但你也可以使用`\n`。要进行就地编辑，只需添加`-i.bak`开关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:48:53.140

我认为在这种情况下可以使用 perl。但现在我知道一种在 SED 中解决的方法。它有助于？

```
$ cat xxx
Formula Name blablabla
cos(x) + i sen(x)

other stuff
$ sed '/Formula Name/{n;s/.*/e=mc2/;}' xxx
Formula Name blablabla
e=mc2

other stuff 
```

要在 perl 中做到这一点，我们需要多几行，我会尝试一些示例，稍后再写在这里。

编辑：

```
$ perl -ne 's/.*/e=mc2/ if $find; print; $find=/Formula Name/;' xxx
Formula Name blablabla
e=mc2

other stuff 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T19:19:37.570

`bash`句法：

```
perl -i.vixmp -pe'
    s/\Q$name\E/\U$name/ if $name;
    ($name) = /Formula Name = (\S+)/;
' file 
```

`cmd`句法：

```
perl -i.vixmp -pe"
    s/\Q$name\E/\U$name/ if $name;
    ($name) = /Formula Name = (\S+)/;
" file 
```

您没有准确指定需要替换的内容以及需要替换的内容，因此将公式名称替换为大写。根据需要进行调整。

如果您要查找特定公式而不是所有公式，只需更改`\S+`您要查找的公式的名称即可。

*重要提示*：您必须从版本中删除换行符`cmd`才能使其正常工作。（我使用它们是为了便于阅读。）您可以从版本中删除换行符`bash`，但它是可选的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T18:53:24.377

您可以使用替换正则表达式来做到这一点。您可以将文本的每一行与正则表达式匹配，然后根据需要替换第二部分，例如这样的东西应该可以工作：

```
$repl = "replacement formula for the line";
$line =~ s/(Formula Name\s=\s)([\w]\d]+)$/$1 $repl/; 
```

# c# - 在 MVC 应用程序中搜索

> ID：10556899
> 
> 赞同：2
> 
> 时间：2012-05-11T18:42:15.157
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework-4

我有一个页面，其中为用户提供了四个**搜索**字段。我想取字段的交集并显示结果。但是，用户不需要填写所有字段。

在我的控制器中，我有以下代码。

```
string subject = (string)Session[d.sessionSearchSubject];
string courseNumber = (string)Session[d.sessionSearchCourseNum];
string yearLev = (string)Session[d.sessionSearchYearLev];
string period = (string)Session[d.sessionSearchPer];

if (!(subject.Equals("") && courseNumber.Equals("") && yearLev.Equals("") && period.Equals("")))
{
   db.Courses.Where(a => a.subject.Equals(subject) && a.coursenumber.Equals(courseNumber) &&  a.period.Equals(period...
}
else if (!(subject.Equals("") && courseNumber.Equals("") && yearLev.Equals("")))
{
  // Query the database. 
}
else if (!(subject.Equals("") && courseNumber.Equals("") && period.Equals("")))
{
  // Query the database. 
}
else if (!(subject.Equals("") && yearLev.Equals("") && period.Equals("")))
... 
```

如您所见，会有很多 if 语句。我想知道是否有更好的方法来做到这一点？即，如果字段为空，则忽略该字段的单个查询语句。或者如果我可以用相当于“任何”的东西替换空字符串？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:03:17.100

您可以将结果分解为四个语句，分别对应四个条件：

```
var results = db.Courses;
if(!string.IsNullOrEmpty(subject))
    results = results.Where(c => c...);
if(!string.IsNullOrEmpty(courseNumber))
   results = results.Where(c => c...);
...etc... 
```

保持它干净和可扩展，同时也只将条件附加到必要的 sql 查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:49:20.743

你不能把这个逻辑放到单个 LINQ 语句中吗？就像是：

```
var results = db.Courses
    .Where(c => (c.subject == subject && c.subject != "")
        || (c.coursenumber == courseNumber && c.coursenumber != "")
        || (c.yearLev == yearLev && c.yearLev != "")
        || (c.period == period && c.period != ""))
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:47:49.480

为什么你的控制器中有所有这些逻辑？

您应该在模型中填充视图字段，然后在模型中有一个函数来为您处理此逻辑。即在您的模型中有一个名为 IsCourseValid() 的函数，其中包含您提供的逻辑。然后，您可以在 Controller 中调用此模型方法并路由到适当的视图（Controller 的用途），如果您只是查询数据库，请通过 Model 执行此操作。

您当前拥有的模式是胖控制器瘦模型，您是否应该拥有瘦控制器胖模型（所有逻辑都在模型中完成，控制器将您路由到正确的视图）。

小费：

而不是这样做`!subject.Equals("")`你可以使用`string.IsNullOrEmpty(subject)`

# iphone - 如何通过蓝牙将文件发送到其他 iPhone

> ID：10556900
> 
> 赞同：10
> 
> 时间：2012-05-11T18:42:20.037
> 
> 标签：iphone, objective-c, ios, ipad, bluetooth

我正在做一个小应用程序，允许用户在 iPhone 上快速编辑和共享文本。

所以我对 iPhone 的蓝牙编程有点了解，但我无法做我想做的事情：

*   应用程序的文本保存在 NSUserDefaults 中。我想通过密钥将其发送到另一台 iOS 设备：“Text1”、“Text2”或“Text3”（我知道我必须将字符串中的文本转换为 NSData，并且我想拥有它在 NSMutableDictionary 及其密钥中）

*   我也想一直在寻找新的 iOS 设备。

请帮助我，因为我不知道该怎么做，而且很难找到 iPhone 蓝牙编程的教程，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:52:10.567

使用GameKit，有很多教程。

使用它来查找其他设备：

```
GKPeerPickerController *picker = [[GKPeerPickerController alloc] init];
picker.delegate = self;
picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
[picker show]; 
```

# memcached - Memcached 的分布式特性

> ID：10556904
> 
> 赞同：2
> 
> 时间：2012-05-11T18:42:55.203
> 
> 标签：memcached, distributed-computing

这些天我在研究分布式计算，很想知道 Memcached 是如何工作的。维基说：

> memcached 是一个通用的分布式内存缓存系统

查看[架构](http://en.wikipedia.org/wiki/Memcached#Architecture)解释了内存缓存，但我无法理解“分布式计算”在这里的工作方式。服务器甚至不知道彼此 - 容错呢！

有人可以帮我了解数据在此类系统中的流动方式吗？以及客户端如何理解哪个服务器持有所需的数据（以防缓存未命中）

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:03:21.990

我一直在试图弄清楚同样的事情。据我所知，从这个意义上说，分布式并不意味着像现代、分布式、类似云的应用程序所期望的那样进行复制。在 memcached 是分布式的意义上，它似乎只是意味着它不一定是本地的。

[有人问了一个类似的问题](https://serverfault.com/questions/210417/how-is-memcache-distributed)，特别详细说明了一个 PHP 用例，并[给出了一个解决 memcached 分布式声明的答案](https://serverfault.com/a/210437)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T09:52:04.157

我和一群朋友（桌上放着一些啤酒）正在争论 memcache 是否真的是一个分布式系统。

我所在的组声称需要从 Memcache 定义中删除“分布式”一词，因为 memcache 对其他节点一无所知。分发完全由客户处理。

# php - SQL 查询无错误信息

> ID：10556910
> 
> 赞同：0
> 
> 时间：2012-05-11T18:43:33.063
> 
> 标签：php, sql

编辑：发现错误。sting replace 语句添加了一个额外的空间。现在修好了，谢谢。

我已经看这个太久了，我找不到错误。

这是我所拥有的：

```
echo $client_name." - ".$location;  
$query = mysql_query("SELECT * FROM spc_clients WHERE (client_name='".$client_name."' AND location='".$location."')") or die(mysql_error());  
while ($results = mysql_fetch_array($query)) {  
    // Other code...
} 
```

当我回显时，我得到“Client1”和“Location1”。当我将 SQL 查询放入 PHPMyAdmin 并替换这些值时，查询运行正常并显示结果。在它打开的页面上，我什么也没得到。

我没有语法错误，而且 mysql_error 也没有返回任何内容。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:23:50.237

尝试这个：

```
$query = sprintf("SELECT * FROM spc_clients WHERE client_name='%s' AND location='%s'",trim($client_name),trim($location));
$query = mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:49:21.087

尝试这个

```
$query = mysql_query("SELECT * FROM spc_clients WHERE client_name="'.$client_name.'" AND location="'.$location.'" ") 
```

# c# - c# 2.0 int32 线程安全吗？

> ID：10556916
> 
> 赞同：0
> 
> 时间：2012-05-11T18:43:49.967
> 
> 标签：c#, thread-safety, int32

我想增加一个整数，该整数在计时器事件处理程序中增加并由主线程和其他工作线程读取，即一个写入器线程和多个读取器线程。它会是线程安全的吗？

我的应用程序中有一个计时器，每 5 秒运行一次

MyClock = new System.Threading.Timer(new TimerCallback(this.Ticker), null, Timeout.Infinite, Timeout.Infinite);

我像这样打开 MyClock.Change( 5000, 5000 );

如果我在 Ticker 处理程序中增加一个整数，比如这个 tickerCounter++；

然后我可以从同一应用程序的主线程或工作线程进行只读访问吗？它会是线程安全的吗？读者是否有机会读取部分值？或导致线程异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:48:50.980

首先：阅读 Eric Lippert 的博文：[你称之为“线程安全”的东西是什么？](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)它将改变您对线程安全的看法，以及您将来如何提出类似问题。

读取将是*原子*的——你永远不会看到“一半”的更新——但你不一定会看到*最新*的值。（当然，这意味着下一个增量*可能会*看到要增加的“旧”（较低）值。）

此外，增量本身并不是安全的——如果有多个线程同时递增，它们都可以读取相同的值，然后在本地递增，然后写入新值——因此结果可能是递增 1，即使 10 个线程在增加。

您应该考虑使用[`Interlocked.Increment`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)来执行增量。如果您*还*使变量 volatile，我*相信*您只想阅读它时直接阅读它应该是安全*的*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:47:42.453

也许你可以[`Interlocked.Increment(ref Int32)`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)用来做递增？这是一个原子操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:48:47.610

像这样递增

```
tickerCounter++; 
```

在多个线程中，没有锁定，不是线程安全的。您可以使用`Interlocked`该类来执行无锁、线程安全的递增。

如果只有一个线程正在修改该值，并且有许多线程读取该值，那么`tickerCounter++`从没有线程会遭受部分读取的意义上说，这是线程安全的。当然仍然存在竞争条件，但即使你使用`Interlocked`，也会有竞争。

# center - 无法使用 css 使图像居中

> ID：10556919
> 
> 赞同：0
> 
> 时间：2012-05-11T18:43:57.877
> 
> 标签：center, css

无论我应用边距的频率和位置：0px auto; 即使使用 !important 标签，我也无法将大样本地毯放在中心位置。这可能是显而易见的事情。有任何想法吗？[http://martinezstudio.com/wp_studio/](http://martinezstudio.com/wp_studio/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:50:05.707

`margin: 0px auto;`只会居中块元素。尝试`display: block;`在您的声明中添加 a 并为您的图像指定特定宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:53:05.470

尝试这个：

```
#simpleslider_show>div{
    margin: 0 auto;
    position:relative !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:06:35.330

通常，这两个答案都会像魅力一样起作用。我关闭了所有插件并玩了更多，但没有去。某处深埋的东西不想让我的图像居中。

所以，我作弊了。我将所有图像都设为全宽并以白色背景为中心。如果代码使它们居中，它们会更大一些，但是臭的东西可以工作并且看起来还可以。谢谢你的帮助！

# php - PHP：使用前导零参数调用的函数内部为零

> ID：10556920
> 
> 赞同：3
> 
> 时间：2012-05-11T18:43:58.757
> 
> 标签：php, function, zero

我创建了一个简单的 php (5.2.6) 函数：

文件 a.php：

```
function la ($n) {
    echo "$n";
} 
```

文件 b.php：

```
include ('a.php');
// got many calls of function with leading zero in parameter
la (01);
la (02);
...
la (07);
la (08);
la (09);
la (10); 
```

有时它会打印 1、2... 9、10，有时它会打印 0 而不是 8 或 9！看起来很随意。为什么？为什么只有 8 个或 9 个？确实，我可以避免这个零。但是，既然我发现了奇怪的行为，我想问你：这种奇怪行为的秘诀是什么？或者我很奇怪。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T18:45:49.940

前导`0`通常表示用八进制而不是十进制书写的数字；`8`并且`9`不是有效的八进制数字。（我承认不知道为什么 PHP 会关心它；它不是 web 东西的传统表示法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:47:47.113

`string`如果你想要零领先，你应该通过它：

```
la ('07'); 
```

# c# - 将图片从站点加载到 Image 控件中

> ID：10556924
> 
> 赞同：0
> 
> 时间：2012-05-11T18:44:05.467
> 
> 标签：c#, image, windows-phone-7, web, httpwebrequest

我是 Windows phone 新手，所以我有一个问题：

我想从我的应用程序中的站点获取图片。

说我应该用这张图：[http ://static.lampandlight.eu/img/deltalight-vice-versa-f-led-zwart-goud-mat_89221-1.jpg](http://static.lampandlight.eu/img/deltalight-vice-versa-f-led-zwart-goud-mat_89221-1.jpg)

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:00:33.980

像这样的东西应该工作：

```
BitmapImage image = new BitmapImage(new Uri("URL_TO_IMAGE", UriKind.Absolute));
imageControl.Source = image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:39:10.807

试试这个：[http ://channel9.msdn.com/Series/Windows-Phone-7-Development-for-Absolute-Beginners/Working-with-the-Image-Control](http://channel9.msdn.com/Series/Windows-Phone-7-Development-for-Absolute-Beginners/Working-with-the-Image-Control)

# ios - 如何在 13 英寸 Macbook Pro 上使用模拟器测试 iPad Retina 应用程序？

> ID：10556925
> 
> 赞同：1
> 
> 时间：2012-05-11T18:44:10.667
> 
> 标签：ios, macos, ipad, ios-simulator

即使在 50% 的比例和最大分辨率下，我也无法在 13 英寸 Macbook Pro 上看到整个 ipad 模拟器窗口。有什么办法可以缩小更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:33:56.713

我找到了一个有用的解决方法：将缩放设置为 100%，然后您可以滚动查看整个屏幕。您无法滚动到 50% 或 25% 的屏幕外屏幕部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:32:21.247

他们确实在 4.5.2 中添加了 25% 选项，但是当旋转到纵向时，您仍然需要滚动才能查看 ipad 视网膜屏幕。如果他们以 5% 的步长将最小值降低到 5%，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:58:33.023

抱歉，这是不可能的，我使用的是 13 英寸 Air 并且遇到了同样的问题。考虑到这是模拟器上允许的最小缩放，您只需要坚持使用非视网膜模拟器。

# button - Sencha Touch Button - 暂停直到显示

> ID：10556932
> 
> 赞同：5
> 
> 时间：2012-05-11T18:44:32.533
> 
> 标签：button, sencha-touch-2

我想延迟显示煎茶触摸按钮元素几秒钟。我该怎么做？

我有以下 [项目]

```
 xtype: 'button',
                        align: 'right',
                        hidden: false,
                        html: 'Go!' 
```

我将如何延迟显示，例如 10 秒？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:01:21.743

我认为使用它可能是一个更好的做法`Ext.util.DelayedTask`

[http://docs.sencha.com/touch/2-0/#!/api/Ext.util.DelayedTask](http://docs.sencha.com/touch/2-0/#!/api/Ext.util.DelayedTask)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T19:27:20.157

您可以使用以下代码片段：

```
setTimeout(function(){
    Ext.ComponentManager.get('MyPanel').add({
        xtype:'button',
        align:'right,
        html('Go!')
    });        
}, 10000); 
```

假设您有一个面板或容器，其 'id' 配置设置为 'MyPanel' 作为您要添加的按钮的父级。例如，您可以在其中一个控制器中执行此操作。

另一种方式，如果您的按钮已经像您在问题中提到的那样声明：

```
{
     xtype: 'button',
     align: 'right',
     hidden: false,
     html: 'Go!',
     id:'MyButton'
} 
```

是改变setTimeout中的'hidden'属性：

```
setTimeout(function(){
    Ext.ComponentManager.get('MyButton').setHidden(false);
}, 10000); 
```

同样，例如，您可以在其中一个控制器中执行此操作。

# python - 当我编写一个错误处理程序以忽略使用 python 从 Twitter-api 返回的范围之外的 unicode 时，为什么会返回 Unicode 错误？

> ID：10556935
> 
> 赞同：0
> 
> 时间：2012-05-11T18:44:44.787
> 
> 标签：python, error-handling, twitter

问候热心的小伙伴们：

我正在调试一个与 twitter-api 集成的程序，其目的是搜索给定半径内的特定推文并将它们返回到 csv 文件中。它可以工作....但有时会遇到“ **UnicodeEncodeError: 'ascii' codec can't encode character u'\u201c' in position 0: ordinal not in range(128)** ”错误，但我已经在我的代码中进行了调整让它忽略来自其范围之外的 twitter 的 Unicode 数据。

那么为什么有时仍然会出现该错误？

下面是使用注释中给出的测试输入运行它的代码：

```
import urllib2, json, pprint, codecs, unicodedata, csv
## test coordinate input: 29.762778,-95.383056
## test radius 10
## test query: tebow
##Initial user input
city = raw_input("Please enter to 6 decimal places the city\ncoordinates to be searched ex. lat,long: ")
radius = raw_input("Please enter the numeric value of the\nradius in miles you'd like to search ex. 10: ")
term= raw_input("Please enter the search term you wish to query ex. tebow: ")

u = urllib2.urlopen('http://search.twitter.com/search.json?q='+term+'&geocode='+city+','+radius+'mi&page=1&rpp=20')
datares = json.load(u)
##pprint.pprint(datares)

with codecs.open('Geotweets.csv',mode='w', encoding='utf-8',errors='ignore') as cache:
    writer = csv.writer(cache)
    for tweet in datares['results']:
        writer.writerow([tweet['text'], tweet['location'], tweet['created_at'], tweet['from_user']]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:06:08.553

中发生了一个隐藏的转换`writerow`。使用 eg 自己对数据进行编码`tweet['text'].encode('ascii', 'ignore')`。

# django - 更新 django 模型对象的单个字段的简洁方法

> ID：10556940
> 
> 赞同：15
> 
> 时间：2012-05-11T18:45:04.280
> 
> 标签：django, django-models

要更新（并保存）对象上的字段，请执行以下操作：

```
>>> product = Product.objects.get(name='Venezuelan Beaver Cheese')
>>> product.number_sold = 4
>>> product.save() 
```

有没有办法将最后两行压缩成一行，例如：

```
product.update(number_sold=4) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-11T19:50:25.307

是的。

```
Product.objects.filter(name='Venezuelan Beaver Cheese').update(number_sold=4) 
```

如果您更改了模型实例并且只想将特定字段保存到数据库中，请执行以下操作：

```
product.name = "New name of the product"
product.save(update_fields=['name']) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T21:13:23.343

@Lovelive 的回答是最好的方法。唯一的缺点是你没有得到实例。`product = Product.objects.get(...)`因此，如果您需要`product`其他任何东西，您仍然需要这条线。但是，它确实完美地涵盖了“将最后两行压缩为一行”的用例场景。

只是为了扮演魔鬼的拥护者，您还可以在模型中添加一个方法：

```
class Product(models.Model):
    ...
    def update(self, **kwargs):
        for k, v in kwargs.iteritems():
            setattr(self, k, v)
        self.save() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-29T07:09:20.520

根据情况，这也是一种替代方法：

```
product.save(update_fields=["number_sold"]) 
```

# php - PHP PDO 语法错误或访问冲突：插入时出现 1064

> ID：10556941
> 
> 赞同：10
> 
> 时间：2012-05-11T18:45:06.107
> 
> 标签：php, mysql, pdo

我有一个表名板，我正在尝试使用当前代码插入数据

```
function createBoard( $name, $desc  ) {
    try {
        $sth = $this->getLink()->prepare( "INSERT INTO boards(id,memberid,name,desc,datecreated,isactive) 
            VALUES(?,?,?,?,?,?)" );

        $uuid = $this->uuid();
        $memberid = 1;
        $date = Utils::getDate();
        $isactive = 1;

        $sth->bindParam( 1, $uuid );
        $sth->bindParam( 2, $memberid );
        $sth->bindParam( 3, $name );
        $sth->bindParam( 4, $desc );
        $sth->bindParam( 5, $date );
        $sth->bindParam( 6, $isactive );
        return $sth->execute();
    } catch( PDOException $e ) { 
        /*
         * save the error to the error log defined as @ERROR_LOG
         */ 
        file_put_contents( ERROR_LOG, ( "\n" . Utils::getDate() . " : " . $e->getMessage() ), FILE_APPEND);  
        die( "FATAL ERROR...Please check the error log." );
    }
} 
```

但是，每次我收到此错误“ **2012-05-11 14:40:50 : SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax;检查与您的 MySQL 服务器相对应的手册在 'desc,datecreated,isactive) 附近使用正确语法的版本 VALUES('d5989c7e-9b98-11e1-88cd-0026b936528c','1' at line 1** "

我已经尝试使用相同的函数`bindValue()`并将具有直接值的数组放入`$sth->execute()`函数中，但我总是收到相同的错误。也许外面的眼睛可以发现我遗漏的东西或做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-11T18:46:37.307

将您的字段名称封装在反引号 ( ```) 中，`desc`是一个保留字。

```
$sth = $this->getLink()->prepare( "INSERT INTO `boards` (`id`,`memberid`,`name`,`desc`,`datecreated`,`isactive`) 
            VALUES(?,?,?,?,?,?)" ); 
```

# java - 为什么我无法捕获 java.net.SocketTimeoutException？

> ID：10556946
> 
> 赞同：2
> 
> 时间：2012-05-11T18:45:29.403
> 
> 标签：java, sockets, socketexception, socket-timeout-exception

我有一个简单的多线程服务器，线程的代码如下所示：

```
public void run(){

 while(Ecoute()){

     str=LireTrame(this.socClient);//read text byte by byte 

    //some code here

    Dormir(500);//Sleep for 500ms  
   }     

} 
```

我想创建 3 分钟的超时，如果客户端套接字在 3 分钟内没有发送消息，则必须关闭线程...

所以我尝试这样做：

```
 public void run(){

        try {
        socClient.setSoTimeout(180000);//timeout for 3 min...
    } catch (SocketException ex) {
        Logger.getLogger(tache.class.getName()).log(Level.SEVERE, null, ex);
    }

 while(Ecoute()){

     try{
      str=LireTrame(this.socClient);//read text byte by byte 
    }
    catch(java.net.SocketTimeoutException ex){
     log.append("timeout exception has benn catched \n") ;
     break;//break the while
   } 

    //some code here

    Dormir(500);//Sleep for 500ms  
   }     

} 
```

问题是 netbeans 显示错误消息： ![在此处输入图像描述](../Images/3ca2753a733a0082855b8486590acc14.png)

```
java.net.SocketTimeoutException never thrown in body of corresponding try statement 
```

我用 SocketException 尝试了这个，但结果相同..

为什么我抓不到他们？

**更新**：根据 thinksteep 和 mprabhat 的回复，我在 LireTrame(..) 中添加了th throw，但我仍然无法捕捉到异常：

```
 public  String LireTrame(Socket socClient) throws java.net.SocketTimeoutException{
 int c = 0;
  String Nmea="";
boolean finL=true;
 do{
            try {
                c=socClient.getInputStream().read();
            } catch (IOException ex) {
                Logger.getLogger(tache.class.getName()).log(Level.SEVERE, null, ex);
            }
    char ch=(char)c;

    Nmea=Nmea+ch;
    if(ch==';')
        finL=false;

  }while(finL);
 return Nmea;
 }

mai 11, 2012 8:04:02 PM Daemon.tache LireTrame
Grave: null
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.net.SocketInputStream.read(SocketInputStream.java:203)
    at Daemon.tache.LireTrame(tache.java:232)
    at Daemon.tache.run(tache.java:87)
    at java.lang.Thread.run(Thread.java:722) 
```

有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:47:28.913

```
=LireTrame(this.socClient);//read text byte by byte 
```

应该抛出 SocketTimeOutException。您没有发布此方法的代码，但我假设它没有抛出 SocketTimeOutException，这就是 netbeans 突出显示的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:59:20.740

[SocketTimeoutException](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/SocketTimeoutException.html)是一个已[检查的异常](http://en.wikipedia.org/wiki/Exception_handling#Checked_exceptions)，因此在您捕获它之前，您应该抛出该异常。

所以

```
=LireTrame(this.socClient);//read text byte by byte 
```

`SocketTimeoutException`应该在你抓住它之前扔掉。

您只是在记录异常而不是重新抛出它

在这条线之后

```
Logger.getLogger(tache.class.getName()).log(Level.SEVERE, null, ex); 
```

也添加这一行

```
 throw SocketTimeoutException('SocketTimeOutException'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T00:02:06.103

我会声明`LireTrame()`完全抛出`IOException`并删除内部的 try/catch。它的代码结构很差。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T19:18:27.567

这无疑是在黑暗中拍摄的。我不使用netbeans，我使用eclipse。在 Eclipse 中，有时 JDT 编译器会与现实不同步。对项目进行干净的构建可以解决问题。

我认为在您的情况下，是 netbeans 在起作用。如果您执行 javac 的命令行调用，您是否会收到该错误。如果没有，在 netbeans 内部进行清理很可能会解决问题。

# sql-server - 导入 Excel 错误、ODBC 和 schema.ini

> ID：10556947
> 
> 赞同：0
> 
> 时间：2012-05-11T18:45:34.303
> 
> 标签：sql-server, excel, import

如何克服导入 excel 文件错误？当数据类型被错误地确定时，是因为没有扫描足够多的文件。

txt 和 csv 文件，您可以设置 schema.ini 和/或将整个文件扫描到最后。 [这个 MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms713542%28v=vs.85%29.aspx) 说

> MAXSCANROWS 根据现有数据设置列的数据类型时要扫描的行数。可以为要扫描的行输入 1 到 16 的数字。该值默认为 8；如果设置为 0，则扫描所有行。（超出限制的数字将返回错误。）这将设置与设置对话框中要扫描的行相同的选项。

如果我将扫描的行设置为 0，则会引发错误，提示“扫描无效的行”重新阅读后，我看到范围在 1-16 之间，并且由于 0 在该范围之外，我无法获得完整的扫描，就像我可以使用 csv 或 txt 文件一样。

问题是在为客户端导入 sku id 时，文件顶部显示为数字的某些数据会导致对数据类型的误解。如果可以在 excel 文件上使用 schema.ini，那就太好了。没有办法克服循环遍历每个单元格并将字符串包装在“”中的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T22:30:47.050

如果您能够将文件转换为 csv，则使用“建议类型”功能可以更轻松地导入它，该功能允许您扫描文件中的 x 行并为每列选择最合适的数据类型。

# .net - 为什么从 FoxPro 客户端使用 .Net COM 服务器时找不到类型库

> ID：10556948
> 
> 赞同：0
> 
> 时间：2012-05-11T18:45:35.050
> 
> 标签：.net, com, interop, foxpro, visual-foxpro

我有一个 .Net COM 服务器，它有一个将消息和延迟作为参数的方法。延迟之后，它会触发一个事件，将消息发送回客户端。

它适用于 .Net 和 VB6 客户端。

为了在 FoxPro 中绑定 COM 事件，您必须在 foxpro 中创建一个实现事件接口的类并将其连接起来，如下所述： [http ://www.west-wind.com/presentations/dotnetfromVfp/ DotNetFromVfp_EventHandling.asp](http://www.west-wind.com/presentations/dotnetfromVfp/DotNetFromVfp_EventHandling.asp)

我有这样一堂课：

```
DEFINE CLASS ComEventHandler AS session OLEPUBLIC
  IMPLEMENTS IComServerEvents IN "PcaTest.ComServer"
  * "C:\ComTest\PCATest.tlb"

  PROCEDURE IComServerEvents_TimerExpired(message AS STRING) AS VOID
  * add user code here
  ?message
  ENDPROC
ENDDEFINE 
```

以及将其连接起来的代码：

```
loMM = CREATEOBJECT("PcaTest.ComServer")
loEvents = CREATEOBJECT("ComEventHandler")

EventHandler(lomm, loevents) 
```

当我运行此代码时，我得到 Type Library PcaTest.ComServer not found。但是，如果我将 implements 行更改为：

```
IMPLEMENTS IComServerEvents IN "C:\ComTest\PCATest.tlb" 
```

我无法硬编码 tlb 的位置。

实际上，"CREATEOBJECT("PcaTest.ComServer")" 行工作正常，如果我不尝试实例化 ComEventHandler 对象，则该 COM 对象将被实例化，我可以调用它的方法并访问它的属性。事件处理程序类（大部分）仅在我向它提供 .tlb 而不是 progId 时才起作用。

.Net COM 服务器在 GAC 中注册。我已经尝试过使用和不使用 /codebase 以及使用和不使用 /tlb 或 /tlb:filename.tlb 的 regasm

我确实有一次在测试中工作过，或者看起来是这样。我现在无法复制这些结果，但是当我让它工作时，我使用了 /codebase 和 /tlb:filename.tlb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:36:50.193

我讨厌回答我自己的问题。再次。但我明白了。

答：在 GAC 中注册程序集时使用 regasm /codebase 使其无法工作。我的问题是，如果我在 GAC 中安装程序集之前进行了 regasm，它会起作用，但是如果程序集首先在 GAC 中注册，或者如果它在 GAC 中注册并且稍后调用 regasm，FoxPro 会得到使困惑。

在 FoxPro 中使用 .Net COM 服务器的事件绝对需要：

*   为 COM（progId 和 ClsId）注册的程序集，可能是通过 regasm
*   regasm 上的 /codebase 标志将类似这样的内容添加到注册表中：

    ```
    [HKEY_CLASSES_ROOT\CLSID\{A2DA47BD-15E8-48E3-BA54-4B1CED2D3C01}\InprocServer32]
    @="mscoree.dll"
    "CodeBase"="file:///C:/MACsWave/PCATest/pcatest.dll" 
    ```

    代码库是必需的，即使该程序集应该可以从 GAC 访问。例如，VB6 客户端不需要 /codebase

*   /tlb 标志注册类型库。/tlb:"文件名" 不是必需的。

因为使用了 /codebase 标志，所以不需要在 GAC 中注册程序集。

如果您确实将程序集添加到 GAC 并随后调用 regasm /codebase，您会在注册表中获得以下信息：

```
[HKEY_CLASSES_ROOT\CLSID\{A2DA47BD-15E8-48E3-BA54-4B1CED2D3C01}\InprocServer32]
@="mscoree.dll"
"CodeBase"="file:///C:/WINDOWS/assembly/GAC_32/PCATest/1.1.0.0__325ac2fec08eafa8/PCATest.dll" 
```

我想知道 FoxPro 是否在与 dll 相同的目录中寻找 tlb 文件，但发现 GAC 中没有 .tlb。或者其他的东西...

无论如何，问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T03:49:02.570

您提到您无法对位置进行硬编码，我想知道您是否可以将其放入表格中，从表格中选择它，然后使用类似这样的内容

tlbLocation（包含路径的字段）

在 (tlbLocation) 中实现 IComServerEvents

我对我的一些应用程序做了类似的路径规范

# c# - 无法理解为什么 FileStream 将文件加载到内存中

> ID：10556954
> 
> 赞同：0
> 
> 时间：2012-05-11T18:46:28.950
> 
> 标签：c#, wcf, filestream

我在 WCF 和我的客户端代码中进行开发，我用一个文件创建文件流以传输到服务（通过将其作为消息中的流发送）。服务收到流后，他和平阅读并写入新文件；服务从客户端下载文件给他，仅此而已。

我重写了文件流中的方法Read，这样**我就可以知道在客户端下载服务时读取了多少内容**。

```
public class FileStreamEx : FileStream
    {
        public long _ReadUntilNow { get; private set; }
        public FileStreamEx(string path, FileMode mode, FileAccess access, FileShare share)
            : base(path, mode, access, share)
        {
            this._ReadUntilNow = 0;
        }
        public override int Read(byte[] array, int offset, int count)
        {
            int ReturnV = base.Read(array, offset, count);
            _ReadUntilNow += ReturnV;
            return ReturnV;
        }
    } 
```

我的目标是从客户端了解服务每秒读取了多少内容。这可以通过简单地从客户端查看 _ReadUntilNow 值来实现，因为服务仅使用对 FileStreamEx 对象的引用。

我的问题是，在服务甚至开始读取我给他的流之前，_ReadUntilNow 值 = 文件的大小。解决这个问题的唯一方法是在我这样做之前调用我的重写方法 Read。

**我的问题是谁为我调用了 Read，为什么以及我可以做些什么来防止它？**

我的客户：

```
public static void CallService()
        {
            ServiceReference1.IJob Service1 = new ServiceReference1.JobClient(new InstanceContext(new CCBImplement()));
            DLL.FileStreamEx TheStream TheStream = new DLL.FileStreamEx(@"C:\Uploadfiles\Chat.rar", FileMode.Open, FileAccess.Read, FileShare.None);
            ServiceReference1.RemoteFile RemoteFile1=new ServiceReference1.RemoteFile("Chat.rar", TheStream.Length, @"C:\Uploadfiles\Chat.rar", TheStream);
            Service1.UselessMethod1(RemoteFile1);
            new Thread(new ThreadStart(Check_Only_ReadUntilNow_Every_Second)).Start();
        } 
```

服务代码：

```
public void UselessMethod1(RemoteFile RemoteFile)
        {
            Stream MyStream = RemoteFile.FileByteStream;
            using (FileStream fs = new FileStream(@"C:\Upload\"+RemoteFile.FileName, FileMode.Create))
            {
                int bufferSize = 1 ; // 1 MB buffer
                byte[] buffer = new byte[bufferSize];
                int totalBytes = 0;
                int bytes = 0;
                while ((bytes = MyStream.Read(buffer, 0, bufferSize)) > 0)
                {
                    fs.Write(buffer, 0, bytes);
                    fs.Flush();
                    totalBytes += bytes;
                }
            }
        } 
```

远程文件类：

```
[MessageContract]
    public class RemoteFile : IDisposable
    {
        [MessageHeader]
        public string FileName;

        [MessageHeader]
        public string Path;

        [MessageHeader]
        public long Length;

        [MessageBodyMember]
        public Stream FileByteStream;
        public RemoteFile() { }
        public RemoteFile(string FileName, string Path, long Length, Stream FileByteStream)
        {
            this.Path = Path;
            this.FileName = FileName;
            this.Length = Length;
            this.FileByteStream = FileByteStream;
        }
        public void Dispose()
        {
            if (FileByteStream != null)
            {
                FileByteStream.Close();
                FileByteStream = null;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:40:05.020

我认为他的问题是：在 A 方，有一个服务主机，它具有以流模式读取文件的方法。在 B 侧，有一个客户端使用此服务发送文件。

他扩展了 FileStream 类以添加一个变量，该变量保存从文件中读取的字节数。

他在 A 端调用服务，但在它到达方法之前 - 额外的变量保存了整个文件的大小......这意味着整个文件已被读取。

问题是为什么。

# image - 将图像映射到一组坐标上

> ID：10556956
> 
> 赞同：2
> 
> 时间：2012-05-11T18:46:40.043
> 
> 标签：image, image-processing, imagemagick, texture-mapping, distortion

我有一个典型的源图像，纵横比为 3:4。我还有一组坐标，我需要将图像映射到单独的图像中。坐标不是完美的矩形；如果有的话，它们会定义不规则的网格。

例如，(0,0) 可能映射到 (12,33)、(120,0) => (127,36)、(240,0)=>(226,13) 等。

我的目标是通过将源坐标映射到目标并应用失真来使我的源图像适合新形状。

有什么方法可以做到这一点？我正在使用.NET，但可以调用 ImageMagick。

**编辑：**根据要求，这是一张图片。左图是一张简单的照片，均匀细分（忽略我蹩脚的 MSPaint 技能）。右侧显示目标形状。我有右侧每个点的坐标。目标是将平面图像映射（投影？）到形状上，以便点对齐。

![在此处输入图像描述](../Images/47f44428b533c6d1384b328d6d534f54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:19:06.240

[我在我的网站 ( http://www.rubblewebs.co.uk/imagemagick/operators/distort.php](http://www.rubblewebs.co.uk/imagemagick/operators/distort.php) )上有一些扭曲运算符的示例- 使用 php，但你会明白的。

您可能需要 shepards 方法。

```
$cmd = "$input -matte -virtual-pixel transparent".  
" -distort Shepards \"0,0 0,0  0,100 20,100 0,200".  
" 0,200 133,200 133,180 266,200 266,200 266,100".  
" 246,100 266,0 266,0 133,0 133,20\" ";  
exec("convert $cmd shepards.png"); 
```

![在此处输入图像描述](../Images/71938976baa0a3d5bc24a6636c55ddc0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T20:16:52.363

查看 ImageMagick 的[Freeform Distorts](http://www.imagemagick.org/Usage/distorts/#freeform_distorts)。

# javascript - 如何测试所选文本是否为链接？

> ID：10556957
> 
> 赞同：3
> 
> 时间：2012-05-11T18:46:42.687
> 
> 标签：javascript, wysiwyg

我有一个使用 contenteditable 的非常简单的所见即所得编辑器。它工作正常，但我想测试所选文本是否被用作链接。当我使用 document.queryCommandState('CreateLink') 时，它总是返回 false，即使文本位于锚点内。下面的例子。

我做错了吗，还是有另一种方法来测试文本当前是否用作链接？

```
<script>
    function testLink () {

        // check if this is a link
        var state = document.queryCommandState('CreateLink');
        alert(state);

        // create the link
        document.execCommand ('CreateLink', false, 'http://www.example.com');
    }
</script>

<div contenteditable="true">Here is some sample text to test with.</div>
<br /><br />
<button onclick="testLink();">Test the state of the create link command</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:51:43.127

这是一个旧线程，但由于我目前正在处理同样的问题，我想指出一个已经存在的答案：[检查 execCommand createlink status](https://stackoverflow.com/questions/1333919/check-execcommand-createlink-status)

简而言之，queryCommandState("CreateLink") 似乎不是那样工作的。我使用 rangy 在我的 WYSIWYG 编辑器中处理选择。我检查父节点是否是锚点，然后获取锚点的 href 以将其写入我的链接对话框。这是我的脚本中的一个简化示例：

```
var range = rangy.getSelection().getRangeAt(0);
var container = range.commonAncestorContainer;
if (container.nodeType == 3) {container = container.parentNode;}
if(container.nodeName === "A") {alert ("Yes, it's an anchor!");} 
```

# php - 如何从 mktime() 中获取类似 time() 的值

> ID：10556960
> 
> 赞同：-2
> 
> 时间：2012-05-11T18:46:45.237
> 
> 标签：php

我有以下代码：

```
$value = '2012-03-05';
$parts = explode('-',$value);
$value = mktime(0,0,0,$parts[1],$parts[0],$parts[2]);

// output of $value is 2012 
```

不应该`mktime()`返回类似于`time()`?

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:47:50.713

使用该`strtotime`函数将表示时间的字符串转换为 unix 时间戳数

```
$value = "2012-05-25";
$time = strtotime($value." 00:00:00");
//$time = strtotime($value); will do the work as well 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:49:47.287

[那是对mktime](http://php.net/mktime)的错误使用。这里**的日子在一年之前**而不是之后。用这个，

```
mktime(0,0,0,$parts[1],$parts[2],$parts[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:49:24.620

是的，mktime() 应该像 time() 一样返回一个 unix 时间戳。如果不是这种情况，您发布的代码不能正确代表您正在执行的代码。

这是一个演示 [http://codepad.org/7RNxk0Oz](http://codepad.org/7RNxk0Oz)

# c# - 在不需要的时候创建了一个静态类；谨慎使用 Page.FindControl 代替。建议？

> ID：10556965
> 
> 赞同：1
> 
> 时间：2012-05-11T18:46:57.493
> 
> 标签：c#, asp.net, ajax

我有一个名为 LayoutManager 的类。此类的目的是保存对当前在我的 ASP.NET 页面上表示的对象的引用。[我最初创建这个类是因为我对Page.FindControl()](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)感到非常沮丧。我的挫败感有两方面：

*   Page.FindControl() 在其本机实现中仅搜索 Page 的直接子级。为了在 Page 上找到任何给定的控件，递归实现是必要的。出于性能原因，我反对这一点。
*   为了调用 Page.FindControl 我所有有问题的类都需要知道 Page。这似乎是一个很大的耦合，我试图通过一个中间人类来减轻它。

因此，我创建了如下所示的类。我现在才看到我的实施有多糟糕。我删除了在不同对象上执行相同工作的方法，以简化此示例：

```
/// <summary>
/// This class manages controls which are present on the page.
/// Whenever a control is created it notifies this manager that it has been
/// created (inside of its constructor). At that point, you can use this
/// manager to find controls on the dashboard. 
/// The only other option is to use Page.FindControl, but its pretty broken and slow.
/// </summary>
public class LayoutManager
{
    private static readonly ILog _logger = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

    private static readonly LayoutManager _instance = new LayoutManager();
    private LayoutManager() { }

    public static LayoutManager Instance
    {
        get { return _instance; }
    }

    //HashSets for efficiency. As long as order doesn't matter, use these.
    private HashSet<CormantRadDock> _registeredDocks;

    public RadMultiPage MultiPage { get; set; }
    public CormantTimer Timer { get; set; }
    public DashboardUpdatePanel MultiPageUpdatePanel { get; set; }
    public CormantRadTabStrip TabStrip { get; set; }
    public RadListBox TabsListBox { get; set; }
    public UpdatePanel GlobalSettingsUpdatePanel { get; set; }

    public HashSet<CormantRadDock> RegisteredDocks
    {
        get
        {
            if (Equals(_registeredDocks, null))  
                _registeredDocks = new HashSet<CormantRadDock>();
            return _registeredDocks;
        }
    }

    public CormantRadDock GetDockByID(string dockID)
    {
        CormantRadDock dock = RegisteredDocks.FirstOrDefault(registeredZone => dockID.Contains(registeredZone.ID));

        if (Equals(dock, null))
            _logger.ErrorFormat("Did not find dock: {0}", dockID);
        else
            _logger.DebugFormat("Found dock: {0}", dockID);

        return dock;
    }
} 
```

所以，有几件事：

*   我搞砸了大时间。这个类不能是静态的。多个用户可以期望 LayoutManager 返回他们的 RegisteredDocks——但这会导致数据冲突。
*   我将我的 RegisteredDocks 集合暴露给外界，而不是提供与私有集合交互的方法。因此，我在整个代码中调用 RegisteredDocks.Add(dock) ......我目前正在添加诸如 LayoutManager.AddDock(dock) 之类的方法，这将允许我保持集合私有并且只公开与交互的方法收藏品。
*   我开始将我需要引用的任何其他“1-of”对象扔进课堂。

这一切都源于我不想使用 Page.FindControl.... 所以我现在感觉很傻。

我的问题：

*   **我应该害怕使用 Page.FindControl 的递归实现吗？** [这个链接](http://www.velocityreviews.com/forums/t616317-must-we-use-findcontrol.html)突出了我的担忧——给出的回应是我选择遵循的路线。
*   如果我不应该使用 Page.FindControl，什么是可靠的解决方案？我想到的唯一简单的解决方案是将我的集合存储在 Session 中并让 LayoutManager 继续保持静态。在这个实现中，它将输出到 Session（根据用户而变化）并返回正确的集合......但我对在 Session 中保存太多数据以及不断写回 Session 的成本持谨慎态度。

编辑：

最后的想法：

```
public static Dashboard GetInstance()
{
    var dashboard = HttpContext.Current.Handler as Dashboard;
    //TODO: Handle case where dashboard is null.
    return dashboard;
}

public Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
        return root;

    foreach (Control control in root.Controls)
    {
        Control foundControl = FindControlRecursive(control, id);
        if (foundControl != null)
            return foundControl;
    }

    return null;
}

//Usage:
Dashboard dashboard = Dashboard.GetInstance();
CormantRadDock dock = (CormantRadDock)dashboard.FindControlRecursive(dashboard, dockID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:59:42.630

我认为您根本不应该害怕使用递归`FindControl()`方法。除非页面达到无数层级（它不应该如此），否则递归函数应该能够遍历您的控制层次结构而不会出汗。

简而言之，构建一个递归`FindControl()`方法。你没有什么可担心的; 只是不要让它静态。

**编辑**

要从外部类获取当前页面的句柄，您应该能够执行以下操作：

```
var page = HttpContext.Current.Handler as Page;
if (page != null)
{
    //found the current page
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:59:23.993

在您实际尝试之前，我不会害怕递归扫描仪的性能。如果你需要，我在这里找到了：

[http://netpl.blogspot.com/2009/04/how-to-controll-aspnet-listview-page.html](http://netpl.blogspot.com/2009/04/how-to-controll-aspnet-listview-page.html)

（寻找`ControlHelper`类，现在它甚至可以是一个带有扩展方法的静态类）

# scala - 使用 sbt 'run-main MainClass args' 指定空参数

> ID：10556969
> 
> 赞同：2
> 
> 时间：2012-05-11T18:47:16.320
> 
> 标签：scala, sbt

我想用`sbt 'run-main'`. 但是，我不知道如何指定一个空参数。

```
sbt 'run-main path.to.MainClass arg1 arg2 EMPTY_ARG3' 
```

报价被逐字解释。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:29:43.197

如果需要更好的东西，您可以拥有一个单独的运行器类，而不是用空参数替换您选择的字符串，然后从 sbt 运行它。

```
object MainClassRunner {
  def main(args: Array[String]) {
    val as = args map { case "EMPTY_ARG" => "" case x => x }
    path.to.MainClass.main(as)
  }
} 
```

# xcode - 如何在加载 UIView 时阻止 UIWebView 自动加载

> ID：10556978
> 
> 赞同：0
> 
> 时间：2012-05-11T18:47:48.040
> 
> 标签：xcode, ios5, uiwebview, xcode4.3, uistoryboard

全新的应用程序编码 - 希望您能提供帮助！

我正在使用带有情节提要的 XCode 4.3。

我在选项卡式 UIview 中有一个 UIWebView，它加载一个 .mp3 文件并在选择该选项卡时播放它。但是，我想要的是在显示选项卡时让 WebView 处于空闲状态，然后仅在用户按下“加载”按钮后才加载。

（另外，我已经将“加载”按钮链接为情节提要中的重新加载，所以我想我真的很想知道如何让 UIWebView 第一次不加载？）

这是我的代码ATM：

```
@implementation FirstViewController
@synthesize webView;

- (void)viewDidLoad
{
[super viewDidLoad];
[webView loadRequest:[NSURLRequest
    requestWithURL:[NSURL URLWithString:
    @"http://mysite.com/test.mp3"]]]
    ;
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    webView = nil;
    [super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:54:21.330

Add webview delegate to your .h file and then in he implemetation file that is in .m file add the webview delegate method, and there in finished loading write the code for stop loading.

*   (void)webViewDidFinishLoad:(UIWebView *)webView{

    [progressBar stopAnimating]; [progressBar setHidden:YES]; [webvwFbLike setHidden:NO]; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:25:00.590

在您的后退按钮上使用此语法。webview.goBack;

# ios - 由于图标问题，无法构建我的项目

> ID：10556982
> 
> 赞同：0
> 
> 时间：2012-05-11T18:47:55.143
> 
> 标签：ios, xcode, ipad

我正在运行 Xcode 4.3.2。我正在尝试构建我的存档项目，但我一直无法弄清楚如何让图标工作。我最初的目标是让它建立起来——我不在乎我现在是否有漂亮的图标。这是一个通用的应用程序。

互联网上有很多关于手动编辑 plist 的信息，我在摘要中看到有一些地方可以定义你的图标，但没有一个对我有用。

```
warning: Icon specified in the Info.plist not found under the top level app wrapper: Icon.png (-19007)
Unable to validate your application. - (null)

warning: iPhone/iPod Touch: Info.plist: Unable to verify icon dimensions, no icon found.  You must define CFBundleIcons, CFBundleIconFiles, CFBundleIconFile, or provide a default Icon.png that is 57x57 (-19013)
Unable to validate your application. - (null)

warning: iPad: Info.plist: Unable to verify icon dimensions, no icon found.  You must define CFBundleIcons, CFBundleIconFiles, CFBundleIconFile, or provide a default Icon-72.png that is 72x72 (-19013)
Unable to validate your application. - (null) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T18:56:21.773

如果你的 info.plist 中有这个

![在此处输入图像描述](../Images/a640403a5d520654aefbe0bb2be4fd7c.png)

改成这样。

![在此处输入图像描述](../Images/fd8cd2c624ad10e91b12256e3a8f6508.png)

**编辑：**再试一次，将您的图标文件从“资源”直接拖到此处...当它说要复制它们时，请选择“是”。

![在此处输入图像描述](../Images/2a96398bef42b0d1fc79629da042f804.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T04:17:52.937

对我来说，解决方法是删除 Info.plist 文件中所有与图标相关的条目，然后使用 0x7fffffff 屏幕截图中的 GUI 重新创建 Info.plist 条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T05:12:23.140

从您的应用文件夹中删除图标文件，从 info.plist 中删除图标文件行。

然后将图标文件（从不是您的项目文件夹的另一个目录）拖到 xcode 应用程序图标 UI。

清洁 => 构建并运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:18:39.797

除了 NSPostWhenIdle 的回答之外，我还需要在 plist 中添加 CFBundleIconFile ('Icon file'. Not 'Icon files'.)。

在 Xcode 4.4.1 上。

# asp.net - MVC3 将数据库从 SQL Server Compact Edition 移动到 SQL Server Express

> ID：10556983
> 
> 赞同：0
> 
> 时间：2012-05-11T18:47:55.257
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4, sql-server-ce, sql-server-express

这里有问题。我正在尝试使用 SQL Server Express 而不是 SQL Server CE。虽然我的应用程序已经在使用 SQL Server CE，但我需要弄清楚我需要进行哪些更改。我创建了一个新的数据库连接 - 它为我生成了一个新的 *.dbo 文件。我在我的`web.config`：

```
<connectionStrings>
      <add name="DefaultConnection"
           connectionString="Data Source=.\SQLExpress;Initial Catalog=DatabaseExpressContext;Integrated Security=True;Pooling=False;MultipleActiveResultSets=True"
           providerName="System.Data.SqlClient"
           xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>      
    </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlClient" />
      <add name="SqlClient Data Provider"
    invariant="System.Data.SqlClient"
    description=".Net Framework Data Provider for SqlServer"
    type="System.Data.SqlClient.SqlClientFactory, System.Data,
     Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    />
    </DbProviderFactories> 
```

但是什么也没有发生......没有任何效果......我正在连接到我的 *.dbo 文件 - 甚至没有建立表。

我找不到任何关于我的问题的有用信息。

# objective-c - UINavigationBar 在推送后显示

> ID：10556987
> 
> 赞同：0
> 
> 时间：2012-05-11T18:48:02.630
> 
> 标签：objective-c, uinavigationbar, uistoryboard

我正在为 UI 使用故事板，我有以下内容：

一个登录窗口，它是 segue 的初始视图。如果登录成功，它将把用户带到另一个视图，该视图不能有返回按钮到登录页面！这是一个`UITabBarController`，它有自己的导航栏。现在它显示了两个导航栏，并且后退按钮出现在整个应用程序中。

如果我点击后退按钮，它总是将我带到登录视图。有任何想法吗？

![在此处输入图像描述](../Images/5a8187ccdba2508d6bd25d1c2ccb2617.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:52:05.500

你想隐藏整个栏吗？

如果是这样：

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

或者你只是想隐藏后退按钮？

```
[self.navigationItem setHidesBackButton:YES animated:NO] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:54:22.187

您应该在故事板模式下向左看导航控制器所在的位置。如果您不想要后退按钮或隐藏任何一个，您可以删除导航栏。

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

但是，有更好的方法来进行登录屏幕，而不是推送到视图控制器堆栈上，这就是您使用导航控制器所做的事情。

进行登录的一个好方法是呈现一个模态视图控制器，然后在没有导航控制器的情况下将其关闭。这样，如果您已经登录，您将永远无法导航回登录屏幕。只需在应用程序委托中设置一个全局布尔变量，允许整个应用程序知道您已登录，并在之后测试该变量您关闭模式登录页面。

这样你就没有几个你通常不想要的导航控制器

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:55:11.157

当您有一个导航控制器时会发生这种情况，它将状态栏添加到您进入的每个控制器的视图中，并为每个控制器的视图添加一个自己的导航栏。

a）只需摆脱控制器的专用导航栏即可进入

b) 不要使用 navigationcontroller 和模态推送到控制器的视图

```
[currentController presentModalViewController:controllerYouWantToShow animated:YES] 
```

c）navigationcontroller 的导航栏，但我不建议这样做，因为它会给您带来奇怪的行为并且确实是蛮力，只是不是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T21:30:16.953

如果您使用导航控制器和 push segue，您将获得一个“返回”按钮，因为这是导航控制器的本质。听起来您想要的（“登录页面不能有后退按钮”）是重置导航控制器的堆栈，使其不包括登录视图控制器。您应该可以使用自定义 segue 来做到这一点（它们很容易编写）。另一种选择是以模态方式呈现登录视图控制器，这是一种非常典型的登录屏幕方式。

# ios - UINavigationController -> Partial Curl Segue -> 另一个 Segue？

> ID：10556995
> 
> 赞同：0
> 
> 时间：2012-05-11T18:48:45.707
> 
> 标签：ios, segue

我有一个主 UINavigationController 执行部分卷曲 segue 以显示一组开/关开关。一些开/关开关必须确保存在配置变量（如foursquare）。如果这些配置不存在，那么我想推送另一个身份验证 Segue（再次，foursquare）。现在，如果我在 Partial Curl segue 上的 ViewController 执行以下操作

```
FoursquareAuthViewController *controller = [[FoursquareAuthViewController alloc] init];
[self presentModalViewController:controller animated:YES]; 
```

FoursquareAuthViewController 将在 Partial Curl 后面。使这项工作正常工作的最佳方法是什么 - 即。让 FoursquareAuthViewController 占据全屏 - 最好来自模态 segue？

我正在考虑将源控制器作为委托传递给 Partial Curl 控制器，然后在切换开关时检查配置是否存在。如果没有，则触发委托推送 FoursquareAuthViewController。这样做似乎有点愚蠢......

更新：

尝试以下任何一项实际上都不会做任何事情。

```
FoursquareAuthViewController *controller = [[FoursquareAuthViewController alloc] init];
[[[self presentingViewController] navigationController] pushViewController:controller animated:true];

FoursquareAuthViewController *controller = [[FoursquareAuthViewController alloc] init];
[[self presentingViewController] presentModalViewController:controller animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:32:16.067

我不确定从源视图控制器而不是从开关视图控制器呈现您的 Foursquare 登录视图控制器是否有帮助。但如果是这样，您就不需要传递您描述的视图控制器的“愚蠢”情况：从开关视图控制器，您可以参考`self.presentingViewController`获取源视图控制器。