# StackOverflow 问答 10842000-10842999

# php - 设置 Apache。无法写入 var 文件夹

> ID：10842004
> 
> 赞同：0
> 
> 时间：2012-05-31T22:11:50.017
> 
> 标签：php, linux, apache, permissions

目前使用安装了 LAMP 堆栈，`tasksel`但我遇到了问题。网站文件夹所在的位置不易写。做任何事都让keister感到痛苦。

```
/var/www 
```

由于我是 Linux 上 LAMP 的新手，所以我可能做错了。这仅适用于我的开发机器 - 不适用于生产。

如果我想开发一个 PHP 应用程序并在 Apache 上本地运行它，工作流程是什么？由于 Linux 的权限，我什至无法编辑默认路径上的文件。

有什么建议么？也许我可以在我的主目录上创建一个文件夹并告诉 Apache 使用它来代替？

常客是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:41:49.537

对我来说，“最好”的方法是将 Apache 中 DocumentRoot 的值更改为您可写的目录，或者创建一个别名：

打开 conf 文件（或默认站点），在 debian/ubuntu 中，位于 /etc/apache2/sites-enabled/000-default 并编辑 DocumentRoot 和对该目录的其他引用（/var/www）：

```
DocumentRoot /home/user/Projects
<Directory /home/user/Projects> 
```

之后重新启动 apache（sudo services apache2 restart），然后你将让它在你可写的地方工作。这样做只有一个不便之处：您必须将 apache 添加到您的用户组，以便为​​ apache 提供上传/创建文件的写入权限。

希望这可以帮助！贡萨洛·G。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:01:41.320

Unix 文件系统权限可提供*安全*可靠的*计算*体验。最好使用权限来为您的工作流程建模，并且只是偶尔提升权限，因为提升的权限是很容易发生问题的时候。遵循[最小特权原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)将防止许多安全漏洞产生严重后果。

您有一个目录，用于存储静态 Web 内容、可执行 Web 内容（可能还有 Web 日志？）`/var/www/`。它不应归 Apache 用户所有，也不应归您的用户帐户所有。`root`（或更具体的东西，例如`www-content`）是有道理的。

您不希望正在运行的 Web 服务器具有修改其自身内容的能力——许多 PHP 蠕虫以这种方式传播。如果您的 Web 服务器只能写入日志文件，则几乎不可能利用任何特权。如果它还可以写入数据库管道，它就可以做任何数据库权限允许它做的事情——随意读取或写入数据，或者只是以特定方式读取某些数据。如果它可以写入目录来存储图像以供以后使用，它可能会被滥用来托管您不想要的内容，但它至少不会影响更大的站点。如果它可以写入任何内容，攻击者可以使用它来持续修改自己的内容并可能攻击您的用户。

您可能也不希望该`/var/www`目录或其任何子目录归您的用户帐户所有——您不希望 Firefox、Evolution、Pidgin 或 Spotify 缺陷对您的 Web 服务器内容具有写入权限。

因此，更好的方法是在您的主目录中的某个地方，在您拥有的文件上完成所有开发工作，并由另一个 Web 服务器提供服务，该服务器在您自己的用户帐户下运行在一个非特权端口上，该端口绑定只接受`localhost`连接。将软件开发到您喜欢的状态后，您可以将软件分发到*生产*Web 服务器。

分发通常是通过一个工具来完成的`git`——你`git push`将你的开发工作放到一个存储库中，然后当你希望部署一个新版本时，你登录到拥有该`/var/www`目录的帐户并使用它`git pull`来下载一个新版本。这有点复杂，但拥有一个真正的源代码控制系统非常值得付出额外的努力。

如果您想要更简单的东西，您可以简单地使用`sudo(1)`提升`www-content`权限并将内容复制过来；它可能看起来像这样：

```
cd ~/projects/website
sudo -u www-content tar cf - . | (cd /var/www/ && tar xvf -) 
```

这样，实时*制作*文件归Web 服务器所有，`www-content`不能由 Web 服务器写入。您的用户帐户也无权修改它们，除非您`sudo`明确运行该命令。（正确设置`sudo(8)`可能是一些工作；如果您是单人开发商店，那么执行这些步骤可能`root`会很好。）

If you have a few users who want to work on the web content *live*, and you trust them and the software they run completely, then you can use *group ownership* to skip some of the steps. (This might be fine for hobbyist use, but I wouldn't want to use this to run a business.) Add each person's user account to a specific group, say `www-editors`, and make `/var/www` and children group-owned by `www-editors`, use the BSD groups behavior (`man 8 mount`, look for `bsdgroups`, for full details; it requires changing mount options in `/etc/fstab` and setting the `setgid` bit on the directories). This gives you, and all users in the group, the ability to edit the files without any intermediate steps. This is both convenient and dangerous. Use it wisely.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:23:45.317

您可以通过终端更改 linux 中的权限，例如 chmod 777=wrx write read execute for all users chmod 775 wrx for current user 。如果你有服务器上的权限，你可以使用它，如果没有，你不能更改权限。

这是一个例子

向用户和组添加读、写、执行

假设我们希望 taps.sh 对那些幸运地加入我们组或成为我们的人拥有所有权限。为此：

`

```
enter code here`$ chmod +rwx taps.sh
$ ls -l taps.sh
-rwxrwxr-x 1 erik erik 1014 2010-10-28 13:30 taps.sh 
```

祝你好运

# sql - 从代码块创建一个函数

> ID：10842006
> 
> 赞同：1
> 
> 时间：2012-05-31T22:11:51.117
> 
> 标签：sql, oracle, function, plsql

如何将此代码转换为具有相同输出的函数？

```
declare
  record_name employees%ROWTYPE; 
begin
  FOR record_name IN (SELECT (a.first_name || ' ' || a.last_name) complete_name,
                      b.DEPARTMENT_NAME complete_name2
                     FROM employees a , departments b
                     WHERE ROWNUM < 1000 and a.DEPARTMENT_ID=b.DEPARTMENT_ID)
  LOOP 
    DBMS_OUTPUT.PUT_LINE('Employee name: ' || record_name.complete_name 
                           ||'DEPARTMENT name: '||record_name.complete_name2);
  END LOOP;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:18:05.297

```
create or replace function SOME_FUNCTION
RETURN VARCHAR
AS
  record_name employees%ROWTYPE;
  out_stmt varchar(4000); 
  TOO_LONG EXCEPTION;
BEGIN
  FOR record_name IN (SELECT (a.first_name || ' ' || a.last_name) complete_name,
                      b.DEPARTMENT_NAME complete_name2
                     FROM employees a , departments b
                     WHERE ROWNUM < 1000 and a.DEPARTMENT_ID=b.DEPARTMENT_ID)
  LOOP
    IF (LENGTH(out_stmt) < 4000) THEN
       out_stmt := out_stmt || 'Employee name: ' || record_name.complete_name || 'DEPARTMENT name: '||record_name.complete_name2;
    ELSE
       RAISE TOO_LONG;
    END IF;
  END LOOP;
  return out_stmt;
EXCEPTION
   WHEN TOO_LONG THEN
      RETURN 'OVERFLOW';
END; 
```

快速示例，我不知道是否某些类型没有完整性限制，因为并不总是`varchar(4000)`足够。但我听说过这种类型的东西，但现在我不知道是否存在。

当您在应用层使用它时，必须以某种方式格式化返回的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T01:07:10.260

```
CREATE TYPE some_employees_record IS RECORD
  (emp_name VARCHAR2(4000)
  ,dept_name VARCHAR2(4000));
CREATE TYPE employees_tab_type IS TABLE OF some_employees_record;

CREATE OR REPLACE
FUNCTION some_employees
RETURN employees_tab_type
PIPELINED
IS
  rec some_employees_record; 
BEGIN
  FOR record_name IN (SELECT (a.first_name || ' ' || a.last_name) complete_name,
                      b.DEPARTMENT_NAME complete_name2
                     FROM employees a , departments b
                     WHERE ROWNUM < 1000 and a.DEPARTMENT_ID=b.DEPARTMENT_ID)
  LOOP
    rec.emp_name := record_name.complete_name;
    rec.dept_name := record_name.complete_name2;
    PIPE ROW (rec);
  END LOOP;
  RETURN;
END; 
```

您可以通过两种方式调用上述函数。在 SQL 中：

```
SELECT * FROM TABLE(some_employees); 
```

或在 PL/SQL 中：

```
DECLARE
  rt employees_tab_type;
BEGIN
  rt := some_employees;
  FOR i IN 1..rt.COUNT LOOP
    DBMS_OUTPUT.put_line(rt(i).emp_name || ', ' || rt(i).dept_name);
  END LOOP;
END; 
```

OT：如果记录数超过 999，您是否意识到查询返回有效随机（非确定性）的 999 条记录集？

顺便说一句，这只是为了示例目的。如果您唯一的要求是运行查询的函数，我不会这样做。我会返回一个引用游标，或者（甚至更好）将查询放在视图中。

# logging - 在 log4net 中使用 MemoryAppender 和 FileAppender

> ID：10842007
> 
> 赞同：0
> 
> 时间：2012-05-31T22:12:12.907
> 
> 标签：logging, log4net, log4net-configuration

我正在使用 FileAppender 登录到我的应用程序中的文件。现在我开始使用 MemoryAppender 从日志中获取错误并将它们存储在数据库中。这是为了在我查询数据库的 ui 上显示异常/错误。

虽然我看到错误正确插入到数据库中，但我发现它们从日志中丢失了。

我在某处读到 MemoryAppender 只写入内存。但是当我同时配置了 FileAppender 和 MemoryAppender 时，它不是也应该写入日志文件吗？

有没有一种解决方法，我仍然可以将错误记录到文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:06:38.597

我不确定您使用 MemoryAppender 做什么。您可以使用 AdoNetAppender 并将日志条目直接存储到数据库中。

如果我理解正确，那么您的问题是关于文件中丢失的日志。Log4net 应该将所有日志条目发送到所有配置的附加程序，除非您明确配置它不这样做。我不假设您配置了任何过滤器来阻止将某些消息写入文件。所以也许你有文件锁定问题（内部调试应该会发现这个问题，请参阅[log4net 常见问题解答](http://logging.apache.org/log4net/release/faq.html)）。

如果是这种情况，您可以尝试将其用于文件附加程序：

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

但是，这会对性能产生影响，您应该尝试找出为什么会出现锁定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:19:36.117

[http://logging.apache.org/log4net/release/config-examples.html](http://logging.apache.org/log4net/release/config-examples.html)

使用此链接将日志存储在数据库中。我已经尝试过它的工作正常。然后您将获得从数据库到网格或任何地方的日志信息。

# image - 基于 Flex 4.6 中的 if 语句在图像之间交换

> ID：10842024
> 
> 赞同：1
> 
> 时间：2012-05-31T22:13:44.930
> 
> 标签：image, actionscript-3, apache-flex, flex4.6

我正在做一个项目，我连续有 5 张图片。这些图像需要根据 if、if else、else 语句的结果进行更改（红色、黄色、绿色）。我有一些 javascript 可以做到这一点，但我需要在 ActionScript3 中使用它以与 Flex 4.6 一起使用。JavaScript--VV

```
if ((billableMonthHours/targetMTD) >= 1)
{
    MTDstatus.src = "green_led.png";
}
else if (((billableMonthHours/targetMTD) < 1) && ((billableMonthHours/targetMTD) >= 0.95))
{
    MTDstatus.src = "yellow_led.png";
}
else //if ((billableMonthHours/targetMTD) < 0.95)
{
    MTDstatus.src = "red_led.png";
}

if ((billableQuarterHours/targetQTD) >= 1)
{
    QTDstatus.src = "green_led.png";
}
else if (((billableQuarterHours/targetQTD) < 1) && ((billableQuarterHours/targetQTD) >= 0.95))
{
    QTDstatus.src = "yellow_led.png";
}
else //if ((billableQuarterHours/targetQTD) < 0.95)
{
    QTDstatus.src = "red_led.png";
}

if ((totalRecordedHours-mtdWorkingHours) >= 0)
{
    UTDcards.src = "green_led.png";
}
else if (((totalRecordedHours-mtdWorkingHours) >= -4) && ((totalRecordedHours-mtdWorkingHours) < 0))
{
    UTDcards.src = "yellow_led.png";
}
else //if ((totalRecordedHours-mtdWorkingHours) < -4)
{
    UTDcards.src = "red_led.png";
} 
```

谢谢，我是 JavaScript 和 Flex 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:20:35.210

如果您不知道如何将图像加载到 Flash/Flex 中，[这将是一个很好的起点](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60546-7ff2.html)。`image`组件是将图像放入 Flex 应用程序的常用方法，嵌入将允许更改更快地发生，尽管只有少量图像并不重要。嵌入后，您可以设置`source`属性：

```
[Embed(source="green_led.png")]
[Bindable]
public var greenLed:Class;
// ...etc

if ((billableMonthHours/targetMTD) >= 1)
{
MTDstatus.source = greenLed;
}
else if (billableMonthHours/targetMTD) >= 0.95)
// ...etc 
```

# jsf - Primefaces 数据列表 + PrettyFaces

> ID：10842025
> 
> 赞同：1
> 
> 时间：2012-05-31T22:13:46.047
> 
> 标签：jsf, primefaces, prettyfaces

如何在 dataList 项目链接中使用 PrettyFaces？

```
<p:dataList value="#{mybean.cities}" var="city">
  <h:link outcome="pretty:goCity">
      TEXT
      <f:param name="city" value="#{city.city}" />
      <f:param name="cityId" value="#{city.id}" />
  </h:link>
</p:dataList> 
```

这是我的漂亮配置：

```
<url-mapping id="goCity">
    <pattern value="/#{cityId:city.id}/#{city:city.city}" />
    <view-id value="/page.xhtml" />
</url-mapping> 
```

我收到了这个错误：

```
com.ocpsoft.pretty.PrettyException: PrettyFaces: Exception occurred while processing <goCity:#{city.id}> for URL </144/London>
com.ocpsoft.pretty.faces.beans.ParameterInjector.injectPathParams(ParameterInjector.java:96)
com.ocpsoft.pretty.faces.beans.ParameterInjector.injectParameters(ParameterInjector.java:54)
com.ocpsoft.pretty.faces.event.PrettyPhaseListener.afterPhase(PrettyPhaseListener.java:98)
com.sun.faces.lifecycle.Phase.handleAfterPhase(Phase.java:189)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:107)
com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)

javax.el.PropertyNotFoundException: Target Unreachable, identifier 'city' resolved to null
org.apache.el.parser.AstValue.getTarget(AstValue.java:98)
org.apache.el.parser.AstValue.getType(AstValue.java:82)
org.apache.el.ValueExpressionImpl.getType(ValueExpressionImpl.java:176)
com.ocpsoft.pretty.faces.util.FacesElUtils.getExpectedType(FacesElUtils.java:50)
com.ocpsoft.pretty.faces.beans.ParameterInjector.injectPathParams(ParameterInjector.java:79)
com.ocpsoft.pretty.faces.beans.ParameterInjector.injectParameters(ParameterInjector.java:54)
com.ocpsoft.pretty.faces.event.PrettyPhaseListener.afterPhase(PrettyPhaseListener.java:98)
com.sun.faces.lifecycle.Phase.handleAfterPhase(Phase.java:189)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:107)
com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:48:39.323

您的设置看起来绝对正确。看起来`<p:dataList>`不像`<h:dataTable>`或`<ui:repeat>`在这里工作。

您可以尝试将组件替换为以下内容：

```
<ul>
  <ui:repeat var="city" value="#{mybean.cities}">
    <li>
      <h:link outcome="pretty:goCity">
        TEXT
        <f:param name="city" value="#{city.city}" />
        <f:param name="cityId" value="#{city.id}" />
      </h:link>
    </li>
  </ui:repeat>
</ul> 
```

或`<pretty:link>`代替`<h:link>`：

```
<ul>
  <ui:repeat var="city" value="#{mybean.cities}">
    <li>
      <pretty:link mappingId="goCity">
        TEXT
        <f:param name="city" value="#{city.city}" />
        <f:param name="cityId" value="#{city.id}" />
      </pretty:link>
    </li>
  </ui:repeat>
</ul> 
```

# jquery - 如何自动启动此幻灯片

> ID：10842028
> 
> 赞同：-4
> 
> 时间：2012-05-31T22:14:06.113
> 
> 标签：jquery, slideshow, autostart

你好：首先我对编码或任何相关的东西一无所知，简单的问题：有没有简单的方法告诉这段代码自动启动幻灯片？目前，图像在点击时发生变化。目前索引页面只有一张图片，我想要添加一些但不需要点击查看下一张这里是我索引中的代码：

```
<script type="text/javascript">
//<![CDATA[
    /*
    the images preload plugin
    */
    (function($) {
        $.fn.preload = function(options) {
            var opts    = $.extend({}, $.fn.preload.defaults, options),
                o       = $.meta ? $.extend({}, opts, this.data()) : opts;
            var c       = this.length,
                l       = 0;
            return this.each(function() {
                var $i  = $(this);
                $('<img/>').load(function(i){
                    ++l;
                    if(l == c) o.onComplete();
                }).attr('src',$i.attr('src'));  
            });
        };
        $.fn.preload.defaults = {
            onComplete  : function(){return false;}
        };
    })(jQuery);
//]]>
</script><script type="text/javascript">
//<![CDATA[
    $(function() {
        var $tf_bg              = $('#tf_bg'),
            $tf_bg_images       = $tf_bg.find('img'),
            $tf_bg_img          = $tf_bg_images.eq(0),
            $tf_thumbs          = $('#tf_thumbs'),
            total               = $tf_bg_images.length,
            current             = 0,
            $tf_content_wrapper = $('#tf_content_wrapper'),
            $tf_next            = $('#tf_next'),
            $tf_prev            = $('#tf_prev'),
            $tf_loading         = $('#tf_loading');

        //preload the images                
        $tf_bg_images.preload({
            onComplete  : function(){
                $tf_loading.hide();
                init();
            }
        });

        //shows the first image and initializes events
        function init(){
            //get dimentions for the image, based on the windows size
            var dim = getImageDim($tf_bg_img);
            //set the returned values and show the image
            $tf_bg_img.css({
                width   : dim.width,
                height  : dim.height,
                left    : dim.left,
                top     : dim.top
            }).fadeIn();

            //resizing the window resizes the $tf_bg_img
            $(window).bind('resize',function(){
                var dim = getImageDim($tf_bg_img);
                $tf_bg_img.css({
                    width   : dim.width,
                    height  : dim.height,
                    left    : dim.left,
                    top     : dim.top
                });
            });

            //expand and fit the image to the screen
            $('#tf_zoom').live('click',
                function(){
                    if($tf_bg_img.is(':animated'))
                        return false;

                    var $this   = $(this);
                    if($this.hasClass('tf_zoom')){
                        resize($tf_bg_img);
                        $this.addClass('tf_fullscreen')
                             .removeClass('tf_zoom');
                    }
                    else{
                        var dim = getImageDim($tf_bg_img);
                        $tf_bg_img.animate({
                            width   : dim.width,
                            height  : dim.height,
                            top     : dim.top,
                            left    : dim.left
                        },350);
                        $this.addClass('tf_zoom')
                             .removeClass('tf_fullscreen'); 
                    }
                }
            );

            //click the arrow down, scrolls down
            $tf_next.bind('click',function(){
                if($tf_bg_img.is(':animated'))
                    return false;
                    scroll('tb');
            });

            //click the arrow up, scrolls up
            $tf_prev.bind('click',function(){
                if($tf_bg_img.is(':animated'))
                    return false;
                scroll('bt');
            });

            //mousewheel events - down / up button trigger the scroll down / up
            $(document).mousewheel(function(e, delta) {
                if($tf_bg_img.is(':animated'))
                    return false;

                if(delta > 0)
                    scroll('bt');
                else
                    scroll('tb');
                return false;
            });

            //key events - down / up button trigger the scroll down / up
            $(document).keydown(function(e){
                if($tf_bg_img.is(':animated'))
                    return false;

                switch(e.which){
                    case 38:    
                        scroll('bt');
                        break;  
                    case 40:    
                        scroll('tb');
                        break;
                }
            });
        }

        //show next / prev image
        function scroll(dir){
            //if dir is "tb" (top -> bottom) increment current, 
            //else if "bt" decrement it
            current = (dir == 'tb')?current + 1:current - 1;

            //we want a circular slideshow, 
            //so we need to check the limits of current
            if(current == total) current = 0;
            else if(current < 0) current = total - 1;

            //flip the thumb
            $tf_thumbs.flip({
                direction   : dir,
                speed       : 400,
                onBefore    : function(){
                    //the new thumb is set here
                    var content = '<span id="tf_zoom" class="tf_zoom"><\/span>';
                    content     +='<img src="' +           $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
                    $tf_thumbs.html(content);
                }
            });

            //we get the next image
            var $tf_bg_img_next = $tf_bg_images.eq(current),
                //its dimentions
                dim             = getImageDim($tf_bg_img_next),
                //the top should be one that makes the image out of the viewport
                //the image should be positioned up or down depending on the direction
                    top = (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

            //set the returned values and show the next image   
                $tf_bg_img_next.css({
                    width   : dim.width,
                    height  : dim.height,
                    left    : dim.left,
                    top     : top
                }).show();

            //now slide it to the viewport
                $tf_bg_img_next.stop().animate({
                    top     : dim.top
                },700);

            //we want the old image to slide in the same direction, out of the viewport
                var slideTo = (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
                $tf_bg_img.stop().animate({
                    top     : slideTo
                },700,function(){
                //hide it
                    $(this).hide();
                //the $tf_bg_img is now the shown image
                    $tf_bg_img  = $tf_bg_img_next;
                //show the description for the new image
                    $tf_content_wrapper.children()
                                       .eq(current)
                                       .show();
            });
                //hide the current description  
                    $tf_content_wrapper.children(':visible')
                                       .hide()

            }

            //animate the image to fit in the viewport
            function resize($img){
                var w_w = $(window).width(),
                    w_h = $(window).height(),
                    i_w = $img.width(),
                    i_h = $img.height(),
                    r_i = i_h / i_w,
                    new_w,new_h;

                if(i_w > i_h){
                    new_w   = w_w;
                    new_h   = w_w * r_i;

                    if(new_h > w_h){
                        new_h   = w_h;
                        new_w   = w_h / r_i;
                    }
                }   
                else{
                    new_h   = w_w * r_i;
                    new_w   = w_w;
                }

                $img.animate({
                    width   : new_w + 'px',
                    height  : new_h + 'px',
                    top     : '0px',
                    left    : '0px'
                },350);
            }

            //get dimentions of the image, 
            //in order to make it full size and centered
            function getImageDim($img){
                var w_w = $(window).width(),
                    w_h = $(window).height(),
                    r_w = w_h / w_w,
                    i_w = $img.width(),
                    i_h = $img.height(),
                    r_i = i_h / i_w,
                    new_w,new_h,
                    new_left,new_top;

                if(r_w > r_i){
                    new_h   = w_h;
                    new_w   = w_h / r_i;
                }
                else{
                    new_h   = w_w * r_i;
                    new_w   = w_w;
                }

                return {
                    width   : new_w + 'px',
                    height  : new_h + 'px',
                    left    : (w_w - new_w) / 2 + 'px',
                    top     : (w_h - new_h) / 2 + 'px'
                };
                }
        });
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:19:31.180

> 有没有简单的...

不 ：）

看一下`setTimeout()`功能。也许这会有所帮助：

*   [http://blog.agrafix.net/2011/10/javascript-timers-mit-jquery/](http://blog.agrafix.net/2011/10/javascript-timers-mit-jquery/)
*   [http://www.electrictoolbox.com/using-settimeout-javascript/](http://www.electrictoolbox.com/using-settimeout-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:31:49.970

简单的方法是设置 a`setTimeout()`并使其执行处理“鼠标点击”的功能。

页面加载完成后，您可以触发此行：

```
var timer = setTimeout(function(){
    scroll(tb);
}, 2000); 
```

这将在 2 秒后改变图片。

如果您希望它继续，您可以执行以下操作：

```
//Fire this after page has finished loading
var timer = setTimeout(function(){
    autoChange("tb", 2000);
}, 2000);

//Put this somewhere else
function autoChange(dir, timeout){
    scroll(dir);
    var timer = setTimeout(function(){
        autoChange("tb", 2000);
    }, timeout);
} 
```

这将使图片每 2 秒更改一次。当用户单击以更改图片时，您可以将超时更改为例如 5 秒，然后它再次开始每 2 秒自动滚动一次。

`setTimeout()`在[W3Schools](http://www.w3schools.com/js/js_timing.asp)继续阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:32:10.970

向下滚动此代码，直到您看到`MY ANSWER!!!!!!!!`

**编辑：** 我粘贴了一些更新的代码。再试一次。

```
<script type="text/javascript">
//<![CDATA[
    /*
    the images preload plugin
    */
    (function($) {
        $.fn.preload = function(options) {
            var opts    = $.extend({}, $.fn.preload.defaults, options),
                o       = $.meta ? $.extend({}, opts, this.data()) : opts;
            var c       = this.length,
                l       = 0;
            return this.each(function() {
                var $i  = $(this);
                $('<img/>').load(function(i){
                    ++l;
                    if(l == c) o.onComplete();
                }).attr('src',$i.attr('src'));  
            });
        };
        $.fn.preload.defaults = {
            onComplete  : function(){return false;}
        };
    })(jQuery);
//]]>
</script><script type="text/javascript">
//<![CDATA[
    $(function() {
        var $tf_bg              = $('#tf_bg'),
            $tf_bg_images       = $tf_bg.find('img'),
            $tf_bg_img          = $tf_bg_images.eq(0),
            $tf_thumbs          = $('#tf_thumbs'),
            total               = $tf_bg_images.length,
            current             = 0,
            $tf_content_wrapper = $('#tf_content_wrapper'),
            $tf_next            = $('#tf_next'),
            $tf_prev            = $('#tf_prev'),
            $tf_loading         = $('#tf_loading');

        //preload the images                
        $tf_bg_images.preload({
            onComplete  : function(){
                $tf_loading.hide();
                init();
            }
        });

        //shows the first image and initializes events
        function init(){
            //get dimentions for the image, based on the windows size
            var dim = getImageDim($tf_bg_img);
            //set the returned values and show the image
            $tf_bg_img.css({
                width   : dim.width,
                height  : dim.height,
                left    : dim.left,
                top     : dim.top
            }).fadeIn();

            //resizing the window resizes the $tf_bg_img
            $(window).bind('resize',function(){
                var dim = getImageDim($tf_bg_img);
                $tf_bg_img.css({
                    width   : dim.width,
                    height  : dim.height,
                    left    : dim.left,
                    top     : dim.top
                });
            });

            // MY ANSWER!!!!!!!!!!
            // Click next every 5000 ms (5 sec). 
            setInterval(function(){
                $tf_next.click();
            }, 5000);
        }

        //expand and fit the image to the screen
        $('#tf_zoom').live('click', function(){
            if($tf_bg_img.is(':animated'))
                return false;

            var $this   = $(this);
            if($this.hasClass('tf_zoom')){
                resize($tf_bg_img);
                $this.addClass('tf_fullscreen')
                     .removeClass('tf_zoom');
            }
            else{
                var dim = getImageDim($tf_bg_img);
                $tf_bg_img.animate({
                    width   : dim.width,
                    height  : dim.height,
                    top     : dim.top,
                    left    : dim.left
                },350);
                $this.addClass('tf_zoom')
                     .removeClass('tf_fullscreen'); 
            }
        });

        //click the arrow down, scrolls down
        $tf_next.bind('click',function(){
            if($tf_bg_img.is(':animated'))
                return false;
            scroll('tb');
        });

        //click the arrow up, scrolls up
        $tf_prev.bind('click',function(){
            if($tf_bg_img.is(':animated'))
                return false;
            scroll('bt');
        });

        //mousewheel events - down / up button trigger the scroll down / up
        $(document).mousewheel(function(e, delta) {
            if($tf_bg_img.is(':animated'))
                return false;

            if(delta > 0)
                scroll('bt');
            else
                scroll('tb');
            return false;
        });

        //key events - down / up button trigger the scroll down / up
        $(document).keydown(function(e){
            if($tf_bg_img.is(':animated'))
                return false;

            switch(e.which){
                case 38:    
                    scroll('bt');
                    break;  

                case 40:    
                    scroll('tb');
                    break;
            }
        });

            //show next / prev image
        function scroll(dir){
            //if dir is "tb" (top -> bottom) increment current, 
            //else if "bt" decrement it
            current = (dir == 'tb')?current + 1:current - 1;

            //we want a circular slideshow, 
            //so we need to check the limits of current
            if(current == total) current = 0;
            else if(current < 0) current = total - 1;

            //flip the thumb
            $tf_thumbs.flip({
                direction   : dir,
                speed       : 400,
                onBefore    : function(){
                    //the new thumb is set here
                    var content = '<span id="tf_zoom" class="tf_zoom"><\/span>';
                    content     +='<img src="' + $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
                    $tf_thumbs.html(content);
                }
            });

            //we get the next image
            var $tf_bg_img_next = $tf_bg_images.eq(current),
                //its dimentions
                dim             = getImageDim($tf_bg_img_next),
                //the top should be one that makes the image out of the viewport
                //the image should be positioned up or down depending on the direction
                top = (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

            //set the returned values and show the next image   
            $tf_bg_img_next.css({
                width   : dim.width,
                height  : dim.height,
                left    : dim.left,
                top     : top
            }).show();

            //now slide it to the viewport
            $tf_bg_img_next.stop().animate({
                top     : dim.top
            },700);

            //we want the old image to slide in the same direction, out of the viewport
            var slideTo = (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
            $tf_bg_img.stop().animate({
                    top     : slideTo
                },700,function(){
                //hide it
                    $(this).hide();
                //the $tf_bg_img is now the shown image
                    $tf_bg_img  = $tf_bg_img_next;
                //show the description for the new image
                    $tf_content_wrapper.children()
                                       .eq(current)
                                       .show();
            });
            //hide the current description  
                $tf_content_wrapper.children(':visible')
                                   .hide()

        }

        //animate the image to fit in the viewport
        function resize($img){
            var w_w = $(window).width(),
                w_h = $(window).height(),
                i_w = $img.width(),
                i_h = $img.height(),
                r_i = i_h / i_w,
                new_w,new_h;

            if(i_w > i_h){
                new_w   = w_w;
                new_h   = w_w * r_i;

                if(new_h > w_h){
                    new_h   = w_h;
                    new_w   = w_h / r_i;
                }
            }   
            else{
                new_h   = w_w * r_i;
                new_w   = w_w;
            }

            $img.animate({
                width   : new_w + 'px',
                height  : new_h + 'px',
                top     : '0px',
                left    : '0px'
            },350);
        }

        //get dimentions of the image, 
        //in order to make it full size and centered
        function getImageDim($img){
            var w_w = $(window).width(),
                w_h = $(window).height(),
                r_w = w_h / w_w,
                i_w = $img.width(),
                i_h = $img.height(),
                r_i = i_h / i_w,
                new_w,new_h,
                new_left,new_top;

            if(r_w > r_i){
                new_h   = w_h;
                new_w   = w_h / r_i;
            }
            else{
                new_h   = w_w * r_i;
                new_w   = w_w;
            }

            return {
                width   : new_w + 'px',
                height  : new_h + 'px',
                left    : (w_w - new_w) / 2 + 'px',
                top     : (w_h - new_h) / 2 + 'px'
            };
        }
    });​
//]]>
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T22:37:05.243

您可以像这样劫持下一个箭头单击事件以及[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)：

```
setInterval(function(){
    $tf_next.trigger('click');
}, 2500); // Change 2500 to whatever miliseconds delay you want 
```

祝你好运！

# ruby - 在组中定义一个变量并在测试声明中使用

> ID：10842029
> 
> 赞同：0
> 
> 时间：2012-05-31T22:14:13.640
> 
> 标签：ruby, rspec

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:51:39.920

Declare `variables` in the `Rspec.configure` block:

```
RSpec.configure do |config|
  config.add_setting :variables, :default =>  [1, 2]
end 
```

And use it inside your specs like this:

```
RSpec.configuration.variables.each do |i|
end 
```

You can also declare `variables` outside of the RSpec configuration block like in the example below, but since you *probably* already have this block, better keep things clean.

```
RSpec.configuration.add_setting :variables, :default =>  [1, 2] 
```

# forms - CakePHP 如何在 URL 中使用查询进行搜索

> ID：10842030
> 
> 赞同：0
> 
> 时间：2012-05-31T22:14:13.783
> 
> 标签：forms, cakephp, search, cakephp-1.3

我的网站标题中有一个搜索表单。当我单击提交时，它会将我带到某个控制器/操作。到目前为止，一切都很好。

但是，我希望加载的页面有一个带有查询的 url，例如

```
http://www.youtube.com/results?search_query=eminem 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:57:49.950

您必须执行[Post-Redirect->Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

我们的[搜索插件](https://github.com/cakedc/search)有一个组件和更多的魔法来自动化这个。使用它或查看代码以获取想法。

# php - OOP 电子邮件类

> ID：10842034
> 
> 赞同：-4
> 
> 时间：2012-05-31T22:15:18.060
> 
> 标签：php, oop, class, email

知道如何将基本的电子邮件 php 发件人变成具有功能的完全可操作的 oop 类吗？以及如何将类中的特定方法调用到具有文件的表单？

例如，我有一个contact.php，其中有我的电子邮件表单和另一个文件email.class.php，其中我有所有oop

它们如何结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:18:34.063

您可以考虑使用[swift mailer 之类的库](http://swiftmailer.org/)

# php - 如何在 SocialEngine 中编辑移动 CSS？

> ID：10842036
> 
> 赞同：2
> 
> 时间：2012-05-31T22:15:25.060
> 
> 标签：php, css, socialengine

我找不到为**SocialEngine 4.2.3**`mobile.css`编辑移动 CSS 的方法（我在安装时有该文件`application/themes/default`）。**我在Layout -> Theme Editor**中找不到它。

**编辑**忘记添加，对于那些不知道的人，如果我自己使用 IDE 编辑文件，它不会在 SocialEngine 的页面中更新。

![在此处输入图像描述](../Images/150d2eab2183ce4ec4aaf7c6f7713cad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:39:14.623

mobile.css 不可在主题编辑器中进行编辑。您可以在 {site root}/application/themes/{your current theme}/mobile.css 中编辑 mobile.css。请记住，不同的模块也有自己的 CSS。它们通常位于{站点根目录}/application/modules/{您要编辑其 CSS 的模块}/externals/styles/mobile.css。

# zend-framework - Zend Framework - 从视图中获取布局

> ID：10842039
> 
> 赞同：0
> 
> 时间：2012-05-31T22:16:35.043
> 
> 标签：zend-framework, layout, view, helper

-> 短版：我想在我的视图中显示一个布局。我怎么称呼它？

-> 长版 我想在我的网站的某些（不是全部）页面中有一个表格框。这就像一个显示用户信息的小部件。所以，我创建了一个布局（myLayout.phtml），我在其中调用了一个助手（MyHelper.php），通过模型获取所有信息。说到这里，现在我想从一个简单的角度来看使用这个布局来显示表格框。我如何在我的视图中调用该布局？

:)

PS我关注了这个很好的论坛（http://incho.net/tools-frameworks/zend/zend-framework-custom-view-helper/），但他们从主布局而不是从简单视图：/

**解决了**

我把“myLayout.phtml”没有放在“layouts”文件夹中，而是放在“scripts”文件夹中。

./views/helpers/MyHelper.php

```
class Zend_View_Helper_MyHelper
{
    public function myHelper()
    {
        $mm = new MyModel();
        return $mm->myModel();
    }

} 
```

./views/scripts/myViews/myHelperView.phtml（例如 myLayout.phtml）

```
<ul>
    <?php foreach($this->myHelper() as $item): ?>
        <li><?php echo $item ?></li>
    <?php endforeach; ?>
</ul> 
```

在一个简单的视图中，我调用 myHelperView

渲染（“myViews/myHelperView.phtml”）；?>

对于我的一种文件顺序，我希望将最后一个脚本保留在布局文件夹中，但我不知道如何将其读取到该位置。我希望这种方式是一个不错的选择...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:01:57.090

听起来你的`myLayout.phtml`文件是一个`partial`脚本。您可以简单地将其加载到您的视图文件中，如下所示：

```
<?php echo $this->partial('myLayout.phtml') ?> 
```

这与从布局中调用它相同。无论您是从布局还是视图中调用脚本都没有关系。布局只是一个特殊的视图脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:43:56.453

听起来您已经创建了一个自定义[View Helper](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.custom)。如果是这种情况，那么在视图中显示它所需要做的就是拨打类似于`<?php echo $this->myViewHelperName() ?>`.

您也可能对占位[符助手感兴趣。](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)使用占位符助手，您可以在布局中无条件地调用占位符，但仅将视图助手的内容从您想要的视图中分配给它。这样，如果您不为占位符分配任何内容，它将不会显示任何内容，但如果您调用视图助手并将内容分配给占位符，它将显示您想要的内容。

希望有帮助。

# javascript - 错误的 javascript 按钮事件处理程序

> ID：10842040
> 
> 赞同：0
> 
> 时间：2012-05-31T22:16:47.260
> 
> 标签：javascript

我正在尝试在我的页面上实现音乐播放器。我有一个表格，每一行代表一首歌曲，第一个元素是一个按钮，其 id 是歌曲的 url。

```
 <tbody>
        {% for e in entries %}
            <tr>
                <td><button class="song btn" id="{{ e.url }}"><i class="icon-play-circle"></i></button></td>
                <td>{{ e.title }}</td>
                <td>{{ e.artist }}</td> 
                <td>{{ e.features }}</td>
                <td>{{ e.genre }}</td>
                <td><a href="/myapp/editsong/{{ e.id }}">Edit</a></td>
            </tr>
        {% endfor %}
        </tbody> 
```

我正在尝试实现一些 javascript 来更改页面上 HTML5 音频元素的 src，当单击按钮到其 id 时：

```
$("button.song").on("click", function(event){
    if (audio.src != event.target.id)
    {
      audio.src = event.target.id;
      play.className = 'btn btn-success';
      pause.className = 'btn';
      audio.play();
  }
}); 
```

这个实现有点工作，但有很多错误。有时单击按钮会将音频元素 src 更改为空白，我将不得不多次单击该按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:30:45.013

我真的不确定，但是您应该使用其他属性来存储您尝试运行的歌曲的 URL，如果我的记忆没有让我失望，那么对于允许的字符“范围”有限制身份属性。

也许 value 属性没有这个限制。虽然我会使用更多“仅字母数字”作为对对象/数组的引用，然后使用它来获取值。

问候！贡萨洛·G。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:22:48.340

使用 javascript 警报检查参数 event.target.id 以进行调试。单击按钮以查看每个音频的值。

```
if (audio.src != event.target.id)
... 
```

# doctrine-orm - 将数据与多对多关联关联

> ID：10842041
> 
> 赞同：0
> 
> 时间：2012-05-31T22:16:47.737
> 
> 标签：doctrine-orm, many-to-many

我有一个`Person`具有集合属性的实体`employers`（以及其他个人资料信息，例如全名）。此外，我还有一个`Employers`具有属性的实体，`employers`它也是集合（还有一些一般信息，例如名称）。这是一个多对多的双向关联（我希望雇主与一个人相关联，员工与雇主相关联）。现在我想将一些数据与映射相关联（例如工作职位或雇用该人的时间）。

最初的想法是创建一个扩展`Employer`和添加所需属性的类。但这是不可能的，因为它是双向关联。

另一个想法是创建一个新的实体，它具有对 的引用`Person`和`Employer`所需的属性（例如工作职位）。我目前在此解决方案中看不到任何缺点。

有没有更好的方法（换句话说，有没有我错过的潜在劣势）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:22:39.033

这个多对多的例子几乎是教科书。您几乎肯定应该分解为两个指向“链接表”的一对多关系。缺点是额外的连接，但是大多数设计将在 OLTP 数据库中使用这种模式。

# c# - 如何使用 LINQ 在集合中查找匹配的记录？

> ID：10842045
> 
> 赞同：-1
> 
> 时间：2012-05-31T22:17:11.967
> 
> 标签：c#, linq

在下面的示例数据中，我需要找到与 TransitLine 的 10803 个 TransitMapSegmentID 匹配的 TransitMapSegmentID，这将是 2，因为 101 和 102 匹配。

我已经看了几个小时了，我有点眼花缭乱，希望能得到一些帮助。谢谢！

```
public class TransitLineSegment
{
    public int TransitLineID { get; set; }
    public string TransitLineName { get; set; }
    public int TransitMapSegmentID { get; set; }
    public string HexColor { get; set; }
    public double[][] Coordinates { get; set; }
    public int Width { get; set; }
} 
```

样本数据

```
TransitMapSegmentID  TransitLineID
101                  10803
102                  10803
64                   10807
67                   10807
101                          10807
102                          10807 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:27:16.887

你可以结合一个`Where`过滤器和`GroupBy`：

```
var result = transitLineSegments
            .Where(ls => ls.TransitLineID == 10803)
            .GroupBy(ls => ls.TransitMapSegmentID)
            .Select(grp => grp.Count()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:19:58.397

使用[GroupBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)方法。您应该能够按 TransitLineID 分组并获取每个 id 的列表，您可以在其中获取第一个或计算它们。

```
var uni = from segment in segments
      group segment by segment.TransitLineID into segmentGroup
      select new { Id = segmentGroup.Key, Count = segmentGroup.Count() };

foreach(var seg in uni)
    Console.WriteLine ("Id: {0}, Count: {1}", seg.Id, seg.Count); 
```

# c# - C# 修剪和长度计数中的富文本框

> ID：10842046
> 
> 赞同：0
> 
> 时间：2012-05-31T22:17:23.657
> 
> 标签：c#, asp.net, .net, vb.net

富文本框 C#

当我进行比较时

```
if RichTextBox.Lines.Count() > 2 
```

//做一点事

出于某种原因，我将这些数据存储在富文本框中，同时我正在努力限制我需要验证搞砸的数据

```
 [0] - "East coast road"
 [1]- "New York"
 [2] -"" 
```

这将返回计数为 3，其中应该只有 2，我如何消除下一行的空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:20:55.977

您可以在进行比较之前尝试修剪文本

```
RichTextBox.Text = RichTextBox.Text.Trim() 
```

Trim 从字符串的开头和结尾删除所有空白字符，
换行符被认为是空白
[参见 MSDN 的参考文献](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:21:36.663

如果 RichTextBox.Lines.Count() > 2

3 > 2 为真

您可以在 string.isnullorempty 上迭代和删除

Empty 仍然是一个字符串，您需要删除它或构建逻辑以不计算它

# objective-c - 动态 UIPickerView 更新

> ID：10842049
> 
> 赞同：0
> 
> 时间：2012-05-31T22:17:33.950
> 
> 标签：objective-c, xcode, dynamic, uipickerview

我遇到了两个 UIPickerViews 的问题。

第一个名为 pickerParent 的选择器选择一种食物。第二个名为pickerChild 的选择器会显示这些食物类型的列表。

问题是如果pickerChild 尝试选择其中一项，pickerChild 然后会更新自身以匹配pickerParent 列表中的相应项目。（例如：如果您在 pickerParent 上选择肉类，pickerChild 会显示“Ginger Beef, Lemon Chicken, Salt & Pepper Ribs, and Sweet & Sour Pork”。如果您随后在 pickerChild 列表中选择 Sweet & Sour Pork，则为第四项列表，它就会获得蔬菜的属性，并且只显示“什锦蔬菜”）

有人可以帮我这样pickerChild不会更新自己吗？

我的代码如下。

```
#import "MasterViewController.h"

#import "DetailViewController.h"

@interface MainPage () {
   NSMutableArray *_objects;
}
@end

@implementation MainPage
@synthesize pickerChild;
@synthesize pickerParent;
@synthesize image_view;

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return ( pickerView == pickerParent ? 1 : 1 );
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
    NSArray *values = ( pickerView == pickerParent ? topics : items );
    return [values count];
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
    NSArray *values = ( pickerView == pickerParent ? topics : items );
    return [values objectAtIndex: row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    if ([[topics objectAtIndex:row] isEqual:@"Noodles"]) {
       items = noodle;
    } else if ([[topics objectAtIndex:row] isEqual:@"Rice"]) 
    {
       items = rice;
    } else if ([[topics objectAtIndex:row] isEqual:@"Meat"]) 
    {
        items = meat;
    } else if ([[topics objectAtIndex:row] isEqual:@"Vegetables"]) 
    {
        items = vegatable;
    } else if ([[topics objectAtIndex:row] isEqual:@"Favorites"]) 
    {
        items = favorite;
    }
[pickerChild reloadAllComponents];

}

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    topics = [[NSMutableArray alloc] init];
    [topics addObject:@"Noodles"];
    [topics addObject:@"Rice"];
    [topics addObject:@"Meat"];
    [topics addObject:@"Vegetables"];
    [topics addObject:@"Favorites"];

    noodle = [[NSMutableArray alloc] init];
    [noodle addObject:@"Fried Noodles"];
    [noodle addObject:@"Shanghai Noodles"];

    meat = [[NSMutableArray alloc] init];
    [meat addObject:@"Ginger Beef"];
    [meat addObject:@"Lemon Chicken"];
    [meat addObject:@"Salt & Pepper Ribs"];
    [meat addObject:@"Sweet & Sour Pork"];

    vegatable = [[NSMutableArray alloc] init];
    [vegatable addObject:@"Assorted Vegetables"];

    rice = [[NSMutableArray alloc] init];
   [rice addObject:@"Fried Rice"];

    items = noodle;

    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:25:29.910

您的`didSelectRow..`委托方法不区分两个选择器，因此无论您更改了哪个选择器，您的子选择器都会重新加载。如果父选择器中的选择已更改，您只想重新加载子选择器。

因此，将您当前拥有的代码包装在：

```
 if (pickerView == parentPicker) 
```

你应该没事。

# system - 如何在 vim system() 调用中将参数传递给脚本？

> ID：10842051
> 
> 赞同：2
> 
> 时间：2012-05-31T22:18:05.350
> 
> 标签：system, vim

我想`%`在 call 中将当前文件名作为 shell 脚本的参数传递`system()`：

```
let rev=system("~/script %") 
```

我怎样才能真正做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:24:20.723

尝试使用`exec`：

```
exec 'call system("~/script " . expand("%"))' 
```

根据您想要做什么，您可能根本不需要`exec`（如`:h system()`建议）：

```
let foo = system("~/script " . expand("%")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:32:52.593

玩弄`expand()`（感谢kongo2002）：

```
let script="~/script " . expand("%")
let rev=system(script) 
```

用作魅力=）

# javascript - javascript序列化对象同时保留继承

> ID：10842054
> 
> 赞同：1
> 
> 时间：2012-05-31T22:18:22.810
> 
> 标签：javascript, serialization, browser-history, data-persistence

我有一个对象，说

```
O = {
    a1: instace_of_another_object,
    a2:100,
    a3:200
} 
```

我的 a1 继承自另一个对象，比如 X。

如何以我可以调用的方式序列化然后反序列化 O

```
O.a1.some_method() //which is part of X 
```

如果那不可能，我也可以将对象存储在本地存储代理（使用序列化）中。有没有办法可以将整个对象“保存”在“浏览器内存”中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:23:34.043

我不知道你可以用 JSON 做到这一点。

您可能想研究使用 SOAP/REST。

您还可以实现自己的 hydrator，它从 JSON 对象中获取某些属性并使用反射创建一个新对象（或简单地将值设置为属性）

# matlab - 是否有与 python 的“for in”循环等效的 Matlab 循环？

> ID：10842058
> 
> 赞同：8
> 
> 时间：2012-05-31T22:18:45.357
> 
> 标签：matlab

python中是否有相当于“for in”循环的matlab？

例如在 python 中，我可以使用以下代码遍历列表中的项目：

```
for c_value in C_VALUES: 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T22:25:14.743

在 matlab 中，`for`迭代行向量中的值。如果 C_VALUES 是一行，则与您的示例几乎相同。

```
for val = row_vec
    #% stuff in the loop
end 
```

是matlab语法。 `val`将在`row_vec`迭代时采用 的值。您经常会看到的语法（但并非绝对必要）是

```
for ii = 1:length(values)
    val = values(ii);
    #% stuff in the loop using val
end 
```

在这里，`1:length(values)`创建一个行向量`[1 2 3 ...]`，`ii`并可用于索引`values`。

（注意：`i`是另一种常见的选择，但是一旦您`i`在这种类型的上下文中使用它并为其分配了一个值，您就不能再在虚数意义上使用它了）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-06T10:47:24.577

请尝试以下代码。

```
 vs = [1 12 123 1234];
    for v = vs
        disp(v)
    end 
```

# c++ - 为 Google Protocol Buffer 解析文本文件

> ID：10842066
> 
> 赞同：11
> 
> 时间：2012-05-31T22:20:04.873
> 
> 标签：c++, input, io, protocol-buffers

根据示例代码[https://developers.google.com/protocol-buffers/docs/cpptutorial](https://developers.google.com/protocol-buffers/docs/cpptutorial)，他们展示了如何解析二进制格式的 proto 文件。使用

```
tutorial::AddressBook address_book;

{
  // Read the existing address book.
  fstream input(argv[1], ios::in | ios::binary);
  if (!address_book.ParseFromIstream(&input)) {
    cerr << "Failed to parse address book." << endl;
    return -1;
  }
} 
```

我尝试删除`ios::binary`文本格式的输入文件，但仍然无法读取文件。我需要做什么才能以文本格式读取 proto 文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T01:16:07.160

好吧，我想通了。将文本 proto 文件读入对象....

```
#include <iostream>
#include <fcntl.h>
#include <fstream>
#include <google/protobuf/text_format.h>
#include <google/protobuf/io/zero_copy_stream_impl.h>

#include "YourProtoFile.pb.h"

using namespace std;

int main(int argc, char* argv[])
{

  // Verify that the version of the library that we linked against is
  // compatible with the version of the headers we compiled against.
  GOOGLE_PROTOBUF_VERIFY_VERSION;

  Tasking *tasking = new Tasking(); //My protobuf object

  bool retValue = false;

  int fileDescriptor = open(argv[1], O_RDONLY);

  if( fileDescriptor < 0 )
  {
    std::cerr << " Error opening the file " << std::endl;
    return false;
  }

  google::protobuf::io::FileInputStream fileInput(fileDescriptor);
  fileInput.SetCloseOnDelete( true );

  if (!google::protobuf::TextFormat::Parse(&fileInput, tasking))
  {
    cerr << std::endl << "Failed to parse file!" << endl;
    return -1;
  }
  else
  {
    retValue = true;
    cerr << "Read Input File - " << argv[1] << endl;
  }

  cerr << "Id -" << tasking->taskid() << endl;
} 
```

当我在终端执行它时，我的程序将 proto buff 的输入文件作为第一个参数。例如`./myProg inputFile.txt`

希望这可以帮助任何有同样问题的人

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T22:25:03.360

> 我需要做什么才能以文本格式读取 proto 文件？

使用[TextFormat::Parse](https://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/text_format.cc)。我对 C++ 的了解不足以为您提供完整的示例代码，但这`TextFormat`是您应该寻找的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T14:08:41.607

简单总结一下要点：

```
#include <google/protobuf/text_format.h>
#include <google/protobuf/io/zero_copy_stream_impl.h>
#include <fcntl.h>
using namespace google::protobuf; 
```

(...)

```
MyMessage parsed;
int fd = open(textFileName, O_RDONLY);
io::FileInputStream fstream(fd);
TextFormat::Parse(&fstream, &parsed); 
```

在 Linux`protobuf-3.0.0-beta-1`上检查过。`g++ 4.9.2`

# php - 哪个版本的 PHP 用于基于 Windows CLI 的使用？

> ID：10842067
> 
> 赞同：1
> 
> 时间：2012-05-31T22:20:10.833
> 
> 标签：php, curl, windows-server-2003

我需要从 Windows 2003 服务器上的命令行运行一些 PHP 脚本。服务器上安装了 Apache/Tomcat，但没有安装 PHP。该服务器正在运行一个自定义的商业 Web 应用程序，我不想触摸它上面的 Apache/Tomcat 配置。我们正在寻找一些计划 PHP cURL 任务，我们将从 Windows 任务计划程序运行。有人可以为我指出正确的下载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:16:51.490

来自 PHP Freaks 论坛：

> 仅出于 CLI 的目的，无论最新版本的 php 是什么（5.4.3 atm），我都会使用非线程安全的 VC9 构建。
> 
> CLI 中不需要线程安全，因为每个实例都是它自己的独立进程，而 VC9 是更新的编译器。就 cURL 而言，您需要做的就是通过 php.ini 文件设置加载扩展 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:23:18.747

[PHP 下载页面](http://php.net/downloads.php)

不要忘记将 PHP 添加到系统路径中。

# objective-c - 在循环完成之前，文本不会显示在 UITextView 中

> ID：10842071
> 
> 赞同：0
> 
> 时间：2012-05-31T22:20:46.220
> 
> 标签：objective-c, ios, xcode, cocoa, uitextview

我有一个循环遍历一组产品（产品）以查看它们的任何 id（product_id）是否与给定产品（p）的匹配。更新 UITextView (outputText) 的文本以向用户显示搜索的进展情况：

```
for (Product *q in products) {
    outputText.text = [NSString stringWithFormat:@"%@\nChecking: %@", outputText.text, q.name];
    NSLog(@"%@\nChecking: %@", outputText.text, q.name);
    if ([q.product_id intValue] == [p.product_id intValue]) {
        outputText.text = [NSString stringWithFormat:@"%@\nMatch: %@", outputText.text, q.name];
        break;
    }
} 
```

问题是 UITextView 在循环完成之前似乎没有得到更新...... UITextView 大概是几秒钟的空白，大概是在处理循环时，虽然在 Xcode 控制台中我可以看到 nslog 文本滚动，然后突然之间，UITextView 一口气获取了所有文本。

有没有办法在循环期间将文本刷新到 UITextView？

非常感谢任何帮助，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:31:09.020

1.  确保您在主线程上更新 UI
2.  称呼`[outputText setNeedsDisplay:YES];`

# multithreading - 如何检查程序执行期间正在创建/删除哪些线程？

> ID：10842075
> 
> 赞同：0
> 
> 时间：2012-05-31T22:21:22.147
> 
> 标签：multithreading, frame-rate

我为我的无知道歉，但我对线程的工作原理一无所知。我正在编写一个吉他英雄，我意识到我加载的第一首音乐我的性能下降了巨大。如果我重新启动相同的音乐或加载另一首就可以了。

所以我认为它应该是与资产创建有关的东西，我忘记预加载的东西。我运行了 gDEbugger，结果当 fps 开始下降时，它会打印出大量荒谬的“线程创建/线程终止”。当这些消息停止时，游戏 fps 再次上升。问题是：如果我的游戏正在创建这些线程，我不知道为什么，我只创建一个用于加载资源的线程，我开始加载资源并在完成后停止。也许我把这个线程搞砸了。gDebugger 的字段包含有关线程的信息，例如哪个 dll 创建了它，但所有字段都填充有“N/A”。

我想到的一种可能性是 GLee（我用于 opengl 扩展）正在创建它们。但我不知道如何查找。我希望有人知道调试这些线程的工具。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:52:41.023

如果您认为它可能是 GLee，并且如果 GLee 与您正在加载的音乐资产无关，请尝试删除该代码并检查线程创建消息是否消失。

实际上，您可以通过使用存根实现接口或注释掉部分代码来将这种方法用于其他库以暴力方式缩小范围。

# mvp - 模型/视图/演示者：演示者到演示者的通信

> ID：10842080
> 
> 赞同：4
> 
> 时间：2012-05-31T22:21:41.840
> 
> 标签：mvp

我有一个表示小部件的视图类和一个随附的演示者类。我还有一个用于拥有小部件的窗口的视图类，以及一个用于窗口视图的伴随演示者。窗口操作小部件，所以我需要窗口展示器与小部件展示器进行通信。可视化：

```
+-------------+        +------------------+
| widget_view |<------>| widget_presenter |
+-------------+        +------------------+
       ^                         ^
       |                         |
       |                         V
+-------------+        +------------------+
| window_view |<------>| window_presenter |
+-------------+        +------------------+ 
```

我不确定的是如何构造对象。我知道 MVP 架构并没有处理这个问题，而是“把它留给读者练习”。我尝试过的事情：

1.  视图构造了它们的演示者，并`window_view`构造了`widget_view`. 但是，`window_view`在它的构造函数中需要额外的参数，它不应该关心的参数，只是为了实例化演示者。我也不确定如何`window_presenter`访问`widget_presenter`. 为for添加一个`widget_presenter`setter 来填充对我来说感觉不对。`window_presenter``window_view`
2.  消除两个演示者之间的通信线路。通过`window_presenter`交谈。这对我来说似乎也不理想，因为它需要添加代码来仅用于和之间的通信。它也只允许一种方式的通信，并且它还增加了允许外部与它的演示者通信的脂肪。`widget_presenter``window_view``window_view``window_presenter``widget_presenter``widget_view`

我可以想象这里的复杂性呈指数增长，因为`window_presenter`需要与其他演示者交谈，或者其他演示者需要与其他演示者交谈。

我还想过在这里添加一个中介对象来吸收所有这些相互通信和依赖关系，但是在这一点上，将逻辑与表示分离的整个想法开始感觉非常昂贵和非常复杂。我肯定在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:27:19.773

我发现这篇文章可能会有所帮助：

[http://martinfowler.com/eaaDev/uiArchs.html](http://martinfowler.com/eaaDev/uiArchs.html)

特别是，您似乎在谈论“经典” mvc，其中每个小部件都是具有自己控制器的视图。我认为这篇文章谈论的是世界的“表单”视图，每个“表单”都是视图的集合，并且只有一个控制器或演示者。我认为 MVP 属于“表单”视图，因此通常每个表单一个演示者。

# javascript - popup DIV 被容器 DIV 截断

> ID：10842085
> 
> 赞同：2
> 
> 时间：2012-05-31T22:22:44.943
> 
> 标签：javascript, css, popup

我有一个按钮，当悬停在上面时会显示一个弹出窗口。此按钮位于 div 内，弹出 div 被其中一个包含的 div 截断。

将鼠标悬停在“保存到列表”按钮上，您将看到。

[http://dev.iqcatalogs.com/avcat/ctl1642/index.cfm?manufacturer=tandberg&product=cisco-tracker-remote-control](http://dev.iqcatalogs.com/avcat/ctl1642/index.cfm?manufacturer=tandberg&product=cisco-tracker-remote-control)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T22:28:55.227

这是因为您周围的 div 设置为`overflow:auto`.

尝试将其更改为溢出：可见

```
div#productMainWrapper div#pmwRightContainer1 {
    color: #000000;
    float: right;
    height: 215px;
    overflow: visible; //changed
    padding: 8px 13px 0 0;
    width: 295px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T22:26:16.257

问题是 div#productMainWrapper div#pmwRightContainer1 不允许溢出的子元素完全显示。

将溢出更改为可见。

```
 div#productMainWrapper div#pmwRightContainer1 {

    overflow: visible;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:27:38.903

这是因为它在您的 div 中带有溢出自动。尝试将它放在盒子外面并使用定位来放置它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T22:43:32.630

根据其在代码中的布局方式和调用方式，我建议将弹出窗口“定位”到站点的 man 窗口，而不是具有按钮的容器。追到现在？基本上你有一个有你的按钮和内容的DIV，现在你的弹出窗口要么设置为目标那个div，要么没有设置任何参数，所以无论如何它都是以那个div为目标的。例如 target= _blank 用于 HTML 或 CSS display: block;

> 以下是使用顺序和无序列表的弹出菜单。将 li 和 ul 替换为您的 div ID。也没有定位是我的，您需要根据您的网站需要对其进行编辑。

```
#button li:hover > ul
{
        display: block;
}

/* PopOut */
#button ul
{
    list-style: none;
    margin: 0;
    padding: 0;
    display: none;
    position: absolute;
    top: 25px;
    left: 0;
} 
```

# xmpp - 通过 XMPP 进行 XML RPC

> ID：10842090
> 
> 赞同：1
> 
> 时间：2012-05-31T22:23:24.070
> 
> 标签：xmpp, xml-rpc, smack

我目前正在尝试通过 XMPP 实现 XML RPC。我使用 Smack 作为客户端库，使用 Vysper 作为 XMPP 服务器。简化后，我的设置如下所示：

**[client1] — [server] — [client2]**

我想从客户端 1 调用客户端 2 上的一个方法。我创建了一个具有类型集的 IQ，以及 [1] 中所述的 from 和 to 元素以及查询内容。简化示例：

```
<iq type='set' from='client1@localhost' to='client2@localhost' id='1'>
  <query xmlns='jabber:iq:rpc'>
    <methodCall>
      <methodName>foo</methodName>
    </methodCall>
  </query>
</iq> 
```

问题是，当从 client1 发送 IQ 时，我收到一个错误 IQ，并且没有任何内容提交给 client2。调查问题时，我在规范 [2] 中发现了以下声明：

> 服务器必须忽略名册“集”上的任何“收件人”地址，并且必须将任何名册“集”视为适用于发送者。[…]

我是否正确，在这个星座中，两个客户端之间不可能有 Jabber-RPC？还是我对 Jabber-RPC 有根本的误解？

[1] [http://xmpp.org/extensions/xep-0009.html](http://xmpp.org/extensions/xep-0009.html)

[2] [http://xmpp.org/rfcs/rfc3921.html#roster](http://xmpp.org/rfcs/rfc3921.html#roster)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:14:21.653

看起来您正在将 Iq 节发送到客户端的裸 JID 而不是完整的 JID，即，`client2@example.com`而不是`client2@example.com/resource`.

发送到裸 JID 的 Iq 节由服务器处理，不会路由到客户端。您实质上是在查询用户的帐户，而不是与特定的连接代理进行交互。通常，您总是希望指定收件人的完整 JID。

# uitableview - plist 应该加载和更新表，但仅适用于第一次加载

> ID：10842092
> 
> 赞同：0
> 
> 时间：2012-05-31T22:23:27.997
> 
> 标签：uitableview, plist, save, writetofile

我有一个简单的表格视图，它显示历史输入值的列表。此列表保存在 plist 中，并在“ViewdidLoad”部分中加载。

当在表上使用任何操作时，即 commitEditingStyle，我将值重新保存到我的 plist 中。

当更改视图控制器，然后返回到我的 uitableview 时，我希望列表是我的新列表，但它会在任何编辑之前恢复到列表（通过滑动删除或其他方法）。

在 UIviewtable.m 文件中：

```
-(void)readThePlist
{
AddWeight *readlist =[[AddWeight alloc]init];
[readlist readPlist];
}
-(void)writeThePlist
{
AddWeight *writelist =[[AddWeight alloc]init];
[writelist writePlist];
}

- (void)viewDidUnload
{
[self dismissViewControllerAnimated:YES completion:nil];
[self writeThePlist];
[super viewDidUnload];
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    HistoryItem *item = [weightsArray objectAtIndex:indexPath.row];
[self performSegueWithIdentifier:@"EditItem" sender:item];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"HistoryItem"];

cell.textLabel.text = [weightsArray objectAtIndex:indexPath.row];  
cell.detailTextLabel.text = [datesArray objectAtIndex:indexPath.row];    

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [weightsArray removeObjectAtIndex:indexPath.row];
    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
}

- (void)addItemViewControllerDidCancel:(AddItemViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)addItemViewController:(AddItemViewController *)controller didFinishAddingItem:(HistoryItem *)item
{
    int newRowIndex = [weightsArray count];
[weightsArray addObject:item];

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

[self dismissViewControllerAnimated:YES completion:nil];
}

- (void)addItemViewController:(AddItemViewController *)controller didFinishEditingItem:(HistoryItem *)item
{
int index = [weightsArray indexOfObject:item];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:index inSection:0];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
[self configureTextForCell:cell withHistoryItems:item];
[self dismissViewControllerAnimated:YES completion:nil];
} 
```

我对文件的读写部分位于 AddWeight.m 中：

```
-(NSString *) dataFilePath
{ NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentDirectory = [path objectAtIndex:0]; return [documentDirectory stringByAppendingPathComponent:@"WeightsList.plist"];
}

- (void)writePlist
{
[weightsArray writeToFile:[self dataFilePath] atomically:YES];
}

-(void)readPlist
{ 
NSString *filePath = [self dataFilePath]; 
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) 
    { 
    weightsArray = [[NSMutableArray alloc] initWithContentsOfFile:filePath];; 
    NSLog(@"%@\n",weightsArray); 
    NSLog(@"%@\n", filePath); 
    } 
} 
```

# actionscript-3 - 如何在 AS3 平台游戏中创建平台？

> ID：10842099
> 
> 赞同：0
> 
> 时间：2012-05-31T22:23:38.843
> 
> 标签：actionscript-3

我尝试在 ActionScript 3 中创建一个平台游戏。我已经有一些用于移动和动画角色的代码，以及简单的平台样式，但我想让角色撞墙或将他的头撞到底部平台。这时候我有这个：

```
import flash.events.KeyboardEvent;
import flash.events.Event;

var KeyThatIsPressed:uint;
var rightKeyDown:Boolean = false;
var leftKeyDown:Boolean = false;
var upKeyDown:Boolean = false;
var downKeyDown:Boolean = false;

var gravity:Number = 1;
var yVelocity:Number = 0;
var canJump:Boolean = false;
var playerSpeed:Number = 7;
var crouchSpeed:Number = -4;

stage.addEventListener(KeyboardEvent.KEY_DOWN, PressAKey);
stage.addEventListener(KeyboardEvent.KEY_UP, ReleaseAKey);

function PressAKey(event:KeyboardEvent):void{
    if(event.keyCode == 37 || event.keyCode == 65){
        leftKeyDown = true;
    }
    if(event.keyCode == 38 || event.keyCode == 87){
        upKeyDown = true;
    }
    if(event.keyCode == 39 || event.keyCode == 68){
        rightKeyDown = true;
    }
    if(event.keyCode == 40 || event.keyCode == 83){
        downKeyDown = true;
    }
}

function ReleaseAKey(event:KeyboardEvent):void{
    if(event.keyCode == 37 || event.keyCode == 65){
        leftKeyDown = false;
    }
    if(event.keyCode == 38 || event.keyCode == 87){
        upKeyDown = false;
    }
    if(event.keyCode == 39 || event.keyCode == 68){
        rightKeyDown = false;
    }
    if(event.keyCode == 40 || event.keyCode == 83){
        downKeyDown = false;
    }   
}

char_mc.addEventListener(Event.ENTER_FRAME, moveChar);

function moveChar(event:Event):void{
    if(rightKeyDown){
        char_mc.x += playerSpeed;
        char_mc.scaleX = 1;
    }
    if(rightKeyDown && !downKeyDown && canJump == true){
        char_mc.gotoAndStop(2);
    }
    if(leftKeyDown){
        char_mc.x -=playerSpeed;
        char_mc.scaleX = -1;
    }
    if(leftKeyDown && !downKeyDown && canJump == true){
        char_mc.gotoAndStop(2);
    }
    if(upKeyDown && canJump){
        yVelocity = -10;
        canJump = false;
        char_mc.gotoAndStop(3);
    }
    if(downKeyDown && !rightKeyDown && !leftKeyDown){
        char_mc.gotoAndStop(4);
    }
    if(downKeyDown && rightKeyDown && canJump == true){
        char_mc.x +=crouchSpeed;
        char_mc.gotoAndStop(5);
    }
    if(downKeyDown && leftKeyDown && canJump == true){
        char_mc.x -=crouchSpeed;
        char_mc.gotoAndStop(5);
    }
    if(upKeyDown && canJump && rightKeyDown){
        canJump = false;
        char_mc.gotoAndStop(3);
    }
    if(upKeyDown && canJump && leftKeyDown){
        canJump = false;
        char_mc.gotoAndStop(3);
    }

    if(!rightKeyDown && !leftKeyDown && !upKeyDown && !downKeyDown){
        char_mc.gotoAndStop(1);
    }
    if(yVelocity >0){
        canJump = false;
    }
    if (canJump == false){
        char_mc.gotoAndStop(3);
    }

    yVelocity +=gravity;

    if(! floor_mc.hitTestPoint(char_mc.x, char_mc.y,true)){
        char_mc.y+=yVelocity;
    }
    if(yVelocity > 20){
        yVelocity = 20;
    }

    for(var i:int=0;i<10;i++){
        if(floor_mc.hitTestPoint(char_mc.x,char_mc.y,true)){
            char_mc.y--;
            yVelocity=0;
            canJump=true;
        }
    }

    if (char_mc.hitTestObject(fallBox)){
        char_mc.x = 20;
        char_mc.y = 300;
    }
} 
```

在我用了 4 天在 youtube 或 google 或任何地方找到任何东西后，我来到了这里。我希望你能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:29:18.650

我建议使用[http://citrusengine.com/](http://citrusengine.com/)或其他引擎或[http://www.box2dflash.org/](http://www.box2dflash.org/)之类的东西，这将使您的生活变得轻松，而不是试图重新发明轮子。

# java - 如何强制 JGroups 哪个节点成为协调员？

> ID：10842102
> 
> 赞同：6
> 
> 时间：2012-05-31T22:24:04.820
> 
> 标签：java, cluster-computing, jgroups

我正在寻找一种方法来强制 JGroups 使用特定服务器作为协调器，如果该服务器不存在，则选择一个新的协调器，直到指定的那个重新加入集群并接管作为协调器。

在这种情况下，我们通过 Coordinator 将一些信息推送到集群中，监听主题以获取更新，但是获取和处理这些更新可能是资源密集型的，因此我们不希望它向外部世界提供任何服务。因此，在集群前面的负载均衡器中，我们将其设置为不发送到协调器。但是因为 Coordinator 是随机选出的，所以我们基本上需要关闭集群，直到只有单机在里面，然后再启动集群的其余部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T22:46:32.077

目前没有办法做到这一点。Jgroups 花费了大量时间来确保协调器可以是组中的任何节点。维护和监控组成员列表健康的所有任务在组中的所有成员之间共享，以确保协调员的职责不会过多地影响协调员的绩效。标准 GMS（Group MembershipService）协议栈类负责协调器的选择。目前它只是视图列表中的第一个主机。

要获得这种行为，您将必须实现自己的协议栈。有趣的是，我一直在为 Jgroups 开发一个协议栈，它大致实现了您所要求的，但是它还没有准备好迎接黄金时段。

然而，其他人可能已经在这个问题上受到了打击。我建议在[jgroups 邮件列表](http://sourceforge.net/mail/?group_id=6081)上发帖并提出同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-22T11:09:34.800

刚刚偶然发现这个帖子。在 JGroups 中有一种简单而标准的方法可以做到这一点：[1]。它本质上是让用户代码控制视图生成。

[1] [http://www.jgroups.org/manual4/index.html#MembershipChangePolicy](http://www.jgroups.org/manual4/index.html#MembershipChangePolicy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-27T16:11:28.517

您可以将所需的节点设置为协调器。: [github 示例](https://github.com/belaban/JGroups/wiki/Changing-the-coordinator-of-a-cluster)

我正在添加同步块以在所有节点上完成更改并完成代码：

```
public static final String GMS_DELTA_VIEW_FIELD_NAME = "use_delta_views";

/**
 * Change coordinator to {@code desiredCoordinator}. Must be invoked from coordinator.
 * @param desiredCoordinator
 * @return {@code true} if changes success, {@code false} overwise 
 */
boolean changeCoordinator(JChannel currentChannel, Address desiredCoordinator) {

    if(!Util.isCoordinator(currentChannel.getAddress)) {
        throw new RuntimeException("The current node is not coordinator.");
    }

    ArrayList<Address> newMembersOrder = Lists.newArrayList(currentView.getMembers());        

    // Switch desired node to first place
    Collections.swap(newMembersOrder, 0, newMembersOrder.indexOf(desiredCoordinator));        

    // Create new view
    long newId = currentView.getViewId().getId() + 1;
    View newView = new View(newMembersOrder.get(0), newId, newMembersOrder);

    GMS gms = (GMS)clusterChannel.getProtocolStack().findProtocol(GMS.class);
    CustomProtocol protocol = new CustomProtocol(newMembersOrder.stream()
            .filter(item -> !item.equals(currentChannel.getAddress()))
            .collect(Collectors.toSet()));

    boolean oldUseDeltaViews = (Boolean)gms.getValue(GMS_DELTA_VIEW_FIELD_NAME);
    try {
        // Disable using_delta_views at GMS
        gms.setValue(GMS_DELTA_VIEW_FIELD_NAME, false);

        // Insert custom protocol below GMS for synchronizing with VIEW_ACK events
        currentChannel.getProtocolStack().insertProtocolInStack(protocol, gms, ProtocolStack.BELOW);
        gms.castViewChange(newView, null, newMembersOrder);

        // Wait no more than 30 seconds to all VIEW_ACK responses
        if (!protocol.collector.waitForAllAcks(TimeUnit.SECONDS.toMillis(30))) {                
            return false;
        }

        return true;
    }
    finally {
        // Repair old state
        gms.setValue(GMS_DELTA_VIEW_FIELD_NAME, oldUseDeltaViews);
        currentChannel.getProtocolStack().removeProtocol(protocol);
    }
}

private class CustomProtocol extends Protocol implements UpHandler {

    AckCollector collector;

    public CustomProtocol(Collection<Address> waitedAddresses) {
        collector = new AckCollector(waitedAddresses);
    }

    @Override
    public Object up(Event evt) {

        if(evt.getType() == Event.MSG) {
            final Message msg=(Message)evt.getArg();
            GmsHeader hdr=(GmsHeader)msg.getHeader(proto_id);
            if(hdr != null && hdr.getType() == GmsHeader.VIEW_ACK) {                    
                collector.ack(msg.getSrc());
            }
        }

        return super.up(evt);
    }
} 
```

# python - Python re.search 先按照结果

> ID：10842103
> 
> 赞同：1
> 
> 时间：2012-05-31T22:24:11.017
> 
> 标签：python, regex

我想得到“开始打印x；；；” 在 python 中通过 re.search 从这里开始：
fv (x,y,z) begin print x;;; 打印 y ;;; 返回 x + y + z 结束；

我试过这个：`begin = re.search("begin .+;;;", line)`

但这会返回以下字符串：“begin print x;;; print y ;;;”
任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:28:42.723

重复默认是贪婪的，这意味着它会匹配尽可能多的字符。这导致第`.+`一个传递权`;;;`并匹配字符串的其余部分直到最后一个`;;;`。

为防止这种情况，请将 更改`.+`为`.+?`，这会使重复变得懒惰（匹配尽可能少的字符）：

```
begin = re.search("begin .+?;;;", line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:28:26.573

您需要 + 的[非贪婪](http://www.regular-expressions.info/repeat.html)版本。默认情况下，`.+`将匹配尽可能多的字符，因此它将捕获从“开始”到最后一次出现“;;;”的所有内容。试试`re.search("begin .+?;;;", line)`吧。

# java - GridBagLayout 中的 JTextField ActionListener

> ID：10842106
> 
> 赞同：0
> 
> 时间：2012-05-31T22:24:19.007
> 
> 标签：java, swing, actionlistener, jtextfield, gridbaglayout

我在向我的 JTextField 添加 actionlistener 时遇到了麻烦。我需要将用户输入的文本转换为字符串，以便我可以使用它。

谁能告诉我我做错了什么或者我应该怎么做。

这是代码：

```
public void actionPerformed(ActionEvent e)
        {
            //Execute when button is pressed
            JFrame frame = new JFrame("Value Bet");
            frame.setVisible(true);
            frame.setSize(500,300);
            GridBagLayout layout = new GridBagLayout();
            frame.setLayout(layout);
            GridBagConstraints c = new GridBagConstraints();

            JLabel label;
            JTextField tf;

            if (shouldFill) {
            //natural height, maximum width
            c.fill = GridBagConstraints.HORIZONTAL;
            }
            if (shouldWeightX) {
            c.weightx = 0.5;
            }

            ...

            tf = new JTextField();
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 2;
            frame.add(tf, c);
            tf.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e)
                {
                    String chance1 = tf.getText();
                }
            });

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:15:22.463

```
public void actionPerformed(ActionEvent e)
{
    //  Look Ma, a one-liner!
    String chance1 = JOptionPane.showInputDialog(someComponent, "Value Bet");
} 
```

![选项窗格单线](../Images/75953f5311669ef046fe7010c0c49ad5.png)

进一步查看重载方法以调整外观，为稳健性添加`null`检查，并考虑使用微调器而不是文本字段 (BNI)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:29:29.513

你为什么使用`ActionListener`而不是`KeyListener`？

您应该使用[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)或：

```
tf.getDocument().addDocumentListener(documentListener); 
```

[文档监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

# maven-plugin - 如何在父 pom 中配置清单版本以反映子模块

> ID：10842110
> 
> 赞同：0
> 
> 时间：2012-05-31T22:24:43.250
> 
> 标签：maven-plugin, maven-3

如何在父 pom 中配置清单版本以反映子模块。

我的项目父 pom 有五个子模块，它们是 jars。我想用清单版本配置父 pom，以便每个子 jar 都具有该清单版本。我应该如何在父 pom.xml 中配置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:16:46.957

最简单的解决方案是将以下[归档器配置](http://maven.apache.org/shared/maven-archiver/examples/manifestEntries.html)放入例如 maven-jar-plugin 中：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-jar-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <archive>
      <manifestEntries>
        <Manifest-Version>2.0</Manifest-Version>
      </manifestEntries>
    </archive>
  </configuration>
</plugin> 
```

如果您使用它们，则必须为不同的插件（如 war、ear、ejb）重复此存档配置。解决方案是将此类内容放入父 pom 的 pluginManagement 部分。在您描述的情况下，您需要将上述配置放入父级的 pluginManagement 部分。

# c# - 如何检查登录用户是否属于活动目录中的域管理员组？

> ID：10842115
> 
> 赞同：0
> 
> 时间：2012-05-31T22:25:19.563
> 
> 标签：c#, asp.net, active-directory

如何检查登录用户是否属于活动目录中的域管理员组？如果是，我想显示一个控件。任何想法请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:29:22.107

如果这是一个 MembershipUser 你可以检查使用 Roles.IsUserInRole("Rolename")

# unix - 解释一下这个去重行、保留订单、单行AWK命令

> ID：10842118
> 
> 赞同：14
> 
> 时间：2012-05-31T22:25:28.390
> 
> 标签：unix, command-line, awk

我学到了一种非常方便的方法来删除重复行，保留从*[Remove duplicates without sorting file - BASH](http://www.unixcl.com/2008/03/remove-duplicates-without-sorting-file.html)*中的顺序。

说，如果你有以下文件，

```
$cat file
a
a
b
b
a
c 
```

您可以使用以下内容删除重复的行：

```
$awk '!x[$1]++' file
a
b
c 
```

这在操作优先级方面是如何工作的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T22:36:19.237

表达式被解析为

```
!(x[$(1)]++) 
```

所以，从内到外，它是：

*   取当前输入行的字段 1，`$(1)`（注意这`$`是 AWK 中的运算符，与 Perl 不同）。
*   `x`具有字段 1 值的索引；如果`x`是未绑定变量，则将其绑定到新的关联数组。
*   后增量`x[$(1)]`；应用类似于 C 中的规则，因此表达式的值是在增量之前的值，如果尚未分配值`x[$(1)]`，它将为零。`x[$(1)]`
*   `x[$(1)]`否定前一个的值，当为零时将产生真值。
*   实际上做增量，以便`x[$(1)]`获得一个非零值。因此，下一次，`x[$(1)]`对于相同的值，`$(1)`将返回 1。

然后对输入中的每一行计算这个表达式，并确定是否`awk`应该执行隐含的默认操作，即将该行回显到`stdout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T21:21:38.667

在 AWK 中，数组是关联的，因此每行的第一列或第一个字段 ,`$1`用作数组的索引`x`。

# android - 如何在android中获取文本字段并以这种格式编辑文本？

> ID：10842120
> 
> 赞同：0
> 
> 时间：2012-05-31T22:25:33.740
> 
> 标签：android, xml, android-widget

如何获得[此链接](http://www.google.com/imgres?q=facebook+login+page+for+iphone+app&hl=en&biw=1517&bih=741&tbm=isch&tbnid=B3Lzdk9iccTLoM%3a&imgrefurl=http://www.zdnet.com/photos/facebook-messenger-for-android/6274957&docid=Yx91nEbZbOk9sM&imgurl=http://i.zdnet.com/gallery/6274960-480-800.jpg&w=480&h=800&ei=U-_HT4iAMoTe0QGY6LzsDw&zoom=1&iact=rc&dur=360&sig=108520165499131102780&page=1&tbnh=115&tbnw=70&start=0&ndsp=41&ved=1t:429,r:2,s:0,i:75&tx=54&ty=68)中的样式？像脸书一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:46:28.637

您可以`<shape>`在 XML 中使用只有一些圆角的可绘制对象。例如：

```
<shape android:shape="rectangle" >
    <solid android:color="@android:color/white" />
    <stroke android:color="@android:color/darker_gray" android:width="1dp" />
    <corners
        android:bottomLeftRadius="0dp"
        android:bottomRightRadius="0dp"
        android:radius="5dp" />
</shape> 
```

这仅适用于 API 级别 8 及以上。在此之前有一个错误会导致 0dp 角半径属性被忽略（所有角都是圆角）。这可以通过使用`<layer-list>`带有圆角矩形和方形矩形或两个与其分层的drawable来克服。根据您希望边框的外观，将它们正确设置可能有点棘手，但稍作试验就可以解决问题。

# javascript - 使用静态托管收集信息？

> ID：10842123
> 
> 赞同：-5
> 
> 时间：2012-05-31T22:25:50.063
> 
> 标签：javascript, mysql, html

我有一个关于 HTML 和 mySQL 的查询。我不想向静态网站添加一个小的功能元素，它将获取粉丝的电子邮件地址并将其添加到联系人表中。有什么方法可以在不支付 php 或 aspx 托管费用的情况下做到这一点？IE 你可以通过 HTML 来实现，还是可以通过 javascript 来实现而不产生托管费用？谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:36:01.373

也许你想要这样的东西：

[http://mailchimp.com/features/](http://mailchimp.com/features/)

我不能说免费版本是否好用，但可能值得研究。

基本上，您在您的网站上制作一个表格，将电子邮件地址传递到他们的网站，并且他们维护电子邮件地址列表。然后，您可以登录并查看已注册的每个人并向他们发送电子邮件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T22:35:21.830

您可以使用带有 json 的 jquery 来做到这一点，但是安全性会非常脆弱，有人曾经告诉我关于欺骗，他们可以看到您的所有代码和所有函数调用

# sql - 如何在sql中创建三级关系？

> ID：10842124
> 
> 赞同：0
> 
> 时间：2012-05-31T22:25:56.630
> 
> 标签：sql

这是在三个表之间创建关系的最佳方式，例如客户有公司，而这些公司有分支机构。我需要知道你应该如何创建这三个表的键。第一个表有 CustID，第二个表有 CustID 和 CompanyId，最后一个表有 CustID、CompanyId 和 BrnchId。有一个更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:29:00.560

分行与客户无关。公司也不是真的（嗯，公司不依赖个人客户的存在）。您可能想要规范化，因此有一个 customerToCompany 链接表（因此一个客户可以有很多公司，一个公司可以有很多客户），分支的公司可能是一对多的，具体取决于您的用例。每个主表都有一个 PK（自然或代理，取决于数据的性质），链接表包含 FK。

# .net - 如何在 PropertyGrid 中禁用排序

> ID：10842126
> 
> 赞同：1
> 
> 时间：2012-05-31T22:26:10.860
> 
> 标签：.net, propertygrid

我希望我的项目以声明顺序而不是字母顺序出现。是否可以在 PropertyGrid 中禁用排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:31:51.503

使用`PropertySort`枚举。
将其设置为`NoSort`。
检查此链接以获取[详细信息](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertysort.aspx)

# sql-server - T-SQL：BULK INSERT 不会产生有用的 ERRORFILE

> ID：10842129
> 
> 赞同：2
> 
> 时间：2012-05-31T22:26:28.430
> 
> 标签：sql-server, bulkinsert

我们目前有一个例程 RUNS DAILY 并将几十个纯文本文件导入 foxpro。我正在努力将其转换为 TSQL。我正在使用`BULK INSERT`命令。

我为几十个平面文件中的每一个创建了一个 sql 命令和一个 XML 文件——每种格式一个。

对于每个文件，我从命令行调用这样的翻译：

```
sqlcmd -d MYDB -i Import_FILEA.sql -o Output_FILEA.txt 
```

它运作良好（当它运作时）。问题是数据来自一个在发送数据之前没有验证数据的来源。我不怪他们；我知道这些事情是如何发生的。但现在我在一个地方。

我的 sql 脚本如下所示：

```
SET LANGUAGE us_english;
GO
SET DATEFORMAT ymd;
GO
DELETE FROM [MyDB].[dbo].[FILEA];
GO
BULK INSERT 
  [MyDB].[dbo].[FILEA]
  FROM 'C:\Documents and Settings\somewhere\FILEA.DAT'
  WITH
  (
  DATAFILETYPE ='CHAR',
  FORMATFILE='C:\Documents and Settings\somewhere\translate_FILEA.xml',
  ERRORFILE ='C:\Documents and Settings\somewhere\ERR_FILEA.TXT',
  LASTROW   = 400000
  )
GO 
```

该`LASTROW`参数仅用于调试目的。问题是，当这件事失败时，它完全失败了，并且没有告诉我导致问题的行或字段。它不会创建任何错误文件 - 或者如果确实如此，它很快就会放弃它。（我可以看到文件被创建然后它消失了 - 最糟糕的事情。）

我对我很想写一个 perl 脚本或者一些用正则表达式编译的 vba 来检查极少数不是字符字段的字段的事情感到非常恼火。这是一件小事，但它是额外的——我担心下一个人会维护它。（我不认为其他任何人都可以在 perl 中编程或熟悉 .net 中的正则表达式）此外，MSDN 文档看起来`bulk insert`应该在该错误文件中报告问题行。

有任何想法吗？这是一个已知问题吗？我缺少一些参数吗？还有其他方法吗？还是外部数据格式检查器是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:20:06.533

我没有得到对我有用的错误文件。我有两个解决这个问题的方法：

(A) 在运行导入之前，创建并运行一个 perl 脚本来解析和检查每个平面文件的数据字段。

(B) 以文本字段的形式读取所有内容，但在每次 BULK INSERT 之后通过 UPDATE SET 命令设置正确数据类型的额外字段。

我现在选择选项 (A)，因为这是我首先想到的，而且我可以自动向数据生产者发送电子邮件。

# xml - XML 注释和“--”

> ID：10842131
> 
> 赞同：80
> 
> 时间：2012-05-31T22:26:45.507
> 
> 标签：xml, comments

```
<!-- here is some comment --
                            ^
                            |
                    what can be here apart from '>'? 
```

XML 似乎不喜欢注释中的“--”。我在某处读到“--”在`<! ... >`事物内部切换某些模式，但是`<!-- -- -- -->`（偶数个`--`s）似乎也无效。如果它是一些历史特征，它的“专业”部分是什么？（“对立”部分无法`--`在评论中包含）。

通过不只制作'-->'评论结尾并允许'--'内部使评论处理复杂化的原因是什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-31T22:32:29.880

从标准文件：

[http://www.w3.org/TR/REC-xml/#sec-comments](http://www.w3.org/TR/REC-xml/#sec-comments)

> [定义：注释可能出现在文档中其他标记之外的任何位置；此外，它们可能出现在文档类型声明中语法允许的位置。它们不是文档字符数据的一部分；XML 处理器可以（但不是必须）使应用程序能够检索注释文本。**为了 [兼容性](http://www.w3.org/TR/REC-xml/#dt-compat)，注释中不得出现字符串“--”（双连字符）。] 注释中**不得识别参数实体引用。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-01-02T14:29:43.860

也许它对某人有帮助。我有一个问题，我想在 XML 中注释掉一个以 -- 开头的命令行参数：

```
<arg line="-v --line-break 0" /> 
```

像这样自然正常的方式

```
<!-- <arg line="-v --line-break 0" /> --> 
```

没用，但我发现，如果`-`替换为等效的 UTF-8`&#x002D;`或者`&#45;`它可以工作并且可以在评论中被容忍。

所以在我的情况下，字符串

```
<arg line="-v &#45;&#45;line-break 0" /> 
```

被正确解析并且可以成为评论的一部分。

当然，它看起来有点难看，但如果有人想保留一个字符串——作为他的 XML 中的注释——我认为它仍然比没有好。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-06-01T08:00:10.873

这是 XML 中的愚蠢规则之一，因为它在 SGML 中，人们不想破坏兼容性。为什么它在 SGML 中是任何人的猜测：可能是因为它在原始解析器中保存了三行代码。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-05-31T22:39:13.967

`--`不允许与 SGML 兼容。从[SGML 和 HTML](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4)开始：

> 标记声明打开分隔符 ("<!") 和注释打开分隔符 ("--") 之间不允许有空格，但注释关闭分隔符 ("--") 和标记声明关闭分隔符 ( ">")。一个常见的错误是在评论中包含一串连字符（“---”）。作者应避免在评论中放置两个或更多相邻的连字符。

所以在 SGML 中`<!`打开`>`和关闭“标记声明”并`--`打开和关闭注释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-27T21:00:59.777

这个问题迟早会影响到任何喜欢在 XML 中使用注释来禁用他们不需要的内容的人。几天来，我遇到了 Spring 上下文配置无法加载的重大问题，但没有详细解释原因。问题是评论这样的内容块的习惯：

> ```
> <value>ABC1</value>
> <!-- <value>ABC2</value> -->
> <value>ABC3</value> 
> ```

注释掉它必须更改为：

```
<!--
    <value>ABC1</value>
    !-- <value>ABC2</value> --
    <value>ABC3</value>
--> 
```

注释掉块中的破折号而不是被忽略，无论它们放在哪里，都弄乱了整个文件的解析。

# linux - IPython 检查运行脚本的用户是否是 root 用户（Linux）

> ID：10842132
> 
> 赞同：1
> 
> 时间：2012-05-31T22:26:51.460
> 
> 标签：linux, root, ipython

让 IPython 脚本检查用户当前是否为 root 的正确方法是什么？

以下是我在 bash 脚本中的操作方式：

```
if [ $(id -u) != "0" ];then
   echo "This script must be run as root."
   exit 1
fi 
```

有没有比使用“！id”或“！whoami”更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T02:44:08.837

在 *nix 操作系统上[`geteuid()`，`os`模块](http://docs.python.org/library/os.html#os.geteuid)中有.

# database - 数据访问层设计

> ID：10842135
> 
> 赞同：4
> 
> 时间：2012-05-31T22:27:12.907
> 
> 标签：database, data-access-layer

我有一个 Web 应用程序和一个控制台应用程序访问数据库。db 有 2 个表（A、B），其中一个（A）特定于 Web 应用程序。在编写数据访问层时，最好的方法是什么？从技术上讲，数据访问层应该提供对所有可访问数据的访问。这样做时，如果我们有单一访问层，则与 A 交互的方法会暴露给控制台应用程序。在同一个数据库中为 2 个表创建 2 个访问层是否有意义？有什么好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:32:45.553

我个人会将数据访问层单独放在一个类和 1 个（或许多中间类）中，以保存将由数据访问层进行对话/填充的业务实体。然后，控制台和 Web 应用程序与业务实体层对话。

例如：

**数据访问层**

保存有关数据库、执行存储过程、函数和查询的方法的*所有连接信息。*这堂课将与`Table A and Table B`

**控制台 1 实体**

这将包含使用数据访问层实例来检索适当信息的方法/属性。IE

```
public List<string> GetTableAContents() {
   var retVal = Data.RunStoredProcedure("sp_Table1Contents);
   return retVal;
} 
```

**控制台应用程序**

```
Console1Entity ce = new ConsoleEntity();
var contents = ce.GetTableAContents(); 
```

然后，您将根据与该应用程序相关的内容创建一个新的 WebApplication 实体类。这将提供一个三层架构。

# java - 如何在 JButton 中添加 JPasswordField？

> ID：10842140
> 
> 赞同：0
> 
> 时间：2012-05-31T22:27:54.663
> 
> 标签：java, swing

这是我在stackoverflow中的第一个问题。我在问如何在 JButton 中添加 JPasswordField，UAC 对话框就是一个例子。

[![](../Images/96fee8e8b19611afd8237f27e2263a4e.png)](https://i.stack.imgur.com/YsB4B.png)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC294938.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T22:33:49.290

这不是“JButton 中的 JPasswordField”——这只是“焦点指示”。

您应该将此表单（图标、用户名文本字段、密码文本字段等）添加到例如`JPanel`. 在这个 JPanel 中覆盖paintComponent 并绘制[渐变](http://www.java2s.com/Code/Java/2D-Graphics-GUI/GradientPaintdemo.htm)和边框。

这就是你打算做的，我相信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T22:58:23.957

您可以使用 JPanel 获得类似的效果。只需添加所有需要的组件并添加 MouseListener。这是示例。

```
class ButtonTest extends JFrame {
    class ClickablePanell extends JPanel {
        JTextField field;
        JPasswordField passwordField;
        public ClickablePanell() {
            setBorder(BorderFactory.createRaisedBevelBorder());
            field=new JTextField();
            field.setColumns(10);
            add(field);
            passwordField=new JPasswordField();
            passwordField.setColumns(10);
            add(passwordField);
            addMouseListener(new MouseClickAdapter());
        }
        class MouseClickAdapter extends MouseAdapter {
            public void mouseClicked(MouseEvent e) {
                System.out.println("field="+ClickablePanell.this.field.getText());
                System.out.println("passwordField="+new String(ClickablePanell.this.passwordField.getPassword()));
            }
        }
    }

    public ButtonTest() {
        add(new JLabel("click in border"));
        add(new ClickablePanell());
        setExtendedState(JFrame.EXIT_ON_CLOSE);
        setSize(300, 200);
        setLayout(new FlowLayout());
        setVisible(true);
    }

    public static void main(String[] args) {
        new ButtonTest();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T08:20:05.427

*   [课程：在容器中布置组件（Java™ 教程 > 使用 JFC/Swing 创建 GUI）](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)
*   JButton 扩展容器

![在此处输入图像描述](../Images/7a5a8ff66e15a308cc3ce931c1b54667.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class LayoutComponentsWithinButtonTest {
  public static JButton makeButton() {
    Icon icon = new Icon() {
      @Override public void paintIcon(Component c, Graphics g, int x, int y) {
        g.translate(x, y);
        g.setColor(Color.ORANGE);
        g.fillOval(4,4,55,55);
        g.translate(-x, -y);
      }
      @Override public int getIconWidth()  {
        return 64;
      }
      @Override public int getIconHeight() {
        return 64;
      }
    };
    JButton button = new JButton();
    button.addActionListener(new ActionListener() {
      @Override public void actionPerformed(ActionEvent e) {
        Toolkit.getDefaultToolkit().beep();
      }
    });
    button.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    c.gridwidth  = 1;
    c.gridheight = 3;
    c.gridy = 0;

    c.gridx = 0;
    c.weightx = 0.0;
    c.insets = new Insets(5, 5, 5, 5);
    c.anchor = GridBagConstraints.WEST;
    button.add(new JLabel(icon), c);

    c.gridheight = 1;
    c.gridx = 1;
    c.weightx = 1.0;
    c.insets = new Insets(4, 2, 0, 2);
    button.add(new JTextField(16), c);

    c.gridy = 1;
    button.add(new JPasswordField(16), c);

    c.gridy = 2;
    c.insets = new Insets(0, 2, 0, 2);
    c.anchor = GridBagConstraints.NORTHWEST;
    button.add(new JLabel("Domain:Xxx"), c);

    return button;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JButton b = LayoutComponentsWithinButtonTest.makeButton();
    JPanel p = new JPanel(new BorderLayout());
    p.setBorder(BorderFactory.createEmptyBorder(32,32,32,32));
    p.add(b, BorderLayout.NORTH);

    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(p);
    f.getRootPane().setDefaultButton(b);
    f.setSize(480, 200);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# matlab - matlab将图像放在gui的中心

> ID：10842148
> 
> 赞同：0
> 
> 时间：2012-05-31T22:28:36.533
> 
> 标签：matlab, user-interface, axes

我正在尝试将图像：“我”放在窗口的中心，如下所示：

![在此处输入图像描述](../Images/c6baada2d92010d5e5d74ecb074d02d4.png)

我在第一个回调函数中写道：

```
img = imread(files{k});  %# Read the data from your image file
hAxes = axes('Parent',hOptsGUI,'Units','pixels','Position',[362 242 424 359]);  %#   so the position is easy to define
image(img,'Parent',hAxes);  %# Plot the image
set(hAxes,'Visible','off');          %# Turn the axes visibility off 
```

我不确定，但我认为我不需要axesH。此外，轴让当前轴：/

有人可以告诉我如何解决吗？

这是我的代码：

```
 function  data = mainGUI(options, files)
      %# current options
      j = 1;
      ops = cellfun(@(c) c(1), options, 'Uniform',false);
      data{j} =  [ops{1:length(ops)}];
      j = j + 1;

      options = cellfun(@(c) c(2:1:end), options, 'Uniform',false);
      clear ops;
      ops = cellfun(@(c) c(1), options, 'Uniform',false);
      opts =  [ops{1:length(ops)}];

     %# create main figure, with plot and options button
     hFig = figure('Name','window 1','Visible','Off');
     callback

     %# options button callback function
     function callback(o,e)
         %# save current options (sharing data between the two GUIs)
         setappdata(hFig, 'opts',opts);

         %# display options dialog and wait for it

         for k=1: length(files)
                 hOptsGUI = secondaryGUI(hFig, options);

                 img = imread(files{k});  %# Read the data from your image file
                 hAxes = axes('Parent',hOptsGUI,'Units','pixels','Position',[362 242 424 359]);  %#   so the position is easy to define
                 image(img,'Parent',hAxes);  %# Plot the image
                 set(hAxes,'Visible','off');          %# Turn the axes visibility off

                 waitfor(hOptsGUI);

                 %# get new options, and update plot accordingly
                 opts = getappdata(hFig, 'opts');
                  data{j} = opts;
                  j = j + 1;
         end
     end
 end

 function hFig = secondaryGUI(hParentFig, options)
     %# create figure

     hFig = figure('Name','Simulation Plot Window','Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[300 300 1150 600]);
     movegui(hFig, 'center');

     options = cellfun(@(c) c(end:-1:1), options, 'Uniform',false);
     num = length(options);

     %# get saved settings
     selected = getappdata(hParentFig, 'opts');

     %# top/bottom panels
     hPanBot = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.0 1 0.2]);
     hPanTop = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.2 1 0.2]);

     %# buttongroups in top panel
     hBtnGrp = zeros(1,num);
     width = 1/num;
     for i=1:num
         %# create button group
         hBtnGrp(i) = uibuttongroup('Parent',hPanTop, ...
        'Units','normalized', 'Position',[(i-1)*width 0 width 1]);
         %# populate it with radio buttons
         height = 1./numel(options{i});
         for j=1:numel(options{i})
             h = uicontrol('Parent',hBtnGrp(i), 'Style','Radio', ...
            'Units','normalized', 'Position',[0.05 (j-1)*height 0.9 height], ...
            'String',options{i}{j});
             %# set initially selected values
             if strcmp(selected{i},options{i}{j})
                 set(hBtnGrp(i), 'SelectedObject',h)
             end
         end
     end

     %# save button in bottom panel
     uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
    'Units','normalized', 'Position',[0.3 0.2 0.4 0.2], ...
    'String','start', 'Callback',@callback)

     %# save button callback function
     function callback(o,e)
         %# get selected values
         hObjs = get(hBtnGrp(:), 'SelectedObject');
         vals = get(cell2mat(hObjs),{'String'});

         %# update settings
         setappdata(hParentFig, 'opts',vals);

         %# close options dialog
         close(hFig)
     end
 end 
```

感谢大家！:]]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T02:48:47.967

您目前正在这样做：

```
% show the images
Im = imread(files{k});
AxesH = axes('Units', 'pixels', 'position', [0.5, 10, 400, 260], 'Visible', 'off');
image(Im, 'Parent', AxesH); 
```

`image`是一个有点奇怪的函数，就像 MATLAB 中的绘图函数一样 - 它并没有真正遵守您基于其他绘图函数所期望的很多行为。

来自[图像的在线文档](http://www.mathworks.com/help/techdoc/ref/image.html)（以下重点是我的）：

> 图像函数有两种形式：
> 
> **调用 newplot 以确定在何处绘制图形对象并设置以下轴属性**的高级函数：****
> 
>  **XLim 和 YLim 包围图像
> 
> 分层到顶部以将图像放置在刻度线和网格线的前面
> 
> YDir 反转
> 
> 查看到 [0 90]
> 
> **无需调用 newplot 即可将图像添加到当前坐标区的低级函数。低级函数参数列表只能包含属性名称/属性值对。****

 **这意味着如果要将图像添加到预先存在的一组轴，则*必须仅使用属性值对。* 该函数的其他形式都调用[newplot](http://www.mathworks.com/help/techdoc/ref/newplot.html)。

要将某些内容绘制到您创建的轴上，请使用以下形式：

```
image('Parent', axesH, 'CData', Im); #% add other property-value pairs as needed 
```

请注意，设置 y 方向、限制、刻度线等也必须完成，因为高级函数不再处理这些了。**

# python - 使用自定义对象查询 Python 字典键

> ID：10842152
> 
> 赞同：3
> 
> 时间：2012-05-31T22:29:11.197
> 
> 标签：python, dictionary

考虑使用以下类的对象创建的带有键的字典：

```
class Point( object ):

    def __init__( self, x, y ):
        self.x = x
        self.y = y

    def __eq__( self, other ):
        return self.x == other.x

    def __hash__( self ):
        return self.x.__hash__()

    def __ne__( self, other ):
        return self.x != other.x

>>> a = Point(1,1)
>>> b = Point(0, 2)
>>> dct = {}
>>> dct[a] = 15
>>> dct[b] = 16
>>> dct[a]
15
>>> c = Point(1,None)
>>> dct[c]
15 
```

发生这种情况是因为`c`和`a`共享相同的哈希并且是相等的。是否有 O(1) 方法来实现给定`c`返回的函数`a`（与下面的 O(n) 实现相反？）：

```
def getKey( dct, key ):
    for k in dct:
        if k == key:
            return k
    return None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:40:20.730

你的函数总是返回*None*或*key*，所以我不明白你的意思......

根据复杂性，假设您至少需要 O(log(n))，例如，如果 dct 是我认为的字典，那么：

```
def getKey( dct, key ):
    if dct.has_key(key):
        return key
    return None 
```

如果你想返回它的值，那么只需使用：*dct.get(key, None)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:06:22.213

您可能可以将字典的值作为由键和值本身组成的元组或列表。使用您的示例：

```
>>> a = Point(1,1)
>>> b = Point(0, 2)
>>> dct = {}
>>> dct[a] = (15, a)
>>> dct[b] = (16, b)
>>> dct[a] 
(15, <Point object at 0xb769dc2c>)
>>> c = Point(1,None)
>>> dct[c]
(15, <Point object at 0xb769dc2c>) 
```

现在你可以像这样`a`使用`c`：

```
>>> dct[c][1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T23:12:41.513

> 发生这种情况是因为 c 和 a 共享相同的哈希。

不; 发生这种情况是因为它们共享一个哈希**并且**彼此比较相等。

通常，不相等的对象可能散列到相同的值。（相等的对象**必须**散列到相同的值。）

`__eq__`如果对象具有相同的 x 坐标，则您将对象定义为相等。这显然是错误的；只有当两个坐标相等时，它们才应该相等。

但听起来这不是你真正想要做的。如果你想“给定`c`，得到`a`”，那么你真正要求的是在给定一个点的情况下找到具有相同 x 坐标的所有其他点。

这很简单：制作一个将 x 坐标值映射到具有该坐标的点的字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T23:12:19.903

换句话说，给定一个对象列表和一个对象 X，在列表中找到一个与 X 具有相同哈希值的元素。考虑：

```
class A(object):
    def __init__(self, x, blah):
        self.x = x
        self.blah = blah
    def __eq__(self, other):
        return self.x == other.x
    def __hash__(self):
        return self.x
    def __repr__(self):
        return '%d-%s' % (self.x, self.blah)

ls = [A(1, 'one'), A(2, 'FOO'), A(3, 'three')]
test = A(2, 'BAR')
print test, '=', (set(ls) - (set(ls) - set([test]))).pop() 
```

要使用您的字典示例，请替换`set(ls)`为`viewkeys`：

```
dct = dict(zip(ls, range(100)))
print test, '=', (dct.viewkeys() - (dct.viewkeys() - set([test]))).pop() 
```

# matlab - MATLAB - 我如何（优雅地）插值矩阵？

> ID：10842158
> 
> 赞同：2
> 
> 时间：2012-05-31T22:29:50.373
> 
> 标签：matlab, interpolation

假设我有一个包含 3 个元素的单元格数组；第一个和第三个单元格是矩阵，而第二个是空的：

```
>> P
P = 
  [3x8 double]    []    [3x8 double] 
```

我可以通过对矩阵中的每个单独元素进行插值来填充第二个矩阵，但肯定有办法一次性做到这一点吗？

**编辑**：平均值肯定适用于P。但假设我有类似的东西

```
>> Q
Q = [3x8 double]    [3x8 double]     [3x8 double]    []    []    [3x8 double] 
```

因此，鉴于我的四个已知矩阵，我可以使用更高级的插值（如样条）来填充缺失的矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:23:51.357

您可以在对 INTERP1 的单个函数调用中执行所有插值，但它需要将数据设置为所需的形状，然后在完成后返回：

```
%# cell array of matrices (some are missing)
sz = [3 8];         %# all of same size
Q = {ones(sz), [], 3*ones(sz), [], [], 6*ones(sz)};

%# indices of missing matrices
idx = ~cellfun(@isempty,Q);
x = 1:numel(Q);

%# merge cells into a multidimensional matrix, call INTERP1, then divide back
QQ = Q(idx);
QQ = permute(cat(3,QQ{:}), [3 1 2]);
QQ = interp1(x(idx), QQ, x);            %# one call to interpolation function
QQ = reshape(num2cell(permute(QQ, [2 3 1]), [1 2]), 1,[]); 
```

请记住，矢量化有时会以牺牲可读性为代价......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T22:37:25.870

像这样的东西适用于您的玩具箱：

```
l = length(P{1}(:)); m = size(P{1}, 1); n = size(P{1}, 2);
myfun = @(x) interp1([1 3], [P{1}(x) P{3}(x)], 2)
P{2} = reshape(arrayfun(myfun, 1:l), m, n); 
```

更通用的代码（**已验证！！**）通常可以工作。您可以在一个 interp1 调用中指定要使用的插值类型：

```
[m, n] = size(P{1}); l = m*n;
avbl = find(not(cellfun('isempty', P)));
missing = find(cellfun('isempty', P));

extractor = @(k) cellfun(@(x, k) x(k), {P{avbl}}, cellmat(1, length(avbl), 1, 1, k))
myfun = @(x) interp1(avbl, extractor(x), missing)
intermediate = reshape(arrayfun(myfun, 1:l, 'UniformOutput', false), m, n);
ext2 = @(k) cellfun(@(p) p(k), intermediate);
P(missing) = arrayfun(ext2, 1:length(missing), 'UniformOutput', false); 
```

如果你想让我解释一些部分，请告诉我。它基本上只是调用 cellfun 几次，然后重塑输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:39:41.040

你的意思是：

```
 p{2} = (p{1} + p{3}) / 2;  % note the curly braces 
```

?

# git - Github Windows 破坏存储库 - 如何清除我的整个存储库？

> ID：10842159
> 
> 赞同：1
> 
> 时间：2012-05-31T22:30:13.090
> 
> 标签：git, github, github-for-windows

我对 Git 还很陌生，在使用 Github 时遇到了一些非常奇怪的问题。我在 github 上有一个存储库，我想从 Windows 推送我的更改（使用 github for windows 客户端）。一切顺利，但是当我尝试在我的 VPS 上提取更改时，我得到以下输出：

```
remote: Counting objects: 278, done.
remote: Compressing objects: 100% (121/121), done.
remote: Total 278 (delta 128), reused 271 (delta 121)
Receiving objects: 100% (278/278), 7.56 MiB | 3.05 MiB/s, done.
Resolving deltas: 100% (128/128), done.
error: refs/remotes/origin/master does not point to a valid object!
error: Trying to write ref refs/heads/master with nonexistant object 38386ca31ffd0ba741e05ad9bd663b4bc6c1fa86
fatal: Cannot update the ref 'HEAD'. 
```

我试图删除存储库中的每个文件，然后提交并强制推送“开始清理”，但这也不起作用。我不想简单地创建一个新的存储库，因为我有几个人关注我的项目。

如果我从我的 VPS 进行强制推送（因此它恢复了我在 Windows 中所做的提交），一切都会再次正常工作，但是当我尝试再次推送 Windows 时，我会收到拒绝/快进错误。

我对我的项目文件进行了本地备份，因此我可以尝试再次获得一个“干净”的分支，而不必担心丢失我的文件。

所以，我的问题是：如何摆脱存储库中的每一个提交以开始清理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:24:18.770

从 Windows 机器上的命令行运行 msysgit，而不是使用 github 应用程序。有一个`git fsck`看看你是否有任何损坏的对象。

# svn - 无法签出 apache cxf 示例

> ID：10842161
> 
> 赞同：1
> 
> 时间：2012-05-31T22:30:25.303
> 
> 标签：svn, tortoisesvn, cxf

我正在研究一些来自 apache CXF 项目[http://cxf.apache.org/docs/sample-projects.html的样本](http://cxf.apache.org/docs/sample-projects.html)

想检查几件事，看看它们是如何工作的，即

[http://svn.apache.org/viewvc/cxf/trunk/distribution/src/main/release/samples/ws_security/](http://svn.apache.org/viewvc/cxf/trunk/distribution/src/main/release/samples/ws_security/)

但是我无法结帐我收到此错误：

![在此处输入图像描述](../Images/35650ef9fefeb93985687576d313a8cb.png)

以前有没有人遇到过相同/类似的问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T22:37:15.540

“viewvc” URL 仅用于浏览，不用于结帐。利用：

[http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/](http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T13:57:18.387

[从 Git存储库](https://github.com/apache/cxf/tree/master/distribution/src/main/release/samples)中获取它要容易得多。

# android - 不使用 ArrayList 填充 ListView

> ID：10842163
> 
> 赞同：1
> 
> 时间：2012-05-31T22:30:38.177
> 
> 标签：android, listview, arraylist

我想`ListView`从一个`ArrayList`.

`ArrayList`填充了正确的值。在模拟器上，我得到的是具有值的列表项

> 包名 ClassName@someNumber

有人有同样的问题吗？？

```
 public class ExchangeMoneyMKActivity extends Activity {

    Document dom;
    private static final String METHOD_NAME = "GetExchangeRate";

    private static final String NAMESPACE = "http://www.nbrm.mk/klservice/";
    private static final String SOAP_ACTION=NAMESPACE+METHOD_NAME;
    private static final String URL = "http://www.nbrm.mk/klservice/kurs.asmx?kurs";
    ListView lw;

    ArrayList<String>currencyShortNames=new ArrayList<String>();
    ArrayList<String>currencyRates=new ArrayList<String>();
    ArrayList<ExchangeRate> currencyList=new ArrayList<ExchangeRate>();
    ArrayAdapter<ExchangeRate> aa;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        currencyShortNames.add("EUR");
        currencyShortNames.add("USD");
        currencyShortNames.add("GBP");
        currencyShortNames.add("CHF");
        currencyShortNames.add("SEK");
        currencyShortNames.add("NOK");
        currencyShortNames.add("JPY");
        currencyShortNames.add("DKK");
        currencyShortNames.add("CAD");
        currencyShortNames.add("AUD");

        lw=(ListView)this.findViewById(R.id.listView1);

        aa = new ArrayAdapter<ExchangeRate>(
                    this,android.R.layout.simple_list_item_1,
                    currencyList);
        lw.setAdapter(aa);

        callService();

    }

    private void callService() {
        try{

            SoapObject request=new SoapObject(NAMESPACE,METHOD_NAME);

            SimpleDateFormat dateFormat = new SimpleDateFormat("dd.MM.yyyy");
            java.util.Date date = new java.util.Date();
            request.addProperty("StartDate",dateFormat.format(date));
            request.addProperty("EndDate",dateFormat.format(date));

            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);

            envelope.dotNet=true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            //MyXmlParserHandler parser=new MyXmlParserHandler();
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive  result = (SoapPrimitive) envelope.getResponse();
             String resultData = result.toString();
            // System.out.println(resultData);
            int strStart=resultData.lastIndexOf("schema");
            int strStop=resultData.lastIndexOf("dsKurs");
            int strLength=strStop-strStart-10;
            String responseXML=resultData.substring(strStart+10,strLength);
            responseXML.replace("&lt;", "<");
            responseXML.replace("&gt;", ">");
            String xmlDocument="<?xml version=\"1.0\" encoding=\"utf-8\" ?>"+
                    "<dsKurs>" +
                    responseXML + 
                    "</dsKurs>";
            System.out.println(xmlDocument);

            XMLfromString(resultData);

        }catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void XMLfromString(String resultData) throws ParserConfigurationException, SAXException, IOException {

        // TODO Auto-generated method stub
        InputStream is = new ByteArrayInputStream(resultData.getBytes("UTF-8"));

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        DocumentBuilder db = dbf.newDocumentBuilder();
        try{
            dom = db.parse(is);
        }catch(Exception e){
            System.out.println("Fatal error");
        }

        dom.getDocumentElement();
        NodeList nl = dom.getElementsByTagName("KursZbir");
        currencyList.clear();
        if (nl != null && nl.getLength() > 0) {
            for (int i = 0 ; i < nl.getLength(); i++) {

                    Element kursZbir = (Element)nl.item(i);
                    Element sreden = (Element)kursZbir.getElementsByTagName("Sreden").item(0);
                    currencyRates.add(sreden.getFirstChild().getNodeValue());
            }
        }
        for(int i=0;i<currencyShortNames.size();i++){
            currencyList.add(new ExchangeRate(currencyShortNames.get(i).toString(),currencyRates.get(i).toString()));
            System.out.println(currencyList.get(i).shName.toString());
            System.out.println(currencyList.get(i).Currency.toString());

            aa.notifyDataSetChanged();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:23:02.800

您实际上需要一个自定义 ArrayAdapter 用于 ExchangeRate。目前，您的列表视图不知道要显示 ExchangeRate 的哪个属性，并且可能在每个 Exchange Rate 实例上调用 .toString()

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

```
class ExchangeRateAdapter extends ArrayAdapter<ExchangeRate> {

    public ExchangeRateAdapter(Context context, ArrayList<ExchangeRate> rate) {
        super(context, android.R.layout.simple_spinner_item, rate);
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        ExchangeRate rate = (ExchangeRate) getItem(position);
        TextView view = new TextView(this.getContext());
        view.setTextColor(0);
        view.setHeight(30);
        view.setText(rate.getAmount());
        return view;
    }
} 
```

然后

```
aa = new ExchangeRateAdapter();
list.setAdapter(aa); 
```

在 getView (..) 方法中，代码专门告诉 ListView 显示 Amount 而不再显示 .toString()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:45:54.643

```
 ListView myListView = (ListView) findViewById(R.id.myListView);

    listAdapter = new ArrayAdapter<String>(this, 
                      android.R.layout.simple_list_item_1, 
                      myArrayList);
    myListView.setAdapter(listAdapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:33:45.297

没有任何东西可以做到这一点。但是，我创建了自己的 ListAdapater 版本，它实现了 java.util.List 并允许您在其中设置 java.util.List 的任何实现。本质上它是这样工作的：

```
 public class abstract ListAdapter<T> extends BaseAdapter implements List<T> {

     List<T> list;

     public ListAdapter( List<T> contents ) {
        list = contents;
     }

     public int getCount() {
        return list.size();
     }

     public T getItem(int i) {
        return list.get(i);
     }

     public long getItemId( int i ) {
        return i;
     }

     public int size() {
        return list.size();
     }

     public boolean isEmpty() {
        return list.isEmpty();
     }

     public boolean contains( Object o ) {
        return list.contains(o);
     }

     public boolean addAll( Collection<? extends T> c ) {
        boolean result = list.addAll(c);
        notifyDataSetChanged();
        return result;
     }

     // so on and so on essentially delegating every method in List 
     // interface to the underlying list.  Of course mutators will have to call 
     // notifyDataSetChanged()
 } 
```

我还有其他一些改进，可以更轻松地使用规定的视图回收机制创建和绑定到视图。所以你实现 createView() 和 bindView() 而不是实现 getView()。

最后，它使创建灵活列表变得轻而易举：

```
 public void onCreate( Bundle saved ) {

     ListAdapter<String> adapter = new ListAdapater<String>() { ... };
     adapter.add( "Foo" );
     adapter.add( "Bar" );
     adapter.add( "BaZ" );

     listView.setAdapter( adapter );
 } 
```

它比任何开箱即用的 Android 都要高效得多。

# python - 在 Python 中以编程方式创建算术特殊方法，（又名工厂函数 HOWTO）

> ID：10842166
> 
> 赞同：5
> 
> 时间：2012-05-31T22:31:22.043
> 
> 标签：python, class, factory

我的想法是创建特定的函数对象，可以将它们相加/减去/...一起，返回一个具有相同属性的新函数对象。希望这个示例代码演示了这个想法：

```
from FuncObj import Func

# create some functions
quad = Func(lambda x: x**2)
cube = Func(lambda x: x**3)

# now combine functions as you like
plus = quad + cube
minus = quad - cube
other = quad * quad / cube

# and these can be called
plus(1) + minus(32) * other(5) 
```

我编写了以下代码，希望对其进行足够的评论和记录以解释我想要实现的目标。

```
import operator

class GenericFunction(object):
    """ Base class providing arithmetic special methods. 
        Use derived class which must implement the 
        __call__ method.
    """

    # this way of defining special methods works well
    def __add__(self, operand):
        """ This is an example of a special method i want to implement. """
        obj = GenericFunction()
        # this is a trick from Alex Martelli at
        # http://stackoverflow.com/questions/1705928/problem-with-making-object-callable-in-python
        # to allow per-instance __call__ methods
        obj.__class__ = type(obj.__class__.__name__, (obj.__class__,), {})
        obj.__class__.__call__ = lambda s, ti: self(ti) + operand(ti)
        return obj

    # on the other hand this factory function seems buggy 
    def _method_factory(operation, name):
        """ Method factory.
        Parameters
        ----------
        op : callable
            an arithmetic operator from the operator module
        name : str
            the name of the special method that will be created
        Returns
        -------
        method : callable
            the __***__ special method
        """
        def method(s, operand):
            obj = GenericFunction()
            obj.__class__ = type(obj.__class__.__name__, (obj.__class__,), {})
            obj.__class__.__call__ = lambda s, ti: operation(s(ti), operand(ti))
            return obj
        return method

    __sub__ = _method_factory(operator.__sub__, '__sub__')
    __mul__ = _method_factory(operator.__mul__, '__mul__')
    __truediv__ = _method_factory(operator.__truediv__, '__div__')

class Func(GenericFunction):
    """ A customizable callable object. 
        Parameters
        ----------
        func : callable
    """
    def __init__(self, func):
        self.func = func

    def __call__(self, *args):
        return self.func(*args)

if __name__ == '__main__':

    # create some functions
    quad = Func(lambda x: x**2)
    cube = Func(lambda x: x**3)

    # now combine functions
    poly_plus = quad + cube
    poly_minus = quad - cube

    # this is the expected behaviour, and it works well
    # since the __add__ method is defined correctly.
    assert quad(1) + cube(1) == poly_plus(1)

    # this, and the others with * and / result in a "maximum recursion depth exceeded"
    assert quad(1) - cube(1) == poly_minus(1) 
```

我想我错过了一些重要的东西，但我看不到它。

**编辑**

在迪特里希回答之后，我忘了提到一个角落案例。假设我想继承 GenericInput 并且我需要自定义**调用**方法__，而不将可调用对象传递给构造函数。我必须举例，（实际上这是我最初发布此问题的代码）。

```
class NoiseInput(GenericInput):
    def __init__(self, sigma, a, b, t):
        """ A band-pass noisy input. """
        self._noise = lfilter(b, a, np.random.normal(0, 1, len(t)))
        self._noise *= sigma/self._noise.std()
        self._spline = InterpolatedUnivariateSpline(t, self._noise, k=2)

    def __call__(self, ti):
        """ Compute value of the input at a given time. """
        return self._spline(ti)

class SineInput(GenericInput):
    def __init__(self, A, fc):
        self.A = A
        self.fc = fc

    def __call__(self, ti):
        return self.A*np.sin(2*np.pi*ti*self.fc) 
```

在这种情况下，还有一些工作要做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:09:48.797

这里有很多不需要存在的代码，而且比它需要的更复杂。

例如，`__class__`属性是所谓的“魔法”属性之一。魔术属性是特殊的，只需要在特殊情况下使用，例如在使用元编程时。此处无需通过代码创建类。

另一个例子是`Func`代码中的类，它实际上并没有做任何事情。您可以安全地将其替换为：

```
def Func(x):
    return x 
```

所以你有相反的问题：你没有“错过”任何东西，你有太多了。

```
class Func(object):
    def __init__(self, func):
        self._func = func
    def __call__(self, x):
        return self._func(x)
    def __mul__(self, other):
        return Func(lambda x: self(x) * other(x))
    def __add__(self, other):
        return Func(lambda x: self(x) + other(x))
    def __sub__(self, other):
        return Func(lambda x: self(x) - other(x)) 
```

请注意，这*不是*解决此类问题的传统方法。传统上，这里避免使用 lambda 并使用表达式树。使用表达式树的优点是可以对结果表达式进行代数操作。例如，您可以求解它们、计算精确导数或将它们打印为方程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:13:18.087

我假设你想`f(x ** 2) + f(x ** 3)`返回一个函数`x**2 + x**3`？你可以试试这个：

```
class Func:
    def __init__(self, func):
        self._func = func

    def __call__(self, *args):
        return self._func(*args)

    def __add__(self, other):
        def result(*args):
            return self._func(*args) + other(*args)
        return Func(result)
    __radd__ = __add__

    def __mul__(self, other):
        def result(*args):
            return self._func(*args) * other(*args)
        return Func(result)
    __rmul__ = __mul__

    # etc... 
```

这对我有用，而且比你所拥有的要简单得多。

编辑：

您甚至可能不理会`self._func`算术方法中的调用，而是`self`直接调用。

# python - py2app安装错误--Permission Denied

> ID：10842167
> 
> 赞同：0
> 
> 时间：2012-05-31T22:31:26.867
> 
> 标签：python, py2app

我真的很努力地安装 py2app，但是每当我在源代码上运行 install 命令时，我都会完成一半，然后我得到一个权限被拒绝的错误。有谁知道我该如何解决这个问题？我对我正在使用的机器拥有管理员权限。我正在使用管理员的配置文件进行安装......所以我真的很难过。任何帮助都是极好的。

我正在运行 Mac OS X 10.6.8 我正在使用 Python 2.7（64 位，但使用 32 位首选项运行）我正在使用 wxPython（32 位，因为这就是 wxPython 在 Mac 上必须提供的全部功能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T11:44:22.323

我有这个问题很长时间了。尝试以管理员身份运行它。

# php - 如何实现未注册用户的查看次数？

> ID：10842169
> 
> 赞同：2
> 
> 时间：2012-05-31T22:31:48.783
> 
> 标签：php, mysql

我将它设置为将每个视图记录在一个名为的表中的位置，`question_views`因此每个用户只能计算一次。

但是，我有一个问题。现在，当您未登录时，查看次数只会不断增加，因为我无法识别未注册的人（或未登录的人）。

这是我在用户查看时将用户输入数据库的方式：

```
function add_view($user, $question) {
  $ts = time();
  $check = mysql_num_rows(mysql_query("SELECT * FROM question_views WHERE user='$user' AND question_id=$question"));
    if($check==0) {
      mysql_query("UPDATE questions SET views=views+1 WHERE qid=$question");
      mysql_query("INSERT INTO question_views (user,question_id,date) VALUES ($user,$question,$ts)");
    }
} 
```

当用户未登录时`$_SESSION['userid']`（这是调用函数时传递的内容）甚至不存在。

什么是让观看计数系统只计算每个观看者一次的好方法，包括未注册的人？

**编辑：当然没有办法可靠地做到这一点。但是有*一种*方法可以做到至少有点好。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:58:48.140

科尔宾是对的。不过，就我个人而言，我会使用 cookie。IP 可以在几个人之间共享，并且会话只会持续到您关闭浏览器。我认为 cookie 是你最好的选择，当然，它可以被删除。只需将生命周期设置为“永远”或较长的间隔。

# c# - 如何遍历 TreeView

> ID：10842175
> 
> 赞同：1
> 
> 时间：2012-05-31T22:32:26.423
> 
> 标签：c#, asp.net

我有 TreeView Web Control 之类的

```
1
  1.1
2
  2.1
     2.1.1
          2.1.1.1
          2.1.1.2
3
  3.1 
     3.1.1 
```

如果我检查了 [CheckBox] 2.1.1.2 节点，我怎样才能得到像 2,2.1,2.1.1 和 2.1.1.2 这样的结果
我已经尝试使用这个[http://msdn.microsoft.com/en-us/ library/wwc698z7.aspx](http://msdn.microsoft.com/en-us/library/wwc698z7.aspx)示例，但它没有给我所需的输出。任何帮助或说明如何实现所需的输出将不胜感激。

```
private void PrintRecursive(TreeNode treeNode)
{
   // Print the node.
   System.Diagnostics.Debug.WriteLine(treeNode.Text);
   MessageBox.Show(treeNode.Text);
   // Print each node recursively.
   foreach (TreeNode tn in treeNode.ChildNodes)
   {
      PrintRecursive(tn);
   }
}

// Call the procedure using the TreeView.
private void CallRecursive(TreeView treeView)
{
   // Print each node recursively.
   TreeNodeCollection nodes = treeView.CheckedNodes; // Modified to get the Checked Nodes
   foreach (TreeNode n in nodes)
   {
      PrintRecursive(n);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:53:16.577

```
var texts = new List<string> { treeNode.Text };

while (treeNode.Parent != null)
{
    texts.Add(treeNode.Parent);
    treeNode = treeNode.Parent;
}

//Reverse to get the required Layout of the Tree
texts.Reverse(); 

var result = string.Join("\r\n", texts); 
```

或者，如果您想要父节点本身，从一级父节点到根父节点，包括自我：

```
var parents = new List<TreeNode> { treeNode };

while (treeNode.Parent != null)
{
    parents.Add(treeNode.Parent);
    treeNode = treeNode.Parent;
}

// Now parents contains the results. Do whatever you want with it. 
```

# javascript - 暂停 for 循环

> ID：10842182
> 
> 赞同：0
> 
> 时间：2012-05-31T22:33:06.217
> 
> 标签：javascript, jquery

是否可以在 javascript/jquery 中暂停 for 循环？

我有一个`$.each`, 穿过一个 63 长的数组，里面有一个`for`，里面有另一个`for`，里面还有另一个`for`（使`each`> `for`> `for`> `for`），现在每个`for`循环都通过数组，这使得 63^4 （等于15752961）不同的组合，这需要时间......

Sooo，是否可以在 2k 组合时暂停 2 秒？

我想暂停循环的原因是解锁 UI ......

代码：

```
var $arr = ["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],
len = $arr.length,
l = 0,
$("body").delay(1000).show(0, function(){
    $.each($arr, function(index, val){ // 63
        for(var i = 0; i < len; i++){ // 3969
            for(var j = 0; j < len; j++){ // 250047
                for(var k = 0; k < len; k++){ // 15752961
                    thing = val+i+j+k;
                    l++;
                    $("#loading").text(l+"/15752961");
                    console.log(l+"/15752961");
                    $("<div>"+thing+"</div><br />").prependTo("body");                                  
                }
            }
        }
    })
}) 
```

附言。如果有人认为，他们可以解决我的问题，请这样做：D

**/* 编辑 */** 如果我尝试运行这个服务器端，我会得到一个服务器错误，如果我使用`foreach`或`for`

```
$smaa = range("a","z");
$store = range("A","Z");
$tal = range("0","9");
$arr = array_merge($smaa, $store, $tal);

for($i = 0; $i < $count; $i++){ // 62
    for($j = 0; $j < $count; $j++){ // 3844
        for($k = 0; $k < $count; $k++){ // 238328
            for($l = 0; $l < $count; $l++){ // 14776336
                $finish[] = $arr[$i].$arr[$j].$arr[$k].$arr[$l];
            }
            $finish[] = $arr[$i].$arr[$j].$arr[$k];
        }
        $finish[] = $arr[$i].$arr[$j];
    }
$finish[] = $arr[$i];
}

foreach($arr as $first){ // 62
    $finish[] = $first;
    foreach($arr as $second){ // 3844
        $finish[] = $first.$second;
        foreach($arr as $third){ // 238328
            $finish[] = $first.$second.$third;
            foreach($arr as $fourth){ // 14776336
                $finish[] = $first.$second.$third.$fourth;
            }
        }
    }
} 
```

请注意，我**不会**同时使用两者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:34:25.880

不，不可能“暂停” for 循环，无论如何它不会让它更快。

不要在这里使用它，但看看[`window.setTimeout(fn, delay)`](https://developer.mozilla.org/en/DOM/window.setTimeout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:36:54.443

不。

但是，您可以使用以下内容：

```
(function() {
    var i=0, j=0, k=0, timer;
    timer = setInterval(function() {
        // loop body here
        k++;
        if( k >= max_k) {
            k = 0;
            j++;
            if( j >= max_j) {
                j = 0;
                i++;
                if( i >= max_i) {
                    clearInterval(timer);
                }
            }
        }
    },1);
})(); 
```

我不确定如何将它与 集成`$.each`，您可能必须使用纯 JavaScript 来完成。但是这段代码基本上会在重绘的同时尽可能快地运行循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T23:32:09.297

这是未经测试的，但希望你能明白这一点。说实话，这可能是您应该在服务器端处理的事情，或者做一次并将输出存储在代码中。

```
var $arr = ["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],
len = $arr.length,
l = 0,
paused = false,
writer = '',
pauseAt = 2000;

$("body").delay(1000).show(0, function(){

    function killForTwoSeconds(){ //function to timeout loop
         paused = true; //set to true to kill loop
         $('body').append(writer); //write to body only on pause (fewer writes to dom = faster script)
         setTimeout(function(){ // wait for 2 seconds
              paused = false;
              loopIt(); // re-run loop
         },2000);
    }

    function loopIt(){
        $.each($arr, function(index, val){ 
            for(var i = l; i < len; i++){ 
                for(var j = l; j < len; j++){ //loops now start at l instead of 0 so when loop restarts it restarts at the right place
                    for(var k = l; k < len; k++){ 
                        if(l % pauseAt === 0){ // if l is divisible by 2000 kill 
                            killForTwoSeconds();
                        }
                        if(!paused){ //if not paused add item to writer
                            thing = val+i+j+k;
                            l++;
                            $("#loading").text(l+"/15752961");
                            console.log(l+"/15752961");
                            writer = "<div>"+thing+"</div><br />";                                  
                        }else if(index === len-1 && k === len-1){
                            $('body').append(writer); //final write
                        }else{
                            return false; // if paused return false
                        }
                    }
                }
            }
        });
    }
}); 
```

# android - Android媒体扫描没有第二次运行

> ID：10842184
> 
> 赞同：0
> 
> 时间：2012-05-31T22:33:26.480
> 
> 标签：android, path, sd-card, android-mediascanner

我正在研究可以扫描特定文件夹的代码，拍照时，我使用了以下代码：

```
Intent intent = new Intent();
intent.setType("image/*");
//intent.setAction(Intent.ACTION_GET_CONTENT);
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://sdcard/ghost/" + Environment.getExternalStorageDirectory())));
startActivityForResult(
Intent.createChooser(intent, "Select Picture"), 0); 
```

它工作正常，但是当我退出应用程序并再次启动应用程序时，没有执行扫描，可能是什么问题？

需要帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:48:16.233

而不是使用`sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://sdcard/ghost/" + Environment.getExternalStorageDirectory())));`

我用了

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:57:39.383

这就是我用来让它扫描特定文件的方法。

**设置文件路径**
String sdPicPath = Environment.getExternalStorageDirectory().getAbsoluteFile() + "/image.png";

**或者如果我有一个专辑**
字符串 sdPicPath = Environment.getExternalStorageDirectory().getAbsoluteFile() + "AlbumName/image.png";

**创建文件**
File CheckForAlbum = new File(sdAlbumPath);

**让 MediaScan 扫描特定文件。**
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,Uri.fromFile(CheckForFile1)));

# java - Monodroid Java 绑定

> ID：10842187
> 
> 赞同：1
> 
> 时间：2012-05-31T22:33:47.700
> 
> 标签：java, android, binding, xamarin.android

我创建了一个 java 应用程序，作为我的 c# 应用程序和与 facebook 交谈之间的过渡。这个助手类允许我获取好友列表并在 facebook 墙上发帖。

我最近在尝试将我的一个 java 函数绑定到 monodroid 时遇到了一些问题。

我使用的java函数如下：

```
public void PostPicture(Activity mainActivity, String opponent, byte[] bytes, String picdescription, RequestListener listener)
{
    Bundle params = new Bundle();
    params.putString("name", picdescription);
    params.putByteArray("source", bytes);
    if(opponent != null)
    {
        params.putString("tags", opponent);
    }
    _asyncFacebook.request("me/photos", params, "POST", listener, null);        
} 
```

我遇到的问题是尝试绑定 byte[] 字节。

JNIEnv.GetMethodID(_class_ref, "PostPicture", "(Landroid/app/Activity;Ljava/lang/String;[Ljava/lang/Byte;Ljava/lang/String;Lcom/Hitcents/PictureThis/BaseRequestListener;)V");

其中 _class_ref 是我对包含“PostPicture”的 java 类的完全限定名称。

[Ljava/lang/Byte 不是对字节 [] 的正确绑定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:24:37.993

A`byte[]`不是`[Ljava/lang/Byte;`， 是[`[B`](http://docs.xamarin.com/android/advanced_topics/Binding_Android_Types#Built-in_Type_References)。A`[Ljava/lang/Byte;`将是一个`java.lang.Byte[]`（`java.lang.Byte`实例数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:36:18.363

我能够回答我自己的问题。通过将字节数组作为 Ljava/lang/Object 传递，然后我可以将其转换为 java 端的 byte[]。

# java - 来自 Google Geocoding-API 的不同编码/响应

> ID：10842189
> 
> 赞同：1
> 
> 时间：2012-05-31T22:33:49.823
> 
> 标签：java, grails, character-encoding, geocoding

我正在为我的 Grails-Application 编写测试，我在我的应用程序中发现了一个“错误”——至少我认为它是我的应用程序。

我的请求如下所示：

```
http://maps.googleapis.com/maps/api/geocode/json?address=Karlsruhe+76131+Tullastraße+17&sensor=false 
```

并且响应包含我的州/省（我不知道确切的翻译 - 我来自德国，它分为 16 个较小的“州” - 称为“Bundesland”）

我的州被称为“巴登-符腾堡州”，这就是浏览器的响应。

在我的应用程序中，我使用 URL 和 BufferedReader（带有 InputStreamReader）来获取响应。

我试图断言，来自浏览器的响应等于我从代码中的 URL-Connection 获得的响应。

但是 - 问题/问题来了 - 它们不同。我发现的唯一区别是我所在州的名称。

如前所述，我从浏览器获得的响应包含“Baden-Württemberg”，但我通过代码获得的响应仅包含“Baden-Wurttemberg” - *ü*用常规*u切换*

这是我的代码：

```
URLConnection connection = new URL(url).openConnection()

BufferedReader br = new BufferedReader(new InputStreamReader(connection.content, "UTF-8" ))
StringBuffer connectionResponse = new StringBuffer()

while (br.ready()) {
    connectionResponse.append(br.readLine())
}
br.close()
return connectionResponse.toString() 
```

我的搜索使我选择了将字符集传递给 InputStreamReader - 因为我期望它是 UTF-8 我使用这个字符集，但它并没有解决这个错误。

我只是困惑为什么这是可能的。

我应该去哪里看？我没有那么有经验，所以我很无知

编辑：我进行了更多测试，如果我搜索包含变音符号的街道（“Bärenweg”或“Baerenweg”就是一个例子），两个响应（代码和浏览器）都包含正确的值：Bärenweg。似乎只有国家受此影响。

我应该立即联系谷歌吗？有了这个新测试，我不确定我是否能做点什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:44:54.497

问题已经解决了。我问了我的一位同事，他建议，唯一合理的原因可能是不同的请求标头。

我能立即想到的唯一方法是使用[wireshark](http://www.wireshark.org)。所以我下载并安装了它（WinPCab安装了它）并在安装后启动它。

首先，我通过在 Firefox 中按 F5 并在 Grails 中运行我的测试来触发这两个请求

然后我添加了过滤器“http.response”（意味着来自 HTTP 请求的所有响应都应该可见）。Response-Headers 几乎相等，并且没有发生任何明显的错误。

然后我过滤了“http.request”以比较发送到 google-api 的标头，然后在响应中还有一点。

首先，我比较了 Accept-Property 并将我的代码中的属性设置为 Browser-Response 中的值（工作正常的那个）。没有解决问题。

所以下一个属性：Accept-Language。

在代码的 Request-header 中，这个属性根本不存在，所以我从 Browser-Request-header 和 kazaam 复制了它：它有效！

```
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3 
```

要在连接上设置此属性，请添加以下代码：

```
connection.setRequestProperty("Accept-Language", "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3"); 
```

TL;DR / 长话短说

在请求标头中设置语言属性，谷歌知道您希望响应使用什么语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:29:35.423

URL 的查询字符串应该是 URL 编码的，因此`ß`被转换为转义序列。`URLEncoder.encode("?...", "UTF-8")`.

# c# - 有没有更有效的方法来使用 WPF+ webclient 从网站检索表

> ID：10842191
> 
> 赞同：0
> 
> 时间：2012-05-31T22:34:06.273
> 
> 标签：c#, wpf, webclient

社区新手，但这是我坚持的第一个问题。我是使用 C# 的 WPF 和 WebClient 的新手，我正在尝试制作一个访问 www.nba.com 的程序来填充我拥有的带有团队名称的组合框，然后当用户从组合框中选择一个团队时，我想填充主窗口的一部分，其中包含来自球队主场的名单，风格和一切都相同。我能够使用 WebClient.OpenRead 填充组合框并读取标记以提取团队名称。

现在我处于更困难的部分。我打算使用相同的方法来获取所有标记，然后以某种方式在内容面板中显示表格，但我觉得这是一件非常乏味的事情。谁能给我完成此操作的任何提示，或者 webclient 类中是否有一种方法允许我在网页中搜索除文本之外的表格或对象？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:38:11.923

查看[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)以更轻松地解析 HTML。您还需要使用存储库模式来抽象数据访问，以便您的客户端在 HTML 更改时不需要更改，并且添加缓存更简单。

# ruby-on-rails - 从 Rails Formbuilder 中访问资源属性

> ID：10842192
> 
> 赞同：2
> 
> 时间：2012-05-31T22:34:23.677
> 
> 标签：ruby-on-rails, formbuilder

我正在尝试将工具提示添加到可能并不总是足够宽以显示完整内容的只读输入。当用户将鼠标悬停在输入上时，工具提示将用于显示完整内容。

问题是我似乎无法访问表单构建器参数部分中的资源属性。我正在尝试将输入的值作为标题。请参阅以下代码：

```
= f.fields_for :invoice_items, @invoice.invoice_items do |item|
   %tr
      %td
         = item.text_field :code, :title => item.name, :rel=>'tooltip', :class => 'uneditable-input span1', :readonly=>'true 
```

提高：

```
undefined method `name' for #<ActionView::Helpers::FormBuilder:0x007fea1e86f8e8> 
```

现在我们可以看到该项目实际上不是资源，而是表单构建器类。如何从这里访问原始资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:06:23.283

我认为这会做你想要的：

```
= f.fields_for :invoice_items, @invoice.invoice_items do |item|
   %tr
      %td
         = item.text_field :code, :title => item.object.name, :rel=>'tooltip', :class => 'uneditable-input span1', :readonly=>'true 
```

您可能需要取出第二个参数，

```
@invoice.invoice_items 
```

# linq - Linq 由多列区分并选择最新的行

> ID：10842194
> 
> 赞同：2
> 
> 时间：2012-05-31T22:34:27.857
> 
> 标签：linq

我有一个包含多行相似的数据。它们是游戏中的最新结果，例如，如果游戏中有 3 个进球，则意味着 3 条线。

![在此处输入图像描述](../Images/7b4bfede7324174301019d4a5e0af323.png)

我想区分一场比赛。但是不同的行必须是最新的（firstOrDefault？）

我确实想同时显示 status=Confirmed 和 status=Open 但显然我不想同时显示同一个游戏“Confirmed”和“Open”

所以我想按“主队”和“外队”这两个栏目进行分组。但是对于同一场比赛，如果有 3 个进球，我会得到 3 条线，但我想要“最新线”。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T22:46:42.390

你可以尝试这样的事情：

```
data.GroupBy(d => new { Hometeam = d.Hometeam, Outteam = d.Outteam })
    .Select(g => g.OrderBy(d => d.Status)
                  .ThenByDescending(d => d.GoalsHometeams + d.GoalsOutteams)
                  .First()) 
```

1.  按团队组合分组
2.  对于每个组，查找具有最新状态的条目（按字母顺序排在前面`Confirmed`）`Open`
3.  如果多个具有相同状态（即多个`Open`），则查找具有最高组合分数的条目。
4.  获取每组的第一个结果（应该是最新的）。

演示：http: [//ideone.com/vlCtw](http://ideone.com/vlCtw)

样本结果：

```
Current game status results:
Confirmed, Fylkir, Valur, 3, 1
Confirmed, Selfoss, Grindavik, 3, 3
Confirmed, Keflavik, IBV, 1, 0
Confirmed, Stjarnan, IA, 1, 1
Confirmed, Breioablik, Fram, 0, 2 
```

# iphone - 我的网站是否需要 SSL 证书才能获取我的 iphone 应用程序的信息？

> ID：10842195
> 
> 赞同：2
> 
> 时间：2012-05-31T22:34:28.363
> 
> 标签：iphone, objective-c, ios, database, ssl

我正在使用 NSURLConnection api 开发 iPhone 应用程序。我创建了登录/注册屏幕，并刚刚意识到我的网站服务器缺少一些东西，即我还没有 SSL 证书以获取安全的个人信息。

我想知道您是否需要为您的 iPhone 应用程序的网站服务器提供 SSL 证书才能获取登录/注册的 HTTP 请求。我的应用程序没有任何付款信息，只有用户名/电子邮件/密码信息。我只是想确保所有这些信息都将以安全的方式存储。如果我需要 SSL 证书，请告诉我。任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:35:31.900

不，您*不需要*，但建议否则，凭据将以明文形式发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:22:41.527

您在同一个句子中混合谈论存储和传输，但它们是独立的事物，SSL 与 iOS 设备上的项目存储无关。

如果您使用 HTTP 传输信息，它将是未加密的，任何人都可以读取它。

为了加密它，您必须使用 HTTPS 发送它，这需要证书。

这只会加密数据，不会向您的设备证明服务器就是它所说的那个人。即使您使用的是 HTTPS/证书，也不能保证服务器就是他所说的那个人，除非您另外在手机代码中验证该证书。如果您想要很好的参考资料，请参阅“iOS 5 Programming Pushing The Limits”一书。

至于在客户端上安全存储数据是完全不同的事情（每个人都说的快速简单的答案是使用钥匙串，但是如果您对安全性很认真，我建议您阅读“黑客和保护 iOS 应用程序”一书以实现iPhone 上的数据有多不安全。）。

# php - PHP require_once 在 Mac OSX Lion 中本地抛出错误

> ID：10842197
> 
> 赞同：2
> 
> 时间：2012-05-31T22:34:39.267
> 
> 标签：php, macos, osx-lion, require-once

我正在尝试在 Mac OSX lion 上本地使用相对路径`require_once`：

```
require_once('../../folder/file.php5'); 
```

它每次都会抛出一个错误：

```
PHP Warning: require_once(../../folder/file.php5): failed to open stream: 
No such file or directory in - on line 6 PHP Fatal error: require_once(): 
Failed opening required '../../folder/file.php5' (include_path='.:') in - on line 6 
```

文件和文件夹结构与 Web 主机完全相同，并且可以正常工作。

```
require_once('../../folder/file.php5'); 
```

另一个奇怪的事情是我只能通过我的代码编辑器 CODA 预览来获得 PHP 错误。如果我在浏览器中加载相同的 URL，它会输出 PHP5 文件的正文，就像您在纯文本中看到的一样。

是什么原因导致上述失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T03:42:37.850

错误输出表明您的`include_path`is `.:`。我怀疑这是问题所在，但是您是否尝试将其设置为 just `.`？或者在冒号之后放置另一条路径？（等等，`.:/some/other/path`）

# c - C中sscanf上的分段错误

> ID：10842199
> 
> 赞同：0
> 
> 时间：2012-05-31T22:35:08.313
> 
> 标签：c, malloc, scanf

对 C 非常陌生，所以请多多包涵！我正在尝试使用 sscanf 将 3 个由空格分隔的参数从“指令”读取到 3 个字符串中。到目前为止，我有以下代码：

```
char * buffer;
buffer = (char*) malloc (5000);
sscanf(instruction, "%s %s %s", &opcode, &arg1, &arg2, buffer); 
```

然而，虽然它编译得很好，但在 sscanf 所在的最后一行有一个段错误。上次我看到这个错误是因为变量中没有足够的内存来存储信息。我猜我没有正确使用malloc？

不幸的是，我无法发布整个代码，因为它不属于我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T22:43:54.560

删除与号。然后三个`%s`转义将填充它们（假设您让它们指向有效内存并且缓冲区足够大）。请注意，缓冲区永远不会被填充，因为您的格式字符串仅引用三个 args

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:43:45.497

你使用`sscanf`不当。试试这个：

```
#define BUFFER_SIZE 1024 /* generally good practice to use constants */

char *opcode = (char *)malloc(BUFFER_SIZE);
char *arg1 = (char *)malloc(BUFFER_SIZE);
char *arg2 = (char *)malloc(BUFFER_SIZE);
sscanf(instruction, "%s %s %s", opcode, arg1, arg2); 
```

根据您使用这些变量的方式，最好将它们分配在堆栈上：

```
char opcode[BUFFER_SIZE];
char arg1[BUFFER_SIZE];
char arg2[BUFFER_SIZE];
sscanf(instruction, "%s %s %s", opcode, arg1, arg2); 
```

# jquery - Jquery不断返回NaN

> ID：10842200
> 
> 赞同：0
> 
> 时间：2012-05-31T22:35:08.707
> 
> 标签：jquery

我有一个不断返回 NaN 的函数。我已经搜索了论坛并尝试了我发现的所有内容，但显然我做错了什么看到我的（可能）奇怪的代码:)

我的代码：

```
 function bakVormTotals(targetClass){
  $.getJSON('http://shop.com/cart/?format=json', function(data){
  var totaal = 0;

 $('.grandTotal').each(function(){ ////////////
 var item = $(this);               // FOUND THIS ON FORUM
 totaal+= parseInt(item.val());    ///////////
 })
 $.each(data.cart.totals, function(index, totals){
 $('<strong/>').html('€' + (+totals.grand_total).toFixed(2)).appendTo(targetClass); //  the grand total price
 });
 });
 } 
```

json 看起来像这样：`"totals":{"sub_total":"335.29","taxes":[{"percentage":"0.1900","amount":63.71}],"grand_total":"399.00"}}` 如果这可能会有所帮助。

任何帮助是极大的赞赏

**更新 1**

好的，我发现了一些新的有趣的东西。我将上面的功能更改为：

```
 function bakVormTotals(targetClass){

  $.getJSON('http://shop.com/cart/?format=json', function(data){

  $.each(data.cart, function(index, totals){
  $('<strong/>').html('€' + totals.grand_total + '').appendTo(targetClass); // the grand total price
  });
  });
  } 
```

现在脚本返回：€undefined€undefined€undefined€undefined€undefined€undefined€undefined€undefined€1197.00

显然我的方向是正确的，因为 1197.00 欧元是正确的值。“未定义”的东西可能是由于 html 部分？有人可以帮我将 $('') 部分更改为“total”之类的内容，以便我可以将 HTML 部分排除在外吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:37:48.140

如果你调用`parseInt()`一个空字符串或未定义的变量，你会得到一个`NaN`错误。我怀疑这是正在发生的事情。

执行以下检查以避免这些情况：

> ```
> if(!isNaN(parseInt(item.val())))
> {
>     totaal+= parseInt(item.val());
> } 
> ```

此外，只是为了确保您知道，使用`parseInt()`将删除小数位。using`parseFloat()`将保留它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:42:07.243

```
$('.grandTotal').each(function(){
  var item = $(this);               // FOUND THIS ON FORUM
  totaal+= parseInt(item.val()); 
  ... 
```

在这一部分中，您将遍历一组 DOM 元素。根据这些元素，它们可能没有功能`val()`，所以`item.val()`不是数字而是`undefined`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:44:44.050

我认为 lucuma 是对的，你需要解析浮动做 parseFloat($item.val())

# python - Django admin 中的自定义视图：NoReverseMatch

> ID：10842201
> 
> 赞同：3
> 
> 时间：2012-05-31T22:35:09.510
> 
> 标签：python, django, django-admin

我想在管理面板中为“添加”操作添加自定义视图。我写了以下代码并得到了一个错误

```
 "NoReverseMatch Reverse for 'app_list' with arguments '()' 
 and keyword arguments '{'app_label': ''}' not found." 
```

```
class UserDictionaryAdmin(BaseAdmin):
    list_display = ('word', 'user', 'word_state')

    class Meta:
        app_label = 'default'

    def add_view(self, request, form_url=None, extra_content=None):
        return render_to_response('admin/userdictionary_add.html', self.model._meta) 
```

`urls.py`没有被修改。

我也尝试了相同的结构，但`'self.model._meta'`没有任何积极的结果。

# php - 使用 PHP 查询 MySQL 中的 if 语句

> ID：10842204
> 
> 赞同：0
> 
> 时间：2012-05-31T22:35:19.110
> 
> 标签：php, mysql, sql

是否可以在 MySQL 查询中使用类似于我所展示的 if 语句？我想获取一些即将发生的事件的信息（不是以前日期的事件）。

```
ini_set('date.timezone', 'America/New_York');
    echo $timestamp = date('Y-m-d'); 
    $sql = "select eventID,eventTitle,eventDate from events where eventLocationID = $locationID AND (eventDate > $timestamp) ORDER BY eventDate ASC"; 
```

**编辑 - sql 语句没有过滤掉今天之前的日期（它正在显示所有内容）。**

例如，我回显时间戳只是为了确保它设置正确。在我的表格中，我输入了两个日期，一个在 1 月，一个在今天。

所以这是输出

```
 2012-05-31 //timestamp, not part of results. just for reference
  2012-01-10 //first result, however it shouldn't display
  2012-06-22 //this should be the only result that displays 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T22:37:52.887

只需使用 where 子句：

```
$date = date('Y-m-d');
$sql = "
    SELECT 
        foo 
    FROM 
        bar 
    WHERE
        eventLocationId = ... 
        AND eventDate > '$date' 
    ORDER BY 
        eventDate DESC
"; 
```

此外，`m/d/Y`它不是 MySQL 的有效日期格式。它预计`Y-m-d`.

* * *

在与您的问题没有直接关系的注释上：

> 我真的很想避免做后查询 if 语句

如果在 PHP 中过滤结果集，它会比使用 where 子句慢很多倍。数据库用于快速有效地过滤记录。而且，PHP 中的过滤要求您将所有结果从 MySQL 实际传输到 PHP（另一个速度变慢）。

# ruby - 按出现次数排序和显示项目

> ID：10842210
> 
> 赞同：1
> 
> 时间：2012-05-31T22:35:54.710
> 
> 标签：ruby

我发现自己反复想计算数组中某个项目的出现次数，并显示顶部项目及其实际计数。我已经多次编写如下代码，我认为它是一种反复出现的、引发 RSI 的模式：

```
hits = Hash[ array.group_by{|o|o}.map{|o,a|[o,a.length]}.sort_by{|o,ct|[-ct,o]} ]

require 'pp'
pp hits 
```

我可以把它移到 Enumerable 上的一个猴子补丁中……</p>

```
module Enumerable
  def counts(&blk)
    blk ||= ->(o){o}
    Hash[ group_by(&blk).map{|o,a| [o,a.length] }.sort_by{|o,ct| [-ct,o] } ]
  end
end

a = %w[a b a b c d e g j a e c d k o k i l p a e c f d e a d e f s d v c ]
pp a.counts
#=> {"a"=>5,
#=>  "d"=>5,
#=>  "e"=>5,
#=>  "c"=>4,
#=>  "b"=>2,
#=>  "f"=>2,
#=>  "k"=>2,
#=>  "g"=>1,
#=>  "i"=>1,
#=>  "j"=>1,
#=>  "l"=>1,
#=>  "o"=>1,
#=>  "p"=>1,
#=>  "s"=>1,
#=>  "v"=>1} 
```

…但我想知道是否有更优雅的方式来使用核心 Ruby 方法来完成这个（更少的输入就足够了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:03:14.160

```
ruby-1.9.2-p290 :041 > Hash[*[1,1,2,3,4,5,5,5].inject(Hash.new(0)) { |h,v| h[v] += 1; h }.sort_by{|k,v| v}.reverse.flatten]

=> {5=>3, 1=>2, 4=>1, 2=>1, 3=>1} 
```

**听一下，如果您希望根据出现次数对列表进行排名，以下效果很好，**

```
ruby-1.9.2-p290 :045 > [1,1,2,3,4,5,5,5].group_by{|x| x}.sort_by{|k, v| -v.size}.map(&:first)

=> [5, 1, 2, 4, 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:42:16.303

看起来我拥有的代码将尽可能简洁。移入非猴子补丁方法：

```
def count_items(enum,&blk)
  blk ||= ->(o){o}
  Hash[ enum.group_by(&blk).map{|o,a| [o,a.length] }.sort_by{|o,ct| [-ct,o] } ]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:05:55.783

没有提前排序，对于高 n 可能会很慢：

```
a = %w[a b a b c d e g j a e c d k o k i l p a e c f d e a d e f s d v c ]
a.each_with_object( {} ) {|e, h| h[e] ||= 0; h[e] += 1 }.sort_by {|o, ct| [-ct, o] } 
```

如果您关心优雅，请在合适的时候使用#with_object / #each_with_object。

# c# - 在这种情况下如何正确应用 MVVM？

> ID：10842211
> 
> 赞同：0
> 
> 时间：2012-05-31T22:36:15.530
> 
> 标签：c#, wpf, mvvm

我正在将应用程序从 Windows 窗体迁移到 WPF，所以我尝试使用 MVVM 模式，但这对我来说有点棘手。

在 Windows 窗体中，我有一个包含 progressBar 的窗体，该窗体定义了一些新方法，允许我执行步骤、设置其值等。此代码位于 progressBar 后面的代码中，如下所示：

```
public class MyProgressBar : ProgressBar
{
    public MyProgressBar ()
    {
        InitializeComponent();
    }

    public void Method01()
    {...}

    public void Method02()
    {...}

    public void Method03()
    {...}
} 
```

Method01、Method02 和 Method03 的代码用于容器形式，所以，这是我的问题：在 WPF 中，由于我使用 MVVM 模式，我必须将代码放在哪里？

到目前为止，我有这个课程：

我的模型：

```
public class MyFormModel : DataTable
{
    public OutputResultsDataTable()
        : base()
    {
        Columns.Add(new DataColumn("Number"));
        Columns.Add(new DataColumn("Message"));
        Columns.Add(new DataColumn("Detail"));
    }
} 
```

我的视图模型：

```
public class MyNewWPFForm
{
    /// <summary>
    /// 
    /// </summary>
    public MyFormModel MyData{ get; set; }

    /// <summary>
    /// Constructor
    /// </summary>
    public MyNewWPFForm()
    {
        if (System.Windows.Application.Current.MainWindow != null)
        {
            MyData= new MyFormModel ();                
        }
    }
} 
```

在 WPF 中，我已经创建了新的 progressBar 控件及其容器表单，即使我一直在阅读有关 MVVM 的信息，但我不明白我必须将 Method0X 的代码放在哪里，因为根据我所阅读的内容，我会有将该代码放在 viewModel 中，但是，这是另一个问题：我如何从我的视图模型中访问我的进度条，因为它在另一个表单中？

希望可以有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:45:14.000

听起来您控件上的方法用于设置控件的状态。您可以使用[依赖属性](http://msdn.microsoft.com/en-us/library/ms750428.aspx)来执行此操作。

您使用绑定将视图连接到视图模型。

为您的控件进度创建一个属性。

然后在 Xaml 中添加一个绑定

```
<MyProgressBar Progress="{Binding CurrentProgress}" /> 
```

将视图的数据上下文设置为新的视图模型。CurrentProgress 是视图模型上的一个属性。在您的视图模型上实现[INotifyPropertyChanged 。](http://msdn.microsoft.com/en-us/library/ms229614.aspx)

要在您的控件中添加和删除内容，您可以使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。

# regex - ColdFusion 9 中使用什么 RegEx 引擎？

> ID：10842216
> 
> 赞同：6
> 
> 时间：2012-05-31T22:37:17.133
> 
> 标签：regex, coldfusion, coldfusion-9, coldfusion-10

在开发正则表达式时，它不仅有助于了解此处所见的限制：http: [//help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a38f-7ff3.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a38f-7ff3.html)，还有助于了解预期的语法和语法是。它还有助于测试可以选择正则表达式引擎以针对文本或文件测试平台进行测试的应用程序。

我在这里和那里看到过 CF 使用 Jakarta ORO，[http://jakarta.apache.org/oro/](http://jakarta.apache.org/oro/)，它已于 2010 年底退役，所以这不正确，还是它仍然融入 CF9？

如果 CF10 附带与 CF9 不同的 Regex 引擎，请在已知的情况下也包括在内。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T23:07:50.630

**CF9 和 CF10 都使用 Jakarta ORO v2.0.6** - 为现有函数更改它会破坏向后兼容性，因为其他正则表达式引擎使用不同的语法（用于匹配和替换）。

但是，您可以从 CF 访问[java.util.regex](http://download.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html)包，该包提供对 JRE 使用的引擎版本的访问，使用[createObject/type=java](http://cfdocs.org/createobject-java-or-ejb-object)

如果您自己不习惯使用 Java 类，我创建了一个项目，它将 java.util.regex 库包装到一组方便的 CFML 函数中，有关详细信息，请参阅[cfregex.net](http://cfregex.net)。

# android - Cocos2D android java.lang.OutOfMemoryError: bitmap size超出VM预算

> ID：10842217
> 
> 赞同：1
> 
> 时间：2012-05-31T22:37:20.907
> 
> 标签：android, out-of-memory, cocos2d-android

我有 10 ~34KB 的 960x640 大小的图像，我试图在 Cocos2D 中使用所有这些图像。我在三星 Galaxy Tab 10.1 上运行游戏，它运行良好，但是当我尝试在摩托罗拉 droid X 上使用它时，它会抛出内存不足错误。我环顾四周，但找不到任何有用的东西。我使用来自 SVN 的最新版本的 Cocos2D。

这个小游戏是从一个更大的android应用程序运行的，但是400KB的图像应该不会破坏内存吧？

我认为 VM 预算足够大，可以轻松使用这些，或者图像在内存中时会显着变大吗？

更新：我已经尝试过预加载所有内容，但在第一次加载游戏时仍然存在问题。Cocos2D/Android 真的不支持这么多像素的几张图片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:17:44.847

嘿，我也多次遇到这个问题，实际上当你的图像太大时会发生这个错误....要减少这个，你必须完成你的图像，我的意思是你必须让你的图片库或者你曾经使用过的东西你必须清除他们，我试过这个，它对我有用，因为有时当你用同样的方式运行你的应用程序 4-5 次时，你也会面临非常接近的问题......

# ajax - 设置两个 h:selectManyCheckbox 的必需属性

> ID：10842219
> 
> 赞同：0
> 
> 时间：2012-05-31T22:37:27.257
> 
> 标签：ajax, jsf, richfaces, facelets

我有两个`h:selectManyCheckBox`required 属性设置为**true**。我想要的是两个组件的 required 属性一起工作。

***仅当且仅当***两个**选定项列表**均为空时才显示错误消息。

现在我的问题是，如果其中任何一个为空，则会显示该消息。这是我的代码：

```
 <rich:panel>
                <f:facet name="header">
                    <h:outputText value="Actualización de catálogos"/>
                </f:facet>

                <h:panelGrid columns="4">

                    <h:outputLabel for="actualizarCatalogoPEC"
                                   value="Actualizar catálogos PEC"/>
                    <h:selectBooleanCheckbox id="actualizarCatalogoPEC"
                                             value="#{administrationBean.actualizaTodosPecChecked}">
                        <f:ajax event="click"
                                render="todosCatalogosPEC"/>
                    </h:selectBooleanCheckbox>

                    <h:outputLabel for="actualizarCatalogoSAGARPA"
                                   value="Actualizar catálogos SAGARPA"/>
                    <h:selectBooleanCheckbox id="actualizarCatalogoSAGARPA"
                                             value="#{administrationBean.actualizaTodosSagarpaChecked}">
                        <f:ajax event="click"
                                render="todosCatalogosSAGARPA"/>
                    </h:selectBooleanCheckbox>

                    <a4j:outputPanel id="todosCatalogosPEC">
                        <h:selectManyCheckbox id="selectCatalogosPEC"
                                              disabled="#{administrationBean.actualizaTodosPecChecked}"
                                              required="true"
                                              value="#{administrationBean.catalogosPecSeleccionados}"
                                              requiredMessage="Seleccione al menos un catálogo"
                                              layout="pageDirection">
                            <f:selectItems value="#{administrationBean.catalogosPecOptions}"/>
                        </h:selectManyCheckbox>
                    </a4j:outputPanel>
                    <h:panelGroup/>
                    <a4j:outputPanel id="todosCatalogosSAGARPA">
                        <h:selectManyCheckbox id="selectCatalogosSAGARPA"
                                              disabled="#{administrationBean.actualizaTodosSagarpaChecked}"
                                              required="true"
                                              value="#{administrationBean.catalogosSagarpaSeleccionados}"
                                              requiredMessage="Seleccione al menos un catálogo"
                                              layout="pageDirection" >
                            <f:selectItems value="#{administrationBean.catalogosSagarpaOptions}"/>
                        </h:selectManyCheckbox>
                    </a4j:outputPanel>
                    <h:panelGroup/>

                    <rich:message id="messageCatalogosPEC"
                                  for="selectCatalogosPEC"/>
                    <h:panelGroup/>
                    <rich:message id="messageCatalogosSAGARPA"
                                  for="selectCatalogosSAGARPA"/>
                    <h:panelGroup/>

                    <a4j:commandButton value="Actualizar catálogos"
                                       render="messageCatalogosPEC"
                                       action="#{administrationBean.doActualizaCatalogos}"/>
                </h:panelGrid>
            </rich:panel> 
```

干杯

**更新**

我已将代码更改如下：（刚刚添加`binding`和修改`required`）

```
 <a4j:outputPanel id="todosCatalogosPEC">
                        <h:selectManyCheckbox id="selectCatalogosPEC"
                                              disabled="#{administrationBean.actualizaTodosPecChecked}"
                                              binding="selectCatalogosPEC"
                                              required="#{empty selectCatalogosSAGARPA.value}"
                                              value="#{administrationBean.catalogosPecSeleccionados}"
                                              requiredMessage="Seleccione al menos un catálogo"
                                              layout="pageDirection">
                            <f:selectItems value="#{administrationBean.catalogosPecOptions}"/>
                        </h:selectManyCheckbox>
                    </a4j:outputPanel>
                    <h:panelGroup/>
                    <a4j:outputPanel id="todosCatalogosSAGARPA">
                        <h:selectManyCheckbox id="selectCatalogosSAGARPA"
                                              binding="selectCatalogosSAGARPA"
                                              disabled="#{administrationBean.actualizaTodosSagarpaChecked}"
                                              required="#{empty selectCatalogosPEC.value}"
                                              value="#{administrationBean.catalogosSagarpaSeleccionados}"
                                              requiredMessage="Seleccione al menos un catálogo"
                                              layout="pageDirection" >
                            <f:selectItems value="#{administrationBean.catalogosSagarpaOptions}"/>
                        </h:selectManyCheckbox>
                    </a4j:outputPanel> 
```

但收到此错误：

```
jun 01, 2012 10:31:37 AM org.apache.catalina.core.StandardWrapperValve invoke
Grave: Servlet.service() for servlet [Faces Servlet] in context with path [/SRC_RichFaces] threw exception [java.lang.String cannot be cast to javax.faces.component.UIComponent] with root cause
java.lang.ClassCastException: java.lang.String cannot be cast to javax.faces.component.UIComponent
    at com.sun.faces.application.ApplicationImpl.createComponentApplyAnnotations(ApplicationImpl.java:1941)
    at com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1144)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.createComponent(ComponentTagHandlerDelegateImpl.java:504)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:157)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:47:56.860

您需要将它们都绑定到视图和`required`第一个的属性中，检查`UIInput#getSubmittedValue()`第二个的是否为空，并在`required`第二个的属性中，检查`UIInput#getValue()`第一个的是否为空。

```
<h:selectManyCheckbox 
    binding="#{selectCatalogosPEC}"
    required="#{empty selectCatalogosSAGARPA.submittedValue}"
>
    ...
</h:selectManyCheckbox>

<h:selectManyCheckbox
    binding="#{selectCatalogosSAGARPA}"
    required="#{empty selectCatalogosPEC.value}"
>
    ....
</h:selectManyCheckbox> 
```

### 也可以看看：

*   [JSF 两个必需的 h:inputText（异或）](https://stackoverflow.com/questions/10814224/jsf-two-required-hinputtext-exclusive-or)

# ubuntu - 在 Ubuntu 上安装 Hive

> ID：10842227
> 
> 赞同：3
> 
> 时间：2012-05-31T22:38:00.587
> 
> 标签：ubuntu, hadoop, hive

我想在我的 Ubuntu 上安装 Hive。我阅读[了这篇](http://www.hackido.com/2010/05/install-hadoop-and-hive-on-ubuntu-lucid.html)文章，对我帮助很大。除了第 4 步之外，我完成了所有步骤。我不明白这一步应该做什么。

你能详细解释一下这一步吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:57:07.993

第 1 步：下载并提取 Hadoop

Step 2 : Set JAVA_HOME path to conf/hadoop-env.sh //这一步是为hadoop设置java路径

第 3 步：conf/core-site.xml：

```
<configuration>
  <property>
    <name>fs.default.name</name>  //Place your home folder here for using hadoop 
    <value>hdfs://localhost:9000</value>
  </property>
</configuration> 
```

第 4 步：conf/hdfs-site.xml：

```
<configuration>          //This setting for the number of replications of the file or you can add data node for the save the file
  <property>
    <name>dfs.replication</name>
    <value>1</value>
  </property>
</configuration> 
```

第 5 步：conf/mapred-site.xml：

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>localhost:9001</value>        // add your master host in the place of localhost here
  </property>
</configuration> 
```

第 6 步：登录 SSH localhost 并格式化一个新的分布式文件系统

```
bin/hadoop namenode -format 
```

第 7 步：启动 hadoop 守护进程：

```
bin/start-all.sh 
```

第 8 步：检查端口下方的 NameNode 和 JobTracker

```
http://localhost:50070/       //master
http://localhost:50030/       //slave 
```

// 最好尝试 ssh 来检查你的工作节点

第 9 步：下载并提取 Hive

第 10 步：设置下面的环境变量。

```
export HADOOP_HOME=<hadoop-install-dir>
export HIVE_HOME=<hive-install-dir>
export PATH=$HIVE_HOME/bin:$PATH
$HIVE_HOME/bin/hive 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T05:26:53.570

第 3 步是否顺利进行？在第 3 步之前，您正在将二进制文件从 SVN 下载到您的机器，第 4 步是使用您的 Hadoop 环境设置二进制文件。

第 4 步建议您执行以下操作：

导出 PATH=$PATH:/usr/src/hive/build/dist/bin/

-> 表示您在 PATH 环境中添加目录 /usr/src/hive/build/dist/bin/。您必须已在此文件夹中安装了 hive -> /usr/src/hive/build/dist/bin/ 因此在您的路径中添加此文件夹（实际上是 Hive 二进制文件）将使您可以在您的机器上运行 Hive。

导出 PATH=$PATH:/usr/src/hive/build/dist/lib/

-> 表示您在 PATH 环境中添加目录 /usr/src/hive/build/dist/lib/。在您的机器上安装 Hive 后，Hive 相关库位于此文件夹 > /usr/src/hive/build/dist/lib/ 中，因此将此目录添加到您的 PATH 中，将有助于 Hive 成功运行。

导出 PATH=$PATH:/usr/local/hadoop/bin

-> 如果你已经在你的机器上运行了 Hadoop，这应该已经设置，否则这个命令只是在你的机器路径中设置 Hadoop Binary 文件夹。

如果您不知道什么是 PATH，只需在 Internet 上查找“Linux 中的 PATH”即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T00:37:13.020

[这个 PPA](https://launchpad.net/~hadoop-ubuntu/+archive/stable)使得在 Ubuntu 上安装 Hive 变得非常容易。

# javascript - 如何将 oath token 推送到 LocalStorage 或 LocalSession 并监听 Storage Event？（SoundCloud Php/JS 错误解决方法）

> ID：10842231
> 
> 赞同：0
> 
> 时间：2012-05-31T22:38:29.780
> 
> 标签：javascript, local-storage, dom-events, soundcloud

这引用了这个问题：[Javascript SDK connect() function not working in chrome](https://stackoverflow.com/questions/9613111/javascript-sdk-connect-function-not-working-in-chrome/9659131#comment13620638_9659131)

我询问了有关如何使用本地存储解决的更多信息，并被要求创建一个新主题。

答案是“一种解决方法是不使用 window.opener，而是将 oauth 令牌推送到 LocalStorage 或 SessionStorage 并让 opener 窗口监听 Storage 事件。”

但我不知道该怎么做。看起来很简单，但我不知道从哪里开始。我找不到相关的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:18:22.950

You can attach an event listener to the "storage" event which is fired by the `window`.

```
window.addEventListener("storage", myHandler, false); 
```

The handler is passed an event object which includes the key which changed.

```
function myHandler(event) {
   if (event.key === 'the_oauth_token') {
       // do something with it
   }
} 
```

Here's a demo: [http://html5demos.com/storage-events](http://html5demos.com/storage-events)

# javascript - 如果选中无线电输入，则更改父 div 的类

> ID：10842237
> 
> 赞同：0
> 
> 时间：2012-05-31T22:39:27.930
> 
> 标签：javascript, loops, html, radio, checked

我一直在搜索和搜索谷歌以寻找我的问题的答案，但到目前为止还没有成功。我希望你们中的一个可以给我一些帮助。

[示例在](http://jsfiddle.net/stevenschemers/72tp7/7/)[此处](http://jsfiddle.net/stevenschemers/72tp7/7/)发布。

我的目标是在选择单选时将包含所选单选按钮 className 的表更改为“已选择”，当未选择单选时将其更改为“容器”。

我有 10 个类名称为“股息”的 div，其中包含一个类名称为“容器”的表，然后是其中的两个较小的表。在底部的容器表中是一个名为“page1”的隐藏单选按钮。然后另外 10 个相同但输入名称是“page2”

我为容器表编写了一个 onClcick，以便用户可以选择整个表而不是单选按钮，但不是我试图更改所选容器的样式，以便用户知道他们已经选择了它。

我尝试了几种不同的方法，只需编写即可将样式更改为新类

```
 document.getElementById('container').className = 'selected'; 
```

但是因为所有 10 个 div 共享相同的名称，它只会改变它找到的第一个元素的样式。

所以我尝试编写这个循环来检查文档中是否有任何选定的收音机，然后将其他名称更改为默认样式。

我确定它很愚蠢，但我很困惑 atm.. 任何帮助将不胜感激。

谢谢。

```
//check for check = true
selected = function () {
var divs = document.getElementByTagName('DIV'),
    div,
    tbl = divs.getElementById('TABLE'),
    rad,
    stat,
    i;

    for (var i = 0; i < divs.length; i++) {
// no .id but the counter of the loop
div = div[i];
// check the className not the div element
if (div.className == 'dividend') {

    rad = tbl.getElementsByTagName('INPUT');

    if (tbl.className == 'container') {
    if (rad[0].checked == true) {
        tbl.className = 'selected'; 
    } 
}
}
}
};

// Gets radio button for selected element in Page1 and checks
function P1sClick(n){ 
document.forms["myform"]["page1"][n].checked=true;
selected();
};

// Gets radio button for selected element in Page2 and checks
function P2sClick(n){ 
 document.forms["myform"]["page2"][n].checked=true;

};

////////////HTML  I only included 2 examples of the DIVs because its a lot of code/////

<form name="myform" action="sample.asp" method="POST">

<h2>Page 1</h2>

<div class="dividend>
<table class="container" onclick="P1sClick(0)" cellpadding="0" cellspacing="0"><tr><td valign="top" >
  <table class="grid" cellpadding="0" cellspacing="0">
<tr><td width="40" height="25" style="border-bottom:1px solid #000; border-    right:1px solid #000;">1</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000; border-right:1px solid #000;">2</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000; border-right:1px solid #000;">3</td></tr>
    <tr><td height="25" style="border-right:1px solid #000;">4</td></tr>
  </table>
</td><td valign="top">
  <table class="grid" cellpadding="0" cellspacing="0">
    <tr><td width="40" height="25" style="border-bottom:1px solid #000;">5</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000;">6</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000;">7</td></tr>
    <tr><td height="25">8</td></tr>
  </table>
</td></tr>
<tr><td colspan="2" align="center" height="20" style="padding-top:3px; font-weight:bold; font-style:italic;">4x4<br><input type="radio" name="page1" title="4 by 4" value="4x4" style="display:none;"></td></tr></table>
</div>

<div class="dividend">
<table class="container" onclick="P2sClick(0)" cellpadding="0" cellspacing="0"><tr><td valign="top">
      <table class="grid" cellpadding="0" cellspacing="0">
    <tr><td width="40" height="25" style="border-bottom:1px solid #000; border-right:1px solid #000;">1</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000; border-right:1px solid #000;">2</td></tr>
    <tr><td height="25" style="border-bottom:1px solid #000; border-right:1px solid #000;">3</td></tr>
    <tr><td height="25" style="border-right:1px solid #000;">4</td></tr>
  </table>
</td><td valign="top">
  <table class="grid" cellpadding="0" cellspacing="0">
    <tr><td width="40" height="33" style="border-bottom:1px solid #000;">5</td></tr>
    <tr><td height="33" style="border-bottom:1px solid #000;">6</td></tr>
    <tr><td height="34">7</td></tr>
  </table>
</td></tr>
<tr><td colspan="2" align="center" height="20" style="padding-top:3px; font-weight:bold; font-style:italic;">4x3<br><input type="radio" name="page2" title="4 by 3" value="4x3" style="display:none;"></td></tr></table>
    </div> 
```

更新：

所以我一直在研究 jQuery 并在这里找到了[这篇](https://stackoverflow.com/questions/964961/jquery-radio-onchange-toggle-class-of-parent-element)文章。我正在尝试这个功能，它看起来应该对我有用，但不是。也许你可以告诉我这是否是一条更好的路线。

```
$(document).ready(function() {  
$('input[type="radio"]').change( function() {
  //   grab all the radio buttons with the same name as the one just changed
    var this_radio_set = $('input[name="'+$(this).attr("page1")+'"]');

    // iterate through each  
//     if checked, set its parent label's class to "selected"
//     if not checked, remove the "selected" class from the parent label
//     my HTML markup for each button is  <label><input type="radio" /> Label Text</label>
//     so that this works anywhere even without a unique ID applied to the button and label
    for (var i=0; i < this_radio_set.length;i++) {
    if ( $(this_radio_set[i]).is(':checked') )             $(this_radio_set[i]).parent('table').addClass('selected');
        else $(this_radio_set[i]).parent('table').removeClass('selected');
}
});
}); 
```

**更新**我已经用 BobS 所做的以下更正更新了我的 jQuery。我现在使用 jQuery 通过单击表格来选择单选，并使用 jquery 在选中单选时更改样式。出于某种原因，我在组合这两个功能时遇到了麻烦，所以当您单击表格并选中单选时，样式也会发生变化。这是我最新的代码，希望有人可以帮助我：p

```
// jQuery to select radio button within clicked table
$(function() {

$('table').click(function(event) {  

    if(event.target.type != "radio") {

        var that = $(this).find('input:radio');
        that.attr('checked', !that.is(':checked'));

    }
});
});

// jQuery to change the style of the table containing the selected radio button
$(function() {
$('input[type="radio"]').change( function() {
  //   grab all the radio buttons with the same name as the one just changed
    var this_radio_set = $('input[name="'+$(this).attr("name")+'"]');

    for (var i=0; i < this_radio_set.length;i++) {
    if ( $(this_radio_set[i]).is(':checked') )         
      $(this_radio_set[i]).closest('table').addClass('selected');
        else 
        $(this_radio_set[i]).closest('table').removeClass('selected');
}
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:46:54.897

首先，对于最佳实践，您应该为元素使用不同的 id。id 是唯一的

其次这是一个错误： if (rad.checked = true) {

它应该是一个 == 而不仅仅是一个 =

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:50:24.000

我希望我发现了你所有的错误。X）

```
for (var i = 0; i < divs.length; i++) {
    // no .id but the counter of the loop
    div = divs[i];
    // check the className not the div element
    if (div.className == 'dividend') {
        // Next will not work, because you would need divs 
        // with duplicate ids! Use classes instead.
        tbl = div.getElementById('container');
        // getElement>s<ByTagName
        rad = tbl.getElementsByTagName('INPUT');
        // == not =
        if (rad[0].checked == true) {
            tbl.className = 'selected'; 
        } 
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:47:35.360

一些可能对您有帮助的事情：

您似乎在最近的编辑中删除了元素的 id。这很好，但是你必须循环遍历一些东西。您也不应该期望 getElementById 根据元素中的类返回元素；这只适用于身份证。

但是，在这种情况下，您的“容器”表始终是“股息”div 的直接子级，因此您可以使用诸如

```
tbl=div.childNodes[0]; 
```

拿到桌子。

注意类名比较：如果一个元素有多个类名（通过继承获得），它可能看起来像“fooclass 红利”，然后使用 == 进行字符串比较将不起作用。为此使用正则表达式或字符串拆分。

我还想重申其他人所说的：停止你正在做的事情并学习 jQuery :-)

xxstevenxo 之后的更新提供了一些 jQuery 代码：

我做了 3 件事来让您的新 jQuery 代码执行您想要的操作：

1.  我摆脱了“selected”函数的定义，因为它有许多错误导致脚本在遇到示例 jQuery 代码之前退出。也许你没有遇到这个问题——取决于你的 JavaScript 的总和。

2.  当您引用 $(this).attr("page1") 时，它实际上应该是 $(this).attr("name") 如果您单击 page1 的单选按钮，它将为您提供“page1”

3.  使用“最近的”而不是“父母”。父级仅上升一级，“表”选择器仅用于根据直接父级是否为表进行过滤。最接近的继续向上树，直到找到匹配。

一旦我进行了这 3 项更改，jQuery 所做的事情就与您的想法很接近，至少在单击单选按钮时是这样。

您可能应该在“更改”操作中使用该匿名函数，并使用它来代替“选定”函数，以便在用户单击表格时样式更改也会生效。

# powershell - Powershell：如何读取环境变量？

> ID：10842241
> 
> 赞同：3
> 
> 时间：2012-05-31T22:40:10.433
> 
> 标签：powershell

这是我尝试的第一个 powershell 脚本。当我运行它时，第 1 部分运行良好并创建 log.txt，但再次运行后它仍然运行第 1 部分。如何检查日志文件是否存在？

**编辑：**我忘了提到我正在从 PowerShell ISE 运行脚本，如果这有影响的话。

```
#Variables.
#Set working directory to scripts location.
$scriptpath = $MyInvocation.MyCommand.Path
$dir = Split-Path $scriptpath

#Check if log file exists.
$ChkFile = "%userprofile%\Desktop\log.txt" 
$FileExists = (Test-Path $ChkFile -PathType Leaf)

#Set dir to script location.
Set-Location $dir

#Part 1.
If (!($FileExists)) 
{
    Write-Host "Part 1"
    echo 0 >>log.txt
}
#Part 2.
ElseIf ($FileExists)
{
    Write-Host "Part 2"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T22:46:10.533

`%`用于 cmd.exe 变量扩展。PowerShell 需要不同的语法。而是使用：

```
 "$env:userprofile\Desktop\log.txt" 
```

# javascript - OpenLayers 中的投影和 OpenLayers.Geometry.Point

> ID：10842243
> 
> 赞同：2
> 
> 时间：2012-05-31T22:40:16.817
> 
> 标签：javascript, openlayers

我正在尝试显示具有三层的地图（谷歌地图层、wms 层和点层）这是我的代码：

```
 var map = new OpenLayers.Map({
         div: "map",
         maxExtent: new OpenLayers.Bounds(-20037508, -20037508, 20037508, 20037508.34)
     });

     var capaGoogle = new OpenLayers.Layer.Google(
                "Google Satellite",
                { type: G_SATELLITE_MAP, sphericalMercator: true, transparent: true }
            );

     var wmsOverlay = new OpenLayers.Layer.WMS("OpenLayers WMS",
         "http://localhost:1979/geoserver/wms",
         { layers: 'world:PYCIUDADES', transparent: true }, { isBaseLayer: false });

     var vectorLayer = new OpenLayers.Layer.Vector("vector");

     vectorLayer.addFeatures([
        new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point(-57.635021, -25.276987)

        ),
        new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point(-56.759034, -22.71539)
        )

        ]

    );

     map.addLayers([wmsOverlay, vectorLayer, capaGoogle]);

     map.addControl(new OpenLayers.Control.LayerSwitcher());
     var center = new OpenLayers.LonLat(-57.58, -25.27).transform(
     new OpenLayers.Projection("EPSG:4326"),
     map.getProjectionObject()
     )
     map.setCenter(center, 6); 
```

“vectorLayer”层必须在我的地图上方，但我明白了（我的 wms 层在南美洲，我的点也必须在南美洲，但它们在非洲附近）：

[http://i45.tinypic.com/34y40zk.png](http://i45.tinypic.com/34y40zk.png)

我能做些什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T07:14:41.020

您应该转换点的坐标：

```
var epsg4326 = new OpenLayers.Projection('EPSG:4326');
var epsg900913 = new OpenLayers.Projection('EPSG:900913');

vectorLayer.addFeatures([
    new OpenLayers.Feature.Vector(
        new OpenLayers.Geometry.Point(-57.635021, -25.276987).transform(epsg4326, epsg900913)
    ),
    new OpenLayers.Feature.Vector(
        new OpenLayers.Geometry.Point(-56.759034, -22.71539).transform(epsg4326, epsg900913)
    )
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:08:21.977

“在非洲旁边”= 经度 0 纬度 0

当您简单地输入经度和纬度时，OL 认为这是 WGS84 投影（标准）。

但由于您使用的是谷歌图层 (CapaGoogle)，它是一个墨卡托参考投影，因此您最终会同时使用两个参考投影（4326 = WGS84 和 900913 = 墨卡托），并且地图服务器不考虑标记的位置，因为它们是“不正确的”。因此，它只是将它们放在 (0,0) 处。

正如 DrNextGIS 所说，您必须“转换您的点坐标”，以便地图上的所有内容都使用相同的投影。

如果您使用的是简单的 OpenLayer 地图（没有 Google 或 OSM），您就不会遇到这个问题。

# sql - 如何创建大小大于 8000 字节的 SQL varbinary？

> ID：10842245
> 
> 赞同：1
> 
> 时间：2012-05-31T22:40:18.983
> 
> 标签：sql, sql-server, varbinary, varbinarymax

我想创建一个 varbinary(16384) 但不能，因为大小必须是最大值 8000 或 MAX。我不想使用 MAX，因为如果插入的字段大小大于 16384，我想抛出错误。无论如何要这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:46:01.203

有趣的是，根据[http://msdn.microsoft.com/en-us/library/ms143432.aspx](http://msdn.microsoft.com/en-us/library/ms143432.aspx)，对于 32 位和 64 位 sql server，varbinary 的最大大小实际上是 2^31 - 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:46:04.393

使用 MAX。约束字段并处理数据层/应用程序中的错误。

听起来您正在尝试将数据推送到表中，并且依赖于 SQL Server 来返回错误。IMO，这对于处理这类事情来说太“下游”了。

# networking - 如何配置 Munin 以提供我所有的云服务器？

> ID：10842248
> 
> 赞同：1
> 
> 时间：2012-05-31T22:41:33.833
> 
> 标签：networking, cloud, monitoring, munin, server-monitoring

我有十几个负载平衡的云服务器，都由 Munin 监控。

我可以单独跟踪每一个就好了。但我想知道我是否可以以某种方式将它们捆绑在一起，以查看整个云集群中有多少集体 CPU 使用率（例如）。

我怎样才能做到这一点？

munin.conf 文件可以很容易地为子域处理此问题，但我不确定如何为简单的 Web 节点配置它。假设我的 web 节点被命名为 web_node_1 - web_node_10。

我的 conf 现在看起来像这样：

```
[web_node_1]
    address 10.1.1.1
    use_node_name yes
...
[web_node_10]
    address 10.1.1.10
    use_node_name yes 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:42:33.033

[您可以使用sum](http://munin-monitoring.org/wiki/faq#Q%3aHowdoIusefieldname.sum)和[stack](http://munin-monitoring.org/wiki/faq#Q%3aHowdoIusefieldname.stack)来实现这一点。

我只需要做同样的事情，我发现[这篇文章](http://blog.loftninjas.org/2010/04/08/an-evening-with-munin-graph-aggregation/)很有帮助。

本质上，您想要执行以下操作：

```
[web_nodes;Aggregated]
   update no

   cpu_aggregate.update no
   cpu_aggregate.graph_args --base 1000 -r --lower-limit 0 --upper-limit 200
   cpu_aggregate.graph_category system
   cpu_aggregate.graph_title Aggregated CPU usage
   cpu_aggregate.graph_vlabel %
   cpu_aggregate.graph_order system user nice idle
   cpu_aggregate.graph_period second
   cpu_aggregate.user.label user
   cpu_aggregate.nice.label nice
   cpu_aggregate.system.label system
   cpu_aggregate.idle.label idle
   cpu_aggregate.user.sum web_node_1:cpu.user web_node_2:cpu.user
   cpu_aggregate.nice.sum web_node_1:cpu.nice web_node_2:cpu.nice
   cpu_aggregate.system.sum web_node_1:cpu.nice web_node_2:cpu.system
   cpu_aggregate.idle.sum web_node_1:cpu.nice web_node_2:cpu.idle 
```

还有一些其他的东西可以调整图形以使其具有与主插件相同的比例、最小/最大等，这些可以从“cpu”插件文件中复制。这里的关键是最后四行——这是其他图表中值的总和。

# sql - 将添加到 ASPNET SQL 数据库表的用户和角色与现有用户信息相关联

> ID：10842252
> 
> 赞同：1
> 
> 时间：2012-05-31T22:42:04.873
> 
> 标签：sql, sql-server-2008, aspnetdb

我使用 aspnet_regsql.exe 将一系列用于角色、用户和成员管理的 ASPNET 数据库表添加到我现有的 SQL 数据库中。

现有数据库中已经有一个用户表，其中包含许多用户的信息（ID、姓名、地址、邮政编码等）。我想要实现将新的 aspnet_Users 表与现有的用户表相关联。

请问有什么推荐的选项吗？谢谢

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:13:52.417

我们在几年前参与的一个项目中遇到了类似的情况。我们最终所做的是将外部用户表中相关用户记录的主键存储为ASPNET[成员资格模型的](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)[配置文件属性](http://msdn.microsoft.com/en-us/library/d8b58y5d.aspx)。

好处是我们不必更改任何有关外部数据库架构的任何内容来创建关系，并且我们可以使用内置的 ASPNET 成员身份配置文件对象轻松地从 Web 代码隐藏中获取相关密钥。

此配置文件属性的初始填充是通过我们使用 ASPNET 成员身份配置文件对象专门为任务编写的实用程序完成的，并且由于我们的成员资格设置和外部表都存储了用户的电子邮件地址，使其成为关键一次性任务。

这种方法的缺点是 ASPNET Membership Profile 表在很大程度上没有进行非规范化（或就此而言实际上是规范化的）。它将配置文件属性存储为 xml 数据或序列化二进制文件。在旧版本中，它使用存储为包含所有值的单个值字符串的名称和字符位置的属性名称进行序列化。这使得从外部表方面编写查询、连接等变得困难（如果不是不切实际的话）。

对我们来说，这没什么大不了的，因为我们只是根据网站的具体情况处理外部用户数据。因此，使用构建对象从 ASPNET 配置文件中获取密钥，然后在外部数据库中查找它很容易。

如果您的项目要执行大量关系查询或批处理，那么我可能会建议将 ASPNET UserId GUID 作为外键存储在您的外部用户表中，或者如果电子邮件将使用它们是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T02:11:44.493

在 ASPnet 成员表中称为 UserId的[UserKey](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx?ppud=4)是标识用户的 GUID。您可以在表格中添加一`UserKey`列`Users`，然后开始执行危险的操作，例如：

```
select *
  from Users as U inner join
    aspnet_Users as aU on aU.UserId = U.UserKey inner join
    aspnet_Membership as aM on aM.UserId = aU.UserId
  where U.UserId = @UserId 
```

如果您想直接在他们的表格中摆弄，Microsoft（或我）不提供任何明示或暗示的保证。

# java - 如何将一个 ByteBuffer 附加到另一个？

> ID：10842258
> 
> 赞同：0
> 
> 时间：2012-05-31T22:42:44.607
> 
> 标签：java, java-io, bytebuffer

假设我有 2 个 ByteBuffer ，其中包含一些字节......如何将一个 ByteBuffer 的所有内容与另一个追加？我正在这样做，但它会引发 BufferUnderFlowException：

```
ByteBuffer allData = ByteBuffer.allocate(999999);
ByteBuffer buff = null;
for (int i = 0; i < n; i++) {
    buff = aMethodThatReturnsAFilledByteBuffer();
    allData.put(buff);
} 
```

我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-08T13:38:34.040

它是如何工作的：

```
ByteBuffer.allocate(byteBuffer.limit() + byteBuffer2.limit())
          .put(byteBuffer)
          .put(byteBuffer2)
          .rewind() 
```

在这里使用 bytebuffer limit()，因为这是填充 byteBuffers 的地方。使用 capacity() 也应该有效，但可以分配比您严格需要的更多字节。

对于限制和容量，我查看了这篇文章：[ByteBuffer 中的限制和容量有什么区别？](https://stackoverflow.com/questions/23148729/what-is-the-difference-between-limit-and-capacity-in-bytebuffer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:08:11.583

You need to `flip()` the source buffer prior to any operating that implies a `get()` operation, such as a `write()`, or using it as the source of a `put()` operation into another buffer. You also need to `compact()` it afterwards to restore its state.

# javascript - 仅返回在所有数组中找到的值

> ID：10842260
> 
> 赞同：0
> 
> 时间：2012-05-31T22:42:46.077
> 
> 标签：javascript, arrays

简单的问题，但我不知道如何解决

我有几个数组，但我只想要所有数组共有的值

我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:45:17.383

尝试使用 查找每个数组中的值[`indexOF`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)。

我从来不知道 IE 不支持，但这是[这篇文章](https://stackoverflow.com/q/1744310/575527)`indexOf`的快速修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:20:30.737

像这样的东西应该工作：

```
function getCommonElements() {
   var common = [],
       i, j;

   if (arguments.length === 0)
      return common;

   outerLoop:
   for (i = 0; i < arguments[0].length; i++) {
      for (j = 1; j < arguments.length; j++)
         if (-1 === arguments[j].indexOf(arguments[0][i]))
             continue outerLoop;

      common.push(arguments[0][i]);
   }
   return common;
} 
```

使用任意数量的数组作为参数调用它：

```
var commonEls = getCommonElements(arr1, arr2, arr3, etc); 
```

如果不是很明显，这个想法是从第一个参数循环遍历数组，并针对其他数组测试它的每个元素。一旦发现特定元素*不在*其他参数中的任何其他数组中，就继续处理下一个元素。否则将当前元素添加到输出数组，`common`。

如果您需要支持不支持该[`Array.indexOf()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)的浏览器（IE < 9），您可以包含[MDN 页面上显示的 shim，](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)或者将`.indexOf()`我的代码中的测试替换为另一个循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:14:07.940

我认为这应该有效。

```
var arr1 = [1,2,3,4]
  , arr2 = [2,3,4,5]
  , arr3 = [3,4,5,6]
  , arrs = [arr1, arr2, arr3];

var all = arr1.concat(arr2.concat(arr3)).sort()
  , red1 = all.filter(
        function(val, i, arr) {
          return i === arr.lastIndexOf(val)-1;
        })
  , red2 = red1.filter(
        function(val, i, arr) {
           var shared = true;
           arrs.forEach(
               function(arr, i, src) {
                 if (arr.indexOf(val) === -1)
                   shared = false;
               })
           return shared;
        }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:11:05.790

如果您只关心支持 reduce() 的现代浏览器，请使用以下解决方案：

[查找多个 JavaScript 数组之间的匹配项](https://stackoverflow.com/questions/11076067/finding-matches-between-multiple-javascript-arrays)

如果您必须支持 IE6，请使用下面的解决方案。以下是我如何使用 jQuery 在 IE6 中使用它：

```
 // Find common values across all arrays in 'a',
  // where 'a' is an array of arrays [[arr1], [arr2], ...]
  Object.common = function(a) {
    var aCommon = [];
    for (var i=0,imax=a[0].length,nMatch,sVal; i<imax; i++) {
      nMatch = 0;
      sVal = a[0][i];
      for (var j=1,jmax=a.length; j<jmax; j++) {
        nMatch += ($.inArray(sVal, a[j])>-1) ? 1 : 0;
      }
      if (nMatch===a.length-1) aCommon.push(sVal);
    }
    return aCommon;
  } 
```

基本上，您只需遍历“a”中第一个数组的每个值，看看它是否存在于其他数组中。如果存在，则增加 nMatch，并在扫描其他数组后，如果 nMatch 等于其他数组的总数，则将值添加到 aCommon 数组。

使用 Florian Salihovic 提供的样本数据，`Object.common(arrs)`将返回`[3, 4]`.

如果不能使用 jQuery，则将 $.inArray() 替换为 Mozilla 提供的代码：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/IndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/IndexOf)

# java - Android：IndexOutOfBoundsException

> ID：10842262
> 
> 赞同：0
> 
> 时间：2012-05-31T22:42:53.030
> 
> 标签：java, android, exception, indexoutofboundsexception

我在 Android Market 上的应用程序上发生了一个奇怪的错误。一位用户对我说，当他尝试打开我的应用程序时，它崩溃了。看看这个错误：

有人知道这个错误吗？

```
java.lang.IndexOutOfBoundsException
at java.util.Arrays$ArrayList.get(Arrays.java:77)
at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:298)
at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:351)
at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
at android.widget.Spinner.makeAndAddView(Spinner.java:189)
at android.widget.Spinner.layout(Spinner.java:148)
at android.widget.Spinner.onLayout(Spinner.java:112)
at android.view.View.layout(View.java:7198)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.widget.ScrollView.onLayout(ScrollView.java:1578)
at android.view.View.layout(View.java:7198)
at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
at android.view.View.layout(View.java:7198)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T09:00:41.323

您正在尝试从其值中访问 arraylist 值。这就是这个错误的原因。发布您的编码，以便我们可以准确找到问题所在。最佳做法是使用 for 循环。尝试使用它，并希望您的问题能由此解决。否则发布代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T06:01:46.173

检查微调器中的 setSelection 值

# wget - wget 下载以供离线查看，包括绝对引用

> ID：10842263
> 
> 赞同：4
> 
> 时间：2012-05-31T22:43:14.577
> 
> 标签：wget

我正在尝试使用以下命令下载整个网页

```
wget -p -k www.myspace.com/ 
```

这确实会下载该目录下的页面和任何图像或脚本，但我正在尝试弄清楚如何下载该页面以完全离线查看。我如何在 www.myspace.com 的源代码中获得链接的每个图像、脚本和样式表，包括外部链接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T16:54:50.583

```
wget -e robots=off -H -p -k http://www.myspace.com/ 
```

-H 或 --span-hosts 标志是完整镜像所必需的，因为该页面可能包含 www.myspace.com 域之外的主机上的内容。忽略机器人以获得良好的衡量标准。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T22:50:37.270

`wget -mk http://www.myspace.com/`

为我工作。我不确定 myspace 或您要专门镜像的任何站点，但有时您必须传递一些其他选项来绕过无机器人政策。我不会说如何做到这一点，因为这意味着你正在做你不应该做的事情。虽然这绝对是可能的。

# java - 当前线程方法 java

> ID：10842264
> 
> 赞同：9
> 
> 时间：2012-05-31T22:43:16.597
> 
> 标签：java, multithreading

所以我正在尝试为我正在制作的游戏使用线程。我对这个主题**很**陌生，所以我可能无法正确理解。我的问题是 currentThread() 方法如何在 java API 的 Thread 类中工作。API 说“返回对当前正在执行的线程对象的引用。”，但据我所知，多个线程同时运行。怎么可能只返回一个执行线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T22:46:44.050

调用的代码`currentThread`将在其中一个线程中执行，而不是在所有线程中执行，因此它可以专门获取该线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T22:46:50.960

当执行代码中的指令时，它会在特定线程中执行。这是该方法返回的线程。

显然，如果一个特定的方法由多个线程执行，每次执行可能会返回不同的值`Thread.currentThread()`。

您可以尝试这个简短的示例来更好地了解正在发生的事情，特别是 2 个线程并行执行的事实。您应该看到 t1 将运行几个循环，然后 t2 将执行相同的操作并返回到 t1 等（您可能需要将循环数从 5 增加到更高的数量，具体取决于您的机器）：

```
public class TestThread {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                for (int i = 0; i < 5; i++) {
                    System.out.println(Thread.currentThread());
                }
            }
        };

        Thread t1 = new Thread(r, "t1");
        Thread t2 = new Thread(r, "t2");
        t1.start();
        t2.start();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T22:57:42.263

假设您在一张纸上打印了一系列说明。一个人阅读说明并执行它们。指令是一个程序。人是一根线。你可以复印很多份报纸，然后分发给很多人。如果说明说“打自己一巴掌”，那么您*自己*指的是正在阅读该文件中该说明的任何人。同样，`Thread.currentThread()`指的是执行该调用的线程`currentThread()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T23:04:39.527

在编写单线程应用程序时，您可以对程序进行推理，就像一系列指令一样，每条指令都在前一条指令完成后执行（这是一个粗略的近似，但从概念上讲，编译器和处理器会尝试模拟它并像这真的一样工作发生了什么事）。

当你使用多线程时，每个线程都有自己的一系列指令。新线程在创建时会传递一个入口点（一种方法），并将继续从它们执行。每个线程在执行过程中都独立于另一个线程（它只会一个接一个地执行一条指令），尽管它们共享内存，因此一个线程的副作用会影响另一个线程。

因此，对于要执行的某些代码，它必须在一个线程的上下文中完成（当您的应用程序启动时，操作系统会创建一个线程，它会在`Main`方法处开始执行）。调用该函数时`currentThread`，它处于其中一种上下文中。

创建线程时的 java 运行时会将对该`Thread`对象的引用存储在线程上下文中，并且`currentThread`只会在那里查找并返回当前线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T22:47:29.530

“当前正在执行的线程”意味着系统调度器给了这个线程一些时间来执行它的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-13T15:26:06.377

在任何给定的时间点，只有一个线程正在执行（live），因此`Thread.currentThread()`返回当前正在执行的线程的详细信息。例如，Thread_name、priority、method_name。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-31T22:54:11.367

多个线程没有同时运行，多个线程之间存在线程切换。处理器一次可以执行一项任务，因此一次执行一个线程。所以我们得到当前正在运行的线程的引用。

# java - 当 ListFragment 从后堆栈返回布局时，如何刷新它？

> ID：10842272
> 
> 赞同：9
> 
> 时间：2012-05-31T22:44:08.607
> 
> 标签：java, android, listview, actionbarsherlock, android-support-library

首先我应该提到我正在使用 ActionBarSherlock 库来实现向后兼容性。

我有一个活动，`ListFragment`它在首次启动时添加了一个。我有一个自定义`Loader`，我实现并非常密切地遵循[AsnycTaskLoader 示例。](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)我`ListFragment`实现了`LoaderCallbacks<Cursor>`接口。`onCreateLoader()`添加片段时（ , `onLoaderFinished()`）和替换片段时（ ），将调用所有适当的回调方法`onLoaderReset()`。

我的`onActivityCreated(Bundle)`方法如下所示：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mAccountsDbAdapter = new AccountsDbAdapter(getActivity().getApplicationContext());

    setHasOptionsMenu(true);
    mCursorAdapter = new AccountsCursorAdapter(getActivity()
            .getApplicationContext(), R.layout.list_item_account, null,
            new String[] { DatabaseHelper.KEY_NAME },
            new int[] { R.id.account_name }, 0);

    setListAdapter(mCursorAdapter); 
    getLoaderManager().initLoader(0, null, this);
} 
```

稍后，将`ListFragment`替换为另一个 Fragment B。当用户按下后退按钮时，Fragment B 被删除并再次添加 ListFragment。但是，列表是空的，只`android:empty`显示元素，并且没有调用任何 LoaderCallback 方法。我可以使用调试器来确定`getLoaderManager().initLoader(0, null, this);`实际调用的，但没有别的。当我将其更改为 时`getLoaderManager().restartLoader(0, null, this);`，会调用回调，但我的列表仍然为空（尽管有数据，但视图未刷新）。

当我的 ListFragment 返回到布局时，如何让我的 ListFragment 自行刷新？有没有人遇到过这种情况，你是怎么解决的？

仅供参考，这是我的回调方法

```
 @Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new AccountsCursorLoader(this.getActivity()
            .getApplicationContext());
}

@Override
public void onLoadFinished(Loader<Cursor> loaderCursor, Cursor cursor) {
    mCursorAdapter.swapCursor(cursor);
    mCursorAdapter.notifyDataSetChanged();
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    mCursorAdapter.swapCursor(null);
} 
```

一些注意事项：

1.  我不能使用`setListShown(true)`示例中的方法，因为我知道`IllegalStateException`它不能与自定义内容视图一起使用。
2.  我`AccountsCursorAdapter`扩展了 a`SimpleCursorAdapter`并且只修改了`bindView()`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:37:35.587

尤里卡！！！我找到了（当然是偶然的）

**TL;博士;**

在[AccountsListFragment](http://goo.gl/hCRzh)中，我现在在方法中创建我的数据库适配器 ( `AccountsDatabaseAdapter`) 并在`onCreate()`方法中关闭它，`onDestroy()`它现在可以工作了。以前我`onActivityCreated()`在`onDestroyView()`. 请注意，我不是指 . `ListAdapter`，而是指我的数据库接口`AccountsDbAdapter`。

**尝试长解释：**

好吧，我这样做是因为我认为在该方法`getActivity()`中无法获取上下文。`onCreate()`事实证明，你`getActivity()`甚至可以在`onActivityCreated()`被调用之前。

但我无法真正解释为什么现在这样有效，因为它`Loader`有自己的`DatabaseAdapter`对象来检索数据。如果我猜的话，我会说为两个数据库适配器返回相同的数据库对象（[数据库被缓存](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)）。这意味着当我关闭一个时`onDestroyView()`，另一个也关闭并且游标数据集变得无效，从而导致一个空的列表视图。加载器不会重新加载，因为它认为数据没有改变。

但即使是这个解释也不能完全让我满意，因为我在这里尝试过的一些建议的解决方案，比如每次强制重启加载器都不起作用。（在该`loadInBackground()`方法中，`DatabaseAdapter`每次都会创建一个新的）。

无论如何，如果您碰巧对正在发生的事情有更好的了解，请在评论中敲定。

感谢大家对此的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:42:03.540

您是否尝试过在基础数据集更改后强制加载程序在您的活动中重新启动？

尝试：

```
getLoaderManager().restartLoader(0, null, this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:25:46.503

尝试[forceload()](http://developer.android.com/reference/android/content/Loader.html#forceLoad%28%29)：

```
getLoaderManager().getLoader( 0 ).forceLoad(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-25T20:24:52.887

## 适配器看到的内容：

您观察到空 ListView 的原因是因为*返回的 Cursor 的位置**仍然**指向最后一个元素*。当您`swap()`将光标指向适配器时，适配器会尝试使用`while(Cursor.moveToNext())`循环进行迭代。因为该循环总是评估 FALSE，所以您的 ListView 会给您一种空光标的错觉。

打印`Cursor.getCount()`和`Cursor.getPosition()`in的值`onLoadFinished()`。如果我是正确的，这两个值应该相等。这种索引冲突造成了上述错觉。

## 为什么适配器会看到这个：

加载程序将尽可能重用光标。如果你为一组没有变化的数据请求加载器，加载器是聪明的，通过 onLoadFinished 返回游标而不做*任何*额外的工作，甚至不将游标的位置设置为 -1。

**ANS**手动调用`Cursor.moveToPosition(-1)`以`onLoadFinished()`解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T15:48:00.170

就我而言，我发现 ListView 出于某种原因根本没有绘制在屏幕上。如果我转到主屏幕然后切换回活动，一切都会按预期显示。所以我搜索了一种强制重绘屏幕的方法，我发现了以下内容：

[强制全屏活动在恢复时重新测量/重绘？](https://stackoverflow.com/questions/4328534/force-a-full-screen-activity-to-remeasure-redraw-on-resume)

根据对该问题的回答，我将以下代码添加到`onActivityCreated()`我的 ListFragment 的方法中：

```
getActivity().getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 0); 
```

有了这个代码，一切都按预期工作。但这仍然是一种解决方法，所以如果有人用更好的解决方案或解释给出了这个问题的答案，我会奖励他们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T11:09:17.880

问题可能来自`getLoaderManager()`哪个不会将回调发送到正确的位置。

如果您使用的是 ActionBarSherlock 那么这意味着您使用的是 Android 2.x 对吗？您是否考虑过使用 Android 支持包 v4？[http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

然后，您将通过调用使用`android.support.v4.app.ListFragment`并获取您的`LoaderManager``getActivity().getSupportLoaderManager()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-09T11:19:20.570

由于您使用的是自定义加载器，您知道在使用本机 CursorLoader 时是否有同样的问题吗？如果没有，那么也许，您可以将您的 Loader 与 Android 源代码进行比较，看看它们是否在做不同的事情？

[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/CursorLoader.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/CursorLoader.java)

# performance - 是否可以使用 ETW（Windows 事件跟踪）来收集内存统计信息？

> ID：10842281
> 
> 赞同：7
> 
> 时间：2012-05-31T22:45:30.917
> 
> 标签：performance, memory, etw, xperf

是否可以使用 ETW 来获取所有进程和系统的内存统计信息？对于内存统计，我的意思是：例如提交字节、私有字节、分页池、工作集、...

我找不到任何有关使用 xperf 获取和查看内存统计信息的信息。它总是与 CPU、磁盘、网络有关。

可能会使用性能计数器来获取此类信息，但是如何在一个图表中以图形方式覆盖统计信息（如何关联/同步时间戳）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-13T04:18:10.503

在 Windows 8.1 及更高版本上最好的选择是 Microsoft-Windows-Kernel-Memory 提供程序，它每 0.5 秒记录一次每个进程的内存信息。有关详细信息，请参阅[https://github.com/google/UIforETW/issues/80](https://github.com/google/UIforETW/issues/80)。UIforETW 在可用时默认启用此功能。

您也可以尝试 MEMINFO 提供程序。它提供了内存压力的系统范围概述。它显示活动列表（当前正在使用的内存）、备用列表（当前未使用的“有用”页面，例如磁盘缓存），以及零和空闲列表（真正空闲的内存）。这至少可以让您判断系统是否内存不足。

您也可以尝试 MEMINFO_WS 和 CONTMEMGEN，但这些都没有记录，所以我真的不知道他们做了什么。它们出现在 xperf -providers k 中，但是当我用它们录制时，我看不到任何新的图表出现。显然，Microsoft 提供了这些提供程序，但无法查看它们。叹...

如果您想要 Windows 7 上的更多内存详细信息（例如每个进程的工作集），最好的办法是运行一个进程，该进程定期查询此数据并在自定义 ETW 事件中发出它。这在 UIforETW 中以预先打包的形式提供，可以每秒查询一次指定进程集的工作集。关于如何获得 UIforETW，请参阅公告帖子： [https ://randomascii.wordpress.com/2015/04/14/uiforetw-windows-performance-made-easier/](https://randomascii.wordpress.com/2015/04/14/uiforetw-windows-performance-made-easier/)

UIforETW 的 Windows 7 工作集数据显示在任务名称 == 工作集下的通用事件中。在 Windows 8.1 上，操作系统工作集数据（更详细、更有效地记录）显示在 Memory-> Virtual Memory Snapshots 下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T04:21:57.047

`ReferenceSet`您可以使用内核组跟踪内存使用情况。它包括以下跟踪标志：

```
PROC_THREAD+LOADER+HARD_FAULTS+MEMORY+FOOTPRINT+VIRT_ALLOC+MEMINFO+VAMAP+SESSION+REFSET+MEMINFO_WS 
```

MEMORY = 内存跟踪

FOOTPRINT+REFSET = 支持足迹分析

MEMINFO = 内存列表信息（您从 ResMon 看到的活动、备用和其他）

VIRT_ALLOC = 虚拟分配保留和释放

VAMAP = 映射文件信息

MEMINFO_WS = 工作集信息

如您所见，当您使用正确的标志时，xperf 可以捕获大量内存数据。

# xcode - Xcode，在测试期间访问“支持文件”文件夹中的文件

> ID：10842286
> 
> 赞同：4
> 
> 时间：2012-05-31T22:46:02.950
> 
> 标签：xcode, testing, ios-simulator

我有一个在 Xcode 4.3.2 上进行测试的项目，我想在测试运行时访问一些文件。我将文件添加到自动生成的“支持文件”文件夹中，但是在运行测试时我无法访问它，我会因为找不到文件而出错。

我尝试了这些组合：

`myFile`

`Supporting Files/myFile`

`../Supporting Files/myFile`

但是这些都不起作用。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T20:38:41.037

将它们添加到`Supporting Files`文件夹后，您必须检查您的测试目标（目标成员资格），以便它们在捆绑包中可用。您还可以在“构建阶段”下的目标信息中验证这一点（连同它们的位置）。然后（在你的测试中）你得到你的文件的路径，如下所示：

```
NSString *filePath = [[NSBundle bundleForClass:[self class]] pathForResource:@"index" ofType:@"html"]; //Whatever your file - extension is 
```

我附上截图作为快速参考： ![目标会员](../Images/09cf933463dac7c5d0f47090178df8e2.png)

PS。屏幕截图来自 OSX 项目，但过程与 iOS 相同

# java - JTable的非实时/非实时排序

> ID：10842290
> 
> 赞同：1
> 
> 时间：2012-05-31T22:46:29.930
> 
> 标签：java, swing, jtable, live, tablerowsorter

当表格处于排序模式时（使用`RowSorter`），似乎大多数时候表格都是实时排序的。例如，每当我添加新行时，表格都会自动排序（编辑单元格除外）。我想知道是否有任何方法可以禁用这种实时排序行为。

我想要做的是：在对表格进行排序后，无论是升序还是降序，排序器都会保持当前的排序状态并停止实时排序。然后可以在底部添加新行，并且可以上下移动选定的行，并且表格会更新视图模型中的所有更改。

@trashgod：感谢您的回答。我实际上有点像原生行排序器方法，因为我可以在三态（升序、降序和未排序）中圈出列状态。如果使用 Collections.sort，我必须在每次排序之前创建一个变量来保存原始行顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:27:52.223

您可以对`TableModel`独立于`RowSorter`使用[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)和自定义的行进行排序`Comparator`，例如[此处](https://stackoverflow.com/a/5064357/230513)显示的，可以接受指定排序方向的参数。

```
enum Sort { ASCENDING, DESCENDING; }
class RecordComparator implements Comparator<Record> {
    public RecordComparator(Sort sort, ...) { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:23:55.970

看起来您想要的是能够对表进行排序，然后能够添加更多行而不更改表排序顺序。即使有可能，您也必须重写`DefaultRowSorter`and `TableRowSorter`（两者都可用的源代码）。原因是当前实现旨在保持一致的排序顺序（不考虑何时添加行）。您可能无法扩展 TableRowSorter 来解决这个问题，因为它的父类有很多与我刚才描述的设计相关的私有函数。

我上面描述的是干净的方式。这是另一种方法，每次要插入新行时都这样做：

1.  将视图的当前排序顺序保存在地图中。我使用 hashmap ( `postion`) 将排序列的第 i 行中的每个对象映射到它在视图中的位置。 `position.put(tableModel.getValueAt(i, column), sorter.convertRowIndexToView(i));`

2.  创建一个比较器，它将使用上面创建的映射对传入数据进行排序。将 TableRowSorter 的列比较器设置为新创建的比较器。然后调用`sorter.sort()`，这是必要`DefaultRowSorter`的，因为需要缓存比较器。比较器会将现有对象放在其当前位置，并将新对象（在插入期间创建）放在最后。

3.  将行插入到表模型中。在我的代码中，我将 3 个随机整数、布尔值和双精度值添加到表中的 3 列中。

4.  通过将 value 设置为 null 来删除 #3 中添加的比较器，`sorter.setComparator(sortKeys.get(0).getColumn(), null);`这样下次在列上切换排序时，它将使用默认比较器而不是虚拟比较器。

完整代码如下。每次按下按钮时，它都会在表格中添加一行。请注意，我没有使用 sortkeys > 1 或过滤器对此进行测试（我将把它留给你）。让我知道你对这个黑客的看法。

```
private void insertRowButtonActionPerformed(java.awt.event.ActionEvent evt) {
    TableRowSorter<TableModel> sorter = (TableRowSorter<TableModel>)jTable1.getRowSorter();
    final HashMap<Object, Integer> position = new HashMap<Object, Integer>();
    List<? extends SortKey> sortKeys = sorter.getSortKeys();

    if(!sortKeys.isEmpty()){
        SortKey sortKey = sortKeys.get(0);
        int column = sortKey.getColumn();
        TableModel tableModel = sorter.getModel();
        int n = sorter.getModelRowCount();
        final SortOrder sortOrder = sortKey.getSortOrder();
        for(int i=0;i<n;i++){
            position.put(tableModel.getValueAt(i, column), sorter.convertRowIndexToView(i));
        }
        //add dummy comparator
        sorter.setComparator(column, new Comparator<Object>(){
            public int compare(Object o1, Object o2) {
                int obj1Position = position.containsKey(o1) ? position.get(o1):position.size();
                int obj2Position = position.containsKey(o2) ? position.get(o2):position.size();
                return sortOrder == SortOrder.DESCENDING ? obj2Position - obj1Position:obj1Position - obj2Position;
            }
        });
        sorter.sort();
    }

    /////////////insert row///////////////////
    DefaultTableModel tableModel = (DefaultTableModel)jTable1.getModel();
    tableModel.addRow(new Object[]{rand.nextInt(), rand.nextBoolean(), rand.nextDouble()});
    /////////////end insert row///////////////

    //remove dummy comparator
    if(!sortKeys.isEmpty()){
        sorter.setComparator(sortKeys.get(0).getColumn(), null);
    }
} 
```

# javascript - 了解 d3.js 源代码：卡在 function.call() 和“=+”

> ID：10842291
> 
> 赞同：1
> 
> 时间：2012-05-31T22:46:40.723
> 
> 标签：javascript, d3.js, reverse-engineering, force-layout

在d3.layout.force的源码中，第158行，有这段代码

```
force.charge = function(x) {
    if (!arguments.length) return charge;
    charge = typeof x === "function" ? x : +x;
    return force;
}; 
```

现在，如果你转到第 225 行，你会看到

```
charges = [];
if (typeof charge === "function") {
  for (i = 0; i < n; ++i) {
    charges[i] = +charge.call(this, nodes[i], i);
  }
} else {
  for (i = 0; i < n; ++i) {
    charges[i] = charge;
  }
} 
```

我在这里不明白的是这条线

```
charges[i] = +charge.call(this, nodes[i], i); 
```

我是 JavaScript 新手，无法理解这里发生了什么。

据我了解，charge 只需要 1 个参数 ( `x`)。这里“ `this`”被传递给当前对象的上下文，但其他两个呢？`nodes[i]`" " 和 " " 中的哪一个`i`被视为 " `x`" ？

又是什么“ `= +`”在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:52:49.970

查看 MDN 列表中的[call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)、[apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)和[bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)。

这是一个很难理解的概念，但在 call 和 apply 中发生的事情是你选择在不同的“上下文”中执行一个函数。

我说带有引号的“上下文”作为“执行上下文”在 JS 中具有确切的含义，但这不是。我没有一个很好的词，但这里发生的事情是您在`this`执行函数时正在换出对象。

这可能会有所帮助：

```
var obj = { foo: "bar" };
method.call( obj, "arg" );
function method( arg ) {
    console.log( this.foo ); #bar
    console.log( arg ); #"arg"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:53:11.680

我想你会在[这里](https://stackoverflow.com/questions/221539/what-does-the-plus-sign-do-in-return-new-date)找到你的答案。

基本上，它正在转换：

```
function(){ return +new Date; } 
```

进入这个：

```
function(){ return Number(new Date); } 
```

本质上，它将参数转换为数字，并将其添加到先前的值。

更多关于[这里的阅读](http://xkr.us/articles/javascript/unary-add/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:56:49.733

你必须`charge`更仔细地跟随。它是[第 11 行](https://github.com/mbostock/d3/blob/v2.9.2/src/layout/force.js#L11)中定义的变量：

```
charge = -30, 
```

您引用的功能`force.charge`是**设置**费用，它**不是**中提到的功能`+charge.call(this, nodes[i], i);`。看看第二行`force.charge`：

```
charge = typeof x === "function" ? x : +x; 
```

`x`可以是*您*传递的函数（回调），以动态计算费用。当前节点 ( `nodes[i]`) 和节点 ( ) 的索引`i`将传递给此回调，以便您可以根据这些值动态计算费用：

```
force.charge(function(node, index) {
    return index * 2;
}); 
```

`x`（因此`charge`）也可以是数字或数字字符串。这就是为什么要预先测试它是否`charge`是一个函数：

```
if (typeof charge === "function") {
  // function so we call it and pass the current node and index
} else {
  // static value, the same for each node
} 
```

* * *

因此，您始终可以将任意数量的参数传递给函数，无论它定义了多少参数。例如：

```
function foo() {
    alert([].join.call(null, arguments));
}

foo('a', 'b'); 
```

会提醒`a,b`。

* * *

回答您的问题：传递给[`.call()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或[`.apply()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)的参数以相同的顺序传递给函数。因此，如果我有一个函数`function foo(a, b, c)`，那么`foo.call(null, x, y)`将`x`作为`a`和`y`作为`b`（`c`将是`undefined`）传递。

`+`运算符是[*一元加*](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)运算[符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)[*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)，它只是将操作数转换为数字。

# gtk - 如何在 Vala 获得 gtk3 边界？

> ID：10842292
> 
> 赞同：0
> 
> 时间：2012-05-31T22:46:40.860
> 
> 标签：gtk, gtk3

我在 Vala 中有一个 GTK3 Window 对象，我需要获取它的 Border 结构：

[http://www.valadoc.org/#!api=gtk+-3.0/Gtk.Border](http://www.valadoc.org/#!api=gtk+-3.0/Gtk.Border)

怎么做？这在 Gtk3 中发生了很大变化。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:26:19.237

我不认为它有一个。也许你想要`border-width`房产？

# wcf - Devicemanager连接客户端WCF？

> ID：10842299
> 
> 赞同：0
> 
> 时间：2012-05-31T22:47:06.523
> 
> 标签：wcf

我正在开发一个类似于 Devicemanager 的 Web 应用程序。客户端可以向设备管理器注册并连接到管理器提供的设备。我正在考虑使用双工 WCF 服务进行设备连接/断开连接。WCF 是正确使用的技术吗？我需要不断注册客户端才能连接/断开连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:59:33.593

双工 WCF 服务实现了 Web 服务世界中的回调函数。使用回调客户端向服务器发送请求，其中包含对其自身方法的某种引用，该方法应在时间到来时由服务器调用。这允许服务器在服务器认为有必要时与客户端通信。

您的情况不需要回调实现，因为进程始终由客户端控制：

1.  客户可以向设备管理器注册
2.  客户端可以连接到管理器提供的设备

所以 Duplex 的答案是否定的（如果我对你的问题的理解是正确的）

如果您使用 WCF – 是。如果您想在两个应用程序之间建立通信通道并且 TCP/IP 级别太低，无法满足您的需求，WCF 是正确的技术。

# c++ - 这个与 std::ostream 相关的堆栈跟踪是什么意思？

> ID：10842307
> 
> 赞同：1
> 
> 时间：2012-05-31T22:48:00.053
> 
> 标签：c++, stl, stack-trace, ostream

我正在尝试为集成/移动平台构建 C++ 库。该平台有一套不错的库，包括 stdc++。我正在尝试构建的库使用 ofstream 并且每当它尝试使用依赖于 ofstream 的类时，我都会收到“bad_cast”异常。

```
0  0xb082d9b1 in SignalKill ()
   from /home/preet/bbndk-2.0.1/target/qnx6/x86/lib/libc.so.3

1  0xb081aa7e in raise ()
   from /home/preet/bbndk-2.0.1/target/qnx6/x86/lib/libc.so.3

2  0xb0818cb8 in abort ()
   from /home/preet/bbndk-2.0.1/target/qnx6/x86/lib/libc.so.3

3  0xb87c48bf in __gnu_cxx::__verbose_terminate_handler ()
    at ../../../../../libstdc++-v3/libsupc++/vterminate.cc:93

4  0xb87c23d6 in __cxxabiv1::__terminate (
    handler=0xb87c47c0 <__gnu_cxx::__verbose_terminate_handler()>)
    at ../../../../../libstdc++-v3/libsupc++/eh_terminate.cc:38

5  0xb87c2421 in std::terminate ()
    at ../../../../../libstdc++-v3/libsupc++/eh_terminate.cc:48

6  0xb87c2563 in __cxxabiv1::__cxa_throw (obj=0x859e710, tinfo=0xb87f4c24, 
    dest=0xb87c0670 <std::bad_cast::~bad_cast()>)
    at ../../../../../libstdc++-v3/libsupc++/eh_throw.cc:83

7  0xb875e88c in std::__throw_bad_cast ()
    at ../../../../../libstdc++-v3/src/functexcept.cc:52

8  0xb8798c0d in __check_facet<std::ctype<char> > (__f=<optimized out>)
    at /home/builder/hudson/650-gcc-4.4/svn/linux-x86-o-ntox86/i486-pc-nto-qnx6.5.0/pic/libstdc++-v3/include/bits/basic_ios.h:49

9  widen (__c=<optimized out>, this=<optimized out>)
    at /home/builder/hudson/650-gcc-4.4/svn/linux-x86-o-ntox86/i486-pc-nto-qnx6.5.0/pic/libstdc++-v3/include/bits/basic_ios.h:440

10 std::endl<char, std::char_traits<char> > (__os=...)
    at /home/builder/hudson/650-gcc-4.4/svn/linux-x86-o-ntox86/i486-pc-nto-qnx6.5.0/pic/libstdc++-v3/include/ostream:539

11 0xb8793c2d in std::ostream::operator<< (this=0x84db220, 
    __pf=0x804f64c <_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_@plt>)
    at /home/builder/hudson/650-gcc-4.4/svn/linux-x86-o-ntox86/i486-pc-nto-qnx6.5.0/pic/libstdc++-v3/include/ostream:113

12 0x0805240d in QDecViewport::QDecViewport (this=0x86da6c0, parent=0x0)
    at ../qml_osg_viewport/qdecviewport.cpp:12

13 0x08051cca in QDeclarativePrivate::QDeclarativeElement<QDecViewport>::QDeclarativeElement (this=0x86da6c0)
    at /usr/local/Trolltech/QtLighthouse-4.8.2-i386/include/QtDeclarative/qdeclarativeprivate.h:83

14 0x08051d3c in QDeclarativePrivate::createInto<QDecViewport> (
    memory=0x86da6c0)
    at /usr/local/Trolltech/QtLighthouse-4.8.2-i386/include/QtDeclarative/qdeclarativeprivate.h:91

15 0xb8ad5ec5 in ?? ()

16 0x086da6c0 in ?? ()

17 0x00000000 in ?? () 
```

框架 7-11 是相关的，我需要帮助理解。代码框架 12 所指的行只是：

```
OSG_INFO << "Hello OSG" << std::endl; 
```

其中 OSG_INFO 是用于记录的流重定向器。我能够以相同的方式使用 std::cout 没有任何问题。拆解第 11 帧给了我：

```
__pf=0x804f64c <std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)@plt>) 
```

这仍然很神秘......如果我试图将一些非常奇怪的东西传递给 ofstream 输出运算符，我会理解事情会变得疯狂，但它只是文本。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T22:53:09.810

`std::endl`具有以下行为，引用 C++11 §27.7.3.8/1：

> 来电`os.put(os.widen('\n'))`，然后`os.flush()`。

第9 帧表示`endl`调用`widen`失败，即`OSG_INFO.widen('\n')`失败。`widen`，反过来，具有以下行为（§27.5.5.3/12）：

> *回报：* `use_facet< ctype<char_type> >(getloc()).widen(c)`

`use_facet`如果分面不存在于被灌输的语言环境（第 22.3.2/3 节）中，它本身会抛出`bad_cast`，但您的堆栈跟踪并不表明是这种情况。（话又说回来，我还没有深入研究 libstdc++ 内部结构来验证它是否按照书本行事......）

我假设它`__check_facet`在之前被调用`use_facet`（或者`use_facet`被内联并从堆栈跟踪中消失），具有相同的净效果；这意味着`OSG_INFO`已经充满了一些不存在`std::ctype<char>`方面的语言环境——糟糕的时代！

或者，它可能已经充满了一些带有刻面存在的语言环境，无法`widen('\n')`优雅地处理。但是没有办法确切地知道，在不知道`OSG_INFO`它是什么和/或如何实现的情况下，我们无法告诉您其他任何事情。

# json - curl命令无法传递bash参数

> ID：10842310
> 
> 赞同：3
> 
> 时间：2012-05-31T22:48:43.947
> 
> 标签：json, bash, curl

所以我是 curl 的新手，我正在尝试编写一个 bash 脚本，我可以运行它来下载文件。所以我从身份验证开始，然后发布一个 POST 请求下载。我得到了一个 Foo_ID，我在其中使用 bash 解析并设置为一个参数。然后我尝试通过下载 URL 使用 GET 某些 Foo 数据。我遇到的问题是，每当我传入从 POST 响应中解析的参数时，我什么都得不到。这是我正在做的一个例子。

```
#!/bin/bash
curl -b cookies -c cookies -X POST @login_info -d "https://foo.bar.com/auth"
curl -b cookies -c cookies -X POST @Foo_info -d "https://foo.bar.com/foos" > ./tmp/stuff.t
myFooID=`cat ./tmp/stuff.t |grep -Po '"foo_id:.*?",'|cut -d '"' -f 4`
curl -b cookies -c cookies "http://foo.bar.com/foo-download?id=${myFooID}" > ./myFoos/Foo1.data 
```

我已经回显了 myFooID 以确保它是正确的。我还回显了“https://foo.bar.com/foo-download?id=${myFooID}”，它正确显示了我需要的 URL。任何人都可以帮助我，就像我说我是使用 curl 的新手并且对使用 bash 命令有点生疏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:10:31.857

所以我已经解决了这个问题。问题是在为 Foo 发布我的帖子之后，我没有给我足够的时间来创建我的 foo，然后再尝试下载它。我在最后两个 curl 命令之间添加了一个 sleep 命令，现在它可以完美运行了。我要感谢 Dennis Williamson 帮助我清理我的代码，这让我理解了我的问题。我在我的桌子上为他创建了一个神殿。

# android - Android - 动态表格布局未出现

> ID：10842312
> 
> 赞同：0
> 
> 时间：2012-05-31T22:49:14.060
> 
> 标签：android, android-layout, android-canvas, android-tablelayout

我正在尝试在我的 cutsom 键盘上实现 HUD 显示。HUD 将包含键/值对。我需要以编程方式创建一个 TableLayout 并将其绘制在我的画布上。为了做到这一点，我重写了keyboardview onDraw() 方法：

```
@Override
public void onDraw(Canvas canvas) {  // In the custom MyKeyboardView class
    MyHUD hud = new MyHUD(getContext());
    super.onDraw(canvas);
    hud.tl.draw(canvas);    //tl being the TableLayout to draw
} 
```

我的HUD类：

```
public class MyHUD {

    public TableLayout tl;
    private MyData mData;

    public MyHUD(Context context) {

      TableRow.LayoutParams trParams = new TableRow.LayoutParams(
        TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT);
      TableLayout.LayoutParams tlParams = new TableLayout.LayoutParams(
        TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT);

      tl = new TableLayout(context);
      tl.setLayoutParams(tlParams);

      for (int i = 0; i < 10; i++) {

        TableRow tr = new TableRow(context);
        tr.setId(100+i);
        tr.setLayoutParams(trParams);

        TextView charTV = new TextView(context);
        charTV.setId(200+i);
        charTV.setText("Hello " + i);
        charTV.setTextColor(Color.RED);
        //charTV.setLayoutParams(trParams);
        tr.addView(charTV);

        TextView keyTV = new TextView(context);
        keyTV.setId(300+i);
        keyTV.setText("world " + i);
        keyTV.setTextColor(Color.CYAN);
        //keyTV.setLayoutParams(trParams);
        tr.addView(keyTV);

        tl.addView(tr, tlParams);   
      }       
   }
} 
```

（请注意，目前没有数据获取，只是用于测试目的的“Hello world”）。正如在其他几篇文章中所见，我已经注释掉了 TextView 布局，但这似乎不是问题。

* * *

备选方案：

我没有通过构造函数实例化 TableLayout，而是尝试了类似的方法：

```
tl = (TableLayout) findViewById(R.id.my_hud); 
```

连同以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="0,1"
        android:id="@+id/my_hud" >
</TableLayout> 
```

问题是我的自定义类未定义 findViewById 方法。

知道为什么它没有正确绘制 TableLayout 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:21:25.520

我没想到会这么简单，但这里缺少的是：

```
 hud.tl.measure(canvas.getWidth(), canvas.getHeight());
    hud.tl.layout(0, 0, canvas.getWidth(), canvas.getHeight()); 
```

现在 TableLayout 已正确绘制。成功。

# matplotlib - matplotlib 生成的 .png 和 .eps 文件不会在 RHEL 5 上打印

> ID：10842313
> 
> 赞同：1
> 
> 时间：2012-05-31T22:49:22.823
> 
> 标签：matplotlib, png, eps, rhel5, cups

我正在使用 matplotlib.pyplot 绘制一些数据，并在运行 plt.show() 后将图像保存为 PNG 图像或封装的 postscript。

当我用 evince 打开这些保存的文件并尝试打印它们时，会向打印机发送一个作业，但没有打印任何内容。绘图显示在屏幕上没有问题。

我需要在 matplotlib 中做些什么来生成可打印的 PNG 和 EPS 吗？这是 matplotlib 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:24:49.380

以下是开始调试这种情况的几个步骤：

*   (1) 停止您的`cupsd`(CUPS 守护程序)。
*   (2) 更改*cupsd.conf* : `LogLevel debug`(而不是*LogLevel info*。
*   (3) 删除您的日志文件`/var/log/cups/error_log`。
*   (4) 重新开始`cupsd`。
*   (5) 打印您的问题 EPS。
*   (6) 检查您的*cupsd.conf*日志文件是否有错误。

在此处报告错误。（错误可能通过`E`每行的前缀来识别。）另外，这`Auto-typing`一步的结果是什么？

或者：您能否提供指向您的问题 EPS 样本的链接？

# sql-server-2005 - SQL Server 2005，SELECT DISTINCT 查询

> ID：10842314
> 
> 赞同：1
> 
> 时间：2012-05-31T22:49:34.213
> 
> 标签：sql-server-2005, select, distinct

如何修改此查询以返回 distinct`Models`和`VideoProcessor`columns ？

```
SELECT TOP(20) * 
FROM 
   (SELECT 
       [3D_Benchmarks].Id AS BenchmarkId,
       Manufacturer, Model, Slug, VideoProcessor, 
       FPS, CPU 
    FROM 
       [3D_Benchmarks]
   JOIN 
       [3D_Slugs] ON [3D_Benchmarks].Id = [3D_Slugs].BenchmarkId) AS tb 
ORDER BY 
   tb.FPS DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:59:41.623

基于您的评论的新答案。这会查找 FPS 最高的 20 个 Model+VideoProcessor。对于其中的每一个，它都会选择具有最高 FPS 的行。

```
select  details.Model
,       details.VideoProcessor
,       details.FPS
,       <add other columns here>
from    (
        select  top 20 b.Model
        ,       VideoProcessor
        from    [3D_Benchmarks] b
        join    [3D_Slugs] s
        on      b.Id = s.BenchmarkId 
        group by
                b.Model
        order by
                max(b.FPS) desc
        ) top20
cross apply
        (
        select  top 1 *
        from    [3D_Benchmarks[ b
        join    [3D_Slugs] s
        on      b.Id = s.BenchmarkId 
        where   b.Model = top20.Model
                and b.VideoProcessor = top20.VideoProcessor
        order by
                b.FPS desc
        ) details 
```

# mysql - 简单的 MySQL 连接

> ID：10842315
> 
> 赞同：0
> 
> 时间：2012-05-31T22:49:36.923
> 
> 标签：mysql

这适用于 player1name，但如何解决 player2name？

当我在这里时，如果您知道任何有用的可视化查询构建器，请告诉我；）

```
 SELECT 
_game.player1,
_user.username AS player1name,
_game.player2,
_user.username AS player2name,
FROM _game
LEFT JOIN _user ON _game.player1 = _user.id 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:53:15.953

```
SELECT player1,
_user.username AS player1name,
 player2,
_user2.username AS player2name
FROM _game
LEFT JOIN _user ON (_headsup.player1 = _user.id)
LEFT JOIN _user _user2 ON (_headsup.player2 = _user2.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:54:18.377

我没有运行 ATM 的 mySQL，但它应该类似于...

```
SELECT 
player1,
u1.username AS player1name,
 player2,
u2.username AS player2name,
FROM _game
INNER JOIN _user u1 ON _headsup.player1 = u1.id
INNER JOIN _user u2 ON _headsup.player2 = u2.id 
```

即连接上的别名，在选择中使用别名。

但是，我不知道 _headsup 来自哪里！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T22:57:27.820

```
SELECT 
   player1,
   usr1.username AS player1name,
   player2,
   usr2.username AS player2name,
FROM _game
LEFT JOIN _user usr1 ON usr1.id= _game.player1
LEFT JOIN _user usr2 ON usr2.id= _game.player2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T22:56:19.197

当您加入`_game`ON`_user`时，我认为您必须指定*在这两个表上*加入哪些字段。您指定加入，然后尝试加入`_headsup`和`_user`。

不确定`player1`和`player2`是什么，但这些可能会出现模棱两可的字段，因为您没有说明它们来自哪个表。

所以先加入，然后用 on 进行第二`_game`次加入`_user``_user``_headsup`

```
FROM _game
LEFT JOIN _user ON _game.someField = _user.someField
JOIN _headsup ON _user.id = _headsup.player1 
```

# ruby-on-rails - Ruby on Rails ActiveResource 不工作

> ID：10842318
> 
> 赞同：1
> 
> 时间：2012-05-31T22:49:49.070
> 
> 标签：ruby-on-rails, activerecord, activeresource

我是 RoR 的新手，我正在尝试构建使用 ActiveResource ActiveRecord 的简单 Web 应用程序

我在 localhost:3001 上托管了一个简单的 Rails 项目。该应用程序具有如下所示的欢迎控制器

```
class WelcomeController < ApplicationController
  def index
    @persons = []
    num = 0
    until num < 10 do
      @persons[num] = Person.new
      @persons[num].name = [*('A'..'Z')].sample(8).join
      @persons[num].surname = [*('A'..'Z')].sample(64).join 
      @persons[num].dob = Time.at(rand * Time.now.to_i)      
      num+1      
    end

    respond_to do |format|
      format.xml { render :xml => @persons}
    end
  end
end 
```

人员类如下所示：

```
class Person
  attr_accessor :name, :surname, :dob
end 
```

此 Rails 应用程序应用作托管在 localhost:3000 上的其他应用程序的 REST 服务

字母应用程序中的模型如下所示：

```
class Person < ActiveResource::Base
   self.site = "http://localhost:3001"
end 
```

现在，我的问题是如何列出视图中的所有 10 个人？

我尝试在人控制器中使用人模型作为 ActiveResource：

```
class PersonController < ApplicationController
  def index
   @persons= Person.find(":all")   
  end
end 
```

通过我在 PersonController#index 中收到消息 ActiveResource::ResourceNotFound

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:03:05.237

首先，我不确定你为什么要在 WelcomeController 中创建 10 个人，但这里有一个更好的方法。

```
class WelcomeController < ApplicationController
  def index
    10.times do
      person = Person.new
      person.name = [*('A'..'Z')].sample(8).join
      person.surname = [*('A'..'Z')].sample(64).join
      person.dob = Time.at(rand * Time.now.to_i) 
      person.save # This part is necessary for data to persist between requests
    end

    @persons = Person.all

    respond_to do |format|
      format.xml { render :xml => @persons}
    end
  end
end 
```

然后，当然可以在您的 PersonController 中使用

```
@persons = Person.all 
```

或者

```
@persons = Person.find(:all) 
```

# android - 动态android状态栏通知

> ID：10842327
> 
> 赞同：0
> 
> 时间：2012-05-31T22:51:20.780
> 
> 标签：android, notifications

我有一个使用 sqlite 进行存储的应用程序。在这个数据库中，我有一个包含多个记录的表，其中包含日期时间字段。我想总是在每个前 12 小时推送状态栏通知。

我查看了[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)并了解如何使用它，但不知道如何在后台定期运行它。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:36:35.513

[正如链接文档所提到的，您可以从本地服务](http://developer.android.com/reference/android/app/Service.html)创建通知。第一个示例实际上描述了如何使用一个来创建和管理通知。

此外，[AlarmManager 类](http://developer.android.com/reference/android/app/AlarmManager.html)可能会帮助您有效地实现所述服务。我建议特别注意有关手机睡眠周期和唤醒锁定的注意事项。

最后，您可能希望您的服务在启动时启动。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/6391902/how-to-start-an-application-on-startup)。

# python - 拆分 Mongo 集合（按索引）

> ID：10842328
> 
> 赞同：0
> 
> 时间：2012-05-31T22:51:22.793
> 
> 标签：python, mongodb, celery, django-celery, nosql

我目前有一个长时间运行的操作（在 Python+Celery 中运行），它遍历大约 43,000,000 个元素的整个 Mongo 集合，并对元素进行分析而不对这些元素进行任何更改。

随着这个集合的增长，操作开始需要更长的时间（显然），现在通常由于不同数据库的超时而定期失败。

我想将此操作拆分为几个较小的操作（可能仅对几百万个元素进行操作），并且我想知道生成将执行拆分的查询的最佳方法。我在这个集合上只有一个索引，它的`_id`.

显而易见的答案似乎是这样的：

```
# This is executed in parallel on different servers
def doAnalysis(skipped,limit) 
    db.<collection>.find().skip(skipped).limit(limit)

...

# This is the parent task
elemsToAnalyze = db.<collection>.find().count()/10;
for i in range(0,10:
    doAnalysis(elemsToAnalyze * i, elemsToAnalyze) 
```

但事实证明这`.skip()`需要**很长时间**——基本上与实际执行分析一样长！有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:11:38.633

`skip()`在这种情况下可能会很慢。您可以通过使用最后`_id`一批来查询下一批来进行范围查询。像这样的东西：

```
db.<collection>.find({ "_id" : { $gte: prev_batch_last_id } } ).sort( { _id : 1 } ).limit(limit); 
```

您必须自己将批次的最后一个 id 存储到一个变量中。

# django - Django - 在 JSON 中传递 get_slug 方法

> ID：10842332
> 
> 赞同：0
> 
> 时间：2012-05-31T22:51:47.437
> 
> 标签：django, json

我有一个包含`get_slug`定义的模型：

```
def Specimen(models.Model):
    ...
    def get_slug(self):
        return '%s/%s-%d' % (slugify(self.longname),self.collection.collection_code, self.accessionnumber) 
```

在我看来，我想这样做：

```
 def show_detail(request):
    specimens = Specimen.objects.filter(...)
    specimen_data = []
    for s in specimens:
        specimen_tuple = (str(s.get_slug), format(s.latdecimal), format(s.longdecimal))
        specimen_data.append(related_tuple) 

    context['specimen_data'] = simplejson.dumps(specimen_data) 
```

但是当我尝试用 js 中的 slug 做某事时（尽管我在 shell 中得到相同的结果），我发现类似的东西`<bound method Specimen.get_slug of <Specimen: Specimen object>>`而不是我的 slug。

如何在传递给 JSON 之前强制对方法进行评估？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:19:59.467

尝试替换`s.get_slug`为，`s.get_slug()`以便您实际调用您的方法。

# mysql - MYSQL创建一张大表需要多长时间？

> ID：10842334
> 
> 赞同：0
> 
> 时间：2012-05-31T22:51:58.103
> 
> 标签：mysql, sql

当我将一个包含 3000 万行的表从文本文件导入到 MYSQL 表时，只用了 1 分钟。然而，我意识到我错过了一个列，我需要将它添加到表中。在 MYSQL 命令行中，我编写了以下命令：

```
create tableC as(tableA.T1, tableB.ZID from tableA, table B where A.ZID = B.ZID) 
```

已经一个多小时了，命令还没有终止。有谁知道原因？TableB 已经在 MYSQL 服务器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:23:14.167

不是 100% 肯定，但您最好先更改表并添加列，然后进行更新以填充该列

```
ALTER TABLE tableB ADD COLUMN colA yourColumnDefinition;
UPDATE tableB SET colA = <however you do it>; 
```

我不完全确定您将列添加到哪个表或如何计算它。根据您发布的查询，您似乎正在创建一个映射表以将两个表的 ID 相互映射。如果是这种情况，您最好将外键放在其中一张表中。

同样，这可能不是您正在寻找的内容，但如果您只想向已创建的表中添加一列，这可能是一种更好的方法。

# java - 如何仅使用 LAN 内的 IP 地址发送消息

> ID：10842335
> 
> 赞同：0
> 
> 时间：2012-05-31T22:51:58.920
> 
> 标签：java, android, ip-address

我有两个连接到我的接入点的 wifi 模块。我的安卓手机连接到同一个接入点。Java中有没有一种方法可以仅使用IP地址从我的手机向任何客户端发送消息。我不想在手机上运行服务器。

我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:35:03.773

我觉得总体上对 IP 地址和服务器存在混淆。IP 地址是一种在网络上查找实体的方法（它是一个地址）。由于您的手机连接到同一个接入点，它（很可能）在同一个子网上。这意味着它可以在不通过网关的情况下与任何其他实体对话，仅此而已。

虽然它能够与他们交谈，但仍然需要一些实体在倾听。当您的手机向特定地址（网络上的另一个节点）发送消息时，数据包可能会到达那里，但要继续进行通信：

*   另一端必须有一些监听器来选择传入的消息
*   通信必须遵循一组规定的规则（协议）

据我所知，您的手机充当客户端，而不是服务器。它启动与网络上其他实体的通信。根据您尝试与之通信的网络上的哪个节点，该节点应该期待该通信并知道如何进行通信。

如果您澄清设置和您的愿望，也许您可​​以获得更多的点响应。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-11T13:47:13.753

您在这里不了解的是，您可以使用 ip 地址将消息发送到该设备，但该数据不会显示在该设备的屏幕上，因为您没有为正在侦听该特定设备的进程提供任何端口号。您的消息将被发送，但设备不知道如何处理它。

# c++ - 文件读取期间的段错误

> ID：10842339
> 
> 赞同：0
> 
> 时间：2012-05-31T22:52:29.540
> 
> 标签：c++, segmentation-fault

该程序应该提示用户输入他们的用户名。收到用户名后，它会将其与“.history”连接以创建 username.history。然后它打开该文件 (username.history) 并从中读取输入。我在这里遇到了段错误。每当它打开由于文件不存在而为空的文件时，它会读取多行然后抛出段错误。我认为问题可能源于我尝试打开文件的方式，但我不确定。这是导致问题的部分：

```
// File input and output
ifstream f_in;
ofstream f_out;

// Prompt user for their username.
char username[80];
cout << "Please input your username: " << endl;
cin >> username;
cout << endl;
cout << "Loading history file if it exists." << endl;

// Create file naem and initialize the file line counter to 0.
strcat(username, ".history");
int fcount = 0;

// Open file and read in lines if there are any.
// Place read lines into the command string for use later.
char tmp[50];

f_in.open(username);
while(!f_in.eof()){
    f_in >> tmp;
    cmd[fcount] = tmp;
    fcount++;
}
f_in.close(); 
```

其他相关信息： cmd 被声明为全局变量（char cmd[200][50]）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:56:20.757

不确定这是否是唯一的问题，但这`cmd[fcount] = tmp`是错误的。你应该使用`strcpy()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:57:46.157

```
而（f_in.good（））
{
    f_in >> tmp;
    cmd[fcount] = tmp;
    fcount++;
}

```

# javascript - SlickGrid：具有两个日期字段的单元格中的复合编辑器？

> ID：10842342
> 
> 赞同：0
> 
> 时间：2012-05-31T22:52:46.770
> 
> 标签：javascript, jquery, datagrid, slickgrid

我正在将[SlickGrid](https://github.com/mleibman/SlickGrid)与 jQuery 一起使用，并且希望[在单元格内有一个复合编辑器，如示例 3a 所示](http://mleibman.github.com/SlickGrid/examples/example3a-compound-editors.html)，但有两个日期字段而不是两个文本字段。

有用的是，[示例 3](http://mleibman.github.com/SlickGrid/examples/example3-editing.html)显示了如何使用 SlickGrid 日期选择器来编辑日期字段，但没有复合编辑器。我想将两者结合起来。

因此，当用户单击该行时，不要在原始 HTML 中添加输入字段，如示例 3a 所示：

```
this.init = function () {
  $from = $("<INPUT type=text style='width:40px' />")
      .appendTo(args.container)
      .bind("keydown", scope.handleKeyDown);
  $(args.container).append("&nbsp; to &nbsp;");
  $to = $("<INPUT type=text style='width:40px' />")
      .appendTo(args.container)
      .bind("keydown", scope.handleKeyDown);
  scope.focus();
}; 
```

我想我需要使用`Slick.Editors.Date`编辑器来`$from`代替`$to`，如示例 3 所示。但是如何设置它们以使用此编辑器，而不是简单地附加一个输入字段？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:08:33.500

我认为您需要为此编写一个自定义编辑器，并将这个新编辑器用于您的单元格。

有关 SlickGrid 编辑器的文档和模板，请参阅此链接： [https ://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors](https://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors)

所有开箱即用的编辑器都可以在 slick.editors.js 中找到。一旦您查看代码，就很容易理解。我建议从`NumericRangeEditor`示例 3a 中使用的作为基础开始并对其进行编辑以包含 dateFields（甚至 datePickers）而不是文本框。

您可以将其添加到 slick.editors.js 或将其包含在您自己的 JS 文件中。

希望这可以帮助！

# php - 媒体维基。函数是如何获得参数的？

> ID：10842347
> 
> 赞同：0
> 
> 时间：2012-05-31T22:53:16.253
> 
> 标签：php, mediawiki

问题是关于 PHP 中的函数和参数。我正在阅读mediawiki的[简单扩展代码。](http://www.mediawiki.org/wiki/Extension%3aAutoWikiDump)它添加了回调函数：

```
$wgHooks['ArticleSaveComplete'][] = 'fnAutoWikiDump'; 
```

然后是这个函数的定义：

```
function fnAutoWikiDump(&$article, &$user, &$text, &$summary, &$minoredit, 
                    &$watchthis, &$sectionanchor, &$flags, &$revision){...} 
```

在这个函数中，我可以访问 $article 类的成员：

```
$awd_title = $article->getTitle(); 
```

我无法理解变量`$article`在调用时是如何传递给函数的？看起来它是在函数定义中传递的（我知道这是错误的），但我不明白它是如何传递的。你？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:59:48.790

您发布的代码以及链接中的示例代码*并未*显示实际调用该函数的详细信息。它只是注册为回调。回调函数的部分用处在于您通常根本不必自己调用它们，而是由使用它们的进程自动调用它们。

在 MediaWiki 代码的其他地方，注册的回调`ArticleSaveComplete`被调用（有一个数组），正确的参数在常规且可识别的函数调用中或通过类似[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php).

在定义回调以使用该接口时，您作为程序员的责任只是确保函数定义以正确的顺序采用正确数量的参数，并具有正确的名称。它如何被调用的细节取决于调用它的机制。

# ios - APN 令牌可以/会改变吗？

> ID：10842349
> 
> 赞同：2
> 
> 时间：2012-05-31T22:53:17.873
> 
> 标签：ios, apple-push-notifications

每当应用程序启动时，使用 APN 的应用程序似乎习惯于从操作系统获取令牌。但是，如果一个应用程序已经获得过一次，那么它是否有任何麻烦再次获得它（如果它已经这样做，则将其发送到服务器）。

从操作系统获得的 APN 令牌可以更改吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T18:51:55.933

您的问题的答案在 Apple 文档（本地和推送通知编程指南）中：

> 通过在每次启动应用程序时请求设备令牌并将其传递给提供者，您可以帮助确保提供者拥有设备的当前令牌。如果用户将备份恢复到为其创建备份的设备或计算机之外的设备或计算机（例如，用户将数据迁移到新设备或计算机），他或她必须至少启动一次应用程序以使其恢复再次收到通知。如果用户将备份数据恢复到新设备或计算机，或重新安装操作系统，则设备令牌会更改。此外，永远不要缓存设备令牌并将其提供给您的提供商；始终在需要时从系统获取令牌。如果您的应用程序之前已注册，请调用 registerForRemoteNotificationTypes：

# java - Java AES CBC 解密

> ID：10842350
> 
> 赞同：8
> 
> 时间：2012-05-31T22:53:31.513
> 
> 标签：java, encryption, aes

PHP 加密函数

```
$privateKey = "1234567812345678";
$iv = "1234567812345678";
$data = "Test string";

$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $privateKey, $data, MCRYPT_MODE_CBC, $iv);

echo(base64_encode($encrypted));

Result: iz1qFlQJfs6Ycp+gcc2z4w== 
```

当我尝试使用下面的函数在 Java 中解密这个结果时，我得到的只是 ì�š@ÔBKxnfÈ~¯Ô'M 而我期待“测试字符串”。有什么想法我错了吗？谢谢

```
public static String decrypt() throws Exception{
    try{
        String Base64EncodedText = "iz1qFlQJfs6Ycp+gcc2z4w==";
        String decodedText = com.sun.xml.internal.messaging.saaj.util.Base64.base64Decode(Base64EncodedText);
        String key = "1234567812345678";
        String iv = "1234567812345678";

        javax.crypto.spec.SecretKeySpec keyspec = new javax.crypto.spec.SecretKeySpec(key.getBytes(), "AES");
        javax.crypto.spec.IvParameterSpec ivspec = new javax.crypto.spec.IvParameterSpec(iv.getBytes());

        javax.crypto.Cipher cipher = javax.crypto.Cipher.getInstance("AES/CBC/NoPadding");
        cipher.init(javax.crypto.Cipher.DECRYPT_MODE, keyspec, ivspec);
        byte[] decrypted = cipher.doFinal(decodedText.getBytes());

        String str = new String(decrypted);

        return str;

    }catch(Exception e){
        return null;
    }   
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T01:01:06.910

编辑：从 Java 8 开始，Java 现在包括一个可接受的 Base64 类，[`java.util.Base64`](https://docs.oracle.com/javase/8/docs/api/java/util/Base64.html).

* * *

这条线

```
String decodedText = com.sun.xml.internal.messaging.saaj.util.Base64.base64Decode(Base64EncodedText); 
```

看起来不对。相反，请使用[apache commons 编解码器](http://commons.apache.org/codec/)类或[Harder base64](http://iharder.sourceforge.net/current/java/base64/)类。此外，mcrypt 使用的默认填充，零填充，可以说是错误的，并且很难在其他语言中使用结果。[mcrypt_encrypt 网页](http://www.php.net/manual/en/function.mcrypt-encrypt.php)的用户评论部分提供了如何执行此操作的示例。

这是一个小例子，它使用 apache commons 类来解密你的字符串。

```
import java.nio.charset.Charset;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.Hex;

public class AESToy3 {

    private static final Charset ASCII = Charset.forName("US-ASCII");

    public static void main(String[] args) throws Exception {
        String base64Cipher = "iz1qFlQJfs6Ycp+gcc2z4w==";
        byte [] cipherBytes = Base64.decodeBase64(base64Cipher);
        byte [] iv = "1234567812345678".getBytes(ASCII);
        byte [] keyBytes = "1234567812345678".getBytes(ASCII);

        SecretKey aesKey = new SecretKeySpec(keyBytes, "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/NOPADDING");
        cipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(iv));

        byte[] result = cipher.doFinal(cipherBytes);
        System.out.println(Hex.encodeHexString(result));
    }

} 
```

这会产生以下输出：

```
5465737420737472696e670000000000 
```

当解码为 ASCII 并删除尾随零时，它会给你`Test string`

# c# - 在单独的线程中侦听控制台应用程序的输入

> ID：10842352
> 
> 赞同：4
> 
> 时间：2012-05-31T22:53:46.283
> 
> 标签：c#, console-application

我目前正在处理具有 Console.CancelKey EventHandler 事件处理程序的 ac# 项目。我遇到的问题是，如果用户按下 Ctrl+C 来停止应用程序，则事件不会被触发，因为我认为它太忙于处理其他事情来处理事件。如果应用程序是安静的，即不需要做太多工作，则 Ctrl+C 会被捕获并运行该事件处理程序。

我假设我需要在一个单独的线程中监听事件处理程序以便理解它，但我将如何去做。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:06:00.713

您可以尝试设置[`Console.TreatControlCAsInput`](http://msdn.microsoft.com/en-us/library/system.console.treatcontrolcasinput.aspx)，这会阻止 CTRL+C 组合甚至在操作系统级别进行处理。需要注意的是，如果用户确实想要停止应用程序，他们要么必须使用 CTRL+BREAK，要么必须在运行事件处理程序后手动强制关闭应用程序。

# spring - grails hdiv 集成 - 会话成功但得到 HDIV_PARAMETER_NOT_EXISTS 异常

> ID：10842354
> 
> 赞同：0
> 
> 时间：2012-05-31T22:53:52.327
> 
> 标签：spring, grails, spring-security, hdiv

我正在尝试将 hdiv 集成到 grails 2.0.3 应用程序中。

我已经在我的 grails 应用程序中对 spring mvc 的 hdiv-reference 文档中提到的所有更改进行了更改。当应用程序启动时，我可以看到 hdiv 验证器过滤器已初始化并创建了 Hdiv 会话。

任何帮助表示赞赏

巴拉

在我的 applicationcontext.xml 我有

```
<bean id="requestDataValueProcessor" class="org.hdiv.web.servlet.support.HdivRequestDataValueProcessor" /> 
```

我的 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5"
         metadata-complete="true"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>/@grails.project.key@</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml,/WEB-INF/hdiv-config.xml,/WEB-INF/hdiv-validations.xml</param-value>
    </context-param>

    <context-param>
        <param-name>webAppRootKey</param-name>
        <param-value>@grails.project.key@</param-value>
    </context-param>

  <!-- HDIV Validator Filter -->
    <filter>
        <filter-name>ValidatorFilter</filter-name>
        <filter-class>org.hdiv.filter.ValidatorFilter</filter-class>
    </filter>

    <filter>
        <filter-name>sitemesh</filter-name>
        <filter-class>org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter</filter-class>
    </filter>

    <filter>
        <filter-name>charEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetBeanName</param-name>
            <param-value>characterEncodingFilter</param-value>
        </init-param>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>charEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>sitemesh</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <filter-mapping>
        <filter-name>ValidatorFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener</listener-class>
    </listener>

<!-- HDIV Listener class -->
    <listener>
        <listener-class>org.hdiv.listener.InitListener</listener-class>
    </listener>

    <!-- Grails dispatcher servlet -->
    <servlet>
        <servlet-name>grails</servlet-name>
        <servlet-class>org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- The Groovy Server Pages servlet -->
    <servlet>
        <servlet-name>gsp</servlet-name>
        <servlet-class>org.codehaus.groovy.grails.web.pages.GroovyPagesServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>gsp</servlet-name>
        <url-pattern>*.gsp</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <!--
        The order of the welcome pages is important.  JBoss deployment will
        break if index.gsp is first in the list.
        -->
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>index.gsp</welcome-file>
    </welcome-file-list>

    <jsp-config>
        <taglib>
            <taglib-uri>http://java.sun.com/jsp/jstl/core</taglib-uri>
            <taglib-location>/WEB-INF/tld/c.tld</taglib-location>
        </taglib>
        <taglib>
            <taglib-uri>http://java.sun.com/jsp/jstl/fmt</taglib-uri>
            <taglib-location>/WEB-INF/tld/fmt.tld</taglib-location>
        </taglib>
        <taglib>
            <taglib-uri>http://www.springframework.org/tags</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring.tld</taglib-location>
        </taglib>

        <taglib>
                    <taglib-uri>http://grails.codehaus.org/tags</taglib-uri>
                    <taglib-location>/WEB-INF/tld/grails.tld</taglib-location>
                </taglib>        
        <taglib>
            <taglib-uri>http://www.springframework.org/tags/form</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring-form.tld</taglib-location>
        </taglib>
    </jsp-config>

</web-app> 
```

我的 hdiv-config.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:hdiv="http://www.hdiv.org/schema/hdiv"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.hdiv.org/schema/hdiv http://www.hdiv.org/schema/hdiv/hdiv.xsd">

    <hdiv:config errorPage="/error.jsp">
        <hdiv:startPages>/,/attacks/.*,/index.gsp</hdiv:startPages>
    </hdiv:config>

</beans> 
```

但是我看到一个错误

```
 2012-05-31 15:10:22,704 [pool-5-thread-1] DEBUG filter.ValidatorFilter  - Initializing filter 'ValidatorFilter'
    2012-05-31 15:10:22,705 [pool-5-thread-1] DEBUG filter.ValidatorFilter  - Filter 'ValidatorFilter' configured successfully
| Server running. 
2012-05-31 15:10:32,912 [http-bio-8080-exec-2] INFO  listener.InitListener  - HDIV's session created:39414F37F6E68615298D1B7B6FD4B3A0
2012-05-31 15:10:32,925 [http-bio-8080-exec-2] INFO  **logs.Logger  - HDIV_PARAMETER_NOT_EXISTS;/TestHdiv/author/index;_HDIV_STATE_;null;0:0:0:0:0:0:0:1;0:0:0:0:0:0:0:1;user**
2012-05-31 15:10:32,925 [http-bio-8080-exec-2] DEBUG dataComposer.DataComposerMemory  - The page [14] has no states, is not stored in session
2012-05-31 15:10:32,985 [http-bio-8080-exec-3] DEBUG dataComposer.DataComposerMemory  - The page [15] has no states, is not stored in session 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:21:24.953

根据HDIV的[安装文档，可以试试这个：](https://github.com/hdiv/hdiv/wiki/07.-Installation-and-Configuration)

```
<filter-mapping>
    <filter-name>ValidatorFilter</filter-name>
    <!-- Grails dispatcher servlet -->
    <servlet-name>grails</servlet-name>
</filter-mapping> 
```

您可能还需要添加 gsp servlet 映射，但我会先尝试使用 grails 前端控制器。

```
<filter-mapping>
    <filter-name>ValidatorFilter</filter-name>
    <!-- Grails dispatcher servlet -->
    <servlet-name>grails</servlet-name>
    <!-- Groovy Server Pages servlet -->
    <servlet-name>gsp</servlet-name>
</filter-mapping> 
```

# .net - 在 VB.net 中以表单形式显示 PDF

> ID：10842357
> 
> 赞同：4
> 
> 时间：2012-05-31T22:54:14.783
> 
> 标签：.net, vb.net

当我在 VB.net 中使用 AxAcroPDF1 在表单中打开 PDF 时，它给了我一个错误。这只发生在 Windows 7 64 位上。我被告知要编译为 x86 应用程序，但我不能这样做，因为程序中有几个其他 DLL 不是 64 位特定的，因此构建失败。

我也尝试在 VB.net 中使用浏览器，它在 XP 中打开正常，位寡妇 7 它打开一个新窗口并且它被最大化，因此后面的内容被隐藏

关于如何在 win xp 和 Win 7、32 位和 64 位的表单中打开 PDF 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:20:14.037

我遇到了完全相同的问题，只是通过强制我的解决方案中的每个项目编译为 32 位来解决它。如果有更好的方法，我会很感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:34:09.183

我通过使用浏览器打开 PDF 解决了这个问题。browser1.navigate("路径+文件名")

# php - php 和 yii 中的 mvc 最佳实践视图/控制器/模型

> ID：10842360
> 
> 赞同：1
> 
> 时间：2012-05-31T22:54:19.677
> 
> 标签：php, model-view-controller, yii

这是一个最佳实践问题，而不是特定问题。我对 MVC 方法和 Yii 相当陌生，并且已经在应用程序上开发了一段时间。我一直在讨论最佳实践以及将什么放入哪个文件（控制器、模型、视图、助手等），但是我还没有找到任何具体的示例。

我目前有这样的电话：`Model::function()`在我的视图文件中以及像这样的检查`$var = app()->request->getParam(value, false);`

我在我的控制器文件中有调用，例如 Model::function() 和 Model::model()->scope1()->scope2()->findAll() 我也认为我的控制器文件有点厚，但不是确定如何以及在何处放置一些臃肿，我一直在阅读有关 DRY 的内容，我认为可以说我并没有完全干燥我的代码。你能否给我一个更清晰的图片，让我更清楚地了解去哪里，以及建议或原因:) 感谢任何建议，在此先感谢。

这是视图文件中的示例调用

```
<?php
$this->pageTitle = 'Edit Action';
$this->subTitle = '<i>for</i> <b>' . Vendors::getName($_GET['vendor']) . '</b>';
?>

<div class="wrapper">
<?php echo $this->renderPartial('_form', array('model' => $model)); ?>
</div> 
```

getName 是我在模型中的函数，这是在视图中调用函数的好方法吗？

另一个示例视图文件：

```
<div class="wrapper">
    <?php 

    if($this->action->id != 'create') {
        $this->pageTitle = "New Media Contact";
         echo $this->renderPartial('_form', array('model'=>$model));
    } else {
        $this->pageTitle = "New Vendor";
         echo $this->renderPartial('_form', array('model'=>$model));
    }
    ?>
</div> 
```

$model 在控制器中设置了类型......同样的问题......可以这样做......更清洁......？在 MVC 和可重用性/DRY 方面更好？

**编辑** 在阅读了这里的一些回复之后，尤其是。@Simone 我重构了我的代码，并想分享它现在的样子......

```
public function actionCreate() {
    $model = new Vendors;

    // Get and Set request params
    $model->type = app()->request->getParam('type', Vendors::VENDOR_TYPE);
    $vendorsForm = app()->request->getPost('Vendors', false);
    // Uncomment the following line if AJAX validation is needed
    $this->performAjaxValidation($model);
    if ($vendorsForm) {
        $model->attributes = $vendorsForm;
        if ($model->save())
            $this->redirect(array('/crm/vendors', array('type' => $model->type)));
    }
    $model->categories = Categories::getAllParents($model->type);
    $this->pageTitle = 'New ' . Lookup::item('VendorType', $model->type);
    $this->render('create', array(
        'model' => $model,
    ));
} 
```

和视图 create.php

```
<div class="wrapper">
<?php echo $this->renderPartial('_form', array('model'=>$model));?> 
```

感谢所有回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:30:38.933

我对 Yii 框架不太熟悉，但可以就你提到的一些具体事情提供一些建议：

不要太拘泥于“最佳实践”，因为所有设计模式 MVC 都可以实现，并且在某些情况下，不同的开发人员可以以多种不同的方式进行解释。那么这是什么意思？这意味着尽可能多地阅读 MVC，然后只需试一试 :o) 当你遇到问题时，你很快就会发现哪些插槽在哪里以及为什么会出现问题（通常是“这在哪里做的”属于，控制器或模型？...'。

至于去哪里，您可以谷歌/搜索stackoverflow或阅读无数书籍，许多关于应该做什么和去哪里的解释，但是从您提供的代码片段中，我建议：

**查看文件**：（除非这是 Yii 特定的东西）在我看来你的查看文件有点脏。您正在直接与模型交谈（这实际上是 MVC 的经典方法，而不是某些 PHP 应用程序采用“控制器是唯一允许与模型交谈”的方法），但您的视图似乎正在尝试获取请求数据直接，对我来说，这不应该在视图附近的任何地方。控制器应该处理请求，使用模型进行验证，然后将输出传递到视图中。

**模型：**从小片段来看，这似乎还可以，但总的来说，要记住的重要一点是模型！= 数据库（尽管有人建议它是）。

**控制器：**从您的代码段中看起来还是不错的，但是要解决控制器中的膨胀问题，如果没有看到您的控制器之一，就很难提供建议。始终值得考虑的一件事是服务的使用。基本上，一项服务可以通过封装大量重复/复杂的模型内容来大大简化您的控制器。因此，无需在控制器中调用单独的验证和持久性模型，您只需实例化一个服务类，这可能只是调用一个方法的情况（通常返回一个布尔值以向控制器指示操作的成功或失败）然后你的控制器只需要处理它最擅长（并且应该只做）应用程序的流程（即重定向到另一个页面，显示错误等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T04:13:15.447

我将向您展示一个重构代码的示例。这是你的代码

```
<div class="wrapper">
    <?php 
        if($this->action->id != 'create') {
            $this->pageTitle = "New Media Contact";
            echo $this->renderPartial('_form', array('model'=>$model));
        } else {
            $this->pageTitle = "New Vendor";
            echo $this->renderPartial('_form', array('model'=>$model));
        }
    ?>
</div> 
```

第一个问题是：为什么要用renderPartial 写两次同一行？第一次重构：

```
<div class="wrapper">
<?php
    if($this->action->id != 'create') {
        $this->pageTitle = "New Media Contact";
    } else {
        $this->pageTitle = "New Vendor";
    }
    echo $this->renderPartial('_form', array('model'=>$model));
?>
</div> 
```

现在第二步：

```
<?php $this->pageTitle = $this->action->id != 'create' ? "New Media Contact" "New Vendor"; ?>

<div class="wrapper">
 <?php echo $this->renderPartial('_form', array('model'=>$model)); ?>
</div> 
```

FOR ME 更具可读性。我觉得有很多最佳实践。但可能会成为在不良环境中使用的不良做法。所以... 重写代码真的有用吗？对我来说是的！因为我的目标是代码的可维护性。易于阅读，易于管理。但是你需要找到你的标准或你的团队标准。另外，我更喜欢在控制器中移动任何类型的逻辑。例如，我可以在控制器中设置默认 pageTitle 并在 actionCreate 方法中重新定义它：

```
class SomeController extends CController
{

    public $pageTitle = "New Vendor";

    function actionCreate ()
    {
        $this->setPageTitle("New Media Contact")
        $this->render('view');
    }

} 
```

我的视图文件将变为：

```
<div class="wrapper">
    <?php echo $this->renderPartial('_form', array('model'=>$model)); ?>
</div> 
```

我想我们要明白事物的责任：视图只是一个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:18:15.290

只需将视图视为**仅**显示数据的组件。它不应该进行数据库调用、与模型交互、创建新变量（或很少）等。如果您想进行检查或使用某些数据创建 HTML 块等，请为此目的使用帮助程序。
视图将显示的数据将来自控制器。

控制器是在你的应用程序中完成大部分工作的*大师*：它会回答请求，在需要时向模型询问数据，将数据传递给视图并呈现它等等。

在您的第一个示例中，只需将`Vendors::getName($_GET['vendor'])`变量保存在控制器中，然后将其传递给视图。
此外，如果您不需要 all`model`的数据，请不要传递整个对象。

关于您的第二个片段，首先您可以将`echo`s 从`if`语句中移出，因为它们是相同的。
一件好事是`if ($this->action->id != 'create')`在您的控制器中进行检查，并为您的视图提供一个简单的布尔值：

```
if ($this->action->id != 'create') { // not sure if $this->action->id would remain the same, I don't know Yii
    $media = true;
    // or 
    // $page = 'media';
} else {
    $media = false;
    // or 
    // $page = 'vendor';
} 
```

并根据控制器返回的值渲染部分。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-31T23:00:43.537

在我看来，没有“最佳实践”。只要您不是在团队中工作或希望将您的脚本作为开源发布（必须有数十人使用它），就可以根据您的喜好和需要使用该框架。即使您与其他人一起编写代码，也没有“上帝赐予”的规则。

如果您“真的被允许”在视图中使用静态函数，那么还有比问题更重要的事情。

# java - 将大量 XML 行与数据库表记录进行比较 - 自定义要求

> ID：10842365
> 
> 赞同：1
> 
> 时间：2012-05-31T22:54:47.353
> 
> 标签：java, database, xml-parsing, compare, stax

## 问题

我们有一个类似 XML（它有一些需要过滤的非 unicode）数据，

```
<row><div>1234</div><dept>ABCD</dept></row>
<row><div>5678</div><dept>EFGH</dept></row> 
```

*为了便于理解，仅提及 2 个列标签。实际上它每个都有 20 多个列标签*

XML 数据作为记录直接插入到 Oracle 模式表中，如下所示：

```
div_c  qdept
1234   ABCD
5678   EFGH 
```

## 更多信息

1.  XML 文件超过 9 Gig，可在 FTP 中使用。
2.  数据库表列名称可能与 XML 列标记名称不同。
3.  可能必须添加/定义一些规则来过滤掉行。

## 问题

解析这个巨大的 XML 并找出该记录是否存在于数据库表中的合适方法是什么？有没有可用的开源工具？

## 我在尝试什么

*   使用带有无效字符过滤器 (FilterReader) 的默认实现 (XMLInputFactory) 编写了 StAX 解析器
*   计划将 XML 拆分为块
*   让并发线程处理每个块
*   每个线程都会生成一个查询来检查数据库中是否存在（我知道这很荒谬）
*   创建一个连接池并由每个线程执行这些查询

我知道这确实是我正在做的最糟糕的事情，而且需要数年时间才能完成，我真的需要一些建议，比如是否使用任何 ORM 以简化检查并加快 XML 解析。

像这样的一些建议真的对我有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:08:34.317

是的。我认为您使用 StAX 是正确的。您肯定想要流式传输，StAX 似乎拥有用于流式传输 XML 的最简单 API。我不会马上去 ORM。大多数 ORM 是往返数据。它可以节省您进行机械改造的工作。当您拥有非常结构化的数据但两个模式之间的映射不是很复杂时，这会很好。在这里，您尝试将数据从一种格式导入另一种格式。听起来您的大型数据集具有相当简单的架构，但映射是更复杂的部分。使用自定义代码。Pawel 对临时表的建议听起来不错。尝试在一次对整个数据集（旧的和导入的）操作的存储过程中进行尽可能多的处理。您不想继续将这些行从数据库来回传输到您的应用程序。

# asp.net-mvc-3 - mvc 3 中的 PayPal 汇款请求自动化

> ID：10842370
> 
> 赞同：1
> 
> 时间：2012-05-31T22:56:35.083
> 
> 标签：asp.net-mvc-3, paypal

我的页面上有一个按钮（ASP.NET MVC 3）重定向到 PayPal 服务。

我想在我的系统中自动化一些流程，并且我想允许用户使用 PayPal 发送汇款请求。

但是，是否可以将收件人的电子邮件地址、金额和请求付款类型（商品/服务）传递给 PayPal 服务（通过 URL？）？

用户登录后，所有这些字段都将被填写。我对这种情况完全陌生，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:39:02.173

您需要在您的网站中创建结帐表格并使用贝宝 IPN。

创建结帐表单时，您需要将用户提供给您的所有值都存储在数据库中。然后使用 IPN 向贝宝发送您想要的信息。

IPN 会回来告诉你交易是否被批准。

这是一个很好的[教程](http://www.youtube.com/watch?v=67TtKPC-qmE)。

# git - 撤消“回滚到此提交”

> ID：10842371
> 
> 赞同：7
> 
> 时间：2012-05-31T22:56:47.220
> 
> 标签：git

我是 git 和 github 的新手，我遇到了一些麻烦。

我正在使用[github for windows](https://github.com/blog/1127-github-for-windows)来管理我拥有的一个小项目。我想我丢失了最近对代码所做的一些更改。我所做的是：

1.  更改了一些文件。
2.  不小心提交了更改。
3.  还原了提交。
4.  然后我按下“回滚到这个提交”。

现在所有更改都消失了，包括我添加的一些新文件。我可以救他们吗？我还安装了 git（命令行），所以我可以执行任何你认为有帮助的命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T23:06:40.193

git 的优点之一是它真的很难丢失任何东西，除非你正在做一些奇怪的事情。

您需要做的是找到代表您想要成为的状态的点。

假设您检查 git log 并确定 hash 01dbc4... 是您想要返回的时间点。为此，只需执行以下操作：

```
git reset --hard 01dbc4 
```

请注意，如果您有未提交的更改，则需要先存储它们。

现在，如果该提交缺少您想要的额外文件并且它们在稍后的提交中，它会变得有点复杂。但是您可以做的是将您的主分支设置为您想要开始的点，然后将一个分支设置为具有新文件的点。然后，您可以将缺少的信息从新分支复制或选择性地合并到您的主分支，使您的主分支看起来像您想要的那样。

请注意，即使您像在上面使用 git reset --hard 和孤立的后续提交时那样移动分支的指针，您也可以通过检查`git reflog`和重置它们或创建指向它们的分支来取回它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T10:34:01.523

请注意，现在（2013 年 3 月），使用 GitHub for Windows，您可以撤消提交，而无需键入任何 git 命令：

请参阅“ [Windows 版 GitHub 中的撤消按钮](https://github.com/blog/1441-undo-button-in-github-for-windows)”

> 我们添加**了对 Discards、Commits、Rollbacks 和 Merges 的 Undo 支持**：

![撤消按钮](../Images/31eafcaf4ee664466c8148274077b75d.png)

# c# - 为什么使用的内存量在增加？

> ID：10842380
> 
> 赞同：3
> 
> 时间：2012-05-31T22:58:10.527
> 
> 标签：c#, memory

```
private void Draw(){
     int width  = Screen.PrimaryScreen.Bounds.Width;
     int height = Screen.PrimaryScreen.Bounds.Height;
     Bitmap image= new Bitmap(width, height);
     Graphics gr =  Graphics.FromImage(image);
     gr.CopyFromScreen(0, 0, 0, 0, new Size(width, height));
     Random rnd = new Random();

     gr.DrawEllipse(new Pen(Color.Red, rnd.Next(100)), rnd.Next(300), rnd.Next(100), rnd.Next(600), rnd.Next(1000));
     Point[] p = new Point[3];
     p[0] = new Point(rnd.Next(30),  rnd.Next(60));
     p[1] = new Point(rnd.Next(100), rnd.Next(260));
     p[2] = new Point(rnd.Next(30),  rnd.Next(10));
     gr.DrawPolygon(Pens.AliceBlue, p);
     gr.DrawBeziers(Pens.Yellow, p);
     pcImageBox.Image = image;
} 
```

当我每 300 毫秒使用`Timer`并调用该`Draw()`方法时，一切正常，但是当我查看进程管理器时，我的项目使用更多内存（内存每 300 毫秒增加一次）

也许我应该使用垃圾收集器或使用`p = null;`等。我该如何解决这个问题？

谢谢你的帮助，对不起我的英语不好..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:00:02.210

你从来没有处理过你的`Graphics`对象。

使用`using`，例如：

```
using (Graphics gr =  Graphics.FromImage(image)) {
     ...
}
pcImageBox.Image = image; 
```

`Bitmap`另外，不要每帧都创建一个全新的。将旧的保存在成员变量中，并在下次调用时覆盖它。只有在屏幕尺寸发生变化时才制作新的 ( `Screen.PrimaryScreen.Bounds != image.Size`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T04:03:26.587

你想要的更好的方法可能是：

[缓冲图形](http://msdn.microsoft.com/en-us/library/system.drawing.bufferedgraphics)

# javascript - 加载 show_ads.js 一次

> ID：10842382
> 
> 赞同：9
> 
> 时间：2012-05-31T22:58:31.703
> 
> 标签：javascript, adsense

所以我们在我们的网站上投放谷歌广告。

我开始思考，每个广告块（各种尺寸）都会加载..

```
<script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

例如：

```
<script type="text/javascript"><!--
            google_ad_client = "ca-pub-xxxxxxxxxxxxxx";
            /* ad served */
            google_ad_slot = "xxxxxxxxx";
            google_ad_width = 728;
            google_ad_height = 90;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script> 
```

和其他广告，不同的插槽（ id's ）amd 尺寸，在同一页面上也加载：

```
http://pagead2.googlesyndication.com/pagead/show_ads.js 
```

每一次。因此，一个带有三个广告的页面会加载完全相同的 js 文件 3 次..

删除该脚本文件，将其一次添加到头部，对我们不起作用.. 广告只是不显示。

那么有没有一种方法可以只加载一次 show_ads.js 文件/页面加载？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T00:01:55.610

Google 广告脚本使用`document.write()`，这意味着该脚本必须位于您想要广告的 HTML 中的位置。

但是，不要担心：*show_ads.js*文件只会被您的浏览器下载一次。随后`<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js">`的 s 将从缓存中加载。

事实上，标题告诉您的浏览器它可以直接从缓存中加载文件下一小时，因此无论查看多少页面，每个会话`Cache-Control`都应该只访问一次*pagead2.googlesyndication.com 。*

# solr - Solr 过度记录和自动升温 - 这正常吗？

> ID：10842387
> 
> 赞同：0
> 
> 时间：2012-05-31T22:59:20.393
> 
> 标签：solr

我对 Solr 很陌生，所以如果这是一个愚蠢的问题，我深表歉意 :) 我有一个 Solr 进程正在运行并将内容记录到文件中。我相信日志级别设置为 INFO。不管怎样，即使没有真正搜索到任何内容，它仍然会疯狂记录。日志主要包含以下记录：

```
INFO: autowarming result for Searcher@7c35a3be main
        queryResultCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
May 31, 2012 6:53:45 PM org.apache.solr.search.SolrIndexSearcher warm
INFO: autowarming Searcher@7c35a3be main from Searcher@7dde0950 main
        documentCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=6188938,cumulative_hits=2441,cumulative_hitratio=0.00,cumulative_inserts=6186497,cumulative_evictions=4581707}
May 31, 2012 6:53:45 PM org.apache.solr.search.SolrIndexSearcher warm
INFO: autowarming result for Searcher@7c35a3be main
        documentCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=6188938,cumulative_hits=2441,cumulative_hitratio=0.00,cumulative_inserts=6186497,cumulative_evictions=4581707}
May 31, 2012 6:53:45 PM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener sending requests to Searcher@7c35a3be main
May 31, 2012 6:53:45 PM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener done.
May 31, 2012 6:53:45 PM org.apache.solr.core.SolrCore registerSearcher
INFO: [] Registered new searcher Searcher@7c35a3be main
May 31, 2012 6:53:45 PM org.apache.solr.search.SolrIndexSearcher close
INFO: Closing Searcher@7dde0950 main
        fieldValueCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
        filterCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
        queryResultCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
        documentCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=6188938,cumulative_hits=2441,cumulative_hitratio=0.00,cumulative_inserts=6186497,cumulative_evictions=4581707}
May 31, 2012 6:53:45 PM org.apache.solr.update.processor.LogUpdateProcessor finish 
```

这是正常的吗？这似乎给系统带来了相当大的负担（没什么戏剧性的，但仍然如此）。

我只是想了解它到底在做什么以及为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:24:23.197

默认情况下，日志记录级别是信息。
当 solr 加载内核时，它将加载内核的所有配置文件并自动预热缓存，所有这些都将在日志文件中注销。

[配置日志记录](http://lucidworks.lucidimagination.com/display/solr/Configuring+Logging)可以帮助您将日志记录配置到您需要的级别。

您可以在 solrconfig.xml 配置文件中为 Solr 配置自动升温。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:20:20.003

恕我直言，在生产环境中，在您遇到问题之前，您应该使用 WARNING 级别（就像应用程序服务器一样）。

您可以通过 Solr 管理控制台配置日志记录（对于本地 Jetty URL 将是：）`http://localhost:8983/solr/admin/logging`，并且可以分别为每个包/类完成。

日志记录级别为：

*   最好的
*   美好的
*   配置
*   信息
*   警告
*   严重
*   离开

如果不设置，则使用 INFO。

# c - 在简单的 UNIX Shell 中实现历史的问题

> ID：10842389
> 
> 赞同：0
> 
> 时间：2012-05-31T22:59:29.233
> 
> 标签：c, unix

我正在尝试为一个简单的 shell 实现历史功能。历史记录应该保存最近执行的 10 个命令。我把我的代码放在下面，但我遇到了一些问题。

首先，当我输入一个（或两个）命令并输入`history`以显示历史记录时，什么也没有显示。但是，当我输入更多命令时，会显示整个历史记录（就像它应该显示的那样），但每个历史记录索引旁边都会显示一串零。

我做错了什么，我该如何解决这个问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define MAX_LINE 80 /* 80 chars per line, per command, should be enough. */

char *history[10][MAX_LINE];
int placePointer;

/**
 * setup() reads in the next command line, separating it into distinct tokens
 * using whitespace as delimiters. setup() sets the args parameter as a 
 * null-terminated string.
 */

void setup(char inputBuffer[], char *args[],int *background)
{
    int length, /* # of characters in the command line */
        i,      /* loop index for accessing inputBuffer array */
        start,  /* index where beginning of next command parameter is */
        ct;     /* index of where to place the next parameter into args[] */

    ct = 0;

    /* read what the user enters on the command line */
    length = read(STDIN_FILENO, inputBuffer, MAX_LINE);  

    start = -1;
    if (length == 0)
        exit(0);            /* ^d was entered, end of user command stream */
    if (length < 0){
        perror("error reading the command");
        exit(-1);           /* terminate with error code of -1 */
    }

    /* examine every character in the inputBuffer */
    for (i = 0; i < length; i++) { 
        switch (inputBuffer[i]){
        case ' ':
        case '\t' :               /* argument separators */
            if(start != -1){
                args[ct] = &inputBuffer[start];    /* set up pointer */
                ct++;
            }
            inputBuffer[i] = '\0'; /* add a null char; make a C string */
            start = -1;
            break;

        case '\n':                 /* should be the final char examined */
            if (start != -1){
                args[ct] = &inputBuffer[start];     
                ct++;
            }
            inputBuffer[i] = '\0';
            args[ct] = NULL; /* no more arguments to this command */
            break;

        case '&':
            *background = 1;
            inputBuffer[i] = '\0';
            break;

        default :             /* some other character */
            if (start == -1)
                start = i;
        } 
    }    
    args[ct] = NULL; /* just in case the input line was > 80 */
} 

void displayHistory(){
    printf("Display History:\n");
    int i = placePointer;
    int j;
    int counter;
    while(counter < 10) {
        printf("%d: ",counter);
        for (j = 0; j < MAX_LINE; j++) {
          printf("%d",history[i][j]);
        }
        printf("\n");
        i = (i + 1) % 10;
        counter++;
    }
}
/*
void runHistoryAt(int index){
    printf("Run History At:\n");
    char *arg1 = &history[placePointer + index][0];
    char *argLine[MAX_LINE/2+1];
    int j;
    for (j = 0; j < MAX_LINE/2+1; j++) {
      *argLine[j] = history[placePointer + index][j];
    }
    execvp(arg1,argLine);
}*/

int main(void)
{
    char inputBuffer[MAX_LINE]; /* buffer to hold the command entered */
    int background;             /* equals 1 if a command is followed by '&' */
    char *args[MAX_LINE/2+1];/* command line (of 80) has max of 40 arguments */

    while (1){            /* Program terminates normally inside setup */
        background = 0;
        printf("COMMAND->");
            fflush(0);
            setup(inputBuffer, args, &background);       /* get next command */

        /* the steps are:
         (1) fork a child process using fork()
         (2) the child process will invoke execvp()
         (3) if background == 0, the parent will wait, 
            otherwise returns to the setup() function. */

        pid_t pid = fork();
        printf("Fork created.\n");

        if(pid < 0){
            printf("Fork failed.\n");
        }else if(pid == 0){
            if( strcmp(args[0],"history") == 0){ /*  Print History */
                displayHistory();
            }else if(strcmp(args[0],"r") == 0){ /*  r num */
                int index = (int) args[1];
                /*runHistoryAt( index - 1);*/
            }else if(strcmp(args[0],"rr") == 0){ /*  Run recent */
                /*runHistoryAt(0);*/
            }else{  /*  Execute normally */
                printf("executing..., adding to history buffer\n");
                /* Add args to history buffer */
                int j;
                for (j = 0; j < sizeof(args); j++) {
                    history[placePointer][j] = args[j];
                }
                placePointer = (placePointer + 1) % 10;
                /* Execute!  */
                execvp(args[0],args);
            }
        }

        if(background == 0){
            wait(NULL);
        }else{
          setup(inputBuffer, args, &background);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:54:49.173

您的所有`args`指针都是指向您的指针`inputBuffer`，其中包含输入的最新行。因此，当您将 保存`args`到时，`history`您只是在保存指针，而不是实际指向的字符串，它们仍然（仅）在`inputBuffer`. 当您阅读下一条命令时，它会覆盖`inputBuffer`使您保存的所有`history`指针无效——它们现在指向当前命令的某个部分，而不是旧命令。

# android - 在Android上读取短信时不调用ContentObserver的onChange方法

> ID：10842390
> 
> 赞同：6
> 
> 时间：2012-05-31T22:59:30.153
> 
> 标签：android

我在论坛上找了很多资料，以确定我有多少短信没有被阅读。下面的代码似乎适用于收到的消息，但是一旦我真正阅读了消息，就不会调用 ContentObserver 的 onChange。因此，在传入的 SMS 消息上， onChange 被调用并且我得到了正确的号码，但是在阅读了消息后**它没有被调用**。该设备是运行 Android 2.3.6 的三星 Note，未植根。任何帮助将不胜感激。

```
public class UnreadSMSContentObserver extends ContentObserver {
    private static final String myTAG="PhoneInfoSMS";
    private static final Uri SMS_INBOX = Uri.parse("content://sms/inbox");

    private ContentResolver mContentResolver;
    private Handler mHandler;
    public int unreadSMS;
    private static final String TAG = "PhoneInfoSMS";

    public UnreadSMSContentObserver(ContentResolver cr, Handler h) {
        super(null);
        mContentResolver = cr;
        mHandler = h;
    }

    public int getUnreadSMS() {
        if (mContentResolver != null) {
            try {
                Cursor c = mContentResolver.query(SMS_INBOX, null, "read = 0", null, null);
                if (c != null) {
                    unreadSMS = c.getCount(); 
                    c.deactivate();
                    Log.d(TAG, unreadSMS + " unread SMS messages");
                    }
                }
            catch (Exception ex) {
                Log.e("ERROR: " + ex.toString(), "");
            }
        }
        return unreadSMS;
    }

    @Override
    public void onChange(boolean selfChange) {
        Log.d(myTAG, "onChange");
        if (mContentResolver != null) {
            getUnreadSMS();
            mHandler.obtainMessage(PhoneInfoServer.CONTENTO_INFOCHANGED, PhoneInfoServer.CONTENTO_US, unreadSMS).sendToTarget();
            Log.d(myTAG, "done");
        }
    }
} 
```

在清单文件中，我具有以下权限：

```
"android.permission.READ_CONTACTS"
"android.permission.READ_SMS"
"android.permission.GET_ACCOUNTS"
"android.permission.BATTERY_STATS"
"android.permission.BLUETOOTH"
"android.permission.BLUETOOTH_ADMIN"
"android.permission.BROADCAST_SMS"
"android.permission.RECEIVE_SMS"
"android.permission.BROADCAST_SMS"
"android.permission.RECEIVE_MMS" 
```

我在调用服务上设置它的方式是：在我做的服务的 onCreate 中：

```
mContentResolver = this.getContentResolver();
mUnreadSMSContentObserver = new UnreadSMSContentObserver(mContentResolver, mContentObserversHandler); 
```

在我做的服务的 onStartCommand 中：

```
mContentResolver.registerContentObserver(Uri.parse("content://sms/"), true, mUnreadSMSContentObserver);               
mContentResolver.registerContentObserver(Uri.parse("content://sms/inbox/"), true, mUnreadSMSContentObserver); 
```

我只尝试了 content://sms/ 并且只尝试了 content://sms/inbox/ 并且两者都......没有解决问题。

PS 类似的未接电话方法非常完美！

应用程序+服务通过蓝牙将电池数据、未接来电和未读短信发送到基于 Arduino 的设备，该设备将其显示在 LED 屏幕上。为什么？两个原因：首先，这是我为好玩而制作的第一个 Android 程序。第二个是我不会一直在家里随身携带电话，而且通常是在我的家庭办公室里。如果我没有听到它响铃，我仍然可以看到 LED 显示屏告诉我在经过时我有电话或短信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T18:49:38.213

这个解决方案对我有用：

```
 context.getContentResolver().
                registerContentObserver(Uri.parse("content://mms-sms/"), true, smsObserver); 
```

# php - Zend 框架：关于引导程序和应用程序类

> ID：10842391
> 
> 赞同：0
> 
> 时间：2012-05-31T22:59:39.813
> 
> 标签：php, zend-framework

有什么区别：

```
$application = new Zend_Application(...);
$application->bootstrap()->run();

$application = new Zend_Application(...);
$application->run(); 
```

为什么我们需要调用->bootstrape 然后调用->run？为什么不直接调用 application->run 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:53:19.753

来自 Zend Sources 类：Zend_Application，文件：application.php

```
public function bootstrap($resource = null)
{
    $this->getBootstrap()->bootstrap($resource);
    return $this;
}

public function run()
{
    $this->getBootstrap()->run();
} 
```

第一个样本

```
$application = new Zend_Application(...);
$application->bootstrap()->run(); 
```

调用 Zend_Application_Bootstrap_Bootstrap::bootstrap 方法最终加载所有资源。
然后它调用`Zend_Application_Bootstrap_Bootstrap::run()`实际调度请求。

第二个样本

```
$application = new Zend_Application(...);
$application->run(); 
```

根据上面的代码是跳过第一步，所以它会尝试运行（调度请求）而不实际加载资源。这就是 Zend[描述](http://framework.zend.com/manual/en/zend.application.theory-of-operation.html)引导和资源的方式。

# sql-server - SQL Server如何构造子查询以将字段描述加入ID

> ID：10842394
> 
> 赞同：0
> 
> 时间：2012-05-31T22:59:56.737
> 
> 标签：sql-server, join, subquery

我试图返回用更易读的描述值替换记录 ID 的结果。通过 AS 更改列名非常简单，但我认为需要子查询来获取 ID 值（例如 PT1）并获取 Description 值作为替换。

例如，我有一个 table1 有一些列，如：

## 编号| 纸| 涂料 | 创建于 | 类型

1 | pid3 | cid5 | 某个日期| tid2 2 | pid2 | cid8 | 某个日期| tid3 3 | pid1 | cid1 | 某个日期| tid4

然后 table2 有父表中引用 id 的详细信息：

## 编号| 键 | 描述 |

1 | pid3 | 一些用户友好的描述| 1 | pid1 | 其他一些描述| 1 | pid2 | 别的东西|

表三和四类似

我尝试使用 JOIN 链接 Paper ID，但这没有返回任何值

选择 table1.Paper 作为“纸张名称”，table1.Coating，table1.CreatedOn，table1.Type，table2.description FROM table1 JOIN table2 ON table1.Paper = table2.fKey

我的实际查询如图所示，但表名已更改：

```
SELECT PD_ComboRun.RNId AS 'RUN #', PD_ComboRun.RNQty AS Quantity,
       PD_ComboRun.PTId, PD_ComboRun.PSId AS Size, PD_ComboRun.RNType AS 'Run Type',
       PD_ComboRun.PCId AS 'Press Coating', PD_ComboRun.UVFid AS 'UV Finish',
       PD_ComboRun.Notes AS 'Special Instructions', PD_ComboRun.CreatedOn AS 'Date Created', 
       SM_PaperType.PTCode AS Paper, SM_PaperType.PTId AS Expr1
FROM  PD_ComboRun 
LEFT JOIN SM_PaperType ON SM_PaperType.PTId = PD_ComboRun.PTId 
```

有人可以为我指出实现这一目标的正确方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:31:53.283

正如我认为你需要的那样，这非常有效。我对其进行了修改以使用您的表格和字段。

```
DECLARE @PD_ComboRun TABLE(RNId int,RNQty int,PTId varchar(10),
    PSId varchar(10),PCId varchar(10),UVFid varchar(10),createdOn smalldatetime, 
    RNType varchar(10),Notes varchar(MAX))
INSERT INTO @PD_ComboRun
SELECT 1,5,'pid3','psid1','cid5','uvid1',GETDATE(),'tid2',''
UNION ALL
SELECT 2,10,'pid2','psid2','cid8','uvid4',GETDATE(),'tid3','notes'
UNION ALL
SELECT 3,7,'pid1','psid1','cid1','uvid1',GETDATE(),'tid4',''

SELECT * FROM @PD_ComboRun

DECLARE @SM_PaperType TABLE(PTId varchar(10),PTCode varchar(50))
INSERT INTO @SM_PaperType
SELECT 'pid3','some user friendly description'
UNION ALL
SELECT 'pid2','some other description'
UNION ALL
SELECT 'pid1','something else'

SELECT * FROM @SM_PaperType

SELECT t1.RNId AS [Run #], t1.RNQty AS Quantity,
    t1.PTId,t1.PSId AS Size,t1.RNType AS [Run Type], 
    t1.PCId AS [Press Coating], t1.UVFid AS 'UV Finish', 
    t1.Notes AS 'Special Instructions',t1.createdOn AS 'Date Created',
    t2.PTCode AS Paper,t2.PTId AS Expr1
FROM @PD_ComboRun t1 INNER JOIN @SM_PaperType t2 ON t1.PTId=t2.PTId 
```

结果

@表格1

```
1   5   pid3    psid1   cid5    uvid1   2012-05-31 17:45:00 tid2    
2   10  pid2    psid2   cid8    uvid4   2012-05-31 17:45:00 tid3    notes
3   7   pid1    psid1   cid1    uvid1   2012-05-31 17:45:00 tid4 
```

@table2

```
pid3    some user friendly description
pid2    some other description
pid1    something else 
```

@组合 ![在此处输入图像描述](../Images/b14a2e080ab7a8b3490150abc81e1351.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:02:16.547

```
FROM  Table1 LEFT JOIN Table2 ON Table2.PTId = Table1.PCId 
```

这看起来像确凿的证据，不应该是Table1.PTId吗？鉴于表 2 中的样本数据仅显示了 PTId 的值。也许您正在创建一个通用表，但如果是这种情况，则应重命名 Table2 中的“FK”，以免与 Table1 发生冲突。

# ruby-on-rails - 运行 db:migrate 时出现分段错误

> ID：10842395
> 
> 赞同：3
> 
> 时间：2012-05-31T23:00:01.807
> 
> 标签：ruby-on-rails, ruby

我对 ruby​​ 和 ruby​​ on rails 很陌生，所以我希望有人可以建议我解决这个问题。当我运行 bundle exec db:migrate 它返回如下错误：

> /Library/Ruby/Gems/1.8/gems/dm-core-1.0.0/lib/dm-core.rb:22：警告：已初始化常量混搭（评估）：[BUG]分段错误ruby 1.8.7（2011 -12-28 补丁级别 357) [universal-darwin11.0]

我怀疑这里发生了多个需要，这可能与 ruby​​ 版本的兼容性有关（如果我错了，请纠正我）。有没有人看到过类似的问题？我正在使用 ruby​​gem 1.8.17、rails 3.0.7、bundler 1.0.22 并且没有 rvm。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:07:04.720

```
bundle exec rake db:migrate 
```

你可以试试上面的命令吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:06:18.697

我遇到了类似的问题，以下链接为我回答了这个问题。我知道标题似乎完全在谈论其他事情，但请看一下。

[为什么我不能使用 RVM 在 Lion 上安装 Rails？](https://stackoverflow.com/questions/6170813/why-cant-i-install-rails-on-lion-using-rvm/7884957#7884957)

祝你好运！

# java - 将数据文件转换为 JUnit 的 Java 静态类常量

> ID：10842400
> 
> 赞同：1
> 
> 时间：2012-05-31T23:00:26.640
> 
> 标签：java, xml, parsing, testing, junit

我已经为我的应用程序编写了几个 JUnit 类，但是我现在想将我的测试数据（现在是硬编码的）从代码中分离到一个纯数据文本文件/属性文件/xml/whatever 中。

所以我可以很容易地给出各种测试数据，而无需修改我的 JUnit。

我正在考虑将它们放在一个文本文件中，并在我的 JUnit 套件的最开始使用解析器来解析它，并将所有数据转换为 Java 静态类常量，这样我就可以轻松地在我的 JUnit 中的任何地方引用它.

```
public final class TestDataConstants {

public static final String username = "xbeta";
public static final String password = "test123!";
public static final String authToken = "f17bf9c8-9d38-47af-a053-210130cac6f7";
...
} 
```

现在我知道我可以很容易地为此编写一个解析器，但我要问以前做过这件事的有经验的人 2 个问题

1.  什么格式是最好的并且应该用于存储这些测试数据？
2.  有哪些方法可以将这些测试数据文件转换为 Java 静态类？就像使用 Java 即时生成 Java 代码一样。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:15:32.883

一种方法是使用 .properties 文件，然后在测试开始时将其作为资源加载。

例如，

测试属性：

```
test.username=xbeta
test.password=test123!
test.authToken=f17bf9c8-9d38-47af-a053-210130cac6f7 
```

然后在您的测试中，您可以使用以下内容访问数据，假设 test.properties 文件位于您的类路径中：

```
// note, the .properties is removed in the call to .getBundle
ResourceBundle testProperties = ResourceBundle.getBundle("test"); 
String username = testProperties.getString("test.username");
String password = testProperties.getString("test.password"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T05:24:24.130

`@DataProvider`假设您将数据放在属性文件中，以下是如何使用 a 执行此操作：

```
public class A {

  @Test(dataProvider = "dp")
  public void test(String k, String v) {
    System.out.println("Testing " + k + " " + v);
    Assert.assertEquals(k.toUpperCase(), v);
  }

  @DataProvider
  public Object[][] dp() throws FileNotFoundException, IOException {
    Properties p = new Properties();
    p.load(new FileInputStream(new File("/tmp/a.properties")));
    List<Object[]> result = Lists.newArrayList();
    for (Map.Entry<Object, Object> es : p.entrySet()) {
      result.add(new Object[] { es.getKey(), es.getValue() });
    }
    return result.toArray(new Object[result.size()][]);
  }

  @Test(dataProvider = "dp")
  public void test(String k, String v) {
    System.out.println("Testing " + k + " " + v);
    Assert.assertEquals(k.toUpperCase(), v);
  }
} 
```

属性文件：

```
abc: ABC
def: DEF
ghi: GHI 
```

和输出：

```
Testing abc ABC
Testing def DEF
Testing ghi GHI
PASSED: test("abc", "ABC")
PASSED: test("def", "DEF")
PASSED: test("ghi", "GHI")

===============================================
    Test1
    Tests run: 3, Failures: 0, Skips: 0
=============================================== 
```

请注意，每组参数都会传递给测试方法（因此测试方法被调用了 3 次），并且该测试方法将这些参数声明为常规方法参数。

有关数据提供者的更多详细信息：http: [//testng.org/doc/documentation-main.html#parameters-dataproviders](http://testng.org/doc/documentation-main.html#parameters-dataproviders)

# javascript - pdf.js : 从另一台服务器读取文件

> ID：10842409
> 
> 赞同：2
> 
> 时间：2012-05-31T23:02:04.083
> 
> 标签：javascript, pdf, pdf.js

我使用这个 pdf.js [https://github.com/mozilla/pdf.js/](https://github.com/mozilla/pdf.js/) 库在我自己的网站上呈现 pdf 文件.. 一切正常但是当我尝试从我的 amazon s3 读取文件时不起作用？

如果我将 pdf 文件放在我的服务器中，它可以正常工作（assets/books/my.pdf），但如果我将它放在另一台服务器上则没有。例如我在亚马逊 s3 上的文件：s3.amazonaws.com/MYBUCKET/MYBOOK.pdf

有任何想法吗 ？谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:21:30.793

我是 javascript 的跨域问题

我用这个简单的代码用 mod_rewrite 做到了：

```
RewriteRule ^MAGIC-FOLDER/(.*)$ http://BUCKET.s3.amazonaws.com/$1 [P] 
```

所以在我的 js 文件中，我只是像这样创建链接：

```
MAGIC-FOLDER/MY.PDF 
```

他将从 amazon s3 获取文件：

```
http://BUCKET.s3.amazonaws.com/MY.PDF 
```

实际上我的服务器中没有名为“MAGIC-FOLDER”的文件夹

-_^

# android - 对 CursorLoaders 感到困惑，并将它们与自定义 SQLiteOpenHelper 一起使用

> ID：10842412
> 
> 赞同：6
> 
> 时间：2012-05-31T23:02:20.370
> 
> 标签：android, sqlite, sqliteopenhelper, android-loadermanager, android-cursorloader

我正在编写一个应用程序，允许人们为他们需要执行的各种任务设置警报。我目前的计划是将所有相关数据存储到 SQLite 数据库中。为此，我创建了一个扩展 SQLiteOpenHelper 的类，并在其中填充了处理我期望必须接受的所有 CRUD 的方法。知道在一个线程上进行所有处理通常是一个坏主意，我查找了在线程之间分离工作的方法，并找到了 CursorLoader 和 LoaderManager，这似乎很理想，因为它们在 Android 兼容库中可用。但是，LoaderManager 似乎需要[按照文档中的教程进行的 ContentProvider](http://developer.android.com/guide/topics/fundamentals/loaders.html)，并且我还没有真正看到需要对 ContentProviders 做任何事情，因为我不打算允许其他应用程序访问数据。如果没有 ContentProvider，我不知道我应该如何为我的数据库获取一个 Uri 以输入 CursorLoader。有没有办法让我继续使用扩展 SQLiteOpenHelper 的类并仍然实现 LoaderManager 以允许我将所有填充的 ListFragments 与我的光标保持在 UI 线程之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:05:41.917

> 有没有办法让我继续使用扩展 SQLiteOpenHelper 的类并仍然实现 LoaderManager 以允许我将所有填充的 ListFragments 与我的光标保持在 UI 线程之外？

您只需要一个不同的`Loader`实现，一个不涉及`ContentProvider`. 碰巧[我写了其中一个](https://github.com/commonsguy/cwac-loaderex)。

# ruby - 在 Ruby 中，Class 或 BasicObject 中哪个先出现？

> ID：10842414
> 
> 赞同：4
> 
> 时间：2012-05-31T23:02:38.810
> 
> 标签：ruby, oop, class, inheritance, object

乍一看，我以为`BasicObject`只是“奠定” `Class`（阅读：`Class`继承自`BasicObject`）

```
Class.ancestors #=> [Class, Module, Object, Kernel, BasicObject]
Module.ancestors #=> [Module, Object, Kernel, BasicObject]
Object.ancestors #=> [Object, Kernel, BasicObject]
BasicObject.ancestors #=>[BasicObject] 
```

但事情突然变得非常奇怪。

```
Class.class #=> Class
Module.class #=> Class
Object.class #=> Class
BasicObject.class #=> Class 
```

“啊哈！我想。”我们真的在做一个实例`Class`：`BasicObject = Class.new`。但是后来我记得所有这些实例都位于`Class`底部的层次结构中：`Class < Module < Object < Kernel < BasicObject`.

这些类中的每一个同时是对象。反过来，系统似乎是高度循环的。层次结构从哪里开始，它如何与自身融合以形成 Ruby 的抽象结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-10T03:53:04.893

重新打开僵尸问题以添加我的漂亮图表:)

```
*Class*
  ↓
BasicObject ~= 'Parent class of all classes but "inherits" from [Class] - causing an interrelated loop'
  ↓
Object      ~= Class.new(BasicObject) {}
  ↓
Module      ~= Class.new(Object) {}
  ↓
*Class*     ~= Class.new(Module) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:15:11.737

在 Ruby 中，一切都是对象（< BasicObject），类也是。类是类 Class 的对象。类 Object 的对象不一定是类。但是，Object 类必然是一个类，BasicObject 类也是如此。明白了吗？不？让我们继续前进。（正如马茨在他的介绍中所说：）））

（换句话说，你做对了。）

# python - 用于瞬态使用的 django 模型实例变量

> ID：10842416
> 
> 赞同：10
> 
> 时间：2012-05-31T23:02:59.823
> 
> 标签：python, django

我想为我的模型子类创建一些实例变量，但是当将对象保存到数据库时，我不想要该变量的表列。我在某些地方读到，您可以通过覆盖**init** () 来做到这一点，就像在其他类中创建普通实例变量一样。这是模型子类的公认方式吗？还有其他方法吗？

模型.py：

```
class MyModel (models.Model):
    name = models.CharField(max_length=300)

    def __init__(self, *args, **kwargs):
        super(MyModel, self).__init__(*args, **kwargs)
        self.tempvar = '' 
```

视图.py：

```
myModel = MyModel()
myModel.tempvar = 'this will not be saved in the database' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:47:57.653

这是一种可以接受的方法，尽管您不需要初始化它，除非您有机会在它不存在时尝试访问它。另外，请考虑您是否应该改用属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-27T05:22:25.467

Python 3 更新：`super()`无需重复类名即可直接调用

```
class MyModel (models.Model):
    name = models.CharField(max_length=300)

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.tempvar = '' 
```

# javascript - 使用 `background:url()` 淡化横幅

> ID：10842418
> 
> 赞同：0
> 
> 时间：2012-05-31T23:03:06.627
> 
> 标签：javascript, jquery, css

我有一个包含在`div`包含我的横幅的标签中的横幅。我想让横幅淡入下一张图像，但不确定如何实现淡入淡出效果。我曾尝试使用 jQuery fadeIn() 但失败了。

我需要使用的原因`background: url()`是因为我希望这个横幅图像在浏览器调整大小时能够愉快地调整大小。我不确定这是否是解决我的问题的最佳方法。

编辑 - 我当前的代码确实交换了横幅中的图像，但没有应用 fadeIn() 效果。控制台不报告任何错误。

CSS：

```
header div#banner {
    background: url(../image/banner/00.jpg) no-repeat center;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    height: 300px;
} 
```

JavaScript：

```
var bannerImages = new Array();
var bannerCounter = 0;

function run() {
    loadBannerImages();
    runBannerTimer();
}

function loadBannerImages() {
    var filePath = "image/banner/";
    bannerImages[0] = filePath + "00.jpg";
    bannerImages[1] = filePath + "01.jpg";
    bannerImages[2] = filePath + "02.jpg";
    bannerImages[3] = filePath + "03.jpg";
    bannerImages[4] = filePath + "04.jpg";
}

function runBannerTimer() {
    var t=setTimeout("swapBannerImage()",2000);
}

function swapBannerImage() {
    $('#banner').fadeIn(1000, function() {
        $('#banner').css('background', 'url(' + bannerImages[bannerCounter] + ') no-repeat center');
    });
    bannerCounter++;

    if (bannerCounter >= bannerImages.length) {
        bannerCounter = 0;
    }

    runBannerTimer();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:09:07.330

您的 setTimeout 不正确；请尝试以下操作：

```
function runBannerTimer() {
    var t=setTimeout(function(){
        swapBannerImage()
    },2000);
} 
```

**编辑**

这是更新的横幅交换功能：

```
function swapBannerImage() {
    $('#banner').fadeOut('slow', function(){
        $('#banner').css('background', 'url(' + bannerImages[bannerCounter] + ') no-repeat center').fadeIn('slow');
    });

    bannerCounter++;

    if (bannerCounter >= bannerImages.length) {
        bannerCounter = 0;
    }

    runBannerTimer();
} 
```

[在此处更新演示](http://jsfiddle.net/6YpjY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:11:56.307

你可以使用多个 div——每个图像一个——并淡入/淡出它们。div 仍然可以`background`像你想要的那样使用 css，你只需要绝对定位它们，这样它们就会出现在另一个之上。但是，要让绝对定位的 div 与父 div 一起调整大小（即获得“令人愉悦的”调整大小效果），您必须像这样设置 css：

```
header div#banner {
    ... /* your background stuff here */
    position: absolute;
    left: 0;
    right: 0;
    height: 300px;
} 
```

请注意，您将同时分配`left`and `right`，这将使其占据父级的整个宽度。并且，确保父母有`position:relative`.

# ios - 在关键初始化期间显示“重试”UIAlertView

> ID：10842424
> 
> 赞同：0
> 
> 时间：2012-05-31T23:04:00.197
> 
> 标签：ios, objective-c, uialertview

在应用程序的初始化过程中，我自然有一些关键的事情需要完成才能让应用程序运行。例如，在这种情况下，我需要获取`AVCaptureDevice`后置摄像头的指针。

因此，如果它失败了（它永远不应该，但你永远不知道），我想`UIAlertView`只显示一个选项，“再试一次”。当用户选择此项时，应用程序将尝试`AVCaptureDevice`再次获取。

问题是我需要等待用户在继续之前按“重试”，但`UIAlertView`不是模态的。

如果只有一段这样的代码，我可以通过`UIAlertViewDelegate`回调处理它。但是由于会有多个像这样的关键初始化部分，我看不出如何使用回调而不会使事情变得非常混乱。

有没有一种优雅的方法来处理这个？

编辑：一些代码：

```
- (void)setup
{
    NSError *error = nil;

    // get all the video devices. (this should be the back camera and the front camera.)
    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

    AVCaptureDevice *backVideoDevice;

    // find the back camera.
    do 
    {
        for (AVCaptureDevice *videoDevice in videoDevices)
        {
            if (videoDevice.position == AVCaptureDevicePositionBack)
            {
                backVideoDevice = videoDevice;

                break;
            }
        }

        if (backVideoDevice == nil)
        {
            // display UIAlertView???
        }

    } while (backVideoDevice == nil);

    // if no back camera was found, then we can't continue.

    AVCaptureDeviceInput *videoDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:backVideoDevice error:&error];

    AVCaptureStillImageOutput *stillImageOutput = [AVCaptureStillImageOutput new];

    AVCaptureSession *captureSession = [AVCaptureSession new];

    if ([captureSession canAddInput:videoDeviceInput])
    {
        [captureSession addInput:videoDeviceInput];
    }

    if ([captureSession canAddOutput:stillImageOutput])
    {
        [captureSession addOutput:stillImageOutput];
    }

    // etc, etc.
} 
```

大多数步骤都需要检查它们是否成功，就像第一个一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:11:45.987

只需有一个这样的初始化方法：

```
- (void)initDevice {
  // If x device is not already initialized
  if (!_x) {
    _x = ...

    if (/* some error with _x initialization */) {
      // Show the alert view
      ...

      // Exit initialization
      return;
    }
  }

  ...
} 
```

并在要开始初始化的地方和 UIAlertViewDelegate 回调中调用此方法。

如果其中一个变量已经初始化，则由于 if 语句，它将不会再次初始化。

您还可以在传递的每个步骤中设置一个名为 step 的 int 变量，并检查 step 变量以了解您需要在哪里继续初始化。

# android - OpenGL ES 2 中的着色器解释

> ID：10842425
> 
> 赞同：0
> 
> 时间：2012-05-31T23:04:16.543
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在从以下网站学习适用于 Android 的 OpenGL ES：http: [//www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

有人可以向我解释什么是着色器。我在网上四处寻找，但解释非常混乱。与片段着色器相比，顶点着色器是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:11:24.853

来自[维基百科](http://en.wikipedia.org/wiki/Shader)：

> 像素着色器，也称为片段着色器，计算每个像素的颜色和其他属性。
> 
> 像素着色器的范围从始终输出相同的颜色到应用照明值，再到进行凹凸贴图、阴影、镜面高光、半透明和其他现象。
> 
> 它们可以改变像素的深度（用于 Z 缓冲），或者在多个渲染目标处于活动状态时输出一种以上的颜色。
> 
> 单独的像素着色器不能产生非常复杂的效果，因为它只对单个像素进行操作，而不知道场景的几何形状。

然而：

> 顶点着色器为图形处理器的每个顶点运行一次。目的是将每个顶点在虚拟空间中的 3D 位置转换为它出现在屏幕上的 2D 坐标（以及 Z 缓冲区的深度值）。
> 
> 顶点着色器可以操纵位置、颜色和纹理坐标等属性，但不能创建新顶点。
> 
> 顶点着色器的输出进入管道中的下一个阶段，如果存在则为几何着色器，否则为光栅化器。

本质上，像素（片段）着色器对您所看到的（一个像素）进行操作。顶点着色器对代码中存在的顶点信息进行操作。顶点着色器在图形管线的早期使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:30:59.523

[着色器](http://en.wikipedia.org/wiki/Shader)是直接在 GPU 上计算和执行的小程序：

*   [GLSL](http://en.wikipedia.org/wiki/GLSL)是 OpenGL 中着色器的语言（[参见简单示例](http://en.wikipedia.org/wiki/GLSL#A_sample_trivial_GLSL_vertex_shader)）
*   [HLSL](http://en.wikipedia.org/wiki/HLSL)是 Direct3D 的语言

[主要着色器是（按照通过GPU 渲染管道](http://en.wikipedia.org/wiki/File%3aThe_OpenGL_-_DirectX_graphics_pipeline.png)计算的顺序）：

*   顶点着色器（在顶点上计算渲染）
*   几何着色器（点、三角形等几何图形的计算渲染...）
*   像素/片段着色器（计算每个像素的渲染）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T23:17:46.440

那里有一些非常好的书籍：iPhone 3d Programming 和 Professional WebGL Programming。我推荐它们，因为它们都包含有关整个 OpenGL ES 2 和 WebGL api 的有价值的信息。

# optimization - 通过 gDebugger 执行游戏时 fps 更高

> ID：10842426
> 
> 赞同：0
> 
> 时间：2012-05-31T23:04:30.057
> 
> 标签：optimization, opengl

嗯，这真的很奇怪。我的游戏运行在 54-62FPS 左右，当它低于 60 时真的很烦人。当我通过 gDebugger 运行它来分析瓶颈时，我得到了大约 90-120 的 fps！我很肯定我正在正确打印 fps，因为当我使用 gDebugger 运行时，打印与该工具测量的值相匹配。

有人知道吗？

已解决：我的卡配置设置为让应用程序解决是否打开或关闭垂直同步。游戏打开了它，而 gdebugger 关闭了，从而解释了更高的 fps。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:17:49.597

已解决：我的卡配置设置为让应用程序解决是否打开或关闭垂直同步。游戏打开了它，而 gdebugger 关闭了，从而解释了更高的 fps。

# python - Windows 下 Python 中的文件可以使用 select() 吗？

> ID：10842428
> 
> 赞同：11
> 
> 时间：2012-05-31T23:04:42.440
> 
> 标签：python, windows, select, file-io

我正在尝试在 Windows 下运行以下 python 服务器：

```
"""
An echo server that uses select to handle multiple clients at a time.
Entering any line of input at the terminal will exit the server.
"""

import select
import socket
import sys

host = ''
port = 50000
backlog = 5
size = 1024
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind((host,port))
server.listen(backlog)
input = [server,sys.stdin]
running = 1
while running:
    inputready,outputready,exceptready = select.select(input,[],[])

    for s in inputready:

        if s == server:
            # handle the server socket
            client, address = server.accept()
            input.append(client)

        elif s == sys.stdin:
            # handle standard input
            junk = sys.stdin.readline()
            running = 0

        else:
            # handle all other sockets
            data = s.recv(size)
            if data:
                s.send(data)
            else:
                s.close()
                input.remove(s)
server.close() 
```

我收到错误消息（10038，'尝试对不是套接字的东西进行操作'）。这可能与python 文档中[的注释](http://docs.python.org/library/select.html#module-select)有关“Windows 上的文件对象是不可接受的，但套接字是。在 Windows 上，底层 select() 函数由 WinSock 库提供，并且不处理不接受的文件描述符” t 源自 WinSock。”。在互联网上有很多关于这个主题的帖子，但它们对我来说太技术性或者根本不清楚。所以我的问题是：有什么办法可以在windows下使用python中的select()语句吗？请添加一个小例子或修改我上面的代码。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T23:54:40.720

看起来不像 sys.stdin

如果您将输入更改为此

```
input = [server] 
```

异常会消失。

这是来自[文档](http://docs.python.org/library/select.html)

```
 Note:
    File objects on Windows are not acceptable, but sockets are. On Windows, the
 underlying select() function is provided by the WinSock library, and does not 
handle file descriptors that don’t originate from WinSock. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T23:57:54.733

我不知道您的代码是否还有其他问题，但是您得到的错误是由于传递`input`给`select.select()`，问题是它包含`sys.stdin`的不是套接字。在 Windows 下，`select`仅适用于套接字。

附带说明一下，`input`它是一个 python 函数，将它用作变量并不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T23:00:05.403

当然，给出的答案是正确的......你只需要从输入中删除 sys.stdin 但仍然在迭代中使用它：

> 对于 inputready+[sys.stdin] 中的 s：

# jquery - 使用蒙版制作 jQuery 动画垂直背景精灵位置？

> ID：10842429
> 
> 赞同：1
> 
> 时间：2012-05-31T23:04:56.623
> 
> 标签：jquery, css, jquery-animate, sprite, css-sprites

如何制作一个 jQuery 背景垂直动画来掩盖过渡以使精灵的外观淡化到下一个位置？我当前的代码（请参阅`jsfiddle`下面的链接以获取演示）将精灵动画到正确的背景位置，但是当它这样做时，您可以看到精灵从上到下移动，然后回到顶部。

**我希望过渡平滑/淡化，以便当您将其悬停时，它会在过渡中淡出。目前，它只是平息。**不确定您是否可以制作某种面具或其他东西？我想用精灵来做这件事，我已经知道可以用 2 个单独的图像来做。

这是当前状态的演示：http: [//jsfiddle.net/bluetidepro/jNDgT/](http://jsfiddle.net/bluetidepro/jNDgT/)

**这是我想要它的行为方式（*但添加了 jQuery 动画*）**：http: [//jsfiddle.net/bluetidepro/jNDgT/1/](http://jsfiddle.net/bluetidepro/jNDgT/1/)

*如果这没有意义，我可以尝试更好地解释。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:07:13.407

这应该可以解决问题：http:
[//jsfiddle.net/bluetidepro/jNDgT/2/](http://jsfiddle.net/bluetidepro/jNDgT/2/)

这是一篇解释它的文章： http:
[//css-tricks.com/fade-image-within-sprite/](http://css-tricks.com/fade-image-within-sprite/)

# php - 如何为 mongodb 设置默认提交选项？

> ID：10842430
> 
> 赞同：1
> 
> 时间：2012-05-31T23:05:10.757
> 
> 标签：php, mongodb, symfony, doctrine-odm

我在 Symfony2 应用程序中使用 Doctrine MongoDB ODM。

如何设置默认提交选项（例如`safe: 3`and `fsync: true`）？

理想情况下，我可以在我的 YAML 配置文件中执行此操作，但[文档似乎表明这是不可能的](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/config.html)。

如果我[可以获得 Configuration 对象，我应该可以在那里设置 defaultCommitOptions](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/working-with-objects.html#flush-options)（如`fsync`），但我不确定如何/何时/在哪里这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:26:43.203

从[PR #114](https://github.com/doctrine/DoctrineMongoDBBundle/pull/114)开始，您可以为此使用顶级配置选项`default_commit_options`。默认情况下，捆绑包将使用与 ODM 相同的值，即`{safe: true}`. 以下是受支持选项的快速示例：

```
doctrine_mongodb:
    default_commit_options:
        safe: 2      # boolean or positive integer for replication
        fsync: false # boolean 
        timeout: 10  # integer >= -1 
```

查看 DI 扩展的配置类和单元测试以获取更多信息。

对于旧版本的 DoctrineMongoDBBundle，Configuration 类注册在服务容器中，这意味着您可以自己实现它。这样做的两个选项是在您自己的包中创建编译器传递并在服务定义中添加方法调用，或者，如果这太复杂，请在运行时代码中访问服务实例并`setDefaultCommitOptions()`直接调用。

感兴趣的代码在[DoctrineMongoDBExtension](https://github.com/doctrine/DoctrineMongoDBBundle/blob/master/DependencyInjection/DoctrineMongoDBExtension.php)和`loadDocumentManager()`方法中。从那里，您可以看到为每个配置实例分配的服务 ID（每个 DocumentManager 都有一个）。我相信您也可以通过该`getConfiguration()`方法获取 DM 的配置。

# node.js - 在heroku上的Weinre

> ID：10842446
> 
> 赞同：1
> 
> 时间：2012-05-31T23:07:07.050
> 
> 标签：node.js, heroku, websocket, express, weinre

我正在尝试在[heroku上设置](http://www.heroku.com)[Weinre](http://people.apache.org/~pmuellr/weinre/) ，但我遇到了一些问题。

我设法构建了应用程序，只需使用带有 weinre npm 依赖项的 package.json 和如下所示的 Procfile

```
web: node_modules/weinre/weinre --httpPort $PORT 
```

起初一切似乎都正常，客户端显示了 UI，JS 文件加载正常，但调试不起作用，并且没有客户端出现在服务器端。

在查看日志时，我意识到对于每个包含 /ws/target/* 或 /ws/client/* 的请求，我都会收到 404 错误

```
2012-05-31T22:37:53+00:00 heroku[router]: GET xxxx.herokuapp.com/target/target-script.js dyno=web.1 queue=0 wait=0ms service=10ms status=200 bytes=190900
2012-05-31T22:37:36+00:00 heroku[router]: GET xxxx.herokuapp.com/ws/target/t-3 dyno=web.1 queue=0 wait=0ms service=3ms status=404 bytes=9
2012-05-31T22:36:39+00:00 heroku[router]: POST xxxx.herokuapp.com/ws/client/c-1 dyno=web.1 queue=0 wait=0ms service=40ms status=404 bytes=9 
```

此设置在本地运行没有问题。

我也尝试了 Procilfe`--boundHost 0.0.0.0`并得到了同样的错误。当我使用我的 heroku 应用程序域/子域作为主机时出现`weinre: error running server: Error: listen EADDRNOTAVAIL`错误

如果需要，您可以在[github 存储库中查看源代码](https://github.com/felipesabino/weinre-heroku)

[https://github.com/felipesabino/weinre-heroku](https://github.com/felipesabino/weinre-heroku)

编辑：这可能与 Heroku 不支持 WebSockets 有关： [https ://devcenter.heroku.com/articles/http-routing#websockets](https://devcenter.heroku.com/articles/http-routing#websockets)

最奇怪的是，PhoneGap 的 weinre 调试页面也发生了同样的问题 [http://debug.phonegap.com/](http://debug.phonegap.com/)

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:56:46.080

目前我已经在 Heroku 上运行，但我记得当我试图让它工作时，它是一场真正的噩梦。

这是使用`2.0.0-pre-H0WVARLU-incubating`weinre 的，所以*可能*有点不同，但我必须做的是：

*   修改 weinre 本身，我必须告诉 weinre 绑定到所有主机，我修改了`cli.coffee`文件并将其设置`boundHost`为`-all-`默认值
*   我赞扬了`if remoteAddress`签到，`channelManager.coffee`因为您进来的地址是通过代理重新映射的，并且从未匹配
*   打开详细调试，虽然您实际上并不需要它来运行它，但它可以更容易地跟踪错误发生的位置（以及请求未路由的原因）

我的 Procfile 最终变得非常简单，因为我尝试尽可能地将 weinre 用作“本地”（请注意，repo**仅**包含weinre，它不是您正在做的模块）：

```
web: node weinre 
```

我留下任何端口更改由 Procfile 处理`process.env.PORT`，而不是从 Procfile 传入

基本上我发现 weinre 并不是为了在代理后面工作而设计的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T14:07:46.330

请参阅此拉取请求[https://github.com/apache/incubator-cordova-weinre/pull/10](https://github.com/apache/incubator-cordova-weinre/pull/10)

请注意，不需要其他修改，Procfile 可以设置选项（就像它应该的那样），并且 Weinre 被正确用作节点模块。

package.json（包含修复）

```
"dependencies" : {
    "weinre": "https://github.com/downloads/AppGyver/incubator-cordova-weinre/apache-cordova-weinre-2.0.0-pre-H77LBWIW-incubating-bin.tar.gz"
}, 
```

档案

```
web: node_modules/weinre/weinre --httpPort $PORT --boundHost -all- --debug true --verbose true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:30:10.383

*   修改 weinre 本身，我必须告诉 weinre 绑定到所有主机，我修改了 cli.coffee 文件并将 boundHost 设置为 -all- 作为默认值
*   我推荐了 channelManager.coffee 中的 if remoteAddress 检查，因为您输入的地址是通过代理重新映射的，并且从未匹配

这两个提示对**appfog**也有很大帮助

你还需要

*   将 weinre 重命名为 app.js
*   需要本地咖啡脚本
*   将 cli 分配给变量并直接执行 run
*   扩展 cli.coffee -> 端口`process.env.PORT`

# clojure - Clojure、core.logic、mini-kanren：eqo vs ==

> ID：10842447
> 
> 赞同：1
> 
> 时间：2012-05-31T23:07:13.070
> 
> 标签：clojure, clojure-core.logic

我知道：[https ://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer](https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer)

## 语境

迷你看人代码：

```
(run* (q)
  (eqo pear plum)
  (== #t q)) 
```

核心逻辑代码

```
(run* [q]
  (== pear plum)
  (== true q)) 
```

这会产生结果 ()，这是正确的答案。

## 问题：

eqo 和 == 是一样的，还是我在上面的例子中只是幸运？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:59:44.503

我没记错 eqo 只是调用 ==

# ruby-on-rails - 路由规范是否支持重定向路由？[R规格]

> ID：10842448
> 
> 赞同：31
> 
> 时间：2012-05-31T23:07:20.840
> 
> 标签：ruby-on-rails, rspec

在对这个问题进行了相当深入的研究之后，我在对文档的理解和结果之间陷入了僵局。

根据[https://www.relishapp.com/rspec/rspec-rails/v/2-8/docs/routing-specs/route-to-matcher](https://www.relishapp.com/rspec/rspec-rails/v/2-8/docs/routing-specs/route-to-matcher)，我们应该能够编写以下内容：

```
#rspec-rails (2.8.1)
#rspec (>= 1.3.1)
#rspec-core (~> 2.8.0)

# routing spec
require "spec_helper"

describe BusinessUsersController do
  describe "routing" do
    it "routes to some external url" do
      get("/business_users/7/external_url").should route_to("http://www.google.com")
    end
  end
end

# routes.rb
BizeebeeBilling::Application.routes.draw do

  resources :business_users do
    member do
      get "external_url" => redirect("http://www.google.com")
    end
  end
end 
```

运行此规范会产生以下结果： 失败：

```
 1) BusinessUsersController routing routes to some external url
     Failure/Error: assert_routing "/business_users/7/external_url", "http://www.google.com"
     ActionController::RoutingError:
       No route matches "/business_users/7/external_url"
     # ./spec/routing/business_users_routing_spec.rb:19:in `block (3 levels) in <top (required)>' 
```

我无法在任何地方找到任何人报告此特定问题。

添加了详细信息：手动测试时，路线得到了很好的解决。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-01T04:26:59.980

路由规范/测试专门测试路由是否映射到特定的控制器和操作（可能还有一些参数）。

我深入研究了 Rails 和 Journey 的内部结构。RSpec 和 Rails（基本上省略了一些细节）`Rails.application.routes.recognize_path`用来回答“这是可路由的吗？”这个问题。

例如：

```
$ 导轨控制台
> Rails.application.routes.recognize_path("/business_users/1", 方法："GET")
 => {:action=>"show", :controller=>"business_users", :id=>"1"}

```

但是， . 的另一端没有控制器`/business_users/1/external_url`。事实上，为了执行重定向，Rails 创建了一个 的实例[`ActionDispatch::Routing::Redirect`](https://github.com/rails/rails/blob/v3.2.5/actionpack/lib/action_dispatch/routing/redirection.rb)，它是一个小型 Rack 应用程序。从来没有碰过 Rails 控制器。您基本上是在安装另一个 Rack 应用程序来执行重定向。

要测试重定向，我建议改用请求规范（中的文件`spec/requests`）。就像是：

```
require "spec_helper"

describe "external redirection" do
  it "redirects to google.com" do
    get "/business_users/1/external_url"
    response.should redirect_to("http://www.google.com")
  end
end
```

这会隐式测试路由，并允许您针对重定向进行测试。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-01T07:59:25.420

安迪林德曼有正确的答案。但是，您不必将规范放在规范/请求中，您可以将其保留在规范/路由中，并明确使用元数据“类型”：`describe 'my route', type: :request do`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-16T00:32:27.083

我遇到了类似的情况，我试图测试一系列路线，有些应该重定向，有些不应该。我想将它们保留在一个路由规范中，因为这是对它们进行分组的最合乎逻辑的方式。

我尝试使用`describe: 'my route', type: request`，但发现不起作用。但是，您可以`RSpec::Rails::RequestExampleGroup`在规范上下文中包含对请求规范方法的访问权限。就像是：

```
describe "My Routes" do
  context "Don't Redirect" do
    it "gets URL that doesn't redirect" do
      get("business_users/internal_url").should route_to(controller: "business_users", action: "internal_url_action")
    end
  end

  context "Redirection" do
    include RSpec::Rails::RequestExampleGroup
    it "redirects to google.com" do
      get "/business_users/1/external_url"
      response.should redirect_to("http://www.google.com")
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-21T23:45:55.113

测试外部重定向的最简单方法是使用集成测试：

```
 test "GET /my_page redirects Google" do
    get "/my_page"
    assert_redirected_to "https://google.com"
  end 
```

您的测试需要位于您的`test/integration`目录或集成测试所在的等效目录下。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-31T23:24:48.523

我认为您想要[redirect_to 匹配器](https://www.relishapp.com/rspec/rspec-rails/v/2-8/docs/matchers/redirect-to-matcher)。

# jquery - jquery手风琴崩溃和css问题

> ID：10842449
> 
> 赞同：0
> 
> 时间：2012-05-31T23:07:28.570
> 
> 标签：jquery, css, accordion

我有一个带有来自 themeroller 的自定义样式表的手风琴。问题是当我折叠手风琴的一个部分时，它会将折叠的标题更改为黑色，而不是回到原来的红色。我查看了css，我唯一的想法是这是一个javascript问题，因为我的悬停颜色是黑色的，由于某种原因，它在折叠时保持这种颜色。

这是一个链接[http://filtersavvy.com/index.php?main_page=index&cPath=351_448&sort=20a](http://filtersavvy.com/index.php?main_page=index&cPath=351_448&sort=20a)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:19:10.970

当您单击关闭标题时，`<h3>`获得类`ui-state-focus`。您可以检查单击是否正在关闭它，如果是，请删除类`ui-state-focus`，这将更改正在应用的 css 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:19:47.990

查找此 CSS 规则

```
.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus {
    background: url("/includes/templates/theme376/css/images/ui-bg_highlight-soft_100_100909_1x100.png") repeat-x scroll 50% 50% #F50019;
    border: 1px solid #F50019;
    color: #FFFFFF;
    font-weight: normal;
} 
```

该问题是由在`.ui-state-focus`具有焦点时为单击的菜单项显示黑色背景的类引起的。从该规则中删除该类或重新定义它，如下所示：

```
.ui-state-focus { background: none } 
```

# java - 查询在 mysql 和 php 中运行良好，但在 java 中运行不正常

> ID：10842451
> 
> 赞同：1
> 
> 时间：2012-05-31T23:08:04.023
> 
> 标签：java, php, mysql

我在 PHP 中有以下 mysql 查询，它工作正常。

```
$strUpdate = "INSERT INTO  `batchfolder`.`newbatch` (`BatchID` ,`Batch` ,`barcode` ,`PG`)VALUES (NULL ,  '',  '1',  '')"; 
```

当我直接在数据库中运行它时也很好。

但是当我在java中运行它时，

```
 try {
          conn = DriverManager.getConnection (url, userName, password);
          Statement st = conn.createStatement();
          st.execute("INSERT INTO  `batchfolder`.`newbatch` (`BatchID` ,`Batch` ,`barcode` ,`PG`)VALUES (NULL ,  '',  '1',  '')");            
          st.close();
} 
```

它给出了以下错误。

```
Exception in thread "main" java.sql.SQLException: Field 'Pre' doesn't have a default value 
```

Pre 是数据库中的下一行，它没有默认值。

我的问题是，那么这个查询如何在 mysql 和 php 中运行良好。

PS BatchID 是 newbatch 中的一个`int(10) autoincremented`值。

这是我的表结构。

```
CREATE TABLE IF NOT EXISTS `newbatch` (
  `BatchID` int(10) NOT NULL AUTO_INCREMENT,
  `Batch` varchar(100) NOT NULL,
  `barcode` varchar(5) NOT NULL,
  `Ly` varchar(5) NOT NULL DEFAULT '0',
  `PG` varchar(5) NOT NULL,
  `Pre` varchar(5) NOT NULL,
  `Flu` varchar(5) NOT NULL,
  `FluID` varchar(100) DEFAULT NULL,
  `DateCreated` varchar(100) DEFAULT NULL,
  `Comments` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`BatchID`),
  UNIQUE KEY `FluID` (`FluID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1000160 ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:18:03.857

你确定这实际上是在 PHP 中运行的吗？您可能只是没有看到错误消息。

再试一次，`display_errors = 'on'`这`error_reporting(E_ALL | E_STRICT);` 是一个 SQL 错误，它不依赖于驱动程序。驱动程序只是向您显示消息。

**更新：** 看起来 Java 出于某种原因关闭了 MySQL 的严格模式。（据我所知）唯一应该能够导致这种行为的是 MySQL 严格模式被关闭。

> 如果未启用严格模式，MySQL 会将列设置为列数据类型的隐式默认值。

您可以通过 来检查您的服务器运行的模式`SELECT @@GLOBAL.sql_mode;`。在 Java 和 PHP 中尝试一下。如果结果不同，那就是你的答案。

**更新2：杰普** [！](http://bugs.mysql.com/bug.php?id=24526)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:32:21.417

查看您的表定义，您已将 Pre 定义为 not null，但您没有在插入时为其指定值，因此它应该正确显示错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:43:39.663

您有几个“NOT NULL”的数据库字段，因此您必须在 INSERT 语句中指定这些字段。我也无法想象这在 PHP 中是如何工作的。

# ide - 有没有办法让 eclipse 像 Visual Studio 那样自动检测空格/制表符不匹配？

> ID：10842454
> 
> 赞同：1
> 
> 时间：2012-05-31T15:15:16.580
> 
> 标签：ide, visual-studio, eclipse, code-formatting

在 Visual Studio 2010 中，当我打开一个混合了制表符和空格的源代码文件时，会出现一条消息警告我，让我有机会更正它。Eclipse 中是否有这样的功能，无论是原生的还是通过插件的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:21:24.520

我没有注意到这样的功能，但是您可以更改一些设置，以便您自己检测到它。本质上，我显示空白字符（特别是制表符和空格）。要显示空白字符：

```
Preferences > General > Editors > Text Editors > Show whitespace characters 
```

单击“空白字符”链接以修改要显示的空白字符。

然后将您的语言格式化程序修改为空格上的强制制表符（反之亦然）。然后，当您格式化代码 (Ctrl+Shift+F) 时，它将强制执行您在格式化程序中设置的约定。这具有格式化其余代码的另一个副作用，但这可能不是一件坏事。

如果您想在格式化代码时删除尾随空格，您可以通过编辑“清理”配置文件并单击“代码组织”选项卡中的“删除尾随空格”选项来实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:02:13.353

诚然，这不如 Visual Studio 的解决方案好，并且与上面的答案非常相似，但这是我解决这个问题的方法。

1.  转到窗口>首选项>常规>编辑器>文本编辑器
2.  选中“显示空白字符”框
3.  点击“配置可见性”
4.  选中表意空间和制表符的前导列下的框
5.  选中空格、表意空格和制表符的尾随列下的框
6.  应取消选中所有其他框。
7.  “好的”一切。您可能必须重新打开现有窗口才能使其生效。

如果您更喜欢使用标签而不是使用空格，那么您将稍微修改这些说明以显示前导空格而不是前导制表符。无论如何，当我有一个使用制表符而不是空格或混合制表符和空格的文件时，这样设置可以让我立即看到。

我不建议使用 CTRL+SHIFT+F，因为它在区分新旧代码时会带来颠覆性的噩梦。或者，只需执行 CTRL+F，选中 Regex 框，将 \t 替换为四个空格。您仍然会在 subversion 中看到很多差异，但很容易发现您只是更新了空间。

# ide - 如何解决 Eclipse 中的插件冲突？

> ID：10842457
> 
> 赞同：4
> 
> 时间：2012-05-31T16:11:13.237
> 
> 标签：ide, eclipse, plugins

我想将我的 Helios 安装的 Eclipse 升级到 Indigo。当我这样做时，我收到以下消息：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Eclipse IDE for Java EE Developers 1.4.2.20120213-0813 (epp.package.jee 1.4.2.20120213-0813)
  Software currently installed: Oracle GlassFish Server Tools 1.6.1.201009290929 (oracle.eclipse.tools.helios.glassfish.feature.group 1.6.1.201009290929) 
```

所以我的第一个想法是简单地卸载 GlassFish。对于我的生活，我无法弄清楚如何以及去哪里做这件事。我去了帮助->关于 Eclipse...->安装详细信息。看起来我可以卸载东西的唯一地方是“已安装的软件”选项卡。我在任何地方都没有看到 Oracle Glassfish 包。如果我转到“功能”或“插件”，我可以找到它，但没有卸载选项。

所以我的下一个想法是升级 Glassfish。所以我把靛蓝回购放在那里，但在尝试更新时我仍然收到相同的消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T10:53:14.710

Eclipse 中没有永久和物理卸载特性及其插件的机制。物理和永久删除不需要的特性及其插件的过程是一个手动过程，应该在 Eclipse 不运行时完成。为此，您必须从 eclipse/features 目录中手动删除与该功能相关的文件，并从 eclipse/plugins 目录中删除其插件。

```
D:\Softwares\eclipse-standard-kepler-R-win32\eclipse\plugins\eclipse\
-plugins
-features 
```

# vb.net - 在 VB.NET 中使用数据视图按日期排序

> ID：10842459
> 
> 赞同：0
> 
> 时间：2012-05-31T23:08:33.587
> 
> 标签：vb.net, sorting, date, dataview

嗨，提前感谢：

因此，我试图从 SQL 数据库中提取一个表，并在“Date From”（DtFr）列中对其进行排序，该列表示租约的开始。我认为它会像这样简单：

```
Dim XmlReader As New XmlNodeReader(xmlDoc)
Dim ds As New DataSet
ds.ReadXml(XmlReader)
myDt = ds.Tables("Cam")
If myDt IsNot Nothing AndAlso myDt.Rows.Count > 0 Then
    Dim dv As New DataView(myDt)
    dv.Sort = "DtFr ASC"
    myDt = dv.ToTable(False, "Id", "Name", "Amount", "Unpaid", "DtFr")
End If 
```

但正如您可能已经猜到的那样，这是行不通的（新用户，无法发布图片，这只是日期乱序的图片）。

![在此处输入图像描述](../Images/a342ac6fc18666b113452bb7543da9b3.png)

可能是因为在数据检索的某个时刻，它不再是 Date 类型，而是一个字符串或其他什么？如果我使用更简单的日期，例如 2012 年 1 月 1 日、2012 年 1 月 2 日、2012 年 1 月 3 日或 2012 年 1 月 1 日、2012 年 2 月 1 日、2012 年 3 月 1 日等。你会在上面注意到，如果我有不同的月份，它会乱序排列。

我试过搞乱文化，认为可能是在前几个月对它们进行分类无济于事......我不知所措，任何帮助，想法或对有用的东西的指导都会很棒。

非常感谢，乔希

编辑：你是个天才，非常感谢。您对字符串值是正确的。我在数据表中添加了一个名为 sortDtFr 的数据列，并将 System.DateTime 作为数据类型赋予它，并遍历将新列的值设置为与转换为日期的旧值相等的行。以下是感兴趣的人的代码：

```
ds.ReadXml(XmlReader)

myDt = ds.Tables("Cam")
myDt.Columns.Add(New DataColumn("sortDtFr", System.Type.GetType("System.DateTime")))
For Each row As DataRow In myDt.Rows
    row("sortDtFr") = CDate(row("DtFr"))
Next
If myDt IsNot Nothing AndAlso myDt.Rows.Count > 0 Then
    Dim dv As New DataView(myDt)
    dv.Sort = "sortDtFr ASC"
    myDt = dv.ToTable(False, "Id", "Name", "Amount", "Unpaid", "DtFr", "sortDtFr")
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:17:29.973

您的记录以这种方式排序的原因是因为您的（**Cam**）的*数据类型*是**System.String**（*默认情况下*）。尝试将其更改为**System.DateTime**。`DataColumn``DataTable`

# javascript - 从 phonegap facebook 登录获取用户 ID

> ID：10842462
> 
> 赞同：1
> 
> 时间：2012-05-31T23:09:02.123
> 
> 标签：javascript, android, facebook, cordova

我试图允许用户在使用他们的 facebook 凭据登录到我的系统后将照片上传到我的服务器。我正在使用适用于 android 的 phonegap facebook 插件。如何从 facebook SDK 获取他们的唯一用户 ID？我应该使用 javascript SDK 还是 Android SDK？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:11:02.123

在你调用 FB.init....之后你必须调用 FB.login 函数，并且在 fb.login 的响应中你将获得登录人的用户 ID...

FB.login 的代码是

```
FB.login(function(response) {
                if (response.authResponse) {
                    alert('logged in');
                    fbId = response.authResponse.userId;
                     alert("user id is "+fbId);
                } else {
                    alert('not logged in');
                }
            }, {
                scope : "email"
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:47:46.380

如果有人好奇，这就是你在初始化 facebook javascript SDK 后的做法：

```
FB.api('/me', function(me){
        if (me.id) {
            var facebook_userid = me.id;
            alert(facebook_userid);
        }
    }); 
```

# sql-server - 在 SQL 查询中按问题区分和排序（简单但可能吗？）

> ID：10842464
> 
> 赞同：1
> 
> 时间：2012-05-31T23:09:09.660
> 
> 标签：sql-server

我有一个包含这些列的表（MS SQL-Server 2008）；

**城市城市日期**

和这样的行；

*   波尔图 | 20.11.1988
*   波尔图 | 19.11.1988
*   里斯本 | 21.11.1988

我想要的是订购日期列（desc）并获得城市的不同值。所以结果应该是；

*   **里斯本**
*   **波尔图**

我试过;

```
select distinct(city) from TableCity order by cityDate desc 
```

但输出是；

> 如果指定了 SELECT DISTINCT，则消息 145、级别 15、状态 1、行 1 ORDER BY 项必须出现在选择列表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:23:18.803

您只需要使用 group by 而不是 distinct：

假设 T 是您的表：

```
WITH T as
(
SELECT 'Porto' City,'20.11.1988' CityDate UNION ALL
SELECT 'Porto' City,'19.11.1988' CityDate UNION ALL
SELECT 'Lisbon' City,'21.11.1988' CityDate
) 
```

--测试1：

```
select City,CityDate from T GROUP BY City,CityDate Order by CityDate DESC 
```

--结果：这仍然显示三行，因为波尔图的城市日期不一样，但如果波尔图城市日期相同，它将只显示两行。

```
City    CityDate
Lisbon  21.11.1988
Porto   20.11.1988
Porto   19.11.1988 
```

--测试2：

```
select T2.City 
FROM
(select City from T GROUP BY City,CityDate) as T2
GROUP BY T2.City 
```

或者

您可以使用 CTE：

```
With T as
(
select City from YourTable GROUP BY City,CityDate
)  

select City FROM T group by City 
```

- 结果：

```
City
Lisbon
Porto 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:49:01.943

我正在手机上执行此操作，因此以下内容未经测试，但应该可以

```
SELECT T2.city
FROM ( SELECT city, MAX(cityDate) AS maxDate
                   FROM T
                 GROUP BY city
                 ORDER BY maxDate desc ) AS T2 
```

# memory - Debian Linux 上的内存使用情况

> ID：10842468
> 
> 赞同：2
> 
> 时间：2012-05-31T23:09:21.397
> 
> 标签：memory, debian

我试图找出我的 Debian 服务器出了什么问题 - 我收到关于没有足够可用内存的警告 - 顶部（如下所示）说消耗了 1.8G，但我无法找到哪个应用程序是对它负责。只有 Tomcat 正在运行，据 top 称，它消耗了 ~25 % 等 530m。但是还有超过 1 GB 的空间，我找不到了！

```
Tasks: 54 total, 1 running, 53 sleeping, 0 stopped, 0 zombie
Cpu(s):100.0%us, 0.0%sy, 0.0%ni, 0.0%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st
Mem: 2150400k total, 1877728k used, 272672k free, 0k buffers
Swap: 0k total, 0k used, 0k free, 0k cached

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
 3271 root 18 0 1559m 530m 12m S 0 25.2 1:44.31 java
 1568 mysql 15 0 270m 71m 7332 S 0 3.4 0:50.79 mysqld 
```

[（此处](https://gist.github.com/2847060)为全顶输出）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:15:00.267

Linux 系统总是尝试为各种功能使用尽可能多的内存，例如缓存可执行文件，甚至只是从磁盘读取页面。毕竟，这就是您购买快速 RAM 的目的。

您可以通过执行以下操作来了解有关您的系统的更多信息

```
cat /proc/meminfo 
```

这篇有用的博客[文章](http://unixfoo.blogspot.be/2008/02/know-about-procmeminfo.html?m=1)中的更多信息 如果你发现缓存中使用了很多，那么你不必担心系统。如果个别进程警告你内存问题，那么你必须检查它们的设置是否有内存限制设置。许多服务器进程都有这些，例如基于 php 或 java 的进程。

这种性质的问题也可能更多地出现在[https://serverfault.com/](https://serverfault.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T15:25:59.203

如我所见，您的“免费”命令返回 NO 交换空间

> 交换：总共 0k，使用 0k，免费 0k，缓存 0k

1.  要么没有可用的交换分区
2.  此交换空间未安装
3.  可以手动制作交换文件
    *   并将此文件挂载为活动交换

> *   [如何进行交换](http://www.cyberciti.biz/faq/linux-add-a-swap-file-howto/)

要测试您的实际使用情况，请重新启动机器并在 1 小时后重新测试使用的数量，一些进程是内存占用，例如 apache 或 ntop

参考：

> *   [检查内存](http://www.binarytides.com/linux-command-check-memory-usage/)
>     
>     
> *   [显示排序](https://unix.stackexchange.com/questions/128953/how-to-display-top-results-sorted-by-memory-usage-in-real-time)
>     
>     
> *   [内存使用情况](https://unix.stackexchange.com/questions/34795/correctly-determining-memory-usage-in-linux)

# redis - 使用 dump.rdb 或 dump.json 文件链接 Redis 数据库

> ID：10842470
> 
> 赞同：2
> 
> 时间：2012-05-31T23:09:39.867
> 
> 标签：redis, dump, database-restore

给定 dump.rdb（或 .json 格式）文件中现有 redis 数据库的快照，我想在我自己的机器上恢复这些数据以对其运行一些测试。

任何有关如何执行此操作的指示将不胜感激。

我已经尝试解析dump.rdb 中的数据，然后手动将其保存在redis DB 中。我觉得有/应该是一种更清洁的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T04:17:14.887

如果要恢复整个文件，只需将其复制到中指定的正确目录`redis.conf`并重新启动redis服务器即可。但是，如果您想加载密钥/数据库的子集，则必须解析转储文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:21:23.833

所以：

我继续以“hacky”方式进行操作，发现使用此处找到的解析器代码： [https](https://github.com/sripathikrishnan/redis-rdb-tools) ://github.com/sripathikrishnan/redis-rdb-tools很有帮助。

使用解析器示例代码我可以：1）设置一个redis客户端2）使用解析器解析数据3）使用客户端将解析的数据“设置”到一个新的redis数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T08:48:11.707

[rdd](https://github.com/r043v/rdd)工具也可以做到这一点，

它独立于 .rdb 文件和转储/恢复工作的 redis 实例

它可以在转储和/或 redis 上应用合并、拆分、重命名、搜索、过滤、插入、删除

# javascript - 如何从 DOM 中删除某个类的所有元素？

> ID：10842471
> 
> 赞同：82
> 
> 时间：2012-05-31T23:09:42.810
> 
> 标签：javascript

```
var paras = document.getElementsByClassName('hi');

for (var i = 0; i < paras.length; i++) {
  paras[i].style.color = '#ff0011';
  // $('.hi').remove();
}
```

```
<p class="hi">dood</p>
<p class="hi">dood</p>
<p class="hi">dood</p>
<p class="hi">dood</p>
<p class="hi">dood</p>
<p>not class 'hi'</p>
```

在 jQuery 中，这将非常简单：`$('.hi').remove();`. 我想学习 JS，然后是 jQuery。

我被卡住了，谷歌没有提供。我不想成为一个复制/粘贴 jQuery 程序员。我刚开始学习JS。谢谢。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-05-31T23:15:04.483

要删除元素，请执行以下操作：

```
el.parentNode.removeChild(el); 
```

MDN 是一个很好的参考。以下是一些相关页面：

[节点父](https://developer.mozilla.org/En/DOM/Node.removeChild)[节点](https://developer.mozilla.org/en/DOM/Node)
[removeChild](https://developer.mozilla.org/en/DOM/Node.parentNode)

但是，如果您像这样循环您会遇到问题，因为[getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)返回一个活动列表，当您删除一个节点时，该元素也会从列表中删除，因此您不应该增加，否则您最终会跳过所有其他元素。而是不断删除列表中的第一个元素，直到没有第一个元素：

```
var paras = document.getElementsByClassName('hi');

while(paras[0]) {
    paras[0].parentNode.removeChild(paras[0]);
}​ 
```

* * *

IMO jQuery 非常擅长向您展示 Javascript 可以做什么。我实际上建议在大约一两个星期的普通 JS 之后学习 jQuery，精通它，并记住它抽象的内容。有一天，当您对 Javascript 作用域、对象以及在使用 jQuery 时可以获得的东西有了很好的掌握时，回去尝试学习如何在没有库的情况下更好地与 DOM 交互。这样，您将更轻松地学习纯 JS，并且您将欣赏库可以为您提供更多的抽象，同时了解当您只需要库提供的一两个东西时，您可以自己编写它们而无需包括整个图书馆。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2019-08-18T18:12:46.803

**简单的 ES6 答案：**

```
document.querySelectorAll('.classname').forEach(e => e.remove()); 
```

**解释：**

1.  [`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)循环遍历文档中的元素，返回具有指定选择器的所有元素的[NodeList](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)（例如`'.class'`, `'#id'`, `'button'`）
2.  [`forEach()`](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach)循环遍历 NodeList 并为每个元素执行指定的操作
3.  [`e => e.remove()`](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove)从 DOM 中移除元素

但是请注意，[Internet Explorer 不支持此解决方案](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach#Browser_Compatibility)。话又说回来，什么都没有。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-31T23:14:05.943

```
[].forEach.call(document.querySelectorAll('.hi'),function(e){
  e.parentNode.removeChild(e);
}); 
```

*在这里，我使用[`Array.prototype.forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)轻松遍历类数组对象中的所有元素，即返回的静态 NodeList `querySelectorAll`，然后使用[`removeChild()`](https://developer.mozilla.org/en/DOM/Node.removeChild)从 DOM 中删除项目。*

对于不支持`querySelectorAll()`或的旧浏览器`forEach()`：

```
var classMatcher = /(?:^|\s)hi(?:\s|$)/;
var els = document.getElementsByTagName('*');
for (var i=els.length;i--;){
  if (classMatcher.test(els[i].className)){
    els[i].parentNode.removeChild(els[i]);
  }
} 
```

*请注意，因为[`getElementsByTagName`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)返回一个**活动**的NodeList，您必须从后到前迭代这些项目，同时从 DOM 中删除它们。*

还有一些不支持`querySelectorAll`但支持的旧浏览器`getElementsByClassName`，您可以使用它们来提高性能并减少代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T23:13:50.690

Afaik 只有父母可以在本机 JS 中删除孩子。因此，您首先必须获得该元素的父元素，然后使用父元素删除该元素。尝试这个：

```
var parent = paras[i].parentNode;
parent.removeChild(paras[i]); 
```

# windows-phone-7 - 更改列表框项目的背景图像

> ID：10842475
> 
> 赞同：1
> 
> 时间：2012-05-31T23:10:25.260
> 
> 标签：windows-phone-7, listbox, expression-blend

我想根据选择状态切换列表框项目的背景。

我最初在我的 ItemTemplate 中硬编码背景，如下所示：

```
 <StackPanel.Background>
        <ImageBrush ImageSource="PodImages\podstate-Clip.png" />
   </StackPanel.Background> 
```

我尝试进入 Blend 以根据视觉状态（选择与未选择）设置背景，但无法弄清楚 Blend，我仍然不了解样式标记。有人可以帮助我处理样式标记或在 Blend 中指导我在哪里设置它吗？

编辑：好的，我找到了如何将列表项添加到列表框并根据混合中的视觉状态设置背景，但我不知道如何为数据模板项执行此操作

编辑：
好的，我想我想做的事情是这样的（但这会使我的应用程序崩溃）

我修改了

```
<Storyboard>
     <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="ImageSource" Storyboard.TargetName="ContentBackground">
            <DiscreteObjectKeyFrame KeyTime="0" Value="PodImages/podstate-Clipped.png"/>
     </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

这是总共的风格：

```
<Style x:Key="ListBoxItemStyle2" TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TransparentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="ImageSource" Storyboard.TargetName="ContentBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="PodImages/podstate-Clip.png"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                    <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="ImageSource" Storyboard.TargetName="ContentBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="PodImages/podstate-Clipped.png"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                            <ContentControl.Background>
                                <ImageBrush Stretch="Fill" x:Name="ContentBackground" ImageSource="PodImages/podstate-Clip.png"/>
                            </ContentControl.Background>
                        </ContentControl>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:22:43.870

在您的列表框背景中使用 {Binding ResourceName}，在这里查看更多提示[http://www.silverlight.net/learn/data-networking/binding/silverlight-data-binding](http://www.silverlight.net/learn/data-networking/binding/silverlight-data-binding)

或者，我建议您搜索“Silverlight 中的数据绑定”，它会为您提供大量信息

# sql - 在 2 个选项卡上选择/计数，如何只生成一个选项卡？

> ID：10842476
> 
> 赞同：0
> 
> 时间：2012-05-31T23:10:37.010
> 
> 标签：sql, select, count, sum

这是我的带有 6 个选项卡的点赞表（如果选项卡是正确的名称，则不要这样做） 我有一个很好的要求，可以选择具有更多喜欢、最近和特定论坛的主题。

[http://trotirider.com/stak1.jpg](http://trotirider.com/stak1.jpg)

```
SELECT tid, Sum(value) AS value_total
FROM punlike
WHERE value = 1
  AND (fid = 31 OR fid = 33)
GROUP BY tid
ORDER BY value_total DESC, tid DESC 
```

[http://trotirider.com/stak2.jpg](http://trotirider.com/stak2.jpg)

但我只需要'tid'，value_total 只是在这里订购。如何通过此请求仅获得一个选项卡？是否可以通过 sql 请求来实现，还是必须在 php 中通过循环或其他方式实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:38:03.140

不确定这是否可行，但试一试：

```
SELECT tid
FROM punlike
WHERE value = 1
  AND fid IN (31, 33)
GROUP BY tid
ORDER BY SUM(value) DESC, tid DESC; 
```

如果这不起作用，请尝试以下操作：

```
SELECT tid
FROM (SELECT tid, SUM(value) AS value_total
      FROM punlike
      WHERE value = 1
        AND fid IN (31, 33)
      GROUP BY tid
      ORDER BY value_total DESC, tid DESC); 
```

# jquery - ie9圆角渲染小圆点

> ID：10842491
> 
> 赞同：0
> 
> 时间：2012-05-31T23:11:56.383
> 
> 标签：jquery, css, internet-explorer-9

所以我在 ie9 中得到了一个奇怪的渲染

![在此处输入图像描述](../Images/f0ad659c772b9dcdae64cea617899b26.png)

看到左边那些小白点了吗？#$@# 是什么？我怎样才能摆脱它们？

Microooossooofffttt !?!?! *戒指在天空中握紧双手

这是制作这个可爱小按钮的 css：

```
.button {
    position: absolute;
    background: #356BB1;
    font-size: 18px;
    color: white;
    padding: 16px 40px;
    -webkit-border-radius: 70px;
    -moz-border-radius: 70px;
    border-radius: 70px;
    -moz-box-shadow: 0 0 35px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 0 35px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 35px rgba(0, 0, 0, 0.2);
    -moz-transition: all 0.3s;
    -webkit-transition: all 0.3s;
    -o-transition: all 0.3s;
    -ms-transition: all 0.3s;
    transition: all 0.3s;
} 
```

顺便说一句，有时这些点不会出现，但它们总是在按钮位置动画后出现。我也在 vmware fusion 中运行 ie9，所以这可能是有用的信息。

谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:07:05.713

这通常发生在 VM 的环境中，与显卡有关，我在查看 VM 时遇到了同样的问题，而在本机 Windows 7 / IE9 上没有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:52:10.747

Win7 上的 IE9（64 位）在这里看起来不错。您的屏幕截图看起来像是来自不良视频驱动程序的伪影。

# opencv - 如何在 Fedora 16 上成功安装 sikuly？

> ID：10842494
> 
> 赞同：0
> 
> 时间：2012-05-31T23:12:31.640
> 
> 标签：opencv, fedora, sikuli

我在 Fedora 16 上安装 sikuli 时遇到问题，它是 64 位架构，我的主要问题来自于 opencv 的编译，sikuli 需要 2.1 版本的 opencv 并且在 cmake 步骤中它告诉我它找不到一些库。我已经尝试安装库并创建符号链接，但它仍然无法正常工作，有没有人知道一个好的教程或一些好的想法来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:45:03.703

I'd recommend you to raise a question on Sikuli bug tracker [https://answers.launchpad.net/sikuli](https://answers.launchpad.net/sikuli) because it's quicker to get the response from developers there.

Here is a question similar to your issue: [https://answers.launchpad.net/sikuli/+question/198796](https://answers.launchpad.net/sikuli/+question/198796)

# java - 从应用引擎通过 SSL 发出 OAuth 签名的 POST 请求

> ID：10842500
> 
> 赞同：1
> 
> 时间：2012-05-31T23:13:01.390
> 
> 标签：java, google-app-engine

谷歌应用引擎（在 java 运行时）遇到了一个有趣的问题。从应用程序引擎任务/视图中，我正在尝试联系外部 Web 服务 API。

外部 API 使用 OAuth 进行身份验证，并且仅接受通过 SSL 的请求。我正在调用的特定方法是 POST 请求。

**选项 1：**使用 AppEngine URLFetch 服务。但是，我看不到进行 OAuth 签名的方法。URL Fetch 使用 java.net HttpURLConnection，它流式传输它的请求，排除签名。我的首选 java OAuth 库是[oauth-signpost](http://code.google.com/p/oauth-signpost/)，但由于这个原因它不支持 java.net。是否有与 HttpURLConnection 兼容的 OAuth 库？

**选项 2：**使用另一个 URL 获取库。我最喜欢的 HTTP 库是[apache commons HTTP library](http://hc.apache.org/httpcomponents-client-ga/index.html)。但是，这在使用 SSL 时会导致问题，因为 javax.ssl 被应用引擎沙箱禁止。尝试通过 SSL 使用 apache 库时出现以下错误：

```
java.lang.NoClassDefFoundError: javax.net.ssl.KeyManagerFactory is a restricted class. Please see the Google App Engine developer's guide for more details.
at javax.net.ssl.KeyManagerFactory.<clinit>(KeyManagerFactory.java)
at org.apache.http.conn.ssl.SSLSocketFactory.createSSLContext(SSLSocketFactory.java:223) 
```

我假设是因为您不能直接打开套接字。

这都是 OAuth / POST / SSL / App 引擎的悲哀融合，我看不到出路。很想听听任何和所有的建议=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T04:53:03.967

1.  [`google-oauth-java-client`](http://code.google.com/p/google-oauth-java-client/)

2.  如果您使用包装 UrlFetch 的自定义 ConnectionManager，[HttpClient 应该在 AppEngine 中工作。](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)详细信息在[这里](http://esxx.blogspot.com/2009/06/using-apaches-httpclient-on-google-app.html)和[这里](http://peterkenji.blogspot.com/2009/08/using-apache-httpclient-4-with-google.html)。

# android - 无法编译 Android 测试应用程序

> ID：10842501
> 
> 赞同：2
> 
> 时间：2012-05-31T23:13:16.607
> 
> 标签：android, sdk, development-environment

我决定尝试为 Android 编程。我开始了他们的教程，但无法运行第一个项目自动创建的应用程序。我怀疑我的计算机设置错误，但不知道在哪里搜索错误。

教程说要转到新创建的项目的目录并运行`ant debug`. 这对我来说是一个错误：`java.lang.NoClassDefFoundError: com.android.sdklib.internal.build.DebugKeyProvider`。我怀疑 SDK 安装错误，但不知道出了什么问题或如何修复它。

我的电脑运行 openSUSE 12.1 64 位。我安装了 Oracte JDK 版本 1.7.0_04，以及包括工具和平台 Android 4.0 和 4.0.3 的 Android SDK。安装后，我将android工具文件夹添加到我的路径环境中，并为我的手机添加了udev规则，但没有做进一步的自定义。adb 看到我的手机，我可以用 ddms 截屏。我不使用 Eclipse。

我错过了设置的某些部分吗？如何解决此问题？

**更新**我发现了一个关于有同样问题的人的[邮件列表讨论。](http://groups.google.com/group/android-beginners/browse_thread/thread/5bbfbafbb4c15535?fwc=1)他通过在他们的 /usr/bin 中更新一个名为“keytool”的符号链接来解决这个问题，以指向正确的文件。我没有这样的链接，所以我创建了它。问题仍然存在。回答该线程的人建议 SDK 中可能缺少名为“jarutil.jar”的文件。即使从头开始重新安装，我的 SDK 中也没有这样的文件。由于讨论已经一年多了，我什至不知道当前版本中是否应该存在这样的文件。

以下是该`ant debug`命令的完整输出：

> rumtscho@bradbury:~/dev/learn-android/MyFirstApp> ant debug Buildfile: /home/rumtscho/dev/learn-android/MyFirstApp/build.xml
> 
> -设置模式检查：
> 
> -设置调试文件：
> 
> -设置调试模式：
> 
> -调试混淆检查：
> 
> -setup: [echo] 根据需要创建输出目录... [echo] 为 MyFirstApp 收集信息... [setup] Android SDK Tools Revision 19 [setup] 项目目标：Android 4.0.3 [setup] API 级别：15 [ setup] [setup] ------------------ [setup] 解决库依赖项：[setup] 没有库依赖项。[setup] [setup] ------------------ [setup] API<=15：将 annotations.jar 添加到类路径。[设置] [设置] ------------------ [设置] 警告：未设置 minSdkVersion 值。应用程序将安装在所有 Android 版本上。
> 
> -构建设置：
> 
> -预构建：
> 
> -code-gen: [echo] ---------- [echo] 处理aidl 文件... [aidl] 没有要编译的AIDL 文件。[echo] ---------- [echo] 处理 RenderScript 文件... [renderscript] 没有要编译的 RenderScript 文件。[echo] ---------- [echo] 处理资源... [aapt] 没有更改的资源。R.java 和 Manifest.java 保持不变。[echo] ---------- [echo] 处理 BuildConfig 类... [buildconfig] 生成 BuildConfig 类。
> 
> -预编译：
> 
> -compile: [javac] 将 1 个源文件编译到 /home/rumtscho/dev/learn-android/MyFirstApp/bin/classes
> 
> -编译后：
> 
> - 混淆：
> 
> -dex: [dex] 找到修改过的输入文件 [dex] 将编译后的文件和外部库转换成/home/rumtscho/dev/learn-android/MyFirstApp/bin/classes.dex...
> 
> -crunch：[crunch] 在源目录中处理 PNG 文件：/home/rumtscho/dev/learn-android/MyFirstApp/res [crunch] 到目标目录：/home/rumtscho/dev/learn-android/MyFirstApp/bin/res
> [crunch] 压缩 0 个 PNG 文件以更新缓存
> 
> -package-resources: [aapt] 创建完整资源包...
> 
> -package: [apkbuilder] 当前构建类型与以前的构建不同：强制 apkbuilder 运行。[apkbuilder] 创建 MyFirstApp-debug-unaligned.apk 并使用调试密钥对其进行签名...
> 
> 构建失败/home/rumtscho/android-sdk-linux/tools/ant/build.xml:886：执行此行时发生以下错误：/home/rumtscho/android-sdk-linux/tools/ant/build.xml :897: 执行此行时发生以下错误：/home/rumtscho/android-sdk-linux/tools/ant/build.xml:307: java.lang.NoClassDefFoundError: com.android.sdklib.internal.build.DebugKeyProvider在 java.lang.Class.initializeClass(libgcj.so.12) 在 com.android.sdklib.build.ApkBuilder.getDebugKeystore(ApkBuilder.java:919) 在 com.android.ant.ApkBuilderTask.execute(ApkBuilderTask.java:334 )
> 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java.lang.reflect.Method.invoke(libgcj.so.12) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant.Task.perform (Task.java:348) 在 org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
> 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java。 lang.reflect.Method.invoke(libgcj.so.12) at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) at org.apache.tools.ant.Task.perform(Task. java:348) 在 org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398) 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java.lang.reflect.Method.invoke(libgcj.so.12) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant.Task.perform (Task.java:348) 在 org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
> 在 com.android.ant.IfElseTask.execute(IfElseTask.java:124) 在 org.apache。 tools.ant.UnknownElement.execute(UnknownElement.java:291)
> at java.lang.reflect.Method.invoke(libgcj.so.12) at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java: 106) 在 org.apache.tools.ant.Task.perform(Task.java:348) 在 org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
> 在 com.android.ant.IfElseTask .execute(IfElseTask.java:124) 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java.lang.reflect.Method.invoke(libgcj.so.12) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant.Task.perform (Task.java:348) 在 org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
> 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java。 lang.reflect.Method.invoke(libgcj.so.12) at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) at org.apache.tools.ant.Task.perform(Task. java:348) 在 org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398) 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
> 在 java.lang.reflect.Method.invoke(libgcj.so.12) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant.Task.perform (Task.java:348) 在 org.apache.tools.ant.Target.execute(Target.java:390) 在 org.apache.tools.ant.Target.performTasks(Target.java:411) 在 org.apache。 tools.ant.Project.executeSortedTargets(Project.java:1399)
> at org.apache.tools.ant.Project.executeTarget(Project.java:1368) at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor. java:41) 在 org.apache.tools.ant.Project.executeTargets(Project.java:1251)
> 在 org.apache.tools.ant.Main.runBuild(Main.java:809) 在 org.apache.tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher .run(Launcher.java:280) at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 原因：java.lang.ClassNotFoundException: java.security.KeyStore$ProtectionParameter at org.apache .tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1361) 在 org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1311) 在 org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java :1064) 在 java.lang.ClassLoader.loadClass(libgcj.so.12) 在 java.lang.Class.initializeClass(libgcj.so.12) ...48 更多
> 
> 总时间：3秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:29:17.997

Oracle JDK rpm 不以 SuSE 方式配置 Java。特别是，您的 JAVA_HOME 可能设置不正确。

试试`JAVA_HOME=/usr/java/default ant debug`。

还要确保`readlink -f `which java``指向您的 Oracle JDK

看来您可以`JAVA_HOME`永久设置`/etc/java/java.conf`

Apache Ant 手册建议使用以下方法设置 ant 需要的环境变量：

```
export ANT_HOME=/usr/local/ant
export JAVA_HOME=/usr/local/jdk-1.5.0.05
export PATH=${PATH}:${ANT_HOME}/bin 
```

其中jdk号应该指向电脑上安装的JDK号。这也会永久设置变量。

# php - 如何让 slickgrid div 根据表格大小调整大小

> ID：10842504
> 
> 赞同：3
> 
> 时间：2012-05-31T23:13:31.547
> 
> 标签：php, jquery, jquery-ui, spreadsheet, slickgrid

我希望我们有一些熟悉 slickGrid 的用户了解 StackOverflow 是如何使用它的 :)

我有一个包含我的 slickGrid 的 HTML，如下所示：

```
 <div style="position:relative; overflow:visible; width:600px; margin:25px 0 0 0;">

    <div id="myGrid" style="width:100%;overflow:visible; min-height:100px; max-height:300px;"></div>
  </div>

  <div class="options-panel">
    <h2>Demonstrates:</h2>
    <ul>
      <li>adding basic keyboard navigation and editing</li>
      <li>custom editors and validators</li>
      <li>auto-edit settings</li>
    </ul>

    <h2>Options:</h2>

    <button onclick="grid.setOptions({autoEdit:true})">Auto-edit ON</button>
    &nbsp;
    <button onclick="grid.setOptions({autoEdit:false})">Auto-edit OFF</button>
  </div>

<script  type="text/javascript" language="javascript" src="./js/slickGrid/lib/firebugx.js"></script>
<!-- <script src="js/slickGrid/lib/jquery-1.7.min.js"></script>-->
<script src="js/slickGrid/lib/jquery-ui-1.8.16.custom.min.js.php"></script>
<script src="js/slickGrid/lib/jquery.event.drag-2.0.min.js"></script>

<script src="js/slickGrid/slick.core.js"></script>
<script src="js/slickGrid/plugins/slick.cellrangedecorator.js"></script>
<script src="js/slickGrid/plugins/slick.cellrangeselector.js"></script>
<script src="js/slickGrid/plugins/slick.cellselectionmodel.js"></script>
<script src="js/slickGrid/slick.formatters.js"></script>
<script src="js/slickGrid/slick.editors.js"></script>
<script src="js/slickGrid/slick.grid.js"></script>

<script>
  function requiredFieldValidator(value) {
    if (value == null || value == undefined || !value.length) {
      return {valid: false, msg: "This is a required field"};
    } else {
      return {valid: true, msg: null};
    }
  }

  var grid;
  var data = [];
  var columns = [
    {id: "id", name: "Id", field: "id", width: 20, minWidth: 20, maxWidth:20, cssClass: "cell-title", editor: Slick.Editors.Text, validator: requiredFieldValidator, sortable: true},
    {id: "date", name: "Date", field: "date", minWidth: 80, editor: Slick.Editors.Date, sortable: true},
    {id: "venue", name: "Venue", field: "venue", width: 120, minWidth:120, editor: Slick.Editors.Text, sortable: true},
    {id: "event", name: "Event", field: "event", width: 180, minWidth:180, editor: Slick.Editors.Text, sortable: true},
    {id: "description", name: "Additional", field: "desc", width: 180, minWidth:180, editor: Slick.Editors.Text, sortable: true},
    {id: "visible", name: "Visible", field: "visible", width: 20, minWidth: 20, cssClass: "cell-effort-driven", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox, sortable: true}
  ];
  var options = {
    editable: true,
    enableAddRow: true,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: true,
    multiColumnSort: true
  };

  $(function () {
    for (var i = 0; i < 6; i++) {
      var d = (data[i] = {});

      d["id"] = i;
      d["date"] = "06/31/2012";
      d["venue"] = "Sample Venue";
      d["event"] = "Sample Event";
      d["desc"] = "$45 Door";
      d["visible"] = (i % 5 == 0);
    }

    grid = new Slick.Grid("#myGrid", data, columns, options);

    grid.setSelectionModel(new Slick.CellSelectionModel());

    grid.onAddNewRow.subscribe(function (e, args) {
      var item = args.item;
      grid.invalidateRow(data.length);
      data.push(item);
      grid.updateRowCount();
      grid.render();
    });

    grid.onSort.subscribe(function (e, args) {
      var cols = args.sortCols;

      data.sort(function (dataRow1, dataRow2) {
        for (var i = 0, l = cols.length; i < l; i++) {
          var field = cols[i].sortCol.field;
          var sign = cols[i].sortAsc ? 1 : -1;
          var value1 = dataRow1[field], value2 = dataRow2[field];
          var result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
          if (result != 0) {
            return result;
          }
        }
        return 0;
      });
      grid.invalidate();
      grid.render();
    });
  })
</script>

<hr />EOP 
```

我想要的是让我的 slickGrid 收集数据，然后让 div 自动调整大小以包含更新的网格。目前看来，div大小必须静态设置？如果我没有为 div 的高度设置值`"myGrid"`，它只是将它的高度设置为 0。我希望 div 随着它加载的网格的大小而扩展。

gitHub 上的 slickgrid 文档（[https://github.com/mleibman/SlickGrid/wiki/_pages](https://github.com/mleibman/SlickGrid/wiki/_pages)）非常有限（公平地说，作者承认这一点）。我在谷歌上的这个话题也遇到了很多麻烦。

我知道它是特定于软件的，但真的希望我们有一些 slickGrid Guru，因为这个工具看起来很棒！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T09:18:35.380

您可以使用该`autoHeight`选项来实现此目的。

```
 options = {
    ...
    autoHeight: true
  }; 
```

包含的 div 将展开以容纳整个网格，从而无需滚动条。

[你可以在这里](http://mleibman.github.com/SlickGrid/examples/example11-autoheight.html)找到一个例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T12:57:30.567

我建议将以下代码添加到 onpagingInfoChanged

```
dataView.onPagingInfoChanged.subscribe(function (e, pagingInfo) {
//......

///******************************************************
    var divSize = 2 + (options.rowHeight * (pagingInfo.pageSize +1)); 
    $("#myGrid").css( 'height' , divSize+'px' )
    grid.resizeCanvas()
///*******************************************************

}); 
```

有点懒惰，我将 2 px 添加到高度以确保 VScrollbar 不会出现，但我相信您可以找出更令人愉悦的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T04:46:53.513

不幸的是，autoHeight 和 paging 不能一起使用。如果要使用分页，可以按如下方式自动调整表格的高度（确保在渲染数据之前执行此操作）：

```
// Determine the total width of the grid div element
var gridWidth = 0;
for( i in columns )
{
    if( columns[i].width != null && columns[i].width != 0 )
    {
        // Use the specified width
        gridWidth += columns[i].width;
    }
    else
    {
        // If the column width is not specified, or is zero, try to use the default column width

        if( columns[i].defaultColumnWidth == null ) // If default also does not exist
            gridWidth += 80;                        // Pick an arbitrary default width (could replace with CSS property)
        else
            gridWidth += columns[i].defaultColumnWidth;
    }
}

// Calculate the height of the Div by adding the values of the header row height and the row height * # rows
var rowH = (options.rowHeight != null ? options.rowHeight : 25); // If no rowHeight is specified, use the default size 25 (could be set by CSS)
var headerH = 0;

// First, determine whether to account for the header row
if( options.showHeaderRow == null || options.showHeaderRow == true )
{  
    // If so, use specified height, or default height
    if( options.headerRowHeight == null )
        headerH = 25;
    else
        headerH = options.headerRowHeight;        
}

// Set the table size
var divSize = (json.length * rowH) + headerH + 1;
$j("#myGrid").css( 'height' , divSize+'px' )
             .css( 'width'  , gridWidth+'px' ); 
```

# java - PHP Java AES CBC 加密不同的结果

> ID：10842509
> 
> 赞同：1
> 
> 时间：2012-05-31T23:14:01.300
> 
> 标签：java, php, encryption, aes

PHP函数：

```
$privateKey = "1234567812345678";
$iv = "1234567812345678";
$data = "Test string";

$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $privateKey, $data, MCRYPT_MODE_CBC, $iv);

echo(base64_encode($encrypted));

Result: iz1qFlQJfs6Ycp+gcc2z4w== 
```

* * *

Java 函数

```
public static String encrypt() throws Exception{
try{
    String data = "Test string";
    String key = "1234567812345678";
    String iv = "1234567812345678";

    javax.crypto.spec.SecretKeySpec keyspec = new javax.crypto.spec.SecretKeySpec(key.getBytes(), "AES");
    javax.crypto.spec.IvParameterSpec ivspec = new javax.crypto.spec.IvParameterSpec(iv.getBytes());

    javax.crypto.Cipher cipher = javax.crypto.Cipher.getInstance("AES/CBC/NoPadding");
    cipher.init(javax.crypto.Cipher.ENCRYPT_MODE, keyspec, ivspec);
    byte[] encrypted = cipher.doFinal(data.getBytes());

    return new sun.misc.BASE64Encoder().encode(encrypted);

}catch(Exception e){
    return null;
} 
```

}

返回空值。

请注意，我们不允许更改 PHP 代码。有人可以帮助我们在 Java 中获得相同的结果吗？非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T00:39:11.207

如果你不简单地吞下`Exception`你`encrypt()`日常工作中可能发生的事情，你就会对正在发生的事情有更好的了解。如果您的函数正在返回`null`，那么显然发生了异常，您需要知道它是什么。

事实上，例外是：

```
javax.crypto.IllegalBlockSizeException: Input length not multiple of 16 bytes
    at com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:854)
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:828)
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:676)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313)
    at javax.crypto.Cipher.doFinal(Cipher.java:2087)
    at Encryption.encrypt(Encryption.java:20)
    at Encryption.main(Encryption.java:6) 
```

果然，您的纯文本只有 11 个 Java 字符长，在您的默认编码中，它将是 11 个字节。

您需要检查 PHP`mcrypt_encrypt`函数的实际作用。由于它有效，它显然使用了一些填充方案。您需要找出它是哪一个并在您的 Java 代码中使用它。

好的 - 我查找了手册页`mcrypt_encrypt`。它说：

> 将使用给定密码和模式加密的数据。如果数据的大小不是`n * blocksize`，数据将被填充`\0`。

所以你需要在 Java 中复制它。这是一种方法：

```
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class Encryption
{
    public static void main(String args[]) throws Exception {
        System.out.println(encrypt());
    }

    public static String encrypt() throws Exception {
        try {
            String data = "Test string";
            String key = "1234567812345678";
            String iv = "1234567812345678";

            Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding");
            int blockSize = cipher.getBlockSize();

            // We need to pad with zeros to a multiple of the cipher block size,
            // so first figure out what the size of the plaintext needs to be.
            byte[] dataBytes = data.getBytes();
            int plaintextLength = dataBytes.length;
            int remainder = plaintextLength % blockSize;
            if (remainder != 0) {
                plaintextLength += (blockSize - remainder);
            }

            // In java, primitive arrays of integer types have all elements
            // initialized to zero, so no need to explicitly zero any part of
            // the array.
            byte[] plaintext = new byte[plaintextLength];

            // Copy our actual data into the beginning of the array.  The
            // rest of the array is implicitly zero-filled, as desired.
            System.arraycopy(dataBytes, 0, plaintext, 0, dataBytes.length);

            SecretKeySpec keyspec = new SecretKeySpec(key.getBytes(), "AES");
            IvParameterSpec ivspec = new IvParameterSpec(iv.getBytes());

            cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);
            byte[] encrypted = cipher.doFinal(plaintext);

            return new sun.misc.BASE64Encoder().encode(encrypted);

        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

当我运行时，我得到：

```
iz1qFlQJfs6Ycp+gcc2z4w== 
```

这就是你的 PHP 程序得到的。

* * *

**更新（2016 年 6 月 12 日）**：从 Java 8 开始，JavaSE 最终附带了文档化的 base64 编解码器。所以而不是

```
return new sun.misc.BASE64Encoder().encode(encrypted); 
```

你应该做类似的事情

```
return Base64.Encoder.encodeToString(encrypted); 
```

或者，使用 3rd-party 库（例如`commons-codec`）进行 base64 编码/解码，而不是使用未记录的内部方法。

# javascript - Google Maps v3：标记和信息窗口未显示

> ID：10842511
> 
> 赞同：1
> 
> 时间：2012-05-31T23:14:06.897
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, infowindow

这张地图正在部分工作。它显示了两个地图，但我无法弄清楚为什么标记和信息窗口没有显示在路线图上。你们能帮帮我吗？

**jsfiddle**：http: [//jsfiddle.net/btqVx/2/](http://jsfiddle.net/btqVx/2/)

**Javascript：**

```
//<![CDATA[
// ************************   Variables   ************************
//****** Map Options ******//
var roadmap =
        {
        infoWindow: new google.maps.InfoWindow(),
        options:
            {
            map:
                {
                center: new google.maps.LatLng( 34.021868, -118.29322300000001 ),
                zoom: 15,
                mapTypeId: 'roadmap'
                }
            }
        };
        roadmap.options.marker =
            {
            position: roadmap.options.center,
            title: 'Hello',
            icon: 'http://maps.google.com/mapfiles/ms/micons/blue-dot.png',
            shadow: 'http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png'
            };

//****** Street view Options ******//
var StreetView =
        {
        options:
            {
            position: roadmap.options.map.center,
            zoom: 1
            },
        geometry:
            {
            MaxDistance: 30,
            cameraHeading: 0
            }
        };
        StreetView.StreetViewService = new google.maps.StreetViewService();

// ************************   Functions   ************************
//****** InfoWindow ******//
function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
        infoWindow.getContent();marker.openInfoWindowTabsHtml(infoTabs);
    });
}

//****** onLoad ******//
function googleMaps()
{
    // ************************   Road map   ************************
    roadmap.map = new google.maps.Map(document.getElementById("map"), roadmap.options.map );

    // ************************   Road map's Marker   ************************
    roadmap.options.marker.map = new google.maps.Map(document.getElementById("map"), roadmap.options.map );
    roadmap.marker = new google.maps.Marker( roadmap.options.marker );

    // ************************   Add infoWindow & click Listener to Marker   ************************
    bindInfoWindow( roadmap.marker, roadmap.map, roadmap.infoWindow, roadmap.options.marker.title );

    // ************************   Street view map   ************************
    var building = StreetView.options.position;

    function getHeading(buildingLatLng, callback) {
        StreetView.StreetViewService.getPanoramaByLocation(buildingLatLng, StreetView.geometry.MaxDistance, function (streetViewPanoramaData, status) {
            if(status === google.maps.StreetViewStatus.OK) {
                var car = streetViewPanoramaData.location.latLng;
                callback(google.maps.geometry.spherical.computeHeading(car, building));         
            }
        });
    }

    getHeading(building, function(carHeading) {
      StreetView.map = new google.maps.StreetViewPanorama(document.getElementById("map_StreetView"), {
        position: StreetView.options.position,
        pov: { heading: carHeading, pitch: 0, zoom: 1 }
      });
    });

} //end of load()

// ************************   Load   ************************
//Call googleMaps after document is loaded
google.maps.event.addDomListener(window, 'load', function(){
    googleMaps();
    //you can add more code here
    });
//]]> 
```

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Street View & Road map</title>

    <!-- START: Google Maps API -->
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="street_view.js"></script>
    <!-- __END: Google Maps API -->
</head>

<body>
    <div id="map-container" >
        <div id="map_StreetView" style="width: 350px; height: 250px"></div><br/>
        <div id="map" style="width: 350px; height: 250px"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:40:08.633

你好 :) 这是我更新的演示[http://jsfiddle.net/RgaCe/](http://jsfiddle.net/RgaCe/)

我做了这些改变：

(1) icon/shadow 变成`MarkerImage`s 因为他们没有排队

```
 var bluePin = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/micons/blue-dot.png',
      new google.maps.Size(32, 32),
      new google.maps.Point(0, 0),
      new google.maps.Point(15, 32));

    var pinShadow = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png',
      new google.maps.Size(59, 32),
      new google.maps.Point(0, 0),
      new google.maps.Point(15, 32)); 
```

(2)

```
roadmap.options.marker = 
        {
        // CHANGE add .map.
        position: roadmap.options.map.center, 
```

(3) 注释掉这个没有定义的函数`//marker.openInfoWindowTabsHtml(infoTabs);`

(4)

```
// CHANGE roadmap.map TO roadmap.options.marker.map
    bindInfoWindow( roadmap.marker, roadmap.options.marker.map, 
      roadmap.infoWindow, roadmap.options.marker.title ); 
```

# batch-file - 使用批处理 (.bat) 使用 IE 打开本地文件

> ID：10842518
> 
> 赞同：1
> 
> 时间：2012-05-31T23:15:00.203
> 
> 标签：batch-file

```
start iexplore test.html
exit 
```

尝试打开[http://test.html](http://test.html)，我只想打开本地文件 test.html，它与批处理文件位于同一目录中。

```
start firefox test.html
exit 
```

按预期工作，通过在Firefox中打开本地文件......无论如何强制批处理打开相对于批处理文件的本地文件？

按照 Dave 的建议使用`start iexplore file://%CD%\test.html`可以工作，但不能在拇指驱动器上使用，这是我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T02:33:14.767

这似乎适用于本地和 USB 驱动器：

`START iexplore %~dps0test.html`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T23:23:39.330

要打开您通常会传入的文件；

`start iexplore file://c:\test\test.html`

所以你需要一些方法来了解你当前的路径。您可以使用[`%CD%`伪变量](http://blogs.msdn.com/b/oldnewthing/archive/2005/01/28/362565.aspx)来做到这一点。

`start iexplore file://%CD%\test.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T19:11:59.200

利用

```
"C:\Program Files\Internet Explorer\iexplore.exe" "file://%~dp0test.html" 
```

如果

*   您不想假设 IE 是默认浏览器
*   您想在地址栏中显示完整的文件名

# xaml - 设置所有依赖项属性后是否会触发事件？

> ID：10842520
> 
> 赞同：3
> 
> 时间：2012-05-31T23:15:11.160
> 
> 标签：xaml, windows-8, winrt-xaml

我的控件有 5 个依赖属性。我像这样在 XAML 中设置它们：

```
<MyControl Prop1="1" Prop2="2" Prop3="3" Prop4="4" /> 
```

如您所见，我只设置了 XAML 中 5 个属性中的 4 个。

我需要找到一些机制来表明 XAML 中设置的所有属性都已被处理。通过这个事件，我可以运行我的 SetItAllUp() 方法。

**选项 1**。使用 DP 设定器

失败：不是一个选项，因为我只能调用一次 SetItAllUp()。这也具有基于 XAML 中每个 DP 的序号声明激活的副作用。如果我的属性之间存在*某种*类型的链接或依赖关系，这会破坏它。

**选项 2**。使用 DP 设置器，并测试所有值是否已设置

FAIL：不是一个选项，因为有时某些 DP 值是可选的 - 让我们假设确定可选值是否正确设置所需的逻辑太复杂，暂时无法实施此解决方案。

**选项 3**。使用 MyControl.Loaded

FAIL：不是一个选项，因为它触发得太早了。事实上，我能看到的每一个事件都过早地触发了。就好像对象被创建了，然后引擎盖下的东西开始根据声明设置 DP 值。

* * *

## **更新**！加载是解决方案。我的问题有缺陷。

有什么活动什么的，对吧？// 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:43:48.357

加载工作正常。对困惑感到抱歉。

我测试了这个类：

```
public class MyPath : Path
{
    public MyPath()
    {
        Loaded += MyPath_Loaded;
    }

    void MyPath_Loaded(object sender, RoutedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Loaded");
    }
    public int Test1
    {
        get { return (int)GetValue(Test1Property); }
        set
        {
            SetValue(Test1Property, value);
            System.Diagnostics.Debug.WriteLine("Test1");
        }
    }
    public static readonly DependencyProperty Test1Property =
        DependencyProperty.Register("Test1", typeof(int), typeof(MyPath),
        new PropertyMetadata(DependencyProperty.UnsetValue, null));

    public int Test2
    {
        get { return (int)GetValue(Test2Property); }
        set
        {
            SetValue(Test2Property, value);
            System.Diagnostics.Debug.WriteLine("Test2");
        }
    }
    public static readonly DependencyProperty Test2Property =
        DependencyProperty.Register("Test2", typeof(int), typeof(MyPath),
        new PropertyMetadata(DependencyProperty.UnsetValue, null));

    public int Test3
    {
        get { return (int)GetValue(Test3Property); }
        set
        {
            SetValue(Test3Property, value);
            System.Diagnostics.Debug.WriteLine("Test3");
        }
    }
    public static readonly DependencyProperty Test3Property =
        DependencyProperty.Register("Test3", typeof(int), typeof(MyPath),
        new PropertyMetadata(DependencyProperty.UnsetValue, null));

    public int Test4
    {
        get { return (int)GetValue(Test4Property); }
        set
        {
            SetValue(Test4Property, value);
            System.Diagnostics.Debug.WriteLine("Test4");
        }
    }
    public static readonly DependencyProperty Test4Property =
        DependencyProperty.Register("Test4", typeof(int), typeof(MyPath),
        new PropertyMetadata(DependencyProperty.UnsetValue, null));

    public int Test5
    {
        get { return (int)GetValue(Test5Property); }
        set
        {
            SetValue(Test5Property, value);
            System.Diagnostics.Debug.WriteLine("Test5");
        }
    }
    public static readonly DependencyProperty Test5Property =
        DependencyProperty.Register("Test5", typeof(int), typeof(MyPath),
        new PropertyMetadata(DependencyProperty.UnsetValue, null));
} 
```

使用此 XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <local:MyPath Test1="1" Test2="2" Test3="3" Test4="4" />
</Grid> 
```

并得到了这个跟踪：

```
Test1
Test2
Test3
Test4
Loaded 
```

事实证明，Loaded 工作得很好。我之前的测试一定有其他因素。我的简化测试显示 Loaded 看起来很完美。

# excel - 如何将鼠标设置到所有工作表中的特定单元格？

> ID：10842526
> 
> 赞同：1
> 
> 时间：2012-05-31T23:16:02.993
> 
> 标签：excel, vba

我想将光标/鼠标指针设置为单元格`AL2`，但我的程序只能在活动工作表上进行

```
Dim a As Worksheet
For Each Sheet In ThisWorkbook.Sheets
    Range("AL2").Select
Next Sheet 
```

谁能解释为什么代码不符合我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:29:15.603

这是你正在尝试的吗？

```
Dim aSheet As Worksheet
For Each aSheet In ThisWorkbook.Sheets
    aSheet.Activate
    Range("AL2").Select
Next Sheet 
```

话虽如此，人们应该始终避免使用`.Select`和`.Activate`

为什么要选择一个单元格？你到底想做什么？

# ruby-on-rails - number_with_precision 返回整数

> ID：10842529
> 
> 赞同：0
> 
> 时间：2012-05-31T23:16:23.857
> 
> 标签：ruby-on-rails, ruby, number-to-currency, number-with-delimiter

`number_with_precision()`我对and有一个非常奇怪的问题`number_to_currency()`。

`comparison of String with 0 failed`在我的应用程序中，如果我没有设置，它们都会引发`:precision`

但是当我在 irb 中尝试相同的功能时，一切都很好：

```
1.9.3p0 :058 > helper.number_with_precision(12)
 => "12.000" 
1.9.3p0 :059 > helper.number_to_currency(12)
 => "12.00 €" 
```

我查看了我的 Gemfile，猜测它可能来自我的一个 Gem，但我没有找到任何东西。

我有一种奇怪的感觉，有些东西正在压倒一切`number_with_delimiter()`，导致这个错误，但我不知道是什么。

仅供参考，我使用 Rails 3.2.1 和 ruby​​ 1.9.1，这是我的 Gemfile：[https ://gist.github.com/2847099](https://gist.github.com/2847099)

谢谢你提前。

# binary - 二进制过量符号

> ID：10842530
> 
> 赞同：0
> 
> 时间：2012-05-31T23:16:28.773
> 
> 标签：binary, type-conversion, computer-science

我正在学习计算机科学，但我无法自己解决问题。

有这个数字：`-233`使用 10 位表示

我需要做的是用多余的符号表示数字`(2^n-1)`

所以，我想出了：

```
1 base 10 = 0000000001

2^10-1 = 1000000000 
```

1 在我的符号中以 10 为底 = 1000000001

所以，我的 -256 是 0000000001

我的 255 是 1111111110

这个符号后面的 -233 数字是什么？

书上的结果是`0 1 0 0 0 1 0 1 1 1`

我的结果：0 0 0 0 0 1 0 1 1 1

希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:25:08.487

我认为您走在正确的道路上，但只是犯了一个小错误。

由于我对符号不熟悉，所以我不得不先看一下它。似乎 K 通常选择为 2^(n-1) = 2^9 = 512。这意味着`00 0000 0000`= -512 和`11 1111 1111`= 511。我不知道你是如何得到 -256 的，也许是你的错误。

现在，从 -512 ( `00 0000 0000`) 到 -233 有 279 ( `01 0001 0111`) 的差异。这似乎是您的示例的结果。

为了更容易构建，您可以这样做（假设 K = 2^(n-1)） - 示例编号 -12：

*   使用正值 (12) 的二进制表示。`00 0000 1100`
*   添加 K (2^(n-1))：`10 0000 1100`
*   反转所有位：`01 1111 0011`
*   加 1（因为零值）：`01 1111 0100`

# javascript - 绑定到多个元素时，Firefox 中的鼠标移动事件缓慢

> ID：10842532
> 
> 赞同：0
> 
> 时间：2012-05-31T23:17:08.450
> 
> 标签：javascript, jquery, firefox

我目前正在开发一个插件，当父元素被“输入”时，它在子元素上使用 mousemove 事件

当有一个实例时它工作正常，但如果用户有多个实例怎么办？

该插件将用于包含图像的 div，并且在光标后面有一个 div。

因此，当您将鼠标悬停在图像上时，div 会跟随光标..

我认为这可能是因为 mousemove 事件绑定到太多元素，所以在“mouseleave”上我取消了 mousemove，但问题仍然存在。

在 safari 和 chrome 中似乎很好。

```
elem
.on('mouseenter', function(){

  $(this).on('mousemove', function(e){
     setPosition();
  });

})
.on('mouseleave', function(){

  $(this).unbind('mousemove');

}); 
```

setPosition() 函数只是设置 div 在光标上的位置，使其居中。

只有当插件在多个元素上运行时它才会缓慢？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:26:02.143

如果您使用`on`to 绑定，那么您应该使用`off`to unbind 而不是`unbind`。那可能是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:53:53.023

您应该在包含元素上处理事件，而不是将事件处理程序附加到每个单独的元素。

例如：

```
$('#parentDiv').on('mousemove', '#someDiv1, #someDiv2', function(event)
{
  // event.target is the div that triggered the mousemove event
  setPosition(event.target);
}); 
```

这意味着您在一个共同的父级上创建 1 个事件处理程序，而不是每个元素 1 个事件处理程序（谷歌“jQuery 事件传播”以获取更多详细信息）。虽然这确实使您的 setPosition() 方法有点复杂，但它应该会提高性能，具体取决于您如何实现它。

# sql - 将数字转换为没有小数位的字符串

> ID：10842535
> 
> 赞同：0
> 
> 时间：2012-05-31T23:17:53.717
> 
> 标签：sql, sql-server, sql-server-2008

我有一个相当大的存储过程，我正在使用，所以我只包括我关心的片段：

```
 QUOTENAME(isnull(NumberCount,'0'), '"'),
                QUOTENAME( isnull(QualifiedCount,'0'), '"'),
                QUOTENAME((isnull(RevenueAmount,'0')), '"'),
                QUOTENAME(isnull(CurrencyAmount,'0'), '"') 
```

在输出中，除 RevenueAmount 列外，所有具有 NULL 值的记录都显示为预期值为“0”。显示为“0.0”。这是因为它被声明为 NUMERIC(20,2)。如何让它显示值“0”？我认为在 isnull 条件中设置一个显式的 '0' 值会处理它，但事实并非如此。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:08:27.707

当 RevenueAmount 是or时显示`"0"`而不是显示：`"0.0"``0``null`

```
case IsNull(RevenueAmount, 0)
    when 0 then QUOTENAME('0', '"')
    else QUOTENAME(RevenueAmount, '"')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:28:09.583

您可以对`RevenueAmount`列执行此操作。诀窍是测试 null 或 0 并转换为正确的字符串格式

```
case RevenueAmount
    when null then QUOTENAME('0.0', '"')
    when 0 then QUOTENAME('0.0', '"')
else cast(QUOTENAME(isnull(RevenueAmount,'0'), '"') as varchar(20)) 
end
as [RevenueAmount] 
```

# iphone - 如何在 NavigationController 中创建 navigationController

> ID：10842539
> 
> 赞同：0
> 
> 时间：2012-05-31T23:18:14.023
> 
> 标签：iphone, ios, uinavigationcontroller

我只使用过来自 xcode 的苹果启动代码中的 navigatoinController。

我想知道是否以及如何在另一个导航控制器中创建导航控制器..但只是隐藏“子导航控制器”的菜单..

我一直在搞乱 UI 的东西，并试图创建一个视图数组，这些视图在堆栈的顶部视图上进行动画处理，但它导致了太多的头疼。因此我决定寻找可以处理所有内存内容的东西对我来说...只是我不确定如何在视图中分配导航控制器..通常它在应用程序委托等中完成。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T05:36:01.390

如果您使用故事板，则可以使用容器视图。在视图控制器中添加一个容器视图，您需要添加导航控制器，然后将其嵌入 segue 连接到您的子导航控制器。它看起来像以下。 [![在此处输入图像描述](../Images/625784618e9f2064f37867d058fbfedf.png)](https://i.stack.imgur.com/B6SLr.png)

运行后它看起来像 [![在此处输入图像描述](../Images/5af6129c1b743b7400c7887b62a5dd2c.png)](https://i.stack.imgur.com/lT52G.png)

# c++ - 真的很简单 C++：阅读某些内容后，fstream 中的运算符 >> 是否会删除换行符？

> ID：10842545
> 
> 赞同：3
> 
> 时间：2012-05-31T23:19:25.733
> 
> 标签：c++, fstream

```
// file.in
12
13

// main.cpp
fstream f("file.in", ios::in);
int n;
char c;
f >> n;
f.get(&c); 
```

提取数字 12 后，下一个字符是什么？它是换行符还是'1'？如果我调用 getline instread ，我会得到一个空行还是'13'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:22:08.267

它将分隔符留在输入缓冲区中，因此您读取的下一个字符将是换行符。但是请注意，大多数提取器会在提取任何内容*之前*`new-line`跳过空格（包括），因此除非您确实调用了这样的内容，否则通常不会看到。*`getline`*

 *编辑：要测试 ideone 之类的东西，请考虑使用`stringstream`：

```
#include <sstream>
#include <iostream>

int main(){ 
    std::istringstream f("12\n13");
    int n;
    char c;
    f >> n;
    f.get(c); // get takes a reference, not a pointer. Don't take the address.

    std::cout << "'" << c << "'";
    return 0;
} 
```

我不希望在这样的事情中看到 a`stringstream`和 an之间的区别`fstream`。*

# sql - 存储过程中的输出参数大小：Oracle 11g 的情况是否有所改善？

> ID：10842552
> 
> 赞同：1
> 
> 时间：2012-05-31T23:20:40.767
> 
> 标签：sql, oracle, plsql, oracle11g, indexing

[如本问题](https://stackoverflow.com/questions/3184338/how-can-we-define-output-parameter-size-in-stored-procedure/3186780)所述，在 Oracle 10g 中无法创建具有大小限制的 OUT 参数。11g 这个情况有改善吗？

这是我的现实问题：

[INET6_ATON 和 NTOA 函数的 Oracle PL/SQL 版本？](https://stackoverflow.com/questions/6470244/oracle-pl-sql-versions-of-inet6-aton-and-ntoa-functions/6949968)

不客气 :) 但是，我不喜欢这些函数的一件事是没有`RETURN CHAR(32)`强制任何基于函数的索引 (FBI) 对整个索引使用 4000 的最大 VARCHAR2 大小（这通常会出错由于索引字段大小限制），除非您将整个内容封装在 SUBSTR 中，强制固定大小。这很难用在典型的 SQL 语句中，因为您现在必须确保每个人不仅在使用函数，而且还使用 SUBSTR 封装，以便正确使用索引。

虚拟列会解决这个问题吗？如中，您为每个 IP 定义虚拟列，例如`srcip_iptohex`, `srcip_nettohex_start`, `srcip_nettohex_end`，然后将 CHAR(32) 限制放在虚拟列上。还是虚拟列甚至支持 PL/SQL 调用？由于虚拟列实际上并没有被存储，因此您仍然需要对这些列进行索引以确保它们有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:32:38.017

您无法更改虚拟列的类型，这将导致`ORA-54027`无法修改虚拟列的数据类型。

但是，您可以使用 SUBSTR 定义一个虚拟列（这将为该列提供适当的大小），然后对该虚拟列进行索引。所有针对该列的查询都可以使用该索引，而无需额外的“丑陋”SUBSTR。

# python - 带有自定义类的泡菜

> ID：10842553
> 
> 赞同：36
> 
> 时间：2012-05-31T23:21:08.623
> 
> 标签：python, pickle

假设我在文件 myClass.py 中有一个简单的 python 类定义

```
class Test:
    A = [] 
```

而且我还有两个测试脚本。第一个脚本创建一个 Test 类型的对象，填充数组 A，并将结果腌制到一个文件中。它立即将其从文件中解开，并且仍然填充数组。第二个脚本只是从文件中提取出来，并且**没有填充数组（即 A == []）。为什么是这样？**

测试1.py

```
import myClass
import pickle

x = myClass.Test()

for i in xrange(5):
    x.A.append(i)

f = open('data', 'w')
pickle.dump(x,f)
f.close()

f = open('data')
y = pickle.load(f)
f.close

print y.A 
```

和 test2.py

```
import myClass
import pickle

f = open('data')
y = pickle.load(f)
f.close

print y.A 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-31T23:29:10.830

这是因为您设置`Test.A`为类属性而不是实例属性。真正发生的事情是，对于 test1.py，从 pickle 文件中读回的对象与 test2.py 相同，但它使用了您最初分配的内存中的类`x.A`。

从文件中提取数据时，它会创建一个类类型的新实例，然后应用它需要的任何实例数据。但是您唯一的数据是类属性。它总是引用内存中的类，你在一个文件中修改了它，但不在另一个文件中。

比较此示例中的差异：

```
class Test:
    A = []  # a class attribute
    def __init__(self):
        self.a = []  # an instance attribute 
```

您会注意到实例属性`a`将被正确地腌制和取消腌制，而类属性`A`将简单地引用内存中的类。

```
for i in range(5):
    x.A.append(i)
    x.a.append(i)  

with open('data', 'wb') as f:
    pickle.dump(x,f)

with open('data', 'rb') as f:
    y = pickle.load(f)

>>> y.A
[0, 1, 2, 3, 4]
>>> y.a
[0, 1, 2, 3, 4]
>>> Test.A
[0, 1, 2, 3, 4]
>>> Test.A = []  # resetting the class attribute
>>> y.a 
[0, 1, 2, 3, 4]
>>> y.A  # refers to the class attribute
[] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-03-12T16:34:47.247

`__getstate__`这是一个老问题，如果你现在看到它，你可能想要设置`__setstate__`你的类，这样泡菜就会知道如何转储和加载你定义的类。

请参阅此处的[示例](https://stackoverflow.com/questions/1939058/simple-example-of-use-of-setstate-and-getstate)。

如果您的类很简单（例如，只有整数和字符串作为成员和任何方法），它应该可以自动选择。

# magento - 以编程方式为多选/选择 Magento 属性设置默认值

> ID：10842555
> 
> 赞同：3
> 
> 时间：2012-05-31T23:21:42.270
> 
> 标签：magento, select, default-value, custom-attributes, multi-select

以下是我创建新产品多选属性的方法：

```
$eav = new Mage_Catalog_Model_Resource_Setup('core_setup');

$eav->addAttribute(
    Mage_Catalog_Model_Product::ENTITY, 
    "product_country", 
    array(
        'label'                      => 'Country',
        'group'                      => 'General',
        'type'                       => 'text',
        'input'                      => 'multiselect',
        'global'                     => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
        'user_defined'               => true,
        'required'                   => true,
        'visible'                    => true,
        'source'                     => 'ns/some_source', // this source has the "UK" value
        'backend'                    => 'eav/entity_attribute_backend_array',
        'default'                    => 'UK',
    )
); 
```

我也尝试过使用“是/否”值

```
"type" => "boolean" 
```

或者

```
"type" => "select",
'source' => 'eav/entity_attribute_source_boolean' 
```

它们在功能上是相同的。

在所有情况下，具有`default`值的键正确填充`eav_attribute`表 column `default_value`。但`"default" => "1"`就编辑页面上的输入而言，拥有“是/否”属性并没有做任何事情。“否”仍然被选中，我期待“是”，因为“1”映射到“是”：

```
// Mage_Eav_Model_Entity_Attribute_Source_Boolean
$this->_options = array(
    array(
        'label' => Mage::helper('eav')->__('Yes'),
        'value' =>  1
    ),
    array(
        'label' => Mage::helper('eav')->__('No'),
        'value' =>  0
    ),
); 
```

多选也会发生同样的事情：默认情况下不选择任何选项。

我没主意了。如果不设置属性的默认值，有谁知道“默认”列/键的目的是什么？如何设置属性值以在新建/编辑产品后端页面上自动选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T09:07:37.123

我也遇到了这个问题，创建自定义 {product, customer, address} 属性和添加实体时出现问题。

在 Mage_Catalog_Model_Resource_Setup::_prepareValues 中定义了一些导致此问题的“默认”实体集。

最好的解决方案是在创建属性后加载属性并设置默认值。

```
 $model = Mage::getModel('eav/entity_attribute')
     ->load($installer->getAttributeId(Mage_Catalog_Model_Product::ENTITY, 'product_country'));
 $model
     ->setDefaultValue(Mage::helper('eav')->__('Yes'))
     ->save(); 
```

# php - 从 AJAX 获取返回值

> ID：10842557
> 
> 赞同：2
> 
> 时间：2012-05-31T23:22:03.947
> 
> 标签：php, javascript, jquery, ajax

我有一个 PHP 脚本，它检查电子邮件地址以确定它是否有效。该函数只返回`true`or `false`。我正在尝试实现对 php 文件的 ajax 调用并将`true`or`false`返回到 javascript 函数。目前我什么也没得到。

```
function validateForm() {
    var email = document.forms["contact"]["email"].value;
    var validEmail;

    $.ajax({
        type: "POST",
        url: "validateEmail.php",
        data: "email=" + email,
        success: function(result) {
            validEmail = result;
            console.log('result: ' + validEmail);
        }
    });
} 
```

如果我可以检索到，`true`或者`false`我将进行一些布尔检查以确定如何继续。`validateForm()`当用户单击表单提交按钮时，将调用该函数。

```
<form name="contact" action="submitOrder.php" onsubmit="return validateForm();" method="post"> 
```

如果电子邮件地址无效，我希望该`validateForm()`函数返回 false 以便永远不会调用 submitOrder.php 但由于 AJAX 的异步性质，我不确定如何执行此操作。

**更新**

该请求工作正常（我很确定）。这就是我在 Firebug 中看到的。 ![在此处输入图像描述](../Images/b0f1c986601b436358c2935a0ec6203d.png) 我仍然没有看到任何返回。控制台打印“结果：”。我还更改了 validateEmail.php 以返回数字 17，但我仍然没有返回任何内容。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:35:57.093

使用[JQuery 验证](http://docs.jquery.com/Plugins/Validation&ei=7P_HT-yeD6qi2QWs4qjjDQ&usg=AFQjCNGchUA4S60RlCTK8C6oY3QtcpBvfA&cad=rja)插件。然后从头开始散列它会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:30:18.453

如果您不想使 AJAX 调用同步，则可以在结果有效的情况下提交 Ajax 调用。调用您的 validateForm 并将 false 返回到 onsubmit。（我不会让 validateForm 本身返回 false，因为那不会是正交的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:31:58.507

我认为你需要一个 event.preventDefault(); 让异步调用正常工作

$('#submit-button-id').click(function(event){ event.preventDefault(); });

这应该会阻止浏览器在完成任何类型的验证之前提交表单。（注意，您需要为提交按钮提供一个可以引用的类或 ID 以便触发）。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T23:27:51.887

jQuery 的 ajax 函数默认是异步的。这意味着它发出ajax请求然后返回。您可能需要将`async`参数设置为 false，然后`validEmail`像您所做的那样在成功函数中进行设置。然后您可以在 ajax 调用后安全地返回 validEmail。

```
function validateForm() {
  var email = document.forms["contact"]["email"].value;
  var validEmail = false;

  $.ajax({
    type: "POST",
    url: "validateEmail.php",
    async: false,
    data: "email=" + email,
    success: function(result) {
        validEmail = result;
        console.log('result: ' + validEmail);
    }
  });

  return validEmail;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T23:28:31.320

我认为你有一个失踪; 在你的 jquery 调用结束时

```
$.ajax({
    type: "POST",
    url: "validateEmail.php",
    data: "email=" + email,
    success: function(result) {
        validEmail = result;
        console.log('result: ' + validEmail);
    }
}); 
```

我建议安装 firebug，这样你就可以看到 ajax 调用和响应发生了什么——你应该能够更容易地调试它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T00:13:54.943

不建议对 ajax 调用使用同步选项，因为它会暂时锁定浏览器。[请注意jquery 的 ajax() page](http://api.jquery.com/jQuery.ajax/)中的以下引用。

> 请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。

相反，您可以让提交表单的按钮调用 validateForm 函数，当调用 ajax 成功时，它可以提交表单。

```
function validateForm() {
    var email = document.forms["contact"]["email"].value;

    $.ajax({
        type: "POST",
        url: "validateEmail.php",
        data: "email=" + email,
        success: function(result) {
            if (result == true)
                document.forms["contact"].submit();
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T22:21:47.497

由于不必要地阻塞了 javascript，因此使用`async: false`AJAX 是一种糟糕的方式。使用客户端验证器（例如 jQuery Validate）是危险的，因为攻击者可以禁用 javascript 并提交无效表单。服务器端验证是必须的，它可以用好的旧 AJAX 来完成！

关键是回调。您尝试返回的任何内容`validateForm`都将在您的 AJAX 调用返回之前返回，因为 AJAX 是异步的（非阻塞）。这意味着您不能在不暂停所有 javascript 执行的情况下从 AJAX 成功函数返回值。相反，您传入一个回调函数作为您的 AJAX 成功函数可以调用的参数。在该回调中，您可以进行布尔检查以确定如何继续。您也可以直接在成功函数内部执行此操作（这实际上是一个回调！）但是回调参数和其他函数会稍微解耦代码，这是一个很好的做法。我修改了你的代码，给你一个例子来说明我的意思。

```
function validateForm(callback) {
    var email = document.forms["contact"]["email"].value;
    var validEmail;

    $.ajax({
        type: "POST",
        url: "validateEmail.php",
        data: "email=" + email,
        success: function(result) {
            validEmail = result;
            console.log('result: ' + validEmail);
            callback(result);
        }
    });
}

function doSomethingWithResult(result) {
    if (result === True) {
        // Do true stuff
    } else {
        // Do false stuff
    }
}

validateForm(doSomethingWithResult); 
```

# android - ArrayAdapter 与 admob adview ListView 崩溃

> ID：10842560
> 
> 赞同：1
> 
> 时间：2012-05-31T23:22:13.073
> 
> 标签：android, listview, admob, android-arrayadapter, adview

IM 试图通过 ArrayAdapter 将 admob AdView 放入 ListView。目前它加载正常，广告按预期显示在列表视图中。当我滚动时，当包含广告的行不在视图中时，应用程序会冻结。我想删除 adview 会导致一些问题。有没有办法防止这种情况？或者有没有办法检测何时从列表视图中删除一行？或者更好的是有没有一种方法不会从列表视图中清除该行并保留？

这是我在适配器 getView 方法中的内容：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;

    ChapterModel chapter = getItem(position);

        LinearLayout L;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.chapter_listview_ad, parent, false);

         }

            AdRequest request = new AdRequest();
            AdView adView;
            L=(LinearLayout) row.findViewById(R.id.chapter_row_layout);
                                        adView= new AdView((Activity) this.context,new AdSize(768,90), ADDID);

                adView.setAdListener(this);
                adView.loadAd(request);

                L.addView(adView); 
                 return row;
} 
```

eclipse 给了我：下图中的 NullPopinterException![在此处输入图像描述](../Images/7f735f2c231937d60e3016e47d292d7d.png)

注意：这可行，但会导致每次离开屏幕时都将添加删除并重新加载：

```
public int getItemViewType(int position) {
     // Don't let ListView try to reuse the views.
     return AdapterView.ITEM_VIEW_TYPE_IGNORE;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:23:10.923

仅供参考，AdMob 的条款要求一次只能在屏幕上显示 1 个 AdView，因此请注意不要将 AdView 添加到每个列表项。

[话虽如此，这里有一个很棒的 ListView适配器](http://code.google.com/p/google-mobile-dev/source/browse/adcatalog/src/com/google/ad/catalog/layouts/ListViewExampleListAdapter.java?repo=ad-catalog-android)的开源示例，它[调用的代码](http://code.google.com/p/google-mobile-dev/source/browse/adcatalog/src/com/google/ad/catalog/layouts/ListViewExample.java?repo=ad-catalog-android)显示了如何在每个 X 项中嵌入 AdMob 广告。适配器本身是另一个适配器对象的包装器，但会以指定的间隔嵌入广告。您可以将您的 ArrayAdapter 传递给此适配器，它会为您放入广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T12:36:20.120

请看[答案](https://stackoverflow.com/a/38828773/5109951)。admobadapter实现了 AdmobFetcher 类，[该类](https://github.com/clockbyte/admobadapter)预取和存储列表中每个位置的广告块。它可以防止列表在获取广告块和滚动时冻结。

# php - Doctrine 的 Symfony Bundle 存储库发生了什么？

> ID：10842562
> 
> 赞同：4
> 
> 时间：2012-05-31T23:22:19.143
> 
> 标签：php, symfony, doctrine-orm, bundles

我刚刚花了两个小时想知道为什么当我对我的项目进行 bin/vendors 更新时一切都崩溃了。我收到以下错误

> 致命：github.com/symfony/DoctrineMigrationsBundle.git/info/refs 未找到：您是否在服务器上运行了 git update-server-info？
> 
> 致命：github.com/symfony/DoctrineMongoDBBundle.git/info/refs 未找到：您是否在服务器上运行了 git update-server-info？
> 
> 致命：github.com/symfony/DoctrineFixturesBundle.git/info/refs 未找到：您是否在服务器上运行了 git update-server-info？

我的部门没有改变任何东西

```
[DoctrineMigrationsBundle]
    git=http://github.com/symfony/DoctrineMigrationsBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle
[doctrine-migrations]
    git=http://github.com/doctrine/migrations.git   

[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git
[DoctrineFixturesBundle]
    git=http://github.com/symfony/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle

[doctrine-mongodb]
    git=http://github.com/doctrine/mongodb.git
[doctrine-mongodb-odm]
    git=http://github.com/doctrine/mongodb-odm.git
[DoctrineMongoDBBundle]
    git=http://github.com/symfony/DoctrineMongoDBBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMongoDBBundle
    version=v2.0.0 
```

*经过一番调查，我发现包的repo*位置已更改为 github.com/doctrine/ 。我不得不更改 deps 位置并从 vendor/bundles/Symfony/Bundle/ 中删除捆绑包，但这确实让我感到困惑。

[除了奇怪的 git diff 和DoctrineFixturesBundle](https://github.com/doctrine/DoctrineFixturesBundle/blob/master/README.markdown)自述文件中的一小部分之外，我根本找不到任何文档。这不是非 BC 变化吗？这不会影响使用这些存储库的每个人吗？如果是非 BC 更改，为什么没有更多信息。我是唯一受影响的人吗？还是我做错了什么（供应商更新而不是安装）？

我看到在这些项目的主分支中，命名空间也在发生变化。这不是大规模的非 BC 变化吗？我担心这可能会在将来我即将启动一个网站时发生，而我似乎对此无能为力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:29:54.493

对于我们（使用 Symfony 2.0.4）来说，它只需更改 deps 中的 git-url 并将其设置为跟踪分支 2.0 即可。如果您选择此方法，则不得（！）将 AppKernel.php 中的路径调整为 Doctrine 命名空间。我们的部门现在看起来像这样：

```
[DoctrineFixturesBundle]
    git=https://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle
    version=origin/2.0

[DoctrineMigrationsBundle]
    git=https://github.com/doctrine/DoctrineMigrationsBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle
    version=origin/2.0 
```

AppKernel.php 看起来还是一样：

```
new Symfony\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle(),
new Symfony\Bundle\DoctrineMigrationsBundle\DoctrineMigrationsBundle(), 
```

另外，请确保您仍然在 autoload.php 中注册了 DoctrineBundles：

```
'Symfony\\Bundle\\DoctrineFixturesBundle' => __DIR__.'/../vendor/bundles',
'Symfony\\Bundle\\DoctrineMigrationsBundle' => __DIR__.'/../vendor/bundles', 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T01:59:14.683

这发生在很久以前：[http ://symfony.com/blog/symfony-2-1-the-doctrine-bundle-has-moved-to-the-doctrine-organization](http://symfony.com/blog/symfony-2-1-the-doctrine-bundle-has-moved-to-the-doctrine-organization)

他们为没有更新的人保留了旧的存储库。我不会说这真的是 BC 中断，因为它不是更改代码，只是提供包裹的位置。

也许只是访问/订阅 symfony 博客和任何相关的 Twitter 帐户。他们今天早些时候提到了这个删除：[https ://twitter.com/jmikola/status/207852349782368256](https://twitter.com/jmikola/status/207852349782368256)

# powershell - 如何让 nuget (powershell) 插入 目标 csproj 文件中的元素

> ID：10842567
> 
> 赞同：11
> 
> 时间：2012-05-31T23:23:05.477
> 
> 标签：powershell, nuget, nuget-package, envdte, csproj

我正在为 Windows 服务编写一个 nuget 包，其想法是我的同事可以创建一个 Windows 服务安装该包，并为他们设置所有默认日志记录设置、entlib 库和其他家务管理任务。

除了一件让我发疯的事情外，我几乎已经完成了所有工作。

在我的 nuget 目录的内容文件夹中，我有 Service.cs 和 Service.Designer.cs 这些被添加到目标 csproj 但它们不相关。

当我查看 csproj 文件时，我看到：

```
<Compile Include="Service.cs">
  <SubType>Component</SubType>
</Compile>
<Compile Include="Service.Designer.cs" /> 
```

但我想看看：

```
<Compile Include="Service.cs">
  <SubType>Component</SubType>
</Compile>
<Compile Include="Service.Designer.cs">
  <DependentUpon>Service.cs</DependentUpon>
</Compile> 
```

任何想法，很确定它会涉及 install.ps 脚本，但我的 powershell 技能不存在？

顺便说一句，可以使用 nuget 删除/覆盖文件吗？到目前为止，它似乎只是跳过。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T03:09:29.323

经过大约 2 天的 powershell 和 msbuild hell 之后，我终于得到了一个可行的解决方案。见下文。一个调用 project.Save() 的警告词是至关重要的 - 没有这个，您将收到“检测到冲突的文件修改”警告。如果您首先调用 project.Save()，则只会在完成后要求您重新加载解决方案。

```
param($installPath, $toolsPath, $package, $project)

#save the project file first - this commits the changes made by nuget before this     script runs.
$project.Save()

#Load the csproj file into an xml object
$xml = [XML] (gc $project.FullName)

#grab the namespace from the project element so your xpath works.
$nsmgr = New-Object System.Xml.XmlNamespaceManager -ArgumentList $xml.NameTable
$nsmgr.AddNamespace('a',$xml.Project.GetAttribute("xmlns"))

#link the service designer to the service.cs
$node = $xml.Project.SelectSingleNode("//a:Compile[@Include='Service.Designer.cs']", $nsmgr)
$depUpon = $xml.CreateElement("DependentUpon", $xml.Project.GetAttribute("xmlns"))
$depUpon.InnerXml = "Service.cs"
$node.AppendChild($depUpon)

#link the settings file to the settings.designer.cs 
$settings = $xml.Project.SelectSingleNode("//a:None[@Include='ServiceSettings.settings']", $nsmgr)
$generator = $xml.CreateElement("Generator", $xml.Project.GetAttribute("xmlns"))
$generator.InnerXml = "SettingsSingleFileGenerator"
$settings.AppendChild($generator)

$LastGenOutput = $xml.CreateElement("LastGenOutput", $xml.Project.GetAttribute("xmlns"))
$LastGenOutput.InnerXml = "ServiceSettings.Designer.cs"
$settings.AppendChild($LastGenOutput)

#set the settings designer to be autogen
$settingsDesigner = $xml.Project.SelectSingleNode("//a:Compile[@Include='ServiceSettings.Designer.cs']", $nsmgr)
$autoGen = $xml.CreateElement("AutoGen", $xml.Project.GetAttribute("xmlns"))
$autoGen.InnerXml = "True"

$DesignTimeSharedInput = $xml.CreateElement("DesignTimeSharedInput", $xml.Project.GetAttribute("xmlns"))
$DesignTimeSharedInput.InnerXml = "True"

$AGDependentUpon = $xml.CreateElement("DependentUpon", $xml.Project.GetAttribute("xmlns"))
$AGDependentUpon.InnerXml = "ServiceSettings.settings"

$settingsDesigner.AppendChild($autoGen)
$settingsDesigner.AppendChild($DesignTimeSharedInput)
$settingsDesigner.AppendChild($AGDependentUpon)

#fix up the project installer.    
$projectInstallerRes = $xml.Project.SelectSingleNode("//a:EmbeddedResource[@Include='ProjectInstaller.resx']", $nsmgr)
$projectInstallerResDepUpon = $xml.CreateElement("DependentUpon", $xml.Project.GetAttribute("xmlns"))
$projectInstallerResDepUpon.InnerXml = "ProjectInstaller.cs"
$projectInstallerRes.AppendChild($projectInstallerResDepUpon)

$projectInstallerDesigner = $xml.Project.SelectSingleNode("//a:Compile[@Include='ProjectInstaller.Designer.cs']", $nsmgr)
$projectInstallerDesignerDepUpon = $xml.CreateElement("DependentUpon", $xml.Project.GetAttribute("xmlns"))
$projectInstallerDesignerDepUpon.InnerXml = "ProjectInstaller.cs"
$projectInstallerDesigner.AppendChild($projectInstallerDesignerDepUpon)

#delete the bundled program.cs file.
$prog = $xml.Project.SelectSingleNode("//a:Compile[@Include='Program.cs']", $nsmgr)
$prog.SelectSingleNode("..").RemoveChild($prog)

#delete the bundled service1 file
$oldServiceFile = $xml.Project.SelectSingleNode("//a:Compile[@Include='Service1.cs']", $nsmgr)
$oldServiceFile.SelectSingleNode("..").RemoveChild($oldServiceFile)

$oldServiceDesignerFile = $xml.Project.SelectSingleNode("//a:Compile[@Include='Service1.Designer.cs']", $nsmgr)
$oldServiceDesignerFile.SelectSingleNode("..").RemoveChild($oldServiceDesignerFile)

#save the changes.
$xml.Save($project.FullName) 
```

无耻的自我插入：[我将在我的博客 cianm.com 上完整地写下我遇到的解决方案和问题](http://cianm.com) 希望这可以节省一些时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-15T15:41:22.923

我认为更简单的方法（并且可能更受支持）是通过`$project`指向 DTE 项目的变量。

*注意：一年后我将进入这个，但面临类似的问题。我找到了这个答案并开始使用它，但我在 PowerShell 脚本末尾的 Save 调用遇到了问题 - 如果我安装了一个依赖于 PowerShell 脚本的包的包，则 Save 调用“破坏”所以其他软件包无法正确安装。无论如何，我现在使用的是 NuGet 2.5，但自 VS 2003 以来，DTE 并没有发生任何重大变化，因此即使在您使用的旧版 NuGet 中也应该可以使用。*

```
param($installPath, $toolsPath, $package, $project)

# Selections of items in the project are done with Where-Object rather than
# direct access into the ProjectItems collection because if the object is
# moved or doesn't exist then Where-Object will give us a null response rather
# than the error that DTE will give us.

# The Service.cs will show with a sub-item if it's already got the designer
# file set. In the package upgrade scenario, you don't want to re-set all
# this, so skip it if it's set.
$service = $project.ProjectItems | Where-Object { $_.Properties.Item("Filename").Value -eq "Service.cs" -and  $_.ProjectItems.Count -eq 0 }

if($service -eq $null)
{
    # Upgrade scenario - user has moved/removed the Service.cs
    # or it already has the sub-items set.
    return
}

$designer = $project.ProjectItems | Where-Object { $_.Properties.Item("Filename").Value -eq "Service.Designer.cs" }

if($designer -eq $null)
{
    # Upgrade scenario - user has moved/removed the Service.Desginer.cs.
    return
}

# Here's where you set the designer to be a dependent file of
# the primary code file.
$service.ProjectItems.AddFromFile($designer.Properties.Item("FullPath").Value) 
```

希望这可以帮助将来希望完成类似事情的人们。这样做可以避免依赖包安装失败的问题，因为项目在包安装过程中被保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T02:46:41.607

这是一个使用 Build.Evaluation 的简短示例，它是 Visual Studio 2010+ 的一部分

```
$buildProject = @([Microsoft.Build.Evaluation.ProjectCollection]::GlobalProjectCollection.GetLoadedProjects($project.FullName))[0]

$toEdit = $buildProject.Xml.Items | where-object { $_.Include -eq "Service.Designer.cs" }
$toEdit.AddMetaData("DependentUpon", "Service.cs")
# ... for the other files

$project.Save() 
```

# algorithm - 战舰游戏中舰船定位算法

> ID：10842571
> 
> 赞同：2
> 
> 时间：2012-05-31T23:23:34.663
> 
> 标签：algorithm, position

我必须用 C++ 实现[Battleship 游戏](http://en.wikipedia.org/wiki/Battleship_%28game%29)。这将是*人类*与*计算机*的游戏。

除了在游戏开始时定位计算机的船只外，一切都非常简单。计算机的舰船位置应该是随机的。但是我应该如何（最佳地）为船舶选择阵列单元？

编写代码来设置船舶的随机位置，然后检查附近的单元格是否为空，这可能非常耗时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:34:07.360

使用链表，其中每个节点都是棋盘上一个正方形的链接。然后，您可以 a) 生成一个随机节点，然后 b) 在放置船只时从列表中删除节点。您可以从放置的船周围移除额外的节点，以便为该船提供一些空间（不希望您的船接触；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:27:42.930

空间是如此之大，以至于总是有空闲的细胞可以使用，所以反复尝试放置飞船，然后失败，完全没问题。

您可以通过确保您的船只不接触（因为如果对手正在摧毁船只，这可能会给对手提供免费信息）以及通过放置更短的船只来获得足够接近最佳位置的可能性。靠近边缘（以抵消更大的船只更可能在中心附近发现的事实）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T02:23:12.553

如果是计算机与计算机，您只需要确保将船只随机放置在整个棋盘上，这样任何船只都不会彼此相邻。

但是，由于您扮演的是人类，因此您可以获得更多创意。这就像游戏中的石头剪刀布一样，您可以通过利用人类倾向来获得优势。

# php - 获取项目更新的mysql结果

> ID：10842581
> 
> 赞同：1
> 
> 时间：2012-05-31T23:24:50.873
> 
> 标签：php, mysql

我如何更改我的 php 代码，以便它可以回显“如果项目刚刚创建或更新？”

```
$query_item_create = "INSERT INTO `item` (`category_id`, `id`) VALUES ('$catid', '$id')";
$query_item_update = "UPDATE `item` SET `date`='$date',`info`='$info' WHERE `id`='$id'";
mysql_query($query_item_create);
mysql_query($query_item_update); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:29:06.243

这里解释得更好： http: [//php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

```
$affected = mysql_affected_rows();
if($affected > 0)
   echo "row was updated/inserted";
else
   echo "No rows were ...."; 
```

# php - 其他块中的 PHP 代码不会回显变量

> ID：10842582
> 
> 赞同：0
> 
> 时间：2012-05-31T23:24:52.787
> 
> 标签：php, html

我有以下用于创建网站的代码：

```
 <?php
    session_start();
        ?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org   /TR/xhtml11          /DTD/xhtml11.dtd">
         <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
<?php
require_once("connect.php");
                if(isset($_POST["firstName"]))
                {
                    $fname = mysql_real_escape_string($_POST["firstName"]);
                    $lname = mysql_real_escape_string($_POST["lastName"]);
                    $email = mysql_real_escape_string($_POST["email"]);
                    $pass = mysql_real_escape_string($_POST["password"]);
                    $cpass = mysql_real_escape_string($_POST["cPassword"]);

                    $chars = "abcdefghijklmnopqrstuvwxyz0123456789";
                    $salt = "";
                    for($i = 0; $i < 30; $i++)
                    {
                        $rand = rand(0,35);
                        $salt = $salt . substr($chars, $rand, 1);
                    }
                    $hash = crypt($salt . $pass);
                    $query = "INSERT INTO users (salt, hash, email, fname, lname) VALUES ('$salt', '$hash', '$email', '$fname', '$lname')";
                    $result = mysql_query($query);
                    $cString = "";
                    for($i = 0; $i < 30; $i++)
                    {
                        $rand = rand(0, 35);
                        $cString = $cString . substr($chars, $rand, 1); 
                    }

                }
        ?>
        <link rel="stylesheet" type="text/css" href="styles/common.css"/>
        <link rel="stylesheet" type="text/css" href="styles/thanks.css"/>
    </head>

    <body>
        <?php
            echo $cString;  
        ?> 
```

为什么`$cString`我的页面上没有出现的值？如果我回显它显示的字符串，但是当我回显变量时它不显示。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:43:53.617

的值仅在定义`$cString`时才设置。`$_POST["firstName"]`

顺便说一句，您可以使用字符串取消引用而不是 using `substr`，所以而不是：

```
$cString = $cString . substr($chars, $rand, 1); 
```

你可以这样做：

```
$cString = $cString . $chars[$rand]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:41:01.303

$cString 未设置在同一范围内。给定这段代码，如果你把

```
$cString = ""; 
```

在 require_once 行之后，它应该可以工作。

**更新**

您很可能没有显示完整的代码，并且`$cString`是从函数内部构造的。在函数内部声明的变量在外部不可用。几个选项：

1.  `$cString`函数结束时返回

    ```
    function my_fn()
    {
        $cString = 'abc';
        return $cString;
    } 
    ```

2.  `$cString`在顶部声明并通过引用传递它：

    ```
    $cString = '';
    function my_fn(&$cString) {
        $cString = 'abc';
    }
    my_fn($cString); 
    ```

我没有使用`global`，因为我认为它不适合您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:45:08.280

问题是你的变量在里面`if`，当你在外面调用它时它不会存在。您只需要在外部声明变量`if`（在代码的开头将是完美的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T03:58:58.320

我解决了这个问题！感谢大家的帮助，问题出在代码中的逻辑上。

# c# - 以编程方式更新 webpart 属性不会得到更新

> ID：10842586
> 
> 赞同：1
> 
> 时间：2012-05-31T23:25:48.020
> 
> 标签：c#, sharepoint, web-parts

我正在尝试以编程方式更新某些 webpart 的标题。为此，我从站点获取所有页面，获取每个页面的 web 部件，并首先打印出当前标题，更改它，然后再次打印出来以验证标题是否正确更改。不过，如果我事后检查，我仍然会看到 webpart 的旧标题......我错过了什么？

代码如下：

```
... getting the pages for the site...
SPFile ofile = page.File;

SPLimitedWebPartManager wpColl = ofile.GetLimitedWebPartManager(System.Web.UI.WebControls.WebParts.PersonalizationScope.User);
int cont = wpColl.WebParts.Count;

for (int i = 0; i < cont; i++)
{
    System.Web.UI.WebControls.WebParts.WebPart wp1 = wpColl.WebParts[i];

Console.WriteLine(" - Title : " + wp1.Title);

wp1.Title = "test" + i;

ofile.Update();
Console.WriteLine(" - New title: " + wp1.Title);

page.Update();
site.Update();                             
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T05:59:34.067

可能您应该使用 SPLimitedWebPartManager.Save(WebPart webPart) 方法来保存修改后的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:29:27.393

您是否尝试`site.AllowUnsafeUpdates = true`在进行更新之前进行设置？

# javascript - 在纯 JS 中实时/重新创建 jQuery

> ID：10842588
> 
> 赞同：1
> 
> 时间：2012-05-31T23:25:53.463
> 
> 标签：javascript

我正在用纯 JS 制作一个待办事项列表 webapp（尽量不使用 jQuery！），我在一个方面苦苦挣扎，将点击处理程序附加到我刚刚创建的元素上。下面是创建代码：

```
new_li = document.createElement('li');
new_li.innerHTML = item.value;
new_li.setAttribute('rel', time);
prependElement(tudu_list, new_li); 
```

这发生在单击按钮时。

我需要在 UL 中的每个 LI 上附加一个点击处理程序。但是当我单击一个新创建的 LI 时没有任何反应。我猜这是一个没有绑定到元素的点击处理程序的问题。在 jQuery 中我通常会使用 .live()，但在 JS 中，我不知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:36:43.850

将事件处理程序附加到`<ul>`元素，然后检查事件的`target`属性 - 如果它是`<li>`元素之一，则执行事件处理程序，否则跳过它。

[https://developer.mozilla.org/en/DOM/event.target](https://developer.mozilla.org/en/DOM/event.target)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:28:41.620

一种方法是：

```
function clickHandler(){
    // Do something...
}

new_li = document.createElement('li');
new_li.innerHTML = item.value;
new_li.setAttribute('rel', time);
new_li.onclick = clickHandler; // <===========
prependElement(tudu_list, new_li); 
```

当然，您可以（并且应该）使用`addEventListener`而不是内联脚本：

```
new_li.addEventListener('click', clickHandler) 
```

# python - Urllib2 和代理

> ID：10842589
> 
> 赞同：1
> 
> 时间：2012-05-31T23:26:00.817
> 
> 标签：python, urllib2

我的问题是，无论我是否延长睡眠时间，网站都会在每 1500 个请求后阻止 IP。所以我在做请求时使用代理。贝娄是构建开瓶器的代码。

```
def getOpener(self, pip=None):
        if pip:
            proxy_handler = urllib2.ProxyHandler({'http': pip})
            opnr = urllib2.build_opener(proxy_handler)
        else:
            opnr = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookielib.CookieJar()))
        opnr.addheaders = [('User-Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1')]
        urllib2.install_opener(opnr)
        return opnr 
```

但是当使用代理（高度匿名）时，该站点几乎不允许 40 - 50 个请求。为什么呢？我认为每个代理应该做 1500 个请求。那么我有什么遗漏吗？可能我需要传递一些额外的标题吗？

**（这不是第二个问题，它与第一个问题有关）**

我还为 ProxyHandler 找到了两种不同的 dict 语法。

```
Syntax1:
proxy_handler = urllib2.ProxyHandler({'http': '61.233.25.166:80'})

Syntax2:
proxy_handler = urllib2.ProxyHandler({'http': 'http://61.233.25.166:80'}) #see http:// in value 
```

它们有不同的含义还是相同？最佳实践 Syntax1 或 Syntax2 是什么？

# java - JPanel 中的计时器

> ID：10842594
> 
> 赞同：0
> 
> 时间：2012-05-31T23:26:29.670
> 
> 标签：java, swing, timer, jpanel, actionlistener

我正在尝试创建一个应用程序，我想添加一个时钟。我正在使用 JPanel 和 ActionListener 制作时钟，并且还想使用 Timer。Swing 教程说要实例化 Timer，你会说 new Timer(numMillis, this(an ActionListener))，但是，“this”似乎不适用于 JPanel 项目。我会在 Timer 构造函数中添加什么来正确实例化 Timer？

```
public ClockPanel() {
    super();

     clockLabel.setText(sdf.format(new Date(System.currentTimeMillis())));
     clockLabel.setFont(new Font("Monospaced", Font.BOLD, 100));
     clockLabel.setOpaque(true);
     clockLabel.setBackground(Color.black);
     clockLabel.setForeground(Color.white);

     timer = new Timer(500, this);
     timer.setRepeats(true);
     timer.start();

     clockLabel.setVisible(true);

    initComponents();
}
public void actionPerformed(ActionEvent e){
     if(e.getSource().equals(timer))
        clockLabel.setText(sdf.format(new Date(System.currentTimeMillis())));
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:36:52.360

为避免[泄漏`this`](https://stackoverflow.com/a/2636147/230513)，您可以使用实现的嵌套类`ActionListener`，如本[例](https://stackoverflow.com/a/5529043/230513)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:35:22.757

我假设您的 ClockPanel 看起来像：

```
public class ClockPanel extends JPanel implements ActionListener { 
```

您执行的操作似乎工作正常。如果您在设置文本之前进行打印，您将看到它正在被调用。也许您在文本更新后没有刷新屏幕，这就是您看不到更改的原因。

# iphone - 使用越狱 iPhone (Xcode) 进行开发

> ID：10842595
> 
> 赞同：5
> 
> 时间：2012-05-31T23:26:32.523
> 
> 标签：iphone, xcode, device, jailbreak

我有一台运行 iOS 5.1.1 的越狱 iPhone 4S。我有 Xcode 4.3.2，并且我已经能够在我的 iPhone 上运行我的应用程序，但是以一种奇怪的方式。如果我单击 Xcode 上的调试按钮，它会尝试在我越狱的 iPhone 上打开该应用程序，但会失败，因为它会快速打开然后关闭。即使发生这种情况，如果我手动打开应用程序，通过在主屏幕上单击它，它运行正常。这很烦人。最烦人的是，这会导致它不再允许调试，因为 Xcode 看不到它正在运行。

这是它产生的输出：

```
error: failed to launch '/Users/hetelek/Library/Developer/Xcode/DerivedData/spyapp-flynnmpiqhjoilezvqsbaqdnkesn/Build/Products/Debug-iphoneos/spyapp.app/spyapp' -- failed to get the task for process 3741 
```

当然，每次都更改进程ID。

这是我在越狱 iDevice 上开发时使用的教程：http: [//iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile](http://iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T05:27:55.460

我会尝试再次单步执行该教程，以确保您正确完成了设置。似乎您可以毫无问题地安装应用程序，但调试器在安装后无法附加到应用程序。如果您真的需要调试器，您可以尝试在安装后在您的设备上打开应用程序，然后在它运行时（并且您的设备已插入运行 Xcode 的 Mac），打开 Xcode 并转到`Product -> Attach to Process`，然后从列表（如果它不存在，那就是另一个问题了）。

此外，请尝试 YllierDev 的建议，即`get-task-allow`在您的应用程序的权利文件中启用（如果没有，您可以轻松地从 Xcode 中项目的信息页面创建一个）。假设您正确完成了本教程，那应该会有所帮助。

--

要使用 Xcode 4.3 在应用程序的权利文件中启用“get-task-allow”，请执行以下操作：

1.  单击项目导航器下的项目，然后在“目标”列下选择项目的名称。
2.  接下来，转到摘要选项卡，然后在“权利”下，选中“启用权利”。
3.  接下来，右键单击/命令单击项目导航器下的“YOURAPP.entitlements”文件，然后选择“在 Finder 中显示”。
4.  在 TextEdit 中打开，然后添加：

    `<key>get-task-allow</key> <true/>`

    就在之前`</dict>`。

5.  它现在应该调试并运行良好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:47:57.357

有一个简单的答案。iPhoneDevWiki 上的说明几乎是正确的。到临时文件后`write()`，需要刷新，否则临时文件为空。您的 ldid3.py 应如下所示：

```
#!/usr/bin/python
from sys import argv
from subprocess import call, check_call
from os.path import basename, splitext, join
from tempfile import NamedTemporaryFile

app = argv[-1]
obj_path = join(app, splitext(basename(app))[0])
if '-gta' not in argv:
    check_call(['/usr/local/bin/ldid', '-S', obj_path])
else:
    with NamedTemporaryFile() as f:
        f.write("""
            <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
            <plist version="1.0">
            <dict>
            <key>get-task-allow</key>
            <true/>
            </dict>
            </plist>\n""")
        f.flush()
        check_call(['/usr/local/bin/ldid', '-S' + f.name, obj_path]) 
```

我已经使用 Xcode 4.3.3 和 iOS 5.1.1 以这种方式进行调试。这按您的预期工作，您永远不必为新项目弄乱权利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T02:51:07.670

尝试重新启动 iPhone 和 Mac。也许某些进程在后台并且仍在运行。

如果没有帮助，则清理项目并进行全面清理（[如何进行全面删除](https://stackoverflow.com/questions/10746317/trying-to-remove-audio-file-from-project/10746592#10746592)）

从 iPhone 中删除一个应用程序并重建。

如果您的应用程序使用自库，那么也重建他的库。

# spring - Spring - PropertyPlaceholderConfigurer - 根据环境选择属性文件

> ID：10842597
> 
> 赞同：1
> 
> 时间：2012-05-31T23:27:02.403
> 
> 标签：spring, spring-mvc

我需要根据环境（dev、qa 或 prod）选择属性上下文文件，下面是我的 bean 配置`PropertyPlaceholderConfigurer`，

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:**/config/handsOn-${proj.env}.properties</value>
    </property>
</bean> 
```

那么我怎样才能让spring框架根据它部署的环境来选择正确的文件。

我可以根据部署的主机获取环境。使用下面的代码，

```
InetAddress.getLocalHost().getHostName() 
```

任何帮助将不胜感激..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:37:07.453

有几种方法可以做到这一点。

1.  查看 springs 属性注入。您可以在预定义的位置定义属性，并确保正确的属性存在于右侧框 <util:properties location="${path.to.properties.file}"/>
2.  如果您不想这样做，请考虑将环境类型作为 JVM 参数注入（例如 -Denv.type=PROD）或类似的东西。然后你可以在春天使用这个属性。查看[如何在 Spring applicationContext.xml 中读取 JVM 参数以](https://stackoverflow.com/questions/5598217/how-do-i-read-jvm-arguments-in-the-spring-applicationcontext-xml)了解如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:25:16.450

最后，我可以使用 maven 配置文件根据环境打包所需的 .properties。我为 dev、qa 和 prod 使用了不同的配置文件，如下所示，

```
<profiles>
        <profile>
            <id>dev</id>
            <activation>
              <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-resources-plugin</artifactId>
                        <version>2.4</version>
                        <executions>
                            <execution>
                                <id>copy-dev-resources</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <!-- this is important -->
                                    <overwrite>true</overwrite>
                                    <!-- target -->
                                    <outputDirectory>${project.basedir}/WebContent/WEB-INF/config</outputDirectory>
                                    <resources>
                                        <resource>
                                            <!-- source -->
                                            <directory>${project.basedir}/WebContent/WEB-INF/config/dev</directory>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
</profiles> 
```

# java - 比较应该返回 true 但返回 false

> ID：10842601
> 
> 赞同：0
> 
> 时间：2012-05-31T23:27:42.310
> 
> 标签：java, debugging, if-statement, comparison

我有两个相同类型的对象，然后我想看看它们是否相等，但似乎它们不是，我真的不明白为什么会这样，我从屏幕上拍了一张照片你们可以在哪里看到我想说的：

[这里](http://i944.photobucket.com/albums/ad284/mascaranegra/2012-05-31200716.png)（高分辨率）。

这张图片是为了向你们展示真正发生的事情，即使是在调试。

这是代码和类：

```
private boolean checkForExpr(Type lowerExprType, Type upperExprType) {
    boolean result = false;
    if (lowerExprType == Type.undefinedType || upperExprType == Type.undefinedType){
        return false;
    }else{
        result = (lowerExprType == upperExprType);
    }
        return result;
} 
```

类型类

```
abstract public class Type {

    public Type( String name ) {
        this.name = name;
    }

    public static Type booleanType = new BooleanType();
    public static Type integerType = new IntegerType();
    public static Type charType    = new CharType();
    public static Type undefinedType = new UndefinedType();

    public String getName() {
        return name;
    }

    abstract public String getCname();

    private String name;
} 
```

整数类型类

```
public class IntegerType extends Type {

    public IntegerType() {
        super("integer");
    }

   public String getCname() {
      return "int";
   }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T23:35:31.540

您正在检查它是否是对同一对象的相同引用。根据您的调试器，它们不是。查看调试器中的 (id=) 字段。字符串“整数”具有相同的 (id=) 但您的两个 Type 对象不同。

您需要实现 equals 和 hashCode，然后检查内部对象属性，例如：

```
abstract public class Type {
    @Override
    public boolean equals(Object obj){
        if (obj instanceof Type) {
            return name.equals (((Type)obj).getName());
        }
        return false;
    }   
} 
```

您可能应该检查空值等。

查看此问题的答案[覆盖 equals 方法](https://stackoverflow.com/questions/5992209/override-the-equals-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:40:27.400

在结果 = (lowerExprType == upperExprType) 行中，您正在比较引用而不是字符串。

类型类：

抽象公共类类型{

```
public Type( String name ) {
    this.name = name;
}

public static Type booleanType = new BooleanType();
public static Type integerType = new IntegerType();
public static Type charType    = new CharType();
public static Type undefinedType = new UndefinedType();

@Override
public String toString() {
    return name;
}
private String name; 
```

}

整数类型类：

公共类 IntegerType 扩展类型 {

```
public IntegerType() {
    super("integer");
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T05:29:21.917

覆盖对象类的 equals 和 hashCode 方法。

# c++ - C++ 代码使用 .cpp 源而不是 .c 编译

> ID：10842609
> 
> 赞同：0
> 
> 时间：2012-05-31T23:28:14.393
> 
> 标签：c++, visual-studio-2008, file-extension

在 Visual Studio 2008 中，使用 C++，我尝试使用[http://msdn.microsoft.com/en-us/library/ms235636.aspx](http://msdn.microsoft.com/en-us/library/ms235636.aspx)上的说明构建 DLL ，但我将源文件命名为扩展名为“. c”而不是建议的“.cpp”。

如果扩展名为 .c，编译器会抛出 37 个错误。扩展名为 .cpp 的 DLL 可以成功构建。

源文件的扩展名有什么不同？

这是完整的代码：

```
// MathFuncsDll.cpp
// compile with: /EHsc /LD

#include "MathFuncsDll.h"

#include <stdexcept>

using namespace std;

namespace MathFuncs
{
    double MyMathFuncs::Add(double a, double b)
    {
        return a + b;
    }

    double MyMathFuncs::Subtract(double a, double b)
    {
        return a - b;
    }

    double MyMathFuncs::Multiply(double a, double b)
    {
        return a * b;
    }

    double MyMathFuncs::Divide(double a, double b)
    {
        if (b == 0)
        {
            throw new invalid_argument("b cannot be zero!");
        }

        return a / b;
    }
}

// MathFuncsDll.h

namespace MathFuncs
{
    class MyMathFuncs
    {
    public:
        // Returns a + b
        static __declspec(dllexport) double Add(double a, double b);

        // Returns a - b
        static __declspec(dllexport) double Subtract(double a, double b);

        // Returns a * b
        static __declspec(dllexport) double Multiply(double a, double b);

        // Returns a / b
        // Throws DivideByZeroException if b is 0
        static __declspec(dllexport) double Divide(double a, double b);
    };
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T23:30:07.180

当扩展名是`.c`时，编译器将其编译为 C。当它是 时`.cpp`，将其编译为 C++。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T23:29:53.513

编译器可能会将文件解释为 C 文件，而不是 C++ 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T23:32:40.600

编译器（驱动程序）根据扩展名猜测源语言，假设 C for`.c`和 C++ for `.cpp`. `-Tp`您可以使用强制 C++ 或强制 C来覆盖该猜测`-Tc`。如果您希望传递的所有文件而不是仅一个文件，请大写 (`-TP`或`-TC`)。

# ios - 连接状态更改的 iOS 通知断开连接并返回

> ID：10842611
> 
> 赞同：0
> 
> 时间：2012-05-31T23:28:39.957
> 
> 标签：ios, captivenetwork

寻找一种方法让我的 IOS 应用程序在设备失去与互联网的连接时接收通知。

知道是否有这方面的通知类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:23:43.103

Apple 有一个演示应用程序，其中包含一个名为[Reachability的类](https://developer.apple.com/library/archive/#samplecode/Reachability/Introduction/Intro.html)

我使用它，许多其他人也使用它，它会完全按照您在问题中的要求进行。

# objective-c - 获取 Facebook 用户个人资料的所有公开相册 - iOS Facebook SDK

> ID：10842617
> 
> 赞同：0
> 
> 时间：2012-05-31T23:29:23.670
> 
> 标签：objective-c, facebook, public, photos

有没有办法在 Facebook 中获取用户个人资料的所有公开相册？例如，如果我在这样的 URL 中使用我的应用程序 *access_token*：

> [https://graph.facebook.com/USER_ID/albums?access_token=MY_APP_ACCESS_TOKEN](https://graph.facebook.com/USER_ID/albums?access_token=MY_APP_ACCESS_TOKEN)

我收到此错误：

```
{
"error": 
{
  "message": "A user access token is required to request this resource.",
  "type": "OAuthException",
  "code": 102
}
} 
```

为什么？它是正确的语法吗？

解决了这个问题后，我该如何在 Objective-C 中做到这一点？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:06:03.827

即使您想获取用户的公开相册，您也需要要求用户授予正确的权限并使用您的应用程序登录。`user_photos`需要查看当前用户的照片，`friends_photos`需要查看用户好友的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:58:57.077

最近遇到了这个问题。在 Facebook 开发者网站编辑应用程序的权限。添加解决`user_photos`了`User & Friend permissions`我的问题。

# php - GUI MySQL 数据库前端

> ID：10842618
> 
> 赞同：20
> 
> 时间：2012-05-31T23:29:35.197
> 
> 标签：php, mysql, database, user-interface, web-applications

我有一个有点绝望的软件愿望清单，我不知道它是否存在。

*它需要什么：*

*   可以免费使用（在小型企业中）
*   在带有 MySql 数据库的 php 服务器上运行
*   做一个 GUI 数据库前端
*   做更多的CRUD。特别是我需要能够创建自定义表单，并在一个操作中从多个表中插入和删除多条记录。这种流程构建是我正在寻找的主要标准。
*   有一些 ajax 支持，所以它看起来不错
*   自动处理所有登录
*   不需要任何适当的编程。整个项目可以在浏览器中构建
*   希望有一些高级功能，如发送电子邮件、预定工作等。
*   最终产品必须是面向客户的，所以它不能是一个管理员工具，不知道自己在做什么的人可以破坏它
*   如果你想喝杯咖啡。

你能告诉我它是否存在吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T00:09:11.913

好吧，我非常怀疑您是否会找到任何可以满足您所有要求的解决方案，尤其是如果您希望这一切都是免费的。但我会指出你[phpMyAdmin](http://phpmyadmin.net)。

如果您还没有接触过它，它是一个基于 Web 的 MySQL 数据库前端（在 php 服务器上运行）。它易于部署并且可以维护多个用户登录。它在 ajax 部门并不太强大，我从来没有听说过像预定工作或电子邮件这样的东西，但这些东西都可以用不同的方式完成。

将 phpMyAdmin 视为网络上的数据库编辑器，但它不会是您想要交给客户来处理的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-16T19:32:01.437

对 OP 来说，这几乎可以满足您的所有要求，包括 Ajax、面向客户端、基于 Web 的构建、不需要适当的编码等等……除了它不煮咖啡，而且不是免费的，但一次只需 48 美元，这不是一个交易破坏者：

PHP MYSQL 表单制作 [器 http://mysqlreports.com/](http://mysqlreports.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T20:19:57.167

有一个更新的工具可以满足您的很多需求。你可以在这里查看：

[Eliacom 增强型 SQL 门户 (ESP)](http://www.eliacom.com/)

这里还有一个演示，您可以使用它登录到任何数据库服务器（请注意，要使用它，它将在您的数据库中安装一些额外的表来保存您在前端设置的格式信息）：

[Eliacom ESP 演示](http://www.eliacom.com/esp/)

以下是它如何根据您的标准分解：

*   **免费**
*   **它是用 PHP 编写的，在**带有 MySql 数据库的 php 服务器上运行
*   **它是一个图形用户界面**它基本上和 Excel 一样易于用于内联编辑。以树的形式组织表格、布局和重命名列，所有这些都来自 GUI。
*   **它比 CRUD 做得更多，**这可能是它的强项。你几乎可以创造任何东西。对于真正花哨的东西，您需要了解一点 HTML。您绝对可以非常轻松地删除多条记录。插入多条记录可以通过过去的功能（或上传）来完成。
*   **它完全是ajax，看起来很现代**
*   **它处理登录和会话处理（它也会在一段时间后锁定会话）**使用单个实例，您可以登录到任何服务器（当然您可以访问）。
*   **你不需要任何编程。**如果您想制作非常简洁的表单，您需要了解一些 HTML（即使没有这些，表单看起来也不错）。
*   **它完全基于网络并通过浏览器进行控制**
*   **基本系统没有日程安排/电子邮件，但您可以购买具有作业日程安排/电子邮件等的附加组件。**我相信如果他们为您托管它，他们已经有了这个。只是不在一般版本中。在一般版本中，如果您了解一点 PHP，您可以添加侦听器以了解何时修改表并执行诸如发送电子邮件之类的操作（您可以从前端添加这些）。
*   **基本产品用于数据库管理，但有附加组件可供购买。**他们有一个可供购买的应用程序，使您能够控制其他用户（有很多权限设置他们可以/不能做什么，所以他们不能破坏东西）。他们还有一个 Publisher 应用程序，您可以创建一个链接，允许将表单/表格发布到开放的互联网（用于公共数据查看/输入）。
*   **咖啡......**他们接受用户的请求，所以如果你有功能请求，你可以联系他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T14:29:32.457

[**MySQL 工作台**](http://dev.mysql.com/doc/workbench/en/index.html)怎么样？它是在**GPL**许可下提供的

> MySQL Workbench 为 DBA 和开发人员提供了一个集成的工具环境，用于：
> 
> *   数据库设计与建模
> *   SQL 开发
> *   数据库管理
> *   数据库迁移

![屏幕0](../Images/a4d714881f5936ab09b71b0cd9a00f6c.png)

[它可从下载](http://dev.mysql.com/downloads/workbench/)页面直接用于 Windows、Linux（Ubuntu、Rad Hat Enterprise、Fedora）和 OS X ！（源代码也是）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T21:34:26.930

信不信由你，尽管这些产品已于 2009 年 12 月 18 日停产，但 MySQL Query Browser 和 MySQL Administrator 的最新版本仍然可以完全免费下载。

嘿，我今天还在用它们。

它只满足一些需求

*   可以免费使用（在小型企业中）
*   做一个 GUI 数据库前端
*   自动处理所有登录（有点）

[**在 Oracle 不在的时候点击这里获取它......快！**](http://dev.mysql.com/get/Downloads/MySQLGUITools/mysql-gui-tools-noinstall-5.0-r17-win32.zip/from/http://mirror.trouble-free.net/mysql_mirror/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-12T14:12:43.470

VFront值得一提吗？我自己没有使用它，但正在寻找类似的解决方案：

[http://www.vfront.org/](http://www.vfront.org/)

以下是其网站的摘录：

*   VFront 对于使用 MySQL 或 PostgreSQL 的公司、品牌或组织非常有用，他们需要自己的雇员轻松咨询或修改对数据库的访问，而无需为此开发特定的客户端，而只需使用 Web 浏览器。
*   将 VFront 视为数据库的界面工具，类似于 MS 访问的某些功能，但率先通过 web 轻松访问。VFront 不是像 phpMyAdmin 这样的数据库管理工具，它不会取代它：界面是为基本用户工作在数据上。
*   VFront 是为能够使用直观图形界面安全处理数据的非专家用户而创建的。
*   当多个和/或多个用户必须使用不同的权限访问数据库时，VFront 特别有用：高度可定制的组和权限系统使各种使用的人员可以访问特定的表或视图，显示/隐藏特定字段，设置输入规则验证并控制所有数据库活动。
*   VFront 具有基于 xml、xsl 和 xsl-fo 协议的导出数据模块、统计和报表管理。
*   VFront 对于那些通常需要易于安装和配置数据库前端的人来说也很有用。

# objective-c - 对象在视图中和设备方向更改后位置不正确

> ID：10842619
> 
> 赞同：1
> 
> 时间：2012-05-31T23:29:39.967
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationbar, uiinterfaceorientation

我正在创建一个 iOS 应用程序。它在导航控制器中运行。在我最近构建的视图中，`UITextViews`和`UIImageView`一直在错误的坐标处显示不正确。我相信这可能是由于`UINavigationBar`.

当我在 Interface Builder 中设置视图以镜像该视图时，它实际上错误地显示了视图。我再次假设这是由于`UINavigationBar`. 我设法通过更改 Interface Builder 坐标来“修复”这个问题，直到它正确显示。这是 Interface Builder 现在的样子：

我希望视图可以在两种设备方向（纵向和横向）下工作。视图中的对象不容易被告知旋转，所以我以编程方式定位视图。代码如下：

```
-(void) adjustViewsForOrientation:(UIInterfaceOrientation)orientation {
    if (orientation == UIInterfaceOrientationPortrait) {
        appInfo.frame = CGRectMake(20, 19, 280, 90);
        updateInfo.frame = CGRectMake(20, 117, 280, 86);
        authorInfo.frame = CGRectMake(20, 229, 172, 200);
        authorImage.frame = CGRectMake(190, 274, 110, 110);
    }
    else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) {
        appInfo.frame = CGRectMake(11, 44, 199, 124);
        updateInfo.frame = CGRectMake(218, 53, 242, 124);
        authorInfo.frame = CGRectMake(11, 180, 340, 90);
        authorImage.frame = CGRectMake(350, 170, 110, 110);
    }
}

-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [self adjustViewsForOrientation:toInterfaceOrientation];
}

-(void) viewWillAppear:(BOOL)animated {
    [self adjustViewsForOrientation:self.interfaceOrientation];

    [super viewWillAppear:animated];
} 
```

**这是我的主要问题：** 当视图旋转为横向时，对象不能直接定位。它们不遵循旋转期间要调用的坐标中描述的内容。

旋转回纵向时也会出现此问题：

**我该如何解决这个问题？** 先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T03:31:57.063

您可以做一些复杂的事情[`sizeWithFont:constrainedToSize`](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40006893-CH3-SW8)来确定各种文本框需要在新宽度上的大小以适合您要放入其中的文本，但可能更容易的是消除 UILabel/UITextView 和 UIImageView，并且只需创建一个[`UIWebView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)填充整个视图并使用它[`loadHTMLString:baseURL`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW10)来提供一个 HTML 字符串，其中包括您的副本和指向您捆绑包中图像的链接。

**更新：**

问题是您（a）您显然设置了 autoResizingMasks ；(b) 您设置新框架的时间过早（因此一旦发生重新定向，autoResizingMask 会再次调整它们）。

所以，有几个想法：

首先，您可能在 Interface Builder 中打开了自动调整大小的蒙版，例如：

![具有自动调整大小的尺寸检查器](../Images/585a3c4cb1838faf30b3e6b7c6b1086e.png)

因此，关闭自动调整大小的蒙版：

![具有自动调整大小的尺寸检查器](../Images/d56deeb90206ceaa393f6ee3adae772d.png)

其次，虽然我确信你会在 IB 中这样做，但仅供参考，你也可以通过编程方式将其关闭：

```
appInfo.autoresizingMask = 0;
updateInfo.autoresizingMask = 0;
authorInfo.autoresizingMask = 0;
authorImage.autoresizingMask = 0; 
```

第三，您可能希望在自动调整大小有机会搞砸您的控件后更改框架坐标。通常，我会看到那些推迟这种框架调整的人，`didRotateFromInterfaceOrientation`而不是`willRotateToInterfaceOrientation`因为（a）你有新方向的坐标（并且因为导航控制器在横向和纵向中的高度不同，这可能很重要，尽管可能不是在你的情况下）；巧合的是（b）您纠正了一些意外的自动调整大小蒙版可能引入的任何调整。

就个人而言，我已经开始`viewWillLayoutSubviews`在 iOS 5 及更高版本`didRotateFromInterfaceOrientation`以及`viewWillAppear`早期版本的 iOS 中重置我的框架（我在我的代码中以编程方式完成所有这些操作）。iOS 5 的替代方案`viewWillLayoutSubviews`更胜一筹，因为它在旋转动画之前设置帧，并通过旋转动画来动画帧的变化，这是非常微妙的变化，但非常流畅。一旦您开始注意到可以正确执行此操作的应用程序，您将始终希望这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:43:01.790

从 willRotateToInterfaceOrientation:duration: 回调中调用 adjustViewsForOrientation: 为时过早。相反，将对 adjustViewsForOrientation: 的调用移动到 willAnimateRotationToInterfaceOrientation:duration: 回调中。从文档中：

```
By the time this method is called, the interfaceOrientation property is already set to the new orientation, and the bounds of the view have been changed. Thus, you can perform any additional layout required by your views in this method. 
```

[UIViewController willAnimateRotationToInterfaceOrientation:duration:](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
   [self adjustViewsForOrientation:toInterfaceOrientation];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T14:43:17.677

正如在其他地方的评论中所讨论的那样，虽然创建单独的控件并在方向更改时移动它们可以为您提供很好的控制水平，但更简单的方法是只创建一个 UIWebView 控件，并让它负责利用重新格式化文本对于更宽的屏幕。此外，UIWebView 可以轻松格式化文本（粗体、斜体）或添加超链接（尤其是电子邮件地址和电话号码。无论如何，这里是为 UIWebView 创建 HTML 字符串的示例：

```
- (NSString *)htmlString
{
    NSURL *imgUrl = [[NSBundle mainBundle] URLForResource:@"IMG_0999" withExtension:@"PNG"];
    NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

    NSString *htmlBodyTemplate = 
        @"<html>"
        @"<style type=\"text/css\">"
        @"html {"
        @"    -webkit-text-size-adjust: none; /* Never autoresize text */"
        @"}"
        @"</style>"
        @"<body style=\"font-family:Verdana, Geneva, sans-serif; font-size:14px;\">"

        @"<p>This application is version %@. The recommended iOS version for running this application is iOS 5.0+. The minimum iOS version is iOS 4.3.</p>"
        @"<p>This application will automatically check for updates at startup. It is recommended to immediately update the app when prompted.</p>"
        @"<img src=\"%@\" style=\"float:right;\" width=\"150px\" />"
        @"<p>This application was created by Ridgefield High School student <strong>Devin Gund</strong> in 2012\. He worked with the Ridgefield Public Schools technology department in publishing this application.</p>"

        @"</body>"
        @"</html>";

    return [NSString stringWithFormat:htmlBodyTemplate, version, [imgUrl relativeString]];
} 
```

然后，在您的 viewDidLoad 中，包含一行：

```
[self.webView loadHTMLString:[self htmlString] baseURL:nil]; 
```

# javascript - Jquery 拖放恢复到特定的 div

> ID：10842623
> 
> 赞同：4
> 
> 时间：2012-05-31T23:30:03.643
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我目前有一个使用 Jquery UI Drag and Drop 的布局。我在 Jquery 网站上看到了用于恢复的代码，但我不确定如何检测一个 div 是否已被拖放到某个 div 上，如果它有一直在恢复它。

基本上我有 2 个 div，我只希望拖放能够放入其中一个，如果它没有被放入正确的 div 中，那么它会被还原:)

**脚本：**

```
 <script type="text/javascript">
function shift(parent){
$("#"+parent).draggable({ handle: ".item", accept: "#floor", containment: "#floor", scroll: false, stack:"#floor div" });
}
</script> 
```

**可拖动：**

```
<div id="drag" class="ui-widget-content" onmousedown="shift('example')"> </div> 
```

**DIV**

```
<div id="container">
    <div id="floor"> </div>
    <div id="other"> </div>
</div> 
```

可拖动的在容器内，但我只希望将它放在地板内而不是其他地方。

任何帮助将非常感激

谢谢大家！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T00:29:07.690

Hiya Andrew**工作演示** [http://jsfiddle.net/BYsnc/](http://jsfiddle.net/BYsnc/)

希望这会有所帮助

好读：[http ://docs.jquery.com/UI/Draggable](http://docs.jquery.com/UI/Draggable)

行为：当用户拖动`drag me`到`floor`它时将允许，如果你将它拖动到`other`它不会 B-)

**解释**

**jQuery 代码**

**// 将 Floor Div 设为可放置**

```
$('#floor').droppable({
    tolerance: 'fit'
}); 
```

**// 现在将拖动 div 设为可拖动**

```
$('#drag').draggable({
    revert: 'invalid',
    stop: function(){
        $(this).draggable('option','revert','invalid');
    }
}); 
```

**// 最后告诉拖动它们的 Droppable 属性**

```
$('#drag').droppable({
    greedy: true,
    tolerance: 'touch',
    drop: function(event,ui){
        ui.draggable.draggable('option','revert',true);
    }
});
​ 
```

# sql - 如何选择在sql中插入具有相同id的行？

> ID：10842634
> 
> 赞同：1
> 
> 时间：2012-05-31T23:31:28.593
> 
> 标签：sql, ssis

所以基本上我有一个名为“table_1”的表：

```
ID   Index          STATUS          TIME        DESCRIPTION
1     15          pending           1:00       Started Pending
1     16          pending           1:05       still in request
1     17          pending           1:10       still in request
1     18          complete          1:20       Transaction has been completed
2     19          pending           2:25       request has been started
2     20          pending           2:30       in progress
2     21          pending           2:35       in progess still
2     22          pending           2:40       still pending
2     23          complete          2:45       Transaction Compeleted 
```

我需要将这些数据插入到我的第二个表“table_2”中，其中只包含开始和完成时间，所以我的“table_2”应该是这样的：

```
ID   Index   STATUS          TIME          DESCRIPTION
1     15     pending         1:00          Started Pending
1     18     complete        1:20          Transaction has been completed
2     19     pending         2:25          request has been started
2     23     complete        2:45          Transaction Compeleted 
```

如果有人可以帮助我为此编写 sql 查询，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:40:21.630

```
INSERT INTO t2 (ID, STATUS, TIME)
SELECT ID, STATUS, MIN(TIME) FROM t1 t1top
WHERE EXISTS(SELECT * FROM t1 WHERE ID=t1top.ID AND STATUS='Complete')
GROUP BY ID, STATUS
ORDER BY CAST(ID AS UNSIGNED) ASC, STATUS DESC 
```

插入后，如果您想根据示例查看结果，则必须运行以下选择：

```
SELECT ID, STATUS, TIME FROM table_1
ORDER BY CAST(ID AS UNSIGNED) ASC, STATUS DESC 
```

那是完全正确的，但是我不想只是这样看，它也需要以这种方式插入到第二个表中，知道吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:37:30.010

```
INSERT INTO table_2
SELECT id,status,min(time)
FROM table_1 AS t1
WHERE EXISTS(SELECT 1
             FROM table_1
             WHERE id=t1.id
                 AND status='complete')
GROUP BY id,status 
```

我认为这应该为你做，虽然没有测试过:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:00:55.840

你可以像这样得到所有的开始时间：

```
 select id, status, min(time) 
   from table_1 
   where status = 'Pending'
   group by id, status 
```

然后像这样完成：

```
 select id, status, time
   from table_1 
   where status = 'Complete'
   group by id, status 
```

您可以使用 union 来使用两者，当然可以尝试：

```
 insert into table_2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T23:24:57.433

```
INSERT INTO myTable2 (ID, STATUS, TIME, DESCRIPTION)
SELECT t1.ID, t1.STATUS, t1.TIME, t1.DESCRIPTION FROM table_1 as t1 
WHERE STATUS = 'complete' 
OR TIME = (SELECT min(TIME) FROM table_1 WHERE ID = t1.ID) 
ORDER BY ID asc, STATUS desc 
```

# java - MVN 编译不使用 UTF-8 编码

> ID：10842635
> 
> 赞同：9
> 
> 时间：2012-05-31T23:31:50.000
> 
> 标签：java, maven, encoding

好的，这是一个奇怪的问题：我有一个使用一些 UTF-8 字符的 java 测试文件。当我用 Maven 编译它时，使用

```
mvn -Dfile.encoding=UTF-8 -Dproject.build.sourceEncoding=UTF-8 test 
```

（因此设置感知平台编码和源文件编码，请参阅[maven 平台编码](https://stackoverflow.com/questions/9976616/maven-platform-encoding)）我得到类似的东西

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building project
[INFO]    task-segment: [test]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory path/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory path/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 7 source files to path/target/test-classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure
path/to/file.java:[42,23] unclosed character literal
path/to/file.java:[42,25] ';' expected
path/to/file.java:[42,26] unclosed character literal
path/to/file.java:[47,23] unclosed character literal
path/to/file.java:[47,25] illegal character: \182
path/to/file.java:[47,26] unclosed character literal 
```

当我编译文件时

```
javac path/to/file.java 
```

我收到类似的错误：

```
path/to/file.java:42: unclosed character literal
    illegalCharEnc('ä');
                   ^
path/to/file.java:42: ';' expected
    illegalCharEnc('ä');
                     ^
path/to/file.java:42: unclosed character literal
    illegalCharEnc('ä');
                      ^
path/to/file.java:47: unclosed character literal
    illegalCharDec('ö');
                   ^
path/to/file.java:47: illegal character: \182
    illegalCharDec('ö');
                     ^
path/to/file.java:47: unclosed character literal
    illegalCharDec('ö');
                      ^
6 errors 
```

现在当我使用

```
javac -encoding UTF-8 path/to/file.java 
```

相反，`cannot find symbol`由于缺少依赖项，我得到了错误。所以我认为问题是`javac`在编译测试时没有在 Maven 中使用 UTF-8 选项调用它（注意-section`Using 'UTF-8' encoding to copy filtered resources.`中的缺失方式`compiler:testCompile`）。这个结论正确吗？我错过了什么吗？这是一个已知问题吗？我能做些什么吗？显然，我系统上的平台编码不是 UTF-8，但我目前无法更改。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-11T06:35:54.597

Maven 编译器插件，将编码作为配置参数。不仅支持 UTF-8，还支持多种编码标准。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T09:17:58.003

遇到同样的问题，我首先遇到了这个问题。但由于没有答案，我进一步看了看，发现另一个问题得到了回答并帮助我解决了这个问题：

[https://stackoverflow.com/a/10375505/332248](https://stackoverflow.com/a/10375505/332248)（感谢@chrisapotek 和@Jopp Eggen 的回答）

# iphone - 如何在不隐藏详细信息标签的情况下在 UITableView 单元格文本中进行自动收缩？

> ID：10842639
> 
> 赞同：2
> 
> 时间：2012-05-31T23:32:13.023
> 
> 标签：iphone, objective-c, ios, xcode

我制作了一个 UITableView ，每次文本标签大到足以覆盖详细文本标签时，细节都不会显示。

我已将 CGRec 设置得更小，但没有成功。

Ps.：我使用 Xcode 4，iOS5。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-29T12:39:27.340

在 cellForRowAtIndexPath 方法中使用下面的代码，单元格内 textLabel 中的文本将根据需要缩小。

```
cell.textLabel.adjustsFontSizeToFitWidth=YES; 
```

# ruby-on-rails - 使用 Rolify 了解 Rails 3.2 中的角色

> ID：10842641
> 
> 赞同：0
> 
> 时间：2012-05-31T23:32:28.557
> 
> 标签：ruby-on-rails, authentication, devise, roles, cancan

有没有简单的角色教程？我发现[Devise](https://github.com/plataformatec/devise)是一个很棒且简单的授权解决方案。然后当谈到[带有 Rolify](https://github.com/EppO/rolify/wiki/Tutorial)的康康舞时，像我这样的初学者会感到困惑。

目前，我在**ability.rb**中定义角色：

```
if user.has_role? :admin
  can :manage, :all
else
  can :read, :all
end 
```

然后，在控制器中，我正在检查如下示例：

```
def destroy
 ability = Ability.new(current_user)
 if ability.can? :delete, :all then
   @post = Post.find(params[:id])
   @post.destroy
 end

 respond_to do |format|
   ...
end 
```

我的问题是 - 我有一种奇怪的感觉，检查**是否有能力。可以吗？:delete, :all**在这个例子中是多余的。那么我的代码没问题还是我真的弄错了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:38:13.780

检查他们是否可以删除相关帖子会更有意义。管理员可以删除任何内容，但普通用户只能删除他们拥有的内容。

```
@post = Post.find(params[:id])
authorize! :delete, @post 
```

我还建议您花一些时间阅读 cancan 的文档，因为您的代码并不真正匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:54:20.223

我认为您的“破坏”方法可以是：

```
def destroy
 @post = Post.find(params[:id])
 if can? :delete, @post then 
   @post.destroy
 end

 respond_to do |format|
   ...
end 
```

因为在[cancan](https://github.com/ryanb/cancan)的文档中：

> 然后可以使用 can? 检查当前用户的权限。不能吗？视图和控制器中的方法。

# php - PHP正则表达式，提取指定字符之间的字符

> ID：10842644
> 
> 赞同：1
> 
> 时间：2012-05-31T23:32:57.953
> 
> 标签：php, regex, split, extract

我一生都无法弄清楚我如何在字符之间提取字符。

考虑这个字符串，

```
 $string = "sometext/#a=10/#b=25/moretext"; 
```

我想做的是提取“a”和“b”（10和25）的值

所以基本上我想要做的是找到“#a =”并在下面的/之前获取所有内容，然后对b做同样的事情。谁能告诉我这是如何实现的？

此外，如果有人知道他们可以推荐的任何可靠的正则表达式教程，我将非常感激，我已经检查了 nettuts、w3schools 和 php.net，它们都有很好的，但任何其他建议都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:44:18.983

这对我有用：

```
<?php

$string = "sometext/#a=10/#b=25/moretext/#varname=Hello World/evenmoretext/";

$matchcount = preg_match_all('@#([^=]+)=([^/]*)/@', $string, $matches);

for ($i = 0; $i < $matchcount; ++$i) {
    echo "{$matches[1][$i]} = {$matches[2][$i]}\n";
} 
```

输出：

> a = 10
> b = 25
> varname = Hello World

很久以前，我发现该站点[http://www.regular-expressions.info/](http://www.regular-expressions.info/)很有帮助，而且它有很好的信息。您可能会发现用于测试正则表达式的 GUI 程序会很有帮助，因为它们可以在您键入表达式时实时显示匹配项。想到的一个例子是 Regex Buddy，但这需要花钱。这个[在线正则表达式测试器](http://regex.larsolavtorvik.com/)看起来也很有前途。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T23:47:42.550

```
$string = "sometext/#a=10/#b=25/moretext";
$expr = '@#([a-z]+)=(.+?)/@';
$count = preg_match_all($expr, $string, $matches);

$result = array();
for ($i = 0; $i < $count; $i++) {
    $result[$matches[1][$i]] = $matches[2][$i];
}

echo "<pre>";
print_r($result);
echo "</pre>"; 
```

[看到它工作](http://codepad.viper-7.com/sexpju)

如果您真的想掌握正则表达式的具体细节，我可以推荐的最佳资源是[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

# python - Zenity 与 iPython？

> ID：10842645
> 
> 赞同：2
> 
> 时间：2012-05-31T23:33:10.420
> 
> 标签：python, shell, ipython, zenity

iPython 中是否有类似 Zenity 的东西？

如果不是，那么使用 iPython 创建类似 Zenity 的 shell 脚本的最佳方法是什么？

还是我应该只使用常规 Python 并制作一个小型 GUI 应用程序（例如，使用 PyQt）？

我试图让它变得非常简单，并将现有的 bash shell 脚本转换为基于 Python 的东西（作为学习练习）。

我正在运行 Linux（我不需要关心其他平台）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:37:17.390

是的，有，它被称为[PyZenity](http://pypi.python.org/pypi/PyZenity)。[此处](http://code.google.com/p/pyzenity/)提供其他信息。

# objective-c - CGContext的Objective-C包装类？

> ID：10842646
> 
> 赞同：4
> 
> 时间：2012-05-31T23:33:25.003
> 
> 标签：objective-c, core-graphics, quartz-2d

有没有人为 CGContext 函数组创建了一个包装类？

我昨天创建了一个简单的 Gradient 类，它封装了 CGGradient 功能的一个子集，用于更简单的内存管理。这很简单。但显然还有更多的 CGContext 操作，我不确定我是否想在那里重新发明轮子。

基本上我正在寻找的东西是......

```
@interface CGContext : NSObject
{
    CGContextRef context;
}

+ (CGContext *) bitmapContextWithData:(void *)data
                                width:(size_t)width
                               height:(size_t)height
                     bitsPerComponent:(size_t)bitsPerComponent
                          bytesPerRow:(size_t)bytesPerRow
                           colorspace:(CGColorSpaceRef)colorspace
                           bitmapInfo:(CGBitmapInfo)bitmapInfo;

- (void) saveGState;
- (void) restoreGState;

- (void) setBlendMode:(CGBlendMode)mode;

- (void) addLineToPoint:(CGPoint)point;
- (void) addLineToPointX:(CGFloat)x pointY:(CGFloat)y;

- (void) drawImage:(CGImageRef)image rect:(CGRect)rect;

- (void) concatCTM:(CGAffineTransform)transform;
- (CGAffineTransform) getCTM;

@end 
```

等等。

（我 99% 的绘图都是在屏幕外的位图中进行的，这就是我在这种情况下关心内存管理的原因。如果我总是在当前 UI 图形上下文中绘图，例如活动屏幕，那么我真的找不到一个非常有用的包装类。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:03:51.130

根据文档， [UIBezierPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)类“是核心图形框架中与路径相关的功能的 Objective-C 包装器...... [它] 实际上只是 CGPathRef 数据类型和与之关联的绘图属性的包装器小路。” “ [iOS 绘图和打印指南”](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html)对此类进行了描述，并附有一些漂亮的图表。（另见它的表兄弟[NSBezierPath](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html)和[CGPathRef](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/tdef/CGPathRef)。）

至于 CGContext 本身的包装器......*更新*：......在我编写了自己的概念验证包装器之后，我发现了 Marcel Weiher 的[MPWDrawingContext](https://github.com/mpw/MPWDrawingContext)。它添加了一堆有用的方法，并且还支持链接！

* * *

我刚刚编写了一个[Ruby 脚本](https://github.com/alexch/unsuck/blob/master/cgcanvas.rb)来为 CGContext 生成一个名为 CGCanvas 的包装类：

*   [https://github.com/alexch/unsuck/blob/master/unsuck/CGCanvas.h](https://github.com/alexch/unsuck/blob/master/unsuck/CGCanvas.h)
*   [https://github.com/alexch/unsuck/blob/master/unsuck/CGCanvas.m](https://github.com/alexch/unsuck/blob/master/unsuck/CGCanvas.m)
*   [使用文档](https://github.com/alexch/unsuck#cgcanvas-a-wrapper-for-cgcontext-methods)

它还不是很有用，但它证明了这个概念。我喜欢能够看到参数名称，尽管 API 的功能仍然很繁琐。

前：

```
CGContextFillEllipseInRect(context, CGRectMake(30.0, 210.0, 60.0, 60.0));
CGContextAddArc(context, 150.0, 60.0, 30.0, 0.0, M_PI/2.0, false);
CGContextStrokePath(context);
CGContextAddArc(context, 150.0, 60.0, 30.0, 3.0*M_PI/2.0, M_PI, true);
CGContextStrokePath(context); 
```

后：

```
[canvas fillEllipseInRect:CGRectMake(30.0, 210.0, 60.0, 60.0)];
[canvas addArc_x:150.0 y:60.0 radius:30.0 startAngle:0.0 endAngle:M_PI/2.0 clockwise:false];
[canvas strokePath];
[canvas addArc_x:150.0 y:60.0 radius:30.0 startAngle:3.0*M_PI/2.0 endAngle:M_PI clockwise:true];
[canvas strokePath]; 
```

我做了一些技巧来使名称有意义......例如，具有多个参数的函数名称获取附加到基本名称的第一个参数的名称（除非它已经以它结尾）。我使用下划线而不是更像 Cocoa 的“with”来分隔基本名称和参数名称，例如，`moveToPoint_x:y:`而不是`moveToPointWithX:y:`or `moveToPoint:y:`。

如果我继续使用这个类，我可能会添加更多的构造函数，并且可能会添加一些块方法（[就像这个人所做的那样](http://www.natestedman.com/post/improving-cgcontext-with-blocks/)），这样你就可以同时开始、构建和绘制路径。还有很多名字可以更短，很多方法可以使用一些默认值。

也许是方法链！要是 Objective-C 不是那么疯狂就好了。它必须看起来像这样：

```
[[[[[[[[canvas
  setRGBStrokeColor_red: 1.0 green: 1.0 blue: 1.0 alpha: 1.0]
  setRGBFillColor_red:0.0 green:0.0 blue:1.0 alpha:1.0]
  setLineWidth:2.0]
  fillEllipseInRect:CGRectMake(30.0, 210.0, 60.0, 60.0)]
  addArc_x:150.0 y:60.0 radius:30.0 startAngle:0.0 endAngle:M_PI/2.0 clockwise:false]
  strokePath]
  addArc_x:150.0 y:60.0 radius:30.0 startAngle:3.0*M_PI/2.0 endAngle:M_PI clockwise:true]
  strokePath]; 
```

（这不是*那么*可怕，我想......）

# clojure - Clojure，core.logic：列表

> ID：10842647
> 
> 赞同：1
> 
> 时间：2012-05-31T23:33:42.153
> 
> 标签：clojure, clojure-core.logic

根据[https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer](https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer) core.logic 支持 listo。

但是，以下代码无法编译

```
(ns test.chap03
  (:refer-clojure :exclude [==])  
  (:use [clojure.core.logic]))

(defn ex07 []
  (run*
    [x]
    (listo `(a b ~x d)))) 
```

它抱怨：

异常：java.lang.RuntimeException：无法解析符号：此上下文中的 listo，正在编译：（test/chap03.clj:8）

问题：发生了什么事，我如何获得 listo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:00:49.183

listo 未实施。core.logic 并未附带 The Reasoned Schemer 的所有定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T04:36:32.577

正如 user1311390 指出的那样，它们在测试中可用。

[https://github.com/clojure/core.logic/blob/master/src/test/clojure/clojure/core/logic/tests.clj#L459](https://github.com/clojure/core.logic/blob/master/src/test/clojure/clojure/core/logic/tests.clj#L459) 这里是实现listo的部分。

```
(defn pairo [p]
  (fresh [a d]
    (== (lcons a d) p)))

(defn listo [l]
  (conde
    [(emptyo l) s#]
    [(pairo l)
     (fresh [d]
       (resto l d)
       (listo d))])) 
```

现在我们可以得到预期的行为。请注意，为简洁起见，我故意不将整个缺失的实现包含在 The Reasoned Schemer 中。见上面的链接。

```
(run 1
  [x]
  (listo `(a b ~x d))) 
;; => (_0) 
```

# php - 访问php中关联数组中的第一个元素

> ID：10842654
> 
> 赞同：1
> 
> 时间：2012-05-31T23:34:27.103
> 
> 标签：php, mysql, associative-array

我有以下 sql，它返回在 php 中存储为关联数组的行

```
select count(*) as a from "tablename" where columnname = "some"; 
```

我知道这个 sql 每次运行时只会返回一行和一列，即“a”。有没有办法访问该值而不必执行 foreach 循环。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:37:58.387

是的，访问二维数组中的第一个数组，然后使用键“a”访问元素：

```
$my_array[0]['a'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:40:56.327

使用[重置](http://php.net/manual/en/function.reset.php)。

```
$value = reset($array); 
```

# objective-c - 为 hello world 启动什么样的项目有关系吗？

> ID：10842659
> 
> 赞同：0
> 
> 时间：2012-05-31T23:35:24.407
> 
> 标签：objective-c, ios, xcode, cocoa-touch

这是我接触 iOS 开发的第一天。我得到了 Xcode 和所有其他的东西。然后我创建了一个新项目。我在网上找到的许多教程都建议启动一个基于 Windows 的应用程序，但我没有看到它，所以我启动了一个基于页面的应用程序。

它们之间有什么区别？也许我下载的东西的版本比教程中的版本新？

另外，我的开发界面有 .h 和 .m 文件。目前，那里的代码对我来说同样陌生。我从哪里开始编程？:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:09:03.947

从单视图模板开始。您可以在为您创建的单个视图上测试控件和 UI 元素。

h 表示标题，m 表示实现。在 h 你宣布类的公共元素。在 m 你实现它们。

本教程应该会有所帮助：

[http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T00:14:13.063

我个人会从一个空的应用程序开始，然后学习添加东西。使用新版本的 Xcode 和新的 Storyboard API，添加新的故事板和添加视图控制器等非常容易。我有几个关于[irockios.com](http://irockios.com)，但 Lynda.com 上的教程、斯坦福视频 (iTunesU) 和 Ray Wenderlich 是很好的学习资源。回顾一下模板之间的一些差异：

*   主细节 - 这将为您提供一个带有导航控制器和 2 个视图控制器的故事板（一个主视图将是一个 TableViewController，一个细节视图将是一个常规视图控制器。您还可以选择添加核心数据堆栈（iOS 的面向对象的 DBMS）。
*   Open GL Game - 制作游戏的模板（我从未使用过这个）。
*   基于页面 - 为您提供页面视图控制器和根视图控制器和数据视图控制器。这为您提供了一个基于翻页的 UI（我不使用它）
*   单一视图 - 一个常见的视图。为您提供一个带有一个视图控制器和一个场景的故事板。使用此模板的缺点是没有包含 Core Data 堆栈的选项。虽然 CD 不是初学者会使用的东西，但它是您想要习惯包含的东西。如果你继续做 iOS 开发，你以后会用到它。
*   选项卡式应用程序 - 为您提供带有两个视图控制器（每个选项卡一个）的选项卡栏控制器。像单一视图一样 - 没有包含核心数据堆栈的选项。
*   Utility App - 用于翻转视图样式的 UI。Core Data 是这里的一个选项，虽然我不明白为什么。
*   空应用程序。我的最爱。Core Data 是一个选项，添加 Storyboard 很简单。如果你打算让 iOS 开发成为你经常做的事情，那么你需要学会从这个开始。irockios.com 上的[教程](http://irockios.com/?p=32)涉及使用空模板并在不到 10 分钟的时间内拥有一个基于选项卡式、基于导航控制器的应用程序以及核心数据。这就是我开发应用程序的方式。

我个人会从 Lynda.com 课程（Simon Allardice 的课程很好）和斯坦福 iTunesU 课程（最新一门）开始，然后还浏览 Ray Wenderlich 的网站以获取教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T23:57:19.667

要启动 Objective-c，您应该从命令行工具开始，它们是完全基于文本的程序。要启动命令行项目，请打开 Xcode，然后会弹出窗口，其中包含创建新项目的选项。然后，转到左侧的侧边栏，然后单击 Mac OS X 下的应用程序。从那里，单击命令行工具。产品名称部分是项目的名称。我建议检查自动引用计数框。此外，请确保在**Type**下拉菜单中选择**Foundation 。**

 **你应该从命令行工具开始学习objective-c的基本语法和设计模式，因为当你进入iPhone应用程序时，你必须学习许多框架的来龙去脉。我建议开始使用的模板是 Single View Application 模板。

希望这可以帮助。

PS 我同意 Micheal 的观点，你应该买一些不熟悉 Objective-C 的书。我个人最喜欢的是 Stephan Kochan 的 Objective-C 第四版编程。它非常全面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T00:29:55.590

RayWenderlich.com 的教程将成为您最好的朋友。它们会保持最新状态，您可以对接下来要查看的内容进行投票。

具体来说，我将从这个全新的教程开始，以实现您的目标 C。[http://www.raywenderlich.com/12444/objectively-speaking-a-crash-course-in-objective-c](http://www.raywenderlich.com/12444/objectively-speaking-a-crash-course-in-objective-c)**

# html - Internet Explorer 10 Windows 8 删除文本输入和密码操作图标

> ID：10842665
> 
> 赞同：70
> 
> 时间：2012-05-31T23:36:24.640
> 
> 标签：html, css, internet-explorer, windows-8, internet-explorer-10

我正在 Windows 8 上的 Internet Explorer 10 中测试一个高度自定义的 Web 应用程序，因为它是一个即将发布的版本，并且可能有一天会使用我的应用程序。看一下应用程序中一些文本输入控件的示例屏幕截图：

![在此处输入图像描述](../Images/05c8d49bfb2cbfd76456c8b7bd63c7e4.png)

有没有办法在 HTML 或 CSS 中删除位于文本和密码输入控件右侧的操作图标？

感谢您的时间。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-01T17:00:14.477

您需要使用[-ms-clear 伪元素](http://msdn.microsoft.com/en-us/library/windows/apps/hh465740.aspx)。并使用[-ms-reveal](http://msdn.microsoft.com/en-us/library/windows/apps/hh465773.aspx)作为密码框。

这应该这样做：

```
 ::-ms-clear {
      display: none;
  } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-01T05:41:45.397

[由于此答案](https://stackoverflow.com/a/14739092)中的原因，您应该改用它。

```
/* don't show the x for text inputs */
::-ms-clear {
    width : 0;
    height: 0;
}

/* don't show the eye for password inputs */
::-ms-reveal {
    width : 0;
    height: 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T15:09:22.893

除非浏览器处于兼容模式，否则 jeffamaphone 的答案有效：

> 您需要使用 -ms-clear 伪元素。并使用 -ms-reveal 作为密码框。
> 
> 应该这样做：
> ::-ms-clear { display: none;
> }

但是，当浏览器处于兼容模式时，显示图标仍然会出现。要解决这个问题，请使用此标签强制浏览器进入 IE10 模式 <meta http-equiv="x-ua-compatible" content="IE=edge">

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-11T10:04:57.227

从 Internet Explorer 10 中的文本字段中删除操作图标只需使用此 css 伪元素

```
 ::-ms-clear { 
  display: none; } 
```

从 Internet Explorer 10 中的密码字段中删除操作图标只需使用此 css 伪元素

```
::-ms-reveal
 {
   display: none; 
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-20T13:15:09.047

IE10-docmode "standard" 的解决方案之前已经贴过。

我偶然发现了某种独立于 IE10-docmode 的解决方法。如果您可以忍受将所有输入的宽度更改为最大 80 像素，请使用以下 jquery：
``$("input[type=text]").width(80);``

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T02:50:02.637

我没有 Windows 8 预览版，但您是否尝试过使用 HTML 和 CSS 创建自定义输入字段？也许试试这个：[http ://www.webdesign4me.nl/Knowledge-Base/custom-input-field-using-html-and-css](http://www.webdesign4me.nl/Knowledge-Base/custom-input-field-using-html-and-css)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-09T17:39:16.443

也许不是最好的解决方案，但如果此页面上的任何其他解决方案都不适合您，请试试这个。

在输入的 :before 上放置一个空白背景图像。更具体地说 - 我有自己的清晰按钮，其样式类似于网站，而 IE 则在其自身的基础上。我用清晰的图标更改了原来的透明PNG，背景是纯色的。

其他浏览器看不出有什么区别，它会阻止 IE 清除按钮。我想只有当输入背景颜色没有改变时才有效。

# google-chrome - 在 Safari 中使用鼠标滚轮/触控板滚动时，光标不会定位元素

> ID：10842675
> 
> 赞同：0
> 
> 时间：2012-05-31T23:37:20.310
> 
> 标签：google-chrome, safari, scroll, hover, target

例子：

在 Chrome 和 Safari 中比较[Twitter.com](https://twitter.com/)上的推文提要。当鼠标保持静止并使用触控板或鼠标滚轮滚动提要时，不会触发悬停状态。似乎光标仅在移动光标时针对 Safari 中的元素，而不是在滚动浏览器窗口时。这适用于 CSS 和 JQuery 悬停状态。

[Ex.fm](http://ex.fm/search/Buddy%20Holly)已经能够解决这个问题。如果您在歌曲列表上使用静止光标滚动浏览器窗口，则会触发悬停状态。必须以某种方式破解此 Safari 特定问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:46:17.420

这在“Webkit Nightly”的最新版本中得到了修复。几乎可以肯定它会出现在 Safari 的下一个主要版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:23:12.313

Safari 在使用触控板或滚轮滚动时不会检测鼠标位置（因此会触发悬停状态），除非您正在与之交互的对象位于可滚动的`div`. `div`您可以在集合内嵌套整个内容提要，`overflow:scroll;`以允许在滚动时进行动态定位。然后 * 将你设置`div`为填满整个屏幕，然后你给 ** 滚动页面的外观，而实际上只在其中滚动`div`。

查看这个 JSFiddle 示例：http: [//jsfiddle.net/8Nkpr/26/](http://jsfiddle.net/8Nkpr/26/)

这个来自 Graham Hicks 的例子：http: [//jsfiddle.net/U7SGh/](http://jsfiddle.net/U7SGh/)

--

*显然，如果您正在执行依赖于使用 JQuery 检测滚动位置的任何动画或交互，这将成为一个问题。对不起，这个技巧没有视差。

**这就是 ex.fm（如原始问题中所述）解决它的方式。

***感谢 Graham Hicks (@gmh) 为我们指明了正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T01:28:38.013

这个问题的答案可能会给你一个关于如何进行的提示。在 Firefox 中会发生什么？

[Safari iphone/ipad 在新链接上的“鼠标悬停”在前一个被替换为 javascript 后](https://stackoverflow.com/questions/3120497/safari-iphone-ipad-mouse-hover-on-new-link-after-prior-one-is-replaced-with-ja)

# sql - 基本sql：输出用双引号括起来的标题

> ID：10842676
> 
> 赞同：2
> 
> 时间：2012-05-31T23:37:22.223
> 
> 标签：sql, sql-server, sql-server-2008

我认为这很容易做到。假设我有以下查询：

```
select QUOTENAME(countNumber as [Count Number],'"'), QUOTENAME(testValue,'"') as [Test Value] from tblTestResults 
```

我的结果用双引号括起来-很好。但是现在当我选择“另存为”时，我不仅想要标题，而且我希望它们在生成的 csv 文件中也用双引号括起来。我看到（从另一个stackoverflow问题）应该有一个选项可以在工具>查询结果中选择标题。但是我的好像没有这个。想法？

另外，我正在使用 Microsoft SQL Server 2008 (SP1) - 10.0.2531.0 (X64)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:49:47.793

```
SELECT TOP (1) QUOTENAME(name, '"') AS ["Name"]
FROM sys.objects ORDER BY [object_id]; 
```

产生这个：

```
"Name"
"sysrscols" 
```

如果您单击网格输出的左上角（因此选择了所有行），您可以右键单击并选择“使用标题复制”...这将按照上面的方法复制带有引号的标题。

Query > Results to File 也应该用双引号显示这些标题（但由于某种原因不保存结果 - 它不包括标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:01:43.670

正如@Aaron Bertrand 提到的，在另存为时不能包含标题

如果您的标题是静态的（即事先知道，那么就可以了）。虽然我不是很清楚你想要达到什么目的

```
select "CountNumber", "TestValue"
UNION ALL
select QUOTENAME(countNumber as [Count Number],'"'), QUOTENAME(testValue,'"') as [Test Value] from tblTestResults 
```

简单的意思

```
Your column headers
UNION ALL
Your results 
```

这使您的列成为行的一部分，因此您可以将它们导出为 CSV。第一行现在包含您的列。不要忘记在必要时添加您的 QUOTENAME(...)

# lua - lua多重赋值

> ID：10842679
> 
> 赞同：3
> 
> 时间：2012-05-31T23:37:34.243
> 
> 标签：lua

在 lua 中是否有任何方法可以进行多重赋值，以使右侧的缺失值不被视为 nil ？

类似于

```
 a,b,c = 1 
```

但得到

```
 a = 1, b = 1, c = 1 
```

结果。

很遗憾，

```
 a = b = c = 1 
```

不起作用。

我需要这个，因为我可能在右侧有复杂的表，我想保持简短（没有任何额外的变量）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:52:40.937

没有。

你的第一个例子（多重赋值）已经有明确定义的语义，所以 Lua 需要一个加法运算符/关键字/东西来表示对不同语义的渴望（重复最后一个 r 值）。它没有。

您的第二个示例（将赋值链接在一起，ala C）要求赋值是表达式，而在 Lua 中它们是语句。

* * *

你能得到的最接近的方法是定义一个将值多次推送到堆栈的函数：

```
function push(x)
    return x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
end 
```

然后你可以说：

```
a,b,c,d,e,f,g = push(t) 
```

但这很笨拙。

* * *

出于好奇，为什么您需要在同一范围内对同一个表进行一堆不同的引用？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T14:42:45.393

你可以使用一个函数：

```
local a,b,c = (function(t) return t,t,t; end)({1,2,3}); 
```

不过，我更喜欢明显的解决方案：只需使用两行

```
local a = {1,2,3};
local b,c = a,a; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T00:03:47.610

不，这个 AFAIK 没有捷径。

此外，无论如何，这可能不会像您希望的表值那样工作。

```
local some_tbl = {a = 1, b = 2, c = 3}
-- you just assigned the same table to both variables
local a,b = some_tbl, some_tbl

a.a = 5

print(a.a, b.a) 
```

上面的代码输出：

```
>lua -e "io.stdout:setvbuf 'no'" "junk.lua" 
5   5 
```

您刚刚更改了两个变量上表的 a 值（这可能不是您想要的，您可能希望为每个变量分配相同的表定义，但每个表包含不同的数据）。

当我有代码处理相同表结构的单独副本时，我编写了一个 getter 函数来返回具有相同定义的新副本。如果在上面的代码中使用，它将如下所示：

```
function get_TableLayout1()
    -- return separate copies of the same table layout
    return {a = 1, b = 2, c = 3}
end

local a,b = get_TableLayout1(), get_TableLayout1()

a.a = 5

print(a.a, b.a) 
```

打印出来：

```
>lua -e "io.stdout:setvbuf 'no'" "junk.lua" 
5   1 
```

正如预期的那样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-27T22:17:50.343

我希望这对你有用

```
function push(n, value)
    if n <= 0 then
        return
    elseif n == 1 then
        return value
    else
        return value, push(n - 1, value)
    end
end

k, l, o, p = push(3, "foo")

print(k)
print(l)
print(o)
print(p)

-- Output:
-- foo
-- foo
-- foo
-- nil 
```

# android - 任何人都可以帮助我使用 android XML 解析器吗？

> ID：10842680
> 
> 赞同：1
> 
> 时间：2012-05-31T23:37:39.413
> 
> 标签：android, xml, multithreading, parsing

我通常不寻求帮助，我总是自己研究并尝试找到解决方案，但这次我真的被困住了......我对某些语言有很多经验，但对 java 没有。 .. 所以，我想做的是一个应用程序，它具有动态布局，并从特定主机上的 XML 文件加载它。我的第一个问题显然是不可能从主线程读取 XML，所以我必须了解线程和 Asynctaks，我决定使用一个简单的线程并将值存储在我创建的一些全局变量中，但它不起作用...我也尝试将 SAX 用于 XML 解析器，但我更喜欢 DOM。我只是想这样做超过3天，我对此有点生气，我希望有人能帮助我，这是我的代码：

这是我定义我的变量的类。它们都应该处理多个值，除了 XML 值，它将存储 XML 的 URL 以在线程中使用它。

```
public class Info {
        public static String Param1[];
        public static String Param2[];
        public static String Param3[];
        public static String Param4[];
        public static String Param5[];
        public static String Param6[];
        public static String XML;
} 
```

这是我的主线：

```
//Create the basic layout
ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);
Info.XML="mylink";
Thread thread = new Thread()
{
    @Override
    public void run() {
        try {
            URL url = new URL(Info.XML);
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();
            NodeList ActionContainers = doc.getElementsByTagName("ActionContainer");
            Node mainContainer = ActionContainers.item(0);
            Element Container = (Element) mainContainer;
            NodeList Actions = Container.getElementsByTagName("Action");
            for (int i = 0; i < Actions.getLength(); i++) {
                Node mainAction = Actions.item(i);
                Element Action = (Element) mainAction;
                Info.Param1[i]=Action.getAttribute("Param1");
                Info.Param2[i]=Action.getAttribute("Param2");
                Info.Param3[i]=Action.getAttribute("Param3");
                Info.Param4[i]=Action.getAttribute("Param4");
                Info.Param5[i]=Action.getAttribute("Param5");
                Info.Param6[i]=Action.getAttribute("Param6");
            }
        } catch (Exception e) {
            Info.XML="Erro";
        }
    }
};
try{
    thread.start();
} catch(Exception e){
    Info.XML="Erro";
}

    EditText et = new EditText(this);
        et.setText(Info.XML);
        ll.addView(et);
        setContentView(sv); 
```

没有检测到异常，它根本不返回xml信息......我希望有人可以在这里给我一点帮助。

谢谢

编辑：

这是 XML：

```
<appname Version="yyy" WrittenOn="yyy">
<Config>
    <Page Id="yyy">
        <ActionContainer Id="yyy">
            <Action Param1="xxx" Param2="xxx" Param3="xxx" Param4="xxx" Param5="xxx" Param6="xxx"></Action>
            <Action Param1="xxx" Param2="xxx" Param3="xxx" Param4="xxx" Param5="xxx" Param6="xxx"></Action>
            <Action Param1="xxx" Param2="xxx" Param3="xxx" Param4="xxx" Param5="xxx" Param6="xxx"></Action>
            <Action Param1="xxx" Param2="xxx" Param3="xxx" Param4="xxx" Param5="xxx" Param6="xxx"></Action>
            ...
        </ActionContainer>
    </Page>
</Config> 
```

我需要所有的 xxx，如果可能的话，我想把它们放在一个多维数组上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T03:45:59.813

而不是`Thread`你应该尝试使用`AsyncTask`. 看这里：

关于线程的官方android页面非常好 [http://developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

这也很好地解释了它 [http://labs.makemachine.net/2010/05/android-asynctask-example/](http://labs.makemachine.net/2010/05/android-asynctask-example/)

关于 XML 解析，我的应用程序依赖于从 HTTP 请求中提取的大量 XML，我发现 SAX 解析器非常好，并且一旦开始使用就很容易使用。

关于 SAX 示例，它已经有*很长时间*没有解决了，但我在书签中找到了这个示例，希望它有所帮助。只需阅读 SAX 部分 [http://www.ibm.com/developerworks/xml/library/x-android/](http://www.ibm.com/developerworks/xml/library/x-android/)

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:40:13.250

我仍然认为缺少一些代码，但是为了不让您陷入困境，这里有几件事可能是错误的：

*   你可能实际上没有得到异常，因为`et.setText(Info.XML);`可能在你的线程完成**之前执行，忽略“ErrNo”。**我对此的注释：
    *   您的 XML 文件可能存在错误的 URL（请记住，对于远程文档，您需要`INTERNET`在应用程序中获得权限），
    *   您发布的 XML 无效：`<appname>`未关闭和/或没有根元素。
    *   您似乎没有在`Info.ParamX`任何地方初始化数组，这将导致`NullPointerException`,
    *   即使你确实初始化了它们，你也没有考虑 的大小`Actions.getLength()`，这可能会导致一个`ArrayIndexOutOfBoundsException`或类似的结果；换句话说，在循环`Info.ParamX = new String[Actions.getLength()];`之前包含。`for`
    *   除此之外，您的解析代码似乎工作正常。要正确调试代码，请**使用 ADT 中的 Debug 选项**，或**使用`System.out.println()`在 catch 子句中输出异常，然后在 LogCat 中检查它**。
*   这段代码在哪里？如果它不在`onCreate()`您的活动中，请将其放在那里。

另外，一些小问题：

*   尝试对您的 Java 字段和变量使用[camelBack](http://en.wikipedia.org/wiki/CamelCase)表示法，这将使您的代码对 Java 程序员更具可读性。
*   将 a`Thread`用于一次性应用程序是可以的，但您通常应该避免使用它，例如将其替换为 an `AsyncTask`（您已经阅读过）。

PS。在中`ParamX`，`X`当然是从 1 到 6（包括 1 到 6）的每个整数。

# java - liferay-ui:input-move-boxes 从动作中获取列表

> ID：10842681
> 
> 赞同：1
> 
> 时间：2012-05-31T23:37:52.500
> 
> 标签：java, jsp, action, liferay, portlet

我可以从 my.jsp 获取 ArrayList 到 action.java

我的.jsp

```
<%
List left = new ArrayList(), right = new ArrayList(), l = new ArrayList();
left.add(new KeyValuePair("1key", "item1value"));
left.add(new KeyValuePair("4key", "item4value"));
left.add(new KeyValuePair("3key", "item3value"));
right.add(new KeyValuePair("2key", "item2value"));
%>
<aui:form action="<%= editListURL %>" method="post">
<liferay-ui:input-move-boxes
    leftBoxName="left"
    leftTitle="Left box"
    leftList="<%=left %>"
    rightBoxName="right"
    rightTitle="Right box"
    rightList="<%=right %>"     
/>
<aui:button type="submit" value="send"/>
</aui:form> 
```

动作.java

```
public void setSelectMyStdudent(ActionRequest actionRequest,
            ActionResponse actionResponse) throws IOException, PortletException {
        try{
            String left = "";
            left = actionRequest.getParameter("left");
            if(left.isEmpty() || left == "" || left == null) {
                System.out.println("left EMPTY");
                left = "0";
            } else {
                KeyValuePair pair = new KeyValuePair();
                pair.setKey(left);
                System.out.println("left = " + left);
            }
        } catch (Exception e) {
            System.out.println("Exception: " + e);
        }
    } 
```

这是代码不起作用（。请帮我做这个问题。如何从 jsp 文件中获取密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:21:02.310

你的代码看起来是正确的，唯一的问题是你的“setSelectMyStdudent”是否真的被调用了。

你在哪里定义：

```
<%= editListURL %> 
```

至于这个工作，它应该被定义为：

```
<portlet:actionURL var="editListURL " name="setSelectMyStudent" /> 
```

你也知道你有一个错字，你有“setSelectMyStdudent”可能应该是“setSelectMyStudent”。我已经在我的示例中纠正了这一点。

让我知道这是否有帮助或您还有其他问题。

# jquery - 如何用 jQuery 重现 Flash 效果？

> ID：10842684
> 
> 赞同：0
> 
> 时间：2012-05-31T23:38:01.307
> 
> 标签：jquery, css

我想用 jQuery重现[这种闪光效果。](http://www.sopranowebdesign.com/animation/)您能否指点我一些好的教程或给我一些指示？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:45:18.257

我使用[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

# javascript - 使用 jquery 以表单形式克隆文件上传输入

> ID：10842686
> 
> 赞同：3
> 
> 时间：2012-05-31T23:38:06.110
> 
> 标签：javascript, jquery, file-upload, input, clone

我正在制作一个上传表单，如果他们想要上传多个文件，我希望用户在需要使用 jquery 时向表单添加更多输入文件字段。这是我到目前为止没有工作的代码。你也可以在 js fiddle 上看到这个：http: [//jsfiddle.net/benpaton/JUJxn/](http://jsfiddle.net/benpaton/JUJxn/)

提前致谢。

```
$(function () {
    $('#add-more-files').click(function() {
       var cloned = $(this).prev().clone();
       cloned.val(null);
       $(cloned).insertBefore($(this));
    });
});

<ul>
    <form enctype="multipart/form-data" action="" method="post">
        <li>Choose a file to upload:</li>
        <li><input name="uploadedfile" type="file" size="40" /></li>
        <li><a href="" id="add-more-files">Add file upload box</a></li>
        <li><input type="submit" value="Upload File" /></li>
    </form>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:42:37.307

您没有选择`<li>`元素。此外，您的锚点需要一个哈希值以防止它尝试解析 url

[jsFiddle](http://jsfiddle.net/GppYE/)

**HTML**

```
<ul>
    <form enctype="multipart/form-data" action="" method="post">
        <li>Choose a file to upload:</li>
        <li><input name="uploadedfile" type="file" size="40" /></li>
        <li><a href="#" id="add-more-files">Add file upload box</a></li>
        <li><input type="submit" value="Upload File" /></li>
    </form>
</ul> 
```

**JS**

```
$(function () {
   //clone file upload box
   $('#add-more-files').click(function() {
      var cloned = $(this).parent().prev().clone();
      cloned.val(null);
      $(cloned).insertBefore($(this).parent());
   });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:41:57.763

看起来您正在尝试选择不存在的东西。`$('#add-more-files').prev()`将是一个空的 jQuery 对象。[`$.prev()`](http://api.jquery.com/prev/)选择前一个*兄弟姐妹*，给定您提供的选择器，其中没有兄弟姐妹。

我相信你想要类似的东西`$(this).parent().prev().clone()`

# api - GetGlue api总签到次数

> ID：10842688
> 
> 赞同：1
> 
> 时间：2012-05-31T23:38:21.783
> 
> 标签：api

获取胶水 API 提供了一种获取签到列表的方法

[http://api.getglue.com/v2/object/users?objectId=movies/slumdog_millionaire/danny_boyle&action=checkedIn](http://api.getglue.com/v2/object/users?objectId=movies/slumdog_millionaire/danny_boyle&action=checkedIn)

奇怪的是，我找不到提供页面上可用的签到总数（在这种情况下为 4109）的方法：

[http://getglue.com/movies/slumdog_millionaire/danny_boyle](http://getglue.com/movies/slumdog_millionaire/danny_boyle)

我希望我不必检索 HTML 页面并对其进行解析，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:52:33.240

我自己回答，我问得太快了。但是，如果有人想知道，

http://api.getglue.com/v2/object/get?objectId=movies/slumdog_millionaire/danny_boyle&oauth_consumer_key=[xxxxxxxxxxxxxxx]

其中 objectId 是 getGlue 识别的对象 ID，oauth_consumer_key 是您的使用者密钥，您可以在通过电子邮件发送给他们后从 getGlue 获得。

将返回我搜索的信息（包括签到次数）。/object/get 方法的 GetGlue API 页面上列出的示例响应中没有包含足够有趣的签入，我不明白为什么。

# python - 使用 PickleProperty 在 GAE 中存储字典

> ID：10842693
> 
> 赞同：1
> 
> 时间：2012-05-31T23:38:58.650
> 
> 标签：python, google-app-engine, webapp2

我有一个 python 字典，我试图通过 pickle 属性存储在 GAE Gql Datastore 中。

我试图按照这个问题和答案， [在 GAE 中存储字典列表](https://stackoverflow.com/questions/5874009/store-a-list-of-dictionaries-in-gae)

但它不适用于下面的代码。我收到一个错误，表明我的列表有问题

我设置pickle属性和数据模型类如下，

```
class PickleProperty(db.Property):
    def get_value_for_datastore(self, model_instance):
        value = getattr(model_instance, self.name, None)
        return pickle.dumps(value)

    def make_value_from_datastore(self, value):
        return pickle.mloads(value)

class MDB(db.Model):
    Name = db.StringProperty(required=True)
    Times = PickleProperty()
    created = db.DateTimeProperty(auto_now_add = True) 
```

我的代码中有一个函数可以插入数据并将其读出

```
def m_time_manage(m=""):

    if not m:
        r = db.GqlQuery("select * from MDB")
    else:
        #find specific masjid requested
        r = db.GqlQuery("select * from MDB where Name = %s" % (s))

    #if masjid time data doesn't exist in db throw in placeholders...
    if r is None:
        times = {}
        times['a'] = "8:49"
        times['b'] = "10:19"

        times_entry = MDB(Name="abc",Times=times)
        times_entry.put()

    r = db.GqlQuery("select * from MasjidDB")
    return (r[0].Name, r[0].Times) 
```

在我的 get 函数中，我如下调用 m_time_manage() ftn，

```
(mName, times) = m_time_manage()
        self.write(times) 
```

我收到这个错误，pickle.loads 和文件结束错误有一些问题......完整的错误是但我不确定如何在 python 中存储字典，

```
 line 31, in make_value_from_datastore
    return pickle.loads(value)
  File "/usr/lib/python2.7/pickle.py", line 1382, in loads
    return Unpickler(file).load()
  File "/usr/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/lib/python2.7/pickle.py", line 880, in load_eof
    raise EOFError 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:05:56.350

我建议切换到 NDB 并使用其内置的 PickleProperty。请参阅[https://developers.google.com/appengine/docs/python/ndb/properties](https://developers.google.com/appengine/docs/python/ndb/properties)

# php - 确定目录中的目录数量

> ID：10842696
> 
> 赞同：0
> 
> 时间：2012-05-31T23:39:21.770
> 
> 标签：php

如何有效地确定 PHP 目录中的目录数量？

例如，假设我有这个结构：

```
/Directory/ -->
... /Directory 1/
... /Directory 2/
... /Directory 3/
... File.txt
... Filed2.txt 
```

很高兴知道它们是 3 个目录，以免包含当前或文件本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:42:03.253

此代码将执行此操作：

```
$count = -2; // Subtract 2 for directories "." and ".."
$dh  = opendir('path/to/dir');
while (false !== ($filename = readdir($dh)))
    if(is_dir($filename))
        $count++; 
```

`$count`赋值的原因`-2`是考虑到当前目录和父目录。这将计算所有目录，包括隐藏目录。如果您不想在 linux 系统上隐藏那些，只需检查第一个字符是否是`.`using `false !== strpos($filename, '.')`，然后初始化`$count`为`0`而不是`-2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:42:45.967

```
$path = 'Directory';
echo ( count ( glob("$path/*", GLOB_ONLYDIR) ) ); 
```

# css - 我需要我的链接放在容器后面

> ID：10842700
> 
> 赞同：0
> 
> 时间：2012-05-31T23:40:38.273
> 
> 标签：css, z-index

我需要帮助以使我的导航链接位于我的容器后面。一旦我这样做了，我就可以对我的链接产生跳跃影响并添加图像。我希望它看起来像一个文件夹，当您将鼠标悬停在链接上时，看起来每个链接都会跳转到一个新文件夹。出于某种原因，当我输入代码以使链接跳转时，它会将链接向下推到我的容器中。我需要它在容器下方和后面一点点才能得到那种外观。你能帮忙吗？

```
BODY {
overflow:hidden;
      margin: 150px; 
      padding: 0; 
      background: url ();
      color: #404040; 
      font: normal 12px arial;}

#header {
      margin:35px auto;
      width: 800px;
      height: auto;
      padding: 10px 0px 0px 0px;
      background: #900}

A.main:link, A.main:active, A.main:visited
       {
       margin-bottom: 0px; 
       padding: 5px 20px 20px 10px;
       margin: 0px 2px 0px 2px;
       background: url('file:///C|/Users/JESS/Desktop/none');
       border:double;
       float:left;
       margin: 25px;}

A.main:hover  
     {color: #303030;
      border: double;
      margin:4px;}

#container {
     margin: 0px auto;
     padding-left:15px;
     width: 800px;
     height: auto;
     background: #000;
     border-style:double;
     box-shadow: 15px 15px 5px #333;
     -moz-box-shadow: 10px 10px 5px #333;
     -webkit-box-shadow: 10px 10px 5px #333;} 

#content {
     float: none;
     width: 800px;
     padding: 0px 0px 100px 0px;
     height: auto;
     text-align: justify;
     overflow: auto;} 
```

```
<div id="header">
      <center>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
      </center>
</div>

<div id="container">

<div id="content"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:08:38.643

您是否尝试过添加`z-index`和？`position``#header``#container`

```
#header {
  margin:35px auto;
  width: 800px;
  height: auto;
  padding: 10px 0px 0px 0px;
  background: #900;
  position: relative;
  z-index: -10;
}

#container {
  margin: 0px auto;
  padding-left:15px;
  width: 800px;
  height: auto;
  background: #000;
  border-style:double;
  z-index: 5;
  box-shadow: 15px 15px 5px #333;
  -moz-box-shadow: 10px 10px 5px #333;
  -webkit-box-shadow: 10px 10px 5px #333;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:46:24.330

设置`z-index`需要您设置`position`- 尽管值可以是相对的、绝对的或固定的。为了让它以我认为你所描述的方式“跳跃”，你可以弄乱边距，如下所示：

```
A.main:link, A.main:active, A.main:visited {
       z-index: 5;
       position: relative;
       margin-bottom: 0px;
       padding: 50px;
       padding-top: 0px;
       border:double;
       float:left;
       margin: 10px;}

A.main:hover {
      color: #303030;
      border: double;
      margin:10px;
      margin-top:0px;
      margin-bottom:20px;}

#container {
     margin: 0px auto;
     padding-left:15px;
     width: 800px;
     height: auto;
     background: #000;
     border-style:double;
     position:relative;
     box-shadow: 15px 15px 5px #333;
     -moz-box-shadow: 10px 10px 5px #333;
     -webkit-box-shadow: 10px 10px 5px #333;} 
```

# sync - 同步框架 - 添加 FilterClause 后删除不起作用

> ID：10842703
> 
> 赞同：0
> 
> 时间：2012-05-31T23:41:15.410
> 
> 标签：sync, microsoft-sync-framework

添加 FilterClause 后，删除不再起作用。

JuneT 表示[对跟踪表的过滤器是 Users_tracking](http://social.microsoft.com/Forums/en/syncdevdiscussions/thread/e9e65166-d49c-47be-a8b3-61d12ac779b8)

但是，我在 Users_tracking 中没有看到 IsPublished 列；我只看到用户 ID。

感谢您的帮助！

```
private static void ProvisionLocal(
   SqlConnection sqlLocalConn, DbSyncScopeDescription scopeDesc)
{
   var Users = SqlSyncDescriptionBuilder
     .GetDescriptionForTable("Users", sqlLocalConn);

   scopeDesc.Tables.Add(Users);

   var sqlLocalProv = new SqlSyncScopeProvisioning(sqlLocalConn, scopeDesc);
   sqlLocalProv.CommandTimeout = 3600;

   sqlLocalProv.Tables["Users"].AddFilterColumn("IsPublished");
   sqlLocalProv.Tables["Users"].FilterClause = 
      string.Format("[side].[IsPublished] = {0}", 1);

   if (!sqlLocalProv.ScopeExists("TestScope"))
   {
     sqlLocalProv.Apply();
   }
}

private static void ProvisionRemote( 
   SqlConnection sqlRemoteConn, DbSyncScopeDescription scopeDesc)
{
   var sqlRemoteProv = new SqlSyncScopeProvisioning(sqlRemoteConn, scopeDesc);
   sqlRemoteProv.CommandTimeout = 3600;

   if (!sqlRemoteProv.ScopeExists("TestScope"))
   {
     // Apply the scope provisioning.
     sqlRemoteProv.Apply();
   }
}

public void Synchronize()
{    
   var sqlSourceConn = new SqlConnection("...");
   var sqlDestinationConn = new SqlConnection("...");

   var scopeDesc = new DbSyncScopeDescription("TestScope");

   ProvisionLocal(type, sqlSourceConn, scopeDesc);
   ProvisionRemote(type, sqlDestinationConn, scopeDesc);

   // Prepare for synchronization
   var localProvider = new SqlSyncProvider("TestScope", sqlSourceConn);

   var remoteProvider = new SqlSyncProvider("TestScope", sqlDestinationConn);
   remoteProvider.ApplyChangeFailed += RemoteProvider_ApplyChangeFailed;

   var orch = new SyncOrchestrator();
   orch.RemoteProvider = remoteProvider;
   orch.LocalProvider = localProvider;
   orch.Direction = SyncDirectionOrder.Upload;

   SyncOperationStatistics stats = orch.Synchronize();

   sqlDestinationConn.Close();
   sqlSourceConn.Close();
} 
```

![在此处输入图像描述](../Images/029114a31ac946d1ab7a021bead3ecdb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:57:09.733

IsPublished 列位于跟踪表的底部...

你的桌子是另一个范围的一部分吗？您要添加另一个范围吗？

# c# - 使用 DataTable 作为 DataSource 的 GridView 排序事件处理

> ID：10842707
> 
> 赞同：0
> 
> 时间：2012-05-31T23:42:00.273
> 
> 标签：c#, asp.net, gridview, event-handling

我在 updatePanel 中有一个 ID 为 GridView1 的 GridView，我已经以编程方式定义了大多数事件，但是在创建用于排序的事件处理程序时我没有问题，您能否请看我的代码并建议使用方法来实现排序事件下面的数据表？

```
// Method to BinData to GridView1

private void BindData()
     {
         string strQuery = "SELECT * FROM [tbl_SignIns] ";
         SqlCommand cmd = new SqlCommand(strQuery);
         GridView1.DataSource = GetData(cmd);
         GridView1.DataBind();
     }

     private DataTable GetData(SqlCommand cmd)
     {
         DataTable dt = new DataTable();
         SqlConnection con = new SqlConnection(strConnString);
         SqlDataAdapter sda = new SqlDataAdapter();
         cmd.CommandType = CommandType.Text;
         cmd.Connection = con;
         con.Open();
         sda.SelectCommand = cmd;
         sda.Fill(dt);
         return dt;
     }

 protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
     {

?????????????????????????????????

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:53:32.177

我有同样的问题，我这样解决。首先，我在 gridview 标题上添加了向上和向下箭头。

```
 <asp:TemplateField FooterText="Toplam" HeaderText="---">
 <HeaderTemplate>
 <asp:Label ID="Label4" runat="server" Text="---"></asp:Label><br />
 <br />
 <div id="myelement">
 <asp:ImageButton ID="btnDateUp" runat="server" ImageUrl="~/Admin/skins/Skin_1/images/grid_uparrow.png"
 OnClick="btnDateUp_Click" />
 <asp:ImageButton ID="btnDateDown" runat="server" ImageUrl="~/Admin/skins/Skin_1/images/grid_downarrow.png"
 OnClick="btnDateDown_Click" Style="width: 16px" />
 </div>
 </HeaderTemplate>
 <ItemTemplate>
 <asp:Label ID="Label3" runat="server" Text='<%# Bind("OrderDate", "{0:D}") %>'></asp:Label>
 </ItemTemplate>
 <ItemStyle HorizontalAlign="Left" Width="210px" />
 </asp:TemplateField> 
```

之后，我像这样准备了我的 sql 查询；

```
protected void btnDateUp_Click(object sender, ImageClickEventArgs e)
    {
        sortingQuery = " ORDER BY OrderDate DESC ";
        if (radioListReport.SelectedValue == "1")
            SortGrid();
        else
            SortQuarterGrid();

        updatePanelGrid.Update();
    }

protected void btnDateDown_Click(object sender, ImageClickEventArgs e)
    {
        sortingQuery = " ORDER BY OrderDate ASC ";
        if (radioListReport.SelectedValue == "1")
            SortGrid();
        else
            SortQuarterGrid();

        updatePanelGrid.Update();
    } 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:23:05.737

您必须创建两个视图状态，一个用于排序方向，另一个用于排序表达式，以便在排序时进行检查。

首先，从 gridview 检索排序方向为“升序”和“降序”，当您想要在数据表中归档数据时，您必须使用传递 gridview 排序方向的“ASC”和“DESC”，然后在当对数据进行排序。

其次，一个翻转功能，将传递一个排序方向并将其翻转，当您第一次单击列时使用它，例如它会排序“ASC”，然后您第二次单击它时，它必须是“DESC”这就是我翻转它的原因。

第三，视图状态用于保留前一个排序的值。

第四，创建一个视图状态来保存 PageIndexChanging 事件的排序数据表，当然您必须检查视图状态是否为空，然后您必须获取数据并绑定它，否则您必须将网格视图与排序数据表绑定。

```
protected void GridView_Users_Sorting(object sender, GridViewSortEventArgs e)
{
    if (String.IsNullOrEmpty(ViewState["sortExpression"].ToString()) && String.IsNullOrEmpty(ViewState["sortDirection"].ToString()))
    {
      //Sort and bind data as ASCENDING for the first time
      DefaultSortBind(e);
    }
    else
    {
        if (ViewState["sortExpression"].ToString() == e.SortExpression.ToString())
        {
            string sortDirection = string.Empty;
            if (ViewState["sortDirection"].ToString() == e.SortDirection.ToString())
            {
                sortDirection = flipSortDirection(GetSortDirection(e.SortDirection.ToString()));
            }
            else
            {
                sortDirection = GetSortDirection(e.SortDirection.ToString());
            }

            DataTable dt = new UserInfoTableTableAdapter().GetData();
            dt.DefaultView.Sort = e.SortExpression + " " + sortDirection;
            GridView_Users.DataSource = dt.DefaultView;
            GridView_Users.DataBind();
            ViewState["sortedDt"] = dt.DefaultView.ToTable();
            ViewState["sortDirection"] = sortDirection;
        }
        else
        {
            //Sort and bind data as ASCENDING
            DefaultSortBind(e);
        }
    }
}

    private void DefaultSortBind(GridViewSortEventArgs e)
{
    ViewState["sortExpression"] = e.SortExpression;
    ViewState["sortDirection"] = e.SortDirection;
    //Fetch data again, because if we try to get data from gridview it will give null
    DataTable dt = new UserInfoTableTableAdapter().GetData();
    dt.DefaultView.Sort = e.SortExpression + " " + GetSortDirection(e.SortDirection.ToString());
    GridView_Users.DataSource = dt.DefaultView;
    GridView_Users.DataBind();
    ViewState["sortedDt"] = dt.DefaultView.ToTable();
}

    //Get sort direction
private string GetSortDirection(string sortDirection)
{
    if (sortDirection == "Ascending")
    {
        return "ASC";
    }
    else
    {
        return "DESC";
    }
}

//Flip sort direction
private string flipSortDirection(string sortDirection)
{
    if (sortDirection == "ASC")
    {
        return "DESC";
    }
    else
    {
        return "ASC";
    }
} 
```

# javascript - 将用户 ID 添加到 PhoneGap 文件上传

> ID：10842711
> 
> 赞同：2
> 
> 时间：2012-05-31T23:42:49.113
> 
> 标签：javascript, android, file-upload, cordova

我想使用 PhoneGap API 上传照片。FileTransfer 对象基本上是我想要的，因为我想上传一张照片，但我想包含一些关于用户的基本信息，例如他们的用户 ID，以便我可以将其存储为他们的。我的代码如下，这基本上来自[PhoneGap API](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)，但有我的补充

```
<html><head><script>function uploadPhotoandID(imageURI, userID) {
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg";

        var params = new Object();
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;

        var ft = new FileTransfer();
        ft.upload(imageURI, "http://some.server.com/upload.php", win, fail, options);
        ft.upload(userID, "http://some.server.com/upload.php", win, fail, options);
    }</script></head>
    <body><button onclick="uploadPhotoandID(imageURI, userID)">Click me</button></body</html> 
```

我是否需要像这样在 HTML 中的函数中使用这些参数？即使它们在标头的脚本中，它是否能够检索这些变量？

如果您发现任何其他错误，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:21:35.187

对，所以您要做的就是：

```
var params = new Object();
params.value1 = "test";
params.value2 = "param";

options.params = params; 
```

你会：

```
var params = new Object();
params. userID = userID;

options.params = params; 
```

现在您不必两次调用“上传”。userID 参数可用作：

```
$_POST["userID"] 
```

在您的 PHP 脚本中。

# c++ - 为什么我不能从 ostringstream 派生？

> ID：10842713
> 
> 赞同：2
> 
> 时间：2012-05-31T23:43:27.167
> 
> 标签：c++, stringstream

> **可能重复：**
> [为什么写入临时流失败？](https://stackoverflow.com/questions/5179522/why-does-writing-to-temporary-stream-fail)

我正在尝试从`ostrginstream`一些自定义日志记录代码派生一个类。奇怪的是，写入流的第一件事总是被破坏。这是一个最小的、独立的演示程序：

```
#include <iostream>
#include <sstream>
using namespace std;

class Test : public ostringstream
{
public:
    Test()  { ; }
    ~Test() { cerr << "!" << str() << "!" << std::endl; }
};

int main(void)
{
    Test() << "Hello" << ", " << "World";
} 
```

预期输出为：`!Hello, world!`

实际输出为：

[！0x8049d14，世界！](http://ideone.com/2L49h)

我假设我创建和使用临时对象的方式有问题。

如果它不能轻易修复，是否有另一种方法来获得相同的语义？我正在寻找的是能够轻松地创建一个对象，转移到它，然后在析构函数中使用完整的消息做一些事情。（用例是自定义日志代码。析构函数将时间戳、检查严重性等。）

# android - 如何在创建时停止/启动包含无限循环的服务

> ID：10842716
> 
> 赞同：5
> 
> 时间：2012-05-31T23:44:05.920
> 
> 标签：android, multithreading, loops, service, infinite

因此，对于背景，我正在尝试创建一个应用程序，该应用程序通过麦克风连续记录并将数据存储在缓冲区中。该程序的目标是对缓冲区中的数据执行某种类型的处理并对其采取行动。目前，应用程序只是将数据读入缓冲区并尽快写入。运行应用程序时，一个人会对着麦克风说话，然后听到你刚才说的话从另一端传出来。

现在，我对 Android 的缺乏经验开始浮出水面。我将读写操作作为无限循环进行。服务如下：

```
public class AudioService extends Service {

private final int MIC = AudioSource.MIC;
private final int SAMPLE = 44100;
private final int CHANNELI = AudioFormat.CHANNEL_IN_MONO;
private final int CHANNELO = AudioFormat.CHANNEL_OUT_MONO;
private final int FORMAT = AudioFormat.ENCODING_PCM_16BIT;
private final int BUFFERSIZE = AudioRecord.getMinBufferSize(SAMPLE,
        CHANNELI, FORMAT);
private final int STREAM = AudioManager.STREAM_MUSIC;
private final int MODE = AudioTrack.MODE_STREAM;
private boolean play = true;

AudioRecord recorder = null;
AudioTrack track = null;

short[] buffer = null;

public void OnCreate() {

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    recorder = new AudioRecord(MIC, SAMPLE, CHANNELI, FORMAT, BUFFERSIZE);
    track = new AudioTrack(STREAM, SAMPLE, CHANNELO, FORMAT, BUFFERSIZE,
            MODE);
    buffer = new short[BUFFERSIZE];
    recorder.startRecording();
    track.play();

    while (play) {
        recorder.read(buffer, 0, buffer.length);
        track.write(buffer, 0, buffer.length);
    }
    return START_STICKY;
} 
```

当在活动中单击“记录”按钮时，将调用此服务。我希望能够单击记录并可以选择单击取消以停止此循环。下面实现这个的监听器是：

```
private OnClickListener Recording = new OnClickListener() {
    public void onClick(View v) {

        serviceIntent = new Intent(getApplicationContext(),
                AudioService.class);
        serviceIntent.putExtra("extraData", "somedata");
        startService(serviceIntent);

        record.setEnabled(false);
        cancel.setEnabled(true);
        cancel.requestFocus();

}; 
```

现在问题变得很明显了。应用程序在到达 startService(serviceIntent) 时无法完成执行，只是在余额中徘徊。

那我有什么办法？我正在考虑某种方法来从无限循环内部控制服务，但我对 Android 的缺乏经验让我想知道如何做到这一点。通过在循环中实例化一个新按钮来激发某种中断；因此，在 startIntent 期间，我将能够跳出循环并“结束疯狂”。

任何帮助，将不胜感激。我也意识到这个服务应该在与 UI 不同的线程上启动，以避免“应用程序没有响应......”问题，但这是另一个话题。我现在的主要目标是打破循环，我将不胜感激有关如何做到这一点的任何帮助或指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:52:59.230

> 服务如下

问题#1：你没有办法跳出你的循环。

问题 #2：您的循环在主应用程序线程上运行。

这是不好的。

> 那我有什么办法？

您将无限循环放在后台线程中，使用某些东西（例如， an `AtomicBoolean`）告诉该线程在需要时停止（例如，`onDestroy()`）。

> 我也意识到这个服务应该在与 UI 不同的线程上启动，以避免“应用程序没有响应......”问题，但这是另一个话题。

不，是同一个话题。

> 通过在循环内实例化一个新按钮来激发某种方式来打破

服务没有 UI。

由于您在该活动中有一个触发对 的调用的“记录”按钮`startService()`，那么也许该活动应该有一个触发对 的调用的“停止”按钮`stopService()`。

一旦你确定了调用的位置和方式`stopService()`，那么你需要做的就是让`onDestroy()`你的服务让你的后台线程停止运行，这`onDestroy()`将由调用`stopService()`.

# php - CakePHP 扩展 FormHelper 使错误无法正确报告

> ID：10842719
> 
> 赞同：3
> 
> 时间：2012-05-31T23:44:17.843
> 
> 标签：php, class, cakephp, formhelper

我正在使用 CakePHP (2.x) 开发一个应用程序，并且每当我创建表单时我都会重用一些设置，所以我决定扩展默认的 FormHelper 类，如果没有其他任何东西传入它，它将自动加载默认值（见下面的代码）。

```
<?php

class AppFormHelper extends FormHelper
{
    public function input($fieldName, $options = array())
    {
        $defaults = array(
            'class' =>  'input',
            'div'   =>  array(
                            'class' => 'button-height block-label margin-bottom'
                        )
        );

        $options = Set::merge($defaults, $options);

        return parent::input($fieldName, $options);
    }
} 
```

乍一看，在我看来像这样调用它时，这似乎工作得很好`$this->AppForm->input('test');`。但是，当提交该表单并出现错误时，该错误不会显示在屏幕上。调用时`$this->Form->input('test')`出现错误，会创建一个如下所示的 div：

```
<div class="error-message">This form had an error</div> 
```

最终，我只想有一个简单的方法来复制 FormHelper 的输入选项，并认为这是正确的方法，但由于它会产生问题，我不再确定。任何人都知道如何让错误再次出现，或者有更好的解决方案来为 FormHelper 提供默认选项。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:05:30.347

*好吧，由于我的评论解决了您的问题，因此我冒昧地将其写为答案... ;-) 顺便说一句，我很高兴能为您提供帮助！*

对我来说，这似乎是一个非常合乎逻辑的方法。

不确定这是否是问题所在，但您是否将 AppFormHelper 用于整个表单？我经常使用自己继承自 FormHelper 的自定义助手，将核心助手与我的混合会带来一些问题，例如如果您使用 SecurityComponent。

也许这里正在发生类似的事情？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:59:13.580

要覆盖 Cake 2.0 中的 HtmlHelper 方法，您可以简单地：

创建您的 OwnHelper 类，其中包含例如扩展 HtmlHelper 的链接方法，在 AppController 中指定：

```
$helpers = array('Html' => array('className' => 'OwnHelper')); 
```

通过 ADmad

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T18:26:39.423

正如 nIcO 向我指出的那样，这是一个很好的解决方案，但是我没有将 AppFormHelper 用于整个表单。所以这很好用，但请确保您使用的自定义类用于整个表单。

# php - Doctrine MongoDB ODM：必须在 findAndUpdate() 之后调用 flush() 吗？

> ID：10842727
> 
> 赞同：2
> 
> 时间：2012-05-31T23:45:54.560
> 
> 标签：php, mongodb, doctrine-odm

从经验上看，似乎`flush()`没有必要`findAndUpdate()`，我只是在 Doctrine ODM/MongoDB 文档中的任何地方都找不到明确说明（而且我没有费心阅读太多源代码）。

[`findAndModify`mongodb.org 上](http://www.mongodb.org/display/DOCS/findAndModify+Command)的文档状态

> 此命令可用于原子地修改文档（最多一个）并返回它。

Doctrine [MongoDB`findAndUpdate()`使用 MongoDB 的`findAndModify`](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/find-and-update.html). 所以听起来整个事情确实是一口气发生的，所以不需要调用`flush()`文档管理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:28:35.827

只有在将托管对象的更改写回 Mongo 时才需要刷新。您通过查询构建器界面执行的任何操作都将直接执行并绕过 UnitOfWork。对于更新和更新插入尤其如此。在 的情况下`findAndUpdate()`，更新应该立即在 Mongo 中执行，但我相信返回的对象可能是管理的。之后对该文档的任何更改（例如，通过 setter 方法）`flush()`如果您希望将它们写回 Mongo，则需要 a。

另外，请注意查询生成器`returnNew()`，它对应于. 默认情况下，我相信会以更新前的状态返回文档。您可能更愿意检索处于更新状态的文档。`new``findAndModify``findAndUpdate()`

# html - 每行跨越段落内

> ID：10842728
> 
> 赞同：5
> 
> 时间：2012-05-31T23:45:56.133
> 
> 标签：html, css

我有：

`name: james`

但我想显示为：

```
name:
james 
```

[这是一个活生生的例子](http://jsfiddle.net/luissanchezm86/NNpqq/)

**HTML**标记：

```
<p>
<span class="bla">name:</span>
<span class="bla">james</span>
</p> 
```

**CSS**标记：

```
.bla {
 display: inline-block;   
}​ 
```

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T23:48:17.010

`inline-block`如果您想通过向类添加样式来实现这一点，则不会实现您所追求的`.bla`。尝试将其更改为`display:block`。

见我的例子：http: [//jsfiddle.net/n1ck/NNpqq/1/](http://jsfiddle.net/n1ck/NNpqq/1/)

```
.bla {
 display: block;   
}​ 
```

或者你可以添加一些标记：http: [//jsfiddle.net/n1ck/NNpqq/5/](http://jsfiddle.net/n1ck/NNpqq/5/)

```
<p>
    <span class="bla">name:</span> <br />
    <span class="bla">james</span>
</p>
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T23:48:46.683

怎么样

```
<p>
<span class="bla">name:</span><br/>
<span class="bla">james</span>
</p> 
```

[http://jsfiddle.net/luissanchezm86/NNpqq/](http://jsfiddle.net/luissanchezm86/NNpqq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T23:48:11.553

你可以试试

```
.bla {
 display:block;   
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T23:48:49.610

先生，这就是休息的意义。

```
<p>
    name:<br/>james
</p> 
```

[http://jsfiddle.net/NNpqq/4/](http://jsfiddle.net/NNpqq/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T00:01:01.763

只是说：

```
<p>name:<br/>James</p> 
```

...你可以摆脱CSS。如果您需要调整行高，请通过 CSS 将其应用于“br”标签。

作为旁注，不要在 HTML 标记中重复“bla”类（除非您有特定的理由这样做）。您可以通过`<p>`父级访问它以减少标记并使代码更清洁：

```
CSS:
p.bla {}
p.bla span {}

HTML:
<p class="bla">
  <span></span> 
  <span></span>
</p> 
```

# java - 在使用 Apache Exec 执行命令期间接收反馈

> ID：10842730
> 
> 赞同：0
> 
> 时间：2012-05-31T23:46:27.743
> 
> 标签：java, apache, exec

我已经从 Apaches 的网站上实现了一个示例：http: [//commons.apache.org/exec/tutorial.html](http://commons.apache.org/exec/tutorial.html)

我现在需要的是聆听/接收来自繁重过程的反馈。

我知道如何使用 setStreamHandler 方法打印处理结果，但是一旦执行完成就会显示这个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:15:18.950

我建议你阅读`PumpStreamHandler`和`InputStreamPumper`。你基本上想要这些类。只需修改`InputStreamPumper.run()`循环。而不是`os.write()`，它应该触发您的事件。要让结果在您的进程运行时开始到达，请按如下方式调用它：

```
CommandLine cmdLine = new CommandLine(yourExecutable);
DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();

Executor executor = new DefaultExecutor();
executor.setStreamHandler(new YourPumpStreamHandler());
executor.execute(cmdLine, resultHandler);
// until waitFor returns, the process is running and events can be generated
int exitValue = resultHandler.waitFor(); 
```

# image - 如何在 Joomla 中调整图像大小？

> ID：10842734
> 
> 赞同：4
> 
> 时间：2012-05-31T23:47:17.717
> 
> 标签：image, joomla, resize

我尝试使用这个：

```
$image = new JImage();
$image->loadFile($item->logo);
$image->resize('208', '125');

$properties = JImage::getImageFileProperties($item->logo);

echo $image->toFile(JPATH_CACHE . DS . $item->logo, $properties->type); 
```

但不工作=\任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T00:41:49.377

试试这个：

```
// Set the path to the file
$file = '/Absolute/Path/To/File';

// Instantiate our JImage object
$image = new JImage($file);

// Get the file's properties
$properties = JImage::getImageFileProperties($file);

// Declare the size of our new image
$width = 100;
$height = 100;

// Resize the file as a new object
$resizedImage = $image->resize($width, $height, true);

// Determine the MIME of the original file to get the proper type for output
$mime = $properties->mime;

if ($mime == 'image/jpeg')
{
    $type = IMAGETYPE_JPEG;
}
elseif ($mime == 'image/png')
{
    $type = IMAGETYPE_PNG;
}
elseif ($mime == 'image/gif')
{
    $type = IMAGETYPE_GIF;
}

// Store the resized image to a new file
$resizedImage->toFile('/Absolute/Path/To/New/File', $type); 
```

# asp.net-mvc-3 - 一对一或一对一实体框架引用约束违规

> ID：10842741
> 
> 赞同：2
> 
> 时间：2012-05-31T23:48:32.850
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4

为什么微软的实体框架会因为一个基本简单的单一外键、两个表**名称**和**电子邮件**在一个表单中失败......我该如何解决？

我们都听说过飞行常客计划。加入我受 Edison 启发的频繁失败计划，学习如何不使用 EF。查看我尝试过的代码以及下面的相应错误。

[Morteza Manavi](http://weblogs.asp.net/manavi/about.aspx)描述了这种[一对一的主键关联或共享主键](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)问题。Telerik 的**OpenAccess** ORM 称之为“[垂直继承](http://www.telerik.com/help/openaccess-orm/openaccess-tasks-define-model-inheritance-vertical-mapping.html)”。EF 没有像 Ruby On Rails 的**ActiveRecord** [belongs_to](http://guides.rubyonrails.org/association_basics.html)这样的一致术语或属性。

如果您想快速制作原型并玩...

![2 个表格，4 个字段总计](../Images/18b34a20435c6c73c6587896f3064bd4.png)

## 教学用例

在这种情况下没有很多。如果您正在寻找一对多或多对多的答案，对不起，您来错地方了。多重性是 1 人对 0..1 封电子邮件。

如果用户在 Razor 表单中将 Email 留空，则 Person 和 ContactInfoes 之间的关系应该是 1:0（即一对无 [12n1]）且没有 ContactInfoes 记录。

![2 个实体，0..1 多重性](../Images/20bc057412b3680b15642089f03245a7.png)否则，ContactInfoes 与 People 具有 1:1（即一对一 [121]）的关系。或者，人员记录与 ContactInfoes 记录具有 1:1 的关系。

我已经使用 squeal [SQL] 多年并且喜欢图片，但是上面的 EDMX 屏幕截图并没有提供背景中正在发生的事情的完整图片。为了让一对一或一的 EF 和*Code Firsterers通过为每个引用另一个实体的实体创建一个虚拟**ICollection*来增加复杂性，如下面的 DbContext Code First 模型中所列。

```
public class MVC3EF4Context : System.Data.Entity.DbContext
{
    public System.Data.Entity.DbSet<Person> People { get; set; }
    public System.Data.Entity.DbSet<ContactInfo> ContactInfoes { get; set; }
}

public class Person
{
    [Key]
    public int PersonId { get; set; }
    [Required]
    public string Name { get; set; }

    public virtual ICollection<ContactInfoes> ContactInfo { get; set; }
}

public class ContactInfo
{
    [Key]
    [ForeignKey("PersonId")]
    public int PersonId { get; set; }

    [Required]
    public string Email { get; set; }

    public virtual ICollection<People> Person { get; set; }
} 
```

这种额外复杂性的优势在于强类型控制器中的 IntelliSense 和代码生成器从 People 模型创建的视图——它可以来自 EDMX 图、T4 .tt 文件或 Code First 类。

使用 EF 对 Noob 做的直观的事情是简单地添加`@Html.EditorFor(model => model.**ContactInfoes.Email**)`到 Create.cshtml 和 Edit.cshtml 为一个人自动生成的 Razor 表单。

![具有关联 ContactInfoes.Email 输入字段的人员表单](../Images/7c9f0a84fb1d3f9b8142f398978aa579.png)

## 失败失败失败

尽管在有电子邮件时自动插入到 ContactInfoes 表中效果很好，因为 EF 构建了完整的实体图 :) ，不幸的是，

`_Email = StructuralObject.SetValidValue(value, false);`

插入失败，因为没有电子邮件，因为`IsNullable=false`. 自动代码生成足够智能，可以检测和处理后代实体，但作为开发人员并没有读懂我的想法，并且在没有电子邮件时简单地跳过创建实体。如果有“如果有错误，那没关系，在图中构建所有其他实体，但跳过这个”命令我不知道它是什么。作为开发人员，当没有输入电子邮件时，我必须拦截和插入。

不幸的是，自动生成`db.People.Attach(people);`的更新也会失败（即使谓词 ModelState.IsValid 为真）。提交表单时，EF 显然不会检查其后代关系——或者如果确实如此，我不知道如何提示它。

```
A referential integrity constraint violation occurred: 
The property values that define the referential constraints are not consistent
between principal and dependent objects in the relationship. 
```

[带有实体框架和编辑多个对象的 MVC 3 导致“违反参照完整性约束”](https://stackoverflow.com/questions/7265120/mvc-3-with-entity-framework-and-editing-multiple-objects-leads-to-referential-i)建议使用 AutoMapper 来解决这个问题，这对于整个解决方案中的 3 属性总数来说有点过头了。Bengt Berge 的[AutoMapper 简介](http://bengtbe.com/blog/2009/04/14/using-automapper-to-map-view-models-in-asp-net-mvc/)快速而简单。使用 FormsCollection 的建议似乎也不合适，因为在 People 和 ContactInfoes 实体中没有任何其他信息。

* * *

因此，此处显示的自动生成的代码（我尝试使用 try 和 catch 进行少量错误报告/异常处理程序）需要以某种方式决定是创建还是删除 InfoContact 实体。

```
[HttpPost]
public ActionResult Edit(People people)
{
    if (ModelState.IsValid)
    {
        try
        {
            db.People.Attach(people);
        }
        catch (Exception ex)
        {
            return Content("<h1>Error!</h1>" 
                + ex.Source + "<br />\n\r" 
                + ex.Message + "<br />\n\r"
                + ex.InnerException + "<br />\n\r"
                + ex.StackTrace+ "<br />\n\r"
                + ex.TargetSite + "<br />\n\r"
                + ex.HelpLink + "<br />\n\r"
                + ex.Data + "<br />\n\r"
                + "If this is an emergency call 911.\n\r"
                );
        }
        db.ObjectStateManager.ChangeObjectState(people, EntityState.Modified);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.PersonId = new SelectList(db.ContactInfoes, "PersonId", "Email", people.PersonId);
    return View(people);
} 
```

一些旁注切线

1.  虽然这是微软代码生成器产生的垂直继承关系，`ViewBag.PersonId = new SelectList(db.ContactInfoes, "PersonId", "Email", people.PersonId);` 为什么有人会在这个模型中明确定义的自引用场景中使用下拉列表？当然，程序员可以删除自动代码，或者忽略它，但为什么在不需要的时候首先生成它呢？

2.  有没有比我粗略的异常处理程序实现更好的调试方法？输出提供了 squat 的平方根，即没有任何用处。我假设 Log4net 和 ELMAH 不会提供更多信息，只是跟踪可用的信息。

3.  最终完成所有 ViewModel 映射后，使用 EF 真的有优势吗？

## 视图模型

事实证明，在强类型表单处理中使用 IntelliSense 的秘诀是 AutoMapper 相关的，因为开发人员需要添加一个 ViewModel 并在它与 People 和 ContactInfoes 实体之间进行映射，因此附注切线 #3。

```
using System.ComponentModel.DataAnnotations;

public class PCI         //PersonContactInfo
    {
        [Key]
        public int PersonId { get; set; }

        [Required]
        public string Name { get; set; }

            // Add Annotation for valid Email or Null
        public string Email { get; set; }
    } 
```

## 查看修改以使用 ViewModel

使用 ViewModel 只需要在 Edit 和 Create cshtml Razor 表单文件中进行两次更改。

第一行从`@model MVC3EF4.Models.People`到`@model MVC3EF4.Models.PCI`

和我原来的修改

`@Html.EditorFor(model => model.ContactInfoes.Email)`

变成

`@Html.EditorFor(model => model.Email)`

注意：我并没有开始使用 PCI ViewModel 构建我的新控制器和 Razor 表单。
我也没有使用 DbContext，但 EDMX 代码生成 = 默认。如果要使用 DbContext，请将 EDMX 代码生成属性设置为无。

## 控制器修改

```
[HttpPost]
public ActionResult Create(PCI pci)   //use the ViewModel PCI instead of People
{
    if (ModelState.IsValid)
    {
        // THIS IS WHERE AutoMapper WOULD BE HANDY FOR MAPPING ViewModel
        // to the People and ContactInfoes Models

        // Map PCI to People

        People people = new People();
        people.PersonId = pci.PersonId;
        people.Name = pci.Name;

        // Map PCI to ContactInfoes --if there is an Email

        if (pci.Email != null && pci.Email.Length > 3)
        {
            // KNOWN AND THROWN ????
            // Why is there no concurrency error thrown?
            // How is this added when PersonId isn't known?
            // This isn't standard functional programming. This is how EF builds a graph.

            db.AddToContactInfoes(  
                new ContactInfoes { 
                   PersonId = people.PersonId, 
                   Email = pci.Email
                }
            );
        }
        // else don't add ContactInfoes entity/table.

        db.People.AddObject(people);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    // Where does a dropdownlist get used?  It doesn't for a 1:0..1 relationship.
    //ViewBag.PersonId = new SelectList(db.ContactInfoes
    //, "PersonId", "Email", people.PersonId);

    return View(pci);
} 
```

## 编辑

```
 // GET: /PersonContactInfo/Edit/5

    public ActionResult Edit(int id)
    {
        People people = db.People.Single(p => p.PersonId == id);

        // Map People to ViewModel PCI...
        PCI pci = new PCI()
        {
            PersonId = people.PersonId,
            Name = people.Name
        };
        if (people.ContactInfoes != null) { pci.Email = people.ContactInfoes.Email; }

        /* why a SelectList in a one-to-one or one-to-none?
        * what is to select?
        * ViewBag.PersonId = new SelectList(db.ContactInfoes
                   , "PersonId"
                   , "Email"
                   , people.PersonId);
        */
        return View(pci);
    } 
```

## 编辑帖子

```
 //
    // POST: /PersonContactInfo/Edit/5

    [HttpPost]
    // THIS DOESN'T WORK
    //public ActionResult Edit(People people)  //use the ViewModel instead
    //public ActionResult Edit(FormCollection col)  //No need, everything is available from strongly typed ViewModel
    public ActionResult Edit(PCI pci)
    {

        if (ModelState.IsValid)
        {
            // THIS DOESN'T WORK
            // var people = new People();  --reload what the Person was from the database

            People people = db.People.Single(p => p.PersonId == pci.PersonId);
            try
            {
                people.Name = pci.Name;

                if (pci.Email != null && pci.Email.Length > 3)
                {
                    if (people.ContactInfoes == null) {

                        var ci = new ContactInfoes { PersonId = pci.PersonId, Email = pci.Email };

                        db.AddToContactInfoes(ci);

                        // THIS DOESN'T WORK
                        //db.ContactInfoes.Attach(ci)  // this causes an error on the next line
                        // A referential integrity constraint violation occurred: A primary key property that is a part of referential integrity constraint cannot be changed when the dependent object is Unchanged unless it is being set to the association's principal object. The principal object must be tracked and not marked for deletion.
                        // people.ContactInfoes = ci;

                        // THIS DOESN'T WORK
                        //people.ContactInfoesReference.Attach(new ContactInfoes { PersonId = pci.PersonId, Email = pci.Email });
                        //Attach is not a valid operation when the source object associated with this related end is in an added, deleted, or detached state. Objects loaded using the NoTracking merge option are always detached.
                    }
                    else
                    people.ContactInfoes.Email = pci.Email;
                }
                else         // no user input for Email from form so there should be no entity
                {
                    // THIS DOESN'T WORK
                    // people.ContactInfoes = null;
                    // people.ContactInfoesReference = null;

                    ContactInfoes ci = people.ContactInfoes;
                    if (ci != null)                             //if there isn't an ContactInfo record, trying to delete one will cause an error.
                    db.ContactInfoes.DeleteObject(ci);

                    /*
                     * THIS DOESN'T WORK
                    // this causes a concurrency error
                    var ci = new ContactInfoes();
                    ci.PersonId = pci.PersonId;
                    db.AttachTo("ContactInfoes", ci);
                    db.ContactInfoes.DeleteObject(ci);
                     */
                }

                // THIS DOESN'T WORK
                // db.People.Attach(people);  
                // doing People people = db.People.Single(p => p.PersonId == pci.PersonId); makes people automatically attached
                // The object cannot be attached because it is already in the object context. An object can only be reattached when it is in an unchanged state. 
            }
            catch (Exception ex)
            {
                return Content("<h1>Error!</h1>" 
                    + ex.Source + "<br />\n\r" 
                    + ex.Message + "<br />\n\r"
                    + ex.InnerException + "<br />\n\r"
                    + ex.StackTrace+ "<br />\n\r"
                    + ex.TargetSite + "<br />\n\r"
                    + ex.HelpLink + "<br />\n\r"
                    + ex.Data + "<br />\n\r"
                    );
            }
            db.ObjectStateManager.ChangeObjectState(people, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        //ViewBag.PersonId = new SelectList(db.ContactInfoes, "PersonId", "Email", people.PersonId);
        return View(pci);} 
```

* * *

## SQUEAL [SQL] 数据定义语言

```
-- --------------------------------------------------
-- Entity Designer DDL Script for SQL Server 2005, 2008, and Azure
-- --------------------------------------------------
-- Date Created: 05/31/2012 18:03:38
-- Generated from EDMX file: C:\Users\Jb\Documents\Visual Studio 11\Projects\MVC3EF4\MVC3EF4\Models\PersonContactInfoModel.edmx
-- --------------------------------------------------

SET QUOTED_IDENTIFIER OFF;
GO
USE [MVC3EF4];
GO
IF SCHEMA_ID(N'dbo') IS NULL EXECUTE(N'CREATE SCHEMA [dbo]');
GO

-- --------------------------------------------------
-- Dropping existing FOREIGN KEY constraints
-- --------------------------------------------------

IF OBJECT_ID(N'[dbo].[FK_PersonContactInfo]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[ContactInfoes] DROP CONSTRAINT [FK_PersonContactInfo];
GO

-- --------------------------------------------------
-- Dropping existing tables
-- --------------------------------------------------

IF OBJECT_ID(N'[dbo].[ContactInfoes]', 'U') IS NOT NULL
    DROP TABLE [dbo].[ContactInfoes];
GO
IF OBJECT_ID(N'[dbo].[People]', 'U') IS NOT NULL
    DROP TABLE [dbo].[People];
GO

-- --------------------------------------------------
-- Creating all tables
-- --------------------------------------------------

-- Creating table 'ContactInfoes'
CREATE TABLE [dbo].[ContactInfoes] (
    [PersonId] int  NOT NULL,
    [Email] nvarchar(120)  NOT NULL
);
GO

-- Creating table 'People'
CREATE TABLE [dbo].[People] (
    [PersonId] int IDENTITY(1,1) NOT NULL,
    [Name] nvarchar(50)  NOT NULL
);
GO

-- --------------------------------------------------
-- Creating all PRIMARY KEY constraints
-- --------------------------------------------------

-- Creating primary key on [PersonId] in table 'ContactInfoes'
ALTER TABLE [dbo].[ContactInfoes]
ADD CONSTRAINT [PK_ContactInfoes]
    PRIMARY KEY CLUSTERED ([PersonId] ASC);
GO

-- Creating primary key on [PersonId] in table 'People'
ALTER TABLE [dbo].[People]
ADD CONSTRAINT [PK_People]
    PRIMARY KEY CLUSTERED ([PersonId] ASC);
GO

-- --------------------------------------------------
-- Creating all FOREIGN KEY constraints
-- --------------------------------------------------

-- Creating foreign key on [PersonId] in table 'ContactInfoes'
ALTER TABLE [dbo].[ContactInfoes]
ADD CONSTRAINT [FK_PersonContactInfo]
    FOREIGN KEY ([PersonId])
    REFERENCES [dbo].[People]
        ([PersonId])
    ON DELETE CASCADE ON UPDATE NO ACTION;
GO

-- --------------------------------------------------
-- Creating FOREIGN KEY Relationship Documentation
-- --------------------------------------------------

    EXEC sys.sp_addextendedproperty @name=N'MS_Description', 
    @value=N'One-to-One or One-to-None' , 
    @level0type=N'SCHEMA',@level0name=N'dbo', 
    @level1type=N'TABLE',@level1name=N'ContactInfoes', 
    @level2type=N'CONSTRAINT',@level2name=N'FK_PersonContactInfo'

GO
-- --------------------------------------------------
-- Script has ended
-- -------------------------------------------------- 
```

# clojure - Clojure：懒惰 + core.logic：无限循环

> ID：10842745
> 
> 赞同：4
> 
> 时间：2012-05-31T23:49:11.833
> 
> 标签：clojure, clojure-core.logic

## 语境

以下代码无限循环：

```
(defn ex13 []
  (take 5
        (run* [x]
       (listo (lcons `a (lcons `b (lcons `c x))))))) 
```

## 问题：

这应该是正确的行为吗？（无限循环？）另一方面，代码如下：

```
(take 5 (range)) 
```

需要 5 个元素并将它们打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:26:49.240

这可能是一个错误，但这不是正确的方法，因为 run* 的结果无论如何都不是真正的懒惰。

```
(run 5 [x]
   (listo (lcons `a (lcons `b (lcons `c x))))) 
```

# iphone - iOS 应用启动动画

> ID：10842746
> 
> 赞同：0
> 
> 时间：2012-05-31T23:49:36.337
> 
> 标签：iphone, ios, animation, uiview, uiimageview

在默认图像消失后，我想在我的应用程序中插入启动动画。在我的应用程序中，我有一个导航栏和一个标签栏，所以我尝试将它放在视图中确实加载：

```
UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myIMG.png"]];
[self.view addSubview:img]; 
```

然后，我想用一个过渡动画那个图像，但是我定位在视图中的图像，在标签栏和导航栏之间，我希望所有前面的图像开始动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T03:01:50.660

你应该：

1.  创建一个名为启动视图控制器的视图控制器。
2.  在应用启动时的 AppDelegate 中，设置此视图为 rootViewController
3.  在加载数据或连接到服务器时，使用您的图像或任何您想要的动画做一些动画。
4.  一切完成后，从此启动视图控制器中，您可以删除此启动视图并通过调用应用委托显示您的主视图，以将您的主视图控制器设置为根视图控制器。

[编辑]

如果您只希望 imageView 可以覆盖整个屏幕，那么您可以执行以下操作：

```
[appDelegate.window addSubview:imageView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:26:08.080

```
//Display an Ads Imageview with animation on top of View 
imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sale2.jpg"]];
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
tapGesture.numberOfTapsRequired = 1;
tapGesture.numberOfTouchesRequired = 1;

[imageView addGestureRecognizer:tapGesture];
[imageView setUserInteractionEnabled:YES];
[imageView setMultipleTouchEnabled:YES];

[UIView animateWithDuration:3.5 animations:^{imageView.alpha = 0;imageView.alpha = 1;}];

[self.window addSubview:imageView];

-(void)tapDetected:(UIGestureRecognizer*)recognizer{
  //**************Remove the Advertising Image after the user press single tap on the img
  [UIView animateWithDuration:1 animations:^{imageView.alpha = 1;imageView.alpha = 0;}];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T03:33:11.737

1.  为您的启动动画创建视图控制器
2.  在 App Delegate 中，显示您的启动视图控制器

**在 AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ....
    ....
    ....
    frontScreen *animScreen =   [[frontScreen alloc] initWithNibName:@"frontScreen" bundle:nil];
    self.window.rootViewController = animScreen;
    [self.window makeKeyAndVisible];
} 
```

1.  完成动画后，调用 show tabview 控制器

**在frontScreen.m**

```
AppDelegate* app =(AppDelegate*)[UIApplication sharedApplication].delegate;
  [app afterAnimation]; 
```

**在 AppDelegate.m**

```
-(void)afterAnimation {
    rootController *list=[[rootController alloc] initWithNibName:@"rootController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:list];

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible]; //optional
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T02:26:56.170

涵盖所有内容的最佳选择是创建模态样式的转场，并用您的动画图像填充转场的视图，当应用程序启动时，立即以编程方式调用该转场，因此它是第一个出现的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T02:56:18.290

```
[self.tabBarController.view addSubview:img]; 
```

然后您的图像将全屏显示。

# html - 如何垂直填充数据表？

> ID：10842749
> 
> 赞同：6
> 
> 时间：2012-05-31T23:50:08.740
> 
> 标签：html, ruby-on-rails, ruby, arrays, haml

我想在 HTML 表格中垂直排列三个数组。每个数组都将其数据从上到下填充在一列中。

例如，我有三个数组：

```
fruit = ['pear', 'apple', 'orange']
veges = ['corn', 'radish', 'lettuce']
meat = ['beef', 'chicken', 'pork'] 
```

我希望表格看起来像这样：

```
<table>
  <tr>
    <td>
      pear
    </td>
  </tr>
  <tr>
    <td>
      corn
    </td>
  </tr>
  <tr>
    <td>
      beef
    </td>
  </tr>

  <tr>
    <td>
      apple
    </td>
  </tr>
  <tr>
    <td>
      radish
    </td>
  </tr>
  <tr>
    <td>
      chicken
    </td>
  </tr>

  <tr>
    <td>
      orange
    </td>
  </tr>
  <tr>
    <td>
      lettuce
    </td>
  </tr>
  <tr>
    <td>
      pork
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-18T22:33:36.430

我可能会[`Array#transpose`](https://ruby-doc.org/core/Array.html#method-i-transpose)用来重新排列事物以匹配您的`<table>`外观：

```
rows = [ fruit, veges, meat ].transpose 
```

现在`rows`看起来像：

```
[
  ["pear", "corn", "beef"],
  ["apple", "radish", "chicken"],
  ["orange", "lettuce", "pork"]
] 
```

并生成您的表是一个简单的迭代问题`rows`：

```
%table
  - rows.each do |row|
    %tr
      - row.each do |food|
        %td= food 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:54:23.507

看看这个网站：[Generate vertical-ordered HTML table in Ruby](https://web.archive.org/web/20120804075127/http://mattly.me/snippet/2011/11/23/generate-vertically-ordered-html-table-in-ruby)

以下是相关代码（本示例中的实例变量仅用于清楚地识别控制列数和行数的因素）：

```
<table>
  <tbody>
    <% 0.upto(@rows_per_column-1).each do |row| %>
      <tr>
        <% 0.upto(@columns-1).each do |column| %>
        <% index = row + (column * @rows_per_column) %>
        <td><%= index %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table> 
```

# python - 脚本重命名文件夹中的文件以匹配另一个文件夹中的文件名

> ID：10842753
> 
> 赞同：0
> 
> 时间：2012-05-31T23:52:30.157
> 
> 标签：python, regex, batch-file, rename

鉴于以下情况，我需要进行批量重命名：

1.  我在文件夹 A 中有一堆文件
2.  文件夹 B 中的一堆文件。
3.  文件夹A中的文件都是“.doc”，
4.  文件夹 B 中的文件都是“.jpg”。
5.  文件夹 A 中的文件名为“A0001.doc”
6.  文件夹 B 中的文件名为“A0001johnsmith.jpg”

我想合并文件夹，并重命名文件夹 A 中的文件，以便它们附加文件夹 B 中匹配文件的名称部分。

例子：

前：

```
FOLDER A:     Folder B:
A0001.doc     A0001johnsmith.jpg 
```

后：

```
Folder C:
A0001johnsmith.doc 
A0001johnsmith.jpg 
```

我见过一些批量重命名脚本，但唯一的区别是我需要分配一个变量来包含名称部分，这样我就可以将它附加到文件夹 A 中相应文件的末尾。

我认为最好的方法是执行一个简单的 python 脚本，该脚本将执行递归循环，对文件夹中的每个项目进行如下处理：

1.  解析 A0001.doc 的文件名
2.  将字符串与文件夹 B 中的文件名匹配
3.  取匹配字符串之后但在“。”之前的部分。并分配变量
4.  取原始字符串 A0001 并附加包含 name 元素的变量并将其重命名
5.  将两个文件复制到文件夹 C（非破坏性，以防出现错误等）

我正在考虑为此使用python，但我可以在语法等方面使用一些帮助。我只知道一点使用基本python库，我猜我会导入诸如“OS”之类的库，也许还有“SYS”。我以前从未使用过它们，任何帮助将不胜感激。我也愿意使用 Windows 批处理脚本甚至 powershell。任何输入都是有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:03:57.850

这是 Powershell，因为你说你会使用它。

请注意，我没有对此进行测试。我现在无法访问 Windows 机器，因此无法对其进行测试。我是根据记忆得出的，但我认为这基本上是正确的。

```
foreach($aFile in ls "/path/to/FolderA")
{
    $matchString = $aFile.Name.Split("."}[0]
    $bFile = $(ls "/path/to/FolderB" |? { $_.Name -Match $matchString })[0]
    $addString = $bFile.Name.Split(".")[0].Replace($matchString, "")
    cp $aFile ("/path/to/FolderC/" + $matchString + $addString + ".doc")
    cp $bFile "/path/to/FolderC"
} 
```

这对名称结构做了很多假设。例如，我假设要添加的字符串不出现在通用文件名字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T01:22:00.487

使用简单的批处理脚本非常简单。

```
@echo off
for %%A in ("folderA\*.doc") do (
  for %%B in ("folderB\%%~nA*.jpg") do (
    copy "%%A" "folderC\%%~nB.doc"
    copy "%%B" "folderC"
  )
) 
```

我没有添加任何错误检查。

如果您有一个像“A1.doc”这样的文件匹配多个像“A1file1.jpg”和“A10file2.jpg”这样的文件，您可能会遇到问题。

只要 .doc 文件具有固定宽度的名称，并且每个 .doc 都存在一个 .jpg，那么我认为代码应该可以工作。

显然，可以添加更多代码来处理各种场景和错误情况。

# ruby-on-rails - Rails3：定义枚举并将其用作 db 列的自定义类型

> ID：10842755
> 
> 赞同：2
> 
> 时间：2012-05-31T23:52:42.733
> 
> 标签：ruby-on-rails, custom-type

Rails 新手，所以不确定这里有什么最好的方法。我想定义一个简单的 c++ 样式枚举，然后可以将其用作我的数据库中的自定义类型。枚举可以使用数组或自定义模块进行模拟，但我该如何将其转换为我的表格的自定义类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T20:38:46.497

这是我在 Rails 中遵循的模式：

在我的模型类中，我添加了一个`module`来保存列的可能值。然后我将它们放入一个数组并针对可能值的数组定义验证。

想象一下，我有一个名为的列/属性`status`，它可以是三个可能的值。我会这样做：

```
class MyModel < ActiveRecord::Base

  # This validates that status can't be null
  validates :status, :presence => true  

  # Define a module with all possible values
  module Status
    IN_DEVELOPMENT = 'in development'
    DISABLED = 'disabled'
    ACTIVE  = 'active'
  end

  # Now create an array of possible status values, and add a validation
  STATUSES = [ Status::DISABLED, Status::ACTIVE, Status::IN_DEVELOPMENT]
  validates :status, :inclusion => { :in => STATUSES, :message => "%{value} is not a valid status value" }

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:28:06.993

您是否考虑过在数据库中使用内置的枚举支持？许多常见的 RDMBS 都支持枚举，例如 Postgres（参见[http://www.postgresql.org/docs/9.1/static/datatype-enum.html](http://www.postgresql.org/docs/9.1/static/datatype-enum.html)）和 MySQL（参见[http://dev.mysql.com/doc /refman/5.5/en/enum.html](http://dev.mysql.com/doc/refman/5.5/en/enum.html) )。这样，您可以直接在数据存储中创建类型，然后通过 ActiveRecord 插件之一使用它（例如 Postgres 的 enum_type：[https](https://github.com/riscfuture/enum_type) ://github.com/riscfuture/enum_type ）。

或者，您可以使用诸如 active_enum 之类的东西来构造您所描述的枚举，并将字段作为整数存储在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:06:28.250

根据您计划如何在代码中使用此枚举类型，我发现使用范围与数据库中的枚举类型一起完成几乎相同的事情，以确保仅设置特定值。

例子：

```
scope :trial, :conditions => { :utype => 'TRIAL' }
scope :registered, :conditions => { :utype => 'REGISTERED' }
scope :active, :conditions => { :status => 'ACTIVE' }
scope :abuse, :conditions => { :status => 'ABUSE' } 
```

# java - Java中的可变垃圾回收

> ID：10842761
> 
> 赞同：0
> 
> 时间：2012-05-31T23:53:35.797
> 
> 标签：java, garbage-collection

以下变量声明之间有区别吗？

```
Class A {
  private int a;
  A(){
    a= 2;
  }
} 
```

VS

```
Class A {
  private int a  = 2;
  A(){
  } 
} 
```

垃圾收集的工作方式会有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:26:34.123

No there is no difference because the java compiler initialize "private int a = 2" inside the constructor internally. You can use java decompiler to confirm my above statement. So for both GC will work same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:04:35.050

您的两个初始化的行为没有区别。在第一个示例中，`a = 2`将在调用构造函数代码之前发生。如果你做了`a`决赛：

```
private final int a; //first example

private final int a = 2; //second example 
```

然后你会看到你可以在构造函数中做的事情之间的区别：

```
 A(){ //The blank final field a may not have been initialized for first example
 }

 A(){
   a = 2; //The final field Apple.a cannot be assigned for second example
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:09:02.153

In both cases you are declaring `int a` as a member variable of the class. Whenever the class is instantiated, space will be set aside on the heap for that integer. However, the garbage collector only cares about whether or not there are any references to the containing object that has been instantiated. Regardless of what you do with the member variables, the object will stay in memory if there is a reference to it, after which point it's eligible for garbage collection.

However, perhaps you believe there should be a difference? Why is that?

# transparency - dygraphs fillGraph 实体

> ID：10842762
> 
> 赞同：0
> 
> 时间：2012-05-31T23:53:36.823
> 
> 标签：transparency, dygraphs

我正在使用 dygraphs，我想知道是否可以关闭填充图的透明度，以便获得纯色而不是具有一点透明度的填充图。如果有怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:38:29.433

您可以设置“fillAlpha：1.0”来获得不透明的填充。看：

[http://jsfiddle.net/eM2Mg/55/](http://jsfiddle.net/eM2Mg/55/)

和

[http://dygraphs.com/options.html#fillAlpha](http://dygraphs.com/options.html#fillAlpha)

# github - 我想在 Github 上放一个新项目

> ID：10842763
> 
> 赞同：1
> 
> 时间：2012-05-31T23:53:46.257
> 
> 标签：github

我在 eclipse 中有一个 java/GWT 项目，有一个 Git repo git@github.com:example/example.git 我想第一次把我的完整项目放在哪里请指导我如何做到这一点，我是新手到 Github 我搜索了很多，但无法成功我确实有 GIT Bash 和 GIT GUI

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:02:24.233

请注意，您可以在 Windows 上安装新的**[windows.guthub.com](http://windows.github.com/)**，而不是安装 msysgit（`git bash`和） ：`git gui`

这将有助于克隆该存储库。

另一种方法是在 Git 中通过 Egit 解密和克隆它，如本教程中所述：[将 Egit 与 GitHub 一起使用](http://www.vogella.com/articles/EGit/article.html#github)。
请注意，Eclipse+Egit 意味着您不必*安装*msysgit（但仍然推荐它，以从Eclipse*之外的 git 的丰富 CLI 中受益）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:03:25.317

按照[设置](http://help.github.com/set-up-git-redirect/)并在 github 本身上[创建一个 repo指令。](http://help.github.com/create-a-repo/)

基本上，您将执行以下操作：

1.  在你的开发电脑上安装 git。
2.  [git init](http://linux.die.net/man/1/git-init)为您的项目创建本地 git 存储库。
3.  [git 将](http://linux.die.net/man/1/git-add)您的文件添加到本地存储库。
4.  [git 将](http://linux.die.net/man/1/git-commit)更改提交到本地存储库。
5.  [必要时git push](http://linux.die.net/man/1/git-push)到远程 github 服务器。

搜索 Stack Overflow - 初学者可以试试这篇文章：[Git 初学者：权威实用指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)

# ruby-on-rails - rails，如何在link_to中传递隐藏字段以获取删除请求

> ID：10842771
> 
> 赞同：0
> 
> 时间：2012-05-31T23:54:38.377
> 
> 标签：ruby-on-rails, hidden-field, link-to

我想知道有人如何通过链接中的隐藏字段来执行删除请求。我有..

```
<%= link_to "delete", feed_item,     method: :delete,
                                     confirm: "You sure?",
                                     title: feed_item.content,
                                     user_id: user_id %>
<% end %> 
```

我一直试图将 user_id 传递给我的控制器的销毁操作，但它似乎找不到 params[:user_id]

当方法是：post 时，似乎可以传递隐藏值，但我怎么能在：delete 中这样做？

我本质上只是想在我的销毁操作中使用 user_id，因此它可以重定向回用户个人资料页面。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:16:57.177

正确的方法是将 feed_item 放在用户资源下或控制器中的用户 current_user 方法

如果您决定将其放在用户资源下，请将您的路线文件修改为

```
resources :users do
  resources feed_items, :only=>[:destroy]
end 
```

而不是在您的链接中删除更改为 user_feed_item_path 的路径

或者，如果您有使用任何类型的身份验证解决方案的 current_user 方法，您可以在重定向路径中使用它

# c# - 有没有办法从控制器访问自定义助手？

> ID：10842775
> 
> 赞同：4
> 
> 时间：2012-05-31T23:54:58.047
> 
> 标签：c#, asp.net-mvc-3, view, controller

我正在构建这个 MVC3 Razor ASP.NET 应用程序，在该应用程序中我使用了一个继承自它的自定义 WebViewPage。所以我所有的视图都使用我的自定义 WebViewPage：

```
public class MyCustomWebViewPage : System.Web.Mvc.WebViewPage
{
    public CustomHelper MyHelper { get; private set; }
         :
} 
```

然后在位于 Views 文件夹中的 web.config 中，我指出 MyCustomViewPage 是我的默认基本页面。

```
<system.web.webPages.razor>
    <pages pageBaseType="Namespace.MyCustomWebViewPage">
        <namespaces>
             :
        </namespaces>
    </pages>
</system.web.webPages.razor> 
```

到目前为止一切顺利，在 View 的 .cshtml 页面上，我可以从 razor 标记访问我的自定义助手：

```
@MyHelper.SomeMethod() 
```

现在，我需要有条件地对助手做一些事情。我尝试在 CSHTML 的 @{} 启动部分设置 helper 的属性，但这为时已晚，无法考虑。

因此，我正在考虑在调用的 Action 方法上或通过覆盖 OnActionExecuting() 方法来执行此操作。

我遇到的问题是，在控制器中我还没有找到访问自定义助手的方法，例如：

```
public class AnyController : Controller {
    public ActionResult Index() {
        MyHelper.SomeProperty = true;
    }
} 
```

为了进一步解释，这个概念是在一个动作（控制器中的动作代码）中，我想在自定义助手中设置一个属性，以启用某些功能。这样，这不会呈现在不需要它的视图上。它与在视图中定义内容的@section 的概念不同，而是说“我希望将此功能添加到布局中”，并且布局将输出一些预定义的标记，这些标记将启用该功能并且在几个地方视图中可能存在需要“功能支持标记或脚本”的“掘金”。如果我使用一个部分，那么那个“通用”脚本会出现多次，这不是我需要的。

话虽如此，如何从控制器内访问基本视图页面中定义的（自定义）帮助程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:23:53.863

考虑通过模型传递信息，因为它更符合 MVC。您可以使用强类型模型或弱类型 ViewBag（示例 -[将数据从控制器传递到视图](https://stackoverflow.com/questions/7272697/passing-data-from-controller-to-view)）。

控制器不应该知道将用于呈现视图的确切页面。它只是说“查找具有此名称的视图并呈现此数据（模型）”。根据不同的条件，可能会有不同的视图匹配相同的名称，因此通常您无法从控制器设置视图对象的属性。

编辑：为什么它在技术上非常困难：

操作方法调用 ( `ActionResult Index(){...}`) 的生命周期与页面（WebViewPage 对象）的生命周期不相交。动作完成执行后创建的 WebViewPage 对象。因此，如果您真的有兴趣将数据从操作直接推送到视图对象（而不是通过内置机制），您将需要弄清楚如何将一些代码块（可能以委托的形式）传递给视图创建代码。

# c# - WSDL 未在 .NET WCF 服务中加载

> ID：10842777
> 
> 赞同：2
> 
> 时间：2012-05-31T23:55:10.473
> 
> 标签：c#, .net, wcf, web-services, wsdl

因此，我创建了一个基本的 WCF Web 服务，其中包含一个操作合同和一个数据合同，一切正常。但是，在部署到我的测试 Web 服务器后，尝试下载 WSDL 会将我重定向到主服务屏幕或“您已创建服务”，错误消息或事件日志中没有显示任何内容，Fiddler 没有报告任何内容，而我可以附加通过远程调试可以访问 Web 服务，代码中没有出现错误。还有哪些其他简单的检查可以查看发生了什么？这是 .NET 3.5 框架上的 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:44:46.687

确保您在服务器 web.config 文件中正确设置了“serviceMetadata”值。

```
<serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" /> 
```

取决于您是否想通过 http 和/或 https 公开

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:31:22.903

弄清楚了，由于某种原因，服务标记中的代码未设置为正确的类。固定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T07:52:22.397

当我忘记用 [ServiceContract] 属性装饰服务接口时，这里也发生了同样的情况。

# compiler-construction - XNA 内容，编译或复制

> ID：10842778
> 
> 赞同：1
> 
> 时间：2012-05-31T23:55:15.820
> 
> 标签：compiler-construction, xna

我只是想知道使用内容编译器与不使用它的优点/缺点是什么。

我更喜欢不编译文件，将它们复制到输出目录，然后使用其他函数而不是“XNA”`Content.Load<>()`函数加载它们。所以我想知道我的方式是否同样有效，或者我是否应该重新使用“XNA”方式。

当我加载东西时，我会使用其他功能，例如`Texture2D.FromStream()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T02:35:07.470

除了威廉的回答（这里是[有用的链接](http://blogs.msdn.com/b/shawnhar/archive/2008/11/24/content-pipeline-assemblies.aspx)），[`ContentManager`](http://msdn.microsoft.com/en-us/library/bb203875.aspx)还将自动处理它加载的所有资源。但是，如果您只使用一种`ContentManager`不会产生影响的方法（因为您的资源将在游戏终止时被释放）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T00:20:26.727

内容编译器使您的内容跨平台兼容，也就是说，它可以在 XBox360 和 PC 上使用，甚至可以在带有 MonoGame 的 Mac 上使用。

如果您只针对 PC，则可以坚持使用 .FromStream 选项，尽管这样做没有任何好处，除非您的艺术家能够在不重新编译的情况下交换资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T12:20:36.150

除了其他答案之外，内容处理器还将您的资产转换为 .xnb 文件，该文件是文件的二进制形式，更小（因此您的游戏下载速度更快，并且在他们的努力中占据了空间）通过从 content.Load<>() 方法加载 xnb 文件，它会在游戏中加载得更快。

# forms - 如何将html表单数据传递给变量（nodejs / javascript）

> ID：10842782
> 
> 赞同：0
> 
> 时间：2012-05-31T23:56:11.657
> 
> 标签：forms, node.js, search

所以我正在使用nodejs和nodejsdb-mysql。我想制作用于添加和搜索帖子的表格。我用表单制作 html 页面，使用 jsdom 将其转换为节点，但是如何设置变量？例如我的 html 表单是这样的：

姓名 = 文字输入 姓氏 = 文字输入 提交

以及如何将插入的姓名/姓氏传递给 var？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T18:07:23.060

使用 nodejsdb-mysql 迟早会遇到日期本地化问题等实际问题，请改用[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:12:07.943

您需要将您的提交变成一个带有诸如 onclick 之类的事件的按钮 - 这可能是您正在寻找的：

```
<input type="button" value="Submit" id="submit" name="submit" onclick="submit()">

<script type="text/javascript">
function submit(){
var name = document.getElementById('**name**').value;
var surname = document.getElementById('**surname**').value;
alert("Thanks for submitting, " +name);
}
</script> 
```

# html - CSS 谷歌广告排名

> ID：10842783
> 
> 赞同：0
> 
> 时间：2012-05-31T23:56:22.460
> 
> 标签：html, css, adsense

我遇到了一个问题，即我的 Google 广告正在按下菜单的其余部分，即使我的 Google 广告位于 div 中

```
.google {
    z-index:100000;
    float:right;
    position:relative;
    top:0px;
} 
```

我有一些你可以看到的其他 div，但我无法弄清楚。

该网站是[http://www.rankmc.com](http://www.rankmc.com)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:17:25.033

添加`float:left;`到您的`div.logo`规则中。

# printing - AWK 多个条件不打印

> ID：10842786
> 
> 赞同：0
> 
> 时间：2012-05-31T23:56:32.037
> 
> 标签：printing, awk, multiple-conditions

我正在寻找缩放来理解为什么会这样：

```
palabra=s_gonzalez
i=10
awk -vvar1=$palabra -vvvar2=$i '( $1 == var1 ) && ( $2 == var2 ) {print $0}' As 
```

没有打印任何东西。该`As`文件包含：

```
r_castillo  10
flores  6
s_gonzalez  10
o_gutzwiller    12
h_ji    4 
```

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:00:54.907

你在哪里：

```
vvar2 
```

你拼错了`var2`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:26:20.790

作为避免此类问题的一种技术，您可以分配不带`-v`. 我会重写命令：

```
awk '$1==var1 && $2==var2' var1=$palabra var2=$i As 
```

`-v`对我来说，在程序之后将变量作为参数而不是作为程序之前的选项分配似乎总是更简单。（`-v`分配在`BEGIN`块中可用，但在这种情况下无关紧要。）

# python - 修复类方法循环

> ID：10842788
> 
> 赞同：0
> 
> 时间：2012-05-31T23:56:53.397
> 
> 标签：python, class, loops, methods

我的类文件遇到问题，我似乎无法找到解决方法。我希望有人能指出我正确的方向。

这是我的代码：

```
class Car:
    def __init__(self, year_model, make, speed):
        self.__year_model = year_model
        self.__make = make
        self.__speed = 0

    def set_year_model(self, year_model):
        self.__year_model = year_model

    def set_make(self, make):
        self.__make = make

    def get_year_model(self):
        return self.__year_model

    def get_make(self):
        return self.__make

    def accelerate(self):
        self.__speed + 5
        return self.__speed

    def decelerate(self):
        self.__speed - 5
        return self.__speed

    def get_speed(self):
        return self.__speed 
```

本质上，我希望将速度属性设置为 0，并有 3 个方法（加速、减速和 get_speed）对速度属性加减 5，最终返回速度属性以便打印。

我猜我的格式有问题，但我似乎找不到可以修复课程的正确安排。

实际程序假设循环加速方法5次，但类方法应该处理顺序加法并返回最终速度。

```
import car

user_year = 1995
user_make = "toyota"
user_speed = 0

user_car = car.Car(user_year, user_make, user_speed)

for count in range(1,6):
user_car.accelerate()

print user_car.get_speed() 
```

我知道这段代码很弱，但这都是临时的，可以帮助我更清楚地解决我的问题。所以希望它不会太混乱，我可以得到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T00:00:15.500

`self._speed + 5`计算当前速度加 5。但您实际上并没有将计算值存储在任何地方。您想使用`self._speed = self._speed + 5`，或更常用的形式，`self._speed += 5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:17:58.027

问题当然是缺少“+=”和“-=”部分，但我会更进一步，建议如果您正在编写新的 Python 代码，您应该熟悉新的样式类。在新样式类中，您的代码可以编写如下：

```
class Car(object):
    def __init__(self, year_model, make, speed):
        self.year_model = year_model
        self.make = make
        self.speed = 0

    def __set_year_model(self, year_model):
        self.__year_model = year_model

    def __set_make(self, make):
        self.__make = make

    def __set_speed(self, speed):
        self.__speed = speed

    def __get_year_model(self):
        return self.__year_model

    def __get_make(self):
        return self.__make

    def accelerate(self):
        self.speed += 5

    def decelerate(self):
        self.speed -= 5

    def __get_speed(self):
        return self.__speed 

    speed = property(fget=__get_speed,fset=__set_speed,fdoc="Set or Retrieve the current speed of this instance of the Car object")
    make = property(fget=__get_make,fset=__set_make,fdoc="Set or Retrieve the make of this instance of the Car object")
    year_model = property(fget=__get_year_model,fset=__set_year_model,fdoc="Set or Retrieve the Year and Model of this instance of the Car object") 
```

另外，主文件中的代码变化：

```
import car

user_year = 1995
user_make = "toyota"
user_speed = 0

user_car = car.Car(user_year, user_make, user_speed)

for count in range(1,6):
    user_car.accelerate()

print user_car.speed 
```

# facebook-graph-api - Zynga 如何通知用户，例如“朋友 1、朋友 2 和其他 5 人一直在玩扑克。现在玩”

> ID：10842792
> 
> 赞同：1
> 
> 时间：2012-05-31T23:57:23.517
> 
> 标签：facebook-graph-api, notifications, facebook-canvas

我正在构建应用程序的中途，当我意识到我计划构建的应用程序的核心部分（事件通知器）将无法工作，因为通过 Facebook API 发送的事件邀请不会显示为通知。

**这是我收到的通知：**

![http://i.imgur.com/SCFZr.png](../Images/199035733912fa9a731a83a87c6d7c57.png)

当然，这不是事件通知，但我不知道还有哪些其他 API 方法调用用户通知（或可以调用一个）。

如果有人可以让我知道他们正在使用的 API 方法，我将不胜感激。（我想这可能是因为他们使用画布应用程序，而我正计划构建一个网络应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:07:13.047

这是一个用户对用户的请求，如果发送给它的用户尚未使用该应用程序，则称为*邀请。*对于*游戏*类别中的应用，它显示为“一直在玩”，对于其他应用，它只显示“john doe 在*xy*中向您发送了请求”</p>

如何通过您的应用发送它们，请参阅[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

# c# - Mongo中Expando对象的反序列化

> ID：10842798
> 
> 赞同：0
> 
> 时间：2012-05-31T23:58:33.927
> 
> 标签：c#, mongodb, deserialization

我在 Mongo-C# 环境中并使用 10Gen Mongo 驱动程序。当我尝试反序列化 Mongo 文档中的数据时，当它有一个子文档并且该子文档不是强类型时，我遇到了一个问题。换句话说，如果子文档是一个 Expando 或只是一个匿名 object() 那么它在反序列化时会给出错误，并出现以下错误：

> System.IO.FileFormatException：被反序列化为 System.Object 的文档必须为空。

我们可以在 Mongo 读/写之前和之后放置一个过滤器，它将我的对象即时转换为 BSONDocument，但我认为 BSOnDocument 和（Expando 或匿名类型）之间没有可用的转换。

编写自定义反序列化工具听起来工作量太大。我只是想知道是否有人以前遇到过这个问题以及他们是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:06:13.223

目前，由于 10gen 驱动程序基于 .NET 3.5，我们不支持动态对象。目前，处理此问题的方法是使用 ExtraElements 成员。你可以在这里阅读：[http](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Supportingextraelements) ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Supportingextraelements 。

我们将在以后全面支持 .NET 4.0，随之而来的是对动态对象的全面支持。如果你现在真的需要这个功能，你可以在这里看到我使用另一个程序集的并行支持：[https](https://github.com/craiggwilson/mongo-csharp-driver/tree/dynamic) ://github.com/craiggwilson/mongo-csharp-driver/tree/dynamic 。但是，它未经测试，实际上只是一个尖峰，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T12:26:25.587

如果要存储动态/匿名类型，可以使用自定义 IBsonSerializer。

有关代码示例，请参见[https://stackoverflow.com/a/23244044/327825](https://stackoverflow.com/a/23244044/327825)

# c - SDCC编译器switch语句，ack:section是干什么用的？

> ID：10842802
> 
> 赞同：2
> 
> 时间：2012-05-31T23:59:25.943
> 
> 标签：c, switch-statement, sdcc

我在 CCTL（~第 330 行）中看到了以下代码[https://github.com/jobytaffey/cctl/blob/master/cctl/main.c](https://github.com/jobytaffey/cctl/blob/master/cctl/main.c)

```
switch(page)
{
   // ...
   ack:
      cons_putc(0);
} 
```

分区是`ack:`干什么用的？它看起来和`default:`我一样。我在 SDCC 文档中也找不到它。

这是C规范中的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:00:58.157

这不是 C 关键字；这只是一个标签。注意相应的`goto`语句。

# ios - iOS 音乐游戏的最佳低延迟音频 API？OpenAL、Cocoas2d Denshion、PhoneGap

> ID：10842803
> 
> 赞同：5
> 
> 时间：2012-05-31T23:59:31.120
> 
> 标签：ios, html, audio, cordova, openal

我一直在研究为 iOS 编写类似于 Tap Tap Revenge、吉他英雄、摇滚乐队等音乐游戏的最佳方式。便携性是一个优势。

该[视频](http://www.youtube.com/watch?v=6QQAzhwalPI&feature=results_video&playnext=1&list=PLD0EEC3E76755983C)解释了 Open AL 有一些处理声音、一次播放多个声音和回收内存的好方法。我还遇到过 Cocoas2d Denshion 以低延迟处理音频。

这篇[文章](http://www.tricedesigns.com/2012/01/25/low-latency-polyphonic-audio-in-phonegap/)指出 HTML5 对音频播放尤其是复音很糟糕。他接着说 Phonegap 的 Media 类运行良好，通过使用本机插件模型，您可以使用 Phonegap 创建低延迟解决方案

如果你要选择一个 API，你会选择创建一个基于音频的低延迟游戏，为什么？如果您有与提到的不同的建议，请描述并说明原因。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:11:54.220

RemoteIO 音频单元在配置了请求非常短缓冲区的音频会话时，将允许当前 iOS 设备上的最低延迟。OpenAL 似乎建立在它之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:16:38.513

如果您决定采用 PhoneGap 路线，那么 Andy Trice 的[低延迟音频插件](http://www.tricedesigns.com/2012/01/25/low-latency-polyphonic-audio-in-phonegap/)应该可以解决您的顾虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:14:27.657

有一些方法可以解决 HTML5 延迟问题，如此[处](http://hungry-media.com/2010/09/synchronizing-audio-with-html5/)和[此处](https://stackoverflow.com/questions/3672360/html5-audio-jquery-playback-latency-issue-preload)所述。我建议您在手机上尝试一下，看看它们是否反应足够灵敏。如果没有，那么[Novocaine](https://github.com/alexbw/novocaine#readme)可能是您最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T04:54:35.290

Wedge.js 是我今天在 Hacker News 上看到的，也许它会对你有所帮助

[http://www.boxuk.com/labs/wedge-js](http://www.boxuk.com/labs/wedge-js)

# php - cURL 连接重置 - 站点未通过超时回复 POST

> ID：10842804
> 
> 赞同：0
> 
> 时间：2012-05-31T23:59:39.433
> 
> 标签：php, post, curl

一个 php 脚本`curl_exec()`在 https（端口 443）上对这个站点进行了多次访问。选项：`curl_setopt($ch, curlopt_timeout, 50)`已设置。有时，目标在超时之前没有响应。该脚本被设置为再次尝试 POST 请求，但在随后的尝试中总是收到：

```
Error 500: javax.servlet.jsp.JspException: ... 
```

这第二个结果正在发生，因为第一次尝试的 curl_exec 没有做任何事情。是否有允许“干净”重新尝试的 cURL 配置，以便第二次尝试可能成功？这就像在 curl (??) 中使用浏览器的 STOP 按钮

这样的 curlopt 存在吗？

# java - net.sourceforge.jtds.jdbc.cache.SimpleLRUCache 导致内存泄漏

> ID：10842809
> 
> 赞同：0
> 
> 时间：2012-06-01T00:00:40.683
> 
> 标签：java, memory, jtds

我是使用 jtds 连接驱动程序的新手。我编写了一个应用程序，它读取大约 2500 个大型 xml，并进行 SQL 查询并针对 SQL 服务器运行。我已经看到，当我达到一定数量的 xml 时，我的程序运行内存不足。我使用内存分析器在 Eclipse 中检查了我的 phd 转储文件，发现 net.sourceforge.jtds.jdbc.cache.SimpleLRUCache 占用了大量内存。我连接到 SQL 服务器一次并保持连接活动，直到我刷新所有查询。下面是我对服务器运行查询的代码。我不知道如何获得 net.sourceforge.jtds.jdbc.cache.SimpleLRUCache 类的句柄，因为它有一个我认为可能会清除缓存的 clear 方法。同样，我对 jtds 驱动程序不是很了解。谁能帮我解决这个问题？

```
public boolean runQueries(String query){
    if (getConn() != null && query != null) {
        Statement statement = null;
        try {
            long start = System.currentTimeMillis();
            try {
                if(log.isLoggable(Level.FINEST)){
                    log.finest("Processing: "+query);
                }
                statement = getConn().createStatement();
                statement.executeUpdate(query);
            } catch (Exception e) {
                if(log.isLoggable(Level.FINEST)){
                    log.log(Level.SEVERE, "Failed to process        query: "
                        + query, e);
                }else{
                    String reportQuery = query.length() > MAX_CHARS_DISPLAY ? query.substring(0,MAX_CHARS_DISPLAY)+"..." : query;
                        log.log(Level.SEVERE, "Failed to process query: "
                                + reportQuery , e);
                }
            }finally{
                if(statement != null){
                    try {
                        statement.close();
                    } catch (SQLException e) {
                        log.log(Level.SEVERE,"Failed to close statement: ",e);
                    }
                }
            }

            long end = System.currentTimeMillis();

            return true;
        }finally{
            if(statement != null){
                try {
                    statement.close();
                } catch (SQLException e) {
                    log.log(Level.SEVERE,"Failed to close statement: ",e);
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T02:39:25.080

[FAQ](http://jtds.sourceforge.net/faq.html#urlFormat)解释了如何通过在 JDBC URL 中为 maxStatements 设置较低的值来更改语句缓存的大小。如果您正在构建非常大的语句，您可能希望将该限制设置为远低于默认值 500。您还可能希望查看那里的一些其他内存设置。

# java - Java游戏开发。让怪物在迷宫中随机移动

> ID：10842822
> 
> 赞同：-3
> 
> 时间：2012-06-01T00:02:09.467
> 
> 标签：java, maze, pacman

我正在编写一个吃豆人风格的游戏，其中假设怪物在迷宫中以随机方向移动。但我无法弄清楚如何让他们适应他们想要的正确方向。我正在使用一些常量作为方向。

```
public class Monster extends GObject {

    private final int DIRECTION_UP = 0;
    private final int DIRECTION_DOWN = 1;
    private final int DIRECTION_LEFT = 2;
    private final int DIRECTION_RIGHT = 3;

    private int DIRECTION = 2;

    private float speed = 0.06f;

    public Monster(float x, float y){
        super(Treasure.MONSTER_LEFT);
        setX(x);
        setY(y);
        DIRECTION = random(3);
    }

    public void update(long elapsedTime){
        setVelocityX(0);
        setVelocityY(0);
        switch (DIRECTION){
            case DIRECTION_UP :
                setVelocityY(-speed);
                setImage(Treasure.MONSTER_UP);
                break;
            case DIRECTION_DOWN :
                setVelocityY(speed);
                setImage(Treasure.MONSTER_DOWN);
                break;
            case DIRECTION_LEFT :
                setVelocityX(-speed);
                setImage(Treasure.MONSTER_LEFT);
                break;
            case DIRECTION_RIGHT :
                setVelocityX(speed);
                setImage(Treasure.MONSTER_RIGHT);
                break;
        }
        changeDirection();
    }

    private int random(int x){
        return (int)Math.floor(Math.random() * (x+1));
    }

    public void collision(GObject other){
        if (other instanceof Wall){
            switch (DIRECTION){
                case DIRECTION_UP :
                    setY(other.getY()+other.getHeight());
                    break;
                case DIRECTION_DOWN :
                    setY(other.getY()-getHeight());
                    break;
                case DIRECTION_LEFT :
                    setX(other.getX()+other.getWidth());
                    break;
                case DIRECTION_RIGHT :
                    setX(other.getX()-getWidth());
                    break;
            }
        }
    }

} 
```

这是我使用的 changeDirection() 方法。

```
private void changeDirection(){
    int random = random(1);
    boolean opposite = (random==1);
    int dir = DIRECTION;
    switch (Explorer.DIRECTION){
        case DIRECTION_UP :
            if (opposite){
                dir = DIRECTION_DOWN;
            } else {
                dir = DIRECTION_UP;
            }
            break;
        case DIRECTION_DOWN :
            if (opposite){
                dir = DIRECTION_UP;
            } else {
                dir = DIRECTION_DOWN;
            }
            break;
        case DIRECTION_LEFT :
            if (opposite){
                dir = DIRECTION_RIGHT;
            } else {
                dir = DIRECTION_LEFT;
            }
            break;
        case DIRECTION_RIGHT :
            if (opposite){
                dir = DIRECTION_LEFT;
            } else {
                dir = DIRECTION_RIGHT;
            }
            break;
    }
    switch (dir){
        case DIRECTION_UP :
            if (Map.isObjectCollisionFree(getX(), getY()-1, true, this)){
                DIRECTION = dir;
            }
            break;
        case DIRECTION_DOWN :
            if (Map.isObjectCollisionFree(getX(), getY()+1, true, this)){
                DIRECTION = dir;
            }
            break;
        case DIRECTION_LEFT :
            if (Map.isObjectCollisionFree(getX()-1, getY(), true, this)){
                DIRECTION = dir;
            }
            break;
        case DIRECTION_RIGHT :
            if (Map.isObjectCollisionFree(getX()+1, getY(), true, this)){
                DIRECTION = dir;
            }
    }
} 
```

任何人都可以帮助我如何让怪物在迷宫中随机移动......

我目前面临的问题是怪物没有移动......他们在游戏中跳跃。如果他们在视野之外，他们就永远不会回来。监控他们说我他们的坐标达到了-12000并停在那里。这就是我检查墙壁的方式。

```
if (Map.isObjectCollisionFree(<x-pos>, <y-pos>, <solid-state>, <object>)) 
```

这对玩家有用。在碰撞方法中，我将怪物与地图的网格对齐。

编辑：更改了 changeDirection() 方法

```
 private void changeDirection(){     
        DIRECTION = random(3);
}

the update() method

    public void update(long elapsedTime){
    if (MapView.isVisible(this)){
        if ((getX()%Map.TILE_SIZE==0) && (getY()%Map.TILE_SIZE==0)){
            changeDirection();
        }
        setVelocityX(0);
        setVelocityY(0);
        switch (DIRECTION){
            case DIRECTION_UP :
                setVelocityY(-speed);
                setImage(Treasure.MONSTER_UP);
                break;
            case DIRECTION_DOWN :
                setVelocityY(speed);
                setImage(Treasure.MONSTER_DOWN);
                break;
            case DIRECTION_LEFT :
                setVelocityX(-speed);
                setImage(Treasure.MONSTER_LEFT);
                break;
            case DIRECTION_RIGHT :
                setVelocityX(speed);
                setImage(Treasure.MONSTER_RIGHT);
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:48:52.207

使用您提供的代码，会有一段时间怪物向一个方向移动，但认为它正在向另一个方向移动（因为`changeDirection()`改变了内部方向值，而不是怪物的速度）。然后当怪物在认为它完全朝着不同的方向移动时撞到墙上时，它会跳到它认为它正在移动的方向移动时它会在墙壁的一侧......然后继续前进在它真正移动的方向上它是快乐的方式，直到下一次呼叫`update()`。

要解决此问题，请将呼叫`changeDirection()`从末尾`update()`移到开头。实际上，我建议将所有代码`update()`移到 末尾`changeDirection()`，但无论哪种方式都可以。

# java - 跨线程传递数据时如何确保 Java 中的内存可见性

> ID：10842825
> 
> 赞同：0
> 
> 时间：2012-06-01T00:02:38.947
> 
> 标签：java, multithreading, memory-management, shared-memory, java-memory-model

我有一个生产者消费者模式，其中一些线程正在创建数据并定期传递该数据的块以供其他一些线程使用。

牢记 Java 内存模型，我如何确保传递给消费者线程的数据具有完全的“可见性”？

我知道 java.util.concurrent 中有专门为此构建的 ConcurrentLinkedQueue 之类的数据结构，但我想在不使用它们的情况下尽可能低级别地执行此操作，并对幕后发生的事情完全透明，以确保内存可见性部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:30:02.497

如果您想要“低级别”，请查看`volatile`and `synchronized`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T15:52:45.513

要传输数据，您需要一个可用于所有线程的字段。在您的情况下，它确实需要某种集合来处理多个条目。如果你创建了 field `final`，引用了一个 ConcurrentLinkedQueue，你就差不多完成了。该字段可以公开并且每个人都可以看到，或者您可以使用 getter 使其可用。

如果使用未同步的队列，则需要做更多的工作，因为您必须手动同步对它的所有访问，这意味着您必须跟踪所有使用情况；当有 getter 方法时并不容易。您不仅需要保护队列不被同时访问，还必须确保相互依赖的调用最终在同一个同步块中。例如：

```
 if (!queue.isEmpty())  obj = queue.remove(); 
```

如果整个事情不同步，`queue`完全有能力告诉你它不为空，然后在你尝试获取下一个元素时抛出 NoSuchElementException。（ConcurrentLinkedQueue 的接口是专门设计来让你通过一个方法调用来做这样的操作的。即使你不想使用它也可以好好看看它。）

简单的解决方案是将队列包装在另一个对象中，该对象的方法经过仔细选择*并*全部同步。被包装的类，即使它是 LinkedList 或 ArrayList，现在将像 CLQ 一样运行（如果你做得对的话），它可以自由地释放给程序的其余部分。

**因此，您将拥有**一个真正的全局字段，其中包含对包装类的不可变 ( `final`) 引用，该包装类包含一个 LinkedList（例如）并具有使用 LinkedList 存储和访问数据的同步方法。包装类，如 CLQ，将是线程安全的。

这方面的一些变体可能是可取的。将包装器与程序中的其他一些高级类结合起来可能是有意义的。创建和提供嵌套类的实例也可能是有意义的：也许一个只添加到队列中，一个只从队列中删除。（你不能用 CLQ 做到这一点。）

最后一点：同步所有内容后，下一步是弄清楚如何在不破坏线程安全的情况下取消同步（以防止线程等待太多）。*在这*方面努力工作，你最终会重写 ConcurrentLinkedQueue。

# c# - Quartz.NET 实现与教程不符

> ID：10842826
> 
> 赞同：29
> 
> 时间：2012-06-01T00:03:46.103
> 
> 标签：c#, types, quartz.net

我尝试使用[本教程实现一个非常简单的 Quartz.net 实现](http://quartznet.sourceforge.net/tutorial/lesson_1.html)

```
using Quartz;
using Quartz.Impl;

// construct a scheduler factory
ISchedulerFactory schedFact = new StdSchedulerFactory();

// get a scheduler
IScheduler sched = schedFact.GetScheduler();
sched.Start();

// construct job info
JobDetail jobDetail = new JobDetail("myJob", null, typeof(HelloJob));
// fire every hour
Trigger trigger = TriggerUtils.MakeHourlyTrigger();
// start on the next even hour
trigger.StartTimeUtc = TriggerUtils.GetEvenHourDate(DateTime.UtcNow);  
trigger.Name = "myTrigger";
sched.ScheduleJob(jobDetail, trigger); 
```

我遇到的问题是（例如）`MakeHourlyTrigger`在 Intellisense 中不可用，并给了我错误

> Quartz.TriggerUtils 不包含“MakeHourlyTrigger”的定义。

我收到以下类型的错误`JobDetail`：

> “找不到类型或命名空间名称‘JobDetail’（您是否缺少 using 指令或程序集引用？）”

也许我累了，错过了一些愚蠢而容易的事情……我希望是这样。我在 Internet 上看到的所有示例都说我应该使用 Quartz 并使用 Quartz.Impl。请告诉我，我只是错过了一些简单的东西......

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-04T06:04:33.687

该文档针对 1.0 API。Shiz 现在变了 :( 是的，他们的艺术破灭了。

所以..帮助..[查看这个官方迁移页面](http://quartznet.sourceforge.net/migration_guide.html)。你可能会在那里找到一些爱。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-02T02:40:40.570

我知道这不是正确的地方。我应该编辑原始的 Wiki blah blah blah。我正努力在周五的晚上做 31 个小时的工作。所以这里。

第 1 课

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Quartz;
using Quartz.Impl;

namespace QuartzNetTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // construct a scheduler factory
            ISchedulerFactory schedFact = new StdSchedulerFactory();

            // get a scheduler
            IScheduler sched = schedFact.GetScheduler();
            sched.Start();

            // construct job info
            IJobDetail jobDetail = JobBuilder.Create<HelloJob>()
                .WithIdentity("myJob")
                .Build();
            ITrigger trigger = TriggerBuilder.Create()
                .WithIdentity("myTrigger")
                // fire every hour
                .WithSimpleSchedule(x => x.WithIntervalInHours(1).RepeatForever())
                // start on the next even hour
                .StartAt(DateBuilder.FutureDate(1, IntervalUnit.Hour))
                .Build();

            sched.ScheduleJob(jobDetail, trigger);
        }
    }

    class HelloJob : Quartz.IJob
    {
        public void Execute(IJobExecutionContext context)
        {
            Debug.WriteLine("Hello at " + DateTime.Now.ToString());
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-07T19:22:30.847

我很高兴地宣布 Quartz.NET 的网站已成功迁移到 GitHub Pages。现在应该更容易让社区贡献修复和增强功能。

本教程（最终）更新为包括 2.x 更改：

[http://www.quartz-scheduler.net/documentation/quartz-2.x/tutorial/index.html](http://www.quartz-scheduler.net/documentation/quartz-2.x/tutorial/index.html)

网站是用 Markdown 编写的，可以通过 GitHub 使用拉取请求进行更新：

[https://github.com/quartznet/quartznet/tree/gh-pages](https://github.com/quartznet/quartznet/tree/gh-pages)

# objective-c - 关联对象会自动释放吗？

> ID：10842829
> 
> 赞同：18
> 
> 时间：2012-06-01T00:04:14.277
> 
> 标签：objective-c, ios

注意：这个其他问题似乎相关，但不是：[关联对象何时被释放？](https://stackoverflow.com/questions/6039309)

我正在向`UIView`实例添加第二个描述，如下所示：

```
- (void) setSecondDescription:(UIView*)view description2:(NSString*)description2 {
    objc_setAssociatedObject (view,&key,description2,OBJC_ASSOCIATION_RETAIN);
}

- (NSString*) secondDescription:(UIView*)view {
    return (id)objc_getAssociatedObject(view, &key);   
} 
```

如果`UIView`释放，关联的描述 2 会被释放吗？有没有办法让这种情况自动发生？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-01T01:59:37.637

如果您想真正**看到**整个 dealloc 时间线的描述，请查看 WWDC 2011, Session 322, 36:22。但是，这是基本的概要（我想记住它，所以这是我的一段代码中的实际注释）。

请注意，关联对象在生命周期结束时被释放。

```
// General Information
// We take advantage of the documented Deallocation Timeline (WWDC 2011, Session 322, 36:22).
// 1\. -release to zero
//     * Object is now deallocating and will die.
//     * New __weak references are not allowed, and will get nil.
//     * [self dealloc] is called
// 2\. Subclass -dealloc
//     * bottom-most subclass -dealloc is called
//     * Non-ARC code manually releases iVars
//     * Walk the super-class chain calling -dealloc
// 3\. NSObject -dealloc
//     * Simply calls the ObjC runtime object_dispose()
// 4\. object_dispose()
//     * Call destructors for C++ iVars
//     * Call -release for ARC iVars
//     * Erase associated references
//     * Erase __weak references
//     * Call free() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T00:14:23.517

是的。当一个对象被释放时，任何关联的对象（使用`RETAIN`或`COPY`关联类型）都会被自动释放。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T00:17:43.453

简而言之，是的 - 当拥有对象被释放时，保留的关联对象被释放。[请参阅 Apple文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)的第一部分

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-30T06:27:53.467

Jody Hagins[回答](https://stackoverflow.com/a/10843510/970301)中的第 4 节说“擦除关联的引用”，这并没有明确暗示引用已被释放。所以我用下面的一段代码（注意没有ARC）来测试这个。

```
@interface AssociatedObjectHelper : NSObject
@end

@implementation AssociatedObjectHelper
- (void) dealloc
{
    NSLog(@"In %s", __FUNCTION__);
    [super dealloc];
}
@end

@implementation AppDelegate
...
- (void) testReleaseAssociatedObject
{
    static const NSString *key = @"testKey123";
    NSObject *ob = [NSObject new];
    AssociatedObjectHelper *assocOb = [AssociatedObjectHelper new];
    objc_setAssociatedObject(ob, key, assocOb, OBJC_ASSOCIATION_RETAIN);
    [assocOb release];
    [ob release];
} 
```

调用上面的代码确实最终会调用 -[AssociatedObjectHelper dealloc]，并带有以下堆栈跟踪：

```
#0  0x000000010000528f in -[AssociatedObjectHelper dealloc]
#1  0x00007fff8a0bb89c in objc_object::sidetable_release(bool) ()
#2  0x00007fff8a0a537f in _object_remove_assocations ()
#3  0x00007fff8a0a1644 in objc_destructInstance ()
#4  0x00007fff8a0a1595 in object_dispose ()
#5  0x00007fff8a0bb89c in objc_object::sidetable_release(bool) ()
#6  0x000000010000e9b6 in -[AppDelegate testReleaseAssociatedObject] 
```

在 Xcode 7.0.1 上测试

# php - 通过 PEAR 发送 php smtp 邮件时出现 html 内容类型标头问题

> ID：10842830
> 
> 赞同：0
> 
> 时间：2012-06-01T00:04:17.377
> 
> 标签：php, email, smtp, pear

我可以完美地发送电子邮件，但它们以纯文本形式显示，我一直在尝试很多解决方案将其显示为 HTML 试图放置内容类型，但是当我检查发送的电子邮件中的标题时，MIME 和内容类型标题丢失. 我做错了什么？

谢谢！

```
$email = "example@test.com";

$subject = "example subject\r\n";

$msg_body = "example body with some html";

$host = "mail.examplehost.com";
     $username = "exampleemail@test.com";
     $password = "examplepass";

$smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

$headers = array ('From' => "exampledomain.com",
          'To' => $to,
          'Subject' => $subject
          'MIME-Version' => "1.0",
          'Content-type' => "text/html; charset=iso-8859-1"
                   );

 $mail = $smtp->send($to,$headers,$msg_body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T22:33:38.973

在 headers 数组中，您似乎在 $subject 之后缺少逗号

# iphone - 如何在视图上添加触摸并检测 UIImageView，以便我可以移动它而不在其上添加一个？

> ID：10842831
> 
> 赞同：1
> 
> 时间：2012-06-01T00:04:21.573
> 
> 标签：iphone, ios, xcode, uiimageview, uitouch

我想知道你们是否有一个示例代码添加并在触摸时移动 UIImageView 并检测是否有 UIImageView ，所以我不能在它上面添加 UIImageView 。

编辑：更清晰的问题 1\. 我想在触摸视图时添加一个杯子（UIImageView），但不想让杯子（UIImageView）堆叠。

1.  我想移动 UIImageView 但如果那里有 UIImageView 会弹回原来的位置，所以它不会堆叠 UIImageView 已经在那里。

感谢您阅读我的问题并感谢您的帮助

干杯

德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:44:19.350

您可以将 UIPanGestureRecognizer 添加到 UIImageView 以处理拖动，如下所示。

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
[panRecognizer setMinimumNumberOfTouches:1];
[panRecognizer setMaximumNumberOfTouches:1];
[panRecognizer setDelegate:self];
[imageView addGestureRecognizer:panRecognizer]; 
```

实现以下方法：

```
 -(void)move:(id)sender {

    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
      firstX = [[sender view] center].x;
      firstY = [[sender view] center].y;
    }
  translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);
      [[sender view] setCenter:translatedPoint];

    } 
```

结合以上内容，您可以使用 CGRectIntersectsRect 来查找它是否与另一个杯子相交。

```
BOOL isIntersecting = CGRectIntersectsRect ([cup1 frame],[cup2 frame]); 
```

您必须包装功能以考虑所有杯子，但这让您了解如何完成您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:51:19.340

这应该让你去......</p>

在头文件中创建两个 ivars：

```
UIImageView *myImageView1;
UIImageView *myImageView2; 
```

接下来的两个方法将在您的实现文件中：

```
-(void)initImagesAndPanGesture
{
    UIImage *img = [UIImage imageNamed:@"image1.png"];
    myImageView1 = [[UIImageView alloc]initWithImage:img];
    [myImageView1 setFrame:CGRectMake(300, 800, 100, 100)];
    [myImageView1 setUserInteractionEnabled:YES];
    UIPanGestureRecognizer *recognizer1 = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan1:)];
    [myImageView1 addGestureRecognizer:recognizer1];
    [self.view addSubview:myImageView1];

    img = [UIImage imageNamed:@"image2.png"];
    myImageView2 = [[UIImageView alloc]initWithImage:img];
    [myImageView2 setFrame:CGRectMake(500, 800, 100, 100)];
    [myImageView2 setUserInteractionEnabled:YES];
    recognizer1 = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan1:)];
    [myImageView2 addGestureRecognizer:recognizer1];
    [self.view addSubview:myImageView2];
}

-(void)handlePan1:(UIPanGestureRecognizer *)recognizer
{
    if (!(CGRectIntersectsRect(myImageView1.frame, myImageView2.frame)))
    {
        CGPoint translation = [recognizer translationInView:self.view];
        recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);

        [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
    }
    else 
    {
        NSLog(@"intersect!");
    }
} 
```

# regex - 正则表达式混淆\s和“”

> ID：10842835
> 
> 赞同：5
> 
> 时间：2012-06-01T00:04:36.353
> 
> 标签：regex

在正则表达式中，我知道何时使用 \s 来表示空格，但是在以下情况下，它们会有所不同：

1.  /a\sb/ ---带有 \s
2.  /ab/ ---有空字段

如果你能向我解释一下，非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T00:09:14.767

\s 字符类匹配所有“空白字符”，而不仅仅是空格。这包括制表符 (\t)，如果允许多行匹配，则包括回车符 (\r) 和换行符 (\n)。理论上，如果您的正则表达式引擎处理 unicode，也有 \s 可以匹配的 unicode 空白字符，尽管您的里程可能会有所不同。

因此，对于像“a\t b”这样的字符串，您可以将它与正则表达式 /a\s+b/ 匹配，以防万一这对您有用。

# android - Android 网页视图中的 G+

> ID：10842836
> 
> 赞同：1
> 
> 时间：2012-06-01T00:04:38.210
> 
> 标签：android, android-webview, google-plus-one

我在我的应用程序中创建了一个包含 webview 的活动，在本教程[Android +1 按钮之后，我在 WebView](https://stackoverflow.com/questions/7813106/android-1-button-in-webview)中放置了一个 google plus 按钮。但是我有一个大问题！该按钮效果很好，但看起来很少！我该如何处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:13:54.370

也许您可以使用 webviews 缩放设置。

```
webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

# javascript - 从 javascript 访问 JSON 元素

> ID：10842841
> 
> 赞同：16
> 
> 时间：2012-06-01T00:05:51.010
> 
> 标签：javascript, json

```
$.getJSON('http://23.21.128.153:3000/api/v1/holidays', function(data){
        alert("this: " + data.holiday[0].name);
 }); 
```

我正在尝试访问我的 JSON 响应的第一个元素的“名称”属性，但没有成功，谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-01T00:08:35.227

试试这个：

```
data[0].holiday.name 
```

`data`看起来像这样：

```
[
  {
    "holiday":{
      "id":1,
      "date":"2012-05-01",
      "name":"Dia del trabajo",
      "description":"",
      "country_id":1,
      "moved_date":"2012-04-30"
    }
  },
  {
    "holiday":{...}
  },
...] 
```

因此，您需要从主数组中选择第一个元素（`data[0]`），然后获取其`holiday`属性（`data[0].holiday`），然后获取其`name`属性。

# javascript - NodeJS：将 EOF 发送到标准输入流而不关闭流

> ID：10842842
> 
> 赞同：16
> 
> 时间：2012-06-01T00:05:58.020
> 
> 标签：javascript, node.js

**如何在不关闭流的情况下向流发送 EOF 信号？**

我有一个等待标准输入的脚本，然后当我按下 ctrl-d 时，它会将输出吐到标准输出，然后再次等待标准输入，直到我按下 ctrl-d。

在我的 nodejs 脚本中，我想生成该脚本，写入标准输入流，然后以某种方式发出 EOF 信号而不关闭流。这不起作用：

```
var http = require('http'),
    spawn = require('child_process').spawn;

var child = spawn('my_child_process');
child.stdout.on('data', function(data) {
    console.log(data.toString());
});

child.stdout.on('close', function() {
    console.log('closed');
})

http.createServer(function (req, res) {
    child.stdin.write('hello child\n');
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

但是，如果我将 child.stdin.write(...) 更改为 child.stdin.end(...)，它可以工作，但只有一次；之后流关闭。我在某处读到 EOF 实际上不是一个字符，它只是任何不是字符的东西，通常是-1，所以我尝试了这个，但这也不起作用：

```
var EOF = new Buffer(1); EOF[0] = -1;
child.stdin.write("hello child\n");
child.stdin.write(EOF); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-16T03:19:56.627

你试过`child.stdin.write("\x04");`吗？这是 Ctrl+D 的 ascii 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-19T13:09:46.553

你只用`res`下面两行就做到了......

> *   `stream.write(data)`当你想继续写作时使用
> *   `stream.end([data])`当您不需要发送更多数据时使用（它将关闭流）

```
var http = require('http'),
    spawn = require('child_process').spawn;

var child = spawn('my_child_process');
child.stdout.on('data', function(data) {
    console.log(data.toString());
});

child.stdout.on('close', function() {
    console.log('closed');
})

http.createServer(function (req, res) {
    child.stdin.end('hello child\n');
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T13:20:08.337

```
var os = require("os");    
child.stdin.write("hello child\n");
child.stdin.write(os.EOL); 
```

我在我的项目中使用它并且它有效

# java - 阿帕奇http客户端

> ID：10842843
> 
> 赞同：0
> 
> 时间：2012-06-01T00:06:07.007
> 
> 标签：java, android, facebook, apache

好的...在我寻求在android中以编程方式上网的过程中。我终于确信 apache http api 是要走的路。我需要一些帮助来使用它。我已经设法使用 httppost 登录，但是我希望之后能够继续。再次以 facebook 为例，我登录到 facebook，现在我想使用这个登录会话来发布一个状态，我该如何继续？这是到目前为止的代码（需要清理和东西，它主要是从各种来源复制的）

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DefaultHttpClient httpclient = new DefaultHttpClient();

    try {
        HttpGet httpget = new HttpGet("https://www.facebook.com/");
      try{
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();

      //  System.out.println("Login form get: " + response.getStatusLine());
 //    EntityUtils.consume(entity);

       // System.out.println("Initial set of cookies:");
        List<Cookie> cookies = httpclient.getCookieStore().getCookies();
        if (cookies.isEmpty()) {
            System.out.println("None");
        } else {
            for (int i = 0; i < cookies.size(); i++) {
                System.out.println("- " + cookies.get(i).toString());
            }
        }
       // https://www.facebook.com/login.php?login_attempt=1
         HttpPost httpost = new HttpPost("https://www.facebook.com/login.php?login_attempt=1");

        List <NameValuePair> nvps = new ArrayList <NameValuePair>();
        nvps.add(new BasicNameValuePair("email", "****"));
        nvps.add(new BasicNameValuePair("pass", "****"));

        try {
            httpost.setEntity(new UrlEncodedFormEntity(nvps));
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            response = httpclient.execute(httpost);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        entity = response.getEntity();
        Toast.makeText(getBaseContext(), "done",Toast.LENGTH_LONG);
        System.out.println("Login form get: " + response.getStatusLine());
    //   EntityUtils.consume(entity);

        System.out.println("Post logon cookies:");
        cookies = httpclient.getCookieStore().getCookies();
        if (cookies.isEmpty()) {
            System.out.println("None");
        } else {
            for (int i = 0; i < cookies.size(); i++) {
                System.out.println("- " + cookies.get(i).toString());
            }
        }

    }finally {} }catch (Exception e) {
        // TODO: handle exception
    }finally {
        // When HttpClient instance is no longer needed,
        // shut down the connection manager to ensure
        // immediate deallocation of all system resources
        httpclient.getConnectionManager().shutdown();
        Toast.makeText(getBaseContext(), "done",Toast.LENGTH_LONG);
    }

} 
    } 
```

用您的电子邮件和密码替换星星，这会让您进入 Facebook，我如何从那里继续发布状态？

再次请不要告诉我有一个facebook api，我不想使用它，这里的重点是学习使用apache库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:59:59.993

最好的开始方法是使用wireshark 并查看浏览器在发布状态时正在做什么。然后在 HTTPClient 中进行适配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T03:29:46.187

在 Mobile Client 中保持会话的最佳方式应该是使用 OAuth，当您获得 OAuth 令牌时，您可以使用令牌来使用 Facebook 提供的任何 api。

# django - Django Forms - localize=True 似乎不起作用

> ID：10842844
> 
> 赞同：1
> 
> 时间：2012-06-01T00:06:07.670
> 
> 标签：django, localization, django-forms

我试图让表单接受带有不同小数分隔符的小数，但它似乎不起作用。

我`USE_L10N = True`在设置和`localize=True`表单字段中有，但它只接受我正在测试的两台机器上的句点（应该在我的辅助机器上接受逗号）

有什么我想念的吗？

我使用的是 Windows，但在生成翻译文件/语言环境文件夹方面我没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T21:51:33.477

It works for me with this form:

```
class InvoiceItemForm(forms.ModelForm):
    price = forms.CharField(max_length=10, min_length=1, localize=True)
    quantity = forms.CharField(max_length=10, min_length=1, localize=True) 
```

Also on settings:

```
LANGUAGE_CODE = 'en'
USE_I18N = True
USE_L10N = True 
```

And check the "Accept-Language" that your browser is sending to the server. Mine is "en-us,en;q=0.8,es-es;q=0.5,es;q=0.3" and shows format in "en".

# scala - Scala：将元组列表扩展为元组的可变长度参数列表

> ID：10842851
> 
> 赞同：23
> 
> 时间：2012-06-01T00:07:28.173
> 
> 标签：scala, functional-programming

我对如何将 List/Seq/Array 扩展为可变长度参数列表感到困惑。

鉴于我有 test_func 函数接受元组：

```
scala> def test_func(t:Tuple2[String,String]*) = println("works!")
test_func: (t: (String, String)*)Unit 
```

当我传递元组时哪个有效：

```
scala> test_func(("1","2"),("3","4"))
works! 
```

通过阅读 Scala 参考资料，我有一个强烈的印象，即以下内容也可以工作：

```
scala> test_func(List(("1","2"),("3","4")))
<console>:9: error: type mismatch;
 found   : List[(java.lang.String, java.lang.String)]
 required: (String, String)
              test_func(List(("1","2"),("3","4")))
                        ^ 
```

还有一次绝望的尝试：

```
scala> test_func(List(("1","2"),("3","4")).toSeq)
<console>:9: error: type mismatch;
 found   : scala.collection.immutable.Seq[(java.lang.String, java.lang.String)]
 required: (String, String)
              test_func(List(("1","2"),("3","4")).toSeq) 
```

如何将 List/Seq/Array 扩展为参数列表？

先感谢您！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-01T00:11:34.833

您需要添加`:_*`.

```
scala> test_func(List(("1","2"),("3","4")):_*)
works!
scala> test_func(Seq(("1","2"),("3","4")):_*)
works!
scala> test_func(Array(("1","2"),("3","4")):_*)
works! 
```

# ajax - 如何跟踪看到了 ajax 帖子的浏览量？

> ID：10842852
> 
> 赞同：1
> 
> 时间：2012-06-01T00:07:30.577
> 
> 标签：ajax, google-analytics, pageviews, user-tracking, chartbeat

我有一些类似于 twitter 的提要，我们在其中实时加载它。我如何跟踪有多少人看过一条推文？我不是在谈论您是否访问 domain.com/post/32434 并加载状态。我说的是 AJAX 实时查询，其中一个帖子一个接一个地被加载。

谷歌分析或 Charbeat 是否有任何东西可以帮助满足我的这一需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:08:44.353

为什么不在数据库中管理自己的计数器？

我真的不知道您的标准，但是假设您基本上想计算给定推文的加载次数。

很快，我就想到了： 表：

```
CREATE TABLE tweets_loads(ID_TWEET INT NOT NULL, LOADS BIGINT NOT NULL DEFAULT 0, PRIMARY KEY `ID_TWEET`) ENGINE=InnoDB; 
```

每个ajax请求的查询：

```
INSERT INTO tweets_loads (ID_TWEET, LOADS) VALUES (myTweetId, 1)
ON DUPLICATE KEY UPDATE LOADS = LOADS + 1; 
```

（假设mysql）

从php运行它就是这样......然后由你​​来检查插入之间的竞争，但理论上mysql应该可以很好地处理它......

# sql-server - BCP 是否在插入时维护订单

> ID：10842854
> 
> 赞同：0
> 
> 时间：2012-06-01T00:08:15.840
> 
> 标签：sql-server, bcp

如果我对 BCP 进行查询，当我使用 bcp 插入新表时是否保持顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:20:29.723

根据bcp.exe提示的[文档：](http://msdn.microsoft.com/en-us/library/ms162802.aspx)`ORDER`

> 如果要导入的数据根据​​表上的聚集索引（如果有）进行排序，则可以提高批量导入性能。如果数据文件以不同的顺序排序，即不是聚集索引键的顺序，或者如果表上没有聚集索引，则忽略 ORDER 子句。提供的列名必须是目标表中的有效列名。默认情况下，bcp 假定数据文件是无序的。对于优化的批量导入，SQL Server 还会验证导入的数据是否已排序。

您可能还应该阅读有关优化批量导入性能的[文档。](http://msdn.microsoft.com/en-us/library/ms190421%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:22:52.343

仅当两个表具有相同的聚集索引时。

当您从新表中选择并期望订单时，您必须使用 order by 子句。否则大多数时候它似乎工作正常。

# xml - Xalan 扩展转义的文本节点内容

> ID：10842856
> 
> 赞同：0
> 
> 时间：2012-06-01T00:08:17.907
> 
> 标签：xml, xslt, xslt-1.0, xalan

我有一个返回 DocumentFragment 的 Xalan Java 扩展。

在我的 XSLT 中，我使用以下内容调用它：

```
<xsl:copy-of select="java:org.foo.myMethod($a, $b)"  /> 
```

问题是文档片段包含一个包含实体的文本节点，例如“ ”，它被插入为 &#160;

请注意，我确实需要返回 DocumentFragment，而不是字符串，因为该文本节点只是返回的 XML 树的一部分。

***我正在解决***这个问题，如下所示：

在**Java**代码中：

```
Element amp = document.createElement("amp");
xhtmlBlock.appendChild(amp);
Text t = document.createTextNode("#160;");
amp.appendChild(t); 
```

在**XSLT**中：

```
<xsl:apply-templates select="java:org.foo.myMethod($a, $b)" mode="amp-workaround" />    

<xsl:template match="@*|node()" mode="amp-workaround">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" mode="amp-workaround" />
    </xsl:copy>
</xsl:template>

<xsl:template match="amp" mode="amp-workaround">
    <xsl:text disable-output-escaping="yes">&amp;</xsl:text><xsl:value-of select="."/>
</xsl:template> 
```

请注意：此解决方法仅在某些情况下有效，我仍在尝试确定。

这是 Xalan 2.7.1 中的一个已知问题吗？

有没有更好的方法（仍然使用返回 DocumentFragment 的 Java 扩展）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:11:55.627

我不是特别了解 Xalan，但在我看来，您的 Java 代码不是在创建包含实体或字符引用的文本节点，而是在创建包含字符（&、#、1、6、0）的文本节点, ;)。

在返回的字符串中包含字符 160 不是最简单的吗：

```
Text t = document.createTextNode((char)160 + ""); 
```

# c++ - C++ 散列：开放寻址和链接

> ID：10842866
> 
> 赞同：2
> 
> 时间：2012-06-01T00:08:57.830
> 
> 标签：c++, hash, chaining, addressing

对于链接：

有人可以向我解释这个概念并提供一个理论示例和一个简单的代码吗？

我得到了“每个表位置都指向散列到该位置的项目的链表（链）”的想法，但我似乎无法说明实际发生了什么。

假设我们有 h(x)（散列函数）= x/10 mod 5。现在散列 12540、51288、90100、41233、54991、45329、14236，会是什么样子？

对于开放寻址（线性探测、二次探测和每个 R 位置的探测），有人也可以向我解释一下吗？我试着用谷歌搜索，但我似乎更困惑了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:38:47.973

链接可能是最明显的散列形式。哈希表实际上是一个最初为空的链表数组。通过在项目的计算表索引处将新节点添加到链表来插入项目。如果发生冲突，则将新节点链接到链表的前一个尾节点。（实际上，实现可以对列表中的项目进行排序，但让我们保持简单）。这种模式的一个优点是哈希表永远不会“满”，一个缺点是你经常在内存中跳转，你的 CPU 缓存会讨厌你。

开放寻址试图利用散列表可能是稀疏填充的事实（条目之间的大间隙）。哈希表是一个项目数组。如果发生冲突，算法不会将项目添加到该位置的当前项目的末尾，而是在哈希表中搜索下一个空白空间。但是，这意味着您不能仅依靠哈希码来查看项目是否存在，如果哈希码匹配，您还必须比较内容。“探测”是算法在尝试找到下一个空闲槽时遵循的策略。一个问题是表可能会变满，即不再有空槽。在这种情况下，需要调整表的大小并更改散列函数以考虑新的大小。表中的所有现有项目也必须重新插入，因为一旦更改散列函数，它们的散列码将不再具有相同的值。可能还要等一下。

这是一个哈希表的[Java 动画](http://groups.engin.umd.umich.edu/CIS/course.des/cis350/hashing/WEB/HashApplet.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T00:19:46.507

因为你做了 mod 5，你的桌子会有 5 个位置

位置 0：90100

因为结果`90100/10 mod 5`是 0

出于同样的原因，您有：

位置 1：无

位置2：45329

位置3：51288->41233->14236

位置 4：12540->54991

[你可以在维基百科](http://en.wikipedia.org/wiki/Hash_function)上查看更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T02:12:55.117

在开放寻址中，我们必须使用任何技术将元素存储在表中（负载因子小于等于一）。

但是在链接哈希表的情况下只存储 Linklist 的头指针，因此负载因子可以大于一。

# sql - ActiveRecord 删除...？

> ID：10842869
> 
> 赞同：0
> 
> 时间：2012-06-01T00:09:07.083
> 
> 标签：sql, ruby, sqlite, activerecord, ruby-1.9.3

我刚刚开始学习 ActiveRecord，我只是在尝试一些小事情来弄清楚一切是如何工作的。我刚刚在以下 sqlite3 数据库上尝试了以下代码。

红宝石：

```
class Balances < ActiveRecord::Base
  def initialize
    @balance = 50
    update_attribute(:balance, @balance)
  end
  def withdraw amount
    update_attribute(:balance, @balance-amount)
  end
end 
```

SQL：

```
CREATE TABLE balance(
    balance 50
); 
```

当我写：

```
balance = Balances.new 
```

我得到：

```
NoMethodError: undefined method `delete' for nil:NilClass
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/attribute_methods/write.rb:28:in `write_attribute'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/attribute_methods/dirty.rb:67:in `write_attribute'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/attribute_methods/write.rb:14:in `balance='
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/persistence.rb:180:in `update_attribute' 
```

为什么是这样？难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:14:18.010

我注意到几件事：

*   类名应该是`Balance`（大写，单数）。数据库中的表名将是小写复数。例如，`balances`
*   不要`initialize`为 ActiveRecord 模型定义方法。而是使用`after_initialize`回调。[一个帖子](http://blog.dalethatcher.com/2008/03/rails-dont-override-initialize-on.html)。此外，[Rails 文档。](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

**另外**，模型的文件名应该是`balance.rb`（小写，单数）

**添加了更多**您可能不想在每次初始化记录实例时将记录的余额更改回 50。- 这就是您的示例当前正在做的事情。如果要将数据库中新记录的期初余额设置为 50，则使用“before_create”回调。

请记住，ActiveRecord 模型类与底层数据库中的记录相关联，但与之不同。例如，您可以创建一个 ActiveRecord 模型的实例，然后**不在**数据库中创建匹配的记录。-- 只有在调用 save 或 create 方法时才会创建数据库记录。

# vb.net - Xna 可滚动视图

> ID：10842872
> 
> 赞同：0
> 
> 时间：2012-06-01T00:09:38.760
> 
> 标签：vb.net, xna

如何制作可滚动的地图。例如，我首选的后台缓冲区是 800x600，而地图是 2400x1800（大约 3x3）。另外，我如何处理键盘状态以滚动和行走。我知道大多数游戏都以玩家为中心并滚动世界。这种方法的问题是角落。会有很大的不可移动区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:31:09.603

要制作可滚动地图，您可以使用简单的 Rectangle 或 ViewPort（命名相机）：

```
' Initialize camera with size of game viewport
Dim viewport As Viewport = spriteBatch.GraphicsDevice.Viewport
Dim camera As New Rectangle(viewport.X, viewport.Y, viewport.Width, viewport.Height)

' Draw method code
spriteBatch.Begin()
spriteBatch.Draw(image, 
    New Rectangle(0, 0, viewport.Width, viewport.Height),   // Destination rectangle
    camera,                                                 // Source rectangle
    Color.White)
spriteBatch.End() 
```

通过更改 camera.X 和 camera.Y 值，您可以调整绘制图像的原点，从而移动相机。例如，以下代码会将您的相机向右移动：

```
Dim keyboardState As KeyboardState = Keyboard.GetState()

If keyboardState.IsKeyDown(Keys.Right) Then
    camera.X += 1
End If 
```

步行可以非常相似地完成，通过在按下相应按钮时增加字符位置 X 和 Y 坐标。

将玩家保持在屏幕中央有点棘手。基本上，您希望始终将角色保持在屏幕的中心，除非它与世界边缘之间的距离小于屏幕的一半。在这种情况下，停止移动相机并开始将角色从中心移动到所需的一侧。

# javascript - 如何删除播放列表中先前选择的视频的突出显示？

> ID：10842874
> 
> 赞同：2
> 
> 时间：2012-06-01T00:10:13.853
> 
> 标签：javascript, html5-video, playlist

我在 HTML 中创建了一个视频播放列表，视频播放，但是当您选择另一个视频时，前一个视频保持突出显示，我希望在单击另一个视频名称后删除突出显示。[http://www.evamagnus.com/OurServices.php](http://www.evamagnus.com/OurServices.php) 在video.js代码中，我有

```
var position = 0;
var playlist;
var video;

window.onload = function() {
    video = document.getElementById('video');
    addClickHandlers();
    video.src = "video/" + getFormatExtension();
    video.load();
    video.play();
}

function addClickHandlers() {
    var liElements = document.querySelectorAll("ul#videolist li");
    for (var i = 0; i < liElements.length; i++) {
        var li = liElements[i];
        li.onclick = handleVideoSelection;
    }
}

function handleVideoSelection(e) {
    console.log(e);
    var li = e.target;
    var src = li.getAttribute("data-src");
    var isSelected = li.getAttribute("class");
    if (isSelected == "selected") {
        if (video.paused) {
            video.play();
        }
        else if (video.ended) {
            video.load();
            video.play();
        }
        else {
            video.pause();
        }
    }
    else {
        li.setAttribute("class", "selected");
        video.src = src + getFormatExtension();
        video.load();
        video.play();
    }
}

function getFormatExtension() {
    if (video.canPlayType("video/mp4") != "") {
        return ".mp4";
    } else if (video.canPlayType("video/ogg") != "") {
        return ".ogg";
    } else if (video.canPlayType("video/webm") != "") {
        return ".webm";
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:05:02.943

由于您使用的是 jQuery，因此您应该能够用这个替换 video.js 文件中的所有代码...

```
var video = document.getElementById('video');
var ext = getFormatExtension();  // only need to get the extension once

$("ul#videolist li").click(function(e){
    video.src = e.target.getAttribute("data-src") + ext;
    video.load();
    video.play();

    // 1 - clear them all
    $("ul#videolist li").removeClass();

    // 2 - set the clicked one
    e.target.setAttribute("class", "selected");
});

function getFormatExtension() {
    if (video.canPlayType("video/mp4") != "") {
        return ".mp4";
    } else if (video.canPlayType("video/ogg") != "") {
        return ".ogg";
    } else if (video.canPlayType("video/webm") != "") {
        return ".webm";
    }
} 
```

这是一个在线示例，其中包含几个 css 增强功能，有助于显示它们是带有指针光标和悬停 bg 的按钮。添加了按钮边框和渐变 css 样式。

[http://jsfiddle.net/DaveAlger/AQYjY/8/](http://jsfiddle.net/DaveAlger/AQYjY/8/)

希望这对您有用（请务必将问题标记为已回答）

# xslt - 如果父项没有匹配的子项，则 XSLT 选择节点

> ID：10842875
> 
> 赞同：2
> 
> 时间：2012-06-01T00:10:17.037
> 
> 标签：xslt, xpath, unique, tablerow

我有一个 xml 的源代码：

```
 <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="2" class="OddLegacy">
            <TableCell>
                <Paragraph>10.140.50.50</Paragraph></TableCell>
            <TableCell>
                <Paragraph>Sun Solaris 8</Paragraph></TableCell>
            <TableCell>
                <Paragraph>53.1</Paragraph></TableCell>
            <TableCell>
                <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                    <ListItem>opusone.dal.veritas.com</ListItem>
                    <ListItem>OPUSONE</ListItem></UnorderedList></TableCell></TableRow>
        <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="3" class="Even">
            <TableCell>
                <Paragraph>10.140.50.163</Paragraph></TableCell>
            <TableCell>
                <Paragraph>Sun Solaris 8</Paragraph></TableCell>
            <TableCell>
                <Paragraph>53.0</Paragraph></TableCell>
            <TableCell>
                <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                    <ListItem>dns1.dal.veritas.com</ListItem>
                    <ListItem>opusone.dal.veritas.com</ListItem></UnorderedList></TableCell></TableRow>
        <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="4" class="OddLegacy">
            <TableCell>
                <Paragraph>10.140.50.82</Paragraph></TableCell>
            <TableCell>
                <Paragraph>HP-UX 870849686</Paragraph></TableCell>
            <TableCell>
                <Paragraph>31.4</Paragraph></TableCell>
            <TableCell>
                <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                    <ListItem>unknown</ListItem>
                    <ListItem>testarossa.dal.veritas.com</ListItem></UnorderedList></TableCell></TableRow>
        <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="5" class="Even">
            <TableCell>
                <Paragraph>10.140.50.71</Paragraph></TableCell>
            <TableCell>
                <Paragraph>Microsoft Windows Server 2008 R2, Enterprise Edition</Paragraph></TableCell>
            <TableCell>
                <Paragraph>30.5</Paragraph></TableCell>
            <TableCell>
                <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                    <ListItem>EVSERV1.evexample.local</ListItem>
                    <ListItem>EVSERV1</ListItem></UnorderedList></TableCell></TableRow> 
```

如果操作系统（Microsoft Windows Server 2008 R2，企业版）是唯一的，我需要为源中的每一行输出一个表行。到目前为止，我有：

```
 <xsl:for-each select="Table/TableRow[TableCell[2]/Paragraph[not(preceding-sibling::TableCell[2]/Paragraph)]]">

                    <xsl:sort select="TableCell[2]/Paragraph"/>
                        <xsl:variable name="newosname" select="TableCell[2]/Paragraph"/>
                        <xsl:variable name="oscount" select="count(parent::Table/TableRow[TableCell/Paragraph = $newosname])"/>
                        <tr>
                            <td>
                                <xsl:value-of select="$newosname"/>
                                <xsl:value-of select ="TableCell[2]/Paragraph[not(preceding::TableCell[2]/Paragraph)]"/>
                            </td>
                            <td>
                                <xsl:value-of select="$oscount"/>
                            </td>
                        </tr>
                </xsl:for-each> 
```

请注意，前面的非测试只是我在尝试测试轴'。

预期产出

```
<tr>
<td>Sun Solaris 8</td>
<td>2</td>
</tr>
<tr>
<td>HP-UX 870849686</td>
<td>1</td>
</tr>
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T03:33:26.183

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kRowByOs" match="TableRow"
  use="TableCell[2]/Paragraph"/>

 <xsl:template match=
  "TableRow
     [generate-id()
     =
      generate-id(key('kRowByOs', TableCell[2]/Paragraph)[1])
     ]">
  <tr>
   <td><xsl:value-of select="TableCell[2]/Paragraph"/></td>
   <td><xsl:value-of select=
    "count(key('kRowByOs', TableCell[2]/Paragraph))"/></td>
  </tr>
  </xsl:template>

  <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（提供的片段包装在单个顶部元素中）：

```
<t>
            <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="2" class="OddLegacy">
                <TableCell>
                    <Paragraph>10.140.50.50</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>Sun Solaris 8</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>53.1</Paragraph></TableCell>
                <TableCell>
                    <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                        <ListItem>opusone.dal.veritas.com</ListItem>
                        <ListItem>OPUSONE</ListItem></UnorderedList></TableCell></TableRow>
            <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="3" class="Even">
                <TableCell>
                    <Paragraph>10.140.50.163</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>Sun Solaris 8</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>53.0</Paragraph></TableCell>
                <TableCell>
                    <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                        <ListItem>dns1.dal.veritas.com</ListItem>
                        <ListItem>opusone.dal.veritas.com</ListItem></UnorderedList></TableCell></TableRow>
            <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="4" class="OddLegacy">
                <TableCell>
                    <Paragraph>10.140.50.82</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>HP-UX 870849686</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>31.4</Paragraph></TableCell>
                <TableCell>
                    <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                        <ListItem>unknown</ListItem>
                        <ListItem>testarossa.dal.veritas.com</ListItem></UnorderedList></TableCell></TableRow>
            <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="5" class="Even">
                <TableCell>
                    <Paragraph>10.140.50.71</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>Microsoft Windows Server 2008 R2, Enterprise Edition</Paragraph></TableCell>
                <TableCell>
                    <Paragraph>30.5</Paragraph></TableCell>
                <TableCell>
                    <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
                        <ListItem>EVSERV1.evexample.local</ListItem>
                        <ListItem>EVSERV1</ListItem></UnorderedList></TableCell></TableRow>
</t> 
```

**产生想要的正确结果：**

```
<tr>
   <td>Sun Solaris 8</td>
   <td>2</td>
</tr>
<tr>
   <td>HP-UX 870849686</td>
   <td>1</td>
</tr>
<tr>
   <td>Microsoft Windows Server 2008 R2, Enterprise Edition</td>
   <td>1</td>
</tr> 
```

**说明**：

正确使用**[Muenchian 方法进行分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T01:08:14.413

以下模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output indent="yes"/>
    <xsl:template match="/">
        <xsl:variable name="oss" as="xs:string+">
            <xsl:sequence select="distinct-values( Table/TableRow/TableCell[2]/Paragraph/text() )"/>
        </xsl:variable>
        <xsl:variable name="table" select="Table/TableRow"/>
        <xsl:for-each select="$oss">
            <xsl:sort select="."/>
            <tr>
                <td>
                    <xsl:value-of select="."/>
                </td>
                <td>
                    <xsl:value-of select="count($table[TableCell[2]/Paragraph/text() = current()])"/>
                </td>
            </tr>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

应用于提供的输入 XML 会给出以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<tr>
    <td>HP-UX 870849686</td>
    <td>1</td>
</tr>
<tr>
    <td>Microsoft Windows Server 2008 R2, Enterprise Edition</td>
    <td>1</td>
</tr>
<tr>
    <td>Sun Solaris 8</td>
    <td>2</td>
</tr> 
```

# php - PHP Excel 使用 PHP 变量选择条件格式区域

> ID：10842876
> 
> 赞同：1
> 
> 时间：2012-06-01T00:10:18.327
> 
> 标签：php, mysql, phpexcel

我有一个带有 2 个工作表的 phpexcel 页面，其中一个使用条件格式并将数据从数据库中拉出，我想使用行号来选择放置条件格式的距离，所以我有这个变量它会自动递增以将数据放入每一行

```
$rownumber++ 
```

然后我有这段代码

```
$objPHPExcel->getActiveSheet()->duplicateConditionalStyle(
                $objPHPExcel->getActiveSheet()->getStyle('I2')->getConditionalStyles(),
                'I2:K4'
            ); 
```

我想要做的是它有 I2:K4 我希望它是这样的

I2:K$行号

所以使用自动增加的行号来知道将条件格式放置多远，但我试图让这样的东西为我工作没有成功，所以如果有人知道如何做到这一点，请我需要一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:05:41.423

range 参数只是一个标准的 PHP 字符串，因此您可以使用标准的 PHP 字符串连接，例如 'I2:K'.$rownumber

```
$objPHPExcel->getActiveSheet()->duplicateConditionalStyle( 
                $objPHPExcel->getActiveSheet()->getStyle('I2')->getConditionalStyles(), 
                'I2:K'.$rownumber  
            ); 
```

# c++ - Visual Studio 2012 中的 C++ 编译错误：LPCWSTR 和 wstring

> ID：10842878
> 
> 赞同：6
> 
> 时间：2012-06-01T00:10:26.510
> 
> 标签：c++, visual-studio-2010, visual-c++, wstring, visual-studio-2012

以下代码在 Visual Studio 2010 中编译，但在 Visual Studio 2012 RC 中编译失败。

```
#include <string>

// Windows stuffs
typedef __nullterminated const wchar_t *LPCWSTR;

class CTestObj {
public:
    CTestObj() {m_tmp = L"default";};

    operator LPCWSTR()  { return m_tmp.c_str(); }       // returns const wchar_t*
    operator std::wstring() const { return m_tmp; }     // returns std::wstring

protected:
    std::wstring m_tmp;
};

int _tmain(int argc, _TCHAR* argv[])
{
    CTestObj x;
    std::wstring strval = (std::wstring) x;

    return 0;
} 
```

返回的错误是：

> 错误 C2440：“类型转换”：无法转换`'CTestObj'`为`'std::wstring'`
> 没有构造函数可以采用源类型，或者构造函数重载决议不明确

我已经意识到注释掉任何一个转换运算符都可以解决编译问题。我只想明白：

1.  *是什么*导致了这个
2.  *为什么*这在 VS2010 中编译而不在 VS2012 中编译？是因为 C++11 的变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:15:30.647

如果我理解幕后的逻辑，则运算符重载会在每次转换时尝试复制代码和对象。因此，您需要将[其作为引用返回，](http://www.learncpp.com/cpp-tutorial/74a-returning-values-by-value-reference-and-address/)而不是尝试基于该字段返回新对象。该行：

```
operator std::wstring() const { return m_tmp; } 
```

应该：

```
operator std::wstring&() { return m_tmp; } 
```

以下编译并按预期运行。

```
#include <string>

// Windows stuffs
typedef __nullterminated const wchar_t *LPCWSTR;

class CTestObj {
public:
    CTestObj() {m_tmp = L"default";};

    operator LPCWSTR()  { return m_tmp.c_str(); }       // returns const wchar_t*
    operator std::wstring&() { return m_tmp; }     // returns std::wstring

protected:
    std::wstring m_tmp;
};

int main()
{
    CTestObj x;
    std::wstring strval = (std::wstring) x;
    wprintf(L"%s\n", strval.c_str());

    return 0;
} 
```

# jquery - 在 iPhone 应用程序的 UIWebView 中的 iFrame 中显示网站的问题？

> ID：10842879
> 
> 赞同：1
> 
> 时间：2012-06-01T00:10:30.497
> 
> 标签：jquery, iphone, ios, xcode, jquery-mobile

我们不想使用 PhoneGap 或类似的框架，而是希望使用 UIWebView 在 iPhone 上的本机 shell 中显示 jQuery Mobile 站点。

我们不需要访问硬件，本质上是为 iPhone App Store 打包一个移动站点。

有没有人遇到过或看到过这种方法的问题（例如，显示嵌入式视频）？

有没有人有关于这样做的最佳实践的参考或代码示例？

我们在 Xcode 4.2 上。

谢谢！

# php - 在服务器上的 PHP 中设置权限

> ID：10842880
> 
> 赞同：1
> 
> 时间：2012-06-01T00:10:36.917
> 
> 标签：php, file, upload, permissions

我正在尝试在 php 中创建一个非常简单的网页，让人们将图像上传到我服务器上的文件夹。我使用一些已完成的代码使这变得非常简单，并且它在我的计算机上使用 xampp 运行得非常好，但是当我将页面上传到我的服务器时，每次上传任何内容时都会收到一条错误消息。错误是当脚本检查图像是否已上传时，它说

```
$copied = copy($_FILES['image']['tmp_name'], $newname);
if(!$copied)
   echo "error"; 
```

这让我相信权限有问题。但是我该如何设置呢？我应该把它设置成什么？我只需要其他人能够将图像上传到特定文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:14:47.417

Web 服务器需要写入权限才能写入您存储图像的目录。

假设你在Linux服务器上，切换`/path/to/uploaded/images`到图片上传目录后，在服务器（ssh）上运行以下命令，看看是否能解决问题：

```
chmod 777 /path/to/uploaded/images 
```

如果这样可以解决问题，您可能可以将权限放宽到以下内容：

```
chmod 664 /path/to/uploaded/images 
```

这些是目录权限的基本命令，您可以在[本教程](https://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions)中了解有关 Linux 上文件权限的更多信息。

或者，您可以使用[`move_uploaded_file()`](http://us3.php.net/move_uploaded_file)将上传的文件复制到已知位置。

# c++ - 如何重载运算符 =

> ID：10842883
> 
> 赞同：0
> 
> 时间：2012-06-01T00:11:34.133
> 
> 标签：c++, operator-overloading

我试图将赋值运算符重载为成员函数，以将字符串作为参数并将其值分配给`A`当前对象。我在下面的评论中发布了错误。

有人可以告诉我我做错了什么吗？我认为它与参数有关，可能与定义中的代码有关。

我不确定我是否正确地声明了它，但我是这样声明的：

```
WORD operator=(const string& other); 
```

我这样定义它：

```
WORD WORD::operator=(const string& other) //<---not sure if I did the parameters Correctly
{
(*this) = other;
return (*this);
} 
```

如果有帮助，这是整个文件：

```
#include <iostream>

using namespace std;

#pragma once

class alpha_numeric //node
{
   public:
char symbol; //data in node
alpha_numeric *next;//points to next node
};

class WORD
{
   public:
      WORD() : front(0) {length=0;}; //front of list initially set to Null
      WORD(const WORD& other);
      bool IsEmpty();
      int Length();
      void Insert(WORD bword, int position);
      WORD operator=(const string& other); 

   private:
      alpha_numeric *front; //points to the front node of a list
      int length;
};

WORD WORD::operator=(const string& other) //<---not sure if I did the parameters Correctly
{
      (*this) = other;
      return (*this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:27:49.817

错误消息来自链接器；它告诉你它找到了同一个函数的多个定义。这是因为您在头文件中定义了函数，该文件已包含在多个源文件中，因此您最终得到了函数的多个定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:19:25.727

好的 2 件事：

首先，您缺少复制构造函数的定义，因此无法编译。在您的班级中尝试此操作（仅显示部分实现）：

```
WORD(const WORD& other)
: length(other.length)
{
    // Construct me !
} 
```

其次，您的赋值运算符是正确的，但在所有控制路径上都是递归的。例如，它无限期地调用自己。您可能希望在方法内分配成员（同样，仅显示部分实现）：

```
WORD WORD::operator=(const string& other)
{
    // Only copy the length, the rest is to be filled
    this.length = other.length;
    return (*this);
} 
```

最后，正如其他人指出的那样，您的可执行文件中有多个相同符号的定义。要解决这个问题，您必须确保您的标头仅包含一次（#pragma once 应该负责这一点），而且还将所有实现细节从头文件移至源文件。例如，将 WORD WORD::operator=(const string& other) 的定义移动到 CPP 文件中。

# mysql - 值在范围内时的mysql分组

> ID：10842885
> 
> 赞同：3
> 
> 时间：2012-06-01T00:12:03.147
> 
> 标签：mysql

我搜索了高低，似乎找不到任何关于如何处理我的查询的信息。如果我问了一个愚蠢的问题，我提前道歉，但我真的需要一些帮助。

我有一系列以不同间隔记录的值。数据如下所示：

```
 timeStamp           | RPM 
 2012-05-01 01:02:56 | 802
 2012-05-01 01:03:45 | 845
 2012-05-01 01:04:50 | 825
 2012-05-01 01:05:55 | 810
 2012-05-01 01:07:00 | 1000
 2012-05-01 01:08:03 | 1005
 2012-05-01 01:09:05 | 1145
 2012-05-01 01:10:15 | 1110
 2012-05-01 01:11:20 | 800
 2012-05-01 01:12:22 | 812
 2012-05-01 01:13:20 | 820
 2012-05-01 01:14:20 | 820
 2012-05-01 01:15:20 | 1200 
```

示例中的 RPM 是发动机 RPM。

当 RPM 在 800-900 范围内时，我需要开始和结束时间戳，因为这被认为是发动机空转。我还希望能够返回每个非空闲时段的开始和结束时间。

我试图得到的结果是这样的：

```
Period    | startTime           | endTime             | duration 
 Idle1    | 2012-05-01 01:02:56 | 2012-05-01 01:05:55 | 179 seconds 
 nonIdle1 | 2012-05-01 01:07:00 | 2012-05-01 01:10:15 | 195 seconds 
 idle2    | 2012-05-01 01:11:20 | 2012-05-01 01:14:20 | 180 seconds 
```

我提前感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T01:12:14.697

试试这个：[http ://www.sqlfiddle.com/#!2/e9372/1](http://www.sqlfiddle.com/#!2/e9372/1)

在 DB 端执行此操作的优势在于，您不仅可以在 PHP 上使用查询，还可以在 Java、C#、Python 等上使用它。而且在 DB 端执行速度很快

```
select 
  if(idle_state = 1, 
       concat('Idle ', idle_count), 
       concat('NonIdle ', non_idle_count) ) as Period,
  startTime, endTime, duration
from
(

  select 

    @idle_count := @idle_count + if(idle_state = 1,1,0) as idle_count,
    @non_idle_count := @non_idle_count +if(idle_state = 0,1,0) as non_idle_count,

    state_group, idle_state,
    min(timeStamp) as startTime, max(timeStamp) as endTime,
    timestampdiff(second, min(timeStamp), max(timeStamp)) as duration
  from
  (
    select *,        
      @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
      @state_group := @state_group + 
                      if(@idle_state = @prev_state,0,1) as state_group,
      @prev_state := @idle_state
    from (tbl, (select @state_group := 0 as y) as vars)
    order by tbl.timeStamp
  ) as x
  ,(select @idle_count := 0 as y, @non_idle_count := 0 as z) as vars
  group by state_group, idle_state

) as summary 
```

输出：

```
|    PERIOD |                  STARTTIME |                    ENDTIME | DURATION |
|-----------|----------------------------|----------------------------|----------|
|    Idle 1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
| NonIdle 1 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|    Idle 2 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
| NonIdle 2 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!2/e9372/1](http://www.sqlfiddle.com/#!2/e9372/1)

* * *

## 这个怎么运作：

五步。

首先，将空闲与非空闲分开：

```
select *,
  @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state
from (tbl, (select @state_group := 0 as y) as vars)
order by tbl.timeStamp; 
```

输出：

```
|                  TIMESTAMP |  RPM | Y | IDLE_STATE |
|----------------------------|------|---|------------|
| May, 01 2012 01:02:56-0700 |  802 | 0 |          1 |
| May, 01 2012 01:03:45-0700 |  845 | 0 |          1 |
| May, 01 2012 01:04:50-0700 |  825 | 0 |          1 |
| May, 01 2012 01:05:55-0700 |  810 | 0 |          1 |
| May, 01 2012 01:07:00-0700 | 1000 | 0 |          0 |
| May, 01 2012 01:08:03-0700 | 1005 | 0 |          0 |
| May, 01 2012 01:09:05-0700 | 1145 | 0 |          0 |
| May, 01 2012 01:10:15-0700 | 1110 | 0 |          0 |
| May, 01 2012 01:11:20-0700 |  800 | 0 |          1 |
| May, 01 2012 01:12:22-0700 |  812 | 0 |          1 |
| May, 01 2012 01:13:20-0700 |  820 | 0 |          1 |
| May, 01 2012 01:14:20-0700 |  820 | 0 |          1 |
| May, 01 2012 01:15:20-0700 | 1200 | 0 |          0 | 
```

其次，将更改分组：

```
select *,  
  @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
  @state_group := @state_group + 
                  if(@idle_state = @prev_state,0,1) as state_group,
  @prev_state := @idle_state

from (tbl, (select @state_group := 0 as y) as vars)
order by tbl.timeStamp; 
```

输出：

```
|                  TIMESTAMP |  RPM | Y | IDLE_STATE | STATE_GROUP | @PREV_STATE := @IDLE_STATE |
|----------------------------|------|---|------------|-------------|----------------------------|
| May, 01 2012 01:02:56-0700 |  802 | 0 |          1 |           1 |                          1 |
| May, 01 2012 01:03:45-0700 |  845 | 0 |          1 |           1 |                          1 |
| May, 01 2012 01:04:50-0700 |  825 | 0 |          1 |           1 |                          1 |
| May, 01 2012 01:05:55-0700 |  810 | 0 |          1 |           1 |                          1 |
| May, 01 2012 01:07:00-0700 | 1000 | 0 |          0 |           2 |                          0 |
| May, 01 2012 01:08:03-0700 | 1005 | 0 |          0 |           2 |                          0 |
| May, 01 2012 01:09:05-0700 | 1145 | 0 |          0 |           2 |                          0 |
| May, 01 2012 01:10:15-0700 | 1110 | 0 |          0 |           2 |                          0 |
| May, 01 2012 01:11:20-0700 |  800 | 0 |          1 |           3 |                          1 |
| May, 01 2012 01:12:22-0700 |  812 | 0 |          1 |           3 |                          1 |
| May, 01 2012 01:13:20-0700 |  820 | 0 |          1 |           3 |                          1 |
| May, 01 2012 01:14:20-0700 |  820 | 0 |          1 |           3 |                          1 |
| May, 01 2012 01:15:20-0700 | 1200 | 0 |          0 |           4 |                          0 | 
```

第三，将它们分组，并计算持续时间：

```
select 
  state_group, idle_state,
  min(timeStamp) as startTime, max(timeStamp) as endTime,
  timestampdiff(second, min(timeStamp), max(timeStamp)) as duration
from
(
  select *,    
    @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
    @state_group := @state_group + 
                    if(@idle_state = @prev_state,0,1) as state_group,
    @prev_state := @idle_state
  from (tbl, (select @state_group := 0 as y) as vars)
  order by tbl.timeStamp
) as x
group by state_group, idle_state; 
```

输出：

```
| STATE_GROUP | IDLE_STATE |                  STARTTIME |                    ENDTIME | DURATION |
|-------------|------------|----------------------------|----------------------------|----------|
|           1 |          1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
|           2 |          0 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|           3 |          1 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
|           4 |          0 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

四、获取空闲和非空闲计数：

```
select 

  @idle_count := @idle_count + if(idle_state = 1,1,0) as idle_count,
  @non_idle_count := @non_idle_count + if(idle_state = 0,1,0) as non_idle_count,

  state_group, idle_state,
  min(timeStamp) as startTime, max(timeStamp) as endTime,
  timestampdiff(second, min(timeStamp), max(timeStamp)) as duration
from
(
  select *,        
    @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
    @state_group := @state_group + 
                    if(@idle_state = @prev_state,0,1) as state_group,
    @prev_state := @idle_state
  from (tbl, (select @state_group := 0 as y) as vars)
  order by tbl.timeStamp
) as x
,(select @idle_count := 0 as y, @non_idle_count := 0 as z) as vars
group by state_group, idle_state; 
```

输出：

```
| IDLE_COUNT | NON_IDLE_COUNT | STATE_GROUP | IDLE_STATE |                  STARTTIME |                    ENDTIME | DURATION |
|------------|----------------|-------------|------------|----------------------------|----------------------------|----------|
|          1 |              0 |           1 |          1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
|          1 |              1 |           2 |          0 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|          2 |              1 |           3 |          1 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
|          2 |              2 |           4 |          0 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

最后，删除暂存变量：

```
select 
  if(idle_state = 1, 
       concat('Idle ', idle_count), 
       concat('NonIdle ', non_idle_count) ) as Period,
  startTime, endTime, duration
from
(

  select 

    @idle_count := @idle_count + if(idle_state = 1,1,0) as idle_count,
    @non_idle_count := @non_idle_count +if(idle_state = 0,1,0) as non_idle_count,

    state_group, idle_state,
    min(timeStamp) as startTime, max(timeStamp) as endTime,
    timestampdiff(second, min(timeStamp), max(timeStamp)) as duration
  from
  (
    select *,        
      @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
      @state_group := @state_group + 
                      if(@idle_state = @prev_state,0,1) as state_group,
      @prev_state := @idle_state
    from (tbl, (select @state_group := 0 as y) as vars)
    order by tbl.timeStamp
  ) as x
  ,(select @idle_count := 0 as y, @non_idle_count := 0 as z) as vars
  group by state_group, idle_state

) as summary 
```

输出：

```
|    PERIOD |                  STARTTIME |                    ENDTIME | DURATION |
|-----------|----------------------------|----------------------------|----------|
|    Idle 1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
| NonIdle 1 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|    Idle 2 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
| NonIdle 2 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!2/e9372/1](http://www.sqlfiddle.com/#!2/e9372/1)

* * *

**更新**

查询可以缩短[http://www.sqlfiddle.com/#!2/418cb/1](http://www.sqlfiddle.com/#!2/418cb/1)

如果您注意到，期间编号只是串联出现（空闲-非空闲、空闲-非空闲等）。你可以这样做：

```
select 

  case when idle_state then
     concat('Idle ', @rn := @rn + 1) 
  else
     concat('Non-idle ', @rn )
  end as Period,

  min(timeStamp) as startTime, max(timeStamp) as endTime,

  timestampdiff(second, min(timeStamp), max(timeStamp)) as duration

from
(
  select *,        
  @idle_state := if(rpm between 800 and 900, 1, 0) as idle_state,
  @state_group := @state_group + if(@idle_state = @prev_state,0,1) as state_group,
  @prev_state := @idle_state
  from (tbl, (select @state_group := 0 as y) as vars)
  order by tbl.timeStamp
) as x,
(select @rn := 0) as rx
group by state_group, idle_state 
```

输出：

```
|     PERIOD |                  STARTTIME |                    ENDTIME | DURATION |
|------------|----------------------------|----------------------------|----------|
|     Idle 1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
| Non-idle 1 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|     Idle 2 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
| Non-idle 2 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T04:04:39.793

这适用于所有支持窗口的 RDBMS。[http://www.sqlfiddle.com/#!1/320e4/1](http://www.sqlfiddle.com/#!1/320e4/1)

虽然每个 RDBMS 的时间提取有所不同

```
with a as
(
  select *, (rpm between 800 and 900) as idle_state,
        case when 
            (rpm between 800 and 900) =
            (lag(rpm) over(order by timestamp) between 800 and 900) then 0
        else 
            1
        end as detect_leader
  from tbl   
)
,grp as
(
  select *, sum(detect_leader) over(order by timeStamp) as state_group
  from a
)
,rn as 
(
  select state_group, idle_state,

    min(timeStamp) as startTime, max(timeStamp) as endTime,  
    extract(epoch from ( max(timeStamp) - min(timeStamp) ) ) as duration

  from grp
  group by state_group, idle_state
  order by state_group
)
select 
   case when idle_state then 'Idle ' else 'Non-idle ' end 
      || (row_number() over(order by state_group) + 1) / 2  as Period,

   rn.startTime, rn.endTime, rn.duration
from rn; 
```

输出：

```
|     PERIOD |                  STARTTIME |                    ENDTIME | DURATION |
|------------|----------------------------|----------------------------|----------|
|     Idle 1 | May, 01 2012 01:02:56-0700 | May, 01 2012 01:05:55-0700 |      179 |
| Non-idle 1 | May, 01 2012 01:07:00-0700 | May, 01 2012 01:10:15-0700 |      195 |
|     Idle 2 | May, 01 2012 01:11:20-0700 | May, 01 2012 01:14:20-0700 |      180 |
| Non-idle 2 | May, 01 2012 01:15:20-0700 | May, 01 2012 01:15:20-0700 |        0 | 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!1/320e4/1](http://www.sqlfiddle.com/#!1/320e4/1)

# r - 如何使用 R Markdown 或 HTML Sweave 生成 HTML 表格和随附的 CSS？

> ID：10842886
> 
> 赞同：9
> 
> 时间：2012-06-01T00:12:05.667
> 
> 标签：r

我之前问过一个关于[如何在 R 中导出 HTML 表格并控制线条边框](https://stackoverflow.com/q/10774285/180892)的问题。

我习惯了 LaTeX，当您创建表格时，表格的格式很大程度上取决于当时出现的文本和标记。这适用于 Sweave，因为您的 R 代码块可以在该点输出 LaTeX 表格标记。我也知道有类似的工具`xtable`可以为表格生成 HTML 标记。

然而，对 HTML 表格的控制似乎依赖于样式表，样式表是为了出现在文档的标题中，而不是在放置 R 代码块的位置。当然，我可以只将内容放在样式表中，但在科学应用程序中，通常会有一些非常具体的表格格式，在某些方面因表格而异。

因此，我的问题：

*   一般来说，如果输出格式需要在文档中的单独位置创建输出（即标题中表格的 CSS），您如何使用 R Markdown 等文学编程甚至从原始 HTML 格式化 HTML 表格R 代码块放置在哪里（即表本身在正文中）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T07:53:11.263

我可以想出三种方法而不用弄乱你的工具链，它们都有点老套。

1.  只需`<style>`在体内输出右边。这在技术上是无效的，但它可以在任何主流浏览器中正常工作。

2.  发出在运行时创建`<style>`块并将其附加到头部的 JavaScript（[这是](https://stackoverflow.com/a/524721/139922)一种方式）。这在 HTML 源代码和 R 代码中看起来有点粗糙，但它会起作用并且会验证。

3.  使用[范围样式块](http://www.w3schools.com/html5/att_style_scoped.asp)。这正是您正在寻找的，除了 scope 属性是 HTML5 的新属性，并且尚未在任何主要浏览器中实现。但是，如果您将样式基于唯一生成的 ID（即，您的规则是这样编写的，即使它们适用于整个文档也不会弄乱任何东西），我想浏览器只会忽略“作用域”属性和所有内容将正常工作 - 然后这实际上成为选项 1 的一个版本，恰好验证！

（我个人会选择＃3。）

如果您还没有，那么值得在 RStudio 支持论坛上开始讨论这个问题；尽管这不是严格意义上的 RStudio 问题，但我们显然在 R Markdown 中发布报告的端到端方案上做了大量工作，并且很想了解更多关于您的具体示例的信息。表格显然将成为人们使用此报告所做工作的重要组成部分，我们知道这是目前的一个弱点，我们确实希望在未来的版本中解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:36:36.420

另一种方法是使用[pander](https://github.com/daroczig/pander)作为 R 降价后端（对不起这个类似营销的答案，但我确实认为我的`Pandoc.brew`函数可能非常方便）。

它类似于`knitr`（解析/评估 Markdown 格式文件中的 R 命令），但使用`brew`R 代码块的语法（例如`<%...%>`，用于一般 R 代码 - 像循环等以及`<%=...%>`在块中返回结果）。但不同于`brew`as`Pandoc.brew`不仅`cat`会产生代码块，而且会运行我的`pander`通用方法，该方法将（相当多种）R 对象转换为（恕我直言）漂亮的 Pandoc 降价格式。

因此，`Pandoc.brew`在 markdown 格式的文件上运行会产生一个干净的 markdown 文件，其中所有 R 代码块都运行 - 而且您不必处理`xtable`和其他调整（甚至不需要绘图，因为导致图像的所有 R 代码块都呈现为`png`文件并链接在降价文本文件中）。

关于我开始在这里回答的原因：`pander`您可以将特殊选项传递给`pandoc`，例如将自定义 CSS 样式表（或 JS 等）添加到您生成的 HTML 的标题中，请参阅[Pandoc 主页上的](http://johnmacfarlane.net/pandoc/README.html#general-writer-options)详细信息。基于此，您可以轻松添加 CSS 文件，甚至只是添加一堆样式参数。这可以`pander`用`Pandoc.convert`'s来完成`option`。顺便说一句，您甚至不必使用我的分叉`brew`函数，**您可以使用 eg 生成降价文件`knitr`并使用上述函数调用 Pandoc**。

`pander`将一些 CSS/JS 添加到生成的 HTML 文件中，这将生成（恕我直言）非常漂亮的输出，但您可以轻松地对其进行自定义并在那里添加您自己的文件。

例如：默认情况下，你会得到这个基于[这个 markdown的](http://daroczig.github.com/pander/short-code-long-report.md)[HTML 文件](http://daroczig.github.com/pander/short-code-long-report.html)，它是从这个非常**短的**[markdown 语法 brew 文件](https://github.com/daroczig/pander/blob/master/inst/examples/short-code-long-report.brew)中编辑的。顺便说一句，[我的 github 页面](http://daroczig.github.com/pander/)也是由我的 markdown 解析器生成/自动设置样式的。如果您能尝试一下，我将不胜感激：）`Pandoc.brew`

 *** * *

**注意**：要尝试上述调用，您需要`Pandoc`预先安装，还需要*最新*版本的~~两者[`rapport`](http://rapport-package.info/),两者~~ `pander`. 请参阅[安装详细信息](http://daroczig.github.com/pander/#installation_link)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T06:54:38.350

不能完全解决问题的一种选择是使用`gvisTable`：

这是一个基本的 gvisTable：

```
```{r message=FALSE}
# install.packages("googleVis")
library(googleVis)
library(MASS)
data(Animals)
```

```{r results='asis'}
tab1 <- gvisTable(Animals, 
                   options = list(width = 600, height = 650, 
                                  page = "enable",
                                  pageSize = nrow(Animals)))
print(tab1, "chart")
``` 
```

*   `?print.gvis`解释了打印`gvis`对象的一些选项。
*   尤其是 R Markdown 文档需要该`tag="chart"`选项，因为这意味着输出正是对象所需的，而不是默认的完整 HTML 页面。
*   在这里查看这个的[输出和更多内容](http://rpubs.com/jeromyanglim/simple_gvisTable_example)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:47:15.840

好的，希望我现在明白了。你应该设置一些额外的 knitr 选项，如果你愿意，你可以动态地 cat() css。

```
<!DOCTYPE html>
<head>
<style type="text/css">
.greenback {
  background-color: teal;
    color: white;
}
.greenback td {
  border: dotted gray;
}
.bluescreen {
    background-color: blue;
    color: white;
}
.bluescreen td {
  border: thick solid;
  padding:2px;
  margin:2px;
}

</style>
</head>

<body>
<table class="greenback">
<tr><td>Hello</td><td>Mars</td><tr>
<tr><td>World</td><td>Moon</td><tr>
</table>

Could use some xtable code here instead.

<!--begin.rcode
cat('
<table class="bluescreen">
<tr><td>Hello</td><td>Mars</td><tr>
<tr><td>World</td><td>Moon</td><tr>
</table>
')
    end.rcode-->

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T01:03:09.743

Neil Saunders 有一个关于[为使用 RStudio 生成的 HTML 自定义 CSS](http://nsaunders.wordpress.com/2012/08/27/custom-css-for-html-generated-using-rstudio/)的教程。它显示了如何修改内置样式文件并获取此替代文件。**

# ruby-on-rails - rails, view 为 button_to 而不是 link_to 换行

> ID：10842888
> 
> 赞同：3
> 
> 时间：2012-06-01T00:12:19.853
> 
> 标签：ruby-on-rails, ruby, haml, link-to, button-to

```
%p
  %br
  %span.footer_links
    = link_to 'Edit', edit_link_path(@link)
    = link_to 'Edit', edit_link_path(@link)
    = button_to 'Delete', @link, :confirm => 'Are you sure?', :method => :delete
    = button_to 'Delete', @link, :confirm => 'Are you sure?', :method => :delete
    pppppp 
```

在同一行上生成“编辑”链接，但在不同行上删除按钮，例如

```
 edit  edit
      delete
      delete 
```

（每个两个用于强调换行符）

我怎样才能在 1 行上获得以上所有内容，如下所示：

```
edit edit [delete] [delete] 
```

我这样做是因为我需要改变我`link_to, :method => :delete`的`:button_to's`

更新：我在我的 css 中添加`:class => '.btn'`了我的 button_to ，`.btn { display: inline; }`但它没有帮助。

```
<p>
<br/>
<span class="footer_links">
<a href="/links/354/edit">Edit</a>
 | 
</span>
</p>
<form method="post" action="/links/354" class="button_to">
<div>
<input name="_method" type="hidden" value="delete"/>
<input class=".btn" data-confirm="Are you sure?" type="submit" value="Delete"/>
<input name="authenticity_token" type="hidden" value="MvN6K03y5WcqSZRt4Au3zj+xsKhfZ9EEtkf2M7YCGhk="/>
</div>
</form>
<p/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:25:39.363

奇怪，因为`a`生成者`link_to`和`input`生成者`button_to`都应该是内联元素。

不过，这正是 CSS 的用途：将设计细节排除在 HTML 之外。所以你可以有这样的 CSS：

```
.footer_links a, .footer_links input {
  display: inline;
  padding-right: 1em;
} 
```

[有用的编辑 - 也来自 Buck - 您可以使用 :form_class 然后将表单和其中的 div 设置为内联样式。]

# android - 当手机改变方向时，Air Android 应用程序崩溃

> ID：10842889
> 
> 赞同：2
> 
> 时间：2012-06-01T00:12:20.840
> 
> 标签：android, actionscript-3, air, flashdevelop

... 或在应用程序 xml 中的各种设置（<appName>-app.xml 或 application.xml）当手机处于纵向而不是横向时。

根据不同的设置，当我们在 FlashDevelop 中对手机进行调试时，我们的测试手机 Samsung Galaxy s3 会在启动时崩溃。实际上我们正在调试一个版本，所以我们没有得到任何痕迹，但我们仍然在手机上运行应用程序。

例如，如果我们设置

```
<aspectRatio>landscape</aspectRatio>
<autoOrients>true</autoOrients> 
```

并在我们开始调试时将手机保持在横向，然后应用程序将按原样运行。但是，如果我们在启动调试时使用相同的设置将手机保持为纵向，那么应用程序在启动时会崩溃。如果我们将 auto orient 设置为 false 和/或删除 Aspect Ratio，也会发生完全相同的情况。

我们在我的 Main 类中将 stage.scaleMode 设置为什么也没关系......或者至少我无法找出任何与 aspectRatio/autoOrients/ 有效的组合。

我在另一个线程中的 Stack Overflow 上一目了然地读到了一些似乎相似的东西，这是早期 Android 版本中的一个错误，但它应该在 ICS（我们在测试设备上拥有）中修复。而且我可能还一眼就看出它与虚拟键盘相关，并在各种操作的 xml Manifest 中添加了一些代码..

请问有人有确切的线索吗？:-)

编辑：该应用程序被构建为仅以横向显示。它不能在纵向上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:00:29.513

我也遇到了同样的问题；**每次方向更改时应用程序都会崩溃**。我所做的很简单：

首先，**为您的布局创建两个文件夹：**

> ```
> layout
> layout-land 
> ```

然后，将您的**纵向布局`layout`**和**横向布局放入`layout-land`**.

这会成功的。希望你能从我的经验中得到想法。

# php - PHP/MySQL 将总和存储在单独的表中或每次计算

> ID：10842890
> 
> 赞同：4
> 
> 时间：2012-06-01T00:12:38.510
> 
> 标签：php, mysql, sum

我需要为用户存储积分。每个点都将存储在带有日期的单独行中。现在，当用户打开他的页面时，它将显示他的总积分。

现在要计算总分，我可以想到以下选项：

1.  每次用户打开他的页面时，计算他在那个 ONE mysql 表中所有点的总和并将其显示给他

2.  为总分创建另一个表，每当添加一个点时，计算总和，并将之前的总和值替换为新的总和值。当用户打开他的页面时，它只访问该总和表中的那一行并向他显示该值

3.  创建一个每天晚上运行的 CRON 作业以计算用户的总分并将其存储在 (2) 中创建的单独表中

对我来说，选项 2 看起来很有效，但只是想知道这样的事情通常是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:51:17.857

如果您有适当的权限，您可以在积分表上创建触发器。

```
delimiter | 
create trigger update_point_total 
    after insert on points for each row 
    begin
    update point_totals set total=total+NEW.points
    where userid=NEW.userid;
    end
|
delimiter; 
```

每次将行插入到积分表中时，这将导致总积分列更新。

# java - 为什么不以“。”结尾的正则表达式模式 使用单词边界时产生匹配？

> ID：10842891
> 
> 赞同：3
> 
> 时间：2012-06-01T00:12:57.257
> 
> 标签：java, regex, quote

在以下 Java 代码中：

```
public static void main(String[] args) {
        String largeText = "abc myphrase. def";
        String phrase = "myphrase.";
        Pattern myPattern = Pattern.compile("\\b"+Pattern.quote(phrase)+"\\b");
        System.out.println("Pattern: "+myPattern);
        Matcher myMatcher = myPattern.matcher( largeText );
        boolean found = false;
        while(myMatcher.find()) {
          System.out.println("Found: "+myMatcher.group());
          found = true;
        }
        if(!found){
            System.out.println("Not found!");
        }
} 
```

我得到这个输出：

```
Pattern: \b\Qmyphrase.\E\b
Not found! 
```

拜托，有人能解释一下为什么上面的模式不匹配吗？如果我使用“myphrase”而不是“myphrase”，我确实有一个匹配项。在模式中。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:15:41.053

`.` 在单词字符和非单词字符之间出现 A 边界后没有边界。由于`.`和`" "`(space) 都是非单词字符，因此它们之间没有界限。

如果你在你的模式中使用“myphase”，你会得到一个匹配，因为单词 character`e`和`.`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:17:00.720

它不匹配，因为点 ( `.`)**不**被视为“单词”字符，因此在文字点之后**不会**有单词边界（当下一个字符是空格时）。

仅供参考，“单词”字符（有自己的 regex `\w`）相当于字符类`[a-zA-Z0-9_]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T02:17:20.480

也许您正在尝试使用 \s 而不是 \b ？

# objective-c - 从模态视图启动相机会导致 iPad 上不必要的调整大小

> ID：10842894
> 
> 赞同：4
> 
> 时间：2012-06-01T00:13:35.720
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ipad

在我的 iPad 应用程序中，我创建了一个模态视图并调整其大小，如下所示：

```
ModalViewController *modalController = [[WishlistInfoViewController alloc] initWithNibName:@"WishlistInfoViewController" bundle:nil];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:modalController];
navController.modalPresentationStyle = UIModalPresentationPageSheet; 

self presentViewController:navController animated:YES completion:nil];

navController.view.superview.bounds = CGRectMake(0, 0, 700, 700);
navController.view.superview.center = CGPointMake(self.view.center.x, self.view.center.y + 35); 
```

在该模态视图中，我像这样启动相机：

```
UIImagePickerController *mypicker = [[UIImagePickerController alloc] init];
mypicker.delegate = self; 
mypicker.allowsEditing = NO; 
mypicker.sourceType = UIImagePickerControllerSourceTypeCamera; 
mypicker.showsCameraControls = YES;
mypicker.wantsFullScreenLayout = YES;
[self.navigationController presentModalViewController:mypicker animated:YES]; 
```

我像这样关闭相机：

```
[self dismissModalViewControllerAnimated:TRUE]; 
```

问题是当我关闭相机时，模态视图会调整大小以填满整个屏幕。我能做些什么来防止模态视图调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:29:09.277

好的，所以我解决了我的问题，但只是在调用 [self dismissModalViewControllerAnimated:YES]; 后立即重置视图的大小。我不知道为什么我直到现在才尝试这个。

# ajax - 使用敲除绑定 json 数据

> ID：10842900
> 
> 赞同：3
> 
> 时间：2012-06-01T00:14:06.583
> 
> 标签：ajax, json, asp.net-mvc-3, knockout.js, knockout-mapping-plugin

我有一个“应该”与 json 结果绑定的表：

```
<table>
<thead>
    <tr>
        <th>
            Id
        </th>
        <th>
            Number
        </th>
        <th>
            Name
        </th>
        <th>
            Password
        </th>
        <th>
            Role
        </th>
    </tr>
</thead>
<tbody data-bind="foreach: Employees">
    <tr>
        <td>
            <span data-bind="text: EmployeeId"></span>
        </td>
        <td>
            <span data-bind="text: EmployeeNumber"></span>
        </td>
        <td>
            <span data-bind="text: EmployeeName"></span>
        </td>
        <td>
            <span data-bind="text: EmployeePassword"></span>
        </td>
        <td>
            <span data-bind="text: EmployeeRole"></span>
        </td>
    </tr>
</tbody> 
```

我的淘汰赛脚本是这样的：

```
<script type="text/javascript">
$(document).ready(function () {
    var viewModel = {};
    var data = $.getJSON("Employees.json", function (data) {
        viewModel.model = ko.mapping.fromJSON(data);
        ko.applyBindings(viewModel);
    }
    );
});
</script> 
```

我正在尝试将表与 json 结果绑定，但它不起作用，问题可能出在哪里......这是我在控制器中的 json：

```
 public ActionResult GetEmployees()
    {
        var r = db.Employees;
        var s = new
        {
            Employees = r.Select(x => new { empId = x.Id, empName = x.Name, empNumber = x.Number, empPassword = x.Password, empRole = x.Role }).ToList()
               .Select(x => new
               {
                   EmployeeId = x.empId,
                   EmployeeName = x.empName,
                   EmployeeNumber = x.empNumber,
                   EmployeePassword = x.empPassword,
                   EmployeeRole = x.empRole
               }).ToArray(),
        };

        return Json(s, JsonRequestBehavior.AllowGet);
    } 
```

更新：这是我返回的 json 数据示例：

```
 {"Employees":[{"EmployeeId":1,"EmployeeName":X","EmployeeNumber":"1","EmployeePassword":"x","EmployeeRole":"User"},{"EmployeeId":10,"EmployeeName":"S","EmployeeNumber":"21","EmployeePassword":"s","EmployeeRole":"Admin"}]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:40:36.437

假设一切服务器端都很好，你的模型被绑定到一个 .model 属性，但你的 foreach 应该是

```
<tbody data-bind="foreach: model.Employees"> 
```

这就是我现在能看到的所有内容，需要查看更多代码才能进一步提供帮助。

您可能需要使用 firebug 或 chrome 开发工具并确认收到的 javascript 错误（如果有），还要检查响应以确保您的操作方法正在返回数据。

**编辑**

好的，这是您的代码的 jsfiddle。一些事情，可能是拼写错误，但以防万一。您的标记中缺少标记，并且您的 json 中第一个 EmployeeName 之前有一个未终止的注释。

[http://jsfiddle.net/madcapnmckay/3rRUQ/1/](http://jsfiddle.net/madcapnmckay/3rRUQ/1/)

您确实需要 model.Employees 如上所述。因为您从 mvc 返回 json 它将具有正确的标头，因此 jquery 会自动将其转换为 javascript 对象，因此不需要 fromJSON，而是尝试 fromJS。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:14:13.660

```
<script id="tmpl_ScreenNavigation" type="text/html">
<tr class="erow">
    {{if ScreenParentNevigationId}}
    <td width="250px"><table cellpadding="5" class="Permission" sceenid="${ScreenNevigationId}" border="0" RoleDetailId="0"><tr><td><label><input type="checkbox" id="view${ScreenNevigationId}" class="View" />&nbsp;View</label></td><td><label><input type="checkbox" id="AddModify${ScreenNevigationId}" class="Save"/>&nbsp;Add/Modify</label></td><td><label><input type="checkbox" id="Delete${ScreenNevigationId}" class="Delete" />&nbsp;Delete</label></td></tr></table></td>
    {{/if}}
    {{if !ScreenParentNevigationId}}
    <td {{if !ScreenParentNevigationId}} style="background-color: #F9BDC8;"{{/if}} width="250px"><table cellpadding="5" class="Permission" sceenid="${ScreenNevigationId}" border="0" RoleDetailId="0"><tr><td {{if !ScreenParentNevigationId}} style="background-color: #F9BDC8;"{{/if}}><label><input type="checkbox" id="view${ScreenNevigationId}" class="View" />&nbsp;View</label></td></tr></table></td>
    {{/if}}
    <td {{if !ScreenParentNevigationId}} style="background-color: #F9BDC8;"{{/if}}>${ScreenName}</td>
    <td {{if !ScreenParentNevigationId}} style="background-color: #F9BDC8;"{{/if}}>${ScreenDescription}</td>
</tr>
</script> 
```

$("#tmpl_ScreenNavigation").tmpl(resultJson).appendTo("#tblRoles");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T16:43:59.237

将 JavaScript 标记的位置更改为表格上方 html 文件的顶部。因此，数据可能无法正确填充。

# wordpress - wordpress 中的动态当前页面突出显示问题

> ID：10842901
> 
> 赞同：1
> 
> 时间：2012-06-01T00:14:06.827
> 
> 标签：wordpress, jquery

我正在尝试获取下面的代码以始终突出显示我正在处理的主题的当前页面，但它什么也没做。HTML 部分如下脚本所示。有关修复的任何建议或解决方案。

```
<script type="text/javascript">
    var url = window.location.href;
    url = url.substr(url.lastIndexOf("/") + 1);
    $("#navbar").find("a[href='" + url + "']").addClass("current");
</script>

<div id="navbar">
    <ul>
        <li><a href="index.php">home</a></li>
        <li><a href="services/">services</a></li>
        <li><a href="procedure/">procedure</a></li>
        <li><a href="about-us/">about</a></li>
        <li><a href="contact-us/">contact</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:38:06.367

您需要查看[WP Nav Menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。

我猜这是您正在开发的主题？如果是这样，请在您的 functions.php 文件中[注册一个导航菜单。](http://codex.wordpress.org/Function_Reference/register_nav_menus)这将允许您在 Wordpress 仪表板（外观->菜单）中定义您的菜单，并根据您的喜好对其进行自定义。

我建议这样做的原因是，它不仅可以让您以非常直观的方式完全控制菜单，而且还可以自动定义样式表可能需要的所有类（包括当前项目和祖先）。

这是您可以使用的最干净的选择。您还可以查看[WP List Pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)以获取类似（尽管更有限）的解决方案。

否则，你将不得不做一些像这样肮脏的事情：

```
<?php
$id = get_the_ID();
$class = ' class="current"';
?>
<ul>
    <li<?php echo is_home() ? $class : ''; ?>><a href="<?php echo home_url(); ?>">home</a></li>
    <li<?php echo $id==$serives_ID ? $class : ''; ?>><a href="<?php echo get_permalink($serives_ID); ?>">services</a></li>
    <li<?php echo $id==$procedure_ID ? $class : ''; ?>><a href="<?php echo get_permalink($procedure_ID ); ?>">procedure</a></li>
    <li<?php echo $id==$about_ID ? $class : ''; ?>><a href="<?php echo get_permalink($about_ID); ?>">about</a></li>
    <li<?php echo $id==$contact_ID ? $class : ''; ?>><a href="<?php echo get_permalink($contact_ID); ?>">contact</a></li>
</ul> 
```

将 $services_ID、$procedure_ID 等替换为它们各自的页面 ID，如果当前 ID 与其中任何一个匹配，则该项目将应用一个“当前”类，然后您可以在样式表中定位它。

我建议使用服务器端解决方案而不是使用任何类型的 jQuery 的主要原因是，这不是一个专门适合 jQuery 本身的任务。

虽然 jQuery 库是一个强大的工具，但 Wordpress 具有您需要检测在此实例中要检测的所有内容所需的所有内置功能。在让客户端的浏览器接管之前，让服务器做尽可能多的工作。否则，您将看到一些严重的加载时间。

**更新：** 根据您的最后评论，如果您打算采用凌乱的方式并且不想为查找页面 ID 而烦恼，您也可以这样做：

```
<?php
$slugs = array('services', 'procedure', 'about-us', 'contact-us');
?>
<ul>
    <li<?php echo is_home() ? ' class="current"' : ''; ?>><a href="<?php echo home_url(); ?>">home</a></li>
    <?php
    foreach($slugs as $slug)
    {
        $page = get_page_by_path($slug);
        $class = is_page($slug) ? ' class="current"' : '';
        echo '<li'.$class.'><a href="'.get_permalink($page->ID).'">'.str_replace('-us','',$slug).'</a></li>';
    }
    ?>
</ul> 
```

**基于最后评论的更新：**

现在您正在使用 wp_nav_menu，您可以使用 CSS 定位当前菜单项。这是一个将当前项目的背景变为红色的示例：

```
<style type="text/css">
.current-menu-item{background:#F00;}
</style> 
```

Apply these rules either in your header, or preferably in your main style.css file. Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:20:46.463

您的 substr 正在使用 / +1 的 lastindex。html 中显示的链接末尾有 /。我想这两者是互斥的，因为以 / 结尾的 s 字符串总是会返回一个带有该 substr 的空字符串。

# android - Android，Webview，获取提交的表单数据

> ID：10842904
> 
> 赞同：10
> 
> 时间：2012-06-01T00:14:17.783
> 
> 标签：android, forms, webview, submit

我希望我的 Android 应用程序使用 Webview 来显示 html 表单。当用户按下提交按钮时，它希望将名称/值对发送回我的程序。我该怎么做呢？

我看过其他类似的问题，但没有回答具体说明如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:13:22.193

研究 WebView 中 Javascript 接口的使用。请参阅[Android 开发者指南的这个区域](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)。基本上，您应该能够使用 Javascript 接口从页面与设备进行通信，并让您的 WebView Activity 知道何时按下提交按钮并发送其值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T03:17:10.627

我找到了我需要的东西。如果我在 html 表单中设置 action='FORM" ，那么我可以通过以下方式拦截操作：

```
 public void onLoadResource (WebView view, String url){
        int index = url.indexOf("FORM?");
        if (index != -1){
            String d = URLDecoder.decode(url.substring(index+5));
        }
    } 
```

名称/值对在字符串 d 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T17:37:12.933

如果您想保存名称/值对并愿意使用 jQuery，那么这很简单。假设您将 jQuery 放在您的资产文件夹中，您可以将其读入以下文件：

```
getResources().getAssets() 
```

在您设置的 WebViewClient 中（假设您覆盖了客户端），您可以执行以下操作：

```
view.loadUrl("javascript:" + escapedJqueryStringHere); 
```

然后，确保您使用为“MyJInterface”配置的方法（例如，名为“ReturnJSONFromForm(String json)”）为 webview 配置了 JavascriptInterface，然后将表单加载到页面中，然后尝试以下操作：

```
webview.loadUrl("javascript:MyJInterface.ReturnJSONFromForm($(\"form\").serialize());"); 
```

现在在您的界面中，只需从结果字符串创建一个 JSONObject 即可！表单中的名称/值对。

序列化不会捕获禁用的字段或提交按钮.. 如果您需要，那么存在更复杂的 javascript 解决方案，但要困难得多。

# c++ - 在没有 value_length 的 libmemcached 中使用 memcached_get()

> ID：10842909
> 
> 赞同：2
> 
> 时间：2012-06-01T00:14:36.297
> 
> 标签：c++, memcached, libmemcache, libmemcached

所以我得到了一个非常相关的问题：[libmemcached 中的 memcached_get() 问题](https://stackoverflow.com/questions/3748917/question-with-memcached-get-in-libmemcached)

从文档中对我来说似乎并不明显或不可能。是否可以在不知道数据长度的情况下根据键获取值？我计划让多个线程更改键的值，因此无法保存值的先前长度。我尝试将***value_length**设置为 NULL、0 或任意高数而没有效果（例如程序崩溃）。我希望这可以通过以 null 结尾的字符串来实现，但它不知道 libmemcached 的内部结构。任何建议，指针？谢谢。

```
 char *memcached_get (memcached_st *ptr,
                 const char *key, size_t key_length,
                 size_t *value_length,
                 uint32_t *flags,
                 memcached_return *error); 
```

一些*更好*的文档：[http ://dev.mysql.com/doc/refman/5.1/en/ha-memcached-interfaces-libmemcached.html#ha-memcached-interfaces-libmemcached-get](http://dev.mysql.com/doc/refman/5.1/en/ha-memcached-interfaces-libmemcached.html#ha-memcached-interfaces-libmemcached-get)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:13:21.543

好的，多亏了了不起的 [/sarcasm] 文档，或者我在 C++ 方面的经验不足，所以对 memcached_get 函数存在误解。根据

[http://docs.oracle.com/cd/E17952_01/refman-5.0-en/ha-memcached-interfaces-libmemcached.html#ha-memcached-interfaces-libmemcached-get](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/ha-memcached-interfaces-libmemcached.html#ha-memcached-interfaces-libmemcached-get)

该函数使用 size_t *value_length 来**存储**返回值的大小。所以写你的函数是这样的：

```
 memcached_st *memc;
    memcached_return rc;
    memcached_return error;
    memc= memcached_create(NULL);
    servers= memcached_server_list_append(servers, "localhost", 11211, &rc);
    rc= memcached_server_push(memc, servers);
    uint32_t flags;
    size_t return_value_length;
    const char *key = "123";

 const char *response  = memcached_get(memc,
                 key, strlen (key),
                 &return_value_length,
                 &flags,
                 &error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T20:16:45.587

Memcached 是一个键值机器。你给它一个 strlen(key) 的键，它会返回一个指针（响应），指向它与你的键配对的对象。它使用 malloc() 存储来放入对象，并通过 return_value_length 为您提供该对象的大小，您将其地址作为 &return_value_len 传递给 memcached。

# android - 使用 Eclipse 进行 Android 调试 - 无断点

> ID：10842910
> 
> 赞同：9
> 
> 时间：2012-06-01T00:14:41.923
> 
> 标签：android, eclipse, debugging

我正在尝试在模拟器或设备上调试一个简单的 Android 应用程序，但我无法让调试器在我设置的任何断点处停止。我在这里和整个网络上合并了其他帖子并尝试了所有建议（将 debuggable:"true" 添加到清单中，停止并启动 adb，全部清除，确保我使用的是调试按钮而不是运行按钮等） . 在 Debug 透视图中，我可以看到线程，在 DDMS 中，它会在我正在调试的设备旁边显示调试图标。我确实看到了我设置断点的蓝点，并且 Debug 透视图列出了它们并说它们处于活动状态。

我已经在断点之前发出警报，以验证代码正在执行。

在这里开始发疯。还有其他建议吗？我一定错过了一些简单但不明显的东西。

更新：我很欣赏迄今为止的回应。不幸的是，他们没有解决我的问题。我已按照调试说明进行操作，并在手机中打开了调试功能。此外，我确实在启动时在手机上看到了“等待调试器”警报。一般来说，一切都说我正在调试（包括获取我添加的 logcat 输出）。它不会在我添加的断点处停止，并在 Debug 透视图的断点选项卡中列出。也只是重申一下-在设备和模拟器上进行调试时会发生这种情况。我确实注意到的一件事是，当我启动调试器时，我将其设置为调出 Android 设备选择器。在那里，我的设备的“调试”列是空白的 - 但如果模拟器正在运行，调试列会说“是”。控制台还指出正在尝试连接到调试器。是否应该有一个控制台日志表明调试器已成功连接？我没有看到这一点。

更新 20120914：我已经离开了一段时间并且之前已经放弃了。回来尝试解决这个问题。它仍然没有解决。上面的一切仍然是最新的——但我注意到了另一件事。我在主要活动上设置了一个类加载断点，它确实停在那里。它只是不会在任何断点处停止。我刚刚更新到最新的JDK 1.7.0_07、Android SDK 20、ADT Plugin 20.0.3。我已经使用 logcat 输出了一条消息并在这一行设置了一个断点。我在 logcat 中看到了消息，所以我知道代码正在执行。debig 透视图中的调试窗口也确实显示了带有许多线程的 android 应用程序，而 DDMS 透视图中的 Devices 窗口显示了旁边带有绿色错误图标的应用程序。

还有一件事 - 当调试器运行行断点项目符号时，不会在它们上面覆盖复选标记（类加载断点会！）。我猜这是根本原因——但我不知道他们为什么没有得到这个。（顺便说一下，也没有设置跳过断点 - 断点没有穿过它们的线）。

任何新的建议将不胜感激。我在这件事上花了很多时间。这一定是我没有看到的明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T23:59:54.147

现在我觉得写这篇文章有点愚蠢。但我终于解决了我的问题。问题是您不能在 Javascript 代码中设置断点。我无意中遗漏的部分是我正在使用 PhoneGap 为 Android 编写应用程序。几乎所有的代码都是 Javascript。我非常习惯在 Visual Studio 中开发 .NET Web 应用程序，我只是假设您可以在 javascript 代码中设置断点。Java 代码中的断点恰好可以正常工作。无论如何，感谢您的任何建议。不知道是否有其他 .NET 开发人员在尝试 PhoneGap 开发 - 但也许这篇文章会对他们有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T00:50:40.533

Android SDK 提供了调试应用程序所需的大部分工具。此链接将向您介绍[Android 调试环境和使用的调试工具](http://developer.android.com/guide/developing/debugging/index.html)。

[**这也是调试 android 应用程序**](http://www.linux-mag.com/id/7491/)的动手教程[。](http://www.linux-mag.com/id/7491/)[](http://www.linux-mag.com/id/7491/)

 **如果您想***使用实际的 android 手机***进行调试，请在您的设备中打开“ **USB 调试**”：

> 设置 > 应用程序 > 开发并启用 USB 调试

安卓 4.0：

> 设置 > 开发者选项

并利用`Log.d`和你的`Logcat`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T02:23:23.083

Eclipse 有一个调试运行配置。仅当您使用调试运行配置时，才会在启动期间将调试器附加到应用程序中。

应用程序启动（在设备/模拟器上）是否会暂停一段时间“等待调试器”？如果不是，那么您没有使用“调试配置”启动应用程序。它是运行（下拉）配置左侧的按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-26T13:39:25.277

尝试使用 jsHybugger：[http](http://www.jshybugger.org/) ://www.jshybugger.org/在 Eclipse 中为远程（移动）设备设置 javascript 断点。

它允许您设置断点、单步执行、捕获异常以及与 JS/DOM 环境交互。您可以从 Eclipse 或远程桌面上的 Chrome 或与 Chrome 兼容的调试器中使用它。它可以与创建自己的 webView 的应用程序一起使用。

但是，您必须安装一些文件——但使用起来可能并不比 weinre 复杂。它确实广泛地修改了 JS 文件（动态地，对用户透明）以启用所有这些调试——webKit 确实应该原生支持 javascript 调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T09:24:34.480

确保您没有检查跳过所有断点（运行 -> 跳过所有断点）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T10:21:09.203

Ribo 已经在他的回答中提到了它，但是因为这个问题和答案是关于调试 Phonegap 应用程序的。你当然要看看 weinre (WEB INspector REmote)。 [http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

如今，phonegap 甚至在 phonegap 构建中也包含了自己的风格... [http://debug.phonegap.com/](http://debug.phonegap.com/)

我是这个的忠实粉丝......（请注意，如果您在本地机器上使用 weinre 并尝试通过 wifi 调试 phonegap 应用程序......请确保您的本地设备在同一个 wifi 网络上！）**

# google-app-engine - 如何在谷歌 appengine 上构建 TCP 侦听器或服务器，也许是在 golang 中？

> ID：10842915
> 
> 赞同：1
> 
> 时间：2012-06-01T00:15:20.167
> 
> 标签：google-app-engine, tcp, go

我想构建一个 TCP 接收器/侦听器/服务器以在 Google App-Engine 上运行。例如，在特定端口上通过 TCP 接收消息，类似于 syslog 服务器，并处理请求。Go 语言中的某些东西是理想的，但实际上任何 appengine 都支持。

有谁知道我是否以及如何设置 appengine 来处理 TCP 请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T05:42:16.290

AppEngine 在沙盒环境中运行您的应用程序，您可能无法打开套接字，如他们的[什么是 Google App Engine？](https://developers.google.com/appengine/docs/whatisgoogleappengine)指导：

> 与 Java 和 Python 环境一样，并非所有标准库的功能都在沙箱中可用。例如，尝试打开套接字或写入文件将返回 os.EINVAL 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T01:55:20.827

App Engine 旨在处理 HTTP 请求，即 TCP 请求。如果您选择使用 App Engine，您可能应该设计您的服务器来处理 HTTP 请求。

如果您需要在较低级别上运行，您可能最好使用像 Amazon 这样的东西，它拥有像弹性 IP 这样的工具，可以让这变得更容易。

# java - Will constructing a Collection using a Set retain the Set properties? (Java)

> ID：10842918
> 
> 赞同：0
> 
> 时间：2012-06-01T00:15:22.107
> 
> 标签：java, collections, polymorphism, set

If I have code that looks like this:

```
Collection<Object> c = new HashSet<Object>(); 
```

will it still retain the properties that the collection will not be able to contain duplicate values. In other words, what would happen in the following situation?

```
String h = "Hello World!";
c.add(h);
c.add(h); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:17:15.493

Yes, the behavior and properties of `Set` will still hold. `c` will only contain one instance of `"Hello World!"`

```
public static void main(String[] args)
{
    Collection<Object> c = new HashSet<Object>();
    String h = "Hello World!";
    c.add(h);
    c.add(h);
    System.out.println("c contains " + c.size() + " item(s): " + c);
    System.out.println("c is an instance of " + c.getClass());
} 
```

The above `main` method outputs:

```
c contains 1 item(s): [Hello World!]
c is an instance of class java.util.HashSet 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T00:17:55.913

You're not "constructing a Collection"; you're merely create a new reference. So yes, all the underlying properties still hold, because it's still the original object's methods that you're calling.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T00:18:13.723

Short: yes - it is still an object of HashSet even if the referencing variable type is a super type of HashSet.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T00:28:51.300

```
HashSet<T> theSet = new HashSet<T>();
Collection<T> collection = theSet;
Iterable<T> iterable = theSet;
Object object = theSet; 
```

All of these four variables are of different types (all of them have to be super types of `HashSet` by the way), but all of them refer to the same object whose type is `HashSet`. No matter what variable you use to access the object, it will always behave in the same way. This is one of the key features of [polymorphism](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html).

The only difference is that the higher you move the inheritance tree (up means towards more general types), the less methods and fields are accessible for you. So you cannot call methods such as `object.iterator()`, `iterable.size()` etc., but when you call a method common for all the variables, it always behaves the same way:

```
theSet.toString(); // produces []
collection.toString();  // produces []
iterable.toString()  // produces []
object.toString(); // produces [] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T00:22:59.130

```
String h = "Hello World!";
c.add(h);//Returns true
c.add(h);//Returns false since duplicate elements are not allowed in HashSet

So only one instance of h will be added to HashSet 
```

# ruby-on-rails - 回滚 | 不跨越多个月的日期范围

> ID：10842919
> 
> 赞同：0
> 
> 时间：2012-06-01T00:15:30.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试为一个日历创建一个日期数组，其中下个月和上个月有一些额外的日子将填满一周。

这是我当前尝试获取数组的方法

```
def calendar
  selected_month = Date.civil((Time.zone.now.year).to_i, (Time.zone.now.month).to_i)

  start_date = selected_month.beginning_of_month
  start_date.sunday? ? start_date : start_date.beginning_of_week.advance(:days => -1)

  end_date = selected_month.end_of_month
  end_date.sunday? ? end_date.advance(:days => 1).end_of_week : end_date

  #only puts 1-30/31 and does not include the extra off set of days from start and end. :( 
  date_range = (start_date..end_date).to_a   
end 
```

问题是范围仅从 1 开始并持续到月底，即使开始和结束日期超过了该值。

我不喜欢这种获取阵列的方式，所以也许你有一个更好的整体想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:25:30.247

您忘记重新分配 start_date 和 end_date 的值。

```
 start_date = selected_month.beginning_of_month
  start_date = start_date.sunday? ? start_date : start_date.beginning_of_week.advance(:days => -1)

  end_date = selected_month.end_of_month
  end_date = end_date.sunday? ? end_date.advance(:days => 1).end_of_week : end_date 
```

# bison - 编译 Bison/Flex 文件时未定义的令牌

> ID：10842927
> 
> 赞同：1
> 
> 时间：2012-06-01T00:17:16.413
> 
> 标签：bison, yacc, lex

我开始使用 Bison/YACC 和 Flex/Lex，但我无法编译最简单的解析器。

文件：Ruby.y

```
%{ 
#include <stdio.h>
#include <stdlib.h> 
%}

%start program
%token NUMBER

%%

program : NUMBER;

%%

main( int argc, char* argv[] ) {
    yyparse();
} 

yyerror(char *s){
    printf("%s\n", s);
} 
```

文件：Ruby.l

```
%{
#define "Ruby.tab.h"
%}
DIGIT   [0-9]
%%
{DIGIT}+    { return(NUMBER);           }
[ \t\n]+
.           { return(yytext[0]);        }
%% 
```

我使用“Bison -vd Ruby.y”编译Ruby.y，然后使用“Flex Ruby.l”，然后尝试使用带有“GCC -c Ruby.tab.c”和“GCC -c lex”的GCC编译整个东西。 yy.c”，但我在后者上收到以下错误：

Ruby.l:2:9：错误：宏名称必须是标识符 Ruby.l：在函数“yylex”中：Ruby.l:6:10：错误：未声明“NUMBER”（在此函数中首次使用）Ruby.l： 6:10：注意：每个未声明的标识符对于它出现的每个函数只报告一次

我一无所知，有什么办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:52:49.500

在 Ruby.l 文件中：

```
%{
#define "Ruby.tab.h"
%} 
```

应该：

```
%{
#include "Ruby.tab.h"
%} 
```

# php - Twilio API 可以向客户发送由所有者个人电话号码回复的短信吗

> ID：10842928
> 
> 赞同：1
> 
> 时间：2012-06-01T00:17:16.880
> 
> 标签：php, sms-gateway, twilio

假设我有一个 twilio 号码 (#AAA)，如果客户“C”从他的号码 (#DDD) 向我的 twilio 号码 (#AAA) 发送一条短信。然后我的短信应用程序将此短信从 twilio 号码（#AAA）转发到我的个人电话号码（#BBB）。现在，如果我回复这条短信，它会向我的 twilio 号码 (#AAA) 发送短信。现在可以确定我的应用程序现在将此回复短信发送到客户编号（#DDD）。

还认为有 2 个客户 'Alex' 和 'tasid'。所有短信都转发到我的个人号码，现在如果我回复两条短信，那么它将转到我的 twilio 号码（#AAA），现在有什么方法可以检测哪个是给 alex 的回复短信，哪个是给 tasid 的。

有没有其他方法可以做到这一点。任何想法！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:21:08.317

是的，如果您 (a) 在数据库中跟踪传入的消息（和发件人的电话号码），并且 (b) 在您将消息转发给自己时包含发件人的电话号码，并且 (c) 在您回复时，开始回复发件人的电话号码。因此，当您发送回复时，您的应用会将其转发到消息开头的电话号码。

```
you receive:
from 1234567: Hi Joe how are you doing?

you send:
1234567 I'm doing fine thanks how about you? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T04:20:28.107

塔西迪克，

解决这个问题的最简单方法是在 cookie 中存储一些信息：

[http://www.twilio.com/docs/api/twiml/sms/your_response#cookies](http://www.twilio.com/docs/api/twiml/sms/your_response#cookies)

从文档：

> Twilio 将在相同的两个电话号码之间的多条 SMS 消息中保持 cookie 状态。这允许您将单独的消息视为对话，并将有关对话的数据（例如会话标识符）存储在 cookie 中以供将来参考。Twilio 将在四个小时不活动后使该对话的 cookie 过期。

希望这可以帮助。

# c++ - 将 unsigned char * 转换为 cvShowImage OpenCV 的 FlyCapture2 图像

> ID：10842931
> 
> 赞同：3
> 
> 时间：2012-06-01T00:17:26.590
> 
> 标签：c++, c, opencv, flycapture

我正在使用三个[ptgrey](http://www.ptgrey.com)相机来获取图像并将它们保存到我的硬盘中。我正在使用[MultiCameraWriteToDiskEx](http://www.ptgrey.com/products/pgrflycapture/examples/MultipleCameraWriteToDisk.html)示例，它工作得很好，但我也想在采集过程中显示图像，所以我试图将 FlyCapture 图像转换为可读的 OpenCV 格式，以便使用 cvShowImage() 或 imshow() 函数显示它们.

我有一个`IplImage* ConvertImageToOpenCV(Image* pImage)`可以将 Flycapture2 Image* 转换为 OpenCV IplImage* 的函数，但我不知道如何在从相机捕获帧的**doGrabLoop()函数中正确地将 unsigned char * 转换为 FlyCapture2::Image*。**

你能帮我吗？我对 C/C++ 不是很自信 :( 特别是，我不知道如何转换 g_arImageplus[ uiCamera ].image.pData 以便将其传递给 ConvertImageToOpenCV()。（使用 g_arImageplus[ uiCamera 是否正确） .image.pData？）

```
IplImage* ConvertImageToOpenCV(Image* pImage)
{
    IplImage* cvImage = NULL;
    bool bColor = true;
    CvSize mySize;
    mySize.height = pImage->GetRows();
    mySize.width = pImage->GetCols();
    printf("ciao %d\n",  pImage->GetPixelFormat() );
    switch ( pImage->GetPixelFormat() )
    {
        case PIXEL_FORMAT_MONO8:     cvImage = cvCreateImageHeader(mySize, 8, 1 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_411YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_422YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_444YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RGB8:      cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_MONO16:    cvImage = cvCreateImageHeader(mySize, 16, 1 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_RGB16:     cvImage = cvCreateImageHeader(mySize, 16, 3 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_S_MONO16:  cvImage = cvCreateImageHeader(mySize, 16, 1 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_S_RGB16:   cvImage = cvCreateImageHeader(mySize, 16, 3 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RAW8:      cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RAW16:     cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_MONO12:    printf("Not supported by OpenCV");
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_RAW12:     printf("Not supported by OpenCV");
                                     break;
        case PIXEL_FORMAT_BGR:       cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_BGRU:      cvImage = cvCreateImageHeader(mySize, 8, 4 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 4;
                                     break;
        case PIXEL_FORMAT_RGBU:      cvImage = cvCreateImageHeader(mySize, 8, 4 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 4;
                                     break;
        default: printf("Some error occured...\n");
                 return NULL;
    }

    if(bColor) {
        if(!bInitialized)
        {
            colorImage.SetData(new unsigned char[pImage->GetCols() * pImage->GetRows()*3], pImage->GetCols() * pImage->GetRows()*3);
            bInitialized = true;
        }

        pImage->Convert(PIXEL_FORMAT_BGR, &colorImage); //needs to be as BGR to be saved

        cvImage->width = colorImage.GetCols();
        cvImage->height = colorImage.GetRows();
        cvImage->widthStep = colorImage.GetStride();

        cvImage->origin = 0; //interleaved color channels

        cvImage->imageDataOrigin = (char*)colorImage.GetData(); //DataOrigin and Data same pointer, no ROI
        cvImage->imageData         = (char*)(colorImage.GetData());
        cvImage->widthStep      = colorImage.GetStride();
        cvImage->nSize = sizeof (IplImage);
        cvImage->imageSize = cvImage->height * cvImage->widthStep;
    }
    else
    {
        cvImage->imageDataOrigin = (char*)(pImage->GetData());
        cvImage->imageData         = (char*)(pImage->GetData());
        cvImage->widthStep         = pImage->GetStride();
        cvImage->nSize             = sizeof (IplImage);
        cvImage->imageSize         = cvImage->height * cvImage->widthStep;

        //at this point cvImage contains a valid IplImage
     }
    return cvImage;
}

//
// Grab and test loop
//
int doGrabLoop()
{
   FlyCaptureError   error = FLYCAPTURE_FAILED;
   unsigned int      aruiPrevSeqNum[ _MAX_CAMERAS ];
   unsigned int      aruiDelta[ _MAX_CAMERAS ];
   unsigned int      aruiCycles[ _MAX_CAMERAS ];
   HANDLE        arhFile[ _MAX_CAMERAS ];
   DWORD         ardwBytesWritten[ _MAX_CAMERAS ];
   DWORD         dwTotalKiloBytesWritten = 0;
   bool          bMissed = false;
   bool          bOutOfSync = false;
   unsigned int      uiMissedImages = 0;
   unsigned int      uiOutOfSyncImages = 0;
   __int64       nStartTime = 0;
   __int64       nEndTime = 0;
   __int64       nDifference = 0;
   __int64       nTotalTime = 0;
   __int64       nGlobalStartTime = 0;
   __int64       nGlobalEndTime = 0;
   __int64       nGlobalTotalTime = 0;
   __int64       nFrequency = 0;

   QueryPerformanceFrequency( (LARGE_INTEGER*)&nFrequency );
   QueryPerformanceCounter( (LARGE_INTEGER*)&nGlobalStartTime );

   printf( "Starting grab...\n" );

   // Create files to write to
   if ( createFiles( arhFile ) != 0 )
   {
      printf( "There was error creating the files\n" );
      return -1;
   }  

   BOOL bSuccess;

   //
   // Start grabbing the images
   //

   for( int iImage = 0; iImage < g_iNumImagesToGrab; iImage++ )
   {
#ifdef _VERBOSE
      printf( "Grabbing image %u\n", iImage );
#else
      printf( "." );
#endif

      unsigned int uiCamera = 0;

      // Grab an image from each camera
      for( uiCamera = 0; uiCamera < g_uiNumCameras; uiCamera++ )
      {
     error = flycaptureLockNext( g_arContext[uiCamera], &g_arImageplus[uiCamera] );
         _HANDLE_ERROR( error, "flycaptureLockNext()" );

     // Save image dimensions & bayer info from first image for each camera
     if(iImage == 0)
     {
        g_arImageTemplate[uiCamera] = g_arImageplus[uiCamera].image;

        error = flycaptureGetColorTileFormat(g_arContext[uiCamera], &g_arBayerTile[uiCamera]);
        _HANDLE_ERROR( error, "flycaptureGetColorTileFormat()" );
     }
      }

      for( uiCamera = 0; uiCamera < g_uiNumCameras; uiCamera++ )
      {      
     // Start timer
     QueryPerformanceCounter( (LARGE_INTEGER*)&nStartTime );

     // Calculate the size of the image to be written
     int iImageSize = 0;     
     int iRowInc = g_arImageplus[uiCamera].image.iRowInc;
     int iRows = g_arImageplus[uiCamera].image.iRows;
     iImageSize = iRowInc * iRows;
 // ERROR: HOW CAN I CONVERT g_arImageplus[ uiCamera ].image.pData IN ORDER TO USE IT WITH ConvertImageToOpenCV() function?
     IplImage* destImage = ConvertImageToOpenCV(g_arImageplus[ uiCamera ].image.pData);

        cvShowImage("prova", destImage);

     waitKey(1);

     // Write to the file
     bSuccess = WriteFile(
        arhFile[uiCamera], 
        g_arImageplus[ uiCamera ].image.pData, 
        iImageSize,
        &ardwBytesWritten[uiCamera], 
        NULL ); 

     // End timer
     QueryPerformanceCounter( (LARGE_INTEGER*)&nEndTime );  

     // Ensure that the write was successful
     if ( !bSuccess || ( ardwBytesWritten[uiCamera] != (unsigned)iImageSize ) ) 
     {
        printf( "Error writing to file for camera %u!\n", uiCamera );
        return -1;
     }

     // Update various counters
     dwTotalKiloBytesWritten += (ardwBytesWritten[uiCamera] / 1024);
     nDifference = nEndTime - nStartTime;
     nTotalTime += nDifference;

     // Keep track of the difference in image sequence numbers (uiSeqNum)
     // in order to determine if any images have been missed.  A difference
     // greater than 1 indicates that an image has been missed.
         if( iImage == 0 )
         {
        // This is the first image, set up the variables
            aruiPrevSeqNum[uiCamera] = g_arImageplus[uiCamera].uiSeqNum;
            aruiDelta[uiCamera] = 1;
         }
         else
         {
        // Get the difference in sequence numbers between the current
        // image and the last image we received
            aruiDelta[uiCamera] = 
               g_arImageplus[uiCamera].uiSeqNum - aruiPrevSeqNum[uiCamera];
         }         

         if( aruiDelta[uiCamera] != 1 )
         {
            // We have missed an image.
        bMissed = true;
            uiMissedImages += aruiDelta[uiCamera] - 1;
         }
     else
     {
        bMissed = false;
     }

         aruiPrevSeqNum[uiCamera] = g_arImageplus[uiCamera].uiSeqNum;

     // Calculate the cycle count for the camera
         aruiCycles[uiCamera] = 
            g_arImageplus[uiCamera].image.timeStamp.ulCycleSeconds * 8000 +
            g_arImageplus[uiCamera].image.timeStamp.ulCycleCount;

     // Determine the difference of the timestamp for every image from the
     // first camera.  If the difference is greater than 1 cycle count, 
     // register the camera as being out of synchronization.
     int iDeltaFrom0 = abs( (int)(aruiCycles[uiCamera] - aruiCycles[0]) );

         if( ( iDeltaFrom0 % ( 128 * 8000 - 1 ) ) > 1 )
         {
        bOutOfSync = true;
        uiOutOfSyncImages++;
     }
     else
     {
        bOutOfSync = false;
     }

#ifdef _VERBOSE
     // Output is in the following order:
     // - The index of the image being captured
     // - The index of the camera that is currently being captured
     // - The time taken to write the image to disk
     // - Number of kilobytes written
     // - Write speed (in MB/s)
     // - Sequence number
     // - Cycle seconds in timestamp
     // - Cycle count in timestamp
     // - Delta from 0th value
     // - Missed an image?
     // - Out of sync?
     printf( 
        "%04d: \t%02u\t%0.5f\t%.0lf\t%.2lf\t%04u\t%03u.%04u\t%d\t%s %s\n",
        iImage,
        uiCamera,
        nDifference,
        (double)ardwBytesWritten[ uiCamera ] / 1024.0,
        (double)ardwBytesWritten[ uiCamera ] / ( 1024 * 1024 * nDifference ),
        g_arImageplus[ uiCamera ].uiSeqNum,
        g_arImageplus[ uiCamera ].image.timeStamp.ulCycleSeconds,
            g_arImageplus[ uiCamera ].image.timeStamp.ulCycleCount,
        iDeltaFrom0,
        bMissed ? "Y" : "N",
        bOutOfSync ? "Y" : "N");
#endif
      }

      // Unlock image, handing the buffer back to the buffer pool.
      for( uiCamera = 0; uiCamera < g_uiNumCameras; uiCamera++ )
      {
         error = flycaptureUnlock( 
            g_arContext[uiCamera], g_arImageplus[uiCamera].uiBufferIndex );
         _HANDLE_ERROR( error, "flycaptureUnlock()" );
      }
   }

   //
   // Done grabbing images
   //

   QueryPerformanceCounter( (LARGE_INTEGER*)&nGlobalEndTime );
   nGlobalTotalTime = nGlobalEndTime - nGlobalStartTime;

   double dGlobalTotalTime = (double)nGlobalTotalTime / (double)nFrequency;
   double dTotalTime = (double)nTotalTime / (double)nFrequency;

   // Report on the results
   // Burst time is the time that was spent writing to disk only
   // Overall time is total time taken, including image grabs, calculations etc
   printf( 
      "\nBurst: Wrote %.1lfMB in %0.2fs ( %.2lfMB/sec )\n", 
      (double)( dwTotalKiloBytesWritten / 1024 ), 
      dTotalTime,
      (double)( dwTotalKiloBytesWritten / ( 1024 * dTotalTime ) ) );

   printf(
      "Overall: Wrote %.1lfMB in %0.2fs ( %.2lfMB/sec )\n",
      (double)( dwTotalKiloBytesWritten / 1024 ), 
      dGlobalTotalTime,
      (double)( dwTotalKiloBytesWritten / ( 1024 * dGlobalTotalTime ) ) );  

   printf( g_bSyncSuccess ? "Sync success\n" : "Sync failed\n" );
   printf( "Missed images = %u.\n", uiMissedImages );
   printf( "Out of sync images = %u.\n", uiOutOfSyncImages );

   for ( unsigned int uiCamera = 0; uiCamera < g_uiNumCameras; uiCamera++ )
   {
      // Close file handles
      CloseHandle(arhFile[uiCamera]);
   }

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:46:25.373

您的转换方法：

```
IplImage* ConvertImageToOpenCV(Image* pImage) 
```

接受一个图像指针。从您拥有的数据中构造一个新图像以传递给它。[这是 Image 类的文档。](http://www.ptgrey.com/support/downloads/documents/flycapture2/Content/Doxygen/C/class_fly_capture2_1_1_image.html) 如果你使用这个函数，它不会保留缓冲区或复制它：

```
Image   (   unsigned int    rows,
            unsigned int    cols,
            unsigned int    stride,
            unsigned char*  pData,
            unsigned int    dataSize,
            PixelFormat     format,
            BayerTileFormat bayerFormat = NONE 
) 
```

所以你的代码看起来像：

```
// Pull these values from your other image structure
Image image(rows, cols, stride, pData, dataSize, format, bayerFormat);

// Pass the address of the temporary image to your conversion
IplImage* opencvImage = ConvertImageToOpenCV(&image); 
```

# sql - Oracle 从选择中插入具有更多列的表

> ID：10842938
> 
> 赞同：68
> 
> 时间：2012-06-01T00:18:34.220
> 
> 标签：sql, oracle

我想从 select 语句插入表，但是，从 select 语句返回 3 列，表有 4 列，我想为额外列中的所有行添加 0。谁能给我一个示例 SQL 查询？

谢谢！

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-06-01T00:20:57.507

只需在您的选择中添加“0”即可。

```
INSERT INTO table_name (a,b,c,d)
    SELECT
       other_table.a AS a,
       other_table.b AS b,
       other_table.c AS c,
       '0' AS d
    FROM other_table 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T00:21:47.677

在 SQL 中将 0 作为默认值或将 0 添加到您的表区域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T00:20:21.893

只需选择“0”作为所需列的值

# android - Android SQLite 数据库（3300）：sqlite 返回：错误代码 = 1

> ID：10842943
> 
> 赞同：0
> 
> 时间：2012-06-01T00:19:14.853
> 
> 标签：android, database, sqlite

我开始有点发疯了哈哈，我花了两天时间试图修复下面的这个错误，有人可以帮助我，因为我无法解决:(

//DB Adapter 类创建表

```
public class DBAdapter {

    private static final String vd_offer = ("CREATE TABLE " + TABLE_VD_OFFER  + " ("
                + OFFER_ID + " INTEGER, " // PRIMARY KEY
                + VENUE_ID + " INTEGER, " 
                + OFFER_COST + " INTEGER, " 
                + OFFER_NAME + " TEXT, " 
                + OFFER_DESC_SHORT + " TEXT, " 
                + OFFER_DESC_LONG + " TEXT, " 
                + OFFER_DATE_START + " TEXT, " 
                + OFFER_DATE_END + " TEXT, " 
                + OFFER_RECUR + " TEXT );"
                );

    private final Context context; 
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx)
    {
        this.context = ctx;
        this.DBHelper = new DatabaseHelper(this.context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(vd_offer); 
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {               
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_VD_OFFER);
            onCreate(db);
        }
    } 

    public DBAdapter open() throws SQLException 
    {
        this.db = this.DBHelper.getWritableDatabase();
        return this;
    }

    public void close() 
    {
        this.DBHelper.close();
    }
} 
```

// 将变量传递给 DB 的类

```
public class VDOffer {

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private final Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }

    public VDOffer(Context ctx) {
        this.mCtx = ctx;
    }

    public VDOffer open() throws SQLException {
        this.mDbHelper = new DatabaseHelper(this.mCtx);
        this.mDb = this.mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        this.mDbHelper.close();
    }

    public long addOffer (int offer_id, int venue_id, int offer_cost, 
            String offer_name, String offer_desc_short, String offer_desc_long,
            String offer_date_start, String offer_date_end, String offer_recur){

        ContentValues values = new ContentValues();

        values.put(OFFER_ID, offer_id);
        values.put(VENUE_ID, venue_id);
        values.put(OFFER_COST, offer_cost);
        values.put(OFFER_NAME, offer_name);
        values.put(OFFER_DESC_SHORT, offer_desc_short);
        values.put(OFFER_DESC_LONG, offer_desc_long);
        values.put(OFFER_DATE_START, offer_date_start);
        values.put(OFFER_DATE_END, offer_date_end);
        values.put(OFFER_RECUR, offer_recur);       

        return this.mDb.insert(TABLE_VD_OFFER, null, values);

    }
} 
```

// 只是将一些代码拼凑在一起来测试输入

```
public void update (){

    int offer_id = 1;
    int venue_id = 1;
    int offer_cost = 1;
    String offer_name = "test";
    String offer_desc_short = "test";
    String offer_desc_long = "test";
    String offer_date_start = "test";
    String offer_date_end = "test";
    String offer_recur = "test";        

    VDOffer entry = new VDOffer(Events.this);

    boolean didItWork = true;
    try {
        entry.open();
        entry.addOffer(offer_id, venue_id, offer_cost, offer_name, offer_desc_short, offer_desc_long, offer_date_start, offer_date_end, offer_recur);
        entry.close();

    } catch (Exception e) {
        didItWork = false;
        String error = e.toString();
        Dialog d = new Dialog(this);
        d.setTitle("Dang it!");
        TextView tv = new TextView(this);
        tv.setText(error);
        d.setContentView(tv);
        d.show();
    } finally {
        if (didItWork) {
            Dialog d = new Dialog(this);
            d.setTitle("Heck Yea!");
            TextView tv = new TextView(this);
            tv.setText("Success");
            d.setContentView(tv);
            d.show();
            entry.close();
        }
    } 
```

}

// 记录猫

```
05-29 23:56:43.021: W/KeyCharacterMap(30728): No keyboard for id 0
05-29 23:56:43.021: W/KeyCharacterMap(30728): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-29 23:56:47.960: D/dalvikvm(30728): GC_EXTERNAL_ALLOC freed 1925 objects / 139800 bytes in 362ms
05-29 23:56:49.840: I/Database(30728): sqlite returned: error code = 1, msg = no such table: vd_offer
05-29 23:56:49.850: E/Database(30728): Error inserting offer_desc_long=test offer_desc=test offer_date_end=test offer_id=1 offer_recur=test offer_name=test venue_id=1 offer_date_start=test offer_cost=1
05-29 23:56:49.850: E/Database(30728): android.database.sqlite.SQLiteException: no such table: vd_offer: , while compiling: INSERT INTO vd_offer(offer_desc_long, offer_desc, offer_date_end, offer_id, offer_recur, offer_name, venue_id, offer_date_start, offer_cost) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:40:43.837

您有两个（！！！）类被调用`DatabaseHelper`，其中只有一个具有创建表的代码。您需要丢失没有表创建代码的一个，并确保指向另一个来创建数据库。

**编辑**

您应该在 dbhelper 类中包含所有数据库活动，然后实例化它并在需要时使用它。摆脱`DatabaseHelper`@中的类`vdOffer`并使用它：

```
private DBAdapter mDbhelper;
mDbHelper = new DBAdapter(this);
mDbHelper.open(); 
```

然后在那里创建插入方法并访问它们。

```
mDbHelper.insertOffer(parameters); 
```

# javascript - keyup 不适用于动态加载的文本区域

> ID：10842945
> 
> 赞同：3
> 
> 时间：2012-06-01T00:19:27.653
> 
> 标签：javascript, jquery, delegates, textarea, keyup

其他事件类型似乎在这里工作正常 - 例如，`mouseenter`：

```
$("body").delegate(".textareas", "mouseenter", myalert); 
```

但是使用`keyup`, or `keypress`- 它不会工作。除了这一行的事件类型外，我没有更改代码中的任何其他内容。例子：

```
$("body").delegate(".textareas", "keyup", myalert); 
```

我输入了一个文本区域，但现在`myalert`没有被调用。

我正在使用 jquery 1.7.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:38:44.817

您可以使用 on 进行绑定

[http://jsfiddle.net/Jy2rA/](http://jsfiddle.net/Jy2rA/)

```
$('button').click(function () {
    $('body').append('<textarea>');
});

$('body').on('keyup', 'textarea', function() {
    $('p').fadeIn(function(){$(this).fadeOut()});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:46:56.737

`DOMSubtreeModified`做的比我需要的要多，但至少它似乎也注意到任何输入的文本，所以如果其他人遇到同样的问题，这对我来说是一种工作，直到找到更好的解决方案。

# php - class_exists 似乎一直在调用类构造函数

> ID：10842947
> 
> 赞同：-2
> 
> 时间：2012-06-01T00:19:40.573
> 
> 标签：php

编辑：

我修正了我的拼写错误，并且调用一个类不区分大小写

我看到了，如果我有

```
class A
{
    public function __construct()
    {
        echo 'hello';
    }
} 
```

并这样做

```
if (class_exists('a'))
    $class = 'a';

$a = new $class(); 
```

我再看看吧

```
hellohello 
```

如果我注释掉`if statement`那我很好，它会`echo`出来的

```
hello 
```

如何停止`class_exists()`运行类构造函数？

编辑：

这是我的用法

```
foreach ($this->getNamespace() as $ns) {

                    //if (class_exists($ns . '\\' . $controller))
                        $controller = $ns . '\\' . $controller;

                    if (class_exists($ns . '\\' . $model))
                        $model = $ns . '\\' . $model;
                }

                $model = new $model($this->config);
                $controller = new $controller($this->config); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:35:31.450

运行以下代码时：

```
class A
{
    public function __construct()
    {
        echo 'hello';
    }
}

if (class_exists('a'))
    $class = 'a';

$a = new $class(); 
```

我得到：

```
hello 
```

您的问题可能在其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:23:11.267

您的示例代码中有一些错误。这是正确的代码：

```
<?php
class a // Class name is lower case
{
    public function __construct() // It's __construct not __constructor
    {
        echo 'hello';
    }
}

$class = 'stdClass';
if (class_exists('a')) { // Missing a closing parenthesis here
    $class = 'a';
}

$a = new $class(); 
```

这输出：

```
hello 
```

[查看演示](http://codepad.viper-7.com/b4W0iE)

# static - 使用 Libtool 强制将静态库链接到共享库

> ID：10842949
> 
> 赞同：12
> 
> 时间：2012-06-01T00:19:54.500
> 
> 标签：static, shared, autotools, libtool

我有一个**使用 libtool**编译成两个对象的库 ( *libfoo* ) ：libfoo.a 和 libfoo.so。

 **我还必须**使用 libtool**创建另一个库 ( *libbar* )，它将是一个包含所有 libfoo 代码的共享库 (libbar.so)。

为了做到这一点，我必须强制*libbar*链接到**libfoo.a**，而不是 libfoo.so。

我在一个**自动工具**环境中，所以我必须使用标准的*configure.in*或*Makefile.am*规则来解决这个问题。

我尝试了几件事，例如在 configure.in ：

```
LDFLAGS="$LDFLAGS "-Wl,-Bstatic -lfoo -Wl,-Bdynamic" 
```

这总是导致链接行上的 -Wl 标志；但是 -lfoo 已经消失并且在它的开头被放置在绝对路径形式（ */opt/foo/lib/libfoo.so ）中。*

我也试过：

```
LDFLAGS="$LDFLAGS "-L/opt/foo/lib libfoo.a" 
```

或在 Makefile.am 中：

```
libbar_la_LDADD = -Wl,-Bstatic -lfoo -Wl,-Bdynamic 
```

和

```
libbar_la_LTLIBRARIES = libfoo.a 
```

等等等等（有很多很多变种！）

但我认为我绝对没有足够的 Autotools/Libtool 知识来单独解决这个问题。我一直无法在网上找到有关它的信息，总是略有不同的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:09:44.380

您可能可以使用[便利库](http://www.gnu.org/software/automake/manual/html_node/Libtool-Convenience-Libraries.html)。便利库是未安装的中间静态库。您可以使用前缀`noinst`来构建一个。

```
noinst_LTLIBRARIES = libfoo_impl.la

lib_LTLIBRARIES = libfoo.la libbar.la
libfoo_la_LIBADD = libfoo_impl.la
libbar_la_LIBADD = libfoo_impl.la 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T14:48:07.177

标准方法是`libfoo`使用`--disable-shared`. 是静态链接还是动态链接是用户做出的决定，因此实际上没有办法强制它作为包维护者，但是`libbar`如果存在，您可以将配置设置为失败`libfoo.so`（我不确定一个干净的方式这样做，并相信这将是一个坏主意，因为它确实是用户的选择。）我认为最好的选择是让用户使用 构建`libfoo`，`--disable-shared`但您可以通过仅在 libfoo/ 中指定静态库来强制选择配置.ac：

```
LT_INIT([disable-shared]) 
```

请注意，如果这样做，将无法构建`libfoo`为共享库。也许这就是你想要的。**

# c# - 如何在不使用 API 登录的情况下检索公共 Google 文档？

> ID：10842950
> 
> 赞同：3
> 
> 时间：2012-06-01T00:20:03.717
> 
> 标签：c#, .net, google-docs

我在网上分享了一些文件给公众。有没有什么方法可以在不登录的情况下使用 Google API 来检索这些文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:01:58.173

如果您已共享可公开访问的文档，您可以共享其下载 URL 以在不登录谷歌的情况下下载它。**要通过 google api**构建下载 URL ，您需要具有该特定文档的资源 ID。

有关更多信息，请查看：[Google Docs：下载文档和文件](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T03:29:53.413

你会做的是

```
// http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx
WebClient wc = new WebClient();

// http://msdn.microsoft.com/en-us/library/ms144200.aspx
string priceList=wc.DownloadString(
    new Uri(
        "https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0Aic3jYFcLTrldEhQU1dDTzdTdFBhaVA4OGtPX2FUMUE&single=true&gid=0&output=txt");

// http://msdn.microsoft.com/en-us/library/3cc9y48w.aspx
wc.Dispose(); // Free resources

// http://msdn.microsoft.com/en-us/library/tabh47cf.aspx
string[] lines = priceList.Split(
    new string[] {
        "\r\n",
        "\n\r", // Rarely ever used, but be prepared
        "\n" // Match this and
        "\r" }, // this last
StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:27:10.417

这是我为文档执行此操作的方式：

```
using (WebClient wc = new WebClient()) {
    string priceList=wc.DownloadString("https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0Aic3jYFcLTrldEhQU1dDTzdTdFBhaVA4OGtPX2FUMUE&single=true&gid=0&output=txt");
    string[] lines = priceList.Split('\n');
} 
```

这将为变量获取文本格式的电子表格`priceList`。

# mysql - 在 MYSQL 中出现重复键错误。未找到重复项

> ID：10842953
> 
> 赞同：1
> 
> 时间：2012-06-01T00:20:37.993
> 
> 标签：mysql, database

我有一张桌子。（代码取自表格生成代码，我没有写这个）

```
DROP TABLE IF EXISTS `CatalogueBasket`;
CREATE TABLE  `CatalogueBasket` (
  `ID` int(11) NOT NULL auto_increment,
  `Shopper` char(35) NOT NULL default '',
  `ItemLink` int(11) NOT NULL default '0',
  `Quantity` int(11) NOT NULL default '0',
  `Created` datetime NOT NULL default '0000-00-00 00:00:00',
  `ExpectedDelivery1` datetime default NULL,
  `ExpectedDelivery2` datetime default NULL,
  `Comments` char(255) default NULL,
  `Status` int(10) unsigned default NULL,
  `QuantityShipped` int(10) unsigned default NULL,
  `HarmonyNumber` int(10) unsigned default NULL,
  `StartDate` datetime default NULL,
  KEY `ID` (`ID`),
  KEY `Shopper` (`Shopper`),
  KEY `ItemLink` (`ItemLink`),
  KEY `Quantity` (`Quantity`),
  KEY `Created` (`Created`)
) TYPE=MyISAM; 
```

尝试在此表末尾插入新行时，我收到以下消息。

```
Duplicate entry '116604' for key 1 
```

插入语句是：

```
INSERT INTO CatalogueBasket (Shopper,ItemLink,Quantity,Created, Status, StartDate) 
VALUES ('0.80916300 1338507348',58825,1,'2012-06-01 09:58:23', 0, '0-0-0') 
```

我假设它正在谈论 ID 列。

如果我运行以下查询，我会得到 116603 作为最后一个键

```
SELECT * FROM `CatalogueBasket` order by ID desc limit 1 
```

对此的任何见解/帮助表示赞赏。

# php - PHP ZipArchive::open 不会创建 zip 文件

> ID：10842964
> 
> 赞同：1
> 
> 时间：2012-06-01T00:22:44.143
> 
> 标签：php, ziparchive

我不能让 ZipArchive 创建一个 zip 文件，但它不会给我任何错误，除了在 $zip->close(); 上返回 False；

我正在尝试在一个目录中创建一个 zip 存档，该目录比进行操作的目录低一些。

```
$file_name = 'example.txt';  // or whatever, I'm including a few

$zip = new ZipArchive();

$path = getcwd() . '/output/run1/';
$zip_name = 'files_run1.zip';
$zip_p_name = $path . $zip_name;

$res = $zip->open($zip_p_name, ZIPARCHIVE::CREATE);
if (!($res ===TRUE))     echo 'failed, code:'.$res;
else
  {
    if (file_exists($zip_path . '/' . $file_name))
      {
        $add = $zip->addFile($zip_path . '/' . $file_name);
        if (!($add)) echo "didn't work";
      }
    else echo "File doesn't exist!";

    $close = $zip->close();
    if ($close)    echo 'File Closed';
    else           echo 'fail!!';
  } 
```

那一点点只输出“失败！！”。有什么我想念的想法吗？

# jquery - 如果在 jQuery 中单击，则为 div 设置动画

> ID：10842965
> 
> 赞同：1
> 
> 时间：2012-06-01T00:22:46.197
> 
> 标签：jquery, html, jquery-animate, positioning

所以，我最近一直在学习 jQuery，我看了一些教程，似乎它不起作用。所以在这里我想做..

每当我单击#search_top 时，我希望我的#container css 属性顶部为 60 像素，否则为 0 像素。

下面是我用的。

```
$("#search_top").click(function() {
    if($("#container").top() == 60) {
        $("#container").animate({top:"0px"}, 1000);
    } else {
        $("#container").animate({top:"60px"}, 1000);
    }
}); 
```

提前致谢。:) 希望这个问题对你来说很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:40:13.107

你的问题是`.top()`不存在的。你可以`.offset().top`改用。

[jquery offset()](http://api.jquery.com/offset/)和[jquery position()](http://api.jquery.com/position/)

> offset() - 获取匹配元素集中第一个元素相对于文档的当前坐标。
> 
> position() - 获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。

```
$("#search_top").click(function() {
    if($("#container").offset().top == 60) {
        $("#container").animate({top:"0px"}, 1000);
    } else {
        $("#container").animate({top:"60px"}, 1000);
    }
}); 
```

[现场演示](http://jsfiddle.net/dXDVh/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:47:48.500

也许你应该使用

```
 if (parseInt($("#container").css('top')) == 60){
   //do stuff
 } 
```

jQuery`.css()`方法可用于设置或检索 css 属性。欲了解更多信息，请单击[此处](http://api.jquery.com/css/)

# scala - 未找到 scalacheck/scalatest：如何在 sbt/scala 中添加它？

> ID：10842966
> 
> 赞同：5
> 
> 时间：2012-06-01T00:22:46.523
> 
> 标签：scala, sbt, scalatest

我已经在我的 ubuntu12 上从[http://typesafe.com/stack/download](http://typesafe.com/stack/download)安装了 typesafe-stack，然后我创建了一个 play 项目（g8 typesafehub/play-scala），现在我想将 scalatest 或 scalacheck 添加到我的项目中。

所以 my_app/project/plugins.sbt 有以下几行：

```
// The Typesafe repository 
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.1") 
```

然后我使用 addSbtPlugin 添加了 scalatest：

```
addSbtPlugin("org.scalatest" %% "scalatest" % "2.0.M1" % "test") 
```

现在当我运行'sbt test'时它失败并显示以下消息

```
[info] Resolving org.scalatest#scalatest;2.0.M1 ...
[warn]  module not found: org.scalatest#scalatest;2.0.M1
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/org.scalatest/scalatest/scala_2.9.1/sbt_0.11.3/2.0.M1/ivys/ivy.xml
[warn] ==== local: tried
[warn]   ~/.ivy2/local/org.scalatest/scalatest/scala_2.9.1/sbt_0.11.3/2.0.M1/ivys/ivy.xml
[warn] ==== Typesafe repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/org/scalatest/scalatest_2.9.1_0.11.3/2.0.M1/scalatest-2.0.M1.pom
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-    releases/org.scalatest/scalatest/scala_2.9.1/sbt_0.11.3/2.0.M1/ivys/ivy.xml
[warn] ==== public: tried
[warn]     http://repo1.maven.org/maven2/org/scalatest/scalatest_2.9.1_0.11.3/2.0.M1/scalatest-2.0.M1.pom 
```

我不明白的是：为什么它使用这个[http://repo.typesafe.com/typesafe/releases/org/scalatest/scalatest_2.9.1_0.11.3/2.0.M1/scalatest-2.0.M1.pom](http://repo.typesafe.com/typesafe/releases/org/scalatest/scalatest_2.9.1_0.11.3/2.0.M1/scalatest-2.0.M1.pom) URL真正的[http://repo.typesafe.com/typesafe/releases/org/scalatest/scalatest_2.9.1/2.0.M1/scalatest_2.9.1-2.0.M1.pom](http://repo.typesafe.com/typesafe/releases/org/scalatest/scalatest_2.9.1/2.0.M1/scalatest_2.9.1-2.0.M1.pom)？

与 scalacheck 有完全相同的问题：它还尝试使用 sbt-version 特定的 artifactId 下载，而存储库只有 scala-version 特定的。

我究竟做错了什么？我知道 sbt 某处必须有一个开关，而不是使用 sbt-version 作为工件 URL 的一部分？

我也尝试在我的 plugins.sbt 中使用它

```
libraryDependencies += "org.scalatest" %% "scalatest" % "2.0.M1" % "test" 
```

但看起来它被 sbt 完全忽略了，并且 scalatest.jar 没有出现在类路径中：

```
my_app/test/AppTest.scala:1: object scalatest is not a member of package org
[error] import org.scalatest.FunSuite 
```

因为 sbt clean && sbt test 的输出有很多 Resolving org.easytesting#fest-util;1.1.6 或只是另一个库，但没有关于 scalatest。

## 我使用 scala 2.9.1 和 sbt 0.11.3，尝试使用 scalatest 2.0.M1 和 1.8；缩放检查：

```
resolvers ++= Seq(
  "snapshots" at "http://oss.sonatype.org/content/repositories/snapshots",
  "releases"  at "http://oss.sonatype.org/content/repositories/releases"
)

libraryDependencies ++= Seq(
  "org.scalacheck" %% "scalacheck" % "1.9" % "test"
) 
```

* * *

具有相同的结果，即它使用不存在的 sbtVersion 特定的 POM URL。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T04:38:50.333

Scalatest 不是一个构建插件，而是一个测试库。你应该像这样添加它：

```
libraryDependencies += "org.scalatest" %% "scalatest" % "2.0.M1" % "test" 
```

您应该将其添加到`build.sbt`项目的基本目录（您称为“my_app”），而*不是*`project/plugins.sbt`.

它`0.11.3`在 URL 中尝试查找的原因是因为构建插件与您正在使用的 SBT 版本相关联。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T04:43:01.493

该`plugins.sbt`文件和`addSbtPlugin`用于添加 sbt 插件。不是依赖。

使用您使用的模板，您应该在`project/Build.scala`. 你会发现一个部分：

```
val appDependencies = Seq(
  // Add your project dependencies here,
) 
```

将其替换为：

```
val appDependencies = Seq(
  "org.scalacheck" %% "scalacheck" % "1.9" % "test",
  "org.scalatest" %% "scalatest" % "2.0.M1" % "test"
) 
```

它应该可以工作。

# scala - 为什么scala的并行序列没有包含方法？

> ID：10842974
> 
> 赞同：7
> 
> 时间：2012-06-01T00:23:24.003
> 
> 标签：scala, parallel-processing, scala-2.9

为什么

```
 List.range(0,100).contains(2) 
```

工作，同时

```
 List.range(0,100).par.contains(2) 
```

才不是？

这是为未来计划的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T01:58:48.893

非[目的论](http://en.wikipedia.org/wiki/Teleology)的答案是，这是因为`contains`定义在`SeqLike`而不是在`ParSeqLike`。

如果这不能满足您的好奇心，您可以发现`SeqLike`'s`contains`是这样定义的：

```
def contains(elem: Any): Boolean = exists (_ == elem) 
```

因此，对于您的示例，您可以编写

```
List.range(0,100).par.exists(_ == 2) 
```

`ParSeqLike`也缺少其他一些方法，其中一些很难有效地实现（例如`indexOfSlice`），而另一些则出于不太明显的原因（例如`combinations`- 可能因为这仅对小型数据集有用）。但是，如果您有一个并行集合，您也可以使用`.seq`它返回到线性版本并恢复您的方法：

```
List.range(0,100).par.seq.contains(2) 
```

至于为什么库设计者忽略了它......我完全在猜测，但也许他们为了简单起见而想减少方法的数量，而且它几乎同样易于使用`exists`。

这也提出了一个问题，为什么在所有集合的祖父`contains`上而不是在你找到的地方定义？一个可能的原因是for在语义上与 on和的方法不同。A是 a ，因此如果定义为，则需要采用元组参数；然而's只需要一个论点。鉴于此，我认为应该在- 也许这是一个将被纠正的疏忽。`SeqLike``GenTraversableOnce``exists``contains``Map``Set``Seq``Map[A,B]``Traversable[(A,B)]``contains``Traversable``contains``(A,B)``Map``contains``A``contains``GenSeqLike`

（起初我认为并行序列可能没有，`contains`因为在并行集合上找到目标后搜索打算停止的位置比线性版本效率低很多（在找到值后，各种线程做了很多不必要的工作：看到[这个问题](https://stackoverflow.com/questions/8470162/understanding-parallel-exists-and-find)），但这不可能是正确的，因为`exists`在那里。）

# html - 在没有 JavaScript 的情况下，将两列 HTML 表调整为仅右列

> ID：10842980
> 
> 赞同：1
> 
> 时间：2012-06-01T00:24:40.100
> 
> 标签：html, css, html-table

我想只使用 CSS 和 HTML 来完成以下操作，而不是使用 JavaScript。

我有一个看起来像这样的简单 HTML 表格。两列都包含动态内容，但左侧有一个可滚动的 div。我希望该可滚动 div 的显示高度根据表格调整大小，并且表格大小*仅*由`column2`.

```
<table>
    <tr>
        <td class="column1">
            <div>
            ...
            </div>
        </td>
        <td class="column2">
            <div>
            ...
            </div>
        </td>
    </tr>
</table> 
```

我希望表格只根据动态内容调整其高度`column2`，而不是`column1`，这样我就可以拥有一个可滚动的 div，其大小为在呈现页面时自动`column1`设置的表格高度。`column2`

`height()`我找到了使用jQuery的解决方案，但是当我使用或查找右列的高度并适当设置左列内的div时，性能很差`outerHeight()`，尤其是当右列包含大量HTML元素时他们自己的可滚动div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:41:46.000

您可以使用绝对定位：

```
table {
    position: relative;
}

td {
    background: red;
    width:200px;
}

.column1>div {
    height:100%;
    overflow: auto;
    position: absolute;
    top:0;
    width:200px;
}
```

```
<link rel="stylesheet" href="del.css">
<table>
    <tr>
        <td class="column1">
            <div>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>Text
            </div>
        </td>
        <td class="column2">
            <div>
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>Text
            </div>
        </td>
    </tr>
</table>
```

也可用作[jsfiddle](http://jsfiddle.net/73b49/)。

# visual-studio-2010 - 使用 TFS 时 Visual Studio 2010 冻结

> ID：10842981
> 
> 赞同：4
> 
> 时间：2012-06-01T00:24:48.880
> 
> 标签：visual-studio-2010, tfs

当我尝试在 TFS 或使用 TFS 的项目中执行大多数操作时，例如将文件添加到项目中，主界面会冻结。

我查看了调用堆栈，在检查项目是否处于活动状态时，它似乎处于死锁状态。

我曾尝试下载一份全新的代码副本，但这并没有帮助。

我正在使用安装了 SP1 的 VS2010。

这是刷新我的挂起更改后冻结时主线程的调用堆栈的顶部

```
ntdll.dll!_ZwWaitForSingleObject@12()  + 0x15 bytes
ntdll.dll!_ZwWaitForSingleObject@12()  + 0x15 bytes
Tfsprovider.dll!NVseeFC::CCriticalSection::Lock()  + 0x1d bytes
Tfsprovider.dll!CSccManager::fIsSolutionFolderProject()  + 0x3b bytes
Tfsprovider.dll!CSccManager::IsActive()  + 0x153 bytes
Tfsprovider.dll!CVsSccUI::Exec_icmdSccRefreshStatus()  + 0xbd bytes
Tfsprovider.dll!CVsCommandTargetMap<CVsSccUI,IOleCommandTarget>::Exec()  + 0x6a bytes
Tfsprovider.dll!CVsCommandTarget<NVseePkgsVssProvider::CGridBarDialog,IxNull>::Exec()  + 0x26 bytes
Tfsprovider.dll!CVsSccPackage::Exec()  + 0xa9 bytes
Tfsprovider.dll!CVsSccHatHelper::RefreshStatus()  + 0x3c bytes
[Managed to Native Transition]
Microsoft.VisualStudio.TeamFoundation.VersionControl.dll!Microsoft.VisualStudio.TeamFoundation.VersionControl.VssProvider.RefreshStatus() + 0x35 bytes
Microsoft.VisualStudio.TeamFoundation.VersionControl.dll!Microsoft.VisualStudio.TeamFoundation.VersionControl.ToolWindowPendingCheckinsForm.Microsoft.TeamFoundation.VersionControl.Controls.IPendingCheckinHost.RefreshPendingCheckins() + 0x69 bytes
Microsoft.TeamFoundation.VersionControl.Controls.dll!Microsoft.TeamFoundation.VersionControl.Controls.PendingCheckinsChannelControl.OnRefreshPendingCheckins() + 0x3d bytes
Microsoft.TeamFoundation.VersionControl.Controls.dll!Microsoft.TeamFoundation.VersionControl.Controls.PendingCheckinsChannelControl.RefreshSelectedChannel() + 0x22 bytes
Microsoft.VisualStudio.TeamFoundation.VersionControl.dll!Microsoft.VisualStudio.TeamFoundation.VersionControl.CommandHandlerPendingCheckins.Refresh_Exec(Microsoft.VisualStudio.TeamFoundation.CommandHandler handler, Microsoft.VisualStudio.TeamFoundation.CommandHandler.Command command, int commandId) + 0x13 bytes
(Other calls removed, they don't look relevant) 
```

有没有其他人遇到过这个问题，或者知道解决方法？

更新：界面在等待大约 8 分钟后恢复生机。在此期间，TFS 服务器通过网络向我发送了大约 60,000 个数据包。

更新 2：我通过手动重新创建 SLN 文件解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T23:37:38.043

不幸的是，这种阻塞行为是一个“设计使然”的问题。在 Visual Studio 2010 中，团队资源管理器（和一堆其他 VS 组件）将同步执行许多操作，并在 Visual Studio shell 中阻塞 UI 线程，尤其是在源代码控制操作上。

使源代码控制操作异步是 Visual Studio 2012 的设计目标之一 - [http://blogs.msdn.com/b/bharry/archive/2011/09/01/wrapping-up-tfs-11-version-control-改进.aspx](http://blogs.msdn.com/b/bharry/archive/2011/09/01/wrapping-up-tfs-11-version-control-improvements.aspx)

# javascript - 无法设置 innerHTML 的属性

> ID：10842983
> 
> 赞同：0
> 
> 时间：2012-06-01T00:24:58.917
> 
> 标签：javascript

我有一个小脚本，它可以抓取一个文件并以 Javascript 输出。然后在输出之后我想编辑innerHTML。

但它说它不能设置它。“未捕获的 TypeError：无法将属性 'innerHTML' 设置为 null”

这就是我所拥有的：

```
function call_file(file,div_id){

var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById(div_id).innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET",file,true);
xmlhttp.send();

}

call_file('test.php','main'); //main = div_id to display content in 
document.getElementById('total').innerHTML = 'test'; 
```

我的 test.php 有：

```
<div id="total"></div> 
```

我想知道为什么它不能设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:31:20.687

您设置 total 的 innerhtml 的调用发生在异步发生的状态更改事件之前。在根据预测的添加标记修改 dom 之前，您必须确保您的 Ajax 调用已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:29:42.493

将此行的第二个参数从 'main' 更改为 'total'，因为那是 DIV，您希望内容如下：

call_file('test.php','main'); //main = div_id 显示内容

# javascript - 我的 Javascript 渐变无法正常工作

> ID：10842986
> 
> 赞同：0
> 
> 时间：2012-06-01T00:25:58.053
> 
> 标签：javascript

我目前正在使用 Javascript 和 HTML 画布元素编写交互式应用程序。我正在编码的一件事是不透明度渐变。我的渐变应该从透明渐变到部分不透明，但我定义为创建渐变的位置的整个区域只是部分不透明，不会从透明中渐变。这是我的代码：

```
function draw() {

var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var grd = ctx.createLinearGradient(0, 1000, 0, 0);

grd.addColorStop(0.5, "rgba(255, 255, 255, 0.5)");
grd.addColorStop(1, "rgba(255, 255, 255, 0)");
ctx.fillStyle = grd;
ctx.fillRect(0, 660, 1000, 10);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:55:05.230

它与您在`createLinearGradient`和中使用的尺寸有关`fillRect`。现在，您将渐变区域定义为一个非常高的细矩形 [(0,0) 到 (0,1000)]。但是，然后将渐变矩形绘制为一个非常大的矩形 [(0,660) 到 (1000,10)]。

我不确定您想要的输出是什么样的，但您的线路似乎`ctx.fillRect`是错误的。尝试以下对我有用：

```
function draw() {

  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
  var grd = ctx.createLinearGradient(0, 1000, 0, 0);

  grd.addColorStop(0.5, "rgba(255, 255, 255, 0.5)");
  grd.addColorStop(1, "rgba(255, 255, 255, 0)");
  ctx.fillStyle = grd;
  ctx.fillRect(0, 10, 1000, 660);

} 
```

如果你有兴趣，还有[jsFiddle](http://jsfiddle.net/9vg6M/)

# jquery - Fancybox 高度不会听

> ID：10842992
> 
> 赞同：6
> 
> 时间：2012-06-01T00:26:57.083
> 
> 标签：jquery, fancybox, height

我正在使用最新的 Fancybox v2.0.6 代码，但我遇到了一个我似乎无法解决的问题。

这是我的代码：

```
$("a.postlink").fancybox({

    'width'             :   860,
    'height'        :   600,
    'autoScale'     :   false,
    'autoDimensions'        :   false,
    'type'          :   'iframe'
}); 
```

除了一直设置为自动的高度之外，一切似乎都运行良好。如果我检查 Firebug，我会看到高度被设置回“自动”。

```
<div class="fancybox-wrap fancybox-desktop fancybox-type-iframe fancybox-opened" style="width: 890px; height: auto; display: block; position: absolute; top: 1111px; left: 312px; opacity: 1;">
<div class="fancybox-skin" style="padding: 15px;">
<div class="fancybox-outer">
<div class="fancybox-inner" style="width: 860px; height: 200px; overflow: auto;">
<iframe scrolling="auto" frameborder="0" hspace="0" name="fancybox-frame1338509511183" class="fancybox-iframe" src="http://localhost:8888/quepasa/?edition=112802"></iframe></div>
<a class="fancybox-nav fancybox-prev" title="Previous"><span></span></a>
<a class="fancybox-nav fancybox-next" title="Next"><span></span></a></div>
<div class="fancybox-item fancybox-close" title="Close"></div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T00:36:44.293

```
'autoScale'     :   false 
```

这是`'autoSize' : false`fancybox版本：2.0.6

# javascript - 在 Backbone.js 事件中实现切换

> ID：10842993
> 
> 赞同：5
> 
> 时间：2012-06-01T00:27:02.213
> 
> 标签：javascript, jquery, backbone.js

我想在 Backbone 中实现一个可逆动画，就像我们在 jquery 中一样：

```
$('a.contact').toggle(
function(){
    // odd clicks
},
function(){
    // even clicks
}); 
```

我的问题是如何在主干的事件语法中做到这一点？如何模仿功能，功能设置？

```
events : {
  'click .toggleDiv' : this.doToggle
},

doToggle : function() { ??? } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T01:10:52.660

Backbone 的视图事件直接委托给 jQuery，并允许您通过回调方法访问所有标准 DOM 事件参数。因此，您可以轻松地在元素上调用 jQuery 的切换方法：

```
 Backbone.View.extend({

  events: {
    "click a.contact": "linkClicked"
  },

  linkClicked: function(e){
    $(e.currentTarget).toggle(
      function() {
        // odd clicks
      },
      function() {
        // even clicks
      }
    );
  }

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-16T22:49:36.753

我一直在寻找解决这个问题的方法，我只是按照老式的方式去做。我还希望能够从我的应用程序的其他视图中找到我的 hideText() 方法。

所以现在我可以从任何其他视图中检查“showmeState”的状态，并根据我想用它做什么来运行 hideText() 或 showText()。我试图通过删除诸如渲染和初始化之类的内容来简化下面的代码，以使示例更加清晰。

```
var View = Backbone.View.extend({
  events: {
    'click': 'toggleContent'
  },
  showmeState: true,
  toggleContent: function(){
    if (this.showmeState === false) {
      this.showText();
    } else {
      this.hideText();
    }
  },
  hideText: function() {
    this.$el.find('p').hide();
    this.showmeState = false;
  },
  showText: function() {
    this.$el.find('p').show();
    this.showmeState = true;
  }
});

var view = new View(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:29:23.733

您要在视图中切换的元素是否接收事件？如果是这样的话：

```
doToggle: function() {
  this.$("a.contact").toggle()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T03:31:33.333

我实际上相信这样做的唯一方法`events`是添加 a`trigger`以将实际流程保持在一起。老实说，必须以这种方式使用切换似乎有点笨拙。

```
Backbone.View.extend({

  events: {
    "click .button": "doToggle"
  },

  doToggle: function(e){
    var myEle = $(e.currentTarget);
    $(e.currentTarget).toggle(
      function() {
        // odd clicks
      },
      function() {
        // even clicks
      }
    );
    myEle.trigger('click');
  }

}); 
```

使用它可能更清洁

```
Backbone.View.extend({

  el: '#el',

  initalize: function() {
    this.render();
  },

  doToggle: {
    var myEle = this.$el.find('.myEle');
    myEle.toggle(
      function() {
        // odd clicks
      },
      function() {
        // even clicks
      }
    );
  },

  render: function(e){

    //other stuff

    this.doToggle();

   return this;
  }

}); 
```

# python - 在另一个类的类函数中使用变量（python）

> ID：10842996
> 
> 赞同：3
> 
> 时间：2012-06-01T00:27:16.960
> 
> 标签：python, class, instance-variables

我想使用我在一个类的函数中声明的变量，在另一个类中。

例如，我想在另一个类中使用变量“j”。是否可以？（我在某处读到它可能与实例变量有关，但完全无法理解这个概念）。

```
class check1:
    def helloworld(self):
        j = 5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T00:32:33.253

```
class check1:
    def helloworld(self):
        self.j = 5

check_instance=check1()
print (hasattr(check_instance,'j'))  #False -- j hasn't been set on check_instance yet
check_instance.helloworld()          #add j attribute to check_instance
print(check_instance.j)  #prints 5 
```

但是您不需要将新属性分配给类实例的方法...

```
check_instance.k=6  #this works just fine. 
```

现在您可以像使用任何其他变量一样使用`check_instance.j`(或)。`check_instance.k`

在您了解以下内容之前，这似乎有点像魔术：

```
check_instance.helloworld() 
```

完全等价于：

```
check1.helloworld(check_instance) 
```

（如果您稍微考虑一下，那就解释了`self`参数是什么）。

我不完全确定您要在这里实现什么-还有类变量由类的所有实例共享...

```
class Foo(object):
    #define foolist at the class level 
    #(not at the instance level as self.foolist would be defined in a method)
    foolist=[]  

A=Foo()
B=Foo()

A.foolist.append("bar")
print (B.foolist)  # ["bar"]
print (A.foolist is B.foolist) #True -- A and B are sharing the same foolist variable. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:29:48.163

`j`其他班级看不到；但是，我认为您的意思是`self.j`，可以。

```
class A(object):
    def __init__(self, x):
        self.x = x

class B(object):
    def __init__(self):
        self.sum = 0
    def addA(self, a):
        self.sum += a.x

a = A(4)
b = B()
b.addA(a)    # b.sum = 4 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-01T00:47:16.873

使用类继承很容易“共享”实例变量

例子：

```
class A:
    def __init__(self):
        self.a = 10

    def retb(self):
        return self.b

class B(A):
    def __init__(self):
        A.__init__(self)
        self.b = self.a

o = B()
print o.a
print o.b
print o.retb() 
```

# joomla - joomla 中的部分内容

> ID：10842997
> 
> 赞同：1
> 
> 时间：2012-06-01T00:27:49.473
> 
> 标签：joomla

我已经安装了 Joomla！2.5.4 在我的本地服务器上。在 jommla 1.5 中，管理面板中有“内容部分”和“按部分内容”的选项。在 jommla 2.5.4 中没有这样的选项。我在网上搜索过这个他们说“按部分内容”被删除了。我想根据 joomla2.5.4 中类似于 joomla 1.5 的部分显示内容。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:04:52.240

在 Joomla 1.5 中有一个 Section -> Category 的两层系统。自 1.6 以来，这已被无限嵌套的类别系统所取代。所以现在你可以像这样安排你的内容：类别 -> 子类别 -> 子子类别 .... 等等。它更加灵活。