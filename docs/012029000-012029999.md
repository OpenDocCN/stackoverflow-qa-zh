# StackOverflow 问答 12029000-12029999

# google-maps-api-3 - kml 不显示

> ID：12029001
> 
> 赞同：1
> 
> 时间：2012-08-19T18:41:47.420
> 
> 标签：google-maps-api-3, kml

我正在使用 google API 编写一个应用程序，该应用程序从我的本地服务器加载一个 kml 文件。但是文件没有显示，地图“移动”到一个未指定的位置。为了测试这一点，我只是尝试来自 google API 参考的 kml 示例：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">

<title>Google Maps JavaScript API v3 Example: KmlLayer KML</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAWcYJaMe2mN1u2NYz4ztmffINxGcEpB64&sensor=false&language=he"></script>
<script>

function initialize() {
    var chicago = new google.maps.LatLng(41.875696,-87.624207);
    var mapOptions = {
        zoom: 11,
        center: chicago,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        }

    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    //var ctaLayer = new google.maps.KmlLayer('http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml');
    var ctaLayer = new google.maps.KmlLayer('http://www.pgl.co.il/maps/testlyr/cta.kml');
    ctaLayer.setMap(map);
}

</script>
</head>
<body onload="initialize()">
<div id="map_canvas"></div>
</body>
</html> 
```

当文件位于 Google 服务器中时它工作正常，但是当文件在我的服务器中时（windows，iis 5.1），html 运行但地图不显示 kml 文件。我已经在 iis 的标题部分定义了 mime 类型。

怎么了？感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:20:47.510

Google 的服务器无法访问该文件。

如果我将您的代码中的 URL 放入 Google 地图，它会显示：

[在http://www.pgl.co.il/maps/t](http://www.pgl.co.il/maps/t)找不到文件....

> 建议：
> 
> *   确保 URL 拼写正确。
> *   确保文件存在。

和[http://www.feedvalidator.org](http://www.feedvalidator.org/check.cgi?url=http%3A%2F%2Fwww.pgl.co.il%2Fmaps%2Ftestlyr%2Fcta.kml)一样：

> 服务器返回超时[帮助]
> 
> 对不起
> 
> 尝试验证此 Feed 时出错。
> 
> 可能的原因：
> 
> 1.  地址可能不正确。确保地址拼写正确。尝试直接在浏览器中加载提要，以确保该地址存在提要。
> 2.  Feed 可能暂时不可用。服务器可能已关闭或太慢。稍后再试。
> 3.  验证器可能会被破坏。如果提要存在，服务器很好，并且问题是可重现的，请在 feedvalidator-users 邮件列表上告诉我们。

你确定：

1.  您的服务器配置为提供 kml 文件
2.  该文件在正确的位置

# vb.net - VB.NET My.Settings 数据表未保存

> ID：12029003
> 
> 赞同：2
> 
> 时间：2012-08-19T18:41:50.743
> 
> 标签：vb.net, datatable, my.settings

我有一个要保存到 My.Settings 数据表的数据表但是当我重新打开应用程序时，我发现该表没有保存

```
My.Settings.Datatable = someDatatable 
```

上述陈述是否有问题或我应该做的其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:00:05.883

分配一个[`TableName`](http://msdn.microsoft.com/en-us/library/system.data.datatable.tablename.aspx)，例如：

```
If My.Settings.Datatable Is Nothing Then
    My.Settings.Datatable = New DataTable
    My.Settings.Datatable.TableName = "Datatable"
    My.Settings.Datatable.Columns.Add("ID", GetType(Int32))
    For i As Int32 = 1 To 1000
        My.Settings.Datatable.Rows.Add(i)
    Next
    My.Settings.Save()
End If 
```

如果我重新打开应用程序，数据表仍然存在。

# c# - 什么技术可以在不改变 URL 的情况下改变页面内容？

> ID：12029004
> 
> 赞同：1
> 
> 时间：2012-08-19T18:41:56.577
> 
> 标签：c#, asp.net

我在一些调查网站上看到了这一点。他们在客户端使用什么 C# 代码来保持 URL 相同，但是当单击“下一步”按钮时，保持相同的**aspx**页面

1.  **没有**任何查询字符串；
2.  连网址中的一个字符都没有任何变化；和
3.  网格、数据、内容、问题不断变化？

谁能给出一个代码示例如何实现这一目标？

我的主要查询是如何在代码隐藏中完成更改页面数据并维护相同的 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:51:51.327

没有什么比在服务器端维护的会话更简单的了。在会话中存储一个“当前问题编号”，在每次成功的回发时增加它，然后你就会得到你想要的。

另一种可能性 - 包含“当前问题编号”的 cookie。

当然，cookie 和 session 在查询字符串中都是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:58:02.523

“更改页面数据并保持相同的 url。” 答案是[Server.Transfer](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer.aspx)。此方法将保留 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:58:40.637

**Next**按钮可以使用HTTP POST 方法提交表单。表单数据可能包含会话、问题和响应数据。该站点使用它来构建新的响应。与 GET 不同，POST 不会将数据合并到 URL 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:12:33.147

开发人员通常会使用 AJAX 来完成此任务。它背后的基本前提是**只有页面的特定部分**（例如网格或内容区域）会进行服务器调用并检索结果（使用 Javascript）。达到的效果是没有完整的回传，这就是为什么您看不到 URL 或参数发生变化的原因。

[可以使用 jQuery、纯 Javascript 或 Microsoft 的UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)来做到这一点。

oleksii 的评论也有一些很好的链接：

> 这就是[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)的魔力。为此有很多 JQuery 插件，例如[这个](http://archive.plugins.jquery.com/project/pagination)带有[现场演示](http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm)的插件。您还可以使用 JQuery [Get](http://api.jquery.com/jQuery.get/)或[Post](http://api.jquery.com/jQuery.post/)或任何其他使用 XmlHttpRequest 对象的包装器轻松对其进行编程。

# php - 用纯javascript返回和嵌入图像，比如php？

> ID：12029006
> 
> 赞同：0
> 
> 时间：2012-08-19T18:42:05.283
> 
> 标签：php, javascript, image, cross-domain, embed

我无法确定是否可以将 html 或 js 文档作为图像嵌入，如下所示：

```
<img src="http://blah.com/image.js" /> 
```

或者

```
<img src="http://blah.com/image.html" /> 
```

一般的想法是，当浏览器尝试访问文件时，它会在客户端执行文件并获取实际图像，然后像往常一样嵌入它。我意识到这可以用 PHP 轻松完成，但我正在寻找非服务器解决方案。

问题是它传输的内容类型是错误的，更重要的是我认为这违反了每一个跨域和沙盒规则，我认为没有任何办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T19:05:30.980

只要您链接到的文档可以显示二进制数据，这将起作用。

按照这篇文章用javascript解决二进制加载，[http ://emilsblog.lerch.org/2009/07/javascript-hacks-using-xhr-to-load.html](http://emilsblog.lerch.org/2009/07/javascript-hacks-using-xhr-to-load.html)

然后你也可以像这样在img标签中包含base64数据

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAIAAABL1vtsAAAYImlDQ1BJQ0MgUHJvZmlsZQAAWAmtWXk4Vd333+fOLtc8z/M8y5x5zpiZiGue47qENBhSoYEkohQyFg1CUkKoSIZCoTQIUSmkDPlt3nrf9/t8n+9/v/M8d5/PWeez11577XX2XntfALjryJGRYShGAMIjqBR7M0NBVzd3QfwYIAA0AAAFiGTf6EgDOzsr+PQ/ru9DANl8NSi3qet/kP6XmMnPP9oXAMQOEnz8on3DIa4DAN3oG0mhAoDd1Ce6lxq5iU9BzEqBBkJcuokD/8KNm9jnL9yzxXG0N4KcCQAIdGQyJRAA0hyUC8b6BkI99HQA4Jgj/IIjYDVBiHV9g8h+AHB7Q45sePieTZwJsaTPv/QE/guTyT5/6ySTA//Gf/UF1oQNGwdHR4aR47ce/j+L8LAY6K+tix+WdNGhDpbwzg79FudLNnGAmBPiE0H+Fla/5WWRVEP73/LmYKqFI8SskPMsKMbc6Teejgl1MoCYF8rXQvdYbvKhn1CcET42thAzQyzqG20Efb/ZFkotIcjR5TfHys/f2ARiGEUoV8oe+z/8oOhYhz/yhIQgI5s//BDyjs3xpof8dDIFoi17UHn+YWab7QpD+ZVIqt2mnZtt9UaE2fzuC+p9AMV0k7MpX/GP3urvpm1B1CBHcyiHNqMZqRTHTQ7sI5o3INjUAmJoG1oxiGL+R64fGbYV07Au2pESY7/pB1GIA/wjnDZ9uClP9yMbb/oW+gRdCEwBGVCAP/ABEWAGCAIrYASMf5eCUB4BZb5gDwiDP4ogw5832A/Yfuxb7HPsBPbFHxms+ZsHgoEfxH/p+ld9KHcACeAT1OoPov+0huHG6GK0MVaw1Ic/ZYwGRvPPu965hrk/+LetgbCu3G/dhr+tj4Ua1//wvIKTKX/w7zo+f9f4b5tMwXvogcA/DMVqxRnFtT/1/+kxzgRnjDPHmeKk0EfRN9Fd6Fb0I3QzugEIolvQjege9N1N/NuuP62QoWTTK5sejgaW0Iv+IGbrKeJPe//hpZi/Gb810EvTqwJ7WCsChMJ3wX+34LxldfB/aYmBDB/YYgjkWv49Hr/twohD76piDDE60M/Qxxh2DDeQw2yDHjfA6MExUIXSf0bxP3sjBwK2vB271ZdQ8AH2I5zqH0eFsQSM9kTGU4IDg6iCBnC29JcVtIjwlZcVVFZUUgabc+8mB4AF+605FWF/+o8sPAUAzRwY67v+kflOANDwFQCaD//IxKLhp5UIQOesbwwldksdwGzesIAIGOBXwQX4gQiQhB5RBmpAG+gDE7AD2AJH4AZ2wxgOAuHQ4r0gESSBNJABToEz4BwoAiWgAlwFN0ADaAatoBN0gz7wHIyCCTAJZsE8+A5WEQTBIySEBeFCBBAxRAZRRjQQXcQEsULsETfEGwlEIpAYJBFJQTKQbOQccgmpRK4jt5FW5BHSj7xA3iAzyDdkBYVG0aFYUXwocZQCSgNlgLJEOaI8UYGoKFQCKhV1ApWHKkZdQdWjWlHdqOeoCdQsagkN0LRodrQQWg6tgTZC26Ld0QFoCvoAOh2diy5G16CbYCwOoifQc+ifGByGBSOIkYMjaY5xwvhiojAHMJmYc5gKTD3mAWYQ8wYzj/mFJWF5sTJYLawF1hUbiN2LTcPmYsuwt7Ad8HuexH7H4XDsOAmcOox2N1wIbh8uE3ceV4u7j+vHvcMt4fF4LrwMXgdviyfjqfg0fD7+Cr4FP4CfxP8g0BIECMoEU4I7IYKQTMglVBHuEQYIU4RVGkYaMRotGlsaP5p4mpM0pTRNNE9pJmlWiUxECaIO0ZEYQkwi5hFriB3EMeICLS2tMK0m7U7aYNpDtHm012gf0r6h/UnHTCdNZ0TnQRdDd4KunO4+3Qu6BRKJJE7SJ7mTqKQTpEpSO+kV6Qc9C708vQW9H/1B+gL6evoB+s8MNAxiDAYMuxkSGHIZbjI8ZZhjpGEUZzRiJDMeYCxgvM04zLjExMKkxGTLFM6UyVTF9IhpmhnPLM5swuzHnMpcwtzO/I4FzSLCYsTiy5LCUsrSwTLJimOVYLVgDWHNYL3K2ss6z8bMto3NmS2OrYDtLtsEO5pdnN2CPYz9JPsN9iH2FQ4+DgMOf45jHDUcAxzLnDyc+pz+nOmctZzPOVe4BLlMuEK5srgauMa5MdzS3Du593Jf4O7gnuNh5dHm8eVJ57nB85IXxSvNa8+7j7eEt4d3iY+fz4wvki+fr51vjp+dX58/hD+H/x7/jACLgK5AsECOQIvAR0E2QQPBMME8wQeC80K8QuZCMUKXhHqFVoUlhJ2Ek4VrhcdFiCIaIgEiOSJtIvOiAqLWoomi1aIvxWjENMSCxM6KdYkti0uIu4gfEW8Qn5bglLCQSJColhiTJEnqSUZJFks+k8JJaUiFSp2X6pNGSatKB0kXSD+VQcmoyQTLnJfpl8XKaspGyBbLDsvRyRnIxcpVy72RZ5e3kk+Wb5D/rCCq4K6QpdCl8EtRVTFMsVRxVIlZaYdSslKT0jdlaWVf5QLlZyokFVOVgyqNKl+3yWzz33Zh24gqi6q16hHVNtV1NXU1ilqN2oy6qLq3eqH6sAarhp1GpsZDTaymoeZBzWbNn1pqWlStG1pftOW0Q7WrtKe3S2z33166/Z2OsA5Z55LOhK6grrfuRd0JPSE9sl6x3lt9EX0//TL9KQMpgxCDKwafDRUNKYa3DJeNtIz2G903RhubGacb95owmziZnDN5ZSpsGmhabTpvpmq2z+y+Odbc0jzLfNiCz8LXotJifof6jv07HljSWTpYnrN8ayVtRbFqskZZ77A+bT1mI2YTYdNgC2wtbE/bjttJ2EXZ3dmJ22m3s2DnB3sl+0T7LgcWBy+HKofvjoaOJx1HnSSdYpzanBmcPZwrnZddjF2yXSZcFVz3u3a7cbsFuzW6492d3cvcl3aZ7Dqza9JD1SPNY8hTwjPO89Fu7t1hu+96MXiRvW56Y71dvKu818i25GLyko+FT6HPvK+R71nfWT99vxy/GX8d/2z/qQCdgOyA6UCdwNOBM0F6QblBc8FGweeCv4aYhxSFLIfahpaHboS5hNWGE8K9w29HMEeERjzYw78nbk9/pExkWuRElFbUmah5iiWlLBqJ9oxupLLCJLcnRjLmcMybWN3Ygtgfe5333oxjiouI64mXjj8WP5VgmnB5H2af7762RKHEpMQ3+w32XzqAHPA50HZQ5GDqwclDZocqkohJoUlPkhWTs5MXU1xSmlL5Ug+lvjtsdrg6jT6NkjZ8RPtI0VHM0eCjvcdUjuUf+5Xul/44QzEjN2Mt0zfz8XGl43nHN04EnOg9qXbywincqYhTQ1l6WRXZTNkJ2e9OW5+uzxHMSc9ZPON15lHuttyis8SzMWcn8qzyGvNF80/lr50LOve8wLCgtpC38Fjh8nm/8wMX9C/UFPEVZRStXAy+OHLJ7FJ9sXhxbgmuJLbkQ6lzaddljcuVZdxlGWXr5RHlExX2FQ8q1Ssrq3irTlajqmOqZ654XOm7any1sUau5lIte23GNXAt5trH697Xh25Y3mi7qXGzpk6srvAWy630eqQ+vn6+IahhotGtsf/2jtttTdpNt+7I3ylvFmouuMt29+Q94r3UexstCS1L9yPvz7UGtr5r82obbXdtf/Zg54PeDsuOh52mne1dBl0tD3UeNj/SenT7scbjhm617voe1Z5bT1Sf3OpV661/qv60sU+zr6l/e/+9Ab2B1kHjwc5nFs+6n9s87x9yGhoZ9hieGPEbmX4R9uLry9iXq6OHxrBj6eOM47mveF8Vv5Z6XTuhNnH3jfGbnrcOb0ff+b6bfR/9fm0y9QPpQ+6UwFTltPJ084zpTN/HXR8nZyNnV+fSPjF9Kvws+bnui/6XnnnX+cmvlK8b3zIXuBbKF7ctti3ZLb36Hv59dTn9B9ePip8aP7tWXFamVveu4dfy1qXWm35Z/hrbCN/YiCRTyFu5ABqWqIAAAL6Vw32RGwAsfQAQ6f/aG20xYLqLQA7EOJj7GsMsYBDhRzyRShTM71F30BLocxgOTCFWFtuFi8AL4AcJZ2i8ifK0GNpXdF/pSQwqjLuYkpmvs0yx8bK7cZzlHOMW44nkvcfPIBAoeE+YS4Qi2iy2IqEmGSlVLv1SFi8nJ2+jEKAYp5SkfFgledt+VapaoPpODWlNjOYrrdvaudtjdJx01fV49FH6cwbDhh1Gt4zLTQpNs83SzZMt9u2gWkZYBVv72/jZ+tn57Qyyj3CgOu53SnM+4XLWtcit3L12V71Hs2fb7k6vbu+n5EGfYd9Rv7f+nwN+BbEEy4aYhwaEHQ2/EtG3ZzGKg6IR7UaNi8mMLdh7Je5e/EDCTCJqP/8BnYNeh1KSqpIHU34d5k9TOmJ01OVYePqRjNLMruNfTvKdss/KzO7OYTjjlJt/diyf95x7wdnCvguEIv2LcZdqi6dLhS97lFHKD1WcqiyuaqweuDJfw1KrfS34esGNp3WEW+r1zg3UxlO3q5va7jxvnrz79d5Ky0Yrug3TjntA00HsxHeud8097HtU/pjSrdQ91ZP1RP3JRG/105g+vX5C/8BAwaDfM/lnP593DGUPk0c0XnC/WH/5ZvTB2OXxtFf+rw0meCcW3zx+W/Qu9r3dpByMsq9TL6cfzTR/rJu9Pnft083PNV8q5q9+bf82v6ixVLjM/+PuSvSa7i+ujQ04/liYK24HUaARISLGyFFkGCWDSkFNwtyqDWbGLVgr7CTuGF4N/4FwnsaDKESco52FEQAYSIyiTBrM9ixU1jNsTeyTnMxcBtx7ea7yTvOLCfgKXhLqE/4uyi2mLb5LIlrymFS+dLFMiewFudPyyQphivZK25RZlKdUbsJIMFNjVHuhXqwRpqmmBbQeaWdv99AR1/mi26R3VN/TQMOQ1fCLUTeMhlRTHzN9cz7zNYvRHU2W+VZx1u42erbidiS7pZ2v7R87NDiWOGU5J7lQXMluDu7Gu1Q9xDzZd9PsXvda8J4lv/eZ8B33G/UfDRgLHA96Hfw6ZDx0NOxl+MuI0T3jcKaepMxGL1DXYnF7meN44oUSJPbJJ6rt1ztgcdDpkG8SNTktpSD1xuHutJmj9MdU0t0y9mcWH+888fEUY5ZatufptJzaM8O5X/JAPvM58QKdQpfz1Au5RXcvThWzlZiVJsL572H5VCWuSrza5Irf1ZSa0trOazM3SDeV6+xvBdfvb8hqLL1d39R1Z6R5+u7PFuJ93lb5NpV2sQcsHaBjrnO4q/Vh9aOcx4nd/j02TzR6JZ8K9fH2cw1wDXI/438uMiQ5rDCi+kLrpf6o6ZjNuPur0NcpE8UwHtbfa07u/9A1zTkT+rF1TuLTpS9K82+/3Vws/9784/Oq+nrO1vhj4G5BEbiD02AM4UOckXzkPWobKh01g7ZBN2EUMTVYVWwbzhW3iM8haBOmaS4T42i96axIGvRiDByMJCY8M8KCZsWy4dgZOHg4xblUuU14nHmD+cL4fQRcBS2FtgtLijDAjKpb7KJ4hISGxE/JW1IR0mLSwzIHZQVl78uR5RH5UgVzhTnFbCVNpTfKGSrqKm+3nVTVVZ1VO6tuqP5JI1/TRHNeq0DbTHthe5GOlc4P3VI9e70N/XoDiqGy4YJRnXGMiZrJsmmDWby5tvmqxd0dByz1rYBVm3WqjbktyfaZXeHOQHsVB5RDP4yRGGcLFz6Xz64tbqfcfWGUEDzGPK/vPurl5a1BZiF/8enxveJ3yj8mwC1QJ0goGBs8E/Ik9HrYmfD4CM89hpEyUVwUPGUp+i31aUxTbMnejLioeKcEjX1ciUjiygHkIM0h5iTuZJEUmVSVw1pp+kdMj1oes0v3zKBkHj1edOLmyc5Tw1mT2V9OL+esnfmV+yuPmK94zq0gtbDm/HARuChxybqYUpJb2nj5RdlGhVKlX9XZ6p6roGZbbfC1C9cHb+Lrtt+Kqr/cMHybpknrTmjzubsP7y3eF2g1b4tqz3vQ0vG2C/tQ6pHt4/juip7xXu6nu/sq+1cH7Z+1D3mNcL5YGZN+1fKmf5I60/D59MLiz4eb4//XGdnmmoBTA6CkGAAXeEZibw1AqSwAYspw/WgBwI4EgKMmQHHlA6TtJEDMav5eP+iBNNxZhoGTcNf4HKzAVcQYCUVOIzeR58gyihulh/KD0XQNNQL3blJoB/R+dAX6GQZg5DEemHRME+YjlgdrjU3CNmEXcYq4cNwV3Ce8Ij4W30IgEtwI1TQoGg+aO0Q+YgqceXbRDtM50Q2RXElj9D70MwxRDCuMqUwMTAXMksz1LCYsz1mDWNfYstml2R9weHGscuZxqXMNccfycPI08e7mw/Jd5XcVwArUCQYIcQv1C2eImIliRTvFjonbSrBLjEoWSflIi0p/kKmQDZGTlfssf0Nhr6KeEo3SkPJllb3bHFTV1LjUfqm/g1n1Va1s7b1wntLXFdOj0fui/8ygybAOxuEtkwbT22a3zW9b1O+4blllVWR92ibVlmrnu9POXt9B2VHcid+Z04Xdld2N211wl6SHiqfebmuvXd4h5ASf4759/iwBzoF5QS9COEIdwjLD2yO+R0pEOVMOR9+gvoqV3BsT15nAs4+aOHhA42BpEkdyVirz4fwjYkfr040zRo5T4So1nF2VU5R7J5++4MwFzYs+xVmlnWUblbrVB6+2XsPcMKs7Vl/UeKvpSfPHFlKrentoR2XXt8cmPRd7F/qNBjOed4+gXsqP7XwVNpH0Nvv9xQ+d058+fp978/nqvOfXxQXq4uvv2suZP56tMK1arO1fr/o1tDV/MAIFeI4VB88OOsAsPBXYjgQgWUgd3Of/QomhrFAxqCLUI9Qi3LPboBPR1ehRDC1cV/ZgijFDWFqsATYeW49dwqnh4nF38Vi4jy7EzxEMCOcIyzRuNPeJMsQCWgba43SsdBdIMqRmejv6KYYkRgHGViZ/ZhJzA4snK8JazmbHtsZexeHOSeJs59rHrcq9wHOTl8qnyrfMf0cgSdBciFFoVLhchCpqJMYmNi1+TyJXMlrKTlpehiTzSbZXrlY+S4Gq6KakqyymQq/yc9tH1Vdqg+qPNFo1m7RuaV/bfkWnUrdcr0y/zKDcsNbojvFDk2HTKbMfFsQdvJYKVgbWDjYBtnF2GTvP21c41Dm2Ow06f3BZcWNyl9pl5OHpGb87F+43BshffQX9vP0vBkwECQZ7hRSGjoQzRZjvORB5PepdNBvVJCYp9kkcd3xIQnMi4/6AA/cOcSRFJfekShxOSZs4qnOsKkM4s/AE98mCLIHsshzFM3fPWuWNn9tTiD6fV+R9SbOEvfRn2UTFk6qWK3U1NdeqblTUldVnNkY22Ter3GNumW/tbb/acbxrzyOnbt0nUk9Z+9YGXj9rGsoccXzJPNoxHvmaZeLaW4t3Y5PhU9jp0x/ZZzPnlj7bfzk/P/qNYUF90X4p+Hv0csKPhJ8xK+Gr3mv263q/ZDfYtsafFWjCM7bjoBG8R5gQfSQSuYB0IV/huY4lPMepQo2i6dEG6Fj0VfR7DC/GGZOFeQLH3QKbiR3CCeOicO3wBCUaP0BQJ5TQsNNkEdmIRbRKtCN0qSRV0jR9EYMrIyvjAFMOsyuLEMs31i62S+wHOXw5d3CpcYvz8PCy8K7zfeDvF2gVrBOqFi4TKRUtF7sq3iDRKTkiNSu9IcsqJyWvp+CkGKZ0WLlI5c62CTWCurKGl+YJrXva8zoiui56mfptBj+MpI13m+Sa9pmTLGx2ZFu+sBax2WPbspPJ3tOhzHHB2dglz/Wru92uOk+B3Se9seQkn89+Gv4pAX1BAsFRIR1hPOExEQORylFnKGtU/5j2vdxx0fG9++QST+3/cTDg0Mtkx5Shw7vTZo8ePDaZYZh56QRy0u/Uo2zF0wVnaHITzn7JDzz3rtDn/Lsi+4v3ixVLLl1mKTtSvl5Jrfp0JfDqu1rytTc3fG5O3gqrX25MaWK6U3JX/V7v/eA2Qnt1x87O1YcVj117iE86nib16w2sPWsYihgRfvF0NHac/dX1CdM3w+/83n/+4DRVOj37UXjWai74U8hnvy/G8wLzb79e/mb37efC+UXFxQdLTksj392/jy87L/f8MPzR8FPsZ9bP9ZWglb5V1dX81fU1n7XWdYH1A+vjv7R/nfk1v7Fjo3Rz/KMDVOAaAS+EzhAmk682NhbEAcBnA7CetbGxWryxsV4CNxtjANwP++t/l00yDp7VF5Zuok6j1EOb939f/wfv9coJu8hVfgAAAZtpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuMS4yIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MjI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MjI8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KykeVMQAAAw1JREFUOBF9VEtrU0EUnrlJ82iNWoNtI6IbbS2iBUEUH910LVWKLqorwS4URLdC86iCKBVcuRKpUlAXoiAiduEP8EUxKrRU7cKmMWpbmza5aXJnPN+Ze5NQoROYxznf+c535syNrFQqQggpJc21oclUO/2/q/f7HaUYoaWQWiMQbsTTaoasD3BtdSa/chwPypmZRblUnscQe6dVq6VpICMWrcxEZ+yUo+zHw4sXDi3dOq9WSkBiMJggZghhIV4prchBYZo2nlMLSwT6Lvv2HlFfx+2H191YcLhYWoVSFgWyAiWIhTnMSkxwSRE6fUVuba+8GSu9HKnyu1jCC21RKCERD3LwUhHO53vO22Gn+BuucCR0dkhEouUXd8vvxggDtaYJnFPm83mWjiaQm/qinKJ6dlws5nQw7Os8JTv7ZXizM/3Fvn2R6g4N3PDt2k+pJMHt9EDLYYs5OTfXQbeiZcDquePbc1I6ZTV+v/Kk13l/U7RuCZ5LiBXtTH0EBjJQ6RK18e/CgsbDQgkQQQ4axrD8U048EJNPRankBENyR5+O7LN2dgvLx03Xspg+FjsqF+bnKQhPiaNVuTTz4VVoQ1t4U6yxucUKBFVpWU4+8k+MymK+cuK5bIqhCOTS0k6fiXX78QBMalZQmM9+ez3KhMIKrgtHtzVvb1/f2hHsSgbVUqCxDU3ApTFE6SYh/GziM1sbItHO3kuF3Pf87JQ9l7Fn0pmZTz+ERTfU1R9vIAw9d6rcLVxn6ilSySQxJVLJaMfBaMcBZhWlQn75T7Ywlyn+mg40tyYTcWCSKVcGZzUqvFskiUoMpRImftUc79loLPyEzW3o9VABMzXIXCjpMx/uqnAcqyVjw3Ad3j2Sy/nRYK80xonB+CB4CeZWzA3TuAMwmcvEqzC9ZxWSvwX2imtXh8xmrRlkxCDpD4YE+XGqJVgrsObjd4DKSCf9stlZ9nl3waphQRpe8N1Uj9WNWxSBLDcekrg6nt0JJnNvcJFc2HFBUA4L10NNZS8zGRZ4OBlsrokNbGYn6CCTAf8AYoEONBF7fygAAAAASUVORK5CYII=" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:53:15.230

该`src`属性必须指向*最终*生成实际图像数据的 URI。也许您应该考虑将其留空，然后创建一个生成[`data:`URI](http://en.wikipedia.org/wiki/Data_URI_scheme)并将其替换为属性的脚本。

# asp.net-mvc-3 - 在 asp.net mvc 3 中实现下拉列表

> ID：12029009
> 
> 赞同：1
> 
> 时间：2012-08-19T18:42:36.577
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我正在自学asp .net mvc3。我研究了很多，但我读得越多，我就越困惑。我想创建一个页面，用户可以在其中注册出售或出租的房产。

我创建了一个如下所示的数据库：

```
public class Property
    {
        public int PropertyId { get; set; }
        public int PropertyType { get; set; }
        ···
        public int Furnished { get; set; }
        ...
} 
```

现在，我想要 dropdownlistfor = PropertyType 和 Furnished。

物业类型将是 1 Flat 2 House 3 Detached House ...

带家具的将是：1 带家具 2 不带家具 3 带家具...

现在，我真的不确定在我的代码中保存这些信息的位置。我的数据库中是否应该有 2 个存储此查找的表？或者我应该有 1 个包含所有查找的表？还是我应该只将这些信息保留在模型中？

模型将如何绑定到 Property 实体中的 PropertyType 和 Furnished？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:44:25.047

通过在数据库中存储属性类型和提供的类型，您可以使用外键强制数据完整性，而不仅仅是存储整数 id，所以我肯定会推荐这个。

这也意味着如果您想添加新类型，它是面向未来的。我知道这些值不会经常改变/永远不会改变，但如果您想在将来添加平房/别墅，您不必重建和部署您的项目，您可以简单地在数据库中添加一个新行。

就其工作方式而言，我建议使用传递给视图的 ViewModel，而不是直接传递数据库模型。这样您就可以将数据库模型与视图分开，而视图只看到它需要的内容。这也意味着您的下拉列表等是强类型的，并且直接在您的视图模型中，而不仅仅是放入 ViewBag 中。您的视图模型可能如下所示：

```
public class PropertyViewModel
{
    public int PropertyId { get; set; }

    public int PropertyType { get; set; }
    public IEnumerable<SelectListItem> PropertyTypes { get; set; }

    public int Furnished { get; set; }
    public IEnumerable<SelectListItem> FurnishedTypes { get; set; }
} 
```

那么您的控制器操作将如下所示：

```
public class PropertiesController : Controller
{
    [HttpGet]
    public ViewResult Edit(int id)
    {
        Property property = db.Properties.Single(p => p.Id == id);

        PropertyViewModel viewModel = new PropertyViewModel
            {
                PropertyId = property.Id,
                PropertyType = property.PropertyType,
                PropertyTypes = from p in db.PropertyTypes
                                orderby p.TypeName
                                select new SelectListItem
                                    {
                                        Text = p.TypeName,
                                        Value = g.PropertyTypeId.ToString()
                                    }
                Furnished = property.Furnished,
                FurnishedTypes = from p in db.FurnishedTypes
                                orderby p.TypeName
                                select new SelectListItem
                                    {
                                        Text = p.TypeName,
                                        Value = g.FurnishedTypeId.ToString()
                                    }

            };

        return View();
    }

    [HttpGet]
    public ViewResult Edit(int id, PropertyViewModel propertyViewModel)
    {
        if(ModelState.IsValid)
        {
            // TODO: Store stuff in the database here
        }

        // TODO: Repopulate the view model drop lists here e.g.:
        propertyViewModel.FurnishedTypes = from p in db.FurnishedTypes
                                orderby p.TypeName
                                select new SelectListItem
                                    {
                                        Text = p.TypeName,
                                        Value = g.FurnishedTypeId.ToString()
                                    };

        return View(propertyViewModel);
    }
} 
```

你的观点会是这样的：

```
@Html.LabelFor(m => m.PropertyType)
@Html.DropDownListFor(m => m.PropertyType, Model.PropertyTypes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:50:10.060

我通常通过在代码中使用枚举来处理这种情况：

```
public enum PropertyType {
    Flat = 1,
    House = 2,
    Detached House = 3
} 
```

那么在你看来：

```
<select>
@foreach(var val in Enum.GetNames(typeof(PropertyType)){
    <option>val</option>
}
</select> 
```

您可以将选项的 id 设置为等于枚举中每个项目的值，并将其传递给控制器​​。

编辑：直接回答您的问题：您可以将它们作为查找存储在数据库中，但对于不太可能改变的小事情，我通常只使用枚举，并节省往返行程。

还要看看这种方法，因为它看起来比我的更好： [Converting HTML.EditorFor into a drop down (html.dropdownfor?)](https://stackoverflow.com/questions/9517627/converting-html-editorfor-into-a-drop-down-html-dropdownfor)

# javascript - 为什么我们在语句中将函数括在括号中两次？

> ID：12029015
> 
> 赞同：1
> 
> 时间：2012-08-19T18:43:35.470
> 
> 标签：javascript

> **可能重复：**
> [javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)
> [解释 JavaScript 封装的匿名函数语法](https://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax)

例如：

```
(function($) {
document.getElementById("foo").innerHTML = 'bar';
})(); 
```

我知道我们想创建自己的范围来防止变量冲突，但为什么 javascript 需要有 ()()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:46:37.353

这使它成为一个自我调用的匿名函数。

```
(function() { 
    /* function body */ 
}) /* <-- end of function definition */ (); // <-- invoke that function immediately 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T19:02:47.957

那没有`()()`，它有`(function(){})()`。

函数语法是`function(){}`，函数调用运算符是`()`。包装函数的括号在技术上并不特殊，您可以将它们替换为`!`：

```
!function(){}() 
```

这样做是行不通的：

```
function(){}() 
```

因为 this 在语句上下文中，所以`function`开始一个函数声明而不是表达式。然后语法会失败，因为函数声明必须有名称。

如果我们有`!function(){}`(or `(function(){}`)，那么它就不能是一个语句，因为`!`(or `(`) 已经需要一个表达式，所以它将被视为一个表达式。

所以你可以在没有任何额外的情况下做到这一点：

```
var a = function() {
        return false;
}(); 
```

因为`var a =`已经在期待一个表达式，`function`不可能是函数声明的开始。

检验您的函数是否将被视为表达式或声明的一种简单方法是问自己，*我可以在这里使用`var x`吗？*

例如：

```
var x; //all is fine, so if I said function here, it would be a start of a function declaration

(var x) //Gives an error, so replacing var x with a function would be a function expression

var myVar = var x; //Gives an error, so replacing var x with a function would be a function expression 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:44:55.933

第一个结果是函数，与`(2)`结果相同`2`。第二个叫它。

# discovery - STM32F4如何从Can1获取第一条消息并将其发送到Can2，Can1和Can2具有不同的速度

> ID：12029016
> 
> 赞同：0
> 
> 时间：2012-08-19T18:43:39.273
> 
> 标签：discovery, bus, stm32, keil, can-bus

我有一个开发套件 STM32f4 发现套件，它有双 Canbus 接口模块。如何从 Can1 获取第一条消息并将其发送到 Can2 ， Can1 和 Can2 具有不同的速度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:38:03.177

我从您的问题中了解到的是您的控制器将从 CAN1 读取并在 CAN2 上写入相同的消息。

在这种情况下，波特率应该没有任何问题。您将从 CAN1 Rx 缓冲区获取数据，您需要做的就是在 CAN2 Tx 缓冲区中写入相同的数据。CAN 控制器会处理 BaudRates，您不必为此烦恼。

# javascript - 使用外部 Javascript 显示日期/时间

> ID：12029019
> 
> 赞同：0
> 
> 时间：2012-08-19T18:44:23.350
> 
> 标签：javascript, javascript-events

我想使用外部 Javascript 代码将当前日期和时间放在我的 XHTML 网站的页脚中。我知道函数“document.write”。但是如何使外部脚本在 HTML 中的不同位置打印日期/时间？

外部脚本：函数 date()

HTML：今天的日期是 date()

我如何实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T18:50:16.370

只需将脚本包含在您的 HTML 中：

```
<script src="/externalscript.js" type="text/javascript"></script> 
```

然后在某处调用该函数。

```
<script type="text/javascript">
    date();
</script> 
```

现在你不应该使用`document.write`，而是用 an 创建一个元素`id`并使用 JS 来修改它。

JS：

```
function date() {
    document.getElementById('mydate').innerHTML = "your date code";
} 
```

HTML：

```
<span id="mydate">this will get updated</span> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T18:48:36.300

`document.write`是邪恶的，你应该了解[dom](/questions/tagged/dom "显示标记为“dom”的问题")操作：

```
function date() {
  document.getElementById("date").innerHTML = new Date().toString()
} 
```

在您的 HTML 中的某处：

```
<p>The date of today is <span id="date">?</span></p> 
```

但是，您需要记住并了解很多事情：

*   `date()`脚本需要在加载 DOM 后执行（或至少在此之后`<span>`）

*   不建议依赖[原始元素 ID](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

*   `innerHTML`有点低级

*   ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:52:44.550

我猜外部脚本是指您在`head`块中引用的外部 .js 文件，例如`<script type="text/javascript" src="../randomscript.js"></script>`.

在您的 HTML 中，您需要一个带有`id`of的元素`date`。

```
<div id="date">?</date> 
```

这是将要更新的 div。在你的脚本中你应该写

```
var d = new Date();
document.getElementById('date').innerHTML = d; 
```

你看，你从哪里引用脚本并不重要，你仍然可以使用外部脚本访问 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T18:52:58.537

我假设“外部脚本”是从外部服务器加载的脚本，即不是从网站本身加载的。

远程脚本（date.js）简单地由

```
function showDate(element) {
  element.text = new Date().toString();
} 
```

然后在您的网站上调用此函数

```
<script type="application/javascript" src="http://www.example.org/date.js"></script>
<p>Now is: <span id="date-element" /></p>
<script type="application/javascript">
showDate(document.getElementById('date-element'));
</script> 
```

将元素传递给函数的优点是该函数是通用的并且不硬编码标识符。

# c# - 如何组合这三组代码

> ID：12029023
> 
> 赞同：0
> 
> 时间：2012-08-19T18:44:52.190
> 
> 标签：c#, winforms, visual-studio-2010

我有三个单选按钮。他们更改事件背后的代码如下：

```
 private void uxRajRadioButton_CheckedChanged(object sender, EventArgs e) 
    {
        if (uxRajRadioButton.Checked == true)
        {
            uxPersonBettingLabel.Text = "Raj";
            GuySelected = 0;
            uxBetNumericUpDown.Maximum =  Guys[GuySelected].Cash;
        }
    }
    private void uxPaulRadioButton_CheckedChanged(object sender, EventArgs e) 
    {
        if (uxPaulRadioButton.Checked == true) 
        {
            uxPersonBettingLabel.Text = "Paul";
            GuySelected = 1;
            uxBetNumericUpDown.Maximum = Guys[GuySelected].Cash;
        }
    }
    private void uxMikeRadioButton_CheckedChanged(object sender, EventArgs e) 
    {
        if (uxMikeRadioButton.Checked == true)
        {
            uxPersonBettingLabel.Text = "Mike";
            GuySelected = 2;
            uxBetNumericUpDown.Maximum = Guys[GuySelected].Cash;
        }
    } 
```

只有三个单选按钮这是可以接受的，但如果我说 7 个单选按钮，每个按钮在其更改事件后面有 20 行代码，那么这将是很多（不必要的？）代码。我试图缩短上述内容并最终得到以下内容。它是否正确？

```
 private void uxRajRadioButton_CheckedChanged(object sender, EventArgs e) 
    { 
         radioButtonCode(this.uxRajRadioButton, 0);
     }
    private void uxPaulRadioButton_CheckedChanged(object sender, EventArgs e) 
    {
        radioButtonCode(this.uxPaulRadioButton,1);
    }
    private void uxMikeRadioButton_CheckedChanged(object sender, EventArgs e) 
    {
        radioButtonCode(this.uxMikeRadioButton, 2);
    }

    int GuySelected=0;
    public void radioButtonCode(RadioButton myRadio, int mybettorIndex)
    {
        if (myRadio.Checked == true)
        {
            GuySelected = mybettorIndex;
            uxPersonBettingLabel.Text = Guys[GuySelected].Name;
            uxBetNumericUpDown.Maximum = Guys[GuySelected].Cash;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:47:47.140

您的第二个代码示例将共性提取到一个函数中，看起来就像我进行此重构的方式。

`UpdateUserInfo`除了名字（可能会稍微好一点）之外，它几乎和你能做的一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:51:10.943

有一个更好的办法。声明一个单选按钮数组并在运行时将它们绑定到上述事件。此绑定代码不会在设计器页面内。这将导致单个`ArrayRadio_checkedChange`事件。在这种方法中，您可以使用 sender 属性找出正确的单选按钮的索引并采取相应的措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:58:35.073

您能否为所有单选按钮设置相同的事件处理程序？就像是

```
private void uxRadioButton_CheckedChanged(object sender, EventArgs e) 
{ 
     radioButtonCode((RadioButton)sender);
}

public void radioButtonCode(RadioButton myRadio)
{
    if (myRadio.Checked == true)
    {
        int guySelected = getGuySelectedIndex(myRadio);
        uxPersonBettingLabel.Text = Guys[guySelected].Name;
        uxBetNumericUpDown.Maximum = Guys[guySelected].Cash;
    }
}

public int getGuySelectedIndex(RadioButton myRadio)
{
    int index = 0;
    if (myRadio == this.uxRajRadioButton) index = 0;
    else if (myRadio == this.uxPaulRadioButton) index = 1;
    else if (myRadio == this.uxMikeRadioButton) index = 2;
    return index;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T18:54:56.260

您可以使用

```
uxRajRadioButton.CheckedChanged += new EventHandler(rb_CheckedChanged);
uxPaulRadioButton.CheckedChanged += new EventHandler(rb_CheckedChanged);
...

uxRajRadioButton.Tag =new KeyValuePair<string,int>("Raj",0);
uxPaulRadioButton.Tag =new KeyValuePair<string,int>("Paul",1);
....

private void rb_CheckedChanged(object sender, EventArgs e) 
{
    if(!(sender is RadioButton))
         return;
       RadioButton myRadio= sender as RadioButton;
      if (myRadio.Checked == true)
      {
        myRadio.Text = (myRadio.Tag as KeyValuePair<string,int>).Key;
        GuySelected = (myRadio.Tag as KeyValuePair<string,int>).Value;
        uxBetNumericUpDown.Maximum =  Guys[GuySelected].Cash;
      }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T18:55:48.503

我通常做的是将索引放在标签属性中。这样您就可以将此事件绑定到每个 RadioButton

```
public void uxRadioButton_CheckedChanged(object sender, EventArgs e)
{
    RadioButton myRadio = (RadioButton) sender;
    if (myRadio.Checked)
    {
        GuySelected = (int)myRadio.Tag;
        uxPersonBettingLabel.Text = Guys[GuySelected].Name;
        uxBetNumericUpDown.Maximum = Guys[GuySelected].Cash;
    }
} 
```

# google-apps-script - Google Apps 脚本类 GmailApp 批量操作？

> ID：12029027
> 
> 赞同：5
> 
> 时间：2012-08-19T18:45:26.797
> 
> 标签：google-apps-script, google-sheets, gmail

我已经在 GAS 上闲逛了一个月左右，而且我已经相当熟悉使用批处理操作来读/写电子表格（例如 getValues()、setValues()）。但是，我目前正在编写一个脚本，该脚本使用类 GmailApp 从 Gmail 中提取大量数据，我的代码运行非常缓慢（甚至超时），我似乎无法弄清楚如何使用批处理操作对于我正在尝试做的事情。到目前为止，这是我的代码（更改了电子邮件地址和名称）：

```
 function fetchEmails(){
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var threads = GmailApp.search('in: label:searchedLabel');
  var messages = new Array();

  function Email(message){
  this.date = new Date(message.getDate());
  this.body = message.getBody();
  }

  for(var i=0;i<threads.length;i++){
    for(var j=0;j<threads[i].getMessageCount();j++){
      if(threads[i].getMessages()[j].getFrom()=="firstName lastName <email@domain.com>"){
       var message = new Email(threads[i].getMessages()[j]);
       messages.push(message);
      }
    }
  }  
} 
```

如您所见，我正在使用给定标签查询我的电子邮件以查找所有线程，为自定义电子邮件对象（它将具有电子邮件的正文和日期作为属性）创建一个对象构造函数。然后我遍历每个线程，当给定的电子邮件与我正在寻找的发件人匹配时，我为该电子邮件创建一个 Email 对象的实例，并将该 Email 对象放入一个数组中。目标是最终我将拥有一组电子邮件对象，这些对象都来自我想要的发件人。但是，您可能已经注意到代码调用 Google 的 API 的方式过于频繁，但我似乎无法弄清楚与 Gmail 交互的批处理操作。有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T20:23:30.247

我认为您正在寻找 GmailApp.getMessagesForThreads()。

```
function fetchEmails(){
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var threads = GmailApp.search('label:searchedLabel');
  var messages = new Array();

  function Email(message){
    this.date = new Date(message.getDate());
    this.body = message.getBody();
  }

  var gmailMessages = GmailApp.getMessagesForThreads(threads);

  for(var i=0;i<thread.length;i++){
    var messagesForThread = gmailMessages[i];
    for(var j=0;j<messagesForThread.length;j++){
      if(messagesForThread[j].getFrom()=="firstName lastName <email@domain.com>"){
       var message = new Email(messagesForThread[j]);
       messages.push(message);
      }
    }
  }  
} 
```

当然，你也可以写得更简洁一些（抱歉，我不能找到机会来了解 JavaScript 的奇妙之处）：

```
function fetchEmails(){
  var messages = Array.prototype.concat.apply([], GmailApp.getMessagesForThreads(
      GmailApp.search('label:searchedLabel')).map(function(messagesForThread) {
    return messagesForThread.filter(function(message) {
      return message.getFrom() == "firstName lastName <email@domain.com>";
    }).map(function(message) {
      return { date: new Date(message.getDate()), body: message.getBody() };
    });}));
} 
```

这总共需要对 Gmail 进行 2 次调用，因此速度会很快。

事实上，如果您按照上面的建议将“来自”部分集成到搜索中，您所需要的只是：

```
function fetchEmails(){
  var messages = Array.prototype.concat.apply([], GmailApp.getMessagesForThreads(
    GmailApp.search('label:searchedLabel from:email@domain.com')).map(
      function(messagesForThread) {
        return messagesForThread.map(function(message) {
          return { date: new Date(message.getDate()), body: message.getBody() };
      });}));
} 
```

最后，由于您实际上并不关心线程结构，因此您可以在映射之前连接数组，这会导致：

```
function fetchEmails(){
  var messages = GmailApp.getMessagesForThreads(
        GmailApp.search('label:searchedLabel from:email@domain.com'))
      .reduce(function(a, b){ return a.concat(b); })
      .map(function(message) {
         return { date: new Date(message.getDate()), body: message.getBody() }; 
      });
} 
```

（如果您确实关心线程结构并且您只是给出了一个最小的示例，我将留在前面的示例中）。

# ember.js - 计算属性在 EmberJS 中未正确显示，显示 [object Object]

> ID：12029028
> 
> 赞同：0
> 
> 时间：2012-08-19T18:45:33.777
> 
> 标签：ember.js, towerjs

如果我按照文档在咖啡脚本中有一个 ember 对象

```
Person = Ember.Object.extend
  name: null
  lastName: null
  fullName: Ember.computed ->
    return 'hello'
  .property('name', 'lastName')

person = Person.create
  name: 'Tom'
  lastName: 'Tim' 
```

Using`person.get('fullName')`返回一个 ember 对象而不是全名

```
m =>
    _cacheable: true
    _dependentKeys: Array[1]
    0: "ownerships"
    length: 1
    __proto__: Array[0]
    func: function () {
    __proto__: Ember.Descriptor 
```

因此（我假设），我看到`[object Object]`的不是 fullName

```
<script type="text/x-handlebars" data-template-name="personView">
{{#with App.peopleController.person}}
  <dt>First name</dt>
  <dd>{{name}}</dd>
  <dt>Fullname</dt>
  <dd>{{fullName}}</dd>
{{/with}}
</script> 
```

这呈现：

```
First name
[object Object] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:31:12.943

指点coffeescript给了我一个提示：尝试像这样定义fullName：

```
fullName: (->
   return "hello"
).property('firstName', 'lastName') 
```

我认为在您的示例中，返回的值是函数本身，而不是值。

***编辑***

我试图用 javascript 翻译你的代码：http: [//tinyurl.com/9mh2eho](http://tinyurl.com/9mh2eho)

然后，粘贴到 jsfiddle 中：

[http://jsfiddle.net/Sly7/ksRkd/](http://jsfiddle.net/Sly7/ksRkd/)

两个版本似乎都有效......也许错误在其他地方。

# node.js - 如何让 Heroku 在我的文件系统中识别我的应用程序？

> ID：12029030
> 
> 赞同：2
> 
> 时间：2012-08-19T18:45:41.760
> 
> 标签：node.js, heroku, foreman

我是 Heroku 的新手，我想通过 Heroku 设置我的简单 Node.js 应用程序。我已经尝试按照[Heroku 文档设置节点应用程序](https://devcenter.heroku.com/articles/nodejs)，并且我已经完成了它所说的一切。不幸的是，我被困在[Foreman/Procfile](https://devcenter.heroku.com/articles/nodejs#declare-process-types-with-foremanprocfile)部分。我已经创建了一个 Procfile，就像教程说的那样（保存为 .txt 文件），并将它放在与我的源文件相同的目录中。当我尝试运行 Foreman 时，它显示“错误：Procfile 不存在”。这是有道理的，因为 Heroku 不知道我的应用程序目录在哪里，但我想了解如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:12:27.287

不要将其`Procfile.txt`另存为仅另存为`Procfile`（不点任何内容）

# cocoa-touch - 是否可以重用 NSKeyedUnarchiver？

> ID：12029031
> 
> 赞同：0
> 
> 时间：2012-08-19T18:45:53.763
> 
> 标签：cocoa-touch, nskeyedarchiver, nscoding

我正在开发一款 iOS 游戏，我正在使用该`NSCoding`协议将我的关卡保存在我的编辑器中并将它们加载到游戏中。`NSKeyedUnarchiver`我想知道是否有可能在使用它加载关卡后以某种方式重用它。例如当玩家不想重新开始关卡时。我不能简单地创建和加载关卡的新实例，因为我想保留相同的对象，只需重置它们的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:26:35.970

您可以重新使用传递给解码器的数据。但是，您不能将现有对象“重置”为初始状态。

虽然您可以自己执行此操作，但我建议您使整个对象树无效并从可能缓存的数据中重新加载它们。

这当然取决于对象的数量，但是如果您有足够的对象以使该过程明显变慢，我相信您还有许多其他更重要的优化要做。

# post - Vbulletin 添加对帖子的回复

> ID：12029034
> 
> 赞同：1
> 
> 时间：2012-08-19T18:46:25.077
> 
> 标签：post, button, vbulletin, reply

我正在尝试在帖子中添加回复按钮，例如，如果我将帖子留在线程上，另一个用户可以单击帖子中的回复按钮。

这是一张可以更好地解释它的图片 - [http://www.tiikoni.com/tis/view/?id=2a013d0](http://www.tiikoni.com/tis/view/?id=2a013d0)

感谢您的帮助，我是 vbulletin 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:30:59.477

似乎这是一个愚蠢的问题，您可以在默认工具栏中获得此选项。我只是把它移到帖子里，它成功了

# android - 如何为位图添加外发光？

> ID：12029035
> 
> 赞同：4
> 
> 时间：2012-08-19T18:46:26.947
> 
> 标签：android, bitmap

我正在寻找创建这样的东西：http: [//imm.io/Bcco](http://imm.io/Bcco)

外发光+图像周围的空白区域。我已经看过[如何在位图周围制作发光效果？](https://stackoverflow.com/questions/4334341/how-to-make-glow-effect-around-a-bitmap). 但是那里没有提供任何结论性的答案。

如果这是唯一的选择，我愿意考虑一个骇人听闻的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:57:14.357

制作一个 9-patch png，它是一个带有外部阴影的框，内容标记（右侧和底部）位于白色部分内。然后将其设置为要添加阴影的任何元素的背景。这是我刚刚制作的一个，您可以使用或将给您提供操作的想法。

如果您不熟悉[9 补丁图像，请在此处阅读它们](http://developer.android.com/tools/help/draw9patch.html)

![外影盒](../Images/f182327958fa0f0ed9f0ba61ec990190.png)

*注意：您需要将其另存为 something.9.png*

如果您需要更多或更少的空白，您可以将其放入 draw9patch 并调整两侧。

# c# - 如何防止折叠的 DataGrid 行被删除？

> ID：12029037
> 
> 赞同：0
> 
> 时间：2012-08-19T18:46:41.920
> 
> 标签：c#, wpf, xaml, datagrid

我通过折叠一个 DataGrid 中的一些行并使它们在另一个 DataGrid 中可见，在 2 个 DataGrids 之间共享一个项目集合。

这工作正常，除了错误，如果用户在 DataGrid 之一中按 Ctrl+a 然后按 Del，另一个的内容也会被删除。

我想更改此行为，以便实际删除发生删除的 DataGrid 中可见的项目。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:12:45.883

可以抑制一个解决方案`Ctrl+A`：

```
void DataGridView_KeyDown( object sender, KeyEventArgs e ) {
    if ( e.Modifiers == Keys.Control && e.KeyCode ==  Keys.A ) 
        e.SuppressKeyPress = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:03:48.843

您可能需要挂钩[CollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged.aspx)事件并检查以确保正在删除的 OldItems 可见。如果没有，请将它们重新添加。

这感觉不是一种很好的做事方式。你能不能以某种方式用两个“视图”来包装你的原始集合（我不是指 MVVM 中的“视图”）？是双向绑定吗？

# java - Java 泛型与递归类型参数的界限

> ID：12029042
> 
> 赞同：6
> 
> 时间：2012-08-19T18:47:16.617
> 
> 标签：java, generics, javac, java-7

我有一个基类，它提供了一些基本功能，包括使用子类类型的类型参数`Thing`获取对 a 的引用。因为 Java 没有 self 类型，所以我不能将它用于返回值的类型参数，所以必须采用递归类型参数才能让我们返回正确的 parameterized 。`ThingInfo``Thing``ThingInfo``Thing``ThingInfo`

```
interface ThingInfo<T>
{
    // just an example method showing that ThingInfo needs to know about
    // the type parameter T
    T getThing();
}

class Thing<T extends Thing<T>>
{
    // I need to be able to return a ThingInfo with the type parameter
    // of the sub class of Thing. ie. ThingA.getThingInfo() must return
    // a ThingInfo<ThingA>.
    // This is where Java would benefit from self types, as I could declare
    // the method something like: ThingInfo<THIS_TYPE> getThingInfo()
    // and Thing would not need a type parameter.
    ThingInfo<T> getThingInfo()
    {
        return something;
    }
}

// example Thing implementation
class ThingA extends Thing<ThingA>
{
}

// example Thing implementation
class ThingB extends Thing<ThingB>
{
} 
```

到目前为止一切都很好。此代码根据需要工作。

我还需要表示 s 之间的类型安全关系`Thing`。

```
class ThingRelation<X extends Thing<X>, Y extends Thing<Y>>
{
    X getParent()
    {
        return something;
    }

    Y getChild()
    {
        return something;
    }
} 
```

它并不是那么简单，但这表明了我认为的需要。不过，这一切都很好，还没有错误。现在，`ThingRelation`需要一个接受`ThingRelation`between`Y`和 some other参数的方法`Thing`。所以我更改`ThingRelation`为以下内容：

```
class ThingRelation<X extends Thing<X>, Y extends Thing<Y>>
{
    X getParent()
    {
        return something;
    }

    Y getChild()
    {
        return something;
    }

    <Z extends Thing<Z>> void useRelation(ThingRelation<Y, Z> relation)
    {
        // do something;
    }
} 
```

但是现在我在编译时遇到了这个错误：

```
type argument Y is not within bounds of type-variable X
  where Y,X are type-variables:
    Y extends Thing<Y> declared in class ThingRelation
    X extends Thing<X> declared in class ThingRelation 
```

错误是在行开始`<Z extends Thing<Z>>....`

到底是什么问题？

*更新*：`javac`版本是`1.7.0_05`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:59:13.583

我的确切代码没有错误（使用 jdk1.6.0_20）。

可能是你有一个阴影类型变量吗？显然，您已经将示例编辑为简单的类名（`Thing`等等，顺便说一句，这是一项很好的工作），但也许您编辑的内容超出了您的预期。检查您的源代码中的声明`Y`和`X`类型。

# winapi - 获得托盘区时钟视觉主题的最佳方法是什么？

> ID：12029043
> 
> 赞同：4
> 
> 时间：2012-08-19T18:47:22.280
> 
> 标签：winapi, themes, system-tray

系统的托盘区时钟视觉主题[记录](http://msdn.microsoft.com/en-us/library/bb773210%28v=VS.85%29.aspx)在 MSDN 中，所以我想微软希望我们能够使用它。我想用它来绘制我的任务栏带的背景，以便更好地与托盘区​​域融合。当我尝试

> [OpenThemeData](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759821%28v=vs.85%29.aspx) (NULL, L"CLOCK");

它**总是失败**。我发现获得该主题的唯一方法是找到实际的时钟窗口，并请求其主题：

*   用于`FindWindowEx`定位一个带有`Shell_TrayWnd`类的窗口，然后用类定位它的子窗口，然后用类定位`TrayNotifyWnd`这个窗口的子窗口`TrayClockWClass`。

*   调用 OpenThemeData 并传递实际时钟的窗口句柄。

显然，内部 Windows 窗口类名称没有记录。尽管上面的方法似乎有效，但我宁愿使用不那么脆弱的东西。

**问题：**是否有任何合理的方法来获取托盘区域的时钟视觉主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T12:44:10.760

显然你不能总是使用带有 NULL 的 OpenThemeData
[http://microsoft.public.platformsdk.shell.narkive.com/gkVTBGA2/cannot-open-theme-data-for-tray-notification-area](http://microsoft.public.platformsdk.shell.narkive.com/gkVTBGA2/cannot-open-theme-data-for-tray-notification-area)

> 吉姆·巴里 6 年前
> 
> 您需要有一个可以调用 SetWindowTheme 的 HWND。将 pszSubAppName 设置为“TrayNotifyHoriz”或“TrayNotifyVert”，并将 pszSubIdList 保留为 NULL。然后，您可以调用 OpenThemeData，并将 pszClassList 设置为“TrayNotify”。
> 
> 任何人应该如何弄清楚这些东西完全超出了我的范围。坦率地说，视觉样式文档非常糟糕，绝对是一种耻辱。
> -- Jim Barry，MVP（Windows SDK）

# java - 如何从字符中清除套接字流以便将其用于字节（字节文件传输）？

> ID：12029047
> 
> 赞同：0
> 
> 时间：2012-08-19T18:48:02.087
> 
> 标签：java, sockets, inputstream, serversocket

我正在尝试制作一些包含文件传输的程序。当然，我必须使用字符流进行一些客户端-服务器通信，并且我还需要使用字节流来传输文件。当我使用 println 方法表单 PrintWriter 和 BufferedReader 中的 readLine 时出现问题，因为 readLine 读取行但在流中留下 '\n' 并导致问题（我不是 100% 确定这是问题）在我尝试之后使用字节流传输文件。所以我需要摆脱那个角色，我尝试使用 Reader 类中的 read 方法，但我没有成功。该代码在不使用字符流媒体的情况下完美运行。注意 readLine 的调用如何影响 sizeOfFile。

服务器

```
import java.net.ServerSocket;
import java.net.Socket;

public class Server {
    private static int SERVER_PORT = 9999;
    public static void main(String[] args) {
        try {
            ServerSocket ss = new ServerSocket(SERVER_PORT);
            System.out.println("Server je pokrenut");
            while (true) {
                Socket sock = ss.accept();
                new MultithreadServer(sock);
            }
        } 
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

服务器线程

```
import java.io.*;
import java.net.Socket;
import java.util.*;

public class MultithreadServer extends Thread {
    private Socket sock;
    BufferedReader inChar;
    PrintWriter outChar;
    BufferedInputStream in;
    BufferedOutputStream out;
    DataOutputStream outByte;
    public MultithreadServer(Socket sock) throws Exception {
        this.sock = sock;
        inChar = new BufferedReader(
            new InputStreamReader(sock.getInputStream()));
        outChar = new PrintWriter(new BufferedWriter(new OutputStreamWriter(
            sock.getOutputStream())), true);
        in = new BufferedInputStream(sock.getInputStream());
        out = new BufferedOutputStream(sock.getOutputStream());
        outByte = new DataOutputStream(sock.getOutputStream());
        start();
    }
    public void run() {
        try {
            String request = inChar.readLine();
            System.out.println("Fajl: " + request);
            File file = new File(request);
            BufferedInputStream in = new BufferedInputStream(
                new FileInputStream(file));
            long sizeOfFile = (long) file.length();

            outChar.println("SOME_MESSAGE"); //PROBLEM

            byte[] buffer = new byte[4096];
            int len = 0;
            outByte.writeLong(sizeOfFile);
            long totalyTransfered = 0;
            while ((len = in.read(buffer, 0, buffer.length)) !=-1) {
                out.write(buffer, 0, len);
                totalyTransfered += len;
            }
            System.out.println("Total:" + totalyTransfered);
            out.flush();
        } 
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

客户

```
import java.util.*;
import java.net.*;
import java.io.*;

public class ClientServer {
 static int SERVER_PORT = 9999;
 public static void main(String[] args) throws Exception {
 InetAddress address = InetAddress.getByName("127.0.0.1");
 Socket sock = new Socket(address, SERVER_PORT);
  PrintWriter out = new PrintWriter(new BufferedWriter(
   new OutputStreamWriter(sock.getOutputStream())), true);
  BufferedReader inChar = new BufferedReader(new InputStreamReader(sock.getInputStream()));
  Reader readChar = new InputStreamReader(sock.getInputStream());

 System.out.println("File:");   // choosing file from server
 Scanner consoleInput = new Scanner(System.in);
 String file = consoleInput.next();
 out.println(file);

 DataInputStream in = new DataInputStream(sock.getInputStream());

 System.out.println("Type name of file:");  //choosing name for file on client
 String newFile = consoleInput.next();

 OutputStream outByte = new FileOutputStream(newFile);
 byte[] buffer = new byte[4096];

 System.out.println("aa"+inChar.readLine()+"aa");   //PROBLEM
 System.out.println("SOME_TEXT"+readChar.read()+"SOME_TEXT");  //TRYING TO FIX THE  PROBLEM
   //       in.read(); in.read();                      // DIFFERENT TRY
   long sizeOfFile= in.readLong();                    // BUT IT STILL HAS INFLUENCE OF       sizeOfFile
 System.out.println("Size of file:" + sizeOfFile);

 long totalyTransfered= 0;
 int len = 0;
 while ((len = in.read(buffer,0,buffer.length)) != -1) {
  outByte.write(buffer, 0, len);
  System.out.println("In one pass:" + len);
  sizeOfFile-=len;
  totalyTransfered+=len;
 System.out.println("Total:" + totalyTransfered);
 if (sizeOfFile<=0)break; 
  }
   System.out.println("Available: "+in.available());
  outByte.flush();
  outByte.close();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:32:15.080

我修改了您的代码并成功进行了文件传输，很抱歉我没有时间解决您的代码中的问题，我认为您的代码并不简单:)。

[但是请在下面找到您修改过的代码，它非常简单，我从这里](https://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket)引用了这段代码

```
class Server:
No changes 
```

类客户端服务器：

```
public class ClientServer {

    static int SERVER_PORT = 9999;

    private static final String fileOutput = "C:\\testout.pdf";

    public static void main(String[] args) throws Exception {
        InetAddress address = InetAddress.getByName("127.0.0.1");

        Socket sock = new Socket(address, SERVER_PORT);
        InputStream is = sock.getInputStream();
        PrintWriter out = new PrintWriter(new BufferedWriter(
                new OutputStreamWriter(sock.getOutputStream())), true);
        BufferedReader inChar = new BufferedReader(new InputStreamReader(sock.getInputStream()));
        Reader readChar = new InputStreamReader(sock.getInputStream());

        System.out.println("File:");   // choosing file from server
        Scanner consoleInput = new Scanner(System.in);
        String file = consoleInput.next();
        out.println(file);

        DataInputStream in = new DataInputStream(sock.getInputStream());

        System.out.println("Type name of file:");  //choosing name for file on client
        //String newFile = consoleInput.next();
        //
        //      OutputStream outByte = new FileOutputStream(newFile);
        //      byte[] buffer = new byte[4096];
        //
        //
        //      System.out.println("aa"+inChar.readLine()+"aa");   //PROBLEM
        //      System.out.println("SOME_TEXT"+readChar.read()+"SOME_TEXT");  //TRYING TO FIX THE  PROBLEM
        //      //       in.read(); in.read();                      // DIFFERENT TRY
        //      long sizeOfFile= in.readLong();                    // BUT IT STILL HAS INFLUENCE OF       sizeOfFile
        //      System.out.println("Size of file:" + sizeOfFile);
        //
        //      long totalyTransfered= 0;
        //      int len = 0;
        //      while ((len = in.read(buffer,0,buffer.length)) != -1) {
        //          outByte.write(buffer, 0, len);
        //          System.out.println("In one pass:" + len);
        //          sizeOfFile-=len;
        //          totalyTransfered+=len;
        //          System.out.println("Total:" + totalyTransfered);
        //          if (sizeOfFile<=0)break; 
        //      }
        //      System.out.println("Available: "+in.available());
        //      outByte.flush();
        //      outByte.close();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        FileOutputStream fos = null;
        BufferedOutputStream bos = null;
        int bytesRead;
        try {
            byte[] aByte = new byte[1];
            fos = new FileOutputStream(fileOutput);
            bos = new BufferedOutputStream(fos);

            bytesRead = is.read(aByte, 0, aByte.length);

            do {
                baos.write(aByte);
                bytesRead = is.read(aByte);
            } while (bytesRead != -1);

            bos.write(baos.toByteArray());
            bos.flush();
            bos.close();
            sock.close();
        } catch (IOException ex) {
            // Do exception handling
        }
    }
} 
```

类多线程服务器：

```
public class MultithreadServer extends Thread {

    private Socket sock;
    BufferedReader inChar;
    PrintWriter outChar;
    BufferedInputStream in;
    BufferedOutputStream out;
    DataOutputStream outByte;

    public MultithreadServer(Socket sock) throws Exception {
        this.sock = sock;
        inChar = new BufferedReader(new InputStreamReader(sock.getInputStream()));
        outChar = new PrintWriter(new BufferedWriter(new OutputStreamWriter(sock.getOutputStream())), true);
        in = new BufferedInputStream(sock.getInputStream());
        out = new BufferedOutputStream(sock.getOutputStream());
        outByte = new DataOutputStream(sock.getOutputStream());
        start();
    }

    public void run() {
        try {
            String request = inChar.readLine();
            System.out.println("Fajl: " + request);
            File file = new File(request);
            BufferedInputStream in = new BufferedInputStream(
                    new FileInputStream(file));

            byte[] buffer = new byte[(int) file.length()];

            FileInputStream fis = null;

            try {
                fis = new FileInputStream(file);
            } catch (FileNotFoundException ex) {
                // Do exception handling
            }
            BufferedInputStream bis = new BufferedInputStream(fis);
            //long sizeOfFile = (long) file.length();

            //outChar.println("SOME_MESSAGE"); //PROBLEM

            //byte[] buffer = new byte[4096];
            try {
                bis.read(buffer, 0, buffer.length);
                out.write(buffer, 0, buffer.length);
                out.flush();
                out.close();
                sock.close();

                // File sent, exit the main method
                return;
            } catch (IOException ex) {
                // Do exception handling
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

注意：有少量未使用的代码行，请将其删除。希望它在星期天有帮助:) !!!

# jquery - 使浏览器窗口非常短时使标题全宽

> ID：12029051
> 
> 赞同：1
> 
> 时间：2012-08-19T18:48:51.127
> 
> 标签：jquery, css

我正在看来自 studiopress 的主题[1140](http://demo.studiopress.com/eleven40/)。

当我大大缩短浏览器窗口（作为移动响应主题）时，徽标变为 100% 宽度，使菜单漂亮地落在下面。

知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:56:57.247

这种技术称为[响应式设计](http://www.html5rocks.com/en/mobile/responsivedesign/)并依赖于[媒体查询](http://css-tricks.com/css-media-queries/)。

在这种情况下，他们正在改变这一点：

```
.header-image #title-area,
.header-image #title,
.header-image #title a {
    display: block;
    float: left;
    height: 90px;
    overflow: hidden;
    padding: 0;
    text-indent: -9999px;
    width: 265px;
} 
```

对此：

```
#title {
    width: 100%;
    padding: 18px 0 17px;
}

#title-area {
    float: none;
    text-align: center;
    width: 100%;
} 
```

当浏览器小于`800px`宽时。（查看[他们的 CSS 文件](http://demo.studiopress.com/eleven40/wp-content/themes/eleven40/style.css)并搜索`#title`）。其中最重要的两个部分是删除`float`并将宽度设置为`100%`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:56:07.107

这是 CSS3 媒体查询。例如查看这篇关于[CSS Tricks](http://css-tricks.com/css-media-queries/)的文章。

在这种特殊情况下，下一条规则完成了这项工作：

```
@media only screen and (max-width: 800px) {
    ...
    #title {
        width: 100%;
        padding: 18px 0 17px;
    }
    ...
} 
```

# iphone - 滚动时 AQGridView 滞后

> ID：12029052
> 
> 赞同：2
> 
> 时间：2012-08-19T18:49:25.263
> 
> 标签：iphone, ios, xcode

滚动 AQGridView 时出现延迟。我使用网格视图来显示图像。屏幕上大约有20个。我发现最耗时的是 `UIImage *image = [[UIImage alloc] initWithContentsOfFile:writeFilePath];`大约需要 0.0015 - 0.004s。有没有办法优化网格视图？我看到应用程序也显示了如此多的图像但没有滞后..

编辑：我错了，设置图像时发生了滞后。我试过设置一些占位符 - 在这种情况下一切都很好..

# linux - 在 Perl 中覆盖 Excel 文件的现有工作表

> ID：12029053
> 
> 赞同：0
> 
> 时间：2012-08-19T18:49:25.457
> 
> 标签：linux, perl

[关于我之前提出的问题](https://stackoverflow.com/questions/12026229/overwrite-the-existing-worksheet-in-perl)的参考是：

我的代码如下：

```
 if ( !-e $xls_file ) #Checking whether to create a new Excel file or not
        {
                #if yes create a new excel file and 4 worksheets
                print OUTFILE "Creatin a new sheet.\n";
                $excelFileHandle= Spreadsheet::WriteExcel->new($xls_file) ;
                &InitFormatting ($excelFileHandle);#For format of each cell.    
                ($handle, $row, $col)    = &AddSheet("$monthYearStr", "$SHEET_TITLE", @ReportColLabels);
                ($handle1, $row1, $col1) = &AddSheet("$STATUS_CODE_SHEET_NAME", "$STATUS_CODE_SHEET_TITLE", @Status_Code_labels);
                ($handle2, $row2, $col2) = &AddSheet("$SUCCESS_COUNT_SHEET_NAME", "$SUCCESS_SHEET_TITLE", @Success_count_labels);
                ($handle3, $row3, $col3) = &AddSheet("$FAILURE_COUNT_SHEET_NAME", "$FAILURE_SHEET_TITLE", @Failure_count_labels);
                $new = 1;
        }

        else  #File exists needs to parsed and append the data.
        {
                print OUTFILE "Opening the existing sheet.\n";
                my $parser   = Spreadsheet::ParseExcel->new();
                my $workbook = $parser->parse($xls_file);
                if ( !defined $workbook )
                {   
                        die $parser->error(), ".\n";
                }   
                my $worksheet = $workbook->worksheet($monthYearStr);
                ( $row_min, $row_max ) = $worksheet->row_range();
                ( $col_min, $col_max ) = $worksheet->col_range();

                my $worksheet1 = $workbook->worksheet($monthYearStr);
                ( $row_min1, $row_max1 ) = $worksheet1->row_range();
                ( $col_min1, $col_max1 ) = $worksheet1->col_range();

                $new = 0;
        }

        if ( $new = 1 ) 
        {
                $handle->write($row, $col++, "$present_date", $num_field_format);
                ------Contiuned for remainin row and col for $monthYearStr $STATUS_CODE_SHEET_NAME $SUCCESS_COUNT_SHEET_NAME $FAILURE_COUNT_SHEET_NAME-------
        }

        elsif ( $new == 0)
        {
                ###Appending the data####

                $parser   = Spreadsheet::ParseExcel::SaveParser->new();
           $template = $parser->Parse($xls_file);
            if ( ! defined $template )
            {
                    die $parser->error(), ".\n";
            }

            my $worksheet = $template->worksheet($monthYearStr);
            my $row = $row_max + 1;

            my $cell = $worksheet->get_cell( $row_max, $row_max );
            my $format_number = $cell->{FormatNo};

            $worksheet->AddCell($row, $col++, "$present_date", $format_number);
            ---------Continued for remaining row and col only for $monthYearStr $STATUS_CODE_SHEET_NAME -----------------------------

 } 
```

现在，当excel文件存在时，我如何覆盖工作表success_count和failure_count。请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:49:31.620

如果没有 AddSheet 子例程，很难说出该怎么做，但是您应该能够使用类似这样的方法覆盖工作表中的单元格，每个 POD：

```
foreach $worksheet ($workbook->sheets()) {
   if( $worksheet->get_name() eq $SUCCESS_COUNT_SHEET_NAME ) {
       $worksheet->write('A1', $success_count);
   }
   elsif( $worksheet->get_name() eq $FAILURE_COUNT_SHEET_NAME ) {
       $worksheet->write('A1', $failure_count);
   }
} 
```

# cakephp - CakePHP Router::connect 关于查询参数

> ID：12029055
> 
> 赞同：0
> 
> 时间：2012-08-19T18:49:52.510
> 
> 标签：cakephp, redirect, url-routing, cakephp-2.0

在我的控制器的 beforeFilter 中，我检查这种类型的请求并重定向：

```
if ( array_key_exists('myparameter',$this->request->query) ) {
    $this->redirect("http://example.com/".$this->request->url,301);
} 
```

但似乎从**routes.php**进行这种重定向更像蛋糕。
那么我怎样才能把这个逻辑放在[Router::connect](http://book.cakephp.org/2.0/en/development/routing.html)中呢？

# php - 将二维数组转换为多维

> ID：12029059
> 
> 赞同：5
> 
> 时间：2012-08-19T18:50:17.317
> 
> 标签：php, arrays, multidimensional-array

我如何将此二维数组转换为树，即

**这个**

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => User
            [parent_id] => 0
        )

    [1] => Array
        (
            [id] => 2
            [name] => Product
            [parent_id] => 0
        )

    [2] => Array
        (
            [id] => 3
            [name] => Login
            [parent_id] => 1

        )

    [3] => Array
        (
            [id] => 4
            [name] => Forgot Password
            [parent_id] => 3

        )
} 
```

**至**

```
Array
(

    [1] => User => Array
    (
        [3] => Login => Array
        (
            [4] => Forgot Password
        )
    }
    [2] => Product
} 
```

即根据父ID创建子代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:51:13.893

代码：

```
/**
 * Convert tree array to custom tree
 * 
 * @param array $array given array
 * @param string $child_key child key name
 * @param type $id_key id key name
 * @param type $value_key value key name
 * @return array converted array
 */        
function toCustomSets(array $array, $child_key = 'items', $id_key = 'id', $value_key = 'name')
{
    $return = array();

    foreach ($array as $element) {
        if (count($element[$child_key])) {
            $return[$element[$value_key]] = array();
            $return[$element[$value_key]][$element[$id_key]] = $element[$value_key];
            $return[$element[$value_key]] = ($return[$element[$value_key]] + toCustomSets($element[$child_key]));
        } else {
            $return[$element[$id_key]] = $element[$value_key];
        }
    }

    return $return;
}
/**
 * Convert array to tree
 * 
 * @param array $array given array
 * @param int $parent_id parent id
 * @param string $parent_key parent id key name
 * @param string $id_key id key name
 * @return array converted array 
 */
function toTree(array $array, $parent_id = 0, $parent_key = 'parent_id', $id_key = 'id')
{
    $return = array();

    foreach ($array as $element) {
        if ($element[$parent_key] == $parent_id) {
            $element['items'] = toTree($array, $element[$id_key]);
            $return[] = $element;
        }    
    }

    return $return;
} 
```

用法：

```
$data = array(
    array('id' => 1, 'name' => 'User', 'parent_id' => 0),
    array('id' => 2, 'name' => 'Product', 'parent_id' => 0),
    array('id' => 3, 'name' => 'Login', 'parent_id' => 1),
    array('id' => 4, 'name' => 'Forgot Password','parent_id' => 3));

$tree = toTree($data);
print_r(toCustomSets($tree)); 
```

输出：

```
Array
(
    [User] => Array
        (
            [1] => User
            [Login] => Array
                (
                    [3] => Login
                    [4] => Forgot Password
                )

        )

    [2] => Product
) 
```

# java - 如何初始化arraylist的arraylist

> ID：12029060
> 
> 赞同：3
> 
> 时间：2012-08-19T18:50:33.730
> 
> 标签：java, data-structures

以下行将使用 9 个值为 true 的元素初始化 arraylist。

```
public ArrayList<Boolean> timeTable = new ArrayList<Boolean>(Collections.nCopies(9, true)); 
```

但是我怎样才能初始化arraylist的arraylist呢？

```
public ArrayList<ArrayList<Boolean>> timeTable = new ArrayList<ArrayList<Boolean>>(Collections.nCopies(9, true)); 
```

这应该意味着外部arraylist有9个内部arraylist，每个内部arraylist有9个具有真值的元素。

类似于[如何在 Java 中使用全零初始化 ArrayList？](https://stackoverflow.com/questions/5600668/how-can-i-initialize-an-arraylist-with-all-zeroes-in-java) 但不完全一样...

场景是我需要维护每月的每日时间表列表。现在每天的时间表将只有 9 个条目，所以不可变就可以了。但是每个月都需要附加月度清单。所以它不能是一个数组列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T18:57:33.513

鉴于此行形式 java docs：“返回一个不可变的列表，由 n 个指定对象的副本组成”

```
public ArrayList<Boolean> timeTable = new ArrayList<Boolean>(Collections.nCopies(9, true));

public ArrayList<ArrayList<Boolean>> timeTableLists = new ArrayList<ArrayList<Boolean>>(Collections.nCopies(9, timeTable)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T18:54:14.230

首先，建议尽可能使用接口类型。那会让你的

```
ArrayList<ArrayList<Boolean>> -> List<List<Boolean>>. 
```

然后，初始化语句将变为

```
public List<List<Boolean>> timeTable = Collections.nCopies(9, (Collections.nCopies(9, true))); 
```

# c - 释放 malloc 失败

> ID：12029061
> 
> 赞同：2
> 
> 时间：2012-08-19T18:50:38.657
> 
> 标签：c

我有这样的事情

```
char *temp, xyz;
temp = (char *)malloc(sizeof(somestring));

xyz = (char *) malloc(sizeof(temp));
xyz= strrchar(temp, "_"); // temp does not contain "_", but need to check for error validation 
```

现在如果我尝试做 free(temp); 它的崩溃；

任何想法，我是一个初学者。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T18:51:59.000

第一个问题是`xyz`没有**被**声明为一个`char *`，只有一个`char`。

给定以下变量声明：

```
char *temp, xyz; 
```

*   `temp`是指向 a 的指针`char`。
*   `xyz`只是一个`char`。

`*` **不适**用于这两个变量。要使两个变量都指向`char`，请使用：

```
char *temp, *xyz; 
```

下一步：您混淆了`sizeof`with的用法`strlen`。`sizeof`为您提供类型或该类型变量占用的大小。所以如果`temp`是 a `char *`，那么`sizeof(temp)`将是指针的大小，**而不是**C 字符串的长度。要获得 C 字符串长度 - 例如要获得复制给定 C 字符串所需的缓冲区大小 - 使用[`strlen`](http://en.cppreference.com/w/c/string/byte/strlen).

最后，除非你省略了一些重要的代码，否则还有另一个问题：简单地使用`malloc`不会对新分配的内存做任何事情，所以在之后：

```
temp = (char *)malloc(sizeof(somestring)); 
```

`temp``sizeof`指向未初始化的内存位（如前所述，由于使用而不是，它可能比您认为的要小`strlen`）。然后你继续*使用* `temp`它，就好像它是一个有效的 C 字符串，带有`strchr`. 这可能会访问不属于您的内存，从而调用未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:29:40.457

我想通了，如果我错了，请纠正我，xyz 只是指向它在字符串 temp 中有“_”的位置。一旦我释放了温度，那个位置就被释放了。但是 xyz 仍然指向那个已经被释放的位置。这就是我在释放 xyz 时崩溃的原因。

# php - Android 向服务器执行分析请求

> ID：12029063
> 
> 赞同：4
> 
> 时间：2012-08-19T18:51:12.457
> 
> 标签：php, android, mysql, analytics

跟踪与 sdk 集成的应用程序下载的最佳方法是什么。sdk 将保存发送请求的方法。

它将检查文件是否存在。如果文件不存在（之前未下载），它将向服务器发送请求或使用分析 api 将数据存储在服务器上并创建文件（表示应用程序已下载）或任何其他方法？将被发送和存储的数据是：基于日期的下载和操作系统版本。

是否可以为此使用谷歌分析或使用任何其他api，或编写自己的？

我有 php 和 mysql 数据库的基本知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:14:00.793

我建议你看看 Flurry 分析。他们提供了一个非常可爱和直观的 SDK。这是他们网站的链接：http: [//www.flurry.com/](http://www.flurry.com/)

我个人使用并喜欢他们提供的 API。

PS：与其编写可以完成分析工作的代码，不如使用已经建立并有效的东西。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:08:16.353

您可以使用 Google Analytics API 来跟踪浏览量事件，甚至发送自定义变量。[看看这里](https://developers.google.com/analytics/devguides/collection/android/)。

# java - 类似于 GenericDialog/ADM 的东西

> ID：12029073
> 
> 赞同：2
> 
> 时间：2012-08-19T18:52:24.570
> 
> 标签：java, user-interface, imagej

我正在寻找类似于 ImageJ 或 Adob​​e Dialog Manager 中使用的 GenericDialog 的东西。目标是创建一个对话框的模板（字段数量、类型等 - 需要的信息，而不是它的呈现方式）并将其发送到视图类。此视图可能是基于 Swing 的 GUI 或简单的控制台 UI。用户填写的字段和值对于对话框模板的源是可见的。是否有一些 Java 库可以实现这一点？我知道有 GenericDialog，但我不确定是否可以在我的项目中使用它（因为它是 ImageJ 的一部分）。更重要的是，我觉得这对我来说太“重”了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:05:42.693

ImageJ2[项目](http://developer.imagej.net/)几乎提供了您所描述的内容：一种灵活的机制，用于执行具有类型输入和输出参数的可运行操作（称为*commands ）。*

`@Parameter`您可以通过使用注解标记命令的输入和输出来定义它们。ImageJ 自动负责填写输入（通常通过使用对话框提示用户输入），以及在命令运行后显示输出。

如何从用户那里获取输入取决于哪个（如果有）用户界面与 ImageJ 上下文相关联。我们已经实现了对 Swing 的完整小部件支持，以及“纯”AWT（即`java.awt`小部件）、Apache Pivot 和 Eclipse SWT 中的概念验证实现。

一些例子：

*   [GradientImage.java](https://github.com/imagej/imagej-tutorials/blob/9e525b5defb1ebbafed806a976dd2746a8c3c868/simple-command/src/main/java/GradientImage.java#L20)：一个简单的示例命令
*   [ParameterTester.java](https://github.com/imagej/imagej/blob/c39e9ac3cb945b550dc438f3d330a6976ba15504/core/commands/debug/src/main/java/imagej/core/commands/debug/ParameterTester.java#L53) : 执行多种类型参数的命令

所有代码均获得 BSD-2 许可。`ij-core`在撰写本文时，包含该框架的JAR 约为 334KB。包含 Swing 小部件的`ij-ui-swing`JAR 大约为 150KB，但它还包含其他可以删除的内容（相比之下，`ij-ui-pivot`JAR 只有大约 30KB）。

综上所述，如果您认为 ImageJ 1.x 的`GenericDialog`“太重”，那么您很可能会对 ImageJ2 的命令框架（或*任何*其他解决此问题的解决方案）有同样的感觉；我认为它不会变得“更轻” "比`GenericDialog`)。但在这种情况下，也许 ImageJ2 实现会给您一些关于如何滚动自己的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:27:46.417

ImageJ 中的通用对话框扩展了 java.awt.Component，所以这是否与您将对话框模板与视图分离的要求相矛盾？

Java 的集合将允许您封装信息、类型等。

```
java.util.LinkedHashMap<String,Type> dialog = new java.util.LinkedHashMap<String,Type>; 
```

其中键是字段的名称，值是字段的类型。

要创建基于摆动的对话框，请参见

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# c++ - 获取四边形 OpenGL

> ID：12029075
> 
> 赞同：0
> 
> 时间：2012-08-19T18:52:53.310
> 
> 标签：c++, opengl

我有一个 rect 类，其中存储了各种信息。我用它在 2D 中进行碰撞检测。

如果我使用 openGL 3 及更高版本进行渲染，如何使 Rect 跟随四边形。起初我以为我可以抓住每个顶点的位置并将它们输入到 Rect 的四个位置（每个角）。但是在应用模型矩阵之后，我怎样才能得到顶点的位置呢？

还有另一种方法来获取信息以从四边形创建 Rect 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:08:12.780

> 但是在应用模型矩阵之后，我怎样才能得到顶点的位置呢？

如果您的 Rect 在模型空间中有四个顶点（v1、v2、v3 和 v4），并且您有一个模型矩阵 M，那么如果您想跟随您的 Rect 跟随四边形，只需将您的顶点乘以模型矩阵（做与OpenGL相同的事情）。

您只需将模型矩阵应用于矩形坐标，即可获得四个变换后的矩形坐标（vt1、vt2、vt3、vt4）：

```
vt1 = M * v1;
vt2 = M * v2;
vt3 = M * v3;
vt4 = M * v4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:41:31.373

使用 OpenGL 3，您必须手动编程，因为可编程管道，需要`GL_QUADS`使用旧的固定管道，但它在 3.0 中已被弃用，并在 3.1 和更新版本中被删除。

由于您必须自己执行此操作，因此有几种解决方案可以解决您的问题，其中一个[在 SO 上](https://stackoverflow.com/questions/2588875/whats-the-best-way-to-draw-a-fullscreen-quad-in-opengl-3-2)进行了讨论。

# php - Facebook 应用程序身份验证在我的数据库中重复数据

> ID：12029090
> 
> 赞同：1
> 
> 时间：2012-08-19T18:55:11.390
> 
> 标签：php, mysql, database, facebook

在阅读了很多之后，最后我的 fb 应用程序正在做我所期望的（收集数据并将其存储在我的数据库中）。但是，如果用户返回页面选项卡中的应用程序（用户已登录应用程序），则表中的条目将重复。正如我在教程中阅读的那样，我的代码中有一部分用于验证用户是否已经在数据库中，如果这是一个新用户，那么它将记录数据，如果不是什么都没有。

请看一下我的代码并指导我解决它。谢谢

我没有收到任何错误，但似乎问题可能出在此处：

```
 $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND  oauth_uid = ". $user_profile['id']);  
      $result = mysql_fetch_array($query); 
```

这是我的代码：

```
 <?php
 define('db_user','xxx');
 define('db_password','xxx');
 define('db_host','xxx.xxx.com');
 define('db_name','xxx');

 // Connect to MySQL
 $dbc = @mysql_connect (db_host, db_user, db_password) OR die ('Could not connect to   MySQL: ' . mysql_error() );
// Select the correct database
mysql_select_db (db_name) OR die ('Could not select the database: ' . mysql_error() );
mysql_set_charset('utf8',$dbc);

require 'src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
'appId'  => 'xxx',
'secret' => 'xxx',
  'cookie' => true));

 // Get User ID
 $user = $facebook->getUser();

 // We may or may not have this data based on whether the user is logged in.
 //
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$fbuid = $facebook->getUser();
 $user_profile = $facebook->api('/me');

   } catch (FacebookApiException $e) {
   error_log($e);
   $user = null;
   }
     }else{
   header('Location: index.php');

    }
    //know if the user is in the db 
      $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND oauth_uid = ". $user_profile['id']);  
      $result = mysql_fetch_array($query);  

    if(empty($result)){ 
      $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username, first_name, last_name, birthday, email, pic_square ) VALUES    ('facebook', {$user_profile['id']}, '{$user_profile['name']}', '{$user_profile['first_name']}','{$user_profile['last_name']}','{$user_profile['birthday']}','{$user_profile['email']}', '{$user_profile['pic_square']}')");  
  $query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());  
  $result = mysql_fetch_array($query) or die ( mysql_error () );  

}  

   // Login or logout url will be needed depending on current user state.
    if ($user) {
     $paramsout = array('next'=>'http://www.mywebsite.com/test/logout.php');
     $logoutUrl = $facebook->getLogoutUrl($paramsout);
     }
     ?>
     <html><body>welcome</body></html> 
```

# c# - 等待 Task.Factory.FromAsync(BeginXxx, EndXxx) 后 HttpContext 为空

> ID：12029091
> 
> 赞同：4
> 
> 时间：2012-08-19T18:55:14.400
> 
> 标签：c#, wcf, asynchronous, task-parallel-library, async-await

我有一个 Asp.Net 应用程序，它使用 svcutil 生成的代理调用一些 WCF 服务。生成的代理在 APM 模式中具有异步方法（BeginXxx、EndXxx）。

我正在使用异步目标包以利用新`async/await`模式，并且我的目标平台是 .net 4.0（否则我不必使用异步目标包）。

我正在使用`Task<T>.Factory.FromAsync`将 APM 模式转换为我可以等待的任务。

我的代码看起来有点像这样（假设服务方法不带参数并返回一个 int：

```
int result = await Task<int>.Factory.FromAsync(proxy.BeginXxx, proxy.EndXxx, state: null);
HttpContext.Current.Items["reuslt"] = result; 
```

第二行抛出一个`NullReferenceException`.

我假设原因是回调（这是等待调用之后运行的所有内容）没有原始同步上下文。

其他方法（如 Factory.StartNew）具有接收可用于保留上下文的[重载。](http://msdn.microsoft.com/en-us/library/dd781658%28v=vs.100%29.aspx)`TaskScheduler`

FromAsync 方法还具有接收 a 的[重载](http://msdn.microsoft.com/en-us/library/dd321413.aspx)`TaskScheduler`，但没有一个具有 begin 方法作为参数的重载。

假设我不想开始手动将 Http 上下文作为方法参数传递给在此行之后调用的所有方法，我如何使用获取任务调度程序的重载或以其他方式获取 .Net 来尊重我的同步上下文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:40:29.983

我怀疑问题实际上出在 ASP.NET 管道中，而不是`SynchronizationContext`.

Async Targeting Pack 启用`async`/`await`支持，但[在 ASP.NET 4.5 中进行了很多更改以使其`async`友好](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)，并且 Targeting Pack 不包括该支持。

[`RegisterAsyncTask`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerasynctask.aspx)尝试通过使用（用于 Web 表单）或[`AsyncManager`](http://msdn.microsoft.com/en-us/library/system.web.mvc.async.asyncmanager.aspx)（用于 MVC）来帮助 ASP.NET 管道。即使这样，管道中的某些地方也不能采用异步代码（在 ASP.NET 4.5 中仍然如此，但至少 4.5 会检测到这一点并引发错误）。

# html - 如何创建一个视频页面，在启动视频后，其他所有内容都会变黑并且视频以浏览器为中心？

> ID：12029094
> 
> 赞同：2
> 
> 时间：2012-08-19T18:55:48.550
> 
> 标签：html, flash

我在某些网站上看到，在页面上开始播放一些视频后，其他所有内容都会变黑并且视频开始播放。如何才能做到这一点？是否只能使用某些特定的视频类型，如 flash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:02:02.110

创建一个浏览器窗口大小的大 div，给它一个 100 左右的 z-index，然后给视频一个更高的 z-index。将它的背景设置为黑色，并且可能带有一些不透明度。

.someDiv{ 背景：黑色；z 指数：100；} .video{ z-index: 101; }

然后用JS让div在你点击播放的时候出现。还有一个单独的“暗灯”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:04:23.147

这称为[灯箱](http://en.wikipedia.org/wiki/Lightbox_%28JavaScript%29)。

它通常用于显示图像，但可用于将焦点放在页面上的任何内容上。鉴于; 不，它不仅与闪光灯兼容，因为您可以将效果应用于任何元素。

除了为视频元素（例如`flash`and ）编写自定义元素之外`<video>`，您还可以只修改[现有](http://lokeshdhakar.com/projects/lightbox2/)元素。

# c++ - 指向成员变量的指针

> ID：12029098
> 
> 赞同：5
> 
> 时间：2012-08-19T18:56:18.693
> 
> 标签：c++

下面的程序输出总是1 1 1。在《深入了解c++对象模型》一书中，提到它会给出偏移量。目的也是找出对象布局。但是，我对输出感到困惑。使用 g++ 4.5.2

```
class Test
{
    public:
        float a;
        float b;
        float c;
};

int main()
{
    float Test::*ptr = &Test::a;
    float Test::*ptr1 = &Test::b;
    float Test::*ptr2 = &Test::c;
    cout<<ptr<<endl;
    cout<<ptr1<<endl;
    cout<<ptr2<<endl;

    return 0;
} 
```

输出：

```
1
1
1 
```

编辑（后续问题）：在书中提到`origin.y = 0`可以转换为`&origin + (Point3d::y-1)`origin 是 Point3d 的对象，y 是 Point3d 类的成员变量。虽然当我编译它给了我编译错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-19T19:00:58.300

您不能打印指向成员的指针，但指向成员的指针可以隐式转换为`bool`，当然可以打印这些指针。空指针转换为`false`，所有其他指针都转换为`true`。默认情况下，`std::cout`打印`false`为`0`和`true`as `1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T19:22:41.923

您写道您想找到内存偏移量。虽然 FredOverflow 所写的完全正确，但`Test`如果您想知道 和 的地址，`a`您应该创建一个类的实例。例如：`b``c`

```
Test t;
float *ptr = &t.a;
float *ptr1 = &t.b;
float *ptr2 = &t.c; 
```

在我的机器上，这会产生以下三个地址：

```
0x7fff564f8918
0x7fff564f891c
0x7fff564f8920 
```

您会注意到它们`sizeof(float)`相隔 4 个字节（或 ），并且 a 的大小`Test`为 12 个字节（使用`sizeof(Test)`）。此外， 的地址与 的`&t`地址`0x7fff564f8918`相同`&t.a`。这就是类实例的内存布局是如何`Test`形成的。

您还可以`POD`使用 查找类型成员的偏移量`offsetof()`。

```
cout << offsetof(Test, a) << endl;
cout << offsetof(Test, b) << endl;
cout << offsetof(Test, c) << endl; 
```

产量

```
0
4
8 
```

注意`offsetof(Test, b)`本质上是一样的

```
(unsigned long long) &(((Test*) 0)->b) - (unsigned long long) (Test*) 0 
```

**回答您的后续问题：**

由于与前面提到的相同的错误，该代码将不起作用。但是，如果您想计算`y`成员的地址`origin`并为其分配值`0`，则可以这样做：

```
class Point3d {
public:
  float x, y, z;
};

Point3d origin;
origin.y = 10;

// We take the address of origin, which points to the first member, 
// then add the offset to the member y.
float *ptr = (float*) ((unsigned long long) &origin + offsetof(Point3d, y));
cout <<  "Old value: " << *ptr << endl;
*ptr = 0;
cout <<  "New value: " << *ptr << endl; 
```

产生输出：

```
Old value: 10
New value: 0 
```

再次记住，这只是可能的，因为`Point3d`它是一种`POD`类型。

# android - Android：绘制到不同大小的屏幕时如何管理位图大小？

> ID：12029102
> 
> 赞同：4
> 
> 时间：2012-08-19T18:57:05.533
> 
> 标签：android, bitmap, scaling

我了解各种 dpi 资源和灵活的布局以支持不同的分辨率和大小的屏幕，但我不明白如何在视图的 onDraw() 方法中直接使用位图绘制来处理不同的屏幕。

我有一个应用程序可以绘制要触摸的移动位图。到目前为止，它是在 480x320 屏幕上开发的，并且测试图形已在此分辨率下创建。为了支持模拟 WVGA 等替代屏幕，我已成功地将更高分辨率的图像放置在 hdpi 文件夹中并且它可以工作。

但是，当我创建一个更大的屏幕（如 10 英寸平板电脑）时，图形被绘制到一个手机大小的小区域。

与更高密度分辨率相反，为更大屏幕提供更高分辨率源图像的正确方法是什么？我必须手动加载和缩放位图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:09:52.607

您在 10" 设备上获得小图像的原因是它很可能是 mdpi 设备。此外，它可能是“xlarge”设备。

因此，请尝试将此类设备的图形放在名为

```
drawable-xlarge-mdpi 
```

请参阅此参考：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# spring-mvc - 春季休眠 sessionFactory NullPointerException

> ID：12029104
> 
> 赞同：1
> 
> 时间：2012-08-19T18:57:14.270
> 
> 标签：spring-mvc

嗨，我正在编写一个应用程序，但出现以下错误。

编辑：完整日志

```
`
       Aug 20, 2012 6:37:22 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;F:\SVN\bin\;F:\SVN\Python25\;C:\Program Files\PHP\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\MySQL\MySQL Server 5.5\bin;D:\apache-ant-1.8.2\bin;C:\Program Files\Java\jdk1.7.0\bin;C:\Program Files\QuickTime\QTSystem\
Aug 20, 2012 6:37:22 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:yogamandir1' did not find a matching property.
Aug 20, 2012 6:37:22 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Aug 20, 2012 6:37:23 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Aug 20, 2012 6:37:23 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1277 ms
Aug 20, 2012 6:37:23 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Aug 20, 2012 6:37:23 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.8
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/sql is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/xml is already defined
Aug 20, 2012 6:37:27 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Mon Aug 20 18:37:28 IST 2012]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@d9ceea: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 582 ms
Aug 20, 2012 6:37:28 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'appServlet'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'appServlet-servlet': startup date [Mon Aug 20 18:37:28 IST 2012]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from class path resource [jdbc.properties]
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@659078: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,studentDAO,homeController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#1,org.springframework.format.support.FormattingConversionServiceFactoryBean#1,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#1,org.springframework.web.servlet.handler.MappedInterceptor#1,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#1,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#1,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#1,org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,dataSource,sessionFactory,transactionManager,multipartResolver,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@d9ceea
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/register],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.omkar.yogamandir.web.controllers.HomeController.register(java.util.Locale,org.springframework.ui.Model,com.omkar.yogamandir.web.beans.Student,org.springframework.web.multipart.MultipartFile,org.springframework.validation.BindingResult)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.omkar.yogamandir.web.controllers.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.jdbc.datasource.DriverManagerDataSource - Loaded JDBC driver: com.mysql.jdbc.Driver
INFO : org.hibernate.cfg.annotations.Version - Hibernate Annotations 3.3.1.GA
INFO : org.hibernate.cfg.Environment - Hibernate 3.2.6
INFO : org.hibernate.cfg.Environment - hibernate.properties not found
INFO : org.hibernate.cfg.Environment - Bytecode provider name : cglib
INFO : org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
INFO : org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.omkar.yogamandir.entity.beans.BatchDTO
INFO : org.hibernate.cfg.annotations.EntityBinder - Bind entity com.omkar.yogamandir.entity.beans.BatchDTO on table batch
INFO : org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.omkar.yogamandir.entity.beans.StudentDTO
INFO : org.hibernate.cfg.annotations.EntityBinder - Bind entity com.omkar.yogamandir.entity.beans.StudentDTO on table student
INFO : org.hibernate.cfg.AnnotationConfiguration - Hibernate Validator not found: ignoring
INFO : org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean - Building new Hibernate SessionFactory
INFO : org.hibernate.connection.ConnectionProviderFactory - Initializing connection provider: org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider
INFO : org.hibernate.cfg.SettingsFactory - RDBMS: MySQL, version: 5.5.8
INFO : org.hibernate.cfg.SettingsFactory - JDBC driver: MySQL-AB JDBC Driver, version: mysql-connector-java-5.1.15 ( Revision: ${bzr.revision-id} )
INFO : org.hibernate.dialect.Dialect - Using dialect: org.hibernate.dialect.MySQLDialect
INFO : org.hibernate.transaction.TransactionFactoryFactory - Transaction strategy: org.springframework.orm.hibernate3.SpringTransactionFactory
INFO : org.hibernate.transaction.TransactionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
INFO : org.hibernate.cfg.SettingsFactory - Automatic flush during beforeCompletion(): disabled
INFO : org.hibernate.cfg.SettingsFactory - Automatic session close at end of transaction: disabled
INFO : org.hibernate.cfg.SettingsFactory - JDBC batch size: 15
INFO : org.hibernate.cfg.SettingsFactory - JDBC batch updates for versioned data: disabled
INFO : org.hibernate.cfg.SettingsFactory - Scrollable result sets: enabled
INFO : org.hibernate.cfg.SettingsFactory - JDBC3 getGeneratedKeys(): enabled
INFO : org.hibernate.cfg.SettingsFactory - Connection release mode: auto
INFO : org.hibernate.cfg.SettingsFactory - Maximum outer join fetch depth: 2
INFO : org.hibernate.cfg.SettingsFactory - Default batch fetch size: 1
INFO : org.hibernate.cfg.SettingsFactory - Generate SQL with comments: disabled
INFO : org.hibernate.cfg.SettingsFactory - Order SQL updates by primary key: disabled
INFO : org.hibernate.cfg.SettingsFactory - Order SQL inserts for batching: disabled
INFO : org.hibernate.cfg.SettingsFactory - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
INFO : org.hibernate.hql.ast.ASTQueryTranslatorFactory - Using ASTQueryTranslatorFactory
INFO : org.hibernate.cfg.SettingsFactory - Query language substitutions: {}
INFO : org.hibernate.cfg.SettingsFactory - JPA-QL strict compliance: disabled
INFO : org.hibernate.cfg.SettingsFactory - Second-level cache: enabled
INFO : org.hibernate.cfg.SettingsFactory - Query cache: disabled
INFO : org.hibernate.cfg.SettingsFactory - Cache provider: org.hibernate.cache.NoCacheProvider
INFO : org.hibernate.cfg.SettingsFactory - Optimize cache for minimal puts: disabled
INFO : org.hibernate.cfg.SettingsFactory - Structured second-level cache entries: disabled
INFO : org.hibernate.cfg.SettingsFactory - Echoing all SQL to stdout
INFO : org.hibernate.cfg.SettingsFactory - Statistics: disabled
INFO : org.hibernate.cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
INFO : org.hibernate.cfg.SettingsFactory - Default entity-mode: pojo
INFO : org.hibernate.cfg.SettingsFactory - Named query checking : enabled
INFO : org.hibernate.impl.SessionFactoryImpl - building session factory
INFO : org.hibernate.impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/register],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.omkar.yogamandir.web.controllers.HomeController.register(java.util.Locale,org.springframework.ui.Model,com.omkar.yogamandir.web.beans.Student,org.springframework.web.multipart.MultipartFile,org.springframework.validation.BindingResult)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.omkar.yogamandir.web.controllers.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.orm.hibernate3.HibernateTransactionManager - Using DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@89eb77] of Hibernate SessionFactory for HibernateTransactionManager
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 6021 ms
Aug 20, 2012 6:37:34 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Aug 20, 2012 6:37:34 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Aug 20, 2012 6:37:34 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 11556 ms
INFO : com.omkar.yogamandir.web.controllers.HomeController - Welcome home! the client locale is en_US
INFO : com.omkar.yogamandir.web.controllers.HomeController - Welcome home! the client locale is en_US
INFO : com.omkar.yogamandir.web.controllers.HomeController - Student Registration!
INFO : com.omkar.yogamandir.entity.dao.StudentDAO - Start: saveStudent() in StudentDAO class
java.lang.NullPointerException
    at com.omkar.yogamandir.entity.dao.StudentDAO.saveStudent(StudentDAO.java:27)
    at com.omkar.yogamandir.business.StudentBusinessAdapter.insertStudent(StudentBusinessAdapter.java:30)
    at com.omkar.yogamandir.web.controllers.HomeController.register(HomeController.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

`

我的 StudentDAO 课程：

```
`package com.omkar.yogamandir.entity.dao;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.omkar.yogamandir.entity.beans.StudentDTO;

@Repository
@Transactional
public class StudentDAO {

private static final Logger logger = LoggerFactory
        .getLogger(StudentDAO.class);

@Autowired
private SessionFactory sessionFactory;

public void saveStudent(StudentDTO studentDTO) {

    try{
        logger.info("Start: saveStudent() in StudentDAO class");
        Session session = sessionFactory.getCurrentSession();
        session.save(studentDTO);
        logger.info("Successfully saved the student!!!");
    } catch(Exception e){

        e.printStackTrace();
    }

}
}` 
```

servlet-context.xml

```
`<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx     http://www.springframework.org/schema/tx/spring-tx.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing 
    infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources 
    in the /WEB-INF/views directory -->
<beans:bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.omkar.yogamandir" />

<annotation-driven />

<context:property-placeholder location="classpath:jdbc.properties"></context:property-placeholder>

<beans:bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <beans:property name="driverClassName" value="${jdbc.driverClassName}" />
    <beans:property name="url" value="${jdbc.url}" />
    <beans:property name="username" value="${jdbc.username}" />
    <beans:property name="password" value="${jdbc.password}" />
</beans:bean>

<beans:bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <beans:property name="dataSource" ref="dataSource"></beans:property>
    <beans:property name="hibernateProperties">
        <beans:props>
            <beans:prop key="hibernate.dialect">${hibernate.dialect}</beans:prop>
            <beans:prop key="hibernate.show_sql">${hibernate.show_sql}</beans:prop>
        </beans:props>
    </beans:property>
    <beans:property name="packagesToScan" value="com.omkar.yogamandir"></beans:property>
</beans:bean>

<beans:bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <beans:property name="sessionFactory" ref="sessionFactory"></beans:property>
</beans:bean>

<beans:bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <beans:property name="maxUploadSize" value="5000000" />
</beans:bean>

<tx:annotation-driven />

</beans:beans>` 
```

我在类路径中有所有必需的 jar。请看一下这个问题。当我使用 sessionFactory.getCurrentSession(); 时 sessionFactory 为空；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:55:52.240

您无法将 sessionFactory 注入 studentDAO 课程。检查一下

# ruby - 任何外部的东西都和数组一样快吗？所以我不需要每次运行脚本时都重新加载数组

> ID：12029106
> 
> 赞同：0
> 
> 时间：2012-08-19T18:57:19.487
> 
> 标签：ruby

当我开发我的应用程序时，我需要一遍又一遍地做大量的数学运算，调整它并再次运行并观察结果。

数学是在从大文件加载的数组上完成的。许多兆字节。不是很大，但问题是每次我运行我的脚本时，它首先必须将文件加载到数组中。这需要很长时间。

我想知道是否有任何与数组类似的外部工作，因为我可以知道数据的位置并获取它。而且它不需要重新加载所有内容。

我对数据库了解不多，只是它们似乎无法按我需要的方式工作。它们没有顺序，总是需要搜索所有内容。它似乎。内存数据库还有可能吗？

如果有人有解决方案，很高兴听到它。

附带问题 - 是否可以让用户输入我的 ruby​​ 程序运行的脚本，这样我就可以让主 ruby​​ 程序无限期地运行？我仍然对用户输入的选项以及它如何工作一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:08:05.947

使用[`Marshal`](http://ruby-doc.org/core/Marshal.html)：

```
# save an array to a file
File.open('array', 'w') { |f| f.write Marshal.dump(my_array) }

# load an array from file
my_array = File.open('array', 'r') { |f| Marshal.load(f.read) } 
```

您的操作系统将在保存和加载之间保留文件缓存，即使在使用数据的单独进程运行之间也是如此。

# jquery - Jquery - 在表单上验证时间值 - 正确的方式？

> ID：12029111
> 
> 赞同：9
> 
> 时间：2012-08-19T18:57:47.913
> 
> 标签：jquery, validation, time, jquery-validate

谷歌搜索后，搜索这个网站以及[jQuery](http://docs.jquery.com/Plugins/Validation)发现没有简单的方法来验证时间价值。

从外观上看，它建议使用[addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)并使用 regexpess 值来检查时间应该是什么样子。

但是决定查看`jquery.validate.js`dateISO 以及如何检查它，它看起来更容易做到这一点，所以我复制了与 dateISO 相关的所有数据并将其命名为 timeISO 并更改了字符串以验证时间并使用以下时间字符串

```
^([01]\d|2[0-3]):[0-5]\d:[0-5]\d$ 
```

有什么理由不应该修改`jquery.validate.js`并按照我的方式去做吗？只是有点担心，因为我在谷歌和这个论坛上的所有搜索都没有被建议过。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-19T19:19:27.290

您可以将自定义方法添加到`jQuery.validate`. 可能有一个可用的，但我将这个 24 小时格式验证编码为示例：

```
$.validator.addMethod("time24", function(value, element) {
    if (!/^\d{2}:\d{2}:\d{2}$/.test(value)) return false;
    var parts = value.split(':');
    if (parts[0] > 23 || parts[1] > 59 || parts[2] > 59) return false;
    return true;
}, "Invalid time format."); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/UPjqf/1/)

[文档](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#examples)。

您还可以将其总结为一个正则表达式（[source](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)）：

```
([01]?[0-9]|2[0-3])(:[0-5][0-9]){2} 
```

如果您使用的是 HTML5，则可以使用该`pattern`属性：

```
<input type="text" pattern="([01]?[0-9]|2[0-3])(:[0-5][0-9]){2}" 
    required="required" placeholder="hh:mm:ss" /> 
```

[**小提琴**](http://jsfiddle.net/ult_combo/6uwFp/)

`jQuery.validate`如果您需要与旧版浏览器兼容，请继续使用该方法：

```
$.validator.addMethod("time24", function(value, element) {
    return /^([01]?[0-9]|2[0-3])(:[0-5][0-9]){2}$/.test(value);
}, "Invalid time format."); 
```

[**演示**](http://jsfiddle.net/ult_combo/UPjqf/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-18T03:36:45.480

我知道已经有一段时间了，但我认为最好的解决方案是检查**additional-methods.js**库。（您可以从[http://jqueryvalidation.org/](http://jqueryvalidation.org/)下载它）

有两个验证：**"time12h"**和**"time"**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:02:30.313

修改插件核心使得在不替换您的修改的情况下更新到新版本的插件变得更加困难，并且很少是一个好主意。

我建议您将自定义代码放在单独的文件中，而不是更改核心代码。

# animation - 带有动画和鼠标悬停触发器的 svg 组

> ID：12029116
> 
> 赞同：2
> 
> 时间：2012-08-19T18:58:27.113
> 
> 标签：animation, svg, onmouseout

我对 svg 组和基本动画有疑问。[这家伙](http://www.trjps.co.uk/image_store_old/sketchings_one_again.svg)是个按钮。当悬停在上面时，会弹出一种菜单。目标是当鼠标指针离开按钮和菜单时菜单缩回。

麻烦从'onmouseout'开始；即使按钮和菜单是分组的，并且“onmouseout”作用于整个组，鼠标移出动作是通过将组内的任何元素鼠标移出来触发的。因此，从按钮移动到菜单会触发撤回。

为了解决这个问题，当将鼠标悬停在按钮上时，我在出现的顶部放置了一个遮罩（可以这么说 - 它确实变得可见但不透明度为 0，因此无法看到）。我在这里把它变成了灰色，所以你可以看到它。但是如果我想在这个菜单上添加元素，我不会比以前更进一步。红色块是另一个元素。

看起来，如果我只显示菜单而不是使用动画来使它们出现，那么这些组将按照我的意愿行事。

我希望有人可以提供帮助或提供一些启示。

# hadoop - Cloudera VM Windows 鼠标只能部分工作

> ID：12029121
> 
> 赞同：0
> 
> 时间：2012-08-19T18:59:08.397
> 
> 标签：hadoop, cloudera

我开始使用 Cloudera Hadoop 并从[这里](https://ccp.cloudera.com/display/SUPPORT/Cloudera%27s+Hadoop+Demo+VM)下载了 VMWare 映像。虽然图像本身可以正常工作，但我的鼠标却不行。

我在新的 MacBookAir 上运行，使用适用于 Mac 的 VMWare。我使用未压缩的映像文件创建了映像，但不确定在 VMWare 中选择哪个操作系统。我尝试了 Mac OS（它甚至没有在 VM 中启动）和 Windows 操作系统（它确实启动了）。

鼠标在 VM 中的行为如下。右键单击工作正常，即出现上下文菜单。左键单击什么也不做。我试图使用“鼠标”系统设置来解决这个问题，但这并没有改变任何东西。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:51:16.277

我得到了它的工作 - 几件事。首先，我需要使用正确的操作系统（它是 Linux - CentOS 5.8，在我的情况下是 64 位）重新创建 VM。

接下来我需要通过设置安装 CD 驱动器（必须强制关闭然后重新启动）。之后，我必须通过新安装的 CD（来自原始源媒体）安装 VMWare Tools。

之后我不得不再冷启动一次，然后瞧 - 鼠标工作正常。

# php - 从 PHP 服务器连接到 Amazon AWS 上的 MySQL 服务器

> ID：12029126
> 
> 赞同：1
> 
> 时间：2012-08-19T19:00:09.783
> 
> 标签：php, mysql, amazon-web-services, connection, internal

我在 Amazon AWS 上设置了两台服务器。一台服务器运行 PHP，另一台运行 MySQL。我可以通过我的终端和 MySQL 查询浏览器连接到 MySQL 数据库。

我正在尝试在 PHP 和 MySQL 服务器之间建立连接。

这是我正在使用的 PHP 代码（适用于“localhost”数据库）

```
$dbbase = 'mydb';               
$dbuser = 'myuser';         // Your MySQL username
$dbpass = 'mypassword';     // ...and password
$dbhost = 'localhost:3306';  // Internal IP for MYSQL Server

// connect to database
$dblink = mysql_connect($dbhost, $dbuser, $dbpass) 
    or die ("System Down");

mysql_select_db($dbbase, $dblink) 
    or die ("Database Down"); 
```

据我了解，我应该能够路由这个内部 AWS 流量，但此时我将采用任何可行的方法并从那里构建。

这是我所做的：

*   将 PHP 服务器的 ip 添加到 MySQL(3306) 权限的安全组

*   尝试使用 MySQL 服务器的内部、外部和私有 IP/DNS 作为 $dbhost 变量

*   在你的 MySQL 服务器上创建了 myuser@%（通配符）

任何想法或提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:23:53.500

我遇到了同样的问题——原来 PHP 的 MySQL 扩展不再包含在 PHP5 中！

“在 PHP 5（更新的 PHP 5.0.4）中，存在以下更改。内置：DOM、LibXML、Iconv、SimpleXML、SPL 和 SQLite。以下不再内置：MySQL 和 Overload。”

来源： http: [//php.net/manual/en/install.windows.extensions.php](http://php.net/manual/en/install.windows.extensions.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T23:26:28.483

我有这个工作。

我认为最大的技巧是将此规则添加到安全组：

> 类型：MySQL
> 
> 来源：10.0.0.0/8

我的理解是 10.0.0.0/8 涵盖了所有内部亚马逊 IP。我认为您可以加强这一点，但您的服务器的内部 IP 可能会发生变化，因此需要对其进行管理。

然后在我的 PHP 脚本中，我使用了我的 MySQL 服务器的私有 DNS。它应该看起来像这样：`ip-10-10-100-100.ec2.internal:3306`

最后，我认为这就是我所做的一切。

# mysql - SQL SELECT 行，其中其他地方的列的行为空

> ID：12029127
> 
> 赞同：1
> 
> 时间：2012-08-19T19:00:32.183
> 
> 标签：mysql, sql

首先，对不起，如果标题令人困惑。
SQL 不是我的强项，我已经为此工作了一段时间，我现在的想法是加入，也许是组。

索托示例：

```
record | type | key1  | key2    | data1
---------------------------------------
1      | 1    | joe   | smoe    | 10
2      | 2    | homer | simpson | 20
3      | 1    | null  | null    | 30
4      | 3    | bart  | simpson | 40 
```

其中主键由id、key1、key2组成。

我只想要“类型”的行，其中 key1 不为空且 key2 不为空。

因此，由于在记录 3 中，类型 1 具有空键，因此我希望类型 1 的所有记录不包含在派生表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:57:41.053

这是一种相关的“不存在”方法：

```
select *
from T as t1
where not exists (
    select *
    from T as t2
    where t2.type = t1.type and (t2.key1 is null or t2.key2 is null)
) 
```

这是一个使用非相关查询和分组的查询。也许这就是你的想法：

```
select *
from T as t1
where t1.type in (
    select t2.type
    from T as t2
    group by t2.type
    having count(*) = count(t2.key1) and count(*) = count(t2.key2)
) 
```

由于我了解 mysql 查询计划可能对这些事情很敏感。这是一个连接的等价物：

```
select t1.*
from T as t1
    inner join
    (
        select t2.type
        from T as t2
        group by t2.type
        having count(*) = count(t2.key1) and count(*) = count(t2.key2)
    ) as goodtypes
        on goodtypes.type = t1.type 
```

# mysql - 使用左连接查询

> ID：12029131
> 
> 赞同：0
> 
> 时间：2012-08-19T19:01:16.573
> 
> 标签：mysql

我有这个疑问，

```
$query = 'SELECT * FROM users where id ="'.$_SESSION['user_id'].'"'; 
```

我的问题是我不知道如何将它与另一个表连接起来......使用另一个 where 或“On”子句......

你能帮我看看这个语法吗？

它应该是`SELECT $query FROM users,retailer ON $query.user_id=retailer.user_id` ......

```
"SELECT users.first_name, retailer.date
FROM users AS users
LEFT JOIN retailer AS retailer ON users.user_id=retailer.user_id
WHERE users.user_id=" . $_SESSION['user_id'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:07:43.683

LEFT JOIN 非常简单

对于您的示例：

```
$query = "SELECT u.*, r.*
FROM users AS u
LEFT JOIN retailer AS r ON u.user_id=r.user_id
WHERE u.user_id=" . $_SESSION['user_id'] 
```

“AS”关键字创建别名，因此不需要为表“users”创建别名“users”。

其次，如果第二个表可能不包含与第一个匹配的匹配项，但您仍然需要显示该属性，则 LEFT JOIN 很有用 - 如果未找到匹配项，第二个表的属性将具有 NULL 值。

我不确定您的查询中是否需要 LEFT JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:08:04.060

```
SELECT users.*, retailers.*  
FROM retailer 
LEFT JOIN users 
ON retailer.user_id=users.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:15:55.233

另一种方法是：

```
$query = "SELECT u.*, r.*
FROM users u, retailer r
WHERE u.user_id=" . $_SESSION['user_id'] . "
AND u.user_id=r.user_id"; 
```

我注意到 SO 海报倾向于使用明确的 JOIN 语言，它是更符合标准还是只是一种风格选择？我知道 LEFT OUTER JOIN 是必需的，所以这只是为了保持一致性吗？

# arduino - 如何将已编写的库包含到 Arduino 中的自定义库中

> ID：12029135
> 
> 赞同：5
> 
> 时间：2012-08-19T19:01:41.687
> 
> 标签：arduino

我正在创建一个新库来一起控制键盘和 LCD。大多数代码似乎都可以编译，但是当它到达我定义 LiquidCristal 变量的行时，它会说：

> 创建自定义库时，“LiquidCrystal”未命名类型

这是我的 LCDKeypad.h 内容的摘录

```
// Include types & constants of Wiring core API
#if defined(ARDUINO) && ARDUINO >= 100
#include "Arduino.h"
#else
#include "WProgram.h"
#include "WConstants.h"
#endif

// Include LCD library
#include <LiquidCrystal.h> 
```

错误在这一行：

```
private:
LiquidCrystal lcd( 8, 9, 4, 5, 6, 7 ); // <<-- Error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T22:57:36.957

好吧，我读了很多，我发现了一篇关于这个主题的非常有趣的文章：

[包括多个库](http://provideyourown.com/2011/advanced-arduino-including-multiple-libraries/)

它表示编译器不会搜索草图文件中未包含的库。破解此问题的方法是强制编译器在加载您的库之前链接它们，包括在我的情况下为草图中的 LiquidCrystal.h。

假设我的库“LCDkeypad”需要 LiquidCrystal。我的主程序（草图）需要包含 LiquidCrystal，以便为我的库“LCDKeypad”加载它。

现在，一件有趣的事情是使用前向声明，所以在我的 LCDKeypad.h 中我将声明“Class LiquidCrystal”但不包含库。我将在 LiquidCrystal.cpp 和草图中进行。我希望这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T12:28:00.207

有两种方法可以做到

*   如果您正在编写自己的代码，只需创建头文件.h扩展名和相关的c代码作为name_c。添加到主程序时，您需要在双引号中指定头文件名。

代码：

```
#ifndef LCD_H
#define LCD_H

//Declaration of variable /functions
#endif 
```

*   如果您尝试从链接下载。然后你需要将代码粘贴到`D:\arduino\arduino\libraries`

错误问题：

*   变量的多个声明重叠。

*   库函数重叠

# rsync - 我可以在我的 rsync 调用中包含密码吗？

> ID：12029140
> 
> 赞同：2
> 
> 时间：2012-08-19T19:02:20.983
> 
> 标签：rsync

我使用 rsync 来更新我的静态网站。我目前`cd`到本地网站目录，运行`rsync`命令，然后在下一行输入密码。我已将我的`rsync`通话保存到一个文本片段中（这样`_rs`就可以扩展为我的通话）。有没有办法在`-p`最后使用标志之类的东西并包含密码？

我的电话看起来像这样：

`rsync -avzh -e ssh * foo@foo.org:"/home/foo/public_html/"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:20:32.843

直接回答这个问题，在不太安全的情况下可能很有用。

```
#!/usr/bin/expect -f

set PASSPH "123456"
send_user "\n"
stty -echo

spawn rsync -apv -e ssh "/Volumes/Macintosh HD/Users/charliechaplin/test/" "charly@chaplin.com:/project/htdocs/site/"
expect "password:"
send "$PASSPH\n"
expect "#" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:04:56.597

选项之一是使用公钥/私钥对，请参阅[How to auto rsync with ssh passwordless](http://ubuntuforums.org/showthread.php?t=238672)

或者你可以尝试使用[Expect](http://debaan.blogspot.de/2007/09/simple-expect-ssh-example.html)

# lisp - 为什么静态范围通常被认为比动态范围更好？

> ID：12029141
> 
> 赞同：1
> 
> 时间：2012-08-19T19:02:21.920
> 
> 标签：lisp, scheme

我不确定我是否理解正确，为什么在旧版本的 Lisp 中没有实现静态范围，只有动态范围。发明了 Scheme 的 Sussman 和 Guy L. Steele Jr. 只在 Scheme 中实现了静态作用域。

我发现有时静态变量使用起来更方便，因为它们可以用作完美的状态持有者，尽管我们应该小心避免不希望的名称冲突，作为不希望的副作用。

我知道在编译期间检测到静态范围，而仅在运行时检测到动态范围。并且动态范围被认为难以调试，有时也难以推理。

如果我们将上述事实放在一边，我不确定我是否理解为什么静态范围通常被认为比动态范围更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T19:36:47.087

动态范围的基本问题是它*不是组合*的，因此违反了抽象。特别是，一段代码（例如，一个函数）的行为通常取决于从哪里调用它，以及在调用者的站点上可以看到哪些定义。因此，调用者必须小心不要定义与被调用者使用的（非本地）名称冲突的名称。因此，调用者必须知道每个被调用者的实现细节。这导致了可怕的模块化。特别是，对函数实现的更改可能会破坏所有调用者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T22:27:43.163

词法作用域对程序员来说更好，因为它使他们能够更好地*推理*他们的程序。特别是，他们可以从源代码（本地）而不是动态行为来推断程序。

此外，您可以使用动态绑定功能（如参数）向语言添加受限形式的动态范围。[SRFI-39](http://srfi.schemers.org/srfi-39/srfi-39.html)是 Scheme 的一般性提案。另请参阅球拍指南中的[参数](http://docs.racket-lang.org/guide/parameterize.html)。这使您可以在词法作用域语言中获得动态作用域的大部分好处（这是更好的默认值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T09:54:05.593

考虑以下定义：

```
(define (make-adder n)
  (lambda (x) (+ x n))) 
```

现在，当您调用 时`(make-adder 2)`，您会返回一个函数。这个函数有什么作用？我们来看一下：

```
(let ((add2 (make-adder 2)))
  (let ((n 10))
    (add2 n)))
;=> ? 
```

上面的代码会评估什么？这取决于范围规则：

1.  在词法范围的 Scheme 中，结果将为 12，因为`n`定义中的与示例代码中的`make-adder`不同。`n`
2.  在（假设的）动态范围的方案中，结果将是 20，因为在调用时`n`已经反弹到。`10``+`

现在，这两种行为都遵循简单、可预测的规则。但请注意，在词法范围的情况下，您可以查看 的定义，`make-adder`并能够将引用与*本地*`n`声明相关联，而无需了解将使用的上下文。在动态范围的情况下，情况并非如此。（事实上​​，在动态作用域下，to 的论点是完全多余的。）*`make-adder``make-adder`*

 *正因为如此，词法作用域在推理 的行为时是一个优势`make-adder`，这就是为什么它通常（但不总是）是首选的原因。*

# tridion - 缓存通道服务 - 健康监控响应？

> ID：12029144
> 
> 赞同：5
> 
> 时间：2012-08-19T19:02:37.447
> 
> 标签：tridion

我想知道监视 Tridion 缓存通道服务 (CCS) 以进行功能健康检查的最佳方法是什么。

**我们今天已经有了什么？**

*   Windows 服务监控（它作为 Windows 服务运行）
*   Telnet 端口 1099 检查 (TCP)

通过上述两项检查，我们能够捕捉到大部分故障，但有时 CCS 仍然没有响应缓存失效或缓存命中，并且日志中也没有错误（静默失败？不确定）。

**还有其他方法可以进行健康检查吗？**

通常对于 http，我们可以 ping 一个 url 并获得 200 或 500 等状态码。CCS有没有类似的技术，所以我们可以得到功能健康状态。它是基于 RMI 的，所以不确定它是否有类似 http 的状态码。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:06:56.277

我不认为 CCS 能够广播健康信号。我看到的唯一选择是从 CCS 切换到 JMS。例如，可以广泛监控 Apache ActiveMQ，如本文所述：[ActiveMQ JMS ping](https://stackoverflow.com/questions/2318750/activemq-jms-ping)。

JMS 相对于 CCS 的其他优势：

*   它在 http 上运行，所以它更“防火墙友好”
*   它可以使用负载均衡器进行扩展
*   它可以处理任意数量的“主题”，因此您可以将一个 JMS 实例用于您的生产/验收/开发、直播/登台等。

# java - 在 Android 上创建多个日历事件

> ID：12029146
> 
> 赞同：2
> 
> 时间：2012-08-19T19:02:49.920
> 
> 标签：java, android, events, calendar

我有以下代码在单击按钮时创建一个事件。我想知道如何通过按下此按钮来创建多个（比如 5 个）事件。感谢您的任何帮助！

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Button button = (Button)findViewById(R.id.button1);
   // button.setOnClickListener(this);
    final CheckBox checkBox = (CheckBox) findViewById(R.id.checkBox1);
    final CheckBox checkBox2 = (CheckBox) findViewById(R.id.checkBox2);

    final Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v) {

             if (checkBox.isChecked()) {

                 { 

                SimpleDateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy, h:mmaa"); 
                long lnsTime = 0, lneTime = 0;

                        Date dateObject;

                        try{
                        String dob_var = "August 16, 2012, 11:35PM";

                        dateObject = formatter.parse(dob_var);

                        lnsTime = dateObject.getTime();
                        Log.e(null, Long.toString(lnsTime));

                        dob_var = "August 16, 2012, 11:59PM";      

                        dateObject = formatter.parse(dob_var);

                        lneTime = dateObject.getTime();
                        Log.e(null, Long.toString(lneTime));
                        }

                        catch (java.text.ParseException e) 
                            {
                            // TODO Auto-generated catch block
                                e.printStackTrace();
                                Log.i("E11111111111", e.toString());
                            }

                     Intent intent = new Intent(Intent.ACTION_EDIT);

                         intent.setType("vnd.android.cursor.item/event");
                      intent.putExtra("title", "9:00AM Start");
                      intent.putExtra("description", "There will be a 9:00AM start tomorrow.");
                      intent.putExtra("eventLocation", "Chris' house");
                      intent.putExtra("beginTime", lnsTime);
                      intent.putExtra("endTime", lneTime);
                      startActivity(intent);

                 }

        } 
```

到目前为止，代码创建的单个事件很好，只是我需要创建多个，最好没有“保存/取消”屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:30:47.427

单击该按钮时，您可以在 for 循环上进行一些迭代。

喜欢

```
for (int i = 0; i < YOUR_NUMBER_OF_EVENTS; i++)
    createCalendarEvent(); 
```

方法在哪里

```
createCalendarEvent(); 
```

创建事件的部分。这可以在单击按钮时直接完成，也可以在异步任务中完成以防止 GUI 冻结和/或阻塞。

我没有测试您的代码或教程中的代码，但您可以阅读本教程[http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)来学习如何在不开始新意图的情况下处理日历事件。（来自帖子[https://stackoverflow.com/a/372​​2180/1513735](https://stackoverflow.com/a/3722180/1513735)）

# ruby-on-rails - 为什么不能在它或 rspec 上的特殊块中赋值

> ID：12029147
> 
> 赞同：0
> 
> 时间：2012-08-19T19:02:53.917
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot, shoulda

我是 Rails 新手，我想用 rspec、should 和 factory girl 测试现有的 rails 项目。
我尝试为模型的变量赋值，但我不能。
这是错误；

```
Failure/Error: @brief.brand_info = 'bla bla bla'
  NoMethodError:
    undefined method `brand_info=' for nil:NilClass
  # ./spec/models/brief_spec.rb:34:in `block (3 levels) in <top (required)>' 
```

您可以通过访问此[链接访问我的模型和工厂...](https://stackoverflow.com/questions/12023470/how-to-test-a-method-of-models-with-rspec-and-factory)

简要工厂代码；

```
Factory.define :brief, :class => Brief do |b|
  b.brand_info 'brand info'
  b.duration 14
end 
```

项目工厂代码；

```
Factory.define :project, :class => Project do |p|
  p.association :owner, :factory => :customer

  p.title 'project title'
  p.description 'project description'
  p.stage :brief_completed
  p.contest_type :standard

  p.brief {|p| p.association(:brief)}
  p.association :project_type, :factory => :project_type
end

Factory.define :project_with_prize, :parent => :project do |p|
  p.prize 5000
  p.stage :prize_determined
end

Factory.define :project_waiting_for_payment, :parent => :project_with_prize do |p|
  p.stage :awaiting_payment
end

Factory.define :project_started, :parent => :project_with_prize do |p|
  p.start Time.zone.now
  p.end Time.zone.now.advance(:days => 14)
  p.stage :started
end

Factory.define :project_started_with_no_brief, :parent => :project_with_prize do |p|
  p.brief nil
  p.start Time.zone.now.advance(:days => -10)
  p.end Time.zone.now.advance(:days => 4)
  p.stage :started
end

Factory.define :project_overdue, :parent => :project_with_prize do |p|
  p.start Time.zone.now.advance(:days => -14)
  p.end Time.zone.now.advance(:minutes => -15)
  p.stage :started
end

Factory.define :project_ended, :parent => :project_with_prize do |p|
  p.start Time.zone.now.advance(:days => -15)
  p.end Time.zone.now.advance(:days => -1)
  p.stage :ended
end

Factory.define :project_revising, :parent => :project_ended do |p|
  p.stage :revising
end

Factory.define :project_delivering_files, :parent => :project_ended do |p|
  p.stage :delivering_files
end

Factory.define :project_completed, :parent => :project_ended do |p|
  p.stage :completed
end

Factory.define :faulty_project, :parent => :project do |p|
  p.title nil
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T22:56:36.000

失败消息包含一些线索：

*   `undefined method 'brand_info=' for nil:NilClass`表示该`#brand_info=`方法正在一个没有定义它的对象上被调用；在这种情况下，`nil`。
*   `Failure/Error: @brief.brand_info = 'bla bla bla'`显示发生这种情况的代码行。出于某种原因`@brief`，您的规范中为零，但您尚未发布规范代码，所以我无法告诉您原因。

我建议从一个仅使用`describe`/的简单规范开始`it`（例如 no `before`、`let`等），然后执行以下操作：

```
describe Brief do
  it 'assigns the brand info' do
    brief = Brief.new
    brief.brand_info = 'bla bla bla'
  end
end 
```

一旦你得到了这个工作，你可以`Brief.new`用一个电话来代替工厂女孩（如果你真的需要工厂女孩提供的额外设置——但要知道这是额外的逻辑会减慢你的规范），你可以重构`let`一次您有多个需要对实例进行操作的`brief`示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T00:19:51.767

感谢您的意见。我通过在 before 块中（而不是在 setup 块中）声明变量来解决这个问题。

# django - Django查询查找列是否具有None值

> ID：12029159
> 
> 赞同：0
> 
> 时间：2012-08-19T19:04:27.487
> 
> 标签：django, django-models, django-views, django-queryset

我在 Content 表中有以下列作为名称和标签。

从以下 django 查询中是否有任何方法可以`None`在不使用 for 循环而不使用 .exclude() 的情况下找到名为 column 的标记

```
 newobj = Content.objects.filter(name="Harry")
  boolval = if tag has or not not None value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:12:56.827

是的，使用 __isnull[0]

```
Content.objects.filter(name="Harry", tag__isnull=True) 
```

[0] [https://docs.djangoproject.com/en/dev/ref/models/querysets/#isnull](https://docs.djangoproject.com/en/dev/ref/models/querysets/#isnull)

对此进行扩展：

> 我们不能从 newobj 中做到这一点吗 – Rajeev

.filter() 返回一个查询集。

```
newobj = Content.objects.filter(name="Harry")
boolval = newobj.exists(tag__isnull=True) 
```

如果有带有空标签的 Harry，这将返回 true/false（通过存在）。

# c# - MVC4 Bundle 中的 {version} 通配符

> ID：12029161
> 
> 赞同：157
> 
> 时间：2012-08-19T19:04:38.830
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-optimization

在 MVC 4 中，我们有捆绑包。在定义捆绑包时，我们可以对文件夹中的所有文件使用通配符，例如 *。

在下面的示例中是什么`-{version}`意思？

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
        "~/Scripts/jquery-{version}.js"));
} 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-08-20T17:04:49.960

`-{version}`基本上映射到版本[regex](https://en.wikipedia.org/wiki/Regular_expression)，或者更准确地说：[`(\d+(?:\.\d+){1,3})`](http://regexr.com/3egdk)。
使用`*`往往会抓住太多，例如，如果你 bundle `jquery*`，那也将包括`jquery-ui`可能会弄乱排序的东西。但是使用`jquery-{version}.js`可以让你避免每次升级 jquery 时都必须更新你的包定义。

需要注意的其他事项：

*   `{version}`仅适用于路径的最后一部分——基本上是文件名——而不是目录。
*   同一文件夹中的多个版本的 jquery 都会被赶上。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-19T20:39:02.363

此捆绑包能够在脚本名称中容纳版本号。因此，将 jQuery 更新到应用程序中的新版本（通过 NuGet 或手动）不需要任何代码/标记更改。

有关捆绑的更多信息，请参见以下链接：[http ://weblogs.asp.net/jgalloway/archive/2012/08/16/asp-net-4-5-asp-net-mvc-4-asp-net- web-pages-2-and-visual-studio-2012-web-developer-features.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/16/asp-net-4-5-asp-net-mvc-4-asp-net-web-pages-2-and-visual-studio-2012-web-developer-features.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-05T15:21:40.727

`~/Scripts/jquery-{version}.js`包含在其中。当我们在路径中指定 {version} 选择器时，这里的捆绑系统足够智能，可以引用 jquery 文件的最高版本。此外，这个捆绑系统足够聪明，可以选择文件的缩小版本，如果在定义的路径上可用的话。

# rotation - UISplitViewController 主控制器隐藏

> ID：12029162
> 
> 赞同：3
> 
> 时间：2012-08-19T19:04:44.970
> 
> 标签：rotation, uisplitviewcontroller, ios6

我正在将一个应用程序移植到 iOS 6，我发现一个解决方案在 iOS 6 上不再适用于在拆分视图控制器中触发和关闭主视图控制器的显示。

这是我用来触发 iOS6 上的操作的一段代码，如果设备旋转则该操作才有效：

```
- (void)hideMaster:(BOOL)hide {

[self clearOverlay];

UISplitViewController* spv = appDelegate.splitViewController;

NSLog(@"hidemaster: I do %@show the master", (hide?@"not ":@""));

self.hiddenMaster= hide;

NSLog(@"delegate=%@", spv.delegate);

[spv.view setNeedsLayout];
spv.delegate=nil;

spv.delegate=self;

}

- (BOOL)splitViewController:(UISplitViewController*)svc shouldHideViewController: (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {

NSLog(@"Spv: I do %@show the master", (self.hiddenMaster?@"not ":@""));

return self.hiddenMaster;
} 
```

如何在用户不旋转设备的情况下强制触发 shouldHideViewController 回调？

谢谢，法布里齐奥·巴托洛穆奇

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T16:04:56.677

比预期容易：我把 [spv.view setNeedsLayout]; 调用您的函数后不久，它就完美地完成了这项工作。这是为了其他用户的利益的完整代码：

```
- (void)hideMaster:(BOOL)hide {
   NSLog(@"hide-unhide master");
   UISplitViewController* spv = appDelegate.splitViewController;
   spv.delegate=self;
   self.hiddenMaster= hide;
   [spv willRotateToInterfaceOrientation:self.interfaceOrientation duration:0];
   [spv.view setNeedsLayout];
}

- (BOOL)splitViewController:(UISplitViewController*)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {
   NSLog(@"Spv: I do %@ show the master", (self.hiddenMaster?@"not ":@""));
   return self.hiddenMaster;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:42:36.163

代替

```
spv.delegate=nil;
spv.delegate=self; 
```

你需要做

```
[spv willRotateToInterfaceOrientation:self.interfaceOrientation duration:0]; 
```

你会很开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T09:25:14.210

没有办法解决这个问题。甚至苹果公司也展示了一面白旗。我更改了架构以将所有视图都作为弹出窗口，并完全摆脱了拆分视图控制器。我不能再推迟引入自动布局了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T13:57:16.987

我最终通过遵循 Apple 文档建议仅根据用户的指示打开它来摆脱它。现在我只为用户手动打开的辅助面板恢复了它，而不是在 iPhone 版本上由展开的 segue 管理。

# android - Android Java 应用 Jsch 使用按钮发送命令

> ID：12029171
> 
> 赞同：3
> 
> 时间：2012-08-19T19:05:30.017
> 
> 标签：android, jsch, raspberry-pi

我正在尝试编写我的第一个每个 android 应用程序来连接到我的 Raspberry Pi 并使用 gphoto2 库控制我的 DSLR。我目前有一个非常粗糙的应用程序，有两个按钮，一个“连接”按钮和一个“捕获”按钮。

```
package com.example.myfirstapp;

import java.util.Properties;
import com.jcraft.jsch.*;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    /** Called when the user clicks the send button */
    public void sshConnect(View view) throws Exception {

            Properties props = new Properties(); 
            props.put("StrictHostKeyChecking", "no");

            String host="123.456.7.89";
            String user ="pi";
            String pwd = "password";
            int port = 22;

            Properties config = new Properties();
            config.put("StrictHostKeyChecking", "no");
            config.put("compression.s2c", "zlib,none");
            config.put("compression.c2s", "zlib,none");

            JSch jsch=new JSch();  
            Session session=jsch.getSession(user, host, port);          
            session.setConfig(config);
            session.setPassword(pwd);
            session.connect();
            Context context = getApplicationContext();
            CharSequence text = "Connected to Pi";
            int duration = android.widget.Toast.LENGTH_SHORT;
            android.widget.Toast toast = android.widget.Toast.makeText(context, text, duration);
            toast.show();
    }
    public static void sendCapture(Session session) throws Exception {    
            Channel channel = session.openChannel("exec");
            ((ChannelExec) channel).setCommand("gphoto2 --capture-image");
            channel.setInputStream(null);
            ((ChannelExec) channel).setErrStream(System.err);
            channel.connect();

    }
} 
```

我可以连接到我的树莓派，但如果不从连接部分调用它，我无法将 jsch 会话传递给“捕获”按钮：

```
sendCapture(session); 
```

我希望代码使用“连接”按钮通过 ssh 连接，然后能够使用“捕获”按钮尽可能多地拍照。欢迎任何问题或一般建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:58:26.627

```
 Button btn = (Button)findViewById(R.id.btn);
    btn.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            String ip,username,password;
            ip="192.168.x.x";
            username="guest";
            password="guest";
  //Write your code here 

 }); 
```

# mysql - 如何从mysql服务器中选择随机行而不重复任何结果

> ID：12029172
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:05:31.650
> 
> 标签：mysql

我想知道是否有任何方法可以从 mysql 服务器中选择随机行（我有六个），而不会重复任何结果。我知道选择随机行的 Rand() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:06:49.380

`SELECT * FROM table ORDER BY RAND() LIMIT 6;`

但也看看[http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)要了解这可能会导致大型表出现问题。

# php - 在php中手动超时后会话初始化

> ID：12029174
> 
> 赞同：0
> 
> 时间：2012-08-19T19:06:16.537
> 
> 标签：php, session

所以我有一个登录系统，它为每次登录尝试生成一个随机令牌并将其保存在表单中`$_session['loginToken']`，然后在表单检查会话值是否等于发布的输入之后。我还在这里找到了在一定时间后手动设置超时：[How do I expire a PHP session after 30 minutes?](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

问题出在第一次登录尝试或会话销毁（超时）之后 $_SESSION 是一个空数组，没有设置任何内容，但在第二次尝试后它工作正常。

```
<?php
if(!isset($_SESSION))
    session_start();

print_r($_SESSION);
/*
first try output : Array ( )
second try output : Array ( [LAST_ACTIVITY] => 1345402023 [loginToken] => e3d997090751883feadfed3ae4d8b63e )
*/
if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > 10)) {
    session_destroy();
    $_SESSION = array();
}

$_SESSION['LAST_ACTIVITY'] = time();
$token = $_SESSION['loginToken'] = md5(uniqid(mt_rand(), true));
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<form method="post" action="<?=$_SERVER['PHP_SELF'];?>">
    <input type="hidden" name="token" value="<?=$token;?>" />
    <button type="submit" value="login" id="login" name="login">Click</button>
</form>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:21:41.660

我不确定（现在也无法测试），但是

```
if(!isset($_SESSION))
    session_start(); 
```

似乎永远不会发生，因为 $_SESSION 总是被设置。如果没有，请尝试：

```
session_start(); 
```

不要做

```
$_SESSION = array(); 
```

因为这是不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:33:57.410

关键提示在文档中[`session_destroy()`](http://php.net/session_destroy)：

> 要再次使用会话变量，必须调用 session_start()。

销毁会话也会关闭它，因此在分配任何变量之前，您首先需要重新打开一个新会话。

# linux - Qt 应用程序不显示图像

> ID：12029175
> 
> 赞同：0
> 
> 时间：2012-08-19T19:06:19.830
> 
> 标签：linux, qt, gnu

我开发了一个应用程序（使用 Qt Creator），它使用一些图片作为背景和图标。现在我正在尝试部署它，应用程序已成功安装：

```
$ make
$ sudo make install 
```

安装目录是`/usr/local/ctimer/`，二进制文件位于`/usr/local/ctimer/ctimer`。问题是当我执行程序时，例如，使用 Alt + F2`/usr/local/ctimer/ctimer`时，图像不会显示。

我注意到，如果我从其文件夹中执行程序一切正常：

```
$ cd /usr/local/ctimer/
$ ./ctimer 
```

可以使用包含上述命令的 bash 脚本来解决该问题，并将其放入`/usr/local/bin/`例如，但我想知道为什么会出现这种行为。

任何想法？

**编辑：**

这是代码：

```
void Stopwatch::createMenu()
{
  startAction = new QAction(QIcon("pictures/start.png"), tr("&Start/Continue"), this);
  startAction->setToolTip("Start/Continue stopwatch");
  startAction->setShortcut(Qt::CTRL + Qt::Key_S);
  connect(startAction, SIGNAL(triggered()), this, SLOT(start()));

  pauseAction = new QAction(QIcon("pictures/pause.png"), tr("&Pause"), this);
  pauseAction->setToolTip("Pause stopwatch");
  pauseAction->setShortcut(Qt::CTRL + Qt::Key_P);
  connect(pauseAction, SIGNAL(triggered()), this, SLOT(pause()));

  resetAction = new QAction(QIcon("pictures/reset.png"), tr("&Reset"), this);
  resetAction->setToolTip("Reset stopwatch");
  resetAction->setShortcut(Qt::CTRL + Qt::Key_C);
  connect(resetAction, SIGNAL(triggered()), this, SLOT(reset()));

  countDownAction = new QAction(QIcon("pictures/down.png"), tr("&Countdown"), this);
  countDownAction->setToolTip("Create a custom count down");
  countDownAction->setShortcut(Qt::CTRL + Qt::Key_D);
  connect(countDownAction, SIGNAL(triggered()),
          countDownDialog, SLOT(show()));

  aboutAction = new QAction(QIcon("pictures/about.png"), tr("&About"), this);
  aboutAction->setToolTip("About this timer!");
  aboutAction->setShortcut(Qt::CTRL + Qt::Key_H);
  connect(aboutAction, SIGNAL(triggered()), aboutDialog, SLOT(show()));

  quitAction = new QAction(QIcon("pictures/quit.png"), tr("&Quit"), this);
  quitAction->setToolTip("Quit timer!");
  quitAction->setShortcut(Qt::CTRL + Qt::Key_Q);
  connect(quitAction, SIGNAL(triggered()), this, SLOT(close()));

  contextMenu = new QMenu(this);

  contextMenu->addAction(startAction);
  contextMenu->addAction(pauseAction);
  contextMenu->addAction(resetAction);
  contextMenu->addAction(countDownAction);
  contextMenu->addAction(aboutAction);
  contextMenu->addAction(quitAction);

  this->addAction(startAction);
  this->addAction(pauseAction);
  this->addAction(resetAction);
  this->addAction(countDownAction);
  this->addAction(aboutAction);
  this->addAction(quitAction);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T03:49:05.847

对于图标，我会像您一样使用资源文件。

如果要将其他文件存储在可执行文件的目录（或子目录）中，可以在从返回的字符串前面添加[`QCoreApplication::applicationDirPath()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#applicationDirPath)：

```
QString prefix = QCoreApplication::applicationDirPath();
QIcon startIcon(prefix + "/pictures/start.png");
startAction = new QAction(startIcon, tr("&Start/Continue"), this);
... 
```

但是，这不符合 Linux / Unix 文件系统，因为可执行文件可能会在其中，`/usr/bin`并且您不能真正将资源放在该目录中。您可以将资源存储在其他位置（例如），并在安装期间`/usr/share/yourapp`将该目录存储在某个位置。`/etc`然后您的应用程序通过[QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html)获取资源目录。

请参阅[此说明](http://qt-project.org/doc/qt-4.8/qsettings.html#locations-where-application-settings-are-stored)以确定存储该信息的最佳位置（但是您可以使用 QSettings 读取任何文件）。

```
QSettings settings(QSettings::SystemScope,
                   QCoreApplication::organizationName(),
                   QCoreApplication::applicationName());
// This points to /etc/xdg/MySoft.conf on Unix.

QString prefix = settings.value("resourcesDirectory");
// Inside /etc/xdg/MySoft.conf you have a 'resourcesDirectory'
// entry with value '/usr/share/MySoft/resources'

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:27:32.283

好吧，通常我不会回答自己的问题，但由于缺乏回应，这是必要的。

有关图像的问题已使用资源文件解决，但其他文件（例如声音）也会出现相同的问题，并且相同的方法不适用于该问题。

当应用程序执行时，程序采用我的当前目录作为它的基目录，那么问题就来了。

解决方案是创建一个 Bash 脚本，如下所示：

```
#!/bin/bash
$ cd /path/to/myprogram/
$ ./myprogram 
```

并将其放入`/usr/local/bin/`or `/usr/bin/`。

也许这不是最好的解决方案，但它确实有效。如果有人有更好的解决方案，请分享。

# r - 稀疏矩阵到R中的数据框

> ID：12029177
> 
> 赞同：24
> 
> 时间：2012-08-19T19:07:00.580
> 
> 标签：r, matrix, sparse-matrix

我有一个稀疏矩阵

```
Formal class 'dgCMatrix' [package "Matrix"] with 6 slots
  ..@ i       : int [1:37674] 1836 2297 108 472 1735 1899 2129 2131 5 67 ...
  ..@ p       : int [1:3417] 0 2 8 22 25 35 44 45 45 47 ...
  ..@ Dim     : int [1:2] 3416 3416
  ..@ Dimnames:List of 2
  .. ..$ : chr [1:3416] "AAA" "AAE" "AAL" "AAN" ...
  .. ..$ : chr [1:3416] "AAA" "AAE" "AAL" "AAN" ...
  ..@ x       : num [1:37674] 1 1 1 1 1 1 1 1 1 1 ...
  ..@ factors : list() 
```

什么是将此矩阵转换为列表的快速方法（除了 a `for loop`）：

```
Origin Destination Weight
AAA AAE 4
AAL AAN 5 
```

注意：我只需要获取 Weight>0 的 Origin 和 Destination

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-19T19:54:26.367

使用`summary`，这里是一个例子：

```
mat <- Matrix(data = c(1, 0, 2, 0, 0, 3, 4, 0, 0), nrow = 3, ncol = 3,
              dimnames = list(Origin      = c("A", "B", "C"),
                              Destination = c("X", "Y", "Z")),
              sparse = TRUE)
mat
# 3 x 3 sparse Matrix of class "dgCMatrix"
#    Destination
#     X Y Z
#   A 1 . 4
#   B . . .
#   C 2 3 .

summ <- summary(mat)
summ
# 3 x 3 sparse Matrix of class "dgCMatrix", with 4 entries 
#   i j x
# 1 1 1 1
# 2 3 1 2
# 3 3 2 3
# 4 1 3 4

data.frame(Origin      = rownames(mat)[summ$i],
           Destination = colnames(mat)[summ$j],
           Weight      = summ$x)
#   Origin Destination Weight
# 1      A           X      1
# 2      C           X      2
# 3      C           Y      3
# 4      A           Z      4 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-04-17T11:41:28.823

`df <- as.data.frame(as.matrix(mat))`

`as.matrix`将稀疏矩阵转换为密集矩阵，如果它不是太大:-) 然后你可以将它转换为数据框。

（`mat`是来自@flodel 答案的示例 dgCMatrix）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T21:57:45.950

```
df <- as.data.frame(as.matrix(m)) 
```

如果稀疏矩阵太大，我发现将其转换成块是可行的。修改下面的“step_size”变量以更改块大小。如果要按行而不是按列分块，请将“ncol”和“cbind”更改为“nrow”和“rbind”。

```
large_matrix_to_df <- function(m){

  iter = 1
  step_size = 5000

  output = NULL

  while(iter + step_size < ncol(m)){
    print(iter)
    add_output = data.frame(as.matrix(m[,iter:(iter+step_size-1)]))

    if(is.null(output)){
      output = add_output
    }else{
      output = cbind(output,add_output)
    }

    iter = iter + step_size
  }

  add_output = data.frame(as.matrix(m[,iter:ncol(m)]))
  output = cbind(output,add_output)

  return (output)
} 
```

# c - 如何“杀死”一个 Pthread？

> ID：12029180
> 
> 赞同：2
> 
> 时间：2012-08-19T19:07:26.110
> 
> 标签：c, sockets, pthreads, client-server

我正在学习 Pthreads，并且想知道杀死这样一个对象的最佳方法是什么。在寻找类似问题后，我无法找到“明确”的答案，但请随时向我指出任何相关问题。

我正在使用一个小型客户端服务器应用程序，其中服务器主线程正在侦听客户端连接的套接字。每次客户端连接时，服务器都会在 while true 循环中创建一个执行“无限工作”的新线程。现在我想在同一个客户端在套接字上发送“停止”请求时停止这个循环。

知道客户端是通过每个套接字消息中提供的 ID 来识别的，您将如何实现这样的行为？使用共享变量（在主服务器线程和客户端服务器线程之间）作为 while 循环中的测试条件。使用 PThread 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T01:18:38.403

没有办法强行杀死单个 POSIX 线程；这是故意的，设计使然。相反，如果您的线程需要被其他线程停止，您应该设计在其中运行的代码以考虑到这一点。执行此操作的惯用方法是使用退出标志变量（受互斥体保护）和条件变量。

还有`pthread_cancel`, 可用于请求线程退出。正确使用它需要设置清理处理程序`pthread_cleanup_push`和/或临时禁用取消`pthread_setcancelstate`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:14:36.443

您不应该强制线程退出。您应该设计您的程序，以便在发送“停止”时存在 while 循环。

就像是：

```
 while(strcmp(word, "stop")!=0){
        word = read_word_from_socket();
        ......
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T00:57:47.907

你可以这样设计你的服务器：

```
typedef struct _client_data_buffer
{
   char user_cmd[16];    /* Could be "CONTINUE" or "STOP" */
   char* buffer;         /* Client network data. You can use a fixed size buffer for this part also */
} client_data_buffer;

/* client encode data before sending to the server */
size_t encode_client_data(client_data_buffer* data_buf, char* buf)
{
    size_t serialized_bytes = 0;    /* Can help for transmission errors checking */

    /* Serialize the cmd */
    memcpy(buf + serialized_bytes, data_buf->user_cmd, strlen(data_buf->user_cmd) + 1);
    serialized_bytes += strlen(data_buf->user_cmd) + 1;
    /* Serialize the data the client want to send to the server */
    memcpy(buf + serialized_bytes, data_buf->buffer, strlen(data_buf->buffer) + 1);
    serialized_bytes += strlen(arch->nombre_arch) + 1;

    return serialized_bytes;
}

/* Server decode client data */
void decode_client_data(char* buf, client_data_buffer* data_buf)
{
    /* Your decode here */
}

int create_server(int port, char *address)
{
    /* Create you server */
}

void* thread_callback(void *client_data)
{
    /* client socket descriptor */
    int client_id = *(int *) client_data;
    client_data_buffer *some_user_data;
    char some_buffer[BUFFER_SIZE];

    /* receiving data until STOP command is received */

    while(1)
    {
        /* receive */
        recv(client_id, some_buffer, BUFFER_SIZE, 0);

        /* decode some_buffer to some_user_data */

        /* compare */
        if (strcmp("STOP", some_user_data->user_cmd) == 0)
        {
            /* shutdown and close client socket and exit */
        }

        else
        {
            /* Parse incoming data and do the job */
        }
    }

    return NULL;
}

int main(int argc, char **argv) {
    int server_socket;
    int client_socket;
    int result;

    /* Crete our server */
    server_socket = create_tcp_server (my_port_number, my_address);

    while (1) {
        pthread_t thread_id;

        client_socket = accept(server_socket, NULL ,NULL);
        result = pthread_create(&thread_id, NULL, thread_callback, (void *) client_socket);
        if (result != 0) 
        {
          /* Handle errors with errno and exit */
        }
        /* We don't care about the return status ---> avoid zombies and handling threads termination */
        pthread_detach(thread_id);
    }

    exit (EXIT_SUCCESS);
} 
```

# c# - C# 虚函数

> ID：12029184
> 
> 赞同：0
> 
> 时间：2012-08-19T19:08:10.083
> 
> 标签：c#, winforms, graphics

我有一个关于下课的问题。

`Photo`类继承自`Form`并具有图像，因此当我`Photo`根据其构造函数创建类的对象时，由于虚拟`Drawer`方法，它会绘制图像。

有一个`BorderedPhoto`类继承自`Photo`类，还有一个覆盖方法`Drawer()`，可以设置照片图像周围的边框。

该程序运行良好，但我的困惑是当我`BorderedPhoto`通过引用 Photo 类对象创建类对象时，为什么它被称为`Drawer()`Bordered 类的覆盖，即使它没有显式调用它。

```
class Photo:Form
{
    Image image;
    public Photo()
    {
        image= new Bitmap(@"C:\Jug_7.jpg");

        this.Text = "My Water Jug";
        this.Paint+= new PaintEventHandler(Drawer);
    }
    public virtual void Drawer(object source, PaintEventArgs e)
    {
        e.Graphics.DrawImage(image, 20, 20);
    }
}
class BorderedPhoto : Photo
{
    Photo photo;
    Color color;
    public BorderedPhoto(Photo p, Color c)
    {
        photo = p;
        color = c;
    }
    public override void Drawer(object source, PaintEventArgs e)
    {
        base.Drawer(source, e);
        e.Graphics.DrawRectangle(new Pen(color, 10), 25, 15, 215, 225);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:17:38.780

> 该程序运行良好，但我的困惑是当我通过引用 Photo 类对象创建 BorderedPhoto 类的对象时，为什么它被称为 Bordered 类的 override Drawer() ，尽管它没有明确调用它。

所以我认为这意味着......

```
Photo p = new BorderedPhoto(); 
```

嗯，这就是多态性的全部意义所在。如果在调用多态方法时必须限定底层类型，那有什么意义呢？此行为允许您通过共享接口使用不同的实现。

此外，由于您`base.Drawer(source, e);`在覆盖内部调用，因此也将调用基类实现。

# python - Python：如何从 C 中重载反射数字运算符

> ID：12029186
> 
> 赞同：0
> 
> 时间：2012-08-19T19:08:21.657
> 
> 标签：python, python-2.7

在 python 中，我们可以像这样重载运算符：

```
class X:
    def __add__(self, i):
        return i+3;
    def __radd__(self, i):
        return i+4

x = X()
print x+0  # prints 3
print 0+x  # prints 4 
```

如果我们希望在 C 扩展模块中实现 X，我们必须显式注册运算符重载。__add__ 是可行的：

```
X_type.tp_as_number.nb_add = &X_add; 
```

但是 __radd__ 似乎没有对应的插槽。它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:54:56.707

Python 使用两种不同的方法来处理正常和反向二进制操作。所有版本的 Python 2.x 都支持“旧式”方法，而最近版本（自 2.3 起？）支持“新式”方法。Python 3.x 仅支持“新样式”数字类型。

“旧式”数字类型预期的操作数已经转换为通用类型。nb_coerce 插槽指向将其他数字类型转换为您的自定义类型的函数。

“新样式”数字类型不使用 nb_coerce 但应检查其他操作数的类型。对于 Python 2.x，您需要在 tp_flags 槽中包含 Py_TPFLAGS_CHECKTYPES。Python 3 不需要做任何特别的事情。

摘自 Python 2.7 abstract.c 文件：

```
/*
  Calling scheme used for binary operations:

  v     w       Action
  -------------------------------------------------------------------
  new   new     w.op(v,w)[*], v.op(v,w), w.op(v,w)
  new   old     v.op(v,w), coerce(v,w), v.op(v,w)
  old   new     w.op(v,w), coerce(v,w), v.op(v,w)
  old   old     coerce(v,w), v.op(v,w)

  [*] only when v->ob_type != w->ob_type && w->ob_type is a subclass of
      v->ob_type

  Legend:
  -------
  * new == new style number
  * old == old style number
  * Action indicates the order in which operations are tried until either
    a valid result is produced or an error occurs.

 */ 
```

由于 Python 3.x 仅支持“新样式”数字类型，因此仅使用第一个调用方案。而且由于“新风格”可以与 Python 2.7 一起使用，我通常使用新风格。

# c# - IHTMLDocument 的脚本的 InvokeMember 引发访问冲突异常

> ID：12029187
> 
> 赞同：0
> 
> 时间：2012-08-19T19:08:46.570
> 
> 标签：c#, winforms, mshtml, ihtmldocument2

以下代码仅在作为 ClickOnce 应用程序发布并安装后才会引发访问冲突异常。即使我处于发布模式，如果从 Visual Studio 运行它也不会发生错误：

```
public static object InvokeScript(this IHTMLDocument2 document, string scriptName, object[] args = null)
{
    FileLog.WriteLine("-------------------------------------- Will invoke script --------------------------------------");
    FileLog.WriteLine("document: " + document == null ? "NULL" : document.ToString());
    FileLog.WriteLine("scriptName: " + scriptName);
    FileLog.WriteLine("args: " + (args == null ? "NULL" : string.Join(", ", args.Select(a => a == null ? "NULL" : a.ToString()))));
    FileLog.WriteLine("Stack: " + GetStack());
    object result = null;
    try
    {
        Type type = GetType(document);
        result = Invoke(document, scriptName, args, result, type);
    }
    catch (Exception ex)
    {
        if (IsSecurityOrCriticalException(ex))
        {
            throw;
        }
    }
    FileLog.WriteLine("-------------------------------------- Invoked script --------------------------------------");
    return result;
}

private static object Invoke(IHTMLDocument2 document, string scriptName, object[] args, object result, Type type)
{
    FileLog.WriteLine("Will Invoke");
    result = type.InvokeMember(scriptName, System.Reflection.BindingFlags.InvokeMethod, null, ((IHTMLDocument)document).Script, args);
    FileLog.WriteLine("Invoked");
    return result;
}

private static Type GetType(IHTMLDocument2 document)
{
    FileLog.WriteLine("Will get type");
    Type type = (((IHTMLDocument)document).Script).GetType();
    FileLog.WriteLine("Got type");
    return type;
} 
```

这是我尝试实施[这个建议](https://stackoverflow.com/a/11924693/1219414)，但似乎我做错了什么。此外，脚本不会总是抛出异常。我已经测试了几个页面，它们都运行良好，除了[这个站点](http://www.topshop.com/webapp/wcs/stores/servlet/TopCategoriesDisplay?storeId=12556&catalogId=33057)。

异常发生在`Type type = (((IHTMLDocument)document).Script).GetType();`一行中（记录的最后一件事是“Will get type”）。

我尝试运行的脚本是页面上尚不存在的脚本（基本上是测试脚本是否存在，如果不存在，那么我会将脚本注入页面）。

知道我做错了什么吗？

# javascript - 如何将来自另一个测试框架的测试带入 QUnit？

> ID：12029188
> 
> 赞同：1
> 
> 时间：2012-08-19T19:08:46.860
> 
> 标签：javascript, jquery, qunit

我已经为一个 JavaScript 测试框架编写了一堆测试，并希望将它们拉入 QUnit。

另一个框架将其测试作为对象的属性保存，每个属性都保存一个测试函数。这些调用一个 << assertEqual() >> 函数，但我有代码重写它以将其参数传递给 QUnit 的 << equal() >> 函数。我将测试拉入 QUnit，如下所示：

```
for ( var tst_name in otherFrameworkTests ) {
    test(
        tst_name,
        function () {otherFrameworkTests[tst_name]()}
    );
}; 
```

这会在 << tst_name >> 下运行 QUnit 测试——但其中的每一个都在 otherFrameworkTests 的最后一个属性中运行测试。该测试运行正确（失败或按预期通过）。

另外：我可以运行测试

```
test("test_name", function () {otherFrameworkTests.test_name()}); 
```

这适用于给定文件中的所有测试，但它很笨拙并且违反了 DRY。

为什么会这样？如何重新组织代码以运行所有测试？

# actionscript-3 - ActionScript3：如何获取组的所有成员？

> ID：12029189
> 
> 赞同：0
> 
> 时间：2012-08-19T19:08:52.050
> 
> 标签：actionscript-3, flash, actionscript, movieclip

在我的 flash 阶段，我使用 Modify > Group 或 Ctrl-G 对图像、文本字段和影片剪辑进行分组。

该组中的一个 MovieClip 是“行为控制器”，可更改图像、文本等在该组内的显示方式。

有没有办法获取给定对象组的所有成员？

```
// Similar function, grabs all sibling objects within a MovieClip
var mcSiblings:Array = [];
for(var i:Number = 0; i < this.parent.numChildren; i++) {
  mcSiblings.push(this.parent.getChildAt(i));
}

// Theoretical functionality, grabs all siblings within a Group
var gSiblings:Array = [];
for(var i:Number = 0; i < this.group.length; i++) { // this.group doesn't exist
  gSiblings.push(this.group.getChildAt(i);
} 
```

这甚至可能吗？

现在，我正在考虑将所有节点嵌套在一个新的movieClip 中，但这意味着我必须使用movieClips 加载我的库。不一定是问题，只是杂乱无章，不如 Groups 方便。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:47:20.423

对对象进行分组是一个与 actionscript 无关的 IDE 功能。这只是一种方便地处理图形的方法。您可以手动将组中的所有显示对象存储在一个数组中并循环遍历该数组以避免它们位于影片剪辑中。

# java - 有没有办法通过 JavaMail 发送电子邮件而无需在 Java 中隐式设置密码？

> ID：12029192
> 
> 赞同：-2
> 
> 时间：2012-08-19T19:10:12.017
> 
> 标签：java, jakarta-mail

有没有办法通过 JavaMail 发送电子邮件而无需在 Java 代码（或属性文件）中隐式设置密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:04:39.467

我假设*“没有在 Java 代码中隐式设置密码”*是指“没有对密码进行硬编码，以便其他人可以看到它”。

如果您的 SMTP 服务器需要密码，则客户端程序（发送电子邮件的程序）必须提供密码，并从某处获取密码。三个选择是

1.  Java中的硬编码
2.  存储在属性文件中
3.  启动时手动提供

就是这样。如果您的客户端未在安全环境中运行（您可以控制谁可以访问属性文件），则它可能不应该以这种方式访问​​安全服务。

一种可能的替代方法是编写您自己的中间服务。客户端连接到您的服务，该服务可以检查并丢弃任何不适当的内容，并且仅针对通过验证的发送尝试连接到真实的电子邮件服务器（使用密码）。您的服务不需要实现 SMTP；它可以是一个简单的 POST servlet。

# php - 只在 Joomla 模块的 FOR 循环中显示最后一个结果

> ID：12029194
> 
> 赞同：2
> 
> 时间：2012-08-19T19:10:52.483
> 
> 标签：php, arrays, joomla2.5, joomla-extensions

这是我在 Joomla 2.5 模块的 tmpl/defult.php 中的代码：

```
$result = count($payed);
for($i=0;$i<$result;$i++)
{
   $pay=F.$payed[$i];
   echo "<td>".JText::_("$pay")."</td>";
   echo "<td>".number_format($item->$pay)."</td>";
   $paytotal=$pay+$paytotal;  // For last result
   echo "</tr>";
} 
```

`$payed`是一个`Array`。我从用户那里得到它并通过这个代码爆炸：

```
$p = $params->get('pay_fields');
$payed = explode ("\n", $p); 
```

在这个模块的语言文件中，我使用了模块参数的通用名称，如下所示：

```
F1="pay1"
F2="Pay2"
F5="Pay3"
F6="Pay4" 
```

我在数据库中的表有这样的列名：

```
F1  |  F2  |  F3  |  F4  |  F5  |  F6  |  F....
---------------------------------------------------
12  | 1247 | 1056 | 2368 | 2256 | 12510| ... 
```

我想从所有用户输入的数据库文件中创建一个表。例如当用户输入模块参数时

```
1
2
5
6 
```

脚本必须从数据库中读取 F1,F2,F5 和 F6 并生成表。我知道脚本会这样做，但不完全正确！它只是显示最后的结果！其他参数设置为0！怎么了 ？

Know Module 在前端显示此结果：

```
--------------------------------
F1     |          0
--------------------------------
F2     |          0
--------------------------------
F5     |          0
--------------------------------
Pay4   |       12,510 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:52:54.363

问题以一种有趣的方式解决了！

**我只是将分隔符从更改`" \n "`为`" ; "`并输入带有新符号的数字！**

但我仍然不明白问题是什么！

但是，现在它工作正常：D。

# javascript - Javascript getElementById 空错误

> ID：12029196
> 
> 赞同：0
> 
> 时间：2012-08-19T19:10:58.473
> 
> 标签：javascript

我最近发布了关于 Firefox 中 javascript 的问题，并指出问题可能是 document.write() 以某种方式覆盖了脚本。[有人建议我使用 ID 来解决覆盖脚本和避免信息堆积的问题](https://stackoverflow.com/a/12028845/1433767)。

但是，在尝试将 ID 实现到我的 javascript 和 html 代码中时，我发现 firebug 报告说：

```
"TypeError: document.getElementById("author_container") is null" 
```

尽管如此，ID 已经再次定义如下：

```
<p id="author_container"></p> 
```

并且显然没有错别字，**并且将脚本重新排列**到头部或更改它以便 p 出现在脚本之前**绝对没有区别**。（请注意，尽管脚本首先出现，但另一个示例运行良好）。

如果我使用一个预先存在的 ID 和 getElementById 示例并在 Firefox 中运行它，它运行良好：

[http://pastebin.com/FTEX1HGE](http://pastebin.com/FTEX1HGE)

但是，如果我尝试运行我的代码，这似乎并没有太大的不同，我会遇到问题： http: [//pastebin.com/XfGUpZAS](http://pastebin.com/XfGUpZAS)

我在这里错过了什么吗？如何更改代码以使其在 Firefox 中工作？Firefox 会允许我正确运行我的代码吗？（下周知道吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:17:43.507

将您的脚本放在页面底部，就在结束`</body>`标记之前。换句话说，将 script 标签设为`document.body`. 这样，DOM 树在脚本开始之前就完全加载了。

除了一些问题之外，真正的问题是函数中的`document.open`语句`GenerateCoord`。这*将清除完整的文档*，之后 - 实际上 - 没有任何元素可以通过任何 Id 获取。这是[一个没有它的jsfiddle](http://jsfiddle.net/G7QPU/)。

# networking - 使用 powershell 识别端口是否关闭/打开/过滤

> ID：12029197
> 
> 赞同：0
> 
> 时间：2012-08-19T19:11:00.273
> 
> 标签：networking, powershell, scripting

有没有办法在powershell中识别端口是否关闭或过滤？[此处](http://blogs.technet.com/b/wsnetdoc/archive/2011/11/07/windows-powershell-script-test-port.aspx)显示的脚本仅检查是否可以成功进行连接。它无法区分封闭和过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:42:05.940

不确定这是否会显示端口是否被过滤或关闭，但至少这会提供更多信息：

```
clear
$port = 139
$portStats = &netstat -an |  Select-String ":$port"
$portStats 
```

# html - 为什么上面的div下面的div不会向上滑动？

> ID：12029198
> 
> 赞同：0
> 
> 时间：2012-08-19T19:11:03.777
> 
> 标签：html, css

我正在处理[这个仪表板](http://ac.jabulmer12.com)，但似乎无法让容器 3 在容器 1 下向上滑动，任何人都可以找到原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:19:52.787

这是使用浮点数时的正常行为。要解决这个问题，您可以使用 javascript，或更改 html 的格式。像这样的东西应该工作：

```
<div class="col">
 <div id="container1">...</div>
 <div id="container3">...</div>
</div>
<div class="col">
 <div id="container2">...</div>
 <div id="container4">...</div>
</div> 
```

当你现在浮动 col 而不是容器时，你应该得到想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:41:05.203

更好的是，您可能想看看[Masonry 的“老大哥”Isotope](http://isotope.metafizzy.co/)，它可以以更多方式排列布局；然而实现起来很简单。在移动触摸屏设备上也能很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:19:37.960

您链接到的内容基本上只是 CSS 浮动如何工作的演示。没有直接的解决方法可以使花车表现不同，但您可能想看看砌体，这是一种 javascript 解决方案：http: [//masonry.desandro.com/](http://masonry.desandro.com/)

# jax-ws - Mule - 安排流程以使用 Web 服务

> ID：12029203
> 
> 赞同：0
> 
> 时间：2012-08-19T19:11:30.113
> 
> 标签：jax-ws, quartz-scheduler, mule

我是 Mule 的新手，想做一件“简单”的事情：

*   每 X 秒调用一次soap webservice 操作并将结果存储在一个文件中。

我的 Flow 看起来实际上是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
    ...
    <custom-transformer class="net.cpy.samples.webservices.SampleMessage" name="MessageWs" doc:name="MessageWs"/>
    <flow name="csvPublisher" doc:name="csvPublisher">
        <quartz:inbound-endpoint jobName="job1" repeatInterval="5000" responseTimeout="10000" doc:name="Quartz">
            <quartz:event-generator-job/>
        </quartz:inbound-endpoint>
        <cxf:jaxws-client operation="getMessages" clientClass="net.cpy.samples.webservices.MessageServiceService" port="MessageServicePort" wsdlLocation="http://localhost:8080/webservices-0.0.1-SNAPSHOT/MessageService?wsdl" enableMuleSoapHeaders="true" doc:name="SOAP Client">
            <cxf:inInterceptors/>
            <cxf:outInterceptors/>
        </cxf:jaxws-client>
        <http:outbound-endpoint exchange-pattern="request-response" address="http://localhost:8080/webservices-0.0.1-SNAPSHOT/MessageService" doc:name="HTTP"/>
        <file:outbound-endpoint path="/tmp" outputPattern="output.xml" responseTimeout="10000" doc:name="File"/>
    </flow>
</mule> 
```

我的示例 Web 服务的 WSDL 是：

```
 <?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="MessageServiceService" targetNamespace="http://webservices.samples.cpy.net/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://webservices.samples.cpy.net/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
<xs:schema elementFormDefault="unqualified" targetNamespace="http://webservices.samples.cpy.net/" version="1.0" xmlns:tns="http://webservices.samples.cpy.net/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="getMessages" type="tns:getMessages"/>
<xs:element name="getMessagesResponse" type="tns:getMessagesResponse"/>
<xs:element name="sampleMessage" type="tns:sampleMessage"/>
<xs:complexType name="getMessages">
    <xs:sequence/>
  </xs:complexType>
<xs:complexType name="getMessagesResponse">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="return" type="tns:sampleMessage"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="sampleMessage">
    <xs:sequence>
      <xs:element minOccurs="0" name="content" type="xs:string"/>
      <xs:element minOccurs="0" name="date" type="xs:dateTime"/>
      <xs:element minOccurs="0" name="id" type="xs:long"/>
      <xs:element minOccurs="0" name="signature" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>
  </wsdl:types>
  <wsdl:message name="getMessagesResponse">
    <wsdl:part element="tns:getMessagesResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessages">
    <wsdl:part element="tns:getMessages" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="MessageService">
    <wsdl:operation name="getMessages">
      <wsdl:input message="tns:getMessages" name="getMessages">
    </wsdl:input>
      <wsdl:output message="tns:getMessagesResponse" name="getMessagesResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="MessageServiceServiceSoapBinding" type="tns:MessageService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getMessages">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getMessages">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMessagesResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="MessageServiceService">
    <wsdl:port binding="tns:MessageServiceServiceSoapBinding" name="MessageServicePort">
      <soap:address location="http://localhost:8080/webservices-0.0.1-SNAPSHOT/MessageService"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

目前，我尝试使用 Quartz 来安排 Web 服务调用，使用 jaxws-client 来生成soap 请求并使用 http 传输来调用服务。

我使用 cxf 从 wsdl 生成客户端代码。

有人可以给我一些建议，如何做到这一点？

我正在使用最新版本的 mule（CE 版本）。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:46:00.920

问题是您没有在生成的`event-generator-job`so a`NullPayload`中指定有效负载，这可能会很快停止流程（没有可调度的内容）。

要么必须`event-generator-job`生成用于 CXF 调用的对象。

或者，假设`MessageWs`转换器的工作是为 CXF 调用创建负载，`event-generator-job`生成一个虚拟负载并让转换器用真实负载将其清除：

```
<flow name="csvPublisher" doc:name="csvPublisher">
    <quartz:inbound-endpoint jobName="job1" repeatInterval="5000" responseTimeout="10000" doc:name="Quartz">
        <quartz:event-generator-job>
            <quartz:payload>dummy</quartz:payload>
        </quartz:event-generator-job>
    </quartz:inbound-endpoint>
    <transformer ref="MessageWs" />
    <cxf:jaxws-client operation="getMessages" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T04:44:28.227

您还可以使用 Mule poll 通过配置频率属性来调度流。这里供您参考：- [https://developer.mulesoft.com/docs/display/current/Poll+Reference](https://developer.mulesoft.com/docs/display/current/Poll+Reference)

# java - Android中的ImageView拖动限制

> ID：12029204
> 
> 赞同：7
> 
> 时间：2012-08-19T19:11:32.877
> 
> 标签：java, android, touch-event, ontouchlistener

我在布局中有一个 ImageView 并在 ImageView 上设置 OnTouchListener 以拖动 ImageView。它运行良好。我的问题是如何防止将 ImageView 移出布局范围？

这是我的代码：

活动类：

```
public class RepositionTestActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reposition_test_layout);
        ImageView imageView = (ImageView)findViewById(R.id.android);
        imageView.setOnTouchListener(new Touch());
    }
} 
```

触摸类：

```
public class Touch implements OnTouchListener {

    private static final int NONE = 0;
    private static final int DRAG = 1;
    private static final int ZOOM = 2;

    private static final float MIN_ZOOM = 1f;
    private static final float MAX_ZOOM = 5f;

    private Matrix matrix = new Matrix();
    private Matrix savedMatrix = new Matrix();

    private PointF start = new PointF();
    private PointF mid = new PointF();

    private int mode = NONE;
    private float oldDistance = 1f;

    public boolean onTouch(View view, MotionEvent event) {
        ImageView imageView = (ImageView)view;

        switch(event.getAction() & MotionEvent.ACTION_MASK) {

            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                mode = DRAG;
                break;

            case MotionEvent.ACTION_POINTER_DOWN:
                oldDistance = spacing(event);
                if(oldDistance > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                }
                break;

            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                break;

            case MotionEvent.ACTION_MOVE:
                if(mode == DRAG) {
                    matrix.set(savedMatrix);
                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
                }
                else if(mode == ZOOM) {
                    float newDistance = spacing(event);
                    if(newDistance > 10f) {
                        matrix.set(savedMatrix);
                        float scale = newDistance / oldDistance;
                        float[] values = new float[9];
                        matrix.getValues(values);
                        float currentScale = values[Matrix.MSCALE_X];
                        if(scale * currentScale > MAX_ZOOM) 
                            scale = MAX_ZOOM / currentScale;
                        else if (scale * currentScale < MIN_ZOOM)
                            scale = MIN_ZOOM / currentScale;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                }
                break;
        }
        imageView.setImageMatrix(matrix);
        return true;
    }

    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event) {
        point.set((event.getX(0) + event.getX(1)) / 2, (event.getY(0) + event.getY(1)) / 2);
    }

} 
```

布局xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/reposition_test_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/android"
        android:src="@drawable/android"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:scaleType="matrix"
        android:contentDescription="@string/android_description" >
    </ImageView>

</LinearLayout> 
```

![在此处输入图像描述](../Images/2b372f575545c6670c60ea8ec3862ca1.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T20:53:11.510

将以下参数添加到`Touch`类中：

```
private float dx; // postTranslate X distance
private float dy; // postTranslate Y distance
private float[] matrixValues = new float[9];
float matrixX = 0; // X coordinate of matrix inside the ImageView
float matrixY = 0; // Y coordinate of matrix inside the ImageView
float width = 0; // width of drawable
float height = 0; // height of drawable 
```

修改后的代码`case MotionEvent.ACTION_MOVE:`

```
if (mode == DRAG) {
        matrix.set(savedMatrix);

        matrix.getValues(matrixValues);
        matrixX = matrixValues[2];
        matrixY = matrixValues[5];
        width = matrixValues[0] * (((ImageView) view).getDrawable()
                                .getIntrinsicWidth());
        height = matrixValues[4] * (((ImageView) view).getDrawable()
                                .getIntrinsicHeight());

        dx = event.getX() - start.x;
        dy = event.getY() - start.y;

        //if image will go outside left bound
        if (matrixX + dx < 0){
            dx = -matrixX;
        }
        //if image will go outside right bound
        if(matrixX + dx + width > view.getWidth()){
            dx = view.getWidth() - matrixX - width;
        }
        //if image will go oustside top bound
        if (matrixY + dy < 0){
            dy = -matrixY;
        }
        //if image will go outside bottom bound
        if(matrixY + dy + height > view.getHeight()){
            dy = view.getHeight() - matrixY - height;
        }
        matrix.postTranslate(dx, dy);   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:54:49.417

安卓文档说：

> 可以通过调用**getLeft()**和**getTop()**方法来检索视图的位置。前者返回代表视图的矩形的左坐标或 X 坐标。后者返回代表视图的矩形的顶部或 Y 坐标。这些方法都返回视图相对于 **其父**视图的位置。
> 此外，还提供了几种方便的方法来避免不必要的计算，即**getRight()**和**getBottom()**。这些方法返回代表视图的矩形的右边缘和下边缘的坐标。例如，调用 getRight() 类似于以下计算：getLeft() + getWidth()。

因此，您可以在移动图像之前获取图像坐标，并且可以在**OnTouchListener**类中计算移动量度。现在，如果（*`X coordinate of your image plus horizontal movement that you computed,be greater than device width`*或*`Y coordinate of your image plus vertical movement that you computed,be greater than device height`*）图像不移动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T00:38:53.187

1.  我们需要根据视图坐标创建两个 Rect 对象，一个用于我们的视图，另一个用于我们的图像。

    ```
    float[] values = new float[9];
    matrix.getValues(values);
    float globalX = values[Matrix.MTRANS_X];
    float globalY = values[Matrix.MTRANS_Y];
    float scaleX = values[Matrix.MSCALE_X];
    float scaleY = values[Matrix.MSCALE_Y];
    Rect viewRect = new Rect(0, 0, viewWidth, viewHeight);
    Rect imageRect = new Rect((int) globalX, (int) globalY, Math.round(bitmapWidth * scaleX + globalX),
            Math.round(bitmapHeight * scaleY + globalY)); 
    ```

    2.  如果我们希望我们的图像始终在我们的视图中，那么我们检查一下：

        ```
        if (!viewRect.contains(imageRect)) {
            matrix.set(lastSetMatrix); //return to last saved parameters
        } 
        ```

    3.  有时我们需要我们的图像总是比我们的视图大以将图像的一部分定位在视图内，然后我们可以检查一下：

        ```
        if (!imageRect.contains(viewRect)) {
           matrix.set(lastSetMatrix);
        } 
        ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T18:35:14.210

我使用了 Benito Bertoli 的答案并修改了 ACTION_MOVE 代码更改次要和主要符号以进行图像缩放和拖动以进行图像缩放

这是代码

```
private static final float MIN_ZOOM = 1f; 
private static final float MAX_ZOOM = 2.5f; 

public boolean onTouch(View v, MotionEvent event) {
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);

    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN: //first finger down only
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG" );
            mode = DRAG;
            break;
        case MotionEvent.ACTION_UP: //first finger lifted
        case MotionEvent.ACTION_POINTER_UP: //second finger lifted
            mode = NONE;
            Log.d(TAG, "mode=NONE" );
            break;
        case MotionEvent.ACTION_POINTER_DOWN: //second finger down
            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM" );
            }
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                //matrix.set(savedMatrix);
                //matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
                matrix.set(savedMatrix);

                matrix.getValues(matrixValues);
                matrixX = matrixValues[2];
                matrixY = matrixValues[5];
                width = matrixValues[0] * (view.getDrawable().getIntrinsicWidth());
                height = matrixValues[4] * (view.getDrawable().getIntrinsicHeight());

                dx = event.getX() - start.x;
                dy = event.getY() - start.y;

                //if image will go outside left bound
                if (matrixX + dx  > 0){
                    Log.e("dx","lef bound " + dx);
                    dx = -matrixX;
                }
                //if image will go outside right bound
                if(matrixX + dx + width < view.getWidth()){
                    dx = view.getWidth() - matrixX - width;
                }
                //if image will go oustside top bound
                if (matrixY + dy > 0){
                    dy = -matrixY;
                }
                //if image will go outside bottom bound
                if(matrixY + dy + height < view.getHeight()){
                    dy = view.getHeight() - matrixY - height;
                }

                matrix.postTranslate(dx, dy);
            }
            else if (mode == ZOOM) {
                Float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 10f) {
                    matrix.set(savedMatrix);
                    float scale = newDist / oldDist;
                    float[] values = new float[9];
                    matrix.getValues(values);
                    float currentScale = values[Matrix.MSCALE_X];
                    if(scale * currentScale > MAX_ZOOM)
                        scale = MAX_ZOOM / currentScale;
                    else if (scale * currentScale < MIN_ZOOM)
                        scale = MIN_ZOOM / currentScale;
                    matrix.postScale(scale, scale, mid.x, mid.y);

                }
                break;
            }
    } //perform the transformation.

    view.setImageMatrix(matrix);
    return true; // indicate event was handled

}

private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return (float)Math.sqrt(x * x + y * y);
}

private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

    return drawable;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T07:16:30.227

我已经完成了这段代码。当我放大母鸡时，它不应该越界。它工作正常。但是当它触及 x=0 和 y=0 的坐标时，它不会最小化。

```
int FLAG=0;   

 else if (mode == ZOOM) {

                    float newDistance = spacing(event);

                    Log.i("new distance ", newDistance+"");

                    matrix.getValues(matrixValues);
                    matrixX = matrixValues[2];
                    matrixY = matrixValues[5];
                    width = matrixValues[0]
                            * (((ImageView) view).getDrawable().getIntrinsicWidth());
                    height = matrixValues[4]
                            * (((ImageView) view).getDrawable()
                                    .getIntrinsicHeight());

                    dx = event.getX() - start.x;
                    dy = event.getY() - start.y;

                    // if image will go outside left bound
                    if (matrixX + dx < 0) {
                        FLAG=1;
                    }
                    if (matrixX + dx + width > view.getWidth()) {
                        FLAG=1;
                        //dx = view.getWidth() - matrixX - width;
                    }
                    // if image will go oustside top bound
                    if (matrixY + dy < 0) {
                        FLAG=1;
                        //dy = -matrixY;
                    }
                    // if image will go outside bottom bound
                    if (matrixY + dy + height > view.getHeight()) {
                        FLAG=1;
                        //dy = view.getHeight() - matrixY - height;
                    }
                if (matrixX + dx ==0 || matrixY + dy==0){ 
                    FLAG=0;
                }

                    if (newDistance > 10f && FLAG==0) {

                        matrix.set(savedMatrix);

                        float scale = newDistance / oldDistance;

                        float[] values = new float[9];

                        matrix.getValues(values);
                        float currentScale = values[Matrix.MSCALE_X];
                        if (scale * currentScale > MAX_ZOOM)
                            scale = MAX_ZOOM / currentScale;
                        else if (scale * currentScale < MIN_ZOOM)
                            scale = MIN_ZOOM / currentScale;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                }
                break; 
```

# wpf - WPF ContentTemplateSelector 怪异

> ID：12029214
> 
> 赞同：1
> 
> 时间：2012-08-19T19:12:47.567
> 
> 标签：wpf, datatemplate, contenttemplateselector

**目标：**我希望拥有一个包含我的数据的对象，并将其绑定到 ContentPresenter，该 ContentPresenter 使用自定义 ContentTemplateSelector 选择适当的数据模板以在主控件中呈现。

**问题：** DataTemplate 在主控件中没有按预期呈现；它不呈现指定的视图控件。

**代码：**

MainView.xaml：

```
<Window x:Class="WpfContentTemplateSelector.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:this="clr-namespace:WpfContentTemplateSelector"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <this:ObjectWrapper x:Key="wrapper"/>
        </Grid.Resources>

        <ContentPresenter Content="{Binding Value}" DataContext="{StaticResource ResourceKey=wrapper}">
            <ContentPresenter.ContentTemplateSelector>
                <this:TemplateSelector/>
            </ContentPresenter.ContentTemplateSelector>
        </ContentPresenter>
    </Grid>
</Window> 
```

数据对象.cs：

```
class DataObject
{
    public string Title { get; set; }

    public DataObject()
    {
        Title = "Title";
    }
} 
```

ObjectWrapper.cs：

```
class ObjectWrapper
{
    public DataObject Value { get; set; }

    public ObjectWrapper()
    {
        Value = new DataObject();
    }
} 
```

模板选择器.cs：

```
class TemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        DataTemplate template = new DataTemplate(typeof(View));

        return template;
    }
} 
```

查看.xaml：

```
<UserControl x:Class="WpfContentTemplateSelector.View"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:this="clr-namespace:WpfContentTemplateSelector"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Background="Navy">
    <Grid Background="Navy">
        <Button Height="30" Content="{Binding Title}"/>
    </Grid>
</UserControl> 
```

**概括：**

*   ObjectWrapper 初始化。
*   DataObject 初始化。
*   在初始化时，TemplateSelector 创建一个新的 DataTemplate。
*   创建的 DataTemplate 在其构造函数中使用 View 类型。
*   对象全部初始化，主视图的datacontext设置为DataObject，视图仍然没有渲染到主窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:28:34.630

您的问题是，在您`TemplateSelector`为类型定义 DataTemplate 时，`View`您没有给它任何内容。您的代码相当于以下内容：

```
<ContentPresenter Content="{Binding Value}" DataContext="{StaticResource ResourceKey=wrapper}">
    <ContentPresenter.ContentTemplate>
        <DataTemplate DataType="this:View">
        </DataTemplate>
    </ContentPresenter.ContentTemplate>
</ContentPresenter> 
```

在这里，您只是为 type定义一个**空的 DataTemplate**`View`，而您真正想要的是一个包含`View`控件的 DataTemplate：

```
<ContentPresenter Content="{Binding Value}" DataContext="{StaticResource ResourceKey=wrapper}">
    <ContentPresenter.ContentTemplate>
        <DataTemplate>
            <this:View />
        </DataTemplate>
    </ContentPresenter.ContentTemplate>
</ContentPresenter> 
```

所以你需要做的是修改你`TemplateSelector`的返回一个正确的`DataTemplate`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:58:22.047

Adi Lester 的回应表明，我正在创建的 DataTemplate 对象的子节点没有呈现构造函数中使用的视图。

为了在代码隐藏中添加到 DataTemplate 的可视化树，我扩充了我的 TemplateSelector 对象以使用以下代码：

```
class TemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        View view = item as View;
        DataTemplate template = new DataTemplate(typeof(View));

        FrameworkElementFactory factory = new FrameworkElementFactory(typeof(View));
        template.VisualTree = factory;

        return template;
    }
} 
```

这成功地更改了可视化树并使用我的自定义 TemplateSelector 呈现视图以提供 DataTemplate。

# ios - 跨域 iOS UIWebView 中的元素？

> ID：12029217
> 
> 赞同：0
> 
> 时间：2012-08-19T19:13:38.190
> 
> 标签：ios, uiwebview, sencha-touch, html5-audio

我正在使用 Sencha Touch 和 PhoneGap（又名 Apache Cordova）构建一个应用程序。我正在尝试使用 Sencha 的 Ext.Audio 元素（在 DOM 中创建 HTML5 音频元素）播放来自外部域的音频以响应点击事件。

在 Chrome 和 Safari 的桌面版本中，这可以正常工作。当我在 iPhone 上将项目作为“本机”应用程序运行时，音频不会播放，但 Xcode 的控制台不会显示任何错误。

使用相同的`Ext.Audio.play()`方法和相同的音频文件，但在应用程序中包含文件而不是从外部服务器加载它，它也会播放。

这是跨域限制吗？有谁知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:17:05.347

这似乎是 HTTP 标头问题。显然 UIWebView 比桌面浏览器更挑剔。不确定，但我改变了主机提供文件的方式，它开始工作。

# python - 简化列表理解

> ID：12029221
> 
> 赞同：1
> 
> 时间：2012-08-19T19:14:24.803
> 
> 标签：python

我将如何更简洁地编写以下内容？

```
 genres = ','.join([item for item in list((sheet.cell(n,18).value, 
                      sheet.cell(n,19).value, sheet.cell(n,20).value)) if item]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T19:16:08.873

```
','.join(filter(None, (sheet.cell(n, i).value for i in (18, 19, 20)))) 
```

`(sheet.cell(n, i).value for i in (18, 19, 20))`是替换部分的[生成器表达式](https://stackoverflow.com/questions/101268/hidden-features-of-python/101310#101310)`list(…)`。您可以将元组替换`(18, 19, 20)`为范围或其他内容。

`filter(None, iterable)` [相当于](http://docs.python.org/library/functions.html#filter) `(x for x in iterable if x)`。_ （在 Python 2.x 中，您可能想要改用[itertools.ifilter](http://docs.python.org/library/itertools.html#itertools.ifilter)。）

* * *

另请注意，您可以使用创建列表

```
[sheet.cell(n,18).value, sheet.cell(n,19).value, sheet.cell(n,20).value] 
```

而不是更长的`list((sheet.cell(n,18).value, …))`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T19:16:44.320

在两条线上。可读性胜过简洁性。

你的列表理解也是不必要的，一个 genexp 就可以了。

```
genre_values = (sheet.cell(n, i).value for i in xrange(18, 21))
genres = ", ".join(value for value in genre_cells if value) 
```

# wpf - 无法将焦点设置在文本框上

> ID：12029224
> 
> 赞同：1
> 
> 时间：2012-08-19T19:14:44.930
> 
> 标签：wpf, focus

我的主窗口有一个内容控件，我将用户控件加载到其中。我看不到将焦点设置到用户控件中的文本框。我尝试了几种建议的方法，例如`textBox1.Focus()`and `Keyboard.Focus()`，`FocusManager.SetFocusedElement()`但它们似乎不起作用。

如果有更好的方法，我不会拘泥于这种加载用户控件的方式。似乎我错过了关于焦点或 ContentControl 的一些非常基本的东西，所以我想我会问专家而不是继续解决问题。

有任何想法吗？

MainWindow.xaml：

```
<Grid>
    <ContentControl Name="NavFrame"/>
</Grid> 
```

MainWindow.xaml.cs：

```
protected override void OnInitialized(EventArgs e)
{
    this.NavFrame.Content = new UserControl1();
    base.OnInitialized(e);
} 
```

用户控件1.xaml：

```
<Grid>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="93,79,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
</Grid> 
```

UserControl1.xaml.cs：

```
protected override void OnInitialized(EventArgs e)
{
    textBox1.Focus();
    // FocusManager.SetFocusedElement(this, textBox1);
    // Keyboard.Focus(textBox1);
    base.OnInitialized(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:24:06.780

如果您将`textBox1.Focus()`用户控件放入加载的事件中，而不是`OnInitialized`它似乎可以正常工作。

```
<UserControl ...
    Loaded="UserControl_Loaded">
    <Grid>
        <TextBox Name="textBox1" />
    </Grid>
</UserControl> 
```

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    textBox1.Focus();
} 
```

如果您想将注意力集中在 OnLoad 以外的时间上，那么简单的方法也可以工作......

UserControl1.xaml.cs：

```
public void FireTextBoxFocus()
{
    textBox1.Focus();
} 
```

MainWindow.xaml.cs：

```
UserControl1 ctrl = new UserControl1();
ContentControl1.Content = ctrl;
ctrl.FireTextBoxFocus(); 
```

# android - 如何在我的 qpdf 阅读器应用程序开发中修复以下错误

> ID：12029225
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:15:02.153
> 
> 标签：android

我正在尝试使用 Qpdf JAR 文件开发一个 android pdf 阅读器应用程序，他们提供了一个用于 pdf 查看和编辑的示例代码，我遵循 qpdf 参考给出的程序，并相应地对我的应用程序进行了更改，但是当我我在模拟器上运行此应用程序，它已停止。以下是logcat消息，任何人都可以帮助我吗？

```
08-20 00:26:26.787: E/AndroidRuntime(669): FATAL EXCEPTION: main
08-20 00:26:26.787: E/AndroidRuntime(669): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pdfreader/com.pdfreader.SamplePDFViewer}: android.view.InflateException: Binary XML file line #7: Error inflating class com.qoppa.samples.viewer.QScrollView
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.os.Looper.loop(Looper.java:137)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-20 00:26:26.787: E/AndroidRuntime(669):  at java.lang.reflect.Method.invokeNative(Native Method)
08-20 00:26:26.787: E/AndroidRuntime(669):  at java.lang.reflect.Method.invoke(Method.java:511)
08-20 00:26:26.787: E/AndroidRuntime(669):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-20 00:26:26.787: E/AndroidRuntime(669):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-20 00:26:26.787: E/AndroidRuntime(669):  at dalvik.system.NativeStart.main(Native Method)
08-20 00:26:26.787: E/AndroidRuntime(669): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.qoppa.samples.viewer.QScrollView
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-20 00:26:26.787: E/AndroidRuntime(669):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.Activity.setContentView(Activity.java:1835)
08-20 00:26:26.787: E/AndroidRuntime(669):  at com.pdfreader.SamplePDFViewer.onCreate(SamplePDFViewer.java:30)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.Activity.performCreate(Activity.java:4465)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-20 00:26:26.787: E/AndroidRuntime(669):  ... 11 more
08-20 00:26:26.787: E/AndroidRuntime(669): Caused by: java.lang.ClassNotFoundException: com.qoppa.samples.viewer.QScrollView
08-20 00:26:26.787: E/AndroidRuntime(669):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-20 00:26:26.787: E/AndroidRuntime(669):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-20 00:26:26.787: E/AndroidRuntime(669):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
08-20 00:26:26.787: E/AndroidRuntime(669):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
08-20 00:26:26.787: E/AndroidRuntime(669):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-03T15:48:13.610

遇到并解决了这个问题。这可能是由包含“com.qoppa.samples.viewer.QScrollView”的“main.xml”引起的。

```
 <com.qoppa.samples.viewer.QScrollView
        android:id="@+id/scrollview"
        android:layout_gravity="center"
        android:background="#FFEEEEEE"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <LinearLayout
            android:id="@+id/pagepane"
            android:background="#FFEEEEEE"
            android:gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">
        </LinearLayout>
    </com.qoppa.samples.viewer.QScrollView> 
```

你需要用你自己的类替换它来修复它。为了我：

```
 <com.example.qiaoruntao.trypdf08.QScrollView
        android:id="@+id/scrollview"
        android:layout_gravity="center"
        android:background="#FFEEEEEE"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <LinearLayout
            android:id="@+id/pagepane"
            android:background="#FFEEEEEE"
            android:gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">
        </LinearLayout>
    </com.example.qiaoruntao.trypdf08.QScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:22:12.333

```
Caused by: java.lang.ClassNotFoundException: com.qoppa.samples.viewer.QScrollView 
```

您可能还没有在清单中声明 QScrollView ？

```
<activity android:name=".QScrollView"
          android:label="QScrollViewActivity"/> 
```

# php - window.open 将参数传递给php并触发pdf创建和查看

> ID：12029228
> 
> 赞同：2
> 
> 时间：2012-08-19T19:15:27.073
> 
> 标签：php, pdf, post, window.open

我一直在使用 window.open 指向一个 php 文件，在该文件中我使用 fpdf 动态创建 pdf 并立即将其显示给用户。似乎在所有浏览器甚至移动设备上都能正常工作。例如：

```
window.open('/client/feature_Schedule/scheduleReport.php','Schedule_Report','width=900,height=600,status=yes'); 
```

在此示例中，我没有传递任何值，因为所需的所有参数都已存在于 php 文件中。

但是现在我想从 javascript 传递值，以便在创建 pdf 并将其显示给用户之前查询 php 文件中的数据库。有没有我应该注意的约定？Window.open 似乎没有处理这个问题，除非在“？”之后添加值。在网址的末尾。但我更喜欢发布这些值，因为可能有很多数据被发送到 php 文件。我什至一直在玩 $.ajax 但不确定如何触发 pdf 为用户打开。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:20:19.310

您可以创建一个`<form>`隐藏输入并使用 JavaScript 提交表单。注意`target="_blank"`导致表单发布到新窗口的属性。

```
<a href="#" onclick="document.forms['pdfForm'].submit();return false;">Generate PDF</a>

<form target="_blank" id="pdfForm" name="pdfForm" method="POST">
    <input type="hidden" name="param1" value="val1" />
    <input type="hidden" name="param2" value="val2" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:20:52.033

`window.open()`只能执行 GET 请求。如果您想使用 POST 获得相同的效果，则需要[创建一个带有适当控件和目标的表单。](https://stackoverflow.com/questions/8003089/dynamically-create-and-submit-form)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:45:24.383

有一个使用 window.open() 发送 POST 数据的解决方案，它非常简单： [Window.open 并通过 post 方法传递参数](https://stackoverflow.com/questions/3951768/window-open-and-pass-parameters-by-post-method-problem)

它甚至可以在不涉及任何实际 HTML 代码的情况下仅使用纯 javascript 编程来制作。

// 编辑：添加 javascript only 解决方案：

```
<input type="button" value="Open" onclick="openWindow();" />
<script>
function openWindow(){
    // create <form>
    var form = document.createElement('form');
    form.method = 'POST';
    form.action = 'process.php';
    form.target = 'window_1'; // target the window
    // append it to body
    var body = document.getElementsByTagName('body')[0];
    body.appendChild(form);
    // create an element
    var child1 = document.createElement('input');
    child1.type = 'text'; // or 'hidden' it is the same
    child1.name = 'elem1';
    child1.value = 'some value';
    // append it to form
    form.appendChild(child1);
    // create another element
    var child2 = document.createElement('input');
    child2.type = 'text'; // or 'hidden' it is the same
    child2.name = 'elem2';
    child2.value = 'some other value';
    // append it to form
    form.appendChild(child2);

    // create window
    window.open('', 'window_1');

    // submit form
    form.submit();
    body.removeChild(form); // clean up
}
</script> 
```

# c++ - 非常量引用类成员

> ID：12029234
> 
> 赞同：3
> 
> 时间：2012-08-19T19:16:10.713
> 
> 标签：c++, pointers, reference

我有以下课程：

```
class BaseStyle {
    private:
        Style *style;
    public:
        BaseStyle(Style& theStyle);
        const Style& getStyle() const;
        void setStyle(const Style& theStyle);
}; 
```

我正在尝试将在构造函数中传递的引用存储在 中，并在调用`style`时更改该属性。`setStyle()`我希望能够拥有一个属性`Style& style`，但是，然后我[阅读了](https://stackoverflow.com/questions/892133/should-i-prefer-pointers-or-references-in-member-data)c++ 引用属性在初始化后无法更改。现在我认为最好将引用存储在指针中，但我该怎么做呢？我不能只是做`style = theStyle`，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:02:21.803

你应该像这样实现你的类：

```
class BaseStyle
{
    private:
        Style *style;
    public:
        BaseStyle(Style &theStyle) { style = &theStyle; }
        const Style &getStyle() const { return(*style); }
        void setStyle(Style &theStyle) { style = &theStyle; }
}; 
```

说明：引用被实现为指针。这在文档中没有明确说明，因为没有编译器在做任何与此不同的事情。区别只是语法上的。这意味着，通过写入，`&theStyle`您可以获取可以分配给指针的对象的地址。

获取引用所引用的对象的地址并将其分配给指针并没有什么不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:26:51.577

如果您想使用指针，请将您的类代码更改为：

```
class BaseStyle {
    private:
        Style *style;
    public:
        BaseStyle(Style* theStyle);
        Style* getStyle();
        void setStyle(Style* theStyle);
}; 
```

然后设置样式，执行以下操作：

`Style`首先，为要传递的对象创建一个指针`setStyle`：

```
Style* myStyle = new Style(); 
```

然后将您的`myStyle`对象传递给`setStyle`函数：

```
baseStyleObj.setStyle(myStyle); 
```

或者 if`baseStyleObj`也是一个指针：

```
baseStyleObj->setStyle(myStyle); 
```

* * *

将变量命名为与其类相同的名称也是不好的做法；你的班级成员`Style*`应该被命名为`style`. `m_style`是您可以使用的一种约定（`m_`表示它是成员变量），但还有许多其他约定。当然，这不会影响代码的编译；这只是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T23:32:27.007

传递对对象的引用并存储指向对象的指针并没有错：

```
class BaseStyle {
    private:
        Style *style;
    public:
        BaseStyle(Style& theStyle)              :style(&theStyle) {}
        const Style& getStyle() const           {return *style;}
        void setStyle(/*const*/ Style& theStyle){style = &style);}

                 //   ^^^^^^^^^ Your problems are caused becasue you passeded
                 //             a const reference but are storing the value in a non const
                 //             pointer. Just remove this const and it will compile.
}; 
```

您的类的用户只需要知道该对象保留对传递对象的内部引用（不是 C++ 引用），因此它的生命周期必须与对象一样长。这是暗示的，因为您有一个通过引用获取值的 set 方法。

如果您对直接使用指针感到不舒服，可以使用 boost::ref 对象。

```
class BaseStyle {
    private:
        boost::reference_wrapper<Style> style;
    public:
        BaseStyle(Style& theStyle)              :style(theStyle) {}
        const Style& getStyle() const           {return style;}
        void setStyle(/*const*/ Style& theStyle){style = boost::ref(style));}
}; 
```

这基本上是一个可以重新安装的参考。请注意，它在内部使用指针，但在外部它的行为类似于引用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-19T19:19:41.987

您可以通过执行将引用存储在指针中

```
style = &theStyle; 
```

然而，这是不好的做法。如果要将其存储在指针中，则应显式接收指针（并记录所有权语义）。

此外， setStyle 目前正在接受一个 const ref。如果要将其存储在非 const 指针中，则需要将其更改为常规引用。

# android - 如何从android中的arraylist中检测检查的字符串？

> ID：12029235
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:16:16.107
> 
> 标签：android, arraylist, android-arrayadapter

这是我的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
  <EditText
 android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:id="@+id/TaskName"
/>
<Button
android:id="@+id/addBtn"
android:text="Add New Item"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:onClick="addItems"/>
<Button
android:id="@+id/deleteBtn"
android:text="Delete completed tasks"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:onClick="deleteItems"
/>
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawSelectorOnTop="false"
/> 
```

这是我的java代码

```
package com.srk.android.rough1;
import java.util.ArrayList;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.app.ListActivity;

public class Rough1Activity extends ListActivity {
    private ArrayList<String> listItems = new ArrayList<String>();
    private ArrayAdapter<String> adapter;
    private EditText taskNameEditText;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, listItems);
        setListAdapter(adapter);
        ListView listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        taskNameEditText = (EditText) findViewById(R.id.TaskName);
    }
    public void addItems(View v) {   
        adapter.add(taskNameEditText.getText().toString());   
    }
    public void deleteItems(View v) {
    }
} 
```

数组列表由带有复选框的字符串组成。这些项目是使用“添加新项目”按钮添加的。现在我的“删除项目”方法的代码应该是什么，或者有没有更好的方法来删除这些项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:29:10.037

您可以使用“删除”按钮，通过getCheckedItemPositions( [)](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29)和[clearChoices()](http://developer.android.com/reference/android/widget/AbsListView.html#clearChoices%28%29)删除选中的行：

```
public void deleteItems(View v) {
    ListView listView = getListView();
    // Get checked row numbers
    SparseBooleanArray checked = listView.getCheckedItemPositions();
    // Remove row from highest to lowest index
    for(int index = checked.size() - 1; index > -1; index--)
        adapter.remove(adapter.getItem(checked.keyAt(index)));

    // Remove checkmarks
    listView.clearChoices();
} 
```

# unicode - 检查字符串是否包含“pålogget” - unicode 错误

> ID：12029236
> 
> 赞同：0
> 
> 时间：2012-08-19T19:16:22.650
> 
> 标签：unicode, python-2.7, beautifulsoup

我正在挪威网站上使用 BeautifulSoup 进行屏幕抓取。我需要检查一个字符串是否包含单词*“Pålogget”*（意思是登录）。

```
if "Pålogget" in status: 
```

我收到以下错误

> 文件“scrape.py”，第 23 行 SyntaxError：第 23 行的文件 scrape.py 中的非 ASCII 字符“\xc3”，但未声明编码；有关详细信息，请参见[http://www.python.org/peps/pep-0263.html](http://www.python.org/peps/pep-0263.html)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T19:30:28.190

添加

```
# -*- coding: utf-8 -*- 
```

到文件的开头。

# css - HTML 背景重复

> ID：12029237
> 
> 赞同：0
> 
> 时间：2012-08-19T19:16:29.103
> 
> 标签：css, image, html

我有这个问题，我在 Photoshop 中制作了一个非常漂亮的背景，当我在 HTML 中设置为背景时，`<body background = "images/bg1.png">`它到处重复，看起来真的很迟钝。有谁知道如何阻止它这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:21:14.677

首先，你不应该把你的背景放在`<body>`标签上。自 XHTML 1.0 以来，这已被弃用。

因此，为了帮助您，请使用 CSS 并输入以下代码：

```
body {
    background: url('images/bg1.png') no-repeat center center fixed; // or scroll
} 
```

这会将您的背景放置在页面的中心并修复它或让它滚动，具体取决于您的代码和目的。

此外，如果需要，您可以`background-size: 100%;`使用图像填充文档。它将被缩放，因此您将失去质量。我建议使用高分辨率图像作为背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:18:21.153

CSS：

```
background-repeat:no-repeat; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T19:18:30.507

使用*无重复* [CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/background)：

```
<body style="background: url('images/bg1.png') no-repeat"> 
```

# mysql - 尝试使用 rails 对遗留数据库进行建模，收到表不存在错误

> ID：12029238
> 
> 赞同：1
> 
> 时间：2012-08-19T19:16:30.137
> 
> 标签：mysql, ruby, legacy

我正在尝试使用 rails 对遗留数据库进行建模。我已经成功地建模了几个表而没有问题，但是，我有一个我无法建模。这是一个有效的方法：

```
mysql> describe symbols;
+---------------------+---------------+------+-----+---------+-------+
| Field               | Type          | Null | Key | Default | Extra |
+---------------------+---------------+------+-----+---------+-------+
| symbol              | varchar(40)   | NO   | PRI |         |       |
| company_name        | varchar(40)   | YES  |     | NULL    |       |
| company_description | varchar(2048) | YES  |     | NULL    |       |
| exchange            | varchar(40)   | NO   | PRI |         |       |
+---------------------+---------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

这是模型代码：

```
class Symbols < ActiveRecord::Base
end 
```

这是 Rails 控制台输出：

```
>> Symbols
=> Symbols(symbol: string, company_name: string, company_description: string, exchange:      string)
>> Symbols.count
=> 5980 
```

现在这是不起作用的表：

```
mysql> describe cgp;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| symbol | varchar(40) | NO   | PRI |         |       |
| val    | float       | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec) 
```

这是模型代码：

```
class Cgps < ActiveRecord::Base
  set_table_name "cgp"
  set_primary_key "symbol"
end 
```

这是 Rails 控制台输出：

```
=> Cgps(Table doesn't exist)
>> Cgps.count
ActiveRecord::StatementInvalid: Mysql::Error: Table 'smdata.cgp' doesn't exist: SHOW FIELDS FROM `cgp` 
```

我难住了。我也尝试过尝试将类称为“Cgp”而不是“Cgps”的变体。我已经多次破坏和重建模型，但均未成功。我还有其他工作得很好的桌子。这个表不行。这么简单的表，会出现什么问题？我成功地覆盖了复数形式并处理了没有“id”列的事实。欢迎任何想法！

# python - 使用 GQL 获取属性列表中的键

> ID：12029247
> 
> 赞同：0
> 
> 时间：2012-08-19T19:17:50.193
> 
> 标签：python, google-app-engine, gqlquery

我正在使用 Google App Engine 开发 Python 应用程序。我想从实体中检索属性列表以及密钥。我正在使用下面的代码

```
recs = db.GqlQuery('select __key__,content from FileHistory') 
```

但我无法获得关键属性。有谁知道怎么做。我是否需要使用任何关键字来检索它。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:26:42.987

如果您打算使用[投影查询](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Projection)，那么您不需要传递对**key**的请求，它将隐式返回每个查询。

```
recs = db.GqlQuery('select content from FileHistory')
for rec in recs:
  print rec.key(), rec.content 
```

# css - 如何在 CSS 中使用多个图像背景和 :hover 伪制作翻转图像

> ID：12029253
> 
> 赞同：0
> 
> 时间：2012-08-19T19:18:30.027
> 
> 标签：css

我正在尝试在为网站创建的启动页面上制作一些滚动效果。我想使用 CSS3 拥有多个背景的能力和 :pseudo 类来实现这一点。

这是我的尝试；但是，他不会在 Dreamweaver 或 Chrome 中显示。

```
#1 {
width: 143px;
height: 142px;
background: url(../assets/Home/1a.jpg) top 0px no-repeat;
background: url(../assets/Home/1b.jpg) top -143px no-repeat;
display: inline-block;
}
#1:hover {
background: url(../assets/Home/1a.jpg) top -143px no-repeat;
background: url(../assets/Home/1b.jpg) top 0px no-repeat;
} 
```

关于如何改进这一点的任何想法或替代路线的建议以实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:22:46.633

您是否尝试过 css sprites 并用锚标记包装它，例如 a:hover#l{} (

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:03:29.163

我认为问题在于您的容器 id: HTML ID tags [can't start with a number](https://stackoverflow.com/a/79022/1001985)。我让你的方法基本上没有改变。

*HTML*

```
<div id="c1"></div>​ 
```

*CSS*

```
#c1 {
 border: thin solid black;
 width: 400px;
 height: 200px;
 background: url('http://lorempixel.com/400/200/sports/1/') top left no-repeat;
 background: url('http://lorempixel.com/400/200/sports/2/') top -400px;
 display: inline-block;
}
#c1:hover {
 background: url('http://lorempixel.com/400/200/sports/1/') top -400px no-repeat;
 background: url('http://lorempixel.com/400/200/sports/2/') top left no-repeat;
} 
```

​</p>

[http://jsfiddle.net/reCSP/](http://jsfiddle.net/reCSP/)

# objective-c - iPad UIBarButtonItem 不服从色调

> ID：12029255
> 
> 赞同：1
> 
> 时间：2012-08-19T19:18:50.480
> 
> 标签：objective-c, ios, ipad, interface-builder, uibarbuttonitem

所以这可能是一个非常愚蠢的问题，但我无法让普通的 UIBarButtonItem 染成白色。它是一个基本的 UIBarButtonItem，它在顶部工具栏项目中显示日期，我希望它显示为白色，但它看起来像灰色，从两张图片中可以看出它的外观和我拥有的 IB 设置。

我什至尝试以编程方式设置色调，但没有差异显示。它可能很简单，但我一生都无法弄清楚。非常感谢任何可能帮助我找到答案的人，我真的很感激。

![uibarbuttonitem 如何在应用中显示](../Images/e27873529745c163da22a032809f131e.png)

![UIBarButtonItem 的设置](../Images/f6390d6485ce91c0e55771673e2478bb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T02:04:13.920

我最终使用了 setTitleTextAttributes 选择器，因为就像我假设的那样……这是一个非常简单的解决方案

这是我对可能偶然发现此问题的任何人的解决方案

```
[_titleItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor], UITextAttributeTextColor, [UIColor darkGrayColor], UITextAttributeTextShadowColor, [NSValue valueWithUIOffset:UIOffsetMake(0, -1.0)], UITextAttributeTextShadowOffset, nil] forState:UIControlStateNormal]; 
```

# ios - 使用音频会话录制时如何减少录制噪音？

> ID：12029260
> 
> 赞同：14
> 
> 时间：2012-08-19T19:19:36.490
> 
> 标签：ios, audio, core-audio, avaudiorecorder, avaudiosession

我得到了一些录音代码，但录制的音频（来自 iPod touch 内置麦克风）*非常*嘈杂。

这是我的配置：

```
 AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:&err];
    if (err) {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if (err) {
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue:[NSNumber kAudioFormatLinearPCM] forKey:AVFormatIDKey];

    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];

    // We can use 2 (if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey];

    // These settings are used if we are using kAudioFormatLinearPCM format
    [recordSetting setValue:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey]; 
```

我这里的配置是否错误，或者是否有其他方法可以减少录制音频中的噪音？据我所知，有一些录音机应用程序没有噪音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T23:20:23.657

为此，您必须进行一些数字信号处理。当没有任何东西进入麦克风时，您必须创建您听到的噪音的特征。换句话说，您必须指定正在记录或拾取的白噪声。您可以使用数字声音处理 (DSP) 进行所有这些表征。然后你可以录制你的音频并减去你之前描述的白噪声。

# excel - 基于列创建多行

> ID：12029265
> 
> 赞同：1
> 
> 时间：2012-08-19T19:20:08.890
> 
> 标签：excel

我需要帮助。

我有一个带有近似以下列结构的 Excel 文件：

*   组织
*   节目名称
*   2012（年）
*   2013（年）
*   2014（年）

在这个初始构造中，每一行都是它自己的程序名称（即，每个程序只有一行）。每个预算年度都有自己的列，用于输入给定年度的预算数据。

我需要用单个 YEAR 列替换单个年份列：

*   组织
*   节目名称
*   年

在此设置中，每个计划预算将有单独的行 - 因此每个计划每年都会有多个行。

我在原始结构中有 3,000 行，我需要切换到新格式以提供我的数据可视化工具 - 否则它不会将每一列识别为单个维度（年份）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T22:26:13.383

如果我理解这一点，你有：

![在此处输入图像描述](../Images/f0a0b5c4cafe8683b9505528e1ad7f51.png)

你想要

![在此处输入图像描述](../Images/57aa9de0fcc6c54df007bf1d5eb23bd9.png)

这是非常粗糙但经过测试的 VBA 代码，可以帮助您入门。我不确定您是否有使用 VBA 的经验。

```
 Sub xxx()

    Sheets("Sheet1").Select

    Dim x As Integer
    x = 2

    For a = 2 To 3000

        Sheets("Sheet1").Select
        org = Range("A" & a).Value
        prog = Range("B" & a).Value
        y1 = Range("C" & a).Value
        y2 = Range("D" & a).Value
        y3 = Range("E" & a).Value

        Sheets("Sheet2").Select

        Range("A" & x).Value = org
        Range("B" & x).Value = prog
        Range("C" & x).Value = y1
        Range("C" & x + 1).Value = y2
        Range("C" & x + 2).Value = y3

        x = x + 3

    Next a

End Sub 
```

如果您需要更多解释或更好的代码，请告诉我。

# python - Python中的零除法阻止程序运行

> ID：12029267
> 
> 赞同：1
> 
> 时间：2012-08-19T19:20:41.570
> 
> 标签：python, python-2.7, division, divide-by-zero

我仍在努力完成多项选择测验计划。我快到了。只有几个错误仍然可以解决。该程序会记录您正确、错误和当前百分比的问题数量。但是，我的程序不会运行，因为最初，用户没有回答任何问题。因此，他们有 NULL % 正确。我的代码如下：

```
import random
import sys
import os
import math

right_answer_total = float(0)
wrong_answer_total = float(0)
answer_total = float(right_answer_total + wrong_answer_total)
percentage = 100 * (float(right_answer_total) / float(answer_total))

word_drills = {'class': 'Tell Python to make a new kind of thing.',
               'object': 'Two meanings: the most basic kind of thing, and any instance of some thing.',
               'instance': 'What you get when you tell Python to create a class.',
               'def': 'How you define a function inside a class.',
               'self': 'Inside the functions in a class, self is a variable for the instance/object being accessed.',
               'inheritance': 'The concept that one class can inherit traits from another class, much like you and your parents.',
               'composition': 'The concept that a class can be composed of other classes as parts, much like how a car has wheels.',
               'attribute': 'A property classes have that are from composition and are usually variables.',
               'is-a': 'A phrase to say that something inherits from another, as in a Salmon *** Fish',
               'has-a': 'A phrase to say that something is composed of other things or has a trait, as in a Salmon *** mouth.'}

def start():
    # For loop that creates a list named keys. It grabs 3 random keys from the dictionary word_drills
    keys = [x for x in random.sample(word_drills, 3)]
    # User is presented with a question. A value from the previous randomly selected keys is selected as the 'question'
    correctanswer = word_drills[random.choice(keys)]
    print "Question: ", correctanswer 
    # Set the variables key1, key2, & key3 to the 3 keys in the list 'keys'
    key1, key2, key3 = keys[0], keys[1], keys[2]
    # User is presented with 3 choices.
    print "\n\n(a)%s   (b)%s   (c)%s" % (key1, key2, key3)
    a, b, c = word_drills[key1], word_drills[key2], word_drills[key3]
    selection = raw_input("> ")
    print selection
    if selection == "a":
        if a == correctanswer:
            print "That's correct!"
            answered_correctly()
        else:
            print "I'm sorry, that is incorrect..."
            not_answered_correctly()
    elif selection == "b":
        if b == correctanswer:
            print "That's correct!"
            answered_correctly()
        else:
            print "I'm sorry, that is incorrect..."
            not_answered_correctly()
    elif selection == "c":
        if c == correctanswer:
            print "That's correct!"
            answered_correctly()
        else:
            print "I'm sorry, that is incorrect..."
            not_answered_correctly()
    else:
        print "That is not a valid selection."
        exit(0)

def answered_correctly():
    global right_answer_total
    right_answer_total += 1
    stat_tracking()

def not_answered_correctly():
    global wrong_answer_total
    wrong_answer_total += 1
    stat_tracking()

def stat_tracking():
    os.system('cls' if os.name=='nt' else 'clear') 
    print "-" * 37
    print "|         Stat Tracking             |"
    print "-" * 37
    print "| Correct | Incorrect |  Percentage  |"
    print "-" * 37
    print "|    %d    |     %d     |     %d %%     |" % (right_answer_total, wrong_answer_total, percentage) 
    print "-" * 37
    print "\n\n\n"
    start()

stat_tracking() 
```

我不确定是否有解决方法，或者我是否可能做错了。任何和所有的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:24:30.703

当没有问题得到回答时，打印出来的内容没有任何意义。为除数 0 添加一个特殊检查并打印出 100%，或者只打印出 N/A 或其他内容。

此外，这里有一些关于您的代码的提示。

```
right_answer_total = float(0)
wrong_answer_total = float(0)
answer_total = float(right_answer_total + wrong_answer_total)
percentage = 100 * (float(right_answer_total) / float(answer_total)) 
```

如果你把`from __future__ import division`代码放在开头，那么所有这些`float`s 都是不必要的。

```
print "|    %d    |     %d     |     %d %%     |" % (right_answer_total, wrong_answer_total, percentage) 
```

不推荐使用字符串插值运算符。`str.format`如果不需要 Python 2.5 兼容性，请改用。

```
print "|    {}    |     {}     |     {} %     |".format(right_answer_total, wrong_answer_total, percentage) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T19:26:22.793

由于在启动时用户尚未回答任何问题，您可以将其初始设置为`0`.

如果以后出现问题，您可以像这样事先检查零除法

```
if answer_total != 0:
    percentage = 100 * (float(right_answer_total) / float(answer_total))
else:
    percentage = 0.0 
```

您也可以考虑使用浮点文字（如`0.0`）来初始化变量，而不是使用`float`函数来转换整数。

在您修复了您可能发现的错误之后，最好使用您的代码访问[http://codereview.stackexchange.com](http://codereview.stackexchange.com)以获得一些一般性的编码建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:31:07.507

将第 9 行更改为：

```
percentage = 100 * (float(right_answer_total) / float(answer_total)) if (right_answer_total>0 and answer_total >0) else 0 
```

# lwuit - 如何将自定义虚拟键盘 代码设置为资源编辑器生成的状态机代码（LWUIT 或 Codenameone）

> ID：12029268
> 
> 赞同：0
> 
> 时间：2012-08-19T19:20:45.257
> 
> 标签：lwuit, codenameone, lwuit-vkb

在我决定提出这个问题之前，我已经在这里搜索了答案，但没有找到。对不起我的英语不好，但这不是我的母语。

这是我的问题：

我已经将一个从资源编辑器生成的 LWUIT 1.5 应用程序放入 Netbeans，我想用我自己的按钮自定义 VirtualKeyboard，然后将它们绑定到 TextField，但我不知道在哪里放置代码。我已经尝试将它放入我的表单“MyForm”的 BeforeShow 中，或者像这样在 PostShow 中：

```
protected void beforeMyForm(Form f) {
   // If the resource file changes the names of components this call will break notifying you that you should fix the code
super.beforeMyForm(f);

VirtualKeyboard vkb = new VirtualKeyboard();

//I declared the new input
String[][] CALC_NUM = new String[][]{
        {"1", "3", "5",},
        {"7", "9", "0",},
        {".","$OK$"}
};
//Added the new input mode
vkb.addInputMode("137_C", CALC_NUM);
vkb.setInputModeOrder(new String[]{"137_C"});

//Bind the vkb to my TextField
VirtualKeyboard.bindVirtualKeyboard(findTfCalc(Display.getInstance().getCurrent()), vkb);

} 
```

在 beforeShow 中有一个 NullPointerException 并且在 postShow 中没有任何反应。

在 TextField 的属性中，约束是数字的。我知道数字和密码约束存在错误，但我尝试将 ANY 约束赋予 TextField，但它不起作用。

有人可以帮我一把吗？在 Codenameone 中也是一样的吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:04:16.907

您在之前的 show 方法中使用`Display.getInstance().getCurrent()`而不是使用`f`, 新表单还不是当前表单。

[http://codenameone.blogspot.com/2010/06/pimp-virtualkeyboard-by-chen-fishbein.html](http://codenameone.blogspot.com/2010/06/pimp-virtualkeyboard-by-chen-fishbein.html)

# oracle - Oracle数据库连接超时设置

> ID：12029271
> 
> 赞同：6
> 
> 时间：2012-08-19T19:21:01.813
> 
> 标签：oracle, oracle10g, database-administration

在不活动的一段时间内，与 Oracle 数据库的连接被断开，这会导致错误 -> `end-of-file on communication channel`。

1.  客户端机器上是否有任何 Oracle 设置（sqlnet.ora 或某种环境变量）可以指定连接超时并且因客户端而异？或者它可能是某些“心跳”功能的客户端设置（客户端以某个间隔发送数据包），从而防止连接被防火墙丢弃？

2.  我在哪里可以找到服务器机器上因不活动而导致连接超时的设置？是否可以在不获取对 oracle 主机的物理访问权限的情况下从 SQL 开发人员那里看到此设置？

3.  Oracle SQL Developer 由于不活动而与 Oracle 服务器断开连接是正常行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T19:37:06.877

没有客户端设置会导致连接断开一段时间后导致 ORA-03113 错误。并且数据库服务器上没有设置会导致连接超时，从而导致 ORA-03113 错误。

服务器可以通过在服务器的 sqlnet.ora 中设置[sqlnet.expire_time 设置](http://docs.oracle.com/cd/E11882_01/network.112/e10835/sqlnet.htm#NETRF209)来启用死连接检测 (DCD) 。这将导致服务器定期发送探测数据包以验证客户端是否仍在运行。

Oracle 永远不会因为 ORA-03113 错误而因不活动而断开连接。可以将 Oracle 配置为丢弃空闲连接，但这会产生不同的错误。如果您收到 ORA-03113 错误，则可能是防火墙导致连接断开，或者客户端计算机和服务器之间的网络中存在其他问题。

# android - 在微调器切换文本视图中选择一个项目，显示数据库中的相关数据

> ID：12029274
> 
> 赞同：1
> 
> 时间：2012-08-19T19:21:14.077
> 
> 标签：android, sqlite, textview, spinner

我的标题可能不太好，我会在这里更详细地解释它。目前我有一个从数据库填充的微调器。我现在想做的是，当我在微调器中选择一个项目时，我将有一个文本视图来显示同一数据库同一行中的数据，只是不同的列。比如我的数据库目前有主键_id、title和description。下拉列表将显示标题。选择标题后，TextView 将从数据库中获取描述并显示它。我对 android 开发还是很陌生，不知道如何实现这一点。任何帮助，将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T13:54:22.980

1.  将微调器内条目的行 ID 设置为 SpinnerAdapter 中查询的 _id（如果您使用 SimpleCursorAdapter，这应该会自动发生）
2.  使用 `onItemSelected (Spinner parent, View view, int position, long id)`id 查询数据库并相应地填充 TextView。

# python - 将 Django 表单类作为函数参数传递

> ID：12029277
> 
> 赞同：0
> 
> 时间：2012-08-19T19:21:45.623
> 
> 标签：python, django, django-forms

我想通过将“ModelForm”类（不是实例）作为参数传递来重用下面的“编辑”视图。简化代码如下：

```
def edit(request, id, form_class):

    person = get_object_or_404(Person, pk=id) 

    if not request.method == 'POST':
        form = form_class(instance=person)

    else:
        form = form_class(request.POST, instance=person)

        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse(show_person), args=(id,))

    return render_to_response('edit_person.html', {'form' : form, context_instance=RequestContext(request))

def edit_person_name(request, id):
    return edit(request, id, PersonForm_NameOnly)

def edit_person_birthday(request, id):
    return edit(request, id, PersonForm_BirthdayOnly) 
```

`PersonForm_NameOnly`和 'PersonForm_BirthdayOnly' 是继承自`ModelForm`.

不幸的是，上面没有验证，但给出了一个错误，即缺少一些必需的表单字段。但是，如果`form_class`我不使用变量，而是直接使用类名（`PersonForm_NameOnly`或`PersonForm_BirthdayOnly`），一切正常。

有谁知道我做错了什么？

编辑：我得到的错误是表单验证错误：“此字段是必需的。”

这是因为我的“Person”模型中有一个字段是必需的，由于某种原因，当我这样做时它没有设置：“form = form_class(request.POST, instance=person)”

当我在模板中显示表单时，这会导致 form.is_valid() 失败并出现上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:38:07.887

你的`edit_person.html`模板里有什么？POST 目标 URL 是否被硬编码，并设置为错误的视图？

例如，您的`PersonForm_NameOnly`表单是否`edit_person_birthday`被错误地提交，或者您的`PersonForm_BirthdayOnly`表单被错误地提交`edit_person_name`？

# php - 如何将许多（超过 100 个）变量传递给 PHP

> ID：12029281
> 
> 赞同：3
> 
> 时间：2012-08-19T19:22:09.730
> 
> 标签：php, jquery, variables

我知道将变量导入 PHP 的传统 $_POST 方法。但是，如果变量数量如此之多，这仍然是传递变量的最有效解决方案吗？

目前在我的代码中，用户将信息输入到 100 多个输入文本中，然后使用 $_POST 方法将此信息传递给 PHP。但是，我认为这对于许多服务器来说不会太好。

本质上，如果有人能告诉我将大量变量传递给服务器的理想方式，那就太好了。提前致谢。

编辑：

对于所有说这将只是一场 UI 灾难的人来说，这已经被多次咨询过。然而，提交页面本质上是网站的核心，用户不会被大量输入劝阻是有原因的——事实上，默认数字是 20，但列表可以扩展到 100 个输入，即为用户实现的选项。

感谢您的所有建设性答复，他们非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:59:31.990

这种负载当然是可以管理的，具体取决于您希望每个字段包含多少数据，或者更确切地说，取决于您确定每个字段可以包含的最大数据量。在 PHP 中，HTTP POST 请求正文的最大大小（即包含表单编码值的部分）由[ini 值`post_max_size`](https://stackoverflow.com/questions/2364840/what-is-the-size-limit-of-a-post-request)确定。它的默认值为 2MB，但您可以在您的`php.ini`:

```
post_max_size = 10M # megabytes 
```

或在您的`.htaccess`：

```
php_value post_max_size 10M 
```

设置时要小心，因为它不应超过系统上可用的 RAM 量。还要考虑您可能有多个用户请求此页面，如果他们每个人都为他们的请求分配了过多的 RAM，他们可能会挂起或崩溃您的服务器。

但是，请考虑这里的数学。即使您有 100 个字段，每个字段包含 20 个字节，也只有 2000 个字节，大约 2 KB。即使 1 Mbps 的上传速度非常慢，您的用户也可以每秒上传 128 KB。在这个速度下，100 个字段中的每一个都必须包含 1311 字节的数据，上传过程需要 1 秒。

在 Apache 上，[默认超时为 300 秒](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)，因此您的表单字段必须包含总计 37.5 MB 的大小，Apache 才会超时。您的主机（或您的服务器管理员）可能会稍微更改此设置，并且可能设置为更合理的值，例如 30 秒。但仍处于此限制，您将需要 3.75 MB 的数据，这可能比 100 个字段可以包含的数据多得多。

您也不应该担心客户端，因为[即使是最吝啬的浏览器 (IE) 也将 POST 上传限制为 2 GB](http://web.archive.org/web/20080512144812/http://www.motobit.com/help/scptutl/pa98.htm)。

基本上，我的观点是，即使连接速度很慢，HTTP 和您的服务器也能够处理这么多字段。我不确定 PHP 解析所有这些需要多长时间（您必须在服务器上对其进行基准测试），但我想影响可以忽略不计。

从用户的角度来看，我会说 100 个字段将是一个非常令人生畏的景象。如果可能的话，最好将您的表单分成更友好和更小的步骤，引导用户完成填写表单的过程。如果您不想将表单拆分为多个步骤，请至少考虑[使用 javascript 保存表单的状态](http://html5demos.com/storage)。请注意，在[W3C 中推荐 5MB 的存储空间`localStorage`](https://stackoverflow.com/questions/2747285/html5-localstorage-restrictions-and-limits)，因此这应该有足够的空间来存储您的所有字段。还要看看[这个使用 cookie 的后备](https://stackoverflow.com/questions/11478311/php-javascript-remembering-state-of-form-form-fields-with-cookies)，但要厌倦。Cookie 的限制比`localStorage`. 我读过[cookie 每个限制为 4KB，每个域 20 个 cookie](http://myownplayground.atspace.com/cookietest.html). 您可能希望将存储的表单字段分配到多个 cookie 中，例如 10 个 cookie 中的 10 个表单字段。您可以使用以下方法在 cookie 中存储多个输入值[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
var inputs = document.forms[0].getElementsByTagName('input')
    i      = 0,
    date   = new Date(),
    expires;

// Expires date (1 day in future)
date.setTime(date.getTime()+(24*60*60*1000));
expires = date.toGMTString();

for(var cookieNumber = 0; cookieNumber < 10; cookieNumber++) {
    var cookie = [];
    for(; i < (cookienumber * 10 + 10); i++) {
        cookie.append(encodeURIComponent(inputs[i].name) + '=' + encodeURIComponent(inputs[i].value));
    }

    document.cookie = 'savedForm' + cookieNumber + '=' + cookie.join('&') + '; expires =' + expires;
} 
```

为确保在用户键入时保存所有内容，您可能需要更新存储的数据`onchange`，或者，如果您想要最多保存第二次，`onkeyup`.

另外，为了方便用户，当提交表单时，所有保存的 cookie 和`localStorage`表单字段数据都应该被清除，这样当他们再次访问表单时，所有字段都将为空并读取新数据输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:26:04.213

将其分解为多个请求，通过多个步骤划分的表单不是更好吗？

从用户体验的角度来看，向用户显示 100 个字段听起来真的很糟糕。把它分成多个步骤怎么样？对用户来说不那么不堪重负，从服务器端的角度来看，您也可能更容易管理。

假设用户不小心关闭了窗口，失去了她的 Internet 连接或发生了其他一些问题，导致数据无法发送到服务器。如果在完成 100 个输入字段后发生这种情况，我可能会离开页面并且永远不会回来。

从性能的角度来看，我认为这不会有太大的不同，但我真的建议采取另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:59:19.063

毫无疑问，您已经控制了 UX 问题，或者您会在[User Experience](https://ux.stackexchange.com/)中提出这个问题。

从性能的角度来看，让我们考虑一些传递这些数据的策略。

**1\. HTTP POST （作为***application/x-www-form-urlencoded*传递的变量）

您提交的总大小很容易预测，但取决于表单中的内容。如果您只使用选择和复选框，或者使用整数或布尔值的隐藏变量，那么 100 个元素可能会变成 2KB 的数据。传递 2KB 的数据需要多长时间？不久。显然，文本字段会改变事物（也以您而非我们可以预测的方式），但可能不会显着。编码字符串*`var=Pack+my+box+with+five+dozen+liquor+jugs`*为 44 个字符。其中 100 个仍然会生成少于 5KB 的数据来上传。即使在模拟调制解调器速度（例如，28.8Kbps 或 2.8KB/s）下，也只需几秒钟。文件附件使我们进入下一个策略。

**2\. HTTP POST （作为***multipart/form-data*传递的变量）

如果您正在上传文件，您将使用它，并且可能不会用于其他用途。如果您打算使用表单上传 100 个 4MB JPEG 图像，那么我建议您通过实现基于 JavaScript 的后台上传器来简化事情。让用户在搜索他们的下一个文件时进行上传。除此之外，这种格式的总开销远远大于*x-www-form-urlencoded*，但与附加文件的大小相比，开销仍然可以忽略不计。

**3\. HTTP GET**（作为 HTTP 请求的一部分传递的变量）

这基本上是一个标记在 URL 末尾的*x-www-form-urlencoded字符串。*见#1。

您应该考虑的另一个主要因素是*处理*此表格的速度。上传时间可能很小，但如果每个表单元素需要 3 秒的数据库访问和处理，那么 100 个项目会导致表单提交后等待 5 分钟。在不知道您的表单内容是什么或您真正想要在这里实现什么的情况下，除了说“考虑一下”之外，我无法就此事提供建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T19:30:00.730

使用 POST 请求传递数据的标准方法，您可以将它们作为 $_POST 数组的一部分使用，这是非常好的。这种方法可以发送的数据量上限非常高。

如果你想要更灵活的东西，你可以先序列化数据，发送它，然后使用[http_get_request_body()](http://www.php.net/manual/en/function.http-get-request-body.php)检索这些数据。但你不应该需要那个。表格非常适合您描述的场景。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T19:30:22.487

100应该不是什么大问题。但是您可以使用 '[]' 对输入字段进行分组

因此：

```
Apple
<input type='checkbox' name='fruity[]' value='apple'>

Pear
<input type='checkbox' name='fruity[]' value='pear'>

Banana
<input type='checkbox' name='fruity[]' value='banana'> 
```

如果你检查香蕉和梨，然后提交。结果是

```
$_POST = array( 
  0 => fruity => array ( 
    0 => 'pear', 
    1 => 'banana'
   ) 
 ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-21T15:31:36.673

您可以使用通过 ajax 请求发布的 xml 变量，例如 MVC 概念。首先你设置了一个 xml 变量。其次，您将此 xml 变量作为文本发布。通过 ajax 请求查看 PHP 帖子，模型 php 将接收 xml 文本数据并使用 xml 查询将其分解以获得相同数量的变量。

# python - “ez_setup.py”语法错误

> ID：12029284
> 
> 赞同：5
> 
> 时间：2012-08-19T19:22:22.270
> 
> 标签：python, easy-install

我正在尝试通过从命令行（64 位 Windows 机器）运行 ez_setup.py 并在以下行中获取“无效语法”来安装 easy_install：

```
except pkg_resources.VersionConflict, e: 
```

Python 版本 3.2.3

任何建议如何解决这个问题？谢谢

**更新：** 对不起，我对 Python 完全陌生，现在它在这条线上失败了：

> print "Setuptools version",version,"或更高版本已安装。"

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T19:25:44.900

将逗号更改为“as”

```
except pkg_resources.VersionConflict as e: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T01:26:50.573

我试图让 python 3.3 在我的 x64 Windows 8 机器上运行，并在找到以下方法来加载所有内容之前经历了几个圈子：

*   转到[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

*   从二进制安装分发 -*忽略*安装程序前面的弃用警告。那些非官方的二进制文件甚至没有“setuptools”下载，而且这些项目似乎多年来都没有更新。

*   从二进制安装 pip。在最初的几次尝试中，它对我不起作用，关于 pkg_resources，所以我认为分发可能有所帮助。

现在我运行了 pip，我可以用它来安装东西。

# mod-wsgi - pinax0.9a2 不适用于 wsgi 和 apache

> ID：12029289
> 
> 赞同：0
> 
> 时间：2012-08-19T19:23:21.953
> 
> 标签：mod-wsgi, pinax

我正在尝试使用 Apache 2.22 和 WSGI 3.3 部署 pinax0.9a2。我正在使用 pinax 提供的 wsgi.py。但我在 apache 错误日志中收到 500 错误和以下错误：

```
[Sun Aug 19 03:31:55.895469 2012] [core:error] [pid 9045:tid 140546171721472] [client 107.192.29.14:62182] End of script output before headers: wsgi.py

[Sun Aug 19 03:31:56.424077 2012] [core:notice] [pid 7789:tid 140546404792064] AH00052: child pid 9225 exit signal Aborted (6)

[Sun Aug 19 03:31:56.742536 2012] [core:error] [pid 9044:tid 140546196899584] [client 107.192.29.14:62183] Invalid status line from script 'wsgi.py': Status
ng.co: Objects/stringobject.c:115: PyString_FromString: Assertion `str != ((void *)0)' failed.

[Sun Aug 19 03:31:56.966168 2012] [core:error] [pid 9044:tid 140546196899584] [client 107.192.29.14:62183] End of script output before headers: wsgi.py

[Sun Aug 19 03:31:57.426321 2012] [core:notice] [pid 7789:tid 140546404792064] AH00052: child pid 9243 exit signal Aborted (6) 
```

Apache httpd.conf：

```
<VirtualHost *:80>

    DocumentRoot /usr/local/apache2/mysite

    WSGIDaemonProcess mysite.com python-path=/usr/local/apache2/mysite-env/lib/python2.6/site-packages processes=2 threads=15 display-name=%{GROUP}
    WSGIProcessGroup mysite.com

    WSGIScriptAlias / /usr/local/apache2/mysite/wsgi.py

    <Directory "/usr/local/apache2/mysite">
    Require all granted
    </Directory>

</VirtualHost> 
```

wsgi.py：

```
from django.core.handlers.wsgi import WSGIHandler

import pinax.env

# setup the environment for Django and Pinax
pinax.env.setup_environ(__file__)

# set application for WSGI processing
application = WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:54:48.297

如果我不得不猜测，那是因为您的 sys.path 不包括 pinax。我的大多数 wsgi 脚本都是从设置系统路径开始的，以便在 mod_wsgi 中运行的 python 可以找到 pinax 和 django。

```
import sys
sys.path = [
"/home/username/Python/project/project/apps",
"/home/username/Python/project/project",
"/home/username/Python/project/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg",
"/home/username/Python/project/src/django-mailer",
"/home/username/Python/project/src/django-axes",
"/home/username/Python/project/src/django-notification",
"/home/username/Python/project/src/pinax",
"/home/username/Python/project/src/django-email-confirmation",
"/home/username/Python/project/src/idios",
"/home/username/Python/project/src/pil-withg4-dev/PIL",
"/home/username/Python/project/src/django-deployment",
"/home/username/Python/project/lib/python2.7",
"/home/username/Python/project/lib/python2.7/plat-linux2",
"/home/username/Python/project/lib/python2.7/lib-tk",
"/home/username/Python/project/lib/python2.7/lib-old",
"/home/username/Python/project/lib/python2.7/lib-dynload",
"/usr/lib/python2.7",
"/usr/lib/python2.7/plat-linux2",
"/usr/lib/python2.7/lib-tk",
"/home/username/Python/project/local/lib/python2.7/site-packages",
"/home/username/Python/project/local/lib/python2.7/site-packages/PIL",
"/home/username/Python/project/local/lib/python2.7/site-packages/newrelic-1.8.0.13",
"/home/username/Python/project/lib/python2.7/site-packages/PIL",
] 
```

将这些行放在 wsgi 文件的顶部。

# mysql - GROUP BY mysql中的两个字段

> ID：12029290
> 
> 赞同：4
> 
> 时间：2012-08-19T19:23:47.107
> 
> 标签：mysql, group-by

我在 mysql 中有一个表，它存储用户之间的消息。该表具有以下字段：

```
ID   from_memberID  to_memberID   message                 Date
+----+--------------+------------+-----------------------+-----------------------+
1         205          207         hello Peter           19/08/2012 20:00:00
2         207          205         Hi frank              19/08/2012 20:01:00
3         205          208         hello Jennifer        19/08/2012 20:10:00
4         207          210         hello Peter           19/08/2012 20:20:00 
```

好吧，假设我只想从用户 205 的每个对话中获取最后一条消息

它应该得到寄存器 2 和 3，用户（205-207）和用户（205-208）之间的对话。事实是我使用 GROUP BY from_memberID 然后在我的结果中也添加了寄存器 ID=1。

这是使用的语句：

```
SELECT *
FROM
(SELECT msg.ID,
    msg.mensaje,
    msg.from_miembroID,
    msg.fecha,
    msg.read,
    FROM mensajes as msg
    INNER JOIN miembros as mem ON mem.ID=IF(msg.from_miembroID=205, msg.to_miembroID, msg.from_miembroID)
WHERE msg.to_miembroID=205 OR msg.from_miembroID=205
ORDER BY msg.fecha DESC) as temp
GROUP BY from_miembroID 
```

我如何使用 GROUP BY 将两列（from_memberID、to_memberID）视为一列？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T19:38:21.950

您可以使用新的自定义字段，按照自定义规则对 id ( `from_memberID`, `to_memberID`) 进行排序，例如，较小的总是在前。

例如：

```
SELECT 
     IF(from_memberID < to_memberID, 
         CONCAT(from_memberID, '-', to_memberID),
         CONCAT(to_memberID, '-', from_memberID)
     ) as conversation_ids
FROM `messages` 
```

该字段将返回唯一的组合，例如 205-207，无论 205 向 207 发送消息还是 207 向 207 发送消息。

最后，您可以按此值分组并获得独特的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:33:23.157

为什么不简单地加入 ID 上的成员和消息表，只保留 from_miembroID = 205 和 to_miembroID = 205 的表，然后合并结果：

```
SELECT * FROM(
SELECT msg.ID,
       msg.mensaje,
       msg.from_miembroID as user,
       msg.fecha,
       msg.read,
FROM mensajes as msg INNER JOIN miembros as mem ON mem.ID=msg.from_miembroID
WHERE msg.from_miembroID=205
UNION
SELECT msg.ID,
       msg.mensaje,
       msg.from_miembroID,
       msg.fecha,
       msg.read,
FROM mensajes as msg INNER JOIN miembros as mem ON mem.ID=msg.to_miembroID
WHERE msg.to_miembroID=205
)
ORDER BY msg.date
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:54:32.913

好的，希望我理解正确，你想要什么。我会首先选择来自或发往当前用户（ID = 205）的每条消息，如下所示：

```
SELECT * FROM mensajes
WHERE (from_memberID=205 OR to_memberID=205) 
```

现在我们想将对话分组在一起，这意味着用户的 ID 没有 ID=205。我们可以通过使用 IF 语句来实现这一点。IF 以这种方式工作：**IF(condition,value-if-true,value-if-false)**。所以我们创建了一个虚拟列**otherID**，其中包含对话伙伴 userid: `IF(from_memberID=205,to_memberID,from_memberID) AS otherID`。然后 SQL 看起来像这样：

```
SELECT 
  ID,
  IF(from_memberID=205,to_memberID,from_memberID) AS otherID,
  message,
  Date
FROM mensajes
WHERE (from_memberID=205 OR to_memberID=205) 
```

现在我们只需要添加一个`GROUP BY otherID`和一个`ORDER BY Date`（最后一个帖子保存在一个组中）：

```
SELECT 
  ID,
  IF(from_memberID=205,to_memberID,from_memberID) AS otherID,
  message,
  Date
FROM mensajes
WHERE (from_memberID=205 OR to_memberID=205)
GROUP BY otherID
ORDER BY Date 
```

`miembros`现在我们可以使用上面的 SQL 作为子选择将它与表连接起来：

```
SELECT * FROM
    (SELECT 
      ID,
      IF(from_memberID=205,to_memberID,from_memberID) AS otherID,
      message,
      Date
    FROM mensajes
    WHERE (from_memberID=205 OR to_memberID=205)
    GROUP BY otherID
    ORDER BY Date) AS last
INNER JOIN miembros as mem ON mem.ID=lastotherID; 
```

# c# - 我可以使用 Try catch 来检查文件是否存在 image("C:\\filename")

> ID：12029292
> 
> 赞同：1
> 
> 时间：2012-08-19T19:24:12.327
> 
> 标签：c#, bitmap, try-catch

```
try 
{ 
 if (!File.Exists("File.Ext")) 
    throw new FileNotFoundException(); 

} 
catch(FileNotFoundException e) 
{ 
   // your message here. 
} 
```

在写这篇文章时，我发现了上面的代码，认为必须有一种方法在一个块中完成它我试图检查读取 bmp 的错误

```
Bitmap b2;
b2 = new Bitmap("g:\\btmp1.bmp"); 
```

因此，如果将文件分配给“b2”时出现问题，则会出现错误

```
string notExst = "";
Bitmap b2;
try
{
    b2 = new Bitmap("g:\\ba.bmp");
}
catch (FileNotFoundException e)
{
    throw e.Tostring(); \\ would it be ok to 
 \\ msgbox.show(e.Tostring()) insted of throw ?

} 
```

我想我在 Try Catch 中犯了语法错误，正确的方法是什么？谢谢。

在编辑乔伊之后，我不明白你的回答我想被告知并相应地打破方法而不是粉碎

最后

```
public bool TryGetBitMap(string FilePath)
{
    string NotExstMsg = "The file: " + FilePath + "Could Not Be Found!";
    bool exst = false;
    if (!File.Exists(FilePath))
         MessageBox.Show(NotExstMsg);
    else exst = true;
    return exst;
}

private void ButScreenCupt_Click(object sender, EventArgs e)
{

    string FilePath1 = "g:\\a.bmp";
    string FilePath2 = "g:\\b.bmp";
    Bitmap b1, b2;
    bool isSuccess1 = TryGetBitMap(FilePath1);
    bool isSuccess2 = TryGetBitMap(FilePath2);
    if (isSuccess1 && isSuccess2)
    {
        b1 = new Bitmap(FilePath1);
        pictureBox1.Image = b1;
        b2 = new Bitmap(FilePath2);
        pictureBox2.Image = b2;
        dd = ComparingImages.Compare(b1, b2);

        MessageBox.Show(dd.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:29:49.247

```
Bitmap b2;
try
{
    b2 = new Bitmap("g:\\ba.bmp");
}
catch (FileNotFoundException notExst)
{
   //enter your message here
} 
```

无需在 catch 中抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:29:25.670

您可以使用 TryGet 模式构建自己的方法。

```
bool isSuccess = TryGetBitMap("g:\\ba.bmp",b2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:30:55.210

不要声明**notExst** 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T19:32:46.977

正如@Jaguar 提到的，如果 Bitmap 类抛出一个 FileNotFoundException ，您可以捕获它。异常处理会导致调用堆栈展开。如果您可以使用 if-else 语句检查文件是否存在，那就更好了。

# google-sheets - 满足两个条件的每一行的总和

> ID：12029300
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:25:55.573
> 
> 标签：google-sheets, google-sheets-formula

我有两个电子表格。第一个是产品列表，第二个是销售列表。

产品电子表格包括四列：“SKU”、“Shipment ID”、“Quantity Purchased”和“Remaining Quantity”。

     A B C D
     SKU 货件编号 购买数量 剩余数量
1 20121 X2992 40 38
2 20121 X8483 40 40
3 71662 X2242 40 39

销售电子表格包括三列：“SKU”、“Shipment ID”和“Quantity Sold”。

     A B C
     SKU 货件编号 已售数量
1 20121 X2992 1
2 71662 X2242 1
3 20121 X2992 1

我想要计算“剩余数量”。此列的每一行应从其自己的行中获取“购买数量”，并从销售电子表格中减去“SKU”和“Shipment ID”与“SKU”和“Shipment ID”匹配的每一行的“Quantity Sold”从它自己的行。这个公式是什么？（许多公式在 Excel 中是相同的，所以我也标记了 Excel。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:01:51.317

在复制下来的产品表单元格 D2 中尝试此公式

`=C2-ArrayFormula(SUM(IF(Sales!A$2:A$100=A2,IF(Sales!B$2:B$100=B2,Sales!C$2:C$100))))`

假设销售表中的数据最多为第 100 行，根据需要进行调整

# c# - 列出类的可用属性

> ID：12029313
> 
> 赞同：0
> 
> 时间：2012-08-19T19:28:26.203
> 
> 标签：c#, class

我正在连接我编写的一项服务，我想举例说明该服务可为我们的客户提供哪些服务。

这就是我所拥有的：

```
protected void GetCust(string accountnumber)
{
  var cust = _client.GetCustomer(CorpId, accountnumber);

  if (cust == null)
  {
    Label1.Visible = true;
    ListBox1.Items.Clear();
    return;
  }

  Label1.Visible = false;

  ListBox1.Items.Clear();
  ListBox1.Items.Add("AccountId = " + cust.AccountId);
  ListBox1.Items.Add("AreaCode = " + cust.AreaCode);
  ListBox1.Items.Add("BudgetBalance = " + cust.BudgetBalance);
  ListBox1.Items.Add("BudgetRate = " + cust.BudgetRate);
  ListBox1.Items.Add("CareOf = " + cust.CareOf);
  ListBox1.Items.Add("City = " + cust.City);
  ListBox1.Items.Add("CorporationId = " + cust.CorporationId);
  ListBox1.Items.Add("CreditCode = " + cust.CreditCode);
  ListBox1.Items.Add("CurrentBalance = " + cust.CurrentBalance);
  ListBox1.Items.Add("DefaultProductCode = " + cust.DefaultProductCode);
  ListBox1.Items.Add("DefaultUnitOfIssue = " + cust.DefaultUnitOfIssue);
  ListBox1.Items.Add("DeliveryCity = " + cust.DeliveryCity);
  ListBox1.Items.Add("DeliveryStreet = " + cust.DeliveryStreet);
  ListBox1.Items.Add("DepositAmount = " + cust.DepositAmount);
  ListBox1.Items.Add("FinanceChargeCode = " + cust.FinanceChargeCode);
  ListBox1.Items.Add("LastDeliveryDate = " + cust.LastDeliveryDate);
  ListBox1.Items.Add("LastPaymenRecievedDate = " + cust.LastPaymenRecievedDate);
  ListBox1.Items.Add("LastPaymentRecievedAmount = " + cust.LastPaymentRecievedAmount);
  ListBox1.Items.Add("MasterBillingAccount = " + cust.MasterBillingAccount);
  ListBox1.Items.Add("MasterBillingBranch = " + cust.MasterBillingBranch);
  ListBox1.Items.Add("Name = " + cust.Name);
  ListBox1.Items.Add("NonBudgetBalance = " + cust.NonBudgetBalance);
  ListBox1.Items.Add("NumberOfTanks = " + cust.NumberOfTanks);
  ListBox1.Items.Add("Over120 = " + cust.Over120);
  ListBox1.Items.Add("Over30 = " + cust.Over30);
  ListBox1.Items.Add("Over60 = " + cust.Over60);
  ListBox1.Items.Add("Over90 = " + cust.Over90);
  ListBox1.Items.Add("PercentFull = " + cust.PercentFull);
  ListBox1.Items.Add("PhoneNumber = " + cust.PhoneNumber);
  ListBox1.Items.Add("PreviousPercent = " + cust.PreviousPercent);
  ListBox1.Items.Add("PreviousStatmentBalance = " + cust.PreviousStatmentBalance);
  ListBox1.Items.Add("QuantityLastDelivered = " + cust.QuantityLastDelivered);
  ListBox1.Items.Add("SalesManCode = " + cust.SalesManCode);
  ListBox1.Items.Add("State = " + cust.State);
  ListBox1.Items.Add("Street = " + cust.Street);
  ListBox1.Items.Add("TankSerialNumber = " + cust.TankSerialNumber);
  ListBox1.Items.Add("TankSize = " + cust.TankSize);
  ListBox1.Items.Add("TankType = " + cust.TankType);
  ListBox1.Items.Add("TaxCode = " + cust.TaxCode);
  ListBox1.Items.Add("TotalBalance = " + cust.TotalBalance);
  ListBox1.Items.Add("TotalGasUsedLastYear = " + cust.TotalGasUsedLastYear);
  ListBox1.Items.Add("Type1 = " + cust.Type1);
  ListBox1.Items.Add("TypeCompanyTank = " + cust.TypeCompanyTank);
  ListBox1.Items.Add("YearToDateDeliveries = " + cust.YearToDateDeliveries);
  ListBox1.Items.Add("YearToDateGasDelivered = " + cust.YearToDateGasDelivered);
  ListBox1.Items.Add("ZipCode = " + cust.ZipCode);
  ListBox1.Items.Add("ZipCodeExtension = " + cust.ZipCodeExtension);
} 
```

我的问题是，我不想每次进行更改时都必须手动更新它。

我的问题是，如何使用属性名称及其值列出 cust 的内容？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:34:03.007

您可以使用[反射](http://msdn.microsoft.com/en-us/library/t0cs7xez%28v=vs.100%29.aspx)来获取类型中所有属性的列表（：

```
var properties = cust.GetType().GetProperties();
foreach (var prop in properties)
{
    ListBox1.Items.Add(prop.Name + " = " + prop.GetValue(cust, null));
} 
```

# concurrency - Clojure：并行计算产生的数据访问速度似乎要慢得多

> ID：12029320
> 
> 赞同：3
> 
> 时间：2012-08-19T19:29:13.160
> 
> 标签：concurrency, clojure

我有一个函数可以同时计算文本文件中某些特征的频率并整理数据。该函数的输出是存储在持久映射中的数千个频率分布。举个简单的例子：

```
{"dogs" {"great dane" 2, "poodle" 4}, "cats" {"siamese" 1 "tom" 3}} 
```

以及会产生这个的代码：

```
(defn do-the-thing-1 [lines species_list]
  ;; we know the full list of species beforehand so to avoid thread contention
  ;; for a single resource, make an atom for each species
  (let [resultdump      (reduce #(assoc %1 %2 (atom {})) {} species_list)
        line-processor  (fn [line]
                          (fn [] ; return a function that will do the work when invoked
                            (doseq [[species breed] (extract-pairs line)]
                              (swap! ; increase the count for this species-breed pair
                                (resultdump species)
                                update-in [breed] #(+ 1 (or % 0))))))
        pool            (Executors/newFixedThreadPool 4)]
    ;; queue up the tasks
    (doseq [future (.invokeAll pool (map line-processor lines))]
      (.get future))
    (.shutdown pool)
    (deref-vals result)))

(defn deref-vals [species_map]
  (into {} (for [[species fdist] species_map] [species @fdist])) 
```

这工作正常。问题是我需要先将它们转换为概率分布，然后才能使用它们。例如

```
{"dogs" {"great dane" 1/3, "poodle" 2/3}, "cats" {"siamese" 1/4, "tom" 3/4}} 
```

这是执行此操作的函数：

```
(defn freq->prob 
  "Converts a frequency distribution into a probability distribution"
  [fdist]
  (let [sum (apply + (vals fdist))]
    (persistent!
      (reduce
        (fn [dist [key val]] (assoc! dist key (/ val sum)))
        (transient fdist)
        (seq fdist))))) 
```

在处理管道中的下一步消耗分布时即时执行此转换可提供合理的速度，但也有相当数量的冗余转换，因为某些分布被多次使用。当我修改我的函数以在返回结果之前并行执行转换时，后期处理的速度会急剧下降。

这是修改后的功能：

```
(defn do-the-thing-2 [lines species_list]
  ;; we know the full list of species beforehand so to avoid thread contention
  ;; for a single resource, make an atom for each species
  (let [resultdump      (reduce #(assoc %1 %2 (atom {})) {} species_list)
        line-processor  (fn [line]
                          (fn [] ; return a function that will do the work when invoked
                            (doseq [[species breed] (extract-pairs line)]
                              (swap! ; increase the count for this species-breed pair
                                (resultdump species)
                                update-in [breed] #(+ 1 (or % 0))))))
        pool            (Executors/newFixedThreadPool 4)]
    ;; queue up the tasks
    (doseq [future (.invokeAll pool (map line-processor lines))]
      (.get future))

    ;; this is the only bit that has been added
    (doseq [future (.invokeAll pool (map
                                      (fn [fdist_atom]
                                        #(reset! fdist_atom (freq->prob @fdist_atom)))
                                      (vals resultdump)))]
      (.get future))

    (.shutdown pool)
    (deref-vals result))) 
```

所以是的，这使得之后的一切都比简单地调用`freq->prob`每次访问结果地图时慢大约 10 倍，尽管返回的数据是相同的。任何人都可以就为什么会这样或我能做些什么提出原因吗？

编辑：我现在怀疑它与 Clojure 的分数有关。如果我修改`freq->prob`函数以创建浮点数或双精度数而不是分数，则在预先计算概率分布而不是动态生成概率分布时性能会得到提高。是不是在原子中产生的分数比在原子外产生的分数运行得慢？我刚刚进行了一些简单的测试，表明情况并非如此，所以这里肯定发生了一些奇怪的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:35:59.190

我不是 100% 确定我遵循了你的逻辑，但你的地图功能在这里：

```
(map
    (fn [fdist_atom]
        #(reset! fdist_atom (freq->prob @fdist_atom)))
    (vals resultdump)) 
```

看起来不对。如果您根据旧值更新原子，则比应用于原子的取消引用值的函数`swap!`更合适。`reset!`这似乎更好：

```
(map
    (fn [fdist_atom] (swap! fdist_atom freq->prob))
    (vals resultdump)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:03:13.153

关于您关于转换概率分布的问题。

如果你像这样重写'freq-prob'：

```
(defn cnv-freq [m]
 (let [t (apply + (vals m))]
  (into {} (map (fn [[k v]] [k (/ v t)]) m))))
(defn freq-prob [m]
 (into {} (pmap (fn [[k v]] [k (cnv-freq v)]) m))) 
```

您可以通过将“pmap”更改为“map”来启用/禁用并行执行。

# ios - Phonegap不旋转方向？

> ID：12029323
> 
> 赞同：3
> 
> 时间：2012-08-19T19:29:37.027
> 
> 标签：ios, cordova

我不知道为什么，但是当我旋转 iPhone 时，我的 PhoneGap 应用程序没有旋转屏幕。发布代码是没有用的，因为它不适用于最简单的代码：`<div>Hello World!</div`.

我也检查了方向设置： ![在此处输入图像描述](../Images/8ef408e11323a9c0df748cbf85551526.png) ![在此处输入图像描述](../Images/a7ea325981a7f2011a2e9839b06b664d.png)

这是一个例子（在实际设备上也是如此）： ![在此处输入图像描述](../Images/a4c642cc44a04a14c2dc69927cd813dd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:34:09.520

对我来说同样的问题。我解决了这个问题，在我的代表上为 iOS6 添加了以下几行：

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    NSUInteger supportedInterfaceOrientations = (1 << UIInterfaceOrientationPortrait) | (1 << UIInterfaceOrientationLandscapeLeft) | (1 << UIInterfaceOrientationLandscapeRight) | (1 << UIInterfaceOrientationPortraitUpsideDown);

    return supportedInterfaceOrientations;
} 
```

另外，在您的主控制器上，添加：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T01:22:19.440

更改类文件夹中的 MainViewController.m

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    //return [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
     return true;
} 
```

并且在 AppDelegate.m 上仍然在类文件夹中

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    // iPhone doesn't support upside down by default, while the iPad does.  Override to allow all orientations always, and let the root view controller decide what's allowed (the supported orientations mask gets intersected).
    NSUInteger supportedInterfaceOrientations = (1 << UIInterfaceOrientationPortrait) | (1 << UIInterfaceOrientationLandscapeLeft) | (1 << UIInterfaceOrientationLandscapeRight) | (1 << UIInterfaceOrientationPortraitUpsideDown);

    return supportedInterfaceOrientations;
} 
```

# php - curl脚本只是填写表单而不提交

> ID：12029324
> 
> 赞同：1
> 
> 时间：2012-08-19T19:29:37.863
> 
> 标签：php, curl

我有这个小问题。我编写了一个 curl 脚本，首先单击一个链接，然后填写该链接提供的表格。

[链接是http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32](http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32)上的“包裹查询”

表格位于[http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx](http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx)

但我的问题是脚本只是填写表格而不用它做任何事情

当我回显 curl 的结果时，它显示表格已填满，但我想查看表格的结果

你能告诉我为什么会这样吗？你能建议一些技巧来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:45:22.583

正如评论中提到的，问题在于您尝试“抓取”的网站是使用 ASP.net 构建的，它不以传统方式使用表单数据。

我确实知道有人成功地完成了这项工作，但这很繁琐。需要注意的关键隐藏字段是：

*   `__EVENTTARGET`和`__EVENTARGUMENT`：这些是在您提交表单时由 Javascript 设置的，但始终设置为相同的值。如果您使用浏览器调试工具（Firebug、URLParams 等）来检查真实 POST 的结果，您将能够毫无问题地填写这些内容。
*   `__VIEWSTATE`：每次页面加载时都会重新生成，因此每次请求时都需要从加载的表单的 HTML 中删除它。
*   `__EVENTVALIDATION`：此字段专门用于防止您尝试的那种欺骗。就像`__VIEWSTATE`，它会在每次页面加载时重新生成，但它的存在可能意味着您一次只能更改**一个字段**，因为它会根据之前的状态验证您提交的内容。

我在这里的一些细节上可能是错误的，但这应该给你一个开始的地方......

# algorithm - 建议一种算法来遍历 B+ 树

> ID：12029326
> 
> 赞同：0
> 
> 时间：2012-08-19T19:29:53.557
> 
> 标签：algorithm, b-tree

请建议我一种算法，该算法将遍历 4 阶 B+ 树，并按键的顺序在屏幕上显示其所有整数键条目（较小的键优先）。我必须用 C++ 编写它，但即使是伪代码也会受到赞赏。甚至编写算法的小指南也会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:37:04.210

我认为这是一种在预序中使用[深度优先遍历](http://en.wikipedia.org/wiki/Tree_traversal#Traversals)并[标记已访问节点的好方法，以避免再次遍历已访问节点](https://stackoverflow.com/questions/9917715/b-tree-print-elements-is-order)。

# forms - 在 oracle 表单和 Web 浏览器之间同步

> ID：12029331
> 
> 赞同：1
> 
> 时间：2012-08-19T19:30:24.230
> 
> 标签：forms, oracle, oracle10g, oracleforms

我有一个内置在 Oracle Web 表单 10g 中的应用程序。用户可以通过网络浏览器访问表单。在表单中，有一个调用函数的按钮`web.show_documents()`。该函数`http`在另一个浏览器窗口中打开一个页面。我希望能够知道新窗口是否仍然打开或已被用户关闭，因为我不希望他一次能够打开多个 http 地址。

换句话说，我想从按下按钮的那一刻起禁用按钮，直到新窗口（由该按钮按下创建）关闭。

有没有办法做到这一点？

我知道我可以通过不断地对数据库进行采样来做到这一点，但我想避免这种解决方案，因为它会消耗资源。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:12:49.950

这是javascript中的父子窗口关系。在 Javascript 中，子窗口可以由父窗口生成，在这种情况下，父窗口知道子窗口`name`并可以控制其外观和消失（`open`或`close`）。但是，在这种情况下，父窗口生成子窗口，但不是通过`javascript`而是使用 Oracle 表单函数`web.show_documents`。

不幸的是，从 Oracle forms 10g 开始，没有其他 Web 功能可供您使用（11g 有`web.javascript_eval_expr`并且`web.javascript_eval_function`可以用来执行`javascript`）。

对于解决方案 - 最简单的方法是使用`_self`target name in`web.show_document`而不是 default `_blank`。这将使网页在与表单会话相同的浏览器中打开（在这种情况下，您将失去表单会话）。您可以提醒用户通知此操作，说明它已完成`consistency issues`等，并且`webpage will be opened in the same window as the forms`.

另一种选择是在网页打开后完全禁用该按钮（如您所说）。但是，需要注意的是，用户可能会关闭并再次打开表单，在这种情况下，按钮将被启用（并且网页可能仍处于打开状态）。

# iphone - 保存无限量的 AVAudioRecorder 文件

> ID：12029333
> 
> 赞同：0
> 
> 时间：2012-08-19T19:30:32.333
> 
> 标签：iphone, avaudioplayer, avaudiorecorder

我正在开发的程序需要我保存大量的 AVAudioRecorder 文件以备将来使用。然而，虽然我知道如何保存和录制静态数量的文件，但我希望能够动态保存它们，而不必在每次录制时都使用相同的声音文件 URL（如“sound.caf”） ，并且能够在我需要的时候播放这些文件。有人知道我会怎么做吗？

下面的代码显示了我当前的录制代码：

```
- (IBAction)playSound:(id)sender {

    if (!self.audioRecorder.recording)
    {
        NSError *error;

        if (self.audioPlayer)
            self.audioPlayer = nil;

        self.dirPaths = NSSearchPathForDirectoriesInDomains(
                                                            NSDocumentDirectory, NSUserDomainMask, YES);
        self.docsDir = [self.dirPaths objectAtIndex:0];
        self.soundFilePath = [self.docsDir
                              stringByAppendingPathComponent:@"sound.caf"];

        self.soundFileURL = [NSURL fileURLWithPath:self.soundFilePath];

        self.audioPlayer = [[AVAudioPlayer alloc] 
                       initWithContentsOfURL:self.soundFileURL                                    
                       error:&error];

        self.audioPlayer.delegate = self;
        [self.audioPlayer prepareToPlay];

        if (error)
            NSLog(@"Error: %@", 
                  [error localizedDescription]);
        else
            [self.audioPlayer play];
    }

}

- (IBAction)recordSound:(id)sender {

    if(!self.audioRecorder.recording)
    {

        self.dirPaths = NSSearchPathForDirectoriesInDomains(
                                                       NSDocumentDirectory, NSUserDomainMask, YES);
        self.docsDir = [self.dirPaths objectAtIndex:0];
        self.soundFilePath = [self.docsDir
                                   stringByAppendingPathComponent:@"sound.caf"];

        self.soundFileURL = [NSURL fileURLWithPath:self.soundFilePath];

        self.recordSettings = [NSDictionary 
                                        dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithInt:AVAudioQualityMin],
                                        AVEncoderAudioQualityKey,
                                        [NSNumber numberWithInt:16], 
                                        AVEncoderBitRateKey,
                                        [NSNumber numberWithInt: 2], 
                                        AVNumberOfChannelsKey,
                                        [NSNumber numberWithFloat:44100.0], 
                                        AVSampleRateKey,
                                        nil];

        NSError *error = nil;

        self.audioRecorder = [[AVAudioRecorder alloc]
                              initWithURL:self.soundFileURL
                              settings:self.recordSettings
                              error:&error];

        if (error)
        {
            NSLog(@"error: %@", [error localizedDescription]);
        } else {
            [self.audioRecorder prepareToRecord];
        }

        [self.audioRecorder record];
        [self.audioRecorder recordForDuration:(NSTimeInterval) 5];
        [self.record setTitle:@"Stop" forState: UIControlStateNormal];
    }
    else if (self.audioRecorder.recording)
    {
        [self.audioRecorder stop];
        [self.record setTitle:@"Record" forState: UIControlStateNormal];

    } 
    else if (self.audioPlayer.playing) {
        [self.audioPlayer stop];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:53:26.790

如果我正确理解你的问题，有很多方法可以解决这个问题。我有一个应用程序可以记录声音片段并存储它们以供以后播放。我会分享我的方法，你可以接受或离开。

最初我创建了一个记录器，就像你做的一样，虽然我使用临时目录 (NSTemproraryDirectory) 而不是 NSDocuments。我在此临时位置使用单个文件进行记录，然后在记录完成并且用户确认希望保存记录后，我使用 [NSMutableData dataWithContentsOfFile:] 将临时文件的数据加载到内存中并将其写入我选择的路径使用 [FileManager createFileAtPath:]。可能有一种更有效的方法来重现文件，但这对于我的目的来说已经足够有效了。

对于传递给 createFileAtPath 的路径，我使用由我的录音存储文件夹构建的字符串和为每个录音生成的 uniqueID 字符串。我使用 [[NSProcessInfo processInfo] globalUniqueString] 创建唯一 ID，但您可以使用散列或任何其他对您有意义的技术，只要您确定它在您的记录 ID 集中是唯一的。

然后，我可以为任何我有 ID 的录音创建一个 AVAudioPlayer，只需像我保存它时那样构建路径。如果没有跟踪列表或数据库中的 ID，则可以枚举记录目录并根据文件名构建记录 ID 列表。我使用数据库来存储 ID 以及记录时间、长度、主题等元数据。

# c# - 从文本文件读入列表

> ID：12029335
> 
> 赞同：-3
> 
> 时间：2012-08-19T19:30:41.843
> 
> 标签：c#, list

我需要一些帮助。基本上，我在文本文件中有一段文本，我需要将文本文件（存储为字符串）读入字符列表并存储它们出现在字符串中的时间量。因此它将在 (AZ) 之间生成一个列表，并根据字符出现的次数对其进行排序。有没有办法在不使用 LINQ 的情况下做到这一点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T19:38:39.730

您可以使用哈希表来执行此操作。

```
Hashtable listofChars = new Hashtable();

for () { // your loop for the chars in the file
        Char c ; // your char
        if (!listofChars.ContainsKey(c))
        {
            listofChars[c] = 1;
        }
        else {
            listofChars[c] = ((int)listofChars["c"]) + 1;
        } 
} 
```

**- 编辑 -**

```
var listofChars = new SortedDictionary<char, int>();
foreach(char c in File.ReadAllText(fileName))
{
    if (!listofChars.ContainsKey(c))
    {
        listofChars[c] = 1;
    }
    else
    {
        listofChars[c] += 1;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:55:53.333

一种有效且简单的方法是创建一个[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)以 char 作为键并将其显示为值的数字。它有很好的[AddOrUpdate](http://msdn.microsoft.com/en-us/library/ee378675.aspx) (upsert) 方法：

```
string text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";
var chars = new System.Collections.Concurrent.ConcurrentDictionary<char, int>();
foreach (char c in text)
{
   chars.AddOrUpdate(c, 1, (chr, count) => count + 1);
} 
```

如果您想按没有 Linq(Lambda != Linq) 的编号订购它，您可以使用以下代码：

```
List<KeyValuePair<char, int>> charList = chars.ToList();
charList.Sort((firstPair, nextPair) =>
{
    return firstPair.Value.CompareTo(nextPair.Value);
}); 
```

**编辑**：如果您想订购降序更改以上一点：

```
charList.Sort((firstPair, nextPair) =>
{
    return -(firstPair.Value.CompareTo(nextPair.Value));
}); 
```

结果：

```
Console.Write(string.Join(Environment.NewLine, charList.Select(kv => string.Format("Char={0} Num={1}", kv.Key, kv.Value))));

Char=  Num=90
Char=e Num=59
Char=t Num=43
Char=s Num=39
Char=n Num=38
Char=i Num=32
Char=a Num=28
Char=o Num=25
Char=r Num=24
Char=p Num=18
Char=m Num=18
Char=l Num=17
Char=u Num=17
Char=d Num=16
Char=h Num=14
Char=y Num=13
Char=g Num=11
Char=c Num=10
Char=k Num=7
Char=w Num=6
Char=f Num=6
Char=I Num=6
Char=v Num=5
Char=b Num=5
Char=L Num=5
Char=, Num=4
Char=. Num=4
Char=0 Num=3
Char=x Num=2
Char=1 Num=2
Char=' Num=1
Char=5 Num=1
Char=M Num=1
Char=A Num=1
Char=P Num=1
Char=6 Num=1
Char=9 Num=1 
```

# html - 保持表头可见

> ID：12029336
> 
> 赞同：0
> 
> 时间：2012-08-19T19:30:43.750
> 
> 标签：html, css, html-table

> **可能重复：**
> [我需要我的 html 表格的主体滚动并且它的头部保持不动](https://stackoverflow.com/questions/130564/i-need-my-html-tables-body-to-scroll-and-its-head-to-stay-put)

我有一个基本表：

```
<div>
    <table>
        <thead><tr><th>col 1</th><th>Col 2</th></tr></thead>
        <tbody><tr><td>sweet</td><td>tooth</td></tr></tbody>
    </table>
</div> 
```

因此，我在正文部分有 200 行，并且想要制作它，以便当我滚动时，thead 部分保持在顶部，而其他所有内容都在其下方流动。无论如何在CSS中可以做到这一点？

以下款式：

```
div {
    max-height:400px;
    overflow:auto;
} 
```

我不知道该怎么做。我试图使滚动部分只是 tbody，但是当我这样做时，由于某些奇怪的原因，最大高度部分不会生效。此外，如果我将其分成 2 个表，那么列的宽度将不正确。我也不能事先说明宽度是多少，因为数据变化很快，所以它需要能够改变。

有任何想法吗？我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:50:41.480

编辑：实际上，这似乎破坏了标题和表格之间的连接，因此标题列不对齐。我会把它留在这里，以防有人可以让它工作。

这个怎么样。标头已渲染`position:absolute`，因此不会移动。但是你必须明确地把桌子放下来给它空间。

```
.relative {
    position:relative;   
}
.table {
    margin-top:18px;
    max-height:400px;
    overflow:auto;
}
thead {
    position:absolute;
    top: -18px;
} 
```

​​​

```
<div class="relative">
    <div class="table">
        <table>
            <thead><tr><th>col 1</th><th>Col 2</th></tr></thead>
            <tbody>
                <tr><td>sweet</td><td>tooth</td></tr>
            </tbody>
        </table>
    </div>
</div>​ 
```

将 18px 更改为您的头部高度。工作样本：http: [//jsfiddle.net/EYjd5/1/](http://jsfiddle.net/EYjd5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:55:39.473

如果您是 jQuery 爱好者，您可以使用[DataTables](http://datatables.net/examples/basic_init/scroll_y.html) jQuery 插件来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:20:20.730

One of the possible methods is to create another `table` inside the main `tbody`, limit its height, and make sure you get scrollbars on overflow by using `overflow: scroll;`. Of course, for the columns to line up, you need to imitate the effect of the table header, I did that by inserting a hidden row identical to the header in the end of the new `table` (you should hide it using `visibility: hidden; opacity: 0;` not using `display: none;` otherwise this won't work). Here's a sample:

HTML:

```
<table>
    <thead><tr><th>Name of show</th><th>Greatness</th></tr></thead>
    <tbody><table class = "limitedcontent">
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr><td>Glee</td><td>100%</td></tr>
        <tr class = "placehold"><th>Name of show</th><th>Greatness</th></tr>
    </table></tbody>
</table> 
```

CSS:

```
.limitedcontent {
    height: 150px; /*or whatever your limit is*/
    overflow-y: scroll;
    overflow-x: hidden;
    display: inline-block;
}
.placehold {
    visibility: hidden;
    opacity: 0;
    height: 0px;
    overflow: hidden;
} 
```

And a little demo: [little link](http://goo.gl/rgkro).

I hope that helped in any manner!

# jquery - 使用jQuery延迟

> ID：12029342
> 
> 赞同：1
> 
> 时间：2012-08-19T19:31:08.530
> 
> 标签：jquery, delay

我有以下 jquery 代码。基本上 - 它从锚点获取值 - 并在其下方显示子菜单内容。这完美地工作。

```
$(function(){ 

    $('.plus').live('click', function(event){
        event.preventDefault();
        $(this).addClass('lower');
        var existingPath = $(this).attr('rel');

        GetSubs(this, existingPath);
        $(this).removeClass('plus').addClass('open');   //.delay(10000).removeClass('lower');
    });

    function GetSubs(IDclicked, existingPath){
        var dataString;
        dataString = 'lang=<%=Lang%>&rel=[' + existingPath + ']';

        $.ajax({
            type: "GET",
            url: "/includes/getSubCatMenuLinks.asp",
            data: dataString,
            success: function(data) {
                $(data).insertAfter(IDclicked);
            },
            error: function(obj,msg) {
                alert('*** Error! ***\n\n'+msg);
            }  

        });
    } 
}); 
```

我想做的是在加载内容时显示一个“正在加载”图标，然后在完成后将其删除。

显示它很好 - 这就是行中所做的

```
 $(this).addClass('lower'); 
```

当几行下来，我尝试删除该类 - 但 movemext 是如此之快 - 加载图标甚至不显示。即 - ajax 内容尚未出现，但 jquery 代码已经加载了类，加载了 ajax（某处）然后删除了类 - 所以加载图标甚至不显示。

我尝试使用延迟方法 - 让它在几秒钟或几秒钟后移除 - 但它不起作用。

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:42:22.550

如前所述，`.delay`仅适用于动画方法。只需在 Ajax 请求完成时删除该类。为了使您的代码保持解耦，请使用由返回的延迟对象并将`$.ajax`回调传递给[`.always`方法*^([docs])*](http://api.jquery.com/deferred.always/)：

```
 var $this = $(this).addClass('lower');
 // ...

 // or GetSubs(this, existingPath).done if you only want to remove the loader
 // when the call was successful. Use .fail to handle error cases.
 GetSubs(this, existingPath).always(function() {
     $this.removeClass('lower');
     // or
     // $this.removeClass('plus').addClass('open').removeClass('lower');
     // not quite sure when exactly you want to remove / add which classes
 }); 

 // ...

function GetSubs(IDclicked, existingPath){
    // ...

    return $.ajax({ // <- return the $.ajax return value
        // ...
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:36:36.113

`delay()`仅适用于动画，不适用于 removeClass 之类的函数，因为您需要 timeOut。不仅如此，Ajax 调用是异步的，因此您的类会立即删除，并且不会等待 Ajax 调用完成。

你总是可以这样做：

```
$(function(){ 
    $(document).on('click', '.plus', function(e){
        e.preventDefault();
        var self = this,
            existingPath = $(this).attr('rel');

        $(self).addClass('lower');

        GetSubs(self, existingPath, function() { //added callback
            setTimeout(function() { //and a one second delay
                $(self).removeClass('lower');
            }, 1000);
        });
    });

    function GetSubs(IDclicked, existingPath, callback){
        var dataString = 'lang=<%=Lang%>&rel=[' + existingPath + ']';

        $.ajax({
            type: "GET",
            url: "/includes/getSubCatMenuLinks.asp",
            data: dataString,
            success: function(data) {
                $(data).insertAfter(IDclicked);
            },
            complete: function() {
                callback.call(); //callback function is called when ajax is finished
            },
            error: function(obj,msg) {
                alert('*** Error! ***\n\n'+msg);
            }  
        });
    } 
});​ 
```

这将等待 ajax 调用完成，然后等待一秒钟，然后执行类操作。通常只是为了炫耀你漂亮的微调器的计时器被认为是糟糕的 UI，所以我只保留回调函数。

# sql - MICROSOFT SQL server 和 windows azure 与 Mac OS X 和 Cocoa

> ID：12029345
> 
> 赞同：2
> 
> 时间：2012-08-19T19:31:36.870
> 
> 标签：sql, ios, macos, cocoa, odbc

因此，我目前正在为我的公司和其他小型企业创建 iPhone 和 Mac 应用程序进行一些研究。我发现上帝知道大量关于可可和 iOS 开发的书籍，但在 SQL Server 方面，事情变得更加阴暗。我在网上看到过各种各样的产品，它们声称是最好的 SQL 驱动程序，并且是向可可应用程序添加关系数据库的最简单和性能增强的方法。我目前一直在并且仍然在 Windows 下创建桌面应用程序，我们将我们的数据库广泛用于我们构建的几乎所有应用程序和报告。我们公司到处都有 iPad 和 iPhone，如果我们可以在 iPhone 或 iPad 上拥有一些工作流程或报告，我真的可以为我们带来一些创新的应用程序。我似乎找不到一个可行的 SQL 驱动程序，比如在寡妇下使用 Visual Studio。是否有我错过的明显解决方案，或者开发人员只是不处理使用关系数据库的企业项目？作为一家公司，我们有能力创建进行此类项目所需的任何网络或服务器，但在我这样做之前，我想确保我可以像使用 Visual Studio 一样使用我们现有的数据库，欢迎任何想法或建议.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:46:31.573

我想这就是为什么 Mac 上的企业级软件太少的原因之一……作为第一个候选人，我会考虑使用 FreeTDS 来访问 SQL Server。据我所知，它有可以在 XCode 中链接的头文件和库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:42:08.607

正如您在帖子和评论中提到的那样，您确实有很棒的设计。为了让应用程序与任何移动设备兼容，最好的应用程序设计是让您的应用程序作为连接到特定云数据库的云服务运行，同时应用程序通过任何公开的接口与其通信。

借助 Windows Azure，您的应用程序可以在使用 SQL 数据库的同时作为云服务运行。在您的云服务中，您可以公开 WCF 端点，该端点可以连接到您的 SQL 数据库并提供您正在寻找的特定数据。这样，只要您可以连接到安全的 WCF 端点并取回数据，您的云应用程序就可以为任何移动设备提供服务。在 WCF 中，您不仅可以获取 XML 数据，还可以根据需要在设备中传递更复杂的结果和过程。

# php - 使用 jquery 和/或 php 从未渲染的代码动态创建元素

> ID：12029349
> 
> 赞同：0
> 
> 时间：2012-08-19T19:32:10.117
> 
> 标签：php, jquery

我想将在需要之前不会呈现的 html 存储在可以保存原始 html 代码而不在页面加载时呈现它的标记中，或者将其存储在 php 或 jquery 变量中以供以后使用。然后我希望能够在单击按钮时将 html 插入 DOM 并使其呈现。

我已经尝试将它存储在 xmp 标记中，因为它可以存储带有 < 和 > 字符的 html 代码，而不使用它们的字符代码，但是当尝试将其插入 DOM 时，更新的源显示它已被复制但它不会'不在屏幕上渲染。还尝试将其存储在代码标签中，该代码标签适用于桌面浏览器，但不适用于移动 safari。由于这是一个 webapp，移动浏览器的兼容性很重要。

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:41:56.367

这取决于您要在哪里生成相关内容。如果您更容易设置在服务器端生成它，您可以使用`css`隐藏这些部分（如`display:none`）并删除 css 属性或使用 javascript 抓取节点并将它们放在其他地方，如下所示：

```
$('.target').html($('.hidden_node').html()); 
```

如果要在 js 端生成内容，可以将其构建为长字符串，然后将其推入目标中，也可以使用[jquery 的节点生成语法](http://api.jquery.com/jQuery/#jQuery2)，例如：

```
 $('<div />').attr({
   class: 'test'
 }).appendTo("body"); 
```

或者，您可以使用各种 javascript 模板解决方案之一，例如[mustache](https://github.com/janl/mustache.js)或[handlebars](http://handlebarsjs.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:44:52.590

尝试使用or`<script>`类型的标签：`text/plain``text/html`

```
<script type="text/plain" id="example">
  <div class="example">
    <h2>Hello</h2>
    <p>World</p>
  </div>
</script>

$(".button").click(function () {
  var html = $("#example").text();
  $("#destination").html(html);
}); 
```

# css - JavaFX 中样式的类型安全操作

> ID：12029350
> 
> 赞同：1
> 
> 时间：2012-08-19T19:32:19.053
> 
> 标签：css, javafx, javafx-2

我想在 JavaFX 应用程序中操作 CSS 样式。每个节点都有一个方法 setStyle 接受一个字符串。它有效，但不是类型安全的。是否有任何类型安全的方法来做同样的事情，例如：node.style().setFont(...)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:34:24.773

不，不是从 JavaFX 2.2 开始的。

有一个现有的[Jira 来提供 CSS 对象模型](http://javafx-jira.kenai.com/browse/RT-17293)，但它没有作为 JavaFX 2.2 的公共 API 公开。

# php - Cookie 不会在注销时删除

> ID：12029351
> 
> 赞同：2
> 
> 时间：2012-08-19T19:32:37.683
> 
> 标签：php

我有一个问题，用户无法注销，因为 $_COOKIE 并没有真正删除。我无法找出可能是什么问题。

此代码仅在登录时使用一次：

```
// Log In
$_SESSION['user_id'] = $row['user_id'];
$_SESSION['username'] = $row['username'];
setcookie('user_id', $row['user_id'], time() + 2592000);
setcookie('username', $row['username'], time() + 2592000); 
```

下面的代码检查是否设置了 cookie 以使用户在重新启动浏览器时登录（“保持登录”效果）。

```
// Starting Session
session_start();
// If the session vars aren't set, try to set them with cookies
if (!isset($_SESSION['user_id'])) {
    // This check always equals true because cookies are not deleting on Log Out
    if (isset($_COOKIE['user_id']) && isset($_COOKIE['username'])) {
        $_SESSION['user_id'] = $_COOKIE['user_id'];
        $_SESSION['username'] = $_COOKIE['username'];
    }
} 
```

此代码仅在注销时启动一次：

```
// Log Out
session_start();
if (isset($_SESSION['user_id'])) {
    $_SESSION = array();
    if (isset($_COOKIE[session_name()])) {
        setcookie(session_name(), '', time() - 2592000, '/');
    }
    session_destroy();
}
setcookie('user_id', '', time() - 2592000);
setcookie('username', '', time() - 2592000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:35:45.153

不要对 cookie 使用相对时间。如果要使 cookie 过期，请使用`Jan 1 1970 00:00:00`. 您假设用户的时钟是准确的，并且在您服务器的一个小时内。鉴于有多少人的 VCR 闪烁`12:00`，这是一个糟糕的假设。

还有，为什么要将登录信息存储在客户端 cookie 中？您真正应该设置的唯一 cookie 是 session_start() 已经为您设置的会话 cookie，然后仅将所有这些信息存储在 $_SESSION 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:40:31.557

我认为你这样做太复杂了。我的示例只是管理员登录：

登录.php

```
@session_start();
if (isset($_GET['login'])) {
    if($_GET['name'] == $s['admin']){
        if($_GET['pw'] == $s['adminpw']){
            $_SESSION['isadmin'] = true;    
        }
    }
} 
```

注销.php

```
@session_start();
unset ($_SESSION['isadmin']); 
```

用于`session_set_cookie_params()`设置生命周期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:50:47.367

我找到了为什么 cookie 没有被删除！

为确保您的 cookie 将被删除，请在删除 cookie 时设置与设置它们时相同的路径。

```
// Setting Cookie
setcookie(session_name(), '', time()-2592000, '/'); // The path here is "/"

// Removing Cookie
setcookie(session_name(), '', time()+2592000, '/'); // The path here is "/" 
```

# php - spl_autoload_register 错误而不是 __autoload

> ID：12029353
> 
> 赞同：1
> 
> 时间：2012-08-19T19:32:50.147
> 
> 标签：php, session, spl-autoload-register

我有点困惑。

到目前为止，我在 PHP 中使用 __autoload，并且我也在使用会话。这两件事一起工作得很好，当我在会话中存储一些对象时，__autoload 函数已经毫无问题地加载了相应的类。

不，我正在“更新”我的主脚本，并且想将 __autoload 函数更改为 spl_autoload_register 函数，因为 php 手册说，将来可能会弃用 __autoload。

但是现在，我有一些问题。spl_autoload_register 适用于所有类，我在脚本中以“正常”方式使用它们，但是当我将对象存储在会话中时，spl_autoload_register 无法加载这些类。

当我查看带有 json_encode($_SESSION) 的会话时，会出现如下内容：

```
    {"user":{"__PHP_Incomplete_Class_Name":"User","id":"1000","username":"foobar","email":"foo@bar.com"}}

```

使用 __autoload 没问题...

```
    {"user":{"id":"1000","username":"foobar","email":"foo@bar.com"}}

```

我的职能：

```
    __autoload($class) {
        包括“类/”。$类。'.php';
    }

```

我试图将其替换为：

```
    spl_autoload_register(函数($class) {
        包括“类/”。$类。'.php';
    }

```

我正在使用 PHP 版本 5.3.3-7

有人可以重现这个错误吗？到目前为止，这可能是 PHP spl_autoload_register 中的一个错误吗？到目前为止，__autoload 是“更好”的功能吗，而 spl_autoload_register 到目前为止还不能与会话一起使用吗？

# iphone - 多次将值写入 .plist？

> ID：12029354
> 
> 赞同：0
> 
> 时间：2012-08-19T19:32:51.313
> 
> 标签：iphone, ios, plist

我有一个 iPhone 应用程序正在开发中，并且我在应用程序中有一个设置页面。我使用 .plist 来存储用户选择的设置，然后我稍后从 .plist 中读取数据。这不是你创建项目时自带的-Info.plist，它是另一个plist文件。当我在编码后测试设置时，它起作用了。可以读取该设置，这是我使用的正确设置。但是，我回到同一个应用程序会话中的设置，并更改了相同的设置。当我去应用程序查看它是否读取了新设置时，它只使用了旧的（第一个）设置。我再次尝试，但结果相同。我只能编写一次设置，并且不能“重写”或“覆盖”相同的设置。我无法弄清楚我的生活出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:37:18.270

您不能覆盖或写入应用程序包本身的文件。如果要写入文件，应首先将其复制到应用程序的 Library 或 Documents 目录，如下所示：

```
NSString *docsDir = [NSSearchPathsForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask) objectAtIndex:0];
NSString *plistFile = @"myplist.plist";
NSString *plistInBundle = [[NSBundle mainBundle] pathForResource:plistFile ofType:nil];
NSString *plistInDocsDir = [docsDir stringByAppendingPathComponent:plistFile];
[[NSFileManager defaultManager] copyItemAtPath:plistInBundle toPath:plistInDocsDir error:NULL];
// now `plistInDocsDir` is (over)writeable 
```

但是，为了存储应用程序的首选项，最好使用[NSUserDefaults](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)类：

```
[[NSUserDefaults standardUserDefaults] setObject:@"Some string" forKey:@"MySettingKey"]; 
```

和/或为您的应用创建一个[Preference Bundle 。](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# php - 是否可以在 PHP spl_autoload_register 处设置断点？

> ID：12029362
> 
> 赞同：0
> 
> 时间：2012-08-19T19:34:08.663
> 
> 标签：php, debugging, xdebug, breakpoints

我想知道谁[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php)在我的应用程序中调用。具体来说，我使用的是 CakePHP，因此源文件中的`find`和的简单组合`grep`就足够了，但我想知道是否有办法通过 XDebug 在 Eclipse 中设置*断点*，因此 PHP 解释器将在 Cake 脚本时停止调用该函数并将显示发生这种情况的文件和行号。

你知道，我无法手动设置断点，因为该函数没有在任何 PHP 文件中定义，所以我问是否有办法跟踪对 PHP 扩展中定义的函数的调用（可能在本机代码中） ，即使我显然没有办法进入机器代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:46:49.510

您可能可以通过创造性地使用[`override_function`](http://uk3.php.net/manual/en/function.override-function.php)and/or来偷偷摸摸地做一些事情，尽管使用 a源代码（或者，甚至更好，[ack](http://betterthangrep.com/)）[`rename_function`](http://uk3.php.net/manual/en/function.rename-function.php)做一些事情可能要容易得多`grep -r`

# java - 使用 Google GSON 解析 JSON：直接从子对象中读取值

> ID：12029367
> 
> 赞同：2
> 
> 时间：2012-08-19T19:34:38.437
> 
> 标签：java, json, gson

我在使用 Google 的 Gson 解析以下 JSON 时遇到问题：

```
{"Name":
    {"object1":   
       {"field1":"17",
        "field2":"360",
        "field3":"19",
        "field4":"sun",
        "field5":"rain"
       }
    }
} 
```

我尝试了以下方法来获取 field1 的值，但它不起作用

```
@SerializedName("Name/object1/field1")
public int fieldOne; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T00:49:22.777

您的对象必须保留 json 指令的层次结构。对于您的示例，它将是这样的：

```
public class Object {

    @SerializedName("field1")
    public String fieldOne;

    @SerializedName("field2")
    public String fieldTwo;

    @SerializedName("field3")
    public String fieldThree;

    @SerializedName("field4")
    public String fieldFour;
}

public class Name {

    @SerializedName("object1")
    public Object obj;
}

public class GsonObj {

    @SerializedName("Name")
    public Name name;
} 
```

使用以下调用：

```
String json = "{\"Name\":{" +
            "\"object1\":{" +
            "\"field1\":\"17\",\"field2\":\"360\",\"field3\":\"19\",\"field4\":\"sun\",\"field5\":\"rain\"}}}";

Gson gson = new Gson();
GsonObj jsonResult = gson.fromJson(json, GsonObj.class);
Log.d("test", "field one: "+jsonResult.name.obj.fieldOne);
Log.d("test", "field two: "+jsonResult.name.obj.fieldTwo);
Log.d("test", "field three: "+jsonResult.name.obj.fieldThree);
Log.d("test", "field four: "+jsonResult.name.obj.fieldFour); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:40:55.680

您的 JSON 无效。JSON 可能以 { 或 [ 开头，因此您需要用另一对 {} 包装您的字符串。

一个好的做法是始终首先检查您的数据。我经常在这里使用这个：http: [//jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:47:53.230

我认为您不能拥有“名称/对象1/字段”，您必须直接指定键名而无需层次结构。请参阅[如何使用 GSON 解析动态 JSON 字段？](https://stackoverflow.com/questions/5796948/how-to-parse-dynamic-json-fields-with-gson)

# c# - SL：为什么我的 DomainService 将我的结果查询返回为空？

> ID：12029369
> 
> 赞同：0
> 
> 时间：2012-08-19T19:35:12.900
> 
> 标签：c#, silverlight, wcf-ria-services, domainservices

我现在正在使用 Silverlight 和 RIA 服务。

在我的项目中，我有一个 DomainService 和一个 AuthenticationService。

当我进行身份验证时，我意识到如果我调试我的，`ObjectContext`我可以看到我的数据库中的所有记录。

但是当我使用我的 DomainService 时，我试图从默认查询中获取对象，对于 IE，`GetStudents`但查询总是返回 0 个元素。

但是从中，我想做一个`Insert`，它有效

```
 // Has finished
            var jsonObjects = JsonConvert.SerializeObject(Test, Formatting.Indented);

            var context = new DatabaseDomainContext();
            // it works!! add the object
            //Student newStudent = new Student();
            //newStudent.Id = "OPA-3DKCL2";
            //newStudent.FirstName = "Oscar";
            //newStudent.LastName = "Fimbres";

            //context.Students.Add(newStudent);
            //context.SubmitChanges();

            // all the time returns 0 elements
            var students2 = context.Load(context.GetStudentsQuery()).Entities;

            // the same
            var students = context.GetStudentsQuery();
            AnsweredTest answerTest = new AnsweredTest();
            answerTest.JsonTest = jsonObjects;
            answerTest.Date = DateTime.Now;
            //answerTest.Student = context.Students.SingleOrDefault(x => x.Id == "OPA-3DKCLS"); 
```

![在此处输入图像描述](../Images/dc9f44549782f2d727a84d6b9781f501.png)

如果我遗漏了重要数据，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:20:19.957

Load operation is asyncronious, you need to subscribe to `Completed` event and get result there:

```
var loadOperation = context.Load(context.GetStudentsQuery());
operation.Completed += OnStudentsLoaded;

private void OnStudentsLoaded(object sender, EventArgs e)
{
    var operation = sender as LoadOperation<Student>;
    if (operation == null)
    {
        throw new ArgumentException("sender is not LoadOpearation<Student>");
    }
    IEnumerable<Student> students = operation.Entities;

    //.....
} 
```

# remote-desktop - 从路由器转发端口到外部远程桌面

> ID：12029371
> 
> 赞同：0
> 
> 时间：2012-08-19T19:35:31.377
> 
> 标签：remote-desktop, portforwarding

我正在尝试在与我合作的组织中设置服务器，以允许我从家里（或任何地方）访问远程桌面。我试图在互联网网关上设置一个端口来转发到服务器的本地 IP 地址。但是网关和服务器之间有一个路由器，所以网关只能识别路由器的IP地址。如何将其设置为远程进入服务器？

是的，我使用的是来自 ISP 的 IP 地址，而不是来自外部位置的网关、路由器或服务器的本地 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:38:02.263

您需要在路由器和网关上都设置端口转发。

# php - php文件访问权限

> ID：12029372
> 
> 赞同：2
> 
> 时间：2012-08-19T19:35:31.660
> 
> 标签：php, apache, permissions, permission-denied

如何以 root 用户身份在 Apache 中运行 PHP 文件？我尝试访问`http://localhost/test.php`，但它告诉我

> 您无权访问此服务器上的 /test.php。

我试图将 root 用户添加到 Apache 组，例如：

*   `gpasswd -a root apache`
*   `chgrp apache /var/www/html`
*   `chmpde g+w /var/www/html`

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T22:43:08.910

当没有足够的权限访问该文件时会发生该错误。

打开终端，然后键入以下命令：

```
chmod 644 /var/www/html/test.php 
```

您无需将权限设置为`root`.

# ruby-on-rails-3 - 基于记录的访问控制

> ID：12029374
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:36:18.867
> 
> 标签：ruby-on-rails-3

我想实现一个授权系统，该系统应该处理每个单独记录的权限。例如，用户 U1 可以读取记录 R1 用户 U2 可以编辑/删除记录 R1

即，每条记录都有自己的一组允许用户创建/读取/更新/删除。我不想实现基于角色的系统。是否有任何 rails gem/plugin 可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:43:07.040

[在这里](https://github.com/ryanb/cancan)查看 Ryan Bates 的 CanCan 。它还包括一个有用的截屏视频。

# c# - 如何检查用户是否属于 AD 组？

> ID：12029378
> 
> 赞同：63
> 
> 时间：2012-08-19T19:36:31.377
> 
> 标签：c#, .net, winforms, c#-4.0, active-directory

起初我认为下面的代码有效，因为如果我将组设置为“IT”，它会正常运行，因为我的用户名位于活动目录中的 IT 组中。我学到的是，无论我的用户名是否在 IT 组中，它总是返回 true，如果我将其更改为我所在的任何其他组，它返回总是返回 false。任何帮助，将不胜感激。

```
 private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        // tab control security for admin tab
        bool admin = checkGroup("IT");

        if ((admin == true) && (tabControl1.SelectedTab == tpHistory))
        {
            tabControl1.SelectedTab = tpHistory;
        }
        else if ((admin == false) && (tabControl1.SelectedTab == tpHistory))
        {
            tabControl1.SelectedTab = tpRequests;
            MessageBox.Show("Unable to load tab. You have insufficient privileges.",
                "Access Denied", MessageBoxButtons.OK, MessageBoxIcon.Stop);
        }
    }

    // check active directory to see if user is in Marketing department group
    private static bool checkGroup(string group)
    {
        WindowsIdentity identity = WindowsIdentity.GetCurrent();
        WindowsPrincipal principal = new WindowsPrincipal(identity);
        return principal.IsInRole(group);
    } 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-08-19T19:50:29.777

由于您使用的是 .NET 3.5 及更高版本，因此您应该查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "DOMAINNAME");

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

// find the group in question
GroupPrincipal group = GroupPrincipal.FindByIdentity(ctx, "YourGroupNameHere");

if(user != null)
{
   // check if user is member of that group
   if (user.IsMemberOf(group))
   {
     // do something.....
   } 
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-24T21:07:07.643

与@marc_s 示例略有偏差，在以下`static void Main()`方法中实现`Program`：

```
DomainCtx = new PrincipalContext( ContextType.Domain , Environment.UserDomainName );
if ( DomainCtx != null ) {
    User = UserPrincipal.FindByIdentity( DomainCtx , Environment.UserName );
} 
```

`DomainCtx`并且`User`都是在下面声明的静态属性`Program`

然后在其他形式中，我只是做这样的事情：

```
if ( Program.User.IsMemberOf(GroupPrincipal.FindByIdentity(Program.DomainCtx, "IT-All") )) {
    //Enable certain Form Buttons and objects for IT Users

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:44:16.797

你不能这样做。您应该查询活动目录。您可以为 AD 使用包装器。查看[http://www.codeproject.com/Articles/10301/Wrapper-API-for-using-Microsoft-Active-Directory-S](http://www.codeproject.com/Articles/10301/Wrapper-API-for-using-Microsoft-Active-Directory-S)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T02:44:53.157

检查当前用户是否在组中

```
public bool AuthenticateGroup(string groupfind)
        {
            var p = new Process();
            StringBuilder stringbd = new StringBuilder();
            p.StartInfo.FileName = "cmd.exe";
            p.StartInfo.Arguments = @"/c gpresult /V";
            p.StartInfo.CreateNoWindow = true;
            p.StartInfo.RedirectStandardError = true;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.RedirectStandardInput = false;
            p.StartInfo.UseShellExecute = false;
            p.OutputDataReceived += (a, b) => stringbd.AppendLine(b.Data);
            p.ErrorDataReceived += (a, b) => stringbd.AppendLine(b.Data);
            p.Start();
            p.BeginErrorReadLine();
            p.BeginOutputReadLine();
            p.WaitForExit();
            var textfind = stringbd.ToString();
            int findpoint = textfind.IndexOf("The user is a part of");
            string findgroup = "";
            if (findpoint > 0)
            {
                findgroup = textfind.Substring(findpoint, textfind.Length - findpoint);
            }

            return findgroup.Split('\n').ToList().Any(r=>r.Trim().ToLower()==groupfind.Trim().ToLower());
        } 
```

# excel - 将所有工作表从一个（已关闭）工作簿复制到另一个“

> ID：12029383
> 
> 赞同：4
> 
> 时间：2012-08-19T19:36:51.737
> 
> 标签：excel, vba

我正在尝试将所有工作表从一本书复制到另一本书

```
Windows("test.xls").Sheets.Copy Before:=Workbooks(ThisWorkbook).Sheets("00") 
```

错误类型不匹配！
“test.xls”与 ActiveWorkBook 位于同一文件夹中。
特别是 - 有没有办法在不打开“test.xls”的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T23:23:19.030

您可以打开关闭的工作簿（在后台打开比使用关闭的书籍要容易得多），然后将所有工作表从`Test.xls` 另一本书的特定部分（即工作表之前`00`）复制到一行

下面的代码：

*   打开一个关闭的工作簿`c:\temp\Test.xls")`
*   `00`复制包含代码的工作簿中工作表之前的所有工作表
*   关闭`Test.xls`

该代码抑制了 Test.xls 中的任何警报、代码事件和屏幕更新

```
Sub CopyAll()
Dim Wb1 As Workbook
Dim Wb2 As Workbook
With Application
.ScreenUpdating = False
.EnableEvents = False
.DisplayAlerts = False
End With
Set Wb1 = Workbooks.Open("c:\temp\Test.xls")
Set Wb2 = ThisWorkbook
Wb1.Sheets.Copy Before:=Wb2.Sheets("00")
Wb1.Close False
With Application
.ScreenUpdating = True
.EnableEvents = True
.DisplayAlerts = True
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T21:58:40.927

也许我想简单，但如果你想复制所有工作表，基本上你正在复制整个电子表格文件。以编程方式将“旧”工作簿另存为新名称会不会更容易？您将创建一个具有相同内容的全新文件。

也许我错过了一些东西，但这是看待它的另一个角度。

# python - Sublime Text 2 构建路径错误

> ID：12029384
> 
> 赞同：2
> 
> 时间：2012-08-19T19:36:54.850
> 
> 标签：python, build, path, sublimetext2

> **可能重复：**
> [如何更改构建配置以使 cmd 指向 python 解释器的实际位置？](https://stackoverflow.com/questions/12030746/how-do-i-change-my-build-configuration-so-that-cmd-points-to-actual-location-of)

我刚得到 Sublime Text 2，我喜欢它。当我尝试在其中运行 Python 时，出现错误：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'python', u'-u', u'C:\\Users\\Owner\\Desktop\\RandomStuff\\python\\rpg\\Characters.py']]
[dir:  C:\Users\Owner\Desktop\RandomStuff\python\rpg]
[path: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\Java\jdk1.7.0_03\bin]
[Finished] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:47:21.113

尝试`python`在命令行中输入...

# c# - 实体框架和 linq 到实体性能

> ID：12029385
> 
> 赞同：0
> 
> 时间：2012-08-19T19:37:01.980
> 
> 标签：c#, entity-framework, ado.net

我一直在研究将 Microsoft 的实体框架用于工作中的项目。我创建了一个简单的小数据层解决方案，它具有 IDataService 接口，因此我可以使用 Linq-to-Entity 编写标准 ADO.Net 实现和实体框架版本。

我创建了两个测试，它们请求完全相同的数据，但使用不同的实现。查询很简单，它们从表中检索数据，并使用层次结构信息生成一个 DTO，其中包含层次结构中的数据。

数据库中的数据大致如下

```
------------------------
ID  | Description
----|-------------------
1   | Item 1
2   | Item 2
3   | Item 3
4   | Item 4
5   | Item 5

----------------
Parent | Child  
-------|--------
1      | 2
1      | 3
3      | 4
1      | 5

Desired Output
--------------
Item 1
|-Item 2
|-Item 3
| |-Item 4 
|-Item 5 
```

因此，查询目前采用以下形式：

```
from a in tableA
join b in tableB on b.Parent equals a.ID
where b.Parent == root.ID
select new DTO.Entry {
  Id = a.ID
  ...
} 
```

包含此查询的方法将递归运行，直到没有更多子元素需要处理。

使用 Linq-to-entity 测试大约需要 320 毫秒才能完成，使用 ADO.Net 测试大约需要 8 毫秒！

这只是我必须忍受/考虑的事情，还是表现应该差不多？此外，由于底层数据结构没有参照完整性（我知道！），所以我在我的 ADO.Net 内容中对此进行了补偿，但我不能使用实体，这可能会产生影响吗？

目前看来，如果你想要性能，那么你应该坚持使用 ADO.Net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:48:06.313

问客户：您想要更高的性能还是更少的错误？

当然，普通的 ADO.Net 比同样使用 ADO.Net 的数据层表现得更好，但在此之前和之后的表现要好得多。此外，您选择了 EF 在效率方面不是很好的竞争对手的领域：递归查询。但一般来说，在编写正确、稳定且性能*可接受*的代码时，EF（或任何经验丰富的 OR 映射器）在 ADO.Net 上遥遥领先。它是手写 SQL 和数据驱动编程与 linq 和面向对象编程。

不过，你说得对

> 目前看来，如果你想要性能，那么你应该坚持使用 ADO.Net

当然，对于性能关键的操作或映射器往往有太多的内部开销来满足要求。并返回递归查询：没有什么比在数据库中使用 CTE 进行递归查询更好的了。

# javascript - 用Javascript制作乘法表

> ID：12029392
> 
> 赞同：0
> 
> 时间：2012-08-19T19:38:04.810
> 
> 标签：javascript, html

[JSFiddle](http://jsfiddle.net/3aSPm/1/)

我想做的是，做一个简单的乘法表。

如果值为“2”和“3”，那么它应该显示如下结果 -

```
2
4
6 
```

但是，相反，它显示 -

```
6 
```

谁能告诉我我哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:41:20.720

您正在覆盖`.innerHTML`每次迭代的属性。试试这个：

[http://jsfiddle.net/3aSPm/5/](http://jsfiddle.net/3aSPm/5/)

```
 var html = "";
    for (i = 0; i <= y; i++) {
        html += (x * i) + "<br>";
        console.log(x * i);
    };
    result.innerHTML = html; 
```

我之所以使用字符串，是因为 的可怕含义`+= innerHTML`，主要是它在每次迭代中重新序列化和重新解析所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:42:12.777

这里

```
for (i = 0; i <= y; i++ ) {
    result.innerHTML = x * i; 
```

您正在重写`result`每次迭代中的内容。

你应该`+`改为`+=`

```
for (i = 0; i <= y; i++ ) {
    result.innerHTML += x * i; 
```

或者，为了更好的格式化（如果你想要结果`x * 1`）

```
for (i = 1; i <= y; i++ ) {
    result.innerHTML += x * i + '<br />; 
```

# oracle - 查明集合是否由批量收集填充

> ID：12029399
> 
> 赞同：1
> 
> 时间：2012-08-19T19:38:53.867
> 
> 标签：oracle, plsql, oracle11g, oracle-type

我创建了一个这样的 oracle 对象类型：

```
CREATE OR REPLACE TYPE DFBOWNER."RPT_WIRE_IMPORT_ROWTYPE" AS OBJECT

(
REC_VALUE_DATE   DATE
)
/ 
```

然后是基于这种类型的集合：

```
CREATE OR REPLACE TYPE DFBOWNER."RPT_WIRE_IMPORT_TABLETYPE" IS TABLE OF RPT_WIRE_IMPORT_RowType;
/ 
```

现在，我使用 oracle bulk collect 将集合填充到过程中的语法中。所以现在我想测试集合是否真的被填充了，我不知道该怎么做。我试着查了一下：

[http://docs.oracle.com/cd/B28359_01/appdev.111/b28371/adobjcol.htm#autoId17](http://docs.oracle.com/cd/B28359_01/appdev.111/b28371/adobjcol.htm#autoId17)但我找不到我需要的东西。

我还有一个问题。当过程将数据批量收集到集合中时，集合中的数据是否像表中一样成为永久的？或者它是半永久性的......即只为会话而存在......就像在临时表中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:43:56.177

我怀疑你正在寻找`COUNT`方法，即

```
DECLARE
  l_local_collection dbfowner.rpt_wire_import_tabletype;
BEGIN
  SELECT sysdate + level
    BULK COLLECT INTO l_local_collection
    FROM dual
 CONNECT BY level <= 10;
  dbms_output.put_line( 'l_local_collection contains ' || 
                           l_local_collection.count || 
                           ' elements.' );
END; 
```

像任何局部变量一样，`l_local_collection`将具有声明它的块的范围。数据存储在会话的 PGA 中。集合中的数据不是永久的。

您可以从本地集合中选择

```
SQL> create type some_object as object (
  2    rec_value_date date
  3  );
  4  /

Type created.

SQL> create type some_coll
  2      as table of some_object;
  3  /

Type created.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_local_collection some_coll;
  3  begin
  4    select some_object( sysdate + numtodsinterval( level, 'day' ) )
  5      bulk collect into l_local_collection
  6      from dual
  7   connect by level <= 10;
  8    for x in (select * from table( l_local_collection ))
  9    loop
 10      dbms_output.put_line( x.rec_value_date );
 11    end loop;
 12* end;
SQL> /
20-AUG-12
21-AUG-12
22-AUG-12
23-AUG-12
24-AUG-12
25-AUG-12
26-AUG-12
27-AUG-12
28-AUG-12
29-AUG-12

PL/SQL procedure successfully completed. 
```

但是一般来说，将所有数据从 SQL VM 拉到 PL/SQL VM 中，然后将所有数据传回 SQL VM 以发出`SELECT`语句，通常是没有意义的。将数据保存在 SQL 中或定义流水线表函数以返回数据通常更有意义。

如果您只想遍历集合中的元素

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_local_collection some_coll;
  3  begin
  4    select some_object( sysdate + numtodsinterval( level, 'day' ) )
  5      bulk collect into l_local_collection
  6      from dual
  7   connect by level <= 10;
  8    for i in 1 .. l_local_collection.count
  9    loop
 10      dbms_output.put_line( l_local_collection(i).rec_value_date );
 11    end loop;
 12* end;
SQL> /
20-AUG-12
21-AUG-12
22-AUG-12
23-AUG-12
24-AUG-12
25-AUG-12
26-AUG-12
27-AUG-12
28-AUG-12
29-AUG-12

PL/SQL procedure successfully completed. 
```

迭代集合中的元素会更有意义，它将所有内容保存在 PL/SQL 中，而不是`SELECT`从集合中迭代，后者将所有数据强制返回 SQL VM。

# android - 我如何在安卓中做到这一点？

> ID：12029400
> 
> 赞同：-5
> 
> 时间：2012-08-19T19:39:20.927
> 
> 标签：android, slide, swipe, swipe-gesture

[http://iphone2020.wordpress.com/2012/06/10/uitableview-tricks/](http://iphone2020.wordpress.com/2012/06/10/uitableview-tricks/)

我非常绝望，需要一些帮助。请给我主意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:47:52.763

非常类似于[轮播视图实现，如列表视图滚动](https://stackoverflow.com/questions/9942443/carousel-view-implementation-like-listview-scrolling)，顺便说一句，这只是一个“轮播视图/布局”，我觉得它非常不可用。

# python - 为什么我的网络服务器有时只传输部分响应？

> ID：12029401
> 
> 赞同：2
> 
> 时间：2012-08-19T19:39:32.260
> 
> 标签：python, linux, network-programming, webserver

我有一段定制的网络服务器代码。它是使用[evnet 模块编写的。](http://pypi.python.org/pypi/evnet)

当从远程客户端请求时，似乎缩短了消息的长度。但是当我在同一台机器上使用它时，它似乎传递了完整的信息。我无法弄清楚问题可能是什么或如何诊断它。我使用网络浏览器对其进行了测试，`curl`并且`nc`. 从远程客户端请求时，它从未传递完整长度的消息。

[这](http://pastie.org/4551609)是我的网络服务器的简化版本，它仍然存在问题。我正在使用 Python 2.7.1 在 Ubuntu 11.04 上执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:46:27.037

您在调用`send()`发送一堆数据后立即关闭套接字。如果还有数据还在缓冲，当你关闭套接字时它会被丢弃。

相反，您应该调用[`shutdown(SHUT_WR)`](http://docs.python.org/library/socket.html#socket.socket.shutdown)套接字来告诉远程端您已完成发送。这称为 TCP“半关闭”。作为响应，另一端将关闭其一侧，并且您将收到套接字不再可读的通知。然后，并且只有在那时，您才应该关闭套接字句柄。

# ruby-on-rails - Rails 3.2.7：验证模型不超过数量限制（仅在创建时）

> ID：12029402
> 
> 赞同：1
> 
> 时间：2012-08-19T19:40:03.060
> 
> 标签：ruby-on-rails

在此示例中，我想将`Things`a的数量限制`Person`为 5：

```
class Person < ActiveRecord::Base
  has_many :things

  def things_limit_reached?
    self.things.count >= 5
  end
end 
```

并在返回 true`Thing`时将错误添加到新的：`person.things_limit_reached?`

```
class Thing < ActiveRecord::Base
  belongs_to :person
  validate :limit_check, :on => :create

  def limit_check
    errors.add :base, 'Things limit reached.' if person.things_limit_reached?
  end
end 
```

可悲的是，每当我尝试保存现有的时，上面的代码都会引发以下异常`Thing`，即使尚未达到限制：

```
SystemStackError (stack level too deep):
  actionpack (3.2.7) lib/action_dispatch/middleware/reloader.rb:70 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:57:13.550

它应该像这样工作（未经测试）：

```
class Thing < ActiveRecord::Base    
    belongs_to :person
    before_create :limit_check

    def limit_check         
      if person.things_limit_reached?
        errors.add :base, 'Things limit reached.'           
        return false
      end       
      return true
    end 
end 
```

# javascript - 将带有符号“'”的字符串变量传递给函数

> ID：12029403
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:40:15.273
> 
> 标签：javascript, objective-c, nsstring

我正在从我在 Objective C 中的代码调用一个 javaScript 函数，并传递一些字符串。字符串应该像这样传递 ('parm1','parm2')...

当我传递我的变量时，我无法将符号**'**添加到它们......我该如何传递它？我试过这段代码：

```
[webView stringByEvaluatingJavascriptFromString:@"myJSFunction(%@%@)", parm1, parm2]; 
```

结果是，`function myJSFunction(param1,param2);`但是当我检查了像**'parma'**这样的字符串在我的函数中起作用时......

所以我需要像这样通过它`myJSFunction('param1','param2');`

我怎样才能通过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:25:52.757

您必须将单个字符串传递给`stringByEvaluatingJavascriptFromString:`，它本身不会格式化字符串。所以首先你创建你的字符串，也许使用`[NSString stringWithFormat:]`然后将它传递给你的网络视图。这是它的外观示例：

```
NSString *js = [NSString stringWithFormat: @"myJSFunction('%@', '%@')", parm1, parm2];
[webView stringByEvaluatingJavascriptFromString: js]; 
```

# javascript - 打破封闭

> ID：12029407
> 
> 赞同：0
> 
> 时间：2012-08-19T19:40:44.853
> 
> 标签：javascript, ajax, xmlhttprequest, closures

我正在开发一个小型库/脚本，它将搜索文档正文`<div src="..."></div>`，从指定的 src（使用 XHR）检索内容并将内容插入到 div 中。在我继续之前，让我从编码中给你一个尝试：

```
function Include(ele) {
    this.ele = ele;
    this.xhr = new XHR();
    this.xhr.onload = (function(incObj){
        return function(){
            incObj.onload.call(incObj,this);
        }
    })(this);
    this.xhr.open("GET",ele.getAttribute("src"),false);
    this.xhr.send();
}

Include.prototype.XHR = function(){/* code to find a viable xhr object*/}
Include.prototype.onload = function(){/* stuff */}

var inc = new Include(document.getElementById("someId")); 
```

在每个 XHR 请求发生并处理内容之后，由于关闭，xhr 对象没有被销毁，导致创建的 Include 对象没有被销毁。这反过来又是内存泄漏。对于 a：很少包含请求，b：此类请求的内容很少，但随着包含的增加和响应内容的增加，您可以稳定地看到内存使用量增加。我将如何打破闭包（或使用不依赖于使用全局变量、obj 等的可行解决方法）来修复此泄漏？

（请不要建议使用库，即使我正在研究的是浏览器 js，我的问题更多地适用于 javascript 本身的工作原理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:48:28.017

你可以试试这个：

```
this.xhr.onload = (function(incObj){
    return function(){
        incObj.onload.call(incObj,this);
        incObj.xhr.onload = null;
    }
})(this); 
```

如果您有任何其他事件处理程序正在进行，那么当您不再需要该对象时，您也应该将它们处理掉。

# java - 导出带有资源的 jar

> ID：12029412
> 
> 赞同：3
> 
> 时间：2012-08-19T19:41:49.547
> 
> 标签：java, eclipse, jar

我正在尝试通过构建许多小型模块化项目来构建一个大型 Java 项目。我希望每个小项目都是完全独立的，拥有它的所有资源（例如图像）。

我正在使用 Eclipse。如果我配置构建路径以添加模块化项目之一，则资源引用不起作用。该系统找不到指定的文件。如果我导出一个 jar 并将其包含在配置构建路径的库选项卡中，也会发生同样的事情。

我做了一些实验，但还没有找到让它工作的方法。我尝试使用源文件夹获取资源并使用：

```
// this works if resource is located in package alongside class file, 
// not where I want it
getClass().getResourceAsStream("resource.abc") 
```

或者

```
new FileInputStream("path/to/resource.abc") 
```

也许我错过了有关项目结构的一些信息。我总是能够毫无问题地从 IDE 中的单个项目中获取资源来工作。当您开始链接多个项目或将它们包含为 jar 时，有什么不同？

我的理想结构是在我的项目根目录中拥有另一个与 src 文件夹处于同一级别的文件夹，该文件夹将包含我的所有资源，与源代码分开。这就是在尝试链接项目/罐子的所有麻烦之前的设置方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:03:45.453

这个解决方案对我有用：

```
/**
 *
 * @author David
 */
public class JavaApplication60 {
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    //http://img.viralpatel.net/java-cup-logo.png

    //located in a package not in the current one
    URL url = new JavaApplication60().getResource("/javaapplication60/newpackage/java-cup-logo.png");
    System.out.println(url.getPath());
    //located in same package
    url = new JavaApplication60().getResource("/javaapplication60/java-cup-logo.png");
    System.out.println(url.getPath());
}

public InputStream getResourceAsStream(String name) {
    name = resolveName(name, this.getClass());
    ClassLoader cl = getClass().getClassLoader();
    if (cl == null) {
        return ClassLoader.getSystemResourceAsStream(name); // A system class.
    }
    return cl.getResourceAsStream(name);
}

public java.net.URL getResource(String name) {
    name = resolveName(name, this.getClass());
    ClassLoader cl = getClass().getClassLoader();
    if (cl == null) {
        return ClassLoader.getSystemResource(name);  // A system class.
    }
    return cl.getResource(name);
}

/*
 * The resolveName method adds a package name prefix if the name is not
 * absolute, and removes any leading "/" if the name is absolute. It is
 * possible, though uncommon, to have classes in diffent packages sharing
 * the same resource.
 */
private String resolveName(String name, Object clazz) {
    if (name == null) {
        return name;
    }
    if (!name.startsWith("/")) {
        Class c = clazz.getClass();
        while (c.isArray()) {
            c = c.getComponentType();
        }
        String baseName = c.getName();
        int index = baseName.lastIndexOf('.');
        if (index != -1) {
            name = baseName.substring(0, index).replace('.', '/') + "/" + name;
        }
    } else {
        name = name.substring(1);
    }
    return name;
}
} 
```

我的包结构如下所示：

![我上面代码的包结构](../Images/a31bf1fea0124624f0646beaddb976bb.png)

**参考：**

*   [与位置无关的资源访问](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:00:05.873

要为您的资源添加另一个源文件夹，请首先创建该文件夹。在 java 透视图中，选择项目并从上下文菜单中选择“配置构建路径”。在源文件夹选项卡中，您可以使新创建的文件夹成为项目的源文件夹。从那时起，该文件夹下的所有资源都可以导出到带有项目类的 jar 中。

顺便说一句，如果资源与类在同一个包中，您为 getResourceAsStream 指定的路径要么只是资源文件名，要么是源文件夹中资源的相对路径名（以斜杠开头）使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T21:28:18.307

您有多个项目包含一个应用程序？因此，如果您通过 Eclipse 运行它，一切正常吗？
如果是，那么就在你的主项目中做`Export as Runnable Jar`. 这也应该有效

# iphone - 带蓝牙或免提的 CTCall

> ID：12029415
> 
> 赞同：0
> 
> 时间：2012-08-19T19:42:06.067
> 
> 标签：iphone, objective-c, ios

我正在寻找一种方法来检测是否使用免提设备拨打电话或用户正在拨打常规电话（没有连接任何外部设备）。我想我可以用 CoreBluetooth 间接做到这一点，但这不适用于 iPhone 4 和 3GS。我也不确定使用 AVAudioPlayer 类是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:44:22.260

好吧，我想回答自己，只是为了记录。无法直接知道是否通过蓝牙或任何其他方式拨打电话。但是您可以使用 AudioToolBox 框架（任何类型的音频）询问音频在哪里传输。这个脚本有很大帮助！

[https://github.com/Jawbone/AudioSessionManager](https://github.com/Jawbone/AudioSessionManager)

# objective-c - 从 UIWebView 中的缓存页面单击链接时如何显示连接错误？

> ID：12029418
> 
> 赞同：0
> 
> 时间：2012-08-19T19:42:31.250
> 
> 标签：objective-c, xcode, ios5

我正在开发一个应用程序，它带有一个`UIWebView`转到单个页面的应用程序——我们称之为它`http://myPage.com`——上面有几个链接。`UIAlertView`当用户第一次单击导致的 go-to-myPage 按钮时显示连接错误`http://myPage.com`是没有问题的。但是，如果没有连接并且用户单击 go-to-myPage 按钮，`UIAlertView`因为返回的缓存版本`http://myPage.com`返回 no，然后尝试跟随来自 的链接`http://myPage.com`，则没有任何反应。在这种情况下，如何重写或添加代码以显示警报？

这是我的代码：

```
-(void)loadWebViewWithbaseURLString:bus withURLString:us
{
self.request = [NSURLRequest requestWithURL:[NSURL URLWithString:us] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval: 20];
self.connection=[[NSURLConnection alloc] initWithRequest:self.request delegate:nil];
NSError *error=nil;
NSURLResponse *response=nil;
if (self.connection)
{
    self.urlData = [ NSURLConnection sendSynchronousRequest: self.request returningResponse:&response error:&error];
    NSString *htmlString = [[NSString alloc] initWithData:self.urlData encoding:NSUTF8StringEncoding];
    [self.webV loadHTMLString:htmlString baseURL:[NSURL URLWithString:bus]];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] init];
    alert.title = @"Unfortunately, I seem to be having a hard time connecting to the Internet.  Would you mind trying again later?  I'll make it worth your while, I promise.";
    [alert show];
}
} 
```

当然，go-to-myPage 代码只是`-(void)loadWebViewWithbaseURLString:bus withURLString:us`使用特定的 URL 作为参数进行调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:52:31.277

[我在NSURLRequest cachePolicy 和 UIWebView 中的连接中](https://stackoverflow.com/questions/12102017/nsurlrequest-cachepolicy-and-connection-in-uiwebview)以更清晰（我希望）的方式问了这个问题，最终我自己弄清楚了，所以我发布了答案......

# knockout.js - knockout.js - 映射插件 - 如何添加 ko.computed 函数

> ID：12029422
> 
> 赞同：3
> 
> 时间：2012-08-19T19:43:18.630
> 
> 标签：knockout.js

我试图让它发挥作用，但没有做正确的事情。我正在使用淘汰赛，获取 json 响应并将其映射到结帐车，我无法做的是在添加产品价格总和之后添加一个函数。请参阅下文了解我正在尝试做的事情，

完整的小提琴在这里.. [http://jsfiddle.net/justayles/Jeaua/26/](http://jsfiddle.net/justayles/Jeaua/26/)

```
var jsonCart = {
    "globalshipping": 1.00,
    "globaltax": 5.00,
    "productitem": [
    {
        "img": '/Content/img/notavailable.jpg',
        "produrl": 'http://www.google.com',
        "prodtitle": 'Product1',
        "opt1": 'colour',
        "opt2": 'size',
        "qty": 3,
        "unitprice": 10.00,
        "shippingcost": 0.00,
        "like": true,
        "likediscount": 10,
        "taxable": true
    },
    {
        "img": '/Content/img/notavailable.jpg',
        "produrl": 'http://www.google.com',
        "prodtitle": 'Product1',
        "opt1": 'colour',
        "opt2": 'size',
        "qty": 1,
        "unitprice": 33.00,
        "shippingcost": 0.00,
        "like": false,
        "likediscount": 0,
        "taxable": false
    },
    {
        "img": '/Content/img/notavailable.jpg',
        "produrl": 'http://www.yahoo.com',
        "prodtitle": 'Product1',
        "opt1": 'colour',
        "opt2": 'size',
        "qty": 5,
        "unitprice": 21.00,
        "shippingcost": 0.00,
        "like": true,
        "likediscount": 10,
        "taxable": true
    }
    ]
};

var mappingOptions = {
    'productitem': {
        // overriding the default creation / initialization code
        create: function (options) {

            return (new (function () {

                // setup the computed binding
                this.calcPrice = ko.computed(function () {
                    return this.unitprice() * this.qty();
                }, this);

                ko.mapping.fromJS(options.data, {}, this);
            })(/* call the ctor here */));
        }
    }
};

var viewModel = ko.mapping.fromJS(jsonCart, mappingOptions );

viewModel.grandTotal = ko.computed(function() {
    var result = 0;
    ko.utils.arrayForEach(this.productitem, function(item) {
        result += item.calcPrice;
    });
    return result;
}, viewModel);

console.log(viewModel);

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:44:43.787

固定：http: [//jsfiddle.net/Jeaua/27/](http://jsfiddle.net/Jeaua/27/)

你忘记了你的`productitem`和`calcPrice`可观察的括号。请记住，`ko.mapping`将数组转换为可观察的数组，将值转换为可观察的值。这些需要作为函数调用才能检索它们的实际值。

```
viewModel.grandTotal = ko.computed(function() {
        var result = 0;
        ko.utils.arrayForEach(this.productitem() /* parentheses */, function(item) {
            result += item.calcPrice(); /* parentheses */
        });
        return result;
}, viewModel); 
```

# php - SublimeText2 代码英特尔 Mac 问题

> ID：12029423
> 
> 赞同：1
> 
> 时间：2012-08-19T19:43:33.630
> 
> 标签：php, python, osx-lion, sublimetext2

我安装了 Package Browser 并安装了 CodeIntel 自动完成代码，但是当我尝试在控制台中索引我的代码时显示此错误。

```
Traceback (most recent call last):
  File "./sublime_plugin.py", line 356, in run_
  File "./SublimeCodeIntel.py", line 878, in run
  File "./SublimeCodeIntel.py", line 233, in guess_lang
  File "./SublimeCodeIntel.py", line 475, in codeintel_manager
  File "/Users/josedx20/Library/Application Support/Sublime Text 2/Packages/SublimeCodeIntel/libs/codeintel2/manager.py", line 155, in upgrade
    self.db.upgrade()
  File "/Users/josedx20/Library/Application Support/Sublime Text 2/Packages/SublimeCodeIntel/libs/codeintel2/database/database.py", line 516, in upgrade
    % curr_ver)
codeintel2.common.DatabaseError: cannot upgrade from db v2.0.24: no upgrader for this version 
```

任何的想法？我是 MacOSX Lion 的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:30:07.003

升级您的 SublimeCodeIntel 副本。在终端类型中：

```
cd ~/Library/Application Support/Sublime Text 2/Packages/SublimeCodeIntel
git pull 
```

并重新启动您的 Sublime 编辑器。最新版本支持 2.0.24 版本。

不确定您的数据库是如何升级的，因为您的 SublimeCodeIntel 副本较旧；也许您运行了 Komodo IDE 的副本？它也使用codeintel；事实上，这就是 codeintel 的由来。

# objective-c - 弹出时将数据返回到上一个视图控制器

> ID：12029424
> 
> 赞同：0
> 
> 时间：2012-08-19T19:43:35.633
> 
> 标签：objective-c, cocoa-touch

我想在弹出时将数据发送回我的主视图

```
-(IBAction)addPartToBuild:(id)sender{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

我可以使用发件人：数据吗？我试过了，但我得到了一个“没有@interface”的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:58:10.753

您正试图搞乱 MVC（模型视图控制器）理念，视图控制器必须负责 UI 处理。

您需要构建负责数据存储的数据模型和数据控制器。然后，您可以添加通知或将数据更改事件委托给您的根或任何其他视图控制器，这将易于阅读并且您将获得所有 MVC 好处。

这一定很简单

```
[[MyDataManager sharedInstance] addPartToBuild:newPart];
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

并且根视图控制器应该在每次显示从数据控制器获取更改的数据时完全捕获数据更改通知、委托消息或完全捕获 UI。

* * *

可能误解了这个问题，如果您需要知道哪个控件触发了该操作，那`id sender`就是该控件引用，例如，如果您将操作链接到 UIButton 发送者将是 UIButton 引用（您可以检查它`[sender isKindOfClass:[UIButton calss]]`然后获取任何需要UIButton 的属性，就像您可以为多个按钮分配相同的操作并检查按钮标记以决定要做什么，请检查调解器模式以获取详细信息）。

# .net - WCF 和套接字数据处理 - 异常数据通知模块（ASP.NET MVC 3 + EF 4.0 + LINQ + WCF 4.0 + 套接字 + SQL Server 2008 R2 + Azure）

> ID：12029426
> 
> 赞同：0
> 
> 时间：2012-08-19T19:43:41.060
> 
> 标签：.net, asp.net-mvc-3, wcf, sockets, azure

### 业务场景：

想象一下有**Construction**。施工可以是新建筑、桥梁等。**施工场地**上可能会发生各种物理和环境变化。这些变化可能是例如温度变化。

我们为我们的客户构建了应用程序，该应用程序从施工场收集不同类型的数据，然后用于：

1.  显示时间变化图表
2.  为施工经理和其他决策者提供见解、警报和通知

### 当前状态：

应用程序已构建并正在运行。

1.  广告。1 - 收集所有数据并使用图表进行可视化
2.  广告。2 -**我们仍在为这个模块的正确设计而绞尽脑汁**

### 问题：

> 如何正确设计使用 WCF 服务和套接字进程收集数据的异常数据通知模块？

### 整体架构设计：

![架构设计](../Images/557c4f66e6fd3db4b0013f03870dbcc3.png)

我们的难题有 4 个主要部分：

1.  后端数据库 - SQL Server 2008 (Azure SQL)
2.  前端 Web 应用程序 - ASP.NET MVC 3（Azure 的 WebRole）。
3.  由向我们发送数据的 ZigBee 设备调用的 WCF 4.0 服务（Azure 的 WebRole）。
4.  Windows 进程使用 Socket IP（用于 Azure 的 WorkerRole）以配置的频率调用 Rfid 读取器。

在数据库中，我们有 2 个单独的表格用于 Rfid 读数和 ZigBee 读数。为了性能，存储结果的表被刻意去规范化：通过多个索引进行更快的查询和分组。我们在前端应用程序中使用 Entity Framework 和带有 Projection 的 Linq 进行数据访问，它运行良好。

### 异常数据通知模块：

我们的通知模块功能要求是：

1.  在以下情况下，向特定施工场地的通知订阅者发送短信和电子邮件：
2.  测量数据的值高于阈值 x 出现次数
3.  参数有：最小值、最大值、阈值、重复次数、重复时间窗口、传感器类型

例如，我们为特定的施工场地添加了通知/警报。此警报已配置：

*   最小值 = -5
*   最大值 = 40
*   阈值 = 5
*   重复次数 = 5
*   重复时间窗口 = 5min
*   传感器类型 = 温度

所以现在当 ZigBee WCF 或 Rfid Windows Process 获取数据时，可以触发通知/警报。例如：

*   日期：2012-08-19 10:00 值：30 OK
*   日期：2012-08-19 10:01 值：28 OK
*   日期：2012-08-19 10:02 值：40 OK（仍低于 Max + Threshold）
*   日期：2012-08-19 10:03 值：41 OK（仍低于 Max + Threshold）
*   日期：2012-08-19 10:04 值：39 OK
*   日期：2012-08-19 10:05 值：46 OK（高于阈值，重复计数 1）
*   日期：2012-08-19 10:06 值：39 OK
*   日期：2012-08-19 10:07 值：38 OK
*   日期：2012-08-19 10:08 值：39 OK
*   日期：2012-08-19 10:09 值：38 OK
*   日期：2012-08-19 10:10 值：39 OK
*   日期：2012-08-19 10:11 值：38 OK（上次异常发生 > 重复时间窗口，重复计数 0）
*   日期：2012-08-19 10:12 值：41 OK（仍低于 Max + Threshold）
*   日期：2012-08-19 10:13 值：46 OK（高于阈值，重复计数 1）
*   日期：2012-08-19 10:14 值：47 OK（高于阈值，重复计数 2）
*   日期：2012-08-19 10:15 值：46 OK（高于阈值，重复计数 3）
*   日期：2012-08-19 10:16 值：47 OK（高于阈值，重复计数 4）
*   日期：2012-08-19 10:17 值：46 OK（高于阈值，重复计数 5）-> ALERT！

### 架构设计要求：

> 所有逻辑都必须在业务层内，这意味着我们不能使用存储过程和触发器

### 可能的解决方案1：

我们的第一个想法是为 ZigBee 和 Rfid 服务附加模块逻辑，但这可能会导致性能堵塞。如果我们调用 DB 最后检查 Service 的每个请求，我们会生成大量计算事务，这些事务甚至可能以死锁结束。我们可以在这里使用 WCF 队列机制，但是我们仍然看不到任何可以解决此问题的好处。

对此解决方案的任何建议表示赞赏。

### 可能的解决方案2：

第二个想法是部署另一个 Windows 进程，该进程将在后台以配置的频率扫描数据库，如果发生“高于阈值”，则将此信息保存到单独的“缓存”表中，并在数据库中“标记”已检查特定的该行通知/警报。所以以后它不会被添加到扫描中。

这意味着：

1.  另一个“缓存”表
2.  我们将“扫描仪”配置为 30 分钟频率的传递通知/警报的延迟
3.  为“特定通知”“标记”行的某种方式，我们不能简单地添加 Bool 标志，因为许多定义的通知可能会计算 1 行的读数（建筑场的 3-4 个通知）
4.  有多少“流程”、“后台工作人员”应该同时工作？与现有通知配置相同，或者所有通知配置一个，使用堆栈？

对此解决方案的任何建议表示赞赏。

### 结论：

如果您有任何想法、经验、了解现有解决方案 (dll)、处理此类问题的模式并与我们分享，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:01:38.780

您应该`Topics`在**Windows Azure Service Bus**中查看其他解决方案。由于您实际上是在谈论来自传感器/设备的数据，我建议您阅读 Clemens Vasters 在 MSDN 杂志中的文章：[使用 Windows Azure 服务总线处理……事物！](http://msdn.microsoft.com/en-us/magazine/jj133819.aspx)

![在此处输入图像描述](../Images/ac21eadea7de75127796028de17dc364.png)

开，您正在谈论在数据库中存储非规范化。为什么不使用表存储呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:58:00.450

你说“如果你有任何想法”，那么就到这里吧。希望不会离题。。

从图表和描述看来，每个应用程序/数据接收器都直接写入数据库。如果您将数据库放在接收器推送数据并通过前端发送警报规范的专用应用程序后面，您可以在将数据保存到数据库时实时更新警报信息。也就是说，您将存储每个警报的状态，并在新的“有趣”值出现时进行更新。这样您就不必标记数据。这是不断更新的警报。当最终触发警报时，您会启动一些异步进程以发送该警报的通知。

这类似于 sagas 使用消息传递的想法。

# c# - StreamReader(string) 在 .NET 4.5 for Metro 中应该存在时不存在吗？

> ID：12029428
> 
> 赞同：9
> 
> 时间：2012-08-19T19:43:52.413
> 
> 标签：c#, .net, windows-8, microsoft-metro, visual-studio-2012

根据：http: [//msdn.microsoft.com/en-us/library/windows/apps/system.io.streamreader.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.streamreader.aspx)

并且：http: [//msdn.microsoft.com/en-us/library/windows/apps/f2ke0fzy.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/f2ke0fzy.aspx)

证明这是 Metro 参考的 .NET：http: [//msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)

有一个用于指定文件路径的构造函数。然而在 Object Broswer 和元数据中它并不存在。

显然，所有用于 Metro 的 .NET 都在“参考”选项卡中引用。

我只是想从项目文件夹中访问一个 txt 文件，仅此而已。如果有人有替代方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T20:02:20.497

“这是 WinRT 的根本变化之一。你不能再在任何你想要的地方写入文件，你必须使用隔离存储。你需要使用带有 await 关键字的异步 I/O。”

此链接应为您提供有关如何访问项目文件夹中文件的必要信息。链接在这里：

[http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html](http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html)

# visual-studio-2012 - VS2012 中是否可以为 Metro 风格的应用程序提供代码覆盖率？

> ID：12029433
> 
> 赞同：5
> 
> 时间：2012-08-19T19:45:10.290
> 
> 标签：visual-studio-2012, microsoft-metro, windows-runtime, code-coverage

我正在使用 Windows 8 Pro 和 Visual Studio 2012 Ultimate（都是 RTM）。

我创建了一个 Metro 风格的类库，然后创建了一个相应的单元测试库。两者都针对 WinRT（不是 .NET 框架）。

我可以很好地运行单元测试，但是当我尝试“分析所有测试的代码覆盖率”时，输出窗口会显示重建的结果，仅此而已。代码覆盖结果窗口全部变灰。

从网上阅读中，有些人暗示没有为 WinRT 程序集启用代码覆盖率，但我无法确认。我也尝试过创建一个 .testsettings 文件，就像 VS2010 中需要的那样，并明确打开代码覆盖率，我得到了相同的结果。

任何人都可以确认或否认代码覆盖率不适用于 VS2012 RTM 中针对 WinRT 的程序集吗？我只是想弄清楚我是否缺少某些设置-或者是否不可能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:25:40.473

由于 WinRT 应用程序的沙盒特性，现阶段不可能。

PS 它在团队希望在不久的将来解决的问题列表中（不，我没有时间表）

# php - 同名会话冲突

> ID：12029435
> 
> 赞同：1
> 
> 时间：2012-08-19T19:45:11.380
> 
> 标签：php, session

我的服务器上有 2 个应用程序，每个都使用 $_SESSION['user']。如果我登录到一个应用程序，我会自动登录到另一个应用程序。问题是两个会话使用不同的 ID，所以我自动登录到我的合作伙伴帐户。如何在不更改会话名称的情况下防止这种情况发生。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-29T06:50:19.420

利用

```
session_name('ses_mysite');

session_start(); 
```

它为我工作:)

或使用

```
session_set_cookie_params(); 
```

# android - Android SQLite CursorWindowAllocationException 崩溃

> ID：12029437
> 
> 赞同：5
> 
> 时间：2012-08-19T19:45:35.750
> 
> 标签：android, android-cursor

当我发出多个 cursor.moveToNext() 请求时，我的程序崩溃了。错误消息如下：

```
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=773 (# cursors opened by this proc=773)
at android.database.CursorWindow.<init>(CursorWindow.java:112)
at android.database.CursorWindow.<init>(CursorWindow.java:100)
at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)
at android.database.sqlite.SQLiteCursor.clearOrCreateWindow(SQLiteCursor.java:364)
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:162)
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
at android.database.AbstractCursor.moveToNext(AbstractCursor.java:209)
at net.cunniman.teacherplannerlite.SchoolClassDataSource.getClassForDayView(SchoolClassDataSource.java:173)
at net.cunniman.teacherplannerlite.DayView.getSchoolClasses(DayView.java:200)
at net.cunniman.teacherplannerlite.DayView.displayDate(DayView.java:176)
at net.cunniman.teacherplannerlite.DayView.plusDay(DayView.java:287)
at net.cunniman.teacherplannerlite.DayView.onClick(DayView.java:93)
at android.view.View.performClick(View.java:3565)
at android.view.View$PerformClick.run(View.java:14165)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

```
try {
    this.openForRead();
    for (int day_counter = 0; day_counter < DAY_PERIOD.length/2; day_counter++)
    {
        Cursor cursor = database.rawQuery
            ("SELECT " + NAME + " FROM " + TABLE_NAME + " WHERE " + DAY_PERIOD[day_counter * 2]
            + " = '" + day + "' AND " + DAY_PERIOD[day_counter * 2 + 1] + " = "
            + Integer.toString(period), null);

    while (cursor.moveToNext())
    {
        String name = cursor.getString(0);
        sc.setName(name);
    }

} finally {
    this.close();
} 
```

有谁知道可能导致这种情况的原因 - 似乎是内存泄漏（也许？）但是有没有办法可以防止它发生？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T22:40:23.387

大多数情况下，此错误的原因是未关闭的游标。确保在使用它们后关闭所有游标（即使在出现错误的情况下）。

```
Cursor cursor = null;
try {
    cursor = db.query(...
    // do some work with the cursor here. i.e.:
    while (cursor.moveToNext())
    { .... }
} finally {
    // this gets called even if there is an exception somewhere above
    if(cursor != null)
        cursor.close();
} 
```

# events - 夏令时和事件 API

> ID：12029439
> 
> 赞同：0
> 
> 时间：2012-08-19T19:46:19.943
> 
> 标签：events, facebook-graph-api

我知道 API 返回转换为 ISO-8601的时间（[通过一个非常复杂的过程）。](https://stackoverflow.com/questions/4552204/time-stamp-issue-while-adding-event-in-facebook-using-graph-api)我的问题是，是否在考虑给定位置的当地夏令时（或不考虑）的情况下进行转换？[官方文档](https://developers.facebook.com/docs/reference/api/event/)对此只字未提。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:36:37.353

我周五刚做这个。

我可以确认，如果您启用了事件时区迁移，则返回的 ISO-8601 日期会针对事件开始/结束时间存在/不存在夏令时进行更正。

# c++ - 引用对象不明确？

> ID：12029441
> 
> 赞同：0
> 
> 时间：2012-08-19T19:46:29.233
> 
> 标签：c++

这是我的程序，由于此错误而失败：对“异常”的引用不明确。

这是为什么？

是因为我的类名是“exception”，而 C++ 已经有其他使用名称“exeption”的函数了吗？例如，在 C++ 中，我们不能使用“int”作为变量。这个逻辑在这里也适用吗？谢谢你。

```
#include <iostream>
#include <math.h>

using namespace std;

class exception{

public:
    exception(double x,double y ,double z)
    {
    cout<<"Please input a";

    cin>>x;
    cout<<"Please input b";

    cin>>y;
    cout<<"Please input c";

    cin>>z;

    a=x;
    b=y;
    c=z;
    /*
    try{
        int sonsAge = 30;
        int momsAge = 34;
        if ( sonsAge > momsAge){
            throw 99;
        }
    }
    catch(int x)
    {
        cout<<”son cannot be older than mom, Error number :”&lt;<x;
    }
    */
    try {
        if (a==0) {
            throw 0;
        }
        if ((b*b)-(4*a*c)<0) {
            throw 1;
        }
        cout<<"x1 is"<<(-b+sqrt(b*b-4*a*c))/(2*a)<<endl
            <<"x2 is"<<(-b-sqrt(b*b-4*a*c))/(2*a);
    } catch (int x) {
        if (x==0) {
            cout<<"Error ! cannot divide by 0";
        }
        if (x==1) {
            cout<<"The square root cannot be a negative number";
        }
    }
    };

private:
    double a,b,c;
};

int main()
{
    exception ob1(3.2,12.3,412);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:49:51.420

`std::exception`是标准的类名；它是标准异常层次结构的基本类型。您可以通过将其限定为 来命名您自己的类`::exception`。这是不使用`using namespace std`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:50:43.953

通过该语句`using namespace std`，`std::exception`该类被解析为`exception`. 现在您定义一个具有相同名称的类。编译器现在无法通过名称区分这两个类`exception`。所以这个名字`exception`是模棱两可的。定义引用`std::exception&`应该可以工作，因为您可以准确地告诉编译器要使用哪个类。

# box-api - 使用 curl 代替浏览器获取 auth_token

> ID：12029444
> 
> 赞同：0
> 
> 时间：2012-08-19T19:46:34.430
> 
> 标签：box-api

查看： http: [//developers.box.com/get-started/#authenticating](http://developers.box.com/get-started/#authenticating)步骤#2 我正在尝试使用 curl 输入凭据（用户/电子邮件/密码）以获取 auth_token。我宁愿这样做，而不是将用户引导到他们的浏览器，因为我正在制作一个用于同步的脚本。

有人知道我该怎么做吗？我可以用 curl 做一个 POST 吗？我正在使用 API 的 v2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:14:16.837

不幸的是，您必须通过网页发送用户。但是，由于您正在编写脚本，因此您还应该知道当前系统下的 auth_tokens，因此您可以手动检索一个并将其包含在您的脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:35:24.923

只有一件事需要注意。如果您不使用通过 Box web ui 的标准身份验证流程，那么所有用户都使用 SSO（Active Directory 和类似）登录名登录的 Box 大客户将不是您的客户。

因此，基本上，如果您希望您的应用程序被企业级客户使用，那么请遵循 Box 提供的构建指南。

# c# - C#屏幕刮板按顺序抓取值

> ID：12029446
> 
> 赞同：0
> 
> 时间：2012-08-19T19:46:46.897
> 
> 标签：c#, asp.net

我将网页的内容加载到字符串中。我要提取的唯一值是这样的：

```
>1<    >Goons<
>2<    >Worms<
>3<    >Hampsters<
>4<    >Clouds< 
```

数值总是按顺序排列的，但是团队名称会每天更改...我想提取每个团队的排名并将它们存储到数据库中。

到目前为止，我编写了一个将传入 URL 的函数：

```
 protected void HandleURL(string teamsURLFile)
    {
        string searchValue = null; 

        string[] teams = new string[32] { "BirdDogs","Piegons","Ducks","Badgers","Clouds","Ghosts","Clowns","Kitties",
                                          "Socks","Farrets","Lions","Chumps","HillBillys","Goons","Dragons","Hampsters",
                                          "Fish","SeaBirds","Snakes","Mules","Spiders","Goats","Worms","Bafoons",
                                          "Magpies","Donkeys","65ers","Rockts","Rams","Hampsters","Tubbies","Plumpers"};

        for (int i = 0; i < 32; i++)
        {
            if (teamsURLFile.Contains(">" + i + "<"))
            {
                foreach (string teamName in teams)
                {

                }
            }
        }

    } 
```

关于如何提取与排名相关的团队名称的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:36:20.713

这样做： -

```
for (int i = 0; i < 32; i++)
        {
           string val=">" + i + "<";
           int start= teamsURLFile.IndexOf(val);               
           start = s.IndexOf(">",start+val.length);
           int end = s.IndexOf("<",start);
           string team= s.Substring(start, end - start -1);
           //do whatever you want to do with team  

        } 
```

# qt - 如何使用 QGroupBox 代替 QButtonGroup

> ID：12029448
> 
> 赞同：6
> 
> 时间：2012-08-19T19:47:07.373
> 
> 标签：qt, button, qt4.7, qgroupbox, qbuttongroup

我试图弄清楚如何使用 QGroupBox 小部件代替 QButtonGroup 小部件，因为 qt 文档（下面的链接）“强烈建议不要使用它”。

[https://doc.qt.io/archives/qt-4.7/q3buttongroup.html](https://doc.qt.io/archives/qt-4.7/q3buttongroup.html)

QButtonGroup 有一个方便的方法称为`QtGui.QButtonGroup.checkedButton()`，我正在寻找一种方法来找到 QGroupBox 中包含的选中单选按钮。新的最佳实践是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T20:48:18.403

QButtonGroup 仍然存在并且正在使用，只是它的实现发生了变化，不再是一个 Widget。在 qt 设计器中，QButtonGroup 不再在小部件菜单中，您现在选择要与组关联的按钮并右键单击以添加 QButtonGroup。

# android - 用于 在安卓布局中

> ID：12029449
> 
> 赞同：2
> 
> 时间：2012-08-19T19:47:07.840
> 
> 标签：android, android-layout, user-interface

在andorid ui中有什么用，`<Space />`和空的linearlayout有什么区别。

`<Space>`在 android 中有什么特殊用途吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:54:52.990

[从文档](http://developer.android.com/reference/android/widget/Space.html)：

> Space 是一个轻量级的 View 子类，可用于在通用布局中创建组件之间的间隙。

是的，它与 LinearLayout 的不同之处在于它不能完成 LinearLayout 可以做的所有（任何）事情。它的目的仅仅是在某些事物之间增加一个差距。通过去掉所有的 LinearLayout 功能，它使视图“更轻”，这意味着更少的资源密集型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:58:22.010

`Space`用于定义布局内的空白空间（或间隙）。

它在 API 级别 14 中与`GridLayout`.

要了解它的全部内容，请查看本[教程](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:02:42.737

通常可以将一个复杂的布局分解为一组嵌套的线性布局，如果这种嵌套不会太深，这对于许多简单的布局来说仍然是一个不错的选择。

用于太深且存在性能问题的层次结构，是一个轻量级的 View 子类。关键字是“轻量级”。

# c++ - VI 识别 C++11 关键字

> ID：12029453
> 
> 赞同：11
> 
> 时间：2012-08-19T19:47:21.543
> 
> 标签：c++, c++11, vi

> **可能重复：**
> [是否有用于 vim 的 C++11 语法文件？](https://stackoverflow.com/questions/2977174/is-there-a-c11-syntax-file-for-vim)

我如何更新我的`VI`设置以识别（并适当地突出显示）新标准带来的新关键字。

例如：

![在此处输入图像描述](../Images/d258fedba21b23630ab2f52cfa349211.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T19:49:32.757

有人已经为 C++11 编写了一些语法文件：http: [//www.vim.org/scripts/script.php](http://www.vim.org/scripts/script.php?script_id=3797) ?script_id=3797 。它甚至使初始化列表和 lambda 可以正常工作，而 vim 不会认为 curlies 是错误的。

我记得我必须手动添加一些缺少的关键字，但这并不是非常复杂（只需 grep 文件中的其他关键字并添加新关键字）。我当前的设置在[GitHub 上](https://github.com/rmartinho/vim-cpp11)。如果您使用的是 vundle，则可以使用`Bundle 'rmartinho/vim-cpp11'`.

# java - 在 netbeans 中运行时的特殊字符正确显示，但在运行“jar”文件时出现奇怪的字符

> ID：12029455
> 
> 赞同：1
> 
> 时间：2012-08-19T19:47:26.887
> 
> 标签：java, netbeans, jar, special-characters

似乎是一个简单的问题，但即使在搜索论坛和网络后，我也找不到答案。

当我在 netbeans 中运行我的程序时，所有特殊字符（如**ä、ö、ü**）都正确显示。但是当我运行同一个项目的“jar”文件（我确实清理并重建）时，出现了一些奇怪的字符，如**@A &$**等等，而不是正确的字符。任何帮助，将不胜感激。

//edited 22\. 08\. 2012 00:46
我认为解决方案会更容易，所以我没有发布任何代码或细节。好吧：

```
//input file is in UTF-8
try {
  BufferedReader in = new BufferedReader(new FileReader("fin.dir"));
  String line;
  while ((line = in.readLine()) != null) {
    processLine(line, 0);
  }
  in.close();
} catch (FileNotFoundException ex) {
  System.out.println(ex.getMessage());
} catch (IOException ex) {
  System.out.println(ex.getMessage());
} 
```

我以这种方式显示字符：

```
JOptionPane.showMessageDialog(rootPane, "Correct!\n\n" 
  + testingFin.getWord(), "Congrats", 1);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:55:06.017

从描述`FileReader`：

> 读取字符文件的便利类。此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的。要自己指定这些值，请在 FileInputStream 上构造 InputStreamReader。

如果您使用的是 Windows，则默认编码为 ISO-8859-1，因此正如 Jon 评论的那样，编码问题发生在输入上。试试这个：

```
in = new BufferedReader(
    new InputStreamReader(new FileInputStream("fin.dir"),"UTF-8")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:59:36.340

在 YOURNETBEANS/etc/netbeans.conf 下添加您的 netbeans 设置，如下所示；

```
 -J-Dfile.encoding=UTF-8 
```

# node.js - 将数据写入 Node 中的套接字

> ID：12029462
> 
> 赞同：1
> 
> 时间：2012-08-19T19:48:01.443
> 
> 标签：node.js

写入套接字时，我得到了一个奇怪的结果。我用客户端和服务器编写了一个简单的实验：

服务器.js

```
var net = require('net');
net.createServer(function (connection) {
  connection.on('data', function (data) {
    console.log('data: ' + data);
  });
}).listen(1337); 
```

客户端.js

```
var net = require('net');
var client = net.connect({port: 1337}, function () {
  var i = 0;
  function send() {
   client.write('a');
    if (++i < 100) {
      process.nextTick(send);
    } else {
      client.end();
    }
  }
  send();
}); 
```

我希望服务器显示 100 行`data: a`，但我最终得到的`data: aaaaaaa`行数较少。这`socket.setNoDelay()`似乎是我想要的，但它似乎没有任何效果。

我错过了什么？

非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:56:20.693

TCP 协议仅发送您在套接字中写入的字节。它们不会被分成消息，这取决于你。如果您想获得 100 行，`a`则必须定义 100 条单独的消息，并为它们选择一个分隔符。通常人们通过`\r\n`.

因此，您需要将服务器更改为

```
var net = require('net');
net.createServer(function (connection) {
  connection.on('data', function (buffer) {
    var data = buffer.toString();
    if (data.indexOf('\r\n') > -1) { // If there's more than one line in the buffer
        var lines = data.split('\r\n'); // Split the lines
        var i = lines.length;
        while (i--) { // This will read your lines in reverse, be careful
            console.log(lines[i]);   // Print each line
        }
    } else {
        console.log(data); // If only one line came through, print it
    }
  });
}).listen(1337); 
```

和你的客户

```
var net = require('net');
var client = net.connect({port: 1337}, function () {
  var i = 0;
  function send() {
   client.write('a\r\n'); // Notice the \r\n part. This is what will help you separate messages on the server
    if (++i < 100) {
      process.nextTick(send);
    } else {
      client.end();
    }
  }
  send();
}); 
```

然后我相信你会得到 100 行`a`.

[这个模块](https://github.com/pkrumins/node-lazy)还提供了一种非常有趣的方法，当然[ZeroMQ](http://zguide.zeromq.org/js%3ahwclient)也会在这方面大放异彩，因为它已经有一个很好的协议，可以将东西放入信封并发送它们。

同样有趣的是，但超出了您的问题范围，您发送到一侧套接字的消息将不会以相同的顺序到达服务器。如果您将发送功能更改为

```
 function send() {
    if (++i < 100) {
      client.write('a'+i+'\r\n');
      process.nextTick(send);
    } else {
      client.end();
    }
  } 
```

您可以看到它们不是按照您发送它们的顺序到达的。

通过“TCP 协议仅发送您在套接字中写入的字节”，我的意思是如果您这样做`socket.write("1"); socket.write("2")`，您将`"12"`在服务器上收到，因为那是您在套接字上写入的内容。您必须通过某些东西明确地分隔您的消息，以便服务器可以知道消息何时开始以及消息何时结束。

关于是否按顺序接收东西，您会注意到，如果您删除 process.nexTick 并让您的客户喜欢：

```
var net = require('net');
var client = net.connect({port: 1337}, function () {
  var i = 100;
  while (i--) {
    client.write('a'+i+'\r\n');
  }
}); 
```

您将在服务器上收到两条消息（至少我收到了）：第一个数字是 83 - 99，然后是 0 - 82，尽管它们是按顺序编写的。

这是因为 TCP 以某种神奇的方式将其拆分为数据包。第一个包裹实际上比第二个大，所以它最后到达那里。当然，您可以在 wikipedia 页面中阅读有关 TCP 工作原理的更多信息，并且[该视频](http://www.youtube.com/watch?v=HOaIqQAeaik)可能会比您需要听到的内容更多，但它有助于理解您正在使用的所有内容。

# asp.net - 添加具有 ValidUntil DateTime .NET Membership 的用户角色

> ID：12029464
> 
> 赞同：0
> 
> 时间：2012-08-19T19:48:16.343
> 
> 标签：asp.net, asp.net-membership, roles, membership-provider

我使用 ValidUntil 日期时间字段扩展了 UsersInRoles 表。

![表设计](../Images/97f73c2638403eab6889faff04381bb2.png)

现在我想使用使用 .net 成员资格 AddUserToRole 函数，但我无法通过 validuntil。

我尝试覆盖，但我不能使用 LinqToSql UserInRoles 类。所以因为我只有 LinqToSql 的经验，所以我想要一些帮助如何执行 sql 查询；

我想使用我的自定义功能

```
 public bool AddUserToRole(Guid UserID, string RoleName, DateTime? ValidUntil)
 {
       Guid RoleID = StaticValue.GetRoleID(RoleName); 
       // add new UserID = UserID, RoleId = RoleID, ValidUntil = ValidUntil

 } 
```

![在角色中添加用户](../Images/c201ce8b4440e90746da0e757d7fc8de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:49:03.240

当您调用时`Roles.AddUserToRole`，它会调用此函数

```
static public void AddUserToRole(string username, string roleName){
   ...
   Provider.AddUsersToRoles(new string [] {username}, new string [] {roleName}); 
   ... 
} 
```

`Provider.AddUsersToRoles`从上面的函数调用`RoleProvider`的 AddUsersToRoles

```
public abstract void AddUsersToRoles(string[] usernames, string[] roleNames); 
```

底线是您不能调用在自定义角色提供程序中创建的自定义函数，例如 Roles.AddUserToRole(-, -, -)

相反，您必须创建自己的角色服务/管理器类，并自己插入/更新/删除到 UsersInRoles 表。

# mysql - 由单独表中的 ID 关联的 SUM() 列

> ID：12029467
> 
> 赞同：0
> 
> 时间：2012-08-19T19:48:31.943
> 
> 标签：mysql, sum

我有 2 个表 irc_users，其中包含列 id (int)、nick (string[32]) 等。然后我有 irc_pokemon，再次包含 user_id (int)、xp (int) 等。

我希望从 irc_users 中选择 nick，然后从 irc_pokemon 中选择 SUM() xp 列，并通过用户 ID 将它们关联起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:53:45.510

尝试

```
select u.nick, sum(xp) as xp_sum
from irc_users u
left outer join irc_pokemon p on p.user_id = u.id
group by u.nick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:55:09.677

```
SELECT irc_users.nick , SUM(irc_pokemon.xp) FROM irc_users INNER JOIN irc_pokemon ON irc_pokemon.user_id = irc_users.id GROUP BY irc_users.nick 
```

我假设 irc_users.nick 是独一无二的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:56:18.730

```
select nick,sum(xp) from irc_users,irc_pokemon where id=user_id group by id 
```

# sql - [在 Postgres 中] 仍然可以读取锁定的行吗？

> ID：12029470
> 
> 赞同：10
> 
> 时间：2012-08-19T19:48:57.727
> 
> 标签：sql, postgresql, transaction-isolation

如果我`SELECT... FOR UPDATE`在事务中有一行，它显然会阻止该行被写入，但它是否也不允许读取？我希望仍然能够从行中读取，所以如果答案是肯定的，你能提供一个解决方案来解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T20:01:34.490

你可以好好读书。有一些锁定模式会阻止阅读，但这不是其中之一。

[http://www.postgresql.org/docs/current/static/explicit-locking.html](http://www.postgresql.org/docs/current/static/explicit-locking.html)

# jquery-mobile - jquery mobile重用相同的标头/以编程方式注入组件

> ID：12029471
> 
> 赞同：1
> 
> 时间：2012-08-19T19:49:13.720
> 
> 标签：jquery-mobile, components

我想要一个复杂的标题并在每个页面中重用它。这是我的页面示例：

[http://jsfiddle.net/HBgTp/2/](http://jsfiddle.net/HBgTp/2/)

```
<div data-inset="true" id="MainScreen" data-theme="a" data-role="page"> 
    <div class="MainHeaderPlaceHolder">
        <!-- PUT HERE THE HEADER -->
    </div>
</div>

<div id="MainHeaderWrapper">
    <div data-inset="true" data-role="header">

    </div>
</div> 
```

我正在尝试像这样注入标头：

```
 $(document).ready(function(){
   $(".MainHeaderPlaceHolder").append($("#MainHeaderWrapper").html());
   $('.MainHeaderPlaceHolder').trigger('create');
 }); 
```

什么都没发生，怎么了？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:57:04.693

就个人而言，如果你想走这条路

```
var html = "some html string";//just easier than pulling it from html - to my mind anyway
$(".MainHeaderPlaceHolder").append( html ); 
```

应该工作，但这就是你正在做的......

# c# - 如何改变色调

> ID：12029473
> 
> 赞同：0
> 
> 时间：2012-08-19T19:49:39.780
> 
> 标签：c#, algorithm, colors

我已经阅读了[色彩理论简介](https://www.tigercolor.com/color-lab/color-theory/color-theory-intro.htm)文章。使用该信息，我必须以编程方式（C#、.NET）更改颜色的色调（我必须将灰色添加到当前色调）。我该怎么做？

> 色调 - 为纯色添加灰色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:34:39.633

“添加灰色”相当不清楚。启动 mspaint.exe 并单击编辑颜色。单击彩虹矩形以选择一种颜色。密切关注 Hue/Sat/Lum 框。上下拖动最右边的滑块，注意亮度如何变化。您可以通过将其向下滑动来使其更暗，也许这就是“添加灰色”的意思。或者，也许您的意思是修补饱和度。自己试试吧。

[您可以使用这些公式](https://web.archive.org/web/20141023005253/http://bobpowell.net/RGBHSB.aspx)从 RGB 颜色空间转换到 HSL 颜色空间并返回。

# web-crawler - SEO - 爬虫如何处理域名本身？

> ID：12029479
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:50:40.257
> 
> 标签：web-crawler, seo, google-crawlers

我打算为一个新的 Web 项目获取一个域。我不是 SEO 专家，但我知道一些关于 SEO、HIT 和 Page Rank 算法的知识，并且也对域名及其在 SEO 中的作用进行了一些[研究。](http://www.seomoz.org/learn-seo/domain)

我很难找到有关域名本身作用的更多信息。也许你可以通过一个小例子让我明白这一点。假设我会为“最好的朋友”计划一个网站。

我会考虑这样的域：

*   www.friends-best.com
*   www.for-best-friends.com
*   www.best-friends.com
*   www.bestfriends.com

假设人们会在他们的搜索引擎中输入“最好的朋友”，那么哪一个是最好的？我会假设“www.bestfriends.com”。

我的困惑：域名不包含不同的单词，它是一个大字符串，每个示例都包含子字符串“best”和“friends”。如果它们包含完全相同的网站，搜索引擎将如何处理这些域：相同的标题、内容、替代标签、站点地图、传入和传出链接、元描述和所有 SEO 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:18:05.573

克里斯，我会选择 bestfriends.com，因为搜索引擎真的不在乎您的域是什么，并且通过考虑除域名之外的许多因素来给出搜索排名。

选择小而易记的名称，并且应该包含可以帮助您的客户识别您的服务的单词。

请参考谷歌的这段视频，解释域名对搜索排名的影响。

www.youtube.com/watch?v=rAWFv43qubI

# html - 在 .htaccess 文件中使用 NC 不起作用

> ID：12029481
> 
> 赞同：1
> 
> 时间：2012-08-19T19:50:42.123
> 
> 标签：html, .htaccess

我正在尝试创建一个忽略文件区分大小写的 .htaccess 文件。到目前为止，我有以下内容：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f 
RewriteRule ^(.*)$ $1.html 
```

当我准确输入文件名时，这有效。例如，我的文件之一是 About.html。当我输入 www.domain.com/About 时，它会转到正确的位置，但是当我输入 www.domain.com/about 时，它不会。

我看过关于人们使用 [NC] 的帖子，但我也无法让它发挥作用。我也试过把

```
CaseInsensitive On 
```

但这似乎破坏了一切（甚至无法加载主页），所以我把它拿出来了。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:36:34.657

不区分大小写不会那样工作，它会激活正则表达式匹配的不区分大小写，而不是文件。

例如 ：

```
RewriteRule ^somefile.php$ /index.php
RewriteRule ^somefile.php$ /index2.php [NC] 
```

如果有人尝试访问`http://domain.com/SomeFile.php`，它将与第一行不匹配，但第二行将匹配，这会将他重定向到 index2.php（而不是 index.php）。但是，如果您将 index2.php 文件命名为 INDEX2.php，则重定向将引发 404 not found 错误。

您正在寻找的是使用 RewriteMap。你需要把它放在你的服务器配置文件中：

```
RewriteMap lc int:tolower 
```

重新启动 apache，并在您的 htacces 中使用如下规则：

```
RewriteRule ^(.*)$ /${lc:$1} 
```

这会将任何请求变为小写，然后您的文件必须全部小写。

有关 RewriteMap 的更多信息 =>[参见文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritemap)

# html - 第 23 列：文档类型在此处不允许元素“LINK”

> ID：12029484
> 
> 赞同：-1
> 
> 时间：2012-08-19T19:50:52.387
> 
> 标签：html, html4

这是页面 - [http://www.class-a-studio.co.il/contact.php](http://www.class-a-studio.co.il/contact.php)

第 23 列：文档类型在此处不允许元素“LINK”

上面提到的元素是在不允许的上下文中找到的。这可能意味着您有错误的嵌套元素——例如“body”部分中的“style”元素而不是“head”内部——或者两个重叠的元素（这是不允许的）。

此错误的一个常见原因是在 HTML 文档中使用了 XHTML 语法。由于 HTML 的隐式关闭元素规则，此错误可能会产生级联效果。例如，在 HTML 文档的“head”部分中为“meta”和“link”使用 XHTML 的“self-closure”标签可能会导致解析器推断“head”部分的结尾和“body”部分的开头" 部分（其中不允许使用“链接”和“元”；因此报告了错误）。

我不知道该怎么办...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:02:23.273

根据[HTML 4 规范](http://www.w3.org/TR/html401/struct/links.html#h-12.3)，该`<link>`元素只允许在`<head>`文档中的元素内部。也许你的意思是在这里使用`<a>`元素？

```
<div class="buttons">
    <a href="#" class="link1" 
                onclick="document.getElementById('form').submit()">
        <em><img src="images/formB.jpg" alt="שליחה"></em>
    </a>
    <link href="tenks.php">
</div> 
```

也许需要

```
<div class="buttons">
    <a href="#" class="link1" 
                onclick="document.getElementById('form').submit()">
        <em><img src="images/formB.jpg" alt="שליחה"></em>
    </a>
    <a href="tenks.php">tenks</a>
</div> 
```

# sql-server-2008 - SQL Server 2008 - 根据子值切换表中的值。带有子查询的触发器或计算列？

> ID：12029485
> 
> 赞同：0
> 
> 时间：2012-08-19T19:50:59.820
> 
> 标签：sql-server-2008, tsql

我有以下表格

**父表**

```
ds_id(pk)   / state
-------------------------
        1\.       /    valid
        2\.       /    invalid 
```

**子表**

```
d_id(pk)  /   ds_id(fk)  /  approve
-----------------------------------------
  1\.     /       1\.        /       false
  2\.     /       1\.        /       true
  3\.     /       2\.        /       false
  4\.     /       2\.        /       false 
```

`state`如果子表中的其中一个子表的已批准列设置为 true，则父表中的列应更改为有效

我想找到最简单最有效的方法来根据其子项计算和设置状态列。

我正在使用 SQL Server 2008。

状态的改变必须是即时的。

预计该系统将有几千名父母，每人大约有 5 个孩子。

孩子们更有可能被更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:32:10.647

您没有提供足够的信息来决定什么是“最佳”方法。两个基本思想是在子值更改时更新父项中的数据或在查询时从子项中汇总。

以下是在这些方法之间做出决定的一些问题：

父级读取与子级更改的比率是多少？如果子值每改变一千次就读取一次父值，那么动态地（在查询时）执行它可能更有效。如果每次子值更改时都会读取父值一千次，那么静态执行（使用更新）可能更有效。

改变孩子和从父母那里阅读的预期响应时间是多少？

我们在谈论多少数据？如果以数百行测量子数据，则可能不值得努力提高查询效率。

而且，建议的数据对于自动更新来说有点尴尬。如果一个孩子从approved = true 变为false，那么会发生什么？您必须阅读所有其他子项才能在父项中设置值。另一种方法是保留已批准子项的计数，然后对该值进行逻辑处理。一种方法是使用父表中的计算列：

```
create table . . .
    stats as (case when ApprovedCount > 0 then valid else invalid end) 
```

作为对自动更新的一般观察，我认为触发器相对难以维护。使用触发器似乎并不“简单”。相反，我将有一个用于更新子表的存储过程，并使用该存储过程进行更新和任何其他逻辑。

[回复评论] 建议的数据很小。孩子和父母很可能都适合一个数据页。除非您要进行事务处理基准测试，否则您可以在查询父母时即时进行计算：

```
select p.id, (case when count(*) > 0 then valid else invalid end) as validness
from parent p left outer join
     child c
     on c.parentid = p.parentid and c.accepted = true
group by p.id 
```

这会非常快。而且，如果您一次只寻找一个父母，那将非常非常快。当然，如果您预先计算该值，它会快一点。然而，相对于维持价值的复杂性，速度的提高不太可能很重要。

# matlab - opencv中的Matlab SVD输出

> ID：12029486
> 
> 赞同：4
> 
> 时间：2012-08-19T19:51:36.940
> 
> 标签：matlab, opencv, svd

在 Matlab SVD 函数中输出三个矩阵：

```
[U,S,V] = svd(X) 
```

我们可以使用 S 矩阵找到尽可能少的分量，以减少 X 的维数以保留足够的方差。我的问题是如何使用 OpenCV 找到`S`矩阵（不是`U`矩阵），是否可以使用 OpenCV SVD 中的构建找到 S 矩阵？我的意思是 OpenCV SVD 函数像 Matlab 一样输出三个矩阵，但我不知道它们是否相同。这是 OpenCV 中的 SVD：

```
SVD::compute(InputArray src, OutputArray w, OutputArray u, OutputArray vt, int flags=0 ) 
```

这是 Matlab SVD：

```
[U,S,V] = svd(X). 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T21:57:38.230

`S`Matlab 和`w`OpenCV之间有一个简单的区别。

举个例子：

```
A = [2, 4;
     1, 3;
     0, 0;
     0, 0] 
```

在 Matlab 中，`S`将是：

```
S = [5.47, 0   ;
     0   , 0.37;
     0   , 0   ;
     0   , 0   ] 
```

但是openCV给出以下内容`w`：

```
w = [5.47; 0.37] 
```

所以，OpenCV 给出了一个奇异值数组，如果你真的想要 S 矩阵，你可以创建一个新矩阵并将`w`'s 元素放在它的对角线上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T21:53:54.110

我很确定实际计算 SVD 分解的后端对于 MATLAB 和 OpenCV 是相同的（我认为在这两种情况下都是用 LAPACK 完成的）。所以你想要做的似乎很容易。

您可以通过创建一个与 src 大小相同且处处为零且 w 中的值沿对角线的矩阵来将 w 转换为 S。这只是数据结构的简单更改，值将是相同的。

# asp.net-mvc - FluentValidation : 自定义验证器工厂和客户端验证

> ID：12029493
> 
> 赞同：0
> 
> 时间：2012-08-19T19:52:53.173
> 
> 标签：asp.net-mvc, structuremap, fluentvalidation

我有自己的 ValidatorFactory，在 asp net mvc 3 应用程序中实现了结构映射。

```
public class StructureMapValidatorFactory : ValidatorFactoryBase
{
    public override IValidator CreateInstance(Type validatorType)
    {
        return ObjectFactory.TryGetInstance(validatorType) as IValidator;
    }
} 
```

在全球 asax ...

```
FluentValidationModelValidatorProvider.Configure(provider => 
{ 
  provider.ValidatorFactory = new StructureMapValidatorFactory(); 
}); 
```

好吧，使用这种组合客户端验证不起作用，如果我使用标准提供程序配置，客户端验证工作正常。

这里有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:19:02.653

确保您已正确配置 DI 框架以解析验证器。如果 `ObjectFactory.TryGetInstance(validatorType)`返回 null，它将不起作用，因为不会有任何与模型关联的验证器，也不会发出元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:19:32.817

最后，忘记在我的 boostrap 中调用 Configure 方法。所以，

```
ModelValidatorProviders.Providers.Add(new FluentValidationModelValidatorProvider(new StructureMapValidatorFactory())); 
```

**接着**

```
FluentValidationModelValidatorProvider.Configure(); 
```

# html - 居中图像

> ID：12029496
> 
> 赞同：0
> 
> 时间：2012-08-19T19:53:47.430
> 
> 标签：html, css

我有一个 500px 宽的图像。它在一个div里面。div的宽度是250px。如何对齐 div 内居中的图像？我应该使用`top`还是`left`应该有负边距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:19:34.040

I would use negative margins: `#myDiv img { margin: 0 -125px; }`. This only works if you know the width of both the `DIV` and the `IMG` though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:11:49.993

***[演示](http://tinkerbin.com/xxteoiPY)***

嘿，现在习惯了这样的`display table-cell`属性

```
<div class="parent">
<img src="http://www.gravatar.com/avatar/3c6597370b476903ed475f70b4b3ce31?s=32&d=identicon&r=PG">
</div> 
```

**CSS**

```
.parent{
border:solid 1px red;
  display:table-cell;
  width:300px;
  height:300px;
  vertical-align:middle;
  text-align:center;
}
.parent img{
vertical-align:top;
} 
```

***[演示](http://tinkerbin.com/xxteoiPY)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T21:04:39.440

您可以在图像周围的 html 中更改（或至少添加）某些内容吗？这是一种古老的技巧，并且有点尴尬，因为它需要您`<div>`在图像周围添加额外的东西，但如果您对此表示满意，它会非常好用（注意，添加了一些边框以使效果更容易看到测试时）：

```
<div style="width:250px; border: solid 2px red;">
    <!-- Place the following div at 50%: -->
    <div style="width: 500px; margin-left:50%; border: solid 2px blue;">
        <!-- ...then move the image back by half of it's own width: -->
        <img style="width:500px; margin-left:-250px; border: solid 3px green;" />
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:10:01.280

试试这个（不确定 ie-6 但在 ie-7 和 plus 中可以正常工作）

```
<style>
.test{ height:250px; width:250px; overflow:hidden; position:relative;}
.test img{ position:absolute; top:50%; left:50%; margin-left:-250px; margin-top:-250px; height:500px; width:500px;}
</style>

<body>
<div class="test"><img src="img.png" alt="img" /></div>
</body> 
```

**如果可以使用该图像作为背景，你可以试试这个**

```
.test{height:250px; width:250px; background:url(img-path.png) no-repeat 50% 50%;} 
```

# jquery - 什么是 jQuery 选择器

> ID：12029498
> 
> 赞同：0
> 
> 时间：2012-08-19T19:54:10.840
> 
> 标签：jquery, jquery-ui, jquery-plugins

我是 jQuery 的新手，我遇到了我无法理解的一行，我看到很多人在使用它，

任何人都可以解释这一点：

```
var div = jQuery("<div>", { "class": "someClass" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:57:30.363

如果一个字符串作为参数传递给`$()`，jQuery 会检查该字符串以查看它是否看起来像 HTML（即，它`<tag ... >`在字符串中的某个位置）。

如果不是，则字符串被解释为选择器表达式。但是如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。

然后创建并返回一个引用这些元素的 jQuery 对象。您可以对这个对象执行任何常用的 jQuery 方法。

至于 的第二个参数`$()`，从 jQuery 1.4 开始，`$()`选择器还可以接受由可以传递给`.attr()`方法的属性的超集组成的映射。

此外，可以传入任何事件类型，可以调用以下 jQuery 方法：val、css、html、text、data、width、height 或 offset。

名称“class”必须在映射中引用，因为它是 JavaScript 保留字，并且不能使用“className”，因为它不是正确的属性名称。

[jQuery 选择器文档！](http://api.jquery.com/jQuery/)

# css - 在 Twitter Bootstrap 中设置侧边栏导航的最小宽度

> ID：12029499
> 
> 赞同：3
> 
> 时间：2012-08-19T19:54:12.483
> 
> 标签：css, twitter-bootstrap

我有一个侧边栏导航，如典型的[Twitter Bootstrap 示例所示](http://twitter.github.com/bootstrap/examples/fluid.html)。

我的一些侧边栏菜单项很长。根据窗口的大小，当您更改窗口的宽度时，文本将换行到下一行，[如此 jsfiddle所示。](http://jsfiddle.net/uadDW/9/embedded/result/)为了演示起见，我想为侧边栏导航设置最小宽度。我知道 Bootstrap 的 CSS 中有媒体标签，但我不确定那是我需要做的。基本上，我希望内容部分仍然具有响应性，但侧边栏菜单具有最小宽度（或者实际上锁定宽度可能会更好）。

有没有办法固定侧边栏的宽度，但确保它仍然与页面的内容部分很好地配合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:22:37.710

从`nav`中取出`fluid-container`，将其位置设置为`absolute`并将 a 添加`margin-left`到容器中。这不是 Twitter Bootstrap 的原生定位方法，但它应该可以工作。

标记：

```
<div class="navbar navbar-fixed-top">...</div>
<div class="the-sidebar">...</div>
<div class="container-fluid the-container>...</div> 
```

CSS：

```
.the-sidebar {
    position: absolute;
    width: 220px;
}
.the-container {
    margin-left: 240px;
} 
```

[这](http://jsfiddle.net/simbirsk/tkkrx/1/embedded/result/)是 jsfiddle 上的脚本（我使用了最新版本的 Twitter Bootstrap）

提示：

如果您想要一个始终可见的侧边栏，只需将位置更改为`fixed`

# android - 如何使 EditText 显示输入的字母或字符串

> ID：12029500
> 
> 赞同：0
> 
> 时间：2012-08-19T19:54:19.280
> 
> 标签：android, android-edittext

我在android的edittext控件中遇到了一个奇怪的问题。

问题是，当我在软键盘中键入任何内容时。文本未在编辑框中打印。

这是代码

```
mEditview.setOnFocusChangeListener(new View.OnFocusChangeListener() {
                public void onFocusChange(View v, boolean hasFocus) {
                    if (hasFocus) {
                           InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                           imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
                    }
                }
            });
            mEditview.requestFocus(); 
```

添加了布局代码

```
 <?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/filter_text"
    android:imeOptions="actionDone"
    android:singleLine="true"
    android:hint="Search"/> 
```

这是我在模拟器中得到的输出。为什么会这样来？如何解决这个问题

![在此处输入图像描述](../Images/fe68a32cc781ec300373ea22d7122605.png)

# python - 从Windows系统服务python调用.exe？

> ID：12029506
> 
> 赞同：2
> 
> 时间：2012-08-19T19:54:59.603
> 
> 标签：python, windows

我有一个正在尝试编写的 Windows 系统服务。我正在尝试 POS 机的接口，所以理想情况下我想将此代码包含在系统服务中。然而，一些实验让我相信 Windows 系统服务只会执行基本任务而不是其他迭代。

我有另一个函数，我需要每隔 x 秒调用一次，这个附加函数是一个 while 循环，但我无法让我的函数和 win32 循环等待系统调用一起很好地发挥作用。我将在下面的代码中更详细地介绍。

```
import win32service  
import win32serviceutil  
import win32event

class PySvc(win32serviceutil.ServiceFramework):  
    # net name  
    _svc_name_ = "test"  

    _svc_display_name_ = "test"  

    _svc_description_ = "Protects your computer."  

    def __init__(self, args):  
        win32serviceutil.ServiceFramework.__init__(self,args)  
        # create an event to listen for stop requests on  
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)

    # core logic of the service     
    def SvcDoRun(self):

        # if the stop event hasn't been fired keep looping
        while rc != win32event.WAIT_OBJECT_0:

            # block for 60 seconds and listen for a stop event  
            rc = win32event.WaitForSingleObject(self.hWaitStop, 60000)

        ## I want to put an additional function that uses a while loop here.
        ## The service will not work correctly with additional iterations, inside or 
        ## the above api calls.    
        ## Due to the nature of the service and the api call above, 
        ## this leads me to have to compile an additional .exe and somehow call that 
        ## from the service.     

    # called when we're being shut down      

    def SvcStop(self):  
            # tell the SCM we're shutting down  
            self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)  
            # fire the stop event  
            win32event.SetEvent(self.hWaitStop)  

if __name__ == '__main__':  

    win32serviceutil.HandleCommandLine(PySvc) 
```

我的研究表明，我需要以某种方式从 Windows 系统服务调用 .exe。有谁知道如何做到这一点？我尝试过使用 os.system，并且子进程模块的变体调用无济于事，似乎 windows 只是忽略了它们。有任何想法吗？

编辑：恢复到原来的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:06:03.347

不能说，因为我熟悉 Windows 开发，但在 *nix 中，我发现套接字在两种情况下非常有用应用程序，使剪贴板与浏览器交互等。

在大多数情况下，UDP 套接字就是你需要一个小 IPC 的全部，并且它们在 Python 中编写代码是微不足道的。但是，您确实必须格外小心，通常存在限制是有充分理由的，并且您需要在破坏规则之前真正了解规则……请记住，任何人都可以发送 UDP 数据包，因此请确保接收应用程序仅接受来自本地主机的数据包，并确保您检查所有传入的数据包以防止本地黑客/恶意软件。如果传输的数据特别敏感或启动的操作很强大，那可能根本不是一个好主意，只有你对你的应用程序足够了解才能说真的。

# javascript - HTML 5 - 在特定时间点播放文件

> ID：12029509
> 
> 赞同：36
> 
> 时间：2012-08-19T19:55:33.647
> 
> 标签：javascript, jquery, html, audio

我有一个简单的自动播放片段来播放音频文件，但是我想知道是在 JavaScript 中还是作为属性在特定时间播放该文件（例如 3:26）。

```
<script type="text/javascript">
    var myAudio=document.getElementById('audio2')
    myAudio.oncanplaythrough=function(){this.play();}
</script>

<audio id="audio2" 
       preload="auto" 
       src="file.mp3" 
       oncanplaythrough="this.play();">
</audio> 
```

任何帮助都会很棒。提前致谢 ：）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-19T22:19:13.163

一些事情......你的脚本首先需要*在*音频标签之后。

此外，您不需要`oncanplaythough`音频标签上的属性，因为您使用 JavaScript 来处理此问题。

而且，`oncanplaythrough`是一个**事件**，而不是一个方法。让我们为它添加一个监听器，它将使用`canplaythough`. 看看这个：

```
<audio id="audio2" 
   preload="auto" 
   src="http://upload.wikimedia.org/wikipedia/commons/a/a9/Tromboon-sample.ogg" >

   <p>Your browser does not support the audio element</p>
</audio>

<script>
  myAudio=document.getElementById('audio2');
  myAudio.addEventListener('canplaythrough', function() {
    this.currentTime = 12;
    this.play();
  });
</script> 
```

最后，要在特定点开始播放歌曲，只需`currentTime`在实际播放文件之前进行设置。在这里，我将其设置为 12 秒，因此在此示例中可以听到，对于 3:26，您将使用 206（秒）。

查看现场演示：http: [//jsfiddle.net/mNPCP/4/](http://jsfiddle.net/mNPCP/4/)

* * *

**编辑**：似乎在Firefox 以外*的*`currentTime`浏览器中实施不当。根据这个[提交的 W3C 错误](https://www.w3.org/Bugs/Public/show_bug.cgi?id=12982)的解决方案，当设置它应该触发和事件。这意味着在我们的示例中，Firefox 将无限期地播放音轨的第一秒左右，从不继续播放。我想出了这个快速的解决方法，让我们改变*`currentTime``canplay``canplaythrough`*

 *```
this.currentTime = 12; 
```

测试它是否已经被设置，从而防止`canplaythrough`被重复调用：

```
if(this.currentTime < 12){this.currentTime = 12;} 
```

这种对规范的解释目前仍然存在争议，但目前这种实现应该适用于大多数支持 HTML5 音频的现代浏览器。

更新的 jsFiddle：http: [//jsfiddle.net/mNPCP/5/](http://jsfiddle.net/mNPCP/5/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-04-09T01:38:37.613

最好的方法是使用媒体片段 URI 规范。使用您的示例，假设您要从 3:26 开始加载音频。

```
<audio id="audio2" 
       preload="auto" 
       src="file.mp3#t=00:03:26" 
       oncanplaythrough="this.play();">
</audio> 
```

或者，我们可以只使用秒数，例如`file.mp3#t=206`.

您还可以通过用逗号分隔开始时间和结束时间来设置结束时间。 `file.mp3#t=206,300.5`

此方法比 JavaScript 方法更好，因为您向浏览器暗示您只想从某个时间戳加载。根据文件格式和服务器对远程请求的支持，浏览器可能只下载播放所需的数据。

也可以看看：

*   [MDN 文档 - 指定播放范围](https://developer.mozilla.org/de/docs/Web/HTML/Using_HTML5_audio_and_video#Specifying_playback_range)
*   [W3C 媒体片段 URI](https://www.w3.org/TR/media-frags/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-09-11T14:29:53.310

我有一个适用于所有人的简单答案

1- 创建一个按钮，单击它时播放音频/视频
2- 测试单击按钮时播放的音频是否可以隐藏按钮和
3- 页面加载时单击按钮

```
 window.onload =function(){
        document.getElementById("btn").click();
    } 
```*

# python - 这是在python中正确使用嵌套函数吗？

> ID：12029511
> 
> 赞同：0
> 
> 时间：2012-08-19T19:55:39.963
> 
> 标签：python, function, loops, nested, list-comprehension

我刚刚遇到以下代码，它工作正常，但对我来说似乎很奇怪，因为它甚至不是一个闭包，我想知道它是否是就性能或最佳实践而言的正确编码方式，或者这一切都应该是替换为包含所有逻辑的常规 for 循环？

```
mylist = [
   {'one': 20,
    'two': 4},
   {'one': -6,
    'two': 64},
   {'one': 18,
    'two': 1},
   {'one': 16,
    'two': 100},
    # ...
]

def business_function(a_list):

    def compute_function(row):
        """
        suppose some more complex computations + appending extra values
        than this dummy example
        """
        row['total'] = row['one'] + row['two']
        return row

    def filter_function(item):
        """
        suppose some complex logic here
        """
        return item['one'] > 5

    # suppose there is some code here ...

    filtered_list = [compute_function(item) for item in a_list if filter_function(item)]

    # and some more code here ...

    return filtered_list

print business_function(mylist) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:00:18.430

我认为使用这些本地范围的函数没有问题。

除非外部函数会被*大量*调用，否则对性能的影响将是最小的；例如，当调用外部函数时，这两个函数的代码已经编译好了。*额外*发生的所有事情是代码对象常量被加载，附加到一个函数，并且该函数存储在一个局部变量中。

通过将它们保持在本地范围内，您可以非常清楚地表明它们的实用性`business_function`仅适用于范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:02:19.760

我要说不，只是因为有更好的方法可以满足这种方法的要求。

*   如果要防止命名空间冲突，请将函数放在单独的模块中。
*   如果要与单个功能关联，请将它们全部放在单独的模块中。
*   如果要减慢执行速度，请改用睡眠功能。

否则，只需使它们正常运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T20:02:42.767

这样做有一个小缺点，因为每次调用封闭函数时都会创建内部函数对象，这是一个小的性能损失。但是，这很少会成为问题，并且改进的代码封装可能使其值得。

另一种方法是创建一个类，但这不会减少开销。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-19T21:14:29.170

我不喜欢这种嵌套定义的使用。作者这样做可能是为了提高可读性或防止其他人使用他的私人功能。

如果作者想将这些函数“标记”为私有，他应该在它们的名称前加上下划线。通过这种方式，他也可以在代码的其他部分中重用这些函数，而无需复制它们。

如果他这样做是为了提高可读性……那么，为什么不把它们放在那个函数之外呢？如果他们做了一些真正的计算和过滤，那么他们应该是拥有自己的文档和评论的“顶级”函数。

可能闭包应该只用于装饰器，或者其他一些*非常*罕见的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T21:10:51.563

如果函数不使用外部函数的局部变量并且它们不是微不足道的单行代码，那么我会将它们放在全局范围内。

否则，您的代码阅读者将被迫阅读所有函数定义（如果它们是闭包并使用/更改外部局部变量）以了解外部函数的作用。

如果它们是在外部定义的，那么名称和可能的相应文档字符串可能足以理解它们在外部函数中的作用。

# android - 如何从扬声器录制音频？

> ID：12029512
> 
> 赞同：2
> 
> 时间：2012-08-19T19:55:40.457
> 
> 标签：android, voice-recording

如果我想从扬声器而不是麦克风录制声音，有谁知道我应该使用什么来源？这就是我所拥有的，但当然这是从 MIC 录制的。

```
recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
```

我查看了文档，但我找不到任何内容，甚至不清楚 VOICE_DOWNLINK、VOICE_UPLINK 和 VOICE_COMMUNICATION 到底是什么意思？

这是文档的链接。[http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)

如果有人可以就此向我提出建议，我将不胜感激？

任何评论都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:41:22.517

扬声器，顾名思义就是扬声器。要记录扬声器发出的声音，您应该使用麦克风。您无法拦截以其他方式进入扬声器的音频流

# java - 将 Long[] 转换为 long[]（原始）java

> ID：12029515
> 
> 赞同：25
> 
> 时间：2012-08-19T19:55:57.873
> 
> 标签：java

如何将 Long[] 转换为 long[]？例如，如果它不是下面的数组，我知道如何转换。

```
long ll = (Long)Object[1].longValue() 
```

但是我如何转换为一个数组，下面是不对的，但任何人都可以纠正它吗？

```
long[] l_ar = (Long[])Object[] 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-19T20:05:05.647

您可以根据以下内容窃取解决方案`ArrayUtils`

```
Long[] longObjects = { 1L, 2L, 3L };
long[] longArray = ArrayUtils.toPrimitive(longObjects); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-19T20:00:25.003

没有标准**的**API 方法可以做到这一点（如何`null`处理 -elements？），因此您需要自己创建这样的方法。

像这样的东西*（会扔`NullPointerException`在任何物体上`null`）*：

```
public static long[] toPrimitives(Long... objects) {

    long[] primitives = new long[objects.length];
    for (int i = 0; i < objects.length; i++)
         primitives[i] = objects[i];

    return primitives;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-07T13:39:49.750

使用 java 8 流：

```
public static long[] unboxed(final Long[] array) {
    return Arrays.stream(array)
                 .filter(Objects::nonNull)
                 .mapToLong(Long::longValue)
                 .toArray();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-19T20:05:35.787

为了做到这一点，最好的方法是浏览每个数组。

例如，从 Long[] 到 long[]：

```
Long[] objLong = new Long[10];
//fill objLong with some values
long[] primLong = new long[objLong.length]

for(int index = 0; index < objLong.length; index++)
{
    primLong[index] = objLong[index];
} 
```

由于自动拆箱，这应该通过将 Long 转换为 long 来解决。

# php - 纠正装饰器模式的一大缺点

> ID：12029517
> 
> 赞同：6
> 
> 时间：2012-08-19T19:56:17.890
> 
> 标签：php, design-patterns, decorator

不久前，我决定在重构一些游戏战斗代码时尝试使用装饰器模式。战斗者可以拥有各种被动能力，也可以是不同类型的生物。我认为装饰器可以让我在运行时以各种组合添加行为，因此我不需要数百个子类。

我几乎已经为被动技能制作了 15 个左右的装饰器，并且在测试中我发现了一些东西——装饰器模式的一个相当明显的缺点，我很惊讶我以前从未听说过。

为了让装饰器工作，它们的方法必须在最外层的装饰器上调用。如果“基类”——被包装的对象——调用它自己的方法之一，则该方法不会是修饰的重载，因为调用无法“虚拟化”到包装器。人工子类的整个概念被打破了。

这是一件大事。我的战斗人员有类似的方法，而这些方法`TakeHit`又调用了他们自己的`Damage`方法。但是装饰`Damage`的根本没有被调用。

也许我选择了错误的模式或在应用中过于热心。您对在这种情况下更合适的模式或解决此缺陷的方法有什么建议吗？我重构的代码只是将所有被动能力散布`if`在看似随机的块内的战斗代码中，所以这就是我想打破它的原因。

## 编辑：一些代码

```
public function TakeHit($attacker, $quality, $damage)
{
    $damage -= $this->DamageReduction($damage);

    $damage = round($damage);

    if ($damage < 1) $damage = 1;

    $this->Damage($damage);

    if ($damage > 0)
    {
        $this->wasHit = true;
    }

    return $damage;
} 
```

此方法在基`Combatant`类中。`DamageReduction`并且`Damage`可以并且都在各种装饰器中被覆盖，例如将伤害减少四分之一的被动，或者将一些伤害反射回攻击者的被动。

```
class Logic_Combatant_Metal extends Logic_Combatant_Decorator
{
    public function TakeHit($attacker, $quality, $damage)
    {
        $actual = parent::TakeHit($attacker, $quality, $damage);

        $reflect = $this->MetalReflect($actual);
        if ($reflect > 0)
        {
            Data_Combat_Event::Create(Data_Combat_Event::METAL_REFLECT, $target->ID(), $attacker->ID(), $reflect);
            $attacker->Damage($reflect);
        }

        return $actual;
    }

    private function MetalReflect($damage)
    {
        $reflect = $damage * ((($this->Attunement() / 100) * (METAL_REFLECT_MAX - METAL_REFLECT_MIN)) + METAL_REFLECT_MIN);
        $reflect = ceil($reflect);

        return $reflect;
    }
} 
```

但是同样，这些装饰器方法永远不会被调用，因为它们不是从外部调用的，而是在基类内部调用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:43:32.453

tl; dr：装饰器旨在更改对象或函数的行为，但它不会像子类化那样覆盖原始行为。

> 如果“基类”——被包装的对象——调用它自己的方法之一，则该方法不会是修饰的重载，因为调用无法“虚拟化”到包装器。人工子类的整个概念被打破了。

如果我理解正确，你是在说这个——

`decorated_thingy_instance = DecoratorA(OriginalThingy))`

给定

```
DecoratorA{
    decoratedThingy = ...;
    doStuff(){
      decoratedThingy.doStuff()
      ...
    }
    doOtherStuff(){
      decoratedThingy.doOtherStuff()
        ...
    }
} 
```

和

```
 OriginalThingy{

    doStuff(){
       this.doOtherStuff()
    }
    doOtherStuff(){
       ...
    }
} 
```

你的问题是没有调用 DecoratorA 的 doOtherStuff 。最好考虑将装饰器应用于函数而不是对象，它与子类化不完全一样。原则上，每个装饰器的行为不应影响其他装饰器或内部对象的行为，原因与您提到的相同，您不能像更改子类一样更改控制流。

实际上，这意味着您可以更改接口公开的函数的结果（将输出乘以 2），但您无法更改包装类计算函数的方式。您可以制作一个完全丢弃被包装类的输出或不完全调用它的包装器，例如，

```
DevNullDecorator{

    decoratedThingy = new Thingy();
    doStuff(){
      //decoratedThingy.doStuff() 
      // do whatever you want
    }
    doOtherStuff(){
       ...
    }
} 
```

但这或多或少打破了模式的精神。如果要修改内部对象本身，则需要在接口中使用 getter 和 setter 编写方法，这也或多或少地破坏了模式的精神，但可能适用于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T01:04:23.863

装饰器模式确实不是您问题的正确解决方案。装饰器只是为了在现有实现之上透明地添加功能，而不是修改现有行为。

另外两种看起来更合适的模式是：

**[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)：**与其尝试将附加功能包装到 a 上`Combatant`，不如将其`Combatant`本身委托给各种策略来计算拼图的不同部分。例如：

```
interface DamageReductionStrategy {
  public function computeDamageReduction(Combatant $combatant);
}

class Combatant {
  private $damageReductionStrategy;

  public function TakeHit($attacker, $quality, $damage) {
    $damage -= $this->damageReductionStrategy->computeDamageReduction($this);
    ...
  }
} 
```

**[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)：**可以在`Combatant`各种事件发生时提供钩子（监听器），以便可以采取额外的行动。例如：

```
interface DamageListener {
  public function hitTaken($combatant, $attacker, $quality, $damage);
}

class Combatant {
  private /* array */ $damageListeners;

  public function TakeHit($attacker, $quality, $damage) {
    ...

    foreach ($this->damageListeners as $listener)
      $listener->hitTaken($this, $attacker, $quality, $damage);
  }
}

class MetalReflect implements DamageListener {
  // code to reflect damage
} 
```

# javascript - 节点：通过请求下载 zip，Zip 已损坏

> ID：12029523
> 
> 赞同：15
> 
> 时间：2012-08-19T19:56:34.280
> 
> 标签：javascript, node.js

我正在使用优秀的[Request](https://github.com/mikeal/request)库来下载 Node 中的文件，用于我正在使用的小型命令行工具。Request 非常适合拉入单个文件，完全没有问题，但它不适用于 ZIP。

例如，我正在尝试下载[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)存档，该存档位于以下 URL：

```
http://twitter.github.com/bootstrap/assets/bootstrap.zip 
```

代码的相关部分是：

```
var fileUrl = "http://twitter.github.com/bootstrap/assets/bootstrap.zip";
var output = "bootstrap.zip";
request(fileUrl, function(err, resp, body) {
  if(err) throw err;
  fs.writeFile(output, body, function(err) {
    console.log("file written!");
  }
} 
```

我也尝试将编码设置为“二进制”，但没有运气。实际的 zip 约为 74KB，但通过上述代码下载时约为 134KB，在 Finder 中双击解压时，出现错误：

> 无法将“bootstrap”提取到“nodetest”（错误 21 - 是一个目录）

我觉得这是一个编码问题，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-19T20:33:02.253

是的，问题在于编码。当您等待整个传输完成`body`时，默认情况下会强制转换为字符串。`request`您可以`Buffer`通过将`encoding`选项设置为`null`：

```
var fileUrl = "http://twitter.github.com/bootstrap/assets/bootstrap.zip";
var output = "bootstrap.zip";
request({url: fileUrl, encoding: null}, function(err, resp, body) {
  if(err) throw err;
  fs.writeFile(output, body, function(err) {
    console.log("file written!");
  });
}); 
```

另一个更优雅的解决方案是使用`pipe()`将响应指向文件可写流：

```
request('http://twitter.github.com/bootstrap/assets/bootstrap.zip')
  .pipe(fs.createWriteStream('bootstrap.zip'))
  .on('close', function () {
    console.log('File written!');
  }); 
```

一个班轮总是赢:)

`pipe()`返回目标流（在本例中为 WriteStream），因此您可以监听其`close`事件以在写入文件时获得通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-28T21:38:34.770

我正在搜索一个请求 zip 并在我的服务器内不创建任何文件的情况下提取它的函数，这是我的 TypeScript 函数，它使用[JSZIP 模块](https://stuk.github.io/jszip/)和[Request](https://www.npmjs.com/package/request)：

```
let bufs : any = [];
let buf : Uint8Array;
request
    .get(url)
    .on('end', () => {
        buf = Buffer.concat(bufs);

        JSZip.loadAsync(buf).then((zip) => {
            // zip.files contains a list of file
            // chheck JSZip documentation
            // Example of getting a text file : zip.file("bla.txt").async("text").then....
        }).catch((error) => {
            console.log(error);
        });
    })
    .on('error', (error) => {
        console.log(error);
    })
    .on('data', (d) => {
        bufs.push(d);
    }) 
```

# regex - 在 Nginx 上更新旧的 Wordpress 永久链接

> ID：12029524
> 
> 赞同：0
> 
> 时间：2012-08-19T19:56:34.480
> 
> 标签：regex, wordpress, mod-rewrite, nginx

我正在尝试将我的网站从默认的 /year/month/day/post_title 永久链接更改为简单的 /post_title/ 链接，但是，在更改它时，我所有的旧链接都已损坏。我已经阅读了一个关于如何使用 .htaccess 在 Apache 上执行此操作的站点，但需要一些帮助来弄清楚如何使其与 nginx 的位置而不是 mod_rewrite 一起工作。
这是详细说明如何在 Apache 上执行此操作的站点[http://www.rickbeckman.org/how-to-update-your-wordpress-permalinks-without-causing-link-rot/](http://www.rickbeckman.org/how-to-update-your-wordpress-permalinks-without-causing-link-rot/)
我尝试使用这个 htaccess 到 nginx转换器[http://winginx.com/htaccess](http://winginx.com/htaccess)但是，正则表达式可能会导致问题，并且在启动 nginx 时出现此错误

```
 [emerg]: unknown directive "4}/[0-9]" in /usr/local/nginx/sites-enabled/website.com:19 
```

这是我的配置文件

```
 server {
        listen   80;
        server_name  website.com;
        rewrite ^/(.*) http://www.website.com/$1 permanent;
   }

    server {
        listen   80;
        server_name www.website.com;
        error_log /home/user/public_html/website.com/log/error.log;
        client_max_body_size 10M;
        client_body_buffer_size 128k;

        location /  {
                    root   /home/user/public_html/website.com/public/;
                    index  index.php index.html;
                    try_files $uri $uri/ /index.php;
                    }
        location ~ ^/[0-9]{4}/[0-9]{2}/[0-9]{2}/([a-z0-9\-/]+) {
                    rewrite ^(.*)$ http://website.com/$1 permanent;
                    }
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        location ~ \.php$
                            {
        fastcgi_read_timeout 120;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include /usr/local/nginx/conf/fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /home/user/public_html/website.com/public/$fastcgi_script_name;
                            }
  } 
```

有人知道如何解决吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:48:22.920

修复很简单：

```
location ~ ^/[0-9]{4}/[0-9]{2}/[0-9]{2}/([a-z0-9\-/]+) {
  rewrite ^(.*)$ http://website.com/$1 permanent;
} 
```

上面的问题是重写重置了反向引用，因此 $1 现在与重写匹配中的整个 url 匹配，而不是位置匹配中的 $1。以下应该有效：

```
location ~ ^/[0-9]{4}/[0-9]{2}/[0-9]{2}/([a-z0-9\-/]+) {
  set $post_title $1;
  rewrite ^(.*)$ http://website.com/$post_title permanent;
} 
```

（或者再次匹配重写规则中的正则表达式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:17:12.510

通过在正则表达式周围添加引号来修复它。

```
 rewrite "^/[0-9]{4}/[0-9]{2}/[0-9]{2}/([a-z0-9\-/]+)" http://www.website.com/$1; 
```

# objective-c - 无法将值从 UITableViewCell 传递到详细视图

> ID：12029526
> 
> 赞同：1
> 
> 时间：2012-08-19T19:57:00.083
> 
> 标签：objective-c, cocoa-touch, uistoryboard

我正在尝试根据在表格视图中触摸的单元格来更改详细视图中标签的颜色。

我就是无法做到这一点。下面是我的代码。我已经包含了详细视图中的头文件，并`IBOutlet`为标签创建了一个。

更新：理想情况下，当我单击一个单元格时，详细视图中的标签颜色应该是红色的。这是关于我的问题的截屏视频。[http://www.youtube.com/watch?v=i0nhbsNJWHY&feature=youtube_gdata_player](http://www.youtube.com/watch?v=i0nhbsNJWHY&feature=youtube_gdata_player)

```
#pragma mark - TableView Delegate
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [self performSegueWithIdentifier:@"ReferenceDetail" sender:tableView];
}

#pragma mark - Segue
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ReferenceDetail"]) {
        ReferenceDetailViewController *referenceDetailViewController = [segue destinationViewController];

        UIViewController *referenceDetailView = [segue destinationViewController];

        if(sender == self.searchDisplayController.searchResultsTableView) {
            NSIndexPath *indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow];
            NSString *destinationTitle = [[filteredReferenceArray objectAtIndex:[indexPath row]] name];
            [referenceDetailView setTitle:destinationTitle];

        }
        else {
            NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
            NSString *destinationTitle = [[referenceArray objectAtIndex:[indexPath row]] name];
            [referenceDetailView setTitle:destinationTitle];
            [referenceDetailViewController.label1 setTextColor:[UIColor redColor]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:24:13.523

当您转接时，插座尚未设置，因此您无法找到它们来更改它们。尝试发送一些对象或其他东西，并在您继续阅读的 viewcontroller 的 viewdidload 中读取它，然后使用它作为知道要更改为哪种颜色的方法，然后在相同的代码中更改标签的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:51:46.563

您遇到的问题是您的**ReferenceDetailViewController**中的插座 UILabel尚未从 xib 加载，但您正在尝试设置它的 textColor 属性。

作为确保这是问题的一种方法，请尝试在设置颜色的行中设置断点，并在**ReferenceDetailViewController** [viewDidLoad] 方法中设置另一个断点。应该首先调用设置颜色的行。

解决问题的一个简单方法是在**ReferenceDetailViewController**类上设置一个属性，该属性“保存” UIColor 实例，然后在 viewDidLoad 方法上设置它：

```
// ...

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ReferenceDetail"]) {
        ReferenceDetailViewController *referenceDetailViewController = [segue destinationViewController];

        UIViewController *referenceDetailView = [segue destinationViewController];

            NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
            NSString *destinationTitle = [[referenceArray objectAtIndex:[indexPath row]] name];
            [referenceDetailView setTitle:destinationTitle];
            referenceDetailViewController.auxTextColor = [UIColor redColor];
}

// .. 
```

在 ReferenceDetailViewController 中：

```
@interface ReferenceDetailViewController : UIViewController

@property (retain, nonatomic) UIColor *auxTextColor;

// ...

@end

@implementation ReferenceDetailViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    label1.textColor = self.auxTextColor;

    // ...
}

@end 
```

如果您必须为一组标签执行此操作，最好有一个 NSDictionary 对象来为您保存这些属性。

# entity-framework - 如何将 DBContext Generator 中的类映射到现有 POCO 域类

> ID：12029535
> 
> 赞同：1
> 
> 时间：2012-08-19T19:58:20.230
> 
> 标签：entity-framework, poco, dbcontext, edmx, database-first

我是实体框架和数据库优先方法的新手。谁能帮帮我吗？

情况如下：

我有一个干净、普通的域类（Person），只有属性。这个类是在一个 VS 项目中定义的，它只包含领域类，没有任何对实体框架或其他属于数据访问层的东西的引用。

我还有一个数据库表（tblPerson）。我为它创建了一个 EDMX 并使用 DbContext Generator 为其创建 POCO 类。

使用域类将实体框架引用与项目分开很重要，我想使用结合依赖注入的存储库模式。

问题是：

如何将实体框架 POCO 类“映射”到我现有的域类？它们具有相同的属性。我读过一些关于代理、伙伴课程等的内容，但没有找到任何好的例子。

请帮忙。

* * *

假设域模型类看起来像这样（只是一个例子）：

```
public class Person
{
   public int Id { get; set; }
   public string Name { get; set; }
} 
```

并且数据库表具有相同的列：

Id (int, not null, 主键) Name (nvarchar(50), not null)

* * *

**更新：**

好的，我找到了解决方案。我做了 Ladislav Mrnka 的建议并从 ObjectContext 派生。这是一个描述它是如何完成的页面：[Entity Framework 4.0 – Part4: How to use your own POCO's](http://mshelp.be/entity-framework-4-0-part4-how-to-use-your-own-pocos-333.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:53:30.570

如果要将“域对象”映射到 EF 生成的 POCO 类，则可以使用 AutoMapper [https://github.com/AutoMapper/AutoMapper/wiki等映射器](https://github.com/AutoMapper/AutoMapper/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:42:05.490

好的，我找到了解决方案。我做了 Ladislav Mrnka 的建议并从 ObjectContext 派生。这是一个描述它是如何完成的页面：[Entity Framework 4.0 – Part4: How to use your own POCO's](http://mshelp.be/entity-framework-4-0-part4-how-to-use-your-own-pocos-333.htm)

# node.js - 使用相同的 redis.createClient() 实例进行发布和订阅

> ID：12029540
> 
> 赞同：3
> 
> 时间：2012-08-19T19:59:01.073
> 
> 标签：node.js, redis, socket.io

我正在使用 redis 在 socket.io 客户端之间发布和订阅消息，当客户端连接到服务器 ( `io.sockets.on('connection', function(socket){...});`) 时，我正在使用创建`subscribe`变量`redis.createClient()`，然后使用 subscribe 函数将客户端订阅到频道。

我的问题是它是否有权使用相同的订阅变量来执行发布操作？或者创建另一个`redis.createClient()`用于发布消息的实例很重要，所以我将有 2 个实例，一个用于发布，一个用于订阅...

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T20:48:23.383

来自[Redis 文档](http://redis.io/commands/subscribe)：

> 一旦客户端进入订阅状态，它就不应该发出任何其他命令，除了额外的 SUBSCRIBE、PSUBSCRIBE、UNSUBSCRIBE 和 PUNSUBSCRIBE 命令。

出于这个原因，您将需要两个客户端，一个用于订阅，一个用于发布（可能还有其他命令）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:50:04.840

订阅变量是指 redis.createClient() 返回的对象？如果是，从文档中，`When a client issues a SUBSCRIBE or PSUBSCRIBE, that connection is put into "pub/sub" mode. At that point, only commands that modify the subscription set are valid.`是的，您不能发布到您首先订阅的客户端，这会发出`Error: Connection in pub/sub mode, only pub/sub commands may be used`错误。

您确实需要为订阅创建一个客户端（可以即时修改），以及一个要发布的客户端。当客户的订阅免费时，您又回到了正常状态。

# wordpress - @font-face 不适用于我的 Bones Wordpress 主题

> ID：12029541
> 
> 赞同：0
> 
> 时间：2012-08-19T19:59:12.963
> 
> 标签：wordpress, font-face

我正在尝试让自定义字体在 Bones Wordpress 主题中工作。我的字体系列位于“库 > 字体”文件夹中，就像主题说明一样。

```
 @font-face {
        font-family: 'ColaborateThinRegular';
        src: url('library/fonts/ColabThi-webfont.eot');
        src: url('library/fonts/ColabThi-webfont.eot?#iefix') format('embedded-opentype'),
             url('library/fonts/ColabThi-webfont.woff') format('woff'),
             url('library/fonts/ColabThi-webfont.ttf') format('truetype'),
             url('library/fonts/ColabThi-webfont.svg#ColaborateThinRegular') format('svg');
        font-weight: normal;
        font-style: normal;
    } 
```

我在我的样式表中这样称呼它：

```
 font-family: 'ColaborateThinRegular'; 
```

我尝试了一堆不同的字体，但没有一个工作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T15:15:41.830

我在骨骼上遇到了同样的问题，并使用相对路径来升级一个目录来修复它。对你来说应该是这样的：

```
 @font-face {
        font-family: 'ColaborateThinRegular';
        src: url('../fonts/ColabThi-webfont.eot');
        src: url('../fonts/ColabThi-webfont.eot?#iefix') format('embedded-opentype'),
             url('../fonts/ColabThi-webfont.woff') format('woff'),
             url('../fonts/ColabThi-webfont.ttf') format('truetype'),
             url('../fonts/ColabThi-webfont.svg#ColaborateThinRegular') format('svg');
        font-weight: normal;
        font-style: normal;
    } 
```

希望这可以帮助！

# ruby-on-rails - ruby on rails best_in_place gem 字段名称在错误显示时更改

> ID：12029547
> 
> 赞同：1
> 
> 时间：2012-08-19T19:59:37.183
> 
> 标签：ruby-on-rails, error-handling, best-in-place

所以我已经设置了**best_in_place** gem [[https://github.com/bernat/best_in_place]](https://github.com/bernat/best_in_place)但是当我尝试编辑的专栏看起来像`title_name`并且发生错误时它显示它时我遇到了一个小问题

```
'title_name can't be blank,is too short (minimum is 1 characters)' 
```

我想编辑 gem 处理错误显示的方式，以便它将`_`替换`space`为`user-friendly`

**编辑：**

**检查我通过**Firebug得到****的响应**是：**

 **```
{"title_name":["can't be blank","is too short (minimum is 1 characters)"]} 
```

**在 gem 演示中** [http://bipapp.heroku.com/users/59](http://bipapp.heroku.com/users/59)

```
["Last name has invalid length","Last name can't be blank"] 
```

这有点不同......

**编辑2：**

**post.rb**

```
class Post < ActiveRecord::Base
  attr_accessible :post_id, :title_name, :total_items, :user_id

  validates :title_name, :presence => true, :length => { :in => 1..50 }

  belongs_to :user, :foreign_key => 'post_id'

  self.primary_key = :post_id

  def to_param
    "#{post_id}"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T22:31:05.990

这实际上非常简单，与**best_in_pace** gem 无关。

修改文件**config/locales/en.yml**：

```
en:
  activerecord:
    models:
      attributes:
        post:
          title_name: 'Title name' 
```

现在该属性`title_name`应该替换为`'Title name'`您视图中的字符串。

**注意**：上面列出的方法覆盖了默认值，它*没有*设置默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:35:26.537

解决方案：

我发现best_in_place gem在保存未完成时使用以下方法显示错误

```
respond_with_bip(@user 
```

附在`format.json`as

```
format.json { respond_with_bip(@user) } 
```

所以用这段代码替换我通过json显示错误的方式解决了这个问题。**

# python - 这是个好主意吗——使用符号链接来合理化 Python 分发工具的行为

> ID：12029548
> 
> 赞同：2
> 
> 时间：2012-08-19T19:59:37.867
> 
> 标签：python, distribution

精简版 -

将多个 Python 路径/安装位置符号链接在一起是否安全，以便所有文件都引用相同的文件——以使用不同的分发工具和选项来掩盖混乱的安装历史？

加长版——

Python 的一个领域比其他领域更让我感到困惑 :) 是各种分发工具的不同行为（尽管[这个参考](http://guide.python-distribute.org/installation.html)非常愚蠢）。

问题之一是默认安装位置。我的信念（也许是不正确的）是很难避免使用多个分发工具，并且每个人对应该在哪里安装软件包都有不同的看法。很容易在多个位置使用包，如果您使用多个 Python 品牌/系统，那么如果您想使用来自多个环境/品牌/系统的相同库，则需要显式管理 Python 路径.

我现在了解如何使用明确命名要使用的安装目录的发行版工具选项和/或通过 virtualenv 来避免此问题。但是，我还需要解决我目前遇到的问题，而无需重新调整我的系统并重新安装一堆东西。

我对此的解决方案是将除一个文件夹之外的所有文件夹的内容移至剩余文件夹，并将其他文件夹重新创建为指向剩余文件夹的符号链接。到目前为止，它似乎运作良好。你能想到这种方法的任何缺点吗？这似乎有点太容易了:)

# c# - 表格正在关闭，但我不想

> ID：12029556
> 
> 赞同：1
> 
> 时间：2012-08-19T20:00:52.097
> 
> 标签：c#, winforms

我的表单上的关闭按钮遇到了一些问题。它曾经被设置为表单的取消按钮，但我将其更改为无。该表格的工作方式类似于指南...

如果表单在指南的某个步骤中，我想弹出 yes-no-messagebox。但是使用我现在拥有的代码，无论我单击是或否，它都会关闭表单。

按钮代码：

```
if (krok <= 5)
{
    if (MessageBox.Show("este ste neurobili vsetko naozaj chcete zavriet okno?", 
        "Pozor", 
        MessageBoxButtons.YesNo, 
        MessageBoxIcon.Warning) == DialogResult.Yes)
    {
        Close();
    }               
}
else Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:10:50.707

调试器是你的朋友。让您的生活更轻松，打破 ShowDialog 线。

```
var result = MessageBox.Show...
if (result == DialogResult.Yes)
{
  Close();
} 
```

在调试器中检查 result 的值。您还可以使用 Close() 在行上放置一个断点，看看它是否被命中。然后，您将确定该行或其他内容是否正在关闭您的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:15:03.357

每个按钮都有一个名为 的属性`DialogResult`。您可以直接在设计器窗口或代码中设置此属性。该属性的作用是关闭表单并（如果表单以模态方式显示）将该属性的值返回给表单调用代码。

在您的情况下，我怀疑此属性（在设计器窗口中）设置为不同于`DialogResult.None`. 如果是这种情况，那么无论您是否调用 Close()，您的表单都会关闭。

# c++ - 删除创建的 Qt 元素和子类

> ID：12029558
> 
> 赞同：0
> 
> 时间：2012-08-19T20:01:24.807
> 
> 标签：c++, qt, memory, delete-operator

我有一个关于 Qt 的问题。我想知道我应该如何删除我创建的所有指针。例如：

.h 文件

```
#ifndef MAINCALENDAR_H
#define MAINCALENDAR_H
#include<QWidget>
#include <QMap>
#include <QComboBox>
#include <QCalendarWidget>
#include <QRadioButton>
#include <QString>
#include <QtGui>
#include "selector.h"
#include <QInputDialog>

class mainCalendar : public QWidget
{
    Q_OBJECT
public:
    mainCalendar(QWidget * parent = 0);
    ~mainCalendar();
    void showAppointments();

public slots:
    void showLCFunc() {select->getTod()->getIntf()->getListClass().orderListChronologic(); printer * test = new printer; test->setList(TodFace->getList()); test->show();}
    void showLPFunc() {select->getTod()->getIntf()->getListClass().orderListByPriority(); printer * test = new printer; test->setList(TodFace->getList()); test->show();}
    void loadFile() {QString fileName = QFileDialog::getOpenFileName(this, tr("Open File"),"", tr("M-Calendar Files (*.mca)"));}
    void saveFile() {QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"),"", tr("M-Calendar Files (*.mca)"));qDebug() << fileName << endl;}
    void intshow();
    void updater() {if (!Interface->isHidden()) { app->setList(Interface->getList()); app->Beta_update(1,calendar->selectedDate()); }
        else if (!TodFace->isHidden()) {tod->setList(TodFace->getList()); tod->Beta_update(1,calendar->selectedDate());} }

private:
    QPushButton *showLC;
    QPushButton *showLP;
    QPushButton *searchButton;
    QPushButton *updateButton;
    QPushButton *saveButton;
    QPushButton *loadButton;
    QLabel *instructions;
    QPushButton *backButton;
    QPushButton *taskButton;
    interface * Interface;
    todFace * TodFace;
    showTod * tod;
    showApp * app;
    QCalendarWidget *calendar;
    QGridLayout *mainLayout;
    Selector * select;
};

#endif // MAINCALENDAR_H 
```

.cpp 文件：

```
#include "maincalendar.h"

mainCalendar::mainCalendar(QWidget *parent)
    : QWidget(parent)
{
    QHBoxLayout * footButtons = new QHBoxLayout;
    showLC = new QPushButton(tr("'to-do' (chrono)"));
    showLP = new QPushButton(tr("'to-do' (priority)"));
    searchButton = new QPushButton(tr("&Search"));
    saveButton = new QPushButton(tr("&Save calendar"));
    loadButton = new QPushButton(tr("&Load Calendar"));
    updateButton = new QPushButton(tr("Update"));
    footButtons->addWidget(searchButton);
    footButtons->addWidget(saveButton);
    footButtons->addWidget(loadButton);
    footButtons->addWidget(showLC);
    footButtons->addWidget(showLP);
    instructions = new QLabel(tr("To view or add data, double-click date in calendar"));
    calendar = new QCalendarWidget;
    calendar->setGridVisible(true);
    calendar->setMinimumDate(QDate(2012, 1, 1));
    calendar->setMaximumDate(QDate(2016,12,31));
    backButton = new QPushButton(tr("&Back to calendar"));
    select = new Selector(0,calendar,instructions,backButton, updateButton);

    tod = select->getTod();
    TodFace = tod->getIntf();
    TodFace->hide();
    TodFace->setCalendar(calendar);
    tod->hide();
    app = select->getApp();
    Interface = app->getIntf();
    Interface->hide();
    Interface->setCalendar(calendar);
    app->hide();

    backButton->hide();
    updateButton->hide();
    connect(showLC,SIGNAL(clicked()),this,SLOT(showLCFunc()));
    connect(showLP,SIGNAL(clicked()),this,SLOT(showLPFunc()));
    connect(updateButton, SIGNAL(clicked()), this, SLOT(updater()));
    connect(backButton, SIGNAL(clicked()), this, SLOT(intshow()));
    connect(loadButton,SIGNAL(clicked()),this,SLOT(loadFile()));
    connect(saveButton,SIGNAL(clicked()),this,SLOT(saveFile()));

    connect(calendar, SIGNAL(activated(QDate)), this, SLOT(intshow()));
    mainLayout = new QGridLayout;
    this->setMinimumHeight(800);
    this->setMinimumWidth(1000);
    mainLayout->setColumnMinimumWidth(0,500);
    mainLayout->addWidget(calendar,0,0);
    mainLayout->addWidget(app,1,0);
    mainLayout->addWidget(Interface,1,2);
    mainLayout->addWidget(tod,1,0);
    mainLayout->addWidget(TodFace,1,2);
    mainLayout->addWidget(backButton,0,0,Qt::AlignTop);
    mainLayout->addLayout(footButtons,2,0,Qt::AlignLeading);
    mainLayout->addWidget(instructions,2,0,Qt::AlignTrailing);
    mainLayout->addWidget(updateButton,2,2,Qt::AlignRight);
    setLayout(mainLayout);

    setWindowTitle(tr("M-Calendar"));
}

mainCalendar::~mainCalendar()
{
}

void mainCalendar::intshow()
{
    if (Interface->isHidden()&&TodFace->isHidden())
    {
        select->setDate(calendar->selectedDate());
        select->show();
        Interface->setdate(calendar->selectedDate());
        TodFace->setdate(calendar->selectedDate());
    } else
    {
        backButton->hide();
        updateButton->hide();
        Interface->hide();
        app->close();
        TodFace->hide();
        tod->close();
        calendar->show();
        instructions->show();
    }
} 
```

我被困在这里。我是否应该删除所有指针（QPushbutton 等）和子类，以免发生内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:04:55.623

简短回答：不，您不必明确删除它们。

在 Qt 中，QObject 被[组织在对象树中](http://qt-project.org/doc/qt-4.8/objecttrees.html)。各种小部件的父子关系也意味着父拥有子小部件的所有权。

因此，您不必在应用程序完成时显式删除它们。每个父母都会负责清理自己的孩子。只有当您创建（指向）没有父级的小部件/对象时，您才需要显式删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:07:31.700

通过`addWidget`您在这些与小部件之间创建父子关系。任何无父小部件都必须手动销毁，这反过来又递归地释放其子级。只要您的小部件具有父级，并且该父级是手动释放的，或者是另一个小部件的子级，则不需要手动释放。

QObject 派生类的帐户相同。

# mysql - 大量嵌套查询

> ID：12029562
> 
> 赞同：1
> 
> 时间：2012-08-19T20:01:43.860
> 
> 标签：mysql, sql

```
SELECT 
productos.prod_id,
productos.prod_codigo1,
productos.prod_descripcion,
(SELECT SUM(cotdetalle.cotd_cantidad)
    FROM cotdetalle
    WHERE cotdetalle.cotd_codigo = productos.prod_codigo1
    AND cotdetalle.cotd_cote_id IN(
            SELECT cotencabezado.cote_id
            FROM cotencabezado
            WHERE cotencabezado.cote_status = 'cerrada'
            AND MONTH(cotencabezado.cote_cierre) = MONTH(NOW()) AND YEAR(cotencabezado.cote_cierre) = YEAR(NOW())
    )
) AS cuantos,
(SELECT SUM(cotdetalle.cotd_cantidad * cotdetalle.cotd_precio)
    FROM cotdetalle
    WHERE cotdetalle.cotd_codigo = productos.prod_codigo1
    AND cotdetalle.cotd_cote_id IN(
            SELECT cotencabezado.cote_id
            FROM cotencabezado
            WHERE cotencabezado.cote_status = 'cerrada'
            AND MONTH(cotencabezado.cote_cierre) = MONTH(NOW()) AND YEAR(cotencabezado.cote_cierre) = YEAR(NOW())
    )
) AS monto
FROM productos
ORDER BY monto DESC
LIMIT 0, 50 
```

昨晚提出了这个问题，我想我的问题是：是不是太多了？我很确定还有其他方法可以在没有所有嵌套查询的情况下获得相同的结果。它可以工作，但在我的开发环境中需要一些时间，我敢打赌在生产环境中需要更多时间......任何建议? 如果您需要表格结构，请告诉我...

编辑：实际上第二个 SELECT 是最困扰我的，它与第一个完全相同，但我需要第二个结果，但是如果我尝试在第一个 SELECT 中获得第二个结果，它会给我“操作数应该包含 1列”错误...

更多信息：我需要能够通过 monto、cuantos、productos.prod_codigo1、productos.prod_descripcion 订购

sqlfiddle.com 示例：[http ://sqlfiddle.com/#!2/c4391/1](http://sqlfiddle.com/#!2/c4391/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T00:36:15.440

您应该通过以下方式与组进行简单的加入：

```
SELECT p.prod_id, p.prod_codigo1, p.prod_descripcion,
       t.quantos, t.monto
FROM productos p left outer join
     (SELECT cotdetalle.cotd_codigo, SUM(cotdetalle.cotd_cantidad) as quantos,
             SUM(cotdetalle.cotd_cantidad * cotdetalle.cotd_precio) as monto
      FROM cotdetalle
      WHERE cotdetalle.cotd_codigo = productos.prod_codigo1 and
            cotdetalle.cotd_cote_id IN
                (SELECT cotencabezado.cote_id
                 FROM cotencabezado
                 WHERE cotencabezado.cote_status = 'cerrada' and
                       MONTH(cotencabezado.cote_cierre) = MONTH(NOW()) AND 
                       YEAR(cotencabezado.cote_cierre) = YEAR(NOW()
               )
      group by cotdetalle.cotd_codigo
    ) t
    on t.cotd_codigo = p.prod_codigo1
ORDER BY monto DESC
LIMIT 0, 50 
```

这应该会有所改善。然而，MySQL 在 IN 和子查询方面做得很差。因此，我们希望将其更改为联接，而不是子查询中的“IN”。注意在子查询中添加了“distinct”。这对于 IN 不是必需的，但对于连接来说是必需的：

```
SELECT p.prod_id, p.prod_codigo1, p.prod_descripcion,
       t.quantos, t.monto
FROM productos p join
     (SELECT cd.cotd_codigo, SUM(cd.cotd_cantidad) as quantos,
             SUM(cd.cotd_cantidad * cd.cotd_precio) as monto
      FROM cotdetalle cd join
           (SELECT distinct cc.cote_id
            FROM cotencabezado cc
            WHERE cc.cote_status = 'cerrada' and
                  MONTH(cc.cote_cierre) = MONTH(NOW()) AND 
                  YEAR(cc.cote_cierre) = YEAR(NOW()
           ) cc
           on cd.cotd_cote_id = cc.cote_id
      group by cd.cotd_codigo
    ) t
    on t.cotd_codigo = p.prod_codigo1
ORDER BY monto DESC
LIMIT 0, 50 
```

我没有在 SQL Fiddle 上对此进行测试，因此可能存在语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:13:29.457

为什么不将语句简化为

```
SELECT productos.prod_id,
productos.prod_codigo1,
productos.prod_descripcion,
( SELECT SUM(cotdetalle.cotd_cantidad) AS cuantos,
         SUM(cotdetalle.cotd_cantidad * cotdetalle.cotd_precio) AS monto
  FROM cotdetalle
  WHERE cotdetalle.cotd_codigo = productos.prod_codigo1
  AND cotdetalle.cotd_cote_id IN( SELECT cotencabezado.cote_id
                                  FROM cotencabezado
                                  WHERE cotencabezado.cote_status = 'cerrada'
                                  AND MONTH(cotencabezado.cote_cierre) = MONTH(NOW())
                                  AND YEAR(cotencabezado.cote_cierre) = YEAR(NOW())
                                 )
)
FROM productos 
ORDER BY monto DESC
LIMIT 0, 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T04:30:33.300

好吧，就这样结束了：

```
SELECT p.prod_id, p.prod_codigo1, p.prod_descripcion, t.cuantos, t.monto
FROM productos AS p
LEFT JOIN(
    SELECT cd.cotd_codigo,
    SUM(cd.cotd_cantidad) AS cuantos,
    SUM(cd.cotd_cantidad * cd.cotd_precio) AS monto
    FROM cotdetalle AS cd
    JOIN(
        SELECT DISTINCT ce.cote_id
        FROM cotencabezado AS ce
        WHERE ce.cote_status = 'cerrada'
        AND MONTH(ce.cote_cierre) = MONTH(NOW())
        AND YEAR(ce.cote_cierre) = YEAR(NOW())
    ) AS ce
    ON cd.cotd_cote_id = ce.cote_id
    GROUP BY cd.cotd_codigo
) AS t
ON cd.cotd_codigo = p.prod_codigo1
ORDER BY monto DESC
LIMIT 0, 50 
```

这工作得更好，它基于 Gordon Linoff 的建议，谢谢伙计！

# javascript - Dojo 栏菜单在选定状态下堆叠

> ID：12029563
> 
> 赞同：1
> 
> 时间：2012-08-19T20:01:47.813
> 
> 标签：javascript, dojo

有谁知道如何以编程方式取消选择 dojo dijit.MenuBarItem。问题是，当我选择 dijit.MenuBar 上的一项时，弹出对话框（我可以看到条形菜单项被取消选择），用户输入信息并关闭对话框，但条形菜单项再次被选中并且一直处于选中状态。我试过了：

```
dijit.byId("navMenu")._markInactive();  
dijit.byId("navMenu").isActive = false; 
```

或者

```
dijit.byId("transId")._markInactive();
dijit.byId("transId").isActive = false; 
```

但它不这样做。请问还有什么建议，谢谢

```
<div data-dojo-type="dijit.layout.ContentPane" id='barPane'data-dojo-props="region:'top'" style="padding:0px;">
<div data-dojo-type="dijit.MenuBar" id="navMenu">
<div data-dojo-type="dijit.MenuBarItem" data-dojo-props="onClick:uploadAndClearDialog">Upload</div>
<div data-dojo-type="dijit.MenuBarItem" data-dojo-props="onClick:exportCsv">Download</div>
<div data-dojo-type="dijit.MenuBarItem" data-dojo-props="onClick:showTranslateDialog" id="transId">Translate</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T13:08:26.427

我将语句“_setSelected(false)”放在进程结束前的最后，它运行良好。

例如：

```
function yourFnt() {
    // Close dialog
    dijit.byId('yourDlg').onCancel();

    require(["dojo/request","dojo/domReady!" ],
    function(request) {
        var vURL = "yourserviceURL"
        var deferred = request.get(vURL, {
                        handleAs : "json"
                    });
        deferred.then(function(response) {
            ...
            ...
            // Unselect menuitem
            dijit.byId("yourMenuItem")._setSelected(false);
            });
        });
} 
```

# c# - C# 将值插入字符串

> ID：12029572
> 
> 赞同：0
> 
> 时间：2012-08-19T20:02:43.093
> 
> 标签：c#, regex, string, replace

好的，所以基本上我有一个看起来像这样的字符串

“这是随机文本 [这也是随机的] [另一个随机文本] 嘿嘿 [随机条]”

我希望输出是

“这是随机文本 [[这也是随机文本]] [[另一个随机文本]] 嘿嘿 [[随机条]]”

所以基本上找到每个 [ 并附加一个 [ 到它和 ] 相同

最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:05:50.613

> 所以基本上找到每个 [ 并附加一个 [ 到它和 ] 相同

听上去像：

```
text = text.Replace("[", "[[")
           .Replace("]", "]]"); 
```

对我来说......根本不需要正则表达式。

那是假设您当然不需要担心*已经*加倍的括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:23:08.910

这将更有效，因为永远不必调整数组的大小。尽管差异很小，但您最好使用 Jon Skeet 的方法。

```
public string InsertBrackets(string text)
{
    int bracketCount = 0;
    foreach (char letter in text)
        if (letter == '[' || letter == ']')
            bracketCount++;

    StringBuilder result = new StringBuilder(text.Length + bracketCount);

    for(int i = 0, j = 0; i < text.Length && j < result.Length; i++, j++)
    {
        result[j] = text[i];

        if (text[i] == '[')
            result[++j] = '[';
        else if (text[i] == ']')
            result[++j] = ']';
    }

    return result.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:15:50.983

或者假设你已经用正则表达式标记了这个：

```
var foo = "this is random text [this is random too] " +
    "[another random text] hey ho [random bar]";
var regex = new Regex(@"\[(.*?)\]");
string bar = regex.Replace(foo, @"[[$1]]"); 
```

# mysql - SHA1总和作为主键？

> ID：12029578
> 
> 赞同：3
> 
> 时间：2012-08-19T20:03:18.610
> 
> 标签：mysql, sha1

我打算将文件名和其他详细信息存储在一个表中，我打算使用文件名的 sha1 哈希作为 PK。

*   Q1。SHA1 PK 不会是一个顺序增加/减少的数字。那么，数据库维护/search_into 和索引该键是否会消耗更多资源？如果我决定将它作为 40 字符值保存在数据库中。

*   Q2。我在这里读到： [https](https://stackoverflow.com/a/614483/986818) ://stackoverflow.com/a/614483/986818将数据存储为二进制（20）字段。有人可以在这方面给我建议：

*   a) 我是否必须将此列创建为：TYPE=integer、LENGTH=20、
    COLLATION=binary、ATTRIBUTES=binary？
*   b) 如何将 MySQL 或 Perl 中的 sha1 值转换为存储到表中？
*   c) 这 20 个字符的值是否存在重复的危险？

**

> - - - - -更新 - - - - - - -

**

要求是在文件名上搜索表。用户提供文件名，我去搜索表，如果文件名不存在，则添加它。因此，要么我在 varchar(100) 文件名字段上编制索引，要么生成一个带有文件名 sha1 的列 - 希望与索引 varchar 字段相比，为 MySql 编制索引会更容易。我也可以使用我的程序中的 sha1 值对 sha1 列进行搜索。说啥？主键或只是索引键：我选择 PK 因为 DBIx 喜欢使用 PK。并且 PK 或 INDEX+UNIQ 对系统来说将是相同数量的开销（所以我认为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:08:24.290

这里没有理由使用加密安全哈希。相反，如果您这样做，请使用普通哈希。见这里：[https ://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed](https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed)

哈希不是 40 字符值！这是一个 160 位的数字，您应该以这种方式存储它（作为 20 字符的二进制字段）。编辑：我看到你在评论 2 中提到了这一点。是的，你绝对应该这样做。但是我不能告诉你怎么做，因为我不知道你使用的是什么编程语言。Edit2：我看到它是 perl - 抱歉，我不知道如何在 perl 中转换它，但寻找“pack”函数。

不，不要将其创建为整数类型。最大整数是 128 位，不包含整个内容。尽管您实际上可以将其截断为 128 位而不会造成真正的伤害。

无论如何，最好使用更简单的哈希。你可以冒险并忽略碰撞，但如果你做得好，你有点不得不处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:13:15.493

> 如果我决定将它作为 40 字符值保存在数据库中。

由于显而易见的原因，使用字符序列作为键会降低性能。

PK也应该是唯一的。尽管您最终不太*可能*发生冲突（理论上将其用于创建 PK 的函数似乎不合适。
此外，任何知道您使用的文件名和哈希的人都会知道您的所有数据库 ID。我不确定是否这是不应该考虑的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:13:33.030

Q1：是的，它需要建立一个节点的 B 树，其中不仅包含 1 个整数（4 个字节），还包含一个 CHAR（40）。只要 INDEX 保存在内存中，速度就会大致相同。由于条目大约大 10 倍，因此您需要多 10 倍的内存才能将其保存在内存中。但是：无论如何，您可能都想通过哈希查找。因此，您需要将其作为主键或索引。

Q2：只需创建一个表字段，如 CREATE TABLE test (ID BINARY(40), ...); 稍后您可以使用 INSERT INTO test (ID, ..) VALUES (UNHEX('4D7953514C'), ...);

- 关于：这 20 个字符的值是否存在重复的危险？

机会是 1 in 2^(8*20)。1 in 1,46 * 10^48 ... 或 1 的 14615016373309029182036848327163*10^18。所以这个机会是非常非常v..不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T20:18:36.287

我会坚持使用主键的标准自动递增整数。如果文件名的唯一性很重要（听起来确实如此），那么您可以在文件名本身或文件名的某些派生的规范版本上添加 UNIQUE 约束。大多数语言/框架都有某种方法来获取路径的规范版本（相对于绝对、标准化大小写等）。

如果您实施我的建议或追求您的原始计划，那么您应该知道多个字符串可以映射到相同的文件名/路径。两个版本都有不同的哈希值/通过唯一性约束，但实际上都引用同一个文件。这取决于操作系统，对您来说可能是也可能不是问题。只是要记住的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T20:56:17.590

好的，然后在文件名上使用非常短的散列并接受冲突。为它使用整数类型（那要快得多！！！）。例如，您可以使用 md5(filename) 然后使用前 8 个字符并将它们转换为整数。SQL 可能如下所示：

```
CREATE TABLES files (
  id INT auto_increment,
  hash INT unsigned,
  filename VARCHAR(100),

  PRIMARY KEY(id),
  INDEX(hash)
); 
```

然后你可以使用：

```
SELECT id FROM files WHERE hash=<hash> AND filename='<filename>'; 
```

然后哈希用于整理大多数其他文件（通常是所有其他文件），然后文件名用于从少数哈希冲突中选择正确的条目。

为了在 perl 中生成整数哈希键，我建议使用 md5() 和 pack()。

# mysql - 在 MySQL 查询中为每个用户的列添加不同值的计数

> ID：12029598
> 
> 赞同：0
> 
> 时间：2012-08-19T20:06:18.023
> 
> 标签：mysql, count, distinct

我有以下查询，它按名称列对 MySQL 表中的所有条目进行分组：

```
"SELECT * FROM visits GROUP by Name" 
```

我使用它在 html 表中为每个返回的 Name 生成一行。我想将这些行（包含名称）中每一行中第一个单元格的行跨度设置为同一表中名为“Page”的第二列中每个名称的唯一条目数的计数，我认为我需要使用相同的查询来执行此操作。

因此，例如，如果 MySQL 表 'visits' 中有 50 个条目/行用于名称 'Nick'，并且在列 'Page' 中有五个不同的值用于 Nick，则生成的标记将是：

```
<tr><td rowspan="5">Nick<td>.... 
```

我将如何编写查询来实现这两个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:13:53.943

您可以使用`COUNT(DISTINCT column)`.

```
SELECT Name, COUNT(DISTINCT Page) AS Page_Distinct FROM visits GROUP BY Name 
```

在本地测试，它给出了正确的结果。

# lua - 魔兽世界聊天框过滤器冲突

> ID：12029604
> 
> 赞同：1
> 
> 时间：2012-08-19T20:07:14.247
> 
> 标签：lua, world-of-warcraft

我有一个试图启动的 WoW/LUA 脚本，但它似乎与 Stubby 插件冲突，我相信它是 Auctioneer 插件的一部分。这是我收到的消息：

> 错误发生在：存根计数：1 消息：错误：运行挂钩后原始调用失败：ChatFrame_OnEvent 用法：SendChatMessage(text [,type] [,language] [,targetPlayer]) 调试：（
> 尾调用） ：？[字符串“ *：OnEvent”]：1：[字符串“*：OnEvent”]：1

现在，冲突插件中唯一发生的事情是：

```
ChatFrame_AddMessageEventFilter("CHAT_MSG_PARTY", partyMsg) 
```

partyMsg 中的代码也很简单：

```
local function partyMsg(msg,author,language,lineID,senderGUID)
  if (store ~= msg) then
    SendChatMessage(msg,"SAY",nil,nil);
  end
  store = msg;
end 
```

这个错误是因为两个插件都试图过滤聊天框吗？如果是这样，如何做到这一点？对我来说，暴雪将一个如此简单但重要的概念限制在一个插件上，这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:30:22.170

我想我明白这里发生了什么。

您使用的参考[Events/Communication](http://www.wowwiki.com/Events/Communication)仅显示特定事件的特定参数，而与上下文无关。

上下文通常是一个 OnEvent 处理程序。

[ChatFrame_AddMessageEventFilter](http://wowwiki.com/API_ChatFrame_AddMessageEventFilter)函数允许您使用聊天框架的OnEvent 处理程序而不是您自己的处理聊天框架事件，并且为您添加的过滤器提供了明确定义的参数。

OnEvent 处理程序可能如下所示：

```
function Foo_OnEvent(self, event, ...) 
```

对于前两个参数，“ChatFrame”过滤器必须如下所示：

```
function Foo_ChatFrameFilter(self, event, msg, ...) 
```

ChatFrame 过滤器是特定的。但是，对于 OnEvent，您可以制作一个不关心它来自哪个帧的 Lua“处理程序”：

```
<OnEvent>
    MyEventHandler(event, ...)
</OnEvent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T23:59:34.360

为了完整起见，我将包含此插件的全部来源：

```
local function partyMsg(someTable,msgType,msg,user,language,...)
  if (store ~= msg) then
      SendChatMessage(user .. " just said: ".. msg .. " using that sneaky " .. language .. " language.");
  end
  store = msg;
  return false;
end

ChatFrame_AddMessageEventFilter("CHAT_MSG_PARTY", partyMsg)
ChatFrame_AddMessageEventFilter("CHAT_MSG_PARTY_LEADER",partyMsg) 
```

原始代码有几个问题：

1) 我使用[WoWWiki](http://www.wowwiki.com/Events/Communication)来获取我的信息，首先，我读错了。lineID 和 senderGUID 不是第 4 和第 5 个参数。然后，除此之外，WoWWiki 通常在此页面上是不正确的。正确的论点在上面的源代码中列出。第一个参数，一个表，我不确定它的用途。无论如何，此代码现在可以完全正常工作。

# php - 在sql中选择查询

> ID：12029608
> 
> 赞同：3
> 
> 时间：2012-08-19T20:08:04.577
> 
> 标签：php, mysql

我需要为表“产品”生成一个 sql 查询。表结构如下：

```
item_no   pack_no   name   model   sellingprice   discount   price_rs    quality

 101       1001      aa     2001      $500          10%      Rs.24750   excellent
 102       1002      bb     1996      $400           5%      Rs.20900     poor
 103       1003      cx     1986      $400           5%      Rs.20900     good
 104       1004      dx     2010      $500          10%      Rs.24750     poor
 .           .        .      .         .             .            .
 .           .        .      .         .             .            .

 .           .        .      .         .             .            . 
 .           .        .      .         .             .            .

 500       5000      bx     1998      $200           10%     Rs.9900      very good 
```

等等..

我有各种条件，如下所示：

说，

我需要过滤所有产品

```
model is between 1990 to 2010   
AND
sellingprice is between 600 to 700  
AND
discount is between 0 to 20%
AND 
quality is between good and excellent 
```

所有这些都在一个 SELECT 语句中。有可能还是我需要创建不同的语句然后连接结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:25:17.273

您可以在单个 SELECT 查询中执行此操作并动态构建它。

例如，假设您可以使用两个组合框在 1990 年到 2010 年之间拥有“模型”。组合框的默认值为“任意”：

```
$ands = array();

$betweens = array('model', 'sellingprice', ...);

foreach ($betweens as $basekey)
{
    $key1 = $basekey . '_from';
    if (!isset($_POST[$key1]))
        continue;
    if ('' == ($val1 = $_POST[$key1]))
        continue;
    $key2 = $basekey . '_to';
    if (!isset($_POST[$key2]))
        continue;
    if ('' == ($val2 = $_POST[$key2]))
        continue;
    // Check that val1 and val2 have sane values
    // PDO would be a little different, and slightly more complicated

    // On the other hand, if NOT using PDO, SQL injection has to be taken into
    // account. Just in case.
    if (!is_numeric($val1))
        $val1 = "'" . mysql_real_escape_string($val1) . "'";
    if (!is_numeric($val2))
        $val2 = "'" . mysql_real_escape_string($val2) . "'";

    $ands[] = "($basekey BETWEEN $val1 AND $val2)";
} 
```

现在您有了一组可以与 AND 连接的附加的可选条件：

```
$and_query = implode(' AND ', $ands); 
```

如果不为空，则可以使用结果条件：

```
$query = "SELECT ... WHERE ( main conditions )";

if (count($ands))
    $query .= " AND ( $and_query ) "; 
```

您还可以使用与 $betweens 中列出的字段不同的字段添加条件“等于”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:12:45.477

它可以在一个选择查询中完成......这是示例：

```
select field-1, field-2,.....,field-n
from tablename
where (field-1 between value-1 and value-2)
AND (field-2 between value-3 and value-4)
AND (field-3 IN ('value-5', 'value-6',...,'value-n'))
............
AND (field-n ....[CONDITION].......)
where [CONDITION] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T20:20:16.407

是的，有可能。

```
Select * from table
where
(model between 1990 and 2010)  
AND
(sellingprice between 600 and 700)  
AND
(discount between 0 and 20)
AND 
(quality IN ('good', 'very good', 'excellent')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T20:18:31.293

```
SELECT * 
FROM products 
WHERE model >=1990 AND model <= 2010 
    AND sellingprice >= 600 AND sellingprice <=700 
    AND discount <= 20 
    AND (quality ="good" OR quality ="very good" OR quality ="excellent") 
```

仅当“$”和“%”符号未存储在 DB 中时才有可能

# visual-studio-2010 - 使用并行 nsight 2.2 创建新的 CUDA 项目

> ID：12029612
> 
> 赞同：3
> 
> 时间：2012-08-19T20:08:24.607
> 
> 标签：visual-studio-2010, cuda, nvidia, nsight

我只是将我的 Nsight 从 2.1 更新到 2.2 之后，当新的 CUDA 4.x 项目创建时，我总是得到这个：用户取消了保存对话框（HRESULT 的异常：0x8004000C（OLE_E_PROMPTSAVECANCELLED））
我在 VS 中得到了这个10 与 CUDA 4.2
配置 - win7 x64 + GTX 560 + GeForce 210

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:40:58.683

说到这个答案的日期，我已经努力使用 Nsight Visual Studio 制作 CUDA 4.x。但是问题一直存在，重新安装东西对我没有帮助。在对这次失败感到非常失望之后，我决定尝试一下 CUDA 5。

它从一个安装程序安装；包括 SDK、工具包、示例、Nsight Visual Studio、GPU 驱动程序，就像一个魅力。但它只包含用于开发的 5.0 运行时。

注意：运行 Windows 8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T02:54:42.303

实际上，我刚刚在使用 CUDA 4.2 和 Visual Studio 2010 时遇到了同样的问题。不过在我切换到 CUDA 5.0 后它已经解决了。

# java - 如何知道 Android 中 AutoCompleteTextView 的选定项的位置？

> ID：12029614
> 
> 赞同：1
> 
> 时间：2012-08-19T20:08:39.907
> 
> 标签：java, android, sqlite, android-cursoradapter

我有一个自动完成文本视图。我通过扩展 CursorAdapter 来设置它的适配器。从下拉列表中选择一个选项后，我想知道被选中的项目或项目的位置。至少，我想要一个用于在 Sqlite 中获取更多数据的 id。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:14:08.207

只需覆盖 AutoCompleteTextView 的 OnItemClickedListener 即可`position`在下拉列表或 SQLite 行中找到该项目`id`：

```
autoCompleteTextView.setOnItemClickedListener(new OnItemSelectedListener() {
    @Override
    public void onItemClicked(AdapterView<?> parent, View view, int position, long id) {
        // Do whatever you want with the position or id
    }
}); 
```

# java - 为什么我的 TableRow 中的视图对它们的权重没有反应？

> ID：12029615
> 
> 赞同：0
> 
> 时间：2012-08-19T20:09:04.077
> 
> 标签：java, android, android-tablelayout

我正在编写一个 Android 应用程序，我正在尝试显示一个表格。我的问题是，这些列没有填满屏幕，它们都粘在左边。

我已经尝试过使用填充，但首先我不认为它与所有显示分辨率兼容，其次当它们具有不同的内容时，列的对齐方式不同。

然后我读到了重量，这正是我想要的，给每一列屏幕宽度的特定百分比。但重量确实导致细胞再次粘在左边。他们确实对我设置的权重没有任何反应。

我在 xml 模板中对视图进行编程，并使用 LayoutInflater 以编程方式对它们进行膨胀。然后我将它们添加到相应的 TableRow 中。所有这一切都很好，但他们只是对重量没有反应。

我将衷心感谢您的帮助。

编辑：模板指的是一种风格，看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/scheduleClass" /> 
```

样式如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="scheduleItem" parent="@android:style/TextAppearance.Medium">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:paddingRight">0dp</item>
        <item name="android:paddingBottom">10dp</item>
    </style>
    <style name="scheduleClass" parent="scheduleItem">
        <item name="android:layout_weight">0.2</item>
    </style>
</resources> 
```

还有其他一些列，但它们只有另一个名称和另一个权重。

这就是我将视图添加到表中的方式：

```
public void updateList(ArrayList<Lesson> lessons) {
    setContentView(R.layout.schedule);
    TableLayout table = (TableLayout) findViewById(R.id.table);

    for(Lesson cancel : lessons) {
        TableRow row = new TableRow(this);

        TextView date = (TextView) this.getLayoutInflater().inflate(R.layout.scheduledatetemplate, null);
        date.setText(cancel.date);

        TextView classname = (TextView) this.getLayoutInflater().inflate(R.layout.scheduleclasstemplate, null);
        classname.setText(cancel.classname);

        TextView lesson = (TextView) this.getLayoutInflater().inflate(R.layout.schedulelessontemplate, null);
        lesson.setText(cancel.lesson);

        Button details = (Button) this.getLayoutInflater().inflate(R.layout.detailsbuttontemplate, null);
        details.setText(R.string.details);
        details.setOnClickListener(this);

        row.addView(date);
        row.addView(classname);
        row.addView(lesson);
        row.addView(details);

        table.addView(row);
    }
} 
```

这是 TableLayout xml：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:scrollbars="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/table"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scrollbars="vertical">

    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:04:08.757

您需要为您的 s声明`android:layout_column`和`android:layout_span`属性`TableRow`

请参阅[http://developer.android.com/reference/android/widget/TableRow.LayoutParams.html](http://developer.android.com/reference/android/widget/TableRow.LayoutParams.html)

在此处查看示例： [http ://www.mkyong.com/android/android-tablelayout-example/](http://www.mkyong.com/android/android-tablelayout-example/)

更新：好的，你需要在你创建的每一行中设置 layout_span 和 layout_column，使用这个 addView 方法：http: [//developer.android.com/reference/android/widget/TableLayout.html#addView （android.view.View](http://developer.android.com/reference/android/widget/TableLayout.html#addView(android.view.View)，int，android.view.ViewGroup.LayoutParams）

为布局参数提供适当的列和跨度，使您的行跨越整个表格，并让行重力=中心使其内容位于中心。

此外，表属性`strechColumns` [http://developer.android.com/reference/android/widget/TableLayout.html#attr_android:stretchColumns](http://developer.android.com/reference/android/widget/TableLayout.html#attr_android:stretchColumns) 可能会帮助你，如：

```
android:strechColumns="*" 
```

或类似的东西。

# node.js - 将 Node.js 应用程序上传到 cloudfoundry 时出现明确错误

> ID：12029616
> 
> 赞同：0
> 
> 时间：2012-08-19T20:09:11.630
> 
> 标签：node.js, cloud-foundry, vmc

我试图将 node.js 应用程序上传到 Cloud Foundry，我不打算使用 Express Framework，但是在执行“vcm push”时出现此错误。

```
Uploading Application:
No such file or directory - /Users/jtomasrl/Code/node/pronto/node_modules/express 
```

这是我的 package.json

```
{
"name": "karaoke-api",
"version": "0.0.1",
  "dependencies": {
    "pronto": "*",
    "pronto-mongodb": "*"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:23:47.120

只是为了提供“答案”，当这种情况确实出现时，值得清空 node_modules/.bin 甚至删除 node_modules 本身并重新安装模块；

```
npm install 
```

# javascript - 使用 ReqiureJS 拥有 3rd 方库的本地实例

> ID：12029617
> 
> 赞同：0
> 
> 时间：2012-08-19T20:09:17.837
> 
> 标签：javascript, jquery, jquery-plugins, requirejs

我的应用程序的 JavaScript 使用 jQuery 和 jQuery 插件并在我无法控制的“敌对”环境中运行（这是电子商务平台的 PHP 扩展）。因此，无法确定我的 jQuery 代码是否会在有人附加他的 jQuery/插件实例（由其他扩展引入）之前或之后执行，或者有人会在页面呈现后动态加载 jQuery。

基本上问题是其他扩展也可以使用 jQuery（带有插件）并且仅将 jQuery 与标签连接是行不通的。

我有一种强烈的感觉，RequireJS 可能会帮助我将所需版本的 jQuery 加载到封装范围内的特定版本的 jQuery 插件，而不会污染全局范围（因此其他扩展仍然可以正常运行）。然后我将把我所有的代码包装到“require”语句中，它将使用它自己的一组 jQuery 和插件运行。我试过这个并且它有点工作（虽然没有在生产环境中测试过）但是以某种奇怪的方式。似乎[这个问题](https://stackoverflow.com/questions/12001945/requirejs-different-jquery)与我遇到的问题有点相关。还回答建议使用与 AMD 兼容的 jQuery 版本。但是插件呢？我不认为我使用的所有插件都有这样的版本。

所以问题：

RequireJS 可以用来覆盖这样的用例（在未定义的环境中运行 jQuery+插件）吗？如果 RequireJS 可以在那里使用，那么任何示例代码或如何正确执行此操作的解释将不胜感激。如果没有办法用 RequireJS 来解决这个问题，您认为处理问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:49:36.540

是的，我相信 RequireJS 可以在这里为您提供帮助。不过，据我所知，你必须做一些跑腿工作。看看（截至 2012 年 8 月 19 日）最新 jQuery 的来源：[link](http://code.jquery.com/jquery-1.8.0.js)。在底部，您可以看到`window.jQuery`正在设置、定义`jQuery`和`$`. 之后会`define`调用 AMD 加载程序，因此`jQuery`无论如何都在全局范围内。您想要做的是保证您自己的 jQuery 和插件版本与其他 jQuery 实例和插件保持隔离，对吗？

将您的自定义 jQuery 和插件放入它们自己的目录（我们称之为“jqcustom”）并在脚本`define`调用中指定依赖项时使用该目录。您需要修改您的 jQuery 版本，方法是将其包装在一个`define`调用中并`jQuery`在最底部返回对象，取出 jQuery`window.jQuery`和`window.$`赋值以及它`define`在该过程中的默认调用（这些都在底部，请记住）。然后，您需要将所有插件包装在`define`调用中，并将您自己的版本指定`jQuery`为依赖项。例子：

```
define(['jqcustom/jquery'], function(jQuery) {
    //inside this method 'jQuery' will override any predefined global window.jQuery

    //in case any plugins use the $ variable, define that locally too
    var $ = jQuery;

    //... plugin code ...

}); 
```

[如果您使用 RequireJS 的优化器，它可以使用其shim 配置](http://requirejs.org/docs/api.html#config-shim)选项为您包装插件。jQuery 插件通过向 jQuery 的原型对象添加方法来工作，所以我相信只要您将相同的`jQuery`（您的自定义`jqcustom/jquery`的）传递给带有`define`包装的每个插件，插件的扩展将全部设置在同一个对象上，并且可以在后续访问`define`调用将您的自定义`jQuery`或自定义插件指定为依赖项。祝你好运！

# jquery - 将 jQuery 队列导入 Zepto JS

> ID：12029623
> 
> 赞同：0
> 
> 时间：2012-08-19T20:09:47.877
> 
> 标签：jquery, queue, zepto

我正在尝试在项目中使用 Zepto JS 而不是 jQuery，但是 Zepto JS 缺乏像 jQuery 那样的“队列”系统，这让我感到很困难。有没有人制作了用于 Zepto JS 的 jQuery 队列内容的插件/端口？或者，如果没有，我可以使用类似的第 3 方替代方案吗？

提前感谢您对此的任何建议/帮助！

仅供参考，这是这里问题的一个衍生：[使用 zepto，是否可以对动画进行排队？](https://stackoverflow.com/questions/8963170/using-zepto-is-it-possible-to-queue-animations/12028841#12028841)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:33:41.623

我也在寻找一个好的解决方案。

em，现在，我选择自己制作，只需将一个模块从zepto的动画模块中包装出来。

所以你应该自己编写一个队列，也许现在是学习谁来处理动画的好时机:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T14:06:32.477

这个[要点](https://gist.github.com/zohararad/6291798)对我有用。正如它所说，它只是 JQuery 源代码的复制粘贴。

# html - 如何使网页移动？

> ID：12029624
> 
> 赞同：3
> 
> 时间：2012-08-19T20:09:52.050
> 
> 标签：html, mobile, webpage, meta-tags

是否有任何特定的 html 标签或元标签告诉网页是为移动设备设计的？我创建了一个链接移动网页的移动站点地图，但我担心搜索引擎不会将这些网页识别为移动版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:21:38.233

如果您要使用这种技术，我建议您在 CSS 中使用**[媒体查询，并首先专注于开发您的移动网站。](http://www.w3.org/TR/css3-mediaqueries/)**

基本示例

```
@media only screen and (min-width: 480px){
  //insert styles SPEFIC to resolutions greater than 480px wide
} 
```

关于评论：

```
//default CSS
.hidden-for-mobile{ display: none;}
//overrides the hidden style, and displays your element in larger resolution browsers.
@media only screen and (min-width: 480px){
  display: inline; //or block or whatever you want 
} 
```

*很可能有一种不同或更好的方法来实现这一点，但重点是......*

**如果您试图控制网站的外观/感觉，请尽量将其保留在样式表中**

**专业提示：** *您将希望使用* `em / %` *基于宽度来确保您的网站*正确响应*您的用户浏览器*

**[在此处](http://www.initializr.com/try)**查看使用 HTML5 样板的工作示例。

和媒体查询浏览器支持列表**[在这里](http://html5please.com/)**

* * *

*此外*，如果您担心跟踪您的用户群，**[谷歌分析](http://analytics.google.com/)**可以为您做到这一点。您可以根据需要分解流量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:14:49.953

不，那里没有。您可以使用 JavaScript 来检测移动浏览器，并将用户引导至您网页的特殊移动版本，但对于特定页面并没有说明*这是针对移动浏览器的*。

如果您担心会向 Google 展示重复内容，请[通过 robots.txt 文件](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93708)阻止对您的移动网站的爬取，然后确保始终将移动用户重定向到正确的移动网站。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T20:16:46.750

如果您担心样式和事情，请参阅[如何使用标题图像为移动设备设置 HTML，这需要浏览器的整个宽度？](https://stackoverflow.com/questions/3855237/how-to-setup-html-for-mobile-devices-with-an-header-image-that-takes-whole-widt)

否则，如果您不希望搜索引擎链接到 m.domain.com 而不是 domain.com（或其他），那么我会考虑进行一些 PHP 标头检测以重定向到主站点。

为确保它们根本不会被抓取，因此永远不会显示在搜索结果中，添加

```
<meta name="robots" content="noindex" /> 
```

# php - 使用 PHP 将 url 修剪为仅域名

> ID：12029626
> 
> 赞同：0
> 
> 时间：2012-08-19T20:10:38.213
> 
> 标签：php

我有一个存储个人网站网址的数据库表列。这个专栏是独一无二的，因为我不希望人们两次使用同一个网站！

然而，一个人可以通过这样做来解决这个问题：

```
domain.com
domain.com/hello123
www.domain.com 
```

所以我的计划是这样当一个人保存他们的记录时，它会在第一个斜线之后删除所有内容，以确保只有域被保存到数据库中。

我该怎么做呢？我假设这已经做过很多次了，但我正在寻找一些非常简单的东西，并且对使用库或其他长代码片段不感兴趣。只是去除其余部分并仅保留域名的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T20:14:14.527

见[PHP：parse_url](http://php.net/manual/en/function.parse-url.php)

```
// Force URL to begin with "http://" or "https://" so 'parse_url' works
$url = preg_replace('/^(?!https?:\/\/)(.*:\/\/)/i', 'http://', $inputURL);
$parts = parse_url($url);
// var_dump($parts); // To see the parsed URL parts, uncomment this line
print $parts['host']; 
```

请注意，使用列出的代码，子域不是唯一的。`www.domain.com`并且`domain.com`将是单独的条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T20:16:00.330

使用[parse_url](http://www.php.net/manual/en/function.parse-url.php)：

```
$hostname = parse_url($userwebsite,PHP_URL_HOST); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T20:18:21.687

```
$sDomain = NULL;

foreach (explode('/', $sInput) as $sPart) {
  switch ($sPart) {
    case 'http:':
    case 'https:':
    case '':
      break;

    default:
      $sDomain = $sPart;
      break 2;
  }
}

if ($sDomain !== NULL) {
  echo $sDomain;
} 
```

First, all slashes are used as separators. Next, all "known/supported" schemes are ignored, as well as the empty part which happens from "http://". Finally, whatever is next will be stored in `$sDomain`.

If you do not mind the dependency of PCRE, you can use a regular expression as well:

```
if (preg_match('/^https?:\/\/([^\/]+)/', $sInput, $aisMatch) === 1) {
  echo $aisMatch[1];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T20:13:46.673

你可以试试

```
int strrpos ( string $haystack , string $needle [, int $offset = 0 ] ) 
```

然后将结果放入

```
string substr ( string $string , int $start [, int $length ] ) 
```

使用`$needle = "/"`和`$needle = "."`

# audio - 将音频样本从时域转换为频域

> ID：12029629
> 
> 赞同：7
> 
> 时间：2012-08-19T20:11:05.353
> 
> 标签：audio, signal-processing, fft, fftw, audio-processing

作为一名软件工程师，我在处理信号处理问题时遇到了一些困难。我在这方面没有太多经验。

我尝试做的是以 44100 采样率和固定大小的窗口对环境声音进行采样，以测试是否存在特定频率（20KHz）并高于阈值。

这是我根据[如何使用 C 中的 FFTW 从 PortAudio 的样本中提取频率信息中的完美答案所做的](https://stackoverflow.com/questions/3058236/how-to-extract-frequency-information-from-samples-from-portaudio-using-fftw-in-c)

**从音频端口以 44100 采样率收集 102400 个样本（2320 毫秒）。样本值介于 0.0 和 1.0 之间**

```
int samplingRate = 44100;
int numberOfSamples = 102400;
float samples[numberOfSamples] = ListenMic_Function(numberOfSamples,samplingRate); 
```

**窗口大小或 FFT 大小为 1024 个样本（23.2 毫秒）**

```
int N = 1024; 
```

**窗口数量为 100**

```
int noOfWindows = numberOfSamples / N; 
```

**将样本拆分为 noOfWindows (100) 个窗口，每个窗口的大小为 N (1024) 个样本**

```
float windowSamplesIn[noOfWindows][N];
for i:= 0 to noOfWindows -1 
    windowSamplesIn[i] = subarray(samples,i*N,(i+1)*N);
endfor 
```

**在每个窗口上应用汉宁窗函数**

```
float windowSamplesOut[noOfWindows][N];
for i:= 0 to noOfWindows -1 
    windowSamplesOut[i] = HanningWindow_Function(windowSamplesIn[i]);
endfor 
```

**在每个窗口上应用 FFT（在 FFT 函数内完成实数到复数的转换）**

```
float frequencyData[noOfWindows][samplingRate/2]; 
for i:= 0 to noOfWindows -1 
    frequencyData[i] = RealToComplex_FFT_Function(windowSamplesOut[i], samplingRate);
endfor 
```

在最后一步，我使用了这个链接中实现的 FFT 函数：http: [//www.codeproject.com/Articles/9388/How-to-implement-the-FFT-algorithm](http://www.codeproject.com/Articles/9388/How-to-implement-the-FFT-algorithm)；因为我无法从头开始实现 FFT 函数。

我不能确定的是，在将 N (1024) 个样本作为输入提供给 FFT 函数时，samplingRate/2 (22050) 分贝值作为输出返回。它是 FFT 函数的作用吗？

我知道由于奈奎斯特频率，我最多可以检测到一半的采样率频率。但是是否可以获得每个频率高达 samplingRate/2 (22050) Hz 的分贝值？

谢谢， 瓦希特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T20:24:02.570

请参阅[如何获得 FFT 中每个值的频率？](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)

从 1024 个样本输入，您可以获得 512 个有意义的频率电平。

所以，是的，在您的窗口内，您将恢复奈奎斯特频率的水平。

您将看到的最低频率级别是 DC (0 Hz)，下一个是 SampleRate/1024，或大约 44 Hz，下一个是 2 * SampleRate/1024，依此类推，最高可达 512 *采样率 / 1024 赫兹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T00:43:05.650

由于您的 FFT 中只使用了一个波段，我希望您的结果会受到边带效应的影响，即使有适当的窗口也是如此。它可能有效，但您也可能会在某些输入频率下得到误报。此外，您的信号接近您的 niquist，因此您假设到 FFT 的信号路径相当好。我不认为这是正确的做法。

我认为这种信号检测的更好方法是使用高阶滤波器（根据您的要求，我猜四阶或五阶，实际上并没有那么高）。如果您不知道如何设计高阶滤波器，您可以串联使用两个或三个二阶滤波器。此处描述了设计二阶滤波器，有时称为“双二阶”：

[http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)

尽管非常简洁并且带有一些先验知识的假设。我会使用转角频率尽可能低的高通 (HP) 滤波器，可能在 18 到 20 kHz 之间。请记住，拐角频率处有一些衰减，因此在多次应用滤波器后，您会丢弃一点信号。

过滤音频后，取 RMS 或平均幅度（即绝对值的平均值），以找到一段时间内的平均电平。

与您现在所做的相比，这种技术有几个优点，包括更好的延迟（您可以在几个样本内开始检测）、更好的可靠性（您不会因为杂散频率的响亮信号而得到误报）等等.

这篇文章可能是相关的：http: [//blog.bjornroche.com/2012/08/why-eq-is-done-in-time-domain.html](http://blog.bjornroche.com/2012/08/why-eq-is-done-in-time-domain.html)

# ios - 从 iOS UIWebview 打开 .msg 和 .eml 文件

> ID：12029632
> 
> 赞同：1
> 
> 时间：2012-08-19T20:11:36.880
> 
> 标签：ios, uiwebview, nsdata, eml, msg

我正在尝试在 UIWebView 中使用 iOS sdk 5.1 显示 .msg 和 .eml 文件。我有二进制格式的文件（NSData）。我可以在 UIWebView 中显示 doc、docx、ppt、pptx、xls、xlsx、pdf、png、bmp 和 jpg 文件，但不能显示 .msg 和 .eml 文件。

UIWebView 是否支持 msg 和 eml 文件？如果没有，是否有其他方法可以显示此类文件？他们可以从邮件应用程序中正常打开。

我从 webView:didFailLoadWithError 收到以下错误：

> 2012-08-09 15:59:03.851 HelloWorld[5848:707] 加载附件时出错 错误域=WebKitErrorDomain 代码=102“帧加载中断” UserInfo=0x132f3ec0 {NSErrorFailingURLKey=file:///var/mobile/Applications/E959949D- 1487-4AD5-A5AA-E6F678BD9D63/Documents/Your%20New%20Daily%20Edition.msg，NSErrorFailingURLStringKey=file:///var/mobile/Applications/E959949D-1487-4AD5-A5AA-E6F678BD9D63/Documents/Your%20New%20Daily %20Edition.msg, NSLocalizedDescription=帧加载中断}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:30:05.460

UIWebView 不支持 .MSG 和 .EML 文件。我还没有看到任何客观的 C 库，但[mimetic](http://www.codesink.org/mimetic_mime_library.html)是一个免费的 C++ 库，可以为 EML 文件（以及可能与 MIME 兼容的 MSG 文件）完成这项工作。如果您以前没有混合过这些语言，那么[本文将回顾重要的内容](http://www.philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)。

我没有看到任何用于 MSG 文件的非 Windows（Vbasic 或 C#）库，我知道它们很难解析，因为 Outlook 在每个版本上的行为略有不同。（我很想在这里被证明是错误的。）

# php - 您正在加载的模型名称是已被使用的资源的名称：base_model

> ID：12029638
> 
> 赞同：1
> 
> 时间：2012-08-19T20:13:20.000
> 
> 标签：php, codeigniter, model

当我正常加载我的 base_model 时，没关系。但是当我使用 autoload.php 加载 base_model 时，我遇到了一个问题：

> 您正在加载的模型名称是已被使用的资源的名称：base_model

请帮我解决这个问题！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:07:17.027

一旦你`autoload`的模型`autoload.php`，你再次尝试加载相同的文件或另一个控制器或模型，这将显示以下错误。

```
The model name you are loading is the name of a resource that is already being used: base_model 
```

为避免这种情况，我建议不要在使用`autoload`该特定模型后在整个应用程序中的任何位置加载该模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-01T08:17:33.057

为了完整起见，我想参考这篇[博客文章](https://blog.crusy.net/codeigniter-the-model-name-you-are-loading-is-the-name-of-a-resource-that-is-already-being-used/)（德语），它建议加载没有名称的模型。

```
1 // yes :-)
2 $this->load->model('stream_model');
3 $this->stream_model->foo(); 
```

代替

```
1 // NO!
2 $this->load->model('stream_model', 'stream');
3 $this->stream->foo(); 
```

它帮助了我，因为我没有配置自动加载器，并且模型没有加载到控制器（或其超类）中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-14T19:20:08.917

我知道这是旧帖子...如果您放入`parent::__construct`任何控制器函数（构造函数除外），您会收到此消息。

# selenium-webdriver - 如何发送密钥以单击 WebDrive 中的“是”按钮

> ID：12029652
> 
> 赞同：1
> 
> 时间：2012-08-19T20:16:11.030
> 
> 标签：selenium-webdriver

当我通过 Webdrive 激活一个启动 Word 文档的 url 时，会启动一个带有 Yes 或 No 的对话框。如何发送密钥以单击 Webdrive 中的“是”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:08:21.743

首先，您需要使用以下方法切换到特定窗口 -

```
WebDriver.switchTo().window() 
```

如果名称未知，您可以使用

```
 WebDriver.getWindowHandles() 
```

获取已知窗口的列表。您可以将句柄传递给

```
switchTo().window(). 
```

如果是 JavaScript，您可以使用 -

```
// Get a handle to the open alert, prompt or confirmation
Alert alert = driver.switchTo().alert();
// Get the text of the alert or prompt
alert.getText();  
// And acknowledge the alert (equivalent to clicking "OK")
alert.accept(); 
```

希望这可以帮助！

# ruby-on-rails - 导轨的简单标题

> ID：12029656
> 
> 赞同：0
> 
> 时间：2012-08-19T20:16:53.650
> 
> 标签：ruby-on-rails

我想在我的应用程序中执行下一步：如果我不通过我自己设置我的标题 - 标题显示“应用程序”如果我设置标题 -> <%= 标题“欢迎” %> 标题显示“欢迎”

我愿意：index.html.erb

```
<%= title "Welcome controller" %> 
```

应用程序.html.erb：

```
<!DOCTYPE html>
<html>
<head>
<title><%= yield(:title) %></title> 
```

应用助手：

```
module ApplicationHelper
def title(page_title)
  content_for(:title) { page_title  }
end  
end 
```

我想要这样的东西：

```
 <title><%= yield(:title) || "App" %></title> 
```

但这不起作用 - 为什么？（显示 -> htp://local....）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:29:22.027

`yield(:title)`不会返回 false 或 null。如果您希望它的工作方式与您拥有它的方式相似，您可以使用`content_for?`which 将返回 false 如果没有定义任何内容：

```
<%= content_for?(:title) ? yield(:title) : 'App' %> 
```

但是，如果您的`title`setter 只是 的代理`content_for`，为什么不也为 getter 做一个助手呢？我经常看到这样的模式，其中使用相同的`title`方法来获取和设置标题。这是一个非常简单的例子，但你明白了：

```
# your helper
def title(val)
  @_title = val || @_title || "App"      
end

# some template
<% title "Welcome" %>

# some layout
<title><%= title %></title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:20:12.183

你可以改变你的助手：

```
content_for(:title) { page_title || "App" } 
```

但是，我很好奇您为什么不在控制器中设置标题变量而只使用它？

# ruby-on-rails - “在 config/environment.rb 的配置块中配置 gem”是什么意思？

> ID：12029660
> 
> 赞同：1
> 
> 时间：2012-08-19T20:17:46.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在编写我的第一个 Rails 应用程序。该应用程序使用了很多枚举，所以我想包含[这个 gem](https://github.com/jeffp/enumerated_attribute)，这样可以更轻松地使用它们。

不过，我被[安装说明](https://github.com/jeffp/enumerated_attribute#setup)难住了，它说

> `config/environment.rb`[...] 对于 Rails 应用程序，在文件的配置块中配置 gem
> 
> ```
> config.gem "enumerated_attribute" 
> ```

在我的`config/environment.rb`我没有看到任何看起来像“配置块”的东西。

`config/environment.rb`：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Webtet::Application.initialize! 
```

那么作者写“在config块中配置gem”是什么意思呢？

他只是想让我把这条线包括在`config/environment.rb`

```
config.gem "enumerated_attribute" 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:40:30.180

看起来此设置说明是为 rails 2 应用程序编写的。如果此 gem 与 rails 3 一起使用，您只需将其添加`gem 'enumerated_attribute'`到您的 Gemfile。您也可以尝试使用[https://github.com/brainspec/enumerize](https://github.com/brainspec/enumerize) gem（它适用于 rails 3 并具有 SimpleForm、Formtastic 支持和其他很棒的功能）

# jquery - 使用 ASP.Net MVC 3/jQuery ajax 通过的列表为空

> ID：12029661
> 
> 赞同：1
> 
> 时间：2012-08-19T20:18:07.160
> 
> 标签：jquery, ajax, asp.net-mvc-3

我有以下视图模型：

```
public class CheckListInfo
{
    public int CheckListQuestionID { get; set; }
    public string QuestionText { get; set; }
    public bool Value { get; set; }
}

public class AddEditWorkOrderViewModel
{
    [Display(Name = "Work Order ID")]
    public int ID { get; set; }

    [Display(Name = "Work Order Number")]
    public string WorkOrderNumber { get; set; }

    public List<CheckListInfo> CheckListInfos = new List<CheckListInfo>();
} 
```

和以下控制器：

```
[HttpPost]
public ActionResult Update(int ID, AddEditWorkOrderViewModel model)
{
    if (ModelState.IsValid)
    {
        BusinessLogic.WorkOrders blWorkOrders = new BusinessLogic.WorkOrders();
        WorkOrder workOrder = blWorkOrders.GetWorkOrder(ID);

        Mapper.CreateMap<AddEditWorkOrderViewModel, DataModels.WorkOrder>();
        Mapper.Map(model, workOrder);

        blWorkOrders.UpdateWorkOrder(workOrder);

        return Json(new { success = true });
    }

    return Json(new { success = false });
} 
```

和以下 jQuery：

```
var checkListQuestionInfos = new Array();
var checkListQuestion = { CheckListQuestionID: 1, QuestionText: 'Test1', Value: true };
checkListQuestionInfos.push(checkListQuestion);

var data = {
    WorkOrderNumber: $("#WorkOrderNumber").val(),
    CheckListInfos: checkListQuestionInfos
}

$.ajax({
    url: '@Url.Action("Update", new { id = @Model.ID })',
    type: 'POST',
    async: false,
    contentType: "application/json; charset=utf-8", 
    data: JSON.stringify(data)
}); 
```

ID 和 WorkOrderNumber 在我的模型中通过就好了，但是 List 是空的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:29:39.213

我想到了。该行：

```
public List<CheckListInfo> CheckListInfos = new List<CheckListInfo>(); 
```

本来应该

```
public List<CheckListInfo> CheckListInfos { get; set; } 
```

改变它修复了它。

# sql - Yii: combination of CDbCommand and ActiveRecord queries in one Controller/Action

> ID：12029666
> 
> 赞同：0
> 
> 时间：2012-08-19T20:18:49.847
> 
> 标签：sql, activerecord, coding-style, yii, many-to-many

I was wondering if it is a good (acceptable) practice to combine those to ways of retrieving/updating database data?

For example, in my database I have two tables (`Books` and `Users`) and one "many-to-many" table `Books_Users`. When a user rates a book, the `Books_Users` table should be updated (a new record with a `book_id` and a `user_id` should be whether inserted or deleted).

I googled ways of doing it using AR methods only, but I haven't found any good solution. I ended up using `CDbCommand` `execute()` and very simple SQL-query like `INSERT INTO books_users(book_id, user_id) VALUES(:bid , :uid);` in a `BookController` action.

The point is that all my models extend `CActiveRecord`, and I use AR methods all the way.

So here is the question: is that kind of blending of different approaches could be used without remorse, or I should get rid of it immediately and write the code in some "proper way"?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:40:43.943

Yii 确实支持`Many_TO_Many`关系（在某种程度上），并且这种支持已经通过 1.1.x 版本得到改进[http://www.yiiframework.com/doc/guide/database.arr](http://www.yiiframework.com/doc/guide/database.arr)。

一般来说，我认为您不必使用`CDbCommand`和弄脏 SQL，您不应该在使用**AR**时遇到任何问题，特别是**检索**部分，但是，**插入**（创建/更新）可能是一个问题（不是一个大问题虽然）因为它可以通过数据库级​​别（数据库触发器）或应用程序级别（模型`afterCreate()`＆`afterUpdate()`）的一些触发器来解决，以自动填充/更新中间表（数据透视）记录。

另一种（更清洁）的方法是使用这个扩展：[http](http://www.yiiframework.com/extension/cadvancedarbehavior/) ://www.yiiframework.com/extension/cadvancedarbehavior/它应该为你完成这项工作。

最后一件事：看看[这个](https://stackoverflow.com/questions/1481201/yii-framework-many-to-many-relationships)问题和[这个](https://stackoverflow.com/questions/5227361/yii-many-to-many-relationships)问题的相关查询。

# html - iframe 链接不在 iframe 中打开

> ID：12029668
> 
> 赞同：0
> 
> 时间：2012-08-19T20:19:15.627
> 
> 标签：html, iframe

我有 iframe，它显示不属于我的页面的内容。在那个 iframe 中存在一些链接。当用户点击链接时，它们会在 iframe 中打开。我希望它们在当前窗口（父窗口）中打开。

我找到了添加的解决方案

```
 target="_parent" 
```

到链接，但我不能这样做，因为 iframed 页面不是我的，我无法编辑该页面。

有没有办法做到这一点，在父窗口中打开 iframe 的链接？

或者 js/jquery 代码来查找该页面上的所有链接并将它们添加到属性目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:36:04.627

不幸的是，无法查询`<iframe>`哪个来源的内容来自不同的服务器。您唯一能做的就是在输出之前通过服务器端脚本（使用 PHP 或其他东西）“代理”页面：

*   [使用“ cURL](http://php.net/manual/de/book.curl.php) ”或类似的东西请求页面
*   根据您的需要解析内容（例如`target`在所有链接上设置 -attribute）
*   将其输出回页面的 iframe

最后`<iframe>`可能看起来像这样：`<iframe src="myproxy.php"></iframe>`

# java - Slick Util 只为所有三个变量加载一张图片

> ID：12029669
> 
> 赞同：0
> 
> 时间：2012-08-19T20:19:15.430
> 
> 标签：java, lwjgl

我正在使用 slick-util 库为 lwjgl 库加载纹理。我创建了三个“纹理”变量 [topTex、sideTex、bottomTex] 并用三张不同的图片加载它们。在查看了不同的可能性之后，我不知道问题可能是什么。我不断获得每个变量中的最后一张图像；

```
private static double WIDTH = 1920;
private static double HEIGHT = 1080;
private static double DEPTH = 1200;
private static double SPEED = 1;

private double posx = WIDTH / 2;
private double posy = HEIGHT / 2;
private double posz = DEPTH / 2;
private double rotx = 0;
private double roty = 0;
private double rotz = 0;

private Texture topTex;
private Texture sideTex;
private Texture bottomTex;

public static void main(String[] args) {

    Program program = new Program();
    program.start();
}
private void start() {

    try {

        if (WIDTH == Toolkit.getDefaultToolkit().getScreenSize().width && HEIGHT == Toolkit.getDefaultToolkit().getScreenSize().height) { Display.setFullscreen(true); }
        else { Display.setDisplayMode(new DisplayMode((int)WIDTH, (int)HEIGHT)); }
        Display.setTitle("LWJGL Minecraft Logo");
        Display.create();
    }
    catch (LWJGLException e) {

        e.printStackTrace();
        System.exit(0);
    }

    this.initGL11();
    this.loadTop();
    this.loadSide();
    this.loadBottom();

    while (!Display.isCloseRequested()) {

        this.pollInput();
        this.render();
        Display.update();
    }

    Display.destroy();
}
private void initGL11() {

    GL11.glEnable(GL11.GL_TEXTURE_2D);               
    GL11.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);          
    GL11.glEnable(GL11.GL_BLEND);
    GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
    GL11.glViewport(0, 0, (int)WIDTH, (int)HEIGHT);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, WIDTH, HEIGHT, 0, 0, -DEPTH);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glShadeModel(GL11.GL_SMOOTH);
    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glDepthFunc(GL11.GL_LEQUAL);
    GL11.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT, GL11.GL_NICEST);
}
private void loadTop() { 

    try {

        topTex = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/topTex.png"));
    }
    catch (IOException e) {

        e.printStackTrace();
        System.exit(0);
    }
}
private void loadSide() {

    try {

        sideTex = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/sideTex.png"));
    }
    catch (IOException e) {

        e.printStackTrace();
        System.exit(0);
    }
}
private void loadBottom() {

    try {

        bottomTex = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/bottomTex.png"));
    }
    catch (IOException e) {

        e.printStackTrace();
        System.exit(0);
    }
}
private void pollInput() {

    if (Keyboard.isKeyDown(Keyboard.KEY_ESCAPE)) { System.exit(0); }
    if (Keyboard.isKeyDown(Keyboard.KEY_SPACE)) {

        posx = WIDTH / 2;
        posy = HEIGHT / 2;
        posz = DEPTH / 2;
        rotx = 0;
        roty = 0;
        rotz = 0;
    }

    if (Keyboard.isKeyDown(Keyboard.KEY_W)) { posy = posy + SPEED; }
    if (Keyboard.isKeyDown(Keyboard.KEY_A)) { posx = posx - SPEED; }
    if (Keyboard.isKeyDown(Keyboard.KEY_S)) { posy = posy - SPEED; }
    if (Keyboard.isKeyDown(Keyboard.KEY_D)) { posx = posx + SPEED; }
    if (Keyboard.isKeyDown(Keyboard.KEY_Q)) { posz = posz - SPEED; }
    if (Keyboard.isKeyDown(Keyboard.KEY_E)) { posz = posz + SPEED; }

    if (Keyboard.isKeyDown(Keyboard.KEY_LEFT)) { rotx = rotx + SPEED / 2; }
    if (Keyboard.isKeyDown(Keyboard.KEY_UP)) { roty = roty + SPEED / 2; }
    if (Keyboard.isKeyDown(Keyboard.KEY_RIGHT)) { rotz = rotz + SPEED / 2; }
    }
private void render() {

    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);
    Color.white.bind();

    GL11.glPushMatrix();

        GL11.glTranslated(posx, posy, posz);
        GL11.glRotated(rotx, 1, 0, 0);
        GL11.glRotated(roty, 0, 1, 0);
        GL11.glRotated(rotz, 0, 0, 1);
        GL11.glTranslated(-posx, -posy, -posz);

        GL11.glBegin(GL11.GL_QUADS);

            topTex.bind();
            GL11.glTexCoord2d(0, 0);
            GL11.glVertex3d(posx - 16, posy - 16, posz - 16);
            GL11.glTexCoord2d(1, 0);
            GL11.glVertex3d(posx + 16, posy - 16, posz - 16);
            GL11.glTexCoord2d(1, 1);
            GL11.glVertex3d(posx + 16, posy + 16, posz - 16);
            GL11.glTexCoord2d(0, 1);
            GL11.glVertex3d(posx - 16, posy + 16, posz - 16);
            topTex.release();

            sideTex.bind();
            GL11.glTexCoord2d(0, 0);
            GL11.glVertex3d(posx + 16, posy - 16, posz - 16);
            GL11.glTexCoord2d(1, 0);
            GL11.glVertex3d(posx + 16, posy - 16, posz + 16);
            GL11.glTexCoord2d(1, 1);
            GL11.glVertex3d(posx + 16, posy + 16, posz + 16);
            GL11.glTexCoord2d(0, 1);
            GL11.glVertex3d(posx + 16, posy + 16, posz - 16);
            sideTex.release();

        GL11.glEnd();

     GL11.glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:49:05.177

我对 LWJGL 很陌生，但我相信对 Texture.bind 的调用需要在调用 glBegin 之前。每个纹理都需要一个 glBegin/glEnd 对。

# extjs - ExtJs 4.1.1 图表缺少标记

> ID：12029672
> 
> 赞同：3
> 
> 时间：2012-08-19T20:19:28.843
> 
> 标签：extjs, charts, series

我花了几天时间试图解决这个问题：

我正在尝试创建一个包含多个系列的图表。在一个系列中，我展示了一条包含所有点的线（在我的代码“val”系列中）。在第二个系列中，我希望只显示部分点（“温度”系列）。这两个系列都显示了 int 数据类型。

我试图为“温度”字段设置一个非常低的值，以便从图表中省略它，但它也导致相应的“val”被跳过！

**在 ExtJs 4.1.1 中：“val”字段的 10am 值被跳过。**

**在 ExtJs 4.0.7 中：“val”字段的 10am 值存在！**

（我希望我可以在这里发布图片，但我没有 10 个声望点。:-( )

这是我的代码：

```
Ext.define('WeatherPoint', {
    extend: 'Ext.data.Model',
    fields: ['temperature', 'date', 'val']
});

var store1 = Ext.create('Ext.data.Store', {
    model: 'WeatherPoint',
    data: [
        { temperature: 58, date: new Date(2011, 1, 1, 8), val: 10 },
        { temperature: 63, date: new Date(2011, 1, 1, 9), val: 20 },
        { temperature: -100, date: new Date(2011, 1, 1, 10), val: 40 }, 
        { temperature: 78, date: new Date(2011, 1, 1, 11), val: 90 },
        { temperature: 81, date: new Date(2011, 1, 1, 12), val: 50 }
    ]
}); 

var chart1 = Ext.create('Ext.chart.Chart',{
        xtype: 'chart',
        animate: false,
        store: store1,
        legend: true,
        insetPadding: 30,
        axes: [{
            title: 'Temperature',
            type: 'Numeric',
            position: 'left',
            fields: ['temperature', 'val'],
            minimum: 0,
            maximum: 100
        }, {
            title: 'Time',
            type: 'Time',
            position: 'bottom',
            fields: ['date'],
            dateFormat: 'ga',
            step: [Ext.Date.HOUR, 1],
            fromDate: new Date(2011, 1, 1, 8),
            toDate: new Date(2011, 1, 1, 12)
        }],
        series: [{
            type: 'scatter',
            axis: ['left','bottom'],
            xField: 'date',
            yField: 'temperature'
        }, {
            type: 'line',
            title: 'val',
            axis: ['left','bottom'],
            xField: 'date',
            yField: 'val'
        }]
    });

var panel1 = Ext.create('widget.panel', {
    width: 600,
    height: 400,
    renderTo: Ext.getBody(),
    layout: 'fit',
    items: chart1
}); 
```

1.  为什么 4.1.1 由于一个系列中的值超出范围而使所有系列都跳过？
2.  如何仅显示一个系列中的部分点而第二个系列中的所有点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:20:28.977

尝试对要隐藏的点使用`null`或清空值。`''`

**例子：**

```
var store1 = Ext.create('Ext.data.Store', {
    model: 'WeatherPoint',
    data: [
        { temperature: 58, date: new Date(2011, 1, 1, 8), val: 10 },
        { temperature: 63, date: new Date(2011, 1, 1, 9), val: 20 },
        { temperature: '', date: new Date(2011, 1, 1, 10), val: 40 },
        { temperature: 78, date: new Date(2011, 1, 1, 11), val: ''},
        { temperature: 81, date: new Date(2011, 1, 1, 12), val: 50 }
    ]
}); 
```

# java - Not able to catch custom exception of web service in their own catch blocks

> ID：12029673
> 
> 赞同：0
> 
> 时间：2012-08-19T20:19:33.180
> 
> 标签：java, soap, pojo, custom-exceptions

We are using a web service which throws 3 types of custom web service faults i.e. ServiceException, ConnectionException and InvalidDataException.

Along with these catch blocks, we have also put in the catch block for RemoteAccessException which is the spring's runtime exception.

```
catch (org.springframework.remoting.RemoteAccessException remoteAccessExc) {
} 
```

While testing the above listed custom exceptions, we found that all these 3 types of exceptions are not getting catched in their respective catch blocks. Instead all gets catched in the last catch block which is the RemoteAccessException. We found during debugging the exception object of soap fault which is of type org.springframework.remoting.jaxws.JaxWsSoapFaultException that the service is throwing the correct faults.

My concern is why these faults are not falling into their own catch blocks. The service itself tells us to handle these exceptions while placing the service call.

When I hit the service through proxy java client, the faults fall correctly into their respective blocks. If there would have been a problem with POJO's then they shouldn't have worked in this case also. But they are working in this case(when hit through java proxy client) which means no problem in POJOs.

We are using spring-2.5.6.jar.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:36:37.983

由于您保留不同的 catch 块并且故障对象被覆盖，请执行以下操作：

检查每个 catch 块中的故障对象是否为空，以便在抛出故障时，它不会在任何其他 catch 块中被覆盖。这是因为您在 catch 块的每个条目上都进行了非空检查。

```
try{
    //////
}Catch(IllegalArgumentException e){
    create fault object;
    throw fault;    
}
Catch(Exception e){
    ///check whether fault object is not null

    if(fault!=null){
    throw fault;
}else{
    ///another fault object 
    throw fault1;
} 
```

# python - python: How do I avoid NonImplentedError if I just import instead of run the module?

> ID：12029677
> 
> 赞同：0
> 
> 时间：2012-08-19T20:20:13.537
> 
> 标签：python, exception, import

I have an interface-like function implemented this way:

```
# File: parsers.py
class BaseParser(object):
    '''Interface class'''
    def __init__(self):
        self.content

    def Parse(self):
        """The interface, not implemented"""

        raise NotImplementedError('{}.Parse()'.format(inspect.stack()[0][3]))

class SimpleParser(BaseParser):
    '''Implementation class'''
    def __init__(self):
        BaseParser.__init__(self)

    def Parse(self):
        # Do real work 
```

Now when I import this module, I get NotImplementedError right away so I can't use SimpleParser. How could I use this exception idiom and still be able to use it?

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:22:11.820

Your indentation is goofed, mixing spaces and tabs. Use `python -tt` to verify.

# python - 'if' 元素不在 Google App Engine 的列表中

> ID：12029680
> 
> 赞同：1
> 
> 时间：2012-08-19T20:20:18.127
> 
> 标签：python, facebook, google-app-engine, facebook-graph-api

我正在使用 Google App Engine 为 Facebook 构建一个应用程序。我试图将用户 Facebook 帐户中的朋友与我的应用程序中的朋友进行比较，因此如果他们是 Facebook 中的朋友但不在我的应用程序中，或者如果他们已经是两者中的朋友，我可以将它们添加到数据库中。我正在尝试这样的事情：

```
request = graph.request("/me/friends")
user = User.get_by_key_name(self.session.id)
list = []
for x in user.friends:
    list.append(x.user)

for friend in request["data"]:
    if User.get_by_key_name(friend["id"]):
        friendt = User.get_by_key_name(friend["id"])
        if friendt.key not in user.friends:
            newfriend = Friend(friend = user,
                               user = friendt,
                               id = friendt.id)
            newfriend.put() 
```

`graph.request`返回一个包含用户朋友的对象。如何比较两个检索对象列表中的内容。它不一定需要与 Facebook 相关。

（我知道这个问题可能很愚蠢，但这对我来说真的很痛苦。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:43:08.390

如果你升级到 NDB，“in”操作符将真正起作用；NDB在 Model 实例上实现了适当的**eq运算符。**请注意，键也会被比较，因此具有相同属性值但不同键的实体被认为是不相等的。如果要忽略密钥，请考虑比较 e1._to_dict() == e2._to_dict()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:33:05.170

您应该编写一个自定义函数来比较您的对象，并将其视为嵌套字典的比较。由于您将仅比较属性而不是函数，因此您必须进行嵌套 dict 比较。原因：所有属性都将不可调用，并且希望不会以 _ 开头，因此您只需比较 obj 中的剩余元素。**dict**和方法应该是自下而上的，即首先完成嵌套级别的对象（例如，主对象可以托管其他对象，这些对象将有自己的**dict**）

最后，您可以在这里考虑接受的答案代码：[如何比较 Python 中的两个字典列表？](https://stackoverflow.com/questions/6333530/how-to-compare-two-lists-of-dicts-in-python)

# symfony-2.1 - Symfony2 - Entire child entity in form and Twig template

> ID：12029684
> 
> 赞同：3
> 
> 时间：2012-08-19T20:20:37.273
> 
> 标签：symfony-2.1, sonata-admin

In a Sonata admin form, I'd like to display all images related to the current object. Don't need to edit them. I managed to get this working with an entity field type and its property option to select the image URL as label so I can call all pictures in the template :

```
->add('image', 'entity', array(
    'class' => 'Hop\HopBundle\Entity\Image',
    'property' => 'image_url',
    'query_builder' => function($er) use ($object) {
        return $er->createQueryBuilder('i')
        ->where('i.object = :object')
        ->setParameter('object', $object)
        ;
    },
    'expanded' => true,
)) 
```

.

```
{% for child in form %}
    <img src="{{ child.vars.label }}" alt="{{ child.vars.label }}" />
{% endfor %} 
```

It's because it seems that the entity type only give label and one value to the template.

But I'd like to get also image width, descriptions, date, ... In other word : how can we get each entire related image object in the Twig template ?

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-03T12:53:33.910

所以我用谷歌搜索了很多，这对我有用（Symfony 2.2）
**更新为@flu在评论中建议**

```
{% for key, child in form %}
<div>
    {% set entity = form.vars.choices[key].data %}
    {{ form_widget(child) }}
    {{ form_label(child) }}
</div>
{% endfor %} 
```

并且`entity`是子对象。`form.vars.data`从 Symfony 2.3 开始，如果我理解正确，将会有： [https ://github.com/symfony/symfony/pull/5023](https://github.com/symfony/symfony/pull/5023)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T13:41:59.247

我花了一整天的时间来解决这个问题。

首先，我创建了一个扩展 ChoiceType 的新 FormType：

```
class NomineesType extends AbstractType
{
protected $em;

public function __construct(EntityManager $em) {
    $this->em = $em;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $submissionRepository = $this->em->getRepository('BundleName:Submission');
    $choices = $submissionRepository->findBy(array(
        'nominee' => true
    ));
    $resolver->setDefaults(array(
        'choices' => $choices
    ));
}

public function getName()
{
    return 'nominees';
}

public function getParent()
{
    return 'choice';
}
} 
```

比我必须注册的服务：

```
services:
form.type.nominees:
    class: Bundle\Form\Type\NomineesType
    arguments:
        entityManager: "@doctrine.orm.entity_manager"
    tags:
        - { name: form.type, alias: nominees } 
```

之后，我将新类型添加到我的表单中：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $game = $this->game;
    $builder->add('submission', 'nominees', array(
        'expanded' => true,
        'multiple' => false
    ));
    $builder->add('email');
} 
```

现在我可以在我的 twig-template 中获取所有属性：

```
{% block nominees_widget %}
{% spaceless %}
    {% if expanded %}
        <ul {{ block('widget_container_attributes') }}>
        {% for child in form %}
            <li>
                {{ child.get('form').get('label').firstname }}
                {{ child.get('form').get('label').lastname }}
                {{ form_widget(child) }}
                {{ form_label(child) }}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        {# just let the choice widget render the select tag #}
        {{ block('choice_widget') }}
    {% endif %}
{% endspaceless %}
{% endblock %} 
```

因为选择列表只返回整数值，所以我创建了一个新的数据转换器来将选择的 id 转换为实体：

```
class IntToEntityTransformer implements DataTransformerInterface
{
/**
 * @var ObjectManager
 */
private $om;

/**
 * @param ObjectManager $om
 */
public function __construct(ObjectManager $om)
{
    $this->om = $om;
}

/**
 * Transforms an object (issue) to a string (number).
 *
 * @param  Issue|null $issue
 * @return string
 */
public function transform($issue)
{
    if (null === $issue) {
        return "";
    }

    return $issue->getNumber();
}

/**
 * Transforms a string (number) to an object (issue).
 *
 * @param  string $number
 * @return Issue|null
 * @throws TransformationFailedException if object (issue) is not found.
 */
public function reverseTransform($number)
{
    if (!$number) {
        return null;
    }

    $issue = $this->om
        ->getRepository('BundleName:Submission')
        ->findOneBy(array('id' => $number))
    ;

    if (null === $issue) {
        throw new TransformationFailedException(sprintf(
            'An Submission with number "%s" does not exist!',
            $number
        ));
    }

    return $issue;
}
} 
```

此数据转换器在构建表单方法中初始化：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $transformer = new IntToEntityTransformer($this->em);
    $builder->add($builder->create('submission', 'nominees', array(
        'expanded' => true,
        'multiple' => false
    ))->addModelTransformer($transformer));
    $builder->add('email');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T15:11:48.133

我一直在用 Symfony 2.3 解决这个问题。不知道它在 2.1 中是如何工作的。

在我的情况下，我有一个实体选择（扩展和多个），我需要在每个选择的标签旁边添加实体的“描述”字段。

我解决如下：

1- 创建了一个自定义类型，其父类型为 EntityType，名称为“xxxxxxx_form_reparacionnormalizada”

```
class ReparacionNormalizadaType extends AbstractType
{
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'class'        => 'xxxxxxxxx\Entity\TipoReparacion',
        ));
    }

    public function getName()
    {
        return 'xxxxxxx_form_reparacionnormalizada';
    }

    public function getParent()
    {
        return 'entity';
    }
} 
```

2-像往常一样将表单类型注册为服务

3-创建了一个自定义模板，如下所示：

```
{% block xxxxxxx_form_reparacionnormalizada_widget %}
<ul {{ block('widget_container_attributes_choice_widget') }}>

    {% for id, child in form.children %}

    <li>
        {{ form_label(child, child.vars.label|default(null), { 'in_list_checkbox' : true, 'widget' : form_widget(child) } ) }}

        <span>{{ choices[id].data.descripcion }}</span>

    </li>
    {% endfor %}
</ul>
{% endblock %} 
```

4-在您的奏鸣曲管理员中，您使用自定义类型而不是`'entity'`

希望能帮助到你

问候

哈维尔

# java - 如何将单个键快捷方式添加到 JMenuItem

> ID：12029685
> 
> 赞同：4
> 
> 时间：2012-08-19T20:20:58.560
> 
> 标签：java, swing, keyboard-shortcuts

我正在创建一个类似于记事本的简单文本编辑器。如果用户按下 ，它将在文件中插入时间和日期`F5`。我浏览了助记符和加速器，但它们分别与`Alt`和结合使用`Ctrl`。

我应该使用`EventListener`还是有其他解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T20:32:07.977

你可以简单地使用：

```
JMenuItem menuItem = new JMenuItem("Refresh");
KeyStroke f5 = KeyStroke.getKeyStroke(KeyEvent.VK_F5, 0);
menuItem.setAccelerator(f5); 
```

KeyStroke 没有`0`指定任何修饰符，如[文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke%28int,%20int%29)中所述。

ActionListener 是菜单项事件的适当侦听器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T11:13:26.670

正如一些评论中已经部分提到的那样，推荐的方法是

*   使用操作来配置 menuItem
*   使用加速器配置操作
*   将操作添加到菜单

一些代码：

```
Action doLog = new AbstractAction("Dummny log!") {

    @Override
    public void actionPerformed(ActionEvent e) {
        LOG.info("doing: " + getValue(Action.NAME));
    }
};
doLog.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke("F5"));

JMenu menu = new JMenu("dummy");
menu.add(doLog);
frame.getJMenuBar().add(menu); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-19T20:25:22.697

`KeyBinding`您可以像这样添加一个`JMenuItem`：

```
Action sayHello = new AbstractAction() {
    public void actionPerformed(ActionEvent e) {
        JOptionPane.showMessageDialog(null,"Hello World, From JMenuItem :)");
    }
};
jMenuItem.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("F5"),"sayHello");//4.The WHEN_IN_FOCUSED_WINDOW input maps of all the enabled components in the focused window are searched.
jMenuItem.getActionMap().put("sayHello",sayHello); 
```

**参考：**

*   [http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)
*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getInputMap(int](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getInputMap(int) )
*   [http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto)

# ios - 以字典或数组形式搜索结果

> ID：12029702
> 
> 赞同：1
> 
> 时间：2012-08-19T20:23:32.663
> 
> 标签：ios, nsarray, nsdictionary

我正在使用 AFNetworking 来解析 JSON 输出，并且正在以 JSON 的形式返回搜索结果。我不确定是否应该将结果保存为 NSDictionary 或 NSArray？我想在表格视图控制器中显示数据，结果集可能是 50-100 或更多。

有小费吗？

这是我的代码：

```
if (success) {

          NSDictionary *searchResults = [responseObject valueForKeyPath:@"searchResults"];
              NSLog(@"%@",searchResults);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:26:19.823

您应该以返回的任何格式存储它。很可能它是一个 NSArray（或一个 NSDictionary，其中只有一个条目是 NSArray - 在这种情况下，您还需要将其保存为一个数组）。

# jquery - jquery sliding menu "unslides" when jqueryui datepicker textbox selected

> ID：12029704
> 
> 赞同：0
> 
> 时间：2012-08-19T20:23:42.313
> 
> 标签：jquery, jquery-ui

I created a simple dropdown menu using jquery and jqueryui. (see a basic example on [jsfiddle](http://jsfiddle.net/zEE9Q/1/)).

Notice that the sliding all works, but when you click in the textbox of the Search dropdown and try to use the datepicker, the menu closes.

Can anyone please help me figure out how to keep that menu from closing when using the datepicker?

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:13:00.377

因为单击日期选择器时，您不再悬停菜单，因此再次切换菜单。避免这种情况的最简单方法（无需重写事件处理程序）是在单击日期选择器时为菜单添加 .hover() 函数。因为我不在电脑上，所以现在无法为您提供正确的脚本。

# dll - 注册dll的问题

> ID：12029707
> 
> 赞同：0
> 
> 时间：2012-08-19T20:24:25.890
> 
> 标签：dll, system

我正在尝试注册一个 .dll 文件，但出现错误。.dll 在 SysWOW64 文件夹中，通过命令行我然后`cd \Windows\SysWOW64`运行以下命令`regsvr32 php_sdo.dll`

然后我收到以下错误：

“模块“php_sdo.dll”加载失败。

确保二进制文件存储在调试它的指定路径，以检查二进制文件或从属.DLL 文件是否存在问题。

指定的模块无法找到”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:48:26.153

当一个想要注册的 DLL 的依赖项（物理上意味着尝试注册 DLL 的程序在内部调用 LoadLibrary）丢失时，通常会发生这种故障。[您可以使用Dependency Walker](http://www.dependencywalker.com/)查看 DLL 的依赖项（树）。

# c - Why can't use C standard I/O with sockets

> ID：12029708
> 
> 赞同：4
> 
> 时间：2012-08-19T20:24:27.413
> 
> 标签：c, sockets, unix, network-programming

It's often said that one shouldn't use C standard I/O functions (like `fprintf()`, `fscanf()`) when working with sockets.

I can't understand why. I think if the reason was just in their buffered nature, one could just flush the output buffer each time he outputs, right?

Why everyone uses UNIX I/O functions instead? Are there any situations when the use of standard C functions is appropriate and correct?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T20:35:50.803

您当然可以使用`stdio`套接字。你甚至可以编写一个只使用`stdin`and的程序，`stdout`从`inetd`（它提供一个 on`STDIN_FILENO`和的套接字`STDOUT_FILENO`）运行它，即使它根本不包含任何套接字代码，它也能工作。

您不能做的是将缓冲 I/O 与`select`or混合，`poll`因为没有`fselect`或`fpoll`正在处理`FILE *`'s，您甚至无法自己实现一个，因为没有标准的方法来查询 a`FILE *`以确定其输入缓冲区是否为空。

只要您需要处理多个连接，`stdio`就不够好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T20:57:08.480

当你有一个简单的场景，一个套接字处于阻塞模式并且你的应用程序协议是基于文本的时，这完全没问题。

如果使用多个或非阻塞套接字、任何类型的二进制编码以及任何实际性能要求，它很快就会变成一个巨大的痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T20:35:01.210

不知道有什么直接的反对意见。这很可能会正常工作。

同时我可以想象一个平台，在哪里`fprintf()`并且`fscanf()`有自己的缓冲区，停留在文件描述符层之上。您可能无法刷新这些缓冲区。

很难谈论所有可能的平台。这意味着最好使用套接字来避免这种情况。

在一天结束时，应用程序应该解决应用程序问题。它不应该是编译器/库测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T13:43:05.397

这是因为套接字（例如 TCP 套接字）是可读写的，就好像它们是文件或管道一样，但这只是一种抽象。网络连接的内部工作比本地文件或管道复杂得多。

首先，读取文件总是“快速”的，无论是获取数据还是碰到文件结尾。另一方面，如果您期望来自 TCP 连接的 500 个字节并且它发送 499（并且连接没有关闭），您可能会永远等待。写入也是同样的事情：它会在 TCP 输出缓冲区之后阻塞。

即使是最基本的程序也需要处理超时、断开连接以及所有这些与 FILE 自己的缓冲 I/O 交互的事情，即使是教科书示例也不能很好地工作。

# jquery - Scrolling a sortable/dragable item's parent container when its border is reached

> ID：12029709
> 
> 赞同：0
> 
> 时间：2012-08-19T20:24:32.860
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

I have a huge list of items that can be sorted by dragging them. I noticed that once the list gets very long and overflows its parent container's height, dragging an item to a position not currently visible gets very inconvenient.

Here is an [example (jsFiddle)](http://jsfiddle.net/mobweb/xjrLN/).

I want to drag the first element to right before the last element in one gesture. Currently that's not possible because I can't drag and scroll at the same time. Is there a setting that enables auto-scrolling the container as soon as I drag one of its children near the border of the container?

I have tried different settings for `appendTo` as well as `containment`, but no setting had the desired effect.

# Updated with solution

Thanks to the answer by @Shannon below, I was able to get it working, you can find the updated solution [here](http://jsfiddle.net/xjrLN/2/).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:58:38.837

一旦用户拖过滚动的一半，您就必须创建一个滚动事件。这很简单。

```
$(li).drag(function(e) {
    $("ul").scrollTop(function(i, v) {
        var h = $(ul).height();
        var y = e.clientY - h / 2;
        return v + y * 0.1;
    });
}); 
```

这行不通，但这是一个开始，因此您可以了解如何处理它，我今天早上没有时间完全完成它！

# c++ - C++ where can i get the code version for sha256 openssl?

> ID：12029720
> 
> 赞同：-3
> 
> 时间：2012-08-19T20:26:03.343
> 
> 标签：c++

C++ where can i get the code example sha256 openssl in C++

I search everywhere, i only get part of the code.

I can do it by at my terminal typing this

echo -n "compute sha256" | openssl sha256

However, i want to perform sha256 in .cpp file, how can i do it.

I know i need to include openssl library.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:38:46.233

SHA256 函数位于`<openssl/sha.h>`：

```
int SHA256_Init(SHA256_CTX *c);
int SHA256_Update(SHA256_CTX *c, const void *data, size_t len);
int SHA256_Final(unsigned char *md, SHA256_CTX *c); 
```

它们的使用是不言自明的（省略了错误处理）：

```
SHA256_CTX ctx = { 0 };

// Initialize the SHA256 context
SHA256_Init(&ctx);

// Run all of the data through calls to SHA256_Update() using the context object, `ctx`
// ...

// Compute the SHA256 digest.
unsigned char md[32];
SHA256_Final(md, &ctx); 
```

# ruby-on-rails - 使用rails设计，调试（参数）中不存在空密码字段？

> ID：12029722
> 
> 赞同：0
> 
> 时间：2012-08-19T20:26:24.440
> 
> 标签：ruby-on-rails, devise, passwords, params

我是 Rails 和设计的新手，所以我试图了解发生了什么。我正在关注允许用户编辑自己的密码的设计 wiki，可在此处找到：[https](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password) ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password 。

我感到困惑的是，即使我在我的模型中使用 :validatable，只要我完成 current_password，即使我将 password/password_confirmation 留空，我似乎也可以提交表单。似乎这与在[validatable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb)中只有在 !password.nil? [每行 54](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L54)。

所以我决定在提交表单时查看 debug(params) ，如果我将 password/password_confirmation 字段留空，那么 password/password_confirmation 根本不会出现在 params 哈希中（尽管 password.nil? 是真的？）。

我不明白为什么会这样？即使我将密码字段留空，密码是否不应该像任何其他字段一样出现在参数中，如“密码”=>“”？由于我使用自己的控制器操作来处理表单，所以密码不在参数中是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T02:16:38.247

该`update_with_password`wiki 页面上使用的方法是造成您困惑的原因。如果它们是空白的，它会从参数中删除`password`和删除，[如此处所示](https://github.com/plataformatec/devise/blob/master/lib/devise/models/database_authenticatable.rb#L59)。`password_confirmation`

这似乎是对 wiki 页面的疏忽，因为它描述了如何实现您自己的更改密码操作。在这种情况下，这绝对是一个问题（提交“更改密码”表单而不填写密码可能会失败）。

无论如何，您可以解决它，并且仍然使用该`update_with_password`方法，只需事先检查密码是否为空，如下所示（根据需要重构）：

```
def update_password
  @user = User.find(current_user.id)

  if params[:user][:password].blank?
    @user.errors.add(:password, :blank)
    render "edit"
  elsif @user.update_attributes(params[:user])
    # Sign in the user by passing validation in case his password changed
    sign_in @user, :bypass => true
    redirect_to root_path
  else
    render "edit"
  end
end 
```

# redirect - 在 Nginx 中，如何配置拆分重定向？

> ID：12029725
> 
> 赞同：0
> 
> 时间：2012-08-19T20:26:57.890
> 
> 标签：redirect, configuration, nginx

我想配置 Nginx，以便这个 URL：

```
http://www.example.com/x/... 
```

重定向到这里：

```
http://x.example.com/... 
```

和其他一切（不是[http://www.example.com/x/](http://www.example.com/x/) ...）

```
http://www.example.com/... 
```

保持原样：

```
http://www.example.com/... 
```

你如何配置 Nginx 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:44:50.347

您可以通过在服务器配置中设置 2 个位置块来执行 os：1 个带有重定向，1 个带有与其他类似内容匹配的默认内容：

```
location / {
   # directives needed to serve the regular stuff       
}

location /x/ {
  rewrite ^/x/(.*)$ $1 last;
} 
```

# php - 从 MySql 表中删除重复的行

> ID：12029726
> 
> 赞同：2
> 
> 时间：2012-08-19T20:27:06.550
> 
> 标签：php, mysql

我有一个脚本可以在 MySql 表中查找重复行，该表包含 40,000,000 行。但是速度很慢，有没有更简单的方法可以在不进出php的情况下找到重复记录？

这是我目前使用的脚本

```
 $find = mysql_query("SELECT * FROM pst_nw ID < '1000'");
        while ($row = mysql_fetch_assoc($find))
        {
            $find_1 = mysql_query("SELECT * FROM pst_nw add1 = '$row[add1]' AND add2 = '$row[add2]' AND add3 = '$row[add3]' AND add4 = '$row[add4]'");
                if (mysql_num_rows($find_1) > 0) {
                                                    mysql_query("DELETE FROM pst_nw WHERE ID ='$row[ID]'}

         } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:32:28.640

你有很多选择。

## 让数据库完成工作

使用唯一索引创建表的副本 - 然后将数据从源表中插入其中：

```
CREATE TABLE clean LIKE pst_nw;
ALTER IGNORE TABLE clean ADD UNIQUE INDEX (add1, add2, add3, add4);
INSERT IGNORE INTO clean SELECT * FROM pst_nw;
DROP TABLE pst_nw;
RENAME TABLE clean pst_nw; 
```

这样做的好处是您可以在删除源表之前验证您的新表是否正确。缺点是它占用了两倍的空间并且执行起来（相对）慢。

## 让数据库完成工作#2

您还可以通过执行以下操作来实现您想要的结果：

```
set session old_alter_table=1;
ALTER IGNORE TABLE pst_nw ADD UNIQUE INDEX (add1, add2, add3, add4); 
```

需要第一个命令作为[忽略标志被 .. 忽略的解决方法](http://bugs.mysql.com/bug.php?id=40344)

这里的优点是临时表不会弄乱 - 缺点是您在运行它之前无法检查您的更新是否完全符合您的预期。

例子：

```
 CREATE TABLE `foo` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `one` int(10) DEFAULT NULL,
  `two` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

insert into foo values (null, 1, 1);
insert into foo values (null, 1, 1);
insert into foo values (null, 1, 1);

select * from foo;
+----+------+------+
| id | one  | two  |
+----+------+------+
|  1 |    1 |    1 |
|  2 |    1 |    1 |
|  3 |    1 |    1 |
+----+------+------+
3 row in set (0.00 sec)

set session old_alter_table=1;
ALTER IGNORE TABLE foo ADD UNIQUE INDEX (one, two);

select * from foo;
+----+------+------+
| id | one  | two  |
+----+------+------+
|  1 |    1 |    1 |
+----+------+------+
1 row in set (0.00 sec) 
```

## 不要在数据库之外做这种事情

尤其是 4000 万行在 db 之外执行此类操作可能需要大量时间，并且可能根本无法完成。任何留在数据库中的解决方案都会更快、更健壮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:43:28.933

通常在这样的问题中，问题是“我有重复的行，只想保留一行，任何一行”。

但是从代码来看，你想要的是：“如果一组add1、add2、add3、add4重复，则DELETE ALL COPIES WITH ID < 1000”。在这种情况下，使用 INSERT IGNORE 从表复制到另一个表不会满足您的要求 - 甚至可能保留 ID 较低的行并丢弃后续行。

我相信你需要运行这样的东西来收集所有的“坏 ID”（重复的 ID，超过 1000 的重复；在这段代码中，我使用了“AND bad.ID < good.ID”，所以如果你有 ID 777与 ID 888 重复的 ID 777 仍将被删除。如果这不是您想要的，您可以在“AND bad.ID < 1000 AND good.ID > 1000”或类似的内容中进行修改）。

```
CREATE TABLE bad_ids AS
    SELECT bad.ID FROM pst_nw AS bad JOIN pst_nw AS good
    ON ( bad.ID < 1000 AND bad.ID < good.ID
       AND bad.add1 = good.add1
       AND bad.add2 = good.add2
       AND bad.add3 = good.add3
       AND bad.add4 = good.add4 ); 
```

然后，一旦您将所有错误 ID 放入表中，

```
DELETE pst_nw.* FROM pst_nw JOIN bad_ids ON (pst_nw.ID = bad_ids.ID); 
```

按此顺序在 add1、add2、add3、add4 和 ID 上的（非唯一，可能只是临时的）索引将极大地提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T22:06:27.213

使用“分组依据”运算符获取重复行。这是您可以尝试的示例：

```
select id
 from table
group by matching_field1,matching_field2....
having count(id) > 1 
```

因此，您将获得所有重复的 ID。现在使用删除查询删除它们。不要使用“IN”，而是使用“OR”运算符，因为“IN”比“OR”慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T20:35:17.917

当然有。但是请注意，如果有 4000 万条记录，您很可能会超过最大 php 执行时间。尝试关注

```
Create table temp_pst_nw like pst_nw;
Insert into temp_pst_nw select * from pst_nw group by add1,add2,add3,add4; 
```

先确认一切正常！！

```
Drop table pat_nw;
Rename table temp_pst_nw to pst_nw; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T20:32:27.143

尝试创建一个具有相同定义的新表。即“my_table_two”，然后执行：

> SELECT DISTINCT unique_col1, col2, col3 [...] FROM my_table INTO my_table_two;

也许这样就可以解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-11T14:18:59.533

如果您不使用`select *`，您的代码会更好，只选择要比较的列（4 个地址）。它应该在我的 sql 中有限制子句。当你有太多这样的 nums 行时，它可以避免状态不响应。

# python - dnsPython - 不工作

> ID：12029728
> 
> 赞同：0
> 
> 时间：2012-08-19T20:27:14.377
> 
> 标签：python, dnspython

我正在做一个项目，我需要测试域是否在 MX、AAAA 记录中具有 IPv6 地址。我想使用 Python 进行脚本编码。我了解了 dnsPython 并安装了它，但它似乎根本不起作用。

当我执行这个简单的代码时：

```
import dns.resolver

answers = dns.resolver.query('dnspython.org', 'MX')
for rdata in answers:
    print 'Host', rdata.exchange, 'has preference', rdata.preference 
```

我收到此错误：

```
Traceback (most recent call last):
  File "H:\Python_workspace\Test\Zdroj\bbb.py", line 9, in <module>
    answers = dns.resolver.query('dnspython.org', 'MX')
  File "build\bdist.win32\egg\dns\resolver.py", line 920, in query
  File "build\bdist.win32\egg\dns\resolver.py", line 847, in query
  File "build\bdist.win32\egg\dns\resolver.py", line 692, in _compute_timeout
dns.exception.Timeout 
```

我曾经用 Java 编写代码，但是如果在编译过程中出现了一些错误，由于错误描述，我能够找出问题所在，但是在这里我迷路了，我无法从错误中找到任何有用的东西，我可以用它来查找错误。似乎缺少某些东西，或者库安装不当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:39:31.253

你得到的例外是：`dns.exception.Timeout`. 这不是编译错误，而是运行时异常。这可能是由于您的防火墙或路由器设置不允许 dnspython 进行所需的 DNS 查询。

# html - 如何动态填充无框网格？

> ID：12029732
> 
> 赞同：1
> 
> 时间：2012-08-19T20:27:40.770
> 
> 标签：html, css, ruby-on-rails, less, responsive-design

我正在尝试动态填充无框网格（使用 Rails 循环），但效果并不理想。

我了解 LESS 以及使用 @1col（@2cols 等）作为变量的概念。但是网站上展示的示例（或者更确切地说是嵌入网站中的示例，framelessgrid.com/）显示了使用大量硬编码列。

这是来自 framelessgrid.com 的部分代码

少文件：

```
@font-size: 17;
@line: 24;
@em: @font-size*1em;

@column: 48;
@gutter: 24;

   @1col:( 1 * (@column + @gutter) - @gutter) / @em;
  @1cols: @1col;
  @2cols:( 2 * (@column + @gutter) - @gutter) / @em;
  @3cols:( 3 * (@column + @gutter) - @gutter) / @em;
  @4cols:( 4 * (@column + @gutter) - @gutter) / @em;
  @5cols:( 5 * (@column + @gutter) - @gutter) / @em;
  @6cols:( 6 * (@column + @gutter) - @gutter) / @em;
  @7cols:( 7 * (@column + @gutter) - @gutter) / @em;
  @8cols:( 8 * (@column + @gutter) - @gutter) / @em;
  @9cols:( 9 * (@column + @gutter) - @gutter) / @em;
@10cols: (10 * (@column + @gutter) - @gutter) / @em;
@11cols: (11 * (@column + @gutter) - @gutter) / @em;
@12cols: (12 * (@column + @gutter) - @gutter) / @em;
@13cols: (13 * (@column + @gutter) - @gutter) / @em;
@14cols: (14 * (@column + @gutter) - @gutter) / @em;
@15cols: (15 * (@column + @gutter) - @gutter) / @em;
@16cols: (16 * (@column + @gutter) - @gutter) / @em;

.width (@cols:1) {
    width: (@cols * (@column + @gutter) - @gutter) / @em;
}
//....

 article section, #colophon {
padding: 0 18/@em;
margin: 0 auto;
max-width: @8cols;
}

#grid {
height: @4cols;
position: relative;
overflow: hidden;
}

.col {
    background: @highlight;
    height: 100%;
    width: @1col;
    position: absolute;
    left: 50%; top: 0;
    margin-left: 12/@em;
}

#grid .col {
    .transition(background-color 0.382s ease-out);
}

    .col2 {margin-left: (1*72+12)/@em;}
    .col3 {margin-left: (2*72+12)/@em;}
    .col4 {margin-left: (3*72+12)/@em;}
    .col5 {margin-left: (4*72+12)/@em;}
    .col6 {margin-left: (5*72+12)/@em;}
    .col7 {margin-left: (6*72+12)/@em;}
    .col8 {margin-left: (7*72+12)/@em;}
    .col9 {margin-left: (8*72+12)/@em;}
    .col10 {margin-left: (9*72+12)/@em;}
    .col11 {margin-left: (10*72+12)/@em;}
    .col12 {margin-left: (11*72+12)/@em;}
    .col13 {margin-left: (12*72+12)/@em;}
    .col14 {margin-left: (13*72+12)/@em;}
    .col15 {margin-left: (14*72+12)/@em;}
    .col16 {margin-left: (15*72+12)/@em;}
    .col17 {margin-left: (16*72+12)/@em;}
    .col18 {margin-left: (17*72+12)/@em;}
    .col19 {margin-left: -(1*72-12)/@em;}
    .col20 {margin-left: -(2*72-12)/@em;}
    .col21 {margin-left: -(3*72-12)/@em;}
    .col22 {margin-left: -(4*72-12)/@em;}
    .col23 {margin-left: -(5*72-12)/@em;}
    .col24 {margin-left: -(6*72-12)/@em;}
    .col25 {margin-left: -(7*72-12)/@em;}
    .col26 {margin-left: -(8*72-12)/@em;}
    .col27 {margin-left: -(9*72-12)/@em;}
    .col28 {margin-left: -(10*72-12)/@em;}
    .col29 {margin-left: -(11*72-12)/@em;}
    .col30 {margin-left: -(12*72-12)/@em;}
    .col31 {margin-left: -(13*72-12)/@em;}
    .col32 {margin-left: -(14*72-12)/@em;}
    .col33 {margin-left: -(15*72-12)/@em;}
    .col34 {margin-left: -(16*72-12)/@em;}
    .col35 {margin-left: -(17*72-12)/@em;}
    .col36 {margin-left: -(18*72-12)/@em;}

    .col1, .col2, .col3, .col4, .col19, .col20, .col21, .col22 {
        background: @emphasis;
    } 
```

HTML 文件：

```
<article>

            <figure id="grid">
                <div class="col col1"></div>
                <div class="col col2"></div>
                <div class="col col3"></div>
                <div class="col col4"></div>
                <div class="col col5"></div>
                <div class="col col6"></div>
                <div class="col col7"></div>
                <div class="col col8"></div>
                <div class="col col9"></div>
                <div class="col col10"></div>
                <div class="col col11"></div>
                <div class="col col12"></div>
                <div class="col col13"></div>
                <div class="col col14"></div>
                <div class="col col15"></div>
                <div class="col col16"></div>
                <div class="col col17"></div>
                <div class="col col18"></div>
                <div class="col col19"></div>
                <div class="col col20"></div>
                <div class="col col21"></div>
                <div class="col col22"></div>
                <div class="col col23"></div>
                <div class="col col24"></div>
                <div class="col col25"></div>
                <div class="col col26"></div>
                <div class="col col27"></div>
                <div class="col col28"></div>
                <div class="col col29"></div>
                <div class="col col30"></div>
                <div class="col col31"></div>
                <div class="col col32"></div>
                <div class="col col33"></div>
                <div class="col col34"></div>
                <div class="col col35"></div>
                <div class="col col36"></div>
            </figure>

</article> 
```

所以 col2 到 col18 类的列开始出现在屏幕中间并向右移动，从 сcol19 - col36 的列从中心向左移动..

我如何使用这个概念来动态创建列？

我想做类似的事情：

```
 <figure id="grid">
  <% My_model.all.each do |m| %>
   <div class="col col1"> <%= m.content %> </div>
  <% end %> 
   </div> 
```

然而，这将从屏幕中间开始填充网格（由于 .col 中的 CSS）：

```
 .col{left: 50%;} 
```

当然我可以切换到 left:0 但它有点否定无框的概念（Framelessgrid.com 中的第 3 部分：

> 1.  在视口中居中。将网格水平对齐到视口的中间。对于具有偶数列的网格（如图），将视口的中心点对齐在两个最中心列之间的排水沟中间。对于奇数网格，将其对齐在最中心列的中间。

那么我如何坚持这个概念，但从循环中动态创建/填充列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:23:03.647

所以既然这个问题得到了投票..

这是我如何通过 Rails erb 代码重新创建网格（保持绝对定位）。我需要一个大约 12 列宽的列，所以我只是向左和向右循环。

添加到 LESS 文件中：

```
.contain{

    width: @6cols;
    height: @2cols;
    margin-bottom: @gutter/@em;
} 
```

控制器：

```
def index
    @counter = 0
    @ticker =  0
end 
```

HTML：

```
<figure id="grid">
        <% MyModel.all.each_with_index do |p, i| %>         
    <div class = "contain" >                
            <% @counter = @counter + 2 %>               
            <div class="col col<%= @counter  %>" id ="message_text"> <%= @counter %> || <%= i %> 

            </div>
                <% if @counter == 5  %>
                    <% @counter = 18 %>
                            </div>
                        <div class ="return"></div>
                <% elsif @counter == 24 %>
                    <% @counter = -1 %> 
                            <% if  @ticker == 0 %>

    </div>
    <div class ="return"></div>
                        <% end %>

                <% end %>
        <% @ticker = 1 %>               
        <% end %> 
</figure> 
```

然而，这是一个更好（更接近真实世界）的例子，它是做一个固定宽度的列响应式网格：

少文件：

```
@column: 85;    // The column-width of your grid in pixels
@gutter: 20;    // The gutter-width of your grid in pixels
@half_gutter : @gutter / 2;

@model_fix : 7.5/@em;

#build figure {
    height: 100%;
    background: @background;
    position: absolute;
    overflow: none;
    margin: 0 @gutter/@em;

}

#build .col {
    float: left;
    left: 0;
        background: white;

}

.col {

    height: @1col;
    width: @1col;
    position: absolute;
    margin: 0 @half_gutter/@em @gutter/@em @half_gutter/@em;

}

@media screen and (min-width: 78.750em) {

    .offset {
    left: 50% -  @8cols ; 

    }

    #build figure {
        height: 100%;
        background: @background;
        position: relative;
        overflow: none;
        margin: 0 auto 0 (@half_gutter - 4)/@em;
        width: @12cols + @gutter/@em;

    }
}

.message_text .col {
    width: @2cols;
    height: @2cols - @model_fix*2;
    position: relative;
    color: @grey_text;

}

.message_text #mess_text{
    font-size: 14/@em;
    margin: @half_gutter / @em;
} 
```

HTML 文件：

```
<body>
<article>
    <section id="build">                
        <figure id = "models" class ="offset">
            <% @scenes.each_with_index do |s, i | %>
                <div class ="message_text ">
                    <div class="col">
                        <div id = "model_text" >

                <%= link_to s.title, scene_path(s) %> 

                        </div>
                        </div>
                </div>
            <% end %>   
        </figure>
    </section>
</article>
</body> 
```

# asp.net - Windows 8 RTM 上的 Visual Studio 2012 Web 发布无法启动浏览器

> ID：12029733
> 
> 赞同：6
> 
> 时间：2012-08-19T20:27:43.067
> 
> 标签：asp.net, windows-8, asp.net-mvc-4, visual-studio-2012

我正在使用 Windows 8 RTM x64 上的 Visual Studio 2012 Premium 开发一个 ASP.NET MVC 4 站点。当我右键单击 Web 应用程序并选择“发布”时，Visual Studio 2012 会返回以下消息：

“无法打开 'http://.../' 的 url。异常：类未注册”

发布过程似乎工作正常，但无法启动浏览器。每次我尝试发布网站时都会发生这种情况，并且在 Chrome (21.0.1180.79 m) 或 Firefox (14.0.1) 上都会发生这种情况。

此外，由于该站点未启动发布后，我使用 Ctrl-F5 手动执行此操作。我可以正常浏览该站点，但是如果我右键单击任务栏上的浏览器图标以启动另一个浏览器实例，则什么也没有发生。关闭所有浏览器实例后，浏览器任务栏图标将恢复其正常行为。

我不确定这两个问题是否相关，但这里的共同主题是从 Visual Studio 2012 启动浏览器会导致意外的副作用。浏览器要么无法在发布时启动，要么使用 Ctrl-F5 启动，但使用任务栏图标启动另一个实例无用。

任何帮助表示赞赏。

**编辑：**我重新安装了整个软件堆栈（Windows 8、Office 2010、Visual Studio 2012、Windows Update、Chrome、Firefox）。除非我将 Internet Explorer 设为默认浏览器，否则上述问题仍然存在。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:24:46.923

我提交了一个 Chrome 错误，这是一个浏览器注册问题。如果您从下载中卸载并重新安装，并且确定对 UAC 提示说“是”，Chrome 将注册机器范围，而不是用户。这是以管理员身份启动所必需的。(HKLM vs. HKCU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T10:24:53.333

看起来这个问题比 Web Publish 操作更普遍。每当您使用 ShellExecute() API（或 Process.Start）访问 URL 时，在提升的权限下运行（即以管理员身份运行）时都会失败。

我在任何使用 Process.Start() 或 ShellExecute() 的应用程序中都看到了这一点。当 UAC 打开并且我在 UAC 帐户下正常运行它时，一切正常并且浏览器打开。使用“以管理员身份运行”运行失败。这很容易测试。

不确定这是否是操作系统中的错误，或者微软是否认为这是一项安全“功能”。

FWIW，有些人提到将IE设置为默认浏览器有效，但它对我不起作用。如果我提升了权限，基本上没有链接可以工作。这实际上破坏了我们在后台用于管理的许多管理应用程序。

# php - 文件上传器返回错误 302

> ID：12029743
> 
> 赞同：0
> 
> 时间：2012-08-19T20:30:29.960
> 
> 标签：php, apache

我有一个独立的文件上传器，它安装在我的 dedi' 服务器中。上传文件位于我的主控制面板文件夹中 -

> /usr/share/nameofcontrolpanel/public/uploader.

我把它放在那里是因为每当我尝试将它放在 /var/www 中时，它似乎都会出现。它不会加载，只是转到控制面板，所以我把它放在 apache 当前读取 web 根目录的位置，它位于控制面板的公共文件夹中。

每当我尝试使用上传器上传文件时，我都会收到错误 302。我只是猜测这与apache有关吗？（我已经有 php 5.3 这是一个要求）

这是上传者的 .htaccess。

```
# Enable rewrite engine and route requests to framework
RewriteEngine On

## The only you have to edit is this one.
## If the Files Inbox is located at inbox.yourwebsite.com, you will set
## RewriteBase /
## If it is located at www.yourwebsite.com/filesInbox, it will be
## RewriteBase /filesInbox/

## THIS IS THE ONLY LINE YOU HAVE TO CHANGE
RewriteBase /

## !!!
## DO NOT REMOVE THE FOLLOWING LINES !!
## !!!

RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L,QSA]

# Disable ETags
<IfModule mod_headers.c>
    Header Unset ETag
    FileETag none
</IfModule>

# Default expires header if none specified (stay in browser cache for 7 days)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault A604800
</IfModule>

# Use PHP 5.3
AddType application/x-httpd-php53 .php 
```

上传者的网址是 uploader.mysite.com

我需要寻找什么来摆脱错误 302 并成功上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:36:28.037

302 是一个 HTTP 代码，表示正在发生重定向。[http://en.wikipedia.org/wiki/HTTP_302](http://en.wikipedia.org/wiki/HTTP_302)。

自从我玩 .htaccess 文件以来已经有一段时间了，但它看起来像是重定向到站点的根目录，而且听起来您的上传脚本不在站点根目录中。这可能是您的错误的根源。

# linked-list - 数据流图中的链表

> ID：12029745
> 
> 赞同：1
> 
> 时间：2012-08-19T20:31:01.700
> 
> 标签：linked-list, dataflow-diagram

这个对吗？
我基本上想问的是-将链表视为数据源是否正确。在这个程序中发生的事情是一个文本文件的内容被加载到一个链表中的内存中。所有的处理工作都由哪个完成，然后当程序退出时，链表被写入文件。在那种情况下，这个 DFD 是否正确？

![在此处输入图像描述](../Images/733df8b0d42bdcd1c02dbe9f2db8fc15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:46:48.077

您要问的是数据流程图，或者也称为设计的动态/事件视图。

此图说明 UI 上的事件将如何进行。

> 我基本上想问的是-将链表视为数据源是否正确。

是的，当然，有时最好继续使用链接列表。LL 提供了一种更简单、更快捷的方式来通过具有特定实体的各种属性的节点。

> 在这个程序中发生的事情是一个文本文件的内容被加载到一个链表中的内存中。

基本上，将数据存储为文本不是一个好主意，它会增加解析开销。LL 中的节点值以二进制格式存储，这样当程序加载它们时，它可以快速链接所有互连的节点。

> 所有的处理工作都由哪个完成，然后当程序退出时，链表被写入文件。

很难理解你想问什么，但如果你问谁在处理工作，那么显然是你的程序解析保存在文件中的数据。如果你对以前的数据进行任何更改，你的程序也会将更改转储到文件中。

> 在那种情况下，这个 DFD 是否正确？

很难说，直到知道整个要求..

# oauth - Web App：使用登录 而不是本地人：太冒险了？

> ID：12029747
> 
> 赞同：0
> 
> 时间：2012-08-19T20:31:26.107
> 
> 标签：oauth, openid, clr

我对这个 web 应用程序的计划是它需要用户使用 LinkedIn 登录，并且用户在站点和数据库上的 id 是他们的 LinkedIn id。

因此，最方便和优雅的事情似乎是根本没有“本机”登录，而只是让用户从一开始就使用 LinkedIn 登录。

看到 Twitter api 开发人员最近遭遇的灾难后，我现在想知道这是否被认为风险太大。我假设 LinkedIn 允许它（尚未检查）。

替代方案可能是：

*   本地登录，然后使用 LinkedIn 登录。
*   OpenId 登录，然后登录 LinkedIn。
*   不知何故有一个备份登录，以防linkedin让我失望。

对主要想法或替代方案有任何想法吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T00:26:58.157

一旦您要求用户创建本机登录，您就会使您的应用程序的可用性更具挑战性 IMO。当我被迫在一个网站上创建一个新帐户时 ，我*讨厌，讨厌，讨厌它，而按下一个按钮就可以工作。*

当然，在 LinkedIn 的提供商不再为您的应用程序工作的不太可能的情况下，可用性将接近于零。所以，有权衡。

在您授权时，LinkedIn 是否提供对用户电子邮件地址的访问权限？如果是这种情况，您可以使用 LinkedIn 登录。如果 LinkedIn 的提供商不再适用于您的应用，您可以以权威的方式向用户发送带有临时密码的电子邮件。如果他们不通过他们的提供商提供电子邮件地址，那么您将被迫直接从用户那里单独收集它（并可能在用户打错字或其他情况下验证它）。

# jquery - 如何根据字符串值查找 JSON 对象成员

> ID：12029749
> 
> 赞同：2
> 
> 时间：2012-08-19T20:31:36.130
> 
> 标签：jquery, jsonp, getjson, json

所以让我们假设我有一个这样的 JSON 文件：

```
{ "store": {
"book": [ 
  { "category": "reference",
    "author": "Nigel Rees",
    "title": "Sayings of the Century",
    "price": 8.95
  },
  { "category": "fiction",
    "author": "Evelyn Waugh",
    "title": "Sword of Honour",
    "price": 12.99
  },
  { "category": "fiction",
    "author": "Herman Melville",
    "title": "Moby Dick",
    "isbn": "0-553-21311-3",
    "price": 8.99
  },
  { "category": "fiction",
    "author": "J. R. R. Tolkien",
    "title": "The Lord of the Rings",
    "isbn": "0-395-19395-8",
    "price": 22.99
  }
    ]
  }
} 
```

我想要做的是抓住“书”的成员及其所有字符串值对，其中标题是“荣誉之剑”。我怎么能用 JQuery 做到这一点？问题是我不知道成员的索引 ID，如果我知道这将是微不足道的，即 store.book[1].XXX 会给我我正在寻找的所有兄弟键值对的值为了。

关于如何用最少的代码做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:36:53.813

使用数组[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var matches = store.book.filter(function(val, index, array) {
    return val.title === 'Sword of Honour';
}); 
```

`book`结果将是与过滤谓词匹配的所有元素的数组。

注意：这是一种 ES5 方法。非 ES5 浏览器的链接 MDN 页面上有一个 shim。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:36:33.220

```
function returnMatchedbook(store) {
    for(var i = 0; i < store.book.length; i++) {
        if(book[i].title == 'Sword of Honour') {
            return book[i];
        }
    }
 } 
```

# mongodb - Morphia 中的 MongoDB 集合相当于什么？

> ID：12029756
> 
> 赞同：0
> 
> 时间：2012-08-19T20:32:22.273
> 
> 标签：mongodb, morphia

...如果没有等价物，我应该如何在 Morphia 数据存储中组织我的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:58:08.567

您可以使用 AdvancedDatastore 界面更改集合的名称。例如：

```
advancedDatastore.save("collectionNameYouPrefer", yourMorphiaObject); 
```

上面的代码会将您的MorphiaObject 保存到名为“collectionNameYouPrefer”的集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T23:42:07.880

你有你的`@Entity`类，它定义了你的集合，而实例就是你的文档。

还是我误解了你的问题？

# java - ExpandableListView 中最初展开的组

> ID：12029758
> 
> 赞同：0
> 
> 时间：2012-08-19T20:32:24.000
> 
> 标签：java, android, view, expandablelistview

我希望我的小组第一次扩大。然后它应该像往常一样运行（点击指示器后折叠/展开）

我找不到任何可行的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-22T15:16:48.900

遍历所有组并使用ExpandableListView 的[expandGroup()](http://developer.android.com/reference/android/widget/ExpandableListView.html#expandGroup%28int%29)：

```
ExpandableListView expView = (ExpandableListView) findViewById(R.id.expView);
ExpandableRecAdapter expAdapter = new ExpandableRecAdapter(this, expHeaders, expItems);
expView.setAdapter(expAdapter); 

for (int i = 0; i < expAdapter.getGroupCount(); i++)
    expView.expandGroup(i); 
```

（或查看类似这样的其他 StackOverflow 问题：[ExpandableListview How to Auto groupExpand - Android](https://stackoverflow.com/questions/17920185/expandablelistview-how-to-auto-groupexpand-android)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:52:36.587

您是否尝试过 API 调用`exapndGroup`？

[http://developer.android.com/reference/android/widget/ExpandableListView.html#expandGroup(int](http://developer.android.com/reference/android/widget/ExpandableListView.html#expandGroup(int) )

# mysql - MySQL命令SELECT的奇怪行为

> ID：12029766
> 
> 赞同：0
> 
> 时间：2012-08-19T20:33:13.330
> 
> 标签：mysql

我不知道为什么这个查询...

```
SELECT COUNT(*),* FROM table1 WHERE .. GROUP BY column1 
```

返回语法错误，但是...

```
SELECT *,COUNT(*) FROM table1 WHERE .. GROUP BY column1 
```

...返回正常数据。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:40:10.720

[Mysql](http://dev.mysql.com/doc/refman/5.5/en/select.html)文档`SELECT`说：

> 将不合格的 * 与选择列表中的其他项目一起使用可能会产生解析错误。为避免此问题，请使用合格的 tbl_name.* 参考
> SELECT AVG(score), t1.* FROM t1 ...

因此，在您的情况下，请使用以下语法：

```
SELECT COUNT(*), table1.* FROM table1 WHERE .. GROUP BY column1 
```

# java - JPA - 在服务器重新启动时重置实体属性

> ID：12029768
> 
> 赞同：0
> 
> 时间：2012-08-19T20:33:14.297
> 
> 标签：java, eclipselink

是否可以声明实体属性以便将其重置为某个默认值，但前提是重新启动托管 ejb.jar 的服务器？

这些属性用于反映某些连接的客户端的状态，这些客户端将在重新启动时断开连接。

也许我应该用不同的解决方案来解决这个问题，但认为这个问题仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:37:53.607

如果你有一个在应用程序启动/停止时触发的钩子呢？像**ServletContextListener**一样？停止时将感兴趣的条目（用户）保存到中间数据库表中，然后开始重新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:21:47.937

我使用 @Singleton 和 @Startup 注释的 EJB，测试似乎有效

```
@Singleton
@Startup
public class ClientResetBean {

    // Injected database connection:
    @PersistenceContext private EntityManager em;

    @PostConstruct
    private void resetClientState() {
        Query query = em.createQuery("UPDATE Client c SET c.online = false");
        query.executeUpdate();
    }
} 
```

# c# - WebClient CookieContainer 在 .NET 4.0+ 中运行良好，但在早期版本中不行

> ID：12029769
> 
> 赞同：5
> 
> 时间：2012-08-19T20:33:31.600
> 
> 标签：c#, .net, webclient

我正在开发一个使用 WebClient 的应用程序。我有一个扩展基本 WebClient 功能的类：

```
public class WebClientEx : WebClient
{
    private CookieContainer _cookieContainer = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = _cookieContainer;
            (request as HttpWebRequest).AllowAutoRedirect = true;
            (request as HttpWebRequest).Timeout = 10000;
        }
        return request;
    }
} 
```

我使用 WebClientEx 登录站点并请求一些信息。它适用于 4.0 和 4.5，但它不适用于早期版本，例如 3.5、3.0 等。我添加了一些调试代码，在早期版本中它说 cookie 容器中有 0 个 cookie，而 4.0+ 则说有是两个cookie，应该是。

所以原因可能是 .NET Framework 的早期版本*在将 cookie 存储在 cookie 容器中时存在一些问题*。如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:20:16.057

我已经确认 .NET 3.5 中的行为与 .NET 4.0 不同。使用以下代码进行测试：

```
Uri sourceUri = new Uri(@"http://www.html-kit.com/tools/cookietester/");
WebClientEx webClientEx = new WebClientEx();
webClientEx.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
webClientEx.UploadString(sourceUri, "cn=MyCookieName&cv=MyCookieValue");
var text = webClientEx.DownloadString(sourceUri);
var doc = new HtmlAgilityPack.HtmlDocument();
doc.Load(new MemoryStream(Encoding.ASCII.GetBytes((text))));
var node = doc.DocumentNode.SelectNodes("//div").Single(n => n.InnerText.StartsWith("\r\nNumber of cookies received:"));
Debug.Assert(int.Parse(node.InnerText.Split(' ')[4]) == 1); 
```

当然，这并不能回答您的问题；但我看不出为什么会有不同的行为，只是说它可能已在 .NET 4.0 中修复，并且该修复尚未放入 .NET 3.5 或更早版本中。

我尝试了类似的事情`HttpWebRequest`并遇到了同样的问题（适用于 4，但不是之前）：

```
HttpWebRequest webreq = ((HttpWebRequest) (WebRequest.Create(sourceUri)));
CookieContainer cookies = new CookieContainer();

var postdata = Encoding.ASCII.GetBytes("cn=MyCookieName&cv=MyCookieValue");

webreq.CookieContainer = cookies;
webreq.Method = "POST";
webreq.ContentLength = postdata.Length;
webreq.ContentType = "application/x-www-form-urlencoded";

Stream webstream = webreq.GetRequestStream();
webstream.Write(postdata, 0, postdata.Length);
webstream.Close();

using (WebResponse response = webreq.GetResponse())
{
    webstream = response.GetResponseStream();
    using (StreamReader reader = new StreamReader(webstream))
    {
        String responseFromServer = reader.ReadToEnd();
        var doc = new HtmlAgilityPack.HtmlDocument();
        doc.Load(new MemoryStream(Encoding.ASCII.GetBytes((responseFromServer))));
        var node =
            doc.DocumentNode.SelectNodes("//div").Single(n => n.InnerText.StartsWith("\r\nNumber of cookies received:"));
        Debug.Assert(int.Parse(node.InnerText.Split(' ')[4]) == 1);
    }
} 
```

`HttpWebRequest`因此， （`WebClient`使用）似乎存在问题。这可能是新的，因为我已经看到人们在 4.0 发布之前使用这样的代码（可能在 3.50 之前，他们说它有效。

如果情况紧急，我建议联系 Microsoft 支持。如果您有 MSDN 许可证，以下链接将详细说明如何使用随附的 MSDN 支持票提出支持请求：http: [//msdn.microsoft.com/en-us/subscriptions/bb266240.aspx](http://msdn.microsoft.com/en-us/subscriptions/bb266240.aspx) 如果您没有 MSDN您可以在此处详细联系支持： https: [//support.microsoft.com/oas/default.aspx?Gprid=8291&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?Gprid=8291&st=1&wfxredirect=1&sd=gn)

如果它不那么紧急，那么您可能会在[http://connect.microsoft.com/VisualStudio](http://connect.microsoft.com/VisualStudio)上记录问题，以查看您是否得到解决方法的响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:09:22.873

我刚刚创建了一个基本的 IHttpHandler 来测试这个类，它似乎可以工作。

```
<%@ WebHandler Language="C#" Class="CookieTest" %>

using System;
using System.Net;
using System.Web;

public class CookieTest : IHttpHandler
{
    public class WebClientEx : WebClient
    {
        private CookieContainer _cookieContainer = new CookieContainer();

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest request = base.GetWebRequest(address);
            if (request is HttpWebRequest)
            {
                (request as HttpWebRequest).CookieContainer = _cookieContainer;
                (request as HttpWebRequest).AllowAutoRedirect = true;
                (request as HttpWebRequest).Timeout = 10000;
            }
            return request;
        }
    }

    public void ProcessRequest(HttpContext ctxt)
    {
        ctxt.Response.ContentType = "text/plain";

        String cmd = ctxt.Request["cmd"];
        if (cmd == "set")
        {
            ctxt.Response.Cookies.Add(new HttpCookie("test", "test"));
            ctxt.Response.Write("Cookie Set: test = test");
        }
        else if (cmd == "get")
        {
            ctxt.Response.Write("Cookie Value: test = " + ctxt.Request.Cookies["test"].Value);
        }
        else
        {
            // run out tests
            WebClientEx wc = new WebClientEx();

            ctxt.Response.Write("Running tests on .NET version: " + Environment.Version);
            ctxt.Response.Write(Environment.NewLine + Environment.NewLine);
            ctxt.Response.Write("Setting Cookie...");
            ctxt.Response.Write(Environment.NewLine + Environment.NewLine);
            ctxt.Response.Write("Response: " + wc.DownloadString(ctxt.Request.Url.AbsoluteUri + "?cmd=set"));
            ctxt.Response.Write(Environment.NewLine + Environment.NewLine);
            ctxt.Response.Write("Getting Cookie...");
            ctxt.Response.Write(Environment.NewLine + Environment.NewLine);
            ctxt.Response.Write("Response: " + wc.DownloadString(ctxt.Request.Url.AbsoluteUri + "?cmd=get"));
            ctxt.Response.Write(Environment.NewLine + Environment.NewLine);
        }
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

我得到的结果是：

> 在 .NET 版本上运行测试：2.0.50727.5456
> 
> 正在设置 Cookie...
> 
> 响应：Cookie 集：测试 = 测试
> 
> 获取饼干...
> 
> 响应：Cookie 值：test = test

这对你来说是否正确？

# java - ArrayIndexOutOfBoundsExecption:Android

> ID：12029770
> 
> 赞同：2
> 
> 时间：2012-08-19T20:33:34.770
> 
> 标签：java, android, arrays, indexoutofboundsexception

我是一名新手 Android 开发人员。我正在尝试使用 Edittext 框从用户那里获取文本输入，然后将该文本转换为字符串，然后转换为大小为 4 的 char 数组。我已经存储了一个大小为 4 的数组，它包含值。我想比较两个数组并根据结果执行任务。

我不知道为什么我得到 ArrayIndexOutOfBoundsExecption

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newgame);

    Button submit = (Button) findViewById(R.id.guess);

    EditText guess = (EditText) findViewById(R.id.editText1);

    boolean c=false;

    char[] guessword;
    char[] appword = {'T', 'R', 'U', 'E'};
    guessword = guess.getText().toString().toCharArray();

    for(int i=0;i<appword.length;i++)
    {
        if(guessword[i]==appword[i])
        {
            c=true;
        }
        else
        {
            c=false;
        }
    }

    final boolean correct=c;        

    submit.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            if(correct){
                startActivity(new Intent(Newgame.this, Win.class));
            }
            else{
                startActivity(new Intent(Newgame.this, Loose.class));
            }

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T20:38:34.493

问题是它`guessword`可能少于四个字符，并且您的代码不会检查该条件。

如下更改您的代码以解决这种情况：

```
for(int i=0;i<appword.length;i++)
{
    if((i < guessword.length) && (guessword[i]==appword[i]))
    {
        c=true;
    }
    else
    {
        c=false;
        break; // <<<=== Add this to end the loop
    }
} 
```

另请注意，您编写的代码不会“锁定”`false`当字符彼此不相等时：例如，`{'A','B','Z'}`并且`{'X', 'Y', 'Z'}`将在您的旧算法下比较相等。看到 . 后立即添加`break`以退出循环`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:40:04.793

这是因为您要使用从 0 到`appword`.

以用户输入：“NO”的情况为例。因为您正在迭代`appword`哪个长度大于您的实际文本，所以当您执行 a 时，`guessword[i]`它会崩溃抛出您的`IndexOutOfBoundsException`.

我不确定你为什么使用`char[]`. 正如我所看到的，对于您的示例，`String`可以解决问题。

```
String appword = "TRUE";
String guessword = guess.getText().toString(); 
```

然后，显示 2 是否相等的方法是：

```
if (appword.equals(guessword)) 
```

如果您还想匹配大小写，请`equalsIgnoreCase`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:39:50.243

当您第一次走过时（在 onCreate 中发生），guessword 为空。你可以做的一件事是改变

```
 if(guessword[i]==appword[i]) 
```

到

```
 if(guessword != null && guessword.length =< i && guessword[i]==appword[i]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T20:48:26.403

如果您只想将输入的文本与“TRUE”进行比较，您可以简单地执行以下操作：

```
String guessword = guess.getText().toString();
if ("TRUE".equals(guessword)) {
   ...
} 
```

# jquery - 样式 jquery mobile 降级

> ID：12029775
> 
> 赞同：0
> 
> 时间：2012-08-19T20:34:48.193
> 
> 标签：jquery, css, mobile

我几乎完成了我的第一个 JQM 网站，并且正在浏览我的页面添加 css，因此当禁用 javascript 时它们仍然看起来不错。我浏览了一些 JQM 画廊网站，看起来没有其他人打扰....在尝试设置列表视图样式后，我不能说我很惊讶！:)

我花了一些时间来添加不会弄乱 JQM 增强版的基本样式。

我想知道其他人对将 JQM 网站样式化为降级的想法。有没有人费心去做？是我发现它那么难还是我错过了一个简单的方法？

任何建议都感激不尽！

# html - 如何在html5中将文本定位到图像的任一侧

> ID：12029777
> 
> 赞同：5
> 
> 时间：2012-08-19T20:35:05.180
> 
> 标签：html, css, position, html5boilerplate

我正在尝试修改 HTML5 Boilerplate 标头以使中心图像的两侧都有一个单词，如下所示：![标题正确](../Images/206283fd796fefd9b186a4d27ebfd415.png)

正如你所看到的，我设法做到了，但这只是使用了破坏 h5bp 有用性的部分样板和糟糕的 css。我现在想正确使用 h5bp 并实现同样的目标。我只是不知道该怎么做。

我目前的尝试如下所示： ![标题不正确](../Images/c3b3fdb091a8819921d94544e8eafbe2.png)

图像不在单词之间，即使标记中的顺序如下：

```
<div id="header-container">
    <header class="wrapper clearfix">
        <div class="center">
            <h1 id="title">First</h1> <img src="img/mf_coffee_cup.png" alt="" height="280" width="340" /> <h1 id="title">Second</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </header>
</div> 
```

相关CSS：

```
.center { display: table; margin: 0 auto; }

#title
{
padding: 20px;
display: inline;
font-size: 4.5em;
border-top: 4px solid #5dc1c4;
border-bottom: 4px solid #5dc1c4; 
} 
```

如果有人能解释为什么文本不是图像的任何一侧，那将不胜感激。

谢谢

编辑：

虽然下面的答案是有效的，但我实际上通过将 < img > 放入 < h1 > 而不是将它们分开来解决了这个问题，如下所示：

```
<h1 id="title">First <img src="img/mf_coffee_cup.png" alt="" height="280" width="340" /> Second</h1> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T20:44:42.967

使用您的 HTML 和这个 CSS，这三个项目将一起显示在一行上：

```
.center h1 {display: inline;}​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/yK7Qy/](http://jsfiddle.net/jfriend00/yK7Qy/)

仅供参考，我注意到您`id="title"`在多个地方使用相同的。这对您不起作用，因为给定的 id 只能出现在页面中的一个对象上。您可能希望将其更改为`class="title"`.

* * *

将所有文本和图像放在一个`<h1>`标签中可能会更容易，如下所示：

```
<div id="header-container">
    <header class="wrapper clearfix">
        <div class="center">
            <h1>
                <span class="title">First</span>
                <img src="http://photos.smugmug.com/photos/344291068_HdnTo-Ti.jpg" alt="" />
                <span class="title">Second</span>
            </h1>
        </div>
    </header>
</div>​ 
```

在这里演示：http: [//jsfiddle.net/jfriend00/CHv4k/](http://jsfiddle.net/jfriend00/CHv4k/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:42:42.250

尝试使用`display:inline-block;`而不是`display:inline`. 我面前没有这个项目，所以我不确定这是否可行。

但是，如果这样做，图像将位于错误的位置。您必须简单地使用`vertical-align`or `margin-top:-##px`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T21:04:13.373

一种稍微不同的方法，使用跨度，并且只有一个 h1 标签：

```
<div id="header-container">
    <header class="wrapper clearfix">
        <div class="center">
            <h1 class="title">
                <span>First</span>
                <img src="http://photos.smugmug.com/photos/344291068_HdnTo-Ti.jpg" alt="" />
                <span>Second</span>
            </h1>
        </div>
    </header>
</div>​ 
```

我还更改了一些 CSS：

```
.center h1 {display: block; }
// Add vertical align to the image, rather than the h1
.center img {margin: 0 10px; vertical-align: middle;} 
```

[在这里](http://jsfiddle.net/yK7Qy/16/)摆弄 ​</p>

# c++ - std::sort 和自定义交换函数

> ID：12029779
> 
> 赞同：4
> 
> 时间：2012-08-19T20:35:30.570
> 
> 标签：c++, stl, std

我目前有一个数组`pair<double, int>`，我使用一个简单的自定义比较器函数对其进行排序，例如

```
// compare by first
int sort_index_lcomparator(const pair<double, int>& a, const pair<double, int>& b) {
    return a.first < b.first;
}
// then sort simply like
pair<double, int> arr[size];
std::sort(arr, arr + size, sort_index_lcomparator); 
```

我实际上对索引顺序感兴趣，而不是对排序的双打感兴趣。我的问题是我想改变这个结构，取而代之的是一个由两个数组组成的结构，而不是一个结构的数组，即我想优化局部性和自动矢量化，但在这种情况下，我需要一个重载`swap`，即专门附加到一个类型。我想我需要一些类似于重新定义类型的东西，`swap`并`double`在这样的自定义中保持两个数组同步`swap`。有没有办法`swap`在有限的范围内以这种方式“覆盖”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:43:21.040

我有一个建议给你：让索引数组成为你排序的数组，并将值保留为全局数组。从那时起：根据接受索引的比较器进行排序，但实际上是根据值进行比较。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-19T20:45:51.157

您应该专门`std::sort`使用您的自定义“比较器”。

```
template <class RandomAccessIterator, class Compare>
void sort ( RandomAccessIterator first, RandomAccessIterator last, Compare comp ); 
```

默认情况下`sort`使用标准比较器，它只比较给定迭代器引用的元素。

使用自定义`Compare`您可以覆盖它。请注意，它**不是**函数（在 C++ 中，通常您可能不会将函数作为模板参数传递）。这是一个`class`。您将此类的对象传递给`sort`，而该对象应实现以下运算符：

```
bool operator () (const Type1 &a, const Type2 &b); 
```

所以，你可以调用`sort`你的数组`double`。您的比较器应该有指向两个数组开头的指针：`double`和`int`.

对于数组，迭代器解析为指向数组元素的指针。使用数组起始地址，您可以将其转换为索引，并使用它来访问第二个数组。

# iphone - 基于网络的应用程序是否可以从 iphone 检索图像？

> ID：12029782
> 
> 赞同：0
> 
> 时间：2012-08-19T20:36:03.050
> 
> 标签：iphone, ios, image

我正在创建一个我也希望在 iphone 上得到支持的网站。该网站允许用户上传图像并对其进行操作。在桌面上，用户只需单击上传按钮从他们的计算机中选择文件并将其上传到站点。但这在iphone上会失败。

对于使用 php/mysql/js 并在浏览器中运行以从用户的相机胶卷中获取图像的纯 Web 应用程序，有什么方法吗？Apple 是否提供任何 API 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:55:46.113

不，目前不可能——但显然 iOS 6 将支持从 MobileSafari 上传图像和视频。（除此之外，您可以询问您的用户他们的设备是否已越狱和 id 所以，建议他们从 Cydia 下载 Safari Upload Enabler）。

# php - 如何创建包含的 php 文件的分页列表

> ID：12029784
> 
> 赞同：0
> 
> 时间：2012-08-19T20:36:05.717
> 
> 标签：php, include, pagination

我是一个完整的php新手。所以我有这个脚本，其中包括在“items”目录中找到的所有 *.php 文件。

```
<?php
foreach (glob("products/items/*.php") as $filename)
{
include $filename;
}?> 
```

我将如何将结果显示在单独的页面中（例如：每页最多 5 个项目（* .php 文件））？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:42:42.823

您的 PHP 脚本只会构建一页。该页面由目录中的所有`.php`文件`items`一个接一个组成。

您需要编写代码以根据用户选择来选择适当的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:59:43.027

如果您想在 php 中从头开始进行分页，那么这里有一个教程（将 mysql 信息替换为您的 php 文件信息）：[单击](http://www.phpfreaks.com/tutorial/basic-pagination)

或者您可以使用众多 jQuery 插件之一：插件[列表](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)

# c# - ZeroMQ C# 客户端不接收来自 C++ 服务器的消息

> ID：12029788
> 
> 赞同：4
> 
> 时间：2012-08-19T20:36:18.317
> 
> 标签：c#, c++, zeromq

我试图编程从一台服务器向多个客户端发送消息。我必须在客户端使用 C#，在服务器端使用 C++。我以服务器的[http://zguide.zeromq.org/page:all#toc8为例：](http://zguide.zeromq.org/page:all#toc8)

```
#define within(num) (int) ((float) num * rand () / (RAND_MAX + 1.0))

int main () {

//  Prepare our context and publisher
zmq::context_t context (1);
zmq::socket_t publisher (context, ZMQ_PUB);
publisher.bind("tcp://*:5556");
//publisher.bind("ipc://weather.ipc");

//  Initialize random number generator
srand ((unsigned) time (NULL));
while (1) {

    int zipcode, temperature, relhumidity;

    //  Get values that will fool the boss
    zipcode     = within (100000);
    temperature = within (215) - 80;
    relhumidity = within (50) + 10;

    //  Send message to all subscribers
    zmq::message_t message(20);
    _snprintf ((char *) message.data(), 20 ,
        "%05d %d %d", zipcode, temperature, relhumidity);
    publisher.send(message);

}
return 0;
} 
```

对于客户：

```
namespace ZMQGuide
{
internal class Program
{
    public static void Main(string[] args) {
        Console.WriteLine("Collecting updates from weather server…");

        // default zipcode is 10001
        string zipcode = "10001 "; // the reason for having a space after 10001 is in case of the message would start with 100012 which we are not interested in

        if (args.Length > 0)
            zipcode = args[1] + " ";

        using (var context = new Context(1))
        {
            using (Socket subscriber = context.Socket(SocketType.SUB))
            {
                subscriber.Subscribe(zipcode, Encoding.Unicode);
                subscriber.Connect("tcp://localhost:5556");

                const int updatesToCollect = 100;
                int totalTemperature = 0;

                for (int updateNumber = 0; updateNumber < updatesToCollect; updateNumber++)
                {
                    string update = subscriber.Recv(Encoding.Unicode);
                    totalTemperature += Convert.ToInt32(update.Split()[1]);
                }

                Console.WriteLine("Average temperature for zipcode {0} was {1}F", zipcode, totalTemperature / updatesToCollect);
            }
        }
    }
}
} 
```

他们不互相交流。在客户端（C++）上，我用 ipc 交互注释了行，因为在 Windows 客户端上使用 ipc 失败。C# - C#、C++ - C++ 交互在这种情况下正常工作。我使用 clrzmq 2.2.5。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T13:09:31.073

C# 客户端使用 Encoding.Unicode，它是一个 2 字节的 unicode 表示 (UTF-16)。C++ 服务器使用 ASCII。

ZMQ 订阅匹配在字节级别上工作，并且不会在字符编码之间转换，所以这就是我的问题所在。在 C# 客户端中切换到 Encoding.ASCII 或 Encoding.UTF8 可解决此问题。

# php - MYSQL 在另一个表中返回具有列关系数的行

> ID：12029790
> 
> 赞同：0
> 
> 时间：2012-08-19T20:36:22.190
> 
> 标签：php, mysql, database

我有一张桌子`categories`和一张桌子`posts`。我想返回超过 3 个帖子的类别。

我的查询

```
SELECT `categories`.`category_title`, COUNT(posts.post_id) as total_posts 
FROM (`categories`) 
JOIN `posts` ON `posts`.`category_id` = `categories`.`category_id` 
HAVING `total_posts` > 3 
ORDER BY `categories`.`date_created` desc 
```

它只返回 1 行。在不使用 2 个查询的情况下执行此类查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:47:36.613

您的查询正在使用称为“隐藏列”的 MySQL 功能，您甚至可能不知道。这是因为您的查询引用了诸如 date_created 之类的元素，这些元素应该被聚合但不是（这里的“应该”是指根据 SQL 标准和大多数其他数据库）。

您的查询的问题是它缺少分组依据。另一种编写方式是在加入类别*之前使用子查询中的聚合：*

```
SELECT `categories`.`category_title`, total_posts 
FROM `categories` JOIN
     (select categoryid, COUNT(posts.post_id) as total_posts
      from `posts`
      group by categoryid
      having count(*) > 3
     ) pc
     ON `pc`.`category_id` = `categories`.`category_id`
ORDER BY `categories`.`date_created` desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:42:00.797

您需要`group`按类别分类项目。

```
SELECT `categories`.`category_title`, COUNT(posts.post_id) as total_posts 
FROM (`categories`) 
JOIN `posts` ON `posts`.`category_id` = `categories`.`category_id` 

GROUP BY `categories`.`category_id`

HAVING `total_posts` > 3 
ORDER BY `categories`.`date_created` desc 
```

# mysql - 正则表达式查询的 SQL 索引

> ID：12029795
> 
> 赞同：-1
> 
> 时间：2012-08-19T20:36:43.400
> 
> 标签：mysql

如何提高以下查询的性能？我应该使用什么样的索引？我正在使用 MySQL

```
SELECT b.title
FROM book b, person p, order o
WHERE b.bid = o.bid
AND o.pid = p.pid
AND b.title LIKE 'LOVE%'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:05:04.180

你应该看看[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

对于您的查询：

*   我特别推荐、和上的索引`b.bid`，因为它们用于连接表。您甚至可能要考虑使用外键。`o.bid``o.pid``p.pid`
*   我也会考虑一个索引`b.title`，因为你在 where 子句中使用了这个。

但是，如果您想知道更改如何影响您的查询，您应该在每次更改之间进行分析，以检查它如何影响性能。

但是，我会要求您详细说明您的查询 - 您正在加入表`order`和`person`，但既不从这些表中选择也不在 where 子句中使用它们。您这样做只是为了选择已订购的书籍吗？在这种情况下，你为什么还要加入`person`？

# iphone - 以编程方式更改 uitabbar 后如何将信息发送到根视图控制器

> ID：12029796
> 
> 赞同：0
> 
> 时间：2012-08-19T20:36:44.063
> 
> 标签：iphone, ios5, uitabbar

我目前正在使用以编程方式切换 uitabbar 选择

```
[myTabBarController setSelectedIndex:index] 
```

但同时我想向新选择的 uitabbar 项目的根控制器发送一些信息。我怎样才能做到这一点？

具体来说，我在主页中有一个搜索框，当用户输入搜索字符串并单击搜索时，我希望搜索结果出现在另一个 uitabbar 项下，即搜索。如何将搜索字符串发送到新的根视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:49:15.227

```
UINavigationController *newlySelectedRootController = [tabBarController.viewControllers objectAtIndex:index]; 
```

从这里你可以做任何你想做的事`newlySelectedViewController`。

# netbeans-7 - 将 Netbeans 默认项目文件夹更改为 nbproject 以外的其他内容

> ID：12029801
> 
> 赞同：5
> 
> 时间：2012-08-19T20:37:45.437
> 
> 标签：netbeans-7, collaboration

我们有多个人从事 php 项目。有没有办法让 netbeans 7.2 调用包含 nbproject 以外的所有元数据的文件夹？

我希望我从现有资源创建的所有项目都具有类似 qwertymk 的内容，并且每当我创建项目或尝试加载它们时，它总是会转到名为 qwertymk 而不是 nbproject 的文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:56:30.157

显然，文件夹名称在 Netbeans 中的多个位置进行了硬编码，但您可以选择通过将 nbproject 放置在其他地方来解决这个问题，例如放入不会让您紧张的子文件夹中。看看这个旧线程，特别是[这个帖子](http://netbeans-org.1045718.n5.nabble.com/Rename-nbproject-netbeans-folder-tp2980198p2980215.html)。我无法为您神奇地更改硬编码的 Netbeans 内容，但如果我指出的解决方案能够满足您的需求并回答问题，我会很高兴。

# java - 构造函数重载中的设计问题

> ID：12029804
> 
> 赞同：2
> 
> 时间：2012-08-19T20:38:17.787
> 
> 标签：java

我正在处理现有代码以增强功能。

在现有代码中，我看到有多个带有字符串参数的构造函数。喜欢

```
public class A {
    public A(String a){
    }

    public A(String a, String b){
    }

    public A(String a, String b, String c){
    }
} 
```

在增强时我发现我需要向构造函数添加另一个字符串参数。然而，这似乎是个问题，可能还有另一个改进之处在于我必须添加花药字符串。

我想避免这种情况。

避免这种情况的最佳设计是什么？

好的解决方案是使用HashMap吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:43:15.073

> 好的解决方案是使用HashMap吗？

目前还不清楚您要解决什么问题，但您可能需要考虑将参数封装在另一个类中——也许是一个可变的，遵循构建器模式。这会给你留下类似的东西：

```
FooParams params = new FooParams().withA("a value")
                                  .withB("b value")
                                  .withC("c value");
Foo foo = new Foo(params); 
```

（你甚至可以有一种`buildFoo()`方法`FooParams`来保持整个事情的流畅。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T21:16:17.477

尝试使用[varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)的解决方案。

```
public class A {
    public A(String ... args) {
        // Add some logic that validates number of input parameters etc.

        for (String arg : args) {
            ...
        }
    }
} 
```

你可以这样称呼它：

```
A a1 = new A("tagA: value1", "tagB: value2", "tagC: value3");
A a2 = new A();
A a3 = new A("<tagA>234</tagA>"); 
```

# javascript - 防止 URL 字符串在 JavaScript 中编码

> ID：12029809
> 
> 赞同：0
> 
> 时间：2012-08-19T20:39:13.313
> 
> 标签：javascript

我不太擅长 JavaScript，并且有一些为我编写的代码：

```
if (args[2].LocationCacheTypeID == 1) {
  locationInput.name = 'Cities'; 
```

我想添加`LinkID=27201&`到代码中，如下所示：

```
if (args[2].LocationCacheTypeID == 1) {
  locationInput.name = 'LinkID=272081&Cities'; 
```

唯一的问题是，当我添加它并将其转换为 URL 字符串时，结果是：

```
?LinkID%3D272081%26Cities=Poquoson 
```

它变成了`=`to`%3D`和`&`to `%26`。

我怎样才能解决这个问题？

完整的原始脚本是：

```
<script type='text/javascript'>
(function() {
  var dataSource = new YAHOO.util.ScriptNodeDataSource('http://api.idx.diversesolutions.com/API/Locations/33266/81?');
  var ac = new YAHOO.widget.AutoComplete('vrcsf_location', 'vrcsf_location_ac', dataSource);

  dataSource.responseSchema = {
    resultsList: '',
    fields: ['LocationName','LocationCacheTypeID','TotalCount']
  };

  ac.animVert = false;
  ac.queryMatchContains = true;
  ac.queryQuestionMark = false;
  ac.useShadow = true;
  ac.queryDelay = .1;
  ac.typeAhead = false;
  ac.allowBrowserAutocomplete = false;
  ac.alwaysShowContainer = false;
  ac.resultTypeList = false;
  ac.maxResultsDisplayed = 5;
  ac.resultTypeList = false;

  ac.generateRequest = function(query) {
    return 'partialName=' + query + '&maxAreasToReturn=5';
  };

  ac.formatResult = function(resultData, query, resultMatch) {
    var type;

    if (resultData.LocationCacheTypeID == 1) {
      type = 'City';
    } else if (resultData.LocationCacheTypeID == 2) {
      type = 'Community';
    } else if (resultData.LocationCacheTypeID == 3) {
      type = 'Tract';
    } else if (resultData.LocationCacheTypeID == 4) {
      type = 'Zip';
    } else if (resultData.LocationCacheTypeID == 5) {
      type = 'County';
    }
    return (resultMatch + ' (' +  type + ')');
  };

  ac.itemSelectEvent.subscribe(function(e, args) {
    var locationInput = YAHOO.util.Dom.get('vrcsf_location');

    if (args[2].LocationCacheTypeID == 1) {
      locationInput.name = 'Cities';
    } else if (args[2].LocationCacheTypeID == 2) {
      locationInput.name = 'Communities';
    } else if (args[2].LocationCacheTypeID == 3) {
      locationInput.name = 'Tracts';
    } else if (args[2].LocationCacheTypeID == 4) {
      locationInput.name = 'ZipCodes';
    } else if (args[2].LocationCacheTypeID == 5) {
      locationInput.name = 'Counties';
    }
  });
})(); 
```

# php - Selenium PHPUnit - 检查本地机器上安装了哪些浏览器？

> ID：12029816
> 
> 赞同：2
> 
> 时间：2012-08-19T20:40:08.300
> 
> 标签：php, selenium, cross-browser, phpunit

我目前正在通过 PHPUnit 运行我的 Selenium。我正在从事的项目有多个开发人员和正在开发该项目的机器。我想做的是让 Selenium/PHPUnit 根据运行测试的本地计算机上安装的浏览器设置用于 Selenium 测试的浏览器。换句话说，当在 Windows 上时，IE 将被测试。在 Ubuntu 上，不会测试 IE（除非用户出于某种原因安装了它）。使用 Selenium 或 PHPUnit 中已经设置的内容，是否有一些干净的方法？还是我必须建立一些粗略的解决方法？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:59:09.397

selenium 不会自动执行此操作。如果你告诉它运行 firefox 并且没有安装 firefox，你只会得到一个堆栈跟踪。尝试一种解决方法，或者只是手动配置您的盒子

*编辑* 尝试检查[http://php.net/manual/en/function.php-uname.php](http://php.net/manual/en/function.php-uname.php)

```
//Pseudocode
OS = php_uname (["s"])
    if (OS == 'Ubuntu'){
       run Chrome
       run Firefox
    }elseif(OS == 'Mac'){
       run Safari
    } 
```

# java - 这个 Java 示例会导致内存泄漏吗？

> ID：12029823
> 
> 赞同：18
> 
> 时间：2012-08-19T20:40:35.670
> 
> 标签：java, memory-leaks

我有一个简单的例子。该示例从包含 10000000 个随机整数`ArrayList<Integer>`的文件中加载一个。`f`

```
doLog("Test 2");
{
    FileInputStream fis = new FileInputStream(f);
    ObjectInputStream ois = new ObjectInputStream(fis);
    List<Integer> l = (List<Integer>) ois.readObject();
    ois.close();
    fis.close();
    doLog("Test 2.1");
    //l = null; 
    doLog("Test 2.2");
}
doLog("Test 2.3");
System.gc();
doLog("Test 2.4"); 
```

当我有时`l = null`，我得到这个日志：

```
Test 2                          Used Mem = 492 KB   Total Mem = 123 MB
Test 2.1                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.2                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.3                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.4                        Used Mem = 493 KB   Total Mem = 123 MB 
```

但是当我删除它时，我得到了这个日志。

```
Test 2                          Used Mem = 492 KB   Total Mem = 123 MB
Test 2.1                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.2                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.3                        Used Mem = 44 MB    Total Mem = 123 MB
Test 2.4                        Used Mem = 44 MB    Total Mem = 123 MB 
```

`Used Memory`由下式计算：`runTime.totalMemory() - runTime.freeMemory()`

**问题：**如果`l = null;`存在，是否存在内存泄漏？ `l`是不可访问的，那为什么不能释放呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-19T20:45:42.637

上面的代码中没有内存泄漏。

一旦您离开包含在 中的代码块`{}`，该变量`l`就会超出范围，并且`List`无论您是否将其设置为`null`first，都将成为垃圾回收的候选对象。

*但是*，在代码块之后直到方法返回，`List`它处于一种称为*不可见*的状态。虽然这是真的，但 JVM 不太可能自动清空引用并收集`List`的内存。因此，显式设置`l = null`可以帮助 JVM 在您进行内存计算之前收集内存。否则，它将在方法返回时自动发生。

对于代码的不同运行，您可能会得到不同的结果，因为您永远不知道垃圾收集器何时运行。您可以*建议*您认为它应该运行 using （即使没有设置`System.gc()`它甚至可能收集不可见的），但没有承诺。它在[System.gc() 的 javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc%28%29)有说明： `List``l = null`

> *调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T21:29:38.950

我认为这里有一些语义问题。“内存泄漏”通常意味着程序（软件等）将一些数据存储在内存中，并使该程序进入无法再访问该内存数据以对其进行清理的状态，从而进入一种情况无法声明该内存以供将来使用。据我所知，这是一般定义。

术语“内存泄漏”在现实世界中的使用通常是指编程语言，在这种语言中，开发人员需要为他打算放在堆上的数据手动分配内存。此类语言是 C、C++、Objective-C (*) 等。例如，“malloc”命令或“new”运算符都为将放置在堆内存空间中的类的实例分配内存。在这样的语言中，如果我们稍后想要清理它们使用的内存（当它们不再需要时），则需要保留指向那些因此分配的实例的指针。继续上面的例子，引用一个使用“new”在堆上创建的实例的指针稍后可以通过使用“delete”从内存中“删除”

因此，对于此类语言，内存泄漏通常意味着将数据放在堆上，然后是：

*   到达不再有指向该数据的指针的状态，或
*   忘记/忽略手动“取消分配”堆上数据（通过它的指针）

现在，在这种“内存泄漏”定义的上下文中，Java 几乎不会发生这种情况。从技术上讲，在 Java 中，垃圾收集器的任务是决定何时不再引用堆分配的实例或超出范围并清理它们。Java 中没有与 C++“删除”命令相当的功能，它甚至允许开发人员手动从堆中“取消分配”实例/数据。即使将实例的所有指针设为 null 也不会立即释放该实例的内存，而是只会使其成为“可收集的垃圾”，并将其留给垃圾收集器线程在它进行扫描时对其进行清理。

现在，Java 中可能发生的另一件事是永远不要放弃指向某些实例的指针，即使在给定点之后不再需要它们。或者，给某些实例一个对于它们使用的范围来说太大的范围。这样，它们将在内存中停留的时间比需要的时间长（或者永远，永远意味着直到 JDK 进程被杀死），因此即使从功能的角度来看它们应该被清理，垃圾收集器也不会收集它们。这可能导致类似于广义上的“内存泄漏”的行为，其中“内存泄漏”仅代表“内存中不再需要的东西并且无法清理它”。

现在，如您所见，“内存泄漏”有些模糊，但据我所知，您的示例不包含内存泄漏（即使是您不设置 l=null 的版本）。您的所有变量都在由 accolade 块分隔的紧密范围内，它们在该块内使用，并且在块结束时将超出范围，因此它们将被“正确”收集（从功能的角度来看你的程序）。正如@Keppil 所说：使指针为空将为 GC 提供一个更好的提示，说明何时清理它的相应实例，但即使您从未将其设为空，您的代码也不会（不必要）挂在实例上，所以那里没有内存泄漏。

Java 内存泄漏的一个典型示例是，将代码部署到 Java EE 应用程序服务器中时，它将产生不受所述应用程序服务器控制的线程（想象一个启动 Quartz 作业的 servlet）。如果应用程序被多次部署和取消部署，那么一些线程可能不会在取消部署时被杀死，但也会在部署时（重新）启动，从而使它们和它们可能创建的任何实例在内存中无用地挂起。

(*) 更高版本的 Objective-C 还提供了自动管理堆内存的可能性，其方式类似于 Java 的垃圾收集机制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T16:12:16.530

真正的答案是，除非代码是 JIT 的，否则所有局部变量在方法主体内都是“可访问的”。

此外，*大括号在 bytecode 中绝对没有任何作用*。它们只存在于源代码级别——JVM 完全不知道它们。设置`l`为 null 可以有效地将引用从堆栈中释放出来，因此它是真正的 GC。快乐的东西。

如果您使用另一种方法而不是内联块，那么一切都会过去而没有任何意外。

如果代码是 JIT 的并且 JVM 编译器已经构建[了到达定义](http://en.wikipedia.org/wiki/Reaching_definition) [（也是这个）](http://www.azulsystems.com/blog/cliff/2011-08-28-just-fixed-a-20-year-old-bug) ，那么很可能设置`l=null`将不起作用并且在任何一种情况下都会释放内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T20:54:50.697

> 问题：如果删除 l = null; （没有这行代码），这是内存泄漏吗？

不，但是如果您执行此“模式”，它*有助于*gc 声明内存

# javafx - 使用 JavaFX 创建自定义文本编辑组件

> ID：12029826
> 
> 赞同：2
> 
> 时间：2012-08-19T20:41:12.720
> 
> 标签：javafx, javafx-2

我想创建一个自定义文本编辑组件。基本上我需要一个能够设置插入符号并以自定义方式处理关键事件的文本。有没有办法在 JavaFX 中这样做？Text 上有特定于实现的方法（已弃用，评论说它们应该被视为私有），但我不能使用它们。

是否可以在 JavaFX 中这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T22:04:20.023

*   对于单行文本，请使用[TextField](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextField.html)。
*   对于多行文本，请使用[TextArea](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextArea.html)。
*   对于样式化文本，请使用[HTMLEditor](http://docs.oracle.com/javafx/2/api/javafx/scene/web/HTMLEditor.html)。

如果使用 TextField 或 TextArea，它们都是[TextInputControl](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html)的子类。TextInputControl 提供了一个[caretPositionProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextInputControl.html#caretPositionProperty)，您可以使用它来读取和修改插入符号的位置。所有场景图对象（包括 TextField 和 TextArea）都是[Node](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)的实例。节点允许您设置自定义[EventHandlers](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setEventHandler%28javafx.event.EventType,%20javafx.event.EventHandler%29)和[事件过滤器](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#addEventFilter%28javafx.event.EventType,%20javafx.event.EventHandler%29)。您可以使用事件处理程序来覆盖 TextInputControls 的默认键处理处理程序，以便您可以实现自己的处理。

如果您需要通过自定义 TextField 或 TextArea 实例无法获得的进一步自定义功能，那么您可以创建自己的 TextInputControl 子类并根据需要实现自定义文本编辑组件，但由于复杂性，我不会真正建议这种方法以及可能最终需要的对内部 JavaFX api 的依赖。

> TextField 对我不起作用，因为： 1\. 它有一个边框，表示焦点，我不知道如何删除。

这是[JavaFX 2.2 默认 caspian.css 样式表](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)的链接。您可以设置 TextField 的样式以移除焦点边框，方法是将其 :focused 伪类选择器样式设置为与默认选择器相同的值。例如：

```
.text-field:focused {
    -fx-background-color: -fx-shadow-highlight-color, -fx-text-box-border, -fx-control-inner-background;
    -fx-background-insets: 0, 1, 2;
    -fx-background-radius: 3, 2, 2;
} 
```

有关如何在 JavaFX 中使用 css 的信息，请参阅[JavaFX css 参考指南。](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)

> TextField 对我不起作用，因为： 2\. 它具有固定的列数，我需要动态更改宽度。

TextField 是一个可调整大小的控件，如果将其放置在具有适当约束的可调整大小的布局窗格中，它将动态更改其宽度。TextField 中的列数设置是[首选列数](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextField.html#prefColumnCountProperty)，而不是固定列数。

有关 JavaFX 布局的更多信息，请参阅[JavaFX 布局文档。](http://docs.oracle.com/javafx/2/layout/jfxpub-layout.htm)

# mysql - 如何在 MySQL 和 Cassandra 中获取行组

> ID：12029827
> 
> 赞同：0
> 
> 时间：2012-08-19T20:41:14.323
> 
> 标签：mysql, sql, database, nosql, cassandra

所以我有一个表，目前在 mysql 中，但很快就会转移到 nosql 系统中。所以我把表的规范化了，现在有重复的数据，但是每一行的一个ids发生了变化，而其余的数据是不变的。所有行都通过 ID A 连接。ID B 每行都会发生变化，而 ID A 中所有行的用户 ID 相同。

现在我需要使用用户 ID 获取 2 组行。但是，对于每组 A，ID B 的数量是可变的，因此它可以有变量的行数，所有这些行都由每个 ID A 分组在一起。到目前为止，我一次只显示一个组，所以我一直在根据 ID 进行选择A，现在我需要尝试通过用户ID抓取2套......

我似乎无法找到一种方法来做到这一点......虽然我不知道关于 sql 的一切。我现在如何在 mysql 上执行此操作？然后在我稍微移到系统时在 nosql 上？很乐意回答任何进一步的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:08:42.103

我想你是说行有一个由两列组成的复合键，id 的 A 和 B。假设我明白了这就是你在 Cassandra 中的做法（并且有两种方法）。

您可以使用 CQL 并声明您的表有两个主键，A 和 B，按此顺序，以及原始 MySql 表中的任何其他列。

您还可以创建一个列族，其行键为 id A，并且该 id A 的每个唯一 id B 都有一个列。列的名称将是 id B 的值，该列的值将是剩余 MySQL 行值的值（或序列化值）。请注意，id B 不必是字符串值。对于 id A 的任何给定值，这将导致 Cassandra 列族行的列数与该 id A 值的唯一 id B 值一样多。这称为“动态列族模式”。

如果您采用第一种方法，您基本上最终会在幕后采用第二种方法（过度简化警报）。

# javascript - 如何为输出 Json 对象的 ajax 调用编写客户端脚本

> ID：12029833
> 
> 赞同：2
> 
> 时间：2012-08-19T20:42:16.463
> 
> 标签：javascript, html, ajax, json, model-view-controller

当我创建 ajax 调用时——我通常要求纯 HTML。但是现在，由于几个原因，我需要关于**在接收 Json 对象时****如何构建表**（比如说人员及其数据）的建议——我知道如何在 Javascript 中创建一个表——**但是因为我对 Json 的这个概念不熟悉-from-server 我想以正确的方式做**

 ****假设我的json是这样的：

```
[[name: foo, email:foo@bar.com ...][name:baz,...] ... []] 
```

什么是构建 js 为其构建表的正确方法。我猜它会像这样：

```
var table = {
    init : function() {..}
    new : function(Json) {..} 
    delete : function(Json) {..}
}

var row = {
    init : function() {..}
    new : function(rowParam) {..}
}

var cell = { ... } 
```

**我的问题是：**

1.  我在黑暗中行走，试图弄清楚这是否是正确的方式——是吗？

2.  从 MVC 那里闻到了一些味道 - 是吗？如何使用 MVC 模式正确构建它？假设这张桌子需要非常互动（大量的事件和操作）

3.  “有一些 js 库可以做这些事情”也有些味道——我不知道从哪里开始，因为很难为自己定义我到底想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:57:23.143

首先，我需要更正您的 json 格式。由于您正在处理对象格式的数组

```
[
  { 
    propery: "some value", 
    property2: "some other value"
  },
   //.... more objects {} here
]; 
```

在我们深入研究代码之前，您应该知道来自服务器的响应以字符串形式出现，因此您需要将其“编译”为 javascript 对象。你可以通过两种方式做到这一点

1.  首选方式使用`JSON.parse(someString);`方法
2.  丑陋和不太理想的是使用`eval`或`Function`类似的方法`var result=[]; eval("result=" + responseStringFromServer);`

始终使用第一种方法，因为它更好，如果您不知道为什么，请查看[此链接](http://blogs.msdn.com/b/ericlippert/archive/2003/11/01/53329.aspx)

由于您想使用您的类型（表格、行和单元格），您应该知道它是无用的，因为 JSON 缺少 JavaScript 对象表示法，换句话说，一旦您使用 var `myArray= JSON.parse(responseFromServer);`myArray 将是一个 javascript 数组，其中每个项目都是 Javascript 对象。如果您不需要知道下属类型是什么，请不要将其转换为您的对象

工作示例可以在这里找到[这里](http://jsfiddle.net/mjaric/sEwM6/) 是它的工作原理

您的数据需要 html 中的占位符，可以说它看起来像这样：

```
<table id="personDataTable">
    <tr>
        <th>Id</th>
        <th>First Name</th>
        <th>Last Name</th>
    </tr>
</table> 
```

假设我们从 ajax 得到了这样的结果

```
[
   {
       id: 1,
       firstName: "Peter",
       lastName: "Jhons"
   },
   {
       id: 2,
       firstName: "David",
       lastName: "Bowie"
   }
] 
```

要绘制数据，您可以使用这 3 种方法

```
// This will iterate over each result in array (as you mentioned the javascript table)
function drawTable(data) {
    for (var i = 0; i < data.length; i++) {
        // call method to draw each row
        drawRow(data[i]);
    }
}

function drawRow(rowData) {
    // create html table row
    var row = $("<tr />")
    // append it to HTML teable element
    $("#personDataTable").append(row); 
    // append each cell to row html element with data in it
    row.append($("<td>" + rowData.id + "</td>"));
    row.append($("<td>" + rowData.firstName + "</td>"));
    row.append($("<td>" + rowData.lastName + "</td>"));
} 
```

最后，您的 ajax 调用（当然使用 jQuery）

```
$.ajax({
    url: '/echo/json/',
    type: "post",
    dataType: "json",
    data: {
        //... pass here any data you want to your server
    },
    success: function(data, textStatus, jqXHR) {
        // since we are using jQuery, you don't need to parse response
        drawTable(data);
    }
}); 
```

在这篇文章的最后，您应该知道那里有许多可以简化此过程的整洁库。有些确实适合用于复杂的情况，例如 BackboneJS 和 AngularJs .... 有些很简单，例如 jQuery.template 和 jQuery.render，它们只是模板引擎。这取决于您的应用程序有多复杂以及在单个页面中应该发生多少“渲染”。

**与上面的示例相同，但使用 AngularJS**

工作示例可以在[这里找到](http://jsfiddle.net/mjaric/pJ5BR/)

您将需要这样的页面：

```
<html ng-app="myApp">
<head>
<title>Example 2</title>
<script type="text/javascript" src="http://code.angularjs.org/1.0.1/angular-1.0.1.min.js"></script>
<style type="text/css">
table {
  border: 1px solid #666;   
    width: 100%;
}
th {
  background: #f8f8f8; 
  font-weight: bold;    
    padding: 2px;
}
</style>
</head>
<body>
<!-- Assign Controller to element, it will handle the "data scope" and events of ineer elements -->
<div ng-controller="PeopleCtrl">
     <!-- Example of attaching event handler to link click event -->
    <p>    Click <a ng-click="loadPeople()">here</a> to load data.</p>
<table>
    <tr>
        <th>Id</th>
        <th>First Name</th>
        <th>Last Name</th>
    </tr>
    <!-- here is how to receptively render array of object using ng-repeat directive. Note that you have defined people attribute in $scope object, it is bound to this template below --> 
    <tr ng-repeat="person in people">
        <td>{{person.id}}</td> <!-- bind single attribute -->
        <td ng-template="{{person.firstName}} {{person.lastName}}"></td> <!-- binding 2 attributes to same element using ng-template directive -->
    </tr>
</table>
</div>
<script type="text/javascript">
// define your module (application)
var app = angular.module('myApp', []);
// define controller responsible to get data and bind result to page
function PeopleCtrl($scope, $http) {

    $scope.people = []; //this will be used in page template above
    // event handler for link which you need to click in order to get data  
    $scope.loadPeople = function() {
        // change link to hit your server json
        var httpRequest = $http.get("/link/to/people.json");
        // on success of HTTP GET request above handle response and set new data
        httpRequest.success(function(data, status) {
            $scope.people = data;
        });

    };

}​
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:58:45.507

回过头来回答您的问题，我将首先回答＃3。您可以查看一个名为[DataTables](http://www.datatables.net/index)的 JavaScript 库来执行您想要执行的操作，或者如果您需要与表进行大量交互，甚至可以[查看 jqGrid 。](http://www.trirand.com/jqgridwiki/doku.php)它们都是 jQuery 插件。

如果你有很多事件和操作正在进行，听起来你正在寻找更多的 MVVM 方法，有点像[KnockoutJS](http://knockoutjs.com/)、[Ember](http://emberjs.com/)或许多其他库。但是根据您提供的内容，我不确定您是否遵循 MVC 方法。

最后，根据您提供的骨架 JS，这似乎是一种不错的方法。您将表格、行和单元格分解为单独的函数，我假设您将在其中处理用户与表格交互所引发的事件。我还假设你会有`table`引用`row`和`row`引用`cell`。这可能是一个挑剔的选择，但您可能希望以相反的方向定义它们，以便 JSLint 不会抱怨。

我希望这有帮助。如果您有任何问题，我可以进一步详细说明。祝你好运！****

# login - 如何保护未注册用户的个人资料链接？

> ID：12029835
> 
> 赞同：0
> 
> 时间：2012-08-19T20:42:39.510
> 
> 标签：login

我想问一下我是否提供了登录用户的链接，然后我没有登录就转到该链接，那么我该如何保护数据。我的意思是他的私人信息可能会被未注册的用户看到。所以我正在制作一个网站，我想保护未注册用户的数据。任何人都可以帮忙吗？还有谁能告诉我，当未注册用户尝试打开上述链接时，如何将链接重定向到登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:14:51.853

通常您可以使用`$_SESSION`变量来识别用户是否已登录。现在，个人资料页面将包含许多元素，例如他的私人消息、链接、他的电子邮件地址、编辑个人资料链接等。您希望保护这些元素免受未经授权的用户的侵害。所以首先检查用户是否登录：

```
 if (isset($_SESSION['loggedIn'])) { // $_SESSION['loggedIn'] is the variable I set to //TRUE when user filled the registration/login form. Otherwise it is set to FALSE.
  echo 'user is logged in';
  //rest of code goes here
} 
```

**方法 1 -**

现在检查用户是否是网站用户。使用 MySql 查询进行检查。好吧，你可以为它创建一个函数。

function userisregistered(){ //检查 sql 数据库中当前登录用户的代码 //如果用户已注册，则返回 TURE，否则返回 FALSE }

您说过的一件事是，如果用户未注册，您希望将其重定向到另一个页面。你可以这样做——

```
 if(!isset($_SESSION['loggedIn'])){ //USER IS UNAUTHENTICATED --NO ACCESS
     header('Location: URL_of_page_you_want_user_to_redirect');
} 
```

**方法 2 -**

现在我在这里假设如果用户通过了网站的身份验证，他可以访问 userX 的所有配置文件功能，否则不能。因此，对于这一部分，我可以提出 ajax 的优势，它可以获取详细信息并创建 DOM 元素。代码是这样的-

```
 if(isset($_SESSION['loggedIn']) and userisregistered()){ //USER IS AUTHENTICATED --ALL FEATURES
     echo '<ul>\n<li>item1</li>\n<li>item2</li>\n<li>item3</li></ul>';

}
else if(isset($_SESSION['loggedIn'])){  //USER IS AUTHENTICATED  --LIMITED FEATURES
     echo '<ul>\n<li>item1</li>\n<li>item2</li>\n</ul>';
}
else   //NO ACCESS
           header('Location: URL_of_page_you_want_user_to_redirect'); 
```

# java - 在 Google App Engine 中看不到我的自定义日志

> ID：12029838
> 
> 赞同：6
> 
> 时间：2012-08-19T20:42:53.807
> 
> 标签：java, google-app-engine

我正在尝试在 GAE 中进行一些简单的登录，但我认为我一定错过了一些简单的步骤。

我已按照此处的说明进行操作：[https ://developers.google.com/appengine/docs/java/runtime#Logging](https://developers.google.com/appengine/docs/java/runtime#Logging)

我希望在日志中写一条简单的消息，如下所示：

```
public class InsertServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static final Logger log = Logger.getLogger(InsertServlet.class.getName());

    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {

            log.info("Handled GET request - custom message");
            resp.setContentType("text/plain");
            resp.getWriter().println("HELLO");

    }

} 
```

如果我使用网络浏览器访问我的应用程序，我可以看到它正在运行（在浏览器中获得“HELLO”消息）。

但是在此之后，如果我访问控制台中的日志，我可以看到它正在记录事件，但我在任何地方都看不到我的消息。

我选择了“显示：所有请求”，但这是我访问后在日志中看到的全部内容：

> 012-08-19 13:34:56.488 /插入 200 2922ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
> 
> 2602:306:ce97:de40:8dbd:ace7:14c3:89e2 - - [19/Aug/2012:13:34:56 -0700]“获取/插入 HTTP/1.1”200 52 -“Mozilla/5.0（Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1" "karwosts-helloworld.appspot.com" ms=2923 cpu_ms=1213 api_cpu_ms=0 cpm_usd=0.000006 loading_request=1 instance=00c61b117cf339fa358dc21f7f91a
> 
> 我 2012-08-19 13:34:56.487
> 
> 此请求导致为您的应用程序启动一个新进程，从而导致您的应用程序代码首次加载。因此，与您的应用程序的典型请求相比，此请求可能需要更长的时间并使用更多的 CPU。

Logging.Properties（只有一行）：

```
.level = WARNING 
```

appengine-web.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>karwosts-helloworld</application>
  <version>1</version>

  <threadsafe>true</threadsafe>

  <!-- Configure java.util.logging -->
  <system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
  </system-properties>

</appengine-web-app> 
```

`log.info`我的自定义字符串在哪里？我没有找对地方吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:28:24.020

乍一看，我会说当您在“logging.properties”文件中使用此设置时：

```
.level = WARNING 
```

而且，您（~~在登录代码时不指定任何级别，将使用默认级别，这肯定不是“警告”（我猜 INFO ^^）~~ *确实*使用此行指定日志级别：

```
log.info(msg);

/* which is same as */
log.log(Level.INFO, msg); 
```

所以结果是你只在'INFO'级别（在你的例子中）登录，但你的配置文件说要在 WARNING 及以上级别登录。由于“信息”级别低于“警告”，它们将从您的日志文件中丢弃，并且不会显示在您的服务器日志中。

我建议改用这种方法，它会强制您指定日志记录级别。

```
import java.util.logging.Level;
import java.util.logging.Logger;
/* ... */
log.log(Level.INFO, "a info msg"); //info
log.log(Level.WARNING, "a warning msg"); //warning
log.log(Level.FINEST, "a fine(st) msg"); //debug (as finest) 
```

之后，您可以使用*logging.properties*文件为所需的类设置所需的日志记录级别：

```
# Set the default logging level for all loggers to WARNING
.level = WARNING

# Set level for your app
oed.server.level = INFO
oed.server.data.datastore.myInjector.level = FINEST 
```

* * *

Edit2 ： ~~此日志记录配置在客户端运行时没有影响。当你想在 GWT 中记录消息时，有 this `GWT.log(message);`，但不能指定级别。~~

这并不完全正确，这取决于`your-app.gwt.xml`文件中的配置。所有详细信息都可以在[google dev guilde logging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)上找到。我发现它非常有用并且做得很好。尽管如此，简而言之，GWT 中有各种默认记录器（大约 5-6 个）；所有这些都可以`*.gwt.xml`通过它们的*处理程序*进行配置（或者可以务实地完成）。在侵入性弹出记录器存在太久之后......我选择从客户端远程登录到服务器以享受使用`logging.properties`，这里是使用时的配置`gwt.xml`：

```
<!-- Logging configuration -->
  <inherits name="com.google.gwt.logging.Logging"/>

  <set-property name="gwt.logging.logLevel" value="INFO"/>  <!-- # To change the default logLevel -->
  <set-property name="gwt.logging.enabled" value="TRUE"/>  
  <set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" /> <!-- Remote logging (linked with servlet) -->
  <set-property name="gwt.logging.popupHandler" value="DISABLED" />
  <set-property name="gwt.logging.developmentModeHandler" value="ENABLED" />  
  <set-property name="gwt.logging.systemHandler" value="ENABLED" />
  <set-property name="gwt.logging.firebugHandler" value="DISABLED" />
  <set-property name="gwt.logging.consoleHandler" value="ENABLED"/> 
```

如果您使用此设置，请不要忘记`web.xml`使用 servlet 定义来配置您的日志记录（遗憾的是，文档中没有提供）：

```
<servlet>
        <servlet-name>remoteLogging</servlet-name>
        <servlet-class>com.google.gwt.logging.server.RemoteLoggingServiceImpl</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>remoteLogging</servlet-name>
        <url-pattern>/your-app-name/remote_logging</url-pattern>
    </servlet-mapping> 
```

* * *

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T00:45:35.967

而不是检查“所有请求”，您应该检查“具有最低严重性的日志”并从下拉列表中选择“信息”。

# php - 高效地创建大量对象

> ID：12029843
> 
> 赞同：2
> 
> 时间：2012-08-19T20:43:29.417
> 
> 标签：php, performance

**编辑：**当我发布这个问题时，我不完美的自我做出了错误的假设，我觉得**这个问题可能具有误导性**。效率问题实际上与 push_array 无关。

这些评论有助于我理解：1）这不应该花这么长时间，2）用 microtime() 诊断效率问题是一个很好的做法。
**结束编辑**

我在测试场景中创建了 ~1400 个对象。我认为〜1400将在典型使用的范围内。

```
public $t = Array();   
...
for(...){    
    code...   
    for(...){    
        array_push($this->t, new T($i, $str));    //<--this line slows program.
        count++;    
    }   
    code...
} 
```

不幸的是，该脚本需要大约 90 秒才能运行。如果我用array_push注释掉*一行*代码，脚本运行时间大约是1/6，大约15秒。

内部循环计数各不相同，但平均大约 3 到 15 个循环，每个循环有一个新对象。

问题：
我不是 PHP 专家。我想知道：
1）预先分配内存空间是否有帮助（如果有，如何）。
2）如果我应该采取任何提高效率的步骤来帮助脚本运行得更快，或者使用比对象数组更有效的数据结构。新创建的对象当前有两个属性，一个整数和一个表示单个单词的字符串（大约平均约 10 个字符）。

**编辑：** 这是构造函数：

```
class T{
    public $line; 
    public $text;
    function __construct($ln, $txt){
        $this->line = $ln;
        $this->text = $txt;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:47:45.260

运行时间取决于几个不同的因素：

*   用于运行脚本的服务器
*   当然是代码效率 - 这是一篇关于[编写高效 php 代码的好文章](http://the-dro.com/web-design/programming/40-tips-for-optimizing-your-php-code/)

当然还有更多的因素，但从以前的经验来看，它不应该花那么长时间，但是，我得到的关于你正在创建的对象的信息仍然不够广泛，所以我可以检测到问题出在哪里。顺便说一句，使用 APC 或 xcache 等 PHP 加速器可能会改善您的代码运行时间。

# asp.net - 在另一个 localhost 上运行 Web 应用程序

> ID：12029845
> 
> 赞同：0
> 
> 时间：2012-08-19T20:43:40.457
> 
> 标签：asp.net, sql-server, web, localhost

我有一个带有数据库的 ASP.NET C# Web 应用程序。在我的本地主机上它工作正常。我已将我的数据库附加到我的本地 SQL 服务器上。如果我希望我的应用程序在另一台机器的 localhost 上运行，我是否只需要更改连接字符串还是必须在另一台 localhost 服务器上附加数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:42:48.113

*另一台机器的本地主机*

这句话本身是不正确的。在网络中，“localhost”指的是当前计算机的 IP 地址。因此，如果您使用“localhost”作为 sql server 的名称，它将始终在本地计算机上查找服务器。因此，如果您将应用程序移动到另一台计算机，则必须将数据库也移动到该计算机（然后您可以保留 localhost 或（本地）作为服务器名称），或者您可以将数据库保留在原处，但您需要使用真实计算机的名称或 IP 地址，以便您的服务可以找到数据库。

# html - 画布动画不渲染

> ID：12029846
> 
> 赞同：0
> 
> 时间：2012-08-19T20:43:47.817
> 
> 标签：html, loops, canvas, render

我是 canvas 标签的新手，正在玩一些动画。基本上，我正在尝试设置一个由多个图像组成的“地面”部分（类似于像马里奥兄弟这样的 8 位横向卷轴游戏）。地面将由多个图像组成，我构建了一个构造函数来加载这些图像并将它们平铺在底部。

```
function Ground(context,ImageName,ImgX,ImgY,ImgW,ImgH){
    this.width=ImgW;
    this.height=ImgH;
    this.x=ImgX;
    this.y=ImgY;
    img=new Image();
        img.onload=function(){context.drawImage(img,ImgX,ImgY,ImgW,ImgH);};
    img.src='images/'+ImageName;}; 
```

这似乎工作得很好。然后我设置了动画的其余部分，包括 Key Left/Right 事件的基本设置，如下所示：

```
window.onload=function(){
    var canvas=document.getElementById('canvas'),
    context=canvas.getContext('2d'),
        Grounds=[],
        ImgX=-150; // INITIAL STARTING X FOR FIRST GROUND TILE

    // INSERT GROUND ELEMENTS
    for(var i=0,l=8; i<l; i++){
             var ImgX+=150;
             Grounds[i]=new Ground(context,"ground.png",ImgX,650,150,150);
        };

    // ASSIGN LEFT/RIGHT KEYS
    window.addEventListener('keyup',function(event){
              switch(event.keyCode){
                case 37:
                for(var i=0,l=Grounds.length; i<l; i++){
                         Grounds[i].x+=10;
                    };  
                 break;
            case 39:break;
              };
         });

    // ANIMATION LOOP
    (function drawFrame(){
    window.mozRequestAnimationFrame(drawFrame,canvas);
        context.clearRect(0, 0, canvas.width, canvas.height);

    }());
}; 
```

我确切地知道我的问题是什么，但不知道如何解决它。动画循环每帧都清除画布，但在用户按下左箭头键时不会重绘更新的位置（如果有）。

我在这里错过了重绘部分，我不确定如何处理这个问题，或者我是否完全错误地处理了这个问题。非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:07:30.227

首先，您正在增加`x`地砖的属性，但该属性甚至没有在您的代码中的任何地方使用。修改您的代码，以便`onload`这些图像对象的事件根据它们自己的`x`属性绘制图像，因此对它的更改实际上会影响绘制的内容。还将图像对象添加为地面对象的属性，以便您以后可以从外部访问它。

您的方法确实不太好，但是如果您想在不回到 0 的情况下执行此操作，请执行以下操作：

```
function Ground(context,ImageName,ImgX,ImgY,ImgW,ImgH){
    this.width=ImgW;
    this.height=ImgH;
    this.x=ImgX;
    this.y=ImgY;
    var self = this; // Add local reference to this Ground instance 
    this.img=new Image(); // img is now a property too
        this.img.onload=function(){context.drawImage(this, self.x, self.y,self.width,self.height);};
    this.img.src='images/'+ImageName;}; 
```

好的，现在您可以更改`x`地砖的属性并再次调用它的绘制函数（即 onload 事件）。

```
Grounds[i].x+=10;
Grounds[i].img.dispatchEvent(new Event("load")); 
```

请注意，您确实应该首先更新所有值，然后分别更新所有绘制调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:03:03.493

你不能只添加一个draw方法吗？你通常是这样的：init -> update -> clear, redraw -> update -> clear, redraw -> ...

```
// ANIMATION LOOP
(function drawFrame(){
window.mozRequestAnimationFrame(drawFrame,canvas);
    context.clearRect(0, 0, canvas.width, canvas.height);
    contect.drawImage(...);

}()); 
```

# php - 简化复杂的计数 SQL 语句

> ID：12029847
> 
> 赞同：2
> 
> 时间：2012-08-19T20:44:11.390
> 
> 标签：php, mysql, sql

我想知道是否有办法简化下面的 SQL 语句。这是我的桌子。

```
| SID | name | l1 | l2 | sch |
|  1  | john |    |    | sch |
|  2  | mary | l1 |    |     |
|  3  | zack | l1 | l2 |     |
|  4  | paul | l1 | l2 | sch | 
```

l1 或 l2 要么填满，要么都填满

并非每个“sch”都有价值

我所做的是计算每日汇总表，但我是通过 PHP 来完成的，我想知道它是否可以只使用 SQL 来完成。例如，

```
- Total count (This is just count(name))
- Count(sch)
- If !empty (l1) OR !empty (l2) THEN l + 1 
```

所以现在，基于以上

```
 Total count = 4
 count(sch) = 2
 count(l1 || l2) = 3 
```

可以在 SQL 中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:54:11.797

您没有说 l1、l2 和 sch 列是否可以包含 NULL。

如果这些列不能包含 NULL，则 mysql 查询将如下所示：

```
SELECT COUNT(*) AS `count`, SUM(sch<>'') AS count_sch,
SUM(l1<>'' OR l2<>'') AS count_l
FROM your_table 
```

如果这些列可以包含 NULL，则 mysql 查询将如下所示：

```
SELECT COUNT(*) AS `count`, SUM(sch IS NOT NULL) AS count_sch,
SUM(l1 IS NOT NULL OR l2 IS NOT NULL) AS count_l
FROM your_table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:56:34.033

```
select count(name) name_count,
       count(coalesce(nullif(l1,''), nullif(l2,''))) l1_or_l2_count,
       count(sch) sch_count
  from your_table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:54:01.057

是的：

```
select count(*) as count, count(sch) as school,
       sum(case when l1 is not null or l2 is not null then 1 else 0 end)
from table 
```

# android - 如何改进 MapActivity/MapView

> ID：12029848
> 
> 赞同：0
> 
> 时间：2012-08-19T20:44:31.127
> 
> 标签：android, map

我正在寻找一些方法来改进具有附加功能的 MapActivity。

例如，在几个应用程序中，当用户单击某个项目时，我看到了动画弹出窗口。这是我想做的事情（这样我就摆脱了丑陋的 alertDialog）。

也许一些图书馆已经存在？或者你能指出我自己做的一些教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:51:19.827

为了获得这些弹出窗口（我假设您的意思是在那一点上展开的气球），您可以使用这个名为[MapviewBalloons](https://github.com/jgilfelt/android-mapviewballoons/)的优秀库。将它集成到您​​现有的代码中非常容易。为了修改它，您只需修改气球的布局并将其更改为您想要的内容。

这是一个示例图像：![在此处输入图像描述](../Images/6f6c55b8d4fae565cd0fcf8508f6ebe4.png)

# c# - 为什么 DriveInfo.GetDrives() 不能在 Windows 服务中获取网络映射驱动器

> ID：12029855
> 
> 赞同：5
> 
> 时间：2012-08-19T20:45:18.673
> 
> 标签：c#, .net, windows-services

我有一个使用 VS 2010 在 .NET C# 中开发的 Windows 服务，我正在调用它，`DriveInfo.GetDrives()`但它没有获取`Z:`驱动器（映射的网络驱动器），

我做了一些谷歌搜索，发现一些结果指向 Windows 帐户权限，所以我尝试了所有帐户类型的服务安装程序，例如 LocalSystem、User、LocalService、NetworkService，但没有一个工作，我仍然无法获得驱动器`Z:`。

我做了另一个测试，调试 Windows 服务（作为控制台应用程序），我可以通过`Z:`这种方式获得驱动。

我的问题有解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:47:33.880

您需要使用已映射网络驱动器的帐户来运行 Windows 服务，例如，您用于作为控制台应用程序运行的相同帐户。正如 Hans 建议的那样，您不应该在 Windows 服务中使用映射驱动器，因为它们是与真实用户相关的概念。

但是，如果您真的想继续使用映射驱动器，请参阅此相关问题以了解与此特定情况相关的陷阱和解决方法：

[如何映射要由服务使用的网络驱动器](https://stackoverflow.com/questions/182750/how-to-map-a-network-drive-to-be-used-by-a-service)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T01:44:11.470

驱动器映射与 LUID 相关联，您可以在同一用户下拥有多个身份验证 ID（例如服务、正常完整性级别、高完整性级别等）。

您可以在用户会话中运行正常的完整性级别进程，以提供用户创建的映射驱动器列表。这就是[Windows 资源管理器为提升的安装程序复制映射驱动器的方式](http://blogs.msdn.com/b/cjacks/archive/2007/02/19/mapped-network-drives-with-uac-on-windows-vista.aspx)。

# google-apps-script - 为什么重复 google.script.run 调用？

> ID：12029857
> 
> 赞同：0
> 
> 时间：2012-08-19T20:45:38.083
> 
> 标签：google-apps-script

我正在服务器上调用一个函数，该函数使用 google.script.run 从客户端将几百个对象添加到 ScriptDB 数据库。但是，我发现服务器函数被多次调用，因此数据库最终会出现这些对象的重复项。

```
function serverFunction(bigarray) {
  // This function is called multiple times
  db.saveBatch(bigarray);
} 
```

然而，我可以验证客户端上调用的代码`serverFunction`只运行一次。

```
function clientFunction() {
  alert("This function is only called once.");
  google.script.run.serverFunction(bigarray);
} 
```

1.  我的服务器代码是否会超时并由 GAS 自动再次运行？
2.  如果是这样，超时时间是多少？这个功能是否记录在任何地方？
3.  有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T22:03:49.260

目前是 30 秒。这是一个已知问题，很快就会修复。（它本身不是回归，因为它从第一天开始就是这样，但我需要修复它以匹配脚本自己的五分钟超时）。

# android - 包含多个 TextView 的自定义 UI 元素

> ID：12029858
> 
> 赞同：2
> 
> 时间：2012-08-19T20:45:39.783
> 
> 标签：android, view, textview

现在我正试图弄清楚如何创建自定义 UI 组件，比如自定义视图。我有一个 ListView，我希望能够添加包含三个 TextViews 但是原子的元素，可以这么说并具有定义的布局。我真的不确定如何做到这一点，我唯一的想法是自定义视图。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:49:19.143

我认为你不需要跟随这`CustomView`条路。您可以自定义您希望 ListView*行*的外观。您可以添加图像、多个 textView 以及您想要的任何内容。

[这是一个很好的教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)，使列表行看起来像这样：![在此处输入图像描述](../Images/7925b76a95af83496630693276ab1db7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:54:44.157

你在正确的轨道上。如果您的数据在游标中，您可以使用 SimpleCursorAdapter 轻松完成此操作。

使用以下内容：

```
SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.customview,cursor, from_columns, to_customviewfields) 
```

然后将适配器设置为列表视图：

```
setListAdapter(mAdapter); 
```

# ruby-on-rails - 如何在rails 3中将测试数据添加到我的本地sqlite？

> ID：12029862
> 
> 赞同：0
> 
> 时间：2012-08-19T20:46:38.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我需要将测试数据行添加到我的 sqlite。

```
INSERT INTO courses (`name`) VALUES
(‘java'),
(‘ruby')....... 
```

我怎么能用rails3做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:52:46.927

您可以通过以下方式以 activerecord 方式编写插入`db/seeds.rb`：

```
courses = Course.create([{ :name => 'java' }, { :name => 'ruby' }]) 
```

然后运行`rake db:seed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:55:04.100

[Fixtures](http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)和[FactoryGirl](https://github.com/thoughtbot/factory_girl)是添加测试数据的两个流行选项。我个人是 FactoryGirl 的忠实拥护者，因为您在测试中直接使用模型，但这确实是一个见仁见智的问题。根据我的经验，使用 Test::Unit 的人*往往*是夹具的粉丝，而使用 RSpec 的人*往往*喜欢 FactoryGirl。不过，这不是一个硬性规定，你肯定会找到把它们混为一谈的人。这似乎取决于您是喜欢在测试中使用 DSL 还是纯 Ruby。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T21:04:35.913

您可以使用“Factory_girl”在数据库中创建测试对象。只需安装 gem 并为您的项目创建工厂对象。 [这是关于它的链接](http://rubygems.org/gems/factory_girl)

# java - 在类的构造函数中初始化的实例变量在重写方法中变为 null

> ID：12029865
> 
> 赞同：1
> 
> 时间：2012-08-19T20:46:58.007
> 
> 标签：java, null, overriding, acm-java-libraries

这里我有一个简单的类，它扩展了 ACM 图形库中的一个名为 GRect 的类。Grect 是一个可以绘制到 GCanvas（也是 ACM 的一部分）的基本矩形。我想要实现的是一个新对象，它是一个矩形，但有一个随矩形移动的附加标签。

在我的代码中，我创建了一个名为labeledRect 的类，它扩展了GRect，并包含一个GLabel 类型的实例变量“rectLabel”，它在labeledRects 构造函数中初始化。我想覆盖 GRect 的一些方法，以便在移动 labeldRect 时，rectLabel 随之移动。

我的问题是，尽管“rectLabel”被声明为实例变量，并在构造函数中进行了初始化，但它在被覆盖的方法“setLocation”中变为 NULL。我也尝试在声明时初始化“rectLabel”，但出现了同样的问题。

```
import acm.graphics.*;

public class labeledRect extends GRect {

    //GLabel declared as an instance variable
    public GLabel rectLabel;

    public labeledRect(double x, double y, double width, double height, String theLabel) {
        //Call GRect constructor
        super(x, y, width, height);

        //Label initialized. 
        //Location setting and adding to the canvas works fine here. 
        rectLabel = new GLabel(theLabel);
        rectLabel.setLocation(
                    x + (width / 2) - (rectLabel.getWidth() / 2),
                    y + (height / 2) + (rectLabel.getAscent() / 2.2));
    }

    public void setLocation(double x, double y)
    {
        //Setting GRect's location. Works correctly./
        super.setLocation(x, y);

        //Attempt to set the label's location 
        //and get a NullPointer exception for rectLabel
        rectLabel.setLocation(
                super.getX() - (rectLabel.getWidth() / 2),
                super.getY() - (rectLabel.getHeight() / 2));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:50:05.833

鉴于它是一个公共字段，很难准确地推断出可能将变量设置为 null 的原因。这是你应该改变的第一件事。字段应该几乎*总是*私有的。

接下来，你说`setLocation`的是一个被覆盖的方法——它是否在`GRect`构造函数中被调用？如果是这样，将在构造函数中设置值*之前*`labeledRect`调用它，这很可能是您的问题的原因。

在 Java 中，超类构造函数在子类中的*任何*代码之前执行 - 在实例变量初始化程序和构造函数主体之前。*所有*变量都有其默认值。这就是为什么从构造函数调用虚方法是个坏主意。

（顺便说一句，该名称`labeledRect`不遵循 Java 命名约定。）

# visual-studio-2010 - C#从不同的文件夹加载DLL？

> ID：12029870
> 
> 赞同：4
> 
> 时间：2012-08-19T20:47:44.003
> 
> 标签：visual-studio-2010, c#-4.0, dll, reference, directory

我有一个 C# 项目，其中包含 1 个 EXE 和大约 7 个 DLL。我想要的是 EXE 旁边的一个名为“库”（或类似的东西）的文件夹，其中包含所有 DLL，这样它就更有条理，对最终用户来说看起来更好。

我知道这可以使用 AppConfig 来完成，但我不想要 EXE 旁边的另一个文件。我想要的只是主EXE和文件夹。

是否可以使用 AppConfig 并嵌入它或加载 DLL，而无需使用不会改变我当前使用 DLL 的方式的 AppConfig？我知道您可以在运行时加载 DLL，但我认为这不是我想要的。

谢谢！

**编辑**

我知道这样做的利弊，所以请只回答如何做到这一点，而不是关于我为什么应该或不应该这样做的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:16:56.323

使用[`System.Reflection.Assembly.LoadFrom(path)`](http://msdn.microsoft.com/en-us/library/1009fa28.aspx).

`LoadFrom`将允许它在与目标 dll 相同的文件夹中查找任何依赖项。如果您使用`Load`，那么它不会考虑与您加载的 dll 位于同一文件夹中的 dll。

我知道这并不能直接回答你的问题，但是`LoadFrom`如果你想要一个“xcopy”可安装的.net 应用程序或其他东西，在你的进程启动早期手动调用 DLL 应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T21:49:03.420

[PrettyBin](https://www.nuget.org/packages/PrettyBin/)是您的解决方案。它做得很漂亮！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T22:35:08.223

SetDllDirectory() + 仔细编码的 AssemblyResolve。在一个不平凡的项目中为我工作，没有 DLL 地狱。

[https://github.com/TASVideos/BizHawk/blob/d05ddabf5f22debf47369f94868462a75ea0b466/BizHawk.Client.EmuHawk/Program.cs](https://github.com/TASVideos/BizHawk/blob/d05ddabf5f22debf47369f94868462a75ea0b466/BizHawk.Client.EmuHawk/Program.cs)

# c++ - 重载比较运算符

> ID：12029872
> 
> 赞同：1
> 
> 时间：2012-08-19T20:47:55.677
> 
> 标签：c++, operator-overloading

我对 C++ 相当陌生，并试图在类中重载 < 运算符。

在我的头文件中，我有：

```
friend bool operator<(const Tweet& a, const Tweet& b); 
```

在类文件中我有：

```
inline bool Tweet::operator<(const Tweet& a, const Tweet& b) {
    return (a.getID() < b.getID());
} 
```

目前我收到一个错误`‘bool Tweet::operator<(const Tweet&, const Tweet&)’ must take exactly one argument`

删除将`Tweet::`错误更改为未定义的引用并删除第二个参数会将错误更改为“必须完全采用两个参数”

PS - 我已经尝试按照[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719)中的相应部分以及一些相关问题进行操作，但后来我得到了各种不同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:49:26.940

好吧，您将一个独立函数声明为友元，然后定义一个类成员函数作为比较。这并不完全正确。

如果定义具有两个参数的比较运算符，则必须将其声明为静态：

```
static bool Tweet::operator<(const Tweet& a, const Tweet& b) {
    return (a.getID() < b.getID());
} 
```

这种方式`a < b`被解释为`Tweet::operator<(a, b);`.

如果没有`static`，您将隐含 3 个参数`*this`：`a`和`b`。

或者，您可以定义一个实例运算符，采用一个参数并将其与当前实例进行比较：

```
bool Tweet::operator<(const Tweet& b) {
    return (getID() < b.getID());
} 
```

这种方式`a < b`被解释为`a.operator<(b);`.

或者，您可以定义一个独立的函数（这是您实际可能需要的地方`friend`）：

```
bool operator<(const Tweet& a, const Tweet& b) {
    return (a.getID() < b.getID());
} 
```

这种方式`a < b`被解释为`operator<(a, b);`.

无论哪种方式都很好。

# ios - 为什么我从 iOS 传递给 appEngine 的访问令牌无效？

> ID：12029873
> 
> 赞同：0
> 
> 时间：2012-08-19T20:47:59.767
> 
> 标签：ios, facebook, google-app-engine

我正在开发一款 iPhone 游戏，该游戏通过我在 Google App Engine 中构建的后端来维护排行榜和一些社交互动。用户可以在 iPhone 应用程序中通过 facebook 登录。该应用程序通过 HTTP 帖子向我的 Google App Engine 应用程序发送一些用户详细信息，包括访问令牌。

接收请求的处理程序尝试使用访问令牌来检索用户朋友。我正在使用这里的 Github 上的 pythonforfacebook SDK（我之前已经成功）：

[https://github.com/pythonforfacebook/facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)

我的 GAE 应用程序中的相关 python 代码如下：

```
def post(self):
    at = self.request.get('at')
    user = User.get_by_key_name(uid)
    if not user: #create previously unknown user
        logging.info('Entered unknown user code')
        logging.info(at)
        logging.info(type(at))
        graph = facebook.GraphAPI(at) 
        facebook_user = graph.get_object("me")
        friends = graph.get_connections(facebook_user["id"], "friends") 
```

日志记录命令打印看起来像一个好的访问令牌并声明类型是“Unicode”。当我将 logging.info 打印的访问令牌复制到 GAE 日志并将其粘贴到 facebook 访问令牌调试器中时，我得到以下输出：

应用 ID：**出于隐私考虑已删除，但看起来不错**

元数据：{"sso":"iphone-safari"}

用户 ID：**出于隐私考虑已删除，但看起来不错**

发布：1345405177（10分钟前）

过期：从不

有效：真

来源：移动网络 Faceweb

范围：offline_access read_stream

我刚刚更新了我的代码以使用最新发布的 pythonforfacebook 版本，但这没有任何区别。任何想法将不胜感激。

谢谢，

德西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T23:38:38.010

要获得用户的朋友，您可以在没有 pythonforfacebook SDK 的情况下轻松完成。

```
https://graph.facebook.com/<username or ID>/friends?access_token=<your token> 
```

该链接将以 JSON 格式为您提供用户的朋友。因此，如果您导入`urllib2`并且`json`可以执行以下操作：

```
response = urllib2.urlopen(<url above>)
friendsString = response.read()
friends = json.loads(friendsString ) 
```

然后`friends`将是一个包含所有朋友的[字典。](http://docs.python.org/library/stdtypes.html#dict)

# css - 标签之间的空白打破了我的布局

> ID：12029879
> 
> 赞同：-1
> 
> 时间：2012-08-19T20:48:42.417
> 
> 标签：css, layout, whitespace, removing-whitespace

我知道我可以“删除空白”，但这太不方便了。在 html 中有很多地方我有一些 inline-block 元素，去寻找它们中的每一个都是地狱。

有没有办法让这个空白不出现？

这是我的网站，你可以看到空间打破了我的布局： http: [//www.fashionstore.al/](http://www.fashionstore.al/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:55:04.317

“作弊”有两种方式。在我学习任何服务器端代码之前，我曾经这样做的方式是这样的：

```
<div id="container"><!--
   --><div class="block">Text</div><!--
   --><div class="block">More text</div><!--
--></div> 
```

通过注释掉空格，它不再会导致布局问题，但仍然可以让您分隔行。

使用服务器端代码，更容易：

```
<?php
    echo '<div id="container">'
            .'<div class="block">Text</div>'
            .'<div class="block">More text</div>'
        .'</div>';
?> 
```

或者，另一种方法：

```
<?php ob_start(function($c) {return preg_replace("/>\s+</","><",$c);}); ?>
<div id="container">
    <div class="block">Text</div>
    <div class="block">More text</div>
</div>
<?php ob_end_flush(); ?> 
```

# sql - 在 SQL 中将 9999999999 显示为 9-999-99999-9

> ID：12029880
> 
> 赞同：1
> 
> 时间：2012-08-19T20:48:55.367
> 
> 标签：sql, database, oracle, substr

我正在尝试将 VARCHAR 格式 9999999999 的列显示为 9-999-99999-9。我知道 TO_CHAR 和 TO_NUMBER 不起作用，我知道我想使用 SUBSTR 来做到这一点。

如果我能够将多个 SUBSTR 函数作为一列一起使用，我觉得我可以完成这项工作，例如：

SELECT SUBSTR(column, 0, 1) - SUBSTR(column, 1, 3) 等，但这也不起作用。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T21:04:57.417

您可以使用正则表达式搜索和替换

```
select regexp_replace('9999999999','(.)(...)(.....)(.)','\1-\2-\3-\4') from dual; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T20:57:21.533

您应该能够结合使用该`SUBSTR`函数和 Oracle 字符串连接运算符`||`.

```
SELECT    SUBSTR(column, 1, 1)
          || '-'
          || SUBSTR(column, 2, 3)
          || '-'
          || SUBSTR(column, 4, 5)
          || '-'
          || SUBSTR(column, 9, 1) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T21:37:21.210

我认为使用`to_char`实际上是最好的选择。它只需要明智地使用[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34510)。

这应该可以做到，但允许您非常轻松地扩展，而不必每次都创建新查询。

```
select replace(to_char( 999999999,'9,99,99999,9'),',','-') from dual 
```

我创建了一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/40434/1)来演示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T07:32:37.173

通过摆弄 NLS 数字字符设置，您可以通过另一种方式做到这一点：

```
select to_char(9999999999, 'fm9g999g99999g9', 'NLS_NUMERIC_CHARACTERS=''.-''')
from dual;

9-999-99999-9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T07:24:44.383

```
SELECT SUBSTR(9999999999,1,1) || 
       '-' ||
       SUBSTR(9999999999,2,3) ||
       '-' ||
       SUBSTR(9999999999,4,5) ||
       '-' ||
       SUBSTR(9999999999,10,1) FROM DUAL; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-06T07:53:45.383

假设地址表中有Phonenumber字段：
查询以(999)999-9999格式显示日期如下：

```
select concat(concat('(',substr(phone,1,3),')'),substr(phone,4,3),'-',substr(phone,7,4))
as Phone from address; 
```

# python - 插入图像会破坏框架布局

> ID：12029882
> 
> 赞同：0
> 
> 时间：2012-08-19T20:49:13.743
> 
> 标签：python, user-interface, wxpython

我开始将 wx 用于我的 Python 应用程序，并且在尝试将图像包含在 Frame 中时遇到了一个小问题。

我把它编译成一个简单的例子。我不明白的是，用文本替换图像时我没有布局问题。当我尝试输入图像时，布局被破坏了。

这是我的文本布局，仅包含两个元素。徽标和应用程序的标题

![带文字的布局](../Images/ef20dd94c7380a39dd74f100362a9652.png)

这是我尝试插入徽标时得到的结果：

![带图像的布局](../Images/cc0d8a4548405e5096e70c4b79b5d757.png)

由于某种原因，布局被破坏了，并且标题放在了左上角（我们再也看不到了。）

这是我的代码：

```
#!/usr/bin/env python
import wx

class IvolutionWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(200, 100))
        self.panel = wx.Panel(self)
        # Creating the title layout
        title = self.setup_titlelayout()

        # Creating the main grid
        maingrid = self.setup_maingrid(title)
        self.panel.SetSizer(maingrid)
        self.panel.Layout()
        self.Show(True)

    def setup_titlelayout(self):
        hbox = wx.BoxSizer(wx.HORIZONTAL)  # used to contain logo part and text part
        vbox = wx.BoxSizer(wx.VERTICAL)  # used to separate title and one-liner
        logobox = wx.BoxSizer(wx.HORIZONTAL)

        wx_logo = wx.EmptyBitmap(1, 1)  # Create a bitmap container object.
        wx_logo.LoadFile("ivolution/data/media/vitruve_50.jpg", wx.BITMAP_TYPE_ANY)  # Load it with a file image.

        #logo = wx.StaticBitmap(self, 1, wx_logo)
        logo = wx.StaticText(self.panel, label="Logo Here")  # Change for proper logo
        title = wx.StaticText(self.panel, label="Ivolution")

        logobox.Add(logo)
        vbox.Add(title, flag=wx.RIGHT, border=8)

        hbox.Add(logobox, flag=wx.RIGHT, border=8)
        hbox.Add(vbox, flag=wx.RIGHT, border=8)

        return hbox

    def setup_maingrid(self, title):
        maingrid = wx.FlexGridSizer(4, 1, vgap=0, hgap=0)
        maingrid.Add(title)
        return maingrid

    def on_exit(self, event):
        self.Close(True)  # Close the frame.

if __name__ == "__main__":
    app = wx.App(False)
    frame = IvolutionWindow(None, "Ivolution")
    app.MainLoop()  # Runs application 
```

如果您将图像的位置更改为正确的位置，它应该可以在任何计算机上运行。

两张图片之间唯一更改的代码行是：

```
#logo = wx.StaticBitmap(self, 1, wx_logo)

logo = wx.StaticText(self.panel, label="Logo Here")  # Change for proper logo 
```

我是 wxPython 的新手，所以我想这里有一些明显的东西，但我找不到什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:33:59.817

如果您想要相同的效果，您应该为 StaticText 和 StaticBitmap 使用相同的父级。
因此使用：

```
logo = wx.StaticBitmap(self.panel, 1, wx_logo) 
```

# html - HTML 表单输入自动缩进

> ID：12029888
> 
> 赞同：2
> 
> 时间：2012-08-19T20:49:37.197
> 
> 标签：html, forms, internationalization, indentation

我想使用 HTML 的表单文本框。问题是我希望我的用户同时使用 RTL 和 LTR 语言编写。是否有任何选项可以从右到左在文本框内（在书写时）自动缩进用户的输入？（如谷歌所做的）

```
<input type="text" name="text">
<input type="submit" name="submit"> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:19:58.087

您应该能够通过循环遍历所有字符（Az = ltr、1-9 中性和其他 rtl 或其他内容）来确定编写的语言。如果它是 rtl 语言，则应用'direction: rtl' css。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T21:02:09.243

您可以使用 ajax 来控制通过服务器端脚本（例如 php）使用的字符；然后调用一个特定的js函数来改变输入标签的dir属性。

# regex - 无法为 Mod Rewrite/URLRewriteFilter 构建正确的正则表达式。如何否定范围？

> ID：12029889
> 
> 赞同：0
> 
> 时间：2012-08-19T20:49:52.347
> 
> 标签：regex, tomcat, mod-rewrite, oracle-apex, tuckey-urlrewrite-filter

我很难建立这样一个简单的规则。只有当 1 类变量不在 4000 和 5999 之间时，我才想清理 URL。

当用户访问时，`f?p=3999:1:1:::::`我希望将用户定向到`/3999/1?vars=:1:::::`. 如果用户转到`f?p=4000:1:1:::::`URL 将不会被清除。

这是我到目前为止所拥有的。除了范围之外，这可以满足我的要求。有人请帮忙！：

```
<rule match-type="regex">
    <note>
        FROM= URL typed in by user
        TO= URL user is redirected to.
    </note>
    <from>^/f\?p=([0-9A-Za-z]+):([0-9A-Za-z]+):([0-9A-Za-z]*)(.*)$</from>
    <to type="redirect">/$1/$2?vars=$3$4</to>
</rule> 
```

使用 Lindrian 提供的解决方案，我能够将其插入到我的代码中以获得所需的结果。

最终的解决方案：

```
<rule match-type="regex">
<note>
    FROM= URL typed in by user
    TO= URL user is redirected to.
</note>
<from>^/f\?p=((?:[0-3]|[6-9])[0-9]*|[54]\d{4,}):([0-9A-Za-z]+):([0-9A-Za-z]*)(.*)$</from>
<to type="redirect">/$1/$2?vars=$3$4</to> 
```

我在这里做的是使用 URLRewriteFilter 来清理 oracle 应用程序快速 URL。这里的问题是 APEX 正在使用相对引用，因此如果您登录到 APEX，链接页面现在将查找 $1/f?p... 作为链接页面。这个错误是因为 $1 不存在！所以，我为开发 UI 关闭了 URL 清理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:04:56.780

我无法帮助您处理 mod-rewrite 代码，但我可以帮助您处理正则表达式。即使正则表达式不是做这种事情的最佳工具，它也可以做到。

我创建了一个简短的简单正则表达式，它匹配除 to 范围内的所有数字`4000`：`5999`http: [//regex101.com/r/aU5qC4](http://regex101.com/r/aU5qC4)

我希望您可以使用其他代码来完成这项工作。

祝你好运。

# c# - 使用数据模板中的复选框默认选中组合框中的一个特定复选框

> ID：12029894
> 
> 赞同：0
> 
> 时间：2012-08-19T20:50:18.243
> 
> 标签：c#, wpf, mvvm, checkbox, datatemplate

我在数据模板中有带有复选框的组合框。Combobox ItemSource 属性与 ViewModel 中的集合绑定。我想让一个特定的复选框默认选中。我怎样才能做到这一点？

```
<ComboBox Grid.Column="1"
          ItemsSource="{Binding MyCollection, Mode=OneWay}" 
          Style="{StaticResource MyComboboxStyle}"
          Margin="5"
          MinWidth="120">
                <ComboBox.ItemTemplate>
                    <DataTemplate>            
                        <CheckBox Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Path=DataContext.MyCheckedCommand}"
                                  CommandParameter="{Binding RelativeSource={RelativeSource Self}}"
                                  Content="{Binding}"
                                  IsChecked="false"
                                  VerticalAlignment="Center"
                                  Margin="3"/>                    
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:55:04.723

我会在你的视图模型中创建一个布尔属性，然后在加载集合时，在你的集合中找到应该检查的对象并将其设置为 true。

```
 public bool IsChecked { get; set; } 
```

XAML：

```
 <CheckBox Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Path=DataContext.MyCheckedCommand}"
                              CommandParameter="{Binding RelativeSource={RelativeSource Self}}"
                              Content="{Binding}"
                              IsChecked="{Binding IsChecked}"
                              VerticalAlignment="Center"
                              Margin="3"/> 
```

但是，这可能需要您将此属性与您的对象模型分开

# java - 如何用正则表达式替换括号中的数字

> ID：12029895
> 
> 赞同：0
> 
> 时间：2012-08-19T20:50:21.197
> 
> 标签：java, regex, string, brackets

那么我有这个代码：

```
String replacedItemName = ItemDefinitions.getItemDefinitions(usedWith).getName().replaceAll("\\(.\\)", "(6)"); 
```

`\\(.\\)`替换项目名称括号中的任何内容的正确正则表达式是否正确？（爪哇）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:01:47.720

我建议使用`replaceAll("(?<=\\().*?(?=\\))", "6");`. 看[这里](http://rubular.com/r/Txs3qmvHeP)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T20:58:42.510

几乎，你在你的点之后忘记了一个加号（一个或多个）。没有加号，点只匹配一个字符。

```
\(.+\) 
```

但是，我不确定您的目标是什么字符串。我用一些例子做了一个Rubular：

[http://rubular.com/r/0WijBsdtV0](http://rubular.com/r/0WijBsdtV0)

这些是否符合您的预期行为？

# c++ - 在函数周围传递 char[]

> ID：12029896
> 
> 赞同：1
> 
> 时间：2012-08-19T20:50:25.223
> 
> 标签：c++

我正在尝试将一些重载函数链接在一起。这应该很简单，但我遇到了错误。这是代码：

```
void output(char c[])
{
    output(c, 0);
}

void output(char c[], int x)
{
    int l = strlen(c) - x;
    output(c, x, l);
}

void output(char c[], int x, int y)
{
    cout << c;
}

int main()
{
    output("myname");
    output("myname", 3);
    output("myname", 2, 4);
} 
```

我得到的错误与链接部分有关（`output(c, 0);`和`output(c, x, l);`。错误是：

```
"No matching function for call to 'output (char *&, int)'
"No matching function for call to 'output (char *&, int &, int &)' 
```

解释我做错了什么也很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T20:54:42.423

我认为问题与您的函数缺少原型这一事实有关。在这种情况下，您应该重新排序函数，以便您调用的函数出现在调用它们的函数之前：

```
void output(const char c[], int x, int y)
{
    cout << c;
}
void output(const char c[], int x)
{
    int l = strlen(c) - x;
    output(c, x, l);
} 
void output(const char c[])
{
    output(c, 0);
} 
```

但最好坚持在定义它们之前为所有功能使用原型。

另请注意，字符串文字是`const`. 由于您的函数不会修改字符串文字的内容，因此您应该声明`const char c[]`而不是`char c[]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T20:58:06.223

您必须首先定义稍后将使用的所有函数。因此，在您的情况下，我建议先定义函数原型，然后再实现所有原型。这就是我的意思：

```
void output(char c[], int x);
void output(char c[], int x, int y);

void output(char c[])
{
    output(c, 0);
}

void output(char c[], int x)
{
    int l = strlen(c) - x;
    output(c, x, l);
}

void output(char c[], int x, int y)
{
    std::cout << c;
}

int main()
{
    output("myname");
    output("myname", 3);
    output("myname", 2, 4);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T21:04:20.703

C++ 要求首先声明您调用的所有函数。如果编译器之前在代码中的某处看到过它的声明（换句话说，它的原型），你根本无法调用一个函数。

所以，为了让它工作，你应该首先声明你的所有函数（换句话说，放置它们的所有原型），然后再调用它们：

```
// Declarations go first
void output(char [], int);
void output(char [], int, int);

void output(char c[])
{
    output(c, 0);
}

void output(char c[], int x)
{
    int l = strlen(c) - x;
    output(c, x, l);
}

void output(char c[], int x, int y)
{
    cout << c;
} 
```

这样，编译器将在调用函数之前获得所有需要的原型。

# objective-c - 使用属性与方法的指南

> ID：12029900
> 
> 赞同：7
> 
> 时间：2012-08-19T20:51:50.973
> 
> 标签：objective-c, properties, methods

我经常很难决定是否应该通过属性或方法公开某些数据。您可以说“使用对象状态的属性”，但这并不是很令人满意。以这个例子为例：

```
- (NSString *)stringOne
{
    return _stringOne;
}

- (NSString *)stringTwo
{
    return _stringTwo;
}

- (NSString *)mainString
{
    return [_stringOne length] > 0 ? _stringOne : _stringTwo;
} 
```

很明显，`stringOne`并且`stringTwo`应该是属性，因为它们显然是对象状态。但是，尚不清楚是否`mainString`应该是属性。对最终用户`mainString`来说就像状态一样。对你的对象，`mainString` *不是*状态。

这个例子是人为的，但希望你能明白。是的，属性只不过是一种创建 getter 和 setter 的便捷方式，但它们也向用户传达了一些信息。有没有人有合适的指导方针来决定何时使用属性与方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T21:11:01.947

我会说，隐藏“真实”状态（在您的示例中）和“动态”状态（）之间的分裂`string1`正是`string2`属性*的*用途。`mainString`

 *典型的例子可能是一个代表一个人的对象，名字和姓氏作为“状态”。第三个状态，“全名”可以从这两个部分呈现，但是客户完全没有理由知道全名是按需构建的，还是在设置两个部分时创建和存储的。根本没关系。

属性是一个*接口*——这个类向它的客户端提供了哪些数据（以及客户端可以对这个类进行什么配置）？每个属性的实现都是封装的，不影响其作为属性的状态。

当然，在 ObjC 中，我们使用方法来访问属性。然而，其他方法表示对象可以执行的*操作*，可能会传递一些数据以进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T10:42:42.150

另一个要考虑的因素：你想存储财产的价值吗？（例如通过 NSCoding 或在 Core Data 中）我想您需要为需要“保存”的内容创建属性（例如在“encodeWithCoder”中。决定要放入 encodeWithCoder 的内容可以帮助您决定要以哪种方式保存）定义事物）。

对于不需要保存并且可以轻松重新计算的东西，您可以在方法和只读属性之间进行选择（这在引擎盖下是等效的：只读属性只创建一个 getter 访问器方法，并且没有实例变量支持它）。所以这更多的是风格问题。

说到样式，如果您只对属性使用点表示法（就像我一样），您可能会想知道：- 我是否想以 foo.fullName 的形式访问全名，而不是与 foo.firstName 等其他属性有所不同和 foo.lastName ？- 或者您是否想通过使用 [foo fullName] 访问全名来有所作为，向世界展示这是经过计算的？

我创建了一个跟踪股票报价的应用程序，该模型的灵感来自 Big Nerd Ranch 书中关于 Objective C 的一个示例（顺便说一句，很好读）。以下是属性和方法的定义方式：

```
// properties
@property (nonatomic, copy)   NSString *name;
@property (nonatomic, copy)   NSString *symbol;
@property (nonatomic, copy)   NSString *currency;
@property (nonatomic, copy)   NSString *market;
@property (nonatomic)         int    numberOfShares;
@property (nonatomic)         double purchaseSharePrice;
@property (nonatomic)         double currentSharePrice;

// Stock Calculation methods
- (double)costInLocalCurrency; // purchaseSharePrice * numberOfShares
- (double)valueInLocalCurrency; // currentSharePrice * numberOfShares
- (double)gainOrLossInLocalCurrency // valueInLocalCurrency - costInLocalCurrency 
```

你可以看到它们被清楚地区分开来。BNR 在他们的书中根本没有使用点表示法，所以看起来都一样：[foo currentSharePrice] 或 [foo valueInLocalCurrency]，但是当我对属性使用点表示法时，我会在 foo. currentSharePrice 和 [foo valueInLocalCurrency]。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:58:44.003

按照设计，您应该始终尊重最终用户 - 如果您认为它是您的类用户的对象状态（显然是），那么继续并从中创建一个属性。*

# ruby-on-rails - Rails：查询连接大于和小于日期值？

> ID：12029902
> 
> 赞同：1
> 
> 时间：2012-08-19T20:52:27.883
> 
> 标签：ruby-on-rails

我有 2 个表，一个`PlayingField`表和一个`Bookings`表，我想编写一个接收查询参数的 rails 查询`Start_date`，`End_date`并且`Number_of_players`

场景：我将 Start_date、End_date 和 Number_of_players 传递给一个方法，我想获取在提供的日期之间可用（未预订）的所有 PlayingFields，并且该字段可以容纳所需的玩家数量。

```
PlayingField has_many bookings
Booking belongs_to PlayingField 
```

伪代码：

```
@Fields = PlayingFields.where(bookings.end_date > start_date AND bookings.start_date > end_date AND PlayingFields.capacity >= number_of_players) 
```

有人可以告诉我最好的方法是在轨道方面吗？

如何通过 rails 查询数据库以获取`PlayingFields`它们之间的所有可用日期以及所需的玩家数量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:36:59.887

rails 必须在 SQL 调用之前包含 bookings 表。

```
PlayingFields.joins(:bookings).where(bookings.end_date > start_date AND bookings.start_date > end_date AND bookings.capacity >= number_of_players) 
```

我也很好奇这两个对象如何以编程方式关联。Booking 模型如何与 PlayingField 关联？

# javascript - 在 Aptana Studio 3 中将 Javascript 数组自动格式化为新行

> ID：12029907
> 
> 赞同：0
> 
> 时间：2012-08-19T20:53:07.300
> 
> 标签：javascript, arrays, aptana, aptana3, autoformatting

似乎 Aptana Studio 3 只有将 Javascript 数组自动格式化为一行的选项。我想知道是否有办法让 Aptana Studio 3 将 Javascript 数组自动格式化为每个数组元素的新行（类似于自动格式化 php 数组的选项 - “在数组创建元素之间插入新行”）。

例如，我想要

```
var dataset = [1, 2, 3, 4]; 
```

成为

```
var dataset = [1,
               2,
               3,
               4]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:29:38.477

我通常在 Aptana 做的是这样的：

```
 var dataset = [
    //
    1,
    //
    2,
    //
    3,
    //
    4
    //
    ]; 
```

而且 Aptana 足够愚蠢，不会尝试插入行注释。

然后你甚至可以拥有：

```
 var dataset = [

    //
    [1, 3, 5, 7, 9],

    //
    [2, 4, 6, 8, 0],

    //
    'Some string here',

    //
    function( ) {
        return 'even a function';
    }

    //
    ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T04:36:00.680

试试这个，

```
var dataset = [1,//
               2,//
               3,//
               4]; 
```

Aptana 不会把它放在一行中，如果它后面有注释的话。

# mysql - 使用两个 JOINS 或两个 ON 从同一个表中查询相同的值

> ID：12029914
> 
> 赞同：1
> 
> 时间：2012-08-19T20:54:33.117
> 
> 标签：mysql

这个问题还有意义吗？

我正在尝试做一个查询，它从同一张表上的 JOIN 中提取 2 个不同的值。

我有和“Order”，其中有两个值，“TakenBy”和“PackedBy”这些是来自员工表的 User_ID。大多数情况下，它们不会相同。

如何在查询中分隔它们？我可以得到其中一个，但我不确定如何重新获取这两个值。

这是我要得到的东西..

```
SELECT
O.Order_ID AS OID, Customer_ID AS CID, Emp.UserName AS UserName
FROM Orders O
LEFT JOIN Employees Emp ON Emp.User_ID = O.User_ID
WHERE O.Customer_ID =3 
```

但是，当我想要“PackedBy”时呢？我也怎么得到呢？

```
[Employees Table]
[User_ID] [UserName]
[1]       [Joe]
[2]       [Bill]
[3]       [Bobby]
[4]       [Steve]

[Orders]
[Order_ID] [Customer_ID] [TakenBy] [PackedBy]
[10]       [55]          [3]       [1]
[11]       [66]          [2]       [4]
[12]       [77]          [3]       [4]
[13]       [88]          [2]       [1] 
```

我希望查询返回类似

```
[OID]   [CID]   [TAKER] [PACKER]
[11]    [66]    [Bill]  [Steve] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:59:57.777

如果您使用不同的表别名，您可以多次加入同一个表。

例如：

```
SELECT
O.Order_ID AS OID, Customer_ID AS CID, 
   EmpP.UserName AS Packer,
   EmpT.UserName AS Taker

FROM Orders O
LEFT JOIN Employees EmpP ON Emp.User_ID = O.PackedBy
LEFT JOIN Employees EmpT ON Emp.User_ID = O.TakenBy
WHERE O.Customer_ID =3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:00:06.373

您需要两个联接，一个用于每个员工角色：

```
SELECT O.Order_ID AS OID, Customer_ID AS CID, Emp.UserName AS UserName,
       packed.UserName as PackedBy
FROM Orders O LEFT JOIN
     Employees Emp
     ON Emp.User_ID = O.User_ID left join
     Employees Packed
     on Packed.User_id = o.PackedBy
WHERE O.Customer_ID =3 
```

# objective-c - 将 NSTableView 数据添加到 NSPopUpButton 项

> ID：12029921
> 
> 赞同：0
> 
> 时间：2012-08-19T20:55:19.997
> 
> 标签：objective-c, cocoa, nstableview, nspopupbutton

我有一个可以添加和删除项目的 NSTableView。将项目添加到表格后，我希望这些项目也显示为 NSPopUpButton 的项目。我尝试了 addItemsWithTitles: 方法，但它给了我一个错误。

```
#import "TableController.h"
#import "Favorites.h"

@interface TableController ()

@property NSMutableArray *array;
@property (weak) IBOutlet NSTableView *tableView;
@property (weak) IBOutlet NSPopUpButton *popButton;

@end

@implementation TableController

- (id)init {
    self = [super init];
    if (self) {
        _array = [[NSMutableArray alloc] init];
    }
    return self;
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return [_array count];
}

- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    Favorites *fav = [_array objectAtIndex:row];
    NSString *ident = [tableColumn identifier];
    return [fav valueForKey:ident];
}

- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    Favorites *fav = [_array objectAtIndex:row];
    NSString *ident = [tableColumn identifier];
    [fav setValue:object forKey:ident];
}

- (IBAction)add:(id)sender {
    [_array addObject:[[Favorites alloc] init]];
    [_tableView reloadData];
    [_popButton addItemsWithTitles:_array];
}

-(IBAction)delete:(id)sender {
    NSInteger row = [_tableView selectedRow];
    [_tableView abortEditing];
    if (row != -1) {
        [_array removeObjectAtIndex:row];
    }
    [_tableView reloadData];
}

@end 
```

因此，我尝试为数组记录 objectAtIndex:0 并没有得到字符串，而是收到了一些数字：

```
Array string is <Favorites: 0x10013e820> 
```

并且作为参考我的收藏夹类是

```
#import "Favorites.h"

@interface Favorites ()

@property (copy) NSString *location;

@end

@implementation Favorites

- (id)init {
    self = [super init];
    if (self) {
        _location = @"City, State or ZIP";
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T01:05:45.937

你的数组有你的类的实例，Favorites，并且在你的 addItemsWithTiles: 方法中你正在添加这些实例，而不是这些实例的一些字符串属性，这是我认为你想要的。如果您使用 [_array valueForKey:@"whateverKeyHasYourStrings"] 作为 addItemsWithTitles: 的参数，而不仅仅是 _array，我认为它可以正常工作。

# parameters - 使用 SELECT-OPTIONS 作为类方法的导出参数？

> ID：12029922
> 
> 赞同：2
> 
> 时间：2012-08-19T20:55:23.267
> 
> 标签：parameters, abap

我目前在使用选择选项数据类型调用方法时遇到问题。它给了我错误：`S_NETWR`is not type-compatible with form parameter `IN_NETWR`。

我不确定我需要做什么才能将它们作为参数导出。抱歉，我是 ABAP 新手。任何帮助将不胜感激。

源代码片段：

```
"set the audit at $50,000
lv_max = 50000.

SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE text-001.
SELECT-OPTIONS: s_netwr FOR ekpo-netwr,
                s_datvr FOR nast-datvr NO INTERVALS.
SELECTION-SCREEN END OF BLOCK blk1.

*sets last run date from tvarvc
INITIALIZATION.
  PERFORM get_lastrun.

CALL METHOD lcl_audit->get_po
  EXPORTING
    in_netwr = s_netwr
    in_datvr = s_datvr
  IMPORTING
    out_po   = it_po
    . 
```

`get_po`我班上的方法`zcl_audit_02`：

```
METHOD get_po.

  SELECT DISTINCT ekko~ebeln ekpo~netwr ekko~lifnr ekko~ekorg 
                  ekpo~werks ekko~ekgrp t024~eknam
  FROM ( ekpo
  INNER JOIN ekko
  ON ekko~ebeln = ekpo~ebeln

  INNER JOIN t024
  ON ekko~ekgrp = t024~ekgrp

  INNER JOIN nast
  ON nast~objky = ekko~ebeln )

  INTO TABLE out_po
  WHERE ekpo~netwr = in_netwr
  AND   nast~datvr = in_datvr.

  IF sy-subrc = 0.
    SORT out_po BY ebeln ASCENDING.
  ELSE.
    MESSAGE 'No Purchase Orders Found' TYPE 'I'.
  ENDIF.

ENDMETHOD. 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:36:49.297

`SELECT-OPTIONS`创建带有标题行的内部表。问题是当您使用 ABAP OO 时不再允许标题行。您必须通过传递`so_foo[]`给方法而不是`so_foo`. 括号确保只有表格组件被寻址并且标题行被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:39:33.760

我看不到您的方法参数是什么类型。但是你需要它是以下的。签名 char 1 option char 2 low netwr High netwr。在此类型的数据字典中创建一个结构，然后创建该结构的表类型，并将该表类型用作参数的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:19:02.340

我需要在我的类中定义一个类型范围并导出 s_netwr[] 和 s_datvr[]。这解决了问题。谢谢大家！

# java - 在ListView上依次显示用户信息

> ID：12029928
> 
> 赞同：0
> 
> 时间：2012-08-19T20:56:08.687
> 
> 标签：java, android, android-listview

**问题陈述：-**

在我下面的代码中，我得到`list of User's`了我目前正在显示的`google map`对我来说工作正常的。而且我还需要向他们展示`ListView`哪些工作不正常。

所以目前我有`two user's in the response`. 如果我尝试在 中打印它们`for loop`，我可以看到两个用户都被正确打印。但是当我尝试将它们添加到我的 中`ListView`时，我看到`only one user`显示在`ListView twice`? 但我应该在`ListView`.

```
@Override
protected void onPostExecute(ArrayList<User> response) {

    for(User user : response){

        System.out.println("User:- " +user.getFirstName());

// Something wrong I am doing in below line
        adapter=new LazyAdapter(ThesisProjectAndroid.this, mStrings, user);

        if(user.getGender()==1) {
            Drawable marker=getResources().getDrawable(R.drawable.current_user);
            int markerWidth = marker.getIntrinsicWidth();
            int markerHeight = marker.getIntrinsicHeight();
            marker.setBounds(0, 0, markerHeight, markerWidth);

            myItemizedOverlay = new MyItemizedOverlay(marker);
            mapView.getOverlays().add(myItemizedOverlay);

            GeoPoint myPoint1 = new GeoPoint((int) (user.getLatitude()*1000000), (int) (user.getLongitude()*1000000));
            myItemizedOverlay.addItem(myPoint1, "myPoint1", "myPoint1");
        } else {

            Drawable marker1=getResources().getDrawable(android.R.drawable.star_big_on);
            int markerWidth1 = marker1.getIntrinsicWidth();
            int markerHeight1 = marker1.getIntrinsicHeight();
            marker1.setBounds(0, 0, markerHeight1, markerWidth1);

            myItemizedOverlay = new MyItemizedOverlay(marker1);
            mapView.getOverlays().add(myItemizedOverlay);

            GeoPoint myPoint2 = new GeoPoint((int) (user.getLatitude()*1000000), (int) (user.getLongitude()*1000000));
            myItemizedOverlay.addItem(myPoint2, "myPoint2", "myPoint2");
        }

    }
    listView.setAdapter(adapter);
} 
```

这是我的`LazyAdapter class`。

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader;
    private User userList;

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public LazyAdapter(Activity b, String[] mStrings, User user) {
        activity = b;
        data=mStrings;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
        userList = user;
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);
        TextView text1=(TextView)vi.findViewById(R.id.text1);
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("Name: " +userList.getFirstName()+" "+userList.getLastName());
        text1.setText("Gender: " +userList.getGender());
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

这是用于显示的 XML `user's list`- 我需要`User's Full Name`在第一时间`TextView`和`Gender`第二时间显示`TextView`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
  <ImageView
      android:id="@+id/image"
      android:layout_width="50dip"
      android:layout_height="50dip" android:src="@drawable/stub" android:scaleType="centerCrop"/>
  <TextView
      android:id="@+id/text"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1" android:layout_gravity="left|center_vertical" android:textSize="20dip" android:layout_marginLeft="10dip"/>
   <TextView
      android:id="@+id/text1"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1" android:layout_gravity="left|center_vertical" android:textSize="20dip" android:layout_marginLeft="10dip"/>
</LinearLayout> 
```

这就是我在模拟器中得到的结果——一个用户在我的列表视图中显示了两次，为什么会这样？但它应该`One user information`在那个`top`和`second user information`下面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:22:46.707

您需要向适配器提供完整的用户列表

```
@Override
protected void onPostExecute(ArrayList<User> response) {

    // add all users to the adapter
    adapter=new LazyAdapter(ThesisProjectAndroid.this, mStrings, response);

    for(User user : response){

        System.out.println("User:- " +user.getFirstName());

        // ---- here be ur other code ----
    }
    listView.setAdapter(adapter);
} 
```

您的适配器

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader;
    private List<User> userList;

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public LazyAdapter(Activity b, String[] mStrings, List<User> user) {
        activity = b;
        data=mStrings;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
        userList = user;
    }

    // ---- here be ur other code ----

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);
        TextView text1=(TextView)vi.findViewById(R.id.text1);
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("Name: " +userList.get(position).getFirstName()+" "+userList.get(position).getLastName());
        text1.setText("Gender: " +userList.get(position).getGender());
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

# jquery - jQuery .each() 无法识别所有元素。

> ID：12029931
> 
> 赞同：0
> 
> 时间：2012-08-19T20:56:24.673
> 
> 标签：jquery, html, each

所以我有我的基于网格的布局：

```
<div id="gridrow" class="clear">
<div id="gridsection" class="float-left">
    <div id="gridwrap">
        <div id="gridimage" class="clear"></div>
        <div id="gridtitle" class="clear">Title</div>
        <div id="gridinfo" class="clear">Info</div>
    </div>
</div>
<div id="gridsection" class="float-right">
    <div id="gridwrap">
        <div id="gridimage" class="clear"></div>
        <div id="gridtitle" class="clear">Title</div>
        <div id="gridinfo" class="clear">Info</div>
    </div>
</div>
<div id="gridsection" class="gridmiddle">
    <div id="gridwrap">
        <div id="gridimage" class="clear"></div>
        <div id="gridtitle" class="clear">Title</div>
        <div id="gridinfo" class="clear">Info</div>
    </div>
</div> 
```

然后我有这个 jQuery 脚本：

```
$("#gridtitle").each(function(index){
    $("#gridtitle:eq("+index+")").click(function (){
        $("#gridimage:eq("+index+"), #gridinfo:eq("+index+")").slideToggle();
    });
}); 
```

我认为这会起作用（合乎逻辑）但是，只有第一个网格元素会起作用，有什么提示吗？

欲了解更多信息，请随时询问，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:57:53.100

不同的元素必须有不同的 ID。

如果两个或多个元素具有相同的 ID，则仅使用第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:59:36.207

ID 是唯一的，每个对象只能使用一个。您可以改用分类，并更改选择器：

```
$(".gridtitle").each(function(index){
    $(".gridtitle:eq("+index+")").click(function (){
        $(".gridimage:eq("+index+"),.gridinfo:eq("+index+")").slideToggle();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:58:30.033

那是因为`gridtitle`是一个`id`. 您应该改为将其更改为 a`class`并像这样选择它：

```
$(".gridtitle").each(function() { ... }); 
```

# java - 如果值重复，则在单行中显示来自 DB 表的数据

> ID：12029934
> 
> 赞同：1
> 
> 时间：2012-08-19T20:56:55.997
> 
> 标签：java

我已经查询了多个表，并且正在获取数据。现在我想以表格形式显示该数据，这样如果 Ids 重复，它将仅在单行中。

我查询过

```
 Query  "select a.id,b.status from A a,B b 

 List li = data from query;
 Iterator iterator = li.iterator();
 while(iterator.hasNext()){
      System.out.println(id+"-"+status)
 } 
```

我正在获取数据，

```
**id                 status**        
  10                  G1
  10                  G2 
  10                  G3 
  15                  G1
  16                  
  17                  G1
  17                  G2 
```

现在我想显示如下（例如 10 重复 3 次，所以我想在单行中显示它的 3 个等级，15 一次，16 没有等级，17 等级两次）

```
 id          statusfirst           statussecond     statusthird
  10           G1                    G2               G3
  15           G1                    NA               NA 
  16           NA                    NA               NA
  17           G1                    G2               Na 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:32:18.340

您可以使用 LinkedHashMap 来完成此类分类并保持 ids 顺序。

请在下面找到源代码示例：

```
 // put this line outside the loop of ids and statuses
    // In case your ids are Integers change the LinkedHashMap<String, String> to LinkedHashMap<Integer, String>.
    LinkedHashMap<String, ArrayList<String>> lh = new LinkedHashMap<String, ArrayList<String>>();

    String id = "1";
    String status = "G1";

    // put the below lines in the loop of ids and sstatuses
    if (id != null && !"".equals(id.trim())) {
        if (!lh.containsKey(id)) {
            final ArrayList<String> al = new ArrayList<String>();
            al.add(status);
            lh.put(id, al);
        } else {
            lh.get(id).add(status);
        }
    }

    Iterator<String> lhIter = lh.keySet().iterator();
    while (lhIter.hasNext()) {
        final String thisId = lhIter.next();
        final ArrayList<String> statusesAL = lh.get(thisId);
        final StringBuilder strB = new StringBuilder();
        strB.append("id: '").append(thisId).append("'");
        int i = 0;
        for (String s : statusesAL) {
            strB.append(" status[").append(i).append("]: '").append(s).append("'");
            i++;
        }
        System.out.println(strB.toString());
    } 
```

输出将如下所示：id: '1' status[0]: 'G1'。

如果一个 id 有更多状态，输出将是这样的：id: '1' status[0]: 'G1' status[1]: 'G2'。

# ios - 如何在 iOS 上创建 Flap-up 信息页面

> ID：12029937
> 
> 赞同：0
> 
> 时间：2012-08-19T20:57:09.280
> 
> 标签：ios, xcode, ios5, xcode4

我记得看到有多个应用程序在屏幕底部有一个小*i*，并且角落会稍微翻动以显示一些东西，例如标头。**地图应用程序（iOS6 之前）在右下角有我所说的内容。它显示允许您打印地图和放置图钉等。**

我想这样做。我希望那个角落飘扬起来，并表明我创造了它，以及其他任何东西。有什么办法可以创建这个吗？它可以是基于文本的，基于图像的，任何东西。我尝试了一些东西，但没有奏效：

我创建了*i*（制作了一个“圆形矩形按钮”并将其变成了一个“信息灯按钮”），并尝试在 .xib 中创建一个新窗口，并将它们链接在一起，但它似乎不起作用。

TL;DR：如何创建从右下角/左下角向上翻动的信息页面？

顺便说一句：我使用的是 XIB，而不是故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:15:10.520

这相当容易。您必须以模态方式展示您的视图控制器并设置转换模式：

```
 controller.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
```

您可以尝试开始一个新项目....选择实用程序....它将在两个视图控制器之间进行翻转....只需将transistionStyle更改为我上面写的内容，然后它应该像在地图中一样卷曲应用程序

# c# - 字符串比较抛出空引用异常

> ID：12029940
> 
> 赞同：0
> 
> 时间：2012-08-19T20:57:27.733
> 
> 标签：c#, linq, linq-to-sql, compare

我试图在我的数据库中找到一个用户，搜索电子邮件和电话号码。但是，如果我使用 List 或 IEnumerable 我会得到一个空引用异常。如果我不使用其中任何一个，则会抛出“SQL 不支持 ...”。

我的方法：

```
public List<tblMember> getAllMembers()
{
    return db.tblMembers.ToList();
}

private void confirmMembership(string email, int phoneNumber)
{
    //var allMembers = db.tblMembers.AsEnumerable(); throws same exception
    tblMember member = getAllMembers().FirstOrDefault(x => x.email.Equals(email, StringComparison.OrdinalIgnoreCase) && x.phoneNumber == phoneNumber); //This line throws exception, around email.Equals()
    if (member != null)
    {
        member.isConfirmed = true;
        db.SubmitChanges();
    }
    else
        throw new Exception("Member not found");
} 
```

如果我像这样执行搜索，则不会引发异常：

```
private void confirmMembership(string email, int phoneNumber)
{
    //var allMembers = db.tblMembers.AsEnumerable(); throws same exception
    tblMember member = getAllMembers().FirstOrDefault(x => x.email == email && x.phoneNumber == phoneNumber);
    if (member != null)
    {
        member.isConfirmed = true;
        db.SubmitChanges();
    }
    else
        throw new Exception("Member not found");
} 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T21:04:32.923

在第一种情况下，您在为空的对象上调用 Equals()。

```
x.email.Equals(...) 
```

这会引发异常。

在第二种情况下，您正在比较两件事，其中一件可能为空

```
x.email == email 
```

* * *

以下是基于评论的最新消息：

```
private void confirmMembership(string email, int phoneNumber)
{
    tblMember member = tblMembers.FirstOrDefault((x) => {
        if (x.email == null)  return false;
        return SqlMethods.Like(x.email,email) && x.phoneNumber == phoneNumber); 
      }
    if (member != null)
    {
        member.isConfirmed = true;
        db.SubmitChanges();
    }
    else
        throw new Exception("Member not found");
} 
```

* * *

这是另一种不会引发异常的方法：

```
private void confirmMembership(string email, int phoneNumber)
{
    //var allMembers = db.tblMembers.AsEnumerable(); throws same exception
    tblMember member = getAllMembers().FirstOrDefault((x) => {
        if (x.email == null)  return false;
        return x.email.Equals(email, StringComparison.OrdinalIgnoreCase) && x.phoneNumber == phoneNumber); 
      }
    if (member != null)
    {
        member.isConfirmed = true;
        db.SubmitChanges();
    }
    else
        throw new Exception("Member not found");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T21:03:13.017

这可能是因为`x.email`为空。如果它为 null，则调用它的成员会引发异常。

```
x.email.Equals(...)   ==> exception 
```

但是，您可以比较两个可能为空的值

```
x.email == email      ==> OK. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T21:07:38.990

我怀疑这是因为`x.email`对于 x 的某些值是空的。

尝试：

```
tblMember member = db.tblMembers
     .FirstOrDefault(x => x.email != null
                     && x.email.Equals(email, StringComparison.OrdinalIgnoreCase) 
                     && x.phoneNumber == phoneNumber); 
```

编辑：我刚刚注意到它`getAllMembers()`返回 a`List<T>`所以你不必担心我之前谈论的表达式树转换 - 但是你当前的代码每次调用这个方法时都会从数据库中获取*所有数据。*你*真的*想要那个吗？我上面提供的代码将*在数据库*中进行过滤，这肯定是您感兴趣的。

# google-api - 将 Google Drive 与 Google 协作平台集成（内联网）

> ID：12029941
> 
> 赞同：1
> 
> 时间：2012-08-19T20:57:31.980
> 
> 标签：google-api, google-docs-api, google-drive-api, google-sites

我已经设置了一个 Google Apps 帐户，以便将其用于我的 Intranet、电子邮件、文档共享等。

这是谷歌站点，我在其中创建了一个基本的内部网站，我最初的理解是谷歌站点将使我能够与谷歌驱动器（以前的谷歌文档）集成。我认为在我的 Intranet 中创建一个“文档”页面并显示最近添加到 Google Drive 的文档会很容易。

但是，如果您确实在 Google 协作平台中创建了文档页面，那么这似乎与 Google Drive 中的文档完全不同。

我已阅读有关 Google Picker API 的信息，但我不完全确定这就是我正在寻找的。

有没有人以这种方式使用 Google Drive for business 的经验？还是我在叫错树？

任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:26:13.357

您必须稍微了解一下脚本。请参阅此链接以了解解决此问题的一种方法[https://developers.google.com/apps-script/articles/embedding_docslist_in_sites](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)

是的，站点有一个“文件柜”，它与 Google Drive 完全分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T11:10:24.547

[Overdrive](https://overdrive.io/)提供了这个功能。虽然它是一个商业产品。Overdrive 中的文件夹结构与 Google Drive 文件夹结构相匹配。您在 Overdrive 中的文件夹中看到的文档与您可以在 Google Drive 中直接访问的文档相同。

我与这家公司没有任何关系，我只是在试用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T17:00:31.577

您可以用来进行此类集成的另一种产品[是 Metadrive](https://metadriveweb.com/getting-started/#Integrate_Metadrive_in_Google_Sites_pages)。该工具使您可以在 Google Drive 和 Team Drives 中创建视图和搜索。

# xml - xslt 连接

> ID：12029946
> 
> 赞同：1
> 
> 时间：2012-08-19T20:58:01.337
> 
> 标签：xml, xslt, xpath

我有这个 xml 数据

```
<XMLCreators>
<row>
<RateNumber>1</RateNumber>
<RateLetter>Null</RateLetter>
<AssessmentStreet>Abesinia Passage</AssessmentStreet>
<RateAccomDesc>Dwelling  (Part Of)</RateAccomDesc>
</row>
<row>
<RateNumber>1a</RateNumber>
<RateLetter>Null</RateLetter>
<AssessmentStreet>Arena's Palace Lane</AssessmentStreet>
<RateAccomDesc>Edmund's Home</RateAccomDesc>
</row>
</XMLCreators> 
```

我用这个 xsl 改变了它的输出元素

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:output indent="yes" method="xml"/> 
<xsl:template match="/">
    <Address>  <xsl:apply-templates/> </Address>
    </xsl:template>
<xsl:template match="/XMLCreators/row">
    <Rowinfo> <xsl:apply-templates/> </Rowinfo>
</xsl:template>

<xsl:template match="/XMLCreators/row/RateNumber">
    <Locator> <xsl:apply-templates/> </Locator>
</xsl:template>
<xsl:template match="/XMLCreators/row/AssessmentStreet">
    <thoroughfare> <xsl:apply-templates/> </thoroughfare>
</xsl:template>

<xsl:template match="/XMLCreators/row/RateAccomDesc">
    <LocatorName> <xsl:apply-templates/> </LocatorName>
</xsl:template>

     </xsl:stylesheet> 
```

并制作了这个

```
<?xml version="1.0" encoding="utf-8"?>
<Address>
<Rowinfo>
<Locator>1</Locator>
Null
<thoroughfare>Abesinia Passage</thoroughfare>
<LocatorName>Dwelling  (Part Of)</LocatorName>
</Rowinfo>
<Rowinfo>
<Locator>1a</Locator>
Null
<thoroughfare>Arena's Palace Lane</thoroughfare>
<LocatorName>Edmund's Home</LocatorName>
</Rowinfo>
</Address> 
```

我想向 rowinfo (locatordesignator) 添加一个新元素，并使用 (rateletter 和 RateAccomDesc) 的值的串联填充它。

拜托，我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:42:50.673

**只需添加此模板**：

```
 <xsl:template match="RateLetter">
  <LocatorDesignator>
   <xsl:value-of select="concat(., ', ', ../RateAccomDesc)"/>
  </LocatorDesignator>
 </xsl:template> 
```

**现在完整的转换变成：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes" />
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <Address>  <xsl:apply-templates/> </Address>
 </xsl:template>

 <xsl:template match="row">
  <Rowinfo> <xsl:apply-templates/> </Rowinfo>
 </xsl:template>

 <xsl:template match="RateNumber">
  <Locator> <xsl:apply-templates/> </Locator>
 </xsl:template>

 <xsl:template match="AssessmentStreet">
  <thoroughfare> <xsl:apply-templates/> </thoroughfare>
 </xsl:template>

 <xsl:template match="RateAccomDesc">
  <LocatorName> <xsl:apply-templates/> </LocatorName>
 </xsl:template>

 <xsl:template match="RateLetter">
  <LocatorDesignator>
   <xsl:value-of select="concat(., ', ', ../RateAccomDesc)"/>
  </LocatorDesignator>
 </xsl:template>
</xsl:stylesheet> 
```

**当它应用于提供的 XML 文档时：**

```
<XMLCreators>
    <row>
        <RateNumber>1</RateNumber>
        <RateLetter>Null</RateLetter>
        <AssessmentStreet>Abesinia Passage</AssessmentStreet>
        <RateAccomDesc>Dwelling  (Part Of)</RateAccomDesc>
    </row>
    <row>
        <RateNumber>1a</RateNumber>
        <RateLetter>Null</RateLetter>
        <AssessmentStreet>Arena's Palace Lane</AssessmentStreet>
        <RateAccomDesc>Edmund's Home</RateAccomDesc>
    </row>
</XMLCreators> 
```

**产生了想要的正确结果**：

```
<Address>
   <Rowinfo>
      <Locator>1</Locator>
      <LocatorDesignator>Null, Dwelling  (Part Of)</LocatorDesignator>
      <thoroughfare>Abesinia Passage</thoroughfare>
      <LocatorName>Dwelling  (Part Of)</LocatorName>
   </Rowinfo>
   <Rowinfo>
      <Locator>1a</Locator>
      <LocatorDesignator>Null, Edmund's Home</LocatorDesignator>
      <thoroughfare>Arena's Palace Lane</thoroughfare>
      <LocatorName>Edmund's Home</LocatorName>
   </Rowinfo>
</Address> 
```

**说明**：

正确使用模板和标准 XPath**[`concat()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-concat)**函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:12:13.007

只需将附加信息添加到您的模板之一：

```
<xsl:template match="/XMLCreators/row">
    <Rowinfo>
        <locatordesignator>
            <xsl:value-of select="RateLetter"/>
            <xsl:text> </xsl:text>
            <xsl:value-of select="RateAccomDesc"/>
        </locatordesignator>

        <xsl:apply-templates/>
    </Rowinfo>
</xsl:template> 
```

# sql - SQL Server 中 INNER 联接和笛卡尔联接的区别

> ID：12029947
> 
> 赞同：3
> 
> 时间：2012-08-19T20:58:04.427
> 
> 标签：sql, sql-server-2008, tsql

> **可能重复：**
> [内部联接和完全联接之间的区别](https://stackoverflow.com/questions/3022713/difference-between-inner-join-full-join)

这两者有什么区别，尤其是在 SQL Server 2008 中 -

```
select * from table1 t1, table2 t2 where t1.col1 = t2.col1 
```

和

```
select * from table1 t1 INNER JOIN table2 t2 ON t1.col1 = t2.col1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:04:18.517

他们是一样的。

`INNER JOIN`但是考虑一下如果你想做一个然后再去`OUTER JOIN`另一个表，你的语法会是什么样子。

遵循`INNER JOIN`语法更加一致，因此如果您以后需要修改 SQL，则更容易做到。此外，一致性可以让其他人更好地了解您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:03:44.637

`join`第一种是写内连接的老方法，第二种是在命令添加到 SQL之后的写法。

只要两种方式都接受，结果完全没有区别。两个查询的执行计划将是相同的。

编写联接的旧方法正在逐步淘汰，并且在 SQL Server 的更高版本中的某些模式下可能会被禁止。它不在 SQL Server 2008 中。

# iphone - 有没有办法获取应用程序图标徽章编号？

> ID：12029951
> 
> 赞同：12
> 
> 时间：2012-08-19T20:58:42.873
> 
> 标签：iphone, ios, notifications

虽然无法访问通知 - 只是为了确保有什么方法可以获取应用程序图标徽章编号？

设置是这样的

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:n]; 
```

我只需要一个`getApplicationIconBadgeNumber`- 真的无法从应用程序内访问当前号码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-19T21:10:30.273

只需使用 UIApplication 的 applicationIconBadgeNumber 属性。

getter 与属性名称相同，而 setter 具有前缀“set”。

# php - JSON日期说明

> ID：12029955
> 
> 赞同：1
> 
> 时间：2012-08-19T20:59:08.960
> 
> 标签：php, objective-c, json, mongodb

所以，我对我正在看的东西有点困惑。我正在使用 PHP 的`json_encode`函数和内置的 MongoDB 东西将 MongoDate 转换为 JSON。结果是在我返回的 JSON 字符串中：

```
"date":{"sec":1344724737,"usec":0}} 
```

我知道这个`sec`值是 UNIX 纪元时间（更准确地说，是从 1970 年 1 月 1 日 00:00:00 UTC 开始的秒数）。但是，我不知道`usec`价值是什么。它是毫秒的无符号整数值吗？我应该`sec`用来获得价值吗？作为记录，我将其转换为`NSDate`iOS 应用程序中的一个。它就是这样工作的，但我只是想更多地了解这些值是什么，以确保我使用的是正确的值（这样一旦它投入生产我就可以在晚上睡觉了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:00:39.167

它是一个对应于微秒数 (μsec) 的整数。您除以 1000000 并将其添加到`sec`值中以获得完整的时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:00:59.680

`usec`表示`µseconds`或微秒。一秒钟有 1,000,000 微秒。

# css - 我需要为每个宽度范围添加媒体查询吗？

> ID：12029957
> 
> 赞同：1
> 
> 时间：2012-08-19T20:59:19.340
> 
> 标签：css, responsive-design, media-queries

我正在阅读一些书籍并尝试创建响应式布局，但仍然不知道如何处理随机窗口大小。我知道设备和屏幕之间存在差异，我只是不明白为什么在调整浏览器窗口大小时无法控制显示。

这是结构问题，错误的css代码还是我忘记了什么？！我需要为可变宽度范围添加媒体查询？

一个例子：我为设备设置了大多数尺寸（1204px、768px 等）工作正常，但可变宽度似乎表现得很奇怪。然后我添加了一个媒体查询，`@media screen and (max-width: 1100px){ ... }`但我仍然遇到 720px 或 620px 等问题。

我[从这里](http://nmsdvid.com/snippets/)使用显示片段。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:09:12.487

愚蠢的我，我刚刚发现我的代码搞砸了：我的媒体查询顺序错误，所以类最终被忽略了。请参考[这个话题](https://stackoverflow.com/questions/8790321/why-do-the-order-of-media-queries-matter-in-css)。

谢谢大家！

# python - wxPython {Mask}中的透明图像

> ID：12029960
> 
> 赞同：1
> 
> 时间：2012-08-19T20:59:52.760
> 
> 标签：python, image, wxpython, transparency

我厌倦了在网上搜索这个，我无法让它工作。我需要将绿色像素变成透明像素，不需要半透明。想知道如何有效地使用面具，但 wx 文档并没有太大帮助......

希望有人能给我小费，问候。

相关代码

```
png = wx.Image('sun2.png', wx.BITMAP_TYPE_PNG).ConvertToBitmap()
#print png.HasMask() fail
png.SetMaskColour((0,255,0))
#mask=wx.Mask(png,wx.Colour(0,255,0))
#png.SetMask(mask)
imge=wx.StaticBitmap(self, -1, png, (10, 5), (png.GetWidth(), png.GetHeight())) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T21:42:45.163

您可以查看[wxpython 文档和演示](http://www.wxpython.org/download.php#stable)。
在演示**面具**中，他们展示了一种使用透明面具的方法：

```
 # Now we'll create a mask in a bit of an easier way, by picking a
    # colour in the image that is to be the transparent colour.
    self.bmp_withcolourmask  = images.TestStar2.GetBitmap()
    mask = wx.Mask(self.bmp_withcolourmask, wx.WHITE)
    self.bmp_withcolourmask.SetMask(mask) 
```

# android - 需要多少视图，因为我有一个显示需要绘图的视图，我还需要surfaceview吗

> ID：12029962
> 
> 赞同：0
> 
> 时间：2012-08-19T20:59:58.750
> 
> 标签：android, view, canvas, surfaceview

我已经使用 a 创建了一个圆圈，但`View`根本没有使用`SurfaceView`。我想创建按钮，当单击显示来自可绘制对象的图像时。但我在网上读到，需要 a`SurfaceView`才能将 UI 元素放置在顶部。这是真的吗，有人可以帮助我吗，因为我对此感到困惑。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:12:58.323

目前还不是很清楚你想要做什么，但是如果你想在不使用 SurfaceView 的情况下将 UI 元素放在彼此之上，你可以使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)，这种布局允许你在彼此之上拥有视图，你可以有一个例如，带有可绘制对象的[ImageView出现在按钮上。](http://developer.android.com/reference/android/widget/ImageView.html)

如果您只想在单击时更改按钮的背景/src 图像（例如创建单击的 3d 效果），您可以查看[选择器](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)，这些允许您为按下/正常状态指定不同的可绘制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:31:04.620

如果你想在 a 上创建按钮`SurfaceView`，我建议你渲染代表按钮的位图。您必须以编程方式检查触摸坐标是否在该位图的边界内，以注册按钮单击。

我希望这有帮助。

# ios - 从 iOS 中的不同线程调用控制器方法

> ID：12029965
> 
> 赞同：0
> 
> 时间：2012-08-19T21:00:09.003
> 
> 标签：ios, multithreading, controller, dispatch-async

我正在尝试从在不同线程中运行的音乐渲染函数调用此方法。方法在里面`InstrumentGridViewController`。

```
- (IBAction)stopPlayback:(id)sender{
    [self stopToneUnit];
} 
```

这就是我调用该方法的方式：

```
dispatch_async(dispatch_get_main_queue(), ^{ [InstrumentGridViewController stopPlayback: nil]; } ); 
```

但我收到了这个警告：

```
Class method `+stopPlayback` not found (return type defaults to `id`) 
```

当我尝试运行时：

```
erminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[InstrumentGridViewController stopPlayback:]: unrecognized selector sent to class 0x13e50' 
```

我确定该方法在那里，所以我真的不明白为什么会发生这种情况。

**编辑：H2CO3 说我应该在当前运行的实例上调用 stopPlayback 方法。任何想法我怎么能做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:08:28.227

因为该方法是作为实例方法实现的，而不是作为类方法实现的。您必须在InstrumentGridViewController 类的**对象**上调用它，而**不是在类本身上调用它。**

# javascript - 选择中的日期与日期选择器相同

> ID：12029966
> 
> 赞同：1
> 
> 时间：2012-08-19T21:00:15.913
> 
> 标签：javascript, jquery, jquery-ui

我的目标是能够在两个选择中显示与 jquery-ui 的日期选择器中相同的日期。

我基于这个[http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerIntoSelects.html创建了一个](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerIntoSelects.html)[http://jsfiddle.net/grappler/bzPYg/3/](http://jsfiddle.net/grappler/bzPYg/3/)

所以这是我的代码。在原始代码中，如果我在日期选择器中选择一个新日期，则选择按钮中的日期也会发生变化。现在在新设置中，日期没有改变，我不知道如何在一个字段中设置月份和年份。

[小提琴](http://jsfiddle.net/ult_combo/kq5jT/8/)

感谢您为我指明正确方向的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:41:33.903

jQuery datepicker 没有您绑定的旧插件的自定义事件，因此您应该使用 jQuery datepicker 的[`onSelect`](http://jqueryui.com/demos/datepicker/#events)事件`select`根据所选日期更新您的 s。

```
$('#departdate').datepicker({
    //...
    onSelect: function(dateText) {
        updateSelects(dateText);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/kq5jT/15/)

我还对您的函数进行了一些其他修改，最值得注意的是用select 元素中`.attr`的正确替换了您对选项的调用。`.val`两者都有效，但您应该避免使用属性来设置动态属性。

你也可以使用[`.on`](http://api.jquery.com/on/)instead `.bind`，这是自 jQuery 1.7 以来绑定事件处理程序的标准首选方式。

我还稍微修改了您创建[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的方式。

对于月份+年份选择，我将值保持原样并应用一些基本算法进行选择，您也可以在值中将月份与年份连接起来（例如`1-2012`，对于 2012 年 1 月，并用字符串连接替换数学）。

# ruby - 无法“推”到阵列

> ID：12029971
> 
> 赞同：0
> 
> 时间：2012-08-19T21:00:52.957
> 
> 标签：ruby, arrays

我试图将一个元素推到这个数组的末尾，但我得到了一个我不明白的错误。

主.rb：

```
require 'shop.rb'
so = Shop.new()
so.get(2)
so.get(1) 
```

商店.rb

```
class Shop

    def new()
       @products = []
    end

    def get(product)
       @products.push(product)
    end
end 
```

错误：

```
NoMethodError: undefined method `push' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T21:03:25.217

在 Ruby 中，构造函数是`initialize`，而不是`new`。但是你仍然使用`new`来创建一个对象，例如`Checkout.new`.

此外，方法名称后面的括号是可选的，并且在没有参数时通常在 Ruby 中避免使用。

```
def initialize
  @items = []
end 
```

# django - 使用 django inline formset 添加多个文件

> ID：12029975
> 
> 赞同：0
> 
> 时间：2012-08-19T21:01:36.927
> 
> 标签：django, django-forms

我希望能够将多个图像添加到我的 Scribble 模型中。这就是为什么我将 ScribbleMedia 放入一个单独的模型中，以便我可以将它用作外键，然后使用 django Formset 我希望能够将多个文件添加到一个 Scribble 模型中。

到目前为止，我看到的示例可以让我制作多个 Scribble 模型，但我不确定如何将多个 FileFields 添加到一个 Scribble 中。

这是代码：

# 模型.py

```
class Scribble(models.Model):
         body = models.TextField()
         user = models.ForeignKey(User)
         def __unicode__(self):
          return u'%s, %s' % (self.user.username, self.media)

def get_file_path(instance, filename):
      ext = filename.split('.')[-1]
      filename = "%s.%s" % (uuid.uuid4(), ext)
      return os.path.join('scribblemedia/', filename)

class ScribbleMedia(models.Model):
     media = models.FileField(upload_to=get_file_path)
     scribble=models.ForeignKey(Scribble)
     def __unicode__(self):
      return self.media 
```

# 表格.py

```
class ScribbleSaveForm(forms.Form):
    media=forms.FileField(
      label=u'add file',
      required=False,
      widget=forms.FileInput()
    )
    body=forms.CharField(
      label=u'description',
      widget=forms.Textarea()
    ) 
```

# 视图.py

```
def scribbler_save_page(request):
    if request.method == 'POST':
        form = ScribbleSaveForm(request.POST, request.FILES)
        if form.is_valid():
            #Create or get media.
            media, dummy = ScribbleMedia.objects.get_or_create(
                media=form.cleaned_data['media']
            )
            #Create or get media.
            scribble, created=Scribble.objects.get_or_create(
                user=request.user,
                media=media
            )
            #update scribble body
            scribble.body=form.cleaned_data['body']
            # Save scribble to database.
            scribble.save()
            return HttpResponseRedirect ( 
                '/user/%s/' % request.user.username
            )
    else:
        form = ScribbleSaveForm()
    variables = RequestContext (request, { 
        'form': form
    })
    return render_to_response ('scribble_save.html', variables) 
```

# scribble_save.html

```
{% extends "base.html" %}
    {% block title %}Save Scribble {% endblock %}
    {% block head %}Save Scribble {% endblock %}
    {% block content %}
    <form enctype="multipart/form-data" method="post" action=".">
        {{ form.as_p }}
        <input type="submit" value="save" />
        {% csrf_token %}
    </form>
    {% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:22:06.190

首先，你的模型结构是错误的：你所拥有的将允许一个 ScribbleMedia 有多个 Scribbles，这与你想要的相反。将 ForeignKey 移动到 ScribbleMedia 模型，使其指向 Scribble。

其次，正如您所注意到的，这是[内联 formset](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets)的确切用例。您没有确切说明您遇到了什么麻烦，但是文档应该很清楚：您的内联模型只有一个字段（文件字段`media`），因此您不会将多个文件添加到一个 Scribble，您正在向一个 Scribble 添加多个 ScribbleMedias（每个都有一个 FileField）。

# performance - HTML5 画布 - 仅绘制图像差异？

> ID：12029982
> 
> 赞同：0
> 
> 时间：2012-08-19T21:03:01.140
> 
> 标签：performance, html5-canvas, drawimage

我通过 base64 格式的 websocket 接收图像，然后使用以下方法在画布上绘制图像：

```
var img=new Image();
img.onload = function() {
    cxt.drawImage(img, 0, 0, canvas.width, canvas.height);
};

img.src = "data:image/jpeg;base64,"+imgData; 
```

是否可以更改此代码并以某种方式仅绘制已更改的像素？如果可能的话，这甚至会提高性能吗？谢谢您的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:20:39.483

首先更有效的是仅在图像之间发送/接收图像增量（发生了变化），然后将其绘制在画布上。

# java - 在android中每小时触发一个事件

> ID：12029984
> 
> 赞同：0
> 
> 时间：2012-08-19T21:03:06.967
> 
> 标签：java, android, unix

我正在通过 android 线程中的 TX 和 Rx 进行测量。我如何每小时将 Max 放入数据库中。例如线程每秒计算吞吐量并将其保存在变量中。随着时间的流逝，它将最大值保存在数据库表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:39:13.253

使用系统的[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)功能设置重复的每小时事件，并且根据您的应用程序设计，您的接收器应该告诉应用程序将数据写入数据库或自行完成。

# ios - 使用多个 Apple ID 进行开发时的提示和问题

> ID：12029986
> 
> 赞同：1
> 
> 时间：2012-08-19T21:03:17.410
> 
> 标签：ios, xcode, app-store

当客户向我们发送他们的苹果登录信息时，我负责开发应用程序并将其提交到应用程序商店。就开发应用程序而言，一切正常（我还没有提交任何应用程序），但在下周我将需要提交至少三个，它们都具有不同的 Apple ID。

我已经从钥匙串中删除了 Xcode 密码，并将我的证书同步到我拥有的第二个 Apple ID。哦，天哪，它把我的钥匙和个人资料弄得一团糟。当我使用自己的 Apple Id (Xcode 3) 执行此操作时，我必须手动完成整个操作，并且可以按照我的意愿命名键等。我输入了第二个 Apple ID（Xcode 4），现在 Xcode 想要为我管理一切。我喜欢这个，但它用一些愚蠢的名字创建了密钥和配置文件。这让我很难用一个或另一个签署应用程序，也很难备份一个客户的密钥，而不是将它们与我的混淆。我害怕输入第三个 Apple ID，因为我知道这将无法处理。

我愿意接受提示，在使用多个 Apple ID 时要注意的问题，这样我就可以知道“它是如何完成的”。还有，我在提交过程中可能遇到的任何其他事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:14:52.513

如果您在 OS X 上为每个客户端使用单独的用户帐户，这会容易得多。

如果您对所有事情都使用一个共享帐户，那么如果您只有一个开发人员密钥并为每个应用程序使用单独的捆绑包 ID，则不应该有任何冲突。签名从捆绑 ID 反向进行 - 从捆绑 ID 找到正确的配置文件，并从配置文件找到正确的分发密钥。

# .htaccess - mod_rewrite 遇到很多麻烦

> ID：12029989
> 
> 赞同：0
> 
> 时间：2012-08-19T21:03:35.973
> 
> 标签：.htaccess, mod-rewrite

我的`.htaccess`文件有一些问题。

我想显示这个 URL 的内容：

```
http://mywebsite.com/admin/payments/invoices/view/index.php?id=123456 
```

当我访问这个时：

```
http://mywebsite.com/admin/payments/invoices/view/123456/ 
```

这是我的实际 .htaccess

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /admin/payments/invoices/
RewriteRule ^/view/([0-9]+)/(index.php)?$ /view/index.php?id=$1 [L,QSA] 
```

你有什么主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:42:00.270

如果您确实有该`view`目录，那么最简单的方法是将其放在该`.htaccess` *目录中*（即`{DOCUMENT_ROOT}/admin/payments/invoices/view/.htaccess`）：

```
Options +FollowSymlinks
RewriteEngine On

RewriteBase /admin/payments/invoices/view
RewriteRule ^(\d+)$  index.php?id=$1 [L,QSA] 
```

左侧的 index.php`RewriteRule`不是必需的（实际上，我希望它不起作用：`DirectoryIndex`在这个阶段不应该在 URI 中注入 - 除非其他一些`RewriteRule`有效？），也不是/ 结尾`RewriteBase`。

我在 Apache/2.2.21 上测试了上面的，但是以后的版本模块规则是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:12:23.730

试试这个：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteRule ^.*admin/payments/invoices/view/index\.php\?id=([0-9]+) admin/payments/invoices/view/$1/index.php [L]

</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T22:12:42.743

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (^|&)id=([0-9]+)
RewriteRule ^admin/payments/invoices/view/index\.php$ /admin/payments/invoices/view/%1/index.php [L] 
```

因此，当您`http://mywebsite.com/admin/payments/invoices/view/index.php?id=123456`在浏览器的 URL 地址栏中输入时，您将在`/admin/payments/invoices/view/123456/index.php`. [由于完全不清楚您真正想要什么](https://stackoverflow.com/a/11711948/851273)，以防万一您想要相反：

```
RewriteEngine On
RewriteRule ^admin/payments/invoices/view/([0-9]+)/(index.php)?$ /admin/payments/invoices/view/index.php?id=$1 [L,QSA] 
```

# spring - requestfactory 抱怨 find 方法

> ID：12029992
> 
> 赞同：0
> 
> 时间：2012-08-19T21:03:50.553
> 
> 标签：spring, gwt, requestfactory

我有一个带有服务和 dao 层的 spring (3.1) 应用程序。我尝试在这个弹簧层中使用 requestfactory (gwt 2.4)。

这是我的一些课

我的域类

```
public class Account {
  Long id;
  String username;
  // get, set
} 
```

spring和gwt之间的桥梁

```
public class SpringServiceLocator implements ServiceLocator {

    @Override
    public Object getInstance(Class<?> clazz) {
        HttpServletRequest request = RequestFactoryServlet.getThreadLocalRequest();
        ServletContext servletContext = request.getSession().getServletContext();
        ApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(servletContext);
        return context.getBean(clazz);
    }
} 
```

我的帐户代理

```
@ProxyFor(value=Account.class, locator = AccountLocator.class)
public interface AccountProxy extends EntityProxy{
    public Long getId();
    public String getUsername();

    public void setUsername(String userName);
    public void setId(Long id);    
} 
```

请求上下文类

```
@Service(locator = SpringServiceLocator.class, value =AccountService.class)
public interface AccountRequest extends RequestContext {
    Request<List<AccountProxy>> loadAllAccounts();
} 
```

我的 requestFactory 类

```
public interface AccountRequestFactory extends RequestFactory {
    AccountRequest accountRequest();
} 
```

我的春季服务

```
public interface AccountService {
    public List<Account> loadAllAccounts();
}

@Service
public class AccountServiceImpl implements AccountService{
    @Autowired
    private AccountDAO accountDAO;
} 
```

避免在实体中放置方法的帐户定位器

```
public class AccountLocator extends Locator<Account, Long> {

    @Autowired
    private AccountDAO accountDAO;

    @Override
    public Account create(Class<? extends Account> clazz) {
       return new Account();

    }
} 
```

应用程序上下文.xml

```
<context:annotation-config />
<context:component-scan base-package="com.calibra" />
<bean id="accountService" class="org.calibra.server.service.AccountServiceImpl"/>
<bean id="accountDAO" class="org.calibra.server.dao.AccountDAOImpl"/> 
```

演示工作，但我收到此错误：

***com.google.web.bindery.requestfactory.server.UnexpectedException：找不到具有单个键类型参数的静态方法***

同样在我的 AccountProxy 上，我收到此投诉（警告）

***域类型 org.calibra.domain.Account 没有 Account findAccount(java.lang.Long) 方法。尝试将 AccountProxy 发送到服务器将导致服务器错误。***

我不想在我的域类中添加查找方法。我试图把这个方法放在我的 spring 服务中，但我得到了同样的警告。

使用可以正常工作的定位器进行编辑

奇怪的是我需要将bean放在applicationContext中，context：annotation和context：component-scan似乎没用

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:43:08.630

> 域类型 org.calibra.domain.Account 没有 Account findAccount(java.lang.Long) 方法。

如果您不提供某种类型的查找方法，RequestFactory 将无法在对象到达服务器时对其进行重构——它只能创建全新的对象，这会阻止它与现有数据合并。把它拿走，你还不如重新拥有 RPC。

如果您不想要静态方法，请提供一个`Locator`能够找到对象的实例。来自[https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#locators](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory#locators)：

> 如果您不想在实体本身中实现持久性代码怎么办？要实现所需的实体定位器方法，请创建一个扩展 Locator 的实体定位器类：

```
public class EmployeeLocator extends Locator<Employee, Long> {
  @Override
  public Employee create(Class<? extends Employee> clazz)
  {
    return new Employee();
  }
  ...
} 
```

> 然后将其与@ProxyFor 注解中的实体关联：

```
@ProxyFor(value = Employee.class, locator = EmployeeLocator.class)
public interface EmployeeProxy extends EntityProxy {
  ...
} 
```

您将需要实现所有方法，而不仅仅是创建 - 您感兴趣的主要方法是`find(Class, Long)`. 可以`Locator`为所有代理使用一种类型 - 从 2.4.0 和 2.5.0-rc1 开始，无法实现是安全的`getDomainType()`，并且所有其他需要知道确切类型的方法都提供为一个论点。

这是一个使用 JPA 和 Guice 的示例，但我认为这个想法很清楚，可以使用 Spring 和您使用的任何持久性机制来实现。在这里，所有实体都应该实现 HasVersionAndId，允许定位器概括如何调用 getVersion 和 getId - 您可能对所有持久化实体都有自己的基类。

（来自[https://github.com/niloc132/tvguide-sample-parent/blob/master/tvguide-client/src/main/java/com/acme/gwt/server/InjectingLocator.java](https://github.com/niloc132/tvguide-sample-parent/blob/master/tvguide-client/src/main/java/com/acme/gwt/server/InjectingLocator.java)）

```
public class InjectingLocator<T extends HasVersionAndId> extends Locator<T, Long> {
  @Inject
  Provider<EntityManager> data;

  @Inject
  Injector injector;

  @Override
  public T create(Class<? extends T> clazz) {
    return injector.getInstance(clazz);
  }

  @Override
  public T find(Class<? extends T> clazz, Long id) {
    return data.get().find(clazz, id);
  }

  @Override
  public Class<T> getDomainType() {
    throw new UnsupportedOperationException();//unused
  }

  @Override
  public Long getId(T domainObject) {
    return domainObject.getId();
  }

  @Override
  public Class<Long> getIdType() {
    return Long.class;
  }

  @Override
  public Object getVersion(T domainObject) {
    return domainObject.getVersion();
  }
} 
```

# vb.net - 仅当在另一个双引号内时才删除双引号（VB.NET）

> ID：12029993
> 
> 赞同：0
> 
> 时间：2012-08-19T21:04:02.153
> 
> 标签：vb.net, string, parsing, json.net, double-quotes

我正在使用库**JSON.NET**从网络中获取 JSON 字符串，但问题是我在字符串中得到了双引号。

来自网络的字符串如下

{"accionObjeto":"post","accionTipo":"commentario","ts":"02:48:55","nick":"seba123neo","userId":"1180918","id":15521634 ,"accion_name":"Hola","url":"", **"titulo":"Hola como" estas"** }

字符串是完美的，除了结尾

这是问题所在

"titulo":"Hola **como"** estas"

我必须删除那个双引号，否则 JSON 是“无效的”

我到处寻找，但找不到如何做到这一点，我只需要删除双引号，而不是删除整个字符串中的所有其他引号。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:47:30.293

从您的问题中不清楚您是生成 JSON 字符串还是从 Web 下载它。如果您正在创建它并且库没有正确转义字符串，请考虑自己转义它们。

这是有效转义的列表

```
\b 退格（ascii 代码 08）
\f 换页（ascii 代码 0C）
\n 换行
\r 回车
\t 制表符
\v 垂直制表符
\' 撇号或单引号
\" 双引号
\\ 反斜杠字符

```

如您所见，您必须通过 . 转义双引号`\"`。在您自己编写代码之前，请仔细查看您正在使用的库。如果它没有提供这样的功能，我会感到惊讶。

# shell - 如何从 shell 脚本中的文件中读取包含星号的字符串？

> ID：12029994
> 
> 赞同：2
> 
> 时间：2012-08-19T21:04:01.763
> 
> 标签：shell

我有一个包含多行的文件，如下所示

```
source destination pattern 
```

模式也可能有 *.*

当我将此模式读入变量 PATTERN 时

```
cat $FILE_NAME|while read item
do
    arr=($item)
    PATTERN="${arr[2]}"
    echo "$PATTERN"
    done 
```

然后输出是工作目录中的一些文件。如何将“*.*”存储在 PATTERN 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:07:09.817

首先要以正确的方式进行。

```
while read -a arr
do
    PATTERN="${arr[2]}"
    echo "$PATTERN"
done < "$FILE_NAME" 
```