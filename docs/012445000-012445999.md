# StackOverflow 问答 12445000-12445999

# php - php自动加载器是如何工作的

> ID：12445006
> 
> 赞同：15
> 
> 时间：2012-09-16T06:57:22.290
> 
> 标签：php, loader, autoloader

php 类 Autoloader 是否打开文件并检查类名？我一直在研究它是如何实际实施的。我知道它是递归的一件事？如果我错了，请告诉我

如上所述：[自动加载器简要](http://php-autoloader.malkusch.de/en/)概述 PHP 自动加载器的工作原理

> PHP 自动加载器在定义的目录中递归搜索类、特征和接口定义。无需任何进一步配置，所需文件所在的目录将用作默认类路径。
> 
> 文件名不需要遵守任何约定。搜索所有文件以查找类定义。与类名相似或以 .php 或 .inc 结尾的文件是首选。如果支持，PHP Tokenizer 将用于可靠的类定义发现。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-16T08:00:06.890

PHP 自动加载器只是一种在**构造类**时**包含文件**的机制。

 **如果你把所有的类放在一个文件中，你就不需要自动加载器。当然，在编程 OO 时，您要为每个类提供自己的文件，这就是自动加载器的用武之地。

一些例子：

```
class AutoLoader
{  
  public function __construct()
  {
    spl_autoload_register( array( $this, 'ClassLoader' ));
  }

  public function ClassLoader( $class )
  {    
    if( class_exists( $class, false ))
      return true;

    if( is_readable( 'path_to_my_classes/' . $class . '.php' ))
          include_once 'path_to_my_classes/' . $class . '.php'
  }
}

$autoloader = new AutoLoader(); 
```

这里发生的是，当创建自动加载器类时，类方法 Classloader 被注册为自动加载器。

创建新类时，Classloader 方法首先检查该类的文件是否已加载。如果不是，则该类将附加路径并使用扩展名进行扩展。如果文件是可读的，则包含它。

当然，您可以使这个非常复杂。让我们看一个带有命名空间和映射器的示例。假设我们在自动加载器类中：

```
 private $mapper array( 'Foo' => 'path_to_foo_files/', 'Bar' => 'path_to_bar_files/');

  public function ClassLoader( $class )
  {    
    if( class_exists( $class, false ))
      return true;

    // break into single namespace and class name
    $classparts = explode( '\\', $class ); 
    $path = $this->mapper[$classparts[0]];

    if( is_readable( $path . $classparts[1] . '.php' ))
          include_once $path . $classparts[1] . '.php'
  } 
```

在这里，类名分为命名空间部分和类名部分。命名空间部分在映射器数组中查找，然后将该路径用作 php 文件的包含路径。

这些只是演示自动加载器可以做什么的示例。对于生产，还有一些工作要做，例如错误检查。**

# android - SQLite 游标中 moveToFirst() 的用途是什么

> ID：12445010
> 
> 赞同：23
> 
> 时间：2012-09-16T06:58:24.233
> 
> 标签：android, sqlite, database-cursor

我是一个编程新手，我在互联网上找到了这段代码，它工作正常

```
Cursor c=db.query(DataBase.TB_NAME, new String[] {DataBase.KEY_ROWID,DataBase.KEY_RATE}, DataBase.KEY_ROWID+"= 1", null, null, null, null);
        if(c!=null)
        {
            c.moveToFirst();
        } 
```

但我无法理解

```
if(c!=null)
    {
        c.moveToFirst();
    } 
```

部分。它究竟做了什么，如果我删除

```
if(c!=null) { c.moveToFirst(); } 
```

部分，代码不起作用。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-16T07:03:14.100

[SQLiteDatabase.query()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)的文档说查询方法返回：

“一个光标对象，位于第一个条目之前。”

调用`moveToFirst()`有两件事：它允许您测试查询是否返回了一个空集（通过测试返回值）并将光标移动到第一个结果（当集合不为空时）。请注意，为了防止返回集为空，您发布的代码应该测试返回值（它没有这样做）。

与对 的调用不同`moveToFirst()`，对 的测试`if(c!=null)`是无用的；`query()`要么返回一个`Cursor`对象，要么抛出异常。它永远不会回来`null`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-03T02:33:41.640

```
if (c.moveToFirst()) {
  while(!c.isAfterLast()) { // If you use c.moveToNext() here, you will bypass the first row, which is WRONG
    ...
    c.moveToNext();
  } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:13:27.820

光标不是查询结果的行。游标是一个可以迭代查询结果行的对象。光标可以移动到每一行。`.moveToFirst()`方法将其移动到结果表的第一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-21T03:21:02.017

moveToFirst() 方法将光标移动到第一行。它允许执行查询是否返回空集的测试。这是其实现的示例，

```
if (cursor.getCount() == 0 || !cursor.moveToFirst()) {

return cursor.getLong(cursor.getColumnIndexOrThrow(ID_COLUMN)); 

cursor.close(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-30T09:16:22.087

macio.Jun 说的是对的！

我们有如下代码：

```
 String sql = "select id,title,url,singer,view,info from cache where id=" + id;
    SQLiteDatabase db = getMaintainer().getReadableDatabase();
    Cursor query = db.rawQuery(sql, null);
    query.moveToFirst(); 
    while(query.moveToNext()){
        DBMusicData entity = new DBMusicData();
        entity.setId(query.getString(query.getColumnIndex(FIELD_ID)));
        entity.setTitle(query.getString(query.getColumnIndex(FIELD_TITLE)));
        entity.setSinger(query.getString(query.getColumnIndex(FIELD_SINGER)));
        entity.setTitlepic(query.getString(query.getColumnIndex(FIELD_PICURL)));
        entity.setInfoUrl(query.getString(query.getColumnIndex(FIELD_INFO)));
        entity.setViews(query.getString(query.getColumnIndex(FIELD_VIEW)));
        Log.w(tag, "cache:"+ entity.toString());
    }
    query.close();
    query=null;
    db.close();
    db=null; 
```

如果缓存表中只有一条记录，**query.moveToFirst();** 将导致没有记录返回。

# php - 是否可以对 SELECT 查询的结果使用 PHP“if”语句来确定是否执行 INSERT 查询会导致意外的数据重叠？

> ID：12445014
> 
> 赞同：5
> 
> 时间：2012-09-16T06:58:54.183
> 
> 标签：php, mysql, sql, database

我是一名学生，这是我第一次编写软件。它是 LAMP 堆栈上的 Web 应用程序，作为该 Web 应用程序的一部分，我编写了以下函数来在创建新用户时与数据库交互：

```
public function CreateUser($username, $password, $email){
  global $DBHandler, $SQLStatement;
  $SQLStatement = $DBHandler->prepare("SELECT id FROM users WHERE username = :username AND verified > 0");
  $SQLStatement->bindParam(':username', $username);
  $SQLStatement->execute();
  $check = $SQLStatement->fetch();
  if ($check['id']){
    return 2;
  }else{
    $SQLStatement = $DBHandler->prepare("SELECT id FROM users WHERE email = :email AND verified > 0");
    $SQLStatement->bindParam(':email', $email);
    $SQLStatement->execute();
    $check = $SQLStatement->fetch();
    if ($check['id']){
      return 3;
    }else{
      /* Edited out code that generates a random verification code, a random salt, and hashes the password. */
      $SQLStatement = $DBHandler->prepare("INSERT INTO users (username, email, passwordhash, salt, verifycode) VALUES (:username, :email, :passwordhash, :salt, :verifycode)");
      $SQLStatement->bindParam(':username', $username);
      $SQLStatement->bindParam(':email', $email);
      $SQLStatement->bindParam(':passwordhash', $passwordhash);
      $SQLStatement->bindParam(':salt', $salt);
      $SQLStatement->bindParam(':verifycode', $verifycode);
      $SQLStatement->execute();
      return 1;
    }
  }
} 
```

$DBHandler 在其他地方作为 PHP 数据对象启动。

它遵循以下基本步骤：

1.  查询数据库以查看是否有人已经验证了具有所需用户名的帐户。
2.  如果用户名可用，请执行另一个查询并对电子邮件进行相同的检查。
3.  如果用户名和电子邮件都可用，则生成验证码、加盐、散列密码、执行第三次查询以将所有内容写入数据库，然后返回 1（表示成功）。

这个想法是，在您的帐户得到验证（已验证 = '1'）之前，不会保留用户名和电子邮件。如果您单击通过电子邮件发送的验证链接，则在其他地方有一个脚本会将您的已验证列更改为“1”。

我的第一个问题是这样的：

人 A 提出了用户名“Lorem”，而人 B 有一个未经验证的帐户，该帐户也提出了用户名“Lorem”。是否可以按以下顺序执行查询？

1.  人员 A 的脚本确定用户名“Lorem”未由经过验证的用户使用
2.  人 B 的脚本使用用户名“Lorem”验证他们的帐户
3.  人员 A 的脚本使用用户名“Lorem”创建其未经验证的帐户

我的第二个问题是：

是否可以将此脚本中的 3 个查询组合成 1 个查询，使用 SQL 而不是 PHP 表示的相同 if/else 逻辑，如果是这样，这会提高性能和/或防止上述情况发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:25:05.340

对于更并发的解决方案，您可以设置`insert`条件：

```
insert  into users 
        (username, email, ...)
select  :username, :email, ...
where   not exists
        (
        select  *
        from    users
        where   verified > 0
                and (username = :username
                     or email = :email)
        ) 
```

这在 MySQL 中仍然不是 100% 安全的，但在实践中应该足够了。

请注意，用户创建中的并发问题是一个奢侈问题。我只是设置了一个和你一样的基本版本，并专注于你网站更有趣的方面！

# php - 查询没有做我想做的事

> ID：12445019
> 
> 赞同：-3
> 
> 时间：2012-09-16T07:00:25.330
> 
> 标签：php, mysql

```
$mpn = $P[0];
$qty = $P[14];
$mysql_connection = mysql_connect('localhost', 'my_db', 'my_pass');
if (!$mysql_connection) {
    die('Could not connect to db: ' . mysql_error());
}
mysql_select_db('my_db', $mysql_connection);
$id = mysql_query("SELECT productid FROM my_table_2 WHERE value = '$mpn'");
if (!$id) { 
    return("XXX-99999");
}
mysql_select_db('my_db', $mysql_connection);
$sku = mysql_query("SELECT productcode FROM my_table WHERE productid = $id");
if (!$sku) { 
    return("XXX-99999");
}
mysql_select_db('my_db', $mysql_connection);
$qty2 = mysql_query("SELECT avail FROM my_table WHERE productcode = '$sku'");
if (!$qty2) { 
    return("XXX-99999");
}
if ($qty2 <1 && $qty >0 && $qty2 != $qty) { 
    return($sku);
}
else {
    return("XXX-99999");
} 
```

我正在尝试匹配产品提要和数据库中的制造商零件号，以完成将缺货产品从主要来源转移到次要来源。这没用。我做错了什么？

对此进行了编辑，以尝试更清楚地解释情况。首先，这是进入一个应用程序，并且是该应用程序使用的一个片段。因此 mysql 而不是 mysqli。第一个查询中的变量 $mpn 来自 $mpn = ($P[0]); 在顶部。它在提要中，而不是在数据库中作为列。第二个查询中的 $sku 来自第一个查询的结果，并且不在数据库中作为列。应用程序为提要的每一行循环此代码。

尽管我肯定知道它应该（我设置它），但上述内容未能达到提供最后一个参数的预期效果。鉴于新的解释，有人可以帮忙吗？

```
$mpn = ($P[0]);
$qty = ($P[14]);

$mysql_connection = mysql_connect('localhost', 'user', 'pass' );
if (!$mysql_connection) {
die('Could not connect to db: ' . mysql_error());
}

mysql_select_db('db', $mysql_connection);

$tmp1 = mysql_query("SELECT productcode FROM table1 WHERE mpn != '' && mpn = '$mpn'")or die(mysql_error());
$row1 = mysql_fetch_array($tmp1, MYSQL_BOTH);
$sku = $row1[0];

$tmp2 = mysql_query("SELECT avail FROM table1 WHERE productcode = '$sku'")or die(mysql_error());
$row2 = mysql_fetch_array($tmp2, MYSQL_NUM);
$qty2 = $row2[0];

if ($qty2 <=0 && $qty >0) { 
return($sku);
}
else {
return("XXX-99999");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:27:04.577

您必须在`mysql_query`使用`mysql_fetch_array`. 获取分配`$row1 = mysql_fetch_array($id);`后，您可以调用行和列名称`$row1['productid'];`。您也不需要在每次调用之前打开分配数据库。您只能在运行查询之前执行一次，然后运行`mysql_close($mysql_connection)`

```
$mpn = $P[0];
$qty = $P[14];
$mysql_connection = mysql_connect('localhost', 'my_db', 'my_pass');
if (!$mysql_connection) {
die('Could not connect to db: ' . mysql_error());
}

mysql_select_db('my_db', $mysql_connection);    

$id = mysql_query("SELECT productid FROM my_table_2 WHERE value = '$mpn'");
$row1 = mysql_fetch_array($id);
if (!$id) { return("XXX-99999");
}

$sku = mysql_query("SELECT productcode FROM my_table WHERE productid = $row1['productid']");
$row2 = mysql_fetch_array($sku);
if (!$sku) { return("XXX-99999");
}

$qty2 = mysql_query("SELECT avail FROM my_table WHERE productcode = '$row2['productcode']'");
$row3 = mysql_fetch_array($qty2);
if (!$qty2) { return("XXX-99999");
}
if ($row3['avail'] <1 && $qty >0 && $row3['avail'] != $qty) { return($row['productcode']);
}
else {return("XXX-99999");
}
mysql_close($mysql_connection); 
```

这应该或多或少地给你一个想法。用作参考：[http ://www.php.net/manual/en/function.mysql-connect.php](http://www.php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:26:46.433

这里：

```
$sku = mysql_query("SELECT productcode FROM my_table WHERE productid = $id"); 
```

我认为它应该看起来像：

```
$sku = mysql_query("SELECT productcode FROM my_table WHERE productid = '$id' "); 
```

# javascript - JavaScript window.find 绝对不能正常工作

> ID：12445020
> 
> 赞同：2
> 
> 时间：2012-09-16T07:00:29.827
> 
> 标签：javascript, find

当我尝试传递分布在几个块元素中的文本时，window.find 方法会起作用：

**HTML**：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
</head>
<body>
  <p>search me</p><b> I could be the answer</b>
</body>
</html> 
```

**JavaScript**：

```
window.find("meI could be"); 
```

或者：

```
str = "me";
str+= "\n";
str+="I could be t";

window.find(str); 
```

当`<p>`元素存在于搜索词之间时，就会发生这种情况。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:08:49.943

# oracle - Oracle Forms 中的表单设计器、表单生成器和表单运行时是什么？

> ID：12445021
> 
> 赞同：0
> 
> 时间：2012-09-16T07:00:44.807
> 
> 标签：oracle, runtime, oracleforms, form-designer, form-generator

我对以下与 Oracle Forms 相关的主题有点困惑

1.  表单设计器
2.  表单生成器
3.  表单运行时或运行表单

表单设计器：表单设计器为开发人员提供设计时服务和工具来设计表单。设计器宿主与设计时环境一起管理设计器状态、活动（例如事务）和组件。此外，还有一些与组件本身相关的概念对于理解很重要。

现在我正在寻找表单生成器和表单运行时的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:48:13.033

根据我对 Oracle Forms 的基本了解，Form Generator 是将“源表单”（*.fmb）转换为“可执行文件”（* .fmx）的编译器，“Forms Runtime”解释 *.fmx 并显示数据（Form创建）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:53:25.467

表单设计器是 Oracle Forms 工具开发环境的旧名称。它允许开发人员设计图形用户界面以连接到数据库表以执行诸如插入、更新和删除记录等操作。

一旦设计了表单，就可以使用表单生成器将表单二进制设计文件（.fmb 文件）转换为可执行的 .fmx 文件。然后由 Forms 运行时引擎在 Forms 版本 4.5 和 6 中运行。从 Oracle Form 版本 9 - 11g 开始，.fmx 文件在应用服务器上的 Web 上运行，而不是通过 Forms 运行时。

# c# - 如何使用 mvvm 模式在 wpf 中创建按钮矩阵

> ID：12445025
> 
> 赞同：0
> 
> 时间：2012-09-16T07:02:14.630
> 
> 标签：c#, .net, wpf, mvvm, datagrid

我需要创建一个看起来像矩阵的数据网格，
矩阵显示每天及其 24 小时的按钮。
类似于：
7 6 5 4 3 2 1
0
1
。
.
23
我正在使用 MVVM 模式，这似乎使它更难实现，
谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:18:44.683

像这样的东西：

```
<ItemsControl ItemsSource="{Binding DaysOfWeek}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Rows="1"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding HoursInDay}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="1"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这假设您在数据上下文中调用了一个集合`DaysOfWeek`（即在您的主视图模型中）。每个`DayOfWeek`对象都会公开一个`HoursInDay`集合（可能是同一个共享集合）。

说了这么多，数据驱动的优势是什么？您的矩阵可能会改变尺寸吗？如果不是，为什么不在您的观点中“硬编码”矩阵？每个矩阵单元仍然可以绑定到视图模型中的适当数据项。

# java - 在数据库的单列中存储各种对象类型

> ID：12445029
> 
> 赞同：1
> 
> 时间：2012-09-16T07:03:13.567
> 
> 标签：java, database, serialization

我在 Java 中工作。我有一个名为 Command 的课程。这个对象类存储一个变量列表，这些参数是原始的（主要是 int 和 double）。参数的类型、数量和顺序特定于每个命令，因此 List 是 Object 类型。我永远不会根据这些参数值查询表，所以我想我会将它们连接成一个字符串或以某种方式序列化它们。我认为这可能是规范化表的更好方法，因为我每次都必须加入，并且该表会很快变大。（编辑：Command 对象还存储了一些其他不会被序列化的成员，例如用于标识命令类型的字符串，以及发出命令的时间戳。）

所以我有两个问题：我应该把它们变成一个分隔的字符串吗？如果是这样，我如何在不知道将它们转换为哪种类型的情况下将每个对象作为字符串获取？我试图循环并使用 .toString 方法，但这不起作用。它似乎返回null。

或者有什么方法可以将数组的数据序列化到数据库的一列中？我读到了序列化，它似乎是针对序列化整个类的上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:16:39.043

我会使用 JSON 序列化器和像[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes#Data_Binding_with_Generics)这样的反序列化器在 DB 中存储和检索这些命令对象，而不会丢失特定的类型信息。附带说明一下，我会让这些命令实现一个通用接口，并将它们存储在命令列表中，而不是对象列表中。

# javascript - 提交后服装重定向

> ID：12445033
> 
> 赞同：0
> 
> 时间：2012-09-16T07:04:08.283
> 
> 标签：javascript, html, forms, redirect

我有这个表格： http: [//lawb.co.il/HTMLPage.html](http://lawb.co.il/HTMLPage.html)

当有人点击提交按钮（“שלח טופס”）时，他们会被自动重定向。

单击“שלח טופס”按钮后，如何防止此操作，或者该页面将重定向到我选择的页面，但我仍然会获得人们填写表格的信息？

代码在这里[http://jsfiddle.net/TCpkb/4/](http://jsfiddle.net/TCpkb/4/)

你能帮我解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:09:41.360

您需要使用 AJAX 提交，然后手动重定向到您的自定义页面。如果您不能使用 JavaScript，那么如果您让用户直接提交 HTML 表单，那么很遗憾无法控制重定向。

# jquery - 更改 iframe src

> ID：12445034
> 
> 赞同：0
> 
> 时间：2012-09-16T07:04:11.023
> 
> 标签：jquery, youtube

我在我的页面中嵌入了一个 youtube 视频。当我单击链接时，我需要更改视频。我所做的是我使用 jquery 更改了 iframe 的 src。src 正在改变，但视频没有出现。这是最好的方法吗？

```
<script>
 $(document).ready(function(){

 $("#clickme").click(function(){

 alert("hi");
 $("#myPlayer").attr('src','http://www.youtube.com/watch?v=M73UUllE39w&feature=g-vrec');

 });

 });

 </script>

 </head>
  <body>

 <iframe id="myPlayer" width="560" height="315" src="http://www.youtube.com/embed/ojQyhk5knx4" frameborder="0" allowfullscreen></iframe>

 <a href="#" id="clickme"> Click to change video</a> 
```

有人能告诉我我在这做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:09:05.493

如果您检查 YouTube EMBED 代码，他们的 URL 采用以下格式：[http ://www.youtube.com/embed/Th3STX3gKX0](http://www.youtube.com/embed/Th3STX3gKX0)

您很可能需要遵循此原则，而不是导航到 YouTube 视频本身。

# java - 如何将值从弹出窗口保存到网格

> ID：12445035
> 
> 赞同：0
> 
> 时间：2012-09-16T07:04:25.723
> 
> 标签：java, jquery, ajax, jquery-ui

我有一个要求，我必须将值从弹出窗口保存到网格表，即单元格 id。我怎样才能使用 Jquery 实现它还有其他选择吗？有人可以用一个例子发布答案吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:13:43.053

```
> <div id="yourPopup"> 
> <span class="someClass">Your value</span> 
> </div>
> $('#yourPopup').find('.someClass').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:45:31.393

不知道你是否可以使用它，但是，每次我需要使用网格时，我都会使用[jqgrids](http://www.trirand.com/blog/)。该插件具有非常简单的方法。当然，如果你不需要所有其他插件功能，那可能就“太多”了。

# javascript - 谷歌从 getPaths 坐标映射 setPaths

> ID：12445039
> 
> 赞同：2
> 
> 时间：2012-09-16T07:05:13.237
> 
> 标签：javascript, google-maps

我正在尝试获取多边形的路径，然后将它们设置为另一个类似的多边形。

```
newpoly = new google.maps.Polygon({
                paths:poly.getPaths()
            }); 
```

这不是假设工作吗？它在控制台中给了我这个错误。

**构造函数参数 0 的值无效：[object Object]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:25:57.620

如果您可以显示 poly 对象的代码并且 poly.getPaths() 返回任何内容，这将有所帮助。我只能建议 si 像这样详细调试它：

1.  如果您评论 path:poly:Paths(); 是否有任何错误？
2.  Console.log(poly); 返回谷歌地图多边形？
3.  Console.log(poly.getPaths()) 返回一个路径数组？
4.  如果是，您可以尝试从 poly.getPaths 创建一个数组，然后将其传递给 newpoly。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:42:46.937

在实例化多边形对象之前尝试添加以下内容

```
var triangleCoords = [
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.75737),
    new google.maps.LatLng(25.774252, -80.190262)
  ]; 
```

现在使用您的代码并替换 poly.getPaths() - 假设您的其余代码有效。

```
newpoly = new google.maps.Polygon({
                paths:triangleCoords //there are probably more method to add here 
            }); 
```

如果它有效，那么您就知道 poly.getPaths() 有问题。将此用作参考[https://developers.google.com/maps/documentation/javascript/overlays#PolygonOptions](https://developers.google.com/maps/documentation/javascript/overlays#PolygonOptions)。

请记住，我们只能使用提供的代码来制定解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T11:50:13.573

以这种方式获取第一个多边形的坐标（假设已经创建了两个多边形）：

```
 //store polygon path
            var vertices = firstPolygon.getPath();
            // Iterate over the vertices.
            pathOfFirstPolygon = [];
            for (var i =0; i < vertices.getLength(); i++) {
                var xy = vertices.getAt(i);
                item = {};
                item["lat"] = xy.lat();
                item["lng"] = xy.lng();
                pathOfFirstPolygon.push(item);
            };

           //Set path of the second polygon
           secondPolygon.setPath(pathOfFirstPolygon); 
```

# python - 如何逐字节十六进制编辑python2中的文件？

> ID：12445043
> 
> 赞同：4
> 
> 时间：2012-09-16T07:05:30.680
> 
> 标签：python, hex

我正在尝试制作一个 python 脚本来编辑我加载的文件的十六进制值，但我被卡住了。如何在 python 中逐字节十六进制编辑文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T07:24:55.093

If the file is very large and you are doing only overwrite operations (no insertions or deletions), the [`mmap`](http://docs.python.org/library/mmap.html) module allows you to treat a file as essentially a large mutable string. This allows you to edit the contents of the file byte-by-byte, or edit whole slices, without actually loading it all into memory (the `mmap` object will lazily load parts of the file into and out of memory as needed).

It's a bit cumbersome to use, but it is extremely powerful when needed.

Example:

```
$ xxd data
0000000: a15e a0fb 4455 1d0f b104 1506 0e88 08d6  .^..DU..........
0000010: 8795 d6da 790d aafe 9d6a 2ce5 f7c3 7c97  ....y....j,...|.
0000020: 4999 ab6b c728 352e b1fd 88e0 6acf 4e7d  I..k.(5.....j.N}
$ python
>>> import mmap
>>> f = open('data', 'a+')
>>> m = mmap.mmap(f.fileno(), 0)
>>> m[24:48]
'\x9dj,\xe5\xf7\xc3|\x97I\x99\xabk\xc7(5.\xb1\xfd\x88\xe0j\xcfN}'
>>> m[24:48] = 'a'*24
>>> m.close()
>>> f.close()
>>> ^D
$ xxd data
0000000: a15e a0fb 4455 1d0f b104 1506 0e88 08d6  .^..DU..........
0000010: 8795 d6da 790d aafe 6161 6161 6161 6161  ....y...aaaaaaaa
0000020: 6161 6161 6161 6161 6161 6161 6161 6161  aaaaaaaaaaaaaaaa 
```

# android - Android 自定义 Drawable 与自定义 View

> ID：12445045
> 
> 赞同：8
> 
> 时间：2012-09-16T07:05:54.527
> 
> 标签：android

我想知道在 Shelves 项目中创建自定义 Drawable 有什么区别：[http](http://code.google.com/p/shelves/) ://code.google.com/p/shelves/创建自定义视图？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T07:24:32.383

`Drawble`仅响应绘制操作，而查看绘制和用户界面的响应，如触摸事件和关闭屏幕等。

视图可以包含许多`Drawbles`.

# regex - Perl：为什么我的正则表达式不匹配

> ID：12445046
> 
> 赞同：4
> 
> 时间：2012-09-16T07:06:06.863
> 
> 标签：regex, perl

我正在尝试使用正则表达式提取字符串的一部分。我有以下字符串案例：

```
case1: Warehouse.13.season01episode01.hdtv.xor.avi
case2: Warehouse.13.s01e01.hdtv.xor.avi
case3: Warehouse.13.01x01.hdtv.xor.avi 
```

上述`delimter(.)`字符串中的 可以替换为`\s - _`。

正在使用的逻辑是检查是否`s or season`按数字预先确定（后视）并提取它之前的所有内容，但由于后视需要绝对长度，我反转了字符串并使用前瞻。

现在对于 case1，我创建了下面的正则表达式，它可以正常工作并输出`Warehouse.13`。

```
.*?\d{1,2}e\d{1,2}s\.(?=\d+)(.*) 
```

现在对于case2，我使用了：

```
.*?\d{1,2}edosipe\d{1,2}nosaes\.(?=\d+)(.*) # works fine. 
```

现在，当我尝试将上述两种情况 + 可选分隔符结合起来时，例如：

```
.*?\d{1,2}[e|edosipe]?[._ x\-]?\d{1,2}[s|nosaes]?[._\- ]?(?=\d+)(.*) 
```

在上述情况下，您可以观察到大多数事情都是可选的（？）。它适用于case3。

使用上面的正则表达式与 case2 不匹配，但对 case1 和 case3 工作正常。

知道这里有什么问题。

PS：我知道可能还有其他可能的字符串会违反上述正则表达式，但目前对它们不感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T07:19:30.837

`[e|edosipe]`and`[s|nosaes]`应该是`(e|edosipe)`and ，`(s|nosaes)`或者如果您不希望正则表达式引擎捕获它们并弄乱您对 , 等的会计处理。`(?:e|edopise)``(?:s|nosaes)``$1``$2`

在这里，`(...)`括号分组很像在 Perl 中的任何其他表达式中所做的。 `[...]`定义一个字符类。具体来说，`[s|nosaes]`匹配单个字符，它是`a`, `e`, `n`, `o`, `s`, 和（可能令人惊讶，但元字符的特殊含义通常在`[...`] 中被忽略）`|`、。

# f# - “mustinline 值......未被推断为具有已知值”和“标记为内联但未在优化环境中绑定”是什么意思？

> ID：12445049
> 
> 赞同：5
> 
> 时间：2012-09-16T07:06:25.087
> 
> 标签：f#, compilation, compiler-errors, inline

我在 Visual Studio 2012 中使用 F# 时遇到了一个我不理解的编译时错误。

我可以在这里找到一个最小的片段：http: [//ideone.com/hbhbF](http://ideone.com/hbhbF)

```
type Foo() =
     inherit System.Exception()
     member inline this.Bar() = ()

Foo().Bar() 
```

以下错误消息是什么意思？

```
/home/iU0RLi/prog.fs(3,22): error FS0073: internal error: the mustinline value 'Bar' was not inferred to have a known value

/home/iU0RLi/prog.fs(5,1): error FS1114: The value 'Prog.Foo.Bar' was marked inline but was not bound in the optimization environment

/home/iU0RLi/prog.fs(3,22): error FS1113: The value 'Bar' was marked inline but its implementation makes use of an internal or private function which is not sufficiently accessible

/home/iU0RLi/prog.fs(5,1): warning FS1116: A value marked as 'inline' has an unexpected value

/home/iU0RLi/prog.fs(5,1): error FS1118: Failed to inline the value 'Bar' marked 'inline', perhaps because a recursive value was marked 'inline' 
```

# javascript - 在 MongoDB 中使用 node-native 进行身份验证

> ID：12445054
> 
> 赞同：0
> 
> 时间：2012-09-16T07:08:10.210
> 
> 标签：javascript, node.js, mongodb, mongohq

我在 Nodejitsu/MongoHQ 应用程序中的 MongoDB 中保存文档时遇到问题。本地一切正常，但 MongoHQ db 需要身份验证，并且它因工作用户/密码而失败（使用相同的凭据连接到 MongoDB shell 工作正常）。这是功能：

```
var update_user = function(user, callback) {

    var client = new Db(db, new Server(host, port, {}));
    var update = function (err, collection) {
        collection.findOne({uid:user.id}, function(err, doc) {
            if (err) { throw err; }
            if (!doc) doc = { uid: user.id }
            doc.img = user.img;
            doc.name = user.name;

            collection.save(doc, {safe: true}, function(err, doc) {
                if (err) { throw err; }
                callback(user);
            });
        });
    };

    client.open(function(err, client) {
        if (err) { throw err; }
        client.authenticate(user, pass, function(err, result) {
            client.collection('users', update);
        });
    });
} 
```

我在这里做错了什么？

UPD：authenticate 方法的 err 参数具有以下值：

```
{ [MongoError: auth fails] name: 'MongoError', errmsg: 'auth fails', ok: 0 } 
```

我再次检查了存储的密码和用户名，它们用于登录 MongoHQ shell。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:26:26.677

如果您的凭据用于管理员用户帐户，则[必须](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-Logginginasanadminuser)在`authenticate`呼叫中定位管理员数据库：

```
client.authenticate(user, pass, {authdb: 'admin'}, function(err, result) {
    client.collection('users', update);
}); 
```

# java - Java中的字符串连接和自动装箱

> ID：12445064
> 
> 赞同：5
> 
> 时间：2012-09-16T07:10:16.787
> 
> 标签：java, concatenation, autoboxing

当您将字符串与 int 等基元连接时，它是否首先**自动装箱**该值。

前任。

```
String string = "Four" + 4; 
```

它如何将值转换为**Java**中的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T07:39:46.940

要查看 Java 编译器生成的内容，使用它`javap -c`来显示生成的实际字节码总是很有用的：

例如下面的 Java 代码：

```
String s1 = "Four" + 4;
int i = 4;
String s2 = "Four" + i; 
```

将产生以下字节码：

```
 0:   ldc     #2; //String Four4
   2:   astore_1
   3:   iconst_4
   4:   istore_2
   5:   new     #3; //class java/lang/StringBuilder
   8:   dup
   9:   invokespecial   #4; //Method java/lang/StringBuilder."<init>":()V
   12:  ldc     #5; //String Four
   14:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/
String;)Ljava/lang/StringBuilder;
   17:  iload_2
   18:  invokevirtual   #7; //Method java/lang/StringBuilder.append:(I)Ljava/lan
g/StringBuilder;
   21:  invokevirtual   #8; //Method java/lang/StringBuilder.toString:()Ljava/la
ng/String;
   24:  astore_3
   25:  return 
```

由此我们可以看出：

*   在 的情况下`"Four" + 4`，Java 编译器（我使用的是 JDK 6）足够聪明地推断出这是一个常量，因此在运行时没有计算工作量，因为字符串在编译时连接
*   In the case of `"Four" + i`, the equivalent code is `new StringBuilder().append("Four").append(i).toString()`
*   Autoboxing is not involved here as there is an [StringBuilder.append(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#append%28int%29) method which according to the docs is using [String.valueOf(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf%28int%29) to create the string representation of the integer.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T07:24:33.633

java 编译器实际上创建一个¹并调用该方法。从字节码中可以看出：[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)^(`append()`)

```
22  invokespecial java.lang.StringBuilder(java.lang.String) [40]
...   
29  invokevirtual java.lang.StringBuilder.append(int) : java.lang.StringBuilder [47]
32  invokevirtual java.lang.StringBuilder.toString() : java.lang.String [51] 
```

尽管如此，该行为与装箱然后调用`toString()`: `"Four" + new Integer(4).toString()`- 我相信语言设计者的想法相同。

* * *

(1) 确切地说，*编译器*已经将字符串文字和 int 文字连接到单个字符串文字`"Four4"`。您可以在字节码中以下行的字节码中看到它：

```
 0  ldc <String "Four4"> [19] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:34:51.730

根据[http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)，只要需要引用类型（例如本例中的 Integer 类），就会对原始类型进行自动装箱

因此 int 将被转换为 Integer，然后调用该整数对象 toString() 方法，并将其结果附加到前面的字符串中。

# asp.net - ASP Entity Framework Fluent API [ForeignKey] 注释错误

> ID：12445065
> 
> 赞同：0
> 
> 时间：2012-09-16T07:10:39.443
> 
> 标签：asp.net, entity-framework

我正在尝试建立一对一的关系，并在将属性声明为 FK 时遇到了一些问题。我已经搜索并阅读了此处发布的一些问题，但没有解决我的问题。

```
public class User
{
    [Key]
    public int userId {get;set;}
    [DisplayName("User Name")]
    [Required(ErrorMessage="User name required.")]
    public string username {get;set;}
    [DisplayName("Password")]
    [Required(ErrorMessage="Password required.")]
    [MinLength(6)]
    public string password {get;set;}
    [DisplayName("Email")]
    [Required(ErrorMessage="Email required.")]
    public string email {get;set;}

    public virtual List<RoleDetail> roleDetails { get; set; }
    public virtual Customer customer { get; set; }
}

public class Customer
{
    [Key]
    public int cusomterId { get; set; }
    [DisplayName("First Name")]
    [Required(ErrorMessage="First name required.")]
    public string firstname {get;set;}
    [DisplayName("Last Name")]
    [Required(ErrorMessage="Last name required.")]
    public string lastname {get;set;}
    [ForeignKey("userId")]
    public int userId {get;set;}
} 
```

使用 [ForeignKey] 注释时出现此错误。我正在使用**System.ComponentModel.DataAnnotations**。此外，[Key] 工作正常。

```
The type or namespace name 'ForeignKeyAttribute' could not be 
found (are you missing a using directive or an assembly reference?) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:42:55.987

更多谷歌搜索后问题解决。原来 [ForeignKey] 注释在**System.ComponentModel.DataAnnotations.Schema**

[VS2012 RC 中无法识别 ForeignKey](https://stackoverflow.com/questions/10893794/foreignkey-not-being-recognised-in-vs2012-rc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:12:14.010

**编辑**

我下面的答案对于 EF < 5.0 是正确的，但对于 EF >= 5.0 是错误的。在这种情况下，@MooCow 的答案是正确的。

* * *

和类都在命名空间中，`[KeyAttribute]`但它们在两个不同的程序集中。`[ForeignKeyAttribute]``System.ComponentModel.DataAnnotations`

`[KeyAttribute]`是在`System.ComponentModel.DataAnnotations.dll`直接属于.NET框架的程序集中。

但是，`[ForeignKeyAttribute]`它在`EntityFramework.dll`作为 EntityFramework NuGet 包一部分的程序集中。

在我看来，这只能意味着您的类所在的项目/程序集没有对`EntityFramework.dll`. 如果您添加此参考，它应该可以工作。

作为旁注：您尝试定义一对一关系的方式将不起作用。您不能使用单独的外键列/属性。您必须将主键本身用作外键（[共享主键关联](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)），如下所示：

```
public class Customer
{
    [Key]
    [ForeignKey("user")]
    public int customerId { get; set; }
    //...
    public User user {get;set;}
} 
```

# iphone - 同步下载程序iOS中的超时间隔？

> ID：12445066
> 
> 赞同：0
> 
> 时间：2012-09-16T07:10:45.063
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nsurlconnectiondelegate

我创建了如下请求，

```
NSURLResponse *response;
NSError *error;

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:JsonURL];
[request setTimeoutInterval:10];

[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

但是这里超时间隔不起作用，我检查了堆栈上的一些问题，有些说默认超时是 75 秒，有些说是 240 秒，我在这里很困惑..

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:49:13.253

您正在使用同步连接。所以不会有**任何**对代表的调用。如果您仍想使用同步 URL 请求，我建议您执行以下操作：

```
[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if (nil == response) {
    if (error)
        NSLog(@"Connection failed! Error - %@ %@",
        [error localizedDescription],
        [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
    }
} 
```

如果要使用委托方法，则必须使用异步请求。

请查看[URL 加载系统编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)。

# bash - sed - 用另一个字符串替换两个字符串之间的字符

> ID：12445067
> 
> 赞同：1
> 
> 时间：2012-09-16T07:11:07.083
> 
> 标签：bash, sed

每当使用 RSS 提要将某些文档上传到 CMS 时，我一直在使用 IFTTT（如果是这样的话）来通知我，但是 CMS 放入 RSS 提要的链接有空格，它会干扰 IFTTT 的自动链接缩短功能. 例如：

```
<div><b>Attachments:</b> <a href="http://blah.com/foo/bar/Important Announcement 5.doc">http://blah.com/foo/bar/Important Announcement 5.doc</a><br><a href=""></a></div> 
```

在 IFTTT 通知中给了我这个：

```
Attachments: http://is.gd/abcdef Announcement 5.doc 
```

我目前使用 bash 脚本重新托管 RSS 提要，因为 IFTTT 无法通过经过身份验证的页面。如何使用 sed 删除这两个字符串之间的空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:48:10.710

也许这样的事情可能会奏效：

```
awk -F '"' '{OFS="'"'"'"; gsub(" ", "%20", $2); print $0}' 
```

# jakarta-ee - Java EE 6 教程中 Duke 的案例研究在哪里？

> ID：12445076
> 
> 赞同：4
> 
> 时间：2012-09-16T07:13:44.463
> 
> 标签：jakarta-ee, java-ee-6

我是 Java EE 的新手，所以阅读 Java EE 6 教程。我想检查完整的应用程序，即教程中提到的 Duke's Bookstore、Tutoring 和 Forest Case Studies。但是我在 glassfish 安装目录中看不到 javaee-tutorial/examples/case-studies 目录。我使用了更新工具并安装了 Java EE 6 教程组件。它下载了除案例研究之外的其他示例。同样，我尝试谷歌搜索，但没有成功。那么这些例子在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:22:21.467

它在教程中。您必须[下载 Java EE6 SDK](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)，然后运行更新中心并下载教程组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T19:07:33.147

如果您已将 glassfish 安装在 windows 的 c 目录中，则它通常位于以下路径C:\glassfish4\docs\javaee-tutorial\examples\case-studies 中。如果没有，您必须从此处的下载中心下载 [http://docs.oracle.com/javaee/7/tutorial/doc/usingexamples001.htm#GEXBA](http://docs.oracle.com/javaee/7/tutorial/doc/usingexamples001.htm#GEXBA)

# html - 网页仅在鼠标移动时加载

> ID：12445080
> 
> 赞同：1
> 
> 时间：2012-09-16T07:14:29.073
> 
> 标签：html, css, joomla, webpage

我遇到了一个问题，即我的网页仅在我移动鼠标时才加载。

我已经加载了一个 joomla 模板。它在 Mozilla Firefox 上加载没有任何问题，但在 IE 中只有当我移动鼠标时页面才会显示。

谁能建议我需要检查的地方和内容？浏览论坛，我看到有一个鼠标跟踪事件或移动。但想了解更多信息。或者，如果有人可以帮助我摆脱它。那会很好

谢谢

埃里克

# c++ - 使用 gcc 为 lua 编译模块

> ID：12445084
> 
> 赞同：1
> 
> 时间：2012-09-16T07:15:08.520
> 
> 标签：c++, c, lua

我有以下用于测试的 C++ 代码：

```
#include <lua.hpp>
#include <iostream>

static int dummy(lua_State * L)
{
   std::cout << "Test";
   return 0;
} 

int luaopen_testlib(lua_State * L)
{
   lua_register(L,"dummy",dummy);
   return 0;
} 
```

我用命令编译它，它没有给我任何错误：

```
g++  -Wextra -O2 -c -o testlib.o main.cpp
g++ -shared -o testlib.so testlib.o 
```

但是当我尝试在 lua 中加载它时，我得到未定义的符号错误，如下所示：

```
Lua 5.1.5  Copyright (C) 1994-2012 Lua.org, PUC-Rio
> require"testlib"
error loading module 'testlib' from file './testlib.so':
./testlib.so: undefined symbol: _Z16lua_pushcclosureP9lua_StatePFiS0_Ei 
```

在我看来，g ++ 命令中缺少一些东西，但我整个上午都在寻找解决方案，无法编译这个简单的示例。

编辑：

经过几次重新编译后，它返回：

```
error loading module 'testlib' from file './testlib.so':
./testlib.so: undefined symbol: luaopen_testlib 
```

这是通过添加解决的：

```
extern "C" 
{
int luaopen_testlib(lua_State *L)
{
  lua_register(L,"dummy",dummy);
  return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-01-11T15:20:17.870

Lua 二进制文件编译为 C 代码，库尝试将其用作 C++。这将不起作用，因为 C++ 确实名称修饰以支持重载。由于 C 不支持重载，它不需要名称重载，也不会理解重载名称。

解决这个问题的方法是告诉 C++ 编译器，它要与之交互的 Lua 函数是纯 C 语言，它们不需要名称修饰。

此外，该`luaopen_testlib`函数必须是`extern "C"`从 C 代码中调用而没有修改的函数。

```
extern "C" {
#include <lua.h>
}
#include <iostream>

static int dummy(lua_State * L)
{
    (void)L;
    std::cout << "Test"<<std::endl;
        return 0;
}

extern "C"
int luaopen_testlib(lua_State * L)
{
    lua_register(L,"dummy",dummy);
        return 0;
} 
```

我使用 Lua 5.4.2 运行测试并使用以下命令构建库：

```
g++ -Wall -Wextra -O2 -Isrc -c -fPIC -o testlib.o testlib.cpp
g++ -shared -o testlib.so testlib.o 
```

请注意，`-Isrc`需要`lua.h`在我的测试设置中找到并且`-fPIC`需要`cout`在库中使用（但这*可能*取决于使用的编译器版本）。

结果是：

```
Lua 5.4.2  Copyright (C) 1994-2020 Lua.org, PUC-Rio
> require 'testlib'
true    ./testlib.so
> dummy
function: 0x7ff07d2a0aa0
> dummy()
Test
> 
```

在这种情况下，使用的 Lua 版本没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T18:31:55.333

尝试使用[Luabind](http://www.rasterbar.com/products/luabind.html)。这是 Hello World 示例

```
#include <iostream>
#include <luabind/luabind.hpp>

void greet()
{
    std::cout << "hello world!\n";
}

extern "C" int init(lua_State* L)
{
    using namespace luabind;

    open(L);

    module(L)
    [
        def("greet", &greet)
    ];

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T14:28:20.873

这就是我编译lua的方式，不完全是gcc，但cmake可以使用gcc。

```
.
├── CMakeList.txt (A)
├── main.cpp
├── lua_535
│   ├── CMakeLists.txt (B)
│   └── * lua_content * 
```

主.cpp | 只是检查它是否有效

```
#include <iostream>
#include <string>

#include "lua.hpp"

int main(){

    lua_State * lua = luaL_newstate();

    std::string str_acction = "a = 5";
    int res = luaL_dostring(lua, str_acction.c_str());
    std::cout << "DS State > " << res << std::endl;

    lua_close(lua);
    return 0;
} 
```

CMakeList.txt (A) | 创建可执行文件并链接库

```
cmake_minimum_required(VERSION 3.12)
project(lua_test)

add_executable(main main.cpp)

add_subdirectory("lua_535")
target_link_libraries(main PUBLIC lua_lib) 
```

CMakeList.txt (B) | 将 Lua 文件加入库中

1.  获取最新的[lua源文件](https://www.lua.org/ftp/)
2.  将内容提取到子文件夹中
3.  将此文件添加到文件夹中

```
cmake_minimum_required(VERSION 3.12)
project( lua_lib )

set ( LUA_EMBEDDED ON )
set ( LUA_RUNTIME_MAIN "src/luac.c" )

set (LUA_RUNTIME_SOURCES
    "src/lapi.c"
    "src/lapi.h"
    "src/lauxlib.c"
    "src/lauxlib.h"
    "src/lbaselib.c"
    "src/lbitlib.c"
    "src/lcode.c"
    "src/lcode.h"
    "src/lcorolib.c"
    "src/lctype.c"
    "src/lctype.h"
    "src/ldblib.c"
    "src/ldebug.c"
    "src/ldebug.h"
    "src/ldo.c"
    "src/ldo.h"
    "src/ldump.c"
    "src/lfunc.c"
    "src/lfunc.h"
    "src/lgc.c"
    "src/lgc.h"
    "src/linit.c"
    "src/liolib.c"
    "src/llex.c"
    "src/llex.h"
    "src/llimits.h"
    "src/lmathlib.c"
    "src/lmem.c"
    "src/lmem.h"
    "src/loadlib.c"
    "src/lobject.c"
    "src/lobject.h"
    "src/lopcodes.c"
    "src/lopcodes.h"
    "src/loslib.c"
    "src/lparser.c"
    "src/lparser.h"
    "src/lprefix.h"
    "src/lstate.c"
    "src/lstate.h"
    "src/lstring.c"
    "src/lstring.h"
    "src/lstrlib.c"
    "src/ltable.c"
    "src/ltable.h"
    "src/ltablib.c"
    "src/ltm.c"
    "src/ltm.h"
    "src/lua.c"
    "src/lua.h"
    "src/lua.hpp"
    "src/luaconf.h"
    "src/lualib.h"
    "src/lundump.c"
    "src/lundump.h"
    "src/lutf8lib.c"
    "src/lvm.c"
    "src/lvm.h"
    "src/lzio.c"
    "src/lzio.h"
)

add_library( lua_lib "${LUA_RUNTIME_SOURCES}" )

if( NOT LUA_EMBEDDED)
    add_library( lua_lib "${LUA_RUNTIME_MAIN}")
endif()

target_include_directories ( lua_lib PUBLIC "${PROJECT_SOURCE_DIR}/src") 
```

如果 lua 被嵌入`src/luac.c`应该被排除，因为包含一个`int main(){}`

# php - 如何使用 PHP 和 AJAX 使用 Twitter 登录

> ID：12445085
> 
> 赞同：0
> 
> 时间：2012-09-16T07:15:21.597
> 
> 标签：php, jquery, ajax

我正在使用 twitteroauth.php 使用 twitter api 向我的网站添加登录功能。

它工作正常。但我想使用 jQuery 和 AJAX 来实现相同的功能，这样页面就不会在返回时刷新。

以下是我的一段代码

```
<?php
require("twitter/twitteroauth.php");
require 'config/twconfig.php';
session_start();

$twitteroauth = new TwitterOAuth(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET);
// Requesting authentication tokens, the parameter is the URL we will be redirected to
$request_token = $twitteroauth->getRequestToken('http://list.2lessons.com/fbtwLogin/getTwitterData.php');

// Saving them into the session

$_SESSION['oauth_token'] = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];

// If everything goes well..
if ($twitteroauth->http_code == 200) {
    // Let's generate the URL and redirect
    $url = $twitteroauth->getAuthorizeURL($request_token['oauth_token']);
    header('Location: ' . $url);
} else {
    // It's a bad idea to kill the script, but we've got to know when there's an error.
    die('Something wrong happened.');
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:12:22.047

我正在寻找类似于用于 Twitter 登录的 Facebook JS SDK 的东西。Facebook JS SDK 登录时不刷新页面。我使用 JS Popup 窗口制作了自己的。它实际上没有使用 AJAX。

一个。您需要一个链接来触发弹出窗口：

<a href="#" onclick="window.open('http://localhost.com/twitter_login.php', 'Twitter', 'width=640,height=480');">登录 Twitter</一个>

湾。用于 Twitter 登录（您在上面提交的代码）和回调（用户登录后登陆的位置）的 PHP 脚本。

回调应如下所示：

```
<?php 
// In php part you should store information about login (AccessToken, User info, and anything else you want) into DB

?>
<html>
<head><title></title></head>
<body>
<!-- In html part I let user know that he/she has been logged in. In my case, Twitter icons -->
<script type="text/javascript">
        if(window.opener && !window.opener.closed) {
            window.opener.refreshTwitterIcons(); // function is called in parent window from which user has triggered the popup
        }
        window.close(); // Closing the popup
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:23:02.860

It's quite easy by using [jQuery's $.ajax()](http://api.jquery.com/jQuery.ajax/) function, where you basically post your data to your PHP code.

The only thing that needs a change is the header section - you might want to return a JSON encoded message - like "OK" or "Error Message", so you can react upon that.

```
$.ajax({
    url: "your_file.php",
    type: 'post',
    dataType: 'json',
    success: function(data, status, xhr) {
        if (data.msg == 'OK') {
            // all ok, user logged in
        } else {
            // display error
            console.log(data.msg);
        }
    }
}); 
```

And the PHP part:

```
<?php
require("twitter/twitteroauth.php");
require 'config/twconfig.php';
session_start();

$twitteroauth = new TwitterOAuth(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET);
// Requesting authentication tokens, the parameter is the URL we will be redirected to
$request_token = $twitteroauth->getRequestToken('http://list.2lessons.com/fbtwLogin/getTwitterData.php');

// Saving them into the session

$_SESSION['oauth_token'] = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];

// If everything goes well..
if ($twitteroauth->http_code == 200) {
    // Let's generate the URL and redirect
    $url = $twitteroauth->getAuthorizeURL($request_token['oauth_token']);
    echo json_encod(array('msg' => 'OK'));
} else {
    // It's a bad idea to kill the script, but we've got to know when there's an error.
    echo json_encod(array('msg' => 'Something wrong happened.'));
}
?> 
```

# jsp - 如何在 2 个 JSP 之间制作请稍候页面

> ID：12445087
> 
> 赞同：2
> 
> 时间：2012-09-16T07:15:31.500
> 
> 标签：jsp

如何在 2 个 JSP 之间制作请等待页面。我们必须使用 javascript。那么它不是特定于浏览器的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:46:57.593

您可以使用 javascript 或 jquery 显示弹出对话框...

# visual-studio - 我必须签署 ClickOnce 清单吗？

> ID：12445091
> 
> 赞同：7
> 
> 时间：2012-09-16T07:16:55.557
> 
> 标签：visual-studio, clickonce, signing

我有一个 VS2012 解决方案（WinForm vb.net），感谢 ClickOnce。我今天做了一些测试来部署这个应用程序。我**无需签署 ClickOnce 清单或签署程序集即可发布和部署此应用程序**。在我的项目的签名选项卡上，我取消选中“签署 ClickOnce 清单”和“签署程序集”。安装此应用程序时，我没有任何错误（关于未签名的程序集）。

我将已发布的文件夹复制到 USB 密钥上，然后毫无问题地安装在另一台计算机上。我还能够更新我的应用程序并自动安装这些更新（感谢 ClickOnce）。

我阅读了很多关于 ClickOnce 和签名的内容，看来我不必为 WinForm 应用程序签名。

有人可以证实这一点吗？我想知道我是否可以将 ClickOnce 文件夹复制到网络公司的共享上，如果我总是可以毫无问题地安装它？

明天我将有机会尝试安装在公司的网络上（不是今天）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T10:19:39.577

自 .Net 3.5 起，对 ClickOnce 清单进行签名是可选的。请参阅此处以获取 Microsoft 的确认：http: [//msdn.microsoft.com/en-us/library/zfz60ccf.aspx](http://msdn.microsoft.com/en-us/library/zfz60ccf.aspx)

# ruby-on-rails-3 - 俱乐部会员维护示例

> ID：12445095
> 
> 赞同：0
> 
> 时间：2012-09-16T07:17:11.930
> 
> 标签：ruby-on-rails-3

我需要有一个小型系统，其中有许多“俱乐部”和该俱乐部的成员。一个用户可以是多个俱乐部的成员。

我定义了模型：

俱乐部：has_many：club_members has_many：users，通过：club_members

用户：has_many：club_members has_many：clubs，通过：club_members

俱乐部成员所属归属：俱乐部所属归属：用户

我设法想出了一个粗略的黑客（选择列表，并将会员ID作为逗号分隔的列表存储在俱乐部中，但这是*错误*的，只是看着代码就让我的眼睛流血了；）

我想要实现的是转到一个表单，添加/删除成员，然后在发布表单时，操作上面的模型以相应地永久保存数据。

所以，我实际上有两个问题：

1）上面的模型对吗？2) 教一个人钓鱼，有没有我可以浏览/检查的示例或项目来显示添加/删除俱乐部成员的关系管理，包括 UI 和后端？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:27:22.323

我建议在 railscasts 上查看有关复杂表格的这些视频：

[http://railscasts.com/episodes?utf8=%E2%9C%93&search=complex+forms](http://railscasts.com/episodes?utf8=%E2%9C%93&search=complex+forms)

看看`accepts_nested_attributes`方法：

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# c# - 具有共享公共方法的两种可能类型的参数的通用方法

> ID：12445099
> 
> 赞同：4
> 
> 时间：2012-09-16T07:18:06.540
> 
> 标签：c#, string, generics

我编写了一个通用方法，将与`String`或`StringBuilder`参数一起使用。它返回参数中第二个单词的位置（单词可以用空格和换行符分隔）。对于使用`[]`and`Length()`的论点，我想不出比下面丑陋的代码更好的东西了。有没有更优雅的方法来做到这一点？

```
int PositionOfTheSecondWord<T>(T text) // T can be String or StringBuilder
{
    int pos = 0;
    int state = 0;
    char c;

    // Get length of the text
    // UGLY!
    int length = text is StringBuilder ? (text as StringBuilder).Length : (text as String).Length;

    while (pos <= length - 1)
    {
        // Get the next character
        // UGLY!
        c = text is StringBuilder ? (text as StringBuilder)[pos] : (text as String)[pos];

        if (c == ' ' || c == '\n') // space
        {
            if (state == 1)
                state = 2; // 2 means the space between the first and the second word has begun
        }
        else // a letter
            if (state == 0)
                state = 1; // 1 means the first word has begun
            if (state == 2)
                return pos;

        pos++;

    }

    return -1;

} 
```

PS 我不能只为 String 参数编写一个函数并从 StringBuilder.ToString() 调用它，因为我的 StringBuilder 可能很大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T07:27:12.113

我认为最好的方法是使用重载方法。例如：

```
int PostionOfTheSecondWord(string text)
{
    // Code optimized for strings.
}

int PostionOfTheSecondWord(StringBuilder text)
{
    // Code optimized for StringBuilder.
} 
```

这将使您的代码更易于阅读和维护，并且性能会更好。

希望这对您的探索有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:12:53.837

根据您的方法的长度，这可能是多态性的一种情况：

如其他答案中所述，`string`彼此`StringBuilder`无关。因此，对它们使用相同方法的唯一机会是为这两种相关的类型创建包装器。

您可以使用您的方法定义一个包装器基类，如下所示：

```
public abstract class ScannableStringBase
{
    public abstract int Length { get; }

    public abstract char this[int index] { get; }

    public int PositionOfTheSecondWord()
    {
        int pos = 0;
        int state = 0;
        char c;

        int length = this.Length;

        while (pos <= length - 1)
        {
            c = this[pos];

            if (c == ' ' || c == '\n') // space
            {
                if (state == 1)
                    state = 2; // 2 means the space between the first and the second word has begun
            }
            else // a letter
                if (state == 0)
                    state = 1; // 1 means the first word has begun
                if (state == 2)
                    return pos;

            pos++;
        }

        return -1;

    }
} 
```

从该类派生处理所需值类型的子类：

```
public class ScannableString : ScannableStringBase
{
    public ScannableString(string value)
    {
        this.stringValue = value;
    }

    private readonly string stringValue;

    public override int Length {
        get {
            return stringValue.Length;
        }
    }

    public override char this[int index] {
        get {
            return stringValue[index];
        }
    }
}

public class ScannableStringBuilder : ScannableStringBase
{
    public ScannableString(stringBuilder value)
    {
        this.stringBuilder = value;
    }

    private readonly string stringBuilder;

    public override int Length {
        get {
            return stringBuilder.Length;
        }
    }

    public override char this[int index] {
        get {
            return stringBuilder[index];
        }
    }
} 
```

总结一下，你得到：

*   没有代码重复，因为`PositionOfTheSecondWord()`在基类中只定义了一次。
*   类型安全，因为您的`PositionOfTheSecondWord()`方法不能在除`string`or之外的任何东西上调用`StringBuilder`。
*   可扩展性，因为如果您发现要支持第三种类型，您可以简单地从`ScannableStringBase`.

一个可能的缺点可能是您必须事先区分要在某处分析的类型，因此您可以决定是实例化 a`ScannableString`还是 a `ScannableStringBuilder`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:38:52.930

```
int GetPos(string text)
    {
        int length = text.Length;
        for (int i = 0; i < length; i++)
        {
            if (GetChar(text, i) == ' ')
            {
                return i;
            }
        }

        return -1;
    }

    int GetPos(StringBuilder sb)
    {
        int length = sb.Length;
        for (int i = 0; i < length; i++)
        {
            if (GetChar(sb, i) == ' ')
            {
                return i;
            }
        }

        return -1;
    }

    char GetChar<T>(T text, int pos)
    {
        if (text.GetType() == typeof(StringBuilder))
        {
            return (text as StringBuilder)[pos];
        }
        else if (text.GetType() == typeof(String))
        {
            return (text as String)[pos];
        }
        else
        {
            throw new ArgumentException("Wrong parameter, T must be string or StringBuilder");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T07:54:50.157

如果你想使用一个泛型方法，你可以使用这个最简单的代码来达到同样的效果。

```
// T can be String or StringBuilder:
static int PositionOfTheSecondWordNew<T>(T text) 
{
    int pos = -1;
    string[] word;

    // If T is string or StringBuilder this line is not necessary:
    if ((text is StringBuilder) || (text is string)) 
    {
        word = text.ToString().Split(new char[]{' ', '\n'});
        pos = word[0].Length;
    }
    return pos;
} 
```

# assembly - 从 IRQ 处理程序获取返回地址？

> ID：12445100
> 
> 赞同：2
> 
> 时间：2012-09-16T07:18:36.713
> 
> 标签：assembly, x86

如何在 32 位保护模式（显然是 x86）下查看 PIT IRQ 处理程序的返回值？我想我可以这样做，我不完全确定。

```
pop eax ; pop last thing from stack
mov dword return_address,eax
push eax
iret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:02:45.257

这将从堆栈中读取正确的项目，但如果你这样做，你会损坏`eax`.

一个适当的 ISR 在其执行结束时必须将所有使用的寄存器恢复到它们在 ISR 启动时所处的状态。

另一件需要注意的事情......`return_address`将通过段寄存器（这里，`ds`）被（隐式地）引用。如果`ds`在 ISR 和 ISR 中断的代码中始终相同，则可以。然而，如果被中断的代码发生变化`ds`，ISR 必须`ds`在其开始处保存，将其设置为正确的选择器值，使用它然后恢复它。如果您不这样做，该`mov`指令可能会损坏内存或导致异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:20:16.773

更像的东西

```
push eax
push ds
mov eax,cs:saved_ds
mov ds,eax
mov eax,[esp+8]
mov return_address,eax
pop ds
pop eax
iret 
```

将保留 eax 并可以处理任意段值。它要求您在`saved_ds`上述 ISR 运行之前保存“ds”段寄存器。它使用`cs`寄存器来访问它 - 大多数（所有？）平台的基数 c 等于 ds 的基数，并且 cs 可读。

Usually, an ISR has to acknowledge the IRQ (is your code a software interrupt hook?). Your code isn't showing it so I figured your code fragment in the question was just a stripped down version of the real code.

# c++ - 重载下标运算符不返回指针

> ID：12445103
> 
> 赞同：6
> 
> 时间：2012-09-16T07:19:29.433
> 
> 标签：c++, class, pointers, c++11, operator-overloading

在我的班级中，我有一个成员变量`std::vector<node*>`children
我想重载下标运算符，以便我可以轻松地索引其中一个节点。

* * *

这是我对该功能的类减速：

```
node* operator[](int index); 
```

* * *

这是我对该函数的类定义：

```
node* class_name::operator[](int index){

    return children[index];
} 
```

* * *

然而，这个函数似乎并没有像我希望的那样返回一个指针。
这是给我带来麻烦的功能：

```
void Print_Tree(node* nptr, unsigned int & depth){

    if (NULL == nptr) {
        return;
    }
      //node display code

    for (int i = 0; i < nptr->Number_Of_Children(); ++i){
        Print_Tree(nptr[i],depth+1); //<- Problem Here!
    }
     //node display code

    return;
} 
```

* * *

我得到的错误是：

> 错误：无法在递归调用中将“node”转换为“node*”

我不明白为什么当我想要一个指向节点的指针时它会给我一个节点。
我的重载函数有问题吗？
我尝试在递归调用中取消引用节点：

```
Print_Tree(*nptr[i],depth+1);  
Print_Tree(*(nptr[i]),depth+1);
Print_Tree(nptr->[i],depth+1); 
```

无济于事！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T07:31:07.073

您正在正确的位置寻找问题，但是您的三次更正尝试中的语法仍然略有错误。

`nptr`是指向`Node`对象的指针，因此您不能直接应用索引运算符（如果这样做，编译器将假定它指向`Node`数组的开头并跳转到第 i 个条目）。

相反，您需要首先取消引用指针，然后应用索引运算符。使用括号来确定它的顺序：

```
Print_Tree((*nptr)[i],depth+1); 
```

* * *

在单独的说明中，您将`int`其用作向量索引的数据类型略有不正确。更好地使用`std::size_t`或`std::vector<Node*>::size_type`.

* * *

此外，鉴于这个问题被标记为[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")，我应该指出，引用空指针的正确方法是`nullptr`，而不是`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:25:12.693

尽管返回指针确实是合法`operator[]`的，但更好的设计（并且符合标准类的期望）改为返回引用。然后，您可以按如下方式获取该参考的地址：

```
node& class_name::operator[](int index){
    return *(children[index]);
} 
```

然后将其用作：

```
Print_Tree(&(*nptr)[i],depth+1); 
```

# php - 收到奇怪的 Facebook 用户 ID

> ID：12445105
> 
> 赞同：0
> 
> 时间：2012-09-16T07:20:05.323
> 
> 标签：php, facebook

当我的应用程序启动时，我得到用户的 facebook id。这对某些人来说很好，但是当其他人上车时，我会得到奇怪的 id。特别是 id 以 10000 开头。我不明白为什么我会为某些人而不是其他人获得这种 id。这会是由于我获取 id 的方式有误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:26:49.840

Facebook拥有**大量**用户。他们可以分配 64 位数字的用户 ID。这就是您使用那些“不同”的ID所看到的。为了让每个人即使没有 64 位系统也能使用这些 64 位数字，Facebook 将这些值作为字符串返回。

您需要将`user_id`值存储为字符串。这将防止数字变得太大而无法作为`int`值保存。以我的经验，最好的办法是将您的用户 ID 值存储为`varchar`- 这也将最大限度地减少未来可能发生的变化的问题。

我们实际上并未对 user_id 值执行任何数学运算，因此无需将其存储为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:21:46.310

不，这完全正常。

对不起，简短的回应，但它/那个/简单。

**编辑**

这些类型的 ID 是有效的。

# javascript - Javascript setTimer

> ID：12445106
> 
> 赞同：0
> 
> 时间：2012-09-16T07:20:57.780
> 
> 标签：javascript, html

我很难理解 javascript 中 setTimer 方法背后的逻辑。

```
 <html><head>
    <script>
        function Timer () {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();

    document.getElementById('show').innerHTML=h+":"+m+":"+s;
        t = setTimeout("Timer()", 1000); 
      }
</script>
</head>

<body onload="Timer()">
<div id="show"></div>
</body></html> 
```

setTimeout 用于延迟函数/方法的执行。那么为什么要在实时时钟中使用它呢？

```
t = setTimeout("Timer()", 1000); 
```

这部分令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:44:52.370

你的代码：

```
t = setTimeout("Timer()", 1000); 
```

您应该知道的第一件事是，将第一个参数放在字符串中被认为是不好的做法——它应该是函数名，不带引号，并且不带括号，如下所示：

```
t = setTimeout(Timer, 1000); 
```

除此之外，您关于为什么将其用于显示时钟的问题：

使用函数`setTimeout()`内部`Timer()`调用自身是一种常见的 Javascript 模式，用于获取重复调用的函数。`setTimeout()`在给定的时间段过去后，它本身只会触发一次调用该函数，因此对于重复事件，每次都需要重新触发。

由于`setTimeout`调用在函数内部，因此在第一次通过其他方式调用`Timer()`之前不会设置它。`Timer()`这就是`body onload`进来的地方。

正如您所怀疑的那样，`setTimeout()`这不是保证在给定时间后调用函数的准确方法。Javascript 不是多线程的，因此任何触发的事件处理程序都必须等待同时运行的任何其他代码。如果其他东西运行缓慢，这可能会导致您的计时器没有在它想要的确切时间被触发。

但是，这对您的时钟来说并不是真正的问题，因为时钟将自己设置为实际的系统时间，而不是依靠`setTimeout`循环来保持同步；该`setTimeout`循环仅用于确保显示（大约）每秒更新一次。如果它实际上不是每秒一次，那并不重要。

我希望这有助于更好地解释事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T08:01:31.163

时钟在经过一段时间后递归调用自身。

在 JS 中制作实时时钟是不可能的。由于 JS 引擎的工作方式，如果您放入`Timer`一个循环中，以无限期运行，您将永远不会在屏幕上看到时间更新（因为更改不会绘制到窗口，直到函数完成并且有程序中的空白）。此外，在那个无限循环中，不可能对页面做任何其他事情（甚至关闭它），因为 JS 一次只能做一件事，所以它不能听任何用户的点击，直到它完成这个循环......

这就是它的`setTimeout`用途。

`Timer`是充当时钟的功能。在`Timer`函数内部，当所有工作完成后，它会告诉`setTimeout`等待 1 秒（1000 毫秒），然后调用一个名为`Timer`.

`Timer`恰好是相同的功能。但`setTimeout`不知道，也不在乎。

在这种情况下，它`t`在很大程度上是无用的。 `setTimeout`将返回一个数字——就像在医生办公室取一个数字一样。如果在你完成它之前，你决定退出，你可以打电话`clearTimeout(t);`，它会跳过那个电话（在这种情况下，它会停止调用时钟）。

这里有一些不好的做法，我想我应该提一下，以便您在自己的实践中尽量不要复制它们。

第一：传递`setTimeout`对函数的引用，而不是字符串...

```
var runThisFunction = function () { console.log("It's the future!"); },
    time_to_wait = 250;

// DON'T DO THIS
setTimeout( "runThisFunction()", 250 );

 // DO THIS
 setTimeout( runThisFunction, 250 ); 
```

不同之处在于`setTimeout`它将运行该字符串`eval`，这可能是一个巨大的安全问题，具体取决于您要执行的操作。

第二个问题是设置一个随机全局变量，`t`......并希望将其用作解决方案。首先，几年后，JS 引擎将开始对人们大喊大叫。其次，这是一个巨大的漏洞，因为该页面上任何应用程序的任何部分都可能会覆盖`t`，或者您可能依赖`t`脚本中的其他位置，但每 1000 毫秒，它就会被一个新数字覆盖。

相反，他们可能应该使用 a `Timer.start();`and `Timer.stop();`setup。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:22:29.590

调用该`Timer()`函数时，它会安排自己在一秒钟后再次运行。最终结果是每秒一次，用当前时间`Timer()`更新元素。`show`（我不知道为什么将它分配给`t`，除非`t`在页面上的其他代码中使用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T07:23:16.453

该行在一秒钟后再次启动该功能。

# codeigniter - 我应该将验证 $_POST 值保存到变量中还是不保存在 CI 中？

> ID：12445108
> 
> 赞同：2
> 
> 时间：2012-09-16T07:21:55.797
> 
> 标签：codeigniter

例如，我的控制器中有这样的东西：

```
$this->form_validation->set_rules('email', 'Email', 'required|valid_email|xss_clean');
$this->form_validation->set_rules('name', 'Name', 'trim|xss_clean'); 
```

现在我的问题是，如果我稍后在我的代码中做这样的事情（在同一个方法中）：

```
$user_profiles = array(

'email' => $_POST['email'],
'name' => $_POST['name']
); 
```

是否会对该数组中的变量进行清理？

我的意思是 form_validation->set_rules 是否会保留用于 $_POST 值的所有后续代码使用，或者我需要使用其他一些技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:01:32.020

Codeigniter 提供了一个输入类，它有一个 post 方法，可以在表单验证对它们进行清理后获取您需要的值：

```
$user_profiles = array(
    'email' => $this->input->post('email'),
    'name' => $this->input->post('name')
); 
```

我或多或少建议您使用 $this->input->post() 而不是 $_POST ，除非有特定的理由不这样做。文档对输入类有更多解释和用途：http: [//ellislab.com/codeigniter/user_guide/libraries/input.html](http://ellislab.com/codeigniter/user_guide/libraries/input.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:00:55.080

我不是 100% 确定，但据我所知，form_validation 只是测试给定参数的变量，但不会清理它们。

`$postdata = $this->input->post(NULL, TRUE);`我在处理表单数据时一直使用。

# c++ - QT和MFC哪个好学

> ID：12445113
> 
> 赞同：3
> 
> 时间：2012-09-16T07:22:53.640
> 
> 标签：c++, qt, user-interface

我想有 C++ 应用程序编程的工作经验。我在选择游戏编程或独立编程的困境中。请建议我哪个框架/API 有利于我学习。

Qt mobile / QT gui编程，任何其他API，学习MFC而不是QT怎么样，除了qt还有其他gui框架吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:21:17.950

关于问题的第一部分：我建议您在两个方向上尝试一些轻量级编程。

现在关于使用什么框架。如果您真的只决定游戏编码，您可能需要使用专门的框架/引擎进行游戏开发。尽管如此，Qt 仍会让您进行一些游戏开发，因此您可以在下定决心之前尝试将其用于游戏和独立编程。

关于您建议的框架。MFC不像以前那么流行，未来可能不会得到微软的太多支持。Qt 和 wxWidgets 是流行的框架，可让您开发跨平台应用程序。我推荐 Qt，因为它使编码变得更加容易，如果您真的对为主要平台制作原生应用程序感兴趣，wxWidgets 会变得更加有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T07:31:54.017

有各种各样的，具有不同的好处和限制。MFC 几乎只是 Windows，而 QT 是跨平台的，并且（IMO）在当前就业市场中的需求更大（直到最近我一直在非常顽强地搜索！）另一个流行的选项可能是 WPF，它是 Windows 特定的。

简短的回答：做 QT 直到“下一件大事（tm）”出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T07:31:42.863

我不能在这里给你意见。要获得经验，请在满足您要求的任何框架中开始编程。

Qt 已经足够好了，并且有[wxWidgets](http://wxwidgets.org)作为选项。与 MFC 不同，这两者是跨平台的。

至于选择游戏编程还是GUI编程，你可以一个接一个。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T07:32:09.507

MFC 是 windows，如果您主要针对 windows，[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)是新的 Micorsoft 桌面 GUI 标准。话虽如此，大多数游戏都以 3D API-native (OpenGL/Direct3D) 方式完成所有操作，而特定于平台的主要部分是窗口和用户输入。

使用现有的用户界面库与使用自己的用户界面库之间也存在权衡。您会发现很难将 Qt 或 WPF 小部件作为一等公民深入集成到您的游戏中，并且可能需要跳过一些障碍来执行某些自定义行为。从头开始手动操作具有真正了解正在发生的事情并能够准确地做你想做的事情的好处；但是这样做的代价是您没有利用现有的完整库。

我个人的建议是花一些时间学习 Qt 或 WPF（如果你关心多平台，Qt，很多项目都使用 Qt，但 WPF 正在加速发展，尤其是由于 Windows 8）只是为了了解什么是UI API 看起来像从客户端。还学习图形 API（OpenGL 或 Direct3D）的基础知识。然后你将处于一个更好的位置来做出你的决定。最终，我建议创建一个非游戏 UI 程序和一个单独的游戏程序。这会给你一个更好的主意。

在游戏的上下文中，您可以在工具和编辑器领域利用 Qt/WPF/etc。但通常实时游戏内 UI 使用紧密集成的 3D 加速 UI 库。一个这样的库是[Scaleform](http://gameware.autodesk.com/scaleform/features)（商业的，基于闪存的），另一个是[CEGUI](http://www.cegui.org.uk/wiki/index.php/Main_Page)（LGPL/MIT）。

# c# - 如何从当前的视图中引用另一个视图？

> ID：12445116
> 
> 赞同：2
> 
> 时间：2012-09-16T07:23:19.070
> 
> 标签：c#, jquery, asp.net-mvc, hyperlink

我正在为一个非常基本的功能而苦苦挣扎。我想从当前视图引用另一个视图，通过应用非常基本的 ajax 从该视图加载内容。这是代码：

```
<div>
    <ul id="biographies">
    <li> <a href="Ajax">Ajax</a></li>
    <li> <a href="Index">Index</a>  </li>

    </ul>    

    <div id="biography">
      The ajax content will appear here...
    </div>

    <script type="text/javascript">
        $("#biography").load('Ajax.cshtml');

    </script>

</div> 
```

两个页面都在同一个目录中，即：views/home

*   问题一：load事件如何传递参数？
*   问题2：如何使用anchor标签链接到其他页面？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:27:12.877

使用[`Url.Action`](http://msdn.microsoft.com/en-us/library/dd504960%28v=vs.108%29.aspx)辅助方法：

```
$("#biography").load('@Url.Action("Ajax")'); 
```

同样，您可以使用[`Html.ActionLink`](http://msdn.microsoft.com/en-us/library/dd493018%28v=vs.108%29.aspx)来获取`a`操作或路由的标记：

```
@Html.ActionLink("Go to Index", "Index")

@Html.ActionLink("Go to Home:Index", "Index", "About") 
```

输出将像`<a href='/About/Index'>Go to Home:Index</a>`.

请记住，使用 MVC 的想法是 URL 指向资源和路由，而不是特定文件。最好使用这些辅助方法（而不是写出硬编码的 URL），因为它们精确地指定了路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:25:57.803

用于`Html.ActionLink`生成链接，然后使用 jquery 进行 ajax 加载。当然，您需要在控制器中编写操作以返回部分视图。jQuery代码：[jsfiddle](http://jsfiddle.net/LzPDT/2/)

# intellij-idea - 如何在 IDEA 中为自定义语言插件启用拼写检查？

> ID：12445117
> 
> 赞同：6
> 
> 时间：2012-09-16T07:23:41.540
> 
> 标签：intellij-idea, spell-checking, intellij-plugin, google-closure-templates

[*某些自定义语言插件（例如Markdown*](http://plugins.intellij.net/plugin/?idea&pluginId=5970)（扩展名“.md”）和[*Non-Dairy Soy 插件*](http://plugins.intellij.net/plugin/?idea&pluginId=5043)（扩展名“.soy”））似乎禁用了[IntelliJ 拼写检查](http://www.jetbrains.com/idea/webhelp/spellchecking.html)，即使使用**Spelling |** 启用**错字检查选项：**

*   过程代码
*   过程文字
*   处理意见

是否可以为自定义语言插件启用拼写检查？

* * *

**更新：**我添加了对 IntelliJ 插件 Non-Dairy-Soy-Plugin 的拼写检查支持。请参阅分支[*拼写检查器*](https://github.com/cpeisert/Non-Dairy-Soy-Plugin/tree/spellchecker)[下的拉取请求](https://github.com/evenaglia/Non-Dairy-Soy-Plugin/pull/5)和[Github 上的分叉副本](https://github.com/cpeisert/Non-Dairy-Soy-Plugin/tree/spellchecker)*。*

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:04:55.447

最终用户不能对第三方插件提供的文件类型强制使用拼写检查。插件维护者需要明确支持它。

例如，Java 插件在`plugin.xml`描述符中定义了这个：

```
<spellchecker.support language="JAVA" implementationClass="com.intellij.spellchecker.JavaSpellcheckingStrategy"/> 
```

插件也可以提供自己的字典：

```
 <extensions defaultExtensionNs="com.intellij.spellchecker">
    <support language="Python" implementationClass="com.jetbrains.python.spellchecker.PythonSpellcheckerStrategy"/>
    <bundledDictionaryProvider implementation="com.jetbrains.python.spellchecker.PythonBundledDictionaryProvider"/>
  </extensions> 
```

[SpellcheckingStrategy](https://github.com/JetBrains/intellij-community/blob/master/spellchecker/src/com/intellij/spellchecker/tokenizer/SpellcheckingStrategy.java)类指定文件类型中的单词如何被标记并提供给拼写检查器。

对于像 Markdown 这样的开源插件，您可以尝试自己支持它，然后向维护者发送 pull request 或补丁，或者只是请维护者在以后的更新中添加拼写检查支持。*

# haskell - Yesod 删除级联

> ID：12445121
> 
> 赞同：9
> 
> 时间：2012-09-16T07:24:09.937
> 
> 标签：haskell, yesod

根据[http://www.yesodweb.com/blog/2010/07/database-migrations](http://www.yesodweb.com/blog/2010/07/database-migrations)`DeleteCascade`几年前添加了一个类型类。我只能假设这是要添加到模型中的。像这样设置我的模型配置后：

```
Field
    ...
    foreignId ForeignId DeleteCascade 
```

我的应用程序编译得很好。但是数据库模式没有改变，删除也不是由应用程序级联的。我应该（颤抖）手动做吗？有没有更好的办法？

我正在使用 Yesod 脚手架（Application.hs、Foundation.hs、Settings.hs、...）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-12T10:40:35.150

使用现有的答案，我花了一些时间来弄清楚如何使用删除级联。作为 Yesod 的初学者，我对 Yesod 没有一个概览。

要获得有效的删除级联，您无需更改模型中的任何内容。假设您的实体文件如下所示，并且您想要删除`Entry`.

```
Entry
    title Text
Comment
    entry EntryId 
```

您不必更改此实体文件。

您引导实体的代码（通常位于 中`Model.hs`）看起来像这样。

```
share [ mkPersist sqlOnlySettings
      , mkMigrate "migrateAll" ]
    $(persistFileWith lowerCaseSettings "config/models") 
```

添加 mkDeleteCascade 以获取实体的 DeleteCascades 实例。

```
share [ mkPersist sqlOnlySettings
      , mkDeleteCascade sqlOnlySettings
      , mkMigrate "migrateAll" ]
    $(persistFileWith lowerCaseSettings "config/models") 
```

一旦您想删除您的条目，例如在`postDeleteEntryR`处理程序中，您必须使用`deleteCascade`或`deleteCascadeWhere`代替删除。

```
runDB $ deleteCascade entryId 
```

使用`delete`与之前的效果相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T09:28:02.833

为了利用 DeleteCascade，您需要使用 deleteCascade 或 deleteCascadeWhere 函数。这些只有在您的类型有可用的 DeleteCascade 实例时才有效。获得这些最简单的方法是使用 mkDeleteCascade 函数。

# javascript - 使用 UI Datepicker 在输入字段的值中获取选定的日期 ID（来自数据库）

> ID：12445125
> 
> 赞同：0
> 
> 时间：2012-09-16T07:24:33.243
> 
> 标签：javascript, date, input, datepicker

我有一个注册表单，人们可以在其中选择从数据库中选择的多个日期。我使用 jQuery UI 日期选择器。一切正常，但是当我提交表单时，它会像这样为我保存日期本身：`"09/16/2012,08/04/2011,04/19/1994"`。我想存储日期的 ID。

有谁知道如何获取所选日期的 ID，并将其放入`value=""`属性中？

```
<input type="text" class="datepicker" name="live[]" value="">

<script>
var dates = [<?php $i=0; while($dataDate = mysql_fetch_object($dates)) : echo ($i>0) ?  ", " : ""; echo '"'.date("n-j-Y", strtotime($dataDate->date)).'"'; $i++; endwhile;?>];
var enabledDays = dates;
function enableAllTheseDays(date) {
var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
for (i = 0; i < enabledDays.length; i++) {
    if($.inArray((m+1) + '-' + d + '-' + y,enabledDays) != -1) {
        return [true];
    }
}
return [false];
}
$('.datepicker').datepicker({
    beforeShowDay: enableAllTheseDays,
    yearRange: "1994:2012",
    changeMonth: true,
    changeYear: true
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:42:05.240

好的，这是获得理想结果的全新方法。首先，将日期放在 json obejct 中。

让您的 SQL 查询选择 id，现在从数据库中选择日期，如果您有[php json](http://php.net/manual/en/book.json.php)可用，只需使用

```
<?php   
while($row = mysql_fetch_object($query) ) {
    $data[] = array( "id" => $row['id'], "date" => $row['date'] );
}

echo "var dates = [" . json_encode($data) . "];";
?> 
```

否则你可以这样做：

```
<?php
echo "var dates = [";
while($row = mysql_fetch_object($query) ) {
    $data[] = '{"id" : "' .$row["id"] . '", "date" : "' . $row["date"] . '" }';
}
echo implode(',', $data);
echo "];";
?> 
```

现在我们得到了 json 对象，它应该看起来像

`[{"id" : "12", "date": "2012-02-01"},{"id" : "33", "date": "2012-02-03"}]`

我稍微调整了您的功能，以使用我们的 json 对象

```
function enableAllTheseDays(date) {
    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
    var datestr = y + "-" + m + "-" + d;
    for (i = 0; i < dates.length; i++) {
        if( dates[i].date == datestr) {
            return [true];
        }
    }
    return [false];
}

$('.datepicker').datepicker({
    beforeShowDay: enableAllTheseDays,
    yearRange: "1994:2012",
    changeMonth: true,
    changeYear: true
}); 
```

现在回到获取 id

```
$('.datepciker').on('change',function() {
    for(var i = 0; i < dates.length; i++) {
        if( dates[i].date == $(this).val() )
        var index = dates[i].id;
    }

    $("#date_id_holder").val( index );

    }); 
```

现在您的 $("#date_id_holder") 包含所选日期的 id

# php - Get attachment from mail using php

> ID：12445129
> 
> 赞同：0
> 
> 时间：2012-09-16T07:25:01.167
> 
> 标签：php, email, attachment

I need code to monitor my mail inbox and forward the mails with an attachment to another email address. I used the code below to fetch the attachments from the received messages. But I'm getting an error "Notice: Undefined property: stdClass::$disposition in C:\wamp\www\mail\c.php on line 60"

Here is my code

```
<?php
 $host = '{imap.gmail.com:993/imap/ssl/novalidate-cert/norsh}inbox';
 $login = 'AAAA@CCC.com';
 $password = 'XXXXXXX';
 $savedirpath = "../mail";
 $type = 'ReadAttachment';
$obj = new $type;
$obj->getdata($host,$login,$password,$savedirpath,$delete_emails=false);
class ReadAttachment{

function getdecodevalue($message,$coding) {
    switch($coding) {
        case 0:
        case 1:
            $message = imap_8bit($message);
            break;
        case 2:
            $message = imap_binary($message);
            break;
        case 3:
        case 5:
            $message=imap_base64($message);
            break;
        case 4:
            $message = imap_qprint($message);
            break;
    }
    return $message;
}

function getdata($host,$login,$password,$savedirpath,$delete_emails=false) {
    // make sure save path has trailing slash (/)
    //print_r("test");
    $savedirpath = str_replace('\\', '/', $savedirpath);
    if (substr($savedirpath, strlen($savedirpath) - 1) != '/') {
        $savedirpath .= '/';
    }

    $mbox = imap_open ($host, $login, $password) or die("can't connect: " . imap_last_error());
    $message = array();
    $message["attachment"]["type"][0] = "text";
    $message["attachment"]["type"][1] = "multipart";
    $message["attachment"]["type"][2] = "message";
    $message["attachment"]["type"][3] = "application";
    $message["attachment"]["type"][4] = "audio";
    $message["attachment"]["type"][5] = "image";
    $message["attachment"]["type"][6] = "video";
    $message["attachment"]["type"][7] = "other";
    //print_r($message);
    $emails = imap_search($mbox,'ALL');
    foreach($emails as $email_number) {
        $structure = imap_fetchstructure($mbox, $email_number , FT_UID);    
        $parts = $structure->parts;
        $fpos=2;
        for($i = 1; $i < count($parts); $i++) {
            $message["pid"][$i] = ($i);
            $part = $parts[$i];

            if($part->disposition == "ATTACHMENT") {
                $message["type"][$i] = $message["attachment"]["type"][$part->type] . "/" . strtolower($part->subtype);
                $message["subtype"][$i] = strtolower($part->subtype);
                $ext=$part->subtype;
                $params = $part->dparameters;
                $filename=$part->dparameters[0]->value;

                $mege="";
                $data="";
                $mege = imap_fetchbody($mbox,$email_number,$fpos);  
                $filename="$filename";
                $fp=fopen($savedirpath.$filename,"w");
                $data=$this->getdecodevalue($mege,$part->type);
                //print_r($data);
                fputs($fp,$data);
                fclose($fp);
                $fpos+=1;
            }
        }

    }
    // imap_expunge deletes all tagged messages

    imap_close($mbox);
}
} 
```

Thanks to the author, but I couldn't get any help further. I'm getting an error `"Notice: Undefined property: stdClass::$disposition in C:\wamp\www\mail\c.php on line 60"` This exactly point out the line `if($part->disposition == "ATTACHMENT")`.
Please provide me with a solution.

I am new to php, struggling to write this mail function,,

Thanks in advance :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T09:08:19.633

您需要先检查 $disposition 是否存在：

if((isset($part->disposition))&&($part->disposition == "ATTACHMENT"))

# visual-c++ - How manual add MSVC 2010 compiler as tool chain?

> ID：12445131
> 
> 赞同：1
> 
> 时间：2012-09-16T07:25:05.750
> 
> 标签：visual-c++, qt4, qt-creator

As the title, I have a "portable" version of MSVC 2010 (included vcvars32.bat, .., and already tested for working). How can i make qt creator "auto detect" or any ways to add to tools chain list manual?

# html - Aligning DIV at bottom of another element causes menus to not be displayed in IE7

> ID：12445133
> 
> 赞同：0
> 
> 时间：2012-09-16T07:25:25.430
> 
> 标签：html, css, drop-down-menu, internet-explorer-7

I've added markup on a webpage to align a element at bottom of another element. However when I do this the menus on my page aren't displayed in IE7\. Here's the markup:

```
<div id="header">
    <div class="panel">
        <h1>Heading</h1>
        <div class="nav">
            <ul>
                <li class="hdr"><a class="hdr" href="#">Submenu One</a>
                    <ul>
                        <li class="menuitem"><a href="#">Submenu one</a></li>
                        <li class="menuitem"><a href="#">Submenu 2</a></li>
                    </ul>
                </li>
                <li class="hdr"><a class="hdr" href="#">Submenu 2</a></li>
                <li class="hdr"><a class="hdr" href="#">Submenu 3</a></li>
            </ul>
        </div>
    </div>
</div> 
```

The associated style sheet has the following:

```
#header
{
    position: relative; /* Move to bottom */
    height: 100px;
    width: 100%;
}

.nav
{
    position: absolute; /* Move to bottom */
    bottom: 0;    /* Move to bottom */
}

#header ul
{
    padding-left: 0;
    margin-left: 0;
    margin: 12px 0px 0px 0px;
    list-style: none;
    position: relative;
    left: -10px;
    float: left;
}

#header ul li.hdr
{
    display:-moz-inline-stack;
    display: inline-block;
    zoom: 1;
    *display: inline; /* IE Hack */
    margin-right: 15px !important;
    font-size: 16px;
    z-index: 1000;
}

#header ul li a.hdr
{
    display: block;
    color: white !important;
    text-decoration: none;
    padding: 9px 11px 11px 11px;
}

#header ul li a.hdr:hover
{
    background: #505050;
    border: solid 1px #606060;
    padding: 8px 10px 10px 10px;
    text-shadow: 2px 2px 2px #111;
}

#header ul ul
{
    display: none;
    border: 1px solid #a0a0a0;
    background: #f5f5f5;
    position: absolute;
    top: 27px;
    left: 0px;
    zoom: 1;
    padding: 10px;
    line-height: 20px;
}

#header ul li:hover > ul
{
    display: block;
}

#header ul ul li
{
    display: block;
}

#header ul ul li a
{
    font-size: 12px;
    border: none;
    color: #000;
    background: #f5f5f5;
    text-decoration: none;
    padding: 8px;
} 
```

The lines with the comment /* Move to bottom */ are responsible for moving the nav div to the bottom of the header. I've tried putting z-index's everywhere, as well as other attributes to ensure IE sees the elements with hasLayout equal to true, but to no avail. I'm pulling my hair out over this, any help much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:35:40.567

你的 IE hack 是错误的：

利用

> `*+display: inline; /* IE Hack */`

代替

> `*display: inline; /* IE Hack */`

*   (star) hack 仅适用于 IE6。

[见这里][1]

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

# javascript - 为什么我的 JQuery-UI 选项卡控件无法正确呈现？

> ID：12445134
> 
> 赞同：0
> 
> 时间：2012-09-16T07:25:49.593
> 
> 标签：javascript, asp.net-mvc, jquery-ui, razor, asp.net-mvc-4

这让我发疯了。我是一个 JQuery 菜鸟，这是我第一次使用它。我已经按照 jQuery-ui 网站上的示例进行操作，但是我的脚本片段给出了错误：

在线`$("#tabs").tabs();` 错误：0x800a01b6 - Microsoft JScript 运行时错误：对象不支持属性或方法“选项卡”

所以，这就是我正在做的事情。我正在开发一个 ASP.NET MVC4 Web 应用程序。jQuery 脚本和样式位于站点的默认包中，并在我的 _Layout.cshtml '母版页' 中呈现，如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Styles.Render("~/Content/themes/base/css")
        @Scripts.Render("~/bundles/modernizr")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
    </head> 
```

这是我的观点：

```
@using Tigra.eStore.BusinessLogic.DomainObjects
@model Tigra.eStore.Storefront.Models.ProductDetailsViewModel

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>@Model.Product.Name</legend>
    <div class="display-field">
        @Html.DisplayFor(model => model.Product.Name)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Add to Cart", "Add", "ShoppingCart", new {id = Model.Product.Id}, new {})
    @Html.ActionLink("Back to List", "Index")
</p>

<script>
    $(function() {
        $("#tabs").tabs();
    });
</script>

<div class="descriptors">
    <div id="tabs">
        <ul>
            @foreach (ProductDescriptor descriptor in Model.Product.ProductDescriptors)
            {
                <li><a href="#tabs-@descriptor.SequenceNumber">@descriptor.Title</a></li>
            }
        </ul>
        @foreach (ProductDescriptor descriptor in Model.Product.ProductDescriptors)
        {
            <div id="tabs-@descriptor.SequenceNumber">
                <p>@descriptor.Description</p>
            </div>
        }
    </div>
</div> 
```

我很确定 jQuery-ui 正在加载，因为它在运行时显示如下： ![Visual Studio 显示加载的脚本](../Images/f23e4cfa057b17e218aceab6cfc24eed.png)

它必须是简单的东西 - 对不起，如果这非常明显，但正如我所说，我是这个东西的菜鸟。你能看出我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:05:16.143

解决了！.

线索在我的屏幕截图中，你可以看到 jquery-1.7.1 被加载了两次。Microsoft 模板项目在 _Layout.cshtml 页面的底部呈现 jquery 包。为什么？我不知道——但我忽略了它。所以我继续将它与 jquery-ui 一起添加到页面顶部。看来jquery的第二次渲染抹杀了jquery-ui。

所以我的解决方法是`@Scripts.Render("~/bundles/jquery")`从文件底部附近删除该行，将我的行留在顶部。奇迹般有效。

现在我想知道为什么微软把它放在底部？有任何想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T15:46:41.820

这样做是在考虑性能的情况下完成的。而不是改变位置

```
@Scripts.Render("~/bundles/jquery") 
```

请按照以下步骤操作。

在@Scripts 之后的布局页面中，添加：

```
@RenderSection("scripts", false) 
```

那么在你看来

```
@section scripts{
 <script type="text/javascript>
 // view scriptt goes here
 </script> 
} 
```

这部分可以在视图 html 之前或之后，但总是在之后呈现。

# php - 正则表达式匹配前缀/类别/可选页码

> ID：12445137
> 
> 赞同：0
> 
> 时间：2012-09-16T07:26:28.707
> 
> 标签：php, regex

我似乎对正则表达式没有任何运气！我编写了一个 Wordpress 插件，它（理论上）从 url 中获取类别和可选页码，但我无法让它与 url 模式匹配。

网址的格式为：

```
Bikes/Hybrid-Bikes

Bikes/Hybrid-Bikes/1

Bikes/Hybrid-Bikes/2 
```

ETC

和：

```
Bikes/Mountain-Bikes

Bikes/Mountain-Bikes/1

Bikes/Mountain-Bikes/2 
```

等等。

这是我正在尝试使用的正则表达式：

```
 Bikes/([^/]+)(?:/(\d+))? 
```

它与类别匹配，但与页码不匹配。我确定我已经完成了 99% 的工作，但我就是想不通！

提前致谢

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:34:57.690

试试这个正则表达式来匹配你的页码：

```
Bikes/([^/]+)?/?(\d+)? 
```

[您可以在http://regexpal.com](http://regexpal.com)上验证 RegExps - 我的测试数据是：

> 自行车/
> 
> 自行车/混合动力自行车
> 
> 自行车/混合动力自行车/1
> 
> 自行车/混合动力自行车/2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:38:30.793

你确实很亲近。

添加开始和结束 ( `^$`) 标记以完成表达式：

```
^Bikes/([^/]+)(?:/(\d+))?$ 
```

PHP 工作示例：

```
$string = "Bikes/Hybrid-Bikes/1";

var_dump(
    preg_match(
        "~^Bikes/([^/]+)(?:/(\d+))?$~i",
        $string
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:08:45.547

```
^\w+\/\w+-?\w+\/?\d?$ 
```

已在 robular 中测试

# c# - 如何在我的 c# 项目中使用带有选项卡控件的形状角？

> ID：12445144
> 
> 赞同：0
> 
> 时间：2012-09-16T07:28:07.800
> 
> 标签：c#, .net, visual-studio, visual-studio-2008, c#-4.0

我必须添加类似于 Visual Studio 起始页上显示的选项卡控件。如何在 Visual Studio 的工具箱中添加此类控件并在我的项目中使用。

显示的此控件的类名是`EzMdiTabs`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:39:18.817

我认为这可能有助于您将控件添加到工具箱：

[http://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/](http://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/)

# php - 修改通过引用传递的变量的值

> ID：12445146
> 
> 赞同：1
> 
> 时间：2012-09-16T07:28:39.220
> 
> 标签：php

我希望能够修改通过引用传递给函数的变量的值。

```
<?php
    function invoke($what) {
        $args = func_get_args();
        return call_user_func_array($what, $args);
    }

    function page(&$page) {
        return $page;
    }

    $page = array();
    $page['context'] = 'view';
    invoke('page', $page);
    ?> 
```

当我调用 invoke() 时，我收到警告：page() 的参数 1 应为引用，invoke() 中给出的值

请问我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:30:15.100

您在函数 invoke() 中传递了两个值并且只得到一个使用函数 lke`function invoke($what,$second)`或者只传递一个像`invoke($page);`

# javascript - Jquery显示/隐藏滚动

> ID：12445147
> 
> 赞同：0
> 
> 时间：2012-09-16T07:28:45.480
> 
> 标签：javascript, jquery, scroll

我已经得到了效果，当您单击一年列（2012、2011、2010 等）时，它会显示每年的内容并隐藏其他年份。我已经让它工作了，例如，滚动到“2011”列并单击它，它会显示它的内容并隐藏其他年份的其他内容。

问题是当我点击时，动画会同时使所有效果混淆用户，我想我必须用动画步骤来做，但我一直无法找到 jquery 解决方案。

我应该在我的代码中添加什么来修复这种奇怪的疯狂效果？

我的代码：

```
/* Scroll Function */
function scrollto(position){
    $('html, body').stop().animate({
        scrollLeft: position
    }, 1000);
}

/* Calendar Scroll */
$(".sub_section_title").click( function(e) {
    e.preventDefault();
$(".contenido_calendario").hide();
$(this).next(".contenido_calendario").toggle('slow');
scrollto($(this).offset().left - 352)
}); 
```

我已经尝试过使用 .queue() 但它不起作用：

```
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    $(".contenido_calendario").hide();
    $(".contenido_calendario").queue(function() {
        scrollto($(this).offset().left - 352);
    $(this).dequeue();
    });
    $(".contenido_calendario").queue(function() {
        $(this).next(".contenido_calendario").toggle('slow')
    $(this).dequeue();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:41:36.937

What you are looking for is jquery's .queue()

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

You can also use delay()

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# html - 在 div 包装器中居中 2 div 而不将我的所有文本居中

> ID：12445152
> 
> 赞同：0
> 
> 时间：2012-09-16T07:29:48.273
> 
> 标签：html, css

除了使用 display: inline-block 和 text-align:center 之外，我们是否必须在 div 包装器内创建 2 个 div 中心？我不希望我的文字成为中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:31:35.040

`text-align: center;`在包装 div 和`text-align:left;`子 div 上使用。

您也可以`margin: 0 auto;`在子 div 上使用，而不是使用文本对齐。但是它们每个都必须有一个宽度（px 或 %），并且每个 div 都将在自己的行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:34:00.090

使用 CSS 边距是使 DIV 居中的最佳方式。添加另一个 DIV 来保存两个居中的 DIV：

```
 margin: 0 auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:34:55.740

为两个 div 制作第二个包装器，具有指定的宽度并将其设置为自动边距。

# git - git svn 移动目录

> ID：12445153
> 
> 赞同：2
> 
> 时间：2012-09-16T07:29:53.233
> 
> 标签：git, svn, git-svn

我在本地使用 git，而我们的远程服务器是 svn。我不得不在工作副本中移动许多文件和文件夹。我做了什么：

1.  `git mv SRC_FOLDER DST_FOLDER`
2.  `git svn dcommit`

现在，SVN 存储库包含具有所有旧历史记录的新文件。但是，由于 git 不跟踪空目录，并且由于我没有使用`git svn dcommit --rmdir`，所有旧目录在 svn reposirtoy 中都是空的，并且新目录不包含旧历史记录。

在我提交更改后，有什么方法可以将旧目录历史记录移动到新目录历史记录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:55:18.170

您能否将所有单个文件和子目录移回原始目录（有历史记录），删除新的（无历史记录）目录，然后从 SVN 工作副本中再次重命名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:37:03.643

我可以告诉你如何使用 2 个工具来做到这一点：[SmartGit](http://www.syntevo.com/smartgit/index.html)（客户端）和[SubGit](http://subgit.com/)（服务器端，在这里你需要链接到你的 Subversion 的新克隆的纯 Git 存储库）。git-svn 不支持目录移动。

如果大多数文件已移动到同一目录中，两者都支持目录移动检测。最初，您可以使用任何工具移动文件并推送。

步骤 1（选项 1）。您应该通过替换来恢复您当前的提交（确保您没有本地更改）：

```
$ git update-ref my_current_branch <commit_id_before_move>
$ git reset --hard HEAD 
```

步骤 1（选项 2）。...或通过该特定提交的反向合并+提交（然后不会执行分支替换）

```
$ git revert <commit_with_wrong_move> 
```

第 2 步（选项 1）。现在您应该重新应用您的更改：移动目录

```
$ git mv SRC_FOLDER DST_FOLDER 
```

第 2 步（选项 2）。...或者只是再次挑选您的更改：

```
$ git cherry-pick <commit_with_wrong_move> 
```

第 3 步。然后推送您的更改：

对于 SubGit：用于分支替换（即步骤 1 选项 1）：

```
$ git push -f 
```

对于简单的还原（即步骤 1 选项 2）：

```
$ git push 
```

对于 SmartGit，请按“推送”按钮（如果需要强制推送，它会询问）

撤消 + 重做可能会有所帮助，这看起来很奇怪，但是主要操作（目录移动）是在推送级别执行的（当开始转换为 SVN 时），您应该使用正确的工具来完成。

# sip - 如何让星号服务器自动响应 SIP 呼叫？

> ID：12445154
> 
> 赞同：0
> 
> 时间：2012-09-16T07:30:01.923
> 
> 标签：sip, voip, asterisk, phone-call, pbx

我的目标：我想使用软电话（3CX 电话）注册星号服务器，并调用服务器和星号行为

作为服务器自动响应某些东西，例如播放歌曲。

我是怎么做的：我使用 virtualbox 安装了 asteriskNow，并通过为我的 SIP 设备设置扩展来注册软电话

（分机 333）。我在*etc/asterisk/extensions.conf*中编写了一个拨号方案。拨号方案是：

```
[incoming]
exten =>s,1,Answer()
exten =>s,n,Playback(dir-intro-oper)
exten =>s,n,Hangup() 
```

我想要任何来电到服务器，服务器会自动接听，并播放预定义的声音（dir-intro-oper.gsm）

然后举手。

但我遇到的问题是：

我使用软电话，但我不知道应该拨到星号服务器的哪个号码。我应该设置一个分机号码吗

星号服务器本身？如果是这样，该怎么做？通过设置 SIP 卡车？在 sip.conf 中写拨号方案？还是别的什么？

另一个问题：我读了与星号相关的书“星号，未来的电话”，它告诉我们在extensions.conf中编写拨号方案

直接，但是我在服务器中找到了extensions.conf，它提醒我们不要直接修改文件，必须使用web-gui

修改。那么我应该遵循哪种方式？

在这种情况下，我不使用任何其他硬件电话。我是星号新手，请给我一些提示和详细过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:32:48.803

您正在使用的“s”扩展是一个“特殊”，当 Asterisk 不知道该做什么时，它会尝试使用它。

如果您真的希望任何来自 VoIP 电话或 ITSP 的电话都以相同的方式处理，请尝试以下操作：

```
[incoming]
exten =>_X.,1,Answer()
same => n,Playback(dir-intro-oper)
same => n,Hangup() 
```

...并确保在您设置的 SIP 电话和 SIP 中继定义中：

```
context=incoming 
```

这实际上会强制所有呼叫进入您的上下文，然后无论您拨打什么，您总是匹配分机号码。

更多阅读[https://wiki.asterisk.org/wiki/display/AST/Pattern+Matching](https://wiki.asterisk.org/wiki/display/AST/Pattern+Matching)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-07-26T07:22:30.010

```
[incoming1]

exten => 333,1,Answer()
same  => n,Playback(File_name)
same  => n,Hangup() 
```

转到 /etc/asterisk/extension_custom.conf 并像这样编写您的上下文：

并将上下文命名为incoming1 或其他任何导致传入上下文已经存在的内容。我将其命名为incoming1：

![](../Images/ca16365722c4aa7ad02e9a086a3a73f9.png)

现在转到 /etc/asterisk/sip_additional.conf 并编辑您要在软件电话上注册的扩展的上下文。

![](../Images/3dec832a96956af7181c106e927167b4.png)

现在注册软电话，您可以拨打号码 333，一切都会正常工作。

![][3]

# java - 如何将事件与对象关联？

> ID：12445155
> 
> 赞同：1
> 
> 时间：2012-09-16T07:30:01.980
> 
> 标签：java, swing, events, event-handling

我正在创建这个应用程序，它有各种组件（振荡器、效果）来绘制可视波形。您可以使用 GUI 上的控件来更改组件参数。

当您与其中一个控件交互时，我需要更新关联的组件，然后重绘输出。

```
public JPanel createOscPanel(Osc o)
 {
 JPanel cbPanel = new JPanel(); 
 final String[] comboItems = {"Sine", "Custom", "FSaw", "FSquare"};
 JComboBox cb = new JComboBox(comboItems);
 cbPanel.add(cb); 

 cb.addActionListener(this);

 return cbPanel; 
 }

public void actionPerformed(ActionEvent e) {
    JComboBox cb = (JComboBox)e.getSource();
    int value = cb.getSelectedIndex();

    System.out.println(value); 
} 
```

在这个例子中 - 我怎样才能传递那个振荡器，以便我可以`setWaveType()`在它上面运行一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:40:04.643

创建*匿名*处理程序并更改`createOscPanel`.

```
public JPanel createOscPanel(final Osc o)
 {
   JPanel cbPanel = new JPanel(); 
   final String[] comboItems = {"Sine", "Custom", "FSaw", "FSquare"};
   JComboBox cb = new JComboBox(comboItems);
   cbPanel.add(cb); 

   cb.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent e) {
           JComboBox cb = (JComboBox)e.getSource();
           int value = cb.getSelectedIndex();
           o.setWaveType();
           System.out.println(value); 
      } 
    });
  return cbPanel; 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:35:28.097

将它作为实例/成员变量保存，您可以从该类中的任何方法访问它。

# sql - FROM 子句中的表顺序

> ID：12445163
> 
> 赞同：2
> 
> 时间：2012-09-16T07:31:43.313
> 
> 标签：sql, oracle11g

对于这样的 sql 查询。

```
Select  * from TABLE_A a 
JOIN TABLE_B b 
  ON a.propertyA = b.propertyA
JOIN TABLE_C 
  ON b.propertyB = c.propertyB 
```

表的顺序是否重要。结果无关紧要，但它们会影响性能吗？

可以假设表 C 中的数据比 a 或 b 大得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:39:12.647

For each sql statement, the engine will create a query plan. So no matter how you put them, the engine will chose a correct path to build the query.

More on plans you have [http://en.wikipedia.org/wiki/Query_plan](http://en.wikipedia.org/wiki/Query_plan)

There are ways, considering what RDBMS you are using to enforce the query order and plan, using hints, however, if you feel that the engine does no chose the correct path.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:52:58.927

有时表的顺序会在这里产生差异，（当您使用不同的连接时）

实际上，我们的加入致力于跨产品概念

如果您使用这样的查询`A join B join C`

会被这样对待`(A*B)*C)`

表示第一个结果是在加入 A 和 B 表之后，然后它将与 C 表进行连接

所以如果在内部加入 A（100 条记录）和 B（200 条记录）之后，它会给出（100 条记录）

然后这些（100条记录）将与（C的1000条记录）进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:42:18.933

不。

好吧，发生这种情况的可能性非常非常小，请参阅[Jonathan Lewis 的这篇文章](http://jonathanlewis.wordpress.com/2006/11/03/table-order/)。基本上，可能的连接订单数量增长非常快，优化器没有足够的时间检查它们。在一些非常罕见的情况下，表格的顺序可能会用作决胜局。但我从来没有见过这种情况发生，甚至没有听说过它发生在现实生活中的任何人身上。你不必担心它。

# find - 使用 Shopify API，我可以找到产品 x 的所有订单吗？

> ID：12445167
> 
> 赞同：6
> 
> 时间：2012-09-16T07:32:22.503
> 
> 标签：find, product, shopify, orders

如何找到包含某个特定产品的所有订单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T10:20:21.807

目前没有一种简单的方法可以做到这一点。您最好的选择是将关系存储在您自己的数据库中，并使用 webhook 侦听新订单。

# jquery - 如何在 Ubuntu Linux 上打开 Aptana Studio 3 的 jQuery 支持

> ID：12445171
> 
> 赞同：1
> 
> 时间：2012-09-16T07:32:55.087
> 
> 标签：jquery, ubuntu, aptana3

我想使用 jQuery 支持。

我已经在 Ubuntu 工作站上下载并安装了 Aptana Studio 3.0。我创建了新的 Web 项目，从 jquery.com 下载了 jquery 库的开发版本，编写了简单的脚本并运行它。有用。但是自动编译不起作用：用于 Ctrl-Space 的 Aptana 不显示任何 jQuery 方法。

有很多这样的解决方案：[Aptana 3 jquery code assistant/hinting](https://stackoverflow.com/questions/6891269/aptana-3-jquery-code-assist-hinting)。我无法尝试，因为我在 Linux 上的 Aptana 中找不到 Commands 或 Install Bundle 菜单。

怎么了？我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:05:55.947

对于重新出现菜单“命令”

1.  在工具栏上单击鼠标右键
2.  单击“自定义透视图...”
3.  点击“菜单可见性”
4.  取消选中“命令”
5.  点击“确定”
6.  在工具栏上单击鼠标右键
7.  单击“自定义透视图...”
8.  点击“菜单可见性”
9.  检查“命令”
10.  点击“确定”

使用 Aptana Studio 3.0 在 Ubuntu 12.04 中为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:59:27.090

我从[https://github.com/aptana/javascript-jquery.ruble](https://github.com/aptana/javascript-jquery.ruble)获取了 javascript-jquery.ruble 的来源并将其复制到 Aptana_Studio_3/configuration/org.eclipse.osgi/bundles/91/1/.cp/bundle

这是一种非常奇怪的方法，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:06:23.873

如果您右键单击打开的文件，您可以找到“命令”菜单；从这里开始，只需按照网站上的说明进行操作。

# .net - .NET 任务调度程序支持多少个处理器内核

> ID：12445175
> 
> 赞同：10
> 
> 时间：2012-09-16T07:34:22.480
> 
> 标签：.net, multithreading, task-parallel-library

出于好奇，我想知道 .NET 任务调度程序支持多少个处理器内核。

Windows Server 2012 最多支持 640 个内核。（是）.NET 是否限制为 64 个，还是会使用所有可用的内核？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T05:35:32.023

.NET 确实支持所有内核。Stehphen Toub 在[MSDN Parallel Extensions Forum](http://social.msdn.microsoft.com/Forums/en-US/parallelextensions/thread/68c9984f-b7d1-46e1-a50c-8c87c4622b80)中的回答：

> 默认 TPL`TaskScheduler`以 .NET 为目标`ThreadPool`。默认情况下，池限制为单个[处理器组](http://msdn.microsoft.com/en-us/library/windows/desktop/dd405503%28v=vs.85%29.aspx)，因此限制为 64 个内核。但是，在 .NET 4.5 中，您可以设置该`<Thread_UseAllCpuGroups enabled="true"/>`标志。当您的计算机有多个 CPU 组时，启用此元素会导致运行时将托管线程分布到所有 CPU 组，而不是仅限于一个，因此默认调度程序可以针对操作系统支持的任何内容。（`GCCpuGroup`也必须启用此设置才能生效。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:03:23.820

作者：埃里克·利珀特（[来源](http://blogs.msdn.com/b/ericeil/archive/2009/04/23/clr-4-0-threadpool-improvements-part-1.aspx)）

> 对于 CLR 4.0 的 Beta 1，TPL 的默认调度程序将是**CLR 线程池**

这*大致*意味着工作进入一个 FIFO 队列，并且每个核心将一个工作负载项出列。换句话说，现在 CLR 线程池支持的内核数量没有固定的上限。这个上限由其他方强制执行——操作系统、硬件和 CPU 平台。

池中的默认线程数（根据[此答案](https://stackoverflow.com/questions/145312/maximum-number-of-threads-in-a-net-app)）

> *   Framework 4.0（32 位环境）中的 1023
> *   Framework 4.0（64 位环境）中的 32768
> *   框架 3.5 中每个核心 250
> *   Framework 2.0 中每个核心 25 个

*从技术上讲*，这允许在专用内核上进行许多并行执行。

**请注意**，这并不意味着在任何给定时刻，池中有那么多线程。CLR 和 OS 通常会尝试缓慢减少池中的线程数以释放未使用的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T08:13:49.397

根据[*CLR 通过 C#*，第 3 版。](https://rads.stackoverflow.com/amzn/click/com/0735627045)，第 25 章线程基础：

> 今天，CLR […] 在 64 位 Windows 上运行时最多只能使用 64 个内核。[... M]在 32 位版本的 Windows 上运行时，托管应用程序最多可以使用 32 个内核。

这本书写于 2010 年，所以它包含与 .Net 4.0 和 Windows Server 2008 R2 相关的信息，但~~我认为 .Net 4.5 在这方面没有任何改变~~。**编辑：** .Net 4.5 似乎确实改变了这一点，请参阅 Peter Meinl 引用 Stephen Toub 的回答。

# android - Sqlite3 按字母数字排序

> ID：12445182
> 
> 赞同：0
> 
> 时间：2012-09-16T07:35:19.030
> 
> 标签：android, sqlite

我有一个声明为 TEXT 的列，我想在该列上对我的 SELECTion 进行排序。我的查询是这样的：

```
Select * from tableName ... order by ColumnName COLLATE NOCASE 
```

我希望排序为：

1.  不区分大小写（我使用 COLLATE NOCASE）
2.  字母数字。当前排序为 1、2、11、A。默认顺序为 1、11、2、A。

独立 2\. 可以通过 ORDER BY cast(ColumnName as int) 实现，但如何与 COLLATE NOCASE 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:57:42.540

您可以创建一个辅助列并同时按和`SELECT *, Convert(int, ColumnName) AS MyAuxiliaryColumn ...`排序。`ColumnName``MyAuxiliaryColumn`

# c# - Why do my array of structs take up so much memory?

> ID：12445185
> 
> 赞同：60
> 
> 时间：2012-09-16T07:36:37.557
> 
> 标签：c#, .net, memory-management, out-of-memory, .net-micro-framework

**Question:** How does the Micro Framework allocate memory for an array of structs?

[BitBucket repository](https://bitbucket.org/ligos/microframework_memoryofstructs) with code to replicate.

## Context and Detail

I'm making a queue using a fixed sized array to insert delays in processing keystrokes from a USB Keyboard. I'm using a `struct` to represent the key up and down events and the delay.

```
public struct QueuedEvent
{
    public readonly EventType Type;        // Byte
    public readonly byte KeyPressed;
    public readonly TinyTimeSpan Delay;    // Int16

    public readonly static QueuedEvent Empty = new QueuedEvent();
}

public enum EventType : byte
{
    None = 0,
    Delay = 1,
    KeyDown = 2,
    KeyUp = 3,
    KeyPress = 4,
}

public class FixedSizeQueue
{
    private readonly QueuedEvent[] _Array;
    private int _Head = 0;
    private int _Tail = 0;

    public FixedSizeQueue(int size)
    {
        _Array = new QueuedEvent[size];
    }

    // Enqueue and Dequeue methods follow.
} 
```

I would have thought my `QueuedEvent` would occupy **4** bytes in memory, but, based on looking at the debug output of the garbage collector (specifically the `VALUETYPE` and `SZARRAY` types) it is actually taking up **84** bytes each! This strikes me as overkill! (And it really appears to be 84 bytes each, because I get an `OutOfMemoryException` if I allocate 512 of them. I have ~20kB of RAM available, so I should be able to allocate at 512 easily).

**Question (again):** How does the Micro Framework manage to allocate 84 bytes for a struct which could fit in 4?

## Garbage Collector Figures

Here's a table of different sized arrays of `QueuedEvent` (after I subtract the amounts when I allocate 0):

```
+--------+-----------+-----------+---------+------------+-------+
| Number | VALUETYPE | B/Q'dEvnt | SZARRAY | B/Q'edEvnt | Total |
| 16     | 1152      | 72        | 192     | 12         | 84    |
| 32     | 2304      | 72        | 384     | 12         | 84    |
| 64     | 4608      | 72        | 768     | 12         | 84    |
| 128    | 9216      | 72        | 1536    | 12         | 84    |
+--------+-----------+-----------+---------+------------+-------+ 
```

Based on the `SZARRAY` numbers, I'd guess my `QueuedEvent` fields are being aligned to Int32 boundaries, thus taking up **12** bytes. But I have no idea where the extra 72 bytes come from.

**Edit:** I'm getting these numbers by calling [`Debug.GC(true)`](http://msdn.microsoft.com/en-us/library/ee433726.aspx) and observing the dump I get in my debugger output. I have not found a reference which identifies exactly what each of the numbers mean.

I realise I could simply allocate an `int[]`, but that means I lose the nice encapsulation and any type safety of the struct. And I'd really like to know what the true cost of a struct is in the micro framework.

* * *

My `TinyTimeSpan` is much like a regular `TimeSpan` except is using an `Int16` to represent a number of milliseconds rather than an Int64 representing 100ns ticks.

```
public struct TinyTimeSpan
{
    public static readonly TinyTimeSpan Zero = new TinyTimeSpan(0);
    private short _Milliseconds;

    public TinyTimeSpan(short milliseconds)
    {
        _Milliseconds = milliseconds;
    }
    public TinyTimeSpan(TimeSpan ts)
    {
        _Milliseconds = (short)(ts.Ticks / TimeSpan.TicksPerMillisecond);
    }

    public int Milliseconds { get { return _Milliseconds; } }
    public int Seconds { get { return _Milliseconds * 1000; } }
} 
```

I'm using a [FEZ Domino](http://www.ghielectronics.com/catalog/product/133) as hardware. It's totally possible this is hardware specific. Also, Micro Framework 4.1.

## Edit - More Testing And Comment Answers

I ran a whole bunch more tests (in the emulator this time, not on real hardware, but the numbers for `QueuedEvent` are the same, so I'm assuming my hardware would be identical for other tests).

[BitBucket repository](https://bitbucket.org/ligos/microframework_memoryofstructs) with code to replicate.

The following integral types and structs do not attract any overhead as `VALUETYPE`:

*   Byte (1 byte)
*   Int32 (4 bytes)
*   Int16 (2 bytes)
*   Int64 (8 bytes)
*   Double (8 bytes)
*   TimeSpan (12 bytes - strange, as its internal member is an Int64)
*   DateTime (12 bytes - strange)

However, `Guid` does: each using 36 bytes.

The empty static member does allocate `VALUETYPE`, using 72 bytes (12 bytes less than the same struct in an array).

Allocating the array as a `static` member does not change anything.

Running in Debug or Release modes makes no difference. I don't know how to get the GC debug info without a debugger attached though. But Micro Framework is interpreted, so I don't know what effect a non-attached debugger would have anyway.

Micro Framework does not support `unsafe` code. Nor does it support `StructLayout` `Explicit` (well, technically it does, but there is no `FieldOffset` attribute) . `StructLayout` `Auto` and `Sequential` make no difference.

Here are are few more structs and their measured memory allocation:

```
// Uses 12 bytes in SZARRAY and 24 in VALUETYPE, total = 36 each
public struct JustAnInt32
{
    public readonly Int32 Value;
}

// Uses 12 bytes in SZARRAY and 48 in VALUETYPE, total = 60 each
// Same as original QueuedEvent but only uses integral types.
public struct QueuedEventSimple
{
    public readonly byte Type;
    public readonly byte KeyPressed;
    public readonly short DelayMilliseconds;
    // Replacing the short with TimeSpan does not change memory usage.
}

// Uses 12 bytes in SZARRAY and 12 in VALUETYPE, total = 24 each
// I have to admit 24 bytes is a bit much for an empty struct!!
public struct Empty
{ 
} 
```

It seems every time I use a custom struct, I incur some sort of overhead. And no matter what I include in the struct, it always requires 12 bytes in `SZARRAY`. So I tried this:

```
// Uses 12 bytes in SZARRAY and 36 in VALUETYPE, total = 48 each
public struct DifferentEntity
{
    public readonly Double D;
    public readonly TimeSpan T;
}

// Uses 12 bytes in SZARRAY and 108 in VALUETYPE, total = 120 each
public struct MultipleEntities
{
    public readonly DifferentEntity E1;
    public readonly DifferentEntity E2;
}

// Uses 12 bytes in SZARRAY and 60 in VALUETYPE, total = 72 each
// This is equivalent to MultipleEntities, but has quite different memory usage.
public struct TwoDoublesAndTimeSpans
{
    public readonly double D1;
    public readonly TimeSpan T1;
    public readonly double D2;
    public readonly TimeSpan T2;
} 
```

## Minor Edit

After posting my own answer, I realised there was always a 12 byte overhead in `SZARRAY` per item. So I tested an `object[]`. Reference types consume 12 bytes each in the Micro Framework.

An empty struct `public struct Empty { }` consumes 24 bytes each.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T12:54:35.913

根据我的测试，我猜测`ValueTypes`Micro Framework 中的值类型并不像我们在桌面 CLR 上所习惯的那样。至少，他们被装箱了。并且可能还涉及另一个级别的间接性。这些成本是在（对于嵌入式平台而言相当可观的）内存开销中产生的。

~~我将`int[]`在我的`FixedSizedQueue`~~.

实际上，我最终使用`UInt32[]`并添加了一些扩展方法来解决 bit bashing。

我在[源代码](http://netmf.codeplex.com/SourceControl/changeset/view/24040)中浏览了一下，但找不到任何有用的东西（而且我真的不知道要寻找什么）。

# c# - c# 触摸屏消息框

> ID：12445188
> 
> 赞同：1
> 
> 时间：2012-09-16T07:37:17.627
> 
> 标签：c#, messagebox, pixelsense

我需要一个用于 Surface 2.0 应用程序的触控消息框。`MessageBox.Show()`必须通过单击鼠标来确认标准。

那不是我想要的。

我可以写一个小的`UserControl`，但我想知道是否已经集成了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:46:12.767

使用[`MessageDialog`类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog.aspx)来表示一个对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:59:01.067

我自己做了，搜索了将近一个小时左右^^

```
public partial class MsgBoxTouch : SurfaceWindow
    {
        public TouchBox1()
        {
            this.InitializeComponent();                

        }

        private void Button_TouchEnter(object sender, TouchEventArgs e)
        {
            this.Close();
        }

    }
}

<s:SurfaceWindow x:Class="MsgBoxTouch"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="http://schemas.microsoft.com/surface/2008"
    mc:Ignorable="d" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 

    WindowState="Normal" WindowStyle="None" Width="300" Height="300">

    <Grid x:Name="Layout">

        <Button Content="OK" Height="50" TouchEnter="Button_TouchEnter">

        </Button>
    </Grid>
</s:SurfaceWindow> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:52:30.870

[blip-surface](http://code.google.com/p/blip-surface/)使用 MessageBox 用户控件，也许您可​​以使用类似的东西

[http://code.google.com/p/blip-surface/source/browse/trunk/Blip/UI/Controls/?r=28](http://code.google.com/p/blip-surface/source/browse/trunk/Blip/UI/Controls/?r=28)

# ios - 不推荐使用dismissModalViewControllerAnimated

> ID：12445190
> 
> 赞同：104
> 
> 时间：2012-09-16T07:38:26.713
> 
> 标签：ios, ios6

我刚刚升级到 XCode 4.5 以更新我的 iOS 应用程序以在 iPhone 5 的 4 英寸显示屏上运行，但我收到了一个构建错误，提示`dismissModalViewControllerAnimated:' is deprecated`：

```
[self dismissModalViewControllerAnimated:NO]; 
```

我尝试使用完成处理程序（但设置为 NULL）更新到推荐的重载，如下所示：

```
[self dismissModalViewControllerAnimated:NO completion:NULL]; 
```

但随后这一行引发了两个错误：

```
warning: 'TabBarController' may not respond to '-presentModalViewController:animated:completion:'
Instance method '-presentModalViewController:animated:completion:' not found (return type defaults to 'id') 
```

谢谢！

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2012-09-16T07:45:04.400

新方法是：

```
[self dismissViewControllerAnimated:NO completion:nil]; 
```

**模态**一词已被删除；就像呈现 API 调用一样：

```
[self presentViewController:vc animated:NO completion:nil]; 
```

原因在**2012 WWDC Session 236 - The Evolution of View Controllers on iOS** Video 中进行了讨论。本质上，这个 API 提供的视图控制器不再总是模态的，并且由于它们添加了一个完成处理程序，因此是重命名它的好时机。

回应马克的评论：

> 支持所有设备 4.3 及更高版本的最佳方式是什么？新方法在 iOS4 中不起作用，但旧方法在 iOS6 中已弃用。

我意识到这几乎是一个单独的问题，但我认为值得一提，因为不是每个人都有钱每 3 年升级一次所有设备，所以我们中的许多人都有一些旧的（5.0 之前的）设备。尽管如此，尽管我说起来很痛苦，但您需要考虑是否值得将其定位在 5.0 以下。在 5.0 以下，有许多新的很酷的 API 不可用。Apple 不断加大针对他们的难度；例如，从 Xcode 4.5 中删除了 armv6 支持。

要低于 5.0（只要完成块为 nil），只需使用方便的`respondsToSelector`: 方法。

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]){
    [self presentViewController:test animated:YES completion:nil];
} else {
    [self presentModalViewController:test animated:YES];
} 
```

回应 Marc 的另一条评论：

> 在我的应用程序中可能有很多 If 语句！...我正在考虑创建一个封装此代码的类别，在 UIViewControler 上创建一个类别会让我被拒绝吗？

还有一个来自Full Decent：

> ...有没有办法手动使其不显示编译器警告？

首先，不，在其本身上创建一个类别`UIViewController`不会让您的应用被拒绝；除非该类别方法称为私有 API 或类似的东西。

类别方法对于此类代码来说是一个非常好的地方。此外，由于只有一次对已弃用 API 的调用，因此只有一个编译器警告。

要解决 Full Decent 的评论（问题），是的，您可以手动禁止编译器警告。[这是关于该主题的 SO 答案的链接](https://stackoverflow.com/a/1902083/927947)。类别方法也是抑制编译器警告的好地方，因为您只在一个地方抑制警告。您当然不想无所事事地使编译器静音。

如果我要为此编写一个简单的类别方法，它可能是这样的：

```
@implementation UIViewController (NJ_ModalPresentation)
-(void)nj_presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion{
    NSAssert(completion == nil, @"You called %@ with a non-nil completion. Don't do that!",NSStringFromSelector(_cmd));
    if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]){
        [self presentViewController:viewControllerToPresent animated:flag completion:completion];
    } else {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
        [self presentModalViewController:viewControllerToPresent animated:flag];
#pragma clang diagnostic pop
    }
}
@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T08:52:59.743

现在在 iOS 6 及更高版本中，您可以使用：

```
[[Picker presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

代替：

```
[[Picker parentViewControl] dismissModalViewControllerAnimated:YES]; 
```

...您可以使用：

```
[self presentViewController:picker animated:YES completion:nil]; 
```

代替

```
[self presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T06:02:46.410

`[self dismissModalViewControllerAnimated:NO];`已被弃用。

改为使用`[self dismissViewControllerAnimated:NO completion:nil];`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-04T11:52:26.017

采用

```
[self dismissViewControllerAnimated:NO completion:nil]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-18T13:49:59.570

警告仍然存在。为了摆脱它，我将它放入这样的选择器中：

```
if ([self respondsToSelector:@selector(dismissModalViewControllerAnimated:)]) {
    [self performSelector:@selector(dismissModalViewControllerAnimated:) withObject:[NSNumber numberWithBool:YES]];
} else {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

它使像我这样的强迫症患者受益；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-26T21:34:33.163

如果它可以帮助像我这样的其他新手，这是我使用的相应的 presentViewController 版本：

```
if ([self respondsToSelector:@selector(presentModalViewController:animated:)]) {
    [self performSelector:@selector(presentModalViewController:animated:) withObject:testView afterDelay:0];
} else {
    [self presentViewController:configView animated:YES completion:nil];
}
[testView.testFrame setImage:info]; //this doesn't work for performSelector
[testView.testText setHidden:YES]; 
```

我“一般”使用了 ViewController，并且能够使模态视图以不同的方式显示，具体取决于它被调用的操作（使用 setHidden 和 setImage）。以前一切都很好，但是 performSelector 忽略了“设置”的东西，所以如果你试图像我试图成为的那样高效，最终它似乎是一个糟糕的解决方案......

# mysql - Why is this MySQL query slow?

> ID：12445193
> 
> 赞同：1
> 
> 时间：2012-09-16T07:38:39.823
> 
> 标签：mysql

I have the following query, all relevant columns are indexed correctly. MySQL version 5.0.8\. The query takes forever:

```
SELECT COUNT(*) FROM `members` `t` WHERE t.member_type NOT IN (1,2)
AND ( SELECT end_date FROM subscriptions s
WHERE s.sub_auth_id = t.member_auth_id AND s.sub_status = 'Completed'
AND s.sub_pkg_id > 0 ORDER BY s.id DESC LIMIT 1 ) < curdate( ) 
```

`EXPLAIN` output:

```
----+--------------------+-------+-------+-----------------------+---------+---------+------+------+-------------
id  | select_type        | table | type  | possible_keys         | key     | key_len | ref  | rows | Extra
----+--------------------+-------+-------+-----------------------+---------+---------+------+------+-------------
1   | PRIMARY            | t     | ALL   | membership_type       | NULL    | NULL    | NULL | 9610 | Using where
----+--------------------+-------+-------+-----------------------+---------+---------+------+------+-------------
2   | DEPENDENT SUBQUERY | s     | index | subscription_auth_id, | PRIMARY | 4       | NULL |    1 | Using where
    |                    |       |       | subscription_pkg_id,  |         |         |      |      |            
    |                    |       |       | subscription_status   |         |         |      |      |            
----+--------------------+-------+-------+-----------------------+---------+---------+------+------+------------- 
```

Why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:07:55.137

您的查询很慢，因为在编写时您正在考虑 9,610 行，因此在 WHERE 子句中执行 9,610 SELECT 子查询。您确实应该首先将查询重写为 JOIN`members`和`subscriptions`表，您的 WHERE 条件仍然适用。

**编辑：**试试这个。

```
SELECT COUNT(*)
FROM `members` `t`
JOIN subscriptions s ON (s.sub_auth_id = t.member_auth_id)
WHERE t.member_type NOT IN (1,2)
AND s.sub_status = 'Completed'
AND s.sub_pkg_id > 0
AND end_date < curdate()
ORDER BY s.id DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T08:18:00.750

您的子选择引用父查询中的值。这被称为[相关（依赖）子查询](http://en.wikipedia.org/wiki/Correlated_subquery)，并且这样的查询必须对父查询中的每一行执行一次，这通常会导致性能不佳。将查询重写为 JOIN 通常更快，例如像这样

（**注意：**如果没有要测试的示例模式，不可能提前说这是否会更快并且仍然正确，您可能需要稍微调整一下）：

```
SELECT COUNT(*) FROM members t 
LEFT JOIN (
 SELECT sub_auth_id as member_id, max(id) as sid FROM subscriptions
 WHERE sub_status = 'Completed'
 AND sub_pkg_id > 0
 GROUP BY sub_auth_id
 LEFT JOIN (
  SELECT id AS subid, end_date FROM subscriptions
  WHERE sub_status = 'Completed'
  AND sub_pkg_id > 0
 ) sdate ON sid = subid
) sub ON sub.member_id = t.member_auth_id
WHERE t.member_type NOT IN (1,2)
AND sub.end_date < curdate( ) 
```

这里的逻辑是：

1.  对于每个成员，找到他的最新订阅。
2.  对于每个最新订阅，找到其结束日期。
3.  将这些 member-latest_sub_date 对加入成员列表。
4.  过滤列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:02:58.087

警告：我不是 MySQL 专家，但在不同的 SQL 风格 (VFP) 方面相当出色，但我相信如果：

1.  您只计算一个字段，比如说 memberid，而不是 *。

2.  您的比较`NOT IN (1,2)`被替换为`> 2`（前提是有效）。

3.  我认为，`ORDER BY`在您的子选择中是不必要的。您正在尝试获取最后完成的订阅？

4.  `< curdate()`应该在您的子选择中`WHERE`。

    ```
    (SELECT end_date FROM subscriptions s
    WHERE s.end_date < curdate() and s.sub_auth_id = t.member_auth_id AND 
    s.sub_status =  'Completed' AND s.sub_pkg_id > 0 ORDER BY s.id DESC LIMIT 1 ) 
    ```

5.  调整您的子选择，以便尽快修剪集合。第一个条件应该是最不可能发生的条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T05:01:05.880

我最终这样做了：

```
select count(*) from members t 
JOIN subscriptions s ON s.sub_auth_id = t.member_auth_id
WHERE t.membership_type > 2 AND s.sub_status = 'Completed' AND s.sub_pkg_id > 0 
AND  s.sub_end_date < curdate( ) 
AND s.id = (SELECT MAX(ss.id) FROM subscriptions ss WHERE ss.sub_auth_id =   t.member_auth_id) 
```

我相信这个问题是由于一个直到 MySQL 6 才会修复的错误。

# c# - 直接使用文件还是将文件的所有内容存储到内存中并从那里编辑数据更好？

> ID：12445196
> 
> 赞同：1
> 
> 时间：2012-09-16T07:39:04.863
> 
> 标签：c#, application-design

我目前正在开发一个 todolist 系统，它就像一个日历来存储你的任务，一旦你完成它就可以将它们核对掉。我们还应该能够撤消所做的更改。

目前，我的项目伙伴建议我们将数据存储到不同日期的文件中，当我们想要搜索特定任务时，只需搜索文件是否存在，然后在需要时编辑和直接操作文件。

但是，我觉得最好将数据存储到 1 个大文件中，并在我们的程序执行时将其加载到内存中（可能是任务列表）。我无法解释为什么。

在处理这个问题时，OOP 是否会出现？

对不起，如果我有点困惑，因为我还在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:48:55.847

这是数据库解决方案的完美任务。我建议您使用 Visual Studio 中包含的 SQL Server 数据库来执行此任务。将每个任务存储为表格中的行，并在编辑时选择日历视图的日期和主题以及一个任务的所有值。VS 有一些非常好的工具可以在几分钟内创建这样的应用程序（对于有经验的用户）

当几个人需要同时编辑数据时，处理文件总是一团糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:04:05.517

首先，这是一个持久性问题，应该使用众所周知的模式进行圆顶处理。您可以使用数据库和存储库模式来解决这个问题。Nosql 数据库也是一种选择，因为它易于设置并且没有与 SQL 数据库相关的开销。

但是，如果您可以选择平面文件，那么将所有数据保存在内存中就会出现异常发生或程序关闭您丢失所有数据的缺陷。使用创建读取更新和删除 CRUD 循环需要持久性。这会导致您在进行时以小块的形式持续存在，并且在崩溃时只会丢失少量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:14:21.320

最佳实践始终取决于您正在做的工作，因为您必须对待办事项列表进行多次操作，因此如果您使用客户端内存（如 sdf 文件）而不是制作文件，它会更好，因为 sdf 文件可以工作作为数据库，因为它重量轻，大数据比文件更容易处理

# java - Grouping elements in HashMap into certain groups

> ID：12445200
> 
> 赞同：0
> 
> 时间：2012-09-16T07:39:22.667
> 
> 标签：java, hashmap, grouping

I have a set of elements stored in HashMap. So, I have to compare the values and if the values retrieved are bigger than a certain value, it should be grouped into Group-n (where n = represent the n-th group).

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

public class GroupTag{

    public static void main(String[] args) 
    {   
        Map<String, Integer> myMap = new HashMap<String, Integer>();
        myMap.put("0-1", 33);
        myMap.put("0-2", 29);
        myMap.put("0-3", 14);
        myMap.put("0-4", 8);
        myMap.put("1-2", 41);
        myMap.put("1-3", 15);
        myMap.put("1-4", 17);
        myMap.put("2-3", 1);
        myMap.put("2-4", 16);
        myMap.put("3-4", 18);

        for(int i = 0; i < 5; i++)
        {
            for(int j = i+1; j < 4; j++)
            {
                String testLine = i+"-"+j; 
                int itemA = myMap.get(testLine);
                boolean greaterThanAll = true;

                for(int k = j+1; k < 5; k++)
                {
                    String newLine = j+"-"+k;
                    int itemB = myMap.get(newLine);

                    if(itemA <= itemB)
                    {       
                        //Condition: e.g IF and ONLY IF all myMap.get(0-1)>than myMap.get(1-2), 
                        //myMap.get(1-3),myMap.get(1-n)
                        //THEN trigger an event to group ALL of myMap.get(1-n) to myMap.get(0-1)
                        //THEN remove all the values that satisfied the condition from the HashMap list
                        greaterThanAll = false;
                        break;
                    }
                }  

                if (greaterThanAll) 
                {
                    for(int m = j+1; m < 5; m++)
                    {
                         String removeLine = j+"-"+m;
                         //Group myMap.get(removeLine) to myMap.get(testLine)
                         //myMap.remove(removeLine);
                         System.out.println("Index " + removeLine + " : " +  myMap.get(removeLine));
                    }
                    //myMap.remove(testLine);
                    System.out.println("Main Index " + testLine + " : " +  myMap.get(testLine));
                }
            }       
        }
    }
}

Example of how the element are compared:
IF myMap.get("0-1")>myMap.get("1-n"): Grouped to Group 0 and REMOVE both values from list
IF myMap.get("0-2")>myMap.get("2-n"): Grouped to Group 1 and REMOVE both values from list
IF myMap.get("0-3")>myMap.get("3-n"): Grouped to Group 2 and REMOVE both values from list
THEN the loop goes on to compare myMap.get("1-2")>myMap.get("2-n") and so on..

Desired outcome:
Retrieve number of Groups: 2
Retrieve size of Group 0: 3
Retrieve elements in Group 1: [1, 16] 
```

Basically, I just need a way to group/store a set of elements or data together?

EDIT: I posted the conditions. I thought it would be easier leaving the conditions out as I just wanted to group some elements together.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:49:45.343

首先，为您的要求构建预期的字符串键是必需的吗？迭代地图并查看值是否大于数字不是更容易吗？

也许[LambdaJ](http://code.google.com/p/lambdaj/)是您正在寻找的东西（直到 Java 获得本机 Lambda 表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:08:10.103

参考： [http](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#subSet(E) ://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#subSet (E, boolean, E, boolean)

您可以使用 TreeSet 中的子集（）操作。

```
public NavigableSet<E> subSet(E fromElement,
                                      boolean fromInclusive,
                                      E toElement,
                                      boolean toInclusive)

    OR

public SortedSet<E> subSet(E fromElement,
                               E toElement) 
```

# c# - 将 C# 应用程序与 Oracle 10g 连接：ORA-12154：TNS：无法解析指定的连接标识符

> ID：12445201
> 
> 赞同：5
> 
> 时间：2012-09-16T07:39:26.027
> 
> 标签：c#, c#-4.0, oracle10g

我是使用数据库的初学者。我正在尝试从 ac# 应用程序访问 Oracle10g 数据库。但是当我这样做时，我得到了这个错误：

> ORA-12154: TNS: 无法解析指定的连接标识符”

我正在使用以下代码：

```
string oradb = "Data Source=ORCL;User Id=system;Password=goodbye;";
OracleConnection conn = new OracleConnection(oradb);  // C#
conn.Open(); 
```

连接字符串中是否有错误`oradb`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T07:47:19.817

启动`Visual Studio`，打开`View`菜单 + 服务器资源管理器。

1.  鼠标右键单击`Data Connection`+ `Add Connection`+ 选择`Oracle Database`
2.  服务器名称：`localhost`或`name of your machine`，设置用户名和密码并单击测试连接以验证上述参数。如果测试成功，请按 OK。

从属性窗口中，您可以获得连接字符串，它应该看起来像：

```
Data Source=localhost;Persist Security Info=True;User ID=scott;Password=***********;Unicode=True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:14:18.353

Oracle 只是说它找不到数据库。

如果您正在运行本地`Express Edition`数据库，您应该可以只`XE`用作实例名称，并且所有内容都应该已经设置好，否则您可以最轻松地将其添加到`tnsnames.ora`.

要找到正确`tnsnames.ora`的更改，您可以尝试（从命令提示符）

```
tnsping ORCL 
```

这将告诉您 Oracle 正在使用哪些文件来尝试查找数据库。如果`tnsping`是未知命令，您可能需要搜索它并在运行它之前转到正确的位置。

您找到正确的一个`tnsnames.ora`，您需要将实例添加`ORCL`到其中。应该有一个包含示例的现有文件，该文件的语法太复杂，无法在这里回答，如果您需要帮助，[Oracle 有相当广泛的文档](http://docs.oracle.com/cd/B19306_01/network.102/b14213/tnsnames.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:36:45.700

这是一个非常常见的 oracle 错误。简而言之，这意味着您已经命名了要连接的数据库，而 Oracle 不知道您在说谁。我建议修复 ORA-12154 的 6 个步骤：

1.  检查实例名称是否已在 tnsnames.ora 中正确输入。
2.  实例或数据库名称的末尾不应有控制字符。
3.  TNS 条目周围的所有括号都应正确终止
4.  sqlnet.ora 中的域名条目不应与完整的数据库名称冲突。
5.  如果问题仍然存在，请尝试在 tnsnames.ora 中重新创建 TNS 条目。
6.  最后，您可以使用 SQL*Net Easy 配置实用程序添加新条目。

有关 oracle 网站或此处的更多信息：http: [//turfybot.free.fr/oracle/11g/errors/ORA-12154.html](http://turfybot.free.fr/oracle/11g/errors/ORA-12154.html)

# iis - Got 404 error when rewrite URL using UrlRewritingNet in IIS 7

> ID：12445202
> 
> 赞同：2
> 
> 时间：2012-09-16T07:39:26.853
> 
> 标签：iis, iis-7, url-rewriting, iis-6, http-status-code-404

I using UrlRewritingNet dll from [http://www.urlrewriting.net/](http://www.urlrewriting.net/) But I got the 404.0 not found error:

```
Module  IIS Web Core
Notification    MapRequestHandler
Handler StaticFile
Error Code  0x80070002 
```

Here is Handle mapping of StaticFile handler [http://imageshack.us/a/img163/5455/31274006.png](http://imageshack.us/a/img163/5455/31274006.png)

I've configured the same code, web.config with IIS 6 (uncheck Check for file exists) and it works. I've tried many ways I get from another posts but it didn't work. Any tip about this case?

//Since I'm *nix admin so maybe I lack some important points to make a proper question, sorry about that, if you need any info please let me know. TIA.

# ruby-on-rails - Rails datetime - 在更新缺少年份的日期时插入当前年份

> ID：12445204
> 
> 赞同：0
> 
> 时间：2012-09-16T07:39:39.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime

在我的页面上，我使用 jquery datetimepicker 从用户那里获取日期和时间。当用户选择一个日期时间时，我得到的日期时间的格式是，例如：“Fri, Sep 21, 1:00PM”。我没有得到年份，因为得到四位数的年份会使整个文本框变得太长。

当我将此日期（即周五，9 月 21 日，下午 1:00）传回我的控制器，并使用 update_attributes 更新数据库中的日期时，插入的日期为“0000-09-21 13:00 :00.000000”。因为我错过了日期中的年份，所以年份变为 0000。我显然想要 2012 年。有什么想法可以实现这一目标吗？请注意，我不想对 2012 年进行硬编码，但希望它恢复当前年份。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:19:51.780

试试这个

```
1.9.3p194 :012 > require 'date'
 => true

1.9.3p194 :013 > d= DateTime.parse("Fri, Sep 21, 1:00PM")
 => #<DateTime: 2012-09-21T13:00:00+00:00 ((2456192j,46800s,0n),+0s,2299161j)> 
```

您将获得当前年份。

# php - 如何显示 ajax 间隔的图像

> ID：12445210
> 
> 赞同：1
> 
> 时间：2012-09-16T07:40:23.420
> 
> 标签：php, ajax, image, intervals

我正在开发一个基于 ajax 的网站，我想在其中显示 ajax 加载时间的图像（如进度条）。我的意思是，想在用户单击 div 后显示图像，并且需要在从 ajax 页面获取结果后显示它。我怎样才能做到这一点...？提前致谢。

这是代码示例

```
$.ajax({
            dataType:'json',
            type:"POST",
            url:"ajaxJobs.php",
            data:{

                p:$(this).attr('id')
            },
            success:function(result){

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:43:04.600

在启动 AJAX 时显示微调器（顺便说一下，它称为微调器），并在`success`函数中隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:53:16.427

使用这样的东西

```
<img id="loading" src="path/to/loading/img" />
<script>
$.ajax({
        dataType:'json',
        type:"POST",
        url:"ajaxJobs.php",
        data:{

            p:$(this).attr('id')
        },
        success:function(result){
            $('#loading).hide();
        }
    });
</script> 
```

# c# - 在网络方法中创建 cookie

> ID：12445217
> 
> 赞同：2
> 
> 时间：2012-09-16T07:41:56.750
> 
> 标签：c#, jquery, asp.net, c#-4.0, c#-3.0

我有一个 web 方法通过 jquery-ajax 方法检查数据库中的用户我想如果客户端存在于数据库中我在客户端用用户名创建一个 cookie 但我知道响应在静态方法中不可用。我如何创建一个cookie 在使用 jquery ajax 调用的方法中，并且必须是静态的。我的代码不起作用，因为响应不可访问

```
 if (olduser.Trim() == username.Trim() && password.Trim()==oldpass.Trim())
        { retval =olduser;

        HttpContext context = HttpContext.Current;
        context.Session[retval.ToString()] = retval.ToString();
        HttpCookie cook = new HttpCookie("userath");
        cook["submituser"] = "undifiend";
        Response.Cookies.Add(cook);

       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:22:46.703

您可以像从当前 HtppContext 访问 Session 对象一样访问 Response 对象。

你的代码应该这样结束：

```
context.Response.Cookies.Add(cook); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:51:56.437

您可以将 HttpContext 从 AJax 调用首先进入的 Web 方法传递到静态方法。

编辑：或者，不要使用静态方法。无论哪种方式，HttpContext 都可以从 Ajax 调用通过 [WebMethod] 注释看到的实例化 Web 方法获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:34:24.790

1.  首先进行ajax调用。你可以阅读这篇很棒的教程[5 Ways to Make Ajax Calls with jQuery](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)
2.  其次让服务器响应。例如，如果回调是“1”，则意味着您应该设置 cookie，如果它是“0”，则不应该设置。
3.  最后，您可以使用这个 jquery 插件轻松设置 cookie：[jquery.cookie](https://github.com/carhartl/jquery-cookie)。

# java - 如何将数组放入Java中的对象中？

> ID：12445219
> 
> 赞同：1
> 
> 时间：2012-09-16T07:42:18.933
> 
> 标签：java, arrays, object

我正在尝试克隆一个数组并作为对象返回，而不是数组类型。z

```
 public IntVector clone()
 {

     IntVector cloneVector = new IntVector(3);

     int[] newItems = new int[10];
     for(int i=0 ; i<itemCount_; ++i)
      {
      newItems[i] = items_[i];
      }

     cloneVector = newItems; // is there a way to do something like this??

    return cloneVector;
 } 
```

主要方法看起来像这样

```
 public static void main(String[] args)
  {

   IntVector vector = new IntVector(5);

   vector.push(8);
   vector.push(200);
   vector.push(3);
   vector.push(41);

   IntVector cloneVector = vector.clone();
  } 
```

*还有其他两种创建数组的方法：IntVector() 并将值放入数组：push()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:56:13.710

声明一个新的构造函数，`IntVector`它接受一个 int 数组和一个计数：

```
IntVector(int[] data, int n) {
  items_ = data.clone();
  itemCount_ = n;
} 
```

然后你可以这样写克隆：

```
public IntVector clone() {
  return new IntVector(items_, itemCount_);
} 
```

如果你愿意，你可以创建新的构造函数`private`，所以只能`clone`使用它。

# php - Post data to facebook page with no user interaction

> ID：12445220
> 
> 赞同：0
> 
> 时间：2012-09-16T07:42:20.540
> 
> 标签：php, facebook, facebook-graph-api

After I was searching how to post data to facebook page, now I can do it well.

```
<?php
// Remember to copy files from the SDK's src/ directory to a
// directory in your application on the server, such as php-sdk/
require '../src/facebook.php';

$facebook = new Facebook(array(
                    'appId'  => '491652477512398',
                    'secret' =>     'de3d98a619ade1afb4152d6be90acdb9',
                    ));

$user_id = $facebook->getUser();                        
echo "User data ".$user_id." \n";

try {

if($user_id) {

    $ret_obj = $facebook->api('/microdigit.it/feed/', 'POST',
                                array(  
                                    //'access_token' => 'AAACEdEose0cBAExkj6B4lnjpUtfSSVTOZA9CuvMA1SDjyCQWRnfZCbc1SimyRsZCTa6CUFZB2Q3ZBfVIv0qJmW13XkPZASpt9UDE4qQI488mDqlznDZA2ih',
                                    'message' => '*** Microdigit Microdigit 000 ****',
                                    'name' => 'name 777 after log out test',
                                    'caption' => 'this is caption for action link',
                                    'description' => 'here goes description and links http:anotherfeed.com | http://facebook.com/anotherfeed',
                                    'picture' => 'http://www.google.com/tv/images/slivetv.png',
                                    'link' => 'www.yahoo.com',
                                    'properties' => array(
                                    array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
                                    array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
                                ),                  
    ));

    echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';  

    }else
    {
    $login_url = $facebook->getLoginUrl( array( 'scope' => 'offline_access,publish_stream' ) );
    echo 'Please <a href="' . $login_url . '">login.</a>';
}

} catch(FacebookApiException $e) {

echo $e;

$login_url = $facebook->getLoginUrl( array(                       
                        'scope' => 'offline_access,publish_stream'
                   )); 

echo 'Please <a href="' . $login_url . '">login.</a>';
error_log($e->getType());
error_log($e->getMessage());
}
?> 
```

But problem is I want to post
that information to page without needing any user interaction.
I mean whenever I run this code, If user is already log off,
my program need user interaction (such as login to facebook) before it post to facebook page.

So I will be appreciated every suggestion that can show me how to post data to facebook without needing any user interaction.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:51:11.157

根据您要使用的触发器，一种方法是使用[Cron Jobs](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)。您可以安排运行 php 脚本。

# ios - 401 错误 - 使用 AFNetworking AFHTTPClient 和 Tastypie 进行基本身份验证

> ID：12445221
> 
> 赞同：1
> 
> 时间：2012-09-16T07:42:23.533
> 
> 标签：ios, authentication, afnetworking, tastypie

我正在使用 AFNetworking 的 AFHTTPClient 从我的 IOS 应用程序调用我的服务器，该服务器使用 Django 和 TastyPie。当我在服务器端关闭身份验证时，它工作得很好；但是，当我需要身份验证并将正确的用户名和密码插入我的代码时，我收到以下 401 身份验证错误：

```
\2012-09-16 00:24:37.877 RESTtest[76909:f803] 
Complex AF: Error Domain=AFNetworkingErrorDomain Code=-1011 
"Expected status code in (200-299), got 401" 
UserInfo=0x686ba00 {AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0x686f130>, 
NSErrorFailingURLKey=http://127.0.0.1:8000/api/v1/shoppinglist, 
NSLocalizedDescription=Expected status code in (200-299), got 401, 
AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest http://127.0.0.1:8000/api/v1/shoppinglist>} 
```

这是我的代码：

AFAPIClient.h #import "AFHTTPClient.h"

```
@interface AFAPIClient : AFHTTPClient

-(void)setUsername:(NSString *)username andPassword:(NSString *)password;

+ (AFAPIClient *)sharedClient;

@end 
```

AFAPIClient.m:

```
#import "AFAPIClient.h"
#import "AFJSONRequestOperation.h"

static NSString * const baseURL = @"http://@127.0.0.1:8000/api/v1";

@implementation AFAPIClient

+ (AFAPIClient *)sharedClient {
    static AFAPIClient *_sharedClient = nil;
    static dispatch_once_t pred;
    dispatch_once(&pred, ^{
        _sharedClient = [[AFAPIClient alloc] initWithBaseURL:[NSURL URLWithString:baseURL]];
        //[_sharedClient setAuthorizationHeaderWithUsername:@"myusername" password:@"mypassword"]; I tried putting the authorization command here
    });

    return _sharedClient;
};

#pragma mark - Methods

-(void)setUsername:(NSString *)username andPassword:(NSString *)password;
{
    [self clearAuthorizationHeader];
    [self setAuthorizationHeaderWithUsername:username password:password];
}

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setParameterEncoding:AFJSONParameterEncoding];

    //[self setAuthorizationHeaderWithUsername:@"myusername" password:@"mypassword"]; I also tried putting the authorization command here

    // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
    [self setDefaultHeader:@"Accept" value:@"application/json"];

    return self;
}

@end 
```

TQViewController.h：

```
[...]
- (IBAction)sendAFClientRequest:(id)sender {
    //[[AFAPIClient sharedClient] setUsername:@"myusername" andPassword:@"mypassword"];
    [[AFAPIClient sharedClient] getPath:@"shoppinglist" parameters:nil success:^(AFHTTPRequestOperation *operation, id response) {
        NSLog(@"Complex AF: %@", [response valueForKeyPath:@"objects"]);
    } failure:^(AFHTTPRequestOperation *operation, id response) {
        NSLog(@"Complex AF: %@", response);
    }
     ];

}
[...] 
```

我知道这不是我的服务器或我的用户名/密码的问题，因为我可以通过将用户名/密码插入 URL 来很好地进行身份验证：

```
@"http://myusername:mypassword@127.0.0.1:8000/api/v1/shoppinglist" 
```

对此的任何帮助都会很棒。能够使用 AFHTTPClient 而不将身份验证信息直接插入静态基本 URL 会很棒，这似乎完全不合适。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:58:28.583

基于此：[https ://github.com/AFNetworking/AFNetworking/issues/426](https://github.com/AFNetworking/AFNetworking/issues/426)

我重写了`- (void)getPath:(NSString *)path parameters...`AFHTTPClient 子类中的方法，使其看起来像这样：

```
- (void)getPath:(NSString *)path parameters:(NSDictionary *)parameters
    success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
    failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure
{
    NSURLRequest *request = [self requestWithMethod:@"GET" path:path parameters:parameters];
    AFHTTPRequestOperation *operation = [self HTTPRequestOperationWithRequest:request success:success failure:failure];
    [operation setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
        NSURLCredential *newCredential = [NSURLCredential credentialWithUser:self.username password:self.password persistence:NSURLCredentialPersistenceForSession];
        [challenge.sender useCredential:newCredential forAuthenticationChallenge:challenge];
    }];
    [self enqueueHTTPRequestOperation:operation];
} 
```

它只是将身份验证挑战块添加到 AFHTTPRequestOpertaion，其余与原始实现相同[https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m)

# html - 单选按钮的属性链接在 Chrome 中不起作用

> ID：12445225
> 
> 赞同：1
> 
> 时间：2012-09-16T07:43:28.843
> 
> 标签：html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:47:25.677

当用户单击表单控件而不是提交按钮时，您需要 JavaScript 来重定向用户。

然而，想一想，这*不是用户期望发生的*。单选按钮应从一组相关选项中做出单个选择。*控件不会*将您带到不同的页面。

相反，考虑一个带有提交按钮的实际表单。

# audiounit - 如何从 AudioBufferList 获取样本

> ID：12445227
> 
> 赞同：1
> 
> 时间：2012-09-16T07:43:59.543
> 
> 标签：audiounit

我从 wav 文件中获取 AudioBufferList（采样率为 44100HZ，长时间为 2 秒）。但我无法获得 44100*2=88200 个样本。实际上，我得到了一个包含 512 个 nNumberBuffers 的 AudiobufferList。如何从 AudioBufferList 中获取样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-06T07:13:00.150

这是我从 wav 文件中获取样本的方法

```
-(float *) GetSoundFile:(NSString *)fileName
{
NSBundle *bundle = [NSBundle mainBundle];
NSString *path = [bundle pathForResource:[fileName stringByDeletingPathExtension]
                                  ofType:[fileName pathExtension]];

NSURL *audioURL = [NSURL fileURLWithPath:path];
if (!audioURL)
{
    NSLog(@"file: %@ not found.", fileName);
}

OSStatus                        err = 0;
                                theFileLengthInFrames = 0;  //this is global
AudioStreamBasicDescription     theFileFormat;
UInt32                          thePropertySize = sizeof(theFileFormat);
ExtAudioFileRef                 extRef = NULL;
void*                           theData = NULL;
AudioStreamBasicDescription     theOutputFormat;

// Open a file with ExtAudioFileOpen()
err = ExtAudioFileOpenURL((__bridge CFURLRef)(audioURL), &extRef);

// Get the audio data format
err = ExtAudioFileGetProperty(extRef, kExtAudioFileProperty_FileDataFormat, &thePropertySize, &theFileFormat);

theOutputFormat.mSampleRate = samplingRate = theFileFormat.mSampleRate;
theOutputFormat.mChannelsPerFrame = numChannels = 1;

theOutputFormat.mFormatID = kAudioFormatLinearPCM;
theOutputFormat.mBytesPerFrame = sizeof(Float32) * theOutputFormat.mChannelsPerFrame ;
theOutputFormat.mFramesPerPacket = theFileFormat.mFramesPerPacket;
theOutputFormat.mBytesPerPacket = theOutputFormat.mFramesPerPacket * theOutputFormat.mBytesPerFrame;
theOutputFormat.mBitsPerChannel = sizeof(Float32) * 8 ;
theOutputFormat.mFormatFlags = 9 | 12;

//set the output property
err = ExtAudioFileSetProperty(extRef, kExtAudioFileProperty_ClientDataFormat, sizeof(AudioStreamBasicDescription), &theOutputFormat);

// Here I Get the total frame count and write it into gloabal variable
thePropertySize = sizeof(theFileLengthInFrames);
err = ExtAudioFileGetProperty(extRef, kExtAudioFileProperty_FileLengthFrames, &thePropertySize, &theFileLengthInFrames);

UInt32 dataSize = (UInt32)(theFileLengthInFrames * theOutputFormat.mBytesPerFrame);
theData = malloc(dataSize);

AudioBufferList theDataBuffer;
if (theData)
{
    theDataBuffer.mNumberBuffers = 1;
    theDataBuffer.mBuffers[0].mDataByteSize = dataSize;
    theDataBuffer.mBuffers[0].mNumberChannels = theOutputFormat.mChannelsPerFrame;
    theDataBuffer.mBuffers[0].mData = theData;

    // Read the data into an AudioBufferList
    err = ExtAudioFileRead(extRef, (UInt32*)&theFileLengthInFrames, &theDataBuffer);
}

return (float*)theDataBuffer.mBuffers[0].mData;  
//here is the data that has thefilelengthInframes amount frames 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:29:51.093

AudioBufferList 不应设置为固定大小，因为它是一个临时缓冲区，取决于硬件。大小是不可预测的，您只能设置一个更可取的大小，而且在 2 次读取调用之间不被授予相同的大小。要获得 88200 个样本（或您喜欢的样本），您必须使用 AudioBufferList 中的样本逐步填充新缓冲区。我建议使用为此目的制作的这个循环缓冲区[https://github.com/michaeltyson/TPCircularBuffer](https://github.com/michaeltyson/TPCircularBuffer) 。希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:18:57.773

据我所知，AudioBufferList 必须由您配置以接收数据，然后必须由一些读取函数（例如 ExtAudioFileRead()）填充。因此，您应该通过分配所需的缓冲区（通常为 1 或 2）来准备它，将 nNumberBuffers 设置为该数字并将音频数据读取给它们。AudioBufferList 仅存储该缓冲区，它们将包含帧值。

# javascript - jCrop 不更新隐藏字段

> ID：12445234
> 
> 赞同：2
> 
> 时间：2012-09-16T07:45:46.893
> 
> 标签：javascript, jquery, jcrop

我正在使用 jCrop 裁剪某人上传的图像。它在我的本地机器上工作正常，但在服务器中它无法更新隐藏字段中的坐标（裁剪区域）。

我尝试了一下，但仍然找不到问题:(

**HTML**

```
<form id="cropIt" action="crop.php" method="post">
            <input type="hidden" id="cropTop" name="x" value="0" />
            <input type="hidden" id="cropLeft" name="y" value="0" />
            <input type="hidden" id="cropWidth" name="w" value="0" />
            <input type="hidden" id="cropHeight" name="h" value="0" />
            <input type="hidden" id="image_name" name="image_name" value="<?php echo $uploadDir . $file; ?>" />
            <p style="paddin-top: 10px; text-align: center;"><input type="submit" name="cropImage" /></p>
        </form> 
```

**JavaScript**

```
function updateCoords(c) {
                $('#cropTop').val(c.x);
                $('#cropLeft').val(c.y);
                $('#cropWidth').val(c.w);
                $('#cropHeight').val(c.h);
            }

           function checkCoords() {
               if (parseInt($('#w').val())) {
                    return true;
                }
            //   alert('Please select a crop region then press submit.');
            //   return false;
           };

        $(function($) {
            var newImg = $("#profileImage").clone();
            newImg.css("display", "none").removeAttr("id").appendTo("body");
            var profileImgWidth = newImg.width();
            var profileImgHeight = newImg.height();

            newImg.remove();

            $('#profileImage').Jcrop({
                onSelect: updateCoords,
                onChange: updateCoords,
                boxWidth: 400, 
                boxHeight: 300,
                trueSize: [profileImgWidth, profileImgHeight]
            });
        }); 
```

# xamarin.ios - 未定义的“___divmodsi4”将 Monotouch 项目与原生库的包装器链接起来

> ID：12445236
> 
> 赞同：1
> 
> 时间：2012-09-16T07:46:39.350
> 
> 标签：xamarin.ios, linker-errors

我为 twilio iOS 库构建了一个包装器。我正在使用以下 LinkWith

```
[assembly: LinkWith ("libTwilioClient.a", LinkTarget.ArmV6 | LinkTarget.ArmV7 | LinkTarget.Simulator, ForceLoad = true ,Frameworks="MediaPlayer SystemConfiguration AVFoundation")] 
```

在 Monotouch 绑定项目中。

当我创建一个使用上述包装库的 iPad 项目时，我收到以下错误

```
Undefined symbols for architecture armv7:
  "___divmodsi4", referenced from:
      _jbuf_update in libTwilioClient.a(jbuf.o)
      _pjmedia_jbuf_get_frame2 in libTwilioClient.a(jbuf.o)
      _pjmedia_rtcp_rx_rtp2 in libTwilioClient.a(rtcp.o)
      _pjmedia_rtcp_rx_rtcp in libTwilioClient.a(rtcp.o)
      _rec_cb in libTwilioClient.a(audiotest.o)
      _play_cb in libTwilioClient.a(audiotest.o)
  "___udivmodsi4", referenced from:
      _update_filter in libTwilioClient.a(resample.o)
ld: symbol(s) not found for architecture armv7 
```

在这一点上，我不知道如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:53:08.140

该函数是编译器用来实现比一些 CPU 指令更复杂的数学运算的助手。您是否有可能使用一个编译器构建您的库，并且现在链接到不同的环境和不同的编译器？如果您使用`gcc`该功能构建将由`libgcc.a`.

# xslt - XML XSLT 结果文档 fseek

> ID：12445238
> 
> 赞同：1
> 
> 时间：2012-09-16T07:47:10.683
> 
> 标签：xslt, document, fseek

使用 XSLT 转换，我想将一个 XML 文件转换为一个 HTML 文件，该文件又代表另一个文件的各个块，并带有指向所代表文件的链接。

输入 XML 文件：

```
<File>
  <Name>foo.jpg<Name>
  <Chunk>
      <Offset>200</Offset>
      <Length>100</Length>
      <Data>
          <![CDATA[data bytes, encoded in base64, can be greater than length 100 too, but first 100 decoded bytes are valid.]]>
      </Data>
  </Chunk>
  <Chunk>
  ...
</File> 
```

输出应该是一个 html 文件，该文件具有指向 foo.jpg 的有效链接，即，还有另一个名为“foo.jpg”的隐式输出文件，其中包含来自块中 cdata 部分的数据，位于它们指定的偏移量处。

```
<html>
   <body>
      <a href="http://example.com/images/foo.jpg">file</a>
   </body>
</html> 
```

[相关问题](https://stackoverflow.com/questions/12438865/xslt-interpret-cdata-and-write-to-file)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:58:07.550

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">

  <xsl:document>
        <html>
           <body>
              <a href="http://example.com/images/{Name}">file</a>
           </body>
        </html>
  </xsl:document>

  <xsl:result-document href="file:///c:/temp/delete/{Name}" method="text">
    <xsl:apply-templates select="Chunk">
     <xsl:sort select="Offset" data-type="number"/>
    </xsl:apply-templates>
  </xsl:result-document>
 </xsl:template>

 <xsl:template match="Chunk">
  <xsl:value-of select="substring(Data, 1, Length)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档**（有两个块）时：

```
<File>
  <Name>foo.jpg</Name>
  <Chunk>
      <Offset>200</Offset>
      <Length>100</Length>
      <Data>A01234567891234567890234567890134567890124567890123567890123467890123457890123456890123456790123456780123456789</Data>
  </Chunk>
  <Chunk>
      <Offset>1</Offset>
      <Length>200</Length>
      <Data>Z0123456789123456789023456789013456789012456789012356789012346789012345789012345689012345679012345678012345678901234567891234567890234567890134567890124567890123567890123467890123457890123456890123456790123456780123456789</Data>
  </Chunk>
</File> 
```

**产生想要的正确结果**：

```
<html>
   <body><a href="http://example.com/images/foo.jpg">file</a></body>
</html> 
```

和创建的文件：`c:\temp\delete\foo.jpg`具有正确的，想要的内容：

```
Z0123456789123456789023456789013456789012456789012356789012346789012345789012345689012345679012345678012345678901234567891234567890234567890134567890124567890123567890123467890123457890123456890123456A012345678912345678902345678901345678901245678901235678901234678901234578901234568901234567901234567 
```

# php - 无法打开流没有这样的文件或目录。php

> ID：12445241
> 
> 赞同：3
> 
> 时间：2012-09-16T07:47:30.713
> 
> 标签：php, php-include

我有一个`Profile.php`包含`Profile_Control.php`和`profile_control`包含的文件`Profile_Model.php`。到这里为止，一切都很好。

我有另一个名为`Upload.php`从中上传数据的脚本。这个 Upload.php 还包括`Profile_Control.php`并且如你所知`Profile_Control`包括`Profile_Model.php`。现在我不知道为什么它会给出这样的错误。当 Profile.php 加载时它工作正常但是当我上传数据时它说

```
Warning: include(../Model/Profile_Model.php) [function.include]: failed to open stream: No such file or directory in C:\wamp\www\php\gagster\Control\Profile_Control.php on line 4 
```

在 Upload.php 中：

```
include_once("../../Control/Profile_Control.php"); 
```

在 Profile.php 中：

```
include_once("../Control/Profile_Control.php"); 
```

在 Profile_Control.php 中：

```
include_once("../Model/Profile_Model.php"); 
```

文件结构：

```
 +-Control/
 |  |    
 |  +---- Profile_Control.php
 |
 +-Model/
 |  |
 |  +---- Profile_Model.php
 |
 +-Other/
    |
    +-- Upload/
           |
           +---- Upload.php 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T07:58:07.533

`../`您为什么不尝试提供相对于您所在位置的绝对路径，而不是使用相对路径 ( ) `$_SERVER['DOCUMENT_ROOT']`。我通常定义一个常量来帮助提高可读性 -

```
define('_root',$_SERVER['DOCUMENT_ROOT']);

include(_root.'/Control/Profile_Control.php'); 
```

现在，您可以在要包含的每个文件中放置相同的代码行`Profile_Control.php`。

[user1280616](https://stackoverflow.com/a/12445259/558021)还提出了一个关于在包含文件之前测试文件是否存在的有效观点。也许您也应该考虑实施它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:50:44.677

你可以使用 php`file_exists()`函数来确保包含该文件，如果它不是你的东西

```
if (file_exists($filename)) {
    echo "The file $filename exists";
} else {
    echo "The file $filename does not exist";
} 
```

并使用

```
defined('root') ? null : define('root', "url of your site "  ); 
```

比

```
include_once(root."rest of address"); 
```

# android - 在 android 开发中使用 Admob 会使示例代码崩溃

> ID：12445243
> 
> 赞同：0
> 
> 时间：2012-09-16T07:47:32.437
> 
> 标签：android, admob

我只是想了解在我的 android 应用程序中使用 Admob 的基础知识，但由于某种原因，即使是示例代码也会使我的设备和模拟器崩溃。我按照[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)上的说明进行操作，但没有解决我的问题。据我所见，所有内容都已正确包含，我已将 jar 文件添加到构建路径等。但由于某种原因，我总是收到如下错误：

```
09-16 00:36:11.855: E/AndroidRuntime(305): FATAL EXCEPTION: main
09-16 00:36:11.855: E/AndroidRuntime(305): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.example.ads.xml/com.google.example.ads.xml.BannerSample}: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.ads.AdView
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.os.Looper.loop(Looper.java:123)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-16 00:36:11.855: E/AndroidRuntime(305):  at java.lang.reflect.Method.invokeNative(Native Method)
09-16 00:36:11.855: E/AndroidRuntime(305):  at java.lang.reflect.Method.invoke(Method.java:521)
09-16 00:36:11.855: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-16 00:36:11.855: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-16 00:36:11.855: E/AndroidRuntime(305):  at dalvik.system.NativeStart.main(Native Method)
09-16 00:36:11.855: E/AndroidRuntime(305): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.ads.AdView
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-16 00:36:11.855: E/AndroidRuntime(305):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.Activity.setContentView(Activity.java:1647)
09-16 00:36:11.855: E/AndroidRuntime(305):  at com.google.example.ads.xml.BannerSample.onCreate(BannerSample.java:14)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-16 00:36:11.855: E/AndroidRuntime(305):  ... 11 more
09-16 00:36:11.855: E/AndroidRuntime(305): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/com.google.example.ads.xml-2.apk]
09-16 00:36:11.855: E/AndroidRuntime(305):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-16 00:36:11.855: E/AndroidRuntime(305):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-16 00:36:11.855: E/AndroidRuntime(305):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
09-16 00:36:11.855: E/AndroidRuntime(305):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
09-16 00:36:11.855: E/AndroidRuntime(305):  ... 20 more 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:09:35.617

您是否将 jar 文件放入`libs folder`？。如果没有创建一个名为 libs 的新文件夹并将 jar 文件复制粘贴到其中，然后通过右键单击它并将其添加到构建路径并选择构建路径选项和添加到构建路径。也不要在对话框中使用`adview`。这可能会导致问题。有关更多帮助，请按照分步指南[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)进行操作。

```
Answer- 
```

但是将你的 jar 文件放在 libs 文件夹中是一种很好的做法，以便可以正确管理它，我曾经经历过一段时间，如果我不把我的 jar 放在 libs 文件夹中，它会给我 class not found 异常，这就是我建议的原因你也这样做。这次你可能没有任何问题，但大多数时候它会导致问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:23:22.237

所以看起来我掩盖了一步。我的错。我忘了在订单/导出选项卡中检查罐子。

# objective-c - 将实例视为其超类

> ID：12445249
> 
> 赞同：0
> 
> 时间：2012-09-16T07:48:55.343
> 
> 标签：objective-c

恐怕有点像内比的问题。简而言之，如果我想知道是否创建对象的子类，我可以使用父类的实例来仅引用该对象的父类属性吗？如果是这样，我可以在子类和父类之间自由切换吗？

例如，如果我将 B 定义为 A 的子类型，其中 - A 有方法 a - B 有方法 b

我可以创建 B 的实例，然后将其作为对象类型 A 引用吗

排序：B *b1；乙*b2; 一个*一个；

```
b1 = [[B alloc] init];

// Is this allowed?
a = (A *)b1;
b2= (B *)a;

// Are these valid?
[ a a];
[ b2 a];
[ b2 b]; 
```

（我在网上看到了很多关于一般子类化的讨论，但似乎没有什么可以解释我什么时候可以在一个类和它的超类之间转换）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:07:31.343

一切都在运行时解决；发送消息到`a`将产生相同的结果，无论您是否将其转换为 an `A*`。

换句话说，演员表没有任何区别。如果您愿意，您可以将它们投射到`NSString*`，它仍然可以正常工作。

另一方面，使用 ARC，如果对象似乎没有响应发送的消息，您将收到编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:04:30.317

我不是 100% 确定第一个演员，但我认为这两个演员都是合法的。只要原始对象`b1`是 type ，第二个转换就有意义`B`。否则，发送`B`消息`b2`会导致错误 - 我认为当消息被发送到对象时调用的方法的默认实现是针对该类型未实现的方法。

此外发送这 3 条消息也是合法的。方法`a`对于类来说是公共的`A`，所以对象的类型`A`和`B`响应消息`a`。`b2`也响应`b`，因为它实际上指向一个类型的对象`B`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:06:30.517

```
b1 = [[B alloc] init];
a = (A *)b1;
b2= (B *)a; 
```

总结一下 - 你有一个对象，`b1`你正在创建两个对它的引用`a`和`b2`.

您想知道是否可以调用 class`B`的方法，`b2`即使它以前是 class 的实例`A`？

答案是肯定的，因为所有三个对象都是 B 类的实例。从一种类型转换为另一种类型是编译器如何解析方法调用的指标。

例如 - 如果你写：

```
id obj = b1; 
```

然后尝试通过执行访问 B 类的属性

```
obj.someProperty; 
```

你会得到一个编译器警告，但是如果你强制转换它：

```
(B *)obj.someProperty; 
```

您没有收到警告，因为您已向编译器提供了信息。

Objective-C 是一种动态语言。所有三个对象都是 class 的实例`B`。将它们投射到其他类不会改变它们的类。

# c++ - CPP：阵列初始化和崩溃的神秘错误？

> ID：12445253
> 
> 赞同：0
> 
> 时间：2012-09-16T07:49:33.553
> 
> 标签：c++, arrays

我的程序似乎总是产生荒谬的错误。请给我指路。以下代码段剪切了所有不相关的部分。谢谢。

代码段A部分似乎无法正确初始化数组，如何调试？代码段的 B 部分总是崩溃，我错过了什么吗？

* * *

```
typedef unsigned long T_PSIZE;
int main()
{
   int AG_TOTAL = 6 ;
   /* part A1 */
   T_PSIZE* cntPeopleByAge = new T_PSIZE[AG_TOTAL + 1];
   /* part A2 - originally i use static array like this, but it also fails */
   //T_PSIZE cntPeopleByAge T_PSIZE[AG_TOTAL + 1];
   for (int i = 0; i < (AG_TOTAL + 1); i++)
   {
     std::cout << i << ":" << cntPeopleByAge[i] << "\t";
     cntPeopleByAge[i] = 0;
     std::cout << cntPeopleByAge[i] << "\n";
   }
   std::cout << "cntPeopleByAge:" << cntPeopleByAge[ AG_TOTAL + 1 ] << "\n";
   /* part B */
   delete [] cntPeopleByAge;
   return 0; // <---  crash here!
} 
```

* * *

样本输出

```
0:200320        0
1:201581        0
2:201582        0
3:201583        0
4:0     0
5:0     0
cntPeopleByAge:1799119387:0:0 
```

* * *

*   平台：win 7 x64
*   编译器：TDM-GCC x64

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T07:55:44.557

```
for (int i = 0; i < (AG_TOTAL + 1); i++)
   {
     std::cout << i << ":" << cntPeopleByAge[i] << "\t";
     //                       ^^^^^^^^^^^^^^^^
     // You're reading uninitialized memory here

     cntPeopleByAge[i] = 0;
     std::cout << cntPeopleByAge[i] << "\n";
   } 
```

和这里

```
std::cout << "cntPeopleByAge:" << cntPeopleByAge[ AG_TOTAL + 1 ] << "\n"; 
```

你要越界了。最后一个有效索引是`AG_TOTAL`。

你有未定义的行为（UB）。这些错误与 UB 一样荒谬。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T09:38:50.313

/* 对不起。但较早的答案是不正确的。循环正确地从零开始并在 < 限制处结束。问题是您声明了一个指针数组，但从未将内存分配给它们指向的对象。您的输出显示的是地址而不是数字。一种方法是在使用对象时分配对象（也必须单独删除它们）*/

```
T_PSIZE* cntPeopleByAge = new T_PSIZE[AG_TOTAL + 1];    
for (int i = 0; i < (AG_TOTAL + 1); i++)    
{ 
cntPeopleByAge[i] = new T_PSIZE();
} 
```

您真正想要使用的是标准库中的向量类，它为您处理所有这些：

```
#include <vector>

std:vector<T_PSIZE *> cntPeopleByAge;
cntPeopleByAgex.resize(AG_TOTAL + 1); 
```

祝你好运 ...

# android - android对新通知做出反应

> ID：12445261
> 
> 赞同：0
> 
> 时间：2012-09-16T07:50:52.527
> 
> 标签：android, notifications

是否可以对不是来自我自己的程序的通知做出反应？我需要某种在 k9 创建通知或whatsapp 或其他任何东西时做出反应的接收器。我不一定需要阅读通知的内容。到目前为止，我在搜索中一无所获，也许您可​​以提供帮助。如果我需要 root 解决方案，我会在必要时接受。

谢谢， 猫崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:28:43.243

我知道这已经坐了一段时间，但我在搜索中遇到了它，我想我会分享我发现的东西。

有一种方法可以做到这一点，并且不需要生根/修改。我不知道您的目标是什么 API 级别，但您应该查看可访问性。它旨在帮助残障人士，但在用户许可的情况下，它会授予其他应用程序访问通知等内容的权限。您可以按源包过滤、获取内容等等。

这是无障碍服务页面的链接：http: [//developer.android.com/guide/topics/ui/accessibility/services.html](http://developer.android.com/guide/topics/ui/accessibility/services.html)

这就是我用来运行快速测试以向自己证明它确实有效的方法。用它做一个快速项目，创建一些通知，然后观看 LogCat。这不仅记录来自状态栏的通知，您将看到：[https ://gist.github.com/qihnus/1909616](https://gist.github.com/qihnus/1909616)

# java - 530 FTP 连接中的权限被拒绝

> ID：12445264
> 
> 赞同：0
> 
> 时间：2012-09-16T07:51:24.940
> 
> 标签：java, ftp, ftp-client

我正在尝试连接到 CentOS 上的 vsftpd 服务器，该服务器在我的 Windows 系统上的 VM 上运行。我正在尝试通过 Windows 系统上基于 Java API 的 FTP 客户端进行连接。但我得到这个错误：

> 错误 530：权限被拒绝。

这是代码：

```
client.setRemoteHost(ipAddress);

client.setRemotePort(port);

client.connect();

client.login("root", "password"); 
```

我的 java 代码的 client.login("root", "password") 语句出现错误。代码的前三行执行良好。密码和我的root密码一样。我还应该检查什么来解决这个问题？

# c++ - 用于 OS X Mountain Lion 的 C++ 图形用户界面

> ID：12445265
> 
> 赞同：2
> 
> 时间：2012-09-16T07:51:36.510
> 
> 标签：c++, cocoa, user-interface, g++, osx-mountain-lion

我需要能够从 Mountain Lion 上用 C++ 编写的应用程序启动基本 GUI。通常可以通过 gtk 或 qt 之类的跨平台库或从基于 Objective-c 的应用程序启动 c++ 代码来实现这一点。在这种情况下，每个人都有自己的问题。我正在编写的应用程序使用类库连接到机器人。要使应用程序使用该功能，必须使用终端中的 g++ 编译器对其进行编译。该代码从未设计为在 Snow Leopard 之后的任何东西上运行，因此在编译和链接方面非常棘手。这似乎排除了我从使用 xcode ide 编写的 Objective-c 启动 C++ 代码的能力，除非 xcode 包含我不知道的编译选项，此时其他平台（如 gtk 或 qt）似乎是可行的。这些问题是我什至无法在 Mountain Lion 上编译一个，更不用说使用一个来编写应用程序了。这是山狮/缺乏更新的问题吗？还有其他创建 GUI 的选项吗？也许是与 Mountain Lion 兼容的 GUI 库或从 C++ 代码启动基于可可的 GUI 的方法？它不需要很复杂 - 只是一个带有一些线条的窗口。

提前致谢！

# mysql - 将多个查询与一个标准列组合

> ID：12445269
> 
> 赞同：1
> 
> 时间：2012-09-16T07:53:03.867
> 
> 标签：mysql, sql, select

我使用 MySQL，我有 2 个查询选择 SQL，第一个查询将返回结果 A，第二个将返回结果 B，所以我想组合这两个查询结果，结果 A 的 ID 列和结果 B 的 value_num 成为标准列，并且我不认为使用子选择，因为我已经尝试过了，并且在查询过程中需要很长时间，我该怎么做？

**结果一：**

```
+------------+--------------+
+  ID        +  Name        +
+------------+--------------+
+   1        +  Steve       +
+   2        +  Mile        +
+   3        +  Santo       +
+   4        +  Del Piero   +
+   5        +  Jack        +
============================+ 
```

**结果 B：**

```
+------------+--------------+
+  Valuenum  +  value       +
+------------+--------------+
+   1        +      20      +
+   2        +      30      +
+   6        +      44      +
+   7        +      55      +
============================+ 
```

**结合结果 A 和结果 B，下面是我的预期输出。**

```
+------------+--------------+----------+
+ID_valuenum +  Name        + value    +
+------------+--------------+----------+
+   1        +  Steve       + 20       +
+   2        +  Mile        + 30       +
+   3        +  Santo       + Null     +
+   4        +  Del Piero   + Null     +
+   5        +  Jack        + Null     +
+   6        +  Null        + 44       +
+   7        +  Null        + 55       +
============================+==========+ 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:57:03.490

```
select
  ta.Id as ID_Valuenume
  ,ta.name
  ,tb.value
from TableA ta
left join TableB tb on ta.ID=tb.valuenum
union
select
  tb.valuenum
  ,ta.name
  ,tb.value
from TableB tb
left join TableA ta on ta.ID=tb.valuenum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:41:48.723

您必须为此使用[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

```
 select ra.ID as ID_valuenum,
        ra.Name,rb.value from ResultA ra left join ResultB rb on ra.ID=rb.Valuenum 

        UNION

        select rb.Valuenum,null as Name,rb.value from ResultB where rb.Valuenum not in 
    (select ID from ResultB) 
```

->在第一部分你必须使用左连接，这样它会给你数据

```
+------------+--------------+----------+
+ID_valuenum +  Name        + value    +
+------------+--------------+----------+
+   1        +  Steve       + 20       +
+   2        +  Mile        + 30       +
+   3        +  Santo       + Null     +
+   4        +  Del Piero   + Null     +
+   5        +  Jack        + Null     + 
```

->在第二部分中，它不需要使用任何连接，那么它将提供数据：-

```
+   6        +  Null        + 44       +
+   7        +  Null        + 55       + 
```

# python - Python中的密码提交

> ID：12445278
> 
> 赞同：3
> 
> 时间：2012-09-16T07:54:19.643
> 
> 标签：python, web-applications, password-protection, password-encryption

我正在使用谷歌应用引擎开发一个网站，我想知道处理提交的正确方法是什么。

我正在考虑做一些事情，比如用一些盐对密码客户端进行散列，然后在服务器端用一些其他盐再次对其进行散列。

我想知道这是否至少是一些不错的安全性，以及它是否已经存在一个可以做到这一点或更好的 Python 库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:13:50.020

标准做法是对连接使用 SSL 加密（例如 https），然后在服务器端使用盐对其进行哈希处理。当稍后用户登录时，您仍必须验证密码，并且从浏览器向服务器发送密码的哈希与发送密码本身一样不安全；拦截其中任何一个的攻击者仍然可以以该用户身份登录。

有一个名为的 python 包[`passlib`](http://pypi.python.org/pypi/passlib)可以为您处理各种形式的密码散列和加盐：

```
from passlib.hash import sha256_crypt
hashed = sha256_crypt.encrypt(password) 
```

将选择的算法包含在存储的密码哈希中通常是一个好主意；RFC 2307 密码（在 LDAP 中使用）使用`{SCHEME}`前缀，其他哈希方案使用 unix`$digit$`前缀，其中 digit 是一个数字；`sha256`上面代码片段中的方案`$5$`用作前缀。

这样，您可以在以后升级您的密码方案，同时仍然支持旧方案，方法是选择正确的散列算法在以后验证密码。

大多数`passlib`散列方案已经返回带有标准前缀的散列，记录在每个方案的详细文档页面中。当您稍后需要根据输入的密码验证密码哈希时，您可以使用该[`.identify()`函数来识别使用的哈希算法。](http://packages.python.org/passlib/password_hash_api.html#passlib.ifc.PasswordHash.identify)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T18:41:54.473

1.  使用 TLS (HTTPS)。它并不完美，但总比没有好（而且比摘要*式身份验证要好得多）。*
2.  如果您不想存储密码，可以让 Google 处理一切：[https ://developers.google.com/appengine/articles/auth](https://developers.google.com/appengine/articles/auth)
3.  如果您确实想担心存储密码，请使用 passlib，如 Martijn Pieters 所述。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-16T07:57:29.667

您正在寻找摘要式身份验证。Digest Auth 是安全的，这意味着密码不会以明文形式传输。但是，认证后的通信没有加密。

在此处查看完整示例：http: [//code.activestate.com/recipes/302378-digest-authentication/](http://code.activestate.com/recipes/302378-digest-authentication/)

# java - 使用 Jasper Reports 损坏从 JAVA 生成的 PDF

> ID：12445279
> 
> 赞同：3
> 
> 时间：2012-09-16T07:54:28.033
> 
> 标签：java, pdf, jasper-reports, ireport

我`iReport Designer 4.7`用来创建`.jrxml`. 它非常`.jrxml`简单，显示从 JAVA 传递的参数。测试 pdf 是从 iReport Designer 生成的，我可以使用 Adob​​e Reader 查看它。

现在，这是java代码

我`createReport(String reportName, Map params)`从 Servlet 打电话。参数是从 Servlet 设置的。总会有参数传递。

```
public void generateReport(String fileName, String outFileName, Map paramerterMap,
            String reportFormat) throws JRException{

    String reportSource = "C:\\jrxml\\" + fileName;
    String outFile = null;
    downloadPath = "C:\\pdfs\\";

    outFile = downloadPath + outFileName;
            JRExporter exporter = new JRPdfExporter();
            JasperPrint jasperPrint = JasperFillManager.fillReport(reportSource, paramerterMap);
        exporter.setParameter(JRXlsExporterParameter.CHARACTER_ENCODING,"UTF-8");
                    exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, outFile);
        exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);

                    exporter.exportReport();
}

public Boolean createReport(String reportName, Map params) {
    try {
        String jrFile = reportName + ".jasper";
        String outFileName = String.valueOf(7884);
        outFileName += "_" + reportName + ".pdf";
        generateReport(jrFile, outFileName, params, ".pdf");
        return true;
    }  catch (JRException e) {
        e.printStackTrace();
        log.error("ReportManager--generateReport--JRException: " + e);
                    return false;
    } catch (Exception e) {
        e.printStackTrace();
        log.error("ReportManager--generateReport--Exception: " + e);
        return false;
    }
} 
```

我使用的`.jar`是 iReport Designer 使用的同一组。（实际上我已经`.jar`从 iReport 安装目录复制了文件）

**问题：使用 JAVA 代码生成的 pdf 文件损坏。** 当我尝试在创建的位置打开 PDF 时，Adobe 阅读器说：

> Adobe Reader 无法打开“test.pdf”，因为它不是受支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送并且未正确解码）。

![在此处输入图像描述](../Images/797329c6a94885f390a089f332b3f0a4.png)

编辑：我没有得到任何异常，生成的文件大小约为 5 KB。

EDIT2：添加 JRXML

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Certificate" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="7367a6fb-f8da-4ba3-b90d-319807f92789">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <property name="ireport.scriptlethandling" value="0"/>
    <property name="ireport.encoding" value="UTF-8"/>
    <import value="net.sf.jasperreports.engine.*"/>
    <import value="java.util.*"/>
    <import value="net.sf.jasperreports.engine.data.*"/>
    <parameter name="name" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="27" splitType="Stretch">
            <textField pattern="MMMMM dd, yyyy" isBlankWhenNull="false">
                <reportElement uuid="b72c0bad-3935-40ba-8d6d-3993cb5122d2" key="textField" x="413" y="0" width="140" height="20"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <pageHeader>
        <band height="21" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="22" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="141" splitType="Stretch">
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement uuid="cbaae0d4-53da-420e-8efa-7f4fcc6900f0" key="name" x="0" y="10" width="530" height="20"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="Arial" size="11" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{name}]]></textFieldExpression>
            </textField>

        </band>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="20" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:18:14.677

哈迪克

我在这里看到 2-3 件事

1) 您在 generateReport 中的输出文件名始终为“c:\pdfs”+ NULL。（我想知道为什么 test.pdf 仍然被创建）

`gujarati`2)对象包含什么报告参数？

**编辑**

3）只是问为什么要为报告生成保留两个单独的功能？在我看来，您可以通过单一功能实现目标`createReport`。！

**编辑：2**

我认为这个链接可能会提供一些帮助： http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/faq.html?group_id= [252#FAQ29](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/faq.html?group_id=252#FAQ29)

# facebook - 脸书应用程序。如何将图像上传到应用程序？它有自己的墙或相册吗？

> ID：12445280
> 
> 赞同：0
> 
> 时间：2012-09-16T07:54:29.020
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我已经准备好 Facebook 应用程序和令牌、应用程序 ID、秘密。现在我搜索了很多，似乎无法将图像上传到应用程序墙或为应用程序创建相册。

**我有什么：** 带有画布的 Facebook 应用程序，用户可以在其中输入数据并上传图像（到服务器上的我的 PHP 脚本）

**我想要做什么：** 使用 PHP SDK 将图像保存在我的应用程序中的某个地方。

**我做过的最接近的方法是什么：**

1.  谷歌搜索了很多
2.  我已经为用户添加了登录/注销，因此我可以将图像上传到用户墙或相册，但我想将照片放在应用程序本身上，以便绕过用户身份验证，我需要将图像存储在我的应用程序的某个地方。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:43:31.903

应用程序本身没有显示图像/视频的位置。

您需要为应用程序创建一个页面。为此，请访问[developers.facebook.com/apps](http://developers.facebook.com/apps)并单击右上角的“编辑应用程序”。在“应用程序详细信息”部分中，单击标有“创建 Facebook 页面”的按钮并按照步骤操作。这将创建一个代表应用程序的页面。然后，您可以像处理任何其他页面一样上传图像/视频等。

或者，您可以通过将图像存储在数据库中并根据需要调用它来给人一种在您的应用程序上存储图像的*印象......*

# sql - “DELETE FROM table”的 output_expression 有什么作用？

> ID：12445284
> 
> 赞同：11
> 
> 时间：2012-09-16T07:55:16.490
> 
> 标签：sql, postgresql, sql-delete

我最近遇到了一个怪事。以下是有效的 SQL：

```
DELETE FROM customer *; 
```

PostgreSQL [DELETE](http://www.postgresql.org/docs/9.1/static/sql-delete.html)的文档说星号是一个可能的值`output_expression`：

> 删除每一行后由 DELETE 命令计算和返回的表达式。该表达式可以使用 USING 中列出的一个或多个表的任何列名。写 * 返回所有列。

我试过有没有星星，看不出有什么区别。事实上，我可以在表名之后放置任何单个单词并且它被接受。它甚至不必是实际的列名。没有额外的东西被退回。

```
db=> DELETE FROM customer wheeeeeee;
DELETE 19 
```

那么它有什么作用，我可以用它做什么？

问题[也发布在 PostgreSQL 邮件列表上](http://archives.postgresql.org/message-id/E1TDAj3-0008JO-V0@wrigleys.postgresql.org)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T12:59:20.747

星号**不是**output_expression，为此您必须使用`RETURNING`关键字。相反，它是一种旧的、过时的语法，用于在查询中包含子表。（它记录的最后一个版本似乎是[PostgreSQL 8.1](http://www.postgresql.org/docs/8.1/static/ddl-inherit.html)。由于语法仍然有效，它是一个文档错误，正如 Tom Lane 在下面链接的帖子中指出的那样。）

由于 PostgreSQL 7.1 这是默认设置（除非[sql_inheritance](http://www.postgresql.org/docs/9.2/static/runtime-config-compatible.html#GUC-SQL-INHERITANCE)设置为 off），并且`ONLY`关键字用于相反，所以 * 不是很有用。

请参阅[PostgreSQL 邮件列表上 Tom Lane 的这篇解释性帖子](http://archives.postgresql.org/message-id/5536.1347854286@sss.pgh.pa.us)。

# android - 单击时将切换按钮设置为播放默认声音？

> ID：12445289
> 
> 赞同：6
> 
> 时间：2012-09-16T07:55:57.077
> 
> 标签：android, click, audio, togglebutton

我的 android 应用程序有一个常规按钮：

```
<Button
  android:id="@+id/allOnButton"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_marginRight="130dp"
  android:text="@string/sensor_management_all_on" /> 
```

还有一个切换按钮：

```
<ToggleButton
  android:id="@+id/accelerometerToggleButton"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:checked="true"
  android:textOff="off"
  android:textOn="on" /> 
```

当按钮被按下时，会播放一个美妙的“咔哒”声，这会向用户提供一个很好的反馈，即该按钮被实际按下了。

如何为 ToggleButton 设置点击声音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:57:11.657

要听到点击声音，您需要设置 clickListener。

`onClickListener`所以在 上设置一个假人`ToggleButton`，它应该会播放声音效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T11:00:00.613

```
 toggleButton = (ToggleButton)findViewById(R.id.sound);
    final MediaPlayer mp = MediaPlayer.create(this, R.raw.theme);
    if(toggleButton.isChecked())
        mp.start();
    toggleButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if(!toggleButton.isChecked()){
                mp.pause();
            }
            else {
                mp.start();
                mp.isLooping();
            }
        }
     }); 
```

# java - 读取和写入多维数组的最简单方法？

> ID：12445290
> 
> 赞同：2
> 
> 时间：2012-09-16T07:56:01.423
> 
> 标签：java, android, io

我正在尝试在设备上存储一个 int 数组，但我不确定从哪里开始。数组数据如下所示：

```
myArray[1][1] = 5;
myArray[1][11] = 4;
myArray[2][1] = 2;
... 
```

我看过很多关于阅读和写作的教程，但似乎没有一个涵盖这个主题，而且我只是在一般情况下难以理解 I/O。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:23:42.163

像这样的东西应该可以将数组保存到文件中：

```
 try {
         PrintStream file = new PrintStream(new File("file.txt"));
         for(int row = 0; row < myArray.length; row++)
         {
             for(int col = 1; col < myArray[0].length; col++)
             {
                 file.println(myArray[row][col]);
             }
          }

         }
        catch(IOException e) {
         //Handle the exception
         } 
```

# php - Codeigniter + SSL + .htaccess + 无限重定向

> ID：12445296
> 
> 赞同：0
> 
> 时间：2012-09-16T07:57:19.010
> 
> 标签：php, .htaccess, codeigniter, ssl

我正在尝试在我的 codeigniter 站点上设置 SSL，但遇到了一些问题。

Codeigniter 拒绝访问 https://。Firefox 显示此错误：

> 页面未正确重定向。Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我的配置文件有这个作为 base_url

```
$config['base_url'] = "http".((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "s" : "")."://".$_SERVER['HTTP_HOST'].str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']); 
```

我的 .htaccess 文件如下：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|first_cut|media|robots\.txt|user_guide|xd_receiver\.htm|channel.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

理想情况下，我希望 https:// 始终应用于这些文件夹...

*   /facebook/比赛
*   /方面/

...然后是网站其余部分的可选 https

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:13:19.387

请尝试此代码

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ http://www.projectname.com/$1 [R=301,L] 
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ http://www.projectname.com/$1 [R=301,L]

#search folder and redirect to subdomain 
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} dimentions
RewriteRule ^(.*)$ https://www.projectname.com/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:19:40.837

您似乎只想将不存在的文件重定向到`index.php`. 有一种更简单的方法：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# linux - 在 vi 中移动光标会产生意外字符。怎么会？

> ID：12445299
> 
> 赞同：0
> 
> 时间：2012-09-16T07:57:34.207
> 
> 标签：linux, unix, editor, vi

我拍了几张我遇到的问题的截图。基本上我习惯使用 vi 和我所期望的是能够使用箭头键在文档中移动，并且仍然能够阅读文档的实际内容。

[这是我最初打开配置文件时的 vi 编辑器截图。](http://i.imgur.com/Cz6Mw.png "前")

[在我按了几次向下、向左和向右箭头键之后，再次拍摄 vi。](http://i.imgur.com/nKkZ3.png "后")

如果由于某种原因您无法查看屏幕截图，我看到的是：当我在 vi 中移动光标时，光标刚刚被数字、逗号、破折号或花括号替换的位置。有时它会跳过一个字符，但有时会跳过几个字符。

显然我在这里做错了什么。在这里，我以为我知道如何使用 vi...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:02:33.017

我不是问题发生的确切原因，但我知道是什么解决了它。

解决方案：

从屏幕截图中可以看出，我在一个 SSH 会话中。我断开并重新建立了一个新的 SSH 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:21:52.027

请尝试使用不同的终端仿真运行 vi，看看它是否有所不同。我认为它与终端有关。

就像是：

```
TERM=linux vi 
```

或者

```
TERM=vt100 vi 
```

此外，运行“重置”命令也可能会有所帮助，而无需重新连接。这会将终端重置为其默认值。

# rest - Rest API 按字段获取资源 id

> ID：12445301
> 
> 赞同：1
> 
> 时间：2012-09-16T07:57:42.107
> 
> 标签：rest

什么是通过字段（例如名称）获取资源 ID 的正确休息方式。看看以下操作：

```
GET /users/mike-thomas
GET /users/rick-astley 
```

我不想在我的 API 端使用这些操作，而是想编写一个 API 操作，在提交字段时获取我的 ID（在用户的情况下为名称），例如：

```
GET /users/id-by-field 
```

提交数据：

```
{
  "fullName": "Mike Thomas"
} 
```

返回数据：

```
{
  "data": {
    "id": "123456789012345678901234"
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:25:56.150

您想要的是一个算法 URL，其中算法的参数作为 URL 参数传递：

```
GET /users?name="Mike Thomas" 
```

优点是您使用的是“根”资源（用户），并且搜索参数很容易扩展，而无需更改路由中的任何内容。例如：

```
GET /users?text="Mike"&year=1962&gender=M 
```

不仅会在名称中搜索文本。

结果数据将是用户列表，并且可能返回的不仅仅是这些用户的标识。除非 fullName 唯一标识用户，否则您无论如何都需要允许这样做。当然，如果参数唯一标识了该用户，则该列表可以包含单个用户。

```
{
  users: [
    {
      id: "123456789012345678901234",
      fullName: "Mike Thomas",
      dateJoined: 19620228
    }
  , {
      id: "234567890123456789012345"
      fullName: "Rick Astley",
      dateJoined: 19620227
    }
  ]
} 
```

# prolog - 在 swi-prolog 中编写递归

> ID：12445305
> 
> 赞同：1
> 
> 时间：2012-09-16T07:59:33.130
> 
> 标签：prolog

我已经成功地将 PHP 与 Prolog 连接起来，并设法查询驻留在文件中的所需知识库，`knowledge_base.pl`并设法通过`php exec`函数回显结果。

`true`我在回显 Prolog 在每次查询执行后返回的/`false`值时遇到了问题（[请参阅上一个问题](https://stackoverflow.com/questions/12428012/how-to-echo-the-true-false-value-prolog-returns-after-a-query)），因此我想出了一个难以实施的解决方案。

假设我有一个`knowledge_base.pl`包含这些事实和规则的简单文件：

```
girl(erin).
boy(john).

likes(erin, reading).
likes(john, reading).

hangs_out_with(erin, X) :-
    likes(X, reading),
    boy(X),
    writeln('Someone s got a new friend!!'). 
```

假设我想看看`erin`是不是一个女孩，如果是，写它是真的，或者写它是假的。我将此添加到我的`knowledge_base.pl`文件中：

```
girl(erin) :-
        girl(erin)
     -> write('it is true')
     ;  write('it is not true'). 
```

当我输入查询时：`?- girl(erin).`我得到一个`out of local stack`错误。我在网上搜索，发现这是由于无限递归。

有人可以给我一个关于如何写作的提示吗

```
girl(X) :-
    (    girl(X)
      -> write('it is true')
      ;  write('it is not true')). 
```

在序言中？提前致谢。

作为新用户，我不允许发布图片。

***SWI-Prolog 的输出：***

```
1 ?-hangs_out_with(erin,kosta).
false.

2 ?-hangs_out_with(erin,john).
Someone s got a new friend!!
true. 
```

***命令提示符的输出：***

```
C:\(directory)>swipl -q -f knowledge_database.pl -g hangs_out_with(erin,kosta),halt.
1 ?-halt. (the halt is inputted by me.)
C:\(directory)>swipl -q -f knowledge_database.pl -g hangs_out_with(erin,john),halt.
Someone s got a new friend!! 
```

第一个查询失败，第二个查询成功。如您所见，查询执行后的序言输出真/假，但是当我在命令提示符下执行相同的查询时，真/假值不会得到回显！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:04:34.630

我想你应该问

```
is_girl(X) :-
    girl(X) -> write('t is true') ; write('it is not true'). 
```

编辑

你的意思是这种东西吗？

```
is_type(Type, X) :-
    call(Type, X) -> writeln(yes); writeln(no). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:13:10.237

因此，您可以通过在命令 shell 中执行 Prolog 查询并捕获和分析其输出来“将 PHP 连接到 Prolog”。[http://www.swi-prolog.org/man/quickstart.html](http://www.swi-prolog.org/man/quickstart.html)说

> "2.1.1.1 在 Unix 上启动 SWI-Prolog
> 
> 默认情况下，SWI-Prolog 安装为“swipl”。SWI-Prolog 本身的命令行参数及其实用程序都使用标准 Unix 手册页记录。”

所以请查阅有关“-q”开关的手册页。也许是安静的“-q”？“-f”是什么意思（好吧，那可能是“文件”）？但解决方案是相同的——只需为新谓词使用不同的名称。

请注意，在您的第一次尝试中，

```
C:>swipl -q -f knowledge_database.pl -g hangs_out_with(erin,kosta),halt.
1 ?-halt. (the halt is inputted by me.) 
```

`halt`没有被执行，正是因为`hangs_out_with(erin,kosta)`已经失败。逗号表示连词（“和”）。

您需要做的就是创建一个新的谓词来报告目标是真还是假，并且总是成功：

```
report_hangs_out_with(A,B):-
  hangs_out_with(A,B)- > writeln(['YES',A,B]) ; writeln('NO'). 
```

并改用*它*：

```
C:>swipl -q -f knowledge_database.pl -g report_hangs_out_with(erin,kosta),halt. 
```

此外，Prolog 回显“真”或“假”是其交互式会话的一部分。但是你用`halt`!

* * *

***编辑：***您发布：

```
1 ?-hangs_out_with(erin,kosta).
false. 
```

因此，当您在交互式 Prolog shell 中运行该查询时，它会报告失败。`halt/0`退出 Prolog shell。当您使用通过命令行开关指定的目标运行它时，显然它不会报告失败的成功。就我们用户而言，这是自然的事实（编译器编写者）。使用我向您展示的内容很容易解决。你自己说它**也有效**。对于每个可能失败或成功的谓词，定义另一个***报告*谓词**，就像我向您展示的那样。

这是一个示例脚本（在 Windows 中，但这无关紧要）。这应该可以消除您的疑虑：

```
C:\Program Files\pl\bin>plcon -q -g (writeln('****'),halt).
****                          // didn't say Yes, right??

C:\Program Files\pl\bin>plcon -q
1 ?- writeln('****'),halt.
****                          // didn't say Yes here either

C:\Program Files\pl\bin>plcon -q
1 ?- writeln('****').
****

Yes                           // does say Yes as part of interaction
2 ?- halt.

C:\Program Files\pl\bin> 
```

所以就是这样。处理它。:) 或者写 Jan 并让他改变它。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:02:04.890

```
girl(erin) :-
        girl(erin)
     -> write('it is true')
     ;  write('it is not true'). 
```

这是错误的，原因有两个。Prolog 尝试解析采用最左边文字的主体。所以它基本上是一个循环“是艾琳女孩吗？是的，如果艾琳是女孩。艾琳女孩吗？......”

第二个原因是你混合了两种不同的东西。尝试将您的知识表示部分与您使用它的方式分开。在 Prolog 中，您只需说：

```
girl(erin) 
```

然后查询

```
?- girl(erin) 
```

Prolog 只会说“是”。如果要打印它，可能最简单的方法是添加谓词。

> check_and_print(X) :- X, write(X), write(“是真的”)。

可能您需要*call(X)*而不是*X*，具体取决于您使用的实现。

我不确定命令提示符，我怀疑结果以不同的方式返回。

# java - 安卓中的 INSTALL_FAILED_SHARED_USER_INCOMPATIBLE

> ID：12445306
> 
> 赞同：1
> 
> 时间：2012-09-16T07:59:44.720
> 
> 标签：java, android

现在，我正在尝试修改android packages\apps\Contacts 中有关联系人部分的原始代码。我的编译环境是eclpise + JDK1.7 + WIN7 (64)+AndroidSDK(2.3.3) 编译的程序是正确的，但是模拟器运行出错。

控制台：

```
[2012-09-16 15:14:46 - com.android.contacts.DialtactsActivity] WARNING: Application does not specify an API level requirement!
[2012-09-16 15:14:46 - com.android.contacts.DialtactsActivity] Device API version is 10 (Android 2.3.6)
[2012-09-16 15:14:46 - com.android.contacts.DialtactsActivity] Uploading com.android.contacts.DialtactsActivity.apk onto device 'emulator-5554'
[2012-09-16 15:14:48 - com.android.contacts.DialtactsActivity] Installing com.android.contacts.DialtactsActivity.apk...
[2012-09-16 15:14:56 - com.android.contacts.DialtactsActivity] Installation error: INSTALL_FAILED_SHARED_USER_INCOMPATIBLE
[2012-09-16 15:14:56 - com.android.contacts.DialtactsActivity] Please check logcat output for more details.
[2012-09-16 15:14:57 - com.android.contacts.DialtactsActivity] Launch canceled! 
```

Bellow Logcat 错误：包 com.android.contacts 没有与共享用户 android.uid.phone 中的签名匹配的签名；无视！

从网上得到解决方案，我摆脱了代码

```
 " android:sharedUserId="android.uid.shared"
    android:sharedUserLabel="@string/sharedUserLabel" " in AndroidManifest.xml. 
```

那没问题。

但是有一个新的错误。

```
"Could not find class 'com.android.phone.CallLogAsync', referenced from method com.android.contacts.TwelveKeyDialer.<init>"

"Could not find class 'com.android.phone.CallLogAsync$GetLastOutgoingCallArgs', referenced from method com.android.contacts.TwelveKeyDialer.queryLastOutgoingCall" 
```

运行是错误的。我没有解决办法。你能给我一些指导建议吗？

# security - 如果您不期望重复的结果，欧洲央行是一个安全的选择吗？

> ID：12445312
> 
> 赞同：1
> 
> 时间：2012-09-16T08:00:26.140
> 
> 标签：security, mcrypt, rijndael, ecb

我想使用 Rijndael-256 加密长段文本（在此之前文本已被压缩并转换为 base64）。

两者不太可能相同。但是，如果它们碰巧是，是否会在文本的开头或结尾添加一个随机密钥来保护它（无论它们是否相同），以防万一用户编写相同的文本？

如果我确保没有结果是 100% 相同的，如果你不会得到重复的结果，欧洲央行是否安全？

还是这样的：（使用base64...不准确，只是一个例子）

```
_Hello world_ = ahjkIOn25o

_To echo "Hello world,"_ = qw90klnN2_ahjkIOn25o_kL3

_Hello world is the_ = _ahjkIOn25o_hjAB27 
```

因此，如果有人在其文本中隐藏了一个短语，它总是会为该片段输出相同的 ECB，无论文本中还有什么，或者该短语在文本中的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:29:25.457

我建议使用像CBC这样的东西。您所要做的就是添加 IV。

> 因此，如果有人在他们的文本中隐藏了一个短语，它总是会为该片段输出相同的 ECB，无论文本中还有什么，或者该短语在文本中的位置？

两个完全相同的明文块将成为完全相同的密文块。

因此，这取决于隐藏短语的长度以及它在块内的位置。只有当块的全部内容相同时，结果才会相同。

我想说它更适用于两种情况：

*   您拥有大量结构化数据（例如图像或视频）
*   您使用相同的密钥来加密多条消息（这会转化为大量数据）。

这两种情况都可能使攻击者了解您的内部结构。

我建议看看这个：[http](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29) ://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29 它显示了欧洲央行的问题。

一般来说，使用其他模式比使用其他模式更容易

*   解决欧洲央行的弱点
*   担心您是否考虑了所有可能的情况。

# html - 无法让 div 具有背景颜色

> ID：12445315
> 
> 赞同：0
> 
> 时间：2012-09-16T08:01:23.283
> 
> 标签：html, background-color

我有以下 html 标记：

```
 <div id="com_loaded">
                <div id="com_loaded_userpic"><a href="#" class="tooltip"><img src="pic.jpg" class="img_poster" /><span>Username</span></a></div>
                <div id="com_loaded_content">
                    <div id="com_loaded_poster">Username</a></div>
                    <div id="com_loaded_text">Comment text</div>
                </div> 
            </div> 
```

以及以下 CSS 标记：

```
 #com_loaded {
position: relative;
width: 250px;
padding: 0px;
clear: both;
background-color:#3FC;
 }

 #com_loaded_userpic {
position: relative;
width: 55px;
height: 60px;
float: left;
padding-left: 5px;
 }

 #com_loaded_content {
position: relative;
width: 185px;
float: left;
padding-left: 5px;
 }

 #com_loaded_poster {
position: relative;
width: 185px;
float: left;
clear: left;    
 }

 #com_loaded_text {
position: relative;
width: 185px;
float: left;
clear: left;
padding-bottom: 10px;
 } 
```

容器 com_loaded 具有背景色。但是没有显示这种背景颜色。当我给容器一个高度时，它会显示出来。但是由于 comment_text 没有一定的高度（这取决于评论的长度），我不想设置高度。

如何为容器中的所有 div 显示容器的背景颜色？我不知道我做错了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:08:47.233

浮动内容不会影响其容器的布局，因此围绕浮动 div 的任何项目都将没有高度，除非您明确设置它（或者除非有其他元素可以赋予它高度）。`<div style="clear:both;"></div>`您可以通过在#com-loaded 末尾添加一个来纠正此问题。

# math - 简单的转向行为：解释这条线

> ID：12445321
> 
> 赞同：-1
> 
> 时间：2012-09-16T08:02:26.917
> 
> 标签：math, artificial-intelligence, physics

我正在阅读通过示例编程游戏 AI 的书，他提供了导致实体减速以便它优雅地到达目标的转向行为的代码。在计算距离之后，从目标到源的距离然后他（基本上）这样做

```
double speed = dist/deceleration; 
```

我只是不明白这是从哪里来的，我只是错过了一些非常明显的东西吗？它没有在书中列为已知错误，所以我猜它是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:38:37.243

如果这有一些物理上的真实性，那么这些单位在任何一方都会匹配。

![单位比较](../Images/d527f80c538a46cbb32f9bd311c8b591.png)

据我了解，这类似于芝诺的悖论，您试图到达某物，但您永远无法到达那里，因为您总是只走`n`了剩余距离的四分之一。

认为

*   模拟以每次一秒的间隔进行。
*   `deceleration`= 5
*   `distance`= 1000 米

有了这些初始条件，`speed`将设置为`200`每秒米。因为模拟以一秒的间隔进行，所以我们将精确地行进`200`几米（即剩余距离的五分之一），并最终到达距离`800`目标几米的距离。新速度确定为：`160`米每秒

以下是前 30 秒内发生的情况：

![公式](../Images/6960e585d2acfe14967c69e02914bd60.png)
![前三十秒剧情](../Images/75100d7b7185d418cb7611ea4abb5656.png)

最后 30 秒：
![最后三十秒剧情](../Images/58c021eb2214dda721edb5e3c509faa7.png)

最后 10 秒：
![最后十秒剧情](../Images/0c24ff4deadf7883393c1a598a4c0544.png)

观察

*   在前 30 秒内，我们行进了大约 998 米
*   在前 50 秒内，我们覆盖了 999.985 米
*   在最后 10 秒内，我们仅覆盖约 1.2 厘米

如您所见，您几乎很快就到达了那里，但需要很长时间才能靠近。

[WolframAlpha 绘制的图]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:27:44.437

也许您的计算中缺少某些东西。对于恒定的加速（或减速），忽略初始条件，速度为

```
v = a * t 
```

距离是

```
d = a * t^2 / 2 
```

如果你在两个方程中消除 t 你得到

```
v = a * sqrt(2 * d / a) 
```

# ios - 为什么我不能使用 NSMutableArray 添加 UILabel？

> ID：12445323
> 
> 赞同：0
> 
> 时间：2012-09-16T08:02:38.867
> 
> 标签：ios, user-interface, sdk

我的代码如下，

```
for (int i=0; i < kNumberOfTitles; ++i) {
    UILabel * aLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, i*10, 100, 30)];
    [_titles addObject:aLabel];
    NSAssert([_titles objectAtIndex:0] != nil, @"wrong 1");
}
NSAssert([_titles objectAtIndex:0] != nil, @"wrong 2");
((UILabel *)[_titles objectAtIndex:0]).text = @"Tel";
((UILabel *)[_titles objectAtIndex:1]).text = @"Add";
for (UILabel* aLabel in _titles) {
    [self.view addSubview:aLabel];
} 
```

在第一个 NSAssert 之前，我只是添加了一个新标签然后检索它，我发现它是 nil。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:09:33.603

我怀疑问题是你实际上并没有创建数组，所以`nil`如果它是一个实例变量（或者你使用 ARC），或者如果它是一个简单的局部变量，如果你不使用 ARC，它是一些垃圾值。你必须做

```
_titles = [[NSMutableArray alloc] init]; 
```

在尝试将项目添加到数组之前。

# windows - 如何禁用报价的自动配对

> ID：12445325
> 
> 赞同：25
> 
> 时间：2012-09-16T08:02:44.937
> 
> 标签：windows, keyboard

我的 Windows 7 安装会自动尝试配对引号，但效果很差。例如，当我在一个单词之前按下引号键时没有任何反应，但是当我将光标移动到单词的末尾并再次按下引号键时，两个引号都插入到单词之后。基本上我无法插入一个报价，这非常烦人。

这是一个 Windows 功能，因为它发生在所有程序中。

如何禁用它？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-01T09:48:33.477

问题出在已安装的键盘（Windows 输入服务）中。

1.  在您的**控制面板**>**区域和语言**>**键盘和语言**中，您很可能会找到**US Keyboard - International**，这是一种具有丑陋自动完成功能的输入服务。
2.  添加新键盘**英语 - 美国**（或塞尔维亚语或任何其他您喜欢的）并将其设为默认键盘（在上面的下拉列表中）。
3.  **删除**“越野车”键盘。
4.  瞧！

希望这对你有用！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-23T19:09:31.080

如果您同时按`Left Shift`+ `Left Alt`，它将切换回正常状态（就像您想要的那样）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-07T09:15:02.443

`ctrl`我不小心按+时遇到这种情况`shift`。
如果你再按一次`ctrl`+`shift`事情就会恢复正常。

# iphone - alloc 和 init 做了什么？

> ID：12445329
> 
> 赞同：-3
> 
> 时间：2012-09-16T08:03:16.170
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [alloc 和 init 他们实际做了什么](https://stackoverflow.com/questions/3848990/alloc-and-init-what-do-they-actually-do)

我们做类似[[className alloc] init]的代码，所以在alloc中实际发生了什么以及在init中发生了什么，我的理解是alloc将创建该类的实例并为该实例分配一块内存，那么init的用途是什么?

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:07:18.863

**alloc**：它为您创建的对象分配内存，增加保留计数

**init**：它使用自定义值和属性（如果您提供它们）初始化您创建的对象，否则使用默认值和属性

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T08:07:51.497

> 那么init有什么用呢？

很简单：它做了 alloc 没有做的事情（因为它做不到）。它初始化自定义实例变量，将属性设置为默认值等...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T08:09:00.030

alloc 方法进行分配并将保留计数增加 1，并且 +alloc 返回的任何内容都必须在某处释放。

init 负责在分配后初始化对象。消耗消息对象的保留计数并产生保留计数 +1 的对象（不是 1，而是“加 1”）；必须释放从 init 返回的结果才能正确管理。

顺便说一下，+alloc 是类方法，-init 是实例方法

# shell - 杀死进程 SHELL

> ID：12445331
> 
> 赞同：3
> 
> 时间：2012-09-16T08:03:20.317
> 
> 标签：shell, unix, process, kill

此命令`ps -ef | grep php`返回进程列表

我想用一个命令或一个 shell 脚本杀死所有这些进程

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:08:57.240

杀死具有给定名称的所有命令的最简单方法是使用[`killall`](http://linux.die.net/man/1/killall)：

```
killall php 
```

注意，这只发送一个中断信号。如果进程正常运行，这应该足够了。如果他们没有因此而死，你可以使用强行杀死他们

```
killall -9 php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T08:17:52.910

执行此操作的正常方法是使用`xargs`as in `ps -ef | grep php | xargs kill`，但有几种方法可以执行此操作。

*   `ps -ef`列出所有进程，然后你`grep`用来挑选几行提到“php”的行。这意味着在命令行中包含“php”的命令也将匹配并被杀死。如果您真的想匹配命令（而不是参数），最好使用`pgrep php`.

*   您可以使用 shell 反引号将命令的输出作为参数提供给另一个命令，如

    杀死`pgrep php`

*   如果您只想终止进程，则有一个命令`pkill`将模式与命令匹配。但是，如果您想对流程执行其他操作，则不能使用此选项。这意味着如果你想杀死命令包含“php”的所有进程，你可以使用`pkill php`.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T08:05:47.973

你可以找到它的pid（它在第一列`ps`打印）并使用`kill`命令强行杀死它：

```
kill -9 <pid you found> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T08:06:35.150

使用`xargs`：

```
ps -ef | grep php | grep -v grep | awk '{print $2}' | xargs kill -9 
```

`grep -v grep`是排除命令本身并`awk`给出随后通过`kill`命令的 PID 列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T08:05:59.847

使用`pkill php`. 更多关于这个主题的类似问题：[如何通过名称而不是 PID 终止进程？](https://stackoverflow.com/questions/160924/how-can-i-kill-a-process-by-name-instead-of-pid)

# php - Codeigniter 旋转大图像

> ID：12445334
> 
> 赞同：1
> 
> 时间：2012-09-16T08:04:08.823
> 
> 标签：php, image, codeigniter, rotation, gd

我在旋转大图像时遇到问题...大于 1.2mb。对于较小的图像，没有问题。

这是代码：

```
public function rotate(){
    $path = $this->input->post('path');
    $file = $this->input->post('file');
    $config['image_library'] = 'gd2';
    $config['source_image'] = $path;
    $config['rotation_angle'] = '90';
    $config['new_image'] = './uploads/_rot'.$file;
    $this->load->library('image_lib');

    $this->image_lib->initialize($config); 
    //$this->image_lib->rotate();
    if(!$this->image_lib->rotate()){
        echo $this->image_lib->display_errors();
    } else {
        echo 'OK';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:26:35.600

我找到了问题所在。谢谢斯特鲁纳。我的托管服务提供商已将 php 内存限制设置为 32mb 并且 gd2 库对内存很感兴趣，他们不会增加它，解决方案是迁移或另一个库：imagemagick :) 这是代码，它工作得很好

```
public function rotate(){
    $path = $this->input->post('path');
    $file = $this->input->post('file');
    //echo "aaa";
    $config['image_library'] = 'imagemagick';
    $config['library_path'] = '/usr/bin';       
    $config['source_image'] = $path;
    $config['rotation_angle'] = '90';
    $config['quality'] = "90%";     
    $config['new_image'] = './uploads/_rot'.$file;
    $this->load->library('image_lib');
    $this->load->helper('file');

    $this->image_lib->initialize($config); 
    //$this->image_lib->rotate();
    if(!$this->image_lib->rotate()){
        echo $this->image_lib->display_errors();
    } else {
        echo 'OK';
        //delete_files($path);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:57:57.993

这可能是由于[`memory_limit`](http://php.net/manual/en/ini.core.php#ini.memory-limit)PHP 核心中的低设置（您可以使用 验证）和[GD2 库](http://php.net/manual/en/book.image.php)[`phpinfo()`](http://php.net/phpinfo)的内存消耗。 你可以参考这两个问题来解决这个问题：

*   [PHP GD 允许的内存大小已用尽](https://stackoverflow.com/questions/2827908/php-gd-allowed-memory-size-exhausted)
*   [防止GD图像库内存不足的故障安全方法？(PHP)](https://stackoverflow.com/questions/1117344/a-fail-safe-way-to-prevent-gd-image-library-from-running-out-of-memory-php)

您也可以尝试使用[ImageMagic 库](http://php.net/manual/en/book.imagick.php)：

```
$config['image_library'] = 'imagemagick';
$config['library_path'] = '/usr/bin/convert'; 
```

确保它之前[已安装](http://www.php.net/manual/en/imagick.installation.php)。

# thumbnails - 使用 Google Drive 缩略图的正确方法是什么？

> ID：12445335
> 
> 赞同：3
> 
> 时间：2012-09-16T08:04:13.673
> 
> 标签：thumbnails, google-drive-api

我首先尝试存储和使用 API 返回的链接，但它会在很短的时间内过期。然后我尝试在本地下载并存储图像（并从我的服务器提供它）；但是当我没有使用我的帐户登录时，缩略图链接会引发 404 错误（尽管文档是完全公开的）。

提供/检索文档缩略图的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:15:36.130

我终于解决了这个问题。如果您在 URL 过期之前获取 URL 并使用经过身份验证的客户端（使用您必须访问 API 的令牌），则可以下载缩略图。最后一点很重要，否则正常的 GET 请求会收到 404 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:39:25.477

您需要将 Authorization 标头添加到 thumbnailLink URL 的 HTTP GET 请求。

```
Authorization: OAuth [token] 
```

替换`[token]`为您的 OAuth 令牌。如果没有 Authorization 标头，Google 会返回 404 响应。请记住，链接的寿命不长，因此您必须迅速抓住它。

# ruby-on-rails-3 - 红宝石的本地时区

> ID：12445336
> 
> 赞同：12
> 
> 时间：2012-09-16T08:04:27.437
> 
> 标签：ruby-on-rails-3, timezone

需要创建一个 Rails 应用程序，我想在其中获取本地时区的时间，即如果位置是**德里**，时区应该是**IST**，如果位置是**San Fransisco**，时区应该是**PDT**。

如何在 ruby​​ on rails 中实现这一点？

PS 一根线码，可以根据位置自动设置时区。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-16T09:09:58.530

试试这个`Time.now.getlocal.zone`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-13T17:55:09.623

如果您需要奥尔森时区（因为三个字母的时区不明确，格林威治标准时间偏移也是如此），看起来在纯 Ruby/Rails 中没有办法做到这一点。Ruby 只会提供短代码（基本上是通过`date +%Z`），Rails 使用其配置的时区（默认值：UTC）。

也就是说，[炮击可以](https://gist.github.com/numist/f34cb150e337a8b948d9)与[另一个答案](https://stackoverflow.com/a/12523283/2002206)结合使用：

```
def get_local_timezone_str
  # Yes, this is actually a shell script…
  olsontz = `if [ -f /etc/timezone ]; then
    cat /etc/timezone
  elif [ -h /etc/localtime ]; then
    readlink /etc/localtime | sed "s/\\/usr\\/share\\/zoneinfo\\///"
  else
    checksum=\`md5sum /etc/localtime | cut -d' ' -f1\`
    find /usr/share/zoneinfo/ -type f -exec md5sum {} \\; | grep "^$checksum" | sed "s/.*\\/usr\\/share\\/zoneinfo\\///" | head -n 1
  fi`.chomp

  # …and it almost certainly won't work with Windows or weird *nixes
  throw "Olson time zone could not be determined" if olsontz.nil? || olsontz.empty?
  return olsontz
end 
```

# bash - 如何删除紧跟在特定符号之后的所有 CJK 文本？

> ID：12445341
> 
> 赞同：1
> 
> 时间：2012-09-16T08:05:33.090
> 
> 标签：bash, grep

我有一些这样的文字：

```
This is some text Z书. This is Zsome more text Z计算机.
This is yet some more Z电脑 text Z. 
```

我需要删除与模式匹配的所有案例`Z+(CJK)`，其中`(CJK)`是任意数量的连续 CJK 字符。上面的文件将变为：

```
This is some text . This is Zsome more text .
This is yet some more  text Z. 
```

如何删除与此模式匹配的所有 CJK 文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:23:09.183

Perl 单线如何？

```
perl -CSD -pe 's/Z\p{InCJK_Unified_Ideographs}+//g;' inputfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:51:45.883

您可以使用`GNU sed`检查非 ASCII 字符的代码：

```
sed -n l0 file.txt 
```

结果：

```
This is some text Z\344\271\246\. This is Zsome more text Z\350\256\241\347\256\227\346\234\272.$
This is yet some more Z\347\224\265\350\204\221 text Z.$ 
```

* * *

然后你可以用`GNU sed`它来做你想要的替换。在我的测试中，我必须将我的语言环境设置为 POSIX：

```
LC_ALL="POSIX" sed -r 's/Z[\o200-\o377]+//g' file.txt 
```

结果：

```
This is some text . This is Zsome more text .
This is yet some more  text Z. 
```

# css - css部分边框创建“占位符”

> ID：12445347
> 
> 赞同：4
> 
> 时间：2012-09-16T08:06:33.973
> 
> 标签：css, border

使用 CSS，如何根据下图创建部分边框

![在此处输入图像描述](../Images/12d45582b934f9af862158884154fea7.png)

我可以通过以下方式获得完整的边界：

```
border: 1px solid #f5f5f5; 
```

但只想在垂直边框的顶部和底部显示 30 像素，中间没有任何东西？

这可以实现吗？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:28:46.793

有一个 CSS 解决方案，但它很复杂，还需要 HTML 标记：

```
#box {
    width: 200px;
    height: 200px;
    margin: 30px;
    position: relative;
}

#box > div.corner {
    display: block;
    position: absolute;
    width: 50px;
    height: 50px;
}

.top {
    top: 0px;
    border-top-style: solid;
}

.bottom {
    bottom: 0px;
    border-bottom-style: solid;
}

.left {
    left: 0px;
    border-left-style: solid;
}

.right {
    right: 0px;
    border-right-style: solid;
} 
```

```
<div id="box">
    <div class="corner top left"></div>
    <div class="corner top right"></div>
    <div class="content">content</div>
    <div class="corner bottom left"></div>
    <div class="corner bottom right"></div>
</div> 
```

[**演示**](http://jsfiddle.net/hRNSN/)

# php - 在从 php 写入 html 文件时包含错误

> ID：12445361
> 
> 赞同：0
> 
> 时间：2012-09-16T08:09:06.227
> 
> 标签：php, post, get, include

我的代码似乎有问题。它从 php 文件创建一个文件，但在包含路径上出现错误。

```
include('../include/config.php');

$name = ($_GET['createname']) ? $_GET['createname'] : $_POST['createname'];

function buildhtml($strphpfile, $strhtmlfile) {
ob_start();
include($strphpfile);
$data = ob_get_contents();
$fp = fopen ($strhtmlfile, "w");
fwrite($fp, $data);
fclose($fp);
ob_end_clean();
}

buildhtml('portfolio.php?name='.$name, "../gallery/".$name.".html"); 
```

问题似乎在这里：

```
'portfolio.php?name='.$name 
```

有什么办法可以替换它，并且仍然发送变量吗？

* * *

这是我在 php 扩展名之后放置 ?name 时得到的错误：

```
Warning: include(portfolio.php?name=hyundai) [function.include]: failed to open stream: No such file or directory in D:\Projects\Metro Web\Coding\admin\create.php on line 15

Warning: include(portfolio.php?name=hyundai) [function.include]: failed to open stream: No such file or directory in D:\Projects\Metro Web\Coding\admin\create.php on line 15

Warning: include() [function.include]: Failed opening 'portfolio.php?name=hyundai' for inclusion (include_path='.;C:\php\pear') in D:\Projects\Metro Web\Coding\admin\create.php on line 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:08:46.893

现在我在对先前答案的评论中看到了您的代码，我想指出几件事

```
function buildhtml($strhtmlfile) {
    ob_start(); // redundant
    $fp = fopen ($strhtmlfile, "w"); // redundant
    file_put_contents($strhtmlfile,
                      file_get_contents("http://host/portfolio.php?name={$name}")); 
//                                       where does $name come from?? ---^
    close($fp); // also redundant
    ob_end_clean(); // also redundant
}
buildhtml('../gallery/'.$name.'.html'); 
```

在 PHP 中和在许多其他语言中一样，您可以以不同的方式做事。你所做的是你采取了三种不同的方式，只遵循了一种（这绝对足够了）。因此，当您使用函数`file_put_contents()`并且`file_get_contents()`不需要缓冲区时，这就是`ob_`函数系列，因为您永远不会读取缓冲区中的任何内容，然后应该使用`ob_get_contents()`. 您也不需要由 , 创建和使用的文件句柄`fopen()`，`fclose()`因为您从未使用 or 写入或读取文件`fwrite()`句柄`fread()`。

如果我猜对了您的功能的目的是将 html 页面复制到本地文件，我的建议如下：

```
function buildhtml($dest_path, $name) {
    file_put_contents($dest_path,
                  file_get_contents("http://host/portfolio.php?name={$name}"));
}

buildhtml('../gallery/'.$name.'.html', $name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:11:42.323

```
file_put_contents($strhtmlfile, file_get_contents("http://host/portfolio.php?name={$name}")) 
```

可以吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:12:04.247

输出：

```
'portfolio.php?name='.$name, "../gallery/".$name.".html"; 
```

是：

```
portfolio.php?name=[your name]../gallery/[your name].html 
```

你确定那是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T08:40:50.397

PHP 中的 include/require 语句允许您访问已存储在服务器上的文件中包含的代码

您要实现的目标是包含使用特定参数在该文件中执行代码的输出结果

MrSil 提供的建议示例允许您请求执行这些文件中的代码并提供参数。它向您显示空白页面的原因是因为 file_put_contents '将数据保存到文件'并且 file_get_contents 不回显结果，而是返回它。删除 file_put_contents 调用，并在 file_get_contents 之前的行开头添加一个回声，它应该可以工作。

```
echo file_get_contents('http://domain.com/file.php?param=1'); 
```

作为警告，这种方法会强制执行 2 个单独的 PHP 进程。包含将在第一个进程中执行第二个文件的代码。

要使包含方法起作用，您需要像第一次那样包含文件，但不指定参数。在包含每个文件之前，您需要设置它所期望的参数，例如 $_GET['name'] = $name

# c# - 传递绑定列表 到第二种形式的 button_Click 方法

> ID：12445362
> 
> 赞同：0
> 
> 时间：2012-09-16T08:09:30.837
> 
> 标签：c#, winforms, datasource, pass-by-reference, bindinglist

我要表格。

首先有 datagridview 和`BindingList<CustomObject>`as `DataSource`。

`DataSource`其次应该从第一个表单中添加/删除/更新。

我怎样才能做到这一点？修改等发生在`button_Click(object sender, EventArgs e)`secondform 上。我可以传递`BindignList<>`给构造函数，但我不能进一步传递`ref`给`SecondForms()``button_Click()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:55:05.280

您可以做的是在 form2 中创建一个 form1 将订阅的事件。把事情分开。我不知道您是如何构建 Form1 和 Form2 的，所以我只举一个例子。

```
class Form2 : Something
{
  public event NotifySubscriberEventHandler NotifySubscriberEvent ;
   public void button_Click(object sender, EventArgs e)
   {
      var handler = NotifySubscriberEvent ;
      if( handler != null)
       {
          handler(this,EventArgs.Empty) ;
       } 

   } 
} 

class Form1 
{
   public BindingList<T> MyBindingList {get;set;} //
   public void CreateForm2()
   {
       Form2 form2 = new Form2() ; 
       form2.NotifySubscriberEvent += OnButtonClicked;

   }
   public void OnButtonClicked(object source, EventArgs e)
   {
     //Do Something when notified
      MyBindingList.Add(...)
   }
} 
```

您必须创建一个 NotifySubsubscriberEventHandler 委托。这里： [http ://www.akadia.com/services/dotnet_delegates_and_events.html#Simple%20Event](http://www.akadia.com/services/dotnet_delegates_and_events.html#Simple%20Event)

但是你已经说过你正在将 BindingList 传递给我假设的构造函数：

```
public class Form2
{
  private BindingList<T> bindingList ;
  public Form2(BindingList<T> bindingList)
  {
       this.bindingList = bindingList ;
  }

   public void button_Click(object sender, EventArgs e)
   {
   // Do     bindingList.Add() or whatever

   } 
} 
```

上面的不行吗？^^

# tortoisesvn - Linux 存储库和 Windows XP 之间的 TortoiseSVN 更新/清理错误

> ID：12445365
> 
> 赞同：0
> 
> 时间：2012-09-16T08:09:35.697
> 
> 标签：tortoisesvn, windows-applications

不知为何，我无法再在便携式 Windows XP Professional SP3 机器上的开发目录上运行 TortoiseSVN 更新，出现以下错误：

> 之前的操作还没有完成；如果中断，请运行“清理”
> 请执行“清理”命令。

如果我尝试运行清理，我会收到另一个错误，

> 无法处理以下路径：无法将 $ROOT_DIR/.svn/tmp/tmp-... 移动到 $ROOT_DIR/path/where/thing/should/go：没有这样的文件或目录

我已经验证了这两个文件都存在，实际上从 CMD.EXE 提示符我可以使用这两个文件名发出 MOVE 并让它正常工作。这是没有用的，因为下次 SVN 在创建不同的`tmp`文件名后尝试自行重复操作，而当 CMD 成功时，SVN 会失败。

**更新**：在这两种情况下，路径长度都远低于 PATH_MAX，目标文件系统是 NTFS，并且权限正常。也许我现在会尝试使用[FileMon](http://en.wikipedia.org/wiki/Process_Monitor#FileMon)来看看 TortoiseSVN 到底在做什么。

我尝试降级 TortoiseSVN 但无济于事。其他存储库在同一台机器之间工作正常。

```
TortoiseSVN 1.7.9, Build 23248 - 32 Bit , 2012/08/30 18:25:37
Subversion 1.7.6, 
apr 1.4.6
apr-utils 1.3.12
neon 0.29.6
OpenSSL 1.0.1c 10 May 2012
zlib 1.2.7 
```

服务器（OpenSuSE Linux 12.2）和客户端现在都运行最新版本的 SVN。

在 Windows 上，我似乎也无法获得更多信息日志或信息（我对 TortoiseSVN 不是很熟练，我一直使用 Linux 命令行版本）。

我可能会删除本地副本并运行结帐，但它大约有 2 GB 的数据，而且我的连接速度很慢，所以它实际上更像是“从物理上飞到服务器位置并将铜质以太网连接到本地网络那里”的替代品。我将其保留为最后的选择，核选项；我真的很想了解问题是什么，因为我担心它可能会再次发生。

**更新**

我试图远程删除所涉及的子目录，在服务器上提交删除；在本地删除子目录，并清空`.svn/tmp`我发现 16 个`tmp`文件的子目录，一个 PNG 的所有副本都会导致问题。

我仍然无法执行任何 SVN 子命令，得到“运行清理！” 错误; 关于清理；我尝试将 tmpfile 复制到一个不再存在的目录中，该文件在任何地方都不再存在。

我尝试在本地重新创建目录（但不是文件！），没有任何更改。

使用 FileMon，我将源 PNG 跟踪到`8e4c2389cf9d85c8b8ee54d49ea053c752a38187.svn-base`.svn/pristine 子目录中，尝试将其删除并让 SVN 抱怨。我尝试将它复制到它的预期目的地（以便文件原样和文件原样相同），没有乐趣。

**更新**

嗯，这很奇怪。我决定使用 FileMon 跟踪TortoiseSVN 所做的*一切*。我可以看到它检查`wc.db`并搜索该项目，检查它`.svn/pristine`（并找到它），复制它（如果你问我的话......不必要）`.svn/tmp`，最后`$DESTINATION_FILE`使用 Windows Open() API 检查（使用正确的大小写）。并且找不到路径。但是文件*在*那里，我可以看到它（名称少于 8.3 个字符）。为什么找不到**PATH**而不是找不到**文件**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:38:06.970

好的，这一切都归结为一个远程创建的目录，其名称以*空格*结尾。文件本身没问题；它所在的目录*不是*。

显然，在更新时，该目录已创建，但名称被 Windows 缩短以排除最终空间。

为了增加诊断的难度，虽然 TortoiseSVN*确实*告诉我问题出在哪里，但它是在 Arial 字体使空间无法清晰识别的对话框中这样做的`\path\to\your \file`（一旦我知道在哪里看，并比较了与其他人一起斜线。这个站在离左边的字母稍远的地方）。

经验教训：仔细检查对话文件名，逐个字符（自我注意：如果可能的话，在 Courier New 中找到一种方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:31:47.440

您可能在存储库中有两个文件，它们只是大小写不同。这在 Windows 上是个问题。有关详细信息，请参阅此[常见问题解答](http://tortoisesvn.net/faq.html#cantmove)。

# opencv - 如何检测 OpenCV 中的已知对象？

> ID：12445366
> 
> 赞同：5
> 
> 时间：2012-09-16T08:10:02.317
> 
> 标签：opencv, real-time, detection, shape, template-matching

我尝试在窗口中实时绘制形状。形状像缠结，矩形，圆形，半圆形或圆形以及屏幕中使用黄色的“Z”。大小和形状可能与原始图像不同。但是程序知道所有原始形状。因为它们是预定义的。我想知道如何识别正确的形状。举个例子，

![在此处输入图像描述](../Images/5aa78607eaabb5fc9df0fdb8f491b94b.png)

有没有办法做到这一点？我可以为此使用模板匹配吗？请在这件事上给予我帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:08:37.950

您可以使用[不同的方法](https://stackoverflow.com/a/9660582/176769)来检测每个形状。检查这些：

*   [使用 OpenCV 进行椭圆检测](https://stackoverflow.com/a/10985330/176769)

*   [正方形检测找不到正方形](https://stackoverflow.com/a/7732392/176769)

# windows - 当 Windows 可以访问的总内存也限制为 4GB 时，Windows 如何将 4GB 地址空间分配给多个进程

> ID：12445369
> 
> 赞同：3
> 
> 时间：2012-09-16T08:10:28.573
> 
> 标签：windows, memory-management, process, operating-system, virtual-address-space

> 当 Windows 可以访问的总内存也限制为 4GB 时，Windows 如何将 4GB 地址空间分配给多个进程。

我在 Windows 内存管理中找到的上述问题的解决方案（作者：Pankaj Garg）

**解决方案：**

> 为了实现这一点，Windows 使用 x86 处理器（386 及更高版本）称为分页的功能。分页允许软件使用与物理内存地址不同的内存地址（称为逻辑地址）。处理器的分页单元透明地将这个逻辑地址转换为物理地址。这允许系统中的每个进程都有自己的 4GB 逻辑地址空间。

谁能帮助我以更简单的形式理解它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:22:33.967

基本思想是您的物理 RAM 有限。一旦它填满，你就开始在硬盘上存储东西。当一个进程请求当前在磁盘上的数据或请求新内存时，您通过将其传输到磁盘从 RAM 中踢出一个页面，然后将您实际需要的数据分页。

操作系统维护一个称为[页表](http://en.wikipedia.org/wiki/Page_table)的数据结构，以跟踪哪些逻辑地址对应于当前物理内存中的数据以及磁盘上的内容。

每个进程都有自己的虚拟地址空间，并使用该空间内的逻辑地址进行操作。操作系统负责将给定进程和逻辑地址的请求转换为磁盘上的物理地址/位置。它还负责防止进程访问属于其他进程的内存。

当进程请求当前不在物理内存中的数据时，会触发[页面错误。](http://en.wikipedia.org/wiki/Page_fault)发生这种情况时，操作系统会选择一个页面移动到磁盘（如果物理内存已满）。有几种[页面替换算法](http://en.wikipedia.org/wiki/Page_replacement_algorithm)用于选择要退出的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T08:30:52.537

错误的原始假设是“当它可以访问的总内存也被限制为 4GB 时”。这是不真实的，操作系统可以访问的总内存没有那么有限。

32 位代码可以访问的 32 位地址存在限制。它是 (1 << 32)，即 4 GB。然而，这只是同时访问的数量。想象一下操作系统有卡 A、B、...、F，而应用程序一次只能访问四个。App1 可能会看到`ABCD`，`ABEF`App2-，App3- `ABCF`。应用程序看到 4，但操作系统管理 6。

32 位平面内存模型的限制并不意味着整个操作系统都受到相同的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T08:20:26.937

Windows 使用一种称为虚拟内存的技术。每个进程都有自己的内存。这样做的原因之一是出于安全原因，禁止访问其他进程的内存。

正如您所指出的，分配的虚拟内存可能大于实际的物理内存。这就是分页过程发挥作用的地方。我对内存管理和微体系结构的了解有点生疏，所以我不想发布任何错误，但我建议阅读[http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)

如果您对更多文献感兴趣，我建议您阅读“结构化计算机组织 – Tannenbaum”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T11:29:11.457

虚拟地址空间不是 RAM。这是一个地址空间。每个`page`（页面的大小取决于系统）可以取消映射（页面无处可访问。它不存在），映射到文件（页面不可直接访问，其内容存储在磁盘上），映射到 RAM（这是您实际可以访问的页面）。

映射到 RAM 的页面可以是可交换的或固定的。固定页面永远不会被换出到磁盘。可交换页面与磁盘上的某个区域相关联，并且可以写入该区域以释放它们正在使用的 RAM。

映射到 RAM 的页面也可以是只读的、只写的、读写的。如果它们是可写的，它们可能是直接可写的或写时复制的。

多个页面（在同一地址空间内和跨不同地址空间）可以被相同地映射。这就是两个单独的进程如何访问内存中的相同数据（这可能发生在每个进程的不同地址）。

在现代操作系统中，每个进程都有自己的地址空间。在 32 位操作系统上，每个进程都有 4GiB 的地址空间。在 64 位操作系统上，32 位进程仍然只有 4GiB（4 GB 字节）的地址空间，但 64 位进程可能有更多。通常它们有 18 EiB（18 个 exabinary 字节，即 18,874,368 TiB）。

地址空间的大小完全独立于 RAM 内存的数量和实际分配的空间数量。您可以在具有 1 GB RAM 的机器上拥有 100 个进程，每个进程具有 18 EiB 的地址空间。事实上，自从典型的机器只有几兆字节或 RAM 以来，Windows 就一直为每个进程提供 4GiB 的地址空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T08:35:17.823

假设上下文是 32 位系统：

除了[http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)，但是内核给每个进程的内存抽象是 4GB，一个进程实际上可以使用的远小于 4GB，因为在每个进程中内核也是映射在进程的大部分页面中。通常在 NT 系统中 4GB 中，2GB 被内核使用，而在 *nix 系统中，1GB 被内核使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T06:13:27.610

很久以前，我在以 Windows 为案例研究的操作系统课程中读到了这篇文章。我给出的数字可能不准确，但它们可以让您对幕后发生的事情有一个不错的了解。据我所知：

在 windows 中使用的内存模型是[**Demand Paging**](http://en.wikipedia.org/wiki/Demand_paging)。在 Intel 上，页面大小为**4k**。最初，当您运行程序时，每个 4K 页面仅从您的程序加载 4 个页面。这意味着总共分配了**16k的内存。**程序可能更大，但没有必要一次将整个程序加载到内存中。其中一些页面是数据页面，即您的变量和数据结构所在的位置可读取/可写入。而另一个是包含可执行代码的代码页，即代码段。IP 设置为代码段的第一条指令，程序在分配了 4GB 的印象下开始执行。

当需要更多页面时，即您请求更多内存（数据段）或您的程序进一步执行并需要其他可执行指令（代码段）时，Windows 检查是否有足够的可用内存量。如果是，则这些页面被加载并映射到进程的地址空间。如果没有太多可用内存，则 Windows 会检查哪些页面已经有一段时间没有使用（这对所有进程运行，而不仅仅是调用进程）。当它找到这样的页面时，它会将它们移动到 Paging 文件以释放内存中的空间并加载请求的页面。

如果有时您的程序从某些已加载的 dll 调用代码，则只需将这些页面映射到您的进程的地址空间。无需再次加载这些页面，因为它们已经在内存中可用。因此它可以避免重复并节省空间。

所以理论上进程使用的内存比可用内存多，它们可以使用 4GB 内存，但实际上一次只加载进程的一部分。

（*如果你觉得有用，请标记我的答案*）

# php - 我如何在 symfony2.0.x 中使用 put/delete 方法

> ID：12445378
> 
> 赞同：2
> 
> 时间：2012-09-16T08:12:55.613
> 
> 标签：php, symfony

我正在尝试在 symfony 中启用 put / delete 方法，但我总是收到此错误：

405 方法不允许

路由.yml

```
album_list:
     pattern: /
     defaults: { _controller: "AcmeAlbumBundle:Album:list"}
     requirements:
        _method: GET

album_show:
    pattern:  /{id}/show
    defaults: { _controller: "AcmeAlbumBundle:Album:show" }
    requirements:
        _method: GET

album_index:
    pattern:  /index
    defaults: { _controller: "AcmeAlbumBundle:Album:new" }

album_put:
    pattern:  /{id}
    defaults: { _controller: "AcmeAlbumBundle:Album:put" }
    requirements:
        _method: PUT

album_delete:
    pattern:  /{id}
    defaults: { _controller: "AcmeAlbumBundle:Album:delete" }
    requirements:
        _method: DELETE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:42:14.307

我在 Symfony 的早期版本（2011 年 7 月的 RC4）中也遇到了这个错误。我只使用了 POST 方法。

您应该升级到最新版本以使其正常工作，但不幸的是，升级并不总是那么容易。

# android - Listview 最后一项以奇怪的视图结尾

> ID：12445380
> 
> 赞同：0
> 
> 时间：2012-09-16T08:13:09.063
> 
> 标签：android, android-layout, android-listview

我有一个包含数据库数据的列表视图，它的工作一切正常且完美，只有纬度项目视图看起来很奇怪。最后一项在底部包含阴影，我想删除该阴影，那么我该怎么做。下图将帮助您理解。

![在此处输入图像描述](../Images/79e378dabf2dea15a8676dfe4e376919.png)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:19:44.237

在您的 XML 文件中使用。在列表视图标签中。

```
 android:cacheColorHint="#00000000" 
```

# jodatime - 哪种数据类型最适合描述歌曲的时长？

> ID：12445383
> 
> 赞同：0
> 
> 时间：2012-09-16T08:13:28.780
> 
> 标签：jodatime

首先，在我意识到它添加了时区信息之前，我使用了 LocalTime。现在我知道[Duration](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html)和[Period](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)。我想知道它们中的哪一个（或者可能是其他任何一个）最适合我的情况以及出于什么原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:20:13.377

您想要 Duration ，这是一个不变的时间段。例如，这首歌总是需要 3 分钟。另一方面，时期是一个更相对的概念。1 天的时间段大部分时间是 24 小时，但夏令时前后可以是 23 或 25 小时。

另一方面，1 天的持续时间始终是 24 小时。

仅供参考，我通过阅读您链接到的 Period 的 javadoc 发现了这一点。

# blackberry - 代号one blackberry devicePin

> ID：12445387
> 
> 赞同：2
> 
> 时间：2012-09-16T08:13:55.317
> 
> 标签：blackberry, codenameone

如何使用 codenameone API 获取 BlackBerry 设备 Pin？

我尝试了以下方法：

```
Display.getInstance().getUdid(); 
```

返回一个空指针。

有没有办法使用 rim 中的 DeviceInfo 类来使用代号或其他方式来识别设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:43:46.223

您将需要使用本机接口来实现这一点。您可以在问题跟踪器中打开 RFE，这听起来像是我们可以添加的 API。

# git - 拉取请求覆盖先前的提交

> ID：12445392
> 
> 赞同：3
> 
> 时间：2012-09-16T08:14:34.607
> 
> 标签：git, github, merge, pull-request

我是 Git 新手，所以请耐心等待。

我有一个 Git 存储库（在 GitHub 上），并且我有很多没有 Git 经验的程序员。当我雇用他们时，我会要求他们向我的存储库发出拉取请求，以便我可以在合并之前查看他们的更改。目前我最大的问题是，我经常在他们 fork 之后将更改合并到我的存储库中，但在他们提出拉取请求之前，这意味着合并他们的拉取请求会覆盖之前的提交。

除了告诉他们避免问题外，我有什么办法可以确保不会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:34:43.860

确保不会发生这种情况的方法是拒绝任何无法以快进方式应用的提交。
但是没有什么能阻止用户在没有先更新他/她自己的分叉的情况下提交拉取请求。

*正确的拉取请求应该以快进的方式应用，这意味着贡献者应该在发出拉取请求之前*首先将他/她的工作重新建立在目标仓库的最新提交之上（即 git pull --rebase）。

换句话说，他们应该首先将您合并的其他更改集成到他们自己的本地仓库中，在拉取请求*之前测试他们的贡献是否仍然有效。*
如果他们这样做，那么覆盖之前的提交不会有任何问题。
如果有，您只需拒绝拉取请求，要求贡献者首先对本地 repo 进行 rebase。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:27:21.203

**困难的方法**：要求他们在合并之前创建一个（本地）分支。

**最简单的方法**：让我们忘记“如何避免问题”，告诉他们如何解决它。在 git 中，我们`git reflog`可以回滚（几乎）任何更改。

PS 合并不会“覆盖”较早的提交。`git log ; git reset`即使您没有 reflog，您也可以使用它来修复（大部分）它。

# mysql - MySQL 反向 GROUP BY 结果

> ID：12445396
> 
> 赞同：3
> 
> 时间：2012-09-16T08:15:52.897
> 
> 标签：mysql

我不擅长 Mysql 表达式，所以这是一个我想弄清楚的快速问题。我想颠倒**GROUP BY**表达式的顺序，以便我可以获得用户的最后一个条目。

我设法在互联网上找到了很好的例子，但我无法用我的表情来实现它们而不会收到错误。多谢你们！

```
SELECT messages.conv, messages.from_user, messages.to_user,
        messages.content, messages.date_posted, messages.note_read,
        messages.active, users.thumb, users.name, users.id
FROM `messages` 
INNER JOIN `users` 
    ON messages.from_user = users.id 
WHERE messages.from_user = 1 
    OR messages.to_user = 1 
GROUP BY messages.conv 
ORDER BY date_posted ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:23:08.067

编辑：我显然误解了您的要求，由于您没有任何聚合，您当前的查询将返回一个伪随机行`GROUP BY`，您想要的是每个对话的最后一行，这更像是（假设`messages`, like`users`具有自动递增主键称为`id`);

```
SELECT messages.conv, messages.from_user, messages.to_user,
       messages.content, messages.date_posted, 
       messages.note_read, messages.active, users.thumb, 
       users.name, users.id FROM  `messages` 
INNER JOIN  `users` 
       ON messages.from_user = users.id 
WHERE messages.id IN
      (SELECT MAX(id) FROM messages 
       WHERE messages.from_user = 1 OR messages.to_user = 1 
       GROUP BY conv); 
```

[SQLFiddle 在这里](http://sqlfiddle.com/#!2/ab060/5)。

# c# - 将文件从我的 Azure Web 角色复制到另一台计算机

> ID：12445398
> 
> 赞同：0
> 
> 时间：2012-09-16T08:15:59.217
> 
> 标签：c#, asp.net, .net, windows, azure

我有一个 Azure Web 角色和一台单独的计算机。他们都在同一个网络上，并且都共享彼此可以访问的某些文件夹。如果我继续使用我的 Azure Web 角色，通过远程桌面，我可以使用`\\comp1\folder`并在那里*添加/删除/编辑*文件到另一台计算机的共享文件夹。

我的网络角色上有一些图像文件，我需要将它们复制到单独的计算机上。这些图像被上传到 Web 角色并存储在那里。

**如何将网络角色上的这些图像复制到我的另一台计算机？**

我试过使用`File.Copy`，但它总是给我*拒绝访问*错误。

我试着做：

```
File.Copy(Server.MapPath("~/image/a.jpg"),@"\\comp1\folder\b.jpg"); 
```

结果：`UnauthorizedAccessException`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:21:19.340

我认为您不能像那样访问 Azure 上的文件系统，除非通过本地存储？

引用[比尔·怀尔德的话](http://blog.codingoutloud.com/2011/06/12/azure-faq-can-i-write-to-the-file-system-on-windows-azure/)

> 您在 (a) ASP.NET（例如，default.aspx 或 default.aspx.cs）或 (b) WebRole.cs/WorkerRole.cs（例如，派生的方法 OnStartup、OnRun 和 OnStop 中运行的任何代码来自 RoleEntryPoint 类）将无权写入文件系统。

您可以[读取和写入本地存储系统](http://www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx)

```
 try 
    {
        LocalResource myConfigsStorage = RoleEnvironment.GetLocalResource("myConfigs"); 
        string s = System.IO.File.ReadAllText(myConfigStorage.RootPath + "myFile.txt"); 
        //... do your work with s 
    } 
    catch (Exception myException) 
    { 
        ...    } 
```

但是一直使用 Azure 和多个实例，我从来没有看到需要本地存储，而是使用 blob 存储。

阅读更多： http: [//www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx#ixzz26ce8rXpk](http://www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx#ixzz26ce8rXpk)

# ios - AVCaptureStillImageOutput 从不调用完成处理程序

> ID：12445403
> 
> 赞同：1
> 
> 时间：2012-09-16T08:17:33.593
> 
> 标签：ios, camera, avfoundation, video-capture

以下代码不起作用。怎么了？

```
AVCaptureDevice * videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput * videoInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];
AVCaptureSession * captureSession = [[AVCaptureSession alloc] init];
captureSession.sessionPreset = AVCaptureSessionPresetMedium;
if (![captureSession canAddInput:videoInput])
    NSLog(@"Can't add input");
[captureSession addInput:videoInput];

self.stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
[self.stillImageOutput setOutputSettings:@{AVVideoCodecKey:AVVideoCodecJPEG}];
if (![captureSession canAddOutput:videoInput])
    NSLog(@"Can't add output");
[captureSession addOutput:self.stillImageOutput];

[self.stillImageOutput captureStillImageAsynchronouslyFromConnection:[self.stillImageOutput.connections lastObject]
                                                   completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error)
                                                   {
                                                       NSLog(@"!!!");

                                                       if (imageDataSampleBuffer == NULL)
                                                       {
                                                           NSLog(@"%@", error);
                                                           return;
                                                       }

                                                       NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                                                       UIImage *image = [[UIImage alloc] initWithData:imageData];
                                                       self.imageView.image = image;
                                                   }];

// Creating preview layer
self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:captureSession];
self.previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
self.previewLayer.frame = self.view.layer.bounds;
[self.view.layer addSublayer:self.previewLayer];

[captureSession startRunning]; 
```

AVCaptureVideoPreviewLayer 工作得很好，但 AVCaptureStillImageOutput 根本不调用完成处理程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-09T10:06:54.070

您需要以一种方法设置和启动会话，然后使用单独的捕获方法：

```
/////////////////////////////////////////////////
////
//// Utility to find front camera
////
/////////////////////////////////////////////////
-(AVCaptureDevice *) frontFacingCameraIfAvailable{

    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    AVCaptureDevice *captureDevice = nil;

   for (AVCaptureDevice *device in videoDevices){

        if (device.position == AVCaptureDevicePositionFront){

            captureDevice = device;
            break;
        }
    }

    //  couldn't find one on the front, so just get the default video device.
    if (!captureDevice){

        captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    }

    return captureDevice;
}

/////////////////////////////////////////////////
////
//// Setup Session, attach Video Preview Layer
//// and Capture Device, start running session
////
/////////////////////////////////////////////////
-(void) setupCaptureSession {
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer    alloc] initWithSession:session];
    [self.view.layer addSublayer:captureVideoPreviewLayer];

    NSError *error = nil;
    AVCaptureDevice *device = [self frontFacingCameraIfAvailable];
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    self.stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [self.stillImageOutput setOutputSettings:outputSettings];

    [session addOutput:self.stillImageOutput];

    [session startRunning];
}

/////////////////////////////////////////////////
////
//// Method to capture Still Image from 
//// Video Preview Layer
////
/////////////////////////////////////////////////
-(void) captureNow {
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in self.stillImageOutput.connections) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { break; }
    }

    NSLog(@"about to request a capture from: %@", self.stillImageOutput);
    __weak typeof(self) weakSelf = self;
    [self.stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error) {

         NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
         UIImage *image = [[UIImage alloc] initWithData:imageData];

         [weakSelf displayImage:image];
     }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:25:55.217

这很好用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AVCaptureDevice * videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    AVCaptureDeviceInput * videoInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];
    AVCaptureSession * captureSession = [[AVCaptureSession alloc] init];
    captureSession.sessionPreset = AVCaptureSessionPresetMedium;
    [captureSession addInput:videoInput];
    [captureSession addOutput:self.stillImageOutput];
    [captureSession startRunning];

    // Creating preview layer
    self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:captureSession];
    self.previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    self.previewLayer.frame = self.view.layer.bounds;
    [self.view.layer insertSublayer:self.previewLayer atIndex:0];
}

- (void)timerFired:(NSTimer *)timer
{
    [self.stillImageOutput captureStillImageAsynchronouslyFromConnection:[self.stillImageOutput.connections lastObject]
                                                       completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error)
                                                       {
                                                           NSLog(@"!!!");

                                                           if (imageDataSampleBuffer == NULL)
                                                               NSLog(@"%@", error);

                                                           NSData * imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                                                           UIImage * image = [[UIImage alloc] initWithData:imageData];
                                                           self.imageView.image = image;
                                                       }];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];
} 
```

# sql - 获取日期差为一的行

> ID：12445414
> 
> 赞同：3
> 
> 时间：2012-09-16T08:19:53.723
> 
> 标签：sql, database, oracle, oracle10g, date-arithmetic

我在[SQLFiddle中定义了下表和行](http://sqlfiddle.com/#!4/76226/2)

我需要从产品表中选择两行之间的差异`start_date`为 `nvl(return_date,end_date)`1 的行。即`start_date`当前行和`nvl(return_date,end_date)`前一行应该是一个

例如

`PRODUCT_NO TSH098`and `PRODUCT_REG_NO FLDG`, the`END_DATE`是**August, 15 2012**和 `PRODUCT_NO TSH128`and`PRODUCT_REG_NO FLDG` `start_date`是**August, 16 2012**，所以差别只有一天。

如何使用 sql 获得所需的输出。

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:27:48.837

在 SQL 中，`date + X`将 X 天添加到日期。这样你就可以：

```
select  * 
from    products
where   start_date + 1 = nvl(end_date, return_date) 
```

如果日期可能包含时间部分，请使用`trunc`删除时间部分：

```
select  * 
from    products
where   trunc(start_date) + 1 = trunc(nvl(end_date, return_date)) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!4/5f4b9/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:23:47.180

您可以使用[`lag`](http://docs.oracle.com/cd/B10501_01/server.920/a96540/functions56a.htm#83619)分析功能来访问当前位置之前给定物理偏移量的行。根据您的排序顺序，它可能看起来像这样（虽然不是那么优雅）。

```
select *
  from products p
  join (select *
         from(select p.Product_no
                   , p.Product_Reg_No
                   , case 
                       when (lag(start_date, 1, start_date) over(order by product_reg_no)-
                            nvl(return_date, end_date)) = 1 
                            then lag(start_date, 1, start_date) 
                                   over(order by product_reg_no) 
                        end start_date
                   , End_Date
                   , Return_Date
               from products p 
              order by 2,1 desc
              )
        where start_date is not null
       ) s
    on (p.start_date = s.start_date or p.end_date = s.end_date)
 order by 2, 1 desc 
```

[**SQL Fiddle 演示**](http://sqlfiddle.com/#!4/76226/171)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T10:43:21.490

将当前行与前一行进行比较的方法是使用 LAG() 函数。像这样的东西：

```
select * from 
(
select p.* 
       , lag (end_date) over 
         (order by start_date )
         as prev_end_date
       , lag (return_date) over 
         (order by start_date )
         as prev_return_date
from products p
)
where (trunc(start_date) - 1) = trunc(nvl(prev_return_date, prev_end_date))
order by 2,1 desc 
```

但是，这不会返回您想要的结果，因为您尚未定义用于定义排序顺序的机制。如果没有排序顺序，“前一行”的概念就毫无意义。

但是，您可以这样做：

```
select p1.* 
       , p2.*
from products p1 cross join products p2
where (trunc(p2.start_date) - 1) = trunc(nvl(p1.return_date, p1.end_date))
order by 2, 1 desc 
```

此 SQL 查询您的表两次，根据日期进行过滤。结果集中的每一行都包含来自每个表的记录。如果给定的 start_date 与多个 end_date 匹配，反之亦然，您将获得多次点击的记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T11:43:02.383

我的印象是，如果产品注册不匹配，您只希望匹配日期相差 1 天。所以我只是把它联合起来，我认为这就是你想要的

```
select p1.product_reg_no,
       p1.product_no product_no_1,
       p2.product_no product_no_2,
       p1.start_date start_date_1,
       nvl(p2.return_date,p2.end_date) return_or_end_date_2
  from products p1
  join products p2 on (p1.product_reg_no = p2.product_reg_no)
where  p1.start_date-1 = nvl(p2.return_date,p2.end_date) 
```

[SQL小提琴](http://sqlfiddle.com/#!4/76226/154)

如果我对分组有误，那么只需离开连接条件，这与给定的示例产品表带来相同的结果

```
select p1.product_reg_no,
       p1.product_no product_no_1,
       p2.product_no product_no_2,
       p1.start_date start_date_1,
       nvl(p2.return_date,p2.end_date) return_or_end_date_2
  from products p1, products p2
where  p1.start_date-1 = nvl(p2.return_date,p2.end_date) 
```

[SQL 小提琴 2](http://sqlfiddle.com/#!4/76226/157)

现在你说差异是 1 天。我自动假设 start_date 比 nvl(return_date,end_date) 高 1 天。我还假设日期总是午夜。但是要排除所有这些，您可以使用 trunc 并双向进行：

```
select p1.product_reg_no,
       p1.product_no product_no_1,
       p2.product_no product_no_2,
       p1.start_date start_date_1,
       nvl(p2.return_date,p2.end_date) return_or_end_date_2
  from products p1, products p2
where  trunc(p1.start_date)-1 = trunc(nvl(p2.return_date,p2.end_date))
    or trunc(p1.start_date)+1 = trunc(nvl(p2.return_date,p2.end_date)) 
```

[SQL 小提琴 3](http://sqlfiddle.com/#!4/76226/163)

这一切都有效，因为日期（不是时间戳）可以通过加减来计算。

编辑：根据您的评论，您希望比较 return_date `or`end_date 并且还需要相同的日期：

```
select p1.product_reg_no,
       p1.product_no product_no_1,
       p2.product_no product_no_2,
       p1.start_date start_date_1,
       p2.return_date return_date_2,
       p2.end_date end_date_2
  from products p1, products p2
where  trunc(p1.start_date)   = trunc(p2.return_date)
    or trunc(p1.start_date)-1 = trunc(p2.return_date)
    or trunc(p1.start_date)+1 = trunc(p2.return_date)
    or trunc(p1.start_date)   = trunc(p2.end_date)
    or trunc(p1.start_date)-1 = trunc(p2.end_date)
    or trunc(p1.start_date)+1 = trunc(p2.end_date) 
```

[SQL 小提琴 4](http://sqlfiddle.com/#!4/76226/175)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-16T14:06:41.827

你的意思是这样吗？

```
SELECT T2.*
FROM PRODUCTS T1
    JOIN PRODUCTS T2 ON (
        nvl(T1.end_date, T1.return_date) + 1 = T2.start_date
    ); 
```

在[您的 SQL Fiddle 示例](http://sqlfiddle.com/#!4/a9bdd/7)中，它返回：

```
PRODUCT_NO    PRODUCT_REG_NO    START_DATE                          END_DATE                            RETURN_DATE
TSH128        FLDG              August, 16 2012 00:00:00-0400       September, 15 2012 00:00:00-0400    (null)
TSH125        SCRW              August, 08 2012 00:00:00-0400       September, 07 2012 00:00:00-0400    (null)
TSH137        SCRW              September, 08 2012 00:00:00-0400    October, 07 2012 00:00:00-0400      (null) 
```

*   由于您已经解释的原因，TSH128 被退回。
*   返回 TSH125，因为 TSH116`end_date`是 2012 年 8 月 7 日。
*   返回 TSH137，因为 TSH125`end_date`是 2012 年 9 月 7 日。

如果您只想比较相同的行`product_reg_no`，很容易将其添加到 JOIN 条件中。如果您想要 1 天差异的两个“方向”，也很容易添加它。

# opencv - 使用相机的 OpenCV 连续速度测量

> ID：12445416
> 
> 赞同：4
> 
> 时间：2012-09-16T08:20:03.443
> 
> 标签：opencv, camera, tracking

我是 OPENCV 的新手，所以如果我在这里缺少一些简单的东西，请多多包涵。

我正在尝试开发一个基于摄像头的系统，该系统可以在以下假设下连续输出车辆的速度： 1\. 摄像头水平放置，车辆经过摄像头镜头的 3 到 5 英尺附近。2.速度不会超过30KM/Hrs

我希望从检测表面图案位移的光学鼠标的概念开始。但是我不清楚当车辆开始进入框架时如何处理背景。

我有兴趣尝试两种方法，但正在寻找进一步的输入。

1.  在车辆进入框架并与背景分离时对其进行检测。
2.  使用 cvGoodFeaturesToTrack 查找车辆上的点。
3.  跟踪下一帧中的点。& 使用 Lucas_Kanade Pyramid 函数计算光流的水平速度。
4.  重复

请提出更正和修正。此外，我请求更有经验的成员帮助我有效地编写此过程，因为我不知道此处使用哪些最正确的函数。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T15:39:46.337

希望您将使用 20 fps 到 30 fps 的简单相机，并且您的相机垂直于道路放置，但远离道路……物体，即您的汽车在图像平面上的最大速度为 8 ms-1。 .在您使用的镜头的帮助下计算图像平面中汽车的速度...

```
 ( speed in object plane / distance of camera from road ) = ( speed in image plane / focal length ) 
```

如果你知道每个像素测量多少，你应该以每秒像素为单位......

脚步...

1.  您可以使用帧区分...即从前一帧中减去当前帧并取绝对差...阈值差...这将您的移动汽车从背景分割出来...记住这些部分都在移动对象......所以如果你想要一辆汽车而不是一个移动的人，你可以使用形状特征，即高度与宽度的比率......将一个矩形拟合到分段部分，并在每一帧中执行相同的步骤。因此，在每一帧中，您都可以记录边界框前缘的坐标......使用帧数、帧率和边界框前沿的坐标来计算速度...

2.  您可以使用 goodfeaturestotrack 和 open cv 的光流...这样您就可以区分快速移动和缓慢移动的物体...但要不断刷新 goodfeaturestotrack 为您提供的点，否则任何进入相机视图的新车都不会被更新...记录goodfeaturestotrack在每一帧中选取的那组点的位移..也就是运动物体的位移...用同样的方法计算速度...计算速度**的基本思路是记录对象在相机视野中持续存在的帧数**...如果您的相机是固定的，那么您的视野也是如此...**因此重要的是您能够捕捉到对象的帧数**...记住....opencv的光流适用于跟踪缓慢移动的物体或更理论上的特征点（由要跟踪的好特征确定..）算法工作的2个连续帧之间的位移较小...大算法的位移会产生一些错误的预测......这就是为什么图像平面中的速度很重要......至少在定性上你应该对它有所了解......

注意：这两种方法都用于单个对象跟踪..对于多个对象跟踪，您需要进行一些修改...但是您可以从任何一种方法开始...我认为它会起作用..

# android - 通过蓝牙将真机与模拟器配对

> ID：12445419
> 
> 赞同：0
> 
> 时间：2012-09-16T08:20:20.670
> 
> 标签：android, android-emulator, bluetooth

我有一个依赖蓝牙的 android 应用程序。现在我需要两台设备来使用它，但我只有一台物理 android 设备。有什么方法可以在 PC 模拟器使用 PC 的蓝牙适配器时将我的设备和我的 PC 模拟器用作终端？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:20:29.403

你不能。简单的答案，但模拟器不支持蓝牙。我为 Android 开发蓝牙配件，一直在等待模拟器的 BT 访问，但现在，简单的答案是否定的。

# .net - PowerShell 3：每个命令执行都会导致“类型初始化程序 [...] 引发异常”错误

> ID：12445422
> 
> 赞同：4
> 
> 时间：2012-09-16T08:20:43.813
> 
> 标签：.net, windows, shell, powershell, powershell-3.0

## 描述

几个月前，我在我的系统上安装了新的 PowerShell 版本。从那以后，每次我使用 shell 时都会发生一些奇怪的事情。它不会影响功能，但它让我感到困扰和困扰，因为**每次在命令执行结束时**我都必须看到红色错误消息。

（我不是 .NET 专家，而且我从未对 .NET 或 PowerShell 做过任何意想不到的事情。）

## 外壳的输出

```
PS C:\\> my-cmdlet
Cmdlet-Ausgabe...   
Der Typeninitialisierer für "System.Management.Automation.HostUtilities" hat eine Ausnahme verursacht.
PS C:\\> _ 
```

这是德文版：

```
PS C:\\> my-cmdlet
Cmdlet output...   
The type initializer for "System.Management.Automation.HostUtilities" threw an exception.
PS C:\\> _ 
```

## 我的问题

有什么方法可以**阻止这些错误消息**（不影响 PowerShell v3 的功能）？- 谢谢。

（如果您需要有关我的 PowerShell 的更多信息，请编写命令并描述您需要哪些信息。）

（我希望我想问的很清楚。但是，如果不是，请写评论来描述不清楚的地方！）

* * *

**更新：**

*（Shellin-/运行时输出`$error[0].exception.tostring()`）*

```
PS %> my-cmdlet
Cmdlet-Ausgabe...
Der Typeninitialisierer für "System.Management.Automation.HostUtilities" hat eine Ausnahme verursacht.
PS %> $error[0].exception.tostring()
Es ist nicht möglich, eine Methode für einen Ausdruck aufzurufen, der den NULL hat.
In Zeile:1 Zeichen:1
+ $error[0].exception.tostring()
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

Der Typeninitialisierer für "System.Management.Automation.HostUtilities" hat eine Ausnahme verursacht.
PS %> _ 
```

即德文版：

```
PS %> my-cmdlet
Cmdlet-Output...
The type initializer for "System.Management.Automation.HostUtilities" threw an exception.
PS %> $error[0].exception.tostring()
You cannot call a method on a null-valued expression.
On line:1 char:1
+ $error[0].exception.tostring()
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

The type initializer for "System.Management.Automation.HostUtilities" threw an exception.
PS %> _ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:18:06.323

我似乎记得我在测试期间看到过这个（在虚拟机中！）一次——出于某种原因，它是一个 duff 安装。可以重装吗？？

这当然不是预期的行为。

就个人而言，我发现每 6 到 18 个月重新安装一次是个好主意，因为我确实玩过很多 beta 软件。我的笔记本电脑本周早些时候得到了重新安装处理，并且运行得更好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:54:36.907

在“类型初始化程序”（即静态构造函数）中运行的唯一代码是从资源字符串中填充一组建议的代码。在我看来，资源文件已被删除或损坏，或者您的系统的语言/文化设置有一些奇怪的地方阻止了特定于文化的资源检索工作。我建议重新安装 PowerShell 3.0 和/或验证操作系统的语言是否与 PowerShell 安装程序的语言相同。对不起！

# java - SWT 源代码编辑器小部件

> ID：12445423
> 
> 赞同：3
> 
> 时间：2012-09-16T08:20:44.160
> 
> 标签：java, python, swt, syntax-highlighting

SWT 是否有任何源代码编辑器小部件？我找了很长时间，什么也没找到……我看到了这个问题：[SWT Syntax highlighting widget](https://stackoverflow.com/questions/713996/swt-syntax-highlighting-widget)，但我不想使用原始 StyledText 小部件——我需要的不仅仅是语法高亮。例如，我还需要代码完成。

我需要这个来赋予用户在 Python 中编辑源代码的能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:12:07.130

我“解决”了这个问题。

我使用了 JFace 的[SourceViewer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/text/source/SourceViewer.html)和其他在 Google 中找到的东西，例如[简单的语法高亮](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/JavaSourcecodeViewer.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:19:55.763

您可以创建一个 eclipse 插件来编辑 python 文件（包括大纲视图和其他与 eclipse 相关的东西）。然后将它安装在一个空的 eclipse 应用程序中（没有 java 编辑器），用户可以编辑这些文件。

创建编辑器的链接[位于 vogella.com 上](http://www.vogella.com/articles/EclipseEditors/article.html)。我知道互联网上有另一个关于编辑xml文件的例子，但我现在找不到链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T04:17:54.013

我想你可以看看`JavaEditor`*jdt*ui* 插件是如何实现的。`org.eclipse.ui.texteditor.AbstractTextEditor`是大多数编辑器的基类。一旦你实现了编辑器，你只需要将文件扩展名与编辑器相关联。

# .net - 如何在不指定所有尺寸定义组合的情况下防止 wpf 功能区组完全折叠？

> ID：12445424
> 
> 赞同：1
> 
> 时间：2012-09-16T08:21:23.700
> 
> 标签：.net, wpf, ribbon

如何防止 wpf 功能区组完全折叠？

我意识到有一个 RibbonGroup.GroupSizeDefinitions 属性（在这里讨论：http: [//msdn.microsoft.com/en-us/library/ff701790.aspx](http://msdn.microsoft.com/en-us/library/ff701790.aspx)），如果我定义了一堆 RibbonGroupSizeDefinition 而没有使用 isCollapsed=true 它确实接近我想要的。

不幸的是，我不想定义尺寸定义，因为显示的按钮会因用户许可证而异。例如。一个客户可能会在一组中获得六个按钮，而一个客户可能有四个。

所以我希望它自动设置组但永远不会完全折叠 - 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-22T08:39:33.133

试试这个 ：

```
<RibbonGroup Name="Clipboard">
   <RibbonGroup.GroupSizeDefinitions>
       <RibbonGroupSizeDefinition>
            <RibbonControlSizeDefinition ImageSize="Large" IsLabelVisible="True" />
            <RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True" />
            <RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True" />
        </RibbonGroupSizeDefinition>           
           <RibbonGroupSizeDefinition>
             <RibbonControlSizeDefinition ImageSize="Large" IsLabelVisible="True" />
             <RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="False" />
             <RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="False" />
           </RibbonGroupSizeDefinition>
          <RibbonGroupSizeDefinition IsCollapsed="False" />
    </RibbonGroup.GroupSizeDefinitions>
 <RibbonGroup> 
```

再也不会崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:14:22.970

我看到功能区源代码可供下载[http://www.microsoft.com/en-au/download/details.aspx?id=11877](http://www.microsoft.com/en-au/download/details.aspx?id=11877)

从这里我可以查看 RibbonGroup 内部，并看到它有一个私有属性 GroupSizeDefinitionsInternal 可以自动调整大小。它总是添加一个定义，`IsCollapsed = true`所以没有办法按照我的要求去做。

一个解决方案是在您的代码中编写代码以实现您的所有大小定义，但没有`IsCollapsed = true`- 请注意，许可证声明您不能使用或修改现有代码，因此需要从头开始编写，而不是从属性中复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T11:43:02.087

我已经派生了 Ribbon、RibbonTab 和 RibbonGroup。

我没有重写 GroupSizeDefinitions 的代码，而是使用反射来访问 GroupSizeDefinitions 属性。

```
public class xxxRibbon : Ribbon
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        return new xxxRibbonTab();
    }
}

public class xxxRibbonTab : RibbonTab
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        return new xxxRibbonGroup();
    }
}

public class xxxRibbonGroup : RibbonGroup
{
    public const string PropertyName_IsCollapsable = "IsCollapsable";
    public const string PropertyName_GroupSizeDefinitionsResourceName = "GroupSizeDefinitionsResourceName";

    public static readonly DependencyProperty IsCollapsableProperty =
        DependencyProperty.Register(xxxRibbonGroup.PropertyName_IsCollapsable, typeof(bool), typeof(xxxRibbonGroup), new FrameworkPropertyMetadata((bool)true, xxxRibbonGroup.IsCollapsablePropertyChangedCallback));

    public static readonly DependencyProperty GroupSizeDefinitionsResourceNameProperty =
        DependencyProperty.Register(xxxRibbonGroup.PropertyName_GroupSizeDefinitionsResourceName, typeof(string), typeof(xxxRibbonGroup), new FrameworkPropertyMetadata((string)null, xxxRibbonGroup.GroupSizeDefinitionsResourceNamePropertyChangedCallback));

    public bool IsCollapsable
    {
        get { return (bool)this.GetValue(xxxRibbonGroup.IsCollapsableProperty); }
        set { this.SetValue(xxxRibbonGroup.IsCollapsableProperty, value); }
    }

    public string GroupSizeDefinitionsResourceName
    {
        get { return (string)this.GetValue(xxxRibbonGroup.GroupSizeDefinitionsResourceNameProperty); }
        set { this.SetValue(xxxRibbonGroup.GroupSizeDefinitionsResourceNameProperty, value); }
    }

    private static void IsCollapsablePropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
    {
        xxxRibbonGroup ribbonGroup = dependencyObject as xxxRibbonGroup;
        if (ribbonGroup == null)
        {
            return;
        }

        ribbonGroup.rebuildGroupSizeDefinitions();
    }

    private static void GroupSizeDefinitionsResourceNamePropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
    {
        xxxRibbonGroup ribbonGroup = dependencyObject as xxxRibbonGroup;
        if (ribbonGroup == null)
        {
            return;
        }

        ribbonGroup.rebuildGroupSizeDefinitions();
    }

    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        this.GroupSizeDefinitions = null;
        this.rebuildGroupSizeDefinitions();
    }

    protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
    {
        base.OnItemsSourceChanged(oldValue, newValue);

        this.GroupSizeDefinitions = null;
        this.rebuildGroupSizeDefinitions();
    }

    private void rebuildGroupSizeDefinitions()
    {
        string resourceName = this.GroupSizeDefinitionsResourceName;
        if (string.IsNullOrEmpty(resourceName) == false)
        {
            object resource = Application.Current.TryFindResource(resourceName);
            if (resource == null)
            {
                this.GroupSizeDefinitions = null;
                return;
            }

            RibbonGroupSizeDefinitionBaseCollection grsidef = resource as RibbonGroupSizeDefinitionBaseCollection;
            if (grsidef == null)
            {
                this.GroupSizeDefinitions = null;
                return;
            }

            this.GroupSizeDefinitions = grsidef;
            return;
        }

        PropertyInfo[] props = this.GetType().BaseType.GetProperties(BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance | BindingFlags.Static);

        foreach (PropertyInfo propertyInfo in props)
        {
            if (propertyInfo.Name == "GroupSizeDefinitionsInternal")
            {
                RibbonGroupSizeDefinitionBaseCollection value = propertyInfo.GetValue(this, BindingFlags.GetProperty | BindingFlags.NonPublic, null, null, null) as RibbonGroupSizeDefinitionBaseCollection;
                if ((value != null) && (value.Count > 0))
                {
                    RibbonGroupSizeDefinitionBaseCollection result = new RibbonGroupSizeDefinitionBaseCollection();
                    foreach (RibbonGroupSizeDefinitionBase it in value)
                    {
                        if (this.IsCollapsable == false)
                        {
                            if (it.IsCollapsed == false)
                            {
                                result.Add(it);
                            }
                        }
                        else
                        {
                            result.Add(it);
                        }
                    }

                    result.Freeze();

                    this.GroupSizeDefinitions = result;
                    return;
                }

                return;
            }
        }

        Traceur.Assert(false);
    }
} 
```

# cakephp - 如何保存搜索参数以供以后在 Cakephp 中使用

> ID：12445429
> 
> 赞同：1
> 
> 时间：2012-09-16T08:22:17.350
> 
> 标签：cakephp

我有一个搜索表单，用户可以在其中输入要搜索的数据，然后他可以使用分页。

对于分页，我必须一次又一次地发送搜索到的参数。处理这种情况的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:14:53.227

您可以将搜索到的参数`url`作为命名参数发送。例如：

```
http://127.0.0.1/cakeproj/controllers/action/q:searchedItem/... 
```

您将在控制器的操作中获得此命名参数，例如：

```
$this->params->named; 
```

***或者***

```
$this->params['named']; 
```

它会给你一个像这样的数组：

```
[named] => Array
(
    [q] => 'searchedItem',
    ....
) 
```

直接获取搜索到的项目：

```
$this->params->named['q']; 
```

***或者***

```
$this->params['named']['q']; 
```

# android - 三星设备在查询通话记录时返回短信

> ID：12445430
> 
> 赞同：4
> 
> 时间：2012-09-16T08:22:24.180
> 
> 标签：android, android-contentprovider, samsung-mobile, calllog

我的一些用户报告说，在他们的三星设备（GT-N7000 和 SGH-I777）上，我在我的应用程序中对[CallLog.Calls](https://developer.android.com/reference/android/provider/CallLog.Calls.html)进行的查询也会显示文本消息。

我已经创建了他们的转储`CallLog` `ContentProvider`，它似乎有 Android API 中没有提到的额外字段，并且没有在我们的任何测试设备上返回。

具体来说，查看转储，有一个名为 的字段`logtype`，它似乎等于 100 用于通话，300 用于短信。在线搜索该字段后，我没有找到该字段值的任何官方文档，但我主要通过崩溃堆栈跟踪发现了该字段的许多其他可能值，这些跟踪显示了以下划线查询`ContentProvider`：

> 日志类型=300 或日志类型=200
> 
> 日志类型 = 100 或日志类型 = 500 或日志类型 = 800 或日志类型 = 900 或日志类型 = 1000

所以我假设300/200用于短信，100/500/800/900/1000用于通话，但我不确定，因为我没有看到500/800/900/1000被使用在报告用户的设备上。

有人可以阐明 logtype 的可能值及其含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T12:07:50.073

您好，如果您检查 callLog.Calls 列，您会发现 messageid 字段，该字段表示这是三星手机的消息。因此，如果您只想获取没有消息的呼叫列表，只需执行以下操作：

int messageIdIndex=cursor.getColumnIndex("messageid");

while (cursor.moveToNext()) {

```
if(messageIdIndex>=0)
    messageID=cursor.getLong(messageIdIndex);

if(messageID<=0)
{
    //do whatever you need with calls log data
} 
```

}

光标.close();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:51:32.550

我已经设法通过查询`CallLog.Calls`列来初步解决它`logtype`，如果抛出异常，我会正常查询，否则，我会选择查询`(logtype=100 OR logtype=500)`

这似乎适用于我的报告用户，但我仍然不确定它是否涵盖所有基础，因为有许多可能的值`logtype`我不知道其含义。

如果有人有更好的答案，请添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T12:38:14.367

当我调试 sgs2 设备时，我发现了这个。可能对某人有用。

```
SELECT number, name, type, date, duration FROM logs WHERE (
logs.logtype=100 OR 
logs.logtype=110 OR 
logs.logtype=900 OR 
logs.logtype=500 OR 
logs.logtype=800 OR 
logs.logtype=120 OR 
logs.logtype=510 OR 
logs.logtype=1000 OR 
(logs.logtype=200 AND number NOT IN (SELECT number FROM logs WHERE number LIKE '%@%')) OR logs.logtype=300) 
AND ((type != 4)) AND (logtype=100 OR logtype=500))) 
ORDER BY date DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T19:08:58.783

到目前为止，我们发现三星设备在 Calls 内容提供程序中的 'logtype' 字段中使用了值*1150*、*100*或*1000*。

我无法确认是否使用了此处提到的任何其他值。

# ruby-on-rails - Rails - 嵌套表单链接 has_one 的子对象已经创建

> ID：12445431
> 
> 赞同：1
> 
> 时间：2012-09-16T08:22:32.967
> 
> 标签：ruby-on-rails, associations, nested-forms

我有两个模型，它们在 has_one / belongs_to 关联中链接；计算机和 IPv6Address 分别。

我已经用我希望它拥有的所有条目预先填充了 Ipv6 表，现在我需要在计算机新/编辑表单上有一个下拉列表，以从 Ipv6 中选择一个项目以与之关联。

到目前为止，我在这方面看到的一切似乎只有在您在新表单上同时创建两个对象然后随后编辑它们时才有效。

我尝试按照我在网上找到的示例设置我的 MVC，但我不断收到错误，如下代码摘录：

电脑型号：

```
class Computer < ActiveRecord::Base
  accepts_nested_attributes_for :ipv6_address
  has_one :ipv6_address
  ... 
```

IPv6地址模型：

```
class Ipv6Address < ActiveRecord::Base
  attr_accessible :computer_id, :ip_address
  belongs_to :computer
  ... 
```

电脑控制器：

```
class ComputersController < ApplicationController
  def new
    @computer = Computer.new
    @ipv6s = Ipv6Address.where('computer_id IS NULL').limit(5)
  end

  def edit
    @computer = Computer.find(params[:id])
    @ipv6s = Ipv6Address.where('computer_id = #{@computer.id} OR computer_id IS NULL').order('computer_id DESC').limit(5)
  end 
```

电脑新形态：

```
<%= simple_form_for( @computer ) do |f| %>
  <%= f.fields_for :ipv6_addresses do |v6| %>
    <%= v6.input :ipv6_address, :collection => @ipv6s %>
  <% end %>
  <% f.button :submit %>
<% end %> 
```

浏览到计算机新表单时出错：

```
NoMethodError in ComputersController#new

private method `key?' called for nil:NilClass 
```

此错误没有提供任何代码行参考，但仅当我将嵌套表单包含在计算机新表单中时才会出现。

关于导致它的原因或我如何更好地去做我正在做的事情的任何想法？

**编辑：**

事实证明，我需要在计算机模型`accepts_nested_attributes_for :ipv6_address`中添加行后。`has_one :ipv6_address`

这解决了表单加载的问题。

根据 Yarden 的回答，我还对“ipv6_address”的所有实例进行了单数化，以反映 has_one 关系。

但是，一旦以新形式执行此操作，ipv6 字段就完全消失了。如果我不能很快解决这个问题，我会提出一个新问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:33:57.660

尝试添加'：'，我认为这可能是问题：

```
 <%= f.fields_for :ipv6_addresses do |v6| %> 
```

你也忘了加一个“。” 这里：

```
@ipv6s = Ipv6Address.where('computer_id IS NULL').limit(5) 
```

修改后修改：

问题是它只有一个 has_one 关系，所以它不知道您在模型中所述的 :ipv6_address 的复数...您需要将其更改为 :ipv6_address 而不是 :ipv6_addresses ...

同样在您的表单中将：ipv6_address 更改为实际字段：ip_address。

所以总的来说你的表格应该是这样的：

```
<%= simple_form_for( @computer ) do |f| %>
<%= f.fields_for :ipv6_address do |v6| %>
<%= v6.input :ip_address, :collection => @ipv6s %>
<% end %>
<% f.button :submit %>
<% end %> 
```

# jquery - 在 jquery ui 对话框外定位关闭图像按钮

> ID：12445442
> 
> 赞同：0
> 
> 时间：2012-09-16T08:24:34.347
> 
> 标签：jquery, asp.net, css

我想将关闭图像按钮放在 jquery ui 对话框之外。

这是我的代码：

CSS：

```
 .Close
    {
        position:absolute;
        overflow:auto;
        height:25px;
        width:35px;
        right: -34px;
        top: 3px;
    } 
```

这是 Asp.NET 代码：

```
<div id="dialog" class="dialog ">
    <asp:ImageButton ID="btnCancelpopup" runat="server" ImageUrl="~/Images/quit.png" CssClass="Close"/>
</div> 
```

这是 JavaScript 代码：

```
$(function(){
$("#dialog").dialog({
            maxWidth: 600,
            maxHeight: 585,
            height: 450,
            width: 600,
            modal: true,
            autoOpen: false,
            resizable: false,
            show: "blind",
            hide: "explode",
            open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); }
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:40:57.150

您可以手动将事件绑定到外部元素。

```
$('#btnCancelpopup').click(function () {
     $('#dialog').dialog('close');
} 
```

# qt - 如何配置 qmake 以便使用“make install”安装我的应用程序？

> ID：12445445
> 
> 赞同：10
> 
> 时间：2012-09-16T08:25:11.240
> 
> 标签：qt, makefile, installation, qmake

我编写了一个使用 qmake 构建的小型 qt 应用程序，但我缺少 make install 目标。如何配置 qmake，以便在我运行“make install”时将我的二进制文件复制到 /usr/local/bin/？

1.  qmake
2.  制作
3.  进行安装

我需要在我的 .pro 文件中添加什么来获得“安装”目标以及如何控制将使用的文件和路径？

* * *

顺便说一句，安装将在 Linux pc:s 上，如 Debian 和 Ubuntu。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-16T16:28:11.833

将类似的内容添加到您的 .pro 文件中

```
target.path = /usr/local/bin/
INSTALLS += target 
```

# group-by - T-SQL 按一系列可能值对结果进行分组

> ID：12445452
> 
> 赞同：0
> 
> 时间：2012-09-16T08:25:58.113
> 
> 标签：group-by, tsqlt

不知道如何表达这个问题：

我有一个查询，例如

```
SELECT s.*
FROM SUMMARY s
WHERE s.TYP = 'A'
AND s.NUM > 0
AND s.NUM <= 999999 
```

和一群喜欢的人

```
SELECT s.TYP, s.COUNT(TYPE)
FROM SUMMARY s
GROUP BY s.TPY 
```

这使：

```
A 38720
B 39500
C 170
D 850
E 8891 
```

我想做的是使用“范围”对我的结果进行“拆分”，例如：

```
TYP RANGE(NUM) COUNT
  A 0000>1000  240
  A 1000>2000  800
  A 2000>3000  120
etc... 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:34:24.177

查看 SELECT 命令中的 IF 以按行中的范围分组，然后查看[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数以翻转结果。

# android - 什么是永久广播？

> ID：12445453
> 
> 赞同：1
> 
> 时间：2012-09-16T08:26:28.830
> 
> 标签：android

> **可能重复：**
> [什么是粘性意图？[安卓]](https://stackoverflow.com/questions/3490913/what-is-a-sticky-intent-android)

我发现某些应用程序需要特殊权限才能“发送永久广播”。我不知道它们是什么以及它们有什么帮助。

首先，我不知道我是不是在谈论`public static final String BROADCAST_STICKY`，其次，你能*简要*介绍一下这些永久广播是如何工作的吗？

或者，显然，您可以向我发送正确的文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:48:44.737

重复：[什么是粘性广播？](https://stackoverflow.com/questions/3490913/what-is-a-sticky-intent-android)

文档在这里；[http://developer.android.com/reference/android/Manifest.permission.html#BROADCAST_STICKY](http://developer.android.com/reference/android/Manifest.permission.html#BROADCAST_STICKY)

> 允许应用程序广播粘性意图。这些是广播，其数据在完成后由系统保存，以便客户端可以快速检索该数据而无需等待下一次广播。

# jquery - jQuery，这个方法的一个问题

> ID：12445455
> 
> 赞同：0
> 
> 时间：2012-09-16T08:27:14.463
> 
> 标签：jquery

```
var contactForm =
    {
        form: $('.contact'),
        button: $('button'),
        config: {
            type: 'slideDown',
        },

        init: function (config)
        {
            $.extend(this.config, config);

            contactForm.button.on('click', function() 
            {
                if(contactForm.form.is(':hidden'))
                    this.showForm();
                else
                    this.closeForm();
            });
        },

        showForm: function ()
        {
            contactForm.form[contactForm.config.type](2000);
        },

        closeForm: function ()
        {
            contactForm.form.slideUp(2000);
        },
    };

    contactForm.init(); 
```

在 init() 函数中，我尝试使用“this”调用 showForm() 和 closeForm() 方法。但是，“this”被指定给 click 元素。（按钮）

我怎样才能防止这种情况？

我总是希望“this”包含结构/类对象。如果我想指定一个按钮对象，我希望它被指定为 $(this)，而不是 this。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:29:46.427

您应该做的是声明一个指向`this`处理函数外部的 var 并使用它。这是唯一的方法，使用闭包。

```
init: function (config){
    var me = this;

    $.extend(this.config, config);
    contactForm.button.on('click', function(){
        if(contactForm.form.is(':hidden'))
           me.showForm();
        else
           me.closeForm();
    });
} 
```

这是唯一的方式，这是语言的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:30:08.157

采用：

```
init: function (config)
{
    var self = this;
    $.extend(this.config, config);

    self.button.on('click', function() 
    {
        if(contactForm.form.is(':hidden'))
            self.showForm();
        else
            self.closeForm();
    });
}, 
```

# c# - OnSessionChange 有时不起作用

> ID：12445462
> 
> 赞同：2
> 
> 时间：2012-09-16T08:28:23.550
> 
> 标签：c#, login, windows-services

我有一个 Windows 服务，它应该检查所有用户的登录和注销并将它们全部插入一个表中。我在我的服务中使用了*OnSessionChange()*和*OnShutDown()*事件来做到这一点。它有时工作正常，但有时什么也没有发生当用户登录或关闭时没有任何错误，我认为有时这些事件不会触发。

我不知道我的错误是什么？？

**编辑 ：**

我想创建一个 winservice 来保存域中所有帐户的登录和注销时间。我已经尝试过 OnSessionChange() 并检查了 SessionChangeDescription 属性，但它有时无法正常工作，所以我决定使用 api 函数来做到这一点。为了我的搜索 LsaGetLogonSessionData 和 ISensLogon2 函数可以返回我想要的。但问题是我应该在哪里使用这个功能？我应该在事件中调用此函数还是它可以诊断登录和注销本身？

我还在等你的回复....提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:53:05.123

也许您的服务没有在登录时触发事件之前启动。但是出于这些原因，注销应该可以工作。

您应该首先检查“CanHandleSessionChangeEvent”和“CanHandlePowerEvent”是否为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T09:13:06.103

对于那些从 SessionChangeDescription.SessionId 获取用户名有问题的人：

有时，在 SessionLogoff 中，当您需要访问已注销的用户时，注销操作很快并且 SessionId 丢失。

我的解决方案是这样的：

1.定义一个全局数组（如`Dictionary<int, string> userlist`）

2.在 SessionLogon 事件中存储会话 id 和用户名（如`userlist.Add(SessionChangeDescription.SessionId,GetUsernameBySessionId(SessionChangeDescription.SessionId)`）

3.通过数组（如`userlist[changeDescription.SessionId]`）访问每个地方的用户名

# iphone - iOS中的@dynamic关键字含义？

> ID：12445463
> 
> 赞同：-1
> 
> 时间：2012-09-16T08:28:24.453
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [@synthesize 与 @dynamic，有什么区别？](https://stackoverflow.com/questions/1160498/synthesize-vs-dynamic-what-are-the-differences)

当我们编写任何对象时，就像`@dynamic obj;` 我们告诉编译器我们将为它实现访问器方法一样，那么我们需要在哪里实现这些方法呢？

如果我们在声明 @property 的同一个类中实现访问器方法，那么我们甚至不需要使用 of `@dynamic`，就像在头文件中一样：

```
@proprty (attribue) NSString *objStr; 
```

并以 .m 为单位：

```
- (NSString *)objStr { 
}

- (void)setObjStr:(NSString *)somestring {
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T08:31:40.610

该`@dynamic`关键字告诉编译器您将在运行时动态提供访问器方法。这可以使用 Objective-C 运行时函数来完成。

通常，您会使用`@dynamic`Core Data 之类的东西，其中 Core Data 将提供基于 Core Data 模型的访问器。

你是对的，在大多数正常情况下你不会使用`@dynamic`. 通常，您只需使用`@property`or`@property`和`@synthesize`。

# iphone - iPhone应用程序构建到模拟器，不会构建到设备

> ID：12445464
> 
> 赞同：5
> 
> 时间：2012-09-16T08:28:35.617
> 
> 标签：iphone, ios, xcode

**更新 2**

我的其他目标之一可以很好地构建设备......现在查看依赖项的差异。

**=================**

**更新**

我现在已经在另一台计算机上安装了新的 Xcode，并且得到了相同的结果。

**=================**

我有一个可以在模拟器上构建的应用程序，但是当我构建到任何设备时，它都会失败，并且没有给出错误。

当我查看日志导航器时，我看到以下消息：

```
Build operation failed without specifying any errors. Individual build tasks may have failed for unknown reasons. Some of these (up to 12) may be listed below. 
```

这是我看到的唯一错误。我刚刚在这台新电脑上安装了 XCode，它是 XCode 4.5，包括 iOS6 SDK。我的伙伴能够在相同的设备上很好地构建应用程序，但她使用的是旧版本的 XCode，没有 iOS6。

![在此处输入图像描述](../Images/655b286a3028f3a094bf1f01dbded8d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:53:23.530

您需要在设备上安装 iOS6 才能将应用程序放入其中。你的设备上有 iOS6 GM 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:10:55.830

确保您的设备运行的是最新版本的 iOS，即 iOS6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:36:33.443

我需要更新我依赖的多个框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:46:53.373

收到此错误时，我仍在使用 Xcode 4.5.2。两次计算机重新启动解决了我的问题。

# c++ - 在 C++11 中使用参考

> ID：12445465
> 
> 赞同：4
> 
> 时间：2012-09-16T08:28:45.453
> 
> 标签：c++, reference, for-loop, foreach, c++11

我承认我的 C++ 技能有点生疏，我正在为即将开始的新项目投入 C++11。我刚刚发现这种令人困惑的行为，如果我写

```
void MyClass::update() {
    for(SomeClass &i : _list) {
        i.doStuff();
    }
} 
```

或者

```
void MyClass::update() {
    for(SomeClass i : _list) {
        i.doStuff();
    }
} 
```

它的工作原理似乎完全相同，`_list`只是一个`std::list<SomeClass>`. 所以我想知道这里的 ref 有什么用，因为我显然遗漏了一些东西。我应该提到我正在使用 Xcode 4.4.1 (4F1003) 附带的 Apple LLVM 4.0。

拜托，如果这是一个非常愚蠢的问题，请随意嘲笑和取笑我，我真的可以用一些好的 ol' head slapping :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:34:57.860

引用与容器无关，而是与您从中取出的元素有关。在第一种情况下，您正在访问列表中的元素并对其进行修改，在第二种情况下，您制作元素的副本然后更改副本，无论如何这将超出范围。

# database-design - 为什么 ERD 中不允许使用特定的基数？

> ID：12445467
> 
> 赞同：3
> 
> 时间：2012-09-16T08:29:01.403
> 
> 标签：database-design, entity-relationship, database-schema, erd

在每个关于实体关系图的教程中，我都读到不允许为关系指定固定的基数。只有对 ERD 的非正式评论才能澄清飞行员的数量`exactly 2`。

因此，例如，每个航班恰好有 2 名飞行员在场的航班和飞行员之间的关系必须表示为：

```
<flight> 0..N <------> 1..N <pilot> 
```

而不是

```
<flight> 0..N <------> 2 <pilot> 
```

我的符号是`0..N`= optional, many; `1..N`= 强制性，许多，`1`= 强制性，一个。

这个限制是通用的吗？背后的原因是什么？

编辑：澄清了我的符号。

编辑：我可以看到两个关系将如何强制执行相同的约束：

```
 0..N <------> 1
<flight>                 <pilot>
         0..N <------> 1 
```

但是随后查询飞行员是否在给定航班上的查询变得非常难看，因为您必须检查两个属性中的每一个。如果属性的数量增加（例如，增加到 15 名空乘人员），查询将变得完全无法管理，并且模式只能勉强管理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T10:24:20.040

其他回复提供了一些有价值的答案。还需要添加两个部分：

首先，ER 建模不仅仅是 ERD。我们倾向于尝试将整个 ER 模型放在一张图上。但完整的 ER 建模远不止适合单个图表的内容。可能存在将关系的基数限制为不少于 10 且不超过 15 的业务规则。但重要的是要认识到这些必须是“业务规则”（即主题规则），而不是出于实际原因施加的设计限制. 一个完整的 ER 模型可以包含所有这些关于数据的业务规则，并且可以在必要时用简单的英语表达这些规则。

首选符号 10..15，因为它更简洁，除非需要更多细节来阐明规则，例如规则存在的原因。

以上暗示了需要做的第二点。这是分析和设计之间的区别。如果以经典方式使用 ER 建模，它是一种数据分析工具，而不是数据库设计工具。“数据分析”是指从以数据为中心的角度分析问题。区分分析和设计，区分问题的特征和解决方案的特征，在正规的 CS 或 IT 教育中教得还不够。把事情做好是绝对关键的。

即使是我们这些意识到差异的人，有时也会将解决方案的特征滑入问题的定义中。这被称为“在盒子里思考”。

如果要绘制数据库设计图表，请不要使用 ERD。使用关系示意图，前提是您设计的数据库是关系数据库。关系示意图包含 ERD 不应包含的功能，例如联结表和外键。不要将 ERD 用作“关系精简版”。事实并非如此。

顺便说一句，另一个答案评论说 ERD 应该可以在任何 DBMS 上实现。这是我刚刚提出的概念的结果，即 ERD 捕获分析而不是设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:14:47.567

基数规则本身只是“任何和所有可能的一般规则”的特例。能够表达“任何和所有可能的规则”的仅有的两种语言是人类自然语言（无论你怎么努力，它的缺点都是经常模棱两可和不精确），以及形式谓词逻辑的符号语言。

如何在数据建模的上下文中使用后者，是这本极好的（且值得高度赞扬的）“数据库专业人员应用数学”一书的全部主题。

Halpin 的 ORM 试图提出一种建模语言，它可以覆盖（即有图形符号来表达）比 E/R 更多种类的业务规则。例如，它有用于表达无环图约束的符号（“没有人是他自己的祖先”）。但即使是这种语言也不能表达一切，必须求助于它称为“其他”的最后一类约束，只能用自然语言来描述。

这是语言问题。如果您设计的语言只有极少数的符号（矩形、连接线、零、一和乌鸦脚），并且只能以极少数的方式组合，那么您就不能指望这样的语言能够表达任何可以想象的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:59:32.897

不是您问题的直接答案，但您可能对如何在实际数据库中强制执行这种约束感兴趣......

假设您的航班上最多可以有 2 名飞行员。您可以简单地创建两个“0..N 到 0..1”的关系：

![在此处输入图像描述](../Images/4457749156a090dde238affd42b4760f.png)

如果您只需要2 名飞行员，只需将*PILOT1_ID*和 PILOT2_ID 设为 NOT NULL（并通过 CHECK 确保它们不同）。

* * *

但是，正如您已经指出的那样，对于更大的基数，这很快就会变得笨拙，因此需要使用不同的技术。假设您需要将空乘人数限制为15人，您可以这样做......

![在此处输入图像描述](../Images/f15ebe131e5392e5eaae5744f6fbfaea.png)

...在联结表上具有以下约束：

```
CHECK (POSITION BETWEEN 1 AND 15) 
```

请注意，在 {FLIGHT_ID, POSITION} 上有一个 UNIQUE 约束，如上`U1`图所示。

从本质上讲，我们是每次飞行的特定职位的分类服务员。没有两个乘务员可以在同一个航班上占据相同的位置（感谢`U1`），因此由于每个航班正好有 15 个位置，每个航班的乘务员*不能*超过 15 个。

不幸的是，没有很好的方法来强制*所有*职位都被填补，因此每个航班仍然可能少于 15 名乘务员。如果这很重要，您可能必须从应用程序代码中强制执行它。

**- - 编辑 - -**

要寻找一个空闲位置（用于下一个 INSERT），即使它是两个已填充位置之间的“洞”，您也可以执行以下操作（替换`1`为所需的 FLIGHT_ID）：

```
SELECT DISTINCT *
FROM (
    SELECT POSITION + 1 FREE_POSITION
    FROM FLIGHT_ATTENDANT
    WHERE FLIGHT_ID = 1
    UNION ALL
    SELECT POSITION - 1 FREE_POSITION
    FROM FLIGHT_ATTENDANT
    WHERE FLIGHT_ID = 1
)
WHERE
    FREE_POSITION NOT IN (
        SELECT POSITION
        FROM FLIGHT_ATTENDANT
        WHERE FLIGHT_ID = 1
    )
ORDER BY FREE_POSITION; 
```

此查询可能有以下结果：

*   它可以不返回任何行，表示所有位置都是空闲的，因此只需选择有效范围内的任何一个。
*   它可能会返回行，其中第一行和最后一行*可能*超出有效范围，因此如果超出，请忽略它们。使用剩余的行之一。如果没有剩余的行，这表明所有位置都已被填满。

这是 Oracle 下的一个[有效的 SQL Fiddle 示例](http://sqlfiddle.com/#!4/bbf9a/10)，但同样的技术应该适用于任何 DBMS。有更优雅的、特定于 DBMS 的方法来执行这些类型的查询（特别是如果您想要*所有*空闲位置，而不仅仅是一些），但即使是这种“通用”解决方案对于大多数实际目的来说也应该绰绰有余......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T08:34:57.563

您有唯一索引（如主键）和非唯一索引：根据您的唯一键定义允许有 1 条记录或多条记录

然后

您有空字段或强制具有值的字段：这里您可能有 0 或 1 个值

结合这两件事，你应该能够知道，为什么他们总是说 0 或更多

ERD 不能总是强制规则，规则通常可以由数据库设计强制，但它总是需要软件的另一层（或至少存储过程）

顺便说一句，关于您的示例，如果您在每次飞行中始终有 2 个飞行员，并且您想通过 db 设计强制执行此规则，您可以简单地创建从 Pilots 表到 Flight 表的 2 个关系，是的，您将有 2 个外键对于同一张桌子，ERD 允许

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T08:48:30.277

`E-R`图表提供了一种方法来指示每个实体参与关系的次数的限制。
实体集和二元关系集之间的边可以具有关联的最小和最大基数，如：值`min...max`
表示总参与。的值表示最多参与一次，a的值或表示没有上限。 现在来回答你的问题。您的建模一开始是错误的，因为一名飞行员将参加许多次飞行，而不是您似乎暗示的一次。 此外，如果每个航班正好有 2 名飞行员并且都需要，那么这不是建模为`min``1``max``1``max``*``N`

`1-N`关系，但作为航班的 2 个属性（飞行员 id），因为它们永远不会为空或可选（不能有没有 2 名飞行员的航班）。
因此，常数的上限表明设计中存在一些问题，这些问题不足以对您的系统进行建模。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T15:28:25.700

我遇到过类似的问题。我的场景是让两支足球队参加一场比赛。所以这两个表是“团队”和“夹具”。在夹具表中，我只有一个“team_home”列和一个“team_away”列。我不确定这是否是最好的甚至是正确的方法，但它对我有用。

您是如何实施最大解决方案的？

# jquery - Jquery Isotope 与fancybox 画廊的冲突

> ID：12445468
> 
> 赞同：-1
> 
> 时间：2012-09-16T08:29:23.233
> 
> 标签：jquery, fancybox, conflict, jquery-isotope

想知道你是否可以帮助我...

我正在尝试基于同位素布局创建一个基于图像的站点，然后使用fancybox 在点击时显示图像库。

除了单击以滚动浏览fancybox中的图像时产生的相当讨厌的效果外，一切似乎都可以正常工作-请参见示例[http://www.andyingle.com/bugs/isotope/](http://www.andyingle.com/bugs/isotope/)

两者都可以单独工作，所以我想这是冲突？看起来可能是 z-index 的东西？我尝试过其他灯箱插件（shadowbox），它们工作得很好，但fancybox 更优雅一点，所以更喜欢使用它。

任何想法可能导致此问题以及如何解决？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:11:25.820

一般来说，将 CSS 规则应用于一般元素/标签并不是一个好主意，而是使用特异性。“冲突”似乎是由您自己的 CSS 规则产生的。

[你的散列](http://www.andyingle.com/bugs/isotope/css/hash.css)CSS 文件中有这个 CSS 规则（第 131 行）......很可能你从原始[同位素插件网站复制了样式](http://isotope.metafizzy.co/)

```
a:active,
a:active code {
  color: #1FB;
  background: black;
} 
```

该规则使幻想框`next/prev`选择器（它们是`<a>`锚点）的背景在单击时变为`black`（`a:active`）

您宁愿以某种特殊性来更改该规则，例如

```
a.thisAnchor:active,
a.thisAnchor:active code {
  color: #1FB;
  background: black;
} 
```

或在不需要时将其删除

# android - 如何为此特定的编辑文本字段制作吐司显示

> ID：12445470
> 
> 赞同：0
> 
> 时间：2012-09-16T08:30:01.010
> 
> 标签：android

嗨，我有点卡在这里，我有一个活动让用户从他的银行帐户创建交易，该活动有一些文本字段。其中一个文本字段用于输入余额。当用户输入他想要提取的余额时，应该对用户帐户中已经存在的余额进行内部检查。我知道如何创建内部检查，问题是当用户在该特定文本字段中输入金额时，应该显示一个 toast，让用户知道他输入了无效的余额提取请求，或类似的东西。我怎样才能做到这一点？是否有任何听众可以访问该特定文本字段？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:33:57.607

您应该使用[TextView.seterror](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence%29) ，而不是显示 toast 消息。这可以在您进行检查的地方完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:51:04.840

我会使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)

只需将 Textwatcher 添加为可编辑的侦听器：

```
editable.addTextChangedListener(new TextWatcher() {
    //Override Methods
}); 
```

在该方法`afterTextChanged(Editable s)`中，您可以开始验证。如果验证失败，您可以通过 Toast 或 Editable 上的错误文本（setError）通知用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:35:03.127

如果你想在特定的 EditText 上显示验证错误，你应该使用： {EditText}.setError(CharSequence error) OR {EditText}.setError(CharSequence error, Drawable icon)

这应该带来你想要的吐司。

关于验证的逻辑，这当然取决于你......

# php - 如果页面提交失败，存储 $_POST 表单数据

> ID：12445472
> 
> 赞同：0
> 
> 时间：2012-09-16T08:30:19.250
> 
> 标签：php, codeigniter, post

我正在使用代码点火器。我目前有一个非常简单的表单（只有输入字段），它提交给控制器进行处理。

这一切都无关紧要，但我要问的是我在表格中也有一个上传文件。因此上传功能将检查文件大小和类型等，如果不符合则给出错误。当发生这种情况时，我选择了另一个符合要求的文件，我提交但没有任何内容进入下一页，但上传的文件及其详细信息，而其他字段未发布或为空白。

好像帖子没有被缓存，当我选择要上传的新文件并且没问题时，它会检查这些字段的 $_POST 并且它们是空的。如何检查以确保所有字段都包含值？

谢谢您，非常乐意帮助您详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:44:27.907

要重新填充字段，您可以使用 set_value 函数。

> **[设定值（）](http://codeigniter.com/user_guide/helpers/form_helper.html)**
> 
> > 允许您设置输入表单或文本区域的值。您必须通过函数的第一个参数提供字段名称。第二个（可选）参数允许您为表单设置默认值。

首先检查表单验证和上传是否成功。

如果两者都成功，我们会将用户重定向到新页面。

如果其中一个不成功，我们会将错误消息添加到您的数据数组中，我们可以在视图中访问并显示我们的表单。

**控制器**

```
public function signup()
{
        // Data array
        $data = array();

        // Load form validation libary
        $this->load->library('form_validation');

        // Load upload library and set configuration
        $config['upload_path'] = './uploads/';
        $this->load->library('upload', $config);

        // Set the required fields
        $this->form_validation->set_rules('first_name', 'First name', 'required');

        if ($this->form_validation->run() == TRUE)
        {
            // If upload was succesfull
            if ($this->upload->do_upload())
            {
                $upload_data = $this->upload->data();

                // Build array to store in database
                $save_data = array(
                    'first_name' => $this->input->post('first_name'),
                    'image' => $upload_data['file_name']
                );

                // Send data to your model to process
                $this->your_model->save($save_data);

                // Redirect to success page
                redirect('registration_succes');
            }
            else
            {
                // Upload failed, set error
                $data['error'] = $this->upload->display_errors();
            }
        }
        else
        {
            // Form validation failed, set error
            $data['error'] = validation_errors();
        }

        // Display the form by default or on error
        $this->load->view('myform', $data);
} 
```

在我们看来，我们使用 set_value 函数使用提交的值重新填充字段。

**查看（我的表单）**

```
<?php echo form_open_multipart('signup');?>
    <fieldset>

        <?php if( isset($error) && ! empty($error) ): ?>
        <div class="error"><?php echo $error; ?></div>
        <?php endif; ?>

        <p>
            <label>First name</label>
            <input type="text" name="first_name" value="<?php echo set_value('first_name'); ?>" />
        </p>

        <p>
            <label>File</label>
            <input type="file" name="userfile" size="20" />
        </p>

        <p>
            <input type="submit" />
        </p>

    </fieldset>
</form> 
```

# c - 如何在 C 编程中使用 scanf() 函数进行打印？

> ID：12445474
> 
> 赞同：0
> 
> 时间：2012-09-16T08:31:04.643
> 
> 标签：c

是否有可能在 scanf() 函数的帮助下打印到 IO 设备？

```
main()
{
char str[30];
scanf("\n Name ?%s",&str);

printf("\n Name Entered is %s",str);
} 
```

试试这个并帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:32:58.147

该`scanf`函数从控制台读取输入并对其进行解析。它无法打印任何东西。这就是恰当命名`printf`的函数系列的用途。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T08:41:54.367

to 的第一个参数`scanf`不是提示（就像您假设的那样），它是用于扫描输入的格式字符串。

`scanf`除非您的输入与预期的内容*完全*匹配，包括文字字符串等，否则这将失败`"Name ?"`。它也会在第一个空格处停止，因此输入`udhayar kumar`只会得到您的名字。如果您想要一个提示，只需预先输出它，例如：

```
char str[30];
printf ("Name? ");
scanf ("%s", str);

printf ("Name Entered is %s\n", str); 
```

但是请记住，未绑定的`%s`格式说明符`scanf`是一种使程序崩溃或给某人一个可以通过的安全漏洞的简单方法（请参阅“缓冲区溢出”）。那是因为没有对输入进行边界检查。

如果您想要一个体面的输入功能，请查看[这个](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。它得到一整行（带有可选提示）并很好地处理错误情况。

# objective-c - 我是否应该在对象指针上使用 __block 说明符，即使它没有它也可以工作？

> ID：12445475
> 
> 赞同：5
> 
> 时间：2012-09-16T08:31:25.220
> 
> 标签：objective-c, macos, variables, block

我正在使用`CAAnimation`完成块（使用[CAAnimationBlocks](https://github.com/xissburg/CAAnimationBlocks)）在动画结束时提供处理，并且该完成块的一部分会修改动画`CALayer`。即使`layer`没有使用说明符声明，这也有效`__block`，因为对象指针保持不变，但是我确实将对象视为读/写。

[Apple Guide](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html)中令我困扰的一个方面是：

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。

鉴于`layer`是一个集合迭代器，在我看来，如果我使用说明符，它实际上会中断`__block`。

这是有问题的代码：

```
for (CALayer *layer in _myLayers)   // _myLayers is an ivar of the containing object
{
    CAAnimationGroup *group = ...;
    ...
    group.completion = ^(BOOL finished)
    {
        [CATransaction begin];
        [CATransaction setValue:(id)kCFBooleanTrue
                         forKey:kCATransactionDisableActions];
        layer.position = [self _findPosition];
        [CATransaction commit];

        [layer removeAnimationForKey:@"teleportEffect"];
    };

    [layer addAnimation:group forKey:@"teleportEffect"];
} 
```

我的实际问题是：我做得对吗（我的蜘蛛感觉很刺痛）。

**编辑**我还应该补充一点，我的应用程序使用 MRR，但是保留/释放没有问题，因为这些层本质上是*静态*的（它们的生命周期是包含的生命周期`NSView`）。此外，我似乎正在做[指南中](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html)*要避免的模式*部分所说的我不应该做的事情，尽管（对我来说）不清楚为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:03:52.220

`__block`变量在块（和封闭范围）内是可变的，并且如果任何引用块被复制到堆中，变量就会被保留。

我不认为在您的情况下您需要一个块变量，因为您正在更改`layer`块内对象的值，因为它属于`_myLayers`似乎是实例变量的数组，很难在之前释放对象执行的每个块......但是，您可以添加`__block`存储类型修饰符来保留对象，但*如果您使用**ARC**，对象变量会在块被复制和稍后释放时自动保留和释放*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:16:36.920

编辑：

[至于您对您提到的反模式](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html)的关注，我认为在两个反模式示例中，关键点是变量声明和分配给它的“块文字”具有不同的范围。以`for`那里提出的案例为例：

```
void dontDoThis() {
  void (^blockArray[3])(void);  // an array of 3 block references

  for (int i = 0; i < 3; ++i) {
    blockArray[i] = ^{ printf("hello, %d\n", i); };
    // WRONG: The block literal scope is the "for" loop
  }
} 
```

1.  `blockArray`在整个方法体内可见；

2.  在`for`循环中，您创建一个块；块是一个对象（内存中的一些存储）并且有一个地址；作为对象的块具有“堆栈本地数据结构”（来自上面的参考资料），即当您进入方法时它被分配在堆栈上；

3.  “块文字”被视为`for`循环局部变量的事实意味着可以在每次连续迭代中重用存储；

4.  块地址分配给`blockArray`元素；

5.  当您退出`for`循环时，`blockArray`将包含可能不再存在和/或在每个步骤中已被覆盖的块的地址，具体取决于编译器对在`for`范围内创建的数据结构的堆栈操作。

您的情况不同，因为您的局部变量也在范围`for`内，并且在范围之外将不可见。

呈现为反模式的案例与此类似：

```
 {
 int array[3];

 for (int i = 0; i < 3; ++i) {
    int a = i;
    array[i] = &a;
    // WRONG: The block literal scope is the "for" loop
 } 
```

很有可能，范围`a`内的变量`for`只会在堆栈上分配一次，然后在循环的每次迭代中重用。原则上，`a`（一份）在循环之外仍然存在（我不确定，实际上，应该检查 C 标准），但很明显，该代码的含义并不真正明智。

旧答案：

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。

我认为这可以更好地理解为：`__block`变量的词法范围和所有块（根据上述定义）将共享该变量的相同存储。因此，如果一个块（或原始词法范围）修改了变量（我在这里指的是指向对象的变量），那么所有其他块都可以看到该更改。

鉴于此，声明变量的一个效果`__block`是，*在非 ARC 情况下*，它指向的对象**不会**被传递到的每个块自动保留（对于 ARC，保留也对`__block`变量进行） .

无论是使用 ARC 还是不使用 ARC，`__block`当您想要更改变量值并希望所有块都使用新值时，都需要使用说明符。想象一下，您有一个块来初始化您的`_myLayers`ivar：在这种情况下，您需要将`_myLayers`变量作为`__block`变量传递到块中，以便可以修改它（相对于它的副本）。

在您的情况下，如果您不使用ARC，那么，这完全取决于`layer`执行块时指向的对象是否仍然存在。由于`layer`来自`_myLayers`，这将转换为`_myLayers`执行块时拥有的对象是否仍然存在。这个问题的答案通常是肯定的，因为我们所说的块是该层上动画的完成块。（例如，如果它是网络请求的完成块，情况会有所不同）。

希望这可以帮助。

# css - 与外边框相比，内边框更厚

> ID：12445479
> 
> 赞同：2
> 
> 时间：2012-09-16T08:32:53.960
> 
> 标签：css, list, border, frame

[http://jsfiddle.net/MzqYL/3/](http://jsfiddle.net/MzqYL/3/)

在上面的示例中，框架的边框比内部边框薄。

我该如何解决这个差异？

图片：http: [//i.stack.imgur.com/FEtio.png](http://i.stack.imgur.com/FEtio.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:42:22.583

有如何：http: [//jsfiddle.net/MzqYL/9/](http://jsfiddle.net/MzqYL/9/)

基本思想是为内部元素定义两侧的边框，并为主包装元素添加缺失的边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:45:10.577

问题是您正在堆叠边框，因此上方框的 1px + 下方框的 1 px = 2 px。这就是为什么它似乎更厚。

解决这个问题的方法是对每种类型的盒子应用不同的样式。有4种，

1.  普通框（左侧和顶部边框）添加样式
2.  右侧的框（左侧和顶部的边框）
3.  底部的框（左上角和左下角的边框）
4.  右下角的一个框（所有 4 个边框）

[jsfiddle 示例](http://jsfiddle.net/MzqYL/10/)

在示例中添加了两个 css 类：.right 和 .last 您可以只为一个框提供多个类`<li><a class="right last">...</a></<li>`，以便您可以轻松地将样式应用于列表项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T08:59:02.657

这是我所拥有的：

```
body {
    margin: 10px;
}
ul {
    list-style: none;
    width: auto;
    margin: 0;
    padding: 0;
    border: 1px solid black;
    border-bottom: 0;
    border-right: 0;
}
ul:after {
    content: "";
    display: table;
    height: 0;
}

li {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    display: block;
    float: left;
    width: 50%;
}

/* Styles for Menu Items */
ul li a {
    text-decoration: none;
    color: #777;
    padding: 5px;
    border-bottom: 1px solid black;
    border-right: 1px solid black;
}

li > a {
    display: block;
}

ul li a:hover {
    color: #E2144A;
    background: #f9f9f9;
}

/* Hover Styles */
li ul li a {
    padding: 2px 5px;
}

/* Sub Menu Styles */
​ 
```

### 几点：

*   为了您和我们的利益，请正确缩进代码。
*   我所做的是在元素上设置**左**边框和**下**边框`a`，并在元素上设置**上**边框和**左**边框`ul`。这使得一个一致的 1px 边框。
*   我使用 clearfix 给出`ul`浮动元素的高度。
*   我用`box-sizing: border-box`它来设置，这样当我设置时`width: 50%`，它将是 50%，**包括**填充和边框（不是边距）。

# php - Symfony 2.1 表单：调用未定义的方法 createView()

> ID：12445483
> 
> 赞同：0
> 
> 时间：2012-09-16T08:33:17.750
> 
> 标签：php, symfony, symfony-2.1, fosuserbundle

我正在使用 FOSUserBundle 来管理我的用户，并且我正在尝试覆盖配置文件编辑表单，遵循此文档指南[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md) 这是我的表格类型：

```
<?php

namespace Tracker\UserBundle\Form\Type;

use Symfony\Component\Form\FormBuilderInterface;
use FOS\UserBundle\Form\Type\ProfileFormType as BaseType;

class ProfileFormType extends BaseType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $this->buildUserForm($builder, $options);

    }

    public function getName()
    {
        return 'tracker_user_profile';
    }

    /**
     * Builds the embedded form representing the user.
     *
     * @param FormBuilderInterface $builder
     * @param array                $options
     */
    protected function buildUserForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('username', null, array('label' => 'form.username', 'translation_domain' => 'FOSUserBundle'))
            ->add('email', 'email', array('label' => 'form.email', 'translation_domain' => 'FOSUserBundle'))
            ->add('avatar','file',array( 'required'=>'true'));
    }
} 
```

这是我的`services.yml`补充：

```
 tracker_user.profile.form.type:
         class: Tracker\UserBundle\Form\Type\ProfileFormType
         arguments: [%fos_user.model.user.class%]
         tags:
             - { name: form.type, alias: tracker_user_profile } 
```

这是`config.yml`设置的部分`FOSUSerBundle`

```
profile:
    form:
        type: tracker_user_profile 
```

最后是我的控制器动作，我几乎从原始 FOSUser 控制器中复制了 1to1：

```
/**
 * Edit the user
 */
public function editAction()
{
    $user = $this->container->get('security.context')->getToken()->getUser();
    if (!is_object($user) || !$user instanceof UserInterface) {
        throw new AccessDeniedException('This user does not have access to this section.');
    }

    $form = $this->container->get('tracker_user.profile.form.type');
    $formHandler = $this->container->get('fos_user.profile.form.handler');

    $process = $formHandler->process($user);
    if ($process) {
        $this->setFlash('fos_user_success', 'profile.flash.updated');

        return new RedirectResponse($this->getRedirectionUrl($user));
    }

    return $this->container->get('templating')->renderResponse(
        'FOSUserBundle:Profile:edit.html.'.$this->container->getParameter('fos_user.template.engine'),
        array('form' => $form->createView())
    );
} 
```

当我调用页面时，我收到错误：

> 致命错误：在第 105 行的 /coding/src/Tracker/UserBundle/Controller/ProfileController.php 中调用未定义的方法 Tracker\UserBundle\Form\Type\ProfileFormType::createView()

我设置服务的方式有什么问题吗？还是我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:18:14.397

在您的控制器中，检索 Form 实例而不是 FormType 实例：

```
$form = $this->container->get('fos_user.profile.form'); 
```

# php - 如何在 Yii 中禁用 Ajax 请求的 jQuery 自动加载？

> ID：12445488
> 
> 赞同：9
> 
> 时间：2012-09-16T08:34:16.370
> 
> 标签：php, jquery, yii

我正在使用以下代码生成 ajax 请求：

```
echo CHtml::dropDownList('teamA', '', EnumController::getTeamOption(), array(
        'empty' => '(Team / Single)',
        'ajax' => array(
            'type'=>'POST',
            'url'=> $url,
            'update'=>"#resultA",
            //'data'=>"js:$('#teamA').hide().fadeIn()" 
        )
    )
); 
```

在我的主要布局中，我有以下内容：

```
<?php Yii::app()->clientScript->scriptMap=array('jquery.js'=>false);?>
<?php Yii::app()->clientScript->scriptMap=array('jquery.min.js'=>false);?>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js"></script> 
```

Yii 正在从资产中加载 jQuery 副本，然后——另一个副本，直接来自 Google。我只想使用 Google 副本并强制 Yii 不从资产中加载自己的副本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T14:12:48.387

在 Yii 中，你不应该在主布局中硬编码任何 javascript 信息。

Yii 可以确定是否已经包含客户端脚本（javascript），但是对于核心脚本（如 jquery 或 jqueryui），您必须在配置文件中修改这些包。

打开`main.php`配置文件，在组件中添加你需要的所有js包`CClientScript`（你应该在里面添加`components`），像这样：

```
'clientScript'=>array(
  'packages'=>array(
    'jquery'=>array(
      'baseUrl'=>'//ajax.googleapis.com/ajax/libs/jquery/1.8/',
      'js'=>array('jquery.min.js'),
      'coreScriptPosition'=>CClientScript::POS_HEAD
    ),
    'jquery.ui'=>array(
      'baseUrl'=>'//ajax.googleapis.com/ajax/libs/jqueryui/1.8/',
      'js'=>array('jquery-ui.min.js'),
      'depends'=>array('jquery'),
      'coreScriptPosition'=>CClientScript::POS_BEGIN
    )
  ),
), 
```

然后，每次您需要 jquery 时，只需在您的代码之前添加：

```
$cs = Yii::app()->getClientScript();
$cs->registerCoreScript('jquery'); 
```

Yii 将只包含一次 jquery（或任何其他脚本），即使您在代码中多次调用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T21:39:46.313

按照[Yii Special Topics Performance](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance#minimizing-script-files)的说明，我做了一个快速测试，结果如下：

在主布局的顶部：

```
<?php
$cs=Yii::app()->clientScript;
$cs->scriptMap=array(
    'jquery.js'=>false,
    'jquery.ui.js' => false,
);?> 
```

在`<head>`主布局部分：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js"></script> 
```

或者

```
<?php echo CGoogleApi::init(); ?>

<?php echo CHtml::script(
    CGoogleApi::load('jquery','1.7.2') . "\n" .
    CGoogleApi::load('jqueryui','1.8.17') 
); ?> 
```

我实际上会使用 CGoogleApi 助手，但 jsapi 显然无法加载比我的示例中更高的 jquery 版本！我想这对谷歌来说更新很慢，因为它也不能在普通文件中工作。

或者也许 js 文件仍在您的缓存中？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-08T19:59:57.740

**这将起作用**

```
 <?php     
       $cs=Yii::app()->clientScript;
       $cs->scriptMap=array(
         'jquery.js'=>false,
         'jquery.ui.js' => false,
); ?> 
```

# firebird - 如何使用受信任的身份验证和 RDB$ADMIN 角色建立 Firebird 2.5 服务连接？

> ID：12445495
> 
> 赞同：2
> 
> 时间：2012-09-16T08:35:06.860
> 
> 标签：firebird, firebird2.5

`isc_dpb_trusted_auth`使用 Firebird 2.1 时，可以通过传入和传入`isc_spb_trusted_auth`相应的参数块来建立使用可信身份验证的连接。
连接的用户将拥有管理权限，具体取决于他们是具有管理权限的 Windows 组的成员。

对于 Firebird 2.5，可以指定角色“rdb$admin”来连接数据库的管理权限，前提是用户已被授予该角色的权限。

我想使用该角色建立具有管理权限的服务连接，但尚未找到方法。连接已建立，但我不能例如列出数据库用户，当以 SYSDBA 连接时我可以。

`isc_spb_trusted_auth`我需要什么,`isc_spb_trusted_role`和/ 其他参数块的组合，`isc_spb_sql_role_name`我需要传递什么参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T08:36:21.557

FB2.5 中唯一接受角色参数的服务是用户管理——这就是自 interbase 6 以来服务的工作方式。从 FB3 开始，将能够将其用于其他服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:52:17.570

关于存储适当数据的位置，角色和用户之间存在差异。前者存储在数据库中的 RDB$ROLES 表中。后者存储在一个名为 security2.fdb 的特殊单独数据库文件中，该文件通常位于 Firebird 目录中。

当通过 Firebird API 附加到服务管理器时，特定的数据库尚不清楚。仅指定服务器名称。因此，您不能使用角色。此时服务器根本不知道从哪个数据库读取角色凭据。

# jquery - JQuery .submit() 在 IE9 中失败

> ID：12445499
> 
> 赞同：2
> 
> 时间：2012-09-16T08:36:32.460
> 
> 标签：jquery, html

下面是一个 Jsfiddle 和一个最近提出的问题的链接。

如果您在 FF 或 Chrome 中访问 jsfiddle 页面并单击“点击我！” 您可以选择一个文件，一旦您确定该文件，页面将查找 php 脚本。在 IE 中它不寻找 php 脚本 - 什么也不做。

其他人得到相同的结果吗？关于如何让 IE9 做出响应的任何想法？

[http://jsfiddle.net/BayjF/1/](http://jsfiddle.net/BayjF/1/)

[Jquery .submit() 事件触发](https://stackoverflow.com/questions/12444648/jquery-submit-event-to-firing)

# php - 用php修改html表单元素的最佳方法？

> ID：12445501
> 
> 赞同：1
> 
> 时间：2012-09-16T08:37:13.720
> 
> 标签：php, html, regex, dom, xpath

如何使用 PHP 修改和插入表单元素？

我有一个分配给 PHP 中的变量的表单，如下所示：

```
$the_original_form = '
<form method="post" action="whatever.php">
<input type="text" name="iamtextfield" id="textisme">
<input type="file" name="iamfilefield" id="fileisme">
<input type="hidden" name="hideme" value="nope">
</form>
'; 
```

我有第二个变量：

```
$put_me_on_the_top = '<div class="getinme">'; 
```

第三个变量：

```
$put_me_on_the_bottom = '</div><div class="justsomethingelse">hi there</div>'; 
```

以及修改后的表单元素：

```
$i_have_changed = '<input type="file" name="filepartdeux" id="iamabetterfile">'; 
```

我想结束：

```
$the_modified_form = '
<form method="post" action="whatever.php">
<input type="text" name="iamtextfield" id="textisme">
<div class="getinme">
    <input type="file" name="filepartdeux" id="iamabetterfile">
</div>
<div class="justsomethingelse">hi there</div>
<input type="hidden" name="hideme" value="nope">
</form>
'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:50:45.603

检查[phpQuery](http://code.google.com/p/phpquery/) - PHP 的 jQuery 端口。这是在 PHP 中处理 HTML 的非常简单的工具，特别适合具有基本 jQuery 知识的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:06:39.297

您可以将格式错误或格式正确的 HTML 文档加载到新的[DOMDocument](http://docs.php.net/manual/en/class.domdocument.php)中，并像处理 XML 一样对其进行操作。

```
$doc = new DOMDocument();

$doc->loadHTML($the_original_form);

// You can manipulate using the DOM object just follow the PHP manual for usage
foreach ($doc->childNodes as $element)
{
    // Evaluate elements here and insert / extract / delete as necessary
} 
```

*   格式错误的 HTML 会从 DOMDocument 中抛出错误，您将需要处理这些错误的方法。尽可能多地尝试使用格式良好的 HTML。

# javascript - JQuery 分页/加载数据。

> ID：12445502
> 
> 赞同：-3
> 
> 时间：2012-09-16T08:37:26.717
> 
> 标签：javascript, jquery, ajax

我需要对来自数据库的一些数据进行分页。

数据应位于包含 4 行和 4 列的表中。

其余数据应分页。此外，每个分页按钮都应该加载数据而无需进行页面刷新（ajax）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:44:14.883

您可以查看此[链接](http://www.99points.info/2010/05/ajax-pagination-create-ajax-pagination-using-php-jquery-and-ajax/)以获取 AJAX 分页的简单示例。你也可以参考[Pagination with AJAX and php](http://www.designaeon.com/jquery-ajax-pagination/) , [dynamic drive](http://www.dynamicdrive.com/dynamicindex17/ajaxpaginate/index.htm) and [this](http://devot-ee.com/add-ons/ajax-pagination-lsv)。

这些将为您提供有关如何使用 AJAX 进行分页的提示

# php - 将 JavaScript 数组发送到 PHP

> ID：12445503
> 
> 赞同：1
> 
> 时间：2012-09-16T08:37:26.843
> 
> 标签：php, jquery, ajax

我正在尝试将我的`select`box 中`option`的数据插入到我的数据库表中。我的数据库表字段是`id_country`和`country_name`。

数据库字段由值`id_country`填充，并且来自相应的文本。代码是这样的..`select` `option``country_name``option`

```
<select id="id_country" name="id_country">
  <option value="17" >USA</option>
  <option value="16" >Canada</option>
  <option value="7" >France</option>
</select>

<script>
$(document).ready(function(){
    var data=new Array();
        $('#id_country').find('option').each(function() {
            var id=$(this).val();
            data[id]=$(this).text();

        });     

    $('#btn_insert').click(function(){
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data: data,
            success: function(response){
                alert(response);
            }
        });                                     
    });

});
</script> 
```

服务器端脚本：

```
<?php
     //echo $_POST['data'];
    $arr=$_POST['data'];
    foreach($arr as $key => $value){
       $sql="INSERT INTO Country($key,$value)";
       $query=mysql_query($sql);
       if(mysql_num_rows($query)>0){
          echo "success";
       }
     }
?> 
```

我无法获得`$_post['data']`价值。如何在 PHP 脚本中获取 Javascript 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:01:16.243

尝试如下：

首先序列化您的数组，然后传递给 jquery ajax 函数。

```
data.serializeArray(); 
```

在 PHP 脚本中，在文件的开头，

```
$arr = json_decode($_POST['data'], true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:01:31.143

当您想要使用获取所有发送的数据时，数据对象内必须有一个数据成员`$_POST['data']`

改变这个：

```
data:data, 
```

进入

```
data:{'data':data} 
```

当您只想发布所选选项的数据时，您必须在点击处理程序中构建数据对象，如下所示：

```
var data={'id_country':$('option:selected','#id_country').val(),
          'country_name':$('option:selected','#id_country').text()}; 
```

# c# - ListView 隐藏或折叠选定的组

> ID：12445504
> 
> 赞同：8
> 
> 时间：2012-09-16T08:38:28.637
> 
> 标签：c#, winforms, listview, .net-3.5, show-hide

如何隐藏或折叠某些组`ListView`？

我只是添加一些项目

```
contactListView.Items.Add(new ISIMlistViewItem(contact));
if (contact.availability == 6)
    contactListView.Items[contact.identificator].Group = contactListView.Groups["offlineGroup"];
else
    contactListView.Items[contact.identificator].Group = contactListView.Groups["onlineGroup"]; 
```

而且我有时想隐藏`offlineGroup`.

```
if (hideOffline == true)
{
    // something like
    contactListView.Groups["offlineGroup"].Hide();
    // or
    contactListView.Groups["offlineGroup"].Visible = false;
} 
```

但我不知道我该怎么做。我可以折叠它而不绘制它还是有可能隐藏它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T09:10:20.730

[`ListViewGroup`该类](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewgroup.aspx)的 .NET 版本似乎没有提供`Collapse`or`Expand`方法。

幸运的是，本机`ListView`控件确实支持它，并且有人提供[了一个扩展来启用 expand 和 collapse](http://www.codeproject.com/Articles/31276/Add-Group-Collapse-Behavior-on-a-Listview-Control)。

使用他的代码，您可以使用以下功能设置展开/折叠状态：

```
private void SetGroupCollapse(GroupState state) 
```

为了隐藏一个完整的组，我只需删除该组中的所有项目。

# php - MVC/OOP中业务逻辑和应用逻辑的定义

> ID：12445509
> 
> 赞同：1
> 
> 时间：2012-09-16T08:40:23.053
> 
> 标签：php, oop, model-view-controller

我正在学习 MVC 和 OOP，但有些事情让我感到困惑：

**业务逻辑和应用逻辑有什么区别？**

看一下以下支付和发票系统的场景：

客户收到发票，当他们支付发票时，通过屏幕上的付款确认。用户将他们从客户那里收到的金额输入系统。

现在，应用程序逻辑是否如下（在控制器中）：

*   用户不能输入负数
*   用户必须仅以整数或#.# 或 #.## 或 ##.## 等形式输入输入。

业务逻辑（在模型中）：

*   输入的金额不能超过发票上的金额（即到期金额）
*   和/或如果之前已支付部分款项，输入的金额不能超过所欠金额

我有正确的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:47:54.040

通常，您应该将所有业务逻辑，包括用于格式化和验证的业务逻辑放入模型中。因此，不输入负数是模型而不是控制器的重点。阅读[Skinny Controller、Fat Model](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)以及使用[Draper](https://github.com/jcasimir/draper)的演示者模式。Ryan Bates 最近在[Railscasts](http://railscasts.com)上介绍了很多此类内容。可能也很好研究一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T23:38:43.690

业务逻辑是指不能违反您的业务流程的规则。您给出的最后两个示例是业务逻辑，因为这些规则取决于业务而不是应用程序。

应用程序逻辑是与业务无关的逻辑。例如，确保执行前两条规则，因为它们会违反您列出的后两条规则。

反正我的2美分。

所以，是的，你在正确的轨道上。

# ios - ASIFormDataRequest POST 不起作用

> ID：12445512
> 
> 赞同：0
> 
> 时间：2012-09-16T08:40:54.047
> 
> 标签：ios, asihttprequest, asiformdatarequest

[我已经在我的应用程序中包含了所有必要的文件（此处](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)列出的 .h 和 .m 文件）然后我手动添加了 .m 文件来编译源代码并运行我的代码。

我运行我的应用程序，但我的服务器上什么也没发生。脚本上的服务器工作正常，因为我在其他 android 应用程序中使用它，所以它没有问题。

这是我在 ViewDidLoad 中使用的代码

```
NSURL *url=[NSURL URLWithString:@"www.myurl.php"];
    ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];
    [request setPostValue:@"test@gmail.com" forKey:@"email"];
    [request setPostValue:@"5678" forKey:@"code"];
    [request setPostValue:@"Demo" forKey:@"table"];
    [request setPostValue:@"testname" forKey:@"name"]; 
```

我需要添加什么吗？

这是我的进口：

```
#import "ASIHTTPRequest.h"
#import "ASIFormDataRequest.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:57:58.053

你试过开始你的请求吗？

```
 [request startAsynchronous]; 
```

# php - Symfony 2 - 仅显示 OneToMany 关系中的一个实体

> ID：12445515
> 
> 赞同：1
> 
> 时间：2012-09-16T08:42:21.350
> 
> 标签：php, symfony, doctrine-orm

我需要显示关系中一组实体的最小日期。例如。我有用户和合同 -> 用户有很多合同，但我需要显示合同的最短日期。

这是代码：

```
class User implements UserInterface
{
/**
* @ORM\OneToMany(targetEntity="Comp\ContractBundle\Entity\Contract", mappedBy="user_id")
* @ORM\OrderBy({"id" = "DESC"})
*
*/
private $contracts;
}

class Contract
{
/**
 * @var string $datastart
 *
 * @ORM\Column(name="datastart", type="datetime")
 */
private $datastart;

/**
 * @var string $dataend
 *
 * @ORM\Column(name="dataend", type="datetime")
 */
private $dataend;

/**
 * @var integer $user_id
 *
 * @ORM\ManyToOne(targetEntity="Comp\AuthBundle\Entity\User")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
private $user_id;
}

class UserType extends AbstractType
{

public function buildForm(FormBuilder $builder, array $options){

   #... other data
   $builder->add('contracts','collection', array(
                'type' => new ContractType()
            ) ); 
}
public function getName()
{
    return 'User';
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' =>  'Comp\AuthBundle\Entity\User',
    );
}
} 
```

和合同类型：

```
class ContractType extends AbstractType
{

public function buildForm(FormBuilder $builder, array $options){
    $builder->add('name','text');
    $builder->add('datastart','datetime');
}

public function getName()
{
    return 'Contract';
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' =>  'Comp\ContractBundle\Entity\Contract',
    );
}
} 
```

问题是，我得到了与用户实体相关的每个实体——我只需要获取一个。如果你知道任何好的例子——那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:29:05.167

**将合同**字段类型从**集合**更改为**实体**，并在 google 中查找实体字段类型的[**query_builder**属性](http://symfony.com/doc/current/reference/forms/types/entity.html#query-builder)。

在该属性中，您可以传递一个闭包（返回 QueryBuilder）或 QueryBuilder 本身，您可以在其中从给定关系中检索特定记录。

# javascript - 附加到 div 并且无法绑定添加的按钮

> ID：12445522
> 
> 赞同：0
> 
> 时间：2012-09-16T08:43:19.927
> 
> 标签：javascript, jquery

我有一个 php 函数，可以回显具有按钮的表单的代码。单击该按钮时，它将附加一个文件字段和另一个按钮，如果单击该按钮将重复上述操作。但是，当单击添加的按钮时，什么也没发生。

我认为这与绑定按钮有关。

这是代码：

```
$formtoreturn = '
<div class="form_holder">
    <form action="'.site_url().'xxxxx" method="post" enctype="multipart/form-data" >

    <div id="fields_holder">
        <span class="form_holder-label" id="fileC">Select image or images</span> 
        <div class="fields" id="field1">
            <input type="file" name="fileID-input[]" id="fileID-input" class="fileC-input">
            <a rel="add" id="add_file1" class="add_file" href="javascript:;"><img src="wp-content/plugins/wl_extendor_wishlist/images/add-icon.png"></a>
        </div>

    </div>
    <div class="clear"></div>

    <input type="hidden" value="'.$u_id.'" name="user_id" id="user_id">
    <input type="submit" name="submittestimonial" value="Submit Testimonial">
    </form>
    <iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe>
</div>
<script>
var filecount = 1;
var $j = jQuery.noConflict();
$j(document).ready(function() {
    $j(\'#fields_holder\').on(\'click\', \'.add_file\', function() {
        var toappend = \'<div class="fields" id="field1"><input type="file" name="fileID-input[]" id="fileID-input" class="fileC-input"><a rel="add" id="add_file1" class="add_file" href="javascript:;"><img src="wp-content/plugins/wl_extendor_wishlist/images/add-icon.png"></a></div>\';

        if($j(this).attr("rel") == "add"){
            $j(this).attr("rel", "ded");
            $j("#fields_holder").append(toappend);
            filecount++;
        }
    });
});

</script>
';
echo $formtoreturn; 
```

希望代码和我的问题很清楚。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:58:50.053

我建议您将 JavaScript 代码从

```
$j('#fields_holder').on('click', '.add_file', function() {
     // ...
}); 
```

至

```
$j(document).on('click', '#fields_holder .add_file', function() {
     // ...
}); 
```

然后该事件将冒泡并在 a 的单击处理程序中处理`document`。

**更新**

尽管我已经进行了[**测试**](http://jsfiddle.net/f0t0n/4E2Au/)，并且在两种变体中都对我来说效果很好。

# jquery - jQuery动画div和选择选项

> ID：12445523
> 
> 赞同：1
> 
> 时间：2012-09-16T08:43:33.743
> 
> 标签：jquery, select, jquery-animate

我有一些使用 jQuery 制作“滑块”的经验，但是我第一次遇到这个问题。在我的 div 中，我插入了一个选择字段，当我尝试更改它时，在 div 滑出后，它会滑回。

[我在这里](http://jsfiddle.net/kingston/fpjDg/)发布了代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:13:29.373

嗨，这段代码应该可以完成你的工作..!! ,

工作演示[@http://jsfiddle.net/fpjDg/13/](http://jsfiddle.net/fpjDg/13/)

```
jQuery(document).ready(function() {
    jQuery(".slider").hover(function(e) {

        jQuery(this).animate({
            left: "0"
        }, 700)
    }, function() {

        //  e.preventDefault();
        //slide out when options are selected.
        $("select").change(function() {

            //Call this  line only when the work is completed in the  form.
            jQuery(".slider").stop(true, false).animate({
                left: "-270px"
            }, 700);

        }); //change
    }); //hover
}); //ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:19:01.627

这似乎是预期的行为，我看到了一些选择。

1) 使用[jQuery 插件](http://www.jquery4u.com/plugins/10-jquery-selectboxdrop-down-plugins)将选择元素交换为使用 div/ul/li 元素的下拉菜单。这不应触发 mouseleave 事件，因为它将这些元素视为框的一部分。（由于某种原因，选择框选项不会发生这种情况）

2）这可能更hacky，但如果鼠标坐标在框内，你可以检查mouseleave，如果是`don't hide the box`，否则`hide the box`。

3) 不要在 mouseleave 上隐藏，而是使用关闭按钮或文档上的单击处理程序等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:20:26.680

```
jQuery(document).ready(function() {
    jQuery(".slider").hover(function() {
        jQuery(this).animate({
            left: "0"
        }, 700)
    }, function(e) {
        var within = $(e.target).parents().is('.slider')
        if (!within) {
            jQuery(".slider").stop(true, false).animate({
                left: "-270px"
            }, 700);
        }
    });
}); 
```

***[工作样本](http://jsfiddle.net/fpjDg/14/)***

# bash - 为文件和文件夹设置不同的 Umask

> ID：12445527
> 
> 赞同：5
> 
> 时间：2012-09-16T08:44:27.163
> 
> 标签：bash, permissions, umask

我正在编写一个 bash 脚本来更新一些文件/目录，并且我想在脚本中运行 umask 来为脚本创建的文件/目录设置默认权限。我知道我可以 umask 设置文件和目录的权限，但是我需要文件和文件夹的权限不同。

```
I want files to be:   -rw----r-- (0604)
I want folders to be: drwx-----x (0701) 
```

我可以使用 umask 执行此操作吗？如果是这样，我该怎么做？如果不是，实现它的最佳方法是什么？先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T08:53:44.200

有趣的要求。当前（至少在 中`bash`）`umask`是全局设置，您不能根据对象类型进行设置。

想到的一种解决方案是将 设置`umask`为文件变体，然后拦截对`mkdir`（例如`mkdir`在路径中较早使用用户创建的脚本）的调用：

```
umask 0701 ; /path/to/real/mkdir $1 ; umask 0604 
```

这样，假设您所有的目录创建都是用 完成的`mkdir`，您可以确保它们使用不同的`umask`设置。

请注意，脚本可能应该更健壮一些，例如恢复以前的`umask`而不是强制它`0604`，并添加一些更好的错误检查以及可能处理多个参数的能力。

但这就是所有细节，上面的框架应该足以让您入门。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T09:53:38.920

这`umask`是进程的属性而不是文件的属性 - 这是 UNIX 体系结构的一部分，与 Bash 或任何其他 shell 程序无关。

真正的问题是您使用的程序不允许在创建时更改权限。例如，在 C 中，`mkdir`有第二个参数*mode*。

不过，您不需要编写 C，Python 和 Perl 允许您使用低级接口。权限将由进程修改，`umask`因此，如果您不想进行任何修改，请将其设置`unmask`为零。

```
/home/user1> umask 000
/home/user1> python -c 'import os;os.mkdir("mydir",0701)'
/home/user1> ls -ld mydir
drwx-----x 2 user1 QAPLADV 4096 Sep 16 10:28 mydir

/home/user1> python -c 'import os;os.open("myfile",os.O_CREAT,0604)'
/home/user1> ls -l myfile
-rw----r-- 1 user1 QAPLADV 0 Sep 16 10:32 myfile 
```

不要忘记`umask`此时仍为 000，如果您在同一进程中执行任何其他工作，您可能希望将其设置回之前的值。

如果您愿意，这是一个 Perl 版本：

```
perl -e "mkdir mydir,0701"
perl -MFcntl -e 'sysopen(my $h,"myfile",O_EXCL|O_CREAT,0604)' 
```

当然，如果您有大量文件，并且您可能经常运行它，那么您最好编写一个 Perl 或 Python 程序来完成这项工作 - 为每个文件调用 perl 或 python 效率有点低.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T17:42:19.630

在用户的 .bashrc 中添加以下内容：

umask 0222

别名 mkdir='mkdir -mu=rx,g=rx,o='

该文件将使用 umask 0222 创建，而 mkdir 将使用 umask 0227。

# jquery - 自定义移动登录页面上的春季安全登录失败

> ID：12445528
> 
> 赞同：1
> 
> 时间：2012-09-16T08:44:38.960
> 
> 标签：jquery, grails, jquery-mobile, spring-security

我有一个使用弹簧安全核心的登录页面。现在我想创建一个移动登录页面。所以我使用了jquery mobile。我从 auth.gsp 复制了表单并将其粘贴到我创建的移动页面上。我编辑了现在看起来像这样的表单：

```
 <form method="POST" action="${resource(file: 'j_spring_security_check')}">

    Username:
    <g:textField  class="xlarge" name='j_username' id='j_username' value='${request.remoteUser}' />

    Password:
    <input type='password' class="xlarge"  name='j_password' id='j_password' value='${request.remoteUser}' />

    <g:submitButton name="login" value="Login" /></td>

    </form> 
```

但是当我尝试登录时，会出现一条错误消息，简单地说“加载页面时出错”。我认为它是由 jquery mobile 生成的。但是当我尝试刷新时，它重定向到主页，这意味着登录成功，只是登录成功后它没有自动重定向到主页。

请帮忙，谢谢。

# oop - 象棋游戏的OOP？

> ID：12445530
> 
> 赞同：2
> 
> 时间：2012-09-16T08:44:48.867
> 
> 标签：oop, design-patterns

我在网上遇到过这样的OOP设计（简要版）：

```
public abstract class ChessPieceBase {
    abstract boolean canBeChecked();
    abstract boolean isSupportCastle();
}

public class King extends ChessPieceBase { ... }
public class Queen extends ChessPieceBase { ... }

public class Position { // represents chess positions in compact form
    ArrayList<ChessPieceBase> black;
    ArrayList<ChessPieceBase> white;
}

public class ChessPieceTurn { };

public abstract class PlayerBase {
    public abstract ChessPieceTurn getTurn(Position p);
}

class ComputerPlayer extends PlayerBase {
    public ChessPieceTurn getTurn(Position p) { return null; }
}

public class HumanPlayer extends PlayerBase {
    public ChessPieceTurn getTurn(Position p) { return null; }
}

public class GameManager {
    void processTurn(PlayerBase player) { };
    boolean acceptTurn(ChessPieceTurn turn) { return true; };
    Position currentPosition;
} 
```

我在理解设计方面有些困难，不知道我是不是不懂 OOP 还是不懂国际象棋:(。从上到下：

1.  ChessPieceBase 是所有棋子的抽象基类，国王、王后、车、象、马和兵，对吧？所以我看到国王和王后扩展了 ChessPieceBase。

2.  位置，根据评论，应该记录黑白棋子的全局当前位置。它实现为ChessPieceBase的arraylist，但ChessPieceBase不包含任何位置信息成员，那么位置信息存储在哪里？

3.  ChessPieceTurn 是什么？如果是“轮到我，轮到你”的概念，为什么玩家类中的 getTurn() 函数需要“位置 p”参数并返回 null？

4.  游戏管理器类。'currentPosition' 记录游戏的全局状态，'acceptTurn()' 似乎没有做任何事情，'processTurn()' 从玩家那里获得转弯并像裁判一样处理。希望我理解这最后一个正确。

如果可能的话，有人可以编写一个小 main() 函数来展示它是如何工作的吗？在这个时候，我只是困惑。

欢迎您提出任何关于您如何看待国际象棋游戏的课程的想法，

谢谢，

# php - 如何替换所有没有空格的逗号，但不能用空格替换逗号？

> ID：12445533
> 
> 赞同：1
> 
> 时间：2012-09-16T08:45:31.007
> 
> 标签：php, regex, string, preg-replace, preg-match

就像，如果这个问题标题的第二部分不存在，我可以这样做：

```
$string = 'Hello,this is my string.';
$replacedstring = str_replace(',', ', ', $string); 
```

但是，如果用户确实正确格式化了句子，如`Hello, this is my string.`. 然后这将导致它变成`Hello, this is my string.`，这是我不想要的。

那么，我将如何`preg_replace`在 PHP 中使用和类似的正则表达式函数来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T08:52:50.117

```
$replaced_string = preg_replace("/,([^\s])/", ", $1", $str); 
```

我会用这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T08:49:56.813

用这个：

```
$ret = preg_replace('/(?<=\S,)(?=\S)/', ' ', $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:53:23.517

您可以使用

```
str_replace(array(', ', ','), ', ', $string); 
```

是多余的，因为替换`,`为`,`但可能比正则表达式或任何其他算法更有效的文本不是很大

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T09:09:45.853

```
$string = 'Hello,this is my string, sir.';
$pattern = '/,([^ ])/'; # every comma that is followed by anything but space
$replacement = ', ';
echo preg_replace($pattern, $replacement, $string); 
```

# c# - 不同配置的不同 Postbuilds

> ID：12445534
> 
> 赞同：0
> 
> 时间：2012-09-16T08:45:46.787
> 
> 标签：c#, visual-studio-2010, post-build-event

> **可能重复：**
> [如何仅为调试构建运行 Visual Studio 构建后事件](https://stackoverflow.com/questions/150053/how-to-run-visual-studio-post-build-events-for-debug-build-only)

我想在将我的项目编译为 Release 时执行 postbuild 命令。如果设置了 Debug，则不应执行这些 Postbuild。这个怎么做？Visual Studio 对所有配置使用相同的 Pre-和 Postbuild

# facebook - 如何获取男性和女性朋友的数量以及他们在 Facebook 应用程序中的百分比

> ID：12445535
> 
> 赞同：0
> 
> 时间：2012-09-16T08:46:08.430
> 
> 标签：facebook, facebook-fql

```
$query = 'SELECT friend_count FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) and sex='male'';

$url = "https://graph.facebook.com/fql?q=" . urlencode($query) . 
     "&access_token=" . $access_token;
$data = json_decode( file_get_contents ($url));
$boys = count($data[data]);
echo $boys; 
```

我已经尝试过这种方法，但无法得到想要的结果......我想做一个这样的应用程序

![](../Images/12f42243805f52119b08ef5add3dc9e7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:33:15.980

不幸的是，FQL 不支持`COUNT()`你需要的 SQL 函数，这里。

您必须检索朋友的性别列表并遍历它们。

在 FQL 中：`SELECT sex FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())`

图 API：`https://graph.facebook.com/me/friends?fields=gender`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-04-01T19:25:39.897

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500,
      "fbtrace_id": "FJgpERmm460"
   }
} 
```

# cxf - 在 apache cxf 拦截器和 jaxrs 客户端之间交换参数

> ID：12445538
> 
> 赞同：3
> 
> 时间：2012-09-16T08:46:45.757
> 
> 标签：cxf, jax-rs, interceptor

我正在创建一个 Apache CXF JAX-RS 客户端并添加一个 inInterceptor

```
MyProxy proxy = JAXRSClientFactory.create("http://path.to.url", MyProxy.class);
ClientConfiguration config = WebClient.getConfig(service);

config.getInInterceptors().add(new RemoveAlertsInterceptor()); 
```

如何在 中设置`RemoveAlertsInterceptor`可以从代理读取的参数？

# java - GetValue (JSoup)

> ID：12445539
> 
> 赞同：0
> 
> 时间：2012-09-16T08:46:47.493
> 
> 标签：java, jsoup

```
<div class="Class-feedbacks">
  <div class="grading class2">
    <div itemtype="http://xx.edu/grading" itemscope="" itemprop="studentgrading">
      <div class="rating">
        <img class="passportphoto" width="1500" height="20" src="http://greg.png" >
        <meta content="4.0" itemprop="gradingvalue">
      </div>
    </div>
    <meta content="2012-09-08" itemprop="gradePublished">
    <span class="date smaller">9/8/2012</span>
  </div>
  <p class="review_comment feedback" itemprop="description">Greg is one the smart person in his batch</p>
</div> 
```

我想打印：

```
date: 2012-09-08
Feedback : Greg is one the smart person in his batch 
```

我能够按照建议使用它 - [Jsoup getting a hyperlink from li](https://stackoverflow.com/questions/12443298/jsoup-getting-a-hyperlink-from-li)

( `doc.select`div div divn li ui ...) 并获得班级反馈。

**我应该如何使用 select 命令来获取上述值的值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:02:59.463

要获取属性的值，请使用`attr`方法。例如

```
Elements elements = doc.select("meta");
for(Element e: elements)
  System.out.println(e.attr("content")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T00:44:03.467

在一次选择中...您是否尝试过逗号组合符“，”？ [http://jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

```
Elements elmts = doc.select("div.Class-feedbacks meta, p")

Element elmtDate = elmts.get(0);
System.out.println("date: " + elmtDate.attr("content"));
Element elmtParag = elmts.get(1);
System.out.println("Feedback: " + elmtParag.text()); 
```

您应该在列表中取回 2 个元素，即日期和选择后的反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T04:07:37.697

这是一个老问题，我可能会迟到，但如果其他人想知道如何轻松地做到这一点，下面的代码会很有帮助。

```
Document doc = Jsoup.parse(html);
// We select the meta tag whose itemprop property has value 'gradePublished'
String date = doc.select("meta[itemprop=gradePublished]").attr("content");
System.out.println("date: "+date);
// Now we select the text inside the p tag with itemprop value 'description'
String feedback = doc.select("p[itemprop=description]").text();
System.out.println("Feedback: "+feedback); 
```

# latex - 乳胶与后记的比较

> ID：12445541
> 
> 赞同：5
> 
> 时间：2012-09-16T08:47:06.147
> 
> 标签：latex, postscript

我在 libreoffice 和 goffice 下遇到了乳胶作为一种保存格式和绘图框架。

我还发现 djvu 作为 pdf 的替代品，它使用乳胶而不是 postscript。现在，postscript 是 adobe 的 flash 动画基础，因此是在脚本下标记的矢量图形。

所以对我来说，乳胶看起来像是后记的替代品。或者乳胶可以代替后记吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T13:48:08.600

Postscript 是一种带有内置图形和字体渲染原语的脚本编程语言。它可以用作文字处理器的输出格式，但通常需要文字处理器来完成所有的文本放置计算。输出可以后处理为 PDF。

TeX（我稍后会谈到 LaTeX）是一种文档处理语言。它执行文本放置计算和字体渲染，但缺少 postscript 的绘图工具。TeX 输出通常是一个 .dvi（与设备无关的文档）文件，可以后处理成 postscript。

LaTeX 基本上将样式表添加到 TeX，更高级的概念，如“章节”和“部分”。

所以你最终得到了一个链条。LaTeX -> TeX -> DVI -> PS -> PDF（反映之前的链：pic | eqn | tbl | groff）。后来的 LaTeX 版本合并了其中的几个转换。DVI、PS 和 PDF 都同样*出色*，但您可能更喜欢其中一个，具体取决于您希望使用的其他软件。有一个流行的 LaTeX 包，称为 PSTricks，它要求你在链中拥有 PS。

所以它们都是不同的，但都是一样的，你知道吗？

* * *

列举其中哪些格式不能转换为其他格式可能会有所帮助。

*   乳胶-> TeX。你不能真的走另一条路。我不确定这是否有意义。

*   TeX -> DVI。同样，这是一个“渲染”步骤，所以你不能倒退。就像您无法将苹果的照片转换为苹果一样。

*   DVI-> PS。PS -> DVI。DVI -> PDF。PDF -> DVI（从未听说过，但为什么不呢？！）。PS -> PDF。PDF -> PS（除非您使用 PS 中不存在的 PDF 图层）。这三种被视为输出格式很容易相互转换。

作为输入格式，LaTeX、TeX 和 PS 具有非常不同的问题域。虽然理论上每个人都有能力执行其他人的适当工作，但这将是一团糟。例如，查找“Postscript 中的换行”（您最终不得不重新实现一大堆算法，这些算法的库版本几乎可以用任何其他语言提供）或“Tex 中的图像处理”（您制作半色调点的“字体”，然后通过在该字体中设置文本来“打印”您的图像）。DVI 和 PDF 并不是真正的人类读/写能力；它们只是“输出”格式（当然，它们是“输入”**的后处理软件除外）。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:54:44.263

LaTeX 是一种易于编写文档的语言，而 Postscript 与 PDF 类似，因此两者没有可比性。Latex 生成附言文件。认为它就像 LaTeX 是 C 源代码，而 postscript 是编译产生的可执行文件。

# php - 使用 php 获取包含在特定 html 元素中的文本

> ID：12445548
> 
> 赞同：1
> 
> 时间：2012-09-16T08:48:47.680
> 
> 标签：php, regex, parsing

我需要获取特定 div 之间包含的所有文本。在下面的示例中，我想获取类名为 "st" 的 div 之间的所有内容：

```
<div class="title">This is a title</div>
<div class="st">Some example <em>text</em> here.</div>
<div class="footer">Footer text</div> 
```

所以结果是

```
Some example <em>text</em> here. 
```

甚至只是

```
Some example text here. 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:17:33.567

**PHP中的服务器端**

一个非常基本的方法是这样的：

```
$data = ''; // your HTML data from the question
preg_match( '/<div class="\st\">(.*?)<\/div>/', $data, $match ); 
```

然后迭代`$match`对象。但是，如果您的`.st`DIV 内部有另一个 DIV，这可能会返回错误数据。

更合适的方法是：

```
function getData()
{
    $dom = new DOMDocument;
    $dom -> loadHTML( $data );
    $divs = $dom -> getElementsByTagName('div');

    foreach ( $divs as $div )
    {
        if ( $div -> hasAttribute('class') && strpos( $div -> getAttribute('class'), 'st' ) !== false )
        {
            return $div -> nodeValue;
        }
    }
} 
```

**客户端**

如果您使用的是[jQuery](http://jquery.com/)，它会很容易像这样：

```
$('.st').text(); 
```

或者

```
$('.st').html(); 
```

如果您使用的是纯 JavaScript，这会有点复杂，因为您必须检查所有 DIV 元素，直到找到具有所需 CSS 类的元素：

```
function foo()
{
    var divs = document.getElementsByTagName('div'), i;

    for (i in divs)
    {
        if (divs[i].className.indexOf('st') > -1)
        {
            return divs[i].innerHTML;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:48:56.360

使用[`DOM`](http://php.net/manual/en/book.dom.php). 例子：

```
$html_str = "<html><body><div class='st'>Some example <em>text</em> here.</div></body></html>";
$dom = new DOMDocument('1.0', 'iso-8859-1');

$dom->loadHTML($html_str); // just one method of loading html.
$dom->loadHTMLFile("some_url_to_html_file");

$divs = getElementsByClassName($dom,"st");
$div = $divs[0];

$str = '';
foreach ($div->childNodes as $node) {
    $str .= $dom->saveHTML($node);
}

print_r($str); 
```

下面的函数不是我的，而是[这个用户的](https://stackoverflow.com/a/5648333/785241). 如果您发现此功能有用，请转到先前链接的答案并投票。

```
function getElementsByClassName(DOMDocument $domNode, $className) {
    $elements = $domNode->getElementsByTagName('*');
    $matches = array();
    foreach($elements as $element) {
        if (!$element->hasAttribute('class')) {
            continue;
        }
        $classes = preg_split('/\s+/', $element->getAttribute('class'));
        if (!in_array($className, $classes)) {
            continue;
        }
        $matches[] = $element;
    }
    return $matches;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:51:13.117

PHP 是一种服务器端语言，要做到这一点，您应该使用像 javascript 这样的客户端语言（可能还有像 jQuery 这样的库，以便于快速进行跨浏览器编码）。然后使用javascript将您需要的数据发送到后端进行处理（Ajax）。

jQuery 示例：

```
var myText = jQuery(".st").text();

jQuery.ajax({
    type: 'POST',
    url: 'myBackendUrl',
    myTextParam: myText,
    success: function(){
        alert('done!');
    },
}); 
```

然后，在 php 中：

```
<?php
    $text = $_POST['myTextParam'];
    // do something with text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T08:57:40.927

使用 jquery/ajax

然后做类似的事情：

```
<script>
$(document).ready(function() {
$.ajax({
        type: "POST",
        url: "urltothepageyouneed the info",
        data: { ajax: "ajax", divcontent:$(".st").html()}
        })

});
</script> 
```

基本上

```
$(".st").html() 
```

将返回 HTML

和

```
 $(".st").text() 
```

将返回文本

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T09:02:32.227

使用[XML 解析器](http://php.net/manual/en/book.simplexml.php)：

```
$htmlDom = simple_load_string($htmlSource);
$results = $htmlDom->xpath("//div[@class='st']/text()");

while(list( , $node) = each($result)) {
    echo $node, "\n";
} 
```

# regex - Perl：如何仅替换字符串的匹配部分？

> ID：12445551
> 
> 赞同：7
> 
> 时间：2012-09-16T08:49:18.700
> 
> 标签：regex, string, perl

我有一个字符串`foo_bar_not_needed_string_part_123`。现在在这个字符串中，我只想`not_needed_string_part`在`foo_`后面跟着`bar`.

我使用了以下正则表达式：

```
my $str = "foo_bar_not_needed_string_part_123";

say $str if $str =~ s/foo_(?=bar)bar_(.*?)_\d+//; 
```

但它删除了整个字符串，只打印一个换行符。

所以，我需要的是只删除匹配的 (.*?) 部分。所以，输出是

```
foo_bar__123. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:57:32.393

还有另一种方法，而且很简单：

```
my $str = "foo_bar_not_needed_string_part_123";
$str =~ s/(?<=foo_bar_)\D+//gi;
print $str; 
```

*诀窍是使用后向检查锚点，并替换此锚点*后面的所有非数字符号（不是符号）。基本上，使用这种模式，您只匹配需要删除的符号，因此不需要捕获组。

作为旁注，在原始的正则表达式中`(?=bar)bar`构造是多余的。第一部分（前瞻）只有在某个位置后面跟着“条”时才会匹配——但这正是模式的非前瞻部分检查的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T08:59:07.867

您可以捕获不想删除的部分：

```
my $str = "foo_bar_not_needed_string_part_123";
$str =~ s/(foo_bar_).*?(_\d+)/$1$2/;
print $str; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T08:52:33.987

你可以试试这个：

```
my $str = "foo_bar_not_needed_string_part_123";

say $str if $str =~ s/(foo_(?=bar)bar_).*?(_\d+)/$1$2/; 
```

输出：

> foo_bar__123

PS：我是新手，`perl/regex`所以如果有直接替换匹配部分的方法，我很感兴趣。我所做的是捕获所需的所有内容，然后用它替换整个字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T08:56:52.563

什么将字符串分成 3 部分，只删除中间？

```
$str =~ s/(foo_(?=bar)bar_)(.*?)(_\d+)/$1$3/; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T09:06:30.207

试试这个：

```
(?<=foo_bar_).*(?=_\d) 
```

在此变体中，它在结果中包含和之间的 ALL ( `.*`) 。`foo_bar_``_"any digit"`

在您的正则表达式中，它包括结果：

```
foo_ 
```

然后在“foo_”之后寻找“bar”：

```
(?=bar) 
```

但它不包括在这一步。它包含在下一步中：

```
bar_ 
```

然后其余的行包含在`(.*?)_\d+`.

所以，一般来说：它在结果中包含您输入的所有内容，除了 (?=bar)，它只是在表达式之后寻找“bar”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-16T11:54:22.970

一起去

```
echo "foo_bar_not_needed_string_part_123" | perl -pe 's/(?<=foo_bar_)[^\d]+//' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-16T20:08:01.733

在这种情况下，您可以使用look-behind/look-ahead

```
$str =~ s/(?<=foo_bar_).*?(?=_\d+)//; 
```

并且可以将后视替换为`\K`(keep) 以使其更整洁

```
$str =~ s/foo_bar_\K.*?(?=_\d+)//; 
```

# ruby-on-rails-3 - 在 Joomla 站点的子目录中设置 Rails 应用程序

> ID：12445552
> 
> 赞同：1
> 
> 时间：2012-09-16T08:49:48.530
> 
> 标签：ruby-on-rails-3, joomla2.5, apache2.2

我在我的域根目录中有一个 joomla 站点，即 www.myjoomlasite.com，我在 www.myrailssite.com/railsapp 中有一个 rails 应用程序

[我想在http://www.myjoomlasite.com](http://www.myjoomlasite.com)的子目录中部署 rails 应用程序，期望 rails 应用程序将在 [http://www.myjoomlasite.com/railsapp](http://www.myjoomlasite.com/railsapp)中可用。

在我点击浏览器中的*www.myjoomlasite.com/railsapp*完成所有必要步骤后，它会将我正确重定向到[http://www.myjoomlasite.com/railsapp/admins/sign_in](http://www.myjoomlasite.com/railsapp/admins/sign_in)

然后尽管显示了**登录**页面，但它显示了joomla的错误页面“404 page not found”

我的问题是：

1.  如果 rails 应用程序有任何问题，它应该显示 rails 错误页面，但为什么 joomla 的错误页面？
2.  在 Rails 应用程序生产日志中，为什么它显示 **Completed 401 Unauthorized in 1ms**？
3.  如何在我的 joomla 站点的子目录中部署 rails 应用程序？

**附加信息：**

rails 应用程序生产日志

```
Started GET "/railsapp" for 24.5.7.81 at 2012-09-14 08:41:36 -0700
Processing by HomeController#index as HTML
Completed 401 Unauthorized in 1ms 
```

**更新**

我找到了“404”背后的可能原因。我在文档根目录中有 .htaccess 文件。这个 .htaccess 文件停止了 rails 应用程序的渲染。

是否可以在 .htaccess 文件中进行一些更改以显示 Rails 应用程序可以正确呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:11:52.717

文档根目录中有一个 .htaccess 文件。这个默认的 .htaccess 文件带有 joomla 源代码（作为 htaccess.txt，字母被重命名为 .htaccess）。有一个 基于**RewriteCond的****RewriteRule**。默认 htaccess 文件附带的所有重写条件，停止我的“/ railsapp” url 呈现。为了允许通过我的“/railsapp”，我在 .htaccess 中 添加了以下**RewriteCond**

 ****```
RewriteCond %{REQUEST_URI} !^/railsapp 
```

如果任何 url 以 'railsapp' 前缀开头，那么这些 url 将不会被重写规则重写并直接访问该 url。****

# snmp - snmp OID 不增加

> ID：12445556
> 
> 赞同：3
> 
> 时间：2012-09-16T08:50:07.060
> 
> 标签：snmp, oid

我尝试创建一个自定义 SNMP oid（和脚本）。

我将以下行添加到 snmpd.conf（并重新启动服务）：

```
pass .1.3.6.1.3.2 /bin/myscript.sh 
```

.

```
cat myscript.sh
#!/bin/sh
echo .1.3.6.1.3.2
echo gauge
exec 100 
```

.

```
snmpwalk -c mycommunity -v2c 10.2.1.4 .1.3.6.1.3.2
SNMPv2-SMI::experimental.2 = Gauge32: 100
Error: OID not increasing: SNMPv2-SMI::experimental.2
>= SNMPv2-SMI::experimental.2 
```

snmpwalk 在查询结束时是否期待任何内容？snmpget 工作没有问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-10T09:58:31.920

默认情况下，snmpwalk 期望值会增加。要解决它，请尝试：

```
snmpwalk -Cc -c mycommunity -v2c 10.2.1.4 .1.3.6.1.3.2 
```

Cc 选项执行此操作：“不检查返回的 OID 正在增加”

通常可以使用 oid:s 乱序完成遍历。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:22:44.333

`snmpwalk`期待越来越多的回复：

```
SNMPv2-SMI::experimental.2 = Gauge32: 100
SNMPv2-SMI::experimental.3 = Gauge32: 1125
SNMPv2-SMI::other.1 = Gauge32: 10
END 
```

*snmp 代理*似乎回复了两个相同的值：

```
SNMPv2-SMI::experimental.2 = Gauge32: 100
SNMPv2-SMI::experimental.2 = Gauge32: 100 
```

所以它失败了（意外行为）。

# php - replaceWith 不会替换旧的 div

> ID：12445558
> 
> 赞同：0
> 
> 时间：2012-09-16T08:50:52.473
> 
> 标签：php, jquery

**我在做什么：**

我正在附加一个带有表单和一些按钮的 div。这两个按钮是保存和取消。单击保存时，我正在发布表单并获得响应。我想替换单击保存的旧 div。

这是 html 和 jquery [http://jsfiddle.net/thiswolf/vSnJJ/1/](http://jsfiddle.net/thiswolf/vSnJJ/1/)

我正在使用这个 php，但由于它是一个示例，因此未对帖子数据进行清理

```
<?php
/**
test if replaced item can post and be deleted
@move ---->next
*/
$sliderKey = $_POST['sliderKey'];
$sliderPosition = $_POST['sliderPosition'];
$sliderTitle = $_POST['sliderTitle'];
$sliderLocation = $_POST['sliderLocation'];
$sliderDescription = $_POST['sliderDescription'];
$uniqid = uniqid();
echo "<div class='krudItem' id='$uniqid'><form class='aj' name='itemForm' method='post'action=''><section><label>Slider Title</label><input type='hidden' name='sliderKey' value='$sliderKey'/><input type='hidden' name='sliderPosition' value='$sliderPosition'/><input type='text' name='sliderTitle' value='$sliderTitle'/></section><section><label>Slider Location</label><input type='text' name='sliderLocation' value='$sliderLocation'/></section><section><label>Slider Description</label><textarea name='sliderDescription'>THIS IS THE REPLACEMENT</textarea></section><button name='saveNew' class='saveNew' id='$uniqid'>save</button><button name='newCancel'>delete</button></form></div>";

?> 
```

这是我正在使用的整个 jquery

```
jQuery(function() {
function randString(n)
{
    if(!n)
    {
        n = 5;
    }

    var text = '';
    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    for(var i=0; i < n; i++)
    {
        text += possible.charAt(Math.floor(Math.random() * possible.length));
    }

    return text;
}

 $("#button").click(function () {
$("<div class='krudItem' id='xxx'><form class='aj' name='itemForm' method='post' action=''><section><label>Slider Title</label><input type='hidden' name='sliderKey' value='16'/><input type='hidden' name='sliderPosition' value='12'/><input type='hidden' name='clickedButton' value='initial'/><input type='text' name='sliderTitle' value='lorem'/></section><section><label>Slider Location</label><input type='text' name='sliderLocation' value='ipsum'/></section><section><label>Slider Description</label><textarea name='sliderDescription'>hello world</textarea></section><button name='saveNew' class='saveNew' id='buttonId' value='saveNew'>save</button><button name='newCancel'>cancel</button></form></div>").appendTo('.krudSpace'); 
});
//save new
jQuery('.saveNew').live("click",function(event)
    {
     jQuery(this).attr("id",randString(7));
    event.preventDefault();
     var contentPanelId = jQuery(this).attr("id");

    jQuery.ajax({
    type: "POST",
    url: "insert.php",
   data: jQuery(".aj").serialize(),
  success: function(data){
  var quoted = "#"+contentPanelId;
  jQuery(quoted).replaceWith(data)
  }
 });
 return false; 
 });
}); 
```

它在某种程度上有效，但旧的 div 根本没有被替换，而是响应附加在旧的下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:49:44.630

你让事情变得困难。只需保存父级本身：

```
var $p = jQuery(this).parent(); 
```

并做：

```
$p.replaceWith(data) 
```

这是一个更新的 jsFiddle（它使用`error`而不是`success`因为没有 PHP）：http: [//jsfiddle.net/vSnJJ/2/](http://jsfiddle.net/vSnJJ/2/)。

# objective-c - NSSupports自动图形切换支持

> ID：12445561
> 
> 赞同：1
> 
> 时间：2012-09-16T08:51:41.470
> 
> 标签：objective-c, cocoa, opengl, graphics

Apple 有一个[技术说明](http://developer.apple.com/library/mac/#qa/qa1734/_index.html#//apple_ref/doc/uid/DTS40010791)，提到可以防止您的 Macbook 切换到用于 OpenGL 的离散卡。但是，它自去年四月以来一直没有更新。它在说明中提到该`NSSupportsAutomaticGraphicsSwitching`标志仅适用于 2011 Macbook Pros，但此时这似乎是过时的文档。

我的问题是：是否有更新的方法来启用此功能？从那时起，Lion 和 Mountain Lion 都与全新的 Macbook 系列一起发布，我认为必须有某种途径来防止 GPU 切换，尤其是随着英特尔的集成显卡越来越好。

作为记录，我在`NSSupportsAutomaticGraphicsSwitching`2012 年中期的 Retina Macbook Pro 上尝试了该标志，但无济于事。

[这个](https://stackoverflow.com/questions/8870304/dont-automatically-switch-to-the-higher-end-discrete-gpu)问题是相关的，但解决方案是查看 GfxCardStatus 以了解它是如何做到的。我不想控制所有应用程序的 GPU，只是我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T04:44:17.777

我遇到的问题是我不支持根据[此技术说明](https://developer.apple.com/library/mac/technotes/tn2229/_index.html)的多个渲染器。我需要将属性添加到我的`NSOpenGLPixelFormatAttribute`列表中。`NSOpenGLPFAAllowOfflineRenderers`现在我有了这个，我的应用程序不会自动触发离散卡，我实际上可以随意在集成和离散之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:22:27.083

据我所知，它应该仍然有效。至少它对 Rdio 有用，请参阅此链接了解更多信息：http: [//zacwe.st/blog/rdio-discrete-card](http://zacwe.st/blog/rdio-discrete-card)

我也在使用 Retina MBP...而且我也成功地将它应用到另一个应用程序，所以它不仅仅是 Rdio 特定的。

也许您尝试修改的特定应用程序是沙盒的，或者没有正确的 plist？

# php - 更新没有唯一键的行

> ID：12445566
> 
> 赞同：3
> 
> 时间：2012-09-16T08:52:51.380
> 
> 标签：php, mysql

我使用 mySQL（引擎：myISAM）和 php 作为接口。

我的目标：通过循环遍历表格并增加一个变量，其值被分配给所述字段，从而在表格的每一行中填充一个数字字段。

一段简单的代码如下所示：

```
$NumOfRows = mysqli_num_rows(mysqli_query ($connection, "SELECT * FROM voc"))

$Offset = 1;

While (($Offset-1) < $NumOfRows)
{

  mysqli_query($connexion, "UPDATE voc SET id=$Offset WHERE **??rownumber??**=$Offset LIMIT 1");

  $Offset = $Offset + 1;
} 
```

我已经打上了双重问号，人们可以期望什么是mySQL SELECT 命令的*offset参数的对应项。*当然，UPDATE 不存在这样的论点。

我的问题是：您如何遍历表并操作各个行？

**CONSTRAINT**：表中没有唯一键允许使用 WHERE 参数（例如：）`WHERE id=[any value]`。

评论：作为 4thDimension 的经验丰富的用户，我感到很困惑：在 4thDimension 中，您可以使用适当的命令从第一行开始（例如）循环到最后一行，并通过一个简单的命令记录对任何行的更改. 作为 mySQL 的新手，我只能怀疑必须有一些有效的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:05:19.397

[您可以通过使用自定义变量](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)来实现您似乎正在尝试的内容：

```
SET @seq := 0;
UPDATE voc SET id = @seq := @seq + 1; 
```

（请注意，与您的方法相反，您不需要提前选择任何内容，也不需要在单独的查询中更新每一行，但所有行都在一个单独的查询中处理`UPDATE`；您需要执行`SET`as一个单独的查询`UPDATE`）

# r - 使用 reshape2 列中的小计

> ID：12445574
> 
> 赞同：0
> 
> 时间：2012-09-16T08:54:54.357
> 
> 标签：r, plyr, reshape2

我现在花了一些时间学习`reshape2`，`plyr`但我仍然不明白。这次我遇到了（a）小计和（b）传递不同聚合函数的问题。这里是一个使用[mrdwab 博客上](http://news.mrdwab.com/)[教程](http://news.mrdwab.com/2010/08/08/using-the-reshape-packagein-r/)中的数据的示例

```
# libraries 
library(plyr)
library(reshape2)
# get data and add few more variables 
book.sales = read.csv("http://news.mrdwab.com/data-booksales")
book.sales$Stock = book.sales$Quantity + 10
book.sales$SubjCat[(book.sales$Subject == 'Economics') | 
  (book.sales$Subject == 'Management')] <- '1_EconSciences'
book.sales$SubjCat[book.sales$Subject %in% 
  c('Anthropology', 'Politics', 'Sociology')] <- '2_SocSciences'
book.sales$SubjCat[book.sales$Subject %in% c('Communication', 'Fiction',
  'History', 'Research', 'Statistics')] <- '3_other'

# to get to my starting dataframe (close to the project I am working on) 
book.sales1 <- ddply(book.sales, c('Region', 'Representative', 'SubjCat', 
                                   'Subject', 'Publisher'), summarize,
                 Stock = sum(Stock), Sold = sum(Quantity),
                 Ratio = round((100 * sum(Quantity)/sum(Stock)), digits = 1))

#melt it 
m.book.sales = melt(data = book.sales1, id.vars = c('Region', 'Representative',
                                        'SubjCat', 'Subject', 'Publisher'),
                    measured.vars = c('Stock', 'Sold', 'Ratio'))

# cast it --- # Please ignore this cast this was a mistake 
# Tab1 <- dcast(data = m.book.sales, 
#         formula = Region + Representative ~ Publisher + variable,
#         fun.aggregate = sum, margins = c('Region', 'Representative'))

Tab1 <- dcast(data = m.book.sales, formula = Region + Representative ~ 
  SubjCat + Subject + variable, fun.aggregate = sum,
              margins = c('Region', 'Representative', 'SubjCat', 'Subject')) 
```

**现在我的问题：**

1.  ~~我已经能够在行中添加小计。但是是否也可以在列中添加边距。例如，一个出版商的库存总额？抱歉，我的意思是说所有出版商的总销量示例。~~

2.  “比率”列存在问题。我怎样才能得到这个变量的“平均值”而不是“总和”？

请注意：第一个问题（关于边距小计）可以解决。

*PS：我看过一些使用`reshape`. 你会推荐使用它来代替`reshape2`（这似乎不包括两个函数的功能）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:17:26.513

不确定您对问题 1 到底想要什么，但如果您想要总库存量，`Publisher`您不只是这样做吗？

```
 totalofstock <- ddply(book.sales, ('Publisher'), function(x)   
                      data.frame=c(subtotals  =  sum(x$Stock))) 
```

如果您想将其添加到`Tab1`您身上，只需执行以下操作：

```
Tab1$bloomsburytotalofstock<-totalofstock[1,][[2]]
head(Tab1) 
```

至于问题 2 得到 a`mean`而不是 a`sum`肯定你会将函数从 更改`sum`为`mean`

例如

```
ratiomeans <- ddply(book.sales1, ('Publisher'), function(x)   
                      data.frame=c(ratioMEAN  =  mean(x$Ratio))) 
```

另外我建议坚持使用`reshape2`. `reshape2`基本上是新版本的`reshape`。据我所知`reshape`，不再工作但仍然存在，因此使用旧代码的人`reshape`不必重写所有内容。

编辑

```
justratio<-(m.book.sales[m.book.sales$variable=="Ratio",])
Tab2 <- dcast(data = justratio, 
        formula = Region + Representative ~ SubjCat + Subject + variable,
        fun.aggregate = mean,
        margins = c('Region', 'Representative', 'SubjCat', 'Subject'))
final<-merge(Tab1,Tab2,by=c("Region","Representative")) 
```

# delphi - 用 try-except 块包装 try-finally 块有什么区别，反之亦然？

> ID：12445576
> 
> 赞同：5
> 
> 时间：2012-09-16T08:55:26.650
> 
> 标签：delphi, exception-handling

Delphi中的两种编码模式之间是否有任何实际区别：

**版本 1**

```
try
  try
    {Do something}
  finally
    {Do tidy up}
  end
except
  {Handle exception}
end; 
```

**版本 2**

```
try
  try
    {Do something}
  except
    {Handle exception}
  end
finally
  {Do tidy up}
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T09:03:57.153

有两个区别：

1.  except 和 finally 块执行的相对顺序不同。在版本 1 中，finally 在except 之前执行。在版本 2 中，执行顺序是相反的。
2.  在版本 1 中，如果 finally 块引发，那么它将由 except 块处理。在版本 2 中，如果 finally 块引发，那么它将由下一个包含异常处理程序（即在此代码之外）处理。

通常你不关心 finally 块加注。你根本没想到会发生这种情况，如果真的发生了，那么事情可能很糟糕。

所以重要的区别是 finally 是否在异常处理程序之前运行，反之亦然。有时这无关紧要，但通常确实会有所作为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T09:13:53.070

当您使用`try..except`以下行时执行。

```
Resource := TAbstractResource.Create;
try
  Resource.DoSomeThing;
except
  On E:Exception Do 
   HandleException(E);
end;
FreeAndNil(Resource); 
```

# iphone - 在 4 英寸 iPhone 上的 iOS 6.0 中转换/采用布局以使用 320x568

> ID：12445578
> 
> 赞同：0
> 
> 时间：2012-09-16T08:55:46.820
> 
> 标签：iphone, ios, uiview

连接到 4 英寸 iphone 模拟器时，对 applicationFrame 的调用返回 320x480。这就是阻止我的布局使用完整的 568 的原因吗？我该怎么做才能从我的布局中消除黑条？

# javascript - JavaScript window.find() 不选择搜索词

> ID：12445579
> 
> 赞同：0
> 
> 时间：2012-09-16T08:56:05.370
> 
> 标签：javascript, find

当我尝试传递分布在几个块元素中的文本时，window.find 方法会起作用：

**HTML**：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
</head>
<body>
  <p>search me</p><b> I could be the answer</b>
</body>
</html> 
```

**JavaScript**：

```
window.find("meI could be"); 
```

或者：

```
str = "me";
str+= "\n";
str+="I could be t";

window.find(str); 
```

当`<p>`元素存在于搜索词之间时，就会发生这种情况。
**最终结果应该是页面中文本的 GUI 选择，我不想搜索它是否存在。**

我想知道如何在 Firefox（至少）和 Internet Explorer 中实现这一点。
*注意：我无法更改 dom（例如更改为内联显示）。*

**编辑：**
这是我在@Alexey Lebedev 发表评论后尝试的，但它也找到了脚本（标签 [...] 文本）：

我可以让它更简单吗？（更好的）？

```
function nativeTreeWalker(startNode) {
    var walker = document.createTreeWalker(
        startNode, 
        NodeFilter.SHOW_TEXT, 
        null, 
        false
    );
    var node;
    var textNodesV = [];
    var textNodes = [];
    node = walker.nextNode();

    while(node ) {
      if(node.nodeValue.trim()){
        textNodes.push(node);
        textNodesV.push(node.nodeValue);
        //console.log(node.nodeValue);
      }
        node = walker.nextNode();
    }
  return [textNodes,textNodesV];
}

var result = nativeTreeWalker(document.body);
var textNodes = result[0];
var textNodesV = result[1];

var param = " Praragraph.Test 3 Praragr";
paramArr = param.split(/(?=[\S])(?!\s)(?=[\W])(?=[\S])/g);
//Fix split PARAM
for(i=0;i<paramArr.length-1;i++){
  paramArr[i]= paramArr[i]+paramArr[i+1].charAt(0);
  paramArr[i+1] = paramArr[i+1].substring(1,paramArr[i+1].length);
}
//Fix last element PARAM
if(paramArr[paramArr.length-1] === ""){
  paramArr.splice(paramArr.length-1,1);
}
//console.log(paramArr);
var startNode,startOffset,sFound=false,
    endNode,endOffset;
for(i=0;i<paramArr.length;i++){
  for(j=0;j<textNodesV.length;j++){
    //Fully Equal
    var pos = textNodesV[j].indexOf(paramArr[i]);
    if(pos != -1){
      if(!sFound){
        startNode = textNodes[j];
        startOffset = pos;
        sFound=true;
      }else{
        endNode = textNodes[j];
        endOffset = pos+paramArr[i].length;
        break;
      }
    }
  }
}
console.log(startNode);
console.log(startOffset);
console.log(endNode);
console.log(endOffset);

var range = document.createRange();
range.setStart(startNode,startOffset);
range.setEnd(endNode,endOffset);
var sel = window.getSelection();
sel.removeAllRanges();
sel.addRange(range); 
```

**注意**：没有 jQuery（只有 Raw JS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:25:25.617

JS Bin 演示：http: [//jsbin.com/aqiciv/1/](http://jsbin.com/aqiciv/1/)

如果您希望它在 IE < 9 中工作，您需要添加特定于 MS 的选择代码（噩梦），或使用 Rangy.js（相当重）。

```
function visibleTextNodes() {
    var walker = document.createTreeWalker(
        document.body,
        NodeFilter.SHOW_ALL,
        function(node) {
            if (node.nodeType == 3) {
                return NodeFilter.FILTER_ACCEPT;
            } else if (node.offsetWidth && node.offsetHeight && node.style.visibility != 'hidden') {
                return NodeFilter.FILTER_SKIP;
            } else {
                return NodeFilter.FILTER_REJECT;
            }
        },
        false
    );

    for (var nodes = []; walker.nextNode();) {
        nodes.push(walker.currentNode);
    }
    return nodes;
}

// Find the first match, select and scroll to it.
// Case- and whitespace- insensitive.
// For better scrolling to selection see https://gist.github.com/3744577
function highlight(needle) {
    needle = needle.replace(/\s/g, '').toLowerCase();

    var textNodes = visibleTextNodes();

    for (var i = 0, texts = []; i < textNodes.length; i++) {
        texts.push(textNodes[i].nodeValue.replace(/\s/g, '').toLowerCase());
    }

    var matchStart = texts.join('').indexOf(needle);
    if (matchStart < 0) {
        return false;
    }

    var nodeAndOffsetAtPosition = function(position) {
        for (var i = 0, consumed = 0; consumed + texts[i].length < position; i++) {
            consumed += texts[i].length;
        }
        var whitespacePrefix = textNodes[i].nodeValue.match(/^\s*/)[0];
        return [textNodes[i], position - consumed + whitespacePrefix.length];
    };

    var range = document.createRange();
    range.setStart.apply(range, nodeAndOffsetAtPosition(matchStart));
    range.setEnd.apply(  range, nodeAndOffsetAtPosition(matchStart + needle.length));
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    range.startContainer.parentNode.scrollIntoView();
}

highlight('hello world'); 
```

# php - PHP If 语句问题

> ID：12445581
> 
> 赞同：1
> 
> 时间：2012-09-16T08:56:31.800
> 
> 标签：php, if-statement

我正在做某事，但是使用我的 if 语句，无论如何它都会说“测试”，而不是跟随其他 if 语句。请帮忙，这是我的代码：

```
<?php
$userr = $_POST['user'];
$user = ucwords($userr);
$pass = $_POST['pass'];
if ($submit) 
{
    if ($userr && $pass) 
    {
        if ($user == "Admin" && $pass == "password") 
        {
            echo "Logged in";
        } 
        else 
        {
            echo "Fill in all fields";
        }
    } 
    else 
    {
        echo "Submit!";
    }
} 
else 
{
    echo "test";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:02:04.910

在哪里初始化你的`$submit`？

通过查看您的代码，我认为您需要：

```
$submit = $_POST['submit']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:03:30.910

这很可能是因为`$submit`总是评估为`false`.

确保`$submit`已定义并且是您所期望的。

此外，如果`$user == 'false'`您的脚本会在没有警告的情况下中断。

# junit - 从命令行生成 JUnit 报告

> ID：12445582
> 
> 赞同：18
> 
> 时间：2012-09-16T08:56:39.113
> 
> 标签：junit, continuous-integration, junit4

我有一个云系统的测试设置，它混合使用 python 进行进程级别控制和 junit 进行内部状态检查。本质上，我将几个虚拟机作为云服务器提供给服务器，然后是一个 junit 虚拟机，它是云的成员，但驱动测试和检查内部状态。我们现有的云管理东西是由 python 驱动的，我想维护它。

我有一个工作设置，将通过运行 JUnit 命令行

```
java -ea -cp <classpath> org.junit.runner.JUnitCore <tests> 
```

但这不会产生报告文件。我知道 ant 能够生成 xml 报告，但我不想让 ant 参与这个过程（我已经有足够的活动部件了）。

有没有办法从命令行启动 junit 以生成报告？

理想情况下，我会让 junit 测试生成 xml 报告，python 测试生成 xml 报告，然后将它们合并在一起以供我们的 CI 系统使用。

**更新：**命令行执行必须支持 Windows、Linux 和 Mac。我们不允许运送外部蚂蚁，尽管包装内部蚂蚁*可能*是一种选择。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T15:23:33.100

JUnit 库没有任何 XML 输出选项。要实现这样的事情，您需要编写自己的[RunListener](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/notification/RunListener.html)，它会侦听输出并在您的情况下编写 XML 文件。

但是，要以正确的格式获取 XML 文件以便 CI 系统可以读取它，我认为使用 ant 会容易得多，无论是通过命令行使用 build.xml ( [JUnitReport](https://ant.apache.org/manual/Tasks/junitreport.html) )，还是使用java api：[如何以编程方式使用 Apache ANT](https://stackoverflow.com/questions/4085002/how-can-i-use-apache-ant-programmatically)。

编辑：最初，我们有四个选择：

1.  从命令行使用 ant
2.  以编程方式使用 ant（使用 Java API）
3.  将 XMLJUnitResultFormatter 直接与 JUnitCore 一起使用
4.  创建一个生成正确 XML 输出的自定义 RunListener。

鉴于 OP 添加的限制，我们不能从命令行使用 ant，这消除了 1。

再仔细看了下Ant JUnit任务，好像不能用这个和JUnitCore（加个TestListener）一起使用，因为ant直接用了测试类的名字，所以不能做桥接类。来自[XMLJUnitResultFormatter.java](http://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/optional/junit/XMLJUnitResultFormatter.java)

```
private void formatError(String type, Test test, Throwable t) {
    ...
    nested.setAttribute(ATTR_TYPE, t.getClass().getName());

    String strace = JUnitTestRunner.getFilteredTrace(t);
    Text trace = doc.createTextNode(strace);
    nested.appendChild(trace);
} 
```

这消除了3。

通过 Java API 以编程方式调用 Ant。我找不到任何关于此的最新文档。这似乎很难。

因此，最后，我将使用 XMLJUnitResultFormatter 中的代码作为基础来执行 4，即自定义 RunListener。然后，我会在 github.com 上发布它，所以这个问题可以得到正确的回答:-)

# android - Android 4.1.1 上的 ComposeShader 问题

> ID：12445583
> 
> 赞同：15
> 
> 时间：2012-09-16T08:56:40.283
> 
> 标签：android, canvas, gradient, android-4.2-jelly-bean

我只是想为我的 android 应用程序实现一个颜色选择器，并在 Android 4.1.1 上遇到了一个奇怪的问题。以下代码不会在 Android 4.1.1 上创建预期的渐变，但会在 2.3.7 上创建：

```
Shader fadeInRight = new LinearGradient(0, 0, pWidth, 0, 0x00000000, 0xFF000000, Shader.TileMode.CLAMP);
Shader blackToWhite = new LinearGradient(0, 0, 0, pHeight, 0xFF000000, 0xFFFFFFFF, Shader.TileMode.CLAMP);
Shader whiteMask = new ComposeShader(blackToWhite, fadeInRight, PorterDuff.Mode.DST_IN);
Shader blackToColor = new LinearGradient(0, 0, pWidth, 0, 0xFF000000, hue, Shader.TileMode.CLAMP);
Shader shader = new ComposeShader(blackToColor, whiteMask, PorterDuff.Mode.SCREEN);
paint.setShader(shader);
...
canvas.drawRect(new Rect(0, 0, pWidth, pHeight), paint); 
```

**这是问题所在：** ![在此处输入图像描述](../Images/854b9f6ccf1cb834a4610fb968176913.png)

*（Android 4.1.1忽略下面的红框，我只说上面的渐变）*

**有什么想法吗？**我认为我的代码中缺少一些东西，但我不知道是什么。

**编辑#1：** 如果我只使用`whiteMask`for `setShader`，我也会得到两个系统的不同结果：在 2.3.7 上，我可以看到配置菜单的文本（位于弹出窗口后面）通过​​渐变矩形闪烁。此外，从左上边缘到右下边缘有一个渐变（从黑色到白色），但是 4.1.1 上的渐变是从左到右水平的。**所以这似乎是一个问题`ComposeShader`**

**编辑#2：** 我找到了一个更简单的例子来描述这个问题：

```
Shader shader1 = new LinearGradient(0, 0, 0, pHeight, hue, 0xffffffff, Shader.TileMode.CLAMP);
Shader shader2 = new LinearGradient(0, 0, pWidth, 0, 0xff000000, 0xffffffff, Shader.TileMode.CLAMP);
Shader shader = new ComposeShader(shader1, shader2, PorterDuff.Mode.MULTIPLY); 
```

所以，我们只有一个从任何颜色到黑色的垂直线性渐变和一个从黑色到白色的水平线性渐变。如果我们将这两个层相乘，我们应该得到正确的矩形（如上左截图所示）。但在 Android 4.1.1 上，我只看到 shader2 的渐变。我还在 Gimp 中尝试了两层，结果与 Android 2.3.7 相同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-16T12:04:06.407

发现问题：似乎与硬件加速有关。[如此处](http://developer.android.com/guide/topics/graphics/hardware-accel.html)所述'*`ComposeShader`只能包含不同类型的着色器（例如 BitmapShader 和 LinearGradient，但不能包含 BitmapShader 的两个实例）* '。但是，'*如果您的应用程序受到任何这些缺失功能或限制的影响，您可以通过调用`setLayerType(View.LAYER_TYPE_SOFTWARE, null)`.* '

我看到，这个方法从 SDK 11 开始可用。我的应用程序支持从 SDK 7 开始的所有版本，所以我必须检查该方法是否可用：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

现在一切都很好。

# java - Can't run ProcessBuilder

> ID：12445588
> 
> 赞同：2
> 
> 时间：2012-09-16T08:57:16.620
> 
> 标签：java, processbuilder

I am struggling with ProcessBuilder folks! I want to run the utility 'nativetoascii' in. I can run it on the command line and also via Runtime.exec() with no problems.

My code is:

```
'     
  String command = "\"C:\\Program Files (x86)\\Java\\jdk1.6.0_32\\bin\\native2ascii\"";
  String encoding = " -encoding ";
  String utf8 = "UTF8 ";
  String inputFile = "C:\\Users\\joe\\Desktop\\resources\\encoding\\orig.properties ";
  String outputFile ="C:\\Users\\joe\\Desktop\\resources\\encoding\\convertedViaProcessBuilder.properties";

  List<String> commandArgs = new ArrayList<String>();
  commandArgs.add(command);
  commandArgs.add(encoding);
  commandArgs.add(utf8);
  commandArgs.add(inputFile);
  commandArgs.add(outputFile);

  ProcessBuilder builder = new ProcessBuilder(commandArgs);
  Process p = builder.start();
  p.waitFor(); 
```

I have also written code to read the output from the process and it says:

```
Usage: native2ascii [-reverse] [-encoding encoding] [inputfile [outputfile]] 
```

Clearly I'm doing something wrong with the command and its arguments. Can anyone tell me what I'm doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:12:48.343

Your second argument is `" -encoding "` which it would be `"-encoding"` Spaces matter when you run a command. ;)

# javascript - 使用jQuery的focus（）输入元素，但光标没有出现

> ID：12445590
> 
> 赞同：17
> 
> 时间：2012-09-16T08:57:25.047
> 
> 标签：javascript, html, jquery, focus, text-cursor

我想在单击 div 时聚焦输入元素。

我的 HTML 如下所示：

```
<div class="placeholder_input">
    <input type="text" id="username" maxlength="100" />
    <div class="placeholder_container">
        <div class="placeholder">username</div>
    </div>
</div> 
```

我的脚本是：

```
$("#username").focus(function() {
    $(this).next().hide();
});

$(".placeholder_input").mousedown(function() {              
    $(this).children(":first").focus();
}); 
```

当我单击文本框时，占位符文本会正确消失，但闪烁的光标不会显示在文本框中。（我不能在文本框中输入任何文本）

在`mousedown`事件处理程序内部，`$(this).children(":first")`表达式选择了正确的输入元素，所以我不知道为什么`focus()`调用不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T09:04:46.590

它不适用于该`mousedown`方法；但是，它确实可以使用[`mouseup()`](http://jsfiddle.net/davidThomas/wpnNY/1/)and[`click()`](http://jsfiddle.net/davidThomas/wpnNY/)方法：

```
$(".placeholder_input").mouseup(function() {              
    $(this).children(":first").focus();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wpnNY/1/)。

和：

```
$(".placeholder_input").click(function() {              
    $(this).children(":first").focus();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wpnNY/)。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`mouseup()`](http://api.jquery.com/mouseup/).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-20T23:45:42.990

如果您坚持使用`mousedown`，请将焦点延迟到下一个滴答声

```
$(".placeholder_input").mousedown(function() {              
      var $el =  $(this).children(":first");
      setTimeout(function() {
          $el.focus();
      }, 0);
}); 
```

[http://jsfiddle.net/wpnNY/46/](http://jsfiddle.net/wpnNY/46/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:05:18.617

`mousdown`不会工作，使用`click`.

```
$(".placeholder_input").click(function() {              
    $(this).children(":first").focus();
});​ 
```

# php - 创建一些数据比其他数据更早过期的会话

> ID：12445595
> 
> 赞同：0
> 
> 时间：2012-09-16T08:57:44.250
> 
> 标签：php, codeigniter, session

我想知道是否有任何方法可以在codeigniter中创建早于默认会话过期时间的会话数据？

例如，无限期地存储购物车，但其他所有内容都会在 30 分钟后过期。

我是否必须这样做（手动删除它们）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:08:37.087

用户的购物车通常最好保存在用户的机器上。假设是现代浏览器，您可以使用 HTML5`localStorage`将购物车数据保存在用户身上（因为它不是敏感数据，所以没关系）。

如果您支持较旧的浏览器，则需要使用 cookie，但记住每个用户拥有哪个购物车仍然不是服务器的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:49:53.460

我的观点是，您必须按照设计的方式使用事物。会话旨在作为用户切换页面时的临时存储。如果您想无限期地存储某些内容，请将其存储在数据库中。这就是数据库的设计初衷。

为了识别用户和他的购物卡，您必须在用户机器上存储一个带有 ID 的 cookie，或者让用户登录或注册。

通过使用数据库和登录机制，用户还可以在不同机器上的其他位置检索他的购物卡。

让用户删除自己的购物卡，对超过一定时间（3个月，一年？）的购物卡使用清理机制

# php - jquery脚本不执行

> ID：12445597
> 
> 赞同：3
> 
> 时间：2012-09-16T08:57:50.173
> 
> 标签：php, jquery, codeigniter

目前，我正在使用 jquery、php 和 codeigniter 编写程序 - 但是，我遇到了一个问题。

当我使用 codeigniter php 框架编写视图文件时，我无法使用 URL 执行 JQuery `127.0.0.1/ci/welcome/passdataview/6/7`。如果我使用`127.0.0.1/ci/welcome/passdataview`，则可以执行 JQuery 脚本。

谁能告诉我如何在 URL 中使用 codeigniter 参数执行 jquery 脚本？

```
<html>
<head>
<script type="text/javascript" src="../js/jquery-1.7.1.js"></script>
<script type="text/javascript">

$(document).ready(function(){
alert ("here");
});

</script>
</head>
<body>
<div><h2>demo 1</h2></div>
<input type="hidden" id="hidden1" value="<?php echo $username;?>">
<input type="hidden" id="hidden2" value="<?php echo $subject;?>">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:05:05.077

可能是你的 jquery 文件问题，尝试加载 url helper 并使用它：

```
<script type="text/javascript" src="<?php echo base_url('js/jquery-1.7.1.js');?>"></script> 
```

无论您如何更改文件夹或目录路径，都可以使用。

# scala - scala varargs (Any*) 包裹了两次

> ID：12445599
> 
> 赞同：1
> 
> 时间：2012-09-16T08:58:34.040
> 
> 标签：scala, variadic-functions

```
 def main(args: Array[String]) {
      foo("hello")
  }

  def foo(args:Any*){
    bar(args)
  }

  def bar(args:Any *){
    println(args)
  } 
```

看上面的代码，输出是 WrappedArray(WrappedArray(hello))

> 字符串'hello'被包裹了两次，如何避免这种情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:01:09.053

在 的调用中`bar`，这样写：

```
bar(args: _*) 
```

这告诉编译器使用 args `args`，此时它与 a 非常相似`Seq[T]`，并将它们中的每一个分别传递给`bar`，而不是考虑`args`作为接受的重复参数中的第一个`bar`。

# c++ - 从 C++ 仿真中保存和加载数据的有效方法

> ID：12445605
> 
> 赞同：1
> 
> 时间：2012-09-16T08:59:09.723
> 
> 标签：c++, save

我想知道哪些是保存和加载 C++ 数据的最佳方式。我最感兴趣的是保存我在模拟中使用的类和矩阵（不是稀疏的）。现在我只是将它们保存为 txt 文件，但是如果我将一个成员添加到一个类中，我必须修改加载数据的函数（它必须解析并检查 txt 文件中的值），我认为不是理想的。

你一般会推荐什么？（ps 因为我想发布我的代码，所以我真的很想只使用标准 c++ 或可以重新分发的库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:27:17.323

在这种情况下，没有“最好”。最适合您的方法在很大程度上取决于您的情况。但是，让我们举一个例子来让你思考你的细节以及这个兔子洞可以有多深。

如果您绝对肯定必须毫无疑问地尽可能快地保存（并且您愿意付出代价），您可以定义自己的内存管理，将所有对象放入一个常见类型（例如整数）的连续数组中。这使您可以非常快速地将该数组作为二进制数据写入磁盘。您可能需要在模拟中有效地使用线程来加载每个核心/处理器以实时运行。

为什么是一个相当可怕的解决方案？因为它需要大量的工作并且以“优化”的名义冒着许多问题的风险。

1.  它要求您构建自己的内存管理（运算符 new() 和运算符 delete()），这可能需要线程安全。
2.  如果您尝试从该数组加载，则必须使用唯一的非修改构造函数放置新的所有对象，以确保正确设置所有虚拟指针。哦，你必须跟踪每个地址的类型到现在如何做到这一点。
3.  为了与其他系统和二进制版本之间的可移植性，您需要使用实用程序将二进制格式转换为足以跨平台的通用格式（包括重新填充指向其他对象的指针）。

我已经做到了。这是非常不愉快的。我毫不怀疑它仍然存在问题，我在这里只列出了一些。但是，它非常、非常快，而且非常、非常、非常有问题。

您必须根据自己的需要进行设计。通常，第一个需求是“让它发挥作用”。不关心效率，只关心准确持续的事情，并且您在某个时候拥有已知和可访问的信息来执行此操作。此外，您应该封装保存和加载的过程。然后，如果需要“让它变得更好”，您应该能够更改那一点代码，其余的应该可以工作。您甚至可以根据用户需要选择保存格式，而不是您必须为所有用户假设的需要。

鉴于列出的所有假设、优点和缺点，您应该能够详细说明您对这个问题的特殊需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:59:24.220

鉴于性能不是您关心的问题——这是答案的关键部分——Boost Serialization 库是一个很好的答案。

评论中的链接指向文档。阅读教程（这对于您最初想要的东西来说有点过分了，但非常值得）。

最后，由于您主要使用数组矩阵，因此请尝试封装保存和加载的整个过程，以便以后需要更改它，您正在编写一个新的实现并在现有的实现中进行选择。我将 eddedmtime 用于 Boost 序列化的智能不会很好；但是，您可能会发现未来的需求使您转向其他事物或多个其他事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:18:01.100

[C++ 中间件编写器](http://webEbenezer.net)自动创建编组函数。当您将成员添加到类时，它会为您更新编组功能。

# postgresql - psql列出所有表

> ID：12445608
> 
> 赞同：135
> 
> 时间：2012-09-16T08:59:58.113
> 
> 标签：postgresql, psql

我想`liferay`在我的 PostgreSQL 安装中列出数据库中的所有表。我怎么做？

我想`SELECT * FROM applications;`在`liferay`数据库中执行。`applications`是我的 liferay 数据库中的一张表。这是怎么做到的？

这是我所有数据库的列表：

```
postgres=# \list
                              List of databases
Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
 -----------+----------+----------+-------------+-------------+-----------------------
 liferay   | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =Tc/postgres         +
           |          |          |             |             | postgres=CTc/postgres+
           |          |          |             |             | liferay=CTc/postgres
 lportal   | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 postgres  | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 template0 | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(5 rows)

postgres=# 
```

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2012-09-17T08:13:02.027

如果要列出*所有*表，则必须使用：

```
\dt *.* 
```

表示您想要*所有模式中的*所有表。这将包括 中`pg_catalog`的表、系统表和`information_schema`. 没有内置方式可以说“所有用户定义模式中的所有表”；但是，您可以`search_path`在运行`\dt`.

您可能希望以编程方式执行此操作，在这种情况下，`psql`反斜杠命令将无法完成这项工作。[这`INFORMATION_SCHEMA`](http://www.postgresql.org/docs/current/static/information-schema.html)就是救援的地方。列出表格：

```
SELECT table_name FROM information_schema.tables WHERE table_schema = 'public'; 
```

顺便说一句，如果您想查看`psql`响应反斜杠命令的操作，请`psql`使用该`-E`标志运行。例如：

```
$ psql -E regress    
regress=# \list
********* QUERY **********
SELECT d.datname as "Name",
       pg_catalog.pg_get_userbyid(d.datdba) as "Owner",
       pg_catalog.pg_encoding_to_char(d.encoding) as "Encoding",
       d.datcollate as "Collate",
       d.datctype as "Ctype",
       pg_catalog.array_to_string(d.datacl, E'\n') AS "Access privileges"
FROM pg_catalog.pg_database d
ORDER BY 1;
************************** 
```

所以你可以看到它在获取数据库列表时`psql`正在搜索。`pg_catalog.pg_database`同样，对于给定数据库中的表：

```
SELECT n.nspname as "Schema",
  c.relname as "Name",
  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' END as "Type",
  pg_catalog.pg_get_userbyid(c.relowner) as "Owner"
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relkind IN ('r','')
      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
      AND n.nspname !~ '^pg_toast'
  AND pg_catalog.pg_table_is_visible(c.oid)
ORDER BY 1,2; 
```

在可能的情况下，最好使用可移植的 SQL 标准`INFORMATION_SCHEMA`而不是 Pg 系统目录，但有时您需要 Pg 特定的信息。在这些情况下，可以直接查询[系统目录](http://www.postgresql.org/docs/current/static/catalogs.html)，并且`psql -E`可以作为如何查询的有用指南。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-09-16T09:03:55.420

连接到数据库，然后列出表：

```
\c liferay
\dt 
```

反正我就是这样做的。

如果您愿意，可以将这两个命令合并到一行中：

```
\c liferay \dt 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-19T05:09:08.703

要查看公共表，您可以执行

列表表

```
\dt 
```

列出表、查看和访问权限

```
\dp or \z 
```

或者只是表名

```
select table_name from information_schema.tables where table_schema = 'public'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-26T13:43:56.010

在 SQL Query 中，您可以编写以下代码：

```
select table_name from information_schema.tables where table_schema='YOUR_TABLE_SCHEME'; 
```

用 YOUR_TABLE_SCHEME 替换您的表方案；

例子：

```
select table_name from information_schema.tables where table_schema='eLearningProject'; 
```

要查看所有方案和所有表，不需要 where 子句：

```
select table_name from information_schema.tables 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-09T13:26:58.497

一个单行示例是：

```
\dt schemaname.* 
```

在您的场景中：

```
\dt public.* 
```

并获取模式列表：

```
\dn 
```

请注意，这`public`是未指定时的默认架构。引用[文档](https://www.postgresql.org/docs/current/ddl-schemas.html#DDL-SCHEMAS-PUBLIC)：

> 在前面的部分中，我们创建了表而不指定任何模式名称。默认情况下，此类表（和其他对象）会自动放入名为“public”的模式中。每个新数据库都包含这样的模式。

使用`\dt *.*`将输出所有模式中所有表的长列表，包括内部表，例如`pg_catalog`. 以上可以帮助过滤。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-20T11:42:25.247

如果您不需要所有模式中的所有表，这可以在自动化脚本中使用：

```
 for table in $(psql -qAntc '\dt' | cut -d\| -f2); do
      ...
  done 
```

# vim - Vim OmniComplete for D

> ID：12445610
> 
> 赞同：2
> 
> 时间：2012-09-16T09:00:14.263
> 
> 标签：vim, d, omnicomplete

有没有使用 OmniComplete 为 D 提供补全的 Vim 插件？我在谷歌上搜索过，但我一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:38:25.093

您可以使用[基于语法的 omnicompletion](http://vimdoc.sourceforge.net/htmldoc/insert.html#ft-syntax-omni)，只要您有一个有效的语法文件，它就应该可以工作。

从 6.3 或更高版本开始，Vim 应该已经带有 D 的语法文件。如果你使用的是早期版本的 Vim，你可以试试[这个插件](http://www.vim.org/scripts/script.php?script_id=379)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T05:02:27.567

你应该试试[https://github.com/idanarye/vim-dutyl](https://github.com/idanarye/vim-dutyl) 它提供了自动完成，goto-def，显示文档。

# python - 如何获取部分链接文本找到的元素的 href？

> ID：12445612
> 
> 赞同：62
> 
> 时间：2012-09-16T09:00:24.027
> 
> 标签：python, selenium, selenium-chromedriver

我使用 Selenium 和 Chrome 驱动程序：

`links = browser.find_elements_by_partial_link_text('##')`匹配大约 160 个链接。

如果我尝试，

```
for link in links:
    print link.text 
```

有了它，我得到了所有链接的文本：

```
##1
##2
...
##160 
```

链接是这样的：

```
<a href="1.html">##1</a>
<a href="2.html">##2</a>
...
<a href="160.html">##160</a> 
```

如何获取`href`找到的所有链接的属性？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-17T12:32:43.407

调用[`get_attribute`](https://selenium-python.readthedocs.io/api.html?highlight=get_attribute#selenium.webdriver.remote.webelement.WebElement.get_attribute)您找到的每个链接：

```
links = browser.find_elements_by_partial_link_text('##')
for link in links:
    print(link.get_attribute("href")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:18:59.703

[对类似问题的现有答案](https://stackoverflow.com/a/7201409/)似乎可能适用：

认为

> 你的 HTML 只包含那个标签，那么应该这样做：

```
String href = selenium.getAttribute("css=a@href"); 
```

> 您使用该`DefaultSelenium#getAttribute()`方法并传入一个 CSS 定位器、一个`@`符号和您要获取的属性的名称。在这种情况下，您选择`a`并获取其`@href`.

因此，如果链接包含“..blablabla ...”文本，那么您可以通过以下方式找到它：

```
selenium.getAttribute("css=a:contains('..blablabla...')@href"); 
```

# c# - 将一个表的所有行复制到另一个表

> ID：12445613
> 
> 赞同：4
> 
> 时间：2012-09-16T09:00:26.050
> 
> 标签：c#, mysql, sql, sql-server

`MySQL`我在和中有两个数据库`SQL Server`，我想在 中创建表`SQL Server`并将表中的所有行复制`MySQL`到 中的新表中`SQL Server`。

我可以使用以下代码创建与`SQL Server`相同的表`MySQL`：

```
List<String> TableNames = new List<string>();
{ 
    IDataReader reader= 
        ExecuteReader("SELECT Table_Name FROM information_schema.tables WHERE table_name LIKE 'mavara%'",MySql);
    while (reader.Read()) {
        TableNames.Add(reader[0].ToString());
    }
    reader.Close();
}

foreach (string TableName in TableNames) {
    IDataReader reader = 
        ExecuteReader("SELECT Column_Name,IS_NULLABLE,DATA_TYPE FROM information_schema.columns where TABLE_Name='" + TableName + "'",MySql);
    List<string[]> Columns = new List<string[]>();
    while (reader.Read()) { 
        string[] column = new string[3];
        column[0] = reader[0].ToString();
        column[1] = reader[1].ToString();
        column[2] = reader[2].ToString();
        Columns.Add(column);
    }

    reader.Close();

    // create table
    string  queryCreatTables=  "CREATE TABLE [dbo].[" + TableName + "](\n";
    foreach(string[] cols in Columns)
    {
        queryCreatTables +="["+ cols[0] + "] " + cols[2] + " ";
        if (cols[1] == "NO")
            queryCreatTables += "NOT NULL";
        // else
        //   queryCreatTables += "NULL";
        queryCreatTables += " ,\n ";
    }
    queryCreatTables += ")";

    System.Data.SqlClient.SqlCommand smd = 
        new System.Data.SqlClient.SqlCommand(queryCreatTables, MsSql);
    System.Data.SqlClient.SqlDataReader sreader = smd.ExecuteReader();
    sreader.Close(); 
```

但我无法将一个表中的行复制到另一个表中。

对于选择查询，我使用 Idatareader，但我不知道如何将行插入另一个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:23:48.813

要将一个表中的行插入另一个表，请参考以下示例查询

```
 INSERT INTO Store_Information (store_name, Sales, Date)
    SELECT store_name, sum(Sales), Date
     FROM Sales_Information 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:45:57.843

算法如下：

```
1\. For each table in source database
2\.    Get a list of columns for that table
3\.    Create table in destination database
4\.    SELECT * FROM the table in source
5\.    For each row in data
6\.       Generate INSERT statement and execute on destination database 
```

列所需的信息是`Name`、`Type`、`Length`等。

然后通过迭代列来生成插入语句

```
var insertStatement = "INSERT INTO " + tableName + " VALUES( ";
foreach( var column in columns )
    insertStatement += "@" + column.Name + ",";
insertStatement[insertStatement.Length-1] = ')';

var command = new SqlCommand( insertStatement, MsSql );

// iterate over the columns again, but this time set values to the parameters
foreach( var column in columns )
   command.Parameters.AddWithValue( "@"+column.Name, currentRow[column.Name] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:30:57.273

> 但是我在将行从一个表复制到另一个表时遇到了问题。

您可以使用DataAdapter[`SqlDataAdapter.UpdateBatchSize`](http://msdn.microsoft.com/en-us/library/xw5z0hdd%28v=vs.80%29.aspx)对数据库[执行批量更新/插入，](http://msdn.microsoft.com/en-us/library/kbbwt18a%28v=vs.80%29.aspx)以将数据从一个表复制到另一个表。在您使用以下方法从第一个 MYSQL 表中获取所有记录后：

```
//Get the rows from the first mysql table as you did in your question
DataTable mysqlfirstTableRowsTobeCopied = GetDataTableFromMySQLTable(); 
```

然后，您必须创建一个推荐文本，执行以下操作`INSERT`：

```
cmd.CommandText = "INSERT INTO TableName Column_Name, ... VALUES(...)"; 
```

或者您可以使用存储过程：

```
CREATE PROCEDURE sp_BatchInsert ( @ColumnName VARCHAR(20), ... ) 
AS 
BEGIN 
            INSERT INTO TableName VALUES ( @ColumnNamne, ...); 
END 
```

然后：

```
DataTable mysqlfirstTableRowsTobeCopied = GetDataTableFromMySQLTable();

SqlConnection conn = new SqlConnection("Your connection String");
SqlCommand cmd = new SqlCommand("sp_BatchInsert", conn);
cmd.CommandType = CommandType.StoredProcedure;
cmd.UpdatedRowSource = UpdateRowSource.None;

// Set the Parameter with appropriate Source Column Name
cmd.Parameters.Add("@ColumnName", SqlDbType.Varchar, 50,
    mysqlfirstTableRowsTobeCopied.Columns[0].ColumnName);   
...
SqlDataAdapter adpt = new SqlDataAdapter();
adpt.InsertCommand = cmd;
// Specify the number of records to be Inserted/Updated in one go. Default is 1.
adpt.UpdateBatchSize = 20;

conn.Open();
int recordsInserted = adpt.Update(mysqlfirstTableRowsTobeCopied);   
conn.Close(); 
```

此代码实际上是从 codeproject 中有关此主题的完整教程中引用的，您可以参考它以获取更多信息：

*   [多种方式进行多次插入](http://www.codeproject.com/Articles/25457/Multiple-Ways-to-do-Multiple-Inserts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T00:15:19.607

假设您已经有一个数据表，其中包含要与另一个表合并的行...

有两种方法可以做到这一点……再次，假设您已经选择了数据并将其放入新表中。

```
 oldTable.Load(newTable.CreateDataReader());

            oldTable.Merge(newTable); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T09:33:17.943

通常是这样的。您可以直接在 SQL 中执行：`INSERT INTO table FROM SELECT * FROM othertable`;

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-04T10:00:19.930

用于将所有记录插入新表（如果第二个表不存在）

从 Old_Table_Name 中选择 * 进入 New_Table_Name；

用于将所有记录插入第二个表（如果存在第二个表但表结构应该相同）

插入 Second_Table_Name from(Select * from First_Table_Name);

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-12-06T18:11:12.967

以防万一它可以帮助某人，我找到了一种在 C# 中使用 SqlDataAdapter 的简单方法。它会自动检测表的结构，因此您不必枚举所有列或担心表结构的变化。然后在目标表中批量插入数据。

只要这两个表具有相同的结构，这将起作用。（例如，从生产表复制到开发空表。）

```
using(SqlConnection sqlConn = new SqlConnection(connectionStringFromDatabase))
    {
      sqlConn.Open();
      using(var adapter = new SqlDataAdapter(String.Format("SELECT * FROM [{0}].[{1}]", schemaName, tableName), sqlConn))
      {
        adapter.Fill(table);
      };
    }

    using(SqlConnection sqlConn = new SqlConnection(connectionStringDestination))
    {
      sqlConn.Open();
      // perform bulk insert
      using(var bulk = new SqlBulkCopy(sqlConn, SqlBulkCopyOptions.KeepIdentity|SqlBulkCopyOptions.KeepNulls, null))
      {
        foreach(DataColumn column in table.Columns)
        {
          bulk.ColumnMappings.Add(column.ColumnName, column.ColumnName);
        }
        bulk.DestinationTableName = String.Format("[{0}].[{1}]", schemaName, tableName);
        bulk.WriteToServer(table);
      }
    } 
```

# android - 无法使用硬件键盘在 avd 中的 Edittext 中输入

> ID：12445614
> 
> 赞同：1
> 
> 时间：2012-09-16T09:00:29.910
> 
> 标签：android

我无法使用硬件键盘在 android 模拟器中输入文本。我还在模拟器上添加了“键盘支持”，但我仍然无法输入文本。

请帮助我如何启用硬件键盘。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:43:40.410

1.转到 Android SDK Manager
2.从工具中单击管理
AVD 2.选择 AVD 并单击编辑
3.在硬件部分中，单击新建
4.选择属性“键盘支持”并按确定
5.单击“键盘支持”的值列并将其更改为“是”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T06:12:43.913

1.  转到 Android SDK 管理器。
2.  从工具中单击管理 AVD。
3.  选择 AVD 并单击编辑。
4.  在硬件部分，单击新建。
5.  选择属性“键盘支持”，然后按确定。
6.  单击“键盘支持”的值列并将其更改为“是”。
7.  重新启动您的 AVD。

# multithreading - 从信号处理程序访问共享数据

> ID：12445618
> 
> 赞同：6
> 
> 时间：2012-09-16T09:00:56.783
> 
> 标签：multithreading, pthreads, multiprocessing, semaphore

我想知道从信号处理程序访问共享数据是否是个好主意。我的意思是考虑具有单个进程的多进程系统和多线程系统的场景。在多进程系统中，假设我让进程处理特定信号并通过进程更新某些共享变量或内存。我可以从信号处理程序本身做到这一点吗？

但是，对于使用 pthread 的线程，我认为这是不可行的。[http://maxim.int.ru/bookshelf/PthreadsProgram/htm/r_40.html](http://maxim.int.ru/bookshelf/PthreadsProgram/htm/r_40.html). 如本文所述，他们提到它不是异步信号安全的，并建议为此使用 sigwait。我不是为什么它不是异步信号安全的。我的意思是说，我通过线程处理信号并且在信号处理程序路由中。我获取了共享内存的锁来更新它。与此同时，另一个相同类型的信号到达，另一个负责处理它的线程再次执行信号处理程序。这里的信号处理程序对于进程是相同的，但它被多次调用。第二次，它看不到锁并更新/覆盖数据。这是使用共享数据的多线程信号处理程序的问题吗？

我有点困惑，在多进程系统中，每个进程都有一个信号处理程序的副本。但是在多线程系统中，多个线程使用的信号处理程序只有一个副本，不是吗。那么当多个相同类型的信号到达并且我们有两个负责处理它的线程尝试处理它时，它们都会尝试执行同一段处理程序代码吗？这一切如何适应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T15:19:35.023

我通读了您引用的文章，并在***“信号处理程序中的线程”***部分找到了一些有趣的信息。在该部分中，您将看到他们有一个 Posix 函数调用列表，可以从信号处理程序中进行。然后在该列表之后不久，他们提到了以下内容：

> 但是 Pthreads 调用在哪里呢？他们不在这两个列表中！事实上，Pthreads 标准规定，当从信号处理程序调用函数时，所有 Pthreads 函数的行为都是未定义的。如果您的处理程序需要处理与其他线程共享的数据≈缓冲区、标志或状态变量≈它是不走运的。Pthreads 互斥锁和条件变量同步调用不受限制。

注意最后一句话：“Pthreads 互斥和条件变量同步调用是禁止的”

上述可以从信号处理程序中调用的函数描述如下：

> 这些函数具有称为可重入性的特殊属性，它允许进程同时对这些函数进行多次调用。

pthread 同步函数没有称为可重入的特殊属性，所以我想如果这些函数（例如 pthread_mutex_lock() ）被到达的信号中断，那么行为不是“安全的”。

想象一下，您的应用程序调用`pthread_mutex_lock(&theMutex)`并且恰好在那个时刻（即在 pthread_mutex_lock() 函数中）一个信号到达。如果信号处理程序也调用`pthread_mutex_lock(&theMutex)`，则之前的 pthread 调用可能尚未终止，因此无法保证对 pthread_mutex_lock() 的哪个调用会获得锁。因此产生的行为将是未定义/不确定的。

我想从特定线程对 sigwait() 的调用将保证不会`non-reentrancy`中断任何重要的函数调用，从而允许对 pthread 同步函数的调用是“安全的”。

# spring - Spring Glassfish 不会持续存在

> ID：12445620
> 
> 赞同：2
> 
> 时间：2012-09-16T09:01:03.750
> 
> 标签：spring, jpa-2.0, eclipselink, glassfish-3

我使用 Spring 3.0.6、GlassFish 3.1、EJB 3、JPA 2，我的提供者是 EclipseLink (JPA 2.0)

我的 webApplication 有这些配置文件：

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="ejbPU" transaction-type="JTA">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<jta-data-source>tranEnterprise</jta-data-source>    
  <properties>
  <property name="eclipselink.target-server" value="SunAS9"/>
  <property name="eclipselink.logging.level" value="FINEST"/>
  <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.MySQLPlatform"/>
</properties>
</persistence-unit>
</persistence> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop
   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd 
   ">

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="tranEnterprise"/>
</bean>
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceUnitName" value="ejbPU"/>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.glassfish.GlassFishLoadTimeWeaver"/>
    </property>
    <property name="jpaVendorAdapter">
        <bean
            class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="true" />
        </bean>
    </property>
    <property name="jpaDialect">
        <bean
            class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
    </property>
</bean>
<tx:jta-transaction-manager />
<bean id="persistenceAnnotation" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

该项目显示数据，但不将数据保存在数据库中。我搜索了一周，但找不到任何答案。

我的控制器：

```
@EJB
private ContractBeanLocal contractBean;

@Transactional
@RequestMapping(method = RequestMethod.POST)
public String onSubmit(@ModelAttribute("contract") Contract contract)
{
    try
    {
        contractBean.createContract(contract);                
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    return "someThing";
}

@Local
public interface ContractBeanLocal
{
public void createContract(Contract contract);
}

@Stateful
@Local(ContractBeanLocal.class)
public class ContractBean implements ContractBeanLocal {    

    @PersistenceContext(unitName = "ejbPU")
    private EntityManager em;

    @Override
    public void createContract(Contract contract) {
        try {
            em.persist(contract);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

我还尝试不使用 EJB 并使其由 Spring 管理

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
 <persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="JavaApplication2PU" transaction-type="RESOURCE_LOCAL">
  <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
  <class>entity.Contract</class>
 </persistence-unit>
</persistence> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/aop
                        http://www.springframework.org/schema/aop/spring-aop.xsd
                        http://www.springframework.org/schema/tx
                        http://www.springframework.org/schema/tx/spring-tx.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context.xsd">

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="JavaApplication2PU"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver"/>
    </property>
    <property name="jpaVendorAdapter">
        <bean
            class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="true" />
        </bean>
    </property>
    <property name="jpaDialect">
        <bean
            class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/transport2"/>
    <property name="username" value="root"/>
    <property name="password" value="123456"/>
</bean>
<bean id="ContractDaoImpl" class="dao.ContractDaoImpl"/>

<tx:jta-transaction-manager />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource"/>
</bean>
<bean id="persistenceAnnotation"    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
</beans> 
```

* * *

这是合同实体：

```
 @Entity
    @Table(name = "contract")
    @XmlRootElement
    public class Contract implements Serializable {
        private static final long serialVersionUID = 1L;
        @Id
        @Basic(optional = false)
        @Column(name = "contractNumber")
        private String contractNumber;
        @Column(name = "companyName")
        private String companyName;

        public Contract() {
        }

        public Contract(String contractNumber) {
            this.contractNumber = contractNumber;
        }

        public Contract(String contractNumber, String companyName) {
            this.contractNumber = contractNumber;
            this.companyName = companyName;
        }

        public String getContractNumber() {
            return contractNumber;
        }

        public void setContractNumber(String contractNumber) {
            this.contractNumber = contractNumber;
        }

        public String getCompanyName() {
            return companyName;
        }

        public void setCompanyName(String companyName) {
            this.companyName = companyName;
        }

        @Override
        public int hashCode() {
            int hash = 0;
            hash += (contractNumber != null ? contractNumber.hashCode() : 0);
            return hash;
        }

        @Override
        public boolean equals(Object object) {
            // TODO: Warning - this method won't work in the case the id fields are not set
            if (!(object instanceof Contract)) {
                return false;
            }
            Contract other = (Contract) object;
            if ((this.contractNumber == null && other.contractNumber != null) || (this.contractNumber != null && !this.contractNumber.equals(other.contractNumber))) {
                return false;
            }
            return true;
        }

        @Override
        public String toString() {
            return  contractNumber;
        }
    } 
```

* * *

```
package dao;

import java.util.List;
import entity.Contract;

public interface ContractDao
{
    void createContract(Contract contract);

    List<Contract> getAllContract();

    void deleteContract(Contract contract);
}

package dao;

import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import org.springframework.transaction.annotation.Transactional;
import entity.Contract;

public class ContractDaoImpl implements ContractDao
{
@PersistenceContext
private EntityManager entityManager;

    @Transactional
    @Override
    public void createContract(Contract contract)
    {
    try
        {
           entityManager.persist(contract);
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public List<Contract> getAllContract()
    {
        return entityManager.createQuery("SELECT c FROM Contract c where c.removed <> 1").getResultList();
    }

    @Transactional
    @Override
    public void deleteContract(Contract contract)
    {
        entityManager.remove(contract);
    }
}

package javaapplication2;

import dao.ContractDao;
import entity.Contract;
import java.util.List;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class JavaApplication2
{

    public static void main(String[] args)
    {
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("config/applicationContext.xml");
    ContractDao contractDao = (ContractDao) applicationContext.getBean("ContractDaoImpl");

    Contract contract = new Contract();
    contract.setCompanyName("Freddy");
    contract.setContractNumber("Freddy");
    contractDao.createContract(contract);
    System.out.println("Contract is successfully created");
    System.out.println("Contract Number is: " + contractDao.getAllContract());
    }
} 
```

我可以获取数据，但是当我尝试持久化时，将引发以下异常：

```
java.lang.IllegalArgumentException: Object:  contractNumber= Freddy  is not a known entity type.
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4158)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at  org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(Exte ndedEntityManagerCreator.java:365)
at $Proxy8.persist(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy8.persist(Unknown Source)
at dao.ContractDaoImpl.createUser(ContractDaoImpl.java:36)
at javaapplication2.JavaApplication2.main(JavaApplication2.java:28) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:45:07.987

这听起来像是一个类加载器问题，很可能是由于您的 Spring 配置，但我不确定您的配置有什么问题。你有些如何让两个不同的类加载器加载类。

您可以在没有 Spring 的情况下对其进行测试以确认这一点。

您是否正在重新部署到实时服务器？尝试重新启动服务器，您可能部署了旧的持久性单元。确保在取消部署时关闭 EntityManagerFactory。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:10:52.043

```
<tx:jta-transaction-manager /> 
```

这条线对我来说看起来很狡猾。

难道不应该

```
<tx:annotation-driven/> 
```

?

当您说“不在数据库中保留数据”时，它会引发任何异常吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T10:31:29.853

你需要打开一个事务（不是只读的）来保存一些东西：

例如：

```
@Controller
@RequestMapping...
public class  MyController {

    @Transactional  //<---------- That is what you need to add.
    @RequestMapping
    public ModelAndView updateSomething(SomethingData somethingData, int somethingId) {
       SomethingEntity entity = somethingDao.loadById(somethingId));
       entity.setX(somethingData.getX());
       ...
    }
} 
```

并将这一行添加到您的 spring 上下文配置中

```
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

# mysql - 使用文件名和日期比较优化 Mysql 选择查询

> ID：12445622
> 
> 赞同：0
> 
> 时间：2012-09-16T09:01:14.993
> 
> 标签：mysql

我需要帮助优化 Mysql 查询：

我有两张桌子：

```
jos_mp3_file(id,path,version_timestamp)

jos_mp3_licenses(id,s3_url,cdate) 
```

每个大约有 20,000 条记录。

**“jos_mp3_file.path** ”列中的记录，可能在文件前面有一个文件夹，如下所示：**'folder/file1.mp3'**。

我需要做的是找到所有记录，其中：1\. “jos_mp3_file.path”与“ **jos_mp3_licenses.mp3_url** **”**具有相同的文件名（以某种方式通过文件夹部分）2\. **“jos_mp3_file.version_timestamp”**大于**jos_mp3_licenses。 cdate**（都是*日期*时间数据类型）

 *******到目前为止，我有这个查询，但由于某种原因，它需要很长时间才能运行（5-10 分钟）

```
SELECT jos_mp3_licenses.s3_url, jos_mp3_licenses.cdate,  jos_mp3_file.path,jos_mp3_file.version_timestamp
FROM jos_mp3_file, jos_mp3_licenses 
WHERE SUBSTRING_INDEX( jos_mp3_file.path , '/', -1 ) = jos_mp3_licenses.mp3_url
AND unix_timestamp(jos_mp3_file.version_timestamp) > unix_timestamp(jos_mp3_licenses.cdate) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:16:00.177

您的查询需要很长时间才能运行，可能是因为它正在执行嵌套循环连接。也就是说，它将一个表中的每条记录与另一个表中的每条记录进行比较。有 20k 行，这就是 4 亿次操作。

通常，当连接表时，您希望对一个或多个字段执行相等操作。尽管您的字段具有相等性，但我推测`SUBSTRING_INDEX()`出于优化目的而忽略了该函数。

最好的建议是将您想要的名称提取到表中的新列中。这将允许优化查询。然后，您可以通过在该列上添加索引来获得更好的性能。

我还建议将两个日期时间值的 unix_timestamp 也添加为单独的列。如果您随后使用文件名和适当日期的 unix 时间戳在两个表上构建索引，您应该有一个高度优化的查询。*******

# eclipse - 错误：无法在 Eclipse 中找到或加载主类

> ID：12445625
> 
> 赞同：7
> 
> 时间：2012-09-16T09:01:55.943
> 
> 标签：eclipse

我在 Eclipse 4.2 中运行项目时遇到问题。我有一个 Java 程序，其中包含一个名为 Conversion 的类。Eclipse 可以很好地构建项目。我可以通过导航到工作区中项目文件夹中的 /bin/ 并键入`java Conversion`.

但是，当我尝试从 Eclipse 运行程序时，我会显示`Error: Could not find or load main class Conversion`在控制台中。

项目名称为`10.12.12: Project`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T09:13:07.907

该项目似乎不是类路径的一部分。
签入您`Run Configuration->Classpath`的项目，如果您的项目不存在，则将其添加到`User Entries`.

![在此处输入图像描述](../Images/dc1e3882746cc03db4601da4d2a3fed7.png)

![在此处输入图像描述](../Images/6873f0ccf6cd39bd14b57b4f4a65c832.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T17:30:08.557

Eclipse 不支持在项目名称中使用冒号或连字符。冒号似乎打破了它处理编译的方式。

该问题可以通过不在项目名称中使用冒号来解决。

如评论中所述，这可能是 Java 6 的错误。它已在 Java 7 中修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T16:44:00.823

我理解'：'可能是这里的情况，但我有一个可能对其他人有帮助的切题问题。

我继承了一个项目并且遇到了类似的问题。Dev/Debugging 在 Mac/Win 上，TST/UAT/PRD 环境是 RHEL。有人从字面上复制了 systemd 命令行并在 Debug 参数中留下了一个“\”。这很难找到的原因是这些行在 -D 处换行，所以 \ 是一行的最后一个字符，这在 Linux 下看起来不错。我是这样修的...

就我而言，它是...

```
-Dlog4j.configurationFile=file:<PATH>/log4j2.xml \
-DCONFIG_PATH=...

Right-Click Project -> Run-As/Debug-As, click the Arguments Tab.
In the VM Arguments, look for \. 
```

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T11:04:04.850

确保在 Eclipse 中正确配置了构建路径。外部 JAR 文件的路径可能有误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-11T07:42:52.737

这个问题将累积保存文件名一个名称和编译时间你有另一个名称。到时候你就会遇到这个问题。检查java文件名一次。

# c# - 使用 Gtk 检测双击#

> ID：12445628
> 
> 赞同：2
> 
> 时间：2012-09-16T09:02:20.430
> 
> 标签：c#, mono, mouseevent, gtk#, double-click

我在 monodevelop 3.0.4.6 上使用 GTK#，在 windows 上，我`Gtk.EventBox`连接到`ButtonPressEventHandler`检测单击`(EventType.ButtonPress)`，但双击 ( `EventType.TwoButtonPress`) 永远不会触发，有人知道为什么吗？我什至尝试`"[GLib.ConnectBefore]"`在我的处理程序方法上添加属性，但它没有改变任何东西。我尝试了一个`TreeView`，一个按钮和一个事件框，所有那些检测到单击但没有双击的...

* * *

我的代码示例：

```
// Somewhere in the constructor :
eventBox.ButtonPressEvent += new ButtonPressEventHandler(myButtonPressHandler);

// The called method
private void myButtonPressHandler(object obj, Gtk.ButtonPressEventArgs a)
{
    EventButton ev = a.Event;
    // single click
    if (ev.Type == EventType.ButtonPress)
    {
        MyLogger.output("1");
    }
    // double click
    else if (ev.Type == EventType.TwoButtonPress)
    {
        MyLogger.output("2");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T22:18:12.907

您的代码示例稍作修改，在我的机器上运行良好。我创建了一个名为“eventbox1”的事件框并捕获了信号“ButtonPressEvent”。唯一的区别是我检查收到的事件是否是双击的方式。我还确保发送了双击事件（参见第一行），但在我的情况下，它并不是真正需要的，它仍然有效。

这是在我的机器上运行并捕获双击的代码：

```
// The following line is may not be needed but is here to show how to do it
eventbox1.GdkWindow.Events = eventbox1.GdkWindow.Events | Gdk.EventMask.ButtonPressMask;

protected void OnEventbox1ButtonPressEvent (object o, ButtonPressEventArgs args)
{
    if( ((Gdk.EventButton)args.Event).Type == Gdk.EventType.TwoButtonPress)
        System.Media.SystemSounds.Beep.Play (); // Play a sound if this is double-click
} 
```

想一想，如果您的系统上仍然没有收到双击事件，是不是您的系统设置为忽略双击？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:23:23.010

这是Mono 中包含的 GTK+ 版本中的[一个已知错误](https://bugzilla.xamarin.com/show_bug.cgi?id=2951)。如果您在 Windows 上使用 .NET 运行时运行您的应用程序，它会正常工作，因为用于 .NET 的 GTK# 捆绑了不同版本的 GTK+。

# ios - 核心数据：从 3 个实体中获取对象并按日期排序？

> ID：12445632
> 
> 赞同：0
> 
> 时间：2012-09-16T09:02:56.510
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我可以使用一些帮助来解决这个难题。

1）我想从Core-Data中的3个实体（'A'，'B'，'C'）中获取对象（它们都有不同的数据类型，除了'date'） - 不知何故将它们放在一个大的提取中？他们应该与新实体“D”有关系吗？

2）稍后，我想按日期对大数据进行排序（但如果我有整个数据，我认为这对我来说不是问题）。

因此，如果有人可以帮助我指出 1)，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:19:04.527

这是一个简单的方法，易于验证和 - 如果需要 - 调试：

1.  进行 3 次不同的提取，每个实体一次。
2.  将结果添加到数组中。
3.  按日期对数组进行排序。

# java - Java中的特殊字符

> ID：12445635
> 
> 赞同：2
> 
> 时间：2012-09-16T09:03:08.067
> 
> 标签：java, character-encoding, message

如何在java中使用特殊字符？它们属于 Cp1252 字符编码。我尝试在消息中使用它们，但我无法使用它们。

像这样的字符：“︻ー┳═デ”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:13:45.073

[使用相关的 UTF 值，例如在http://www.fileformat.info/info/unicode/char/search.htm](http://www.fileformat.info/info/unicode/char/search.htm)上查找 'デ'会给出 \u30C7 的值，因此您可以：

```
System.out.println( "\u30C7" );  // as string

System.out.println( '\u30C7' ); // as char 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:07:26.837

当您在 Java 代码中使用带有特殊字符的字符串字面量时，您还必须告知 Java 编译器 Java 文件本身是用哪种编码方式编码的。

假设您编辑了 Java 文件（包含日语文本）并将其保存为 UTF-8 文件。然后，您*必须*告诉编译器将源文件视为 UTF-8 文档：

`javac -encoding UTF-8 file1 file2 ...`

否则，Java 编译器将假定 Java 文件使用操作系统的默认编码进行编码，这不一定是您希望它执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:19:16.883

您可以环绕`PrintWriter`,`System.out`显式设置字符集。

```
final String charset = "UTF-8";
PrintWriter out = null;
try {
    out = new PrintWriter(new OutputStreamWriter(System.out, charset), true);
} catch(UnsupportedEncodingException e) {
    e.printStackTrace();
} 
```

至于`?`字符显示 - 这实际上取决于您输出标准输出流的位置。在标准的 Ubuntu 终端中 - 它可能看起来不错（我可以稍后对其进行测试）。但是，在 Windows 上`cmd`，您应该手动设置代码页`Chcp`并提供这些字符附带的字体。

Eclipse 也是如此，我相信它的控制台字符集是 UTF-8，但如果你没有带有日文字符的字体，它对你没有多大帮助。

# javascript - 如何获取 URL 的一部分并将用户重定向到包含该 URL 部分的 URL？

> ID：12445638
> 
> 赞同：0
> 
> 时间：2012-09-16T09:03:31.203
> 
> 标签：javascript

我想创建一个运行 javascript 的书签。它将从我使用的游戏论坛中获取 URL 的一部分，并将用户带到它的编辑页面。

例如，帖子的网址可能是这样的 - [http://www.roblox.com/Forum/ShowPost.aspx?PostID=78212279](http://www.roblox.com/Forum/ShowPost.aspx?PostID=78212279)

你看到 PostID 位了吗？我想获取该号码并将用户重定向到此：http://www.roblox.com/Forum/EditPost.aspx?PostID=[NUMBER GOES HERE]

所以我想获取一部分url并将其放入PostID中。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:17:40.197

使用 Javascript：

```
document.location = document.location.href.replace('ShowPost', 'EditPost'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:19:11.470

这是您的书签：

```
<a href="javascript:location.href='EditPost.aspx'+location.search" onclick="alert('Drag this to your bookmarks bar');">Edit Post</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:19:45.420

URL 的查询字符串可通过`window.location.search`. 所以，如果你在页面上`http://www.roblox.com/Forum/ShowPost.aspx?PostID=78212279`

```
var query = location.search; // ?PostID=78212279 
```

现在我们需要将查询字符串拆分为键值对。每个键值对由 分隔，一对中的`&`每个键和值由 分隔`=`。我们还需要考虑到键值对也编码在查询字符串中。这是一个函数，它将为我们处理所有这些并返回一个对象，其属性表示查询字符串中的键值对

```
function getQueryString() {
    var result = {},
        query= location.search.substr(1).split('&'),
        len = query.length,
        keyValue = [];

    while (len--) {
        keyValue = query[len].split('=');

        if (keyValue[1].length) {
            result[decodeURIComponent(keyValue[0])] = decodeURIComponent(keyValue[1]);
        }
    }
    return result;
} 
```

现在在有问题的页面上使用它，我们可以`PostID`在查询字符串中获取

```
var query = getQueryString();

query.PostID; // 78212279 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T09:21:56.023

您可以使用正则表达式。

```
var re = /^https?:\/\/.+?\?.*?PostID=(\d+)/;

function getPostId(url) {
    var matches = re.exec(url);
    return matches ? matches[1] : null;
} 
```

**[演示](http://jsfiddle.net/f0t0n/Axd3r/)**

# python - NDB查询祖先重复的结构化属性

> ID：12445639
> 
> 赞同：0
> 
> 时间：2012-09-16T09:03:33.403
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

我正在测试以下对象：

```
pk = ndb.Key(League, 'Premier League', 'Season', '2012/13')
o = Team(
    id = 'Chelsea',
    name ='Chelsea',
    leagues = [
       TeamInLeague(
           parent = pk,
           position = 1,
       ),],
)
o.put() 
```

并且以下测试失败`AssertionError: 0 != 1`：

```
q = Team.query(ancestor=pk)
self.assertEqual(q.count(), 1) 
```

我还尝试了以下测试：

```
q = Team.query(TeamInLeague(ancestor=pk))
self.assertEqual(q.count(), 1) 
```

它失败了`AttributeError: type object 'TeamInLeague' has no attribute 'ancestor'`。

有没有办法通过结构化属性的父级查询？还是我做错了？我从[文档](https://developers.google.com/appengine/docs/python/ndb/overview)中了解到我在创建时添加了父属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:23:23.767

你不能使用祖先关系来做你想做的事。

事实上，您在创建团队类时并没有提供父键。我想您希望以 League 对象作为父对象来创建 Team 对象？

看起来像这样：

```
league_k = ndb.Key(League, 'Premier League', 'Season', '2012/13')
o = Team(
    id = 'Chelsea',
    name ='Chelsea',
    parent = league_k
)
o.put() 
```

但是，像这样，您的数据模型中会存在缺陷。团队等级将永远与联赛联系在一起。由于联盟显然包含一个赛季，因此下个赛季您的球队将无法进入。

最好使用多对多关系，因为您已经从示例代码开始。这将涉及创建一个辅助类 TeamInLeague，就像您已经做过的那样。然后，您可以使用普通查询（不是祖先查询）来确定哪个球队属于哪个联赛。但是，在这种情况下，我会考虑创建一个特殊的 TeamInLeague 类。这在概念上比使用重复属性，尤其是重复的结构化属性更清晰。

此外，您不需要在构造函数中指定所有对象属性。这不是 jQuery。在许多情况下，在创建对象之后和 put() 之前创建对象关系更具可读性。

您的代码如下所示：

```
league_k = ndb.Key(League, 'Premier League', 'Season', '2012/13')
team = Team(id = 'Chelsea', name ='Chelsea')
o.put()
team_in_league = TeamInLeague(team=team.key(), league=league_k, pos=1)
team_in_league.put() 
```

# iphone - 在同一文件中的 xCode 中显示/隐藏视图？

> ID：12445640
> 
> 赞同：3
> 
> 时间：2012-09-16T09:03:45.647
> 
> 标签：iphone, objective-c, ios

如何在同一个文件 .xib 中使用 xCode 显示和隐藏视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:12:56.813

**以编程方式**设置 YES 以隐藏视图否则 NO

```
yourView.hidden=YES; 
```

或者，如果您想在**.xib**文件中执行此操作，则在**视图**部分的**属性检查器中，在****绘图**复选标记下隐藏以隐藏视图

 ****这是你的意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:29:32.977

将 View Controller A 推到 UINavigationController 上开始。当用户单击视图 A 中的按钮时，将视图控制器 B 推到导航控制器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:19:39.387

您还可以使用更改 alpha 值`[myView setAlpha:0.0f];`

如果你想提供淡入淡出效果，这可以在动画块内使用 - alpha 值将随着动画的持续时间而变化。****

# django - 如何保存和刷新用户（管理员）的 Facebook 访问令牌

> ID：12445648
> 
> 赞同：0
> 
> 时间：2012-09-16T09:04:50.253
> 
> 标签：django, facebook, facebook-graph-api, fandjango

我正在考虑为 django 中的博主实现[Facebook Wordpress 插件](http://developers.facebook.com/wordpress/)（使用[Fandjango](http://fandjango.readthedocs.org/en/latest/index.html)和[Facepy](http://facepy.readthedocs.org/en/latest/index.html)）。

再具体一点：

项目管理员/开发人员将是唯一的用户。因此，应用程序需要`/friend_id/feed`在后台自动执行对管理员的调用。

为此，我只需要存储管理员的访问令牌并在需要时使用它..

现在，我有一些问题需要解决：

1.  如何在没有管理员干预的情况下自动过期时刷新管理员的访问令牌

实际上，我们可以存储访问令牌（我的意思是安全地）。我在某处读到它不可能（不确定信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:59:32.693

如果用户授权这是一个应用程序，具有权限`publish_stream`（将故事发布到用户及其朋友的新闻源）和`user_likes`（有权访问用户“喜欢”的页面），您可以使用：

`https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials`

创建应用访问令牌。由于这些不经常更改，因此您可以根据需要存储它，但是每次都提出上述请求可能是明智的，这样万一它*确实*发生了变化，您就会受到一定的保护。

然后，使用 Graph API、JS SDK 或 PHP SDK 来发布故事，这非常简单。

# ruby-on-rails - 将前端与后端分开的铁轨脚手架

> ID：12445656
> 
> 赞同：0
> 
> 时间：2012-09-16T09:05:49.617
> 
> 标签：ruby-on-rails, architecture, model, scaffolding

首先，我只在铁轨上使用过脚手架。我想要做的是我想将 CRUD 中的 R 分离到不同的路由，这样前端就只有 R，而 CRUD 的其余部分在后端。

为了实现这一点，我有两个选择，为同一个模型生成两个脚手架，或者为前端部分生成一个小型控制器和视图。哪个选择会更好？

可能我也可以使用单个控制器使用多个布局，但我认为控制身份验证会很麻烦，对吗？

我的网站不会太复杂，将来也不会。

由于我想使用设计进行身份验证，我认为使用 2 个控制器和 2 个视图用于同一个 mddel 不会很复杂。

如果我错了，请纠正我。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:18:53.407

据我了解，您不希望为您的用户提供所有 CRUD 操作。我不确定您为同一模型生成两个脚手架是什么意思。

但是，是的，根据您给出的要求，您应该可以为模型生成两个控制器/视图。

但是，如果您使用 ActiveRecord 并且想要后端/管理功能，您可能需要查看[active_admin](https://github.com/gregbell/active_admin)。它会自动生成应用程序的管理部分，这非常有用。

另请查看[active_admin railscast](http://railscasts.com/episodes/284-active-admin)。

# android - 如果 sqlite 记录超过 5，应用程序将强制关闭

> ID：12445658
> 
> 赞同：0
> 
> 时间：2012-09-16T09:05:59.193
> 
> 标签：android, sqlite

我正在开发一个构建目录应用程序，在进行地址反向查找时，代码对于前 5 条记录可以正常工作，但会因错误而崩溃

> 'android.database.CursorIndexOutOfBoundsException: 请求索引 0，大小为 0'

我已经记录了记录数和列索引。表中的前 5 条记录产生了预期的结果，但是，任何超过索引计数的记录都会崩溃。

这是活动的代码：

```
public class AddressReverse extends Activity implements TextWatcher 
{
AutoCompleteTextView actv;
String address[];
private ArrayList<String> results = new ArrayList<String>();
private SQLiteDatabase db;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.address_reverse);

    DatabaseHelper helper = new DatabaseHelper(this.getApplicationContext());
    db = helper.getWritableDatabase();
    Cursor c = db.rawQuery("SELECT address FROM buildings", null);

    if (c!=null)
    {
        if (c.moveToFirst())
        {
            do
            {
                String address = c.getString(c.getColumnIndex("address"));
                results.add(address);
                Log.d("Cursor count", c.getCount()+"");
                Log.d("Cursor Index", c.getColumnIndex("address")+"");
            }
            while (c.moveToNext());
        }
        c.close();
    }

    actv = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
    actv.addTextChangedListener(this);
    actv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, results));

    actv.setOnItemClickListener(new OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            String address = ((TextView)view).getText().toString();
            Intent i =new Intent(getApplicationContext(), BuildingDetails.class);
            i.putExtra("building", address);
            startActivity(i);
        }

    });

}

@Override
public void afterTextChanged(Editable arg0) {
    // TODO Auto-generated method stub

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

}} 
```

有什么想法吗？谢谢

编辑：继承人的崩溃日志：

```
E/AndroidRuntime( 8952): FATAL EXCEPTION: main
E/AndroidRuntime( 8952): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dynamite.bible/com.dynamite.bible.BuildingDetails}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
E/AndroidRuntime( 8952):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2182)
E/AndroidRuntime( 8952):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2207)
E/AndroidRuntime( 8952):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
E/AndroidRuntime( 8952):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
E/AndroidRuntime( 8952):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 8952):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 8952):    at android.app.ActivityThread.main(ActivityThread.java:4899)
E/AndroidRuntime( 8952):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 8952):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 8952):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime( 8952):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
E/AndroidRuntime( 8952):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 8952): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
E/AndroidRuntime( 8952):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:418)
E/AndroidRuntime( 8952):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
E/AndroidRuntime( 8952):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
E/AndroidRuntime( 8952):    at com.dynamite.bible.BuildingDetails.onCreate(BuildingDetails.java:40)
E/AndroidRuntime( 8952):    at android.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime( 8952):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime( 8952):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2136)
E/AndroidRuntime( 8952):    ... 11 more
W/ActivityManager(  618):   Force finishing activity com.dynamite.bible/.BuildingDetails
W/ActivityManager(  618):   Force finishing activity com.dynamite.bible/.AddressReverse 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:11:55.490

我认为问题在于您关闭了光标！尝试通过添加让 Activity 管理您的光标

```
startManagingCursor(c); 
```

到你的`onCreate()`方法。

# facebook-graph-api - 用某些词搜索 Facebook 状态

> ID：12445664
> 
> 赞同：0
> 
> 时间：2012-09-16T09:07:00.147
> 
> 标签：facebook-graph-api, search

我正在尝试制作一个桌面应用程序，它可以从使用它的用户的朋友发布的帖子/状态中搜索包含某些单词的状态。我设法对其进行了身份验证并获取了用户访问令牌（如果这有帮助的话），所以我对身份验证过程没有任何问题。

问题是：我需要使用什么 URL 来搜索包含这些单词的状态？我试图在互联网和 Stack Overflow 中寻找解决方案，但没有成功。

我也已经有权查看他们（朋友）的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:26:40.057

Facebook 不允许你轻易做到这一点。他们根本不给开发人员这些选项，因为他们想限制数据挖掘应用程序 - 只是尽可能多地提取数据的应用程序。

您需要做的是提取用户所有朋友的所有帖子和状态，然后手动扫描它们以查找您正在搜索的关键字。这是一个密集的过程，您将向Facebook 提出**大量**请求。

# java - 不能在 FilterRowSet 上使用指针？

> ID：12445666
> 
> 赞同：1
> 
> 时间：2012-09-16T09:07:35.277
> 
> 标签：java, jdbc, rowset, cachedrowset

我正在尝试使用 FilterRowSet 从数据库查询中过滤适当的值。这是我的代码：

```
// Initialize
FilteredRowSet rowset = new FilteredRowSetImpl();

// Set the query string
rowset.setCommand("SELECT * FROM student");
rowset.setUrl("jdbc:mysql://127.0.0.1/test");
rowset.setUsername("root");
rowset.setPassword("");

// Execute to get a result set
rowset.execute();

System.out.println(rowset.first()); // Output: true
rowset.setFilter(new MyStringFilter("matcher", "column_name")); // Add condition to my filter rowset
System.out.println(rowset.first()); // Output: false 
```

问题是在设置过滤条件后无法设置行集的指针，这使得以后无法解析它（或类似的东西）。

在使用 FilteredRowSet 类时，这是一个错误还是我不知道的东西？

# android - Android，在我的 Facebook 墙上发布消息时出现问题

> ID：12445669
> 
> 赞同：0
> 
> 时间：2012-09-16T09:08:39.233
> 
> 标签：android, facebook, sdk, sharing

我正在使用 Facebook SDK，我想在我的墙上发布消息。我上网已经快两天了，但我没有成功找到我的问题。让我说一下我做了什么。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "Try to create activity...");

        // Close activity if app id is not specified.
        if (FACEBOOK_APPID == null  ||  FACEBOOK_APPID == "") {
            Log.e(TAG, "Facebook Applicaton ID must be specified before running this screen.");
            closeActivity();
        }

        // Getting extra info which is passed by caller activity.
        // If we are here by mistake(Caller didn't send required parameter) close activity.
        Bundle extras = getIntent().getExtras();
        if(extras == null) {
            Log.i(TAG, "No data passed to this activity. Activity closed.");
            closeActivity();
        }
        // Get Message
        message = extras.getString("FB_WALLPOST");
//        Log.i(TAG, "message>>> " + message);

        mFacebook = new Facebook(FACEBOOK_APPID);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);

        SessionStore.restore(mFacebook, this);
        SessionEvents.addAuthListener(new SampleAuthListener());
        SessionEvents.addLogoutListener(new SampleLogoutListener());

//        mFacebook.dialog(FacebookActivity.this, "feed", params, new SampleDialogListener());

        Thread thread = new BasicThread();
        thread.start();

    } 
```

根据我的研究，我发现`Facebook.dialog`不能使用。这就是它被注释掉的原因。我还发现我们需要使用`Facebook.request`而不是那个。我`Note that this method blocks waiting for a network response, so do not call it in a UI thread.`在 SDK 中找到了它的实现。因此，我创建了另一个线程来处理发布过程。

当线程启动时，将调用以下方法。

```
public class BasicThread extends Thread {
    public void run() {
        try{
            Bundle parameters = new Bundle();
            parameters.putString("message", "Text is lame. Listen up:");
            parameters.putString("name", "Name");
            parameters.putString("link", "http://www.google.com");
            parameters.putString("caption", "Caption");
            parameters.putString("description", "Description");

            String  response = mFacebook.request("me/feed",parameters,"POST");
            Log.v("response", response);
        }
        catch(Exception e){}
    }
} 
```

那些提出此代码的人被告知该方法对他们来说很好。但是，我不知道为什么它对我不起作用。

logcat 中的响应：

```
09-16 17:06:21.860: D/Facebook-Util(26652): POST URL: https://graph.facebook.com/me/feed
09-16 17:06:23.350: V/response(26652): {"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

任何建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:45:08.113

但是，没有发送访问令牌，是吗？尝试类似：

```
String token = getAccessToken();

if (token){
    parameters.putString("access_token", token);
    String response = mFacebook.request("me/feed",parameters,"POST");
} else {
    // Log the user in
} 
```

# iphone - iPad 和 iPhone 不显示我的网站背景

> ID：12445673
> 
> 赞同：1
> 
> 时间：2012-09-16T09:08:46.957
> 
> 标签：iphone, html, css, ipad, background

在 iPad 和 iPhone 上，我的网站背景不显示。在其他所有浏览器上都可以正常工作（Safari、Chrome、IE 和 Mozilla）

我的CSS代码是：

```
background:url(../photos/shutterstock2.jpg);
background-size:2800px 1500px;
background-repeat:no-repeat; 
background-color: #94C5EB; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:44:53.933

试试这个：

```
html { 
    background: url(../photos/shutterstock2.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    background-color: #94C5EB;
} 
```

多亏了 CSS3 中的 background-size 属性，我们可以纯粹通过 CSS 来做到这一点。我们将使用 html 元素（比 body 更好，因为它总是至少是浏览器窗口的高度）。我们在其上设置了一个固定且居中的背景，然后使用设置为 cover 关键字的 background-size 调整其大小。

**这应该给你一个很棒的和进步的 CSS3 方式！**

# ruby-on-rails - 需要另一个特定模型的多对多对多关系

> ID：12445675
> 
> 赞同：0
> 
> 时间：2012-09-16T09:08:55.890
> 
> 标签：ruby-on-rails, database-design, activerecord, many-to-many

我通过*Supply* - 和*Origin - 模型在***Supermarket**、**Product**和**Brand**之间建立了多对多的关系。我还想存储我在超市中拥有的特定产品-品牌-组合。我想到了另一个模型（我把它叫做我要存储的地方，和.**`Specific_Combination``:supermarket_id``:product_id``:brand_id`**

 **```
class Supermarket < ActiveRecord::Base
  has_many :supplies
  has_many :products, :through => :supplies
end

class Supply < ActiveRecord::Base  
  belongs_to :product  
  belongs_to :supermarket  
end

class Product < ActiveRecord::Base
  has_many :supplies
  has_many :supermarkets, :through => :supplies

  has_many :origins
  has_many :brands, :through => :origins
end

class Origin < ActiveRecord::Base
  belongs_to :products
  belongs_to :brands
end

class Brand < ActiveRecord::Base
  has_many :origins
  has_many :products, :through => :origins
end 
```

现在我认为我可以用来存储特定产品品牌组合的类

```
class Specific_Combination < ActiveRecord::Base
  # to show which columns I would use:
  attr_accessible :supermarket_id, :product_id, :brand_id
end 
```

*   这是一个合适的方法吗？
*   我必须如何对往返的关系进行建模`Specific_Combination`？
*   我将如何访问（创建...）中的项目`Specific_Combination`？
*   更好的方法（标准化）会是什么样子？

**编辑**

```
class Supply < ActiveRecord::Base  
  belongs_to :origin  
  belongs_to :supermarket  
end

class Product < ActiveRecord::Base
  has_many :origins
end

class Origin < ActiveRecord::Base
  belongs_to :product
  belongs_to :brands
end

class Brand < ActiveRecord::Base
  has_many :origins
end

class Supermarket < ActiveRecord::Base
  has_many :supplies
  has_many :origins, :through => :supplies

  # my attempt to create an array of names of supermarkets
    def self.to_be_chosen
      chosen_supermarket = Array.new
      Supermarket.find_each do |supermarket|
        chosen_supermarket << supermarket.name
      end
    return chosen_supermarket
    end
end 
```

**/编辑**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:58:05.347

在这里，我可能有供应属于原产地而不是产品。

另外，想想你是否需要SpecificCombination。你打算用它做什么操作？您要列出数据库中的所有特定组合吗？您要搜索以找到特定的吗？你要创造一个新的组合吗？

然后想想这些操作是否可以简单地用其他类来完成？

```
class Supermarket < ActiveRecord::Base
  has_many :supplies
  has_many :origins, :through => :supplies

  def self.choice
    Supermarket.all.map { |supermarket| [ supermarket.name, supermarket.id ] }
  end
end

end

class Supply < ActiveRecord::Base  
  belongs_to :origin
  belongs_to :supermarket  
end

class Origin < ActiveRecord::Base
  belongs_to :supplies
  belongs_to :brands
end

walmart = Supermarket.create(:name => "Walmart");

cornflakes = Product.create(:name => "Corn Flakes");
kellogs = Brand.create(:name => "Kellog's");
walmart.origins.create(:product_id => cornflakes, :brand_id = kellogs) 
```**

# c++ - 使用 C++ 和 LLVM JIT 的“实时”代码和快速原型设计？

> ID：12445676
> 
> 赞同：11
> 
> 时间：2012-09-16T09:09:27.557
> 
> 标签：c++, compilation, real-time, llvm, jit

您可能已经看过[Bret Victor 的“实时”JS IDE](http://vimeo.com/36579366)，或者它启发的一些[替代实现](http://www.kickstarter.com/projects/ibdknox/light-table)，它们扩展到其他语言，但仍然保留在基于 VM 的语言中。

然而，昨天，我偶然发现[了同样的概念，它应用在了很好的旧 C++](http://www.youtube.com/watch?v=imkVkRg-geI)中，这要归功于 LLVM。仍然是一个非常早期和不成熟的实施，但有很大的潜力。

我真的很好奇它的实现，但是作者已经并且可能不会将它公开。

所以我的问题是，如果有人知道如何实现类似功能的资源，我的意思是几乎瞬时的编译和两个连接，提供代码的实时反馈，允许视觉部分更改甚至生成和预览附加代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:32:04.940

名为“Cling”的基于 clang 的 C/C++ 解释器可能是相关的一段代码。查看它如何用于实时构建 GUI：[http ://www.youtube.com/watch?v=BrjV1ZgYbbA](http://www.youtube.com/watch?v=BrjV1ZgYbbA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T07:03:39.007

Linux：如果有人想要一种简单的方法来几乎实时地测试快速 C/C++ 代码，您可以使用我组装的这段代码：

```
#!/bin/bash
#Requires: inotify-tools
################################
# Adjust values:
terminal="xterm"
editor="vim"
compiler="clang++"
################################
if [[ $1 == "" ]]; then
    echo "Usage: $0 example.cpp";
    exit
fi
file_to_edit=$1
file_output=${file_to_edit%%.*}
(while(true); do 
    change=$(inotifywait -q -e close_write,moved_to,create .);
    change=${change#./ * }
    if [ "$change" = "$file_to_edit" ]; then
        ($compiler $file_to_edit -o $file_output);
    fi
done) & > /dev/null
$terminal -e "watch -n 1 ./$file_output" &
$editor $file_to_edit;
pkill -P $$ 
```

注意：它需要“inotify-tools”包。

它是如何工作的？

1）它将打开一个终端（默认：xterm），其中每秒将使用“watch”命令执行二进制文件（如果不存在文件，它将只显示“未找到错误”）

2) 如果你的 C/C++ 代码发生变化，它会编译它（默认编译器：clang++，但你可以使用 gcc 等）。如果需要，可以在以下位置修改编译命令：`$compiler $file_to_edit -o $file_output`

3）它将使用您选择的编辑器（默认为vim）打开文件。

4) 退出时将关闭终端和监控进程。

# java - 在 lwjgl 窗口中呈现 javax.swing.JButton

> ID：12445682
> 
> 赞同：1
> 
> 时间：2012-09-16T09:10:46.863
> 
> 标签：java, swing, lwjgl

是否可以在 lwjgl 窗口（使用 openGL）中呈现 javax.swing.JButton 和其他摆动元素？如果没有，您可以在 lwjgl 的游戏 GUI 中推荐什么？

*注意：我试过 Nifty-GUI 和 TWL，但我不喜欢 XML 部分，而且文档很差......*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:56:12.333

将 a 添加`javax.swing.JButton`到`java.awt.Canvas`used for[`Display`](http://lwjgl.org/javadoc/org/lwjgl/opengl/Display.html)可能会受到渲染伪影的影响。相反，请尝试以下替代方法之一：

*   将按钮添加到 a中，如此[处](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)`JPanel`所示。把你的放在一个，如图所示[。](https://stackoverflow.com/a/11358217/230513)将两者放在合适的布局中，例如`Display``Canvas`

    ```
    add(canvas, BorderLayout.CENTER;
    add(panel, BorderLayout.SOUTH); 
    ```

*   `Display`在无模式对话框中控制您使用的组件，如图[所示](https://stackoverflow.com/a/11832979/230513)。

# ios - 如何在屏幕导航期间删除 ios 中的黑色？

> ID：12445684
> 
> 赞同：3
> 
> 时间：2012-09-16T09:11:30.973
> 
> 标签：ios, uinavigationbar, uiviewanimationtransition

根据图像，我正在使用`navigationController`我的应用程序。

在从一个屏幕转换到另一个屏幕期间，显示黑色。

我`RootViewController`没有`navigationBar`（它是隐藏的），而其他屏幕有导航栏。

任何人都可以帮忙吗？（因为我是这个论坛的新手，他们不允许我附上图片。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:14:57.633

在根控制器的 viewDidDisappear 中分配与目标控制器相同的导航栏属性。setNavigationBarHidden 为否。

# php - 如何在 CodeIgniter 中的链接而非表单中添加和验证令牌（针对 CSRF 等）？

> ID：12445692
> 
> 赞同：3
> 
> 时间：2012-09-16T09:13:26.983
> 
> 标签：php, codeigniter

我知道如何在 CodeIgniter 的表单中启用 CSRF，但是我不确定如何在 CodeIgniter 经典链接中实现此功能（例如，用于在管理区域添加/删除私人消息、帖子等）

现在我正在使用这样的东西：

**看法**

```
<?php echo anchor('account/delete_private_message/'.$obj->pmID, 'delete mesage', array('onclick' => 'return confirm(\'Do you really want to delete this private message?\');', 'class' => 'delete-message-button')); ?> 
```

**控制器**

```
function delete_private_message($pmID = '')
    {

        $deleted_pm = $this->account_model->delete_pm($pmID);

        if($deleted_pm)
        {
            $this->session->set_flashdata('status', 'PM was deleted successfully');
        }
        else
        {
            $this->session->set_flashdata('status', 'Error');
        }
        redirect('account/private_messages');
    } 
```

**模型**

```
function delete_pm($pmID)
    {

        $return = 0;
        if(!empty($pmID))
        {
            $this->db->where('pmID', $pmID);
            $result = $this->db->delete('private_messages');
        }
        return $result;
    } 
```

如果用户在弹出窗口中单击“确定”，则该消息将被删除。

问题是如何将令牌添加到链接和用户会话并验证它等。我不知道如何实现这一点才能正常工作。

**编辑：**我只是想我必须在链接末尾添加生成的令牌，例如：

> 帐户/delete_private_message/1239/dfdf6e7re67a6e87r6e87r69876bn3

并且值 dfdf6e7re67a6e87r6e87r69876bn3 也在当前用户的会话中并在控制器中验证它们。但是，我不知道该怎么做。因此，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:09:22.050

你是对的 - 只需将 CSRF 令牌作为链接的一部分传递。下面的例子应该有帮助（但我没有测试过）

```
function delete_private_message($pmID = '', $token = null)
{
    // Check supplied token is valid
    if ( ! ($this->_check_token($token)))
    {
        // Not valid
        $this->session->set_flashdata('status', 'Error');
        redirect('account/private_messages');
    }

    if($this->account_model->delete_pm($pmID))
    {
        $this->session->set_flashdata('status', 'PM was deleted successfully');
    }
    else
    {
        $this->session->set_flashdata('status', 'Error');
    }
    redirect('account/private_messages');
}

function _check_token ($token)
{
      return ($token === $_COOKIE[$this->csrf_cookie_name]);
} 
```

**ps**你的模型代码有错误

```
$return = 0; 
```

应该

```
$result = 0; 
```

# php - PHPMyAdmin 中的错误 #1064

> ID：12445697
> 
> 赞同：0
> 
> 时间：2012-09-16T09:14:29.260
> 
> 标签：php, mysql, phpmyadmin

谁能告诉我为什么 PHPMyAdmin 会抛出错误 #1064？

**MySQL 查询：**

```
CREATE TABLE posts 
  ( ID not null auto_increment unsigned int, 
    pType enum('article', 'link') not null, 
    Title text null, 
    Link text null, 
    BodyMD longtext null, 
    BodyHT longtext not null, 
    URL tinytext not null, 
    ShortURL tinytext not null, 
    status enum('drafted', 'published') not null, 
    DateEdited timestamp null, 
    DatePublished timestamp null, 
    Topic enum('') null, 
    primary key (ID, URL, ShortURL) 
  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:22:02.390

您需要在约束和属性*之前*`int unsigned`指定列类型，并且正确的类型是，而不是`unsigned int`：

```
...
ID int unsigned not null auto_increment,
... 
```

# visual-studio-2010 - Visual Studio 重命名文件夹和控件 - 可能吗？

> ID：12445698
> 
> 赞同：0
> 
> 时间：2012-09-16T09:14:30.613
> 
> 标签：visual-studio-2010, visual-studio

我在 Visual Studio 2010 Professional 中创建了我的第一个网站。

在网络项目中，我有一个文件夹结构。在这些文件夹中，我有用户控件、Web 服务等。

随着我设计网站变得更加清晰，我想重命名 1 个或多个文件夹，但我注意到当我更改文件夹的名称时，每个文件夹内的控件的路径不会被重构。目前，我能看到的唯一方法是单独更改每个。

在此示例中，“控件”是路径：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Account_Bar.ascx.cs" Inherits="Controls_Account_Bar" %>
public partial class Controls_Account_Bar : System.Web.UI.UserControl 
```

是否有允许我一起重命名文件夹和控制路径的快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:16:58.693

据我所知，您需要获得像[ReSharper](http://www.jetbrains.com/resharper/)或 Telerik 的[JustCode](http://www.telerik.com/products/justcode.aspx)这样的工具才能自动进行这种重构。

# node.js - node.js 安装 - 找不到快递

> ID：12445699
> 
> 赞同：1
> 
> 时间：2012-09-16T09:14:46.327
> 
> 标签：node.js

我按照 express.js 指南中显示的方式安装 express。 [http://expressjs.com/guide.html](http://expressjs.com/guide.html)

运行“节点应用程序”后，我收到此错误：

```
 /Users/xxx/Documents/work/node/app.js:3
    var app = express();
              ^
    ReferenceError: express is not defined
        at Object.<anonymous> (/Users/xxx/Documents/work/node/app.js:3:11)
        at Module._compile (module.js:449:26)
        at Object.Module._extensions..js (module.js:467:10)
        at Module.load (module.js:356:32)
        at Function.Module._load (module.js:312:12)
        at Module.runMain (module.js:492:10)
        at process.startup.processNextTick.process._tickCallback (node.js:244:9)
    nma:node xxx$ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T09:24:30.987

你需要类似的东西`var express=require('express');`才能`express`被定义。您引用的链接提到这样做；也许您忽略了一两步（比您想象的要容易得多）？

# javascript - 按文本宽度附加警告

> ID：12445702
> 
> 赞同：0
> 
> 时间：2012-09-16T09:15:44.877
> 
> 标签：javascript, css, alert

我使用 EAMILMEFORM 平台构建了一个表单，我更改了一些 CSS thigs，现在我的表单看起来像这样（点击提交按钮后，字段填写不正确） ![在此处输入图像描述](../Images/24e2a175b7141f59b803e3b4e5fb2330.png)

我希望文本框警报之间没有空格。我想要的一个例子是在下面的链接： [https ://www.dropbox.com/s/hpqb863dvc6nn6w/%D7%9C%D7%9B%D7%99%D7%93%D7%94%20%282 %29.PNG](https://www.dropbox.com/s/hpqb863dvc6nn6w/%D7%9C%D7%9B%D7%99%D7%93%D7%94%20%282%29.PNG) 我该怎么做？在线表格：http: [//lawb.co.il/HTMLPage.html](http://lawb.co.il/HTMLPage.html)

JS 代码： http: [//lawb.co.il/contact.js](http://lawb.co.il/contact.js)

另一个JS代码： http: [//lawb.co.il/contact_us.js](http://lawb.co.il/contact_us.js)

CSS 代码： http: [//lawb.co.il/contact_us.css](http://lawb.co.il/contact_us.css)

请帮我解决我的问题，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:33:26.290

`width: 240px !important;`从你的 css 中删除`.formError .formErrorContent`将得到结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:38:50.423

*在contact_us.css*中删除`width`应用于`.formError .formErrorContent`规则的属性：

 *```
.formError .formErrorContent {
    width: 240px !important; /* <-- omit */
} 
```

如果您还想处理对齐问题，那就有点棘手了，因为库将定位规则分配为每个`.formError`元素的内联样式，例如：

```
<div class="formError element_2formError" style="top: 214px; left: 482px;">
<!-----------------------------------------------------------^ injected --> 
```*

# sql - 如何获得同一用户的结果？

> ID：12445705
> 
> 赞同：-1
> 
> 时间：2012-09-16T09:16:13.453
> 
> 标签：sql, database

我想获得对同一文档进行两次确认的用户。

**我的桌子是这样的**：

```
emp_num -- serial -- doc_num 
```

**我想得到这样的结果**：

```
344 -- 11 -- 3
344 -- 12 -- 3
344 -- 13 -- 3
756 -- 45 -- 16
756 -- 48 -- 16 
```

等等。

我怎样才能做到这一点？

* * *

我的结果：

```
344 -- 11 -- 3
344 -- 12 -- 3
344 -- 13 -- 3
756 -- 45 -- 16
756 -- 48 -- 16
333 -- 56 -- 77
564 -- 79 -- 87
564 -- 80 -- 87 
```

* * *

我不希望 emp_num = 333 包含在结果中，因为它是一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:31:08.120

如果帖子中显示了尝试，则堆栈溢出“效果最佳”。这显示了努力，允许解释改进/错误，并有助于澄清意图..

无论如何，这很可能接近预期：

```
 select t1.*
 from theTable t1
 join theTable t2
 on t1.emp_num = t2.emp_num     -- look at records for same employee
   and t1.doc_num = t2.doc_num  -- that have the same document num
   and t1.serial <> t2.serial   -- but have a different "serial" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:28:38.157

大多数数据库都有称为窗口或分析函数的东西。其中之一将计算组中的记录数。执行此查询的最佳方法是：

```
select emp_num, serial, doc_num
from (select emp_num, serial, doc_num,
             count(*) over (partition by emp_num) as totalcount
      from t
     )
where totalcount > 1 
```

您可以在分区语句中放置任意数量的字段。您似乎只想按员工计算记录总数。

# javascript - jQuery脚本未执行

> ID：12445706
> 
> 赞同：1
> 
> 时间：2012-09-16T09:16:14.813
> 
> 标签：javascript, jquery, html

我有一个用 jQuery 修改的按钮，用于更改它的 id 和/或类。当它有一个特定的类并且用户单击按钮时，它应该执行以下脚本：

```
$(document).ready(function() {
$(function() {
    $('.error').hide();
    $("#tilisiirtobtn").click(function() {
        alert("buttoni toimii");
        var Nimi =             $(".Nimi").val();
        var Osoite =           $(".Osoite").val();
        var Postinumero =      $(".Postinumero").val();
        var Postitoimipaikka = $(".Postitoimipaikka").val();
        var Puhelin =          $(".Puhelin").val();
        var Sahkoposti =       $(".Sahkoposti").val();
        var Filtteri =         /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
        $('.error').hide();
        if(Nimi == ""){
            $(".Nimi").focus();
            $("#Nimi-error").show();
            return false;
        }
        if(Osoite == ""){
            $(".Osoite").focus();
            $("#Osoite-error").show();
            return false;
        }
        if(Postinumero == ""){
            $(".Postinumero").focus();
            $("#Postinumero-error").show();
            return false;
        }
        if(Postitoimipaikka == ""){
            $(".Postitoimipaikka").focus();
            $("#Postitoimipaikka-error").show();
            return false;
        }
        if(Puhelin == ""){
            $(".Puhelin").focus();
            $("#Puhelin-error").show();
            return false;
        }
        if(Sahkoposti == ""){
            $(".Sahkoposti").focus();
            $("#Sahkoposti-error").show();
            return false;
        }

        $('.supernappula').attr('disabled', 'disabled');
      var data = $('#yhteystiedot').serializeArray();
      data.push( { name: 'cartContent', value: $('#emailedcart').html()});
      //alert (data);return false;
     $.ajax({
    type: "POST",
    data: data,
    url: "order/order.php",
    dataType: "html",
    error: function(){ if(confirm("Mitään ei näytä tapahtuvan. Päivitä sivu?") == true){ window.location.reload();} 
 },
    success: function() {
 alert("Onnistui");
        }

  });
  return false;

    });
  });        
}); 
```

但是，它甚至不会执行第一件事的警报。

这是更改按钮的 id 和类的代码：

```
$(function() {
    $("#paypal").click(function() {
        $(".yhteystiedot").slideUp(600);
        $(".toimitustapa").slideDown(600);
        $('form :input').val("");
        $('.supernappula').html("Maksa PayPalissa");
        $('.supernappula').addClass("simpleCart_checkout");
        $('.supernappula').attr("id", "checkoutbtn");
    }); 
    $("#tilisiirto").click(function() {
        $(".yhteystiedot").slideDown(600);
        $(".toimitustapa").slideDown(600);
        $('.supernappula').html("Tee tilisiirto");
        $('.supernappula').removeClass("simpleCart_checkout");
        $('.supernappula').attr("id", "tilisiirtobtn");

    }); 
    $("#postiennakko").click(function() {
        $(".yhteystiedot").slideDown(600);
        $(".toimitustapa").slideDown(600);
        $('.supernappula').html("Maksa postiennakolla");
        $('.supernappula').removeClass("simpleCart_checkout");
        $('.supernappula').attr("id", "postiennakkobtn");

    });

    $("#matkahuolto").click(function(){
        $(".maksu").slideDown(600);

    });
    $("#posti").click(function(){
        $(".maksu").slideDown(600);

    });

}); 
```

并且按钮本身没有修改：

`<button type="button" id="checkoutbtn" class="simpleCart_checkout supernappula"></button>`

这是整个页面的[小提琴。](http://jsfiddle.net/hcaEg/2/)

如果有人明白吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:28:38.577

最可能的解决方案是您需要使用 jQuery 的`live`函数而不是`click`.

使用单击处理程序，它会按原样注册页面上的所有内容，并且不会为将来具有给定选择器的元素注册事件。

`live`通过将事件处理程序添加到现在和将来的所有元素来解决这个问题。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

更改此行：

`$("#tilisiirtobtn").click(function() {`

到

`$("#tilisiirtobtn").live('click', function() {`

应该能解决你的问题。

[这是一个工作的jsFiddle](http://jsfiddle.net/hcaEg/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:22:42.917

你已经准备好双重呼叫文件了。你所需要的`$(function()...`不是`$(document).ready(function() {`你在它周围的包装。

# php - 如何使用CBC和HMac？加密PHP

> ID：12445709
> 
> 赞同：0
> 
> 时间：2012-09-16T09:16:21.253
> 
> 标签：php, security, mcrypt, hmac, cbc-mode

你如何使用CBC和HMAC？

我在互联网上找不到足够的信息。

你如何获得IV？当您稍后需要解密时，您怎么知道它是什么？（将它放在数据库中不会破坏目的吗？）

什么是 HMAC，它是否受到黑客攻击的保护？

加密的文本保留在数据库中。如果有人入侵了数据库，他们可能也可以访问文件管理器，除非他们找到了进行 SQL 注入的方法。脚本如何知道黑客不知道使用哪个 IV 和密钥？

加密多段文本时使用的最佳方法是什么，只有编写它的用户才能在网站内看到？（用户始终将其视为纯文本。）

我现在使用 ECB（该网站尚未发布测试版）但我听说 CBC 更安全。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:17:12.337

IV 的主要目的是使每个加密都不同。这不是秘密。为每个加密创建一个随机 IV 并将其存储为密文的前缀是标准的。

HMAC 是一个 MAC，它确保只有知道密钥的人创建的消息才被接受为有效消息。重要的是在加密后应用 MAC 并包含 IV。即`HMAC(IV+Encrypt(...))`，从而在解密之前对其进行验证。这避免了某些攻击，例如填充预言。

还值得考虑使用经过身份验证的加密模式，例如 AES-GCM，它以安全的方式结合了身份验证和加密。只要确保在这种情况下你永远不会重复使用 IV。

* * *

在哪里存储密钥是一个难题，并且非常依赖于应用程序。正如您所注意到的，将密钥存储在与数据库相同的系统上并不会为您带来太多好处。

有时，从用户密码中获取密钥是一个好主意，使用带有盐的慢速 KDF，例如 PBKDF2。有时您可以将其存储在客户端上。有时您可以将其存储在具有较小攻击面的不同服务器上。

要确定将其存储在哪里，您需要明确的要求和威胁模型。

# java - Java中的连接，排序和交换数组

> ID：12445713
> 
> 赞同：0
> 
> 时间：2012-09-16T09:16:39.647
> 
> 标签：java, sorting, object, swap, concat

我正在尝试将两个数组连接成新数组，按顺序排序，并交换两个索引值。

我对java有点陌生，之前只使用C，所以很难处理一个对象。

在 main 方法中，它声明了两个对象数组 IntVector vector = new IntVector(3); 和 IntVector vector2 = new IntVector(3);

如果类型是 int[]，我只能这样做，但我想用作对象我应该如何编写 concat、sort 和 swap 方法？

公共类 IntVector {

```
private int[] items_;
private int itemCount_;

private IntVector(int[] data, int n) {
      items_ = data.clone();
      itemCount_ = n;
    }

 public IntVector(int itemSize)
 {
  itemCount_ =0;

  if(itemSize<1) itemSize =10;

  items_ = new int[itemSize];
 }

 public void push(int value)
 {
  if(itemCount_ + 1 >= items_.length)
   overflow();

  items_[itemCount_++] = value;
 }

 public void log()
 {
  for (int i=0 ; i<itemCount_; ++i)
  {
   System.out.print(items_[i]);

   if(i<itemCount_ -1)
    System.out.println();
  }
 }

 public void overflow()
 {
  int[] newItems = new int[items_.length * 2];

  for(int i=0 ; i<itemCount_; ++i)
  {
   newItems[i] = items_[i];
  }
  items_=newItems;
  }

 public int getValue(int index)
 {
  if(index < 0 || index >= itemCount_)
  {
   System.out.println("[error][IntVector][setValue] Incorrect index=" + index);
   return 0;
  }
  return items_[index];
 }

 public void setValue(int index, int value)
 {
  if(index < 0 || index >= itemCount_)
  {
   System.out.println("[error][IntVector][setValue] Incorrect index=" + index);
   return ;
  }
  items_[index] = value;
 }

public IntVector clone()
 {

    return new IntVector(items_, itemCount_);
 }

public IntVector concat()
 {

    return null;
 }

public IntVector sort()
 {

    return null;
 }

public IntVector swap()
 {

    return null;
 }

 public static void main(String[] args)
  {
   IntVector vector = new IntVector(3);
   IntVector vector2 = new IntVector(3);

   vector.push(8);
   vector.push(200);
   vector.push(3);
   vector.push(41);

   IntVector cloneVector = vector.clone();

   vector2.push(110);
   vector2.push(12);
   vector2.push(7);
   vector2.push(141);
   vector2.push(-32);

   IntVector concatResult = vector.concat(vector2);
   IntVector sortResult = concatResult.sort();
   IntVector swapResult = sortResult.clone();

   //swapResult.swap(1,5);

   System.out.print("vector : "); vector.log();
   System.out.print("\n\ncloneVector : "); cloneVector.log();
   System.out.print("\n\nvector2 : "); vector2.log();
   System.out.print("\n\nconcatvector : "); concatResult.log();
   System.out.print("vector : "); vector.log();
   System.out.print("vector : "); vector.log();

 } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:55:38.430

Apache Commons 库有一个[ArrayUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#addAll%28int%5B%5D,%20int%5B%5D%29)，您可以使用它来连接数组。

要对数组进行排序，您可以使用标准 SDK 中的[Arrays.sort() 。](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)如果您想自定义排序，则有[一个带有比较器的](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)

交换你的方法不需要参数，所以我不确定你想要交换什么元素。如果您想在两个索引中添加元素，您可以这样做

```
private swap (int pos1, int pos2) {
    //do some checking to ensure pos1 and pos2 exist here...
    int tmp = items_[pos1];
    items_[pos1] = items_[pos2];
    items_[pos2] = tmp;
} 
```

但正如大家所说，我也建议使用 Collections 框架。它将使串联更简单。并且有专门的[swap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)方法

## 编辑

我刚刚找到[了how-to-concatenate-two-arrays-in-java](https://stackoverflow.com/a/80503/846476)，它可能有助于连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:34:56.743

如果您真的想以典型的 Java 方式完成所有这些操作，则需要以下内容：

a) 创建两个`int`用必要值初始化的数组。

b) 将这两个数组转换为`List`使用`Arrays`实用程序类。见[`asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)方法。

c) 创建一个`ArrayList`并将上述两个列表添加到其中。见[`addAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#addAll%28java.util.Collection%29)方法。

d)`List`根据自然顺序对其进行排序。查看[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法或创建自己的方法[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)并应用排序。

e)使用该方法将 转换`List`为 int 数组。[`toArray(T[] t)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5b%5d%29)

你得到的最后一个`int`数组应该是最终结果。

正如@owlstead 评论的那样，使用 Java Collections API 比自己进行低级操作数组要简单得多。

# java - 给定原始类查找参考类

> ID：12445718
> 
> 赞同：3
> 
> 时间：2012-09-16T09:17:39.257
> 
> 标签：java, reflection

我正在尝试为基本 Java 反射构建一个类型更安全的替代方案，并且遇到了一些问题。我有一个`BoundMethod<T>`绑定方法和对象的类，因此可以调用该方法并以类型安全的方式返回结果（类型 T）。这涉及将一个 Class 传递给构造函数，并使用该类来转换返回值（即`return returnType.cast(method.invoke(object, params))`）。

我遇到的问题是，如果我根据`getReturnType()`方法对象中的结果自动创建这些对象并且返回类型是原始对象，我会得到 ClassCastException，因为您不能动态转换为原始类型。我需要一种替换适当引用类型的方法，但我找不到一种简单的方法来做到这一点。

有一些预先构建的解决方案，还是我需要自己构建一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:25:49.880

检查`returnType`并查看它是否是原语：

```
returnType.isPrimitive(); 
```

如果是，[获取它的包装类](https://stackoverflow.com/questions/1704634/simple-way-to-get-wrapper-class-type-in-java)。

不幸的是，这使您可以对值进行自动装箱，但这只是在混合泛型和原语时发生的情况。

# php - 使用 PHPUnit 测试 REST API

> ID：12445722
> 
> 赞同：8
> 
> 时间：2012-09-16T09:18:28.743
> 
> 标签：php, rest, phpunit

我正在构建一组 RESTful API，现在需要为它们编写单元测试。我不确定单元测试应该实际测试什么。

单元测试是否应该检查从服务器接收到的响应对于各种输入是否正确？如果是这样，预先定义一组正确的响应格式并对照它们检查响应是否是一种好习惯？

**更新**

我通过 CURL 调用这些服务，我绝对可以检查状态代码。不同输入的响应可能会有所不同，所以我应该检查所有可能的响应吗？

通常如何使用 PHPUnit 对 RESTful API 进行单元测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:09:32.340

如果您的 API 的数据层被充分抽象化，以便您可以接收到给定输入的一致且可预测的输出，那么您的测试用例肯定应该包括一些针对某些有限输入列表的常见输出期望它们还应该测试您可以鼓动的任何错误用例向上。

如果您的 API 无法针对处于可预测状态的数据层运行（例如，如果它连接到实时数据，或者连接到开发人员之间共享的数据），那么您最终将花费大量时间来修复您的测试以正确建模数据的新状态。这降低了单元测试的价值，因为您可能不会经常运行它们，而且您永远无法确定测试失败是由于数据更改还是程序逻辑更改造成的。这是否超过了没有单元测试的风险将取决于您的个人情况（测试中断的频率，服务的关键程度等等）。

至于如何使用 PHPUnit 运行测试用例，我无法具体回答，但我想你会像 @basiljames 所说的那样做；对给定端点执行调用并验证收到的响应是否与您的期望正确匹配。与任何其他单元测试没有什么不同，除了它们可能运行得更慢一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:57:47.127

您可以将 JUnit 用于您的测试用例。您必须检查`HTTP Status Code`任何特定属性或值的响应内容，然后再检查。

# eclipse - 有没有办法从 Scala IDE 或 Eclipse 中的 Project Explorer 进行搜索？

> ID：12445723
> 
> 赞同：0
> 
> 时间：2012-09-16T09:18:38.367
> 
> 标签：eclipse, scala-ide

我最近切换到 Scala-IDE 进行 Scala 开发，特别是因为他们添加了 Scala Worksheets - 多么酷的功能。

无论如何，我对 Eclipse 最大的抱怨是搜索文本。我无法找到允许我从项目资源管理器中搜索或搜索并替换文本的附加组件或机制。

我正在使用 Eclipse 4.2，并且希望能够在 Project Explorer 中右键单击文件夹或包并选择“搜索”，以搜索该文件夹及其子文件夹。

是否有可用的插件或者我错过了房间里的大象？我尝试使用主应用程序菜单中的搜索菜单选项，但它似乎没有考虑上下文（如当前包）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:32:30.457

在 Eclipse 的搜索对话框中有几个选项卡。**File Search**和**Java Search**选项卡有一个名为**Scope**的框。它允许您将搜索限制为**选定的资源**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:10:40.230

在搜索对话框中，您还可以选择在范围框中**包含项目**，这将仅搜索您当时正在工作的项目，而无需选择项目然后打开搜索对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T21:47:17.093

据我所知，唯一的方法是在项目中使用您的关键字搜索，然后打开每个文件并查找并替换/替换所有。

ScalaIDE 正在增长，但它仍然没有那么强大。

# sql - 在 Where 子句中使用“CASE”来选择各种列会损害性能

> ID：12445727
> 
> 赞同：6
> 
> 时间：2012-09-16T09:19:00.243
> 
> 标签：sql, sql-server, database, sql-server-2005, database-performance

我的查询需要在某些列上是动态的，这意味着我得到一个参数并根据它的值决定在 Where 子句中获取哪一列。我已经使用“CASE”表达式实现了这个请求：

```
(CASE @isArrivalTime WHEN 1 THEN ArrivalTime ELSE PickedupTime END) 
>= DATEADD(mi, -@TZOffsetInMins, @sTime) 
 AND (CASE @isArrivalTime WHEN 1 THEN ArrivalTime ELSE PickedupTime END) 
 < DATEADD(mi, -@TZOffsetInMins, @fTime) 
```

如果`@isArrivalTime = 1`然后选择`ArrivalTime`列，则选择`PickedupTime`列。我有一个聚集索引`ArrivalTime`和非聚集索引`PickedupTime`。

我注意到，当我使用此查询（使用`@isArrivalTime = 1`）时，与仅使用`ArrivalTime`.

也许查询优化器不能以这种方式正确使用\选择索引？

我比较了执行计划并注意到，当我使用`CASE`32% 的时间被浪费在索引扫描上时，但是当我没有使用 CASE `(just used`ArrivalTime`) 时，只有 3% 的时间被浪费在了索引扫描上。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:25:03.343

两者之间的差异很可能是由于它必须扫描的行数不同。由于您的查询很可能是更多表之间连接的最终结果。请记住，扫描是.. 顾名思义，扫描所有行。您可以在计划中检查估计的行数以做出想法。

如果您在动态字段上使用过滤器（例如用例），则引擎无法使用该字段上的索引。在这种情况下，您最好使用动态 sql 来生成您需要的正确 sql 并使用 exec_sql。或者使用 if 语句直接查询正确的内容。

您可能会发现这对于使用动态 sql 很有用，它将解释原因和方式。

[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:04:31.303

尝试设置日期时间边界：

```
declare @resSTime datetime
        ,@resFTime datetime

set @resSTime = DATEADD(mi, -@TZOffsetInMins, @sTime)
set @resFTime = DATEADD(mi, -@TZOffsetInMins, @fTime) 
```

并尝试将大小写更改为“或”

```
( ArrivalTime >= @resSTime 
    and ArrivalTime < @resFTime 
    and @isArrivalTime = 1 )
or ( PickedupTime >= @resSTime 
    and PickedupTime < @resFTime 
    and @isArrivalTime <> 1 ) 
```

# c++ - 测试新操作员失败

> ID：12445729
> 
> 赞同：1
> 
> 时间：2012-09-16T09:19:03.403
> 
> 标签：c++, unit-testing, boost, boost-test

我创建了一个类，其中的构造函数中有一些**新**的运算符。我已经在构造函数中创建了守卫来管理新的运算符失败，但现在我想测试它。

例如，我有一个这样的构造函数：

```
Function::Function()
{
  try
  {
    m_pxArgument = new Argument();
  }
  catch(std::bad_alloc)
  {
    throw MemoryException();
  }
} 
```

是否可以创建一个测试，在其中我可以告诉新操作员失败，以测试我的 catch 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:41:30.577

如果`Argument`是您的类/结构 - 然后在此类中定义 operator new 仅用于 UT 目的。

```
class Argument {
//...
#ifdef UNIT_TEST
   static bool& failNew() { static bool failNew = false; return failNew; }
   void* operator new(size_t size)
   {
       if (!failNew())
         return ::operator new (size);
       failNew() = false;       
       throw std::bad_alloc("Argument");
   }
#endif
}; 
```

只需在`Argument::failNew() = true;`每次需要使其分配失败时进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:44:18.237

要进行这样的测试，您需要 `operator new`为您重载`class Argument`，然后提供一个定义，以便在您的测试用例中抛出。但是，由于在运行时无法轻松交换，您可能需要一个单独的测试程序。

如果你是我的 C++ 学生，我首先会问，为什么你使用 new 并且 a 可能是“裸”指针成员，无论如何都是可变的。第一种选择是创建一个 Argument 类型的成员变量并跳过显式堆分配。如果您真的需要现代代码中的动态分配，我建议您使用`shared_ptr<Argument>`和 Function::Function():m_pxArgument(make_shared()){}

我想问的第二个问题是，为什么要转换`std::bad_alloc`为自己的异常类型，以及是否需要在构造函数中完成。`std::bad_alloc`是您实际遇到的情况的标准化例外，如果发生这种情况，live 通常会很糟糕，以至于您的小过程无法恢复（参见 Charles Weir 和 James Noble 的模式“Captain Oates”）。

# python - matplotlib：Qt4Agg 工具栏的恼人错误

> ID：12445732
> 
> 赞同：1
> 
> 时间：2012-09-16T09:19:14.300
> 
> 标签：python, matplotlib, toolbar

我使用 Qt4Agg (PyQt4) 作为在 matplotlib 中渲染绘图的后端。这有一个非常有用的工具栏，带有一个非常有用的按钮*“编辑曲线和轴参数”*。但是，每当我按下它时，它都会出错。（我知道它很有用，因为它适用于条形图，但不适用于折线图：P）。

原因和回溯可以在下图中清楚地看到。

![在此处输入图像描述](../Images/b3bd29f319de8a12710130116743aa44.png)

我认为这可能是当前版本的 matplotlib 的错误，所以我在最新版本的相同版本上尝试了这个，但它仍然给出相同的错误。

这是最简单的脚本，它给出了相同的错误（情节与上面不同）-

```
import matplotlib.pyplot as plt
plt.plot(range(10))
plt.show() 
```

（我已经通过配置文件配置了后端`/etc/matplotlibrc`）

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:11:12.070

这确实似乎是 matplotlib 的 Qt4 表单编辑器中的一个错误。

错误似乎在`FormWidget.setup()`方法的一部分中，在`matplotlib/backends/qt4_editor/formwidget.py`. 在 Windows 上的 matplotlib 1.1.0 中（我无法重现该问题），它包含以下内容：

```
 elif isinstance(value, (list, tuple)):
            selindex = value.pop(0)
            field = QComboBox(self)
            if isinstance(value[0], (list, tuple)):
                keys = [ key for key, _val in value ]
                value = [ val for _key, val in value ]
            else:
                keys = value
            field.addItems(value) 
```

Kubuntu Precise 上的 matplotlib v1.1.1rc（我可以重现该问题）将上面的第二行替换为

```
 selindex = list(value).pop(0) 
```

最终，这两个版本都不正确。

1.1.0 版方法的问题是它不处理元组（元组是不可变的并且没有`pop`）方法，而 1.1.1 版 rc 代码的问题是第一个元素`value`应该是删除，但它只会从`list(value)`创建的临时列表中删除。

此错误已在版本 1.1.1 中修复。我刚刚下载并安装了这个版本，无法再重现该问题。

# android - android中的dip，sp和px有什么区别？

> ID：12445733
> 
> 赞同：1
> 
> 时间：2012-09-16T09:19:14.607
> 
> 标签：android, android-layout, android-widget

> **可能重复：**
> [Android 中 px、dp、dip 和 sp 的区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

我想知道android中dip、sp和px之间的区别。

谢谢，尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:21:28.300

如果你在 Android 中做任何事情，你应该使用 dip 或 dp。dip 用于像素密度。px 代表像素。

由于每个设备上的像素数都不同，因此您应该继续使用 dip。

**编辑：** 重复问题：[Android 上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:49:25.660

**px**
Pixels - 对应于屏幕上的实际像素。

**dp 或 dip**
与密度无关的像素 - 一个基于屏幕物理密度的抽象单位。这些单位与 160 dpi 屏幕相关，因此 1 dp 是 160 dpi 屏幕上的一个像素。dp与像素的比例会随着屏幕密度而变化，但不一定成正比。注意：编译器同时接受“dip”和“dp”，尽管“dp”与“sp”更一致。

**sp**
与比例无关的像素 - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

[资源](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

# data-mining - DBSCAN 可以应用于聚类字符串吗？如果可以，怎么做？

> ID：12445734
> 
> 赞同：0
> 
> 时间：2012-09-16T09:19:15.250
> 
> 标签：data-mining, cluster-analysis, non-clustered-index, dbscan

> **可能重复：**
> [如何将 DBSCAN 算法应用于相似 url 的分组](https://stackoverflow.com/questions/12422576/how-to-apply-dbscan-algorithm-on-grouping-of-similar-url)

我被告知在我的期末 sem 中做一个项目，因为该项目涉及使用 DBSCAN 对相似的字符串进行聚类。我想知道这可以使用 DBSCAN 来完成，如果是，那么我该如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:11:27.957

正如我之前告诉你的（在[How to apply DBSCAN algorithm on group of similar url 中](https://stackoverflow.com/questions/12422576/how-to-apply-dbscan-algorithm-on-grouping-of-similar-url)），这是可能的。

但是**您**需要定义应用程序所需的相似性。

stackoverflow 上没有人可以帮助你，除非你*非常*清楚你需要什么样的相似性。

有很多可用的字符串指标，**您**需要找出对**您的**特定问题有效的方法：

[https://en.wikipedia.org/wiki/String_metric](https://en.wikipedia.org/wiki/String_metric)

# php - 查找数据库中没有数据的最大时间跨度

> ID：12445741
> 
> 赞同：4
> 
> 时间：2012-09-16T09:20:02.263
> 
> 标签：php, mysql, algorithm, information-retrieval

我有一个包含事件的数据库。每个事件都有一个时间戳。事件在白天均匀分布，但每天晚上都有一个没有数据的时间跨度。我的问题是夜晚的定义不明确。可以是从晚上 23 点到第二天早上 7 点，或者是从凌晨 2 点到第二天早上 10 点，甚至是从晚上 8 点到第二天晚上 23 点。

现在我想计算事件的间隔，但没有没有事件的大时间跨度。但我不知道如何找到这个时间跨度。我的问题是，可能有几天没有时间跨度，或者有两天时间跨度相同（例如晚上 8 点到第一天的午夜，午夜到第二天的早上 7 点）。

我现在的问题是：如何找到这个时间跨度？

我更喜欢仅在 MySql 中的解决方案，但如果不可能，也可以使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:44:12.987

如何将一个表自连接到下一行，然后在连接的表之间进行时间差异，并找到最大差异？

假设您的架构是这样的（**并假设条目按时间顺序排列**）：

```
CREATE TABLE log (
  id INT NOT NULL AUTO_INCREMENT,
  occurred_at DATETIME,
  event VARCHAR(255),
  PRIMARY KEY (id),
  INDEX (occurred_at)
); 
```

像这样的东西：

```
SELECT 
  TIMEDIFF(after.occurred_at, before.occurred_at) AS time_gap,
  `before`.*, 
  `after`.*
FROM 
  log `before` JOIN 
  log `after` ON after.id = before.id+1 
ORDER BY time_gap DESC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:17:23.583

为什么不直接处理**排序**后的事件列表，然后寻找每天最大的差距？

在排序列表中查找间隙是微不足道的。定义一些阈值，例如“最小 1 小时”和“与 12-6 间隔重叠”，然后您就有了完整的间隙检测。

顺便说一句，这不是真正的“数据挖掘”。- 这只是一个非常简单的数据查询。

# android - 在画布上绘制 PNG 图像：性能问题

> ID：12445742
> 
> 赞同：1
> 
> 时间：2012-09-16T09:20:08.293
> 
> 标签：android, performance, png, android-canvas

除了 BitmapFactory.decodeResource() 之外，还有其他方法可以在画布上绘制 .png 图像吗？我的问题是，当您从 10kB 图像创建位图时，您仍然会得到一个大小取决于屏幕宽度和高度的位图。我一次需要在屏幕上显示多达 16 张图像，而在高分辨率屏幕（fe，1280 x 720）上它需要大量内存，而且我什至在我的 HTC One X 上也有滞后（当我尝试时，fe , 移动或缩放图像）。那么有没有其他方法可以在画布上显示 .png 图像，或者是否有其他解决方案来提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:12:04.950

您可以通过多种方式提高绩效：

*   Android 对视图使用[Blit blit](http://en.wikipedia.org/wiki/Bit_blit)（dirty rects）技术，因此如果您的屏幕有多个 png 图像，请尝试将它们拆分到视图中并确保它们没有相互接触，那么您将获得脏 rect 性能奖励。
*   如果您有多个相互重叠的视图，那么您可以使用缓冲区位图在此处绘制它们，当需要更新时，只需绘制您的缓冲区。当您对缓冲区的更新很少时，这非常有用。
*   对于 android 2.2 及以下版本，您可以使用[Paint.setFilterBitmap()](http://developer.android.com/reference/android/graphics/Paint.html#setFilterBitmap%28boolean%29)为 false，以避免过滤缩放的图像，这对性能有很大的影响，无论缩放的图像看起来多么糟糕。并且当硬件加速打开时（默认从 android 4.0）这个标志被设置为 true 并且你不能改变它。
*   剪切图像：您可以将图像拆分为多个部分，以减小 png 图像大小并将其余部分设为 jpg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T16:12:29.813

Tricky workaround:

You can try to create a Bitmap with size of the screen.

Draw the 16 Bitmaps on that Bitmap using Canvas.

Display that big Bitmap instead of 16 small ones.

# mysql - 将表中的行转换为另一个表中的列

> ID：12445748
> 
> 赞同：0
> 
> 时间：2012-09-16T09:21:20.627
> 
> 标签：mysql, database

如何使用 MySQL 将一个表的行转换为另一个表的列。我正在制作一个选美比赛类型的系统。

标准表如下：

> ```
> 1\. Mastery and execution
> 2\. Audience impact
> 3\. Stage presence
> 4\. Creativity
> 5\. Talent 
> ```

我想做一个表格来显示

```
Candidate | Mastery and ex | audience | stage presence |... | Final 
```

我该怎么做呢？

# facebook - 在facebook中向用户请求发送应用程序

> ID：12445750
> 
> 赞同：0
> 
> 时间：2012-09-16T09:21:26.720
> 
> 标签：facebook, facebook-graph-api, facebook-requests

我正在尝试向 facebook 中的用户请求发送应用程序。这是我的代码：

```
<?php
        include 'connect.php';
        $param = array(
           'message'      => 'Check out the latest update',
           'data'         => 'some_data_string',
           'access_token' => $facebook->getAccessToken(),
        );
        $tmp = $facebook->api("/100001160043714/apprequests", "POST", $param);
        print_r($tmp)
?> 
```

我在最后一行打印时得到了这个结果：

```
Array ( [request] => 364366050304238 [to] => Array ( [0] => 100001160043714 ) ) 
```

指定的用户 id 是我自己的帐户。但是，我没有收到任何请求。是否有启用权限？

# excel - 如何强制 SaveAs 而不是 Save

> ID：12445757
> 
> 赞同：5
> 
> 时间：2012-09-16T09:23:21.920
> 
> 标签：excel, vba

我想阻止用户使用与打开它的名称相同的名称保存工作簿，并提供 SaveAs 选项。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
If ThisWorkbook.Name = "abc" Then
Cancel = True
SaveAsUI = True
End If 
```

也试过

```
 If ThisWorkbook.Name = "abc" Then SaveAsUI = True 
```

此代码不起作用。另存为对话框不出现。

下次试试

```
If ThisWorkbook.Name = "abc" Then ThisWorkbook.ReadOnly = True
'Error - can't assign to read only property. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T10:11:05.793

如果您只想测试特定文件名 - 比如说`abc.xlsm`下面的代码将停止`Save`（但通过`SaveAs`）然后将`ReadOnly`属性设置为 False 因此`Save`不能在此会话中再次在此文件上使用

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
If Not SaveAsUI Then
    If ThisWorkbook.Name = "abc.xlsm" Then
        Cancel = True
        ThisWorkbook.ChangeFileAccess Mode:=xlReadOnly
    End If
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T09:46:35.490

我有两个建议，但为了知道哪个最好，您必须告诉我们有关周围代码以及如何打开/创建文件等的更多详细信息。

1.  使用模板。如果您将代码放在模板中并添加新工作簿，则如果没有“另存为”对话框，则无法保存它。

2.  使工作簿在打开时只读。这可以通过多种方式完成，具体取决于您的项目设计（例如`Workbooks.Open`，使用`ReadOnly`参数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T10:00:58.273

另一个答案（只读或模板）都是很好的建议

但是，如果你真的想编码，试试这个

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Dim fName As String
    If ThisWorkbook.Name  "abc.xlsm" Then 
        If Not SaveAsUI Then
            fName = Application.GetSaveAsFilename(, "Excel Macro-Enabled Workbook (*.xlsm), *.xlsm")
            If fName = "False" Then
                MsgBox "File NOT saved", vbOKOnly
                Cancel = True
            Else
                Application.EnableEvents = False
                ThisWorkbook.SaveAs Filename:=fName, FileFormat:=xlOpenXMLWorkbookMacroEnabled
                Application.EnableEvents = True
            End If
        End If
    End If
End Sub 
```

注意：为 Excel 2007/2010 编码 ( `If ThisWorkbook.Name "abc.xlsm" Then`)

如果使用 Excel 2003，您将需要更改

# c# - 从 web./app.config 更改动态 Web 引用

> ID：12445759
> 
> 赞同：4
> 
> 时间：2012-09-16T09:23:32.340
> 
> 标签：c#, visual-studio-2010, web-config, app-config, web-reference

我在更改配置文件中的动态 Web 引用时遇到问题。更改配置文件中的 url 没有任何效果。我必须更改 .settings 中的 url 并编译它才能更改。

[我使用向导](http://msdn.microsoft.com/en-us/library/ms169816%28v=sql.105%29.aspx)添加了网络参考。将 URL 行为设置为动态，这会在配置文件中添加相关的 XML 标记。

在我的解决方案中，我在一个单独的项目（类库）中有 Web API（Web 参考），所以我引用了该项目并复制了`<applicationSettings>`过去。

```
<applicationSettings>
    <Runner.Properties.Settings>
      <setting name="WebReference" serializeAs="String">
        <value>http://someurl/somefile.asmx</value>
      </setting>
    </Runner.Properties.Settings>
</applicationSettings> 
```

请注意，它是`<Runner.Properties.Settings>`而不是`<WebAPI.Properties.Settings>`。

我的解决方案设置如下：

```
Solution:
- WebAPI (class lib, has the web reference)
- Runner (console app, references WebAPI) 
```

是否有一些我不知道的限制或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T06:57:32.013

进行更改后，您是否尝试过重新启动应用程序？例如重新启动 Windows 服务或 IIS 中的网站？

另一种选择是将参数加载到内存中，并且在应用程序的生命周期内每隔一段时间再次将该设置读取到内存中。

# c - 更改 char* 的内存地址

> ID：12445760
> 
> 赞同：0
> 
> 时间：2012-09-16T09:23:46.933
> 
> 标签：c, memory-management, syntax

我有以下代码：

```
str = "ABCD";  //0x001135F8  
newStr = "EFGH"; //0x008F5740 
```

`*str`在第 5 位重新分配之后 -`//0x001135FC`
我希望它指向：`0x008F5740`

```
void str_cat(char** str, char* newStr)
{
 int i;
 realloc(*str, strlen(*str) + strlen(newStr) + 1); //*str is now 9 length long
 // I want to change the memory reference value of the 5th char in *str to point to newStr.
 // Is this possible?
 // &((*str) + strlen(*str)) = (char*)&newStr; //This is my problem (I think)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:34:35.383

你似乎混淆了关于 C 的一些非常重要的东西。指针只是内存中的一个地址。它是街上的地址。假设我喜欢 409 K Street。然后有人去在 409 喷漆“D”，在 410 喷漆“E”，在 411 喷漆“A”，在 412 喷漆“D”。然后有人去 202 M Street 喷漆“B”，在 410 喷漆“E” 203，“E”在 204，“F”在 205。你可以直接说“嘿，现在 413 K 街现在和 202 M 街一样”有什么意义吗？不，它没有！取而代之的是，您必须找到一个街区，那里有一堆尚未粉刷的房屋，并在其中八个上写上“ DEADBEEF”。

以此类推，在 C 中，您将分配一个新字符串，长度为两个字符串的长度加 1，作为零终止符，然后将第一个字符串复制到前四个位置，将下一个字符串复制到其余位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:28:14.207

```
void str_cat( char* dest, char* src )
{
   dest = realloc( dest, strlen( dest ) + strlen( src ) + 1 );

   strcpy( dest + strlen(dest), src );
} 
```

应该可以工作 - 虽然我手头没有编译器来测试

甚至更快，几乎没有指针：[http ://www.koders.com/c/fid359660C181A42919DCB9E92C1406B7D16F27BB8D.aspx](http://www.koders.com/c/fid359660C181A42919DCB9E92C1406B7D16F27BB8D.aspx)

# php - 如何在命令中登录到不同的文件？

> ID：12445761
> 
> 赞同：0
> 
> 时间：2012-09-16T09:23:49.287
> 
> 标签：php, logging, symfony, symfony-2.1, monolog

我正在创建一个[自定义命令](http://symfony.com/doc/master/cookbook/console/console_command.html)，并且我想使用不同的日志文件。

在文档中它说我必须[标记](http://symfony.com/doc/master/reference/dic_tags.html#dic-tags-monolog)我的服务。但是我的自定义命令不是服务，是吗？我应该把它变成服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:20:38.860

第二个文档适用于您要创建自定义记录器的情况。但是如果你只是想改变保存日志的文件，你不需要这样做，你只需要设置 monolog 'path' 配置。有关更多信息，请参阅[此](http://symfony.com/doc/2.0/reference/configuration/monolog.html)

此外，您在 get('logger') 时检索的对象是从 Monolog\Logger 类派生的。该类有两个方法：pushHandler() 将处理程序添加到处理程序堆栈，popHandler() 将处理程序删除到处理程序堆栈。也许在您的命令中，您可以弹出所有标准处理程序，然后使用您的自定义路径推送 Monolog\Handler\StreamHandler 的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:49:14.967

首先，我推动 NullHandler 使其他处理程序无效。然后我为信息消息添加了一个处理程序，~~为所有消息添加了另一个处理程序，只有在出现警告、错误等时才会触发~~。

```
$logger = $this->getContainer()->get('logger');
$logger->pushHandler(new NullHandler);
$logger->pushHandler(new StreamHandler('app/logs/mycommand.log', Logger::DEBUG));
//$logger->pushHandler(new FingersCrossedHandler(new StreamHandler('app/logs/mycommand.log', Logger::DEBUG), Logger::WARNING, 0, false)); // does not work. It prevents INFO messages from being logged 
```

# windows-phone-7 - ReactiveUI 路由和 Windows Phone

> ID：12445763
> 
> 赞同：0
> 
> 时间：2012-09-16T09:24:48.507
> 
> 标签：windows-phone-7, reactiveui

我正在继续在 Windows Phone 上探索 ReactiveUI，并且已经到了需要在页面之间进行导航的时刻。显然，我想用 ReactiveUI 来做到这一点。不幸的是，谷歌搜索（和搜索）并没有给出任何样本。我能找到的最有用的东西是 GitHub 上的“Play for Windows”，它实现了路由。但我不认为这种技术可以应用于 Windows Phone 编程，因为 WP 页面之间的导航与桌面内容非常不同。在 Play 中，据我了解，导航基本上是通过切换不同 UserControls 的可见性来完成的。我认为这不是在 WP 中做事的正确方法。

另一方面，查看 ReactiveUI 源代码，我发现 WP7 路由代码确实与桌面的相同。这让我感到困惑。

所以我的问题是，ReactiveUI.Routing 打算如何在 WP7 上使用？此外，如果有一些示例、最佳实践等可供查看，那将是非常好的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:38:32.190

对于 WP7 损坏的基于视图的路由，您*必须*使用没有特殊的可供性 - 您必须自己构建这部分（您不必使用 RxUI.Routing 来使用 ReactiveUI，它是一个可选功能）

如果您以可重用的方式构建它并希望将其包含在 ReactiveUI 中，请告诉我！

# mysql - MySQL：“产品”可以属于多个组？

> ID：12445767
> 
> 赞同：2
> 
> 时间：2012-09-16T09:25:42.033
> 
> 标签：mysql

在我的 MySQL`products`表中有一个名为 groups 的列，其中产品可以属于。此列中实际存储的是另一个名为`groups`.

如果我想选择属于特定组的产品怎么办？

如果一个产品只能属于一个组，我可以简单地使用

```
where group={groupid} 
```

但是如果一个产品可以属于多个组呢？

我可以像这样存储它们：' **4,8,10,42** '，这些数字中的每一个都表示一个`group`id。但是，我将如何查询选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:29:26.040

您不应将产品列表存储在单个字段中。而不是 column `products.groups`，您应该有一个单独的 table `product_groups (product_id, group_id)`，您可以在其中存储产品和组之间的每个关联。然后您可以从一个组中选择所有产品，如下所示：

```
SELECT product.*
FROM product_groups
INNER JOIN products ON (products.id = product_groups.product_id)
WHERE product_groups.group_id = :group_id` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:30:59.647

如果您希望产品具有多个组，则必须在此处查看数据库结构，您必须创建产品和组连接到的第三个表。然后您所要做的就是将产品ID映射到组ID

如果产品仅属于一个组，则该表中将只有一个条目，但如果它属于多个组，则它将（最终）具有多个条目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T09:31:07.507

> 我可以像这样存储它们：'4,8,10,42',

不，请不要**那样**做！

有一个完全众所周知的、标准的、高效且经过良好测试的最佳实践来创建多对多关系，称为[连接表](http://en.wikipedia.org/wiki/Junction_table)。以下是如何使用连接表表示产品 1 是组 4、8、10 和 42 的成员：

```
product_group
product    group
1          4
1          8
1          10
1          42 
```

# android - 如何在android中每45分钟使用警报管理器更新小部件

> ID：12445774
> 
> 赞同：0
> 
> 时间：2012-09-16T09:26:26.410
> 
> 标签：android

我正在做一个项目，我需要每 45 分钟用警报管理器更新 appWidget。我知道如何在不使用警报管理器的情况下创建小部件，但我需要使用警报管理器更新我的小部件。任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:52:58.290

尝试这个

```
public void SetAlarm(Context context, int minuts, Class widgetService)
     {
         AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, widgetService);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * minuts, pi); // Millisec * Second * Minute
     } 
```

# ruby-on-rails - Rails - 嵌套表单字段_用于不呈现

> ID：12445778
> 
> 赞同：0
> 
> 时间：2012-09-16T09:27:04.763
> 
> 标签：ruby-on-rails, nested-forms

我有两个模型，它们在 has_one / belongs_to 关联中链接；计算机和 IPv6Address 分别。

我已经在 Ipv6Address 表中预先填充了我希望它拥有的所有条目，现在我需要在计算机新/编辑表单上有一个下拉列表，以从 Ipv6 中选择一个与之关联的项目。需要预先填充的原因是计算机可以与它们关联的 IPv6 的预定义范围，我希望最终用户尽可能容易地从列表中盲目地选择一些东西而无需了解他们为什么这样做；但是让任何知道这是什么的人都有机会选择他们想要的。

到目前为止，我在这方面看到的一切似乎只有在您在新表单上同时创建两个对象然后随后编辑它们时才有效。

我尝试按照我在网上找到的示例设置我的 MVC，并查看有关类似主题的其他 stackoverflow 问题。

电脑型号：

```
class Computer < ActiveRecord::Base
  has_one :ipv6_address
  accepts_nested_attributes_for :ipv6_address
  ... 
```

IPv6地址模型：

```
class Ipv6Address < ActiveRecord::Base
  attr_accessible :computer_id, :ip_address
  belongs_to :computer
  ... 
```

电脑控制器：

```
class ComputersController < ApplicationController
  def new
    @computer = Computer.new
    @ipv6s = Ipv6Address.where('computer_id IS NULL').limit(5)
  end

  def edit
    @computer = Computer.find(params[:id])
    @ipv6s = Ipv6Address.where('computer_id = #{@computer.id} OR computer_id IS NULL').order('computer_id DESC').limit(5)
  end 
```

电脑新形态：

```
<%= simple_form_for( @computer ) do |f| %>
  <%= f.fields_for :ipv6_address do |v6| %>
    <%= v6.input :ipv6_address, :collection => @ipv6s %>
  <% end %>
  <% f.button :submit %>
<% end %> 
```

当这个新表单呈现时，没有包含 ipv6_address 的输入字段，尽管没有引发错误。我检查了渲染页面的来源，没有任何引用“ipv6”。

如果我将 fields_for 更改为：

```
<%= f.fields_for :ipv6_address, @ipv6s do |v6| %> 
```

然后我在页面上出现多个下拉选择字段，每个对象对应一个，每个对象`@ipv6s`都包含@ipv6s 中对象的完整列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:05:47.240

似乎您不想创建新的 ivp6_addresses，您要做的就是在创建计算机时建立计算机和地址之间的关联。您可以使用第三个表来定义所有计算机/ivp6 关系，也可以稍微调整模型定义。下面是如何在不添加第三个表的情况下执行此操作。

这种关系在措辞上似乎有点倒退，但 rails 会通过在计算机表中找到 ivp6_address_id 来找到 ipv6 关联。如果是相反的方式，您将需要为每台创建的计算机创建一个新的 ivp6_address，这不是您所说的您想要的。确保您在计算机表中有适当的 id 列用于 ivp6_address_id 或您要使用的任何外键。

电脑型号：

```
class Computer < ActiveRecord::Base
  belongs_to :ipv6_address
  ... 
```

IPv6地址模型：

```
class Ipv6Address < ActiveRecord::Base
  attr_accessible :ip_address
  has_many :computers
  ... 
```

然后摆脱计算机表单中的嵌套字段，并在提交表单时添加以下行以建立关联。

```
<%= form_for( @computer ) do |f| %>
   <!--All the computer fields you need-->
  <%= collection_select(:computer, :ipv6_address_ids, Ipv6Address.all, :id, :ip_address, {}, { :multiple => true } )%>
  <% f.button :submit %>
<% end %> 
```

# javascript - 在 JS 中减慢 .push() 间隔

> ID：12445779
> 
> 赞同：1
> 
> 时间：2012-09-16T09:27:07.820
> 
> 标签：javascript, arrays, instance

`player.fire`是一个布尔值，**如果**空格**键**在`keydown`. 一切正常。

我遇到的问题是控制数组`asteroids.firing.push`间隔。现在，它添加了**一些实例**，即使我*轻轻*点击空格键也是如此。我正在使用`requestAnimationFrame`.

如何控制`push`间隔？

```
 if(player.fire){
        var angle = thisShip.rot, 
        hyp = 10; //speed

        var vX = Math.cos(angle) * hyp, 
        vY = Math.sin(angle) * hyp;

        asteroids.firing.push(new asteroids.model.fire(thisShip.x, thisShip.y, vX, vY));
    } 
```

我已经尝试过类似的方法，但它并没有减慢`push`间隔，而是产生了一种脉冲效果，一次又一次地重新生成发射序列。

```
 ...
    if(player.fire){
            fireInterval(thisShip);
    }

    function fireInterval(thisShip){
        var angle = thisShip.rot, 
            hyp = 10; //speed

        var vX = Math.cos(angle) * hyp, 
        vY = Math.sin(angle) * hyp;

        asteroids.firing.push(new asteroids.model.fire(thisShip.x, thisShip.y, vX, vY));

        setTimeout(function(){
            fireInterval(thisShip);
        }, 500);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:37:11.827

发生的事情是你每次更新都调用这个函数。我不知道您的引擎是什么样的，但如果您使用`requestAnimationFrame`，则可能高达 60fps，或者如果您只是尽可能快地循环，则可能会更高，并且更新与绘图无关。

你需要做的是在舰炮上设置某种状态。不管它是什么...

```
thisShip.cooldownTime = 250; //ms
thisShip.lastFired =    oldTimestamp;

if (currentTime - thisShip.lastFired >= thisShip.cooldownTime) {
    thisShip.fire(); // push the model, set lastFired to current time, etc...
} 
```

此外，就其他人的建议而言：

我不确定你是如何实现监听键盘事件的......
但是在 JS 中处理键，我最倾向于做的是让键盘触发尽可能多的`keydown`事件`keyup`和它想要的事件。与缓冲不同的是，key-event 函数所做的***唯一***一件事就是告诉`Keyboard`对象一个键是按下还是按下。

在更新期间轮询该`Keyboard`对象。

```
document.addEventListener("keydown", function (e) {
    var key = e.keyCode;
    if (!!Keyboard[key]) { return; } 
    Keyboard[key] = e.timeStamp;
});

document.addEventListener("keyup", function (e) {
    var key = e.keyCode;
    delete Keyboard[key];
}); 
```

轮询以查看密钥是否已关闭。通过将键的值设置为`e.timeStamp`，您现在可以知道他们何时开始按住它，因此您可以控制您的船多久开火一次。

更好的是，您可以设置一些抽象系统，例如：

```
var Keymap = { SPACE : 32, A : 65, ... };
Player1.controls = { FIRE : "SPACE" };

var code = Keymap[Player1.controls.FIRE],
    pressedSince = Keyboard[code]; // timestamp || undefined 
```

现在你有一些东西可以与你的冷却时间和门进行比较。无论他们敲击的速度有多快，或者键盘是否默认通过 turbo-fire 工作，您都应该拥有防止 turbo-fire 所需的所有数据点，以允许按住自动触发（以 250ms 为门控，或门控到屏幕上只有 3 个子弹，或其他），如果您检测到该键一直被轻敲，则门控到一个较小的值，以让按钮捣碎者比按钮持有人稍有优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:39:04.570

我假设您`if(player.fire){...}`的游戏循环中有部分代码？如果是这样，这就是它经常被触发的原因。对此最常用的解决方案是在一次火灾事件发生后有一个“冷静”期，然后用户才能再次开火。例如：

```
if ( player.fireWait > 0 ) {
  player.fireWait--;
}

if( player.fire && (player.fireWait == 0) ){
  player.fireWait = 20;
  fire( thisShip );
} 
```

上面的一个问题是，如果用户反复点击开火按钮，他们将无法再次开火（直到`.fireWait`计数器再次击中 0）。这就是为什么无论你的 onkeydown 是什么，你都需要这样做：

```
player.fireWait = 0; 
```

但是另一张海报正确地指出，您还需要使用键盘缓冲区才能使您的射击机制像大多数游戏一样工作。如果没有缓冲，如果用户按住空间，您将获得单次射击……然后在一段时间后您会突然获得快速射击。这样做的原因是因为`keydown`它与正常的键盘输入相关，如果你按住一个键，你会看到发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:33:27.113

您需要使用某种键盘缓冲区。
我建议看看[这篇博文](http://remysharp.com/2010/07/21/throttling-function-calls/)。
评论也很有用，从中你可以找到：[这个网站](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

您现在所做的只是将开火动作延迟半秒，但仍会发送所有捕获的“keydown”。
我也会考虑使用“keyup”，可能会更好。

# asp.net-mvc - 弹出对话框

> ID：12445780
> 
> 赞同：0
> 
> 时间：2012-09-16T09:27:12.490
> 
> 标签：asp.net-mvc, vb.net, jquery, razor

我正在使用 ASP.net MVC3，用剃刀在 VB.net 中编码。

当用户执行某些操作时，有什么方法可以让我弹出一个小对话框？类似于 JQuery 框 - 因此，当用户创建帐户时，他们会出现一个确认弹出框，然后被重定向，或者如果他们输入的语法不正确，他们将在按钮单击时看到一个错误对话框，描述他们的问题。

我试图集成一个包`Nuget`来解决这个问题，但是在安装它时遇到了重大问题。

所以我想知道 mcv EF 或 razor 环境是否有任何内置的，我可以在视图中简单地键入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:34:13.097

我一直使用 jquery 的 .dialog：http://jqueryui.com/demos/dialog/

没有任何内置的。

# css - 停止浮动向右下降到下一行（Float Drop）

> ID：12445782
> 
> 赞同：0
> 
> 时间：2012-09-16T09:28:08.887
> 
> 标签：css, css-float

[我在http://jsfiddle.net/ssCqe/](http://jsfiddle.net/ssCqe/)有以下代码，我试图让文本“图标”不要放到下一行。

**更新**

似乎它在 Firefox 10.0.1 中不起作用

请问有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:30:18.467

如果您从中删除`white-space: nowrap;`，`UL.jqueryFileTree LI`则适用于 FF、IE9 和 Chrome

检查它在[JsFiddle](http://jsfiddle.net/gionaf/wW9tN/1/)

# php - ajax多次上传doenst php文件处理

> ID：12445784
> 
> 赞同：2
> 
> 时间：2012-09-16T09:28:34.920
> 
> 标签：php, jquery, ajax, validation, multifile-uploader

嗨，我正在使用[Fineupload 多文件上传脚本](https://github.com/valums/file-uploader#troubleshooting)，但有些东西我无法掌握。我正在尝试制作一个 php 服务器端文件处理脚本。

当你包括

```
<script type="text/javascript">
$(document).ready(function() {
    var uploader = new qq.FileUploader({
        element: $('#manualUploadModeExample')[0],
        action: "core/up.php",
        autoUpload: false,
        demoMode: false,
        debug: false,
        multiple: true,
        maxConnections: 3,
        disableCancelForFormUploads: false,
        //0 is geen limit getal in bytes
        minSizeLimit: 0,
        sizeLimit: 0,
        inputName: "qqfile",
        uploadButtonText: "Select Files",
        cancelButtonText: "verwijder",
        failUploadText: "Upload mislukt"
    });

    $('#triggerUpload').click(function() {
        uploader.uploadStoredFiles();
    });
}); 
```

显示它的 html 是

```
 <div id="Upload">
    <noscript>
        <p>Please enable JavaScript to use file uploader.</p>
        <!-- or put a simple form for upload here -->
    </noscript>
    <ul id="manualUploadModeExample" class="unstyled"></ul>
    <span id="triggerUpload" class="btn btn-primary">Upload Queued Files</span>
</div> 
```

现在`up.php`我想做文件验证和东西，但我无法获取文件信息

编码

```
<?php
if(isset($_FILES["qqfile"])){
    echo json_encode(array('error' => "There is a file to work with"));
}
else
{
    echo json_encode(array('error' => "there is no file set"));
}
?> 
```

给出错误没有文件设置为上传表单上的错误。所以它确实从 php 文件中收到了错误……但它发送了什么？我怎样才能找到它

当我发回成功消息时

```
echo json_encode(array('success' => TRUE)); 
```

上传表格说文件上传变成绿色..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T08:06:20.743

他我不知道你是否已经找到了解决方案，但也许你可以看看这个：

## 第一个html表单

只需构建一个没有提交按钮但只有一个按钮按钮的普通 html 表单。[请注意，我的解决方案还有一个精美的加载栏！]

```
<form enctype="multipart/form-data" id="myform">    
    <input type="text" name="some_usual_form_data" />
    <br>
    <input type="text" name="some_other_usual_form_data" />
    <br>
    <input type="file" multiple name="file[]" id="image" /> <sub>note that you have to use [] behind the name or php wil only see one file</sub>
    <br>
    <input type="button" value="Upload files" class="upload" />
</form>
<progress value="0" max="100"></progress>
<hr>
<div id="content_here_please"></div> 
```

现在您可以添加`accept="image/*"`或[以这种方式](http://www.w3schools.com/tags/att_input_accept.asp)仅选择您需要或想要的文件类型。

## 然后用 jquery/javascript 上传

看起来像你的，但更好。

```
$(document).ready(function () { 
    $('body').on('click', '.upload', function(){
        // Get the form data. This serializes the entire form. pritty easy huh!
        var form = new FormData($('#myform')[0]);

        // Make the ajax call
        $.ajax({
            url: 'action.php',
            type: 'POST',
            xhr: function() {
                var myXhr = $.ajaxSettings.xhr();
                if(myXhr.upload){
                    myXhr.upload.addEventListener('progress',progress, false);
                }
                return myXhr;
            },
            //add beforesend handler to validate or something
            //beforeSend: functionname,
            success: function (res) {
                $('#content_here_please').html(res);
            },
            //add error handler for when a error occurs if you want!
            //error: errorfunction,
            data: form,
            // this is the important stuf you need to overide the usual post behavior
            cache: false,
            contentType: false,
            processData: false
        });
    });
}); 

// Yes outside of the .ready space becouse this is a function not an event listner!
function progress(e){
    if(e.lengthComputable){
        //this makes a nice fancy progress bar
        $('progress').attr({value:e.loaded,max:e.total});
    }
} 
```

相信我，我很容易做到这一点。但是，您可以在此处创建一个 javascript 函数来验证文件以及是否需要整个表单。只需将您验证函数名称放在后面，`beforeSend: youvalfunctname`您也可以在那里创建一个回调，例如`beforeSend: function(){ //do stuf here }`. 当上传时确实发生错误时，您可以使用`error:`.

## 服务器端 php.ini 终于

你可以在这里做你想做的事，但我只是举一个例子，你可以怎么做。

```
<?php

    $succeed = 0;
    $error = 0;
    $thegoodstuf = '';
    foreach($_FILES["file"]["error"] as $key => $value) {
        if ($value == UPLOAD_ERR_OK){
            $succeed++;

            //took this from: "https://stackoverflow.com/questions/7563658/php-check-file-extension"
            //you can loop through different file types
            $file_parts = pathinfo($filename);
            switch($file_parts['extension'])
            {
                case "jpg":

                    //do something with jpg

                break;

                case "exe":

                    // do sometinhg with exe

                break;

                case "": // Handle file extension for files ending in '.'
                case NULL: // Handle no file extension
                break;
            }

            $name = $_FILES['file']['name'][$key];

            // replace file to where you want
            copy($_FILES['file']['tmp_name'][$key], './upload/'.$name);

            $size = filesize($_FILES['file']['tmp_name'][$key]);
            // make some nice html to send back
            $thegoodstuf .= "
                                <br>
                                <hr>
                                <br>

                                <h2>File $succeed - $name</h2>
                                <br>
                                    give some specs:
                                    <br>
                                    size: $size bytes
            ";
        }
        else{
            $error++;
        }
    }

    echo 'Good lord vader '.$succeed.' files where uploaded with success!<br>';

    if($error){
        echo 'shameful display! '.$error.' files where not properly uploaded!<br>';
    }

    echo '<br>O jeah there was a field containing some usual form data: '. $_REQUEST['some_usual_form_data'];
    echo '<br>O jeah there was a field containing some usual form data: '. $_REQUEST['some_other_usual_form_data'];

    echo $thegoodstuf;

?> 
```

你也可以看看专门为上传图片制作的演示：[注意并不总是在线](http://paperboat.tk/test/multiple%20image%20upload%20ajax/)

[这里也是演示](https://stackoverflow.com/questions/15259632/upload-multiple-images-with-jquery-ajax-and-process-them-with-php/15327377#15327377)的代码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:40:14.667

我以前用过qqFileUploader。我检查了我的代码，这是我访问该文件的方式。你需要使用`$uploader ->file->getName()`.

```
$allowedExtensions = array('jpg','gif','png');
$sizeLimit = 2 * 1024 * 1024; //2mb
$uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
$tmp = $uploader->file->getName(); // this is your $_FILES["qqfile"]
$result = $uploader->handleUpload('/path/where/to/upload/','filename.jpg');
if ($result['success']) {
    // successfully moved the file from temp location
} else {
    // not, error
} 
```

# youtube-javascript-api - loadByvideoId 不是函数

> ID：12445789
> 
> 赞同：0
> 
> 时间：2012-09-16T09:29:28.853
> 
> 标签：youtube-javascript-api

下面的小提琴在 chrome、fox 和 iE 中打开时工作正常

```
'http://jsfiddle.net/wmdPN/' 
```

当我从小提琴中复制代码并在我的机器中使用它时，它无法正常工作，因为 o.loadVideoById 不是函数。为什么呢 ？我究竟做错了什么？

我使用的代码如下（和fiddle一样）

```
 <html>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js">               </script>

<a name="ytplayer"></a>
<div id="ytplayer_div1">You need Flash player 8+ and JavaScript
    enabled to view this video.</div>
<div id="ytplayer_div2"></div>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js"></script>
<script type="text/javascript">

    var ytplayer_playlist = [];
    var ytplayer_playitem = 0;

    function ytplayer_render_player() {
        if (/\d+/.test(window.location.hash)) {
            ytplayer_playitem = parseInt(/\d+/.exec(window.location.hash)) - 1;
        }
        swfobject.embedSWF('http://www.youtube.com/v/'
                + ytplayer_playlist[ytplayer_playitem]
                + '&enablejsapi=1&rel=0&fs=1'
                + (/\d+/.test(window.location.hash) ? '&autoplay=1' : ''),
                'ytplayer_div1', '425', '344', '8', null, null, {
                    allowScriptAccess : 'always',
                    allowFullScreen : 'true'
                }, {
                    id : 'ytplayer_object'
                });
    }

    function ytplayer_render_playlist() {
        for ( var i = 0; i < ytplayer_playlist.length; i++) {
            var img = document.createElement("img");
            img.src = "http://img.youtube.com/vi/" + ytplayer_playlist[i]
                    + "/default.jpg";
            var a = document.createElement("a");
            a.href = "#ytplayer";
            //
            // Thanks to some nice people who answered this question:
            // http://stackoverflow.com/questions/1552941/variables-in-anonymous-functions-can-someone-explain-the-following
            //
            a.onclick = (

            function(j) {
                return function() {
                    ytplayer_playitem = j;
                    ytplayer_playlazy(1000);
                };
            })(i);
            a.appendChild(img);
            document.getElementById("ytplayer_div2").appendChild(a);
        }
    }

    function ytplayer_playlazy(delay) {
        //
        // Thanks to the anonymous person posted this tip:
        // http://www.tipstrs.com/tip/1084/Static-variables-in-Javascript
        //
        if (typeof ytplayer_playlazy.timeoutid != 'undefined') {
            window.clearTimeout(ytplayer_playlazy.timeoutid);
        }
        ytplayer_playlazy.timeoutid = window.setTimeout(ytplayer_play,
                delay);
    }

    function ytplayer_play() {
        var o = document.getElementById('ytplayer_object');
        if (o) {
            o.loadVideoById(ytplayer_playlist[ytplayer_playitem]);
        }
    }

     function onYouTubePlayerReady(playerid) {
        var o = document.getElementById('ytplayer_object');
        if (o) {
    o.addEventListener("onStateChange",        "ytplayer_statechange");
            o.addEventListener("onError", "ytplayer_error");
        }
    }
    //
    //State Change Handler
    //* Sets up the video index variable
    //* Calls the lazy play function
    //

    function ytplayer_statechange(state) {
        if (state == 0) {
            ytplayer_playitem += 1;
            ytplayer_playitem %= ytplayer_playlist.length;
            ytplayer_playlazy(5000);
        }
    }
    //
    //Error Handler
    //* Sets up the video index variable
    //* Calls the lazy play function
    //

    function ytplayer_error(error) {
        if (error) {
            ytplayer_playitem += 1;
            ytplayer_playitem %= ytplayer_playlist.length;
            ytplayer_playlazy(5000);
        }
    }
    //
    //Add items to the playlist one-by-one
    //
    ytplayer_playlist.push('tGvHNNOLnCk');
    ytplayer_playlist.push('_-8IufkbuD0');
    ytplayer_playlist.push('wvsboPUjrGc');
    ytplayer_playlist.push('8To-6VIJZRE');
    ytplayer_playlist.push('8pdkEJ0nFBg');
    //
    //These lines have been moved to the bottom
    //
    ytplayer_render_player();
    ytplayer_render_playlist();
</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:41:12.297

首先是**loadVideoById**而不是 loadByvideoId。但我认为这是一个错字。

这里有同样的问题，但我自己的代码。问题是当 iframe 由于某种原因不可见时，iframe 不会加载内容，并且 API 不会扩展对象（loadVideoById 不存在的原因）。此外，函数 window.onPlayerReady 在不可见时将永远不会被调用。这也可能是您的问题。确保 iframe 在页面上确实可见。

我使用的“技巧”是使用一些 CSS 将 iframe 加载到可见区域，加载后我更改类名，以便将其放置在正确的位置/位置：

CSS：

```
#player {position:relative; width:200px; height:200px; ....... }
#player.loading {position:fixed; top:0; left:0; width:1px;height:1px; overflow:hidden; } 
```

在 window.onPlayerReady 回调中，我从对象中删除了“正在加载”类，例如（使用 jQuery）：

```
$j('#player').removeClass('loading').prop({width:'',height:''}).css({width:'',height:''}); 
```

我还删除了 API 添加到对象的宽度和高度，以便能够设置宽度 css 的样式。

注意：我创建了宽度和高度为 1px 的 YT.Player 类。

而已。

# scala - SBT 总是下载包/scala 库

> ID：12445791
> 
> 赞同：7
> 
> 时间：2012-09-16T09:30:16.057
> 
> 标签：scala, sbt

我最近在 Windows XP SP3 机器上安装了 SBT 以开始使用 Scala。当我最初启动它时，它开始从远程位置获取所有 JAR - 非常类似于 Maven 或任何其他依赖项管理工具。

**但是**，每当我更改目录并启动时`sbt`，它就会再次开始下载整个解决方案。有没有一种维护全局缓存的方法，即工件只下载一次，而不是每次我更改工作目录时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T12:25:38.273

如果您在新目录中运行相同版本的 sbt，它将首先在本地 ivy2 缓存中查找。它仍然会*检查*所有资源，但如果它们已经存在，则会在本地获取它们。

但是，如果您使用的是 SBT extras，如果您更改为不同版本的 SBT，它可能会重新下载，因为它会为每个版本创建一个缓存。无论如何，这就是我在 Ubuntu 上的经验。

您可能遇到过某些类型的 sbt 插件，例如 sbt-idea，可能会下载其他资源，例如源存储库和文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-02T11:08:37.957

就我而言（Debian），每次运行`sbt`它都会从`Getting org.scala-sbt sbt 0.13.16`. 我没有本地`ivy2`捕获。解决方案是将`.ivy2`文件夹复制`/root`到您的用户主页`/home/username`并授予用户访问权限。

# java - JPA Criteria API：按一对多关系中的子实体数量排序

> ID：12445794
> 
> 赞同：3
> 
> 时间：2012-09-16T09:30:55.650
> 
> 标签：java, hibernate, criteria-api

我有 2 个实体：Faculty 和 Course，它们是一对多的关系，也就是说 - Faculty 可以提供多门课程，但也可以不提供任何课程。

我正在尝试按他们提供的课程数量对学院进行排序，这样做：

```
criteriaQuery.orderBy(criteriaBuilder.asc(criteriaBuilder.size(root.get(Faculty_.courses)))); 
```

问题是它失败了

```
criteriaBuilder.size(root.get(Faculty_.courses)) 
```

带有 NullPointerException 因为 Faculty_.courses 对于某些学院为空。请帮助我以更好的方式编写此内容，以便考虑课程为空的情况。

注意：我必须使用 JPA Criteria API，因为这是带有分页和内容的更大查询的一部分。因此，使用查询语言编写它不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:47:29.027

您应该以始终有一个列表（或集合）或课程的方式编写 Faculty，它是空的，而不是`null`如果没有：

```
@OneToMany
private Set<Course> courses = new HashSet<Course>(); 
```

# package - Sublime Text 2 Package Control - 尝试安装新包时出错

> ID：12445799
> 
> 赞同：0
> 
> 时间：2012-09-16T09:31:13.403
> 
> 标签：package, sublimetext2

我已经升级到最新版本的 ST2，当我尝试通过包控制安装包时，我在控制台中收到以下错误：

```
 Exception in thread Thread-14:
 Traceback (most recent call last):
 File ".\threading.py", line 532, in __bootstrap_inner
 File ".\Package Control.py", line 1890, in run
 File ".\Package Control.py", line 1759, in make_package_list
 File ".\Package Control.py", line 1182, in list_available_packages
 AttributeError: 'RepositoryDownloader' object has no attribute 'renamed_packages' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:29:26.173

当抛出异常时，它通常是一个错误。在这种情况下，Package Control 指的是它本身没有的成员变量。

看起来像包控制中的内部错误。请在 Github 上提交问题：

[https://github.com/wbond/sublime_package_control](https://github.com/wbond/sublime_package_control)

# ruby-on-rails - Rails 可以扫描能力.rb

> ID：12445800
> 
> 赞同：1
> 
> 时间：2012-09-16T09:31:18.517
> 
> 标签：ruby-on-rails, cancan

并开始学习cancan+devise

我有“用户”表（设计）

我有 'posts' 表（带有 'user_id' 字段）

我有“角色”表（带有“名称”字段）

*   1 - 管理员
*   2 - 用户

我有 users_roles（带有 'user_id' 和 'role_id' ）

我创建了 2 个具有“用户”角色的用户

并创建 1 个具有“管理员”角色的用户

```
user.rb
  has_many :posts
  has_many :users_roles
  has_many :roles, :through => :users_roles

role.rb
  has_many :users_roles
  has_many :users, :through => :users_roles

users_role.rb
  belongs_to :user
  belongs_to :role 
```

还有一个问题：

```
i create ability.rb 
```

和

```
 def initialize(user)
    user ||= User.new
    if user.persisted?
        #loged in
        can :read, Post
        can :create, Post
        can :update, Post , :user_id => user.id
        can :destroy, Post , :user_id => user.id
    else
        #not logged
        can :read, Post
    end 
```

在我的意见/帖子/index.html.erb

```
<% @posts.each do |post| %>
  <tr>
    <td><%= post.user.email %></td>
    <td><%= post.title %></td>
    <td><%= post.text %></td>
    <td><%= link_to 'Show', post %></td>
      <% if can? :update, Post %>
        <% if current_user.id == post.user.id %>
          <td><%= link_to 'Edit', edit_post_path(post) %></td>
        <% end %>  
      <% end %>
      <% if can? :destroy, Post %>
        <% if current_user.id == post.user.id %>
          <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
    <% end %>  
  </tr>

<% end %>
</table>

<br />
<!-- ???почему Post ? -->
<% if can? :create, Post %>
  <%= link_to 'New Post', new_post_path %>
<% end %> 
```

在这种情况下，我检查，如果用户登录 - 他可以阅读和创建、更新、销毁（如果他是 autor），如果用户没有登录（访客） - 只能阅读

但我不知道如何改变我的ability.rb 来做到这一点：

*   我有客人（只读）
*   我有用户（可以读取和创建、更新、销毁（如果他是作者））
*   我有一个管理员（可以读取、创建、更新、销毁）

**注意**我已经有角色表（有 2 个角色）和 3 个用户（1 个具有管理员角色，2 个具有用户角色）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:36:32.687

这就是我在我的应用程序中实现 cancan 来管理角色和来宾用户的方式。

只需使用 a`if user.role == role` 来验证用户是否具有正确的角色。

```
class Ability
include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user
    if user.role == "author"
      # 
      can :read, Post
      can :create, Post
      can :update, Post , :user_id => user.id
      can :destroy, Post , :user_id => user.id

      # a simple way to realize read create update and destroy is :manage
      # can :manage, Post, :user_id => user.id

    else
      if user.role == "admin"
        # User with role admin can manage all on all models 
        can :manage, :all
      else
        # Guest user can only read something
        can :read, Post
        # or
        # can :read, [SomeModel1, Somemodel2]
        # can :read, :all     # this means he can read all models 
end 
```

# java - android获取URL路径

> ID：12445801
> 
> 赞同：2
> 
> 时间：2012-09-16T09:31:26.667
> 
> 标签：java, android, url

我有一个字符串：

```
public://imageifarm/3600.jpg 
```

我怎样才能提取

```
imageifarm/3600.jpg 
```

使用 android 分手？

到目前为止我已经尝试过：

```
URL drupalQuestionNodeImageURI = new URL("public://imageifarm/3600.jpg");
Log.d("TAG", drupalQuestionNodeImageURI.getPath()); 
```

但它抛出了这个异常：

```
09-16 17:24:39.992: W/System.err(3763): java.net.MalformedURLException: Unknown protocol: public 
```

我该如何解决这个问题？

我知道我可以使用正则表达式，但这似乎违背了 URL(URI) 在这种情况下的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:39:50.967

你应该使用 android.net.Uri

```
Uri mUri = Uri.parse(public://imageifarm/3600.jpg);    
String extract = mUri.getEncodedSchemeSpecificPart(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:36:19.893

使用 java.net.URI，而不是 java.net.URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T09:40:31.257

如果您想使用 URL 类（当您的图像位于 Internet 上时），您必须提供有效的 URL（从有效的 URL 前缀开始，如 http://、https:// 等）。在您的情况下，您应该使用 Uri 类。Uri 对象可以指向本地文件系统中的文件。例如：

```
Uri.fromFile(new File("public://imageifarm/3600.jpg")); 
```

# ruby-on-rails - 使用 Dalli 和 memcached 获取缓存值

> ID：12445809
> 
> 赞同：4
> 
> 时间：2012-09-16T09:32:53.590
> 
> 标签：ruby-on-rails, memcached, dalli

我正在尝试使用 Dalli 与 Rails 应用程序中的缓存存储进行交互。我只是在做片段缓存，并像这样设置了我的开发配置：

```
#config.action_controller.perform_caching = true
config.cache_store = :dalli_store 
```

这样它就不会缓存所有内容。我对缓存感兴趣的片段是这样的：

```
<% cache("home_main", :expires_in => 1.minute) do %>
<div class='tabbed-content content-1'>
  <%=render :partial => 'shared/launch-main', :locals => { :locations => @locations } %>
</div>
<% end %> 
```

当我进去跑步时

```
ruby-1.9.2-p290 :019 > Rails.cache.stats
ruby-1.9.2-p290 :019 > y _ 
```

我得到：

```
conn_yields: '0'
 bytes: '17153'
 curr_items: '1'
 total_items: '5'
 evictions: '0'
 reclaimed: '0' 
```

现在有没有办法取回那个片段缓存？还是去看？我试过：

```
Rails.cache.fetch('home_main') 
```

但这行不通。有没有办法让我查看缓存键列表？

谢谢

**编辑#1**

对于@cpuguy83 - 很明显会以 196 毫秒的时间进入数据库 :-(

```
Read fragment views/home_main (2.4ms)
Rendered index/homepage_launch_main.html.erb (2.8ms)
Completed 200 OK in 1623ms (Views: 11.5ms | ActiveRecord: 195.8ms) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T14:28:50.257

片段缓存用您的地址和 URL 为缓存添加前缀......所以您的密钥最终会是这样的：

```
localhost:3000/your/URL/cache_key 
```

您可以通过查看您的开发日志来查看它使用的密钥。

此外，将项目从缓存中拉出是通过在视图中调用缓存自动完成的。当您加载页面时，它会检查缓存中的项目是否有效，如果是则抓取它，如果不是，它会重新生成 HTML 并将其存储在缓存中。

此外，如果您只想从缓存中读取，您应该使用`Rails.cache.read`，`Rails.cache.fetch`如果密钥有效，则通常从缓存中获取，如果不使用提供的块写入缓存。

所以： `Rails.cache.read your_cache_key`将只读取返回与该缓存键一起存储的任何内容（如果有的话）

Fetch 将像这样使用：

```
Rails.cache.fetch your_cache_key do
  # Logic to generate items you want to cache
end 
```

在您看来，调用`<% cache @object do %>`本质上是一个快捷方式`Rails.cache.fetch`

我建议将您的缓存调用更改为以下内容：

```
<% cache ['home_main', @locations.order('updated_at DESC').first] do %>
    # your html here
<% end %> 
```

在这种情况下，缓存键基于最近更新的位置对象。如果更新了位置，则缓存将在下一个请求时丢失，并将重新生成。缓存在这里所做的是调用`cache_key`您最近更新的位置对象。 `cache_key`从您的对象中获取 updated_at 时间戳并将其嵌入到用于存储缓存项目的密钥中。

查看[http://www.broadcastingadam.com/2012/07/advanced_caching_part_1-caching_strategies/](http://www.broadcastingadam.com/2012/07/advanced_caching_part_1-caching_strategies/)以获得关于缓存的精彩教程。还可以处理自动过期缓存的非常好的技巧，而无需使用基于时间的缓存过期或缓存清除程序。

# asp.net - 无法在 Web 用户控件中向 INamingContainer 添加属性

> ID：12445812
> 
> 赞同：1
> 
> 时间：2012-09-16T09:33:19.193
> 
> 标签：asp.net, vb.net, user-controls

我拥有的代码*（如下）*可以工作，除非我将 添加`ref="abc"`到`TemplateItem`标签中。包含它时，我收到此错误：

> 属性“TemplateItem”没有名为“ref”的属性

我该如何解决这个问题？

默认.aspx

```
<%@ Register Src="~/message.ascx" TagName="Message" TagPrefix="uc" %>

<uc:Message ID="msg" runat="server" abc="123" >
    <TemplateItem ref="abc">Hi</TemplateItem>
</uc:Message> 
```

消息.ascx

```
<asp:placeholder runat="server" id="PlaceHolder1" /> 
```

消息.ascx.vb

```
Partial Class message
Inherits System.Web.UI.UserControl

    Public Property abc() As String

    Sub Page_Init()
        If TemplateItem IsNot Nothing Then
            TemplateItem.InstantiateIn(PlaceHolder1)
        End If
    End Sub

    Private m_TemplateItem As ITemplate = Nothing

    <TemplateContainer(GetType(TemplateItem2))> _
    Public Property TemplateItem() As ITemplate
        Get
            Return m_TemplateItem
        End Get
        Set(ByVal value As ITemplate)
            m_TemplateItem = value
        End Set
    End Property

    Public Class TemplateItem2
        Inherits Control
        Implements INamingContainer

        Public Property ref() As String
    End Class

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:50:32.940

你确定它应该是：

```
Public Class TemplateItem2 
```

在底部，而不仅仅是以下内容？：

```
Public Class TemplateItem 
```

（如果您只是想要一个与该属性不同的名称，也许类似`TemplateItemImplementation`或只是`TemplateItemImpl`更清楚？）

另外，我不确定这是如何工作的：

```
 TemplateItem.InstantiateIn(PlaceHolder1) 
```

CompiledTemplate.InstantiateIn() 上的[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.compiledtemplatebuilder.instantiatein%28v=vs.100%29.aspx)说：*此 API 支持 .NET Framework 基础结构，不打算直接从您的代码中使用。*我想这是一个旁注，我假设你已经让它按照你想要的方式工作......

我认为问题与`TemplateItem`该行中的实例化有关；我看不到如何`TemplateItem2`（其中包含属性`ref()`）与`ITemplateItem`. 也许您只需要`TemplateItem2`同时实现`ITemplateItem`？

另一件要尝试的事情是制作`ref()``ITemplateItem`如果可能的属性。也许那个接口变成了的类型`<TemplateItem />`，这可以解释为什么它不包含属性`Ref`？。

（即假设类型由属性的返回类型指定`TemplateItem()`）。

# node.js - 没有Express的Jade模板继承

> ID：12445816
> 
> 赞同：0
> 
> 时间：2012-09-16T09:33:36.590
> 
> 标签：node.js, pug

我想使用 Jade 块继承，但如果我不使用 Express，我不知道该怎么做。根据 Jade 文档，我可以在 Express 中使用块继承，只需添加`app.set('view options', { layout: false });`. 如果没有 Express，我怎么能做到这一点？

[https://github.com/visionmedia/jade](https://github.com/visionmedia/jade)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:15:29.290

你根本不需要 Express 来使用 Jade 的[模板继承](https://github.com/visionmedia/jade#template-inheritance)；你只需要玉：

```
// app.js
var jade = require('jade');

var options = { pretty: true, locals: {} };

jade.renderFile(__dirname + '/home.jade', options, function (err, html) {
    console.log(html);
}); 
```

```
// home.jade
extends core

block body
  h1 Home 
```

```
// core.jade
doctype html
html
  head
    meta(charset='utf-8')
    title Foo
  body
    block body 
```

另一个示例可以在存储库中找到：

*   [`examples/extend.js`](https://github.com/visionmedia/jade/blob/master/examples/extend.js)
*   [`examples/extend.jade`](https://github.com/visionmedia/jade/blob/master/examples/extend.jade)
*   [`examples/extend-layout.jade`](https://github.com/visionmedia/jade/blob/master/examples/extend-layout.jade).

Jade 文档提到`'view options'`为 Express 2.x 设置的原因是因为 Express 自己的（[现在](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)在 3.x 中已不存在）布局是一个竞争特性，应该禁用它以防止在使用 Jade 的继承时发生冲突。

# java - 正则表达式将模式与 java 中的子域匹配会出现问题

> ID：12445818
> 
> 赞同：0
> 
> 时间：2012-09-16T09:34:07.973
> 
> 标签：java, regex

我正在尝试匹配一个 url 的子域，使用`http://([a-z0-9]*.)?example.com/.*`它非常适合这些情况。

```
http://example.com/index.html
http://test.example.com/index.html
http://test1.example.com/index.html
http://www.example.com/122/index.html 
```

但问题是它也与此 URL 匹配。 [http://www.test.com/?q=http://example.com/index.html](http://www.test.com/?q=http://example.com/index.html)

如果具有另一个域的 URL 具有匹配的路径中的 URL。任何人都可以告诉我如何仅匹配当前域。获取主机将起作用，但我需要匹配完整的 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:37:07.097

你知道`.`匹配任何字符吗？

如果您使用正则表达式

```
http://([a-z0-9]*\.)?example\.com/.* 
```

（或者，作为 Java 字符串）

```
"http://([a-z0-9]*\\.)?example\\.com/.*" 
```

它应该可以工作，因为现在该`?q=`部分将不匹配。

这假设您正在使用`.matches()`强制整个字符串匹配的方法。否则，`^`在正则表达式的开头添加 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:37:03.670

最简单的方法是：

```
^http://([a-z0-9]*?\.)?example\.com/.* 
```

^ 匹配字符串中的起始位置。不要将它与 [^ ] 混淆。

# ios - 当第一个请求完成时发出另一个 http 请求 iOS

> ID：12445819
> 
> 赞同：0
> 
> 时间：2012-09-16T09:34:08.057
> 
> 标签：ios, asihttprequest

我想做以下事情：我正在制作一个 ASIFormDataRequest 并且我想在它完成后调用一个新的：

所以我的代码看起来像这样：

```
 ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];
    [request setPostValue:mail forKey:@"email"];
    [request setPostValue:cod forKey:@"code"];
    [request setPostValue:tab forKey:@"table"];
    [request setPostValue:name forKey:@"name"];
    [request startAsynchronous];

- (void)requestFinished:(ASIHTTPRequest *)request
{
   //request 1 is done, invoke request 2
 ASIFormDataRequest *request_2=[ASIFormDataRequest requestWithURL:url];
    [request_2 setDelegate:self];
    [request_2 setPostValue:other_data forKey:@"info"];
    [request_2 setPostValue:phone forKey:@"phone"];
    [request startAsynchronous];
} 
```

而且我不知道我必须在 requestFinished 中放置什么以便确定两个请求中的哪一个已经完成？或者是否有其他方法可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:06:44.067

ASIFormDataRequest 扩展了 ASIHTTPRequest 类，它具有“标签”属性作为 NSInteger 类型。

您可以为您的请求设置不同的标签，当您收到响应时，您可以检查该请求的标签是什么。

这使您可以确定它是哪一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:26:58.217

当不同的请求完成时，您可以调用不同的方法。

```
ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];
[request setDelegate:self];
[request setDidFinishSelector:@selector(firstRequestFinished:)];

- (void)firstRequestFinished:(ASIHTTPRequest *)request
{
   //request 1 is done, invoke request 2
    ASIFormDataRequest *request_2=[ASIFormDataRequest requestWithURL:url];
    [request_2 setDelegate:self];
    // Work with your request, and then
    [request setDidFinishSelector:@selector(secondRequestFinished:)];
    [request startAsynchronous];
}

- (void)secondRequestFinished:(ASIHTTPRequest *)request
{
   //request 2 is done, invoke request 3
    ASIFormDataRequest *request_3=[ASIFormDataRequest requestWithURL:url];
    [request_3 setDelegate:self];
    // Work with your request, and then
    [request setDidFinishSelector:@selector(thirdRequestFinished:)];
    [request startAsynchronous];
}

- (void)thirdRequestFinished:(ASIHTTPRequest *)request
{
   // Do whatever should be done now.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T09:53:49.210

由于您的请求是按顺序执行的，因此只需维护一个整数实例变量/属性，当您启动第一个请求时将其设置为零，并在`requestFinished`.

**补充：**您的代码中还有一个错误：`requestFinished`您应该使用 启动新请求`[request_2 startAsynchronous];`，而不是重新启动以前的请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T10:00:37.223

如果第二个请求不使用第一个的结果，您可以将所有请求放在一个队列中：

```
[self setNetworkQueue:[ASINetworkQueue queue]];
[[self networkQueue] setDelegate:self];
[[self networkQueue] setRequestDidFinishSelector:@selector(requestInQeuFinished:)];
[[self networkQueue] setRequestDidFailSelector:@selector(requestFailed:)];
[[self networkQueue] setQueueDidFinishSelector:@selector(queueFinished:)];

for (NSString *tmpDic in array) 
{
    ASIHTTPRequest *link= [ASIHTTPRequest requestWithURL:[NSURL URLWithString:@"link"]];
    [[self networkQueue] addOperation:request];
}

[[self networkQueue] go]; 
```

除了[Martin R](https://stackoverflow.com/users/1187415/martin-r)响应之外，您还可以使用 [[self networkQueue] requestsCount] 来获取**REST**中的请求数`requestInQeuFinished:`。

# php - 插入数据前搜索mysql数据库

> ID：12445827
> 
> 赞同：0
> 
> 时间：2012-09-16T09:34:56.677
> 
> 标签：php, mysql, html, forms

我不能完全考虑如何使用 mysql 和 php 来做到这一点。基本上我希望能够将数据提交到 mysql 数据库中，但在插入之前，它会检查该条目是否已经存在。

```
$guid=$_POST['guid'];
$name=$_POST['name'];
//Username
$user="webhost";
//Password
$pass="*******";
//IP To Host
$ip="***********";
//Database
$db="dayz2";
//Table
$table="whitelist";

//Database Connection
$con=@mysql_connect("$ip", "$user", "$pass")
            or die(mysql_error());

//Select Database
$dbcon=@mysql_select_db($db, $con)
            or die(mysql_error());
$dupesql = "SELECT * FROM $table where (name = '$name' AND guid = '$guid')";

$duperaw = mysql_query($dupesql);

if (mysql_num_rows($duberaw) > 0) {
  echo "Entry Already Exists";
}
else {
//Query Data Into Whitelist Table
$sql="INSERT INTO $table (name, guid) VALUES ('$name', '$guid')";

//Submit Data into Whitelist Table
$result=@mysql_query($sql, $con) or die(mysql_error());
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:39:07.973

你可以用另一种方式来做，而不是：

> 将数据提交到 mysql 数据库，但在插入之前，它将检查该条目是否已存在。

你可以做：

> 如果不存在，则将数据插入到 mysql 数据库中，否则忽略它们

就像是 ：

```
INSERT IGNORE INTO table
INSERT IGNORE INTO yourtablename
SET fieldname = 'blah'
,.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:39:39.203

这取决于您要做什么 - 您的查询的确切标准是什么？

你有几个选择：

*   `INSERT IGNORE ...`如果您只想插入没有重复主键的新行，请使用。请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。

*   用于`INSERT ... ON DUPLICATE KEY UPDATE`插入新行并更新存在主键匹配的行。请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

*   先使用普通的 SQL来提取结果，然后再对结果执行业务逻辑，然后再根据您的要求`SELECT ...`决定使用哪种方法`INSERT ...`。`UPDATE ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:39:41.903

这取决于您希望在条目存在时如何处理大小写。我想抛出一些错误，然后您可以为插入事件创建表触发器并在那里进行一些检查，但这会很慢，因为每个插入都会执行此检查。

# objective-c - 设计师的任何存折设计工具

> ID：12445828
> 
> 赞同：2
> 
> 时间：2012-09-16T09:35:04.370
> 
> 标签：objective-c, json, ios6, passbook

我想知道是否有任何工具可以设计存折的布局。

我在xcode中没有找到任何东西。有经验的设计师可以读写一个简单的 json，但如果有任何工具可以帮助加快这个设计过程，那就更好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T03:09:46.460

通行证设计器可在[http://create.passkit.com 获得](http://create.passkit.com)

您可以免费使用它来轻松设计和创建在 Web 界面中显示的通行证，与它们在 Passbook 中的显示完全相同。

使用开发者帐户，您可以快速建立自己的收入来源！详情将于近期公布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T09:07:37.493

您需要了解**Passbook**应用程序，因为您只能从 Apple 进行更改。

有一个会话视频叫做

> [会话 301 - 介绍存折，第 1 部分](http://developer.apple.com/itunes/?destination=adc.apple.com.16352034415)

您也可以在[网络浏览器](https://developer.apple.com/videos/wwdc/2012/?id=301)中看到它。

这将向您解释模型以及您可以更改为类型、颜色、文本的内容。

如果你只是想找一个 PhotoShop 文件来“玩”，给[Takahashi Alex](http://dribbble.com/takahashi_alex)它自己的[Passbook GUI PSD](http://dribbble.com/shots/677761-Passbook-GUI-PSD)试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:27:11.960

我是[Passdock](https://api.passdock.com)的创建者之一，这正是您正在寻找的。它是一个网页设计工具，可让您在不了解任何 JSON 结构的情况下创建 Pass。它是免费的，您还可以使用它来将通行证传送到设备。

如果您有任何问题，我很乐意为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:12:06.337

您可以通过[http://passsource.com](http://passsource.com)制作存折文件。

在这个站点，您可以测试存折的定制。

# php - jQuery AJAX POST 给出未定义的索引

> ID：12445829
> 
> 赞同：0
> 
> 时间：2012-09-16T09:35:26.177
> 
> 标签：php, javascript, jquery, post

我的 eventinfo.php 给出以下输出：

```
<br />
<b>Notice</b>:  Undefined index:  club in <b>/homepages/19/d361310357/htdocs/guestvibe/wp-content/themes/yasmin/guestvibe/eventinfo.php</b> on line <b>11</b><br />
[] 
```

HTML (index.php):

```
<select name="club" class="dropdown" id="club">
<?php getClubs(); ?>
</select> 
```

jQuery (index.php):

```
<script type="text/javascript">

    $(document).ready(function() {
        $.ajax({
            type: "POST",
            url: "http://www.guestvibe.com/wp-content/themes/yasmin/guestvibe/eventinfo.php",
            data:  $('#club').serialize(),
            success: function(data) {
                $('#rightbox_inside').html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><hr><p><b>Entry:</b> ' + data[0].entry + '</p><p><b>Queue jump:</b> ' + data[0].queuejump + '</p><br><p><i>Guestlist closes at ' + data[0].closing + '</i></p>');
                },
            dataType: "json"
        });
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "POST",
            url: "http://www.guestvibe.com/wp-content/themes/yasmin/guestvibe/eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#rightbox_inside').hide().html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><hr><p><b>Entry:</b> ' + data[0].entry + '</p><p><b>Queue jump:</b> ' + data[0].queuejump + '</p><br><p><i>Guestlist closes at ' + data[0].closing + '</i></p>').fadeIn('500');
                },
            dataType: "json"
        });

    });

</script> 
```

我可以从 jQuery 运行警报，因此它处于活动状态。

我已经从旧版本的网站上复制了这个，但是我已经更改了文件结构（通过移动到 WordPress）所以我怀疑这些变量可能甚至没有首先到达 eventinfo.php ......

index.php 在 wp-content/themes/cambridge 和 eventinfo.php 在 wp-content/themes/yasmin/guestvibe 但我试图通过完整引用 URL 来避免结构问题。

有任何想法吗？

**编辑**

抱歉，忘记了 eventinfo.php。我怀疑只有第 3 行是相关的，但我可能错了。

```
include('functions.php');
connect();
$night = $_POST['club'];
$night = mysql_real_escape_string($night);

$query = "SELECT * FROM nights WHERE name = '" .$night. "'";

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
        $items[] = array("entry"=>$row['entry'], "day"=>getLongDateString($row['day']), "queuejump"=>$row['queue jump'], "closing"=>$row['closing']);
        }
    } 

    mysql_close(); 
    // convert into JSON format and print

    echo json_encode($items);
?> 
```

vardump[$_POST] 给出：

```
array(0) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:53:47.307

在你的 index.php 文件中，你有这个：

```
<select name="club" class="dropdown" id="club">
<?php getClubs(); ?>
</select> 
```

将此更改为**（更新）**：

```
<form name="myform" id="myform" action="submit.php" method="POST">
<select name="club" class="dropdown">
<?php getClubs(); ?>
</select>
</form> 
```

然后将您的代码更改`$('#myform').serialize()`为`$('#club').serialize()`

$_POST['club'] 为空，这就是您收到通知的原因。它是空的，因为它没有被正确提交。必须提交表单，而不是选择元素。表单本身必须是`serialize()`，而不是 select 元素。

# mysql - 休眠：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException

> ID：12445831
> 
> 赞同：1
> 
> 时间：2012-09-16T09:35:47.037
> 
> 标签：mysql, hibernate

使用休眠将对象保存到数据库时，有时会因为对象中的某些字段超过`varchar`数据库中定义的最大长度而失败。

因此我使用以下方法：

1.  尝试保存
2.  如果得到`DataException`，然后我将对象中的字段截断为 db 定义中指定的最大长度，然后再次尝试保存。

但是，在截断后的第二次保存中，出现以下异常：

```
hibernate: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails 
```

这是相关的代码，你发现它有什么问题吗？

```
public static void saveLenientObject(Object obj){

    try {
        save2(rec);
    } catch (org.hibernate.exception.DataException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        saveLenientObject(rec, e);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
private static void saveLenientObject(Object rec, DataException e) {
    Util.truncateObject(rec);
    System.out.println("after truncation ");
    save2(rec);

}
public static void save2(Object obj) throws Exception{
    try{
        beginTransaction();
        getSession().save(obj);

        commitTransaction();

    }catch(Exception e){
        e.printStackTrace();
        rollbackTransaction();
        //closeSession();
        throw e;
    }finally{
        closeSession(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:48:51.590

所有 Hibernate 异常（除了`NonUniqueResultException`）都是不可恢复的。如果您遇到异常，您应该关闭会话并打开另一个会话以进行进一步操作。

**也可以看看：**

*   [13.2.3\. 异常处理](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/transactions.html#transactions-demarcation-exceptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:52:26.797

休眠文档非常清楚，一旦引发异常，会话将处于不一致状态，因此无法安全用于进一步操作。我怀疑你在这里得到的是会话剩下一半来保存你的第一次尝试所以坏事发生了。

从根本上说，您不应该依赖数据库错误来检查字段的长度，而是应该在 java 代码中预先验证这一点。如果您知道足够截断的长度，那么我建议您每次只需调用 trucate util 即可。

或者，使用[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)在保存之前以声明方式验证对象。

# javascript - Jquery 插件对象# 没有方法“观察”问题

> ID：12445838
> 
> 赞同：1
> 
> 时间：2012-09-16T09:37:03.153
> 
> 标签：javascript, jquery, html, jquery-plugins

您好尝试安装选择的 Jquery 插件，这使我能够`<select>`在所有浏览器中自定义我的标签。[单击此处](http://harvesthq.github.com/chosen/)无论如何，我已将此插件集成到我的站点中，并且在我的元素检查器中遇到以下错误消息..[单击此处](http://iamnatesmithen.com/bodyworks/Express)

“TypeError: Object # has no method ‘observe’”

从以下代码

```
 <script type="text/javascript">
 document.observe('dom:loaded', function(evt) {
var select, selects, _i, _len, _results;
if (Prototype.Browser.IE && (Prototype.BrowserFeatures['Version'] === 6 || Prototype.BrowserFeatures['Version'] === 7)) {
  return;
}
selects = $$(".chzn-select");
_results = [];
for (_i = 0, _len = selects.length; _i < _len; _i++) {
  select = selects[_i];
  _results.push(new Chosen(select));
}
deselects = $$(".chzn-select-deselect");
for (_i = 0, _len = deselects.length; _i < _len; _i++) {
  select = deselects[_i];
  _results.push(new Chosen(select,{allow_single_deselect:true}));
}
return _results;
 });
 </script> 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:08:14.983

该错误仅意味着一件事：您`Prototype`的html文档中没有，或者在您的脚本（来自您的代码示例）执行后加载。在某处发布完整`html`的代码（例如到 JSFIDDLE）以获得更准确的答案。

你有那个代码：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')</script>
</head> 
```

在它放置另一个`script`包含 Prototype 的标签之前：

```
<script src="/path/to/Prototype.js"></script> 
```

并将`Prototype.js`文件`/path/to/`放在服务器上的文件夹中。

然后，由于您`Jquery`在项目调用中使用`jQuery.noConflict()`（`jQuery`包含后），因此' 的`$`符号`Jquery`不会与`Prototype`' 的符号冲突。

```
 <script>
         var $jq = jQuery.noConflict()
     </script>
</head> 
```

`$`并用页面上的 所有 js替换所有 jQuery `$jq`（它与 Jquery 相关，而不是 Prototype）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:18:13.670

什么是document.observe？改用 window.onload= function{}

```
<script type="text/javascript">
 window.onload= function(evt) {
var select, selects, _i, _len, _results;
if (Prototype.Browser.IE && (Prototype.BrowserFeatures['Version'] === 6 || Prototype.BrowserFeatures['Version'] === 7)) {
  return;
}
selects = $$(".chzn-select");
_results = [];
for (_i = 0, _len = selects.length; _i < _len; _i++) {
  select = selects[_i];
  _results.push(new Chosen(select));
}
deselects = $$(".chzn-select-deselect");
for (_i = 0, _len = deselects.length; _i < _len; _i++) {
  select = deselects[_i];
  _results.push(new Chosen(select,{allow_single_deselect:true}));
}
return _results;
 };
 </script> 
```

# php - 每次加载页面时更改元素的位置

> ID：12445851
> 
> 赞同：4
> 
> 时间：2012-09-16T09:38:49.997
> 
> 标签：php, javascript, html, css

我有一个 HTML 页面，上面有 5 张图片*（每张 48px × 48px）*。每次加载页面时，我想在网页上的随机位置显示图像。

我不知道如何实现这一点，我只知道我需要 CSS 和 JavaScript *（用于随机化）*。有什么想法或建议吗？

这是示例 HTML 代码：

```
 <a href="http://twitter.com/"><img alt="Twitter" src="/images/twitter-48.png" /></a>
  <a href="http://facebook.com/><img alt="Facebook" src="/images/facebook-48.png" /></a>
  <a href="https://plus.google.com/"><img alt="Google Plus" src="/images/plus-48.png" /></a>
  <a href="https://github.com/"><img alt="GitHub" src="/images/github-48.png" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:44:50.653

这是一个相当简单的实现：http: [//jsfiddle.net/Eu8wT/](http://jsfiddle.net/Eu8wT/)

```
$('div.randomizeme').css({
    top: Math.random() * 100+'%',
    left: Math.random() * 100+'%'
});​ 
```

要将其应用于多个元素：

```
$('div.randomizeme').each(function(){
    $(this).css({
        top: Math.random() * 100+'%',
        left: Math.random() * 100+'%'
    });
});​ 
```

没有 jQuery 的情况是一样的：

```
var elements = document.querySelectorAll('.randomizeme');
for (var i in elements) {
    elements[i].style.top = Math.random() * 100 + '%';
    elements[i].style.left = Math.random() * 100 + '%';
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:34:41.977

使用纯 JavaScript（无库）的解决方案

```
var imgs = document.querySelectorAll('.rand'), 
    len = imgs.length, 
    /* subtract the width/ height of images */
    w = document.body.clientWidth - 48, 
    h = document.body.clientHeight - 48;

for(var i = 0; i < len; i++) {
  imgs[i].style.top = Math.floor(Math.random() * h) + 'px';
  imgs[i].style.left = Math.floor(Math.random() * w) + 'px';
} 
```

[**工作演示**](http://codepen.io/thebabydino/pen/tyFza)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T09:59:21.593

假设您已经将图像硬编码到 html 文档中。您需要做的（如果您想用 PHP 完成此操作）是`style`为每个元素添加一个属性。在您的情况下，您的图像保存在`<a>`标签中，因此您需要`<a>`随机放置标签而不是图像......

```
function generateRandomPositions(){

  // define maximum and minimum 'top' values
  $maxTop = 1000;
  $minTop = 0;

  // define maximum and minimum 'left' values    
  $maxLeft = 1000;
  $minLeft = 0; 

  $styleProperties = array(
    'position:absolute',
    'top:'.rand($minTop,$maxTop) . 'px',
    'left:'.rand($minLeft,$maxLeft) . 'px'
  );

  return ' style="'.implode(';',$styleProperties).'" ';
} 
```

该函数将返回一个类似于此的字符串 -

```
style="position:absolute;top:10px; left:45px;" 
```

现在您所要做的就是为页面上的每个图像调用此函数 -

```
<a <?php echo generateRandomPositions();?> ><img src="...
<a <?php echo generateRandomPositions();?> ><img src="...
<a <?php echo generateRandomPositions();?> ><img src="...
<a <?php echo generateRandomPositions();?> ><img src="... 
```

您的`<a>`标签现在将包含随机 CSS 定位参数，并且它们的图像将随之移动。

我相信你可以看到，这种使用 PHP 生成内联 CSS 属性的方法是一种倒退的方法。JavaScript 可能是获得您正在寻找的内容的最佳方式，并且还有其他答案可以涵盖它。您最初可以使用 CSS 隐藏元素，然后在设置随机定位后使用 JavaScript 显示它们。

* * *

参考 -

*   [`rand()`](http://php.net/manual/en/function.rand.php)
*   [`implode()`](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-16T10:14:09.120

```
<?php
$images= array(
    'twitter-48.png',
    'facebook-48.png',
    'plus-48.png',
    'github-48.png'
);
$keys= range(0, count($images)- 1);
shuffle($keys);
foreach($keys as $key) {
    print "<div>{$images[$key]}</div>";
} 
```

编辑：

```
<?php
$images= array(
    array('href'=> 'http://twitter.com/', 'alt'=> 'Twitter', 'src'=> '/images/twitter-48.png'),
    array('href'=> 'http://facebook.com/', 'alt'=> 'Facebook', 'src'=> '/images/facebook-48.png'),
    array('href'=> 'https://plus.google.com/', 'alt'=> 'Google Plus', 'src'=> '/images/plus-48.png'),
    array('href'=> 'https://github.com/', 'alt'=> 'GitHub', 'src'=> '/images/github-48.png')
);
$keys= range(0, count($images)- 1);
shuffle($keys);
?>
<div class='location1'>
    <a href='<?php print $images[$keys[0]]['href']; ?>'><img alt='<?php print $images[$keys[0]]['alt']; ?>' src='<?php print $images[$keys[0]]['src']; ?>'></img></a>
</div>
<div class='location2'>
    <a href='<?php print $images[$keys[1]]['href']; ?>'><img alt='<?php print $images[$keys[1]]['alt']; ?>' src='<?php print $images[$keys[1]]['src']; ?>'></img></a>
</div>
<div class='location3'>
    <a href='<?php print $images[$keys[2]]['href']; ?>'><img alt='<?php print $images[$keys[2]]['alt']; ?>' src='<?php print $images[$keys[2]]['src']; ?>'></img></a>
</div>
<div class='location4'>
    <a href='<?php print $images[$keys[3]]['href']; ?>'><img alt='<?php print $images[$keys[3]]['alt']; ?>' src='<?php print $images[$keys[3]]['src']; ?>'></img></a>
</div> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-16T09:45:37.000

试试这个：

```
$images = array('1.gif', '2.gif', '3.gif');
$images = array_shaffle($images);
foreach ($images as $image) {
  echo "<img src='{$image}' />;
} 
```

# objective-c - strptime_l 返回 null

> ID：12445863
> 
> 赞同：1
> 
> 时间：2012-09-16T09:39:50.173
> 
> 标签：objective-c, c, strptime, time.h

`strptime_l`总是返回null。我在 Objective-C 中这样做。

```
#import <time.h>
#import <xlocale.h>

/* Later on... */      

    const char *str = [dateStr UTF8String];
    const char *fmt = [@"EE LLLL d HH:mm:ss Z yyyy" UTF8String];
    struct tm timeinfo;
    memset(&timeinfo, 0, sizeof(timeinfo));
    char *ret = strptime_l(str, fmt, &timeinfo, NULL);

    NSDate *date = nil;

    if (ret) {
        time_t time = mktime(&timeinfo);

        date = [NSDate dateWithTimeIntervalSince1970:time];
    } 
```

`ret`始终为空。`dateStr`' 值的一个示例是：`Sat Sep 15 05:52:10 +0000 2012`并且始终采用该格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:08:19.113

您似乎使用的是 NSDateFormatter 格式而不是 strptime 格式。[在此处](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strptime.html)查看有关其特定日期和时间格式的更多信息。

以下代码应该可以工作：

```
NSString *dateStr = @"Sat Sep 15 05:52:10 +0000 2012";

const char *str = [dateStr UTF8String];
const char *fmt = [@"%a %b %d %H:%M:%S %z %Y" UTF8String];
struct tm timeinfo;
memset(&timeinfo, 0, sizeof(timeinfo));
char *ret = strptime_l(str, fmt, &timeinfo, NULL);

NSDate *date = nil;

if (ret) {
    time_t time = mktime(&timeinfo);

    date = [NSDate dateWithTimeIntervalSince1970:time];
} 
```

顺便说一句，你可以通过简单地做到这一点：

```
NSString *dateStr = @"Sat Sep 15 05:52:10 +0000 2012";

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EE LLLL d HH:mm:ss Z yyyy"];
NSDate *date = [dateFormat dateFromString:dateStr]; 
```

# c# - 在 smtp 元素中指定 from 属性的目的是什么？

> ID：12445869
> 
> 赞同：0
> 
> 时间：2012-09-16T09:40:38.177
> 
> 标签：c#, asp.net, web-config

使用 system.net 发送邮件时。在 system.net->mailsetting->smtp 中指定**了 from 属性。**在发送方法中，我们必须再次从地址传递，那么在配置中指定它的目的是什么？

```
 <smtp deliveryMethod="Network" **from="xyz@xyz.com"**>
      <network host="smtpout.secureserver.net" port="80" userName="xyz@xyz.com" password="xyz-password" />
  </smtp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:43:58.587

如果发件人地址永远不会改变，这是一个设置它的好地方。

许多应用程序从单个帐户发送电子邮件，因此在那里配置而不是*硬编码*是有意义的。

此值在 的无[参数构造函数中`MailMessage`](http://msdn.microsoft.com/en-us/library/ms144707.aspx)使用。

# c# - C# Winforms 控件 - DataGridView - 更新数据库

> ID：12445878
> 
> 赞同：2
> 
> 时间：2012-09-16T09:42:11.403
> 
> 标签：c#, mysql, winforms, datagridview, sql-update

我正在使用的程序是 WAMP 服务器（尤其是它的 mysql 功能）和 MS Visual Studio 2010，我正在用 C# 编程

基本上，这就是我需要并且目前可以对我的应用程序执行的操作。

我`datagridview`在整个项目中有几个 's，第一个很简单，只需按一下按钮，它就可以从数据库中的特定表中加载所有数据。我有另一个表单，我可以插入记录，并且设法创建了一个删除函数，该函数向用户询问 2 个字段（名字和姓氏），然后将这些字段放入查询中并执行命令。

我需要做什么？

我需要能够为表单实现某种方式来更新数据库。我选择通过`datagridview`控件来执行此操作，以便用户在编辑时可以看到他们正在编辑的内容。

我有以下代码，我尝试根据`datagridview`控件中的数据更新数据库。

```
string connString = "server=localhost;User Id=root;database=collegelist;";
MySqlConnection conn = new MySqlConnection(connString);
string selectSQL = "SELECT * FROM collegeemployee";
conn.Open();
MySqlDataAdapter da = new MySqlDataAdapter(selectSQL, conn);
MySqlCommandBuilder builder = new MySqlCommandBuilder(da);
DataTable table = new DataTable(); 
try
{
    dgView2.Rows.RemoveAt(dgView2.CurrentRow.Index);
    da.Update(table);
}
catch (Exception exceptionObj)
{
    MessageBox.Show(exceptionObj.Message.ToString());
} 
```

这段代码的问题（显然是在一个方法中列出的）是虽然可以修改网格，但它无法将数据传回数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:32:43.547

而不是用空表更新你的数据库，你应该做的是。i.获取数据源。像二。更新/同步数据源和数据适配器这是它应该工作的代码，如果不能，请评论并告诉我问题。

```
string connString = "server=localhost;User Id=root;database=collegelist;";
MySqlConnection conn = new MySqlConnection(connString);
string selectSQL = "SELECT * FROM collegeemployee";
conn.Open();
MySqlDataAdapter da = new MySqlDataAdapter(selectSQL, conn);
MySqlCommandBuilder builder = new MySqlCommandBuilder(da);
    BindingSource BindingSourceToUpdate = (BindingSource)dgView2.DataSource; // because direct casting to data table was failing in VS2o1o

                 try
                {
    dgView2.Rows.RemoveAt(dgView2.CurrentRow.Index);

                    da.Update((DataTable)BindingSourceToUpdate.DataSource);
                }
                catch(exception)
                 {
                 }
conn.close(); 
```

# jquery - 是否可以将现有的带有 jquery 的 href 链接加载到 div 标签中而无需重新加载？

> ID：12445886
> 
> 赞同：1
> 
> 时间：2012-09-16T09:43:28.347
> 
> 标签：jquery, ajax

我不太了解 ajax 是如何工作的，但我看过一些教程，允许我`div`通过单击按钮将 a 更改为网页。

有没有办法通过读取标签内的属性将点击的链接加载到`div`标签中而不刷新`<a>`？

我有以下 HTML：

```
<table align='center'>
    <tr>
        <td>
            <a href='http://libraryofalexandria.tk/index.php'>Home</a>
        </td>
        <td>
            <a href='http://libraryofalexandria.tk/pdfupload.php'>Book Upload</a>
        </td>
        <td>
            <a href='http://libraryofalexandria.tk/booksearch.php'>Book search</a>
        </td>
    </tr>
</table>
<div id='pageLoad'></div> 
```

​​​​​​​​​​​​​​​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:45:16.300

是的，您可以使用 jQuery 的[`.load()`](http://api.jquery.com/load/)方法来做到这一点。

它会是这样的：

```
// Catch the click on your a tag
$("a").click(function(){
    // Load the content of the page referenced in the a-tags href
    $("#pageLoad").load($(this).attr("href"));
    // Prevent browsers default behavior to follow the link when clicked
    return false;
}); 
```

值得注意的是，从其他域访问数据受到同源策略的限制。来自 jQuery 文档`.load()`：

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

如果是这种情况，您可能需要查看[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)或[JSONP](http://en.wikipedia.org/wiki/JSONP)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T09:50:05.270

您可以将点击事件附加到链接并使用[load()](http://api.jquery.com/load/)将内容加载到 div 中。

```
$("a").click(function() {        
    $("#pageLoad").load(this.href);

    return false;
});​ 
```

由于跨域安全限制，这仅在链接位于同一域中时才有效。有关更多详细信息，请参阅[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T09:48:00.113

有很多方法可以煮鸡蛋，但听起来你会发现 jQuery 的 Load 在这种情况下很有用：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# firefox - 在 Firefox 中查看印地语（阿拉伯语）数字

> ID：12445887
> 
> 赞同：5
> 
> 时间：2012-09-16T09:43:29.937
> 
> 标签：firefox, localization, numbers

在 Firefox 中查看阿拉伯语页面时，所有数字仍然是拉丁语。与 IE 不同，例如，它在 IE 中很好地显示阿拉伯语页面的阿拉伯数字（印地语），而其他页面则显示拉丁语。

我通过 about:config (bidi.numeral) 在网上找到了一个调整，但它只将所有语言的所有页面更改为一种类型的数字！

我正在寻找一个修复程序，让我可以根据页面查看数字.. 不固定..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-30T14:42:10.070

bidi.numeral 的工作原理如[文档中所述](http://kb.mozillazine.org/About%3aconfig_entries#Bidi)。如果将其设置为 2，您将在阿拉伯语上下文中获得阿拉伯数字，这意味着如果某些数字出现在阿拉伯文本（或我认为的任何其他从右到左的语言）的中间，它们将被呈现为阿拉伯数字。如果数字在文本的开头或在非阿拉伯文本的中间，它们将被呈现为默认数字 [0-9]。

如果将其设置为 3，则浏览器中的所有数字都将呈现为阿拉伯数字。

# jsf - h:commandLink 在 ui:repeat 中不起作用

> ID：12445890
> 
> 赞同：0
> 
> 时间：2012-09-16T09:44:05.117
> 
> 标签：jsf

当用户单击带有该产品名称的链接时，我想显示有关该产品的详细信息。

在调试我的代码时，我看到`details`下面代码中显示的方法没有运行。

我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <ui:composition template="/Shared/layout.xhtml" >
        <ui:define name="title">Product</ui:define>
        <ui:define name="body">
            <div id="contents" >
                <h3> List Product in Site </h3>
                <ul>
                    <ui:repeat value="#{productBean.listProduct}" var="p">
                        <div id="list-item">
                            <div class='item' >
                                <div class='item-img' >
                                    <h:form>
                                        <input type="hidden" name="productId" value="#{p.productId}" />
                                        <h:commandLink action="#{productBean.details}">
                                            <h:graphicImage url="#{p.picture}" alt='No Picture' />
                                        </h:commandLink>
                                    </h:form>
                                </div>
                                <h:form>
                                    <input type="hidden" name="productId" value="#{p.productId}" />
                                    <h:commandLink value="#{p.name}" action="#{productBean}" >
                                    </h:commandLink>
                                </h:form>
                            </div>    
                        </div>
                    </ui:repeat>
                </ul>
                <h:form>
                    <h:commandLink value="text" action="#{productBean.test}">  <!-- test -->
                    </h:commandLink>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</h:body> 
```

产品豆：

```
@ManagedBean
@RequestScoped
public class ProductBean implements Serializable {

    private List<Products> listProduct;
    private List<Categories> listCategory;
    private Products product;

    public Products getProduct() {
        return product;
    }

    public void setProduct(Products product) {
        this.product = product;
    }

    public ProductBean() {
        listCategory = new ProductsDB().listCategory();
    }
    private int categoryId;

    public int getCategoryId() {
        return categoryId;
    }

    public void setCategoryId(int categoryId) {
        this.categoryId = categoryId;
    }

    public String listProductByCt() {
        try {
            String value = FacesContext.getCurrentInstance().
                    getExternalContext().getRequestParameterMap().get("categoryId");
            setCategoryId(Integer.parseInt(value));
            if (categoryId == 0) {
                return "index";
            }
            listProduct = new ProductsDB().listProducts(categoryId);
            return "product";
        } catch (Exception e) {
            return "error";
        }
    }

    public String details() {
        String s = "";
        try {
            String productId = FacesContext.getCurrentInstance().
                    getExternalContext().getRequestParameterMap().get("productId");
            if (productId != null) {
                product = new ProductsDB().getProductById(productId);
                return "details";
            }
        } catch (Exception e) {
            return "error";
        }
        return "error";
    }

    public String test()
    {
        return "s";
    }

    public List<Categories> getListCategory() {
        return listCategory;
    }

    public void setListCategory(List<Categories> listCategory) {
        this.listCategory = listCategory;
    }

    public List<Products> getListProduct() {
        return listProduct;
    }

    public void setListProduct(List<Products> listProduct) {
        this.listProduct = listProduct;
    }
} 
```

我也尝试过另一种名为`test`. 这也是从 on 上的操作引用的`products.xhtml`，但该操作未放置在`<ui:repeat>`. 在这种情况下，该方法会被执行。

测试方法：

```
public String test() {
    String productId = "IP16G";
    product = new ProductsDB().getProductById(productId);
    return "details";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:30:34.927

您使用的是哪个版本的 JSF？

您在 a 中显示的具有不同形式和隐藏输入的代码`ui:repeat`并不是真正地道的 JSF。您的第一个命令链接的操作中还有一个错字。它说`produtBean`，但我想它应该是`productBean`。如果您单击该命令链接，JSF 会给您一个例外。

你有那个例外，还是什么都没发生？

如果什么都没发生，一个可能的原因是您用于呈现命令链接 ( `#{productBean.listProduct}`) 的数据在回发后不再可用。您使用什么方法来获取这些数据以及您的 bean 的范围是什么？在许多情况下，您应该在请求**不是**`@ViewScoped`回发时使用和初始化数据。

 **此外，请确保没有默认`<ui:repeat>`设置为渲染属性的父组件。`false`如果此属性将`true`在生命周期的某个时间点设置为，这很可能是在处理单击链接之后。如果发生这种情况，它仍然会`false`在处理点击时发生，这会导致它被默默地忽略。

您可以通过将您的测试命令链接放在旁边来测试最后一个效果`<ui:repeat>`：

```
<ui:repeat value="#{productBean.products}" var="product">
    ...
</ui:repeat>
<h:commandLink value="test" action="#{productBean.test}" /> 
```

尽管您使用多个表单和隐藏字段的方法确实有效，但更惯用的 JSF 版本将是：

```
<h:form>
    <ui:repeat value="#{productBean.products}" var="product">
        <h:commandLink action="#{productBean.details(product)}">
            <h:graphicImage url="#{product.picture}" alt="No Picture" />
        </h:commandLink>

        <h:commandLink value="#{product.name}" action="#{productBean.details(product)}" />
    </ui:repeat>
</h:form> 
```

使用您的 bean`details`方法：

```
public String details(Product product) {
    this.product = product;
    return "details";
} 
```

*（越来越离题，但如果您的方法所做的只是返回导航案例，您可能需要考虑使用直接链接，例如`<h:link>`将产品的 Id 作为参数。这将使用 GET 转到您的目标页面，在这种情况下更清洁）*

**编辑**

为了测试问题是否不在其他地方，请尝试以下代码。它是一个页面和一个支持 bean。将这些添加到您的项目并请求页面。这应该有效。

formloop.xhtml:

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:body>

        <ui:repeat value="#{formInLoopBacking.items}" var="item">
            <h:form>
                <h:commandLink value="#{item}" action="#{formInLoopBacking.action}"/>
            </h:form>
        </ui:repeat>

    </h:body>
</html> 
```

FormInLoopBacking.java

```
import javax.faces.bean.ManagedBean;

@ManagedBean
public class FormInLoopBacking {

    private String[] items = {"A", "B"};

    public String[] getItems() {
        return items;
    }

    public void action() {
        System.out.println("Action called");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:11:09.203

通过查看您上面的代码

你有打开`<ui:repeat>`标签但没有关闭它并尝试将整个`<ui:repeat>`放在一个表单中并检查你的页面是`<h:form>`一个`h:form`. 如果它不起作用，那么检查你的 bean 是否在视图范围内，如果没有放在视图范围内。**

# git - svn提交后的Git推送以自动部署到Heroku？

> ID：12445891
> 
> 赞同：2
> 
> 时间：2012-09-16T09:44:06.747
> 
> 标签：git, svn, heroku, playframework, continuous-deployment

我正在尝试为我的团队实现一个非常简单的自动部署系统。

我们的代码位于 SVN 存储库中，但我使用 heroku 部署我的应用程序（使用 GIT）

目前我在本地执行以下操作：

```
 svn update
    git add .
    git commit -m "foo"
    git push heroku master 
```

但是我想**自动化**这个过程，这样当团队中的任何人提交新代码时，它会自动推送到 heroku 并且可以在我们的开发站点上查看。

有什么简单的方法吗？也许设置一个 EC2 实例，在提交后通过 ssh 进入它（使用挂钩脚本）并运行上述命令？但是这个解决方案似乎过于复杂..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:37:47.680

是的，这似乎过于复杂了，我只是建议对 git 采取最后的行动。

在这种情况下，您将只需要关心一个 VCS（至少对于这个项目而言），并且您将能够创建其他有用的场景。

IE。将所有更改推送到 Heroku（并将其用作传输层）并不是一个好主意，有时您需要向团队成员推送一些内容以拆分正在进行的工作，很明显，如果您将其发送进去Heroku 这样的状态，你会崩溃你的应用程序。因此，拥有一个（其他）共享存储库`origin`（最新状态并推送到 Heroku。

如今，创建共享的 git 存储库只是一件容易的事。如果您有任何具有 SSH 访问权限的主机帐户，则可以使用[gitolite](https://github.com/sitaramc/gitolite)创建它，它易于安装和管理存储库和用户。它是完全免费的。

另一种可能性是使用一些 git 提供商，如[GitHub](https://github.com/)或[Assambla](https://www.assembla.com/repositories)，您很可能可以找到一些免费/便宜的计划来托管小型项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:34:36.357

也许您应该看一下[SVN 提交后挂钩](http://svnbook.red-bean.com/en/1.1/ch05s02.html#svn-ch-5-sect-2.1)：在您的 SVN 服务器存储库上，您可以添加一个名为的 shell 脚本`post-commit`，该脚本`PATH_TO_REPO/hooks/`可以在团队每次提交后运行。

这个脚本应该包含推送到 heroku 的 git 命令。

# c# - 如何根据所选数据自定义同步仅同步框架/技巧

> ID：12445892
> 
> 赞同：1
> 
> 时间：2012-09-16T09:44:06.833
> 
> 标签：c#, web-services, microsoft-sync-framework

我正在为我的一个客户开发一个同步数据库应用程序我已经完成了同步但现在我卡在了我不想同步完整表的部分我只是想通过同步框架同步动态选择的记录

`sqlce`在客户端使用

任何可以提供帮助的好的链接也将是可取的

我正在同步一些类似下面的东西在服务器上

```
public SyncContext GetChanges(SyncGroupMetadata groupMetadata, SyncSession syncSession)
    {
        return serverSyncProvider.GetChanges(groupMetadata, syncSession);
    }

    public SyncContext ApplyChanges(SyncGroupMetadata groupMetadata, DataSet dataSet, SyncSession syncSession)
    {
        return serverSyncProvider.ApplyChanges(groupMetadata, dataSet, syncSession);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:10:33.403

您可以添加过滤器来限制正在同步的行。但是 Sync Framework 不支持动态过滤。同步框架根据自上次同步以来更改的增量同步进行同步。

例如，假设您有一个客户表，并且您让用户选择要同步的客户。

您很可能会将选择用于同步的客户存储在另一个表中，假设 SelectedCustomer 将存储用户 ID。和客户 ID。

当用户从他的选择中添加或删除客户时，您将更新 SelectedCustomer。但是，当您同步客户表时，除非特定客户记录自上次同步以来已更改，否则您将一无所获。即使将客户添加到特定用户，实际客户记录也不会更新，不会更新，也不会检测到更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:58:58.960

这是 JuneT 写的文章；）

[同步框架供应](http://jtabadero.wordpress.com/2010/09/02/sync-framework-provisioning/)

转到**基于参数的过滤器**部分

JuneT 的回答是绝对正确的。诀窍是，如果您选择要同步的行，请在同步之前先更新该行（以便跟踪表将该行记录为已更新）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T16:10:07.750

更新 SelectedCustomer 是不够的，跟踪记录同步了但真实的没有。我必须创建一个插入/更新触发器来更新主跟踪记录中的 local_create_peer_timestamp。

# javascript - 使用 node.js 提供来自 Backbone.js 应用程序的内容以搜索爬虫以进行 SEO

> ID：12445896
> 
> 赞同：19
> 
> 时间：2012-09-16T09:44:27.693
> 
> 标签：javascript, node.js, backbone.js, seo

要么我的 google-fu 让我失望了，要么真的没有太多人这样做。如您所知，Backbone.js 有一个致命弱点——它无法将它呈现的 html 提供给诸如 googlebot 之类的页面爬虫，因为它们不运行 JavaScript（尽管考虑到它的 Google 拥有他们的资源、V8 引擎以及一个发人深省的事实： JavaScript 应用程序正在兴起，我希望这有一天会发生）。我知道谷歌有一个 hashbang 变通政策，但这只是一个坏主意。另外，我正在使用 PushState。这对我来说是一个极其重要的问题，我希望对其他人也是如此。SEO 是不可忽视的东西，因此对于许多需要或**依赖**它的应用程序来说，它不能被考虑。

输入 node.js。我才刚刚开始进入这种热潮，但似乎有可能让客户端上存在的相同 Backbone.js 应用程序与 node.js 手牵手的服务器上。然后 node.js 将能够将 Backbone.js 应用程序呈现的 html 提供给页面爬虫。这似乎是可行的，但我正在寻找对 node.js 更有经验的人，或者甚至更好的人，真正做到这一点的人，为我提供建议。

我需要采取哪些步骤才能允许我使用 node.js 将我的 Backbone.js 应用程序提供给网络爬虫？此外，我的 Backbone 应用程序使用了一个用 Rails 编写的 API，我认为这会让这不那么令人头疼。

编辑：我没有提到我已经有一个用 Backbone.js 编写的生产应用程序。我希望将此技术应用于该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:32:27.753

首先，让我添加一个免责声明，我认为使用 node.js 是一个坏主意。第二个免责声明：我做过类似的黑客攻击，但只是为了自动化测试，而不是爬虫。

有了这个，我们走吧。如果您打算在服务器上运行客户端应用程序，则需要在服务器上重新创建浏览器环境：

1.  最明显的是，您缺少 DOM（文档对象模型） - 基本上是已解析 HTML 文档之上的 AST。对此的 node.js 解决方案是[jsdom](https://github.com/tmpvar/jsdom)。

2.  然而，这还不够。您的浏览器还公开 BOM（浏览器对象模型） - 访问浏览器功能，例如`history.pushState`. 这就是棘手的地方。有两种选择：您可以尝试弯曲[phantomjs](http://phantomjs.org/)或[casperjs](http://casperjs.org/)来运行您的应用程序，然后从其中刮掉 HTML。它很脆弱，因为您正在运行一个巨大的完整 WebKit 浏览器，并且 UI 部分被锯掉了。

3.  另一个选项是[Zombie](http://zombie.labnotes.org/) - 它是在 Javascript 中对浏览器功能的轻量级重新实现。根据它支持pushState的页面，但我的经验是浏览器仿真远未完成 - 但是尝试一下，看看你能走多远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:34:02.723

可行的解决方案是在任何地方都使用 Backbone [https://github.com/Morriz/backbone-everywhere](https://github.com/Morriz/backbone-everywhere)但它会强制您使用 Node 作为后端。

另一种选择是在服务器和前端使用相同的模板。前端使用 require.js 文本插件加载 Mustache 模板，服务器也使用相同的 Mustache 模板呈现页面。

另一个附加功能是将 javascript 标记中的引导模块数据呈现为 JSON 数据，以便 Backbone 立即使用来填充模型和集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:39:47.887

我相信您可以采用后备策略类型的方法。考虑一下关闭 javascript 并单击链接与打开 js 会发生什么。当 javascript 关闭时，您在页面上所做的任何可以被抓取的操作都应该有一些合理的后备程序。您的链接应始终将指向服务器的链接作为 href，并且应使用 javascript 防止发生默认操作。

我不会说这必然是骨干的责任。我的意思是，骨干在这里唯一可以帮助您的是在页面更改时修改您的 URL，并且您的模型/集合既是客户端又是服务器端。我相信视图和路由器将是严格的客户端。

不过，您可以做的是让您的翡翠页面和部分可从客户端或服务器端渲染，无论是否注入内容。通过这种方式，可以以任何一种方式呈现相同的页面。也就是说，如果您替换了大部分页面并更改了 url，那么您抓取的 html 可以来自同一个模板，就好像有人直接访问了该页面一样。

当您的服务器收到请求时，它应该直接将您带到该页面，而不是通过主入口点和加载主干并让它操纵页面并以用户希望使用 url 的方式设置它。

我认为你应该能够通过在你的应用程序中重新安排一些东西来实现这一点。没有真正的重写，只是移动了很多东西。您可能需要编写一个控制器，该控制器将为您提供注入或未注入内容的 html 文件。这将为您的主干应用程序提供与模型数据耦合所需的 html。就像我说的，当您通过 express/node.js 中定义的路由器直接点击这些链接时，可以使用这些相同的模板

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:27:42.130

我将由您来决定将您的渲染引擎推到服务器端是否是一个合理的决定。

因为 Nodejs 是基于 V8（Chrome 的引擎）构建的，所以它会像 Backbone.js 一样运行 javascript。创建模型等将以完全相同的方式完成。

Nodejs 环境当然缺少 DOM。所以这是您需要重新创建的部分。我相信最受欢迎的模块是：

[https://github.com/tmpvar/jsdom](https://github.com/tmpvar/jsdom)

在 Nodejs 中拥有可访问的 DOM api 后，您只需像为典型的浏览器客户端（可能使用 jQuery）一样构建其节点并使用呈现的 HTML（通过 $("myDOM").html() 或类似方法）响应服务器请求）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T22:49:13.207

这是我与我们的应用程序要做的事情的待办事项列表：让 Node.js 解析 Backbone 路由（在应用程序启动时存储在内存中）并至少以直接 HTML 提供主页模板 - 可能还有更多当您考虑到成千上万的用户访问您的网站时，BE 的开销/处理过多。

我相信像 AirBnB 这样的 Backbone 应用程序也是这样做的，但仅适用于像 Google Crawler 这样的机器人。对于 Facebook 喜欢的内容，您也需要这种情况，因为 Facebook 会发送一个爬虫来读取您的 og:tags。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-16T10:43:34.503

基本上你需要决定你所服务的是什么：它是一个真正的应用程序（即可以替代专用桌面应用程序的东西），还是它是内容的呈现（即经典的“网页” )? 如果您担心 SEO，很可能实际上是后者（“内容网站”），在这种情况下，“单页应用程序”模型不合适；你真的想要“渐进增强的网站”模型（查找诸如“不显眼的 JavaScript”、“渐进增强”和“自适应网页设计”之类的短语）。

稍微放大一点，“服务器只发送序列化数据，客户端完成所有渲染”只适用于“真正的应用程序”场景。对于“内容站点”场景，合适的模型是“服务器进行主要渲染，客户端使其看起来更好，并进行一些小规模渲染，以尽可能避免破坏性的页面转换”。

而且，顺便说一句，反对渐进增强意味着“确保用户能看到的东西不会比使用文本转语音的盲人用户更好”是一种政治不满的表达，而不是现实。从拥有高端渲染系统的用户的角度来看，逐步增强的网站可以随心所欲。

# c - 看看这个中缀到后缀的转换

> ID：12445903
> 
> 赞同：2
> 
> 时间：2012-09-16T09:45:16.243
> 
> 标签：c

如果我们用大括号和不带大括号的后缀表达式解决中缀表达式，它们会产生相同的结果吗？

**例子：**

1.  ((2+8)x9)-(5x(5+2))
2.  2+8*9-5*5+2

这两个例子会产生相同的结果吗？如果不是，那为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:53:04.393

通常，由于操作的优先级，它不会产生相同的结果。例如，如果您定义`*`的优先级高于`+`and `-`，则`*`必须在`+`or之前进行计算`-`，这会改变表达式的计算方式，也会改变后缀表示。

# html - HTML5 画布 FAST 像素操作

> ID：12445908
> 
> 赞同：0
> 
> 时间：2012-09-16T09:45:58.330
> 
> 标签：html, html5-canvas, pixel

我需要实时操作画布的像素，有什么办法吗？

我不能使用 getImageData 或 createImageData，速度极慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:34:41.460

是的。但是，您的问题缺少详细信息，您尝试执行此操作的内容、原因和方式，因此无法直接回答您。

这是 Mozilla 使用`<canvas>`.

[https://developer.mozilla.org/samples/video/chroma-key/index.xhtml](https://developer.mozilla.org/samples/video/chroma-key/index.xhtml)

如果您的计算操作对于 Javascript 来说太慢，请编写一个 WebGL 着色器并在 GPU 上运行过滤操作：

[http://evanw.github.com/webgl-filter/](http://evanw.github.com/webgl-filter/)

# php - 将新行从本地表插入远程表

> ID：12445909
> 
> 赞同：1
> 
> 时间：2012-09-16T09:45:58.590
> 
> 标签：php, mysql

我想将新行从本地表插入到远程表，我已经为它制作了一个 php 脚本，但它不起作用。

远程和本地 - 数据库、表和字段相同。

我正在这样做

```
//connection
$remote_hostname='xxx.xxx.xxx.xxx:3306';
$hostname='localhost';
$username = 'username';
$password = 'password';
$remote_connection = mysql_connect($remote_hostname, $username, $password); 
$connection = mysql_connect($hostname, $username, $password); 

$tablename="pc_games";
$database = 'games';

// some row count here $remoterows

$local_query = "SELECT * FROM $tablename LIMIT 100 OFFSET $remoterows";
$local_result = mysql_query($local_query, $connection) or trigger_error(mysql_error()); 

while($list=mysql_fetch_array($local_result))
{
$remote_update=mysql_query("INSERT INTO $tablename SELECT * from $tablename");
$remote_update_result = mysql_query($remote_update, $remote_connection) or trigger_error(mysql_error());    
} 
```

这不起作用并显示错误`Duplicate entry '1' for key 'PRIMARY'`，但没有重复条目。

如果我这样做，它会起作用，新行将插入远程数据库。

```
while($list=mysql_fetch_array($local_result))
{
$id=$list['id'];    
$pflink=$list['pflink'];    
$image=$list['image'];  
$pagelink=$list['pagelink'];    
$title=$list['title'];
    // and so on... 

$remote_update=mysql_query("INSERT INTO $tablename SET id='$id', image='$image', pagelink='$pagelink', title='$title'......");
$remote_update_result = mysql_query($remote_update, $remote_connection) or trigger_error(mysql_error());    
} 
```

我在数据库中有很多列，也有很多数据库，我想以第一种方式来做，因为我想将这些代码重新用于另一个数据库，只需更改`$database`并`$tablename` 在另一个数据库的需要文件中。

请查看并建议任何可能的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:26:34.663

您不能在一个请求中跨越本地和远程查询：

```
$remote_update=mysql_query("INSERT INTO $tablename SELECT * from $tablename"); 
```

这应该从**本地选择**中获取数据并将其插入**远程****数据库**？

该查询在 1 个数据库上运行，并且仅在 1 个数据库上运行。您正在尝试从表中获取数据并将其插入到同一个表中。当然，这给出了一个`Duplicate entry '1' for key 'PRIMARY'`

# c++ - C++ Builder 中的 POCO 库

> ID：12445920
> 
> 赞同：3
> 
> 时间：2012-09-16T09:48:05.337
> 
> 标签：c++, visual-c++, c++builder, unresolved-external, poco-libraries

我在 VC++ 中编译了 POCO 库，然后使用 Builder 的 implib 为 Builder 制作库。我在我的应用程序的调试目录中添加了这些库文件，但是，链接器仍然会抛出类似的错误

```
Unresolved external 'poco::session::...' 
```

您能否告诉我在我的 C++ Builder 应用程序中导入 POCO 库的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:00:35.847

一种方法是直接在 C++ Builder 中构建 POCO 库。POCO 发行版不附带 .cbproj 文件，但我发现找出需要哪些文件然后在 C++ Builder 中创建我自己的 Poco_Foundation.cbproj 并不难。

如果我没记错的话，C++ Builder 不会编译 Poco 的某些部分（涉及模板专业化）。我能够解决很多编译错误，但我不得不排除一些单元，因为它们对无法编译的单元有太多依赖。我发现的大部分问题都在 Poco_Net 库中；我认为 Poco_Foundation 库很容易编译。

祝你好运。

# c++ - Qt - 打开一个窗口的单个实例

> ID：12445925
> 
> 赞同：0
> 
> 时间：2012-09-16T09:49:16.393
> 
> 标签：c++, qt

如何检查窗口/对话框是否已打开？我使用此代码打开一个新对话框，但每次单击它时，对话框都会继续打开。显然不是设置对话框的工作方式。

```
Class *someClass = new Class();
someclass->show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:08:04.117

在您的调用类（或主应用程序类或类似的东西）中定义一个指向该类的指针：

```
dialogclass *someclass; 
```

在该主类的构造函数中，初始化对话框类：

```
someclass = NULL; 
```

当您想显示对话框时，请执行以下操作：

```
if (!someclass) someclass = new dialogclass();  // Creates a dialog instance if it does not already exist 
if (!someclass->isVisible()) someclass->show(); // Only shows the dialog if it is not already shown. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:56:54.857

在您的代码中，您每次都创建一个新窗口/小部件/对话框。`*someClass`在其他地方初始化，然后只显示它。

```
class Foo
{
public:
    Foo() { someClass = new SomeClass() }
    void fooClicked() { someClass->show() }

private:
    SomeClass *someClass;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T10:11:25.963

使用 QPointer：

```
QPointer<MyDialog> dialog = new MyDialog(this);
dialog->show();
...
if (dialog) dialog->show(); 
```

如果对话框存在，它将被显示。如果同时删除它，它将保存 0 而不是无效地址，并且永远不会执行最后一行 - 它不会显示，但您可以根据需要重新创建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T10:11:54.570

您可以在窗口类上创建一个静态指针。它允许您存储最后打开的窗口对象。

```
class MyWindow : public QWidget {
  public :
    static MyWindow* instance;

  ...
} 
```

每当您创建一个新实例时，您都可以设置`instance`. 当实例为空时，您可以创建一个新窗口。当你想关闭打开的窗口时，你应该再次使实例为空。这允许您只有一个打开的窗口。

```
if (MyWindow::instance == NULL) {
  MyWindow *w = new MyWindow(...);
  MyWindow::instance = w;
} 
```

这种设计模式称为 Singleton，它允许每个类只有一个对象。此外，这有点不同，因为在 Singleton 中，构造函数不是公共的，并且应该使用工厂方法来创建对象，但它是相似的。

# iphone - iOS App 泄露

> ID：12445929
> 
> 赞同：0
> 
> 时间：2012-09-16T09:49:54.287
> 
> 标签：iphone, objective-c, ios, xcode

我有一个基于导航的应用程序，第一个视图上有几个按钮（不使用 ARC）。通过触摸一个按钮`optionPressed`会触发推送到另一个视图。

当我分析泄漏的代码时。我收到以下警告。“对象的潜在泄漏”`[self.displayViewController setCurrentPhoto:sender.currentTitle];`

我应该如何释放 self.displayViewController 以及原因是否在哪里。

。H

```
#import <UIKit/UIKit.h>
#import "DisplayViewController.h"

@class DisplayViewController;

@interface Pocket_DjangoViewController : UIViewController 

- (IBAction)optionPressed:(UIButton *)sender;

@property (retain, nonatomic) DisplayViewController *displayViewController;

@end 
```

.m

```
- (IBAction)optionPressed:(UIButton *)sender 
{

    if (!self.displayViewController) {
        self.displayViewController = [[DisplayViewController alloc] initWithNibName:@"DisplayViewController" bundle:nil];
    }

    [self.displayViewController setCurrentPhoto:sender.currentTitle];
    [self.navigationController pushViewController:self.displayViewController animated:YES];

    //[self.displayViewController release];
    //self.displayViewController = nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:02:39.100

这条线的泄漏源于：

```
self.displayViewController = [[DisplayViewController alloc] initWithNibName:@"DisplayViewController" bundle:nil]; 
```

你应该有：

```
self.displayViewController = [[[DisplayViewController alloc] initWithNibName:@"DisplayViewController" bundle:nil] autorelease]; 
```

在您的实际代码中，您正在创建一个对象：

```
[[DisplayViewController alloc] initWithNibName:@"DisplayViewController" bundle:nil]; 
```

已经保留的；然后将其分配给保留属性：

```
@property (retain, nonatomic) DisplayViewController *displayViewController; 
```

这将造成保留不平衡，因为原始分配永远不会被释放，只有由属性调用的保留最终会被释放。

# android - 如何优化递归嵌入布局？

> ID：12445931
> 
> 赞同：4
> 
> 时间：2012-09-16T09:49:59.590
> 
> 标签：android, android-layout

我正在构建一个递归分层布局。这是我的 message_with_replies.xml （我删除了对齐属性和一些项目以使想法清晰）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <Button
        android:id="@+id/toggleReplies"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/button_expand_replies" />
    <LinearLayout
        android:id="@+id/replies"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</RelativeLayout> 
```

在 Java 代码中，我使用此布局对项目进行膨胀并将它们嵌入到父级的*回复*布局中，然后对子级重复此操作，因此它们形成一棵树：

```
root item
- child 0 of root
- - child 0 of child 0 of root
- - child 1 of child 0 of root
- - - child 0 of child 1 of child 0 of root
- child 1 of root
- child 2 of root
- child 3 of root
- - child 0 of child 3 of root 
```

当我在顶层或离顶层大约 2-3 层时，一切看起来和执行都很好，但随着我走得更深，布局的响应越来越慢。减速是非线性的，在大约 7 或 8 的深度上，UI 完全卡住了（模拟器在思考了大约半分钟后引发了异常）。

显然，问题在于嵌入式布局。我将线性布局嵌入到相对布局中，因此我的层次结构的每个新级别都意味着在 UI 布局方面有两个额外的嵌入。

如何优化这个？

我可以尝试摆脱线性布局，但我希望这不会解决问题，只会将其推迟到更深层次，因为我仍然会有嵌入。

当我用其他布局膨胀子项目时，通常可以保持层次结构平坦吗？我可以给物品充气，然后在没有容器的情况下取出物品吗？

**补充：**我已经绕过了这个问题。现在我使用边距构建树，因此不会嵌入布局，并且 UI 不会卡住。一切看起来和工作正常。

但是，原始问题尚未得到解答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:58:35.680

> Everything looks and performs fine when I'm on the top level or about 2-3 levels from the top, but as I go deeper, the layout responds slower and slower. The slowdown is non-linear, and on the depth of about 7 or 8 the UI completely stucks (the emulator raises an exception after thinking for about half a minute).

As you already seen the problem is the dept of your layout file. Each time you inflate the `message_with_replies.xml` and add it to the `LinearLayout` you increase the dept of your layout by 2(which will reduce the performance). So, by the time you get to the 7-8 level you would have already exceeded the recommended maximum layout dept(10, if I'm not mistaken) by quite a lot.

> How to optimize this?

If you want to continue to inflate the layout in an old view then there isn't much to do. Otherwise you would add the views to a master layout without the extra `ViewGroups` between.

> Is it generally possible to keep the hierarchy flat when I inflate a sub-item with ahother layout? Can I inflate the item and then take its contents without their container?

You'll keep the hierarchy flat if you only add `Views` to the layout. As long as you add `ViewGroups` to `ViewGroups`(like you do in your code) you'll increase the hierarchy's dept. An option to avoid adding unnecessary `ViewGroups`(in some cases) is to use the `merge` tag(you can find more details [here](http://android-developers.blogspot.ro/2009/03/android-layout-tricks-3-optimize-by.html)).

> Added: I've bypassed the problem. Now I build my tree using margins, so the layouts are not embedded, and the UI doesn't stuck. Everything looks and works fine.

This should have been your first option instead of inflating the layout again and again as it is a much simpler solution. The layout could be obtained by using a simple `LinearLayout`(or a `RelativeLayout`, I don't know your setup as you removed the layout attributes from the layout) with `orientation` set to `vertical`. Into this layout you would add the desired views, taking in consideration to add the margin based on the level you want this child to be. If you want to simplify things even more you would create a layout file like below(this works if the `Button` from the layout is set to be on top of the `LinearLayout`):

```
<merge>
    <Button android:id="@+id/toggleReplies">
    <!-- content of the replies at this level -->
</merge> 
```

After you inflate this layout you would need to set the padding(x padding for the first level, 2x for the second level, 3x for the third level etc) and then add it to the `LinearLayout`.

# maven - maven-bundle-plugin 如何在 Import-Package 中找到包

> ID：12445933
> 
> 赞同：2
> 
> 时间：2012-09-16T09:50:04.747
> 
> 标签：maven, osgi, maven-bundle-plugin

`<dependencies>`标签中提到的捆绑包和标签之间有什么关系`<Import-Package>`吗？我的意思是如果我们不定义依赖项，那么 maven-bundle-plugin 无法在`<Import-Package>`标签中找到包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T07:07:15.067

Maven 使用依赖项部分中列出的 jars 来创建类路径。bnd（maven bundle插件中的引擎）使用这个类路径通过字节码分析来分析你的代码所指的内容。

```
 maven dependency -> classpath -> bnd analysis -> import statements 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T23:55:45.947

`Import-Package`用于细化 maven bundle 插件自动为您生成的包导入列表。例如，您可以声明一些可选的导入，或者为只能通过反射访问的类添加导入。在大多数情况下，根本不需要指定任何内容，`Import-Package`因为默认值是`*`- 也就是说，将导入字节码中引用的任何外部包。

该`dependencies`部分提供了编译器用来生成字节码的包池，以及用于改进包导入的 bnd（这是包插件的底层内容）。例如，它将根据依赖项列表（或传递依赖项）中提供包中的导出版本添加版本范围。

# php - 即使在表单外也能执行表单操作

> ID：12445937
> 
> 赞同：1
> 
> 时间：2012-09-16T09:50:24.123
> 
> 标签：php

嗨，此代码有问题，即使我单击取消，即使**取消**按钮不是表单的一部分，它仍将继续使用我的**表单**的操作，不胜感激。

这是代码。

```
 <form method="post" action="input_enroll.php" >
            <div id="overlay1">

                <div>
                    <h1> Enter Educational Level Entry</h1>
                <input type="text" name="level" >
            <input type="submit"   value="Proceed To Enroll" '>
                    </form>
                <input type="submit"   value="Cancel" onclick='overlay()'>
                </div>
            </div> 
```

编辑：有什么建议更好吗？我正在考虑将**取消**放在 div 之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:55:04.037

您正在启动表单，然后启动 div，然后表单关闭..在 div 之后启动表单..

由于您的标记不正确，浏览器将按照解析器的建议对其进行更改，

在 chrome`</form>`标记在 s 之后被推迟`</div>`。

```
 <div id="overlay1">
            <div>
            <form method="post" action="input_enroll.php" >
                <h1> Enter Educational Level Entry</h1>
                <input type="text" name="level" />
                <input type="submit"   value="Proceed To Enroll" />
            </form>
            <input type="submit" value="Cancel" onclick='overlay()' />
            </div>
        </div> 
```

# html - 文本未在单行上调整

> ID：12445940
> 
> 赞同：0
> 
> 时间：2012-09-16T09:50:57.757
> 
> 标签：html, css, xhtml, dreamweaver

我面临的问题是 a 标签内的文本没有在一行上调整。

这是我的html。

```
<html>
    <head>
        <link rel="stylesheet" href="style5.css" type="text/css">
    </head>

    <body>

    <div id="outer">

        <ul>
            <li class="current"><a href="#">Home</a></li>
            <li><a href="#">content</a></li>
            <li><a href="#">search</a></li>
            <li><a href="#">more</a></li>
        </ul>

        <div id="homepage">

            <a href="#">Set as Homepage</a>

        </div>

        <div id="clear">
        </div>

    </div>

    <div id="wrapper">

        <div id="pic">
            <img src="logo.png">
            <div id="content">
                <p> Secure Search </p>
            </div>
        </div>

        <div id="forms">

            <form>
                <input type="text" name="submit" size="70" style="font-size:20pt;"/>
            </form>
            <div id="pic_2">
                <img src="powerd-by-google.png">
            </div>

        </div>

        <div id="footer">
            © 2012 - <a href="#">We Respect your Privacy</a> - <a href="#">About AVG Secure Search</a>
        </div>
    </div>

    </body>

</html> 
```

这是我的CSS。

```
body
{
    margin: 0;
    padding: 0;
    background-color: white;
}

h1,h2,h3
{
    margin: 0;
    padding: 0;
}

p,ul,ol,li
{
    margin: 0;
    padding: 0;
}

#outer
{
    background-color: rgb(67,68,71);
}

#outer ul
{
    list-style: none;
    margin-left: 5px;
    border-left: 1px solid;
}

#outer li
{
    float: left;

}

.current
{
    background-color: rgb(56,63,137);
}

#outer a
{
    width: 90px;
    display: block;
    text-transform: uppercase;
    text-decoration: none;
    text-align: center;
    font-weight: bold;
    color: white;
    border-right: 1px solid;
    padding: 5px;
}

#outer a:hover
{
    color: black;
    background-color: white;
}

#outer .current a:hover
{
    color: white;
    background-color: inherit;
}

#homepage a
{
    float: right;
    font-weight: none;
    color: white;
    background-color: rgb(67,68,71);
    display: inline;
    text-transform: lowercase;
    border-right: none;
}

#homepage a:hover
{
    color: white;
    background-color: inherit;
}

#clear
{
    clear: both;
}

#wrapper 
{
    width: 960px;
    margin: 0 auto;
    overflow: auto;
}

#pic
{
    margin-top: 100px;
    margin-left: 389px;
    position: relative;
}

#content
{
    position: absolute;
    top: 60px;
    left: 90px;
}

#forms
{
    margin-top: 50px;
    position: relative;
}

#pic_2
{
    position: absolute;
    top: 0px;
    left: 867px;
}

#footer
{
    width: 500px;
    margin: 375px auto 0px;
}

#footer a
{
    text-decoration: none;
} 
```

现在问题出`a`在主页 div 中的标签上，我已经非常努力，但我不知道为什么它的文本没有在单行上调整，而是似乎在多行上爬升。

在这件事上的任何建议都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:56:21.150

我假设您正在谈论“设置为主页”按钮。

如果是这样，问题是您的 css 正在为继承自`#outer a`该元素的元素编写一个固定的 with 使该元素`90px`变宽。

您可以通过简单地将 css 样式添加 `width: inherit;`到`#homepage a`

例子：

*   **[http://jsfiddle.net/2jByx/1/](http://jsfiddle.net/2jByx/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:55:21.643

您需要添加`width`到“设置为主页”元素

```
#homepage a {
 .....
  width: 120px; //added width
} 
```

看看这里，[http://jsfiddle.net/VkmHr/](http://jsfiddle.net/VkmHr/)

是你要找的吗？

# jquery - 通过 JQuery Ajax 调用使用 xml web-service jersey

> ID：12445941
> 
> 赞同：0
> 
> 时间：2012-09-16T09:50:57.790
> 
> 标签：jquery, ajax, web-services, jersey

我正在尝试调用一个返回 xml 数据的球衣 Web 服务。该调用是通过具有以下格式的 jquery ajax 调用完成的：

```
$.ajax({
        type: "GET",
        url: "http://localhost:8080/store/api/categoryservice",
        contentType: "application/xml; charset=utf-8",
        dataType: "xml",
        success: function(resp){  
                alert("Hello"); 
           }            
        failure: function(errMsg) {
            alert(errMsg);
        }
    }); 
```

当我在导航器中键入 url 时，我会在浏览器中获得以下格式的 xml：

```
<categoryBeans>
<categoryBean>
<code>1</code>
<name>Nutella</name>
</categoryBean>
<categoryBean>
<code>2</code>
<name>Kinder</name>
</categoryBean>
</categoryBeans> 
```

但是当我从 html5 应用程序进行 Ajax 调用时，没有返回任何内容。

如何调试 ajax 调用？ajax 调用是否正确？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T22:34:50.363

您在成功处理程序的结尾和失败处理程序的开始之间缺少逗号。应该：

```
success: function(resp){  
  alert("Hello"); 
},            
failure: function(errMsg) {
  alert(errMsg);
} 
```

Also note that you'll need to be running this page from the same server and port. If your HTTP server is running on 80 and your Jersey server is running on 8080 then you'll run into same origin policy violations. See [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

Firebug or Chome's Dev Tools are very useful for debugging issues like this.

# delphi - Firemonkey拖动图像未显示在屏幕上

> ID：12445946
> 
> 赞同：0
> 
> 时间：2012-09-16T09:51:58.960
> 
> 标签：delphi, drag-and-drop, firemonkey, delphi-xe3

以下第一张图片取自虚拟机，第二张取自真实电脑。为什么我在真机上看不到拖动图像？

**虚拟机**

![在此处输入图像描述](../Images/b5fd2e117e0128166086aefa3d60e60e.png)

**真正的电脑**

![在此处输入图像描述](../Images/768c4e66be1705cd1c30ea8fd7a7704a.png)

# php - 将某些变量作为键和值分配给数组

> ID：12445948
> 
> 赞同：-1
> 
> 时间：2012-09-16T09:52:08.077
> 
> 标签：php, html

我有这张桌子，里面有大约 5 列

```
column1, user_id, column3, column4, user_exp 
```

如果我做这样的选择查询

```
$mat_sql = mysql_query(
 "SELECT * 
  FROM users 
  ORDER BY user_exp DESC LIMIT 10", $general); 
```

我如何将`user_id`and`user_exp`放入数组中，使用`user_id as the key`and `user_exp as the value`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:55:26.513

```
$mat_sql = mysql_query("SELECT user_id, user_exp FROM users ORDER BY user_exp DESC LIMIT 10", $general);
while ($row = mysql_fetch_assoc($mat_sql)) {
    $result['user_id'] = $row['user_exp'];
} 
```

# jquery - 如果选中或未选中组的单选按钮，如何显示或隐藏 div？

> ID：12445952
> 
> 赞同：1
> 
> 时间：2012-09-16T09:52:40.180
> 
> 标签：jquery, html, forms, radio-group

我有一组单选按钮，如果选中该组中的一个按钮，则会出现 div，如果我取消选中单选按钮，则 div 会消失，

但我没有得到它的工作，如果我选中一个框 div 出现，如果我选中另一个，第一个选中的单选按钮将自动取消选中，第一个出现的 div 将消失，2\. div 出现。

我试图让该代码工作。下面是我的 HTML 代码：

```
<form>
    <label><input type="radio" name="group1" id="gruppe1"/>Gruppen</label>
    <label><input type="radio" name="group1" id="gruppe2"/>Gruppen 2</label> 
</form>

<div class="layergruppe1">
    <label>Value 1:<input type="number" name="group2" id="value1" value="0" /></label>
    <label>Value 2:<input type="number" name="group2" id="value2" value="0" /></label>
    <label>Value 3:<input type="number" name="group2" id="value3" value="0" /></label>
    <label>Value 4:<input type="number" name="group2" id="value4" value="0" /></label>
</div>

<div class="layergruppe2">
    <label>Value 1:<input type="number" name="group3" id="value1" value="0" /></label>
    <label>Value 2:<input type="number" name="group3" id="value2" value="0" /></label>
    <label>Value 3:<input type="number" name="group3" id="value3" value="0" /></label>
</div> 
```

Javascript：

```
$(document).ready(function(){
    $('.layergruppe1').hide();
    $("#gruppe1").live("click", function(){
        var id = parseInt($(this).val(), 10);
        if($(this).is(":checked")) {
            $('.layergruppe1').show();
        } else {
            $('.layergruppe1').hide();
        }
    });

    $('.layergruppe2').hide();
    $("#gruppe2").live("click", function(){
        var id = parseInt($(this).val(), 10);
        if($(this).is(":checked")) {
            $('.layergruppe2').show();
        } else {
            $('.layergruppe2').hide();
        }
    });
    $('input[type=radio]').click(function(){
        if (this.previous) {
            this.checked = false;
        }
        this.previous = this.checked;
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/EGMdK/87/](http://jsfiddle.net/EGMdK/87/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:06:54.690

[http://jsfiddle.net/EGMdK/121/](http://jsfiddle.net/EGMdK/121/)

固定代码，希望有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:09:49.917

我已经压缩了你的代码：

```
$('.layergruppe1, .layergruppe2').hide();

$('input[name="group1"]').change(
    function(){
        $('div[class^="layergruppe"]').hide();
        $('div.layer' + this.id).show();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EGMdK/122/)。

参考：

*   [属性开始`[attribute^="value"]`选择器](http://api.jquery.com/attribute-starts-with-selector/)
*   [`hide()`](http://api.jquery.com/hide/).
*   [`show()`](http://api.jquery.com/show/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:30:53.010

[http://jsfiddle.net/merakli/gAKYr/](http://jsfiddle.net/merakli/gAKYr/)

```
$(document).ready(function(){
$('.layergruppe1').hide();
$('.layergruppe2').hide();
    $('input[type=radio]').change(function(e)
                                  {
        if (this.id == 'gruppe1') {
            $('.layergruppe1').show();
            $('.layergruppe2').hide();
        } else if (this.id == 'gruppe2') {
            $('.layergruppe1').hide();
            $('.layergruppe2').show();
        }  
      });
}); 
```

其他例子...

[http://jsfiddle.net/merakli/EjJqS/](http://jsfiddle.net/merakli/EjJqS/)

[http://jsfiddle.net/merakli/Gu63y/](http://jsfiddle.net/merakli/Gu63y/)

[http://jsfiddle.net/merakli/ftQ8g/](http://jsfiddle.net/merakli/ftQ8g/)

[http://jsfiddle.net/merakli/dW4gD/](http://jsfiddle.net/merakli/dW4gD/)

[http://jsfiddle.net/merakli/7wdp5/](http://jsfiddle.net/merakli/7wdp5/)

[http://jsfiddle.net/merakli/7wdp5/](http://jsfiddle.net/merakli/7wdp5/)

[http://jsfiddle.net/merakli/7wdp5/](http://jsfiddle.net/merakli/7wdp5/)

# c++ - C/C++ OpenCV 视频处理

> ID：12445955
> 
> 赞同：3
> 
> 时间：2012-09-16T09:52:55.893
> 
> 标签：c++, c, opencv

今天是个好日子！所以目前我正在做一个视频处理项目，所以我决定尝试一下 OpenCV。由于我是新手，所以我决定找一些示例代码并对其进行测试。第一个是 C OpenCV，看起来像这样：

```
#include <opencv/cv.h>
#include <opencv/highgui.h>

#include <stdio.h>

int main( void ) {

CvCapture* capture = 0;
IplImage *frame = 0;

    if (!(capture = cvCaptureFromCAM(0)))
    printf("Cannot initialize camera\n");

cvNamedWindow("Capture", CV_WINDOW_AUTOSIZE);

while (1) {

    frame = cvQueryFrame(capture);
    if (!frame)
        break;

    IplImage *temp = cvCreateImage(cvSize(frame->width/2, frame->height/2), frame->depth, frame->nChannels); // A new Image half size

    cvResize(frame, temp, CV_INTER_CUBIC); // Resize
    cvSaveImage("test.jpg", temp, 0); // Save this image
    cvShowImage("Capture", frame); // Display the frame
    cvReleaseImage(&temp);
    if (cvWaitKey(5000) == 27) // Escape key and wait, 5 sec per capture
        break;
}

cvReleaseImage(&frame);
cvReleaseCapture(&capture);

return 0; 
```

}

所以，这个工作得很好，可以很好地将图像存储到硬盘上。但是问题从下一个示例开始，它使用 C++ OpenCV：

```
#include "opencv2/opencv.hpp"
#include <string>

using namespace cv;

int main(int, char**)
{
    VideoCapture cap(0); // open the default camera
    if(!cap.isOpened())  // check if we succeeded
        return -1;

    Mat edges;
    //namedWindow("edges",1);
    for(;;)
    {
        Mat frame;
        cap >> frame; // get a new frame from camera
        cvtColor(frame, edges, CV_RGB2XYZ);
        imshow("edges", edges);
    //imshow("edges2", frame);
    //imwrite("test1.jpg", frame);
        if(waitKey(1000) >= 0) break;
    }
    // the camera will be deinitialized automatically in VideoCapture destructor
    return 0;
} 
```

所以，是的，一般来说，在显示视频（图像帧）方面几乎没有变化，但是在使用 im* ***函数时，会出现一些问题。

使用**cvSaveImage()**效果很好，但是当我尝试使用**imwrite()**时，会出现关于“访问冲突读取位置”的未处理异常。当我尝试加载图像时，**imread()也是如此。**

那么，我想问的是，是否可以使用 C OpenCV 的大部分功能？或者是否有必要使用 C++ OpenCV。如果是，是否有解决我之前描述的问题的方法。

* * *

同样如此[处](http://opencv.willowgarage.com/documentation/c/core_drawing_functions.html?highlight=imwrite)所述，图像最初是 BGR 格式，因此需要转换。但是进行 BGR2XYZ 转换似乎会反转颜色，而 RGB2XYZ 会保留它们。例子：

[图片](http://www.mediafire.com/?3clzv7qifqpnc8v)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:20:21.607

> 还是有必要使用 C++ OpenCV？

不，没有任何必要。您可以使用任何您喜欢并且认为自己擅长的接口（OpenCV 提供 C、C++、Python 接口）。

对于您关于`imwrite()`and的问题`imread()`：

> 对于彩色图像，顺序通道通常是 Blue、Green、Red，这就是 imshow() 、 imread() 和 imwrite() 所期望的

[从那里](http://opencv.willowgarage.com/documentation/c/core_drawing_functions.html?highlight=imwrite)引用

# php - HTML表格到数组PHP

> ID：12445962
> 
> 赞同：2
> 
> 时间：2012-09-16T09:53:38.690
> 
> 标签：php, html, regex, html-table

我有一个在线学校日历，但我想在自己的应用程序中使用它。不幸的是，我无法让它与 PHP 和正则表达式一起使用。

问题是表格单元格没有被平均划分，并且每个类别都会发生变化。[你可以在这里](http://cibap.nl/beheer/modules/roosters/create_rooster.php?element=CR13A&soort=klas&week=37&jaar=2012)和[这里](http://cibap.nl/beheer/modules/roosters/create_rooster.php?element=CR02B&soort=klas&week=37&jaar=2012)找到时间表。

我试过的正则表达式是这样的：

```
<td rowspan='(?:[0-9]{1,3})' class='value'>(.+?)<br/>(.+?)<br/>(.+?)<br/><br/><br/></td> 
```

但它不能正常工作！

结束数组必须如下所示：

```
[0] => Array
    (
        [0] => maandag //the day
        [1] => 1 //lesson period
        [2] => MEN, 16, dm //content of the cell
    ) 
```

我希望这个问题足够清楚，因为我不是英国人；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:04:34.457

祝你好运，这会很棘手......只是“使用 HTML 解析器”实际上并不能避免主要问题，这是使用行跨度的表的本质。尽管使用 HTML Parser 解析大量 HTML 总是一个很好的建议，但如果您可以将该 HTML 分解成更小、更可靠的块 - 那么使用其他技术进行解析总是会更优化*（但显然更容易HTML 中的细微意外差异）*。

## 规范化表格

如果是我，我会从可以检测表格开始和结束位置的东西开始*（因为即使不需要，我也不想解析整个页面，即使使用 HTML 解析器）*：

```
$table = $start = $end = false;
/// 'Vrijdag' should be unique enough, but will fail if it appears elsewhere
$pos = strpos($html, 'Vrijdag');
/// find your start and end based on reliable tags
if ( $pos !== false ) {
  $start = stripos($html, '<tr>', $pos);
  if ( $start !== false ) {
    $end = stripos($html, '</table>', $start);
  }
}

if ( $start !== false && $end !== false ) {
  /// we can now grab our table $html;
  $table = substr($html, $start, $end - $start);
} 
```

然后由于单元格垂直跨越的随意方式*（但水平似乎是统一的）*，我会选择一个“日”列并向下工作。

```
if ( $table ) {
  /// break apart based on rows
  $rows = preg_split('#</tr>#i', $table);
  ///
  foreach ( $rows as $key => $row ) {
    $rows[$key] = preg_split('#</td>#i', $row);
  }
} 
```

以上应该给你类似的东西：

```
array (
  '0' => array (
    '0' => "<td class='heading'>1",
    '1' => "<td rowspan='1' class='empty'>"
    '2' => "<td rowspan='5' class='value'>3D<br/>009<br/>Hk<br/><br/><br/>"
    ...
  ),
  '0' => array (
    '0' => "<td class='heading'>2",
    '1' => "<td rowspan='2' class='empty'>"
    '2' => "<td rowspan='3' class='value'>Hk<br/>"
    ...
  ),
) 
```

现在你有了它，你可以扫描每一行，并且在你 preg_match 一个行跨度的地方，你必须将该单元格的信息的副本创建到下面的行中*（在正确的位置）*，以便实际创建一个完整的表结构*（没有行跨度）*。

```
/// can't use foreach here because we want to modify the array within the loop
$lof = count($rows);
for ( $rkey=0; $rkey<$lof; $rkey++ ) {
  /// pull out the row
  $row = $rows[$rkey];
  foreach ( $row as $ckey => $cell ) {
    if ( preg_match('/ rowspan=.([0-9]+)./', $cell, $regs) ) {
      $rowspan = (int) $regs[1];
      if ( $rowspan > 1 ) {
        /// there was a gotcha here, I realised afterwards i was constructing
        /// a replacement pattern that looked like this '$14$2'. Which meant
        /// the system tried to find a group at offset 14\. To get around this
        /// problem, PHP allows the group reference numbers to be wraped with {}.
        /// so we now get the value of '$1' and '$2' inserted around a literal number
        $newcell = preg_replace('/( rowspan=.)[0-9]+(.)/', '${1}'.($rowspan-1).'${2}', $cell);
        array_splice( $rows[$rkey+1], $ckey, $newcell );
      }
    }
  }
} 
```

以上应该规范化表，以便行跨度不再是问题。

*（请注意上面是理论代码，我手动输入了它，还没有测试它——我很快就会这样做）*

## 测试后

我已经更新了上面的一些小错误，即以错误的方式获取某些函数的 php 参数......在对它们进行排序之后，它似乎可以工作：

```
/// grab the html
$html = file_get_contents('http://www.cibap.nl/beheer/modules/roosters/create_rooster.php?element=CR13A&soort=klas&week=37&jaar=2012');

/// start with nothing
$table = $start = $end = false;
/// 'Vrijdag' should be unique enough, but will fail if it appears elsewhere
$pos = strpos($html, 'Vrijdag');

/// find your start and end based on reliable tags
if ( $pos !== false ) {
  $start = stripos($html, '<tr>', $pos);
  if ( $start !== false ) {
    $end = stripos($html, '</table>', $start);
  }
}

/// make sure we have a start and end
if ( $start !== false && $end !== false ) {
  /// we can now grab our table $html;
  $table = substr($html, $start, $end - $start);
  /// convert brs to something that wont be removed by strip_tags
  $table = preg_replace('#<br ?/>#i', "\n", $table);
}

if ( $table ) {
  /// break apart based on rows (a close tr is quite reliable to find)
  $rows = preg_split('#</tr>#i', $table);
  /// break apart the cells (a close td is quite reliable to find)
  foreach ( $rows as $key => $row ) {
    $rows[$key] = preg_split('#</td>#i', $row);
  }
}
else {
  /// create so we avoid errors
  $rows = array();
}

/// changed this here from a foreach to a for because it seems
/// foreach was working from a copy of $rows and so any modifications
/// we made to $rows while the loop was happening were ignored.
$lof = count($rows);
for ( $rkey=0; $rkey<$lof; $rkey++ ) {
  /// pull out the row
  $row = $rows[$rkey];
  /// step each cell in the row
  foreach ( $row as $ckey => $cell ) {
    /// pull out our rowspan value
    if ( preg_match('/ rowspan=.([0-9]+)./', $cell, $regs) ) {
      /// if rowspan is greater than one (i.e. spread across multirows)
      $rowspan = (int) $regs[1];
      if ( $rowspan > 1 ) {
        /// then copy this cell into the next row down, but decrease it's rowspan
        /// so that when we find it in the next row we know how many more times
        /// it should span down.
        $newcell = preg_replace('/( rowspan=.)([0-9]+)(.)/', '${1}'.($rowspan-1).'${3}', $cell);
        array_splice( $rows[$rkey+1], $ckey, 0, $newcell );
      }
    }
  }
}

/// now finally step the normalised table and get rid of the unwanted tags 
/// that remain at the same time split our values in to something more useful
foreach ( $rows as $rkey => $row ) {
  foreach ( $row as $ckey => $cell ) {
    $rows[$rkey][$ckey] = preg_split('/\n+/',trim(strip_tags( $cell )));
  }
}

echo '<xmp>';
print_r($rows);
echo '</xmp>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:11:19.367

请使用 HTML 解析器来提取值。PHP 简单的 HTML 解析器值得一试：http: [//simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# mysql - Mysql别名和左连接

> ID：12445965
> 
> 赞同：0
> 
> 时间：2012-09-16T09:54:10.480
> 
> 标签：mysql

我有 2 个两个表。一个表连续包含 2 个用户 ID（如快速用户和第二个用户）。另一个表包含用户数据（如用户名）。

如何使用左连接检索 2 个用户名？我想要sql查询。我怎样才能在 php 中得到这个结果？

谢谢

福萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:57:20.727

试试这个，

```
SELECT  a.fastuser, b.*,
        a.secondUser, c.*
FROM    table1 a
        LEFT JOIN table2 b
            on a.fastUser = b.userID
        LEFT JOIN table2 c
            on a.secondUser = c.userID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:57:45.720

您可以加入同一个表两次，并为表和 user_name 列使用不同的别名：

```
select u1.user_name as first_username,
       u2.user_name as second_username
from some_table t
left join user_table u1 on t.first_user_id = u1.user_id
left join user_table u2 on t.second_user_id = u2.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T11:56:33.433

假设 Table1 包含用户信息：--id、id_c、电子邮件、年龄等。

表 2 包含 user_name :--id,user_name

这里table1中的id是指表1中的id（对于第一个用户）这里table1中的id_c是指表2中的id（对于第二个用户）然后查询就像

```
select a.user_name,b.user_name,u.email from Table1 as u
left join Table2 as a on u.id=a.id
left join Table2 as b on u.id_c=b.id 
```

您可以浏览我的博客文章以供参考

[http://codebucket.co.in/for-mysql-savvy-multiple-joins-with-alias/](http://codebucket.co.in/for-mysql-savvy-multiple-joins-with-alias/)

# php - 停止在 PHP 中使用 `global`

> ID：12445972
> 
> 赞同：46
> 
> 时间：2012-09-16T09:55:07.357
> 
> 标签：php

我有一个`config.php`包含在每个页面中的内容。在配置中，我创建了一个看起来像这样的数组：

```
$config = array();
$config['site_name']      = 'Site Name';
$config['base_path']      = '/home/docs/public_html/';
$config['libraries_path'] = $config['base_path'] . '/libraries';
//etc... 
```

然后我有`function.php`，几乎每个页面都包含它，我必须使用`global $config`它来访问它 -*这*就是我想要摆脱的！

如何`$config`在不使用的情况下访问我的代码的其他部分`global`？

谁能解释一下，**为什么**我不应该`global`在我的例子中使用？有人说它的语气不好，有人说它不安全？

### 编辑1：

我在哪里以及如何使用它的示例：

```
function conversion($Exec, $Param = array(), $Log = '') {
    global $config;
    $cmd = $config['phppath'] . ' ' . $config['base_path'] . '/' . $Exec;
    foreach ($Param as $s)
    {
        $cmd .= ' ' . $s;
    }
} 
```

### 编辑2：

[按照Vilx](https://stackoverflow.com/users/41360/vilx)的建议，将所有这些都放在课堂上会很酷，但在这种情况下，我将如何将它与以下从数据库中提取配置的循环联系`key`起来`value`。
我过度简化了分配`$config`数组的想法，这里是一个例子：

```
$sql = "SELECT * from settings";
$rsc = $db->Execute($sql);
if ( $rsc ) {
    while(!$rsc->EOF) {
        $field = $rsc->fields['setting_options'];
        $config[$field] = $rsc->fields['setting_values'];
        @$rsc->MoveNext();
    }
} 
```

### 编辑 3：

此外，我必须从 config 中设置的函数访问其他`vars`函数，并且它们很少，例如：`$db`等`$language`。

如果我把它们放在课堂上，它真的能解决任何问题吗？如果我使用`global`它真正改变了什么？

### 编辑4：

我在函数中阅读[了 PHP 全局，](https://stackoverflow.com/questions/5166087/php-global-in-functions)[戈登](https://stackoverflow.com/users/208809/gordon)以非常好的方式解释了为什么你不应该使用`global`. 我同意一切，但在我的情况下我不使用`global`重新分配变量，这将导致，就像他说的那样`<-- WTF!!`，;)) 是的，同意，这太疯狂了。但是，如果我只需要通过使用`global $db`这种情况下的问题来从函数访问数据库？否则，您如何在不使用的情况下执行此操作`global`？

### 编辑 5：

在同一个 PHP global in functions [deceze](https://stackoverflow.com/users/476/deceze)说：*“反对 global 的一个重要原因是它意味着该函数依赖于另一个范围。这将很快变得混乱。”*

但我在这里谈论的是基本的'INIT'。我基本上设置`define`但使用`vars`- 这在技术上是错误的。但是您的功能不依赖于任何东西 - 而是`$db`您可以记住的一个 var 的名称？这真的是全球需要使用`$db`的，这里的依赖关系在哪里以及如何使用它？

**PS**我只是有一个想法，我们在这里面临两种不同思想的冲突，例如：*我*的（但不太了解面向对象的编程）和那些在OOP中可以被称为大师的人（从我目前的角度来看） - 对我来说看起来很明显的事情会引发新的问题。我想这就是为什么这个问题被一遍又一遍地问到的原因。就我个人而言，它毕竟变得更加清晰，但仍有一些事情需要澄清。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-16T10:52:39.500

反对`global`变量的要点是它们非常紧密地耦合代码。您的*整个代码库*取决于 a）变量*名称* `$config`和 b）该变量的存在。如果您想重命名变量（无论出于何种原因），您必须在整个代码库的*任何地方都这样做。*您也不能再使用任何依赖于变量的代码。

`global`带变量的示例：

```
require 'SomeClass.php';

$class = new SomeClass;
$class->doSomething(); 
```

在上述行中的任何地方，您都可能会遇到错误，因为类或某些代码`SomeClass.php`隐式依赖于全局变量`$config`。尽管只看课程，但没有任何迹象表明这一点。要解决这个问题，你必须这样做：

```
$config = array(...);

require 'SomeClass.php';

$class = new SomeClass;
$class->doSomething(); 
```

如果您没有在其中设置正确的键，此代码可能*仍会在*`$config`某处失败。由于配置数组的哪些部分`SomeClass`需要或不需要以及何时需要它们并不明显，因此很难重新创建正确的环境以使其正常运行。如果您碰巧已经有一个变量`$config`用于您想要使用的其他东西，它也会产生冲突`SomeClass`。

因此，与其创建隐式的、不可见的依赖项，*不如注入*所有依赖项：

```
require 'SomeClass.php';

$arbitraryConfigVariableName = array(...);

$class = new SomeClass($arbitraryConfigVariableName);
$class->doSomething(); 
```

通过显式传递配置数组作为参数，上述所有问题都解决了。*这就像在您的应用程序内部传递所需的信息*一样简单。它还使应用程序的结构和流程以及与什么对话更加清晰。如果您的应用程序目前是一团烂泥，那么要达到这种状态可能需要进行一些重组。

* * *

您的代码库越大，您就越需要将各个部分相互*分离。*如果每个部分都依赖于代码库中的每个其他部分，那么您根本无法单独测试、使用或重用它的任何部分。这只会演变成混乱。要将部分彼此分开，请将它们编码为类或函数，这些类或函数将所有必需的数据作为参数。这会在代码的不同部分之间创建干净的接缝（接口）。

* * *

尝试将您的问题结合到一个示例中：

```
require_once 'Database.php';
require_once 'ConfigManager.php';
require_once 'Log.php';
require_once 'Foo.php';

// establishes a database connection
$db = new Database('localhost', 'user', 'pass');

// loads the configuration from the database,
// the dependency on the database is explicit without `global`
$configManager = new ConfigManager;
$config = $configManager->loadConfigurationFromDatabase($db);

// creates a new logger which logs to the database,
// note that it reuses the same $db as earlier
$log = new Log($db);

// creates a new Foo instance with explicit configuration passed,
// which was loaded from the database (or anywhere else) earlier
$foo = new Foo($config);

// executes the conversion function, which has access to the configuration
// passed at instantiation time, and also the logger which we created earlier
$foo->conversion('foo', array('bar', 'baz'), $log); 
```

我将把各个类的实现留给读者作为练习。当您尝试实现它们时，您会注意到它们实现起来非常简单明了，并且不需要单个`global`. 每个函数和类都以函数参数的形式获取所有必要的数据。还应该清楚的是，上述组件可以以任何其他组合插入在一起，或者依赖关系可以很容易地替换为其他组件。例如，配置根本不需要来自数据库，或者记录器可以记录到文件而不是数据库，而`Foo::conversion`无需知道任何这些。

* * *

示例实现`ConfigManager`：

```
class ConfigManager {

    public function loadConfigurationFromDatabase(Database $db) {
        $result = $db->query('SELECT ...');

        $config = array();
        while ($row = $result->fetchRow()) {
            $config[$row['name']] = $row['value'];
        }

        return $config;
    }

} 
```

这是一段非常简单的代码，甚至没有做太多的事情。您可能会问为什么要将其作为面向对象的代码。关键是这使得使用此代码非常灵活，因为它将它与其他所有内容完美地隔离开来。你给一个数据库连接，你得到一个具有特定语法的数组。输入→输出。清晰的接缝，清晰的界面，最小的，明确定义的职责。你可以用一个简单的函数来做同样的事情。

对象的额外优势是它甚至进一步将调用的代码`loadConfigurationFromDatabase`与该函数的任何特定实现分离。如果您只是使用 global `function loadConfigurationFromDatabase()`，那么您基本上又遇到了同样的问题：当您尝试调用它时需要定义该函数，如果您想用其他东西替换它，则会出现命名冲突。通过使用一个对象，代码的关键部分移到了这里：

```
$config = $configManager->loadConfigurationFromDatabase($db); 
```

`$configManager`您可以在此处替换*任何其他*也具有方法的对象`loadConfigurationFromDatabase`。那就是“鸭子打字”。你不在乎到底`$configManager`是什么，只要它有一个方法`loadConfigurationFromDatabase`。如果它像鸭子一样走路，像鸭子一样嘎嘎叫，那它就是鸭子。或者更确切地说，如果它有一个`loadConfigurationFromDatabase`方法并返回一个有效的配置数组，它就是某种 ConfigManager。您已经将您的代码与一个特定的变量`$config`、一个特定的`loadConfigurationFromDatabase`函数甚至一个特定的函数分离`ConfigManager`。所有部分都可以从任何地方动态更改、换出、替换和加载，因为代码不依赖于任何一个特定的其他部分。

该`loadConfigurationFromDatabase`方法本身也不依赖于任何一个特定的数据库连接，只要它可以调用`query`它并获取结果。传递给它的`$db`对象可能完全是假的，而是从 XML 文件或其他任何地方读取其数据，只要它的*接口*仍然表现相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-16T10:09:50.010

我已经用一堂课解决了这个问题：

```
class Config
{
    public static $SiteName = 'My Cool Site';
}

function SomeFunction
{
    echo 'Welcome to ' , Config::$SiteName;
} 
```

fcortes 使用常量的建议也是一个很好的建议。我只想建议给所有常量一个前缀，比如`CFG_SITE_NAME`，以避免意外的名称与其他常量发生冲突。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-16T10:03:58.157

对于您的情况，我将创建一个`constants.php`带有[定义](http://www.php.net/define)的唯一文件（如果您的目的是这些“变量”永远不会在执行时更改）：

```
define('SITE_NAME','site name');

define('BASE_PATH','/home/docs/public_html/');

... 
```

将其包含`constants.php`在您需要它的所有文件中：

```
include_once('constants.php'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-16T14:23:28.183

在面向对象方法和过程方法之间（更一般地说，在声明式和命令式方法之间）有很多讨论，每种方法都有其优点和缺点。

我使用的是单例（全局的 OOP 版本）的“配置”类。它对我很有用，直到我发现需要在一个应用程序中一起使用几个以前开发的解决方案 - 因为所有配置都是全局的并且由同一个类（在你的情况下是相同的变量名）引用它们冲突并且我有每次我从其他子应用程序调用代码时切换到正确的配置。

你有两种方法：

a) 以您习惯和熟悉的方式设计您的应用程序（这会更好，因为您已经有这方面的经验，并且您可以预测开发需要多长时间以及可能会或可能不会出现哪些问题）；在你陷入当前方法的限制之后，重构以避免全局变量；

b) 看看它在 OOP 框架中是如何完成的（至少看三个或四个，即 Cake、CodeIgniter、Zend、Symfony、Flow3），然后借用一些东西，或者切换到使用框架（或者也许你会更确定你会这样做一切正常）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T12:25:15.283

我创建了一个简单的小班：

```
class Config {

    private static $config = array();

    public static function set( $key, $value ) {
        self::$config[$key] = $value;
    }

    public static function get( $key ) {
        return isset( self::$config[$key] ) ? self::$config[$key] : null;
    }
}

Config::set( 'my_config', 'the value' );

echo 'the config value is: ' . Config::get('my_config'); 
```

这可以很容易地重构为具有一个函数`isSet( $key )`或者一个`setAll( $array )`.

编辑：现在语法应该是有效的。

您可以轻松地修改此类，如下所示：

```
class Config {

    private static $config = array();

    public static function set( $key, $value ) {
        self::$config[$key] = $value;
    }

    public static function get( $key ) {
        return isset( self::$config[$key] ) ? self::$config[$key] : null;
    }

    public static function setAll( array $array ) {
        self::$config = $array;
    }

    public static function isKeySet( $key ) {
        return isset( self::$config[ $key ] );
    }
}

Config::setAll( array(
    'key' => 'value',
    'key2' => array( 'value',
                    'can be an',
                    'array' ) ) );
Config::set( 'my_config', 'the value' );

if( Config::isKeySet( 'my_config' ) ) {
    echo 'the config value is: ' . Config::get('my_config');
} 
```

您仍然需要将该文件包含在任何其他使用配置的文件中，或者使用[自动加载器](http://php.net/manual/en/function.spl-autoload-register.php)。

编辑2：

它与使用全局几乎相同，不同之处在于您无需在每个函数的开头声明您要使用它。如果你想全局使用 Configs，那么 Configs 必须在某种程度上是全局的。将某些内容放在全局范围内时，您需要争论这对于其他不打算查看此信息的类是否可能是危险信息...默认配置？我认为在全局范围内是安全的，然后您只需要易于修改和自定义的东西。

如果您认为它是危险信息，那么除了它所针对的类之外的类之外的类应该无法访问该信息，那么您可能需要签入[Dependency injection](http://en.wikipedia.org/wiki/Dependency_injection)。通过依赖注入，一个类将在其构造函数中获取一个对象，将其私有地放置在一个变量中以供使用。这个对象可以是来自配置类的对象，然后你需要一个包装类首先创建配置对象，然后是注入配置的模板对象。这是在更复杂的设计模式中经常看到的设计，例如领域驱动设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T12:21:50.407

配置文件

```
<?php
class config {

    private static $config = array();

    public static function set( $key, $value ) {
        self::$config[$key] = $value;
    }

    public static function get( $key ) {
        if( config::isKeySet( $key ) ) {
            return isset( self::$config[$key] ) ? self::$config[$key] : null;
        }
    }

    public static function setAll( array $array ) {
        self::$config = $array;
    }

    public static function isKeySet( $key ) {
        return isset( self::$config[ $key ] );
    }
}

// set valuable values

config::setAll( array(
    'key' => 'value',
    'key2' => array( 'value', 'can be an', 'array' ),
    'database' => array( "username" => "root", "password" => "root")
                     )
    );
config::set( 'my_config', 'the value' );
?> 
```

config.usage.php

```
<?php
require_once 'config.php';
$database_credentials = config::get('database');
echo 'the config value for username is ' . $database_credentials['username'];
echo '<br> the config value for password is ' . $database_credentials['password'];

function additionalFunctionality($database_credentials)
{
    echo '<br> the config value for password is ' . $database_credentials['password'];
}
?> 
```

config.usage.too.php

```
<?php
require_once 'config.php'; // put this first
require_once 'config.usage.php'; // include some functionality from another file
$database_credentials = Config::get('database');
echo 'the config value for username is ' . $database_credentials['username'];

additionalFunctionality($database_credentials); // great
?> 
```

# windows - CRF++的安装：命令。/配置不起作用

> ID：12445978
> 
> 赞同：-1
> 
> 时间：2012-09-16T09:55:45.703
> 
> 标签：windows, crf++

我想***在 windows 上安装 CRF++ 工具包***。但是，我对命令**./configure**有疑问。它不起作用。有没有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T06:37:48.357

你不能`./configure`在 Windows 上使用，因为这是一个 Linux 命令。对于 windows，你需要下载正确的 CRF++ 版本（当然是 win [cfrpp](http://code.google.com/p/crfpp/downloads/list)）。您可以看到 3 个主要文件`crf_learn.exe`：`crf_test.exe`和`libcrfpp.dll`. 请查找[cfrpp 用法](http://crfpp.googlecode.com/svn/trunk/doc/index.html#usage)以获取更多信息。

# php - ID 未排序

> ID：12445979
> 
> 赞同：-2
> 
> 时间：2012-09-16T09:55:54.280
> 
> 标签：php, mysql

我遇到了一个奇怪的问题。每当我向数据库添加一个新条目时，它都会给它一个更高的 id 编号，但不知何故将它视为一个较低的编号并将其置于旧条目之下。

在 PHP 中排序时`DESC`，我也得到了这个命令，有人知道这里出了什么问题吗？

我`$res = mysql_query("SELECT * FROM data ORDER BY 'id' DESC");`用来对它们进行排序，它给出的顺序与图片中的相同。（不知道为什么我在这里被否决但是好的..）

图片： ![在此处输入图像描述](../Images/3c9b18214cfcc28ccc6bc09efeb321f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:05:37.057

您的查询是：

```
SELECT * FROM data ORDER BY 'id' DESC 
```

您正在按*string* `'id'`排序，请注意不在引号内时突出显示的语法。这意味着您以随机顺序获得它们。删除`'`. 如果您打算转义该列`id`，则应使用反引号：

```
SELECT * FROM data ORDER BY `id` DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T09:59:56.623

当您在表上插入数据时，并不意味着新数字（或最高）始终位于最低行。它随机插入记录。`ORDER BY`当您通过 using子句检索行时，您可以对其进行排序的唯一方法，例如

```
SELECT *
FROM tableName
ORDER BY ID DESC 
```

所以假设 ID 是数字。如果您的 ID 存储为字符串，那么您应该*将*其转换为数字，

```
SELECT *
FROM tableName
ORDER BY CAST(ID AS SIGNED) DESC 
```

**更新 1**

它应该是

```
$res = mysql_query("SELECT * FROM data ORDER BY `id` DESC"); 
```

不是

```
$res = mysql_query("SELECT * FROM data ORDER BY 'id' DESC"); 
```

你所做的是你`ID`用单引号包围了它，迫使服务器将其读取为字符串而不是`Numeric`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T09:58:48.707

当您不使用任何`ORDER BY`子句时，PHPMyAdmin 中的顺序是*一种随机的*。事实上，新行可以取代旧行。

我很好奇你是如何*在 PHP 中**排序`DESC`*的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T10:10:15.553

不要绝对信任 GUI Web 界面，因为有时（并非总是）它会在会话管理中出错，但是您可以使用它运行 SQL 查询。

1- 要运行 SQL 查询，请单击导航栏上的“SQL”。

2- 在提供的框中输入您的 SQL。

```
SELECT *
FROM tableName
ORDER BY ID DESC 
```

3- 单击“开始”。

# assembly - 汇编程序（fasm） - 读取字符

> ID：12445980
> 
> 赞同：3
> 
> 时间：2012-09-16T09:56:10.990
> 
> 标签：assembly, fasm

bios 中断函数 21h (ah = 1h) 应该从标准输入中读取一个字符并回显它。

我的阅读功能：

```
 mov ah, 1h
    int 21h 
```

所以，如果我按下一个键，它会意识到这一点，但它不会回显一个字符。由于我使用我的代码从我的软盘和字符回显功能 int 10h (ah = 0eh) 启动它，我想我必须存储它然后用“视频 - 电传输出” (int 10h (ah = 0eh) 回显它））。

还是我错过了 aboce 代码中的某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:57:38.923

中断 0x21 是类似于 MSDOS 的操作系统功能的“接口”，而不是 BIOS。

如果您正在编写实模式引导加载程序或小型操作系统内核，则必须使用自己的 IRQ 1 处理程序。

有关在您自己的内存缓冲区中捕获所有按键的方法，请参阅此答案： [如何检查 x86 程序集中的键状态？](https://stackoverflow.com/questions/10524855/how-to-check-keys-status-in-x86-assembly)

然后你将不得不安排某种循环。您检查按键（通过读取内存缓冲区）。一旦检测到按键，要打印“回显”键，您必须向视频存储器写入一些内容。那是另一个故事。如果您使用默认文本模式，只需写入 0xB800 段。如果您使用的是图形模式（VGA 或 VESA），那么您必须从某个地方获取光栅字体。

如果您在引导加载程序级别以汇编语言编写内容，那么可用的内容不多。绝对不是`int 0x21`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T17:09:09.010

你基本上在做两件不同的事情：

1.  从键盘获取字符
2.  将其显示到屏幕上

涉及两个不同的 BIOS 中断，但幸运的是，它们都在 AL 中使用相同的值。

```
mov ah,0h   ;get character from keyboard
int 16h     ;and store it in AL
mov ah,0eh  ;Display a character in AL
int 10h     ;aka, echo it 
```

INT 21h 是一个 MSDOS 的东西，如果我们谈论的是引导加载程序，这是一个禁忌。

# c# - c# SoundPlayer 播放列表循环

> ID：12445984
> 
> 赞同：0
> 
> 时间：2012-09-16T09:57:23.093
> 
> 标签：c#, background-music, soundplayer

也许我有一个简单的问题，但我对 MSDN 有点困惑。我想用一些东西来播放音乐。我知道这听起来很容易。

```
private void playMusic(string path) {
        using (SoundPlayer player = new SoundPlayer(path)) {
            player.PlayLooping();                   
        }
    } 
```

这工作正常，但是 .PlayLooping 中的更多声音呢？或改变音量？SoundPlayer 一定有一些解决方案，不是吗？

我想在 MOGRE 程序中使用，首先我尝试使用`MogreFreeSL`，但对我来说没用。

我只想要多一个声音的背景音乐，一定很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:38:25.430

也许 MogreFreeSL 不能很好地工作？我在自己的 IrrKlang 项目中使用了 Mogre，它适用于多种声音。也许你可以试试？

IrrKlang：[http ://www.ambiera.com/irrklang/](http://www.ambiera.com/irrklang/)

示例代码： http: [//sourceforge.net/p/ponykart/code/832/tree/trunk/Ponykart/Sound/](http://sourceforge.net/p/ponykart/code/832/tree/trunk/Ponykart/Sound/)（虽然现在有点破）

# sql - LINQ to SQL 间接变量

> ID：12445985
> 
> 赞同：1
> 
> 时间：2012-09-16T09:57:25.763
> 
> 标签：sql, linq, where-clause

首先，如果这个问题对于这个论坛来说太基本了，我很抱歉。我对此很陌生，并且正在努力应对许多基础知识 - 但我坚持不懈！

我有一个问题，我想创建一个带有 WHERE 子句的 LINQ to SQL 查询，该子句间接引用我的数据库中的一列。例如，如果我有一些看起来像这样的代码：

```
var PLMatches = from PLMat in db1.PLAccountHeaders
              where PLMat.CompanyAlphaId.Equals(CoId)
              && dbField.Equals(Limit)
              select PLMat; 
```

这样 dbField 将是一个包含数据库字段名称的变量。因此，如果 dbField 的值是“PLMat.ItemCode”，它会很高兴地消失并返回 ItemCode 等于 Limit 值的所有记录实例，如果 dbField 的值是“PLMat.ItemName”，它会很高兴地消失并且返回 ItemName 等于 Limit 值的所有记录实例，依此类推。

我真的很感激这两个方面的帮助来回答一个非常具体的问题，我相信它会增强我的基本理解。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:10:27.403

我认为您所要求的在 LINQ 中是不可能的，但是您可以使用动态 Linq 库。

[这是链接](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

您下载 zip，解压缩，然后在您的解决方案中引用它。

然后你可以做这样的事情：

```
// the "normal" LINQ way:
    var query = from x in ctx.People
                        where x.city == "Boston" && x.age > 18
                        orderby x.ID
                        select x;

// the Dynamic Linq way:
    var query = database.People
                        .Where("city = Boston AND age > 18")
                        .OrderBy("id")
                        .Select("New(Person as Name, Age)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:55:38.373

另一种方法（除了动态 linq）是有条件地编写查询。像这样：

```
var PLMatches = from PLMat in db1.PLAccountHeaders
              where PLMat.CompanyAlphaId.Equals(CoId)
              select PLMat;
if (dbField == "ItemCode")
    PLMatches = PLMatches.Where(m => m.ItemCode == Limit);
else if (dbField == "ItemName")
    PLMatches = PLMatches.Where(m => m.ItemName == Limit);
else if (dbField == ... 
```

代码看起来有点重复，但如果可能条件的数量不太大，我总是更喜欢这样做。优点是，首先，代码完整性检查是在编译时而不是在运行时进行的（与动态 linq 一样），其次，代码的内容非常清楚。（第二个优点也适用于动态 linq，但对于第三种选择来说则不那么重要：在代码中构建表达式）。

由于延迟执行，您可以通过这种方式编写 linq 查询。`PLMatches = PLMatches.Where...`仅更改查询，但尚未执行任何操作。

# javascript - Javascript 即时添加 Div，点击 ul 列表链接

> ID：12445986
> 
> 赞同：0
> 
> 时间：2012-09-16T09:57:27.637
> 
> 标签：javascript, jquery

我试图取代必须创建一个子列表，而是我想通过 javascript/jquery 添加 div。

这是我所拥有的：

```
<script>
function makepage() {
var myvariable1="myTitle";
var newPage = $("<div>'+myvariable1+'</div");
//appendTo here?
</script>

... 
```

然后是列表：

```
<ul>
<li>
<a href="#" id="myid" onclick="makepage();">Click Here</a>
</li>
</ul> 
```

动态创建它的原因代码是我想在内部传递一些变量，我不想使用表单/帖子等......

单击 myid 链接时如何使 newPage 出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:01:58.667

只需确保使用开头的引号并附加到正文或您想要的元素：

```
<script>
    function makepage() {
        var myvariable1="myTitle";
        var newPage = $("<div>"+myvariable1+"</div>");
        $("body").append(newPage);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:03:08.993

不要创建特定函数并使用内联委托，请尝试以下操作：

```
<ul>
    <li>
        <a href="#" id="myid">Click Here</a>
    </li>
</ul> 
```

```
$('#myid').click(function() {
    var myvariable1 = "myTitle";
    var newPage = $("<div>"+myvariable1+"</div>");
    $('body').append(newPage);
});​ 
```

[**演示**](http://jsfiddle.net/WredK/1)

# asp.net-mvc - 首先使用 EF 代码更新多对多集合

> ID：12445991
> 
> 赞同：5
> 
> 时间：2012-09-16T09:58:59.203
> 
> 标签：asp.net-mvc, entity-framework, many-to-many, code-first

我正在使用具有以下配置的 EF Code First

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);
    modelBuilder.Entity<UserProfile>()
        .HasMany(x => x.TeamLeaders)
        .WithMany()
        .Map(m => m.MapLeftKey("UserId")
        .MapRightKey("TeamLeaderId")
        .ToTable("UserTeamLeaders"));
} 
```

TeamLeaders 是用户的 ICollection，即它是自引用多对多关系。

用简单的英语来说，一个用户可以有多个团队负责人。这个配置似乎是正确的，因为它创建了我所期望的决斗 FK/PK 链接表。

我有一个 MVC4 应用程序，它允许从集合中编辑、添加和删除团队负责人。

在我的控制器中，我最初有以下内容：

```
 var original = context.UserProfiles
        .Include("TeamLeaders")
        .Single(x => x.UserId == model.UserId);

    context.Entry(original).CurrentValues.SetValues(model); 
```

但是，最后一行未能将 TeamLeaders 集合标记为已更新，并且当我调用 SaveChanges() 时，没有记录任何更改。

相反，我在我的 User 类上编写了一个简单的 CopyProperties 方法，该方法使用反射手动复制属性，所以在我的控制器中我现在有：

```
 var original = context.UserProfiles
        .Include("TeamLeaders")
        .Single(x => x.UserId == model.UserId);

    //context.Entry(original).CurrentValues.SetValues(model);

    original.CopyProperties(model); 
```

但是，这太过分了，SaveChanges 尝试将新用户添加到与所选团队负责人的个人资料相匹配的系统中。

谁能建议我做错了哪一部分？我不确定是否需要更新映射，或者更改将属性从视图模型复制到模型的方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:17:40.050

您必须根据您的更改修改用户中加载的`TeamLeaders`集合，`original`以便更改检测可以识别哪些领导者已被移除以及哪些已被添加。当您调用时`SaveChanges`，EF 将根据检测到的更改为连接表编写适当的 DELETE 和 INSERT 语句。最简单的方法如下所示：

```
var original = context.UserProfiles
    .Include("TeamLeaders")
    .Single(x => x.UserId == model.UserId);

original.TeamLeaders.Clear();
foreach (var teamLeader in model.TeamLeaders)
{
    var user = context.UserProfiles.Find(teamLeader.UserId);
    if (user != null)
        original.TeamLeaders.Add(user)
}
context.SaveChanges(); 
```

`Find`如果他们已经加载，将从上下文中获取团队负责人。如果它们未加载，它将查询数据库。

如果您想避免额外的查询，您可以手动将团队负责人附加到上下文中：

```
var original = context.UserProfiles
    .Include("TeamLeaders")
    .Single(x => x.UserId == model.UserId);

original.TeamLeaders.Clear();
foreach (var teamLeader in model.TeamLeaders)
{
    var user = context.UserProfiles.Local
        .SingleOrDefault(o => o.UserId == teamLeader.UserId);
    if (user == null)
    {
        user = new User { UserId = teamLeader.UserId };
        context.UserProfiles.Attach(user);
    }
    original.TeamLeaders.Add(user)
}
context.SaveChanges(); 
```

除了要加载的第一个查询，`original`这里不涉及进一步的数据库查询。

顺便说一句：您应该能够将强类型`Include`版本与 EF Code First 一起使用：

```
Include(u => u.TeamLeaders) 
```

您只需要`using System.Data.Entity;`在您的代码文件中即可访问此版本。

# javascript - 将 javascript 值传递给表单操作

> ID：12445999
> 
> 赞同：-1
> 
> 时间：2012-09-16T10:00:06.263
> 
> 标签：javascript

我有表格：

```
<form name="form1" method="post" action="test.php?date=javascript:this.form.date2.value"> 
```

我正在为 PHP 使用 DatetimePicker，如下所示：

```
 $myCalendar = new tc_calendar("date2");
        $myCalendar->setIcon("calendar/images/iconCalendar.gif");
        $myCalendar->setDate(date('d'), date('m'), date('Y'));
        $myCalendar->setPath("calendar/");
        $myCalendar->setYearInterval(1970, 2020);
        $myCalendar->dateAllow('2008-05-13', '2015-03-01', false);
        $myCalendar->startMonday(true);
        $myCalendar->autoSubmit(true, "form1", "test.php");
        $myCalendar->autoSubmit(true, "form1");
        $myCalendar->showWeeks(true);  
        $myCalendar->writeScript(); 
```

问题是我无法将 datetimepicker 中的日期值传递给 url 为“test.php?=date=”的表单操作

只需单击日历，而不使用任何额外的按钮并使用 onsubmit 事件，这怎么可能传递 datetimepicker 的值。

执行后，URL 中的结果如下所示：test.php?date=javascript:this.form.date2.value

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:21:52.680

您不需要 javascript 来提交没有 ajax 的表单。因为你想发送 GET 变量？签名，jsut 在您的表单中使用 GET 方法，并将输入的名称设置为您要发送的变量的名称。（如果您可以将 'date2' 替换为 'date'）：

```
<form name="form1" method="get" action="test.php">
    <input name='date' /> 
```