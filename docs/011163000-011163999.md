# StackOverflow 问答 11163000-11163999

# php - Eclipse 中的编码

> ID：11163005
> 
> 赞同：4
> 
> 时间：2012-06-22T19:39:50.400
> 
> 标签：php, eclipse, encoding, utf-8, character-encoding

我正在尝试使用 Eclipse 编码 UTF-8 来处理波兰语字符。不幸的是，我仍然有编码问题。我的设置：

窗口->首选项->调试 ![窗口->首选项->调试](../Images/e5c454d0ff9c56208311e0a612832159.png)

窗口->首选项->工作区 ![窗口->首选项->工作区](../Images/e72840717031c1b63227b11160df2910.png)

窗口->首选项->PHP 内容类型 ![窗口->首选项->PHP 内容类型](../Images/2ccfbd0aa19e92bae752d5d6ef5bf74d.png)

我的 php 文件：

![PHP 文件](../Images/d6fdd5e8f64f9ae06a89743ffbbf3c40.png)

文件属性：

![文件属性](../Images/b08e048227855ccd706a478ce00b250d.png)

最终结果：

![结果在浏览器中](../Images/b8845e51a4bcfc389176db5097ce5818.png)

我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:47:11.980

eclipse 浏览器可能只是不知道要使用哪种编码，因为您没有发送任何指定它的 HTTP 标头。

尝试发送以下 HTTP 标头： Content-Type: text/html; 字符集=utf-8

或者使用真正的浏览器，并将页面编码显式设置为 UTF-8。

# wordpress - 如何在wordpress中编辑代码按钮

> ID：11163006
> 
> 赞同：1
> 
> 时间：2012-06-22T19:39:59.040
> 
> 标签：wordpress

我已经在我的 Wordpress 主题中安装了 prettyprint。现在为了使用它，我需要将我的代码包装在：

```
<pre class="prettyprint">
<code> 
     code here
</code>
</pre> 
```

现在 Wordpress html 编辑器上的代码按钮只提供`<code></code>`标签。现在有没有办法编辑它以便我可以添加额外的`span`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:27:42.130

在你的functions.php中添加这个：

```
function my_quicktags() {
  wp_enqueue_script( 'my_quicktags' , get_template_directory_uri() . '/js/quicktags.js' , array('quicktags') );
}

add_action('admin_enqueue_scripts' , 'my_quicktags'); 
```

创建一个名为 的文件`quicktags.js`，将其放入`js`主题目录中的文件夹中。

复制`/includes/js/quicktags.js`文件的所有内容。您可以编辑/删除/添加任何内容，特别是最后一个字符串，它们对应于编辑器标签。

现在您可以添加您的跨度：

```
edButtons[15] = new qt.TagButton('span-1','My Span','<span class="myClass">','</span>','X'); 
```

这意味着：

```
edButtons[position] = new qt.TagButton('ID','Display Name (value)','opening tag','ending tag','shortcut key'); 
```

# jquery - 使用 Ajax 下载 JQuery 文件

> ID：11163008
> 
> 赞同：6
> 
> 时间：2012-06-22T19:40:21.350
> 
> 标签：jquery, file, download

当我的用户选择生成报告时，我正在使用 John Culviner 出色的 fileDownload 插件来生成“请稍候”消息。

当用户点击一个链接时，我会向我的 PHP 发送一个 ajax 请求，它会在服务器上生成一个 PDF。那时我正在尝试更新 fileDownload 插件的成功处理程序中的链接。

我可能正在接近这个错误，但这是我的代码 - 非常感谢任何帮助。

```
$("body").on("click","##pdfLink", function(e){

    $.fileDownload($(this).attr('href'), {
        preparingMessageHtml: "Preparing your report, please wait...",
        failMessageHtml: "There was a problem generating your report, please try again."
    });

    // Build our data string.
    var strData = {method: "createPDF"};

    // Send a request to build our XL file.
    $.ajax({
        url: '/pdf.php',
        data: strData,
        type: 'get',
        dataType: 'json',
        success: function(data) {
            alert(data);
            $("##pdfLink").attr("href","/pdf/"+data);
        },
        error: function(e) {
            console.log(e);
        }
    });
    return false; 
    e.preventDefault(); 
}) 
```

此时，当我单击链接时，模式会正确显示“请稍候”消息。我的文件确实在服务器上构建（通过我的成功处理程序中的警报确认），并且我的 HREF 确实得到了更新。但是，该插件不会提示用户下载。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:49:33.967

可能，您需要开始下载，在收到链接参考后：

```
 $("body").on("click","##pdfLink", function(e){
    // Build our data string.
    var strData = {method: "createPDF"};        

    var self = this;
    var $pdfGeneratingDialog = $('<div>',{
                   title:"Generating PDF",
                   text: "Please wait..."
                   }).dialog({modal:true});
    // Send a request to build our XL file.
    $.ajax({
        url: '/pdf.php',
        data: strData,
        type: 'get',
        dataType: 'json',
        success: function(data) {
           $pdfGeneratingDialog.dialog('close');

           alert(data);
           $(self).attr("href","/pdf/"+data);
           //starting download process
           $.fileDownload($(self).attr('href'), {
               preparingMessageHtml: "Preparing your report, please wait...",
               failMessageHtml: "There was a problem generating your report, please try again."
           });             
        },
        error: function(e) {
            console.log(e);
        }
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:55:12.060

您不需要在 JS 中调用 ajax 函数。您的链接与您的pdf服务器进程的`<a href='yoursite.com/pdf.php'`此命令位置标识。`$(this).attr('href')`

**编辑：**

你的来电：

```
// Build our data string.
var strData = {method: "createPDF"};

var $preparingFileModal = $("#preparing-file-modal");
$preparingFileModal.dialog({ modal: true });

$.fileDownload($(this).attr('href'), {
    httpMethod: "GET",
    data: strData
    successCallback: function (responseHtml, url) {
        $preparingFileModal.dialog('close');
        // In this case 
        $.fileDownload("/pdf/"+responseHtml, {
            preparingMessageHtml: "Download file",
            failMessageHtml: "Not work"
        });

    },
    failCallback: function (responseHtml, url) {
        $preparingFileModal.dialog('close');
        $("#error-modal").dialog({ modal: true });
    }
}); 
```

HTML：

```
<div id="preparing-file-modal" title="Preparing report..." style="display: none;">
    We are preparing your report, please wait...

    <div class="ui-progressbar-value ui-corner-left ui-corner-right" style="width: 100%; height:22px; margin-top: 20px;"></div>
</div>

<div id="error-modal" title="Error" style="display: none;">
    There was a problem generating your report, please try again.
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:53:44.910

我也为我的应用程序使用 jquery.filedownload，我希望我的解决方案能帮助与我有类似要求的其他人；我稍微改变一下用法。IE：

1.  我将它与 rails3 一起使用

2.  我想显示高音引导模式而不是 jquery 的对话框。

**A.**客户端（前端），下面是支持用户在 HTML 页面点击文件项时下载文件的功能：

函数下载文件（id，file_url，file_name，strTime）{

```
$.fileDownload(file_url, {
    successCallback: function (url) {
        $("#ilulModaldow").find('#file_name').html(file_name);
        $("#ilulModaldow").find('#file_created_at').html(strTime);
        $("#ilulModaldow").modal();
        //DATNT comment: $("#ilulModaldow") is a normal tweeter modal
    },
    failCallback: function (html, url) {

        alert('Connection error! Please try again');
    }
}); 
```

}

**B.**服务器端（后端），我创建了一个发送文件的动作，这个动作是上面javascript函数的参数“file_url”：

高清下载

```
a=APostAttach.find(params[:id])
send_file a.file.path(:original), :type => a.file_content_type
#DATNT comment: below is the way I set cookies for jquery.filedownload plugin requirement
cookies[:fileDownload] = true
cookies[:Path] = "/" 
```

结尾

**C.**根据item(file)点击事件结合后端和字体端：

```
$('#attach_<%= attach.id %>').click(function(){
    DownloadFile("<%= attach.id %>","<%= download_courses_path(:id => attach.id) %>","<%=attach.file_file_name %>","Uploaded at <%=  time_ago_in_words(attach.created_at).gsub('about','') + ' ago'%>");

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:44:21.663

你试过调整你的超时吗？

```
$.ajax({
        url: '/pdf.php',
        data: strData,
        type: 'get',
        dataType: 'json',
        timeout: 10000,
        success: function(data) {
            alert(data);
            $("##pdfLink").attr("href","/pdf/"+data);
        },
        error: function(e) {
            console.log(e);
        }
    });
    return false; 
    e.preventDefault(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-18T17:39:17.150

我正在使用以下代码在同一窗口中下载文件（不打开新标签）。它可以工作，虽然它没有任何错误支持......

```
function downloadURL(url, callback) {

    var id = 'hiddenDownloader';
    $('body').append('<iframe id="' + id + '" style="display: block" src="' + url + '"></iframe>');

    var $iframe = $('#' + id);
    $iframe.on('load', function () {
        $iframe.remove();
        // no error support
        callback();
    });
}

downloadURL('http://example.com', function() {
  alert('Done');
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
```

# clojure - 使用 Compojure、Hiccup 和 Ring 上传多个文件

> ID：11163010
> 
> 赞同：5
> 
> 时间：2012-06-22T19:40:24.090
> 
> 标签：clojure, ring

这真的是[使用 Compojure、Hiccup 和 Ring 上传文件的抄袭](https://stackoverflow.com/questions/4712645/using-compojure-hiccup-and-ring-to-upload-a-file)

如果有多个标签：

```
<form action="/file" method="post" enctype="multipart/form-data">
  <input name="file" type="file" size="20" multiple/>
<input type="submit" name="submit" value="submit" /> 
```

如何使用 ring 获取所有文件的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T21:14:39.703

我创建了一个测试项目，并在提交多个文件时检查了请求映射包含哪些类型的数据。以下是请求图的一部分：

```
{:multipart-params {"submit" submit,
                    "file" [{:size 439,
                             :tempfile #<File /tmp/ring-multipart-5216436296043515206.tmp>,
                             :content-type application/javascript,
                             :filename bar.js}
                            {:size 24,
                             :tempfile #<File /tmp/ring-multipart-3573753728611312574.tmp>,
                             :content-type application/octet-stream,
                             :filename foo.md}], ...} 
```

似乎`(get-in request [:multipart-params "file"])`可以为您提供上传文件的矢量，其中包含有关其原始文件名和类型以及它们临时存储位置的信息。根据[Ring 的文档](https://github.com/ring-clojure/ring/wiki/File-Uploads)，这些文件将被存储一小时。

# coldfusion - 有没有办法保护 ColdFusion 中的文件夹，而不在每个文件夹中使用 Application.cfc？

> ID：11163011
> 
> 赞同：0
> 
> 时间：2012-06-22T19:40:27.950
> 
> 标签：coldfusion, application.cfc, coldfusion-7

我能弄清楚如何保护文件夹的唯一方法是在每个单独的文件夹中包含一个基本的 Application.cfc，包括子文件夹。

如果文件`/test/thisfile.cfm`是安全的并将未登录的用户发送到登录页面，但是该文件夹`/test/test2/`还必须有一个 Application.cfc 或者用户可以直接访问而`test/test2/thatfile.cfm`不会出现问题。

我知道必须有比这更好的方法，我只是不确定它是什么，Google 上的所有内容都在告诉我使用“登录向导”或安装框架。这两个都不是我的选择。

另一个考虑因素，不幸的是，这必须在 MX 7 中工作。如果 CF 9 中有更好的选择，我会很高兴听到它们，但优先考虑的是 MX 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:49:56.883

如果没有 Application.cfc 文件或 MVC 框架，您可以手动启动每个“安全”CFM 文件并检查会话变量：

```
<cfif (NOT structKeyExists( session, "isLoggedIn" )) OR (session.isLoggedIn = false)>
    <cflocation url="/" />
</cfif>
```

当然，这是一种非常费力且不易维护的做法，但有时您只需使用您所拥有的即可。

# jquery-mobile - Jquery 移动和 Facebook 登录

> ID：11163015
> 
> 赞同：3
> 
> 时间：2012-06-22T19:40:32.220
> 
> 标签：jquery-mobile

我正在使用 facebook JS SDK 使用 Jquery mobile 登录 facebook。在初始页面加载时，一切正常 - 我看到了按钮，我可以获取登录状态等。当我（通过 ajax）链接到另一个页面时，按钮没有加载并且没有任何作用。似乎 sdk 没有加载并且 window.fbAsyncInit 没有触发。

我假设这与使用 jquery 移动页面加载所有内容的方式有关，但我已经尝试了一切。将 fb-root 放置在不同的地方，将 init 脚本放在标题、正文和页面内，但我得到了相同的结果。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:25:49.123

我正在使用的移动应用程序遇到了类似的问题。我还没有确定确切的问题，但它与一些无法通过 ajax 发生的加载事件有关。解决问题的最简单方法是强制我的登录页面不通过 ajax 加载。使用*data-ajax*属性。

```
 <a href="/login.htm" data-ajax="false">Login</a> 
```

理想情况下，登录页面加载事件将能够确定使用的方法。可能是这样的：

```
 $(document).on('pageinit','#login_page', function(){
      // if (page-load-event happened through ajax)
      location.reload(true);
 }); 
```

本质上它只是刷新页面。使用 true 作为函数参数将确保它不使用任何缓存，并再次从服务器中提取。

# c - 嵌入式设备的soap/rest C库

> ID：11163017
> 
> 赞同：2
> 
> 时间：2012-06-22T19:40:33.377
> 
> 标签：c, soap, embedded, embeddedwebserver

是否有任何适用于 uIP 的小型肥皂/休息库？我看过 libsoap，但它适用于 nanohttp。我想要一个用 C 编写的 uIP 兼容库......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:44:58.130

您可以使用以下库吗？

*   [cSOAP](http://csoap.sourceforge.net/)（[Sourceforge 项目](http://sourceforge.net/projects/csoap/)）
*   [XML-RPC C](http://xmlrpc-c.sourceforge.net/)（不是肥皂，但也许你可以使用它）
*   [Apache Axis](http://axis.apache.org/axis2/java/core/)（也适用于 C - 但我猜它太大了）

# php - 使用 JS 将 id 发送到另一个 php 文件

> ID：11163018
> 
> 赞同：-3
> 
> 时间：2012-06-22T19:40:39.947
> 
> 标签：php, javascript, mysql

我写下面的代码来发送 id 到另一个 php 文件

```
function selectCheckBox(k) {
    answer = confirm("Do you really want check?");
    if(answer == true) {
        var e = document.Check.elements.length;
        var cnt = 0;
        total = document.Check.elements[k].value;
        PostVar = "id=" + total;
        alert(PostVar);
        makePostRequest("check.php", PostVar);
    }
} 
```

在这段代码中，我得到 PostVar 值为 id=121

check.php中的代码如图

```
require 'dbconnect.php';
$id=$_REQUEST['id'];
$query="update members set status_admin='Yes' where userid='$id'";
$result=mysql_query($query); 
```

但是mysql表中的结果没有更新

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:46:53.333

你不能简单地做 makeGetRequest("check.php?id="+total); 并以某种方式摆脱 PostVar 的东西？您的 $_REQUEST 会很好地抓住它。

另外，小心 SQL 注入！改为使用`$id=intval($_REQUEST['id']);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:55:35.017

**一些调试建议**

*   检查`$_REQUEST`使用的输出`print_r($_REQUEST)`
*   或使用查看查询的输出`exit($query)`
*   查看mysql是否返回任何错误`mysql_query($query) or die(mysql_error())`

并将其放在脚本顶部以查看当前页面或包含页面的任何其他错误：

```
ini_set('display_errors', true);
error_reporting(E_ALL); 
```

# php - 如何使用 JHTML 自定义编辑按钮

> ID：11163019
> 
> 赞同：1
> 
> 时间：2012-06-22T19:40:40.253
> 
> 标签：php, joomla

在 Joomla 中，在此页面：/component/com_content/views/articles/tmpl/default.php

有这段代码（大约第 62 行）：

```
<?php if ($canEdit) : ?>
   <li class="edit-icon">
      <?php echo JHtml::_('icon.edit', $this->item, $params); ?>
   </li>
<?php endif; ?> 
```

它只显示了编辑图标，我想在图标旁边添加一个文本“编辑页面”。

PS：文字必须在标签内：编辑页面

这个怎么做？

# asp.net - 在 MVC3 下使用 Telerik 控件更新表中的关键字段

> ID：11163024
> 
> 赞同：0
> 
> 时间：2012-06-22T19:41:13.767
> 
> 标签：asp.net, asp.net-mvc-3, telerik-grid, telerik-mvc

我正在使用 Telerik 网格控件来操作 MVC3 下的表数据。

表中的键是字符串类型的字段。

相关查看代码：

```
.DataBinding(dataBinding =>
        {
            dataBinding.Ajax()
                .Select("MyTableSelectAjaxEditing", "Maintenance")
                .Insert("MyTableInsertAjaxEditing", "Maintenance")
                .Update("MyTableSaveAjaxEditing", "Maintenance")
                .Delete("MyTableDeleteAjaxEditing", "Maintenance");
        }) 
```

我的更新方法映射到这个函数：

```
 [AcceptVerbs(HttpVerbs.Post)]
    [GridAction]
    public ActionResult MyTableSaveAjaxEditing(String id)
    {
        MyTable myTable = db.MyTable.Find(id);

        if (myTable != null)
        {
            if (TryUpdateModel(myTable))
            {
                db.SaveChanges();
            }
        }
        return View(new GridModel(db.MyTable));
    } 
```

当我更新不是关键的字段时，一切都很好。当键被更新时（从网格），id 参数返回 NEW 值，所以方法开头的 Find 函数找不到相关记录，更新不会发生！

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:12:54.940

我唯一的建议是使用旧 ID 创建一个隐藏列，并将其与其他数据和新 ID 一起返回。我过去也做过类似的事情。当然，您必须将旧 ID 添加到视图模型中。
这不是有史以来最优雅的解决方案，但这是您在密钥可以更改时必须处理的问题。

# swing - valueChanged gui 列表执行两次

> ID：11163025
> 
> 赞同：4
> 
> 时间：2012-06-22T19:41:17.350
> 
> 标签：swing, user-interface, groovy, selection

在这个简单的 gui 列表上进行选择时，我得到 valueChanged 以在鼠标按下时执行两次，在鼠标向上执行一次。

```
import groovy.swing.SwingBuilder
import java.awt.*
import java.swing.*
import javax.swing.*

def main(){
    new SwingBuilder().edt {
        frame(title:'Testing', pack:true, show:true) {
            vbox {
                panel(){
                    textbox = label(text:'null')
                }
                panel(){
                    listing = list(valueChanged:{
                            mess(listing.selectedValue);// this code runs twice
                        },
                        listData: ['test','another','test','and','again'])
                }
            }
        }
    }
}

def mess(mytext){
    new SwingBuilder().edt {
        frame(title:'Message', pack:true, show:true){
            vbox {
                panel(){
                    label(text:mytext)
                }
            }
        }
    }
}

main(); 
```

我已经在stackoverflow上寻找了与此类似的其他问题，但如果它是重复的，我很抱歉，我会删除它，但我不相信它是。我正在尝试做的只是让它在鼠标启动时不执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:59:01.977

是的，使用 Swing JList，当用户单击一行时，您会获得两个 valueChanged 事件。

第一次单击必须`event.valueIsAdjusting == true`表明用户正在更改值，第二次事件必须`event.valueIsAdjusting == false`显示已进行选择（请参阅[此错误报告*的评估部分和此处](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4323107)的事件[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/ListSelectionEvent.html#getValueIsAdjusting%28%29)）

改变：

```
 valueChanged:{
   mess(listing.selectedValue);// this code runs twice
 } 
```

至：

```
 valueChanged:{ event ->
   if( !event.valueIsAdjusting ) mess(listing.selectedValue)
 } 
```

应该解决这个...

(* 需要注意的是，这不是一个错误，从它的关闭状态可以看出) :-)

* * *

### 编辑

要清除选择，您可以更改`main()`为：

```
def main() {
  def data = ['test','another','test','and','again']
  def codeFired = false
  new SwingBuilder().edt {
    frame(title:'Testing', pack:true, show:true) {
      vbox {
        panel(){
          textbox = label(text:'null')
        }
        panel(){
          listing = list listData: data, valueChanged: { event ->
            if( !event.valueIsAdjusting && !codeFired ) {
              mess( listing.selectedValue )
              codeFired = true
              listing.clearSelection()
              codeFired = false
            }
          }
        }
      }
    }
  }
} 
```

# symfony - 找不到类“JMS\SerializerBundle\JMSSerializerBundle”

> ID：11163026
> 
> 赞同：0
> 
> 时间：2012-06-22T19:41:20.897
> 
> 标签：symfony

我正在尝试在 Symfony2 上安装 JMSSerializerBundle。[我在这里](http://jmsyst.com/bundles/JMSSerializerBundle/master/installation)按照 Composer 的说明进行操作。

当我尝试实际使用 JMSSerializerBundle 时，我得到了这个：

```
Fatal error: Class 'JMS\SerializerBundle\JMSSerializerBundle' not found in /home/jason/pressbox/app/AppKernel.php on line 25 
```

这是我的`AppKernel.php`：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Symfony\Bundle\DoctrineMigrationsBundle\DoctrineMigrationsBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
            new VNN\PressboxBundle\VNNPressboxBundle(),
            new VNN\SecurityBundle\VNNSecurityBundle(),
            new VNN\CoreBundle\VNNCoreBundle(),
            new JMS\SerializerBundle\JMSSerializerBundle($this),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

我错过了什么？我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:17:35.283

您是否在 deps 文件中添加了 JMSSerializerBundle 并运行了 php bin\vendors install？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T15:34:00.880

如果您手动安装了 bundle，请尝试找出 bundle 文件确实位于 vendor/../JMS/SerializerBundle 而不是 vendor/../JMS/SerializerBundle/JMSSerializerBundle。

（我也遇到了同样的错误，但像我说的那样通过修复它来解决它）

# objective-c - 隐式 CALayer 动画没有动画

> ID：11163031
> 
> 赞同：0
> 
> 时间：2012-06-22T19:41:59.883
> 
> 标签：objective-c, macos, cocoa, core-animation

我正在尝试动画从窗口滑出一个视图并同时滑入另一个视图。像这样：

```
 Window
------------------  
|----------------| ------------------
||              || |                |
||     view     || |      view      |
||  sliding out || |   sliding in   |
|----------------| ------------------
------------------  
      <---                <--- 
```

我正在使用图层支持的视图，尝试使用隐式动画和 CATransaction。发生的事情是视图滑出动画，但滑入的视图只是跳到位。这是我的代码：

```
 NSView *slidingInView = nil;
    NSView *slidingOutView = nil;
    if (currentState.primaryView != nextState.primaryView) {
        // Slide in a primary view
        [self.window.contentView addSubview:nextState.primaryView];
        CGRect frame = nextState.primaryView.layer.frame; 
        frame.origin.x = slideFromRight ? frame.size.width : 0 - frame.size.width;
        [nextState.primaryView.layer setPosition: frame.origin];

        slidingInView = nextState.primaryView;
        slidingOutView = currentState.primaryView;
    }

    [CATransaction begin];
    [CATransaction setValue:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]
                     forKey:kCATransactionAnimationTimingFunction];
    [CATransaction setAnimationDuration:1.0f];
    [CATransaction setCompletionBlock:^{
        [slidingOutView removeFromSuperview];
    }];

    // Slide in the new view
    slidingInView.layer.position = CGPointMake(0.0f, 0.0f);

    // if there is a view in place already, slide it out to the left.
    if (slidingOutView != nil) {

        CGRect frame = slidingOutView.layer.frame;
        frame.origin = CGPointMake(slidingOutView.layer.frame.size.width, slidingOutView.layer.frame.origin.y);
        if (slideRight)
            frame.origin = CGPointMake(0-slidingOutView.layer.frame.size.width, slidingOutView.layer.frame.origin.y);

        [slidingOutView.layer setPosition: frame.origin];
    }

    [CATransaction commit]; 
```

这对我来说完全是个谜。有人有线索吗？我的窗口的 contentView 有 setWantsLayer: YES，就像我滑入的所有视图一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:27:51.627

隐式动画仅适用于*独立*层（不支持视图的层）。

您需要显式地为图层设置动画（并更改属性值，因为默认情况下不会发生）。它看起来像

```
CABasicAnimation *slideIn = [CABasicAnimation animationWithKeyPath:@"position"];
[slideIn setToValue:[NSValue valueWithCGPoint:myNewEndPoint]];
[slideIn setFromValue:[NSValue valueWithCGPoint:[[slidingInView layer] position]]];
[[slidingInView layer] addAnimation:slideIn forKey:@"mySlideInAnimation"];
[[slidingInView layer] setPosition:myNewEndPoint]; 
```

* * *

另外：除非您更改了锚点，否则图层的位置应该在中心（这意味着将其设置为（0,0）将使图层的 3/4 出现在屏幕外

# c# - C# MVC3 文件输入 html 控件-潜在问题

> ID：11163033
> 
> 赞同：0
> 
> 时间：2012-06-22T19:42:24.250
> 
> 标签：c#, asp.net-mvc-3

我有一个文件上传控件，当用户点击浏览并选择驻留在他们机器上的文件时。之后，我有一个按钮，该按钮回发到操作方法并解析文件并填充页面上模型中的一些字段。然后他们点击保存按钮并保存文件，因为我将文件路径保存在隐藏字段中。我的问题是在我的本地开发环境中一切正常。当我在服务器上部署它时，代码不会解析文件。是否有可能因为服务器无法直接打开和读取用户机器上存在的文件而没有解析文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:52:46.403

> 是否有可能因为服务器无法直接打开和读取用户机器上存在的文件而没有解析文件？

确切地。如果要保存文件，请在第一次发布时保存。您不能只从网页上读取用户计算机上的文件。

### 编辑：

检查有关如何在 MVC3 中上传文件的答案：[https ://stackoverflow.com/a/5193851/618331](https://stackoverflow.com/a/5193851/618331)

# xml - 数据表到 XML

> ID：11163036
> 
> 赞同：1
> 
> 时间：2012-06-22T19:42:42.517
> 
> 标签：xml, linq, datatable, using

我有一个数据表，我想构造一个 xml。我能做到这么远......需要一些帮助。

数据表

```
factory,  item
---------------
1,  123
1,  345
2,  999 
```

xml 应该看起来像

```
<test>
 <factory>1</factory>
 <items>
   <item>123</item>
    <item>345</item>
 </items>
</test>

IEnumerable<XElement> files = from f in dt.AsEnumerable() 
                 select new XElement("test", 
                     new XElement("factory", f["factory"]), 
                     new XElement("item", new XElement("item",f["item"]))); 
```

上面的查询给了我一个平面 xml

```
<test>
 <factory>1</factory>
 <items>
   <item>123</item>   
 </items>
</test>
<test>
 <factory>1</factory>
 <items>
   <item>345</item>   
 </items>
</test> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:24:35.010

这会返回一个`XElement`，而不是一个`IEnumerable<XElement>`（如果你只想要一个，这是逻辑`<test>`，我认为：

```
var result= new XElement("test", dt
                                 .AsEnumerable()
                                 .GroupBy(m => m["factory"])
                                 .Select(f =>
                                        new XElement("factory",
                                            f.Key,
                                            new XElement("items", f.Select(g =>  
                                                new XElement("item", g["item"])))))); 
```

# f# - 如何使用 F# 清除服务器上的所有队列？

> ID：11163043
> 
> 赞同：1
> 
> 时间：2012-06-22T19:43:26.467
> 
> 标签：f#, msmq

我一直在寻找一种简单的方法来清除给定服务器的 MSMQ 中的所有队列。我不需要创建或删除队列，只需清除任何消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:43:27.057

我很难找到这个答案，所以决定发布我发现的内容。就创建脚本与 fsi 而言，这可能存在一些变化，但这是我的解决方案。

在其中创建一个脚本：

```
open System
open System.Messaging

let purgeQueue (server :string) =
    let qs = MessageQueue.GetPrivateQueuesByMachine server
    for q in qs do
        printfn "%O" q.QueueName
        q.Purge() 
```

启动 fsi 和 #r System.Messaging.dll。然后加载此脚本并在您想要的服务器上运行 call purgeQueue 。我的案例我通过了 localhost ，因为我在盒子上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T23:04:52.053

@Joshua - 我在您的代码中添加了一些额外的位，只是为了它。这会自动引用`System.Messaging.dll`并允许您切换是清除公共队列和私有队列还是仅清除公共队列。

```
#if INTERACTIVE
#r "System.Messaging.dll"
#endif

open System
open System.Diagnostics
open System.Messaging

//
[<RequireQualifiedAccess>]
module Queue =
    //
    let purgeByMachine includePrivateQueues (machineName : string) =
        let queues =
            let publicQueues = MessageQueue.GetPublicQueuesByMachine machineName
            if includePrivateQueues then
                let privateQueues = MessageQueue.GetPrivateQueuesByMachine machineName
                Array.append publicQueues privateQueues
            else
                publicQueues

        queues
        |> Array.iter (fun queue ->
            sprintf "Purging queue: %s" queue.QueueName
            |> Trace.WriteLine

            queue.Purge ()) 
```

# apache2 - 使用 Apache2 和 Passenger 启动 Rails 应用程序时显示目录根

> ID：11163046
> 
> 赞同：1
> 
> 时间：2012-06-22T19:43:43.797
> 
> 标签：apache2, ruby-on-rails-3.2, passenger

我已尝试使用 Apache 2.2.21 和 Passenger 3.0.13 托管 Rails 3.2.3 应用程序：

1.  安装 gem 乘客
2.  rvmsudo 乘客安装 apache2 模块
3.  在 /etc/apache2/extra/httpd-vhosts.conf 中添加了网站信息
4.  在 /etc/hosts 中添加了一行（不确定是否需要这样做；乘客文档中未提及
5.  取消注释 /etc/apache2/httpd.conf 中包含 /etc/apache2/extra/httpd-vhosts.conf 的行
6.  重新启动 Apache

当我尝试打开我的网站时，会显示以下内容：

```
Index of /

    Name    Last modified   Size    Description

Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.10 with Suhosin-Patch Phusion_Passenger/3.0.13 Server at lightbesandbox2.com Port 443 
```

这是该网站的 /etc/hosts 条目：

```
127.0.0.1   www.lightbesandbox2.com 
```

这是该网站的 /etc/apache2/extra/httpd-vhosts.conf 条目：

```
NameVirtualHost *:80

<VirtualHost *:80>
  ServerName www.lightbesandbox2.com
  ServerAlias lightbesandbox2.com
  PassengerAppRoot /Users/server1/Sites/iktusnetlive_RoR/ 
  DocumentRoot /Users/server1/Sites/iktusnetlive_RoR/public    
  <Directory /Users/server1/Sites/iktusnetlive_RoR/public>
    AllowOverride all
    Options -MultiViews
  </Directory>
</VirtualHost> 
```

当我执行 rvmsudopassenger-status 时，我得到以下输出：

```
----------- General information -----------
max      = 6
count    = 1
active   = 0
inactive = 1
Waiting on global queue: 0

----------- Application groups -----------
/Users/server1/Sites/iktusnetlive_RoR/:
  App root: /Users/server1/Sites/iktusnetlive_RoR/
  * PID: 8140    Sessions: 0    Processed: 2       Uptime: 20m 51s 
```

我的所有资产都不在我的 Rails 应用程序的公用文件夹中。我使用 Michael Hartl 的 Ruby on Rails 教程中提供的模板编写了一个应用程序。主页位于 /app/views/static_pages/home.html.erb。我决定在公共文件夹中复制一个 index.html 文件，看看它是否会显示。它显示了我所希望的..

有没有办法让乘客找到我的资产而无需我重写我的应用程序？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:39:59.953

也许这可能会有所帮助 [http://www.ajibanda.com/2010/12/install-ruby-on-rails-in-ubuntu-server.html](http://www.ajibanda.com/2010/12/install-ruby-on-rails-in-ubuntu-server.html)

不过，它使用的是 2.1，您可以将其用作从第 7 步开始设置乘客的指南

# ruby-on-rails - 升级到 Rails 3.2.6 和路由错误

> ID：11163049
> 
> 赞同：3
> 
> 时间：2012-06-22T19:44:02.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, gem

我有 Rails 3.2.3，它工作得很好。测试通过。今天我从 Rails 3.2.3 升级到 Rails 3.2.6。

我通过更改 Gemfile 来做到这一点：

我删除

```
gem 'rails', '3.2.3' 
```

并添加

```
gem 'rails', '3.2.6' 
```

我跑`bundle update`。为了看看这是否有效，我运行了我所有的规范测试。我在那里有几个模型，显然所有控制器#show 都失败了。只是控制器#show。这是错误消息：

```
Failure/Error: get 'show', :id => product.to_param
     ActionController::RoutingError:
       No route matches {:id=>"76", :controller=>"products", :action=>"show"} 
```

这是测试的代码：

```
let!(:product) { create(:product) }
describe "GET show" do
    it "should assign the requested product as @product" do
      get 'show', :id => product.to_param
      assigns[:product].should == product
    end
  end 
```

我去了网上的真实链接，令人惊讶的是，它很好。谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:34:56.907

这是最新的旅程宝石（1.0.4）的问题 -

要解决这个问题，只需将 Journey gem 的版本锁定为 1.0.3（稳定）

```
gem "journey", "1.0.3" 
```

# ruby-on-rails - 在 Ruby 中以冒号为前缀的单词有什么作用？

> ID：11163055
> 
> 赞同：0
> 
> 时间：2012-06-22T19:44:35.437
> 
> 标签：ruby-on-rails, ruby, colon

> **可能的重复：**
> [理解 Ruby 中的符号 Ruby](https://stackoverflow.com/questions/2341837/understanding-symbols-in-ruby)
> [中的冒号运算符是什么？](https://stackoverflow.com/questions/6337897/what-is-the-colon-operator-in-ruby)

这是我正在阅读的 Rails 教程给我的一些代码。

```
class Post < ActiveRecord::Base
  attr_accessible :content, :name, :title

  validates :name,  :presence => true
  validates :title, :presence => true,
                    :length => { :minimum => 5 }
end 
```

:content、:name 和 :title 是什么意思？我依稀记得我正在阅读的 ruby​​ 教程（[hlrb](http://humblelittlerubybook.com/)）中的这些，但是当我浏览它时找不到它们。这些以冒号为前缀的词是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T19:49:09.553

您所指的词称为符号。

你问什么符号？它们或多或少像字符串，除了它们是不可变的（无法更改）并且是单例（无论您使用它们多少次，都只会在内存中创建一次）。

这意味着它们在任何地方都被用作键，因为它们的内存效率更高。

因此，例如，如果您有两个哈希，并且有一个名为 key 的键，则使用字符串作为哈希键：

```
my_hash['key'] #in memory once
your_hash['key'] # in memory twice 
```

如果你使用一个符号

```
my_hash[:key] # in memory once
your_hash[:key] # still in memory once! 
```

您也可能会遇到这种形式的符号：

```
key: 'value' 
```

这与

```
:key => 'value' 
```

# php - 我是否需要服务器上的 ssl 证书才能向 https://x.com 发出 SOAP 请求？

> ID：11163058
> 
> 赞同：0
> 
> 时间：2012-06-22T19:44:48.947
> 
> 标签：php, soap, ssl

所以我需要使用x.com的webservices

像[https://x.com:1443/services/servicex?wsdl](https://x.com:1443/services/servicex?wsdl)这样的东西 ，我得到了一个 .p12 和 .cert 文件以及一个密码......

我尝试浏览 SoapClient 的 php.net 页面，但找不到任何东西......

另外，如果有人有很好的教程来做这种事情，也欢迎他们......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:16:18.000

**不**，您不需要服务器上的 SSL 证书来向[https://x.com发出 SOAP 请求](https://x.com)

但是您已经获得了一个 .p12 和一个 .cert 文件，以及一个密码。为什么？因为这个特定的 Web 服务使用基于证书的**身份验证机制。**这就是您需要证书文件的原因 - 以便能够**验证**和使用此 Web 服务。

最常见的身份验证机制是“登录”和“密码”，或“用户”和“密码”——但这并不是验证用户的唯一方法。还有其他几种身份验证方法……“API 密钥”、“策略和签名”等……其中一种方法是使用证书。

因此，重复一遍：您需要这些文件来进行**身份验证**并能够使用 Web 服务，而不是“向 HTTPS 服务器发出 SOAP 请求”。

# javascript - 无法将属性 InnerHTML 设置为 null

> ID：11163060
> 
> 赞同：18
> 
> 时间：2012-06-22T19:45:00.577
> 
> 标签：javascript, html

我有一个简单的 html 页面，body 标记中没有代码。我想通过javascript在body标签中插入html。

我的 javascript 文件看起来像这样。

```
var Global={
    UserWall:function(){
          return "a very long html code";
   }
};

    var globalObject=Object.create(Global);
   document.getElementsByTagName("body").item(0).innerHTML=globalObject.UserWall(); 
```

现在我希望这个非常长的 html 代码在页面加载时自动插入到 body 标记中。但它给了我我在标题中提到的错误。为什么？

这也是创建基于 ajax 的网站（无页面重新加载）的正确方法，这意味着如果我调用服务器端脚本来更新这个非常长的 html 代码并将其附加到页面的主体。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-22T19:51:22.577

您几乎可以肯定在构建 DOM 之前运行您的代码。尝试在[`window.onload`](https://developer.mozilla.org/en/DOM/window.onload)处理程序函数中运行您的代码（但请参阅下面的注释）：

```
window.onload = function() {
    // all of your code goes in here
    // it runs after the DOM is built
} 
```

另一个流行的跨浏览器解决方案是将`<script>`块放在结束`</body>`标记之前。这可能是您的最佳解决方案，具体取决于您的需求：

```
<html>
  <body>

    <!-- all of your HTML goes here... -->

    <script>
        // code in this final script element can use all of the DOM
    </script>
  </body>
</html> 
```

*   请注意，这`window.onload`将等到所有图像和子帧都加载完毕，这可能是 DOM 构建后的很长时间。您也可以使用`document.addEventListener("DOMContentLoaded", function(){...})`来避免此问题，但不支持跨浏览器。底部技巧既是跨浏览器，也是在 DOM 完成后立即运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T09:36:20.750

我已经完成了这里提到的所有解决方案。但直到我使用 Jquery 制作了这个，它们才起作用：

在我的 HTML 页面中：

```
> <div  id="labelid" > </div> 
```

当我点击一个按钮时，我把它放在我的 JS 文件中：

```
$("#labelid").html("<label>Salam Alaykom</label>"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T19:49:04.593

这是`<head>`在 html 中运行的吗？如果是这样，您需要确保`<body>`标签已实际加载。

您需要使用 onload 处理程序，例如：http: [//javascript.about.com/library/blonload.htm](http://javascript.about.com/library/blonload.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:48:36.883

也许这会起作用： `document.getElementsByTagName("body")[0].innerHTML`

# asp.net-mvc - Telerik MVC 网格自定义命令未重新绑定 JSON

> ID：11163061
> 
> 赞同：0
> 
> 时间：2012-06-22T19:45:01.440
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, model-view-controller, telerik

我有一个带有自定义命令按钮的 Telerik 网格，它应该复制一行。命令按钮调用 JsonResult 控制器方法。它复制了这条线并返回了模型，但网格没有改变——我认为因为它没有重新绑定。

我以为它会自动发生。

```
Html.Telerik().Grid<MerchantPageModel>()
          .Name("PageChooserGrid")
          .DataKeys(keys => keys
                                .Add(c => c.PageID)
                                .RouteKey("PageID"))
          .Columns(cols =>
              {
                  cols.Bound(c => c.Name).Width(300).ClientTemplate("<input type='text' name='name' value='<#= Name #>' readonly='true' />");
                  cols.Bound(c => c.Template).Width(400).ClientTemplate("<input type='text' name='template' value='<#= Template #>' readonly='true' />");
                  cols.Bound(c => c.Author).Width(100).ClientTemplate("<input type='text' name='author' value='<#= Author #>' readonly='true' />");
                  cols.Bound(c => c.ModifiedDate).Format("{0:MM/dd/yyyy}").Width(120).ClientTemplate("<input type='text' name='modifieddate' value='<#= ModifiedDate #>' readonly='true' />");
                  cols.Bound(c => c.IncludeInNav).ClientTemplate("<input type='checkbox' name='IncludeInNav' value='<#= IncludeInNav #>' <#= populateCheckboxes(IncludeInNav) #>'  />")
                      .Title("Include In Nav")
                      .Width(100);
                  cols.Command(commands =>
                      {
                          commands.Edit().ButtonType(GridButtonType.Text);
                          commands.Custom("Copy").Text("Copy").DataRouteValues(route => route.Add(o => o.PageID).RouteKey("PageID")).Ajax(true)
                              .Action("_AjaxCopyPage", "SetupWizard");
                          commands.Delete().ButtonType(GridButtonType.Text);
                      }).Title("Action List");
              })
          .DataBinding(data => data.Ajax()
                                   .Select("_AjaxBinding", "SetupWizard")
                                   .Update("_AjaxEditing", "SetupWizard")
                                   .Delete("_AjaxDelete", "SetupWizard"))
          .Pageable()
          .Sortable()
          .ClientEvents(events =>
              { events.OnComplete("Grid_onComplete");
                  events.OnCommand("Grid_onCommand");
                  events.OnDataBound("Grid_OnDataBound");
                  events.OnDataBinding("Grid_OnDataBinding");
              })
              .EnableCustomBinding(true)
          .Render(); 
```

控制器返回：

```
 return Json(pageModel.Pages, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:07:38.747

你应该打电话

```
var grid = $('#PageChooserGrid').data('tGrid');
grid.rebind(); 
```

在javascript中执行您的自定义命令之后。

这迫使网格重新绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:11:24.397

您应该使用 OnComplete 方法。

```
events.OnComplete("Grid_OnComplete"); 
```

你的 JS 代码应该是这样的

```
function Grid_OnComplete(e) {
if (e.name == "copy") {
    $("#" + e.currentTarget.id).data("tGrid").dataBind(e.response.data);
} 
```

}

我们的网格中有一堆通用的自定义函数，并像这样附加到事件中。

```
var bindGridComplete = function ($grid) {
$grid.on('complete', function (e) {
    if (e.name == "copy") {
        $("#" + e.currentTarget.id).data("tGrid").dataBind(e.response.data);
    }
}); 
```

};

# html - 页脚不会与内容一起停留在底部

> ID：11163062
> 
> 赞同：0
> 
> 时间：2012-06-22T19:45:03.247
> 
> 标签：html, css

当我有一些内容时工作得很好。如果我只是放一些类似的东西，
它也可以正常工作。如果我从#content 中删除内容，它也会起作用。由于代码太多，我将把 ti 粘贴到 pastebin 上。在此屏幕截图中显示了问题：http: [//postimage.org/image/ee448x5yp/](http://postimage.org/image/ee448x5yp/) 页脚是黑色部分，绿色部分是 html，如您在 css 上看到的正文。任何可能的解决方案？:(

**HTML**

```
<div id="wrap">
    <div id="header">
        ...
    </div>
    <div id="content">
        <div class="center">
                ...
        </div>
    </div>
    <div id="footer">
        ...
    </div>
  </div> 
```

**CSS**

```
#wrap {
    width: 100%;
    min-height: 100%;
    margin: 0 auto -75px; /* the bottom margin is the negative value of the footer's   height */
    position: relative;
    text-align: left;
}

#footer {
  position: absolute;
  bottom: 0;
  height: 75px; /* Height of the footer */
  width: 100%;
  background: #000;
  text-align: center;
  line-height: 103px;
} 
```

**整体情况小提琴**

[http://jsfiddle.net/Vmvrd/](http://jsfiddle.net/Vmvrd/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:12:50.353

我认为它工作正常，看看我添加到您编辑的帖子中的小提琴示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:28:15.920

页脚中有比它高的元素。`body`由于页脚的高度是固定的，因此它们会扩展，但不会扩展页脚。添加`overflow: hidden`到您的`#footer`, 并从那里开始工作。

# javascript - iOS OnVolumeChange 或等效事件

> ID：11163064
> 
> 赞同：0
> 
> 时间：2012-06-22T19:45:08.900
> 
> 标签：javascript, ios, events

试图在这里快速完成。`<audio>`除了为or设置事件侦听器之外`<video>`，有没有人知道一种方法来检测由设备上的音量摇杆开关启动的幅度变化？

在使用页面上的滑块控制音量方面存在所有问题，我想让用户使用摇杆调节音量，但提供页面上级别的图形表示。

谢谢

编辑：请纯 JS。我不想传授像 Sencha lib 或 Phone Gap 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:51:27.860

~~看看`AVSystemController_SystemVolumeDidChangeNotification`。~~

**更新了问题的 javascript 解决方案**：

[有一个名为PhoneGap](http://zsprawl.com/iOS/2012/03/ios-volume-control-in-phonegap/)的免费/开源框架，它允许您从您的 javascript 函数中连接到 iOS 的本机音量控制。

# php - 将 PHP 变量传递到 MySQL

> ID：11163074
> 
> 赞同：2
> 
> 时间：2012-06-22T19:46:27.557
> 
> 标签：php, mysql, variables

我在 PHP 中有一个函数，可以将值插入到 MYSQL 表中。

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)
{
    $insert = "INSERT INTO " .$new_table. " VALUES(number, "string", "string")"
    $q = mysqli_query($db, $insert);
} 
```

我正在努力定制 VALUES 部分。我需要数字、字符串和字符串分别是 PHP 中的 ID、Partner 和 Merchant 变量。

我试过了

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)
{
    $insert = "INSERT INTO " .$new_table. " VALUES(" .$ID . $Partner . $Merchant . ")";
    $q = mysqli_query($db, $insert);
} 
```

也是。但它似乎不起作用，因为对于 SQL，字符串值必须用引号括起来。但是，如果我更改代码，使其 ."$ID" 。“$伙伴”。“$商人”。")"; 因此变量根据需要放在引号中，它们不再是 PHP 变量。如何让我的 PHP 变量包含在引号中，以便正确执行 SQL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T19:54:47.790

使用连接的其他答案是简单的答案。最好的方法是使用准备好的语句，这将使您的代码更加安全。

```
$insert = "INSERT INTO " .$new_table. " VALUES(?, ?, ?)";
$q = mysqli_prepare($db, $insert);
mysqli_stmt_bind_param($q, "iss", $ID, $Partner, $Merchant);
mysqli_stmt_execute($q); 
```

进行参数化查询意味着您的查询和数据是分开发送的。这意味着查询的结构已经存在，因此不能被插入数据中的任何其他内容更改，这意味着您可以安全地避免 SQL 注入。

请参阅 PHP 手册：

*   [`mysqli_prepare`](http://www.php.net/manual/en/mysqli.prepare.php)
*   [`mysqli_stmt_bind_param`](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)
*   [`mysqli_stmt_execute`](http://www.php.net/manual/en/mysqli-stmt.execute.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-10T13:28:35.037

好吧，有很多方法可以做到这一点：

## 字符串连接

注意数据库除外的数据类型。在您的问题中，您错过了分隔值的逗号：

```
$insert = 'INSERT INTO ' . $new_table . ' VALUES(' . $ID . ', \'' . $Partner . '\', \'' . $Merchant '\')'; 
```

有很多方法可以修改字符串连接示例。考虑有关单引号和双引号的 php 文档。在您的示例中，您在单引号的含义中使用了双引号。使用双引号，您可以将变量直接放入其中。所以我把它改成了单引号。

## 冲刺

```
$insert = sprintf('INSERT INTO %s VALUES(%s, \'%s\', \'%s\');', $new_table, $ID, $Partner, $Merchant); 
```

有关此便捷功能的更多信息，请参阅文档：[http ://www.php.net/sprintf](http://www.php.net/sprintf)

## 准备好的报表

[由于SQL Injection](https://en.wikipedia.org/wiki/SQL_injection)，我宁愿建议您使用此方法。在上面的示例中，您需要注意字符串转义。可与`mysql_real_escape`. 但它可能不适用于所有场景。

因此，准备好的语句要好得多：

```
$insert = 'INSERT INTO ' .$new_table. ' VALUES(?, ?, ?)';
$q = mysqli_prepare($db, $insert);
mysqli_stmt_bind_param($q, "iss", $ID, $Partner, $Merchant);
mysqli_stmt_execute($q); 
```

PS：使用面向对象的方式对于准备好的语句也更好，因为你有更多的机会这样做。请参阅文档以了解`MySQLi`类样式和`PDO`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:52:55.540

```
$insert = "INSERT INTO $new_table VALUES($ID,'$Partner','$Merchant')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:49:02.493

级联

```
$insert = "INSERT INTO " .$new_table. " VALUES(".$ID.", '".$Partner."', "."'"$Merchant"')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T19:49:02.563

尝试这个：

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)
{
    $insert = "INSERT INTO " .$new_table. " VALUES( '" .$ID."','" . $Partner."','". $Merchant . "')";
    $q = mysqli_query($db, $insert);
} 
```

或者你可以使用

```
function insertRow($db, $new_table, $ID, $Partner, $Merchant)
{
    $insert = "INSERT INTO " .$new_table. " VALUES( '$ID','$Partner','$Merchant')";
    $q = mysqli_query($db, $insert);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T19:49:19.140

嗯......它是一个查询与它只是一个像任何其他字符串一样的事实没有区别。你完全有能力增加`$new_table`价值，那么是什么阻止你做其他事情呢？

```
$insert = "INSERT INTO ".$new_table." VALUES (".$ID.", '".$Partner."', '".$Merchant.")"; 
```

这假设您已经采取了必要的步骤来清理这些值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T19:51:23.087

尝试这个：

```
$insert = "INSERT INTO $new_table VALUES(number, '{$string}', '{$string}')"; 
```

# mysql - 使用 MySQL 的存储过程语法问题

> ID：11163075
> 
> 赞同：1
> 
> 时间：2012-06-22T19:46:39.477
> 
> 标签：mysql, stored-procedures

我很可能有语法问题（SQL 命令和错误复制如下） - 我在 Ubuntu 11 上使用 MySQL v5.1.63（dbName 是数据库的名称，提到的字段在 USERS 表中，具有适当的数据类型/长度）。欢迎任何解决此问题的建议。

```
use dbName;
DELIMITER //
CREATE PROCEDURE sp_insertTest
(
IN p_ID INT(11),
IN p_UserID VARCHAR(40),
IN p_Email VARCHAR(30)
)
BEGIN
INSERT INTO USERS
(
ID,
UserID,
Email
)
VALUES
(
p_ID,
p_UserID,
p_Email
)
END//
DELIMITER; 
```

当我获取包含上述语句的文件时出现错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that     corresponds to your MySQL server version for the right syntax to use near 'END' at line 32
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER' at line 1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:28:59.830

`END//`尝试在and之后添加一个空格`DELIMITER;`，并在插入的值之后尝试分号。更正的程序是：

```
DELIMITER //
CREATE PROCEDURE sp_insertTest
(
    IN p_ID INT(11),
    IN p_UserID VARCHAR(40),
    IN p_Email VARCHAR(30)
)
BEGIN
INSERT INTO USERS
(
    ID,
    UserID,
    Email
)
VALUES
(
    p_ID,
    p_UserID,
    p_Email
);
END //
DELIMITER ; 
```

# ios - iOS 5.1 的“不备份”方法不起作用？

> ID：11163081
> 
> 赞同：3
> 
> 时间：2012-06-22T19:47:00.977
> 
> 标签：ios, ios5, icloud

我们陷入了审查过程。

Apple 审阅者说我们没有为应用程序中需要的文件设置“不备份”标志。

当然，我们第一次确实忘记了用该标志标记文件。但第二次我们使用这里描述的方法[http://developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

但它没有工作，该应用程序再次被拒绝。

一次又一次地调试和尝试，文件永远不会被标记为“不备份”，使用 Apple 说我们需要在 iOS 5.1 中使用的方法

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL

{

    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;

    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]

                                  forKey: NSURLIsExcludedFromBackupKey error: &error];

    if(!success){

        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);

    }

    return success;

} 
```

但是，如果我们使用他们说我们需要在 iOS 5.0.1 中使用的方法，则文件会被很好地标记并且不会在 iCloud 中备份。

```
#import <sys/xattr.h>

- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL

{

    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";

    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);

    return result == 0;

} 
```

但问题是苹果的文档页面说这种方法已被弃用。因此，我担心我们使用有效的方法（适用于 iOS 5.0.1 的方法）再次上传应用程序，并且可能会针对同一问题再次拒绝该应用程序。

所以文档说一件事，但这件事不能正常工作。

有人解决了这个问题吗？苹果评论家并没有告诉我们这个问题以及如何解决，以便我们可以 100% 符合预期。

# jquery - 关闭 jquery 模态对话框很慢

> ID：11163082
> 
> 赞同：3
> 
> 时间：2012-06-22T19:47:03.277
> 
> 标签：jquery, jquery-ui

我有一个模态对话框，我在其中放置了一个 html 表单的内容。该表单有一个提交和取消按钮。我正在找到取消按钮，甚至通过非常慢地按 x 来关闭对话框。它只是太慢了几秒钟，但它足以让人认为疯狂的鼠标点击器可能会发疯。

有没有比我正在做的更好的方法来使用关闭功能和取消更改的更好方法：

```
var $dialog = $('#cameraform').dialog({
    modal:true,
    autoOpen: false,
    resizable:false,
    width: 625,
    close: function() {
        $(this).dialog('close'); //this is slow
    }
}); //init dialog

//events            
$('.addwebcam').click(function(e) {
    $dialog.dialog('open');
});

$(".cancel_changes").click(function() {
    $dialog.dialog('close');    //this is slow
}); 
```

HTML：

```
<button class="addwebcam">Add Webcam</button>
<div id="cameraform" title="Add a camera">
...//my form
<button type='button' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
</div> 
```

我可以在这里做任何优化吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:54:07.880

从对话框设置中的 close 事件中删除 close 调用：

```
var $dialog = $('#cameraform').dialog({
    modal:true,
    autoOpen: false,
    resizable:false,
    width: 625,
    close: function() {
      //  $(this).dialog('close'); //this is slow
    }
}); //init dialog 
```

您正在从自身内部调用 close 事件，从而导致调用堆栈溢出。

# php - php 将字符串中的 $variable 替换为 $variable 的内容

> ID：11163089
> 
> 赞同：2
> 
> 时间：2012-06-22T19:47:46.190
> 
> 标签：php

在 PHP 中，我需要从模板生成 HTML 页面并在特定位置插入变量，然后将它们保存到磁盘。

到目前为止，这段代码运行良好：

```
<?php 

$client = "John doe";

$template = "

<html>
<body>
<div>
$client
</div>
</body>
</html>

";

$htmlCode = $template;

$fh = fopen("page.html", 'w') or die("can't open file");
fwrite($fh, $htmlCode);
fclose($fh);

?> 
```

最终，我想从磁盘上的文件中啜饮并读取 $template ，使用类似的东西：

`$template = file_get_contents("template.html");`

但是使用这种方法，我无法将 $client 替换为“John doe”，而是在我将其保存到磁盘时在 HTML 代码中显示为 $client。

我确实阅读了一些关于使用 regex 和 printf 替换 substings 的帖子，但我看不出如何在我的场景中使用它们。我很肯定，必须有更简单更好的方法。

很多地方都需要大量变量，所以我不想为每个变量创建一个正则表达式。我只想能够在外部 html 文件中的任何位置粘贴一个 $variable，PHP 应该用变量内容替换它（如果它存在的话）。不幸的是，file_get_contents() 只是将它完全按原样吞咽成一个字符串，而没有任何解释。如果有另一个我可以用来啜饮的功能，我正在徘徊，它实际上可以像我缩进一样工作。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:07:35.917

[这与http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)中的一些示例代码非常相似，并且可能对您的情况有用：

```
<?php 
function save_callback($buffer) {
    // save buffer to disk
    $fh = fopen("page.html", 'w') or die("can't open file");
    fwrite($fh, $buffer);
    fclose($fh);
    return $buffer; // use it or ignore it
}
$client = "John doe";
ob_start("save_callback");
include("template.php");
ob_end_clean();
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T20:05:36.650

我在阅读模板文件时也做了同样的事情。我的模板如下所示：

```
<html>
<body>
<div>{client}</div>
</body>
</html> 
```

然后 PHP 代码将用 $client 替换“{client}”。

```
$template = file_get_contents("template.html");
$contents = str_replace("{client}", $client, $template); 
```

在模板中使用您想要的任何分隔符： `%client% [client] ?client? #client#`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-16T20:52:18.257

这很简单，只需编写以下内容：

```
$html = file_get_contents('0.txt');
// or user is:
$html = '&lt;html&gt;&lt;body&gt;$DATA&lt;/body&gt;&lt;/html&gt;'; 
// remember us single quotation (') not double quotation (&quot;) for a string
$DATA = &quot;&lt;h1&gt;Hi&lt;/h1&gt;&quot;;
eval(&quot;\$html = \&quot;$html\&quot;;&quot;);
echo $html; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:52:29.200

您可以使用一个简单的正则表达式：

```
$out = preg_replace_callback("/\$([^\s]+)/",
    function($m) {
        if( isset($GLOBALS[$m[1]]))
            return $GLOBALS[$m[1]];
        else return $m[0];
    },
    $in); 
```

它并不完美，因为它是一个非常幼稚的正则表达式，但在大多数情况下它会做你想做的事。

就个人而言，对于模板，我会使用`{%keyword}`更容易分隔的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T20:13:44.200

在这种情况下，我只匹配纯字母数字变量名。

```
echo preg_replace_callback("/[$][a-zA-Z0-9]+/", function($varname) {
    return $GLOBALS[substr($varname[0], 1)];
}, $input); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-15T17:27:29.260

如果可能，我会改用 cURL。就像在 Javascript 中使用 AJAX 一样，您可以在 cURL 中请求一个带有 POST 变量的 php 页面。

在你的情况下，你可以创建这样的东西......

```
// Variables
$client = "John doe";
$your_template_url = "http://UseYourURL.com";

// cURL
$ch = curl_init($your_template_url);
curl_setopt($ch, CURLOPT_POSTFIELDS, ["client" => $client ]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$htmlCode = curl_exec($ch);    
curl_close($ch);

// Write into the file
$fh = fopen("page.html", 'w') or die("can't open file");
fwrite($fh, $htmlCode);
fclose($fh); 
```

在您的模板中，您应该有类似...

```
<html>
   <body>
      <div>
         <?php echo $_POST['client']; ?>
      </div>
   </body>
</html> 
```

确保您的模板是 php 文件，而不是 html。即使您想要 html 代码，您仍然需要 php 将您的变量回显到 html 文件中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-22T19:51:39.317

如果您使用单引号，则在混合字符串和变量时在 php 上：

```
 $name = "john";
   echo 'The Name is $name';
   // will output: The Name is $name 
```

但是如果你使用双引号：

```
 echo "The Name is $name";
    // will output: The Name is john 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-06-22T19:58:05.413

我相信这是因为您将变量写在双引号内。双引号内的所有内容都将按照它们在代码中的编写方式逐字转换为字符串。

在你的例子中，为了得到你想要的结果，当你声明 $template 变量时，你应该将它与你想要添加到它的值连接起来，如下所示：

```
$template = "
<html>
<body>
<div>" . $client . "</div>
</body>
</html>
"; 
```

点连接 PHP 中的字符串。

这应该够了吧！:)

# php - 在csv中未检测到php换行符

> ID：11163090
> 
> 赞同：2
> 
> 时间：2012-06-22T19:47:46.440
> 
> 标签：php, fgetcsv

我在 php-csv 中有一个常见的“新行”问题，这让我抓狂！！！我检查了很多论坛并尝试了不同的解决方法，但似乎无法解决问题。我正在读取具有 1 个标题和 2 个数据记录的 CSV 文件。我使用 跳过标题`fgets()`并使用 读取数据记录`$data=fgetcsv()`。现在的问题是两个数据记录都被读入单个数组。我尝试了以下选项，但都是徒劳的：

1.  运行 -`ini_set("auto_detect_line_endings", true);`
2.  在 php.ini 中将 auto_detect_line_endings 设置为“ON”。
3.  试过了 `fwrite($handle, implode($delimiter,$fieldsarray).PHP_EOL);`

我正在本地开发 MAMP，开发区域开发 LAMP。CSV 保存在本地机器上，复制到 /tmp/ 文件夹并从那里读取。如何检查文件中是否有必要的换行符？当我从 tmp 检查文件时，我确实看到了新行中的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:59:45.967

以下解决方案有效！

```
$file_contents = file_get_contents($temp);
$file_cont_new = str_replace("\n","\r",$file_contents);
file_put_contents($temp,$file_cont_new); 
```

# spring - 如何让 CAS 返回右侧 Spring 页面

> ID：11163095
> 
> 赞同：3
> 
> 时间：2012-06-22T19:48:18.483
> 
> 标签：spring, spring-security, cas

如何更改下面的 XML 文件以使 CAS 返回正确的 Spring 返回。如果用户转到[https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry/requests/add.html](https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry/requests/add.html)并且未登录，则它会转到 CAS 服务器但返回到[https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry](https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry)不是[https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry/requests/add.html](https://wcmisdlin07.uftmasterad.org:8443/MemberInquiry/requests/add.html) 我该如何解决这个问题

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns:b="http://www.springframework.org/schema/beans"
    xmlns="http://www.springframework.org/schema/security"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <http entry-point-ref="casEntryPoint" use-expressions="true">
        <intercept-url pattern="/" access="permitAll"/>

        <intercept-url pattern="/index.jsp" access="permitAll"/>
        <intercept-url pattern="/cas-logout.jsp" access="permitAll"/>
        <intercept-url pattern="/casfailed.jsp" access="permitAll"/>

        <intercept-url pattern="/secure/**" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/requests/**" access="hasRole('ROLE_MEMBER_INQUIRY')" />

        <custom-filter ref="requestSingleLogoutFilter" before="LOGOUT_FILTER"/>
        <custom-filter ref="singleLogoutFilter" before="CAS_FILTER"/>
        <custom-filter ref="casFilter" position="CAS_FILTER" />

        <logout logout-success-url="/cas-logout.jsp"/>
    </http>

    <authentication-manager alias="authManager">
        <authentication-provider ref="casAuthProvider" />
    </authentication-manager>

    <user-service id="userService">
        <user name="rod" password="rod" authorities="ROLE_SUPERVISOR,ROLE_USER" />
        <user name="cpilling04@aol.com.dev" password="testing" authorities="ROLE_MEMBER_INQUIRY" />
    </user-service>

    <!-- This filter handles a Single Logout Request from the CAS Server -->
    <b:bean id="singleLogoutFilter" class="org.jasig.cas.client.session.SingleSignOutFilter"/>
    <!-- This filter redirects to the CAS Server to signal Single Logout should be performed -->
    <b:bean id="requestSingleLogoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter"
        p:filterProcessesUrl="/j_spring_cas_security_logout">
        <b:constructor-arg value="https://${cas.server.host}/cas-server-webapp/logout"/>
        <b:constructor-arg>
            <b:bean class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"/>
        </b:constructor-arg>
    </b:bean>

    <b:bean id="serviceProperties"
        class="org.springframework.security.cas.ServiceProperties"
        p:service="https://${cas.service.host}/MemberInquiry/j_spring_cas_security_check"
        p:authenticateAllArtifacts="true"/>

    <b:bean id="casEntryPoint"
        class="org.springframework.security.cas.web.CasAuthenticationEntryPoint"
        p:serviceProperties-ref="serviceProperties" p:loginUrl="https://${cas.server.host}/cas-server-webapp/login" />

    <b:bean id="casFilter"
        class="org.springframework.security.cas.web.CasAuthenticationFilter"
        p:authenticationManager-ref="authManager"
        p:serviceProperties-ref="serviceProperties"
        p:proxyGrantingTicketStorage-ref="pgtStorage"
        p:proxyReceptorUrl="/j_spring_cas_security_proxyreceptor">
        <b:property name="authenticationDetailsSource">
            <b:bean class="org.springframework.security.cas.web.authentication.ServiceAuthenticationDetailsSource"/>
        </b:property>

        <b:property name="authenticationFailureHandler">
            <b:bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
                p:defaultFailureUrl="/casfailed.jsp"/>
        </b:property>
    </b:bean>
    <!--
        NOTE: In a real application you should not use an in memory implementation. You will also want
              to ensure to clean up expired tickets by calling ProxyGrantingTicketStorage.cleanup()
     -->
    <b:bean id="pgtStorage" class="org.jasig.cas.client.proxy.ProxyGrantingTicketStorageImpl"/>
    <b:bean id="casAuthProvider" class="org.springframework.security.cas.authentication.CasAuthenticationProvider"
        p:serviceProperties-ref="serviceProperties"
        p:key="casAuthProviderKey">
        <b:property name="authenticationUserDetailsService">
            <b:bean
                class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
                <b:constructor-arg ref="userService" />
            </b:bean>
        </b:property>
        <b:property name="ticketValidator">
            <b:bean
                class="org.jasig.cas.client.validation.Cas20ProxyTicketValidator"
                p:acceptAnyProxy="true"
                p:proxyCallbackUrl="https://${cas.service.host}/MemberInquiry/j_spring_cas_security_proxyreceptor"
                p:proxyGrantingTicketStorage-ref="pgtStorage">
                <b:constructor-arg value="https://${cas.server.host}/cas-server-webapp" />
            </b:bean>
        </b:property>
        <b:property name="statelessTicketCache">
            <b:bean class="org.springframework.security.cas.authentication.EhCacheBasedTicketCache">
                <b:property name="cache">
                    <b:bean class="net.sf.ehcache.Cache"
                      init-method="initialise"
                      destroy-method="dispose">
                        <b:constructor-arg value="casTickets"/>
                        <b:constructor-arg value="50"/>
                        <b:constructor-arg value="true"/>
                        <b:constructor-arg value="false"/>
                        <b:constructor-arg value="3600"/>
                        <b:constructor-arg value="900"/>
                    </b:bean>
                </b:property>
            </b:bean>
        </b:property>
    </b:bean>

    <!-- Configuration for the environment can be overriden by system properties -->
    <context:property-placeholder system-properties-mode="OVERRIDE" properties-ref="environment"/>

    <util:properties id="environment">
        <b:prop key="cas.service.host">wcmisdlin07.uftmasterad.org:8443</b:prop>
        <b:prop key="cas.server.host">wcmisdlin07.uftmasterad.org:8443</b:prop>
    </util:properties>

</b:beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T19:18:53.233

只需将 SavedRequestAwareAuthenticationSuccessHandler 添加到您的 casFilter 中，它会在身份验证发生之前将请求保存在请求缓存中，然后重定向到原始目的地。如果没有找到 DefaultSavedRequest，它将重定向到作为应用程序根的 defaultTargetUrl。

```
 <b:bean id="casFilter"
    class="org.springframework.security.cas.web.CasAuthenticationFilter"
    p:authenticationManager-ref="authManager"
    p:serviceProperties-ref="serviceProperties"
    p:proxyGrantingTicketStorage-ref="pgtStorage"
    p:proxyReceptorUrl="/j_spring_cas_security_proxyreceptor">
    <b:property name="authenticationDetailsSource">
        <b:bean class="org.springframework.security.cas.web.authentication.ServiceAuthenticationDetailsSource"/>
    </b:property>

    <b:property name="authenticationFailureHandler">
        <b:bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
            p:defaultFailureUrl="/casfailed.jsp"/>
    </b:property>

    <b:property name="authenticationSuccessHandler">
       <b:bean class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler"
            p:defaultTargetUrl="/"/>
   </b:property>

</b:bean> 
```

# c# - c# .net 访问 asmx 服务中的原始 json 请求

> ID：11163096
> 
> 赞同：1
> 
> 时间：2012-06-22T19:48:32.807
> 
> 标签：c#, .net, json, proxy, asmx

我正在尝试设置一个简单的代理服务器，我们将数据发布到我的代理服务器。代理服务器会将发布的数据转发到实际服务器并从实际服务器获取响应。然后在发出请求的网站读取的代理服务器上显示响应，并对数据执行任何操作。我在获取来自网站的原始帖子数据的第一部分时遇到了麻烦。看起来 asmx 文件总是想根据参数做事，但我的代理只想转发原始请求。它不知道参数。下面是对代理服务器的示例请求： localhost/mobile.asmx POST {"userName":"fake@email.com","password":"xxxx","appID":"2302FF64-925D-4E0E-B086- 73AA9FF152D8"}

再一次，我不想只获得用户名和密码。我想捕获完整的原始请求并将其转发到真实服务器。

我已经尝试了很多东西。因为没有请求参数我不能使用请求。我也相信 GETUSERTOKENLOGIN 函数发生在读取原始帖子数据流之后，因此我不能再使用流来获取数据。我已经尝试了很多东西。

如果可能的话，我希望这是一个超级简单的脚本。下面是我的超级简单的例子。我知道我可以在数据周围添加一个包装器，但我不想这样做。

任何帮助将不胜感激。 **移动.ASMX**

```
<%@ WebService Language="C#" Class="mobile" %>

using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Web;
using System.Web.Services;
using System.Net;
using System.IO;
using System.Web.Script.Services;
using System.Text;
[WebServiceBinding(ConformsTo = WsiProfiles.None)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class mobile : System.Web.Services.WebService 
{
    public mobile()
    {

    }

    // The HelloWorld() example service returns the string Hello World.
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string GetUserTokenLogin()
    {
        // Create a new request to the mentioned URL.
        WebRequest myWebRequest = WebRequest.Create("http://api.geonames.org/citiesJSON");
        myWebRequest.Method = "POST";
        Stream dataStream = myWebRequest.GetRequestStream();
        WebResponse myWebResponse = myWebRequest.GetResponse();

        // Print the  HTML contents of the page to the console.
        Stream streamResponse = myWebResponse.GetResponseStream();
        StreamReader streamRead = new StreamReader(streamResponse);
        Char[] readBuff = new Char[256];
        int count = streamRead.Read(readBuff, 0, 256);
        String FullData = "";
        while (count > 0)
        {
            String outputData = new String(readBuff, 0, count);
            FullData = FullData + outputData;
            count = streamRead.Read(readBuff, 0, 256);
        }

        // Close the Stream object.
        streamResponse.Close();
        streamRead.Close();

        myWebResponse.Close();
        return FullData;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-04T01:03:30.530

要在您的 ASMX 中获取请求的原始 JSON（例如，您已从 AngularJS 向它发出 POST 请求），请尝试以下代码：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string Calculate()
{
    HttpContext.Current.Request.InputStream.Position = 0;
    var jsonString = new StreamReader(HttpContext.Current.Request.InputStream, Encoding.UTF8).ReadToEnd();
    var json = JObject.Parse(jsonString);

    // your code
} 
```

请注意，您在这里不需要`using`声明，因为您不是处理`InputStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:33:34.657

解析请求是应用服务器的工作。

您的代理服务器上不应有任何应用程序代码。如果您只想将 IIS 用作代理服务器，请参阅：[将 IIS 设置为反向代理](http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)。

如果您只想要原始请求并想写出原始响应，您可以创建一个自定义的`HttpModule`.

参考：[创建自定义 HttpModule](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

在此模块中，您可以在客户端发送请求时获取请求，并将其转发到另一台服务器，然后从该服务器获取响应并将其转发给您的客户端。（实际上，您正在制作反向代理。）

您无法在 asp.net 网络服务中实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:08:56.663

我最终从下面下载了演示：http: [//www.codeproject.com/Articles/31329/Simple-Reverse-Proxy-in-C-2-0-description-and-depl](http://www.codeproject.com/Articles/31329/Simple-Reverse-Proxy-in-C-2-0-description-and-depl)它给了你一个 bin 文件夹，我只需放入我的根目录即可。比我创建了一个名为 mobile.asmx 的文件夹。在该文件夹中，我将演示中的 webconfig 放入其中，仅更改远程服务器

```
<appSettings>
 <add key="RemoteWebSite" value="http://my-clients-server.com/mobile_dev/" />
</appSettings>

<system.web>
  <httpHandlers>
   <add verb="*" path="*" type="ReverseProxy.ReverseProxy, ReverseProxy"/>
 </httpHandlers>
</system.web> 
```

因此，只要网站请求当前域，例如：www.currentdomain.com/mobile.asmx/MYSERVICE，它就会将该请求转发到远程网站，如下所示： http: [//my-clients-server.com/mobile_dev/mobile。 asmx/MYSERVICE](http://my-clients-server.com/mobile_dev/mobile.asmx/MYSERVICE)

我用我需要的 XML 和 JSON 测试了上述内容。

# android - android MediaPlayer res 原始文件夹 getContentUri

> ID：11163108
> 
> 赞同：0
> 
> 时间：2012-06-22T19:49:14.250
> 
> 标签：android, audio, media-player, uri

我找到了本教程并尝试在我的项目中实现它[http://www.androiddevblog.net/android/playing-audio-in-android](http://www.androiddevblog.net/android/playing-audio-in-android)

我想从 res/raw 文件夹而不是外部存储中读取音乐

```
Cursor cursor = getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, null, null, null, null); 
```

这是我的代码：

```
Cursor cursor = getContentResolver().query( MediaStore.Audio.Media.getContentUri("android.resource://com.varma.samples.musicplayer/raw/"), null, null, null, null); 
```

当然 Uri 没有返回任何东西，我想从 res/raw 中获取音频...

谢谢！！

* * *

编辑：

谢谢你们，那么我不会使用光标；）

如果它可以帮助我使用它来获取所有歌曲的人：

```
Field[] fields = R.raw.class.getFields(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:53:28.813

这里不需要使用光标。

在此处发布您的问题之前，请先搜索官方开发者文档。具体来说，[媒体播放](http://developer.android.com/guide/topics/media/mediaplayer.html)页面包含一个示例，说明如何执行您正在尝试的操作。

```
MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
mediaPlayer.start(); // no need to call prepare(); create() does that for you 
```

# ios - 当用户拖动手指时，如何绘制一条移动的线？

> ID：11163110
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:49:16.057
> 
> 标签：ios, gesture

> **可能重复：**
> [在 iPhone / iPad 中画一条线](https://stackoverflow.com/questions/4783317/drawing-a-line-in-iphone-ipad)

我想在屏幕上画一条线，当用户第一次触摸屏幕时，该线的初始点被设置，当用户拖动手指时，该线的第二个点移动。如何检测这些触摸和拖动事件并重新绘制一条线以响应它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:52:41.770

如果您想创建各种绘图应用程序，请查看`UIBezierPath`. 如果你想玩这个，看看[`MGDrawingSlate`](https://github.com/gtmtg/MGDrawingSlate)（我创建的），它是一个易于使用的插入式 UIView 子类，它利用了`UIBezierPath`用于绘图。

# gradle - 在子项目中添加依赖项导致失败

> ID：11163111
> 
> 赞同：2
> 
> 时间：2012-06-22T19:49:16.800
> 
> 标签：gradle

我的主 bu​​ild.gradle 文件中有一个依赖项部分

```
subprojects {
   dependencies {
   }
} 
```

然后我将一个添加到我的子项目中，因为只有一个使用两个本地依赖项，这会破坏所有内容并出现以下故障

```
dependencies {
    compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
    compile fileTree(dir: 'play-1.2.4/framework', include: '*.jar')
} 
```

> 您不能更改未处于未解决状态的配置！

谷歌搜索这个错误会产生很多结果，但我似乎无法从中破译如何解决这个问题？

注意：如果我注入了依赖项，这确实有效....为什么会这样？

```
project(':webserver') {
    dependencies {
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework', include: '*.jar')
    }
} 
```

**一个重要注意事项：我不确定这是否重要，我的实际主 build.gradle 是导入以下一个的一行（因为我无法让“主”文件夹工作）。这可能是问题吗？**

完整的主 bu​​ild.gradle 文件

```
allprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse'

    buildDir = 'output'

    task hello << { task -> println "I'm $task.project.name" }
    build << { task -> println "MASTER: I'm building now classpath=$sourceSets.main.compileClasspath.files" }
}

subprojects {

    version = 'Developer-Build'
    project.ext.genLibDir = file('lib')
    project.ext.fixedLibDir = file('libother')

    repositories {
         mavenCentral()
    }

    //configurations.compile {
    //  exclude group: 'javax.jms',        module: 'jms'
    //  exclude group: 'com.sun.jdmk',     module: 'jmxtools'
    //  exclude group: 'com.sun.jmx',      module: 'jmxri'
    //}

    dependencies {
        compile group: 'org.hibernate',   name: 'hibernate-entitymanager', version: '4.1.4.Final'
        compile group: 'org.slf4j',       name: 'slf4j-api',               version: '1.6.6'
        compile group: 'org.slf4j',       name: 'log4j-over-slf4j',        version: '1.6.6'
        compile group: 'ch.qos.logback',  name: 'logback-core',            version: '1.0.6'
        compile group: 'joda-time',       name: 'joda-time',               version: '2.1'
        compile group: 'com.google.inject',name: 'guice',                  version: '3.0'
        compile group: 'com.google.protobuf',name: 'protobuf-java',        version: '2.4.1'

        //to be erased soon
        compile group: 'commons-configuration',name:'commons-configuration',version: '1.8'
        compile group: 'org.jboss.netty', name: 'netty',                   version: '3.2.7.Final'

        //compile group: 'org.asteriskjava',name: 'asterisk-java',         version: '1.0.0.M3'            
        compile fileTree(dir: project.ext.fixedLibDir, include: '*.jar')

    }

    task('copyJars') { 
        ext.collection = files { genLibDir.listFiles() }
        delete ext.collection
        copy { from configurations.compile into genLibDir }
        copy { from fixedLibDir into genLibDir }
    }

    task('setupAll', dependsOn: ['copyJars','eclipse']) {
        description = 'Update jars from remote repositories and then fix eclipse classpath for master project'

    }

    hello << {println "- I depend on stserver"}

    build << { println "subproject:source sets=$sourceSets.main.java.srcDirs" }
}

task release << { println "putting together release" }

//TODO: have a release task AND if version is null when running the release task
//throw an exception telling the user to pass in a version with "./build -Dversion=xxxx"
//The automated build will call the release task with a version number like that
gradle.taskGraph.whenReady {taskGraph ->
    if (taskGraph.hasTask(release) && version == 'Developer-Build') {
        throw new StopExecutionException("You must specify -Dversion=<some version> to run the release task")
    } else {
        version = '1.0-SNAPSHOT'
    }
} 
```

完整的子网络服务器 build.gradle 文件

```
sourceSets.main{
  java.srcDirs = ['app']
}

build << { println "source sets=$sourceSets.main.java.srcDirs" }

hello << {println "- Do something specific xxxx"}

    dependencies {
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework', include: '*.jar')
    }

    eclipse {
    } 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:11:22.740

这意味着您有一些其他代码可以`compile`在配置时解析（即要求其文件）配置。类似`configurations.compile.each { ... }`，*在*任务动作之外。解析配置后，您无法向其添加更多依赖项。通常在配置时解析配置是不可取的（也是不必要的）。除其他外，它会减慢您的构建速度。

有关 Gradle 构建的不同阶段（初始化/配置/执行）的更多信息，请参阅[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)。

# php - PHP正则表达式被忽略/验证为真

> ID：11163112
> 
> 赞同：1
> 
> 时间：2012-06-22T19:49:18.273
> 
> 标签：php, regex, validation

请耐心等待，因为我对使用正则表达式很陌生。

我对三个字段进行了正则表达式检查，如下面的代码所示。无论我在字段中输入什么，我的*字符长度限制*和实际*字符*限制都不会被强制执行；所有这些字段似乎只是“跳过”我的正则表达式检查并验证为真。

```
// NAME
    if (preg_match('%^[A-Za-z\.\' \-]{12,80}$%', stripslashes($name)) === false) {
        $name = false;
        $errors[] = 'You need to enter a valid name. No slashes or quotes are allowed.';
    }
    else { echo 'Test: RegExp Validation passed for "NAME" <br />'; }

// PHONE NUMBER
    if (preg_match('%^([0-9]( |-)?)?(\(?[0-9]{3}\)?|[0-9]{3})( |-)?([0-9]{3}( |-)?[0-9]{4}|[a-zA-Z0-9]{7})$%', $phone) === false) {
        $phone = false;
        $errors[] = 'A valid phone number must be entered. Only numbers, dashes, and parentheses are allowed';
    }
    else { echo 'Test: RegExp Validation passed for "PHONE" <br />'; }

//EXTENSION
    if (!empty($phnext) && preg_match('%^[0-9]{3,5}$%', $phnext) === false) {
        $phnext = false;
        $errors[] = 'Only 3 to 5 numbers are allowed for the phone extension.';
    }
    else { echo 'Test: RegExp Validation passed for "EXTENSION" <br />'; } 
```

我没有收到任何语法、编译或超出范围的错误。所以我想知道，我的实际正则表达式字符串是错误的，还是我的逻辑在某处错误？这不会是第一次。我只是有点难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:53:26.133

[preg_match](http://php.net/preg_match)只会`FALSE`在发生错误时返回。在没有匹配的情况下，它将返回`0`。您不应该使用严格的测试`preg_match(...) === FALSE`，而是可以使用：

```
if (preg_match(...)) {
    // passed
} else {
    // didn't pass
} 
```

# ruby-on-rails - Rails attr_accessible 仅适用于seed.rb？

> ID：11163117
> 
> 赞同：0
> 
> 时间：2012-06-22T19:49:27.460
> 
> 标签：ruby-on-rails, ruby, attr-accessible

我正在通过 PragProg（显然已经过时 - 我正在使用 Rails 3.2.3）*[Rails for PHP Developers](http://pragprog.com/book/ndphpr/rails-for-php-developers)*自学 Rails 。我发现了这本书没有提到的种子.rb 文件。我已经尝试为许多事情建立适当的种子条目，它给了我`can't mass-assign protected attributes`.

经过一堆搜索，看来我唯一的选择是通过`attr_accessible`或关闭阻止批量分配的默认功能打开这些东西。但我想保留该设置所暗示的任何安全性。我不希望这些条目在播种后被编辑。我只需要先将这些放入数据库中。

我在这里没有看到什么？如何在不关闭保护的情况下播种这些数据？似乎种子应该是一种特殊情况，允许在不允许的情况下进行大规模分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:55:50.540

`attr_accessible`指定应始终对批量分配开放的属性列表，因此如果您只想打开这些属性以进行播种，那么这可能不是您想要的。

您可以在种子文件中做的一件事是对每个属性使用 setter 方法。例如：

```
admin = User.new do |u|
  u.name = "Foo"
  u.admin = true
end

admin.save! 
```

# java - 在 Java 中验证成功的字符串到枚举的转换

> ID：11163121
> 
> 赞同：5
> 
> 时间：2012-06-22T19:49:42.750
> 
> 标签：java, exception, enums

我有一个在 Web 服务实现中定义为枚举的帐户类型列表。但是，当消费者调用 Web 服务时，它会传递一个需要转换为枚举的字符串。

什么是验证给定字符串将成功转换为枚举的好方法？

我正在使用以下方法，但这可能是对异常的滥用（根据 Effective Java，第 57 项）。

```
AccountType accountType = null;
try{
    accountType = AccountType.valueOf(accountTypeString);
}catch(IllegalArgumentException e){
    // report error
}

if (accountType != null){
    // do stuff
}else{
    // exit
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:58:04.130

我个人使用了 Apache Commons 库中的[EnumUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/EnumUtils.html)。

该库包含许多有用的实用程序类（例如，也用于字符串），是任何 Java 项目中必不可少的，而且非常轻巧（300ko）。

这是我使用的示例代码：

```
TypeEnum strTypeEnum = null;

// test if String str is compatible with the enum 
if( EnumUtils.isValidEnum(TypeEnum.class, str) ){
    strTypeEnum = TypeEnum.valueOf(str);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:01:23.833

您可以查看枚举值并检查每个文字的名称是否等于您的字符串，例如

```
for (Test test : Test.values()) {
    if (str.equals(test.name())) {
        return true;
    }
}
return false; 
```

枚举是：

```
public enum Test {
    A,
    B,
} 
```

您也可以返回枚举常量或 null，因为枚举通常很小，这不会是性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:52:49.907

您可以捕获 IllegalArgumentException，当给出错误值时将抛出该异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:54:00.573

使用[`Optional`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)来自 Guava 的数据类型。

让你的方法`AccountType.valueOf`返回 type 的值`Optional<AccountType>`。然后使用站点代码将变为：

```
Optional<AccountType> accountType = AccountType.valueOf(accountTypeString));
if (accountType.isPresent()) {
  AccountType a = accountType.get();
  // do stuff
} else {
  // exit
} 
```

# php - 我想创建一个表格来输入宠物主人及其宠物的详细信息

> ID：11163125
> 
> 赞同：1
> 
> 时间：2012-06-22T19:49:57.477
> 
> 标签：php, mysqli

我正在为宠物创建一个网站。我希望创建一个页面，宠物主人可以在其中注册和添加他的宠物。我制作了一个表单并放置了 javascript 来添加更多宠物，当点击“添加更多宠物”链接时，它会创建新字段。但我无法将这些信息收集到 php 变量中。链接在这里：[http ://animalswecare.in/mypet.php](http://animalswecare.in/mypet.php)

我有 php 和 mysqli 的工作知识。

我的 php 代码 if ( isset( $_POST['mypet'] ) ) {

```
 $name         = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['name'] ) )  );
  $email     = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['email'] ) )  );
  $password    = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['password'] ) )  );
   $gender       = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['sex'] ) )  );
     $contact     = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['contact'] ) )  );
   $country     = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['country'] ) )  );
    $state       = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['state'] ) )  );
  $city        = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['city'] ) )  );
   //$photo       = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['picture'] ) )  );

 $fname = mysqli_real_escape_string ( $dbc, $_FILES['picture']['name'] );
            $ext=$_FILES['picture']['name'];
            $targetpath = "images/user/big/";

            if($ext !="")
            {
        $ext = explode(".",$ext);
        if($ext[1]=="jpg" || $ext[1]=="gif" || $ext[1]=="jpeg" || $ext[1]=="png" || $ext[1]=="bmp" || $ext[1]=="wbmp" || $ext[1]=="JPEG" || $ext[1]=="JPG" || $ext[1]=="GIF" || $ext[1]=="PNG" || $ext[1]=="BMP")
        {   
            if($_FILES['picture']['size'] <= 2000000)
            {

                $filename=$targetpath.$id."-" .$fname;
                $photo = $id."-" .$fname;
                if (file_exists($filename)) 
                {
                    chmod($filename, 0777); 
                    unlink($filename); 
                }
                if(move_uploaded_file($_FILES['picture']['tmp_name'],$filename))
                {
                    $thpath = "images/user/thumb/";
                    $file = createThumb1($filename, $thpath, $fl_db,350,280);
                }
            }
        }
     }

  $query = "INSERT INTO `user` SET `name`= '$name',`email` = '$email' ,`password` = '$password',`gender` = '$gender', `contact` = '$contact', `country` = '$country', `state` = '$state', `city` = '$city', `photo` = '$photo',`date` = now(),`status` = '1' ";
  $insComm = mysqli_query($dbc, $query);
  $uid = mysqli_insert_id( $dbc );

 if($_POST['petname'])
 {
 $array = $_POST['petname'];
 foreach($array as $petname)
 {
 if(strlen($petname)>0)
 {

 //$petname    = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['petname'] ) )  );
  $type     = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['type'] ) )  );
  $breed    = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['breed'] ) )  );
  $gender   = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['gender'] ) )  );
  //$photo      = mysqli_real_escape_string ( $dbc, strip_tags ( trim ( $_POST['photo'] ) )  );

  $fname = mysqli_real_escape_string ( $dbc, $_FILES['petimage']['name'] );
            $ext=$_FILES['petimage']['name'];
            $targetpath = "images/pet/big/";

            if($ext !="")
            {
        $ext = explode(".",$ext);
        if($ext[1]=="jpg" || $ext[1]=="gif" || $ext[1]=="jpeg" || $ext[1]=="png" || $ext[1]=="bmp" || $ext[1]=="wbmp" || $ext[1]=="JPEG" || $ext[1]=="JPG" || $ext[1]=="GIF" || $ext[1]=="PNG" || $ext[1]=="BMP")
        {   
            if($_FILES['petimage']['size'] <= 2000000)
            {

                $filename=$targetpath.$id."-" .$fname;
                $petphoto = $id."-" .$fname;
                if (file_exists($filename)) 
                {
                    chmod($filename, 0777); 
                    unlink($filename); 
                }
                if(move_uploaded_file($_FILES['petimage']['tmp_name'],$filename))
                {
                    $thpath = "images/pet/thumb/";
                    $file = createThumb1($filename, $thpath, $fl_db,350,280);
                }
            }
        }
      }
  $query = "INSERT INTO `mypet` SET `uid`= '$uid',`petname`= '$petname',`type` =        '$type',`breed` = '$breed',`gender` = '$gender', `photo` = '$petphoto',`date` = now(),`status` = '1' "; 
   $insComm = mysqli_query($dbc, $query); 
   $msg = "Your information is successfully Added!!"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:57:14.103

### 更新

您的 petname 字段 HTML 设置了重复条目 ( `name="petname[]"`) 的正确属性，**但您的类型、性别和品种输入需要`[]`在其名称属性的末尾具有**: `<input type="text" name="type[]">`。

在 PHP 方面，您应该在`POST`（或者`GET`如果您的表单方法是`GET`）数组中看到类似这样的内容：`$_POST["petname"][0]`和`$_POST["petname"][1]`. 所以我会做这样的事情：

```
foreach ($_POST["petname"] as $name)
{
    // store $name in the database
}

foreach ($_POST["type"] as $type)
{
    // store $type in the database
}

etc... 
```

由于您使用多个字段，您可能希望像这样构造它们：

```
<input type="text" name="pet[name][]">
<input type="text" name="pet[type][]"> 
```

然后您可以执行以下操作：

```
foreach ($_POST["pet"] as $pet)
{
    // store $pet["name"] in the database
    // store $pet["type"] in the database
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:57:31.513

查看`$_POST`数据的最佳方式如下：

```
print_r($_POST); 
```

然后您将能够找出是否有任何错误，但没有任何 PHP 代码，我们无法准确告诉您问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:53:33.663

`$_POST`将包含从表单接收到的数据：

`$_POST['name']`, `$_POST['email']`, 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T19:53:49.440

```
$petname = $_POST['form controls name'] 
```

$_POST 包含表单在方法发布时接收到的数据，默认为 $_GET[' ']。

# python - 修改后的 macvim 出现致命错误

> ID：11163126
> 
> 赞同：0
> 
> 时间：2012-06-22T19:49:58.547
> 
> 标签：python, macos, vim, macvim

我通过进行此处描述的修改，针对 python 2.7 编译了我的 macvim 安装：[vim compiles with wrong python version (and not working with required version)](https://stackoverflow.com/questions/7294554/vim-compiles-with-wrong-python-version-and-not-working-with-needed-version/9566769#9566769)

现在，每当我一次关闭多个窗口时，我都会看到一个错误。

`Vim(42372,0x7fff702a2cc0) malloc: *** error for object 0x100000000: pointer being freed was not allocated *** set a breakpoint in malloc_error_break to debug Vim: Caught deadly signal ABRT`

有人对如何解决这个问题有任何建议吗？

# ruby-on-rails - Ruby 匹配结果在 Heroku 上不起作用

> ID：11163129
> 
> 赞同：0
> 
> 时间：2012-06-22T19:50:13.057
> 
> 标签：ruby-on-rails, ruby, regex, heroku, pattern-matching

使用在 Heroku 上运行的 Rails，我遇到了在字符串中找到正则表达式匹配但没有为括号中的组设置 $1 变量的情况。这只发生在我在 Heroku 上的生产设置中，而不是在我的本地系统上（带有 Ruby ruby​​-1.9.2-p0 的 Rails 3.0.7）。代码是

```
puts "**** gateway_reply=#{gateway_reply}"
match = gateway_reply =~ /ID: (\w+)/
msg_id = $1
puts "**** match=#{match}, msg_id ($1) = #{$1}" 
```

在我的本地系统上，输出是

```
**** gateway_reply=ID: da2x7s5tjumtxtnk1krl8wps4wpasiee
**** match=0, msg_id ($1) = da2x7s5tjumtxtnk1krl8wps4wpasiee 
```

在生产系统上，$1 没有设置：

```
**** gateway_reply=ID: 93e4ca3590207761af6f3b5ba3545b36
**** match=0, msg_id ($1) = 
```

关于这里发生了什么的任何答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:30:05.673

为我工作：

```
> gateway_reply='ID: da2x7s5tjumtxtnk1krl8wps4wpasiee'
> gateway_reply.match(/ID: (\w+)/)
> $1
=> "da2x7s5tjumtxtnk1krl8wps4wpasiee" 
```

和

```
> gateway_reply =~ /ID: (\w+)/
=> 0
> $1
=> "da2x7s5tjumtxtnk1krl8wps4wpasiee" 
```

请注意，匹配运算符的结果是匹配`~`的位置

# objective-c - 将字符串转换为浮点型 Objective-C

> ID：11163136
> 
> 赞同：-1
> 
> 时间：2012-06-22T19:50:57.117
> 
> 标签：objective-c, xcode4, xcode4.2

我想检索现在在字符串中的数据的纬度和经度。为了使用它，它必须被转换成一个浮点数，所以我可以在这里使用它而不是浮点数：

```
//Create a region 

mapview.mapType = MKMapTypeSatellite;
MKCoordinateRegion newRegion;
newRegion.center.latitude = 47.808435,
newRegion.center.longitude = 9.643743;
newRegion.span.latitudeDelta = 0.00472;
newRegion.span.longitudeDelta = 0.006899;

CLLocationCoordinate2D coordinate;
coordinate.latitude = 47.808435;
coordinate.longitude = 9.643743; 
```

我只知道如何将字符串转换为数据，但我不知道如何将其转换为浮点数。有人知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T19:57:01.900

如果你有一个 NSString 实例包含一个有效的浮点数的字符串表示，你可以使用这个：

```
float number = [anNSString floatValue]; 
```

# spring-mvc - Spring 3.1 和 JQuery EasyUI DataGrid：发送 HashMap 列表，示例？

> ID：11163143
> 
> 赞同：1
> 
> 时间：2012-06-22T19:51:12.780
> 
> 标签：spring-mvc, datagrid, jquery-easyui

我一直在转换基于 Java Servlet 的 webapp 作为学习 Spring 的一种方式。我有一个 JSP，其中正在打印一个大数据表。我正在使用 Spring Controller 函数将包装在 HTML 表行中的大数据字符串返回到 JSP，并将其存放到滚动 div 中。

我想改用[JQuery EasyUI DataGrid](http://www.jeasyui.com/tutorial/datagrid/datagrid5.php)，但我也是 Ajax、JQuery 和 JSON 的新手，所以我对如何完全使用它有点摸不着头脑。

这是一个如何使用 JQuery EasyUI DataGrid 设置空表和列标题的示例：

```
<table id="tt" title="Frozen Columns" class="easyui-datagrid" style="width:500px;height:250px"  
            url="data/datagrid_data.json"  
            singleSelect="true" iconCls="icon-save">  
        <thead frozen="true">  
            <tr>  
                <th field="itemid" width="80">Item ID</th>  
                <th field="productid" width="80">Product ID</th>  
            </tr>  
        </thead>  
        <thead>  
            <tr>  
                <th field="listprice" width="80" align="right">List Price</th>  
                <th field="unitcost" width="80" align="right">Unit Cost</th>  
                <th field="attr1" width="150">Attribute</th>  
                <th field="status" width="60" align="center">Stauts</th>  
            </tr>  
        </thead>  
    </table> 
```

**这就是您将表格连接到 javascript 功能的方式：**

```
$('#tt').datagrid({  
        title:'Frozen Columns',  
        iconCls:'icon-save',  
        width:500,  
        height:250,  
        url:'data/datagrid_data.json',  
        frozenColumns:[[  
            {field:'itemid',title:'Item ID',width:80},  
            {field:'productid',title:'Product ID',width:80},  
        ]],  
        columns:[[  
            {field:'listprice',title:'List Price',width:80,align:'right'},  
            {field:'unitcost',title:'Unit Cost',width:80,align:'right'},  
            {field:'attr1',title:'Attribute',width:100},  
            {field:'status',title:'Status',width:60}  
        ]]  
    }); 
```

我的第一个问题是，在上面的示例中，我是否会在“url”属性中放置一个类似于“/getTabularData”的 url，然后将其映射到 Spring 3.1 控制器中的函数？如果是这样，什么会触发 DataGrid 向该 URL 发送请求（文档有点简约）。

据我了解，DataGrid 需要像这样包装的数据行

```
{"total":28,"rows":[
    {"productid":"FI-SW-01","unitcost":10.00,"status":"P","listprice":16.50,"attr1":"Large","itemid":"EST-1"},
    {"productid":"K9-DL-01","unitcost":12.00,"status":"P","listprice":18.50,"attr1":"Spotted Adult Female","itemid":"EST-10"},
    {"productid":"RP-SN-01","unitcost":12.00,"status":"P","listprice":18.50,"attr1":"Venomless","itemid":"EST-11"},
    {"productid":"RP-SN-01","unitcost":12.00,"status":"P","listprice":18.50,"attr1":"Rattleless","itemid":"EST-12"},
    {"productid":"RP-LI-02","unitcost":12.00,"status":"P","listprice":18.50,"attr1":"Green Adult","itemid":"EST-13"},
    {"productid":"FL-DSH-01","unitcost":12.00,"status":"P","listprice":58.50,"attr1":"Tailless","itemid":"EST-14"},
    {"productid":"FL-DSH-01","unitcost":12.00,"status":"P","listprice":23.50,"attr1":"With tail","itemid":"EST-15"},
    {"productid":"FL-DLH-02","unitcost":12.00,"status":"P","listprice":93.50,"attr1":"Adult Female","itemid":"EST-16"},
    {"productid":"FL-DLH-02","unitcost":12.00,"status":"P","listprice":93.50,"attr1":"Adult Male","itemid":"EST-17"},
    {"productid":"AV-CB-01","unitcost":92.00,"status":"P","listprice":193.50,"attr1":"Adult Male","itemid":"EST-18"}
]} 
```

那是格式化JSON吗？

我只能找到 1 - 2个 Spring 3.1 Controller 方法的*简短*示例，它们将数据作为 JSON 发送回。基本上唯一不同的是返回类型将有一个@ResponseBody。我找到了这个[Spring Source Blog Entry](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)，但是像我一样新，这*超出*了我的理解范围。是否有其他 URL 可以更详细地了解从 Spring 发送 JSON 的信息？

现在，我的应用程序正在从我们的数据库中以 LinkedHashMap 列表的形式检索数据，然后将这些数据放入自制函数中以迭代将每个 LinkedHashMap 包装到 HTML TR 中，并将其全部合并到 StringBuffer 中。

如果我要使用 JQuery EasyUI DataGrid，那么将我的 LinkedHashMap obj 列表获取到 JSON 并将其从 Spring 返回到 jsp 并进入 DataGrid 将是一个好方法。

我讨厌问这么大的“告诉我怎么做”的问题，但我只能通过谷歌找到一点点信息，而且我对我正在使用的所有东西都是新手。

非常感谢您的帮助周末愉快

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:47:31.800

你非常接近“得到它”。您唯一缺少的是从控制器方法（即生成 JSON）返回的内容。[这篇博客文章](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)提供了一个很好的例子来说明你需要做什么。

在您的情况下，您需要创建两个模仿 DataGrid 期望的 JSON 输出的 Java bean：

```
public class ResultSet {
    private long total;
    private List<ResultRow> rows;
    // getters & setters, etc
}

public class ResultRow {
    private Int productid;
    private Float unitcost;
    private String status;
    private Float listprice;
    private String attr1;
    // getters & setters, etc
} 
```

因此，您的 Controller 方法将具有 ResultSet 的返回类型，并会填充`ResultRow`s 并`ResultSet`从一些数据库查找等中填充。然后 Jackson 会神奇地将其“编组”到 JSON 中（通过 @ResponseBody 注释）。

# encoding - 将所有 Windows-1252 字符替换为各自的 UTF-8 字符

> ID：11163144
> 
> 赞同：2
> 
> 时间：2012-06-22T19:51:14.333
> 
> 标签：encoding

我正在寻找一种方法将所有不兼容的 windows-1252 字符递归替换为相应的 utf-8 字符。

我尝试了iconv，但没有成功。

我还发现了以下命令：

```
grep -rl oldstring . |xargs sed -i -e 's/oldstring/newstring/' 
```

但我不喜欢为每个角色手动执行这个命令。

有没有办法或软件可以做到这一点？

# mysql - SQL NOT IN [list of ids]（性能）

> ID：11163145
> 
> 赞同：13
> 
> 时间：2012-06-22T19:51:16.300
> 
> 标签：mysql

我只是想知道列表中 id 的数量是否会影响查询性能。

查询示例：

```
SELECT * FROM foos WHERE foos.ID NOT IN (2, 4, 5, 6, 7) 
```

`(2, 4, 5, 6, 7)`一个无限长的清单在哪里。

多少是太多（在订单的情况下）？

**更新：**我之所以问它是因为我有两个数据库。其中一个（只读）是项目的来源，另一个包含由操作员处理的项目。每次当操作员从只读数据库中请求新项目时，我都想排除已处理的项目。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T19:57:32.790

是的，列表中的 ID 数量会影响性能。例如，一个网络数据包只有这么大，数据库必须解析所有这些噪音并将其转化为一系列：

```
WHERE foo.ID <> 2
AND foo.ID <> 4
AND foo.ID <> 5
AND ... 
```

您应该考虑其他方式让您的查询了解此集合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T21:59:55.083

这是对该查询的古怪重写，它可能会执行得更好一些

```
SELECT * FROM foos
LEFT JOIN
(
    SELECT 2 id UNION
    SELECT 4    UNION
    SELECT 5    UNION
    SELECT 6    UNION
    SELECT 7
) NOT_IDS
USING (id) WHERE NOT_IDS.id IS NULL; 
```

NOT_IDS 子查询的工作方式如下所示：

```
mysql> SELECT * FROM
    -> (
    ->     SELECT 2 id UNION
    ->     SELECT 4    UNION
    ->     SELECT 5    UNION
    ->     SELECT 6    UNION
    ->     SELECT 7
    -> ) NOT_IDS;
+----+
| id |
+----+
|  2 |
|  4 |
|  5 |
|  6 |
|  7 |
+----+
5 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T16:52:14.677

只是为了好玩，鉴于您的更新，我将建议一个不同的策略：

你可以像这样跨表加入......

```
insert into db1.foos (cols) 
  select cols
    from db2.foos src
  left join db1.foos dst
    on src.pk = dst.pk
  where dst.othercolumn is null 
```

我不确定优化器将如何处理这个问题，或者它是否会比你正在做的更快（取决于你的索引策略，我猜）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-14T17:28:04.597

数据库在同一台服务器上？如果是，您可以使用左连接进行多数据库查询并获取空值。（这里是一个例子：[一次查询多个数据库](https://stackoverflow.com/questions/2132654/querying-multiple-databases-at-once)）。否则，您可以创建一个存储过程，用字符串传递 id，然后用正则表达式将它们拆分。我有类似的问题，但在内存数据库和 postgres 数据库中。幸运的是我的情况是（在...）

# visual-studio-2010 - 无法在 VSIX 部署的模板中引用向导程序集

> ID：11163146
> 
> 赞同：6
> 
> 时间：2012-06-22T19:51:22.500
> 
> 标签：visual-studio-2010, templates, wizard

我正在尝试为包含一些项目模板的 Visual Studio 2010 创建一个 VISX 扩展。这些模板不是很复杂，但我想在创建过程中通过向导为它们公开一些额外的配置。我已成功设置我的 VISX 包以将模板部署到 VS2010 中我想要的目录结构，但是当我尝试配置和运行向导时，当我按照以下行创建模板时收到错误：

> 错误：此模板试图加载组件程序集 'My.Assembly，版本 1.0.0.0，Culture=neutral，PublicKeyToken=...

我目前的配置如下：

*   所有项目都在同一个解决方案中。
*   VISX 项目包括对包含向导的项目和每个模板的项目引用。
*   每个模板都是从一个项目模板模板构建的（......令人困惑的术语）。
*   它们通过 .vsixmanifest 设计器作为内容添加，引用项目。
*   每个 .vstemplate 文件都有一个 WizardExtension 元素，指向 IWizard 实现并包含程序集。
*   向导程序集已签名。

.vstemplate 文件指向它们的向导，如下所示：

> <向导扩展>
> 
> <Assembly>My.Assembly，版本=1.0.0.1，文化=中性，PublicKeyToken=a494da9e6e53f845，自定义=null </Assembly>
> 
> <FullClassName>My.Assembly.Wizard</FullClassName>
> 
> </WizardExtension>

据我所知，这就是我应该做的。到底出了什么问题？看起来它找不到程序集。为了使程序集对模板可见，我还需要采取任何其他步骤吗？该程序集在安装时被部署到扩展文件夹（我验证了这一点），所以它至少是成功的。我需要对 .vstemplate 文件做些什么特别的事情来告诉他们查看扩展文件夹和 GAC 吗？我是不是错过了什么？

请注意，我在互联网上找到了几个页面，说明我必须手动或使用脚本 GAC 程序集。然而，很少有人有我的确切情况（项目模板模板被 VISX 项目引用，大多数示例使用通过项目模板向导导出的常规项目并将其包转储到 VISX 文件夹结构中）。我发现唯一符合我的场景的是微软的一个例子。我试图匹配它，但可惜它仍然不起作用。我尝试重新定位我下载的项目以在此问题中引用，但我无法再次找到它。

使用脚本是我们之前的做法，但我想尝试使用 VISX 包让事情变得更简洁。我想避免这种情况，但如果必须编写 VISX 脚本以将模板安装到 GAC，我可以这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:54:01.037

通过 VSIX Extension 部署基于向导的项目模板时，最好在 .vstemplate 中使用 Short-Named 程序集。这样可以避免 GAC 部署。

在你的情况下，它应该是：

```
<WizardExtension>
 <Assembly>My.Assembly</Assembly>
 <FullClassName>My.Assembly.Wizard</FullClassName>
</WizardExtension> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T02:22:28.417

我正在使用 VS2015 并遇到这个问题。当我开始使用向导实现构建 VSIX 项目时，一段时间（4-6 周）一切正常，然后突然停止工作。几周后，它会重新开始工作并停止工作，恕不另行通知。我花了很长时间才找到解决方法（仍然不知道为什么它突然停止了）。

**这就是我的 VSIX 项目的构建方式**

1.  我在同一个解决方案中有 VSIX 项目、项目模板和向导实现。
2.  VSIX 和向导实现在同一个项目中。
3.  在 VSIX 项目 source.extension.vsixmanifest 中添加了 VSIX 项目 dll 和项​​目模板作为资产。
4.  项目模板 *.vstemplate 具有向导部分，该部分引用具有强名称的 VSIX 项目：<<<<<<<<<<<<<<<<<<<<<

    ```
    <WizardExtension>
        <Assembly>Test.Template.TemplateInstallerWizard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=30ab381f68dc4f5e</Assembly>
        <FullClassName>Test.Template.TemplateInstallerWizard.WizardImplementation</FullClassName>
      </WizardExtension> 
    ```

    * * *

**这些都不适合我**

1.  通过工具->扩展和更新从 VS 常规实例卸载扩展。
2.  通过以管理员身份从 VS2015 命令提示符启动 VS exp 实例，从 VS 实验实例卸载扩展：

    devenv.exe /rootsuffix exp

    然后通过工具-> 扩展和更新卸载扩展..

3.  使用@Ethan Wu 解释的短命名程序集。

4.  从以管理员身份启动的 VS2015 命令提示符通过此命令安装模板：

    devenv /installvstemplates

5.  重启VS2015，我的机器在这个过程中几次。

**这对我**有用（感谢@Ethan Wu）

1.  从 VSIX 项目中删除证书。

4.  从项目模板 *.vstemplate 文件中删除强名称

```
 <WizardExtension>
      <Assembly>Test.Template.TemplateInstallerWizard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</Assembly>
  <FullClassName>Test.Template.TemplateInstallerWizard.WizardImplementation 
```

9.  清理并构建项目。

12.  从 VS 常规实例中删除扩展并关闭 VS2015（不是绝对必需的）

15.  安装扩展。

18.  打开新的 VS2015 实例并尝试使用向导创建项目。

**帮助调试的几件事**

1.  构建 VSIX 项目时，会在 bin\debug 文件夹中创建一个文件 -extension.vsixmanifest，该文件具有 assets 类型。

2.  查找 Asset Type="Microsoft.VisualStudio.Assembly"：AssemblyName 值是项目模板的 *.vstemplate WizardExtension 部分中预期的值 - 它们应该完全匹配。

3.  安装扩展后，转到本地盒子上的 VS2015 扩展位置：

    ```
    %appdata%\..\Local\Microsoft\VisualStudio\14.0\Extensions\<some_temp_folder> 
    ```

    打开 extension.vsixmanifest 以确保正确填充 Asset Type="Microsoft.VisualStudio.Assembly" AssemblyName 值。如果需要，您可以更改此值并重新启动 VS2015 以使其生效。

希望这对某人有所帮助并节省大量时间，因为向导和自定义项目模板的帮助很少。

谢谢，

RDV

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-21T00:23:16.390

我遇到了同样的问题，但是当我更新`AssemblyVersion`我的向导项目时，我的问题就暴露了。我检查了清单文件中的版本，并且它们应该匹配。

我只是进入`C:\Users\Albert\AppData\Local\Microsoft\VisualStudio\16.0_c340331cExp\Extensions`，找到我的扩展名并在那里删除它。现在它又可以工作了。

（请注意，我确实找到了一些其他人，因为我已经在 AssemblyInfo 文件中更改了公司名称等，所以可能是旧的那些也导致了这种情况）

# javascript - Javascript 与 Asp.net runat=server 属性冲突

> ID：11163151
> 
> 赞同：1
> 
> 时间：2012-06-22T19:51:33.163
> 
> 标签：javascript, asp.net, html, runatserver

我正在运行一些带有几个 html 控件的 java 脚本。一切正常。

除非我将runat =“ server”属性添加到html控件中，以便我可以在后面的代码中访问它，否则java脚本功能不起作用。这是普遍现象吗？在 java 脚本中使用 runat = "server" 属性是否有解决方法？

或者如何在不使用 run at server 属性的情况下在后面的代码中访问我的 Html 控件？

使困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:03:47.300

这很可能发生，因为您的标记看起来像这样：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <div runat="server" id="myDiv">
    </div>
</asp:Content> 
```

即您正在使用 MasterPage 或其他充当[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx). 这导致在标记中写出的 ID 看起来像这样：

```
<div>
    <div id="ContentPlaceHolder1_myDiv">
    </div>
</div> 
```

如果您使用的是 asp.net 4，您可以`myDiv`通过添加更改您的标记，`clientidmode="Static"`然后您将获得：

```
<div>
    <div id="myDiv">
    </div>
</div> 
```

这意味着您的 javascript 将再次工作。如果您使用的是早期版本的 asp.net，那么您需要按照 SHAKKIR SHABBIR 的建议进行操作，并使用`<%=myDiv.ClientId%>`在您的 javascript 中引用该元素，以便获得 asp.net 生成的 ID 的“重命名”版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:55:34.883

好的，runat="server" 没问题。

您需要修改 javascript。

如果您的控件输入为：

```
<input id="control_ID" runat="server" /> 
```

在 javascript 中使用 <% = control_ID.ClientId %> 来引用控件

它会正常工作。但是，如果这不起作用，请分享您的代码。我会解决的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:49:53.460

```
<img alt="Calendar" onmouseover="javascript:this.style.cursor='hand';"
                    src="~/images/Calander_0.png" 
                    id="ImgCalender"  
                    onclick ="javascript:showCalendarControl('<%=txtAppointmentDate.ClientID  %>','mm/dd/yyyy');" 
                    runat="server"  /> 
```

如果设置了在服务器上运行 JavaScript 不起作用

# python - 如何替换 XML 元素中的文本？

> ID：11163153
> 
> 赞同：2
> 
> 时间：2012-06-22T19:51:35.280
> 
> 标签：python, xml, lxml

给定以下xml：

```
<!-- file.xml -->
<video>
    <original_spoken_locale>en-US</original_spoken_locale>
    <another_tag>somevalue</another_tag>
</video> 
```

`<original_spoken_locale>`替换标签内的值的最佳方法是什么？如果我确实知道价值，我可以使用类似的东西：

```
with open('file.xml', 'r') as file:
    contents = file.read()
new_contents = contents.replace('en-US, 'new-value')
with open('file.xml', 'w') as file:
    file.write(new_contents) 
```

但是，在这种情况下，我不知道值是多少。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T19:57:40.353

这对于 ElementTree 来说相当容易。只需替换`text`元素属性的值：

```
>>> from xml.etree.ElementTree import parse, tostring
>>> doc = parse('file.xml')
>>> elem = doc.findall('original_spoken_locale')[0]
>>> elem.text = 'new-value'
>>> print tostring(doc.getroot())
<video>
    <original_spoken_locale>new-value</original_spoken_locale>
    <another_tag>somevalue</another_tag>
</video> 
```

这也更安全，因为您可以`en-US`在文档的其他位置拥有。

# ember.js - ember 视图助手在 master 的最新 ember 中不起作用

> ID：11163155
> 
> 赞同：0
> 
> 时间：2012-06-22T19:51:39.990
> 
> 标签：ember.js

我有一个简单的文本字段助手，直接取自 ember 联系人示例。它使用 ember-0.9.8.1 在这个 jsfiddle 中正常工作：http: [//jsfiddle.net/inconduit/dKsh3/2/](http://jsfiddle.net/inconduit/dKsh3/2/)

但是，当我尝试使用从 master (v0.9.8.1-421-g189ad79) 构建的最新 ember 运行相同的代码时，文本字段的内容永远不会被设置（它们保持为空）并且双击它们没有效果. 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:26:28.627

这是一个上下文问题。您必须在模板中的属性前面加上“视图”。

请参阅此修改后的 JSfiddle：

[http://jsfiddle.net/dKsh3/4/](http://jsfiddle.net/dKsh3/4/)

# jquery - jquery + handsontable：没有方法'on'

> ID：11163156
> 
> 赞同：0
> 
> 时间：2012-06-22T19:51:43.500
> 
> 标签：jquery, handsontable

我收到此错误：

```
uncaught TypeError: Object [object Object] has no method 'on' 
```

在 jquery.handsontable.js:2258

我有一些看起来像这样的设置：

```
<script src="/javascripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery-ui-1.8.12.custom.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.handsontable.js" type="text/javascript"></script>
<script src="/javascripts/jquery.simplemodal.1.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    var $j = jQuery.noConflict();
</script>

<div id="dataTable" class="dataTable"></div>
<script>
$j("#dataTable").handsontable();
var data = [
        ["", "Kia", "Nissan", "Toyota", "Honda"],
        ["2008", 10, 11, 12, 13],
        ["2009", 20, 11, 14, 13],
        ["2010", 30, 15, 12, 13]
];
$j("#dataTable").handsontable("loadData", data);
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:53:56.480

你可能需要 jQuery 1.7

jQuery 1.5 没有`.on`方法。引入它是为了替换`.live()`并为常规事件处理与委托事件处理提供更一致的接口。

请注意，如果您广泛使用，`.attr()`您可能需要修改代码以`.prop()`在某些地方使用 - jQuery 1.6 对工作方式进行了重大更改`.attr()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:53:43.897

Handsontable 插件需要 jQuery 1.9+，因为它使用了`.on`旧版本 jQuery 中没有的其他方法。

~~您可以创建一个小脚本，`.on`以便在适当`.bind`的`.delegate`地方使用。~~

# tridion - 如何在 Tridion DWT 模板中迭代这些嵌入值

> ID：11163158
> 
> 赞同：3
> 
> 时间：2012-06-22T19:52:02.680
> 
> 标签：tridion

我的 XML 是这样的。

```
.
.
.
</body>

<List>
  <topicTitle>This is topic title</topicTitle>
  <topDef>This is topic definition.</topDef>
</List> 
```

我基本上想插入`topicTitle`标签。我正在尝试使用此代码（仅为简单起见显示 topicTitle 的代码）：`topDef``<li>`

```
<!-- TemplateBeginRepeat name="List" -->

    <!-- TemplateBeginRepeat name="Field.topicTitle" -->

        <li>@@RenderComponentField(FieldPath+".value", 
                                   TemplateRepeatIndex)@@ </li>
    <!-- TemplateEndRepeat -->

<!-- TemplateEndRepeat --> 
```

但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:19:23.220

在可嵌入模式的情况下，您不需要迭代 xmlList（使用 TemplateBeginRepeat），不像组件链接，在这里您可以通过语法直接访问嵌入的子元素：-

@@Component.XMLNameOfEmbeddedschema.XmlElementNameinEmbeddedSchema@@

请注意上面的 XMLNameOfEmbeddedschema = 您在插入可嵌入模式时在父模式中提供的 XMLName。

因此，在您的情况下，它将与

@@Component.List.topicTitle@@ 用于访问 topicTitle 的值。

如果此解决方案适合您，请将此答案标记为已接受...

# xml - 向文本元素添加正则表达式

> ID：11163159
> 
> 赞同：1
> 
> 时间：2012-06-22T19:52:19.077
> 
> 标签：xml, relaxng

有没有办法获取一个“anyURI”元素并添加额外的约束，例如require“://”？或者我是否必须定义一个新的数据类型，我将如何在该新数据类型中实际保留“xsd:anyURI”的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:07:16.567

这是一个解决方案：

```
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
 <start>
  <ref name="root"/>
 </start>
 <define name="root">
    <element name="root">
        <data type="anyURI" >
            <param name="pattern">.*://.*</param>
        </data>
    </element>
 </define>
</grammar> 
```

您可以使用 param 属性添加 XML 架构方面。

# javascript - 从 Javascript 读取的 Cookie 中删除重复的条目

> ID：11163160
> 
> 赞同：0
> 
> 时间：2012-06-22T19:52:18.983
> 
> 标签：javascript, cookies

我在下面有这个脚本，我用它来设置和阅读使用 JavaScript 浏览的最后 5 个页面。客户端不希望呈现任何重复的 URL/文本，但我到目前为止所尝试的一切都没有运气。

也许我做错了。任何帮助，将不胜感激。

```
// Set read, set & delete cookie functions-------------------------------------------------------------------------

    function getCookie (cookie_name){
      var results = document.cookie.match ( '(^|;) ?' + cookie_name + '=([^;]*)(;|$)' );
      if (results) {
        return ( unescape ( results[2] ) );
      } else {
        return null;
      }
    }

    function setCookie (name,value,expiredays){
        var exdate = new Date();
        exdate.setDate(exdate.getDate()+expiredays);
        document.cookie = name+"="+escape(value)+((expiredays==null)?"":";expires="+exdate.toGMTString());
    }

    function delete_cookie (cookie_name) {
      var cookie_date = new Date ( );  // current date & time
      cookie_date.setTime ( cookie_date.getTime() - 1 );
      document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();
    }

// Set last 5 visited pages cookies --------------------------------------------------------------------------------

    tlvp_the_last_visited_pages();

    // function to get info from cookies for last five pages.
    // Needs to be seperate from getCookie function for parsing reasons.
    function fetchCookie(name){
        if(document.cookie.length>0){
          start = document.cookie.indexOf(name+"=");
          if(start!=-1){
            start = start+name.length+1;
            end = document.cookie.indexOf(";",start);
            if(end==-1){
                end = document.cookie.length;
            }
            return unescape(document.cookie.substring(start,end));
            }
          }
        return "";
    }

    function tlvp_the_last_visited_pages(){
        tlvp_div = document.getElementById('the_last_visited_pages');

        if(tlvp_pages_count > 0){
            for(var i = tlvp_pages_count; i >= 0; i--){
                if(i > 0){
                    setCookie("tlvp_visited_page"+i+"_link",fetchCookie("tlvp_visited_page"+(i-1)+"_link"),tlvp_expiredays);
                    setCookie("tlvp_visited_page"+i+"_title",fetchCookie("tlvp_visited_page"+(i-1)+"_title"),tlvp_expiredays);
                } else {
                    setCookie("tlvp_visited_page"+i+"_link",document.URL,tlvp_expiredays);
                    setCookie("tlvp_visited_page"+i+"_title",document.title,tlvp_expiredays);
                }
            }
        }

        // This is where the code is created for the div...     
        tlvp_last_visited_pages_title = document.createElement("div");
        tlvp_last_visited_pages_title.className = "tlvp_title";
        tlvp_last_visited_pages_title_text = document.createTextNode(tlvp_title);
        tlvp_last_visited_pages_title.appendChild(tlvp_last_visited_pages_title_text);
        tlvp_div.appendChild(tlvp_last_visited_pages_title);    
        tlvp_last_visited_pages_content = document.createElement("div");
        tlvp_last_visited_pages_content.className = "tlvp_content"; 

        // Loops through the cookies and creates text links...          
        for(var i=1; i<=tlvp_pages_count; i++){
            var e = fetchCookie("tlvp_visited_page"+i+"_link");
            if (e != "") {
              tlvp_visited_page_line = document.createElement("p");
              tlvp_visited_page_a = document.createElement("a");
              tlvp_visited_page_a.href = getCookie("tlvp_visited_page"+i+"_link");
              tlvp_visited_page_text = document.createTextNode(getCookie("tlvp_visited_page"+i+"_title"));
              tlvp_visited_page_a.appendChild(tlvp_visited_page_text);
              tlvp_visited_page_line.appendChild(tlvp_visited_page_a);
              tlvp_last_visited_pages_content.appendChild(tlvp_visited_page_line);
            }
        }

        tlvp_div.appendChild(tlvp_last_visited_pages_content);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:47:59.383

您可以尝试将值作为 JSON 存储在一个 cookie 中。

```
// Set read, set & delete cookie functions-------------------------------------------------------------------------

function getCookie (cookie_name){
    var results = document.cookie.match ( '(^|;) ?' + cookie_name + '=([^;]*)(;|$)' );
    if (results) {
        return ( unescape ( results[2] ) );
    } else {
        return null;
    }
}

function setCookie (name,value,expiredays){
    var exdate = new Date();
    exdate.setDate(exdate.getDate()+expiredays);
    document.cookie = name+"="+escape(value)+((expiredays==null)?"":";expires="+exdate.toGMTString());
}

function delete_cookie (cookie_name) {
    var cookie_date = new Date ( );  // current date & time
    cookie_date.setTime ( cookie_date.getTime() - 1 );
    document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();
}

// Set last 5 visited pages cookies --------------------------------------------------------------------------------

function last_visited() {
    var max_urls = 5;
    var cookie = getCookie("last_visited");
    var url = window.location.href;

    // Get the JSON cookie or a new array.
    var urls = (cookie != null) ? JSON.parse(cookie) : [];

    // Build new_urls out of history that is not this url.
    var new_urls = [];
    for (var i=0; i < urls.length; i++) {       
        if (urls[i].url != url) {
            new_urls.push(urls[i]);
        }
    }

    // remove the last item if the array is full.
    if (new_urls.length == max_urls) {
        new_urls.pop();
    }

    // Add this url to the front.
    new_urls.unshift({url: url, title: document.title});

    // Save it
    setCookie("last_visited", JSON.stringify(new_urls),1);

    // Create html
    var html = "<ul>\n";
    for (var i = 0; i < new_urls.length; i++) {
        html += "<li><a href=\"" + new_urls[i].url + "\">" + new_urls[i].title + "</a></li>\n"
    }
    html += "</ul>\n";

    // Render html.
    var el = document.getElementById("last_visited");
    el.innerHTML = html;
}

window.onload = function () {
    last_visited();
}; 
```

# php - Wordpress 联系表 7 数据库唯一 ID

> ID：11163162
> 
> 赞同：0
> 
> 时间：2012-06-22T19:52:25.387
> 
> 标签：php, wordpress, payment

我需要在 wordpress 上创建一个重定向到 Chronopay 支付门的支付表单。我尝试使用带有数据库扩展的 CF7 插件来实现。

接下来我该怎么做： 1\. 将唯一 ID 和付款状态添加到 CF7 数据库字符串。（我在数据库中添加了 2 个字段并尝试使用 wpcf7_before_send_mail 上的挂钩更改它们）。

```
function order_set_id($f) {
global $wpdb;
global $table_prefix;
$submit_time = $f->submit_time;
$title = $f->title;

if ('Taxy pick up' == $title ) {
    $sql = "SELECT MAX(order_id) as mid FROM `wp_cf7dbplugin_submits`";
    $var = $wpdb->get_results($wpdb->prepare($sql));

    $neworder_id = $var[0]->mid;
    $wpdb->update( 'wp_cf7dbplugin_submits',  
        array( 'order_id' => 0, 'order_payment' => 0 ),  
        array( 'submit_time' => $submit_time ),  
        array( '%s', '%d' ),  
        array( '%d' )
    );
}}
add_action( 'wpcf7_before_send_mail', 'order_set_id'); 
```

但它不起作用。

1.  提交表单后，我需要显示一个隐藏的表单作为付款发票。我该怎么做？
2.  如何阻止在联系表 7 中发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:08:48.827

在几乎过去，我想要类似的东西。找到了这两种方法：

1.  [http://runastartup.com/integrate-paypal-button-with-contact-form-in-wordpress/](http://runastartup.com/integrate-paypal-button-with-contact-form-in-wordpress/)
2.  [http://www.gobdg.com/blog/code-library/donation-form-using-contact-form-7-paypal/](http://www.gobdg.com/blog/code-library/donation-form-using-contact-form-7-paypal/)

想法暂时搁置，但我将尽快有空闲时间，将决定使用哪种方法。

祝你好运！:)

# javascript - 剖析我的 jQuery - 无法使用 keyup 函数将字符数插入另一个文本区域

> ID：11163163
> 
> 赞同：0
> 
> 时间：2012-06-22T19:52:26.837
> 
> 标签：javascript, jquery

我试图弄清楚为什么我的 jQuery 不起作用。我已经链接到 jQuery，然后，我尝试绑定到 textarea 内容。我已经使用了 name=content 和 name=#content 。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
$('input[name=content]').bind('keyup',function(){
     $('#desctag').val($(this).length)
});
</script> 
```

为什么它不起作用？

代码现在是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
$('input[name=#content]').bind('keyup',function(){
 $('#desctag').val($(this).length)
})})
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:57:56.733

您需要将它放在一个 document.ready 函数中，以便它在 DOM 准备好时执行。

```
$(document).ready(function() {
     $('input[name=content]').bind('keyup',function(){
          $('#desctag').val($(this).length);
     });
}); 
```

# database - Codeigniter 从数据库生成简单数组

> ID：11163172
> 
> 赞同：0
> 
> 时间：2012-06-22T19:52:50.517
> 
> 标签：database, arrays, codeigniter, line

我有两个值 id 和 val 的数据库，所以我想问一下如何生成这样的简单数组

```
 array('value', 'value2', 'value3'...); 
```

我有

```
 $query = $this->db->query('SELECT val FROM table');
  echo $query->result_array(); 
```

但它会导致类似的结果：

```
 Array
  (
      [0] => Array
          (
              [val] => value
          )

      [1] => Array
          (
              [val] => value2
          )
  ) 
```

我想把它放在一个数组中，所以请如果你能帮助我。感谢所有答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:57:01.383

```
$query = $this->db->query('SELECT val FROM table')->result_array();

$array = array();

foreach ( $query as $key => $val )
{
    $temp = array_values($val);
    $array[] = $temp[0];
} 
```

在此处查看实际操作：http: [//viper-7.com/tPd7zN](http://viper-7.com/tPd7zN)

# ruby-on-rails - 在使用 Rails 提交表单期间在后台为属性赋值

> ID：11163175
> 
> 赞同：0
> 
> 时间：2012-06-22T19:53:02.943
> 
> 标签：ruby-on-rails, ruby, forms, model-view-controller

我在页面上有一个表单，用户可以使用它来创建课程。虽然我了解如何为用户提供填写课程名称和描述等简单内容的机会，但我还想将用户的 id 分配给teacher_id 列。这应该为用户自动完成，他们不应该看到分配teacher_id的机会，因为它应该是他们的id。

目前“创建课程”页面的视图是这样的：

```
<% provide(:title, 'My Classes') %>
<h1>Create a class!</h1>

<div class="row">
   <div class="span6 offset3">
     <%= form_for(@course) do |f| %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :description %>
      <%= f.text_area :description, :size => "30x6" %>

      <!-- Assign the current user's id to the teacher_id column in the background -->

      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
     <% end %>
  </div>
</div> 
```

课程控制器中的新操作如下所示：

```
def new
    @course = Course.new
end 
```

完成我想做的事情的最佳方法是什么？我对 Rails 很陌生，对表单和所有可能性都没有太多经验。我在 hidden_​​field_tag 上读了一点，但我不知道这是否是我需要的那种东西，而且我发现无论如何都很难在表单中获取用户的 ID。我是否需要在控制器中创建一个用户实例变量，或者我可以用视图中的代码以某种方式做到这一点。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:07:49.100

您可能会有一个创建操作，例如：

```
def create
  @course = Course.new(params[:course])
end 
```

假设您有可用的 @current_user 变量，您应该能够在保存新课程之前在控制器中设置它。

```
def create
  @course = Course.new(params[:course])
  @course.teacher_id = @current_user.id
  @course.save
  redirect_to :action => "show", :id => @course.id
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:09:59.350

您可以使用[hidden_​​field](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)：

```
<% provide(:title, 'My Classes') %>
 <h1>Create a class!</h1>

<div class="row">
   <div class="span6 offset3">
     <%= form_for(@course) do |f| %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :description %>
      <%= f.text_area :description, :size => "30x6" %>

      <%= f.hidden_field :teacher_id, :value => :current_user.id %>

      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
     <% end %>
  </div>
</div> 
```

**编辑**- 解释如何`current_user`在表格中提供。

我通常有一个`session`控制器负责登录和注销用户，创建一个`session`来保持用户登录。

例如创建动作：

```
 def create
    user = User.find_by_name(params[:name])
    if user && user.authenticate(params[:password])
      session[:user_id] = user.id
      flash[:success] = "Welcome " + current_user.name
      redirect_to user
    else
      flash.now[:error] = "Invalid username/password combination."
      render "new"
    end
  end 
```

如果用户名和密码的组合正确，它将创建一个`session`带有`user_id`( `session[:user_id]`) 的字符。现在，在您的中，`application_controller`您可以拥有以下内容：

```
private
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

`helper_method`允许您在应用程序的`current_user`任何控制器或视图中使用。

我希望它有帮助....

# perl - Test::mysqld 不会按预期关闭 mysqld

> ID：11163177
> 
> 赞同：0
> 
> 时间：2012-06-22T19:53:04.727
> 
> 标签：perl, unit-testing, mysql

我有这个脚本：

```
#!/var/home/cherry/opt/perl

use Test::More;
use DBI;
use Test::mysqld;
use Data::Dumper;

my $mysqld = Test::mysqld->new(
    base_dir => '/tmp/test_mysqls',
    my_cnf => {
        'skip-networking' => '', # no TCP socket
    }
) or plan skip_all => $Test::mysqld::errstr;

my $dbh = DBI->connect(
    $mysqld->dsn(dbname => 'test'),
);

warn Dumper($mysqld);

done_testing(); 
```

当我运行它时，这是我得到的输出：

```
prove -lv t/test.t
t/test.t .. $VAR1 = bless( {
                 '_owner_pid' => 21854,
                 'base_dir' => '/tmp/test_mysqls',
                 'pid' => 21918,
                 'mysql_install_db' => '/usr/bin/mysql_install_db',
                 'auto_start' => 2,
                 'my_cnf' => {
                               'tmpdir' => '/tmp/test_mysqls/tmp',
                               'pid-file' => '/tmp/test_mysqls/tmp/mysqld.pid',
                               'skip-networking' => '',
                               'datadir' => '/tmp/test_mysqls/var',
                               'socket' => '/tmp/test_mysqls/tmp/mysql.sock'
                             },
                 'mysqld' => '/usr/sbin/mysqld'
               }, 'Test::mysqld' );

1..0 
```

* * *

测试永远不会完成。该脚本永远在换行符上等待并且永远不会退出——当我执行 ps aux 时，即使在我执行 ctrl + c 之后，我也可以看到 mysqld 的实例正在运行。我什至不知道从哪里开始解决这个问题。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:00:54.197

尝试添加 do {} 并在 eval {} 中调用 $mysqld->stop 以关闭 mysqld。

```
my $mysqld = Test::mysqld->new(
    base_dir => '/tmp/test_mysqls',
    my_cnf => {
        'skip-networking' => '', # no TCP socket
    }
) or do {
    eval { $mysqld->stop };
    plan skip_all => $Test::mysqld::errstr;
}; 
```

# javascript - 在 jquery 选择器中包含 + startswith

> ID：11163179
> 
> 赞同：0
> 
> 时间：2012-06-22T19:53:20.247
> 
> 标签：javascript, jquery, jquery-selectors

我需要根据标签文本值的首字母选择元素。例如：

```
<li><label for="1"><input type="checkbox" name="contacts" value="1">Aaron</label></li>
<li><label for="2"><input type="checkbox" name="contacts" value="2">Born</label></li>
<li><label for="3"><input type="checkbox" name="contacts" value="3">Bale</label></li>
<li><label for="4"><input type="checkbox" name="contacts" value="4">Kate</label></li> 
```

我想选择文本值以 B 开头的所有输入 - 结果它应该是 Born 和 Bale 输入。如何使用 jQuery/纯 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:03:59.357

试试这个：http: [//jsfiddle.net/bb2uE/](http://jsfiddle.net/bb2uE/)

html:

```
<label for="1">Aaron</label><input type="checkbox" name="contacts" value="1"></li>
<li><label for="2">Born</label><input type="checkbox" name="contacts" value="2"></li>
<li><label for="3">Bale</label><input type="checkbox" name="contacts" value="3"></li>
<li><label for="4">Kate</label><input type="checkbox" name="contacts" value="4"></li> 
```

​Javascript：

```
$(document).ready(function(){
var obj = [];
    $.each($('label'), function(){
        if ($(this).html().charAt(0) == 'B')
         obj.push($(this).html());       
    });
    for (var i = 0; i < obj.length; i++)
        console.log(obj[i]);
}); 
```

或者，如果您想隐藏这些输入：http: [//jsfiddle.net/bb2uE/1/](http://jsfiddle.net/bb2uE/1/)

Javascript：

```
var hideFunction = function(letter){
   $.each($('label'), function(){
        if ($(this).html().charAt(0) == letter)
            $(this).parent().hide();     
    });
}
hideFunction('B'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:20:28.507

您的标记应如下所示：

```
<li><input type="checkbox" name="contacts" id="id1" value="1"><label for="id1">Aaron</label></li>
<li><input type="checkbox" name="contacts"  id="id2"  value="2"><label for="id2">Born</label></li>
<li><input type="checkbox" name="contacts"  id="id3"  value="3"><label for="id3">Bale</label></li>
<li><input type="checkbox" name="contacts"  id="id4" value="4"><label for="id4">Kate</label></li>​ 
```

这就是您获得输入的方式

```
$("label").filter(function () {
    return $(this).text().charAt(0) === "B"; 
}).closest("li").find("input"); 
```

# php - 带有 302 重定向的内容处置

> ID：11163180
> 
> 赞同：4
> 
> 时间：2012-06-22T19:53:21.830
> 
> 标签：php, http, redirect, header, content-disposition

这是昨晚工作的，但我一定是不小心改变了一些东西，因为现在不是。

从这些标题中应该清楚我想要做的事情：

```
Content-Disposition: attachment;filename=english_customizable.xml
Location: http://tortoisewrath.com/files/2.xml 
```

但是，当发送此标头时，该`Content-Disposition`部分在重定向后不起作用。

...为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:12:15.383

你想要做的是不建议检查这个问题；[标题位置 + 内容配置](https://stackoverflow.com/questions/9458854/header-location-content-disposition)

**Content-Disposition + Location 标头**

但是您可以做到，要使其正常工作，您必须在发送之前缓冲整个响应。您可以通过输出缓冲来做到这一点

*   [http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

否则浏览器可能会`Location`在文件下载之前解释标题。无论哪种方式都是粗略的，所以你不应该这样做。

**请注意**，强制“另存为”使用`Content-Disposition: attachment;`将确保客户端不会去/导航任何地方，因此下面的方法在任何情况下都应该没问题。

**在php中流式传输文件**

引用[一个聪明的人的](http://www.php.net/manual/en/function.header.php#107581)话：

```
// To use header() with 'content-type', why don't you use mime_content_type() function rather than checking the type on the basis of extension? 
// Example code: 

<?php 
$file="test.docx"; 
header("Pragma: public"); 
header('Content-disposition: attachment; filename='.$file); 
header("Content-type: ".mime_content_type($file)); 
header('Content-Encoding: identity'); 
ob_clean(); 
flush(); 
readfile($file); 
?> 

// Use $file to map to whichever type of file. 
// Note: the mime types should already be defined in apache settings 
```

来源：[http ://www.php.net/manual/en/function.header.php#107581](http://www.php.net/manual/en/function.header.php#107581)

请注意，使用的原始答案`Content-Transfer-Encoding`实际上并不存在于 HTTP 中。该来源下方的评论解释了它：[http ://www.php.net/manual/en/function.header.php#107044](http://www.php.net/manual/en/function.header.php#107044)

# scala - Scala Numeric init 常量为 0

> ID：11163190
> 
> 赞同：7
> 
> 时间：2012-06-22T19:53:54.033
> 
> 标签：scala, numeric

让我有一个名为 MathUtil 的实用程序类。

它看起来像这样。

```
abstract class MathUtil(T:Numeric){
   def nextNumber(value:T)
   def result():T
} 
```

让我这样子类化它

```
class SumUtil[T:Numeric] extends MathUtil[T]{
   private var sum:T = 0
   override def nextNumber(value:T){
     sum = sum + value
   }
   override def result():T = sum
} 
```

我的陈述有问题

```
private var sum:T = 0 
```

现在，我必须初始化总和为 0。我猜任何数字都有办法表示 0。我对 scala 很陌生。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T20:12:02.077

[`Numeric`类型类实例](http://www.scala-lang.org/api/current/scala/math/Numeric.html)有一个`zero`方法可以满足您的需求：

```
class SumUtil[T: Numeric] extends MathUtil[T] {
   private var sum: T = implicitly[Numeric[T]].zero
   override def nextNumber(value: T) {
     sum = implicitly[Numeric[T]].plus(sum, value)
   }
   override def result(): T = sum
} 
```

请注意，您还需要该`plus`方法的实例，除非您 import `Numeric.Implicits._`，在这种情况下您可以使用`+`. 在这种情况下，您还可以通过不使用上下文绑定语法来稍微清理一下代码：

```
class SumUtil[T](implicit ev: Numeric[T]) extends MathUtil[T] {
   import Numeric.Implicits._
   private var sum: T = ev.zero
   override def nextNumber(value: T) {
     sum = sum + value
   }
   override def result(): T = sum
} 
```

这是完全等价的：上下文绑定版本只是这个隐式参数的语法糖，但是如果您需要显式使用该参数（就像您在此处所做的那样`zero`），我发现编写脱糖版本更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:09:00.423

我认为需要稍微澄清一下您要完成的工作。从 Scala 文档中，Numeric 类型本身是通用的。我的感觉是你真正想要的是描述一个处理任何 Numeric[T] 而不是 Numeric[_] 的子类的 MathUtil 抽象，这是你的代码当前正在描述的。这是基于该假设的正确实现。

```
//Define a MathUtil that works on any T
abstract class MathUtil[T] {
    def nextNumber(value: T)
    def result(): T
}

//Define a SumUtil that works on any T that has an available Numeric
//Will search implicit scope, but also allows you to provide an
//implementation if desired.
class SumUtil[T](implicit n: Numeric[T]) extends MathUtil[T] {
    //Use the Numeric to generate the zero correctly.
    private var sum: T = n.zero
    //Use the Numeric to correctly add the sum and value
    override def nextNumber(value: T) = sum = n.plus(sum, value)
    override def result(): T = sum
}

//Test that it works.
val a = new SumUtil[Int]
val b = List(1,2,3)

b map a.nextNumber //Quick and dirty test... returns a meaningless list
println(a.result)  //Does indeed print 6 
```

如果上述内容不能满足您的要求，请澄清您的问题。

# installation - 安装 darcsden

> ID：11163193
> 
> 赞同：5
> 
> 时间：2012-06-22T19:53:59.003
> 
> 标签：installation, cabal, cabal-install, darcs

在 cabal 安装 darcsden 代码后，我收到以下消息：

cabal：重新安装可能会破坏以下软件包： bin-package-db-0.0.0.0 ghc-7.4.1 如果您仍想安装，请使用--force-reinstalls。

我该如何解决这个问题？这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T13:32:31.407

### 为什么会这样？

如果您查看 的完整输出`cabal install darcsden`，您会发现几行如下所示：

```
binary-0.5.1.0 -bytestring-in-base (reinstall) changes: array-0.4.0.0 ->
0.3.0.3, containers-0.4.2.1 -> 0.4.1.0 
```

这意味着`cabal`找到了一个安装计划，该计划涉及（破坏性地）重新安装您系统上已有的软件包。

现在，GHC 包对它们的（自反）依赖项相当敏感，并且通常只有在所有依赖项的正确版本可用、针对其依赖项的正确版本进行编译等情况下才能工作。因此，用新版本的已更改依赖项替换已安装的包可能会导致系统上的某些包变得不可用。从 0.14.0 版本开始，`cabal`提前警告您此类情况，以防止您意外破坏系统。

在您的情况下，`ghc`并且`bin-package-db`是可能损坏的软件包之一，因为它们取决于`binary`重新安装的软件包。所以你不应该*尝试*使用这个`--force-reinstalls`标志，因为它可能真的会破坏你的 GHC。

### 你能做什么？

如果您扫描将要重新安装的内容，您会看到很多依赖项已降级。这暗示您尝试安装的软件包可能尚未正确更新到 GHC 7.4.1。

通常，您可以尝试调用`cabal install darcsden --avoid-reinstalls`以明确尝试查找没有重新安装的安装计划。不幸的是，在这种情况下，它失败了（对我来说）。

我已经简要查看了`darcsden`包描述，但看起来有很多依赖项`darcsden`需要更新。所以剩下的选择是：说服作者`darcsden`发布更新版本，或者`darcsden`使用旧版本的 GHC（例如 7.0.4）安装，这应该可以工作。

# android - TextView 宽度混淆

> ID：11163195
> 
> 赞同：1
> 
> 时间：2012-06-22T19:54:09.890
> 
> 标签：android, android-layout, textview

我正在使用 GridLayout 和 textviews 创建详细视图。我的 GridLayout 将有大约 6 行和 2 列。在我的第一行，我有两个文本视图。第一个（标语牌）有一个背景图像，我将文本居中放在它上面。我的图像大约 150 像素宽。第二个文本视图（材料）可以包含从一个单词到 20 个单词的任何内容。我希望文本换行（最多 5 行）。

我的问题是第二个文本视图（材料）中的文本正在离开屏幕。我尝试了许多不同的设置，试图让宽度调整但没有成功。这是我的 XML 布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<android.support.v7.widget.GridLayout 
    xmlns:grid="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:alignmentMode="alignBounds"
    android:background="@color/lemon"
    grid:columnCount="2"
    grid:rowCount="6" >    

    <TextView
        android:id="@+id/placard"
        grid:layout_gravity="right"
        grid:layout_column="0"
        grid:layout_row="0"
        android:padding="5sp"
        android:gravity="center"
        android:textColor="#000000"
        android:textSize="24sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/material"
        grid:layout_column="1"
        grid:layout_row="0"
        android:layout_gravity="center"
        android:layout_width="fill_parent"
        android:ellipsize="none"
        android:scrollHorizontally="false"
        android:padding="5sp"
        android:singleLine="false"
        android:maxLines="5"
        android:textColor="#0000ff"
        android:textSize="12sp"
        android:textStyle="bold" />
</android.support.v7.widget.GridLayout> 
```

任何建议，将不胜感激。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:41:32.620

我发现有一个链接解释了如何解决这个问题......基本上，当您使用 GridLayout 的支持版本时，您需要指定自己的命名空间。

[http://www.mentby.com/scott-olcott/gridlayout-text-clipping-using-support-library.html](http://www.mentby.com/scott-olcott/gridlayout-text-clipping-using-support-library.html)

# .net - 软件访问数据库的安全性？

> ID：11163197
> 
> 赞同：1
> 
> 时间：2012-06-22T19:54:12.350
> 
> 标签：.net, security

这个可以用webform或者winform问...

我有一个需要访问数据库的.net 程序（exe）。（通过互联网）

当然这个数据库需要密码和登录名。

访问 fiddler、reflector 等不会看到的 db 的最佳做法是什么？

我认为唯一的解决方案是使用 ssl + 加密连接字符串部分并在运行时解密它......

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:57:37.180

如果这是一个由攻击者运行的 .exe，那么他可以使用调试器来获取用户名/密码。如果此 .exe 在您信任的机器上运行，并且攻击者**只能存在于网络上，**那么 SSL 是完美的。

深度防御方法是，除非必须，否则不应信任应用程序的任何部分。当攻击者入侵您的应用程序时，他将使用您的应用程序的功能来对付您。

应该如何做到这一点是创建一个 API，例如 RESTful 或 SOAP API 来访问数据存储。像 SQL 注入这样的漏洞总是一个严重的问题，但是给攻击者一个原始的数据库连接就更糟了。

# jquery - 如何将 id 变量添加到 jquery 可拖动项？

> ID：11163199
> 
> 赞同：1
> 
> 时间：2012-06-22T19:54:30.050
> 
> 标签：jquery, jquery-ui

我想我会将工作解决方案放在这里，供对代码示例感兴趣的其他人使用。

每个可拖动项目都将其 id 设置为项目 id。这是可拖动项目的源视图：

```
<div id="item">
    <ul>
         <li class="list_none" id="15">
               Black phone
         </li>
    </ul>
</div> 
```

这是使它“可拖动”的 jQuery 脚本。我已经更新它以反映 dmck 的输入：

```
$( "#item li" ).each(function(index, value) {
    $this = $(value);
    var drag_id = $this.attr("id");
    $this.draggable({
            appendTo: "body",
            helper: "clone"
    }).data("drag_id", drag_id)
}); 
```

将 drag_id 值传递给 droppable 是一个问题，但它现在可以工作了。

```
$( "#group ul" ).droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    accept: ":not(.ui-sortable-helper)",
    drop: function( event, ui ) {
        // alert(ui.draggable.data("drag_id")); // left this alert in for other tinkerers
        $('input[name=user_id]').val(ui.draggable.data("drag_id"));
        $(this).closest('form').submit();
        return false;
        $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:47:56.263

使用 jQuery each 绑定每个元素：

```
$( "#item li" ).each(function(index, value) {

    $this = $(value);

    var itemid = $this.attr("id");

    $this.draggable({
            appendTo: "body",
            helper: "clone"
    }).data("itemid", itemid)
}); 
```

# java - 游戏窗口闪烁

> ID：11163201
> 
> 赞同：1
> 
> 时间：2012-06-22T19:54:33.713
> 
> 标签：java, graphics, slick2d

每隔几秒钟，我正在玩游戏的窗口就会短暂消失，然后重新出现。我在 Windows 7 上使用最新版本的 Slick（Java 游戏库）。这是我正在使用的代码：

```
package Main;
import org.newdawn.slick.*;
public class Main extends BasicGame{

    public Main() {
        super("Flashing window issue");
    }

    @Override
    public void init(GameContainer gc) throws SlickException {
    }

    @Override
    public void update(GameContainer gc, int delta) throws SlickException {
    }

    @Override
    public void render(GameContainer gc, Graphics g) throws SlickException {
    }

    public static void main(String[] args) throws SlickException {
         AppGameContainer app = new AppGameContainer(new Main());
         app.setDisplayMode(800, 600, false);
         app.start();

    }
} 
```

我该如何解决这个问题？

* * *

目前进展：

更新：尚未找到解决方案，但在全屏模式下玩游戏可以消除闪烁。也许这将导致一个解决方案......

更新 2：监控任务管理器显示，当游戏闪烁时，其在任务管理器中的状态为“无响应”。

更新3：似乎只在鼠标离开游戏区域时发生（无论游戏窗口是否失去焦点）。

更新 4 - 当前解决方法：

```
app.setMouseGrabbed(true); // force the mouse to stay in the game area 
```

然后在更新（...）中：

```
// exit when escape is pressed:
if (gc.getInput().isKeyDown(Input.KEY_ESCAPE)) {
       gc.exit();
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:57:35.490

我不熟悉 slick2d 但它有双缓冲的概念吗？如果您闪烁，那将是您想要打开的东西。

# algorithm - 测试多级网格中的相邻单元格

> ID：11163202
> 
> 赞同：0
> 
> 时间：2012-06-22T19:54:40.203
> 
> 标签：algorithm, data-structures, recursion, gis

我正在设计一种算法来测试网格上的单元格是否相邻。问题是单元格不在平面网格上。它们位于多级网格上，如下图所示。

```
Level 1 (Top Level)
| - - - - - |
| A | B | C |
| - - - - - |
| D | E | F |
| - - - - - |
| G | H | I |
| - - - - - |

Level 2
| -Block A- | -Block B- |
| 1 | 2 | 3 | 1 | 2 | 3 |
| - - - - - | - - - - - |
| 4 | 5 | 6 | 4 | 5 | 6 |   ...
| - - - - - | - - - - - |
| 7 | 8 | 9 | 7 | 8 | 9 |
| - - - - - | - - - - - |
| -Block D- | -Block E- |
| 1 | 2 | 3 | 1 | 2 | 3 |
| - - - - - | - - - - - |
| 4 | 5 | 6 | 4 | 5 | 6 |   ...
| - - - - - | - - - - - |
| 7 | 8 | 9 | 7 | 8 | 9 |
| - - - - - | - - - - - |
      .           .
      .           .
      .           . 
```

该图是根据我的实际需要简化的，但概念是相同的。有一个顶层块，其中包含许多单元格（第 1 层）。每个块进一步细分为更多单元（第 2 级）。对于我的项目，这些单元格进一步细分为 3、4 和 5 级，但对于这个问题，我们只坚持两个级别。

我正在以“A8、A9、B7、D3”的形式接收我的函数的输入。这是一个单元格 ID 列表，其中每个单元格 ID 的格式为 (level 1 id)(level 2 id)。

让我们首先比较 2 个单元格，A8 和 A9。这很容易，因为它们在同一个街区。

```
private static RelativePosition getRelativePositionInTheSameBlock(String v1, String v2) {
    RelativePosition relativePosition;

    if( v1-v2 == -1 ) {
        relativePosition = RelativePosition.LEFT_OF;
    }
    else if (v1-v2 == 1) {
        relativePosition = RelativePosition.RIGHT_OF;
    }
    else if (v1-v2 == -BLOCK_WIDTH) {
        relativePosition = RelativePosition.TOP_OF;
    }
    else if (v1-v2 == BLOCK_WIDTH) {
        relativePosition = RelativePosition.BOTTOM_OF;
    }
    else {
        relativePosition = RelativePosition.NOT_ADJACENT;
    }
    return relativePosition;
} 
```

可以通过检查 A 是否为 BLOCK_WIDTH 的倍数以及 B 是否为 (A-BLOCK_WIDTH+1) 来进行 A9 - B7 比较。或者只是简单地检查 A/B 对是 3-1、6-4 还是 9-7 以获得更好的可读性。

对于 B7 - D3，它们不相邻，但 D3 与 A9 相邻，因此我可以进行与上述类似的邻接测试。

因此，远离小细节，着眼于大局。这真的是最好的方法吗？请记住以下几点：

*   我实际上有 5 个级别而不是 2 个级别，所以我可能会得到一个像“A8A1A、A8A1B、B1A2A、B1A2B”这样的列表。
*   添加一个新单元格进行比较仍然需要我比较它之前的所有其他单元格（似乎我可以为这一步做的最好的事情是 O(n)）
*   这些单元格并非都是 3x3 块，对于我的示例来说就是这样。它们可以是 MxN 块，对于不同的级别具有不同的 M 和 N。
*   在上面我当前的实现中，如果单元格在相同的块中，如果它们在单独的水平相邻块中，或者它们是否在单独的垂直相邻块中，我有单独的函数来检查相邻性。这意味着在为下面的图层调用其中一个函数之前，我必须知道当前级别的两个块的位置。

从必须在不同级别处理不同边缘情况的多个函数以及具有 5 级嵌套 if 语句的复杂性来判断。我想知道另一种设计是否更合适。也许是一个更递归的解决方案，使用其他数据结构，或者可能将整个多级网格映射到一个单级网格（我的快速计算给了我大约 700,000 多个原子单元 ID）。即使我走这条路，从多级映射到单级本身也是一项不平凡的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:09:34.053

计算并比较最低级别的绝对 x 和 y 坐标。

例如（假设`int index0`A 为 = 0，B 为 1，...且`index1`= 0...8）：

```
int x = (index0 % 3) * 3 + index1 % 3;
int y = (index0 / 3) * 3 + index1 / 3; 
```

一般来说，给定

```
int[] WIDTHS;   // cell width at level i  
int[] HEIGHTS;  // cell height at level i

// indices: cell index at each level, normalized to 0..WIDTH[i]*HEIGHT[i]-1
int getX (int[] indices) {
  int x = 0;
  for (int i = 0; i < indices.length; i++) {
     x = x * WIDTHS[i] + indices[i] % WIDTHS[i];
  }
  return x;
}

int getY (int[] indices) {
  int y = 0;
  for (int i = 0; i < indices.length; i++) {
     y = y * HEIGHTS[i] + indices[i] / WIDTHS[i];
  }
  return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:10:02.900

> *   我实际上有 5 个级别而不是 2 个级别，所以我可能会得到一个像“A8A1A、A8A1B、B1A2A、B1A2B”这样的列表。
> *   添加一个新单元格进行比较仍然需要我比较它之前的所有其他单元格（似乎我可以为这一步做的最好的事情是 O(n)）
> *   这些单元格并非都是 3x3 块，对于我的示例来说就是这样。它们可以是 MxN 块，对于不同的级别具有不同的 M 和 N。

我认为这些点没有问题：如果一个单元格在最高级别不相邻，那么我们可以在此处停止计算，并且我们不必计算较低级别的邻接。如果只有五个级别，那么您最多可以进行五个邻接计算，这应该没问题。

> *   在上面我当前的实现中，如果单元格在相同的块中，如果它们在单独的水平相邻块中，或者它们是否在单独的垂直相邻块中，我有单独的函数来检查相邻性。这意味着在为下面的图层调用其中一个函数之前，我必须知道当前级别的两个块的位置。

你应该尝试重写这个。应该只有两种方法：一种计算两个单元格是否相邻，另一种计算两个单元格在给定级别是否相邻：

*   `RelativePosition isAdjacent(String cell1, String cell2);`
*   `RelativePosition isAdjacentAtLevel(String cell1, String cell2, int level);`

该方法为每个级别`isAdjacent`调用该方法。`isAdjacentAtLevel`我不确定是否`cell1`或`cell2`总是包含所有级别的信息，但`isAdjacent`可以分析给定的单元格字符串并相应地调用适当的级别邻接检查。当两个单元格在特定级别不相邻时，不需要检查所有更深的级别。

该方法`isAdjacentAtLevel`应该做：查找给定级别的*M*和*N*，从给定级别中提取信息`cell1`并`cell2`执行邻接计算。每个级别的计算应该相同，因为每个级别本身具有相同的块结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T22:30:51.577

您可以使用空间填充曲线，例如 peano 曲线或 z morton 曲线。

# javascript - 如何在全屏模式下观看 HTML5 视频时捕获键盘事件？

> ID：11163203
> 
> 赞同：1
> 
> 时间：2012-06-22T19:54:44.243
> 
> 标签：javascript, html5-video, dom-events, fullscreen, keycode

我需要知道用户在全屏模式下观看 HTML5 视频时何时按下退出键。不幸的是，文档上配置的任何侦听器都不适用，因为当用户以全屏模式观看 HTML5 视频时，系统焦点在本机视频播放器而不是浏览器上。

另一种方法是监听焦点何时从本机视频播放器返回到浏览器，但我不确定如何捕捉它。

```
document.addEventListener('keydown', function (e) { console.log(e.keyCode); }, false); 
```

只要我在浏览器中，当我按下键时，上述成功登录到控制台。一旦 HTML5 视频进入全屏模式，浏览器显然不能再将关键代码记录到控制台。

我要做的是在退出全屏模式后从一个 UI 转换到另一个 UI。

**编辑**

Potunch 的答案作为一个起点很有用，这就是为什么我接受它作为答案，尽管有以下警告：

*   它仅适用于 Webkit 浏览器。:-)
*   正如最初定义的那样，它不起作用，因为每当事件触发时`video.webkitDisplayingFullscreen`。`true``resize`

我让这个工作 - 只在 Webkit 浏览器上 - 通过利用动画帧不断观察值的变化：

```
var onFrame, isVideoFullscreen;

onFrame = window.requestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function (fn) {
              setTimeout(fn, 1000 / 60);
          };

isVideoFullscreen = false;

function frame() {
    if (!isVideoFullscreen && video.webkitDisplayingFullscreen) {
        // entered fullscreen mode
        isVideoFullscreen = true;
    } else if (isVideoFullscreen && !video.webkitDisplayingFullscreen) {
        // exited fullscreen mode
        isVideoFullscreen = false;
    }
    onFrame(frame);
}
onFrame(frame); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:19:49.403

Ok I think I have a solution for you... I'm just going to assume you use jQuery for ease of writing this code.

I don't believe you'll be able to capture keyboard events while in Fullscreen mode... but you could do this to get notified when you enter or exit fullscreen mode.

```
var isVideoFullscreen = video.webkitDisplayingFullscreen;

$(window).bind("resize", function (e) {
    // check to see if your browser has exited fullscreen
    if (isVideoFullscreen != video.webkitDisplayingFullscreen) { // video fullscreen mode has changed
       isVideoFullscreen =  video.webkitDisplayingFullscreen;

       if (isVideoFullscreen) {
            // you have just ENTERED full screen video
       } else {
            // you have just EXITED full screen video
       }
    }
}); 
```

Hope this helps or points you in the right direction

# java - 使用 Selenium2 选择具有特定文本的表中的行的正确 Xpath 出现问题

> ID：11163207
> 
> 赞同：0
> 
> 时间：2012-06-22T19:54:53.613
> 
> 标签：java, xpath, selenium-webdriver, html-table

这是我的表结构：

```
<form id="tableSection" enctype="application/x-www-form-urlencoded" action="/c4i-web-ABCDE/secured/user/users.xhtml" method="post" name="tableSection">
   <input type="hidden" value="tableSection" name="tableSection">
 <div class="clearfix">
 <div id="tableSection:dataTableWrapped" class="ui-datatable ui-widget has-3-cols c4i-ui-dataTable ui-datatable-resizable">
     <table role="grid">
         <thead>
         <tfoot>
         <tbody id="tableSection:dataTableWrapped_data" class="ui-datatable-data ui-widget-content">
              <tr class="ui-widget-content ui-datatable-even" aria-selected="false" role="row" data-rk="7c6c1565-4e8a-456a-8d89-30e2c93be5c3" data-ri="0" style="cursor: pointer;">
                  <td class="ac" role="gridcell" style="width: 350px;">
                       <div class="ui-dt-c">happy</div> 
```

我已经尝试了以下两种 Xpath：

```
"//div[@id='tableSection:dataTableWrapped']/tr[td//text()[contains(., 'happy')]]"

"//form[@id='tableSection']/div[@class*='ui-datatable']//td[text()='happy']" 
```

两者都在 Selenium2 中返回 Stale Element 错误：

org.openqa.selenium.StaleElementReferenceException：在缓存中找不到元素 - 页面可能在查找后已更改

找到该行后，我只是启动一个简单的 .click() 命令来选择它。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:56:29.477

试试这个，虽然它是一个非常松散、低效的表达式：

```
//form[@id='tableSection']/div[contains(@class, 'ui-datatable')]//td[contains(descendant::*/text(), 'happy') or contains(text(), 'happy'] 
```

[在此处](http://www.xmlplayground.com/q5E0BF)通过 XSLT 运行的示例。

# c++ - 超出范围后，堆栈分配的对象仍在占用内存？

> ID：11163212
> 
> 赞同：2
> 
> 时间：2012-06-22T19:54:58.340
> 
> 标签：c++, scope, destructor

人们总是谈论没有`new`关键字创建的对象在超出范围时如何被销毁，但是当我想到这一点时，似乎这是错误的。也许当变量超出范围时会调用析构函数，但是我们怎么知道它不再占用堆栈中的空间呢？例如，考虑以下情况：

```
void DoSomething()
{
  {
    My_Object obj;
    obj.DoSomethingElse();
  }
  AnotherFuncCall();
} 
```

执行时是否保证`obj`不会存入栈`AnotherFuncCall`？因为人们总是在说它，所以他们说的话一定有一些道理，所以我假设在`obj`超出范围时必须调用析构函数，before `AnotherFuncCall`。这是一个公平的假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:03:25.863

你混淆了两个不同的概念。

是的，当您的对象离开其封闭范围时，将调用它的析构函数。这是由标准保证的。

不，不能保证该语言的实现使用堆栈来实现自动存储（即您所说的“堆栈分配的对象”。）

由于大多数编译器使用固定大小的堆栈，我什至不确定您的问题是什么。它通常被实现为一个固定大小的内存区域，其中只需移动指针即可“清理”堆栈，因为该内存将很快再次使用。

因此，由于用于实现堆栈的内存区域的大小是固定的，因此无需将对象占用的内存设置为 0 或其他值。它可以在那里生活直到再次需要它，不会造成任何伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:10:28.817

在本地范围内“在堆栈上”创建的对象具有所谓的*自动存储持续时间*。该标准说：

## C++03 3.7.2 自动存储时长

> 1/ 明确声明为 auto 或 register 或未明确声明为 static 或 extern 的本地对象具有自动存储持续时间。这些对象的存储一直持续到创建它们的块退出。
> 
> 2/ [注意：这些对象按照 6.7 中的描述进行初始化和销毁​​。]

关于销毁这些对象：

## 6.7 声明声明

> 2/ 具有自动存储持续时间（3.7.2）的变量在每次执行声明语句时都会被初始化。在块中声明的具有自动存储持续时间的变量在退出块时被销毁（6.6）。

因此，根据标准，当具有本地范围的对象超出范围时，将调用析构函数并释放存储空间。

天气与否，标准没有说存储是否在堆栈上。它只是说存储被释放，无论它在哪里。

某些架构没有 PC 所具有的堆栈。C++ 旨在用于任何类型的可编程设备。这就是为什么它从不提及堆栈、堆等的任何内容。

在运行 Windows 和用户模式代码的典型 PC 类型平台上，这些自动变量存储在堆栈中。这些堆栈是固定大小的，并在线程启动时创建。当它们被实例化时，它们会占用堆栈上的更多空间，并且堆栈指针会移动。如果你分配了足够多的这些变量，你会溢出堆栈，你的程序会死得很惨。

尝试在 Windows PC 上运行它，看看会发生什么，例如：

```
int main()
{
    int boom[10000000];
    for( int* it = &boom[0]; it != &boom[sizeof(boom)/sizeof(boom[0])]; ++it )
        *it = 42;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:05:01.853

> 因为人们总是在说它，所以他们所说的肯定有一些道理，所以我假设必须在 obj 超出范围时调用析构函数，然后再调用 AnotherFuncCall。这是一个公平的假设吗？

这是对的。请注意，最后一个问题没有说明堆栈”。实现是否使用堆栈或其他东西取决于实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T20:07:03.857

人们所说的确实是真的。该对象**仍保留在内存位置**。但是，堆栈的工作方式意味着对象不会**从**堆栈中占用任何内存空间。

在堆栈上分配内存时**通常**发生的情况是堆栈*指针**递减*，`sizeof(type)`当变量超出范围并释放对象时，堆栈*指针**递增*，从而**缩小**分配在堆栈上的数据的有效*大小。*事实上，数据*仍然*存在于它的原始地址中，它根本**没有**被破坏或*删除*。

澄清一下，C++ 标准**对此一无所知**！C++ 标准完全不知道在内存分配方面称为堆栈或堆的任何东西，因为它们是**特定于平台的** *实现细节*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T19:59:19.213

我相信这取决于在堆栈中创建对象的位置。如果它在底部（假设堆栈向下增长），那么我认为第二个函数可能会覆盖被破坏的对象空间。如果对象在堆栈内，则可能浪费了该空间，因为必须移动所有其他对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T20:02:29.623

您的堆栈不是动态分配和释放的，它就在那里。您的对象构造函数和析构函数将被调用，但您不会取回内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T20:05:06.770

堆栈上的局部变量不会占用额外的内存。系统从每个线程的堆栈中提供一些内存，堆栈上的变量只使用其中的一部分。超出范围后，编译器可以将堆栈的同一部分重用于其他变量（稍后在同一函数中使用）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-22T20:15:05.557

```
how do we know that it is no longer taking up space in the stack? 
```

我们没有。有办法查看他们是否这样做，但这些是架构和 ABI 特定的。通常，当函数将控制权返回给调用者时，它们会弹出它们压入堆栈的任何内容。C/C++ 保证的是，当高级对象离开作用域时，它将调用它们的析构函数（尽管一些像 MSVC 6 这样的旧 C++ 在它们没有的时候有可怕的错误）。

```
Is it guaranteed that obj will not be saved on the stack when AnotherFuncCall is executed? 
```

不，只要符合 ABI 要求，由编译器决定何时以及如何推送和弹出堆栈帧。

# java - 使用对 Android 应用程序的一个 http 请求从 Web 源中检索多张图像

> ID：11163216
> 
> 赞同：3
> 
> 时间：2012-06-22T19:55:09.870
> 
> 标签：java, android

我正在尝试构建一个 android 应用程序，在该应用程序中我有一个列表视图，我想在其中包含缩略图。图像存储在服务器上，它们都在同一个文件夹中（例如[http:// myserverlocation.com/images/dining/myImage1.jpg,myImage2.jpg](http://myserverlocation.com/images/dining/myImage1.jpg,myImage2.jpg)， ETC）。我想知道的是，是否有一种简单的方法可以使用一个 http 请求或连接来获取所有图像（大约 25 个）。我要避免的是发出 25 个 http 请求，每个图像一个，以获取所有缩略图。我对 AsyncTask 和 BitMap 很熟悉，但我在这个站点（或互联网）上没有看到任何关于一次调用获取多个图像的内容。我希望这里有人能回答我，这是否可能。我愿意接受任何关于如何在不使用所有手机资源和/或内存的情况下完成这项任务的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:58:49.620

如果您正在控制 Web 服务，我强烈建议您存储一个 zip 文件并检索它。我相信Android喜欢玩bzip，但这可能是错误的。无论哪种方式，我都记得在 Android Dev 网站上阅读过或观看过 Google IO 演讲，他们建议在发布之前将其压缩。

# git - 设置 Git 以获取所有远程分支

> ID：11163219
> 
> 赞同：9
> 
> 时间：2012-06-22T19:55:22.743
> 
> 标签：git

我以某种方式最终在 [remote] 部分中使用了以下内容的 git 配置：

```
fetch = +refs/heads/master:refs/remotes/origin/master 
```

这当然意味着我永远不会看到我的合作者添加的分支。我意识到我需要将其更改为：

```
fetch = +refs/heads/*:refs/remotes/origin/* 
```

但我很困惑为什么我的配置首先会以这种方式结束，更重要的是，我如何才能避免它再次发生。知道如何设置一个回购，这样它就不会这样做吗？

谢谢，cf

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:05:48.430

听起来你用过`git remote add -t master origin url/to/origin/.git`。该`-t master`开关会覆盖`fetch`refspec 以仅获取该一个分支。如果您跳过，`-t master`那么您将获得预期的 glob refspec。

# android - Android 中的两行 ListView 强制关闭

> ID：11163226
> 
> 赞同：2
> 
> 时间：2012-06-22T19:55:37.123
> 
> 标签：android, listview

我正在尝试在每个 1 个列表项中创建一个包含 2 个项目的 ListView，但它似乎不起作用，它强制关闭，请帮忙？

这是课程

```
 package egypt.interfaceAct;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import egypt.database.EgyptDataSource;
import egypt.database.MySQLiteHelper;
import egypt.database.TouringPrograms;
import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class ProgramsList2 extends Activity{

    EgyptDataSource datasource;
    MySQLiteHelper sqlHelper;
    //ArrayAdapter<TouringPrograms> touringProgramAdapter;
    final String ACTIVITY_KEY = "activity";
    final String TIME_KEY = "time";
    ListView list;
    ArrayList<Map<String, String>> al;
    Map<String, String> map;
    SimpleAdapter sa;
    String[] from = {ACTIVITY_KEY, TIME_KEY};
    int[] to = {R.id.tableTextID, R.id.tableText2ID};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.programsmain);
        datasource = new EgyptDataSource(this);
        datasource.open();
        list = (ListView) findViewById(R.id.programsMainList);
        al = new ArrayList<Map<String,String>>();
        Bundle programNum = getIntent().getExtras();
        final String progNum = programNum.getString("ProgNum");
        final String dayNum = programNum.getString("DayNum");

        List<TouringPrograms> Activityvalues = datasource.getTouringPrograms(progNum, dayNum);
        List<TouringPrograms> Timevalues = datasource.getTouringProgramsStartTime(progNum, dayNum);
        Object[] ActivityArray = Activityvalues.toArray();
        Object[] TimeArray = Timevalues.toArray();
        for (int i = 0; i < Activityvalues.size(); i++) {
            map = new HashMap<String, String>();
            map.put(ACTIVITY_KEY, ActivityArray[i].toString());
            map.put(TIME_KEY, TimeArray[i].toString());
            al.add(map);
        }

        sa = new SimpleAdapter(this, al, R.layout.programstable, from, to);
        list.setAdapter(sa);

    }
} 
```

这是其中只有 ListView 的主要布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <ListView android:id="@+id/programsMainList" 
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent">

        </ListView>
</LinearLayout> 
```

这是解释 ListView 中每个项目的表格布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<TableRow>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableTextID"
        />

</TableRow>

<TableRow>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableText2ID"
        />

</TableRow>

</LinearLayout> 
```

有人可以帮帮我吗！我不知道出了什么问题，我一遍又一遍地搜索，我无法弄清楚出了什么问题！

这是 LogCat

```
06-22 22:57:42.192: E/AndroidRuntime(306): FATAL EXCEPTION: main
06-22 22:57:42.192: E/AndroidRuntime(306): java.lang.RuntimeException: Binary XML file line #7: You must supply a layout_width attribute.
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:3592)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3672)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout$LayoutParams.<init>(LinearLayout.java:1395)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:1321)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:45)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:620)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.SimpleAdapter.createViewFromResource(SimpleAdapter.java:121)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.SimpleAdapter.getView(SimpleAdapter.java:114)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.ListView.makeAndAddView(ListView.java:1727)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.ListView.fillDown(ListView.java:652)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.ListView.fillFromTop(ListView.java:709)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.ListView.layoutChildren(ListView.java:1580)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.AbsListView.onLayout(AbsListView.java:1147)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.View.layout(View.java:7035)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.View.layout(View.java:7035)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.View.layout(View.java:7035)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.View.layout(View.java:7035)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.View.layout(View.java:7035)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.os.Looper.loop(Looper.java:123)
06-22 22:57:42.192: E/AndroidRuntime(306):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-22 22:57:42.192: E/AndroidRuntime(306):  at java.lang.reflect.Method.invokeNative(Native Method)
06-22 22:57:42.192: E/AndroidRuntime(306):  at java.lang.reflect.Method.invoke(Method.java:521)
06-22 22:57:42.192: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-22 22:57:42.192: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-22 22:57:42.192: E/AndroidRuntime(306):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:02:04.517

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableTextID"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableText2ID"
        />

</LinearLayout> 
```

如果您正在创建列表视图，则不需要表格标签。这是我使用的一个很棒的教程，它对我的​​列表视图有所帮助。它有图片和文字，但我相信你可以自己制作：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:59:24.733

您正在尝试在 LinearLayout 中使用 TableRows 并且没有为 TableRows 指定高度或宽度，也许如果您将 XML 更改为：

```
<TableLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    ... >

    <TableRow 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ... >

    </TableRow>
</TableLayout> 
```

但这对于两行列表项来说似乎有点过头了，你见过内置的[TwoLineListItem](http://developer.android.com/reference/android/widget/TwoLineListItem.html)吗？

**评论中的补充**

> 如果我希望项目中的第二行有两个相邻的文本视图，你知道该怎么做吗？

如果我理解您的问题，您希望每一行看起来像这样：

```
-----
text1
text2   text3
-----
text1
text2   text3
----- 
```

然后使用 TableLayout 您可以尝试：

```
<TableLayout ... >
    <TableRow ... >
        <TextView android:id="@+id/text1" .../>
    </TableRow>

    <TableRow ... >
        <TextView android:id="@+id/text2" .../>
        <TextView android:id="@+id/text3" .../>
    </TableRow>

</TableLayout> 
```

# grails - Twitter模态定位

> ID：11163236
> 
> 赞同：1
> 
> 时间：2012-06-22T19:56:41.250
> 
> 标签：grails, twitter, twitter-bootstrap

所以我正在为 Grails 使用 Twitter Bootstrap 插件，但我无法将模态居中。当我从包含模态的 div 中删除 class="modal" 部分时，我的居中功能正常工作，但是当我把它放回去时（这是它具有模态功能所必需的，它会卡在页面中间）。任何帮助都会非常好：D这是我的代码：

```
<a style="position: relative; top: 2px;" data-toggle="modal" href="#myModal${instanceType.id}"
         id="${instanceType.id}"> ${message} </a>
<div class="modal" style="background: black; overflow: hidden; top: 0px; left: 0px; display: none; border: 2px solid white; float: center; position: absolute"
        id="myModal${instanceType.id}">
                <div style="border:none" class="modal-header">

                <a style="color:white;" class="close" data-dismiss="modal">X</a>
        </div>
        <iframe id="iFrame" style="border: none;"width=800px height=675px src="${action}/${instanceType.id}">

        </iframe>
        <div class="modal-body" style="background: black;"></div>
        <div style="border:none; background: black;" class="modal-footer">
                <a "="#" class="btn" data-dismiss="modal">Close</a>
        </div>

</div>
<script>
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
    return this;
}
$(myModal${instanceType.id}).css({
    'width' : $(window).width()*.75,
    'height' : $(window).height()*.75
    })
$(myModal${instanceType.id}).center()

$('#modal-footer').append('<a href="#" class="btn btn-primary" data-dismiss="modal" onclick="submitFunction()">${saveName}</a>')
function submitFunction(){
        $("iFrame").contents().find("#submit").click()
}
function changePre(){
        $("iFrame").contents().find(".buttonNew").submit()
        alert('hi')
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:31:41.247

如果您使用默认模态样式，则模态将通过绝对定位居中。因此，当您自定义模态窗口并更改其大小时，您也应调整相关元素。就像 modal-body 和 modal header 以及 .modal 类。

并回答你的问题，如果我的问题是正确的，那就是你试图垂直定位你的模态。

打开 bootstrap.css ，然后找到并编辑 .modal.fade.in

默认值为 50%。试着玩它，直到你达到你想要的位置。增加它以将模态移动到底部，减少它，它会做相反的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T12:03:06.927

默认模态大小模态窗口位置屏幕的水平中心，一旦模态自定义（宽度改变），需要用脚本定位它。

示例脚本：

$('#myModal').modal({ background: true, keyboard: true }).css({ width: '800',// 自定义宽度 'margin-left': function () { return -($(this ).width() / 2); } });

# mysql - mysql分区与变量中的unix_timestamp

> ID：11163237
> 
> 赞同：5
> 
> 时间：2012-06-22T19:56:50.323
> 
> 标签：mysql, database-partitioning

鉴于这种 ：

```
delimiter //
create procedure setup()
begin
  declare d datetime;
  set d = rounddate(now());

  create table s_time (req_id int not null,
                       ser_id int not null,
                       hel_id int not null,
                       posted int unsigned not null,
                       completed int unsigned not null default 0
                      )
  partition by range (completed) (partition p0 values less than ( unix_timestamp(d) ),
                                  partition p1 values less than ( unix_timestamp(d + interval 1 day) )
                                 );
end// 
```

我得到：

`ERROR 1064 (42000) : Constant, random, or timezone-dependent expression in (sub)partitioning function are not allowed`

有没有办法让它工作，或者我必须使用硬编码字符串作为输入。即使用：`unix_timestamp('2012-07-07 00:00:00')`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:56:51.453

为了将解决方案保留在完整的 sql 中，这就是我发现的。

```
delimiter //
create procedure setup()
begin
  declare d, d2 int;
  set d = unix_timestamp();
  set d2 = unix_timestamp(now() + interval 1 day);

  create table s_time (req_id int not null,
                       ser_id int not null,
                       hel_id int not null,
                       posted int unsigned not null,
                       completed int unsigned not null default 0
                      );

  SET @stmt = concat('alter table s_time PARTITION BY RANGE (completed) (
                      partition p0 values less than (', d, '),
                      partition p1 values less than (', d2, '))');
  PREPARE pStmt FROM @stmt;
  EXECUTE pStmt;
  DEALLOCATE PREPARE pStmt;

end//
delimiter ;
call setup(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:00:55.230

这不起作用的原因不是很清楚，我怀疑文档或错误消息中存在错误。在我看来，您收到的错误是不恰当的。

根据[手册：](http://dev.mysql.com/doc/refman/5.5/en/partitioning-limitations.html)

> 分区表达式中不允许使用以下结构：
> 
> *   存储过程、存储函数、UDF 或插件。
> *   **声明的变量**或用户变量。

这解释了为什么您的表定义失败。

现在，如何摆脱你的变量？如果您尝试从分区定义中删除声明的变量：

```
CREATE TABLE s_time (
    completed INT UNSIGNED NOT NULL DEFAULT 0
)
PARTITION BY RANGE ( completed  ) (
    PARTITION p0 VALUES LESS THAN ( UNIX_TIMESTAMP() )
); 
```

你会得到同样的错误。但是，[MySQL手册](http://dev.mysql.com/doc/refman/5.5/en/partitioning-range.html)指出：

> 也可以在 VALUES LESS THAN 子句中使用表达式。但是，MySQL 必须能够**评估表达式的返回值作为 LESS THAN (<) 比较的一部分**。

根据这个定义，`UNIX_TIMESTAMP()`应该是一个有效的表达式。手册中的这句话至少可以说是不准确的。我很想知道其他人是否可以提供另一种理解。

现在，查看错误消息，如果您将`LESS THAN`子句视为“分区函数”的一部分，那么错误消息开始变得有意义：

> 错误 1064 (42000)：不允许在（子）分区函数*或 LESS THAN 子句*中使用常量、**随机**或时区相关表达式

 *通过“随机”，它们也意味着*non-deterministic*，该`UNIX_TIMESTAMP()`函数是根据定义的。

为了实现您想要做的事情，除了使用外部脚本生成合适的`ALTER TABLE`命令外，我没有看到其他解决方案。

1）创建您的初始表：

```
CREATE TABLE s_time (
    req_id INT NOT NULL,
    ser_id INT NOT NULL,
    hel_id INT NOT NULL,
    posted INT UNSIGNED NOT NULL,
    completed INT UNSIGNED NOT NULL DEFAULT 0
) PARTITION BY RANGE (completed) (
    PARTITION p0 VALUES LESS THAN (0),
    PARTITION p1 VALUES LESS THAN (1)
); 
```

2）[不时重组分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning-management-range-list.html)（例如使用PHP）：

```
<?php
    $query = 
        "ALTER TABLE s_time REORGANIZE PARTITION p0, p1 INTO (
            PARTITION p0 VALUES LESS THAN ($today),
            PARTITION p1 VALUES LESS THAN ($tomorrow)
        )"; 
```

请参阅[此处的概念证明](http://sqlfiddle.com/#!2/11f35)。*

# javascript - 当某些输入发生变化时触发 ajax 请求

> ID：11163238
> 
> 赞同：0
> 
> 时间：2012-06-22T19:56:54.830
> 
> 标签：javascript, jquery

我有以下输入：

```
 <input class="input-text" type="text" name="nombres" id="nombres" />
    <input class="input-text" type="text" name="apellidoP" id="apellidoP" />
    <input class="input-text" type="text" name="apellidoM" id="apellidoM" />
    <input class="input-text" type="text" name="nacimiento" id="nacimiento" /> 
```

我想在“nombres”和“nacimiento”输入发生变化且不为空，以及“apellidoP”或“apellidoM”也发生变化且不为空时发出 ajax 请求。

我怎么能用 jQuery 做到这一点？我想到的唯一解决方案是触发每个输入的“更改”事件并检查是否满足条件，您还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:00:26.847

如果您只对字段值的完整更改感兴趣，您可能需要查看 jQuery 的[模糊处理程序](http://api.jquery.com/blur/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:00:49.530

这通常是您将这样做的方式，检查更改事件中的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:00:48.077

你在谈论 javascript 事件。看看这个：[http ://www.w3schools.com/js/js_events.asp](http://www.w3schools.com/js/js_events.asp)

`checkEmail()`每当您更改某些内容时，都会执行以下操作。在做任何你想做的事情之前，只需检查函数中输入元素的文本值。

```
<input type="text" size="30" id="email" onchange="checkEmail()" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:04:26.590

```
$('#nombres').change(function(){
if($(this).val() !== '') {
//function to execute
}
}); 
```

同样适用于 apellidoP 和 apellidoM。

# svn - 是否有任何硬件 (ASIC) 公司使用 mercurial (hg)

> ID：11163239
> 
> 赞同：2
> 
> 时间：2012-06-22T19:56:58.470
> 
> 标签：svn, mercurial, hardware, cvs, asic

你知道有哪些大公司（最好是硬件）成功地使用了 mercurial 作为他们的版本控制系统（vcs.）

我有 svn/cvs/perforce 和一点 git 的经验。内部政治正在推动我们走向 cvs，尽管我觉得这是一个糟糕的选择：

我最喜欢 perforce 的原因：

1.  在硬件公司中经过实战考验。
2.  可以很好地处理大型二进制文件。
3.  处理大型项目非常好> 10G。
4.  非常明智地处理符号链接。
5.  提供原子签入。
6.  灵活的分支机制。
7.  合并工具似乎运作良好。
8.  用户永远不需要使用管理命令。

我不喜欢 CVS 的原因：

1.  不支持原子签入。
2.  数据库可能会损坏。
3.  可能需要管理员命令来修复用户错误。

我喜欢 CVS 的原因：

1.  战斗测试。
2.  大多数人至少对它有点熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:25:33.247

你是对的。CVS 是一个糟糕的选择。缺乏原子检查足以在我的书中取消它的资格。人们喜欢它，因为他们知道它，但他们不明白它有什么问题。

硬件公司和软件公司使用系统的唯一区别往往是 RTL 模块具有非常明确的接口并且通常由一个人拥有，因此开发非常分段。由于减少了对分支的需求，这实际上与集中式系统非常有效。开发人员不会过多地踩对方的脚趾。

我见过一家硬件公司尝试 Mercurial，结果一团糟。并不是说它是错误的工具，而是他们有 CVS 的心态并试图让它像 CVS 一样工作。[我在这里](https://stackoverflow.com/questions/1714074/tips-on-upgrading-cvs-to-git-hg/9981139#9981139)写了一个相当咆哮的帐户。

我个人认为 SVN 非常适合硬件开发，尤其是对于来自 CVS 的人。检查子树的能力也很有用。也就是说，我目前在一个尝试使用 SVN 建立“功能分支”工作流程的地方工作，并且合并有很多陷阱。他们正在考虑未来的 git/hg 。不过，他们是一家小型、进步的公司。

从 CVS 转移到 Mercurial 的公司最终选择了 Perforce。对他们来说，这完全是关于支持合同和责备某人。对于用户......好吧......我认为它向用户展示了一个非常复杂的前端。整个工作空间的概念只是矫枉过正，分支管理很痛苦。作为一个系统，它是有能力的，但需要做很多工作。

如果我要在另一家硬件公司部署 Mercurial，我会大量使用[子存储库](http://mercurial.selenic.com/wiki/Subrepository)。我这样做是为了从 subversion 中取回子树检出的有用部分，即 RTL 模块可以被检出并单独分支。它也给了我一个集成项目的概念，这将是我将所有子模块拉入的项目。这在某种程度上将 RTL 版本与 RTL 开发分离，并促进使用相同模块的不同芯片。此外，通过保持模块分离，历史记录也保持隔离，从而更容易跟踪模块的更改。最后，它避免了我在另一个答案中描述的“数百名开发人员访问一个中央仓库并进入合并竞赛”的问题。

# ios - iOS 中是否有可用的垃圾收集器概念？

> ID：11163245
> 
> 赞同：0
> 
> 时间：2012-06-22T19:57:18.223
> 
> 标签：ios, memory-management, garbage-collection

iOS 中是否有可用的垃圾收集器概念？如果有，请指导我们如何以及是否推荐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:02:08.477

iOS 下没有垃圾收集器。相反，只需使用自动引用计数 (ARC)。ARC 将为您处理大部分内存管理，而无需垃圾收集器的运行时开销。

请注意，尽管 MacOS X 确实支持垃圾回收，但[在 MacOS X 10.8 中将弃用 GC 以支持 ARC](http://cocoaheads.tumblr.com/post/17719985728/10-8-objective-c-enhancements)。所以 ARC 现在是桌面上的首选解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:09:09.193

您需要什么指导？您是在问是否有办法显式调用垃圾收集器？因为据我所知 iOS 没有垃圾收集（查看 ARC 自动引用计数）。即使在使用像 java 这样的语言确实有 GC 时，用户也不能调用 GC，我们只能请求 GC 并且系统会提供帮助，但我们不知道垃圾收集何时会发生。

垃圾收集通常是由系统调用而不是由用户调用的进程，因为这个垃圾收集“线程”（通常称为守护线程，因为它具有最低优先级）是系统需要时调用的，因此它可能会被多次调用在应用程序的生命周期中，如果它存在于 iOS 中，它将导致 iphone 的电池寿命非常糟糕，因为 GC 会消耗电池寿命，因此我们在使用 iOS 应用程序时使用 alloc 和 release 命令。

# javascript - 如何始终更改名称的可排序项目

> ID：11163246
> 
> 赞同：0
> 
> 时间：2012-06-22T19:57:26.413
> 
> 标签：javascript, jquery, jquery-ui

我有一个从 JSON 文件加载的*可排序*文件。

现在我想编辑一个项目，例如小鸟。

如何改变这个？

*可排序*的 HTML 代码：

```
<div id="sortparam">

<ul style="" class="ui-sortable" id="sortable">
    <li style="" id="1" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Singular sensation</li>
    <li style="" id="2" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Beady little eyes</li>
    <li style="" id="3" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Little birds </li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:53:37.870

您可以使用`contenteditable`- [http://jsfiddle.net/Jv5Zq/](http://jsfiddle.net/Jv5Zq/)

点击*“小鸟”*，随意编辑

```
<div id="sortparam">

<ul style="" class="ui-sortable" id="sortable">
    <li style="" id="1" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Singular sensation</li>
    <li style="" id="2" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Beady little eyes</li>
    <li style="" id="3" class="ui-state-default" contenteditable> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Little birds </li>
</ul>

</div>​ 
```

# javascript - Javascript IMG 点击、滑动

> ID：11163254
> 
> 赞同：-3
> 
> 时间：2012-06-22T19:57:54.010
> 
> 标签：javascript, image, animation, onclick

我正在使用 HTML/CSS/Java 构建一个由 PhoneGap 包装为应用程序的应用程序，我认为我应该使用 JQuery。我有一张图片，我希望它“点击”向左移动，然后打开链接页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:03:03.587

也许是这样的：

```
$('IMG').click(slide_to_next);

function slide_to_next() {
    $(this).hide('slide', {direction: 'left'}, 1000);
    window.location.href = "http://yoursite.com/newpage";
} 
```

# xna - 我可以为 Windows Phone 应用程序禁用多点触控吗？

> ID：11163255
> 
> 赞同：1
> 
> 时间：2012-06-22T19:57:55.323
> 
> 标签：xna, windows-phone, cocos2d-x-for-xna

我目前正在使用 Cocos2d 的 XNA 版本为 Windows Phone 7 开发游戏。由于游戏规则，我需要它以便用户一次只能触摸一件事，但多点触控似乎总是有效的。此外，我不知道这是否是 Cocos 错误，但它也会导致游戏行为异常（像多次触摸一样响应单次触摸）。

我想我必须一个一个地纠正游戏的每个触摸事件，但我想知道是否可以使用一些东西快速禁用多点触控，或者将接受的触摸次数减少到一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:09:57.037

我不确定用于 XNA 的 Cocos2d-x。但在常规 XNA 中，如果您只想强制单点触摸输入，最简单的方法是使用`Mouse`类。在触摸环境中它仍然可用 - 通过使用触摸来模拟。它一次只响应一次触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:42:07.333

每一帧你都可以获得触摸列表。由于他们的管理权委托给您的代码，因此如果您有多个代码，请忽略它们。另一种选择是只使用第一个，记住它的 TouchID 并忽略所有其余的。将鼠标应用程序移植到手机时，我使用了第一个选项。

Cocos 触摸输入必须在游戏中的某个地方以可访问的代码处理，因此您应该可以访问它们的入口点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T19:02:36.517

是的，你可以用 Cocos2D-XNA 做到这一点。您将 TouchMode 设置为 OneByOne 或 AllAtOnce。OneByOne 将为您提供单个 CCTouch 签名方法，而 AllAtOnce 将为您提供 List 签名方法。

```
public MyCtor() {
  TouchEnabled = true;
  TouchMode = CCTouchMode.OneByOne;
}

public override bool TouchBegan(CCTouch t) {
}

public override void TouchMoved(CCTouch t) {
}

public override void TouchEnded(CCTouch t) {
} 
```

现在您一次只能触摸一次。但是，无法禁用触摸板对所有手指的所有触摸的传递。正如另一位用户提到的，您将忽略这些。

请记住，每次触摸都会获得一个触摸 ID，它可以将触摸数据与每个开始、移动和结束的事件调用相匹配。我建议您也使用触控 ID 来确保您只处理您想要的触控。

# php - 仅显示 wordpress 子类别

> ID：11163261
> 
> 赞同：2
> 
> 时间：2012-06-22T19:58:12.983
> 
> 标签：php, mysql, wordpress

我有 7 个类别（父母），每个类别都有 15 个子类别。

当我选择某个类别（父）时，我只想显示该特定父类别（父）的子类别（子）。

单击子类别（子类别）后，它应该只显示其帖子。

我有一个`fron_page.php`和`category.php`。

我怎样才能写这个来首先单独显示子类别，然后将该子类别分别发布到用户想要查看的新文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:12:40.760

此代码应该可以帮助您：

```
<ul> 
<?php 
 $cats = get_the_category();
 $mycat = $cats->cat_ID;
    wp_list_categories('orderby=id&child_of='.$mycat); 
?>
</ul> 
```

或者

```
<?php
if (is_category()) {
    $cat = get_query_var('cat');
    $this_category = get_category($cat);
    $this_category = wp_list_categories('hide_empty=0&hierarchical=true&orderby=id&show_count=0&title_li=&use_desc_for_title=1&child_of='.$this_category->cat_ID."&echo=0");
    if($this_category !='<li>No categories</li>')
    {
     echo '<ul>'.$this_category.'</ul>'; 
    }
}
?> 
```

请告诉我。

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:09:15.040

1) 仅显示子类别：

```
<?php
    // if the page visitor views is a category page
if (is_category())
{
$cur_cat = get_query_var('cat');
    if ($cur_cat) 
    {
        $new_cats = wp_list_categories('echo=false&child_of=' . $cur_cat . '&depth=1&title_li=&&show_count=1&hide_empty=0');
        echo '<ul>' . $new_cats . '</ul>';
    }
}
?> 
```

2) 显示所有热门类别：

```
<?php 
wp_list_categories('depth=1&title_li=&exclude=1&show_count=1&hide_empty=0');
?> 
```

3) 显示所有热门类别 + 子类别，如树形菜单：

```
Use plugin, called FoCal 
```

4）查看这个话题

```
http://wpworks.wordpress.com/2011/01/13/displaying-categories-and-subcategories-tree-on-wordpress/ 
```

# jquery - 可以使用 Jquery 和 HTML5 将来自用户计算机的图像存储在浏览器缓存中吗？

> ID：11163265
> 
> 赞同：0
> 
> 时间：2012-06-22T19:58:23.073
> 
> 标签：jquery, html

我想让用户预览他们的图像作为 div 背景的样子。我不想让他们将图像上传到我的服务器，而是将其存储在他们的本地缓存中并让 Jquery 获取路径并将背景图像替换为用户选择的图像......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:59:59.417

您可以将图像转换为[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，并在他们预览图像时使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:05:29.630

听起来像是 File API 的理想用例。文件 API 仅需要 [足够的] HTML5 支持。（也就是说，不是 jQuery。）您现在可以编写代码并在 Firefox 和 Chrome 中进行测试：

[http://www.caniuse.com/#feat=fileapi](http://www.caniuse.com/#feat=fileapi)

对于移动用户，还有 PhoneGap 和其他 3rd 方解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:06:35.793

不跨浏览器：

```
document.getElementById('uploader').onchange = function(){
    var file = document.getElementById('uploader').files[0];

    if (!file.type.match(/image.*/)) {
        // this file is not an image.
        alert('File type not supported');
        }
    else{
        var img = document.createElement("img");
        var reader = new FileReader();  
        reader.onload = function(e) {
            img.src = e.target.result;
            delete this;
            }
        img.onload = function(e) {
                //do your code
            }
        reader.readAsDataURL(file);
        }
    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T21:57:43.207

这是我使用 jQuery 和 HTML5 File API 拼凑起来的东西。在更改 input[type='file'] 时，它将尝试将图像加载为 img 标签的 src。File APi 本质上将本地文件转换为 DataURI，然后您可以将其作为 src 提供

[jsFiddle](http://jsfiddle.net/rkichenama/mjRQe/5/)

# php - Wordpress：根据另一个自定义字段的值替换自定义字段的值

> ID：11163267
> 
> 赞同：0
> 
> 时间：2012-06-22T19:58:38.500
> 
> 标签：php, mysql, wordpress, custom-fields

我正在为我的网站编写一个 wordpress 插件，它根据同一帖子下另一个自定义字段的值替换（或添加如果它为空）自定义字段的值。

示例：我将有一个带有逗号分隔值的列表，如下所示：

苹果，红香蕉，黄色猕猴桃，绿色等。

当我运行脚本时，它会找到一个带有 custom_field_fruit 的帖子，其中它的值为“apple”，并将 custom_field_color 的值更改为红色，当然，在同一个帖子中。然后，它将处理列表的第二行并找到一个带有 custom_field_fruit =banana 的帖子，并将更改 custom_field_color = yellow 等。

所以，我需要帮助来解决困难的部分。我认为这是比 Wordpress 甚至 PHP 问题更多的 mySQL 问题。我分配了两个变量 $VALUE1 和 $VALUE2（水果，颜色）。我是否完全使用 mySQL 查询来替换字段？

如果是这样，有人可以将其转换为 mySQL 查询吗？查找 custom_field_fruit 为 $VALUE1 的帖子，并将同一帖子下 custom_field_color 的值替换为 $VALUE2。

任何关于我如何做到这一点的想法都值得赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:11:03.367

我认为混合使用 PHP 和 SQL 会更好地解决这个问题。这是我的尝试。字典应该由其余的键值对填充：

```
$dict = ["apple" => "red",
         "banana" => "yellow"];

foreach ($dict as $fruit => $color)
    mysqli_query("UPDATE wp_posts 
                  SET custom_field_color = '$color' 
                  WHERE custom_field_fruit = '$fruit'"); 
```

您甚至可以批量处理，而不是逐行处理！

# c# - 来自单个查询的 Dapper 多个结果

> ID：11163268
> 
> 赞同：3
> 
> 时间：2012-06-22T19:58:45.323
> 
> 标签：c#, sql-server, dapper

嗨，我正在尝试掌握 Dapper。

我的情况是我想将查询中的两个值提取到两个单独的字符串中。我不确定我是否以正确的方式解决这个问题，但这就是我正在做的事情：

```
string sql = @"Select type, name 
              FROM ZipData 
              WHERE Zip = @zip";

using (var multi = conn.QueryMultiple(sql, new { zip = zip }))
{
   string result = multi.Read<string>().SingleOrDefault();         
} 
```

而且我越来越无法访问已处置的对象。对象名称：'GridReader'。当试图读取第二个字符串时。问题是它正确地获取了第一个值，并且在我试图获取的阅读器中都有两个字段。我确定我在滥用 api。

我在这里做错了什么？我用谷歌搜索，但可以找到一个具体的例子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T20:20:19.327

你误用了`QueryMultiple`. *这是为返回多个*结果集的复合 SQL 语句定义的。就像是：

```
SELECT Foo FROM MyTable;
SELECT Bar FROM MyOtherTable; 
```

另一方面，您试图从一个*结果集中获取两个不同的**列*，因此您应该只使用普通方法：*`Query`*

 *```
var result = conn.Query(sql, new { zip = zip }).Single();
var type = result.type;
var name = result.name; 
```

`Query`返回一个可枚举的（因为通常一个查询可以返回多行）。但是，您似乎只想要一行，因此我们`.Single`在最后调用以获取该行。从那里，返回类型是您可以简单地引用语句`dynamic`中列所隐含的属性：和.`SELECT``type``name`*

# xcode - 为 Xcode 构建阶段复制捆绑资源和复制文件有什么区别？

> ID：11163276
> 
> 赞同：23
> 
> 时间：2012-06-22T19:59:05.740
> 
> 标签：xcode, xcode4.2

`Copy Bundle Resources`有人可以解释Xcode 的阶段和阶段之间的区别`Copy Files`吗？我什么时候会使用“复制文件”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T20:59:59.533

`Copy Bundle Resources`阶段复制您希望在您的包 (.app) 中可用的文件。另一方面，`Copy Files`阶段将文件复制到您的应用程序可访问的其他（标准）位置（例如到 /Library/Fonts），您还可以选择仅在安装时复制它们。您还可以[在此处查看相关文档](https://help.apple.com/xcode/mac/10.2/#/dev50bab713d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-17T11:38:02.433

`Copy Files`- 将文件从项目复制到**外部**指定位置。

![](../Images/def83e4818e8c2e1f939b768b56b2d27.png) ![](../Images/e149343a57a44d2afe88eedb1865196a.png)

例如，当您创建一个`Static Library`应该公开`.modulemap`[^([About])](https://stackoverflow.com/a/57665560/4770877)或/和`umbrella.h`[^([About])](https://stackoverflow.com/a/57481319/4770877)文件的 Objective-C 时，它很有用

`Copy Bundle Resources`- 将支持您的源代码的文件复制到**内部**结构中。如果您想确保您添加的文件将被复制到应用程序包中

![](../Images/3392debf58ce87a0a0ec02e2e9f4f59a.png) ![](../Images/ae9b3faf7c7083c4135f5ea3753685f3.png)

`app`当您创建可以添加图像和其他资源的位置时，它很有用

[词汇](https://stackoverflow.com/a/59216151/4770877)

# iphone - ios应用第二屏

> ID：11163287
> 
> 赞同：0
> 
> 时间：2012-06-22T20:00:13.463
> 
> 标签：iphone, ios, ipad

我是 iOS 应用程序开发的初学者，正在开发一个仅包含两个“屏幕”的示例应用程序 - 第一个屏幕根据保存在 SQLite 数据库表中的用户 ID 和密码对用户进行身份验证，第二个屏幕显示用户列表如果用户身份验证成功，则数据库。如果身份验证失败，我只想向用户显示适当消息的警报。

如果用户身份验证成功，我以某种方式无法连接如何“转到第二个屏幕”。我如何告诉应用程序，现在用户已通过身份验证，是时候进入第二个屏幕并显示用户列表了？

如果我使用的术语不是标准的 iOS 应用程序开发术语，我深表歉意，但我是新手，想填补我理解上的空白。请随时将我引导至任何链接/教程/文档。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:15:44.247

导航是 iOS 编程和 UX 设计的基础和必不可少的部分。传统上，视图由[ViewControllers](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)管理，而 ViewControllers又可以由堆栈中的[NavigationControllers管理。](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)为了在控制器之间导航和远离控制器，我们定义了两个新动词：Push 和 Pop。要转到新视图，需要将其*推*送到导航堆栈上。要从视图过渡，需要将其从堆栈中*弹出。*因此，通过这两个范例，我们可以定义由 UINavigationController 对象管理的简单转换。在继续之前，请查看文档中的导航指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:30:52.857

您似乎对 iOS 基础知识没有足够的了解，因此我们的任何答案都无法提供帮助。一个忠告：在你有一点基础之前，不要浪费时间与代码搏斗；你只会变得沮丧。

花几个小时回顾一下[Paul Haggarty 的 Standford iOS 课程](http://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)中的一些视频。

一旦您了解了 API 的一些构建块和概念，事情就会进展得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:13:51.873

您是否使用 Storyboards 针对 iOS 进行开发？

如果您从带有 Storyboards 的 Xcode for iOS 5 中的样板“Master/Detail”模板开始，您将获得一些用于主视图（使用 UITableView）、详细视图（使用其中带有标签的 UIView）的示例代码，以及两个视图控制器之间的 segue 从主视图到细节，以及一个“返回”导航按钮，用于将细节视图弹出并返回到主视图。

该类型项目的 iPad 样板略有不同，因为它使用 UISplitViewController 同时显示主视图和细节，并且不使用两者之间的 segue。

您可以查看该样板代码，对其进行修改，然后从那里开始。

# cakephp - cakephp排序链接不起作用

> ID：11163288
> 
> 赞同：1
> 
> 时间：2012-06-22T20:00:20.473
> 
> 标签：cakephp, sorting, hyperlink

无法使排序链接起作用。（具体或虚拟领域）。

此操作中我的 sum() 字段的虚拟字段：

```
 $this->Qca->virtualFields['comps'] = 'Sum(CASE WHEN Qca.qca_tipcode = 1 THEN 1 END)';
    $this->Qca->virtualFields['production'] = 'Sum(qca_end - qca_start)';
    $this->Qca->virtualFields['idle'] = 'Sum(Qca.qca_durend)'; 
```

我的 find() 工作正常：

```
 $hoursvalues = $this->Qca->find('all', array('conditions' => $conditions,
        'fields' => array('Qca.dir_id', 'Qca.name', 'Sum(CASE WHEN Qca.qca_tipcode = 1 THEN 1 END) AS Qca__comps', 'Sum(qca_end - qca_start) as Qca__production', 'Sum(Qca.qca_durend) as Qca__idle'),
        'group' => array('Qca.dir_id')
            )
    ); 
```

接着：

```
 $this->paginate('Qca' );
   $this->set('hoursvalues', $hoursvalues); 
```

需要哪些额外设置`$this->paginate('Qca' );`？请注意，我通过 find() 获得了我需要的所有数据。

我错过了什么排序不适用于具体或虚拟字段？

非常感谢！

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:59:33.797

您的部分问题如下：

```
$this->paginate('Qca');
$this->set('hoursvalues', $hoursvalues); 
```

`$this->paginate()`返回具有排序值的数组。您需要做的是在`$this->paginate`数组中指定您的额外设置，然后

```
$this->set('hoursvalues', $this->paginate('Qca')); 
```

对于您的其他领域，制作它们`virtualFields`将使它们更易于使用。

# cmd - 如何在控制台中流畅地绘制我的简单 2D 游戏世界？

> ID：11163292
> 
> 赞同：0
> 
> 时间：2012-06-22T20:00:28.810
> 
> 标签：cmd, paint, smooth, 2d-games

我想在控制台（cmd）中渲染我的 2D semi_text-based 游戏场景作为我的帧输出......

我通过**打印**展示我的游戏世界的简单角色的 2D 数组来做到这一点。（如“-”和“|”）

但每一帧（= 每个循环）我想清除屏幕以重新绘制我的矩阵。现在我使用 system("cls") ...但它太慢了！这是我的渲染功能：

```
void Engine::engineRender()
{    
    system("cls");          
    // Render Background        
    for(int i=0; i<10 ; i++ )
    {       
        for ( int j=0 ; j<40 ; j++ )
        {           
            printf("%c",map[i][j]);             
            if((int)(player1->yPos)==i && (int)(player1->xPos)==j )
                printf("\b&");          

        }           
        printf("\n");           
    }
} 
```

我的主游戏循环是这样的：

```
 while(true)
    {
        _ftime(&cur);
        elapsMili += (cur.time - last.time)*1000 + (cur.millitm - last.millitm) ;

        if ( elapsMili >= 1000/frameRate ){
            elapsMili -= 1000/frameRate ;
            last=cur;
            needRender = true ;
        }
        engineUpdate();
        if (needRender){
            engineRender();
            needRender=false;
        }
    } 
```

任何想法有更平滑的渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:13:34.820

您可以尝试我为此目的制作[的一个小库（快速平滑的控制台渲染）。](https://bitbucket.org/alexknvl/windows-console-graphics)使用起来应该非常简单。它只适用于 Windows。

# c# - 使用 C# 和 UI 自动化来获取未知控件类型的内容

> ID：11163293
> 
> 赞同：4
> 
> 时间：2012-06-22T20:00:31.227
> 
> 标签：c#, automation, custom-controls

在下图中，有一个区域，其中有一个未知（自定义）类。那不是网格或表格。

![在此处输入图像描述](../Images/597b3a9f529167bb3ba22df2b5099b0a.png)

我需要能够：

*   选择此区域中的行
*   从每个单元格中获取一个值

问题是因为这不是一个常见的类型元素 - 我不知道如何用谷歌搜索这个问题或自己解决它。到目前为止，代码如下：

```
Process[] proc = Process.GetProcessesByName("programname");
AutomationElement window = AutomationElement.FromHandle(proc [0].MainWindowHandle);
PropertyCondition xEllist2 = new PropertyCondition(AutomationElement.ClassNameProperty, "CustomListClass", PropertyConditionFlags.IgnoreCase);
AutomationElement targetElement = window.FindFirst(TreeScope.Children, xEllist2); 
```

我已经尝试将这个区域作为一个文本框、一个网格、一个组合框来威胁，但到目前为止还没有解决我的问题。有人对如何从该区域获取数据并遍历行有任何建议吗？

**编辑：对不起，我做了一个错误的假设。**实际上，该区域的标题（第 1 列、第 2 列、第 3 列）和“下半部分”是*不同的控件类型*！

感谢 Wininspector，我能够挖掘有关这些控件类型的更多信息：

*   标头具有以下属性： HeaderControl 0x056407DC (90441692) Atom: #43288 0xFFFFFFFF (-1)
*   下半部分有这些： ListControl 0x056408A4 (90441892) Atom: #43288 0x02A6FDA0 (44498336)

我之前展示的代码 - 仅检索“列表”元素，所以这里是更新：

```
Process[] proc = Process.GetProcessesByName("programname");
AutomationElement window = AutomationElement.FromHandle(proc [0].MainWindowHandle);
//getting the header
PropertyCondition xEllist3 = new PropertyCondition(AutomationElement.ClassNameProperty, "CustomHeaderClass", PropertyConditionFlags.IgnoreCase);
AutomationElement headerEl = XElAE.FindFirst(TreeScope.Children, xEllist3);
//getting the list
PropertyCondition xEllist2 = new PropertyCondition(AutomationElement.ClassNameProperty, "CustomListClass", PropertyConditionFlags.IgnoreCase);
AutomationElement targetElement = window.FindFirst(TreeScope.Children, xEllist2); 
```

在进一步考虑之后，我尝试获取所有列名：

```
AutomationElementCollection headerLines = headerEl.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.HeaderItem));
string headertest = headerLines[0].GetCurrentPropertyValue(AutomationElement.NameProperty) as string;
textBox2.AppendText("Header 1: " + headertest + Environment.NewLine); 
```

不幸的是，在调试模式下，“headerLines”中的元素计数为 0，因此程序会引发错误。

**编辑 2：**感谢下面的答案 - 我安装了非托管 UI 自动化，它比默认 UIA 拥有更好的可能性。[http://uiacomwrapper.codeplex.com/](http://uiacomwrapper.codeplex.com/) 如何使用遗留模式从未知控件类型中获取数据？

```
if((bool)datagrid.GetCurrentPropertyValue(AutomationElementIdentifiers.IsLegacyIAccessiblePatternAvailableProperty))
{
var pattern = ((LegacyIAccessiblePattern)datagrid.GetCurrentPattern(LegacyIAccessiblePattern.Pattern));
var state = pattern.Current.State;
} 
```

**编辑 3.** IUIAutoamtion 方法（目前不工作）

```
 _automation = new CUIAutomation();
        cacheRequest = _automation.CreateCacheRequest();
        cacheRequest.AddPattern(UiaConstants.UIA_LegacyIAccessiblePatternId);
        cacheRequest.AddProperty(UiaConstants.UIA_LegacyIAccessibleNamePropertyId);
        cacheRequest.TreeFilter = _automation.ContentViewCondition;
        trueCondition = _automation.CreateTrueCondition();

        Process[] ps = Process.GetProcessesByName("program");
        IntPtr hwnd = ps[0].MainWindowHandle;
        IUIAutomationElement elementMailAppWindow = _automation.ElementFromHandle(hwnd);

        List<IntPtr> ls = new List<IntPtr>();

        ls = GetChildWindows(hwnd);

        foreach (var child in ls)
        {
            IUIAutomationElement iuiae = _automation.ElementFromHandle(child);
            if (iuiae.CurrentClassName == "CustomListClass")
            {
                var outerArayOfStuff = iuiae.FindAllBuildCache(interop.UIAutomationCore.TreeScope.TreeScope_Children, trueCondition, cacheRequest.Clone());
                var outerArayOfStuff2 = iuiae.FindAll(interop.UIAutomationCore.TreeScope.TreeScope_Children, trueCondition);

                var countOuter = outerArayOfStuff.Length;
                var countOuter2 = outerArayOfStuff2.Length;

                var uiAutomationElement = outerArayOfStuff.GetElement(0); // error
                var uiAutomationElement2 = outerArayOfStuff2.GetElement(0); // error
    //...
    //I've erased what's followed next because the code isn't working even now..
              }
        } 
```

由于这个问题，代码得以实现：

[使用 C# 从另一个应用程序的 SysListView32 中的数据网格中读取单元格项](https://stackoverflow.com/questions/10799757/read-cell-items-from-data-grid-in-syslistview32-of-another-application-using-c-s)

作为结果：

*   countOuter 和 countOuter2 长度 = 0
*   无法选择元素（列表中的行）
*   不可能获得任何价值
*   没有任何工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T22:46:40.397

您可能想尝试使用核心 UI 自动化类。它要求您导入 dll 以在 C# 中使用它。将此添加到您的预构建事件中（或只执行一次等）：

```
"%PROGRAMFILES%\Microsoft SDKs\Windows\v7.0A\bin\tlbimp.exe" %windir%\system32\UIAutomationCore.dll /out:..\interop.UIAutomationCore.dll" 
```

然后，您可以使用 IUIAutomationLegacyIAccessiblePattern。

从以下位置获取调用所需的常量：

C:\Program Files\Microsoft SDKs\Windows\v7.1\Include\UIAutomationClient.h

我可以通过这种方式阅读 Infragistics Ultragrids。

如果那太痛苦，请尝试使用 MSAA。在转换为所有 UIA 核心之前，我将此项目用作 MSAA 的起点： [MSSA 示例代码](http://www.codeproject.com/Articles/38906/UI-Automation-Using-Microsoft-Active-Accessibility)

----- 2012 年 6 月 25 日编辑 ------

我肯定会说找到正确的“标识符”是使用 MS UIAutomation 东西最痛苦的部分。对我帮助很大的是创建一个简单的表单应用程序，我可以将其用作“位置记录器”。本质上，您只需要两件事：

*   一种即使您离开表单窗口也能[保持焦点的方法](http://www.daniweb.com/software-development/csharp/threads/212456/keeping-a-form-focused-not-a-question)

*   使用鼠标所在位置的 x,y 坐标调用 ElementFromPoint()。在 CUIAutomation 类中有一个实现。

我使用 CTRL 按钮告诉我的应用程序抓取鼠标坐标 (System.Windows.Forms.Cursor.Position)。然后我从该点获取元素并递归获取元素的父元素，直到我到达桌面。

```
 var desktop = auto.GetRootElement();
        var walker = GetRawTreeWalker();
        while (true)
        {
            element = walker.GetParentElement(element);
            if (auto.CompareElements(desktop, element) == 1){ break;}
        } 
```

----- 2012 年 6 月 26 日编辑 -----

一旦您可以递归地找到自动化标识符和/或名称，您就可以在此处轻松修改代码：http: [//blog.functionalfun.net/2009/06/introduction-to-ui-automation-with.html](http://blog.functionalfun.net/2009/06/introduction-to-ui-automation-with.html)用于核心 UI 自动化类。这将允许您在递归时构建一个字符串，该字符串可用于识别嵌套在具有 XPath 样式语法的应用程序中的控件。

# c# - 另一个 SQL 参数 - UPDATE 语句

> ID：11163296
> 
> 赞同：0
> 
> 时间：2012-06-22T20:00:57.533
> 
> 标签：c#, sql, parameters

我不明白为什么我的更新声明实际上没有更新。这是我所拥有的：

```
 private void submit_button_Click(object sender, EventArgs e)
    {
        string insert = insertbox.Text;
        SqlParameter param2 = new SqlParameter("@param2", SqlDbType.Text);
        param2.Value = insert;
        var connlink = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\Program Files\\Microsoft SQL Server\\MSSQL.2\\MSSQL\\Data\\Inserts.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
        var cmd1 = new SqlCommand(@"SELECT qty_onhand FROM [insert] WHERE (Name LIKE @param2)", connlink);
        connlink.Open();
        cmd1.Parameters.Add(param2);
        var onhand = Convert.ToInt16(cmd1.ExecuteScalar());

    // The param2 in the statement passes fine and returns the value into "onhand".
    // Below, the parameters don't seem to be passed. There is no error but the record isn't updated.

        int new_onhand = Convert.ToInt16(qtybox1.Text);
        Convert.ToInt16(onhand);
        new_onhand = onhand - new_onhand;
        SqlParameter param1 = new SqlParameter("@param1", SqlDbType.SmallInt);
        param1.Value = new_onhand;
        SqlParameter param3 = new SqlParameter("@param3", SqlDbType.Text);
        param3.Value = param2.ToString();
        var cmd = new SqlCommand(@"UPDATE [insert] SET qty_onhand = @param1 WHERE (Name LIKE @param3)", connlink);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.Add(param1);
        cmd.Parameters.Add(param3);
        cmd.ExecuteNonQuery();
        connlink.Close();
    } 
```

我不确定为什么一个有效而另一个无效的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:16:19.177

`param3`您通过在 param2 上调用 ToString 来设置 的值：`param3.Value = param2.ToString();`

对 SqlParameter 调用 ToString 会返回参数名称。在我们的例子中，它以字符串的形式返回“@param2”，而不是它的值。尝试使用`param2.Value`.

还是真的要`insert`，既然你写了`param2.Value = insert;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:17:44.953

下面的行对我来说看起来不正确，因为 param2 的类型是 SqlParameter 并且您使用 param2.ToString() 作为 param3.value 的值

```
SqlParameter param3 = new SqlParameter("@param3", SqlDbType.Text);
    **param3.Value = param2.ToString();** 
```

# c# - C#中的数组如何部分实现IList ?

> ID：11163297
> 
> 赞同：104
> 
> 时间：2012-06-22T20:01:11.217
> 
> 标签：c#, .net, arrays, list, interface

因此，您可能知道，C# 中的数组实现`IList<T>`了其他接口。但不知何故，他们这样做并没有公开实现 ! 的 Count 属性`IList<T>`。数组只有一个 Length 属性。

这是 C#/.NET 打破其自己的接口实现规则的明目张胆的例子，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-22T21:13:25.507

> 如您所知，C# 中的数组实现`IList<T>`了其他接口

嗯，是的，呃不，不是真的。这是 .NET 4 框架中 Array 类的声明：

```
[Serializable, ComVisible(true)]
public abstract class Array : ICloneable, IList, ICollection, IEnumerable, 
                              IStructuralComparable, IStructuralEquatable
{
    // etc..
} 
```

它实现 System.Collections.IList，*而不是*System.Collections.Generic.IList<>。它不能， Array 不是通用的。通用 IEnumerable<> 和 ICollection<> 接口也是如此。

但是 CLR 动态创建具体的数组类型，因此它可以在技术上创建一个实现这些接口的类型。然而事实并非如此。试试这个代码，例如：

```
using System;
using System.Collections.Generic;

class Program {
    static void Main(string[] args) {
        var goodmap = typeof(Derived).GetInterfaceMap(typeof(IEnumerable<int>));
        var badmap = typeof(int[]).GetInterfaceMap(typeof(IEnumerable<int>));  // Kaboom
    }
}
abstract class Base { }
class Derived : Base, IEnumerable<int> {
    public IEnumerator<int> GetEnumerator() { return null; }
    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() { return GetEnumerator(); }
} 
```

对于具有“未找到接口”的具体数组类型，GetInterfaceMap() 调用失败。然而，对 IEnumerable<> 的强制转换没有问题。

这就像鸭子一样的嘎嘎打字。正是这种类型的类型产生了一种错觉，即每个值类型都派生自从 Object 派生的 ValueType。编译器和 CLR 都对数组类型有特殊的了解，就像它们对值类型一样。编译器看到您尝试转换为 IList<> 并说“好的，我知道该怎么做！”。并发出 castclass IL 指令。CLR 对此没有任何问题，它知道如何提供适用于底层数组对象的 IList<> 的实现。它具有其他隐藏的 System.SZArrayHelper 类的内置知识，该类是实际实现这些接口的包装器。

它不像每个人都声称的那样明确地做，你问的 Count 属性看起来像这样：

```
 internal int get_Count<T>() {
        //! Warning: "this" is an array, not an SZArrayHelper. See comments above
        //! or you may introduce a security hole!
        T[] _this = JitHelpers.UnsafeCast<T[]>(this);
        return _this.Length;
    } 
```

是的，您当然可以称该评论为“违反规则”:) 否则它非常方便。而且隐藏得非常好，您可以在 SSCLI20（CLR 的共享源代码分发版）中查看这一点。搜索“IList”以查看类型替换发生的位置。看到它的最佳位置是 clr/src/vm/array.cpp，GetActualImplementationForArrayGenericIListMethod() 方法。

与 CLR 中允许为 WinRT（又名 Metro）编写托管代码的语言投影中发生的情况相比，CLR 中的这种替换相当温和。几乎所有核心​​ .NET 类型都可以在那里被替换。IList<> 映射到 IVector<> 例如，一个完全非托管的类型。COM 本身是一个替代品，不支持泛型类型。

好吧，那是看看幕后发生的事情。生活在地图尽头的龙可能是非常不舒服、陌生和不熟悉的海洋。使地球变平并为托管代码中实际情况的不同图像建模可能非常有用。将它映射到每个人最喜欢的答案是很舒服的。这对于值类型来说效果不佳（不要改变结构！）但是这个隐藏得很好。GetInterfaceMap() 方法失败是我能想到的抽象中唯一的泄漏。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-06-22T20:04:31.720

**根据汉斯的答案的新答案**

感谢 Hans 给出的答案，我们可以看到实现比我们想象的要复杂一些。编译器和 CLR 都*非常努力*地给人一种数组类型实现的印象`IList<T>`——但是数组变化使这变得更加棘手。与 Hans 的回答相反，数组类型（一维，无论如何都是从零开始的）确实直接实现了泛型集合，因为任何特定数组的类型*都不是* `System.Array`——这只是数组的*基本*类型。如果你问一个数组类型它支持什么接口，它包括泛型类型：

```
foreach (var type in typeof(int[]).GetInterfaces())
{
    Console.WriteLine(type);
} 
```

输出：

```
System.ICloneable
System.Collections.IList
System.Collections.ICollection
System.Collections.IEnumerable
System.Collections.IStructuralComparable
System.Collections.IStructuralEquatable
System.Collections.Generic.IList`1[System.Int32]
System.Collections.Generic.ICollection`1[System.Int32]
System.Collections.Generic.IEnumerable`1[System.Int32] 
```

对于从零开始的一维数组，就*语言*而言，数组确实也实现`IList<T>`了。C# 规范的第 12.1.2 节是这样说的。所以无论底层实现做什么，语言都必须*表现得*好像`T[]`实现的类型`IList<T>`与任何其他接口一样。从这个角度来看，接口*是*通过一些显式实现的成员来实现的（例如`Count`）。*这是在语言*层面上对正在发生的事情的最佳解释。

请注意，这仅适用于一维数组（和从零开始的数组，而不是 C# 作为一种语言对非从零开始的数组有任何说明）。`T[,]` *没有*实现`IList<T>`。

从 CLR 的角度来看，正在发生一些更有趣的事情。您无法获取通用接口类型的接口映射。例如：

```
typeof(int[]).GetInterfaceMap(typeof(ICollection<int>)) 
```

给出以下例外：

```
Unhandled Exception: System.ArgumentException: Interface maps for generic
interfaces on arrays cannot be retrived. 
```

那么为什么会出现奇怪的现象呢？好吧，我相信这真的是由于数组协方差，这是类型系统中的一个缺陷，IMO。即使`IList<T>`不是协变的（并且*不能*安全），数组协变也允许它工作：

```
string[] strings = { "a", "b", "c" };
IList<object> objects = strings; 
```

...这使它*看起来*像`typeof(string[])`implements `IList<object>`，但实际上并非如此。

CLI 规范 (ECMA-335) 分区 1，第 8.7.1 节有：

> 签名类型 T 与签名类型 U 兼容当且仅当以下至少一项成立

...

> T 是一个从零开始的 rank-1 数组`V[]`，并且`U`是`IList<W>`，并且 V 是与 W 兼容的数组元素。

（它实际上并没有提到`ICollection<W>`或`IEnumerable<W>`我认为这是规范中的一个错误。）

对于非变异性，CLI 规范直接与语言规范一起使用。从分区 1 的第 8.9.1 节：

> 此外，创建的元素类型为 T 的向量实现了接口`System.Collections.Generic.IList<U>`，其中 U := T。（第 8.7 节）

（*向量*是一个基数为零的一维数组。）

现在就*实现细节*而言，显然 CLR 正在做一些时髦的映射以保持此处的赋值兼容性：当`string[]`要求 a 实现 时`ICollection<object>.Count`，它无法以*非常*正常的方式处理它。这算作显式接口实现吗？我认为以这种方式对待它是合理的，因为除非您直接要求接口映射，否则从语言的角度来看它总是以这种方式*运行。*

**怎么样`ICollection.Count`？**

到目前为止，我已经讨论了泛型接口，但还有非泛型`ICollection`及其`Count`属性。这次我们*可以*得到接口映射，实际上接口是直接实现的[`System.Array`](http://msdn.microsoft.com/en-us/library/system.array.aspx)。[`ICollection.Count`](http://msdn.microsoft.com/en-us/library/bb357392.aspx)属性实现的文档`Array`说明它是通过显式接口实现来实现的。

如果有人能想到这种显式接口实现与“普通”显式接口实现不同的方式，我很乐意进一步研究。

**关于显式接口实现的旧答案**

尽管上述情况由于数组知识而变得更加复杂，但您仍然可以通过[显式接口实现来做一些具有相同](http://msdn.microsoft.com/en-us/library/ms173157.aspx)*可见*效果的事情。

这是一个简单的独立示例：

```
public interface IFoo
{
    void M1();
    void M2();
}

public class Foo : IFoo
{
    // Explicit interface implementation
    void IFoo.M1() {}

    // Implicit interface implementation
    public void M2() {}
}

class Test    
{
    static void Main()
    {
        Foo foo = new Foo();

        foo.M1(); // Compile-time failure
        foo.M2(); // Fine

        IFoo ifoo = foo;
        ifoo.M1(); // Fine
        ifoo.M2(); // Fine
    }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-22T20:04:31.923

`IList<T>.Count`[*明确*](http://msdn.microsoft.com/en-us/library/ms173157.aspx)实施：

```
int[] intArray = new int[10];
IList<int> intArrayAsList = (IList<int>)intArray;
Debug.Assert(intArrayAsList.Count == 10); 
```

这样做是为了当你有一个简单的数组变量时，你没有两个`Count`和`Length`直接可用的。

通常，当您希望确保可以以特定方式使用类型时使用显式接口实现，而不强制该类型的所有使用者以这种方式考虑它。

**编辑**：哎呀，糟糕的回忆。`ICollection.Count`是明确实现的。泛型`IList<T>`被处理为下面的[Hans](https://stackoverflow.com/a/11164210/675502)描述。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-22T20:04:26.433

[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)。简而言之，您将其声明为`void IControl.Paint() { }`or `int IList<T>.Count { get { return 0; } }`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T20:05:32.133

它与 IList 的显式接口实现没有什么不同。仅仅因为你实现了接口并不意味着它的成员需要作为类成员出现。它*确实*实现了 Count 属性，只是没有在 X[] 上公开它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-05T15:59:41.870

## 有可用的参考资源：

```
//----------------------------------------------------------------------------------------
// ! READ THIS BEFORE YOU WORK ON THIS CLASS.
// 
// The methods on this class must be written VERY carefully to avoid introducing security holes.
// That's because they are invoked with special "this"! The "this" object
// for all of these methods are not SZArrayHelper objects. Rather, they are of type U[]
// where U[] is castable to T[]. No actual SZArrayHelper object is ever instantiated. Thus, you will
// see a lot of expressions that cast "this" "T[]". 
//
// This class is needed to allow an SZ array of type T[] to expose IList<T>,
// IList<T.BaseType>, etc., etc. all the way up to IList<Object>. When the following call is
// made:
//
//   ((IList<T>) (new U[n])).SomeIListMethod()
//
// the interface stub dispatcher treats this as a special case, loads up SZArrayHelper,
// finds the corresponding generic method (matched simply by method name), instantiates
// it for type <T> and executes it. 
//
// The "T" will reflect the interface used to invoke the method. The actual runtime "this" will be
// array that is castable to "T[]" (i.e. for primitivs and valuetypes, it will be exactly
// "T[]" - for orefs, it may be a "U[]" where U derives from T.)
//----------------------------------------------------------------------------------------
sealed class SZArrayHelper {
    // It is never legal to instantiate this class.
    private SZArrayHelper() {
        Contract.Assert(false, "Hey! How'd I get here?");
    }

    /* ... snip ... */
} 
```

具体这部分：

> 接口存根分派器**将此视为一种特殊情况**，加载 SZArrayHelper，**找到相应的泛型方法（仅** **通过方法名称匹配）**，将其实例化为类型并执行它。

*（强调我的）*

[来源](http://referencesource.microsoft.com/#mscorlib/system/array.cs,aa97964558672440)（向上滚动）。

# mysql - 用于组子查询的 MySQL 重复键更新

> ID：11163302
> 
> 赞同：1
> 
> 时间：2012-06-22T20:01:33.430
> 
> 标签：mysql

有一些相关的问题和答案，但没有一个能解决我的问题。

我有一张桌子`regionviews`。它有一个 PK`region`和一个 column `views`。

我尝试以下查询，但出现错误（未知列“ `v`”）：

```
INSERT INTO regionviews
(SELECT region, sum(views) v FROM tb GROUP BY region)
ON DUPLICATE KEY UPDATE views = views + v; 
```

有人可以修复这个查询吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T20:22:22.250

您缺少一个 AS：

```
INSERT INTO regionviews
(SELECT region, sum(views) AS v FROM tb GROUP BY region)
ON DUPLICATE KEY UPDATE views = views + v; 
```

# asp.net - 删除 ASP.NET WebForms 'App_Themes' 目录会使应用程序池崩溃

> ID：11163308
> 
> 赞同：2
> 
> 时间：2012-06-22T20:02:10.303
> 
> 标签：asp.net, webforms, application-pool, app-themes

我最近开始研究一个大型 ASP.NET WebForms 项目。

该项目使用的`App_Themes`目录包含大量杂乱无章的 CSS 和图像资源。

我发现无论我是否需要，都会加载主题目录中的每个 CSS 文件，并且它们都是按字母顺序加载的。

我显然更喜欢对我的 CSS 和前端资源有更多的控制和灵活性，我将它们全部移动到一个单独的目录中，然后删除了整个`App_Themes`文件夹。

这似乎只是移动资源的简单问题，但在部署到我们的生产服务器后，系统很快变得不稳定，App Pool 反复崩溃。

恢复`App_Themes`目录使系统再次稳定，但这对我来说毫无意义。该`App_Themes`文件夹以及它可能具有的任何可能的依赖项似乎就像一个奇怪的黑匣子，我无法弄清楚并且似乎无法摆脱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T04:41:48.757

`App_Themes`是 ASP.Net 中的“特殊目录”之一。虽然它可能不是必需的（这些天默认情况下您不会看到它们），但它们可能在配置 ( `web.config`)、任何蒙皮控件、页面等中引用 - 这也许就是您删除后应用程序不稳定的原因文件夹（打破了对它的所有引用）。

检查此类引用 - 您可以（重新）从定义的主题中移动 css 文件，这样如果您想要的话，您可以从空白开始。除非您可以在应用程序中找到并删除所有对主题使用的引用，否则请避免修改目录结构。

App_Themes 可以很强大。您只需更改 web.config 即可轻松更改整个网站的外观（也称为“主题”）

```
<system.web>
    <!-- chage this value to "fall" in the Fall -->
    <pages theme="Summer" />
</system.web> 
```

上面的“Summer”主题设置映射到“Summer”子文件夹，`App_Themes`其中包含 Summer 主题的样式表/皮肤。`App_Themes`如果您有“Fall”主题，则映射到...中的同名子文件夹

参考：[ASP.Net 主题/皮肤](http://msdn.microsoft.com/en-us/library/wcyt4fxb%28v=vs.85%29.aspx)

hth

# php - RabbitMQ - PHP / Python 消费者问题

> ID：11163311
> 
> 赞同：0
> 
> 时间：2012-06-22T20:02:56.410
> 
> 标签：php, python, rabbitmq, amqp

我有一个 python 应用程序，它使用 pika 库将消息推送到 rabbitMQ 队列中。

```
message='hola'
credentials = pika.PlainCredentials('guest', 'guest')
connection = pika.BlockingConnection(pika.ConnectionParameters(credentials=credentials, host='localhost'))
channel = connection.channel()
channel.queue_declare(queue='myqueue')
channel.basic_publish(exchange='',routing_key='myqueue',body=message)
connection.close() 
```

这样可行。

我需要在 php 应用程序中使用这些消息。我尝试了此页面的 AQMP 示例中提到的这个 - [http://www.php.net/manual/en/class.amqpqueue.php](http://www.php.net/manual/en/class.amqpqueue.php)（检查函数接收器）

```
$cnn = new AMQPConnection((array("host"=>"ec2-xxx-xx-xx-xxx.ap-southeast-1.compute.amazonaws.com","login"=>"guest", "password"=>"guest")));
if ($cnn->connect()) {
    echo "Established a connection to the broker";
}
else {
    echo "Cannot connect to the broker";
}

    $queue = new AMQPQueue($cnn); 
    $queue->declare('myqueue'); 
    $queue->bind('', 'myqueue'); 

$msg=$queue->get(AMQP_AUTOACK);
echo $msg->getBody(); 
```

抛出这个异常 -

```
Fatal error: Uncaught exception 'Exception' with message 'Error parsing parameters.' in /home/webroot/amqptest.php:12 Stack trace: #0 /home/webroot/amqptest.php(12): AMQPQueue->declare('myqueue') #1 {main} thrown in /home/webroot/amqptest.php on line 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:59:04.460

这应该可行 - 但请记住，没有错误处理或任何循环来重复接收消息。不过，它确实为我成功地从代理中出列/接收了单个消息（如果再次运行空队列，则会崩溃）。

```
<?php

$cnn = new AMQPConnection();
$cnn->setLogin("guest");
$cnn->setPassword("guest");
$cnn->setHost("localhost");

if ($cnn->connect()) {
    echo "Established a connection to the broker\n";
}
else {
    echo "Cannot connect to the broker\n";
}

$channel = new AMQPChannel($cnn);
$queue = new AMQPQueue($channel);
$queue->setName('myqueue');

// the default / nameless) exchange does not require a binding
// as the broker declares a binding for each queue with key
// identical to the queue name. error 403 if you try yourself.
//$queue->bind('', 'myqueue');

$msg=$queue->get(AMQP_AUTOACK);

echo $msg->getBody();
echo "\n";

?> 
```

具体来说，请注意 AMQPConnection 现在需要通过属性而不是数组进行配置；您必须使用 AMQPChannel 传递给 AMQPQueue 对象；并且绑定到默认交换中的队列将不起作用/是不必要的。要查看效果，请尝试取消注释显示 $queue->bind 的行 :-)

我将这两个脚本的副本作为公共 Gist 放在 Github 上 - [https://gist.github.com/2988379](https://gist.github.com/2988379)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:14:25.757

我认为文件是错误的。您需要 AMQPChannel 来创建队列，而不是 AMQPConnection。可以找到队列的构造函数的定义：

```
AMQPQueue::__construct(AMQPChannel channel) 
```

在 AMQP 包的源代码中：[amqp_queue.c](http://svn.php.net/repository/pecl/amqp/trunk/amqp_queue.c)

# java - 在 Rad 中构建路径

> ID：11163314
> 
> 赞同：1
> 
> 时间：2012-06-22T20:03:13.063
> 
> 标签：java, rad, buildpath

我的耳朵项目中有10个项目。我正在使用 RAD。同一个耳朵有一个网络项目。我想在 web 项目的构建路径中添加一些项目。我添加了它，但它不起作用，但是当我创建项目的一个 jar 并将它放在 WEB-INF/lib 中时它可以工作。

可能是什么问题？

谢谢鲯鳅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:40:35.473

没有问题。它应该以这种方式工作，检查[J2EE Class Loading Demystified](http://www.ibm.com/developerworks/websphere/library/techarticles/0112_deboer/deboer.html)

# jquery - 将值发布到 iFrame 输入

> ID：11163317
> 
> 赞同：0
> 
> 时间：2012-06-22T20:03:25.723
> 
> 标签：jquery

我的父窗口中有这个 iFrame...

```
<iFrame src="http://theirdomain.com" id="Post_iFrame"></iFrame> 
```

然后我有jquery脚本......

```
$(document).ready(function(){  
   $(document).on("click","#transfer",function() {

      var $currentIFrame = $('#Post_iFrame');
      $currentIFrame.contents().find("body #Name1").val("My new value");

   });
}); 
```

我正在尝试`#Name1`在 iframe 中找到文本字段并填充此输入，`My new value`但没有任何反应。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:12:17.753

根据您的评论：

> 不，它是一个不同的域

您需要查看[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

为了能够获取数据，它必须是：

**相同的协议和主机**

您需要实现[JSONP](http://remysharp.com/2007/10/08/what-is-)来解决它。

# c++ - fstream 写入文件

> ID：11163319
> 
> 赞同：0
> 
> 时间：2012-06-22T20:03:25.733
> 
> 标签：c++, fstream

**我需要一些帮助来使用fstream**写入文件。我目前可以使用 fwrite 方法编写。但我想使用 fwrite 转换数据类型并使用它写入

以下是我到目前为止的内容：

```
noOfRows = 700;
noOfCols = 100
array[0] = unsigned char [noOfRows * noOfCols]

fstream fstreamFile;
fstreamFile.open ("fstreamFile.txt", fstream::out);

for(int i = 0; i < noOfRows; i++ )
{
fwrite(array[0]+(i*noOfRows), sizeOf(unsigned char), noOfCols, fwriteFile); // writes ok
fstreamFile.write((char*) array[0]+(i*noOfCols), sizeof(unsigned char)); // doesn't write
} 
```

有人可以告诉我我做错了什么吗？我没有收到编译错误，文件只是没有被写入（我已经从手头创建了它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:07:12.383

2件事，你在寻找文件的正确位置吗？它应该在工作目录所在的任何位置。您不需要事先创建文件，它将被创建。其次，确保它正在创建文件，你可以这样做：

```
if (!fstreamFile) { cout << "errorr.." << endl; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T00:42:22.363

`(char*) array[0]+(i*noOfCols)`

这是在位置 0 处获取数组的值，然后将该值转换为 a `char *`（给出一些随机乱码指针），然后添加`i * noOfCols`到该值。我相信这可能是你想要的：

`(char*) (&array[0]+(i*noOfCols))`

但是，从风格上讲，我建议改用 C++ 强制转换。

`reinterpret_cast<char *>(& array[0] + i * noOfCols)`

我还建议不要`sizeof(unsigned char)`使用`sizeof(array[0])`，只是为了更通用一点。

此外，您似乎正在尝试使用一维数组来模拟二维数组。`unsigned char array [noOfRows][noOfCols];`将数组声明为然后正常对两个维度进行操作会更直接。你的方法没有让你有任何表现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:34:28.830

您倾向于使用 iostreams 来避免强制转换。

给定一个无符号字符数组，您可以改为使用算法和迭代器来写入文件。

```
#include <fstream>
#include <algorithm>
#include <iterator>

// your main and array declaration here

ofstream fstreamFile("fstreamFile.txt");
copy(
    array,
    array + sizeof(array),
    ostream_iterator<unsigned char>(fstreamFile)
); 
```

# javascript - 替换特殊字符的所有实例

> ID：11163328
> 
> 赞同：1
> 
> 时间：2012-06-22T20:04:00.067
> 
> 标签：javascript, jquery, regex

```
 var whatever = 'Some [b]random[/b] text in a [b]sentence.[/b]'; 
```

如何在 jQuery中替换`[b]`with的每个实例和with的`<b>`每个实例？`[/b]``</b>`

我试图用正则表达式来做，但我无法让它正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:14:17.523

优雅的方式：

```
whatever = whatever.replace(/\[(\/?)b\]/g,'<$1b>'); 
```

[在这里](http://ideone.com/nLmHT)查看并测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:07:57.180

使用正则表达式，它将是：

```
whatever = whatever.replace(/\[b\]/g,'<b>').replace(/\[\/b\]/g,'</b>'); 
```

这似乎是最简单的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:07:50.637

```
string.replace("[b]", "<b>"); 
```

如果做不到这一点，你可以使用 PHP 来完成它，`str_replace`如果它被上传到数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:07:54.910

```
whatever = whatever.replace(/\[b\]/g, '<br>').replace(/\[\/b\]/g, '</b>'); 
```

**[演示](http://jsfiddle.net/HmTx3/1/)**

# javascript - 初始化谷歌地图显示

> ID：11163332
> 
> 赞同：1
> 
> 时间：2012-06-22T20:04:20.427
> 
> 标签：javascript, html, google-maps-api-3, safari

我正在创建一个使用 Google Maps API 来显示地图的网络应用程序。当我重新加载页面时，它不会初始化我的坐标告诉它的地图并且是“模糊的”。一旦我使用左侧的工具栏缩小并放大一切都很好。这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Google Maps JavaScript</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">
<style type="text/css">
  html, body, #map_canvas {
    margin: 0;
    padding: 0;
    height: 50%;
  }
</style>
<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  var map;
  function initialize() {
    var myOptions = {
      zoom: 14,
      center: new google.maps.LatLng(2.3584170693, -71.065063476),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

  var bikeLayer = new google.maps.BicyclingLayer();
  bikeLayer.setMap(map);

    var marker = new google.maps.Marker({
    position: new google.maps.LatLng(42.346872819794896, -71.06643676757812),
      map: map,
      title: 'REPORT'
    });

    var marker = new google.maps.Marker({
    position: new google.maps.LatLng(42.363363955820496, -71.08978271484375),
      map: map,
      title: 'REPORT'
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map_canvas" style="width: 90%; height: 300%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:28:39.917

我注意到您的标记在波士顿 (42.3, -71) 附近，但选项中所写的地图中心缺少“4”，并将初始位置发送到哥伦比亚 (2.3, -71)。

关于模糊性，是否只是自行车层需要一段时间才能加载？我无法重现这种效果。

# php - 如何在数据库中允许和存储子选项

> ID：11163333
> 
> 赞同：3
> 
> 时间：2012-06-22T20:04:25.800
> 
> 标签：php, mysql, storage, options

我正在为聚会场所制作一个在线预订系统，我的客户希望为他的用户提供某些“套餐”。然后这些包将具有“子选项”，我不确定如何存储它们。例如，如果一个包裹是“气球”，我需要能够在其下存储不同的选项，例如“红色气球”、“绿色气球”等，或者披萨 > 大、中小。

当然，我正在使用一个数据库，它目前设置了一个用于包裹的表格和一个用于预订的表格。bookings 表有一个列，其中包含引用存储在“packages”表中的记录的包 ID 列表。

现在，我认为解决此问题的最佳方法是在约会表中添加另一列，其中包含子选项，形式为：

```
packageid:optionid;package2id:option2id 
```

以及 packages 表中的另一列具有以下形式的选项：

```
1:red,2:blue,3:green //for options with no add'l price
1:large[$20],2:medium[$15],3:small[$10] //for options that change the price 
```

我想这会起作用，但我觉得必须有更好的方法来做到这一点。如果有人有任何想法，或者以前做过这样的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T20:09:27.173

如果您有可变数量的选项，就像您所做的那样，通常会执行以下操作：

创建一个按 ID 链接包和选项的表。因此，您将拥有`packages`and`options`表，然后您将拥有一个`package_options`仅具有（除了它的 id 和您存储的任何创建/修改日期时间之外） a`package_id`和`option_id`.

然后，您将加入三个表以按包获取选项。我不是特别喜欢这种方法，但是在关系数据库领域我还没有找到更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:13:54.927

有几种方法可以解决这个问题。基本上，您的解决方案越灵活，它就越复杂。既然你在寻求帮助，我会给你一个更简单的解决方案。

做一个这样的表：

```
ID, PackageName, OptionName
1,  Balloons, Red Balloons
2,  Balloons, Blue Balloons
3,  Pizza, Plain
4,  Pizza, Pepperoni
5,  Clown, NULL 
```

然后，当您需要从包列表中进行选择时，您可以从 tblPackages GROUP BY PackageName 中选择 PackageName。用户选择包后，可以 SELECT OptionName from tblPackges where PackageName = 1;

通过这种方式，用户永远无法真正选择单个包，他们实际上是在选择选项，但对他们来说，看起来他们选择了一个包，然后是一个选项。

如果您熟悉这个概念，您会发现您可以制作一个包表，然后制作一个选项表，并将它们连接起来。但老实说，对于小型应用程序来说，这样做没有性能方面的理由。上面的方法比你用大量连接结束的混杂的 ID 更容易理解。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:15:18.007

首先列出您要存储的实体以及它们之间的关系。根据您的描述，您有 3 个实体参与存储约会：

1.  约会
2.  选定的包
3.  选定的选项

有2个关系：

1.  每个约会可以有任意数量的包裹
2.  每个包任意数量的选项

实体是您的主表，它们之间的关系是外键：

*   餐桌约会（Id Int，约会细节......）
*   表 selected_pa​​ckages （Id Int，appation_id Int，包详细信息...）
*   表 selected_options ( selected_pa​​ckage_id Int, option details ... )

请注意，我在这里仔细提到了**选定**的包和选项 - 您可能还有其他代表**可用**包和选项的表，并且我已经写了“包详细信息”和“选项详细信息”，您可能只存储一个外键参考这些（尽管您可能想要拍摄快照，特别是价格等重要细节，以便您记录预订时的详细信息）*。*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T16:48:02.403

你没有说你使用的是什么类型的数据库（除了在解释中提到表）。

因此，如果我们假设您只是想根据最佳实践获得答案，我建议您使用[无模式](http://www.mongodb.org/display/DOCS/Collections)(NoSQL) [MongoDB](http://www.mongodb.org/)而不是关系数据库。

否则，只需忽略我的评论并阅读其他评论。我猜你需要两个通过 SQL[连接](http://www.w3schools.com/sql/sql_join.asp)相互连接的单独的表。

# sql - TOAD SQL - LPAD Number，还要加小数？

> ID：11163339
> 
> 赞同：0
> 
> 时间：2012-06-22T20:04:42.093
> 
> 标签：sql, decimal, toad, cellpadding

基本上我想要做的是将'000'添加到一个数字（长度在5-8个字符之间）并使整数具有小数。

我想出的是：

```
SELECT DISTINCT
 '000' || TO_CHAR(Blah, '9,999,999.99') AS "Data"
FROM Blah database 
```

虽然这可以满足我的理想需求，但 3 或 4 的零之间存在**差距**，具体取决于数字。显然我不想要那里的差距。我会误入歧途吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T16:17:12.270

使用 trim(to_char(x, '9,999,999.99')) 这样可以避免间隙

# iphone - 如何用可写标题替换日期？

> ID：11163341
> 
> 赞同：0
> 
> 时间：2012-06-22T20:04:47.730
> 
> 标签：iphone, date, title

当我添加新行时，它当前会添加一个以当前日期为标题的新行。以下是我拥有的代码。我应该将“NSDate date”更改为什么，以便用户可以输入他们想要的任何标题？

```
(void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:21:53.643

您可以将 new`UIAlertView`与纯文本输入一起使用。您还必须更改表格视图单元格以显示一个`NSString`而不是一个`NSDate`. （哦，你必须`UIAlertViewDelegate`在课堂上采用。

```
-(void)insertNewObject:(id)sender
{

    UIAlertView * getTitle = [[UIAlertView alloc] initWithTitle:@"title" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil]; // should give proper cancel/accept buttons
    getName.alertViewStyle = UIAlertViewStylePlainTextInput;
    [getTitle show];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }

    NSString * userEnteredThisString = [[alertView textFieldAtIndex:0] text];
    [_objects insertObject:userEnteredThisString atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

} 
```

# javascript - 将非视网膜画布应用程序更新为视网膜显示

> ID：11163344
> 
> 赞同：6
> 
> 时间：2012-06-22T20:04:59.670
> 
> 标签：javascript, canvas, html5-canvas, retina-display

我有一个 iPad 2 画布应用程序（游戏），并希望让它在新的 iPad 视网膜显示屏上运行。

简而言之，为视网膜 iPad 型号拉伸/缩小我的 iPad2 图像的最佳方法是什么？

从我所做的谷歌搜索中，我看到了各种方法，但许多方法包括从视网膜大小的图像开始并完成缩放。

我还听说将视网膜质量大小的像素推送到屏幕上的性能很慢，并且最好以牺牲一些质量为代价使用 iPad 大小的图像。

就像现在一样，在新 iPad 上，我看到了我的应用程序的左上角，这是有道理的，但与 iPad 2 相比，性能令人震惊。

我见过的技术包括 CSS 媒体查询、使用像素密度和 CSS 转换——它们显然非常快。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T22:21:01.873

我整理了一个简单的函数来处理这个问题。基本上，它采用当前画布大小并按设备像素比对其进行缩放，然后使用 CSS 将其缩小。然后它按比例缩放上下文，以便您的所有原始函数照常工作。

您可以试一试，看看性能如何。如果它不是您希望的，您可以将其删除。

```
function enhanceContext(canvas, context) {
    var ratio = window.devicePixelRatio || 1,
        width = canvas.width,
        height = canvas.height;

    if (ratio > 1) {
        canvas.width = width * ratio;
        canvas.height = height * ratio;
        canvas.style.width = width + "px";
        canvas.style.height = height + "px";
        context.scale(ratio, ratio);
    }
} 
```

# asp.net-mvc - 如何使用 ViewBag 或 Model 值在 mvc 中添加 HtmlAttributes？

> ID：11163348
> 
> 赞同：1
> 
> 时间：2012-06-22T20:05:12.040
> 
> 标签：asp.net-mvc, razor, viewbag

我有一个文本区域，我可能想在某些情况下禁用它。我想将此信息作为 ViewBag 参数发送，但我不知道该怎么做。

我认为的 textarea 看起来像这样

```
@Html.TextAreaFor(f => f.ProgressDetail, new { @class = "followUpProgress", ViewBag.DisableProgressDetail }) 
```

在控制器中我有这样的东西：

```
if(conditions)
    ViewBag.DisableProgressDetail = "disabled=\"disabled\""; 
```

然而，html 输出是这样的：

```
<textarea DisableProgressDetail="disabled=&quot;disabled&quot;" class="followUpProgress" cols="20" id="ProgressDetail" name="ProgressDetail" rows="2">
</textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:32:09.833

你想要的是这样的：

```
@Html.TextAreaFor(f => f.ProgressDetail, new { @class = "followUpProgress", disabled = ViewBag.DisableProgressDetail }) 
```

然后在你的控制器中，让它：

```
ViewBage.DisableProgressDetail = "disabled"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:47:36.537

如果未指定该属性，则该属性来自属性名称，这就是为什么您会获得一个为 ViewBag 属性命名的 html 属性。使其工作的一种方法是：

```
// in the view:
@Html.TextAreaFor(f => f.ProgressDetail, new { @class = "followUpProgress", ViewBag.disabled })
-------------------------------------------------------------
// in the controller
ViewBag.disabled = "disabled"; 
```

如果您不喜欢这种方法，您可以像这样设置禁用位：

```
// in the view:
@Html.TextAreaFor(f => f.ProgressDetail, new { @class = "followUpProgress", disabled=ViewBag.DisableProgressDetail })
-------------------------------------------------------------
// in the controller:
if(conditions)
    ViewBag.DisableProgressDetail = "disabled";
else
    ViewBag.DisableProgressDetail = "false";

// or more simply
ViewBag.DisableProgressDetail = (conditions) ? "disabled" : "false"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T20:12:14.400

它不起作用。你可以试试这个：

```
//In the controller

if(Mycondition){ ViewBag.disabled = true;}
else { ViewBag.disabled = false;}

//In the view

@Html.TextBoxFor(model => model.MyProperty, ViewBag.disabled ? (object)new { @class = "MyClass", size = "20", maxlength = "20", disabled = "disabled" } : (object)new { @class = "MyClass", size = "20", maxlength = "20" }) 
```

# php - mySQl 连接随机用户值

> ID：11163349
> 
> 赞同：2
> 
> 时间：2012-06-22T20:05:17.767
> 
> 标签：php, mysql, database

我正在尝试使用以下代码行连接到 sql 数据库：

```
mysql_connect('localhost','root',''); 
```

当我将本地主机编辑为其他内容时，它会出错。当我将密码参数编辑为其他内容时，它会出错。这并非没有例外，但是当我编辑 root 用户名时，它不会出错。为什么它不会在用户名上给出错误。似乎我可以连接任何用户名。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:17:55.137

您很可能能够“连接”，但实际上无法执行任何操作，例如运行查询。如果你跑

```
SELECT * FROM mysql.user 
```

您可能会看到如下所示的一行：

```
Host       User    Password    Select_priv ...
localhost  ''      ''          N 
```

数据库有一个空的用户/密码记录，没有任何表的权限。因此，如果您连接的用户不存在（密码必须为空，否则会出现访问错误），您实际上可以连接但实际上不能做任何事情

# mysql - 使用 mysql_affected_row 防止竞争条件

> ID：11163359
> 
> 赞同：3
> 
> 时间：2012-06-22T20:05:46.533
> 
> 标签：mysql, myisam

使用以下代码来防止竞争条件是否安全？（`key`和`status`fields 和 mysql_affected_rows 用于实现锁定）

```
$mres = mysql_query("SELECT `values`, `key`, `status` 
                     FROM `test`
                     WHERE `id` = 1");
$row = mysql_fetch_array($mres);
if($row['status'] != UPDATING) {
    $mres = mysql_query("UPDATE `test` SET
                             `status` = UPDATING,
                             `key` = `key` + 1
                         WHERE `id` = 1 AND `key` = ".$row['key']);
    if($mres && mysql_affected_rows()) {
        //update here safely and then...
        mysql_query("UPDATE `test` SET
                        `status` = NOT_UPDATING,
                        `key` = `key` + 1
                     WHERE `id` = 1");
    }
} 
```

我的测试表明它要么不安全，要么我应该在我的代码中寻找一个隐藏得很好的错误。表是 MyISAM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:35:14.710

在检索值之前，您应该首先“获取锁”。否则，它们可能会在您获得锁之前更改。

```
$mres = mysql_query("UPDATE `test` SET
                             `status` = 'UPDATING'
                         WHERE `id` = 1 AND `status` = 'NOT_UPDATING'");
if ($mres && mysql_affected_rows()) {
    // got the lock
    // now select and update
} 
```

*   `id`最好是数据库中的一个独特字段，否则事情可能会很奇怪
*   我看不到增加密钥的理由
*   注意我引用了字符串`'UPDATING'`和`'NOT_UPDATING'`sql
*   在您的代码中，您还应该`$row['status']`在与 php 常量进行比较之前检查它是否具有有意义的值（如果它是 false/null 怎么办？）`UPDATING`
*   希望您了解足够的 php 以知道*应该*引用 php 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:13:26.987

您可以在MySql中检查`GET_LOCK`和`RELEASE_LOCK`函数来模拟行锁。

[http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_get-lock](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_get-lock)

使用这种方法，您不需要更新行。此外，`mysql_affected_rows()`如果出现问题，您可能会以始终锁定的行结束（例如，如果您在释放行之前通过将其状态更新为 NOT_UPDATING 来编写脚本崩溃）。`GET_LOCK`当连接终止时，授予的锁会自动释放。

# ruby-on-rails - 活动管理员动态站点标题

> ID：11163362
> 
> 赞同：3
> 
> 时间：2012-06-22T20:05:51.707
> 
> 标签：ruby-on-rails, activeadmin, multi-tenant

活动管理员说您可以通过这种方式更改站点标题：

站点标题选项您也可以在初始化程序中更新标题或使用可选图像。此外，您可以设置链接。默认情况下没有链接，并且标题设置为 Rails.application 类的名称。

```
# config/initializers/active_admin.rb
config.site_title = "My Admin Site"
config.site_title_link = "/"    ## Rails url helpers do not work here
config.site_title_image = "site_log_image.png" 
```

此外，他们说您可以按命名空间配置标题，如下所示：

```
ActiveAdmin.setup do |config|
  config.site_title = "My Default Site Title"

  config.namespace :admin do |admin|
    admin.site_title = "Admin Site"
  end

  config.namespace :super_admin do |super_admin|
    super_admin.site_title = "Super Admin Site"
  end
end 
```

我正在构建一个多租户站点，并且我希望 site_title 基于当前租户名称。有没有办法在其中放置一个根据租户而变化的动态字段？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-18T01:26:12.570

我知道这是一个老问题，但我刚刚发现您可以在当前的 ActiveAdmin 大师中执行以下操作：

```
# config/initializers/active_admin.rb
ActiveAdmin.setup do |config|
  ...
  config.site_title = ->(view) {
    # Return what you like from this lambda. Runs in the scope of the controller so you can call your helpers directly.
    # For example, I do something like:
    administrator_signed_in? ? current_tennant.name : "My Site's Generic Name"
  }
  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:23:16.090

我通过猴子修补 SiteTitle 类实现了这一点。

将其放入初始化程序并根据您的用户模型进行更改：

```
ActiveAdmin::Views::SiteTitle.class_eval do
    private
    def title_text
        if current_admin_user
            if current_admin_user.has_role? :admin
                "Site Admin"
            elsif current_admin_user.has_role? :guest
                "Site Guest"
            else
                helpers.render_or_call_method_or_proc_on(self, @namespace.site_title)
            end
        else
            helpers.render_or_call_method_or_proc_on(self, @namespace.site_title)
        end
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-10T14:30:14.307

在 ActiveAdmin 初始化程序设置中，这样的东西对我有用：

```
 config.site_title = proc { I18n.t("admin.#{controller_name}.title") } 
```

# c# - 比较警告与 NullreferenceException

> ID：11163376
> 
> 赞同：0
> 
> 时间：2012-06-22T20:07:34.037
> 
> 标签：c#, winforms

```
foreach (Control c in panPrev.Controls)
{
if (c.Tag == "move") 
```

效果很好，但会产生警告：*可能的意外参考比较；要进行值比较，请将左侧转换为“字符串”*

```
foreach (Control c in panPrev.Controls)
{
if (c.Tag.ToString() == "move")  // this produce NullReferenceException. 
```

该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:08:53.670

您没有接受警告提供的建议。这将是：

```
if ((string)c.Tag == "move") 
```

如果为空，这将正常工作`Tag`，而尝试调用`.ToString`可能的`null`引用会使您遇到异常。

您完全需要这样做的原因是因为`.Tag`它被声明为 an `object`，因此`==`在 an`object`和 a之间使用运算符`string`使用引用相等，而将 a`string`与 a进行比较使用定义`string`的重载来比较实际值。`==``string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:10:29.077

`Tag`是 type `object`，这就是你收到警告的原因。如果您知道它是一个字符串并且它应该*始终*是一个字符串，那么您应该强制转换它（C 风格），因为如果`Tag`不是字符串（但应该是），您将快速捕获错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:10:39.550

`c.Tag`是一个对象，所以 object == string 进行引用比较。

当然，Object 可以为 null，因此`Tag.ToString()`在这种情况下调用可能会引发 null 引用异常。

您应该按照警告的建议进行操作，并`Tag`转换为字符串：

```
if ((string)c.Tag == "move") 
```

# signals - 是否有 hpux _UNW_STACK_TRACE 堆栈展开函数的信号安全版本？

> ID：11163382
> 
> 赞同：0
> 
> 时间：2012-06-22T20:07:54.723
> 
> 标签：signals, hp-ux, stack-unwinding

奇怪的是，hpux unwind API [_UNW_STACK_TRACE](http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c01922517/c01922517.pdf)不采用文件描述符，而是采用`FILE*`. 较新的 API`uwx_stack_trace`也采用`FILE*`.

由于这两个都使用缓冲 IO 而不是（信号安全 IO 接口）`open`// `write`，`close`因此它们都不能安全地用于信号处理程序（这是人们希望这样做的最明显的地方之一）。

在我们的一个（可能现在已经死掉的）ia64 平台上，我们曾经有自己的 unwind 实现，但它是一个难以维护和易碎的野兽，所以我不想再走那条路了。HPUX 堆栈展开还有其他选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:28:22.540

我找到了[hpux 文档](http://docstore.mik.ua/manuals/hp-ux/en/B2355-60130/uwx.3X.html)，其中详细介绍了他们的 stackwalk 迭代器接口。不幸的是，有点令人难以置信的是，在调试器中尝试这个表明它在信号上下文中也被破坏了（`uwx_init`调用`malloc`！）

# android - 无法动态注册广播接收器

> ID：11163385
> 
> 赞同：1
> 
> 时间：2012-06-22T20:07:59.647
> 
> 标签：android, broadcastreceiver, onpause

我在 OnResume 中注册我的接收器并在 OnPause 中取消注册是我的代码有问题

```
package com.bd2;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
 import android.provider.Contacts.People;
import android.util.Log;

public class BroadcastReceiver2Activity extends Activity {
/** Called when the activity is first created. */
private NotificationManager mNotificationManager;
private int SIMPLE_NOTFICATION_ID;
IntentFilter intentfilter;

  @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    intentfilter = new IntentFilter(); 
    intentfilter.addAction("android.intent.action.AIRPLANE_MODE");

}

 @Override
  protected void onResume() {
    // TODO Auto-generated method stub
   super.onResume();
   /*intfilter = new IntentFilter();
      intfilter.addAction("android.intent.action.AIRPLANE_MODE");*/
   registerReceiver(receiver, intentfilter);
   //       sendBroadcast();

  }

   @Override
    protected void onPause() {
    // TODO Auto-generated method stub
   super.onPause();
    unregisterReceiver(receiver);

    }

   private BroadcastReceiver receiver=new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
          Notification notifyDetails = new Notification(R.drawable.icon,"Time Reset!",System.currentTimeMillis());
          PendingIntent myIntent = PendingIntent.getActivity(context, 0, new Intent(Intent.ACTION_VIEW, People.CONTENT_URI), 0);
          notifyDetails.setLatestEventInfo(context, "Time has been Reset", "Click on me to view Contacts", myIntent);
          notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;
          mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
                Log.i(getClass().getSimpleName(),"Sucessfully Changed Time");
    }

   }; 

   } 
```

////////清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.bd2"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".BroadcastReceiver2Activity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

</application> 
```

我没有收到通知。如果我静态地这样做，那么它可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:16:30.633

**编辑#3：** 定义全局变量：

```
private IntentFilter mIntentFilter; 
```

从 onCreate 处理程序：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mIntentFilter.addAction("android.intent.action.SERVICE_STATE");
    mIntentFilter.addAction("android.intent.action.AIRPLANE_MODE");
    registerReceiver(receiver, mIntentfilter);
} 
```

从 onResume 处理程序：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
   super.onResume();
    // Be careful here... mIntentFilter might be gc'd! add checking to this!
   registerReceiver(receiver, mIntentFilter);
   Log.d(TAG, "onResume() - Registered!");
} 
```

从 onPause 处理程序：

```
@Override
protected void onPause() {
   // TODO Auto-generated method stub
   unregisterReceiver(receiver);
   Log.d(TAG, "onPause() - Unregistered!");
   super.onPause();
} 
```

从广播接收器：

```
private BroadcastReceiver receiver=new BroadcastReceiver(){
@Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        if (intent != null && intent.getAction().equals(Intent.ACTION_AIRPLANE_MODE_CHANGED)){
           Log.d(TAG, "receiver/onReceive() - GOT THE INTENT!!!!");
        }else{
           Log.d(TAG, "receiver/onReceive() - NOPE! NO INTENT!");
        }
        mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
          Notification notifyDetails = new Notification(R.drawable.icon,"Time Reset!",System.currentTimeMillis());
          PendingIntent myIntent = PendingIntent.getActivity(context, 0, new Intent(Intent.ACTION_VIEW, People.CONTENT_URI), 0);
          notifyDetails.setLatestEventInfo(context, "Time has been Reset", "Click on me to view Contacts", myIntent);
          notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;
          mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
                Log.i(getClass().getSimpleName(),"Sucessfully Changed Time");
    }

   }; 
```

此时，从清单中删除意图接收器（我之前提到的），因为我们正在以编程方式执行此操作。另外，定义权限！

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:42:23.330

一切对我来说都很好，除了你不能在不暂停活动的情况下打开或关闭飞行模式，这会取消注册你的接收器。当您回到您的活动、恢复并重新注册时，您已经错过了广播。

我不知道你的最终目标是什么，但如果你想让你的应用程序接收飞行模式 Intent，最好的办法是在你的清单中注册。（从技术上讲，您可以动态执行此操作，但这需要在比`onResume()`/更永久的地方进行注册/注销`onPause()`，我认为这并不是您真正想要的。）

# ajax - ajax 不适用于 IE9 上的用户

> ID：11163386
> 
> 赞同：0
> 
> 时间：2012-06-22T20:08:07.593
> 
> 标签：ajax, internet-explorer-9

我已经建立了一个基于 ajax 的聊天室。除了没有看到任何 ajax 生成的内容的用户之外，这一切都很好。他正在使用IE9。

启用本机 XMLHTTP 支持已选中。

他还应该在哪里查看他的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:33:22.520

听起来它可能正在[缓存 ajax 结果](http://dougwilsonsa.wordpress.com/2011/04/29/disabling-ie9-ajax-response-caching-asp-net-mvc-3-jquery/)。如果您使用的是 MVC，您可以通过以下方式简单地更改缓存控制元：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public class CacheTestController : Controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:47:51.407

I got the user to install Chrome and try there and that didn't help. So it must have been their Internet connection or firewall settings. Turns out it was the latter as, when they lowered the safety a bit, it all worked.

# php - 存储 jquery 变量，传输到 php 并检查

> ID：11163387
> 
> 赞同：1
> 
> 时间：2012-06-22T20:08:16.750
> 
> 标签：php, javascript, validation

好的，所以我再试一次。我正在尝试按国家/地区验证用户年龄 - 全部从下拉列表中选择。

首先，我使用下拉菜单选择国家，每个国家的值是 16/17/18 等，所以我使用这个脚本来捕获它：

```
function displayVals() {
    var singleValues = $("#country").val();
    } 
```

然后我将该变量发送到 php：

```
$countryAge = $_GET['singleValues']; 
```

接下来我希望它是这个函数的结果：

```
 function age_required() {
    return absint($countryAge);
} 
```

它只是重新加载页面，所以不会抛出我能看到的任何错误，也不会显示该人太年轻等通知。它在我开始干预之前就开始工作了。

关于为什么它不起作用的任何想法？我究竟做错了什么？我不是 php/js 大师。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:14:00.360

`$_GET`从查询字符串中检索值，因此当您发布或以其他方式访问 PHP 页面时，您需要确保 url 包含“?SingleValues=(YOURVALUEHERE)”。

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:17:13.190

在我看来，您可能对 JavaScript 和 PHP 在 Web 应用程序中所扮演的角色有些困惑。

JavaScript 在客户端（即浏览器）中运行。源代码位于您的网络服务器上，然后在执行之前将其全部下载到浏览器中。

相比之下，PHP 在服务器上运行。其目的是创建 X/HTML 标记作为输出，然后 Web 服务器将其发送到浏览器。

为了从浏览器获取数据到 PHP，然后再返回，您需要生成一个请求。这可以使用 AJAX 即时完成（阅读：无需新页面加载）。这里有很多关于 AJAX 的问题，所以我建议你开始探索这些问题/答案。

为了帮助您，这里有一些教程：

[使用原生 JavaScript 的 AJAX](http://www.tizag.com/ajaxTutorial/ajax-javascript.php)

[使用 jQuery 框架的 AJAX](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# django - Django + EC2 不会向 Gmail 发送电子邮件

> ID：11163392
> 
> 赞同：0
> 
> 时间：2012-06-22T20:08:52.307
> 
> 标签：django, email, amazon-ec2

我们有一个在 Amazon EC2 实例上运行的 Django webapp。我们正在使用 Django`django.core.mail.send_mail()`函数发送电子邮件。这不适用于 Gmail 帐户，但它适用于其他帐户 - 特别是通过 Gmail 运行的我的大学帐户，可以毫无问题地接收邮件。检查`/var/log/syslog`显示：

```
Jun 22 19:50:43 apatapa postfix/smtp[7625]: 4D80524B4F: to=<NAME@gmail.com>, relay=none, delay=120, delays=0.02/0.01/120/0, dsn=4.4.1, status=deferred (connect to alt3.gmail-smtp-in.l.google.com[173.194.70.26]:25: Connection timed out) 
```

发送到大学帐户：

```
Jun 22 19:54:49 apatapa postfix/smtp[7658]: 0570A24B57: to=<NAME@COLLEGE.edu>, relay=COLLEGE.edu.s10a1.psmtp.com[74.125.244.10]:25, delay=2.4, delays=0.02/0.01/0.36/2, dsn=2.0.0, status=sent (250 Thanks) 
```

可以肯定的是，我使用`traceroute`了 ，并且发送到大学帐户的电子邮件实际上正在通过 Gmail 的服务器。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:44:04.913

检查此服务器分配到的安全组的访问规则。“超时”消息看起来像是真正的网络超时，而不是延迟，而且 Gmail 不做“灰色”列表。另一件看起来可疑的事情是，您的大学电子邮件 mx 记录实际上指向的是 Postini，而不是 Gmail。Google 拥有 Postini，他们为托管帐户提供它，但它有自己的 mx 服务器并且不使用 Gmail 的 mx。这意味着邮件最终会通过 Postini 的 mx 服务器到达 Gmail 的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:25:23.543

您是否有从您的域到该 EC2 节点的 A 条目？您是否有该域的反向 DNS 条目？[如何确保以编程方式发送的电子邮件不会自动标记为垃圾邮件？](https://stackoverflow.com/questions/371/how-do-you-make-sure-email-you-send-programmatically-is-not-automatically-marked)

# java - 在linux上配置多个java

> ID：11163393
> 
> 赞同：0
> 
> 时间：2012-06-22T20:08:53.240
> 
> 标签：java, linux, bugzilla

我有一个 linux vm，它是我们的测试机器。作为一些计划的一部分，我想在这个 vm 上安装一些需要 Java 6+ 的软件。目前它正在运行 java 5，由于与测试环境的兼容性，我不想更改它。

我想知道谁可以在这个 vm 上配置多个 JAVA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:11:26.207

通过将二进制文件安装到另一个位置，然后直接引用该文件，您可以开始使用特定的二进制文件

代替

`java -jar Derp.jar`

这将是

`/opt/java5/bin/java -jar Derp.jar`

# javascript - 从 Rails 控制器调用 JavaScript 函数

> ID：11163397
> 
> 赞同：0
> 
> 时间：2012-06-22T20:09:23.600
> 
> 标签：javascript, ruby-on-rails, controllers

我正在处理的项目将多个页面（例如登录页面和注册表单）呈现为模态，这是通过为这些链接提供类 .modal 来完成的，因此将触发以下 JavaScript 片段：

```
$('.modal').click(function(){
    var url = this.href;
    var dialog = $('<div id="modal" style="display:none"></div>').prepend('#barhappy_container');
    dialog.load(url, function(){
        dialog.dialog({
            modal: true,
            draggable: false,
            position: 'center',
            dialogClass: 'no-title',
            width: 'auto',
/*          height: 'auto', */
            resizable: false,
            open: function(){
                $.getScript('/assets/modal/in-modal-open.js');
            },
            close: function(event, ui){
                dialog.remove();
            }
        });
    });     
    return false;
}); 
```

但是，我现在需要由 Controller 呈现的页面以相同的方式显示，但是没有可以给定类 .modal 的单击链接。

那么，有没有办法从我的 Rails 控制器调用这个 JavaScript 函数并传递正确的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:48:34.970

弄清楚了！

我在名为 create.js.erb 的contact_messages 视图文件夹中添加了一个js 文件。

然后我让我的联系人消息控制器使用 response_to 块激活该 js 文件。

在 js 文件中，我调用了模态函数的变体......

# r - ggplot2 的 facet_wrap 中的 x 轴标签

> ID：11163400
> 
> 赞同：4
> 
> 时间：2012-06-22T20:09:31.003
> 
> 标签：r, ggplot2, facet-wrap, rexcel

> **可能重复：**
> [在 facet_wrap 图中添加“浮动”轴标签](https://stackoverflow.com/questions/13297155/add-floating-axis-labels-in-facet-wrap-plot)

我正在使用 ggplot2 在 RExcel 中创建时间序列图表面板。我在许多示例中看​​到，使用 ggplot2 时的默认设置似乎是将 x 轴标签放在每列的底部，即使该列没有一直到达底部（例如，填充了 3 x 3 的空间）有 7 个图，所以左下角有两个空格，但 x 轴标签在底部重复三次，每列一个）。

但是，我的代码仅在一直到达底部的列的底部生成 x 轴标签。我已经玩了一段时间了，没有看到其他人遇到同样的问题 - 感谢您帮助我！

（我添加了一个最小的可重现示例，这也是图像的来源[http://docs.ggplot2.org/current/facet_wrap.html](http://docs.ggplot2.org/current/facet_wrap.html)）

```
library(ggplot2)
library(hexbin)
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
  xlim(0, 2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1)
d + facet_wrap(~ color) 
```

![在此处输入图像描述](../Images/4d7c4e3334f47828cd5f9d067ebb4c28.png)

谢谢！如果我的问题不清楚，或者我是否可以提供任何可能有用的附加信息，请告诉我。

# python - ssh 与 winpexpect

> ID：11163402
> 
> 赞同：1
> 
> 时间：2012-06-22T20:09:36.657
> 
> 标签：python, ssh, pexpect

我一直在尝试在 Windows 平台上运行此命令以从 .py 进行 ssh：

```
child = winpexpect.spawn('ssh %s@%s' % ('myID','m.y.i.p')) 
```

它的功能应该与 pexpect 类似，但我收到此错误：

```
pexpect.ExceptionPexpect: The command was not found or was not executable: ssh. 
```

我已经确认 C:\rhcygwin\bin 在我的路径中。关于如何指示 .py 文件找到 ssh 命令的任何建议？

编辑：我改变了我的方法：在我的 .py 中运行了这段代码

```
 command = ['bash', '-c', './myssh.sh']
    proc = subprocess.Popen(command, stdout = subprocess.PIPE) 
```

这是非常基本的，但它会成功连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:19:46.207

As far as I'm aware, pexect does not actually work on windows. There was a partial port attempt, but it was broken the last time I checked it.

If you want to automate doing something over ssh with python on windows, you will probably have better luck with the [paramiko library](http://www.lag.net/paramiko/). There are [good docs](http://www.lag.net/paramiko/docs/), but you will need to compile pycrypto, or else get a [precompiled binary](http://www.voidspace.org.uk/python/modules.shtml).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:51:24.723

您必须使用 winspawn 方法，并指定 .exe 扩展名：

```
child = winpexpect.winspawn('ssh.exe %s@%s' % ('myID','m.y.i.p')) 
```

# ruby-on-rails - fb_graph 从 base64 编码的字符串上传照片

> ID：11163403
> 
> 赞同：0
> 
> 时间：2012-06-22T20:09:42.517
> 
> 标签：ruby-on-rails, ruby, facebook, base64, fb-graph

我正在接收来自 postmarkapp 的附件（此处描述：http: [//developer.postmarkapp.com/developer-inbound-parse.html#attachments](http://developer.postmarkapp.com/developer-inbound-parse.html#attachments)）。

我想使用 fb_graph (https://github.com/nov/fb_graph) 使用它的照片将这些照片上传到 facebook！方法（https://github.com/nov/fb_graph/wiki/Photo-and-Album）。

这很容易，并且在通过指定 :source 进行测试时工作正常，就像在实际文件的示例中一样。

但是，我试图不写出文件，而只是将 base64 编码的字符串转换为 StringIO 并将其作为 :source 参数传递。这不起作用，我收到此错误：

`ruby FbGraph::InvalidRequest: OAuthException :: (#324) Requires upload file`

我不想写出文件的原因是因为我使用的是heroku和delayed_job，所以我不确定我写出的文件在处理作业时是否仍然存在。但是，这会很好，因为我目前的计划是将图像存储在数据库中并延迟工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:26:46.057

如果不先使用 gridfs 将它上传到 mongohq，我找不到一种方法来使用 heroku。您不能使用 cedar 临时文件系统，因为这些文件是在控制器操作期间写入的，您的 delayed_job 工作人员将看不到这些文件。

所以即使我这样做很糟糕；

1.  从 postmarkapp 接收上传（阻止一个测功机）
2.  使用网格 fs 写入 mongohq（这涉及一个上传，它会阻止一个测功机）
3.  使用delayed_job 排队作业
4.  从 mongohq 回读（下载时阻止一名工作人员）
5.  发帖时重新上传到FB

那么，如果我要承担上传到 mongohq 的初始阻塞成本，为什么不直接发布到 Facebook 呢？因为由于未知原因，上传比上传到 FB 要快得多。

heroku 上的*正确*答案是让 node.js dyno 处理来自邮戳的这些回调，因此在从邮戳读取或写入 mongohq（或 facebook）期间不会阻塞 dyno，然后做一些额外的工作来让节点应用程序与 rails 应用程序交互以保持同步。

# html - 列布局垂直对齐

> ID：11163412
> 
> 赞同：4
> 
> 时间：2012-06-22T20:10:35.167
> 
> 标签：html, css, layout, vertical-alignment

我希望实现以下布局：

![在此处输入图像描述](../Images/3a6f963e825136b54d3fda69402bd836.png)

但是，我似乎无法让文本正确垂直对齐。

我尝试了浮动 div，但无法使其正常工作。

使用最少的创建上述元素而不使用表格的最简单、最语义化的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:34:34.387

如果您真的想使用 div，请执行以下操作：

```
<div style="overflow:auto">
    <div style="float:left">left stuff</div>
    <div style="float:right">
        <div>right top stuff</div>
        <div>right bottom stuff</div>
    </div>
</div> 
```

如果需要，给出适当的宽度/高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:21:05.377

我认为它`align="center"`在您正在寻找的元素本身上。

这有效：

```
<table border="1px" width="100px" height="100px">
   <tbody>
          <tr>
             <td align="center" width="50px" rowspan="2">HI</td>
             <td align="center" style="vertical-align:center;" width="100"> test </td>
          </tr>
          <tr>
             <td align="center" style="align:center;vertical-align:center;" width="100"> test2 </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:52:57.777

> .wrapper { 边框：1px 纯红色；溢出：隐藏；宽度：740px；}
> 
> .box { 高度：300px; 宽度：400px；边框：1px 纯蓝色；位置：相对；向左飘浮; }
> 
> .box2 { 宽度：300px; 高度：200px；位置：相对；
> 边框：1px 纯红色；溢出：隐藏；}
> 
> .inside { 位置：绝对；左：93px；顶部：21px；宽度：135px；高度：84px；显示：表格；
> }
> 
> ```
> .inside p {
>   display: table-cell;
>   vertical-align: middle;
>   text-align: center;
> } 
> ```

html

```
<div class="box">wererewrwe
</div>

 <div class="box2">
    <div class="inside">
      <p>inside</p>
  </div>
<div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:12:27.297

以下解决方案适用于所有现代浏览器和 IE8+。如果您需要与 IE6 和 IE7 兼容，那么我建议使用表格。

```
<div class="block">
    <div class="left">Left</div>
    <div class="right" style="background: red"><p>Text</p></div>
    <div class="right" style="background: blue"><p>Text</p></div>
</div> 
```

和

```
div.block { width: 640px; height: 480px; border: solid 2px black; padding: 4px; }
div.left { float: left; width: 320px; height: 480px; background: green; }
div.right { float: right; width: 320px; height: 240px; display: table;}
div.right p { display: table-cell; vertical-align: middle; text-align: center; } 
```

[你可以在jsfiddle](http://jsfiddle.net/XtXY9/1/)上看到这个例子。

# php - 未设置会话

> ID：11163415
> 
> 赞同：3
> 
> 时间：2012-06-22T20:10:45.620
> 
> 标签：php, laravel

```
public function action_adicionar_item()
{
    $lista_item_pedido = array();
    $x = 0;
    if(Session::has('lista_item_pedido'))
    {
        foreach(Session::get('lista_item_pedido') as $item)
        {
            $lista_item_pedido[$x] = $item;
            $x++;
        }
    }

    $lista_item_pedido[$x] = Input::all();

    Session::put('lista_item_pedido', $lista_item_pedido);
} 
```

我第一次运行此方法时，没有创建会话，因此忽略了 if 并设置了数组值，并且应该使用 name 一个值定义会话，但它没有。

我第二次调用它时，会话被创建但没有值，这很奇怪。

任何想法为什么在我第一次运行时使用空数组创建会话？

`Input::all()`正在返回正确的值。

我已经检查了文件`storage/sessions/`创建的文件并且值设置正确：

```
s:17:"lista_item_pedido";a:1:{i:0;a:7:{s:2:"id";s:3:"162";s:10:"referencia";s:12:"112233445566";s:9:"descricao";s:6:"Sapato";s:5:"grade";s:14:"Grade 41 ao 46";s:8:"grade_id";s:1:"4";s:5:"valor";s:5:"50.00";s:10:"fornecedor";s:2:"30";}}}s:13:"last_activity";i:1340395110;} 
```

这是我第一次运行该方法时创建的，所以它被创建但我无法访问它，只有当我添加两个值时，在这种情况下，第一个被忽略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:44:07.000

尝试改用[$_SESSION](http://php.net/manual/pt_BR/reserved.variables.session.php) ...

# c# - 如何通过蓝牙将字体发送到 Zebra 打印机

> ID：11163425
> 
> 赞同：3
> 
> 时间：2012-06-22T20:11:28.840
> 
> 标签：c#, bluetooth, zebra-printers

我必须通过蓝牙将字体文件发送到我的打印机 Zebra RW420。我使用 Zebra Windows Mobile SDK，但找不到任何方法将其发送并存储在打印机上。我可以通过 Label Vista 手动完成，但必须在 200 多台打印机上完成。

任何人有任何建议或知道我可以使用 SDK 中的哪种方法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:40:16.950

CISDF 是正确的答案，它可能是您计算的校验和值不正确。我在连接到 USB 端口的 RW420 上放了一个端口嗅探器，发现它可以工作。我实际上将一些 PCX 图像发送到打印机，然后在标签中使用它们。

```
! CISDF
<filename>
<size>
<cksum>
<data> 
```

在第一四行的末尾有一个 CRLF。使用 0000 作为校验和会导致打印机忽略任何校验和验证（我在一些 ZPL 手册中发现了一些非常晦涩的引用，尝试了它并成功了）。<filename> 是文件的 8.3 名称，因为它将存储在打印机的文件系统中，<size> 是文件的大小，长度为 8 个字符，格式为十六进制数。<cksum> 是作为校验和的数据字节总和的二进制补码。<data> 当然是要存储在打印机上的文件的内容。

这是我用来将示例图像发送到打印机的实际 C# 代码：

```
// calculate the checksum for the file

// get the sum of all the bytes in the data stream
UInt16 sum = 0;
for (int i = 0; i < Properties.Resources.cmlogo.Length; i++)
{
  sum += Convert.ToUInt16(Properties.Resources.cmlogo[ i]);
}

// compute the two's complement of the checksum
sum = (Uint16)~sum;
sum += 1;

// create a new printer
MP2Bluetooth bt = new MP2Bluetooth();

// connect to the printer
bt.ConnectPrinter("<MAC ADDRESS>", "<PIN>");

// write the header and data to the printer
bt.Write("! CISDF\r\n");
bt.Write("cmlogo.pcx\r\n");
bt.Write(String.Format("{0:X8}\r\n", Properties.Resources.cmlogo.Length));
bt.Write(String.Format("{0:X4}\r\n", sum));  // checksum, 0000 => ignore checksum
bt.Write(Properties.Resources.cmlogo);

// gracefully close our connection and disconnect
bt.Close();
bt.DisconnectPrinter(); 
```

MP2Bluetooth 是我们在内部使用的一个类，用于抽象 BT 连接和通信——你也有自己的，我敢肯定！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:57:29.973

您可以使用 SDK 发送任何类型的数据。Zebra 字体只是一个带有标题的字体文件。因此，如果您从 Label Vista 捕获输出 cpf 文件，您可以从 SDK 发送该文件。只需创建一个连接，并`write(byte[])`使用文件的内容进行调用

# php - 使用php从mysql捕获数据通过ajax发送到js并填充表

> ID：11163430
> 
> 赞同：0
> 
> 时间：2012-06-22T20:12:08.270
> 
> 标签：php, javascript, jquery, mysql, ajax

我已经开始从事相当大的项目了。概念：Some1 向 mysql 插入数据。其他人在他们的屏幕（表格）上实时获取数据我的代码可以正常工作，但我正在用 php 填充表格，据我所知这对带宽不利，所以我试图用 php 代码从 mysql 捕获数据，将其发送到 js，然后它将格式化/填充表格（setinterval 正在运行）。但是我的桌子没有填满，我没有想法。我是 js 新手，所以如果您发现任何问题，请告诉我！谢谢你！

PHP：

```
<?php
$rows = array();
$con = mysql_connect("where","who","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("dbname", $con);
$result = mysql_query("SELECT * FROM Brokers");
$rows = array();
while($r = mysql_fetch_assoc($result)){
    $rows[] = $r;
}
mysql_close();
print json-encode($rows);
?> 
```

JS：

```
 function fetchData()
{
    $.ajax({
         url: 'brokers.php',
        dataType: 'json',
        success: createTable(rows)
    })

}
function createTable(rows)
{
    var flowTable = '<table id="resultTable">'
    for (var i=0; i< rows.length; i++){
        flowTable += '<tr class="filterthis height20">',
        flowTable += '<td class="companyname width120">',
        flowTable += rows[i].company_name + '</td>',
        flowTable += '<td class="width180">' ,
        flowTable += rows[i].address + '</td>',
        flowTable += '<td class="width70">' ,
                .........SOME MORE...........
        flowTable += '</tr>';
    }
    flowTable += '</table>';
    $("#here").innerHTML = flowTable;
}
function starttimer(){
  interval = setInterval("fetchData()",1000);
} 
```

启动定时器（）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:14:36.100

你`json_encode`有一个下划线而不是破折号`json-encode`。

也可以使用：

```
interval = setInterval(fetchData, 1000); 
```

代替：

```
interval = setInterval("fetchData()",1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:19:54.707

一个问题是您实际上将“成功”处理程序设置为“未定义”。这是因为您`success: createTable(rows)`实际上正在调用该函数并将其返回值（“未定义”）设置为处理程序。

相反，你会想要更多类似的东西：

```
success: function(data) {
    createTable(data);
} 
```

当然，由于处理程序（我*认为*）将数据作为第一个参数传递，您可以通过以下方式完成相同的操作：

```
success: createTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:42:43.993

好吧，我找到了解决方案。

对脚本 JS 的更正：

```
function fetchData(){
    $.ajax({
        url: 'brokers.php', //where are we sending request
        dataType: 'json',
        success: createTable //where are we transfering data from php ajax request
    })
}

var createTable = function(data){
    rows = jQuery.parseJSON(data) //creates object from information sent from php
    $.each(rows, function(key,value){  //for each row from php does things You want
        $("#Somediv").html = value.owner_name
        //and etc.
    }
} 
```

经纪人.php：

```
$con = mysql_connect();    
if (!$con) {
   die('Could not connect: ' . mysql_error());
}

mysql_select_db('somedb');
$result = mysql_query("SELECT * FROM sometable WHERE something=66");
while($row= mysql_fetch_assoc($result)){ //for each row which = our $result query
   $rows[]=$row;
}

echo json_encode($rows);
mysql_close($con); 
```

# arrays - 传单多边形对象属性

> ID：11163431
> 
> 赞同：1
> 
> 时间：2012-06-22T20:12:11.080
> 
> 标签：arrays, leaflet

在传单多边形对象中，有两个数组“_originalPoints”和“_parts”，我想知道是否有人知道这两个数组的用途。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:17:48.230

我是传单作者。

_originalPoints 是投影地理点的数组（多边形点的屏幕坐标），_parts 是在裁剪和简化点后最终渲染的点数组。在多边形的情况下，需要不同的“部分”来渲染多边形中的孔，而在多段线的情况下，您通常会在裁剪后从一条路径中获得多条路径（从某个矩形区域切割点以提高性能）。

# python - 对于 Python 文档，reStructuredText 有什么真正的替代品吗？

> ID：11163436
> 
> 赞同：58
> 
> 时间：2012-06-22T20:12:27.773
> 
> 标签：python, python-sphinx, restructuredtext, docstring

我很快就开始了一个开源 Python 项目，我正在尝试提前决定如何编写我的文档字符串。显而易见的答案是使用 reStructuredText 和 Sphinx with `autodoc`，因为我*真的很*喜欢在我的文档字符串中正确记录我的代码然后让 Sphinx 自动为我构建一个 API 文档的想法。

问题在于它使用的 reStructuredText 语法——我认为它在渲染之前完全不可读。例如：

```
:param path: The path of the file to wrap
:type path: str
:param field_storage: The :class:`FileStorage` instance to wrap
:type field_storage: FileStorage
:param temporary: Whether or not to delete the file when the File instance
    is destructed
:type temporary: bool 
```

您必须*真正*放慢速度并花一点时间从语法混乱中弄清楚。我更喜欢 Google 的方式（[Google Python Style Guide](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html)），上面的对应物是这样的：

```
参数：
    path (str): 要包装的文件的路径
    field_storage (FileStorage)：要包装的 FileStorage 实例
    temporary(bool): File 时是否删除文件
        实例被破坏

```

**好多**了！但当然，Sphinx 将没有这些，而是​​将所有文本呈现`Args:`在一行之后。

所以总结一下 - 在我去使用这种 reStructuredText 语法污染我的代码库之前，我想知道是否有任何真正的替代方法可以使用它和 Sphinx，而不仅仅是编写我自己的 API 文档。例如，是否有处理 Google Style Guide 的文档字符串样式的 Sphinx 扩展？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-18T18:55:14.560

我创建了一个[Sphinx 扩展](https://pypi.python.org/pypi/sphinxcontrib-napoleon/)，它解析 Google 样式和 NumPy 样式的文档字符串，并将它们转换为标准的 reStructuredText。

要使用它，只需安装它：

```
$ pip install sphinxcontrib-napoleon 
```

并在 conf.py 中启用它：

```
# conf.py

# Add autodoc and napoleon to the extensions list
extensions = ['sphinx.ext.autodoc', 'sphinxcontrib.napoleon'] 
```

更多关于拿破仑的文档在[这里](http://sphinxcontrib-napoleon.readthedocs.org)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-24T09:14:25.423

我认为目前没有比`sphinx`记录 python 项目更好的方法了。

为了获得更清晰的文档字符串，我最喜欢的选择是`sphinx`与[`numpydoc`](http://pypi.python.org/pypi/numpydoc). 根据您的示例，这看起来像：

```
def foo(path, field_storage, temporary):
    """This is function foo

    Parameters
    ----------
    path : str
        The path of the file to wrap
    field_storage : :class:`FileStorage`
        The :class:`FileStorage` instance to wrap
    temporary : bool
        Whether or not to delete the file when the File instance
        is destructed

    Returns
    -------
    describe : type
        Explanation
    ...

    Examples
    --------
    These are written in doctest format, and should illustrate how to
    use the function.

    >>> a=[1,2,3]
    >>> print [x + 3 for x in a]
    [4, 5, 6]
    ...
    """

    pass 
```

（一个完整的例子是[Here](https://github.com/numpy/numpy/blob/master/doc/example.py)），HTML输出看起来像[这样](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.arange.html#numpy.arange)

我认为 rst-file 的结构更清晰，更具可读性。该[指南](https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt)提供了更多信息和约定。该`numpydoc`扩展程序也适用`autodoc`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-23T09:32:56.183

我使用[epydoc](http://epydoc.sourceforge.net/)而不是 sphinx，所以这个答案可能不适用。

您描述的用于记录方法和函数的 reStructuredText 语法并不是唯一可能的语法。到目前为止，我更喜欢使用[统一的定义列表](http://epydoc.sourceforge.net/manual-othermarkup.html)来描述参数，这与 Google 的方式非常相似：

```
:Parameters:
  path : str
     The path of the file to wrap
  field_storage: FileStorage
     The FileStorage instance to wrap
  temporary: bool
     Whether or not to delete the file when the File instance is destructed 
```

如果 sphix 支持它，我会尝试。如果不是，您也可以考虑为此使用 epydoc（尽管它现在还没有积极维护）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-23T08:29:29.047

实际上，[reStructuredText](http://sphinx.pocoo.org/rest.html)以及来自[PEP8](http://www.python.org/dev/peps/pep-0008/)的样式指南主要适用于对 Python 的标准库本身进行编码，尽管许多第三方程序员也遵循这一点。

我同意你的观点，从代码的角度来看，谷歌的参数风格要好得多。但是您应该也可以[使用 sphinx 生成这样的文档字符串，](http://packages.python.org/an_example_pypi_project/pkgcode.html#an_example_pypi_project.useful_1.public_fn_with_googley_docstring)并[保留新行和缩进](http://packages.python.org/an_example_pypi_project/pkgcode.html#an_example_pypi_project.useful_1.public_fn_with_googley_docstring)。不过，它的输出不如[sphinxy 格式](http://packages.python.org/an_example_pypi_project/pkgcode.html#an_example_pypi_project.useful_2.public_fn_with_sphinxy_docstring)好。

*反正你*不用sphinx，顺便说一下，`autodoc`sphinx的模块肯定只是其中的一小部分。您几乎可以使用任何能够检索文档字符串内容的文档生成器，例如[Epydoc](http://epydoc.sourceforge.net/)（支持[epytext](http://epydoc.sourceforge.net/epytext.html)以及[reStructuredText、Javadoc 或 Plaintext](http://epydoc.sourceforge.net/othermarkup.html)）或[pydoctor](http://codespeak.net/~mwh/pydoctor/)，甚至是更通用的文档生成器，例如[Doxygen](http://www.doxygen.nl/manual/docblocks.html#pythonblocks)。

但可以肯定的是，sphinx 非常*Python 化*，与 Python 一起使用非常方便，并使您的代码与 Python 的生态系统保持一致。我认为您[不是唯一一个](https://bitbucket.org/birkenfeld/sphinx/issues?q=support%20google%20style)认为这是“缺乏”的人。也许他们将来会考虑这些抱怨，或者也许你甚至可以考虑`autodoc`自己修改模块，应该不是很难，在 Python 中，这将是一个很好的练习。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-23T08:29:40.397

你*可以*用你喜欢的任何格式编写文档字符串。但是，为了所有其他 Python 程序员，最好使用他们已经知道的标记和工具。如果您坚持使用 reST 和 Sphinx，他们的生活会更轻松。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-23T07:26:42.810

Python 将文档字符串的内容作为`__doc__`附加到函数/类/变量对象的属性提供。

因此，您可以轻松编写一个 Python 程序，将文档从您喜欢的任何格式转换为您喜欢的任何格式。您甚至可以使用 Javadoc 样式、XML 或其他任何东西。

顺便说一句，由于 Sphinx 是用 Python 编写的，所以让它接受非 RST 输入只是编写少量 Python 代码的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T13:00:21.540

您只需要开始一个新行并在每个变量名称后添加一个水龙头。然后用连续的粗体变量名在几行中呈现：

```
Args:
    path (str):
        The path of the file to wrap
    field_storage (FileStorage):
        The FileStorage instance to wrap
    temporary (bool):
        Whether or not to delete the file when the File
        instance is destructed 
```

# c# - 我得到了所有的 sql 数据，但在 xml 中只有一个人我做错了什么

> ID：11163439
> 
> 赞同：0
> 
> 时间：2012-06-22T20:12:45.593
> 
> 标签：c#

每次我运行下面的代码时，它都应该在数据库中找到任何名为“sam”的人，但我不只是想出一个人......

```
public IEnumerable<Person> GetPersons(string name)
        {
            string PersonID;
            string PersonName;
            var info = new Person[] {};
            try
            {
                string connectionString =
                    @"Password=nottelling;Persist Security Info=True;User ID=nottelling;Initial Catalog=customers;Data Source=db.example.com;";
                using (var connection = new SqlConnection(connectionString))
                {
                    string command = string.Format(@"SELECT Fname, PersonID, Lname FROM Person Where Fname = '{0}'",name);
                    connection.Open();
                    var getperson = new SqlCommand(command, connection);
                    SqlDataReader reader = getperson.ExecuteReader();
                    while (reader.Read())
                    {
                        PersonID = reader["PersonID"].ToString();
                        PersonName = reader["Fname"].ToString();
                        PersonName += " ";
                        PersonName += reader["Lname"].ToString();
                        info = new Person[] {new Person {PersonId = PersonID, Name = PersonName}};
                    }
                    connection.Close();
                }
            }
            catch (Exception ex)
            {
                PersonID = "Error:";
                PersonName = ex.Message;
                info = new[] {new Person {PersonId = PersonID, Name = PersonName}};

            }
            return info;
        } 
```

和人是：

```
namespace Calculator.Models
{
    public class Person
    {
        public string PersonId { get; set; }
        public string Name { get; set; }
    }
} 
```

该查询有效，因为我已经在另一个程序上对其进行了多次测试。我认为错误来自：

```
info = new Person[] {new Person {PersonId = PersonID, Name = PersonName}}; 
```

因为它替换了 info 的整个值，我怎么会不替换整个值而只是添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:15:57.303

**更新**：按照 DanC 的建议，我更改了数组类型

您每次都在分配一个全新的数组...您应该添加到数组中...看看使用类似`ArrayList`类的东西以便于使用

代替...

```
public IEnumerable<Person> GetPersons(string name) 
```

改成...

```
public List<Person> GetPersons(string name) 
```

代替...

```
var info = new Person[] {}; 
```

改成...

```
List<Person> info = new List<Person>; 
```

代替...

```
info = new Person[] {new Person {PersonId = PersonID, Name = PersonName}}; 
```

改成...

```
info.Add(new Person {PersonId = PersonID, Name = PersonName}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:34:18.503

做这个：

```
 public IEnumerable<Person> GetPersons(string name)
    {
        string connectionString = @"Password=nottelling;Persist Security Info=True;User ID=nottelling;Initial Catalog=customers;Data Source=db.example.com;";
        using (var connection = new SqlConnection(connectionString))
        {
            string command = string.Format(@"SELECT Fname, PersonID, Lname FROM Person Where Fname = '{0}'", name);
            connection.Open();

            using (var getperson = new SqlCommand(command, connection))
            using (var reader = getperson.ExecuteReader())
            {
                while (reader.Read())
                {
                    string PersonID = reader["PersonID"].ToString();
                    string PersonName = reader["Fname"].ToString();
                    PersonName += " ";
                    PersonName += reader["Lname"].ToString();
                    yield return new Person {PersonId = PersonID, Name = PersonName};
                }
            }
        }
    } 
```

我撕掉了那个可怕的异常处理。添加了收益回报，因此您不必构建中间列表。您可以在呼叫站点使用 .ToList() 或 .ToArray() 或其他任何内容。添加了适当的 using 语句来处理您的其他对象。删除了多余的连接关闭。

另外，您真的应该使用参数化查询而不是字符串替换，因为该代码容易受到 sql 注入的影响，但我会为您留下一些工作。:D

# javascript - 关闭时隐藏灯箱表单；使用 colorbox.js

> ID：11163441
> 
> 赞同：0
> 
> 时间：2012-06-22T20:12:52.553
> 
> 标签：javascript, jquery

使用 colorbox.js，当用户单击相应的链接时，我会在灯箱中打开一个表单。现在，当用户访问页面时，表单是隐藏的，但是当他们点击链接时，表单可以在灯箱中查看。当关闭灯箱时，表单在实际页面上可见。当用户退出灯箱时，我希望表单隐藏在页面上。到目前为止，这是我的脚本[http://jsfiddle.net/j9ths/](http://jsfiddle.net/j9ths/)：

```
jQuery(document).ready(function() {
        $("#myForm").hide();

        $("#link_to_form").click(function() {
            $("#myForm").show();
        });

        $("#link_to_form").colorbox({ width: "50%", inline: true, href: "#myForm" });

        $("#cboxClose").click(function() {
            $("#myForm").hide();
        });
 }); 
```

#cboxClose 的 div id 是灯箱上的“x”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:31:56.130

您可以编写 onClose 回调，如您[在此处](http://www.jacklmoore.com/colorbox)看到的那样。

```
 $("#link_to_form").colorbox({
        width: "50%",
        inline: true,
        href: "#myForm",
        onclose: function() {
             $("#myForm").hide();
        }
    });

$("#cboxClose").on('click', function() {
    $("#link_to_form").colorbox.close();
}); 
```

# c# - 在服务器端禁用多行文本框调整夹点大小

> ID：11163442
> 
> 赞同：0
> 
> 时间：2012-06-22T20:13:04.370
> 
> 标签：c#, asp.net, textbox, resize, dynamically-generated

我正在动态创建控件，其中之一是多行文本框。当它被硬编码到我的aspx页面时，我已经看到了有关如何执行此操作的链接，但是我不能这样做，因为控件是动态生成的。如果可能的话，我想避免修改我的 .css 文件。如果有人对如何做到这一点有任何想法，任何建议都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:16:35.397

一般来说，“resize:none”（有“overflow:auto”的乐趣）是解决方案，因此典型的选择是将它包含在您的 .css textarea 定义中并在您的 aspx 代码中使用相对类名（如果需要） . 如果需要意味着通过将“textarea { resize: none; ... }”添加到您的 .css 文件中，无需在您的 asp:TextBox 中使用 CssClass。

如果您坚持不更改您的 .css 文件，那么您必须通过 JavaScript 代码在服务器上的某处（即标头控件）添加新的 css 规则，或者添加一个新的全局 .css 文件并在您的 html 标头中从 aspx 提供它（这更好，因为您避免检查现有的 CSS 规则）。

# ios - iOS 拖动 CCSprite 不起作用？

> ID：11163445
> 
> 赞同：0
> 
> 时间：2012-06-22T20:13:30.220
> 
> 标签：ios, xcode, cocos2d-iphone

所以我正在使用 cocos2d 并试图在屏幕上拖动一个精灵，它在此之前工作..但我似乎无法弄清楚我做了什么让它不起作用。我看到调用了 ccTouchBegan 和 ccTouchEnd 方法，但没有调用 ccTouchMoved。

我尝试转换为 ccTouchesBegan、ccTouchesMoved 和 ccTouchesEnded，但仍然只看到调用了 Began 和 Ended 方法。显然，我已经在某处注释掉或更改了设置。我还注释掉了 [[CCTouchDispatch sharedDisptacher] ...]; 因为它使用 ccTouches 方法出错了，因为我相信它是原生的。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:27:39.387

您可以使用 ccTouchMoved 轻松移动精灵。

请尝试以下代码。我做了一个简短的演示，以了解您的相同概念。这个对我有用。

```
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    NSSet *touches = [event allTouches];
    for (int i = 0; i < touches.count; i++) {

        UITouch *touch = [[touches allObjects] objectAtIndex:i];
        CGPoint touchLocation = [touch locationInView: [touch view]];
        CGPoint location = [[CCDirector sharedDirector]
                            convertToGL:touchLocation];
        if(CGRectContainsPoint([sprite boundingBox], location))
             sprite.position = ccp(location.x,location.y);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:16:11.670

您是否将自己添加为代表？

```
[[CCTouchDispatcher sharedDispatcher]addTargetedDelegate:self priority:0 swallowsTouches:NO]; 
```

然后试试这个：

```
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{

    CGPoint location = [touch locationInView: [touch view]];
    mySprite.position = location;
} 
```

# c# - 无法将简单的字符串列表数组绑定到 ListView

> ID：11163446
> 
> 赞同：4
> 
> 时间：2012-06-22T20:13:29.847
> 
> 标签：c#, javascript, .net, asp.net-mvc, kendo-ui

我目前正在尝试找出 KendoUI。我正在使用版本 2012.1.322。

我有一个简单的字符串数组，`List<string>`通过 AJAX 调用以 Web 方法返回给用户。

`["name","phone","address","zip"]`

当 ListView 绑定列表为空时，我只得到

`<ul id="fileAlist" data-role="listview" class="k-widget k-listview"></ul>`.

我很确定这与我的模板错误有关。我必须设置什么而不是`${Object}`让它呈现如下：

```
<ul id="fileAlist" data-role="listview" class="k-widget k-listview">
  <li>name</li>
  <li>phone</li>
  <li>address</li>
  <li>zip</li>
</ul> 
```

**这是当前代码：**

```
 $(document).ready(function () {
     $("#fileAlist").kendoListView({
         template: "<li>${Object}</li>",
         dataSource:
             new kendo.data.DataSource({
                 transport: {
                     read: {
                         url: '@Url.Action("GetColumnNames", new {File="A"})',
                         dataType: "json",
                         type: "POST",
                         contentType: "application/json; charset=utf-8"
                     }
                 }
             })
     });
 }); 
```

**C# 代码（如果您感兴趣）**

```
 [HttpGet]
    public JsonResult GetColumnNames(string file)
    {
        if (file == "A")
        {
            var columns = new List<string>()
                              {
                                  "name",
                                  "phone",
                                  "address",
                                  "zip"
                              };
        }

        return new JsonResult { Data = columns, JsonRequestBehavior = JsonRequestBehavior.AllowGet };
    } 
```

**其他一些尝试和失败** 以下是我尝试的一些模板想法和返回的结果。显然他们都没有给我我想要的字符串输出。

*   我尝试将模板更改为`template: "<li>${}</li>"`，渲染时我得到`<li>undefined</li>`
*   我尝试将模板更改为`template: "<li>$.val()</li>"`，渲染时我得到`<li>$.val()</li>`
*   我尝试将模板更改为`template: "<li>${}.selector</li>"`，渲染时我得到`<li>undefined.selector</li>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:10:48.100

您的代码中有几个配置问题。我已经稍微简化了代码以专注于一个工作示例。

型号类：

```
public class Contact
{
    public int ContactId { get; set; }
    public string Name { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
    public string Zip { get; set; }
} 
```

查看标记，您需要使用列表布局来获得所需的外观：

```
<ul>
    <div id="contactList" style="width: 400px;"></div>
</ul> 
```

请注意模板标记的外观：

```
<script id="template" type="text/x-kendo-tmpl">
    <li>${ Name} ${ Phone } ${ Address } ${ Zip }</li>
</script>

<script type="text/javascript" >
    $(document).ready(function () {
        var datasource = new kendo.data.DataSource({
            transport: {
                        read: {
                          url: "@(Url.Action("GetContacts", "Home"))",
                          dataType: "json",  //switched to json instead of jsonp for this example
                          contentType: "application/json; charset=utf-8",
                          type: "GET"
                       }
           }
       });

       $("#contactList").kendoListView({
          dataSource: datasource,
          template: kendo.template($("#template").html())  //Link the template to the list view control
       });
   }); 
```

​</p>

返回 json 的控制器：

```
public ActionResult GetContacts()
{
    List<Contact> list = new List<Contact>();
    Contact contact = new Contact() { ContactId = 0, Name = "Steve", Address = "Some Street", Phone = "1-345-345-3455", Zip = "334566" };
    list.Add(contact);
    contact = new Contact() { ContactId = 1, Name = "Jim", Address = "Another Street", Phone = "1-777-987-3889", Zip = "998754" };
    list.Add(contact);

    return Json(list, JsonRequestBehavior.AllowGet);
} 
```

- 编辑 -

这是一个控制器，它将返回一个没有具体`Contact`对象的 json 字符串。

```
public ActionResult GetContacts()
{
    var columns = new List<Dictionary<string, object>>() {
        new Dictionary<string,object>(){ {"Name", "Rex"}, {"Phone", "1-123-123-2342"}, {"Address", "Westwood Drive"}, {"Zip", 928347}},
        new Dictionary<string,object>(){ {"Name", "Smith"}, {"Phone", "1-333-444-5555"}, {"Address", "Allen Way"}, {"Zip", 23456}}
    };

    return Json(columns, JsonRequestBehavior.AllowGet);
} 
```

# node.js - 错误：require.paths 被删除。改用 node_modules 文件夹或 NODE_PATH 环境变量

> ID：11163447
> 
> 赞同：7
> 
> 时间：2012-06-22T20:13:38.520
> 
> 标签：node.js, express

我刚刚安装了 Node.js，现在我正在尝试运行一个简单的脚本，但我收到以下错误消息：

```
Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.<anonymous> (module.js:383:11)
    at Object.<anonymous> (/home/shawn/.node_libraries/express@2.5.9/index.js:4:21)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Module.require (module.js:359:17)
    at require (module.js:375:17)
    at Object.<anonymous> (/home/shawn/Documents/Projets/jsonpExchange/server.js:1:77)
    at Module._compile (module.js:446:26) 
```

这是什么意思，我该如何解决？

更新：

```
$ node -v

v0.6.19

$ npm install express

npm http GET https://registry.npmjs.org/express
npm http 304 https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/mkdirp/0.3.0
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/mime/1.2.4
npm http 304 https://registry.npmjs.org/mkdirp/0.3.0
npm http 304 https://registry.npmjs.org/connect
npm http 304 https://registry.npmjs.org/qs
npm http 304 https://registry.npmjs.org/mime/1.2.4
npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/formidable
express@2.5.10 ./node_modules/express
├── qs@0.4.2
├── mime@1.2.4
├── mkdirp@0.3.0
└── connect@1.9.0 (formidable@1.0.11) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T21:07:59.487

当为旧版本的 nodejs 构建一些已安装的包时，会发生此错误。

您使用的是哪个版本的节点？

```
$ node -v 
```

您是否使用 npm (http://npmjs.org) 来安装软件包？install express 的输出应该是这样的：

```
$ npm install express
npm http GET https://registry.npmjs.org/express
npm http 200 https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/mime/1.2.4
npm http GET https://registry.npmjs.org/mkdirp/0.3.0
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/connect
npm http 304 https://registry.npmjs.org/mime/1.2.4
npm http 304 https://registry.npmjs.org/mkdirp/0.3.0
npm http 304 https://registry.npmjs.org/qs
npm http 200 https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/connect/-/connect-1.9.0.tgz
npm http 200 https://registry.npmjs.org/connect/-/connect-1.9.0.tgz
npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/formidable
express@2.5.10 ./node_modules/express
├── qs@0.4.2
├── mkdirp@0.3.0
├── mime@1.2.4
└── connect@1.9.0 (formidable@1.0.11) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:42:05.850

就我而言，我有一个旧的本地（特定于用户）安装的`coffee-script`.

这是我所做的：

1.  删除了我的`~/.node_modules`文件夹
2.  删除文件夹中的相关二进制`~/bin`文件
3.  重新安装`coffee-script`：`sudo npm install --global coffee-script`

现在它可以工作了:)

# web-crawler - 爬虫/搜索引擎如何遍历网络？

> ID：11163454
> 
> 赞同：0
> 
> 时间：2012-06-22T20:14:09.613
> 
> 标签：web-crawler, google-crawlers

商业搜索引擎爬虫如何遍历网络：“识别种子页面并通过连接的链接找到其他页面”或“索引网站wwwroot目录下的每个文件。”

在以后的选项搜索引擎的情况下，甚至应该有索引的东西没有被任何其他页面引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:23:02.810

必须存在引用。有可能

*   允许索引的常规 HTML href
*   sitemaps.xml 中的链接
*   robots.txt 中的链接允许爬虫使用
*   网站管理员在其搜索引擎后台提供的参考
*   等等

它可以是任何其他链接。

# mysql - MySql 在查询中获得排名

> ID：11163455
> 
> 赞同：0
> 
> 时间：2012-06-22T20:14:12.557
> 
> 标签：mysql

这是我的示例查询：

```
SELECT userid,count(*)
FROM hits
GROUP BY userid 
```

我的桌子是这样的

编号 | 用户名 | 时间...等

其中 id 是主键，我使用此表来存储页面上的每次访问。这意味着我的表有 200,000 多行。

对于用户 ID，假设 X 我想找出它在查询中的排名，这意味着有多少用户访问了该页面，而不是具有该用户 ID 的用户。

我知道有很多这样的问题，但它们不一样，因为

1.  我的查询有分组依据
2.  我在这里尝试了很多答案，有些甚至不返回任何东西，而另一些则需要 5-10 分钟。我需要它更快。

如有任何进一步的疑问，请在评论中澄清

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:20:25.013

Count/Group by in a query that's expected to return multiple rows will get progressively slower because the query will still have to touch every row in the table. Generally, if you expect to do reports like this often, and you expect your table to continue to grow, you should begin rolling that value into a cached value (so you should store every result still, but you should also add to a counter on that user's user record). Of course, this also begs the question of whether you have an index on your user_id column and a foreign key into your users table, which should speed that query up considerably.

# posix - 我的可移植程序的 POSIX 线程/套接字

> ID：11163456
> 
> 赞同：0
> 
> 时间：2012-06-22T20:14:15.593
> 
> 标签：posix

我打算用 C/C++ 为 windows、mac 和 Unix 编写一个可移植的程序。该程序将主要基于套接字和线程。我正在考虑为我的程序最初为 Linux 编写的 POSIX 线程和套接字，

我的问题是我以后能否将我的程序从 linux 移植到 Mac 和 Windows 7/vista 而不会有太多麻烦？

谢谢，

# asp.net - Web 应用程序中缺少“添加新数据源”和“显示数据源”选项

> ID：11163459
> 
> 赞同：1
> 
> 时间：2012-06-22T20:14:23.107
> 
> 标签：asp.net, visual-studio

我有一个 Windows 应用程序项目。我可以进入菜单`Data > Add new data source`并成功地从 Northwind 数据库中添加了一个新的客户表数据源。

我还可以将客户表从数据源窗口拖放到 Windows 窗体中。

我想使用 Web 表单执行相同的操作。

我创建了一个空网站（也尝试使用 web 项目）并尝试执行类似的活动。

这里没有`Add new data source`或`Show data sources`选项。

如何在 Web 表单应用程序中完成相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:20:48.297

添加网格视图或其他一些显式数据控件，您将可以选择对其进行配置。此外，您可以在 web.config 中定义数据源。Web 开发是一个不同的世界。有些事情必然不同。

# drupal - Drupal：更改上传文件的路径

> ID：11163465
> 
> 赞同：1
> 
> 时间：2012-06-22T20:15:03.097
> 
> 标签：drupal, drupal-6

我复制了一个站点文件来测试主机以进行进一步的开发。

我希望从旧主机加载上传的文件。

例如，文件存储在 drupal_folder/sites/default/files/ (example.com/sites/default/files)。

我需要可以从其他站点（example.dev.com）访问这些文件

我的意思是我想更改新主机（example.dev.com）上所有文件的路径。

我尝试使用命令更改数据库中所有文件的路径

```
UPDATE `files` SET `filepath` = REPLACE(`filepath`, "sites/default/files/", "http://example.dev.com/sites/default/files/"); 
```

但 URL 在此之后就像 example.dev.com/http://example.dev.com/sites/default/files/。

我希望它有意义。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:50:56.893

如果您使用的是 linux，请使用 ln 创建指向该目录的链接。

[http://linux.about.com/od/commands/l/blcmdl1_ln.htm](http://linux.about.com/od/commands/l/blcmdl1_ln.htm)

# python - 我的代码有什么问题。我正在使用 python 来尝试数据抓取

> ID：11163467
> 
> 赞同：-2
> 
> 时间：2012-06-22T20:15:09.073
> 
> 标签：python, web-scraping, screen-scraping

我正在尝试打印 nba 选秀中的前 30 个选秀权。我正在使用页面： http: [//nbadraft.net/2012mock_draft](http://nbadraft.net/2012mock_draft)获取信息。当它运行时它说：

```
invalid syntax: python1.py, line 8, pos 28
File "/Users/seanyeh/Downloads/python1.py", line 8, in ?
  patFinderLink = re.compile(‘&lt;link rel.*href=”(.*)” />’) 
```

所以这是我的代码：

```
import urllib2
from BeautifulSoup import BeautifulSoup
# or if your're using BeautifulSoup4:
# from bs4 import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://nbadraft.net/2012mock_draft').read())

patFinderLink = re.compile(‘&lt;link rel.*href=”(.*)” />’)

findPatLink = re.findall(patFinderLink,webpage)

listIterator = []
listIterator[:] = range(1,30)

for i in listIterator:
    print findPatLink[i] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:20:28.943

你在这条线上有一些有趣的角色（也许这是由于剪切和粘贴？）

```
 ‘&lt;link rel.*href=”(.*)” />’) 
```

还有，我相信你不见了

```
 import re 
```

在你的代码中。我还收到一个`webpage`未定义的错误。

既然你在使用 BeautifulSoup，为什么不使用*它*来提取你感兴趣的元素呢？BeautifulSoup 的整个想法是避免使用字符串操作或正则表达式进行“手动”解析。

# python - rpy2中的fitdistr

> ID：11163472
> 
> 赞同：2
> 
> 时间：2012-06-22T20:15:25.233
> 
> 标签：python, r, statistics, rpy2, rpython

我有一个一维数据列表，我想使用最小二乘或最大似然来拟合分布，如此[处](https://stackoverflow.com/questions/4290081/fitting-data-to-distributions)所示，但我想从 python 而不是 R 交互式 shell 中进行。

我安装了[rpy2](http://rpy.sourceforge.net/)，并希望`fitdistr`在交互式`ipython`shell 中使用该功能，因为我已将数据导入列表中。

这个功能在哪里，我该如何使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:11:28.270

该函数在 R 包 MASS 中

```
from rpy2.robjects.packages import importr

MASS = importr('MASS')

# the function is now at MASS.fitdistr 
```

# python - 使用 PIL 和 Tkinter 裁剪和显示图像

> ID：11163474
> 
> 赞同：3
> 
> 时间：2012-06-22T20:15:28.223
> 
> 标签：python, user-interface, tkinter, python-imaging-library, crop

在永远被困在使用 VB6 之后，我开始学习 Python。为了帮助自己学习一些使用 Tkinter 的 gui，我正在制作一个简单的老虎机。为了给轮子设置动画，我有一个 ~300x2000 的图像，其中包含我打算使用的所有图片显示为条带。现在大约6张照片。我一次只显示部分图像（轮子）以使其旋转。无论如何，我在到达图像末尾的代码部分遇到问题，需要从图像的末尾过渡到开头（轮子向下旋转，所以开头是底部，结尾是顶端）。

出于某种原因，我无法正确裁剪和显示图像，即使我认为我的脚本在逻辑上是有意义的。我的代码发布在下面。您可以制作分辨率为 300x2000 左右的图像，以使用它来查看我遇到的问题。我的代码开始在我希望它显示的区域之外（在 showsize 变量之外）打印，我不知道为什么。

对此问题的任何帮助将不胜感激。作物似乎没有将图像剪得足够短，但我发现的所有关于它的信息让我认为我的脚本应该可以正常工作。我试图注释我的代码来解释发生了什么。

```
from Tkinter import *
from PIL import Image, ImageTk

def main():
    root = Tk()
    root.title = ("Slot Machine")
    canvas = Canvas(root, width=1500, height=800)
    canvas.pack()

    im = Image.open("colors.png")
    wheelw = im.size[0] #width of source image
    wheelh = im.size[1] #height of source image
    showsize = 400 #amount of source image to show at a time - part of 'wheel' you can see
    speed = 3 #spin speed of wheel
    bx1 = 250 #Box 1 x - where the box will appear on the canvas
    by = 250 #box 1 y
    numberofspins = 100  #spin a few times through before stopping

    cycle_period = 0  #amount of pause between each frame

    for spintimes in range(1,numberofspins):
        for y in range(wheelh,showsize,-speed):  #spin to end of image, from bottom to top

            cropped = im.crop((0, y-showsize, wheelw, y))  #crop which part of wheel is seen
            tk_im = ImageTk.PhotoImage(cropped)
            canvas.create_image(bx1, by, image=tk_im)  #display image

            canvas.update()                 # This refreshes the drawing on the canvas.
            canvas.after(cycle_period)       # This makes execution pause

        for y in range (speed,showsize,speed):  #add 2nd image to make spin loop
            cropped1 = im.crop((0, 0, wheelw, showsize-y)) #img crop 1
            cropped2 = im.crop((0, wheelh - y, wheelw, wheelh)) #img crop 2
            tk_im1 = tk_im2 = None
            tk_im1 = ImageTk.PhotoImage(cropped1)
            tk_im2 = ImageTk.PhotoImage(cropped2)

            #canvas.delete(ALL)
            canvas.create_image(bx1, by, image=tk_im2)  ###THIS IS WHERE THE PROBLEM IS..
            canvas.create_image(bx1, by + y, image=tk_im1)  ###PROBLEM

            #For some reason these 2 lines are overdrawing where they should be.  as y increases, the cropped img size should decrease, but doesn't

            canvas.update()                 # This refreshes the drawing on the canvas
            canvas.after(cycle_period)       # This makes execution pause

    root.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:26:14.807

如果您不在每个周期都重新创建图像，它会更简单、更快、更流畅。这是我使用的解决方案`canvas.move()`。请注意，我将`canvas.create_image`调用移到了 for 循环之外。我还将代码放在一个类中并添加了一个“旋转”按钮，并添加了一些内容以使其退出而不会出错。

```
from Tkinter import *
from PIL import Image, ImageTk
import sys

class SlotMachine():
    def __init__(self):
        root = Tk()
        root.title = ("Slot Machine")
        self.canvas = Canvas(root, width=1200, height=800)
        self.canvas.grid(column=0,row=0)
        button = Button(root, text="Spin!", width=20, command = self.spin)
        button.grid(column=0,row=1)

        self.alive = True
        root.protocol("WM_DELETE_WINDOW", self.die)
        root.mainloop()

    def spin(self):

        im = Image.open("colors.png")
        wheelw = im.size[0] #width of source image
        wheelh = im.size[1] #height of source image
        showsize = 400 # amount of source image to show at a time -
                       # part of 'wheel' you can see
        speed = 3 #spin speed of wheel
        bx1 = 250 #Box 1 x - where the box will appear on the canvas
        by = 250 #box 1 y
        numberofspins = 100  #spin a few times through before stopping
        cycle_period = 3  #amount of pause between each frame

        tk_im1 = ImageTk.PhotoImage(im)
        tk_im2 = ImageTk.PhotoImage(im)
        im1id = self.canvas.create_image(bx1, by + showsize, image=tk_im1)
        im2id = self.canvas.create_image(bx1, by + showsize + wheelh, 
                                         image=tk_im2)

        for spintimes in range(1,numberofspins):
            for y in range(wheelh,0,-speed): 
                if self.alive:

                    self.canvas.move(im1id, 0, -speed)
                    self.canvas.move(im2id, 0, -speed)

                    self.canvas.update() 
                    self.canvas.after(cycle_period)
                else:
                    sys.exit()

            self.canvas.move(im1id, 0, wheelh)
            self.canvas.move(im2id, 0, wheelh)

    def die(self):
        self.alive = False

if __name__ == '__main__':
    mySlotMachine = SlotMachine() 
```

这会将轮子的一部分放在盒子外面，但你可以把你的老虎机纹理放在上面。

# javascript - 如何在最后一个 CSS 类之后附加文本

> ID：11163483
> 
> 赞同：4
> 
> 时间：2012-06-22T20:16:03.237
> 
> 标签：javascript, jquery, css

我有以下html

```
<div class="someClass">  
    Some text  
</div>  
<div class="someClass">  
    Some other text  
</div>
<div class="add>
    <img src="someImage.jpg">
</div> 
```

现在，我想在单击添加图像后附加另一个*div - 但仅在最后一个具有“someClass”类的 div 之后。*

如果我使用下面的 jQuery，它将被附加在每个 someClass 元素之后，所以多次。

```
$(".add img").live("click", function() {
    $(".containerFooter").after("<div class='someClass'>test</div>");
}); 
```

有没有办法只在带有 someClass 属性的最后一个 div 之后附加它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:19:08.673

您正在寻找[`:last`](http://api.jquery.com/last-selector/)选择器：

```
$(".someClass:last").after("<div class='someClass'>test</div>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:19:26.137

```
$('.someClass').last() 
```

或者

```
$('.someClass:last') 
```

会给你类的最后一个元素`someclass`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:19:47.073

Use:

```
$(".someClass").last().append("<div class='someClass'>test</div>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T20:22:00.450

抱歉，第一次尝试完全阅读了这个问题，更新了答案！

你的 html 也有错别字，它使它

[工作演示](http://jsfiddle.net/epinapala/gaMDM/2/)

```
$(".someClass").last() //-> selects your last div with id = someClass

.after("<div class='someClass'>test</div>");//-> place the html after the selected div 
```

下面的实际代码

```
 $(".add").live("click", function(){
  $(".someClass").last().after("<div class='someClass'>test</div>");
});
​
    ​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T20:25:00.753

```
$(".add img").live("click", function() {
    $(".someClass:last").after("<div class='someClass'>test</div>");
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T20:25:28.697

可能有更简单的方法，但 jquery 类返回一个适用对象的数组。所以你可以找到最后一个这样的对象，从中创建一个新的 jquery 对象，然后对其进行操作。

```
<html><title>JQuery Play</title>
<h1>JQuery Play</h1>
<script src="jquery-1.4.1.js" type="text/javascript" ></script>
<script type="text/javascript">
function add()
{
var x=$(".someClass");
$(x[x.length-1]).after("Added text");
}
</script>
<div class="someClass">   
    Some text   
</div>   
<div class="someClass">   
    Some other text   
</div> 
<div class="add"> 
    <button onclick="add()">Add</button>
</div> 

</html> 
```

# ajax - 通过 AJAX 提供生成的图表

> ID：11163485
> 
> 赞同：0
> 
> 时间：2012-06-22T20:16:06.260
> 
> 标签：ajax, django, charts, matplotlib

我的 Django 项目的工作流程应该是这样的：

*   用户指定图表生成的参数
*   图表是使用 matplot 生成的
*   然后使用 AJAX 将图表提供给用户

由于各种参数的差异，可能要生成的图表数量非常大，因此预先生成图表并静态提供它们不是一种选择。

matplot 命令 show() 和 savfig() 似乎也不适合这项任务。

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:42:09.973

大致是这样的：

```
import django.http
import matplotlib.pyplot

# This is your view function, hook it up to your URLconf.
def chart(request, *args):
    # ...extract chart parameters from request.GET and/or args...
    fig = matplotlib.pyplot.figure(...)
    # ...draw your chart, invoking methods on fig...
    response = django.http.HttpResponse(content_type='image/png')
    fig.savefig(response, format='png')
    return response 
```

现在我不确定您将如何使用 AJAX 将其显示给用户。我认为只插入`img`具有适当`src`属性的元素会更容易。使用 jQuery，可能是这样的：

```
var src = '/chart/?' + $.param({
        // This all ends up in request.GET
        type: 'something',
        foo: 'bar',
        myParam: 123
    });
$('#displayArea').empty().append($('<img>').attr('src', src)); 
```

但是如果你确实想要 AJAX，你当然可以只使用`$.ajax`.

如果图表完全由传入的参数定义，并且用户可能希望多次查看相同的图表，请考虑设置宽松的[客户端缓存标头](https://docs.djangoproject.com/en/1.4/topics/cache/#controlling-cache-using-other-headers)以避免从服务器重新请求相同的图像。不过，这只是一个优化。

# php - Joomla 控制面板所需的建议

> ID：11163490
> 
> 赞同：0
> 
> 时间：2012-06-22T20:16:27.660
> 
> 标签：php, web-applications, joomla

我希望您能就如何在 PHP 中制作控制面板来管理不同的资源提出建议：它需要让用户以用户友好的方式编辑远程 .xml、.php .js 和 Joomla 的页面。用户将无法访问代码，而只能访问他们可以更改的图像或文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:20:24.910

Create three systems.

*   To handle the page creation, deletion and template designs (closed to the end-user?)

*   To add, edit and remove resources like images, videos, texts, et cetera.

*   To make associations, like "I want this, this and that listed on that page".

The final engine should iterate through the associations, find the proper resources, and display them correctly using a template.

# asp.net-mvc - Mobi 站点 - mvc 区域还是子域？

> ID：11163501
> 
> 赞同：1
> 
> 时间：2012-06-22T20:17:21.207
> 
> 标签：asp.net-mvc

即将为现有网站启动另一个 jquery 移动网站。提供有限功能的主站点的缩减版本 - 不是现在移动格式的主站点的镜像。有兴趣了解最佳路线 - mvc 区域或新的 mobi 子域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:47:26.443

使用子域，例如典型的“m.yourDomain.com”；如果移动 301 重定向到“m.yourDomain.com”，则在主站点上使用，并且功能站点和自定义 css 代码将会减少...您建议的两种方式都可以工作，mvc 的不同区域也是如此，这也取决于您是否是在您的网站上做一些动态的事情，比如你应该使用相同域的 cURL 帖子。希望这能提供洞察力。

# xamarin.android - AOT（提前）编译是否可用（或计划）在单声道中用于 android？

> ID：11163502
> 
> 赞同：1
> 
> 时间：2012-06-22T20:17:28.660
> 
> 标签：xamarin.android

我想知道对于 android 平台的单声道是否有任何 AOT 编译选项（或任何计划？）。我问这个是因为我将使用单声道为 android 移植游戏，性能非常重要，这就是为什么我想知道 AOT 编译是否可用（或任何其他可以产生更好性能的编译选项）我知道 Monotouch 使用AOT 编译，并且它可以选择使用 llvm 作为编译器以进行一些优化。所以，我想知道对于 android 是否有相同的选项。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:00:54.390

AOT is not available in Mono for Android, I don't think it is on the road-map either.

As far as I understand JIT is not slower than AOT, rather the contrary, because JIT can use the information it knows about the environment it runs on to optimize code to it. An AOT compiler cannot know everything about the same environment.

This thread: [Why is Java faster when using a JIT vs. compiling to machine code?](https://stackoverflow.com/questions/1878696/why-is-java-faster-when-using-a-jit-vs-compiling-to-machine-code) has some answers that elaborates on this.

So I really doubt that you would get any performance improvements if there were an AOT compiler.

# javascript - 用jQuery从底部选择n：th子？

> ID：11163504
> 
> 赞同：2
> 
> 时间：2012-06-22T20:17:40.710
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery：选择列表中的最后 4 个项目](https://stackoverflow.com/questions/4617634/jquery-select-the-last-4-items-in-the-list)

jQuery 有 nth-child 伪类，但是有没有办法选择 say 3:rd to last child ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:19:27.983

假设您不一定需要使用`:nth-child()`符号，您可以使用负索引`eq()`：

```
$(selector).eq(-3); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4Y3Rb/)。

或者，在兼容的浏览器中，您可以简单地使用 CSS：

```
elementSelector:nth-last-child(3) {
    /* CSS declaration block */
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/4Y3Rb/1/)（在 Chromium 19/Ubuntu 11.04 中测试并确认工作）。

CSS 选择器，大概要感谢`document.querySelector()`/ `document.querySelectorAll()`，在 jQuery 中也可用作选择器：

```
$('li:nth-last-child(3)').css('background-color','#f90');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4Y3Rb/2/)

参考：

*   [`eq()`](http://api.jquery.com/eq/).

# sql - Informix - 从分区中选择

> ID：11163505
> 
> 赞同：1
> 
> 时间：2012-06-22T20:17:40.953
> 
> 标签：sql, informix, database-partitioning

我正在尝试在 Informix 中没有适用索引的非常大的表上执行选择。不幸的是，在该项目需要完成时添加适用的索引是不可能的 - 数据库更改有严格的程序，并且在我的组织中获得所需的签名需要很长时间。

该表是碎片化的，我之前从 Oracle 数据库中的特定分区中进行了选择。有没有办法在`SELECT`查询中指定片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:32:15.160

只是间接...

如果您的搜索条件部分地根据分区中使用的表达式确定要选择的行，那么 Informix 将执行“片段消除”以避免扫描不可能对答案做出贡献的分区（片段）。如果您有循环分区，则不可能消除碎片。如果您有表达式或区间碎片，那么您可以从碎片消除中受益。（因为碎片消除是性能上的一大胜利，所以只要有可能就会这样做。）

但是，最终，如果您不能放置正确的索引，查询性能可能会很慢，因为它可能需要表扫描，而这些可能比索引访问操作慢。也就是说，有时表扫描是处理查询的最快方法。只是这种情况并不常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:03:08.723

如何确定表是否使用循环分片？两种方式：

一种简单的方法是使用 dbschema 获取表/索引的架构

```
UNIXprompt> dbschema -d <db name> -ss -t <table name> 
```

如果您在表创建 DDL 中看到“循环”字样，那么您就会知道。

另一种，查询SMI：

```
database <db name>;
select unique(strategy) from sysfragments
 where fragtype = 'T'  
   and tabid = (select tabid from systables where tabname = '<table name>'; 
```

这是策略列的值键：
R = 循环分片策略
E = 基于表达式的分片策略
I = IN DBSPACE 子句指定特定位置作为分片策略的一部分
T = 基于表的分片策略
H = 表是一个具有表层次结构 (IDS) 的子表，或基于哈希的分片策略 (XPS)。

最后但并非最不重要的一点是，我使用 XLDB（迄今为止最大的表是 1.5k 宽，600 多列，600 亿条记录，是的，十亿），并且索引**确实会产生巨大的**差异，就像秒与小时一样（当然，我有≈100 个 vCPU 专用于我的数据库服务器）所以我建议你向你的变更控制委员会提出申请并创建你的索引，当你获得许可时，只要确保你使用“在线”子句，确定你的正确fillfactor 并且不要忘记更新统计信息（使用 Art 的 dostat）。

我的2美分...

# php - Symfony2：每次操作后执行一些代码

> ID：11163512
> 
> 赞同：9
> 
> 时间：2012-06-22T20:18:10.580
> 
> 标签：php, symfony

我最近在 Symfony2 中启动了一个项目，我需要在每个操作之前和之后运行一些方法以避免代码冗余（例如 Zend Framework 中的 preDispatch/postDispatch 和 Symfony1 中的 PreExecute/PostExecute）。

我创建了一个继承所有控制器的基类，并注册了一个事件侦听器以在运行请求的操作之前运行控制器的 preExecute() 方法，但是在阅读了大量的文档和问题之后，我仍然找不到如何运行 postExecute ()。

*Foo/BarBundle/Controller/BaseController.php：*

```
class BaseController extends Controller {
  protected $_user;
  protected $_em;

  public function preExecute() {
    $user = $this->get('security.context')->getToken()->getUser();
    $this->_user = $user instanceof User ? $user : null;
    $this->_em = $this->getDoctrine()->getEntityManager();
  }

  public function postExecute() {
    $this->_em->flush();
  }
} 
```

*Foo/BarBundle/Controller/FooController.php：*

```
class FooController extends BaseController {
  public function indexAction() {
    $this->_user->setName('Eric');
    $this->_em->persist($this->_user);
  }
} 
```

*Foo/BarBundle/EventListener/PreExecute.php：*

```
class PreExecute {
  public function onKernelController(FilterControllerEvent $event) {
    if (HttpKernelInterface::MASTER_REQUEST === $event->getRequestType()) {
      $controllers = $event->getController();
      if (is_array($controllers)) {
        $controller = $controllers[0];

        if (is_object($controller) && method_exists($controller, 'preExecute')) {
          $controller->preExecute();
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:55:49.640

[此处](https://github.com/symfony/symfony/issues/1975)对此进行了讨论，[schmittjoh](https://github.com/symfony/symfony/issues/1975#issuecomment-1829574)的这个特定示例可能会引导您朝着正确的方向前进。

```
<?php

class Listener
{
    public function onKernelController($event)
    {
        $currentController = $event->getController();
        $newController = function() use ($currentController) {
            // pre-execute
            $rs = call_user_func_array($currentController, func_get_args());
            // post-execute

            return $rs;
        };
        $event->setController($newController);
    }
} 
```

# php - AJAX/LocalStorage：是否可以将 JS 变量传递给 PHP？

> ID：11163513
> 
> 赞同：4
> 
> 时间：2012-06-22T20:18:20.857
> 
> 标签：php, javascript, jquery, ajax, request

我想知道，存放购物车的最佳方式是什么？
我考虑将产品 ID 存储在 localstorage/sessionstorage 中，然后使用 AJAX 从服务器检索产品。
唯一的问题是我不知道如何将项目从 localstorage 传递给 PHP ......
我猜这可能无法直接进行，虽然我不知道如何实现它，但我考虑了一个表单.. .
这个想法是，当用户点击“添加到购物车”时，项目 id 和数量被添加到本地存储中，当用户查看他的购物车时，项目详细信息（图像、名称、价格......）正在从中检索数据库。我可能会使用本教程
[http://verido.dk/index。](http://verido.dk/index.php/ressourcer/artikler/loading-and-saving-data-dynamically-using-php-jquery-and-mysql/)

我也可以放弃本地存储并使用会话和数据库，但我真的很想为用户提供动态的 Web 体验。

我刚刚想出的另一种可能的方法是使用像 file.php?prodid=...... 这样的 URL，尽管这样的 URL 可能会变得太长。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:24:42.233

'您必须记住，服务器端 (PHP) 代码在将代码转换为浏览器端代码之前会被读取。JavaScript 在浏览器端被操纵...

所以一维地，你不能将 JavaScript 传递给 PHP。

然而...

使用 Ajax，在您的情况下，我建议使用 JSON，您可以将 JavaScript 数据发送到 PHP 页面并将响应带回您的 JavaScript 方法。我认为这将满足您的需求。如果你愿意，我可以提供一个简单的例子。

//-- 下面的例子：

JavaScript：

```
//Ajax Method
function processAjax(queryString, processDiv, responseDiv) {

responseDiv.innerHTML = '';
var myAjax;
try {
    // Modern Browsers-->
    myAjax =new XMLHttpRequest();
} catch (e) {
    // antique ie browsers-->
    try {
        myAjax =new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            myAjax =new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
            // Something went wrong
            document.getElementById('processDiv').innerHTML="";
            alert("Your browser malfunctioned!  Please try again. Consider installing a modern browser if the problem persists.");
            return false;
        }
    }
}
myAjax.onreadystatechange = function() {
    if (myAjax.readyState == 4) {
        var ajaxResponse = myAjax.responseText;
                responseDiv.innerHTML = ajaxResponse;
        processDiv.innerHTML = "";

                    //NOTE: HERE IS WHERE AJAX IS FINISHED, SO IF YOU WANT TO DO SOMETHING ELSE HERE YOU CAN!
                    //POST PROCESSING----->
                    // IE: alert('I am finished processing now!');
                    // or call another function:
                    // anotherFunction();

            } else {
        processDiv.innerHTML = '<img src="http://www.mysite.com/images/loadingicon.gif" alt="processing....." />';
    }
}
myAjax.open("GET", queryString, true);
myAjax.send(null);

}

function sendStorage() {

   var helloVar = 'Hello, I am passed to PHP #1';
   var worldVar = 'I am the second value passed to PHP!';
   var processId = 'process_div';
   var resultId = 'result_div';
   var queryString = 'http://www.mysite.com/process.php?hello=' + helloVar + '&world=' + worldVar;

   processAjax(queryString, processId, resultId);

} 
```

现在对于一些 HTML：

```
<div id="content">
       <div id="process_div"> This is where processing will occur </div>
       <div id="result_div"> This is where my response will display </div>
</div> 
```

现在是一个 process.php（注意：为了安全起见，我强烈建议您不要在您的 JAVASCRIPT 中显示服务器端处理页面）

```
<?php

  //init
  $hello = '';
  $world = '';
  $errors = 0;

  //set
  //Security note: never trust a URL request.. you should clean all $_GET, $_REQUEST, AND $_POST with the PHP htmlspecialchars() method (take a look at php.net for that)
  (isset($_GET['hello'])) ? $hello = $_GET['hello'] : $errors++;
  (isset($_GET['world'])) ? $world = $_GET['world'] : $errors++;

  //process
  if($errors > 0) {
      echo 'Errors Detected! Missing querystring get data!';
  } else {
      echo '<p>Hello received: ' . $hello . '</p>';
      echo '<p>World received: ' . $world . '</p>';
      //now we can process $hello and $world server side!
  } 
```

?>

重要提示：您应该真正学习一些 JSON 和 $_POST 请求，因为它们更安全、更快，并且您可以轻松地操作返回的数据。我建议查看像 jquery 这样的库以获取简化示例。

我没有测试过这段代码，但它应该可以工作。如果你有问题或者这不能回答你的问题，请告诉我。

乐意效劳！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:24:20.980

使用 AJAX 将数据发送到服务器（GET 或 POST）并将这些值存储在服务器上的会话变量或 cookie 中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:22:57.237

您可以使用本地/会话存储数据并填充一些隐藏的输入，然后在 ajax 请求中提交相应的表单。为了使事情更清洁，您可以使用一个隐藏的输入并将其值设置为从您的存储数据创建的 JSON 对象。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-22T20:19:03.270

不，javascript 在客户端运行，php 在服务器上运行。

# iphone - iOS 上的 XSD 验证

> ID：11163514
> 
> 赞同：3
> 
> 时间：2012-06-22T20:18:38.437
> 
> 标签：iphone, ios, xml, xsd, xsd-validation

我想针对 iOS 上的 XSD 验证 XML 文件。文档提到使用 NSXMLDocument 来执行此操作，但它在 iOS 上不可用 =(。在 iOS 上是否有任何轻量级的替代方案可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:10:05.360

我最终使用了 libxml2 中的验证工具，因为它的库已经包含在 iOS 中。遵循此示例代码

```
#include <libxml/parser.h>
#include <libxml/xmlschemas.h>

int is_valid(const xmlDocPtr doc, const char *schema_filename)
{
    xmlDocPtr schema_doc = xmlReadFile(schema_filename, NULL, XML_PARSE_NONET);
    if (schema_doc == NULL) {
        /* the schema cannot be loaded or is not well-formed */
        return -1;
    }
    xmlSchemaParserCtxtPtr parser_ctxt = xmlSchemaNewDocParserCtxt(schema_doc);
    if (parser_ctxt == NULL) {
        /* unable to create a parser context for the schema */
        xmlFreeDoc(schema_doc);
        return -2;
    }
    xmlSchemaPtr schema = xmlSchemaParse(parser_ctxt);
    if (schema == NULL) {
        /* the schema itself is not valid */
        xmlSchemaFreeParserCtxt(parser_ctxt);
        xmlFreeDoc(schema_doc);
        return -3;
    }
    xmlSchemaValidCtxtPtr valid_ctxt = xmlSchemaNewValidCtxt(schema);
    if (valid_ctxt == NULL) {
        /* unable to create a validation context for the schema */
        xmlSchemaFree(schema);
        xmlSchemaFreeParserCtxt(parser_ctxt);
        xmlFreeDoc(schema_doc);
        return -4; 
    }
    int is_valid = (xmlSchemaValidateDoc(valid_ctxt, doc) == 0);
    xmlSchemaFreeValidCtxt(valid_ctxt);
    xmlSchemaFree(schema);
    xmlSchemaFreeParserCtxt(parser_ctxt);
    xmlFreeDoc(schema_doc);
    /* force the return value to be non-negative on success */
    return is_valid ? 1 : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:38:25.710

似乎在Objective C中做到这一点并不容易，但是在这个SO问题中列出了几个想法：[Possible to validate xml against xsd using Objc/iPhone code at runtime](https://stackoverflow.com/questions/8939701/possible-to-validate-xml-against-xsd-using-objc-iphone-code-at-runtime)

似乎 CodeSynthesis 在这里支持这一点：[http ://wiki.codesynthesis.com/Using_XSDE_in_iPhone_Applications](http://wiki.codesynthesis.com/Using_XSDE_in_iPhone_Applications)

不过，此时我真的只是从 Stack Overflow 问题中提取链接和想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:32:05.173

没有通用的模式验证器。尝试使用上面建议的 XSDE。它非常快，非常非常可靠。

不错的教程在这里：[http ://amaturitsolutions.blogspot.hu/2012/10/validate-xsd-schema-in-your-ios.html](http://amateuritsolutions.blogspot.hu/2012/10/validate-xsd-schema-in-your-ios.html)

# c# - 从属下拉列表。从一个列表过滤到另一个列表

> ID：11163515
> 
> 赞同：0
> 
> 时间：2012-06-22T20:18:40.640
> 
> 标签：c#, asp.net, oracle

我在将返回参数传递到第二个下拉列表时遇到问题。第二个列表完全取决于第一个列表的选择。我很确定SP没问题。同样，我的问题是传递价值。

存储过程

```
 PROCEDURE ev_dropdown(
      cur_out    IN OUT   eqpack.t_cur_out,
      p_result   OUT      VARCHAR2,
      p_reference_id  IN NUMBER
   )

   IS
   BEGIN
      OPEN cur_out FOR

         SELECT ev_id, ev

           FROM event WHERE a_ref = p_reference_id;

   EXCEPTION
      WHEN OTHERS
      THEN
         p_result :=
                   'An error occurred in get_events_dropdown - ' || SQLERRM;

   END ev_dropdown; 
```

。CS

```
 public void populateSpecificEv(int p)
        {

            DataTable dtRef = CreateReferenceDT();
            string conn = GetConnectString();
            using (OracleConnection connection = new OracleConnection(conn))
            using (OracleCommand command = connection.CreateCommand())
            {
                command.CommandText = "eqpackage.get_events_dropdown";
                command.CommandType = CommandType.StoredProcedure;

                command.Parameters["p_reference_id"].Value = p;

                OracleDataReader reader;
                reader = command.ExecuteReader();

                dtRef.Rows.Add("0", "-select-");

                while (reader.Read())
                {

                    dtRef.Rows.Add(reader[0], reader[1]);

                }

                connection.Open();
                command.ExecuteNonQuery();

                command.Connection.Close();
                command.Connection.Dispose();
                return dtRef; //Error -returns void, a return keyword must not be followed by an object expression  

            }
          }

        DataTable CreateReferenceDT()
        {
            DataTable dt = new DataTable();

            dt.Columns.Add("id", typeof(int));
            dt.Columns.Add("name", typeof(string));

            return dt;

        } 
```

aspx.cs

```
protected void ddlSys_SelectedIndexChanged1(object sender, EventArgs e)
{

    int p = int.Parse(ddlSystems.SelectedItem.Value);
    dbase.populateSpecificEvent(p);

    DataTable dt1 = dbase.PopulateEvDropDown();
    ddlEv.DataSource = dt1;
    ddlEv.DataTextField = "name";
    ddlEv.DataValueField = "id";
    ddlEv.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:25:26.353

我相信你想更新你的存储过程实际上只是执行一个 SELECT 语句而不显式创建自己的游标。然后，您将调用[command.ExecuteQuery()](http://msdn.microsoft.com/en-us/library/cc093a69.aspx)（我看到您正在这样做），这将返回一个[IDataReader](http://msdn.microsoft.com/en-us/library/system.data.idatareader)，它基本上是一个只进的只读游标。

我会删除以下额外的行：

```
connection.Open();
command.ExecuteNonQuery();
command.Connection.Close();
command.Connection.Dispose(); 
```

如果您将存储过程更改为实际上只是一个选择语句，那么您可以使用`while(reader.Read())`循环读取行，一次一个，然后将它们插入到您的`DataTable`中，或者简单地调用[DataTable.Load(IDataReader)](http://msdn.microsoft.com/en-us/library/7x8ccbsb)。

# jquery - 如何判断我的 jQuery 代码是否在 iFrame 中运行？

> ID：11163516
> 
> 赞同：0
> 
> 时间：2012-06-22T20:18:42.410
> 
> 标签：jquery, iframe

我在网站上遇到了很多问题，因为我的 jQuery 由于它在 iFrame 内呈现而导致错误。有什么方法可以告诉我的 jQuery 在 iF​​rame 内时不要加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:23:12.607

这应该有效：

```
window.opener != null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:29:51.187

正如 Greg 在问题评论中的链接中所说，您可以使用 'if(top===self){ outside iframe code here } else { inside iframe code here}' 来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:29:59.347

来自@Greg 的回答

`if (top === self) { not in a frame } else { in a frame }`

top 和 self 都是窗口对象（以及父窗口），因此您正在查看您的窗口是否是顶部窗口。

[格雷格回答](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)

# css - 为什么我的 css 和图像无法被 maven 读取

> ID：11163517
> 
> 赞同：1
> 
> 时间：2012-06-22T20:19:01.220
> 
> 标签：css, image, maven

我有一个 maven 项目，我想在项目上使用 css，但它只显示 index.jsp 页面，没有任何图像和 css。它可以依赖什么？

我将我的 css 和图像放在资源下，这是我的 servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:context="http://www.springframework.org/schema/context"
             xmlns:mvc="http://www.springframework.org/schema/mvc"
             xsi:schemaLocation="
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <mvc:annotation-driven />

    <mvc:resources mapping="/resources/**" location="/resources/" />

    <mvc:default-servlet-handler />

    <beans:bean
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <beans:import resource="controllers.xml" />

</beans:beans> 
```

请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:33:53.287

对我来说，这听起来不像是 Maven 问题。我想您可能已经将 Spring 示例资源映射与标准 Maven 资源文件夹混淆了。在这种情况下，您的图像应该相对于 src/main/webapp 文件夹（即 src/main/webapp/resources 而不是 src/main/resources）。Maven 本身并没有对 src/main/webapp/resources 文件夹做任何特别的事情。

更新

为了清楚起见，webapp 下的文件夹“resources”可以命名为任何名称。为了减少混淆，我将我的重命名为“webstuff”。例如，我有

```
src/main/webapp/webstuff
src/main/webapp/webstuff/css/base.css
src/main/webapp/webstuff/images/globe.png 
```

现在，在我的 Spring 配置中，我将其更改为如下所示：

```
<mvc:resources mapping="/webstuff/**" location="/webstuff/" /> 
```

最后一部分是我如何在我的 jsp 中引用 css 和图像：

```
<html>
    <link rel="stylesheet" href="webstuff/css/default.css" type="text/css">
    <body>
    <h1>Hello World!</h1>
    <img src="webstuff/images/globe.png">
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T01:50:56.020

您是在 Eclipse 中将项目创建为动态 Web 应用程序，还是使用 Maven 原型然后将项目导入 Eclipse？因为，几天前我也面临同样的问题。这是因为您拥有的文件夹结构未在您的 Web 应用程序中正确映射。我建议您这样做，尝试从目标文件夹中提取战争并检查文件（jsp、htlm 和 java）是否位于您在 servlet-context 中提到的正确位置。如果它在战争中是正确的，那么它应该可以正常工作。如果某些文件放错了位置，那么您将面临问题。

您可以使用 maven 的 war 插件配置文件应该在 .war 中执行的路径。看看[这个](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)了解更多。

按照[这个](http://viralpatel.net/blogs/generate-dynamic-web-project-maven-eclipse-wtp/)教程来看看谁来创建一个 web 项目（也适用于 spring）并尝试一下。

# ios - 在给定一般链接的情况下获得指向 youtube 视频的直接链接

> ID：11163519
> 
> 赞同：2
> 
> 时间：2012-06-22T20:19:03.630
> 
> 标签：ios, youtube-api

我正在制作一个需要加载一些 youtube 视频的 iOS 应用程序。我想知道是否有一种简单的方法可以获得视频的直接链接，这样我就可以直接播放视频，而不是加载普通的 youtube 播放器页面。

因此，如果我有如下链接： [http ://www.youtube.com/watch?v=6tQGqlXX7Zs&feature=youtube_gdata](http://www.youtube.com/watch?v=6tQGqlXX7Zs&feature=youtube_gdata)

我可以从该视频中获得直接链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:02:48.283

在下面的链接中，`v`参数是链接id

[http://www.youtube.com/watch?v=36ADLojIQc0&feature=something&otherparameter=othervalue](http://www.youtube.com/watch?v=36ADLojIQc0&feature=something&otherparameter=othervalue)

因此，您必须简单地从查询字符串中获取视频 id，而忽略所有其他参数，然后您将得到类似于下面此链接的内容（只是使用不同的 id）

[http://www.youtube.com/watch?v=36ADLojIQc0](http://www.youtube.com/watch?v=36ADLojIQc0)

我不知道任何特定文档的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T06:57:44.633

更好的是，从 url 中获取 v 参数（v= 直到 & 之后的所有内容）并将其粘贴到这个 url 中：[http ://www.youtube.com/v/YOUTUBEID](http://www.youtube.com/v/YOUTUBEID)

YOUTUBEID 是 v 参数是什么，这将为您提供视频的直接链接，并且不会包含任何 youtube 垃圾。

* * *

您可能感兴趣的其他一些信息：

试试这个 url 方案，[http://www.youtube.com/v/YOUTUBEID? loop=1&autoplay=1](http://www.youtube.com/v/YOUTUBEID?loop=1&autoplay=1)

它将自动播放视频并无休止地循环播放。

该方案的一个缺陷是，它将这些视频视为嵌入式视频，并可能阻止您观看某些受版权保护的视频。

# django - 多对多字段上的 Django prefetch_related 总是产生空数组

> ID：11163521
> 
> 赞同：0
> 
> 时间：2012-06-22T20:19:13.697
> 
> 标签：django, orm, many-to-many, prefetch

我在使用 Django 的 prefetch_related 时遇到问题。

这是我的模型。

```
class Terrain(models.Model):
    name = models.CharField(max_length=255)

class Route(models.Model):
    name = models.CharField(max_length=255)
    terrains = models.ManyToManyField(Terrain) 
```

这就是我使用 prefetch_related 时发生的情况。

```
>>> Route.objects.all()[0].terrains.all()
[<Terrain: Beach>]
>>> Route.objects.all().prefetch_related('terrains')[0].terrains.all()
[] 
```

知道我在这里做错了什么吗？

Python 2.7 版 Django 1.4 版 DB 后端：SQLite（我也尝试使用 MySQL，结果相同）

这里有一些查询调试（来自 IPython 控制台），所以你可以看到那里发生了什么。

```
In [11]: Route.objects.all().prefetch_related('terrains')[0].terrains.all()
DEBUG 2012-06-22 20:10:09,569 util (0.000) SELECT "asdf_route"."id", "asdf_route"."name" FROM "asdf_route" LIMIT 1; args=()
DEBUG 2012-06-22 20:10:09,571 util (0.000) SELECT ("asdf_route_terrains"."route_id") AS "_prefetch_related_val", "asdf_terrain"."id", "asdf_terrain"."name" FROM "asdf_terrain" INNER JOIN "asdf_route_terrains" ON ("asdf_terrain"."id" = "asdf_route_terrains"."terrain_id") WHERE "asdf_route_terrains"."route_id" IN (1); args=(1,)
Out[11]: [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:15:35.650

哎呀。想通了问题。前段时间有一个错误，如果您的模型的 pk 字段是非文本（如整数），则 prefetch_related 将不起作用。我手动修补了这一行：

```
vals = rel_obj_cache.get(instance_attr_val, []) 
```

在 query.py 的末尾附近看起来像这样：

```
vals = rel_obj_cache.get(unicode(instance_attr_val), []) 
```

这解决了我的问题。但从那以后，我猜这个问题以另一种方式正式解决了，现在我的 unicode 转换导致字典查找返回一个空列表（基本上与原始错误相反）。

所以，只需要撤消我的手动补丁，现在它工作正常。难怪我找不到其他人有这个问题！

# php - Comparing Unix timestamps

> ID：11163529
> 
> 赞同：0
> 
> 时间：2012-06-22T20:19:33.407
> 
> 标签：php

I need to compare two Unix timestamps and I'm having trouble with the math. I know a Unix timestamp is the number of seconds since January 1, 1970\. But I'm doing something wrong with the math. I'm trying to detect whether it has been 3 minutes from when the file was last modified. Here is my code:

```
if (file_exists($filename)) {
    $filemodtime = filemtime($filename);
}

$three_min_from_now = mktime(0, 3, 0, 0, 0, 0);

if (time() >= $filemodtime + $three_min_from_now) {
     // do stuff
} else {
     // do other stuff
} 
```

But the else clause keeps being satisfied, not the if, even when the if should be true. I think the issue is my math. Can someone help? Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:30:19.630

```
$three_min_from_now = mktime(0, 3, 0, 0, 0, 0);

if (time() >= $filemodtime + $three_min_from_now) { 
```

您在这里所做的是检查 time() 是否大于文件修改的 unix 时间戳，再加上三分钟后的 unix 时间戳。这不太可能是真的——你最好把 180 加到 $filemodtime 上：

```
if (time() >= $filemodtime + (60 * 3)) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T20:27:39.813

我的建议是像这样重做你的 if 语句：

```
if((time() - $filemodtime) >= 180) 
```

它消除了在“从现在起 3 分钟”发生时明确计算的需要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:27:22.873

```
if (file_exists($filename)) {
    $filemodtime = filemtime($filename);
}

if (time() - $filemodtime > (3*60)) {
     // it been more than 3 minutes
} else {
     // do other stuff
} 
```

只需比较两个整数时间戳值...

# php - mysql_fetch_array/row only fetch 1 data

> ID：11163532
> 
> 赞同：1
> 
> 时间：2012-06-22T20:19:45.647
> 
> 标签：php, mysql

The problem is probably quite simple.

```
$q = "SELECT id FROM users
        WHERE name LIKE '%$u%' OR active LIKE '%$u%'";
        echo $q;
$u = mysql_query($q) or die("There is a server error : " . mysql_error());
$u = mysql_fetch_array($u);
        print_r($u); 
```

But it returns me

```
[id] => 6 
```

When I execute the query in Mysql Workbench it returns

```
6
7
8 
```

It's probably a fetching problem but I don't understand why. Thanks :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:22:02.573

那是因为`mysql_fetch_array`只返回一行。要获得更多行，它会循环工作。

```
while ($row = mysql_fetch_array($u)) {
   print_r($row);
} 
```

但是，请阅读我关于`mysql_*`函数使用的评论。这个：

> 欢迎来到堆栈溢出！请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:44:00.357

使用`mysql_fetch_array($u)`没有 while 循环返回单个记录。要获取整个结果集，您需要使用`mysql_fetch_array($u)`while 循环。例如：

```
$q = "SELECT id FROM users WHERE name LIKE '%$u%' OR active LIKE '%$u%'";
$u = mysql_query($q) or die("There is a server error : " . mysql_error());
while($row = mysql_fetch_array($u))
{
print_r($row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:22:32.310

`mysql_fetch_array`获取单行 - 您需要遍历结果集以获取其余结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:26:29.693

`mysql_fetch_array()`只返回一行。要获得更多行，您需要一个循环。

还`mysql_fetch_array()`返回字符串关联和整数索引。你想使用的是`mysql_fetch_assoc()`这样的：

```
while ($data = mysql_fetch_assoc($u)) {
   echo $data['id'];
} 
```

# html - 居中 div 和图像，margin:0px auto 0px auto 不起作用？

> ID：11163542
> 
> 赞同：1
> 
> 时间：2012-06-22T20:20:24.983
> 
> 标签：html, css

我正在尝试创建一个表格，其中一个列中有一个 30px 的小图像，但是，我很难弄清楚如何将其他 div、表格等中的图像/div 居中...

我熟悉将边距设置为：“margin:0px auto 0px auto;” 但是，这并不总是有效，并且在下面的示例中也无效。我想知道是否有人知道一种更一致地居中元素的方法？或者如果有解释为什么我的方法不起作用？图片只有30px，td元素是100px甚至更大。

```
 <td><a href="#"><img src="images/globe.png" style="width:30px;"></a></td> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T20:21:34.887

你有没有尝试过？`text-align: center;`

[http://jsfiddle.net/Eqed4/](http://jsfiddle.net/Eqed4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:39:59.623

对于表，您可以使用

```
<table border="1" cellpadding="0" width="100" height="100">
  <tr>
    <td align="center" >
        <a href="#">
           <img src="{IMG_SRC}" style="width:30px;">
        </a>
    </td>
  </tr>
 </table> 
```

在这种情况下，`align="center"`将适用于 td 标签。

对于 div 标签，

```
<Div style="width:100px;border:1px solid;line-height: 100px;text-align:center;">
    <a href="#">
      <img src="{IMG_SRC}" style="vertical-align: middle;width:30px;" >
    </a>
</div> 
```

在这里，您必须 `line-height: 100px;text-align:center;`为 div 元素添加样式，其中行高将是 div 元素的高度。您还必须添加`vertical-align: middle;`到您的 img 标签。

这应该有效。

请参考工作[示例](http://jsfiddle.net/QtKHx/)

**注意：**我添加了一些额外的样式，例如可以删除边框等。此外，此解决方案还将使图像垂直和水平居中。

# ios - 在方法中包装来自 AFNetworking 的成功失败块

> ID：11163546
> 
> 赞同：7
> 
> 时间：2012-06-22T20:20:29.367
> 
> 标签：ios, block, afnetworking

在编写库时，我需要将来自 AFNetworking 调用的响应封装在我自己的方法中。这段代码让我很接近：

```
MyDevice *devices = [[MyDevice alloc] init];
  [devices getDevices:@"devices.json?user_id=10" success:^(AFHTTPRequestOperation *operation, id responseObject) {

    ... can process json object here ...

}

 - (void)getDevices:(NSString *)netPath success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
    failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error)) failure {
    [[MyApiClient sharedDeviceServiceInstance] getPath:[NSString stringWithFormat:@"%@", netPath]
      parameters:nil success:success  failure:failure];
} 
```

但是，我需要在返回 getDevices() 之前处理从 getPath 返回的 json 对象数据。我试过这个：

```
- (void)getDevices:(NSString *)netPath success:(void (^)(id  myResults))success
        failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error)) failure {

  [[MyApiClient sharedDeviceServiceInstance] getPath:[NSString stringWithFormat:@"%@", netPath]
    parameters:nil
    success:^(AFHTTPRequestOperation *operation, id responseObject)
   {
     ... can process json object here ...
   }                           
   failure:^(AFHTTPRequestOperation *operation, NSError *error) {
     ... process errors here ...
   }];
} 
```

但是现在没有回调 getDevices()。那么如何处理 getDevices 中的 json 对象并在完成时返回块？感谢您的帮助，因为我是块新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T20:37:32.820

这很容易做到：只需像函数一样调用块来调用它。

```
- (void)getDevices:(NSString *)netPath 
           success:(void (^)(id  myResults))success
           failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error)) failure
{
  [[MyApiClient sharedDeviceServiceInstance] 
     getPath:netPath
  parameters:nil
     success:^(AFHTTPRequestOperation *operation, id responseObject)
     {
       id myResults = nil;
       // ... can process json object here ...
       success(myResults);
     }                           
     failure:^(AFHTTPRequestOperation *operation, NSError *error) {
       // ... process errors here ...
       failure(operation, error);
     }];
} 
```

**编辑：**

根据您发布的代码，我认为以下界面会更清晰：

```
typedef void(^tFailureBlock)(NSError *error);

- (void)getDevicesForUserID:(NSString *)userID 
                    success:(void (^)(NSArray* devices))successBlock
                    failure:(tFailureBlock)failureBlock; 
```

# asp.net-mvc-4 - MVC 4 RC - Aspnet_regsql.exe

> ID：11163547
> 
> 赞同：8
> 
> 时间：2012-06-22T20:20:35.707
> 
> 标签：asp.net-mvc-4

我正在尝试使用 MVC 4 RC 默认模板启用登录。我的做法与 MVC 3 中的 Aspnet_regsql.exe -> SQL 服务器相同。然后我将连接字符串指向 SQL 服务器。

当我尝试注册一个新用户时，我得到了这个：

```
Server Error in '/' Application.

Invalid column name 'ApplicationId'.
Invalid column name 'UserName'.
Invalid column name 'ApplicationId'.
Invalid column name 'UserId'.
Invalid column name 'UserName'.
Invalid column name 'IsAnonymous'.
Invalid column name 'LastActivityDate'. 
```

AccountController 中的错误：

```
 Line 85: // Attempt to register the user
              Line 86: MembershipCreateStatus createStatus;
Error here -> Line 87: Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus);
              Line 88:
              Line 89: if (createStatus == MembershipCreateStatus.Success) 
```

我一直在尝试用谷歌搜索这个错误，但到目前为止还没有运气。在 MVC 4 中可能有其他方式我应该这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T11:32:15.750

`aspnet_regsql.exe`我收到了同样的错误，因为我使用的是2.x 版的成员资格表。我`aspnet_regsql.exe`在版本 2.x 文件夹中运行可执行文件并卸载了表。然后使用新的通用提供程序，您不再需要使用上述可执行文件，这些表是在您第一次连接时创建的。

本文更详细地介绍了旧的 aspnet_Memembership 与 Universal Providers 之间的区别。

[更强的密码拥有网络](http://dotnet.dzone.com/articles/stronger-password-hashing-net)

**文章的关键点：**

首先，**没有更多** `aspnet_regsql`，您只需确保您的连接字符串已设置并且该帐户具有 DBO 权限（不用担心，它不必保持这种状态）然后运行应用程序并尝试执行任何应该执行的操作导致会员提供者访问数据库（即登录 - 没有帐户并不重要）。

这就是它的全部。

# opengl - 如何从一个点创建定向光

> ID：11163550
> 
> 赞同：1
> 
> 时间：2012-06-22T20:20:47.150
> 
> 标签：opengl

我尝试在openGL中用一盏灯制作定向光，但我遇到了很大的麻烦。我将灯光位置设置为灯，但没有定向光效果。我指定了法线。此外，启用照明时对象的颜色存在问题。我试图设置glMaterial，但灯光效果隐藏起来。应该怎么做？

我的代码在这里：

```
#include "stdafx.h"
#include <windows.h> 
#include "glew.h"                                        
#include "tex.h"
#include <GL/glut.h>
#include <math.h>
#include <cmath>

const float pi = 3.1415926535897932384626433832795;

class Camera
{
public:
    static double alfa;
    static double wysokosc;
    static double wzrostAlfa;
    static double wzrostWysokosci;
    static double zoom;

    static void ustaw()
    {
        glScalef(zoom, zoom, zoom);
    }

    static void powieksz()
    {
        zoom += 0.25;
    }

    static void pomniejsz()
    {
        if (zoom <= 1)
        {
            zoom = 1;
            return;
        }
        zoom -= 0.25;
    }

    static double x() 
    {
        return 20 * sin(pi * alfa / 180.0);
    }

    static double y() 
    {
        return wysokosc;
    }

    static double z() 
    {
        return 20 * cos(pi * alfa / 180.0);
    }

    static void Prawo()
    {
        alfa += wzrostAlfa;
    }

    static void Lewo() 
    {
        alfa -= wzrostAlfa;
    }

    static void Gora()
    {
        wysokosc += wzrostWysokosci;
    }

    static void Dol() 
    {
        wysokosc -= wzrostWysokosci;
    }
};

class RuchomaFigura
{
protected:
    double promien;
    double x;
    double y;
    double z;
    float predkosc;
    int *tekstura;
    int kat;

public:
    /*
    *   r - promien
    *   p - maksymalna wysokosc unoszenia
    *   x, z - 'x' i 'z' z polozenia
    *   k - kierunek ruchu
    *   pr - predkosc ruchu
    */
    RuchomaFigura(double r, int *t, double x, double z, float pr):
        promien(r), tekstura(t), predkosc(pr), x(x), z(z) { }

    void odswiez() 
    {
        if (kat < 360)
        {
            kat += predkosc;
        }
        else
        {
            kat = predkosc;
        }

        glPushMatrix();
            glRotatef(kat, 0, 1, 0);
            rysuj();
        glPopMatrix();
    }

    virtual void rysuj() = 0;
};

class Pilka : public RuchomaFigura 
{
public:
    Pilka(double r, int *t, double x, double z, float pr):
      RuchomaFigura(r, t, x, z, pr) { }

    void rysuj()
    {
        GLUquadric *obiekt = gluNewQuadric();
        gluQuadricTexture(obiekt, GL_TRUE);

        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, *tekstura);
        glMatrixMode(GL_TEXTURE); 
        gluSphere(obiekt, promien, 30, 30);
        glDisable(GL_TEXTURE_2D);

        glMatrixMode(GL_MODELVIEW);
    }
};

double Camera::alfa = 0;
double Camera::wysokosc = 3;
double Camera::wzrostAlfa = 1.5;
double Camera::wzrostWysokosci = 0.5;
double Camera::zoom = 1;

int textures[5];

Pilka balls[] = {
    Pilka(0.4, &textures[2], 3.5, 3.5, 2),
};

void uklad()
{
    glBegin(GL_LINES);
        glColor3f(0.0, 1.0, 0.0); //zielona oś X
        glVertex3f(-5.0, 0.0, 0.0);
        glVertex3f(5.0, 0.0, 0.0); 

        glColor3f(0.0, 0.0, 1.0); // niebieska oś Y
        glVertex3f(0.0, -5.0, 0.0);
        glVertex3f(0.0,  5.0, 0.0);

        glColor3f(0.7,  0.7, 0.7); // czarna oś Z
        glVertex3f(0.0, 0.0, -5.0);
        glVertex3f(0.0, 0.0,  5.0);
    glEnd();
}

void prostopadloscian(float x, float y, float z, float red, float green, float blue)
{
    glColor3f(red, green, blue);

    glBegin(GL_POLYGON);
        glNormal3f(0, -1, 0);
        glVertex3f(-x,-y,-z);
        glVertex3f(x,-y,-z);
        glVertex3f(x,-y,z);
        glVertex3f(-x,-y,z);
    glEnd();

    glBegin(GL_POLYGON);
        glNormal3f(0,1,0);
        glVertex3f(-x,y,-z);
        glVertex3f(x,y,-z);
        glVertex3f(x,y,z);
        glVertex3f(-x,y,z);
    glEnd();

    glBegin(GL_POLYGON);
        glNormal3f(-1,0,0);
        glVertex3f(-x,y,z);
        glVertex3f(-x,-y,z);
        glVertex3f(-x,-y,-z);
        glVertex3f(-x,y,-z);
    glEnd();

    glBegin(GL_POLYGON);
        glNormal3f(0,0,-1);
        glVertex3f(-x,-y,-z);
        glVertex3f(x,-y,-z);
        glVertex3f(x,y,-z);
        glVertex3f(-x,y,-z);
    glEnd();

    glBegin(GL_POLYGON);        
        glNormal3f(1,0,0);
        glVertex3f(x,y,z);
        glVertex3f(x,-y,z);
        glVertex3f(x,-y,-z);
        glVertex3f(x,y,-z);
    glEnd();

    glBegin(GL_POLYGON);
        glNormal3f(0,0,1);
        glVertex3f(-x,y,z);
        glVertex3f(-x,-y,z);
        glVertex3f(-x,-y,-z);
        glVertex3f(-x,y,-z);
    glEnd();
}

void krzeslo()
{
    // nogi krzesla
    glPushMatrix();
        glTranslatef(-0.8, 0, 0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.8, 0, 0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(-0.8, 0, -0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.8, 0, -0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();

    // siedzenie
    glPushMatrix();
        glTranslatef(0.0, 1.101, 0.0);
        prostopadloscian(1, 0.1, 1, 0.65, 0.50, 0.39);
    glPopMatrix();

    glPushMatrix();
    glTranslatef(0.0, 0.201, 0.0);
    // oparcie
    // krawedzie boczne oparcia
    glPushMatrix();
        glTranslatef(-0.8, 2.0, -0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(0.8, 2.0, -0.8);
        prostopadloscian(0.1, 1.0, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();

    // dolna krawedz oparcia
    glPushMatrix();
        glTranslatef(0.0, 1.85, -0.8);
        prostopadloscian(0.7, 0.1, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();

    // tralki krzesla
    // tralka srodkowa
    glPushMatrix();
        glTranslatef(-0.0, 2.35, -0.8);
        prostopadloscian(0.05, 0.4, 0.05, 0.35, 0.16, 0.14);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(-0.4, 2.35, -0.8);
        prostopadloscian(0.05, 0.4, 0.05, 0.35, 0.16, 0.14);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(0.4, 2.35, -0.8);
        prostopadloscian(0.05, 0.4, 0.05, 0.35, 0.16, 0.14);
    glPopMatrix();
    // tralki krzesla

    // gorna krawedz oparcia
    glPushMatrix();
        glTranslatef(0.0, 2.85, -0.8);
        prostopadloscian(0.7,0.1,0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    // koniec oparcia
    glPopMatrix();
}

void szafa()
{
    // rama 
    glPushMatrix();
        glTranslatef(0.0, -3.0, 0.0);
        prostopadloscian(1.3, 0.1, 1.0, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.0, 3.0, 0.0);
        prostopadloscian(1.3, 0.1, 1.0, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(-1.2, 0.0, 0.0);
        prostopadloscian(0.1, 3.0, 1.0, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(1.2, 0.0, 0.0);
        prostopadloscian(0.1, 3.0, 1.0, 0.35, 0.16, 0.14);
    glPopMatrix();

    // tylna sciana
    glPushMatrix();
        glTranslatef(0.0, 0.0, -0.9);
        prostopadloscian(1.1, 2.9, 0.1, 0.59, 0.41, 0.31);
    glPopMatrix();

    // przednia część
    glPushMatrix();
        glTranslatef(-0.2, 0.0, 1.7);
        glRotatef(-30.0, 0.0, 1.0, 0.0);
        prostopadloscian(1.1, 2.9, 0.1, 0.91, 0.76, 0.65);
    glPopMatrix();

    // uchwyt
    glPushMatrix();
        glTranslatef(0.5, 0.0, 2.2);
        glRotatef(-30.0, 0.0, 1.0, 0.0);
        prostopadloscian(0.1, 0.1, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
}

void stolik()
{
    // nogi
    glPushMatrix();
        glTranslatef(-0.8, 0, 1.8);
        prostopadloscian(0.1, 1.4, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.8, 0, 1.8);
        prostopadloscian(0.1, 1.4, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(-0.8, 0, -1.8);
        prostopadloscian(0.1, 1.4, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.8, 0, -1.8);
        prostopadloscian(0.1, 1.4, 0.1, 0.35, 0.16, 0.14);
    glPopMatrix();

    // blat
    glPushMatrix();
        glTranslatef(0.0, 1.5, 0.0);
        prostopadloscian(1, 0.1, 2, 0.35, 0.16, 0.14);
    glPopMatrix();

    // zeszyt
    glPushMatrix();
        glTranslatef(0.0, 1.701, 1.0);
        glRotatef(50.0, 0.0, 1.0, 0.0);
        prostopadloscian(0.3, 0.1, 0.5, 0.81, 0.71, 0.23);
    glPopMatrix();
}

void lozko()
{
    glPushMatrix();
        glTranslatef(-1.6, 0, 4.6);
        prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(1.6, 0, 4.6);
        prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(-1.6, 0, -4.6);
        prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(1.6, 0, -4.6);
        prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(0.0, 0.559, 0.0);
        prostopadloscian(2,0.3,5,0.85,0.85,0.95);
    glPopMatrix();

    // poduszki
    glPushMatrix();
        glTranslatef(0.0, 1.1, -4.0);
        prostopadloscian(1.3,0.2,0.6,0.137255,0.419608,0.556863);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.0, 1.1, 4.0);
        prostopadloscian(1.3,0.2,0.6,0.137255,0.419608,0.556863);
    glPopMatrix();
}

void polka()
{
    glPushMatrix();
        prostopadloscian(2.5, 0.1, 0.5, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(-2.6, 0, 0);
        prostopadloscian(0.1, 0.25, 0.5, 0.35, 0.16, 0.14);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(2.6, 0, 0);
        prostopadloscian(0.1, 0.25, 0.5, 0.35, 0.16, 0.14);
    glPopMatrix();

    // ksiazki
    // pierwsza od lewej
    glPushMatrix();
        glTranslatef(-1.5, 0.601, 0.0);
        prostopadloscian(0.2, 0.5, 0.3, 0.59, 0.41, 0.31);
    glPopMatrix();
    // druga
    glPushMatrix();
        glTranslatef(-1.0, 0.601, 0.0);
        prostopadloscian(0.2, 0.5, 0.3, 0.0, 0.0, 0.0);
    glPopMatrix();
    // ostatnia
    glPushMatrix();
        glTranslatef(-0.45, 0.601, 0.0);
        glRotatef(30.0, 0, 0, 1);
        prostopadloscian(0.1, 0.5, 0.3, 0.81, 0.71, 0.23);
    glPopMatrix();
}

void lampa()
{
    glPushMatrix();
        prostopadloscian(0.05, 1.0, 0.05, 0.5f, 0.35f, 0.05f);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.0, -1.2, 0);
        prostopadloscian(0.7, 0.2, 0.7, 1.0f, 1.0f, 1.0f);
    glPopMatrix();
}

void lampka()
{
    glPushMatrix();
        glTranslatef(0.0, 0.01, 0);
        prostopadloscian(0.3, 0.05, 0.2, 0.0f, 0.0f, 0.0f);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.0, 0.651, 0);
        prostopadloscian(0.05, 0.6, 0.05, 0.90, 0.91, 0.98);
    glPopMatrix();
    glPushMatrix();
        glTranslatef(0.0, 1.651, 0);
        prostopadloscian(0.4, 0.4, 0.4, 0.91, 0.76, 0.65);
    glPopMatrix();
}

void obraz()
{
    // Ramka
    glPushMatrix();
        glTranslatef(0.0, -2.0, -7.8);
        glPushMatrix();
            prostopadloscian(2.1, 0.1, 0.1, 0.35, 0.16, 0.14);
            glTranslatef(0.0, 4.1, 0.0);
            prostopadloscian(2.1, 0.1, 0.1, 0.35, 0.16, 0.14);
            glTranslatef(-2.0, -2.1, 0.0);
            prostopadloscian(0.1, 2.0, 0.1, 0.35, 0.16, 0.14);
            glTranslatef(4.0, 0.0, 0.0);
            prostopadloscian(0.1, 2.0, 0.1, 0.35, 0.16, 0.14);
        glPopMatrix();
    glPopMatrix();

    // Obraz
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, textures[4]);
    glTexEnvi(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_REPLACE);
    glMatrixMode(GL_TEXTURE);

    glBegin(GL_POLYGON);
        glNormal3f(0,0,1);
        glTexCoord2f(0,0);
        glVertex3f(-1.9,-1.9,-7.7);
        glTexCoord2f(0,1);
        glVertex3f(-1.9,2,-7.7);
        glTexCoord2f(1,1);
        glVertex3f(1.9,2,-7.7);
        glTexCoord2f(1,0);
        glVertex3f(1.9,-1.9,-7.7);
    glEnd();

    glDisable(GL_TEXTURE_2D);
    glMatrixMode(GL_MODELVIEW);
}

void pokoj()
{
    // Podłoga
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
    glMatrixMode(GL_TEXTURE);

    glBegin(GL_POLYGON);
        glNormal3f(0,1,0);
        glTexCoord2f(-5,-8);
        glVertex3f(-5,-5,-8);
        glTexCoord2f(5,-8);
        glVertex3f(5,-5,-8);
        glTexCoord2f(5,8);
        glVertex3f(5,-5,8);
        glTexCoord2f(-5,8);
        glVertex3f(-5,-5,8);
    glEnd();

    glDisable(GL_TEXTURE_2D);
    glMatrixMode(GL_MODELVIEW);

    glBegin(GL_POLYGON);
        // Ściana przy łózku
        glColor3f(0.847059, 0.847059, 0.74902);
        glNormal3f(1,0,0);
        glVertex3f(-5,5,8);
        glVertex3f(-5,-5,8);
        glVertex3f(-5,-5,-8);
        glVertex3f(-5,5,-8);
    glEnd();

    glBegin(GL_POLYGON);
        // Ściana z obrazem
        glColor3f(0.867059, 0.857059, 0.75902);
        glNormal3f(0,0,1);
        glVertex3f(-5,-5,-8);
        glVertex3f(5,-5,-8);
        glVertex3f(5,5,-8);
        glVertex3f(-5,5,-8);
    glEnd();
}

void init()
{
    glClearColor(1.0, 1.0, 1.0, 1.0); //kolor tła okna
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    gluPerspective(60.0, 1.0, 1.0, 20.0); 

    glMatrixMode(GL_MODELVIEW); // nic więcej na stosie rzutowania
                                // się nie znajdzie   
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);

    float lightPosition[] = { 0.0f, 2.0f, 0.0f, 0.0f };
    float lightDirection[] = { 0.0f, -2.0f, 0.0f };
    glLightfv(GL_LIGHT0, GL_POSITION, lightPosition);
    glLightfv(GL_LIGHT0, GL_SPOT_DIRECTION, lightDirection);

    textures[0] = setTexture("floor.bmp", GL_REPLACE);
    textures[1] = setTexture("basketball.bmp", GL_REPLACE);
    textures[2] = setTexture("football.bmp", GL_REPLACE);

    textures[4] = setTexture("obraz.bmp", GL_REPLACE);
}

void display() 
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();

    gluLookAt(Camera::x(), Camera::y(), Camera::z(), 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);

    Camera::ustaw();

    // uklad();

    pokoj();

    obraz();

    glPushMatrix();
        glTranslatef(-2.999, -4.749, 2.0);
        lozko();
    glPopMatrix();

    glPushMatrix();
        glRotatef(90.0f, 0.0f, 1.0f, 0.0f);
        glTranslatef(-2.0, 0.5, -4.499);
        polka();
    glPopMatrix();

    glPushMatrix();
        glRotatef(98.0f, 0.0f, 1.0f, 0.0f);
        glTranslatef(3.5, -3.999, 3.0);
        krzeslo();
    glPopMatrix();

    glPushMatrix();
        glTranslatef(4.0, -3.599, -4.0);
        stolik();
    glPopMatrix();

    glPushMatrix();
        glTranslatef(0.0, 4.0, 0.0);
        lampa();
    glPopMatrix();

    glPushMatrix();
        glTranslatef(4.5, -1.95, -5.0);
        lampka();
    glPopMatrix();

    glPushMatrix();
        glRotatef(90.0f, 0.0f, 1.0f, 0.0f);
        glTranslatef(5.5, -1.85, -3.9);
        szafa();
    glPopMatrix();

    for (int i = 0; i < sizeof balls / sizeof(Pilka); i++) 
    {
        balls[i].odswiez();
    }

    // linka od piłki
    glBegin(GL_LINES);
        glColor3f(0.0, 0.0, 0.0);
        glVertex3f(0.0, 0.401, 0.0);
        glVertex3f(0.0, 2.60, 0.0);
    glEnd();

    glFlush();
    glutSwapBuffers();
}

void timer(int v) 
{
    glutPostRedisplay();
    glutTimerFunc(1000/60, timer, v);
}

void reshape(GLint w, GLint h) 
{
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(40.0, GLfloat(w) / GLfloat(h), 1.0, 150.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void klawiatura(unsigned char znak, int, int) 
{
    switch (znak) 
    {
        case 'e':
            Camera::powieksz();
        break;

        case 'q':
            Camera::pomniejsz();
        break;

        case 'a': 
            Camera::Lewo(); 
        break;

        case 'd':
            Camera::Prawo();  
        break;

        case 'w': 
            Camera::Gora();
        break;

        case 's':
            Camera::Dol();
        break;
    }

    glutPostRedisplay();
}

int main(int argc, char* args[])
{
    glutInit(&argc, args);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowPosition(80, 80);
    glutInitWindowSize(800, 600);
    glutCreateWindow("Projekt");
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(klawiatura);  
    glutTimerFunc(100, timer, 0);
    init();
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:17:12.893

首先，我没有看到您在任何地方设置浅色。默认情况下，GL_SPECULAR 设置为`(1.0, 1.0, 1.0, 1.0)`并且`GL_AMBIENT`和`GL_DIFFUSE`设置为`(0.0, 0.0, 0.0, 0.0)`。除非您的材质有镜面反射组件，否则您不会看到任何变化。你至少应该设置`GL_DIFFUSE`一些有意义的东西。

其次，如果您期待聚光灯效果，例如，在地板上创建一圈光，您需要设置`GL_SPOT_CUTOFF`一些小角度。默认情况下，它是 180 度，为您提供 360 度的“锥形”光。

见：[http ://www.glprogramming.com/red/chapter05.html#name4](http://www.glprogramming.com/red/chapter05.html#name4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:04:51.287

为定向光指定 GL_SPOT_DIRECTION 是没有意义的，它不能是聚光灯。既然你说“用灯做定向光”，我不确定你是否理解定向光是无限远的，就像太阳一样。

# iphone - 请求访问联系人的权限

> ID：11163556
> 
> 赞同：2
> 
> 时间：2012-06-22T20:21:10.253
> 
> 标签：iphone, ios, xcode, private, privacy

您如何设置一个应用程序，在启动邮件编辑器之前请求访问联系人的权限？我知道应用程序会这样做是最近的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:26:58.273

由于 Apple 提供了`MFMailComposeViewController`它已经可以访问内置的用户联系人，因此无需授予访问权限。如果您想在其他地方使用用户联系人，您应该查看[地址簿编程指南](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:37:43.153

这是一个简单的例子，因为我不知道你打算做什么。你有一个 UIButton，上面写着“访问联系人”。当他们单击按钮时，您将让按钮运行一个方法……我们称之为 generatePopover。那么 generatePopover 应该创建一个 UIPopOverController 并在其上声明一个请求访问联系人的权限。这个视图上有两个按钮，接受和拒绝。Decline 什么都不做，accept 允许您继续并拉起邮件控制器。

这是弹出控制器页面的链接：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T00:21:57.053

你可以这样做：

```
//Header (.h)
@interface yourClass : superClass <UIAlertViewDelegate>
@property (nonatomic) BOOL alertShown;
@property (nonatomic) BOOL permissionGranted;

//Implementation (.m)
@synthesize alertShown, permissionGranted;

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if(buttonIndex == 1){

        self.permissionGranted = YES;
    }
    /*If you weren't sure what index the "Yes" button was at, you could do this instead:
    if(buttonIndex == alertView.firstOtherButtonIndex){

        self.permissionGranted = YES;
    }
    Or this:
    if([buttonTitleAtIndex:buttonIndex isEqualToString:@"Yes"]){

        self.permissionGranted = YES;
    }*/
}

-(void)composeMail{
    if(!self.alertShown){

         UIAlertView *permissionsAlert = [[UIAlertView alloc] initWithTitle:@"Permission"
                                                              message:@"Permission to access contacts?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles: @"Yes"];
        [permissionsAlert show];
    }
    if(self.alertShown && self.permissionGranted){

        //access mail/contacts
    }
}
//viewDidLoad
self.alertShown = NO;
self.permissionGranted = NO; 
```

我只是在没有检查或查找任何内容的情况下输入了此内容，因此某处可能有错误。无论如何，希望这会有所帮助！

# arrays - 在Scheme中获取向量中的第一个元素

> ID：11163558
> 
> 赞同：6
> 
> 时间：2012-06-22T20:21:30.243
> 
> 标签：arrays, vector, scheme

假设我在 Scheme 中创建了一个向量/数组：

```
(let* ((x #(1 2 3)))
  (list-ref x 0)) ; returns error 
```

我可以使用什么语法或函数代替该 list-ref 来获取`1`？

编辑：我将 Script-Fu 与 GIMP 2.8 一起使用，`array-ref`但似乎不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T21:10:19.560

该表达式`(define v '#(1 2 3))`是创建新*向量*的简写，在标准 Scheme 中它等价于：

```
(define v (list->vector '(1 2 3))) 
```

或这个：

```
(define v (make-vector 3))
(vector-set! v 0 1)
(vector-set! v 1 2)
(vector-set! v 2 3) 
```

一旦创建了一个向量（使用任何提到的过程），访问向量中的元素的正确方法是调用该`vector-ref`过程 - 很明显，因为它是一个*向量*而不是元素*列表*：

```
(vector-ref v 0) 
```

在前面的表达式中，是我们要检索其元素`v`的向量和索引。`0`查看[文档](http://www.gimp.org/docs/script-fu-update.html)以获取对上述过程的更详细说明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T20:40:13.340

您可以`vector-ref`用于此目的。例如：

```
(vector-ref x 0) 
```

[这](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_sec_6.3.6)是 R ⁵ RS 规范中关于向量的部分的链接，它提供了更多信息。

# system.reactive - 订阅已删除

> ID：11163570
> 
> 赞同：0
> 
> 时间：2012-06-22T20:22:30.407
> 
> 标签：system.reactive, reactive-programming

我有一个类似于以下内容的 RX 代码：

```
 static ISubject<Unit> m_events = new Subject<Unit>();
    private static EventLoopScheduler m_scheduler;

    static void Main(string[] args)
    {
        m_scheduler = new EventLoopScheduler();
        m_events.ObserveOn(m_scheduler).Subscribe(onEvent);            
        foo();
    }

    static void onEvent(Unit p)
    { 
        // do something
    }

    static void foo()
    {
        while (true)
        {
            m_events.OnNext(Unit.Default);
            Thread.Sleep(10);
        }
    } 
```

几天一次，程序停止进入 onEvent 方法，并且永远不会恢复。（即使这样 OnNext 调用仍在发生）。

没有对订阅调用 dispose。

我使用 rx-experimental 1.11111。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:20:02.870

您可以使用 Rx v2.0 RC 进行检查吗？我们已经解决了 EventLoopScheduler 和 ObserveOn 中的一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:45:17.280

一种可能性是`OnException`，一旦发生这种情况，订阅就会结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T23:48:35.017

如果`OnComplete`或`OnError`被提出，未来的`OnNext`价值将被忽略。

作为旁注，我是否正确假设您的实际循环代码执行了与间隔触发值更相关的事情？否则你可以简单地使用`Observable.Interval`

# stored-procedures - 在 Report Builder 3.0 中构建数据集之前，如何确保存储过程完成？

> ID：11163573
> 
> 赞同：1
> 
> 时间：2012-06-22T20:22:34.403
> 
> 标签：stored-procedures, reporting-services, ssis, reportbuilder

每次用户运行由 Report Builder 3.0 构建的报表时，我都想使用 SSIS 包刷新表，因此我创建了一个 SSIS 作业并`sp_start_job`从 Report Builder 调用作为存储过程来调用此作业。

这一切都很好，但是报告在填充数据集之前不会等待工作完成（我可以说是因为我的表中有一个“上次刷新日期”列）。

有没有办法确保在数据加载到报告本身之前完成工作？

**编辑：**所以我决定尝试调用工作并在这样的`SELECT`声明之前等待：

```
USE msdb;

EXECUTE dbo.sp_start_job N'CUBE - IS Inventory Report Refresh'

WAITFOR DELAY '00:00:25'

USE OtherDatabase;

SELECT  ... 
```

但时间戳仍显示较旧的日期。SSIS 作业在 17 秒内运行（来自历史日志），因此在我从表中选择之前等待 25 秒应该足够了......有人知道为什么会这样吗？

当我在 Management Studio 中运行查询时，返回的表显示了正确的时间戳，所以我认为这可能是 Report Builder 问题（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:33:05.783

这是意料之中的。启动作业是一个异步调用，因此一旦启动，控制权就会返回给调用者。然后，您需要开始轮询 sys 作业表以查看作业当前是否正在执行。您可以在同一个 proc 调用中执行此操作，并且一旦作业达到终端状态（完成、失败），您就可以将数据集返回给用户。那会回答你的问题，但是天哪，这可能会变得丑陋。

在人们使用报告之前有没有办法执行 ETL？

# image-processing - 修改RGB图像亮度的算法？

> ID：11163578
> 
> 赞同：12
> 
> 时间：2012-06-22T20:23:11.923
> 
> 标签：image-processing, rgb

我知道有 RGB -> Luminance 的公式，但我需要给出一个亮度参数来修改图像的 RGB 值。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T20:57:24.120

最简单的方法是将每个 R、G、B 值乘以某个常数——如果常数 >1，它会变亮，如果 <1，它会变暗。如果你让它更亮，那么你必须测试每个值以确保它不会超过最大值（通常是 255）。

这不仅比从 RGB 到 HSL 再转换回来更简单，而且它更接近于当你在一个物理对象上照射不同数量的光时会发生什么。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-22T20:29:52.580

从RGB映射到HSL（Hue/saturation/luminance），保持色相和饱和度不变，只修改亮度，然后做HSL到RGB的反向映射。

[您可以在此处阅读有关 RGB 到 HSL 和 HSL 到 RGB 转换的更多信息。](http://en.wikipedia.org/wiki/HSL_color_space)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-03T18:13:27.060

添加到 Mark Ransom 的答案：最好使用具有 255 常数的所述因子并将其添加到当前颜色值：

```
float brightnessFac = //between -1.0 and 1.0    
byte brightnessRed = red + (255f * brightnessFac); 
```

如果您只使用 0.0 到 1.0 之间的因子

```
byte brightnessRed = red * brightnessFac; 
```

值 0 保持为零。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-03T20:12:57.993

我的建议与[ChrisA 相同。](https://stackoverflow.com/a/11163652/1253136)的答案，但有一点不同：

请改用[HS **P**颜色空间](http://alienryderflex.com/hsp.html)，因为它是 Photoshop 算法的近似值，并且效果更好。

* * *

为了不只是链接到 HSP 的网站（坦率地说应该绰绰有余；只是我不喜欢没有示例的情况下回答），这是我的`C#`实现，它遵循该网站的：

```
#region Definitions
//Perceived brightness to Red ratio.
private const double Pr = .299;
//Perceived brightness to Green ratio.
private const double Pg = .587;
//Perceived brightness to Blue ratio.
private const double Pb = .114;
#endregion

//Expected ranges: Hue = 0-359... Other values = 0-1
public static ColorRGB ToRGB(double hue, double saturation, double perceivedBrightness, double alpha) {
    //Check values within expected range
    hue = hue < 0 ? 0 : hue > 359 ? 359 : hue;
    saturation = saturation < 0 ? 0 : saturation > 1 ? 1 : saturation;
    perceivedBrightness = perceivedBrightness < 0 ? 0 : perceivedBrightness > 1 ? 1 : perceivedBrightness;
    alpha = alpha < 0 ? 0 : alpha > 1 ? 1 : alpha;
    //Conversion
    var minOverMax = 1 - saturation;
    double r, g, b;
    if (minOverMax > 0) {
        double part;
        if (hue < 0.166666666666667D) { //R>G>B
            hue = 6 * (hue - 0); part = 1 + hue * (1 / minOverMax - 1);
            b = perceivedBrightness / Math.Sqrt(Pr / minOverMax / minOverMax + Pg * part * part + Pb);
            r = b / minOverMax; g = b + hue * (r - b);
        }
        else if (hue < 0.333333333333333D) { //G>R>B
            hue = 6 * (-hue + 0.333333333333333D); part = 1 + hue * (1 / minOverMax - 1);
            b = perceivedBrightness / Math.Sqrt(Pg / minOverMax / minOverMax + Pr * part * part + Pb);
            g = b / minOverMax; r = b + hue * (g - b);
        }
        else if (hue < 0.5D) {   //  G>B>R
            hue = 6 * (hue - 0.333333333333333D); part = 1 + hue * (1 / minOverMax - 1);
            r = perceivedBrightness / Math.Sqrt(Pg / minOverMax / minOverMax + Pb * part * part + Pr);
            g = r / minOverMax; b = r + hue * (g - r);
        }
        else if (hue < 0.666666666666667D) { //B>G>R
            hue = 6 * (-hue + 0.666666666666667D); part = 1 + hue * (1 / minOverMax - 1);
            r = perceivedBrightness / Math.Sqrt(Pb / minOverMax / minOverMax + Pg * part * part + Pr);
            b = r / minOverMax; g = r + hue * (b - r);
        }
        else if (hue < 0.833333333333333D) { //B>R>G
            hue = 6 * (hue - 0.666666666666667D); part = 1 + hue * (1 / minOverMax - 1);
            g = perceivedBrightness / Math.Sqrt(Pb / minOverMax / minOverMax + Pr * part * part + Pg);
            b = g / minOverMax; r = g + hue * (b - g);
        }
        else { //R>B>G
            hue = 6 * (-hue + 1D); part = 1 + hue * (1 / minOverMax - 1);
            g = perceivedBrightness / Math.Sqrt(Pr / minOverMax / minOverMax + Pb * part * part + Pg);
            r = g / minOverMax; b = g + hue * (r - g);
        }
    }
    else {
        if (hue < 0.166666666666667D) { //R>G>B
            hue = 6 * (hue - 0D); r = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pr + Pg * hue * hue)); g = r * hue; b = 0;
        }
        else if (hue < 0.333333333333333D) { //G>R>B
            hue = 6 * (-hue + 0.333333333333333D); g = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pg + Pr * hue * hue)); r = g * hue; b = 0;
        }
        else if (hue < 0.5D) { //G>B>R
            hue = 6 * (hue - 0.333333333333333D); g = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pg + Pb * hue * hue)); b = g * hue; r = 0;
        }
        else if (hue < 0.666666666666667D) { //B>G>R
            hue = 6 * (-hue + 0.666666666666667D); b = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pb + Pg * hue * hue)); g = b * hue; r = 0;
        }
        else if (hue < 0.833333333333333D) { //B>R>G
            hue = 6 * (hue - 0.666666666666667D); b = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pb + Pr * hue * hue)); r = b * hue; g = 0;
        }
        else { //R>B>G
            hue = 6 * (-hue + 1D); r = Math.Sqrt(perceivedBrightness * perceivedBrightness / (Pr + Pb * hue * hue)); b = r * hue; g = 0;
        }
    }
    return new ColorRGB(r, g, b, alpha);
}

//Expected ranges: 0-1 on all components
public static ColorHSP FromRGB(double red, double green, double blue, double alpha) {
    //Guarantee RGB values are in the correct ranges
    red = red < 0 ? 0 : red > 1 ? 1 : red;
    green = green < 0 ? 0 : green > 1 ? 1 : green;
    blue = blue < 0 ? 0 : blue > 1 ? 1 : blue;
    alpha = alpha < 0 ? 0 : alpha > 1 ? 1 : alpha;
    //Prepare & cache values for conversion
    var max = MathExtensions.Max(red, green, blue);
    var min = MathExtensions.Min(red, green, blue);
    var delta = max - min;
    double h, s, p = Math.Sqrt(0.299 * red + 0.587 * green + 0.114 * blue);
    //Conversion
    if (delta.Equals(0)) h = 0;
    else if (max.Equals(red)) {
        h = (green - blue) / delta % 6;
    }
    else if (max.Equals(green)) h = (blue - red) / delta + 2;
    else h = (red - green) / delta + 4;
    h *= 60;
    if (h < 0) h += 360;
    if (p.Equals(0))
        s = 0;
    else
        s = delta / p;
    //Result
    return new ColorHSP(h, s, p, alpha);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-04T20:12:14.570

```
import java.io. * ;
import java.awt.Color;
import javax.imageio.ImageIO;
import java.io. * ;
import java.awt.image.BufferedImage;

class Psp {

    public static void main(String a[]) {
        try {

            File input = new File("abc.jpg");
            File output = new File("output1.jpg");
            BufferedImage picture1 = ImageIO.read(input); // original
            BufferedImage picture2 = new BufferedImage(picture1.getWidth(), picture1.getHeight(), BufferedImage.TYPE_INT_RGB);
            int width = picture1.getWidth();
            int height = picture1.getHeight();

            int factor = 50;
            for (int y = 0; y < height; y++) { //loops for images
                for (int x = 0; x < width; x++) {

                    Color c = new Color(picture1.getRGB(x, y));
                    int r = c.getRed() + factor;
                    int b = c.getBlue() + factor;
                    int g = c.getGreen() + factor;

                    if (r >= 256) {
                        r = 255;
                    } else if (r < 0) {
                        r = 0;
                    }

                    if (g >= 256) {
                        g = 255;
                    } else if (g < 0) {
                        g = 0;
                    }

                    if (b >= 256) {
                        b = 255;
                    } else if (b < 0) {
                        b = 0;
                    }
                    picture2.setRGB(x, y, new Color(r, g, b).getRGB());

                }
            }

            ImageIO.write(picture2, "jpg", output);
        } catch(Exception e) {
            System.out.println(e);
        }

    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-04T03:14:47.193

你可以试试 LookupTable 和 LookupOp；这样您就可以通过修改 LookupTable 来调整图片的亮度。使图片变亮只是为 RGB 增加一些价值。

```
BufferedImage dstImage = new BufferedImage(input.getWidth(), input.getHeight(),BufferedImage.TYPE_3BYTE_BGR);
        LookupTable lookupTable = new ShortLookupTable(0, data);
        LookupOp op = new LookupOp(lookupTable, null);
        op.filter(toBeTone, dstImage); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-02-22T11:58:05.417

调整图像的亮度是可以完成的最简单的图像处理操作之一。所涉及的只是为每个红色、绿色和蓝色分量添加所需的亮度变化。

**它会是这样的：**

```
colour = GetPixelColour(x, y)
   newRed   = Truncate(Red(colour)   + brightness)
   newGreen = Truncate(Green(colour) + brightness)
   newBlue  = Truncate(Blue(colour)  + brightness)
   PutPixelColour(x, y) = RGB(newRed, newGreen, newBlue) 
```

**用于确保红色、绿色和蓝色的新值在有效范围内的代码。**

```
Procedure Truncate(value)
      If value < 0 Then value = 0
      If value > 255 Then value = 255
      Return value
   EndProcedure 
```

# objective-c - 未读取类...未知类型名称

> ID：11163581
> 
> 赞同：4
> 
> 时间：2012-06-22T20:23:23.607
> 
> 标签：objective-c, ios, xcode, class

我不确定发生了什么或我改变了什么，但突然之间我试图引用“在项目树中”和文件夹中的一个类（当我“在查找器中显示”时）不是正在阅读...我在同一行代码中遇到多个错误[见附件]。

![在此处输入图像描述](../Images/9179cbbc6d971e3843aa144ce2e570f6.png)

请帮忙！！！

* * *

当我尝试将 HomeViewController.h 导入 MainContainerViewController 时出现问题

作品：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface MainContainerViewController : UIViewController {

ViewController *parent;

NSString *FACING;
IBOutlet UIView *container;

IBOutlet UIView *topNav;

IBOutlet UIButton *homeBTN;
IBOutlet UIImageView *homeImg;
IBOutlet UILabel *homeLabel;
IBOutlet UIImageView *seperator1;
IBOutlet UIButton *bookmarksBTN;
IBOutlet UIImageView *bookmarksImg;
IBOutlet UILabel *bookmarksLabel;
IBOutlet UIImageView *seperator2;
IBOutlet UIButton *favouritesBTN;
IBOutlet UIImageView *favouritesImg;
IBOutlet UILabel *favouritesLabel;
IBOutlet UIImageView *seperator3;
IBOutlet UIButton *notesBTN;
IBOutlet UIImageView *notesImg;
IBOutlet UILabel *notesLabel;
IBOutlet UIImageView *seperator4;
IBOutlet UIButton *fontBTN;
IBOutlet UIImageView *fontImg;
IBOutlet UILabel *fontLabel;
IBOutlet UIImageView *seperator5;
IBOutlet UIButton *settingsBTN;
IBOutlet UIImageView *settingsImg;
IBOutlet UILabel *settingsLabel;

NSString *drawerIsAnimating;

//SETTINGS (LOCAL)
NSString *fontSize; 
```

等等

破碎的：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"
#import "HomeViewController.h"

@interface MainContainerViewController : UIViewController {

ViewController *parent;

NSString *FACING;
IBOutlet UIView *container;

IBOutlet UIView *topNav;

IBOutlet UIButton *homeBTN;
IBOutlet UIImageView *homeImg;
IBOutlet UILabel *homeLabel;
IBOutlet UIImageView *seperator1;
IBOutlet UIButton *bookmarksBTN;
IBOutlet UIImageView *bookmarksImg;
IBOutlet UILabel *bookmarksLabel;
IBOutlet UIImageView *seperator2;
IBOutlet UIButton *favouritesBTN;
IBOutlet UIImageView *favouritesImg;
IBOutlet UILabel *favouritesLabel;
IBOutlet UIImageView *seperator3;
IBOutlet UIButton *notesBTN;
IBOutlet UIImageView *notesImg;
IBOutlet UILabel *notesLabel;
IBOutlet UIImageView *seperator4;
IBOutlet UIButton *fontBTN;
IBOutlet UIImageView *fontImg;
IBOutlet UILabel *fontLabel;
IBOutlet UIImageView *seperator5;
IBOutlet UIButton *settingsBTN;
IBOutlet UIImageView *settingsImg;
IBOutlet UILabel *settingsLabel;

NSString *drawerIsAnimating;

//SETTINGS (LOCAL)
NSString *fontSize; 
```

等等

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T20:28:25.857

您可能有一个标题导入周期。

添加

```
@class MainContainerViewController2; 
```

就在之前

```
@interface HomeViewController2 
```

它应该解决该特定问题。

根据经验，如果您没有绝对需要，则不应在标头中 #import 标头，即。超类标头。如果需要使用类，请使用@class 声明它，而不是导入类头。这样做，你应该在 99% 的时间里都是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:26:06.213

该文件可能不包含在您正在构建的目标中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:28:05.727

尝试检查 MainContainerViewController2 目标。

单击 MainContainerViewController2 .m 和 .xib 并检查实用程序面板（视图 > 实用程序 > 显示文件检查器），如果复选框被勾选到目标成员部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:28:14.973

首先非常仔细地检查您的 MainContainerViewController2.h 文件，看看文件中是否有任何任性的字符。

# php - PHP & MySQL - 遍历结果并显示每个条目的名称和计数

> ID：11163587
> 
> 赞同：1
> 
> 时间：2012-06-22T20:23:33.597
> 
> 标签：php, mysql, list, loops, while-loop

我正在尝试遍历来自 MySQL 的结果列表，并以 HTML 表格格式显示所有唯一的游戏名称和每个游戏名称的计数。它可以正常工作，直到最后一行不显示名称或计数。如果姓氏有多行，则显示名称但不显示计数。

我的代码：

```
$propertyGameQuery = "SELECT G.GAME_NAME FROM GAMES AS G, PROPERTY_GAMES AS PG WHERE PG.PROPERTY_ID=$cid AND G.ID=PG.GAME_ID ORDER BY G.GAME_NAME";
$propertyGameResult = mysql_query($propertyGameQuery);

$gameCount = 0;
$rowCounter = 0;
$number = mysql_num_rows($propertyGameResult);
$rws = mysql_fetch_assoc($propertyGameResult);
$starterName = $rws['GAME_NAME'];

while($propertyGames = mysql_fetch_assoc($propertyGameResult)) {
    $currentGameName = $propertyGames['GAME_NAME'];
    if(($gameCount == 0) or ($rowCounter == $number)){
    ?>
        <tr class="game-table"><td width="80%" title="<? echo $currentGameName; ?>" align="left" style="padding-left:5px;"><? echo $rowCounter ?> <? echo $currentGameName; ?></td>            
    <? 
    }
    if(($currentGameName == $starterName) or ($lastGameName == $currentGameName)){ 
        $gameCount = $gameCount + 1;    
    }else{
    ?>
        <td width="20%" align="center"><? echo $gameCount + 1; ?></td></tr>                             
    <? 
        $gameCount = 0;  
    } ?>
    <?
    $lastGameName = $currentGameName;
    $rowCounter++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:30:48.260

您可以通过查询完成所有操作

```
SELECT G.GAME_NAME, COUNT(*) as nb_games 
FROM GAMES G, PROPERTY_GAMES PG 
WHERE PG.PROPERTY_ID = $cid 
AND G.ID=PG.GAME_ID 
GROUP BY G.GAME_NAME
ORDER BY G.GAME_NAME 
```

那么：

```
$sql = "SELECT G.GAME_NAME, COUNT(*) as nb_games"
    . " FROM GAMES G, PROPERTY_GAMES PG" 
    . " WHERE PG.PROPERTY_ID = $cid" 
    . " AND G.ID=PG.GAME_ID" 
    . " GROUP BY G.GAME_NAME"
    . " ORDER BY G.GAME_NAME";

$propertyGameResult = mysql_query($propertyGameQuery);
$counter = 0;
while(false !== ($rws = mysql_fetch_assoc($propertyGameResult)): $counter++; ?>
<tr class="game-table">
  <td width="80%" title="<?php echo $rws['GAME_NAME']; ?>" align="left" style="padding-left:5px;">  
    <?php echo $counter ?> <?php echo $rws['GAME_NAME']; ?>
  </td>
  <td width="20%" align="center">
    <?php echo $rws['nb_games']; ?>
  </td>
</tr>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:35:04.433

要显示最后一行，您需要更改：

```
if(($gameCount == 0) or ($rowCounter == $number)){ 
```

到

```
if(($gameCount == 0) or ($rowCounter-1 == $number)){ 
```

这是因为您从 0 开始计数，并且在此调用之后才进行行计数。

您还应该更改：

```
if(($currentGameName == $starterName) or ($lastGameName == $currentGameName)){ 
```

到

```
if((($currentGameName == $starterName) or ($lastGameName == $currentGameName)) && ($rowCounter-1 != $number)){ 
```

这就是修复代码的方法，但您可以通过优化查询来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:30:39.800

您应该在 while 循环之外调用此函数一次，它应该只在 while 循环内调用以确保输出所有行。

```
mysql_fetch_assoc( $propertyGameResult); 
```

# android - 安卓和jets3t？图书馆问题

> ID：11163590
> 
> 赞同：0
> 
> 时间：2012-06-22T20:23:53.920
> 
> 标签：android, amazon-s3, storage, google-cloud-storage, jets3t

我正在尝试在我的 android 应用程序中使用 jets3t0.9.0，但遇到了 classnotfoundexceptions 和 noclassdeffounderror。我将 httpcore4.2 和 httpclient 4.2、日志记录和 commons-io jar 文件添加到构建库中。

谢谢 Droidment

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T04:09:07.247

FYI, best answer is do *NOT* use JetS3t for Android. Use the Amazon AWS library instead.

More info here on why after I dug into it a bit: [https://groups.google.com/forum/?fromgroups=#!topic/jets3t-users/vCq4pwXSPN8](https://groups.google.com/forum/?fromgroups=#!topic/jets3t-users/vCq4pwXSPN8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:40:46.687

Jets3t-0.9.0 有一个重大更新，使用 httpclient 库 4.x 而不是 3.x。编译期间需要 4 个库 -

Apache Commons 日志记录 1.1.1
Apache Commons 编解码器 1.4
HttpClient 4.1.1
Java XMLBuilder 0.4

这些罐子随 jets3t 套件一起提供，您只需将它们包含在您的应用程序中。

还粘贴一些找不到的类的名称？

# perl - 如何在 Perl 正则表达式中插入多行？

> ID：11163591
> 
> 赞同：0
> 
> 时间：2012-06-22T20:24:03.183
> 
> 标签：perl

我正在使用正则表达式来移动文本块，但它只删除单行 - 为了删除多行，我应该包括什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:28:31.223

您可能正在寻找`/<!--\[perl\](.*?)-->/s`

使用选项开关`/s`

它将字符串视为单行。

“。” (dot) 将匹配任何字符，包括换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:59:17.240

当试图使正则表达式跨多行工作时，有两件事经常使人们绊倒。

首先是正则表达式中的点与换行符不匹配，除非您使用or运算符`/s`上的选项。`m//``s///`

第二个是，如果您一次处理一行文本文件（可能使用`while (<$filehandle>) { ... }`），那么每次循环您只有一行文本要匹配。您需要一次读取整个文件（可能使用`$text = do { local $/; <$filehandle>};`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T12:40:37.660

```
#!/usr/bin/env perl

use strict; use warnings;

{
    local $/ = '-->';
    while (my $chunk = <DATA>) {
        $chunk =~ s/<!-- \[perl\] (.*) --> \z//sx;
        print $chunk;
    }
}

__DATA__
<!--[perl]

my $x = 5;
my $y = 3;
say $x + $y

-->

<!--[not]

const char *s = "This is not Perl ;-)";

--> 
```

通过明智地更改[输入记录分隔符](http://perldoc.perl.org/perlvar.html#%24RS)，您可以确保您读取的每个块都以字符串结尾`"-->"`。然后，通过向替换运算符提供标志来确保`.`可以匹配行尾。`/s`

输出：

```
<!--[不是]

const char *s = "这不是 Perl ;-)";

-->
```

如果这很重要，您还可以从块中删除前导/尾随空格。

# debugging - GAS - 使用“调试”选项时“我们很抱歉，发生服务器错误” - 即使在等待之后

> ID：11163592
> 
> 赞同：0
> 
> 时间：2012-06-22T20:24:09.303
> 
> 标签：debugging, google-apps-script

我在名为 GAS_library 的电子表格中创建了一个项目名称为 GAS 的“库”。库项目定义了两个版本。

我在同一个名为 GAS_testing 的电子表格文件中创建了另一个项目。

在项目“GAS_testing”中，我有两个文件：“test_get_set.gs”和“GAS_stubs”。

在文件“test_get_set.gs”中，我创建了一个例程来测试“GAS”项目中的一些例程。

在“GAS_stubs”文件中，我有一组“存根”例程。它们的目的是提供 GAS 库函数的本地定义，而不必在应用程序的每个调用中编写“GAS”限定符。“存根”例程所做的只是调用带有前导“GAS”的相同函数。限定符。

我已经获得了“GAS”项目的项目属性，并在当前版本的“GAS_testing”项目中定义了它（2）；我将“开发模式”设置为“是”。

当我运行（不调试）“test_get_set”函数时，执行会进行到最后，但它至少返回一个错误值。所以为了调试它，我按下了编辑器中的小“bug”图标。

每当我这样做时，我总是收到错误消息“我们很抱歉，发生了服务器错误 - 请稍候再试一次”。我等多久似乎并不重要。

调用“回溯”堆栈指示：gas_var_alert[19] gas_var_msg[27] GAS_stubs: gas_var_msg[43] test_get_set: test_get_set[6]。

我在电子表格“选项卡”中注意到 Browser.msgBox 显示与错误发生时/或之前传递的文本一起显示。按消息框中的“确定”按钮不能解决问题。

GAS.gas_var_alert 例程的唯一功能是使用传递的输入参数发出 Browser.msgBox 命令。GAS.gas_var_msg 例程的功能是在其输入参数周围添加一些格式化文本并将其传递给 gas_var_alert 函数。

知道为什么调试器/服务器失败了吗？我对这个环境很熟悉。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:12:40.710

`Browser.msgBox()`工作方式与其他功能不同，您可能会遇到[问题 1267](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1267)中列出的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:38:21.943

在进行额外的测试和调查后，我发现：

当在库例程中以调试模式执行（无断点）第一次调用谷歌服务时，您会收到警告消息（红色）：“我们很抱歉发生服务器错误。请稍候并重试“ （解雇）。

经过进一步测试，我发现1）即使报告了错误，回溯也是正确的。2) 可以忽略此错误消息（必须解除），脚本将继续在调试模式下执行。它返回到调用例程，该例程发出它自己对 google 服务的调用，并且调试过程在此时停止。3）如果你不设置断点，那么调试服务将在每次谷歌服务调用时自动中断。

# .net - XDocument 选择祖先属性

> ID：11163599
> 
> 赞同：0
> 
> 时间：2012-06-22T20:24:53.337
> 
> 标签：.net, vb.net, visual-studio-2010, linq-to-xml

查询记录节点时如何获取 field.definition @name 属性？

这是xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<Table>
<fields>
  <field.definition id="1" name="name" type="11" maxlength="250" default=""/>
  <field.definition id="2" name="description" type="11" maxlength="250" default=""/>
  <field.definition id="3" name="address" type="11" maxlength="250" default=""/>
  <field.definition id="4" name="phone" type="11" maxlength="250" default=""/>
  <field.definition id="5" name="email" type="11" maxlength="250" default=""/>
</fields>
<data>
    <record id="1">
        <field id="1"><![CDATA[TurboKits, LLC]]></field>
        <field id="2"><![CDATA[offering turbo kits and performance auto parts for all makes and models of vehicles. Our systems are manufactured to meet your high boost pressure and high horsepower needs.]]></field>
        <field id="3"><![CDATA[1000 Old County Cir., #115 Windsor Locks, CT 06096]]></field>
        <field id="4"><![CDATA[(860) 676-2929]]></field>
        <field id="5"><![CDATA[jesse@turbokits.com]]></field>
    </record>
    <record id="2">
        <field id="1"><![CDATA[Charles C Lewis]]></field>
        <field id="2"><![CDATA[]]></field>
        <field id="3"><![CDATA[209 Page Blvd., Springfield, MA 01101]]></field>
        <field id="4"><![CDATA[413-733-2121]]></field>
        <field id="5"><![CDATA[jesse@turbokits.com]]></field>
    </record>
</data>
</Table> 
```

这是我正在尝试的代码：

```
 'no filtering, no record selection going on, let's return all records
    _rec = (From r In _x...<record>.AsParallel()
            Select New DatabaseTyping.Tables.Data() With {
                .Id = r.@id,
                .Fields = ProcessFields(r)
            }).ToList()

    Private Function ProcessFields(ByVal _Fields As XElement) As IList(Of DatabaseTyping.Tables.Field)
        Return (From r In _Fields...<field>
                Select New DatabaseTyping.Tables.Field() With {
                    .Id = IsNull(Of Long)(r.@id, 0),
                    .Value = IsNull(Of String)(r.Value, Nothing),
                    .Type = IsNull(Of Long)(Convert.ToInt64(From n In _Fields.Ancestors("field.definition").Where(Function(i) i.@id = r.@id) Select n.@type), 0),
                    .Name = IsNull(Of String)((From n In _Fields.Ancestors("field.definition").Where(Function(i) i.@id = r.@id) Select n.@name).ToString(), Nothing)
                    }).ToList()
    End Function 
```

我似乎遇到的问题是函数“无法将'WhereSelectEnumerableIterator`2 [System.Xml.Linq.XElement,System.String]'类型的对象转换为'System.IConvertible'。”

我要做的是填充记录的强类型列表，其中列表应包含记录 ID、字段值和字段名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:36:03.560

我觉得

```
_rec = (From r In _x...<record>.AsParallel()
            Select New DatabaseTyping.Tables.Data() With {
                .Id = r.@id,
                .Fields = ProcessFields(r)
            }).ToList()

    Private Function ProcessFields(ByVal _Fields As XElement) As IList(Of DatabaseTyping.Tables.Field)
        Return (From r In _Fields...<field>
                Let fd = r.Document.<Table>.<fields>.<field.definition>.FirstOrDefault(Function(f) f.@id = r.@id)
                Select New DatabaseTyping.Tables.Field() With {
                    .Id = CType(r.@id, Long),
                    .Value = r.Value,
                    .Type = CType(fd.Attribute("type"), Long),
                    .Name = CType(fd.Attribute("name"), String)
                    }).ToList()
    End Function 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:33:24.770

或者简单一点：

```
 Private Function ProcessFields(ByVal _Fields As XElement, ByVal _FieldDefinitions As IEnumerable(Of XElement)) As IList(Of DatabaseTyping.Tables.Field)
        Return (From r In _Fields...<field>.AsParallel()
                    Let _fd = _FieldDefinitions.<field.definition>.Where(Function(i) i.@id = r.@id).FirstOrDefault()
                    Select New DatabaseTyping.Tables.Field() With {
                        .Id = IsNull(Of Long)(r.@id, 0),
                        .Value = IsNull(Of String)(r.Value, Nothing),
                        .Type = IsNull(Of Long)(_fd.@type, 0),
                        .Name = IsNull(Of String)(_fd.@name, Nothing)
                    }).ToList()
    End Function 
```

# linux - 如何列出属于 Mercurial 中不同分支的所有文件？

> ID：11163608
> 
> 赞同：2
> 
> 时间：2012-06-22T20:25:29.433
> 
> 标签：linux, mercurial, branch, tortoisehg, redhat

我是善变的新手，很抱歉新手问题。
我在 /home/Cassie/localRepo 创建了一个名为“localRepo”的本地存储库。我在那里有两个分支，default 和 src1-branch。对于默认分支，它有 file1、file3，对于 src1-branch，它有 file1、file2 和 file4。每当我尝试列出该存储库中的所有文件时，它只显示文件属于当前分支。

例如，如果当前分支是 src1-branch，那么如果我输入

```
ls -l 
```

它只显示

```
file1 file2 file4 
```

有什么方法可以查看所有文件属于同一个存储库，例如

```
file1 file2 file3 file4 
```

我努力了

```
hg status --all 
```

它仍然只显示file1 file2 和file4。

我的机器是带有 mercurial 1.7 和 tortoisehg 的 redhat linux 工作站 6。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T01:04:22.497

`hg manifest --all`列出所有修订中的所有文件，包括已删除和重命名的文件。

鉴于：

```
o  5: Removed file1, Renamed file3->file6
|
| @  4: Added file5
| |
| o  3: Added file4
| |
o |  2: Added file3
| |
o |  1: Added file2
|/
o  0: Added file1 
```

结果`hg manifest --all`：

```
file1
file2
file3
file4
file5
file6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:05:09.810

我知道没有标准的方法，但您可以使用您提到的方法。

```
hg branches ------ tells you all the branch
branch1
branch2
.....

hg update -C branch1    ----- switches you to a branch1
hg status --all         ----- provides all files for branch1

hg update -C branch2    ----- switches you to branch2
hg status --all         ----- provides all the files for branch2 
```

您可以合并所有分支的输出并删除多余的文件名。你可以编写一个脚本来做到这一点。

**也`-C`很危险**，因为它在更改为分支时会丢弃文件。因此，仅当您要提交的工作目录中没有更改时才应使用。

**警告**：这个想法通常不是在两个不同分支中查看文件的好方法。

您可以在 branch1 中添加一个文件 c.txt，然后在 branch2 中再次添加另一个 c.txt 具有不同的内容。

在这种情况下，从语义上讲，它是两个同名的不同文件。

# iphone - 当应用程序进入后台并返回时，我的 NSRunLoop 和计时器会发生什么情况？

> ID：11163609
> 
> 赞同：7
> 
> 时间：2012-06-22T20:25:31.283
> 
> 标签：iphone, objective-c, ios, nstimer, nsrunloop

我的`NSRunLoop`应用程序中有一个连接到计时器：

```
NSTimer *updateTimer = [NSTimer scheduledTimerWithTimeInterval:300 target:self selector:@selector(onUpdateTimer) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:updateTimer forMode:NSRunLoopCommonModes]; 
```

当应用程序进入后台时，这个运行循环会发生什么？它会消失吗，这意味着我应该重新创建它`applicationDidBecomeActive:`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T20:32:34.650

当您的应用程序暂停时，您应该停止计时器并在`-applicationDidBecomeActive:`. [请参阅响应中断](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW17)中的“发生中断时该怎么做” 。不过，您不必担心运行循环——操作系统会处理这部分。

# c# - 在 WPF 中创建由不同类型的对象（包括 flash .swf 对象）填充的网格

> ID：11163610
> 
> 赞同：1
> 
> 时间：2012-06-22T20:25:31.987
> 
> 标签：c#, wpf, visual-studio-2010, flash, grid

我正在尝试在 C# 中创建一个 WPF 应用程序，该应用程序由一个具有 8 个单元格的网格组成，每个单元格一个用于向用户显示的每个对象。这个网格是故事板的一部分，它允许用户在一个网格中轻弹到下一个网格，该网格将由另一组 8 个对象填充。问题是该网格将由用户计算机上文件夹中的对象填充，并且无法知道将加载的对象的确切类型。相反，该对象将是：图像、.swf 视频、PDF 或 Word 文档。

我有两个问题： 1\. 如何在运行时在 XAML 和源代码中处理网格中未知类型对象的绑定？2\. 如何处理 Flash 对象与该单元格的绑定？

如果对象都是相同的类型（只是图像），它不会那么糟糕，但是由于在程序运行之前不可能知道每个单元格可以包含什么，所以我不确定如何继续。

我已经检查了几个建议在 C# WPF 应用程序中嵌入 flash 的方法的站点，但只有当知道将加载 flash 对象时：http: [//hintdesk.com/c-wpf-play-swf-in- wpf-应用程序/](http://hintdesk.com/c-wpf-play-swf-in-wpf-application/) .

我还考虑加载 Object 类的对象作为避免对对象类型进行硬编码的一种方式[http://social.msdn.microsoft.com/Forums/en/wpf/thread/ca76fc35-950c-4fac-bb30 -534cb7ad1b5d](http://social.msdn.microsoft.com/Forums/en/wpf/thread/ca76fc35-950c-4fac-bb30-534cb7ad1b5d)，但显然这是不可能的，因为您将无法访问这些属性。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:57:15.947

您可以在正在处理的文件夹中获取文件名，并在加载时使用类型和文件路径作为属性创建 ViewModel。然后，您可以`ContentControl`在`Grid`. 将每个绑定`ViewModel`到`Content`the`ContentControl`并使用 a`ContentTemplateSelector`来显示不同的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:22:04.563

可以用转换器吗？您可以将其视为工厂，并为您期望并可以满足的所有类型执行实现。然后，您还可以为您不期望的文件类型提供默认的“不支持”视图。

# c# - 处理非常大的树状数据结构：OutOfMemoryException

> ID：11163612
> 
> 赞同：4
> 
> 时间：2012-06-22T20:25:46.650
> 
> 标签：c#, tree

我正在创建一个类似国际象棋的程序的变体，它需要同时生成和遍历一个非常大的树状结构。每个节点有 10 个 bool、一个 int、8 个 ulong、一个 short[64] 和 2 个 ulong[64]。根节点接收一些初始参数，然后从那里以编程方式（递归）确定有效的子节点。

基本上，当用户和程序轮流从子节点遍历到子节点时，我的程序会不断地增长这棵树。每次“选择”一个新的子节点时，它的父节点和兄弟节点都不再需要并被丢弃。当树（平均）达到大约 60 的深度（从初始根节点开始）时，有效子节点的数量自然会开始减少，直到大约 75 的深度，树解析为一个最终节点，没有更多的孩子。

这背后的逻辑起初看起来相当简单，但我经常遇到 OutOfMemoryException ，这完全扼杀了任何进一步的进展。

以下是每“一代”有效儿童的某些平均值：

```
Generation    New Nodes
1             1    
2             20
3             4,000
4             30,000
5             2,200,000
6             > 50,000,000 
```

在我的实际程序中，我什至无法完全扩展第五代。当我不保留节点特定数据时（一旦节点的数据被用于确定它自己的子节点，我就会清除它）我可以完全扩展第 5 代，但在第 6 代中途遇到了非常坚固的墙。

理想情况下，我希望我的程序最终达到并在“当前”节点之后维护 8 代节点。我看的越多，这似乎就越不可能。

我厌倦了用 sqlite 数据库运行它，但它不能足够快地生长树。

有谁知道处理非常大的树结构的任何潜在替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:36:36.973

您的问题没有一般性的答案。我会假设计算这棵大树以确定您的计算机程序的最佳移动吗？

在这种情况下，定义一系列动作的效用函数可能会对您有所帮助，它可以衡量在游戏中做出这一系列动作的价值。如果目标是达到最高分数或类似的东西，那么该分数是一个很好的效用函数。

有时您无法提出准确的效用函数，在这种情况下，一种常见的方法是对效用进行启发式评估。基本上它是一个近似值，或者是最好的猜测。启发式越好，对手就越好。

您想要进行效用测量的原因是执行修剪。例如，深度优先遍历树几次并计算最小和最大效用。这些值可以帮助您修剪完整的算法，这意味着您可以使用这些边界来确定您的树遍历算法是否可以在完成之前终止。

同样，这完全取决于您的游戏机制以及您如何遍历树，但希望这可以让您朝着正确的方向思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:53:21.063

通常，您在构建树时会进行评估，这已经为您提供了边缘权重。使用这些权重来查看哪些路径将评估比其他路径更强的路径并在这些边缘上工作，只要你能看到哪些更有价值。由于您的算法中已经存在第五代的问题，因此您只能选择深入研究权重较高的分支，然后选择其中一个，忽略许多其他分支。只是一个想法......也许你可以在第三代上运行它，选择走哪条路。据我所知，这可能会让您只使用更多可移动的棋子进行移动，因为它们可能会对游戏产生更大的影响，与第五代移动相比，这可能不是最佳解决方案。非常有趣的问题！

您应该调查国际象棋编程：[国际象棋编程维基](https://chessprogramming.wikispaces.com/)

这里有更多关于引擎的内容：引擎上的[国际象棋编程维基](https://chessprogramming.wikispaces.com/Engines)

还有一个论坛，讨论不同的方法！

# javascript - m 未定义 - sorttable.js 在对三列进行排序时

> ID：11163618
> 
> 赞同：4
> 
> 时间：2012-06-22T20:26:36.570
> 
> 标签：javascript, c#, jquery, sorttable.js

当我尝试对三列（状态、状态和队列）进行排序时，我收到一个 JavaScript 错误，提示 m 未定义（292 超出范围 32）。我不认为这个错误源于 sorttable.js 文件。它指向 jquery.min.js 文件。我不知道为什么这三列有问题，因为它们中的数据非常标准（只是文字，从不空白）。它似乎只是按最后一次成功排序的列进行排序。

这是代码：

用户单击“开始”按钮 - 将 ajax 查询请求发送到另一个页面，该页面填充结果。

```
function SubmitSearch() {
    $("#searchResults").html('<br/><center><img src="../Images/barberpole.gif" style="margin-top:3px;"></center>');

    //Deleted all initializing code. There is no problem with this.         

    $.ajax(
    {
        type: "POST",
        url: "../ajaxURLs/SearchRequests.aspx?requestID=" + requestID,
        cache: false,
        success: function (data) {
            $("#searchResults").html(data);
            sorttable.makeSortable(document.getElementById("SearchResults"));
        }
    });
} 
```

桌子

```
<asp:GridView ID="SearchResults" runat="server" AutoGenerateColumns="False" DataKeyNames="requestNumber"  CSSClass="mailGrid" 
             OnRowDataBound="SearchRedirect">
                <Columns>
                  <asp:BoundField DataField="requestNumber" HeaderText="Request Number" InsertVisible="False" ReadOnly="True" />
                  <asp:BoundField DataField="state" HeaderText="State" />
                  <asp:BoundField DataField="status" HeaderText="Status" />
                  <asp:BoundField DataField="queue" HeaderText="Queue" />
                  <asp:BoundField DataField="oem" HeaderText="OEM"/>
                  <asp:BoundField DataField="rayMaterialNum" HeaderText="Material Number"/>
                  <asp:BoundField DataField="mfgPartNumber" HeaderText="Mfg Part Number"/>
                  <asp:BoundField DataField="program" HeaderText="Program"/>
                  <asp:BoundField DataField="purchaseOrder" HeaderText="Purchase Order" />
                  <asp:BoundField DataField="purchReq" HeaderText="Purchase Requisition"/>
                  <asp:BoundField DataField="businessUnit" HeaderText="Business Unit"/>
                  <asp:BoundField DataField="site" HeaderText="Site"/>
                  <asp:BoundField DataField="buyer" HeaderText="Buyer"/>
                  <asp:BoundField DataField="requisitioner" HeaderText="Requisitioner"/>
                  <asp:BoundField DataField="componentEngineer" HeaderText="Component Engineer"/>
                  <asp:BoundField DataField="responsibleEngineer" HeaderText="Responsible Engineer"/>
                  <asp:BoundField DataField="qualityEngineer" HeaderText="Quality Engineer"/>
                </Columns>
          </asp:GridView> 
```

我正在使用 sorttable.js、Firefox 13.0.1、jquery v1.7.2 的第 2 版

生成的html：

```
<table id="SearchResults" class="mailGrid" cellspacing="0" border="1" style="border-collapse:collapse;" rules="all">
<thead>
<tr>
<th class=" " scope="col">Request Number</th>
<th class=" sorttable_sorted_reverse" scope="col">
<th class=" " scope="col">Status</th>
<th class="" scope="col">Queue</th>
<th class=" " scope="col">OEM</th>
<th class=" " scope="col">Raytheon Material Number</th>
<th class="" scope="col">Mfg Part Number</th>
<th class="" scope="col">Program</th>
<th class="" scope="col">Purchase Order</th>
<th class="" scope="col">Purchase Requisition</th>
<th class="" scope="col">Business Unit</th>
<th class="" scope="col">Site</th>
<th class="" scope="col">Buyer</th>
<th class="" scope="col">Requisitioner</th>
<th class="" scope="col">Component Engineer</th>
<th class="" scope="col">Responsible Engineer</th>
<th class="" scope="col">Quality Engineer</th>
</tr>
</thead>
<tbody>
<tr onclick="ViewRequest('2000')">
<tr onclick="ViewRequest('2001')">
<tr onclick="ViewRequest('2002')">
<tr onclick="ViewRequest('2003')">
<tr onclick="ViewRequest('2004')">
<tr onclick="ViewRequest('2005')">
<tr onclick="ViewRequest('2006')">
<tr onclick="ViewRequest('2007')">
<tr onclick="ViewRequest('2008')">
<tr onclick="ViewRequest('2009')">
<tr onclick="ViewRequest('2010')">
<tr onclick="ViewRequest('2011')">
<tr onclick="ViewRequest('2012')">
<tr onclick="ViewRequest('2013')">
<tr onclick="ViewRequest('2014')">
<tr onclick="ViewRequest('2015')">
<tr onclick="ViewRequest('2016')">
<tr onclick="ViewRequest('2017')">
</tbody>
<tfoot></tfoot>
</table> 
```

tr 之一的示例。它们都遵循这种格式，并且有问题的列将始终包含数据。

```
<tr onclick="ViewRequest('2000')">
<td>2000</td>
<td>Open</td>
<td>Initiated</td>
<td>Buyer</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>0</td>
<td>0</td>
<td>0179450</td>
<td>Pending</td>
<td>Pending</td>
<td>Pending</td>
<td>Pending</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:54:39.083

据我所知，您应该将 class="sortable" 添加到您想要使其可排序的任何表中，也许这可以解决问题。

# android - 用于播放音乐并在暂停和停止时停止的 Android 服务

> ID：11163620
> 
> 赞同：2
> 
> 时间：2012-06-22T20:26:51.453
> 
> 标签：android, service, media-player, android-mediaplayer

我正在我的应用程序中实现 MediaPlayer 类，并且我希望在后台播放音乐，所以我使用了 Service 而不是 Activity 或 BroadcastReciever。现在的问题是，如果用户存在或暂停应用程序，音乐就会不停地播放。我确实添加了 onStop 和 onPause 方法，但问题仍然存在。而且我不能像在 Activity 类中那样调用 super.onPause() 方法。

经过一些研究，我发现即使应用程序暂停或停止，服务也会保持活跃。（我不知道这是真的）但根据我的经验，我认为这是真的。我该怎么办？我在 google 和 stackoverflow 上搜索了答案，但没有得到答案。

这是一个代码。

```
 package in.isuru.animation;

 import android.app.Service;
 import android.content.Intent;
 import android.media.MediaPlayer;
 import android.os.IBinder;
 import android.util.Log;

 public class PlayMusic extends Service{

private static final String TAG = null;
MediaPlayer player;

public void onCreate(){
    super.onCreate();
    Log.d(TAG, "Music service started onCreate()");
    player = MediaPlayer.create(this, R.raw.oh_holy_night);
    player.setLooping(true);
    //player.setVolume(100, 100);
}

public int onStartCommand(Intent intent, int flags, int startId){
    player.start();
    Log.d(TAG, "Player started!");
    if(player.isLooping() != true){
        Log.d(TAG, "Player not playing any file.");
    }
    return 1;
}

public void onStart(Intent intent, int startId){

}

public IBinder onUnBinder(Intent arg0){
    return null;
}

public void onStop(){
    player.stop();
    player.release();
}

public void onPause(){

    player.stop();
    player.release();

}

public void onDestroy(){
    player.stop();
    player.release();
    Log.d(TAG, "Player destroyed");
}

public void onLowMemory(){
    player.release();
}

@Override
public IBinder onBind(Intent arg0) {

    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:40:56.840

首先，您永远无法在 BroadcastReceiver 中执行任何长时间运行的操作，因为系统不会喜欢您。所以我有点困惑。您希望音乐在后台播放，因此您使用了服务。那是对的。但是现在您说当用户退出或暂停您的活动时，音乐仍在播放？是的，它会的，这不是你把它放在服务开始的原因吗？

您有 2 个选项。您可以在活动的 onStart()/onResume() 和 onPause()/onStop() 中移动启动和停止媒体播放器的调用。这只会在 Activity 有前景时播放音乐。

您的第二个选择是将 MediaPlaying 保留在服务中。但是，您需要向您的 Service 发送一个 Intent，让它知道何时停止播放音乐。最好的方法是打包一个 PendingIntent 给通知管理器，通知管理器将启动一个 Activity，它上面有按钮，可以暂停和播放你的音乐。如果您不提供让用户返回控制服务的 Activity 的方法，那么您的音乐将播放到最后，用户将没有很好的方法将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T04:15:58.233

问题是沟通。您使用`player.start()`了`onStartCommand()`，因此该服务可以开始播放。

**停止/暂停音乐**从未传达给服务，因此出现了问题。

# cron - Plesk 计划任务 - 运行多个脚本与多个任务

> ID：11163623
> 
> 赞同：0
> 
> 时间：2012-06-22T20:27:18.100
> 
> 标签：cron, scheduled-tasks, crontab, plesk

我正在编写一些脚本来创建 txt 文件，将一些文件同步到远程服务器，备份服务器数据库，并将备份发送到异地存储。SQL 文件大约 150MB，所以不算小。

这些脚本需要按照一定的顺序相互跟随，所以txt文件是在备份之前创建的等等，都是php或者bash脚本。

我发现我可以在计划任务中使用分号 (;) 来分隔脚本并一个接一个地运行它们，而不是安排它们相隔半小时或几分钟。

是否建议每个任务使用一个脚本创建单个任务，或者我可以在同一个计划任务中组合 5-7 个脚本？

这会使服务器超载吗？我不想产生错误，或者让服务器失控。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:32:13.733

';' 绝对应该是首选。或者 - 甚至更好 - 您可以将您的任务放在一个可执行的 .sh 文件中（用 ';' 分隔或简单地将每个任务放在单独的行上）并计划将此文件作为单个项目运行。除非您的服务器以某种方式配置为限制长时间运行的 cron 任务，否则我看不出有任何问题。

如果第二个任务将在第一个完成之前开始，那么延迟运行多个单独的任务肯定会导致问题。我建议避免这种情况。

# wmi - Windows 8 存储空间 WMI 错误

> ID：11163625
> 
> 赞同：0
> 
> 时间：2012-06-22T20:27:33.090
> 
> 标签：wmi, windows-8

我有一个关于 WMI 和存储空间的问题。

设置：我创建了一个存储池，其中包含一个虚拟磁盘，而虚拟磁盘又包含 3 个物理磁盘。我正在使用奇偶校验，这要求我至少有三个磁盘来创建虚拟磁盘。我在使用 VS 2012 的 Windows 8 机器上使用 C#。

问题：我将第四个磁盘插入机器并尝试使用 WMI 将其添加到虚拟磁盘。AddPhysicalDisk 方法返回**“缓存过期 (40003)”**错误。我仅在收到事件后才查询和检索 MSFT_VirtualDisk 的实例，这是我对其执行的第一个操作。有人能告诉我为什么会发生这个错误吗？

其他数据：我尝试使用相同的物理磁盘而不是虚拟磁盘来扩展池，这工作正常。这种方法的问题是我无法扩展虚拟磁盘以将额外的磁盘放入图片中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:09:23.270

“两个带镜像的 1TB 硬盘”

这是一个问题，您正在创建一个镜像**虚拟磁盘**。
创建镜像时，SSP 将使用具有 n 列的条带集跨所有物理磁盘进行条带化。“n 列”很重要的原因是，如果要向集合中添加更多磁盘，则需要匹配列数才能做到这一点。通过查看虚拟磁盘的属性来检查列数。然后使用这个小公式：

“扩展集合的最小磁盘数”= n 列 * n 数据副本

因此，如果您创建一个包含 2 个磁盘的镜像，您最终将得到 1 个列和 2 个数据副本，因此要扩展此集合，您需要提供 1*2=2 个磁盘。这就是为什么在添加第 3 个磁盘时无法将其扩展到 1.5TB，您需要添加 2 个新磁盘来扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:22:04.503

您可以尝试几件事：

*   您是否使用“AddPhysicalDisk”方法将此第 4 个物理磁盘添加到存储池？如果没有，您*必须*将其添加到池中。这就是 Storage Spaces 知道可以使用磁盘的方式。
*   您是否使用“PhysicalDisksToUse”参数创建了虚拟磁盘？如果是，您仍然需要先将其添加到池中。进入池后，尝试在虚拟磁盘上使用 AddPhysicalDisk。

请注意，PhysicalDisksToUse 是一种进一步限制池内分配的方法。如果您希望虚拟磁盘自动使用所有可用存储，请在创建虚拟磁盘时省略此参数。

从错误代码（有时可以视为“未找到”）判断，您可能没有先将物理磁盘添加到池中。

# c# - 如何通过传递一些行来读取文本文件行？

> ID：11163627
> 
> 赞同：1
> 
> 时间：2012-06-22T20:27:39.210
> 
> 标签：c#, visual-studio-2010

我有一个文本文件，其中包含一些行中的信息。我想通过跳过几行来阅读它。例如，假设我有 1-10 行。当我阅读时，我想通过以下方式阅读它，

```
1 <- i wanna read this
2 <- Skip this
3 <- read this 
4 <- Skip this
5 <- read this
6 <- Skip this
7 <- read this
8 <- Skip this
9 <- read this
10 <- Skip this 
```

你得到正确的模式吗？我如何使用 c# 来实现这一点？我也想得到我稍后跳过的行。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:32:22.960

`Where`您可以使用包含索引的 LINQ 的重载，并用于`%`过滤每隔一行：

```
var everyOtherLine = System.IO.File.ReadAllLines("path")
                                   .Where((s, i) => i % 2 == 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:31:31.687

伪代码：

```
for (i=0; i<filelines.Count; i++)
{
 if (i mod 2 == 1) oddlines.Add(filelines[i]);
} 
```

编辑：dbaseman 做到了，谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:30:59.407

*编辑使用查找偶数和奇数行。*

只是循环并根据您的标准添加到结果集中？

```
var lines = new Dictionary<int, List<string>>() {
    { 0, new List<string>() },
    { 1, new List<string>() }
};

using (StreamReader sr = new StreamReader(filename)) {
    int i=0;
    while (!sr.EndOfStream) {
        string line = sr.ReadLine();
        lines[i%2].Add(line);
    }
} 
```

然后*lines[0]*得到偶数行，而*lines[1]*得到奇数行。

# iphone - 如何将 CFUUIDCreate 共享到网络

> ID：11163633
> 
> 赞同：0
> 
> 时间：2012-06-22T20:28:12.923
> 
> 标签：iphone, ios, web-services

我使用 CFUUIDCreate 获得了 UUID。现在我需要把它分享到网上。如果使用 UDID，我是使用 .mobileconfig 完成的。但是如何从网页中获取 UUID？

# networking - Grails HTTPClient 连接重置错误

> ID：11163634
> 
> 赞同：0
> 
> 时间：2012-06-22T20:28:14.093
> 
> 标签：networking, grails, groovy, httpclient

我正在使用 HTTPClient 对象发布到驻留在另一台服务器上的资源。HTTPClient 执行的 POST 请求是在循环中完成的，因为我有多个请求（实际上数量可以是 10,000 甚至更多）。在逻辑发送请求一段时间后，整个过程中断，日志文件中记录了“连接重置”错误。

关于为什么会发生这种情况的任何想法？有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T03:01:39.307

我也遇到了这个错误，但是，我的是另一种方式。

在你的情况下，也许是由“keep-alive”引起的......原谅我，我忘记了这是什么要求，我只记得它有两个参数：“keep-alive”和“close”。

建议你在这一点上检查一下。

希望对你有帮助^_^

# jsf - 如何在jsf中获取当前页面的标题

> ID：11163636
> 
> 赞同：2
> 
> 时间：2012-06-22T20:28:20.900
> 
> 标签：jsf, facelets, title, managed-bean

我可以使用 HttpServletRequest 从后端 bean 获取 jsf 中当前页面的 url。但是有没有办法获得当前页面的标题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:33:31.123

不，这不是直接可能的。它仅以 HTML`<title>`标记的形式出现在与 HTTP 请求关联的 HTTP 响应中。理论上，您可以使用 XML 解析器解析视图文件并从中提取`<title>`元素，但这很笨拙。

最好反过来做。控制器感兴趣的变量无论如何都属于模型，而不是（硬编码）在视图中。使标题成为模型的属性并在 EL 中显示，如下所示：

```
<title>#{page.title}</title> 
```

您可以根据其 URL 或更好的是其具有语法的 JSF 视图 ID 来映射页面`/path/filename.xhtml`。如果你把它们放在 a 中`Map<String, Page>`，那么你应该能够得到页面的标题，如下所示

```
String title = pages.get(facesContext.getViewRoot().getViewId()).getTitle(); 
```

# php - mysqli_fetch_row() 访问 sql 数据库中的特定行

> ID：11163639
> 
> 赞同：1
> 
> 时间：2012-06-22T20:28:24.590
> 
> 标签：php, mysql, sql

我正在使用 mysqli_fetch_row() 函数。我可以浏览数据库，但我想从特定行开始。我可以使用此功能执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:31:50.790

您想使用[mysqli_result::data_seek()](http://www.php.net/manual/en/mysqli-result.data-seek.php)。这需要一个 int 并将您置于该行。

```
$result = mysqli_query($conn, $sql);
mysqli_data_seek($result, $startRow);//start row is whatever you need to be the first row

while($row = mysqli_fetch_row($result)) {
  //do your work here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:33:48.347

我不确定您要达到什么目的，如果您想`LIMIT`减少检索到的行数，或者如果您想使用`WHERE`子句限制查询结果，或者如果您选择了 100 行，您想选择结果集中的第 10 行ETC...

> mysqli_fetch_row($result);

```
$sql = "SELECT * FROM testTable";
$result = mysqli_query($conn, $sql)
while($row = mysqli_fetch_row($result)) {
    //Do stuff here
} 
```

该函数旨在获取已查询的结果集中的一行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T20:33:24.593

您应该在查询中使用 LIMIT 语法

[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

# android - 现有 VPN 应用程序如何在 Android 2.0 - 2.3 中创建新配置文件？

> ID：11163644
> 
> 赞同：21
> 
> 时间：2012-06-22T20:29:16.043
> 
> 标签：android, vpn

在 StackOverflow 上进行大量搜索后，似乎只有在 4.0 之前创建一个 VPN 配置文件的方法是让设备生根

我的问题是以下应用程序如何在没有 root 的情况下执行此操作？

[http://www.featvpn.com/](http://www.featvpn.com/)

[https://play.google.com/store/apps/details?id=com.expressvpn.vpn&hl=en](https://play.google.com/store/apps/details?id=com.expressvpn.vpn&hl=en)

**更新 1**

似乎私有 API 是 4.0 之前的方式。不幸的是，没有多少资源可以开始。有谁知道私有 api 是否仍然需要有根设备？

**更新 2**

看来您可以使用修改后的 Android.jar 或使用反射来做到这一点。L2TP/IPSEC 仍然需要有根设备。PPTP似乎没有。

[如何在 Android 上使用内部 API](https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)

**更新 3**

请注意，这是从各种来源获取的。似乎需要 root，因为 VpnService 启动 racoon，然后以系统用户身份运行，并从 KeyStore 检索 PSK。所以其他应用程序创建的 KeyStore 条目对 racoon 是不可见的。（在linux环境下，racoon是一个协助IPSEC相关密钥协商的安全进程——IKE）。

**这是有道理的，但是，仍然有应用程序无需 root 即可实现 L2TP/IPSEC。**

**更新 4**

XinkVPN，入门的源代码。仍然不允许用户在无需生成 key_store 并重新编译的情况下创建 L2TP 配置文件。不是很市场友好，但一个神话般的开始。

[https://github.com/xinthink/xinkvpn](https://github.com/xinthink/xinkvpn)

[http://code.google.com/p/xinkvpn/](http://code.google.com/p/xinkvpn/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:32:29.563

您可以通过未记录的意图将用户重定向到 VPN 设置屏幕。

```
 Intent intent = new Intent("android.net.vpn.SETTINGS");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
```

这似乎适用于 1.6-4.1 手机。

# flowplayer - 当 Flowplayer 中的 Livestream 关 闭时显示“当前不可用”的视频/图像

> ID：11163646
> 
> 赞同：1
> 
> 时间：2012-06-22T20:29:28.523
> 
> 标签：flowplayer, rtmp

[**当Livestream**](http://new.livestream.com/)由于编码器崩溃、互联网流丢失或其他技术困难而中断时，您如何判断[**Flowplayer**](http://flowplayer.org/)何时因错误而崩溃？[](http://new.livestream.com/)

 **我想做的是显示一个视频，告诉观众要采取哪些步骤才能让**Livestream**恢复或显示“***我们很抱歉***”的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:49:50.263

[**Flowplayer 配置页面**](http://flowplayer.org/documentation/configuration/player.html#playerevents)显示了一个名为[**onError**](http://flowplayer.org/documentation/configuration/player.html#playerevents)的**播放器事件监听器**，它很有用：[](http://flowplayer.org/documentation/configuration/player.html#playerevents)

 **![在此处输入图像描述](../Images/7713bc927f4838e45b20625e7abcc5fa.png)

![在此处输入图像描述](../Images/d676bd23686fc6c76b010e866cb3c442.png)

**实际示例：**
每当`onError Player Event Listener`调用 时，它都会触发您的函数。然后，您可以通过测试`if statements`或者是否需要使用许多代码`switch-case conditional`来查看触发了什么错误**并从那里采取适当的措施**（例如，可以根据检测到的错误代码执行不同的规则）。

[](https://stackoverflow.com/a/3630804/1195891)**使用`FlowPlayer onError Player Event Listener`for error[**的参考**](https://stackoverflow.com/a/3630804/1195891)`200`示例：**

 **```
onError: function(errorCode, errorMessage) {
    this.unload();
    switch (errorCode) {
        case 200:
            $('#myPlayer a').attr('src', StreamNotFound.jpg);
        break;
    }
} 
```

**交付：**
如果您在网站上已经有一个多媒体**灯箱类型的脚本**，您可以利用它通过 iframe 等触发**图像**、**视频**、**HTML 网页**，以将任何方向传递给查看器，而不是`.jpg`上面的图像方法。许多灯箱脚本都有*回调选项*，可用于记录错误消息的成功传递（例如通过 AJAX 帖子记录），以进一步实现“***损害控制”。*********

# azure - 如果数据中心出现故障，如何故障转移 Azure ACS

> ID：11163647
> 
> 赞同：4
> 
> 时间：2012-06-22T20:29:32.803
> 
> 标签：azure, failover, acs, ws-trust

我们正在寻找一种为 ACS 实例提供故障转移的方法，因此如果一个数据中心脱机，通过 ACS 的身份验证会自动故障转移到另一个数据中心。

**背景：**

我们使用 ACS 转换由定制开发的 STS 通过 WS-Trust 协议提供的 SAML 令牌。ACS 用于在我们的 STS 和由 3rd 方开发的许多依赖方之间建立信任。依赖方当前配置为使用其 DNS URL 连接到特定 ACS 实例。

我们研究了以下内容：

1.  使用 DNS CName 条目来屏蔽 ACS url - 不起作用，因为新 DNS 与实例上的 SSL 证书不匹配，我们无法控制 SSL 证书。
2.  在 ACS 前面使用代理将请求路由到它 - 不起作用，因为消息中的 To address 和 Realm 与 acs 命名空间不匹配。
3.  由于 1 和 2，流量管理器不起作用，并且因为它当前不允许您将负载直接加载到不以 .cloudapp.net 结尾的地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:10:35.837

不确定这是否有帮助，但如果 ACS 发生 DC 崩溃，您可能能够执行一些自定义的本地解决方案。将 Windows Azure Cmdlet 与对服务总线仪表板的 RSS 轮询一起使用可能会起作用。

请参阅下面有关 SB 2.0 命名空间的 MSFT 指南...

**ACS 2.0 命名空间**

ACS 2.0 每天对所有命名空间进行一次备份，并将它们存储在安全的异地位置。当 ACS 操作人员确定 ACS 的某个区域数据中心出现不可恢复的数据丢失时，ACS 可能会尝试通过恢复最近的备份来恢复客户的订阅。由于备份的频率，可能会发生长达 24 小时的数据丢失。

鼓励担心数据丢失可能性的 ACS 2.0 客户查看一组可通过 Microsoft 托管的 Codeplex 开源存储库获得的 Windows Azure PowerShell Cmdlet。这些脚本允许管理员管理他们的命名空间并导入和提取所有相关数据。通过使用这些脚本，ACS 客户能够开发自定义备份和恢复解决方案，以实现比 ACS 目前提供的更高级别的数据一致性。

**通知** 如果发生灾难，信息将发布在 Windows Azure 服务仪表板上，描述全球所有 Windows Azure 服务的当前状态。仪表板将定期更新有关灾难的信息。如果您想接收任何服务中断的通知，您可以在服务仪表板上订阅服务的 RSS 源。此外，您可以通过访问 Windows Azure 网页的支持选项联系客户支持，并按照说明为您的服务获取技术支持。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:14:46.770

首先，Azure 中不存在 ACS 备份解决方案，因此开发人员和用户愿意创建他们可以提出的最佳方案。根据我的理解，如果您想为您的应用程序创建一个故障转移方案以从一个 ACS 转移到另一个 ACS，可以在您的依赖方应用程序（网站）中完成，如下所示：

1.  您已配置 ACS1 和 ACS2，其中 ACS2 是备份。两个 ACS 都使用配置为使用具有相同领域和返回 URL 的相同依赖方应用程序
2.  在您的依赖方应用程序中，当登录 ACS 失败时，ACS 会向依赖方应用程序提供 JSON 编码的 HTTP URL 参数错误详细信息

    2.1 ACS 可能出现错误 2.2 甚至可能找不到 ACS 端点

3.  在这两种情况下，您都可以处理代码中的错误并创建重试策略来尝试 ACS2。您可以添加代码以尝试何时使用 ACS2 以及何时继续尝试 ACS1，具体取决于您想要的方式。

如果您最终拥有 2 个 ACS 端点，请尽量保持它们相同，这样无论哪个端点实际验证 RP 应用程序请求，您都会得到完全相同的结果。

如果您想在管理级别备份 ACS，请查看[Windows Azure AppFabric Access Control Service (ACS) – Backup and Restore Resources](http://blogs.msdn.com/b/alikl/archive/2011/05/18/manage-windows-azure-appfabric-access-control-service-acs-with-powershell.aspx)，它可能需要您在 ACS 故障时可用，否则，您可能希望在您的RP 应用程序（大工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:07:46.723

我不认为这里有一个现实和万无一失的解决方案。如前所述，您可以在其他数据中心创建额外的命名空间并备份您的 RP 配置和转换规则。要恢复，您的客户需要在将备份恢复到新命名空间后重新配置其应用程序以使用新命名空间。这可以在某些情况下工作（如 Google 和 Yahoo! 集成）。它甚至可以（我认为）用于 Active Directory 集成。但是，如果您不控制 RP，那将是非常有问题的。

这种方法的一个不同但阻塞的问题（至少对我们来说）是它在 Windows Live 名称标识符声明的情况下不起作用。我们为用户的每个命名空间获得一个不同的命名空间。因此，即使我们在另一个数据中心恢复了所有设置（并且我们也控制了 RP！），我们的 Windows Live 用户将无法正确登录，因为他们的名称标识符将不再与新的命名空间匹配。谷歌和雅虎！不会有这个问题，因为他们可以使用稳定的声明（如电子邮件）。

基本上，在数据中心完全丢失的情况下，您似乎主要受数据中心运营团队的支配，以便快速故障转移到子区域。

# mysql - 在构建 SQL SELECT 语句以获得“前 10 个 x”时需要帮助

> ID：11163650
> 
> 赞同：3
> 
> 时间：2012-06-22T20:29:51.407
> 
> 标签：mysql, sql

我有这个**积分**表：

```
============================================
领域：类型
============================================
id int(11)
user_id int(11)
值 int(11)
类型枚举（'加'，'减'）
时间戳 int(11)
============================================

```

基本上这个表存储用户点的记录。

现在我的问题是：**如何获得总分最高的前 10 名用户？**

**注意：**我被告知要更改我的架构——删除“类型”字段并为“值”字段输入正值和负值。我只想知道是否可以使用当前模式实现所需的查询。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:34:31.693

我会尝试这样的事情：

```
SELECT
  user_id,
  SUM( IF(`type`='add',+1,-1) * `value`) AS user_points
FROM Points
GROUP BY user_id
ORDER BY SUM( IF(`type`='add',+1,-1) * `value`) DESC
LIMIT 10 
```

似乎工作：[http ://sqlfiddle.com/#!2/dd207/1](http://sqlfiddle.com/#!2/dd207/1)

`SUM(IF())`另一种选择，也许更快，也许不是，诀窍是从内部查询中移出部分：

[http://sqlfiddle.com/#!2/dd207/9](http://sqlfiddle.com/#!2/dd207/9)

```
SELECT
  user_id,
  SUM( IF(`type`='add',+1,-1) * `valuesum`)
FROM (
      SELECT
        user_id,
        `type`,
        SUM(`value`) AS `valuesum`
      FROM     Points
      GROUP BY user_id, `type`
     ) AS p
GROUP BY p.user_id
ORDER BY SUM( IF(`type`='add',+1,-1) * `valuesum`) DESC
LIMIT 10 
```

可能这两种解决方案都必须进行全表扫描以总结所有内容，因此这种情况可能是一些明智的非规范化的良好候选者（例如，在另一个表中收集每个用户的总和）。

# c# - 如果用户输入的文件不存在，通知并要求重新输入文件名

> ID：11163654
> 
> 赞同：0
> 
> 时间：2012-06-22T20:30:01.023
> 
> 标签：c#

所以我有一个提示，要求用户输入文件的位置。如果文件不存在，我该如何做到这一点，程序会重新向用户询问文件位置？这是我当前的代码。我有它的原始形式，因为我在搞乱它。我有点接近，但没有雪茄。提前致谢！

编辑：所以，如果用户输入 c:/file.xml 并且它应该是 c:/file32.xml 它将崩溃。如何让它要求用户再试一次？

```
static void Main(string[] args)
    {
        //asks user for location of the XML file
        Console.WriteLine("Enter location of XML file and XML file name please. Example - c:/xmlfile.xml");
        //XML files becomes "xmlfile"
        string xmlfile = Console.ReadLine();

        //takes xmlfile and runs it through XPATH
        string fileName = xmlfile;
        XPathDocument doc = new XPathDocument(fileName);
        XPathNavigator nav = doc.CreateNavigator();

        //Compile a standard XPath expression
        //Selects all of the names
        XPathExpression expr;
        expr = nav.Compile("/zabbix_export/templates/template/items/item/name | /zabbix_export/templates/template/items/item/description");
        XPathNodeIterator iterator = nav.Select(expr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:33:31.887

```
while (!File.Exists(xmlFile))
{
       Console.WriteLine("Please reenter a valid file name:");
        xmlfile = Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:31:57.950

只需继续检查文件是否存在，直到用户最终将正确的路径放入:)

```
string xmlFile;
do
{
    Console.WriteLine("Enter location of XML file and XML file name please. Example - c:/xmlfile.xml");
    xmlFile = Console.ReadLine();
} while (!File.Exists(xmlFile)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:32:18.027

```
XPathDocument doc = new XPathDocument(fileName);

while (doc == null)
{
    // display prompt
    // try to retrieve new value for doc
}

    XPathNavigator nav = doc.CreateNavigator();
    //Compile a standard XPath expression
    //Selects all of the names
    XPathExpression expr;
    expr = nav.Compile("/zabbix_export/templates/template/items/item/name | /zabbix_export/templates/template/items/item/description");
    XPathNodeIterator iterator = nav.Select(expr); 
```

# python - 保存 nltk.ngram.NgramModel 结果

> ID：11163656
> 
> 赞同：1
> 
> 时间：2012-06-22T20:30:02.440
> 
> 标签：python, nltk, n-gram

我正在使用 nltk.ngram.NgramModel 在布朗语料库上训练一个 n-gram 模型。它基本上需要永远并使用大量系统内存。我想知道是否有一种方法可以保存模型，以便每次运行代码时都不必再次训练它。我看过对 pickle 和 BerkeleyDB 的引用，但我并不完全理解它们中的任何一个是如何工作的。

谢谢！

[***ETA：尽管实施了此处](http://code.google.com/p/nltk/issues/detail?id=550)描述的更改并尝试了所有各种泡菜协议选项，但我无法成功泡菜模型。我玩弄了 simplejson（没有运气）和 YAML（需要永远，吃掉我所有的记忆）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:48:12.687

BerkeleyDB 参考可能是我的答案之一，或者我写的一篇文章。基本上我写了自己的频率表。针对批量创建进行了优化，它在内存中使用 NLTK 实现（例如，1000 个输入文章/文件），然后将其写到 BerkeleyDB 主存储。这减少了（慢）BerkeleyDB 写入的数量。例如，每个子批次只需要对单词“the”进行一次写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:47:49.793

训练模型确实是你应该做一次，并保存多次使用的事情。Pickle 是正确的工具，但谁知道它为什么不适合你呢？谷歌表示[，酸洗 ngram 曾经存在一些问题](http://code.google.com/p/nltk/issues/detail?id=550)，但它们在几年前就已经解决了。继续尝试，或者做一个**最小的**例子，如果它仍然不起作用，请在此处发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:54:37.450

Pickle 模块允许您序列化 Python 对象结构，以便您可以反序列化并在以后使用它。随时查看文档以获取更多详细信息[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

NLTK 的 NgramModel 在版本 <= 2.0.1rc2 中是可序列化的（经过一些努力）（或者它仍然是，但我很忙于进一步调查它。基本上，你只需要在酸洗时使用较低的 PROTOCOL_NUMBER。你可以检查这个（相当混乱的）代码，看看我是怎么做到的。

[https://github.com/starenka/laholator/blob/master/laholator.py#L118](https://github.com/starenka/laholator/blob/master/laholator.py#L118)

[https://github.com/starenka/laholator/blob/master/laholator.py#L19](https://github.com/starenka/laholator/blob/master/laholator.py#L19)

（该脚本为根据文本样本生成随机文本的几个站点提供支持。Fe 这个[http://kaluzator.starenka.net/](http://kaluzator.starenka.net/)

祝你好运

# c# - 为什么我的 LINQ 语句会引发异常？

> ID：11163657
> 
> 赞同：0
> 
> 时间：2012-06-22T20:30:09.023
> 
> 标签：c#, linq, linq-to-objects

我正在使用 HTML 敏捷包来抓取网站。我正在查看所有包含某些文本的“a”元素的 div 标签。这是示例代码：

```
 var showLocations = (from div in document.DocumentNode.Descendants("div")
                                 from a in div.DescendantNodes().Where(x => x.Name == "a")
                                 where a.Attributes["href"].Value.Contains("show_locs=Y")
                                 select a).SingleOrDefault(); 
```

但是，如果找不到元素，它不会返回 null，而是会引发“Null 引用异常”。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:34:24.347

我的猜测是有些`<a>`标签没有`href`属性（即锚点而不是链接）。试试吧`a.GetAttributeValue("href", "").Contains...`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:36:11.940

您正在处理的各种对象都有可能评估为 null，并且由于您没有进行 null 检查，因此有些对象可能会抛出**NullReferenceException**。可能的罪魁祸首：

1.  文档.文档节点
2.  a.属性[“href”]
3.  a.Attributes["href"].Value

如果您不确定要处理的对象，安全的做法是使用 null 保护，除非您可以在封装类中保证相关对象不会为 null。

正如 Jimmy 在他的回答中指出的那样，您正在处理的标记可能无法保证具有您所追求的元素或属性，除非您可以保证，否则您需要进行一些防御性编程。

# macos - iMac 上的蓝牙版本

> ID：11163659
> 
> 赞同：10
> 
> 时间：2012-06-22T20:30:20.187
> 
> 标签：macos, bluetooth

我如何知道我的 iMac 安装了哪个蓝牙版本（即 2.1 + EDR 或 4.0）？我下载了蓝牙资源管理器并四处寻找，但我没有看到任何信息向我尖叫“蓝牙版本”。我也找不到任何数据在线将型号映射到蓝牙版本。

我问是因为我正在尝试使用 4.0 LE 配置文件做一些工作。我的 Mac 是“iMac11,2”。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-03T22:26:18.160

System Profiler (apple > about this mac > more info > system report > hardware > bluetooth) 会告诉你你的“LMP 版本”

在此处查找 LMP 版本[http://www.bluetooth.org/Technical/AssignedNumbers/link_manager.htm](http://www.bluetooth.org/Technical/AssignedNumbers/link_manager.htm)

关键是：

LMP 版本 -> BT 版本

4 -> 蓝牙核心规范 2.1 + EDR

6 -> 蓝牙核心规范 4.0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T17:47:08.200

```
1\.  Click the  menu.
2\.  Select About This Mac.
3\.  Click on the More Info... button.
4\.  Click on the System Report... button.
5\.  Select Bluetooth from the sidebar on the left, underneath "Hardware."
6\.  Scan down the list of information until you find "LMP Version." 
```

如果您的 Mac 配备蓝牙 4.0，LMP 版本将显示 0x6。任何低于此值的都是旧版本的蓝牙

资料来源： [http ://www.imore.com/how-tell-if-your-mac-has-bluetooth-40](http://www.imore.com/how-tell-if-your-mac-has-bluetooth-40)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T17:47:30.470

通过谷歌搜索“iMac11,2 规格”[在这里](http://www.everymac.com/systems/apple/imac/specs/imac-core-i3-3.2-21-inch-aluminum-mid-2010-specs.html)找到有关硬件的信息。看起来毕竟是蓝牙2.1+EDR。（有道理，因为它是 2010 年中期的模型。）

仍然无法判断是否有办法在蓝牙资源管理器中占卜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-07T03:12:04.230

另一个答案中列出的一个衬里对我不起作用，因为我的 LMP 版本报告为十六进制数字而不是十进制数字（0x6 而不是 6）。但是，可以通过将数字 6 之前的空格替换为“.*”来修改它，使其无论是十进制还是十六进制都有效。这是修改后的单行代码，适用于所有情况：

```
system_profiler -detailLevel full SPBluetoothDataType | grep -q "LMP Version:.*6" && echo "Your Mac is supported" || echo "Your Mac is not supported" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T02:21:30.517

一个班轮：

```
system_profiler -detailLevel full SPBluetoothDataType | grep -q "LMP Version: 6" && echo "Your Mac is supported" || echo "Your Mac is not supported" 
```

# file - 关于信息

> ID：11163660
> 
> 赞同：0
> 
> 时间：2012-06-22T20:30:25.497
> 
> 标签：file, input, file-io

我想知道哪些属性可用于多文件输入标签，例如：
`<input multiple="" type="file" id="inp" name="inp[]">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:31:57.150

我发现一些不错的 js 可以用来获取文件名，但似乎 jQuery 必须赶上？我没有从文档中获得 jQ 的属性深度。
var myInp=jQ 1.7.2 $("#inp");
var myInp=document.getElementById("inp");
从 jQ 我只得到了第一个文件，而从 document.gEBI() 中获得了有关所选多个文件的其余信息。我发现有一个 files 属性
inp.files
这是一个对象，每个文件都有一个 File 对象，一个长度属性，其值为文件计数，以及一个 item 方法：
**0 [object File]**
... / /迭代到第 (n-1) 个文件 count
**n [object File]**
**length** m //m 是文件数
**项目函数 item(){[本机代码]}**

深入挖掘，对于第一个文件：
inp.files.item(0) 我发现 item 包含每个文件的属性和方法：

1)**大小**
2)**类型**
3)**切片函数 slice(){[本机代码]}**
4) **mozSlice 函数 mozSlice(){[本机代码]}**
5)**名称**
6) **mozFullPath**

我在其他任何地方都没有找到这些信息。我希望它可以帮助你:)

# asp.net - 此 URL 格式是 .ASPX 约定吗？

> ID：11163663
> 
> 赞同：0
> 
> 时间：2012-06-22T20:30:41.670
> 
> 标签：asp.net, url-routing

我正在查看一个网络应用程序，它有一个设置页面（即，在实际的网络应用程序上），表单中显示了以下 URL（即，我们可以将其更改为其他内容）：

```
http://www.mart.com/cpp/public_panelpage_earlyScreenOut.asp?supplier=fed&code=[%PID%][%SUPPLIER_ENCRYPT_URL%] 
```

所以我相信 [%XYZ%] 代表一个将动态填充的参数？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:32:57.527

> 此 URL 格式是 .ASPX 约定吗？

这不是一个约定。

> 所以我相信 [%XYZ%] 代表一个将动态填充的参数？

的用法`[% ... %]`似乎是服务器端解析引擎使用的标记器。

*注意 - 使用 URL 时，`%`符号`&`和`?`是特殊字符，如果您打算通过 URL 传递它们，则应正确编码。*

# node.js - 使用节点画布操作远程图像时出错：“给定的图像尚未完成加载”

> ID：11163670
> 
> 赞同：1
> 
> 时间：2012-06-22T20:31:17.583
> 
> 标签：node.js, canvas, cairo

我正在尝试使用 node-canvas 来操作存储在远程服务器上的图像。我从 image-src 示例开始并对其进行了修改，但我无法让它工作。这是我的代码：

```
var fs = require('fs'),
    http = require('http'),
url = require('url'),
canvas = require('./node-canvas/lib/canvas');

var outCanvas = new canvas(1000, 750);
var ctx = outCanvas.getContext('2d');

http.get(
    {
        host: 'farm8.staticflickr.com',
        port: 80,
        path: '/7108/7038906747_69a526f070_z.jpg'
    },
    function(res) {
        var data = '';
        res.on('data', function(chunk) {
            data += chunk;
        });
        res.on('end', function () {
            img = new canvas.Image;
            img.src = data;
            ctx.drawImage(img, 0, 0, img.width, img.height);

            var out = fs.createWriteStream(__dirname + '/my-out.png')
                , stream = outCanvas.createPNGStream();

            stream.on('data', function(chunk){
                out.write(chunk);
            });
        });
    }
); 
```

...这是我得到的错误：

```
/Users/daf/Documents/lolstagram/lolstagram-c.js:23
    ctx.drawImage(img, 0, 0, img.width, img.height);
       ^
Error: Image given has not completed loading
    at IncomingMessage.<anonymous> (/Users/daf/Documents/lolstagram/lolstagram-c.js:23:8)
    at IncomingMessage.emit (events.js:88:20)
    at HTTPParser.onMessageComplete (http.js:137:23)
    at Socket.ondata (http.js:1150:24)
    at TCP.onread (net.js:374:27) 
```

知道问题可能是什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:51:53.880

`String`当您需要将响应中的数据作为二进制数据保存在`Buffer`. Node-canvas 期望将二进制数据传递到`img.src`.

这应该在您的 http 响应处理程序中工作：

```
var data = new Buffer(parseInt(res.headers['content-length'],10));
var pos = 0;
res.on('data', function(chunk) {
  chunk.copy(data, pos);
  pos += chunk.length;
});
res.on('end', function () {
  img = new canvas.Image;
  img.src = data;
  ctx.drawImage(img, 0, 0, img.width, img.height);
  var out = fs.createWriteStream(__dirname + '/my-out.png')
    , stream = outCanvas.createPNGStream();

  stream.on('data', function(chunk){
    out.write(chunk);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T10:21:31.950

一定是jpg的问题（我不知道）我认为如果你的图像是png就可以了

请安装`libjpeg`以解决问题:)

# php - 如何：使用 gapi 从谷歌分析定义和获取自定义报告

> ID：11163671
> 
> 赞同：0
> 
> 时间：2012-06-22T20:31:19.877
> 
> 标签：php, google-analytics, google-analytics-api

我在 Google 分析中有一个名为 my-newsletters 的自定义报告。我想通过 php 调用来获取此报告，`$ga->requestReportData(...)`然后解析响应并将其格式化。

首先，我创建了一个帐户来收集我所有的时事通讯打开和点击次数 - 每次有人打开时事通讯或点击时事通讯中的链接时，我都会通过调用 Google 上的 __utm.gif 来捕获它。那部分正在工作，我在调用中（在着陆页又名 utmp 参数中）包含一些数据，例如单词“打开”和“点击”以区分事件以及我希望稍后解析的其他数据，加上我使用活动字段，也许我也应该对源字段做一些事情 - 现在我只是复制 utmp 字段。到目前为止，这部分似乎有效。

现在我需要帮助来定义一个报告，该报告将返回该 utmp 和活动字段信息以及每个点击次数，我猜是按点击日期排序的。然后我需要从我的 php 调用该报告，然后再对其进行解析——我还不担心的解析部分。

PS：这是我用来生成 utm url 的代码

```
function getGoogleUtmUrl($source='Emails', $referer='opens', $estid='0',$mailid='0', $campaign){
  $stat_id='MO-xxx31982-1';
    $var_utmcs=urlencode( 'UTF-8');
    $var_utmac = $stat_id; 
    $var_utmhn = 'mysite.com'; //enter your domain
    $var_utmn = rand(1000000000,9999999999); //random request number
    $var_cookie = rand(10000000,99999999); //random cookie number
    $var_random = rand(1000000000,2147483647); //number under 2147483647
    $var_today = time(); //today
    $var_referer = $referer; //referer url
    $utm_source = 'my_newsletter';
    $utm_medium = 'Emails';
    $utm_campaign = $campaign;//$_GET['url'];
    $var_uservar = $estid.'_'.$mailid; //enter your own user defined variable
    $var_utmp = 'mysite.com/newsletters/'.$referer.'/'.$estid.'/'.$mailid;//.$estid;//$_GET['url']; //this example adds a fake file request to the (fake) tracker directory (the image/pdf filename).
    $urchinUrl1 = 'http://www.google-analytics.com/__utm.gif?utmwv=4.3&utmn='.$var_utmn.'&utmsr='.$referer.'&utmcs='.$var_utmcs.
        '&utmul=en&utmje=0&utmfl=-&utmdt='.$utm_campaign.'&utmhn='.$var_utmhn.
        '&utm_source='.$var_utmp.'&utm_medium='.$utm_medium.'&utm_campaign='.$utm_campaign.'&utmr='.$var_referer.
        '&utmp='.$var_utmp.'&utmac='.$var_utmac.
        '&utmcc=__utma%3D'.$var_cookie.'.'.$var_random.'.'.
        $var_today.'.'.$var_today.'.'.$var_today.
        '.2%3B%2B__utmb%3D'.$var_cookie.'%3B%2B__utmc%3D'.
        $var_cookie.'%3B%2B__utmz%3D'.$var_cookie.'.'.$var_today.
        '.2.2.utmccn%3D(direct)%7Cutmcsr%3D(direct)%7Cutmcmd%3D(none)%3B%2B__utmv%3D'.
        $var_cookie.'.'.'%3B';
    // Now fire off the HTTP request
    echo "urchinURL1 == ".$urchinUrl1.' '.__FILE__.'  '.__LINE__.'<br/>';
    return $urchinUrl1; 
```

对我来说似乎过分了，但它有效，我在[https://developers.google.com/analytics/devguides/collection/other/mobileWebsites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)尝试了代码，但它不起作用 - 打开和点击不会在分析中注册- 至少不在实时页面上。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:34:10.793

我建议您首先构建您的报告查询，我建议您为此使用[Google Analytics 查询资源管理器](http://ga-dev-tools.appspot.com/explorer/)。

接下来使用[PHP的](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)[报告 API](https://developers.google.com/analytics/devguides/reporting/core/v3/)转置结果查询并从您的应用程序中提取数据。

# java - 如何在android中实现与服务器的实时双向连接

> ID：11163674
> 
> 赞同：2
> 
> 时间：2012-06-22T20:31:29.343
> 
> 标签：java, android

我有在 android 中开发和使用 REST 服务的经验，但现在我想为 android 实现一个在线游戏。例如多人游戏的井字游戏，用户可以邀请其他人玩游戏，并且每个人都可以实时接收对方的动作。

将 REST 用于此类应用程序需要对服务器进行常量调查以进行更新，这是一个坏主意。不是吗？

我的问题是这种“永久”连接的典型方法是什么。我只需要一些关于客户端和服务器中的技术和协议的提示，以便开始搜索和阅读：D

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:33:47.930

您可以直接使用套接字，但对于像井字游戏这样的游戏，它不应该那么健谈，使用 REST 就可以了。

# java - JavaFx 视频尺寸超出屏幕

> ID：11163675
> 
> 赞同：3
> 
> 时间：2012-06-22T20:31:30.960
> 
> 标签：java, windows, javafx-2

我最近发现 javafx 2.1 对我制作视频播放器的项目非常有用，但是在成功之后我遇到了视频大小尺寸的问题。换句话说，当我运行程序并且视频正常播放时，我看不到整个视频，因为它的尺寸大于我的屏幕分辨率。我可以在下面的代码中做什么来调整 windows7 64bit 中视频的实际大小：

```
public class HelloFx extends Application {

    public static void main(String[] args){
        launch(args);
    }

    @Override
    public void start(final Stage stage) throws Exception {
         stage.setTitle("Movie Player");
         final BorderPane root = new BorderPane();

         final Media media = new Media("file:///Users//user//Videos//Sintel.mp4");
         final MediaPlayer player = new MediaPlayer(media);
         final MediaView view = new MediaView(player);

         // System.out.println("media.width: "+media.getWidth());
         root.getChildren().add(view);

         final Scene scene = new Scene(root, 400, 400, Color.BLACK);

         stage.setScene(scene);
         stage.show();
         player.play();
         player.setOnReady(new Runnable() {
             @Override
             public void run() {
                 int w = player.getMedia().getWidth();
                 int h = player.getMedia().getHeight();

                 stage.setMinWidth(w);
                 stage.setMinHeight(h);

             }
         });
          //player.play();

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T19:24:40.037

JavaFX 2 MediaView 类有 2 个可以提供帮助的函数。它们是 .setFitHeight() 和 .setFitWidth() 。

所以，你可以，而不是让媒体决定屏幕的大小，而是让你的舞台设置屏幕的大小......

```
 public void run() {
                 int w = stage.getWidth(); // player.getMedia().getWidth();
                 int h = stage.getHeight(); // player.getMedia().getHeight();

                 // stage.setMinWidth(w);
                 // stage.setMinHeight(h);
                 // make the video conform to the size of the stage now...
                 player.setFitWidth(w);
                 player.setFitHeight(h);

             } 
```

然后视频应该适合舞台。上面的代码非常粗糙，您可能希望更好地“缩放”视频，即：找到媒体宽度与舞台宽度和媒体高度与舞台高度的比率......但上面的代码应该让你开始。

# c - 位未设置时休眠

> ID：11163684
> 
> 赞同：0
> 
> 时间：2012-06-22T20:32:00.130
> 
> 标签：c

我该如何做相反的事情：

```
while((*i2s) & (1<<19))
    usleep(10); 
```

我想在第 19 位为 0 时继续睡觉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:34:31.293

```
while(((*i2s) & (1<<19)) == 0)
    usleep(10); 
```

当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:35:21.727

`!`not 运算符反转条件：

```
while(!((*i2s) & (1 << 19))) {
    usleep(10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:34:22.637

使用**！**运算符将否定您的表达式：

```
while(!((*i2s) & (1<<19)))
    usleep(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:34:55.480

要执行相反的操作，请使用 !

```
while(!((*i2s) & (1<<19)))
   usleep(10); 
```

# php - JQuery Ajax 加载的内容无法从父级调用 PHP 变量

> ID：11163688
> 
> 赞同：2
> 
> 时间：2012-06-22T20:32:15.267
> 
> 标签：php, jquery, ajax

我在父文档中有变量，例如。

```
$var = 'blah'; 
```

然后使用 Jquery AJAX 调用填充 div 并且该文件具有该行。

```
<?php echo $var; ?> 
```

目前我得到

```
Notice: Undefined variable: 
```

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:54:56.210

通过您的 jQuery AJAX 请求请求的页面无法访问父页面上定义的变量，因为 AJAX 请求会创建一个单独的 HTTP 请求，这意味着该页面没有指向您的父页面的链接，并且将无法访问中定义的任何内容它。

您可以尝试`$var`通过[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)`data`函数的参数发送值，或者，只需在您通过 AJAX 请求的页面上重新填充。`$var`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:02:41.313

您的 $var 是否与 jQuery 在同一个 php 中？您需要从初始化它的 php 文件中回显 $var。

例如：

一个.php

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $.ajax({
                    url : "B.php",
                    success : function(out) {
                        $('#out').html(out);
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="out">
        </div>
    </body>
</html> 
```

B.php

```
<?php
  $var = "foo";
  echo $var;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:55:36.900

由于 JavaScript (jQuery) 纯粹在客户端执行，并且 AJAX 调用只是一个单独的页面请求，因此调用脚本无法知道“父”请求。我建议您`$var`通过 GET 或 POST 将其传递给脚本。

# perl - 如何在运行的 Perl 会话中编译 Perl 脚本？

> ID：11163690
> 
> 赞同：5
> 
> 时间：2012-06-22T20:32:18.433
> 
> 标签：perl

我有一个 Perl 脚本，它接受用户输入并创建另一个将在以后运行的脚本。我目前正在为这些脚本编写测试，我想要执行的测试之一是检查生成的脚本是否编译成功（例如`perl -c <script>`。）有没有办法让 Perl 对生成的脚本执行编译无需生成另一个 Perl 进程的脚本？我已经尝试搜索答案，但搜索只会找到有关将 Perl 脚本编译为可执行程序的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:06:49.280

编译脚本有很多副作用。它导致 subs 被定义。它导致模块被执行。等等如果你只是想测试一些东西是否可以编译，你*需要*一个单独的解释器。这是确保测试一个脚本不会导致以后的测试给出误报或误报的唯一方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T20:41:12.233

要执行动态生成的代码，请使用`eval`函数：

```
my $script = join /\n/, <main::DATA>;
eval($script);   # 3

__DATA__

my $a = 1;
my $b = 2;
print $a+$b, "\n"; 
```

但是，如果您只想编译或检查语法，那么您将无法在同一个 Perl 会话中进行。

`syntax_ok`来自库[Test::Strict](http://search.cpan.org/~pdenis/Test-Strict-0.14/lib/Test/Strict.pm#syntax_ok%28_$file_%5B,_$text%5D_%29)的函数通过使用外部 perl 解释器运行语法检查`perl -c`，所以我假设没有内部方法。

只有可能对您有用的解决方法是：

```
my $script = join /\n/, <main::DATA>; 
eval('return;' . $script); 
warn $@ if $@;   # syntax error at (eval 1) line 3, near "1
                 # my "

__DATA__ 

my $a = 1
my $b = 2; 
print $a+$b, "\n"; 
```

在这种情况下，您将能够使用 来检查编译错误`$@`，但是因为代码的第一行是`return;`，所以它不会执行。

* * *

*注意：感谢用户[mob](https://stackoverflow.com/users/168657/mob)的帮助聊天和代码更正。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:53:15.187

像这样的东西不适合你吗？

```
open(FILE,"perl -c generated_script.pl 2>&1 |");
@output=<FILE>;
if(join('',@output)=~/syntax OK/)
{
   printf("No Problem\n");
}
close(FILE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T18:06:28.760

见[`Test::Compile`](http://metacpan.org/module/Test%3a%3aCompile)模块，特别是`pl_file_ok()`功能。

# jquery - 需要访问对象 jQuery

> ID：11163691
> 
> 赞同：1
> 
> 时间：2012-06-22T20:32:20.373
> 
> 标签：jquery, jquery-plugins

抱歉，我是 jQuery 和一般编程的新手，如果我的问题有点愚蠢，我深表歉意。

我正在尝试在 jQuery 中编写一个快速而肮脏的表单验证脚本

我需要能够从“init”方法的范围之外访问我的“设置”对象中的属性，我试图在另一个我称之为“验证”的方法中获取它我不能只是通过该对象作为 validate 方法中的参数，因为我需要稍后调用我的 validate 方法。这是我的脚本：

```
(function($) {
    var methods = {
        init: function(options) {

            var settings = $.extend({
                bgColor: '#fff',
                textType: 'normal',
                textColor: '#666',
                errorMsgClass: 'errorMsg',
                requiredMsgClass: 'requiredMsg',

                ex: {
                    'email': /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/,
                    'message': /^[0-9a-zA-Z ."']+$/,
                    'name': /^[0-9a-zA-Z,\r\n ."']+$/,
                    'phone': /^[0-9 ]+$/,
                    'url': /^[0-9a-zA-Z,\r\n ."']+$/
                }
            }, options)

            return this.each(function() {
                var o = settings;
                var obj = $(this);
                var items = $(":input", obj);
                items.each(function() {

                    if (this.parentNode.className.substr(0, 8) == 'validate') {

                        $(this).bind({
                            focus: function() {
                                if ($(this).val() == $(this).attr('id')) {
                                    $(this).val('');
                                }
                                methods.msgHide($(this), '.errorMsg')
                            },
                            blur: function() {

                                methods.validate($(this))

                            }
                        });
                    }
                });

            });

            return settings;
        },
        validate: function(el) {

            if (el.val() == '') {

                methods.is_required ? methods.msgShow(el, '.requiredMsg') : '';
                el.val(el.attr('id'))

            }
            else {
                //hide required msg
                methods.msgHide(el, '.requiredMsg');
                var last = methods.get_length(el);
                var reg = methods.getWrapper(el).attr('class').substr(9, last);
                if (!el.val().match(methods.init.ex[reg])) {
                    methods.msgShow(el, '.errorMsg')
                }
            }
        },
        get_length: function(el) {

            //see if it has the trailing asterix
            if (methods.is_required) {
                return el.closest('div').attr('class').length - 10;
            }
            else {
                return el.closest('div').attr('class').length - 9;
            }
        },
        is_required: function(el) {

            //see if it has the trailing asterix
            if (el.closest('div').attr('class').lastIndexOf('*') > -1) {
                return true
            }
            else {
                return false
            }
        },
        getWrapper: function(el) {

            return el.closest('div');

        },
        msgShow: function(el, message) {
            methods.getWrapper(el).children(message).css({
                display: "block"
            });
        },

        msgHide: function(el, message) {
            methods.getWrapper(el).children(message).css({
                display: "none"
            });
        },
    };

    $.fn.validateForm = function(method) {

        // Method calling logic
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.validateForm');
        }

    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:47:07.880

您可以将设置对象传递给任何需要它的函数。

```
functionThatNeedsSettings(settings); 
```

# design-patterns - 如何限制每个作业/租户在 Azure 中针对队列工作的工作角色

> ID：11163692
> 
> 赞同：1
> 
> 时间：2012-06-22T20:32:20.803
> 
> 标签：design-patterns, azure, scalability, azure-queues

我有一个多租户天蓝色应用程序，其中可能有许多不同的作业排队。每个作业由许多单独的任务组成，这些任务存储在队列中。

出于用户原因和技术原因，一个特定的工作不应该消耗太多的工作：

用户：不希望用户陷入长期看不到任何进展的庞大工作技术：处理任务涉及访问网络上的一些有限资源，您只能说 10 个同时连接，但您可能有成千上万的任务最终需要这种连接。

为了让它变得更复杂一些，一些工作是“相关的”，因为它们会消耗相同的资源，所以 10 名工人的限制应该跨越这些工作

目前我们为每个作业使用单独的队列，这工作正常，但我们必须创建它们并即时清理它们，并有一个队列让工作人员找到合适的队列

此外，这使得相关工作变得困难/不可能。

有没有一个好的设计模式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:30:46.790

这是您可能希望考虑的设计模式。它通过使用单个队列来支持架构简单性和低成本，并通过将所有任务排队来实现故障转移安全。

对所有消息使用单个队列。有关支持多种消息类型的工作程序限制和队列的想法，请参阅此条目（包括我的答案）。 [如何从现实世界中的多个队列中读取？](https://stackoverflow.com/questions/10964933/how-to-read-from-multiple-queues-in-real-world/10965142#10965142)

您已将您的流程描述为多个作业，每个作业都有多个任务。

*   通过将作业（消息）添加到队列来排队。

*   作业消息处理器执行第一个任务，将后续任务（消息）添加到队列中，然后删除初始作业（消息）。这种模式将确保即使在机器回收时也不会丢失作业/任务。（假设并要求您的所有任务都是幂等的）。

*   随后的任务处理器基本上做同样的事情，直到没有更多的任务。

*   如果任务花费的时间超过队列消息可见性
    超时，请继续延长可见性。
    参考：[是否可以在不发布数据的情况下更改 Azure 队列消息不可见超时？](https://stackoverflow.com/questions/9134512/is-it-possible-to-change-an-azure-queue-message-invisibility-timeout-without-pos)

# css - 在 jsTree 上设置行高？

> ID：11163694
> 
> 赞同：4
> 
> 时间：2012-06-22T20:32:32.457
> 
> 标签：css, jstree

我正在使用 jstree 创建一个多级树，我希望能够设置比您通常看到的更大的行高，这样我就可以有一些大标题。（如果我将字体设置得更大，线条只会重叠。）

我尝试在 li 和 a 元素上设置 line-height CSS 属性，但都没有效果；jstree 似乎以编程方式覆盖了这些值。（我什至尝试在创建树后使用 jQuery 重新设置这些值，但这并没有帮助。）

为了让事情变得更复杂，我想让不同的层次有不同的间距，这样顶层就可以比更深的层次更大。

我已经尝试过主题插件，但我找不到任何东西来控制行高。

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-30T13:52:43.157

FWIW，这对我来说效果很好。它不会给你超大的标题尺寸，但它会根据我的喜好完美地增加尺寸。

设置我的树`variant: large`

```
//jstree config
$("#tree").jstree({
  "core" : {
    "themes" : {
      "variant" : "large"
    }
  }
  // ...
}); 
```

然后还更改所有节点的字体大小：

```
/* CSS */    
.jstree-node {
    font-size: 13pt;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T05:48:11.640

它有助于增加元素的高度吗？

```
.jstree-leaf {
 font-size: 37px;
 height: 50px;
}

.jstree-leaf a.jstree-hovered {
 height: 50px;
}

.jstree-leaf a.jstree-clicked {
 height: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T22:10:43.390

就其本身而言，MMeah 的解决方案对我不起作用。[将其与此处](https://code.google.com/p/jstree/issues/detail?id=670)的代码结合并更改高度以`auto`对我有用。[在此处](https://stackoverflow.com/a/24746827/1943)查看完整答案。

```
.jstree-default a { 
    white-space:normal !important; height: auto; 
}
.jstree-anchor {
    height: auto !important;
}
.jstree-default li > ins { 
    vertical-align:top; 
}
.jstree-leaf {
    height: auto;
}
.jstree-leaf a{
    height: auto !important;
} 
```

# android - ScrollView 不使用自定义视图滚动

> ID：11163698
> 
> 赞同：2
> 
> 时间：2012-06-22T20:32:44.817
> 
> 标签：android, scrollview, custom-view

我有一个 ScrollView，里面有一个自定义视图。它不会滚动。如果我在其中放入一个文本视图，我可以让它滚动。我一直在寻找解决方案，但我找不到为什么它不会滚动。

我假设我需要在绘制自定义视图时以某种方式通知 ScrollView。此代码来自自定义控件上的 onDraw。

```
 canvas.drawLine(0, 0, 2000, 2000, paint);
    canvas.drawLine(0, 200, 2000, 200, paint);
    canvas.drawLine(0, 300, 2000, 300, paint);
    canvas.drawLine(0, 400, 2000, 400, paint);
    canvas.drawLine(0, 500, 2000, 500, paint);
    canvas.drawLine(0, 600, 2000, 600, paint);
    canvas.drawLine(0, 700, 2000, 700, paint);
    canvas.drawLine(0, 800, 2000, 800, paint);
    canvas.drawLine(0, 900, 2000, 900, paint);
    canvas.drawLine(0, 1000, 2000, 1000, paint);
    canvas.drawLine(0, 1100, 2000, 1000, paint); 
```

这是xml文件

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"    
 android:id="@+id/button_scroll"    
 android:layout_width="match_parent"  
 android:layout_height="match_parent"      
 android:layout_gravity="center_horizontal"    
 android:fillViewport="true" >

   <SCEWidgetWarehouseView
        android:id="@+id/WarehouseView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

 </HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:02:33.450

问题很可能是您没有在自定义视图中正确实现 onMeasure(int, int) 。此方法用于告诉系统您的视图有多大。这在使用 wrap_content 时尤其重要。

# c# - 在运行时编译的脚本无法调用带有可选参数的方法

> ID：11163699
> 
> 赞同：2
> 
> 时间：2012-06-22T20:32:48.543
> 
> 标签：c#, .net-3.5, optional-parameters, csharpcodeprovider

我们为用户添加了一项功能，可以编写 C# 脚本供应用程序执行，这些脚本在运行时编译和运行。这些脚本可以访问我们公开的 API，它们由 CSharpCodeProvider 编译/运行。

我发现在运行时编译的代码在调用带有可选参数的方法时会出现问题，例如：

```
public void BlackmailColonelMustard(int amount, string myAlias, bool tellHisWifeAnyway = true) 
```

如果运行时编译的脚本调用**BlackmailColonelMustard(10000, "Mr Boddy")**，编译器会抱怨没有只有两个参数的重载方法，而不是识别第三个参数的默认值。

当从预编译代码调用时，它自然可以正常工作。有人知道我在做什么错吗？

是不是因为 VS2010（甚至是 .NET 4 之前的版本）足够聪明，可以编译使用可选参数的代码，但 .NET 3.5 运行时还没有学会这个技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:53:46.180

C# 4.0 中引入了可选参数。如果可能，将编译器版本设置为 4.0：

```
Dictionary<string, string> options = new Dictionary<string, string>();
options.Add("CompilerVersion", "v4.0");
CSharpCodeProvider provider = new CSharpCodeProvider(options); 
```

# javascript - jquery 或 js：将站点范围内的链接替换为另一个并更改为 https

> ID：11163713
> 
> 赞同：0
> 
> 时间：2012-06-22T20:33:48.780
> 
> 标签：javascript, jquery

我想改变每个实例

```
http[s]://www.mydomain.com/test/index.php?this_page=foo 
```

至

```
https://www.mydomain.com/test/index.php?this_page=bar 
```

我认为它必须能够完成，`attr.replace`但我无法弄清楚这个符号。如何使用 jQuery 或 JavaScript 做到这一点？

编辑：到目前为止，似乎每个人都缺少第一部分（http 或 https 更改为 https）或第二部分（foo 到 bar）:) 抱歉混淆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:43:35.657

你可以这样做：

```
$('a[href$="://www.mydomain.com/test/index.php?this_page=foo"]')
    .attr('href', 'https://www.mydomain.com/test/index.php?this_page=bar'); 
```

[*attribute-ends-with*选择器](http://api.jquery.com/attribute-ends-with-selector/)[ [*^(docs])*](http://api.jquery.com/attribute-ends-with-selector/)是原生 CSS3 选择器，因此选择这些元素应该很快。当然，您也可以对`http[s]`部件使用正则表达式，例如 ，`.filter`但这可能会更慢（也取决于您拥有的链接数量）。

如果 URL 包含也应该是新 URL 一部分的其他参数，您必须单独处理每个链接：

```
// Using the attribute-contains selector now. This still assumes that 
// `this_page=foo` is the first parameter in the URL
var pattern = /^https?:\/\/www.mydomain.com/test/index.php?this_page=foo(&|$)/;
$('a[href*="://www.mydomain.com/test/index.php?this_page=foo"]')
  .attr('href', function(i, val) {
      return val.replace(pattern, 'https://www.mydomain.com/test/index.php?this_page=bar$1');
  }); 
```

如果`this_page`可以在 URL 中的任何位置，则可以获取包含`this_page=foo`和基本 URL 的所有链接。这仅在没有其他以 开头的页面值时才有效`foo`：

```
var pattern_page = /([?&])this_page=foo(&|$)/;

$('a[href*="://www.mydomain.com/test/index.php?"][href*="this_page=foo"]')
  .attr('href', function(i, val) {
      return val.replace('http:', 'https:')
                .replace(pattern_page, '$1this_page=bar$2');
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:43:25.553

一般语法类似于：

```
$('a').prop('href', function(index, value) {
    return newValue;
}); 
```

其中的计算`newValue`将取决于您希望如何转换 URL，例如：

```
$('a').prop('href', function(index, value) {
    if (value.match(/=foo\??/) {
        value = value.replace(/=foo\??/, '=bar?').replace(/^http:/, 'https:');
    }
    return value;
}); 
```

我使用`.prop()`了而不是`.attr()`因为您似乎想要访问完全限定的 URL。使用属性而不是属性会给你 - 属性并不总是包含 URL 方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T23:50:49.207

对于其他人发现这个并且和我一样是菜鸟......这是我最终使用的解决方案。

```
$(document).ready(function(){ 
  $('a[href*="this_page=foo"]').prop('href', function(index, value) {
  return value.replace(/=foo/, '=bar').replace(/^http:/, 'https:');
  });
}); 
```

这是 Felix Kling 和 Alnitak 的结合，我非常感谢他们俩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:51:07.580

在纯 JavaScript 中，您可以使用：

```
var links = document.links;

for (var i = 0, len = links.length; i < len; i++) {
    href = links[i].href;
    if (href.indexOf('https') == -1) {
        links[i].href = href.replace('http', 'https');
        href = links[i].href;
    }
    if (href.split('=')[1] == 'foo'){
        links[i].href = href.replace('foo','bar');
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KvUHs/)。

在上面我一直在假设两个替代品不一定相互依赖的假设下工作，这可能是错误的。如果是，那么它变得更简单：

```
var links = document.links;

for (var i = 0, len = links.length; i < len; i++) {
    href = links[i].href;
    if (href.indexOf('https') == -1 && href.split('=')[1] == 'foo') {
        links[i].href = href.replace('http', 'https');
        links[i].href = href.replace('foo','bar');
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KvUHs/2/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T20:41:56.697

替换所有实例！！

```
$("a").each(function() {
    if ($(this).attr("href") == 'http[s]://www.mydomain.com/test/index.php?this_page=foo') {
        $(this).attr('href', 'https://www.mydomain.com/test/index.php?this_page=foo');
    }
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T20:41:57.650

假设这包含在`href`链接的属性中，请尝试以下操作：

```
$("a").each(function() {
    if($(this).attr("href").indexOf("http:") != -1) {
        $(this).attr("href", $(this).attr("href").replace("http", "https"));
    }
}); 
```

可能有更有效的方法，但这应该可以解决问题。

问候，理查德

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T20:42:07.273

这将在整个页面中用 https 替换锚点中的所有 http 引用。

```
​$.each($('a'), function(i,v){
  var oldULR =  $(v).attr('href');
  var newURL = oldULR.replace('http', 'https');
  $(this).attr('href', newURL);

})​;​ 
```

小提琴：http : [//jsfiddle.net/bkNLD/](http://jsfiddle.net/bkNLD/)

# c# - 将 Xml 保存到文档 C#

> ID：11163714
> 
> 赞同：-3
> 
> 时间：2012-06-22T20:33:51.013
> 
> 标签：c#, xml, windows, save

与我在这里找到的不同，我想在我的 xml 文档中维护语法，而序列化并没有涉及到这一点。我希望能够在 xml 文档中添加另一个“任务”标签……加载信息不是问题，我之前必须处理过这个问题……但这是。

主程序：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;
using System.Xml.Linq;
using System.Xml.Serialization;
using System.IO;

namespace ToDoList
{
    public partial class Form1 : Form
    {
        string title; //the variable for the title textbox value to be stored in
        string details; //the variable for the details textbox value to be stored in
        string itemstr; //the variable for title and details to be merged in

        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        { 
            optionsbtn.Text = "Options"; //make the options button's text options
            var items = ToDochkbox.Items; //create a private "var" items symbolizing             the Checkbox's items array
            XDocument xmlDoc = XDocument.Load("tasksdoc.xml"); //load the xml document         (in bin or release)
            var q = from c in xmlDoc.Descendants("root") //go "within" the <root>     </root> tag in the file
                    select (string)c.Element("task"); //find the first <task></task> tag
            foreach (string N in q) //now cycle through all the <task></task> tags and     per cycle save them to string "N"
            {
                items.Add(N); //add the item to the checkbox list
            }

        }

        public void addbtn_Click(object sender, EventArgs e)
        { 
            var items = ToDochkbox.Items; //create a private "var" items symbolizing     the Checkbox's items array
            title = Addtb.Text; //set the title string to equal the title textbox's     contents
            details = detailstb.Text; //set the details string to equal the detail     textbox's contents
            itemstr = title +" - " + details; //set a variable to equal the title string, a - with spaces on each end, and then the details string
            items.Add(itemstr); //add the variable itemstr (above) to the the checkbox list

        }

    private void optionsbtn_Click(object sender, EventArgs e)
    {
        new options().Show();//show the options form
    }
    private void aboutToolStripMenuItem_Click(object sender, EventArgs e)
    {
        new options().Show();//show the options form
    }

    private void saveToolStripMenuItem_Click(object sender, EventArgs e)
    {

    }

    public void loadToolStripMenuItem_Click(object sender, EventArgs e)
    {
        optionsbtn.Text = "Options"; //make the options button's text options
        var items = ToDochkbox.Items; //create a private "var" items symbolizing the Checkbox's items array
        XDocument xmlDoc = XDocument.Load("tasksdoc.xml"); //load the xml document (in bin or release)
        var q = from c in xmlDoc.Descendants("root") //go "within" the <root> </root> tag in the file
                select (string)c.Element("task"); //find the first <task></task> tag
        foreach (string N in q) //now cycle through all the <task></task> tags and per                            cycle save them to string "N"
            {
                items.Add(N); //add the item to the checkbox list
            }

        }

    }
} 
```

还有我的 XML 文档：

```
 <root>
        <task>First Task - Create a Task</task>
    </root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:44:37.757

可用于序列化的类：

```
public class MyClass
{
    [XmlElement("task")]
    public List<string> Tasks { get; set; }
} 
```

将 放置`XmlElementAttribute`在集合类型上将导致每个元素都被序列化，而不是为列表放置一个节点。

Xml 与`XmlElementAttribute`：

```
<root>
    <task>First Task - Create a Task</task>
    <task>SecondTask - Create a Task</task>
    <task>ThirdTask - Create a Task</task>
</root> 
```

Xml*没有* `XmlElementAttribute`：

```
<root>
    <Tasks>
        <Task>First Task - Create a Task</Task>
        <Task>SecondTask - Create a Task</Task>
        <Task>ThirdTask - Create a Task</Task>
    </Tasks>
</root> 
```

几天前，我以类似的方式回答[了另一个关于序列化列表的问题。](https://stackoverflow.com/questions/11122870/always-empty-when-using-deserialize-on-xmlserializer/11122994#11122994)看看他的问题，然后是答案，这可能是你想要做的。

# javascript - 通过 JavaScript 包含 HTML 文件

> ID：11163715
> 
> 赞同：3
> 
> 时间：2012-06-22T20:33:53.620
> 
> 标签：javascript, jquery

这是存储在本地的文件，而不是在服务器上，因此服务器端包含不起作用。

## 问题：

我有一个 HTML 文件。里面有很多数据，我想把它分成更小的部分，然后将它们全部包含到我的大 html 文件中，例如：

```
main.html
  <include "partA.html">
  <include "partB.html">
  <include "partC.html"> 
```

我希望结果就像 partA,B,C.html 的内容被直接读入 main.html

现在，这不在服务器上——它存储在本地，所以我不能做 SSI。我的问题是：

有没有一些简单的方法可以通过 JavaScript 做到这一点？似乎使用 JavaScript，我应该能够：

*   获取 blah.html 的内容 [不确定如何执行此步骤 [
*   调用一个document.write就可以了，把它写入文档
*   可能处理一些处理转义字符串的东西

## 问题：

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:44:12.567

作为安全功能，这是不可能的。这里的这篇文章是关于该主题的讨论 -[包括没有本地服务器？](https://stackoverflow.com/questions/7880942/includes-without-local-server). 正如答案所说，如果可以的话，最好的办法是在机器上安装一个小型 Web 服务器。他们并不难开始。

我以前用过nginx，效果很好。[http://en.wikipedia.org/wiki/Nginx](http://en.wikipedia.org/wiki/Nginx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:40:34.450

HTML5Rocks 有一个关于如何使用 HTML5 的 File API 读取本地文件的教程：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

除此之外，Javascript 通常不具备访问本地文件系统的能力。

*更新*- 我假设主文件在服务器上，并且您希望该文件访问本地文件。重新阅读时，您的所有文件似乎都是本地文件，在这种情况下，下面的一些答案将起作用。

# http - 基于位置的重定向的 HTTP 状态码

> ID：11163716
> 
> 赞同：1
> 
> 时间：2012-06-22T20:33:54.773
> 
> 标签：http, redirect, http-status-codes, http-redirect

我有一个网页，当登陆时，它将检测用户的物理位置，然后将它们重定向到最适合用户的页面。

此重定向应使用什么 HTTP 状态代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:50:00.973

如果请求者有一个 URI 可以让他们在没有重定向的情况下到达同一个地方，那么 303 是有意义的（[正如 sjstrutt 回答的](https://stackoverflow.com/a/11163721/662565)那样），因为他们应该使用新位置的 URI。如果没有，302 对我来说是有意义的，因为他们*应该*继续使用 Request-URI 来处理未来的请求，因为您随后会将他们重定向到缺少他们本来可以请求的 URI 的位置。

以下是[w3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)所说的关于 302 状态代码的内容：

> 10.3.3 302 找到
> 
> 请求的资源临时驻留在不同的 URI 下。 **由于重定向有时可能会改变，客户端应该继续使用 Request-URI 来处理未来的请求。**此响应仅在由 Cache-Control 或 Expires 标头字段指示时才可缓存。
> 
> 临时 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则响应的实体应该包含一个简短的超文本注释，其中包含指向新 URI 的超链接。
> 
> 如果收到 302 状态代码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出请求的条件。
> 
> ...

强调我的。

As an aside: CodeIgniter's [`redirect()`](http://codeigniter.com/user_guide/helpers/url_helper.html) function defaults to 302, but mentions a 301 might be used for search engine redirects. Obviously that was their decision, but I figured I would throw that into the mix as it is a widely used web framework and I assume they have put some thought into it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:24:08.167

The appropriate response status code for a successful content negotiation is either [301](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.2), [302](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.3), or [307](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.8), depending on whether the redirect is permanent or only temporary.

But in any case, server-driven negotiation should always state which information the decision was based on. In HTTP, it’s the *Vary* response header field that specifies a list of request header fields that were used in this process.

Unfortunately, the client’s IP address (I guess you’re translating those into geolocation information) is not an option here. So a permanent redirect is not an option either, unless you indicate the response not to be cached, otherwise it could be cached by clients or intermediary proxies. So I would either use 302 or 307.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-22T20:34:18.750

我相信 HTTP 303 可能是最适合这种情况的状态代码，尽管它可能与 HTTP 1.1 之前的客户端不兼容。

[HTTP 303](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)状态代码指出（注意：我将我认为最重要的部分加粗）： **可以在不同的 URI 下找到对请求的响应，并且应该使用该资源上的 GET 方法检索。**此方法的存在主要是为了允许 POST 激活脚本的输出将用户代理重定向到选定的资源。**新的 URI 不是原始请求资源的替代引用。303 响应不能被缓存，但对第二个（重定向）请求的响应可能是可缓存的。**

# android - 有没有办法检测android内置搜索框的关闭？

> ID：11163717
> 
> 赞同：0
> 
> 时间：2012-06-22T20:33:56.217
> 
> 标签：android, android-layout

有什么方法可以检测内置的 android 搜索对话框何时关闭？我没有使用小部件，而是使用搜索对话框。此时我需要对我的布局采取某种行动。此时会不会有一些刷新，我可以进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:28:25.333

Looks like it can be done using SearchManager [http://developer.android.com/reference/android/app/SearchManager.OnCancelListener.html](http://developer.android.com/reference/android/app/SearchManager.OnCancelListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:17:36.687

这是关于基于对话框的搜索还是 SearchView（在操作栏中，需要 Android 3.0+）？

如果您使用基于对话框的搜索，您可以创建一个扩展 Dialog 类的类，然后使用 OnPanelClosed() 方法（更多信息请参见[此处](http://developer.android.com/reference/android/app/Dialog.html#onPanelClosed%28int,%20android.view.Menu%29)）。

如果您使用的是基于操作栏的搜索视图，您可以添加一个 OnCloseListener() 侦听器，如果用户关闭视图，该侦听器将被调用。更多关于[这里](http://developer.android.com/reference/android/widget/SearchView.OnCloseListener.html)。

我希望这有帮助。

# c - C添加数组元素导致分段错误

> ID：11163725
> 
> 赞同：0
> 
> 时间：2012-06-22T20:34:25.990
> 
> 标签：c, arrays, exec

我已经阅读了几个论坛，但找不到解决方案。

 `````
int sIndex = 3;
char serverArgs[serverCommandCount + 3][20];

strcpy(serverArgs[0], "ant");
strcpy(serverArgs[1], "-f");
strcpy(serverArgs[2], "/dev/server1/trunk/build.xml");
if(serverStop){strcpy(serverArgs[sIndex], "jboss-stop"); sIndex++;}
if(serverClean){strcpy(serverArgs[sIndex], "clean"); sIndex++;}
if(serverDeploy){strcpy(serverArgs[sIndex], "deploy"); sIndex++;}
if(releaseDB){strcpy(serverArgs[sIndex], "releasedb"); sIndex++;}
if(createDB){strcpy(serverArgs[sIndex], "createdb"); sIndex++;}
if(serverStart){strcpy(serverArgs[sIndex], "jboss-start"); sIndex++;}
if(serverDebug){strcpy(serverArgs[sIndex], "jboss-start-debug"); sIndex++;}

execv(antEx, serverArgs); 
```` 

`在这个解决方案中，问题是 execv 想要一个 char *[ ] 而不是 char[ ]。`

 ``````
int sIndex = 3;
char *serverArgs[serverCommandCount + 3];

for(index = 0; index < serverCommandCount + 3; index++)
    serverArgs[index] = malloc(20);
strcpy(serverArgs[0], "ant");
strcpy(serverArgs[1], "-f");
strcpy(serverArgs[2], "/dev/server1/trunk/build.xml");
if(serverStop){strcpy(serverArgs[sIndex], "jboss-stop"); sIndex++;}
if(serverClean){strcpy(serverArgs[sIndex], "clean"); sIndex++;}
if(serverDeploy){strcpy(serverArgs[sIndex], "deploy"); sIndex++;}
if(releaseDB){strcpy(serverArgs[sIndex], "releasedb"); sIndex++;}
if(createDB){strcpy(serverArgs[sIndex], "createdb"); sIndex++;}
if(serverStart){strcpy(serverArgs[sIndex], "jboss-start"); sIndex++;}
if(serverDebug){strcpy(serverArgs[sIndex], "jboss-start-debug"); sIndex++;}

execv(antEx, serverArgs); 
````  `当我以这种方式尝试时，当它尝试执行时出现分段错误

 ``strcpy(serverArgs[1], "-f");`  `我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:17:25.273

将我的评论变成答案：行 strcpy(serverArgs[2], "/dev/server1/trunk/build.xml"); 可能不好——那个字符串大于 20 个字符。您应该完全确定您`malloc`有足够的空间容纳可能进入阵列的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:37:49.013

检查手册页`execv`：

> 指针数组必须以 NULL 指针终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:52:51.650

您的第二个解决方案通常是好的解决方案，但如果您的平台上有它，请使用`strdup`而不是`malloc`and`strcpy`一次性分配和复制字符串。如果你没有`strdup`，自己写一个也不会很困难。

此外，对于您的字符串数组，您不会感到惊讶，请执行以下操作：

```
char *serverArgs[serverCommandCount + 3] = { 0 }; 
```

正确初始化所有指针。``````

# xsd - plone.app.theming 包括来自外部站点的内容

> ID：11163726
> 
> 赞同：3
> 
> 时间：2012-06-22T20:34:28.863
> 
> 标签：xsd, plone, diazo, xdv

这似乎是可能的，但我错过了一些东西。我正在使用 plone.app.theming（重氮）。我正在尝试从冷聚变站点中提取页面。我可以使用加载的第一页，但该页面随后具有引用更多数据页的 url。网址的格式如下“./undergraduates_classes_info.cfm?crse=001A§num=A”（Plone 非常乐意解析）我已经尝试了各种排列，但我似乎无法让它工作.

```
 <xsl:param name="ExtUrl" select="'http://exeternalsite'" />
    <xsl:template match="a/@href[contains(.,'/undergraduates')]">
        <xsl:attribute name="href">
            <xsl:value-of select="concat($ExtUrl, .)" />
        </xsl:attribute>
 </xsl:template> 
```

我还需要将 url 传递给命令，以便我可以取回实际数据。

感谢您提供任何帮助-也许我的处理方法不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T02:06:31.920

在完成处理请求之前依赖远程服务是一个非常糟糕的主意。想象一下该站点出现故障或运行缓慢？现在，您正在等待它完成或超时，然后再提供您的页面。

更好的解决方案是使用 javascript 来拉入页面的内容。

它可能看起来像这样：

```
$(document).ready(function(){
  $('#containerofcontent').load('http://remoteurl #contentselector');
}); 
```

假设您的站点位于不同的域上，您还需要在远程站点上设置一些特殊的标头，以便浏览器允许 ajax 请求：

```
Access-Control-Allow-Origin: http://plonesiteurl 
```

不过，用任何 Web 服务器覆盖标头都很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:57:53.407

您可以通过指定此处记录的 href 属性来包含来自外部站点的内容：http: [//docs.diazo.org/en/latest/advanced.html#include-external-content](http://docs.diazo.org/en/latest/advanced.html#including-external-content)

您需要在 plone.app.theming 中启用“读取网络”选项以允许包含外部 url，请参阅： http: [//pypi.python.org/pypi/plone.app.theming#usage](http://pypi.python.org/pypi/plone.app.theming#usage)

正如其他人指出的那样，这确实会对性能产生影响，但是如果您正在缓存结果页面，那可能没问题。您可以通过缓存片段并使用 diazo 站点上记录的 SSI 或 ESI 方法选项来避免该性能成本，但您需要设置 Nginx 以运行 filter.xsl 样式表或 diazo 代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:34:33.357

除非我误解了你的问题（总是可能的），否则我认为你误解了patheming。patheming 可以包括来自远程站点的*主题资产*（例如模板、图像），但它既不适合也不真正能够代理来自远程站点 的*内容。*

# c++ - 阻塞调用后立即调用方法

> ID：11163731
> 
> 赞同：1
> 
> 时间：2012-06-22T20:34:47.153
> 
> 标签：c++, multithreading, boost, boost-thread

我正在使用具有阻塞功能的第三方库，也就是说，它在完成之前不会返回；我可以为该呼叫设置超时。

问题是，该函数将库置于某种状态。一旦它进入那个状态，我需要用我自己的代码做一些事情。我的第一个解决方案是在单独的线程中执行此操作：

```
void LibraryWrapper::DoTheMagic(){
    //...
    boost::thread EnteredFooStateNotifier( &LibraryWrapper::EnterFooState, this );
    ::LibraryBlockingFunction( timeout_ );
    //...
}

void LibraryWrapper::EnterFooState(){
   ::Sleep( 50 ); //Ensure ::LibraryBlockingFunction is called first
   //Do the stuff
} 
```

很恶心，不是吗？我不得不`Sleep`打电话因为 ::LibraryBlockingFunction 必须在我下面做的事情之前被调用，否则一切都会失败。但是等待 50 毫秒是一个很差的保证，我不能再等了，因为这个特定的任务需要尽快完成。

难道没有更好的方法来做到这一点吗？考虑到我无权访问图书馆的代码。欢迎使用 Boost 解决方案。

**更新**：就像其中一个答案所说，库 API 定义不明确。我向开发人员发送了一封电子邮件，解释了问题并提出了解决方案（即，使呼叫非阻塞并将事件发送到已注册的回调以通知状态更改）。同时，我设置了足够高的超时时间以确保完成 X 工作，并在执行调用后工作之前设置足够高的延迟时间以确保调用库函数。它不是确定性的，但在大多数情况下都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:42:12.443

使用 boost future 会澄清这段代码吗？要使用[boost future 文档](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/synchronization.html#thread.synchronization.futures)中的示例：

```
int calculate_the_answer_to_life_the_universe_and_everything()
{
    return 42;
}

boost::packaged_task<int> pt(calculate_the_answer_to_life_the_universe_and_everything);
boost::unique_future<int> fi=pt.get_future();

boost::thread task(boost::move(pt));

// In your example, now would be the time to do the post-call work.

fi.wait(); // wait for it to finish 
```

尽管您可能仍然需要一些延迟以确保您的函数调用已经发生（您的问题的这一点似乎定义不明确-有什么方法可以确定性地确定何时可以安全地执行后-调用状态更改？）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:04:39.380

据我了解，问题是您需要这样做：

1.  输入阻止呼叫
2.  在你进入阻塞调用之后但在它完成之前，你需要做一些其他的事情
3.  您需要在阻塞调用返回之前完成#2

从纯粹的 C++ 角度来看，您无法以确定性的方式实现这一点。那是在不了解您正在使用的库的详细信息的情况下。

但我注意到你的超时值。这可能会提供一个漏洞，也许。

如果你：

1.  输入超时为零的阻塞调用，使其立即返回
2.  你有其他东西吗，要么在同一个线程中，要么与主线程同步。也许使用屏障。
3.  验证#2 完成后，再次进入阻塞调用，正常的非零超时。

仅当您输入具有零超时的阻塞调用时，库的状态将发生更改，这才有效。

# facebook - Facebook Graph API 返回共享而不是总数

> ID：11163739
> 
> 赞同：0
> 
> 时间：2012-06-22T20:35:05.440
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk, facebook-social-plugins

我在尝试为我们的 Like 按钮返回 total_count 数时遇到问题。我们的应用程序管理 Like 按钮和 Open Graph 标签，我们尝试获取一些 URL 的 Like 计数，但它返回的共享没有 OG 标签信息。

例如： [https ://graph.facebook.com/?id=http://www.fruitilike.com/products/shares-debug6/](https://graph.facebook.com/?id=http://www.fruitilike.com/products/shares-debug6/)

回报：

```
{
   "id": "http://www.fruitilike.com/products/shares-debug6/",
   "shares": 1
} 
```

它应该如何工作的示例： [https ://graph.facebook.com/?id=http://www.fruitilike.com/products/apple](https://graph.facebook.com/?id=http://www.fruitilike.com/products/apple)

回报：

```
{
   "id": "114182628680532",
   "name": "Apple",
   "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/187789_114182628680532_2291233_s.jpg",
   "link": "http://www.fruitilike.com/products/apple",
   "likes": 1,
   "app_id": 102729306450470,
   "category": "Food",
   "is_published": true,
   "description": "The Apple. When it falls from a tree it generates gravity.",
   "about": "The Apple. When it falls from a tree it generates gravity."
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:05:49.223

这些结果没有错，这是因为您比较的对象具有不同的类型：

*   `http://www.fruitilike.com/products/shares-debug6/`-[是`website`](https://graph.facebook.com/10151028992495250)
*   `http://www.fruitilike.com/products/apple/`-[是`food`](https://graph.facebook.com/10150178707335357)

为不同类型的对象设置不同的集合字段是完全可以的。

# gtk - 使用 Canonical 快速设置应用程序图标

> ID：11163742
> 
> 赞同：0
> 
> 时间：2012-06-22T20:35:31.467
> 
> 标签：gtk, icons, ubuntu-12.04, ubuntu-unity, canonical-quickly

有没有一种简单的方法来设置应用程序的图标`canoncial-quickly`？我已经尝试在 中设置主窗口的图标文件`Glade`，但该应用程序**仍然使用其中一个股票 GTK 图标**作为其主图标`Unity`。`Ubuntu 12.04 LTS`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:38:40.177

导航到包含您的 Quickly Ubuntu 应用程序的目录。假设它被称为 myproj。myproj 内部是一个名为 data 的目录。内部数据是一个名为 media 的目录。在那里你应该看到一个名为 myproj.svg 的图形文件。将 myproj.svg 替换为您选择的可缩放矢量图形图像。您可以从网上下载 svg，也可以在 Inkscape 中为自己创建一个。下次运行应用程序时，它会选择 myproj.svg 作为其图标。

# iphone - 在 UITableView 上滚动显示表格的底部被截断

> ID：11163743
> 
> 赞同：0
> 
> 时间：2012-06-22T20:35:34.700
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

我在 View 中有一个 TableView，当它滚动时，底部表格的圆形部分被切断。我希望它的行为类似于 Stocks 应用程序，其中表格视图用圆角固定，并且在固定圆角内滚动滚动。这是怎么做的？

![在此处输入图像描述](../Images/3aacaa756167f7f706b5916c01c9e3a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:40:29.683

首先，如果您还没有，请将 QuartzCore 框架库添加到您的项目中。

然后，在管理 UITableView 的 UIViewController 中，执行以下操作：

```
#import <QuartzCore/QuartzCore.h> 
```

然后在 viewDidLoad 上：

```
myTableView.layer.cornerRadius = 8; 
```

这将给它 8px 圆角。QuartzCore 框架公开了许多非常有用的事情，您可以使用 UIView 及其内部层来做这些事情。实验！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:03:55.940

对于您的此要求，我只是告诉您使用 ScrollView Help ...

```
 yourTableView.frame = CGRectMake(yourTableView.frame.origin.x,yourTableView.frame.origin.y, yourTableView.frame.size.width, yourTableView.contentSize.height);

    float ftbl = yourTableView.frame.origin.y + yourTableView.contentSize.height + 15;
    yourScrollView.contentSize=CGSizeMake(320, ftbl); 
```

如果需要，在这里用 Grouped 声明 tableview 类型。当然这对你有用... :)

# java - 如何测试字符串创建？当使用 db 中的数据创建字符串时

> ID：11163746
> 
> 赞同：0
> 
> 时间：2012-06-22T20:36:07.103
> 
> 标签：java, string, testing

我创建了一个应用程序，每天自动发送两次推文。现在我被告知要编写测试文件。

推文本身是由字符串和数据库中的数据生成的。

```
String actual = genTweet();        
String expected = "Company Most Active ($Vol. in Millions) | SCZZL $19.5 | HUTC $18.1 | TSCDY $18.0 | TOELY $16.2 | GBGM $15.7 | More at: http://www.website.com/home";
assertEquals(expected, actual); 
```

我在想，到底是怎么测试这个的？美元值和符号不断变化，所以每次都是实际的！= 预期的。

任何建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:39:06.963

您通常不会针对生产服务器运行测试。取而代之的是，使用具有完全由您控制的可预测数据的测试服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:37:50.670

一些匹配但排除可变部分的正则表达式怎么样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:01:55.677

假设这是您的`genTweet()`功能：

```
public String getTweet(List<Activity> activities) {
  String tweetText = "Company Most Active ($Vol. in Millions)";
  for (Activity activity : activities) {
    tweetText = String.format("%s | %s $%.02f", tweetText, activity.getCompanyName(), activity.getMoney());
  }
  return tweetText;
} 
```

现在，您可以控制`genTweet()`函数使用的信息。在生产中，它将从数据库或任何其他存储引擎中填充。在开发模式下，来自本地数据库快照。

在测试期间，您通常将它们填充到您的`setUp()`方法中。

```
// setUp()
List<Activity> activities = new List();
activities.add(new Activity("A", 1.10));
activities.add(new Activity("B", 2.209));

// Expected
String expected = "Company Most Active ($Vol. in Millions) | A $1.10 | B $2.21";

// Real
String real = genTweet(activities);

assertEquals(expected, real); 
```

我要谈谈[Mock Objects](http://en.wikipedia.org/wiki/Mock_object)。但这是另一种直观的看待方式。

# lua - 在 vlc 扩展中使用 lua 打开 Web 浏览器

> ID：11163748
> 
> 赞同：3
> 
> 时间：2012-06-22T20:36:20.847
> 
> 标签：lua, vlc

我正在编写一个 VLC 扩展，我想在 Web 浏览器中打开一些 url（当然是在 lua 中）。到目前为止，我还没有找到任何从 lua 脚本打开 Web 浏览器的相关代码。有什么方法可以执行此任务（例如，谷歌搜索正在播放的文件）？

我可以使用对话框创建指向 url 的链接，但我想跳过此步骤并使其在没有任何用户输入的情况下打开。

我是 lua 和制作 VLC 扩展的初学者（几天前才开始），从那时起一直在尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T05:22:57.657

确切的命令因操作系统而异：

*   在 Windows 上：
    `start http://example.com/`
*   在 *nix 上（最便携的选项）：
    `xdg-open "http://example.com/"`
*   在 OSX 上：
    `open http://example.com/`

* * *

以下 Lua 示例应该可以在 Windows、Linux 和 OSX 上运行（尽管我无法测试 OSX）。
它首先检查 Lua 的`package.config`目录`\\`分隔符（afaik 仅在 Windows 上使用）。那应该只给我们留下支持`uname`. 然后我飞跃并假设 Mac 将识别为“达尔文”，因此任何不是 *nix 的东西。

显然，这还不够详尽。

```
-- Attempts to open a given URL in the system default browser, regardless of Operating System.
local open_cmd -- this needs to stay outside the function, or it'll re-sniff every time...
function open_url(url)
    if not open_cmd then
        if package.config:sub(1,1) == '\\' then -- windows
            open_cmd = function(url)
                -- Should work on anything since (and including) win'95
                os.execute(string.format('start "%s"', url))
            end
        -- the only systems left should understand uname...
        elseif (io.popen("uname -s"):read'*a') == "Darwin" then -- OSX/Darwin ? (I can not test.)
            open_cmd = function(url)
                -- I cannot test, but this should work on modern Macs.
                os.execute(string.format('open "%s"', url))
            end
        else -- that ought to only leave Linux
            open_cmd = function(url)
                -- should work on X-based distros.
                os.execute(string.format('xdg-open "%s"', url))
            end
        end
    end

    open_cmd(url)
end 
```

# jquery - jQuery 列过滤器

> ID：11163752
> 
> 赞同：1
> 
> 时间：2012-06-22T20:36:45.457
> 
> 标签：jquery

我有一个应用程序，它在表格中显示客户列表。此表中有 485 行。在其中`thead`有一个文本框，允许用户过滤在出现文本框的列中输入的值。似乎每当用户在其中一个字段中输入字母时，Firefox 都会显示有关脚本没有响应的提示。

在任何人建议之前，分页在这里不是一个选项 - 想法是它显示完整的客户列表，然后用户过滤某个列中的某个值。

目前我正在使用以下方法过滤每一列：

```
$inputs.keyup(function() {
    $header = $(this).closest("th").attr("data-header-name");
    $table = $(this).closest("table").find("tbody");
    $rows = $table.find("tr");
    $rows.not(":visible").show(0);
    $input = $(this);
    if(!($.trim($input.val())) == "") {
         $rows.filter(function(i) {
             return ($(this).find("td").filter(function() {
                 return ($(this).attr("headers") == $header)
             }).html().toLowerCase().indexOf($input.val().toLowerCase()) == -1);
         }).hide(0);
    }
}); 
```

有没有人对如何改进这一点有任何想法，以使其更快？提前致谢。

[JS小提琴](http://jsfiddle.net/J4ngs/7/)

问候，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:46:42.233

只是把它放在一起，它不会同时考虑多个过滤器，但应该给你一些关于如何优化的想法。它只使用了一点 jQuery，如果你愿意，你可以很容易地用 vanilla JS 替换它。

请注意，我为每次击键添加了 500 毫秒的延迟以防止溢出，这可以进行调整或可能写得更好，但这在过去对我有用。此外，您可以通过预先构建查找表而不是在搜索操作期间调用 jQuery 来获得性能。

```
var timeout = 0,
    columns = {};

function doFilter(that) {
    var column = columns[that.column],
        filter = that.value.toUpperCase(),
        i = column.length - 1;

    // look for our value hide row if not found
    while (i > -1) {
        var display = 'none'
        if (column[i].text.indexOf(filter) > -1) {
            display = '';
        }

        column[i].el.parentNode.style.display = display;
        i--;
    }
}

/* shouldn't have to change this stuff */

$('input').each(function () {

    //Setup our columns
    var index = $(this).parent().prevAll().length + 1;

    this.column = index;
    columns[index] = [];

    // attach some data to each column
    $('td:nth-child(' + index + ')').each(function () {
        columns[index].push({
            text: this.innerHTML.toUpperCase(),
            el: this
        });
    });

}).on('keyup', function () {
    //bind our event with a 500 ms delay
    var that = this;
    clearTimeout(timeout);
    timeout = setTimeout(function () {
        doFilter(that);
    }, 500);
});​ 
```

演示：http: [//jsfiddle.net/jeff_mccoy/HDpr7/8/embedded/result/](http://jsfiddle.net/jeff_mccoy/HDpr7/8/embedded/result/)

表数据来自 datatables.net（只是 html）。希望有帮助。

# php - 为什么 mysql_insert_id() 返回 0？

> ID：11163754
> 
> 赞同：0
> 
> 时间：2012-06-22T20:36:57.503
> 
> 标签：php, mysql

当我运行这段代码

```
$sql_select = "INSERT INTO `database`.`table`(Columns) VALUES (Values)... ";
$mysqlid = mysql_insert_id($sql_select->db);
echo ($mysqlid); 
```

我收到错误消息

```
mysql_insert_id(): supplied argument is not a valid MySQL-Link 
```

我已经尝试过这种变化；

```
$mysqlid = mysql_insert_id();
echo ($mysqlid); 
```

但这会返回一个 0，根据文档，这意味着找不到 auto_increment 字段。我唯一能想到的是，我没有调用$sql_select 中的auto_increment 列，而是那里有一个auto_increment 列；这会影响 mysql_insert_id 的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:41:45.953

您需要先实际运行查询：

```
$sql= "INSERT INTO `database`.`table`(Columns) VALUES (Values)...";
$result = mysql_query($sql); 
```

然后在那之后：

```
$id = mysql_insert_id();
echo $id 
```

如果您还有问题，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T20:44:00.140

那是因为`$sql_select->db`不是**有效**的 MySQL 链接

你正在寻找的是这样的：

```
$sql_select = "INSERT INTO `database`.`table`(Columns) VALUES (Values)... 
$result = mysql_query($sql_select);
$mysqlid = mysql_insert_id($result->db); 
```

`$result`是有效的 MySQL 资源。

也不要忘记创建一个[mysql连接](http://us3.php.net/manual/en/function.mysql-connect.php)

注意：虽然我使用[原始 MySQL 驱动程序](http://us3.php.net/manual/en/book.mysql.php)的代码，但不鼓励使用它。相反，您想使用[MySQLi](http://us3.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://us3.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T20:42:14.300

您需要运行查询：

```
if($result = mysql_query($sql_select)){
    $mysqlid = mysql_insert_id();
    echo $mysqlid;
} 
```

干杯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-19T10:30:46.827

你的连接`mysqli`是一个对象......所以试试这个......

```
$mysqli = new mysqli("localhost", "user", "password", "dbname"); 
```

插入后试试这个..

```
echo $mysqli->insert_id; 
```

# c# - BING API，缺少指令或程序集

> ID：11163756
> 
> 赞同：0
> 
> 时间：2012-06-22T20:37:05.617
> 
> 标签：c#, asp.net, bing-api

我已经下载了新的 Bing API C# 文件并将其添加到我的 ASP.NET 网站，如果使用 ASP.NET MVC 2.0，它可以完美运行，但对于简单的 ASP.NET 网站，它会在此行显示错误：

```
var bingContainer = new Bing.BingSearchContainer(new Uri("https://api.datamarket.azure.com/Bing/Search/")); 
```

错误是：

> 错误 1
> ​​找不到类型或命名空间名称“Bing”（是否缺少 using 指令或程序集引用？）
> c:\Users\jawad\documents\visual studio 2010\WebSites\BingAPI\Default.aspx.cs

知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:46:13.433

1) 验证您有正确的 API 使用语句。

2) 验证 API 是否被正确引用。

3) 确认您的项目和 bing api 项目（或 .dll）都选择了相同的 .net 版本。

# actionscript-3 - ActionScript 和在 HTTPS 上加载 XML

> ID：11163757
> 
> 赞同：1
> 
> 时间：2012-06-22T20:37:06.480
> 
> 标签：actionscript-3, actionscript

如果通过 HTTP 提供 Flash 文件，我如何通过 HTTPS 加载 XML？

根据 Adob​​e，您只需添加 secure="false" 属性[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e08.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e08.html)

```
<allow-access-from domain="www.example.com" secure="false" /> 
```

但是当从 HTTP 提供 flash 时，它仍然不加载 XML。如果从 HTTPS 提供服务，则不是问题。

# cocos2d-iphone - 为什么我的 Kobold2D 项目中没有链接“CCTextureCache+CCBigImageExtensions”？

> ID：11163759
> 
> 赞同：0
> 
> 时间：2012-06-22T20:37:21.667
> 
> 标签：cocos2d-iphone, kobold2d

我在 iOS/Kobold2d 项目中使用 CCBigImage，因为精灵太大而无法立即加载。不幸的是，在执行应用程序时它会停止

```
ERROR: Uncaught exception -[CCTextureCache
addImageFromAnotherThreadWithName:target:selector:]: unrecognized
selector sent to instance 0xa17d010 
```

将 plist 文件加载到 CCBigImage 时。我把它钉在了这样的地步

```
CCBigImage* bg = [CCBigImage nodeWithTilesFile:@"bg1dot5.plist" tilesExtension: @"pvr.ccz" tilesZ: 0] 
```

调用 CCBigImage load()。该方法调用

```
[CCTextureCache sharedTextureCache] addImageFromAnotherThreadWithName: _imageName
                                                               target: self
                                                             selector: @selector(loadedTexture:) 
```

最终导致指定的异常。我将“CCTextureCache+CCBigImageExtensions.h”导入到加载 CCBigImage 的源文件中，所以我希望将给定的选择器添加到 CCTextureCache 但显然不是。

我正在使用 Kobold2d 1.1.0 和 XCode 4.3.3（所以所有最新版本）。为了包含该选择器，我还需要做些什么吗？

我也打电话

```
[[CCTextureCache sharedTextureCache] addImageFromAnotherThreadWithName:@"" target:nil selector:nil]; 
```

直接，项目编译得很好，因为我包含了扩展头文件，但是当我加载 CCBigImage 时发生了同样的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:18:10.590

包含 Objective-C 类别的静态库必须与 iOS 应用程序强制链接（Mac 应用程序没有此问题），否则无法解析类别方法并出现您描述的错误。[更多信息在这里。](https://stackoverflow.com/questions/2567498/objective-c-categories-in-static-library)

不推荐使用 -all_load 标志，尤其是在 Kobold2D 中。这会盲目地将所有可用代码链接到应用程序，即使是您未在应用程序中使用的代码。它基本上使链接器变得盲目和愚蠢，并且应用程序的大小可能会增长几兆字节。

我会在以后的 Kobold2D 版本中添加 cocos2d 扩展的 force-link。现在修复是`FrameworksAndLibraries.xcconfig`在 Xcode 中的 BuildSettings 组的 Kobold2D-Libraries 项目中编辑文件。

找到强制加载框架/库的部分：

```
LINK_WITH_ADMOB = $(KKLIBROOT)/GoogleAdMobAdsSDK/libGoogleAdMobAds.a
FORCE_LOAD_COCOS2D = -force_load "$(BUILT_PRODUCTS_DIR)/libcocos2d-ios.a"
FORCE_LOAD_KOBOLD2D = -force_load "$(BUILT_PRODUCTS_DIR)/libkobold2d-ios.a"
FORCE_LOAD_KOBOLDSCRIPT = -force_load "$(BUILT_PRODUCTS_DIR)/libkoboldscript-ios.a"
FORCE_LOAD_KOBOLDSCRIPTWRAPPER = -force_load "$(BUILT_PRODUCTS_DIR)/libkoboldscriptwrapper-ios.a"
FORCE_LOAD_ISIMULATE = -force_load "$(KKLIBROOT)/iSimulateSDK/libisimulate-4.x-opengl.a"
FORCE_LOAD_COCOS3D = -force_load "$(BUILT_PRODUCTS_DIR)/libcocos3d-ios.a"

KKFW_IOS = $(KKFW_SysConfig) $(KKFW_AVFoundation) $(KKFW_CoreGraphics) $(KKFW_CoreLocation) $(KKFW_MediaPlayer) $(KKFW_OpenGLES) $(LINK_WITH_ADMOB) $(FORCE_LOAD_KOBOLD2D) $(FORCE_LOAD_KOBOLDSCRIPT) $(FORCE_LOAD_KOBOLDSCRIPTWRAPPER) $(FORCE_LOAD_COCOS2D) 
```

现在在 "KKFW_IOS = ..." 行之前添加另一个 FORCE_LOAD_... 条目以 -force_load cocos2d-extensions 库（这都在一行中，我只是添加了换行符以提高可读性）：

```
FORCE_LOAD_COCOS2D_EXTENSIONS = 
           -force_load "$(BUILT_PRODUCTS_DIR)/libcocos2d-extensions-ios.a" 
```

然后在“KKFW_IOS = ...”行的末尾附加这个新的 FORCE_LOAD_COCOS2D_EXTENSIONS 条目（为便于阅读而缩写）：

```
KKFW_IOS = $(KKFW_SysConfig) … $(FORCE_LOAD_COCOS2D_EXTENSIONS) 
```

这应该可以解决问题，您现在应该能够使用 CCBigImage 类别方法。

# .net - 链错误和验证证书

> ID：11163760
> 
> 赞同：0
> 
> 时间：2012-06-22T20:37:32.077
> 
> 标签：.net, web-services, certificate, keychain, pkcs#7

我遇到了一个让我发疯的[PKCS #7问题。](http://en.wikipedia.org/wiki/PKCS)事情是这样的：

1.  我有一个[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET) Web 服务，它向另一个第三方服务器发出请求并接收一个 PKCS #7 签名令牌作为响应（这个令牌来自哪里实际上并不重要）。然后，我的 Web 服务会检查令牌的签名（和有效性）并将随附的数据返回给调用该方法的用户。

2.  Web 服务配置为在专用应用程序池中运行，该应用程序池在 Windows [AD](http://en.wikipedia.org/wiki/Active_Directory)用户帐户[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services) 6 下运行。

3.  为了执行验证，我这样做（签名有令牌）：

    ```
    public static byte[] VerifyAndExtractEnvelopedData(byte[] signature)
    {
        if (signature == null)
            throw new ArgumentNullException("signature");

        // Decode the signature
        SignedCms cms = new SignedCms();
        cms.Decode(signature);
        cms.CheckSignature(false);

        if (cms.Detached)
            throw new InvalidOperationException("Cannot extract enveloped content from a detached signature.");

        return cms.ContentInfo.Content;
    } 
    ```

4.  我部署了 Web 服务（IIS 6）。当我尝试运行上述 web 方法时，在签名验证时，我收到错误：

    > 无法将证书链构建到受信任的根颁发机构

为了简化事情，我用完全相同的代码编写了一个小的 Windows 窗体应用程序。我使用应用程序池中的相同用户帐户以交互方式登录到托管 Web 服务的同一台服务器。在那里运行EXE文件，它工作正常，即能够完美地验证签名。IMO，这排除了任何问题，例如缺少 [证书颁发机构](http://en.wikipedia.org/wiki/Certificate_authority)(CA) 证书等（事实上，我有签名者的 .CER 文件，我在 Windows 中打开它，它告诉我链没问题）。

显然，唯一的区别是，在第一种情况下，我的进程是 Web 服务，而在第二种情况下，我的进程是桌面 EXE 文件。还有什么可能阻止我在第一种情况下执行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:47:49.733

我认为您可能会在依赖方上访问不同的信任存储，请参阅*[Certificate stores](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/sag_cmuncertstor.mspx?mfr=true)*。

此外，请使用 PKIF、PITT、Portecle 或类似工具检查相关证书的有效性、正确的 OID、链接等。

# javascript - AJAX 不处理 302 重定向

> ID：11163767
> 
> 赞同：4
> 
> 时间：2012-06-22T20:37:54.507
> 
> 标签：javascript, ajax, http, redirect, oauth

我在尝试查询的外部服务器上有一个数据库。为此，我将在本地服务器 (Tomcat) 上创建一个 AJAX 调用（只是 XMLHttpRequest 对象 - 我没有使用任何 JavaScript 库）到附加了查询的页面。将完全相同的 URL 粘贴到 Firefox 中会导致它尝试下载 XML 文档。我的目标是使用 AJAX 来获取 XML 文档。

我遇到的问题是，当我使用 AJAX 进行调用时，Firebug 显示 GET 响应返回 302“临时移动”，旁边有一个红色 X。GET 响应的标头有一个带有 OAuth 授权的 Location 参数，当我复制并粘贴 location 参数时，它会将我带到正确的页面（告诉我下载 XML 对象）。

**编辑：** 我尝试使用 jQuery`$.get("URL", function(data){alert(data)});`并发生了同样的事情 - 没有警报，但在 Firebug 中有一个红色的 GET 请求和 302。

基于这些信息，我认为我正在调用的数据库首先尝试将我重定向到一些 OAuth 事物，然后返回一个授权 URL，用于访问数据库。这就是我应该用它来调用数据库，取回 XML 对象，然后做我的事情。AJAX 似乎无法处理重定向，而是崩溃了。

但是，我不确定这是否正确，因为我尝试使用以下代码：

```
 else if (xmlhttp.readyState == 4 && xmlhttp.status == 302){
  alert("Hello 302!");
}
else {
  document.getElementById("test").innerHTML = "On state: " + xmlhttp.readyState + "<br />HTTP Status: " + xmlhttp.status;
} 
```

并且它没有给我警报-而是显示它处于状态 4 和状态 0。我不明白为什么它会返回状态 0。（编辑：修复了答案 1 中提到的错字，没有任何改变）

所以我的问题是：

*   这里到底发生了什么？
*   什么是 0 状态，为什么 Firebug 在控制台中的 302 旁边给我一个 X，为什么没有重定向？
*   我怎样才能解决这个问题？
*   一旦我修复了它，我是否能够获取那个 XML 文件，或者我还需要做些什么吗？

**编辑更新：** 这是一个跨站点脚本问题。我在外部服务器上运行了完全相同的脚本，并且能够检索和解析包含查询结果的 XML 文档。唯一的障碍是弄清楚如何从外部服务器执行此操作。我可以访问外部服务器的配置，并将研究如何操作它以允许通过来自其他站点的数据库查询进行访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:20:03.747

由于它是一个 ajax 请求，因此您不能从另一个域中提取数据：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

您在这里真正可以做的就是从您自己的服务器（同一个域）请求数据，并让它为您从外部数据库中提取数据。

编辑：此响应已超过 3 年，现在使用现代浏览器（不是 IE < 10），您可以使用跨源资源共享 - [https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:04:29.300

你有一个语法错误`readystate`需要`readyState`。它的写法，永远不会是 4。

另一条建议是只检查`readyState`4 的 a 并在该语句中测试`status`302。这样您就可以排除是否是 302 导致了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:02:15.817

尝试**在服务器端进行重定向**

来自 FireBug 的快照

![看到这个快照](../Images/0f84d0f442b5611c58c3b7b94cb3e29e.png)

在此快照中，Ajax 请求发送到服务器端（有重定向）

# web-services - Axis2 多连接身份验证问题

> ID：11163768
> 
> 赞同：1
> 
> 时间：2012-06-22T20:38:12.670
> 
> 标签：web-services, tomcat, servlets, axis2

我有两个 servlet 可以访问同一主机上的两个相应的 Axis2 Web 服务。其中一个 servlet 是只读的，而另一个则写入数据库。

每个 Axis2 Web 服务都使用 BASIC 身份验证。只读 Web 服务使用系统帐户，而写入 Web 服务使用用户的凭据（作为 Web 表单的一部分提交）。

我遇到的问题是名为*second*的 servlet总是无法对其 Web 服务进行身份验证。例如，我可以通过它的 servlet 查询只读服务，但当我尝试使用写入服务时，却得到“401：需要授权”。如果我先调用写服务，当我尝试使用只读服务时会遇到同样的错误。

以下是我在 servlet 中设置连接凭据的方法：

```
Stub service = new Stub(serviceUrl);
HttpTransportProperties.Authenticator auth = new HttpTransportProperties.Authenticator();
auth.setUsername(username);
auth.setPassword(password);
auth.setPreemptiveAuthentication(true);

service._getServiceClient().getOptions().setProperty(HTTPConstants.AUTHENTICATE, auth); 
```

访问只读服务的 servlet 在其构造函数中包含此代码。访问写入服务的 servlet 在其 doGet/doPost 方法中有此代码。

似乎第一个调用的服务的凭据被缓存在某个地方，但我找不到它可能在哪里。[我在这里](http://axis.apache.org/axis2/java/core/docs/http-transport.html#setting_cached_httpclient_object)看到了一个可能的解决方案，但我找不到`WSClientConstants.CACHED_HTTP_STATE`定义的位置。[这个 JIRA 问题中的评论](https://issues.apache.org/jira/browse/AXIS2-4288)似乎暗示它是其中的一部分，`org.apache.axis2.transport.http.HTTPConstants`但它不存在。

规格：

*   轴版本：1.5.1
*   Tomcat 版本：6.0.26
*   Java版本：1.6.0_23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:04:19.587

事实证明，与两个不同服务的连接使用相同的 JSESSIONID。因此，与第二个 Web 服务的连接试图使用为第一个 Web 服务进行身份验证的会话，从而导致错误。

我的解决方案是`HttpClient`为每个服务定义一个，由以下完成

```
MultiThreadedHttpConnectionManager manager = new MuliThreadedHttpConnectionManager();
HttpClient client = new HttpClient(manager);

ConfigurationContext context = ConfigurationContextFactory.createDefaultConfigurationContext();
context.setProperty(HTTPConstants.CACHED_HTTP_CLIENT, client);
context.setProperty(HTTPConstants.REUSE_HTTP_CLIENT, true);

Stub service = new Stub(context, serviceUrl); 
```

这允许两个 servlet 为其相应的服务拥有一个单独的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T07:56:08.080

重要的一点是创建一个专用的 ConfigurationContext。

在没有多线程连接工厂的情况下创建存根时，我使用默认配置上下文以更简单的方式解决了问题

stub = new MyStub(ConfigurationContextFactory.createDefaultConfigurationContext(), myServicesUrl);

# c# - 只需要“最近的”任务 - 取消/忽略的最佳实践？

> ID：11163769
> 
> 赞同：5
> 
> 时间：2012-06-22T20:38:20.897
> 
> 标签：c#, multithreading, c#-4.0, task

我有一个看起来像这样的任务：

```
var task = Task.Factory.StartNew <object>(LongMethod);
task.ContinueWith(TaskCallback, TaskScheduler.FromCurrentSynchronizationContext()); 
```

LongMethod 调用一个长时间运行的服务，在此期间我不能（或者至少，我认为我不能）不断地轮询取消令牌以查看它是否已被取消。但是，我对“取消”或忽略回调方法感兴趣。

*当 TaskCallback 被调用时*，我只对来自最近任务的“结果”感兴趣（让我们假设 LongMethod 调用的服务保留了顺序，并假设用户可以多次单击按钮，但只有最新的一个是相关的）。

我通过以下方式修改了我的代码：创建任务后，我将其添加到堆栈的顶部。在TaskCallback 中，我检查已传递给回调的任务是否是最新的（即堆栈顶部的TryPeek）。如果不是，我只是忽略结果。

```
private ConcurrentStack<Task> _stack = new ConcurrentStack<Task>();

private void OnClick(object sender, ItemClickEventArgs e)
{
    var task = Task.Factory.StartNew < object >( LongMethod);
    task.ContinueWith(TaskCallback, TaskScheduler.FromCurrentSynchronizationContext());
    _stack.Push(task);
 }

private void TaskCallback(Task<object> task)
{
    Task topOfStack;
    if(_stack.TryPeek(out topOfStack)) //not the most recent
    {
        if (task != topOfStack) return;
    }
    //else update UI
} 
```

我很确定这不是“最佳实践”解决方案。但究竟是什么？传递和维护取消令牌似乎也不是那么优雅。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:31:38.950

我个人认为以下方法是最优雅的：

```
// Cancellation token for the latest task.
private CancellationTokenSource cancellationTokenSource;

private void OnClick(object sender, ItemClickEventArgs e)
{
    // If a cancellation token already exists (for a previous task),
    // cancel it.
    if (this.cancellationTokenSource != null)
        this.cancellationTokenSource.Cancel();

    // Create a new cancellation token for the new task.
    this.cancellationTokenSource = new CancellationTokenSource();
    CancellationToken cancellationToken = this.cancellationTokenSource.Token;

    // Start the new task.
    var task = Task.Factory.StartNew<object>(LongMethod, cancellationToken);

    // Set the task continuation to execute on UI thread,
    // but only if the associated cancellation token
    // has not been cancelled.
    task.ContinueWith(TaskCallback, 
        cancellationToken, 
        TaskContinuationOptions.NotOnCanceled, 
        TaskScheduler.FromCurrentSynchronizationContext());
}

private void TaskCallback(Task<object> task)
{
    // Just update UI
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:44:02.943

我了解您无法取消长时间运行的任务，但希望在用户取消时立即从用户的角度中止该过程。

与长时间运行的任务并行启动取消任务。继续`Task.WhenAny(longRunningTask, cancelTask)`检查，完成的任务是长时间运行的任务还是取消任务。然后您可以决定做什么（显示结果或更新 UI）。

当您取消“取消任务”时，延续将立即触发。

# jquery - Jquery隐藏/显示div，但也要保持切换链接“隐藏”

> ID：11163770
> 
> 赞同：2
> 
> 时间：2012-06-22T20:38:21.637
> 
> 标签：jquery, html, css, show-hide

我刚刚在 stackoverflow 上发布了一个[关于](https://stackoverflow.com/questions/11162387/issue-with-hide-show-jquery-on-fixed-positioned-div)我遇到的隐藏/显示问题的问题，但问题已经解决，尽管这是我遇到另一个问题的后续行动。

好的，所以我有一个粘性页脚导航，并且导航上方有一个链接（也是“粘性”），上面写着“切换菜单”......当我点击隐藏菜单时，我刚刚的链接单击也隐藏。所以基本上没有办法让菜单再次可见，因为切换按钮也消失了！

Javascript：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" 
type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

    $("#stickyfooter").show();
    $(".show_hide").show();

$('.show_hide').click(function(){
$("#stickyfooter").slideToggle("slow");
});

});

</script> 
```

HTML：

```
<div id="stickyfooter">
<div id="stick_footer_title"><a class="show_hide" href="#">Toggle Menu &#x25BC;
</a></div>

<ul id="footer_menu"> 
<li class="imgmenu"><a href="#"></a></li>

<li><a href="#intro">Intro</a></li>
<li><a href="#photos">Photos</a></li>

</ul>
</div> 
```

现在我知道`stick_footer_title`隐藏在 div 中（因此它为什么会消失），但我不知道如何制作它，这样当我单击“切换菜单”时，链接会降低，菜单即将消失但仍然显示和可以再次单击以显示提升/显示导航。

我试过摆弄 Jquery，但我不擅长 jquery。我很确定我需要在 Jquery 中做一些事情，比如 .show(); 参数，但我一直在猜测尝试做对。

有什么解决办法吗？

通用 CSS：

```
#sticky_footer_title { position:absolute; top: -35px; left: 20px; background-
color:#FF0000; font-family:Arial, Helvetica, sans-serif; font-size: 18px; color:#FFF; 
text-shadow:none;line-height: 34px; padding: 0px 20px 0px 20px }

#stickyfooter {
position: fixed;
bottom: 0px;
margin:0 auto;
width: 960px;
left:52%;
margin-left:-530px;
height: 40px;
background:#e9e9e9;
border-top: 1px solid #e9e9e9;
padding:0px 10px 0px 10px;
font-family:Arial, Helvetica, sans-serif;
z-index:1200;

/* CSS3 Stylings - Creates the double top border */
-moz-box-shadow: 0px -1px 0px #e9e9e9;
-webkit-box-shadow:  0px -1px 0px #e9e9e9;
box-shadow:  0px -1px 0px #e9e9e9;

/* CSS3 Rounded Corners */
-moz-border-radius: 10px 10px 0px 0px;
-webkit-border-radius: 10px 10px 0px 0px;
border-radius: 10px 10px 0px 0px;

/* CSS3 Stylings - Creates the gradient background */
background: -moz-linear-gradient(top, #FFF, #e9e9e9);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e9e9e9), to(#FFF));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:44:18.880

您需要将粘性页脚切换出粘性页脚 div。以下代码应该适合您：

**HTML**：

```
<div class="stickyfooter">
    <div id="sticky_footer_title"><a class="show_hide" href="#">Toggle Menu &#x25BC;</a></div>
    <div id="stickyfooter">
        <ul id="footer_menu"> 
            <li class="imgmenu"><a href="#"></a></li>
            <li><a href="#intro">Intro</a></li>
            <li><a href="#photos">Photos</a></li>
        </ul>
    </div>
</div> 
```

**Javascript**：

```
var $showhide = $(".show_hide");
var $stickyfooter = $("#stickyfooter");
var $stickyfootertitle = $("#sticky_footer_title ");

$stickyfooter.show();
$showhide.show();

$showhide.click(function(){
    var showMenu = $("#stickyfooter").css("display") == "block";

    $stickyfooter.slideToggle("slow");

    if(showMenu )
    {
        $stickyfootertitle.animate({
            bottom:'0px'
        }, "slow");
    }
    else
    {
       $stickyfootertitle.animate({
            bottom:'40px'
        }, "slow");
    }
}); 
```

**​CSS**：

```
#sticky_footer_title { 
    position:absolute; 
    bottom: 40px; 
    left: 50px; 
    background-color:#FF0000; 
    font-family:Arial, Helvetica, sans-serif; 
    font-size: 18px; 
    color:#FFF; 
    text-shadow:none;
    line-height: 34px; 
    padding: 0px 20px 0px 20px; 
}

.stickyfooter {
    position: fixed;
    bottom: 0px;
    margin:0 auto;
    width: 400px;
}

#stickyfooter {
    height: 40px;
    background:#e9e9e9;
    border-top: 1px solid #e9e9e9;
    padding:0px 10px 0px 10px;
    font-family:Arial, Helvetica, sans-serif;
    z-index:1200;

    /* CSS3 Stylings - Creates the double top border */
    -moz-box-shadow: 0px -1px 0px #e9e9e9;
    -webkit-box-shadow:  0px -1px 0px #e9e9e9;
    box-shadow:  0px -1px 0px #e9e9e9;

    /* CSS3 Rounded Corners */
    -moz-border-radius: 10px 10px 0px 0px;
    -webkit-border-radius: 10px 10px 0px 0px;
    border-radius: 10px 10px 0px 0px;

    /* CSS3 Stylings - Creates the gradient background */
    background: -moz-linear-gradient(top, #FFF, #e9e9e9);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e9e9e9), to(#FFF));
}

/* General typography stylings, paragraphs and H2 tags */

#stickyfooter h2 {
    font-size:24px;
    line-height:24px;
    color:#FF6600;
    letter-spacing:-1px;
    font-weight:400;
    padding:0px 10px 0px 10px;
    margin:12px 0;
}
#stickyfooter p {

    color:#cccccc;
    font-size:18px;
    padding:0 10px 0 10px;
    line-height:18px;
    float:left;
    margin:10px 0;
}
#stickyfooter img {
    border:none;
}
#stickyfooter a {
    color:#FF6600;
    text-decoration:none;
}
#stickyfooter li ul {
    list-style:none;
    padding:0;
    margin:0 0 12px 0;
}

#stickyfooter .strong { /* Forcing a bold text */
    font-weight:bold;
}
#stickyfooter .italic { /* Forcing an italic text */
    font-style:italic;
}
.clear { /* Use this class between rows of content when you use columns */
    clear: both;
    display: block;
    overflow: hidden;
    visibility: hidden;
    width: 0;
    height: 0;
}

/* Images containers */

#stickyfooter .imgshadow { /* Better style on dark background */
    background:#FFFFFE;
    padding:4px; /* Makes the light borders thanks to the background color */
    border:1px solid #333333;
    margin-top:5px;
    /* CSS3 shadow */
    -moz-box-shadow:0px 0px 5px #000000;
    -webkit-box-shadow:0px 0px 5px #000000;
    box-shadow:0px 0px 5px #000000;
}
#stickyfooter .img_left { /* Image sticks to the left */
    width:auto;
    float:left;
    margin:5px 15px 5px 0px;
}
#stickyfooter .img_right { /* Image sticks to the right */
    width:auto;
    float:right;
    margin:5px 0px 5px 15px;
}

/* Black background text box */

#stickyfooter .black_box {
    background-color:#111111;
    padding:4px 6px 4px 6px;
    margin-bottom:6px;

    /* CSS 3 Rounded Corners */
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
    /* CSS 3 Inset Shadow */
    -webkit-box-shadow:inset 0 0 5px #000000;
    -moz-box-shadow:inset 0 0 5px #000000;
    box-shadow:inset 0 0 5px #000000;
}

/* Social Icons */

#stickyfooter #social {
    float:right; /* Positionning of the social icons container */
    width:auto;
    margin:5px 15px 0px;
    padding:0px;
    overflow:hidden;
}
#stickyfooter #social li {
    margin-right:12px; /* 12px is the space between each one of them */
    _margin-right:0px; /* IE6 only */
    float:left;
    width:24px;
    padding:0px;
    height:32px;
    list-style:none;
}
#stickyfooter #social li:hover {
    margin-top:-1px; /* Icons move 1px up on hover, you can remove this if you don't like */
}

/* Tooltips for social icons */

a.tooltip:hover {
    text-decoration:none;
}
/* The "span" defines the text appearing on mouse hover, these are basic stylings */
a.tooltip span {
    display:none;
    padding:5px;
    bottom:44px;
    position:relative;
    width:55px;
    text-align:center;
    /* CSS3 Rounded Corners */
    -moz-border-radius: 3px; 
    -webkit-border-radius: 3px;
    border-radius: 3px;
}
a.tooltip:hover span {
    display:block;
    position:absolute;
    border:1px solid #333333;
    background:#181818;
    color:#dddddd;
    font-size:12px;
    margin-left:-20px;
}

/*  _______________________________________

    02 FOOTER - DROP DOWN MENU (DROP UP)
    _______________________________________  */

#footer_menu {
    margin: 0;
    padding: 0;
    width:auto;
}
#footer_menu li {
    list-style: none;
    float: left;
    font-size:11px;
    padding: 12px 10px 14px 10px;
    border-right:1px solid #d9d9d9;
    border-left:1px solid #d9d9d9;
    background:#FFF;

    /* CSS3 Stylings - Creates the gradient background */
    background: -moz-linear-gradient(top, #FFF, #e9e9e9);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#FFF), to(#d9d9d9));
}

#footer_menu li:last-child { background:none; border:none; }

#footer_menu li:hover {
    background:#FFF;
    /* CSS3 Stylings - Creates the gradient background */
    background: -moz-linear-gradient(top, #f2f2f2, #FFF);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#f2f2f2), to(#FFF));
}
#footer_menu li:hover:last-child { background:none; border:none; }

#footer_menu li a {
   display: block;
   color: #434343;
   text-decoration: none;
}
#footer_menu li a:hover {
   color: #000;
}
#footer_menu .imgmenu { /* Used for the home item, text is here hidden and replaced by an image */
    padding:5px 8px 0px 8px;
    border:none;
    background:none;
}
#footer_menu .imgmenu a { /* Used for the home item, text is here hidden and replaced by an image */
    background:url("img/home.png") top left no-repeat;
    width:36px;
    height:30px;
}
#footer_menu li.imgmenu:hover {
    background:none;
}
#footer_menu li.imgmenu a:hover {
    background:url("img/home2.png") top left no-repeat;
}

/* Drop Up */

/* You may have heard about drop down menus, the principle is here the same except that
   the content is going up instead of down */

#footer_menu li ul.dropup {
   display: none; 
   width: 15em; /* Width for Opera */
}
#footer_menu li:hover ul.dropup  {
    display: block;
    position: absolute;
    margin: 0 0 0 -16px;
    bottom:40px; /* Distance to the bottom of the browser */
    background-color:#222222;
    border: 1px solid #111111;
    border-bottom:none;

    /* CSS3 Stylings - Rounded Corners */
    -moz-border-radius: 7px 7px 0px 0px;
    -webkit-border-radius: 7px 7px 0px 0px;
    border-radius: 7px 7px 0px 0px;
}
#footer_menu li:hover li { /* Drop up default lists */
    float: none;
    background:none;
    border:none;
    border-bottom:1px solid #161616;
    padding:8px 10px 8px 10px;
}
#footer_menu li:hover a {
    color: #aaaaaa;
}
#footer_menu li:hover a:hover {
    color: #000;
}
#footer_menu li:hover p {
    margin:6px 0;
}

/* Right Panel */

#footer_menu .right { /* Use the right class to push the content to the right */
    float:right;
    right:10px;
}

/*  _______________________________________

    03 FOOTER - COLUMNS CONTENT
    _______________________________________  */

/* Following the principles of the 960 grid, we define here 3 containers
   which can contain from 1 to 3 columns */

#stickyfooter .dropdown_1column, 
#stickyfooter .dropdown_2columns, 
#stickyfooter .dropdown_3columns {
    margin:4px auto;
    position:absolute;
    padding:10px 5px 10px 5px;
    display:none;
    text-align:left;
}

/* Drop Downs Sizes */

#stickyfooter .dropdown_1column {width: 140px;}
#stickyfooter .dropdown_2columns {width: 280px;}
#stickyfooter .dropdown_3columns {width: 420px;}

/* Showing Drop Down on Mouse Hover - Left aligned */

#footer_menu li:hover .dropdown_1column, 
#footer_menu li:hover .dropdown_2columns, 
#footer_menu li:hover .dropdown_3columns {
    display: block;
    position: absolute;
    margin: 0 0 0 -16px;
    bottom:40px;
    background-color:#222222;
    border: 1px solid #111111;

    /* CSS3 Stylings - Rounded Corners */
    -moz-border-radius: 7px 7px 0px 0px;
    -webkit-border-radius: 7px 7px 0px 0px;
    border-radius: 7px 7px 0px 0px;
}

/* Columns sizes, they have to be placed within a dropdown_columns DIV */

#stickyfooter .col_1,
#stickyfooter .col_2,
#stickyfooter .col_3 {
    display:inline;
    float: left;
    position: relative;
    margin-left: 5px;
    margin-right: 5px;
}
#stickyfooter .col_1 {width:130px;}
#stickyfooter .col_2 {width:270px;}
#stickyfooter .col_3 {width:410px;}

/* Lists stylings */

#footer_menu li ul.simple { /* Reset stylings for other lists inside columns */
    margin-left:5px;
}
#footer_menu li ul.simple li {
    border:none;
    padding:0px;
    width:120px;
    line-height:24px;
    margin-left:5px;
}

.show_hide {
    display:none;
} 
```

[现场演示](http://jsfiddle.net/8y7Sr/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:40:24.630

从隐藏的 div 中取出切换链接？您还需要绝对使用它们`bottom`的 ' 来定位元素，以便它们看起来从页脚项目中滑出。

## JSFIDDLE：http: [//jsfiddle.net/ukEuP/8/](http://jsfiddle.net/ukEuP/8/)

## HTML

```
<div id="stickyfooter">
    <ul id="footer_menu"> 
        <li class="imgmenu"><a href="#"></a></li>
        <li><a href="#intro">Intro</a></li>
        <li><a href="#photos">Photos</a></li>
    </ul>
</div>

<div id="stick_footer_title">
    <a class="show_hide" href="#">Toggle Menu &#x25BC;</a>
</div> 
```

​</p>

## JS

```
$('.show_hide').click(function(){
    $('#stickyfooter').slideToggle();
});​ 
```

## CSS

```
#stick_footer_title a{color:#fff}
#stick_footer_title{
    position:absolute;
    bottom:0px;
    height:30px;
    line-height:30px;
    background:#000;
    color:#000;
    width:100%;
}
#stickyfooter{
    position:absolute;
    bottom:30px;
}
.show_hide{margin:5px;} 
```

# jquery - 当我点击进入时如何触发事件？

> ID：11163773
> 
> 赞同：2
> 
> 时间：2012-06-22T20:38:27.600
> 
> 标签：jquery

```
 $('#enter').click(function (){
        var query = $('#search').val();
        $('body').removeHighlight().highlight(query);
    }); 
```

以上是我用于页面即时搜索的代码。如何添加一个事件侦听器，以便当我按 Enter 时，它会在我按 Enter 时自动触发 .click() 函数，这样用户就不必手动单击 #enter 元素。此外，如果我按 Enter 键，它不会影响搜索字段的值。如果代码在 jQuery 中会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:41:11.643

您可以使用 jquery 上的 keypress 事件来触发该事件。

```
$('#enter').keypress(function (e){
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) {
       var query = $('#search').val();
       $('body').removeHighlight().highlight(query);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:41:16.453

我假设您的意思是`Enter`从`search`文本框中按。试试下面，让我知道这是否是你想要的，

```
$('#search').keydown(function (e) {       
   if (e.which == 13) {
      e.preventDefault();
      $('#enter').click();
   }
}); 
```

尝试更改您的查询功能，如下所示，

```
$('#enter').click(function (){
    var query = $('#search').val();
    if ($.trim(query) != '')  {
      $('body').removeHighlight().highlight(query);  
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:43:28.137

就像我在评论中说的，你可以像这样使用[按键](http://api.jquery.com/keypress/)

```
$('#search').keypress(function(event) {
    if ( event.which == 13 ) {
        $('#enter').trigger('click');
    }
}) 
```

# c# - 将 XML 文件中的数据拉入 TreeView 项 (C#)

> ID：11163788
> 
> 赞同：0
> 
> 时间：2012-06-22T20:39:27.733
> 
> 标签：c#, windows, treeview, xmlreader

我有点问题。我正在尝试解析 XML 文件并将其内容放入 TreeView。我的一切工作正常，但我有一件事有问题。

以下是 XML 文件的示例：

```
<AnswerIt>

    <category name="Category 1">
        <question is="Question 1">
            <answer couldbe="Answer 1" />
            <answer couldbe="Answer 2" />
        </question>
    </category>

    <category name="Category 2">
        <question is="Question 1">
            <answer couldbe="Answer 1" />
        </question>
        <question is="Question 2">
            <answer couldbe="Answer 1" />
        </question>
    </category>

</AnswerIt> 
```

我用来赞美 XML 文件的代码可以很好地提取所有类别。当它到达问题部分时，它会提出第一个问题，但之后没有问题。所有答案都可以很好地提取（只要它们属于第一个问题）。这是我的 C# 代码：

```
public void LoadQuestionDatabase()
    {
        XmlTextReader reader = new XmlTextReader("http://localhost/AnswerIt.xml");

        TreeNode node = new TreeNode();
        TreeNode subnode = new TreeNode();

        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element && reader.Name == "category")
            {
                node = lstQuestions.Nodes.Add(reader.GetAttribute(0));
                categories.Add(reader.GetAttribute(0));

                while (reader.NodeType != XmlNodeType.EndElement)
                {
                    reader.Read();
                    if (reader.Name == "question")
                    {
                       subnode = node.Nodes.Add(reader.GetAttribute(0));
                        questions.Add(reader.GetAttribute(0));

                        while (reader.NodeType != XmlNodeType.EndElement)
                        {
                            reader.Read();
                            if (reader.Name == "answer")
                            {
                                // add each answer
                                subnode.Nodes.Add(reader.GetAttribute(0).Replace("\t", ""));
                            }
                        }
                    }
                }

            }

        }
        reader.Close();
    } 
```

我不太擅长 C#，我猜测它不会循环遍历所有问题并添加它们。任何想法我做错了什么？我可以在任何地方阅读以帮助我吗？我阅读的每个示例都将根节点 (AnswerIt) 放在树视图中，我不希望这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:46:51.983

而不是使用 XmlTextReader 尝试使用

`XDocument doc = XDocument.Load("http://localhost/AnswerIt.xml");`

那么您不必手动构建所有元素。

XDocument 在`System.Xml.Linq`程序集和命名空间中提供。一旦它被加载到 XDocument 中，您就可以使用它的任何内置方法来操作数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:55:47.400

```
var xDocument = XDocument.Load("http://localhost/AnswerIt.xml");

foreach (var element in xDocument.Descendants("category"))
{
    var node = lstQuestions.Nodes.Add(element.Attribute("name").Value);
    foreach (var subElement in element.Elements("question"))
    {
        var subnode = node.Nodes.Add(subElement.Attribute("is").Value);
        foreach (var answer in subElement.Elements("answer"))
            subnode.Nodes.Add(answer.Attribute("couldbe")
                   .Value.Replace("\t", ""));
    }
} 
```

# java - 如何编辑/加载 Eclipse 插件

> ID：11163799
> 
> 赞同：1
> 
> 时间：2012-06-22T20:40:21.290
> 
> 标签：java, eclipse, debugging, eclipse-plugin

我正在尝试了解 eclipse 中的调试器，在这篇文章中：

[http://www.eclipse.org/articles/Article-Debugger/how-to.html](http://www.eclipse.org/articles/Article-Debugger/how-to.html)

他们在底部提供了一些可以安装和试用的示例插件（底部的 zip 文件）。

我对eclipse插件不是很熟悉，我不确定如何在eclipse中安装/查看这些jar文件的源代码。我尝试将它们导入 PDE，但没有奏效。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:51:22.070

1.  解压缩 ZIP 文件。
2.  使用以下命令将每个 JAR 文件解压到它自己的目录中：jar xf org.eclipse...jar

    解压后的文件之一是 coresrc.zip，其中包含核心插件的源代码，另一个文件是 uisrc.zip，其中包含 UI 插件的源代码。

3.  在某处解压这些 ZIP 文件

4.  将从 ZIP 文件创建的目录导入为插件项目。

这并不优雅，但会将源代码放入 Eclipse。

您很可能无法运行这些插件，因为它们是为 Eclipse 3.0 开发的，它已经有 100 年的历史了，从那时起几乎所有的界面都发生了变化。

# matlab - 直接访问例如 xlim 的返回值？

> ID：11163800
> 
> 赞同：3
> 
> 时间：2012-06-22T20:40:24.303
> 
> 标签：matlab, syntax

在 Matlab 中

```
xlim 
```

返回例如 [0,1]。现在我想直接访问 xlim 的最后一个值，因此不将 xlim 返回值存储在变量中。那可能吗？

```
xlim(2) 
```

显然被解释为函数调用，而不是获取索引 2 处的值。

任何解决方法，除了以下，它涉及一个额外的变量？

```
temp = xlim;
temp(2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:21:54.417

由于`xlim`总是返回一个有序对（只要`xdir`不设置为），您可以使用and函数`reverse`直接访问元素。`min``max`

用于`min(xlim)`访问第一个元素和`max(xlim)`用于第二个元素。

如果 `xdir`设置为`reverse`，`max(xlim)`将返回第一个元素和`min(xlim)`第二个元素。

# inet - inet PDFc 无法识别字符

> ID：11163804
> 
> 赞同：1
> 
> 时间：2012-06-22T20:40:45.873
> 
> 标签：inet

我正在使用 PDFc 使用 ConsoleResultHandle 比较两个文件。我的两个文件都相似，我复制粘贴了它们。

比较后这个工具 Pdfc 给出了调试 - 不支持 CMap 格式：6

我检查了差异文件夹（它显示差异的地方）和它生成的 png 文件，它给出了所有框 ..（不支持的字符），如上面的调试所说。

有没有其他人遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:30:58.383

如果解析 PDF 文件时出现问题，则可能会出现此问题。正如 gamma 在评论中提到的那样，最好的方法是通过 pdfc@inetsoftware.de 联系我们的支持团队并提供有问题的 PDF - 我们通常会在 24 小时内回复，看看我们是否可以解决问题。

# c - GetPixel优化winapi

> ID：11163815
> 
> 赞同：1
> 
> 时间：2012-06-22T20:41:20.143
> 
> 标签：c, winapi, screenshot, gdi, bmp

我想将我的“屏幕”保存在 bmp 中；但我认为我做错了，因为这段代码真的很慢：

```
HDC Win = GetDC(NULL);
for (j = 0; j < y; j++)
  for (i = 0; i < x; i++)
    img->data[j][i] = GetPixel(Win, i, j); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T21:10:01.463

`CreateDIBSection`使用指向原始位的指针创建位图，并`BitBlt`从屏幕进入创建的位图。这比逐像素查询更快，并且您可以使用常规指针访问内存中的所有数据。

有关代码片段，请参阅[在 Windows 中执行全屏抓取。](https://stackoverflow.com/questions/2831978/performing-full-screen-grab-in-windows)

# automapper-2 - AutoMapper：更新子属性而不是覆盖它

> ID：11163818
> 
> 赞同：2
> 
> 时间：2012-06-22T20:41:34.217
> 
> 标签：automapper-2

我有一个带有子属性的类：

```
Person {
    string Name;
    Address Address {
        string Street;
    }
} 
```

当我构造新的 Person 对象时，我希望自动映射器执行如下操作：

```
var person = new Person();
person.Name = sourcePerson.Name;
person.Address = new Address();
person.Address.Street = sourcePerson.Address.Street; 
```

但是如果我已经有一个 Person 对象，我只想**填充**它，并且如果我的 Person 对象已经设置了 Address ，我希望该 Address 对象也被**填充**，**而不是**替换。本质上：

```
var person = GetExistingPerson();
...
Mapper.Map(sourcePerson, person); // this will fill person object
// here is what it does now (internally):
person.Name = sourcePerson.Name;
person.Address = new Address();
person.Address.Street = sourcePerson.Address.Street; // <-- not what I want
// here is what I do want to happen:
person.Name = sourcePerson.Name;
person.Address.Street = sourcePerson.Address.Street; // i.e. not override Address, but fill it. 
```

理想情况下，我希望能够配置 AutoMapper 以自动解决这个问题，即如果 Address 不为 null - 然后创建并设置它，如果它不为 null - 然后只需更新它。

现在我使用 AfterMap 如下：

```
var map = Mapper.Create<SourcePerson, Person>();
map.ForSource(src=>src.Name,opt=>opt.MapFrom(dst=>dst.Name));
map.AfterMap((srcPerson, dstPerson) => {
    if (dstPerson.Address == null) dstPerson.Address = Mapper.Map<Address>(srcPerson.Address); // set
    else Mapper.Map(srcPerson.Address, dstPerson.Address); // fill
}); 
```

我这样做是因为`Address`object 是一个自我跟踪实体，并且它具有我无法覆盖的状态。

有没有办法重构我的代码以不使用 AfterMap？

# html - 需要正确对齐菜单按钮

> ID：11163821
> 
> 赞同：-1
> 
> 时间：2012-06-22T20:41:49.693
> 
> 标签：html, css, wordpress, text-alignment

我无法正确对齐菜单按钮。

如何将按钮向上移动到其上方的空白处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:48:05.993

`margin-top`对`span`持有它使用负值，

# javascript - 如何处理 jQuery 中锚的文本值更改为“”的情况？

> ID：11163831
> 
> 赞同：1
> 
> 时间：2012-06-22T20:42:19.230
> 
> 标签：javascript, jquery, jquery-ui

这是代码：[Jsfiddle](http://jsfiddle.net/EdtC2/)

1.  我有一个表单，`a`可以通过 dblclicking 链接来编辑文本值，或者在里面`div`单击`a`。
2.  Onblur，1.中的条件所显示的输入框中的值被赋值给文本值`a`。

**问题：**当您将输入留空并对其进行模糊处理时，它会将`a`' 的文本设置为`""`. 在这一点上`div`，它的周围崩溃并且用户无法访问。

我怎样才能防止这种崩溃发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:14:13.943

只要这样做，你的问题就会得到解决。

在模糊时，只需检查值长度为零，然后显示输入字段，否则显示超链接。

```
$('#url0, #url1').each(
    function(index, element){
        $(element).blur(function(){
            if ($(this).val().length == 0)
                $(this).show();
            else
                $(this).hide().prev().show().find('a').html(this.value);
        });
    }    
); 
```

参考这个**[LIVE DEMO](http://jsfiddle.net/SivaCharan/EdtC2/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:24:05.013

这位小伙伴呢？

[http://jsfiddle.net/jaspermogg/EdtC2/4/](http://jsfiddle.net/jaspermogg/EdtC2/4/)

```
$('#url0, #url1').each(
    function(index, element){
        $(element).blur(function(){
        this.value == "" ? $(this).hide().prev().show().find('a').html("[insert text here]") : $(this).hide().prev().show().find('a').html(this.value);
    })
    }    
); 
```

如果输入框为空，则将其设置`a`为“[在此处插入文本]”。还是您想要一种实际上不可见的情况？如果是这种情况，您可以随时更改文本颜色以匹配背景，例如？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:51:13.337

根本不是错误。你的`a`标签是空的，它崩溃了。

看这个[**演示**](http://jsfiddle.net/EdtC2/2/)看看。您需要在其上设置一些 css 以使其不会崩溃。例如，边框使其按预期工作。添加填充或边距也可以。使其显示 inline-block 也可以修复它，而无需任何额外的边框、填充或边距。

```
.a0 a {
    display: inline-block;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:51:57.083

试试[这个](http://jsfiddle.net/EdtC2/1/)。

我只是添加了一个边框、默认宽度和高度，以便即使在删除输入后 div 也是可见/可点击的。您可能不需要这样做。

# php - stream_get_contents 卡在持久（KeepAlive）连接上

> ID：11163835
> 
> 赞同：1
> 
> 时间：2012-06-22T20:42:39.620
> 
> 标签：php

stream_get_contents 似乎无法正确处理持久（KeepAlive）连接。它在返回之前等待连接超时。默认情况下，Apache 2.2 的 KeepAliveTimeout 为 5 秒。对此我能做些什么吗？（除了在服务器上禁用 KeepAlive 或使用 protocol_version 1.0）

```
$opts = array('http' =>
    array(
        'method' => 'GET',
        'protocol_version' => 1.1,
    )
);
$context = stream_context_create($opts);
$stream = fopen('http://google.com', 'r', false, $context);
$metadata = stream_get_meta_data($stream);
$data = stream_get_contents($stream);
fclose($stream); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:52:40.550

```
$opts = array('http' =>
    array(
        'method' => 'GET',
        'protocol_version' => 1.1,
        'header' => 'Connection: close'
    )
); 
```

`Connection: close`告诉服务器不要使用持久连接，并在发送响应后断开 TCP 连接。

这是[HTTP/1.1 标准的一部分](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10)，正如[PHP 手册](http://www.php.net/manual/en/context.http.php#context.http.protocol-version)所说：

> 如果 [protocol_version] 设置为 1.1，则您有责任遵守 1.1。

# css - IE 和 FF 中的幻灯片位置太低

> ID：11163836
> 
> 赞同：-1
> 
> 时间：2012-06-22T20:42:45.030
> 
> 标签：css, html, position

我有这个幻灯片，我想简单地向上移动，但我无法正确定位它以使其向上。现在有所有这些空白。有人可以帮我解决我哪里出错了吗？只需在 Firefox 或 IE 中查看即可查看空格。它当然适用于 Chrome，b/c 一切都适用于 chrome。

[http://modernd-i.com/](http://modernd-i.com/)

我尝试在 css 中使用位置，但在这些浏览器中它并没有让步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:50:53.327

IT 看起来您正在使用表格进行布局。包含图片库的`<td>`那个有一个垂直对齐设置，`vertical-align: baseline;`如果你在 html 中将其更改为`valign="top"`它将使其工作。在 Firefox 中检查它，而不是 IE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:54:21.010

在你的 styles.css 中，第 4 行你有：

```
...tfoot, thead, tr, th, td {
background: none repeat scroll 0 0 transparent;
border: 0 none;
margin: 0;
padding: 0;
vertical-align: baseline;   /* this is what is causing it */
} 
```

将最后一个更改为： `vertical-align: top`

基线作为全局声明并不是最好的主意，除非它是故意的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:45:34.673

这应该有效：

```
#yourslideshow {
    position: relative;
    top: (-X)px;
 } 
```

*-X 表示像素数。

由于您没有 jsfiddle，因此我无法确切告诉您多少。但是，如果您使用顶部，那就是您的幻灯片和页面顶部之间的像素数。（您也可以使用底部，而不是使用负值）。

前任。

```
#yourslideshow {
    position: relative;
    bottom: (X)px;
 } 
```

我知道您说您使用了职位，但我不确定您使用的是哪种职位，因为您没有指定。

然后

如果位置仍然不起作用，您可以尝试正边距顶部或负边距底部

```
#yourslideshow {
    position: relative;
    margin-bottom: (X)px;
 } 
```

或者

```
#yourslideshow {
    position: relative;
   margin-top: (-X)px;
 } 
```

# django - Django 读取上传的带有一些空字段的 CSV 文件

> ID：11163837
> 
> 赞同：2
> 
> 时间：2012-06-22T20:42:49.693
> 
> 标签：django, csv

我正在编写一个 Django 视图，它需要一个附加的 csv 文件并将其读入数据库：

**视图.py：**

```
def climate_upload(request):
    ...
    if form.is_valid(): # All validation rules pass
        file = request.FILES['attach']

        for line in file:
            line = line.split(';')                 
            report = Site1()
            ...
            # These fields values be empty, integer or float 
            report.mean_air_temp = float(line[4])
            report.min_air_temp = float(line[5])
            report.max_air_temp = float(line[6])
            report.sea_temp = float(line[7])
            report.mean_rel_hum = float(line[8])
            report.precipitation = float(line[9])
            report.save()
        file.close() 
```

我知道这是非常粗略的代码，但是如果我运行它并且其中一个字段为空（''），我会得到一个`ValueError could not convert string to float:`.

我可以为每个字段执行此操作：

```
 try:
                report.mean_air_temp = float(line[4])
            except(ValueError):
                report.mean_air_temp = None 
```

这给了我所需的结果，但看起来并不那么健壮/优雅。

我将不胜感激有关如何处理此代码块的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:58:45.150

将转换包装为函数调用中的浮点数。

```
def convert_value(val, conversion=float):
    try:
        return conversion(val)
    except ValueError:
        return None 
```

或者

```
report.something = float(line[x]) if line[x] is not None else None 
```

# json - youtube API，让多个用户上传视频

> ID：11163840
> 
> 赞同：2
> 
> 时间：2012-06-22T20:43:01.500
> 
> 标签：json, youtube-api

我尝试在 youtube API (jsonp) 中查找，如果我可以在 1 个查询中上传来自多个用户的视频。

对于 1 个用户，我可以使用此查询字符串：

```
http://gdata.youtube.com/feeds/users/myUsername/uploads?alt=json-in-script&callback=?&max-results=20' 
```

但我需要这样的东西：

```
http://gdata.youtube.com/feeds/users/myUsername+myUsername1+myUsername2/uploads?alt=json ... 
```

**我的用户名+我的用户名1+我的用户名2**

或者也许我可以使用搜索查询格式：

```
https://gdata.youtube.com/feeds/api/videos?alt=json&q= 
```

并使用类似的东西：

```
q=from:myUsername1+from:myUsername2 
```

或者，如果存在任何其他方式来获取此信息。

我很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:41:21.797

不能要求多个用户提供上传列表。相反，您可以尝试使用搜索 api 并将其限制为您想要的用户。

通过包含@username，您可以将搜索限制为用户名。试试这个链接来搜索[@youtube @googledevelopers](http://www.youtube.com/results?search_query=@youtube%20@googledevelopers&oq=@youtube%20@googledevelopers&gs_l=youtube.12...0.0.0.6241.0.0.0.0.0.0.0.0..0.0...0.0...1ac.)

您可以将此作为[YouTube 数据 API](https://developers.google.com/youtube/v3/docs/search)中查询参数的一部分进行尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:53:40.407

在单个 YouTube 数据 API 查询中不可能做到这一点。您只能使用单个频道/用户作为`author=USER`查询参数的值，或者在指定`feeds/api/users/USER`URL 时。

# php - PHP SQL 多重自动完成搜索

> ID：11163841
> 
> 赞同：2
> 
> 时间：2012-06-22T20:43:06.827
> 
> 标签：php, sql, search

目前我已经编写了一个代码，它只适用于关键字。此外，它不处理多个条目。例如，如果我在 DB 中有两次关键字“blue”；当我开始输入“蓝色”时，它在搜索输入框中显示“蓝色”两次。其余代码工作正常。我应该如何调整我的代码？此外，如果一列具有“蓝色”和“绿色”作为行；它显示了完整的东西：“蓝色和绿色”。我的PHP代码：

```
<?php
$keyword = mysql_real_escape_string($_POST['keywords']);
$sql = "SELECT * FROM job WHERE work='$keyword' or work LIKE 'ANOTHER_PARAMETER' LIMIT 5";
$result = mysql_query($sql);
$numrows = mysql_num_rows($result);
echo //details and run the loop 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:46:03.987

您可以尝试修改您的 SQL 数据库。您可以有一列“work_ids”，另一列用于“对应于这些 id 的工作”。

抱歉，我没有回答你的部分问题，但感谢@T-shirt Dude；我一下子就想起来了。如果我没看错你的问题，你想在一列中搜索多个关键字吗？如果是这样，您可以这样做：

`$sql = mysql_query("SELECT work_id, work FROM job WHERE work like '%$q%' OR work like 'ANOTHER_PARAMETER'
ORDER BY work_id LIMIT 10");`

您可以放置​​任意数量的“OR”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:47:35.373

考虑`work`到 是其中包含值“蓝色”和“绿色”的列，代码应该是：

```
"SELECT * FROM job WHERE work='$keyword' or work LIKE 'ANOTHER_PARAMETER' GROUP BY work LIMIT 5"; 
```

如果不是这样，我无法理解你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:48:47.520

我不确定我是否完全遵循——查看创建响应的代码可能会对我们有所帮助。

无论如何，从我理解你的问题的方式来看，听起来你可能需要一个小组。

# vim - 在vim中映射#

> ID：11163842
> 
> 赞同：1
> 
> 时间：2012-06-22T20:43:14.323
> 
> 标签：vim, keymapping

在我的 .vimrc 中，我已将 #-key 映射到一个宏，用于注释掉/输入代码行。

不幸的是，vim 中的 # 已经有一个功能——它向后搜索光标下的单词。

我现在想要的是一种将此功能映射到另一个键序列的方法（理想情况下，我希望使用 Control-* 作为 * 单独向前搜索）。

有谁知道如何实现这一目标？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:09:33.023

不幸的是，不能使用`Ctrl`+ ；`*`我会提议`\``*`；打字时间更长，但向后搜索可能并不常见。

```
:nnoremap <Leader>* # 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:14:14.550

就像 Ingo Karkat 所说，在 vim 中映射 Ctrl+某些键是不可能的。`Alt+8`但是，您可以改为映射：

```
noremap <A-8> # 
```

我建议`Alt+8`不要这样做，`Alt+*`因为如果你想以不自然的方式弯曲你的手来按下多个修饰键来执行命令，你可能会使用 Emacs 而不是 Vim。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:15:26.790

我使用`\`+`c`进行评论，使用`\`+`d`删除评论。映射如下：

```
:map \c <ESC>:s,^\(\s*\)[^/ \t]\@=,\1// <ESC>,e<CR>j$a
:map \d <ESC>:s,^\(\s*\)// \s\@!,\1<ESC>,e<CR>j$a 
```

以上映射用于命令模式。取自关于 SO 的一个答案，我目前无法找到。

# c# - 组合框 = 文本框 + 列表

> ID：11163849
> 
> 赞同：2
> 
> 时间：2012-06-22T20:43:57.297
> 
> 标签：c#

我想在组合框中自由输入。当我停止输入时，我有一个延迟的任务，它用一些输入相关的结果填充组合框项目。问题是我的输入被列表中的第一项覆盖。有没有办法保留我的输入？

我的示例代码是这样的：

```
public void PopulateCombo(JObject result)
    {
        Debug.WriteLine("Thread id: " + Thread.CurrentThread.ManagedThreadId);

        cbSearch.Items.Clear();
        if (result.Value<bool>("success") == true)
        {
            JArray arr = result.Value<JArray>("data");
            for (int i = 0; i < arr.Count; i++)
            {
                JToken item = arr[i];
                cbSearch.Items.Add(new ComboBoxItem( item.Value<string>("name"), item.Value<string>("_id")));
            }
            cbSearch.DroppedDown = true;
        }
    } 
```

**编辑于 23.06**

我正在举一个我真正想做的例子。

1.  组合框为空（没有项目）
2.  用户开始输入例如“ja”。组合框向我的后端发送查询。应该不是问题，因为调用是异步的，在用户最后一次输入后有 1 秒的延迟。
3.  我的后端返回一些结果（Anton Jamison、James Aaron、James Hetfield 等，限制为 50）
4.  我想用结果填充下拉列表，打开它，但作为组合框文本，我想保留“ja”，以便用户可以进一步澄清他的搜索。
5.  用户扩展了他的搜索“ja h”。后端以 James Hetfield 响应。现在的结果只有一项，我现在可以设置组合框文本或保留上面的行为。不确定哪个会更好。

所有这些都已实现，但在第 4 步，当我使用上面的函数填充组合框时，组合的文本从“ja”更改为列表的第一个匹配项。（示例中的安东·贾米森）。我几乎可以肯定有一个简单的选项可以实现这种行为，但我不确定它是否在 C# 中。

关于评论：

1.  这是一个很好的尝试，但没有成功。填充组合框项目后，我的搜索字符串将更改为列表的第一个匹配项。
2.  我想我不会尝试实现自动完成功能。
3.  关于 DroppedDown 的好消息。我将它移到编辑版本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:51:50.580

我没有你说的问题。编辑框中的文本始终保持不变。我正在使用 VS2008，尽管标准 ComboBox 重命名为 cbSearch 并捕获了它的事件（以及表单的显示事件）。休息很好。

似乎是一项不错的任务，所以我做到了。我也恢复了选择，虽然你可以看到一些闪烁。

最困难的是同步 - 所以我找到了一个简单但不太难看的解决方案。

尽管如此，我并没有做任何与你不同的事情。也许你又从一个空白的 ComobBox 开始，也许你改变了一些默认参数。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void cbSearch_TextUpdate(object sender, EventArgs e)
        {
            lastUpdate = DateTime.Now;
            allowUpdate = true;
        }
        DateTime lastUpdate = DateTime.Now;

        volatile bool allowUpdate = false;
        private void BoxUpdate()
        {
            while (true)
            {
                Thread.Sleep(250);
                if (allowUpdate)
                {
                    var diff = DateTime.Now - lastUpdate;
                    if (diff.TotalMilliseconds > 1500)
                    {
                        allowUpdate = false;
                        this.InvokeEx(x =>
                        {
                            if (x.cbSearch.Text.Length > 0)
                            {
                                x.PopulateCombo(cbSearch.Text);
                            }
                        });
                    }
                }
            }
        }

        public void PopulateCombo(string text)
        {
            int sStart = cbSearch.SelectionStart;
            int sLen = cbSearch.SelectionLength;

            List<string> cbItems = new List<string>();
            for (int i = 0; i < 3; ++i)
                for (int j = 0; j < 3; ++j)
                    cbItems.Add(i + text + j);

            cbSearch.Items.Clear();

            {
                for (int i = 0; i < cbItems.Count; i++)
                {
                    cbSearch.Items.Add(cbItems[i]);
                }
                cbSearch.DroppedDown = true;
            }

            cbSearch.SelectionStart = sStart;
            cbSearch.SelectionLength = sLen;
        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            ThreadPool.QueueUserWorkItem(x =>
            {
                BoxUpdate();
            });
        }
    }

    public static class ISynchronizeInvokeExtensions
    {
        public static void InvokeEx<T>(this T @this, Action<T> action)
            where T : System.ComponentModel.ISynchronizeInvoke
        {
            if (@this.InvokeRequired)
            {
                @this.Invoke(action, new object[] { @this });
            }
            else
            {
                action(@this);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:44:24.057

设法通过评论 1 的提示 + 一些调整来完成相同的任务。这是我完成工作的最终代码：

```
 private void cbSearch_TextUpdate(object sender, EventArgs e)
    {
        timer1.Stop();
        timer1.Dispose();
        timer1 = null;

        timer1 = new System.Windows.Forms.Timer();
        timer1.Tick += new EventHandler(timer1_Tick);
        timer1.Interval = 1000;
        timer1.Start();
    }

    delegate void MethodDelegate(JObject result);

    void timer1_Tick(object sender, EventArgs e)
    {
        timer1.Stop();
        Debug.WriteLine(this.cbSearch.Text);

        Debug.WriteLine("Thread id: " + Thread.CurrentThread.ManagedThreadId);
        Dictionary<string, object> parameters = new Dictionary<string, object>();
        parameters["query"] = this.cbSearch.Text ?? "";
        this.session.rpc["advanced_search"].execAsync(parameters, results =>
        {
            this.BeginInvoke(new MethodDelegate(PopulateCombo), new object[] {results.GetResult()});
        });
    }

    public void PopulateCombo(JObject result)
    {
        Debug.WriteLine("Thread id: " + Thread.CurrentThread.ManagedThreadId);

        this.selectedPatientId = "";
        string text = cbSearch.Text;
        cbSearch.DroppedDown = false;

        cbSearch.Items.Clear();
        if (result.Value<bool>("success") == true)
        {
            JArray arr = result.Value<JArray>("data");
            for (int i = 0; i < arr.Count; i++)
            {
                JToken item = arr[i];
                cbSearch.Items.Add(new ComboBoxItem( item.Value<string>("name"), item.Value<string>("_id")));
            }

            try
            {
                this.cbSearch.TextUpdate -= new System.EventHandler(this.cbSearch_TextUpdate);
                cbSearch.DroppedDown = true; 
                cbSearch.Text = text;
                cbSearch.Select(cbSearch.Text.Length, 0);

            }
            finally {
                this.cbSearch.TextUpdate += new System.EventHandler(this.cbSearch_TextUpdate);
            }
        }
    } 
```

# c++ - OpenMP - 部分

> ID：11163850
> 
> 赞同：2
> 
> 时间：2012-06-22T20:43:57.883
> 
> 标签：c++, parallel-processing, openmp

我使用 OpenMP 编写了一个应用程序。我创建了两个部分并将两个对象放入其中。他们每个人都调用一个运行近 22-23 秒的方法。两个部分都是独立的。

当我设置`num_threads(1)`时，应用程序需要 46 秒才能运行。没关系，因为 2×23=46。

当我设置`num_threads(2)`时，应用程序需要 35 秒才能运行，但我期待约 25 秒。

正如我所说，这些部分是独立的。`cm1`并且`cm2`不要使用任何外部变量。那么，谁能告诉我为什么我的应用程序比我预期的慢 10 秒？低电平有同步吗？

```
t1 = clock();
#pragma omp parallel num_threads(2)
{
    #pragma omp sections
    {
        #pragma omp section
        {
            Cam cm1;
            cm1.solveUsingCost();
        }

        #pragma omp section
        {
            Cam cm2;
            cm2.solveUsingTime();
        }
    }
}
t2 = clock(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:51:47.300

您有多少个 CPU 或内核？例如，如果您只有 2 个物理内核，其中一个还必须处理所有其他程序 + 操作系统，因此这会减慢其中一个线程的速度。

另一种可能性是您的 CPU 的 L3 缓存足以一次将一个计算的数据完全保存在 L3 缓存中。但是当并行执行 2 时，会使用双倍内存，因此可能需要将 L3 缓存中的一些内存转移到内存中（请注意，大多数多核 CPU 在内核之间共享 L3 缓存）。这会大大减慢您的计算速度，并可能导致所描述的结果。

然而，这些只是猜测，在并行计算时，可能还有很多其他原因导致速度增益没有因子 2。

更新：当然我忘记了，直到你提到你的 CPU 是 i5：i5 和 i7 处理器具有这种“涡轮增压”，称为提高时钟速度的能力，在你的情况下从 3.3 到 3.6 GHz。然而，这只在大多数核心处于空闲状态（我认为是出于热原因）并且单个核心得到提升时才会这样做。因此，两个内核的速度不会是一个内核的两倍，因为它们将以较低的时钟速度运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:43:52.940

从您对上一个答案和评论的回复来看，我的猜测是您的两个函数`solveUsingCost()`和`solveUsingTime()`是相当内存密集型的，或者至少是内存带宽有限的。

你到底在计算什么？如何？粗略地说，每次内存访问的算术运算比率是多少？您的内存访问模式如何，例如您是否多次运行大型数组？

# grails - removeFrom* 方法应该从数据库中删除子项还是应该只删除父子关系？

> ID：11163855
> 
> 赞同：2
> 
> 时间：2012-06-22T20:44:20.877
> 
> 标签：grails, grails-orm

问题在主题中。

目前，我观察到的行为是，当我调用时`Parent.removeFromChilds(child)`，child 不会从我的数据库中删除（即我可以使用 找到它`Child.findBy...(args)`）。

我很好奇这是否是正确的行为。如果是 - 在一个事务中删除关系和子项的最佳方法是什么？

如果没有 - 我会做错什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:07:11.793

默认情况下，如果您删除一对多的拥有方，则删除级联。如果你只是删除孩子，它不会被删除。您可以通过在关系的拥有方指定“all-delete-orphan”的自定义级联行为来更改它。来自 Grails 文档：

```
class Person {

String firstName

static hasMany = [addresses: Address]

static mapping = { addresses cascade: "all-delete-orphan" } } 
```

**更新**

[GORM Gotchas 的第 2 部分](http://blog.springsource.com/2010/07/02/gorm-gotchas-part-2/)`addTo`对不那么明显的`removeFrom`行为进行了很好的细分。我认为它包含您正在寻找的确切信息。

# php - 检查 200 万个文件的重复项

> ID：11163858
> 
> 赞同：2
> 
> 时间：2012-06-22T20:44:48.463
> 
> 标签：php, mysql, filesystems, duplicates, checksum

我们需要检查 200 万个文件，看看它们是否有任何重复。

最好的方法是什么？

[http://www.easyduplicatefinder.com/](http://www.easyduplicatefinder.com/) 我们用这个工具做了大约 20k 个文件

但很快我们将不得不做 200 万

关于如何以有效的方式做到这一点的任何想法？

萨斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:46:36.843

[在MD5](http://en.wikipedia.org/wiki/MD5#Applications)或[SHA-1](http://en.wikipedia.org/wiki/SHA-1)中创建校验和（最好，因为冲突的可能性较小），或者甚至两者都创建（当冲突非常不可能时，你可以睡得很好，知道你没有犯错）。

然后比较校验和。这将比较内容。如果您还想比较文件的名称，请在比较时将它们考虑在内。

就这些。相当（非常）可靠。

# css - Flash 8 与 CSS3 矩阵变换（仿射）

> ID：11163859
> 
> 赞同：1
> 
> 时间：2012-06-22T20:44:55.977
> 
> 标签：css, transform, flash-8

我有一个 flash 8 应用程序，它使用代表 flash 的 Matrix(a,b,c,d,tx,ty) 的字符串进行仿射变换。我想在 CSS 中使用相同的转换矩阵字符串：

```
transform:matrix(a,b,c,d,tx,ty);
-ms-transform:matrix(a,b,c,d,tx,ty); /* IE 9 */
-moz-transform:matrix(a,b,c,d,tx,ty); /* Firefox */
-webkit-transform:matrix(a,b,c,d,tx,ty); /* Safari and Chrome */
-o-transform:matrix(a,b,c,d,tx,ty); /* Opera */ 
```

结果非常接近，但我看到了奇怪的差异，主要是在 tx 和 ty 中。使用相同 Matrix 参数在 Flash8 和 CSS3 中转换的图像会导致位置略有不同。也就是说，CSS 对象可能看起来有点高或偏右。

Flash8 使用的算法与 CSS3 使用的算法有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:26:50.247

哦！算法是相同的，我们没有使用正确的 t 矩阵数据！！！

# java - 如何创建一个简单的 json 结果集？

> ID：11163861
> 
> 赞同：0
> 
> 时间：2012-06-22T20:45:01.033
> 
> 标签：java, json, spring, spring-mvc

我想返回一个简单的 json 结果，例如：

```
{ 12323: true } 
```

或者如果我不能有布尔值，那么 1 或 0。

我的弹簧控制器是这样的：

```
@ReqeustMapping("/getResultFor")
@ResponseBody
public String getResultForXXXX(HttpServletRequest request, ...) {
    userId = 123;
    bool isSaved = true;

    // ????????? create object and convert to json
    //
    return someJson;
} 
```

所以我有我的 userId 和 bool 变量，我需要包装在一个结构中并将其转换为 json。我不想为这个结构创建一个新的类/类型（最好）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:47:41.380

我们使用 Jackson 已经有一段时间了。[https://github.com/FasterXML/jackson](https://github.com/FasterXML/jackson)并对此非常满意。您将使用您的字段创建一个 Java POJO，并让 Jackson 将其序列化为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:48:17.133

[Java 对象](http://www.json.org/java/index.html)

```
 new JSONObject().put("12323", "true").toString() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T00:53:51.180

您可以从该方法返回此类型的哈希图，该方法的返回类型为`Map<Object, Object>`：

```
Map<Object, Object> modelMap = new HashMap<Object, Object>();
modelMap.put(Integer.valueOf(123123), Boolean.TRUE);
return modelMap; 
```

# mysql - MySQL - 用 2 个键分组

> ID：11163863
> 
> 赞同：0
> 
> 时间：2012-06-22T20:45:05.353
> 
> 标签：mysql, database-schema

假设您有`MySQL Database Schema`a`from_id`和 a `to_id`，它们都代表数字用户`ID`的。上下文是类似于聊天的基于文本的对话。

您如何选择`query` 与他/她进行过对话的所有其他用户`database`之间交换的所有最后消息的列表？`user 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:49:27.290

```
SELECT * FROM TABLENAME WHERE from_id = USERID1 OR to_id = USERID1 
```

您可能希望将所需的列代替“*”以获得更好的性能。

如果您有一个日期时间字段，那么您也可以按该字段进行搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:48:14.290

如果您需要 1 个用户：

```
SELECT * FROM TABLENAME 
WHERE from_id = USERID1 OR to_id = USERID1 
ORDER BY `timestamp` DESC
LIMIT 1 
```

这里`timestamp`- 你的时间戳字段。

对于所有用户：

```
select text, id, ts 
from (select text, from_id as id,ts from chat union select text, to_id as id,ts from chat) T 
group by id 
having ts=max(ts) 
```

这里 ts - 时间戳

# macos - Textmate教程终端mac-osx

> ID：11163864
> 
> 赞同：0
> 
> 时间：2012-06-22T20:45:13.653
> 
> 标签：macos, terminal, textmate

我已经在我的终端上安装了 Textmate 编辑器，我正在寻找一些教程来发现 Textmate 的命令行？有人有一些链接吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:49:24.307

可选安装的用于命令行访问的 textmate bin 实际上只是一种在 OSX gui 应用程序中打开文件的简单方式。

也就是说，有一些方便的快捷方式。`-w`打开文件时发出“等待”，因此按顺序执行的命令将等到文档关闭才能执行。例如：

```
alias bashrc="mate -w ~/.bashrc; source ~/.bashrc" 
```

也就是说，如果您正在寻找一个*在*gui 本身中使用的好命令集，请告诉我，我将填写一个方便的命令列表（它已成为我的默认编辑器 6 年了）。

编辑：这是我的 TextMate 文档的开头。我目前的备忘单状态应该证明是有用的。我将在不久的将来添加并编写一些更广泛的文档。

[TextMate 备忘单](https://github.com/liquidise/Textmate-Reference/blob/master/Cheatsheet.md#textmate-cheat-sheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:49:38.940

您可以使用以下命令从命令行调用它：

`mate path/to/file/you/want/to/edit.txt`

您可以使用多个文件，以空格分隔。要查看更多选项，请执行以下操作：

`mate --help`

如果您安装了命令行选项。您也可以随时从首选项中执行此操作（它只是一个符号链接）

# javascript - 通过 JS 获取 .ascx RadioButtonLists 选定项

> ID：11163868
> 
> 赞同：0
> 
> 时间：2012-06-22T20:45:38.990
> 
> 标签：javascript, asp.net, dotnetnuke, radiobuttonlist

我试图通过页面上的 java 脚本在 asp:RadioButtonList 中获取当前选定的项目。我已经查找了如何做到这一点，但建议的方法都没有奏效。我正在为 dnn 模块编码。这是我所拥有的：

```
<script type="text/javascript">
function BeginDownload() {
    var radioObj = document.getElementsByName('<%= SliderStyles.ClientID %>');
    for (var i = 0; i < radioObj.length; ++i ) {
        if (radioObj[i].checked) {
            if (radioObj[i].value == "0") { __doPostBack("ImgDownload", $("#waterwheel-carousel-horizon").CurrentSelectedImg().toString()); }
            else if (radioObj[i].value == "1") { __doPostBack("ImgDownload", $("#slides").CurrentSelectedImg().toString()); }
        }
    }
} 
```

```
<asp:Label runat="server" Text="Slider Style" Font-Bold="True" />
<asp:RadioButtonList ID="SliderStyles" runat="server" RepeatDirection="Horizontal" OnSelectedIndexChanged="SliderStyle_OnSelectedIndexChanged" AutoPostBack="True">
    <asp:ListItem Text="Default" Value="0" Selected="True"></asp:ListItem>
    <asp:ListItem Text="Slide Show" Value="1"></asp:ListItem>
</asp:RadioButtonList> 
```

到目前为止，我在 Javascript 中获得的值每次都返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:02:56.350

您的 for 循环不正确，像这样将“++i”更改为“i++”

for (var i = 0; i < radioObj.length; i++ )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:54:00.357

```
Hello try with getElementsById

<script type="text/javascript">
function BeginDownload() {
    var radioObj = document.getElementsById('<%= SliderStyles.ClientID %>');
    for (var i = 0; i < radioObj.length; ++i ) {
        if (radioObj[i].checked) {
            if (radioObj[i].value == "0") { __doPostBack("ImgDownload", $("#waterwheel-carousel-horizon").CurrentSelectedImg().toString()); }
            else if (radioObj[i].value == "1") { __doPostBack("ImgDownload", $("#slides").CurrentSelectedImg().toString()); }
        }
    }
} 
```

# windows-phone-7 - WP7 屏幕截图要求

> ID：11163870
> 
> 赞同：0
> 
> 时间：2012-06-22T20:45:53.580
> 
> 标签：windows-phone-7

微软拒绝提交我的申请，因为我截取了包含实际模拟器的游戏屏幕截图。

看着[这个](http://forums.create.msdn.com/forums/p/96106/574002.aspx)答案，这个人说当我将手机模拟器设为 100% 时，我应该使用截图工具。事实上，截图工具会以 480x800 的分辨率吐出该屏幕的图像，这正是微软想要的。但是，每当我使用截图工具时，WP7 的顶部黑色边框仍然存在。我查看了市场上的一些图像，其他应用程序也有它......我想。有些没有。有人可以给我建议吗？我怎样才能避免受到惩罚......再次。

这足够了吗？

![在此处输入图像描述](../Images/4eb324d95cf995e7f73f25fcad87c57b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:47:17.433

如果您更新到 Windows Phone 7.1 SDK 和模拟器，则新的模拟器具有内置的屏幕截图功能，可以在没有这些问题的情况下进行屏幕截图。

![模拟器截屏实用程序](../Images/b5fb3c7ca80edf5752455b2f44d238ce.png)

我从来没有因为从模拟器截取的屏幕截图而拒绝我的应用程序，我不能说你不会有问题，但假设你的屏幕截图中的其他所有内容都已检查出来；来自模拟器的图像尺寸正确，应该得到批准。

# image-processing - 反转 RGB 图像有意义吗？

> ID：11163881
> 
> 赞同：0
> 
> 时间：2012-06-22T20:46:49.587
> 
> 标签：image-processing, rgb, grayscale

反转 RGB 图像有意义吗？

我知道灰度图像的算法是 1 值，但是对于 RGB？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:51:29.140

对于 rgb，只需从 255 中减去红色、绿色和蓝色值。

# html - 压缩localStorage有用吗？

> ID：11163889
> 
> 赞同：1
> 
> 时间：2012-06-22T20:47:41.997
> 
> 标签：html, compression, local-storage

我将从一个可靠的示例开始：我有一个生成哈希（32 位整数）并将它们保存在 localStorage 中的函数。这是为了实现常见通知的“不再显示”功能：如果哈希在列表中，则不显示通知。

在我第一次尝试编写此解决方案后，我的 localStorage 条目如下所示：

> 616845040,796177849,848184043,1133088406,1205053317,1478518197,1525440546,1686606993,1753347541,1908577591,2056496592，-864967541，-1185668678，-835401591，-1017499054，-559563441，-1842092814，-1069291933，-1887162563

**19 个哈希，210 个字节的数据。**

稍后，我重新访问了代码。我不只是将整数转储为十进制字符串，而是将它们转换为实际的二进制数据。换句话说，每个哈希现在都是一个长度为四个字符的字符串，表示整数的二进制值。我的 localStorage 条目现在看起来像这样：

> $ÄNð/tµ¹2BëCGÓ§X eµZì`"dhõÕqÂ7z¥Ðￌq¤ﾹT!ºￎ4ÈￃZ2R￞¥½Oﾒ3äò￀Cæcﾏ/=

**19 个哈希，76 个字节的数据**（那里有一些不可打印的字符）

节省了 63.8%。

现在，我很清楚 localStorage 默认提供 5MB 的存储空间。我可以使用第一种方法轻松存储数万个哈希，完全没有问题。但我喜欢高效。当我可以在 1.8MB 中拥有相同的数据（与上述相同的压缩率）时，我当然不希望在我的计算机上拥有 5MB 的文件。这就是为什么我尽可能将所有 PNG 保存为索引调色板。

这是一种良好的心态吗？还是我只是迂腐？我想这个问题可以概括为：**我应该压缩，还是因为拥有比我需要的更多的资源而不在乎？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:50:33.623

在编写代码时，Pedantic 很好。尽可能压缩，但请确保在阅读**代码**时，以任何方式保存散列仍然是可读和可理解的。

我的意思是，不要为了效率而牺牲代码的可读性和可维护性。

# junit - 使用 jUnit 4，我可以参数化 @BeforeClass 吗？

> ID：11163890
> 
> 赞同：16
> 
> 时间：2012-06-22T20:47:43.497
> 
> 标签：junit, integration-testing, junit4, parameterized

我正在使用 jUnit 来管理访问数据库的应用程序的集成测试。因为设置测试数据是一项耗时的操作，所以我一直在`@BeforeClass`方法中这样做，每个测试类只执行一次（与`@Before`方法相反，每个测试方法运行一次）。

现在我想为数据层的配置尝试一些不同的排列，在每个不同的配置上运行我的所有测试。这似乎是对`Parameterized`测试运行器的自然使用。问题是，`Parameterized`向类构造函数提供参数，并且该`@BeforeClass`方法是抽象的并且在类构造函数之前被调用。

几个问题，

是否为每个参数排列`Parameterized`调用该`@BeforeClass`方法，还是只调用一次？

如果该`@BeforeClass`方法被重复调用，是否有某种方法可以从它内部访问参数值？

如果这些都不是，人们建议作为解决这个问题的最佳替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T21:15:27.437

我认为您将需要一个自定义测试运行器。我遇到了同样的问题（需要使用多个昂贵的配置运行相同的测试）。您需要一种方法来参数化设置，可能使用类似于 Parameterized 运行器使用的 @Parameter 注释，但在静态成员字段而不是实例字段上。自定义运行器必须找到所有带有 @Parameter 注释的静态成员字段，然后每个静态 @Parameter 字段运行一次测试类（可能使用基本的 BlockJunit4ClassRunner）。@Parameter 字段应该是@ClassRule。

Andy on Software 在开发自定义测试运行程序方面做得很好，他在[此处](http://andyonsoftware.blogspot.com/2011/05/reuse-and-composition-of-unit-tests.html)和[此处](http://andyonsoftware.blogspot.com/2011/05/custom-junit-runner.html)的这些博客文章中解释得非常清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:32:07.473

@BeforeClass 在您的示例中仅调用一次。考虑到这个名字，这是有道理的——上课前！

如果您的测试需要不同的数据，我可以想到两种选择：

1.  在 @Before 中设置该数据，使其特定于测试
2.  将要使用相同数据运行的测试分组到单独的测试类中，并为每个测试类使用 @BeforeClass。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:42:16.453

您可以在测试类的构造函数中调用此初始化逻辑。跟踪静态变量中使用的最后一个参数。当它改变时，为新参数设置类。

我想不出AfterClass的等价物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T07:31:08.613

这是一个老问题，但我只需要解决一个可能类似的问题。我现在使用下面的解决方案，它本质上是使用通用抽象基类实现 TREE（更新）答案，以避免在需要此机制时出现重复。

具体测试将提供一个 @Parameters 方法，该方法返回一个可迭代的单元素数组，每个数组包含一个 Supplier< T >。然后，根据具体测试方法所需的实际输入，这些供应商只执行一次。

```
@RunWith(Parameterized.class)
public class AbstractBufferedInputTest<T> {

private static Object INPUT_BUFFER;

private static Object PROVIDER_OF_BUFFERED_INPUT;

private T currentInput;

@SuppressWarnings("unchecked")
public AbstractBufferedInputTest(Supplier<T> inputSuppler) {
    if (PROVIDER_OF_BUFFERED_INPUT != inputSuppler) {
        INPUT_BUFFER = inputSuppler.get();
        PROVIDER_OF_BUFFERED_INPUT = inputSuppler;
    }
    currentInput = (T) INPUT_BUFFER;
}

/**
 * 
 * @return the input to be used by test methods
 */
public T getCurrentInput() {
    return currentInput;
}

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T16:50:25.310

您可以在 @Before 方法中进行初始化，写入实例变量但测试 null。

```
@RunWith(value = Parameterized.class)
public class BigThingTests {
  private BigThing bigThing;

  @Before
  public void createBitThing() {
    if (bigThing == null) {
      bigThing = new BigThing();
    }
  }

...
} 
```

`BigThingTests`为每组参数创建一个新实例，并`bigThing`在每个新实例中设置为 null。运行器是`Parameterized`单线程的，因此您不必担心多次初始化。

# cordova - 如何在黑莓中使用 webworks 丢弃短信

> ID：11163891
> 
> 赞同：0
> 
> 时间：2012-06-22T20:47:44.057
> 
> 标签：cordova, sms, blackberry-simulator, blackberry-webworks

我正在为 blackberry OS 5 使用 webworks api 开发应用程序。

我的应用程序正在收听收到的短信并从特定号码中检测特定消息，然后从中提取一些信息。我的问题是从手机收件箱中删除此消息！

如何丢弃黑莓手机收件箱中的短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:53:50.293

在 BlackBerry OS 7.1 及更低版本中，第三方应用程序没有 API 可以从用户的收件箱中删除 SMS 消息或阻止消息出现。

SMS 消息的发送者可以通过某种方式制作它，以防止它显示在用户的收件箱中。有关这方面的更多信息，请参阅[使用 SMS 通知应用程序](http://supportforums.blackberry.com/t5/Java-Development/Use-SMS-to-notify-an-application/ta-p/444965 "使用 SMS 通知应用程序")。

# sql-server - 从分离的 SQL Server .mdf 文件中获取数据和日志文件的列表

> ID：11163893
> 
> 赞同：0
> 
> 时间：2012-06-22T20:47:46.780
> 
> 标签：sql-server, smo

给定一个分离的 SQL Server 主数据文件 ( `.mdf`)，您如何获取该文件中存在的数据和日志文件的列表？目标是使用`Server.AttachDatabase`SMO 方法附加数据库。但是数据库可能有多个数据和/或日志文件，所以我需要获取列表才能将它们添加到`StringCollection`方法的参数中。

我需要的是相当于`select * from sys.files`一个分离的 mdf。当您使用 SQL Server Management Studio 手动附加数据库时，它会执行此操作，因此我知道它可以完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:52:13.577

如果是单个 MDF 文件，如果还有其他 MDF 文件，我认为 MDF 文件无法直接告诉您。

您可以随时*尝试*使用该[`CREATE DATABASE ... FOR ATTACH_REBUILD_LOG`](http://msdn.microsoft.com/en-us/library/ms176061%28v=sql.100%29.aspx)选项附加没有日志文件的 MDF 文件。

在 SMO 中，您可以使用[`AttachDatabase`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.attachdatabase)指定`RebuildLog`for的方法来执行此操作[`AttachOptions`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.attachoptions)。

当然，这一切都假设 .mdf 文件是健康的——它只有在完全分离的情况下才能使用。

Management Studio 可能有一些读取文件头的专有方法，但这些没有记录在案，您将无法使用 Profiler 等查看 SSMS 正在做什么。

如果您通常为某种分发创建 .mdf 文件，我强烈建议您改用备份/恢复。您可以了解更多关于 .BAK 文件及其数据库所代表的数据/日志文件的信息，使用文档化和公开的方法，例如[`RESTORE FILELISTONLY`](http://msdn.microsoft.com/en-us/library/ms173778%28v=sql.100%29.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:27:10.357

终于想通了这个。未记录的命令 DBCC checkprimaryfile(N'blah.mdf',3) 提供了所需的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-17T21:24:29.293

我花了一段时间才找到它，但在 SMO 中，您使用 EnumDetachedLogFiles 和 EnumDetachedLogFiles。

```
# PowerShell
$servername = "sqlserver\instance"
$mdf = "S:\DATA\mydb.mdf"

[void][Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.SMO")
$filestructure = New-Object System.Collections.Specialized.StringCollection
$server = New-Object Microsoft.SqlServer.Management.Smo.Server $servername

# Here you can automatically determine the database name, or set it manually
$dbname = ($server.DetachedDatabaseInfo($mdf) | Where { $_.Property -eq "Database name" }).Value

foreach    ($file in $server.EnumDetachedDatabaseFiles($mdf)) {
    $null = $filestructure.add($file)
}

foreach ($file in $server.EnumDetachedLogFiles($mdf)) {
    $null = $filestructure.add($file)
} 
```

[枚举分离的数据库文件结构](https://blog.netnerds.net/2015/01/enumerate-file-structure-within-detached-mdf-database-file-using-smo/ "枚举分离的数据库文件结构")

[SMO 附加/分离配方](https://blog.netnerds.net/smo-recipes/detach-attach/)

# javascript - 什么框架与 JQuery UI 一起使用？

> ID：11163902
> 
> 赞同：1
> 
> 时间：2012-06-22T20:48:33.433
> 
> 标签：javascript, jquery, jquery-ui, node.js

我想在我的节点服务器中使用 JQuery UI 中的一些小部件。但是我什至无法更新进度条。

与 JQuery UI 一起使用的最佳框架是什么，是否有任何使用它的 nodejs 服务器示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:50:36.473

它只是[jQuery](http://jquery.com/)，因为 jQuery UI 是基于它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:51:43.377

要使用 jQuery UI，您只需要它们，您可以从以下位置下载它们`jQuery Liblary`：`jQuery UI Liblary`

[http://jqueryui.com/download](http://jqueryui.com/download)

[http://docs.jquery.com/Downloading_jQuery](http://docs.jquery.com/Downloading_jQuery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:58:45.830

不确定你是否了解 twitter bootstrap。但是看看它可能有你需要的东西并且非常容易使用！它使用 jQuery。

[推特引导](http://twitter.github.com/bootstrap/)

# android - 如何在通过 WiFi 连接的 Android 设备上查看由 PC 的 c++ 代码生成的 openGL 渲染？

> ID：11163904
> 
> 赞同：1
> 
> 时间：2012-06-22T20:48:43.010
> 
> 标签：android, c++, video, opengl-es, stream

我正在做一个增强现实 (AR) 演示，其中将从 PC 生成高质量的 openGL 渲染（在 C++ 中），然后流式传输到 Android 显示设备（运行最低 Android 2.2）。实时实现这一目标的最简单方法是什么（Android 设备上为 30 FPS）？

我查看了现有的 Anrdroid 应用程序，到目前为止还没有发现任何适合的应用程序。最好的可用是远程桌面应用程序（例如 TeamViewer），但帧速率太低且不可靠。

可能的解决方案 A：1）将 openGL 窗口编码为 H.264 视频（Android 原生支持）2）使用服务器通过 RTSP 流式传输 H.264 视频 3）从 Android 浏览器查看内容（通过 WiFi 连接的 Android 和 pc）

可能的解决方案B：1）在c ++中将openGL窗口编码为IP Camera（这可能吗？）2）在Android设备上使用IPCamViewer查看（再次通过WiFi连接）

我不完全确定这两种方法中的一种或两种是否可行，并且在继续前进之前希望得到一些保证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:27:27.707

图像的分辨率是多少（是否等于当前屏幕分辨率，更大或更小）？传输 H.264 流是可行且高效的，但它也取决于用于进行编码的机器。硬件编码器或 GPU 加速编码器是您最好的选择。

**请记住**-*如果您选择使用编码，由于缓冲（在编码和解码端），您将有延迟。这将是一个恒定的时间偏移，所以如果这不是问题，你应该没问题。*

[本文](http://publik.tuwien.ac.at/files/pub-inf_4978.pdf)提出的总系统延迟由 ![压缩、传输和显示延迟](../Images/b7270da37f0ba4711d4c3f2f1fd6c852.png)

请注意，这些延迟都不能直接在帧时间内完全测量。其中一些取决于所执行的帧数据和/或编码器/处理。但作为快速 GPU 编码和硬件解码的粗略估计，我会说大约 5-20 帧的延迟。您必须测量每个场景的最终延迟。我通过发送包含文本（记号）的帧来做到这一点，一旦帧稳定，将它们并排比较。事实上，我什至允许用户随时进入“测试模式”以补偿网络流量高峰时间或让他更改“质量”设置以调整此延迟。

# mysql - 在没有任何过程或函数的情况下使用 MySQL

> ID：11163907
> 
> 赞同：0
> 
> 时间：2012-06-22T20:48:56.403
> 
> 标签：mysql, stored-procedures, if-statement

是否可以在不使用任何程序的情况下在 MySQL 中使用任何类型的逻辑？我的虚拟主机不允许我创建任何程序，所以我正在寻找一种解决方法。

我想做的事情的类型是仅在表不存在的情况下将项目添加到表中。或者，如果表中不存在列，则将其添加到表中。有一些操作可以做之类的`CREATE TABLE IF NOT EXISTS`，但我需要的一些操作没有这样的奢侈品:(

我后来意识到我可爱的 ​​proc 不起作用，所以我尝试将 IF/ELSE 逻辑编写为顶级查询，但对于 MySQL，IF ELSE 块似乎只在函数/procs 内工作，而不是在全局范围内工作。

任何解决方法都非常受欢迎 - 我已经要求主机授予我创建程序的权限，但还没有回复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:04:04.603

我想你也无权访问`INFORMATION_SCHEMA`。您可能会找到解决方案，但在我看来，这样做会更好：

**更改您的托管服务提供商。严重地。**为您可以根据需要配置的 MySQL 实例支付更多费用（如果需要）。如果不允许创建过程和函数，则只有残废的 DBMS。

* * *

特定任务的可能解决方法：如果列不存在，您想添加它。

1）只需`ALTER TABLE`添加列。如果它已经存在，你会得到一个错误。您可以在您的应用程序中捕获该错误。

2）（如果您无权访问`INFORMATION_SCHEMA`）为您的数据库维护一个模式的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:46:13.277

最初，我创建了一个大脚本来创建或更新数据库模式，以便更轻松地将数据库更改从本地计算机部署到服务器。
我的脚本做了很多“如果表'abc'存在并且它没有名为'blah'的FK约束”然后在表'abc'上创建一个名为'blah'的FK约束......等等。

我现在意识到实际上没有必要检查表是否具有某个列或约束等，因为我可以只维护一个模式版本控制系统，并在我的应用程序启动时查询数据库模式版本，或者当我导航到某个页。

例如，假设我想向表中添加一个新列。它是这样工作的：

*   向应用代码添加新的迁移脚本，其中包含将列添加到现有表所需的 SQL
*   将应用程序的架构版本增加 1
*   在应用启动时，应用会在数据库中查询数据库的架构版本
*   如果 DB schema-version < app schema-version，则执行两个 schema-version 之间的 SQL 迁移脚本，然后更新 DB schema-version 与应用相同

例如，如果数据库的模式版本为 5，应用程序版本为 8，则应用程序会将迁移脚本 5-6、6-7 和 7-8 应用到数据库。这些可以直接运行，而无需在数据库端检查任何内容。

因此，该应用程序仅负责更新数据库架构，我无需在本地或远程数据库上执行架构更改脚本。

我认为这是一个比我试图为我的问题实施的系统更好的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:08:05.007

MySQL 支持[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html). 和[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

以下将插入一个新行，但前提是不存在带有`id=10`. （这假设它`id`被定义为唯一键或主键）。

```
INSERT IGNORE INTO my_table (id, col1, col2) values (10, "abc", "def"); 
```

下面将插入一个新行，但如果存在一个现有行`id=10`（再次假设 id 是唯一的或主要的），则现有行将被更新以保存新值，而不是插入新行。

```
INSERT INTO my_table (id, col1, col2) values (10, "abc", "def")
   ON DUPLICATE KEY UPDATE col1=VALUES(col1), col2=VALUES(col2) 
```

另外，`CREATE TABLE`支持[`IF NOT EXISTS`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)修饰符。因此，您可以执行以下操作：

```
CREATE TABLE IF NOT EXISTS my_table ... 
```

MySQL 中还有许多其他类似的选项和修饰符。检查文档以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:55:30.327

我能想到的最佳解决方案是在 SQL 中使用另一种语言。例如，您可以针对特定记录运行查询，并且根据您获得的响应，您可以有条件地运行 INSERT 语句。

要插入不存在的表，请尝试使用 SHOW TABLES 语句并测试结果集中是否存在名称。

# java - 网页 Java 小程序 - 在屏幕键盘上打开

> ID：11163910
> 
> 赞同：1
> 
> 时间：2012-06-22T20:49:04.283
> 
> 标签：java, applet, embed, noclassdeffounderror

我正在尝试从触摸屏界面上的 Web 应用程序中打开屏幕键盘。我使用 Opera 作为内置“Kiosk”功能的浏览器，但它不支持 VBScript——一种从网页打开 .exe 文件的简单方法。

我知道 Java 可以在网页中运行，也可以用于打开另一个应用程序，例如 OSK！

以下是我的工作 Java 代码：

```
package runtimeexec;

import java.io.IOException;

public class RuntimeExec {

public static void main(String[] args) {
            try {
        Runtime runTime = Runtime.getRuntime();
        Process process = runTime.exec("cmd /c osk");
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

现在我想将它嵌入到一个网页中，以便它可以打开 osk。我的 .class 文件位于[http://theyconfuse.me/java/runtimeexec/RuntimeExec.class](http://theyconfuse.me/java/runtimeexec/RuntimeExec.class)并且我当前嵌入此代码的尝试位于[http://theyconfuse.me/java/](http://theyconfuse.me/java/)并带有以下嵌入代码：

```
<applet codebase="http://theyconfuse.me/java/runtimeexec" code="RuntimeExec.class" width="200" height="200"></applet> 
```

但是，当我加载页面时，我得到以下信息：

> NoClassDefFoundError
> 
> RuntimeExec（错误名称：runtimeexec/RuntimeExec）

谁能帮我解决我在这里缺少的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:25:25.787

```
code="RuntimeExec.class" 
```

应该有`package`结构，用点分隔，但没有`.class`扩展名。

```
code="runtimeexec.RuntimeExec" 
```

# android - Android：EditText.setInputType() 如何设置电子邮件但不是自动建议

> ID：11163911
> 
> 赞同：18
> 
> 时间：2012-06-22T20:49:04.837
> 
> 标签：android

我正在使用一个`EditText`框让用户输入他们的电子邮件地址。

我使用以下方法进行设置：

```
box.setInputType( InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS ); 
```

这会导致软键盘弹出“@”和“.”。（和一些键盘“.com”）在初始键盘布局上的键。太好了，正是我想要的。

但是，我注意到文本全是黑色（当我指定白色时）。我发现这是由于自动建议。如果我进入`Settings->Languages/Keyboards->Touch Input->TextInput`并禁用预测和单词完成，则文本显示为白色。

现在的问题是：如何为此以编程方式禁用自动完成功能？

我尝试通过以下方式设置盒子：

```
box.setInputType( InputType.TYPE_CLASS_TEXT | TYPE_TEXT_FLAG_NO_SUGGESTIONS ); 
```

这将导致所有白色文本（即没有自动建议）。但后来我不再有电子邮件“@”和“.com”按钮！呸骗子。

无论如何要两者兼得？谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-22T20:57:42.170

这段代码应该可以解决问题：

```
box.setInputType( InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS ); 
```

您可以根据需要添加任意数量的标志，只要它们相互兼容。

# php - 将 World Pay 支付网关与 PHP 集成

> ID：11163912
> 
> 赞同：1
> 
> 时间：2012-06-22T20:49:12.113
> 
> 标签：php, payment-gateway, worldpay

实施 worldpay 支付网关让我发疯。我正在尝试使用 XML 直接方法在 php 网站中实现 worldpay 支付网关。我正在使用[此处](http://www.hurricanesoftwares.com/integrating-rbs-worldpay-xml-direct-method-in-ecommerce-with-php/)的代码来处理所有 HTTP 请求。

但是每当我尝试连接到他们的服务器时，我都会收到需要授权的错误消息。我在以下网址中提供了所有必需的详细信息

$dest="https://$merchantCode:$password@secure-test.wp3.rbsworldpay.com/jsp/merchant/xml/paymentService.jsp";

即使我使用 curl 连接到他们的服务器，我也会收到找不到 url 的错误消息。

以下是我正在使用的 curl 代码。

```
 $ch = curl_init ($url);
    curl_setopt($ch, CURLOPT_POST,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS,$xml);   //$xml is the xml string
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_NOPROGRESS, 0);

    $result = curl_exec ($ch); // result will contain XML reply from WorldPay curl_close ($ch);
    if ( $result == false )
    {
    $error = "Curl could not retrieve page '$url', curl_exec returns false";               
    }
    echo $error;
    echo $result; 
```

由于没有适当的文档，我请求任何实施它的人帮助我。

目前我正在我的本地主机上测试 PHP 网站。这是 HTTP 请求或 curl 不起作用的原因吗

# .htaccess - htaccess 重定向到 https 浏览器差异

> ID：11163915
> 
> 赞同：3
> 
> 时间：2012-06-22T20:49:26.070
> 
> 标签：.htaccess, redirect, https, amazon-ec2, cloud-hosting

我的 .htaccess 文件中有以下内容可将 http 请求重定向到 https

```
RewriteEngine On

RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{HTTP_HOST} ^newco.local,^newco.dev
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [L,R]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

这会在 Firefox 中正确重定向，但不能在 chrome 或 safari 中正确重定向。这托管在[http://newco.phpfogapp.com](http://newco.phpfogapp.com) 的 phpfog 上，ssl 在负载平衡处终止，所以我不得不使用 %{HTTP:X-Forwarded-Proto} 来检查 https。这会导致其他浏览器出现任何问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-23T04:50:24.123

试试这个`%{HTTPS}`变量。

如果请求是`HTTPS`，则变量 = `on`，否则，它 = `off`。

示例代码：

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^newco.local,^newco.dev
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [L,R] 
```

这是完整的[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# php - PHP - 为什么这个类声明给我错误？

> ID：11163921
> 
> 赞同：1
> 
> 时间：2012-06-22T20:50:00.583
> 
> 标签：php, class

> 解析错误：第 3 行出现语法意外 T_STRING。

```
<?php
class AttachmentEmail {
    private $from = 'noreply@site.com';
    private $from_name = 'Site';
    private $reply_to = 'noreply@site.com';
    private $to = '';
    private $subject = '';
    private $message = '';
    private $attachment = '';
    private $attachment_filename = '';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:55:05.040

您必须使用 PHP4。我刚刚在 PHP 5.2 中尝试过它，它工作得很好。

PHP 4 对于如何创建类与版本 5 有一组不同的规则。

运行`phpinfo();`以获取您的版本。如果是版本 4，您可能需要考虑升级。

# jquery - jQuery：按钮点击事件必须在点击时触发，但在页面加载时发生。怎么修？

> ID：11163923
> 
> 赞同：1
> 
> 时间：2012-06-22T20:50:09.970
> 
> 标签：jquery

我在这里有一个小提琴 - [http://jsfiddle.net/hhimanshu/SDr3F/2/](http://jsfiddle.net/hhimanshu/SDr3F/2/)

*   左窗格已经可用
*   我需要当我点击“搜索”时，输入框应该显示为焦点（暂时警报）

**问题**

*   当我使用左窗格设置加载页面时，jQuery 触发事件并单击“搜索无效”

请帮助我理解我在这里做错了什么

**更新**

*   我可以看到警报，但无法集中注意力，这是我最新的 jQuery

> ```
> // loading search page
> $(function(){
>   $("#search").click(function(){
>       $('#feature').load('templates/search.html');
>       $('#search-input').focus();
>       // alert("hi");
>   });
> }); 
> ```

并且`search.html`是

```
<input id="search-input" type="text" class="input-medium search-query span4 youtube-search-box"> 
```

我怎样才能专注于它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:00:06.703

下面的代码在页面加载时触发，因为这就是您编写代码的方式

```
$(function(){  // This tells it to run when dom is ready
    alert('hi')    //  Since this is inside the ready function it runs when dom is ready
}); 
```

您需要准备好 dom 上的搜索按钮元素并附加一个单击事件处理程序。现在，当您单击 ID 为“搜索”的元素时，它将触发 .click() 函数中的任何代码

```
$(function(){  
    $('#search').click(function(){  // this tells it to run whenever element with ID "search" is clicked
          alert('hi');
     });
}); 
```

这是一个工作小提琴[http://jsfiddle.net/SDr3F/10/](http://jsfiddle.net/SDr3F/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:00:53.153

这应该可以解决问题：

```
$('#search').click(function(){
    alert('hi')
    //$('#search-input').focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T21:00:29.667

您必须将该功能附加为按钮上的单击事件的一部分。所以是这样的：

```
$("#search").click(function(){
     alert('hi')
     //$('#search-input').focus();
}); 
```

[http://jsfiddle.net/SDr3F/7/](http://jsfiddle.net/SDr3F/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:01:02.300

这`$(document).ready(fn)`意味着当 DOM 加载时，其中的任何内容都会执行。

要检测对搜索按钮的点击，请在`$("#search").click(fn)`document.ready fn 中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T21:02:14.790

基本上，您的代码目前只是告诉它立即运行。

```
 $(function(){
     alert('hi')
//$('#search-input').focus(); 
```

});

您需要添加以下内容：

```
 $("#search").on("click", function(){
     alert('hi')
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T21:03:43.230

问题是您的 Button 中有一个 DIV。

试试这个小提琴

[http://jsfiddle.net/SDr3F/9/](http://jsfiddle.net/SDr3F/9/)

# java - 在框架上绘制自己的缓冲图像

> ID：11163925
> 
> 赞同：2
> 
> 时间：2012-06-22T20:50:19.803
> 
> 标签：java, arrays, image, draw, bufferedimage

我有一个与我的框架大小相同的缓冲图像：

```
public BufferedImage img;
public static int WIDTH = 800;
public static int HEIGHT = 600;
img=new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB); 
```

我怎样才能画出来，这样我才能看到一个黑色的图像填充框架？不使用画布

我只想使用图形中的 drawImage 函数，而不使用 paint 或 paintComponent 函数

如果可能，我如何为该图像分配一维数组 [WIDTH*HEIGHT]？

简单：我想创建一个图像，将数组中的值转换为像素（0=black,999999999=lightblue 等）并将其绘制到屏幕上。

**编辑：**

这是没有按预期工作的代码（它应该是一个带有黑色绘制图像的框架）但只是一个空白框架。为什么图像没有添加到框架中？

![在此处输入图像描述](../Images/9a6b6abce44001a95bfd50dd2c29f763.png)

```
 import javax.swing.*;

  import java.awt.Canvas;
  import java.awt.Graphics;
  import java.awt.image.BufferStrategy;
  import java.awt.image.BufferedImage;
  import java.awt.image.DataBufferInt;

  public class test extends Canvas{

public static JFrame frame;
public static int WIDTH = 800;
public static int HEIGHT = 600;

public test(){

}

public static void main(String[] a){

        test t=new test();
        frame = new JFrame("WINDOW");
        frame.add(t);
        frame.pack();
        frame.setVisible(true);
        frame.setSize(WIDTH, HEIGHT);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        t.start();

}

public void start(){

    BufferedImage img = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
    int[] pixels = ((DataBufferInt)img.getRaster().getDataBuffer()).getData();
    boolean running=true;
    while(running){
        BufferStrategy bs=this.getBufferStrategy();
        if(bs==null){
            createBufferStrategy(4);
            return;
        }
        for (int i = 0; i < WIDTH * HEIGHT; i++)
            pixels[i] = 0;

        Graphics g= bs.getDrawGraphics();
        g.drawImage(img, 0, 0, WIDTH, HEIGHT, null);
        g.dispose();
        bs.show();

    }
}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T19:03:16.300

据我了解您要实现的目标（“不是很多”），这可能会给您一些提示。框架和图像的结构在我看来仍然不整洁，但请看一下。

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;
import javax.swing.*;

public class TestImageDraw {

    public static JFrame frame;
    BufferedImage img;
    public static int WIDTH = 800;
    public static int HEIGHT = 600;

    public TestImageDraw() {
    }

    public static void main(String[] a){

        TestImageDraw t=new TestImageDraw();

        frame = new JFrame("WINDOW");
        frame.setVisible(true);

        t.start();
        frame.add(new JLabel(new ImageIcon(t.getImage())));

        frame.pack();
//      frame.setSize(WIDTH, HEIGHT);
        // Better to DISPOSE than EXIT
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    }

    public Image getImage() {
        return img;
    }

    public void start(){

        img = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
        int[] pixels = ((DataBufferInt)img.getRaster().getDataBuffer()).getData();
        boolean running=true;
        while(running){
            BufferStrategy bs=frame.getBufferStrategy();
            if(bs==null){
                frame.createBufferStrategy(4);
                return;
            }
            for (int i = 0; i < WIDTH * HEIGHT; i++)
                pixels[i] = 0;

            Graphics g= bs.getDrawGraphics();
            g.drawImage(img, 0, 0, WIDTH, HEIGHT, null);
            g.dispose();
            bs.show();

        }
    }
} 
```

## 一般提示

*   请对代码块使用一致且合乎逻辑的缩进。
*   请了解类、方法和属性名称的常见[Java 命名约定](http://java.sun.com/docs/books/jls/second_edition/html/names.doc.html#73307)（特别是名称的大小写）并始终如一地使用它。
*   给测试类起一个有意义的名字，例如`TestImageDraw`。
*   在 EDT 上创建和更新 Swing GUI。
*   不要无故混用 Swing 和 AWT 组件。

# c# - 如何在 MS Solver Foundation 中使用 If 运算符？

> ID：11163928
> 
> 赞同：1
> 
> 时间：2012-06-22T20:50:29.313
> 
> 标签：c#, ms-solver-foundation

这段代码有什么问题？：

```
SolverContext sc = SolverContext.GetContext();
Model m = sc.CreateModel();

m.AddDecision(new Decision(Domain.IntegerNonnegative, "a"));
m.AddDecision(new Decision(Domain.IntegerNonnegative, "b"));

m.AddConstraint(null, "a < 2");
m.AddConstraint(null, "b == If[a == 2, 2, 1]");

var sol = sc.Solve();
Console.WriteLine(sol.GetReport()); 
```

求解器冻结并且不给出任何结果。我正在和`If`操作员一起玩，试图看看它是如何工作的，但似乎没有达到我的预期。不确定我是否以正确的方式使用它（我想说，如果`a`等于，`2`则`b`必须等于`2`，否则`1`）。

我也试过

```
m.AddConstraint(null, "If[a == 2, b == 2, b == 1]"); 
```

结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:51:30.137

似乎应用于此问题的求解器受到`Decision`域范围的阻碍。如果将域限制为例如整数范围 [0, 10]：

```
m.AddDecision(new Decision(Domain.IntegerRange(0, 10), "a"));
m.AddDecision(new Decision(Domain.IntegerRange(0, 10), "b")); 
```

该问题的可行解决方案很快就产生了。换句话说，约束`b == If[a == 2, 2, 1]`是完全有效的。

`a < 2`顺便说一句，您在第一个约束中要求它，而在第二个约束中测试条件，这有点奇怪`a == 2`。但我假设你现在处于实验阶段......

# java - 使用 Java 抓取 JSON 内容

> ID：11163933
> 
> 赞同：0
> 
> 时间：2012-06-22T20:50:40.440
> 
> 标签：java, android, json

这是我在 PHP 中的 json_encode 示例：

```
print(json_encode($row)); 
```

导致 {"AverageRating":"4.3"} 这很好。

但是在 Java 中，我似乎无法抓住这个 4.3 的值。这是（对于一个 Android 项目）我编辑了不相关的数据。

```
 public class Rate extends ListActivity {

   JSONArray jArray;
   String result = null;
   InputStream is = null;
   StringBuilder sb = null;
   String Item, Ratings, Review, starAvg;
   RatingBar ratingsBar;
   ArrayList<NameValuePair> param;

  public void onCreate(Bundle savedInstanceState) {

      starAvg = "0"; // Sets to 0 in case there are no ratings yet.
      new starRatingTask().execute();
      ratingsBar = (RatingBar) findViewById(R.id.theRatingBar);

  class starRatingTask extends AsyncTask<String, String, Void> {

    InputStream is = null;
    String result = "";

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "http://www.---.com/---/average_stars.php";

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("item", Item));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {

            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;

    }

    protected void onPostExecute(Void v) {

        String starAvgTwo = null;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                starAvg = json_data.getString("AverageRating");

                   starAvgTwo = starAvg;

            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No Star Ratings!",
                    Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

                Toast.makeText(getBaseContext(), starAvgTwo,
                        Toast.LENGTH_LONG).show();

        ratingsBar.setRating(Float.valueOf(starAvg));

    }
} 
```

第二个吐司产生一个空白（我假设一个“” - 空字符串？）。如果我将 toast 变量改回 starAvg，那么它会显示“0”。

如何检索 4.3 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:15:22.913

正如我们在原始问题的评论中所讨论的那样，PHP 以单个 JSONObject 而不是数组的形式发送。在当前状态下需要解析为 JSONObject；但是，如果您开始发送一个值对象数组，那么您将使用 JSONArray 来解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:11:01.370

我认为您的 JSON 不包含数组。所以就这样做：

```
JSONObject jsonObject = new JSONObject(result); //to convert string to be a JSON object
String averageRating = jsonObject.getString("AverageRating"); //get the value of AverageRating variable 
```

并尝试为averageRating 敬酒。

以及如何从 JSON 对象中获取数组？

如果你有 JSON：

```
{"employees": [
    { "firstName":"John" , "lastName":"Doe" }, 
    { "firstName":"Anna" , "lastName":"Smith" }, 
    { "firstName":"Peter" , "lastName":"Jones" }]
} 
```

然后使用此代码

```
JSONArray jsonArray = new JSONArray(result);
for (int i = 0; i < jsonArray.length(); i++) {
    JSONObject jsonObject = jsonArray.getJSONObject(i);
    Log.i(Rate.class.getName(), jsonObject.getString("firstName"));
} 
```

该代码将产生

> 约翰·安娜·彼得

在您的 LogCat 中

# .net - 在 NHibernate 中创建自定义标准？

> ID：11163935
> 
> 赞同：1
> 
> 时间：2012-06-22T20:50:57.020
> 
> 标签：.net, nhibernate, nhibernate-criteria

当谈到 NHibernate 时，我仍然有点 n00b。假设我有以下内容：

```
var myCriteria = this.Session.CreateCriteria(typeof(SomeModel))
                         .Add(Restrictions.Eq("SomeProperty", someValue); 
```

然后，假设我想以可重用的方式添加标准。意思是，我想制定一个自定义标准。我在网上看到的关于这方面的信息非常非常少。具体来说，我想打开以下内容：

```
var myCriteria = this.Session.CreateCriteria(typeof(SomeModel))
                .Add(Restrictions.Eq("SomeProperty", someValue)
                .CreateAlias("SomeClass", "alias", JoinType.LeftOuterJoin)
                .Add(Restrictions.Eq("alias.SomeOtherProperty", someOtherValue)); 
```

进入以下：

```
var myCriteria = this.Session.CreateCriteria(typeof(SomeModel))
                             .Add(Restrictions.Eq("SomeProperty", someValue)
                             .Add(this.GetAliasCriterion()); 
```

从而提取

```
 .CreateAlias("SomeClass", "alias", JoinType.LeftOuterJoin)
             .Add(Restrictions.Eq("alias.SomeOtherProperty", someOtherValue)); 
```

成一种方法。

这可能吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:14:44.740

这是我通常使用的模式：

假设我有一个添加特定`Restrictions`条件的过滤器。（您甚至可以将其设为扩展类）

```
public class DeletedFlagFilter{

  public DetachedCriteria AddFilter(DetachedCriteria criteria)
  {
        criteria.AddRestrictions("Deleted", true);
        return criteria;
  }
} 
```

然后，上述类 say( `FindDeletedUserClass`) 的调用者将使用上面的帮助类添加所有必要的限制来定义**删除的用户**，如下所示：

```
 public class FindDeletedUserClass{

      public DetachedCriteria BuildCriteria(){

             var deletedUserCriteria = DetachedCriteria.For<User>();          

             var helper = new DeletedFlagFilter();

             helper.AddFilter(deletedUserCriteria);

             return deletedUserCriteria;

      }
 } 
```

然后，您实际访问 NHibernate 会话的分离服务层可以将 DetachedCriteria 转换为连接到会话的标准并执行相同的操作。

```
 var myDetachedCriteria = DetachedCriteria.For<SomeModel>();

  var sessionCriteria = myDetachedCriteria.GetExecutableCriteria(Session); 
```

使用上面的模式，您将在类中封装*Deleted*功能。`DeletedFlagFilter`将来，如果*Deleted*的定义发生更改，则唯一的更改将发生在`DeletedFlagFilter`类上

**编辑**：有很好的教程，你可以[在这里阅读](http://ayende.com/blog/1900/complex-searching-querying-with-nhibernate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:14:53.863

您可以使用扩展方法来做到这一点。不过我会小心，通常您会希望查看查询正在执行的所有别名（连接）。

```
public static class CriteriaExtensions
{
    public static ICriteria AddSomeClassAliasRestriction(this ICriteria c, object value)
    {
        return c.CreateAlias("SomeClass", "alias", JoinType.LeftOuterJoin)
            .Add(Restrictions.Eq("alias.SomeOtherProperty", value));
    }
} 
```

并像...一样使用它

```
var myCriteria = this.Session.CreateCriteria(typeof(SomeModel))
.Add(Restrictions.Eq("SomeProperty", someValue)
.AddSomeClassAliasRestriction(someOtherValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:29:22.297

就个人而言，我更喜欢使用 Linq to NHibernate 而不是标准。它已经包含在最新版本的 NHibernate 中，只需将“ `using NHibernate.Linq`”添加到您的 cs 文件中，因为所有 L2H 方法都是扩展方法。

如果我想使用 L2H 使谓词/标准可重用，它看起来像这样：

```
public partial class Person 
{
    //yes, this is kind of ugly, but if I have a complicated predicate that 
    //I want to reuse, I'll make a static method on the entity itself.
    public static Expression<Func<Person, bool>> HasPrimaryRole(string roleCode)
    {
        return p => p.Roles.Any(r => r.RoleCode == roleCode && r.IsPrimary);
    }
} 
```

用法如下所示：

```
var session = GetSession();
var midwestSalesManagers = session.Query<Person>()
    .Where(p => p.Region == "Midwest").Where(Person.HasPrimaryRole("RSM")); 
```

或者你可以这样做：

```
var midwestSalesManagers = session.Query<Person>()
    .Where(Expression.And(p => p.Region == "Midwest", Person.HasPrimaryRole("RSM"))); 
```

我还没有完全测试所有这些，但我希望你明白我的意思。我认为它非常易读，并且避免使用魔术字符串，因此它对重构很友好。

# visual-studio-2010 - Word 崩溃后恢复 VSTO 控件

> ID：11163937
> 
> 赞同：0
> 
> 时间：2012-06-22T20:51:08.800
> 
> 标签：visual-studio-2010, vsto

当我在 Visual Studio 中向 VSTO MS Word 模板添加控件时，用作表单编辑器的 Word 副本崩溃，导致 Visual Studio 崩溃。当我重新启动 Visual Studio 时，我发现虽然我在过去几个小时中插入和命名的控件都保存在 ThisDocument.Designer.vb 文件中，但相关的 .dotx 文件显然没有自动保存，因为没有打开任何新控件它。

有没有办法将控件从设计器恢复到 .dotx 文件；还是我不得不重做所有丢失的工作？

如果重要的话，我正在为 Office 2007 使用 VSTO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:21:54.997

如果您至少构建了一次应用程序，则可以复制在您的 bin 文件夹中创建的 .dotx 文件。

# r - R：write.table的格式输出

> ID：11163938
> 
> 赞同：6
> 
> 时间：2012-06-22T20:51:08.657
> 
> 标签：r

是否可以使用 write.table 格式化输出？

我可以使用制表符左对齐列`sep = '\t'`，并且可以使用两个制表符增加列之间的间距`sep = '\t\t'`。

理想情况下，我希望能够右对齐列并使用比 '\t' 和 '\t\t' 提供的中间量的间距。使用类似`sep = '\t '`完全破坏列对齐的东西。

我必须证明从使用许多不同表格格式的许多不同文件中提取的大量数据。将 R 的输出文本文件的列间距与原始 pdf 文档中的列间距紧密匹配将大大提高校对的速度和准确性。

```
# example data to write to text file

aa = matrix(c(1000,110,10,1, 
              0,2000,20,2, 
              30,300,3000,30000), nrow=3, byrow=TRUE,
         dimnames = list(NULL, c("C1", "C2", "C3","C4")))
aa

# left align columns using a tab

write.table(aa,file="c:/users/mark w miller/simple r programs/formatted_tablea.txt", na = 'NA', sep = '\t',
row.names = F, col.names = F)

#   1000    110 10  1
#   0   2000    20  2
#   30  300 3000    30000

# increase spacing between columns with two tabs

write.table(aa,file="c:/users/mark w miller/simple r programs/formatted_tableb.txt", na = 'NA', sep = '\t\t',
row.names = F, col.names = F)

#   1000        110     10      1
#   0       2000        20      2
#   30      300     3000        30000

# Here is an example of the desired right-aligned output 
# format with an intermediate amount of spacing 
# (3 spaces vs the 1 or 7 spaces used above):

#   1000    110     10       1
#      0   2000     20       2
#     30    300   3000   30000

# Maybe use cat somehow? 

cat(file="c:/users/mark w miller/simple r programs/formatted_tablec.txt", aa, sep=c(' ', ' ', '\n')) 
```

还是我必须写入 csv 文件并使用 Excel 打开输出文件？我宁愿避免使用 Excel。或者也许我必须使用 LaTex 创建所需格式的输出数据？

抱歉这周的所有问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T21:01:57.317

看看`capture.output`和 print.gap 参数的组合`print`是否足够：

```
capture.output( print(aa, print.gap=3), file="capture.txt")

         C1     C2     C3      C4
[1,]   1000    110     10       1
[2,]      0   2000     20       2
[3,]     30    300   3000   30000 
```

另一种策略是使用带有`sep=" "`（3 个空格）参数的 write.matrix。您将需要忽略无法正确显示的列标题：

```
require(MASS)
write.matrix(aa, file="capturemat.txt", sep="   ")

C1   C2   C3   C4
 1000     110      10       1
    0    2000      20       2
   30     300    3000   30000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-27T18:32:11.893

`write.fwf`**gdata**库中的函数对此非常有用。

# java - 了解 Java 图形

> ID：11163941
> 
> 赞同：1
> 
> 时间：2012-06-22T20:51:19.600
> 
> 标签：java, graphics, groovy, awt, basic

我正在尝试用 Java 做一些非常简单和粗糙的图形工作（故意粗糙和简单，因为它模拟了 1980/1981 年的计算环境）。

Java（实际上是 Groovy）代码运行一些非常简单的 BASIC：

```
10 REM Testing Plotting
20 FOR X = 0 TO 31
30 LET Y = SIN(X/10)
40 PLOT (X, 11 - Y * 11)
50 NEXT X 
```

Plot 在 Java/Groovy 中提供，如下所示：

```
grafix = textArea.getGraphics()

    ....
def plot(def x, def y)
{
    grafix.fillRect(x * 20 as Integer, y * 20 as Integer, 20, 20)
} 
```

现在代码以一种方式工作 - 我在屏幕上短暂地看到一个正弦曲线闪烁，但它几乎立即消失（大概在文本区域的下一次重绘时）。我怎样才能让图形留在那里 - 我能想到的唯一方法是将绘图（和取消绘图）保存到一个列表中，然后让每个油漆“播放” - 但这似乎是一个非常极端的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:58:41.930

```
textArea.getGraphics() 
```

不要那样做。图形实例是瞬时的。而是在被告知这样做时（通过覆盖`paintComponent(Graphics)`）绘制组件。

# html - div 智能宽度

> ID：11163944
> 
> 赞同：3
> 
> 时间：2012-06-22T20:51:42.293
> 
> 标签：html, css

[见小提琴](http://jsfiddle.net/mnbayazit/2cTga/)

## html

```
<div class="e" style="left:5px;top:5px;">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbb</div>

<div class="e" style="left:5px;top:100px;">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div>​ 
```

## css

```
.e {
    font-size: 10px;
    font-family: arial;
    background-color: yellow;
    position: absolute;
    max-width: 300px;
} 
```

您会注意到第二个 div 完全适合内容的大小，但在第一个 div 上，a 和 b 的右侧有一堆空白空间。这是因为 div 达到了 300px 的最大宽度，然后将 b 包裹到第二行。包装很好，但我希望 div 然后缩小到 a 的宽度，这样右边就没有空白了。

有可能让它做到这一点吗？

在 Chrome 和 FF 中测试。​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:13:40.537

您可能会避免处理宽度，因为我的理解是您正在寻找一种以令人满意的方式打破文本的方法。

使用`word-break: break-all`, 在文本碰到容器边缘时换行。

**例子：**

*   [jsFiddle 上的演示](http://jsfiddle.net/5EVyK/)

**参考：**

*   [`word-break`Mozilla 开发者网络上的 CSS3属性](https://developer.mozilla.org/en/CSS/word-break)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:39:19.133

要将 div（或任何元素）缩小到其文本内容的大小，您可以使用 JavaScript 获取`range`包含其内容的 a 并使用以下方法获取范围的大小`range.getBoundingClientRect()`：

```
function sizeElementToContents(el) {
    var range = document.createRange();
    range.selectNodeContents(el);
    var textRect = range.getBoundingClientRect();
    el.style.width = textRect.width + "px";
} 
```

但是，当然，这只适用于现代浏览器。IE8 和 IE7 有不同的方法来处理范围。实际上，IE7 会自动`max-width`按照您想要的方式处理，但是当我们的 IE8 代码运行以重新调整 IE7 上的 div 大小时，它会将 div 缩小为 0。为避免编写特定浏览器版本的代码，此代码在 IE7 上运行并且IE8，但包含一些额外的逻辑，以便它适用于两个浏览器版本：

```
function sizeElementToContents(el) {
    var range, width;
    if (document.createRange) {
        range = document.createRange();
        range.selectNodeContents(el);
        width = range.getBoundingClientRect().width;
    }
    else {
        range = document.body.createTextRange();
        range.moveToElementText(el);
        range.moveStart("character", 1);
        width = range.boundingWidth;
        var height = range.boundingHeight;
        range.collapse();
        range.moveEnd("character", 1);
        if (range.boundingHeight == height) {
            return; // text doesn't wrap, so don't resize
        }
    }
    el.style.width = width + "px";
} 
```

**工作演示：http:** [//jsfiddle.net/gilly3/HZRFb/](http://jsfiddle.net/gilly3/HZRFb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T21:31:10.247

从[Biziclop](https://stackoverflow.com/users/260007/biziclop)的解决方案分叉：

```
.e {
    font-size: 10px;
    font-family: arial;
    background-color: yellow;
    position: absolute;
    max-width: 300px;
    margin-right:100%;
} 
```

链接到[小提琴](http://jsfiddle.net/2cTga/3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:09:44.203

不要问我为什么它会起作用，它可能明天就坏了，但是添加一些极端的margin-right似乎可以解决问题：

```
.e {
    margin-right: 9999px;
} 
```

见[http://jsfiddle.net/2cTga/1/](http://jsfiddle.net/2cTga/1/)

# c# - 如何在不知道要创建多少的情况下创建会话变量？

> ID：11163946
> 
> 赞同：1
> 
> 时间：2012-06-22T20:51:46.823
> 
> 标签：c#, sql-server, visual-studio-2010, gridview, checkbox

首先，我使用的是 Visual Studio 2010 (Visual C#) 和 ASP.NET。

我正在使用 GridView 来显示我公司当前的空缺职位。我有一列复选框，申请人可以在其中检查他们想要申请的职位。为了消除重复数据，我在三个主表（POSITION、APPLICANT 和 APPLICATION）之间创建了一个链接表。它仅由每个表中的主键组成，因此如果一个人申请 3 个职位，我们将不会筛选 3 个完整的申请。

我需要选择他们选择的位置的 PositionID，并将它们存储在会话变量中以备后用。

我的问题是，在不知道他们检查了多少的情况下，我该怎么做？我不想只创建一堆不会使用的不必要的变量。我想我将不得不使用一个 foreach 循环，但在循环中，我不知道如何告诉它创建一个新的会话变量并将 ID 存储在其中。

我当然希望这个问题有意义。如果您需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:01:19.973

您可以创建一个`List<int>`或任何数据类型 PositionID 并将其存储在会话变量中。

事实上，我会在控件或页面中创建一个属性

```
public List<int> SelectedPositionIDList
{
   get
   {
        if(Session["SelectedPositions"] != null)
          return Session["SelectedPositions"] as List<int>;
        return new List<int>();
   }
   set
   {
      Session["SelectedPositions"] = value;
   }
} 
```

您可以遍历位置 ID 列表，

```
foreach(int positionId in SelectedPositionIdList)
{
   //Do something.
} 
```

当然，当他们想要保存或执行一些操作时，您需要从 gridview 中获取 id。您可以通过根据您的实现循环遍历 gridview 行来做到这一点。像下面的东西。

```
List<int> positions = new List<int>();

foreach(GridviewRow row in gdPositions)
{
    CheckBox cb = row.FindControl("checkbox") as CheckBox;
    if(cb != null && cb.Checked)
      positions.Add(/*find position id from row here*/);
}

if(positions.Count > 0)
    Session["SelectedPositionIdList"] = positions; 
```

# javascript - 是否可以使用 JavaScript 来破坏页面的 HTML？

> ID：11163954
> 
> 赞同：2
> 
> 时间：2012-06-22T20:52:29.780
> 
> 标签：javascript, html

我在工作中被问到是否可以有意或无意地编写将从 HTML 文档中删除特定字符从而破坏 HTML 的 JavaScript。一个例子是添加一些 JavaScript 来删除页面中的 < 符号。我试过在线搜索，我知道 JavaScript 可以替换字符串，但我对该语言的了解可以忽略不计。

我被要求研究它作为一种希望解决为什么我工作的网站需要控制谁可以向页面添加定制功能的方法。我希望这是不可能的，但我会感激你的内心平静！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:54:13.397

是的，事实上你也可以用 javascript 做一些更阴险的事情。

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:07:16.207

任何客户端/浏览器都可以随时操纵页面的查看方式，例如在 chrome 中按 F12，然后您可以在 html 中编写任何您想要的内容，您将立即看到更改。但这不用担心...

可怕的部分是当站点上的 JavaScript 与后端服务器通信并为其提供一些输入参数时，这些输入参数在以某种方式处理之前没有在服务器端进行清理。如果后端使用他们几乎总是使用的数据库，那么 SQL 注入也可能以这种方式发生，依此类推......

可以通过两种方式操作网页，即**非持久性**或**持久性。**

**[none-persistent]：**这样你可以操纵你对网页的访问，但这不会影响其他用户自己，但是一旦你进入，你可能会造成伤害。

**[persistent]：**这种方式服务器端代码将永久受到注入代码的影响，并且很可能影响其他用户。

这里的关键是始终在处理任何内容之前清理后端服务器使用的输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:54:57.467

是的，这是可能的。最简单的例子是

```
var body = document.getElemetsByTagName('body')[0];
body.innerHTML = 'destroyed'; 
```

这将删除整个页面并只写“destroyed”。回到你的例子：以同样的方式可以替换`<`：

```
var body = document.getElemetsByTagName('body')[0];
body.innerHTML = body.innerHTML.replace('<','some other character'); 
```

这种“极端”情况不太可能偶然发生，但绝对有可能（特别是对于没有经验的 javascript 开发人员）破坏通常不应该受 javascript 影响的网站上的东西。

请注意，这只会弄乱客户端浏览器中显示的页面，并且不会以任何方式更改服务器上的 html 文件。只需找到并删除/修复“坏”的代码行，一切就又好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T21:00:25.243

你可以：

1.  覆盖页面，
2.  弄乱body标签的innerHTML（几乎一样），
3.  插入非法元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T20:55:14.490

您绝对可以编写一些 javascript 函数来修改文件的内容。如果该文件是您的 HTML 页面，那么可以确定。

但是，如果您想防止这种情况发生，您可以将该 HTML 文件的权限设置为只读。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-22T20:54:21.087

是的。至少，您可以使用它来编写 CSS 来设置任何元素、类、ID……甚至是要显示的主体：无；

# javascript - 动态添加元素时刷新html

> ID：11163955
> 
> 赞同：1
> 
> 时间：2012-06-22T20:52:33.140
> 
> 标签：javascript, html, dynamic

我有一些 javascript 可以动态地将元素添加到我的页面。问题是在任何给定的运行中都有数百个元素要创建，虽然加载单个元素需要不到一秒的时间，但整个页面可能需要 30 秒或更长时间才能完全加载，然后一切都突然出现在页。我的问题是：如何更新页面，以便动态创建的元素在创建后立即显示？

```
 var newDiv = document.createElement('div');

       for (var val in array) {
            var newCanvas = document.createElement('div');
            newCanvas.className = "graph";
            newDiv.appendChild(newCanvas);

            drawGraph(val, newCanvas);  //adds a bunch of elements to newCanvas
            addTitle(val, newCanvas);          //adds another
            addDescription(val, newCanvas);    //adds another
       }

       document.body.appendChild(newDiv); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:31:03.080

一次将数百个元素动态添加到 DOM 是非常低效的。每次向 DOM 添加单个可见元素时，都会强制对整个 DOM 树进行重排，然后重绘到屏幕上。

您应该使用 JavaScript 创建一个 DOM 片段（例如 div 元素），您可以在其中添加新的 DOM 元素。一旦你拥有了所有的新元素，你可以通过将该片段的子元素转移到活动 DOM 树中的包含 DOM 元素来批量添加它们。

以下是创建具有一组指定属性和可选子元素的 DOM 元素的函数示例。在将元素及其子元素分配给变量后`myDiv`，该元素将附加到文档的正文中。

```
function dom(tag, attributes) {
    var el, key, children, child;
    el = document.createElement(tag);
    for (key in attributes) {
        if (attributes.hasOwnProperty(key)) {
            el[key] = attributes[key];
        }
    }
    for (i = 2, l = arguments.length; i < l; i++) {
        child = arguments[i];
        if (child.nodeType == 1 || child.nodeType == 3) {
            el.appendChild(child);
        }
    }
    return el;
}

var myDiv = dom(
    'div',
    { id: 'myDiv', className: 'container' },
    dom(
        'p',
        { className: 'firstParagraph' },
        document.createTextNode('If you enjoy this movie, '),
        dom(
            'a',
            { href: 'http://www.amazon.com', title: 'Buy this movie at Amazon.com!' },
            document.createTextNode('buy it at Amazon.com')
        ),
        document.createTextNode('!')
    ),
    dom(
        'p',
        {},
        document.createTextNode('The quick brown fox jumps over the lazy dog.')
    )
);

document.body.appendChild(myDiv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:58:31.860

将所有的元素加载在 DOM 构建完成之后。

即使用

```
$(document).ready(function(){
     // induvidual elements loadings
}); 
```

$ 符号表示[Jquery](http://jquery.com/)。要使用 jquery，请添加脚本块。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

这样，基本结构将完全加载，各个部分可能需要自己的时间。

# c# - 从 C# 代码与 exe 对话

> ID：11163962
> 
> 赞同：0
> 
> 时间：2012-06-22T20:53:05.950
> 
> 标签：c#, .net

> **可能重复：**
> [从 C# 启动应用程序 (.EXE)？](https://stackoverflow.com/questions/240171/launching-a-application-exe-from-c)

我正在尝试从我的 C# 代码中将 exe 作为进程运行。该 exe 是一个安全的，并在执行命令之前要求输入密码。我无法以任何方式将密码传递给 exe。当我尝试编写标准输入时，它不接受它。有没有人遇到过这样的问题。如果是这样，请分享您针对该场景的解决方法。提前致谢

我正在编辑帖子以使其清楚一点。我试图运行的 exe 是命令行 exe。它是 mcafee 提供的白名单工具。我想要做的是将密码设置为exe，以便我可以确保它的安全。命令是这样的

管理员密码

一旦我执行命令，它会询问我要分配的密码

新密码：

一旦我输入密码，它会要求我重新输入密码

重新输入密码：

一旦设置了密码，随后当我在 sadmin 上运行其他命令时，它会提示我输入密码

sadmin 启用密码：

密码不是命令的参数。运行命令后将其传递给提示符。所以我无法通过添加密码作为命令的参数来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:59:42.810

您是否尝试过使用 Process.StartInfo.Arguments？像这样的东西：

```
Process MyProcess = new Process();
MyProcess.StartInfo.FileName = "PathToExe";
MyProcess.StartInfo.Arguments = "YourArgsHere";
MyProcess.StartInfo.WorkingDirectory = "DesiredWorkingDir(Optional)";
MyProcess.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:57:07.030

你可以试试

```
Process example= new Process();

            example.StartInfo.FileName   = "example.exe";
            example.StartInfo.Arguments = "arg";

            example.Start(); 
```

# sql-server - 如何在分发数据库中查找发布者和订阅者的实例名称

> ID：11163964
> 
> 赞同：1
> 
> 时间：2012-06-22T20:53:14.303
> 
> 标签：sql-server, replication

我正在使用 RedGate SQL Compare 编写一个程序，该程序在事务复制拓扑中的节点之间同步数据。如果有超过 2 个节点，我需要一种自动创建 SQL 实例/数据库名称配对的方法，以便我可以同步树中的所有链接。

我相信这些信息存储在分发数据库中。我找到了包含发布数据库和订阅数据库 (MSsubscriptions) 名称的表。

但是，虽然 publisher_id 和subscriber_id 被列为字段，但我看不出如何使用它来获取 SQL 实例的名称。

分发数据库中的 MSsubscriber_info 包含发布者的 SQL 实例名称，但没有 ID 列。

有谁知道我如何获得与出版物数据库匹配的出版商？我将不胜感激任何人可以提供的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:04:41.757

您要查找的信息在`master.sys.servers`

因此，您将从表中的开头加入 publisher_id`MSsubscriptions`和`server_id`subscriber_id `servers`。这对您来说应该是一个很好的起点（假设 SQL Server 2005 或更高版本）

```
select distinct pub.name, sub.name
    from master.sys.servers pub
        join distribution.dbo.MSsubscriptions s
            on s.publisher_id = pub.server_id
        join master.sys.servers sub
            on s.subscriber_id = sub.server_id; 
```

# java - 如何为几个Java枚举添加常用方法？（抽象类祖先？）

> ID：11163968
> 
> 赞同：13
> 
> 时间：2012-06-22T20:53:36.573
> 
> 标签：java, oop, inheritance, enums

我有一些这样的 Java 枚举

```
public enum Aggregation
{
    MORTGAGE( "Mortgage" ),
    POOLS( "Pools" ),
    PORTFOLIO( "Portfolio" );

    private Aggregation( final String name )
    {
        m_Name = name;
    }
    private String m_Name;
    static Map< String, Aggregation > c_LOOKUP =
        new HashMap< String, Aggregation >();
    static {
        for (Aggregation agg:values()){
            c_LOOKUP.put(agg.m_Name,agg);
        }
    }

    public Aggregation lookup(String name){
        return c_LOOKUP.get( name );
    }

    @Override
    public String toString()
    {
        return m_Name;
    }
}

public enum Interval
{
    MONTHLY( "Monthly" ),
    QUARTLY( "Quartly" ),
    SEMIANNUALLY( "SemiAnnually" ),
    ANNUALLY("Annually");

    private Interval( final String name )
    {
        m_Name = name;
    }
    private String m_Name;
    static Map< String, Interval > c_LOOKUP =
        new HashMap< String, Interval >();
    static {
        for (Interval agg:values()){
            c_LOOKUP.put(agg.m_Name,agg);
        }
    }

    public Interval lookup(String name){
        return c_LOOKUP.get( name );
    }

    @Override
    public String toString()
    {
        return m_Name;
    }
} 
```

如您所见，这里有很多代码重复。如果有一种方法可以引入抽象的共同祖先类之类的东西，那就太好了。但是java枚举不能与生俱来。最好的方法是什么？谢谢。

* * *

编辑：我制定了一个类似于 ŁukaszBachman 和 missingfacktor 的版本

```
static public enum Aggregation
{
    MORTGAGE( "Mortgage" ),
    POOLS( "Pools" ),
    PORTFOLIO( "Portfolio" );

    private final String m_Name;

    final static private ReverseDictionary< Aggregation > c_DICTIONARY =
        new  ReverseDictionary< Aggregation >( Aggregation.class );

    static public Aggregation lookup( final String name )
    {
        return c_DICTIONARY.lookup( name );
    }

    private Aggregation( final String name )
    {
        m_Name = name;
    }

    @Override
    public String toString()
    {
        return m_Name;
    }
}

static public enum Interval
{
    MONTHLY( "Monthly" ),
    QUARTLY( "Quartly" ),
    SEMIANNUALLY( "SemiAnnually" ),
    ANNUALLY( "Annually" );

    private final String m_Name;
    final static private ReverseDictionary< Interval > c_DICTIONARY =
        new ReverseDictionary< Interval >( Interval.class );

    static public Interval lookup( final String name )
    {
        return c_DICTIONARY.lookup( name );
    }

    private Interval( final String name )
    {
        m_Name = name;
    }

    @Override
    public String toString()
    {
        return m_Name;
    }
}

static public class ReverseDictionary< E extends Enum< E >>
{
    Map< String, E > c_LOOKUP = new HashMap< String, E >();

    public ReverseDictionary( final Class< E > enumClass )
    {
        for( final E agg : EnumSet.allOf( enumClass ) )
        {
            c_LOOKUP.put( agg.toString(), agg );
        }
    }

    public E lookup( final String name )
    {
        return c_LOOKUP.get( name );
    }

} 
```

我看到了一些道理。但是，它仍然不是很令人满意。

1.  `lookup(String)`由于返回类型不同，很难定义接口
2.  我可以理解这`lookup(String)`并不是真正的重复，而是一种规范，但我仍然觉得 m_Name 字段和 toString() 逻辑有点多余。我们确实指定了一类枚举，在我看来，这似乎是**“is-a”**关系。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T21:06:36.647

**为了接口，**优先考虑**组合而不是继承**和编程。由于枚举是类（不是常规的，但仍然是类），您可以创建一些包含共享逻辑的字段，让枚举实现您的接口并将实现委托给该字段。

 **相关代码片段：

**共享界面**

```
public interface MyInterface {

    void someMethod();

} 
```

**逻辑实现**

```
public class MyInterfaceImpl implements MyInterface {

    public void someMethod() {
        System.out.println("Do smth...");
    }

} 
```

**第一个枚举**

```
public enum EnumA implements MyInterface {
    ;

    private MyInterface impl = new MyInterfaceImpl();

    public void someMethod() {
        impl.someMethod();
    }

} 
```

**第二个枚举**

```
public enum EnumB implements MyInterface {
    ;

    private MyInterface impl = new MyInterfaceImpl();

    public void someMethod() {
        impl.someMethod();
    }

} 
```

请注意，这`EnumA`并不是`EnumB`真正的代码重复，因为那是简单的委托（在我看来是有效的）。另请注意，使用界面将所有内容很好地粘合在一起。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T21:24:23.963

以下是如何解决组合和委派问题。（对于手头的案例，我认为这是您可以使用 Java 获得的[DRY est。）](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

```
import java.util.*;

interface HasName {
  public String getName();
}

class EnumEnhancer<E extends Enum<E> & HasName> {
  private Map<String, E> lookup;

  public EnumEnhancer(E... values) {
    lookup = new HashMap<String, E>();
    for (E e : values) {
      lookup.put(e.getName(), e);
    }
  }

  public E lookup(String name) {
    return lookup.get(name);
  }

  public String toString(E e) {
    return e.getName();
  }
}

enum Color implements HasName { // This is interface inheritance.
  RED("red"), GREEN("green"), BLUE("blue");

  // This is composition. 
  private static final EnumEnhancer<Color> enhancer = 
    new EnumEnhancer<Color>(values());

  private String name;

  private Color(String name) {
    this.name = name;
  }

  public String getName() {
    return name;
  }

  // This is delegation.
  public String toString() {
    return enhancer.toString(this);
  }

  // This too is delegation.     
  public static Color lookup(String name) {
    return enhancer.lookup(name);
  }
}

class Main {
  public static void main(String[] args) {
    System.out.println(Color.lookup("blue")); // prints blue
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-22T08:38:21.930

您可以使用 Java 8 默认接口方法来实现这一点：

```
public class test
{
    public static void main (String[] arguments) throws Exception
    {
        X.A.foo ();
        Y.B.foo ();
    }
}

interface MyEnumInterface
{
    String getCommonMessage ();
    String name ();

    default void foo ()
    {
        System.out.println (getCommonMessage () + ", named " + name ());
    }
}

enum X implements MyEnumInterface
{
    A, B;

    @Override
    public String getCommonMessage ()
    {
        return "I'm an X";
    }
}

enum Y implements MyEnumInterface
{
    A, B;

    @Override
    public String getCommonMessage ()
    {
        return "I'm an Y";
    }
} 
```

请注意，接口不知道它将由枚举实现，因此它不能使用默认方法中的方法`Enum`。`this`但是，您可以在接口本身中包含这些方法（就像我对 所做的那样`name()`），然后正常使用它们。`Enum`当您声明枚举时，它们将为您“实施” 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:56:17.180

一个包含常用函数的静态助手类怎么样，从你的枚举方法中调用它们。

关于您对 toString() 的评论。

```
public enum MyEnum{

ONE("one");

public MyEnum(String m_Name){
  this.m_Name = m_Name;
}
public String toString(){
  return m_Name;
}
String m_Name;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-22T09:00:50.777

只需在 First class 中定义您的常见行为：

```
public class First {
 public String name() {
  return "my name";
 }
 ...
} 
```

而不是在每个类中扩展它：

```
public SecondClass extends First {
 ...
} 
```**

# c# - Azure - 多个工作角色 - 无法存储作业：无法存储作业：'job6'，因为具有此标识的已存在

> ID：11163977
> 
> 赞同：2
> 
> 时间：2012-06-22T20:54:18.553
> 
> 标签：c#, azure, quartz.net, jobs

我正在使用 Quartz.Net 调度程序来安排我的工作。我正在使用 ADOJOBSTORE 来存储所有这些值。

无法存储作业：无法存储作业：'job6'，因为此标识已经存在当我尝试运行它时抛出上述错误。任何想法？

```
 ILog log = LogManager.GetLogger(typeof(CronTrigger));

        log.Info("------- Initializing -------------------");

        // First we must get a reference to a scheduler
        ISchedulerFactory sf = new StdSchedulerFactory();
        IScheduler sched = sf.GetScheduler();

        log.Info("------- Initialization Complete --------");

        log.Info("------- Scheduling Jobs ----------------");

        // jobs can be scheduled before sched.start() has been called

        // job 6 will run every 30 seconds but only on Weekdays (Monday through Friday)
        IJobDetail job = JobBuilder.Create<SimpleJob>()
            .WithIdentity("job6", "group1")
            .Build();

        ICronTrigger trigger = (ICronTrigger)TriggerBuilder.Create()
                                     .WithIdentity("trigger6", "group1")
                                     .WithCronSchedule("0,30 * * ? * MON-FRI")
                                     .Build();

        DateTimeOffset ft = sched.ScheduleJob(job, trigger);
        log.Info(job.Key + " has been scheduled to run at: " + ft
                 + " and repeat based on expression: "
                 + trigger.CronExpressionString);

        log.Info("------- Starting Scheduler ----------------");

        // All of the jobs have been added to the scheduler, but none of the
        // jobs
        // will run until the scheduler has been started
        sched.Start();

        log.Info("------- Started Scheduler -----------------");

        //log.Info("------- Waiting five minutes... ------------");
        //try
        //{
        //    // wait five minutes to show jobs
        //    Thread.Sleep(300 * 1000);
        //    // executing...
        //}
        //catch (ThreadInterruptedException)
        //{
        //}

        //log.Info("------- Shutting Down ---------------------");

        //sched.Shutdown(true);

        //log.Info("------- Shutdown Complete -----------------");

        SchedulerMetaData metaData = sched.GetMetaData();
        log.Info(string.Format("Executed {0} jobs.", metaData.NumberOfJobsExecuted)); 
```

这是我的 app.config 设置

```
<add key="quartz.scheduler.instanceId" value="AUTO"/>
<add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz"/>
<add key="quartz.threadPool.threadCount" value="10"/>
<add key="quartz.threadPool.threadPriority" value="2"/>

<add key="quartz.jobStore.misfireThreshold" value="60000"/>

<add key="quartz.jobStore.clustered" value="true"/>
<add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz"/>
<add key="quartz.jobStore.driverDelegateType" value="Quartz.Impl.AdoJobStore.StdAdoDelegate, Quartz" />
<add key="quartz.jobStore.tablePrefix" value="QRTZ_" />
<add key="quartz.jobStore.dataSource" value="myDS"/>

<add key="quartz.jobStore.lockHandler.type" value="Quartz.Impl.AdoJobStore.UpdateLockRowSemaphore, Quartz"/>
<!-- i have modifed for this post -->
<add key="quartz.dataSource.myDS.connectionString" value="Server=mydatabaseconnectionstring goes here;Trusted_Connection=False;Encrypt=True;"/>

<add key="quartz.dataSource.myDS.provider" value="SqlServer-20"/>
<add key="quartz.jobStore.useProperties" value="true"/> 
```

### 我可以做这样的事情...在添加作业或触发器之前检查数据库中的记录，如果不存在添加作业？这样做可以吗？

### - 或者 - 实施 Azure 队列来安排我的作业是否更容易？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T15:56:05.523

这是因为 ScheduleJob 每次都会尝试添加作业。您应该使用带重载的 AddJob 来指定是覆盖现有的，还是只添加一次作业（检查是否存在），然后在需要时添加新的触发器。

使用 AdoJobStore 时，触发器和作业将在第二次运行时出现，因为它们是持久的。在您的情况下，您可能已经运行了一次代码，因此该作业存在于持久作业存储中。有了 RamJobStore，它自然会是另一回事。

# html - div 可像文本区域一样调整大小

> ID：11163981
> 
> 赞同：56
> 
> 时间：2012-06-22T20:54:22.467
> 
> 标签：html, css, textarea

浏览器默认允许通过拖动角来调整文本区域的大小。我想知道这条规则是否可以应用于其他元素（例如 div）。我知道可以使用 jQuery`draggable`或 jQuery-ui`resizable`函数来实现此效果，但如果可以避免依赖该库，我想使用纯 html / css 来实现。我可以将它们应用于 div 以使其以这种方式运行的任何 CSS 规则吗？

如果您有任何其他解决方案，我想听听。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-22T20:56:16.003

使用 css3[`resize`](http://www.css3.info/preview/resize/)属性。

```
div {
    resize: both;
} 
```

还有一个`resize: horizontal`和`resize: vertical`。

* * *

目前不能跨浏览器[http://caniuse.com/#feat=css-resize](http://caniuse.com/#feat=css-resize)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-22T20:58:26.300

您可以使用 CSS3 执行此操作。您可以通过设置调整大小和溢出样式来创建用户可调整大小`div`的标签。我在这里将调整大小设置为水平和垂直：

```
.isResizable {
  background: rgba(255, 0, 0, 0.2);
  font-size: 2em;
  border: 1px solid black;
  overflow: hidden;
  resize: both;
  width: 160px;
  height: 120px;
  min-width: 120px;
  min-height: 90px;
  max-width: 400px;
  max-height: 300px;
}
```

```
<div class="isResizable">The quick brown fox jumps over the lazy dog.</div>
```

# javascript - 用于高效插入和搜索的 Javascript 数据结构

> ID：11163982
> 
> 赞同：3
> 
> 时间：2012-06-22T20:54:28.530
> 
> 标签：javascript, performance, data-structures

我需要一个 Javascript 数据结构，它可以让我有效地插入字符串和搜索字符串。我一直在环顾四周，我遇到的唯一数据结构是对象和数组。对象更多地用于封装，不能真正用于搜索，使用数组可能会很慢。是否有任何其他数据结构可以让我有效地插入和搜索字符串？现在充其量我可以对数组进行二进制搜索。还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:06:13.213

> 对象更多用于封装，不能真正用于搜索

这在经典语言中是正确的，在 JS 中并非如此。

```
 var obj = { memberone: "value1" }

   var value = obj["memberone"];

   //value === "value1" 
```

可以在 JS 中搜索对象。忍受我...

> 并且使用数组可能会很慢。

是的，可以——但不必如此。

> 是否有任何其他数据结构可以让我有效地插入和搜索字符串？

数据结构？不，这又是一个经典的观点。在 JS 中，情况有所不同。

查看[_underscore.js](http://underscorejs.org/)。

1.  它是 4k min gzip。
2.  它提供了许多高级迭代器助手（所以你不必）
3.  它提供了模板来有效地显示您的数据到屏幕。
4.  它将使您的其余开发、维护和实施受益。

这是 JS 灵活性的一个很好的例子。

希望有帮助。祝一切顺利！纳什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:06:12.700

看了几眼后发现还有一些

[Javascript 数据结构 - 一个集合对象](http://www.i-programmer.info/programming/javascript/4138-javascript-data-structures-the-string-object.html)

还有一件事你可以使用 json 对象及其 JavaScript API 来操作。请参考[这里](http://www.json.org/)

# iphone - UIView 只接受特定区域的触摸

> ID：11163988
> 
> 赞同：0
> 
> 时间：2012-06-22T20:55:01.510
> 
> 标签：iphone, ios, cocoa-touch, ipad, uiview

我有一个 UIView，我正在基于 touchesBegan 和 touchesMoved 渲染一个 UIBezierPath。但我只想在 UIVIew 内的某个区域绘制。我想在仅注册触摸的 UIView 中设置一个 CGRect 。此区域之外的任何触摸都不会被注册。

理想情况下，如果用户拖到这个矩形之外，他们可以保持触摸，但是当他们拖回该区域时会调用 touchesBegan 方法。

有人能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:01:38.317

使用 pointInside:withEvent: 告诉它在该区域之外不接受该点。

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{
    return [self isPointWithinMyBounds:point];
}

- (BOOL) isPointWithinMyBounds:(CGPoint) point{
    //determine if the point is within the rect
    return NO;
} 
```

touchesMoved 事件将是复杂事件。您只会在视图之外停止绘图。

但这应该可以达到您想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:57:12.667

您可以在当前的 UIView 之上放置一个不可见的 UIView，其大小与您预期的触摸区域相同。然后只需将手势识别器添加到该视图即可。