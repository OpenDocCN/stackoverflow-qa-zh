# StackOverflow 问答 11698000-11698999

# jquery - jQuery 气球

> ID：11698004
> 
> 赞同：0
> 
> 时间：2012-07-28T03:25:34.603
> 
> 标签：jquery, dialog, modal-dialog, balloon

有谁知道您是否可以在包含在 jQuery 模态对话框中的文本输入上使用 jQuery 气球？

```
<div id="dlg-clock_in_out">
  <section class="roundbox-sml" style="padding:5px; 5px;">
    <input type="hidden" name="empid" id="empid" value="" />
    <div style="width:100%; text-align:center;">
      <label for="pin">PIN: </label><input type="password" name="pin" id="pin" maxlength="4" size="5" value="" />
    </div>
    <div id="login-btns-wrapper">
      <input type="button" id="loginSubmit" class="buttons roundbox-sml" value="<?=$btn_text?>" />
      <input type="button" class="buttons roundbox-sml" name="loginCancel" id="loginCancel" value="Cancel" />
    </div>
  </section>
</div>

<script type="text/javascript">
  $('#pin').keypress(function(e) {
    if(check_pin_chars(String.fromCharCode(e.which))) {
      $(this).val('');
      $(this).balloon({
        position     : "top right",
        showDuration : 125,
        minLifetime  : 2000,
        tipSize      : 4
     });

     $(this).showBalloon();
   }
}); 
```

我想在显示此模式对话框时使用的 jquery 应该在输入字段旁边放置一个气球，但我不知道气球是否可以存在于 jquery 模式对话框中的元素上。

有谁知道这是否可能？我知道如何为标准表单输入元素做到这一点。它只是没有出现在我的模态对话框中。

这是我试图用来完成此任务的方法。[http://file.urin.take-uma.net/jquery.balloon.js-Demo.html](http://file.urin.take-uma.net/jquery.balloon.js-Demo.html)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:29:50.190

您的问题可能是您没有正确设置气球的 z-index 高于您的模态对话框。

```
$('.balloon').css('z-index','9999'); 
```

它也可能是您的 JavaScript 的一个选项（我不知道您使用的是您编写的库还是您在其他地方找到的库）：

```
$(this).balloon({
    position     : "top right",
    showDuration : 125,
    minLifetime  : 2000,
    tipSize      : 4,
    z-index      : 9999
 }); 
```

**根据反馈更新**

我的回答非常接近正确。您的代码实际上存在两个问题，以及为什么您没有看到气球。

首先，我对 z-index 的看法是正确的。但是，您必须在 CSS 中设置 z-index，而不是直接在气球选项中。因此，在您的情况下，它将是：

```
#pin {
 z-index: 99999
} 
```

但是，您遇到的另一个问题来自您的默认选项。这是 jquery.balloon.js 网站上文档中的关键词：

> 气球的默认内容是它的标题。如果元素没有标题，则不会创建气球。

因为您没有在选项中提供内容，所以您不会看到任何气球，因为它无法显示任何内容。因此，由于您是针对您的 pin 密码框显示它，因此您必须添加一个内容选项，或者为您的密码框添加一个标题。像这样的东西：

```
<input type="password" name="pin" id="pin" maxlength="4" size="5" value="" title="Correct Pin!" /> 
```

我[在 jsfiddle 上创建了一个小演示](http://jsfiddle.net/sgWG4/)来展示一切是如何结合在一起的。

# iphone - Reminders.app UIScrollView 滚动说明。

> ID：11698009
> 
> 赞同：1
> 
> 时间：2012-07-28T03:27:29.613
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我目前正在为 iPhone 编写一个应用程序，**我的水平（水平，如水平滚动，而不是垂直滚动）UIScrollView 遇到了一些问题。**

的**高度为 260**`UIScrollView`，**宽度为 320。**它有 2 页，每页都有一个。' 框架与'框架相同。****`UITableView``UITableView``UIScrollView`****

 ****问题是**80% 的时间**，当前`UITableView`将拖动/滑动检测为垂直滚动（但它实际上是水平的）并开始垂直滚动表格视图。

**我的问题如下：**

有人可以向我解释一下应用程序提醒如何为滚动视图滚动。如果你仔细看，你会发现滚动视图很好地处理了水平滚动，并且水平滚动是由滚动视图处理的（而不是像我的那样由 tableview 处理）。**如果有人需要更多解释，请发表评论。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:43:23.587

如果我尝试在提醒的表格视图中向左/向右滚动，它不会响应它。如果我在添加按钮所在的表头视图中滚动，它会毫无问题地滚动。我的猜测是他们将表格视图标题设为 UIScrollView。Apple 强烈反对在滚动视图中使用表格视图（或者任何从 UIScrollView 继承到从 UIScrollView 继承的不同视图的视图），因此他们可能不会接受自己的建议并忽略它。****

# android - 没有嵌套权重的均匀分布的布局

> ID：11698012
> 
> 赞同：0
> 
> 时间：2012-07-28T03:27:49.887
> 
> 标签：android, android-layout

我意识到这已经被问过无数次了，但我还没有为自己想出一个解决方案。我想制作一组简单的按钮，布局如下，而不使用 GridLayout。我对 TableLayout 或 RelativeLayout 也不太满意。对我有用的是LinearLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:padding="5dp" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#d0b0b0"
            android:paddingRight="10dp"
            android:textSize="15dip" />

        <View
            android:layout_width="10dp"
            android:layout_height="0dp"
            android:background="#808080" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#a09a09"
            android:textSize="15dip" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:padding="5dp" >

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#456456"
            android:padding="10dp"
            android:textSize="15dip" />
    </LinearLayout>

</LinearLayout> 
```

但我收到有关“嵌套权重不利于性能”的警告。真的吗？这么简单的布局？我可以忽略警告吗？还有其他（优雅的？）方法可以做到这一点吗？

![线性布局，3 个按钮](../Images/ad5ad7d7affbcbcd6cf8896c9ae32e82.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-06T08:06:00.590

**更新：**正如我们所知，API 级别 26 已弃用百分比支持库。`ConstraintLayout`这是实现相同平面 xml 结构的新方法。

[**更新了 Github 项目**](http://code2concept.blogspot.in/2015/08/android-percent-support-lib-sample.html)

**更新示例：**

```
<android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/fifty_thirty"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ffff8800"
        android:gravity="center"
        android:text="@string/fifty_fifty_text"
        android:textColor="@android:color/white"
        app:layout_constraintHeight_default="percent"
        app:layout_constraintHeight_percent="0.5"
        android:textSize="25sp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintWidth_default="percent"
        app:layout_constraintWidth_percent="0.5" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ffff5566"
        android:gravity="center"
        android:text="@string/fifty_fifty_text"
        android:textColor="@android:color/white"
        android:textSize="25sp"
        app:layout_constraintHeight_default="percent"
        app:layout_constraintHeight_percent="0.5"
        app:layout_constraintLeft_toRightOf="@id/fifty_thirty"
        app:layout_constraintTop_toBottomOf="@id/fifty_thirty"
        app:layout_constraintWidth_default="percent"
        app:layout_constraintWidth_percent="0.5" />

</android.support.constraint.ConstraintLayout> 
```

**已弃用的示例**

**更新：**我们通过 android 支持库获得了很棒的解决方案，可以将我们的布局平均划分为百分比。

避免完全混乱`LinearLayout weights`。

```
compile 'com.android.support:percent:23.0.0' 
```

[代码和概念](http://code2concept.blogspot.in/2015/08/android-percent-support-lib-sample.html)

[Github 项目](https://github.com/nitiwari-dev/android-percent-layout-sample)

考虑这个简单的布局。

[![百分比布局演示](../Images/653e0540728f7eee61c9e9f4bd179317.png)](https://i.stack.imgur.com/sunj9.png)

```
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:id="@+id/fifty_huntv"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ff7acfff"
        android:text="20% - 50%"
        android:textColor="@android:color/white"
        app:layout_heightPercent="20%"
        app:layout_widthPercent="50%" />
    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_toRightOf="@id/fifty_huntv"
        android:background="#ffff5566"
        android:text="80%-50%"
        app:layout_heightPercent="80%"
        app:layout_widthPercent="50%"
        />

</android.support.percent.PercentRelativeLayout> 
```

宾果游戏我们完成了。真的很棒:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:56:58.150

您可以通过对当前布局文件进行一些调整来避免嵌套布局警告：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="5dp" >

    <View
        android:id="@+id/anchor"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_centerVertical="true" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/anchor"
        android:layout_alignParentTop="true"
        android:padding="5dp" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#d0b0b0"
            android:paddingRight="10dp"            
            android:textSize="15dip" />

        <View
            android:layout_width="10dp"
            android:layout_height="0dp"
            android:background="#808080" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#a09a09"            
            android:textSize="15dip" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@id/anchor"
        android:orientation="horizontal"
        android:padding="5dp" >

        <Button
            android:id="@+id/button3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#456456"
            android:padding="10dp"            
            android:textSize="15dip" />
        <!-- textSize should be set in sp units, like 15sp -->
    </LinearLayout>

</RelativeLayout> 
```

此外，您可能希望删除`LinearLayout`包裹单曲的`Button`（并在 中添加 5dp 边距`Button`）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T17:36:08.360

另一个关于 android 布局的有趣细节，它还具有删除嵌套权重上的 lint 警告的效果。如果我将按钮放入合并文件中：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#d0b0b0"
        android:textSize="15dip" />

</merge> 
```

.. 对其他按钮（以及我制作的间隔视图）执行相同操作，然后将这些合并 xml 文件包含到主 xml 文件中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:padding="5dp" >

        <include layout="@layout/button1" />

        <include layout="@layout/spacer" />

        <include layout="@layout/button2" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:padding="5dp" >

        <include layout="@layout/button3" />
    </LinearLayout>

</LinearLayout> 
```

..我失去了所有的皮棉警告！lint 只是错过了问题，还是以这种方式更容易膨胀？

它不仅让阅读变得更容易（对我来说），而且给了我很多重用的可能性。我 <3 的 XML 布局！

# java - java代码来计算一些数字的倍数？

> ID：11698013
> 
> 赞同：0
> 
> 时间：2012-07-28T03:28:07.723
> 
> 标签：java, algorithm

我在示例中使用的是 Math.PI，所以它是双精度的。这是一个简单的代码，但有一点我不知道该怎么做：

我希望代码使用用户给出的乘数值计算`X`a `sin`or`cos`函数的基本周期。`a`该`n`值被初始化`n=1`为一个整数值。

如果 的结果`(2 * pi * n)/a = X`低于`pi`则`n`应该增加，并且应该继续直到该数字是 的倍数`pi`，然后打印结果。

只是为了澄清：是函数中`a`的乘数或像这样：`x``sin``cos`

`cos(ax)`

`sin(ax)`

我遇到的麻烦是确定数字是否是的倍数`pi`（假设它已经大于`pi`，即）。

据我所知，这是不完整的。

```
 public void printSinusoidalPeriod(double multiplier /* this would be `a` */){

    double pi=Math.PI;

    double p = (2 * pi * (double) n) / multiplier;

    while(p<pi){

        if(n%pi==0){

            n=n+1;
            System.out.println(n);
                            p = (2 * pi * (double) n) / multiplier;
        }
    }
    p= (double)Math.round(p * 100) / 100;

    System.out.println("period of function is = " + p + " and n = " + n);
} 
```

似乎它没有进入 if 语句并被困在 while 循环中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:45:42.107

如果我理解正确

```
 while((2 * pi * n)/a)<pi)
    {
        if(!(n%pi==0))
        {
            n++;
            }
    } 
```

y 的倍数是您需要自己弄清楚的部分。但这应该可以帮助您理解逻辑，如果我理解正确的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:47:02.323

如果我正确理解您的问题，我必须在使用 php.ini 之前解决与此类似的问题。不确定 javascript 的正确语法是什么，但也许你应该保留一个计数器，直到 (x/pi) 是一个整数，这表明它是 pi 的倍数。

我知道这不是正确的代码，但类似于：

```
 while (!isint(x/pi)) {
    x++;
    }
    if (isint(x/pi)) {
    //CODE TO EXECUTE
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:41:38.617

你似乎在计算什么时候

```
(2 * pi * n)/a = m * pi where m is some integer multiple. 
```

所以

```
2 * pi * n = m * pi * a

2 * n = m * a

n = m * a / 2 
```

你的另一个约束是

(2 * pi * n)/a < pi

所以

```
2 * pi * n < pi * a
2 * n < a
n < a / 2; 
```

要使这两个方程为真，m 必须是小于 1 的整数，但由于 n 是从 1 开始的，所以它永远不会为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:50:30.697

好的，在此处的建议的帮助下，我最终是如何做到的。

```
public void printSinusoidalPeriod(double a){

    double pi=Math.PI;
    double p=m*pi;

    while(n<a/2){

        if((double)Math.round((n*pi)%pi)!=0.01){

            n=n+1;

            m = (int) Math.round(((2 * (double) n) / a));
            p= (double)Math.round(m * pi * 100) / 100;
            p=p*n;

        }
    }
    System.out.println("period of function is = " + p + " and n = " + n);
    System.out.println("Check: p/n = " + p/n);
} 
```

如果您能发现逻辑上的任何问题，请告诉我。我还没有经历过很多可能，但我做过的那些对我来说看起来还不错。

# javascript - 节点光纤是否阻塞？

> ID：11698017
> 
> 赞同：3
> 
> 时间：2012-07-28T03:31:01.963
> 
> 标签：javascript, node.js, asynchronous, io, node-fibers

如果你在 Node.js 中运行一个 I/O 密集型任务，比如一些异步数据库操作，使用[node-fibers](https://github.com/laverdet/node-fibers/)，它会阻塞吗？

我还没有使用节点光纤 b/c 似乎——如果在处理 HTTP 请求的代码中使用，其中运行了一些长的正常非阻塞 I/O 代码——它现在会阻止其他请求访问您的应用程序。这是真的还是假的？关于为什么它是真/假的一些细节也会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:43:22.173

Fibers 允许程序员编写“类似线程”的​​阻塞语句 JavaScript 代码。但它的实现不是阻塞的，代码相当于node.js的异步事件代码。Laverdets 实现会在某些时候暂停光纤执行，就像异步 node.js 模型一样，并且可以在以后恢复。

Fiber 更像是语法糖，它们不会改变 node.js 的异步模型。唯一的区别是纤维正在创建不同的执行堆栈（如果我是正确的），这对普通的 nodejs 异步代码来说是一个轻微的开销。

# perl - 在 Perl 中打印数组

> ID：11698018
> 
> 赞同：1
> 
> 时间：2012-07-28T03:31:20.580
> 
> 标签：perl

我在 Ubuntu 中使用 Perl。我为数组分配了几个值，当我打印数组时，它给出了一些 HASH 值。

有人可以帮助我吗？

这是代码。

```
#!/usr/bin/perl
my $VAR="you are welcome";
my @arr={'1','2','3','4'};
print @arr;
print $VAR."\n";
print "$$ \n"; 
```

这是输出

```
HASH(0x140cd80)you are welcome 
12548 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T03:41:49.983

`{ ... }`生成一个匿名哈希，并且您已将哈希分配`{ 1 => '2', 3 => '4' }`给 的第一个也是唯一的元素`@arr`。

要设置`@arr`包含 1 到 4 的四个元素，您必须编写

```
my @arr = ( 1, 2, 3, 4 ); 
```

或者

```
my @arr = 1 .. 4; 
```

然后`print @arr`将输出`1234`.

如果要在数组元素之间放置空格，只需将数组放在双引号内即可。`print "@arr"`将输出`1 2 3 4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T04:56:59.353

以下是在 Perl 中打印数组时可以使用格式的其他一些方法：

```
print join(", ", @arr); 
```

或者

```
$" = ", ";
print "@arr\n"; 
```

# java - 正确编写 ExecutorService.shutdownNow() 可以停止的任务？

> ID：11698021
> 
> 赞同：3
> 
> 时间：2012-07-28T03:31:44.850
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

我有一个表单的处理循环

```
while (true) {
    doWork();
    Thread.sleep(SLEEP_INTERVAL);
} 
```

我想从中做出一个`Runnable`可以很好地使用并且在被调用`ExecutorService`时会退出的东西。`ExecutorService.shutdownNow()`

我想这样写：

```
public WorkerTask implements Runnable
{
    @Override
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            doWork();
            try {
                Thread.sleep(SLEEP_INTERVAL);
            }
            catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
} 
```

简单的测试表明它至少看起来可以工作，因为任务被中断并将退出并且`ExecutorService`将关闭，并且无论中断`doWork()`是在处理期间还是在`sleep`. （通过改变工作量`doWork()`和大小`SLEEP_INTERVAL`，我几乎可以控制中断发生的位置）。

但是当我用谷歌搜索时，我看到了使用`Thread.interrupted()`以及`Thread.currentThread().isInterrupted()`. 我知道前者清除中断标志而后者离开它，但是我需要关心的还有其他区别吗？

我还看到`Thread.currentThread().isInterrupted()`or的结果`Thread.interrupted()`存储在`volatile`变量中并且该变量用作`while`循环测试条件的版本。这只是一种风格还是有必要这样做？在我所写的内容中，我必须担心以某种方式可以清除设置之间的中断标志（无论是在线程处于活动状态时被接收，还是通过我捕获`InterruptedException`并重新设置标志）和何时`Thread.currentThread().isInterrupted()`被调用循环测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:36:26.113

你的代码对我来说看起来不错。引入一个额外的 volatile 变量将是不必要的复杂性：中断状态完成了这项工作。

*在Java Concurrency in Practice*中，处理任务中断的推荐方法是抛出一个（如果任务是 a而不是 a ，`InterruptedException`这是可行的），或者确保设置了中断状态并退出任务尽快。你的代码做得很好。`Callable``Runnable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:59:23.413

你能看看`ScheduledExecutorService`它是否符合你的要求：

```
 class BeeperControl {
    private final ScheduledExecutorService scheduler =
      Executors.newScheduledThreadPool(1);

    public void beepForAnHour() {
      final Runnable beeper = new Runnable() {
        public void run() { System.out.println("beep"); }
      };
      final ScheduledFuture<?> beeperHandle =
        scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
      scheduler.schedule(new Runnable() {
        public void run() { beeperHandle.cancel(true); }
      }, 60 * 60, SECONDS);
    }
  }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T06:53:00.593

基本上你应该利用`java.util.concurrent`这里的库。你应该通过提交你的任务`ExecutorService.submit()`然后调用阻塞方法`Future.get()`，然后你可以确保这些方法会通过抛出一个来尽快响应中断`ExecutionException()`。你可能应该摆脱那个线程.sleep() 因为它什么都不做。您想尽快嗅探中断。您可能还想等待超时，以防您的任务无限期地做某事。因此，如果任务以 TimeOutException 终止，则任务将通过其 Future 取消。我`cancel()`无条件地打电话，因为取消已完成的任务没有任何效果。在这种情况下，您可以执行以下操作：

```
 public static void main(String[] args) {
    WorkerTask runnable;
    TimeUnit unit;
    Future<?>   task = executor.submit(workerTask);
    try{
      task.get(timeout,unit);
    } catch(TimeoutException e){

    }catch(ExecutionException e){
        throw e.getCause();  
    } finally{
      //Harmless if the task already completed
      task.cancel(true);
    }
  }
} 
```

# php - 为 5 个或更多项目插入 ID

> ID：11698023
> 
> 赞同：0
> 
> 时间：2012-07-28T03:32:39.797
> 
> 标签：php, oracle11g

我继续我讨论的上一个主题 -[更多项目的 1 个 ID](https://stackoverflow.com/questions/11680950/1-id-for-more-items)。

在最后一个主题中，我询问了这个概念，现在我正在做的是继续编码概念。

该代码成功地将数据保存到数据库中，但是当插入 5 个项目时，它仍然按每个 ID 提交每个项目的数据。示例：
第 1 项 - 计算机（第 1 次购买）
第 2 项 - 鼠标（第 2 次购买）
我想要的是：
第 1 项 - 计算机（第 1 次购买）
第 2 项 - 鼠标（第 1 次购买）

这是我的代码：我使用自动增量购买。

这是我的执行代码：

```
<?php
$conn = oci_connect("system", "dev01");
$n = $_POST['jum'];
for ($i=1; $i<=$n; $i++)
{
$dept=$_POST['dept'];
$date_request=$_POST['date_request'];
$supplier=$_POST['supplier']; 
$item=$_POST['item'.$i]; 
$qty=$_POST['qty'.$i];  
$uprice=$_POST['uprice'.$i]; 
$total=$_POST['total'.$i];  
$s = oci_parse($conn,
"insert into purchase_request(dept_id, supplier_id, date_request, item, qty, uprice, total_amount) values ('$dept', '$supplier', '$date_request', '$item'
, '$qty', '$uprice', '$total'

)");

$r = oci_execute($s);
oci_rollback($conn);
echo "Data was committed\n";
}
?> 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:59:30.483

您应该遵循您在之前的帖子中标记为已接受的建议，但不要将购买 ID 设为自动增量字段。关键是它不会自动递增。当您特别想要它时它会上升（以便多个项目可以具有相同的purchase_id）。这确实意味着您需要显式地为其分配一个值。最简单的方法是查询当前在购买表中的最大购买 ID，并为您的查询添加 1。

# python - pymongo 在连接字符串中指定变量

> ID：11698024
> 
> 赞同：1
> 
> 时间：2012-07-28T03:32:43.833
> 
> 标签：python, mongodb, pymongo

我正在使用 pymongo 连接到我的 mongodb 数据库。我试图在连接字符串中调用数据库名称和集合名称，但我无法弄清楚。

如果我有一个数据库名称 (mydb) 和一个名为 (mycol) 的集合，则此示例有效：

```
con = Connection('mymongodbhost')
d = con.mydb.mycol.find_one()
print (d) 
```

这很好，但假设我将 mydb 和 mycol 定义为变量，我如何在连接字符串中调用它们。所以可以说我有：

```
db = parser.get('some_conf_file', 'db_name')
col = parser.get('some_conf_file', 'col_name') 
```

如何在我的连接字符串中指定 db 和 col 变量（这只是一个代码片段）？我尝试了各种组合，这肯定行不通：

```
d = con.db.col.find_one()
print (d) 
```

这基本上是调用 db (db) 和 collection (col)。但我希望在上面的示例中将变量值替换为 db 和 col。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T03:42:14.310

试试这个：

```
d = con[db][col].find_one() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:39:08.280

你可以使用：

```
d = getattr(getattr(con, db), col).find_one() 
```

虽然看起来有点不雅。

# assembly - 如何在 DOS 扩展器或 DPMI 环境下进行 DMA 传输？

> ID：11698027
> 
> 赞同：3
> 
> 时间：2012-07-28T03:33:26.283
> 
> 标签：assembly, x86, dos, watcom

程序在 DOS 扩展器+DPMI 环境下运行时如何使用 DMA 传输？

我的意思是我们如何*分配*和获取分配的 dma 缓冲区的*物理地址*，以便将该物理地址提供给 DMA 控制器或*PCI 总线主设备*。

有两种可能：

DOS 扩展器或 DPMI 服务器/主机*支持虚拟内存*。例如[铜锣湾](http://www.devoresoftware.com/freesource/cwsrc.htm)。

DOS 扩展器或 DPMI 服务器/主机*不支持虚拟内存，但*启用了分页。例如[DOS32a](http://dos32a.narechk.net/index_en.html)。

我正在使用*Open Watcom C*编译器。

运行时环境是：

FreeDOS + XMS（无 EMS/EMM386）+ DOS 扩展器（DOS32a）

对于 DJGPP，解决方案在[这里](http://www.delorie.com/djgpp/v2faq/faq18_13.html)

但是最后提到的解决方案，即通过 XMS，是否也可以与 DOS32a 一起使用？

DOS32a 文档说，在切换到保护模式之前，它会分配*所有*可用的扩展内存，然后我们的程序可以通过 DPMI 函数 501h 分配该内存。

注意：dma 缓冲区可以是 1MB 左右，所以我不能使用常规内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T03:59:35.810

对于干净的 DPMI 解决方案，您可能需要探索以下 DPMI 函数（摘自 Ralf Brown 的中断列表）：

```
INT 31 P - DPMI 1.0+ - MAP DEVICE IN MEMORY BLOCK
        AX = 0508h
        ESI = memory block handle
        EBX = page-aligned offset within memory block of page(s) to be mapped
        ECX = number of pages to map
        EDX = page-aligned physical address of device
Return: CF clear if successful
        CF set on error
            AX = error code (8001h,8003h,8023h,8025h) (see #03143)
Notes:  only supported by 32-bit DPMI hosts, but may be used by 16-bit clients
        support of this function is optional; hosts are also allowed to support
          the function for some devices but not others

INT 31 P - DPMI 1.0+ - MAP CONVENTIONAL MEMORY IN MEMORY BLOCK
        AX = 0509h
        ESI = memory block handle
        EBX = page-aligned offset within memory block of page(s) to map
        ECX = number of pages to map
        EDX = page-aligned linear address of conventional (below 1M) memory
Return: CF clear if successful
        CF set on error
            AX = error code (8001h,8003h,8023h,8025h) (see #03143)
Notes:  only supported by 32-bit DPMI hosts, but may be used by 16-bit clients
        support of this function is optional

INT 31 P - DPMI 0.9+ - PHYSICAL ADDRESS MAPPING
        AX = 0800h
        BX:CX = physical address (should be above 1 MB)
        SI:DI = size in bytes
Return: CF clear if successful
            BX:CX = linear address which maps the requested physical memory
        CF set on error
            AX = error code (DPMI 1.0+) (8003h,8021h) (see #03143)
Notes:  implementations may refuse this call because it can circumvent protects
        the caller must build an appropriate selector for the memory
        do not use for memory mapped in the first megabyte 
```

如果以上都不允许您将虚拟地址映射到物理地址，也不能获取已分配块的物理地址（例如不支持），您需要查看 DPMI 主机的实现细节（例如，如果它不启用页面转换或可以关闭，那么所有地址都是物理的）。

**编辑**：看起来您应该能够分配内存（超过 1MB）并获得其物理和虚拟地址。首先，使用 XMS/Himem.sys 分配它并锁定它。这会给你物理地址。接下来使用DPMI函数0x800获取对应的虚拟地址。

下面是方法（忽略 16 位版本（使用 Borland/Turbo C/C++ 编译），它仅用于验证 XMS 例程）：

```
// file: dma.c
//
// Compiling with Open Watcom C/C++ and DOS/32 DOS extender/DPMI host:
//   wcl386.exe /q /we /wx /bcl=dos4g dma.c
//   sb.exe /b /bndmados32.exe dma.exe
// Before running dmados32.exe do "set DOS32A=/EXTMEM:4096"
// to limit the amount of extended (XMS) memory allocated by DOS/32
// at program start (by default it allocates everything).
//
// Compiling with 16-bit Borland/Turbo C/C++:
//   tcc.exe dma.c

#include <stdio.h>
#include <string.h>
#include <dos.h>
#include <limits.h>

#if defined(__WATCOMC__)
#if !defined(__386__)
#error unsupported target, must be 32-bit (DPMI) DOS app
#endif
#elif defined(__TURBOC__)
#if !defined(__SMALL__)
#error unsupported target, must be 16-bit DOS app with small memory model
#endif
#else
#error unsupported compiler
#endif

typedef unsigned uint;
typedef unsigned long ulong;

typedef signed char int8;
typedef unsigned char uint8;

typedef short int16;
typedef unsigned short uint16;

#if UINT_MIN >= 0xFFFFFFFF
typedef int int32;
typedef unsigned uint32;
#else
typedef long int32;
typedef unsigned long uint32;
#endif

#pragma pack(push, 1)

typedef struct tDpmiRmInt
{
  uint32 edi, esi, ebp, resz0, ebx, edx, ecx, eax;
  uint16 flags, es, ds, fs, gs, ip, cs, sp, ss;
} tDpmiRmInt;

#pragma pack(pop)

int RmInt(uint8 IntNumber, tDpmiRmInt* pRegs)
{
#if defined(__WATCOMC__)
  union REGS inregs, outregs;

  memset(&inregs, 0, sizeof(inregs));
  memset(&outregs, 0, sizeof(outregs));

  inregs.w.ax = 0x300;
  inregs.h.bl = IntNumber;
  inregs.h.bh = 0;
  inregs.w.cx = 0;
  inregs.x.edi = (uint32)pRegs;

  return int386(0x31, &inregs, &outregs);
#elif defined(__TURBOC__)
  struct REGPACK regs;

  memset(&regs, 0, sizeof(regs));

  regs.r_ax = (uint16)pRegs->eax;
  regs.r_bx = (uint16)pRegs->ebx;
  regs.r_cx = (uint16)pRegs->ecx;
  regs.r_dx = (uint16)pRegs->edx;
  regs.r_si = (uint16)pRegs->esi;
  regs.r_di = (uint16)pRegs->edi;
  regs.r_bp = (uint16)pRegs->ebp;
  regs.r_flags = pRegs->flags;
  regs.r_ds = pRegs->ds;
  regs.r_es = pRegs->es;

  // No fs, gs (16-bit code)
  // No ss:sp, cs:ip (int*()/intr() functions set the right values)

  intr(IntNumber, &regs);

  memset(pRegs, 0, sizeof(*pRegs));

  pRegs->eax = regs.r_ax;
  pRegs->ebx = regs.r_bx;
  pRegs->ecx = regs.r_cx;
  pRegs->edx = regs.r_dx;
  pRegs->esi = regs.r_si;
  pRegs->edi = regs.r_di;
  pRegs->ebp = regs.r_bp;
  pRegs->flags = regs.r_flags;
  pRegs->ds = regs.r_ds;
  pRegs->es = regs.r_es;

  return regs.r_ax;
#endif
}

int RmFarCall(tDpmiRmInt* pRegs)
{
#if defined(__WATCOMC__)
  union REGS inregs, outregs;

  memset(&inregs, 0, sizeof(inregs));
  memset(&outregs, 0, sizeof(outregs));

  inregs.w.ax = 0x301;
  inregs.h.bh = 0;
  inregs.w.cx = 0;
  inregs.x.edi = (uint32)pRegs;

  return int386(0x31, &inregs, &outregs);
#elif defined(__TURBOC__)
  uint8 code[128];
  uint8* p = code;
  void far* codef = &code[0];
  void (far* f)(void) = (void(far*)(void))codef;

  *p++ = 0x60;                                                            // pusha
  *p++ = 0x1E;                                                            // push  ds
  *p++ = 0x06;                                                            // push  es

  *p++ = 0x68; *p++ = (uint8)pRegs->ds; *p++ = (uint8)(pRegs->ds >> 8);   // push #
  *p++ = 0x1F;                                                            // pop  ds
  *p++ = 0x68; *p++ = (uint8)pRegs->es; *p++ = (uint8)(pRegs->es >> 8);   // push #
  *p++ = 0x07;                                                            // pop  es

  *p++ = 0xb8; *p++ = (uint8)pRegs->eax; *p++ = (uint8)(pRegs->eax >> 8); // mov ax, #
  *p++ = 0xbb; *p++ = (uint8)pRegs->ebx; *p++ = (uint8)(pRegs->ebx >> 8); // mov bx, #
  *p++ = 0xb9; *p++ = (uint8)pRegs->ecx; *p++ = (uint8)(pRegs->ecx >> 8); // mov cx, #
  *p++ = 0xba; *p++ = (uint8)pRegs->edx; *p++ = (uint8)(pRegs->edx >> 8); // mov dx, #
  *p++ = 0xbe; *p++ = (uint8)pRegs->esi; *p++ = (uint8)(pRegs->esi >> 8); // mov si, #
  *p++ = 0xbf; *p++ = (uint8)pRegs->edi; *p++ = (uint8)(pRegs->edi >> 8); // mov di, #
  *p++ = 0xbd; *p++ = (uint8)pRegs->ebp; *p++ = (uint8)(pRegs->ebp >> 8); // mov bp, #

  *p++ = 0x9A; *p++ = (uint8)pRegs->ip; *p++ = (uint8)(pRegs->ip >> 8);
               *p++ = (uint8)pRegs->cs; *p++ = (uint8)(pRegs->cs >> 8);   // call far seg:offs

  *p++ = 0x60;                                                            // pusha
  *p++ = 0x1E;                                                            // push  ds
  *p++ = 0x06;                                                            // push  es
  *p++ = 0x89; *p++ = 0xE5;                                               // mov   bp, sp
  *p++ = 0x8E; *p++ = 0x5E; *p++ = 0x16;                                  // mov   ds, [bp + 0x16]
  *p++ = 0x89; *p++ = 0xEE;                                               // mov   si, bp
  *p++ = 0xFC;                                                            // cld

  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->es; *p++ = (uint8)((uint16)&pRegs->es >> 8);  // mov [], ax (es)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->ds; *p++ = (uint8)((uint16)&pRegs->ds >> 8);  // mov [], ax (ds)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->edi; *p++ = (uint8)((uint16)&pRegs->edi >> 8);  // mov [], ax (di)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->esi; *p++ = (uint8)((uint16)&pRegs->esi >> 8);  // mov [], ax (si)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->ebp; *p++ = (uint8)((uint16)&pRegs->ebp >> 8);  // mov [], ax (bp)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->ebx; *p++ = (uint8)((uint16)&pRegs->ebx >> 8);  // mov [], ax (bx)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->edx; *p++ = (uint8)((uint16)&pRegs->edx >> 8);  // mov [], ax (dx)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->ecx; *p++ = (uint8)((uint16)&pRegs->ecx >> 8);  // mov [], ax (cx)
  *p++ = 0xAD;                                                            // lodsw          
  *p++ = 0xA3; *p++ = (uint8)&pRegs->eax; *p++ = (uint8)((uint16)&pRegs->eax >> 8);  // mov [], ax (ax)

  *p++ = 0x83; *p++ = 0xC4; *p++ = 0x14;                                  // add   sp, 0x14

  *p++ = 0x07;                                                            // pop   es
  *p++ = 0x1F;                                                            // pop   ds
  *p++ = 0x61;                                                            // popa
  *p++ = 0xCB;                                                            // retf

  f();

  return (uint16)pRegs->eax;
#endif
}

struct
{
  uint16 Ip, Cs;
} XmsEntryPoint = { 0 };

int XmsSupported(void)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x4300;
  RmInt(0x2F, &regs);

  return (regs.eax & 0xFF) == 0x80;
}

void XmsInit(void)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x4310;
  RmInt(0x2F, &regs);

  XmsEntryPoint.Cs = regs.es;
  XmsEntryPoint.Ip = (uint16)regs.ebx;
}

int XmsQueryVersions(uint16* pXmsVer, uint16* pHimemVer)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x00 << 8;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  if (pXmsVer != NULL)
    *pXmsVer = (uint16)regs.eax;

  if (pHimemVer != NULL)
    *pHimemVer = (uint16)regs.ebx;

  return (int)(regs.ebx & 0xFF);
}

int XmsQueryFreeMem(uint16* pLargest, uint16* pTotal)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x08 << 8;
  regs.ebx = 0;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  if (pLargest != NULL)
    *pLargest = (uint16)regs.eax;

  if (pTotal != NULL)
    *pTotal = (uint16)regs.edx;

  return (int)(regs.ebx & 0xFF);
}

int XmsAllocMem(uint16* pHandle, uint16 Size)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x09 << 8;
  regs.edx = Size;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  *pHandle = (uint16)regs.edx;

  return (int)(regs.ebx & 0xFF);
}

int XmsFreeMem(uint16 Handle)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x0A << 8;
  regs.edx = Handle;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  return (int)(regs.ebx & 0xFF);
}

int XmsLockMem(uint16 Handle, uint32* pPhysAddr)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x0C << 8;
  regs.edx = Handle;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  *pPhysAddr = ((regs.edx & 0xFFFF) << 16) | (regs.ebx & 0xFFFF);

  return (int)(regs.ebx & 0xFF);
}

#if defined(__TURBOC__)
int XmsCopyMem(uint16 DstHandle, uint32 DstOffs, uint16 SrcHandle, uint32 SrcOffs, uint32 Size)
{
  tDpmiRmInt regs;
#pragma pack(push, 1)
  struct
  {
    uint32 Size;
    uint16 SrcHandle;
    uint32 SrcOffs;
    uint16 DstHandle;
    uint32 DstOffs;
  } emm;
#pragma pack(pop)

  emm.Size      = Size;
  emm.SrcHandle = SrcHandle;
  emm.SrcOffs   = SrcOffs;
  emm.DstHandle = DstHandle;
  emm.DstOffs   = DstOffs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x0B << 8;
  regs.ds = FP_SEG(&emm);
  regs.esi = FP_OFF(&emm);
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  return (int)(regs.ebx & 0xFF);
}
#endif

int XmsUnlockMem(uint16 Handle)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x0D << 8;
  regs.edx = Handle;
  regs.cs = XmsEntryPoint.Cs;
  regs.ip = XmsEntryPoint.Ip;
  RmFarCall(&regs);

  return (int)(regs.ebx & 0xFF);
}

#if defined(__WATCOMC__)
int DpmiMap(void** pPtr, uint32 PhysAddr, uint32 Size)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x800;
  regs.ebx = PhysAddr >> 16;
  regs.ecx = PhysAddr & 0xFFFF;
  regs.esi = Size >> 16;
  regs.edi = Size & 0xFFFF;
  RmInt(0x31, &regs);

  *pPtr = (void*)(((regs.ebx & 0xFFFF) << 16) | (regs.ecx & 0xFFFF));

  return regs.flags & 1;
}

int DpmiUnmap(void* Ptr)
{
  tDpmiRmInt regs;

  memset(&regs, 0, sizeof(regs));
  regs.eax = 0x801;
  regs.ebx = (uint32)Ptr >> 16;
  regs.ecx = (uint32)Ptr & 0xFFFF;
  RmInt(0x31, &regs);

  return regs.flags & 1;
}
#endif

int main(void)
{
  uint16 xmsVer, himemVer;
  uint16 largestFreeSz, totalFreeSz;
  uint16 handle;
  uint32 physAddr;

#if defined(__WATCOMC__)
  {
    uint32 cr0__ = 0, cr3__ = 0;
    __asm
    {
      mov eax, cr0
      mov cr0__, eax
      mov eax, cr3
      mov cr3__, eax
    }
    printf("CR0: 0x%08lX, CR3: 0x%08lX\n", (ulong)cr0__, (ulong)cr3__);
  }
#endif

  if (!XmsSupported())
  {
    printf("XMS unsupported\n");
    goto Exit;
  }
  printf("XMS supported\n");

  XmsInit();
  printf("XMS entry point: 0x%04X:0x%04X\n",
         XmsEntryPoint.Cs, XmsEntryPoint.Ip);

  XmsQueryVersions(&xmsVer, &himemVer);
  printf("XMS version: 0x%X  Himem.sys version: 0x%X\n",
         xmsVer, himemVer);

  XmsQueryFreeMem(&largestFreeSz, &totalFreeSz);
  printf("Largest free block size: %u KB  Total free memory: %u KB\n",
         largestFreeSz, totalFreeSz);

  printf("Allocating the DMA buffer...\n");
  if (XmsAllocMem(&handle, 64))
  {
    printf("Failed to allocate the DMA buffer\n");
    goto Exit;
  }

  XmsQueryFreeMem(&largestFreeSz, &totalFreeSz);
  printf("Largest free block size: %u KB  Total free memory: %u KB\n",
         largestFreeSz, totalFreeSz);

  printf("Locking the DMA buffer...\n");
  if (XmsLockMem(handle, &physAddr))
  {
    printf("Failed to lock the DMA buffer\n");
  }
  else
  {
    printf("The DMA buffer is at physical address: 0x%08lX\n", (ulong)physAddr);

#if defined(__WATCOMC__)
    {
      uint8* ptr;

      printf("Mapping the DMA buffer...\n");

      if (DpmiMap((void**)&ptr, physAddr, 64 * 1024UL))
      {
        printf("Failed to map the DMA buffer\n");
      }
      else
      {
        printf("The DMA buffer is at virtual address: 0x%08lX\n", (ulong)ptr);

        printf("Using the DMA buffer...\n");
        strcpy(ptr, "This is a test string in the DMA buffer.");
        printf("%s\n", ptr);

        DpmiUnmap(ptr);
      }
    }
#elif defined(__TURBOC__)
    {
      char testStr[] = "This is a test string copied to and from the DMA buffer.";
      printf("Using the DMA buffer...\n");
      if (XmsCopyMem(handle, 0, 0, ((uint32)FP_SEG(testStr) << 16) + FP_OFF(testStr), sizeof(testStr)))
      {
        printf("Failed to copy to the DMA buffer\n");
      }
      else
      {
        memset(testStr, 0, sizeof(testStr));
        if (XmsCopyMem(0, ((uint32)FP_SEG(testStr) << 16) + FP_OFF(testStr), handle, 0, sizeof(testStr)))
        {
          printf("Failed to copy from the DMA buffer\n");
        }
        else
        {
          printf("%s\n", testStr);
        }
      }
    }
#endif

    XmsUnlockMem(handle);
  }

  XmsFreeMem(handle);

  XmsQueryFreeMem(&largestFreeSz, &totalFreeSz);
  printf("Largest free block size: %u KB  Total free memory: %u KB\n",
         largestFreeSz, totalFreeSz);

Exit:

  return 0;
} 
```

示例输出（在 DosBox 下）：

```
CR0: 0x00000001, CR3: 0x00000000
XMS supported
XMS entry point: 0xC83F:0x0010
XMS version: 0x300  Himem.sys version: 0x301
Largest free block size: 11072 KB  Total free memory: 11072 KB
Allocating the DMA buffer...
Largest free block size: 11008 KB  Total free memory: 11008 KB
Locking the DMA buffer...
The DMA buffer is at physical address: 0x00530000
Mapping the DMA buffer...
The DMA buffer is at virtual address: 0x00530000
Using the DMA buffer...
This is a test string in the DMA buffer.
Largest free block size: 11072 KB  Total free memory: 11072 KB 
```

请注意，DOS/32 不启用页面转换（除非有 VCPI）。CR0的PG位为0，CR3为0，得到的物理地址和虚拟地址是一样的，一切都说明了这一点。所以虚拟地址和物理地址是一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:11:58.613

我编写了一个应用程序来在 DOS 中测试 AHCI（我的环境是 DOS 7.0 + DOS32a + Watcom C），并列出了我如何为 DMA 传输分配内存，供您参考。

**(1)**以平面模式分配内存（假设分配 1K 内存并且应该是*WORD* align）

`ptr = (pDWORD)calloc(1024+1, sizeof(BYTE));`

其中 1024 是我们真正需要的，而 1Byte 用于“容差”，因为返回的指针可能不是字对齐的，最坏的情况是**Ex。**ptr 指向 0x30000001

**(2)**调整基于 WORD(2-byte) align

`if(inputAddr & 1) { inputAddr &= (~2 + 1); inputAddr += 2; }`

**（3）**将上面的inputAddr赋值给PRDT的*DBA*（Data Base Address）

**笔记：**

1）我在makefile中通过“...wpp386 -mf ...”使用*“平面内存模式” ，在链接器文件中使用“op stub=dos23a.exe”...*

2) 其中**ptr**是指向已分配内存部分的实际指针，在释放内存时应保留；**inputAddr**是另一个指向数据传输正确（对齐）内存地址的指针！

通过这种方式 DMA 传输测试是好的，在这种环境下分配的内存可以达到 4MB...

供参考

# ios - [UIImageView setText:]: 无法识别的选择器发送到实例

> ID：11698030
> 
> 赞同：0
> 
> 时间：2012-07-28T03:34:17.283
> 
> 标签：ios, uiimageview, selector, settext

很抱歉，如果它已经被问过，但问题来了：

当我快速滚动 tableView 时收到此消息：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIImageView setText:]: unrecognized selector sent to instance 0x8a8f8d0”

这是我的代码：

```
 NewsVideoCell *cell = [tableView dequeueReusableCellWithIdentifier:AudioCellIdentifier];

   if (cell == nil) {
       cell = [[NewsVideoCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:AudioCellIdentifier];
   }

   cell.backgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"news_bg"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0)] ];  
   cell.selectedBackgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"news_bg"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0)] ];

   UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
   [cellLabel setText:[masjid objectForKey:@"name"]];

   UILabel *cellDate = (UILabel *)[cell viewWithTag:2];
   [cellDate setText:[[news objectAtIndex:indexPath.row] objectForKey:@"date"]];       

   UIImageView *cellImage = (UIImageView *)[cell viewWithTag:3];
   NSString *imagePath = [masjid objectForKey:@"thumb"];
   [cellImage setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%@", imagePath]]];

   UITextView *cellText = (UITextView *)[cell viewWithTag:5];
   NSString *postText = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];

   [cellText setText:postText];

   ... 
```

触发此异常的行是：

```
 [cellText setText:postText]; 
```

我看到这是由于过度保留或释放不足，但我没有找到解决方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T05:23:19.843

```
UITextView *cellText = (UITextView *)[cell viewWithTag:5]; 
```

在这行代码中，您 UITextView 的 TAG 是“5”，我认为您可能为此 View 提供了不同的 ID。第一的 。

我有类似的问题....我发现我的标签对于 TextView 和 Image View 是不同的。

> 如何更改视图的标签？
> 
> > 首先选择视图（即 UITextView），然后转到属性检查器选项卡.....在“视图”下，您会发现“标签”写在那里 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T12:36:54.267

`setText`是一种`UITextView`方法不是`UIImageView`。现在正如评论中提到的，cellText 不是`UITextView`实例，它似乎是`UIImageView`实例，然后您尝试从导致应用程序崩溃`setText`的实例调用方法。`UIImageView`尝试对其进行测试以确保：

```
 UITextView *cellText = (UITextView *)[cell viewWithTag:5];
   if([cellText class] != [UITextView class]){
        cellText = [[UITextView alloc]init];
   }
   NSString *postText = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];

   [cellText setText:postText]; 
```

这样，如果`cellText`不是`UITextView`实例，它将为您初始化一个。

# javascript - 使用 jquery 更改颜色会删除悬停颜色？

> ID：11698033
> 
> 赞同：4
> 
> 时间：2012-07-28T03:35:00.033
> 
> 标签：javascript, jquery, css

所以我有：

```
#selection_menu .secondary_options button:hover { color: #000066; } 
```

它在我的网站上效果很好..

但是，当单击其中一个按钮时，我会运行一个包含以下内容的 javascript 函数：

```
$('button').css("color","#FFFFFF");
if(!$sameTile)
    $($tileSelector).css("color","#000066"); 
```

因此，当单击按钮时，当鼠标移开时，突出显示颜色会保持不变。

我遇到的问题是，在第一次运行后，按钮在突出显示时停止改变颜色。我怎样才能解决这个问题？还是这是正常行为？

我正在尝试添加一个类，但我无法让它工作：http: [//jsfiddle.net/sUKkb/1/](http://jsfiddle.net/sUKkb/1/)

我的更多代码：索引：[http://pastebin.com/7gYu9YG8](http://pastebin.com/7gYu9YG8) css： http: [//pastebin.com/Jz1bvzrr](http://pastebin.com/Jz1bvzrr)

或者这可能更有帮助：[http ://staging.easyzag.com/style.css](http://staging.easyzag.com/style.css)

查看源代码：http://staging.easyzag.com/index.php?section=drink

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T03:39:11.500

这里的问题是您的 jQuery 正在添加一个内联样式，它将覆盖您的 CSS 中的规则。另一个问题是`$('button').css('color','#000666')`将内联样式应用于**所有**按钮。

我建议在您的 CSS 中为默认值和粘性状态添加一条规则，如下所示：

```
button { color:#fff }
button:hover { color:#fff }
.sticky-state { color:#000066 } 
```

然后在你的jQuery中你这样做而不是你正在做的事情：

```
`$(/*add your selector here*/).addClass('.sticky-state'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:59:14.110

我相信这（通常）是您所追求的：

jsFiddle：http: [//jsfiddle.net/sUKkb/5/](http://jsfiddle.net/sUKkb/5/)

HTML：

```
<button class="not-sticky">Hello</button> 
```

JS：

```
$('button').on('click', function(e){
    $(this).removeClass('not-sticky').addClass('sticky-state');
}); 
```

请注意，这确实需要相对较新的 jQuery 版本（1.7+）。您还可以使用：

```
$('button').live('click', function(e){
    $(this).removeClass('not-sticky').addClass('sticky-state');
}); 
```

或者

```
$('button').click(function(e){
    $(this).removeClass('not-sticky').addClass('sticky-state');
}); 
```

对于旧版本的 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:40:41.150

试试这个; 在你的 CSS 中；

```
.new_class{ 
   color:#000066 
} 
```

在你的 JS

```
$('button').css("color","#FFFFFF");
if(!$sameTile){
    $($tileSelector).removeClass()('.your_previous_class');
    $($tileSelector).addClass('.new_class');
} 
```

或者你可以试试

```
$($tileSelector).css({ 'color':'#000066' }); 
```

这是小提琴[http://jsfiddle.net/sUKkb/2/](http://jsfiddle.net/sUKkb/2/)（无课）

还有这个[http://jsfiddle.net/sUKkb/3/](http://jsfiddle.net/sUKkb/3/)（有课）

而这个[http://jsfiddle.net/sUKkb/4/](http://jsfiddle.net/sUKkb/4/)使用 ID 而不是类来使按钮独一无二

而且我认为，您想要的是像下面的小提琴一样的切换解决方案；

[http://jsfiddle.net/sUKkb/7/](http://jsfiddle.net/sUKkb/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T06:54:42.680

如果这给您带来麻烦，您可以在没有 jquery 的情况下执行此操作。

为悬停效果添加一个 onmouseover 和一个 onmouseout 处理程序，并添加一个 onclick，它首先取消 onmousover 和 onmouseout，然后设置所需的颜色。

# macos - 打印 xattr 十六进制输出的字符串表示

> ID：11698034
> 
> 赞同：3
> 
> 时间：2012-07-28T03:35:14.647
> 
> 标签：macos, formatting, xattr

我正在尝试编写一个脚本来从使用 xattr 在 OS X 上通过 Safari 下载的磁盘映像中提取原始下载 URL，以便我可以重命名它们，但仍然可以轻松获取它们的原始名称以供参考。

此命令打印下载给定文件的 URL 的十六进制表示，例如：

```
xattr -p com.apple.metadata:kMDItemWhereFroms *.dmg 
```

给

```
62 70 6C 69 73 74 30 30 A1 01 5F 10 4F 68 74 74
70 3A 2F 2F 61 64 63 64 6F 77 6E 6C 6F 61 64 2E
61 70 70 6C 65 2E 63 6F 6D 2F 4D 61 63 5F 4F 53
5F 58 2F 6D 61 63 5F 6F 73 5F 78 5F 31 30 2E 36
2E 31 5F 62 75 69 6C 64 5F 31 30 62 35 30 34 2F
30 34 31 35 30 37 33 61 2E 64 6D 67 08 0A 00 00
00 00 00 00 01 01 00 00 00 00 00 00 00 02 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 5C 
```

URL 从第 14 个字节开始（如果我计算正确的话）并且以 NULL 结尾。如何格式化此字符串，以便获得如下字符串输出：

[http://adcdownload.apple.com/Mac_OS_X/mac_os_x_10.6.1_build_10b504/0415073a.dmg](http://adcdownload.apple.com/Mac_OS_X/mac_os_x_10.6.1_build_10b504/0415073a.dmg)

*（不用担心，除非您登录 ADC，否则此链接无效）*

...本质上，Finder 将在“获取信息”中显示相同的内容。我尝试将 xattr 的输出通过管道传输到 xxd，但我不确定如何指定偏移量，以便字符串从正确的位置开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T09:18:56.383

所以，在查看了 xattr -p 返回的二进制数据后，我意识到它实际上是一个二进制 plist ......因此数据前面有“bplist”。出于某种原因，我以前没有注意到这一点，但鉴于此，这里有一个合适的解决方案，它应该适用于从 10.5 到 10.8 的每个 OS X。

为避免重复，我将链接到源而不是粘贴它：[https ://github.com/jakepetroules/wherefrom](https://github.com/jakepetroules/wherefrom)

# c# - 尝试从服务进行远程 WMI 调用时访问被拒绝

> ID：11698035
> 
> 赞同：2
> 
> 时间：2012-07-28T03:35:15.677
> 
> 标签：c#, wmi, dcom

我有一个 C# 应用程序，它通过 WMI 连接到域中和独立的许多远程系统。该程序为 wmi 提供凭据并使用模拟。当手动运行（从控制台）时，它连接良好，一切都很好。但是，当从服务（以本地用户身份运行）调用同一个 .exe 时，它​​在 ManagementScope 上调用 Connect() 时总是得到 0x80070005 (E_ACCESSDENIED)。

我进行了相当多的搜索，发现了许多关于类似主题的看似有用的文章，但没有一个有用。 [这个](http://blogs.msdn.com/b/wmi/archive/2009/03/13/let-s-troubleshoot-wmi-part-1-remoting-and-security.aspx)和他在 MS 网站上的 [后续帖子][2] 非常相似，除了我的失败发生在连接时，而不是尝试运行查询时，所以感觉像是本地系统权限问题。

我弄乱了 DCOM 权限、WMI 远程处理权限、模拟选项、策略选项、Windows 防火墙等等，但都没有结果。有没有人可以提供帮助？

编辑：通过更多的挖掘，我发现[了这个来自 MS 的小页面](http://blogs.msdn.com/b/wmi/archive/2009/03/13/let-s-troubleshoot-wmi-part-1-remoting-and-security.aspx)，它确实指出我的错误 (0x80070005) 是连接期间发生的 DCOM 问题，而不是具体的 WMI 错误。他们给出的原因是 1\. 凭据失败，或 2\. DCOM 启动/远程激活权限。由于我的程序在使用相同的凭据手动运行时可以正常工作，因此我必须假设它是 DCOM 问题。我已将远程/本地激活和启动设置为允许系统、本地服务、交互和管理员，但它仍然失败。由于该服务作为本地系统运行，我认为这些设置就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:43:31.460

我可能过于简单化或没有完全理解您的问题，但在我看来，如果您尝试通过仅具有*计算机本地帐户凭据的服务访问**远程*WMI 提供程序，那么这样的努力总是会失败（按设计） . 没有从 MACHINE\account 到 OTHERMACHINE\account 或 DOMAIN\account 的身份验证路径。再次，如果我过于简单化或误解，我很抱歉。

# python - python xlrd - 从工作表中检索列索引

> ID：11698038
> 
> 赞同：1
> 
> 时间：2012-07-28T03:35:50.047
> 
> 标签：python, xlrd

嗨，我只是拿起 xlrd。关于访问工作表和单元格属性，我指的是[Xlrd Column](http://www.lexicon.net/sjmachin/xlrd.html#xlrd.Sheet.col_label_ranges-attribute)

那里的代码显示。

```
for crange in thesheet.col_label_ranges:
    rlo, rhi, clo, chi = crange
    for rx in xrange(rlo, rhi):
        for cx in xrange(clo, chi):
            print "Column label at (rowx=%d, colx=%d) is %r" \
                (rx, cx, thesheet.cell_value(rx, cx)) 
```

所以我想我只是测试从“数据”表中打印出单元格 A1，所以我开始复制上面的示例。

但是，当它完成时，它会在 col_label_ranges 处出错：

```
inBook = xlrd.open_workbook('T:/AzReporting/DraftUtilization.xls')
outBook = xlutils.copy.copy(inBook)
for crange in outBook.col_label_ranges:
    rlo, rhi, clo, chi = crange
    for rx in xrange(rlo, rhi):
        for cx in xrange(clo, chi):
            print "Column label at (rowx=%d, colx=%d) is %r" \
            (rx, cx, outBook.cell_value(0, 0))

Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
AttributeError: 'Workbook' object has no attribute 'col_label_ranges' 
```

此外，如果我将 col_label_names 更改为工作表名称，它也会出错。这个例子我一定遗漏了一些东西。也许有更好的教程可以遵循？

```
for crange in outBook.Data: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:39:47.670

你是在读还是写excel文件？xlrd 用于读取 excel 文件，xlwt 用于写入

我相信你错过了一个中间步骤

```
 inBook = xlrd.open_workbook('T:/AzReporting/DraftUtilization.xls') 
```

和

```
 for crange in outBook.col_label_ranges: 
```

您必须指定excel文件的工作表

甚至这个例子也被标记为“thesheet”

我想改变

```
 for crange in outBook.col_label_ranges: 
```

至

```
 sh=inBook.sheet_by_index(0)
           for crange in sh.col_label_ranges: 
```

[http://www.numbergrinder.com/2008/10/pulling-data-from-excel-using-python-xlrd/](http://www.numbergrinder.com/2008/10/pulling-data-from-excel-using-python-xlrd/)

# shell - 我在shell脚本中使用运算符“>>”，假设附加日志文件。但是有问题

> ID：11698041
> 
> 赞同：0
> 
> 时间：2012-07-28T03:36:20.120
> 
> 标签：shell, file-io, io-redirection

这是我用来写日志的功能。

```
log() {
        DATE=`date`
        echo "[$DATE] $1" >> "$SCRIPT_DIR/auto.log" 
```

}

该脚本每分钟运行 1 次，并且每次它截断日志文件然后附加文件。我使用 tail 查看会发生什么，它出现：

tail：auto.log：文件被截断

该函数是我在脚本中使用 auto.log 的唯一地方，为什么每次脚本启动时它都会被截断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:38:16.483

嘿，它对我有用。这是我的代码

```
 #!/bin/bash

log() {
        DATE=`date`
        echo "[$DATE] $1" >> "${SCRIPT_DIR}/auto.log"
}

SCRIPT_DIR="/home"
log 
```

我无法想象您的脚本如何运行而没有错误。我认为你的函数的括号是这里的问题。一探究竟。

谢谢。

# boost-python - 关于如何使用 BoostPython 在 C++ 中嵌入 python 类/函数的参考资料

> ID：11698044
> 
> 赞同：1
> 
> 时间：2012-07-28T03:37:49.493
> 
> 标签：boost-python

我可以知道，如果我可以参考一些好的网站参考/链接，这些参考/链接显示了我如何在 C++ 中嵌入/包装 python 类和函数（方法）（而不是相反）。我找到了如何从 C++ 包装到 python（[就像这里](http://www.boost.org/doc/libs/1_47_0/libs/python/doc/tutorial/doc/html/python/exposing.html)），但我感兴趣的是相反的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:56:09.203

您可以从 Python 调用 C++。您指出的教程包含对此的介绍。查找“功能 - 重载”部分。它展示了如何创建绑定以允许 C++ 调用 pythonic 函数。该方法也可以应用于类。

# mysql - MySQL - Ordered GROUP BY 问题优化

> ID：11698046
> 
> 赞同：0
> 
> 时间：2012-07-28T03:38:05.633
> 
> 标签：mysql, group-by, sql-order-by, latitude-longitude

我有一个名为的表`stores`，其中包含商店信息，更重要的是各个商家商店的位置坐标。一个商家可以在不同的位置拥有多个商店。我需要按距离（从特定位置）排序的商店列表，列表中只显示每个商家最近的商店。

以下查询有效，但我相信它不是最佳的。有没有办法修改或改进这个查询？

```
SELECT 
    `Store`.`id`, 
    `Merchants`.`id`, 
    `Store`.`area_id`, 
    `Store`.`url`, 
    ( 6371 * acos( cos( radians(18.973212066666665) ) * cos( radians( Store.latitude ) ) * cos( radians( Store.longitude ) - radians(72.8140959) ) + sin( radians(18.973212066666665) ) * sin( radians( Store.latitude ) ) ) ) AS distance 
FROM 
    `stores` AS `Store` 
INNER JOIN 
    (SELECT DISTINCT id,( 6371 * acos( cos( radians(18.973212066666665) ) * cos( radians( Store.latitude ) ) * cos( radians( Store.longitude ) - radians(72.8140959) ) + sin( radians(18.973212066666665) ) * sin( radians( Store.latitude ) ) ) ) AS distance FROM stores as Store WHERE Store.active=1 AND Store.parent_id=0 AND (( 6371 * acos( cos( radians(18.973212066666665) ) * cos( radians( Store.latitude ) ) * cos( radians( Store.longitude ) - radians(72.8140959) ) + sin( radians(18.973212066666665) ) * sin( radians( Store.latitude ) ) ) ) < 50) GROUP BY Store.id ORDER BY distance) AS `St` ON (`St`.`id` = `Store`.`id`) 
INNER JOIN 
    merchants AS `Merchants` ON (`Store`.`merchant_id` = `Merchants`.`id`) 
WHERE 
    (( 6371 * acos( cos( radians(18.973212066666665) ) * cos( radians( `Store`.`latitude` ) ) * cos( radians( `Store`.`longitude` ) - radians(72.8140959) ) + sin( radians(18.973212066666665) ) * sin( radians( `Store`.`latitude` ) ) ) ) < 50) AND 
        `Store`.`parent_id` = 0 AND 
        `Store`.`active` = 1  
GROUP BY 
    `Merchants`.`id`  
ORDER BY 
`distance` ASC  
LIMIT 10 
```

我正在使用以下公式计算距离（ 6371 * acos( cos( 弧度( **LATITUDE** ) ) * cos( 弧度( Store.latitude ) ) * cos( 弧度( Store.longitude ) - 弧度( **LONGITUDE** ) ) + sin( 弧度) ( **LATITUDE** ) ) * sin( 弧度(Store.latitude ) ) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:18:16.843

1.  看起来您根本不需要商人表。无论如何，您仅将其用于 store 表中的 Mercer_id。所以你可以避免这种加入。

如果我正确理解您的需求，您可以尝试以下查询：

```
 select id, merchant_id, area_id, url, 
min(distance function you are using) as distance 
from stores group by merchant id, order by distance 
```

我实际上并没有运行它，但这个想法应该可行。

-曼西

# ruby-on-rails - 如何在 Ruby/Rails 中传递和渲染符号

> ID：11698049
> 
> 赞同：0
> 
> 时间：2012-07-28T03:38:53.873
> 
> 标签：ruby-on-rails, ruby

我想将一个符号传递给一个方法并拥有它

```
def block
  @something = Something.find(1)
  hsh = {:type => :method_to_perform}
  hsh.each { |k, v| nil_test k, v }
end

def nil_test k, v
  @something.try(:k) ? (@k = @something.k.v) : nil
end 
```

我遇到了一个或两个问题，首先我认为传递符号并不能作为`@something`. 你如何传递一个符号并让它作为一个方法进入另一个块？

其次，我想让钥匙成为符号，换句话说，在上面的例子中，我想`@k`成为`@type`，而不是`@k`。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:43:50.237

您需要使用[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)（或[`public_send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-public_send)）：

```
@something.try(k) ? instance_variable_set(:@k, @something.send(k).send(v)) : nil 
```

你也可以这样做

```
instance_variable_set(:@k, @something.try(k).try(v)) 
```

这是等效的。

# java - GC 堆大小和程序内存开销

> ID：11698053
> 
> 赞同：3
> 
> 时间：2012-07-28T03:39:28.447
> 
> 标签：java, memory, garbage-collection, overhead, heap-size

我试图弄清楚我的应用程序发生了什么。

问题：

*   GC 调用并没有尽可能地减少未使用的堆大小，但它应该是因为我使用的是串行 GC（或 UseParNewGC）和积极的堆比率。

*   程序使用中的内存总是比当前使用和未使用的堆大很多，我认为即使包含其他 JVM 内存 + 堆也太大了

使用的命令行：

```
java -XX:+UseSerialGC -XX:MinHeapFreeRatio=5 -XX:MaxHeapFreeRatio=10 -Xmx2500M -cp XXXXXX.jar xxxx.xxxx.xxxx
pause 
```

*尝试使用 UseParNewGC，结果相同*

系统：Win7 SP1 4GB RAM + 4GB 交换文件 2.99GHZ Java 1.7 + JDK 1.7

请看图片让事情更清楚：http: [//i.stack.imgur.com/i3sxw.jpg](http://i.stack.imgur.com/i3sxw.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:41:18.947

与其设置自由比率，不如尝试将其设置为`New Generation`能够使短期对象死亡的大小。试图尽可能少地向`Old Generation`.

请记住，`Young Generation`大件变成了大件收藏品。

然后将最大值设置为`Old Generation`不会花费太长时间才能满`GC`但不会持续运行它们的大小。

# c# - C#多行文本框错误

> ID：11698062
> 
> 赞同：1
> 
> 时间：2012-07-28T03:40:29.737
> 
> 标签：c#

我创建了一个应用程序，我尝试将数据从多行文本框中保存到数据库。但它会显示一个错误，如 **“字符串或二进制数据将被截断。语句已终止。”** 为什么会出现，我应该怎么做才能从多行文本框中存储数据。

这是我为存储多行文本框的数据而给出的代码。

```
 cmd.Parameters.AddWithValue("@spec", TextBox3.Text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:44:27.847

这会发生，因为 Varchar 长度小于`TextBox3.Text`

场地的长度是多少？例如，如果是`Varchar(5)`和`TextBox3.Text`是`"abcdef"`你不能插入文本，因为它会被截断

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T03:44:30.800

错误告诉您文本框中的值对于字段/参数[来说太大了](http://aartemiou.blogspot.com.au/2009/02/string-or-binary-data-would-be.html)

检查存储过程中参数的定义，以及它正在写入的字段的大小。

# c++ - C ++上的用户输入结束循环

> ID：11698064
> 
> 赞同：0
> 
> 时间：2012-07-28T03:41:22.787
> 
> 标签：c++, loops

我正在尝试创建一些东西（我在想可能是一个循环？），这将允许我让用户输入几个数字，然后输入类似“完成”的内容以将所有数字相加。

例如，如果我有一个浮点数（现在称之为 x），他们可以输入“7 *enter* 5 *enter* 9 *enter* done *enter* ”，它将添加这些数字并使 x 成为该值。我遇到问题的地方是我需要用户能够输入任意数量的数字（例如在 1 到 70 之间），而无需指定他们想输入多少数字，只需在 when他们完成了。

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:46:34.463

您需要使用无限循环（`while (true)`或`for (;;)`）将下一个输入读入字符串。

检查字符串是否为`done`. 如果是，`break`则循环。

然后尝试使用函数将该字符串解析为`double`（不要使用`float`）`std::stod`。

如果解析失败，可选择打印一条错误消息`"Bad input, try again"`并重新启动循环。如果解析成功，将数字添加到计数器并重新开始循环。

# php - 创建一个按钮，用于对 MYSQL 查询进行升序和降序排序

> ID：11698065
> 
> 赞同：0
> 
> 时间：2012-07-28T03:41:30.593
> 
> 标签：php, mysql, dom-events

我是一名学生编码员。我想创建一个排序按钮，按下该按钮时，按升序对 MYSQL 查询进行排序。然后再次按下时，它将按降序排序。对，现在，它只是背靠背显示升序表和降序表。

形成此按钮逻辑的最佳方法是什么？

```
 <form name="Email Header" method="post" action="{$_SERVER['PHP_SELF']}">
    <button type="submit" name="id_sort" class="button" value="1">ID</button>
    <button type="submit" name="from_sort" class="button" value="1">FROM</button>
    <button type="submit" name="to_sort" class="button" value="1">TO</button>
    <button type="submit" name="subject_sort" class="button" value="1">SUBJECT</button>
    <button type="submit" name="date_sort" class="button" value="1">DATE</button>
 </form>

// SORT 

if( isset( $_POST['id_sort'] ) )
   if( $_POST['id_sort'] == 1 )
     id_ASC_sort();
     $_POST['id_sort'] = 0;

if ($_POST['id_sort'] == 0)
  if( isset( $_POST['id_sort'] ) )
     if( $_POST['id_sort'] == 1 ) 
        id_DESC_sort();

 // query
    $sql = "SELECT * FROM messages ORDER BY message_id DESC";
    $result = mysql_query( $sql ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:06:09.373

检查您的第二个条件块。你有一个单等号而不是双等号。这意味着您实际上是在*设置*变量而不是检查它的值，它总是评估为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:01:37.253

我在您的代码中更改了以下行：-

```
<form name="Email Header" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

并添加了一个按钮：-

```
<button type="submit" name="asc_sort" id="asc_sort" class="button" value="1">Sort</button> 
```

和变更查询

```
if(isset($_POST['asc_sort']) && !empty($_POST['asc_sort']) && $_POST['asc_sort']==1)
{
     $sql = "SELECT * FROM messages ORDER BY message_id ASC";

}else{

    $sql = "SELECT * FROM messages ORDER BY message_id DESC";
}

echo $sql; 
```

尝试这个

```
<form name="Email Header" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<button type="submit" name="id_sort" class="button" value="1">ID</button>
<button type="submit" name="from_sort" class="button" value="1">FROM</button>
<button type="submit" name="to_sort" class="button" value="1">TO</button>
<button type="submit" name="subject_sort" class="button" value="1">SUBJECT</button>
<button type="submit" name="date_sort" class="button" value="1">DATE</button>
<button type="submit" name="asc_sort" id="asc_sort" class="button" value="1">Sort</button> 
```

# java - Java JFrame 与另一个类的交互

> ID：11698068
> 
> 赞同：2
> 
> 时间：2012-07-28T03:41:38.253
> 
> 标签：java, interaction

我发现了[类似的问题](https://stackoverflow.com/questions/10393954/java-with-jframe-and-class-interaction)，但对我来说仍然不清楚。

所以，我有一个主类 ProcessorCalculations()，我从中调用 MainFrame() 类。在 MainFrame 类中，用户应该选择文件夹。如何将 JFileChooser() 对象从 MainFrame() 传输到 ProcessorCalculations()？

我试图从上面的链接中实现提示：

```
 ProcessorCalculation processor = new ProcessorCalculation();
   MainFrame mainFrame = new MainFrame(processor); 
```

但我不知道如何在不创建新对象的情况下调用`processor`方法。`mainFrame`即使我不知道我应该问谷歌的正确问题。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:46:22.700

如果您使用上面编写的代码，那么您将当前处理器实例传递给 MainFrame 构造函数。你对这个构造函数中的引用做了什么？您是否为此引用设置了 ProcessorCalculation 实例？请向我们展示您的构造函数。

您的 MainFrame 类应该类似于...

```
public class MainFrame extends JFrame {
   // your ProcessorCalculation field  
   private ProcessorCalculation processor;

   public MainFrame(ProcessorCalculation processor) {
      // set the field with ref passed in parameter
      this.processor = processor; 

      // of course other code goes here
   }

   public void someMainFrameMethod() {
      // use the reference
      processor.someProcessorMethod();
   }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T04:06:59.857

例如`files`在引用内容的大型机中创建一个属性`JFileChooser()`（您可以说内容存储在此属性中）。`ProcessorCalculation`如果此属性是私有的，则在 Mainframe 中为此属性放置 getter setter 方法（以使其可从其他类访问）现在在您编写时返回到您的类`mainFrame.getFiles()`（您已经在`mainFrame`那里创建了 object 对象）它会返回您想要的数据班级。

如果您仍然遇到问题，请询问我会做的编码解决方案。

# amazon-ec2 - 停止 Amazon EC2 实例

> ID：11698073
> 
> 赞同：0
> 
> 时间：2012-07-28T03:42:46.460
> 
> 标签：amazon-ec2

如果我停止一个实例，我明白我不会被收费。然而，在过去的几个小时里，我已经在我的机器上安装了几个项目（Mysql 上传了一个 db、Apache、PHP 等......）。我假设当我停止实例时，我会保留这些软件安装，对吗？这些东西是否存储在 EBS 中？如果是这样，EBS 的定价在哪里，因为我想我将在全年的每一天每小时为我的 EBS 存储收取费用，因为它永远不会“停止”......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:50:52.607

从[http://aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)，当前费率是：

*   每 GB 月的预置存储 0.10 USD
*   每 100 万个 I/O 请求 0.10 USD

如果根设备支持 EBS，您的数据将保留，这是现在的默认设置。您可以在 EC2 控制面板中进行检查。

因此，如果实例从未运行，停止实例（如果是 8GB EBS）每月将花费大约 0.80 美元的存储费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:49:49.170

如果您的实例由 EBS 支持，则所有数据都是安全的。您只需为 EBS 存储付费。Amazon EBS 存储按月收费。目前每 GB 每月 0.10 美元。

# forms - HTML 点击提交按钮两次

> ID：11698077
> 
> 赞同：3
> 
> 时间：2012-07-28T03:43:57.553
> 
> 标签：forms, html, css, focus, submit

我最近为表单元素添加了 CSS3 焦点样式（它垂直增长以提供更多书写空间）。但是，现在当用户单击提交按钮时，文本区域失去焦点（并缩小），但表单没有提交，用户必须再次单击提交。有什么解决办法吗？

形式：

```
<form name="postForm" id="post_form" onsubmit="return validate()" action="post.php" method="post" enctype="multipart/form-data">
    <textarea name="post" onkeydown="update()" onkeyup="update()" placeholder='Write Post...' id="post_area" ></textarea>
    <div id='post_extras'>
        <input class="admin_extra" id="post_button" type="submit" value="Post" />
        <input class="admin_extra" type="file" name="file" />
        <input class="admin_extra" placeholder="Image URL" type="url" name="url" />
        <div class="admin_extra" id='char_left'>5000 Characters Left</div>
    </div>
</form> 
```

CSS：

```
#post_area{
height: 3em;
width: 100%;
display: block;
border: none;
box-sizing: border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
padding: 10px;
margin: 0;
transition: height 1s;
-moz-transition: height 1s;
-webkit-transition: height 1s;
-o-transition: height 1s;
}

#post_area:focus{
    height: 10em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:41:15.367

发生这种情况的原因是，当您将鼠标离开文本内容区域时，您会失去对其他元素的关注。这就是您必须在发布按钮上单击两次才能激活的原因。一种解决方法是仅在您开始输入文本并完成发布后才使用滑动效果。所以没有滑回。您可以使用 jquery 轻松完成此操作。如果您想在点击时发布 - 您必须手动收听。

您可以使用以下代码执行此操作：

```
$("post_button").on('click', function(e) {
    e.stopPropagation();
    alert('clicked');
}); 
```

**JSFiddle**代码：

[http://jsfiddle.net/txXaq/1/](http://jsfiddle.net/txXaq/1/)

# c# - 关于登录会话

> ID：11698078
> 
> 赞同：0
> 
> 时间：2012-07-28T03:44:05.553
> 
> 标签：c#, asp.net, session, login

我正在做关于开发网站的项目。我是 ASP.net 的新手，现在我有一个关于登录会话的问题，当用户登录时，同时在网上冲浪的每个人也会被记录为用户无论他们是否登录。只有当有人单击注销按钮并且每个人都注销时，会话才会结束。请帮我。每一个帮助将不胜感激。这是我的代码，我在我的母版页中编写了这些代码：

```
 protected void Page_Load(object sender, EventArgs e)

    {

        string equip = "Equipment.aspx";
        string url = HttpContext.Current.Request.Url.AbsoluteUri;
        if (url.IndexOf(equip) != -1) { Calendar2.Visible = false; Image1.Visible = false; }
        equip = "Bookings.aspx";
        if (url.IndexOf(equip) != -1) { Calendar2.Visible = false; Image1.Visible = false; }
        equip = "Rooms.aspx";
        if (url.IndexOf(equip) != -1) { Calendar2.Visible = false; Image1.Visible = false; }
        equip = "Users.aspx";
        if (url.IndexOf(equip) != -1) { Calendar2.Visible = false; Image1.Visible = false; }

        if (!Page.IsPostBack)
        {
            if (user != "" && user != null)
            {
                loginStatus = true;
                redirectpage = false;

            }
            else
            {

                redirectpage = false;
                loginStatus = false;
                user = "";
                authority = 0;
            }

        }
        else
        {

            if (user == "" || user==null)
            {

                if (cal != null)
                {

                }
                loginStatus = false;
                authority = 0;
            }
            else
            {
                if (cal != null)
                {

                }
                loginStatus = true;
            }
        }
    }

 /// <summary>
 /// Responds to a login request, validating details against the database and
 /// loading the user into the session if successful.
 /// </summary>
 /// <param name="sender">The sending object.</param>
 /// <param name="e">The event arguments.</param>

 protected void Login_Authenticate(object sender, AuthenticateEventArgs e)
 {

 SqlConnection oConn =
 new SqlConnection();
 oConn.ConnectionString = @"Data Source=STAVROS\SQLEXPRESS;User ID=sa;Password=123abc;Initial Catalog=webdev";

 sSQL = "select * from tbl_user where username = '" + Login.UserName + "'AND password = '" + Login.Password + "' ";
 SqlCommand oComm1 = new SqlCommand(sSQL, oConn);

 try
 {

 oConn.Open();
 SqlDataReader i = oComm1.ExecuteReader();
 if (i.HasRows)
 {
 while (i.Read())
 {
 user = i.GetString(0);
 authority = i.GetInt16(7);

 loginStatus = true;
 string url = HttpContext.Current.Request.Url.Absolute…
 string p = "Home.aspx";
 if (url.IndexOf(p) != -1) { Response.Redirect("Home.aspx"); }
 Helper.CreateUserSession(Session, user);
 }

 }
 else
 {
 loginStatus = false;
 Login.FailureText = "Invalid username or password.";
 }

 i.Close();
 }
 catch (Exception ex)
 {
 Response.Redirect("room-book.aspx");

 }

 }

 /// <summary>
 /// Logs the user out (kills the session)
 /// </summary>
 /// <param name="sender">The sender</param>
 /// <param name="e">The event arguments</param>

 protected void btnLogout_Click(object sender, EventArgs e)
 {

 loginStatus = false;
 user = "";
 authority = 0;
 Response.Redirect("Home.aspx");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:02:14.423

显然，您对 Web 应用程序中的会话处理一无所知。

这是C# / ASP.NET 中基于表单的身份验证的[综合教程。](http://support.microsoft.com/kb/301240)在继续之前，您需要阅读基本概念。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:54:17.980

loginStatus 是我想的字段？如果是这样，您必须在每个会话的基础上存储此标志

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-28T04:41:53.803

最好通过 Session 在应用程序中使用表单身份验证票证。连同该配置，Web Config 从 Windows 身份验证到 Passport 模式身份验证。MoreOver 使用 javascript 标签在 Log Out 的表单加载事件中使会话过期。

# amazon-ec2 - 从 Amazon EC2 实例提供网页

> ID：11698081
> 
> 赞同：0
> 
> 时间：2012-07-28T03:45:23.730
> 
> 标签：amazon-ec2

如果我正在使用来自 Amazon EC2 实例的 apache 来提供网站，那么这对我来说对`stop`机器有意义吗？另外，我对 EC2 非常陌生，所以我不完全确定 EBS 是如何工作的。看起来亚马逊确实免费为我提供了 8gb 的存储空间，但实际上我是否需要为 24/7 的存储空间付费？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:52:08.170

如果您停止服务器，它就会关闭。如果您处于开发阶段，并且希望将成本限制在最低限度，是的，您可以在每天结束时停止服务器。这是 EBS 支持的实例的优势之一。

EBS 基本上是外部网络附加存储。对于大多数人来说，EBS 支持的服务器是可行的方法，因为您可以轻松地克隆它们、停止和启动它们等。您还可以制作 ebs 卷的快照，因此这是对您的服务器进行低成本备份的好方法.

至于 EBS 存储，是的，您需要付费，但它相对便宜。EC2 的实际成本最终大部分是 CPU/运行时，尽管 EBS 确实可以轻松地使用大量存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:13:30.913

*停止机器对我来说有意义吗？*

对于生产机器，没有。在过去的几年里，我从来没有停止过生产机器。我们在需要时从我们的 AMI 启动新机器，并在不需要时关闭它们。

然而，对于负载测试或集群环境的一些研究工作——我们不得不*暂停*机器一段时间。我们当时使用停止功能。

*...我不完全确定 EBS 是如何工作的。*

引用官方[文档](http://aws.amazon.com/ebs/)：

> Amazon EBS 卷是独立于实例生命周期的非实例存储。Amazon Elastic Bionlock Store 提供高度可用、高度可靠的存储卷，可以附加到正在运行的 Amazon EC2 实例并作为实例中的设备公开。

因此，用高度简化的术语来说，它就像一个外部 HDD 或[NAS](http://en.wikipedia.org/wiki/Network-attached_storage)

*看起来亚马逊确实免费为我提供了 8gb 的存储空间，但实际上我是否需要为 24/7 的存储空间付费？*

如果您为实例付费……它应该包括 AWS 提供的存储成本。对于给定的实例类型，EBS 支持的实例比 Instance Store 的成本更高，所以我*想*它会包括 EBS 成本，但这是他们的定价政策——我真的无法评论。

*边注*

作为网络存储，EBS 支持的映像有其优点和缺点。最大的好处是，如果实例崩溃，您的根设备不会消失（*请确保您在创建实例时选中了“不要在终止时删除根设备”*）。在发生硬件故障或意外终止时，它会派上用场。

但是，在网络上，它具有任何联网设备都可能遇到的所有问题。对于某些具有非常快速和过多 IO 的应用程序（例如 Cassandra），EBS 似乎不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:47:35.103

如果你有一个免费的实例（它必须是一个运行他们品牌的 EC2 Linux 的微型实例，而不是说 CentOS），那么没有理由将其关闭。如果您按小时付费，那么是的，在不使用时关闭是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T10:33:24.977

如果您需要更多的计算能力并拥有更大的实例，您可以让该实例在更高的 CPU 速率（更昂贵的实例类型）上运行，以便在站点将被大量访问的那几个小时内，然后将实例类型改回对一些未成年人。只是不要弄乱卷。如果您不想在需要的那几分钟内离线，您可以设置一个免费（微型）实例并将弹性 IP 分配给该实例，甚至重定向到 s3 上的静态网页。 .. 示例：重定向到 s3 静态页面，并显示“正在维护”消息。

Also, watch out while stoping/terminating your instance, I dont know is that the case just on windows instances but after starting instance again my non-root drive (volumes for non system partitions) went offline (when checking "volumes" they were attached) so I had to mount them again.

# c - 指针和结构

> ID：11698087
> 
> 赞同：1
> 
> 时间：2012-07-28T03:46:44.353
> 
> 标签：c, pointers

```
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "dictionary.h"

#define HASH_SIZE 100

// prototype
int hash(char *word);

// counter
int counter;

// node
typedef struct
{
    char *word;
    node *next;
} node;

// hash table
node *hashtable[HASH_SIZE];

bool
load(const char *dictionary)
{
    // open the dictionary
    FILE *dict = fopen(dictionary, "r");
    if(dict == NULL)
    {
        printf("Could not open %s.\n", dictionary);
        return false;
    }

    // set all values in the hash table to null
    for(int i = 0; i < HASH_SIZE; i++)
    {
        hashtable[i] = NULL;
    }

    // set the counter to 0
    counter = 0;

    // iterate through the words in the dictionary
    while (!feof(dict))
    {
        // get word into a string
        char gotcha[LENGTH];
        fscanf(dict, "%s", gotcha);

        // declare a node and allocate memory
        node n;
        n.word = malloc( strlen(gotcha)*sizeof(char) );

        // save the word into the node
        strcpy(n.word, gotcha);

        // hash the word, baby!
        int hash_value = hash(n.word);

        // start saving addresses to the hashtable
        n.next = hashtable[hash_value];
        hashtable[hash_value] = &n;

        //test
        int len = strlen(n.word);
        printf("%s\n", n.word);
        printf("%i\n", len);

        // that's one more!
        counter++;
    }

    fclose(dict);

    return true;
} 
```

我在这两行代码中收到以下两个错误：

```
 n.next = hashtable[hash_value];
    hashtable[hash_value] = &n; 
```

dictionary.c:89:16：错误：来自不兼容指针类型的赋值[-Werror] dictionary.c:90:31：错误：来自不兼容指针类型的赋值[-Werror] 如何在这两个地方保存指针值？我是新手，所以请记住这一点。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:20:42.773

在您的结构中，类型节点尚未定义。将其更改为使用结构标记：

```
typedef struct node
{
    char *word;
    struct node *next;
} node; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:22:16.180

这：

```
typedef struct
{
    char *word;
    node *next;
} node; 
```

是语法错误。发生在作为类型`node *next;`创建的 typedef 结束之前。`node`如果您的编译器出于某种原因接受了这一点，它可能认为现在有两种不同的类型称为“节点”，这就解释了为什么其中一种与另一种不兼容。你应该放弃那种 typedef 的愚蠢（结构通常不应该被 typedef'ed ），而只是使用

```
struct node
{
    char *word;
    struct node *next;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:57:17.487

在定义结构之前定义结构的 typedef 名称。这允许相互引用结构而不考虑顺序，并且不需要不一致的定义，有时使用 struct 关键字，有时没有它。请注意，在 C++ 中，您可以完全取消 typedef 行：

```
typedef struct node node;

struct node
{
    char* word;
    node* next;
}; 
```

# iphone - 如何修复链接器 xcode 上的 xcdatamodel 错误？

> ID：11698093
> 
> 赞同：0
> 
> 时间：2012-07-28T03:48:26.880
> 
> 标签：iphone, xcode, core-data, linker-errors, xcdatamodel

我用 2 个实体制作了一个新的 xcdatamodeld

1.  阶段，这个有很多关系

2.  level，这个有很多属性，和stage有一个关系

但是当我从该 xcdatamodeld 创建 NSManagedObject 子类并构建我的项目时.. 3 错误显示在日志中

像这样：

```
Undefined symbols for architecture i386:
      "_OBJC_METACLASS_$_NSManagedObject", referenced from:
          _OBJC_METACLASS_$_Stage in Stage.o
          _OBJC_METACLASS_$_Level in Level.o
      "_OBJC_CLASS_$_NSManagedObject", referenced from:
          _OBJC_CLASS_$_Stage in Stage.o
          _OBJC_CLASS_$_Level in Level.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有人也遇到过这个问题吗？

我该如何解决这个错误？

我是xcode和IOS程序员的新手，提前谢谢你^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:59:25.997

看来您还没有添加`CoreData.framework`到您的项目中。为此 -
选择`Target`Go to **Build Phases > Link Binary With Libraries**然后单击**“+”**按钮（在左下角），然后选择`CoreData.framework`然后单击**ADD**按钮。

# html - 如何使导航菜单保持原位

> ID：11698094
> 
> 赞同：0
> 
> 时间：2012-07-28T03:48:49.943
> 
> 标签：html, css, web, stylesheet

在使用 UL（无序列表）构建导航菜单时，我注意到当我放大和缩小页面时，列表项会向右移动，使它们变得不合时宜。如何让他们一直呆在同一个地方？

我在[JSFiddle](http://jsfiddle.net/farup/)添加了以下内容来使用它。

```
<div id="navigation">
                     <ul>
                            <font face="Verdana, Geneva, sans-serif">
                            <li > <a href="../index.html" > ANA SƏHIFƏ </a> </li>
                            <li> <a href="../Biography/BiographyAZ.html"> BIOQRAFIYA </a> </li>
                            <li id="active-li"> <a href="#"> XƏBƏRLƏR VƏ HADISƏLƏR </a></li>
                            <li><a> KİTABLAR </a></li>
                            <li> <a> VİDEOLAR </a> </li>
                            <li> <a id="last-item">FOTOLAR</a> </li>
                            </font>
                     </ul>
#navigation {
    width: 900px;
    margin: 0 auto 0px;
}

div#navigation ul li {
    font-size:9px;
    list-style:none;
    background-color:transparent;
    background-color:#FFF;
    float: left;
}
div#navigation ul li:hover {
    background-color:#9C1A35;
}
div#navigation ul li a {
    color:#333333;
    text-decoration:none;
    display: block;
    padding:10px 43px 20px;
}
#navigation ul li a:hover {
    color:#fff;
}
ul {
    padding:0;
}
#active-li {
    background:#9C1A35 !important;
}
#active-li a {
    color:#fff !important;
}
#last-item {
    padding: 10px 42px 20px 42px !important;
}
div#navigation ul li #active {
    background:#9C1A35 !important;
}
div#navigation ul li #active a {
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:45:33.890

大多数页面在过度缩放时会丢失布局。在浏览器中启用“仅缩放文本”选项时会发生这种情况。这是我的建议：

*   将项目减少`padding-right`到较低的值（43px 对您的菜单来说太多了）。`padding-left``<a>`
*   尝试给你的项目一个`height`, `min-height`and `max-height`，然后设置`overflow:hidden`. 这样，文本将留在它的容器框中，并且不会用完。
*   使用相对值（百分比，em）而不是 px 来调整元素的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:57:10.053

`#navigation { width: 900px; margin: 0 auto 0px; display: inline; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:59:06.967

想出了一种使导航栏保持原位的新方法

```
<div id="navigation">
                         <ul>
                                <font face="Verdana, Geneva, sans-serif">
                                <li > <a href="../index.html" > ƏSAS SƏHİFƏ </a> </li>
                                <li> <a href="../Biography/BiographyAZ.html"> BIOQRAFIYA </a> </li>
                                <li id="active-li"> <a href="#"> XƏBƏRLƏR VƏ HADISƏLƏR </a></li>
                                <li><a href="../Books/booksAZ.html"> KİTABLAR </a></li>
                                <li> <a> VİDEOLAR </a> </li>
                                <li> <a id="last-item">FOTOLAR</a> </li>
                                </font>
                         </ul>
                  </div>

    #navigation {
        width: 900px;
        margin: 0 auto 0px;
    }
    div#navigation ul li {
        font-size:9px;
        list-style:none;
        background-color:transparent;
        background-color:#FFF;
        float: left;
        width:150px;
        height:40px;
        text-align:center;
    }
    div#navigation ul li:hover {
        background-color:#9C1A35;
    }
    div#navigation ul li a {
        color:#333333;
        text-decoration:none;
        display: block;
        padding:6px 0px 18px;
        border-left:1px thin black;
        border-right:1px thin black;
    }
    #navigation ul li a:hover {
        color:#fff;
    }
    ul {
        padding:0;
    }
    #active-li {
        background:#9C1A35 !important;
    }
    #active-li a {
        color:#fff !important;
    }
    div#navigation ul li #active {
        background:#9C1A35 !important;
    }
    div#navigation ul li #active a {
        color:#fff;
    } 
```

# windows - 为什么 Windows 上的文件连接这么慢？

> ID：11698095
> 
> 赞同：0
> 
> 时间：2012-07-28T03:48:59.403
> 
> 标签：windows, copy, concatenation

我正在开发一个小型实用程序来连接大型视频文件。主要的连接步骤是在 Windows 7 的命令行上运行类似这样的操作：

```
copy /b file1.dv + file2.dv + file3.dv output.dv 
```

输入文件很大 - 每个通常 7-15GB。我知道我在这里处理了大量的数据，但是二进制连接需要很长时间——总共大约 40GB 的数据，它可以接近一个小时。

考虑到这个过程基本上只是扫描每个文件并将其内容复制到一个新文件，为什么二进制复制这么慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:14:01.713

内置命令`copy`是在 DOS 时代设计的，从那以后就没有真正更新过。因此，它是为具有小磁盘和非常小的主存储器的机器设计的。结果，它在复制东西时使用非常小的缓冲区。对于典型的工作负载；这没什么大不了的，但对于您正在处理的特定情况来说效果不佳。

也就是说，考虑到您描述的情况，我认为复制不会那么缓慢。如果一个 40 GB 的文件需要大约一个小时，这意味着您将获得大约[11 MB/s 的速度](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8#hl=en&output=search&sclient=psy-ab&q=40%20gigabytes%20%2F%201%20hour&oq=&gs_l=&pbx=1&fp=8f43c5bd048b596f&bav=on.2,or.r_gc.r_pw.r_qf.&biw=2560&bih=1485). 像您在评论中描述的典型商品戴尔笔记本电脑通常配备 5400 RPM 消费级硬盘，在理想的顺序读取和写道。但是，您的工作负载不是顺序工作负载；这是读/写头从源文件到目标文件的不断移动。为此类磁盘加上 16 毫秒的典型延迟，每秒大约有 60 次寻道，或每秒 30 次复制操作。这意味着副本使用了大约 11MB / 30 = 大约 375k 的缓冲区，这很方便（在您考虑了`copy`的代码和一些 DOS 设备驱动程序）适合复制最初设计的 640k 上限。这一切都假设您的磁盘在理想条件下运行，并且有足够的剩余空间允许这些读取和写入在复制操作中实际上是连续的。

当然，如果你同时做其他事情，这会导致更多的搜索操作，你的性能会更差。

如果您使用另一个专为大型复制操作而设计的应用程序，并且因此使用更大的缓冲区，您可能会获得更好的结果（可能快两倍）。我不知道有任何这样的应用程序；如果你需要的话，你可能需要自己写一个。

# ios - 在没有互联网连接的情况下，如何在 iOS 上对单个单词进行语音识别？

> ID：11698098
> 
> 赞同：-1
> 
> 时间：2012-07-28T03:49:58.287
> 
> 标签：ios, voice-recognition

在没有互联网连接的情况下，如何在 iOS 上对单个单词进行语音识别？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-28T05:08:43.283

只是为了澄清理查兹的回答：它是有限的，可能不是你想要的，尽管语音或语音识别的大部分是在服务器端完成的，这对于苹果系统的 SIRI 来说是正确的。尽管还有其他项目和库，例如[OpenEars](http://www.politepix.com/openears/ "开耳")。可能还有其他的，请随意搜索。

不幸的是，我对这个库没有任何经验。

# android - 无法显示服务器的响应

> ID：11698099
> 
> 赞同：0
> 
> 时间：2012-07-28T03:50:03.170
> 
> 标签：android

在这里我试图从服务器检索响应并显示它，但是我没有这样做，响应文本没有出现在我的文本视图中，插入了字符串的默认值，请问我该如何实现我的目标。以及为什么我的代码无法完成任务。

这是我的安卓程序：

```
public class Chico extends Activity {

GrabURL grab;
TextView mRespond;
String line;

@Override
public void onCreate(Bundle savedInstanceState) {

    //create the activity
    super.onCreate(savedInstanceState);

    //set up the layout
    setContentView(R.layout.activity_chico);

    mRespond = (TextView) findViewById(R.id.Respond);
    mRespond.setVisibility(View.GONE);

    grab = new GrabURL();
      line = "line";

    //set up the button for check in
    Button btnin = (Button) findViewById(R.id.inbutton);
    btnin.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //set the values
            grab.onPreExecute("TechID", Build.SERIAL);
            grab.onPreExecute("Type", "Checkin");
            //set the destination and send the request
            grab.execute(new String[]{"http://192.168.1.150/Me/testing.php"});
            //close the activity
            mRespond.setVisibility(View.VISIBLE);
            mRespond.setText(line);
            //finish();
        }
    }); 
}

private class GrabURL extends AsyncTask<String, Void, Void>{
    //ArrayList object for storing the string pairs
    ArrayList<NameValuePair> nameValuePairs;

    public GrabURL() { 
        //constructor of the class
        nameValuePairs = new ArrayList<NameValuePair>(); 
      } 

    protected void onPreExecute(String key, String value) {
        //store the pair of values into the ArrayList 
        nameValuePairs.add(new BasicNameValuePair(key,value));
        }

    @Override
    protected Void doInBackground(String... urls) {
        // TODO Auto-generated method stub
        //Operation being executed in another thread
        try{
            //set up the type of HTTPClient
            HttpClient client = new DefaultHttpClient();
            //set up the location of the server
            HttpPost post = new HttpPost(urls[0]);
            //translate form of pairs to UrlEncodedFormEntity 
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
            //set up the entity being sent by post method
            post.setEntity(ent);
            //execute the url and post the values
            HttpResponse responsePOST = client.execute(post); 
            HttpEntity resEntity = responsePOST.getEntity();
            line = EntityUtils.toString(resEntity);
         } catch (Exception e) {
             //catch the exception
            line = "Can't connect to server";
         }
        return null;
    }

    protected void onPostExecute(Void unused) {
        Toast.makeText(getApplicationContext(), "Value updated", Toast.LENGTH_SHORT).show();
    }
    }

} 
```

这是 php 文件，它只打印一行：

```
<?php
print "testing";    
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:55:59.303

将此代码移至您`AsyncTask`的`onPostExecute()`：

```
...
mRespond.setVisibility(View.VISIBLE);
mRespond.setText(line); 
```

# android - 如何读取检测到的 NFC 标签（NDEF 消息）。安卓 NFC

> ID：11698100
> 
> 赞同：3
> 
> 时间：2012-07-28T03:50:26.893
> 
> 标签：android, android-intent, nfc, ndef

类似的问题 -[如何在 android 中读取检测到的 NFC 标签（NDEF 内容）详细信息？](https://stackoverflow.com/questions/9971820/how-to-read-detected-nfc-tag-ndef-content-details-in-android/9976094#9976094)

我希望我的 android 应用程序能够读取和解析检测到的 NDEF 消息。

我已经编辑了 AndroidManifest.xml 以检测 nfc 标签，并且添加了看起来像这样的意图过滤器

```
 <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter> 
```

我相信这很好，因为当我使用 SDK 附带的 NFCDemo 示例应用程序来创建 MockNDEFtags 时，当我可以选择处理这些生成的标签的应用程序列表时，我的应用程序就会出现。然后我点击我的应用程序，它会毫无问题地打开，我只需要一种方法来读取在 NDEF 消息中传递给它的数据。编码：

```
 Tag myTag = (Tag) nfcintent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

 // get NDEF tag details
 Ndef ndefTag = Ndef.get(myTag);
 ...
 NdefMessage ndefMesg = ndefTag.getCachedNdefMessage(); 
```

在一个类似的问题中提出了建议，在整个网络上我找到了许多类似的答案。我的问题是代码行

```
"Tag myTag = (Tag) nfcintent.getParcelableExtra(NfcAdapter.EXTRA_TAG);" 
```

我收到错误“nfcintent 无法解决”我意识到代码的作者可能将 nfcintent 作为特定于我的应用程序的意图的占位符，但是我不确定我应该在其位置放置什么。

启动我的应用程序的主要活动如下所示

```
public class TabsActivity extends TabActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();

    // Tab for Graph
    TabSpec graphspec = tabHost.newTabSpec("Graph");
    // setting Title and Icon for the Tab
    graphspec.setIndicator("Graph");
    Intent graphIntent = new Intent(this, GraphActivity.class);
    graphspec.setContent(graphIntent);

    // Tab for Intro
    TabSpec introspec = tabHost.newTabSpec("Intro");
    introspec.setIndicator("Intro");
    Intent introIntent = new Intent(this, IntroActivity.class);
    introspec.setContent(introIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(introspec); // Adding intro tab
    tabHost.addTab(graphspec); // Adding graph tab

} 
```

}

我假设这会启动应用程序，这是必须处理 NFC 标签的地方。如果我可以从标签中访问 NDEFMessage，我已经能够使用 android 示例应用程序中的 NdefMessageParser 来解析它。我想解析来自 NDEFmessage 的信息，并最终让应用程序中的每个选项卡都可以访问该信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:48:34.433

试试这个片段从标签中提取消息：

```
Parcelable[] rawMsgs = intent
            .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
    NdefMessage msg = (NdefMessage) rawMsgs[0];
    extractMessage(msg);

private void extractMessage(NdefMessage msg) {
        byte[] array = null;
        array = msg.getRecords()[0].getPayload();
} 
```

另请查看此[NFC 读取器/写入器示例](http://code.google.com/p/nfc-eclipse-plugin/source/browse/Android+NFC/?r=ac94b68476dcb88a4c43a6a62213657ca0bd202a#Android%20NFC/src/com/antares/nfc/client)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T01:31:08.670

要获得通过 NFC 标签的意图以在我的情况下启动活动“nfcintent”，只需使用

```
Intent nfcintent = getIntent(); 
```

# c++ - 计算数字数组的错位（递归）

> ID：11698108
> 
> 赞同：2
> 
> 时间：2012-07-28T03:52:36.703
> 
> 标签：c++, algorithm

我在面试问题中遇到了这个问题。

> 给定一个数字数组，我们必须计算这个数组可能出现的混乱总数。数组的混乱是那些没有元素在原始位置的排列。数组中数字的种类没有限制。也可能有重复。

我知道使用包含排除原则的解决方案。我一直在寻找递归公式，使用 DP。这种方法可能使用记忆和位掩码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:19:06.223

![来自维基百科的重复](../Images/b84b53f1d8d911f0274ed0a834632f17.png)

[来自维基百科的错乱](http://en.wikipedia.org/wiki/Derangement)

其中 !n 是混乱的数量，但假设没有重复。

# matlab - 比较时间序列的共同值

> ID：11698109
> 
> 赞同：2
> 
> 时间：2012-07-28T03:52:40.453
> 
> 标签：matlab, time-series, intersection

我的时间序列没有相同的开始时间，我想找到它们的共同部分。

前任：

```
a=[ 0,1,2,3,4,5,6,7]
b=[ 2,3,4,5,6,7,8,9]
c=[-1,0,1,2,3,4,5,6]

result=[2,3,4,5,6] 
```

有matlab函数可以做到吗？

* * *

### 编辑：

我找到了一个算法，但它一直在占用我的记忆力来分析 6 个 100000 点的时间序列。算法是否写得不正确，还是最长常见子串问题的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:01:37.790

该问题称为最长公共子串问题。

[http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem)

实现起来并不难，你也可以在网上找到 Matlab 代码。重要的是要注意，如果您知道如何求解 2 个时间序列，那么您就知道如何求解 N，因为：c(x,y,z) = c(x,c(y,z))

# xcode - 转换为&从 OpenCV cv::Mat, NSImage

> ID：11698110
> 
> 赞同：2
> 
> 时间：2012-07-28T03:52:43.920
> 
> 标签：xcode, cocoa, opencv

有一篇文章描述了如何做到这 [一点](https://stackoverflow.com/questions/8563356/nsimage-to-cvmat-and-vice-versa)，这似乎对其他人有用，但它不适合我。

这是使用的 .h 文件的副本：

```
//
//  NSImage+OpenCV.h
//

#import <AppKit/AppKit.h>

@interface NSImage (NSImage_OpenCV) {

}

+(NSImage*)imageWithCVMat:(const cv::Mat&)cvMat;
-(id)initWithCVMat:(const cv::Mat&)cvMat;

@property(nonatomic, readonly) cv::Mat CVMat;
@property(nonatomic, readonly) cv::Mat CVGrayscaleMat;

@end 
```

我在 Xcode 4.4 上，使用 openCV 2.4.2。我为头文件得到的编译器错误是以下的 4 倍：

`Semantic issue: Use of undeclared identifier 'cv'`

这个错误似乎很明显......头文件没有定义 cv::Mat 是什么。所以我通过查看 OpenCV 2.4 教程进行了猜测，我需要添加

`#include <opencv2/core/core.hpp>`

这产生了 20 个其他错误，其中编译器抱怨 core.hpp 文件。其中第一个说：

`Semantic issue: Non-const static data member must be initialized out of line`

所以我的问题是我做错了什么？如何使此代码正常工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T13:20:02.880

另一个 stackoverflow 问答（链接：[如何在 Cocoa 应用程序中包含 OpenCV？](https://stackoverflow.com/questions/3810800/how-to-include-opencv-in-cocoa-application?rq=1)）在未定义的符号上有缺失的部分。

总结一下：

1.  由于宏冲突，OpenCV 标头必须包含在 Cocoa 标头之前。
2.  Xcode 会自动在每个 Objective-C 文件（*.m、*.mm）的顶部包含可可头文件，这会阻止您首先添加 OpenCV 头文件，如第 1 点所述。
3.  Xcode 有一个“-Prefix.pch”文件，它定义了自动添加到任何代码的任何代码。

通常，它看起来像：

```
#ifdef __OBJC__
    #import <Cocoa/Cocoa.h>
#endif 
```

相反，该文件应更改为如下所示：

```
#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif

#ifdef __OBJC__
    #import <Cocoa/Cocoa.h>
#endif 
```

因此，对于任何 *.cpp 文件，opencv 标头都会自动添加。对于任何 *.m 文件，都会添加 Cocoa 标头。在 *.mm 文件的特殊情况下，它们都被添加，并且顺序正确。

感谢 Ian Charnas 和 user671435 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:16:33.127

那是 C++ 语法。您必须为源文件`.mm`添加后缀才能使其成为 Objective-C++。

# apache-flex - 如何在 Flex 中创建相同单例的不同模块中获得不同的单例？

> ID：11698111
> 
> 赞同：0
> 
> 时间：2012-07-28T03:53:26.923
> 
> 标签：apache-flex

我在[http://www.devahead.com/blog/2010/03/beware-of-singleton-in-flex-modules/](http://www.devahead.com/blog/2010/03/beware-of-singleton-in-flex-modules/)学习了「Beware of singleton in Flex modules」， 很多信息告诉我不同​​的模块内容不同，但在我的情况下它不起作用！为什么不同的模块使用相同的静态对象？我正在尝试使用模块范围的单例，但它像应用程序范围的单例一样工作。有人可以帮助我如何制作模块范围的单例。短代码如下：

```
 <s:Application>
    <s:ModuleLoader id="A" creationComplete="loadAModule()"/>    
    <s:ModuleLoader id="B" creationComplete="loadBModule()"/>    

    </s:Application>

    //-----------AModule
    <s:Module>
       var aITx:ITx=Tx.newInstant();//Tx extend ITX
       tracc(aITx.instantId);
       ...
    </s:Module>

    //-----------BModule
    <s:Module>
       var aITx:ITx=Tx.getInstance();//Tx extend ITX
       tracc(aITx.instanceID);
       ...
    </s:Module>

    //-----singleton class
        public class Tx extends EventDispatcher  implements ITx
        {
            public function Tx()
            {
                // Add listeners
                addEventListeners();
            } 
            private static var instance:Tx;
            public static function getInstance():Tx
            {
                if (!instance)
                {
                    instance = new Tx();
                    // Generate a random instance ID
                    instance._instanceID = Math.round(Math.random() * 100);
                    trace("create new itx id="+instance.instanceID);
                }else{
                    trace("use old itx id="+instance.instanceID);
                }

                return instance;
            }
            protected var _instanceID: Number = NaN;

            public function get instanceID(): Number
            {
                return _instanceID;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:56:22.203

我认为您的问题与加载模块的上下文有关。在您的情况下，我猜您的所有模块都加载到相同的上下文中。在一种情况下，一个类只有一个版本。因此，您的 Singleton 只有一个实例。如果你想拥有单独的类，你必须将每个模块加载到它自己的上下文中。看看这个链接，它很好地解释了上下文的东西：http: //livedocs.adobe.com/flex/3/html/help.html?content= [05_Display_Programming_33.html](http://livedocs.adobe.com/flex/3/html/help.html?content=05_Display_Programming_33.html)

# zend-framework - Zend 框架 AjaxLink addHelperPath

> ID：11698118
> 
> 赞同：3
> 
> 时间：2012-07-28T03:54:27.273
> 
> 标签：zend-framework

引导带.php：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
protected function _initView()
    {

        // Initialize view
        $view = new Zend_View();
        $view->doctype('XHTML1_STRICT');        
        $view->headTitle('Book Store');
        $view->headScript()->setFile('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js');
        $view->headScript()->appendFile('../../js/jquery.pagination.js');

        $view->headLink()->setStylesheet('../../css/style.css');
        $view->headLink()->appendStylesheet('../../css/pagination.css');
        $view->headLink()->appendStylesheet('../../css/formError.css');

        $view = new Zend_View();
    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');

    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
           return $view;
    }

} 
```

索引.phtml：

```
<?php echo $this->ajaxLink("Show me something",
                    "test",
                    array('update' => '#content'));?>

<div class="left_content">
    <div class="title"><span class="title_icon"></span>Featured books</div>
    <div class="title"><span class="title_icon"></span>New books</div> 

           <div class="new_products">
            <div id="content"> </div>
    <?php

    $result=$this->result; 
        foreach($result as $bookName){
            ?>

                         <div class="new_prod_box">
                        <a href="details.html"><b> <?php echo  $bookName['book'];  ?></b></a>
                        <div class="new_prod_bg">
                        <span class="new_icon"><img src="../../images/new_icon.gif" alt="" title="" /></span>
                        <a href="details.html"><img src="../..<?php echo $bookName['pic']; ?>" alt="" title="" class="thumb" border="0" /></a>
                        <input class="register"  type="button" value="AddtoCart">
                        </div>           
                    </div>

            <?php
        }

    ?>          
            </div> 

        <div class="clear"></div>
        </div><!--end of left content--> 
```

在这里，我的 ajaxlink() 不起作用，它重定向到“应用程序错误页面”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:42:37.143

路线“测试”真的有效吗？因为如果它不存在就可以解释为什么你会得到一个应用程序错误页面

# objective-c - UIWebView 在应用程序启动时显示网页？

> ID：11698124
> 
> 赞同：0
> 
> 时间：2012-07-28T03:57:27.370
> 
> 标签：objective-c, macos, cocoa, uiwebview

我正在尝试`UIWebView`在启动我的 Mac 应用程序时启动一个 URL。

我从这个开始，

**视图控制器.h**

```
#import <Cocoa/Cocoa.h>

@interface ViewController : UIViewController {
    IBOutlet UIWebView *webView;
}
@property (nonatomic, retain) UIWebView *webView;
@end 
```

**视图控制器.m**

```
#import "ViewController.h"

- (void)viewDidLoad {
NSString *urlAddress = @"http://google.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
} 
```

有了这个，我得到了两个我无法弄清楚的错误。

1.  (ViewController.h)*`@interface ViewController : UIViewController {`*

    *   **错误**-`Cannot find interface decleration 'UIViewController', superclass of 'ViewController'`
2.  (视图控制器.m)*`- (void)viewDidLoad {`*

    *   **错误**-`Missing context for method declaration`

我不是很熟悉，也找不到我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:10:26.890

对于 OSX 应用程序，您没有`UIViewController`，相反，您有`NSWindowController`和`NSViewController`，请查看[Mac Developer Library](https://developer.apple.com/library/mac/navigation/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:40:40.907

**您正在使用 IOS 功能而不是 OSX。**

尝试这个

在你的 .h 文件中

```
#import  <WebKit/WebKit.h>

  WebView *myWebView; 
```

在您的 .m 文件中

```
- (void)windowDidLoad

{

       NSString *urlAddress = @"http://google.com";
       NSURL *url = [NSURL URLWithString:urlAddress];
       NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
       [[myWebView mainFrame] loadRequest:requestObj];

} 
```

**不要忘记包含“webkit.framework”**

# qt - 如何使 QWizard 中的“Final”按钮在 pyQt/Qt 中默认不突出显示

> ID：11698125
> 
> 赞同：0
> 
> 时间：2012-07-28T03:57:27.087
> 
> 标签：qt, pyqt4

我有一个带有 QLayoutForm 页面的 QWizard。LayoutForm 中有一个编辑框，您可以在其中键入描述，但不能按回车键换行，因为这会导致页面前进。目前我正在用一个初始化事件覆盖默认的 QWizard，该事件也包括这个

```
class MapWizard (QtGui.QWizard):
    def __init__(self, parent=None):
        super(MapWizard, self).__init__()
        self.setOption(QtGui.QWizard.NoDefaultButton, True)
        self.addPage(IntroPage())
        self.addPage(SettingsPage())
        self.setWindowTitle("Map Wizard")
        self.show() 
```

如果它有任何帮助，这里是描述框的类

```
class DescriptionBox (QtGui.QLineEdit):
def __init__ (self, parent=None):
    super(DescriptionBox, self).__init__()
    self.setAlignment(QtCore.Qt.AlignTop)
def sizeHint(self):
    return(QtCore.QSize(200,200)) 
```

但是 NoDefaultButton 似乎没有做任何事情。它不会导致错误，但它仍然无法解决我默认选择“Final”和“Next”按钮的问题，即使您将注意力集中在 lineEditText 框中，它们也会被聚焦。

我正在使用 PyQt 版本 4 (Windows)，但来自 Qt 的解决方案应该与我需要的非常相似：使其可以在 QWizard 中按 Enter 键而无需前进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:21:21.877

如果您使用 QLineEdit，则 Enter 被解释为推进向导。改用 QTextEdit。

# image - 获取瓦片集中瓦片的左上角位置

> ID：11698131
> 
> 赞同：1
> 
> 时间：2012-07-28T03:59:17.560
> 
> 标签：image, algorithm, tile

我有一个tileset（一个充满其他小图像的图像）。我想得到一张叫做瓷砖的小图像，这样我就可以用它做点什么了。我知道每个图块的大小（它们的大小都相同）。我有两个方程：

```
x = (i % tiles_hor) * tile_h
y = (i % tiles_ver) * tile_w

x = (i % tiles_hor) * tile_w
y =  (i / tiles_hor) * tile_w 
```

其中**i**表示我想要获取的图块的索引；
**tiles_hor**是水平的瓦片数；
**tiles_ver**是垂直的瓦片数；
**tile_w**和**tile_h**分别是tileset内每个tile的宽度和高度；

瓦片按顺序接收它们的索引，如下所示：

```
01 02 03 04 05 
06 07 08 09 10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25 
```

所以每一对数字都是tileset中一个tile的索引。假设我想要获得 04 的瓷砖（假设瓷砖的每个尺寸为 32x32）：使用第一个等式：

x = (4 % 5) * 32 = 128。所以它在图像内的x位置是128
y = (4 % 5) * 32 = 0。所以它在图像内的y是0；

使用第二个等式：
x = (4 % 5) * 32 = 128。所以它在图像中的 x 位置是 128
y = (4 / 5) * 32 = 0。这里是 0，因为我们首先四舍五入第一个最接近的次要号码的表达（我不知道我的表达是否正确。如果不是，请纠正我）。

请注意，我们正在考虑一个完美的方形图块集（在本例中为 5x5）

我的问题是：
第二个适用于大多数情况。当没有完美的正方形tileset并且高度很高时，第一个停止工作。那么我在那里做错了什么？

此外，释放一个非常重要的值（tiles_ver 和 tile_h）的方程怎么可能是正确的？我在那里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:07:51.833

```
x = ((i - 1) % tiles_hor) * tile_w
y = ((i - 1) / tiles_hor) * tile_h 
```

# html - 将 html 添加到 link_to

> ID：11698138
> 
> 赞同：0
> 
> 时间：2012-07-28T03:59:41.097
> 
> 标签：html, css, ruby-on-rails, actionview

如何将以下 html 添加到我的 link_to

```
<i class="icon-plus icon-white"></i>

<%= link_to 'add', '#', :class => 'btn btn-mini pull-right'%></th> 
```

这样将生成的 html 将如下所示

```
<a class="btn btn-mini pull-right" href="#">
<i class="icon-plus icon-white"></i>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:04:18.097

查看[这个问题](https://stackoverflow.com/questions/9401942/using-link-to-with-embedded-html/9401988#9401988)的答案，我在这里回答的内容几乎完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:41:09.597

查看[文档](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to/)以获取更多信息，但您有两个主要选择。我更喜欢第二种选择，但这取决于你！

1.  内联它。

    ```
    <%= link_to '<i class="icon-plus icon-white"></i>', '#', :class => 'btn btn-mini pull-right'%> 
    ```

2.  把它放在一个块里。

    ```
    <%= link_to(@user) do %>
      <i class="icon-plus icon-white"></i>
    <% end %> 
    ```

# php - 使用 PHP 读取 csv 文件时如何解决未定义的偏移量。？

> ID：11698140
> 
> 赞同：2
> 
> 时间：2012-07-28T03:59:57.680
> 
> 标签：php, mysql, csv

你好，所有如此善良的人总是在那里帮助我们。我需要使用 php 将 csv 文件导入 mysql。我到目前为止的代码如下：

步骤：进行所有相应的验证。建立一个mysql连接。

```
 //process the csv file
   $handle = fopen($_FILES['file']['tmp_name'], "r");
   while (($data = fgetcsv($handle, 1000, ";")) !== FALSE) {
    $att0 = mysql_real_escape_string($data[1]);
    $att1 = mysql_real_escape_string($data[1]);
    $att2 = mysql_real_escape_string($data[2]);
        etc, etc.
   $sql = "INSERT INTO Alumnos etc, etc.";
   mysql_query($sql); 
```

错误：注意：未定义的偏移量：第 58 行 D:\www\studentAdministrator\imports\importar1.php 中的 1

我会很感激任何帮助。提前致谢。

我解决了我的问题。我用逗号更改了分号我感谢已经发布的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:04:45.560

在传递和使用变量之前检查您的变量，如下所示：

```
if(isset($data[1]))? $att0 = mysql_real_escape_string($data[1]) : $att0='null'; 
```

您可以将其设置为您喜欢的任何值，只是认为您可以通过这种方式轻松地看到 NULL。

如果您知道 CSV 文件将缺少列，但始终以正确的顺序排列（在这种情况下可能不是一个很好的示例，但值得一提），您还可以执行以下操作：

```
for($i=0;$i<count($data);$i++)
{
    echo 'Value '.$i.' is: '.$data[$i].'\n';
} 
```

这将解析每行有多少项目，您可以使用它们而不必担心数量。同样，在您的情况下，可能不是最好的，但值得一提。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:05:05.507

正如我在评论中所说，这可能是由于导出了最后包含空白单元格的行。一些实用程序将在最后一个单元格之后结束该行，而不是放入适当数量的分隔符。检查您的文件，如果这是问题所在，您可以在脚本中添加一些逻辑来处理它 -`isset()`在尝试使用它之前检查每个索引，如果它不存在，请替换一个空字符串 (或 null，或用于文件中其他地方的空单元格的任何内容）。

# javascript - 返回 JSONP 的服务

> ID：11698141
> 
> 赞同：0
> 
> 时间：2012-07-28T04:00:13.667
> 
> 标签：javascript, jquery

我听说过 JSONPand 想通过实时服务（flickr 除外）来尝试它。谁能在 jquery/javascript 中给我一个关于如何调用此服务的非常简单的示例？另外我如何有效地拉大图像（> 1MB）。有没有办法在通话过程中添加进度条

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:08:14.000

Twitter、Flickr、WUnderground 等。

# javascript - JQuery .click, nor .on("click", ...) 使用 ASP .NET 和使用函数创建的 twitter-boostrap 元素

> ID：11698148
> 
> 赞同：1
> 
> 时间：2012-07-28T04:01:57.470
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, drop-down-menu

我尽我所能尝试措辞这个问题......如果不清楚，我很抱歉，但这是我的问题。

这是我的 .js 文件”

```
 $(function()
 {
     $(".dropup").on("click", function(e) { alert(''); });

     $(".chat-friend").click(newChat);
 });

 function newChat()
 {          
    var chatboxExpandedHTML = '<ul id="chatwindow-expanded" class="dropdown-menu">' +
                            '<li><span style="background-color:red"></span></li>' +
                            '<li><b>Bob:</b></li>' +
                            '<li>I like mashed taters.</li>' +
                            '<li><b>You</b></li>' +
                            '<li>I like mashed taters too.</li>' +
                            '<li>And chicken too.</li>' +
                            '<li><b>Bob:</b></li>' +
                            '<li>We can\'t be friends any more.</li>' +
                            '<li><input type="text" class="chatter" placeholder="Type something…"></li>' +
                            '<li class="divider"></li>' +
                          '</ul>';
    var chatboxMiniHTML = '<li class="dropup">' +
                          '<span class="message-box dropdown-toggle" data-toggle="dropdown"><b>Test123</b></span>'
   + chatboxExpandedHTML +
                          '</li>';

    $('#chatbar-center').append(chatboxMiniHTML);
 } 
```

这是视图以防万一。

```
<%@ Control Language="C#" ClassName="Octgn.App.c" %>
<link href="../../Content/css/ChatbarStyle.css" rel="stylesheet" type="text/css" />
<script src="../../Content/js/chatservice.js" type="text/javascript"></script>

<div class="chatbar">
    <div class="navbar">
        <div class="navbar navbar-fixed-bottom">
            <div class="navbar-inner">
                    <ul id="chatbar-left" class="nav pull-left">
                        <li><a href="#"><i class="icon-cog icon-white"></i>Settings</a></li>
                        <li class="divider-vertical"></li>
                    </ul>
                    <ul id="chatbar-center" class="nav">

                    </ul>
                    <ul id="chatbar-right" class="nav pull-right">
                        <li class="divider-vertical"></li>
                        <li class="chat-availability"></li>
                        <li class="dropup">
                          <a href="#" id="friends" class="dropdown-toggle" data-toggle="dropdown">Friends(1)</a>
                          <ul id="friendslist" class="dropdown-menu">
                            <li><a href="#" class="chat-friend">Alice</a></li>
                            <li><a href="#" class="chat-friend">Bob</a></li>
                            <li class="divider"></li>
                          </ul>
                        </li>
                        <li class="divider-vertical"></li>
                        <li class="notifications">1</li>
                    </ul>
                </div>
        <div>
    </div>
</div> 
```

这是有效的：我单击具有 .chat-friend 类的元素，并且具有 .message-box 类的元素附加到 #chatbar-center 就好了。那里没有问题。

我单击它创建的按钮，它创建了带有 .chatwindow-expanded 类的下拉菜单，其中包含输入的元素，很好。

在创建消息框时，事件不起作用。当我单击朋友列表时会显示警报，但不会显示消息框，即使他们是 dropups 类中的机器人。

我在这里做错了什么？是因为它是在函数中创建的，并且事件是在创建元素之前创建的吗？是因为字符串使用的是“+”而不是“\”吗？我尝试使用它，但该按钮甚至不会显示，并且它与“+”一起使用。

因为这个，我的头在砰砰直跳。我已经尝试过 .on("click", ...) 和 .click(...); 的变体；我也试过把 $('input') 和 $('li') 等等......很多不同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:12:18.397

> 是因为它是在函数中创建的，并且事件是在创建元素之前创建的吗？

是的。使用事件委托来解决这个问题

```
 $("#chatbar-center").on("click", '.dropup', function(e) { alert(''); });
 $("#chatbar-center").on('click', ".chat-friend", newChat); 
```

这意味着将绑定到事件`.dropup`的所有后代（当然需要当时存在）`#chatbar-center``#chatbar-center`

# jquery - Fancybox 不适用于插件域

> ID：11698151
> 
> 赞同：0
> 
> 时间：2012-07-28T04:02:24.417
> 
> 标签：jquery, fancybox, addon-domain

**更新：好的，这个问题现在解决了。这是由于我在饼干上犯的愚蠢错误，这发生了，谢谢大家的帮助**

我面临一个非常奇怪的问题，实际上我已将域 [http://www.mickesutmaning.se/] 作为插件添加到我的 hostmonster 服务器并将其链接文件夹 linkdoo.com/oc 我的问题是 fancybox 正在使用 linkdoo。 com/oc 但不在[http://www.mickesutmaning.se/](http://www.mickesutmaning.se/)

请帮我

```
 $.fancybox.open({
    href : 'http://socialnetworkdeal.com/code_paste.php?c_id='+id,
    type : 'iframe',
    padding : 5,
    scrolling : 'no'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:41:25.647

我有一个疯狂的猜测（因为我遇到过这个问题）——切换域时，浏览器会重新缓存你的所有文件。由于 index.php 首先被调用，fancybox 可能会在 fancybox.js 加载之前被调用。

尝试使用 jQuery 的 document ready 函数来包装你的 fancybox 调用，如下所示：

```
$(document).ready(function() {
    $.fancybox.open({
        href : 'http://socialnetworkdeal.com/code_paste.php?c_id='+id,
        type : 'iframe',
        padding : 5,
        scrolling : 'no'
    });
}); 
```

这允许 jQuery 在尝试实例化 fancybox 之前等到所有文件都加载完毕。请让我知道这是否有效。如果您尝试此操作后仍有问题，请提供代码示例。

# c# - 在 C# 中使用 youtube api 或 gdata 搜索指定日期范围内的 youtube 视频

> ID：11698154
> 
> 赞同：0
> 
> 时间：2012-07-28T04:03:28.203
> 
> 标签：c#, youtube-api, date-range

我已经阅读了谷歌开发者资源，但没有得到我正在寻找的答案。我正在尝试编写查询以从指定日期范围内的频道中获取列表视频。这可以做到吗。

您可能特别针对 .Net 的任何示例或建议都会很棒。

好吧，我有每天晚上运行的时间表，然后从 facebook、twitter 和链接中获取线程。我可以使用 oauth 并编写主观查询来为给定日期范围（例如从昨天到今天）从每个社交 API 返回结果集。

只是无法；似乎找不到任何适用于 youtube api 的东西。

谢谢

# java - 如何删除这些烦人的点和箭头？

> ID：11698155
> 
> 赞同：1
> 
> 时间：2012-07-28T04:03:51.547
> 
> 标签：java, customization, options

出于某种原因，我所有的 java 文件都有这些烦人的点和箭头：

[http://www.flickr.com/photos/83641494@N05/7660025484/in/photostream](http://www.flickr.com/photos/83641494@N05/7660025484/in/photostream)

有谁知道如何删除这些字符？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:10:47.030

JCreator LE 5的[功能列表](http://www.jcreator.com/features.htm)包括：

> 选项卡和空格的可见显示

你想把它关掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:09:17.670

如果您使用的是 NetBeans：[如何在 NetBeans 中显示/显示隐藏或不可见的字符？](https://stackoverflow.com/questions/1437913/how-to-show-reveal-hidden-or-invisible-characters-in-netbeans)

但总的来说，您的选项或偏好将在某处具有“显示隐藏/不可见”字符选项。

# iphone - 核心文本的离岸渲染到后台线程

> ID：11698156
> 
> 赞同：0
> 
> 时间：2012-07-28T04:03:52.217
> 
> 标签：iphone, objective-c, ios, ipad

我刚刚观看了一个关于并发和 UIKit 的 WWDC 2012 视频，它展示了如何在后台线程上渲染图像。基本上不是使用 drawRect，而是将上下文转换为后台线程中的图像，然后显示它.

我想用核心文本达到相同的结果..这可能吗？

# java - 抽象几个 java 文件使用的相同导入调用

> ID：11698157
> 
> 赞同：1
> 
> 时间：2012-07-28T04:04:03.640
> 
> 标签：java, include

我熟悉Java，但我仍在尝试弄清楚一些概念。

假设我有*FileA.java*和*FileB.java*。两个文件在文件头使用相同的导入调用，例如：

```
FileA.java:

import java.util.Scanner;
import java.io.*;
{some code}

FileB.java

import java.util.Scanner;
import java.io.*;
{some code} 
```

我在其他语言中看到，当您有多个源代码文件使用的公共库时，您将其抽象为一个共享文件，然后您可以在源代码文件中调用该文件，从而有助于减少维护并且必须重新键入它们几个次。因此，对于上面的示例，我们可以执行以下操作：

```
Common.lib:

import java.util.Scanner;
import java.io.*;

FileA.java:

include Common.lib;
{some code}

FileB.java:
include Common.lib;
{some code} 
```

所以我有以下问题，如果有人能澄清一下，我将不胜感激，因为我承认我对这个话题一无所知：

1.  这在Java中可行吗？
2.  这是一个好主意/最佳实践吗？是/否 为什么？
3.  如果这不是一个好习惯，那么你如何处理必须为每个使用相同的 java 文件键入相同的导入头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:35:42.683

> 这在Java中可行吗？

不。

> 这是一个好主意/最佳实践吗？是/否 为什么？

如果不求助于预处理器之类的东西，这是不可行的……这使它成为非 Java 解决方案，绝对不是“最佳实践”。

> 如果这不是一个好习惯，那么你如何处理必须为每个使用相同的 java 文件键入相同的导入头？

我使用 IDE 来处理它，该 IDE 允许我在不想查看导入语句时隐藏它们。即使在过去我使用哑（-ish）文本编辑器编写 Java 时，我也从未发现这是一个重大问题。（但话又说回来，经过 30 多年的专业编程和 20 多年不同的编程语言，我学会了容忍轻微的句法刺激。）

* * *

如果您查看 James Gosling 和 Henry McGilton 的早期[Java 白皮书](http://java.sun.com/docs/white/langenv/)，您会发现排除 #include（和 typedef）的优势之一如下：

> *“通过消除所有这些包袱，Java 变得非常无上下文。程序员可以阅读和理解代码，更重要的是，可以更快、更轻松地修改和重用代码。”*

换句话说，您不必浏览迷宫般的包含文件来找出主源文件中的给定标识符所指的内容。这些信息都在类源文件中（假设您不使用`*`导入......我不使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:10:15.963

可悲的是，这在 Java 中是不可行的。

# linux - Linux中的全局或局部线性地址空间？

> ID：11698159
> 
> 赞同：3
> 
> 时间：2012-07-28T04:04:18.237
> 
> 标签：linux, memory-management, address-space

在linux中，由于段的基数都是0，所以逻辑地址与线性地址重合（《理解linux内核》一书）。我认为不同进程的逻辑地址可能相同，所以不同进程的线性地址可能相同，每个进程查看4GB，每个进程都会有自己的线性地址空间（本地地址空间）。但是其他一些文章说所有进程共享一个很大的线性地址空间，并且使用段机制将不同的进程映射到线性地址空间的不同部分。听起来像是具有更宽地址位的全局线性地址空间。我哪里错了？或者它们用于不同的架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T05:40:37.873

每个 Linux[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)都有自己的[地址空间](http://en.wikipedia.org/wiki/Address_space)；它是[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)。不同的进程有不同的地址空间（但一个进程内的所有线程共享相同的地址空间）。

您可以通过读取 或从进程内部获取`1234`Linux 上的进程图`/proc/1234/maps``/proc/self/maps`

尝试以下命令

```
 cat /proc/$$/maps
 cat /proc/self/maps 
```

并考虑他们的输出；第一个命令显示你的 shell 的内存映射；第二个显示正在运行的进程的内存映射`cat`

地址空间在程序启动时使用[execve(2)设置，并使用](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)和相关的[系统调用](http://en.wikipedia.org/wiki/Syscall)进行更改。

应用程序仅通过系统调用与内核交互。内核有一个“不同的”地址空间，你不应该关心它（除非你在内核内部编码）。

还可以阅读一本好书，例如[Advanced Unix Programming](http://basepath.com/aup/)和/或[Advanced Linux Programming](http://www.advancedlinuxprogramming.com/)

另请参阅有关系统调用的[说明](https://stackoverflow.com/a/11609768/841108)。

请注意，分段寻址是 i386 特有的并且已过时：大多数系统不再使用它。它在 x86-64 的 64 位模式下完全消失了。所有 Linux 系统都使用[平面内存模型](http://en.wikipedia.org/wiki/Flat_memory_model)

^(请仔细阅读所有参考资料。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T10:02:58.490

Intel 支持 3 种地址：

逻辑地址——（段单元）——>线性地址——（分页单元）——>物理地址

如您所知，所有内核和用户代码访问数据或文本都认为是虚拟地址（CPU 中的逻辑地址）。地址转换为线性地址如下图：

![在此处输入图像描述](../Images/e350e61d71d55068c6c4d089bb08a28c.png)

由于 linux 实现不支持线性寻址的概念，段仅用于权限控制。Linux 内核将每个段的偏移值配置为零。这就是为什么你看不到内核中的线性地址和内核直接在分页单元上使用虚拟地址的原因。

得到线性地址后，MMU 分页单元参考CR3 寄存器，得到调页表的基址，生成物理地址。

![在此处输入图像描述](../Images/a447fc00e087bb307629e5dc7f5606e8.png)

与 cpu 缓存相同，分页单元在每个 CPU 内核上也有一个 TLB 缓存，以加快在内存上执行的地址转换。

参考： [intel64软件开发者手册](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QFjAA&url=http://download.intel.com/products/processor/manual/253668.pdf&ei=wJyRUYT3J8qOlQXDioDQCA&usg=AFQjCNFP1iEex4YiE1Wcf2tDuab5OV_plQ&sig2=zY0t1bm-mt24BRz1pnYDiw&bvm=bv.46471029,d.dGI&cad=rja)

# java - JAXB 继承冲突 - 在子类上重新注释

> ID：11698160
> 
> 赞同：4
> 
> 时间：2012-07-28T04:04:22.837
> 
> 标签：java, xml, jaxb

我目前在我的项目中有这个环境：

```
public abstract class Foo {

   private List<Thing> things;

   public List<Thing> getThings() { return this.things; }
}

public abstract class Bar extends Foo {

   @XmlElements({@XmlElement(name = "first", type = First.class)})
   public List<Thing> getThings() { return super.getThings(); }

}

public class Bobar extends Bar {

   @XmlElements({@XmlElement(name = "second", type = Second.class)})
   public List<Thing> getThings() { return super.getThings(); }

} 
```

对于以下 XML 文档

```
<bobar>
   <first>blablabla</first>
   <second>blublublu</second>
</bobar> 
```

当我做

```
context = JAXBContext.newInstance("the.package.structure");
unmarshaller = context.createUnmarshaller();
Bar object = (Bar) unmarshaller.unmarshal("path-to-xml-document"); 
```

Bar`object`在集合中只有一个元素，而不是 2。该`First`元素完全丢失，当我尝试这样做时`object.getThings()`，它的大小为 1，集合中唯一的对象是`Second`. 有人可以帮助我如何获得集合中的两个对象吗？如果那不可能，我怎样才能实现类似的目标？

我这样做的原因是（在我的项目逻辑中）每个`Bobar`s things 集合`First`在它的集合中都有一个，但不是每个在它的集合中`Bar`都有一个`Second`，并且`Foo`是一个泛型类。

## 编辑：

当我更改 XML 文档中的顺序时，输出会有所不同。

```
<bobar>
   <second>blablabla</second>
   <first>blublublu</first>
</bobar> 
```

在这种情况下，我只得到`First`集合中的一个实例，并且`Second`丢失了。并且更多地改变场景，我得到了有趣的结果：

```
public abstract class Foo {

   private List<Thing> things;

   public List<Thing> getThings() { return this.things; }
}

public abstract class Bar extends Foo {

   @XmlElements({@XmlElement(name = "first", type = First.class), @XmlElement(name = "third, type = Third.class)})
   public List<Thing> getThings() { return super.getThings(); }

}

public class Bobar extends Bar {

   @XmlElements({@XmlElement(name = "second", type = Second.class)})
   public List<Thing> getThings() { return super.getThings(); }

} 
```

如果我做

```
<bobar>
   <third>bliblibli</third>
   <second>blablabla</second>
   <first>blublublu</first>
</bobar> 
```

理论上，我认为这不应该针对由此生成的 XML Schema 进行验证，因为这里的顺序不正确。但除此之外，在这种情况下，我得到`Second`and `First`，`Third`丢失了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:29:16.677

不可能在超类型上注释属性，并让子尝试逐步添加到该映射中。以下是一种支持您所追求的所有用例的方法。需要注意的一点是对象层次结构中的所有级别都将支持同一组元素。您需要使用外部验证方法来限制所需的值。

如果`Thing`是类而不是接口，`First`并且`Second`扩展，`Thing`那么您可能有兴趣使用`@XmlElementRef`而不是`@XmlElements`（请参阅：[http](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html) ://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html ）。它将为您提供更大的灵活性，但代价是一些验证（难以限制有效值的集合）。

**酒吧**

我们将注释`Bar`以`@XmlTransient`使 JAXB 实现不处理它。

```
package forum11698160;

import java.util.List;

import javax.xml.bind.annotation.XmlTransient;

@XmlTransient
public abstract class Bar extends Foo {

    public List<Thing> getThings() {
        return super.getThings();
    }

} 
```

**波巴尔**

`@XmlElementRef`对应于 XML 模式中的替换组的概念。与属性匹配的值将基于`@XmlRootElement`声明。

```
package forum11698160;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Bobar extends Bar {

    @XmlElementRef
    public List<Thing> getThings() {
        return super.getThings();
    }

} 
```

**事物**

由于 JAXB 实现不能使用反射来找到一个类型的所有子类，我们可以使用`@XmlSeeAlso`注解来帮助解决。如果您不使用此注解，那么在引导`JAXBContext`.

```
package forum11698160;

import javax.xml.bind.annotation.XmlSeeAlso;

@XmlSeeAlso({First.class, Second.class})
public class Thing {

} 
```

**第一的**

我们需要`First`注释 `@XmlRootElement`：

```
package forum11698160;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class First extends Thing {

} 
```

**第二**

`Second`还需要注释`@XmlRootElement`：

```
package forum11698160;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Second extends Thing {

} 
```

**演示**

```
package forum11698160;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Bobar.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11698160/input.xml");
        Bobar bobar =  (Bobar) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(bobar, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bobar>
    <first/>
    <second/>
</bobar> 
```

* * *

**其他文件**

以下是运行此示例所需的其他文件：

**富**

```
package forum11698160;

import java.util.*;

public abstract class Foo {

    private List<Thing> things = new ArrayList<Thing>();

    public List<Thing> getThings() {
        return this.things;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:23:13.830

以下是您如何通过利用来映射此用例`@XmlTransient`：

**波巴尔**

您不能在子类中扩展映射，因此您需要确保在进行`@XmlElements`映射时您会做所有事情（请参阅： [http ://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements .html](http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html)）。

```
package forum11698160;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Bobar extends Bar {

    @XmlElements({ 
        @XmlElement(name = "first", type = First.class),
        @XmlElement(name = "second", type = Second.class)
    })
    public List<Thing> getThings() {
        return super.getThings();
    }

} 
```

**酒吧**

您也不能覆盖继承的属性。所以我们需要`@XmlTransient`在类型级别使用来表明我们不希望我们的 JAXB 实现处理超类型（参见：[http ://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient .html](http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html)）。

```
package forum11698160;

import java.util.List;

import javax.xml.bind.annotation.*;

@XmlTransient
public abstract class Bar extends Foo {

    public List<Thing> getThings() {
        return super.getThings();
    }

} 
```

**演示**

以下演示代码可用于演示一切正常：

```
package forum11698160;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Bobar.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11698160/input.xml");
        Bobar bobar =  (Bobar) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(bobar, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<bobar>
   <first/>
   <second/>
</bobar> 
```

* * *

**其他文件**

以下是运行此示例所需的其他文件：

**富**

```
package forum11698160;

import java.util.*;

public abstract class Foo {

    private List<Thing> things = new ArrayList<Thing>();

    public List<Thing> getThings() {
        return this.things;
    }

} 
```

**事物**

```
package forum11698160;

public interface Thing {

} 
```

**第一的**

```
package forum11698160;

public class First implements Thing {

} 
```

**第二**

```
package forum11698160;

public class Second implements Thing {

} 
```

# regex - Cygwin中的Grep正则表达式

> ID：11698161
> 
> 赞同：0
> 
> 时间：2012-07-28T04:04:28.673
> 
> 标签：regex, grep

我在 Windows 上使用 Cygwin。我想从名称中恰好包含 9 个字母的文件中提取所有行。

为此，我正在使用：

```
cat filename.txt | grep -P "[a-z]{9}" 
```

但是，这也会返回大小写不同且长度大于 9 的单词。

我什至将环境变量 LC_ALL 设置为 C。

我能够完成这项工作：

猫文件名.txt | grep -P "^[az]*[az]$"

这仅显示带有小写字符的单词。

请注意，我在 Cygwin 中运行命令，并且我观察到 Cygwin 和 Linux Distro 之间存在某些差异。这些命令的工作方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:05:56.980

尝试

```
cat filename.txt | grep -P "^[a-z]{9}$" 
```

> ^ = 字符串的开头
> 
> $ = 字符串结尾

您的正则表达式返回包含长度为 9 的倍数的小写字母的所有单词。

# php - 如何使用组合框（选择）值重新加载页面？

> ID：11698163
> 
> 赞同：1
> 
> 时间：2012-07-28T04:04:53.700
> 
> 标签：php, javascript, select, combobox

我有一个组合框 - `combo1`. 每次更改组合框值时，我都应该有一个按钮来提交该值并重新加载页面。我想以 开始`mysite/value?v=1`和结束`mysite/value?v=2`。这是我到目前为止所拥有的：

**Javascript**：

```
function nav() {
    var selObj = document.getElementById("combo1");
    valor = selObj.options[selObj.selectedIndex].value;
    // reload the page
} 
```

**HTML**：

```
<input type="button" onclick="nav()" value="Ok" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:11:35.003

您正在寻找`window.location`：

```
function nav(){
    var selObj = document.getElementById("combo1");

    valor = selObj.options[selObj.selectedIndex].value;
    window.location = 'mysite/value?v=' + valor;
} 
```

# android - android 代码中存储了手机的名称/型号，它是如何存储在那里的？

> ID：11698169
> 
> 赞同：1
> 
> 时间：2012-07-28T04:05:58.603
> 
> 标签：android, usb, linux-device-driver, android-framework, mtp

我想知道的是 Android 手机在连接为**MTP**时如何发布它的名称，以便它出现在我的计算机上。我相信**mtp/usb**驱动程序从上层获取价值，例如框架层中的**mtp/usb** java 类。我想尝试通过 Android 代码本身更改出现在计算机上的名称。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:18:41.730

`/system/build.prop`是存储电话特定描述和属性的位置。如果您具有 root 权限，则可以对其进行编辑。该文件中的相关字段如下

![字段](../Images/73d74225d46f0c9cac0a1cd3af80877c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:25:47.207

查看[Build](http://developer.android.com/reference/android/os/Build.html)类。这可能是你想要的。

# c# - 如何在 Windows Phone 7 中的对象上设置结构类型的字段

> ID：11698172
> 
> 赞同：2
> 
> 时间：2012-07-28T04:06:32.040
> 
> 标签：c#, reflection, boxing, fieldinfo

我在 Windows Phone 7 应用程序中的对象上设置字段时遇到问题（我怀疑它与紧凑框架有关，而不是特定于 Windows Phone 7）。我相信这是特定于设置`struct`类型的值。通常我使用以下内容：

```
// fieldName is the name of the field I'm interested in setting
FieldInfo fieldInfo = target.GetType().GetField(fieldName);

// target is the object I'm setting the value on
// value is the value that I am setting
fieldInfo.SetValueDirect(__makeref(target), value); 
```

不幸的是`SetValueDirect`，Windows Phone 7 上不存在，并且简单地使用`SetValue`不会对目标做任何事情。是否有另一种方法可以`struct`通过反射在 WP7 上设置字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:25:36.167

您必须将结构装箱，使用 SetValue**和 unbox**。不是很优雅，但结构通常应该是只读的另一个很好的理由。目前，您可能正在省略最后一步（通过使用隐式框而不捕获框，是否丢弃了对装箱值的更改）。视觉上：

```
MyStruct val = ...
object boxedVal = val;
fieldInfo.SetValue(boxedVal, newValue);
val = (MyStruct)boxedVal; 
```

更一般地说，元编程在 CF 上相当薄弱。如果您经常这样做，有办法通过完整的 .NET*提前*进行元编程，检查 CF 程序集并生成一个封装了您需要的功能的 CF 程序集。为此，我已经成功使用 IKVM.Reflection （内置的 .NET 反射*无法*做到这一点）。

# c++ - QFile 接受多个参数？

> ID：11698175
> 
> 赞同：0
> 
> 时间：2012-07-28T04:07:28.453
> 
> 标签：c++, qt, qfile

我有一堂课：

```
Class MyClass
{
    void myMember();
    ///code etc
    private:
        QFile fileMBox; 
} 
```

在班级成员中，我尝试使用：

```
void MyClass::myMember()
{
    fileMBox ("myFile.txt");
} 
```

我收到一条错误消息：“错误：C2064：术语不会评估为采用 1 个参数的函数”但文档说要使用：

```
QFile file("in.txt"); 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:09:36.910

您提出的文档是一个构造函数。它是在实际制作对象时调用的，而不是稍后调用。你表现得好像对象是一个仿函数，在对象生成后“调用”它。

要使用构造函数，您可以使用文件名初始化您的成员：

```
MyClass::MyClass() : fileMBox ("myFile.txt") {} 
```

但是，没有使用过 Qt，我不知道它是否会打开它。如果确实打开它，请改用以下内容：

```
MyClass::MyClass() {
    fileMBox.setFileName ("myFile.txt");
} 
```

现在您的函数只需要每次打开、使用和关闭它：

```
void MyClass::myMember() {
    if (!fileMBox.open (QIODevice::ReadOnly | QIODevice::Text))
        //handle error

    //read file and do whatever

    fileMBox.close(); 
} 
```

# javascript - 如何使用 javascript 获取重定向 URL？

> ID：11698178
> 
> 赞同：9
> 
> 时间：2012-07-28T04:08:08.820
> 
> 标签：javascript, redirect

我在使用我正在使用的自动化工具显示带有重定向的 url 时遇到问题，所以我正在考虑在打开弹出窗口之前先检查重定向的 url。

是否可以使用 javascript 获取重定向 URL（没有 jquery 或其他 js 框架，因为该工具不支持）？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T04:53:22.363

理论上，是的。在实践中，可能不会。

理论上，您可以对 URL 进行 XHR 头请求，然后检查位置标头以查看您所要求的是否是您最终得到的。XHR 将自动遵循 301/302 重定向，因此检查状态代码没有用 - [XHR HEAD 请求是否可能不遵循重定向 (301 302)](https://stackoverflow.com/questions/3820663/is-it-possible-for-xhr-head-requests-to-not-follow-redirects-301-302?rq=1)

实际上，除非您要询问的域是*您的域*，或者有`Access-Control-Allow-Origin`标头（我认为是标头），否则请求将由于跨站点请求限制而失败。[Chromium 上的 HEAD XMLHttpRequest](https://stackoverflow.com/questions/2603581/head-xmlhttprequest-on-chromium)

如果您可以访问运行您的工具的服务器，您应该能够启动一个发出 HEAD 请求的“代理”页面，然后您可以 XHR 调用您的服务器页面，它会返回 HEAD 请求所说的位置d 结束。

# java - 从两个 Java Collection 对象中获取两个唯一值

> ID：11698185
> 
> 赞同：3
> 
> 时间：2012-07-28T04:09:35.270
> 
> 标签：java, collections, unique

我想从两个 Collection 对象中获取唯一值。我该怎么做？示例：让我们取两个`ArrayLists`：

```
List bag1 = new ArrayList(); 
List bag2 = new ArrayList();

bag1.add("1");
bag1.add("2");
bag1.add("3");
bag1.add("7");
bag1.add("8");
bag1.add("9");

bag2.add("4");
bag2.add("5");
bag2.add("6");
bag2.add("7");
bag2.add("8");
bag2.add("9"); 
```

我需要得到类似 --> 1,2,3 from`bag1`和 4,5,6 from的结果`bag2`

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:17:38.040

两件事情：

1.  使用 org.apache.commons.collections.CollectionUtils.disjunction(Collection a, Collection b);
2.  Bag 不是列表的最佳变量名称。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:14:41.523

你应该看看 Sets 。Java Collection 有几个类可以处理这个问题。这个想法是你可以只是两个集合之间的设定差异，你会得到你的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:14:44.447

使用“集合”来存储您的数据。这样，当您将元素添加到集合中时，您的集合将具有独特的元素。

请参阅此处的 javadoc：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T04:50:03.283

你有没有尝试过...

```
bag1.removeAll(bag2); 
```

如果你想保持 bag1 和 bag2 完好无损，你可以使用 Set 变量并将所有值传递`bag1`给 the`Set`然后检查`contains()`类似

```
 Set set = new HashSet();
    set.addAll(bag2);
    for(Object o: bag1){
        if(!set.contains(o)){
            // Do whatever you want with bag1 elements
        }
    }
    set.clear();

    set.addAll(bag1);
    for(Object o: bag2){
        if(!set.contains(o)){
            // Do whatever you want with bag2 elements
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T05:30:26.533

使用[Set 接口](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/Set.html#re)`removeAll`中定义的方法。

```
Set intersect = new TreeSet(bag1);  
intersect.removeAll(bag2);  
List unique1 = Arrays.asList(intersect);  

intersect = new TreeSet(bag2);  
intersect.removeAll(bag1);  
List unique2 = Arrays.asList(intersect); 
```

# android - 安卓设备不工作

> ID：11698188
> 
> 赞同：0
> 
> 时间：2012-07-28T04:10:10.727
> 
> 标签：android, soap, android-emulator, device

我已经使用soap webservices开发了一个计算示例。它在我的模拟器上运行良好。但它在我的android真实设备上不起作用。为什么dis在我的设备上不起作用。

dis 是我的代码：

```
package org.web.frontend.calculator;
import java.io.IOException;
import java.net.SocketException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.transport.ServiceConnection;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.util.Log;
public class AndroidWSDLFrontEnd extends Activity {

private String METHOD_NAME ="sum";
private String NAMESPACE = "http://calculator.backend.web.org";
private String SOAP_ACTION = NAMESPACE + METHOD_NAME; // NAMESPACE + method name
private static final String URL = "http://192.168.1.168:8085/Calculation/services /Calculate?wsdl"; // you must use ipaddress here, don’t use Hostname or localhost

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
TextView tv = (TextView) findViewById(R.id.txtAddition);

try
{
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("i", 15);
request.addProperty("j", 10);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION,envelope);
Object result = envelope.getResponse();
System.out.println("Result : " + result.toString());
((TextView) findViewById (R.id.txtAddition)).setText("Addition : "+result.toString());
} catch (SocketException E) {
 E.printStackTrace();
((TextView) findViewById (R.id.txtAddition)).setText("ERROR: "   +    E.getClass().getName() + ":" + E.getMessage());
  }
 catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
    } catch (XmlPullParserException e) {
// TODO Auto-generated catch block
e.printStackTrace();
  }
   }
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:10:53.963

听起来您与`http://192.168.1.168:8085/Calculation/services/Calculate?wsdl%22`. 你在移动网络上吗？如果是这样，请连接到 wi-fi 并尝试。此外，如果需要，您可能必须为您的网络配置代理或 VPN 以允许访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:23:59.840

检查您的移动 IP 地址并将其替换为您当前给定的 ipadrees

```
private static final String URL = "http://192.168.1.168:8085/Calculation/services /Calculate?wsdl"; 
```

请检查您使用的网络连接

# jquery - DOM元素子元素的jQuery多维数组

> ID：11698189
> 
> 赞同：0
> 
> 时间：2012-07-28T04:10:14.803
> 
> 标签：jquery, multidimensional-array

我正在尝试将 id 的 DOM 层次结构放入 javascript 数组中。（我正在使用可排序的 jQuery UI 重新排列 DIV 及其 toArray 并序列化呈现一个平面（非分层）结果）。

基于其他 SOF jfiddle 解决方案等构建的代码，这是我的沙箱：

**更新** [http://jsfiddle.net/rfwkQ/2/](http://jsfiddle.net/rfwkQ/2/)

如何遍历 DOM 子节点并将其 id 记录到多维数组中？

**编辑：**

```
function getChildren(elem) {
var parent = [];
if ($(elem).children().length !== 0) {
    $(elem).children().each(function() {

        if ($(this).find('> div').children().size() !== 0) {
            var child = getChildren(this);
            parent.push(child);
        } else {
            parent.push(this.id);
        }
    });
    return parent;
}
} 
```

我已经组装了上面的函数来尝试迭代 Div 和他们的孩子。返回多维数组中的 Div。

**进一步的问题** 这会在更高级别的嵌套 div 中创建一个空字符串元素。我怎样才能在我的逻辑中解决这个问题，而不是创建一个 if not empty 类型检查（无论如何这都是一个好主意，我说）。

沙盒 2.0：链接更新如下

**终于解决**了（感谢 freenode irc 上 #jquery 上的“shoky”）

[http://jsfiddle.net/rfwkQ/8/](http://jsfiddle.net/rfwkQ/8/)

```
function getChildren(elem) {
var parent = [];

$(elem).children('div').each(function() {
    parent.push( 
        $(this).children('div').length ? getChildren(this) : this.id);
});

return parent;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:20:16.013

您可以使用 DOM 节点的两个属性遍历 DOM：`firstChild`和`nextSibling`. 从 开始`document.body`，`firstChild`然后从那里开始查看每个`firstChild`，`nextSibling`这不是空的。

递归是最简单的，虽然不是最快的。

仅供参考，正如我在评论中所说，通常您不想构建自己的 DOM 副本，因为可以查询或遍历 DOM 以服务于几乎任何目的，而无需构建一个全新的结构副本，该副本立即被淘汰-更改后立即过期。

这里有一些简单的 javascript 来解决这个问题：

```
function getIdList(parent) {
    var list = [];
    var node = parent.firstChild;
    while (node) {
        if (node.nodeType == 1 && node.tagName == "DIV") {
            list.push(getIdList(node));
        }
        node = node.nextSibling;
    }
    // if no children, just return the id of the parent
    if (list.length == 0) {
        list = parent.id;
    }
    return(list);
} 
```

还有一个关于您的 HTML 的工作演示：http: [//jsfiddle.net/jfriend00/TLVr7/](http://jsfiddle.net/jfriend00/TLVr7/)（向下滚动查看嵌套数组的文本版本）。

# php - 无法从 symfony2 中的 innerHTML 获取变量

> ID：11698193
> 
> 赞同：-1
> 
> 时间：2012-07-28T04:11:20.080
> 
> 标签：php, symfony

我是 symfony2 的新手。我正在设计一个动态表单生成器。我已经获取了一个模板，它显示了动态表单并在文本区域中为该表单生成代码以获取我正在使用以下代码的模板：

```
public function newAction(Request $request)
{
    return $this->render('AcmeTaskBundle:Default:index.html.twig');
} 
```

单击提交时，我想在文本区域中获取该 innerHTML 的代码（我想在新模板中获取随机文本区域的值）。我正在使用以下代码来获取新模板，我应该怎么做才能获得该动态值。

```
public function subAction(Request $request)
{
    return $this->render('AcmeTaskBundle:Default:sub.html.php',array(''));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:13:04.733

正确的方法是访问

```
$request->request->get('name_of_the_textarea') 
```

在控制器中。您也可以考虑为此目的使用[表单组件。](http://symfony.com/doc/current/book/forms.html)

# windows-phone-7 - 无法通过 Windows Phone 计算以厘米为单位的距离

> ID：11698195
> 
> 赞同：0
> 
> 时间：2012-07-28T04:11:47.607
> 
> 标签：windows-phone-7, geolocation

我开发了一个应用程序来读取 windows phone 7 上两个位置之间的距离。但是在测试应用程序时，每当我移动几厘米时，它就会开始产生 13000 的价值。

```
 Public Sub watcher1_PositionChanged(sender As Object, e As GeoPositionChangedEventArgs(Of GeoCoordinate))
    Dim dCoord As GeoCoordinate
    Dim currentDistance As Double
    Dim convertedDistance As Double
    dCoord = New GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude)

    If mlastCoordinate.Latitude <> 0.0 Then

        'distanceText.Text = e.Position.Location.Latitude.ToString()
        currentDistance = mlastCoordinate.GetDistanceTo(dCoord)
        mDistance = startCoordinate.GetDistanceTo(dCoord)
        ' mDistance += currentDistance
        'mDistance = Math.Round(mDistance, 2)
        'Dim distance As String
        'distance = String.Format("%.2", mDistance)
        If selectedSystemState.Equals("centi") Then
            convertedDistance = mDistance * 100
        ElseIf selectedSystemState.Equals("meter") Then
            convertedDistance = mDistance
        ElseIf selectedSystemState.Equals("inches") Then
            convertedDistance = mDistance * 39.37
        ElseIf selectedSystemState.Equals("feet") Then
            convertedDistance = mDistance * 3.28
        End If

        convertedDistance = Math.Round(convertedDistance, 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:46:20.820

您获得的距离[以米为单位](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.getdistanceto.aspx)。所以，13000 厘米就是 130 米——除非我们知道你移动的是什么以及如何移动，否则这似乎是一个非常合理的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:30:32.113

您如何实例化定位服务 - 如果您不使用`GeoCoordinateWatcher(GeoPositionAccuracy.High)`，您可能会使用蜂窝塔数据，这些数据可能相差 100 米。

即使您使用 GPS，民用 GPS 装置的精度也只有 5-10m 左右，因此以厘米或英寸为单位测量距离确实超出了这些范围。

您可能应该检查`GeoCoordinate.HorizontalAccuracy`一下“噪音”可能是什么。

# javascript - 如何使用 JavaScript 禁用 html 表单元素？

> ID：11698198
> 
> 赞同：0
> 
> 时间：2012-07-28T04:12:22.137
> 
> 标签：javascript, jquery, html, dom

有两个选择按钮需要客户端验证。用户必须选择其中之一，如果用户选择其中之一，则另一个将自动禁用。

这是我的脚本：

```
<html>
   <head>
      <script type="text/javascript">
        function Check()  //this the funciton for diasbled
    {
      var x =document.getElementById("supexp1");
      var y =document.getElementById("supexp2");

      if(x.value != "")
      {
        document.form1.supexp2.disabled=true;
      }
      else if(y.value != "")
      {
        {
        document.form1.supexp1.disabled=true;
      }
      } 
    }

      </script>

   </head>
  <body>
    <form method="POST" action="destination.php" id="form1">
       <select name="SUPEXP" id="supexp1" data-native-menu="false" onChange="Check()">
           <option >Ekspedisi Local1</option>  //this selection 1 
           <option >Ekspedisi Local2</option>  //this selection 1 
           <option >Ekspedisi Local3</option>  //this selection 1

       </select>
    <select name="SUPEXP" id="supexp2" data-native-menu="false" onChange="Check2()">
           <option >Ekspedisi Expor2</option>  //this selection 2
           <option >Ekspedisi Expor2</option>  //this selection 2
           <option >Ekspedisi Expor2</option>  //this selection 2

    </select>
    </form>
  </body>
 </html> 
```

我使用 jquerymobile 框架并选择连接到数据库。该代码 (JavaScript) 未运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:44:59.403

我希望这是您根据您的描述尝试做的事情，这里是一个[**jsfiddle**](http://jsfiddle.net/dg8Cp/)

```
 $(document).ready(function() {
      $('#supexp1').change(function() {
      $('#supexp2').attr("disabled" , "disabled")
      });
      $('#supexp2').change(function() {
      $('#supexp1').attr("disabled" , "disabled")
      });    
    });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:17:26.817

我想要获得所选项目的价值，您需要使用类似这样的东西

```
 var e = document.getElementById("supexp1");
  var x = e.options[e.selectedIndex].value; 
```

代替

```
 var x =document.getElementById("supexp1"); 
```

对 Y 做同样的事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T05:06:36.070

试试这个代码

```
if(x.value != ""){
    document.getElementById("supexp2").disabled=true;
} else if(y.value != "") {
    document.getElementById("supexp1").disabled=true;
} 
```

# c# - 获取父节点及其子节点的树结构

> ID：11698200
> 
> 赞同：0
> 
> 时间：2012-07-28T04:13:01.993
> 
> 标签：c#, linq

请在下面找到表结构：

```
Folderid                    parentFolderid              Guid
1                           0                           1234
2                           1                           5678
3                           2                           9012
4                           3                           87697
5                           7                           4443 
```

要求是如果我通过 folderId 函数必须给我所有的指导。

例如：如果我传递`1`给函数，我应该得到前四个 Guid（父级及其子级）。我有一个返回所有 guid 的函数，如下所示：

```
public List<Guid> Folders(int folderId)
{ 
    // To get the folderids based on parentfolderid
    var a = entity.Where(x => x.parentfolderId == folderId).FirstOrDefault();
     return a;

} 
```

我最多只能获得一个级别的 ID。

有没有办法让父母，它的孩子，孙子直到叶子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:34:22.783

如果您能够将该表带到班级，请查看：

```
public class Entity
{
    public int ID { get; set; }
    public int ParentID { get; set; }
    public string Name { get; set; }

    public static List<Entity> GetTree(int ID, List<Entity> ListToSearch, bool First = true)
    {
        List<Entity> FilteredEntities = new List<Entity>();

        FilteredEntities.AddRange(ListToSearch.Where<Entity>(x => x.ParentID == ID).ToList<Entity>());

        List<Entity> Temp = new List<Entity>();
        foreach (Entity current in FilteredEntities)
        {
            Temp.AddRange(GetTree(current.ID, ListToSearch, false));
        }

        FilteredEntities.AddRange(Temp);

        if (First)
        {
            FilteredEntities.Add(ListToSearch.Where<Entity>(x => x.ID == ID).Single<Entity>());
        }

        return FilteredEntities;
    }
} 
```

用法：

```
 List<Entity> filteredEntities = Entity.GetTree(1, entities);
    List<string> onlyTheNames = filteredEntities.Select<Entity, string>(x => x.Name).ToList<string>(); 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T21:15:10.733

如果你使用这个[节点类](https://www.siepman.nl/blog/a-generic-tree-of-nodes-the-easy-way)，你可以这样写代码。

```
public class Folder
{
    public int Id { get; set; }
    public int? ParentId { get; set; }
    public Guid SomeGuid { get; set; }
} 
```

以及可能的示例是：

```
var list = new List<Folder>
{
    new Folder {Id = 0, ParentId = null, SomeGuid = new Guid("0000b25b-8538-4b78-818a-9094507e0000") },
    new Folder {Id = 1, ParentId = 0, SomeGuid = new Guid("1000b25b-8538-4b78-818a-9094507e0001") },
    new Folder {Id = 2, ParentId = 1, SomeGuid = new Guid("2000b25b-8538-4b78-818a-9094507e0002") },
    new Folder {Id = 3, ParentId = 1, SomeGuid = new Guid("3000b25b-8538-4b78-818a-9094507e0003") },
    new Folder {Id = 4, ParentId = 2, SomeGuid = new Guid("4000b25b-8538-4b78-818a-9094507e0004") },
    new Folder {Id = 5, ParentId = 3, SomeGuid = new Guid("5000b25b-8538-4b78-818a-9094507e0005") },
    new Folder {Id = 6, ParentId = 0, SomeGuid = new Guid("6000b25b-8538-4b78-818a-9094507e0006") },
    new Folder {Id = 7, ParentId = 4, SomeGuid = new Guid("7000b25b-8538-4b78-818a-9094507e0007") },
    new Folder {Id = 8, ParentId = 3, SomeGuid = new Guid("8000b25b-8538-4b78-818a-9094507e0008") },
};
var rootNode = Node<Folder>.CreateTree(list, n => n.Id, n => n.ParentId).Single();

var firstChild = rootNode.Children.First(); // Id 1
var descendentsOfFirstChild = firstChild.Descendants; // All descendants of node 1 
```

# javascript - 具有动态幻灯片创建功能的 JavaScript 滑块

> ID：11698203
> 
> 赞同：0
> 
> 时间：2012-07-28T04:13:32.833
> 
> 标签：javascript, jquery, slider

我正在寻找一个 JavaScript 库，纯 JS 或基于 JQuery，这将允许我创建一个类似于 AnythingSlider 或[http://basic-slider.com/demos/](http://basic-slider.com/demos/)的滑块。我正在寻找的最重要的功能是动态附加新幻灯片然后触发过渡到它的能力。过渡到任何幻灯片的能力也很重要。

我调查过的大多数库都要求您将幻灯片附加到元素然后重新触发滑块。这很好，但是我测试过的大多数脚本都会改​​变当前的幻灯片位置，或者屏幕上的元素发生了明显的变化，从而破坏了用户体验。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:20:46.607

你[看过 Nivo Slider](http://nivo.dev7studios.com/)吗？我以前用过这个，从来没有见过你描述的问题（重新触发滑块）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:29:38.973

我是 bx-slider 的个人粉丝。这是非常基本的，但它工作得非常好。[http://www.bxslider.com/](http://www.bxslider.com/)

它只需要一个基本的 div 设置，它是一个插件，所以只需从 $('#myID').bxSlider();

# php - 如何获得我刚刚创建的专辑的 ID？

> ID：11698205
> 
> 赞同：-1
> 
> 时间：2012-07-28T04:13:41.957
> 
> 标签：php, facebook

我有我自己的应用程序，它应该创建一个相册（如果这个相册不存在）并上传一张图片。

每当您没有应该拥有的相册（由应用程序创建）时，它会创建相册，但不会将图片上传到此相册，它只会在您第二次运行脚本时上传图片。

所以我猜我无法在第一轮获得我的新专辑的 ID。我怎样才能有我的新专辑的ID？

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:39:26.753

有两个函数返回这个值：

```
Php function -> mysqli_insert_id()

Mysql function ->LAST_INSERT_ID() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T05:43:40.993

由于您的问题被标记为`facebook`，我假设您的相册创建评论意味着您正在使用 Facebook 的 API 创建相册？

如果是这种情况，您可以使用类似于[为什么我无法获取 facebook 相册 ID 中的代码？](https://stackoverflow.com/questions/8787916/why-i-cannot-get-the-facebook-album-id)：

```
$create_album = $facebook->api('/me/albums', 'post', $album_details);
//get the album id
$album_uid = $create_album["id"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:15:17.030

```
$new_id = mysql_insert_id(); 
```

将其放在您的 INSERT 查询之后，您就可以访问该 ID。

# sqlite - 如何在 wp7 中添加对 system.data.sqlite.dll 的引用

> ID：11698206
> 
> 赞同：-2
> 
> 时间：2012-07-28T04:13:47.560
> 
> 标签：sqlite, windows-phone-7

> **可能重复：**
> [如何将 system.data.SQLite.dll 的引用添加到 windows phone 7](https://stackoverflow.com/questions/11687806/how-to-add-a-reference-to-the-system-data-sqlite-dll-to-the-windows-phone-7)

我是 Windows Phone 7 的新手。请帮助我解决我的问题。我想使用 Visual Studio Express 2010 for wp7 在 wp7 中使用 SQLite db。我从 www.sqlite.org 下载了 System.Data.SQLite.dll ...我将其添加为参考，但它显示 System.Data.SQLite.dll 不是使用 Windows Phone 运行时构建的错误。

谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:43:10.213

因为，正如它所说，它不是为 Windows Phone 运行时构建的。与成熟的 .NET Framework 相比，Windows Phone 开发堆栈完全不同。

所以你在这里有几个选择：

*   [Windows Phone 的 SQLLite 端口](http://sqlitewindowsphone.codeplex.com/)
*   [SQL CE](http://msdn.microsoft.com/en-us/library/hh202860%28v=VS.92%29.aspx)
*   [英镑](http://sterling.codeplex.com/)

可以肯定还有更多，但这些是最重要的。

# android - 带有aidl的bindService返回false

> ID：11698209
> 
> 赞同：1
> 
> 时间：2012-07-28T04:14:23.037
> 
> 标签：android, android-service, aidl

我想提供一个可以被其他应用程序调用的服务。因此，我有服务和助手。但是当我尝试使用单独的应用程序来绑定此服务（bindService）时，它只会返回 false，这意味着失败。这是我的代码。

PS：context已经是调用getApplicationContext()得到的ApplicationContext

**尝试绑定服务的代码**

```
 private static ServiceConnection connection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            sService = XXXService.Stub.asInterface(service);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            sService = null;
        }
    };

    private static synchronized XXXService getService(final Context context) {
        if (sService != null) {
            return sService;
        } else {
            intent.setClassName(context.getPackageName(), "com.xxx.someservice");
            if (context.bindService(intent, connection, Context.BIND_AUTO_CREATE)) {
                Log.i(TAG, "can bind");
            } else {
                Log.i(TAG, "can not bind");
            }
            return sService;
        }
    } 
```

**AndroidManifest**

```
 <service android:name="com.xxx.someservice"
        android:process=":main"
        android:exported="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:29:50.057

这似乎基本正确。我认为问题在于 intent.setClassName(context.getPackageName(), "com.xxx.someservice"); 应该是 intent.setClassName("Your.package.name.with.the.service", "com.xxx.someservice"); . context.getPackageName() 返回当前包名称，因此如果您尝试在自己的包中绑定，这将起作用，但您的问题使您看起来好像是在单独的包中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:47:33.030

为服务使用操作名称对我有用。

例如：

```
<service
    android:name="..."
    android:process="..." >
    <intent-filter>
        <action android:name="your-unique-action-name" />
    </intent-filter>
</service> 
```

和：

```
...
bindService(new Intent("your-unique-action-name"), mServiceConnection, BIND_AUTO_CREATE); 
```

# c++ - 尝试编写可以从 std::string 移动语义的字符串类

> ID：11698213
> 
> 赞同：3
> 
> 时间：2012-07-28T04:14:40.943
> 
> 标签：c++, c++11, dynamic-memory-allocation, stdstring, move-semantics

我正在编写自己的弦乐课程，实际上只是为了学习和巩固一些知识。除了我想要一个使用带有 std::string 的移动语义的构造函数之外，我一切正常。

在我的构造函数中，我需要复制 std::string 数据指针和其他内容并将其清空，它需要保持为空但有效状态，而不删除字符串指向的数据，我该怎么做？

到目前为止我有这个

```
class String
{
private:
char* mpData;
unsigned int mLength;
public:
String( std::string&& str)
    :mpData(nullptr), mLength(0)
    {
    // need to copy the memory pointer from std::string to this->mpData

    // need to null out the std::string memory pointer
    //str.clear();  // can't use clear because it deletes the memory
    }
~String()
{
delete[] mpData;
mLength = 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T04:19:30.220

没有办法做到这一点。的实现`std::string`是实现定义的。每个实现都是不同的。

此外，不能保证字符串将包含在动态分配的数组中。一些`std::string`实现执行小字符串优化，其中小字符串存储在`std::string`对象本身内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:39:36.827

下面的实现完成了所要求的，但有一定的风险。

关于这种方法的注意事项：

*   它使用 std::string 来管理分配的内存。在我看来，像这样分层分配是一个好主意，因为它减少了单个类试图完成的事情的数量（但由于使用了指针，这个类仍然存在与编译器生成的副本相关的潜在错误操作）。

*   我取消了该`delete`操作，因为该操作现在由`allocation`对象自动执行。

*   如果用于修改底层数据，它将调用所谓的*未定义行为。*[它是未定义的，如此处](http://en.cppreference.com/w/cpp/string/basic_string/data)`mpData`所示，因为标准说它是未定义的。不过，我想知道，是否存在与现实世界的实现方式不同的行为——通过这种方式，这样的修改将是完全合法的。修改 via可能不会反映在对 的后续访问中，但根据[此问题](https://stackoverflow.com/questions/7518732/why-are-stdvectordata-and-stdstringdata-different)中的讨论，假设没有通过对象进行进一步更改，此类修改似乎不太可能导致不可预测的行为。`const char * std::string::data()``T * std::vector::data()``data()``allocation``allocation`

*   它真的*针对*移动语义进行了优化吗？这可能是实现定义的。它还可能取决于传入字符串的实际值。正如我在另一个答案中所指出的，移动构造函数提供了一种优化机制——但它不能保证会发生优化。

* * *

```
class String
{
private:
char* mpData;
unsigned int mLength;
std::string allocation;
public:
String( std::string&& str)
    : mpData(const_cast<char*>(str.data())) // cast used to invoke UB
    , mLength(str.length())
    , allocation(std::move(str)) // this is where the magic happens
    {}
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T05:15:07.583

我将问题解释为*“我可以使移动构造函数产生正确的行为吗”*而不是*“我可以使移动构造函数以最佳方式快速运行”*。

如果问题是严格的，*“是否有一种可移植的方式从 std::string 窃取内部内存”*，那么答案是*“不，因为公共 API 中没有提供‘转移内存所有权’操作”*。

* * *

以下[对移动语义的解释的](https://stackoverflow.com/a/3109981/86967)引用提供了对“移动构造函数”的一个很好的总结......

> C++0x 引入了一种称为“右值引用”的新机制，除其他外，它允许我们通过函数重载检测右值参数。我们所要做的就是编写一个带有右值引用参数的构造函数。在该构造函数中，我们可以对源代码做任何我们想做的事情，只要我们让它处于某种有效状态。

根据这个描述，在我看来，您可以实现“移动语义”构造函数（或“移动构造函数”），而不必实际窃取内部数据缓冲区。一个示例实现：

```
String( std::string&& str)
    :mpData(new char[str.length()]), mLength(str.length())
    {
    for ( int i=0; i<mLength; i++ ) mpData[i] = str[i];
    } 
```

*据我了解，移动语义的意义在于，如果您愿意*，您可以提高效率。由于传入的对象是瞬态的，因此不需要保留其内容——因此窃取它们是合法的，但不是强制性的。也许，如果您不转移某些基于堆的对象的所有权，那么实现这一点是没有意义的，但它似乎应该是合法的。也许它可以用作垫脚石——你可以尽可能多地窃取有用的东西，即使这不是全部内容。

顺便说一句，这里有一个密切相关的问题[，](https://stackoverflow.com/questions/10402241/c11-move-constructor)其中正在构建相同类型的非标准字符串，并包括 std::string 的移动构造函数。然而，该类的内部结构有所不同，建议 std::string 可能具有对内部移动语义的内置支持（std::string -> std::string）。

# javascript - 如何在javascript中设置传递函数

> ID：11698215
> 
> 赞同：0
> 
> 时间：2012-07-28T04:14:44.440
> 
> 标签：javascript, jquery, object

我正在创建一个新的对象变量并将一个对象作为参数传递：

```
var obj = new test({
    first : $('#fname').val(),
    last : $('#lname').val(),
    fn : function() {
        alert(this.first + " " + this.last);
    }
}); 
```

这是创建上述变量时调用的函数：

```
var test = function(obj) {
    this.fn = function() {
        alert("No custom function was made.");
    }

    this.first = obj.first;
    this.last = obj.last;
    if(obj.fn)
        this.fn = obj.fn(); //I also tried it without the '()' after 'obj.fn'
}; 
```

第一个和最后一个变量都很好，但我不知道如何获取传递给设置的自定义函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:21:13.633

它对我有用

```
var test = function(obj) {
    this.fn = function() {
        alert("No custom function was made.");
    }

    this.first = obj.first;
    this.last = obj.last;
    if(obj.fn)
        this.fn = obj.fn;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T04:34:49.210

您提到您尝试在“obj.fn”之后删除“（）”......当我这样做时似乎有效。这是要验证的链接：http: [//jsfiddle.net/TD93x/3/](http://jsfiddle.net/TD93x/3/)

# java - 未知错误 - 阵列适配器

> ID：11698216
> 
> 赞同：0
> 
> 时间：2012-07-28T04:14:48.017
> 
> 标签：java, android, arrays, listview

当我将适配器设置为 ListView 时，我的应用程序中出现错误。删除 60/61 行代码 ( `mainListViewTip/Hour.setAdapter(tip/hourAdapter);`) 后，应用程序运行完美，但由于从未设置适配器，因此 ListView 中不会出现任何数据。目标是让 EditText 字段的值成为 String 中的新值，并与以前的条目一起显示在 ListView 中。

TipBookActivity 代码：

```
public class TipBookActivity extends Activity {
/** Called when the activity is first created. */

TextView textTip,textHour,textWage;
EditText editHour,editTip;
float wage;
int precision = 100;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  
    textTip = (TextView) findViewById(R.id.tvTip);
    textHour = (TextView) findViewById(R.id.tvHour);
    textWage = (TextView) findViewById(R.id.tvWage);
    editTip = (EditText) findViewById(R.id.etTip);
    editHour = (EditText) findViewById(R.id.etHour);
}

public void myClickHandler (View v){
    Button bSubmit = (Button) findViewById(R.id.bSubmit);
    bSubmit.isClickable();
    ListView mainListViewTip = (ListView) findViewById(R.id.mainListViewTip);
    ListView mainListViewHour = (ListView) findViewById(R.id.mainListViewHour);
    switch(v.getId()){
    case R.id.bSubmit:
        if(bSubmit.isPressed()){
            wage = Float.parseFloat(editTip.getText().toString()) / Float.parseFloat(editHour.getText().toString());
            String tip = String.format("$%.2f",wage);
            textWage.setText(String.valueOf(tip) + " an hour");     
            textHour.setText(editHour.getText() + " Hour(s)");
            textTip.setText("$" + editTip.getText());
            String[] sTip = new String[] {editTip.getText().toString()};
            String[] sHour = new String[] {editHour.getText().toString()};
            ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sTip);
            ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sHour);
            mainListViewTip.setAdapter(tipAdapter);
            mainListViewHour.setAdapter(hourAdapter);
            Toast displayWage = Toast.makeText(this, "$" + editTip.getText() + " over " + editHour.getText() + " hour(s) for a wage of $" + wage + " an hour.", Toast.LENGTH_LONG);
            displayWage.show();
        }
    }
}
public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    MenuInflater mMain = getMenuInflater();
    mMain.inflate(R.menu.main_menu,menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    ViewFlipper vf = (ViewFlipper) findViewById(R.id.vfMain);
    switch (item.getItemId()){
    case R.id.menuHistory:
         vf.setAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_in_right));
         vf.showNext();
         return true;
    case R.id.menuClear:
        //set up next tutorials
        Toast displayClear = Toast.makeText(this, "Clear History feature coming soon.", Toast.LENGTH_SHORT);
        displayClear.show();
        return true;
    case R.id.menuSettings:
        Toast displaySettings = Toast.makeText(this, "Settings Options coming soon.", Toast.LENGTH_SHORT);
        displaySettings.show();
        return true;
    }
    return false;
}

public void onBackPressed() {
    finish();
    }
} 
```

主xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/llMain" >

<ViewFlipper
    android:id="@+id/vfMain"
    android:layout_height="match_parent"
    android:layout_width="match_parent">

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rletbtv">      

            <EditText 
                android:id="@+id/etTip"
                android:layout_height="wrap_content"
                android:layout_width="140dp"
                android:hint="Tips"
                android:layout_margin="8dp"
                android:inputType="numberDecimal"
                android:layout_alignParentLeft="true"/>

            <EditText
                    android:id="@+id/etHour"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:hint="Hours"
                android:layout_margin="8dp"
                android:inputType="numberDecimal"
                android:layout_alignParentRight="true"
                android:layout_toRightOf="@id/etTip"/>

            <Button
                android:id="@+id/bSubmit"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"
                android:layout_margin="8dp"
                android:ems="10"
                android:text="Submit"
                android:textSize="22sp"
                android:layout_below="@id/etTip"
                android:onClick="myClickHandler"/>

            <TextView
                android:id="@+id/tvTip"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="Tips"
                android:textSize="22sp"
                android:layout_margin="8dp"
                android:layout_below="@id/bSubmit"/>

            <TextView
                android:id="@+id/tvHour"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="Hours"
                android:textSize="22sp"
                android:layout_margin="8dp"
                android:layout_below="@id/bSubmit"
                android:layout_toRightOf="@id/tvTip"/>

            <TextView
                android:id="@+id/tvWage"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="Wage"
                android:textSize="22sp"
                android:layout_margin="8dp"
                android:layout_below="@id/bSubmit"
                android:layout_toRightOf="@id/tvHour"/>

        </RelativeLayout>
    </LinearLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:id="@+id/mainListViewTip"/>

        <ListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50" 
            android:id="@+id/mainListViewHour"/>

</LinearLayout>
</ViewFlipper>
</LinearLayout> 
```

simplerow xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rowTextView"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="10dp"
android:textSize="16sp" /> 
```

logcat 错误报告：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:353)
at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
at android.widget.AbsListView.obtainView(AbsListView.java:1315)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
at android.widget.ListView.onMeasure(ListView.java:1109)
at android.view.View.measure(View.java:8171)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
at android.view.View.measure(View.java:8171)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
at android.view.View.measure(View.java:8171)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
at android.view.View.measure(View.java:8171)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
at android.view.View.measure(View.java:8171)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
at android.view.View.measure(View.java:8171)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
at android.view.View.measure(View.java:8171)
at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:48:54.713

是的，如果您没有为 listview 的行项进行布局，则 eric 是正确的，如下所示更改这两行 arrayadapter

```
 ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sTip);
 ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sHour); 
```

经过

```
 ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,android.R.layout.simple_list_item_1,sTip);
 ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,android.R.layout.simple_list_item_1,sHour); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:40:47.877

问题是因为您传递给的布局`ArrayAdapter`是`R.layout.main`. 这不是您要传递的资源；您想为每个单独的列表项传递布局。你传递的布局必须有一个`TextView`带有一定ID的，显然`R.layout.main`没有这个。

尝试将这两行替换`R.layout.main`为[`android.R.layout.simple_list_item_1`](https://stackoverflow.com/questions/3663745/what-is-android-r-layout-simple-list-item-1)，并删除您的自定义`TextView`ID。这应该可以解决错误并让您的列表正确显示。

像这样：

```
ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,android.R.layout.simple_list_item_1,sTip);
ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,android.R.layout.simple_list_item_1,sHour); 
```

如果您以后想对列表项使用自定义布局，请尝试[本教程](http://android-er.blogspot.ca/2010/06/custom-arrayadapter-with-with-different.html)或[本](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T05:16:42.070

我认为亚当想使用他自己的文本视图，以便他可以更改“android.R.layout.simple_list_item_1”无法更改的文本大小和颜色。取而代之的是，我们可以使用 adam 的“simplerow xml”文件。为此，我们需要替换 2 行代码

```
ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sTip);
ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.main,R.id.rowTextView,sHour); 
```

至

```
ArrayAdapter<String> tipAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.samplerow,R.id.rowTextView,sTip);
ArrayAdapter<String> hourAdapter = new ArrayAdapter<String>(TipBookActivity.this,R.layout.samplerow,R.id.rowTextView,sHour); 
```

注意：更改是“ **R.layout.main** ”到“ **R.layout.samplerow** ”

# ios - UIAlertView 中的 iOS UISlider

> ID：11698217
> 
> 赞同：0
> 
> 时间：2012-07-28T04:15:01.463
> 
> 标签：ios, uialertview, uislider

我知道对此有一个问题，但我不清楚。我想向 UIAlertView 添加一个 UISlider。在 UIAlertView 中，我还添加了一个 UILabel 来显示 UISlider 的值。到目前为止我所做的是：

```
 UIAlertView *alert= [[UIAlertView alloc]
                    initWithTitle: @"Set delay"
                    message: @" "
                    delegate: nil
                    cancelButtonTitle:@"OK"
                    otherButtonTitles:nil];
            UISlider *mySlider=[[UISlider alloc] initWithFrame:CGRectMake(20, 50, 200, 20)];
            mySlider.maximumValue=10.00;
            mySlider.minimumValue=1.00;
            UILabel *myLabel=[[UILabel alloc] initWithFrame:CGRectMake(220, 50, 50, 40)];
            int x=.........;//x should get value of mySlider
            [myLabel setText:[NSString stringWithFormat:@"%d",x]];
            [alert addSubview:myLabel];
            [alert addSubview:mySlider];            
            [alert show];
            [alert release]; 
```

所以我希望变量`x`获得 的值，`mySlider`并且`myLabel`将显示 的值`x`。我被困在这一点上。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:42:35.633

这里你需要做的：

1.  使`UILabel`全局，这意味着在头文件中声明它（这是为了轻松到达标签）。
2.  `ValueChanged`然后使用事件向滑块添加一个目标。

    ```
    [mySlider addTarget:self action:@selector(sliderHandler:) forControlEvents:UIControlEventValueChanged]; 
    ```

3.  接下来，实现`sliderHandler`方法：

    ```
    - (void) sliderHandler: (UISlider *)sender {
         int x = sender.value;
         [myLabel setText:[NSString stringWithFormat:@"value = %d",x]];
    } 
    ```

这对你有用。

# c# - 截取网页的最佳方式

> ID：11698222
> 
> 赞同：16
> 
> 时间：2012-07-28T04:16:33.063
> 
> 标签：c#, .net, winapi, selenium, screenshot

截取网页截图的最佳方法是什么？目前我只是启动了一个 selenium 实例并使用 winapi 将它带到前面并制作屏幕截图。我已经问过类似的[问题](https://stackoverflow.com/questions/11526260/get-window-handle-intptr-from-selenium-webdrivers-current-window-guid) 了。

有两点：

*   缓慢。
*   如果任何窗口偶然高于我们的网络浏览器的窗口，该窗口将印在我们的屏幕截图中。

有什么方法可以更“程序化”地截屏吗？

这是我现在使用的一些代码：

```
class FirefoxDriverEx : FirefoxDriver
{
    public Process GetFirefoxProcess()
    {
        var fi = typeof(FirefoxBinary).GetField("process", BindingFlags.NonPublic | BindingFlags.Instance);
        return fi.GetValue(this.Binary) as Process;
    }
} 
```

这是说明截屏过程的代码：

```
using (FirefoxDriverEx driver = new FirefoxDriverEx())
{
    driver.Navigate().GoToUrl(url);

    var process = driver.GetFirefoxProcess();

    if (process != null)
    {
        var screenCapture = new ScreenCapture();
        Win.SetForegroundWindow(process.MainWindowHandle.ToInt32());
    }
} 
```

现在，我正在考虑一些管理器，它将控制一系列窗口以从中获取屏幕截图。

***问题编辑。***

我不是在寻找一种解决方案来获取“内存中”的屏幕截图并将其返回给 HTTP 流。因此，任何保存屏幕截图并将其保存到文件然后从那里获取它的方法对于该目的都是非常模棱两可的。

***问题编辑＃2。***

我忘了提。需要的屏幕截图应该由用户看到。因此，屏幕截图应该有浏览器窗口和 Web 浏览器窗口范围内的站点。我找不到任何方法来更改在硒的 WebDriver 中截屏的模式。WebDriver 只是在没有任何浏览器窗口的情况下截取页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T21:42:32.947

我推荐getScreenshotAs。它甚至可以看到屏幕的“看不见”部分。

这是 gr0ovy 中的一些示例代码。

```
import java.io.IOException
import java.net.URL
import java.nio.file.Path
import java.nio.file.Paths
import java.text.SimpleDateFormat

import org.openqa.selenium.Capabilities
import org.openqa.selenium.TakesScreenshot
import org.openqa.selenium.WebDriverException
import org.openqa.selenium.remote.CapabilityType
import org.openqa.selenium.remote.DriverCommand
import org.openqa.selenium.remote.RemoteWebDriver
import org.openqa.selenium.OutputType
import org.openqa.selenium.WebDriver

public class Selenium2Screenshot {
private WebDriver driver
private String browserType
private boolean skipScreenshots

public Selenium2Screenshot(WebDriver webDriver, String browserType, boolean skipScreenshots) {
    this.driver = webDriver
    this.browserType = browserType
    this.skipScreenshots = skipScreenshots
}
public void takeScreenshot(String filenameBase) {
    if (!skipScreenshots) {
        Date today
        String formattedDate
        SimpleDateFormat formatter
        Locale currentLocale
        File scrFile
        currentLocale = new Locale("en", "US")
        formatter = new SimpleDateFormat("yyyy_MM_dd_HH_mm_ss_SSS", currentLocale)
        today = new Date()
        formattedDate = formatter.format(today)
        String filename = getUiAutomationDir() + filenameBase + "_" + browserType + formattedDate + ".png"
        Log.logger.info("Screenshot filename = " + filename)

        try {
            scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE)
            JavaIO.copy(scrFile.getAbsolutePath(), filename)
        } catch (Exception e) {
            Log.logger.error(e.message, e)
        }
    } else {
        Log.logger.info("Skipped Screenshot")
    }
}
private String getUiAutomationDir()
{
    String workingDir = System.getProperty("user.dir")
    Path workingDirPath = Paths.get(workingDir)
    String returnString = workingDirPath.toString() + "\\"
    return returnString
} 
```

}

2012 年 8 月 1 日编辑：

获取应用程序句柄代码。我肯定会多次复制stackoverflow上的代码，但希望这与其他帖子中的代码不完全相同:-)

```
public static IntPtr FindWindowByPartialCaption(String partialCaption)
    {
        var desktop = User32.GetDesktopWindow();
        var children = EnumerateWindows.GetChildWindows(desktop);
        foreach (var intPtr in children)
        {
            var current = GetText(intPtr);
            if (current.Contains(partialCaption))
                return intPtr;
        }
        return IntPtr.Zero;
    }

    [DllImport("user32.dll", EntryPoint = "GetDesktopWindow")]
    public static extern IntPtr GetDesktopWindow();

    [DllImport("user32.dll")]
    public static extern bool EnumChildWindows(IntPtr hWndParent, EnumWindowProc lpEnumFunc, IntPtr lParam);

    public delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);
    public static List<IntPtr> GetChildWindows(IntPtr parent)
    {
        return GetChildWindows(parent, false);
    }
    public static List<IntPtr> GetChildWindows(IntPtr parent, bool reverse)
    {
        List<IntPtr> result = new List<IntPtr>();
        GCHandle listHandle = GCHandle.Alloc(result);
        try
        {
            EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
            EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
        }
        finally
        {
            if (listHandle.IsAllocated)
                listHandle.Free();
        }
        if (reverse)
        {
            List<IntPtr> resultList = result.Reverse<IntPtr>().ToList();
            return resultList;
        } 
        else
            return result;
    }

    private static bool EnumWindow(IntPtr handle, IntPtr pointer)
    {
        GCHandle gch = GCHandle.FromIntPtr(pointer);
        List<IntPtr> list = gch.Target as List<IntPtr>;
        if (list == null)
        {
            throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
        }
        list.Add(handle);
        //  You can modify this to check to see if you want to cancel the operation, then return a null here
        return true;
    }
} 
```

[http://www.pinvoke.net/](http://www.pinvoke.net/)也是一个很好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:02:44.397

我可以通过将窗口（一块一块地）复制到一个位图中来实现这一点，该位图设置为我的 webBrowser 控件的 ScrollRectangle 的大小。虽然这当然不是实现这一目标的最优雅的方式，但我想分享代码以防任何人都可以使用它。一旦我有一些主要工作的东西，我就可以添加一些参数，我现在可以从命令行执行这个实用程序：

Executable_Path URL 文件名

```
 /// <summary>
    /// This method is called to start the process of copying the webpage to the bitmap
    /// this should be called after the page has fully loaded (use DocumentCompleted event to determine
    /// if the page has completed loading if calling from the command line.)
    /// </summary>
    private void copyWebpageToImage()
    {
        //these two vars will house the current position in the bmp file (starting at 0,0)
        int currXPosition = 0;
        int currYPosition = 0;

        //we need to set the height and width of our bitmap to the scrollrectangle of the webbrowser document object
        int width = webBrowser1.Document.Body.ScrollRectangle.Width;
        int height = webBrowser1.Document.Body.ScrollRectangle.Height;
        //instantiate the bitmap
        bm = new Bitmap(wd, ht);

        //Instantiate our graphics object
        Graphics gfx = Graphics.FromImage((Image)bm);

        //this point is used throughout the process, and helps to determine where the form is at on the screen
        Point formPoint = Form1.ActiveForm.Location;
        formPoint.X = formPoint.X + webBrowser1.Location.X;
        formPoint.Y = formPoint.Y + webBrowser1.Location.Y;
        formPoint.X = formPoint.X + 8; //offsets for my form (may be different for yours)
        formPoint.Y = formPoint.Y + 33; //offsets for my form

        //begin our recursive call that will stop when it reaches the end of the page
        copyEverythingToBitmap(bm, currXPosition, currYPosition, formPoint, gfx);

    }

    private void copyEverythingToBitmap(Bitmap bm, int currXPosition, int currYPosition, Point formPoint, Graphics gfx)
    {
        //check to see if currXPosition and currYPosition are both 0, if so we just began, call the zero copy method
        if (currXPosition == 0 && currYPosition == 0)
        {
            performZeroCopy(bm, currXPosition, currYPosition, formPoint, gfx);
        }
        //if the current x position is less than the total width of the scrollrectangle - the width of the webbrowser,
        //then we need to scroll the window, and copy the contents, y stays the same
        else if (currXPosition < bm.Width - webBrowser1.Width)
        {
            AlterXPosition(bm, ref currXPosition, ref currYPosition, ref formPoint, gfx);
        }
        //if we are no longer at the zero, zero, and we cannot increase the x position anymore,
        //then we need to scroll the window down and copy the contents, x is reset back to zero
        else if(currYPosition < bm.Height - webBrowser1.Height)
        {
            currYPosition = currYPosition + webBrowser1.Height - 20;
            currXPosition = 0;
            performZeroCopy(bm, currXPosition, currYPosition, formPoint, gfx);
        }
    }

    /// <summary>
    /// The name of this method is slightly misleading.  It inherently means that X is zero.
    /// </summary>
    private void performZeroCopy(Bitmap bm, int currXPosition, int currYPosition, Point formPoint, Graphics gfx)
    {
        webBrowser1.Document.Window.ScrollTo(currXPosition, currYPosition);
        gfx.CopyFromScreen(formPoint, new Point(currXPosition, currYPosition), new Size(webBrowser1.Width - 20, webBrowser1.Height - 20));

        if (currXPosition < bm.Width - webBrowser1.Width)
        {
            AlterXPosition(bm, ref currXPosition, ref currYPosition, ref formPoint, gfx);
        }
        else if(currYPosition < bm.Height - webBrowser1.Height)
        {
            currYPosition = currYPosition + webBrowser1.Height - 20;
            currXPosition = 0;
            performZeroCopy(bm, currXPosition, currYPosition, formPoint, gfx);
        }
    }

    private void AlterXPosition(Bitmap bm, ref int currXPosition, ref int currYPosition, ref Point formPoint, Graphics gfx)
    {
        currXPosition = currXPosition + webBrowser1.Width - 20;
        webBrowser1.Document.Window.ScrollTo(bm.Width - currXPosition, currYPosition);

        gfx.CopyFromScreen(formPoint, new Point(bm.Width - currXPosition - 3, currYPosition), new Size(webBrowser1.Width - 20, webBrowser1.Height - 20));

        if (currXPosition + webBrowser1.Width < bm.Width)
        {
            //we still have not traversed the full width of the page, call to alterxposition again...
        }
        else
        {
            copyEverythingToBitmap(bm, currXPosition, currYPosition, formPoint, gfx);
        }
    }

    private void saveImageToFile(string p)
    {
        bm.Tag = DateTime.Now;
        bm.Save(p, ImageFormat.Jpeg);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:16:14.047

多年来，我一直在生产应用程序中使用[webshotcmd](http://www.websitescreenshots.com/Purchase.aspx)（付费版本也是命令行）。它可以配置为等待页面加载，在页面加载后等待 n 秒等。它使用 Internet Explorer 并在 Windows 上工作。启动非常快（根据我的经验，msie activex 总是可以立即加载）。

除了上述之外，我会推荐一些基于 Webkit 库的东西，它会比 Firefox 小得多，并且启动速度非常快（wkhtmltoimage 目前仅在 Linux 上可用，但当它可用于 Windows 时，我会去吧 - 也是命令行）。现在只需 google 搜索 webkit 屏幕截图（使用 webkit 的大量可用屏幕截图让我相信使用该 DLL 将很容易移植到 C#）。

编辑：考虑到您的第二次编辑，请查看[Chrome 屏幕捕获](http://code.google.com/p/chrome-screen-capture/source/checkout)源。要尝试它，扩展程序可在商店/扩展程序库中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T00:26:41.983

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd162869(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162869%28v=vs.85%29.aspx)

我个人喜欢这个 API。创建一个位图，其宽度和高度由 GetWindowRect API 返回的矩形计算得出，并用于 HDC 参数（例如）：

```
thebitmap.GetHdc() 
```

你应该没事。

编辑：也检查[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145216%28v=vs.85%29.aspx)。

顺便说一句，您可以截取您喜欢的任何窗口的屏幕截图，即使它们后退。（请注意，这不适用于最小化的窗口。但是，如果您真的需要，也有一些解决方法。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T13:32:53.457

如果您正在寻找一种编程方式来获取给定进程的主窗口的屏幕截图，这里有一个函数可以做到这一点：

```
 public static Bitmap TakeScreenshot(Process process)
    {
        // may need a process Refresh before
        return TakeScreenshot(process.MainWindowHandle);
    }

    public static Bitmap TakeScreenshot(IntPtr handle)
    {
        RECT rc = new RECT();
        GetWindowRect(handle, ref rc);
        Bitmap bitmap = new Bitmap(rc.right - rc.left, rc.bottom - rc.top);
        using (Graphics graphics = Graphics.FromImage(bitmap))
        {
            PrintWindow(handle, graphics.GetHdc(), 0);
        }
        return bitmap;
    }

    [DllImport("user32.dll")]
    private static extern bool GetWindowRect(IntPtr hWnd, ref RECT rect);

    [DllImport("user32.dll")]
    private static extern bool PrintWindow(IntPtr hWnd, IntPtr hDC, int flags);

    [StructLayout(LayoutKind.Sequential)]
    private struct RECT
    {
        public int left;
        public int top;
        public int right;
        public int bottom;
    } 
```

不幸的是，在配备 Aero 的操作系统（Vista/Win7/Win8）上，它不会捕获完全透明的边框。通常的透明边框将改为黑色。也许这对于你想要完成的事情已经足够了。

# mysql - 将 Sphinx 集成到 MySQL

> ID：11698223
> 
> 赞同：6
> 
> 时间：2012-07-28T04:16:57.347
> 
> 标签：mysql, sphinx

我正在尝试为我的 MySQL 服务器使用 Sphinx 全文搜索功能。我已经根据安装手册设置了本地 Sphinx 服务，并且能够进行文本搜索。

我可以连接到

```
mysql.exe --host=127.0.0.1 port=9306 
```

其中 port`9306`是**sphinx.conf**中配置的端口：

```
searchd {
...
listen = 9306:mysql41
...
} 
```

并进行`SphinxQL`查询。我正在使用发布包附带的默认 Sphinx 示例数据库。

但是我想将 Sphinx 与我的 MySQL 服务器集成，这样所有连接到我的 sql 服务器的客户端都可以执行 SphinxQL，我想用 MySQL 示例数据库[sakila进行尝试](http://dev.mysql.com/doc/sakila/en/index.html)

*   实现这一目标的步骤是什么？
*   我需要将数据库引擎从 InnoDB 转换为 Sphinx 吗？
*   此外，从看起来，Sphinx 只能为每个配置索引一 (1) 个数据库表，我如何确保 MySQL 数据库中的所有表都被索引？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T14:48:31.180

> 但是我想将 Sphinx 与我的 MySQL 服务器集成，这样所有连接到我的 sql 服务器的客户端都可以执行 SphinxQL

不能那样做。Sphinx（当为 sphinxQL 启用时）只是为您提供了一个**看起来**像 mysql 的服务器 - 即它使用相同的通信协议 - 主要是为了可以重用 mysql 客户端库，而不必为 sphinx 创建一个新的。

它们是不同的“服务器”。您连接到 mysql 服务器以运行 mysql 命令；您连接到 sphinx 服务器以运行 sphinxQL 命令。

应用程序必须分别连接到每个“服务器”。想象一下 sphinx 有点像 postgres，你显然没有连接到 mysql 并期望能够运行 postgresql。

但是有 SphinxSE - 这是一个假的 mysql 存储引擎。您将其安装到 mysql 中，然后您可以使用此引擎创建表。然后你对这个表运行 mysql 查询，引擎盖下是一个正在运行的 sphinx-server。所以对 mysql 来说，它看起来像是一个包含数据的表，这是最有用的，因为可以将这个搜索表与原始数据表“连接”，以在一个 mysql 查询中获取结果和原始数据。

然后应用程序不必连接到 sphinx 本身。SphinxSE 为您完成。

[http://sphinxsearch.com/docs/current.html#sphinxse](http://sphinxsearch.com/docs/current.html#sphinxse)

> 我需要将数据库引擎从 InnoDB 转换为 Sphinx 吗？

不，您可以使用您喜欢的任何引擎将原始数据保留在原处。Sphinx 只提供一个“索引”——它不存储原始数据*。它本身不是数据库，只是通过高度优化的索引提供快速查询。

基本上，您向 sphinx 询问与某个查询匹配的文档的唯一 ID。然后使用这些 id 来查找数据。SphinxAPI、sphinxSE 和 sphinxQL 只是执行此操作的三种不同机制。

> 此外，从表面上看，Sphinx 只能为每个配置索引一 (1) 个数据库表，

不可以。一个 sphinx 实例可以托管许多索引。一个索引可以有很多来源。所以只能为每个表创建一个索引。或者如果您主要想一起搜索它们，可以只创建一个合并索引。

-- ** 编辑以回复评论中的问题：**

> 当你这么说时，sphinx 可以承载许多索引，它是仅依赖于 sphinx.conf 配置文件吗？

您可能会为每个表定义一个 sphinx 索引。因此，每个表都需要一个源/索引对。（除非你想在一个索引中索引所有表，这也是可能的。

它无法读取表本身，并创建配置文件，您必须单独定义每个索引。

> 当你说“给你一个看起来像 mysql 的服务器”时，你的意思是像一个代理，

不，不是代理。

> 我的 MySQL 客户端在哪里可以连接到这个 Sphinx 端口并且客户端会认为它是 MySQL 服务器？

基本上是的。客户端将像连接到 mysql-server 一样连接到它。

> 如果是这样，那么我可以在同一连接上执行 MySQL SQL 查询和 SphinxQL 吗？

不，不可能。连接到 mysql-server，运行 mysql 查询。连接到 searchd 以运行 sphinxQL 查询。

两个连接，每个服务器一个。

> 为什么我的 MySQL Workbench 无法连接到端口 9306，

不知道。可能是防火墙问题。

# c++ - 在 C++ 命名空间中使用内置类型（double、int 等）？

> ID：11698224
> 
> 赞同：0
> 
> 时间：2012-07-28T04:17:24.160
> 
> 标签：c++, namespaces, typedef, swig, built-in

我可以在 C++ 命名空间中创建类似`int`和可用的内置类型吗？`double`

```
#include <complex>

typedef int my_int;

namespace my_namespace {
  namespace std = ::std;  // Works
  using ::my_int;         // Works

  using ::int;            // Fails: "expected unqualified-id before 'int'"
  typedef ::int int;      // Fails: "expected unqualified-id before 'int'"
}

typedef int out::int;     // Fails: "expected unqualified-id before 'int'"

my_namespace::my_int x;            // Works
my_namespace::std::complex<int> c; // Works

// I would like to use this:
my_namespace::int x2;    // Fails: "expected unqualified-id before 'int'" 
```

我怀疑这是由于语言限制禁止使用带有关键字的合格标识符（`int`在这种情况下），但我希望有某种方式来公开这些。

## 用例

我正在尝试使用命名空间来组织类型，以便外部工具（[SWIG](http://www.swig.org/)）可以适当地用另一种语言包装函数。例如：

```
void one_two(int &x, int &y) { x = 1; y = 2; } 
```

在目标语言中，这可以被包装为一个改变其参数`one_two(x, y)`的函数，或者一个返回输出的函数`x, y = one_two()`。我想要某种“注释”参数的方式，以便为[SWIG](http://www.swig.org/)提供预期用途。[当前SWIG](http://www.swig.org/)实现的最简洁的选项是使用命名空间来区分两种用途：因此`x, y = one_two()`可以表示输出版本：

```
void one_two(out::int &x, out::int &y) { x = 1; y = 2; } 
```

如果我能以某种方式`out::int`为`int`. （这种方法适用于用户定义的类型。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:26:30.933

`int`和朋友是语言中的关键字。它们不是全局命名空间中的名称；就语言而言，它们根本不是名称。用它们来限定它们`::`是一个错误。试图命名任何变量`int`也是一个错误。具体看C++03中的2.1第1段，C++11中的2.12第1段（文字相同）：

```
The identifiers shown in Table 3 are reserved for use as keywords (that is, they
are unconditionally treated as keywords in phase 7):
[ ... ]
int 
```

# c - 在没有 lib 的 C 中使用 DLL

> ID：11698228
> 
> 赞同：10
> 
> 时间：2012-07-28T04:17:57.090
> 
> 标签：c, dll

如何在没有 LIB 文件的情况下使用 C 中的 DLL 中的函数？我知道所有的函数原型及其名称。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T04:23:06.550

是的你可以。您应该使用[GetProcAddress](http://msdn.microsoft.com/en-us/library/64tkc9y5%28v=vs.80%29.aspx)函数，直接在DLL中调用该函数，而不涉及LIB

> 显式链接到 DLL 的进程调用 GetProcAddress 以获取 DLL 中导出函数的地址。您使用返回的函数指针来调用 DLL 函数。

从上面的链接中引用示例：

```
typedef UINT (CALLBACK* LPFNDLLFUNC1)(DWORD,UINT);
...

HINSTANCE hDLL;               // Handle to DLL
LPFNDLLFUNC1 lpfnDllFunc1;    // Function pointer
DWORD dwParam1;
UINT  uParam2, uReturnVal;

hDLL = LoadLibrary("MyDLL");
if (hDLL != NULL)
{
   lpfnDllFunc1 = (LPFNDLLFUNC1)GetProcAddress(hDLL,
                                           "DLLFunc1");
   if (!lpfnDllFunc1)
   {
      // handle the error
      FreeLibrary(hDLL);
      return SOME_ERROR_CODE;
   }
   else
   {
      // call the function
      uReturnVal = lpfnDllFunc1(dwParam1, uParam2);
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T04:29:23.210

您可以按照 DarkXphenomenon 的答案中所述使用 LoadLibrary() 和 GetProcAddress()。或者，另一种选择是通过创建一个 .def 文件然后通过 LIB 命令运行该文件以生成一个导入库，从而为 DLL 创建您自己的导入库。此处的其他详细信息：

[http://support.microsoft.com/kb/131313](http://support.microsoft.com/kb/131313)

# python - 无法访问 raw_input() 数据 - 在 Interviewstreet 上学习 Python

> ID：11698229
> 
> 赞同：1
> 
> 时间：2012-07-28T04:17:57.500
> 
> 标签：python, raw-input

在过去几个月在 Matlab 工作后，我正试图转向 Python。这可能是一个简单的问题，但我还没有在搜索 StackOverflow 或 Google 中找到它。

我正在处理的 InterviewStreet 问题非常简单。这是一个插入排序问题，检查需要在列表中切换多少次不同的数字。他们给我们一个 raw_input() 格式如下：

2

5

1 1 1 2 2

5

2 1 3 1 2

第一行是我需要排序的列表的数量，所有后续的偶数行是我需要排序的列表中的数字数量，接下来的奇数行是需要排序的实际列表。

我一开始就被卡住了。我做过的最好的是

> STDOUT = raw_input()
> 
> 打印标准输出

由于某种原因，它只给出了所有测试用例中的第一个整数（对于这个，它是 2）。

这对您来说可能已经很明显了，但是我如何使用 raw_input() 访问其余的数字？

谢谢！

PS请不要帮我解决剩下的问题，我真的想自己尝试解决：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:59:38.223

您需要`raw_input()`为每一行调用一次，如下所示：

```
N = int(raw_input())    # first line is number of lists

for i in xrange(N):
    num_in_list = int(raw_input())  # read the number of items in list N
    list = raw_input().split()      # read list N

    print num_in_list, list         # print list N 
```

应输出以下内容：

> 5 ['1', '1', '1', '2', '2']
> 5 ['2', '1', '3', '1', '2']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:13:54.590

我正在解决同样的问题，这是解决方案`raw_input()`：

```
num_testcases = int(raw_input())
assert 1 <= num_testcases <= 5
for testcase in range(num_testcases):
    num_elems = int(raw_input())
    assert 1 <= num_elems <= 100000
    elems = map(int, raw_input().split())
    assert all(map(lambda x: 1 <= x <= 1000000, elems))
    insertion_sort(elems) 
```

希望它会帮助你。

# asp.net-mvc-3 - 验证在 MVC3 中不起作用？

> ID：11698232
> 
> 赞同：0
> 
> 时间：2012-07-28T04:18:25.207
> 
> 标签：asp.net-mvc-3, validation

这就是我的模型的外观

```
 public class ProjectModel
      {
       public static List<ProjectModel> GetList { get; set; }
       public Int16 ID { get; set; }
       [Required(ErrorMessage = "ProjectName is required")]
       public string projectName { get; set; }
       [Required(ErrorMessage = "Description is required")]
       public string Description { get; set; }
       [Required(ErrorMessage = "Status is required")]
       public string status { get; set; }  
      } 
```

这就是控制器的外观

```
 #region Insert New Project
    //
    //View for adding new Projects/
    //
    [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult Create()
    {
        ViewBag.Status = new SelectList(GetStatus(), "Status", "Status");
        return View();
    }

     [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(ProjectModel model,string Status)
    {
        // var modelList = new List<ProjectModel>();
        using (SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True"))
        {
            conn.Open();
            SqlCommand insertcommande = new SqlCommand("Sp_AddNewProject", conn);
            insertcommande.CommandType = CommandType.StoredProcedure;
            insertcommande.Parameters.Add("@ProjectName", SqlDbType.VarChar).Value = model.projectName;
            insertcommande.Parameters.Add("@Description", SqlDbType.VarChar).Value = model.Description;
            insertcommande.Parameters.Add("@Status", SqlDbType.VarChar).Value =Status;
            insertcommande.ExecuteNonQuery();
        }
        return RedirectToAction("Create");
    }

      #region To Edit th Existing Project Record
    //
    //View For displaying the record to be edited/
    //
    [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult Edit(int id, ProjectModel updatemodel)
    {
        ViewBag.Status = new SelectList(GetStatus(), "Status", "Status");
        SqlConnection cn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand cmd = new SqlCommand("Select ProjectId,projectName,Description,status From Projects Where ProjectId=" + id, cn);
        cn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        if (dr.Read())
        {
            //if ( dr[0]) != DBNull.Value) 
            updatemodel.ID = Convert.ToInt16(dr["ProjectId"]);
            updatemodel.projectName = dr["projectName"].ToString();
            updatemodel.Description = dr["Description"].ToString();
            updatemodel.status = dr["status"].ToString();
        }
        else
        {
            dr.Close();
        }
        dr.Close();
        cn.Close();
        return View(updatemodel);
    }
    //
    //Action for editing the record which is in view/
    //
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Edit(ProjectModel updatemodel, FormCollection form, int id,string Status)
    {

        SqlConnection cn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand cmd = new SqlCommand("UpdateProject", cn);
        cmd.CommandType = CommandType.StoredProcedure;
        cn.Open();
        cmd.Parameters.Add("ProjectId", SqlDbType.Int).Value = updatemodel.ID;
        cmd.Parameters.Add("projectName", SqlDbType.VarChar).Value = updatemodel.projectName;
        cmd.Parameters.Add("Description", SqlDbType.VarChar).Value = updatemodel.Description;
        cmd.Parameters.Add("status", SqlDbType.VarChar).Value = Status;
        cn.Close();
        return View(updatemodel);
    }

    #endregion 
```

这就是我的 aspx 页面的外观

```
 <% using (Html.BeginForm())
     { %>
     <%-- <form action="Create.aspx" method="post"></form>--%>
    <%:Html.ValidationSummary(true)%>
    <fieldset>
    <legend style="color:Orange; font-weight:bolder;">AddNew Project</legend>

  <div class="editor-label" style="color:Orange; font-weight:bolder;">
        <%: Html.LabelFor(model => model.projectName)%>
    </div>
    <div class="editor-field">
       <%:Html.EditorFor(model => model.projectName)%>
      <%: Html.ValidationMessageFor(model => model.projectName)%>
    </div>

    <div class="editor-label" style="color:Orange; font-weight:bolder;">
       <%:Html.LabelFor(model => model.Description)%>
    </div>
    <div class="editor-field">
       <%:Html.EditorFor(model => model.Description)%>
       <%:Html.ValidationMessageFor(model => model.Description)%>
    </div>
    <div class="editor-label" style="color:Orange; font-weight:bolder;">
    <%:Html.LabelFor(model => model.status)%>
    </div>
    <div class="editor-field">
    <%:Html.DropDownList("Status")%>
    <%:Html.ValidationMessageFor(model => model.status)%>
    </div>
    <p>
        <input type="submit" value="Create" style="color:Orange; font-weight:bolder;"/>
        </p>
    </fieldset>
 <%} %> 
```

我的问题是当我单击提交按钮时，在我的创建新页面中没有触发验证，但是在我在编辑页面中单击之前，验证就已经开始了，谁能告诉我我在哪里做错了

或者有任何其他方法可以提供验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:23:09.170

您实际上并没有检查是否有任何验证失败。在您发布的控制器方法中，您需要检查：

```
if (ModelState.IsValid) {
    // do your work

    return RedirectToAction("WhereYouWantToGoAfterwards");
}

return View(model); 
```

编辑：

正如我上面所说，您实际上并没有检查代码中的错误。但是，您看到的 Create 和 Edit 之间不同的效果是，在 Edit 中，您返回一个 View()，但在 Create 中您是 RedirectToAction。重定向会清除 ModelState，因此您不会看到任何错误。

在开始根据数据进行工作之前，您仍然需要检查 ModelState.IsValid 是否存在。否则，你会遇到很多麻烦。

# php - 将 Twitter XML 数据转换为 PHP 变量以在表中使用

> ID：11698240
> 
> 赞同：1
> 
> 时间：2012-07-28T04:19:50.937
> 
> 标签：php, xml-parsing, twitter

我对编码很陌生，想尝试为我的网站构建一个 twitter 应用程序。我得到了下面的代码，但我知道有更好的方法......我只是不知道如何（可能将数据打印到数组中，然后使用 foreach 语句打印到表中？）。如果有人能指出我正确的方向，我将不胜感激。基本上，我要做的是解析 XML 并创建我可以自动调用/打印出来的变量，而不必手动执行（我现在这样做的方式）。

谢谢！

```
<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="bootstrap.css" />
<title> Some Title </title>
</head>
<body>
<div class="container">
    <div class="row-fluid">
    <div class="span2">
        <!--Sidebar content-->
        <button>Carmelo Anthony</button>
    </div>
    <div class="span10">
        <!--Body content-->
        <?php
        $xmldata = 'https://twitter.com/statuses/user_timeline/carmeloanthony.xml';
        $open = fopen($xmldata, 'r');
        $content = stream_get_contents($open);
        fclose($open);
        $xml = new SimpleXMLElement($content);
        ?>
            <table class="table table-striped">
                <tr>
                    <td> <img src=" <? echo $xml->status[0]->user->profile_image_url; ?>"/> </td>
                    <td><strong> <? echo $xml->status[0]->user->name; ?></strong> <i>@<? echo $xml->status[0]->user->screen_name; ?></i> <br /> <? echo $xml->status[0]->text; ?></td>  
                    <td><? echo date("M j",strtotime($xml->status[0]->created_at)); ?></td>
                </tr>
                <tr>
                    <td> <img src=" <? echo $xml->status[1]->user->profile_image_url; ?>"/> </td> 
                    <td><strong> <? echo $xml->status[1]->user->name; ?></strong> <i>@<? echo $xml->status[1]->user->screen_name; ?></i> <br />  <? echo $xml->status[1]->text; ?></td>
                    <td><? echo date("M j",strtotime($xml->status[1]->created_at)); ?></td>
                </tr>
                <tr>
                    <td> <img src=" <? echo $xml->status[2]->user->profile_image_url; ?>"/> </td> 
                    <td><strong> <? echo $xml->status[2]->user->name; ?></strong> <i>@<? echo $xml->status[2]->user->screen_name; ?></i> <br />  <? echo $xml->status[2]->text; ?></td>
                    <td><? echo date("M j",strtotime($xml->status[2]->created_at)); ?></td>
                </tr>
                <tr>
                    <td> <img src=" <? echo $xml->status[3]->user->profile_image_url; ?>"/> </td> 
                    <td><strong> <? echo $xml->status[3]->user->name; ?></strong> <i>@<? echo $xml->status[3]->user->screen_name; ?></i> <br />  <? echo $xml->status[3]->text; ?></td>
                    <td><? echo date("M j",strtotime($xml->status[3]->created_at)); ?></td>
                </tr>
                <tr>
                    <td> <img src=" <? echo $xml->status[4]->user->profile_image_url; ?>"/> </td> 
                    <td><strong> <? echo $xml->status[4]->user->name; ?></strong> <i>@<? echo $xml->status[4]->user->screen_name; ?></i> <br />  <? echo $xml->status[4]->text; ?></td>
                    <td><? echo date("M j",strtotime($xml->status[4]->created_at)); ?></td>
                </tr>
            </table>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:41:18.403

您可以为此使用 foreach 循环：

```
 <!-- ...html code... -->
    <?php
    $xmldata = 'https://twitter.com/statuses/user_timeline/carmeloanthony.xml';
    $open = fopen($xmldata, 'r');
    $content = stream_get_contents($open);
    fclose($open);
    $xml = new SimpleXMLElement($content);
    ?>
        <table class="table table-striped">
            <?php
            foreach($xml->status as $status)
            { ?>
            <tr>
                <td> <img src=" <?php echo $status->user->profile_image_url; ?>" /> </td>
                <td><strong> <?php echo $status->user->name; ?></strong> <i>@<?php echo $status->user->screen_name; ?></i> <br /> <?php echo $status->text; ?></td>  
                <td><?php echo date("M j",strtotime($status->created_at)); ?></td>
            </tr>
              <?php
            }
            ?>
        </table>
        <!-- rest of the code... --> 
```

供参考： http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

**编辑**

对于奇怪的字符问题，尝试使用以下方法解码字符串：[html_entity_decode](http://us2.php.net/manual/en/function.html-entity-decode.php)

# .net - 使用秘密和共享盐加密整数

> ID：11698242
> 
> 赞同：0
> 
> 时间：2012-07-28T04:20:36.570
> 
> 标签：.net, encryption

我需要一种将我的项目 ID 传输到浏览器的方法，以防止爬取/抓取项目。

我的想法是使用秘密和共享盐来加密整数 ID。这允许同一唯一项目有大量永久但不可预测的 URL。假设我需要传输记录 1 和 2 的结果。而不是明文传输 ID：

```
{
    1: "Item One",
    2: "Item Two"
} 
```

我将首先在 Web 服务器上加密 ID：

```
string RESULT_SET_SALT = "randomValue1";
foreach(ResultItem item in results) {
    item.id = encrypt(SECRET, RESULT_SET_SALT, id);
} 
```

实际传输给客户端的是盐值和加密值：

```
{
    RESULT_SET_SALT: "randomValue1",
    387439: "Item One",
    79: "Item Two"
} 
```

当客户端选择一个项目来查看详细信息时，AJAX 请求包括盐和加密值。

```
$.get("/ItemDetails/387439?RESULT_SET_SALT=randomValue1"); 
```

在服务器上，使用请求中包含的客户端的 SECRET 和 SALT 对 ID 进行解密。

```
int actualRequestedId = decrypt(387439, "randomValue1", SECRET); // result is 1 
```

这是信息丰富的：[简单整数加密](https://stackoverflow.com/questions/2769539/simple-integer-encryption) 这是：[加密单个整数的方法](https://stackoverflow.com/questions/959916/way-to-encrypt-a-single-int)

这两篇文章都没有谈到使用盐。可能，如果我只是将秘密分成两部分并传输一半，没有人会努力破解它，但我知道滥用算法经常会破坏它，我更愿意正确地做到这一点.

有什么建议吗？没有必要将 ID 保持为 int，但我将大量传输它们，并且确实需要保持它们很小。由于会有大量的 ID 并且加密过程会阻塞结果 UI，所以它应该不会太昂贵。如果这利用了开箱即用的 .NET (C#) 加密，那就太好了

编辑：在我看来，另一种（更高带宽）的方法是向每个 ID 添加一个随机的高 32 位并用秘密加密它，而不是使用盐。这会很好用，除非这是对算法的另一种滥用，用户从同一个 ID 生成多次迭代的能力很可能会危及秘密（或者不太重要的个人 ID）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:41:52.403

格式保留加密可能是您正在寻找的东西，但实现起来并不容易。您可以使用链接到服务器上的会话的随机密钥。攻击者可以简单地请求所有值，但无法猜测它们。

CTR 密码可以加密任何值并返回相同的大小（以位为单位）。它们具有更好的可用性（在 API 中），但它们需要一个 NONCE 用于使用相同密钥的每个加密。

或者，您可以简单地在服务器上保留一个表并记住一个随机 ID 到项目 ID。这样，攻击者除了通过服务器提交给他的项目外，根本无法检索任何东西。这可能比其他解决方案容易得多，但它需要额外的表内存（当然）。

除了在其他链接中提交的答案之外。

# channel-api - GAE 频道 API 聊天

> ID：11698246
> 
> 赞同：0
> 
> 时间：2012-07-28T04:20:48.017
> 
> 标签：channel-api

目前我正在解决我为创建聊天室而编写的一些代码。如有必要，我将包含代码，但现在我只想听听我遇到的问题的一些可能性。所以基本上我有一个正在监听频道的 client1，然后当 clien2 向服务器发送消息时，消息然后从服务器发送给所有可用的用户。发生的情况是客户端 2 将发送消息并将其显示在他的浏览器上，但客户端 1 在刷新页面或键入自己的消息之前不会收到消息。因此，我认为可以很好地检测到用户的存在，因为消息最终会发送给所有可用的用户，但我不确定？想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:30:25.273

Google App Engine 博客有[一个很好的案例研究](http://googleappengine.blogspot.com/2011/02/pushing-updates-with-channel-api.html)，讨论了如何做到这一点。

它们将频道 ID 列表存储在内存缓存中，并向每个频道发送更新消息。他们提到竞态条件使 memcache 不理想，但对于他们的演示来说效果很好。

# php - 使用 PHP 导入和解析 XML

> ID：11698248
> 
> 赞同：0
> 
> 时间：2012-07-28T04:21:05.317
> 
> 标签：php, xml, parsing, import, simplexml

我正在尝试通过 API 将 XML 文件导入到我的 php 脚本中，然后该脚本将解析所述 XML 文件并提取字符串。我在整个网络空间中搜索了答案，虽然我找到了大量资源，但我仍然无法让这个脚本工作。

我正在加载的 XML 文件看起来像这样

```
<api version="2">
  <currentTime>2012-07-28</currentTime>
    <result>
      <rowset name="accounts" key="accountID" columns="accountID,accountKey,balance">
        <row accountID="555555555" accountKey="6666" balance="7777777777.23"/>
      </rowset>
    </result>
  <cachedUntil>2012-07-28</cachedUntil>
</api> 
```

我正在尝试让我的 php 脚本获取属性**balance**的值。这是我到目前为止放在一起的代码：

```
<?php

$apiurl = "api.some-arbitrary-api-site.com;
$xml = simplexml_load_file($apiurl);

print_r($xml);
$balance = $xml->balance;
print_r($balance);    

?> 
```

这将返回：

```
SimpleXMLElement Object ( ) 
```

还按照其他一些网络教程，我尝试了这种改变

```
$balance = $xml->row->attributes()->balance;
print_r($balance); 
```

吐出来的

```
Warning: main() [function.main]: Node no longer exists in C:\xampp\htdocs\EVE\progress\import.php on line 22

Warning: main() [function.main]: Node no longer exists in C:\xampp\htdocs\EVE\progress\import.php on line 22 
```

我究竟做错了什么？最终结果是页面加载此 API 并每两天获取一次余额，并将要使用的数据存储在使用 highchart 呈现的图表中。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:31:51.280

穆萨回答了这个问题

> 我不知道 simplexml 但它不应该是 $xml->result->rowset->row->attributes()->balance – Musa

我是个白痴，在输入路径时没有再次检查 xml。

谢谢

# ios - iOS 屏幕保护程序应用程序如何工作？

> ID：11698252
> 
> 赞同：3
> 
> 时间：2012-07-28T04:21:48.287
> 
> 标签：ios, xcode

我的一个客户最近想出了一些他在网上浏览时遇到的应用程序。具体来说，他发现有一些应用程序自称为“屏保”，现在他想让我给他做一个屏保应用程序。

明显的问题是，由于另一个应用程序中缺少用户输入，我不知道有任何方法可以打开我的应用程序（替换后台的任何内容）！事实上，我会发誓完全不可能这样做。

那么，总结一下这个问题——是否有可能制作这样的应用程序，如果可以，如何制作？还是这些应用程序真的、真的、标签很糟糕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T04:32:10.133

我刚刚在我的 iPad 上测试了 3 个顶级“屏幕保护程序”应用程序。没有用户启动它们，这些都不能自动打开。它们是真正**贴标签**的产品。在未越狱的设备中，**无法**在没有用户交互的情况下启动屏幕保护应用程序。

用于**越狱**设备的[Cydia 屏幕保护程序应用程序。](http://www.iphoneroots.com/2011/04/screensaver-cydia-tweak-has-released.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T04:35:12.270

你是对的 - 尽管有越狱的软件包可以完成与此类似的任务，但无法在没有用户与库存设备交互的情况下打开应用*程序*。

您应该向您的客户解释这些“屏幕保护程序”应用程序通常会诱使读者下载它们，就好像它们的功能与个人计算机上的屏幕保护程序一样。

# php - 如何在网站中实现 YUI 压缩器

> ID：11698254
> 
> 赞同：-1
> 
> 时间：2012-07-28T04:22:05.477
> 
> 标签：php, javascript, css, apache, yui

我希望使用 yahoo YUI 压缩器创建一个 js/css 缩小网站。我如何在我的网络服务器上使用它。我的服务器正在运行 apache。如何在我的服务器中运行这个 jar 文件。我该怎么做？我希望与 YUI 一起在 PHP 中创建一面？

我在网上找到了这个。它会帮助我吗？ [https://github.com/gpbmike/PHP-YUI-Compressor](https://github.com/gpbmike/PHP-YUI-Compressor)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:40:38.373

也许看看[https://github.com/mrclay/minify](https://github.com/mrclay/minify)，虽然它包含 YUI 压缩器的包装器（它本身是一个 java 命令行工具），但它也是一个独立的 PHP 库。

[http://code.google.com/p/minify/wiki/UserGuide](http://code.google.com/p/minify/wiki/UserGuide)

# php - Wordpress po/mo 类

> ID：11698258
> 
> 赞同：0
> 
> 时间：2012-07-28T04:22:28.133
> 
> 标签：php, wordpress, localization, gettext, hardcode

我正在尝试制作一个带有插件和主题支持的简单系统，但我需要为它们翻译。/en/LC_MESSAGES 的语言文件路径太大，我想要简单，它应该只放在插件的语言文件夹中，就像 Wordpress 一样。我看到 Wordpress 似乎使用了存储在 pomo 文件夹中的 gettext 的硬编码版本。它是从另一个项目中获取的吗？提取这些类并适应我的项目是否容易？你知道我可以达到相同结果的任何其他项目吗？

PS：我不想重新创建 Wordpress，它是一个非常简单的框架，而不是一个 CMS 系统。本地化是强制性的，所以我必须找到一种方法来做到这一点，并为用户提供尽可能简单的方法。

任何帮助表示赞赏。

提前感谢并为我糟糕的英语道歉，Vinicius。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:31:10.513

找到了由 Danilo Segan 编写的[这个类，它完全符合我的需要，独立的 gettext 解析器](https://launchpad.net/php-gettext)

# sql - PostgreSQL 设计无循环依赖的依赖树

> ID：11698263
> 
> 赞同：6
> 
> 时间：2012-07-28T04:23:39.623
> 
> 标签：sql, postgresql, database-design, tree, circular-dependency

我有一个表，称为 EVENTS，其中每一行可以依赖于表中的 0 个或多个其他行。我需要一种表示这种关系的方法，它还可以防止循环依赖（即一组事件返回到同一组中的一个事件）。

我目前有一个 EVENTS 外部的链接表，称之为 EVENTS_DEP。此表将相关行链接到它们所依赖的行，并允许对一行进行多个依赖。如何使用这样的表防止循环依赖？

注意：如果完全可以仅通过数据库设计（而不是脚本、触发器等）来执行此操作，那将是理想的。

此外，如果这只能使用触发器来完成，请告诉我应该在哪种触发器上运行（即在什么事件上）（在插入时，也许？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T16:29:47.433

INSERT 触发器来检查这一点。

假设如下表结构

```
CREATE TABLE event (
    id bigserial PRIMARY KEY,
    foo varchar
);

CREATE TABLE event_deps (
    parent bigint REFERENCES event(id),
    child bigint REFERENCES event(id),

    PRIMARY KEY (parent, child),
    CHECK (parent <> child)
); 
```

将需要以下 INSERT 触发器

```
CREATE FUNCTION deps_insert_trigger_func() RETURNS trigger AS $BODY$
    DECLARE
        results bigint;
    BEGIN
        WITH RECURSIVE p(id) AS (
            SELECT parent
                FROM event_deps
                WHERE child=NEW.parent
            UNION
            SELECT parent
                FROM p, event_deps d
                WHERE p.id = d.child
            )
        SELECT * INTO results
        FROM p
        WHERE id=NEW.child;

        IF FOUND THEN 
            RAISE EXCEPTION 'Circular dependencies are not allowed.';
        END IF;
        RETURN NEW;
    END;
$BODY$ LANGUAGE plpgsql;

CREATE TRIGGER before_insert_event_deps_trg BEFORE INSERT ON event_deps
    FOR EACH ROW
    EXECUTE PROCEDURE deps_insert_trigger_func(); 
```

它的作用是在父 A 和子 B 之间添加新链接时，它使用 A WITH RECURSIVE 查询来查找 A 的所有祖先。B 不应该是其中之一。

UPDATE 触发器更难，因为当触发器执行到旧链接时仍然存在，因此 INSERT 触发器的测试在用于 UPDATE 时可能会给出误报。

所以对于 UPDATE 我们需要添加一些额外的条件来隐藏旧数据。

```
CREATE FUNCTION deps_update_trigger_func() RETURNS trigger AS $BODY$
    DECLARE
        results bigint;
    BEGIN
        WITH RECURSIVE p(id) AS (
            SELECT parent
                FROM event_deps
                WHERE child=NEW.parent
                    AND NOT (child = OLD.child AND parent = OLD.parent) -- hide old row
            UNION
            SELECT parent
                FROM p, event_deps d
                WHERE p.id = d.child
                    AND NOT (child = OLD.child AND parent = OLD.parent) -- hide old row
            )
        SELECT * INTO results
        FROM p
        WHERE id=NEW.child;

        IF FOUND THEN 
            RAISE EXCEPTION 'Circular dependencies are not allowed.';
        END IF;
        RETURN NEW;
    END;
$BODY$ LANGUAGE plpgsql;

CREATE TRIGGER before_update_event_deps_trg BEFORE UPDATE ON event_deps
    FOR EACH ROW
    EXECUTE PROCEDURE deps_update_trigger_func(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:54:46.503

在没有编程触发器的情况下，使用 SQL 引擎是不可能做到这一点的。对于支持这一点的 SQl 引擎，它需要支持递归 SQL（也称为递归 WITH 表达式，或递归 CTE），以及对断言的可靠支持。

许多支持 CTE 的/WITH 表达式，尽管可能并非所有的都支持该功能的递归版本。至于断言otoh，我被告知只有一个系统支持它们，但是实现是如此的缺陷和错误，以至于考虑认真使用它是可笑的。

有一些系统可以让你完全按照你的要求去做，但不要指望将 SQL 与这样的系统对话。这种系统的作者以保持他们的婴儿的关系为荣。

# node.js - nodejs 是否有类似于 ruby 的表单助手来生成 CSRF 令牌？

> ID：11698269
> 
> 赞同：1
> 
> 时间：2012-07-28T04:25:09.763
> 
> 标签：node.js, csrf, csrf-protection

在 ruby​​ 中，人们可以做一些事情，比如`<%= form_tag(:action => '/submit') do %> ... <% end %>`获取包含 CSRF 令牌的表单。

节点中是否存在现有功能，它是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:46:39.377

您可以为 node.js使用[caolan-forms 插件。](https://github.com/caolan/forms/)之后安装[express-csrf 插件](https://github.com/hanssonlarsson/express-csrf)。

然后你可以合并这两个，比如：

```
// initializing express
var express = require('express'),

// initializing express-csrf   
csrf = require('express-csrf');

app = express.createServer();

app.dynamicHelpers({
    csrf: csrf.token
});

var forms = require('forms'),
    fields = forms.fields,
    validators = forms.validators;

var reg_form = forms.create({
    username: fields.string({required: true, id: csrf, name: csrf}),
});

// finally render the form
reg_form.toHTML(); 
```

它会产生：

```
<div class="field required">
   <label for="id_username">Username</label>
   <input type="text" name="[csrf-value]" id="[csrf-value]" value="test" />
</div> 
```

**注：** caolan-forms 的作者写道：

> 您会注意到您必须提供自己的表单标签和提交按钮，这种方式更灵活；）

# 编辑

由于 express-csrf 已被贬低，因此请改用[connect bundle](https://github.com/senchalabs/connect)并遵循[这个](https://github.com/senchalabs/connect/blob/master/examples/csrf.js)简单的示例。最终，您将能够将其与*caolan-forms*集成，例如：

```
var reg_form = forms.create({
     '_csrf':fields.hidden({value: 'req.session._csrf'}),
      ...
}) 
```

# java - 如何使用图像填充 BorderLayout.CENTER 制作 JLabel

> ID：11698271
> 
> 赞同：5
> 
> 时间：2012-07-28T04:25:42.897
> 
> 标签：java, swing

我有一个 JFrame 并将 LayoutManager 设置为 BorderLayout 然后继续添加我的 JLabel 和图像。但是，当我调整框架的大小时，JLabel 不会调整大小。我还没有在 North、S、E 等中添加任何组件。我希望简单地让标签内的图像填满整个框架，让我的菜单保持完整。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T05:13:29.207

如果这看起来很自大，请原谅我，但我没有其他事情可做。

我做了一个快速的样本

![BorderLayout 宽](../Images/416841ba8e200426af9d5893521c2d65.png) ![BorderLayout 窄](../Images/0892ba3867d1118dab37e1fd34c644c8.png)

看到图像周围的红线，那是`JLabel`的边界。如您所见，标签已重新调整大小以填充整个区域。

这是我用来生成示例的代码

```
public class LayoutFrame extends JFrame {

    public LayoutFrame() throws HeadlessException {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Image image = null;
        URL url = getClass().getResource("/layout/issue78.jpg");
        try {
            image = ImageIO.read(url);
        } catch (IOException ex) {

            ex.printStackTrace();

        }

        JLabel label = new JLabel(new ImageIcon(image));
        label.setHorizontalAlignment(JLabel.CENTER);
        label.setVerticalAlignment(JLabel.CENTER);
        label.setBorder(new LineBorder(Color.RED, 4));

        setLayout(new BorderLayout());

        add(label);

    }

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                LayoutFrame frame = new LayoutFrame();
                frame.setSize(200, 200);
                frame.setLocationByPlatform(true);
                frame.setVisible(true);

            }
        });

    }

} 
```

显然，您需要提供自己的图像；）。

不要忘记，标签不会为您缩放内容，如果这是您的目标，您需要实现自己的组件来实现这一目标。

如果您仍然遇到问题，我建议（在没有进一步证据的情况下）您的标签可能不在您认为的容器中，或者容器布局管理器不是您认为的那样。

**更新**

我不知道您为什么会遇到组件丢失或菜单问题的问题。混合重量和重量轻的成分？

带有菜单栏的示例

![带菜单栏](../Images/ea68e9e239c3eabddb78445e3ddb2c09.png)

在仔细阅读您的问题后，我设计了一个简单的调整图像窗格大小的示例。为了速度，我依赖于我的库，但是用你自己的代码代替我的调用应该相当容易

```
public class ImagePane extends JPanel {

    protected static final Object RESIZE_LOCK = new Object();

    private BufferedImage image;
    private BufferedImage scaledImage;
    private Timer resizeTimer;

    public ImagePane() {

        URL url = getClass().getResource("/layout/issue78.jpg");
        try {
            image = ImageIO.read(url);
        } catch (IOException ex) {

            ex.printStackTrace();

        }

        resizeTimer = new Timer(250, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                // Simple thread factory to start a slightly lower 
                // priority thread.
                CoreThreadFactory.getUIInstance().execute(new ResizeTask());

            }

        });

        resizeTimer.setCoalesce(true);
        resizeTimer.setRepeats(false);

    }

    @Override
    public void setBounds(int x, int y, int width, int height) {

        super.setBounds(x, y, width, height);

        resizeTimer.restart();

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        if (scaledImage != null) {

            // This simply returns a rectangle that takes into consideration
            //the containers insets
            Rectangle safeBounds = UIUtilities.getSafeBounds(this);

            System.out.println("scaledImage = " + scaledImage.getWidth() + "x" + scaledImage.getWidth());

            int x = ((safeBounds.width - scaledImage.getWidth()) / 2) + safeBounds.x;
            int y = ((safeBounds.height - scaledImage.getHeight()) / 2) + safeBounds.y;

            g2d.drawImage(scaledImage, x, y, this);

        }

    }

    protected class ResizeTask implements Runnable {

        @Override
        public void run() {

            synchronized (RESIZE_LOCK) {

                if (image != null) {

                    int width = getWidth();
                    int height = getHeight();

                    System.out.println("width = " + width);
                    System.out.println("height = " + height);

                    // A simple divide and conquer resize implementation
                    // this will scale the image so that it will fit within
                    // the supplied bounds
                    scaledImage = ImageUtilities.getScaledInstanceToFit(image, new Dimension(width, height), ImageUtilities.RenderQuality.High);

                    System.out.println("scaledImage = " + scaledImage.getWidth() + "x" + scaledImage.getWidth());

                    repaint(); // this is one of the few thread safe calls

                }

            }

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:39:23.557

最好的选择是继承 ImageIcon 并覆盖它的 paintIcon 方法以简单地使用 Graphics.paint(x, y, width, height ...) 绘制图像。

# php - 按日期拆分时间戳

> ID：11698273
> 
> 赞同：-1
> 
> 时间：2012-07-28T04:25:57.593
> 
> 标签：php, datetime, timestamp

我在 PHP 数组中有一系列时间戳。

我怎样才能最有效地将这些条目按它们发生的日期分开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T04:29:17.753

假设它们是 unix 时间戳，您可以通过以下方式获取它们的日期：

```
date('Yz', $yourTimestamp); 
```

例如，这将显示它`2012251`。`Y`是一年，`z`是一年中的一天，然后用它来进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:29:46.723

尝试使用[DateTime 格式功能](http://www.php.net/manual/en/datetime.format.php)

```
$date = new DateTime('@$timestamp');
echo $date->format('Y'); // will display Year 
```

# c# - 方法的最后一条指令可能的操作码是什么？

> ID：11698274
> 
> 赞同：7
> 
> 时间：2012-07-28T04:26:09.217
> 
> 标签：c#, .net, cil, il, opcode

在 .net 中，可以作为方法的最后一条指令存在的可能操作码是什么。

目前我知道它可以

*   回复[http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ret.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ret.aspx)
*   抛出[http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.throw.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.throw.aspx)

但它有可能是任何其他操作码吗？如果是这样，什么代码（更喜欢 c#）会产生它们？

“最后一个”是指“方法体中定义的最终操作码”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T05:09:53.660

如果`throw`可以是方法中的最后一个操作码，则很可能[`jmp`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.jmp)也符合条件。

此外，如果我们考虑退出条件不在末尾的递归方法，~~则最后一个操作码*可能*是 a[`call`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.call)或[`tail.call`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.tailcall)而不是 a `ret`。~~

*更新：*嗯，不，它不会。正如 Marc Gravell 在他的评论中正确指出的那样，文档`tail.call`说：

> 除了通过以下调用传输的参数外，堆栈必须为空。call 指令后面的指令必须是`ret`.

*更新 2：*无条件分支操作码类似于[`br`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.br)并且[`br.s`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.br_s)也可能是方法的最后一条指令，如果它的退出点发生得更早（再次感谢 Marc）。

# ruby-on-rails - 在 coffeescript 文件中访问 heroku 环境变量

> ID：11698281
> 
> 赞同：0
> 
> 时间：2012-07-28T04:27:37.937
> 
> 标签：ruby-on-rails, heroku, coffeescript

我有一个场景，我希望我的 CoffeeScript 文件访问一个环境变量，比如 API 键值。这在本地工作得很好，但是当我将它推到heroku时它不起作用。

该文件的名称类似于 myfile.js.coffee.erb

我正在设置这样的值

```
api_key = '<%= ENV['SERVICE_API_KEY'] %>' 
```

我知道这些值是在 heroku 中设置的，并且我已经三重检查了拼写等。我知道它正在被处理，因为生成的 JavaScript 文件看起来像这样

```
var api_key;
api_key = ""; 
```

在预编译我的资产时我需要做些什么来告诉它访问环境变量吗？我承认我是 CoffeeScript 和 Rails 资产管道的新手。还有另一种更被接受的方式吗？出于明显的原因，我不想将其嵌入文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:15:12.203

因此，由于 API 密钥对于感兴趣的人来说是可见的，无论它是在 javascript 文件还是 html 文件中，并且因为您真的不想在每个请求中生成一个新的 .js 文件，所以我找到的最简单的解决方案是同样的问题是将密钥放入您的`layout.html.erb`文件中。

您可以将它放入脚本标签中，使用数据属性，无论您的船如何漂浮，但它可以工作，并且您可以获得动态变量的好处并且必须少渲染一个文件。

而且您仍然可以使用`<%= ENV['api_key'] %>`. 您必须在 js（或咖啡）中获取变量，但这很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:21:14.980

尝试这个

```
heroku labs:enable user_env_compile -a myapp 
```

然后再次部署

为我们工作！

这个人的所有功劳： [Heroku 总是运行 assets:precompile with the production environment for Rails 3.2](https://stackoverflow.com/questions/9830244/heroku-always-runs-assetsprecompile-with-the-production-environment-for-rails-3)

# java - 将字符串数组作为参数传递给函数java

> ID：11698283
> 
> 赞同：12
> 
> 时间：2012-07-28T04:27:43.933
> 
> 标签：java, function, arrays

我想将字符串数组作为参数传递给函数。请看下面的代码

```
String[] stringArray = {'a', 'b', 'c', 'd', 'e'};

functionFoo(stringArray); 
```

代替：

```
functionFoo('a', 'b', 'c', 'd', 'e'); 
```

但如果我这样做，我会收到一条错误消息，指出转换`String[]`为`String`. 我想知道是否可以传递这样的值或者正确的方法是什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-28T04:29:40.697

怎么样：

```
public class test {
    public static void someFunction(String[] strArray) { 
        // do something 
    }

    public static void main(String[] args) {
        String[] strArray = new String[]{"Foo","Bar","Baz"};
        someFunction(strArray);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T07:40:22.663

以上所有答案都是正确的。但请注意，当您像这样传递时，您将传递对字符串数组的引用。如果您在被调用函数中对数组进行任何修改，它也会反映在调用函数中。

在 Java 中还有另一个称为变量参数的概念，您可以研究一下。它基本上是这样工作的。例如：-

```
 String concat (String ... strings)
   {
      StringBuilder sb = new StringBuilder ();
      for (int i = 0; i &lt; strings.length; i++)
           sb.append (strings [i]);
      return sb.toString ();
   } 
```

在这里，我们可以调用 concat(a,b,c,d) 之类的函数或您想要的任意数量的参数。

更多信息：[http ://today.java.net/pub/a/today/2004/04/19/varargs.html](http://today.java.net/pub/a/today/2004/04/19/varargs.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T04:31:06.303

我相信这应该是这样做的方式......

```
 public static void function(String [] array){
    ...
    } 
```

呼叫将像...

```
 public void test(){
        String[] stringArray = {"a","b","c","d","e","f","g","h","t","k","k","k","l","k"};
        function(stringArray);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T05:52:31.207

看看熟悉的以字符串数组为参数的 main 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T04:30:16.380

您的方法声明很可能不正确。确保方法参数的类型是字符串数组 (String[]) 而不仅仅是字符串，并且在数组声明中使用双引号将字符串括起来。

```
private String[] stringArray = {"a","b","c","d","e","f","g","h","t","k","k","k"};
public void myMethod(String[] myArray) {} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T07:00:59.380

我认为您忘记将参数注册为 `String[]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-01T21:55:08.410

随意使用它。

```
/*
 * The extendStrArray() method will takes a number "n" and
 * a String Array "strArray" and will return a new array
 * containing 'n' new positions. This new returned array
 * can then be assigned to a new array, or the existing
 * one to "extend" it, it contain the old value in the 
 * new array with the addition n empty positions.
 */
private String[] extendStrArray(int n, String[] strArray){
    String[] old_str_array = strArray;
    String[] new_str_array = new String[(old_str_array.length + n)];
    for(int i = 0; i < old_str_array.length; i++ ){
        new_str_array[i] = old_str_array[i];
    }//end for loop

    return new_str_array;

}//end extendStrArray() 
```

基本上我会这样使用它：

```
String[] students = {"Tom", "Jeff", "Ashley", "Mary"};
// 4 new students enter the class so we need to extend the string array
students = extendStrArray(4, students); //this will effectively add 4 new empty positions to the "students" array. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-24T23:51:45.747

请检查以下代码以获取更多详细信息

```
 package FirstTestNgPackage;

import java.util.ArrayList;
import java.util.Arrays;

public class testingclass {

    public static void main(String[] args) throws InterruptedException {
        // TODO Auto-generated method stub
        System.out.println("Hello");

        int size = 7;
        String myArray[] = new String[size];
        System.out.println("Enter elements of the array (Strings) :: ");
        for(int i=0; i<size; i++)
        {
        myArray[i] = "testing"+i;
        }
        System.out.println(Arrays.toString(myArray));

        ArrayList<String> myList = new ArrayList<String>(Arrays.asList(myArray));

        System.out.println("Enter the element that is to be added:");

        myArray = myList.toArray(myArray);

        someFunction(myArray);
        }

    public static void someFunction(String[] strArray) 
    { 
        System.out.println("in function");
        System.out.println("in function length"+strArray.length );
        System.out.println(Arrays.toString(strArray));

           }
        } 
```

只需复制它并过去...您的代码..它将起作用..然后您了解如何将字符串数组作为参数传递...

谢谢

# c# - MVC3查询子句自定义查询

> ID：11698285
> 
> 赞同：0
> 
> 时间：2012-07-28T04:28:22.183
> 
> 标签：c#, linq

```
第一个表
+--------+------------+--------+
| 类型 | 品种| 价格 |
+--------+------------+--------+
| 苹果| 高分辨率照片| CLIPARTO 晚会 | 2.79 |
| 苹果| 高分辨率照片| CLIPARTO 富士| 0.24 |
| 苹果| 高分辨率照片| CLIPARTO 林贝特维格| 2.87 |
| 橙色 | 瓦伦西亚 | 3.59 |
| 橙色 | 肚脐 | 9.36 |
| 梨 | 布拉德福德 | 6.05 |
| 梨 | 巴特利特 | 2.14 |
| 樱桃| 冰 | 2.55 |
| 樱桃| 车兰 | 6.33 |
+--------+------------+--------+

```

```
第二张表
+--------+----------+
| 类型 | 最低价格 |
+--------+----------+
| 苹果| 高分辨率照片| CLIPARTO 0.24 |
| 樱桃| 2.55 |
| 橙色 | 3.59 |
| 梨 | 2.14 |
+--------+----------+

```

```
select type, min(price) as minprice
from fruits
group by type; 
```

第一个表是我拥有的数据的示例，第二个表是我想从第一个表中得到的。

我正在使用`GenericRepository/UnitOfwork`从存储库中获取数据。

```
repository.fruitRepository.Get().GroupBy(m => m.type); 
```

但是我只能获取类型字段，但我想获取更多字段。

我需要在 groupby 之前使用 select 子句吗？如果是，如何选择更多字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:54:06.823

GroupBy 方法返回更多数据，但它作为可枚举返回...您可以在 GroupBy 之后使用 Select 从中提取您想要的内容...

```
repository.fruitRepository.Get()
    .GroupBy(m => m.type)
    .Select(m => new { type = m.Key, minPrice = m.Min(f => f.Price) }); 
```

或者，如果您更喜欢 LINQ 语句：

```
var result = from x in repository.fruitRepository.Get()
             group x by x.type into typeGroup
             select new
             {
                 type = typeGroup.Key,
                 minPrice = typeGroup.Min(item => item.Price)
             }; 
```

# c++ - 让私有内部类进入 main

> ID：11698296
> 
> 赞同：2
> 
> 时间：2012-07-28T04:30:55.423
> 
> 标签：c++, nested-class

这是代码：

```
class Vec
{
public:
    Vec() {len=0;};
    Vec(int n);
    ~Vec();
    void setValue(int idx,int v);
    void printVec() const;
private:
    class Items
    {
        friend class Vec;
        Items(){value = 0;};
        Items(int v){value = v;};
        int value;
    };
    int len;
    Items *vec;
};

/*Declare the member functions & constructor & destructor*/

int main()
{
    Vec vector(5);
    vector.printVec();
    for(int i=0;i<5;i++){
        vector.setValue(i,i);
        vector.printVec();
    }
    Items n;
    return 0;
} 
```

当我尝试使用`Items n;`时，我收到一个错误：“未声明的项目”。

但是使用的时候`vector.Items n;`还是报“invalid use of `class Vec::Items`”

如何让编译器识别声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:35:15.233

> 我想让它可以被宣布。

您需要创建`Items`该类的公共嵌套类或内部`Vec`类，然后`Vec::Items`在创建该对象类型的实例时使用范围解析运算符（即 ）。否则，您只能`Vec::Items`在 的方法内创建对象的实例，`Vec`因为它将是 的私有内部类`Vec`，而不是可公开访问的类类型。

# xcode - 无法使用 iCloud 容器启动“应用程序”

> ID：11698300
> 
> 赞同：0
> 
> 时间：2012-07-28T04:32:05.937
> 
> 标签：xcode, macos, icloud

我有一个针对 10.7 (Lion) 平台的 OS X 应用程序。我在启用了 iCloud 的开发机器上使用 XCode 4.4。这台机器上的 OS X 版本是 10.8 (Mountain Lion)。

我有一个`iCloud`使用开发者证书实用程序启用的 APP ID `com.company.appname`：。该实用程序在 App ID 描述下的 iCloud 标签旁边显示一个绿色勾号。

从`XCode` `Target/Summary`选项卡我启用`Entitlements`并添加了 iCloud Container `com.company.appname`。当然，在内部，它前面是权利文件中的团队 ID `teamid.com.company.appname`：.

我的 Mac 上还有一个有效的（绿色打勾的）配置文件，具有相同的 id: `teamid.com.company.appname`。

`Derived Data`位置设置为`Relative`from `XCode/Preferences`。

该应用程序构建正常。但是当我运行它时，我得到了`"Could not launch "appname". Permission denied."`错误。

`com.company.appname`如果我从“权利”下的列表框中删除 iCloud 容器 ID`iCloud Containers`并构建应用程序，它运行正常。但我当然无法访问为该应用启用的 iCloud 容器。

在过去的 24 小时里，我一直在解决这个问题。我已阅读指南；`Developing for the App Store`, `App Sandbox Design Guide`, 和`Entitlement Key Reference`里外。然而我被困住了。什么地方出了错？

我很绝望，如果你能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:31:45.917

我认为最可能的问题是 AppID、权利和您的配置文件彼此不匹配。如果您对这些设置进行大量试验，这很容易发生。如果您创建一个具有有效设置的新项目，它应该可以立即使用，但如果您转换、更改或编辑现有项目，它可能会损坏。

不要忘记应用程序包 ID 的 10 位前缀。这是必需的，尤其是。用于 iCloud 键值存储！

*   登录 developer.apple.com，查看 AppIDs 选项卡
*   如有必要，创建 AppID
*   检查此应用的 iCloud 设置
*   记下表单中的确切应用标识符`ABCDE01234.com.domain.app`
*   切换回 Xcode，在管理器中“设备”选项卡的“团队”部分更新您的配置文件和权利
*   转到项目设置，选择应用程序目标并搜索“代码签名”
*   确保选择了正确的代码签名身份（请参阅上面的应用程序标识符）
*   转到摘要选项卡并输入您的应用 ID
*   打开权利文件并检查其中是否还有正确的 ID。

然后它应该工作。希望。

**编辑：**认为将链接添加到应用程序 ID 中心会很好： [https ://developer.apple.com/certificates/index.action#bundlelist](https://developer.apple.com/certificates/index.action#bundlelist)

# jquery - 你如何连续运行一个 jQuery 函数，等待第一个完成？

> ID：11698303
> 
> 赞同：0
> 
> 时间：2012-07-28T04:32:25.633
> 
> 标签：jquery, callback, jquery-callback

我知道我需要一个回调来解决这个问题，但我就是做错了。我尝试了几种不同的解决方案，但我会让您不必查看我的尝试。相反，我只会展示我想要完成的工作。

```
theCodeToRun('123', '1');
//Wait for it to complete...
theCodeToRun('123', '0');

function theCodeToRun(myID, exitEarly){
    //Do some stuff (using myID)
    if(exitEarly == 1){
        return false; //Exit
    }
    //Do some more stuff
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:34:04.057

将第二个调用放在传递给第一个的回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:40:03.873

你想做什么`theCodeToRun`？javascript 在单线程中执行，因此如果没有 async-stuff in `theCodeToRun`，则不需要任何回调。否则，您可以像这样修改代码：

```
function theCodeToRun(func, flag, callback){
    if(flag){
        callbck();
    }
    func(callback);
} 
```

你会很困惑为什么`callback`作为参数传递给`func`. 好的，在这种情况下，我们假设`func`例程做一些异步工作，比如`ajax`打电话。您需要将其传递`callback`给它，以便`func`在其工作完成后执行您的回调。

# jquery - jQuery 正在触发同一类的所有元素，我怎样才能只触发一个悬停的元素？

> ID：11698317
> 
> 赞同：0
> 
> 时间：2012-07-28T04:35:54.493
> 
> 标签：jquery

我很难理解这个问题。我有两个 div，一个完全覆盖另一个。例如，假设蓝色 div 在底部，红色 div 在顶部，其 display 属性设置为 none，我将其称为组。连续还有 5 个这样的“组”。

我希望能够将鼠标悬停在一个上，并让隐藏的红色潜水淡入。目前我下面的代码同时触发所有 5 个，因为它们都具有相同的类。

我可以用什么来解决这个问题？我尝试在悬停事件中使用“this”，但似乎无处可去。

```
$('.blue').mouseenter( function (){
    $(".red-rollover").fadeIn("500");
});

$('.blue').mouseleave( function (){
    $(".red-rollover").fadeOut("500");
}); 
```

**编辑**
对不起，我没有发布小提琴......我的错。这更好地解释了 div 布局。 [http://jsfiddle.net/pjPua/](http://jsfiddle.net/pjPua/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:40:16.163

尝试[`.closest`](http://api.jquery.com/closest/)

```
$('.blue').mouseenter( function (){
    $(this).closest(".red-rollover").fadeIn("500");
    //OR 
   // $(".red-rollover",$(this)).fadeIn("500");
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T04:44:30.587

就我个人而言，我会将`red-rollover`div 嵌套在蓝色中，然后使用[.children()](http://api.jquery.com/children/)来激活它们，如下所示[：](http://www.quirksmode.org/js/this.html)

## 例如：http: [//jsfiddle.net/K68F5/](http://jsfiddle.net/K68F5/)

## 你的小提琴，更新了修复：http: [//jsfiddle.net/pjPua/1/](http://jsfiddle.net/pjPua/1/)

```
$('.blue').mouseenter( function (){
    $(this).children('.red').fadeIn("500");
});

$('.blue').mouseleave( function (){
    $(this).children('.red').fadeOut("500");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:40:31.137

```
$('.blue').mouseenter( function (){
    $(".red-rollover").eq($(this).index()).fadeIn("500");
});

$('.blue').mouseleave( function (){
    $(".red-rollover").eq($(this).index()).fadeOut("500");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T04:41:33.743

如果它们相互重叠，则 div 不能淡入。您需要为要淡入的 div 的 z-index 设置动画，使其彼此重叠。

```
('.blue').mouseenter( function (){
    $(".red-rollover").animate({z-index: "2"}, 500);
});

$('.blue').mouseleave( function (){
   $(".red-rollover").animate({z-index: "0"}, 500);
}); 
```

应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T05:02:09.167

为您的选择器指定上下文，这将选择`.red-rollover`当前的后代`.blue`

```
$('.blue').mouseenter( function (){
    $(".red-rollover", this).fadeIn("500");
});

$('.blue').mouseleave( function (){
    $(".red-rollover", this).fadeOut("500");
}); 
```

[http://jsfiddle.net/pjPua/2/](http://jsfiddle.net/pjPua/2/)

# asp.net-mvc - ASP 和 Django 在同一主机上

> ID：11698319
> 
> 赞同：0
> 
> 时间：2012-07-28T04:36:12.040
> 
> 标签：asp.net-mvc, django, webserver, hosting

我可以在同一主机下同时拥有一个使用 ASP.NET MVC 4 的页面和另一个使用 Django 的页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:42:46.360

是的，只需将您的 Web 服务器配置为独立于 ASP.NET 应用程序为 Django 提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:36:14.717

如果你想为 ASP.NET 提供服务，你需要一个基于 Windows 的服务器。从 Windows 服务 Django 不是一个大问题，但您可能无法通过共享主机帐户来完成。共享 Windows 托管通常被锁定/限制如此之多，以至于托管 Django 是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:35:50.867

是的，您可以配置您的 Web 服务器以使用 ASP.Net 或某些 php 应用程序在同一主机上为 django 项目提供服务

否则，您可以使用 iis 安装 apache 并配置 apache 以加载 django 项目和 iis 以加载 ASP.Net 应用程序您可以通过管理它们的端口来管理它，例如 IIS 的端口 80 和 apache 的端口 8080 如果你想这样做你应该安装apache 中的 wsgi_mod 你可以在这里看到：[https ://docs.djangoproject.com/en/1.2/howto/deployment/modwsgi/](https://docs.djangoproject.com/en/1.2/howto/deployment/modwsgi/)

* * *

问候穆罕默德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:21:49.790

我同意 Daniel Eriksson 的观点……在共享服务器上控制 Django 的托管环境会很困难。此外，我没有在 Microsoft 的 Web 平台安装程序 (http://www.microsoft.com/web/gallery/categories.aspx) 应用程序列表中看到 Django。这意味着，在 Windows 平台上设置和获取 dJango 应用程序的真正好处可能很困难。

如果您仍然决定在 Windows 平台上托管 asp.net + django，请选择 VPS 托管。

# javascript - 我可以更改所选文本的 HTML 吗？

> ID：11698320
> 
> 赞同：2
> 
> 时间：2012-07-28T04:36:55.333
> 
> 标签：javascript, jquery

我们可以使用 javascript 更改网页选定部分的 HTML 或其属性吗？

例如，有一个随机网页：（显示了一部分）

![在此处输入图像描述](../Images/084f6cb9e78d259a7d0840f0c4c3da69.png)

用 HTML 作为

```
...<p>Sample paragraph</p>.. 
```

可以获得已在[此处](https://stackoverflow.com/questions/5643635/how-to-get-selected-html-text-with-javascript)回答的所选文本的 HTML 。

但是，我可以更改所选文本的 html 吗？比如，在段落标签中添加一个 class 或 id 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:43:39.240

jQuery wrapselection 插件听起来像您正在寻找的[http://archive.plugins.jquery.com/project/wrapSelection](http://archive.plugins.jquery.com/project/wrapSelection)。你所要求的不是直接可能的，插件通过在周围文本周围添加额外的节点来工作，这些节点可能不是 100% 可靠的（特别是在 IE6-8 中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T06:07:30.830

这是一个没有插件的工作示例。

[http://jsfiddle.net/9HTPw/2/](http://jsfiddle.net/9HTPw/2/)

```
function getSel() {
    var sel = null;
    if (
    typeof document.selection != "undefined" && document.selection 
                                   && document.selection.type == "Text") {
        sel = document.selection;
    } else if (
    window.getSelection && window.getSelection().rangeCount > 0) {
        sel = window.getSelection();
    }
    return sel;
}

var getSelectionStart = (function () {

    function createRangeFromSel(sel) {
        var rng = null;
        if (sel.createRange) {
            rng = sel.createRange();
        } else if (sel.getRangeAt) {
            rng = sel.getRangeAt(0);
            if (rng.toString() == "") rng = null;
        }
        return rng;
    }

    return function (el) {
        var sel = getSel(),
            rng, r2, i = -1;
        if (sel) {
            rng = createRangeFromSel(sel);
            if (rng) {

                if (rng.parentElement) {
                    if (rng.parentElement() == el) {
                        r2 = document.body.createTextRange();
                        r2.moveToElementText(el);
                        r2.collapse(true);
                        r2.setEndPoint("EndToStart", rng);
                        i = r2.text.length;
                    }
                } else {
                    if ( rng.startContainer && rng.endContainer 
                   &&  rng.startContainer == rng.endContainer 
                   && rng.startContainer == rng.commonAncestorContainer 
                   && rng.commonAncestorContainer.parentNode == el) {

                        //make sure your DIV does not have any inner element,
                        //otherwise more code is required in order to filter
                        //text nodes and count chars

                        i = rng.startOffset;
                    }
                }
            }
        }
        return i;
    };

})();

$("#content").on('mousedown', function () {
    $("#content").html(content)
});

var content = $("#content").html();

$("#content").on('mouseup', function () {
    var start = getSelectionStart(this);
    var len = getSel().toString().length;

    $(this).html(
            content.substr(0, start) + 
            '<span style=\"background-color: yellow;\">' +
            content.substr(start, len) + 
            '</span>' +
            content.substr(Number(start) + Number(len), content.toString().length));
}); 
```

参考资料： [http ://bytes.com/topic/javascript/answers/153164-return-selectionstart-div](http://bytes.com/topic/javascript/answers/153164-return-selectionstart-div)

# c++ - MPI 超额订阅会导致系统崩溃吗？

> ID：11698321
> 
> 赞同：1
> 
> 时间：2012-07-28T04:36:58.940
> 
> 标签：c++, boost, multiprocessing, mpi, message-passing

我已经实现了一个带有生产者和消费者的示例 MPI 应用程序。生产者在等级为 0 的进程上运行，消费者将在所有非零等级上运行。消费者将产生消费者工作线程来处理生产者生成的消息。消费者线程分为接收线程和工作线程。

消费者接收者线程执行recv，并在接收时传递要由消费者工作者消费的消息，消费者工作者在执行计算后将处理后的消息发送回生产者（根）。

我在我的双核机器上运行这段代码。我注意到的是，当我使用 执行我的应用程序时`mpirun -np 2`，该应用程序对于生产者生成的任意数量的消息都运行良好。当我尝试使用 运行应用程序时`mpirun -np 4`，应用程序在处理几次运行后崩溃。

以前有人遇到过这个问题吗？了解为什么会发生这种情况会很棒。

编辑：这是我每次运行应用程序时都会遇到的异常：

```
*** glibc detected *** application: free(): invalid pointer: 0x00007f67d1f9f9e0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e626)[0x7f67d0671626]
/usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(+0x9041)[0x7f67cc790041]
/usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(+0x5a00)[0x7f67cc78ca00]
/usr/lib/libmpi.so.0(MPI_Recv+0x154)[0x7f67d1d531e4]
/usr/local/lib/libboost_mpi.so.1.50.0(_ZN5boost3mpi6detail19packed_archive_recvEP19ompi_communicator_tiiRNS0_15packed_iarchiveER20ompi_status_public_t+0x33)[0x7f67d1fcb223]
/usr/local/lib/libboost_mpi.so.1.50.0(_ZNK5boost3mpi12communicator4recvINS0_15packed_iarchiveEEENS0_6statusEiiRT_+0x45)[0x7f67d1fc4755]
application(_ZNK5boost3mpi12communicator9recv_implI7MessageEENS0_6statusEiiRT_N4mpl_5bool_ILb0EEE+0x74)[0x464d98]
application(_ZNK5boost3mpi12communicator4recvI7MessageEENS0_6statusEiiRT_+0x3b)[0x46479b]
application(_ZN12WorkerReceiver3runEv+0xac)[0x46b1da]
/usr/local/lib/libPocoFoundation.so.12(_ZN4Poco10ThreadImpl13runnableEntryEPv+0x96)[0x7f67d26fcb16]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x7e9a)[0x7f67d09b7e9a]
/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f67d06e54bd] 
```

谢谢

# sockets - 使用 socket.io 授权

> ID：11698322
> 
> 赞同：3
> 
> 时间：2012-07-28T04:37:30.503
> 
> 标签：sockets, node.js, authorization, express, socket.io

我正在尝试确定如何最好地授权（除了验证）用户使用 socket.io 执行特定任务。

简而言之，这是相当简单的。我首先有一个登录/密码表单，它查询数据库以确定记录是否存在，如果确实存在，那么我将用户附加到 req.session 数据。

```
exports.session = function(req, res){
    User.authenticate(req.body.username, req.body.password, function(err, user){
        if (user){
            req.session.user = user;
            res.redirect('/');
        } else {
            console.log("authentication failed");
            res.render('user/login');
        }
    });
}; 
```

一旦有了这个，我就可以使用中间件来授权某些请求。例如，

```
app.put('/api/users/:userId', m.requiresLogin, m.isUser, api.putUser);

//Middleware
exports.isUser = function(req, res, next){
  if (req.session.user._id == req.user._id){
    next();
  } else {
    res.send(403);
  }
}; 
```

但我对如何使用 socket.io 执行此操作有点困惑。假设我有一个事件侦听器，它会根据用户的配置文件 JSON 对象更改数据库中的用户配置文件。

```
 socket.on('updateProfile', function(data){
    // query the database for data.user._id, and update it with the data attribute
    // but only do this if the data.user._id is equal to the user trying to do this. 
    }); 
```

关于如何实现这一目标的任何建议？可以通过会话信息来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T20:52:44.140

It appears as though you're using Express.
I would highly recommend Express middleware called Passport ([https://github.com/jaredhanson/passport](https://github.com/jaredhanson/passport)).

Using Passport, you can implement any number of strategies to authenticate users (ex. OpenID through Google, Yahoo, Facebook; OAuth through Twitter, Facebook; or local strategies (ex. email registration)).

Finally, to answer your precise question: a project called passport.socketio is amazing in that it plays well with the above authentication strategies and, if you set Express's session, it will play well with that too. ([https://github.com/jfromaniello/passport.socketio](https://github.com/jfromaniello/passport.socketio))

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-28T15:21:29.140

请参阅此处的文档：

[https://socket.io/docs/migrating-from-0-9/#authentication-differences](https://socket.io/docs/migrating-from-0-9/#authentication-differences)

```
io.set('authorization', function (handshakeData, callback) {
// make sure the handshake data looks good
callback(null, true); // error first, 'authorized' boolean second 
```

});

# php - 编码 $_GET 变量 URL 会忽略与号“&”字符

> ID：11698324
> 
> 赞同：3
> 
> 时间：2012-07-28T04:37:38.937
> 
> 标签：php, url, get

所以我试图从地址栏中获取一个如下所示的 url：

```
http://mysite.com/url.php?name=http://test.com/format.jsp?id=738ths3&secure=false 
```

我正在使用 $_GET 变量从 URL 中读取它，我的代码如下

```
$arc = rawurlencode($_GET['name']);
echo "URL: $arc"; 
```

这只会返回

```
URL: http://imgur.com/format.jsp?id=738ths3 
```

它缺少 &secure=false

我希望它看起来是什么：

```
 URL: http://test.com/format.jsp?id=738ths3&secure=false 
```

我尝试了 urlencode，rawurlencode 无济于事，我在 google 中查看了许多论坛和 stackoverflow 没有答案帮助，有什么想法吗？谢谢！

urlencode 显示了这一点：

网址：http%3A%2F%2Ftest.com

所以我也不能吃！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T04:40:29.850

您需要`urlencode()`在构建 URL 之前，即：

```
$url = "http://mysite.com/url.php?name=".urlencode('http://test.com/format.jsp?id=738ths3&secure=false'); 
```

这样，您将能够`name`从`$_GET['name']`.

### 解释：

在构造 URL 时没有`urlencode()`它，PHP 会将 is 视为 2 个单独的参数，由 分隔`&`：

1.  `$_GET['name']`
    适合你的`http://imgur.com/format.jsp?id=738ths3`情况

2.  `$_GET['secure']`
    适合你的`false`情况

### 或者：

根据您的评论，您似乎无法控制 URL 构造。您可以使用以下`$_GET`方法在单个字符串中获取完整信息[`http_build_query`](http://php.net/manual/en/function.http-build-query.php)：

```
$name = http_build_query($_GET); 
```

然后您将获得：

```
echo $name; // name=http://test.com/format.jsp?id=738ths3&secure=false

// which you would then may want to strip away the first 'name='
$name = substr($name, strlen('name='));

echo $name; // to obtain http://test.com/format.jsp?id=738ths3&secure=false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:44:23.893

原始 URL`http://mysite.com/url.php?name=http://test.com/format.jsp?id=738ths3&secure=false`包含两个查询字符串参数：`name`和`secure`。查询字符串中的`&`属于*完整*URL，而不是`name`参数中的 URL。

如果您可以控制此值，则在声明链接/URL 时，使用 PHP[`urlencode()`](http://php.net/urlencode)对全名值进行编码，例如：

```
$url = "http://mysite.com/url.php?name=" . urlencode("=http://test.com/format.jsp?id=738ths3&secure=false"); 
```

这将正确编码`name`参数，您`$arc = $_GET['name'];`将按需要工作。

如果您无法控制设置值并且只是解析您收到的内容，您可以在`name=`参数上拆分给定的字符串并假设它是一部分之后的所有其他内容`name`：

```
$splitQuery = split('name=', $_SERVER['REQUEST_URI']);
$arc = $splitQuery[1]; 
```

要解码编码的 URL，在你访问它之后，使用 PHP 的[`urldecode()`](http://php.net/urldecode)：

```
$arc = urldecode($_GET['name']); // assuming you're properly encoding the `name` parameter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:51:17.623

如果您无法对 URL 进行编码，则可以使用以下代码获取当前 URI：

```
$url = $_SERVER["REQUEST_URI"]; 
```

在您的情况下， $url 是：

```
/url.php?name=http://test.com/format.jsp?id=738ths3&secure=false 
```

然后你可以用explode拆分它并验证它并从中获取GET参数。

# cpanel - Cpanel 文件管理器提取按钮禁用

> ID：11698325
> 
> 赞同：0
> 
> 时间：2012-07-28T04:37:46.457
> 
> 标签：cpanel, nsfilemanager

**今天我发现在cpanel文件管理器**中似乎禁用了zip文件的提取。昨天它工作正常，我提取了一个文件。我上传了一个大小为472MB的大文件。但是上传被取消了，从那时起我就面临这个问题。

![在此处输入图像描述](../Images/96452632a5bd56acf93732d4b924a04e.png)

cpanel文件管理器的奇怪行为背后的原因是什么？

这个问题的解决方案是什么..？

我真的希望启用提取按钮，因为使用 Filezilla 在服务器上上传非常耗时..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:11:51.493

默认情况下，如果未选择任何文件，该图标将显示为灰色，请确保不是这种情况。

如果它被选中并且是这样，那么您可能会考虑与您的托管服务提供商联系，如果您是服务器的管理员，那么继续运行

```
/scripts/upcp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T03:38:25.893

您只需要选择需要提取的文件。如果您从目录中选择任何 zip 文件，提取按钮将自动出现。 ![在此处输入图像描述](../Images/10d90a164eaeb995e9ea02463e7048a6.png)

# wpf - 在 Wpf 中关闭另一个窗口

> ID：11698328
> 
> 赞同：7
> 
> 时间：2012-07-28T04:38:44.203
> 
> 标签：wpf, c#-4.0

如果两个窗口主要打开 A 和 B，如何使用编写在窗口 B 上的代码关闭窗口 A。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:55:19.550

您最好的选择是在 Window B 上创建一个属性，您将创建的 Window 传递给该属性。像这样的东西。我有一个名为 MainWindow 的窗口和一个名为 Window2 的第二个窗口。

**主窗口**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        Window2 secondForm;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            secondForm = new Window2();
            secondForm.setCreatingForm =this;
            secondForm.Show();
        }
    }
} 
```

**窗口2**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for Window2.xaml
    /// </summary>
    public partial class Window2 : Window
    {
        Window creatingForm;

        public Window2()
        {
            InitializeComponent();
        }

        public Window setCreatingForm
        {
            get { return creatingForm; }
            set { creatingForm = value; }
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            if (creatingForm != null)
                creatingForm.Close();

        }

    }
} 
```

* * *

针对您的评论，关闭由另一个表单创建的窗口就像调用已创建表单的关闭方法一样简单：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        Window2 secondForm;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            if (secondForm == null)
            {
                secondForm = new Window2();
                secondForm.Show();
            }
            else
                secondForm.Activate();
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            if (secondForm != null)
            {
                secondForm.Close();
                secondForm = new Window2();
                //How ever you are passing information to the secondWindow
                secondForm.Show();
            }

        }
    }
} 
```

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-28T19:09:17.320

这是一种从任何其他窗口关闭任何窗口的方法。您可以修改它以使用多个实例，方法是为您的窗口提供一些唯一标识符，然后在 foreach 循环中搜索它。

```
public static class Helper
{
    public static void CloseWindowOfWhichThereIsOnlyOne<T>()
    {
        Assembly currentAssembly = Assembly.GetExecutingAssembly();
        foreach (Window w in Application.Current.Windows)
        {
            if (w.GetType().Assembly == currentAssembly && w is T)
            {
                w.Close();
                break;
            }
        }
    }
} 
```

或使用唯一标识符“fudge”：

```
 public static void CloseWIndowUsingIdentifier(string windowTag)
    {
        Assembly currentAssembly = Assembly.GetExecutingAssembly();
        foreach (Window w in Application.Current.Windows)
        {
            if (w.GetType().Assembly == currentAssembly && w.Tag.Equals(windowTag))
            {
                w.Close();
                break;
            }
        }
    } 
```

我比建议的解决方案更喜欢这个，因为你不需要弄乱你的窗户，除了给它们独特的标签。我只将它用于不存在不独特风险的小型项目，我不会忘记 10-12 个窗口！

另一个建议的解决方案有点傻（我没有 50 业力来评论它），因为如果你已经引用了该对象，你可以调用 win.close() ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T05:07:49.853

像这样创建一个公共类和方法非常简单

```
class Helper
{
 public static void CloseWindow(Window x)
    {
        Assembly currentAssembly = Assembly.GetExecutingAssembly();
      //  int count = Application.Current.Windows;
        foreach (Window w in Application.Current.Windows)
        {
            //Form f = Application.OpenForms[i];
            if (w.GetType().Assembly == currentAssembly && w==x)
            {
                w.Close();
            }
        }
    }
} 
```

现在从你想像这样关闭窗口的地方调用这个函数。

```
 Helper.CloseWindow(win);//win is object of window which you want to close. 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T11:00:25.117

```
 foreach (Window w in Application.Current.Windows)
        {
            if (w.Name != "Main_Window_wind" )
            {
                w.Visibility = System.Windows.Visibility.Hidden;
            }
        }
//name is the x:Name="Main_Window_wind" in xaml 
```

您现在可以在不关闭命名的 Main_Window_wind 的情况下关闭所有窗口，您可以在以下条件下添加另一个不关闭的窗口： w.Name != "Main_Window_wind" && w.Name != "AnyOther_Window_wind" &&...

更快的方法是：

```
 for (int intCounter = App.Current.Windows.Count - 1; intCounter > -1; intCounter--)
        {

            if (App.Current.Windows[intCounter].Name != "Main_Window_wind")
                App.Current.Windows[intCounter].Visibility = System.Windows.Visibility.Hidden;
        } 
```

# ios - 我可以扩展日历功能吗？

> ID：11698329
> 
> 赞同：-1
> 
> 时间：2012-07-28T04:38:48.550
> 
> 标签：ios, icalendar

嘿伙计们！我是 iOS 开发新手，我想知道是否可以在我的 iOS 应用程序上扩展日历功能。

在我的应用程序中，我将创建一个用户注册功能，创建后，我将显示一个对话框，询问我是否要与这个新用户创建一个事件。

之后，我将与 iCloud 通讯录和日历同步。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:17:45.773

答案是肯定的，这是可能的，尽管您是 iOS 新手，但请提前做一些研究，但简单翻阅文档应该会引导您到 Apple 的“日历和剩余编程指南”。

您可以在 iOS5.1 库、数据管理、日历和提醒编程指南部分找到它。

# python - 引用来自表达式早期部分的匹配项的正则表达式

> ID：11698332
> 
> 赞同：4
> 
> 时间：2012-07-28T04:39:50.657
> 
> 标签：python, regex

我正在寻找一个正则表达式，它将标识一个序列，其中文本中的整数指定表达式末尾的尾随字母的数量。此特定示例适用于识别堆积格式的遗传数据中的插入和删除。

例如：

如果我正在搜索的文本是：

```
AtT+3ACGTTT-1AaTTa 
```

我需要匹配插入和删除，在这种情况下是`+3ACG`and `-1A`。整数 (n) 部分可以是任何大于 1 的整数，我必须捕获 n 个尾随字符。

我可以将单个插入或删除与 匹配`[+-]?[0-9]+[ACGTNacgtn]`，但我不知道如何获取整数指定的尾随 ACGTN 的确切数量。

如果这里有一个明显的答案，我很抱歉，我已经搜索了几个小时。谢谢！

（更新）

我通常使用 Python 工作。我已经能够在 python 中使用 re 模块找到的一种解决方法是调用每个 in/del 的整数和跨度，并将两者结合起来以提取适当长度的文本。

例如：

```
>>> import re
>>> a = 'ATTAA$At^&atAA-1A+1G+4ATCG'
>>> expr = '[+-]?([0-9]+)[ACGTNacgtn]'
>>> ints = re.findall(expr, a) #returns a list of the integers
>>> spans = [i.span() for i in re.finditer(expr,a)]
>>> newspans = [(spans[i][0],spans[i][1]+(int(indel[i])-1)) for i in range(len(spans))]
>>> newspans
>>> [(14, 17), (17, 20), (20, 26)] 
```

由此产生的元组允许我切掉插入缺失。可能不是最好的语法，但它有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:28:12.030

您可以使用正则表达式替换传递函数作为替换......例如

```
s = "abcde+3fghijkl-1mnopqr+12abcdefghijklmnoprstuvwxyz"

import re

def dump(match):
    start, end = match.span()
    print s[start:end + int(s[start+1:end])]

re.sub(r'[-+]\d+', dump, s)

#output
# +3fgh
# -1m
# +12abcdefghijkl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:20:47.227

简单的 Perl 模式匹配一​​个整数，后跟该数字的任意字符：

```
 (\d+)(??{"." x $1}) 
```

这很简单，我想你会同意的。例如，这个片段：

```
my $string = "AtT+3ACGTTT-1AaTTa";

print "Matched $&\n" while $string =~ m{
    ( \d+ )            # capture an integer into $1
    (??{ "." x $1 })   # interpolate that many dots back into pattern
}xg; 
```

愉快地打印出预期的

```
Matched 3ACG
Matched 1A 
```

## 编辑

哦，drat，我看到你刚刚添加了 Python 标签，因为我开始编辑。哎呀。好吧，也许这无论如何都会对你有所帮助。

也就是说，如果您实际寻找的是模糊匹配，您可以在其中允许一定数量的插入和删除（编辑距离），那么 Matthew Barnett 的`regex`Python 库将处理该问题。这似乎不是您正在做的事情，因为插入和删除实际上是在您的字符串中表示的。

但是 Matthew 的库真的很好很有趣，它甚至做了很多 Perl 做不到的事情。:) 它是标准 Python`re`库的直接替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:51:54.123

这不是直接可能的，正则表达式不能像那样“计数”。

但是，如果您使用的编程语言允许将回调作为正则表达式匹配评估器（例如 C#、PHP），那么您可以做的是将正则表达式作为`[+-]?([0-9]+)([ACGTNacgtn]+)`并且在回调中将尾随字符修剪为所需的长度。

例如对于 C#

```
var regexMatches = new List<string>();
Regex theRegex = new Regex(@"[+-]?([0-9]+)([ACGTNacgtn]+)");
text = theRegex.Replace(text, delegate(Match thisMatch)
{

    int numberOfInsertsOrDeletes = Convert.ToInt32(thisMatch.Groups[1].Value);
    string trailingString = thisMatch.Groups[2].Value;
    if (numberOfInsertsOrDeletes > trailingString.Length)
    { trailingString = trailingString.Substring(0, numberOfInsertsOrDeletes); }
    regexMatches.Add(trailingString);

    return thisMatch.Groups[0].Value;
}); 
```

# schema.org - schema.org 和在线词典

> ID：11698336
> 
> 赞同：4
> 
> 时间：2012-07-28T04:40:26.820
> 
> 标签：schema.org

我在使用[schema.org](http://schema.org/)时遇到了麻烦。我正在制作一个类似于[urbandictionary.com](http://www.urbandictionary.com/)的网站。用户是词典的贡献者。此外，该词典可能包含“2012 年伦敦奥运会”、“麻省理工学院宿舍”等短语。随便。所以我想向网站添加架构。应该以模式命名单词/短语和用户的描述？

[http://schema.org/docs/full.html](http://schema.org/docs/full.html)

编辑：示例页面的布局：

**邮箱**

1.  谷歌的电子邮件服务-user63
2.  垃圾邮件预防方面的最佳电子邮件服务 -user21
3.  Gmail 支持 IMAP、POP3、SMTPi OAUTH、FRD、双向安全登录 -userMew

Edit2：另一个示例页面的布局：

**蝙蝠侠 5**

1.  即将上映的蝙蝠侠电影，贾斯汀·比伯将在其中扮演小丑 -user43，2015 年 5 月
2.  开幕是一场灾难。2015 年 12 月，比伯滑到楼梯上，然后被抬到医院 -user22
3.  这部电影是一场灾难，一部质量很差的电影 -userKitten，2016 年 3 月

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:40:52.610

### 一般的

schema.org 上的文档中有一个[入门页面](http://schema.org/docs/gs.html)。当您正在构建字典时，您可能在那里有一个关于电影的条目（他们正在使用的示例）。标记可能如下所示：

```
<div itemscope itemtype ="http://schema.org/Movie">
  <h1 itemprop="name">Avatar</h1>
  <span>Director: <span itemprop="director">James Cameron</span></span>
  <span itemprop="genre">Science fiction</span>
  <a href="../movies/avatar-theatrical-trailer.html" itemprop="trailer">Trailer</a>
</div> 
```

这要求您知道您的数据输入当然是一部电影。如果你不知道，你可以使用 itemtype [`Article`](http://schema.org/Article)（甚至[`Thing`](http://schema.org/Thing)）和全局属性`name`and `description`。

还有关于例如日期的**格式**以及如何使用[标签](http://www.w3.org/TR/2011/WD-html5-20110525/semantics.html#the-meta-element)和设置属性来集成**不可见数据**的附加信息： 。[`meta`](http://www.w3.org/TR/2011/WD-html5-20110525/semantics.html#the-meta-element)`content``<meta itemprop="bestRating" content="5" />`

您始终可以通过指定属性为项目提供多种类型`additionalType`。您甚至可以[扩展模式](http://www.schema.org/docs/extension.html)。但是您应该谨慎使用它们，因为它们不会被搜索引擎识别，但将来可能会被使用：

> 如果模式获得采用并证明对搜索应用程序有用，搜索引擎可能会开始使用这些数据。

一般来说，所有这些标记都是可选的，所以请尽可能多地标记，但只标记那些有意义的部分。从[schema.org 常见问题解答](http://schema.org/docs/faq.html#13)：

> 只标记项目的某些属性很好 - 标记不是一个全有或全无的选择。

### 标记验证

为了**测试您的标记**，Google 提供了[丰富的片段测试工具](http://www.google.com/webmasters/tools/richsnippets)。您可以在那里粘贴您的 HTML，然后查看 Google 从中提取的内容。对于上面的示例，结果如下：

```
Item
    Type: http://schema.org/movie
    name = Avatar
    director = James Cameron
    genre = Science fiction
    trailer
    text = Trailer
    href = http://www.example.com/movies/avatar-theatrical-trailer.html 
```

### 在您的页面上

由于您页面上的信息是用户生成的，您可以让用户从更高级别的 schema.org 类型（[`Movie`](http://schema.org/Movie), [`Place`](http://schema.org/Place)(MIT Dorms), [`SportsEvent`](http://schema.org/SportsEvent)(2012 London Olympics) 等）中选择并回退到[`Thing`](http://schema.org/Thing). 然后获取与这些类型的属性匹配的表单元素中的数据。保存数据并在构建字典页面时对其进行评估。然后由谷歌（和其他人）抓取并用于索引。

对于您提供的 Gmail 示例，标记可能如下所示（将其复制并粘贴到[测试工具](http://www.google.com/webmasters/tools/richsnippets)中，以查看 Google 是否理解嵌套）：

```
<div itemscope itemtype ="http://www.schema.org/SoftwareApplication">
  <h1 itemprop="name">Gmail</h1>
  <div itemprop="comment" itemscope itemtype="http://www.schema.org/Comment">
    <span itemprop="comment">Google's email service</span>
    <span itemprop="author">user63</span>
  </div>
  <div itemprop="comment" itemscope itemtype="http://www.schema.org/Comment">
    <span itemprop="comment">best email service in terms of spam prevention</span>
    <span itemprop="author">user21</span>
  </div>
  <div itemprop="comment" itemscope itemtype="http://www.schema.org/Comment">
    <span itemprop="comment">Gmail has a support of IMAP, POP3, SMTPi OAUTH, FRD, two-way secure login</span>
    <span itemprop="author">userMew</span>
  </div>
</div> 
```

### 附加信息

有关详细信息，请参阅[Google schema.org 常见问题解答](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1211158)。另请参阅[Dublin Core Metadata Initiatice (DCMI)](http://dublincore.org/) ( [Wikipedia](http://en.wikipedia.org/wiki/Dublin_Core) ) 作为对数据进行语义标记的替代方法。他们还有[一个 wiki 页面，用于在 schema.org 和 DC 之间进行映射](http://wiki.dublincore.org/index.php/Schema.org_Alignment)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-29T00:33:49.193

字典现在可以在 schema.org 中以多种方式表示。目前谷歌搜索结果不是基于结构化数据/schema.org，但将来可能会改变。

下面的大多数建议是更具体的[http://schema.org/CreativeWork](http://schema.org/CreativeWork)类型- 这很重要，因为它包含 , 等属性`comment`，`contributor`并且`text`对于用户可编辑的内容和贡献很有用。CreativeWork 还包含`learningResourceType`哪些可以设置为**字典**- 但这不是 schema.org 的建议值，因此搜索引擎可能不知道在哪里查找。

**用于字典的 SEO 和语义 HTML**

使用带有 和 的标签是执行字典术语/定义并被顶级字典网站使用的标准方式，您可以将这些标签与其中的架构一起使用，

```
<div itemscope itemtype="http://schema.org/Collection"><h1 itemprop="name">Dictionary</h1>
 <dl id="gmail" itemscope itemtype="http://schema.org/CreativeWork">
  <dt itemprop="name">Gmail</dt>
   <meta itemprop="sameAs" content="http://gmail.com">
   <meta itemprop="url" content="http://mydictionary.com/page1.html#gmail">
  <dd itemprop="description"><span itemprop="comment">Google's email service</span> -<span itemprop="contributor">user63</span></dd>
 </dl>
</div> 
```

每个术语都有一个单独的页面（或面包屑）似乎是获得高排名的关键。排名中使用了页面名称（包括任何书签），因此如果您搜索“ardvark”，即使两个页面在其他方面相同，URL`http://mydictionary.com/A`也会排名在下方。`http://mydictionary.com/Aardvark`

**解释 3 种合适的模式类型，包括“官方”字典**

方法1)

仅使用（您的术语）和（您的定义）设置的[http://schema.org/Thing](http://schema.org/Thing)或[http://schema.org/Intangible 。](http://schema.org/Intangible)这将是数百个（或更多）独立的，因此您可以将它们分组到一个集合中（这就是 VideoGallery 和 ImageGallery 结构化数据的完成方式）。这样做的好处是它很简单，而且每个都在单独的页面上显示，这应该会增加点击率。 `name``description``http://schema.org/Collective`

方法2)

架构将 Dictionary 的值识别为 Dictionary 的唯一方法是使用`http://schema.org/publicationType`- 它可以是[此处列出](http://www.nlm.nih.gov/mesh/pubtypes.html)的任何值- 其中之一是**Dictionary**。另一个是**术语**。

问题是目前`publicationType`只能在内部使用`http://schema.org/MedicalScholarlyArticle`- 但提出请求，这可能会扩展，例如扩展到其他`ScholarlyArticle`s 或 CreativeWork（它是 MedicalScholarlyArticle 的父级）。MedicalScholarlyArticle 是一种 CreativeWork - 如上所述。如果使用 MedicalScholarlyArticle，您可以在其中嵌套项目，每个术语一个，可能使用[http://schema.org/Thing](http://schema.org/Thing)或[http://schema.org/Intangible](http://schema.org/Intangible)（设置`name`和`description`，`sameAs`可用于指向维基百科或城市词典标识该术语的条目，或社交媒体）。

[您可以在此处](https://github.com/schemaorg/schemaorg/issues?q=is%3Aissue+is%3Aopen+MedicalScholarlyArticle)打开问题以请求将publicationType 添加到所有CreativeWork。

方法3)

字典是一本书（无论是离线还是在线），因此`http://schema.org/Book`通过嵌套在其中使用和添加每个术语。Book 是[http://schema.org/CreativeWork](http://schema.org/CreativeWork)的一种类型，在方法 1 中，您可以使用 Thing、Intangible 设置条款，甚至可以将每个条款变成它自己的 CreativeWork（只需检查一下，因为 google 可能想要每个图片作为它适用于每篇学术文章）。

# python - 将整数乘以分数和小数时 Python 程序出错

> ID：11698341
> 
> 赞同：1
> 
> 时间：2012-07-28T04:41:09.840
> 
> 标签：python, math, equation

我试图编写一个简短的程序来计算著名的 Drake 方程。我让它接受整数输入、十进制输入和小数输入。但是，当程序尝试将它们相乘时出现此错误（在我输入所有必要的值后立即发生错误）：

```
Traceback (most recent call last)
  File "C:/Users/Family/Desktop/Programming/Python Files/1/DrakeEquation1.py", line 24, in <module>
    calc() #cal calc to execute it
  File "C:/Users/Family/Desktop/Programming/Python Files/1/DrakeEquation1.py", line 17, in calc
    calc = r*fp*ne*fl*fi*fc*l
TypeError: can't multiply sequence by non-int of type 'str' 
```

我的代码如下：

```
def intro():
    print('This program will evaluate the Drake equation with your values')

def calc():
    print('What is the average rate of star formation in the galaxy?')
    r = input()
    print('What fraction the stars have planets?')
    fp = input()
    ne = int(input('What is the average number of life supporting planets (per     star)?'))
    print('What fraction of these panets actually develop life')
    fl = input()
    print('What fraction of them will develop intelligent life')
    fi = input()
    print('What fraction of these civilizations have developed detectable technology?')
    fc = input()
    l = int(input('How long will these civilizations release detectable signals?'))
    calc = r*fp*ne*fl*fi*fc*l

    print('My estimate of the number of detectable civilizations is ' + calc + ' .')

if __name__=="__main__":
    intro() #cal intro to execute it 
    calc() #cal calc to execute it 
```

为了解决这个问题，我需要改变什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:44:33.100

您需要将输入值转换为浮点数。

```
r = float(input()) 
```

（注意：在小于 3 的 Python 版本中，使用`raw_input`代替`input`.）

其他变量依此类推。否则，您会尝试将字符串乘以字符串。

编辑：正如其他人指出的那样，`calc`也不能使用`+`运算符将​​其连接到周围的字符串。为此使用字符串替换：

```
print('My estimate of the number of detectable civilizations is %s.' % calc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:56:03.233

与断言问题在于没有将输出`input`转换为正确类型的答案相反。真正的问题是

1.  未正确验证程序的输入，以及
2.  尝试将 str 与此行上的数字连接：

    ```
    print('My estimate of th..." + calc + ' .') 
    ```

给定整数、浮点数和小数值作为输入，您的程序对我来说运行良好。给定`'1'`和`'1'`（引用）作为前两个输入，它会返回您看到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:47:49.703

您已将某些值转换为适合算术的类型，但未将其他值转换为合适的类型。应该传递真实值，`float()`并且应该解析和计算比率（或使用[`Fraction`](http://docs.python.org/library/fractions.html)类型，或强制用户输入真实值）。下面发布了后者的示例：

```
print('What is the average rate of star formation in the galaxy?')
r = float(input())
print('What fraction the stars have planets?')
fp = float(input())
ne = int(input('What is the average number of life supporting planets (per star)?'))
print('What fraction of these panets actually develop life')
fl = float(input()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T04:48:55.990

> 输入（[提示]）-> 值
> 
> 等效于 eval(raw_input(prompt))。

所以，我建议你使用它`raw_input`来避免潜在的错误。

# mysql - MySQL 查询中跳过天数的逻辑

> ID：11698342
> 
> 赞同：1
> 
> 时间：2012-07-28T04:41:12.593
> 
> 标签：mysql, sql, database-design

我有一个网站，人们可以在那里预约医生。在医生预约的前一天，服务台会打电话给病人，以确保他们在预约当天在场。

现在我在 Admin 中制作了一个屏幕，显示明天有预约的人。如果明天是星期六星期六，它应该显示那些在星期一有固定预约的人，因为诊所将在星期日关闭。

我做了一个查询，它带来了明天有约会的人员列表。现在我应该在这个查询中添加什么以便获取星期一的人员列表，以防明天是星期天。

```
创建表 Patient_Appointment_List(
  Patent_Id INT UNSIGNED PRIMARY AUTO_INCREMENT,
  患者姓名 VARCHAR(255)，
  约会_日期 DATE  
);

```

我应该在下面的查询中添加什么以跳过周日并从周一重新开始

```
选择患者姓名
  FROM Patient_Appointment_List
 WHERE 约会日期介于 now() 和 date_add(now(), INTERVAL 1 DAY)  

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:47:46.297

您可以在子句中使用条件`CASE`表达式来检查明天是否是星期日。`WHERE`如果是，则调整条件检查以包括接下来的**两天**，否则，只显示直到明天的约会：

```
SELECT Patient_Name
FROM   Patients_Appointment_List
WHERE 
    CASE WHEN WEEKDAY(CURDATE() + INTERVAL 1 DAY) = 6 THEN 
         appointment_Date BETWEEN NOW() AND NOW() + INTERVAL 2 DAY ELSE
         appointment_Date BETWEEN NOW() AND NOW() + INTERVAL 1 DAY
    END 
```

# java - 应用程序意外停止。请再试一次

> ID：11698343
> 
> 赞同：-2
> 
> 时间：2012-07-28T04:41:15.543
> 
> 标签：java, android

这是我的代码：行号。94 对应于我获取所有 id 的方法。
我总是收到一个错误：您的应用程序已意外停止。

```
package karan.app.caloriecalculator;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.widget.AdapterView;

import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class Main extends Activity implements AdapterView.OnItemSelectedListener {

Button bcal;
TextView intro, choose, duration, min, weight, kg;
EditText dur, weigh;
Spinner sel;
String temp;
public double w, d, calories;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    get_all_ids();
    setArrayAdapter();
    sel.setOnItemSelectedListener(this);

    bcal.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            // TODO Auto-generated method stub
            w = Float.valueOf(weigh.getText().toString());
            d = Float.valueOf(dur.getText().toString());

            if (temp.contentEquals("Aerobics:general")){
                calories = 0.11*w*d;
            }
            else if (temp.contentEquals("Badminton")){
                calories = (w/13)*d;
            }
            else if (temp.contentEquals("Basketball")){
                calories = (w/7.45)*d;
            }
            else if (temp.contentEquals("Bicycling:slow (10-12 mph)")){
                calories = (w/9.65)*d;
            }
            else if (temp.contentEquals("Bicycling:general (12-14 mph)")){
                calories = (w/7.2)*d;
            }
            else if (temp.contentEquals("Bicycling:moderate (14-16 mph)")){
                calories = (w/6)*d;
            }
            else if (temp.contentEquals("Bicycling:fast (16+ mph)")){
                calories = (w/5)*d;
            }
            else if (temp.contentEquals("Bowling")){
                calories = (w/19.1)*d;
            }
            else if (temp.contentEquals("Boxing: punching bag")){
                calories = (w/9.6)*d;
            }
            else if (temp.contentEquals("Boxing: sparring")){
                calories = (w/6.375)*d;
            }

    /*  Thread t = new Thread(){
        public void run(){
        try{
            sleep(1);
        }
        catch (InterruptedException e){
            e.printStackTrace();
        }
        finally{
        Intent openResult = new Intent("karan.app.caloriecalculator.RESULT");
        startActivity(openResult);
        }
        }
        };   // close the thread with a ;

        */
        }});

}

public void get_all_ids() {
    bcal.findViewById(R.id.b1);
    intro.findViewById(R.id.tv1);
    choose.findViewById(R.id.tv2);
    duration.findViewById(R.id.tv3);
    min.findViewById(R.id.tv4);
    weight.findViewById(R.id.tv5);
    kg.findViewById(R.id.tv6);
    dur.findViewById(R.id.et2);
    weigh.findViewById(R.id.et1);
    sel.findViewById(R.id.sp1);

}

public double getCalories() {
    return calories;
}

public void setArrayAdapter(){

    //The createFromResource() method allows you to create an ArrayAdapter from the string array
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.choices, android.R.layout.simple_spinner_dropdown_item);
    //You should then call setDropDownViewResource(int) to specify the layout the adapter should use to display the list of spinner choices
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //Call setAdapter() to apply the adapter to your Spinner.
    sel.setAdapter(adapter);       
}

public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
    // TODO Auto-generated method stub
      Object item = parent.getItemAtPosition(position);
      temp = item.toString();

}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

日志猫：

```
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.os.Looper.loop(Looper.java:123)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-28 14:10:03.545: E/AndroidRuntime(266):  at java.lang.reflect.Method.invokeNative(Native Method)
07-28 14:10:03.545: E/AndroidRuntime(266):  at java.lang.reflect.Method.invoke(Method.java:521)
07-28 14:10:03.545: E/AndroidRuntime(266):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-28 14:10:03.545: E/AndroidRuntime(266):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-28 14:10:03.545: E/AndroidRuntime(266):  at dalvik.system.NativeStart.main(Native Method)
07-28 14:10:03.545: E/AndroidRuntime(266): Caused by: java.lang.NullPointerException
07-28 14:10:03.545: E/AndroidRuntime(266):  at karan.app.caloriecalc.MainActivity.get_all_ids(MainActivity.java:96)
07-28 14:10:03.545: E/AndroidRuntime(266):  at karan.app.caloriecalc.MainActivity.onCreate(MainActivity.java:28)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-28 14:10:03.545: E/AndroidRuntime(266):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-28 14:10:03.545: E/AndroidRuntime(266):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:42:16.140

您在 get_all_ids() 中错误地获取视图。

要获得视图，您必须执行以下操作：

```
TextView intro;
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      intro = (TextView) findViewById(R.id.tv1);
      ....
}
// You can now use intro and methods of TextView class. 
```

我建议您阅读[Android 初学者指南](https://developer.android.com/training/basics/firstapp/index.html)。

# vb.net - 如何在 vb.net 中更改滚动条主题？

> ID：11698344
> 
> 赞同：1
> 
> 时间：2012-07-28T04:41:18.140
> 
> 标签：vb.net, scrollbar

你知道如何改变 vb.net 应用程序中滚动条的样式和主题吗？我需要**更改表单的所有滚动条的**代码或程序。

我一直在网上搜索并找到更改滚动条颜色的程序，但它们主要是为网站设计的，并且是用 CSS 或 JavaScript 代码编写的。如果您有解决方案，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:47:04.480

没有`any`属性或功能可以改变 WinForm 控件的滚动条样式。您应该选择 WPF 而不是 WinForm。

# html - 什么是 magento 虚拟主机？如何在 magento 中上传我的网页？

> ID：11698348
> 
> 赞同：0
> 
> 时间：2012-07-28T04:41:55.083
> 
> 标签：html, css, web-services, magento, web-hosting

在显示他们告诉我将其上传到 magento 网站的页面后，我为我的客户创建了一个网站。他们给出了用户名和密码。我不知道该怎么做。请帮助我。（对不起，如果它离题了）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:52:23.800

他们基本上是在告诉您将设计转换为 magento 主题，以便您能够将其上传到 magento。

1.  [http://turnkeye.com/blog/psd-magento/](http://turnkeye.com/blog/psd-magento/)

2.  [http://www.magentothemedeveloper.com/magento-theme-developer-services/psd-to-magento/](http://www.magentothemedeveloper.com/magento-theme-developer-services/psd-to-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:10:06.590

Magento Go 不允许您上传`HTML`文件，但您可以将 HTML 粘贴到任何使用`WYSIWYG editor`.

# c# - Awesomium 忽略了异步调用

> ID：11698349
> 
> 赞同：0
> 
> 时间：2012-07-28T04:42:10.153
> 
> 标签：c#, javascript, asynchronous, awesomium

在 Awesomium-sharp 中，我编写了这样的 C# 代码：

```
WebControl webControl = new WebControl();
webControl.CreateObject("external");
SetObjectCallback("external", "JSCallback", OnJSCallback);

private int count = 0;

    private void OnJSCallback(object sender, JSCallbackEventArgs e)
    {
        Console.WriteLine("hi");
        MessageBox.Show("hi");

        if (count == 0)
        {
            Thread worker = new Thread(func =>
                {
                    Thread.Sleep(3000);
                    OnReturn();
                });
            worker.Start();
        }
        if (count == 1)
        {
            Thread worker = new Thread(func =>
            {
                Thread.Sleep(5000);
                OnReturn();
            });
            worker.Start();
        }
        count++;
    }

    private void OnReturn()
    {
            webControl.Dispatcher.BeginInvoke((ThreadStart) delegate()
            {
                webControl.CallJavascriptFunction("", "CallFromNative", new JSValue[] {new JSValue("hello")});
            });
    } 
```

和javascript代码是这样的：

```
external.JSCallback("hello ", "world");
external.JSCallback("wtf ", "dude"); 
```

奇怪的问题是，来自 Javascript 的第二次调用似乎被忽视并且从未执行过。我的代码有什么问题？顺便说一句，AwesomiumSharp 的版本是 V1.6.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:55:30.430

对我来说似乎几乎没问题。

我会这样做：

```
 webView.Callback += new EventHandler<CallbackEventArgs>(webView_Callback);

    webView.CreateObject("client");
    webView.SetObjectCallback("client", "message");

    void webView_Callback(object sender, CallbackEventArgs e)
    {
        if (e.CallbackName == "message")
            System.Windows.Forms.MessageBox.Show(e.Args[0].ToString());
    } 
```

它应该可以正常工作。你确定你甚至第二次执行功能吗？警报（“blabla”）；message.client("test", "test2")，看看如果你稍等片刻然后去做会发生什么。

到目前为止，我使用了 Awesomium 回调系统，它运行良好

# git - 如何成功部署带有私有仓库的 Heroku 应用程序？

> ID：11698355
> 
> 赞同：0
> 
> 时间：2012-07-28T04:43:36.970
> 
> 标签：git, heroku

我似乎无法弄清楚这一点。任何想法为什么我可能会收到以下错误？

```
kamilski81:~/Sites/sc:ruby-1.9.3@sc:(master)
$ git push staging master:master
Counting objects: 31, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (16/16), done.
Writing objects: 100% (16/16), 1.89 KiB, done.
Total 16 (delta 9), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.2.0.rc
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       You are trying to install in deployment mode after changing
       your Gemfile. Run `bundle install` elsewhere and add the
       updated Gemfile.lock to version control.
       You have added to the Gemfile:
       * source: https://github.com/sc/SC-Models.git (at master)
       You have deleted from the Gemfile:
       * source: https://git_username:git_password@github.com/sc/SC-Models.git (at master)
       You have changed in the Gemfile:
       * sc_models from `https://github.com/sc/SC-Models.git (at master)` to `no specified source`
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:pi-staging.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:pi-staging.git'
kamilski81:~/Sites/sc:ruby-1.9.3@sc:(master) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:59:09.213

从我所见，您只需要运行 bundle install 并提交到您的分支，然后再次推送。

# mysql - 表中的乘法触发器

> ID：11698362
> 
> 赞同：1
> 
> 时间：2012-07-28T04:45:22.390
> 
> 标签：mysql, triggers

我有一个表 salesOrderItems：

```
soItemID           INT(11)         PK
salesOrderID       INT(11)
productID          INT(11)
cost               DECIMAL(7,2)
qty                TINYINT(2)
extendedCost       DECIMAL(8,2) 
```

通过 PHP，用户会看到一个表单来输入 productID（通过下拉菜单），然后该选择会填充成本字段。用户然后输入数量。 `extendedCost`在表格上不可见。

我想要的是一个触发器，它应该简单地自动计算/插入`extendedCost`（即 - 乘以成本 x 数量）并填充`extendedCost`，但我得到 1064 错误。

这是触发器 - 我到底错过了什么？？？我发誓我已经这样做了 20 次：

```
DELIMITER $$

DROP TRIGGER IF EXISTS EXTENDEDCOST $$

CREATE TRIGGER EXTENDEDCOST AFTER INSERT ON salesOrderItems FOR EACH ROW BEGIN

    UPDATE salesOrderItems
    SET extendedCost = (cost * qty)
    WHERE soItemID = NEW.soItemID;

END $$

DELIMITER ; 
```

结果：

```
ERROR 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-db' at line 1

SQL Statement:

USE <my db/schema>

ERROR: Error when running failback script. Details follow.

ERROR 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-db' at line 1

SQL Statement:

USE <my db/schema> 
```

我确定这很愚蠢，但它让我发疯，我完全被卡住了，需要额外的眼睛......

谢谢各位，提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:17:40.143

既然您试图插入一个计算值，为什么要执行额外的更新而不是*在 INSERT 之前*设置触发时间：

```
CREATE TRIGGER EXTENDEDCOST BEFORE INSERT ON salesOrderItems FOR EACH ROW BEGIN
  SET NEW.extendedCost = NEW.cost * NEW.qty
END $$ 
```

另请参阅此答案[mysql 'after insert' trigger to calculate a field based on other fields](https://stackoverflow.com/questions/6942052/mysql-after-insert-trigger-to-calculate-a-field-based-on-other-fields)。

# c++ - 块长度 - Rijndael 算法

> ID：11698363
> 
> 赞同：0
> 
> 时间：2012-07-28T04:45:34.043
> 
> 标签：c++, encryption

好吧，我从这里下载了 Rijndael 资源：http: [//www.codeproject.com/Articles/1380/AC-Implementation-of-the-Rijndael-Encryption-Decr](http://www.codeproject.com/Articles/1380/A-C-Implementation-of-the-Rijndael-Encryption-Decr)

我有以下代码：

```
int AutoUpdater::GetVersion()
{
std::ifstream file("ver.dat", std::ios::out );
if(file.fail())
    return 0;
file.seekg(0,std::ios::end);
int len = (int)file.tellg();
file.seekg(0,std::ios::beg);

char* line = new char[len];

file.read(line,len);
file.close();

CRijndael crypt;
crypt.MakeKey("MIUJkHyHnjHyGtqO", "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0", 16, 16);

char * decrypted = new char[len];
crypt.Decrypt(line,decrypted,len);

delete[] line;
delete [] decrypted;

return atoi(line);
} 
```

但它给出了这个错误：“数据不是块大小的倍数”

我要加密的文件必须具有固定长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:51:26.280

用尾随零填充它以填充块大小。您还可以考虑为字节长度添加前缀，以恢复原始的确切长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:55:36.917

Rijndael 是一种分组密码。您的输入不需要固定长度，但它确实需要是块大小的倍数（Rijndael 为 16 个字节）。您可以使用许多[填充方法](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)来确保这一点。我喜欢PKCS7，又好又简单。

我感到困惑的是为什么您的输入文件不是块大小的倍数。您无法使用为您提供此类文件的 Rijndael 正确加密数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T04:53:07.330

是的。Rijndael 是一种分组密码。您应该在前面使用长度字段对数据进行编码。解码器可以安全地忽略长度字段之外的位。

# grep - 使用 grep 在搜索词中查找带有重音字符或 ñ 的文件名

> ID：11698367
> 
> 赞同：2
> 
> 时间：2012-07-28T04:46:59.883
> 
> 标签：grep

当我的搜索词包含西班牙语字符（例如重音元音或“ñ”（例如 bebé、caña））时，我尝试使用 (e)grep 列出目录中的文件，但未成功。在重音元音的情况下，如果我使用非重音元音，搜索工作如下：

```
$ ls | egrep 'bebe'
8 bebé
IMQ_bebé1.wav
IMQ_bebé2.wav
IMQ_bebé3.wav
IMQ_bebé4.wav
IMQ_bebé5.wav
IMQ_bebé6.wav 
```

但是，如果我在搜索词中包含重读元音，（例如`$ ls | egrep 'bebé'`）我什么也得不到。

不可能在搜索词中使用非重音元音的原因是因为这是从文本文件中获取搜索词的较大 shell 脚本的一部分。此外，带有“ñ”的搜索词不起作用，也不能仅使用“n”。另外，我相信一定有办法做到这一点！

我正在使用 Mac OS X 10.6.8。我的语言环境如下：

```
$ locale
LANG="en_CA.UTF-8"
LC_COLLATE="en_CA.UTF-8"
LC_CTYPE="en_CA.UTF-8"
LC_MESSAGES="en_CA.UTF-8"
LC_MONETARY="en_CA.UTF-8"
LC_NUMERIC="en_CA.UTF-8"
LC_TIME="en_CA.UTF-8"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:02:13.720

您可以使用 iconv 取消列表的重音并匹配 ascii 模式：

```
ls | iconv -f utf8 -t ascii//TRANSLIT | egrep 'bebe' 
```

# android - Android：小部件 onReceive() 没有被调用

> ID：11698370
> 
> 赞同：3
> 
> 时间：2012-07-28T04:47:38.853
> 
> 标签：android, android-intent, widget, broadcastreceiver

我有一个小部件，其布局有一个 imageView。需要根据某些活动更改视图。因此，每当发生这种情况时，我都会调用 a`sendBroadcast()`并将操作设置为`UPDATE_WIDGET`。但是，`onReceive()`小部件代码中的 没有被调用。下面是我的代码。

```
public class TaskWidget extends AppWidgetProvider {
    ...
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "widget update", 2000).show();
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.searchwidget);
        if (intent.getAction().equals(UPDATE_WIDGET)) {
            views.setImageViewResource(R.id.newImage, R.drawable.Pic1);
        }
        super.onReceive(context, intent);
    }
} 
```

在清单中，

```
<receiver
    android:name="com.rahul.testwidget.TaskWidget"
    android:label="Task Widget" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        <action android:name="com.rahul.UPDATE_WIDGET" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/widget" />
</receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T10:26:22.917

您必须更新您的小部件布局使用此代码之前`super.onReceive(context, intent);`

```
ComponentName widget = new ComponentName(context, SimpleWidget.class);
AppWidgetManager.getInstance(context).updateAppWidget(widget, views); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:19:06.873

我认为您的操作名称必须`com.rahul.UPDATE_WIDGET`代替`UPDATE_WIDGET`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T09:53:22.977

如果您从小部件上的侦听器发送广播，则需要为广播创建 PendingIntent。

```
PendingIntent sentPI = PendingIntent.getBroadcast(activity, 0, intent,PendingIntent.FLAG_CANCEL_CURRENT); 
```

此外，您似乎无法将 2 个待处理的意图附加到小部件中的按钮。

# ruby-on-rails - 具有两次指定资源的命名空间 API

> ID：11698372
> 
> 赞同：0
> 
> 时间：2012-07-28T04:47:48.870
> 
> 标签：ruby-on-rails, controller

我正在尝试在 Rails 中创建命名空间 API，但遇到了问题

```
 # Resources
  resources :users do 
    resources :contacts
  end

  #==========================================>
  #  API namespacing and routing
  #==========================================>

  namespace :api do 
    namespace :v1 do

      # =======================>
      # Resources -> Users
      #   Resources -> Contacts
      # =======================>
      resources :users do
        resources :contacts
      end

      # =======================>
      # Resources -> Messages 
      #   Resources -> Transcriptions
      # =======================>
      resources :messages do
        resources :transcriptions 
      end

    end
  end 
```

我想在“api”命名空间之外（即在常规的 app/controllers/users_controller.rb 区域中）拥有我的资源的 html 响应版本，但我的 json 响应在命名空间内。

但是，当我将我的 url 指向“/api/v1/users.json”链接时，它使用了由外部资源 app/controllers/users_controller 指定的控制器，而不是我放入 app/controllers/api/v1/users_controller 的控制器。

尽管命名空间不同，我是否只允许一个资源引用？

为什么会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:41:14.707

您的路由定义看起来不错。我要检查的第一件事是您的 rails 路由器通过运行生成了哪些路由：

```
$ bundle exec rake routes | grep users 
```

您应该将定义的用户路由映射到他们各自的 URL 结构。如果出现问题，那么您的路线可能没有正确定义。我怀疑你的情况。

另一个可能的问题可能是命名空间用户控制器中的控制器类名称。所以你在 app/controllers/api/v1 下的用户控制器应该是

```
class Api::V1::UsersController < ApplicationController
 ....
end 
```

查看[Rubygems.org 源代码](https://github.com/rubygems/rubygems.org)，它与您尝试实现的结构相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:12:26.110

你的控制器应该看起来像

```
module Api::V1
    class UserController < ActionController::Base
...
    end
end 
```

# algorithm - 太空入侵者碰撞检测。1 子弹检查所有入侵者？

> ID：11698403
> 
> 赞同：1
> 
> 时间：2012-07-28T04:56:12.687
> 
> 标签：algorithm, xna, 2d, collision-detection

我开发了一个可以向其发射子弹的入侵者网格。

我所知道的碰撞检测的唯一解决方案是使用两个`Rectangles`和`Intersects`方法。

现在，我觉得将每个子弹与屏幕上的每个入侵者进行比较是没有效率的。

我可以在这里使用另一种更智能的解决方案，并且只比较一些入侵者。

**我建议**在 X 轴上使用一个标志，在发射时填充子弹的 X 位置。入侵者精灵将有权访问此标志，并且仅当入侵者精灵位于该 X 位置（+/- 几个 px）时才会运行 intersects 方法。这将大大减少比较的次数。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:12:19.653

你是对的，你可以做一些可能更有效的事情。通过将空间划分为粗粒度部分并查看子弹在哪个部分，您可以修剪其他部分的入侵者。你可以更进一步，拥有多层“粗略”或分辨率。

在这个思路的最后是一种称为[四叉树](http://en.wikipedia.org/wiki/Quad_tree)的数据结构。这是在二维中进行碰撞检测的一种自然而有效的方法。

# django - 有没有办法将断点附加到 Django South 迁移？

> ID：11698405
> 
> 赞同：1
> 
> 时间：2012-07-28T04:56:46.230
> 
> 标签：django, django-south, pycharm

我遇到了数据迁移问题，真的希望我可以在问题点放置一个断点并检查对象。有没有办法通过 PyCharm 做到这一点？

如果没有，还有其他方法可以做到这一点吗？

如果不是，调试南迁移的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:39:11.263

是的，你可以在 PyCharm 中做到这一点。您需要[创建](http://www.jetbrains.com/pycharm/webhelp/creating-and-editing-run-debug-configurations.html)Django 服务器[运行配置](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-django-server.html)。

使用您的南迁移命令指定*自定义运行命令*，然后只需按下调试按钮（在您希望调试器停止的位置放置断点之前）。

# ada - Gcc-Ada 配置错误

> ID：11698408
> 
> 赞同：2
> 
> 时间：2012-07-28T04:57:16.197
> 
> 标签：ada

我下载 gcc-ada-4.3.4.tar.gz 时 configure 给出错误 configure: error: cannot find install-sh or install.sh in . ./.. ./..

gcc 版本=4.3.4 使用 fedora16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:35:07.610

在 Fedora 16 上，您可以执行`yum install gcc-gnat`. 这将为您的系统安装适当的 GNAT 版本。

如果你真的想自己构建它，你必须先安装所有依赖项。您可以轻松找到它们。

# c++ - 在融合图中查找元素的索引

> ID：11698413
> 
> 赞同：2
> 
> 时间：2012-07-28T04:59:18.210
> 
> 标签：c++, template-meta-programming, boost-fusion

我正在努力寻找我正在寻找的一小部分功能。

我有一个包含`fusion::map`. 我想使用可变参数构造函数来初始化该映射中的元素。

我希望最简单的方法是`fusion::vector`从构造函数参数构造 a ，然后`for_each`在地图上调用，并将每对的值设置为向量中的相应元素。

但是，为了做到这一点，我需要根据其键类型计算该对的**索引**。( `pair::first_type`)

谁能帮我？

请看下面的示例代码：

```
#include <iostream>
#include <boost/fusion/container.hpp>
#include <boost/fusion/sequence.hpp>
#include <boost/fusion/mpl.hpp>
#include <boost/fusion/include/has_key.hpp>
#include <boost/fusion/include/algorithm.hpp>
#include <boost/mpl/transform.hpp>

namespace fusion = boost::fusion;
namespace mpl    = boost::mpl;

// given a field, returns a fusion pair of <field, field::type>
template<class field>
struct make_pair
{
    typedef typename fusion::result_of::make_pair<field, typename field::type>::type type;
};

// given a sequence of fields, returns a fusion map which maps field -> field::type
template<class... fields>
struct make_map
{
    typedef typename boost::fusion::vector<fields...> vector;
    typedef typename mpl::transform<vector, make_pair<mpl::_1>>::type pair_sequence;
    typedef typename fusion::result_of::as_map<pair_sequence>::type type;
};

// initialise each member of a map with the corresponding element in the vector
template<typename vector>
struct init
{
    init(vector& v) : _v(v) {}

    template <typename pair>
    void operator()(pair const& data) const
    {
       // TODO: use pair::first_type to find the index of this pair in the map, and set 
       // data.second to at_c<index>(_v);
    }
    vector& _v;
};

struct field1 { typedef int type; };
struct field2 { typedef int type; };

struct my_map
{
    template<typename... args>
    my_map(args... a)
    {
        typedef typename boost::fusion::vector<args...> vector;
        vector arg_vec(a...);

        fusion::for_each(_map, init<vector>(arg_vec));
    }
    typedef typename make_map<field1, field2>::type map;
    map _map;
};

struct print
{
    template <typename pair>
    void operator()(pair const& data) const
    {
        std::cout << data.second << " ";
    }
};

int main()
{
    my_map m(1, 2);
    fusion::for_each(m._map, print()); // should print '1 2'
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:02:25.290

回答我自己的问题：

[fusion::copy](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/algorithm/auxiliary/functions/copy.html)是我所需要的：

```
fusion::copy(arg_vec, _map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T02:22:30.727

为我自己的问题添加另一个答案，这次是针对**参数数量小于或等于 map 中元素数量的用**例。

一个可行的解决方案如下：

```
#include <iostream>
#include <boost/fusion/container.hpp>
#include <boost/fusion/sequence.hpp>
#include <boost/fusion/mpl.hpp>
#include <boost/fusion/include/has_key.hpp>
#include <boost/fusion/include/algorithm.hpp>
#include <boost/mpl/transform.hpp>
#include <boost/fusion/include/copy.hpp>
#include <boost/fusion/include/begin.hpp>
#include <boost/fusion/include/next.hpp>
#include <boost/fusion/include/key_of.hpp>
#include <boost/fusion/iterator/key_of.hpp>

namespace fusion = boost::fusion;
namespace mpl    = boost::mpl;

// given a field, returns a fusion pair of <field, field::type>
template<class field>
struct make_pair
{
    typedef typename fusion::result_of::make_pair<field, typename field::type>::type type;
};

// given a sequence of fields, returns a fusion map which maps field -> field::type
template<class... fields>
struct make_map
{
    typedef typename fusion::result_of::as_map<typename mpl::transform<boost::fusion::vector<fields...>, make_pair<mpl::_1>>::type>::type type;
};
//-------------------------------------------------------------------------------------------

// iterate through a fusion map to find the index of a given key
template<typename iter, typename key_type, typename seek_type>
struct key_index
{
    typedef typename fusion::result_of::next<iter>::type        next_iter;
    typedef typename fusion::result_of::key_of<next_iter>::type next_key;

    enum { value = 1 + key_index<next_iter, next_key, seek_type>::value };
};

template<typename iter, typename seek_type>
struct key_index<iter, seek_type, seek_type>
{
    enum { value = 0 };
};
//-------------------------------------------------------------------------------------------

// copy an element from a vector to a map, if the index in the vector exists
template<typename map, typename vector, int index, bool in_vec>
struct do_copy
{
    template<typename T>
    void operator()(const vector& v, const T& dest)
    {
        const_cast<T&>(dest) = fusion::at_c<index>(v);
    }
};

template<typename map, typename vector, int index>
struct do_copy<map, vector, index, false>
{
    template<typename T>
    void operator()(const vector&, const T&)
    { }
};
//-------------------------------------------------------------------------------------------

// initialise a map with the corresponding elements in a vector, vector may be smaller than the map
template<typename vector, typename map>
struct init
{
    init(const vector& v) : _v(v) {}

    template <typename pair> void operator()(const pair& data) const
    {
        typedef typename fusion::result_of::begin<map>::type          begin_iter;
        typedef typename fusion::result_of::key_of<begin_iter>::type  key_type;

        enum { index  = key_index<begin_iter, key_type, typename pair::first_type>::value };
        enum { in_vec = fusion::result_of::size<vector>::type::value > index };

        do_copy<map, vector, index, in_vec>()(_v, data.second);
    }
private:
    const vector& _v;
};
//-------------------------------------------------------------------------------------------

struct field1 { typedef std::string type; };
struct field2 { typedef int         type; };
struct field3 { typedef double      type; };
struct field4 { typedef std::string type; };
struct field5 { typedef int         type; };
struct field6 { typedef double      type; };

struct my_map
{
    template<typename... args>
    my_map(args... a)
    {
        typedef typename fusion::vector<args...> vector;
        fusion::for_each(_map, init<vector, map>(vector(a...)));
    }
    typedef typename make_map<field1, field2, field3, field4, field5, field6>::type map;
    map _map;
};

struct print
{
    template <typename pair>
    void operator()(pair const& data) const
    {
        std::cout << data.second << " ";
    }
};
//-------------------------------------------------------------------------------------------

int main()
{
    my_map m("hello world", 5, 2.4);
    fusion::for_each(m._map, print());
    std::cout << std::endl;
    return 0;
} 
```

# ajax - 如何使用 jquery 和 php 将 ajax 发布请求从一台服务器传递到另一台服务器？

> ID：11698417
> 
> 赞同：0
> 
> 时间：2012-07-28T04:59:43.223
> 
> 标签：ajax, post

> **可能重复：**
> [将数据从 jQuery 传递到 PHP 以获取 ajax 帖子](https://stackoverflow.com/questions/4210025/pass-data-from-jquery-to-php-for-an-ajax-post)

如何使用ajax，jquery将值从一台服务器传递到另一台服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T05:10:19.117

```
$.ajax({
    url:'/url/on/other_server',
    type: 'POST',
    contentType:"application/x-www-form-urlencoded",
    data: '{"key":"value"}',
    success: function(data, status) {
       console.log(status);
    },
    error: function(xhr, desc, error) {
       console.log(error);
    }
}); 
```

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 用于非竞争锁的同步与 ReentrantLock

> ID：11698418
> 
> 赞同：3
> 
> 时间：2012-07-28T04:59:45.377
> 
> 标签：java, multithreading

ReentrantLock 如何针对单独的非竞争锁获取同步执行？

假设您打算实现一个两个锁类（这意味着您需要 2 个不同的锁并且同步是不够的，就像在 LinkedBlockingQueue 中的那样），其中获取 put 和 take 锁是由说 thread1 和 thread 2（总是）完成的，这意味着锁是无争用的并且线程局部性原则出现了，ReentrantLock 如何针对同步执行（这将需要完全锁定队列）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:02:24.153

大多数情况下 ReentrantLock 在 3 个或更多线程竞争时获胜，但这取决于硬件、操作系统、JVM 版本及其选项。

Martin Thompson 在他的博客中发表了关于 ReentrantLock 与同步块和偏向锁定的发现：

[http://mechanical-sympathy.blogspot.com/2011/11/java-lock-implementations.html](http://mechanical-sympathy.blogspot.com/2011/11/java-lock-implementations.html)

[http://mechanical-sympathy.blogspot.com/2011/11/biased-locking-osr-and-benchmarking-fun.html](http://mechanical-sympathy.blogspot.com/2011/11/biased-locking-osr-and-benchmarking-fun.html)

# objective-c - 计算器中的负号无法消失

> ID：11698423
> 
> 赞同：0
> 
> 时间：2012-07-28T05:00:26.613
> 
> 标签：objective-c, ios5

我正在开发一个包含以下代码的 iOS 5 计算器：

```
- (IBAction)digitPressed:(UIButton *)sender 
{

//Enter digit, avoiding two-decimal-point case.
NSString *digit = sender.currentTitle;
NSRange range = [self.display.text rangeOfString:@"."];
if (range.location==NSNotFound || (![digit isEqualToString:@"."]))
    if (self.userIsEnteringNumber)
    {
        self.display.text = [self.display.text stringByAppendingString:digit];
    }
    else 
    {
        if (![sender.currentTitle isEqualToString:@"."])
        {
            self.display.text = digit;
        }
        else 
        {
            self.display.text = @"0.";
        }
        self.userIsEnteringNumber = YES;
    }
} 
```

和

```
- (IBAction)changeSignPressed 
{

//Reverse sign from positive to negative or vice versa.
if (self.numberIsNegative) self.numberIsNegative = NO;
if (!(self.numberIsNegative)) self.numberIsNegative = YES;

//Correct display to reflect change in sign.
if (self.numberIsNegative)
{
    if (![[self.display.text substringToIndex:1] isEqualToString:@"-"])
    {
        self.display.text = [@"-" stringByAppendingString:self.display.text];
    }
}
if (!self.numberIsNegative)
{ 
     /*This isn't working--why not?
    if ([[self.display.text substringToIndex:1] isEqualToString:@"-"])
    {
        NSLog(@"Okay."); //This doesn't log, so obv. the problem is in the previous line.
        self.display.text = [self.display.text substringFromIndex:1];
    }
     */
}
} 
```

无论我如何摆弄它，我都无法让 changeSignPressed 中的注释掉的代码工作。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:44:50.553

大概是这样的代码：

```
//Reverse sign from positive to negative or vice versa.
if (self.numberIsNegative) self.numberIsNegative = NO;
if (!(self.numberIsNegative)) self.numberIsNegative = YES; 
```

没有`else`，如果`self.numberIsNegative`最初`YES`它会变成`NO`; 然后它会立即`NO`在下面的行中被看到，它被改回`YES`.

无论如何，该代码比它需要的要复杂得多。您可以这样说来反转标志：

```
self.numberIsNegative = ! self.numberIsNegative; 
```

# javascript - Javascript 对象

> ID：11698427
> 
> 赞同：1
> 
> 时间：2012-07-28T05:01:36.413
> 
> 标签：javascript, oop, javascript-objects

我对javascript OOP比较陌生，并且有一个我认为是一个相对基本的问题，但我无法通过搜索网络找到任何帮助。我错过了什么还是我只是以错误的方式解决这个问题？

这是我的示例代码：

```
function Square( setSize, setX, setY ){
  var size = setSize;
  var xPos = setX;
  var yPos = setY;

  this.getCenter = function(){
    return {
      x: xPos + size*0.5,
      y: yPos + size*0.5
    };
  };

  this.moveX = function( magnitude ){

    var currentPosition //=how do I access getCenter() from here?

  };

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T05:03:18.193

您需要使用`this`来引用当前对象；它不像其他语言那样是隐式的，主要是因为该函数只是一个对象，就像其他任何对象一样，它`this`可以绑定到任何值。

```
var currentPosition = this.getCenter(); 
```

# android - 使用数据库中的数据进行比较

> ID：11698428
> 
> 赞同：-1
> 
> 时间：2012-07-28T05:01:35.973
> 
> 标签：android, database

我在数据库中有 2 个表。第一个表是“inc”，第二个表是“rec”。在第一个表中，我有以下字段：

```
id   item  price  qty  total  cat  group  recc  reccid
1    sddf  65      1    65    rer   dfd   true  1

In 2nd table:

id   date        increment    type
1    27/07/2012   6            daily. 
```

所以我想要的是我从table1中检索数据（那没问题）并使用simplecursoradapter在列表视图中显示它。在这个列表视图中我有5个文本视图来显示数据。如果第5个文本视图应该是动态的（即）表 1 中的“recc”为真表示我正在从第二个表中检索数据，并且基于增量我正在做一些计算。但是当我从表 2 中检索数据时，它总是单独获取第一个条目数据。基于表 1它应该从table2中获得增量值的行的长度。请帮助我..提前致谢。

我的代码如下：

```
 Cursor c = db.getExpensetitle(intent.getStringExtra("grpsdbexp"));-------->This is from table1.
            startManagingCursor(c);    

             from = new String[] {db.KEY_DATE,db.KEY_DESC,db.KEY_INCOME,db.KEY_QUANTITY,db.KEY_ROWID};
             to = new int[] {R.id.text1 ,R.id.text3,R.id.text5,R.id.text7,R.id.text11};

                  SimpleCursorAdapter notes =
                          new SimpleCursorAdapter(this, R.layout.columnviewexp, c, from, to)
{
    @Override
  public void bindView(View view, Context context, Cursor cursor)
    {
      String reurrence= cursor.getString(cursor.getColumnIndex("recurrence"));   
      float total=Float.valueOf(cursor.getString(cursor.getColumnIndex("total"))); 
      TextView text1=(TextView)view.findViewById(R.id.text1);
      TextView text3=(TextView)view.findViewById(R.id.text3);
      TextView text5=(TextView)view.findViewById(R.id.text5);
      TextView text7=(TextView)view.findViewById(R.id.text7);
      TextView text9=(TextView)view.findViewById(R.id.text9);
      TextView text11=(TextView)view.findViewById(R.id.text11);

      TextView recccind=(TextView)findViewById(R.id.reccurind);    
      String text=null;      
      String recctotal=null;

      if(reurrence.equals("true"))
      {      
          Cursor c1=db.recctable();
          startManagingCursor(c1); ---------->This is from table 2.
          System.out.println("No="+c1.getString(c1.getColumnIndex("startdate")));
            String  dates=(c1.getString(c1.getColumnIndex("startdate")));
            String  types=(c1.getString(c1.getColumnIndex("recurrencetype")));
            int  recc=Integer.parseInt((c1.getString(c1.getColumnIndex("increment"))));
              c1.moveToNext();    
          SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
          String currentDateandTime = sdf.format(new Date());
          Calendar cal=Calendar.getInstance();

             Date dt=null;
            try 
            {
                dt = sdf.parse(dates);
                cal.setTime(dt);
            } catch (ParseException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }             

            int daysInSameMonth=0;    ------------------>For getting this value only i am doing this..It gives always the first entry count.
            int count[]=new int[c1.getCount()];
            for(int j=1;j<recc;j++)
            {
                 int currentDay= cal.get(Calendar.DAY_OF_MONTH);
                 int lastDay = cal.getActualMaximum(Calendar.DAY_OF_MONTH);     
                 System.out.println("b4 inc");
                 daysInSameMonth++;
                 if(types.equals("Daily"))
                 {                              
                  cal.add(Calendar.DAY_OF_MONTH, 1);    
                  Date dtNew=cal.getTime();
                  cal.setTime(dtNew);                        
                  if(currentDay==lastDay)
                     {  
                      System.out.println("count="+daysInSameMonth);

                       break;
                     }  
//                   System.out.println("days="+daysInSameMonth[i]);

                }
                 else if(types.equals("Weekly"))
                {
                    System.out.println("Inside week");
                    System.out.println("current="+currentDay);
                    System.out.println("last="+lastDay);
                    cal.add(Calendar.DAY_OF_MONTH, 7);
                     if(currentDay<=lastDay)
                     {               
                       break;
                     }  
                }          

            }       
            System.out.println("subbu="+daysInSameMonth);
            System.out.println("totttt="+daysInSameMonth*total);

             recctotal=String.valueOf(daysInSameMonth*total);
             text9.setText(recctotal);

      }

      else
      {       

          text9.setText(cursor.getString(cursor.getColumnIndex(db.KEY_TOTAL)));       
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:32:11.430

您应该使用**for**循环或 while 从表中获取多行数据，如下所示

```
 if(cursor!=null && cursor.getCount()!=0){

  for(cursor.moveToFirst();!cursor.isAfterLast();cursor.moveToNext()){

 // Do here your stuff what you want 

  }
 } 
```

# android - 以编程方式从android检索语音邮件

> ID：11698430
> 
> 赞同：0
> 
> 时间：2012-07-28T05:01:54.273
> 
> 标签：android, voicemail

是否可以以编程方式从 Android 手机中检索语音邮件并转发它们？Android API 是否允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:03:10.383

不可以。大多数语音邮件都是通过拨打号码并输入密码来访问的。您必须通过电话以编程方式完成所有这些操作。

# php - 隐藏 PHP/MySQL 错误信息

> ID：11698434
> 
> 赞同：2
> 
> 时间：2012-07-28T05:02:26.733
> 
> 标签：php, mysql, webserver, x-cart

我有一个基于[X-Cart](http://www.x-cart.com/)的网站。它工作正常。但是，当我转到地址（手动访问链接）时`www.mysite.com/"Xx<XaXaXXaXaX>xX`，我收到以下错误消息：

> **INVALID SQL:** 1064 : 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '",) `' LIMIT 1' at line 1<br /><b><font color="darkred">SQL QUERY FAILURE:</font></b>SELECT xid FROM xcart_session_history WHERE ip = INET_ATON('165.193.42.141') AND host = '&quot;XxxXx';&quot;,)`' LIMIT 1
> **INVALID SQL:** 1064 附近使用的正确语法：您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册';",) `', 'e8bc1df13aab2c25c7560512a5029eb1')' at line 1<br /><b><font color="darkred">SQL QUERY FAILURE:</font></b>REPLACE INTO xcart_session_history (`ip `,`host `,`xid `) VALUES (INET_ATON('165.193.42.141'), '&quot;XxxXx';&quot;,)`', 'e8bc1df13aab2c25c7560512a5029eb1')附近使用的正确语法

我发现这是我系统上的一个漏洞，因为它会显示表名和其他详细信息。

我想阻止 PHP/MYSQL 在屏幕上显示此消息。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T05:06:37.607

`$debug_mode`在 config.php 中设置为 2

[http://help.x-cart.com/index.php?title=X-Cart:Config.php#Correcting_debug_mode](http://help.x-cart.com/index.php?title=X-Cart:Config.php#Correcting_debug_mode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:07:54.227

// 关闭所有错误报告

```
error_reporting(0); 
```

// 报告所有 PHP 错误

```
error_reporting(E_ALL); 
```

// 报告所有 PHP 错误

```
error_reporting(-1); 
```

如果您使用数据库，请使用其中任何一个，然后选择 error_reporting(0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T05:04:12.163

要关闭所有错误报告：

```
error_reporting(0); 
```

您应该将它设置在跨所有页面加载的某个头文件的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T04:19:36.497

`error_reporting(0);`//比修改**config.php**文件**更安全**

# jquery - 更改宽度时的图表不需要的小数

> ID：11698438
> 
> 赞同：4
> 
> 时间：2012-07-28T05:03:22.400
> 
> 标签：jquery, jquery-plugins, charts, flot

我正在使用谷歌浮动图表，它根据用户选择的值显示图表。图表在 x 轴上显示年份，在 y 轴上显示价格。

问题是，如果图形宽度很小，它会正确显示值。例如，如果我将宽度设置为

```
<div id="placeholder" style="width:500px;height:300px"></div> 
```

但是如果图形宽度增加就像

```
<div id="placeholder" style="width:650px;height:300px"></div> 
```

图表在 x 轴上显示不需要的零，例如

```
Insted of  2010  it shows  2010.0
Insted of  2011  it shows  2011.0
Insted of  2012  it shows  2012.0 
```

我只想摆脱这些不需要的零。谷歌根本没有帮助我，我完全不知道这种愚蠢的flot行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T16:56:08.030

我也有这个问题。我可以像这样轻松修复它：

```
xaxis:
{                
    tickDecimals: 0
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:11:30.600

查看[doco](http://people.iola.dk/olau/flot/API.txt)，您可能想尝试为该选项设置`tickDecimals`或设置 a 。`tickFormatter``xaxis`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:49:28.193

你使用的是 0.7 还是 Github 的 master 分支？这听起来像是最近在主分支上修复的错误。

# c - 将 MS word 中的大数据表添加到数组中？

> ID：11698440
> 
> 赞同：-3
> 
> 时间：2012-07-28T05:03:54.333
> 
> 标签：c, arrays

我正在开发一个数据库项目，我想在其中创建一个数组，如下所示：

```
unsigned char* drillSize[][10] = { 
{"0.3678",  "23.222",  "MN", "89000", ".000236", "678", "ZX", "8563", "LX", "0.678"},

{"0.3678",  "23.222",  "MN", "89000", ".000236", "678", "ZX", "8563", "LX", "0.678"},
.
.
.
 //around 6000 rows                              } 
```

我在 Microsoft Word 文件中获得了这些数据。如果我要手动输入数据，可能需要数周时间；有没有办法通过某种方式为每个元素插入逗号和引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:17:47.850

你可以用正则表达式试试。

如果您的数据以 csv 文件之类的任何方式构建，您可以将其以某种方式导入您的程序，然后使用基本的字符串函数对其进行切片。

在php中我会

```
$input = file_get_contents($myfile) //lets say this contains a text: 1,2,3,4,5
$sliced = explode(",",$input);
$myarray = null; //our variable
$output = "\$myarray = new array("; //creating a template for an array as a String
//some logic with the $sliced array if you need
...
$output .= implode(",",$sliced); //we put it back as string
$output .= ");"; //close the array
eval($output); //after this its in php's scope
print_r($myarray); 
```

基本上这就是你需要的更复杂的形式。如果文本不是那么结构化，您可能需要一些 C 的正则表达式库，但我建议在 Python、Perl 或具有更多支持和更灵活的东西中创建文本，然后手动将代码复制回 C。

# javafx-2 - javafx2：CSS 文档

> ID：11698444
> 
> 赞同：2
> 
> 时间：2012-07-28T05:04:55.773
> 
> 标签：javafx-2

阅读有关在 javafx 中使用 css 的博客和文章，我看到了类选择器，例如

```
.table-row-cell:empty {
    -fx-background-color: -fx-base;
}

.table-row-cell:empty .table-cell {
    -fx-border-width: 0px;
} 
```

被使用，并且确实它们在我自己的代码中工作。但是，我找不到任何记录这些内容的地方 - 官方文档似乎没有提及它们： [http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref。 .html](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html) _

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:01:19.007

请参阅此官方教程[Skinning JavaFX Applications with CSS](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm) section **Default Style Sheet**。

> JavaFX 应用程序的默认样式表是 caspian.css，它位于 JavaFX 运行时 JAR 文件 jfxrt.jar 中。此样式表定义了根节点和 UI 控件的样式。...

您可以在提到的 CSS 文件中找到这些选择器。

# python - 覆盖 App Engine 中的数据

> ID：11698446
> 
> 赞同：0
> 
> 时间：2012-07-28T05:05:00.133
> 
> 标签：python, google-app-engine, overwrite

我有一个函数可以从表单中获取图像，并将其与用户名一起放入数据库中。所以，这是我的数据库：

```
class Imagedb(db.Model):
    name = db.StringProperty(required = True)
    image = db.BlobProperty() 
```

这是写入数据库的代码：

```
class Change_Profile_Image(MainHandler):
    def get(self):
        if self.user:
            self.render('change_profile_image.html', username = self.user.name, firstname=self.user.first_name)
        else:
            self.render('change_profile_image.html')

    def post(self):
        imagedb = Imagedb(name = self.user.name)
        imageupl = self.request.get("img")
        imagedb.image = db.Blob(imageupl)
        imagedb.put()
        self.redirect('/profile') 
```

任何人，它都很棒。除了一件事。我想要完成的只是存储一张个人资料图片。最终发生的事情是这样的：

假设我是用户管理员。我会上传一张显示图片，该图片显示在个人资料中。生病上传另一个，那个显示。很酷，除了我的数据库中有 2 个具有 name = admin 属性的对象。我想编辑这个...

```
 def post(self):
        imagedb = Imagedb(name = self.user.name)
        imageupl = self.request.get("img")
        imagedb.image = db.Blob(imageupl)
        imagedb.put()
        self.redirect('/profile') 
```

这样我就可以将图像发布到数据库中，但如果存在，则会被覆盖。有人可以帮我吗？我对 python 和应用程序引擎比较陌生。

如果有不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:59:46.870

您想将 Imagedb 实体的键设置为“名称”。本质上，您不需要名称字段，但您会像这样实例化它

```
imagedb = Imagedb(key_name = self.user.name) 
```

键是所有实体的必填字段。通过使用您的用户名作为键，这意味着每次您引用给定键时，它都是同一个实体。

# java - Json通过多个对象解析

> ID：11698447
> 
> 赞同：0
> 
> 时间：2012-07-28T05:05:23.193
> 
> 标签：java, json, gson

我的文件名中有一个 json：test.json

```
{books:{"name":"XXXXX","isbn":98892}}
{books:{"name":"YYYYY","isbn":64728}}
{books:{"name":"ZZZZZ","isbn":19837}} 
```

这是我的豆类

```
 class Books{
        private String name;
        private int isbn;
//getter and setter methods 
```

我的主要课程

```
Gson gson = new Gson();
    try {
        BufferedReader br= new BufferedReader(new FileReader("C:\\test.json"));

                Books m = gson.fromJson(br, Books.class);

                System.out.printf("%s",m.getName());
                System.out.printf("\t%d",m.getIsbn()); 
```

我只能打印第一行，如果我必须解析其他行，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:54:29.453

正如评论所说，它不是有效的 json 字符串（您可以使用[jsonlint](http://www.jsonlint.com)来验证 json）。

如果 book 元素在每本书后面带有逗号的列表中，那么您应该将其转换为 Books 列表，而不仅仅是使用 books 类。为此，您必须使用[泛型类型 token](https://sites.google.com/site/gson/gson-user-guide/#TOC-Serializing-and-Deserializing-Generic-Types)。

在这种情况下，它看起来有点像这样：

```
Type listOfBooksType = new TypeToken<List<Books>>() {}.getType();
List<Books> books = gson.fromJson(json, listOfBooksType); 
```

（也许您的班级名称应该是 Book 而不是 Books？-因为每个“Books”表示一本书）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:57:01.530

我假设您有以下 json 文本。

```
[
{books:{"name":"XXXXX","isbn":98892}},
{books:{"name":"YYYYY","isbn":64728}},
{books:{"name":"ZZZZZ","isbn":19837}}
] 
```

您需要创建另一个具有*`books`*字段的类，

```
class Book{
  private String name;
  private int isbn; 
  //getter - setter
}
class Books {
    private Book books;
    public Book getBooks() {
        return books;
    }
    public void setBooks(Book books) {
        this.books = books;
    }
} 
```

并解析json：

```
BufferedReader br = new BufferedReader(new FileReader("C:\\test.json"));

List<Books> books= gson.fromJson(br,new com.google
                                           .gson
                                           .reflect
                                           .TypeToken<List<Books>>(){}.getType());
for(Books book:books)
{
 System.out.println(book.getBooks().getIsbn() 
                        + " " + book.getBooks().getName());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T05:58:47.657

test.json 中的 JSON 格式错误。它 gson 不应该能够按原样解析它。名称应为字符串，因此数据应如下所示：

```
{"books":{"name":"XXXXX","isbn":98892}}
{"books":{"name":"YYYYY","isbn":64728}}
{"books":{"name":"ZZZZZ","isbn":19837}} 
```

但无论如何，这是一个奇怪的数据结构。是你自己的格式，还是给你的东西？似乎它可能想要成为一个数组，例如：

```
{"books":[{"name":"XXXXX","isbn":98892},
          {"name":"YYYYY","isbn":64728},
          {"name":"ZZZZZ","isbn":19837}]} 
```

如果是这样，您可以使用 Gson 解析整个文件，给定您的`Books`类，如下所示：

```
Books booksArray[];
booksArray = Gson.fromGson(br, Books[].class); 
```

否则，给定问题中的数据结构-假设`books`引用了属性名称-您需要考虑对象的附加级别，例如：

```
class BooksWrapper
{
    private Books books;

    public Books getBooks()
    {
       return books;
    }
} 
```

您可以遍历您的行`BufferedReader`并收集所有对象，如下所示：

```
ArrayList<Books> books = new ArrayList<Books>();
BufferedReader br = new BufferedReader(new FileReader("test.json"));
String line;

BooksWrapper wrapper;

while ((line = br.readLine()) != null)
{
   wrapper = gson.fromJson(line, BooksWrapper.class);
   books.add(wrapper.getBooks());
}

for (Books book : books)
{
   System.out.print(book.getName());
   System.out.println("\t" + book.getIsbn());
} 
```

# jquery - 我可以同时对多个元素类型使用 jQuery find() 吗？

> ID：11698448
> 
> 赞同：63
> 
> 时间：2012-07-28T05:06:10.697
> 
> 标签：jquery

我正在使用以下函数来更改表单列中的填充：

```
function padTitles() {
    $('#option-grid #dataTable tr, #topic-grid #dataTable tr')
        .each(function () {
            var tds = $(this).find('input'),
        text = tds.filter('[id^="input_TempRowKey_"]').val(),
        tdToPad = tds.filter('[id^="input_Title_"]'),
        pad;
            if (/\.0$/.test(text)) {
                pad = 10;
                level = 1;
            } else {
                pad = 35;
                level = 2;
            }
            tdToPad.css('margin-left', pad);
            a = tdToPad.closest('tr');
            if (tdToPad.closest('tr').get().className) {
                tdToPad.closest('tr').get().className = tdToPad.closest('tr').get().className.replace(/\blevel\-.*?\b/g, 'level-' + level);
            } else {
                tdToPad.closest('tr').addClass('level-' + level)
            }
        });
} 
```

它适用于这种形式的 HTML：

```
<td id="title_1" class=" ">
   <input type="text" value="Tests" name="item.Title" id="input_Title_1" >
</td> 
```

现在我也希望它适用于以下 HTML：

```
<td id="title_1" class=" ">    
  <textarea name="item.Title" id="input_Title_1">Tests</textarea>
</td> 
```

有没有办法可以更改此功能，使其适用于 an`input`或`textarea`？我认为这样做的方法是进行更改，`var tds = $(this).find('input'),`但是我不确定如何更改它，或者即使可以更改为“查找”文本区域或输入。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-07-28T05:07:17.410

使用逗号合并多个查询：

```
var tds = $(this).find('input, textarea'); 
```

您也可以`:input`用作选择器，但效率不高，并且可能还包含一些您不想包含的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T05:11:01.130

您可以使用它`.children()`来选择`td`s 孩子

```
var tds = $(this).children(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T05:16:04.183

您不能添加与另一个元素`textarea`相同的 a。`id`它不正确。`id`值对于文档中的单个 html 元素是唯一的。

我会建议你`class`。

```
<input type="text" value="Tests" class="myclass" name="item.Title" id="input_Title_1" >

<textarea name="item.Title" class="myclass" id="input_Title_2">Tests</textarea>

var tds = $(this).find('.myclass') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-13T19:01:03.560

```
jQuery( "selector1, selector2, selectorN" ) 
```

selector1：任何有效的选择器。selector2：另一个有效的选择器。selectorN：尽可能多的有效选择器。返回对象中的 DOM 元素的顺序`jQuery`可能不相同，因为它们将按文档顺序排列。 **示例**：查找与这三个选择器中的任何一个匹配的元素。

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>multiple demo</title>
  <style>
  div, span, p {
    width: 126px;
    height: 60px;
    float: left;
    padding: 3px;
    margin: 2px;
    background-color: #eee;
    font-size: 14px;
  }
  </style>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>

<div>div</div>
<p class="myClass">p class="myClass"</p>
<p class="notMyClass">p class="notMyClass"</p>
<span>span</span>

<script>
$( "div, span, p.myClass" ).css( "border", "3px solid red" );
</script>

</body>
</html> 
```

[阅读更多](https://api.jquery.com/multiple-selector/)

# logging - 如何将 log4net SmtpAppender 配置为仅在达到某个级别时向我发送电子邮件？

> ID：11698452
> 
> 赞同：5
> 
> 时间：2012-07-28T05:06:51.273
> 
> 标签：logging, log4j, log4net

我正在尝试配置 log4net SmtpAppender，以便仅在达到某个日志级别时才收到电子邮件，但包括**所有**级别的最后 10 行。这是我的配置：

```
<appender name="EmailAppender" type="SmtpSubjectLayoutAppender">

  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
  </evaluator>

  <bufferSize value="10" />
  <lossy value="false" />

  ...
</appender> 
```

我正在使用以下代码进行练习：

```
for (var i = 1; i <= 30; i++)
{
    logger.Info("This is just a test message " + i);
}

logger.Error("Error message"); 
```

问题是我最终收到了 3 封电子邮件，其中 2 封包含所有`INFO`日志记录，另外一封包含在以下内容之前发生的最后几行`ERROR`：

```
[2012-07-27 18:59:55.657][INFO ][Chase][tid=14972] This is just a test message 23
[2012-07-27 18:59:55.659][INFO ][Chase][tid=14972] This is just a test message 24
[2012-07-27 18:59:55.661][INFO ][Chase][tid=14972] This is just a test message 25
[2012-07-27 18:59:55.662][INFO ][Chase][tid=14972] This is just a test message 26
[2012-07-27 18:59:55.664][INFO ][Chase][tid=14972] This is just a test message 27
[2012-07-27 18:59:55.666][INFO ][Chase][tid=14972] This is just a test message 28
[2012-07-27 18:59:55.667][INFO ][Chase][tid=14972] This is just a test message 29
[2012-07-27 18:59:55.670][INFO ][Chase][tid=14972] This is just a test message 30
[2012-07-27 18:59:55.671][ERROR][Chase][tid=14972] Error message 
```

如何配置附加程序，以便在发生 WARN 或更高时收到一封包含最后 10 行的电子邮件，否则忽略缓冲区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:00:07.200

您需要将有损值设置为 true：

```
<lossy value="true" /> 
```

在您的配置中，log4net 不仅在记录错误时写入缓冲区，而且在缓冲区已满时写入缓冲区。有损标志告诉 log4net 在必要时丢弃消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-06T07:16:10.683

采用

```
<threshold value="WARN"/> 
```

这

```
<evaluator type="log4net.Core.LevelEvaluator">
   <threshold value="WARN"/>
</evaluator> 
```

似乎不再起作用（log4net 版本 1.2.13.0）...

使用

```
<lossy value="true" /> 
```

当一个人确实想收到消息时，这并不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:14:41.410

我会试试这个：

[如何在 log4net 中过滤自定义级别？](https://stackoverflow.com/questions/538095/how-do-i-filter-on-a-custom-level-in-log4net)

在其他“场景”中，过滤对我来说效果很好。

# ios5 - performSegueWithIdentifier 导致导航加载不正确

> ID：11698457
> 
> 赞同：1
> 
> 时间：2012-07-28T05:08:00.280
> 
> 标签：ios5, uinavigationcontroller, uistoryboardsegue

我有两个导航控制器层次结构的视图部分，一个显示项目列表，第二个允许您编辑项目或添加新项目。

在父视图上，导航栏右侧有一个添加按钮，一旦按下，就会执行身份为“AddChild”的segue。此外，当用户点击表格项目时，我会执行另一个身份为“EditChild”的转场，所有这些都设置在情节提要中。

如果用户到达父视图（带有项目列表）但尚不存在项目，我想以编程方式执行“AddChild”segue，因此我在父视图控制器的 viewWillAppear: 中添加了以下代码。

```
// if there are no children, send user to add screen
if (self.childListData.count == 0) {
        [self performSegueWithIdentifier:@"AddChild" sender:self];
} 
```

子视图控制器加载正常，但导航项仍然是 previos 视图（后退按钮和添加按钮，而不是后退按钮和保存按钮）。

这是我的 prepareForSegue: 方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    //  Get a reference to our detail view
    ChildDetailTableViewController *childDetail = (ChildDetailTableViewController *)[segue destinationViewController];

    //  Pass the managed object context to the destination view controller
    childDetail.managedObjectContext = managedObjectContext;

    //  If we are editing a child we need to pass some stuff, so check the segue title first

    if ([[segue identifier] isEqualToString:@"EditChild"])
    {
        //  Get the row we selected to view
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];

        //  Pass the child object from the table that we want to view
        childDetail.currentChild = [childListData objectAtIndex:selectedIndex];
    }
} 
```

我不确定我错过了什么，所以如果有人可以提供帮助，我将不胜感激。

# php - 为什么我无法使用 siwapp 发票软件发送电子邮件？

> ID：11698462
> 
> 赞同：0
> 
> 时间：2012-07-28T05:09:28.063
> 
> 标签：php, fsockopen, mailer

我已经安装了一个 siwapp 发票软件。它安装成功，但是当我尝试使用定期配置文件甚至向我的客户发送发票时，出现错误：

```
Warning: fsockopen() [function.fsockopen]: unable to connect to localhost:25 (Connection refused) in /home/olepress/public_html/my/lib/vendor/symfony/lib/vendor/swiftmailer/classes/Swift/Transport/StreamBuffer.php on line 233

Warning: Cannot modify header information - headers already sent by (output started at /home/olepress/public_html/my/lib/vendor/symfony/lib/vendor/swiftmailer/classes/Swift/Transport/StreamBuffer.php:233) in /home/olepress/public_html/my/lib/vendor/symfony/lib/response/sfWebResponse.class.php on line 336

Warning: Cannot modify header information - headers already sent by (output started at /home/olepress/public_html/my/lib/vendor/symfony/lib/vendor/swiftmailer/classes/Swift/Transport/StreamBuffer.php:233) in /home/olepress/public_html/my/lib/vendor/symfony/lib/response/sfWebResponse.class.php on line 357

Warning: Cannot modify header information - headers already sent by (output started at /home/olepress/public_html/my/lib/vendor/symfony/lib/vendor/swiftmailer/classes/Swift/Transport/StreamBuffer.php:233) in /home/olepress/public_html/my/lib/vendor/symfony/lib/response/sfWebResponse.class.php on line 357 
```

我试图搜索它，有很多与我的问题相似的问题，但我不太确定我们是否使用相同的软件。试图播放这个软件的源文件，我发现这个配置文件包含：

```
test:
  storage:
    class: sfSessionTestStorage
    param:
      session_path: %SF_TEST_CACHE_DIR%/sessions

  response:
    class: sfWebResponse
    param:
      send_http_headers: false

  mailer:
    param:
      delivery_strategy: none

all:
  routing:
    class: sfPatternRouting
    param:
      generate_shortest_url:            true
      extra_parameters_as_query_string: true
  user:
    class: SiwappUser
    param:
      timeout:         1800
      logging:         %SF_LOGGING_ENABLED%
      use_flash:       true
      default_culture: %SF_DEFAULT_CULTURE%

#all:
#  controller:
#    class: sfFrontWebController
#
#  request:
#    class: sfWebRequest
#    param:
#      logging:           %SF_LOGGING_ENABLED%
#      path_info_array:   SERVER
#      path_info_key:     PATH_INFO
#      relative_url_root: ~
#      formats:
#        txt:  text/plain
#        js:   [application/javascript, application/x-javascript, text/javascript]
#        css:  text/css
#        json: [application/json, application/x-json]
#        xml:  [text/xml, application/xml, application/x-xml]
#        rdf:  application/rdf+xml
#        atom: application/atom+xml
#
#  response:
#    class: sfWebResponse
#    param:
#      logging:           %SF_LOGGING_ENABLED%
#      charset:           %SF_CHARSET%
#      send_http_headers: true
#
#  user:
#    class: myUser
#    param:
#      timeout:         1800
#      logging:         %SF_LOGGING_ENABLED%
#      use_flash:       true
#      default_culture: %SF_DEFAULT_CULTURE%
#
#  storage:
#    class: sfSessionStorage
#    param:
#      session_name: symfony
#
#  view_cache:
#    class: sfFileCache
#    param:
#      automatic_cleaning_factor: 0
#      cache_dir:                 %SF_TEMPLATE_CACHE_DIR%
#      lifetime:                  86400
#      prefix:                    %SF_APP_DIR%/template
#
#  i18n:
#    class: sfI18N
#    param:
#      source:               XLIFF
#      debug:                false
#      untranslated_prefix:  "[T]"
#      untranslated_suffix:  "[/T]"
#      cache:
#        class: sfFileCache
#        param:
#          automatic_cleaning_factor: 0
#          cache_dir:                 %SF_I18N_CACHE_DIR%
#          lifetime:                  31556926
#          prefix:                    %SF_APP_DIR%/i18n
#
#  routing:
#    class: sfPatternRouting
#    param:
#      load_configuration:               true
#      suffix:                           ''
#      default_module:                   default
#      default_action:                   index
#      debug:                            %SF_DEBUG%
#      logging:                          %SF_LOGGING_ENABLED%
#      generate_shortest_url:            false
#      extra_parameters_as_query_string: false
#      cache:
#        class: sfFileCache
#        param:
#          automatic_cleaning_factor: 0
#          cache_dir:                 %SF_CONFIG_CACHE_DIR%/routing
#          lifetime:                  31556926
#          prefix:                    %SF_APP_DIR%/routing
#
#  logger:
#    class: sfAggregateLogger
#    param:
#      level: debug
#      loggers:
#        sf_web_debug:
#          class: sfWebDebugLogger
#          param:
#            level: debug
#            condition:       %SF_WEB_DEBUG%
#            xdebug_logging:  true
#            web_debug_class: sfWebDebug
#        sf_file_debug:
#          class: sfFileLogger
#          param:
#            level: debug
#            file: %SF_LOG_DIR%/%SF_APP%_%SF_ENVIRONMENT%.log 
```

我在这里错过了什么吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T14:18:28.353

我知道这个线程很旧，但我终于找到了解决这个非常严重的错误的方法。

siwapp 的安装说明有点……有点小，很难找到完整的画面。我同时整理了这些笔记

将 factory.yml 文件复制到您的配置文件夹

`cp <siwapp_root>/apps/siwapp/config/factories.yml <siwapp_root>/config/factories.yml`

因此修改您的产品部分

```
prod:
  ...

  mailer:
    param:
      delivery_strategy: realtime
      transport:
        param:
          host: smtp.gmail.com
          port: 465
          encryption: ssl
          username: your_email_address@gmail.com
          password: your_password 
```

替换地址和密码的值。

清空 /cache/* 处的缓存（但不要删除目录本身！）以删除旧配置。我之前遇到过这个问题，所以最好建议你备份缓存目录......

`tar -czf siwappcachebkp.tgz <siwapp_root>/cache/*`

如果由于某种原因重建缓存失败，要手动配置电子邮件，您需要专门修改此文件：

`<siwapp_root>/cache/siwapp/prod/config/config_factories.yml.php`

在文件末尾，您会发现硬编码为映射的邮件连接详细信息；输入正确的值，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:21:57.500

检查该应用程序的配置：您必须配置要使用的邮件服务器（smtp 服务器）。给它使用其他软件时发送邮件的服务器的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T05:33:15.190

如果您使用的是 linux，请尝试在服务器上安装 sendmail，（debian/ubuntu `sudo apt-get install sendmail`，（rhat/centos `yum install sendmail`）。

如果您有外部 SMTP 服务器（如 Gmail）或您的 ISP 的凭据，您应该能够在找到的配置文件中指定主机详细信息和凭据，请参阅[在 siwapp 中发送邮件的](http://dev.siwapp.org/projects/siwapp/wiki/changeSmtpSettings)文档。

您可以使用具有类似于以下配置的 SMTP：

```
prod:
  ...
  mailer:
    param:
      delivery_strategy: realtime
      transport:
        param:
          host: smtp.gmail.com
          port: 465
          encryption: ssl
          username: your_gmail_username@gmail.com
          password: your_gmail_password 
```

要使用 PHP sendmail，请使用如下配置：

```
prod:
...
  mailer:
    param:
      delivery_strategy: realtime
      transport:
        class: Swift_MailTransport 
```

要编辑的配置文件是`siwapp/config/factories.yml`

希望有帮助。

# excel - 如何用 DATE() 连接字符串？

> ID：11698467
> 
> 赞同：12
> 
> 时间：2012-07-28T05:10:56.590
> 
> 标签：excel

在 Excel 中，我试图让一个单元格看起来像：

`by no later than August 27, 2012`

当我尝试将字符串与 a 连接时`DATE`，例如：

`="by no later than " & DATE(YEAR(TODAY()),MONTH(TODAY()),DAY(TODAY()))`

我得到这样的输出：

`by no later than 41118`

如何获得显示日期而不是整数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T05:14:48.970

`DATE`构建日期时间戳。您需要将其转换为字符串。请参阅此问题以了解如何执行此操作：

*   [Excel 日期到字符串的转换](https://stackoverflow.com/questions/2636157/excel-date-to-string-conversion)

它看起来像这样：

```
=TEXT(DATE(YEAR(TODAY()),MONTH(TODAY()),DAY(TODAY())), "DD/MM/YYYY hh:mm:ss") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T11:23:56.777

对于今天的日期，您根本不需要 DATE 函数，您可以只使用

`="by no later than "&TEXT(TODAY(),"mmmm d, yyyy")`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-03-21T07:37:42.720

如果您将包含您的数字的单元格格式化`(41118)`为`Date`，您将得到准确的 27.8.2012。简单的！

# visual-studio-2008 - 将 VB 6.0 ActiveX 控件迁移到 MFC ActiveX 控件

> ID：11698469
> 
> 赞同：2
> 
> 时间：2012-07-28T05:11:03.923
> 
> 标签：visual-studio-2008, mfc, activex

我在 VB 6.0 中创建了 ActiveX 控件。我计划将 VB 6.0 控件迁移到 MFC 控件。我不太清楚如何做到这一点。我在互联网上搜索没有一步一步来做到这一点。有没有办法将实现从 VB 6.0 转换为 MFC？或使用 Visual Studio 2008 在 MFC 中创建新 ActiveX 控件的任何步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:53:58.617

您问这个问题已经晚了 14 年，时间对 ActiveX 控件并不友好。可以肯定的是，您在谷歌搜索时会遇到麻烦。尽管如此，它在 MSDN 库中仍然有很好的记录，一步一步的教程[从这里开始](http://msdn.microsoft.com/en-us/library/k194shk8%28v=vs.90%29.aspx)。请记住，VB6 没有“迁移”，它需要完全重写。

# c# - C# 中的装箱和拆箱

> ID：11698472
> 
> 赞同：3
> 
> 时间：2012-07-28T05:11:40.990
> 
> 标签：c#, heap-memory, boxing

在 C# 中，根据文档，“装箱值类型将其封装在 Object 引用类型的实例中。这允许将值类型存储在垃圾收集堆上。”

如果 ~~没有“垃圾收集堆”会发生什么？~~垃圾收集堆已完全分配并且没有可用的“垃圾收集堆”内存？它会抛出异常或分配到其他地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T06:14:46.590

这是一个像任何其他的对象分配。如果没有可用内存并且无法通过垃圾收集获得可用内存，您将获得一个[`OutOfMemoryException`](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx).

你可以想到这段代码：

```
int x = 10;
object o = x; 
```

就像：

```
int x = 10;
object o = new Int32_Wrapper(x); 
```

`Int32_Wrapper`“boxed int”类在哪里。（您不能在 C# 中显式执行此操作，但这是基本效果。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:54:41.450

它更像是垃圾收集器的堆。也就是说，存储在该内存空间中的对象由 GC“检查”。但是，它最为人所知的是只有堆，因为在当前的 CLR 实现中没有其他堆 =)

——安德烈·卡里尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:18:22.930

当垃圾收集堆完全分配后，将触发 GC 以释放内存，可以将更多内存（来自 OS 管理的 VM）添加到托管堆，直到没有可用内存为止，此时将抛出内存不足异常。

# python - 带有烧杯会话中间件和检查登录的瓶钩

> ID：11698473
> 
> 赞同：3
> 
> 时间：2012-07-28T05:12:03.407
> 
> 标签：python, bottle

我正在用烧杯会话中间件编写一个瓶子应用程序。

我的代码是这样的：

```
@bottle.route('/')
def slash():

  try:
    beaker_session = request.environ['beaker.session']
  except:
    #redirect('/login')
    abort(401, "Failed beaker_session in slash")

  try:
    name = beaker_session['name']
  except:
    redirect('/login') 
```

对于除 /login 之外的每个路由请求。我知道有一个瓶子挂钩系统可以在请求之前做一些事情，但我不确定如何最好地使用它来检查是否有人登录。

我对使用瓶子的 python webapps 相当陌生。没有多少人将它与烧杯会话中间件一起使用，所以我没有很多示例可供参考。

感谢您的任何帮助或指点！

PS。整个代码都在这个仓库中：[https ://github.com/curtisgithub/labinski/blob/master/labinski.py](https://github.com/curtisgithub/labinski/blob/master/labinski.py)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T04:38:43.553

> 我知道有一个瓶子挂钩系统可以在请求之前做一些事情，但我不确定如何最好地使用它来检查是否有人登录。

您可以使用钩子在每个请求之前运行代码，但仅当您希望*所有访问*`before_request`都经过身份验证时，此处检查身份验证才有意义。你可以这样做：

 *```
@bottle.hook('before_request')
def setup_request():
    try:
        beaker_session = request.environ['beaker.session']
    except:
        #redirect('/login')
        abort(401, "Failed beaker_session in slash")

    try:
        name = beaker_session['name']
    except:
        redirect('/login') 
```

...但是如果没有一些额外的代码，当有人实际请求时，这将导致重定向循环`/login`。所以你可以将它添加到钩子中，也许：

```
if request.urlparts.path == '/login':
    continue 
```

另一个解决方案是使用 Python 装饰器实现类似的功能，它允许您逐个方法控制访问。例如，您可以这样说：

```
@route('/')
@authenticated
def index():
    return 'This is /.'

@route('/login')
def login():
    return 'This is login.' 
```

然后你的`authenticated`装饰器看起来很像钩子：

```
def authenticated(func):
    def wrapped(*args, **kwargs):
        try:
            beaker_session = request.environ['beaker.session']
        except:
            abort(401, "Failed beaker_session in slash")

        try:
            name = beaker_session['name']
            return func(*args, **kwargs)
        except:
            redirect('/login')

    return wrapped 
```*

# c - 在 C 中包含一个外部库

> ID：11698478
> 
> 赞同：7
> 
> 时间：2012-07-28T05:13:25.950
> 
> 标签：c, cs50

我正在尝试将 C 库用于哈佛的开放课件课程。[可以在此处](https://manual.cs50.net/CS50_Library#Installation)找到教师关于设置外部库的说明。

我正在遵循特定于 ubuntu 的说明，因为我试图在我的 ubuntu 机器上使用这个库。我按照页面上的说明进行设置，但是当我`helloWorld.c`使用 cs50 库函数运行一个简单的程序时，gcc 不想一起玩。

例子：

**你好世界.c**

```
#include <stdio.h>
#include <cs50.h>

int
main(void){
        printf("What do you want to say to the world?\n");
        string message = GetString();
        printf("%s!\n\n", message);
} 
```

`$ gcc helloWorld.c`

```
/tmp/ccYilBgA.o: In function `main':
helloWorld.c:(.text+0x16): undefined reference to `GetString'
collect2: ld returned 1 exit status 
```

我按照说明中的说明按照信函的说明进行操作，但它们对我不起作用。我正在运行 ubuntu 12.04。如果我能进一步澄清我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-28T05:19:59.510

首先，作为初学者，您应该始终要求 GCC 在启用所有警告和调试信息的情况下进行编译，即`gcc -Wall -g`. 但有时阅读[*如何调用`gcc`*](https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html)。使用好的[源代码编辑器](https://en.wikipedia.org/wiki/Source_code_editor)（如[GNU emacs](https://www.gnu.org/software/emacs/)或[vim](https://vim.org/)或[gedit](https://gedit.org/)等）来编辑你的 C 源代码，但能够在命令行上编译你的程序（所以不要总是使用复杂的[IDE](https://en.wikipedia.org/wiki/Integrated_development_environment)隐藏来自您*的重要*编译细节）。

然后你可能会错过一些哈佛特定的图书馆，一些选项，比如`-L`后跟图书馆目录，然后`-l`粘在图书馆名称上。所以您可能需要`gcc -Wall -g -lcs50`（用`cs50`适当的名称替换）并且您可能需要一些`-L`*目录*

请注意，程序参数的顺序`gcc`很重要。作为一般规则，如果`a`取决于`b`你应该放在`a`前面`b`；更具体地说，我建议

1.  `gcc`以程序名开头；添加*C*标准级别，例如`-std=c99`，如果需要
2.  放置编译器警告、调试（或优化）选项，例如`-Wall -g`（您甚至可能想要添加`-Wextra`以获得更多警告）。
3.  放置预处理器的定义和包含目录，例如`-DONE=1`和`-Imy-include-dir/`
4.  把你的*C*源文件`hello.c`
5.  放置您要链接的任何目标文件，即`bar.o`
6.  `-Lmy-lib-dir/`如果相关，请放置库目录
7.  Pur 库名称`-laa`和`-lbb`（当`libaa.so`依赖时`libbb.so`，按该顺序）
8.  `-o your-program-name`以给出生成的二进制文件的名称结尾。不要使用默认名称`a.out`

目录提供选项`-I`（用于预处理器包含）和`-L`库可以多次提供，顺序很重要（搜索顺序）。

很快你就会想要使用像[GNU这样的](https://www.gnu.org/software/make/)[构建自动化](https://en.wikipedia.org/wiki/Build_automation)工具（也许在 Linux的[帮助下）](http://bashdb.sourceforge.net/remake/)[`make`](https://www.gnu.org/software/make/)[`remake`](http://bashdb.sourceforge.net/remake/)

还要学习[使用调试器`gdb`](https://sourceware.org/gdb/current/onlinedocs/gdb/)。

养成始终向编译器请求警告的习惯，并始终改进您的程序，直到您没有收到任何警告：编译器是您的朋友，它正在帮助您！

另请阅读[*如何调试小程序*](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/)和著名的[SICP](https://mitpress.mit.edu/sicp/)（它教授了非常重要的概念；您可能希望在阅读时[在 Linux上](http://starynkevitch.net/Basile/guile-tutorial-1.html)[使用，请参阅`guile`](http://starynkevitch.net/Basile/guile-tutorial-1.html)[http://norvig.com/21-days.html](http://norvig.com/21-days.html)了解更多信息）。还要注意像[valgrind这样的工具](https://valgrind.org/)

玩得开心。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-18T13:05:21.613

我参加这门课程，有时我需要在旅行或通勤时离线练习。在 Windows 下使用 MinGW 和 Notepad++ 作为 IDE（因为我喜欢它并且通常在编写 python 时使用它）我终于找到了一个解决方案，并有时间把它写下来。

**从头开始。设置gcc C编译器的步骤，如果已经设置请跳到5**

1.  [下载 Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git#_installing_on_windows)并安装。它包括 Git Bash，它是 MINGW64 linux 终端。我更喜欢使用 Git，因为我需要在我的 Windows 上使用 sed、awk、pull、push 等 linux 工具，并且可以替换 Guthub 的终端。
2.  安装 Git 后，请确保已安装 gcc 包。你可以参考我的配置...[![MinGW 安装管理器 - gcc](../Images/486972ae5d1f342f58a36b58e843881f.png)](https://i.stack.imgur.com/uzGHW.png)
3.  确保您的编译器工作正常。抛出这个简单的代码，

    *   通过将其保存在您的工作目录*Documents/Harvard_CS50/Week2/* **hello.c**

    > ```
    > #include <stdio.h>
    > 
    > int main(void)
    > {
    >  printf("Hello StackOverflow\n");
    > } 
    > ```

    *   启动*Git Bash* -> 导航到工作目录

    > cd 文件/Harvard_CS50/Week2/

    *   在 bash 终端中编译它

    > gcc helloworld.c -o helloworld.exe

    *   使用 bash 终端执行它

    > ./helloworld.exe
    > 
    > 你好 StackOverflow

    4.  如果您看到**Hello StackOverflow**，说明您的编译器工作正常，您可以编写 C 代码。

**现在到了重要的一点，在本地安装 CS50 库并离线使用它。这应该适用于本课程后面介绍的任何其他库。**

5.  [从https://github.com/cs50/libcs](https://github.com/cs50/libcs50/tree/develop/src) ​​50/tree/develop/src下载最新的源代码文件 cs50.c 和头文件 cs50.h并保存在*Documents/Harvard_CS50/src*

6.  导航到 src 目录并列出文件以确保您在正确的位置使用

    > ls
    > 
    > cs50.c cs50.h

7.  酷，我们来了。现在我们需要使用编译库的目标文件

    > gcc -c -ggdb -std=c99 cs50.c -o cs50.o

8.  现在使用生成的 cs50.o 目标文件，我们可以创建 cs50 库存档文件。

    > ar rcs libcs​​50.a cs50.o

9.  在所有这些步骤之后，我们以原始文件的 2 个附加文件结束。我们只对其中 2 个感兴趣**cs50.h libcs** **​​50.a**

    > ls
    > 
    > cs50.c cs50.h cs50.o libcs​​50.a

10.  将库和头文件复制到它们的目标位置。我的 MinGW 安装在 C:\ 所以我将它们复制到那里

    **cs50.h --> C:\MinGW\include**

    **libcs​​50.a --> C:\MinGW\lib**

**测试 cs50 库**

为了确保我们的库正常工作，我们可以在讲座中抛出一个示例脚本，看看我们是否可以使用 get_string() 方法的 cs50.h 头文件来编译它。

```
#include <stdio.h>
#include <cs50.h>

int main(void) 
{
    printf("Please input a string to count how long it is: ");
    string s = get_string();
    int n = 0;
    while (s[n] != '\0')
        {
            n++;
        }
    printf("Your string is %i chars long\n", n); 
} 
```

11.  使用 gcc 和 cs50 库编译 cs50 代码。我想明确并使用：

    > gcc -ggdb -std=c99 -Wall -Werror test.c -lcs50 -o test.exe

    但是你可以简单地指向源、输出文件名和cs50库

    > gcc test.c -o test.exe -lcs50

在这里，程序是使用头文件编译的，并且可以在其中使用方法。

[如果您希望 Notepad++ 作为 IDE，您可以按照此提示将其设置为 gcc 作为编译器并从那里运行您的代码](https://stackoverflow.com/questions/27980134/how-to-compile-execute-c-code-from-within-notepad/45659235#45659235)。只需确保您的 nppexec 脚本包含 cs50 库

```
npp_save
gcc -ggdb -std=c99 -Wall -Werror "$(FULL_CURRENT_PATH)" -lcs50 -o "$(CURRENT_DIRECTORY)\$(NAME_PART).exe"
cmd /c "$(CURRENT_DIRECTORY)\$(NAME_PART).exe" 
```

[![在 Notepad++ 中运行 CS50 代码](../Images/31a77af5be57469d27c0918ceb295cfc.png)](https://i.stack.imgur.com/pIAiL.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T05:19:03.300

您需要在编译期间链接库。如果您在 Ubuntu 上，该库应以 .a 或 .so 结尾。要链接到库：

```
gcc -o myProgram myProgram.c -l(library name goes here but no parentheses) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T05:20:32.130

您必须链接到库，GCC 怎么会知道您要使用哪个库？

```
gcc helloWorld.c -lcs50 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-26T13:49:02.403

1.  [从http://mirror.cs50.net/library50/c/library50-c-5.zip](http://mirror.cs50.net/library50/c/library50-c-5.zip)下载 cs50
2.  提取它。（您将获得两个文件 cs50.c 和 cs50.h）
3.  现在将这两个文件复制到您的默认库文件夹。（其中包括您的 stdio.h 文件）
4.  现在在编写程序时使用：#include < cs50.c >
5.  您还可以将文件复制到包含 helloWorld.c 文件的文件夹中。
6.  你必须使用：#include "cs50.c"。

或 ================================================== =====================>

1.  在文本编辑器中打开 cs50.c 和 cs50.h 文件。
2.  在 cs50.h 中，在 #include < stdlib.h > 正下方添加 #include < stdio.h > 和 #include < string.h > 都在新行上。
3.  现在打开 cs50.c 文件，复制所有内容（来自：/**从标准输入读取一行文本并返回等效的 {from line 47 to last}）并将其粘贴到 cs50.h 中 #endif 上方并保存文件。
4.  现在您可以将文件 cs50.h 复制到默认库文件夹或当前工作文件夹。
5.  如果您将文件复制到默认文件夹，则使用：#include < cs50.h >，如果您将文件复制到当前工作文件夹，则使用：#include "cs50.h"。

如果您需要帮助，可以通过 faizan4427@gmail.com 向我提问，如果可行，请投票。

祝一切顺利！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-09T21:12:48.987

研究来源：

*   基于 Basile Starynkevitch 和 Gunay Anach 给出的上述答案
*   结合 youtube 上一些视频的说明^([1](https://www.youtube.com/watch?v=t5TfYRRHG04 "Embeddedarmdev：创建和链接静态库") [2](https://www.youtube.com/watch?v=Sy9rGuvfmO0 "Ashley Mills：C - 第 18 部分 - Libs"))

方法：

*   涵盖最少要做的事情，并分别分享“规范”
*   避免对系统上其他任何地方进行任何修改
*   包括使用的命令的基本分解
*   不包括所有细节，仅涵盖任务绝对要求或有效传达指令的要求。将其他平凡的细节留给读者
*   假设编译器、环境变量等其他东西已经设置好，并且熟悉 shell 的文件导航命令

我的环境：

*   编译器：`gcc`通过 msys2
*   外壳：`bash`通过 msys2
*   IDE：这里没关系

计划：

1.  获取源文件
2.  构建所需的文件：（`*.o`对象）和`*.a`（存档）
3.  告诉编译器使用它

行动：

0.  假设，当前目录 = "desktop/cs50"
    它包含`*.c`我将为作业/问题集/练习等创建的所有文件，例如 test- file.c。

1.  在这种特殊情况下获取`*.h`和`*.c`文件源： [https ://github.com/cs50/libcs​​50/tree/main/src](https://github.com/cs50/libcs50/tree/main/src)

    1.  分别浏览每个文件
    2.  复制它的所有内容
        使用单个文件的[“复制原始内容”图标说](https://i.stack.imgur.com/TleCg.png)
    3.  在计算机本地创建相应的文件在一个
        单独的文件夹中执行它只是为了保持干净，比如说在“desktop/cs50/src”aka`./src`
2.  Build the required files using in the terminal after changing your current directory to "desktop/cs50/src" :

    1.  `gcc -c cs50.c` to create the "cs50.o" object file from "cs50.c" using "gcc"
    2.  `ar cr libcs50.a cs50.o` to create "libcs50.a" archive file which'll be containing "cs50.o" object file

    *   Here, "libcs50" = "lib" prefix + "cs50" name (same as the header file's name)
    *   This is the norm/standard way where the prefix "lib" is significant as well for a later step
    *   However, prefix can be skipped, and it's not compulsory for name to match the header file's name either. Though, Skipping prefix is not recommended. And I can't say for sure about the name part
3.  为了告诉编译器能够使用这个基础结构，在转到父目录（即“desktop/cs50”）后，命令将采用以下语法：

    *   `gcc test-file.c -Isrc -Lsrc -lcs50`如果您在上面的步骤 2.2 中使用了“lib”前缀
    *   在这里，`-I`标志用于指定`*.h`包含在你的 test_file.c 中的头文件的目录
    *   和`-L`flag 用于指定要用于的目录`-l`
    *   并且`-l`是`*.a`文件的名称。这里前面讲过“lib”前缀，没有提到“.a”扩展名
    *   这些标志的顺序很重要，将`-I -L -l`标志保留在“test-file.c”之后

还有一些注意事项：

*   不要忘记使用额外的通用标志（如上面建议的错误等）
*   如果你跳过了“lib”前缀，那么你就不能使用`-L -l`标志
    ，所以命令的语法将变为：`gcc test-file.c -Isrc src/libcs50.a`
*   假设我在“desktop/cs50/psets”中创建了我的`test-file.c`文件，因此，可以通过 2 种值得注意的方式处理它（当前目录 =“desktop/cs50/”）：
    *   `cd psets`然后在 中相应地改变相对地址`-I -L`，所以结果：
        `gcc test-file.c -I../src -L../src -lcs50`
    *   保持当前目录不变，然后相应地改变文件的相对地址，所以结果：
        `gcc psests/test-file.c -Isrc -Lsrc -lcs50`
    *   或使用绝对地址
*   可以看出这会变得很长，那就是构建自动化工具（例如`make`启动）的时候（尽管我正在使用 shell 脚本来完成）

# jquery - 如何使用 jquery 获取内容和容器标签

> ID：11698480
> 
> 赞同：3
> 
> 时间：2012-07-28T05:13:35.940
> 
> 标签：jquery

我正在使用 jquery 来获取一行

```
<tr class="phoneNumber">
   ABC...
</tr> 
```

当我执行 $(".phoneNumber").html() 时，它返回`ABC...`
Is there a way to get

```
<tr class="phoneNumber">
   ABC...
</tr> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:16:00.780

```
(function($) {
  $.fn.outerHTML = function() {
    return $(this).clone().wrap('<div></div>').parent().html();
  }
})(jQuery);

$('.phoneNumber').outerHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:16:13.613

使用`outerHTML`：

```
$('.phoneNumber')[0].outerHTML 
```

[或者，如果兼容性对您很重要，请使用Get selected element's external HTML](https://stackoverflow.com/q/2419749/707111)中列出的扩展之一。

# c++ - 用于将 cython 中的许多 c++ 类包装到单个共享对象的项目结构

> ID：11698482
> 
> 赞同：22
> 
> 时间：2012-07-28T05:13:55.713
> 
> 标签：c++, python, design-patterns, cython

我在[这里找到了文档、邮件列表和这个问题](https://stackoverflow.com/questions/10300660/cython-and-distutils)之间的部分答案，但我想得到一个更直接的答案来解决我的具体问题......

我正在通过尝试一点一点地包装我已经在使用的库的小部分来学习 cython，该库目前包装在 boost::python 中。我为这个 boost 包装器贡献了一点点，并将它用作 c++ 参考，同时我使用[ZeroMQ Python 绑定](https://github.com/zeromq/pyzmq/tree/master/zmq/core)作为 cython 参考。

我的问题是关于项目结构的。这个 lib 的当前 boost 版本编译为单个`.so`，这就是我的目标。我很快发现你不能直接将多个`.pyx`模块编译成一个`.so`. 然后我开始沿着`cppclass`在文件中定义 's的路线`pxd`，以及它们相应的 python 导出的实现类 in `.pxi`，并试图将它们包含到单个文件`pyx`中以进行编译。`pxi`虽然它一开始是有效的，但当我再写一点时，由于包含在不同的地方，我遇到了多个定义冲突的问题。

我很想听到解决以下问题和目标的适当组织方法：

*   将公共类命名为与`cppclass`（我现在通过将 cppclass 命名为不同的名称`pyd`并使用导入的命名空间来处理相似的名称来执行此操作，ala[使用 cimport 来解决命名冲突](http://docs.cython.org/src/userguide/sharing_declarations.html#using-cimport-to-resolve-naming-conflicts)）
*   单一`.so`作为编译输出（[可接受的方法？](https://stackoverflow.com/questions/10300660/cython-and-distutils)）
*   我是否将`pyx`多包含方法`pyx`单独用于主要内容，或者该主要内容是否应该`pyx`包含除包含包含之外的任何其他内容？
*   在哪里集中定义将在 python 中导出的常量？
*   有首选的文件夹结构吗？现在，`src`我的`setup.py`. 看到这么多`pxi, pxd, pyx`文件会让人感到困惑。
*   `pxi`现在完全没有必要了吗？如果没有，我是否需要使用 cython 样式的 ifndef 保护来处理不同模块之间的多个包含？
*   我知道 ZeroMQ python 绑定构建多个模块并通过将它们包含在`__init__.py`. 这真的是 cython 的正确方法吗？

作为参考，我正在练习重新包装的项目是[PyOpenNI](https://github.com/justinfx/PyOpenNI) (openni)。这个 boost 项目采用的模式是将公共对象收集到一个位置，然后与源定义一个 1 对 1 的标头定义，然后有一个巨大的包装器将所有定义收集到一个位置。以及添加的自定义异常处理和实用程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T22:15:33.307

在等待一个明确的答案时，我一直在组织我的代码。到目前为止，将`pyx`文件包含在单个文件`pyx`中进行编译一直在工作。

我`setup.py`的很简单，例如：

```
ext_modules = [
    Extension(
        "openni", 
        ["src/openni.pyx"], 
        language="c++",
        include_dirs=['src/', '/usr/include/ni'],
        libraries=['OpenNI'],
    )
], 
```

主要`openni.pyx`看起来像：

```
include "constants.pyx"
include "exceptions.pyx"
include "context.pyx"
... 
```

我有一个共同点`libopenni.pxd`，可以为其余模块提供仅声明的外部。

我将`cppclass`声明命名为与类定义不同`pxd`的名称`pyx`以避免名称冲突：

*xncontext.pxd*

```
cdef extern from "XnCppWrapper.h" namespace "xn":
    cdef cppclass Context:
           ... 
```

*上下文.pyx：*

```
from libopenni cimport *
from xncontext cimport Context as c_Context 

cdef class Context:
    cdef c_Context *handle   
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T17:06:18.350

回答*是否有首选的文件夹结构？*

`.pyx`是的，Cython和文件的首选文件夹结构是`.pxd`像对待文件一样对待它们`.py`：每个模块一个，采用组织良好的包结构。`__init__.pxd`可以像提供文件一样提供`__init__.py`文件来组装一组精选符号，以从其子模块/包中收集一组精选符号以进行 cimporting。

没错，这会`.so`为每个模块生成一个文件，但这些文件隐藏在构建目录中。Python 的构建模块也是如此。每一个都有一个对应的`.so`文件。这是一个问题吗？

# c# - C# ListView 显示

> ID：11698485
> 
> 赞同：4
> 
> 时间：2012-07-28T05:14:24.123
> 
> 标签：c#

伙计们，我是在 c# 中实现 ListView 的初学者。我在 c#.net 中遇到了这些代码的问题。而且我无法弄清楚输出显示的控件中发生了什么。似乎我忘记了在 ListView 控件的属性中赋予值的内容。

第二列值必须出现在第一列。

![在此处输入图像描述](../Images/2185dd34f10119c0e54cd92b3471ba7c.png)

这是我的代码：

```
using System;
using System.Collections.Generic;   
using System.ComponentModel;
using System.Data;                  
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;        
using System.Data.OleDb;            
namespace Database2
{
    public partial class Form1 : Form
    {
        OleDbConnection con;
        OleDbDataAdapter adapter;
        DataTable table;

        string conString = "Provider = Microsoft.Jet.OLEDB.4.0.; Data Source=DatabaseTest.mdb";
        string sqlQuery = "SELECT * FROM Person";

        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e){
            con = new OleDbConnection(conString);
            adapter = new OleDbDataAdapter(sqlQuery,conString);
            table = new DataTable();

            InitializeList();

            adapter.Fill(table);

            for (int i = 0; i < table.Columns.Count; i++)
                lstDisplay.Columns.Add(table.Columns[i].ColumnName.ToString(), lstDisplay.Width / 6-1);

            for (int i = 0; i < table.Rows.Count; i++) { 
                ListViewItem row = new ListViewItem();
               for (int j = 0; j < table.Columns.Count; j++)
                    row.SubItems.Add(table.Rows[i][j].ToString());
               lstDisplay.Items.Add(row);
            }
        }

        private void InitializeList() {
            lstDisplay.GridLines = true;
            lstDisplay.AllowColumnReorder = true;
            lstDisplay.LabelEdit = true;
            lstDisplay.FullRowSelect = true;
            lstDisplay.Sorting = SortOrder.Ascending;
            lstDisplay.View = View.Details;
        }
    }
} 
```

是否有我忘记给出值的 listView 属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T05:20:43.823

`ListViewItem`本身代表第一列。后续列由`ListViewSubItem`s 表示。

前任：

```
for (int i = 0; i < table.Rows.Count; i++)
{ 
   ListViewItem row = new ListViewItem(table.Rows[i][0].ToString());
   for (int j = 1; j < table.Columns.Count; j++)
      row.SubItems.Add(table.Rows[i][j].ToString());
   lstDisplay.Items.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:28:45.983

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.listviewsubitem.aspx)：

> ListView 控件显示由 ListViewItem 类定义的项目列表。每个 ListViewItem 都可以存储由 ListViewItem.ListViewSubItem 类定义的子项对象。

[`ListView.Items`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx)代表第一列并[`ListViewItem.SubItems`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.subitems.aspx)代表每行的子项。所以你的代码应该是这样的：

```
for (int i = 0; i < table.Rows.Count; i++)
{ 
   ListViewItem row = new ListViewItem(table.Rows[i][0].ToString());
   for (int j = 1; j < table.Columns.Count; j++)
   {
      row.SubItems.Add(table.Rows[i][j].ToString());
   }
   lstDisplay.Items.Add(row);
} 
```

# java - 无法使用@MapsId 和@Id 进行查询，但只能使用@Id

> ID：11698488
> 
> 赞同：6
> 
> 时间：2012-07-28T05:14:38.643
> 
> 标签：java, jpa, jpql

我有 2 个实体，比如 Car 和 Engine（只是示例名称，但逻辑是相同的）。

```
@Entity
public class Car {
    @Id
    private Long id;

    @OneToOne(mappedBy = "car", cascade = Cascade.ALL)
    private Engine engine;
    ...

}

@Entity
public class Engine {
    @Id
    private Long id; // 1

    @MapsId // 2
    @OneToOne
    @JoinColumn(name = "car_id") // join column is optional here
    private Car car;
    ...
} 
```

所以，然后我做：

```
em.save(car); // successfully saved, data is in the database, but (see below)
TypedQuery<Engine> query = em.createQuery("select engine from Engine engine where engine.car = :car", Engine.class)
query.setParameter("car", car);

query.getResultList(); 
```

抛出异常：

```
ERROR [main] (JDBCExceptionReporter.java:234) - No value specified for parameter 1.
 WARN [main] (TestContextManager.java:409) - Caught exception while allowing TestExecutionListener     [org.springframework.test.context.transaction.TransactionalTestExecutionListener@17e5cbd] to process 'after' execution for test: method , exception [org.springframework.orm.jpa.JpaSystemException: org.hibernate.exception.DataException: could not execute query; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.DataException: could not execute query] 
```

但是，如果我将引擎实体更改为在汽车实例本身上只有 @Id（删除 //1 并将 //2 更改为 @Id）它可以工作。

根据 JPA 文档，它应该以相同的方式工作（至少我预期）。

我的环境：PostgreSQL 9、Spring framework 3.1、Hibernate 3.6.8.Final、Tomcat 7（JPA 支持由 Spring 工具添加）。

**更新**：我已经用 EclipseLink 尝试了这两种映射并且它有效。所以问题可能出在Hibernate的某个地方。仍然不知道如何强制它与 Hibernate 一起工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-19T07:34:22.610

我假设您正在使用基于此的 Engine 类中的复合键的 Id。@MapsId 仅在您有 @EmbeddedId 时使用，如下例所示。

> 如果依赖实体使用嵌入的 id 表示其主键，则关系属性对应的嵌入 id 中的属性必须与父实体的主键类型相同，并且必须由应用到的 MapsId 注解指定关系属性。

```
@Embeddable
public class DependentId {
  String name;
  long empPK; // corresponds to PK type of Employee
}
@Entity
public class Dependent {
  @EmbeddedId DependentId id;
...
// id attribute mapped by join column default
  @MapsId("empPK") // maps empPK attribute of embedded id
  @ManyToOne Employee emp;
} 
```

根据您的代码示例。

```
 @Embeddable
    public class NewKey{
      private Long id;
      private Long carId; // corresponds to PK type of Employee
    }

@Entity
public class Car {
    @Id
    private Long id;

    @OneToOne(mappedBy = "car", cascade = Cascade.ALL)
    private Engine engine;
}

@Entity
public class Engine {
    @EmbeddedId NewKey id;

    @MapsId("carId") // 2
    @OneToOne
    @JoinColumn(name = "car_id") // join column is optional here
    private Car car;
    ...
} 
```

假设您尝试使用关系的父键作为新键

> 如果依赖实体只有一个主键属性（即关系属性或关系属性对应的属性）且父实体的主键是简单主键，则依赖实体的主键是简单主键与父实体类型相同的主键（未指定 EmbeddedId 和 IdClass）。在这种情况下，或者 (1) 关系属性被注释为 Id，或者 (2) 指定了单独的 Id 属性并且关系属性被注释为 MapsId（并且未指定 MapsId 注释的 value 元素）。

在这种情况下，您的配置应该可以正常工作，如下所示，这是使用 hibernate 4.3 测试的

![在此处输入图像描述](../Images/8ad41e94f3dd9967433461ef108b1aed.png)

# javascript - javascript函数没有做任何事情

> ID：11698492
> 
> 赞同：0
> 
> 时间：2012-07-28T05:14:56.440
> 
> 标签：javascript

我有以下功能，我想在我的表单中隐藏一些文本输入字段。我想要隐藏的所有字段都包含在 div 'site2'

```
<script language="Javascript">

function showHide(value) {
if (value=='yes') {
        document.getElementById(site2).style.display = "none";
        document.getElementById(site2).style.display = "block";
        document.add.addSite2Line1.disabled=true;
    }
    else if (value=='no') {
        document.getElementById(site2).style.display = "inline";
        document.getElementById(site2).style.display = "none";
    }
}
}
    </script> 
```

并创建了一个下拉框。它应该在选择否时显示

```
<label><span>Single Site?</span><Select name="field" onchange="showHide(this.selectedIndex);"></label>
 <Option value="yes">yes</option>
 <Option value="no">no</option>
 </Select><br /><br /><br /><br /> 
```

但是，当我运行该页面时，什么也没有发生

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T05:20:59.263

您正在传递 selectedIndex，但您正在检查它，就好像它是值一样......试试这个：

```
<Select name="field" onchange="showHide(this.value);"></label> 
```

或者尝试在处理之前从项目中检索值：

```
function showHide(selectedIndex) {
    var value = document.getElementById("field").options[selectedIndex].value;

    if (value=='yes') {
        document.getElementById(site2).style.display = "none";
        document.getElementById(site2).style.display = "block";
        document.add.addSite2Line1.disabled=true;
    }
    else if (value=='no') {
        document.getElementById(site2).style.display = "inline";
        document.getElementById(site2).style.display = "none";
    }
} 
```

Slanec 关于`getElementById(site2)`vs的评论`getElementById("site2")`也是有效的。没有看到页面的其余部分就很难判断，但是如果您没有在 Javascript 中声明名为 site2 的变量，那么您可能会收到其他错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T06:48:01.723

它非常简单，只需要在之前移除额外的大括号

```
function showHide(value) {
if (value=='yes') {
        document.getElementById(site2).style.display = "none";
        document.getElementById(site2).style.display = "block";
        document.add.addSite2Line1.disabled=true;
    }
    else if (value=='no') {
        document.getElementById(site2).style.display = "inline";
        document.getElementById(site2).style.display = "none";
    }
} 
```

# javascript - 单击导航按钮时如何水平滚动网页？

> ID：11698493
> 
> 赞同：0
> 
> 时间：2012-07-28T05:15:01.623
> 
> 标签：javascript

我最近几天一直在寻找一个简单的 javascript 或 jquery 代码。我想在单击导航按钮时合并水平滚动，页面内容应该从左到右移动。

它的功能与此处显示的滚动非常相似：

[http://codecanyon.net/item/fss-full-screen-sliding-website-plugin/full_screen_preview/159103](http://codecanyon.net/item/fss-full-screen-sliding-website-plugin/full_screen_preview/159103)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:24:41.123

尝试 scrollLeft 和/或 scrollTop 方法：

[https://developer.mozilla.org/en/DOM/element.scrollLeft](https://developer.mozilla.org/en/DOM/element.scrollLeft)

在嵌套容器中使用它：

```
<div id="myDiv" style="width:100px;overflow:hidden">
 <div>LONGTEXTLONGTEXTLONGTEXTLONGTEXTLONGTEXTLONGTEXTLONGTEXTLONGTEXT...</div>
</div>
<input type="button" onclick="document.getElementById('myDiv').scrollLeft += 10" value="Scroll!"/> 
```

# jaxb - 如何使用 CXF WSDL2JAVA JAXB 外部绑定文件方法将所有 WSDL 复杂类型放在一个包中，将简单类型放在另一个包中？

> ID：11698507
> 
> 赞同：1
> 
> 时间：2012-07-28T05:17:55.400
> 
> 标签：jaxb, wsdl, cxf, wsdl2java

**要求：**使用 CXF WSDL2JAVA JAXB 外部绑定文件方法从 wsdl 生成 Java 工件（类）并将所有复杂类型打包到一个包中，并将所有简单类型打包到另一个包中。我对 JAXB 外部绑定文件中的 XPATH 语法感到震惊。请帮助我解决这个问题。

谢谢 ..

# dos - 通过即插即用 BIOS 分配资源

> ID：11698510
> 
> 赞同：1
> 
> 时间：2012-07-28T05:19:01.743
> 
> 标签：dos, bios, pci, pci-bus, plug-and-play

即插即用 BIOS 规范说，如果您有 PnP BIOS，它可以配置硬件。

这意味着您的 BIOS 读取所有设备的资源需求并配置它们（为它们分配总线资源）。

PnP 是否*总是*为嵌入/集成在主板上的设备分配资源（即分配 I/O 或内存地址和中断）？

PnP BIOS（即存在 $PnP 结构）是否*总是*将资源（I/O 和内存地址）分配给主板上存在的所有设备（即嵌入式/集成在主板上）*以及*PCI 扩展卡上。

虽然 BIOS 可能不知道如何“配置”非嵌入式设备（即未嵌入主板上的设备），并且只会配置嵌入式/集成在主板上的设备，但它“应该”分配地址（I/O 和内存）和 irq 以避免在使用像 DOS 这样的非 PnP 操作系统时发生冲突。

我的问题是：

PnP BIOS 是否*必须*在 POST 期间（即在加载和将控制权转移到 OS bootlader 之前）将 I/O、内存地址和 irq 分配给*PCI 扩展卡设备？*所有 PnP BIOS 都是这样吗？

假设 [Plug-and-Play OS] 选项设置为*No*。即我们告诉 BIOS 我们没有 PnP 操作系统，而是像 DOS 这样的非 PnP 操作系统。

某些 BIOS 没有此选项。他们是否总是将资源分配给*所有*设备（即嵌入式设备和扩展槽上的设备）？

**2012-08-01 更新：**

*PnP BIOS 规范 v1a 标题为“系统 BIOS POST 要求”的第 2.1 节说：*

（我只提到了与这篇文章相关的 3 点。（*）标记的信息是*我*对标准声明的解释。）

为了实现即插即用的目标，系统 BIOS POST*负责*实现下列要求：

1.  系统 BIOS*已知*的所有*“静态”*设备的配置：

     *至少*，*这*包括系统板设备*。它*“可以”*还包括“即插即用 ISA 卡”*和*位于 EISA、ISA、*PCI*或任何其他可用静态总线架构上的设备。

    *实际上，上述声明表明，设备“嵌入/集成”在系统板上的任何静态总线（例如，PCI、ISA 或 EISA）上。）*“必须”*由 BIOS 配置，因为 *BIOS 知道*“所有*嵌入在主板上的设备，作为设计部分。* 系统 BIOS 程序员*必须*结合规定将嵌入主板上的设备配置为系统设计部分。

    *这是否还包括“安装在 PCI/ISA/EISA 卡插槽中的卡”？** 
**   BIOS POST 资源仲裁：系统 BIOS 现在必须知道系统资源的使用情况。使用通过运行时服务提供的信息（将在后面的部分中描述）以及系统 BIOS 已知的资源信息，可以避免关键的资源冲突。*“在禁用冲突设备的情况下加载操作系统比导致资源冲突和可能的系统故障要好。”*

    *这似乎*适用于嵌入/集成在主板或 ISA/EISA 扩展卡插槽上的 ISA/EISA 设备。* 由于 PCI 设备的资源在 I/O（或内存）地址分配方面*不会发生冲突（因为 PCI 设备的地址**不是硬连线的*，因此在*BIOS 的“手中”*分配不冲突的地址。）和 irq 分配（因为 PCI 中断在设计上是可共享的。），因此*这意味着“所有”PCI 设备（嵌入式或非嵌入式）将被初始化/分配内存或 I/O 地址和 irq 分配。*

    *   支持即插即用和非即插即用操作系统：即插即用系统 BIOS POST *“必须”*配置系统以“既”即插即用感知，“以及”非即插即用操作system.* 在非即插即用环境中，*“要么”*系统 BIOS ，“要么*”*适当的系统软件（设备驱动程序），“必须”配置“所有”设备（即插即用 ISA 卡、PCI 设备等）。*这将允许所有环境“完全像在标准 PC 兼容系统上那样加载”。*但是，在即插即用环境中，系统 BIOS 现在可以协助操作系统执行功能，例如系统板设备的运行时配置和系统板设备发生变化时的事件识别。* 

 ***规范中的所有这 3 条语句似乎都表明，如果要启动非 PnP 操作系统（例如 DOS），那么系统 BIOS 必须“必须”配置（或者，至少分配地址和 irq）“全部” PCI 设备，无论是否嵌入/集成在主板（主板）上。对于 ISA 和 EISA 设备，BIOS“不得”为那些 ISA/EISA 设备（无论是嵌入式还是非嵌入式）启用/分配资源，这将导致资源分配冲突。*

我*从规范的上述陈述中得出结论是否正确。*那：“如果 BIOS 必须启动非 PnP 操作系统，它必须启用（即启用即分配资源）*系统中的‘每个’PCI 设备（无论是嵌入在主板上还是在 PCI 扩展卡插槽上）*，以便它们可用供操作系统和应用程序使用”？

**2012-08-04 更新：**

查看[Linux Device Drivers 3rd ed 的第 12 章。](http://lwn.net/images/pdf/LDD3/ch12.pdf). 作者在很多地方明确指出，I/O 或内存地址和 IRQ 分配*在 linux 内核开始执行时已经由 bios 完成*，linux 内核可以根据需要定制分配。

可能是另一个提到我们想要达到的目标的参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:06:13.420

“PnP OS”选项仅与 ISA PnP 设备相关，如今这些设备几乎不存在。这就是为什么您不再看到该选项的原因。在没有 ISA 插槽的主板上，这基本上是无关紧要的。如果您可以将串行端口基地址设置为“自动”，则可能仍然具有一定的相关性。

BIOS 应***始终***配置 PCI BAR 和 INTx 到 IRQ 的映射。无论 PnP OS 选项如何，它都应该这样做。这包括板载 PCI 设备（例如集成以太网）和 PCI/PCIe 插槽板。我从未见过可以启动到 DOS 并且具有未配置的 BAR 的（工作）BIOS。

当 BIOS 设置 PCI 配置空间时，它会考虑 ISA PnP 信息。例如，如果它知道 ISA PnP 设备正在使用 IRQ 9，那么 PCI init 例程应该足够智能，不会将 IRQ 9 映射到任何 PCI INTx 行。

另外，请记住，当您的操作系统加载时，可以随意覆盖 BAR 和 IRQ 映射。Windows 通常在激活 APIC 和 ACPI 时重新执行 IRQ 映射。BAR 通常不会更改，尽管可能存在特殊情况，例如需要操作系统填充 BAR 的 PCIe 热插拔事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-23T16:30:53.617

“PnP OS”选项仅与 ISA PnP 设备相关，如今这些设备几乎不存在。- 错误的！这个选项对Windows OS中的中断分布有很大的影响！反驳上述说法的实验本身很简单！*

# java - 如何获得鼠标输入但鼠标仍然影响桌面？

> ID：11698517
> 
> 赞同：1
> 
> 时间：2012-07-28T05:20:25.330
> 
> 标签：java

单击时如何获得鼠标坐标但桌面仍然具有单击效果？

我目前有一个透明框架，它给了我点击的坐标，但我需要点击来影响桌面。如果我将框架的不透明度设置为 0.10 以下，我可以单击桌面，但我没有获得鼠标坐标。有什么建议么？

```
Runnable thread = new Runnable() {
  public void run() {        
    setTitle("979");        
    setSize(screen.width, screen.height);

    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(transFlo);          
    stopRecording.setBackground(Color.red);

    add(mousePosLabel);
    add(stopRecording); 

    setOpacity(0.05f);        
    setVisible(true);
  }
}; 
```

是否可以使用透明的 JFrame、screenCapture 或其他任何东西来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:12:23.103

使用类`java.awt.Robot`。单击透明窗口时，您可以将其消失并模拟使用机器人单击同一点。然后再次创建透明窗口。

# android - android蓝牙连接丢失消息

> ID：11698519
> 
> 赞同：3
> 
> 时间：2012-07-28T05:20:39.217
> 
> 标签：android, bluetooth

我在我的游戏中添加了蓝牙两个播放器支持。但几乎一半的消息正在丢失。设备之间的距离是几米。我很失望。我每秒发送 100-2000 字节（最高 15 kbit/s）怎么办？我可以为每个数据包添加确认。但是确认包也可能会丢失。我应该为每个数据包计算 CRC 吗？我可以发送相同的 3-5 个数据包。

我的蓝牙基于谷歌的 bluetoothChat 示例。谢谢。

# .net - PowerShell：可以确定文件的 MIME 类型吗？

> ID：11698525
> 
> 赞同：8
> 
> 时间：2012-07-28T05:21:20.657
> 
> 标签：.net, powershell

PowerShell 是否可以确定给定文件的类型是什么？例如，如果我将路径传递给它`C:\Foo.zip`，我是否可以让它确定该路径处的文件实际上是一个 zip 文件而不是其他文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-29T14:42:09.597

如果您有 .NET 4.5+，则可以使用静态方法[`System.Web.MimeMapping.GetMimeMapping`](https://msdn.microsoft.com/en-us/library/system.web.mimemapping.getmimemapping(v=vs.110).aspx)：

```
> Add-Type -AssemblyName "System.Web"
> [System.Web.MimeMapping]::GetMimeMapping("C:\foo.zip")
application/x-zip-compressed 
```

归功于[this answer](https://stackoverflow.com/a/1612794/113116) to a similar question about .NET。

* * *

编辑：误读了这个问题。`GetMimeMapping`通过扩展返回 MIME 类型，它不分析内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T05:33:08.217

PowerShell 与 Windows 操作系统的其他部分一样，只是根据扩展名猜测文件类型。

但是，那里有第三方文件类型猜测程序，它们实际上会查看文件的内容。

[这个问题在 SuperUser 上](https://superuser.com/questions/274734/is-there-a-tool-that-can-determine-the-file-type-from-containing-data)有一个非常好的答案。最重要的建议包括[File for Windows](http://gnuwin32.sourceforge.net/packages/file.htm)和[TrID](http://mark0.net/soft-trid-e.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T16:46:13.057

您可以从注册表中获取 mime 类型。不幸的是，HKEY_CURRENT_USER 配置单元没有自动映射为驱动器，因此您必须先签入。

```
function Get-MimeType()
{
  param($extension = $null);
  $mimeType = $null;
  if ( $null -ne $extension )
  {
    $drive = Get-PSDrive HKCR -ErrorAction SilentlyContinue;
    if ( $null -eq $drive )
    {
      $drive = New-PSDrive -Name HKCR -PSProvider Registry -Root HKEY_CLASSES_ROOT
    }
    $mimeType = (Get-ItemProperty HKCR:$extension)."Content Type";
  }
  $mimeType;
} 
```

这是一个示例用法

```
PS> Get-MimeType -extension .zip
application/x-zip-compressed 
```

-乔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-09T16:39:03.223

```
$ext = ".exe"
$null = New-PSDrive HKCR Registry HKEY_CLASSES_ROOT -ea 0
$mime = (gp HKCR:$ext)."Content Type"
write-host $ext $mime 
```

# php - php-cgi 使用与 apache 处理程序 php 不同的配置

> ID：11698528
> 
> 赞同：1
> 
> 时间：2012-07-28T05:22:21.543
> 
> 标签：php, nginx, gd

我正在将 nginx 与 php-cgi 一起使用，并且在让 imagettftext() 工作时遇到了一些麻烦。我刚刚使用这些选项重新编译了 PHP，但是当使用 nginx 并输出 phpinfo() 时，我发现构建日期是上个月，并且实际上`--with-gd`并`--with-freetype`没有在配置中设置。

我不知道 php-cgi 和 php 使用了不同的构建/配置文件，但是，如果是这样，我该如何解决这个问题？有没有办法让它使用相同的构建？

我曾尝试编辑 php.ini 但无济于事。

编辑：

问题是 phpinfo() 中给出的“构建命令”彼此完全不同。Phpcgi 显示 5.3.13 和 apache 显示 5.3.14 ..

# android - 使用 AccountManager 实现密码

> ID：11698529
> 
> 赞同：0
> 
> 时间：2012-07-28T05:22:41.177
> 
> 标签：android, eclipse, passwords

我想知道是否有人知道如何在 Android 中使用 AccountManager 来实现密码？

所以我有一个常规的密码输入框，如下所示：

```
Enter password:
[password field]
[enter button] 
```

这是我正在使用的更改密码框。

```
Enter your current password:
[password field]
Enter your new password:
[password field]
[enter button] 
```

我遇到的问题是让他们通过 AccountManager 工作。有没有人有教程可以做到这一点？我真的很感激。

*注意*对不起，我不得不这样解释，但我不能发布图片，直到我得到 10 个代表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:28:27.120

SampleSync 示例在 android sdk 提供的示例中可用。

# python - 两个 Python 模块需要彼此的内容——这行得通吗？

> ID：11698530
> 
> 赞同：72
> 
> 时间：2012-07-28T05:22:55.990
> 
> 标签：python, python-module

我有一个带有以下行的 Bottle 网络服务器模块：

```
from foobar.formtools import auto_process_form_insert 
```

该`foobar.formtools`模块包含这一行：

```
from foobar.webserver import redirect, redirect_back 
```

当然，两者都会导致以下错误（分别）：

> ImportError：无法导入名称 auto_process_form_insert
> ImportError：无法导入名称重定向

在 Python 中两个模块不能相互导入并且所有模块导入本质上必须是分层的，这仅仅是一个事实，还是我做错了什么？或者，是否有没有将所有这些不错的功能放在新模块中的解决方法？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-28T05:25:48.937

模块*可以*周期性地相互导入，但有一个问题。在简单的情况下，它应该通过将`import`语句移动到文件底部或不使用`from`语法来工作。

这就是为什么它有效：

当你导入一个模块时，Python 首先检查`sys.modules`. 如果它在那里，它只是从那里进口。如果它不存在，它会尝试以正常方式导入它；基本上，它会找到文件并运行其中的内容。

运行模块会填充模块的内容。例如，假设我们有这个模块，创造性地命名为`example_opener`：

```
import webbrowser

def open_example():
    webbrowser.open('http://www.example.com/') 
```

一开始，模块是空的。然后 Python 执行：

```
import webbrowser 
```

之后，该模块仅包含`webbrowser`. 然后 Python 执行这个：

```
def open_example():
    webbrowser.open('http://www.example.com/') 
```

Python 创建`open_example`. 现在模块包含`webbrowser`和`open_example`。

说`webbrowser`包含此代码：

```
from example_opener import open_example

def open(url):
    print url 
```

先说`example_opener`进口。执行此代码：

```
import webbrowser 
```

`webbrowser`尚未导入，因此 Python 执行以下内容`webbrowser`：

```
from example_opener import open_example 
```

`example_opener` *已*导入，但尚未完全执行。Python 不在乎。Python 将模块从`sys.modules`. 此时，`example_opener`依然是空的。它还没有定义`open_example`，甚至还没有完成导入`webbrowser`。`open_example`Python在中找不到`example_opener`，所以它失败了。

如果我们`open_example`从 end`webbrowser`和`webbrowser`end导入`example_opener`怎么办？Python 将从执行以下代码开始：

```
def open_example():
    webbrowser.open('http://www.example.com/') 
```

`webbrowser``open_example`尚不存在，但在被调用之前无关紧要。现在`example_opener`只包含`open_example`. 然后执行：

```
import webbrowser 
```

它还没有被导入，所以 Python 执行`webbrowser`. 开始：

```
def open(url):
    print url 
```

它定义了`open`. 然后它执行：

```
from example_opener import open_example 
```

`example_opener`在 中`sys.modules`，所以它使用它。`example_opener`包含`open_example`，所以它成功了。Python 完成导入`webbrowser`. 从. `webbrowser`_ `example_opener`这是 中的最后一件事`example_opener`，所以`example_opener`完成的导入也成功了。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-28T05:37:47.800

不要做`from ... import ...`。只需`import ...`使用模块名称执行并引用其对象即可。

# iphone - 使用目标 c 为 iphone 打开\关闭对象实例

> ID：11698533
> 
> 赞同：0
> 
> 时间：2012-07-28T05:23:51.180
> 
> 标签：iphone, objective-c, cordova

我创建了从 Html 到 Objective-c 的插件，从更改 My I phone-Html 项目中的选项卡，通过 clicing 用于 iphone 的选项卡调用插件来启动一些方法。我正在使用该代码：

```
mypic *mypic= [[mypicalloc] initWithFrame:CGRectMake(15,45, 282, 282)];
    [[self.webView superview] addSubview:mypic];
    [mypicrelease]; 
```

我得到的是我在一个页面上的对象（图片），但是当我继续到另一个选项卡时，图片不会消失，并且总是停留在其他页面上，超过它们。我的问题是：

如何在更改选项卡时隐藏\关闭它以及如何将其与 HTML 页面结合使用，以便图片将以 50%-50% 的比例从我的 HTML 页面开始，并在更改页面时消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:44:12.217

当您将“mypic”对象（我想它是带有图像的 imageView）添加到 webView 时，您只需将子视图添加到父视图，因此图像将始终保留在那里。您没有将内容添加到 webview 中，您只是在另一层上添加了一个层。改为这样做 - 使用 html 加载您的 webWiew：

```
<html>
   <body>
      <img border="0" src="URL TO YOUR IMAGE"  width="bla-bla" height="bla-bla" />
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:47:35.230

将方法连接到选项卡更改，在方法中创建实例`@interface`并在方法中执行：

```
 if (mypic) { 
    mypic.hidden=YES; 
    [mypic release]; /* You need this only if you aren't using ARC */
} 
```

# sas - 重新排列 SAS 中的数据集

> ID：11698534
> 
> 赞同：1
> 
> 时间：2012-07-28T05:23:54.440
> 
> 标签：sas, transpose

我是 SAS 新手，正在尝试重新排列数据集。我觉得它不应该太难，但我已经为此苦苦挣扎了一段时间。这是我的数据集的样子

```
Factor Variable Value
A      X        1
A      Y        2
B      X        3
B      Y        4 
```

我希望我的结果数据集是

```
Variable   A   B
X          1   3
Y          2   4 
```

这可能吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:59:23.807

您希望将变量的值`Value (VAR)`转置到将由`Factor (ID)`每个值的值命名的列`Variable (BY)`，而不是在输出字段中保留值的名称`_NAME_ (drop=_NAME_`）。我承认我总是需要用它来获得我需要的东西。

```
data in;
length Factor Variable $1 Value 8;
input Factor Variable Value;
cards;
A      X        1
A      Y        2
B      X        3
B      Y        4
;
run;

proc sort data=in;
BY Variable;
run;

proc transpose data=in out=transp (drop=_NAME_);
ID Factor;
BY Variable;
VAR value;
run;

proc print noobs;run; 
```

# c - “char”是一种特殊类型的整数变量吗？

> ID：11698535
> 
> 赞同：3
> 
> 时间：2012-07-28T05:24:29.357
> 
> 标签：c, gcc

我最近看到一个声明，说 C 中的“char”类型实际上是一种特殊形式的整数——它存储代表字符和符号的 ASCII 码数字。

这在多大程度上有效？这导致了另一个问题 - char 类型真的可以在 C 中归类为整数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T05:47:00.917

是的，在 C 中，`char`被认为是整数类型。它至少需要 8 位。a 和 byte 存储之间的等价物`char`是相当明确的，而不仅仅是通常发生的事情。例如，（C99，§5.2.4.2.1/1）：

```
number of bits for smallest object that is not a bit-field (byte)
CHAR_BIT                                            8 
```

因此，a`char`始终只占用一个字节，它必须至少为 8 位。如果它更大，它仍然只占用一个字节——但那个字节恰好大于 8 位。

就持有 ASCII 码而言，这通常是正确的，但不一定如此。在诸如 IBM 大型机之类的东西上，它可能会保存 EBCDIC 代码。在更常见的机器上，“ASCII”或多或少是偶然发生的，但是当编码非英文字符时，你很快就会发现它并不是真正存储 ASCII。它通常存储 ISO 8859/x，或者可能是 Unicode UTF-8。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T05:26:47.653

该`char`类型是 C 中的*整数*类型，与其他整数类型（如`short`、`int`、`long`等）属于同一家族。 整数类型可以存储整数值，最多可存储用于描述整数类型的编码位数。例如，在大多数平台上，a`char`是 8 位或一个字节，因此它最多可以表示 2^8 个不同的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T05:26:58.343

是的，a `char`（通常）是一个单字节整数。除了编译器知道以不同的方式处理它，通常使用 ASCII 字符语义。许多库/头文件定义了一个`BYTE`类型，只不过是一个`unsigned char`，用于存储单字节整数。

# ios - 子类化的 UIView，当设置为 Storyboard 中的默认视图时，编译器无法识别而不进行强制转换

> ID：11698539
> 
> 赞同：1
> 
> 时间：2012-07-28T05:24:58.197
> 
> 标签：ios, uiview, uiviewcontroller, storyboard

在使用 XCode 4.3.3 的简单“单一视图”测试项目中：

1.  我将 UIView 子类化并在情节提要的 Property Inspector 中将其指定为用作 viewController 的默认视图的类。

2.  在我的自定义 UIView 类中`TestUIView`，我定义了一个名为“drawSwitch”的属性。

3.  我在我的 viewController 类中导入了我的自定义类的标题。

在尝试编译项目时，我很惊讶编译器无法使用下面的代码行识别我的子类，并给出错误：*Property 'drawSwitch' not found on object of type 'UIView'*。这看起来很奇怪，因为我的自定义类`TestUIView`被指示为 viewController`view`出口的类（如下图所示）。

```
[self.view setDrawSwitch:2]; 
```

然而，如果我投它，代码编译并运行良好：

```
[(TestUIView*) self.view setDrawSwitch:2]; 
```

当我查看 viewController 的属性时，我的自定义类被指示为 view 属性的 Outlet。

所以我对这里的故事板发生了什么感到困惑。

*   故事板/XCode 是否让我做一些编译器不满意的事情，仅仅是一个 GUI 漏洞？

*   我知道我可以为我的自定义视图创建一个 IBOutlet（如下所示：“testView”），但是当`view`插座已经定义时，创建一个额外的插座似乎是多余的。

我在这里错过了什么吗？（除了“这就是它的工作方式”之外，可能就是这种情况）。

![在此处输入图像描述](../Images/f3a2ffcd4b9ff427f0e34d9434d868c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:25:07.740

编译器对您在情节提要中设置的内容一无所知。它所知道的是`.view`你的视图控制器的属性将是一个 UIView。这很好用，因为您可以在运行时将 UIView 的任何子类分配给此属性而不会出现问题。

当您尝试使用 view 属性时，您的问题就出现了，就好像它是一个更具体的子类一样。编译器不知道，在运行时，它认为的 UIView 实际上是一个不同的类。

您的“冗余”插座实际上是 Apple 使用 UITableViewController 实现这种情况的方式。UITableViewController 有一个`.view`和一个`.tableView`属性，它们都指向同一个对象——表格视图。

另一种方法是覆盖该属性以具有不同的类，如此处和[此处所讨论的](https://stackoverflow.com/questions/10770578/create-subclass-with-different-subclass-property)[，](https://stackoverflow.com/questions/10711755/narrow-type-of-property-in-subclass)但这可能会对视图控制器产生不可预见的影响。我建议坚持使用具有更具体类的单独属性 - 它肯定会使您的代码更具可读性。

[*题外话——这是我在 Stack Overflow 上的第 1000 个答案——不客气！*]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:56:56.050

有些内容您可能没有发布但有误，或者可能是我没有正确理解问题。

我尝试的一个简单示例可以通过故事板进行操作，不需要演员表并且易于使用。

所以这里是 SVTView.h 的代码：

```
@interface SVTView : UIView{

}
-(void)sampleSet:(int)value;

@end 
```

和 SVTView.m：

```
#import "SVTView.h"

@implementation SVTView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

-(void)sampleSet:(int)value{
  NSLog(@"setting value %d",value);
}

@end 
```

最后是 ViewController 中的用法：

```
#import <UIKit/UIKit.h>
#import "SVTView.h"

@interface SVTViewController : UIViewController{

  IBOutlet SVTView * testView;
}

@property(nonatomic, retain) SVTView * testView;

@end 
```

和 Viewcontroller.m：

```
#import "SVTViewController.h"

@interface SVTViewController ()

@end

@implementation SVTViewController

@synthesize testView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
  [testView sampleSet:2];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

引用 Outlet 已通过 Storyboard 连接，因此使用了实例变量。日志控制台显示 disred 结果：

```
2012-07-28 07:51:02.227 SingleViewTest[1490:f803] setting value 2 
```

Imo 使用正确的类并不是多余的，多余的部分可能是类转换。

# ruby-on-rails - 从 memcache 加载 Rails activerecord 关联

> ID：11698541
> 
> 赞同：0
> 
> 时间：2012-07-28T05:25:46.763
> 
> 标签：ruby-on-rails, activerecord, memcached, associations

我的应用中有 2 个模型 - 一个请求和一个类别 一个请求属于一个类别。系统包含许多请求，但只有几个类别。这些类别是静态的，永远不会改变，它们拥有其他也是静态的关联。我可以使用 memcache 来存储类别和相关关联。

当 Rails 加载特定请求以从 memcache 而不是 DB 加载关联的 Category 时，我如何告诉它？

```
req = Request.find(id)
req.category (Curr this hits the DB - want it to hit memcache) 
```

重写方法 req.category 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:54:01.310

我不确定，但我认为您的解决方案没有您想象的那么好。

所以你有 20 个类别，假设你想要获取 2000 个请求。如果使用 ActiveRecord 执行此操作，您可以在两个查询中执行此操作

```
Request.includes(:category) 
```

这只会命中数据库的两倍，并且通过适当的索引，它应该非常快。我刚刚用 sqLite 测试了上面的数字，我在 13.4 毫秒内得到了它，这是可以接受的。使用外键索引，我不知道为什么，但它下降到 11.3 毫秒。

如果你用 memcached 实现你的“解决方案”，我只是假设，但它实际上可能会变得更糟，因为你会像请求一样多次访问缓存，所以在这个例子中你会访问 memcached 2000 次，甚至如果他们每个花费 1 毫秒，那将是 2000 毫秒 = 2 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:34:03.173

Memcache 是一个键/值存储，只能存储字符串，因此您必须编写一个自定义方法来检索类别以及以某种方式序列化您的对象。

看看这里：[在 memcached 中存储 ActiveRecord 对象的最佳方法是什么？](https://stackoverflow.com/questions/2393974/what-is-the-best-way-to-store-an-activerecord-object-in-memcached)

# javascript - 如何避免网站使用本地缓存的 JavaScript 文件？

> ID：11698547
> 
> 赞同：3
> 
> 时间：2012-07-28T05:26:51.430
> 
> 标签：javascript, asp.net, caching, web

朋友们，

最近我在客户端托管了一个网站（使用 ASP.Net 开发），其中包含许多用于丰富 UI 交互的 JavaScript 内容。一切正常。但主要问题是——

当我对 JavaScript 文件进行一些更改并上传时，它不会在客户端生效，因为那里的网站采用本地缓存的 JavaScript 文件。

那么，我该如何避免这种情况呢？

有什么技术可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T05:38:07.627

在 url 的末尾附加一些随机生成的数字/时间戳到 js 文件，如 -

[http://example.com/my_js_file.js?12345](http://example.com/my_js_file.js?12345)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:34:22.640

经过一番研究，我们得出了以下似乎涵盖大多数浏览器的标头列表：

*   [过期](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21): 1997 年 7 月 26 日星期一 05:00:00 GMT
*   [Cache-Control](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9) : [no-cache](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1) , private, [must-revalidate](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.4) , max-stale=0, post-check=0, pre-check=0 no-store
*   [Pragma](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32) : 无缓存

在 ASP.NET 中，我们使用以下代码段添加了这些：

```
Response.ClearHeaders(); 
Response.AppendHeader("Cache-Control", "no-cache"); //HTTP 1.1
Response.AppendHeader("Cache-Control", "private"); // HTTP 1.1
Response.AppendHeader("Cache-Control", "no-store"); // HTTP 1.1
Response.AppendHeader("Cache-Control", "must-revalidate"); // HTTP 1.1
Response.AppendHeader("Cache-Control", "max-stale=0"); // HTTP 1.1 
Response.AppendHeader("Cache-Control", "post-check=0"); // HTTP 1.1 
Response.AppendHeader("Cache-Control", "pre-check=0"); // HTTP 1.1 
Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.0 
Response.AppendHeader("Expires", "Mon, 26 Jul 1997 05:00:00 GMT"); // HTTP 1.0 
```

发现自：[http ://forums.asp.net/t/1013531.aspx](http://forums.asp.net/t/1013531.aspx)

* * *

以上解决方案来自[这里](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T05:44:36.540

而不是只有`script`标签来加载Javascript，动态加载它

```
<script>
    function loadScript(name) {
        var s = document.createElement("script");
        s.src = name + "?" + (new Date).getTime();
        document.body.appendChild(s);
     }
     loadScript("script1");
     loadScript("script2");
 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T05:43:20.590

请参阅此答案中有关缓存的注释： [使显示/隐藏更小](https://stackoverflow.com/questions/11217099/making-a-show-hide-smaller/11217136#11217136)

将缓存视为您的朋友。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-28T05:33:39.643

有一些技术，例如避免浏览器使用缓存过期来缓存资源。

```
protected void Application_BeginRequest()
{
  //NOTE: Stopping IE from being a caching whore
  HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(false);
  HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
  HttpContext.Current.Response.Cache.SetNoStore();
  Response.Cache.SetExpires(DateTime.Now);
  Response.Cache.SetValidUntilExpires(true);
} 
```

但是对于您的情况，这是不可取的，我假设您的项目处于开发阶段，并且为了避免`cntrl + F5`重新加载资源并删除缓存资源并再次重新加载，您不应该实施此补救措施，因为这会减慢您的网站表现。

更简单，更合理的解决方案是告诉您的客户`cntrl + F5`在他们想要查看站点的最新更改时进行合作并按下，之后站点完成时将不再需要这样做，或者您可以实现上面给出的代码仅在开发阶段，并在您的网站上线之前将其删除。

# android - 使用公共静态字段在活动之间共享数据

> ID：11698549
> 
> 赞同：1
> 
> 时间：2012-07-28T05:27:07.527
> 
> 标签：android, static, nullpointerexception, shared, public

我正在尝试实现一个应用程序，该应用程序允许使用 3 个不同的协同例程活动搜索二叉树。这些活动可以选择以任何顺序运行，并且每个活动都应该能够访问有关最近访问的节点的共享数据，以便他们可以继续搜索树。

用文字解释这个有点复杂，所以我想我应该在这里粘贴我的部分代码。下面是我的一个协程活动的代码（其他两个基本相同）：

```
public class CoRoutineOne extends Activity {
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        try{
            SearchSharedTreeActivity.current = SearchSharedTreeActivity.tree.search
                    (SearchSharedTreeActivity.item, (BinaryTree.Node)SearchSharedTreeActivity.nodeList.get(SearchSharedTreeActivity.nodeList.size() - 1));
            SearchSharedTreeActivity.nodeList.add(SearchSharedTreeActivity.current);
            setResult(Activity.RESULT_OK);
        }catch(Exception e){
            setResult(Activity.RESULT_CANCELED);
        }
        finish();
    }
} 
```

主要活动的代码：

```
public class SearchSharedTreeActivity extends Activity implements OnClickListener {
    private EditText target = null;
    private EditText corout1 = null;
    private EditText corout2 = null;
    private EditText corout3 = null;

    private Button target_btn = null;
    private Button corout1_btn = null;
    private Button corout2_btn = null;
    private Button corout3_btn = null;

    private static final int COROUT_ONE_REQCODE = 1;
    private static final int COROUT_TWO_REQCODE = 2;
    private static final int COROUT_THREE_REQCODE = 3;

    public static BinaryTree tree = null;
    public static Vector nodeList = null;
    public static BinaryTree.Node current = null;
    public static Comparable item = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tree = new BinaryTree();
        Comparable[] values = {20, 10, 30, 5, 17, 25, 40, 11, 35, 55};
        tree.insert(values);

        target = (EditText) findViewById(R.id.target_input);
        corout1 = (EditText) findViewById(R.id.co1_output);
        corout2 = (EditText) findViewById(R.id.co2_output);
        corout3 = (EditText) findViewById(R.id.co3_output);

        target_btn = (Button) findViewById(R.id.target_btn);
        corout1_btn = (Button) findViewById(R.id.co1_btn);
        corout2_btn = (Button) findViewById(R.id.co2_btn);
        corout3_btn = (Button) findViewById(R.id.co3_btn);

        target_btn.setOnClickListener(this);
        corout1_btn.setOnClickListener(this);
        corout2_btn.setOnClickListener(this);
        corout3_btn.setOnClickListener(this);
    }

    public void onClick(View view){
        Button btn = (Button) view;
        int id = btn.getId();
        if (id == R.id.target_btn){
            item = target.getText().toString();
            try{
                Integer.parseInt((String) item);
                target.setText("Target is " + item);
            }catch (Exception e){
                target.setText("");
                corout1.setText("");
                corout2.setText("");
                corout3.setText("");
            }
        }
        else if (id == R.id.co1_btn){
            Intent i1 =  new Intent(this, CoRoutineOne.class);
            startActivityForResult(i1, COROUT_ONE_REQCODE);
        }
        else if (id == R.id.co2_btn){
            Intent i2 =  new Intent(this, CoRoutineTwo.class);
            startActivityForResult(i2, COROUT_TWO_REQCODE);
        }
        else if (id == R.id.co3_btn){
            Intent i3 =  new Intent(this, CoRoutineThree.class);
            startActivityForResult(i3, COROUT_THREE_REQCODE);
        }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data){
        if (requestCode == COROUT_ONE_REQCODE){
            if (resultCode == Activity.RESULT_OK){
                if (item.equals(current.value))
                    corout1.setText("Found " + current.value);
                else if (current == null)
                    corout1.setText("Not found");
                else
                    corout1.setText("Reached " + current.value);
            }
            else
                corout1.setText("Problem finding target");
        }

        else if (requestCode == COROUT_TWO_REQCODE){
            if (resultCode == Activity.RESULT_OK){
                if (item.equals(current.value))
                    corout2.setText("Found " + current.value);
                else if (current == null)
                    corout2.setText("Not found");
                else
                    corout2.setText("Reached " + current.value);
            }
            else
                corout2.setText("Problem finding target");
        }

        else if (requestCode == COROUT_THREE_REQCODE){
            if (resultCode == Activity.RESULT_OK){
                if (item.equals(current.value))
                    corout3.setText("Found " + current.value);
                else if (current == null)
                    corout3.setText("Not found");
                else
                    corout3.setText("Reached " + current.value);
            }
            else
                corout3.setText("Problem finding target");
        }
    }
} 
```

从我的主要活动的上述代码可以看出，我已经设置了字段`tree`，`nodeList`（访问的节点列表），`current`（当前访问的节点）和`item`（要在树中搜索的元素），`public static`以便我的协程活动可以轻松访问它们。但不知何故，这不起作用，我总是在调用任何协同例程活动时得到`NullPointerException`然后。`RESULT_CANCELED`

请帮我指出问题。任何建议表示赞赏。

# sqlite - 在黑莓中，如何将图像存储在数据库中？

> ID：11698554
> 
> 赞同：2
> 
> 时间：2012-07-28T05:27:29.013
> 
> 标签：sqlite, blackberry

我想将图像存储到 Blackberry 中的 SQLite 数据库中。那我该怎么办？我想从服务器获取图像，然后想存储在数据库中。我完美地从服务器获取图像并将图像作为字节 [] 存储在数据库中。但我无法获取它。所以请帮助我...

将代码编辑到问题中，以便阅读：

```
try {
   Statement st = db.createStatement("SELECT * FROM Image");
   st.prepare(); 
   Cursor c = st.getCursor();
   Row r;
   while(c.next()) {
      r = c.getRow();
      byte[] pic=r.getBlobBytes(0);
      st.close();
      EncodedImage _bmap = EncodedImage.createEncodedImage(pic, 0, pic.length);
      BitmapField bmf=new BitmapField(_bmap.getBitmap());
      add(bmf);
   }
} catch ( Exception e ) {
   System.out.println( e.getMessage() );
   e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T20:10:30.143

您的代码没有提及 blob 列的名称，因此我将其命名为`image_data`。像这样的东西应该适用于插入：

```
EncodedImage pic = getImage();
byte [] imageBytes = pic.getData();
Statement st = db.createStatement("INSERT INTO Image (image_data) values (?)");
st.prepare();
st.bind(1, imageBytes);
st.execute(); 
```

对于检索，显式命名列可能会有所帮助，因为您当前的代码假定 blob 始终是表架构中的第一列。此外，您不应关闭循环中的语句，因为这将阻止读取第一张图像之后的任何内容：

```
Statement st = db.createStatement("SELECT image_data FROM Image");
st.prepare(); 
Cursor c = st.getCursor();
Row r;
while(c.next()) {
   r = c.getRow();
   byte[] pic=r.getBlobBytes(0);
   EncodedImage _bmap = EncodedImage.createEncodedImage(pic, 0, pic.length);
   BitmapField bmf=new BitmapField(_bmap.getBitmap());
   add(bmf);
}
st.close();  // moved this line out of the loop 
```

# ruby - Mongoid独特的孩子

> ID：11698559
> 
> 赞同：0
> 
> 时间：2012-07-28T05:29:02.877
> 
> 标签：ruby, mongoid

我正在创建一个多租户应用程序，并试图弄清楚如何与 Mongoid 建立这种关系。我有一个`Site`模型`has_many :domains`，`embeds_many`如果可以的话，它或者甚至使用字符串数组。我想验证只能关联唯一域（因此两个`Sites`域不能具有相同的域）。我还希望能够通过给定域找到站点。

我将如何使用 Mongoid 来表示这个？另外，我将如何查询`Site`给定域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:32:51.750

您最好使用 has_many 关联。

在域模型中做，你会很好。假设你想要唯一的域名，如果 url 只是改变它。

```
validates_uniqueness_of :name 
```

如果您嵌入它，您将无法轻松地进行验证，您需要获取所有站点和域，或者保留一个仅包含域名的不同集合以查看它是否存在。查询具有给定域的站点也是如此。因为您无法获得该域，而不知道它所属的站点。

* * *

如果你做正确的关系

```
class Site
  field :name
  has_many :domains
end

class Domain
  field :name
  belongs_to :site
end 
```

然后你可以做，就像在 ActiveRecord

```
some_domain.site 
```

文档： http: [//mongoid.org/en/mongoid/docs/relations.html#has_many](http://mongoid.org/en/mongoid/docs/relations.html#has_many)

# objective-c - Objective-C 方法指针发送消息

> ID：11698562
> 
> 赞同：0
> 
> 时间：2012-07-28T05:30:00.277
> 
> 标签：objective-c, methods, fractions

我是 obj-c 编程的新手，我读过 Kochan 的书。

这是书中的代码

```
-(void) add:(Fraction *) f 
{
  numerator = numerator *f.denominator + denominator * f.numerator
  denominator = numerator * f.denominator

} 
```

我知道'f'指向分数，但我不明白为什么使用f.numerator或f.denominator的内部方法。

有人可以为我解释吗？我的第一语言不是英语。所以请简单点。

**编辑**：嗯，在数学中我们使用 (a/b)+(c/d) =(ad+bc)/(bd)，我知道这个公式。我只是不明白为什么在星号之后为什么要放 f 点。我想知道 f 指向哪里。

**编辑**2

我仍然对括号中的单词“（Fraction *）f”有一点问题

在书中说“这表明 add:method 的参数是对 Fraction 类中的对象的引用”

括号中的 Fraction 是否指向 Fraction 类？或者“f”这个词是指向分数类？

我不明白这句话。你能给我更多的细节吗？

**编辑 3**

里面添加方法。为什么只使用一个 f 点？我的意思是看起来这个

`numerator = numerator *f.denominator + denominator * f.numerator`

为什么我们不能编写这样的代码。

`numerator = f.numerator *f.denominator + f.denominator * f.numerator`

我不明白这部分。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:39:21.150

它似乎是`Fraction`班级的公共财产。`f`是`Fraction`类的一个实例。`numerator`并且`denominator`是`Fraction`类中的公共属性。点符号等价于`[f numerator]`。

*编辑*

这是使用备用消息发送语法重写的代码。

```
-(void) add:(Fraction *) f 
{
  denominator = numerator * [f denominator];
  numerator = numerator * [f denominator] + denominator * [f numerator];
} 
```

*编辑*2\. Fraction 类标题可能看起来像这样。

```
class Fraction : NSObject

// methods
// ...

@property (nonatomic, strong) int numerator;
@property (nonatomic, strong) int denominator;

// other properties
// ...

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:39:10.740

`numerator`并且`denominator`是`Fraction`, 点 "."的两个属性。可用于通过使用`f.numerato`r 或. 来获取和设置属性`f.denominator`。

# javascript - jQuery Mobile 滑块事件

> ID：11698575
> 
> 赞同：-2
> 
> 时间：2012-07-28T05:33:40.927
> 
> 标签：javascript, jquery-mobile, slider

开发一个移动网络应用程序：

*   jQuery 1.7.1
*   jQuery-移动 1.1.1
*   导轨 3.2.1

在这里，我打算`<span id="wake_up_time_display">`随着滑块值的变化而改变时间指示器 ( ) 的内容。

以下在直接调用目标 URL 时有效。

但是在很多情况下，jQuery mobile 显示 时`<div data-role="page">`，指示器保持不变。（滑块本身的值会发生变化。）

```
<label class="select" for="daily_record_wakeup_time">
    I'll wake up at: 
</label>
<span id="wake_up_time_display"> 6:00</span>
<input data-theme="e" data-track-theme="d" id="daily_record_wakeup_time" 
       max="480" min="240" name="daily_record[wakeup_time]" step="15" 
       type="range" value="360" />

<script>
    $("input[id='daily_record_wakeup_time']").live ("slidercreate", function () {
        $("input[id='daily_record_wakeup_time']").bind ("change", function (event) {
            $("#wake_up_time_display").text(Math.floor($(this).val() / 60) +
                    ":"+($(this).val() % 60 < 10 ? "0":"")+$(this).val() % 60);
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:04:14.113

你为什么不直接使用 CSS 选择器呢

```
$("#daily_record_wakeup_time") 
```

而不是将 ID 作为属性传递？此外，如果您可以避免使用“live”方法而使用“delegate”，那就太好了。jQuery 已经弃用了这个方法，新版本不再支持它。确保在库中的某处有自定义事件“slidercreate”。

# java - 如何拆分包裹？根据功能将子类移动到不同的包或组织在soma包中？

> ID：11698582
> 
> 赞同：1
> 
> 时间：2012-07-28T05:34:31.040
> 
> 标签：java, package

我有类对象**ServerUser**。serverUser 被视为共享部分，它有两个子类**SSHUser 和 FTPUser**。SSHUser 只支持 SSH 包，FtpUser 只支持 FTP 包。那么我应该将子类（ftpUser 和 sshUser）与 serverUser 放在同一个包中还是根据功能放在不同的包中？有什么规则吗？

从我的角度来看，我认为应该将 sshUser 和 ftpUser 放置到 ssh 模块和 ftp 模块，因为子类不被共享，但它真的很难导航。放在一个包中更容易导航并保持代码更简单？**那么哪个更好呢？有什么规律吗？**

这个问题与 hwo 类似，在子类不共享时拆分异常类及其子类的包？都在一个包装或其他样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:42:56.690

这最终取决于您 - 在如何将代码构建成包方面，您有很大的灵活性。

需要考虑的一些选项：

*   **将相关的类打包在一起**——即将不同类型的用户放在同一个包中。如果您将所有不同类型的用户类放在一起，它可能会使您的源代码树更简单、更容易导航，例如，如果您正在重构用户处理功能。
*   **将独立的功能打包在一起**- 即将所有 SSH 相关的类（包括 SshUser）保存在`server.ssh`包中。通过这种方式，您`server.ssh`几乎可以将其视为包含所有 SSH 特定功能的独立模块。

没有重要的技术理由偏爱其中之一，因此这实际上取决于您认为哪一个将使您的代码库更易于管理和更易于维护。

# objective-c - 如何在 Objective-C 中获取字符数组的 NSString 等效项？

> ID：11698584
> 
> 赞同：0
> 
> 时间：2012-07-28T05:35:30.650
> 
> 标签：objective-c, arrays, nsstring, char

更具体地说，我在 `NSString *signStr = [NSString stringWithCString:text encoding:NSASCIIStringEncoding];` 调用函数后在代码中放置了一个断点`secret= @"12345678901234567890"`，`movingFactor = 1` 我注意到在断点处，`signStr`是一个空字符串，代码中是否还有其他明显的错误？谢谢

```
-(NSString*) generateOTP:(NSString*) secret with:(uint64_t) movingFactor
{
    NSString* result;

    const int DIGITS = 6;
    const int SIX_DIGITS = 1000000;

    char text[8];
    for (int i = 7; i >= 0; i--) {
        text[i] = movingFactor & 0xff;
        movingFactor >>= 8;
    }

    NSString *signStr = [NSString stringWithCString:text encoding:NSASCIIStringEncoding];

    NSString* hash = [self sha1UseKey:secret toSign:signStr];

    int offset = [hash characterAtIndex:[hash length] - 1] & 0xf;

    int binary = (([hash characterAtIndex:offset] & 0x7f) << 24) |
        (([hash characterAtIndex:offset+1] & 0xff) << 16) |
        (([hash characterAtIndex:offset+2] & 0xff) << 8) | ([hash characterAtIndex:offset+3] & 0xff);

    int otp = binary % SIX_DIGITS;

    result = [NSString stringWithFormat:@"%d", otp];

    NSString* zero = @"0";
    while ([result length] < DIGITS) {
        result = [zero stringByAppendingString:result];
    }
    return result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:41:49.230

要成为“C 字符串”，它必须以零 ( `'\0'`) 结尾。如果`movingFactor`是 1，那么最后一个字符将是`0x01`，并且第一个（以及每隔一个字节）由于移位而为零。这使第*一个*字符为零，这使字符串“空”。

# ruby - 什么时候应该在 MVC 中按函数/关系（而不是按类）来引用对象？

> ID：11698585
> 
> 赞同：1
> 
> 时间：2012-07-28T05:35:53.943
> 
> 标签：ruby, naming-conventions

例如，假设我们有`User`s，它们分别通过s、s 和s 与`Group`s、`Event`s 和其他s 相关。`User``Membership``Rsvp``Friendship`

我们应该在哪里通过函数/关系名称（“member”、“rsvp”、“friend”）引用对象实例，在哪里应该通过类名（“users”）引用对象实例？*即*什么时候是`User`“用户”，什么时候是`User`“会员”？

我们在**模型**中使用哪个？（此示例为 group.rb）

```
has_many :members, through: :memberships, source: :user
# vs.
has_many :users, through: :memberships 
```

我们在**Controller**中使用哪个？（本例中为groups_controller.rb）

```
@members = @group.members                    # or @group.users, depending on the model
# vs.
@users = @group.users 
```

我们在**View**中使用哪个？（本例中为groups/show.html.haml）

```
- @members.each do |member|                  # or @users.each, depending on the controller
  = "This is a member named #{member.name}"
-# vs.
- @users.each do |user|
  = "This is a member named #{user.name}" 
```

使用函数/关系名称似乎更易读，但使用类名更容易记住。有没有人发现（或发明！）这类事情的彻底和合乎逻辑的约定？

## 编辑：

1.  将“更容易记住和重构”更改为“更容易记住”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:08:43.223

我的约定是始终使用函数/关系名称。我不明白你为什么说用类名更容易记住和重构。我个人发现，当您使用函数/关系名称时，一切都会变得更容易。它也更“灵活”，因为如果明天您决定允许组进入其他组，那么成员仍然有意义，但用户并不完全正确......用户或类名是“当前”实现/解决方案你正在使用什么......功能或关系名称是该对象的使用方式......它与“接口”或您期望它具有的更相关......所以你专注于它应该做什么做什么，它应该解决什么，而不是它如何自动取款机。

通过查看上下文和//运行测试通常也很容易推断出某物的类型或可能的类型，所以我认为函数关系名称添加了很多有用的信息，而另一个添加了无用的信息，这可能是弊大于利。

# php - Facebook php - 以管理员身份发布到 Facebook 粉丝页面？

> ID：11698588
> 
> 赞同：-1
> 
> 时间：2012-07-28T05:37:13.553
> 
> 标签：php, facebook

使用 php.ini 发布到 facebook 粉丝页面的最佳方式是什么？我是管理员。我正在使用 php sdk。使用发布流是否 100% 安全。我担心facebook会禁止我的申请。

使用它是否安全：

```
$facebook->api("/PAGE_ID/feed","POST",array("message"=>"Hello Page!")); 
```

有没有更好的发帖方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:14:57.733

我认为使用它没有任何问题，除非您试图通过发送太多请求来滥用他们的 API 系统。这是通过 PHP imo 发布/发布的最佳方式

# ruby - 快速 Ruby 哈希访问

> ID：11698594
> 
> 赞同：0
> 
> 时间：2012-07-28T05:38:17.183
> 
> 标签：ruby, optimization

检查 Ruby 哈希对象的所有键是否都指向空数组的最快方法是什么？

我目前的做法：

```
h = {"a" => [1,2,3], "b" => []}
var = "something" if h.values.flatten.size > 0 
```

另一种方法：

```
h = {"a" => [1,2,3], "b" => []}
var = "something" if h.values.flatten.empty? 
```

还有其他明显更快的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:47:14.893

Flatten 将导致您的代码重新分配一个新的、更大的缓冲区。您可以像这样跳过展平：

```
h.values.all? &:empty? 
```

基准：

```
Benchmark.measure {100000.times{ h.values.all? &:empty? }}
# =>   0.100000   0.000000   0.100000 (  0.096073)

Benchmark.measure {100000.times{ h.values.flatten.empty? }}
# =>   0.140000   0.000000   0.140000 (  0.143457) 
```

更大的基准，包括`h.all? {|_,v| v.empty?}`

```
h = {}
(1...10000).each {|i| h[i] = []}  # Pathological case

Benchmark.measure {1000.times{ h.values.flatten.empty? }}
# =>   1.880000   0.000000   1.880000 (  1.882853)
Benchmark.measure {1000.times{ h.values.all? &:empty? }}
# =>   1.750000   0.000000   1.750000 (  1.748415)
Benchmark.measure {1000.times{ h.all? {|_,v| v.empty?} }}
# =>   4.140000   0.000000   4.140000 (  4.137548) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:02:49.510

让我们贪婪：

```
all_empty = true

h.each_value do |value|
  unless value.empty?
    all_empty = false
    break
  end
end 
```

基准：

```
h = {}
(1...10000).each {|i| h[i] = []}

Benchmark.measure {1000.times{ h.values.flatten.empty? }}
=>   2.020000   0.000000   2.020000 (  2.026274)
Benchmark.measure {1000.times{ h.values.all? &:empty? }}
=>   1.750000   0.000000   1.750000 (  1.750908)
Benchmark.measure {1000.times{ h.all? {|_,v| v.empty?} }}
=>   3.570000   0.000000   3.570000 (  3.570945)
Benchmark.measure {1000.times{ <code above> }} # Worst case
=>   1.530000   0.000000   1.530000 (  1.529857) 
```

# java - 有没有办法在 try-with-resources 中创建和刷新 I/O 流？

> ID：11698605
> 
> 赞同：4
> 
> 时间：2012-07-28T05:40:33.477
> 
> 标签：java, stream

是否可以使用`try-with-resources`Java 7 中的 new 语句同时创建`ObjectOutputStream`and ，并在创建输入流*之前*`ObjectInputStream`刷新输出流？现在，我正在使用旧样式：

 *```
ObjectOutputStream ostream = null;
ObjectInputStream istream = null;
try {
  ostream = new ObjectOutputStream(this.socket.getOutputStream());
  ostream.flush();
  istream = new ObjectInputStream(this.socket.getInputStream());
  // ...
}
catch (Exception e) {
  e.printStackTrace();
}
finally {
  // Close the streams.
} 
```

我想知道是否有更好的方法来使用 Java 7 中的新样式创建和刷新流。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T06:05:04.037

您可以嵌套两个 try-with-resources：打开输出流并刷新它的外部一个，然后打开输入流的内部一个。*

# c++ - 有没有办法从 GCC 获取字符串文字？

> ID：11698608
> 
> 赞同：0
> 
> 时间：2012-07-28T05:41:11.867
> 
> 标签：c++, c, gcc, compiler-construction

我一直在谷歌上四处寻找，但没有卓有成效的结果。我实际上正在寻找一种导出方法或一些如何获取所有字符串文字的列表，例如

```
int main(){
    const char *p = "Hello";
    const char x[] = "World";
} 
```

编译这段代码有没有办法知道“Hello”和“World”？我知道它们在反汇编程序中可用（在 Windows 中使用了一些）。但是是否有一些适当的工具可以实际转储这些字符串或以某种方式导出它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:25:33.713

我不完全明白这个问题。你有一个源文件，当你编译它时，你需要 GCC 告诉你你使用了多少个字符串常量。我对此的解释是否正确？

如果是，您可以告诉 gcc 使用 "gcc -S source_file" 进行编译。这将为您提供 .s 文件，其中包含您定义的字符串常量，与 ".string" 相对。您可以解析此文件中出现的“.string”并获取计数（手动或使用“grep”管道传输到“wc -l”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T05:45:00.960

如果没有调试信息，您只能知道它们将被简单地放入只读数据区域（可能是`.rdata`IIRC 部分）。

linux[`strings`](http://linux.die.net/man/1/strings)实用程序将查看一个二进制文件，并在给定的长度和编码限制内转储任何可识别的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:10:48.027

为什么你需要 C 代码中的所有字符串常量？（`strings`在二进制文件上使用该实用程序可能就足够了）。

为此，您可以自定义 GCC 编译器，例如使用[MELT](http://gcc-melt.org/)，但这可能需要您几天的时间，我觉得这有点过头了。

您还可以从 GCC 发出汇编代码并解析该汇编代码以获得字符串常量。

当然，您可以标记和解析预处理的表单。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T06:04:34.410

编写一个简单的分词器，它可以识别字符串和注释并忽略其他所有内容。

# html - 当我将应用程序部署到谷歌应用引擎时，favicon.ico 没有出现

> ID：11698610
> 
> 赞同：3
> 
> 时间：2012-07-28T05:41:18.140
> 
> 标签：html, google-app-engine, favicon

我已将 favicon.ico 放在我项目的网页目录中。我还在 jsp 页面中放置了一个标签，以将 favicon 放在浏览器上：

```
<link rel="icon" type="image/ico" href="./favicon.ico"/> 
```

但该图标仍然没有出现在浏览器中。

这是为什么 ？我需要做什么将网站图标放在浏览器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:17:39.970

即使 favicon 路径得到正确解析，您可能仍需要清除浏览器的 favicon 缓存（曾经发生在我身上）。

例如对于 Safari/Mac OS：退出浏览器，然后删除文件 $HOME/Library/Safari/WebpageIcons.db。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:11:46.427

URL 需要被解析为真正的公共网址，而不是服务器端路径。

尝试这个：

```
<link href="${pageContext.request.contextPath}/favicon.ico"  rel="shortcut icon" type="image/x-icon" /> 
```

或者

```
<link href="<c:url value="/favicon.ico"/>" rel="shortcut icon" type="image/x-icon" /> 
```

# mysql - BIGINT UNSIGNED VALUE 超出范围我的 SQL

> ID：11698613
> 
> 赞同：26
> 
> 时间：2012-07-28T05:42:40.950
> 
> 标签：mysql

我收到以下错误

> #1690 - BIGINT UNSIGNED 值超出 '( `legends`. `spawns`. `quantity`- `tmp_field`)'的范围

这是我的查询

```
SELECT drops.common, drops.uncommon, drops.rare, drops.legendary, spawns . *
     , ( quantity - COUNT( game_moblist.spawn_id ) ) AS quantity_to_spawn
     , mobs . * 
FROM spawns
     LEFT JOIN mobs
          USING ( mob_id ) 
     LEFT JOIN game_moblist
          USING ( spawn_id ) 
     LEFT JOIN drops ON ( 
               SELECT MAX( level ) 
                 FROM drops
                WHERE drops.type = mobs.drop_list
                  AND drops.level <= spawns.level ) 
GROUP BY spawn_id
HAVING quantity_to_spawn >=0
       AND next_spawn <=0 
```

我一直盯着它有一段时间查询很长对不起。

spawns table - count`game_moblist.spawn_id`适用`0`于所有可能的行，但 1 （我删除了一行来测试查询）

否则数据很长，我认为与我的问题无关

知道如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-28T19:54:03.307

请阅读“[***超出范围和溢出处理***](http://dev.mysql.com/doc/refman/5.5/en/out-of-range-and-overflow.html)”。
它说：

> > *As of MySQL 5.5.5, overflow during numeric expression evaluation results in an error. For example, the largest signed BIGINT value is 9223372036854775807, so the following expression produces an error.*

```
mysql> SELECT 9223372036854775807 + 1;

ERROR 1690 (22003): BIGINT value is out of range in '(9223372036854775807 + 1)' 
```

To enable the operation to succeed in this case, convert the value to unsigned;

```
mysql> SELECT CAST(9223372036854775807 AS UNSIGNED) + 1;
+-------------------------------------------+
| CAST(9223372036854775807 AS UNSIGNED) + 1 |
+-------------------------------------------+
|                       9223372036854775808 |
+-------------------------------------------+ 
```

A change to part of your query, as following, would solve the issue.

```
( CAST( quantity AS SIGNED ) - COUNT( game_moblist.spawn_id ) ) AS quantity_to_spawn 
```

Otherwise you may require to change the `sql_mode` on unsigned operations.

```
mysql> SET sql_mode = 'NO_UNSIGNED_SUBTRACTION'; 
```

and then run your query to get desired output.

See also a similar posting answered on a forum ***[here](http://translate.google.co.in/translate?hl=en&sl=de&u=http://www.klamm.de/forum/f28/fehler-1690-bigint-unsigned-value-is-out-of-range-in-377479.html&prev=/search?q=http://www.klamm.de/forum/f28/fehler-1690-bigint-unsigned-value-is-out-of-range-in-377479.html&hl=en&biw=1024&bih=619&prmd=imvns&sa=X&ei=SkEUULywJ47jrAeKzYHwCg&sqi=2&ved=0CCkQ7gEwAA)***.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-17T03:13:47.257

To generalise the rule, MySQL will now refuse to substract an UNSIGNED operand from a SIGNED one.

Example : `SELECT A - B;` will fail if A is SIGNED whereas B is UNSIGNED.

Workarounds: Add 1.0 factor to the signed operand, so it implicitly casts it to FLOAT, or use `CAST (B AS SIGNED)`, or even swap (B - A) and change the algorithm accordingly.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-08T10:17:12.450

I had the same problem, it occurred on a JOIN and couldn't figure out what was going on, in the end it was typo in the ON clause where I placed a minus sign instead of an equal sign. Might be stupid but I just didn't see it for about 30 minutes and maybe this could help someone!!!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-12T05:36:33.560

I don’t quite understand why everyone is saying unsigned. I have a special value in sql and also reported this error. I did it by converting this value to decimal.

```
cast(1000000000000000000 AS DECIMAL ( 35, 2 )) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T16:58:04.920

I actualy found that question why I was searching for solution. If you have same problem as I do, try disabling "unsigned" parameter.

It is quite possible that your code fails here:

```
(
quantity - COUNT( game_moblist.spawn_id )
) 
```

because if result of that matematic operation is less than zero it will fail with "unsigned" parameter.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-25T16:06:57.080

Additional way is to use [MySQL IF](http://dev.mysql.com/doc/refman/5.5/en/if.html) operator. This helped me when both columns were `BIGINT and Unsigned`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-09T18:54:41.607

I had similar problem, This error also come if our column have `0` value and we try to update it with `-1` value.

In my case MySQL query were Failing if `column1` is already have value `0`, i.e `column1 = 0`

For example:

```
UPDATE `table1` SET `column1` = `column1` - 1 WHERE `column2` = XYZ 
```

This give error

`BIGINT UNSIGNED value is out of range in ....`

To counter this problem

```
UPDATE `table1`
SET `column1` = (
    CASE WHEN `column1` < 1
    THEN 0
    ELSE (`column1` - 1)
end)
WHERE `column2` = 1
LIMIT 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-11T12:56:50.860

Another possible cause seems to be how the type of the result variable is allocated.

eg.

```
mysql> select (total_balance_06 * 0.045/(1-(1/1.045)^term_06) + unsec_instalments)/income from tbl_EUR_PDH; 
```

fails with

> ERROR 1690 (22003): BIGINT UNSIGNED value is out of range in '(1 - ((1 / 1.045) ^ `markov`.`tbl_EUR_PDH`.`term_06`))'

whereas

```
mysql> select (total_balance_06 * 0.045/(1.0-(1.0/1.045)^term_06) + unsec_instalments)/income from tbl_EUR_PDH; 
```

does what one would expect (note that I simply replace "1" by "1.0")

*Philippe*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-17T20:15:10.190

`sql_mode` worked in the MySQL client and Adminer, but not in CodeIgniter, where it counts. Casting didn't help either.

A simple arithmetic operation did the trick:

### error

```
id - id_ex*1000000000 = id_sm 
```

### works

```
id_sm + id_ex*1000000000 = id 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-08T22:43:18.147

In my case, I was subtracting two columns that were UNSIGNED and the result of some of the subtractions was negative. Setting both columns to SIGNED INT resolved it for me but this is just a temporary fix

# jakarta-ee - Java 服务器代码/Web 服务器中的基本/摘要身份验证实现

> ID：11698615
> 
> 赞同：1
> 
> 时间：2012-07-28T05:42:55.483
> 
> 标签：jakarta-ee, authentication, jaspic

我们需要在 Java Web 项目中支持基本身份验证和稍后的摘要身份验证。我的疑问是

*   基本/摘要身份验证是否是 Web 服务器（tomcat、jboss 等）中的配置。我们的用户/密码在 SQL 数据库中，我们通过数据服务获取这些。在这种情况下，我如何配置 Web 服务器以使用数据服务进行身份验证？
*   我是否需要在代码中明确处理基本/摘要身份验证？就像我将收到来自 Servlet 的身份验证请求并连接到数据服务进行身份验证一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T10:38:15.483

在 Java EE 中，安全性默认是声明性的。这意味着您只需通过一个名为 a 的抽象概念来指定您希望保护哪些资源`Role`。

除了 JB Nizet 的答案之外，JBoss AS 特定的登录模块（大致相当于 Tomcat 的领域实现）可以在这里找到：http: [//docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Login_Modules.html](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Login_Modules.html)

*Java EE 6 还支持标准化的身份验证模块*，这对于许多人来说是非常陌生的（看起来）。这些是基于文件的、基于 JDBC 的等，通常被认为是特定于应用程序服务器/容器的。

这是通过所谓的[JASPIC](http://www.jcp.org/en/jsr/detail?id=196) API（又名 JASPI，又名 JSR 196）完成的，参见例如：

*   [JBoss AS7：为 Web 应用程序启用 JASPI 身份验证](https://community.jboss.org/wiki/JBossAS7EnablingJASPIAuthenticationForWebApplications)
*   [使用 JASPI 实现自定义身份验证提供程序](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftsec_jaspi_map.html)
*   [Glassfish Web 层中的可插拔身份验证](https://blogs.oracle.com/monzillo/entry/pluggable_authentication_in_the_glassfish)

不幸的是，JASPIC/JASPI/JSR 196 的采用充其量似乎平淡无奇。目前，人们似乎更信任 AS 特定领域、登录模块以及您拥有更好的东西，或者只是不知道替代方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T05:57:30.407

基本和摘要式身份验证包含在 servlet 规范中。阅读规范或[本教程](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html)以了解其工作原理。

但是，凭据的存储位置和检查方式由每个容器自行决定。Tomcat 支持多种[Realm 实现](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html)（基于文件、基于 JDBC、基于 LDAP 等）。不知道 JBoss。

# php - PHP：文件到数组检查和替换

> ID：11698618
> 
> 赞同：4
> 
> 时间：2012-07-28T05:42:56.517
> 
> 标签：php, filter

我有这段代码，它应该首先将整个单词文件处理成一个数组，然后检查为文件中的任何单词传递的字符串。如果匹配，则替换为 *。

该文件类似于：

```
wordalex
wordjordan
wordjohn
.... 
```

不幸的是，我通过的句子没有以我期望的方式过滤。实际上，它根本没有发生任何事情。您能否查看给出的代码并提供帮助。

```
$comment = "the wordalex if this doesn't get caught!";
$filterWords = file('badwords.txt', FILE_IGNORE_NEW_LINES);
//print_r($filterWords);
$textToPrint = filterwords($comment,$filterWords );
echo $textToPrint;

function filterwords($text, $filterArray){
    $filterCount = sizeof($filterWords);
    for($i=0; $i<$filterCount; $i++){
        $text = preg_replace('/\b'.$filterWords[$i].'\b/ie',"str_repeat('*',strlen('$0'))",$text);
    }
    return $text;
} 
```

所以原句中实际上有吟游诗人词，但出于发布目的而被删除。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:13:36.457

在您的函数定义中，您调用单词 list `$filterArray`。

```
function filterwords($text, $filterArray){ 
```

但是在你的整个函数中，你调用它`$filterWords`。

在定义中将其重命名为`$filterWords`或将每个匹配项重命名为`$filterArray`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T05:53:36.803

`$filterWords`在忽略空行的同时构建。你实际上需要`FILE_IGNORE_NEW_LINES`两者`FILE_SKIP_EMPTY_LINES`

```
$filterWords = file('badwords.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

构建替换数组：

```
$replacements = array();
$patterns = array();

foreach ($filterWords as $word) {
    // ignore empty words, just in case
    if (empty($word)) continue;        

    $replacements[] = str_repeat('*', strlen($word));
    $patterns[] = "/\b$word\b/i";
} 
```

然后做`preg_replace()`：

```
$textToPrint = preg_replace($patterns, $replacements, $comment); 
```

这`Hello ******** NOTwordjohn`将从`Hello wordJoHN NOTwordjohn`.

# iphone - 如何在 iphone 中实现 Facebook 集成的社交框架？

> ID：11698619
> 
> 赞同：0
> 
> 时间：2012-07-28T05:43:05.063
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我正在一个项目中工作，我需要在 Facebook 中获取一个人的朋友列表。为此，我需要在我的项目中实施**社交框架。**当我寻找该框架时，我会在所有站点中获得共享工具包。 [获取共享工具包。](http://getsharekit.com/) 你能告诉我从哪里可以得到这个社会框架。如果可能的话，为我提供一个示例代码来实现我提到的上述概念。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:19:44.847

对于 Facebook，您可以使用官方**facebook-ios-sdk**（任何版本，但 facebook 发布 3.0beta - 比 2.0 更易于理解和灵活）

[教程在这里](http://developers.facebook.com/docs/mobile/ios/build/)

之后，最好阅读示例和其他内容。

你需要[从 github 下载 sdk](http://developers.facebook.com/docs/mobile/ios/build/)。- 这也很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:49:20.877

为了在您的项目中实现 Facebook，请使用 Facebook 最新的 FBGraph 方法。您必须先导入 FBGraph 和 JSON 解析器。然后在要添加shareview的类中添加以下方法:)

这里有一些代码可以帮助你，

```
-(void)buttonActionFb
{
//postFeedButton.hidden=NO;

NSString *client_id = @"130902823636657";
self.fbGraph =[[FbGraph alloc] initWithFbClientID:client_id];

[fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];

}

- (void)fbGraphCallback:(id)sender
 {
if ((fbGraph.accessToken==nil)||([fbGraph.accessToken length]==0)) {
    // NSLog(@"You pressed the 'cancel' or 'Dont Allow' button, you are NOT logged into Facebook...");

    //resart authentication process...
    [fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];            }    
else
{

    UIAlertView *alertfB=[[UIAlertView alloc] initWithTitle:@"Note" message:nil
                                                 delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alertfB show];
    //  NSLog(@"LOG IN FACEBBOK %@",fbGraph.accessToken);    

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:52:18.320

首先，您只需使用您的 Facebook/Twitter 帐户登录，然后单击按钮（您要在 Facebook 或 twitter 上共享数据的位置）并编写此代码

```
 NSArray *activityItems;
    activityItems = @[@"Text Here",self.imgview.image];
UIActivityViewController *activityController =
[[UIActivityViewController alloc]
 initWithActivityItems:activityItems
 applicationActivities:nil];

[self presentViewController:activityController
                   animated:YES completion:nil]; 
```

imgview 是 UIimageView 出口，这只是在 Facebook/Twitter 上分享您的文本和图像；-) 我认为这对您有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:50:48.807

与 IOS 6 集成的界面允许您在不导入任何外部框架的情况下发布到 FB，就像您用来呈现邮件界面一样，更多信息请访问：http: [//developer.apple.com/library/ios /#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233](http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-28T06:40:38.170

Social Framework 实际上是在 NDA 之下，所以如果你不是注册的开发者，你就不能得到它。

# depth-first-search - 我应该测量时间数以在有向图上进行拓扑排序吗？

> ID：11698620
> 
> 赞同：1
> 
> 时间：2012-07-28T05:43:14.557
> 
> 标签：depth-first-search, topological-sort

我正在使用 DFS 在有向图上实现拓扑排序而不修改图。所以我选择了一种时间测量方法。

IMO，只要有布尔标志指示所有顶点的开始或完成就足够了。

1.  如果我访问已开始但未完成的顶点，则它是一个后边和一个循环。
2.  如果我按完成的顺序保存顶点，则它是拓扑排序列表。

但是网上所有的文字都只是说要测量时间数，所以我不确定我的观点是否正确。（我是自学者，不擅长算法）我错过了什么吗？或者这只是一个概念性的描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-03T05:39:35.623

使用 DFS 可以轻松测量此问题的时间复杂度。由于该排序实现了与 DFS 相同的搜索，其时间复杂度为 O(V+E)，因此总体拓扑排序也是 O(V+E)，因为它只是在实现中添加了一个堆栈。

拓扑排序图通常使用邻接列表实现，这意味着您可以通过在线性时间 O(V) 中遍历列表一次来发现每个顶点的邻居。由于这是一个有向图，每个顶点的列表的总和大小是它的边总数，O(E)。由于您执行这两个过程，您将得到 O(V+E)。

考虑到你的时间复杂度现在是 O(V+E)，如果你能找到你的 V 和 E，你可以更准确地测量你的程序的时间。

# sql - 数据库项目可以使用 machine.config 连接字符串进行部署吗？

> ID：11698621
> 
> 赞同：3
> 
> 时间：2012-07-28T05:43:19.123
> 
> 标签：sql, sql-server, visual-studio

我正在为我的项目使用存储在 machine.config 中的连接字符串，因此我们不必重新配置每个环境，每个开发人员也不需要具有相同名称的数据库实例和数据库。

此设置的唯一问题是我们使用数据库项目，我看不到配置部署配置以使用相同连接字符串的方法。这意味着出于部署目的，每个开发人员都需要针对他们的环境调整部署项目。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-28T08:05:54.820

我认为这很简单，每个项目 web.config 都会覆盖 machine.config 设置，如果项目 .config 文件中不存在，那么它会继承，因此您可以通过不在项目配置文件中声明应存在的连接字符串部分来利用它在 machine.config 文件中，每个项目都应该调用 machine.config 文件中存在的部分的名称。

# ios - 激活搜索栏时如何显示 searchResultsTableView？

> ID：11698625
> 
> 赞同：6
> 
> 时间：2012-07-28T05:43:54.470
> 
> 标签：ios, uisearchdisplaycontroller

我正在实现一个`UISearchDisplayController`，我想`searchResultsTableView`在加载时使用 tableView 的内容（未过滤）填充 - 在输入文本之前。

这在我开始在 searchBar 中输入值时有效。

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    self.isSearching = YES;

    //tell the searchDisplayTableView to show here!

    [controller.searchBar setShowsCancelButton:YES animated:YES];
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller {
    self.isSearching = NO;
    [controller.searchBar setShowsCancelButton:NO animated:YES];
} 
```

有人能指出正确的方向吗？

**请不要回复“不要那样做”或“Apple 没有那样设计控件”。或者 ...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:32:44.093

搜索时，您需要使用过滤后的结果重新加载表格视图：在此方法中，只需调用表格视图`reloadData`：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    self.isSearching = YES;
    [yourTableView reloadData];
    [controller.searchBar setShowsCancelButton:YES animated:YES];
} 
```

并修改您的`numberOfSectionsInTableView`方法，例如：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(isSearching == YES)
   {
        yourDataArray = //filtered result;
   }
   else
   {
        yourDataAray = //unfiltered result;
   }
   return 1;
} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:30:10.147

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    // Here is a table we want to show in UISearchDisplayController
    XXRecentSearchDataSource *recentSearch = [XXRecentSearchDataSource recentSearchDataSource];
    recentSearch.delegate = self;

    // Setup default table view
    CGRect frame = CGRectMake(0.0f,
                       CGRectGetMaxY(controller.searchBar.frame),
                       CGRectGetWidth(self.view.bounds),
                       CGRectGetHeight(self.view.bounds) - CGRectGetHeight(controller.searchBar.bounds));

    // Setup temporary table and remember it for future use
    [_tempRecentSearchTableView release];
    _tempRecentSearchTableView = [[UITableView alloc] initWithFrame:frame
                                                               style:UITableViewStylePlain];
    _tempRecentSearchTableView.dataSource = recentSearch;
    _tempRecentSearchTableView.delegate = recentSearch;

    [self performSelector:@selector(removeOverlay) withObject:nil afterDelay:.0f];
}

- (void)removeOverlay
{
    [[self.view.subviews lastObject] removeFromSuperview];
    [self.view addSubview:_tempRecentSearchTableView];
} 
```

在某些情况下，您必须记住删除 _tempRecentSearchTableView。例如：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    // Remove temporary table view
    [_tempRecentSearchTableView removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T15:30:39.203

你知道搜索栏是否有焦点。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([_searchBar isFirstResponder]) {
              return [_filteredData count];
    } else {

        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
        return [sectionInfo numberOfObjects];

    }
} 
```

配置单元时做同样的问题

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"CustomCell";
    CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Entidad *e = nil;

    if ([_searchBar isFirstResponder])
    {
        e = [self.filteredData objectAtIndex:indexPath.row];

    }
    else
    {
        e = [self.fetchedResultsController objectAtIndexPath:indexPath];
    }

    cell.nameLabel.text = e.titulo;
    cell.thumbnailImageView.image = [UIImage imageNamed:@"password-50.png"];
    cell.dateLabel.text = e.sitio;

    return cell;
} 
```

设置过滤器参数

```
-(void)filter:(NSString*)text
{

    _filteredData = [[NSMutableArray alloc] init];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Entidad" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor* sortDescriptor = [[NSSortDescriptor alloc]
                                        initWithKey:@"titulo" ascending:YES];
    NSArray* sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    if(text.length > 0)
    {

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(titulo CONTAINS[c] %@)", text];
        [fetchRequest setPredicate:predicate];
    }

    NSError *error;

    NSArray* loadedEntities = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
    _filteredData = [[NSMutableArray alloc] initWithArray:loadedEntities];

    NSLog(@"%@", _filteredData);

    [self.tableView reloadData];
}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    [self filter:text];
}

-(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar{

    [self filter:@""];

    [_searchBar resignFirstResponder];
    [_searchBar setText:@""];
    [_tableView reloadData];
}

- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{

    [_searchBar setShowsCancelButton:YES animated:YES];
}

-(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    [_searchBar setShowsCancelButton:NO animated:YES];
} 
```

我希望能为您服务，我的英语很有限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T22:20:44.890

苹果的控制就是这样工作的。我通过实现一个单独的控制器（称为搜索显示控制器）对象来解决它，该控制器是一个搜索栏委托并将谓词应用于数据源。这样，表格视图被过滤为“内联”。

# actionscript-3 - 测验应用程序 + 单例类 as3

> ID：11698630
> 
> 赞同：1
> 
> 时间：2012-07-28T05:45:16.383
> 
> 标签：actionscript-3, oop, singleton

我对单选按钮有疑问，因为当我从单选按钮所在的阶段删除实例时，如果我再次创建该实例，单选按钮会保留最后的选择。

（我用西班牙语写了这门课，如果你在识别概念上有问题，请问我）

类（ crearPregunta.as 或 askQuestion.as ）

```
package src.com.akkadian 
```

{

```
import fl.controls.RadioButtonGroup;
import flash.display.DisplayObject;
import flash.display.MovieClip;
import flash.events.*;
import flash.events.MouseEvent;
import flash.net.*;
import flash.text.*;
import flash.utils.Timer;
import flash.xml.*;
import src.com.akkadian.manipularXML;

public class crearPregunta extends MovieClip
{

    private static var _instance:crearPregunta = null;

    private var xmlPath:String;
    private var radioGroup1:RadioButtonGroup = new RadioButtonGroup("Questions");
    private var xmlLoader:URLLoader = new URLLoader();
    private var instanciaXML:manipularXML;
    protected var time:Timer;
    private var rs:String;
    private var resp:XMLList;
    private var re:XMLList;
    private var pre:XMLList;
    private var opSeleccionada:Number;
    private var resultado:Boolean = false;

    public function crearPregunta()
    {

    }

    public static function getInstance():crearPregunta
    {

        if (_instance == null)
        {

            _instance = new crearPregunta();

        }

        return _instance;
    }

    private function generarContenido()
    {

        // Crea the XML instance from manipularXML class
        this.instanciaXML = manipularXML.generarInstancia();

        // Send the path of the file
        this.xmlPath = "src/com/akkadian/preguntas.xml";

        // Add the listener to proceed when the load is finished        
        xmlLoader.addEventListener(Event.COMPLETE, inXML);
        xmlLoader.load(new URLRequest(this.xmlPath));

        // adding a listener to the button sendResponse
        enviarRespuesta.addEventListener(MouseEvent.CLICK, recibirRespuesta);
        enviarRespuesta.buttonMode = true;

    }

    public function validarRespuesta(opcionSeleccionada:String):Boolean
    {
        // Option chosen
        opSeleccionada = Number(opcionSeleccionada);

        // Generate the content
        generarContenido();

        // Send the result
        return resultado;
    }

    private function inXML(e:Event):void
    {
        // Add the radiobuttons to an Array
        var radios:Array = [casoA, casoB, casoC];

        // Obtain the data from the XML
        var data = instanciaXML.obtenerInfo(e.target.data);

        for each (var nodo:XML in data.pregunta)
        {

            if (nodo.@id == opSeleccionada)
            {
                // Keep the answer for the option chosen
                resp = data.pregunta[opSeleccionada - 1].respuesta;

                // Keep the value for the option chosen
                re = data.pregunta[opSeleccionada - 1].respuesta.@valor;

                // Keep the question
                pre = data.pregunta[opSeleccionada - 1].@pre

                // add the value of the question to the dinamic textfield
                question.text = pre;

                for (var u:uint = 0; u < radios.length; u++)
                {

                    radios[u].group = radioGroup1;
                    radios[u].textField.multiline = true;
                    radios[u].textField.wordWrap = true;
                    radios[u].textField.width = 230;
                    radios[u].textField.height = 100;
                    radios[u].textField.autoSize = TextFieldAutoSize.LEFT;

                    // Add the answers to the labels
                    radios[u].label = resp[u];

                    // Add the answers to the values
                    radios[u].value = re[u];

                }

            }

        }
    }

    private function recibirRespuesta(m:MouseEvent)
    {

        for each (var tre:XML in re)
        {
            // if the value of the answer is equal to the value stored
            if (this.radioGroup1.selection.value == re)
            {
                // Save the result as true
                this.resultado = true;

                // Add the value of the answer to the textfield included on this Instance
                result_txt.text = "Correcto";
            }
            else
            {
                // Save the result as false
                this.resultado = false;

                // Add the value of the answer to the textfield included on this Instance
                result_txt.text = "Incorrecto";
            }
        }

        // Add a function to create a timer
        agregarTimer();

    }

    private function agregarTimer()
    {
        // Setup the timer
        time = new Timer(1000, 1);
        time.addEventListener(TimerEvent.TIMER_COMPLETE, cerrarTimer);
        time.start();

    }

    private function cerrarTimer(t:TimerEvent)
    {
        // Just for information, I verify which are the instances that at present ran in the Main instance
        Main.Instancia.obtenerNombreHijos();

        // Remove the instance askQuestion from the Main
        Main.Instancia.removeChildAt(2);

        // I certify that the instance is deleted
        Main.Instancia.obtenerNombreHijos();

        // I change the instance of the xml class to null
        instanciaXML = null;

    }

} 
```

}

结果：现在发生了什么？

1.  用户运行琐事：首先，选择开始选项（创建选项网格）
2.  用户选择一个选项（创建 askQuestion 实例）
3.  当用户从单选按钮中选择选项时（结果显示在 result_txt.text 上）
4.  定时器被执行
5.  从 Main 类中删除实例（ askQuestion ）
6.  如果用户选择另一个选项，则问题和答案会正确显示，但是单选按钮会保持之前选择的选项，并且 result_txt.text 会显示此选择的结果。这是错误的，因为不必进行任何选择。

* * *

**我从this..我有另一种情况..我有这个：静态实例a（这里创建实例c）静态实例b（这里是操作的结果。获得结果时将删除该实例）实例c（结果是显示）如果实例是在实例 a 中创建的，我该如何将信息从实例 b 发送到实例 c**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:08:51.183

要在 Flash 中删除某些内容，或者换句话说，为垃圾收集器准备好它，请尝试从对象中删除所有侦听器，将其从舞台中删除，然后将其设置为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:06:26.543

我相信问题是您每次都重复使用相同的单选按钮组，但您没有重置该单选按钮组的 selectedIndex 或 selectedValue 。我相信这会解决问题：

```
 radioGroup1.selectedIndex=-1;
            for (var u:uint = 0; u < radios.length; u++)
            {

                radios[u].group = radioGroup1;
                radios[u].textField.multiline = true;
                radios[u].textField.wordWrap = true;
                radios[u].textField.width = 230;
                radios[u].textField.height = 100;
                radios[u].textField.autoSize = TextFieldAutoSize.LEFT;

                // Add the answers to the labels
                radios[u].label = resp[u];

                // Add the answers to the values
                radios[u].value = re[u];

            } 
```

# php - PHP函数运行一个函数（基于字符串）？

> ID：11698632
> 
> 赞同：1
> 
> 时间：2012-07-28T05:46:11.413
> 
> 标签：php, function

是否有一个 PHP 函数或命令运行基于字符串、数组或类似的函数？基本上，如果字符串“时间”被传递，我想`time()`被返回。理想情况下，我希望它也支持传递的参数。不过，我只是希望这适用于个别功能。出于显而易见的原因，我不想`eval()`使用整个代码块。

是否存在这样的东西——或者，最好是——它是 PHP 原生的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T05:47:47.897

尝试 call_user_func() [http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php)

第一个参数是一个表示函数名的字符串。第二个参数可以是单个参数，也可以是参数数组。

编辑：

正如您所要求的，它甚至会支持像 time() 这样的本机函数。像这样试一试：

```
echo call_user_func( 'time' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T06:05:41.897

您可以使用包含函数名称的变量调用函数，也可以将任何参数传递给该函数。尝试：

```
<?php

$func = 'strtoupper';

$res = $func('i am uppercase');

echo $res; // I AM UPPERCASE 
```

参见[变量函数](http://php.net/manual/en/functions.variable-functions.php)和[变量变量](http://www.php.net/manual/en/language.variables.variable.php)。如前所述，[`call_user_func()`](http://php.net/call_user_func)也可以。

为了安全起见，您可以致电：

```
if (function_exists($func)) { ... } 
```

在调用函数之前，请确保您避免错误。您也可以使用`ReflectionFunctionAbstract::getNumberOfParameters`来确定函数接受的参数数量。

# php - 为我的网站制作一个高效的搜索引擎

> ID：11698638
> 
> 赞同：3
> 
> 时间：2012-07-28T05:46:47.320
> 
> 标签：php, database-design, search-engine

我的数据库包含数千万种产品，因此我需要一种高效的搜索技术来加快我的响应速度。最初，我尝试根据字母或查询的一些初始字符制作一些表格。但是，这会失败很多次，例如，如果用户搜索“ipod touch”而不是“apple ipod touch”。我可以使用 trie 或其他数据结构来实现吗？Google 如何跟踪如此多的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T06:06:53.887

制作自己的搜索算法很困难。当我不得不为一个项目做类似的事情时，我只是逐列搜索整个数据库，搜索所有，然后搜索任何术语；它很粗糙，但它很有效，因为数据库实际上永远不会容纳超过一万个条目。鉴于您的数据库的大小，您最好查看一些预制的搜索引擎：这些东西写得非常好并且优化了。正如 Joyce Babu 所建议的，Apache Solr 就是其中之一。我想提出的另一个建议是[Sphinx](http://sphinxsearch.com/)。它（根据维基百科）在 craigslist 上使用，每天提供 2 亿次搜索；这种力量应该足以处理你想要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:52:12.783

您需要的是全文搜索。您可以尝试`FULLTEXT`在 MySQL 中使用索引并执行`MATCH AGAINST`查询。

但我认为使用 Apache Solr 会更好。它快速、可扩展并提供更好（相关）的结果。

# android - 发生错误请稍后再试（phonegap facebook plugin-android）

> ID：11698642
> 
> 赞同：2
> 
> 时间：2012-07-28T05:47:02.733
> 
> 标签：android, facebook, cordova

每个人..我在运行 phonegap facebook 插件时遇到一个问题。我已经从 GITHUB 下载了 phonegap facebook sdk 并且我已经按照项目文档中给出的步骤进行操作。我所做的步骤是

1) 我用 phonegap 版本 1.4.1 创建了 phonegap 项目

2) 我从 GitHub 下载了 phonegap 版本 1.4.1 的 facebook connect 插件

3）在资产www文件夹中我有这个文件

资产->www->

*   facebook_js_sdk.js

*   pg-plugin-fb-connect.js

*   phonegap-1.4.1.js

*   索引.html

4）我已将 ConnectPlugin.java 放在包名称**“com.phonegap.facebook”下的 src 文件夹中**

5）我把这个放在`<plugin name="com.phonegap.facebook.Connect" value="com.phonegap.facebook.ConnectPlugin"/>`res->xml->plugin.xml 文件下

6）在libs文件夹下我有这三个文件

*   facebook_js_sdk.js

*   facebook-js-patch（我直接从 GitHub 项目复制了这个补丁文件）

*   phonegap.jar

7）最后在我的清单文件中我给出了这个`<meta-data android:name="APP_ID" android:value="APP_SECRET" />`

因此，当我单击登录按钮 Facebook 登录对话框弹出窗口时，我已按照上述所有步骤操作，但是当我提供用户名密码而不是登录时，我一直收到此错误，如下图所示

![在此处输入图像描述](../Images/6cec01440d1b6b1557355ef5b5da7877.png)

当我单击重试按钮时，页面会直接重定向到 facebook 主页，而不是返回到我的应用程序....

另一个问题是点击我按钮也不起作用它显示这样的错误

![在此处输入图像描述](../Images/3a906905134160aaf049a6efeeb776e7.png)

我被这个问题困住了..是因为facebook插件还是我在哪里出错了？

如果有人以前遇到过它，请指导我在此先感谢

**编辑**

我解决了有关登录状态的问题...我没有在 html 文件中初始化我的 app_id...需要记住的另一件事是我们不需要提供`<meta-data android:name="APP_ID" android:value="APP_SECRET" />`清单文件...

当我点击我的按钮时仍然有一个查询它向我显示错误，正如你在上面的警报消息中看到的那样......如何解决这个问题？

**编辑（所有查询已解决）**

me 函数现在从**ConnectPlugin.java**类也可以正常工作我将函数**getResponse()**更改为下面提到的代码

```
public JSONObject getResponse() {
String response = "{" + "\"status\": \""
        + (facebook.isSessionValid() ? "connected" : "unknown") + "\","
        +
        // "\"session\": {" + "\"access_token\": \""
        // + facebook.getAccessToken() + "\"," + "\"expires\": \""
        // + facebook.getAccessExpires() + "\","
        // + "\"session_key\": true," + "\"sig\": \"...\","
        // + "\"uid\": \"" + this.userId + "\"" +

        "\"authResponse\": {" +

        "\"accessToken\": \"" + facebook.getAccessToken() + "\"," +

        "\"expiresIn\": \"" + facebook.getAccessExpires() + "\"," +

        "\"session_key\": true," +

        "\"sig\": \"...\"," +

        "\"userId\": \"" + this.userId + "\"" +

        "}" + "}";

try {
    return new JSONObject(response);
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
return new JSONObject(); 
```

}

现在我也可以获取朋友列表有关此的更多信息，您可以检查此.... [FB.api（'/me'）总是在phonegap android中给出错误代码：2500](https://stackoverflow.com/questions/10026875/fb-api-me-always-giving-error-code2500-in-phonegap-android)

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:16:20.943

问题解决了。我没有在 html 文件中初始化我的 app_id ......需要记住的另一件事是我们不需要提供`<meta-data android:name="APP_ID" android:value="APP_SECRET" />`清单文件......

我希望它有帮助

# html - 输入字段无响应

> ID：11698644
> 
> 赞同：1
> 
> 时间：2012-07-28T05:47:21.830
> 
> 标签：html, css

出于某种原因，我的输入字段和我的提交按钮不起作用。我的来源和结果在[**这里**](http://jsfiddle.net/VPnSm/2/)

我究竟做错了什么？是什么导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:53:27.560

在您的 CSS 中，`z-index: -10`将 #content-box 放在整个正文后面。删除该行允许输入文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:08:34.057

`z-index`属性仅适用于定位元素。这意味着 - 任何`position`除外`static`。在您的示例中（http://jsfiddle.net/VPnSm/4）`#triage`没有任何位置，但有一个`z-index`不起作用。

我对你的小提琴做的是这样的：

*   添加`position: relative`到`#triage`
*   `z-index`将属性更改`#content-box`为 0（您真的需要它是负数吗？）
*   为元素添加`position: relative;`和`z-index`属性`input``#content-box`

这导致了这个小提琴，`input`元素工作的地方:)

[http://jsfiddle.net/skip405/VPnSm/6/](http://jsfiddle.net/skip405/VPnSm/6/)

# c# - 使用来自另一个线程的数据的 DataBinding Grid

> ID：11698646
> 
> 赞同：1
> 
> 时间：2012-07-28T05:47:37.590
> 
> 标签：c#, winforms

我有一个数据结构（bindingList），它从另一个线程接收数据，我已经绑定到一个抛出跨线程异常的dataGridView。如何调用 dataGridView 是 dataBound？这是一个winForm项目。为了清楚起见，这是我正在谈论的示例：

```
DataStore dStore = new DataStore();
dStore.ReceiveData += new ReceiveDataEventHndlr(data);
BindingList<mydataobj> myDataStructure = new BindingList<mydataobj>();
dataGridView.DataSource = myDataStructure;

// here's my cross threading issue
private void data(string s, double d)
{
    myDataStructure.Add(new MyDataObj(s,d));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T05:52:34.113

[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)从另一个线程修改控件时需要使用：

```
private void data(string s, double d)
{
    if (this.InvokeRequired) {
        this.Invoke(new Action( () => {data(s, d);} ));
        return;
    }
    myDataStructure.Add(new MyDataObj(s,d));
} 
```

首先，您检查是否[`Control.InvokeRequired`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx). 如果是这样，则`Invoke()`使用委托调用相同的函数，然后返回。它将从 GUI 线程重新进入函数，`InvokeRequired`将是`false`，并且控件将被更新。

# tridion - 如何在 aspx 页面中填充出版物和组件

> ID：11698648
> 
> 赞同：1
> 
> 时间：2012-07-28T05:48:11.127
> 
> 标签：tridion, tridion-2011

我在功能区“SelectCp”上创建了一个按钮。

按钮的 OnClick 我正在启动一个自定义 aspx 页面。

自定义 aspx 页面有一个下拉菜单，其中包含类似的项目。

1.  选择CP
2.  ETC

现在，当用户选择“选择 CP”选项时，我需要在 aspx 页面上的列表项中填充所有发布。当用户选择一个出版物时，我需要在另一个列表中填充所有组件。

谁能给一个想法如何进行？

**添加**

我正在像这样进行，但它没有在 aspx 页面的列表框中给出发布列表。

```
protected void ddSelectOption_SelectedIndexChanged(object sender, EventArgs e)
    {
        //CommonTridionTools objCmnUnPub = new CommonTridionTools();
        CoreServiceSession client = new CoreServiceSession();
        SessionAwareCoreServiceClient csClient = client.GetClient();
        ReadOptions readoption = new ReadOptions();
        List<string> PublicationList = new List<string>();
        List<string> ComponentList = new List<string>();

        if (ddSelectOption.SelectedItem.Equals("Select CP"))
        {
            FolderData RootFolder =(FolderData)csClient.Read(tridionPageId, readoption);
            var filter = new OrganizationalItemItemsFilterData
            {
                Recursive = true,
                ItemTypes = new ItemType[] { ItemType.Publication,ItemType.Component, ItemType.ComponentTemplate },
            };
            XElement CompList = csClient.GetListXml(RootFolder.Id,filter);

            foreach (var comp in CompList.Elements())
            {
                PublicationData Publication =(PublicationData)csClient.Read(comp.Attribute("ID").Value, readoption);
                var MetadataXML = new XmlDocument();
                MetadataXML.LoadXml(Publication.Metadata);
                PublicationList.Add(Publication.Id)
                lbPublication.DataSource = PublicationList;

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:17:42.497

[我们在PowerTools 2011 开源项目](http://code.google.com/p/tridion-2011-power-tools/)中提供了此类发布下拉列表和其他控件的示例。请参阅**示例扩展**源：

*   [标记](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Example/Example.aspx)
*   [脚本](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Example/Example.js)
*   [服务代码](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Model/Services/Example.svc.cs)

首先查看这些内容，然后分享您的代码或在您准备好后开始另一个问题。

请注意，该项目的好[志愿者](http://code.google.com/p/tridion-2011-power-tools/wiki/Volunteers)创建了一个[基类](http://code.google.com/p/tridion-2011-power-tools/wiki/BaseClass)来完成一些工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:54:26.917

允许用户选择项目的一个很好的例子可以在[项目选择器扩展](https://sdltridionworld.com/community/2011_extensions/itemselector.aspx)中找到。

它具有您要求的大部分部分，但不一定采用复制/粘贴格式。如果您无法根据自己的需要对其进行修改或某个部分不清楚，请研究它并与我们联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T10:15:14.343

这个项目选择器扩展当然很好，但由于出版物的数量不会经常变化，您也可以考虑从配置文件中检索此列表的数据。

这样，您还可以更轻松地仅使用适当的出版物过滤此列表，而不仅仅是用户有权访问的出版物。

# ios - CoreText 上的阿拉伯语对齐方式

> ID：11698649
> 
> 赞同：2
> 
> 时间：2012-07-28T05:48:22.703
> 
> 标签：ios, arabic, core-text

我是苹果 iPhone 开发人员，我想创建应用程序来显示阿拉伯语文本，我使用 CoreText 来显示我的文本，但结果不是我想要的。两个阿拉伯语单词之间的对齐对齐单词中断了，我想在两个单词之间画 kashidas，我该怎么做？请帮我

# html - 如何使用 Backbone.js 处理返回？或者如何在不再次调用 fetch 的情况下呈现较早访问的页面？

> ID：11698650
> 
> 赞同：0
> 
> 时间：2012-07-28T05:48:26.983
> 
> 标签：html, mobile-website, backbone-routing

我正在使用backbone.js 创建一个Web 应用程序，其中有多个渲染良好的视图。主要问题是处理后退按钮事件。当我按下后退按钮时，早期视图会正确呈现，但遵循调用 fetch() 的相同过程。我不希望调用 fetch() 而是使用接收到的较早数据呈现视图。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:46:48.507

您本质上希望对`fetch`. 有几种方法，一种是将它分配给这样的实例：

```
myAction: function() {
    if (!this.collection) {
        this.collection = new MyCollection();
        this.collection.fetch()
    }
    view = new View({collection: this.collection});
    // ... render ...
} 
```

# php - 是否有 google 或 yahoo api 发送电子邮件？

> ID：11698654
> 
> 赞同：0
> 
> 时间：2012-07-28T05:49:54.737
> 
> 标签：php, google-api, email, yahoo-api

我有一个 PHP Web 应用程序，它需要通过用户的 gmail/yahoo 帐户“为”用户发送电子邮件。我们已经为 yahoo 和 gmail 存储了用户的访问令牌。

基本上，从应用程序发送的所有邮件都应该来自用户的 yahoo/gmail 帐户，并且应该出现在他们的“已发送邮件”文件夹中。

那么是否有任何雅虎或 gmail api 允许我使用用户访问令牌发送结束电子邮件？

我确实为雅虎找到了这个：http: [//developer.yahoo.com/mail/docs/user_guide/SendMessage.html](http://developer.yahoo.com/mail/docs/user_guide/SendMessage.html)。这个用对了吗？？gmail有类似的api吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T22:06:48.683

我相信这可能很有趣，刚刚上线：[https ://developers.google.com/gmail/api/](https://developers.google.com/gmail/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:43:27.130

请参阅以下文档，我认为它可能对你有用

[https://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

# c - C 文件处理：文本不附加在文件末尾

> ID：11698660
> 
> 赞同：0
> 
> 时间：2012-07-28T05:51:34.120
> 
> 标签：c, file-handling

该程序应查看 的每一行，`file1`然后查看 . 中是否存在完全相同的行`file2`。如果是，则将该行复制到一个名为 output 的新文件中。

说，以下是文件的内容（可能是句子，但为简单起见，我放了数字。）-

```
 file1              file2
    1                 2
    2                 4
    3                 15
    4                 6
    5                 11
    6                 8
    7
    8
    9 
```

然后`output`文件应该看起来像 -

```
 (Expected) output
              2
              4
              6
              8 
```

在 shell 内部，我可以看到 printf`output`按预期打印，但是 fprintf 颠倒了顺序，我不明白为什么？打印到输出文件的输出是 -

```
 output
    8
    6
    4
    2 
```

这是代码 -

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    FILE *file1, *file2, *output;
    int c;

    /*Creating buffers where data will be stored for comparison*/   
    char buffer1[999], buffer2[999];

    /*Settig the buffer characters array to 0*/
    memset(buffer1, 0, sizeof(buffer1));
    memset(buffer2, 0, sizeof(buffer2));

    /*Open output file in "w" so that it clears the file*/
    output = fopen("output", "w");
    /*Open file1 and then save the line inside buffer1 (within while loop)*/
    file1 = fopen("file1", "r");
    /*Read each character in file until End Of Line*/
    while((c = getc(file1)) != EOF)
    {
        int i = 0;
        /*Save each new line of file1 in buffer1 for comparison*/
        while(c != '\n')
        {
            buffer1[i++] = c;
            c = getc(file1);
        }

        /*Open file2 and then save it's line in buffer2 (withing while loop)*/      
        file2 = fopen("file2", "r");
        int ch;

        while((ch = getc(file2)) != EOF)
        {
            i = 0;
            while(ch != '\n')
            {
                buffer2[i++] = ch;
                ch = getc(file2);
            }

            /*Compare lines of file1 against each line of file2*/
            if(strcmp(buffer1,buffer2) == 0)
            {
                /*Save similar lines in a file named output*/
                output = fopen("output", "a");
                fprintf(output,"%s\n", buffer2);
                printf("%s\n", buffer2);
                break;
            }
            /*Reset the buffer*/
            memset(buffer2, 0, sizeof(buffer2));
        }

        memset(buffer1, 0, sizeof(buffer1));
    }

    /*Close the output file if there were any comparison made i.e. if file was opened*/
    if(output != NULL)
    {
        fclose(output);
    }

    /*Close other files*/
    fclose(file1);
    fclose(file2);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T06:00:43.503

您*在每个差异处**打开* ，最后*只关闭一次，*这是错误的，可能会导致您的问题。尝试打开一次，也许在循环之前。如果您没有发现任何差异，您可以将其删除，以避免出现空文件。`output` **`output`**

# mysql - 如何在 mysql 查询外汇中打印范围之间的数字：范围 0 到 20(012..20)。

> ID：11698661
> 
> 赞同：0
> 
> 时间：2012-07-28T05:51:36.647
> 
> 标签：mysql

我想使用 mysql 查询打印范围之间的数字，例如 0 到 20 (012345..20)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:20:09.897

在自定义存储过程之外，您不能仅从查询中选择基于最小和最大参数的数字范围。

您可以做的是创建一个范围表，在每一行上存储数字：

```
CREATE TABLE numbers (
    num INT NOT NULL
); 
```

然后插入数字：（1-20 或您认为需要的多高）：

```
INSERT INTO numbers VALUES (0),  (1),  (2),  (3),  (4),  
                           (5),  (6),  (7),  (8),  (9),  
                           (10), (11), (12), (13), (14), 
                           (15), (16), (17), (18), (19), 
                           (20); 
```

然后你可以像这样选择一系列数字：

```
SELECT num
FROM   numbers
WHERE  num BETWEEN 0 AND 20 
```

# objective-c - 尝试通过在 UIImageView 中切换图像来创建两个图像的动画

> ID：11698662
> 
> 赞同：0
> 
> 时间：2012-07-28T05:51:41.443
> 
> 标签：objective-c, ios, ios5, uiimageview

所以，我最初用来设置图像的代码（它通过蓝牙从另一个 iOS 设备接收数据）

```
 UIImage *receivedImage = [UIImage imageWithData:data];
        if(receivedImage != nil)
        {
            NSLog(@"Image received is not nil.");
        }
        self.imageView.image = receivedImage;
        UIImageView *iv = [[UIImageView alloc] initWithImage:receivedImage];
        [self.view addSubview:iv];

        [self.photoAlbum addObject:receivedImage]; 
```

设置图像就像一个魅力。

但是，当我尝试将其添加到 NSMutableArray 属性“专辑”时，图像不会改变。

```
 -(void)stereoscopicIterationA {
    self.imageView.image = nil;
    self.imageView.image = [self.photoAlbum objectAtIndex:1];
    NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(stereoscopicIterationB) userInfo:nil repeats:NO];
    NSLog(@"Image 1");

}

-(void)stereoscopicIterationB {
    self.imageView.image = nil;
    self.imageView.image = [self.photoAlbum objectAtIndex:0];
    NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(stereoscopicIterationA) userInfo:nil repeats:NO];
    NSLog(@"Image 0");
}

-(void)openAlbum:(id)sender
{

    if([self.photoAlbum objectAtIndex:0] != nil && [self.photoAlbum objectAtIndex:1] == nil)
    {
    self.imageView.image = [self.photoAlbum objectAtIndex:0];

    [self dismissModalViewControllerAnimated:NO];
    }
    else if([self.photoAlbum objectAtIndex:0] !=nil && [self.photoAlbum objectAtIndex:1] !=nil ){
        //Set up NSTimer to swap self.imageView.image back and forth between 0 and 1 of photoAlbum.
        NSLog(@"Timer set up");
        NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(stereoscopicIterationA) userInfo:nil repeats:YES];

    } 
```

有任何想法吗？

更具体地说，看起来图像根本没有添加/保存到专辑 NSMutableArray 中。程序因越界错误 [0 .. 0] 而崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:12:48.480

如果您只想要两个图像的动画，您可以制作它们的数组并将其设置为`animationImages`属性，然后调用`startAnimating`.

```
self.imageView.animationImages = self.photoAlbum;
[self.imageView startAnimating]; 
```

然后你也可以设置`animationDuration`和`animationRepeatCount`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:16:30.937

听起来，从更新到您的问题，好像`self.photoAlbum`是`nil`. 您需要确保已分配数组，并将其分配到`self.photoAlbum`.

做这个：

```
self.photoAlbum = [[NSMutableArray alloc] init]; 
```

在尝试添加到数组之前。

# ruby - 创建 100 个事物的哈希，每个值都有随机值

> ID：11698663
> 
> 赞同：0
> 
> 时间：2012-07-28T05:51:56.883
> 
> 标签：ruby, iterator, hash

我正在构建一个包含 100 个项目的散列，并且我还有一个随机数生成器，它生成 0 到 100 之间的 100 个随机值。

我想以连续的顺序遍历我的数字 0..100 并将它们分配给哈希的键。

然后我想遍历 100 个随机数并将它们分配给哈希值。

```
hash = {}
(0..100).each {|e| puts e} #just prints out the values
@numbers = 100.times.map{ 0+Random.rand(0..100)} 
```

这就是我到目前为止所得到的。任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T06:06:35.560

```
h = {}
a = (1..100).to_a
100.times { |i| h[i+1] = a.delete_at(Random.rand(a.size)) } 
```

或者：

```
keys = (1..100).to_a
vals = keys.shuffle
hash = Hash[keys.zip(vals)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T06:05:16.133

```
hash = {}
100.times {|n| hash[n]=rand(101)} 
```

第一行将初始化空哈希（如您在上面所做的）。第二行分配 0 到 99 作为散列的键，以及 0 到 100 之间的随机值。

`times`是属于 Integer 类的方法。给定一个块，它将在每个连续的整数`n`次中传递。

# matlab - 如何通过考虑其他矩阵来识别矩阵的值

> ID：11698664
> 
> 赞同：1
> 
> 时间：2012-07-28T05:51:57.480
> 
> 标签：matlab, matrix

我这里有一些矩阵：

```
A = [ 1 2 3 4 0 0 0;
      0 0 1 2 3 4 0]
B = [ 0 1 2 3 4 0 0;
      0 0 0 1 2 3 4]
C = [ 1 2 3 4 0 0 0;
      0 1 2 3 4 0 0] 
```

我将上面的矩阵称为“初始矩阵”。然后我在这里有“矩阵D”：

```
D = [ 1 2 3 4 0 0 0;
      1 2 3 4 0 0 0] 
```

其中我必须确定矩阵 D 中每一行中有多少值“1”，这与矩阵 A、B、C 中每一行中值“>3”的列不同，矩阵 A、B、C 中的每一行已重新排列，如下例所示。

```
1 2 3 4 0 0 0
0 0 1 2 3 4 0
    0 1 2 3 4 0 0 
    0 0 0 1 2 3 4
        1 2 3 4 0 0 0
        0 1 2 3 4 0 0 

            1 2 3 4 0 0 0
            1 2 3 4 0 0 0 
```

我希望我的答案是 0，因为矩阵 D 中第一行和第二行的值 1 是同一列，同一列中的某个值中的一个值为 1，其值 > 3 (4)。

像这样的人回答的代码是什么？请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:38:09.873

让我从一个简单的解决方案开始。请确认这是否是预期的行为：

首先，我们排列矩阵 A、B、C、D，如您所示：

```
A = [ 1 2 3 4 0 0 0;
      0 0 1 2 3 4 0];
B = [ 0 1 2 3 4 0 0;
      0 0 0 1 2 3 4];
C = [ 1 2 3 4 0 0 0;
      0 1 2 3 4 0 0];
D = [ 1 2 3 4 0 0 0;
      1 2 3 4 0 0 0];

X = zeros(8,13);
X(1:2,1:7) = A;
X(3:4,3:9) = B;
X(5:6,5:11) = C;
X(7:8,7:13) = D; 
```

这给了我们：

```
X =
     1     2     3     4     0     0     0     0     0     0     0     0     0
     0     0     1     2     3     4     0     0     0     0     0     0     0
     0     0     0     1     2     3     4     0     0     0     0     0     0
     0     0     0     0     0     1     2     3     4     0     0     0     0
     0     0     0     0     1     2     3     4     0     0     0     0     0
     0     0     0     0     0     1     2     3     4     0     0     0     0
     0     0     0     0     0     0     1     2     3     4     0     0     0
     0     0     0     0     0     0     1     2     3     4     0     0     0 
```

现在我们可以重复使用您[上一个问题](https://stackoverflow.com/a/11653887/97160)的答案来进行计数：

```
numPerRow = sum(X(7:8,all(X(1:6,:)<4))==1,2)
num = sum(numPerRow) 
```

矩阵的两行都`D`为零，因此总和也为零：

```
numPerRow =
     0
     0

num =
     0 
```

# asp.net-mvc-3 - MVC3 Web Grid 在列列表的开头添加操作链接

> ID：11698665
> 
> 赞同：2
> 
> 时间：2012-07-28T05:51:59.207
> 
> 标签：asp.net-mvc-3, webgrid

我正在使用 MVC3 WebGrid 控件来呈现实体列表。假设我有一个类似索引的页面，它呈现用户列表、项目、订单等。所有这些实体都有一个名为 ID 的列。

WebGrid 看起来不错，我唯一想要的是，一旦呈现列表，我想在所有其他列之前添加 3 个操作链接编辑、删除、详细信息。

添加以下代码有效，但我不想在所有页面中重复此代码：

```
@grid.GetHtml(columns: grid.Columns(
                grid.Column(header: "",
                   style: "text-align-center",
                       format: (item) => new
                        HtmlString(Html.ActionLink("Edit", "Edit", new { ID = item.ID     }).ToString() + " | " +
                                    Html.ActionLink("Details", "Details", new { ID = item.ID }).ToString() + " | " +
                                    Html.ActionLink("Delete", "Delete", new { ID = item.ID }).ToString()
                                   )
            ),
            grid.Column("FirstName"),
            grid.Column("LastName"),
            grid.Column("EmailAddress")
        ) 
```

基本上我想说的是@Grid.Render(Model) ...它应该创建前3个动作链接，它们会渲染模型的所有列。

我知道有 JQuery 网格和 MVCContrib 等，但请不要选择它们。

任何意见和提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:02:56.400

您可以为网格编写自定义扩展方法：

```
using System.Linq;
using System.Web;
using System.Web.Helpers;
using System.Web.Mvc;
using System.Web.Mvc.Html;

public static class WebGridExtensions
{
    public static IHtmlString MyGetHtml(this WebGrid grid, HtmlHelper html)
    {
        var columns =
            (from n in grid.ColumnNames
             select new WebGridColumn { ColumnName = n, CanSort = true }
             ).ToList<WebGridColumn>();
        columns.Insert(0, grid.Links(html));
        return grid.GetHtml(columns: columns, exclusions: new[] { "ID" });
    }

    public static WebGridColumn Links(this WebGrid grid, HtmlHelper html)
    {
        return grid.Column(
            header: "",
            style: "text-align-center",
            format: item => new HtmlString(
                html.ActionLink("Edit", "Edit", new { ID = item.ID }).ToString() + " | " +
                html.ActionLink("Details", "Details", new { ID = item.ID }).ToString() + " | " +
                html.ActionLink("Delete", "Delete", new { ID = item.ID }).ToString()
            )
        );
    }
} 
```

然后使用它：

```
@model IEnumerable<MyViewModel>
@{
    var grid = new WebGrid(Model);
}
@grid.MyGetHtml(Html) 
```

或者，如果您想控制其他列的构建：

```
@grid.GetHtml(
    columns: grid.Columns(
        grid.Links(Html),
        grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("EmailAddress")
    )
) 
```

# ios - UInavigation 控制器无法从切换视图控制器到 tableviewcontroller

> ID：11698666
> 
> 赞同：0
> 
> 时间：2012-07-28T05:52:06.900
> 
> 标签：ios, xcode, uitableview, uiviewcontroller, uinavigationcontroller

我正在尝试实现 UInavigation 控制器以将视图从视图控制器切换到表视图控制器。这是我的代码。

```
-(IBAction)product:(id)sender
{
Products *second=[[Products alloc]init];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:second];

nav.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;

[self.navigationController pushViewController:second animated:YES];

} 
```

但我没有得到它..我错过了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:46:18.697

首先，确保“Products”是 UIViewController 的子类。如果它是带有 .XIB 文件的视图控制器子类，请使用“initWithNibName”实例化它，而不是 alloc & init：

```
Products *second = [[Products alloc] initWithNibName:"YourXibFileName.xib" bundle:[NSBundle mainBundle]]; 
```

这里的第二个问题是你无缘无故地实例化了一个 UINavigationController - 删除这一行并保留 self.navigationController。

# java - 同步访问 ArrayList

> ID：11698671
> 
> 赞同：0
> 
> 时间：2012-07-28T05:53:04.183
> 
> 标签：java, multithreading, concurrency, locking, concurrentmodification

我试图通过并行计算来计算所有素数，直到任意数字。我知道 isPrime() 可以从现在的状态进行改进，但主要问题是我无法同步对存储结果的 ArrayList 的访问。我已经实例化了一个虚拟对象“m”来充当监视器并控制对阵列的访问。显然我在某处推理时犯了一个错误，因为我每次都得到一个 java.util.ConcurrentModificationException 。注意：[要点](https://gist.github.com/3191952)

编辑：更新后显示完成建议。

```
import java.util.ArrayList;
public class Main {
    static final int MAX = 100000000;
    static final int THREADS = Runtime.getRuntime().availableProcessors();
    static final int ARRINITSIZE = 100000;
    static ArrayList<Integer> primes = new ArrayList<Integer>(ARRINITSIZE);

    public static void main(String[] args) {
        Thread[] t = new Thread[THREADS];
        PrimeRun.m = new Monitor();

        for (int i=0; i<THREADS; i++) {
            t[i] = new Thread(new PrimeRun(i) );
            t[i].start();
        }

        // wait for threads to finish
        for (int i=0; i<THREADS; i++)
            t[i].join();

        // NOTE: primes will be out of order because of random thread scheduling 
        for (int n : primes)
            System.out.print("" + n + " ");
        System.out.println();
    }

    static boolean isPrime(int n) {
        if (n == 2 || n == 3 || n == 5) return true;
        if (n <= 1 || (n&1) == 0) return false;

        for (int i = 3; i*i <= n; i += 2)
            if (n % i == 0) return false;

        return true;
    }

    synchronized static void addPrime(int n) {
        primes.add(n);
    }

}

class PrimeRun implements Runnable {
    public static Monitor m;
    final int ID;
    public PrimeRun(int i) {
        ID = i;
    }

    public void run() {
    for(int i=0; i < Main.MAX; i++) {
        if(i % Main.THREADS == ID)
            if(Main.isPrime(i)) 
                m.addPrime(i);
        }
    }
}

class Monitor {
    public synchronized void addPrime(int n) {
        Main.addPrime(n);
    }
} 
```

为了方便起见，我已经包含了我的 ant 脚本 :)

```
<project default="cmp">
  <target name="cmp"><javac srcdir="." debug="true"/></target>
  <target name="run" depends="cmp"><java classname="Main" classpath="."/></target>
  <target name="cln"><delete><fileset dir="." includes="*.class"/></delete></target>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:58:56.457

如何将素数声明为

```
static List<Integer> primes = Collections.synchronizedList(new ArrayList<Integer>(ARRINITSIZE)); 
```

你应该能够摆脱监视器和同步块......哦，你必须等到计算素数的线程完成，然后才能开始打印素数列表中的值

**编辑**

这是修改后的程序，它只是等待线程完成

```
 import java.util.ArrayList;
    import java.util.List;

    public class Main {
        static final int MAX = 1000;
        static final int THREADS = Runtime.getRuntime().availableProcessors();
        static final int ARRINITSIZE = 100000;
        static ArrayList<Integer> primes = new ArrayList<Integer>(ARRINITSIZE);

    public static void main(String[] args) {
        PrimeRun.m = new Monitor();

        List<Thread> thread = new ArrayList<Thread>();
        for (int i=0; i<THREADS; i++){
            Thread t = new Thread(new PrimeRun(i));
            t.start();
           thread.add(t);
        }

        for (Thread t : thread) {
            if (t.isAlive()){
                try {
                    t.join();
                } catch (InterruptedException e) {

                }
            }

        }

        for (int n : primes)
            System.out.print("" + n + " ");
    }

    static boolean isPrime(int n) {
        if (n <= 1 || (n&1) == 0) return false;
        if (n == 2 || n == 3 || n == 5) return true;

        for (int i = 3; n*n <= i; i += 2)
            if (n % i == 0) return false;

        return true;
    }

    synchronized static void addPrime(int n) {
        primes.add(n);
    }

}

    class PrimeRun implements Runnable {
        public static Monitor m;
        final int ID;
        public PrimeRun(int i) {
            ID = i;
        }

        public void run() {
        for(int i=0; i < Main.MAX; i++) {
            if(i % Main.THREADS == ID)
                if(Main.isPrime(i)) 
                    m.addPrime(i);
            }
        }
    }

    class Monitor {
        public synchronized void addPrime(int n) {
            Main.addPrime(n);
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T06:00:54.817

您得到`ConcurrentModificationException`是因为您在添加数组时正在迭代数组。它与多个线程无关，即使在单个线程中也会发生。但是在您的特定情况下，它会发生，因为当您开始遍历列表时，线程仍在添加素数。为防止这种情况发生，您必须等待所有线程完成后再打印。为此，您可以迭代线程数组并调用`join()`每个线程。或者您可以使用[CountdownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)。

可以按照`Collections.synchronizedList()`其他答案中的建议使列表同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T06:06:57.630

原因`ConcurrentModificationException`是同步不错。原因是您在迭代期间正在修改列表。

我在您的代码中发现的唯一迭代是

```
for (int n : primes)
      System.out.print("" + n + " "); 
```

这就是发生的事情。您正在运行几个线程来完成它们的工作并将元素添加到集合中。运行线程的代码紧随其后的是迭代列表并打印其元素的代码。所以迭代和你的工作线程同时运行。

要解决此问题，您应该等到所有工作线程完成然后打印。实际上，您只想在所有计算完成后打印结果。查看`Thread.join()`实现这一点的方法。

And obviously do what @maneesh recommended you, i.e. use `Collections.synchronizedList()` instead of your manual synchronization.

# ios - 如何使用循环动态创建 2d NSMutableArray

> ID：11698682
> 
> 赞同：0
> 
> 时间：2012-07-28T05:56:07.613
> 
> 标签：ios, cocos2d-iphone, nsmutablearray

[我在这里](https://stackoverflow.com/questions/11685637/how-to-create-a-dynamic-cgpoint-array/11685806#11685806)发了一篇原创文章

起初，我尝试填写一个 CGPoint **allPaths。

第一个维度是“路径”，第二个维度是“路点”。我从中得到了一个 CGPoint。

例如： allPaths[0][2] 会给我第一条路径的 CGPoint，第三个航路点。

我用普通的 C 语言成功地用讨厌的循环做到了。现在我正在尝试使用 NSMutableArrays 在 Obj-C 中做同样的事情。

这是我的代码：

```
CCTMXObjectGroup *path;
NSMutableDictionary *waypoint;

int pathCounter = 0;
int waypointCounter = 0;

NSMutableArray *allPaths = [[NSMutableArray alloc] init];
NSMutableArray *allWaypointsForAPath = [[NSMutableArray alloc] init];

//Get all the Paths
while ((path = [self.tileMap objectGroupNamed:[NSString stringWithFormat:@"Path%d", pathCounter]]))
{
    waypointCounter = 0;
    //Empty all the data of the waypoints (so I can reuse it)
    [allWaypointsForAPath removeAllObjects];

    //Get all the waypoints from the path
    while ((waypoint = [path objectNamed:[NSString stringWithFormat:@"Wpt%d", waypointCounter]]))
    {
        int x = [[waypoint valueForKey:@"x"] intValue];
        int y = [[waypoint valueForKey:@"y"] intValue];

        [allWaypointsForAPath addObject:[NSValue valueWithCGPoint:CGPointMake(x, y)]];
        //Get to the next waypoint
        waypointCounter++;
    }

    //Add the waypoints of the path to the list of paths
    [allPaths addObject:allWaypointsForAPath];

    //Get to the next path
    pathCounter++;
} 
```

我的实际问题是 allPaths 中的所有路径都等于最后一个。（所有第一个路径都被最后一个覆盖）

我知道这是因为这一行 [allPaths addObject:allWaypointsForAPath]。

然而，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:14:07.780

哦，我想我发现了什么！不确定内存问题，但我猜垃圾收集器应该可以工作吗？

实际上，我只需要像这样在循环中声明我的 NSMutableArray *allWaypointsForAPath ：

```
int pathCounter = 0;
int waypointCounter = 0;

NSMutableArray *allPaths = [[NSMutableArray alloc] init];

//Get all the PathZ
while ((path = [self.tileMap objectGroupNamed:[NSString stringWithFormat:@"Path%d", pathCounter]]))
{
    waypointCounter = 0;
    NSMutableArray *allWaypointsForAPath = [[NSMutableArray alloc] init];
    //Get all the waypoints from the path
    while ((waypoint = [path objectNamed:[NSString stringWithFormat:@"Wpt%d", waypointCounter]]))
    {
        int x = [[waypoint valueForKey:@"x"] intValue];
        int y = [[waypoint valueForKey:@"y"] intValue];
        [allWaypointsForAPath addObject:[NSValue valueWithCGPoint:CGPointMake(x, y)]];
        //Get to the next waypoint
        waypointCounter++;
    }

    [allPaths addObject:allWaypointsForAPath];
    //Get to the next path
    pathCounter++;
} 
```

# java - Spring Mongo 条件查询两次相同的字段

> ID：11698689
> 
> 赞同：18
> 
> 时间：2012-07-28T05:57:18.727
> 
> 标签：java, spring, mongodb, mongodb-java

我正在尝试使用spring查询mongodb。我们有一个集合，其中包含一棵树和一个包含项目列表作为树路径（因此我们可以轻松地遍历树）。我们有一个查询需要返回特定节点的所有子节点。我们的查询基于选择路径中具有节点（父级）并且比父级（级别）低一级的所有节点。我们的标准如下：

```
Criteria.where("treePath").in(parentId).and("treePath").size(level) 
```

唉，当我们在 mongodb 上调用它时，我们得到以下异常：

> org.springframework.data.mongodb.InvalidMongoDbApiUsageException：由于 com.mongodb.BasicDBObject 的限制，您无法添加指定为“treePath：{“$size”：2}”的第二个“treePath”表达式。条件已经包含 'treePath : { "$in" : [ "50137df5f49f9b4a6481d639"]}'。

关于如何实现同样的目标还有其他建议吗？我正在考虑的一种选择是直接查询 mongodb。我试过

```
String command = "{findAndModify:\"Task\",query:{$and:[{treePath:\"5013a79a36600872ecf4dba8\"},{treePath:{$size:2}},{order:{$gte:0}}]},update:{$inc:{order:1}}}";
CommandResult commandResult = mongoTemplate.executeCommand(command); 
```

但这只会更新第一条记录，我需要全部更新。

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-28T13:28:42.243

这将做你想要的：

```
int parentId = 100;
int level = 5;
Criteria c = new Criteria().andOperator(Criteria.where("treePath").is(parentId),  
                                        Criteria.where("treePath").size(level));
System.out.println(c.getCriteriaObject()); 
```

它打印

```
{ "$and" : [ { "treePath" : 100} , { "treePath" : { "$size" : 5}}]} 
```

# c# - 尝试在我的网页中使用更新面板时 CSS 不起作用？

> ID：11698692
> 
> 赞同：0
> 
> 时间：2012-07-28T05:58:12.963
> 
> 标签：c#, javascript, asp.net, css, css-float

我有包含我的 css 的母版页的网页...当我在内容页持有者中添加更新面板时，母版页上的 css 工作正常，但相同的 css 在内容页持有者中不起作用。

```
<%@ Page Title="District Master" Language="C#" MasterPageFile="~/webpages/MasterPage_new.master"
    AutoEventWireup="true" CodeFile="frmDistrict.aspx.cs" Inherits="webpages_frmDistrict" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <asp:ScriptManager ID="ScriptManager2" EnablePartialRendering="true" runat="server">
    </asp:ScriptManager>
    <div id="main_div">
        <asp:UpdatePanel ID="uppnl" runat="server" Mode="Conditional">
            <ContentTemplate>
                <table style="width: 100%; float: left;">
                    <tr>
                        <td style="height: 100px; width: 100%; float: left;">
                            <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
                            <asp:Button ID="btnSearchOK" runat="server" Text="Ok" Font-Names="Verdana" Font-Size="11px"
                                Width="6%" Font-Bold="True" OnClick="btnSearchOK_OnClick" />
                            <asp:Button ID="btnRefresh" runat="server" Text="Refresh" Font-Names="Verdana" Font-Size="11px"
                                Width="11%" Font-Bold="True" OnClick="btnRefresh_OnClick" />
                            <asp:Button ID="btnClose" runat="server" Text="Close" Font-Names="Verdana" Font-Size="11px"
                                Width="9%" Font-Bold="True" OnClick="btnClose_OnClick" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:03:07.500

这是因为 ASP.NET 更改了内容**面板**中`id`所有元素的 要验证检查浏览器中的查看源代码。**`id="content"``id="body#content"`**

 **解决方案是根据生成`ID`的 s 更新您的 CSS。**

# c++ - boost::atomic 的标题是什么

> ID：11698693
> 
> 赞同：4
> 
> 时间：2012-07-28T05:58:22.027
> 
> 标签：c++, boost, atomic

我想使用`boost::atomic`但要包含什么标题？没有`boost/atomic.hpp`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T09:12:54.497

`Boost.Atomic`截至目前，它还不是 boost 的官方部分。如果您仍想使用它，您需要从[这里](http://www.chaoticmind.net/~hcb/projects/boost.atomic/)获取它。或者，您可以尝试`Boost.Interprocess`原子操作，依赖编译器相关的扩展，如 gccs 原子操作（`__sync_val_compare_and_swap`等等），或者，如果 c++11 是一个选项 use `std::atomic<T>`，这几乎与`boost::atomic<T>`IIRC 相同。

**编辑：** 与往常一样，这些事情会发生变化：`Boost.Atomic`在当前 1.53.0 版本中成为 boost 的官方部分。它现在可以作为`boost/atomic.hpp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:05:10.600

Boost.Atomic 尚未被 boost 接受。然而，存在 boost/interprocess/detail/atomic.hpp 作为 Boost.Interprocess 的实现细节。

# x11 - 为什么 OS X 10.8 Mountain Lion 在构建软件时找不到 X11 库？

> ID：11698702
> 
> 赞同：6
> 
> 时间：2012-07-28T06:01:21.600
> 
> 标签：x11, osx-mountain-lion, dyld

因此，我们都知道 Mountain Lion 不再附带 X11，需要 X11 的用户被引导下载 Xquartz。Xquartz 安装到`/opt`，但它也符号链接`X11`和`X11R6`到`/usr`。但是在构建需要链接到 X11 包含文件的软件时，我发现我必须将环境变量添加`/usr/X11/include`（或`/opt/X11/include`）传递到库搜索路径才能`./configure`找到 X11 库。我的问题是*为什么？*

我对 Google 做了一些研究（许多结果都指向 Stack Overflow），并且我已经阅读了 Apple 的文档，这些资料都表明 OS X 中没有与`/etc/ld.so.conf`许多（如果不是全部）中找到的文件等效的文件Linux 发行版。苹果甚至声明`DYLD_LIBRARY_PATH`默认情况下它是空的。但是，在 Lion 下（安装了 Apple 的最后一个“官方”X11），相同的`./configure`脚本将找到 X11 库，而无需向库搜索路径添加任何内容。

那么，*为什么*`./configure`不显式修改库搜索路径，脚本就无法在 Mountain Lion 中找到 X11 库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T22:48:33.080

一年多前问过......但是当我来到这里时遇到类似的问题......

请注意，在提到的 ruby​​ 问题中，没有修改*库搜索路径*。该解决方案只是设置一个环境变量，许多 Makefile 将其作为 C++ 编译器的标志。该示例定义了构建时间 -I *ncludepath*，即在哪里搜索*.headers* - 而不是*库*（这将是编译器/链接器的 -L 选项）。两者都是*构建时间*选项。*无论是 LD_LIBRARY_PATH 还是 DYLD_LIBRARY_PATH - 两者都是动态链接器在运行时*考虑的环境变量。（有关更多信息，请参阅[http://en.wikipedia.org/wiki/Dynamic_linker](http://en.wikipedia.org/wiki/Dynamic_linker)）

我手头没有 10.8 之前的机器，但猜测可能有一个符号链接 /usr/include/X11 -> /opt/X11/include/X11 - 否则我不知道它以前是如何工作的，假设相同的来源...

这是此类问题的另一个潜在解决方案（刚刚修复了我的 realvnc 构建）：

```
$ autoconf
$ ./configure 
```

所以你的问题是“为什么？” 最终可以回答：因为您的源包含一个“预建”配置脚本，该脚本基于旧自动工具，不包括 /opt/X11/include 作为搜索 X11 包括的潜在位置或根本没有得到一些上面提到的编译时间标志就在您当前的系统上。我通过自制软件安装了 autoconf——啊，好东西，干杯。

# python - Twisted Python：多播服务器未按预期工作

> ID：11698704
> 
> 赞同：0
> 
> 时间：2012-07-28T06:01:49.650
> 
> 标签：python, twisted, multicast

我正在尝试扭曲 python 的多播协议。这是一个简单的例子：

我创建了两个服务器，监听 224.0.0.1 和 224.0.0.2，如下所示：

```
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer

class MulticastServerUDP(DatagramProtocol):
    def __init__ (self, group, name):
        self.group = group
        self.name = name
    def startProtocol(self):
        print '%s Started Listening' % self.group
        # Join a specific multicast group, which is the IP we will respond to
        self.transport.joinGroup(self.group)

    def datagramReceived(self, datagram, address):
        print "%s Received:"%self.name + repr(datagram) + repr(address)

reactor.listenMulticast(10222, MulticastServerUDP('224.0.0.1', 'SERVER1'), listenMultiple = True)
reactor.listenMulticast(10222, MulticastServerUDP('224.0.0.1', 'SERVER2'), listenMultiple = True)

reactor.run() 
```

然后我运行这段代码发送“HELLO”：

```
import socket

MCAST_GRP = '224.0.0.1'
MCAST_PORT = 10222

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 2)
sock.sendto("HELLO", (MCAST_GRP, MCAST_PORT)) 
```

结果相当混乱。有几种情况：

- 当我将所有组 IP 和 MCAST_GRP 设置为 224.0.0.1 时，两台服务器都收到了消息（预期） - 当我在发送脚本中将两台服务器的组 IP 设置为 224.0.0.1 和 MCAST_GRP 为 224.0.0.2（或不同于224.0.0.1），两台服务器都没有收到消息（预期）

- 当我将一台服务器的组 IP 设置为 224.0.0.1 和其他 224.0.0.2 时，发生了奇怪的事情。当我将 MCAST_GRP 设置为 224.0.0.1 或 224.0.0.2 时，我希望两台服务器中只有一台能够接收到消息。结果是两个服务器都收到了消息。我不确定发生了什么。有人可以解释一下吗？

注意：我在同一台机器上运行这些。

SL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:52:24.860

确实，这有点棘手。你必须这样写：

```
reactor.listenMulticast(
    10222, 
    MulticastServerUDP('224.0.0.1', 'SERVER1'),
    listenMultiple=True,
    interface='224.0.0.1'
)

reactor.listenMulticast(
    10222, 
    MulticastServerUDP('224.0.0.2', 'SERVER2'),
    listenMultiple=True,
    interface='224.0.0.2'
) 
```

我以前也有同样的问题。我不得不查看源代码才能找到它。但我解决了这个问题，因为我有 C 网络编程的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:56:41.650

多播是古怪的，多播的平台（Linux、Windows、OS X 等）实现甚至更加古怪。

Twisted 在这里只是反映了平台的多播行为，所以这只是一个模糊的与 Twisted 相关的问题。实际上，这是一个多播问题和一个平台问题。

这是关于发生了什么的稍微有根据的猜测。

多播通过让主机订阅地址来工作。当主机上运行的程序加入一个组（例如 224.0.0.1）时，主机会在本地记录这一点并执行一些网络操作（IGMP）来告诉附近的主机（可能通过路由器，但我对这部分的详细信息）它现在对该组的消息感兴趣。

在多播创建者的理想世界中，订阅一直通过互联网传播。这是必要的，以便互联网上任何地方的任何人向该组发送消息时，无论哪个路由器得到消息，都可以将其传递给已订阅该组的所有主机。这应该比广播更有效，因为只有订阅的主机需要将消息传递给他们。由于路由器正在跟踪订阅，因此它们可以跳过向没有订阅主机的链路发送流量。

在现实世界中，多播订阅通常不会传播很远（例如，它们到达第一个路由器，可能是运行您家 LAN 的路由器，然后停在那里）。

因此，关于理想宇宙的所有信息似乎与这种情况无关。然而！我的怀疑是，大多数实现多播的人对第一部分的想法非常非常认真，并且在他们完成实现时已经很累了。

一旦多播组的消息实际到达主机，主机需要将其传递给实际对其感兴趣的程序。在这里，我怀疑，实施者太累了，无法做正确的事情。相反，他们做了各种懒惰、简单的事情（取决于你的平台）。例如，他们中的一些人只是访问了系统上订阅多播组的每个打开的套接字并将消息传递给他们。

在其他平台上，您有时会发现单个多播消息多次传递到单个侦听多播套接字。当然，还有一个流行的问题是多播消息根本不会被传递。

在多播领域享受您的古怪时光！

# android-view - 在运行时在 Android 上永久保存任何视图

> ID：11698707
> 
> 赞同：0
> 
> 时间：2012-07-28T06:02:47.497
> 
> 标签：android-view

我正在查看应用程序 Pulse，并希望制作一个像它的某些功能一样的应用程序。其中之一是在运行时由用户选择添加一个新视图并保存它。我很困惑他们是如何做到的，我的意思是如何在运行时保存视图。是通过 SharedPreferences 还是其他方式？如果是，请帮助我一段 View 代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:10:34.293

```
yes you can do this. for this if you are creating an object on any event suppose 
```

单击按钮后您正在创建四个按钮，因此可以在运行时完成，并且

这些对象可以在运行时保存在 sharedpreference 对象中。所以当你打开

下次您的活动将保存 sharedprefernce 对象中的对象。所以通过

这样你就可以做到这一点

# android - Android Zxing 代码在三星 Galaxy Note 中使用时抛出异常？

> ID：11698719
> 
> 赞同：1
> 
> 时间：2012-07-28T06:05:49.073
> 
> 标签：android, zxing

我正在使用`zxing library`具有条形码功能的应用程序。我的应用程序在`Samsung Galaxy S and S2`. 但是当我在大屏幕设备上运行我的应用程序时，`Samsung Galaxy` `Note`它会引发以下异常。

```
07-28 14:46:34.948: W/System.err(1238): java.lang.ArrayIndexOutOfBoundsException: src.length=460800 srcPos=461194 dst.length=101850 dstPos=74787 length=291
07-28 14:46:34.948: W/System.err(1238):     at java.lang.System.arraycopy(Native Method)
07-28 14:46:34.948: W/System.err(1238):     at com.google.zxing.client.android.PlanarYUVLuminanceSource.getMatrix(PlanarYUVLuminanceSource.java:105)
07-28 14:46:34.948: W/System.err(1238):     at com.google.zxing.common.HybridBinarizer.binarizeEntireImage(Unknown Source) 
```

有谁知道是什么导致了这个问题。是不是因为 Galaxy Note 的大屏幕和它的相机。以前有人遇到过同样的问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:36:38.050

这意味着您希望预览数据比实际数据大。我会看看你从复制的代码中所做的更改，与所选的预览大小相关，因为该应用程序肯定可以正确处理任何大小。（我们不建议您像这样复制和粘贴代码。如果您使用 Intents，则不会发生这种情况。http [://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)）

# php - 如何在 codeigniter 控制器中添加 cron 作业？

> ID：11698721
> 
> 赞同：0
> 
> 时间：2012-07-28T06:06:14.683
> 
> 标签：php, codeigniter, cron

如何在 PHP 中使用 cron 一个月后自动删除作业

```
public function deletejobs()
    {
        $qry="select *from jobs where job_posting_date <unix_timestamp(now()-interval 31 day)";
        $res=$this->db->query($qry)->result_array();
        foreach($res as $result){
            $this->db->where('jobid',$result['jobid'])->update('jobs',array('job_status'=>expired));
        }
        //exit;
        redirect(base_url());

        $this->template->write_view('content', 'Jobs/job_center',$data);
        $this->template->render();
    } 
```

# ruby - ruby 方法 zip 试图获取我制作的一串拉链

> ID：11698723
> 
> 赞同：0
> 
> 时间：2012-07-28T06:06:17.913
> 
> 标签：ruby, string, methods, zip

我有一种方法可以压缩我传入的文件。

```
require 'zip/zip'
def zipup(aname, aloc="/tmp/")
      Zip::ZipFile.open "#{aloc}"+File.basename(aname)+".zip", Zip::ZipFile::CREATE do |zipfile|
       zipfile.add File.basename(aname), aname
      end
end 
```

我需要从此方法中获取一个字符串对象或数组对象，其中包含已压缩的每个文件的 archive.zip 名称。

rubyzip 确实有一个 to_s 方法，尽管我未能正确获取语法。

[http://rubyzip.sourceforge.net/classes/Zip/ZipEntry.html#M000131](http://rubyzip.sourceforge.net/classes/Zip/ZipEntry.html#M000131)

感谢一位新的红宝石学家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:53:11.513

欢迎乔伊，您使用“zip/zip”gem 还是只使用“zip”？如果您需要某些东西，最好下次将其添加到问题中。在我看来，这个 gem 需要一些额外的文档和方法。这有效

```
require 'zip' #or 'zip/zip' both work

def zip_list(filename)
  zipfile = Zip::ZipFile.open(filename)
  list = []
  zipfile.each { |entry| list << entry.name }
  list
end

puts zip_list("c:/temp/zip1.zip") 
```

另一种方式

```
require 'zip/zip'

Zip::ZipFile.open("c:/temp/zip1.rb.zip") do |zipfile|
  zipfile.entries.each do |entry|
    puts entry.name
  end
end 
```

# c# - 处理 C# 服务器的最佳方式是什么？

> ID：11698734
> 
> 赞同：0
> 
> 时间：2012-07-28T06:07:28.247
> 
> 标签：c#, multithreading, web-services, networking

我将有大约 10 台计算机定期与服务器通信。

数据包不会太密集。（游戏数据更新）服务器将写入 postgres 数据库

我主要关心的是客户端的并发访问。如何处理排队的客户请求？

*   WCF 是一条好路线吗？因此，例如，通过 WCF 在 LAN 上使用 GET/POST 请求等而不是打开 tcp/ip 流是否可行？

任何人都可以针对可能出现的问题提出任何其他关注领域吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:46:55.040

使用 WCF，您可以非常灵活地选择使用什么，这取决于您想要做什么。知道选择什么来自实验和经验。

您可以使用 Fiddler、Wireshark 和 ServiceTraceViewer 等工具来分析客户端和服务器之间的对话——应该定期使用它们来检测效率低下的对话。

您正在制作一款需要通过中央服务器进行数据通信的游戏……因此，您可能希望它尽可能高效且延迟最低。

因此，理想情况下，任何进入您希望尽快处理的服务器的请求......您希望最大限度地减少任何开销。

您是否需要保证消息已被服务器接收并因此保证您收到回复（即可靠传递）？

消息是否需要按照发送的顺序进行处理？

然后考虑您的服务器是否需要扩展？您一次只会有少量客户吗？你提到10个？.....这会增加到一百万吗？

然后考虑您的环境....您提到 LAN...客户端是否总是在同一个 LAN...即 Intranet？如果是这样，那么他们可以使用 TCP 套接字直接与服务器通信......而无需通过 IIS 堆栈。

使用 WCF 进行上述某些假设后，您可以选择使用`netTCPBinding`二进制编码的端点，以及使用以下服务的服务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single)]. 
```

这将在客户端和服务器之间建立会话（只要您使用支持会话的绑定）（不会扩展，因为每个客户端都有自己的服务器实例来管理他们的会话），它将允许并行处理多个客户端，并且二进制编码“可能”减少数据大小（您可以选择避免这种情况，因为您说您的数据不是密集的，并且二进制实际上可能会为小消息大小增加更多开销）。

另一方面，如果您的服务需要能够无限扩展并保持较低的响应时间，那么不介意消息是否丢失，或以不同的顺序传递，或者必须通过 HTTP 等传递，等等。 ..然后还有其他可以使用的绑定、InstanceContextModes、消息编码等。如果您真的想变得更复杂，您可以让您的服务公开以不同方式配置的多个端点，您的客户可能更喜欢特定的配方。

注意：（如果您使用 IIS 托管 WCF 服务并且您正在使用，`netTCPBinding`那么您必须启用 net.tcp 协议......如果您自托管 WCF 服务则不需要）。

[http://blogs.msdn.com/b/santhoshonline/archive/2010/07/01/howto-nettcpbinding-on-iis-and-things-to-remember.aspx](http://blogs.msdn.com/b/santhoshonline/archive/2010/07/01/howto-nettcpbinding-on-iis-and-things-to-remember.aspx)

因此，对于特定场景，这是使用 WCF 执行此操作的“1”方式。

尝试一种方法...查看它的内存使用、延迟、弹性等，如果您的需求发生变化，请更改您使用的绑定/编码...这就是 WCF 的美丽和噩梦。

如果您的客户端必须使用 HTTP 和 POST/GET 请求，则使用 Http 风格的绑定。如果您需要有保证的消息传递，那么您需要一个可靠的会话。

如果您的服务需要无限扩展，那么您可能会开始考虑在云中托管您的服务，例如使用 Windows Azure。

[http://blog.shutupandcode.net/?p=1085](http://blog.shutupandcode.net/?p=1085)

[http://msdn.microsoft.com/en-us/library/ms731092.aspx](http://msdn.microsoft.com/en-us/library/ms731092.aspx)

[http://kennyw.com/work/indigo/178](http://kennyw.com/work/indigo/178)

# sql - 更改数据网格视图中的列格式

> ID：11698736
> 
> 赞同：0
> 
> 时间：2012-07-28T06:07:50.600
> 
> 标签：sql, vb.net, datagridviewcolumn

我有一个数据网格视图，我用数据库作为其数据源填充。但是，以日期为数据类型的列显示日期和时间，而我只需要时间。

如何更改数据网格视图表的格式？

```
Private Sub prcDisplayTable()
    dgvViewLecturers.DataSource = Nothing
    dgvViewLecturers.Rows.Clear()
    dgvViewLecturers.Columns.Clear()

    strSQL = "SELECT * FROM Lecturers"
    strTableName = "ViewLecturers"

    daLecturers = New OleDb.OleDbDataAdapter(strSQL, con)
    daLecturers.Fill(dsLecturers, strTableName)

    dgvViewLecturers.DataSource = dsLecturers
    dgvViewLecturers.DataMember = strTableName
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:17:41.247

试试这个只限时间的格式

```
dataGridView1.Columns("dateColumn").DefaultCellStyle.Format = "hh:mm:ss tt"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:14:33.377

设置[DefaultCellStyle.Format](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.format.aspx)属性。

```
 dataGridView1.Columns("dateColumn").DefaultCellStyle.Format = "hh:mm:ss t"; 
```

# c - C 编程，双链表复制问题

> ID：11698737
> 
> 赞同：1
> 
> 时间：2012-07-28T06:07:50.533
> 
> 标签：c, linked-list

我在将单个链接列表复制到双链接列表时遇到了一些麻烦。不知道发生了什么，但我遇到了 gdb 调试错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000
0x0000000100000d86 in doublify (list=0x1001008c0) at lists.c:62
62     newDlist->item = curr->item; 
```

单向链接列表正在工作，

我的 .h 头文件：

```
typedef struct _node {
   Item item;
   link next;
} node;

typedef struct _dnode *dlink;

typedef struct _dnode {
   Item item;
   dlink prev;
   dlink next;
} dnode; 
```

我的代码：

```
link newLink (Item item){
   link createLink = malloc(sizeof(node));
   createLink->item = item;

   return createLink;
}

link fromTo (int start, int end) {
   link newList = NULL;

   if(start <= end ){
       newList = newLink(start);
       newList->next = fromTo(start+1, end);
   }

   return newList;
}

//Heres where it isn't able to copy the linklist item over into the new dlist.
dlink doublify (link list) {
   dlink newDlist = malloc (sizeof (dnode));
   link curr = list;

   while(curr != NULL){
       newDlist->item = curr->item;
       curr = curr->next;
       newDlist = newDlist->next;
   }
   return newDlist;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:24:17.307

在您的函数中，您只为双向链表中的*第一个*`doublify`分配足够的空间。当您使用 遍历单链表时，您需要在*每次*循环迭代时为新的分配空间，为单链表中的每个元素分配一个空间。 *`dnode``curr``dnode`*

 **您收到错误是因为在第二次迭代中您尝试访问`newDlist->next`，这是一个未初始化的内存地址。

请注意，在创建双向链表时，您还需要保留一个指向前一个的 tmp 指针`dnode`，以便正确设置`prev`/`next`指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:40:06.280

问题发生在 while 循环的第二次迭代中。当您将 newDlist 分配给“下一个”项目时，“下一个”字段可能包含任何值。问题是 malloc 只是为您提供了一个指向可能存在任何值的数据区域的指针（它不会以某种方式清理它或初始化）。

您只需要在每次迭代中分配一个新节点并适当地设置指针。这是如何做到这一点的方法之一。

```
dlink prevNode = NULL;

// Insert the first item (if present) to simplify the loop
if ( curr != NULL )
{
   dlink newDlist = malloc(sizeof(dnode));

   newDlist->item = curr->item;
   newDlist->next = NULL;
   newDlist->prev = NULL;
   prevNode = newDlist;

   curr = curr->next;
}

while ( curr != NULL )
{
   dlink newDlist = malloc(sizeof(dnode));

   newDlist->item = curr->item;

   prevNode->next = newDlist;
   newDlist->prev = prevNode;
   newDlist->next = NULL;

   prevNode = newDlist;
   curr = curr->next;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-16T16:05:41.220

Maksim 有一个很好的答案，对我有帮助，但如果你有...

```
void DisplayList(topNode* nodeType) {
    node* ptrNode = nodeType;

    while (ptrNode->next != NULL) {
        // DO WORK
    }
} 
```

...然后您需要将其更改为...

```
void DisplayList(topNode* nodeType) {
    node* ptrNode = new node;           // THIS IS THE KEY...ALLOCATE THE MEMORY

    if (ptrNode == NULL)
        cout << "Could not allocate memory -- exiting application!" << endl;
    else {
        ptrNode = nodeType;             // THEN COPY THE TOP NODE POINTER

        while (ptrNode->next != NULL) {
            // DO WORK
        }
    }
} 
```

我在课堂上遇到了同样的问题，所以也许这会为将来的人节省一些精力！**

# php - AJAX/JS/PHP- 无需刷新页面或单击按钮即可回显值

> ID：11698738
> 
> 赞同：1
> 
> 时间：2012-07-28T06:07:51.770
> 
> 标签：php, javascript, jquery, html, ajax

我目前正在使用无需刷新页面或单击按钮即可工作的 JS/AJAX 函数。我在回显该值时遇到了一些问题。例如，如果我更改此行`$email = $_POST['name'];`，它会完美运行，但如果我使用电子邮件的实际值，`$email = $_POST['email'];`则它不起作用。我是 JS 和 php 的新手。

有人能告诉我为什么会给出这样的结果吗？[例子](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

```
<script>
    $(document).ready(function() {
        var timer = null; 
        var dataString;   
        function submitForm(){
            $.ajax({ type: "POST",
                url: "test1.php",
                data: dataString,
                success: function(result){
                    $('#special').html($('#resultval', result).html());
                }
            });
            return false;
        }
        $('#email').on('keyup', function() {
            clearTimeout(timer);
            timer = setTimeout(submitForm, 0050);
            var name = $("#email").val();
            dataString = 'name='+ name;
        });
    }); 
</script> 
```

**PHP**

```
<?

if($_POST) {
    $email = $_POST['email'];
    if (preg_match('|^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$|i', $email)) {
        echo ('<div id="special"><span id="resultval">'.$email.'</span></div>');
    }
    else {
        echo ('<div id="special"><span id="resultval">Include a valid email address.</span></div>');

    }           
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:15:16.387

好吧，您明确指定了一个参数“名称”来保存电子邮件地址。没有您特别指定的参数“电子邮件”。在您的 JS 代码中搜索这一行：

```
dataString = 'name='+ name; 
```

因此，像您一样尝试在 php 中读取电子邮件地址是没有意义的：

```
$email            = $_POST['email']; 
```

您必须更改 JS 代码以将参数命名为与您尝试在 php 代码中读取它相同的名称。

* * *

所以很可能你所要做的就是改变你当前的 JS 代码

```
 var name = $("#email").val();
        dataString = 'name='+ name; 
```

到

```
 var email = $("#email").val();
        dataString = 'email='+ email; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:15:19.263

在客户端浏览器发出带有参数的请求`name`（因为`dataString = 'name=' + name;`），因此在服务器端您可以通过`$POST['name']`.

# android - android中的listview scolling很慢

> ID：11698740
> 
> 赞同：-1
> 
> 时间：2012-07-28T06:08:24.533
> 
> 标签：android, listview

我有一个列表视图，其中包含三个不同的自定义行的严重膨胀。从这些行中，我必须收集数据并填充数据库，最后也获得该数据。现在问题是创建的行数取决于用户，它可能是高达 100。而且我的列表在滚动时变得非常慢。现在我想知道的是，将我的所有列表都放在异步任务中是否会有所帮助，我的意思是它的创建和执行。下面是我的代码片段。

```
 private class Async extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            runOnUiThread(new Runnable() {
                 public void run() {
                     lv.setAdapter(new EfficientAdapterAB(Measure_New.this));
                        new EfficientAdapterAB(Measure_New.this).notifyDataSetChanged();
            //stuff that updates ui

                }
            });

            return null;
        }

     }

    private   class EfficientAdapterAB extends BaseAdapter {
            private LayoutInflater mInflater;
            View[] view; 
            ViewHolderAB holderAB;
            /*  RadioButton[] ob=new RadioButton[n];
              RadioButton[] ra=new RadioButton[n];*/

             AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(Measure_New.this);
                SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj.getReadableDatabase();
                String q="SELECT * FROM ab_measurement WHERE job_id=" +"\""+Settings.jobid +"\"";
                Cursor  cursor = sqliteDatabase.rawQuery(q,null);

             public EfficientAdapterAB(Context context) {
             mInflater = LayoutInflater.from(context);

             }

             public int getCount() {
                System.out.println("in getcount value of n is "+n);

                view = new View[n+2];
                return n+2;
             }

             public Object getItem(int position) {

             return position;
             }

             public long getItemId(int position) {

             return position;
             }

 public View getView(final int position,  View convertView, ViewGroup parent) {

    final RadioButton[] ob=new RadioButton[n];
    final  RadioButton[] ra=new RadioButton[n];

     holderAB = new ViewHolderAB();
     final EditText edit_a_ft,edit_a_inch,edit_b_ft,edit_b_inch,edit_ab_a_ft,edit_ab_a_inch,edit_ab_b_ft,edit_ab_b_inch;

if (view[position] == null) {
        if(position==0){
             convertView = mInflater.inflate(R.layout.measure_upper_bar, null);
             txt_ft_mtr=(TextView)convertView.findViewById(R.id.textView_ft_mtr);
             txt_inch_cm=(TextView)convertView.findViewById(R.id.textView_inch_cm);
             if(Settings.metric_count==1){
                 txt_ft_mtr.setText(""+"Meter");
                 txt_inch_cm.setText(""+"Centimeter");
             }
             user_input= (EditText) convertView.findViewById(R.id.Num_edittxt_measure_new);
             gettingUserInput();
             new EfficientAdapterAB(Measure_New.this).notifyDataSetChanged();
             System.out.println("after gettinguserInput value of n is "+n);
              feet=(EditText)convertView.findViewById(R.id.Feet_edittxt);
              inch =(EditText)convertView.findViewById(R.id.Inches_Edittxt);

              feet.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    try{
                    val_feet_baseline=Integer.parseInt(feet.getText().toString());

                    }catch (Exception e) {
                        // TODO: handle exception
                    }

                }
            });

             inch.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    try{

                        val_inch_baseline=Integer.parseInt(inch.getText().toString());

                        if(val_inch_baseline>=ft_mtr){
                            inch_greater=true;
                            ft_baseline=val_feet_baseline+(val_inch_baseline/ft_mtr);
                            val_inch_baseline=val_inch_baseline%ft_mtr;
                            feet.setText(""+ft_baseline);
                            inch.setText(""+val_inch_baseline);
                            System.out.println("yes its working values of feet and inch is "+"feet"+ft_baseline+"inch"+val_inch_baseline);

                        }
                    }
                    catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            });

             if(inch_greater==true){
                 baseline_length=String.valueOf(ft_baseline).concat(".").concat(String.valueOf(val_inch_baseline));
                 feet.setText(""+ft_baseline);
                 System.out.println("in the if part");
                 inch_greater=false;
             }
             else{
             baseline_length=String.valueOf(val_feet_baseline).concat(".").concat(String.valueOf(val_inch_baseline));
             System.out.println("in the else part");
             feet.setText(""+val_feet_baseline);
             }

             inch.setText(""+val_inch_baseline);
                if(val_feet_baseline==0){
                     feet.setText(""+"");
                }

                if(val_inch_baseline==0){

                    inch.setText(""+"");
                }
             user_input.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        user_input.setText("");
                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.showSoftInput(user_input, InputMethodManager.SHOW_IMPLICIT);

                        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);

                    }
                });

                rb_A = (RadioButton)convertView.findViewById(R.id.radio_A);
                rb_B = (RadioButton)convertView.findViewById(R.id.radio_B);
                rb_AB = (RadioButton)convertView.findViewById(R.id.radio_A_B);

                rb_A.setOnClickListener(Measure_New.this);
                rb_B.setOnClickListener(Measure_New.this);
                rb_AB.setOnClickListener(Measure_New.this); 

             view[position] = convertView; 

        }

         else if(position==n+1){

                convertView=mInflater.inflate( R.layout.details_continue_btn, null);
                convertView.findViewById(R.id.btn_Continue).setOnClickListener(Measure_New.this);
                convertView.findViewById(R.id.btn_exit_restart).setOnClickListener(Measure_New.this);

                view[position] = convertView;
           }
        else{   

                     if(optn_checkd==1){

                         setDatabase();

                     convertView = mInflater.inflate(R.layout.a_xml, null);
                     txt_A_ft_mtr=(TextView)convertView.findViewById(R.id.textView_A_ft_mtr);
                     txt_A_inch_cm=(TextView)convertView.findViewById(R.id.TextView_A_inch_cm);
                     if(Settings.metric_count ==1){
                         txt_A_ft_mtr.setText(""+"A(m.)");
                         txt_A_inch_cm.setText(""+"A(cm.)");
                     }

                     holderAB.text = (TextView) convertView.findViewById(R.id.num_txt);
                     holderAB.text.setText(""+(position));

                     edit_a_ft=(EditText) convertView.findViewById(R.id.editText_A_ft);
                     edit_a_inch=(EditText) convertView.findViewById(R.id.editText_A_inch);

                     if(position<=n){
                     textChangeListenerForFeet(edit_a_ft,position,al_edit_A_ft);
                     textChangeListenerForInch(edit_a_inch,edit_a_ft,position,al_edit_A_inch);
                     }

                     System.out.println("in else value of position before crashing is"+position+"  "+(position-1)+"  "+ n);
                     if(position<=n){
                     ob[position-1]=(RadioButton)convertView.findViewById(R.id.radio_Obstruction_a);
                     ob[position-1].setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            if(radio__ob_flag[position-1]==true){
                                ob[position-1].setButtonDrawable(R.drawable.redioon);
                                obstruction/*[position-1]*/="Y";

                                radio__ob_flag[position-1]=false;
                            }
                            else{
                                ob[position-1].setButtonDrawable(R.drawable.rediooff);
                                radio__ob_flag[position-1]=true;
                                obstruction/*[position-1]*/="N";

                            }
                             try{
                                    al_ob_a.add(position-1,obstruction/*[position-1]*/);

                                        al_ob_a.remove(position);

                                    }catch(Exception e){

                                    }

                            System.out.println("wooooow here i am ob"+al_ob_a);
                        }
                    });
                     }

                     if(position<=n){
                     ra[position-1]=(RadioButton)convertView.findViewById(R.id.radio_Raisedwall_a);
                     ra[position-1].setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub

                            if(radio__ra_flag[position-1]==true){
                                ra[position-1].setButtonDrawable(R.drawable.redioon);

                                radio__ra_flag[position-1]=false;
                                obstruction/*[position-1]*/="Y";

                            }
                            else{
                                ra[position-1].setButtonDrawable(R.drawable.rediooff);
                                radio__ra_flag[position-1]=true;
                                obstruction/*[position-1]*/="N";

                            }

                             try{
                                    al_ra_a.add(position-1,obstruction/*[position-1]*/);

                                    al_ra_a.remove(position);

                                    }catch(Exception e){

                                    }

                            System.out.println("wooooow here i am ra "+al_ra_a);
                        }
                    });
                     }

                     if(getttingFromDbForMeasure()==true){
                    if(position<=n){

                       retainingInput(al_edit_A_ft,position,edit_a_ft);
                       retainingInput(al_edit_A_inch,position,edit_a_inch);
                       retainingInputForRadio( al_ob_a,position,ob);
                       retainingInputForRadio(al_ra_a ,position,ra);

                    }
                     }

                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:25:32.060

首先，您需要在您的适配器 getView() 中使用 convertView。这会让你使用视图持有者。目前，您仅将值分配给 viewHolder，但未将其设置为标签或检索值（以避免多余的 findViewById 调用）。

查看[来自 Romain Guy 的 Google I/O 视频，](http://www.youtube.com/watch?v=wDBM6wVEO70)并查看该会话幻灯片[中的代码](http://dl.google.com/googleio/2010/android-world-of-listview-android.pdf)。

# vim - CloseSIngleConque 不是编辑器命令 - vim

> ID：11698745
> 
> 赞同：0
> 
> 时间：2012-07-28T06:09:00.210
> 
> 标签：vim

我一直在将这些点文件用于我的 vim 配置等：

[https://github.com/skwp/dotfiles](https://github.com/skwp/dotfiles)

我最近更新了文件，一些 control-p 的东西已经停止工作

如果我选择 ,b 我会收到以下错误：

> 不是编辑器命令 CloseSingleConque

如果我查看 ctrl-p 的设置文件，我会看到以下映射：

```
nnoremap <silent> ,b :CloseSingleConque<CR>:CtrlPBuffer<cr> 
```

我的 vim 安装无法识别 CloseSingleConque。有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:47:05.980

从随机的互联网陌生人那里获取所有设置并不是一个好主意。

`:CloseSingleConque<CR>`位于作为此“发行版”一部分的 ruby​​-conque 插件中。你安装了吗？如果没有，您可以安全地删除这部分映射。如果已安装，这是一个错误，您应该向作者报告。

以这个问题为契机，重新考虑使用其他人的“分配”而不是逐步滚动自己的“分配”。

说真的，谁需要 80 个插件，包括两个重叠的模糊文件/缓冲区导航器和另一个已经与 Vim 捆绑在一起的插件？

# sql - id 得到重复的 PV.RFMID

> ID：11698748
> 
> 赞同：-2
> 
> 时间：2012-07-28T06:09:43.783
> 
> 标签：sql, sql-server, join

> **可能重复：**
> [我如何在 RFM.RFMID=PV.RFMID 上使用不同的 INNER JOIN RFM](https://stackoverflow.com/questions/11688430/how-can-i-use-distinct-inner-join-rfm-on-rfm-rfmid-pv-rfmid)

```
Table MMASTER
   MID col1
   1   abc
   2   xyx
   3   pqr

   Table AMM
   AMMID MID col1 col2
   1     1   bnb  mfk
   2     1   def  rwr
   3     2   re   wrwr

   Table PS
   UID VTID AMMID SMID col1 col2 
   1   1    1     1    rkk  jdj
   2   2    3     3    kdf  lfl
   6   2    2     4    rgr  rtr

   Table PV
   VTID PMID RFMID
   1    2   1
   2    2   3
   7    2   2

   Table RFM
   RFMID title name
   1     mr   john
   2     mr   jack
   3     mr   jim

   Table PM
   PMID col1 col2
   1   df  ere
   2   rwe rwer
   3   rwr fwr

   Table SM
   SMID MMID col1 col2
   1    1    fdf  efe
   2    1    ddf  dfdf
   3    2    df   ef 
```

我在上面的查询中得到这样的结果

```
 PMID title name  PV.RFMID
 2     mr.   jim  3
 2     mr.   jim  3
 2     mr.   jim  3

***BUT RESULT SHOULD BE LIKE THIS***
PMID title name  PV.RFMID
 2     mr.   john   1
 2     mr.   jim    3
 2     mr.   jack   2 
```

在我的查询`PV.RFMID`中，当加入时获得重复值，`RFM`并且由于该标题和名称重复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:54:19.083

这将为您提供所需的输出：

```
select pm.pmid, rfm.title, rfm.name, pv.rfmid from PM as PM
inner join PV on pm.pmid = pv.pmid
inner join RFM as rfm on pv.rfmid = rfm.rfmid
WHERE PM.PMID='2' 
```

**编辑**

考虑到你需要*all*`Join`，`tables`这很棘手。我的意思是，检查`RFMtable`，你可以看到`RFMId`，相关`PV table`，并看到`VTID`有一个 7 值..这与任何东西都没有关系！所以，如果你需要`join`all `tables`，你不会得到那个结果

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-28T07:14:04.433

我假设表“PM”是您的事务表，其中一个“PMID”可以有多个条目，因此在查询之前添加一个不同的子句将为您提供所需的输出。

尝试这个：

```
SELECT DISTINCT PM.PMID,RFM.TITLE,RFM.NAME ,PV.RFMID FROM MMASTER 
INNER JOIN AMM ON MMASTER.MID=AMM.MID
INNER JOIN PS ON AMM.AMMID=PS.AMMID
INNER JOIN PV ON PV.VTID=PS.VTID
INNER JOIN RFM ON RFM.RFMID=PV.RFMID
INNER JOIN PM ON PV.PMID=PM.PMID
INNER JOIN SM ON PS.SMID=SM.SMID
WHERE PM.PMID='2' 
```

# php - 传入视图和字符串比较的codeigniter数组

> ID：11698750
> 
> 赞同：0
> 
> 时间：2012-07-28T06:09:55.797
> 
> 标签：php, codeigniter, strcmp

我正在使用 cibonfire，我正在使用他们的模板。这是我的视图页面中的代码：

```
<?php
        Template::block(
            $block_name = 'leftsidebar',
            $default_view = 'leftsidebar',              
            $data = array( 'role' => $role[0]->role_name)
        );
?> 
```

在我的模板中，我正在这样做：

```
<?php if(strcmp($role['role_name'], "Bimalogy Admin") == 0 ): ?>
    <h4><u><b>User Control</b></u></h4>
<?php endif; ?> 
```

这是显示`Undefined index: role_name`错误。

如果我在我的模板中这样做：

```
<?php if(strcmp($data['role'], "Bimalogy Admin") == 0 ): ?>
<h4><u><b>User Control</b></u></h4>
<?php endif; ?> 
```

显示`Undefined variable: data`

如果我`echo $role`将其显示`Array`为输出。

我的问题是如何访问此模板中的该数组并将其与字符串进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:29:01.090

尝试使用 .dump 转储`$role`数组`var_dump($role)`。

根据数组的构建方式，您可能需要使用`$role->role_name`, 或`$role[0]->role_name`, or`$role[0]['role_name']`等​​。

# c# - 当会话从第一页结束时，标签的文本没有出现

> ID：11698751
> 
> 赞同：0
> 
> 时间：2012-07-28T06:10:06.903
> 
> 标签：c#, asp.net

我正在尝试将第一个 .aspx 页面中的 Label.Text 会话到第二个 .aspx 页面中的另一个标签。我从数据库中检索我的值并将它们放在第一个 Label.Text 中，并希望将此标签（我从数据库中获取文本）会话到链接到第一页的另一个页面。我使用这种方法是因为我有一个详细的产品页面（我的第一个 .aspx 页面），其中包含许多产品，当用户单击特定产品时，它的产品名称必须显示在 .aspx 的第二页中。我的问题是，当我在第一页上的标签文本上进行会话时，该值不会传递到另一页。

我第一页的 .cs 代码（后面的代码）：

```
Session["productName"] = productName.Text;
    Response.Redirect("products2.aspx"); 
```

我的第二页的 .cs 代码（后面的代码 - 我将此代码放在页面加载中）

```
if (Session["productName"] != null)
        productName.Text = Session["productName"].ToString(); 
```

我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:21:52.537

为了使会话不会长时间过期，您应该遵循两个步骤。

```
Keep a continous eye on the Session Timeout.
Redirect the session when its about to expire. 
```

检测会话的基本页面将向您解释您需要做的每件事，请参考一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:22:53.537

您的代码完全正确.. 但我的问题是您是否在页面加载中使用 ispostback ？

如果没有，那么像这样使用它..因为回发有时你无法获得价值。然后把你的代码如果不是回发

```
page_load()
{
if(ispostback)
{

}
else
{
//put your code here
}
} 
```

# java - 查找具有给定名称（例如“//nodeName”）的所有节点的标准 xpath 语法失败

> ID：11698753
> 
> 赞同：1
> 
> 时间：2012-07-28T06:10:46.890
> 
> 标签：java, xml, xpath

我已经加载了一个 XML 文档，并尝试使用 xpath 来查找所有名为“ **CodeList** ”的节点。无论出于何种原因，xpath 表达式`//CodeList`提供了 0 个节点，但 xpath 表达式`/.//CodeList`为我提供了正确识别的节点列表。阅读互联网上的各种教程，`//CodeList`应该是正确的语法来做我想做的事。

我不确定为什么会这样。xpath 表达式`.`与`/.`返回相同的节点，这似乎是文档（getNodeName 返回“#document”）。

有人建议我的类路径中的库可能是问题的根源。

到目前为止，唯一与 XML 相关的依赖库是：

*   xmlbeans-2.3.0
*   xml-apis-1.3.04
*   xalan-2.7.1
*   xercesImpl-2.9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:51:48.723

`/CodeList`并且`/.//CodeList`都应该返回完全相同的结果。如果他们不这样做，那就是一个错误。两者都应返回无命名空间中的所有 CodeList 元素。如果您的元素都在（默认）命名空间中，则两个表达式都不应返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:30:54.443

尝试

```
"//CodeList/*/text()" 
```

并且您将在行中拥有所有子节点

# html - 使用 MVC 3（不显眼的 ajax）对整个模型进行客户端验证

> ID：11698755
> 
> 赞同：4
> 
> 时间：2012-07-28T06:10:49.307
> 
> 标签：html, asp.net-mvc-3, validation, client-side, unobtrusive-javascript

我已经为单个属性进行了客户端验证，但是，我想使用客户端验证在模型级别（2 个或更多属性）进行验证。

我`@Html.ValidationSummary(true)`用来显示我创建的 Model 属性的验证错误。

但是，当生成模型错误时，它不会显示消息。它会阻止执行操作，但不会显示错误。

有人知道为什么会这样吗？

我的预感是它与客户端验证有关，因为在这种情况下服务器端不起作用，因为我必须使用 Ajax 表单。

任何意见，将不胜感激！

**模型属性**

```
public class AuditDetailValidatorAttribute : ValidationAttribute, IClientValidatable
{
    public AuditDetailValidatorAttribute()
    {
        ErrorMessage = "Must select an NCN level...";
    }

    public override bool IsValid(object value)
    {
        AuditRequirementDetail audit = value as AuditRequirementDetail;

        if (audit == null || audit.AuditResult.Id == 0 || audit.AssessmentLevel.Id == 0)
        {
            return true;
        }
        else
        {
            return !(audit.AuditResult.Id == 4 && audit.AssessmentLevel.Id == 1);
        }
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new List<ModelClientValidationRule> 
        {
            new ModelClientValidationRule 
            {
                ValidationType = "required",
                ErrorMessage = this.ErrorMessage
            }
        };
    }
} 
```

**模型类**

```
 [AuditDetailValidator]
    public class AuditRequirementDetail
    {
        // Constructor
        public AuditRequirementDetail()
        {
            // instantiate the contained objects on AuditRequirementDetail creation
            AssessmentLevel = new AssessmentLevel();
            AuditResult = new AuditResult();
            Requirement = new RequirementDetail();
            Attachment = new Attachment();

            Counter = 0;
        }
        /* rest of the code */
     } 
```

**看法**

```
@model pdiqc.Models.AuditRequirement.AuditRequirementDetail

@{
    var SuccessTarget = "success" + Model.DetailID;
    var IsValidTarget = "IsValid" + Model.DetailID;
    var PerformCompletedTarget = "PerformCompleted" + Model.DetailID;
    var AuditResultTarget = "AuditResult_Id" + Model.DetailID;
    var AssessmentLevelTarget = "AssessmentLevel_Id" + Model.DetailID;
    var DesignatorTarget = "Designator_Id" + Model.DetailID;
    var EvidenceTarget = "Evidence_Id" + Model.DetailID;
    var AttachmentTarget = "Attachments_Id" + Model.DetailID;

    var AuditResultReferral = "#" + AuditResultTarget;
    var AssessmentLevelReferral = "#" + AssessmentLevelTarget;
    var DesignatorReferral = "#" + DesignatorTarget;
    var EvidenceReferral = "#" + EvidenceTarget;
    var AttachmentReferral = "#" + AttachmentTarget;
}

    @using (Ajax.BeginForm("PerformRequirement", "Audit", new AjaxOptions { HttpMethod = "POST", OnSuccess = "success" }, new {Class="PerformReqForm" }))
    {
        @Html.ValidationSummary(true)
        if ((Model.AuditResult.Id == 1 && Model.AssessmentLevel.Id > 1) || Model.Evidence == string.Empty || Model.Evidence == null)
        {
            <input class="@IsValidTarget" name="IsValid" type="hidden" value=false />
        }
        else
        {
            <input class="@IsValidTarget" name="IsValid" type="hidden" value=true />
        }

       <p class="reqText">@Model.RequirementLabel.ConfigurableLabelDesc #@ViewBag.PerformCounter - @ModelMetadata.FromLambdaExpression(x => x.Requirement.Text, ViewData).SimpleDisplayText</p>
       <div class="hide">
       /* REST OF CODE */
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:59:00.507

我为一个复选框编写了一个自定义验证器，以确保它被厚脸皮并且必须执行以下操作。

```
<script type="text/javascript">
    $(function() {
        $.validator.unobtrusive.adapters.addBool('requiredcheckbox', 'required');
    }(jQuery));
</script> 
```

还包括 @Html.ValidationMessageFor(x=>x.yourProp)

# css - 如何在 Ubuntu 12.04 上安装 LESS？

> ID：11698758
> 
> 赞同：13
> 
> 时间：2012-07-28T06:11:31.307
> 
> 标签：css, less, ubuntu-12.04

我正在使用 Ubuntu 12.04。我想在我的系统上安装[LESS 。](http://lesscss.org/)谁能告诉我如何安装`LESS`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T06:19:05.847

```
sudo apt-get update
sudo apt-get install git-core curl build-essential openssl libssl-dev
git clone https://github.com/joyent/node.git
cd node
./configure
make
sudo make install
node -v 
```

现在下载 NPM，我们将使用它来安装 LESS

```
curl http://npmjs.org/install.sh | sudo sh
npm -v
npm install less 
```

您必须将 PATH 更新为 LESS

```
gedit ~/.bashrc
PATH=$PATH:$HOME/node_modules/less/bin
source ~/.bashrc 
```

您现在应该能够从终端窗口调用 LESS，如下所示：

```
lessc LESSFILE.less > CSSFILE.css 
```

（来源：[sprResponsive](https://sprresponsive.com/install-less-on-linux/)）

# c++ - TFTP C++没有收到ACK

> ID：11698761
> 
> 赞同：0
> 
> 时间：2012-07-28T06:12:02.240
> 
> 标签：c++, udp, client, tftp

我正在使用 C++ 编写一个 TFTP 客户端。我能够使用“八位字节”模式向默认的 TFTP 客户端 (tftpd32) 发送读取请求。问题是我无法在常规 TFTP 响应中发回 ACK。我收到以下错误：

```
Connection received from 127.0.0.1 on port 51401 [27/07 23:03:15.612]
Read request for file <test.txt>. Mode octet [27/07 23:03:15.612]
Using local port 51402 [27/07 23:03:15.612]
Connection received from 127.0.0.1 on port 51401 [27/07 23:03:18.624]
Unexpected request 4 from peer [27/07 23:03:18.624]
Returning EBADOP to Peer [27/07 23:03:18.624] 
```

为什么我可以使用相同的方法发送 RRQ 但不能发送 ACK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:46:22.487

可能是一个不符合要求的 ACK 数据包？看起来您正在发送带有 ACK 操作码的请求……</p>

来自 RFC 1350 的 ACK 数据包的形式：

```
 2 bytes     2 bytes
                 ---------------------
                | Opcode |   Block #  |
                 --------------------- 
```

其中操作码=4

# android - 需要从 http://code.google.com/p/mytracks/ 下载 mytracks 开源应用程序的 .zip 源代码

> ID：11698763
> 
> 赞同：-1
> 
> 时间：2012-07-28T06:12:16.467
> 
> 标签：android

我想下载适用于 android 的 mytracks 开源应用程序的 .zip 源代码文件，但找不到下载链接，我只能从[http://code.google.com/p/mytracks/创建克隆](http://code.google.com/p/mytracks/)

请告诉我或给我发送 .zip 格式的 mytracks 源代码链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:15:58.360

如果开发人员没有提供源存档，那么您必须自己生成一个。

但是，您仍然可以通过设置和配置[Mercurial](http://mercurial.selenic.com/)轻松获取源代码，然后在命令行中执行以下命令：

```
hg clone https://code.google.com/p/mytracks/ 
```

这会将源代码下载到您当前的工作目录。

# android - 如何清除以前的输入？

> ID：11698766
> 
> 赞同：-3
> 
> 时间：2012-07-28T06:13:03.427
> 
> 标签：android, android-activity

在我的应用程序中..有 2 个活动，即 page1 和 page2。流程是 page1--> page2

在第 1 页上，我使用了许多复选框。选择一个复选框后，当我按下“下一步”按钮时，它会转到显示结果的 page2 活动，但是当我按下后退按钮并选择另一个复选框时，它仍然在 page2 上显示相同的结果，即之前的选择。我是android的新手。请帮帮我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:19:39.153

```
i thik you should mentain page1 using 

@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
   // here you checkyour checked checkbox items and make it unchecked 

    } 
```

这可能对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:20:09.447

我以为您有自己的后退按钮..如果您使用手机的后退按钮，请尝试使用此代码完成当前活动并转到上一个活动[这将添加到 page2 活动]：

```
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        finish();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

如果要实现自己的后退按钮，请在按钮的侦听器下，使用意图启动活动以返回上一个活动。

```
Intent intent = new Intent(Page2ActivityFileName.this, Page1ActivityFileName.class);
startActivity(intent);
finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:18:24.147

看到你可能正在使用 startactivity(intent); 而在这种情况下，您应该使用 startactivityforresult(intent); 希望你明白，如果不发表评论，我会用一些代码详细说明我的答案。

# jquery - 尝试使用 javascript 调用使代码工作

> ID：11698768
> 
> 赞同：0
> 
> 时间：2012-07-28T06:13:17.797
> 
> 标签：jquery

不幸的是，下面的这段代码不会在萤火虫控制台上打印任何东西，也不会抛出错误，不确定这段代码有什么问题。

```
$(document).ready(function(){

var animals = [  
      {species: 'Lion', name: 'King'},  
      {species: 'Whale', name: 'Fail'}  
    ];  

    for (var i = 0; i < animals.length; i++) {  
      (function (i) {   
        this.print = function () {   
          console.log('#' + i  + ' ' + this.species + ': ' + this.name);   
        }   
      }).call(animals[i], i);  
    }  

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:18:41.277

您正在为数组中的每个对象分配一个`.print()`方法`animals`，但您从未调用该方法，因此该代码没有预期的输出。

# iphone - 我可以连接到重要的位置更改服务，以便我可以跟踪电话的最新位置吗？

> ID：11698776
> 
> 赞同：0
> 
> 时间：2012-07-28T06:14:45.520
> 
> 标签：iphone, gps, hook

我很想构建一个在 IOS 后台运行的 OS 应用程序（如守护进程）的自动启动，当手机更改其位置时，应用程序将一些信息（用户 ID、GPS、时间......）发送到网络立即服务器，此外，我希望我的应用程序没有图标，用户不能轻易找到它正在运行或轻松删除它。所以我只是想知道这些是否是我可以挂钩的位置更改通知，以便我可以执行我的代码？有人给我一个好主意吗？我不想将我的应用程序放在 appstore 上，而不是将其打包在 deb 中，所以我可以使用任何私有 api 或其他非官方方法....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:21:05.720

您可以使用`CoreLocation`本机框架。我们可以动态访问用户/设备的当前位置。按照链接获取说明[coreLocation 教程](http://www.vellios.com/2010/08/16/core-location-gps-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:23:05.327

根据 Apple 的文档和指南，我认为没有图标就不能存在应用程序。SDK 也没有此功能。App Store 不会接受任何私有 API。但是，您可以将您的项目发布到用于越狱手机的非官方 AppStores 上。

# java - Springs集成的回复关联流程详情

> ID：11698781
> 
> 赞同：5
> 
> 时间：2012-07-28T06:15:33.237
> 
> 标签：java, spring-integration

我找不到使用网关和服务激活器进行回复处理的文档。

如果我有网关：1) 向通道 ReqChannel 发送请求 2) 接受通道 RepChannel 上的回复

ReqChannel 连接到路由器，将传入消息路由到某些服务激活器之一，比如 AServiceActivator 和 BServiceActivator，并且服务激活器具有配置的 output-channel="RepChannel"。

如果我在网关的接口上异步或同时从不同的线程执行多个方法调用，网关将如何将传入的回复与实际的服务调用者相关联？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:47:38.757

网关创建一个临时回复通道并将其放在消息的标头中。这种机制提供了必要的关联，因为每条消息都有自己的回复通道。

如果最终消费者（比如服务激活器）没有输出通道，框架会自动将回复发送到回复通道标头。

出于这个原因，通常不需要在网关上声明一个回复通道以供最终消费者发送。

但是，有时这很有用 - 例如，如果您想窃听回复通道，或将其设为发布-订阅通道，因此结果会发送到多个地方。

在这种情况下（当网关上有回复通道，并且最终消费者在那里发送消息时），框架只是将显式声明的回复通道桥接到消息头中的临时回复通道。

因此，在您的流程中保留 replyChannel 标头至关重要。您不能向回复通道发送任意回复，除非您包含原始消息的回复通道标头。

# android - 如何从原始文件夹资源设置铃声

> ID：11698784
> 
> 赞同：1
> 
> 时间：2012-07-28T06:15:41.727
> 
> 标签：android

我看到了多个关于这样做的线程，但它们的方法都不同。有人能告诉我获取原始资源（即“song.mp3”）并将其设置为手机铃声的最终方法吗？我知道它是这样的： 1\. 将歌曲推送到外部存储。2.设置铃声使用歌曲保存在外部存储中的绝对路径。

但是，如果有人有一些 java 来展示它是如何发挥作用的，那就太好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T07:09:33.147

像这样使用，可能会有所帮助

```
Uri path = Uri.parse("android.resource://com.packagename/raw/song.mp3");
            RingtoneManager.setActualDefaultRingtoneUri(
                    getApplicationContext(), RingtoneManager.TYPE_RINGTONE,
                    path);

            RingtoneManager.getRingtone(getApplicationContext(), path)
                    .play(); 
```

# c# - 如何发送包含嵌入自动生成链接的图像的电子邮件？

> ID：11698786
> 
> 赞同：1
> 
> 时间：2012-07-28T06:15:55.613
> 
> 标签：c#, asp.net, image, hyperlink, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我正在开发一个培训管理系统，该系统将每周向我部门的员工发送电子邮件通知，以参加每周一次的短期培训测验。一切正常。对于发送电子邮件通知，我当然使用的是 C# Mail 功能。该电子邮件是基于文本的电子邮件，每周都会包含指向新测验的链接。

现在，我想将此基于文本的电子邮件作为基于图像的电子邮件。该图像中有一个特定部分将作为新测验的链接。所以每周都会在图片的那部分下有一个新的链接。我在这部分苦苦挣扎，我不知道如何修改我的 C# Mail 函数来处理它。这是我第一次使用`C# Mail function`. 我在谷歌上搜索了很多，我很困惑。仅供参考，我设计了我的邮件功能来处理将相同的电子邮件发送给 200 多个用户，方法是将它们分成 10 个用户的列表，如下所示。

**您能帮我修改下面显示的代码以处理发送该图像吗？让我们假设我们有任何图像。**

**C#代码：**

```
protected void Page_Load(object sender, EventArgs e)
    {
        Send();
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
    {
        SmtpClient sc = new SmtpClient("Mail Server");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("Test@MailServer.com", "TestSystem");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void SendEmailTOAllUser()
    {
        string connString = "Data Source=localhost;Initial Catalog=TestDB;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string quizid = "";

            // Open DB connection.
            conn.Open();

            string cmdText = "SELECT MIN (QuizID) As mQuizID FROM dbo.QUIZ WHERE IsSent <> 1";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        // There is only 1 column, so just retrieve it using the ordinal position
                        quizid = reader["mQuizID"].ToString();

                    }
                }
                reader.Close();
            }

            string cmdText2 = "SELECT Username FROM dbo.employee";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }
                            // Just use the ordinal position for the user name since there is only 1 column
                            sbEmailAddresses.Append(sName).Append("@MailServer.com");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.Quiz SET IsSent = 1 WHERE QuizId = @QuizID";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("@QuizID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string link = "<a href='http://localhost/test.aspx?testid=" + quizid + "'> Click here to participate </a>";
                string body = @".................................. ";

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                if (!string.IsNullOrEmpty(quizid))
                {
                    for (int userIndex = 0; userIndex < addressList.Count; userIndex++)
                    {
                        sendCount++;
                        if (addressesToSend.Length > 0)
                            addressesToSend.Append(",");

                        addressesToSend.Append(addressList[userIndex]);
                        if (sendCount == 10 || userIndex == addressList.Count - 1)
                        {
                            SendEmail(addressesToSend.ToString(), "", "Notification", body, true);
                            addressesToSend.Clear();
                            sendCount = 0;
                        }
                    }

                    // Update the parameter for the current quiz
                    oParameter.Value = quizid;
                    // And execute the command
                    cmd.ExecuteNonQuery();
                }
            }
            conn.Close();
        }
    } 
```

**更新：**

伙计们，你们没有明白我的意思。整个电子邮件将是一个图像，并且该图像的小部分（如小圆圈）将作为超链接而不是整个图像。而那个链接我们每周都会更改，比如default.aspx/testid=12等等。**那么该怎么做呢？**

**更新#2：** 我更新了代码的以下部分以包含图像，但我在添加 AlternateViews.ADD(av) 时遇到了问题。**如何解决这个问题？**

```
string body = @"........................";
                            ";
                AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);
                LinkedResource lr = new LinkedResource("~/EmailNotification.jpg");
                lr.ContentId="image1";
                av.LinkedResources.Add(lr);
                //msg.AlternateViews.Add(av); 
```

**更新#3：**

```
protected void Page_Load(object sender, EventArgs e)
    {
        Send();
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml, AlternateView av)
    {
        SmtpClient sc = new SmtpClient("Mail Adderess");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("test@MailServer.com", "TestSystem");

            //QuizLink is appSetting inside your web config
            string newLink = System.Configuration.ConfigurationManager.AppSettings["QuizLink"].ToString();

            string html = "<h1>Quiz!</h1><img src=/fulladdress/someimage.png usemap ='#clickMap'>";
                   html += "<map id =\"clickMap\" name=\"clickMap\">" +
                            "<area shape =\"rect\" coords =\"0,0,82,126\" href ="+ newLink +" alt=\"Quiz\" /></map>";

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            msg.AlternateViews.Add(av);
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void Send()
    {
        string connString = "Data Source=localhost;Initial Catalog=TestDB;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string quizid = "";

            // Open DB connection.
            conn.Open();

            string cmdText = "SELECT MIN (QuizID) As mQuizID FROM dbo.QUIZ WHERE IsSent <> 1";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        // There is only 1 column, so just retrieve it using the ordinal position
                        quizid = reader["mQuizID"].ToString();

                    }
                }
                reader.Close();
            }

            string cmdText2 = "SELECT Username FROM dbo.employee";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }

                            sbEmailAddresses.Append(sName).Append("@MailServer");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.Quiz SET IsSent = 1 WHERE QuizId = @QuizID";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("@QuizID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string link = "<a href='http://localhost/Test.aspx?testid=" + quizid + "'> Click here to participate </a>";
                string body = @".............................";
                AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);
                LinkedResource lr = new LinkedResource("~/EmailNotification.jpg", MediaTypeNames.Image.Jpeg);
                lr.ContentId="image1";
                av.LinkedResources.Add(lr);
                //msg.AlternateViews.Add(av);

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                if (!string.IsNullOrEmpty(quizid))
                {
                    for (int userIndex = 0; userIndex < addressList.Count; userIndex++)
                    {
                        sendCount++;
                        if (addressesToSend.Length > 0)
                            addressesToSend.Append(",");

                        addressesToSend.Append(addressList[userIndex]);
                        if (sendCount == 10 || userIndex == addressList.Count - 1)
                        {
                            SendEmail(addressesToSend.ToString(), "", "Notification", body, true, av);
                            addressesToSend.Clear();
                            sendCount = 0;
                        }
                    }

                    // Update the parameter for the current quiz
                    oParameter.Value = quizid;
                    // And execute the command
                    cmd.ExecuteNonQuery();
                }
;
                }

            }
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:30:30.733

您必须将图像作为 HTML 的一部分发送。使用以下代码

```
myemail.Body = "<h1>Quiz!</h1><img src=/fulladdress/someimage.png onclick="location.href='myPage.html'">";

myemail.IsBodyHtml = true; //Send this as plain-text 
```

我从这些链接中获得了帮助。希望对您也有帮助

1.  [http://www.intstrings.com/ramivemula/c/how-to-send-an-email-using-c-net-with-complete-features/](http://www.intstrings.com/ramivemula/c/how-to-send-an-email-using-c-net-with-complete-features/)

2.  [发送带有 HTML 文件作为正文的电子邮件 (C#)](https://stackoverflow.com/questions/1155797/send-a-email-with-a-html-file-as-body-c)

**更新**

将您的测验 URL 存储在数据库中，以便每周更改使用图像映射创建可点击的图像的一部分。如下构建html。

```
//in this case your newLink would be default.aspx/testid=12
string newLink = GetNewLinkFromDB();

string html = "<h1>Quiz!</h1><img src=/fulladdress/someimage.png usemap ="#clickMap">";
html += "<map id =\"clickMap\" name=\"clickMap\">
<area shape =\"rect\" coords =\"0,0,82,126\" href ="+ newLink +" alt=\"Quiz\" />
</map>" 
```

**更新 2**

```
protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
    {
        SmtpClient sc = new SmtpClient("MailServer");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("test@mailServer.com", "TestSystem");

            //QuizLink is appSetting inside your web config
            string newLink = System.Configuration.ConfigurationManager.AppSettings["QuizLink"].ToString();

    string html = "<h1>Quiz!</h1><img src=/fulladdress/someimage.png usemap ="#clickMap">";
    html += "<map id =\"clickMap\" name=\"clickMap\">
    <area shape =\"rect\" coords =\"0,0,82,126\" href ="+ newLink +" alt=\"Quiz\" />
    </map>"

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = html ;
            msg.IsBodyHtml = isBodyHtml;
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

**更新 **

```
string html = "<h1>Quiz!</h1><img src='" + src + "' usemap ='#clickMap'>";
            html += "<map id =\"clickMap\" name=\"clickMap\">" +
                     "<area shape =\"rect\" coords =\"0,0,82,126\" href =" + quickLink + "alt=\"Quiz\" title='Click For Quiz'/></map>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:31:18.883

添加你的消息正文

`<a href="Default.aspx" > <img alt="abc" src='"+ imageURl +"' /></a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:38:37.053

我建议使用[MailMessage.AlternateViews](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews.aspx)来获取用于存储邮件正文替代形式的附件集合。

例如，您可以只发送带有图像的纯文本消息和/或 html 格式的消息

# asp.net - 从数据库中收集路径并在 ASP.NET C# 中显示带有标签的图像

> ID：11698793
> 
> 赞同：-1
> 
> 时间：2012-07-28T06:16:36.380
> 
> 标签：asp.net

我在数据库中保存文件路径。假设一个图像文件路径，它在项目源文件夹之外。使用 FileUpload 控件收集此路径。接下来，将此路径从数据库读取到字符串中

```
string path=@dr["image"].ToString(); 
```

现在想用 html 图像标签显示这个图像。

```
new_main.InnerHtml = "<a href=\"" + linkimage + "\"><img src=\"" + path + "\" alt=\"image\" /> </a>"; 
```

它不工作。在网上登记，但没有什么对我有用。关于解决方案的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:20:02.523

您需要使用相对路径而不是使用物理路径。假设您在 d:\Websites\Testsite\ 中托管了网站，那么它是物理路径，您可以通过提供 url 来访问它，`http://yourdomain/Testsite/first.html`那么这是您必须提供链接图像和路径的虚拟路径一条虚拟路径。

您可以访问网站文件夹中的文件，也可以在网站文件夹之外创建文件夹的虚拟目录并通过虚拟目录访问它。本文说明您[**必须创建一个虚拟目录**](http://support.microsoft.com/kb/172138)

假设您有网站文件夹 d:\websites\Testsite 并且您想要访问 d:\Data\Testfile.jpg 中的文件，在 TestWebsite 侧创建一个虚拟目录指向 d:\Data 并通过虚拟目录访问其中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:31:47.103

您的图像路径不是相对的，它应该像例如。~/Images/myimage.png 安装在 D:\data\myimage.png 中。如果您的图像路径是相对的，那么试试这个例子

```
string Path="~/Images/myimage.png";
    new_main.InnerHtml = string.Format(@"<a href='{0}'><img src='{1}' alt='image' /> </a>",Path); 
```

# javascript - 鼠标悬停时的登录弹出窗口

> ID：11698794
> 
> 赞同：1
> 
> 时间：2012-07-28T06:17:01.510
> 
> 标签：javascript, asp.net

我正在尝试创建一个弹出登录屏幕。它应该在用户将鼠标悬停在超链接上时出现，如果鼠标移出弹出窗口，它就会消失。
我在下面的代码有效，但不幸的是，如果鼠标移到弹出窗口内的另一个元素（例如用户名和密码文本框）上，弹出窗口会错误地关闭。有什么想法可以解决这个缺陷吗？

```
<script type="text/javascript" language="javascript">

        function showDiv(display) {
            if (display) { document.getElementById('hoverLoginBox').style.display = 'block'; }
            else { document.getElementById('hoverLoginBox').style.display = 'none'; }
        }
</script>

<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/register.aspx" CssClass="hyperlink"
        onmouseover="showDiv(true);">login</asp:HyperLink>
<div id="hoverLoginBox" onmouseout="showDiv(false);">
        <asp:Login ID="Login3" runat="server" CssClass="loginBox" CreateUserText="Create a new  Client Account"
            CreateUserUrl="~/contact-us.aspx" PasswordRecoveryText="Forgotten Your Password?"
            TitleText="" PasswordRecoveryUrl="~/password-recovery.aspx" LoginButtonType="Image"
            FailureText="Invalid Username / Password." DestinationPageUrl="~/membership/user-profile.aspx"
            FailureAction="RedirectToLoginPage">
            <LayoutTemplate>
                <asp:TextBox ID="UserName" runat="server" CssClass="textbox">username</asp:TextBox>
                <asp:TextBox ID="Password" runat="server" CssClass="textbox">password</asp:TextBox>                  
                <asp:Button ID="Button1" runat="server" CssClass="hoverLoginButton" Text="Login" />
            </LayoutTemplate>
        </asp:Login>
        <div class="loginLinks">
            <asp:HyperLink ID="CreateUserLink" runat="server" NavigateUrl="~/register.aspx" CssClass="hyperlink">Create Account</asp:HyperLink>&nbsp;&nbsp;|&nbsp;&nbsp;
            <asp:HyperLink ID="PasswordRecoveryLink" runat="server" NavigateUrl="~/password-recovery.aspx"
                CssClass="hyperlink">Forgotten Your Password?</asp:HyperLink>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:47:33.977

使用一点点 jQuery

```
<script src="../Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('input[id$=Button1]').mouseover(function () {
            $('table[id$=hoverLoginBox]').show();
        });
        $('input[id$=Button1]').mouseout(function () {
            $('table[id$=hoverLoginBox]').hide();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T06:31:06.350

```
make a hyper link as

    <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/register.aspx" CssClass="hyperlink" onmouseover="showPop('hoverLoginBox');">login</asp:HyperLink>                              

add this in pop up div
<div id="hoverLoginBox" onmouseout="showDiv('hoverLoginBox');">

and apply javascript as 

    function showPop(obj){
       if(document.getElementById){
       var el = document.getElementById(obj);
          if(el.style.display != "block"){
             el.style.display = "block";
          }else{
             el.style.display = "none";
          }
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:54:14.773

我使用 CSS 解决了这个问题，没有任何代码：

ASPX：

```
 <div id="divSideMenu">
        <ul>
            <li><a class="home" href="home.aspx" onmouseover="return show_contact_details()"></a>
            </li>                
            <li>
                <div id="hoverLoginContainer">
                    <a href="login.aspx" class="lock"></a>
                    <div id="hoverLoginBox">
                        <asp:Login ID="Login3" runat="server" CssClass="loginBox" CreateUserText="Create a new  Client Account"
                            CreateUserUrl="~/contact-us.aspx" PasswordRecoveryText="Forgotten Your Password?"
                            TitleText="" PasswordRecoveryUrl="~/password-recovery.aspx" LoginButtonType="Image"
                            FailureText="Invalid Username / Password." DestinationPageUrl="~/membership/user-profile.aspx"
                            FailureAction="RedirectToLoginPage">
                            <LayoutTemplate>
                                <asp:TextBox ID="UserName" runat="server" onblur="WaterMark(this, event);" onfocus="WaterMark(this, event);"
                                    CssClass="textbox">username</asp:TextBox>
                                <asp:TextBox ID="Password" runat="server" onblur="PasswordWaterMark(this, event);"
                                    onfocus="PasswordWaterMark(this,event);" CssClass="textbox">password</asp:TextBox>
                                <asp:Button ID="Button1" runat="server" CssClass="hoverLoginButton" Text="Login" />
                            </LayoutTemplate>
                        </asp:Login>
                        <div class="loginLinks">
                            <asp:HyperLink ID="CreateUserLink" runat="server" NavigateUrl="~/register.aspx" CssClass="hyperlink">Create Account</asp:HyperLink>&nbsp;&nbsp;|&nbsp;&nbsp;
                            <asp:HyperLink ID="PasswordRecoveryLink" runat="server" NavigateUrl="~/password-recovery.aspx"
                                CssClass="hyperlink">Forgotten Your Password?</asp:HyperLink>
                        </div>
                    </div>
                </div>
            </li>
            <li><a class="phone" href="javascript:$zopim.livechat.window.toggle()"></a></li>
            <li><a class="email" href="#" onclick="return show_contact_form('reseller=1160')"></a></li>
        </ul>
    </div> 
```

CSS：

```
#hoverLoginBox 
{
    display: none;
    border: 1px solid #D5D1CD;
    padding: 20px 30px 20px 30px;
    width: 300px;
    z-index: 1000px;
    top: 180px;  
    border-radius: 5px;
    position: fixed;
    left: 45px; 
}

#hoverLoginContainer:hover #hoverLoginBox 
{
    display:  block;
}​

#hoverLoginBox .loginBox
{
    width: 100%;
}   

#hoverLoginBox .textbox
{
    width: 100%;
    margin-bottom: 10px;
    font-family: Arial, Helvetica, sans-serif;
    color: #554f48;
    fonT-weight: normal;
} 
```

# php - 如何使用 HMVC 模块化扩展为 CodeIgniter 创建搜索小部件模块

> ID：11698795
> 
> 赞同：0
> 
> 时间：2012-07-28T06:17:09.247
> 
> 标签：php, codeigniter, session, widget, hmvc

有人可以给我一个在 CodeIgniter 中使用 HMVC 模块化扩展的最佳方法吗？我喜欢我的模块像插件一样独立。所以我的模块有自己的控制器、模型、视图和库、配置等。所以当我想在其他项目中重用模块时，我可以复制并粘贴模块到其他项目中。但有些事情我不清楚，例如我制作了一个搜索模块，显示搜索表单并处理帖子的搜索。我使用 echo modules::run('search/search/search_form'); 在站点视图中调用它 当我提交表单时，我想在当前页面中输出结果，因此我将 search_results 存储在会话变量中，以让当前页面访问搜索结果，但我认为这不是一个好主意，因为会话有 4kb 限制，如果我没有记错。如何不使用会话变量在当前页面中输出搜索结果？就像我想使用 $this->load->view() 函数并传递数据一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:24:11.777

我只会将搜索字符串和当前页面放在会话中，并在 MY_Controller 中创建一个侦听器，以检查会话中的搜索字符串。如果会话包含搜索字符串，则从搜索控制器/模块运行搜索方法并将该数据传递到当前页面（例如模块）。

# mysql - MySql FOREIGN KEY 约束，错误 1005

> ID：11698803
> 
> 赞同：2
> 
> 时间：2012-07-28T06:18:57.960
> 
> 标签：mysql, sql, foreign-keys, innodb, foreign-key-relationship

我可以[看到](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)存在约束问题，但是在这里创建外键的正确方法是什么？

```
mysql> 
mysql> show tables;
+----------------+
| Tables_in_nntp |
+----------------+
| articles       |
| newsgroups     |
+----------------+
2 rows in set (0.01 sec)

mysql> 
mysql> describe newsgroups;
+-----------+---------+------+-----+---------+----------------+
| Field     | Type    | Null | Key | Default | Extra          |
+-----------+---------+------+-----+---------+----------------+
| id        | int(11) | NO   | PRI | NULL    | auto_increment |
| newsgroup | text    | NO   |     | NULL    |                |
+-----------+---------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
mysql> describe articles;
+--------------+---------+------+-----+---------+----------------+
| Field        | Type    | Null | Key | Default | Extra          |
+--------------+---------+------+-----+---------+----------------+
| id           | int(11) | NO   | PRI | NULL    | auto_increment |
| subject      | text    | NO   |     | NULL    |                |
| content      | text    | NO   |     | NULL    |                |
| number       | text    | NO   |     | NULL    |                |
| sent         | date    | NO   |     | NULL    |                |
| header_id    | text    | NO   |     | NULL    |                |
| newsgroup_id | int(11) | NO   |     | NULL    |                |
+--------------+---------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

mysql> 
mysql> ALTER TABLE articles ADD FOREIGN KEY (newsgroup_id) REFERENCES newsgroup(id);
ERROR 1005 (HY000): Can't create table 'nntp.#sql-3bf_9a' (errno: 150)
mysql> 
```

两个表都使用 innodb。

MySql Query 浏览器生成：

```
ALTER TABLE `nntp`.`articles` ADD CONSTRAINT `new_fk_constraint` FOREIGN KEY `new_fk_constraint` (`newsgroup_id`)
    REFERENCES `newsgroups` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL; 
```

这会导致相同的错误。

![在此处输入图像描述](../Images/871fcc275545f197435c59e8edcd41d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:26:13.700

尝试

```
ALTER TABLE articles
ADD FOREIGN KEY
newsgroup_fk (newsgroup_id)
REFERENCES newsgroups (id) 
```

`articles`从to添加外键`newsgroups`。

# android - 在 Android 应用程序中，“R.java”的作用是什么？

> ID：11698808
> 
> 赞同：27
> 
> 时间：2012-07-28T06:19:37.813
> 
> 标签：android, r.java-file

Android 应用程序有一个名为“R.java”的自动生成文件。请说明其目的。

例如

*   其中包含什么？
*   是什么产生它？

*重复：* [R.java 背后的概念是什么？](https://stackoverflow.com/questions/10004906/what-is-the-concept-behind-r-java)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-28T06:23:20.383

每个应用程序都使用字符串、drawbles、布局和样式等资源。不是将这些资源硬编码到应用程序中，而是将它们外部化并通过 ID 引用它们。R.java 文件包含所有这些资源 ID，无论是由程序员分配还是由 sdk 生成。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-28T06:27:21.627

R.java 是您可以访问资源中任何内容的地方：

*   可绘制对象
*   布局
*   字符串
*   数组
*   ....ETC

[你可以在这里](http://developer.android.com/guide/topics/resources/accessing-resources.html)阅读更多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T06:24:05.280

> R.java 在构建时自动生成。它的内容基于资源文件（包括布局和首选项）。
> 
> 当你删除它时，它会被重新创建，但如果你创建自己的，你会遇到麻烦，因为构建系统将无法替换它。

# c - C中的数组长度有什么限制吗？

> ID：11698811
> 
> 赞同：2
> 
> 时间：2012-07-28T06:19:53.243
> 
> 标签：c

我正在用 C 编写一个程序。我想初始化一个长度为 1,000,000 的数组。
它编译时没有任何错误或警告，但在执行过程中，windows 会发送一个进程终止。
我修改了我的代码，因此将有 4 个数组，每个数组有 500,000 个整数。它再次编译没有错误或警告，但问题仍然存在。

我使用 CodeBlox（我认为是 GCC 编译器）

这是我的代码：

```
#include <stdio.h>
#include <math.h>
// Prototypes:
int checkprime(int n);

int main(){
int m=0;

    int A[500001]={2,2,0};//from k=1 to 500000
    int B[500000]={0};//from k=500001 to 1000000
    int C[500000]={0};//from k=1000001 to 1500000
    int D[500000]={0};//from k=1500001 to 2000000
    int n=3;
    int k=2;
        for(n=3;n<2000001;n +=2){
            if(checkprime(n)){

                if (k<=500000)
                {A[k]=n;
                k +=1;}

                else if ((k>500000)&&(k<=1000000))
                {B[k-500001]=n;
                k +=1;}
                else if ((k>1000000)&&(k<=1500000)){
                C[k-1000001]=n;
                    k +=1;
                }
                else if(k>1500000){
                D[k-1500001]=n;
                k +=1;}
                }//end of if

            }//end for

    int i=0;
    for(i=1;i<500001;i++)
    {
        m=m+A[i];
    }
    for(i=0;i<5000001;i++)
    {
        m=m+B[i];
    }
    for(i=0;i<5000001;i++)
    {
        m=m+C[i];
    }
    for(i=0;i<5000001;i++)
    {
        m=m+D[i];
    }
    printf("answer is %d",m);
return 0;//Successful end indicator
}//end of main

int checkprime(int n){
int m=sqrt(n);
if (!(m%2))
{
    m=m+1;
}
int stop=0;
int d=0;
int isprime=1;
while((m!=1)&&(stop==0)){
d=n%m;
if (d==0){
    stop=1;
    isprime=0;
    }
m -=2;

}//end of while
return isprime;
}//end of checkprime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:48:58.630

使用 ulimit 命令控制最大堆栈大小的限制。编译器可以（或不）将限制设置得更小，但不能大于那个。
要查看当前限制（以千字节为单位）：

```
ulimit -s 
```

要删除限制：

```
ulimit -s unlimited 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:24:11.770

我希望你巨大的初始化数组是静态的或全局的。如果它是一个局部变量，它将在运行时溢出堆栈。

我相信旧版本的 GCC 在初始化数组时具有次优行为（可能是二次时间）。

我也相信*C*标准可能会定义一个（小）最小数组大小，所有符合标准的编译器都应该接受（字符串大小有这样一个下限，它可能小到 512）。

IIRC，最新版本的 GCC 在初始化静态数组时改进了它们的行为。尝试使用 GCC 4.7

使用我的 Debian/Sid `gcc-4.7.1`，我可以编译一个`biga.c`以

```
int big[] = {2 ,
 3 ,
 5 ,
 7 ,
 11 ,
 13 , 
```

并以

```
 399999937 ,
 399999947 ,
 399999949 ,
 399999959 ,
}; 
```

并包含 23105402 行：

```
 % time gcc -c biga.c
 gcc -c biga.c  43.51s user 1.87s system 96% cpu 46.962 total

 % /usr/bin/time -v gcc -O2 -c biga.c
Command being timed: "gcc -O2 -c biga.c"
User time (seconds): 48.99
System time (seconds): 2.10
Percent of CPU this job got: 97%
Elapsed (wall clock) time (h:mm:ss or m:ss): 0:52.59
Average shared text size (kbytes): 0
Average unshared data size (kbytes): 0
Average stack size (kbytes): 0
Average total size (kbytes): 0
Maximum resident set size (kbytes): 5157040
Average resident set size (kbytes): 0
Major (requiring I/O) page faults: 0
Minor (reclaiming a frame) page faults: 691666
Voluntary context switches: 25
Involuntary context switches: 5162
Swaps: 0
File system inputs: 32
File system outputs: 931512
Socket messages sent: 0
Socket messages received: 0
Signals delivered: 0
Page size (bytes): 4096
Exit status: 0 
```

这是在具有 16Gb RAM 的 i7 3770K 台式机上。

作为当地人拥有**庞大的阵列**，即使在内部`main` **也**总是**一个坏主意**。要么对它们进行堆分配（例如，使用`calloc`or `malloc`，然后`free`适当地分配它们），要么使它们成为全局或静态的。调用堆栈上的本地数据空间始终是稀缺资源。一个典型的调用帧（所有局部变量的组合大小）应该小于一千字节。大于 1 兆字节的调用帧几乎总是不好的和不专业的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:23:49.200

就在这里。

本地数组是在栈上创建的，如果你的数组太大，栈会和内存中的其他东西发生冲突，导致程序崩溃。

# objective-c - 无法单击搜索栏表格视图单元格

> ID：11698818
> 
> 赞同：1
> 
> 时间：2012-07-28T06:20:53.210
> 
> 标签：objective-c, xcode

我有一个包含名称数组的表格视图。搜索栏完美地过滤了表格视图中的名称。

问题是`didSelectRowAtIndexpath`单击搜索表格视图单元格时没有被触发。你能帮帮我吗？

我错过了什么？我是否应该包括任何特殊代表以涉及搜索 tableview 单元格单击。

下面是图片和代码。

![在此处输入图像描述](../Images/8a7057c7240bad547b01365f301f5f25.png)

```
 -(void)search
 {
nameArray = [[NSMutableArray alloc] init];
searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 160, 44)];
searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];

searchDisplayController.delegate = self;
searchDisplayController.searchResultsDataSource = self;
self.tableViewFriendsList.tableHeaderView = searchBar;
 }
 - (void)searchDisplayController:(UISearchDisplayController *)controller
 willShowSearchResultsTableView:(UITableView *)tableView
 {
 [tableView setRowHeight:70];
 [tableView reloadData];
 }
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {       

   if (tableView == self.tableViewFriendsList) {
    NSString *friendsID =[[[self.friendsDictionary objectForKey:@"data"] objectAtIndex:indexPath.row] objectForKey:@"id"];
    [[FacebookHelper sharedFacebookHelper] postOnWallWithDelegate:self andID:friendsID];
}

if (tableView == self.searchDisplayController.searchResultsTableView) {
    NSLog(@"I ve come here");
    NSString *friendsID =[friendsListIdArray objectAtIndex:indexPath.row];
    [[FacebookHelper sharedFacebookHelper] postOnWallWithDelegate:self andID:friendsID];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:57:24.053

你忘了设置

```
searchController.searchResultsDelegate = self; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T06:34:20.630

我在我的一个项目中做了一些可能有帮助的事情：

```
// add gesture to detect when table view is being tapped so that keyboard may be dismissed
    UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                                                        action:@selector(dismissKeyboard)];
    gestureRecognizer.cancelsTouchesInView = NO;
    [self.tableView addGestureRecognizer:gestureRecognizer]; 
```

此外，我想知道为什么您**在**表格单元格中有一个搜索栏。您介意在您的应用程序中发布它的屏幕截图吗？恐怕你做的工作可能比必要的多。

# go - 开始 gotour

> ID：11698836
> 
> 赞同：3
> 
> 时间：2012-07-28T06:23:20.330
> 
> 标签：go

我已经安装了 go（并[对其进行了测试](http://golang.org/doc/install#testing)）。当我运行时，`go env`我看到了这个：

```
$ go env
GOROOT="/usr/lib/go"
GOBIN=""
GOARCH="386"
GOCHAR="8"
GOOS="linux"
GOEXE=""
GOHOSTARCH="386"
GOHOSTOS="linux"
GOTOOLDIR="/usr/lib/go/pkg/tool/linux_386"
GOGCCFLAGS="-g -O2 -fPIC -m32 -pthread"
CGO_ENABLED="1" 
```

然而，当我跑到`go get code.google.com/p/go-tour/gotour`本地开始游览时（按照[说明](http://tour.golang.org/#2)），似乎什么都没有发生（我没有得到任何输出，尽管它确实需要几秒钟才能运行，这让我觉得*一定*发生了一些事情）。

说明说要运行生成的 gotour 可执行文件，但我找不到。有人知道我在做什么错吗？我开始觉得我一定很愚蠢，但我就是想不通 running`go get`做了什么（它安装了任何东西吗？它成功了吗？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T07:13:30.440

你进去看了`/usr/lib/go/bin`吗？或者，如果你设置了一个 gopath `$GOPATH/bin`。

默认情况下，`go get`仅在出现错误时打印。生成的可执行文件放置在 GOBIN、GOROOT bin 或 GOPATH bin 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:14:35.257

您的`gotour`go 安装应该已经提供了可执行文件。

当您在`gotour`未执行`go get`先前指示的情况下运行时，它应该会为您提供导入错误。

```
2012/07/28 09:10:18 Couldn't find tour files: import "code.google.com/p/go-tour/": cannot find package 
```

运行`go get`将获取源 - 在本例中来自`code.google.com/p/go-tour`- 并将其放入活动的 go 环境源文件夹中，在您的情况下`GOROOT="/usr/lib/go"`（如果`GOPATH`设置为 no）。源将放置在子文件夹中`src/pkg/code.google.com/p/go-tour`。

签出源代码并`gotour`再次运行后，它可以编译必要的文件并使用该存储库中的静态文件在本地为您提供 gotour。运行`gotour`时它应该为您呈现类似的东西

```
2012/07/28 09:10:00 Serving content from C:\Go\src\pkg\code.google.com\p\go-tour
2012/07/28 09:10:00 Serving at http://127.0.0.1:3999/ 
```

然后，您可以通过提供的地址浏览 gotour。

作为旁注，据我了解，您错过了这一点：您不需要在本地运行它。它只是您正在浏览的 gotour 网站，只是在本地实例化，尽管您通过`go get`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-19T21:47:04.397

输入： $GOPATH/bin/gotour 完全符合您的要求。

# macos - 在 OSX Mountain Lion 下反转颜色

> ID：11698837
> 
> 赞同：23
> 
> 时间：2012-07-28T06:23:31.643
> 
> 标签：macos, osx-mountain-lion

在以前的 OSX 版本中，您可以通过点击`cmd`+ `ctrl`+ `option`+来反转显示屏上的颜色`8`。看来他们已经在 Mountain Lion 中删除了该功能。有谁知道如何恢复该功能？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-28T06:50:56.580

出于某种原因，Mountain Lion 中默认禁用该功能的键盘快捷键，但您可以在

[**系统偏好设置>键盘>键盘快捷键>辅助功能**](https://discussions.apple.com/thread/4142983?start=0&tstart=0)

![设置截图](../Images/272ea1cfb6e1d3b8dfd291cab0fedef0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:19:08.903

在键盘下方，有一个辅助功能菜单，您可以在其中重新启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T06:29:07.340

仍然可以这样做，但我不知道捷径。转到设置 > 辅助功能 > 显示 > 反转颜色。

# objective-c - 具有弹性滚动的视图后面的颜色/图像？

> ID：11698838
> 
> 赞同：2
> 
> 时间：2012-07-28T06:23:33.910
> 
> 标签：objective-c, macos, safari, nsscrollview, nscolor

当弹性滚动开始时，如何将图像设置在视图“后面”？

默认情况下它只是白色，我想将其设置为颜色或图像 - 就像 Safari 如何在其 WebView 后面有亚麻布等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:08:27.847

我目前在我的应用程序中执行此操作的方式只是`UIImageView`在我的视图控制器中的滚动视图后面添加一个大的。

我花了一段时间在表格视图和其他东西上弄乱背景图像属性，但是当我改变`contentInset`/`contentOffset`如果我这样做时，我遇到了很多奇怪的事情。

# google-drive-api - 外部 asp.net mvc 应用程序访问 Google Drive 上的文件

> ID：11698841
> 
> 赞同：2
> 
> 时间：2012-07-28T06:23:48.710
> 
> 标签：google-drive-api, google-apps, google-picker

**我想构建一个具有以下功能的外部 asp.net mvc 应用程序：**

*   该应用程序可通过其自己的域访问，例如 www.itsowndomain.com
*   该应用程序可以访问一个 Google 帐户（例如 itsownaccount@gmail.com），其中所有文件都存储在 Drive 文件夹中。因此，该应用程序的用户不必登录自己的 Google 帐户即可访问该应用程序中的文件。应用程序需要自动访问此（itsownaccount@gmail.com）的谷歌驱动器，该过程应该对用户透明，他们永远不必验证自己，这一切都应该在后台代码中发生应用程序加载。
*   该应用程序将使用 Google Picker 列出 (itsownaccount@gmail.com) 的 google Drive 文件夹中的文件。

**我的问题如下：**

1.  我正在尝试做的事情是否可行，基本上是使用 Google Drive 作为文件存储并下载它们，上传新文件并可能从外部应用程序编辑一些文件？
2.  我可以使用一个帐户，因为所有文件都应该是公开可用的，因此我不希望用户必须考虑在站点中进行身份验证，以便他们可以查看可公开访问的文件？
3.  我该如何实现这一点，是否有教程，因为我看过的教程都不同，因为他们大多尝试使用自己的 Google 帐户对每个用户进行身份验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T20:15:31.520

1.  您可以使用 Google Drive 作为应用程序的存储解决方案，查看 Google Drive SDK：[https ://developers.google.com/drive/](https://developers.google.com/drive/)

2.  Google Drive 应用程序通常依赖用户的帐户来存储他们的文件，但没有什么能阻止您使用您的帐户来存储所有文件并让它们公开访问

3.  [https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)上有一个 ASP.NET MVC 教程和示例应用程序，但是，它使用自己的帐户对每个用户进行身份验证。您可以从它开始，将标准 OAuth 流程替换为始终使用您的凭据的流程，例如，始终使用您提前生成并提供给应用程序的刷新令牌。

# c++ - va_start 作为数组

> ID：11698842
> 
> 赞同：1
> 
> 时间：2012-07-28T06:23:59.353
> 
> 标签：c++

根据我对`va_arg`宏的了解，它检索参数列表指向的下一个参数。有什么方法可以选择我想要获取的参数的索引，比如数组索引？

例如，我需要执行一项操作，我需要调用至少 3 次`va_arg`宏，但我希望这 3 次检索相同的参数，而不是列表中的下一个参数。一种解决方案可能是使用函数并传递参数，但我不希望这样。

此外，如果没有其他宏能够做到这一点，我如何通过指针引用数组参数的开头？我知道它不是便携式的，也不是类型安全的，等等。只是为了学习。

这是我想如何实现它的示例代码：

```
bool SQLBase::BindQuery (char* query, int NumArgs, ...) 
{ 
    va_list argList; 
    va_start(argList, NumArgs); 
    SQLPrepare (hstmt, query, SQL_NTS); 
    for (int x = 0; x < NumArgs; x++) 
    { 
        SQLBindParameter (hstmt, (x+1), GetTypeParameter (va_arg(argList, SQLPOINTER*), SQL_C_CHAR, SQL_CHAR, 10, 0, va_arg(argList, SQLPOINTER*), va_arg(argList, SQLLEN), &recvsize[x]);
    } 
```

va_arg 为 SQLBindParameter 函数调用了 3 次，我希望前 2 次指向同一个参数，而不是增加参数列表中的 count 成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:01:39.627

First of all, calling va_arg multiple times in your function invocation is hairy, since you don't know in which order these calls happen. You need to do this beforehand, so your arguments are retrieved in the correct order.

Second, no: there is no array-style usage auf va_list. This is because va_list doesn't know a thing about the arguments on the stack; you are supplying the type in your va_arg calls, and va_arg can then increase the (internal/conceptual) pointer contained in the va_list because it knows the size of that argument. Getting to the third argument would require you to supply the types of the first two.

If all the arguments are the same size (like "void*") you can always just make a loop that calls va_arg the appropiate number of times. This is "kind of" portable if you can be reasonably sure that your arguments are in fact the same size. I'm not too confident that doing this would be the best course of action, though -- the need to do it might indicate that a different setup would be more appropiate, like passing an array in the first place instead of using a variable argument function.

You can also just take the address of a function argument and assume they are on the stack in some order. This is horribly unportable since you need to know about calling conventions which can vary between compilers, and may even change based on compilation options. I would definitely advise to NOT do something like this.

# node.js - 如何在 Node.js 中监控传出的 HTTP 请求？

> ID：11698845
> 
> 赞同：4
> 
> 时间：2012-07-28T06:24:07.900
> 
> 标签：node.js, tcp

我正在为用节点编写的应用程序构建一个小型开发人员工具（HUD）。在该工具中，我想显示为服务该页面而发出的所有 HTTP/HTTPS 请求（将它们显示给开发人员并记录它们的编号）。有没有一种干净的方法可以做到这一点，它不涉及包装类似的东西`http.request()`？如果不是，为了记录 HTTP 和 HTTPS，需要包装的最低级别的方法是什么？TCP连接怎么样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T10:50:25.137

这个问题的答案取决于你的代码有多复杂。如果您对每个请求发出 3 或 4 个外部资源请求，则只需手动插入分析代码，这可能是最干净、最简单的解决方案。

如果您发出许多请求，猴子修补（包装）`http.request`并且`https.request`可以很容易地完成。

```
patcher = (patchMe) ->
  original = patchMe.request
  patchMe.request = (options, callback) ->
    console.log options.host, options.method # or any other counting, profiling
    original(options, callback)

http = require 'http'
https = require 'https'

patcher(http)
patcher(https) 
```

如果您想要修补的不仅仅是这些请求，那么在 tcp/udp 级别上，不幸的是，您必须阅读源代码以找出可以修补的底层方法，我没有去过那里。

我喜欢阅读[nodetime](http://nodetime.com/)的源代码，它对函数进行了猴子补丁，`require`以在代码中更深入地分析特定函数/模块的任何使用。去阅读那个来源！:)

# android - 如何在 Android 中使用 TextWatcher？

> ID：11698857
> 
> 赞同：0
> 
> 时间：2012-07-28T06:26:37.607
> 
> 标签：android

我有一个自定义 ListView，其中连续包含一个 TextView（数字）和一个 EditText。在标题之外我有一个 TextView。

我的问题是，当我要在任何 editText 中输入任何数字时，在**标题**textView 上它应该显示**ListView 行的 editText 值 * textView 值的乘积。**

之后，如果我在任何其他editText中输入任何其他数字，则计算将与前一个相同，例如**editText值的乘法* ListView行的textView值+editText值的乘法* ListView行的textView值**并显示这个**标题 textView 上的新值**。如果更改任何 editText 的值，则**旧位置的先前值应更新**为对应位置的新值**。** 我知道所有这些工作都将在 textwatcher 中发生，但不知道如何？你能帮助我吗？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T06:33:17.727

我认为这段代码会帮助你......

```
EditText etSearchBar = (EditText)findViewById(Your_id);

    etSearchBar.addTextChangedListener(textwatcher);

    private TextWatcher textwatcher = new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

                //Do what ever you want here after you enter each text
            }
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:32:46.107

在Adapter的getView方法中，setTextChangeListener over editText，在TextWatcher的onTextChanged方法中，做计算，setText到textView上。

# php - PHP在线服务器中的会话验证问题

> ID：11698861
> 
> 赞同：-1
> 
> 时间：2012-07-28T06:27:35.420
> 
> 标签：php, session

我`$_SESSION['admin']=1`在登录表单验证后设置。
之后页面被重定向并检查`$_SESSION['admin']`值和加载内容。
它在当地工作得很好。但它不能在在线linux服务器上。任何帮助..？

**管理员.php**

```
<?php
   session_start();
   $admin = 0;
   if(isset($_SESSION['admin'])){
      $admin = $_SESSION['admin'];
   }
   if($admin == 0){
?>
<form action="" class="login">
     <label>User Name :</label>
     <input type="text" class="uname"/>
     <label>Password :</label>
     <input type="password" class="pwd"/>
     <input type="submit" class="lSubmit" value="SUBMIT"/>
     <p class="alert lAlert">test alert</p>
</form>
<?php }elseif($admin == 1){ ?>
     <h1>Welcome Site Admin..!!</h1>
<?php } ?> 
```

**jQuery**

```
$('.lSubmit').click(function(){
    var name = $('.uname').val();
    var pwd = $('.pwd').val();
    $.post("validation/login.php",{name:name,pwd:pwd}).success(function(data){
        var obj = jQuery.parseJSON(data);
        if(obj.success == 1){
            $('.alert').css('color','#067800');
            window.location = "/admin.php";
        }else{
            $('.alert').css('color','#CC0000');
        }
        $('.lAlert').text(obj.msg);
        $('.lAlert').fadeIn('slow');
    });
    return false;
}); 
```

**验证/login.php**

```
<?php
 session_start();
 $name = $_POST['name'];
 $pwd = $_POST['pwd'];
 $err['success'] = 0;
 $err['msg'] = '';
 if($name == ''){
  $err['msg'] = 'Name required';
 }else if($pwd == ''){
  $err['msg'] = 'Password required';
 }else if($name != 'admin'){
  $err['msg'] = 'Wrong username';
 }else if($pwd != 'admin'){
      $err['msg'] = 'Wrong password';
 }else{
  $err['msg'] = 'Success';
  $err['success'] = 1;
  $_SESSION['admin'] = 1;
 }
 echo json_encode($err);
?> 
```

当我运行它时，它已成功验证，如果用户名和密码是**管理员**，那么它会在警报中显示**成功。**但是在它被重定向并再次将表单加载到在线服务器中之后。但是在本地加载了欢迎文本。但在在线的其他页面中，会话工作正常。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:24:37.523

添加

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

在脚本开始时检查任何错误并回发。我的猜测是您在服务器上有一些权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:29:57.713

我唯一的猜测是会话通常会使用大多数开发工具包（如 xampp）自动启动

在真实服务器上，大多数时候您必须使用 session_start() 手动启动它

# c++ - 过滤最小化事件

> ID：11698867
> 
> 赞同：1
> 
> 时间：2012-07-28T06:29:08.237
> 
> 标签：c++, qt, mdi, qevent

我有一个`QMdiSubWindow`并且我需要过滤最小化事件，以便我可以简单地`hide()`打开窗口。

我尝试了以下方法：

```
void accounts::changeEvent ( QEvent *event )
{
     if(event->QEvent::WindowStateChange) {
          event->ignore(); 
     }
} 
```

这会过滤所有窗口状态更改，例如最大化。我只需要最小化事件。

`event->ignore()`不忽略任何东西。我也尝试过`event->setAccepted(false)`，但在取消事件方面也没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T06:53:24.687

```
void accounts::event(QEvent *e)
{
  if (e->type() == QEvent::WindowStateChange) {
    if (isMinimized()) {
      hide();
      e->ignore();
    } else {
      e->accept();
    }
  }
  QMdiSubWindow::event(e);
} 
```

# matlab - 99.7 覆盖率的箱线图中的胡须值

> ID：11698876
> 
> 赞同：2
> 
> 时间：2012-07-28T06:30:29.350
> 
> 标签：matlab, statistics, boxplot, normal-distribution, outliers

我正在尝试使用 MATLAB 从箱线图中识别异常值。该函数的默认晶须值为 1.5，可提供 +- 2.7*sigma 或 99.3 的覆盖率。但是，我想要 99.7 或 3*sigma 覆盖率。在这种情况下，晶须的价值是多少？我不想随意猜测，所以需要你们的帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T01:48:16.493

一般来说，让：

```
Q1 = icdf('norm',0.25,0,1);
Q3 = icdf('norm',0.75,0,1);
IQR = Q3-Q1; 
```

*   现在，如果您有一个常数`k`（默认情况下[BOXPLOT](http://www.mathworks.com/help/toolbox/stats/boxplot.html#zmw57dd0e47168)`k=1.5`具有胡须长度），那么[IQR 异常值测试](http://en.wikipedia.org/wiki/Outlier#Identifying_outliers)会将范围之外的值识别`[Q1 - k*IQR, Q3 + k*IQR]`为异常值：对应于：

    ```
    >> k = 1.5;
    >> sdCov = [Q1 - k*IQR, Q3 + k*IQR]      %# +/-2.698*sigma coverage
    sdCov =
           -2.698        2.698 
    ```

    或（就曲线下面积而言）：

    ```
    >> area = 2*normcdf(sdCov(2), 0, 1)-1    %# 99.3% coverage
    area =
           0.99302 
    ```

*   在相反的方向，如果你想要一个`sdCov*sigma`覆盖，那么：

    ```
    >> sdCov = 3;
    >> k = (Q1+sdCov)/IQR
    k =
           1.7239 
    ```

    或者：

    ```
    >> area = 0.9973;
    >> sdCov = norminv(1-(1-area)/2);
    >> k = (Q1+sdCov)/IQR 
    ```

    因此，在您的情况下使用以下内容：

    ```
    boxplot(data, 'whisker',1.7239) 
    ```

[这是从维基百科](http://en.wikipedia.org/wiki/File:Boxplot_vs_PDF.svg)借来的插图：

![http://en.wikipedia.org/wiki/Interquartile_range](../Images/e047c3352b6b496be63bb0f43f06685a.png)

# android - 阿拉伯字体在 Android 4.0 中被删减

> ID：11698883
> 
> 赞同：2
> 
> 时间：2012-07-28T06:31:13.260
> 
> 标签：android, android-layout, android-4.0-ice-cream-sandwich

它看起来像 Android 4.0 的有线行为。

在我的项目中有一些阿拉伯语文本。当我在模拟器中使用 Android 4.0 或任何版本运行该项目时，它看起来还不错。但是当我在真正的 Android 4.0 设备上运行它时，看起来文本从右侧被剪掉了。请参阅下面的屏幕。

屏幕 1：在模拟器中

![在此处输入图像描述](../Images/d232ea079cff7ebf249e2bb6b43fa0dd.png)

屏幕 2：在真正的 Android 4.0 设备中

![在此处输入图像描述](../Images/ba2908276d2b68c75a84f3dc8373119d.png)

我不明白为什么会这样。我怎样才能解决这个问题？

代码或行项目：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:orientation="horizontal"
    android:layout_height="wrap_content" android:background="#ffffff">
    <LinearLayout android:orientation="horizontal"
        android:layout_margin="20dp" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_gravity="right|center_vertical"
        android:gravity="right">
        <TextView android:id="@+id/toptext" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="Title"
            android:paddingRight="10dp" android:gravity="right" android:textSize="16sp"
            android:textStyle="bold" android:textColor="#000000" />

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text=" "
            android:paddingRight="15dp" android:gravity="right" android:textSize="16sp"
            android:textStyle="bold" android:textColor="#000000" />

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:36:58.810

作为一种解决方法：尝试为您的视图添加[正确的填充。](http://developer.android.com/reference/android/view/View.html#attr_android%3apaddingRight)

我对 ICS 中的 TextViews 有类似的问题。它们是从底部切开的。幸运的是，谷歌在 Jelly Bean 版本中解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:12:28.693

相对布局和右边距应该是解决方案。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#ffffff"
android:orientation="horizontal" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="20dp"
    android:gravity="right"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/toptext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:text="Title"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/toptextleft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/toptext"
        android:gravity="right"
        android:paddingRight="15dp"
        android:text="Title"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T15:28:42.940

将 TextView 的`android:gravity`属性值设置为`"start"`而不是`"left"`或`"right"`为我修复它。

# mysql - 像 PHP 和 MySQL 一样便宜地托管 MVC 3 和 My SQL

> ID：11698885
> 
> 赞同：0
> 
> 时间：2012-07-28T06:31:30.287
> 
> 标签：mysql, asp.net-mvc, hosting

我想开发一个使用 ASP.Net MVC 3 和 Razor 和 MySQL 的应用程序。

**我认为两者都是开源的，这将降低我的开发成本，如果我错了，请纠正我。**

ASP.Net MVC 3 + MySQL = PHP+MySQL 的开发成本？还是我需要 ASP.Net MVC 3 开发许可证？

现在我正在寻找托管。对于 MVC3 和 MySQL 来说应该更便宜且可靠。建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:15:02.380

我不确定开发成本，但两种情况下的托管成本几乎相同。

[http://www.asp.net/hosting/home](http://www.asp.net/hosting/home)是一个很好的资源来找出好的 windows 主机。

# node.js - php's-`mysql_fetch_array()`-类似 node.js 中的操作？

> ID：11698886
> 
> 赞同：0
> 
> 时间：2012-07-28T06:31:35.870
> 
> 标签：node.js, asynchronous, translation, npm, polyglot

我猜 node.js 的 mysql 驱动程序是异步的，但我不太确定这意味着什么，所以...... node.js 的 npm 模块允许行“ `stream`”或“一次收集”。

有人可以告诉我在哪里应用流和收集，有人可以告诉我如何`mysql_fetch_array()`在 node.js 中完成类似（来自 php）的操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:31:12.333

“流式传输”意味着您获得每一行的回调，其参数是对应于该行的对象。另一个选项在获取所有行后为您提供回调，其参数是对象数组，每个元素对应于一行。使用哪一个取决于您的应用程序逻辑的结构。

后者听起来像您正在寻找的东西，尽管（再次取决于您的应用程序逻辑）它可能是也可能不是最好的方法。

# jbpm - 将管理系统 (LMS) 开发留在 JBPM 5.3 之上

> ID：11698887
> 
> 赞同：0
> 
> 时间：2012-07-28T06:31:42.720
> 
> 标签：jbpm

我们正在探索在 JBPM 5.3 之上构建基于 Web 的休假管理系统应用程序的选项。基本上，我们希望为我们的应用程序以及人工任务使用我们自己的用户界面。JBPM 流程应该在从我们的用户界面触发后在后台执行一个新的流程实例，并且也类似地从我们的用户界面获取其人工任务数据的输入。您能否帮助我们了解使用 JBPM 5.3 进行此类应用的可行性。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:53:00.673

这听起来非常适合 jBPM5。是的，你可以做到。这就是 jBPM5 的理念。还有其他具体问题吗？干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:46:39.407

如果您已经拥有自己的用户任务模块，并且需要 jbpm5 与之交互，那么您可以阅读有关特定于域的流程：[http ://docs.jboss.org/jbpm/v5.3/userguide/ch.domain -specific-processes.html](http://docs.jboss.org/jbpm/v5.3/userguide/ch.domain-specific-processes.html)

# python - 如果看起来发送成功，为什么没有收到电子邮件？

> ID：11698897
> 
> 赞同：-1
> 
> 时间：2012-07-28T06:33:48.117
> 
> 标签：python, smtplib

我不明白为什么我没有收到来自[这个功能](https://github.com/metaperl/zeek-autopost/blob/master/python-rewards/pr.py#L108)的电子邮件......你可以看到[smtp 成绩单是成功的](http://paste.kde.org/524258/)

我改用 10minutemail.com 来接收电子邮件，以确保它没有被黑名单或其他东西阻止。

我也成功地使用[同一目录中的脚本](https://github.com/metaperl/zeek-autopost/blob/master/python-rewards/simple_email.py)向同一收件人和同一发件人发送纯文本，并且效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:32:42.130

好的，我想通了。您必须仅附加 HTML，否则，它将尝试呈现纯文本而不显示 html。

# java - 我可以把打包的文件放到另一个目录吗？

> ID：11698900
> 
> 赞同：-2
> 
> 时间：2012-07-28T06:34:58.893
> 
> 标签：java, maven, maven-2

我想知道是否可以使用 Maven 将打包的 JAR 或 WAR 放入另一个目录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:04:12.410

您可以指定一个目录作为您的交付位置：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.demo</groupId>
    <artifactId>demo</artifactId>
    <version>1.0</version>
    <distributionManagement>
        <repository>
            <id>internal.repo</id>
            <name>MyCo Internal Repository</name>
            <url>file:///home/me/path/to/my/repo</url>
        </repository>
    </distributionManagement>
</project> 
```

只需按如下方式运行maven

```
mvn clean deploy 
```

我怀疑这不是您要查找的内容...这有点毫无意义....运行*安装*目标会将相同的工件放置在以下默认位置

```
$HOME/.m2/repository 
```

关于为什么要这样做的一些进一步指导可能会提供更好的答案

# javascript - ECMA 5 262 中严格引用标志的含义是什么

> ID：11698901
> 
> 赞同：3
> 
> 时间：2012-07-28T06:36:00.703
> 
> 标签：javascript, ecmascript-5

[我正在阅读 ECMA 5 262，对http://es5.github.com/#IsStrictReference](http://es5.github.com/#IsStrictReference)中的“严格参考”一词感到困惑：

> 引用是解析的名称绑定。引用由三个部分组成，基值、被引用的名称和布尔值的严格引用标志。基值是未定义的、对象、布尔值、字符串、数字或环境记录 (10.2.1)。未定义的基值表示无法将引用解析为绑定。引用的名称是一个字符串。

关于它的描述不多。Reference 上唯一相关的操作是

> IsStrictReference(V)。返回引用 V 的严格引用分量。

但没有设置操作，也没有描述我们如何确定值。

我想它一定与严格模式有关，但我怎么知道特定参考的价值是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:01:11.357

据我了解，当`strict mode`在 ECMAScript 5（又名 ES5）中初始化使用引用时，它是引用设置为 true 的属性。设置时`strict mode`，更多的操作会导致错误（语法，引用，例如初始化一个没有`var`关键字的变量）。有关更多信息，请参阅[MDN 文档](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode?redirectlocale=en-US&redirectslug=JavaScript/Strict_mode)`strict mode`。

[**编辑**]基于评论，我认为它适用于`strict mode`定义的范围。所以在

```
function strict()
{ 'use strict';
  // from here on and within the function
  // IsStrictReference is true
  showme = "Am I defined?";
  return "Hi!  I'm a strict mode function!  " + showme;
}

function nonstrict()
{ 
  // IsStrictReference is ... well, undefined I suppose, or false by default
  showme2 = "Am I defined?";
  return "Hi!  I'm NOT a strict mode function!  " + showme2;
}
strict(); //=> ReferenceError: showme is not defined
notstrict(); //=> "Hi!  I'm NOT a strict mode function! Am I defined?" 
```

执行 `strict()`抛出一个`ReferenceError`，但`nonstrict()`没有。如果您将 - 语句放置`use strict`在功能块之外，则执行这两个功能都会抛出`ReferenceError`.

# c# - 修剪 switch 语句

> ID：11698908
> 
> 赞同：3
> 
> 时间：2012-07-28T06:37:54.457
> 
> 标签：c#, winforms

我一直在努力使我正在工作的项目更具可读性，因为 UI 类看起来很乱。我面临的新问题是 StatusStrip、MenuStrip 和 ToolStrip 控件。

由于每个按钮都需要执行不同的操作，因此目前使用 switch 语句进行控制，这里有一个示例：

```
switch (e.ClickedItem.Text.ToLower())
{
    case "find":
        {
            Find find = new Find(customTextBox1);
            find.Show();
            break;
        }
    case "undo":
        {
            customTextBox1.Undo();
            break;
        }
    case "redo":
        {
            customTextBox1.Redo();
            break;
        }
    case "cut":
        {
            customTextBox1.Cut();
            break;
        }
    case "copy":
        {
            customTextBox1.Copy();
            break;
        }
    case "paste":
        {
            customTextBox1.Paste();
            break;
        }
    case "delete":
        {
            customTextBox1.SelectedText = "";
            break;
        }
    case "refresh":
        {
            RefreshData();
            break;
        }
    case "select all":
        {
            customTextBox1.SelectAll();
            break;
        }
} 
```

上面的代码只针对一项，所以想象一下其中有 20 个，每个有 5-10 个子项。

如您所见，我已经清理了案例方法，现在它们中的大多数都是单行的，但仍然有这么多的子项，感觉它应该是一种更好的方法。所以理想情况下，我正在寻找一种新的/更好的方法来处理这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:48:35.647

您可以使用以下代码，但您必须确保字符串与函数名称完全相同

```
switch (e.ClickedItem.Text.ToLower())
{
    case "find":
        Find find = new Find(customTextBox1);
        find.Show();
        break;
    case "undo": case "redo": case "cut": case "copy": case "paste": case "select all":
        Type thisType = customTextBox1.GetType();
        MethodInfo theMethod = thisType.GetMethod(e.ClickedItem.Text.ToLower());
        theMethod.Invoke(customTextBox1, userParameters);
        break;
    case "delete":
        customTextBox1.SelectedText = "";
        break;
    case "refresh":
        RefreshData();
        break;
} 
```

# memory-management - 为什么删除一半键时redis内存使用量没有减少

> ID：11698911
> 
> 赞同：22
> 
> 时间：2012-07-28T06:38:21.017
> 
> 标签：memory-management, redis

Redis是用来保存数据的，但是它消耗大量的内存，它的内存使用率高达52.5%。我在redis中删除了一半的key，删除操作的返回码是ok的，但是它的内存使用并没有减少。

什么原因？提前致谢。

我的操作代码如下：

```
// save data
m_pReply = (redisReply *)redisCommand(m_pCntxt, "set %b %b", mykey.data(), mykey.size(), &myval, sizeof(myval));
// del data
m_pReply = (redisReply *)redisCommand(m_pCntxt, "del %b", mykey.data(), mykey.size()); 
```

redis信息：

```
redis 127.0.0.1:6979> 信息
redis_version:2.4.8
redis_git_sha1:00000000
redis_git_dirty:0
拱位：64
multiplexing_api:epoll
gcc_version:4.4.6
process_id:28799
uptime_in_seconds:1289592
uptime_in_days:14
lru_clock:127925
used_cpu_sys:148455.30
used_cpu_user:38023.92
used_cpu_sys_children:23187.60
used_cpu_user_children:123989.72
connected_clients:22
连接的奴隶：0
client_longest_output_list:0
client_biggest_input_buf:0
阻塞的客户端：0
已用内存：31903334872
used_memory_human:29.71G
used_memory_rss:34414981120
used_memory_peak:34015653264
used_memory_peak_human：31.68G
mem_fragmentation_ratio:1.08
mem_allocator:jemalloc-2.2.5
加载：0
aof_enabled:0
changes_since_last_save:177467
bgsave_in_progress:0
最后保存时间：1343456339
bgrewriteaof_in_progress:0
total_connections_received:820
total_commands_processed:2412759064
expired_keys:0
驱逐键：0
keyspace_hits:994257907
keyspace_misses:32760132
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:11672476
vm_enabled:0
角色：奴隶
主主机：192.168.252.103
主端口：6479
master_link_status:up
master_last_io_seconds_ago:0
master_sync_in_progress:0
db0:keys=66372158,expires=0

```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-08-18T18:45:47.993

请参阅以下链接上的内存分配部分：

[http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)

我在这里引用它：

> 删除键时，Redis 并不总是向操作系统释放（归还）内存。这对于 Redis 来说并没有什么特别之处，但它是大多数 malloc() 实现的工作方式。例如，如果您用 5GB 的数据填充一个实例，然后删除相当于 2GB 的数据，则驻留集大小（也称为 RSS，即进程消耗的内存页数）可能仍然是大约 5GB，即使 Redis 声称用户内存在 3GB 左右。发生这种情况是因为底层分配器不能轻易释放内存。例如，大多数已删除的键通常与仍然存在的其他键分配在相同的页面中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-27T23:11:55.017

从 Redis 4.0.0 开始，有一个命令：

```
MEMORY PURGE 
```

应该做的伎俩：[https ://redis.io/commands/memory-purge](https://redis.io/commands/memory-purge)

但是请注意，命令文档状态：

> 此命令当前仅在使用 jemalloc 作为分配器时实现，并且对所有其他命令评估为良性 NOOP。

[自述文件](http://download.redis.io/redis-stable/README.md)提醒我们：

> 默认情况下，Redis 是针对 libc malloc 编译和链接的，但 jemalloc 是 Linux 系统上的默认设置。之所以选择此默认值，是因为 jemalloc 已被证明比 libc malloc 具有更少的碎片问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-16T09:47:31.690

一个好的起点是使用 Redis CLI 命令：`MEMORY DOCTOR`.
它可以为您提供非常有价值的信息并指出潜在的问题。

一些有用的链接：
[MEMORY DOCTOR 命令文档](https://redis.io/commands/memory-doctor)
[什么是碎片整理以及什么是 Redis 碎片整理配置](https://github.com/redis/redis/blob/5.0/redis.conf#L1313)

例子：

> *   内存峰值：过去此实例使用的内存超过当前使用的内存的 150%。分配器通常无法在峰值后释放内存，因此您可以预期会看到很大的碎片率，但这实际上是无害的，只是由于内存峰值，如果 Redis 实例驻留集大小 (RSS) 为目前比预期的要大，一旦你用更多的数据填充 Redis 实例，内存就会被使用。如果内存峰值只是偶尔出现并且您想尝试回收内存，请尝试 MEMORY PURGE 命令，否则唯一的其他选择是关闭并重新启动实例。
> *   总 RSS 高：此实例的内存碎片和 RSS 开销大于 1.4（这意味着 Redis 进程的 Resident Set Size 远大于 Redis 执行的逻辑分配的总和）。此问题通常是由于较大的峰值内存（检查报告中是否存在峰值内存条目）或可能是由于工作负载导致分配器大量碎片内存造成的。如果问题是大的峰值内存，那么就没有问题。否则，请确保您使用的是 Jemalloc 分配器，而不是默认的 libc malloc。注意：当前使用的分配器是“jemalloc-5.1.0”。
> *   高分配器碎片：此实例具有大于 1.1 的分配器外部碎片。此问题通常是由于较大的峰值内存（检查报告中是否存在峰值内存条目）或可能是由于工作负载导致分配器大量碎片内存造成的。您可以尝试启用“activedefrag”配置选项。

# html - @media 打印显示：没有一个不起作用

> ID：11698913
> 
> 赞同：3
> 
> 时间：2012-07-28T06:39:25.307
> 
> 标签：html, css, css-selectors, hide

我已经尝试了超过 3 周，现在使用不同的实现试图让右侧部分不显示，并让左侧部分以全宽显示。鉴于我的研究表明，在不查看打印预览的情况下，没有简单或简化的方法来快速呈现打印视图，我请求一些帮助来解决这个问题。

不工作的印刷媒体 css 是这样的：

```
#gc {
    width: 100%;
}
#asideTrack {
/*      width: 100%;*/
    display: none;
}
.asideTrack {
/*      width: 100%;*/
    display: none;
}
.slideAside {
/*      width: 100%;*/
    display: none;
}
#slideAside {
    display:none
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T06:58:30.523

***在 CSS 中，如果它们具有相同的优先级，则较低的规则会覆盖顶部（取决于选择器）***

您不在@media 块中编写通用css，它低于您的@media 打印块，因此它会覆盖您的@media 打印样式。例如，这就是为什么在打印预览中你的左块宽度为 74%（因为这个规则低于你说它是 100% 的 @media 打印块的规则）。

*我希望它会有所帮助。*

***解决方案***

1.  在您的 css 文件中，您可以将媒体打印块放置在文件末尾。
2.  向媒体打印块中的某些规则添加`!important`指令。即：p {颜色：红色！重要；}
3.  将您的特殊屏幕 css 放在媒体屏幕块中。

# java - 为什么要使用@WebServiceRef？

> ID：11698923
> 
> 赞同：2
> 
> 时间：2012-07-28T06:41:46.197
> 
> 标签：java, web-services, jakarta-ee

我在 Manning 论坛上找到了这个问题，但没有答案，这也是我感兴趣的事情：

我有点不清楚使用`@WebServiceRef`注释的好处。假设您正在注入一个服务（如果使用，则必须由某些工具生成，即 jboss 上的 wstools `jax-ws`），您将需要此服务类存根作为部署的一部分，因此您可以这样做：

```
private MyService service = new MyService(); 
```

相对于：

```
@WebServiceRef
MyService service; 
```

使用 的好处是`@WebServiceRef`您不会为每次调用生成一个新的服务实例，这将是昂贵的。（我假设容器可以挂在引用上，这会使事情变得更快）。但是，如果我只是将我的 Service**设为 static** ... 会发生什么？

```
private static MyService service = new MyService(); 
```

# emacs - 在 Emacs Lisp 中屏蔽完成读取的输出

> ID：11698924
> 
> 赞同：3
> 
> 时间：2012-07-28T06:41:49.223
> 
> 标签：emacs, elisp, ido

我正在`completing-read`处理文件系统路径列表，例如。`("~/parent/child" "/parent/child")`.

我想屏蔽 的输出`completing-read/ido-completing-read`，使其仅显示`child`，但仍会返回完整路径。

这可能吗？

最好的问候，老鼠

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T10:17:26.050

答：不，这是不可能的，因为完成读取不考虑字符串的任何语义。

这是可能的，但需要多次调用完成列表。

这个想法是这个函数被传递一个字符串列表，它可以帮助你从那个列表中选择一个字符串。

完成列表无法控制字符串包含的内容。它不关心字符串的语义，如路径。它只看到字符串列表。

所以，为了实现你想要的，你用当前目录中的文件列表调用它一次，如果你选择一个目录，首先你改变到那个目录，然后你用文件列表再次调用它从那个目录等

如果您想保持 pwd 与初始相同，那么当它返回时，您再次更改为原始目录。

```
(cd (concat default-directory
            (completing-read "> " (directory-files default-directory )))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T14:40:17.683

该软件包的`uniquify`功能与您想要的类似。当您有两个缓冲区访问具有相同文件名的文件时，它将在末尾添加一个字符串以区分两者。

例如，如果您有文件`/etc/foo/bar/a`，`/mnt/a`它将调用缓冲区，例如`a <bar>`和`a <mnt>`。然后，当您使用`ido`切换缓冲区时，您不必从完整文件名中进行选择，但最终会进入正确的缓冲区。

# c# - 将程序集/模块加载到动态程序集中

> ID：11698926
> 
> 赞同：1
> 
> 时间：2012-07-28T06:42:57.260
> 
> 标签：c#, cil, reflection.emit, dynamic-assemblies

我有一个已经创建的程序集，比如说`Static.dll`，还有一个我在运行时创建的动态程序集，比如说`Dynamic`。 `Dynamic`创建一些 IL 代码以从`Static.dll`. 创建时`Dynamic`（成功保存），可执行文件在运行时出错，因为它无法加载程序集`Static.dll`类型。我相信这种情况正在发生，因为`Dynamic`exe 输出找不到这个 dll（或者至少这是我的猜测）。

如何完成添加此`Static.dll`引用，以便当有人运行生成的可执行输出时`Dynamic`，它可以找到引用的类型？

我知道`Assembly.Load()`，但仅此一项并不能改变任何事情。或者至少，我不确定这给了我什么，因为我不需要在运行时使用该类型，而是在运行`Dynamic`可执行文件时使用。

最后，我控制`Static.dll`，所以如果我可以对项目做些什么来修复它，它可以完成，但是，它确实需要保持独立（我不想每次创建时都发出这个库动态装配）。基本上，我*想*我想让我的动态程序集`.assembly extern mscorlib`在它的清单中保存`Static`mscorlib 的位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:09:39.420

> 如何完成添加此`Static.dll`引用，以便当有人运行生成的可执行输出时`Dynamic`，它可以找到引用的类型？

引用将自动添加。请注意，当您的动态程序集执行时，正常的程序集探测规则适用，以便找到程序集。您必须（其中之一）：

*   将 static.dll 与 dynamic.dll 一起发布
*   将 static.dll 放入 GAC（但请：不要这样做！）
*   在自定义 AppDomain 中运行 dynamic.dll 并使用自定义探测路径配置，以便找到 static.dll
*   处理 AppDomain.AssemblyResolve 以提供 static.dll
*   使用 ILMerge 之类的东西来融合 static.dll 和 dynamic.dll

# python - 多个文件中的 Google App Engine Python 中的 URL 映射

> ID：11698927
> 
> 赞同：2
> 
> 时间：2012-07-28T06:43:06.543
> 
> 标签：python, google-app-engine, url

有没有办法在 Google App Engine 的多个文件中拆分 url 映射？

我想要这样的东西：

```
from app1.controller import App1Handler
from app2.controller import App2Handler

app = webapp2.WSGIApplication([(r'/app1', App1Handler),(r'/app1', App2Handler)]) 
```

在 App1Handler 中，我想指定如下内容：

```
(r'/action1', Action1Handler), (r'/action2', Action2Handler) 
```

总之，当用户访问**/app1/action1**时，必须执行*Action1Handler 。*

Django 有一个类似的功能，其中管理站点 url 包含在主要 url 模式中。

```
urlpatterns = patterns('',
    url(r'^polls/$', 'polls.views.index'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

GAE 中是否有此类规定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:44:41.470

您可以在 app.yaml 级别拆分两个文件：

```
- url: /app1/.*
  script: file1.py
- url: /app2/.*
  script: file2.py 
```

我认为您仍然需要在 file1.py 文件中的所有网址中添加 /app1，例如

```
app = webapp2.WSGIApplication([(r'/app1/myview', Handler),(r'/app1/myotherview', AnotherHandler)]) 
```

我认为这更好，因为您可以在 2 个模块中使用具有相同名称的处理程序，而如果您在主文件中导入 2 个具有相同名称的处理程序，则会发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:30:37.680

您可以使用 app.yaml 执行@user375348 描述的操作，否则您需要自己构建。webapp2 文档中有一个简单的路由器，您几乎可以直接使用。

[http://webapp-improved.appspot.com/guide/handlers.html](http://webapp-improved.appspot.com/guide/handlers.html)

# c# - RDLC 报表查看器未在报表查看器中显示数据？

> ID：11698930
> 
> 赞同：1
> 
> 时间：2012-07-28T06:44:13.937
> 
> 标签：c#, winforms, reporting

我正在使用 SQLITE 数据库，并希望使用报表查看器在使用 C# 的 Windows 应用程序中显示报表。我的代码是

```
DataSet ds=rel.show_data1("site_master");
this.reportViewer1.Reset();
ReportDataSource rds = new ReportDataSource("test_rds", ds.Tables[0]);
reportViewer1.LocalReport.DataSources.Clear();
reportViewer1.LocalReport.DataSources.Add(rds);
reportViewer1.Visible = true;
reportViewer1.LocalReport.Refresh(); 
```

但我无法查看报告页面上的数据。请帮忙。如果您有任何有用的链接，请给我，因为我对报告很陌生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T10:14:25.183

我认为您没有提供类似的报告路径

```
ReportViewer1.ProcessingMode = ProcessingMode.Local;
ReportViewer1.LocalReport.ReportPath = Server.MapPath("~/Report.rdlc"); 
```

# jquery - 可以为 WayPoints 插件使用 AngularUI jQuery PassThrough 吗？

> ID：11698931
> 
> 赞同：5
> 
> 时间：2012-07-28T06:44:36.853
> 
> 标签：jquery, angularjs, jquery-waypoints

我打算尝试为此 jQuery WayPoints 插件[http://imakewebthings.com/jquery-waypoints/#documentation编写指令](http://imakewebthings.com/jquery-waypoints/#documentation)

但后来发现了带有 jQ​​uery Passthrough 的 AngularUI，它声称支持 75% 的 jQuery 插件。 [http://angular-ui.github.com/](http://angular-ui.github.com/)

有人可以写一个例子来说明我如何在我的 AngularJS 应用程序中使用这个 jQuery WayPoints 插件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T02:24:17.197

[这](http://jsfiddle.net/Gloopy/Mx4Hb/)是一个使用 AngularUI jQuery Passthrough 和 Waypoints 的小提琴。主要需要注意的是：

1) 包含 angular-ui.js 脚本（这是一个非常棒的 AngularJS 伴侣！）

2)`['ui']`注册模块时添加requires参数

```
angular.module('waypoints', ['ui']); 
```

3）在你的控制器中添加一个你想在航点被击中时调用的函数

```
function WaypointsController($scope) {
    $scope.test = function(){
        alert('you have scrolled');
    }
}​ 
```

4) 设置`ui-jq`将函数传递给`ui-options`

```
<div ui-jq="waypoint" ui-options="test"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-13T16:40:43.113

回答 Marco 的问题：

3）在你的控制器中添加一个你想在航点被击中时调用的函数

```
function WaypointsController($scope) {
    $scope.test = function(direction){
        alert('you have scrolled ' + direction);
    };
    $scope.optionsObj = {
        offset: 50
        //additional options
    };
}​ 
```

4) 设置`ui-jq`将函数传递给`ui-options`

```
<div ui-jq="waypoint" ui-options="test, optionsObj"> 
```

[这](http://jsfiddle.net/Mx4Hb/19/)是一个显示此操作的小提琴

# jquery - jQuery元素+类选择器性能

> ID：11698935
> 
> 赞同：29
> 
> 时间：2012-07-28T06:45:04.730
> 
> 标签：jquery, jquery-selectors, performance

在选择元素时，我希望`$('#childDiv2 .txtClass')`或表现更好。但是根据这个[性能分析](http://jsperf.com/selectors-perf/3)是其中最好的选择器。我正在使用 JQuery 1.7.2 有人对此有解释吗？`$('#childDiv2 input.txtClass')``<input type="text" id="txtID" class="txtClass"/>` `$('.txtClass');`

![类选择器的性能分析](../Images/b9b77fdbc6c1917196cfe1188366b0ae.png)

*HTML*

```
<div class="childDiv2">
    <input type="text" id="txtID" class="txtClass"/>
    <p class="child">Blah Blah Blah</p>
</div>​ 
```

*JS*

```
$('.txtClass');
$('#childDiv2 .txtClass')
$('#childDiv2 > .txtClass')
$('input.txtClass')
$('#childDiv2 input.txtClass') 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-28T07:23:41.513

现代浏览器公开了一个非常有效的[getElementsByClassName()](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)方法，该方法返回具有给定类的元素。这就是为什么在您的情况下单个类选择器更快的原因。

详细说明您的示例：

```
$(".txtClass")                  =>  getElementsByClassName()

$("#childDiv2 .txtClass")       =>  getElementById(),
                                    then getElementsByClassName()

$("#childDiv2 > .txtClass")     =>  getElementById(),
                                    then iterate over children and check class

$("input.txtClass")             =>  getElementsByTagName(),
                                    then iterate over results and check class

$("#childDiv2 input.txtClass")  =>  getElementById(),
                                    then getElementsByTagName(),
                                    then iterate over results and check class 
```

如您所见，第一种形式在现代浏览器上是最快的，这是很合乎逻辑的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T18:14:51.347

```
var obj = document.getElementById("childDiv");
xxx = obj.getElementsByClassName("txtClass"); 
```

快 30 倍。

[http://jsperf.com/selectors-perf/6](http://jsperf.com/selectors-perf/6)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-28T07:24:26.977

CSS 选择器从右到左解析。所以你的例子

```
$('#childDiv2 .txtClass') 
```

将采取两个动作来完成。首先找到所有具有 class 的元素`txtClass`。然后检查每个元素是否是具有 id 的元素的子元素`childDiv2`。

```
$('.txtClass') 
```

这个选择器只会采取一个动作。查找所有具有类的元素`txtClass`

在 css-tricks.com 上查看[这篇文章](http://css-tricks.com/efficiently-rendering-css/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T13:56:40.737

看起来它还取决于类型元素中具有类的元素的密度。

我使用 JQuery 1.10.1 使用 Google Chrome 版本 30.0.1599.69 运行了测试。随意在另一个浏览器上尝试它和/或使用另一个 JQuery 版本。

我尝试运行以下测试：

1.  稀疏（10% 的 div 有类）[链接到 jsbin 上的测试](http://jsbin.com/EhOSIte/3/edit)

2.  密集（90% 的 div 有类）[链接到 jsbin 上的测试](http://jsbin.com/EhOSIte/2/edit)

看起来在**密集情况下** `div.class`获胜，但在**稀疏情况下** `.class`获胜。

# java - 接连多次调用外部exe

> ID：11698937
> 
> 赞同：0
> 
> 时间：2012-07-28T06:45:11.897
> 
> 标签：java, exe

我正在使用以下命令调用外部 exe：

```
String bat_file = "cmd /c start out.bat";
Process p= Runtime.getRuntime().exec(bat_file); 
```

问题是我需要多次调用特定的exe，但一个接一个（下一个exe在前一个exe完成后开始）。它们不能同时运行，因为它们访问相同的文件。

我尝试使用 for 但不工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:33:12.730

您的方法中的问题基本上是*启动*命令。它创建了一个单独的过程。如果将其删除，则可以成功使用*waitFor*：

```
String batchFile = "cmd /c out.bat";
Process p = Runtime.getRuntime().exec(batchFile);
int resultCode = p.waitFor(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:43:08.327

谢谢你。我终于解决了

```
String batchFile = "cmd /c start/wait out.bat"; 
```

# php - 如何使用jQuery确认框从zend中的数据库中删除一行？

> ID：11698938
> 
> 赞同：1
> 
> 时间：2012-07-28T06:45:13.017
> 
> 标签：php, jquery, ajax, zend-framework

我是 Zend 框架和 jQuery 的新手。我试图根据返回的值从数据库中删除一行`confirm()`。但我遇到的问题是，如果我两次按是或否，选定的行将被删除。我需要确认只有当我按下是时才会删除选定的行。我正在使用 Zend Framework 的一件事。

我的代码如下：

## 索引.phtml

```
<html>
<head>
<style type="text/css" rel="stylesheet">
#simplemodal-overlay {background-color:#000;}
#simplemodal-container {background-color:#333; border:8px solid #444; padding:12px;}
#simplemodal-container a.modalCloseImg {
    background:url(x.png) no-repeat; /* adjust url as required */
    width:25px;
    height:29px;
    display:inline;
    z-index:3200;
    position:absolute;
    top:-15px;
    right:-18px;
    cursor:pointer;
}

</style> 
<script type="text/javascript" src="/jQuery.js"> </script>
<script type="text/javascript" src="/jquery.simplemodal-1.4.2.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    //alert("test");
    $(".delete").click(function(e){
        //$('p').attrib('id');
        //e.preventDefault();
        //$("#deleteForm").modal();
        if(confirm("test"));

    });

    });
</script>
</head>
<center>
<?php         
echo "Student List";

?>
<p><a href="<?php echo $this->url(array('controller'=>'index', 
        'action'=>'add'));?>">Add new student</a></p>
<table border="1">
<tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Action</th>
</tr>
<?php foreach($this->students as $student) : ?>
<tr>

    <td><?php echo $student->name;?></td>
    <td><?php echo $student->email;?></td>
    <td><?php echo $student->phone;?></td>

    <td>
        <a href="<?php echo $this->url(array('controller'=>'index', 
            'action'=>'edit', 'id'=>$student->id));?>">Edit</a>
        <a class="delete" href="<?php echo $this->url(array('controller'=>'index', 
            'action'=>'delete','id'=>$student->id));?>">Delete</a>
    </td>
</tr>

<?php endforeach; ?>
</table>

</center>

</html> 
```

## 索引控制器.php

```
<?php

class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
      //  $test = new Application_Model_DbTable_Email();

    }

    public function indexAction()
    {
          $this->_helper->layout->disableLayout();
        $students = new Application_Model_DbTable_Students();
        $this->view->students = $students->fetchAll();
    }

    public function addAction()
    {
        $form = new Application_Form_Student();
        $form->submit->setLabel('Add');
        $this->view->form = $form;

        if ($this->getRequest()->isPost()) {
            $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {
                $name = $form->getValue('name');
                $email = $form->getValue('email');
                $phone = $form->getValue('phone');
               // $image = $form->getValue('image');
                $students = new Application_Model_DbTable_Students();
                $students->addStudent($name, $email,$phone);

                $this->_helper->redirector('index');
            } else {
                $form->populate($formData);
            }
        }

    }

    public function editAction()
    {
        $modelStudents = new Application_Model_DbTable_Students();
        $id = (int) $this->_getParam('id');

        $student = $modelStudents->fetch($id);

        $form = new Application_Form_Student($student->email);
        $form->submit->setLabel('Save');
        $this->view->form = $form;
       if ($this->getRequest()->isPost()) {
            $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {
                $id = (int)$form->getValue('id');
                $name = $form->getValue('name');
                $email = $form->getValue('email');
                $phone = $form->getValue('phone');
                $students = new Application_Model_DbTable_Students();
                $students->updateStudent($id, $name, $email, $phone);

                $this->_helper->redirector('index');
            } else {
                $form->populate($formData);
            }
        } else {
            $id = $this->_getParam('id', 0);
            if ($id > 0) {

                $form->populate($modelStudents->getStudent($id));
            }
        }

    }

    public function deleteAction()
    {

                //$id = $this->getRequest()->getPost('id');
            $students = new Application_Model_DbTable_Students();
            $id = $this->_getParam('id', 0);
            $students->deleteStudent($id);
            $this->_helper->redirector('index');

    }

    //echo $test;

} 
```

提前致谢， enamul

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:50:29.483

您使用的确认不正确，您发布的代码也有很多疑问。
如下格式化您的链接

```
 <a class="delete" id="delete_link_<?php echo $student->id?>" href="jacascript:void(0)" onclick="deleteRecord('<?php echo $this->url(array('controller'=>'index', 
            'action'=>'delete','id'=>$student->id));?>',<?php echo $student->id?>)">Delete</a> 
```

并将此功能添加到您的 js

```
 <script>
    function deleteRecord(url,id)
    {
      if(confirm('test')){ 
      $.ajax({url:url,success:function(data){alert('Deleted Record')
                                             $("#delete_link_"+id).hide();
                                               }});

      }    
   }
    </script> 
```

编辑：

```
<script type="text/javascript">

//
$(document).ready();

  function deleteRecord(url)
        {
          if(confirm('test')){ 
          $.ajax({url:url,success:function(data){alert('Deleted Record')}});
          }    
       }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:05:08.040

```
 $(document).ready(function(){
    //alert("test");
    $(".delete").click(function(e){
        //$('p').attrib('id');
        //e.preventDefault();
        //$("#deleteForm").modal();
        if(confirm("test"))
{
return true;
}
else
{
return false;
}

});

}); 
```

# ruby - Ruby - new_offset 失去一秒钟

> ID：11698940
> 
> 赞同：0
> 
> 时间：2012-07-28T06:45:43.953
> 
> 标签：ruby, datetime, datetimeoffset

我不确定这种行为是否是有意的，但对我来说似乎有点奇怪。我正在使用[How do you get DateTime.parse 中的代码来返回您所在时区的时间？](https://stackoverflow.com/questions/4576887/how-do-you-get-datetime-parse-to-return-a-time-in-your-time-zone)

```
require 'date'
estHoursOffset = +10 # Brisbane/Australia
estOffset = Rational(estHoursOffset, 24) 
```

有时，返回的 DateTime 会早一秒：

```
(DateTime.parse("2012-07-15 16:56:00") - (estHoursOffset/24.0)).new_offset(estOffset)
 => #<DateTime: 2012-07-15T16:55:59+10:00 (2456123.788888889,5/12,2299161)> 
```

但在其他时候，这似乎是正确的：

```
(DateTime.parse("2012-07-15 16:16:00") - (estHoursOffset/24.0)).new_offset(estOffset)
 => #<DateTime: 2012-07-15T16:16:00+10:00 (2456123.7611111114,5/12,2299161)> 
```

我正在编写的程序只关心分钟，这意味着我可以`16:55`在我想要的时候回来`16:56`。

所以我的问题是；

*   这是故意的吗？（如果是这样，它是否记录在某处 - 我找不到任何东西。）
*   有没有一种以编程方式解决此问题的简单方法？由于我不关心秒数，我想我可以“四舍五入”返回的 DateTimes，但很高兴知道这是否会在边缘情况下引发任何其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:09:46.693

我尝试了两次（“2012-07-15 16:56:00”和“2012-07-15 16:16:00”）并且Ruby总是产生最初解析的时间。我不知道你是如何设法减少 1 秒的；这是一个奇迹！只是开个玩笑 ：）

如果这仍然让您很难尝试获取日期（和时间） - 像这样更简单..：

```
require 'date'    
$date = Time.now                #current date/time

puts $date    
puts $date.min                  #if you want to use only the minutes

$date="2012-07-15 16:56:00"     #if you want to parse it yourself 
```

继续你的问题：

-不，这不是国际性的，也可能是间歇性的。我已经在上面（+10h 澳大利亚）和我所在的英国伦敦（+1h）测试了您的代码。总是得到时间解析；绝不会少一秒或多一秒。

现在，如果您需要将秒数四舍五入，那么您将 100% 确定每次和每次都获得相同的结果..：

```
def round_up(seconds)
  divisor = 10**Math.log10(seconds).floor
  i = seconds / divisor
  remainder = seconds % divisor
  if remainder == 0
    i * divisor
  else
    (i + 1) * divisor
  end
end 
```

我不明白为什么舍入会导致边界条件出现问题；只要你总是四舍五入！希望这可以帮助！祝你好运队友:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:25:26.350

这可能是因为浮点数不精确 -`10/24.0`你减去的不能准确表示。

如果不是减去那个浮点数而是减去一个有理数，`Rational(estHoursOffset, 24)`那么你应该没问题

# java - 访问内部类字段时出现 java.lang.NullPointerException

> ID：11698941
> 
> 赞同：1
> 
> 时间：2012-07-28T06:45:50.720
> 
> 标签：java, nullpointerexception

我从下面第 19 行的代码中得到一个空指针异常，`seq[index].value = lo;`. 序列类有一个整数类型的值字段，但我认为问题是访问 seq 实例的数组。

```
public class ImprovedFibonacci {

class Sequence{
    int value = 0;
    boolean isEven = false;
}

public static void main(String[] args){

    final int MAX_LOOP = 20;
    int lo = 1;
    int hi = 1;
    int i = 0;
    String mark = "-";

    int index = 0;
    ImprovedFibonacci.Sequence[] seq = new ImprovedFibonacci.Sequence[MAX_LOOP];
    seq[index].value = lo;

    System.out.println("Fibonacci seq 1 : " + lo);
    System.out.println("Sequence class index: "+index+"value: "+seq[index].value);

    for(i=MAX_LOOP;i>=1;i--) {
        hi = hi + lo;
        lo = hi - lo;
        index++;
        if(hi % 2 == 0){
            mark = "-";
            seq[index].isEven = true;
        }else{
            mark = "";
        }

        System.out.println(i + " : " + hi + mark);
        seq[index].value = hi;
        System.out.println("Sequence class index: "+index+"value: "+seq[index].value+"IsEven: "+seq[index].isEven);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:50:10.957

您创建数组，但从不填充对象。

```
ImprovedFibonacci.Sequence[] seq = new ImprovedFibonacci.Sequence[MAX_LOOP];
    seq[index].value = lo; 
```

所以 seq[index] 返回 null，而 null.value 给你一个 NullPointerException

例如：

```
Object[] array = new Object[10]; 
```

它创建包含 10 个元素的数组，但每个元素都将为空。

这是示例代码：http: [//ideone.com/0gIYm](http://ideone.com/0gIYm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:50:42.970

`seq`是一个具有 MAX_LOOP 空间的数组，但其中没有实例化任何内容。第一个元素 ( `seq[0]`) 为空，所有其他元素也是如此。

```
seq[index] = new ImprovedFibonacci.Sequence();
seq[index].value = lo; 
```

# mfc - 运行时检查失败 #0 当我在 MFC 中调用 IHTMLDocument3::getElememntById 函数时发生

> ID：11698942
> 
> 赞同：0
> 
> 时间：2012-07-28T06:46:15.653
> 
> 标签：mfc

这是我在 OnBtnClick 函数中编写的代码

```
CComPtr<IHTMLDocument3> pDoc3 = (IHTMLDocument3 *)m_webBrowser.get_Document();
CComPtr<IHTMLElement> pElem;
BSTR idTmp = CComBSTR(L"article_summary");
HRESULT hr = pDoc3->getElementById(idTmp, &pElem); 
```

我正在尝试获取 Id 为“article_sumary”的元素......但我得到了这个

```
Run-Time Check Failure #0 - The value of ESP was not properly saved across a function
call.  This is usually a result of calling a function declared with one calling
convention with a function pointer declared with a different calling convention. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:04:18.580

你的第一个演员看起来很讨厌。我会得到非强制转换的文档类型（IHTMLDocument2 ？），然后对它执行查询接口到 IHTMLDocument3。

```
CComPtr<IHTMLDocument2> pDoc2 = m_webBrowser.get_Document();// assuming it returns IHTMLDocument2

CComPtr<IHTMLDocument3> pDoc3;
pDoc2->QueryInterface(&pDoc3); 
```

# wordpress - WordPress 分类层次结构 - 隐藏儿童

> ID：11698944
> 
> 赞同：1
> 
> 时间：2012-07-28T06:46:24.803
> 
> 标签：wordpress

我有这样的分层分类法：

```
CATEGORY 1
  SUB CAT 1 
```

产品 A 属于 Sub Cat 1

产品 B 属于类别 1 和子类别 1

默认情况下，当我浏览类别 1 时，WordPress 会向我显示这两种产品。我编写了一个函数来隐藏子目录中的产品，但我真正想要做的是获取类别 1 中的所有产品。如果我使用 get_objects_in_term() 它会提取父项和子项中的所有内容。

有什么想法只获得实际上属于第 1 类的产品吗？

# android - Android 相机软件可以识别户外场景或物体吗？（实时物体识别）

> ID：11698945
> 
> 赞同：1
> 
> 时间：2012-07-28T06:46:27.760
> 
> 标签：android, image-processing, camera, augmented-reality, image-recognition

我阅读[了这篇](http://people.csail.mit.edu/kapu/papers/nguyen_cvpr09.pdf)关于实时对象识别的论文，发现它非常有趣。我目前正在开发一个类似于定向运动的位置感知应用程序。

对于控制点表示（检查点/航点），最初的想法是使用 QR 码扫描来验证用户是否去过那里；从而指示下一个控制点。

现在，使用某种自然对象/场景识别来验证路线中特定位置的用户（如果可能且有效）看起来更有趣。

有没有人通过特定的代码示例或实验了解更多信息，而不仅仅是它的概念表示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:35:55.990

复杂的解决方案且处于开发的早期阶段，容易出现错误。首先看一下[OpenCV](http://opencv.org/platforms/android.html)。

# python - Python中的QuickSort - 程序因更大的输入而挂起？

> ID：11698947
> 
> 赞同：5
> 
> 时间：2012-07-28T06:46:36.183
> 
> 标签：python, algorithm, sorting, quicksort

对此感到非常困惑，因为我已经为足够小的测试用例（N = 20）验证了正确的逻辑输出。我尝试做 N = 10,000 个数字，但程序只是挂起，我不明白为什么......我已经尽可能简单地实现了算法。

此外，调用`sorted(data)`我的 N = 10k 列表似乎几乎可以立即生效。所以我确信我的算法只是卡在某个地方。

这是代码：

```
def QuickSort(array):
    qsort(array, 0, len(array))

def qsort(arr, left, right):
    if ((right - left) < 2):
        return

    pivotIndex = choosePivot0(arr, left, right)

    newPivotIndex = partition(arr, pivotIndex, left, right)

    qsort(arr, 0, newPivotIndex)
    qsort(arr, newPivotIndex + 1, right)

def partition(arr, pivotIndex, left, right):
    swap(arr, pivotIndex, left)
    pivot = arr[left]
    i = left + 1
    for j in range(left+1, right):
        if (arr[j] < pivot):
            swap(arr, i, j)
            i = i + 1

    swap(arr, left, i-1) #put pivot back where it belongs
    #cobj.count = cobj.count + (right - left - 1) #add m-1 the #of comparisons
    return (i-1) #give back where the pivot resides

def swap(array, i, j):
    temp = array[i]
    array[i] = array[j]
    array[j] = temp

def choosePivot0(array, left, right):
    return randint(left, right-1) #random 
```

所以我很困惑为什么会发生这种情况。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:13:46.063

以下行中似乎有一个错字：

```
qsort(arr, 0, newPivotIndex) 
```

我认为应该是这样的。

```
qsort(arr, left, newPivotIndex) 
```

否则，该函数将以某种方式仅对某些输入数据集起作用。这就是算法卡住的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T06:54:51.407

注意：我没有检查你的算法，所以它可能有问题/python可能出于某种原因不喜欢它，但是：快速排序将大约将排序时间从 N^2 提高到 N log(N)，但可能同样糟糕作为 N^2 取决于输入数据。使用最佳数据，N=10,000 与 N=20 相比，将慢 40,000/26 = 1538 倍。也许它只是处理？

对于最坏情况的数据，它将慢 100,000,000 / 400 = 25,000 倍。你的数据是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T06:58:05.127

Python 经常挂起深度递归函数，有时它只是终止当前会话（如果您在 IDLE 中尝试它），并开始一个新的会话而不给出任何输出。试试这个：`import sys; sys.setrecursionlimit(2**30)`，这可能会有所帮助，但并非总是如此。

# database - 启动 PostgreSQL 数据库

> ID：11698950
> 
> 赞同：1
> 
> 时间：2012-07-28T06:47:14.030
> 
> 标签：database, postgresql

我在用

`su -c 'pg_ctl start -D /usr/local/pgsql/data -l serverlog'`postgres

命令启动 PostgreSQL 8.0 数据库。但我收到“*权限被拒绝*”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:57:53.523

“权限被拒绝”通常是数据目录的访问权限问题。确保 postgres 用户帐户具有完全访问权限`/usr/local/pgsql/data`

8.0 已完全过时且不再受支持。***您现在***应该更新到[当前版本](http://www.postgresql.org/download/)

# cocoa-touch - 我什么时候应该创建一个新窗口而不是使用许多不同的视图？

> ID：11698951
> 
> 赞同：2
> 
> 时间：2012-07-28T06:47:16.337
> 
> 标签：cocoa-touch

您创建一个窗口，在窗口内创建许多视图，但每个应用程序创建多少个窗口？

假设您有一个登录屏幕、一个注册表单屏幕和一个仪表板屏幕。

你是否创建：

1.  登录和注册屏幕的一个窗口和多个视图以及仪表板的一个窗口？

2.  一个带有登录视图的登录窗口、一个注册窗口（带有注册屏幕视图 1、注册屏幕视图 2 和注册屏幕视图 3）和一个仪表板窗口（有多个视图）？

此外，你总是需要一个视图吗？如果只是一屏，难道就不能只创建一个窗口，加上按钮、标签等东西吗？

编辑：根据苹果...它的 1 个控制器 1 个视图？[https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CombiningViewControllers/CombiningViewControllers.html](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CombiningViewControllers/CombiningViewControllers.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:52:13.467

约定是只有一个在您的`AppDelegate`. 在窗口内部添加可以处理所有其他视图的 ViewControllers。所以你会创建一个`LoginViewController`和一个`RegisterViewController`。

通常只有在创建警报（UIAlertView 是它自己的 UIWindow）之类的事情时才需要多个窗口，该警报将位于所有其他视图之上，但即使这也可以通过使用`keyWindow`.

# php - textarea根据内容js或jquery设置高度

> ID：11698956
> 
> 赞同：2
> 
> 时间：2012-07-28T06:47:39.863
> 
> 标签：php, javascript, jquery, html

这是我的代码：（保持简单）

```
<textarea style="height:100px;">
    $textareatext
</textarea> 
```

*   如果`$textareatext`是 1 行长我希望 textarea 的高度适合
*   如果它是 3、5 或 10 行......同样的事情。

我遇到的问题是`100px`高度太大，但是如果我将它设置为`20px`并且有 10 行，那么 textarea 高度太小了。注意：值是通过 mysql 预加载的。所以我认为它应该计算行数，然后根据行数设置高度？有什么建议么？

我使用 Javascript 和 jQuery，或者任何你建议的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T06:51:38.960

这些可能会有所帮助。它们都是 jQuery 插件。

*   [jQuery 弹性](http://code.google.com/p/jquery-elastic/)
*   [弹性区域](http://flaviusmatis.github.com/flexibleArea.js/)
*   [自动增长](http://archive.plugins.jquery.com/project/autogrow)

**编辑**

```
var $textArea = $("#textarea-container");

resizeTextArea($textArea);

$textArea.off("keyup.textarea").on("keyup.textarea", function() {
    resizeTextArea($(this));
});

function resizeTextArea($element) {
    $element.height($element[0].scrollHeight);
}​ 
```

**这个答案由下面的 François Wahl 提供。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-28T07:26:16.710

删除硬编码的高度并给你`textarea`一个 id：

```
<textarea id="textarea-container">
    Line 1
    Line 2
    Line 3
    Line 4
</textarea>​ 
```

使用 jQuery，您可以使用以下内容在页面加载时自动调整大小，然后在`keuUp`前面提到的事件上自动调整大小。

```
var $textArea = $("#textarea-container");

// Re-size to fit initial content as it is pre-loaded.
resizeTextArea($textArea);

// Remove this binding if you don't want to re-size on typing.
$textArea.off("keyup.textarea").on("keyup.textarea", function() {
    resizeTextArea($(this));
});

function resizeTextArea($element) {
    $element.height($element[0].scrollHeight);
}​ 
```

见[**演示**](http://jsfiddle.net/FranWahl/YjWeQ/1/)

或者，如果您只关心显示它并删除默认行填充，请使用以下命令：

```
var $textArea = $("#textarea-container");
var nativeRowPadding = 15;

// Re-size to fit initial content.
resizeTextArea($textArea);

function resizeTextArea($element) {
    $element.height($element[0].scrollHeight-nativeRowPadding );
}​ 
```

见[**演示**](http://jsfiddle.net/FranWahl/kmaTR/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-21T15:41:24.187

要确保所有文本区域都跟上它们的内容，在您键入时增加或减少高度，请使用以下内容：

```
$("textarea").on("input",function(){
   $(this).height("auto").height($(this)[0].scrollHeight);
} 
```

在 SO 本身上安装这行代码实际上会有所帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T19:46:26.577

嘿，只有以下 5 行代码完成了预加载文本区域的工作

```
window.onload= function(){

    var inputs, index;

    inputs = document.getElementsByTagName('textarea');

    for (index = 0; index < inputs.length; ++index) 
    {
    inputs[index].style.height=inputs[index].scrollHeight + 5
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-16T08:55:35.637

多个文本区域支持。基于@François 的回答。[演示小提琴](http://jsfiddle.net/YjWeQ/29/)

```
if ($(".textarea").length > 0) {
    $(".textarea").each(function () {
        resizeTextArea($(this));
        $(this).off("keyup.textarea").on("keyup.textarea", function () {
            resizeTextArea($(this));
        });
    });
}

function resizeTextArea($element) {
    $element.height($element[0].scrollHeight);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-06T05:11:33.460

我做了一个我经常使用的 OOP 解决方案：

```
$.fn.elasticHeight = function(){
    $( this ).height( 'auto' ).height( $( this )[ 0 ].scrollHeight );
    $( this ).on( "input", function(){
        $( this ).height( 'auto' ).height( $( this )[ 0 ].scrollHeight );
    } );
    return this;
}; 
```

然后您只需将 elasticHeight 添加到您的 textarea 中，如下所示：

```
$( "textarea" ).elasticHeight(); 
```

这`return this`是为了让它起泡......所以你可以这样做：

```
$( "textarea" ).elasticHeight().val( "default value" ); 
```

不需要花哨的 3rd 方插件...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T07:03:12.440

```
<textarea id='myText'></textarea>

var obj=document.getElementById('myText');
obj.onkeyup=function(){
if(obj.scrollHeight>obj.offsetHeight)obj.style.height=obj.scrollHeight+'px';
} 
```

我认为用户正在输入文本区域

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-26T20:46:18.610

当您在 textarea 中删除行时，François Wahl 接受的代码不起作用 - 高度保持不变。确保在获取它的 scrollHeight 之前将 textarea 的高度设置为“auto”：

```
function resizeTextArea($element) {
    $element.height("auto");
    $element.height($element[0].scrollHeight);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-07T01:01:59.023

大多数解决方案要么不增加和减少`textarea`高度，要么在您按“Enter”进入下一行时过于跳跃，或者当`textarea`高度超出浏览器窗口限制时它们无法正常工作。

这是我的（Firefox、Chrome、Safari、Opera）：

```
$('.textareaInput').on('input', function(e) {
   if ($(this).outerHeight() > 162) {
       while($(this).outerHeight() < this.scrollHeight) {
           $(this).height($(this).height()+1);
       };

       while($(this).outerHeight() > this.scrollHeight) {
           $(this).height($(this).height()-1);
       };   

   } else {
       while($(this).outerHeight() < this.scrollHeight) {
           if ($(this).height())
           $(this).height($(this).height()+1);
       };
   }
}); 
```

... 其中 162 = 150（最小高度）+ 6（顶部填充）+ 6（底部填充）：

```
.textareaInput {
    min-height:150px;
    padding: 6px 4px;
    overflow-y:hidden;    
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-04T15:43:55.033

```
const textarea = document.querySelector('textarea');

function updateHeight(el) {
  el.style.height = '';
  el.style.height = el.scrollHeight + 'px';
}

updateHeight(textarea);

textarea.addEventListener('input', () => updateHeight(textarea));
```

```
<textarea>Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui, id? Aut dolorem nam iste. Asperiores minima nemo porro autem quidem. Quae quas dolore possimus sunt vitae quo ea incidunt. Sit repellendus at consequuntur fugiat quos, quisquam atque dolorem ipsa autem iure quod? Expedita eius cum asperiores obcaecati eaque laudantium libero aliquid ex doloremque modi incidunt, officiis velit reiciendis cupiditate necessitatibus harum quod repellendus officia quidem. Aliquid, temporibus. Nihil error cumque labore eius voluptas commodi accusamus eaque distinctio, facere dolores! Laudantium distinctio a quisquam quibusdam error nam quia ex cupiditate, fuga saepe maiores cumque enim corporis alias itaque recusandae vel! Omnis?</textarea>
```

# php - Chrome 扩展：通过服务器上的 JavaScript 向后台页面发送请求

> ID：11698957
> 
> 赞同：0
> 
> 时间：2012-07-28T06:47:51.593
> 
> 标签：php, javascript, jquery, google-chrome, google-chrome-extension

我正在开发一个 chrome 扩展程序，它在加载后立即在特定网页中注入 iframe。iframe 加载托管在 localhost 上的表单（form.php）。在表单上输入的所有信息都由`script.js`本地主机处理。PHP 文件有：

```
<script src="script.js" type="text/javascript"></script> 
```

php 文件上有一个提交按钮。单击它时，我想将消息和一些数据传递到扩展程序的背景页面，例如：

```
chrome.extension.sendRequest({'name':'email', value:email}); 
```

但我收到一条错误消息：

> 未捕获的类型错误：无法调用未定义的方法“sendRequest”

我想要的是，一旦单击提交按钮，所有处理的数据都会发送到 chrome 扩展后台页面。

请建议我任何可以帮助我做到这一点的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:44:38.820

如果我理解正确，您想从 iframe 向 chrome 扩展背景页面发送消息。

一种方法是在网页中注入内容脚本并让它监听消息

> window.addEventListener('消息', ....)

在 iframe 上，当数据准备好时，您可以调用

> parent.postMessage

向父级中的内容脚本发送消息。内容脚本可以将消息转发到 bg 使用

> chrome.extension.sendRequest

另一种方法是通过设置将内容脚本注入 iframe 本身

> all_frames: 真

在扩展清单中。

# java - 如何在Android中显示特殊字符？

> ID：11698960
> 
> 赞同：5
> 
> 时间：2012-07-28T06:48:20.443
> 
> 标签：java, android, special-characters, android-source

我正在开发一个由一些数学公式组成的本机应用程序。

公式会像…………

![公式](../Images/519c587d85991bbfb1615080d2c31c07.png)

我想在我的应用程序中显示这样的公式，但我不知道如何在 Android 中使用这些特殊字符。我想在列表视图中单独显示每个公式......如果我正在复制公式并且如果我将文本设置为文本视图意味着它显示为

```
 txtv.setText("\\cos^2\\theta + \\sin^2\\theta = 1\\! "); 
```

并以相同的模式获得输出。那么，任何人都可以帮助我如何在Android中使用这些数学特殊字符..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:21:54.797

抱歉，没有很多不同的解决方案。没有“神奇的答案”，这里有一些不同的方法来实现你想要的。

1) 使用带有一些 Javascript 的 webview

2）使用服务器生成公式的图片。

3）使用嵌入在您的应用程序中的带有平方根符号的 9.png 文件并将其显示为 textview 背景

4) 用所有文本和符号绘制画布

5）使用十六进制代码：[http ://htmlhelp.com/reference/html40/entities/symbols.html](http://htmlhelp.com/reference/html40/entities/symbols.html)

[http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html](http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html)

6）也许有其他想法，但绝对没有办法以最简单的方式实现 300 公式列表视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T06:53:53.093

这个看起来相当不错，并且在 Android 中运行没有任何问题： http: [//mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html)

编辑：您可以在 WebView 中运行它，不需要任何 webapp。

# ios - 发布带有链接的 Facebook 照片

> ID：11698962
> 
> 赞同：0
> 
> 时间：2012-07-28T06:48:53.913
> 
> 标签：ios, facebook

我有一个可以将图片导出到 Facebook 的 iOS 应用程序。目前，我在第一次发布期间创建应用程序特定相册并将“照片”（实际上是图纸）发布到此相册。

这种方法有一个巨大的缺点——根本没有指向我的 Facebook 页面的链接。所以这个帖子对推广没有任何意义。

我目前只有一个想法：创建自己的托管，在那里上传图片并发布链接，但这需要带有托管的 webapp == 额外费用。

有没有其他方法可以将图片和链接结合到我的 Facebook 页面？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:19:58.750

好吧，你可以考虑使用 tumblr。它是免费的，并且有一个非常好的 API。在那里托管您的图像，然后为它们创建链接并发布到 Facebook

[http://www.tumblr.com/docs/en/api](http://www.tumblr.com/docs/en/api)

# wireshark - 在 darpa 数据集上查找攻击数据包

> ID：11698964
> 
> 赞同：1
> 
> 时间：2012-07-28T06:49:18.757
> 
> 标签：wireshark, packet-capture, intrusion-detection

我下载了 darpa 数据集的第 5 周到星期一的 tcpdump 数据[（链接）](http://www.ll.mit.edu/mission/communications/ist/corpora/ideval/data/1999/testing/week5/monday/outside.tcpdump.gz)
，并下载了 darpa 站点第 4 周和第 5 周的攻击列表[（链接）](http://www.ll.mit.edu/mission/communications/ist/files/master-listfile-condensed.txt)

> （攻击列表说des ip上的`04/06/1999 08:11:15` 持续时间是攻击）`00:00:10``172.016.112.050``tcpreset`

我想`tcpreset`在 tcpdum 上找到攻击数据包，所以我`tcpdump`用 wireshark 打开并过滤介于`8:11:15`和`8:11:25`(frame.time>`apr 6,1999 8:11:15`和 frame.time> `apr 6,1999 8:11:25`) 之间的数据包

问题：我在结果中找不到带有`172.016.11.050`des ip 的数据包！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:06:35.803

试着给一分钟的间隙。

在 1999 年的评估中，1 分钟的间隔让 IDS 有机会在第 2 周检测标记攻击的攻击。

# ruby-on-rails - 带有 execjs 导轨的 Tomcat

> ID：11698967
> 
> 赞同：0
> 
> 时间：2012-07-28T06:49:42.827
> 
> 标签：ruby-on-rails, tomcat, jruby

我在 tomcat 上部署了一个 jruby 应用程序，它不会为 javascript 运行时拾取 nodejs。Node安装完毕，`node`命令在tomcat6用户下正常执行。

日志转储 [https://gist.github.com/3192173](https://gist.github.com/3192173)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:26:13.407

您不能将本机 c 扩展与 jRuby 一起使用。

对于 jRuby，请改用[therubyrhino](https://github.com/cowboyd/therubyrhino)。

该问题在[此处](https://github.com/rails/rails/issues/2963)记录和讨论。有关支持的运行时列表，请参阅[execjs 文档](http://rubydoc.info/github/sstephenson/execjs/frames)。

但是，如果您使用 MRI 作为本地解释器而不是 JVM 上的 jRuby，则可以为本地开发设置 nodejs。

# oauth - 在 chrome 扩展中嵌入客户端 ID

> ID：11698968
> 
> 赞同：7
> 
> 时间：2012-07-28T06:49:55.540
> 
> 标签：oauth, google-chrome-extension, salesforce, oauth-2.0, salesforce-chatter

我正在构建一个 chrome 扩展，它将与 salesforce-chatter api 交互。但是对于使用 oAuth（用户代理流）身份验证的用户，我需要将我的客户端密钥嵌入到我的扩展中。

这会导致任何安全问题吗？或者有没有办法使用 oAuth 而不在我的扩展中嵌入客户端 ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:48:41.047

*客户端 ID*必须包含在请求中，因此提供者知道请求来自您，正如@Matt Lacey 已经指出的那样。通常，提供者还会发布一个机密的*客户端密钥*，该密钥另外包含在*访问令牌*请求中，因此提供者可以验证您的应用是否被允许使用该*客户端 id*。

Chrome 扩展程序在开放平台上运行，并且平台本身没有提供针对服务器验证扩展程序（销售人员也必须支持）或安全存储属性（如果在开放平台上不是不可能的话，这将是困难的）的方法，因此，不幸的是，对*客户的秘密*保密是不可能的。

由于这是一个常见问题，它已经在 OAuth 规范中考虑（请参阅[第 10.1 节客户端身份验证](https://www.rfc-editor.org/rfc/rfc6749#section-10.1)和[10.2 客户端模拟](https://www.rfc-editor.org/rfc/rfc6749#section-10.2)）。因此，提供商需要进行额外的检查，但在客户端，您无法做任何事情来有效提高安全性。

如果您想更深入地了解将来如何在 Android 设备上处理此问题，请在[此处](https://stackoverflow.com/a/11513309/1467115)查看我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T02:40:32.333

您必须在扩展程序中嵌入客户端 ID，以让 Salesforce 知道正在尝试进行身份验证的应用程序是什么。这些客户端 ID 旨在始终存储并传递给服务器，因此只要您以安全的方式存储它就不会有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:41:21.300

正如[马特](https://stackoverflow.com/users/481044/laceysnr-matt-lacey)解释的那样，如果您正在创建一个打包的应用程序，您将被迫包含客户端 ID。另一种解决方案是将应用程序编写为托管应用程序：

[打包应用程序和托管应用程序有什么区别？](https://developers.google.com/chrome/web-store/faq#faq-app-01)

这样做的缺点是增加了管理 Web 服务器的复杂性。但这将允许更大的安全性。

# android - 当 3rd 为空时从 2edittext 获取文本

> ID：11698977
> 
> 赞同：0
> 
> 时间：2012-07-28T06:51:14.327
> 
> 标签：android, android-edittext

我有一个带有 3 个 EditTexts 和 Button 的活动。用户可以填写两个编辑文本（edittext 1 和 2 或 1 和 3）。始终有一个编辑文本（第二个或第三个）必须为空。单击按钮后显示正确的结果。我不知道如何更改我的代码。如果我有空的edittext，则应用程序意外停止。如果我将值 0 插入不使用 edittext 一切都可以。有没有人有任何想法？如何解决这个问题呢？非常感谢您的帮助。这是我的主要活动代码：

```
 public class Glowna extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.main);
View button1Button = this.findViewById(R.id.oblicz);
button1Button.setOnClickListener(this);             
} 
public void onClick(View v){ 
EditText numa = (EditText)findViewById(R.id.a); 
EditText numb = (EditText)findViewById(R.id.b); 
EditText numc = (EditText)findViewById(R.id.c); 
float eq1 = 0; 
float eq2 = 0; 
float eq3 = 0; 
float eq4 = 0; 
float num1 = Float.parseFloat(numa.getText().toString()); 
float num2 = Float.parseFloat(numb.getText().toString()); 
float num3 = Float.parseFloat(numc.getText().toString());

if (num1>0 & num2>0){
try{
switch (v.getId()) {
    case R.id.oblicz:
    eq1 = 4*num1;
    eq2 = num1*num2;
    break;  }
String wynik1 = Float.toString(eq1);
String wynik2 = Float.toString(eq2);
 Intent i = new Intent(this, Wynik.class);
 i.putExtra("a",wynik1);
 i.putExtra("b",wynik2);
startActivity(i); }

catch (NumberFormatException e) {Intent o = new Intent(this, Komunikat.class);
startActivity(o); return; }}

else if (num1>0&num3>0){
try{
switch (v.getId()) {
case R.id.oblicz:
eq4 = 4*num1;
eq3 = (num3/2)*num3;
break;  }
String wynik4 = Float.toString(eq4);
String wynik3 = Float.toString(eq3);
Intent j = new Intent(this, Wynik1.class);
j.putExtra("d",wynik4);
j.putExtra("c",wynik3);
startActivity(j); }
catch (NumberFormatException e) {Intent o = new Intent(this, Komunikat.class);
startActivity(o);
return;}}      

else {Intent o = new Intent(this, Komunikat.class);
startActivity(o);}  

}} 
```

和错误：

```
E/AndroidRuntime(249): Uncaught handler: thread main exiting due to uncaught exception

 E/AndroidRuntime(249): java.lang.NumberFormatException: 

 E/AndroidRuntime(249):     at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:296)

 E/AndroidRuntime(249):     at java.lang.Float.parseFloat(Float.java:327)

 E/AndroidRuntime(249):     at arek.gemetrytesty.glowna.Glowna.onClick(Glowna.java:38)

 E/AndroidRuntime(249):     at android.view.View.performClick(View.java:2344)

 E/AndroidRuntime(249):     at android.view.View.onTouchEvent(View.java:4133)

 E/AndroidRuntime(249):     at android.widget.TextView.onTouchEvent(TextView.java:6510)

 E/AndroidRuntime(249):     at android.view.View.dispatchTouchEvent(View.java:3672)

 E/AndroidRuntime(249):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

 E/AndroidRuntime(249):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

 E/AndroidRuntime(249):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

 E/AndroidRuntime(249):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

 E/AndroidRuntime(249):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1712)

 E/AndroidRuntime(249):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1202)

 E/AndroidRuntime(249):     at android.app.Activity.dispatchTouchEvent(Activity.java:1987)

 E/AndroidRuntime(249):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1696)

 E/AndroidRuntime(249):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1658)

 E/AndroidRuntime(249):     at android.os.Handler.dispatchMessage(Handler.java:99)

 E/AndroidRuntime(249):     at android.os.Looper.loop(Looper.java:123)

 E/AndroidRuntime(249):     at android.app.ActivityThread.main(ActivityThread.java:4203)

 E/AndroidRuntime(249):     at java.lang.reflect.Method.invokeNative(Native Method)

 E/AndroidRuntime(249):     at java.lang.reflect.Method.invoke(Method.java:521)
 E/AndroidRuntime(249):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)

 E/AndroidRuntime(249):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)

 E/AndroidRuntime(249):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:21:04.603

要赶上`java.lang.NumberFormatException`，试试这个：

```
float num1 = Float.parseFloat(numa.getText().toString());
        float num2;
        float num3;
        try {
            num2 = Float.parseFloat(numb.getText().toString());
        } catch (Exception e) {
            num2 = 0;
        }
        try {
            num3 = Float.parseFloat(numc.getText().toString());
        } catch (Exception e) {
            num3 = 0;
        } 
```

而不是这个片段：

```
float num1 = Float.parseFloat(numa.getText().toString());
float num2 = Float.parseFloat(numb.getText().toString());
float num3 = Float.parseFloat(numc.getText().toString()); 
```

# android - 如何将 Android USB 连接模式更改为仅充电？

> ID：11698979
> 
> 赞同：11
> 
> 时间：2012-07-28T06:51:26.053
> 
> 标签：android, usb, connect

我见过 HTC 安卓设备通过 USB 线连接到 PC 时有连接模式选择，而我的总是弹出一个`USB massive storage device`带有按钮的对话框`turn on massive storage`，这很无聊，因为有时我的线可能会松动，`off/on`随机，所以总是弹出当我做其他事情时突然出现并侵入我的输入。有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-11T20:45:07.843

我一直在我的 CM 11 安卓手机上搜索这个，运行 kitkat。

嗯。。终于找到了。它隐藏在一个完全不直观的位置：

1.  前往设置
2.  去**存储**
3.  打开菜单并选择**USB 计算机连接**

在这里，您可以在媒体设备 (MTP)、相机 (PTP) 和大容量存储 (UMS) 之间进行选择。将它们全部关闭以使其仅充电。

遗憾的是，如果该选项不存在，则手机不支持该选项。我的 HTC One (M7) 似乎就是这种情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T06:55:10.233

HTC 设备具有`PCSII.apk`允许他们选择 USB 连接模式的功能。对于您的设备，您可以手动设置：

使用 SQLite 编辑器打开`/data/data/com.android.providers.setting/databases/settings.db`

打开表`secure`

将设置从 `mount_ums_`0 开始，然后重新启动设备。

更新：如果它仍然不起作用，请尝试打开调试模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-28T21:43:29.880

在我这样做之前没有任何效果：设置>开发人员选项>默认USB配置现在您可以选择默认USB连接目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T15:58:27.590

要更改连接模式选择，请尝试设置 -> 无线和网络 -> USB 连接。您可以选择充电、大容量存储、系留和询问连接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T06:56:43.590

在您的手机中转到`Settings->Connect`PC。

在那里你会看到选项`Default Connection Type`。选择它并将其设置为您的偏好。

# css - 将图像背景变为透明

> ID：11698981
> 
> 赞同：2
> 
> 时间：2012-07-28T06:51:38.187
> 
> 标签：css, html

我正在寻找这是否可行，如果可以，该怎么做。我希望用户上传一张白色背景的图片。图像可以是从一双鞋到一顶帽子的任何东西。然后，该网站将自动将该白色背景变为透明，然后将其存储。我想知道有没有办法使用 HTML Canvas/CSS 将白色背景转换为 100% 透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:23:40.160

你可以看看这个答案，它很好地解释了如何使用 javascript 更改图像中的颜色：[How to change color of an image using jquery](https://stackoverflow.com/questions/9303757/how-to-change-color-of-an-image-using-jquery)

但是，您应该使用服务器端代码执行此操作，并注意结果可能会有所不同，因为仅删除颜色不会在对象的边缘看起来很好。

# android - 在 Android 中创建自定义视图

> ID：11698983
> 
> 赞同：0
> 
> 时间：2012-07-28T06:51:58.117
> 
> 标签：android, android-layout, android-ui

我需要在 android 中创建一个自定义视图，其中将包含价格、地址等动态文本以及其中的 ImageView，如下图所示。我试图在谷歌上找到一些自定义视图的教程，但没有找到令人满意的东西来做所有这些事情。我还需要在这个视图上使用 onClick 事件。请大家，一些代码会很有帮助。我是安卓新手。我阅读了谷歌教程来创建自定义视图，但无法实现这一点。 [https://lh4.ggpht.com/HmwmRTx3g9ddkHbgvZXpZOB3Am-O9OQARQ2qpxJ16zTDZbG57CmvgxUC75sGFzC3cqrH](https://lh4.ggpht.com/HmwmRTx3g9ddkHbgvZXpZOB3Am-O9OQARQ2qpxJ16zTDZbG57CmvgxUC75sGFzC3cqrH)

感谢关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:56:03.980

这称为MapView 的**自定义叠加层**。

您可以检查示例并根据您的要求实施 - [Android MapView Balloons](https://github.com/jgilfelt/android-mapviewballoons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:20:02.373

您可以使用框架布局。使用起来非常简单。FrameLayout 可以在彼此之上添加多个视图。它创建了一堆视图。只需在 FrameLayout 中添加您想要的任何视图，并使用属性 setVisibility() 来控制何时显示哪个视图。

# android - 如何自动滑动android View Pager

> ID：11698987
> 
> 赞同：9
> 
> 时间：2012-07-28T06:53:11.943
> 
> 标签：android, android-viewpager

可以将 View Pager 设置为自动滑动或自动翻页。我将我的 viewpager 设置为使用如下所示的适配器，它工作正常：-

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.gridslide);
ImagePagerAdapter mAdapter = new ImagePagerAdapter(
        getSupportFragmentManager(),4);
ViewPager mPager = (ViewPager) findViewById(R.id.pager);
mPager.setAdapter(mAdapter);
} 
```

适配器如下所示：-

```
public static class ImagePagerAdapter extends FragmentStatePagerAdapter {
private final int mSize;

public ImagePagerAdapter(FragmentManager fm, int size) {
    super(fm);
    mSize = size;
}

@Override
public int getCount() {
    return mSize;
}
@Override
public Fragment getItem(int position) {
    Log.v(TAG,"position="+position);
    return TheFragment.newInstance(position);
}} 
```

但是，我想知道如何使这些片段在 viewpager 中自动滑动。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-13T10:55:03.540

在 setCurrentItem(int item, boolean smoothScroll) 中设置 smoothScroll = true 并不总是具有平滑滚动效果。假设如果您的 viewpager 中的页面少于 5 个，您几乎不会注意到平滑滚动。

在这种情况下，最困难的方法是将其放入 for 循环中

```
//This will scroll page-by-page so that you can view scroll happening
for (int i = 0; i < mAdapter.getCount()-1; i++)
    mPager.setCurrentItem(i, true); 
```

如果有人需要更慢的滚动，他们可以像这样使用 postDelayed() ...

```
static int i=0;
private final Handler handler = new Handler();
somefunction()
{
    handle.post(ViewPagerVisibleScroll);
}

    Runnable ViewPagerVisibleScroll= new Runnable() {
                @Override
                public void run() {
                    if(i <= mAdapter.getCount()-1)
                    {
                        mPager.setCurrentItem(i, true);
                        handle.postDelayed(TopChartAnimation, 100);
                        i++;
                    }
                }
            }; 
```

**总是不推荐睡眠**：如果有人需要更慢的滚动，他们可能会在这个 for 循环中使用睡眠......

```
@Override
public void onClick(View v) {
Runnable runnable = new Runnable() {
                @Override
                public void run() {
                    for (int i = 0; i < mAdapter.getCount()-1; i++) {
                        final int value = i;
                        try {
                            Thread.sleep(50);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                mPager.setCurrentItem(value, true);
                            }
                        });
                    }
                }
            };
            new Thread(runnable).start();

        } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-28T10:49:43.227

可能，您应该看看以下 API [ViewPager.beginFakeDrag()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#beginFakeDrag%28%29)，[ViewPager。fakeDragBy(float offset)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#fakeDragBy%28float%29)和[ViewPager.endFakeDrag()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#endFakeDrag%28%29)如果你想要拖动模拟。此外，[setCurrentItem()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int,%20boolean%29) API 提供了设置当前页面并顺利完成的能力。我建议自动制作幻灯片的最简单方法是使用简单的 Runnable 设置[Handler](http://developer.android.com/reference/android/os/Handler.html)，它会调用寻呼机方法来设置活动中的项目，然后为它执行 postDelayed()。并且不要忘记在用户交互或活动暂停时为其调用 removeCallbacks()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-02T12:11:28.430

**首先使用 TimerTask 创建 Slider 类扩展**

```
public class SliderTimer extends TimerTask {
    private ViewPager viewPager;
    private int size;
    private Activity activity;

    public SliderTimer(ViewPager viewPager, int size, Activity activity) {
        this.viewPager = viewPager;
        this.size = size;
        this.activity = activity;
    }

    @Override
    public void run() {
        activity.runOnUiThread(() -> {
            if (viewPager.getCurrentItem() < size - 1) {
                viewPager.setCurrentItem(viewPager.getCurrentItem() + 1, true);
            } else {
                viewPager.setCurrentItem(0, true);
            }
        });
    }
} 
```

**Next 创建 SpeedSlowScroller 用于慢速滚动**

```
public class SpeedSlowScroller extends Scroller {

    private int mDuration = 2500;

    public SpeedSlowScroller(Context context) {
        super(context);
    }

    public SpeedSlowScroller(Context context, Interpolator interpolator) {
        super(context, interpolator);
    }

    public SpeedSlowScroller(Context context, Interpolator interpolator, boolean flywheel) {
        super(context, interpolator, flywheel);
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy, int duration) {
        // Ignore received duration, use fixed one instead
        super.startScroll(startX, startY, dx, dy, mDuration);
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy) {
        // Ignore received duration, use fixed one instead
        super.startScroll(startX, startY, dx, dy, mDuration);
    }
} 
```

最后将**SpeedSlowScroller**添加到 ViewPager 中，并添加**SliderTimer**用于自动滚动

```
try {
 Field mScroller = ViewPager.class.getDeclaredField("mScroller");
 mScroller.setAccessible(true);
 SpeedSlowScroller scroller = new SpeedSlowScroller(_context);
 mScroller.set(your_viewpager, scroller);
 Timer timer = new Timer();
 timer.scheduleAtFixedRate(new SliderTimer(your_viewpager, models.size(), activity), 4000, 6000);
 } catch (Exception ignored) {
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-30T08:22:26.440

简短的回答 2020

设置 viewPager 适配器后

```
 private Runnable runnable = null;

   public void function DisplaySlider(){

    sliderItemAdapter = new SliderItemAdapter(getActivity(), mSliderList);//push the data to the adapter
    mViewPager.setAdapter(sliderItemAdapter); //set the adapter to the view pager
    startAutoSlider(sliderItem.getCount());

   }

private void startAutoSlider(final int count) {

    runnable = new Runnable() {
        @Override
        public void run() {
            int pos = mViewPager.getCurrentItem();
            pos = pos + 1;
            if (pos >= count) pos = 0;
            mViewPager.setCurrentItem(pos);
            handler.postDelayed(runnable, 3000);
        }
    };
    handler.postDelayed(runnable, 3000);
} 
```

最后不要忘记从回调中释放内存

```
@Override
public void onDestroy() {
    if (runnable != null) handler.removeCallbacks(runnable);
    super.onDestroy();
} 
```

# asp.net - 从 chrome/firefox 打印时打印图像

> ID：11698989
> 
> 赞同：0
> 
> 时间：2012-07-28T06:53:28.600
> 
> 标签：asp.net, browser, printing

我正在从不同浏览器的 Web 应用程序打印一页。它包含一些小图像，如刻度线，页面上的问号。

现在我的问题是它没有在打印时打印图像。在 IE 中它可以正常工作并打印图像，但在 Google Chrome、Firefox 中它不打印图像。

谁能知道如何从 Chrome 和 Firefox 打印图像？

提前致谢。

下面是我在页面中生成图像的代码。

我正在准备一个名为“tickmark”的单元格。

```
 HtmlTableCell tc = new HtmlTableCell();
                        tc.InnerText = "";

                        if (Convert.ToInt64(result[h]) == 1)
                        {
                            tc.InnerHtml = "<b class='tickmark'></b>";
                        }

                        trContent.Cells.Add(tc); 
```

和带有代码的刻度线类：

```
b.tickmark { background:url(../images/tickmark.png) no-repeat; width:13px; height:10px; display:block; vertical-align:middle; margin:0 auto; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:20:57.777

现代浏览器不打印背景图像。这些 CSS 图像用于样式化。

如果该图像很重要，请将其嵌入您的页面。`<img/>`标签中的图像将起作用。

为避免破坏当前布局，您可以执行以下操作：

有另一个 css 文件 print.css 并将其链接如下：

html:

```
<link rel="stylesheet" type="text/css" href="main.css" media="screen" />
<link rel="print stylesheet" type="text/css" href="print.css" media="print" />
<div class="tick"><img src="images/tickmark.png" alt="tick" /></div> 
```

main.css

```
.tick img {
    display: none;
} 
```

打印.css

```
.tick img {
    display: block;
} 
```

# java - java中的私有变量？

> ID：11698992
> 
> 赞同：1
> 
> 时间：2012-07-28T06:54:02.523
> 
> 标签：java

我正在观看 youtube 上的教程，主题是私有变量。我们通常在java中这样设置变量：

```
class hello {

    public static void main(String args[]) {
        String x;
        x = "Hello"
    }
} 
```

但是在那个教程中，字符串类型是在这样的方法中声明的：

```
class hello {

    private String x;

    public void apples() {
        x = "this is a private variable.";
        System.out.println(x);
    }
} 
```

如您所见，它不是主要方法，但我想问一下，私有变量总是必须超出方法还是什么？

我是一个初学者，所以这对了解真的很有帮助，因为我不想为了防止混淆而塞满知识，而且事实上，塞满代码的人永远不会成为一名优秀的程序员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:56:32.313

> ***私有变量总是必须超出方法还是什么？***

这是正确的。方法内的变量是**局部变量**，不能有任何访问修饰符，例如 private、public 或 protected。这些修饰符只能应用于**成员变量**，即在类范围内声明的变量。

如果您考虑一下，这很有意义，因为无论如何其他类都无法访问局部变量。甚至不是同一类的另一个对象或同一对象中的另一个方法。

**相关问题：**

*   [成员变量和局部变量有什么区别？](https://stackoverflow.com/questions/1177723/what-is-the-difference-between-a-member-variable-and-a-local-variable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:24:02.840

```
 but i want to ask that do private variables always have to be out of method or what?. 
```

好吧，实际上在方法中将变量设为私有是没有意义的。**因为在方法中声明的变量是堆栈变量，它们的范围比私有的更窄**。因为它们只能在声明它们的方法中访问，并且私有变量在它们声明的整个类中具有范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:18:10.630

我认为让您感到困惑的是局部变量（在方法中声明）和成员变量（在类中声明，在类方法之外）之间的区别。

局部变量在声明它的方法运行时就存在。它在它被声明的时候就存在，然后在下一个 } 字符出现时超出范围（除了那些与 { 尚未打开的字符匹配的字符）。这实际上意味着该变量会消失得无影无踪——一旦超出范围就无法使用。

但是成员变量存在于对象内部。这意味着它在对象被创建时被创建，在对象被销毁时被销毁。因此，它通常比局部变量存在更长的持续时间。成员变量有时可以被它们所属的对象以外的对象使用；并且有一些非常复杂的规则围绕何时可以做到这一点。

成员变量上的`private`修饰符仅意味着它只能由对象所属类中的代码访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:05:31.267

Java 中的**私有**变量是该类全局可访问的变量，并且只能对该类访问（当然还有包含类中的任何其他方法）。

在方法中声明的变量只能在方法范围内访问。在 if 语句中声明的变量只能在 if 语句中访问 .... 等等。

由于性能问题，最好使用尽可能少的**私有**变量。假设您在一个类中声明了 100 个私有变量。您的类包含 10 个方法，每个方法使用 10 个变量。当实例化一个对象时，你的对象被创建实例化了 100 个私有变量。如果将变量设置为方法的本地变量，则在类的实例化时不会创建变量，并且每次访问方法时都会使用 10 个变量......

java中还有其他类型的变量，为了更好地理解你可以从这里开始[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T07:33:22.393

在范围内创建的任何变量（在 { } 内的代码块）都是`local`该范围的变量；并且在街区外无法访问。

`private`当您谈论类并定义一个在类**外**无法访问的成员时，变量也是术语。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T06:56:53.913

Cass 变量必须声明为以下类型之一：

上市

受保护

上市

在第一个示例中，变量是函数的本地变量：也就是说，它专门绑定到方法 hello.main()。

在这种情况下，它只能在该方法函数中访问。它不是类变量，因此不需要设置其访问级别。

在第二个示例中，变量是类变量。当您有一个类变量时，您可以将其设置为私有（只能由该类的对象访问）、受保护（由继承的类访问）或公共（可以在对象外部访问）。然后类中可能的许多方法可以访问该类变量。

当您在类定义中而不是在方法中设置变量时，它被称为“字段”或“属性”或“属性”。您定义字段可访问性的方式是必需的，因为类中的多个方法可以引用它。

当您在任何方法中设置了变量时，它只能在该方法内部访问，而不能在外部访问（除非您使用引用指针或通过方法参数传递它）。

# jsp - JSTL/EL 中简单 for 循环的表示

> ID：11698993
> 
> 赞同：21
> 
> 时间：2012-07-28T06:54:07.563
> 
> 标签：jsp, for-loop, jstl, el

我需要`for`在 JSTL/EL 中表示以下循环（在 Java 上下文中）。

```
for (int i = 6; i <= 15; i++) {
  System.out.print(i+"\t");
} 
```

它将显示以下输出。

```
6      7      8       9       10       11       12       13       14       15 
```

我怎样才能在 JSTL/EL 中做同样的事情？我对此没有确切的想法。我只是在尝试以下。

```
<c:forEach begin="6" end="15" varStatus="loop">
    <c:out value="${loop.count}"/>
</c:forEach> 
```

它显然会显示以下输出。

```
1 2 3 4 5 6 7 8 9 10 
```

这不是我想要的。我需要显示和之间的数字`6`（`15`即在指定范围之间）。我需要提出这样一个概念来在我的 Web 应用程序中实现分页。我可以用 EL 做到这一点吗？

* * *

`\t`在此声明`System.out.print(i+"\t");`中并不重要。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-28T07:31:54.770

以下应该有效：

```
<c:forEach begin="6" end="15" var="val">
    <c:out value="${val}"/>
</c:forEach> 
```

或以下内容：

```
<c:forEach begin="6" end="15" varStatus="loop">
    <c:out value="${loop.current}"/>
</c:forEach> 
```

或以下内容：

```
<c:forEach begin="6" end="15" varStatus="loop">
    <c:out value="${loop.index}"/>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T07:26:56.173

我刚刚遇到以下解决方案。

```
<c:forEach begin="6" end="15" var="i">
    <c:out value="${i}"/>
</c:forEach> 
```

我已删除该`varStatus="loop"`属性并添加了该`var="i"`属性。它产生以下输出。

```
6 7 8 9 10 11 12 13 14 15 
```

正是我想要的。这个想法来自[这里](http://books.google.co.in/books?id=nKpvsy8mAZMC&pg=PA108&lpg=PA108&dq=display%20range%20of%20numbers%20using%20for%20loop%20in%20jstl%20el&source=bl&ots=-63cRJRdk7&sig=Os7Rn3HMUEls4RBvbXCPBC913Ck&hl=en&sa=X&ei=jY4TUMnECYnIrQeaxIDYBQ&ved=0CF4Q6AEwBg#v=onepage&q=display%20range%20of%20numbers%20using%20for%20loop%20in%20jstl%20el&f=false)。