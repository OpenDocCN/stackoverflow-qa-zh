# StackOverflow 问答 10963000-10963999

# ruby - Jekyll：没有生成新帖子

> ID：10963002
> 
> 赞同：6
> 
> 时间：2012-06-09T17:20:04.730
> 
> 标签：ruby, jekyll

我正在建立一个 jekyll 博客。我将 .md 文件放在 _posts 文件夹中。`jekyll --server`在项目目录的根目录下运行命令。
但是 jekyll 只是重新生成较旧的帖子，新闻帖子并没有被添加到 _site。
可能是什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T00:40:37.783

我终于找到了 jekyll 失败的原因。我在其中一篇文章中使用的标题中有一个冒号 (:)。我只需要替换它`&#58;`并且帖子解析得很好。

# jquery - 如何在锚元素上触发 jQuery 点击事件 child? I try to trigger a click event if someone clicks on a an nchor that has an child: $(function() { $("object").click(function() { 问问题 问问题 2012-06-09T17:20:12.590 784 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I try to trigger a click event if someone clicks on a an nchor that has an child: $(function() { $("object").click(function() { alert("test"); return false; }); }); The markup: I would expect that clicking on an would trigger a click-event. It doesn't. Still, It would work with a mouseenter event. How do I make it trigger a click event? addEventListener not working AS3 in my AS3 Code I have added this simple EventListener: addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler); there are no errors or anything else, but when I trace something in my mouseMoveHandler it doesn't export something to my console protected function mouseMoveHandler(event:MouseEvent):void { trace("mouseMoved") } First I thought this problem shouldn't be so difficult, and I suspect that this has something to do with the stage (addEventListener isn't at the top of it). When I googled it I found something about bubbling, but this just works with dispatch Event or? Thank you in advance for your help! jqueryobjectsvgclickjquery-events 4 1 回答 1 This answer is useful 1 You can do it like this. Live Demo You were missing href in the anchor tag, Change in html [aa](#) Javascript $(function() { $('a').each(function (){ if($(this).children('object').length > 0) $(this).click(function() { alert("test"); return false; }); }); 于 2012-06-09T17:22:53.027 回答 Related 0 javascript - 如何加快多个 YT iframe 加载时间？可以使用 fitvids 的异步方法吗？ 1 android - 如何从在 Android 中所有应用程序顶部看到的 Overlay 中获取一些事件 1 node.js - 将数据发布到 node.js 永远不会返回任何内容 2 excel - Excel - 在另一个工作表中找到具有相同值的单元格并在其左侧输入值 2 javascript - jQuery 创建一个不是回调的回调？ 3 jquery - 在页面加载时自动打开 jQuery ColorBox 2 ruby-on-rails - 用 Thin 替换 WEBrick 时要知道的事情 1 iphone - CoreData 查询 1 java - ANTLR 4 $channel = HIDDEN 和选项 3 ios - UITableViewCell 内的 UILabel 高度 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10963004
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, object, svg, click, jquery-events

I try to trigger a click event if someone clicks on a an `<a>`nchor that has an `<object>` child:

```
$(function() {
    $("object").click(function() {
        alert("test");
        return false;
    });
}); 
```

The markup:

```
 <a>
   <object data="menu-item-2.svg" type="image/svg+xml"></object>
 </a> 
```

I would expect that clicking on an `<a>` would trigger a click-event. It doesn't. Still, It would work with a mouseenter event.

How do I make it trigger a click event?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:22:53.027

You can do it like this.

**[Live Demo](http://jsfiddle.net/LyLGp/1/)**

You were missing href in the anchor tag,

Change in html

```
<a href="#">aa
   <object data="menu-item-2.svg" type="image/svg+xml"></object>
</a> 
```

Javascript

```
$(function() {
  $('a').each(function (){

  if($(this).children('object').length > 0)    
     $(this).click(function() {
         alert("test");
         return false;
  });
}); 
```

# jquery - 如何使用 jquery 删除 html 5 视频标签中的循环属性

> ID：10963005
> 
> 赞同：3
> 
> 时间：2012-06-09T17:20:13.870
> 
> 标签：jquery, html, video

我有一个在后台使用视频的页面，我将其设置为在主页上循环播放。

我想使用 JQuery 来更改文件和属性；

我的代码是

```
$("#garden").mouseover(function() {
    var videoFile = 'gardenlift.webm';
    $('#backgroundv video').attr({
        src: videoFile,
        loop: 'false'
    }); 
```

它不工作！第二个视频仍在循环播放。我如何使用 jquery 删除循环属性

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T17:22:55.130

使用`.prop('loop', false)`- 该属性不是布尔属性，但它的*存在*会导致启用循环。

`src`很可能也是一个属性，因此您可以在代码中安全地`attr`替换为。`prop`

# oracle10g - 无法在 Windows 7 上安装 Oracle Forms

> ID：10963009
> 
> 赞同：0
> 
> 时间：2012-06-09T17:20:35.583
> 
> 标签：oracle10g, oracleforms, failed-installation

我已经下载了 Oracle Forms，但无法在 Windows 7（32 位）中安装它。我收到一个错误

```
Using paramFile: ..\install\oraparam.ini

Checking installer requirements...

Checking operating system version: must be 5.0, 5.1 or 5.2\.    Actual 6.1
                                      Failed <<<<

Exiting Oracle Universal Installer, log for this session can be found at C:\Program Files\Oracle\Inventory\logs\installActions2012-06-09_09-56-47PM.log

Please press Enter to exit... 
```

请协助我安装。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-11T07:11:17.780

如果您使用的是 Windows 7，则右键单击设置文件和属性并执行此操作

```
Change Compatibility Mode 

Click Check On Run This Program In Compatibility Mode For:
Windows Xp Service Pack 3 

then setup will run and oracle will install on windows 7 
```

![在此处输入图像描述](../Images/af82a190ec54e8ddd814f727db65f6ef.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-16T09:21:23.017

在 Oracle Reports 10g 目录下，转到安装文件夹，然后`oraparam`在记事本中打开文件并更改`[Certified Versions]`windows 值，如下所示：

```
[Certified Versions]
Windows=5.0,5.1,5.2,6.1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T17:52:51.377

它旁边有一个复选框可以忽略该条件。勾选它，设置将继续。

# actionscript-3 - addEventListener 不工作 AS3

> ID：10963015
> 
> 赞同：0
> 
> 时间：2012-06-09T17:22:04.777
> 
> 标签：actionscript-3, addeventlistener

在我的 AS3 代码中，我添加了这个简单的 EventListener：

```
addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler); 
```

没有错误或其他任何东西，但是当我在 mouseMoveHandler 中跟踪某些内容时，它不会将某些内容导出到我的控制台

```
protected function mouseMoveHandler(event:MouseEvent):void
        {
            trace("mouseMoved")
        } 
```

首先我觉得这个问题应该没那么难，我怀疑这和舞台有关（addEventListener 不在最前面）。当我用谷歌搜索它时，我发现了一些关于冒泡的信息，但这仅适用于 dispatch Event 还是？预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:31:56.550

舞台本身不会发送 mouseMove - 实际上我不知道。你很少直接在舞台上工作。尽管正如预期的那样，它对孩子有效。

```
package
{
  import flash.display.Sprite;
  import flash.events.MouseEvent;

  public class TheMouse extends Sprite
  {
    public function TheMouse()
    {
      addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler);

      const background:Sprite = new Sprite();
      background.graphics.beginFill(0);
      background.graphics.drawRect(0, 0, 100, 100);
      background.graphics.endFill();
      addChild(background);
    }

    private function mouseMoveHandler(event:MouseEvent):void
    {
      trace('mouseMoveHandler');
    }
  }
} 
```

# javascript - 导入 JSON 以用作 GoogleMaps 标记的数组

> ID：10963022
> 
> 赞同：0
> 
> 时间：2012-06-09T17:22:55.213
> 
> 标签：javascript, json, google-maps-api-3, google-maps-markers

我对 Javascript 还是很陌生，我正在寻找一些建议。

我已经根据自己的喜好设置了一个谷歌地图视图，但是它使用了一个内置在 javascript 本身中的数组。基本上这个……

```
 var locations = [
     [9.449062, 7.950439, 0],
     [34.449062, 10.950439, 50]
  ]; 
```

前两个字段是位置坐标，第三个是我计划在其他时间使用的值。

我查看了各种教程，它们似乎不适用于本地文件（即文件位于文件系统上的同一目录中），或者教程似乎不起作用。

我知道有类似的问题，但是我似乎找不到适合我的方法。

我想知道是否有人可以帮助我理解如何将 JSON 文件用作上面的数组。

提前谢谢大家。

米宾

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:13:33.463

这看起来像是将对象分配给变量的完全有效的 JavaScript 赋值。如果您从 HTML 页面使用它们，只需先将脚本包含在您的数据中，然后再处理脚本：

```
<script src="locations.js"></script>
<script src="worker.js"></script> 
```

location.js 与您提供的报价完全相同，而 worker.js 大致如下：

```
for(idx = 0; idx<locations.length; idx++){
  do_something_with(locations[idx])
} 
```

# php - Logic between CakePHP component and helper

> ID：10963023
> 
> 赞同：1
> 
> 时间：2012-06-09T17:22:55.727
> 
> 标签：php, cakephp, cakephp-helper

I am writing a component+helper pair which handle inclusion of JS files for the current View.

The idea is to autoload JS files which have the same name as the view (or action). So if you have a view called 'admin_add.ctp' and a file 'admin_add.js' in the same folder, the JS file would be included in the JS buffer. I would prefer this to happen automatically in both beforeRender calls.

The tricky part is that I need to be able to enable/disable the autoload at the Controller::action level (with a component), but the inclusion logic needs to happen at the View level (with a Helper).

How do I pass the enable/disable trigger from the Component to the Helper, without having to write code in each view template?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:08:09.920

我通过修改组件中的 controller->helpers['helperName'] 数组解决了这个问题。

由于 Helper 是在组件的 beforeRender 调用之后实例化的，因此我可以修改 helper 的设置并从 Helper::__contruct($View, $settings) 调用访问数据。

我不确定我是否可以依靠 CakePHP 的内部来保持这种回调顺序，但到目前为止它仍然有效。

# android - 嵌套的 AsyncTask 和 onPostExecute

> ID：10963027
> 
> 赞同：3
> 
> 时间：2012-06-09T17:23:29.973
> 
> 标签：android, android-asynctask, android-imageview, textview

我`AsyncTask`在另一个`AsyncTask`(2) 中使用 (1)。AsyncTask 1 获取在线用户数据，计算响应中的条目数，对于每个条目，`onPostExecute`显示用户名并运行新的 AsyncTask (2) 从服务器获取图像并将其加载到`ImageView`. 这一切都发生在`onPostExecute`. 这是完美的工作，用户数据被获取并显示，并且图像为每个条目一张一张地显示。

然而，数组的迭代和`TextView`in `AsyncTask`1的更新`onPostExecute`发生得如此之快，它基本上只显示数组中的最后一个用户名，其他的都被加载了，但肉眼无法检测到:)

同时，`AsyncTask`2 仍在从网上获取图片，并为错误的用户显示个人资料图片。显然我在这里遇到的问题是这两个需要同步。`AsyncTask`所以我以为我只是用该方法等待 2 中的输出`get()`，但现在什么都没有更新了，不`TextView`……这对我来说是意外的行为。

那么，问题是如何同步 2 `AsyncTask`s？

一些代码来澄清，如果它仍然需要

```
 //instantiate first AsyncTask
    new AsyncRequest().execute(bundle);

    private class AsyncRequest extends AsyncTask<Bundle, Void, String> {
    protected String doInBackground(Bundle... bundle) {
        String data = null;
        try {
            data = request(null, bundle[0]); //request the data
            return data;
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return data;
    }// end method

    protected void onPostExecute(String response) {
        JSONArray data = null;
        try {
            JSONObject response2 = Util.parseJson(response);
            data        = response2.optJSONArray("data");
            int amount  = data.length();
            TextView s1 = (TextView) findViewById(R.id.some_id);
            s1.setText("" + amount); //displays number of items

            //display the data
            for(int i=0; i<amount; i++){
                String email        = "";
                String id           = "";
                JSONObject json_obj = data.getJSONObject(i);
                Log.d("JSONObject ", ""+json_obj);
                String name         = json_obj.getString("name");
                if (json_obj.has("email")){
                    email           = json_obj.getString("email");
                }
                if (json_obj.has("id")){
                    id          = json_obj.getString("id");
                }
                String picture  = "http://www.domain.com/"+id+"/picture";
                TextView s2     = (TextView) findViewById(R.id.name_placeholder);
                s2.setText(name);
                //here we do a new AsynTask for each entry and wait until the data is fetched
                new DownloadProfileImageTask().execute(picture, name).get(); 
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }// end method 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T18:11:32.887

目前还不太清楚为什么你用多个名字的名字来称呼一个人`setText`。`TextView`正如您所提到的，尽管您拥有`setText`所有名称，但您只看到一个名称。可能您需要使用 a`ListView`或类似的东西。

现在关于您的问题：可能您不需要两个`AsyncTask`s. 您可以在一个`AsyncTask`. 代码将如下所示：

```
//Create a Holder class as a data holder. 
//For simplicity, public attributes are used
class Holder{
  public String name;
  public String email;
  public String id;
  public BitmapDrawable imageDrawable;
}

//instantiate the AsyncTask
new AsyncRequest().execute(bundle);

private class AsyncRequest extends AsyncTask<Bundle, Holder, Integer> {
protected Integer doInBackground(Bundle... bundle) {
    int amount = 0;
    try {
        data = request(null, bundle[0]); //request the data

        JSONArray data = null;
        JSONObject response2 = Util.parseJson(response);
        data        = response2.optJSONArray("data");
        amount  = data.length();

        //display the data
        for(int i=0; i<amount; i++){
            Holder holder = new Holder();
            holder.email        = "";
            holder.id           = "";
            JSONObject json_obj = data.getJSONObject(i);
            Log.d("JSONObject ", ""+json_obj);
            holder.name         = json_obj.getString("name");
            if (json_obj.has("email")){
                holder.email           = json_obj.getString("email");
            }
            if (json_obj.has("id")){
                holder.id          = json_obj.getString("id");
            }
            String picture  = "http://www.domain.com/"+id+"/picture";

            //Fetch the image and create a Drawable from it - Synchronously
            holder.imageDrawable = getImageDrawable(picture, name);

            publishProgress(holder);

        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
    return amount;
}// end method

protected void onProgressUpdate(Holder... holder) {
    //Update the user name and image
    TextView s2     = (TextView) findViewById(R.id.name_placeholder);
    s2.setText(holder[0].name);

    ImageView imgView = (ImageView) findViewById(R.id.imageViewId);
    imgView.setImageDrawable(holder[0].imageDrawable);

}

protected void onPostExecute(Integer amount) {
    TextView s1 = (TextView) findViewById(R.id.some_id);
    s1.setText(amount.toString()); //displays number of items
}// end method 
```

# sql-server - Please help me to find answer for some SQL questions

> ID：10963032
> 
> 赞同：-1
> 
> 时间：2012-06-09T17:23:51.157
> 
> 标签：sql-server

I have few questions which i have been asked in interview:

1.  Performance difference between delete and truncate?
2.  Delete duplicate data from a table which is not having any id column and should not use CTE.
3.  Why we are able to delete data using CTE?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T17:25:57.550

1.  `DELETE`记录每个单独`TRUNCATE`的删除，而是批量记录操作，因此速度更快。
2.  您可以将`SELECT DISTINCT`数据放入临时表，`TRUNCATE`然后重新插入第一个表。
3.  不是史酷比...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T17:36:48.887

以下是解决您问题的一些提示：

1.  由于 TRUNCATE 实际上并不删除数据，而是通过删除指向索引的指针来释放数据，因此它比 DELETE 快得多，当您使用 DELETE 时，所有内容都逐行存储在事务日志中，因此速度要慢得多。

2.  [http://www.codeproject.com/Tips/159881/How-to-remove-duplicate-rows-in-SQL-Server-2008-wh](http://www.codeproject.com/Tips/159881/How-to-remove-duplicate-rows-in-SQL-Server-2008-wh)

3.  [http://blog.sqlauthority.com/2009/06/23/sql-server-2005-2008-delete-duplicate-rows/](http://blog.sqlauthority.com/2009/06/23/sql-server-2005-2008-delete-duplicate-rows/)

# objective-c - UISearchBar 搜索按钮

> ID：10963034
> 
> 赞同：0
> 
> 时间：2012-06-09T17:24:01.357
> 
> 标签：objective-c, xcode

我在这个网站上找到了一个教程：

```
http://jduff.github.com/2010/03/01/building-a-searchview-with-uisearchbar-and-uitableview/ 
```

...但我被困在这里：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
// You'll probably want to do this on another thread
// SomeService is just a dummy class representing some 
// api that you are using to do the search
NSArray *results = [SomeSerivece doSearch:searchBar.text];

[searchBar setShowsCancelButton:NO animated:YES];
[searchBar resignFirstResponder];
self.tableView.allowsSelection = YES;
self.tableView.scrollEnabled = YES;

[tableData removeAllObjects];
[tableData addObjectsFromArray:results];
[self.tableView reloadData];
} 
```

我不明白我必须写什么而不是 SomeService。它正在评论中，但我无法理解。我已经有一个包含表格视图所有内容的数组......所以？？我需要做什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:35:39.630

看起来某些服务是根据 xyz 标准实际搜索数组并返回结果的类。如果我没记错 UISearchBar 现在会自动为您执行此操作 - 您使用的教程可能已过时。

我没有亲自使用过，但以下可能会更有帮助；它使用 UISearchDisplayController，它会为您处理搜索结果，而不是强迫您手动进行。

[http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)

如果您更愿意使用第一个教程，则必须创建/查找要在数组上使用的搜索类。

# jquery - 如果 jQuery 对象是从 XML 文档创建的，则使用 JQuery.find() 查询 XML 会提供意外结果

> ID：10963037
> 
> 赞同：1
> 
> 时间：2012-06-09T17:24:23.373
> 
> 标签：jquery, xml, find, xforms

在使用 jQuery 查询 XML 时，我注意到不同的结果，具体取决于 jQuery 对象的实例化方式，即。来自**XML 文档**或**XML 字符串**。前者给出了意想不到的结果，我猜我在这里遗漏了一些东西。

```
xmlStr = '<data>'+
               '<node1 />'+
               '<node2 template="">'+
                      '<node2a>def</node2a>'+
               '</node2>'+
               '<node2>'+
                      '<node2a>val2a</node2a>'+
               '</node2>'+
               '<node2 />'+
               '<node3>a value</node3>'+
         '</data>';

dataXMLDoc = $.parseXML(xmlStr);
$dataXDoc = $(dataXMLDoc);
$data = $(xmlStr);

//queries using $dataXDoc (created from XML Document)
console.log('1a:length: '+$dataXDoc.find('node2a:not([template], [template] *)').length); //finds 1
console.log('2a:length: '+$dataXDoc.find('*:not([template], [template] *)').find('node2a').length); //finds *2*
console.log('3a:length: '+$dataXDoc.find('*').not('[template], [template] *').find('node2a').length); //finds *2*
console.log('4a:length: '+$dataXDoc.find('*:not([template], [template] *)').find('node2a').length); //finds *2*

//queries using $data (created from XML String)
console.log('1b:length: '  +  $data.find('node2a:not([template], [template] *)').length);  //finds 1
console.log('2b:length: '  +  $data.find('*:not([template], [template] *)').find('node2a').length); //finds 1
console.log('3b:length: '  +  $data.find('*').not('[template], [template] *').find('node2a').length); //finds 1
console.log('4b:length: '  +  $data.find('*:not([template], [template] *)').find('node2a').length); //finds 1 
```

我意识到在这个特定的例子中使用后续的 find()s 是没有意义的，并且 1a 和 1b 是这种情况下的最佳选择。但是，2a、3a 和 4a 不应该给出相同的结果吗？为什么不？

基本上，在我尝试找到我想要的节点之前，我试图排除具有模板属性的节点和作为具有模板属性的节点的后代的节点。

编辑 1：感谢@Steven，这为两个 JQuery 对象（不包括 XMLDocument 本身）提供了相同的结果：

```
console.log('2a:length: '+$dataXDoc.find('* *:not([template], [template] *)').find('node2a').length); //finds *1*
console.log('3a:length: '+$dataXDoc.find('* *').not('[template], [template] *').find('node2a').length); //finds *1*
console.log('4a:length: '+$dataXDoc.find('* *:not([template], [template] *)').find('node2a').length); //finds *1* 
```

编辑 2：当使用更复杂的 XML 文档进行测试时，我注意到仍然存在问题。随后的 find()s 的技巧是您必须在第二组上再次应用 :not 过滤器（这使得第一个 :not 过滤器已经过时）。只有这样你才能得到正确的结果。通过将结果记录为下面提到的@Steve，它有助于可视化不同的阶段。

编辑 3：如果我想要在最终 find() 之前访问子集的标准方式，这将是一个解决方案。首先使用过滤器选择不包括模板及其子节点的叶节点。然后像下面的例子一样在这个 $subset 到 $subset 上进行搜索。

```
$subset = $dataXDoc.find('*:not([template], [template] *)').filter(function(){return $(this).children().length == 0});
$node = $subset.filter('node2a'); 
```

编辑 4：更正编辑 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:59:09.387

如果您检查 find 命令链的每个步骤的输出：

```
console.log($dataXDoc);
console.log($dataXDoc.find('*:not([template], [template] *)'));
console.log($dataXDoc.find('*:not([template], [template] *)').find('node2a')); 
```

相对

```
console.log($data);
console.log($data.find('*:not([template], [template] *)'));
console.log($data.find('*:not([template], [template] *)').find('node2a')); 
```

您会看到 xmlDocument 本身与`*`选择器匹配，然后它会为您提供第二个匹配项，但在 xml 字符串的情况下，jQuery 将其解析为 xml，但不会创建 xml 文档。

希望有帮助。

# php - 如何从图像资源中获取图像数据？

> ID：10963039
> 
> 赞同：4
> 
> 时间：2012-06-09T17:24:45.310
> 
> 标签：php, azure, upload

我正在使用 Microsoft Azure 云，需要在那里上传图像。它的类上传方法 putBlob() 和 putBlobData() 需要数据本身（不是资源）或目录字符串作为参数，在图像实际写入 Blob 之前，这些方法都不可用。

```
$fp = fopen($tmp_name, 'r');
$data = fread($fp, filesize($tmp_name));
fclose($fp);

//Setup watermark destination
$new_watermarked_image_name = "watermark.jpg";

// Create image resources
$image = imagecreatefromstring($data); 
$watermark = imagecreatefrompng('images/watermark_large.png');
$copyright = imagecreatefrompng('images/copyright.png');

// Merge image resource s
$image = overlay_watermark_full_size($image, $watermark);  
$image = overlay_watermark_lower_right($image, $copyright);
imagejpeg($image, $new_watermarked_image_name, 100);

//put original image
$AzureStorageBlob->putBlob("uploads", "name", $tmp_name);
//put watermarked image
$AzureStorageBlob->putBlobData("uploads", "name", ?); // ? needs to be data 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T17:12:29.777

您需要使用 ob_start 捕获缓冲区，例如：

```
ob_start();
imagejpeg($tmp_img);
$i = ob_get_clean(); 
```

$i 是你的图像块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:45:52.663

通过使用最新[的 SDK for PHP](https://github.com/WindowsAzure/azure-sdk-for-php)，您只需传递图像流即可：

```
$image_stream = fopen($tmp_name, 'r');
// Check README.md of how to create $blobRestProxy
$blobRestProxy->createBlockBlob('container_name', 'my_image', $image_stream); 
```

如果您还有其他问题，请告诉我

# scala - 从 Scala 中的通用选项数组返回值

> ID：10963042
> 
> 赞同：2
> 
> 时间：2012-06-09T17:25:00.783
> 
> 标签：scala, scala-option

我在使我的函数通用化时遇到了一些困难，需要一些帮助。我有一个数组，它采用 T 的选项，其中 T 是小数。在 F# 中，有一个函数“选择”，它可以从选项集合中删除无。在 scala 中，我尝试使用“flatten”，但它不适用于泛型类型。

我的代码是

```
var arr = Array.fill(capacity)(None :Option[T]) 
```

...后来我尝试获取 Some's 的值：

```
var flat = arr.flatten 
```

错误是：

错误：找不到参数 m 的隐式值：scala.reflect.ClassManifest[U] val flat = arr.flatten

我是一个完整的 scala 菜鸟，也许不应该玩泛型 :) 我如何使这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T17:35:48.593

问题是您正在尝试创建一个新的泛型数组，而您的方法不知道如何创建，因为数组需要类型信息。然后，您应该添加一个`ClassManifest`上下文绑定，以便数组知道如何创建自己：

```
def flat[T: ClassManifest](bumpy: Array[Option[T]]): Array[T] = bumpy.flatten
val fish = Array(Some("salmon"), None, Some("haddock"))
flat(fish)  // Prints Array(salmon, haddock) 
```

请注意，如果您尝试将数组直接传递给方法，则试图弄清楚它是什么类型会感到困惑；您需要对 val 进行赋值以使其知道数组本身包含有关其类型的所有信息，然后`flat`应从数组中获取其类型。

# iphone - iOS 初始化 UIWebView 清除导航历史

> ID：10963045
> 
> 赞同：1
> 
> 时间：2012-06-09T17:25:15.413
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在 IB 上根据需要设置 uiWebviewSocial 并正常加载请求。但是，稍后我还需要初始化此 uiwebview 以清除 goBack 历史记录。为此，我正在使用另一个 uiwebview 对象 webViewBridge

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.webviewBridge = [[UIWebView alloc] init];
    self.webviewBridge = self.webViewSocial; 
```

当我需要初始化 UIWebViewSocial 时，我使用以下

```
 self.webViewSocial = nil;
    self.webViewSocial = [[UIWebView alloc] init];
    self.webViewSocial = self.webviewBridge; 
```

但是，如果我随后执行 goBack 操作，uiwebview 会在其历史记录为空时加载旧请求。我错过了什么？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:29:01.673

好吧，这些天我一直`UIWebView`在 Stack Overflow 中四处游荡，至少对我来说是一团糟。

似乎`UIWebView`缓存是自己工作的，我的意思是我们不能改变也不能访问一些由系统专门管理的信息......

About your problem, it seems although your`UIWebView` is sent to nil, it keeps getting info from cache... so, you should clear cache firstable You can check it [here](https://stackoverflow.com/questions/3683576/how-to-delete-the-cache-from-uiwebview-or-dealloc-uiwebview) and [there](https://stackoverflow.com/questions/2523435/how-to-clear-uiwebview-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:36:27.593

问题是在你初始化新的 webviewBridge 或 webviewSocial 之后，你会立即用下一行的赋值覆盖新对象。删除每个方法中的第三行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T21:47:18.907

如果我没有误解，当您加载视图时，您会得到一个“初始”webviewSocial（带有历史记录和内容？？），然后在您在 UIWebView 中进行一些加载后，这些将作为历史记录存储在 webviewBridge 中，不是吗？当您将 webviewSocial 发送到 nil 时，它应该是空的……但不是 webviewBridge ……然后如果您使用 webviewBridge 重新加载 webviewSocial （实际上是以前的整个历史），这就是它发生的原因……我认为

萨卢多斯

# math - 从距离矩阵中找到点的坐标

> ID：10963054
> 
> 赞同：16
> 
> 时间：2012-06-09T17:26:03.310
> 
> 标签：math, geometry, triangulation

我有一组点（坐标未知）和距离矩阵。我需要找到这些点的坐标以便绘制它们并显示我的算法的解决方案。

我可以在坐标 (0,0) 中设置这些点之一以简化，并找到其他点。谁能告诉我是否可以找到其他点的坐标，如果可以，如何？

提前致谢！

编辑忘了说我只需要 xy 上的坐标

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-18T20:01:41.490

基于角度的答案实施起来很麻烦，并且不能轻易推广到更高维度的数据。更好的方法是我和 WimC 的答案中提到的[：](https://math.stackexchange.com/questions/156161/finding-the-coordinates-of-points-from-distance-matrix/423898#423898)给定距离矩阵`D(i, j)`，定义

```
M(i, j) = 0.5*(D(1, j)^2 + D(i, 1)^2 - D(i, j)^2) 
```

它应该是一个正半定矩阵，其秩等于`k`可以嵌入点的最小欧几里得维数。然后可以从对应于非零特征值的`k`特征向量`v(i)`中获得点的坐标：将向量作为列放在矩阵中；那么每一行都是一个点。换句话说，给出所有点的第 th 个分量。`M``q(i)``sqrt(q(i))*v(i)``n x k``X``X``sqrt(q(i))*v(i)``i`

矩阵的特征值和特征向量可以在大多数编程语言中轻松获得（例如，在 C/C++ 中使用 GSL，在 Matlab 中使用内置函数`eig`，在 Python 中使用 Numpy 等）

请注意，此特定方法始终将第一个点放在原点，但点的任何旋转、反射或平移也将满足原始距离矩阵。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T18:11:02.300

第一步，任意指定一个点P1为(0,0)。

第二步，沿x轴正方向任意指定一个点P2。(0, Dp1p2)

步骤 3，找到一个点 P3 使得

```
Dp1p2 ~= Dp1p3+Dp2p3
Dp1p3 ~= Dp1p2+Dp2p3
Dp2p3 ~= Dp1p3+Dp1p2 
```

并将该点设置在“正”y 域中（如果它满足这些标准中的任何一个，则该点应放置在 P1P2 轴上）。
使用余弦定律确定距离：

```
cos (A) = (Dp1p2^2 + Dp1p3^2 - Dp2p3^2)/(2*Dp1p2* Dp1p3)
P3 = (Dp1p3 * cos (A), Dp1p3 * sin(A)) 
```

您现在已经成功地构建了一个正交空间并在该空间中放置了三个点。

第 4 步：要确定所有其他点，请重复第 3 步，给您一个暂定的 y 坐标。(Xn, Yn)。
比较矩阵中的距离 {(Xn, Yn), (X3, Y3)} 到 Dp3pn。如果相同，则您已成功识别点 n 的坐标。否则，点 n 在 (Xn, -Yn) 处。

请注意，第 4 步还有一个替代方法，但对于周六下午来说，这太数学了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:20:02.890

如果对于点 p、q 和 r，您的矩阵中有 pq、qr 和 rp，则您有一个三角形。

无论您的矩阵中有一个三角形，您都可以计算该三角形的两个解之一（独立于平面上三角形的欧几里德变换）。也就是说，对于您计算的每个三角形，它的镜像也是一个满足对 p、q 和 r 的距离约束的三角形。即使对于三角形也有两种解决方案这一事实导致了手性问题：您必须选择每个三角形的手性（方向），并且并非所有选择都可能导致问题的可行解决方案。

不过，我有一些建议。如果条目数很少，请考虑使用[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)。您可以将手性纳入退火步骤。这对于大型系统来说会很慢，并且可能不会收敛到完美的解决方案，但对于某些问题，这是最好的选择。

第二个建议不会给你一个完美的解决方案，但它会分布错误：[最小二乘法](http://en.wikipedia.org/wiki/Method_of_least_squares)。在您的情况下，目标函数将是矩阵中的距离与点之间的实际距离之间的误差。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-15T23:02:39.763

这是一道数学题。导出坐标矩阵 X 仅由其距离矩阵给出。

然而，有一个有效的解决方案——多维缩放，它可以做一些线性代数。简单地说，它需要一个成对的欧几里得距离矩阵 D，输出是估计的坐标 Y（可能是旋转的），它是 X 的近似值。出于编程原因，在 Python 中使用 SciKit.manifold.MDS 即可。

# javascript - 折线段的不同颜色

> ID：10963055
> 
> 赞同：1
> 
> 时间：2012-06-09T17:26:34.667
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一条折线，我想根据其长度为两点之间的每条线着色。我有哪些选择？我发现无法在单个对象上执行此操作，并且我必须使用的线条多达 15,000 个点，因此生成不同颜色的一万五千条单行并不是特别有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:44:10.757

[折线选项](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)声明有`strokeColor`一个折线。您必须自己手动完成。您可以通过构建一个函数来稍微自动化这个过程，该函数采用一组点，计算前两个点之间的距离，决定颜色，创建一条折线，然后移动到下一个点。冲洗并重复。是的，15K 点会很慢，尽管我怀疑即使使用 15K 的 LatLng 数组调用 GMaps API 也不会那么快......

# c# - 如何从 Vita 的背面触摸板获取输入数据？

> ID：10963057
> 
> 赞同：2
> 
> 时间：2012-06-09T17:26:45.977
> 
> 标签：c#, mono, playstation

如何使用 Playstation Suite 从 Vita 的背面触摸板获取输入数据？

我可以用：

```
Sce.Pss.Core.Input.Touch.GetData(0) 
```

要获取有关屏幕触摸的数据，有人知道如何从后触摸面板获取触摸数据吗？

我试过：

```
Sce.Pss.Core.Input.Touch.GetData(1) 
```

没有任何成功，我得到一个索引越界异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:24:23.830

不幸的是，PS Suite SDK 目前不支持背面触摸面板。SDK 旨在制作可在所有 PS 认证设备上运行的游戏，虽然这包括 Vita，但它还包括各种缺乏此类输入的 Android 设备。他们肯定会在这里寻求最低的共同点。

[这是官方的回应。](http://community.eu.playstation.com/t5/Input/Rear-touch/m-p/14829995#M27)

为什么他们将其重命名为 PS Mobile 确实更有意义。;)

# android - 新行的java分隔符替换

> ID：10963058
> 
> 赞同：0
> 
> 时间：2012-06-09T17:26:47.883
> 
> 标签：android, split, substring, csv

这是场景一的输入

```
String in = "<ENTER>title=Java-Samples<ENTER>" + 
                        "<ENTER>author=Emiley J<ENTER>" + 
                        "<ENTER>publisher=java-samples.com<ENTER>" + 
                        "<ENTER>copyright=2007<ENTER>" +
                        "<ENTER>cool beans<ENTER>"; 
```

流程

```
 in=in.substring(in.indexOf("<ENTER>")+7,in.lastIndexOf("<ENTER>"));
    String[] mSplitted= in.replaceAll("<ENTER><ENTER>", "<ENTER>").split("<ENTER>");
    String mFinal="";

    for(int i=0;i<mSplitted.length;i++)
    {
       System.out.println("values: "+mSplitted[i]);
       mFinal= mFinal+ mSplitted[i];
    }
    System.out.println(mFinal); 
```

输出是

title=Java-Samplesauthor=Emiley Jpublisher=java-samples.comcopyright=2007cool beans

塞纳里奥 2

输入

```
 String in = "What is the output of: <ENTER><ENTER>echo 6 % 4;"; 
```

流程

```
 in=in.substring(in.indexOf("<ENTER>")+7,in.lastIndexOf("<ENTER>"));
    String[] mSplitted= in.replaceAll("<ENTER><ENTER>", "<ENTER>").split("<ENTER>");
    String mFinal="";

    for(int i=0;i<mSplitted.length;i++)
    {
      // System.out.println("values: "+mSplitted[i]);
       mFinal= mFinal+ mSplitted[i];
    }
    System.out.println(mFinal); 
```

无输出

我希望输出在使用时添加一个新行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:48:42.933

你的问题仍然不是 100%，但是这个怎么样：

```
String mFinal = in.replaceAll("<ENTER><ENTER>", "\n").replaceAll("<ENTER>", ""); 
```

# jquery - jQuery动画div背景颜色渐变？

> ID：10963059
> 
> 赞同：5
> 
> 时间：2012-06-09T17:26:57.897
> 
> 标签：jquery, background, jquery-animate, gradient

我正在尝试使用 jQuery 构建一个背景动画，该动画从一种渐变变为另一种渐变。我知道您可以使用该`.animate()`功能更改纯色背景颜色，但这也可以用于渐变吗？

这是来自一些旧的 Digg 风格评论的一个很好的例子。我想做这样的事情，从绿色到黄色的动画

[![在此处输入图像描述](../Images/9ee3e92a3219794bdf5290f7721784e5.png)](https://i.stack.imgur.com/YlQys.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-19T21:24:51.200

使用 jQuery 为背景设置动画绝对是可行的，正如在这个 CodePen 中看到的那样（不是我的创作，但非常漂亮）： [http ://codepen.io/quasimondo/pen/lDdrF](http://codepen.io/quasimondo/pen/lDdrF)

CodePen 示例使用了一些巧妙的位移和其他技巧来确定颜色，但他只是定义了一个函数 (updateGradient) 来修改背景的 CSS，然后将其包装在 setInterval 中。

updateGradient 的主要内容如下：

```
 $('#gradient').css({
     background: "-webkit-gradient(linear, left top, right top, from("+color1+"),
   to("+color2+"))"}).css({
     background: "-moz-linear-gradient(left, "+color1+" 0%, "+color2+" 100%)"}); 
```

然后只需动态设置颜色变量，你就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T17:32:58.297

更新：如今，所有主流浏览器都支持 CSS 动画，这比 jQuery 更可靠。作为参考，请参阅[Rohit 的回答。](https://stackoverflow.com/a/36475795/299711)

旧答案：

使用 jQuery 直接为背景设置动画几乎是不可能的，至少我想不出办法。不过有一种方法：

```
-webkit-transition: background 5s ;
-moz-transition: background 5s ;
-ms-transition: background 5s ;
-o-transition: background 5s ;
transition: background 5s ; 
```

这确保有一个过渡。例如，您可以在 CSS 中执行此操作：

```
.background_animation_element{

    -webkit-transition: background 5s ;
    -moz-transition: background 5s ;
    -ms-transition: background 5s ;
    -o-transition: background 5s ;
    transition: background 5s ;

    background: rgb(71,234,46);
    background: -moz-linear-gradient(top,  rgba(71,234,46,1) 0%, rgba(63,63,63,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(71,234,46,1)), color-stop(100%,rgba(63,63,63,1)));
    background: -webkit-linear-gradient(top,  rgba(71,234,46,1) 0%,rgba(63,63,63,1) 100%);
    background: -o-linear-gradient(top,  rgba(71,234,46,1) 0%,rgba(63,63,63,1) 100%);
    background: -ms-linear-gradient(top,  rgba(71,234,46,1) 0%,rgba(63,63,63,1) 100%);
    background: linear-gradient(top,  rgba(71,234,46,1) 0%,rgba(63,63,63,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#47ea2e', endColorstr='#3f3f3f',GradientType=0 );

}

.background_animation_element.yellow{

    background: rgb(247,247,49);
    background: -moz-linear-gradient(top,  rgba(247,247,49,1) 0%, rgba(63,63,63,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(247,247,49,1)), color-stop(100%,rgba(63,63,63,1)));
    background: -webkit-linear-gradient(top,  rgba(247,247,49,1) 0%,rgba(63,63,63,1) 100%);
    background: -o-linear-gradient(top,  rgba(247,247,49,1) 0%,rgba(63,63,63,1) 100%);
    background: -ms-linear-gradient(top,  rgba(247,247,49,1) 0%,rgba(63,63,63,1) 100%);
    background: linear-gradient(top,  rgba(247,247,49,1) 0%,rgba(63,63,63,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7f731', endColorstr='#3f3f3f',GradientType=0 );

} 
```

并且，使用 jQuery，添加或删除黄色类：

```
$('.background_animation_element').addClass('yellow'); 
```

由于 CSS 文件中的过渡持续时间属性，这将确保逐步过渡。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-07T12:10:54.590

试试这个，效果很好 -

```
div{
     display:block; 
     width:500px; 
     height:250px;
     background: linear-gradient(270deg, #509591, #7bc446, #c0de9e, #b9dca4);
     background-size: 800% 800%;

     -webkit-animation: AnimationName 30s ease infinite;
     -moz-animation: AnimationName 30s ease infinite;
     animation: AnimationName 30s ease infinite;
}

@-webkit-keyframes AnimationName {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
@-moz-keyframes AnimationName {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
@-o-keyframes AnimationName {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
@keyframes AnimationName {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
```

```
<div></div>
```

来源 - [https://www.gradient-animator.com/](https://www.gradient-animator.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-29T13:54:26.157

我也需要它，我在谷歌搜索它。但是没有找到任何解决方案，所以我解决了这个问题。我用这种肮脏的方式做，但工作:)这是我的代码：

```
interval = 0;
gradient_percent = 0;
interval_value = 5;
var interval_gradient = setInterval(function(){
    if(interval == 10) clearInterval(interval_gradient);

    gradient_percent += interval_value;
    $('.slider-text').css('background', 'linear-gradient(to right, #373535 '+gradient_percent+'%,rgba(0,0,0,0) 100%)');

    ++interval;
}, 50); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T21:21:22.920

你可以试试[Backgroundor](https://github.com/KhaledElAnsari/backgroundor)，它是一个用于宏大动画的 jquery 插件。

这么简单，只要写`$('#yourDivId').backgroundor();`就行了！它有很多选项，例如更改动画时间的渐变程度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-14T16:54:40.497

```
$('#btn').on('click', function(){
    $({num: 0}).animate({num: 100}, { //Анимация от 0 до 100
        duration: 2000, // Скорость анимации
        easing: "swing",
        step: function(val) {
            $('.mark').html(Math.ceil(val)+'%');
            $('.mark').css('background', 'linear-gradient(90deg, #5ac740 '+val+'%, #b19bb8 '+val+'%)');
        }
    });
});
```

```
.markwrapper{
    width:500px;
    height:25px;
    padding-bottom: 10px;
    display: table;
}

.mark{
    color: #ffffff;
    font-weight: 600;
    background: #b19bb8;
    font-size: 12px;
    font-family: 'FuturaPT',Arial,sans-serif;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    border-radius: 50px;
    box-sizing: border-box;
}

#btn{
    color: #ffffff;
    padding: 5px 20px;
    font-weight: 600;
    background: #828282;
    font-size: 12px;
    font-family: 'FuturaPT',Arial,sans-serif;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    border-radius: 50px;
    box-sizing: border-box;
    border: 0;
    cursor:pointer;
}
```

```
<!--Подключаем библиотеку-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<div class="markwrapper">
    <div class="mark">0%</div>
</div>
<div>
    <button id="btn">Click</button>
</div> 
```

**背景 上 Jquery**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-14T06:15:14.063

我用 jQuery 编写了一个解决方案，您可以在其中定义颜色和它们从一个更改为另一个的顺序：

在下面的示例中，动画从绿色变为紫色，然后返回绿色，依此类推，直到动画在定义的秒数后停止

```
var stopAfterSec = 23;
var speed = 15;

var purple = [255, 26, 26];
var green = [26, 255, 118];
var sea_green = [26, 255, 244];

var order = [green, sea_green, purple];

var current = 0;
var direction = -1;
var color = end_color = order[current];

function updateGradient() {
  if (color[0] == end_color[0] && color[1] == end_color[1] && color[2] == end_color[2]) {
    direction = (current > 0 && current < order.length - 1) ? direction : (-1) * Math.sign(direction);
    current += direction;
    end_color = order[current];
  }

  $('.animGradientEfron').css({
    background: "-webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 1) 0%, rgba(" + color[0] + ", " + color[1] + ", " + color[2] + ", 0.48) 100%)"
  });
  for (var i = 0; i <= 2; i++) {
    if (color[i] != end_color[i]) {
      color[i] += Math.sign((end_color[i] - color[i]));
    }
  }
}

jQuery(document).ready(function() {
  var startGradientAnimation = setInterval(updateGradient, speed);

  setTimeout(function() {
    clearInterval(startGradientAnimation);
  }, stopAfterSec * 1000);

});
```

```
.animGradientEfron {
  position: absolute;
  top: 25%;
  left: 0%;
  width: 100%;
  height: 50%;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="animGradientEfron"></div>
```

# visual-c++ - Assembler：VC++产生的“函数调用”汇编代码

> ID：10963061
> 
> 赞同：2
> 
> 时间：2012-06-09T17:27:38.160
> 
> 标签：visual-c++, assembly, function-call

我绝对不是汇编专家，我对这个主题的了解也很浅，但我很好奇 Microsoft VC++ 编译器在一个简单的函数调用中做了什么，除了返回一个值之外什么都不做。

让我们有以下功能：

```
unsigned long __stdcall someFunction ( void * args) {
    return 0;
} 
```

现在，我知道`__stdcall`调用约定 CALLEE 负责堆栈展开，而`__cdecl`函数的 CALLER 负责此操作。但是对于这个例子，我想坚持前者。

在未优化的调试版本中，我看到正在生成以下输出：

```
unsigned long __stdcall someFunction (void * args) {
00A31730  push        ebp  
00A31731  mov         ebp,esp  
00A31733  sub         esp,0C0h  
00A31739  push        ebx  
00A3173A  push        esi  
00A3173B  push        edi  
00A3173C  lea         edi,[ebp-0C0h]  
00A31742  mov         ecx,30h  
00A31747  mov         eax,0CCCCCCCCh  
00A3174C  rep stos    dword ptr es:[edi]  
    return 0;
00A3174E  xor         eax,eax  
}
00A31750  pop         edi  
00A31751  pop         esi  
00A31752  pop         ebx  
00A31753  mov         esp,ebp  
00A31755  pop         ebp  
00A31756  ret         4 
```

如果可能的话，我会感谢任何人为我解释这段代码。我知道该`xor`语句实际上重置了`eax`寄存器以产生零返回值。这`ret 4`对我来说也是不言自明的。我认为`edi`,`esi`和`ebx`寄存器是在之前推送和之后弹出以保存原始状态，以便函数可以自由使用它们。但对于其余的 - 我不知道。

非常感谢任何答案！:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:37:53.407

所以你问这些行做什么：

```
00A3173C  lea         edi,[ebp-0C0h]  
00A31742  mov         ecx,30h  
00A31747  mov         eax,0CCCCCCCCh  
00A3174C  rep stos    dword ptr es:[edi] 
```

在 Visual C++ 调试运行库中，未初始化的堆栈内存被初始化为包含`0xCC`字节。这就是这些说明的作用。

在 ASM 代码的开头，有一条为堆栈`sub esp,0C0h`分配`0xC0`字节的指令。但是，这个函数中没有使用局部变量，那么这个是从哪里来的呢？它用于编辑+继续支持：您可以添加局部变量并继续调试。

`0xCC`操作码表示x86 汇编指令，因此如果您尝试执行该`INT 3`代码（由于错误而意外），程序将抛出一个 INT 3 异常，该异常将由调试器或操作系统处理。所以它不仅仅是一些随机值。

# java - Java 程序是否有可能成为 Linux 上的电子邮件目的地

> ID：10963063
> 
> 赞同：3
> 
> 时间：2012-06-09T17:27:48.117
> 
> 标签：java, linux, postfix-mta

是否可以将 postfix 收到的电子邮件发送到 java 程序？我有一个使用 Postfix 接收电子邮件的 Linux 系统。我想使用 Java 程序来处理原始电子邮件。换句话说，我不想处理 SMTP、IMAP 等协议。我只想通过 Postfix 将原始电子邮件消息文本传递给 Java 程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:31:05.270

您可以在 中创建命令[别名](http://www.postfix.org/aliases.5.html)`/etc/aliases`，其形式为：

```
my-alias: "|/path/to/my/command param param" 
```

然后邮件`my-alias@example.com`将通过管道传输到`command`.

# mercurial - mercurial：“中止：无法符号链接”

> ID：10963069
> 
> 赞同：3
> 
> 时间：2012-06-09T17:28:50.283
> 
> 标签：mercurial

我正在尝试做一个`hg merge`但我收到了消息`abort: could not symlink to '/path/one': File exists: /path/two`

/path/one 和 /path/two 都存在并且是目录。我不想摆脱他们中的任何一个。

# c# - 将派生类的对象存储为基类变量。什么是 OOP 术语？

> ID：10963070
> 
> 赞同：2
> 
> 时间：2012-06-09T17:29:05.087
> 
> 标签：c#, .net

在 C# 中，我们经常使用初始化语法，基类的实例使用其继承的子类进行初始化，如下所示：

```
Control BTN = new Button(); 
```

现在我的问题是，这种初始化的正式名称是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T17:35:02.220

根据 C# 规范，它被称为带有*隐式引用转换的**简单赋值*。

 *> **7.16.1 简单赋值**
> 
> 在简单赋值中，右操作数必须是可隐式转换为左操作数类型的类型的表达式。
> 
> ...
> 
> x = y 形式的简单赋值的运行时处理包括以下步骤：
> 
> *   ...
> *   y 被评估，如果需要，通过隐式转换（第 6.1 节）转换为 x 的类型。
> 
> **6.1.6 隐式引用转换**
> 
> 隐式引用转换是：
> 
> *   ...
> *   从任何类类型 S 到任何类类型 T，只要 S 派生自 T。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T17:35:19.057

我能想到的最简洁的术语是多态实例化，或多态初始化。这似乎在不写整个句子的情况下捕获了必要的元素。不过，不知道一个正式的术语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T17:32:07.023

这不是基类*实例初始化*。这是通过基类类型的变量初始化和*引用*该实例的继承类实例。你可以调用它`assignment value to variable`。没有特别的名字。*

# c# - .dbo 上的 SQL Server CE 字符串错误。句法

> ID：10963073
> 
> 赞同：1
> 
> 时间：2012-06-09T17:29:37.720
> 
> 标签：c#, winforms, sql-server-ce

这个[SO问题的以下问题](https://stackoverflow.com/questions/10961648/sql-server-compact-sdf-file-within-c-sharp-project-problems-with-sqlexception)

我正在使用 c# winforms 项目中包含的 SQL Server CE 数据库

以下不起作用，但如果我将 SQL 字符串修改为

```
SELECT * FROM helloworld 
```

然后它确实有效。为什么？有没有我可以使用的完整路径

```
SELECT * FROM <blah>.<blah>.helloworld 
```

?

```
using (var conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"].ConnectionString))
{
    conn.Open();

    using (var myAdapt = new SqlCeDataAdapter("SELECT * FROM experiment.dbo.helloworld", conn))
    {
        DataSet mySet = new DataSet();
        myAdapt.Fill(mySet, "AvailableValues");
        DataTable myTable = mySet.Tables["AvailableValues"];
        this.uxExperimentDGV.DataSource = myTable;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:12:39.537

SQL CE 没有像 SQL Server 那样的多个模式/目录（参考 Thomas Levesque Jun 9），因此该`FROM`子句中不需要进一步的信息

# python - 在数据库中保存打开 url 的事件

> ID：10963079
> 
> 赞同：0
> 
> 时间：2012-06-09T17:30:17.170
> 
> 标签：python, django

想象一下以 url 作为内容的帖子。

简化： `<post><link>http://blablabla.com/</link></post>`

我正在寻找一个神奇的功能，它允许我在数据库中保存已点击帖子中的 url。例如，有人单击该 url，它不仅在新窗口中打开，而且背景魔术功能将此事件保存在数据库中。我可以同时输入 url 和 def 吗？我在 django 中构建了一个应用程序。如果有人知道如何咬它？如果是的话，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:01:09.920

我会说你在这里有两个选择。如果它是一个内部链接（即[http://blablabla.com](http://blablabla.com)指的是您自己的站点），您可以将日志记录功能内置到接收视图中。

或者，您可以修改链接以通过您自己的脚本，该脚本在重定向到请求的页面（解码后）之前记录请求（urlencoded）：

```
<post><link>http://blablabla.com/</link></post> 
```

变成

```
<post><link>http://mysite.com/log?page=http%3A%2F%2Fblablabla.com%2F</link></post> 
```

# ruby - Ruby koans 对 test_hash_is_unordered 的断言

> ID：10963081
> 
> 赞同：0
> 
> 时间：2012-06-09T17:30:32.807
> 
> 标签：ruby, hash

在 Ruby 1.9 中，Hash 是根据插入顺序进行排序的。为什么 Ruby koans 对 test_hash_is_unordered 方法的断言返回 true？

对我来说，该方法的标题非常具有误导性……也许它指的是 Ruby 将识别使用不同键顺序插入创建的 2 个相等的哈希值。

但是，从理论上讲，这种断言：

```
hash1 = { :one => "uno", :two => "dos" }
hash2 = { :two => "dos", :one => "uno" }

assert_equal ___, hash1 == hash2 
```

应该返回假。或不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:48:22.340

来自[精美手册](https://ruby-doc.org/core/Hash.html#method-i-3D-3D)：

> **`hsh == other_hash → true or false`**
> 
> 相等——如果两个散列都包含相同数量的键，并且每个键值对等于（根据`Object#==`）另一个散列中的对应元素，则它们是相等的。

因此，如果两个哈希具有相同的键/值对，则无论顺序如何，它们都被认为是相等的。

文档中的示例甚至包含以下内容：

```
h2 = { 7 => 35, "c" => 2, "a" => 1 }
h3 = { "a" => 1, "c" => 2, 7 => 35 }
h2 == h3   #=> true 
```

是的，这个`test_hash_is_unordered`标题有点误导，因为没有专门测试顺序，只证明了关于平等的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T07:49:11.713

我认为这只是在这种情况下“无序”意味着什么的问题。

作为一个人，如果它们不按顺序进行比较，我会发现很难比较两组。问题是我无法轻松匹配相同的元素并查看集合是否等效。除非这些集合碰巧以相同的顺序列出，否则我会认为它们是不平等的。这似乎也是你得出的结论。

然而，问题是集合的数学概念中项目的顺序根本*不重要*。无法对项目进行“排序”，因此如果两个集合包含相同的元素，则它们是相同的。设置的项目是无序的，但它们不是“乱序”；秩序的概念不适用。

我想这完全封装在表达式“hash_is_unordered”中，但这对我来说并不是很明显，至少！

# layout - Github引导用户界面？或类似 github 的 UI 模板

> ID：10963082
> 
> 赞同：11
> 
> 时间：2012-06-09T17:30:50.200
> 
> 标签：layout, user-interface, github, twitter-bootstrap

我真的很欣赏 Github 的网站外观和感觉，我想在我正在开发的管理工具上“克隆”它。

有谁知道是否有 Github Bootstrakp（就像 Twitter 引导程序）或类似的东西？也许是一个类似 Github 的 UI 管理模板......

我找到了他们的样式指南页面（https://github.com/styleguide/），但无法获得 css 和 javascript 源代码。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:16:20.207

据我所知，Github 的 ui 不是开源的，但是有一个名为 gitlabhq 的 FOSS 克隆：

[http://gitlabhq.com/](http://gitlabhq.com/)

源代码在 github 上可用：

[https://github.com/gitlabhq/gitlabhq](https://github.com/gitlabhq/gitlabhq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T15:00:16.463

有[https://github.com/primer/primer](https://github.com/primer/primer)描述为

> 支持 GitHub 前端设计的 CSS 工具包。它故意限制在通用组件上，以便为我们的开发人员提供最大的灵活性，并保持 GitHub 独一无二的 GitHubby。它使用 SCSS 构建并通过 NPM 提供，因此很容易将其全部或部分包含在您自己的项目中。

# jquery - jQuery 每 30 秒刷新一次

> ID：10963087
> 
> 赞同：4
> 
> 时间：2012-06-09T17:31:34.683
> 
> 标签：jquery, refresh

我现在正在试验 jQuery 和 PHP。我有这个问题。所以我有这个代码

```
$(document).ready(function(){
  $('.bopa').load('accounts.php');
}); 
```

它工作得很好。但问题是我希望 div 的内容每 30 秒刷新一次。这样当有人在数据库中提交内容时，它会在 20 秒后立即出现。那可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T17:32:43.790

此代码将每 30 秒执行一次加载。

```
$(document).ready(function(){
  setInterval(function(){
    $('.bopa').load('accounts.php');
  },30000);
}); 
```

数字 30000 以毫秒为单位。

`1000 milliseconds = 1 second`

* * *

如果您想要更多控制，例如禁用刷新的功能，您可以执行以下操作 -

```
var refreshInterval = '';
$(document).ready(function(){
  refreshInterval = setInterval(function(){
    $('.bopa').load('accounts.php');
  },30000);
}); 
```

然后，只要您想每 30 秒取消一次刷新，您就可以调用 -

```
clearInterval(refreshInterval); 
```

* * *

参考资料 - [window.setInterval](https://developer.mozilla.org/en/window.setInterval)（[Mozilla 开发者网络](https://developer.mozilla.org/en/)）

# objective-c - 如何在Objective C中从HTML中获取有效的图像数据

> ID：10963094
> 
> 赞同：0
> 
> 时间：2012-06-09T17:32:24.397
> 
> 标签：objective-c, image, parsing

这是我试图从中检索图像的 HTML 部分。

```
div class="image">
              <a href="http://www.web.com/EN/105/News/10228/"><img src="/images/cache/360x295/crop/images%7Ccms-image-000007796.jpg" width="360" height="295" alt=" (photo: )" /></a>
                         </div> 
```

我可以分别获取“href”和“img src”值，但它们都不是可以让我访问图像的链接。有效链接将`http://www.web.com`加上 img src 值。我想将字符串：[http://www.web.com](http://www.web.com)附加到 img src 但无法弄清楚如何做到这一点，并且不确定这是正确的方法。所以，我想要得到的是`http://www.web.com/images/cache/360x295/crop/images%7Ccms-image-000007796.jpg`

这是我用来解析 HTML 数据的代码：

```
-(void) fethchData

{
    NSError *error = nil;
    NSURL *url=[[NSURL alloc] initWithString:@"http://www.web.com/"];
    NSString *strin=[[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    HTMLParser *parser = [[HTMLParser alloc] initWithString:strin error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
        return;
    }

HTMLNode *bodyNode = [parser body];

NSArray *imageNodes = [bodyNode findChildTags:@"div"];

    for (HTMLNode *imageNode in imageNodes) {
        if ([[imageNode getAttributeNamed:@"class"] isEqualToString:@"image"]) {
            HTMLNode *aNode = [imageNode firstChild];
            HTMLNode *imgNode = [aNode nextSibling];
            HTMLNode *imNode = [imgNode firstChild];
             NSURL* imageURL = [NSURL URLWithString:[imNode getAttributeNamed:@"src"] relativeToURL:url];
        NSLog(@"%@", imageURL);

        } 
    }

} 
```

这是输出：`/images/cache/360x295/crop/images%7Ccms-image-000007653.jpg -- http://www.web.ge/`

我需要先看看`http://www.web.ge/`，然后再看看其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:28:30.427

采用：

```
NSURL* imageURL = [NSURL URLWithString:[imNode getAttributeNamed:@"src"] relativeToURL:theURLFromWhichYouDownloadedThisHTML]; 
```

更新：如果你觉得你必须有一个绝对 URL 对象，你可以按照上面的：

```
imageURL = [imageURL absoluteURL]; 
```

# html - 为 html5 游戏开发选择合适的工具

> ID：10963099
> 
> 赞同：0
> 
> 时间：2012-06-09T17:33:05.027
> 
> 标签：html, jquery-mobile, sencha-touch

我想开发一个扑克 - 像 html5 游戏（供移动使用）。我对市场上各种各样的框架和工具感到困惑。游戏将有一个带有基本动画的扑克桌以及一些弹出窗口和下拉列表供用户选择。后端将是 asp.net，使用服务器发送的事件将数据实时推送到客户端。我从 jquery mobile /sencha touch 开始，但我认为它们不是这个提议的正确工具。然后我看到了看起来更好的[impactjs 。](http://impactjs.com/)你能把我的注意力集中在我提议的正确工具上吗？Impactjs 对我有好处吗？

另一个问题：什么对我的建议更好：画布还是 svg？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:54:51.407

我觉得建议使用基本动画和一些弹出窗口，因此将使用 HTML5、CSS3 和 javascript。如果有人更复杂或更漂亮，那么会产生影响。

Sencha 将通过“幻灯片”、“淡入淡出”或“流行”等效果来帮助您，sencha 应用程序非常漂亮。

我希望这有帮助。：） 再见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T14:36:02.440

我使用 Impactjs 和 smartfoxserver 构建了一个类似的游戏。效果很好！。尽管 Smartfox 仅支持 Internet Explorer 10，但除其他外。

# javascript - JavaScript API 是否公开了用于压缩文件的内部解压缩器？

> ID：10963107
> 
> 赞同：1
> 
> 时间：2012-06-09T17:34:28.147
> 
> 标签：javascript, c++, c

浏览器编写了解压缩器来处理压缩的 CSS、JS 等。

我可以通过 javascript 访问它吗...类似于`decompress(text_stream)`

我不想使用 JavaScript 实现（那里有很多实现：这里是一篇[文章](https://stackoverflow.com/questions/4875020/javascript-decompress-inflate-unzip-ungzip-strings#comment14312390_4875020)），因为我知道浏览器已经用 C/C++ 实现了一个。是否有任何理由无法从 API 访问它？

看了这么多解压的帖子和.js库，估计是被忽略了，或者有什么根本原因不能暴露。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:10:21.247

如果您谈论的是 gzip 数据压缩，那么它的处理级别要比 javascript 低得多，因为任何浏览器元素都可以使用 gzip 压缩。在这种情况下，文档会在浏览器使用之前自动解压缩。有很多很多可用的 gzip 库。这不会通过 javascript API 公开，因为没有必要 - 它在浏览器中是无缝且自动的。无需在 javascript 应用程序中手动执行 gzip 解压缩。

如果您正在谈论 javascript 缩小，其中通过执行变量替换（使用较短的变量名）、删除空格等来减小 javascript 文件的大小......那么浏览器不需要“解压缩”缩小文件并且不会这样做。它们仍然是合法的 javascript 文件，它会按原样运行它们。因此，没有用于缩小的 API，因为浏览器不这样做。第三方应用程序已被构建为 unminify，但这主要是为了使代码对人类更具可读性 - 浏览器不需要或完成它。

缩小和压缩可以一起使用，其中首先缩小 JS 文件，然后在传输到浏览器期间由 Web 服务器压缩。在这种情况下，浏览器只看到压缩并在收到文件时自动解压缩。它忽略了缩小，因为即使在缩小后文件仍然是合法且可运行的 javascript。浏览器不需要取消缩小它，也不需要。

# facebook - 运行 Heroku 预先构建的 facebook 应用程序时的无限循环

> ID：10963109
> 
> 赞同：5
> 
> 时间：2012-06-09T17:34:42.770
> 
> 标签：facebook, heroku

如果您注册一个 facebook 应用程序并使用 Heroku 的服务，它将为您生成一个示例应用程序，因为从几天前开始，发生无限循环并且您无法与您的应用程序交互。我试图替换 window.location = window.location; 与 window.top.location.href = “https://apps.facebook.com/xxxxxx”：

```
//Listen to the auth.login which will be called when the user logs in
//using the Login button
FB.Event.subscribe('auth.login', function(response) {
// We want to reload the page now so PHP can read the cookie that the
// Javascript SDK sat. But we don't want to use
// window.location.reload() because if this is in a canvas there was a
// post made to this page and a reload will trigger a message to the
// user asking if they want to send data again.
//window.location = window.location;
window.top.location.href = "https://apps.facebook.com/YOUR_APPs_NAMESPACE"
}); 
```

幸运的是，它解决了问题。这里只是分享。

# python - Python urllib2 上传慢

> ID：10963110
> 
> 赞同：0
> 
> 时间：2012-06-09T17:35:01.513
> 
> 标签：python, urllib, poster

用于 python 的 Urllib 在上传文件时似乎非常慢（使用 multipart/form-data）

浏览器（Chrome）在 20 秒内完成，而脚本使用几乎 i 分钟来处理同一个文件。

我使用 urllib2 进行连接，并使用海报创建 http 标头和数据，相关的 python 版本是 2.7。

```
def upSong(fileName):
    datagen, headers = multipart_encode({"mumuregularfile_0": open(fileName, "rb")})

    uploadID = math.floor(random.random()*1000000)
    request = urllib2.Request("http://upload0.mumuplayer.com:443/?browserID=" + browserID + "&browserUploadID=" + str(uploadID), datagen, headers)

    urllib2.urlopen(request).read() 
```

有没有办法加快 pythons/urllibs 连接，或者这只是 python 语言的限制？

编辑：应该注意我已经测试了所有部分，毫无疑问是 urllib.read()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:39:29.850

Chromium 可能使用了压缩（如果网站支持），而 urllib 看起来不像使用它（grepping "gz" 或 "bz" 没有结果）。

我不确定，但 Chromium 也可能比传统连接更优化，使用套接字黑客或其他东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:52:54.717

您可以在行后添加一些时间报告功能。通过这一点，您可以确定哪个步骤正在降低速度或花费更长的时间。它也可能因网络速度而异...

# c# - 如何读取 xml 片段并验证架构

> ID：10963112
> 
> 赞同：0
> 
> 时间：2012-06-09T17:35:04.210
> 
> 标签：c#, xml, xml-parsing

如何解析 xml 文档并使用 c# 验证无效的片段，忽略最后的二进制数据。是否可以仅解析根元素之间包含的 xml 元素而忽略二进制数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:37:39.353

您可以使用`XDocument`验证方法来验证整个文档，然后只要您使用在 XDcoument 中嵌入验证信息的覆盖，您就可以返回特定元素并获取它们的有效性。

抱歉，我目前没有任何代码可用于此...

# telnet - 从linux终端获取远程cmd

> ID：10963115
> 
> 赞同：0
> 
> 时间：2012-06-09T17:35:33.793
> 
> 标签：telnet, remote-access

我需要从终端linux在windows远程机器上运行一些脚本，我尝试过使用telnet，但是在windows机器上它无法运行并且没有安装ssh服务器。所以我需要其他方式在没有图形界面的情况下远程运行命令。

我可以从 Windows 机器运行命令，但是我需要打开 SSH 隧道才能看到远程机器，我使用了 psexec 但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:46:12.117

您是否有权在远程服务器上安装软件？

您的 SSH 客户端将无法连接到远程计算机，除非该计算机正在运行 SSH 服务器以响应您客户端的连接请求。

在 Windows 上运行 SSH 服务器有许多可能的选项。（谷歌用于 ssh 服务器窗口）

因为 SSH 使外部用户可以访问/控制您的服务器，所以它被设计为一种安全工具。因此，我建议使用仍在积极维护的 SSH 服务器，并使其保持最新状态。旧且不再受支持的服务器可能包含可能永远无法解决的已知安全问题，从而使您的服务器易受攻击。

有许多很好的免费开源解决方案可以解决这个问题，因此您无需购买任何东西。

过去，我使用过安装了 OpenSSH ssh 服务器的运行 Cygwin 的 Windows 机器。根据您选择安装多少 Cygwin 系统，它可以使目标 Windows 主机在环境方面更像是登录另一个 Linux 机器。

[您可以从http://www.cygwin.com/](http://www.cygwin.com/)下载 Cygwin 的安装程序

# android - 使用 android xml 和 java 创建一个列表

> ID：10963119
> 
> 赞同：0
> 
> 时间：2012-06-09T17:35:54.207
> 
> 标签：android, xml, listview, android-xml

我从网上得到了一份清单（链接在[这里](http://blog.sptechnolab.com/2011/02/01/android/android-custom-listview-items-and-adapters/)）

它使用两个 xml 布局来创建列表，第一个 xml 只是第二个 xml 将在列表中显示为按钮的背景。

我想做的是有相同的列表，但在顶部添加一个标题或图片标题，我一直在玩这个列表，但我无法让它工作，我能想到的唯一方法就是让这发生以某种方式移动显示第二个 xml 的位置，并在顶部添加我喜欢的任何内容。

感谢您为完成这项工作提供的帮助和想法！

[编辑] 代码片段...第一个 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="schemas.android.com/apk/res/android";
android:id="@android:id/list"
android:layout_width="fill_parent"    
android:layout_weight="1"
android:scrollbars="none"
android:divider="#000000"
android:scrollingCache="true" android:layout_height="wrap_content"/> 
```

第二个 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"
android:orientation="vertical"
android:background="#AA010101"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
<ListView android:id="@+id/list"
android:layout_width="1px"
android:layout_height="1px"
android:layout_weight="1">
</ListView>
<RelativeLayout xmlns:android="schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:paddingLeft="10dp"
android:paddingTop="5dp"
android:paddingBottom="5dp" 
android:layout_height="fill_parent">
<ImageView android:id="@+id/img"
android:layout_width="80dp"
android:layout_height="70dp"
android:layout_alignParentLeft="true"
android:scaleType="fitXY" />
<TextView android:layout_width="wrap_content"
android:id="@+id/title" 
android:layout_height="wrap_content"
android:paddingTop="18dp"
android:layout_toRightOf="@+id/img" 
android:textStyle="bold"
android:textColor="#ffffff"
android:layout_marginRight="50dp"
android:paddingLeft="10dp"
android:textSize="16sp" />
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:02:25.380

`<ListView>`您必须通过添加之前想要的任何内容来编辑包含 , 的 XML 文件（很可能是`TextView`带有 Compound Drawable 的）。所以你所说的“背景”看起来更像这样：

主布局应包含 a `<TextView>`(+eventually a Compound Image) + a `<ListView>`。

二级布局应该承载每个列表项的内容。如果您`<ListView>`在每个 XML 布局中都有一个，则意味着您将有一个列表列表...我对您的列表和应用程序了解不多，也不知道您希望在每个列表项中显示什么信息（例如ContactName、CalendarDate、Cities... 随便）。但是很少有机会在它们中都需要 ListView。

mainListLayout.xml

```
<?xml version=”1.0″ encoding=”utf-8″?>
<LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android”
    android:orientation=”vertical”
    android:layout_width=”fill_parent”
    android:layout_height=”fill_parent”&gt;

    <TextView
        android:id="@+id/Text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="text to replace image"
        android:drawableLeft="@drawable/reference"
        android:text="Title of the list"/>

    <ListView
        android:id=”@android:id/list”
        android:layout_width=”fill_parent”
        android:layout_height=”wrap_content” />

</LinearLayout> 
```

Drawable 显然可以在右侧、顶部或底部，而不仅仅是在左侧。您可能还想看看在`android:drawablePadding="@dimen/xxx`文本/标题和图像之间添加一些额外的空间。Drawable 必须是来自 res/drawable 的 ic_* png 文件之一（最终是 -hdpi、-mdpi 等）

项目布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayout"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<ImageView
android:contentDescription="@string/ItemIcon"
android:layout_width="000"
android:layout_height="000"
android:src="@drawable/ic_icone"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"/>
<TextView
android:id="@+id/ItemDescription"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:textColor="#000000"
android:text="ItemDescription" />
</RelativeLayout> 
```

# flash - flash 视频聊天错误（浏览器截图）

> ID：10963120
> 
> 赞同：0
> 
> 时间：2012-06-09T17:36:10.770
> 
> 标签：flash, video, livechat

我在我的视频聊天应用程序中观察到非常奇怪的行为。它绝对是标准的应用程序：屏幕上的视频控制，连接到 Wowza 媒体服务器，接收视频。一切正常，但是当另一方断开连接并重新连接时，第一方会在几秒钟内看到奇怪的画面：它看起来像 Flash 窗口附近的浏览器窗口内容的屏幕截图，但大小是两倍。之后，它会从另一侧看到正常的视频。

我在 Google 中没有找到任何关于此类内容的参考资料。试图将 wmode 从透明更改为窗口，但没有帮助。我也可以说它并不总是发生，仅在某些计算机上发生。可能是传输方出现了问题，因此它传输了如此奇怪的图像。

有人看到这样的问题吗？

# c# - 不能在 Silverlight 中使用 ToOADate()

> ID：10963122
> 
> 赞同：0
> 
> 时间：2012-06-09T17:36:45.517
> 
> 标签：c#, silverlight

在 C# 和 Silverlight (v5) 中拼凑页面时，我遇到了一个令人沮丧的小问题：我无法使用该`DateTime.ToOADate()`函数！Intellisense 在键入时不会“看到”它，如果我还是手动键入它：

```
double OAdate()
{          
    double oadate= DateTime.ToOADate();
    return oadate;
} 
```

..有人告诉我：

> 非静态字段、方法或属性“System.DateTime.ToOADate()”需要对象引用

我知道我在做一些愚蠢的事情……但是什么？`FromOADate()`工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:42:42.067

错误信息很明确，需要先初始化DateTime，然后才能使用这个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T17:42:49.713

您需要有日期时间对象才能调用[`ToOADate`](http://msdn.microsoft.com/en-us/library/system.datetime.tooadate)方法。

ToOADate 是将**实例**的值转换为等效的 OLE 自动化日期。它不是像这样**的静态方法**[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)

尝试

```
DateTime.Now.ToOADate(); 
```

或者

```
 DateTime MyDate = new  DateTime(1904, 12, 12, 1,4,1);
 double MyDouble = MyDate.ToOADate(); 
```

# android - 具有照片编辑和推送通知的跨平台移动应用程序 - 建议

> ID：10963124
> 
> 赞同：0
> 
> 时间：2012-06-09T17:36:48.883
> 
> 标签：android, ios, cordova

我们正在开发一款手机约会应用程序，其中包括以下功能：

1.  管理照片：
    *   添加/删除
    *   能够裁剪照片
    *   减小文件大小
    *   在上传到服务器之前自动设置照片的尺寸
2.  推送通知

如果我们的目标平台是 iOS 和 Android，我们是否可以使用 phonegap 或类似的跨平台开发应用程序来完成上述任务？

如果没有，请建议是否有除原生开发之外的替代方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:42:44.320

理论上，您描述的任务可以在外部 JS 库（例如：pixastic）的帮助下使用 Phonegap 完成，该库可以帮助您实现一些操作，如裁剪、调整大小等。

但是，Phonegap 的问题在于它与浏览器的性能有关。如您所知，最常用的 android 版本是 2.3 和 2.2 。他们的内置浏览器（由 Phonegap 使用）可能难以正确加载某些页面或按预期快速呈现它们。

但是，如果您瞄准的是 ICS 设备，则可以继续。恕我直言，如果 Chrome 成为默认的 Android 浏览器（可能在 Android 5 中？），我会使用 Phonegap 开发此类应用程序。但是，我会推荐原生开发您的应用程序。

# python - 创建在执行之间持续存在的内存缓存

> ID：10963125
> 
> 赞同：7
> 
> 时间：2012-06-09T17:36:52.237
> 
> 标签：python, caching, command-line, os-agnostic

我正在开发一个 Python 命令行实用程序，它可能涉及对一组文件的相当大的查询。这是一个相当有限的查询列表（想想索引的数据库列）为了提高进程中的性能，我可以生成一次排序/结构化列表、映射和*树*，然后重复点击它们，而不是每次都点击文件系统。

但是，这些缓存在进程结束时会丢失，并且每次脚本运行时都需要重新构建，这大大增加了我的程序的运行时间。我想确定在我的命令的多次执行之间共享此数据的最佳方式，这可能是并发的，一个接一个，或者在执行之间有很大的延迟。

要求：

*   必须快速 - 应尽量减少任何类型的每次执行处理，包括磁盘 IO 和对象构造。
*   必须与操作系统无关（或者至少能够挂钩到 Unix/Windows 上的类似底层行为，这更有可能）。
*   必须允许相当复杂的查询/过滤——我认为键/值映射不够好
*   不需要是最新的 - （简单地说）陈旧的数据非常好，这只是一个缓存，实际数据正在单独写入磁盘**。**
*   不能使用重量级的守护进程，比如 MySQL 或 MemCached——我想尽量减少安装成本，要求每个用户安装这些服务太多了。

喜好：

*   如果可能的话，我想完全避免任何长时间运行的守护进程。
*   虽然我希望能够快速更新缓存，但在更新时重建整个缓存并不是世界末日，快速读取比快速写入重要得多。

在我理想的幻想世界中，我能够在执行之间直接保留 Python 对象，有点像 Java 线程（如 Tomcat 请求）共享单例数据存储对象，但我意识到这可能是不可能的。不过，我越接近它越好。

**候选人：**

*   内存中的 SQLite

    对于我的用例而言，SQLite 本身似乎不够快，因为它由磁盘支持，因此每次执行时都必须从文件中读取。也许这并不像看起来那么糟糕，但似乎有必要将数据库持久存储在内存中。SQLite 允许 DB[使用内存作为存储](http://www.sqlite.org/inmemorydb.html)，但这些 DB 在程序退出时被销毁，并且不能在实例之间共享。

*   [使用mmap](http://docs.python.org/library/mmap)将平面文件数据库加载到内存中

    在频谱的另一端，我可以将缓存写入磁盘，然后使用 mmap 将它们加载到内存中，可以在不同的执行之间共享相同的内存空间。但是，如果所有进程都退出，我不清楚 mmap 会发生什么。如果 mmap 最终从内存中刷新没关系，但我希望它停留一段时间（30 秒？几分钟？），以便用户可以一个接一个地运行命令，并且可以重用缓存。 [这个例子](http://blog.schmichael.com/2011/05/15/sharing-python-data-between-processes-using-mmap/)似乎暗示需要一个打开的 mmap 句柄，但我还没有找到任何关于内存映射文件何时从内存中删除并需要从磁盘重新加载的确切描述。

    我想我可以实现这个，如果 mmap 对象在退出后仍然存在，但感觉非常低级，我想有人已经实现了一个更优雅的解决方案。我不想开始构建它只是为了意识到我一直在重建 SQLite。另一方面，感觉它会非常快，并且我可以根据我的特定用例进行优化。

*   使用 Processing 在进程之间共享 Python 对象

    处理包指示“[对象可以使用...共享内存在进程之间共享](http://pypi.python.org/pypi/processing)”。浏览其余的文档，我没有看到任何关于这种行为的进一步提及，但这听起来*很有*希望。任何人都可以指导我了解更多信息吗？

*   将数据存储在 RAM 磁盘上

    我在这里关心的是特定于操作系统的功能，但我可以[创建一个 RAM 磁盘](http://www.cyberciti.biz/faq/howto-create-linux-ram-disk-filesystem/)，然后简单地读取/写入它（SQLite？）。fs.memoryfs包似乎是与多个操作系统一起工作的有前途的替代方案，但评论暗示了相当多的限制[。](https://stackoverflow.com/questions/4351048/how-can-i-create-a-ramdisk-in-python)

我知道[pickle](http://docs.python.org/library/pickle.html)是一种存储 Python 对象的有效方法，因此它可能比任何类型的手动数据存储都具有速度优势。我可以将泡菜加入上述任何选项吗？这会比平面文件或 SQLite 更好吗？

我知道有很多与此相关的问题，但我进行了相当多的挖掘，但找不到任何直接解决我关于多个命令行执行的问题的东西。

**我完全承认，我可能想多了。我只是想了解我的选择，以及它们是否值得。**

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T17:55:47.813

我只会做[可能可行的最简单的事情](http://c2.com/xp/DoTheSimplestThingThatCouldPossiblyWork.html)。...在您的情况下，这可能只是转储到泡菜文件中。如果您发现它不够快，请尝试更多相关的东西（例如 memcached 或 SQLite）。Donald Knuth 说“过早的优化是万恶之源”！

# html - 引导警报：div 中的内容？

> ID：10963126
> 
> 赞同：1
> 
> 时间：2012-06-06T14:04:47.007
> 
> 标签：html

为什么[bootstrap](http://twitter.github.com/)可以将内容直接放入 <div> 标签中？[例如](http://twitter.github.com/bootstrap/components.html#alerts)。

```
<div class="alert alert-block">
    <a class="close" data-dismiss="alert" href="#">×</a>
    <h4 class="alert-heading">Warning!</h4>
    Best check yo self, you're not...
</div> 
```

语义呢？在这种情况下，文本不应该包含在段落中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:05:47.697

[您的问题与其他问题](https://webmasters.stackexchange.com/q/4356/15703)密切相关。简而言之，`div`是构造文档的通用方式，而`p`表示段落。既然你在谈论语义，我不确定**所有**文本都必须分成几段。在那种特殊情况下（一个简单的警告），包含在其中的整个文本`div`都是一个句子，所以“将单个句子分成段落”的概念对我来说甚至没有意义。

否则，对于较长的文本，将相关句子分组在段落中完全有意义，如果您正确使用它们，即使搜索引擎也可以更好地“理解”您的内容。一些较新的 HTML5 标签（例如`header`,`footer`等）具有相同的目的：明确说明文档的语义，以便自动代理更好地处理，即使“通用”div 足以让人类读者理解（因为对我们来说，屏幕上的元素是最重要的，无论用于表示它的内部代码如何）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:20:34.457

警报不是永久性的，通常在单击时关闭。所以他们被索引的机会很低。也就是说，`h4`在页面上使用 an 应该没问题，因为 h1 和 h2 更常见，并且根据警报的位置，h4 可能显示低于 h1，h1 可能是页面顶部的标题。

# django - Django 模板中的子请求

> ID：10963134
> 
> 赞同：2
> 
> 时间：2012-06-09T17:37:44.013
> 
> 标签：django

我正在处理我的第一个 Django 项目，并使用所有其他项目扩展的基础设置我的模板。在那个基础上，我想要一些特定于用户的导航，这意味着从数据库中加载一些值来构建下拉菜单的内容。但是我不想在每个视图中都这样做。来自 Symfony2/Twig 我通常会使用子请求来执行此操作，在该子请求中我告诉模板渲染视图并且将使用它自己的模板。使用如下语法：

```
{% render 'Bundle:Controller:action' with {} %} 
```

我将如何用 Django 完成同样的事情？我已经阅读了几次文档，但找不到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:45:08.417

你有两种方法：

（更好）- 将代码添加到 base.html（您一直在扩展的那个），并且仅在需要时才覆盖它。

或者

（更糟） - 在每个模板中使用 {% include %} 来包含您的 menus.html 模板。

更新：重新阅读您的问题：您可以在上下文处理器中修改请求，以便您的 base.html 将获得此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:45:49.760

[自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)是您想要的。

# html - 声明 HTML5 Doctype 的正确方法是什么。

> ID：10963135
> 
> 赞同：53
> 
> 时间：2012-06-09T17:37:52.520
> 
> 标签：html, doctype

使用 HTML5 创建时使用开始标签的正确方法是什么

IE：HTML 4 Strict 是这样的

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-09T17:55:22.243

该标准已被简化，因为以前的 doctypes 太神秘了。新的文档类型是简单的`<!DOCTYPE html>`。您可能想知道为什么它不是`<!DOCTYPE html5>`，但这仅仅是因为它只是对 HTML 标准的更新，而不是任何东西的新版本。正如您在下面看到的，所有元素现在都可以具有语言属性。

> `<html>`元素是文档的根元素。每个文档都必须以这个元素开头，并且它必须同时包含`<head>`and `<body>`元素。
> 
> 使用 lang 属性在此元素上指定文档的主要语言被认为是一种很好的做法。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Hello World</title>
    </head>
    <body>
        <h1>Hello World</h1>
        <p>
            Jamie was here.
        </p>
    </body>
</html> 
```

更多信息：[https ://dev.w3.org/html5/html-author/#doctype-declaration](https://dev.w3.org/html5/html-author/#doctype-declaration)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-09T17:39:26.230

你只是用

```
<!DOCTYPE html> 
<html>
</html> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-23T19:20:21.483

首先，**html5 doctype 不区分大小写**。

这三个中的任何一个都可以：

1)`<!DOCTYPE html>`

2)`<!DOCTYPE HTML>`

3)`<!doctype html>`

您可以在此处检查有效性[。](https://validator.w3.org/#validate_by_input)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-09T17:41:07.090

这很简单

```
 <!DOCTYPE html> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-09T04:57:08.043

据负责制定当前网络标准的组织 WWW 联盟称，没有人正确回答这个问题。当前的语言声明标准是

> **始终**在 html 标记上使用语言属性来声明页面中文本的默认语言。当页面包含另一种语言的内容时，将语言属性添加到围绕该内容的元素。对作为 HTML 的页面使用 lang 属性，对作为 XML 的页面使用 xml:lang 属性。对于 XHTML 1.x 和 HTML5 多语言文档，请一起使用。
> [W3C HTML 语言标签页](https://www.w3.org/International/questions/qa-html-language-declarations)

这是关于 DOCTYPE 声明的答案

> 使用以下标记作为模板，使用正确的 Doctype 声明创建新的 HTML 文档。如果您希望使用其他 DTD，请参阅下面的列表。
> [W3C DOCTYPE 标准](https://www.w3.org/QA/2002/04/valid-dtd-list.html)

```
<!DOCTYPE html>
<html>

<head>
    <title>An HTML standard template</title>
    <meta charset="utf-8"  />
</head>

<body>
     <p>… Your HTML content here …&lt;/p>
</body>
</html> 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-09T17:40:56.823

你用...

```
<!DOCTYPE html> 
```

然后是您的 HTML 标记等。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-09T17:41:52.347

你只需要这个：

```
<!DOCTYPE html> 
<html>
... 
```

这里有几点。所有浏览器都支持这一点，即使是像 IE6/IE7 这样的旧浏览器。所有浏览器实际上都需要 doctype 声明中的“html”部分才能跳转到标准模式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-09T17:39:38.710

```
<!-- simplified doctype works for all previous versions of HTML as well -->
<!doctype html> 
```

**学习资源：**

*   [http://diveintohtml5.info/](http://diveintohtml5.info/)
*   [http://www.html5doctor.com](http://www.html5doctor.com)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-09T17:58:32.670

开始标签`<html>`在 HTML5 中是可选的，就像在 HTML 4.01 中一样。如果使用，它必须是第一个标签。它有不同的可选属性：HTML5 的全局属性和特殊`manifest`属性。`<html>`标签中最常见的有用属性是`lang`属性。

（doctype 声明完全不同，根本不是标签。）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-09T15:37:32.120

该标准所说的最清晰最明确的答案似乎是针对 HTML 5.3 的：

[http://w3c.github.io/html/syntax.html#the-doctype](http://w3c.github.io/html/syntax.html#the-doctype)

请特别注意列表项 1 和 3，它们指定 doctype-statement 不区分大小写。另请注意，语句中的空格数可能会有所不同。

请注意“A DOCTYPE 是必需的序言”子句。

# javascript - 在 javascript 中创建全局 urls 对象以便在模板中轻松反向路由是一种好习惯吗？

> ID：10963138
> 
> 赞同：3
> 
> 时间：2012-06-09T17:38:13.080
> 
> 标签：javascript, ajax, templates, global-variables

我正在开发一个使用大量 ajax 的 Web 项目。我正在使用 playframework，并且在我的 html 模板中，我可以访问 playframework 反向路由器，因此我可以从路由器获取 url，而不必担心如果我以后决定更改站点的 url 结构会发生什么。但是，我无法访问外部 js 文件中的反向路由器，但通常希望利用反向路由器的间接性来处理这些文件中的请求。

我想出了一个不强制每个外部 ajax 函数接受 url 参数的解决方案，那就是创建一个像这样的全局 url 对象：

```
var globalUrls = {
    confirmImageUpload : "@routes.UploadController.confirmResourceUpload()",
    anotherUrl : "@routes.AnotherController.anotherControllerMethod()"
} 
```

然后我在外部 js 文件中使用这个对象来知道将 ajax 请求发送到哪里。

这可以吗？我不知道这是否是不好的做法，或者像这样公开所有网址是否明智......

如果出于某种原因愚蠢，我希望一些有经验的人会插话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:58:09.137

我认为还有其他方法可以减少全局变量的数量并使您的应用程序更加模块化，但是如果不了解您的应用程序的结构，就很难说。

也许您有一个类或模块来处理您的 ajax 查询，并且您可以将 url 存储在其中？例如，它可以有一个方法“setDefaultAjaxServerAddresses()”。然后它将这些存储在模块中。

# php - SQL 查询与单个 id 的计数

> ID：10963141
> 
> 赞同：0
> 
> 时间：2012-06-09T17:38:27.930
> 
> 标签：php, mysql, sql, codeigniter

我的数据库中有一个表，其中包含在一个盒子上打开的每个标题的日志。假设我有一个框 12 和框 14，每个框都有不同的标题。一旦有人打开一个盒子，然后在特定盒子上打开一个标题，就会在数据库中插入一个条目。我想获得在某个盒子上打开标题的次数。我有一个表格，我可以在上面选择多个框和多个标题。提交表单后，我想知道每个框选择了每个标题在框上打开的次数。

我的 Sql 查询是

```
 public function getTitlesOpenings($boxes, $titles){
    $query =   $this->db->select('box_id,title_id,COUNT(title_id) AS Titles_Openings')
            ->from('boxes_has_openings')
            ->where_in('box_id', $boxes)
            ->group_by('title_id')
            ->get();
    $data = $query->result_array();
    return $data;
} 
```

此查询给出了我需要的所有框的标题计数单个框的 title_ids 计数。我怎样才能做到这一点？

编辑：

```
public function getTitlesOpenings($boxes, $titles){
    $query =   $this->db->select('box_id,title_id,COUNT(title_id) AS Titles_Openings')
            ->from('boxes_has_openings')
            ->where_in('box_id', $boxes)
            ->where_in('title_id', $titles) // I need something like for each box in boxes give the title_id
            ->group_by('title_id')
            ->get();
    $data = $query->result_array();
    return $data;
} 
```

有什么建议么？

提前致谢

# osx-lion - OS X Lion 上的 GCC 4.7：无法计算目标文件的后缀

> ID：10963142
> 
> 赞同：1
> 
> 时间：2012-06-09T17:38:29.353
> 
> 标签：osx-lion, gcc4.7

我知道这个问题已经讨论过（包括那里），而且没有一次。但是，不幸的是，我无法解决这个问题。

所以，我有 OS X Lion，i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1，我尝试构建 gcc-4.7.0。

首先，我已经在 Debian GNU/Linux 上构建了这个编译器，所以我确信不会有任何问题......

因此，我阅读[了这本 GCC 手册](http://gcc.gnu.org/wiki/InstallingGCC)，并且完全按照描述进行了操作：

```
cd gcc-4.7.0
./contrib/download_prerequisites
cd ..
mkdir gcc_build
cd gcc_build
/Users/dshevchenko/Downloads/gcc-4.7.0/configure --prefix=/Users/dshevchenko/Tools/GCC 
make 
```

至此，MPC、MPFR 和 GMP 下载成功， . **/configure**也正常。**但是在make**几分钟后，我得到了这个错误：

```
checking for suffix of object files... configure: error: 
in `/Users/dshevchenko/Downloads/gcc_build/x86_64-apple-darwin11.4.0/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details. 
```

据我了解，这不可能是与 MPFR、MPC 或 GMP 动态链接的错误，因为这些库是在 GCC 源代码树中构建的。

在我的 ~/.bash_profile 中：

```
export DYLD_LIBRARY_PATH=/Users/dshevchenko/Tools/GCC/lib 
```

请帮助我，我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:06:50.313

确保您拥有最新的 Xcode（撰写本文时为 4.4）。在某些版本的 Xcode（包括我拥有的 4.1）中，llvm 编译器存在错误。对于 Xcode 4.4，必须从 Xcode 首选项下载命令行工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:31:24.030

以下解决方案帮助了我：

```
$ export CC="gcc -D_FORTIFY_SOURCE=0”
$ $srcdir/configure ...
$ make 
```

来源：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=50342](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=50342)

# java - 每周将一个列表分组到一个新列表并汇总其中一个字段？

> ID：10963144
> 
> 赞同：-5
> 
> 时间：2012-06-09T17:38:38.463
> 
> 标签：java

我有两个实体：

```
class Entry {
   long amount;
   long date; //date is stored in millis
   long id;
   //getter and setters
}

class GroupedEntryByWeek {
   long amount;
   long startDate; // start date of week
   long endDate; // end date of week
   long id;
} 
```

现在我想“ `List<Entry> entries`”生成新列表“ `List<GroupedEntryByWeek> groupedEntries`”

我想创建一个函数：

```
public List<GroupedEntryByWeek> groupEntries(List<Entry> entries) {
   List<GroupedEntryByWeek> groupedEntries;
   // code for grouping         

   return groupedEntries;
} 
```

这将返回我一个分组列表

```
Ungrouped list :

id        amount       date
1          500         9th june in millies 
2          600         8th june in millies
3          700         1st june in millies 
```

分组列表应如下所示：

```
 id        amount       startdate   enddate 
    1          700         28May       3June
    2          1100        4june       9june 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:41:49.567

如果我正确理解了您需要`List<GroupedEntryByWeek>`在`Entry`课堂上创建实例的问题。

像这样：

```
class Entry {
   long amount;
   long date; //date is stored in millis
   long id;

   List<GroupedEntryByWeek> groupedEntries;

   //getter and setters
} 
```

然后，当您遍历条目列表时，您会从每个条目中获得分组条目：

```
for (Entry entry : entries) {
   List<GroupedEntryByWeek> groupedEntries = entry.getGroupedEntries();
} 
```

# javascript - 显示链接中的照片或视频

> ID：10963145
> 
> 赞同：0
> 
> 时间：2012-06-09T17:38:43.037
> 
> 标签：javascript, jquery

是否有某种插件可以显示来自网站链接的照片或视频，例如，如果您在 Facebook 上发布链接，它会加载链接的微型图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:59:09.187

您正在寻找蜘蛛：[https](https://github.com/mikeal/spider) ://github.com/mikeal/spider （或类似的谷歌），请阅读@lix 所说的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T17:40:54.537

这称为 URL 抓取。您需要做的是加载 URL 并查看返回的 HTML 内容。从那里刮板将决定哪些图像和信息最适合“预览”。

通常刮板会查看嵌入在`<meta>`标签中的页面元数据。

一个很好的例子（以及 Facebook 的做法）是 Open Graph 协议。你可以在这里阅读更多关于它的信息 - [http://ogp.me/](http://ogp.me/)

以下是 Open Graph 元标记的示例 -

```
<meta property="og:title" content="The Rock"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
    <meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
    <meta property="og:site_name" content="IMDb"/>
    <meta property="fb:admins" content="USER_ID"/>
    <meta property="og:description"
          content="A group of U.S. Marines, under command of
                   a renegade general, take over Alcatraz and
                   threaten San Francisco Bay with biological
                   weapons."/> 
```

当您在 Facebook 上发布链接时，它会出去寻找类似的元标签，并使用它们的信息来显示链接的预览。

# mysql - 按特定顺序分组？

> ID：10963148
> 
> 赞同：1
> 
> 时间：2012-06-09T17:39:10.340
> 
> 标签：mysql, sql

我正在尝试做一个`GROUP BY`声明，按列分组显示具有最新时间戳的项目。但是，我认为不可能在`GROUP BY`声明之前订购。以下子选择是完成我想要完成的事情的唯一方法吗？

```
SELECT thread_id, content, timestamp FROM
(
  SELECT thread_id, content, timestamp FROM messaging_message 
  ORDER BY thread_id, timestamp desc
) combined 
GROUP BY thread_id 
```

请注意，对于给定的 thread_id，可能有多个与其关联的消息，`content`因此`timestamps`每个`thread_id`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T17:43:41.187

如果我理解正确并且您想要最新的`content`per `thread_id`，请使用`MAX()`聚合来查找时间戳，并`JOIN`针对它：

```
SELECT thread_id, content, timestamp 
FROM 
  messaging_message m
  JOIN (
     SELECT thread_id, MAX(timestamp) AS maxts
     FROM messaging_message 
     GROUP BY thread_id
  ) maxt ON m.thread_id = maxt.thread_id AND m.timestamp = maxt.maxts 
```

用这种`ORDER BY`方法根本不起作用。这一切都是通过分组完成的。

MySQL 与其他 RDBMS 不同，它并不严格要求您将每一`SELECT`列都考虑在内`GROUP BY`，因此您可能只是这样做

```
SELECT thread_id, content, MAX(timestamp) AS maxts FROM messaging_message GROUP BY thread_id 
```

但是，这不是便携式的，所以我不推荐它。相反，子查询返回和`JOIN`对。这些用于匹配行中您可能需要的相关列和任何其他列。如果您在每一行上都有一个唯一的 id，您还可以创建一个子查询，它只返回*每个*id并在. 但是，如果没有那个唯一的 id，那么对这对的加入就可以完成这项工作。`timestamp``thread_id``content`*`MAX(timestamp)``IN()``thread_id, timestamp`*

# actionscript-3 - Action Script 3.0 中的函数问题

> ID：10963149
> 
> 赞同：1
> 
> 时间：2012-06-09T17:39:11.050
> 
> 标签：actionscript-3, events, event-handling, listener

单击按钮时，我有三个要释放的功能。它们几乎一样，一个接一个地写下来。我的问题是第一个功能（粘贴在下面）有效，但是当我单击第二个和第三个按钮时没有任何反应。第二个和第三个按钮的代码相同，但使用了不同的变量。

```
redStarts.addEventListener(MouseEvent.CLICK, redBars);

function redBars(event:Event)
{
    red1Starts.addEventListener(Event.ENTER_FRAME, r1);
    red2Starts.addEventListener(Event.ENTER_FRAME, r2);
    red3Starts.addEventListener(Event.ENTER_FRAME, r3);

    function r1(event:Event)
    {
        if (red1Starts.y > 200){red1Starts.y -= 4};
    }

    function r2(event:Event)
    {
        if (red2Starts.y > 20){red2Starts.y -= 4};
    }

    function r3(event:Event)
    {
        if (red3Starts.y > 120){red3Starts.y -= 4};
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T17:44:00.110

避免使用嵌套函数。您提到的变量值似乎保留在闭包中。试试这种方式：

```
redStarts.addEventListener(MouseEvent.CLICK, redBars);

function redBars(event:Event)
{
  red1Starts.addEventListener(Event.ENTER_FRAME, r1);
  red2Starts.addEventListener(Event.ENTER_FRAME, r2);
  red3Starts.addEventListener(Event.ENTER_FRAME, r3);
}

function r1(event:Event)
{
  if (red1Starts.y > 200){red1Starts.y -= 4};
}

function r2(event:Event)
{
  if (red2Starts.y > 20){red2Starts.y -= 4};
}

function r3(event:Event)
{
  if (red3Starts.y > 120){red3Starts.y -= 4};
} 
```

# php - while 中的总图像宽度

> ID：10963165
> 
> 赞同：0
> 
> 时间：2012-06-09T17:40:59.270
> 
> 标签：php, image, while-loop, conditional

我有一些 php 代码可以在 WordPress 中回显特定图像大小的宽度。目前，如果图像宽度大于 80，那么它会回显“青蛙”......我想做的是计算我的所有图像宽度，如果这些图像的总数大于 600（假设number) 然后回显“frog”。我正在使用的代码看起来像（我正在使用这段代码）：

```
<?php
    $image = wp_get_attachment_image_src (get_post_thumbnail_id($post_id), 'gallery-thumbnail');
    list($width) = getimagesize($image[0]);
        echo $width;
    if( $width > 80 ) {
        echo "frog";
    }
?> 
```

我的 while 是基本的 WordPress 标准：

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <!-- some code here -->
<?php endwhile; else: ?>
    <!-- some code here -->
<?php endif; ?> 
```

有任何想法吗？

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:54:44.457

部分伪代码/部分解决方案：

`$sumOfWidths = 0;`

 ````
foreach($images as $image)
{
    $sumOfWidths = $sumOfWidths + $image['width'];
}  

if($sumOfWidths>600)
{
    echo 'frog';
} 
````  `只需将上面的代码循环遍历每个图像并将图像宽度添加到 `$sumOfWidths`变量中。

在[foreach](http://php.net/manual/en/control-structures.foreach.php)循环完成后，应该有一个数字`$sumOfWidths`，您可以在其中检查，然后按照您认为合适的方式执行您的逻辑。

查看此[代码片段](http://codepad.org/vFbB1uCF)以帮助您入门`

# c++ - 获取 Windows 错误代码的标识符

> ID：10963167
> 
> 赞同：0
> 
> 时间：2012-06-09T17:41:24.000
> 
> 标签：c++, winapi

在我正在开发的程序中，我需要收集有关运行时错误的信息。目前，我能够收集我需要的所有信息，包括通过的消息`FormatMessage`，但错误的标识符（例如，`ERROR_SUCCESS`）。我知道在编译应用程序时，这些标识符实际上并不存在于二进制文件中。

Windows API 中是否有可以检索这些标识符的函数，或者我是否需要将它们与我的应用程序一起存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:50:40.820

`ERROR_SUCCESS`本身只是一个常数。我还没有找到从数字-> 常量标识符的方法。

`WinError.h`您可以使用[Clang](http://clang.llvm.org/)进行扫描并为您的应用程序创建某种表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:47:37.730

这是一个很好的示例，说明如何获取 ErrorCode 以及如何将其转换为 MSDN 上更易读的消息。

无需复制，很简单：

[检索最后的错误代码和消息](http://msdn.microsoft.com/en-us/library/ms680582%28VS.85%29.aspx)

# php - Facebook 通过应用程序在页面上发帖

> ID：10963169
> 
> 赞同：1
> 
> 时间：2012-06-09T17:41:32.783
> 
> 标签：php, facebook, facebook-graph-api

我使用一个应用程序在我的页面时间轴上发布帖子。

帖子已正确发布，但只有页面管理员可见，其他用户（喜欢该页面的用户和不喜欢该页面的用户）不可见。

该应用程序拥有该页面的所有权限，以及该页面的管理员。该页面设置为向所有人显示所有帖子。其他直接从页面发布的帖子，而不是通过应用程序发布，每个人都可以看到。

我的问题是为什么帖子没有显示给每个用户（喜欢的用户和不喜欢该页面的用户）？

# iphone - 移动样式表不适用于 iPhone

> ID：10963170
> 
> 赞同：1
> 
> 时间：2012-06-09T17:41:45.840
> 
> 标签：iphone, css, media-queries

我刚刚编写了一些规则，以便在智能手机上显示我的网站的移动版本。

移动规则包含在使用“@media”的默认样式表 ( [http://www.flapane.com/style.css](http://www.flapane.com/style.css) )的底部。

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px), only screen and (orientation : landscape) and (min-device-width : 480px) and (max-device-width : 800px), only screen and (-webkit-min-device-pixel-ratio : 2), only screen and (min-device-pixel-ratio : 2), only screen and (-moz-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1)
 { [CODE]
} 
```

我在 480x800 Android 设备上成功测试了它。它适用于横向和纵向模式。( [http://i.imgur.com/mhqhr.png](http://i.imgur.com/mhqhr.png) )

不过我在几个朋友的iPhone4上测试过，一直显示桌面版。

我试着只用

```
@media only screen and (-webkit-min-device-pixel-ratio : 2) 
```

但没有任何改变。

有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:48:01.270

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px), only screen and (min-device-width : 480px) and (max-device-width : 800px) and (orientation : landscape), only screen and (device-width: 768px), only screen and (-webkit-min-device-pixel-ratio : 1.5), only screen and (min-device-pixel-ratio : 1.5), only screen and (-moz-min-device-pixel-ratio: 1.5) 
```

似乎也适用于 iPhone

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:47:10.900

更改`@media only screen and (-webkit-min-device-pixel-ratio : 2)`为：

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) 
```

就像在[这个例子](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)中一样，它应该可以工作。该页面也是一个很好的书签，以供将来参考。

# ajax - 如何在点击 p:graphicImage 时触发 ajax 事件监听器？

> ID：10963171
> 
> 赞同：5
> 
> 时间：2012-06-09T17:41:47.713
> 
> 标签：ajax, jsf-2, primefaces, graphicimage

当用户单击 ui:repeat 中的 p:graphicsImage 时，我想做一些处理我该怎么做。

```
<ui:repeat id="repeat" value="#{getData.image}" var="imageLst" varStatus="loop">
   <h:panelGroup>
      <p:graphicImage id="gi1" value="#{imageStreamer.image}" alt="image not available" >
          <f:param name="id" value="#{imageLst.imageID}" />
          <p:ajax id="aj2" event="click" listener="#{getData.searchID}" immediate="true" update=":form:tabView:check :form:growl"/>
      </p:graphicImage>
   </h:panelGroup>
</ui:repeat> 
```

在上面的代码中，如果我放置 ajax 部分不会被触发。我如何监控点击“p：graphicImage”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T21:31:43.920

`<p:graphicImage>`不支持任何 ajax 事件。

只需将其包裹在一个`<h:commandLink>`（或`p:`一个）中即可。

```
<h:commandLink>
    <p:graphicImage id="gi1" value="#{imageStreamer.image}" alt="image not available" >
        <f:param name="id" value="#{imageLst.imageID}" />
    </p:graphicImage>
    <p:ajax id="aj2" listener="#{getData.searchID}" update=":form:tabView:check :form:growl"/>
</h:commandLink> 
```

# c++ - 多个互斥锁上的 Windows 同步

> ID：10963174
> 
> 赞同：0
> 
> 时间：2012-06-09T17:42:11.443
> 
> 标签：c++, winapi, synchronization, mutex, waitformultipleobjects

我不清楚这一点，有人可以帮我确认一下吗？

我有以下同步问题。我有以下对象：

```
A. Process 1, thread 1: Read & write access to the resource.
B. Process 1, thread 2: Read access to the resource.
C. Process 2, thread 3: Read access to the resource. 
```

这是访问条件：

1.  A 必须在 B 或 C 打开时被阻止。
2.  只有在 A 开启时才能阻止 B。
3.  只有在 A 开启时才能阻止 C。

所以我想为此使用2个命名互斥锁：

*   hMutex2 = 用于满足上述条件 2。
*   hMutex3 = 用于满足上述条件 3。
*   hStopEvent = 一个停止事件（如果应用程序正在关闭，需要停止线程）。

所以对于 A：

```
HANDLE hHandles[3] = {hMutex2, hMutex3, hStopEvent};
DWORD dwRes = WaitForMultipleObjects(3, hHandles, FALSE, INFINITE);
if(dwRes == WAIT_OBJECT_0 + 2)
{
    //Quit now
    return;
}
else if(dwRes == WAIT_OBJECT_0 + 0 ||
    dwRes == WAIT_OBJECT_0 + 1)
{
    //Do reading & writing here
    ...

    //Release ownership
    ReleaseMutex(hMutex2);
    ReleaseMutex(hMutex3);
}
else
{
    //Error
} 
```

对于 B：

```
DWORD dwRes = WaitForSingleObject(hMutex2, INFINITE);
if(dwRes == WAIT_OBJECT_0)
{
    //Do reading here
    ...

    //Release ownership
    ReleaseMutex(hMutex2);
}
else
{
    //Error
} 
```

对于 C：

```
DWORD dwRes = WaitForSingleObject(hMutex3, INFINITE);
if(dwRes == WAIT_OBJECT_0)
{
    //Do reading here
    ...

    //Release ownership
    ReleaseMutex(hMutex3);
}
else
{
    //Error
} 
```

有人可以证实这一点：

*   在两个互斥体上调用 WaitForMultipleObjects 时，它们是否都变为信号（或阻塞）？
*   我还需要释放两个互斥锁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:00:08.500

当任何一个互斥体发出信号时， [WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)调用（第三个参数为 FALSE）将返回。这意味着作者和其中一位读者都可以获得对资源的同时访问。一个阅读器可能正在访问资源，而另一个阅读器释放其互斥体。届时，作家将被释放。

所以要像这样使用两个互斥锁，你需要等待它们。但是，您不能只将第三个参数设置为 TRUE，因为这意味着它还需要发出 hStopEvent 信号才能释放该线程（这显然是不希望的）。

一种可能性可能是检查哪个互斥锁被释放，然后让编写者在继续之前也等待另一个互斥锁。然后它需要在完成任务后释放它们。这种类型的解决方案的一个问题是它可能会很快变得复杂，如果您添加更多需要互斥锁的进程，如果您不小心，最终可能会出现死锁。使用读写器类型的锁将大大简化处理。

**编辑**这并不是问题答案的一部分，但取决于所涉及的进程以及他们访问资源的频率以及他们在访问互斥锁时将持有多长时间，您可以通过使用一个互斥锁来真正简化它，只需将其视为关键部分......每个进程在需要访问资源时都会获取它。但是，它当然不允许两个读取器线程/进程都具有并发访问权限，因此这可能是可接受的，也可能是不可接受的。但从长远来看，验证要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:59:55.023

事实上，我可以反驳它。 *如果有任何*对象发出信号 `WaitForMultipleObjects`，则`waitAll`参数设置为`FALSE`将返回。[这是文档 :)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx) 将其设置为，您将让它等待*所有*对象。*`TRUE`*

 **但是，您的解决方案**不能很好地扩展**：添加另一个阅读线程，并且您遇到了第三个互斥锁......

然而，[Writer/Readers 问题](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)之前已经解决了很多次；为什么不看看**现有的实现**呢？将为您节省大量调试时间，尤其是在您还不熟悉 windows 同步 API 的情况下。（预告片：posix 线程有一个读写锁，boost 有一个`shared_mutex`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:00:53.680

您正在寻找的是读写器锁。在您的算法中存在一个严重的问题 - 进程 A 的饥饿：如果 B 和 C 继续工作并获取它们的互斥锁，A 可能无法进入。**

# haskell - Yesod中的Websockets？

> ID：10963175
> 
> 赞同：10
> 
> 时间：2012-06-09T17:42:22.670
> 
> 标签：haskell, websocket, yesod

我想使用 Yesod 和 websockets (html5) 创建一个网站。

我可以将 websockets 与 Yesod webframework 一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T00:51:50.070

是的，正如 Thomas M. DuBuisson 在评论中指出的那样：WebSocket 处理程序是在 WAI 中实现的，这是 Yesod 用来与其后端进行通信的接口。我无法评论它以当前形式运行的效果如何，但您可以从[Hackage](http://hackage.haskell.org/package/wai-websockets)下载并试用它。

# .htaccess - htaccess mod 重写 2 个单词

> ID：10963189
> 
> 赞同：1
> 
> 时间：2012-06-09T17:44:02.203
> 
> 标签：.htaccess, mod-rewrite

我有这个代码：

```
<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d 

    RewriteRule ^ראשי$ index.php?page=main [L,QSA,NC]
    RewriteRule ^ניהול גלריות$ index.php?page=galleries [L,QSA,NC]
    RewriteRule ^ניהול דפים$ index.php?page=pages [L,QSA,NC]
    RewriteRule ^ניהול משתמשים$ index.php?page=users [L,QSA,NC]
    RewriteRule ^הגדרות כלליות$ index.php?page=settings [L,QSA,NC]
    RewriteRule ^דיווחים$ index.php?page=reports [L,QSA,NC]

</IfModule> 
```

它会导致 500 个内部服务器错误，如果我只在行中添加一个像“דיווחים”这样的词，它就可以工作，但是当我添加像“ניהול דפים”这样的两个词时，它不起作用。

你怎么能解决它？（也许问题出在两个词之间的空格中？）

*   即使我使用英语，语言也不是问题。
*   我的地址就像 /ניהול דפים

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:49:12.020

你在那里写的基本上是正则表达式。您可能想尝试使用正则表达式元字符来指示空格的存在。

你为什么不试试这样的东西 -

```
RewriteRule ^ברזילאי\sדן$ index.php?page=galleries [L,QSA,NC] 
```

[`\s`表示空格。](http://www.regular-expressions.info/charclass.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T17:53:19.163

mod_rewrite 支持日志记录，因此您可以添加它以获取更多详细信息：

```
RewriteLog "/var/log/apache2/rewrite.log"
RewriteLogLevel 2 
```

还要检查 apache 的 error_log，因为它通常会在 500 错误上写*一些东西。*

# .net - 按属性值选择 XML 节点

> ID：10963190
> 
> 赞同：2
> 
> 时间：2012-06-09T17:44:20.837
> 
> 标签：.net, xml, f#

```
<location>
  <hotspot name="name1" X="444" Y="518" />
  <hotspot name="name2" X="542" Y="452" /> 
  <hotspot name="name3" X="356" Y="15" />
</location> 
```

我有一个点变量，我需要选择节点及其坐标，然后更改属性值。我想做类似的事情：

```
let node = xmld.SelectSingleNode("/location/hotspot[@X='542' @Y='452']")
node.Attributes.[0].Value <- "new_name2" 
```

但通过变量（variable_name.X / variable_name.Y）获取属性值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T18:02:24.663

我个人会使用 LINQ to XML：

```
var doc = XDocument.Load(...);
var node = doc.Root
              .Elements("hotspot")
              .Single(h => (int) h.Attribute("X") == x &&
                           (int) h.Attribute("Y") == y); 
```

请注意，`SingleOrDefault`如果可能没有任何匹配元素，或者`First`/`FirstOrDefault`如果可能有多个匹配项，则应使用。

找到正确的`hotspot`节点后，您可以轻松设置属性：

```
node.SetAttributeValue("X", newX);
node.SetAttributeValue("Y", newY); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:01:11.863

这真的很容易。假设我想修改节点中的第一个属性：

```
let node = xmld.SelectSingleNode("/location/hotspot[@X='" + string(current.X) + "'] [@Y='" + string(current.Y) + "']")
node.Attributes.[0].Value <- v 
```

其中“当前”是我的变量；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T20:00:04.313

也许这样的事情会起作用：

```
// Tries to find the element corresponding to a specified point
let tryFindElementByPoint (xmlDoc : XmlDocument) point =
    let pointElement =
        point
        ||> sprintf "/location/hotspot[@X='%u' @Y='%u']"
        |> xmlDoc.SelectSingleNode

    match pointElement with
    | null -> None
    | x -> Some x

// Finds the element corresponding to a specified point, then updates an attribute value on the element.
let updatePointElement xmlDoc point (newValue : string) =
    match tryFindElementByPoint xmlDoc point with
    | None ->
        point ||> failwithf "Couldn't find the XML element for the point (%u, %u)."
    | Some node ->
        // TODO : Make sure this updates the correct attribute!
        node.Attributes.[0].Value <- newValue 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T13:29:31.983

试试这个

```
//let node = xmld.SelectSingleNode("/location/hotspot[@X='542' and @Y='452']")
let query = sprintf "/location/hotspot[@X='%d' and @Y='%d']"
let node = xmld.SelectSingleNode(query 542 452) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T18:04:30.930

您不能使用 XPath 表达式一次填写多个变量。XPath 表达式返回的唯一值（或者，在更技术层面上，由`SelectSingleNode`计算 XPath 表达式的 ）返回的值是表达式标识的 Xml 节点。

一旦将`<hotspot>`元素作为节点对象，您将不得不使用 DOM API 来读取和写入属性值，或者可能使用一些实用程序例程来自动将属性值传入和传出强类型数据对象。

# javascript - 将 Google 指针添加到代码

> ID：10963191
> 
> 赞同：0
> 
> 时间：2012-06-09T17:44:40.177
> 
> 标签：javascript, google-maps-api-3

我正在使用这个谷歌地图脚本代码，它没有问题，但我需要向它添加一个标记。

有定义标记的代码，但地图中似乎没有标记。

这是代码：

```
<script type="text/javascript">
function initialize() {
var latlng = new google.maps.LatLng(123456.-12345566);
var myOptions = {
zoom: 8,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var marker = new google.maps.Marker({
position: myLatlng, 
map: map,
title:"Fast marker"
});

}
jQuery(document).ready(initialize);
</script> 
```

我将如何为其添加标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:50:46.193

坐标（一个用于地图，一个用于标记）都没有正确定义

[此页面](http://freezoo.alwaysdata.net/geocodeUK.html)将为您提供您在地图上单击以自定义并填写以下值的地点的 LatLng 坐标。

```
//map center 
var latlng = new google.maps.LatLng(12,-12); // <-- this one

var myOptions = {
zoom: 8,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
};

// HERE ALSO
var myLatlng = new google.maps.LatLng(12,-12); // <-- this one for the marker

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var marker = new google.maps.Marker({
position: myLatlng, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:53:26.517

代码很好。它将添加一个指向地图的指针。

几件事：

1.  您有 Google API 密钥吗？（https://developers.google.com/maps/documentation/javascript/tutorial#api_key）
2.  你给的坐标不在哪里。尝试使用 -123456。12345566 作为测试。

# arduino - Arduino中的定时褪色

> ID：10963194
> 
> 赞同：0
> 
> 时间：2012-06-09T17:45:01.460
> 
> 标签：arduino, fade, timing, led

我需要编写一个 Arduino 函数来交叉淡化两个可变频率的 LED。即 - 当第一个 LED 达到峰值时，第二个 LED 开始淡入。此外，最好它应该在没有 delay() 的情况下运行，因为存在并发代码。我想我会使用 SoftPWMLibrary，但我不知道如何确定淡入淡出的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:51:16.433

看看这个[http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1231200459#2](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1231200459#2)。我用过那个解决方案，效果很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T03:49:39.503

也许你可以添加这个

```
class fade 
{
private:
  uint8_t _min;
  uint8_t _max;
  uint8_t _to;
  uint8_t _dutyCycle;
  uint32_t _time;
  uint32_t _last;
  int _pin;

public:
  fade ( int pin, uint32_t timeStep=10000, uint8_t min=0, uint8_t max=255)
  {
    _pin = pin;
    _time = timeStep;
    _min = min;
    _max = max;
    analogWrite(_pin,_min);
    _dutyCycle = _min;
  }
  void write(int to)
  {
    _to = (uint8_t) constrain(to,_min,_max);

    this->update();
  }

  void update()
  {
    this->update( micros() );
  }

  void update(uint32_t time)
  {
    if(time + _time > _last)
    {
      _last = time;
      if(_dutyCycle > _to) analogWrite(_pin,--_dutyCycle);
      if(_dutyCycle < _to) analogWrite(_pin,++_dutyCycle);
    }
  }

  uint8_t read()
  {
    return _dutyCycle;
  }

  uint32_t readSpeed()
  {
    return _time;
  }

  uint32_t writeSpeed(uint32_t time)
  {
    _time=time;
  }
};

/*now create a fade object
* fade foo(pin, timestep, min, max)
* timeStep is by default 10000 us (10 ms)
* min is by default 0
* max is by default 255
*
* example
* fade foo(13) is the same as fade foo(13, 10000, 0, 255)
*
* to change the speed once declared.
* foo.writeSpeed(new speed);
* to read the current speed
* foo.readSpeedspeed();
*
* foo.read() returs the current fade level ( pwm dutyCycle);
* foo.write( to ) defines the new endpoint of the fader;
* 
* foo.update(); needs to called in the loop
* foo.update( time); is for saving time if more time relating objects;
* unsigned long a = micros();
* foo.update(a);
* bar.update(a);
* foobar.update(a);
* is faster than redefine time every update
*/

fade led1(11);// fader pin 11 speed 10 ms/ step
fade led2(10,100000);// fader pin 10 speed 100 ms / step;

void setup()
{
  led2.write(128); //fade to half
  led1.write(255); //fade to max

  //setup
}

void loop()
{
  unsigned long time = micros();
  led1.update(time);
  led2.update(time);

  // loop
} 
```

这未经测试，但应该可以工作

# c++ - GetLogicalDrives() for 循环

> ID：10963200
> 
> 赞同：1
> 
> 时间：2012-06-09T17:46:22.247
> 
> 标签：c++, c, winapi

我是 win32 api 的新手，需要帮助来了解 GetLogicalDrives() 函数的工作原理。我正在尝试使用所有未使用的可用驱动器填充 cbs_dropdownlist。这是我到目前为止所拥有的。我将不胜感激任何帮助。

```
void FillListBox(HWND hWndDropMenu)
{
 DWORD drives = GetLogicalDrives();
 for (int i=0; i<26; i++)
 {
    SendMessage(hWndDropMenu, CB_ADDSTRING, 0, (LPARAM)drives);
 }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T17:53:14.437

该函数`GetLogicalDrives`返回可用逻辑驱动器的*位掩码*。以下是您的操作方法：

```
 DWORD drives = GetLogicalDrives();
 for (int i=0; i<26; i++)
 {
    if( !( drives & ( 1 << i ) ) )
    {
       TCHAR driveName[] = { TEXT('A') + i, TEXT(':'), TEXT('\\'), TEXT('\0') };
       SendMessage(hWndDropMenu, CB_ADDSTRING, 0, (LPARAM)driveName);
    }
 } 
```

代码检查位*掩码中**的第 i*位是否*未*设置为或。**`1``true`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T18:09:10.967

`GetLogicalDrives`返回一个位掩码并检查它，您需要使用按位运算符。要查看驱动器 A 是否正在使用中：

```
GetLogicalDrives() & 1 == 1 
```

如果驱动器 A 不可用，`GetLogicalDrives() & 1`将让步`0`并且条件将失败。

要检查下一个驱动器，您需要使用 2 的下一个倍数，`GetLogicalDrives() & 2`等等`GetLogicalDrives() & 4`。

您可以使用`GetLogicalDriveStrings`，但这会返回与您想要的相反的所有使用的逻辑驱动器。

我会改为建立一个表，并对其进行索引：

```
const char *drive_names[] = 
{
    "A:",
    "B:",
    ...
    "Z:"
}; 
```

那么你的循环可能是：

```
DWORD drives_bitmask = GetLogicalDrives();

for (DWORD i < 0; i < 32; i++)
{
    // Shift 1 to a multiple of 2\. 1 << 0 = 1 (0000 0001), 1 << 1 = 2 etc.
    DWORD mask_index = 1 << i;
    if (drives_bitmask & i == 0)
    {
        // Drive unavailable, add it to list.
        const char *name = drive_names[i];
        // ... do GUI work.
    }
} 
```**

# google-maps - 异步调用在咖啡脚本中不起作用

> ID：10963204
> 
> 赞同：0
> 
> 时间：2012-06-09T17:47:09.143
> 
> 标签：google-maps, coffeescript

我正在使用 CoffeeScript、Backbone.js 和 Google Maps API 对 lat / lng 进行反向地理编码

我有这个功能

```
 country: (origin, callback) ->
    @geocoder = new google.maps.Geocoder
    @geocoder.geocode(
        'latLng': origin,
        (results, status) => 
            if status is google.maps.GeocoderStatus.OK
              callback(result[6])
            else alert("Geocode was not successful for the following reason: " + status);
    ) 
```

当我调用它时，我使用：

```
@country(origin, (data) =>
   console.log(data.formatted_address)
) 
```

顺便提一句：

```
origin = new google.maps.LatLng(origin_lat, origin_lng) 
```

这不起作用，它甚至似乎都没有调用它。我有回调功能，`(data)`但无法让它工作......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:57:30.813

不确定您问题的整体背景，但无论如何我都会尝试一下。

您定义国家/地区功能的方式通常是对象或地图的一部分。如果您只想要一个独立功能，请尝试：

```
country = (origin, callback) ->
   ... 
```

然后在调用它时，尝试替换`@country(...)`为`country(...)`.

根据评论，您对地理编码的调用看起来也有问题。您需要创建一个 GeocoderRequest 实例并传递它而不是传递`'latLng': origin`对。不幸的是，我没有太多使用谷歌风格的 API，所以如果这是你真正的问题，我对你没有多大用处。

# github - 如何将文件附加到 github 问题？

> ID：10963205
> 
> 赞同：206
> 
> 时间：2012-06-09T17:47:14.260
> 
> 标签：github, attachment, github-issues

我将一个项目从 Bitbucket 迁移到 Github，但找不到将文件附加到问题的方法（例如：屏幕截图、规格等）

怎么做？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-06-09T17:53:51.910

~~您将其上传到某处并在评论中添加链接。GitHub 的问题相当原始，不允许附加文件。~~

**更新：**您现在可以将图像发布到 GitHub 问题。最简单的方法是复制图像（右键单击，复制图像），然后将其粘贴到您描述问题的文本框中。

*或者*

只需拖放

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-12-08T01:28:45.513

自 2012 年 12 月 7 日起，您可以通过拖放或使用文件选择器来附加图像。有关更多详细信息，请参阅[https://github.com/blog/1347-issue-attachments](https://github.com/blog/1347-issue-attachments)。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2018-04-21T05:25:14.110

要将文件附加到问题或拉取请求对话，请将其拖放到评论框中。

文件的最大大小为 25MB，图像的最大大小为 10MB。

![上传图片](../Images/a46c35710c710de437cd60c76b2a0571.png)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-07-24T21:11:19.563

[ZenHub.io](http://ZenHub.io) Chrome 插件将使您能够将任何类型的文件添加到 github 问题。它存储在 ZenHub 的 AWS 服务器上，而不是 github.com。从他们的网站...

> GitHub 只允许你上传图片文件。ZenHub 增加了将任何类型的文件上传到问题和评论的功能，安全地传输到 Amazon S3。有了这个，您可以真正将您的工作流程提升到一个新的水平；尝试使用 GitHub 处理一切！集中式协作和透明度非常棒。

更新：

自 2015 年 3 月 11 日起，您现在可以将这些类型的文件上传到 github，无需任何扩展名或插件：PNG、GIF、JPG、DOCX、PPTX、XLSX、TXT 或 PDF

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-06-10T06:44:35.033

作为先前答案的说明，请参阅[此评论](https://github.com/jeremeamia/github-issues-toolbar/issues/17#issuecomment-2970427)：

> 我创建了一个名为`catfood` [http://github.com/blueheadpublishing/catfood/](http://github.com/blueheadpublishing/catfood/)的存储库，我在其中保存杂项内容（如屏幕截图和其他附件）。
> 这样我就可以在问题中引用它们。

看[`https://github.com/blueheadpublishing/bookshop/issues/10`](https://github.com/blueheadpublishing/bookshop/issues/10#issuecomment-2966816)

> 一些图像显示了我们希望由模板生成的布局模板类型：
> 
> *   [示例一 - 三个百分比列](https://github.com/blueheadpublishing/catfood/blob/master/bookshop/three_perc_cols.png)
> *   [示例二 - 剩下两个百分比列](https://github.com/blueheadpublishing/catfood/blob/master/bookshop/two_perc_cols_lt.png)
> *   [示例三 - 右侧两个百分比列](https://github.com/blueheadpublishing/catfood/blob/master/bookshop/two_perc_cols_rt.png)

[早在 2009 年，GitHub 就表达了添加问题附件](https://groups.google.com/d/topic/github/xQlRASK5VuM/discussion)的意图。

> 附件是我们想要添加的东西。

[不过，自从 GitHub 小组以来，](https://groups.google.com/forum/#!searchin/github/attachment)这个话题就没有被提出过……

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-24T19:11:39.183

将图像嵌入到 GitHub 评论中的格式是：

```
Format:  ![Alt Text](url)
Example: ![GitHub Logo](/images/logo.png) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-09T09:31:43.827

我找到了一种使用 Skitch 将图像嵌入问题的简单方法。只需设置 Skitch 共享并将 URL 自动复制到剪贴板。然后在写问题时将其粘贴。[我在这里写了博客](http://www.g33klaw.com/2012/08/attaching-images-to-github-issues-with-skitch/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-09T18:12:50.257

这有点杂乱无章，但您可以创建一个垃圾分支，然后将文件提交到该分支并稍后清除它。

编辑：这个脚本可能对你有用：

[https://github.com/wereHamster/ghup](https://github.com/wereHamster/ghup)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-16T21:52:42.997

8 年后（2020 年 12 月），您不仅可以将图像拖放到 PR/issues，还可以...视频！
并且在 2021 年 5 月，这[现已普遍可用](https://github.blog/changelog/2021-05-13-video-uploads-now-generally-available/)。

> ## [视频上传公测](https://github.blog/changelog/2020-12-16-video-upload-public-beta/)
> 
> 您现在可以上传文件以发布、拉取请求`.mp4`和`.mov`讨论评论，以与您的团队分享复制步骤、设计理念和体验细节。
> 
> [![在此处输入图像描述](../Images/c310220e02cecf4c4e6b276c02081a4d.png)](https://i.stack.imgur.com/xlZjP.png)
> 
> 公测版将在下周逐步向所有 GitHub 帐户推出。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-02T09:01:49.347

使用 gist.github.com 上传代码、日志、html 文件等任何内容并分享链接。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-04T15:36:02.593

好的，这是我用于屏幕截图的内容。

[http://www.techsmith.com/jing.html](http://www.techsmith.com/jing.html)

它免费、快速、自动上传图像并将 URL 链接粘贴到剪贴板，您可以立即按 Ctrl-V 进入 GitHub 问题。

当我发现这一点时，我松了一口气：）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-16T19:19:44.543

一种快速/简单的技巧是将您的附件（例如 PDF 或 Office 文档）上传到 Dropbox，然后在 Github 问题中包含 Dropbox URL。

比使用 S3 稍微容易一些；许多组织已经在使用 Dropbox；并且 Dropbox 已经很好地支持在浏览器中查看许多内联文档。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-08T11:12:54.040

如果您的图像已经上传到 github，那么您可以将原始链接附加到问题。例如，如果您的图像在 github 中的位置是：

`https://github.com/Qlio/someproj/blob/master/assets/image.png`

然后你可以改变`blob`成`raw`这样：

`https://github.com/Qlio/someproj/raw/master/assets/image.png`

然后您可以使用此链接显示图像：

```
![My cool Image](https://github.com/Qlio/someproj/raw/master/assets/image.png) 
```

[![在此处输入图像描述](../Images/22146b82896c19eb602a06f43a858fe6.png)](https://i.stack.imgur.com/M2dkp.png)

# python - schematron 报告 python lxml 的问题

> ID：10963206
> 
> 赞同：2
> 
> 时间：2012-06-09T17:47:20.083
> 
> 标签：python, lxml, schematron

我正在使用 lxml schematron 模块验证 xml 文档。它运行良好，但我无法显示设置为属性的验证报告。我找不到如何将它作为 XML 树来处理。

这是我使用的代码片段：

```
xdoc = etree.parse("mydoc.xml")
# schematron code removed for clarity
f = StringIO.StringIO('''<schema>...</schema>''')
sdoc = etree.parse(f)
schematron = isoschematron.Schematron(sdoc, store_schematron=True, store_xslt=True, store_report=True)
if schematron.validate(xdoc):
    print "ok"
else:
     tprint "ko"

report = isoschematron.Schematron.validation_report

>>> type(report)
<type 'property'>
>>> dir(report)
['__class__', '__delattr__', '__delete__', '__doc__', '__format__', '__get__',
'__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__',
'__repr__', '__set__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__',
'deleter', 'fdel', 'fget', 'fset', 'getter', 'setter']
>>> report.__doc__
'ISO-schematron validation result report (None if result-storing has\n        been turned off).\n 
```

lxml 文档在这一点上并不清楚。有人可以帮我获取 xml 报告树吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:17:17.473

您需要将 Schematron 类的 store_report`__init__(...)`参数设置为 True（默认值：False）。

恕我直言，文档在这一点上非常清楚，请参见[http://lxml.de/api/lxml.isoschematron.Schematron-class.html](http://lxml.de/api/lxml.isoschematron.Schematron-class.html) 或

```
>>> help(Schematron):
class Schematron(lxml.etree._Validator)
 |  An ISO Schematron validator.
 |  
 |  ...
 |  With ``store_report`` set to True (default: False), the resulting validation
 |  report document gets stored and can be accessed as the ``validation_report``
 |  property. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-26T15:15:39.627

来到这里的人可能还想看看下面的问题；第一个答案提供了一个非常清楚的示例，说明如何使 Schematron 报告工作（发布这个是因为我找不到*任何*工作示例，而且我发现*lxml*文档也有些混乱）。开始：

[在 Python 中使用 lxml 进行 Schematron 验证：如何检索验证错误？](https://stackoverflow.com/questions/27150214/schematron-validation-with-lxml-in-python-how-to-retrieve-validation-errors)

# encryption - Web 应用程序密码：bcrypt 和 SHA256（和 scrypt）

> ID：10963209
> 
> 赞同：13
> 
> 时间：2012-06-09T17:47:42.827
> 
> 标签：encryption, passwords, hash, salt, bcrypt

随着最近（例如LinkedIn）关于密码的所有讨论，我正在研究密码散列实现。在喝了两杯咖啡和早上阅读之后，我不再是一个密码学家了，就像我刚开始时一样。我真的不想假装我是。

### 具体问题

1.  **使用整数唯一用户 ID 作为有效盐会失败吗？（crypt() 只使用 16 位？）**

2.  **如果我只是在哈希上一遍又一遍地运行 sha256() 直到用完一秒钟，这是否会击败蛮力攻击？**

3.  **如果我必须问这些问题，我应该使用 bcrypt 吗？**

### 讨论/解释：

目标很简单，如果我的用户的散列密码被泄露，他们：

1.  不会“容易”破解，
2.  破解一个密码不会暴露使用相同密码的其他用户）。

我读到的#1 是哈希计算必须很昂贵——比如说，需要一两秒来计算，并且可能需要一点或内存（以阻止硬件解密）。

bcrypt 内置了这个，如果我理解正确的话，scrypt 更具前瞻性，并且包括最低内存使用要求。

但是，通过“重新散列” sha256() 的结果多次以用完几秒钟，然后将最终循环计数与散列一起存储以供以后检查提供的密码，这是否是一种同样有效的消磨时间的方法？

对于＃2，为每个密码使用唯一的盐很重要。尚不清楚盐必须有多随机（或大）。如果目标是避免使用“mypassword”作为密码的每个人都拥有相同的哈希值，那么仅仅这样做还不够吗？：

```
hash = sha256_hex( unique_user_id + user_supplied_password ); 
```

甚至这个，虽然我不确定它能给我带来什么：

```
hash = sha256_hex( sha256( unique_user_id ) + user_supplied_password ); 
```

除了我知道它是唯一的之外，我可以从使用用户 ID 中看到的唯一好处是避免将盐与哈希一起保存。没有太大的优势。使用用户 ID 作为盐是否存在真正的问题？它没有完成#2吗？

我假设如果有人可以窃取我用户的散列密码，那么我必须假设他们可以获得他们想要的任何东西——包括生成散列的源代码。那么，在散列之前向密码添加一个额外的随机字符串（相同的字符串）有什么好处吗？那是：

```
# app_wide_string = one-time generated, random 64 7-bit *character* string.
hash = sha256_hex( unique_user_id + app_wide_string + user_supplied_password ); 
```

我已经看到了这个建议，但我不明白我从每个用户的盐中获得了什么。如果有人想暴力破解攻击，他们会知道“app_wide_string”并在运行字典攻击时使用它，对吧？

如上所述，是否有充分的理由使用 bcrypt 而不是我自己的滚动？也许我问这些问题的事实就足够了？

顺便说一句——我刚刚在我的笔记本电脑上计时了一个现有的散列函数，我每秒可以生成大约 7000 个散列。不完全是通常建议的一两秒。

一些相关链接：

[使用 sha256 作为用户 ID 的散列和加盐](https://stackoverflow.com/questions/2043936/using-sha256-as-hashing-and-salting-with-users-id)

[SHA512 与 Blowfish 和 Bcrypt](https://stackoverflow.com/questions/1561174/sha512-vs-blowfish-and-bcrypt)

[用户密码盐的最佳长度是多少？](https://stackoverflow.com/questions/184112/what-is-the-optimal-length-for-user-password-salt)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T18:21:14.480

Bcrypt 很棒，因为您可以将工作因数从 4 调整到 31，每个增量都会创建一个指数所需的时间，我实际上已经绘制了它，在 14 的工作因数下它已经花费了一秒多，因此随着计算机变得越来越快您只需要更改一个参数，当然还需要更新您的密码哈希...

我对 bcrypt 的主要担心是，如果工作因子设置为高，那么它可能会在多个用户尝试登录时使您的系统过载，因此您可以根据并发登录的数量和系统的资源对其进行调整。 ..

盐还是需要的，主要目的是阻止离线攻击，如果盐空间太大，那么对手将无法生成查找表，64位盐似乎有点低，bcrypt有128位盐加上工作因素使得离线攻击成为一个相当大的挑战......是的，每个密码的盐应该是随机的，bcrypt会为你生成一个，如果你为每个密码使用相同的盐，那么你已经成功了攻击者更容易使用在线攻击来破解所有密码。

如果你正确设置了工作因素，Bcrypt 真的很适合在线攻击，因为即使我得到了哈希，意思是说如果“对手”得到了哈希，工作因素会让翻阅整个字典变得非常痛苦，花费数天时间，如果密码不在字典中，那么我真的有麻烦了，因为暴力攻击将是史诗般的，bcrypt 的密码位空间虽然有限但相当大:)

Sha256 现在可能需要一些时间，但最终计算机会变得越来越快，并且很容易受到攻击，unix 人认为 crypt 太慢了，它永远不会成为问题，今天我做了一个几秒钟内的在线攻击，几天内的离线攻击，几周内的暴力攻击（遍历整个密码位空间）......

1.  您希望盐尽可能大且随机，仅使用数字使我更容易迭代所有可能的 id。

2.  多个 sha256 现在可能需要一秒钟，但以后它不会再有效了，计算机处理能力呈指数增长，所以你需要一个可以这样配置的算法。

3.  提问和做功课是正确的，如果有更多的人这样做，我们就不会有那么多违规行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T07:12:35.790

> 使用整数唯一用户 ID 作为有效盐会失败吗？（crypt() 只使用 16 位？）

您通常会使用随机生成的盐，然后将该哈希与加密密码一起存储。攻击者也可以访问盐并不重要——它的目的是防止使用查找表，从而迫使攻击者单独暴力破解每个哈希值。

`crypt`只需将盐和哈希以及要使用的算法存储到一个字符串中。

# asp.net-mvc-3 - TweetSharp - 登录后获取用户电子邮件 ID

> ID：10963211
> 
> 赞同：0
> 
> 时间：2012-06-09T17:48:30.967
> 
> 标签：asp.net-mvc-3, twitter, twitter-oauth, tweetsharp

我在我的 asp.net mvc Web 应用程序中使用 TweetSharp 进行用户登录。一切正常，但登录后我还需要将用户数据保存在我的数据库中。登录后我找不到来自 TwitterUser 对象的电子邮件。用户通过身份验证后如何获取用户的电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:28:02.417

你不能。Twitter API 不会返回用户的电子邮件地址。

查看[users/show 文档](https://dev.twitter.com/docs/api/1/get/users/show)以查看您可以检索的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T10:43:49.620

如果您的应用被列入白名单，您现在可以在`verify_credentials` [https://dev.twitter.com/rest/reference/get/account/verify_credentials中检索电子邮件](https://dev.twitter.com/rest/reference/get/account/verify_credentials)

# python - Python Django sqlite 连接

> ID：10963224
> 
> 赞同：0
> 
> 时间：2012-06-09T17:50:43.700
> 
> 标签：python, sql, django

我想创建一个简单的动态数独游戏。想法是每小时创建新的“谜题”，然后将其放入数据库并让用户解决它。每次求解尝试都会与数据库进行比较以进行验证。为此，我想创建生成拼图并将其放入数据库的 python 脚本。我在模型中设置的数据库如下所示：

```
from django.db import models

class user(models.Model):
    name = models.CharField(max_length=30)
    password = models.CharField(max_length=30)
    time_registered=models.DateTimeField()
    time_uploaded=models.DateTimeField()
    points=models.IntegerField()
    saved_sudoku=models.CommaSeparatedIntegerField(max_length=81)
    solved=models.BooleanField()

    def __str__(self):
        return self.name

class server_sudoku(models.Model):
    time_uploaded=models.DateTimeField()
    generated_sudoku=models.CommaSeparatedIntegerField(max_length=81) 
```

现在，当我使用：

```
name1=request.POST["name"]
pass1=request.POST["password"]
newuser=user(name=name1,password=pass1,time_registered=datetime.datetime.now(),time_uploaded=datetime.datetime.now(),points=0,saved_sudoku="",solved=False)
newuser.save() 
```

在views.py 中创建新用户。因此，为了验证我的想法，我创建了应用程序“generate_sudoku.py”。为了测试它与数据库的连接，我只是尝试添加用户。代码如下所示：

```
#!/usr/bin/env python
from db_interface.models import user

import random
import datetime

newuser=user(name="name", password="pass", time_registered=datetime.datetime.now() ,time_uploaded=datetime.datetime.now(), points=0, saved_sudoku="", solved=False)
newuser.save() 
```

这个简单的应用程序给了我这个错误：

```
raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

希望我说清楚了，我想通过 Windows 调度程序运行这个应用程序，以便它每小时自动运行一次......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:59:32.867

使用[自定义 manage.py 命令](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:54:07.863

谷歌上的第一个链接：http: [//eliasbland.wordpress.com/2010/01/25/importerror-settings-cannot-be-imported-because-environment-variable-django_settings_module-is-undefined/](http://eliasbland.wordpress.com/2010/01/25/importerror-settings-cannot-be-imported-because-environment-variable-django_settings_module-is-undefined/)；）

这对我有用（在 lambda 脚本中，而不是 _ _init _ _.py 文件中）：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

from django.contrib.auth.models import User #import django stuff after
print User.objects.all() 
```

# php - jQuery 自动完成远程

> ID：10963227
> 
> 赞同：0
> 
> 时间：2012-06-09T17:51:12.530
> 
> 标签：php, jquery, json, jquery-ui

我在我的网站上使用这个[http://jqueryui.com/demos/autocomplete/#multiple-remote](http://jqueryui.com/demos/autocomplete/#multiple-remote)，我可以看到这个代码'searches' search.php 有谁知道search.php应该是什么格式以及它是什么应该是什么样子？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:01:26.757

从您链接的页面中，它会向您显示预期的数据格式。（粘贴在下面） 最简单的方法是，您可以在 search.php 文件中添加一条打印语句，它只是简单地回显一些硬编码的内容。更复杂的解决方案是让您的 search.php 从数据库中实时提取，然后按预期格式化数据。

```
Expected data format

The data from local data, a url or a callback can come in two variants:

An Array of Strings:
[ "Choice1", "Choice2" ]
An Array of Objects with label and value properties:
[ { label: "Choice1", value: "value1" }, ... ] 
```

所以，只是为了开始并看到它工作，使用这条线搜索.php并通过自定义您的选择或连接到数据库等从那里构建。

```
print '[ "Choice1", "Choice2" ]'; 
```

# windows-phone-7 - 禁用 InputScope 自动完成文本框

> ID：10963232
> 
> 赞同：1
> 
> 时间：2012-06-09T17:51:46.537
> 
> 标签：windows-phone-7

我想在代码中禁用 Windows Phone 7 键盘输入范围在我的文本框中的自动完成功能。

我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:03:36.520

`Text`当您有InputScope时自动完成。将其更改为`Default`，完成将消失。

# python - 将多个对象链接到父对象 Django

> ID：10963234
> 
> 赞同：0
> 
> 时间：2012-06-09T17:52:08.513
> 
> 标签：python, django

我正在 django 中开发一个应用程序，我想知道是否有一种方法可以将多个对象链接到 1 个父级。

例如，我有 -query_1-、-query_2-，我想将这些查询返回的对象放入一个 -parent_object- 以传递给模板，我可以像 {{ parent_object.query_1 这样在模板端访问它.field }}，这是可能的还是有办法达到类似的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:01:48.140

```
from itertools import chain
chained_qs = chain(qs1, qs2) 
```

# visual-studio - 视觉工作室无法打开新项目

> ID：10963241
> 
> 赞同：10
> 
> 时间：2012-06-09T17:53:20.360
> 
> 标签：visual-studio

每当我尝试在 VS 2010 中创建一个新项目时，我都会收到错误消息：

> 由于错误，无法初始化新项目/项目对话框：引发了“Microsoft.VisualStudio.Dialogs.DialogInitializationException”类型的异常。

当尝试打开现有项目时，visual studio 2010 会重新启动。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-21T10:58:52.700

我在我的电脑上遇到了同样的问题。经过长时间的搜索，我通过以下步骤解决了它：

1.  关闭 Visual Studio 的所有实例
2.  转到“C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE” *（或者你的 VS 安装目录）*
3.  运行命令`devenv.exe /resetuserdata`并等待完成
4.  运行 Visual Studio

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-18T00:01:45.503

我找不到前一个案例。当你遇到一个例外

> Microsoft.VisualStudio.Dialogs.DialogInitializationException

我建议您尝试以下方式：

运行`devenv /resetuserdata`。

删除文件：

```
%LOCALAPPDATA%\Microsoft\VisualStudio\11.0\ComponentModelCache 
```

并重新启动 Visual Studio。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-23T08:55:58.887

[关闭所有 VS 实例并尝试此处](https://developercommunity.visualstudio.com/content/problem/30312/problems-when-starting-vs-2017-enterprise-on-windo.html)提到的解决方案：

*   以管理员身份启动**VS 2017 的开发人员命令提示符**
*   转到 VS 2017 安装文件夹，例如：`pushd C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise`
*   `gacutil -if Common7\IDE\PublicAssemblies\Microsoft.VisualStudio.Shell.Interop.8.0.dll`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T02:50:04.823

打开控制面板
更改

```
Regional -> Formats tab -> Format: English(United States) 
```

[https://connect.microsoft.com/VisualStudio/feedback/details/727578/vs-do-not-work-with-finnish-number-format-on-w8-64-bit](https://connect.microsoft.com/VisualStudio/feedback/details/727578/vs-do-not-work-with-finnish-number-format-on-w8-64-bit)

这个对我有用 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-06T05:30:20.650

当您在当前版本附近安装旧版本的 Visual Studio 时，可能会导致此问题。例如`VS 2017`安装在您的系统上，而您强制安装`VS 2008`. 多年前我通过安装`VS 2008`after遇到了这个问题`VS 2010`；今天我又遇到了这个问题。因为我`SolidWorks 2015`是之后安装`VS 2017`的。`SolidWorks`它的包中有一个 Visual Studio 2008，它干扰了我的安装。刚刚卸载`VS 2008`，我完成了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-28T13:01:40.627

我发现这仍然是 Visual Studio Community 2017 中的一个问题，Microsoft 发布了解决我的问题的解决方法：

> 此问题的解决方法是：
> 
> - 以管理员身份启动“VS 2017 的开发人员命令提示符”
> 
> -进入VS 2017安装文件夹，例如：pushd C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise
> 
> -gacutil -if Common7\IDE\PublicAssemblies\Microsoft.VisualStudio.Shell.Interop.8.0.dll

# security - 将输入的字符串验证为 URL - 出于安全考虑值得吗？

> ID：10963242
> 
> 赞同：0
> 
> 时间：2012-06-09T17:53:23.777
> 
> 标签：security, validation, url

在我正在编写的一个 Web 应用程序中，我让登录的访问者有机会输入一个 URL 以与他们上传的图片一起使用，作为返回他们网站的链接。

我打算验证输入的字符串以确保它是一个 URL，但是在考虑了解决方案的复杂性之后，我认为可能没有必要。

但是，如果不这样做，我可能会遗漏任何安全隐患吗？（我正在考虑有效 URL 可能包含一些恶意脚本或类似内容的情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:28:54.810

URL 的安全问题与其有效性关系不大（尽管为了发现错误而进行基本检查是件好事，当然您需要使用与一般数据相同的输入验证和输出转义代码）；它更多地与危险的 URL 方案有关。

最值得注意的是`javascript:`，URL 根本不是真正的位置，而是要注入链接它们的页面的脚本内容，从而导致跨站点脚本漏洞。还有其他类似问题的方案。最好只允许已知良好的方案，例如检查字符串是否以`http://`or开头`https://`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:59:07.830

此功能似乎是[跨站点请求伪造 (CSRF) 攻击](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))的完美示例，其中上传者链接到触发 CSRF 攻击的网页。

为了降低 CSRF 攻击的风险，请确保攻击站点无法预测具有站点影响的操作。这通常通过所谓的令牌来完成，这是一个只有您的站点和登录的访问者知道的随机值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:06:22.540

*正确*验证 URL 并非易事。您可以[接近](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)，但它仍然不一定涵盖 RFC 允许的所有内容。只要您不将 URL*评估*为输入，运行 html_escape() 或您的框架的等效项就足以保护您的站点免受偶然的字符串恶作剧。

您可能需要研究您的框架，以了解您需要针对跨站点脚本、SQL 注入和其他相关问题采取哪些预防措施（如果有）。大多数可能出错的事情都与未经处理的输入有关，但您的里程可能会有很大差异。

如果您期望 100% 安全，那么保护*用户*可能不是一个合理的设计目标。毕竟，Web 不是受保护的沙箱。

# ruby - Rails 3 - 通过控制器中的正则表达式检查字符串/文本是否包含某个单词/字符

> ID：10963244
> 
> 赞同：21
> 
> 时间：2012-06-09T17:53:25.640
> 
> 标签：ruby, regex, ruby-on-rails-3, string

我正在我的应用程序中开发一种引用机制，例如，应该可以在评论表单中简单地键入 #26 以引用该主题的评论 26。
为了首先检查用户是否想要引用一个或多个评论，我在 current_user.comments.build 之后和 @comment.save 之前放置了一个 if 条件。
但是，只是为了让我的问题更笼统，更容易适应：

```
if @comment.content.include?(/\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i) 
```

我想要这样的东西。该示例用于检查评论的内容是否包括电子邮件。但从逻辑上讲，我收到“无法将正则表达式转换为字符串”错误。

你怎么能做包括？带有正则表达式的rails方法？那么，要检查文本是否包含某种正则表达式格式的字符串？

或者控制器是此类正则表达式操作的错误位置？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-09T17:58:19.320

我用这种方式做红宝石正则表达式：

```
stringObj.match(/regex/) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-09T23:59:25.723

还有

```
if @comment.content =~ /regex/ 
```

如果您有一系列以前的评论 @prev_comments 并想一次性替换它们，您可以：

```
pattern = /#(\d+)/

@comment.content.gsub(pattern) do 
  cur_match = Regexp.last_match
  idx = cur_match[1].to_i - 1
  @prev_comments[idx]
end 
```

Trick 正在使用 Regexp.last_match 来获取当前匹配，这让我想知道它是否是线程安全的。显然，它[是](https://stackoverflow.com/questions/9004245/is-regexp-last-match-thread-safe)。

从以下更一般的字符串扩展中改编（窃取）

```
class String
  def js_replace(pattern, &block)
    gsub(pattern) do |_|
      md = Regexp.last_match
      args = [md.to_s, md.captures, md.begin(0), self].flatten
      block.call(*args)
    end
  end
end 
```

来源：http: [//vemod.net/string-js_replace](http://vemod.net/string-js_replace)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-09T10:53:52.310

为了匹配 .include 的性质？

```
 stringObj.match(/regex/).present? 
```

如果您使用 Rails（或 ActiveSupport），会给出类似的真/假结果

# c++ - 使用带有 std::shared_ptr 的 Qt 对象

> ID：10963246
> 
> 赞同：4
> 
> 时间：2012-06-09T17:53:27.380
> 
> 标签：c++, qt, shared-ptr

我正在尝试将一个小型实用程序应用程序更新为更现代的 C++ 方式，但是我在使用一些带有 std::shared_ptr 的 Qt 对象时遇到了问题，尤其是那些接收一些其他 QWidget 作为构造函数参数的对象。

例如：

```
private:
    std::shared_ptr<QWidget> centralwidget;
    std::shared_ptr<QVBoxLayout> verticalLayout;

public:
    void setupUi(QMainWindow *MainWindow) // this pointer is a .get() from a shared_ptr
    {
        centralwidget = std::make_shared<QWidget>(new QWidget(MainWindow)); // compiles fine
        verticalLayout = std::make_shared<QVBoxLayout>(new QVBoxLayout(centralwidget.get())); // does not compile
    } 
```

编译错误是：

> 错误 1 ​​错误 C2664: 'QVBoxLayout::QVBoxLayout(QWidget *)' : 无法将参数 1 从 'QVBoxLayout *' 转换为 'QWidget *' e:\microsoft visual studio 11.0\vc\include\memory 855

我似乎无法理解这个错误，我没有转换任何东西，我只是想创建一个 QVBoxLayout 对象并将 QWidget 作为其父级传递（就像我对原始指针所做的那样）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T19:06:28.200

一般来说，我尽量避免对 Qt GUI 对象使用 shared_ptr，因为 Qt 已经提供了自己的内存管理机制。每个 QObject 都可能有一个父对象，当这个父对象死亡时，他会删除它的所有子对象。这里不需要 shared_pointer 并且不会给您任何附加值：您可以完美地使用原始指针而不会造成内存泄漏。

一般来说，如果 QObject 的父对象在最后一个 shared_ptr 实例被删除之前就死掉了，你很快就会遇到麻烦，因为当最后一个 shared_ptr 被销毁时，该对象将被第二次删除。这不是这里的情况，但要小心:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T18:08:39.140

的参数`std::make_shared`被传递给您正在实例化的类的构造函数。所以基本上你在做什么相当于：

```
new QVBoxLayout(new QVBoxLayout(centralwidget.get())) 
```

我认为你想要做的是：

```
centralwidget = std::make_shared<QWidget>(MainWindow);
verticalLayout = std::make_shared<QVBoxLayout>(centralwidget.get()); 
```

查看`std::make_shared`（例如[此处](http://msdn.microsoft.com/en-us/library/ee410595.aspx)）的文档。这个函数的重点是在内存中的对象实例附近分配引用计数，所以你必须让它为你分配。

# magento - Magento 致命错误：当客户使用 Paypal Express Checkout 单击“查看您的信息”时调用成员函数 setQuote()

> ID：10963248
> 
> 赞同：3
> 
> 时间：2012-06-09T17:53:50.560
> 
> 标签：magento, paypal

Magento 返回致命错误：当客户单击继续按钮时，在/home/discoun1/public_html/app/code/core/Mage/Paypal/Controller/Express/Abstract.php 中的非对象上调用成员函数 setQuote()贝宝“查看您的信息”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:01:50.387

这应该是您的自定义主题的问题。

尝试这个：

1.  从 app/design/frontend/base/default/template 获取 paypal 文件夹；
2.  从 app/design/frontend/base/default/layout 获取 paypal.xml；
3.  将上面的 paypal 文件夹复制到 app/design/frontend/default/[yourthemename]/template
4.  将上面的 XML 复制到 app/design/frontend/default/[yourthemename]/layout

这应该将贝宝文件更新为您的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:45:55.863

Eiii我也遇到过这个问题，这也对我有用。

在我的情况下，我在模板中覆盖了 Paypal 文件夹的 3 个文件，因此我的模板默认文件夹中已经有了该文件夹和 xml。尽管评论向我显示了一个空白页面，但使用您的解决方案，reviwe 页面可以正常工作。

我不明白为什么 Magento 没有从核心中找到其余文件。你能给我解释一下吗？

好工作。:)

# php - 当 PHP 为每个请求重新编译我的源代码时，我是否会支付性能损失？

> ID：10963251
> 
> 赞同：1
> 
> 时间：2012-06-09T17:53:52.867
> 
> 标签：php, apc, eaccelerator, opcode-cache

我知道 PHP 主要是一种解释性语言。PHP 解释器（Windows 中的 php.exe 和 Linux 中的 php 文件）是否在每次我的脚本执行时或仅在我更改源时进行解释？换句话说，PHP 解释器是否缓存已解释的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:56:40.187

是的，你有性能损失，因为 PHP 每次都会解释。但是，如果您安装并配置了 APC（替代 PHP 缓存：[http](http://php.net/apc) ://php.net/apc ），它将把整个字节码保存在内存中，并在发生某些更改时重新构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:05:33.633

这实质上是每次请求到达时都会发生的情况：

*   PHP 读取文件
*   PHP 将文件编译成它可以处理的语言，即所谓的操作码
*   PHP 运行操作码

正如许多人已经指出的那样，将文件编译成操作码有一些开销，并且 PHP 默认没有缓存，因此即使文件没有更改，每次请求到达时它都会执行“编译”过程。

有一些可选模块可以生成操作码缓存来避免这种开销，其中通常最推荐的是 APC，因为它会在 PHP 6 上默认发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T17:59:49.753

是的。

作为一种解释型语言，您确实会付出性能损失。然而，在编译和使用它的方向上有一些研究。

看看[PHP 加速器](http://en.wikipedia.org/wiki/PHP_accelerator)。

> 大多数 PHP 加速器通过缓存 PHP 脚本的编译字节码来工作，以避免在每个请求上解析和编译源代码的开销（其中一些甚至大部分可能永远不会被执行）。为了进一步提高性能，缓存的代码存储在共享内存中并直接从那里执行，从而最大限度地减少运行时慢速磁盘读取和内存复制的数量。

# android - 选项卡图标不显示

> ID：10963252
> 
> 赞同：8
> 
> 时间：2012-06-09T17:53:57.713
> 
> 标签：android, tabs, android-tabhost, android-4.0-ice-cream-sandwich

我正在尝试在带有两个选项卡的 android 中做一个简单的选项卡应用程序。我的问题是，当我将这段代码放在选项卡中时，只显示文本，而不显示图标。如果我将文本放入“”，则会显示图标。

有人可以帮助我吗？我的安卓版本是 4.0.3。

非常感谢。

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/tabhost"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

     <TabWidget android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@android:id/tabs" />

     <FrameLayout android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@android:id/tabcontent" >

        <LinearLayout android:id="@+id/tab1"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
            <TextView android:id="@+id/textView1"
                android:text="Contenido Tab 1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
    </LinearLayout>

        <LinearLayout android:id="@+id/tab2"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
            <TextView android:id="@+id/textView2"
                android:text="Contenido Tab 2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
    </LinearLayout>

     </FrameLayout>
</LinearLayout>
</TabHost> 
```

活动代码是

```
public class TabTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Resources res = getResources();

    TabHost tabs=(TabHost)findViewById(R.id.tabhost);
    tabs.setup();

    TabHost.TabSpec spec=tabs.newTabSpec("mitab1");
    spec.setContent(R.id.tab1);
    spec.setIndicator("sss",
            res.getDrawable(android.R.drawable.ic_btn_speak_now));
    tabs.addTab(spec);

    spec=tabs.newTabSpec("mitab2");
    spec.setContent(R.id.tab2);
    spec.setIndicator("TAB2",
            res.getDrawable(android.R.drawable.ic_dialog_map));
    tabs.addTab(spec);

    tabs.setCurrentTab(0);
} 
```

如您所见，非常简单。但是写`spec.setIndicator("", res.getDrawable(android.R.drawable.ic_dialog_map));` 的时候可以看到图标，但是写的时候`spec.setIndicator("TAB2", res.getDrawable(android.R.drawable.ic_dialog_map));` 只能看到TAB2，两个都看不到。

似乎没有足够的空间来展示两者。所以我试图用这个来增加标签高度

```
tabs.getTabWidget().getChildAt(1).getLayoutParams().height = 150; 
```

但似乎不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T10:48:39.613

我用空值替换了标签名称。现在我可以单独看到图标了..找不到任何其他解决方案。

```
TabHost.TabSpec spec=tabs.newTabSpec("mitab1");

spec.setIndicator("",
                  res.getDrawable(android.R.drawable.ic_btn_speak_now));
Intent sssIntent = new Intent(this, First.class);
spec.setContent(sssIntent);
tabs.addTab(spec); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T20:37:11.340

//你在加载第一个，所以你只能看到最后一个添加的

```
 TabHost.TabSpec spec=tabs.newTabSpec("mitab1");

        spec.setIndicator("sss",
                res.getDrawable(android.R.drawable.ic_btn_speak_now));
 Intent sssIntent = new Intent(this, First.class);
 spec.setContent(sssIntent);
        tabs.addTab(spec);

TabHost.TabSpec spec2=tabs.newTabSpec("mitab2");
        spec2=tabs.newTabSpec("mitab2");
        spec2.setIndicator("TAB2",
                res.getDrawable(android.R.drawable.ic_dialog_map));
Intent sssIntent2 = new Intent(this, Second.class);
 spec2.setContent(sssIntent2 );
        tabs.addTab(spec2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T00:21:54.770

选项卡中图标（连同标签）的可见性取决于目标设备和 android 平台版本。

我对这个问题进行了更深入的研究，并在你关于这个问题的其他（非常相似的）问题中添加了更多细节和解决方案；在这里能找到它：

[https://stackoverflow.com/a/11379708/414581](https://stackoverflow.com/a/11379708/414581)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-08T18:00:10.177

在 AndroidManifest.xml 中添加这个解决了这个问题。

```
<application 
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@android:style/Theme.NoTitleBar">
</application> 
```

# android - 所有 Android 项目在 Eclipse 中都有一个红叉

> ID：10963254
> 
> 赞同：1
> 
> 时间：2012-06-09T17:54:18.423
> 
> 标签：android, eclipse, compiler-errors

今天，当我启动我的 Eclipse IDE 时，我所有的 Android 项目旁边都有一个“红十字”！我试图“清理”我所有的项目，但没有任何额外的好处！我在我的任何源代码中都看不到红线（表示错误），并且不知道下一步该做什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:31:58.327

感谢您的时间和回答。我在网上找到了解决这个问题的方法。以下是将来遇到此问题的任何人的链接（似乎可能是一年一度的事情，因为 Android 调试密钥的有效期仅为 365 天！）

[http://javadude.wordpress.com/2010/09/28/eclipse-throws-debug-certificate-expired/](http://javadude.wordpress.com/2010/09/28/eclipse-throws-debug-certificate-expired/)

# java - 哪个框架用于图形/dnd java web 应用程序

> ID：10963257
> 
> 赞同：0
> 
> 时间：2012-06-09T17:54:33.607
> 
> 标签：java, web-applications

我将需要编写一个交互式 Web 应用程序，其中大部分工作将是移动节点并通过关系将它们与其他节点连接（图形编辑）。节点将具有不同的类型，关系也是如此。你会选择什么框架来使用它？它不必是纯粹的 web 应用程序，它可以需要一个插件。一些选项将是：

*   JAvaFX2
*   瓦丁
*   便门
*   ...

同样，它不会是带有表单等的标准数据库支持的应用程序。当然，会有文本输入的部分（比如向节点属性添加值等）。

由于我无法真正决定自己，也许您会给我一些提示和背后的推理？

乌耶克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:57:45.893

[JGraph](http://www.jgraph.com/jgraph.html)是一个很好的。他们有 Java 和 Javascript 版本。[在这里](http://www.diagram.ly/)在线试用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T20:27:49.397

试试[JIT——](http://thejit.org/)它在 javascript 中。看看演示，看看它是否适合你。

# django - 在 Django 评论中添加星级

> ID：10963258
> 
> 赞同：0
> 
> 时间：2012-06-09T17:54:41.793
> 
> 标签：django, frameworks, comments, rating

我想修改现有的 Django 评论框架以包含星级。Django 站点有很好的关于修改评论框架的文档[，](https://docs.djangoproject.com/en/dev/ref/contrib/comments/custom/)但我还有一些问题。

1.  不幸的是，我没有太多修改表单的经验。如果我想将[jQuery 星级评分插件](http://www.fyneworks.com/jquery/star-rating/)合并到我的表单中，我将如何去做？
2.  创建自定义评论模型时，我假设 IntegerField 或 FloatField 最好存储评级？
3.  我是否应该编写一个[验证器](https://docs.djangoproject.com/en/dev/ref/validators/)来验证评级在 0-5 之间或最终范围是什么，还是我不必担心因为星级只会达到 0-5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:01:42.960

1.  您可以将 HTML 属性设置到输入中（class="star"），如下所述：[https ://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)

2.  可能是 IntegerField，保持简单。

3.  不，用户可以破解 javascript 并提交任何值。永远不要相信用户输入！编写你自己的验证器:)

# java - 什么 Maven 3 原型用于 Jboss 上的 Drools 项目？

> ID：10963260
> 
> 赞同：3
> 
> 时间：2012-06-09T17:55:07.287
> 
> 标签：java, eclipse, maven, jboss, drools

目标是为：JBoss 7.1、Maven 3.04、Drools 5.3.0、eclipse 平台 3.72（Java EE 1.4.2 的 IDE...）设置开发环境

目标是能够遵循教程并使用最新的可用软件版本来学习 Drools - 而不会遇到不同组件之间的版本不兼容性。

在 Maven 中编译代码示例后，似乎在 Eclipse 包资源管理器中出现了很多“缺少参考”类型错误。如果这是一个明显的问题，我是一个新手，所以提前道歉。

示例似乎在 maven 中编译得很好，但是在尝试与 Eclipse ide 集成时出现很多参考错误。我的 PC 上的 Java SDK 版本是 1.7.0_04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:45:25.547

Drools 没有官方的 maven 原型，我怀疑任何社区原型都是最新的。

看看这些资源：

*   [Drools 和 jBPM 版本兼容性矩阵](http://docs.jboss.org/drools/release/5.4.0.Final/droolsjbpm-introduction-docs/html_single/index.html#compatibility)
*   在[下载页面的](http://www.jboss.org/drools/downloads)“Eclipse 更新站点”部分。IIRC，在 5.3 中，该插件是 JBoss Tools 的一部分，但对于 5.4，它是一个单独的更新站点，链接在那里。

作为使用 5.4 更新站点的替代方法，您可以下载 droolsjbpm 工具 zip（5.4 或 5.3），解压缩并在 eclipse 中将插件配置为本地更新站点。

PS：我建议将所有内容都升级到 5.4.0.Final，这是最新最好的社区版本。

# c++ - 运行时错误：“检测到 *** glibc ***：双重释放或损坏（出）”

> ID：10963267
> 
> 赞同：2
> 
> 时间：2012-06-09T17:56:23.370
> 
> 标签：c++, qt, io, runtime-error, glibc

**更新-2**

我有警告和错误的有趣组合。

首先，在调试时，我收到警告：

```
can't find linker symbol for virtual table for `QFile' value
  found `WebCore::JSDocument::JSDocument(JSC::Structure*, WebCore::JSDOMGlobalObject*, WTF::PassRefPtr<WebCore::Document>)' instead
RTTI symbol not found for class 'WebCore::JSHTMLDocument'
RTTI symbol not found for class 'WebCore::JSHTMLDocument'
RTTI symbol not found for class 'WebCore::JSHTMLDocument' 
```

其次，我有运行时错误：

```
QIODevice::open: File access not specified 
```

瞬间

```
*** glibc detected *** <path>: double free or corruption (out): 0x081f9d00 *** 
```

这是导致该错误的最小代码（我已将其最小化）：

**文件**

在结果文件夹中创建文件夹“resources”并在其中文件“vk.cookie”（所有内容都没有引号）。

**错误.pro**

```
QT       += core gui webkit network xml

TARGET = Bug
TEMPLATE = app

SOURCES += main.cpp \
    api_vk.cpp \
    printer.cpp

HEADERS  += \
    api_vk.h \
    printer.h 
```

**主文件**

```
#include <QtGui/QApplication>
#include "api_vk.h"
#include "printer.h"

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    API_VK *apivk = new API_VK;
    apivk->authorise();
    Printer *printer = new Printer;
    QObject::connect(apivk, SIGNAL(authorisationSucceed()), printer, SLOT(printOK()));
    QObject::connect(apivk, SIGNAL(authorisationFailed(QString,QString)), printer, SLOT(printFail()));

    return a.exec(); } 
```

**api_vk.h**

```
#ifndef API_VK_H
#define API_VK_H

#include <QObject>
#include <QTimer>
#include <QUrl>
#include <QtNetwork/QNetworkCookieJar>

class QWebView;
class QString;
class QNetworkReply;
class QXmlInputSource;
class QTimer;
class QNetworkCookie;

class API_VK : public QObject
{
    Q_OBJECT
public:
    explicit API_VK(QObject *parent = 0);

signals:
    void authorisationFailed(QString error, QString error_description);
    void authorisationSucceed();

public slots:
    void authorise();

protected:
    void readCookies();
    void writeCookies();

protected slots:
    void newAuthoriseRequest();
    void processUrl(QUrl url);

private:
    static const QString app_id;
    static QString access_token;
    static qint32 expires_in;
    QWebView *messagesPage;
    QList<QNetworkCookie> cookies;
    QNetworkCookieJar jar;

    static bool authorised;
};

#endif 
```

**api_vk.cpp**

```
#include "api_vk.h"
#include <QtGui>
#include <QWebView>
#include <QtNetwork/QNetworkRequest>
#include <QtNetwork/QNetworkAccessManager>
#include <QtNetwork/QNetworkReply>
#include <QtNetwork/QNetworkCookie>
#include <QtNetwork/QNetworkCookieJar>
#include <QString>
#include <QStringList>
#include <QFile>
#include <QTextStream>
#include <QTimer>
#include <QUrl>
#include <QtXml>
#include <QVariant>
#include <QDateTime>
#include <QDebug>

bool API_VK::authorised = false;
const QString API_VK::app_id = "2783286";
QString API_VK::access_token = "";
int API_VK::expires_in = 0;

    // defining class methods

API_VK::API_VK(QObject *parent) :
    QObject(parent)
{
}

void API_VK::authorise() {
    newAuthoriseRequest();    // 1\. going here
}

void API_VK::newAuthoriseRequest() {
    // gets new access_token
    // 2\. going here

    messagesPage = new QWebView;
    readCookies();
    jar.setCookiesFromUrl(cookies, QUrl("http://vk.com"));
    messagesPage->page()->networkAccessManager()->setCookieJar(&jar);

    QUrl url("http://oauth.vk.com/authorize");
    url.addQueryItem("client_id", app_id);
    url.addQueryItem("scope", "messages");
    url.addQueryItem("redirect_uri","http://api.vk.com/blank.html");
    url.addQueryItem("display","page");
    url.addQueryItem("response_type","token");

    messagesPage->load(QNetworkRequest(url));
    connect(messagesPage, SIGNAL(urlChanged(QUrl)), this, SLOT(processUrl(QUrl)));
    messagesPage->show();

}

void API_VK::processUrl(QUrl url) {  // 3\. going here
/* firstly we're here when oath.vk.com redirects us to api.vk.com/login...
 * in this case we're exiting at 4.
 * secondly, user logs in, and api.vk.com/login redirects us back to oath.vk.com,
 * where we get access_token, etc
 * and when debugging, we start receiving warnings about "can't find linker symbol" secondly, not firstly
 */

//    if (!url.hasQueryItem("access_token"))
//        return;

    /* I commented previous part because most of you doesn't have VK accounts so you can't go
     * to the next part of code */

    access_token = url.queryItemValue("access_token");
    expires_in = url.queryItemValue("expires_in").toInt();

    emit authorisationSucceed();

    authorised = true;
    cookies = messagesPage->page()->networkAccessManager()->cookieJar()->cookiesForUrl(QUrl("http://vk.com"));
    messagesPage->deleteLater();
    writeCookies();
}

void API_VK::readCookies() {
    QFile file("./resouces/vk.cookie");
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
        return;
    }

    QTextStream in(&file);
    QByteArray name, value;
    while (!in.atEnd()) {
        in >> name >> value;
        cookies.append(QNetworkCookie(name, value));
    }
}

void API_VK::writeCookies() {
    QFile file("./resouces/vk.cookie");   // note: this file exists
    if (!file.open(QIODevice::Truncate | QIODevice::Text)) {  // 5\. at this line i receive runtime errors
        return;
    }

    QTextStream out(&file);
    for (QList<QNetworkCookie>::const_iterator i = cookies.begin(); i != cookies.end(); ++i) {
        out << (*i).name() << ' ' << (*i).value() << '\n';
    }
} 
```

**打印机.h**

```
#ifndef PRINTER_H
#define PRINTER_H

#include <QObject>
#include <QDebug>

struct Printer: public QObject {
    Q_OBJECT

public slots:
    void printOK() { qDebug() << "OK"; }
    void printFail() { qDebug() << "Fail"; }
};

#endif // PRINTER_H 
```

**打印机.cpp**

```
#include "printer.h" 
```

这是带有内存转储的完整输出：http: [//pastebin.com/btVNe4nd](http://pastebin.com/btVNe4nd)

在 5 QtCreator 说应用程序收到来自操作系统的信号（信号：SIGABRT）并反编译

**反汇编程序（__kernel_vsyscall）**

```
0x132414  <+0x0000>         int    $0x80
0x132416  <+0x0002>         ret 
```

valgrind 说：

```
Analysis of memory <path>
QMetaObject::connectSlotsByName: No matching signal for on_cancelButton_clicked()
"sni-qt/23102" WARN  20:28:53.697 void StatusNotifierItemFactory::connectToSnw() Invalid interface to SNW_SERVICE 
** Analysis finished **
** Unknown error ** 
```

还有一件事情。当我在 writeCookies() 中的每一行代码之后添加 qDebug() 输出并在运行（非调试）模式下启动程序时，它已经打印**了所有**这些输出。所以，问题出在一些 Qt 类的析构函数中。（[带有 qDebug 输出的代码](http://pastebin.com/upnUisvW)）

那么，为什么我会收到那个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:39:17.000

你的问题是在线

```
messagesPage->page()->networkAccessManager()->setCookieJar(&jar); 
```

状态的文档`setCookieJar()`：

```
Note: QNetworkAccessManager takes ownership of the cookieJar object. 
```

这意味着当 QNetworkAccessManager 被销毁时，它将执行以下代码：

```
delete cookieJar; 
```

请注意，当这种情况发生时：

1.  `jar`您传递给的堆栈分配`setCookieJar`早已不复存在。网络管理员很可能通过访问一个被破坏的 cookie jar 来破坏事物——它一`newAuthoriseRequest()`退出就被破坏了。请记住，网络管理器可以在单独的线程中运行它的一些功能。

2.  尝试删除*未*通过 直接在堆上分配的对象`new`。

只需将声明更改为

```
QPointer<QNetworkCookieJar> jar; 
```

并在您创建新的`QWebView`.

使用 QPointer 可以防止您尝试使用指向被 QWebView 的网络访问管理器删除的 cookie jar 的悬空指针。如果您错误地尝试使用它，则指针将已重置为零，并且您将在尝试取消引用指针的行处立即获得段错误。这很容易调试。

您的**主要错误**是停止进一步最小化您的独立示例。如果你坚持下去，你会在接下来的 10-15 分钟内发现问题。

这是重现您的问题的最小示例：

```
#include <QtGui/QApplication>
#include <QtWebKit/QWebView>
#include <QtNetwork/QNetworkCookieJar>
#include <QtCore/QList>

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    QWebView * view = new QWebView();
    QNetworkCookieJar jar;
    QList<QNetworkCookie> cookies;
    jar.setCookiesFromUrl(cookies, QUrl("http://google.com"));
    view->page()->networkAccessManager()->setCookieJar(&jar);
    view->load(QUrl("http://www.google.com"));
    view->show();
    view->connect(view, SIGNAL(loadFinished(bool)), SLOT(deleteLater()));
    a.exec();
} 
```

作业：阅读 QPointer、QScopedPointer、QSharedPointer 和 QWeakPointer。它们非常有用，在大多数情况下，您会发现在代码中使用裸指针作为类成员是一个等待发生的错误，除了生命周期与其父生命周期匹配的子 QObject（例如 QWidgets）（即他们只有在父母去世时才会死）。

# objective-c - 浮动变量从上面的行赋值

> ID：10963268
> 
> 赞同：2
> 
> 时间：2012-06-09T17:56:37.870
> 
> 标签：objective-c, floating-point

我有一个 iOS 应用程序正在做一些对我来说不太有意义的事情。我的界面中定义了几个浮点变量，这些变量分配不正确。

```
kettleVolume = 30;
lbsGrain = 5;
mashIn = 65;
grainTemp = 20; 
```

当我在调试器上逐步执行此操作时，我非常清楚地看到分配了以下值-

```
kettleVolume    float   1.09038e-33;
lbsGrain        float   30
mashIn          float   5
grainTemp       float   65 
```

不知何故，他们从上面的行中获取了值？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:52:26.190

有许多报告称，当从 LLDB 检查 ivars 时，它们似乎是错误的（我自己多次遇到同样的问题）。更具体地说，它们似乎被转移了。也就是说，这似乎只是 XCode 检查器实现中的一个错误。如果您想确定可以`po _yourivar`在调试器控制台中使用`GDB`的值，请使用`NSLog`它们。这里也有一个类似的问题：[GDB Vs LLDB debuggers](https://stackoverflow.com/questions/9707883/gdb-vs-lldb-debuggers)

# c# - 如何使用 C# 在 Internet Explorer 中更改主页？

> ID：10963271
> 
> 赞同：5
> 
> 时间：2012-06-09T17:57:09.340
> 
> 标签：c#

是否可以在 C# 应用程序中更改 Internet Explorer 的主页？其他浏览器（Firefox、Chrome）的解决方案也不错。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T18:06:35.757

好吧，对于 IE，您必须设置注册表项：

```
HKCU\Software\Microsoft\Internet Explorer\Main\Start Page 
```

对于 firefox，您将需要编辑 js 文件：`prefs.js`. 这可以在以下位置找到：`C:\Users\ [USERNAME]\AppData\Roaming\Mozilla\Firefox\Profiles\ [User Subfolder]`

Chrome，将数据存储在： `C:\Users\<username>\AppData\Local\Chromium\User Data\Default`文件中的`Preferences`文件夹中。这是 JSON 格式。编辑它不应该是麻烦

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T18:07:09.453

Internet Explorer 的主页保存在（根据[此](http://www.howtogeek.com/howto/windows/registry-hack-to-set-internet-explorer-start-page/)`Start Page`）的注册表项中，因此您可以使用（来自[此示例](http://msdn.microsoft.com/en-us/library/8bf3xkta%28v=vs.71%29.aspx)）中的类进行设置：`HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main``Registry``Microsoft.Win32`

```
RegistryKey startPageKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Internet Explorer\Main", true);
startPageKey.SetValue("Start Page", "http://stackoverflow.com");
startPageKey.Close(); 
```

其他的就不知道了，怕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T18:08:02.917

IE：编辑注册表项 HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\Start Page

Firefox：[在配置文件文件夹中找到设置](http://kb.mozillazine.org/Profile_folder_-_Firefox)（您需要解析文件）

Chrome：在首选项文件中找到默认的“主页”设置：`C:\Users\%USERNAME%/AppData\AppData\Local\Google\Chrome\User Data\Default`

对于注册表，请使用 .NET [RegistryKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)类。对于文件，您需要解析文件并修改它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T18:06:15.817

是的你可以。主页存储在注册表中。只要您的 C# 程序有权修改注册表，您就应该能够将此条目更改为您想要的任何页面。

## IE

```
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main]
“Start Page”=”http://www.yourwebsite.com/” 
```

[如何修改窗口注册表](http://www.switchonthecode.com/tutorials/csharp-snippet-tutorial-editing-the-windows-registry)

[如何使用 C# 设置默认浏览器主页 (IE)？](https://stackoverflow.com/questions/332486/how-to-set-the-default-browser-home-page-ie-with-c)

## 火狐

> Firefox 不会将主页存储在注册表中，因为它在 $APPDATA\Mozilla\Firefox\Profiles[profile name] 下有不同的配置文件，您需要从中读取的文件是 prefs.js，并且行：user_pref("browser.startup 。主页”， .... ）;
> 
> 要获取默认配置文件，您需要阅读 $APPDATA\Mozilla\Firefox\profiles.ini。您必须遍历每个 [Profile#] 直到 Default=1 并且您将获得来自 Path=... 的配置文件名称
> 
> 如果你想让我把它放到一个函数中（听起来也是个好主意），或者如果你想实现它，那么请在 Wiki 上找到它。
> 
> -斯图

[资源](http://forums.winamp.com/showthread.php?t=236211)

**来自专家交流的未经测试的代码**

```
public static void SetMozilla(string strURL)
        {
            try
            {
                string strSystemUname = Environment.UserName.ToString().Trim();
                string systemDrive = Environment.ExpandEnvironmentVariables("%SystemDrive%");
                string strDirectory = "";
                string strPrefFolder = "";
                if (Directory.Exists(systemDrive + "\\Documents and Settings\\" + strSystemUname + "\\Application Data\\Mozilla\\Firefox\\Profiles"))
                {
                    strDirectory = systemDrive + "\\Documents and Settings\\" + strSystemUname + "\\Application Data\\Mozilla\\Firefox\\Profiles";
                }
                else if (Directory.Exists(systemDrive + "\\WINDOWS\\Application Data\\Mozilla\\Firefox\\Profiles"))
                {
                    strDirectory = systemDrive + "\\WINDOWS\\Application Data\\Mozilla\\Firefox\\Profiles";
                }
                if (strDirectory.Trim().Length != 0)
                {
                    System.IO.DirectoryInfo oDir = new DirectoryInfo(strDirectory);
                    //System.IO.DirectoryInfo[] oSubDir;
                    //oSubDir = oDir.GetDirectories(strDirectory);
                    foreach (DirectoryInfo oFolder in oDir.GetDirectories())
                    {
                        if (oFolder.FullName.IndexOf(".default") >= 0)
                        {
                            strPrefFolder = oFolder.FullName;
                            CreatePrefs(strURL, strPrefFolder);
                        }
                    }

                }
            }
            catch
            { }
        }
        private static void CreatePrefs(string strURL, string strFolder)
        {
            StringBuilder sbPrefs = new StringBuilder();
            sbPrefs.Append("# Mozilla User Preferences\n\r");
            sbPrefs.Append("/* Do not edit this file.\n\r*\n\r"); 
            sbPrefs.Append("* If you make changes to this file while the application is running,\n\r");
            sbPrefs.Append("* the changes will be overwritten when the application exits.,\n\r*\n\r"); 
            sbPrefs.Append("* To make a manual change to preferences, you can visit the URL about:config\n\r");
            sbPrefs.Append("* For more information, see http://www.mozilla.org/unix/customizing.html#prefs\n\r");
            sbPrefs.Append("*/\n\r");
            sbPrefs.Append("user_pref(\"app.update.lastUpdateTime.addon-background-update-timer\", 1188927425);\n\r");
            sbPrefs.Append("user_pref(\"app.update.lastUpdateTime.background-update-timer\", 1188927425);\n\r");
            sbPrefs.Append("user_pref(\"app.update.lastUpdateTime.blocklist-background-update-timer\", 1188927425);\n\r");
            sbPrefs.Append("user_pref(\"app.update.lastUpdateTime.search-engine-update-timer\", 1188927425);\n\r");
            sbPrefs.Append("user_pref(\"browser.anchor_color\", \"#0000FF\");\n\r");
            sbPrefs.Append("user_pref(\"browser.display.background_color\", \"#C0C0C0\");\n\r");
            sbPrefs.Append("user_pref(\"browser.display.use_system_colors\", true);\n\r");
            sbPrefs.Append("user_pref(\"browser.formfill.enable\", false);\n\r");
            sbPrefs.Append("user_pref(\"browser.history_expire_days\", 20);\n\r");
            sbPrefs.Append("user_pref(\"browser.shell.checkDefaultBrowser\", false);\n\r");
            sbPrefs.Append("user_pref(\"browser.startup.homepage\", \"" + strURL +"\");\n\r");
            sbPrefs.Append("user_pref(\"browser.startup.homepage_override.mstone\", \"rv:1.8.1.6\");\n\r");
            sbPrefs.Append("user_pref(\"browser.visited_color\", \"#800080\");\n\r");
            sbPrefs.Append("user_pref(\"extensions.lastAppVersion\", \"2.0.0.6\");\n\r");
            sbPrefs.Append("user_pref(\"intl.charsetmenu.browser.cache\", \"UTF-8, ISO-8859-1\");\n\r");
            sbPrefs.Append("user_pref(\"network.cookie.prefsMigrated\", true);\n\r");
            sbPrefs.Append("user_pref(\"security.warn_entering_secure\", false);\n\r");
            sbPrefs.Append("user_pref(\"security.warn_leaving_secure\", false);\n\r");
            sbPrefs.Append("user_pref(\"security.warn_submit_insecure\", false);\n\r");
            sbPrefs.Append("user_pref(\"security.warn_submit_insecure.show_once\", false);\n\r");
            sbPrefs.Append("user_pref(\"spellchecker.dictionary\", \"en-US\");\n\r");
            sbPrefs.Append("user_pref(\"urlclassifier.tableversion.goog-black-enchash\", \"1.32944\");\n\r");
            sbPrefs.Append("user_pref(\"urlclassifier.tableversion.goog-black-url\", \"1.14053\");\n\r");
            sbPrefs.Append("user_pref(\"urlclassifier.tableversion.goog-white-domain\", \"1.23\");\n\r");
            sbPrefs.Append("user_pref(\"urlclassifier.tableversion.goog-white-url\", \"1.371\");\n\r");
            StreamWriter writer = new StreamWriter(strFolder + "\\prefs.js");
            writer.Write(sbPrefs.ToString()); 
            writer.Close();
            writer.Dispose();
            GC.Collect();
        } 
```

[资源](https://stackoverflow.com/questions/10963271/how-to-change-home-page-in-internet-explorer-using-c/10963355#10963355)

## 铬合金

[以编程方式访问 Google Chrome 主页或开始页面](https://stackoverflow.com/questions/4008194/how-can-i-programmatically-access-the-google-chrome-home-or-start-page)

**其他来源**

*   [http://www.howtogeek.com/howto/windows/registry-hack-to-set-internet-explorer-start-page/](http://www.howtogeek.com/howto/windows/registry-hack-to-set-internet-explorer-start-page/)
*   [http://social.technet.microsoft.com/Forums/en/w7itproinstall/thread/0942e4c4-d8db-4f1a-b638-2550a8dbdbd9](http://social.technet.microsoft.com/Forums/en/w7itproinstall/thread/0942e4c4-d8db-4f1a-b638-2550a8dbdbd9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-17T23:27:26.907

除了上述答案之外，如果存在组策略，您可能还需要检查以下内容： HKCU\Software\Policies\Microsoft\Internet Explorer\Main\Start Page

# python - 如何使矩形中的击球仅输出一个事件？

> ID：10963272
> 
> 赞同：1
> 
> 时间：2012-06-09T17:57:19.503
> 
> 标签：python, pygame

在 pygame 中，我试图让每次射击击中我的僵尸时我的积分增加 1000，僵尸的位置是 zhot[XX] 和 zhot[YY]。我试图通过在我的僵尸周围创建一个矩形并使用碰撞点功能来实现这一点，但是当我的镜头穿过矩形时，它的位置的每次变化都计为 1000 点，所以射击一个僵尸会给我大约 30000 点。我怎样才能解决这个问题？

```
for shot in shots:
    zomrect2=Rect(zhot[XX],zhot[YY],49,38)
    if zomrect2.collidepoint(shot[X],shot[Y]):     
        points+=1000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:28:08.603

Once you've awarded points, you need to `break` out of the for loop.

```
for shot in shots:
    zomrect2=Rect(zhot[XX],zhot[YY],49,38)
    if zomrect2.collidepoint(shot[X],shot[Y]):     
        points+=1000 
        break #no more points will be awarded, there's no point wasting computation checking the rest. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:28:16.860

我猜您发布的循环在您的主循环内运行，并且在主循环的每次迭代中都会被调用。

一旦它击中你的僵尸，你应该`shot`从`shots`列表中删除它，这样就不会在主循环的下一次迭代中再次检查它是否发生碰撞。

```
zomrect2=Rect(zhot[XX],zhot[YY],49,38)
# make a copy of the list so we can savely remove items
# from it while iterating over the list
for shot in shots[:]: 
  if zomrect2.collidepoint(shot[X],shot[Y]):     
    points += 1000 
    shots.remove(shot) 
    # and also do whatever you have to do to 
    # erase the shot objects from your game 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:04:08.870

您需要跟踪已经获得积分的事实。目前还不清楚如何/何时调用方法或函数奖励积分，但可能是这样的：

```
points_awarded = False
for shot in shots:
    zomrect2=Rect(zhot[XX],zhot[YY],49,38)
    if zomrect2.collidepoint(shot[X],shot[Y]) and not points_awarded:      
        points_awarded = True
        points+=1000 
```

# javascript - 发布动态更改的 textarea 值不适用于 ajax 表单

> ID：10963283
> 
> 赞同：1
> 
> 时间：2012-06-09T17:59:00.683
> 
> 标签：javascript, google-chrome-extension, firefox-addon-sdk

我正在开发一个浏览器扩展程序（google chrome 和 firefox），它使用内容脚本来更改 textarea 值。我正在使用这个脚本：

在谷歌浏览器上我使用这个脚本：

```
function print(msg, textarea){
  textarea.focus();
  textarea.click();
  textarea.value = '';
  for(var i=0; i<msg.length;i++){
    var e = document.createEvent('KeyboardEvent');
    e.initKeyboardEvent("keypress", true, true, null, false, false, false, false, 0, msg.charCodeAt(i));
    textarea.dispatchEvent(e);
    textarea.value += msg[i];
  }
} 
```

在某些使用 AJAX 的网站上，textarea 的值已正确更新，但由于某些原因，当我提交表单时，会发布旧的 textarea 内容。如果我**手动**按一个键，问题就解决了。

我不明白问题出在哪里。我用 jQuery 尝试了 $(textarea).keydown().keypress().keyup().change() 或 .blur() 但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:35:11.383

Wladimir 是对的，问题通常与隐藏字段和 keyup 事件有关。触发顺序是关键。我相信正确的方法是：

```
for(var i=0; i<msg.length;i++){
  var e = document.createEvent('KeyboardEvent');
  e.initKeyboardEvent("keydown", true, true, null, false, false, false, false, 0, msg.charCodeAt(i));
  textarea.dispatchEvent(e);

  var e = document.createEvent('KeyboardEvent');
  e.initKeyboardEvent("keypress", true, true, null, false, false, false, false, 0, msg.charCodeAt(i));
  textarea.dispatchEvent(e);

  textarea.value += msg[i];

  var e = document.createEvent('KeyboardEvent');
  e.initKeyboardEvent("keyup", true, true, null, false, false, false, false, 0, msg.charCodeAt(i));
  textarea.dispatchEvent(e);
} 
```

它适用于 firefox 和 google chrome（但 firefox 使用 initKeyEvent 而不是 initKeyboardEvent）

# php - 在 Magento 中查找正确的模板和块

> ID：10963284
> 
> 赞同：1
> 
> 时间：2012-06-09T17:59:00.993
> 
> 标签：php, magento

我正在尝试更改 Magento 单页结帐页面。我已经进行了搜索

```
$find . -iname *onepage* 
```

我在 Magento/ 目录中获得了 onepage.phtml 的 5-6 个结果。其中一些页面具有完全相同的来源，或几乎完全相同的来源。有没有更好的方法让我知道哪个文件正在加载到站点上，而不是使用“试用”方法并编辑它们直到我找到我需要的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T17:59:01.977

您可以选择使用模板提示。对于 Magento 开发人员来说，这是一个非常漂亮的工具。模板提示将显示在您的 Magento 网站的每个页面上可以找到每个可见文件的位置。登录后端并按照图片查看如何为前端打开它们。 ![在此处输入图像描述-不想](../Images/26fe8aea9d273ce75b57cb91bd4abfbd.png) ![在此处输入图像描述](../Images/2ebec3589e0378c1e8330ed0fc5d9640.png) ![在此处输入图像描述](../Images/3dd9478f395ea950c85e60e08ab80c8b.png) 将 Template Path Hints 和 Add Block Names to Hints 都设置为 yes。瞧，您的站点应该看起来像这样：（此外，默认情况下，模板路径提示不会显示在默认站点范围中，您可能需要选择一个特定站点来启用它们）：![在此处输入图像描述](../Images/662f6b267200715ffaff57c906197d15.png)

现在，如果您需要对后端（管理面板）进行更改怎么办？这部分同样简单，尽管您必须对某些代码进行一些更改。在你的

```
app/code/local/Mage/Core/etc/system.xml 
```

目录有一段代码，如下所示：

```
 <template_hints translate="label">
                        <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>20</sort_order>
                        <show_in_default>0</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </template_hints>
                    <template_hints_blocks translate="label">
                        <label>Add Block Names to Hints</label>
                        <frontend_type>select</frontend_type>
                        <source_model>adminhtml/system_config_source_yesno</source_model>
                        <sort_order>21</sort_order>
                        <show_in_default>0</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </template_hints_blocks> 
```

现在将两个 show_in_default 设置从 0 更改为 1。返回到默认站点范围下的管理面板 > 系统 > 配置 > 开发人员，您将可以选择启用模板路径提示和块名称。如果您现在将这两个都设置为 yes，它将为管理面板启用模板路径提示。

# ruby-on-rails - 使用 OmniAuth 拒绝回调

> ID：10963286
> 
> 赞同：17
> 
> 时间：2012-06-09T17:59:07.397
> 
> 标签：ruby-on-rails, omniauth

当我在 Rails 3 应用程序中使用 OmniAuth 启动登录过程时，如果我在提供程序的页面上取消，我会被发送回一个类似于以下内容的 URL：

```
http://example.com/auth/twitter/callback?denied=aUho.... 
```

我的应用程序抛出一个 500，我可以看到它是一个 OAuth::Unauthorized: 401 Unauthorized，而没有触及我的任何控制器操作。

当我在我的计算机中复制它时，堆栈跟踪是：

```
oauth (0.4.6) lib/oauth/consumer.rb:216:in `token_request'
oauth (0.4.6) lib/oauth/consumer.rb:136:in `get_request_token'
omniauth-oauth (1.0.1) lib/omniauth/strategies/oauth.rb:29:in `request_phase'
omniauth-twitter (0.0.11) lib/omniauth/strategies/twitter.rb:50:in `request_phase'
omniauth (1.1.0) lib/omniauth/strategy.rb:207:in `request_call'
omniauth (1.1.0) lib/omniauth/strategy.rb:174:in `call!'
omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.0) lib/omniauth/builder.rb:48:in `call'
sass (3.1.19) lib/sass/plugin/rack.rb:54:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__60653626266012267__call__4496837804684830799__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
airbrake (3.1.1) lib/airbrake/rack.rb:30:in `call'
airbrake (3.1.1) lib/airbrake/user_informer.rb:12:in `call'
railties (3.2.6) lib/rails/engine.rb:479:in `call'
railties (3.2.6) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
thin (1.3.1) lib/thin/connection.rb:78:in `catch'
thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
thin (1.3.1) lib/thin/connection.rb:53:in `process'
thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
thin (1.3.1) lib/thin/server.rb:159:in `start'
rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.6) lib/rails/commands/server.rb:70:in `start'
railties (3.2.6) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.6) lib/rails/commands.rb:50:in `tap'
railties (3.2.6) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>' 
```

如果我继续登录（没有在 Twitter 页面上单击取消），那么一切都按预期正常工作。Facebook 也一样，我可以正常登录，但如果我在 Facebook 页面上按“取消”，我会被重定向回来并抛出 500。

有没有办法更好地处理这个问题？我希望能够显示一个不错的页面。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T07:00:54.123

当出现故障时，大多数情况下取决于故障的类型，OmniAuth 将调用`OmniAuth.config.on_failure`默认设置为[`OmniAuth::FailureEndpoint`](https://github.com/intridea/omniauth/blob/master/lib/omniauth/failure_endpoint.rb). 默认情况下，它应该在开发模式下引发异常，否则重定向：

```
def call
  raise_out! if ENV['RACK_ENV'].to_s == 'development'
  redirect_to_failure
end 
```

根据[文档](http://www.rubydoc.info/github/intridea/omniauth/OmniAuth/FailureEndpoint)，默认端点是`/auth/failure`.

如果这对您来说没有按预期工作，那么您可以通过将其添加到您的初始化程序来强制重定向始终发生，即使在开发模式下也是如此：

```
class SafeFailureEndpoint < OmniAuth::FailureEndpoint
  def call
    redirect_to_failure
  end
end

OmniAuth.config.on_failure = SafeFailureEndpoint 
```

来自[https://github.com/intridea/omniauth/issues/616的更简洁的解决方案](https://github.com/intridea/omniauth/issues/616)

```
# Added to config/initializers/omniauth.rb
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-08T07:39:41.133

我有同样的问题，（facebook取消点击）

添加后

```
# Added to config/initializers/omniauth.rb
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

将身份验证回调路由实现为

在 config/routes.rb

```
match '/auth/failure' => 'sessions#failure' 
```

会话控制器看起来像

```
class SessionsController < ApplicationController
  def failure
    redirect_to #route that you want redirect
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-11T02:04:42.517

我遇到了同样的问题，使用 Pramod 的解决方案时，我遇到了“未知操作”错误，但在我将回调路由更改为

配置/路由.rb

```
devise_scope :user do
  get '/users/auth/failure' => 'sessions#failure'
end 
```

Rails 3.2.14
设计 3.1.1
Omniauth 1.1.4

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T20:52:38.447

对于那些使用 omniauth_facebook 和类似 Users::OmniauthCallbacksController 的用户，请使用：

配置/路由.rb

```
devise_scope :user do
  get '/omniauth/failure' => 'users/omniauth_callbacks#failure'
end 
```

应用程序/控制器/用户/omniauth_callbacks_controller.rb

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    ...
  end
  def failure
    redirect_to root_path
  end
end 
```

如果您使用的是 FB 弹出窗口

应用程序/控制器/用户/omniauth_callbacks_controller.rb

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    ...
  end
  def failure
    if request.env['HTTP_REFERER'] == "https://www.facebook.com/"
      render 'failure', :layout => false
    else
      redirect_to root_path
    end
  end
end 
```

应用程序/视图/用户/omniauth_callbacks/failure.html.haml

```
:javascript
  window.close(); 
```

# c# - 同步 VirusTotal 代码到 Rx 启用异步（可能还有一些 JSON 解析）

> ID：10963290
> 
> 赞同：-2
> 
> 时间：2012-06-09T17:59:25.060
> 
> 标签：c#, json, asynchronous, system.reactive, antivirus-integration

上次我在这里发布问题时，每个人都为解决我的问题提供了一些很好的指导。及时前进，这是另一个。我正在尝试重做一个小型辅助工具，该工具可以根据 VirusTotal 检查 URL 和文件以获取一些基本信息。下面的代码运行良好，但锁定了 UI。有人告诉我，我应该研究一下 Rx 并喜欢阅读它，但似乎无法理解它。所以现在问题来了，设计以​​下代码以使其利用 Rx 的最佳方法是什么，以便它是异步的，并且在它做这件事时让我的 UI 独自一人。VirusTotal 还利用多级 JSON 进行响应，所以如果有人有一个很好的方法将它集成到这个中，那就更好了。

```
class Virustotal
{
    private string APIKey = "REMOVED";
    private string FileReportURL = "https://www.virustotal.com/vtapi/v2/file/report";
    private string URLReportURL = "http://www.virustotal.com/vtapi/v2/url/report";
    private string URLSubmitURL = "https://www.virustotal.com/vtapi/v2/url/scan";

    WebRequest theRequest;
    HttpWebResponse theResponse;
    ArrayList  theQueryData;

    public string GetFileReport(string checksum) // Gets latest report of file from VT using a hash (MD5 / SHA1 / SHA256)
    {
        this.WebPostRequest(this.FileReportURL);
        this.Add("resource", checksum);
        return this.GetResponse();
    }

    public string GetURLReport(string url) // Gets latest report of URL from VT
    {
        this.WebPostRequest(this.URLReportURL);
        this.Add("resource", url);
        this.Add("scan", "1"); //Automatically submits to VT if no result found
        return this.GetResponse();
    }

    public string SubmitURL(string url) // Submits URL to VT for insertion to scanning queue
    {
        this.WebPostRequest(this.URLSubmitURL);
        this.Add("url", url);
        return this.GetResponse();
    }

    public string SubmitFile() // Submits File to VT for insertion to scanning queue
    {
        // File Upload code needed
        return this.GetResponse();
    }

    private void WebPostRequest(string url)
    {
        theRequest = WebRequest.Create(url);
        theRequest.Method = "POST";
        theQueryData = new ArrayList();
        this.Add("apikey", APIKey);
    }

    private void Add(string key, string value)
    {
        theQueryData.Add(String.Format("{0}={1}", key, Uri.EscapeDataString(value)));
    }

    private string GetResponse()
    {
        // Set the encoding type
        theRequest.ContentType="application/x-www-form-urlencoded";

        // Build a string containing all the parameters
        string Parameters = String.Join("&",(String[]) theQueryData.ToArray(typeof(string)));
        theRequest.ContentLength = Parameters.Length;

        // We write the parameters into the request
        StreamWriter sw = new StreamWriter(theRequest.GetRequestStream());
        sw.Write(Parameters);
        sw.Close();

        // Execute the query
        theResponse =  (HttpWebResponse)theRequest.GetResponse();
        StreamReader sr = new StreamReader(theResponse.GetResponseStream());
        return sr.ReadToEnd();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T02:06:05.710

您的代码写得不好，这使得异步变得更加困难 - 主要是三个类级变量。在 Rx 中编码时，您想考虑“函数式编程”而不是“OOP”——所以没有类级别的变量。

所以，我所做的是——我重新编码了`GetResponse`将所有状态封装到单个调用中的方法——并且我让它返回`IObservable<string>`而不是仅仅返回`string`.

公共函数现在可以这样编写：

```
public IObservable<string> GetFileReport(string checksum)
{
    return this.GetResponse(this.FileReportURL,
        new Dictionary<string, string>() { { "resource", checksum }, });
}

public IObservable<string> GetURLReport(string url)
{
    return this.GetResponse(this.URLReportURL,
        new Dictionary<string, string>()
            { { "resource", url }, { "scan", "1" }, });
}

public IObservable<string> SubmitURL(string url)
{
    return this.GetResponse(this.URLSubmitURL,
        new Dictionary<string, string>() { { "url", url }, });
}

public IObservable<string> SubmitFile()
{
    return this.GetResponse("UNKNOWNURL", new Dictionary<string, string>());
} 
```

`GetResponse`看起来像这样：

```
private IObservable<string> GetResponse(
    string url,
    Dictionary<string, string> theQueryData)
{
    return Observable.Start(() =>
    {
        var theRequest = WebRequest.Create(url);
        theRequest.Method = "POST";
        theRequest.ContentType="application/x-www-form-urlencoded";

        theQueryData.Add("apikey", APIKey);

        string Parameters = String.Join("&",
            theQueryData.Select(x =>
                String.Format("{0}={1}", x.Key, x.Value)));
        theRequest.ContentLength = Parameters.Length;

        using (var sw = new StreamWriter(theRequest.GetRequestStream()))
        {
            sw.Write(Parameters);
            sw.Close();
        }

        using (var theResponse =  (HttpWebResponse)theRequest.GetResponse())
        {
            using (var sr = new StreamReader(theResponse.GetResponseStream()))
            {
                return sr.ReadToEnd();
            }
        }
    });
} 
```

我还没有实际测试过这个 - 我没有初学者的 APIKEY - 但它应该可以正常工作。让我知道你怎么去。

# android - 如何捕捉亚马逊 AWS 错误 Android

> ID：10963292
> 
> 赞同：2
> 
> 时间：2012-06-09T17:59:48.110
> 
> 标签：android, exception, amazon-web-services, amazon, amazon-simpledb

我不断收到错误报告（来自用户），例如：

原因：状态代码：400，AWS 服务：AmazonSimpleDB，AWS 请求 ID：c5cb109d-bbff-fcea-bc0d-0cb60ff8f6af，AWS 错误代码：RequestExpired，AWS 错误消息：请求已过期。时间戳日期为 2012-06-06T13:19:59.415Z。当前日期是 2012-06-06T14:20:03Z

显然这是因为用户设置了错误的时区或其他设置？无论如何，我想捕捉这个特定的错误并向用户发布一条消息，要求他们检查他们的时区设置，但是我找不到办法。如果我捕获 AmazonServiceException，则错误显示为 null。

如何根据状态码甚至错误码捕捉错误？我尝试的当前代码如下所示：

```
try {
        dostuff()
    } catch (IOException e) {
        updateAWS("DownloadErrors");
        return "filenotfound";
    } catch (AmazonServiceException e) {
        return "downloadfail";
    } 
```

但是 AmazonServiceException e 始终为空，因此我无法从中提取任何信息。

其他代码：

```
private void doStuff() throws IOException, AmazonServiceException{ 
//code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:45:33.863

显然这是我需要的。SDb 跟踪“RequestExpired”，S3 使用“RequestTimeTooSkewed”

此外，这似乎正在发生，因为系统时间与 AWS 服务器相差 >15 分钟。我给用户写了一张便条，以检查他们的时间，并尽可能使用“自动”日期/时间。自己测试并重现了错误以及解决方案。

```
try {
        result = doOperations();
    } catch (AmazonServiceException e) {
        if (e.getErrorCode().equals("RequestExpired") || e.getErrorCode().equals("RequestTimeTooSkewed")) {
            result = "timestamp";
        }
        }
    return result;
} 
```

# jquery - JSON 数据未使用 $.getJSON 加载

> ID：10963297
> 
> 赞同：1
> 
> 时间：2012-06-09T18:00:09.123
> 
> 标签：jquery, json, getjson

我正在尝试使用将 JSON 数据加载到 jQuery 中`$.getJSON`。但是，我调用的警报没有显示（尽管我知道 js 已正确链接，因为`$.getJSON`显示之外的其他警报）。我也知道该`"test.json"`文件位于正确的目录中。

我把它归结为最简单的代码，以便最好地找到我做错的答案：

getjson.js 文件（在准备好的文档中）：

```
$.getJSON("test.json", function(json) {
    alert("JSON Data: " + json.statename);
}); 
```

test.json 中的 JSON 数据很简单：

```
 {"statename": "Hawaii"} 
```

然而，当 getjson.js 文件被加载时，并没有出现警报！在 Firebug 中，我也没有看到任何请求被发送。我已经在谷歌上搜索过，但在我看来我的语法还可以，而且我是 JSON 和 jQuery 的新手，所以我看不出我在这里做错了什么。

非常感谢您在这里的任何输入，对此感到非常疯狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:04:13.227

您必须提供正确`url`的`.getJSON`调用。它不适用于您计算机上的本地文件。

# java - Android状态栏保持不变

> ID：10963299
> 
> 赞同：0
> 
> 时间：2012-06-09T18:00:21.230
> 
> 标签：java, android

在我的 onCreate() 方法中，我使用以下代码删除状态栏：

```
// Remove the status bar from the top
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

然而，当我启动应用程序时，我仍然可以看到状态栏一秒钟。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:03:12.370

将以下属性添加到清单中的活动：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:09:20.823

您必须在设置内容视图之前使用 requestWindowFeature

# php - ADYEN 付款 - 测试 SoapFault 对象上的 SOAP 错误（[消息：受保护] => 安全 010 不允许

> ID：10963301
> 
> 赞同：4
> 
> 时间：2012-06-09T18:00:31.497
> 
> 标签：php

这是我在这个论坛的第一篇文章。我正在尝试使用 WS 开发对 Adyen 的所有付款，而不是我迄今为止使用的皮肤/发布方法。所以，我从他们的示例中下载了这段代码（我还发布了通过 WS 连接的类方法）

```
function Adyen($login, $password, $host ="live", $debug=FALSE ) {
    $this->DEBUG = $debug;

    $this->client = new SoapClient( "https://pal-$host.adyen.com/pal/Payment.wsdl",
      array(
        "login" => $login,
        "password" => $password,
        'trace' => 1,
        'soap_version' => SOAP_1_1,
        'style' => SOAP_DOCUMENT,
        'encoding' => SOAP_LITERAL
      )
    );
}

function authorise( $amount,$currencyCode,$cardHolder,$cardNumber,$expm,$expy,$cvc,$reference) {
        global $merchantAccount;

    $response = $this->client->authorise( array(
      "paymentRequest" => array 
      (
        "amount" => array (
        "value" => $amount,
        "currency" => $currencyCode),
        "card" => array (
        "cvc" => $cvc,
        "expiryMonth" => $expm,
        "expiryYear" => $expy,
        "holderName" => $cardHolder,
        "number" => $cardNumber,
        ),
      "merchantAccount" => $merchantAccount,
      "reference" => $reference,
    )
      )
    ); 
```

当我执行此代码时，它会返回此错误

```
#!/usr/bin/php SOAP Error on test SoapFault Object ( [message:protected] => security 010 Not allowed [string:Exception:private] => 
```

你有什么建议可以解决吗？

此致。

编辑：太奇怪了，因为使用相同的方法，但参数不同（如果是定期付款，我没有这个错误。这个案例运行

```
$response = $this->client->authorise(
                array(
                    "paymentRequest" =>
                    array(
                        "amount" => array("value" => $amount, 
                                          "currency" => $currencyCode),
                        "merchantAccount" => $merchantAccount,
                        "reference" => $reference,
                        "shopperReference" => $reference",
                        "shopperEmail" => $email,
                        "recurring" => array("contract" => "RECURRING"),
                        "selectedRecurringDetailReference" => "LATEST",
                        "shopperInteraction" => "ContAuth"
                    )
                )
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T06:43:04.733

有同样的问题，这是支持答案：

您正在尝试进行 API 付款。请注意，使用直接集成 API 有一些缺点。

最重要的是，由于严格的行业法规，商户必须符合 1 级或 2 级 PCI DSS（支付卡行业数据安全标准）。PCI DSS 认证过程需要您在时间和金钱上做出巨大贡献。

[http://en.wikipedia.org/wiki/PCI_DSS](http://en.wikipedia.org/wiki/PCI_DSS)

直接集成还提供了一组有限的支付方式，并且可能需要您实施 3D 安全机制等功能。

正常的集成工作如下：

1.  将购物者从您的网站重定向到我们的托管支付页面。
2.  购物者可以选择多种付款方式并进行付款。
3.  购物者被重定向回您的网站，我们将返回付款结果代码。
4.  我们还通过 SOAP 或 HTTP Post 发送了通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:37:30.873

来自 Adyen 文档

> 010 不允许 您无权执行此操作

我认为您应该向他们的支持发送电子邮件。可能是您的帐户尚未准备好使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T14:52:38.840

您需要在 ca 管理区域中为用户“编辑允许的用户 IP 范围”添加您的 ip。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-23T10:31:47.150

我认为在这段代码中你错误地添加了额外的双引号（“shopperReference”=> $reference“，）。

```
$response = $this->client->authorise(
                array(
                    "paymentRequest" =>
                    array(
                        "amount" => array("value" => $amount, 
                                          "currency" => $currencyCode),
                        "merchantAccount" => $merchantAccount,
                        "reference" => $reference,
                        "shopperReference" => $reference",
                        "shopperEmail" => $email,
                        "recurring" => array("contract" => "RECURRING"),
                        "selectedRecurringDetailReference" => "LATEST",
                        "shopperInteraction" => "ContAuth"
                    )
                )
        ); 
```

# php - php 类中的变量，可以在其所有函数中使用

> ID：10963308
> 
> 赞同：0
> 
> 时间：2012-06-09T18:01:17.517
> 
> 标签：php, class, codeigniter, scope, codeigniter-2

我想在一个 php 类中声明一个变量，它可以在它的所有函数中使用。我正在使用 codeigniter 框架，并且必须在每个函数中传递 base_url 等数据。我还需要一个变量中的所有这些数据。例如`$data['base_url']=base_url()`，`$data['title']="My_Site_title"`等等 & 然后只发送一个变量 $data （这在 codeigniter 中很常见）。

根据[这个](https://stackoverflow.com/questions/1274186/have-a-variable-exist-in-all-functions-of-a-class)问题，我将代码修改为：

```
class Search extends CI_Controller {

function Search() {
    parent::__construct();
    $this->load->model('student_model');

    $this->load->helper('form');
    $this->load->helper('url');
    $this->output->enable_profiler(TRUE);

    $this->data['base_url']=base_url();  //gives an error here
 }

 function index() {
     $this->load->view('search_view', $this->data);
 }
 } 
```

但它仍然在标记的地方给出一个错误，说`Undefined variable: data`and `Fatal error: Cannot access empty property in ..\search.php on line 16`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:14:44.033

干得好：

```
class Search extends CI_Controller {

protected $data = array();

function Search() {
    parent::__construct();
    $this->load->model('student_model');

    $this->load->helper('form');
    $this->load->helper('url');
    $this->output->enable_profiler(TRUE);

    $this->data['base_url']=base_url();
 }

 function index() {
     $this->load->view('search_view', $this->data);
 }
 } 
```

更多关于 php 中的类属性：http: [//php.net/manual/en/language.oop5.properties.php](http://php.net/manual/en/language.oop5.properties.php)

# spring - 实体管理器尚未注入：Spring Aspects JAR 是否配置为 AJC/AJDT 方面库？

> ID：10963310
> 
> 赞同：3
> 
> 时间：2012-06-09T18:01:26.317
> 
> 标签：spring, aspectj

我正在尝试编写一个简单的 spring rest web 服务，因为我不熟悉 maven（而且因为 maven 通常无法完成 - 连接问题），所以我现在正在尝试 ant build。现在，构建正常，服务可以运行。但是如果持久化功能被触发，会提示：

```
 01:48:39 Handler execution resulted in exception - forwarding to resolved error view: ModelAndView: reference to view with name 'uncaughtException'; model is {exception=java.lang.IllegalStateException: Entity manager has not been injected (is the Spring Aspects JAR configured as an AJC/AJDT aspects library?)} -org.springframework.web.servlet.DispatcherServlet
 java.lang.IllegalStateException: Entity manager has not been injected (is the Spring Aspects JAR configured as an AJC/AJDT aspects library?)
    at com.books.domain.UserInfo.entityManager(UserInfo.java:96)
    at com.books.domain.UserInfo.findUserByNamePassword(UserInfo.java:157)
    at com.books.web.UserController.register(UserController.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578) 
```

我的蚂蚁 build.xml：

```
<target name="compile" depends="init" description="compile the source ">
    <!--<javac srcdir="${src}" 
    debug="on"
    destdir="${build}" 
    classpathref="compile.classpath"
    includeantruntime="false"/>-->
    <iajc source ="1.6" target="1.6" sourceroots="src/main/java" destDir="src/main/webapp/WEB-INF/classes" showweaveinfo="true" verbose="true">
        <classpath>
            <path refid="compile.classpath"/>
            <path refid="aspectj.classpath"/>
        </classpath>
    </iajc>
</target> 
```

我的 applicationContext.xml：

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-19T13:55:19.923

我找到了解决方案：

这是正确的iajc任务

```
<iajc source ="1.6" target="1.6" sourceroots="src/main/java" destDir="src/main/webapp/WEB-INF/classes" showweaveinfo="true" verbose="true">
    <classpath>
        <path refid="compile.classpath"/>
        <path refid="aspectj.classpath"/>
    </classpath>
    <aspectpath>
         <pathelement location="${workdir}/WEB-INF/lib/spring-aspects-3.2.6.RELEASE.jar" />
    </aspectpath>
</iajc> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T22:00:51.220

考虑到切换到 Roo 并不是真正的解决方案，而是一种解决方法，我想分享我对这个问题的经验。

您需要检查两件事：

1.  您需要通过 aspectj 编译您的类。Maven aspectj 插件提供了这个要求。
2.  您的实体类必须使用注释`@Configurable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:05:35.920

通过使用 ROO 和 maven pom 解决了这个问题。关于如何使用 Ant 构建的信息太少了。

# django - Django 使用不正确的序列起始值为 Postgresql 创建测试数据库

> ID：10963315
> 
> 赞同：4
> 
> 时间：2012-06-09T18:01:56.427
> 
> 标签：django, postgresql, django-testing, django-postgresql

使用 pyscopg2 作为 Django 数据库默认后端，并用非常简单的案例进行测试。尝试创建用户失败，出现**IntegrityError**异常

```
$ python manage.py test project.core.tests
nosetests --verbosity 1 project.core.tests --rednose
Creating test database for alias 'default'...
X.
-----------------------------------------------------------------------------
1) ERROR: Tests that a user with a sha1 hashed password is change to newer hash method

   Traceback (most recent call last):
    crowddeals/core/tests.py line 7 in setUp
      self.user1 = User.objects.create_user('user1', 'user1@domain.com')
    env/lib/python2.7/site-packages/django/contrib/auth/models.py line 160 in create_user
      user.save(using=self._db)
    env/lib/python2.7/site-packages/django/db/models/base.py line 477 in save
      force_update=force_update, update_fields=update_fields)
    env/lib/python2.7/site-packages/django/db/models/base.py line 572 in save_base
      result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
    env/lib/python2.7/site-packages/django/db/models/manager.py line 203 in _insert
      return insert_query(self.model, objs, fields, **kwargs)
    env/lib/python2.7/site-packages/django/db/models/query.py line 1588 in insert_query
      return query.get_compiler(using=using).execute_sql(return_id)
    env/lib/python2.7/site-packages/django/db/models/sql/compiler.py line 911 in execute_sql
      cursor.execute(sql, params)
    env/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py line 52 in execute
      return self.cursor.execute(query, args)
   IntegrityError: duplicate key value violates unique constraint "auth_user_pkey"
   DETAIL:  Key (id)=(1) already exists. 
```

*默认*数据库正在运行，并且可以添加用户。测试仅在*测试*数据库上失败。

查看*测试*数据库，我发现所有表的主键的自动递增序列都有错误的起始值，它将*默认数据库中最后使用的值作为**测试*数据库的起始值。

对于默认数据库，User.id 使用自动递增序列。

```
CREATE SEQUENCE auth_user_id_seq
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 1
  CACHE 1; 
```

并为测试数据库创建

```
CREATE SEQUENCE auth_user_id_seq
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 2
  CACHE 1; 
```

这显然是错误的，这也发生在其他表上，作为权限。

```
CREATE SEQUENCE auth_permission_id_seq
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 191
  CACHE 1; 
```

我猜不出为什么会这样，它必须从 1 开始在新的测试数据库上创建序列。

如果我将数据库引擎后端更改为 sqlite3，则不会发生异常。这只会发生在 postgresql 中。

我怎样才能解决这个问题？所以我的测试可以重新开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:08:24.303

如果您没有在每次测试时重新创建数据库，那么您必须自己重置序列。

另外，我认为您发布的序列定义是在使用 db 工具运行测试后检查 db 时发现的。在这种情况下，我认为您的数据库工具正在向您展示 SQL 以按原样创建序列：在使用之后。

它不会发生在 sqlite 上的事实与默认情况下使用内存数据库有关。因此，它会在每次测试运行中重新创建。

# mysql - 在 RDBMS 中存储 uni/bi/trigrams ngram 的正确方法？

> ID：10963316
> 
> 赞同：2
> 
> 时间：2012-06-09T18:01:59.847
> 
> 标签：mysql, sql, postgresql, rdbms, n-gram

我有一个从一堆文档中提取的 unigrams（单个单词）、bigrams（两个单词）和 trigrams（三个单词）的列表。我的目标是*静态分析报告*以及可以在这些文档上使用*的搜索。*

```
John Doe
Xeon 5668x
corporate tax rates
beach
tax plan
Porta San Giovanni 
```

ngram 按日期和文档标记。例如，我可以找到二元组之间的关系以及它们的短语首次出现的时间以及文档之间的关系。我还可以搜索包含这些 X 个 un/bi/trigram 短语的文档。

所以我的问题是如何存储它们以优化这些搜索。

最简单的方法是为每个短语创建一个简单的字符串列，然后每次在文档中找到该单词/短语时，我都会将关系添加到 document_ngram 表中。

```
table document
{
    id
    text
    date
}

table ngram
{
    id
    ngram varchar(200);
}

table document_ngram
{
    id
    ngram_id
    document_id
    date
} 
```

但是，这意味着如果我想通过三元组搜索单个单词，我必须使用字符串搜索。例如，假设我想要所有带有“夏天”这个词的三元组。

因此，如果我改为拆分单词以便存储在 ngram 中的唯一内容是单个单词，然后添加三列以便所有 1、2 和 3 单词链都可以放入其中`document_ngram`？

```
table document_ngram
{
    id
    word1_id NOT NULL
    word2_id DEFAULT NULL
    word3_id DEFAULT NULL
    document_id
    date
} 
```

这是正确的方法吗？他们有更好的方法吗？我目前正在使用 PostgreSQL 和 MySQL，但我相信这是一个通用的 SQL 问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T18:31:10.190

这就是我为您的数据建模的方式（请注意，“the”被引用了两次）您还可以为单个单词添加权重。

```
DROP SCHEMA ngram CASCADE;
CREATE SCHEMA ngram;

SET search_path='ngram';

CREATE table word
    ( word_id INTEGER PRIMARY KEY 
    , the_word varchar
    , constraint word_the_word UNIQUE (the_word)
    );  
CREATE table ngram
    ( ngram_id INTEGER  PRIMARY KEY 
    , n INTEGER NOT NULL -- arity
    , weight REAL -- payload
    );  

CREATE TABLE ngram_word
    ( ngram_id INTEGER NOT NULL REFERENCES ngram(ngram_id)
    , seq INTEGER NOT NULL
    , word_id INTEGER NOT NULL REFERENCES word(word_id)
    , PRIMARY KEY (ngram_id,seq)
    );  

INSERT INTO word(word_id,the_word) VALUES
(1, 'the') ,(2, 'man') ,(3, 'who') ,(4, 'sold') ,(5, 'world' );

INSERT INTO ngram(ngram_id, n, weight) VALUES
(101, 6, 1.0);

INSERT INTO ngram_word(ngram_id,seq,word_id) VALUES
( 101, 1, 1)
, ( 101, 2, 2)
, ( 101, 3, 3)
, ( 101, 4, 4)
, ( 101, 5, 1)
, ( 101, 6, 5)
    ;   

SELECT w.*
FROM ngram_word nw
JOIN word w ON w.word_id = nw.word_id
WHERE ngram_id = 101
ORDER BY seq; 
```

结果：

```
 word_id | the_word 
---------+----------
       1 | the
       2 | man
       3 | who
       4 | sold
       1 | the
       5 | world
(6 rows) 
```

现在，假设您想在现有（6 克）数据中添加一个 4 克：

```
INSERT INTO word(word_id,the_word) VALUES
(6, 'is') ,(7, 'lost') ;

INSERT INTO ngram(ngram_id, n, weight) VALUES
(102, 4, 0.1);

INSERT INTO ngram_word(ngram_id,seq,word_id) VALUES
( 102, 1, 1)
, ( 102, 2, 2)
, ( 102, 3, 6)
, ( 102, 4, 7)
    ;   

SELECT w.*
FROM ngram_word nw
JOIN word w ON w.word_id = nw.word_id
WHERE ngram_id = 102
ORDER BY seq; 
```

附加结果：

```
INSERT 0 2
INSERT 0 1
INSERT 0 4
 word_id | the_word 
---------+----------
       1 | the
       2 | man
       6 | is
       7 | lost
(4 rows) 
```

顺便说一句：向这个模型添加一个文档类型对象将向这个模型添加两个额外的表：一个用于文档，一个用于 document*ngram。（或以另一种方法：对于文档*单词）递归模型也是一种可能性。

更新：上述模型将需要一个额外的约束，这将需要实现触发器（或规则+一个额外的表）。伪代码：

```
 ngram_word.seq >0 AND ngram_word.seq <= (select ngram.n FROM ngram ng WHERE ng.ngram_id = ngram_word.ngram_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:32:09.950

一个想法是稍微修改您的原始表格布局。考虑 ngram varchar(200) 列仅包含 ngram 的 1 个单词，添加 word_no (1、2 或 3) 列，并添加分组列，例如，两个单词的两条记录在二元组中是相关的（给他们相同的 word_group）。[在 Oracle 中，我会从 a 中提取 word_group 数字`Sequence`——我认为 PostGres 会有类似的东西）

```
table document
{
    id
    text
    date
}

table ngram
{
    id
    word_group
    word_no
    ngram varchar(200);
}

table document_ngram
{
    id
    ngram_id
    document_id
    date
} 
```

# sql - 无法登录到默认 SQL Server 实例

> ID：10963319
> 
> 赞同：0
> 
> 时间：2012-06-09T18:02:10.423
> 
> 标签：sql, sql-server, windows, sql-server-2008

我下班把笔记本电脑带回家，希望能在周末完成一些任务。不幸的是，我无法使用`Windows Authentication`. 我检查了**SQL Server 配置管理器**，并且实例 ( `MSSQLSERVER`) 设置为**Log On As** `Local System`，这应该意味着我应该能够使用 Windows 身份验证正常登录......或者我在这里遗漏了什么？请注意，在登录窗口中，我尝试了很多不同的组合，但它总是告诉我连接失败，因为服务器不可访问或我无权访问它。

关于如何安装实例的一些背景知识：我自己安装和配置了它。我选择了`Mixed Authentication`模式并向默认`sa`用户提供了密码（顺便说一句，这也不起作用）。我怀疑可能是问题在于，当我`Domain User`以工作（`DOMAIN\UserName`）身份登录时，我安装了 SQL SERVER 实例。现在我在家，无法访问办公室的 LAN，所以我以`{COMPUTERNAME}\Kassem`用户身份登录。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:04:54.947

必须将 Windows 帐户添加到 SQL Server 才能拥有任何权限。如果不添加`{COMPUTERNAME}\Kassem`，则无法登录 SQL Server。

此处的恢复选项是 SA 密码，它应该始终有效。

要连接到默认实例，请连接到`localhost`或`.`。`.\MSSQLSERVER`即使`MSSQLSERVER`是默认实例名称，连接也不起作用。

# actionscript-3 - 让外部接口与 swf 对象一起工作，无法弄清楚我做错了什么

> ID：10963320
> 
> 赞同：0
> 
> 时间：2012-06-09T18:02:11.517
> 
> 标签：actionscript-3, swfobject, externalinterface

我正在使用 swf 对象嵌入 swf。我正在尝试使用外部接口从 JS 调用 flash 函数，但遇到了麻烦。我搜索了所有文档，阅读了大量内容，我确信我做对了。谁能指出问题可能出在哪里？

```
 var flashvars = {}; 
        var params = {wmode:"opaque", allowscriptaccess:"always" }; 
        var attributes = {id:"MySwf",  name:"MySwf"};
        swfobject.embedSWF("MySwf.swf", "flashContent", "600", "400", "9.0.0", "swfs/expressInstall.swf", flashvars, params, attributes,function(e){
            if(e.success){
                _flashRef = e.ref;
                testExternalInterface();                    
            }else{
                alert("We are sorry, flash is required to view this content.");
            }
        });
       function testExternalInterface(){        
              var swf = document.getElementById("MySwf");
              swf.sendMeTheGoods("TEST TEST");
    }; 
```

以上是我flash中的嵌入代码和js函数

```
 if (ExternalInterface.available)
        {
            trace("adding external interface");
            ExternalInterface.addCallback("sendMeTheGoods", sendMeTheGoods);
        }
    public function sendMeTheGoods(text:String):void
    {
        trace("setting vars")
        trace(text);
        txtYouSent.text = text;
    } 
```

我收到错误 Uncaught TypeError: Object # has no method 'sendMeTheGoods'

我已经尝试过引用 document.getElementById("MySwf"); 和 document.getElementById("flashContent"); 我得到了两种方式的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:31:54.700

外部接口 API 不是立即可用的，它需要一秒钟才能准备好。您的回调可能发生在 Flash Player 初始化 EI API 之前。尝试在回调中添加延迟，延迟“测试”函数的调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T20:34:21.553

var swf = navigator.appName.indexOf("Microsoft") != -1 ? 窗口[“MySwf”]：文档[“MySwf”]；

# ios - iphone监听一个tcp端口

> ID：10963321
> 
> 赞同：5
> 
> 时间：2012-06-09T18:02:19.700
> 
> 标签：ios, tcp, port

我从其他类似问题的答案中阅读了一些建议的链接。[文章 1](http://www.devx.com/wireless/Article/43551)，[图书馆 1](https://github.com/robbiehanson/CocoaAsyncSocket/wiki/Intro_GCDAsyncSocket)，[另一个 SO 问题](https://stackoverflow.com/questions/3630519/how-to-listen-on-a-network-port-in-objective-c)。但是，我无法弄清楚如何执行以下应用程序。

基本上，我向 Iphone 的 IP 和选定的端口（比如说端口：2020）发送一个字符串。我想在 Iphone 的 UI 上显示这个字符串。因此，让我们检查以下示例代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSString* str;
    while(true)
    {
         str = ReadLineFromPort(2020);
         myLabel.text = str;
    }
} 
```

我希望该`ReadLineFromPort()`方法具有以下职责：

> 阅读直到你看到换行符（即'\n'），当你看到换行符时返回字符串。（类似于[C# StreamReader.Readline 方法](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)。）

任何帮助将不胜感激。由于我不是专业的 IOS 开发人员，因此我需要一个基本的开发人员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T18:42:36.717

侦听某些 TCP 端口确实需要进行一些设置。

一个不错的选择是使用 Robbie Hanson 的[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。

在那里你会找到一个 Echo Server 的例子（在 RunLoop/XCode/EchoServer.

没错，这个 XCode 项目是为 OSX 生成的，但您可以简单地创建一个空的 iOS 项目并复制粘贴大部分代码。

虽然没有“读取直到中断”功能 - 但在将数据复制到接收缓冲区时实现它很简单。

编辑：

您通常想要修改`onSocket: didReadData: withTag:`

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *str = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    if(str)
    {
      myLabel.text = str;   
    }
} 
```

现在，此代码未检测`\n`到传入数据。例如，您可以定义一个 ivar 或属性`rx_buffer`

```
NSMutableString *rx_buffer; 
```

这将*与*

```
rx_buffer = [rx_buffer stringByAppendingString: str]; 
```

直到你检测`\n`到`str`.

# php - 表中的 MySQL id 编号

> ID：10963323
> 
> 赞同：1
> 
> 时间：2012-06-09T18:02:26.180
> 
> 标签：php, mysql

假设我有一个链接到这样的数据库的表：http: [//www.falkencreative.com/forum/records/view.php](http://www.falkencreative.com/forum/records/view.php)

如何使当我删除一条记录然后添加一条新记录时，新记录替换先前删除的记录并具有先前删除的 id 编号而不是下一个 id？

例如

1.  红色的
2.  蓝色的
3.  绿色的

单击按钮删除绿色。

1.  红色的
2.  蓝色的

单击按钮添加新颜色。输入橙色

1.  红色的
2.  蓝色的
3.  橙子

就目前而言，我正在处理的是：1\. 红色 2\. 蓝色 4\. 橙色（什么应该设置为 3？）

就桌子设置而言，这可能很简单，但我不知道该怎么做，而且我时间紧迫。谁能指导我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:59:41.160

您可能有 2 个选项。要么更新“绿色”值之前所在的同一行。IE：

```
mysql_query("UPDATE table_name SET color = 'orange' WHERE ID = '3'"); 
```

或者

```
mysql_query("UPDATE table_name SET color = 'orange' WHERE color = 'green'"); 
```

或者

无论您的说明符是什么。

从 MySql 的角度来看，这应该是最简单的方法。或者您可以按照最初概述的方式将其删除，然后使用 mysql_query("INSERT INTO .... 重新插入新行。但随后需要重置 MySql PK UID，即：

```
mysql_query("ALTER TABLE table_name AUTO_INCREMENT = 1"); 
```

这将删除您使用的 PK ID 并重新编号所有行。还是有更简单的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:28:24.330

Your problem is not about database IDs, it's about not understanding the difference between an ID and a line number. They have nothing to do with each other. Just simply output the loop counter ("$i") instead of the ID.

```
<?php
for ($i = 1; $i <= foo(); $i++) {
    print "<tr><td>{$i}</td><td>...</td></tr>\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:06:14.150

我认为您想更新记录，而不是删除旧记录并插入新记录。

**编辑：**

如果要插入新记录并为其分配下一个顺序 id，请使用非 auto_increment 列并在添加新记录时执行此操作：

```
INSERT INTO myTable (id, ...) VALUES ( (SELECT MAX(id) + 1 FROM myTable), ...) 
```

我没有方便的数据库来测试这个，但我认为它会起作用。但是我不确定当桌子是空的时会发生什么。这也可能会产生竞争条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:11:00.030

不，当您删除数据库行时，如果该列具有`AUTO_INCREMENT`活动状态，它将从序列中获取值。如果删除 3，则序列始终从 3+1 开始。例如，您可以从 php myadmin 中查看\设置自动增量值。我不知道您使用的是什么 DBMS，但是使用 oracle 您可以操纵序列。

所以你有各种方法。

1.  复杂：当您插入\删除时，您会使用触发器更新序列
2.  您使用 3 列：`id`, `IdToShow`, `Value`.

`id`现在也是一样，你用autoinc。 `idToShow`也就是你所展示的。插入时，您可以将其插入计算表中存在的行数（您有多种方法）。

希望它有所帮助。

# c# - 使用 iTextSharp 和 Unicode 字符填充 PDF 表单

> ID：10963325
> 
> 赞同：3
> 
> 时间：2012-06-09T18:02:39.173
> 
> 标签：c#, vb.net, unicode, pdf-generation, itextsharp

我有以下内容：

*   使用 Adob​​e Acrobat X 创建的 PDF 表单（所有字段使用 Helvetica 和 Helvetica Bold）
*   一个 VB.NET 项目，我尝试填充 PDF，然后将其展平

以下会发生什么：

*   所有字段都根据我的意愿填写。

但是，一旦来自例如挪威的人尝试这样做，一切都会出错。一旦他们使用了他们使用的一些特殊字符（æ、ø 等），这些字符就会被忽略。如果我在 Adob​​e Reader 中手动填写时尝试使用它们，一切都很好。

我尝试过使用以下内容：

```
Dim bf As BaseFont = BaseFont.CreateFont("c:\Windows\fonts\arial.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED) 
```

和

```
pdfFormFields.SetFieldProperty("txtDistrict", "textfont", bf, Nothing) 
```

哪个有效，它也可以在创建 PDF 表单时在 Adob​​e Acrobat 中使用 Arial，但是文件的绝对大小是惊人的，如果我在 Acrobat 中执行它从 25 kb 到 1.5 mb，从 25 kb 到 840 kb如果我使用 basefont.create 方法。

难道没有更好的方法来实现这一点吗？我问的原因是因为我正在创建的网络应用程序可能必须将这些 pdf 文件中的 50 个以上合并到一个文件中以供下载，然后大小真的变得至关重要，特别是如果大小从 1.25 mb 增加到 50 + mb 一个文件。

任何帮助是极大的赞赏。

# iphone - 我想在我的通用应用程序中的两个 UIViewControllers 之间传递数据

> ID：10963329
> 
> 赞同：0
> 
> 时间：2012-06-09T18:03:26.673
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [UISplitViewController Master / Detail 通信](https://stackoverflow.com/questions/8031238/uisplitviewcontroller-master-detail-communication)

对于 iPad，我使用 UISplitViewController，对于使用导航控制器的手机，我找不到将对象从主视图控制器传递到详细视图控制器的常用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:06:47.053

您正在寻找所谓的`Delegation`. 在此处查看我之前的 SO 答案和快速示例，还包括指向 Apple 的代表和数据源文档的链接。[Objective C 视图到控制器的通信](https://stackoverflow.com/questions/10941177/objective-c-view-to-controller-communication/10941216#10941216)

希望这可以帮助。

# android - 如何在外部打开文件？

> ID：10963330
> 
> 赞同：0
> 
> 时间：2012-06-09T18:03:33.833
> 
> 标签：android

我有像 .doc .pdf .excel... 这样的文件，我想在外部打开它们。

我试过intent.ACTION_VIEW，但它在浏览器中打开它。

如何使用用户作为默认处理程序的应用程序打开它们？

```
File file = new File(Globals.SAVE_PATH + filename);
openFile(file.toURI());

public void openFile(URI uri) {
        Intent i = new Intent(?????);
        i.setData(Uri.parse(uri.toString()));
        startActivity(i);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:07:25.257

您可能会发现[这篇](http://indyvision.net/2010/03/android-using-intents-open-files/)文章很有用。您必须记住的是，如果手机只有一个能够打开文件的应用程序，它将自动启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T20:21:48.633

感谢您的回答，但我发现这种方法是最简单的。

```
String path="File Path";

Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
File file = new File(path);

MimeTypeMap mime = MimeTypeMap.getSingleton();
String ext=file.getName().substring(file.getName().lastIndexOf(".")+1);
String type = mime.getMimeTypeFromExtension(ext);

intent.setDataAndType(Uri.fromFile(file),type);

startActivity(intent); 
```

# php - php。通过使用“global $var”来获取全局变量，我们是获取全局变量的副本还是获取对该全局变量的引用？

> ID：10963332
> 
> 赞同：1
> 
> 时间：2012-06-09T18:03:48.003
> 
> 标签：php, scope, global-variables

`global $user`对比`$user = $GLOBALS['user']`

通过使用“global $var”来获取全局变量，我们是获取全局变量的副本还是获取对该全局变量的引用？

```
global $user; 
```

$user 是全局对象的副本还是对实际全局变量的引用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:17:37.553

通过使用`global $var`名为“var”的全局变量，将被导入函数的局部范围（这是通过创建引用来完成的）。

这与`$GLOBALS`哪个是超全局变量不同。无论范围如何，这总是无处不在。

但是，这与引用不同。如果您真的想了解变量以及如何引用变量，我建议您[阅读 Derick Rethans 的 PDF：PHP 中的参考：深入](http://derickrethans.nl/talks/phparch-php-variables-article.pdf)了解(PDF)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:06:48.917

通过使用它，`global $var;`您总是有一个引用全局变量的局部变量。

以下代码：

```
$var = 1;

function test() {
  global $var;

  $var++;
}

test();
echo $var; 
```

相当于：

```
$var = 1;

function test() {
  $GLOBALS['var']++;
}

test();
echo $var; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:08:46.473

引用[$GLOBALS 的文档](http://php.net/manual/en/reserved.variables.globals.php)：

> 一个关联数组，包含对当前在脚本全局范围内定义的所有变量的**引用。**变量名是数组的键。

一个简单的测试用例：

```
$foo = "foo";
echo $GLOBALS["foo"];         // foo
echo $GLOBALS["foo"] = "bar"; // bar
echo $foo;                    // bar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:12:25.140

两者都不。编译器将该变量名称的使用解析为全局范围内的相应变量。

# django - 在不需要身份验证的页面中包含“CSRF 令牌”是否存在安全风险？

> ID：10963334
> 
> 赞同：2
> 
> 时间：2012-06-09T18:04:06.023
> 
> 标签：django, security, csrf, django-csrf, csrf-protection

我有一个 Django 站点，它使用 Django 的 csrf-token 来防止 csrf 攻击。公众可以访问其中一种表格，包括未登录的人。

Csrf Token 应该提供对跨域请求的保护。

**编辑：（**引用我的评论）“但是，如果在不需要授权的情况下允许发布请求，csrf 并不比一个琐碎的垃圾邮件过滤器更好（验证码在这里会做得更好）。事实上，这应该是一个安全风险在不需要身份验证的页面中包含 CSRF 令牌（例如 30 分钟后过期）。（但我的网站正在这样做，这就是我首先发表这篇文章的原因）”

此外，在这种情况下，可以在浏览器 js 控制台中获取该页面，通过某些特定的 xpath 获取 csrf 令牌，然后使用该 csrf 发布一些任意数据。此外，步骤很容易重现，可以为该站点或任何 Django 站点设计特定的攻击，因为您每次都会找到除*“csrfmiddlewaretoken”*之外的 csrf 令牌（包括 reddit、pinterest 等网站）。

据我所知，除了让它有点困难之外，csrf 令牌并没有太大帮助。

我错过了它的一个方面吗？我的实施错了吗？如果我是对的，让你的 csrf 令牌在你的 html 源代码中飞来飞去（尤其是那些不需要任何身份验证的）是愚蠢的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T23:02:35.947

[这个问题](https://stackoverflow.com/questions/10242263/what-is-csrf-protection-really-for-in-django?rq=1)对同一件事有几个非常好的答案。此外，那里的最后一个答案解决了这样一个事实，即在技术上可以抓取令牌的表单（通过 javascript），然后用它提交一个发布请求（通过 javascript）。但是受害者必须登录。

CSRF 保护的重点是专门防止欺骗随机用户。它与客户端漏洞利用无关。您还必须考虑部分保护包括拒绝跨站点源请求。该请求必须来自与目标站点相同的来源。

归根结底，CSRF 是有价值的。它是一个保护区域，但不是全部。你不能防御一切。

引用[关于 CSRF 的博客文章](http://www.codinghorror.com/blog/2008/09/cross-site-request-forgeries-and-you.html)：

> **秘密隐藏表单值。**为每个表单发送一个唯一的服务器表单值（通常与用户会话相关），并验证您在表单发布中获得的值是否相同。由于 XmlHttpRequest 函数中的同域请求限制，攻击者不能简单地通过 JavaScript 将您的远程表单作为目标用户抓取。

...以及感兴趣的评论：

> 我不是 javascript 向导，但是否可以在恶意页面上的隐藏 iframe 中加载远程页面，用 javascript 解析它以找到隐藏的令牌，然后填充用户（大概）即将提交的表单正确的价值观？
> 
> *   大卫古德温 2008 年 9 月 24 日凌晨 2:35
> 
> @David Goodwin：不，同源策略会阻止恶意页面读取 iframe 的内容。
> 
> *   里科 2008 年 9 月 24 日凌晨 3:03

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:33:33.637

如果您的表单是公开的并且不需要身份验证，那么没有什么可以阻止任何人（包括恶意站点/插件/人员）向其发布。这个问题被称为垃圾邮件，而不是 CSRF。

阅读：[http ://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

CSRF 涉及一个恶意站点通过**假装是经过身份验证的用户**张贴到您的表单。

# google-maps-api-3 - Google Maps API：在您键入时显示地址选择

> ID：10963337
> 
> 赞同：1
> 
> 时间：2012-06-09T18:04:20.777
> 
> 标签：google-maps-api-3

我正在寻找创建一个在您键入时开始建议家庭地址的 Web 应用程序。例如，想象一家披萨外卖公司，您开始输入您的地址“1279”，然后在框下方显示美国的 1279 供人们选择，例如：

```
1279 Main Street, St. Louis, MO
1279 Tree Street, Baltimore, MD 
```

通过这种方式，它会真正反映`maps.google.com`在您键入时提出建议。

我浏览了 Google Places 和 Maps API，但没有取得多大成功。通过传递地址参数，GeoCoding 可以正常工作，但通常不会返回任何结果或非常糟糕的结果......不像`maps.google.com`. 另外，它们很难解析。（地址部分参数并不总是一致的，这意味着我必须通过另一个解析器发送格式化的地址......虽然不是一个交易破坏者。）

还有其他人有什么建议吗？谢谢！杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:34:56.703

`bounds`您可以在创建地点时通过传递选项来改进地点自动完成结果。该示例将其绑定到地图视口：

```
autocomplete.bindTo('bounds', map); 
```

在这个[**演示**](http://jsfiddle.net/yV6xv/23/)中，我硬编码了美国大陆的边界（加上一些墨西哥和加拿大）

```
var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input,
    {bounds: new google.maps.LatLngBounds(
        new google.maps.LatLng(23.730197707069532, -126.14240169525146), 
        new google.maps.LatLng(50.1805258484942, -65.32208919525146)) }
); 
```

# mysql - 解析错误：语法错误，wp-config.php 中出现意外的 T_CONSTANT_ENCAPSED_STRING

> ID：10963340
> 
> 赞同：-2
> 
> 时间：2012-06-09T18:04:47.373
> 
> 标签：mysql, wordpress, parsing

我正在尝试在我的本地主机上设置我的第一个 WP Db，但是当我在浏览器上运行它时，我收到了这个错误：

**解析错误：语法错误，第 22 行 C:\xampp\htdocs\wordpress\wp-config.php 中的意外 T_CONSTANT_ENCAPSED_STRING**

我检查了设置并没有更改任何我不应该更改的内容，但我仍然收到此错误。

我在以下 php 中缺少什么？

```
`**// ** MySQL settings - You can get this info from your web host ** //'

`/** The name of the database for WordPress */`
define('DB_NAME', wordpress_test');

/** MySQL database username */
define('DB_USER', 'root');

/** MySQL database password */
define('DB_PASSWORD', '');

/** MySQL hostname */
define('DB_HOST', 'localhost');

/** Database Charset to use in creating database tables. */
define('DB_CHARSET', 'utf8_unicode_ci');

/** The Database Collate type. Don't change this if in doubt. */
define('DB_COLLATE', '');** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T22:02:25.547

改变

```
define('DB_NAME', wordpress_test'); 
```

至

```
define('DB_NAME', 'wordpress_test'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:13:49.850

```
`**// ** MySQL settings - You can get this info from your web host ** //' <-- there we see a lost quote...
//It should be ` I think...

`/** The name of the database for WordPress */`
define('DB_NAME', wordpress_test');

/** MySQL database username */
define('DB_USER', 'root');

/** MySQL database password */
define('DB_PASSWORD', '');

/** MySQL hostname */
define('DB_HOST', 'localhost');

/** Database Charset to use in creating database tables. */
define('DB_CHARSET', 'utf8_unicode_ci');

/** The Database Collate type. Don't change this if in doubt. */
define('DB_COLLATE', '');** 
```

# java - Java 内部是否使用散列技术来管理所有对象

> ID：10963345
> 
> 赞同：0
> 
> 时间：2012-06-09T18:05:06.750
> 
> 标签：java, hash

散列概念的新手，我读过 HashMap、HashTable 等使用散列，我们需要指定一个键，同时用它存储一个值

但是，由于每个对象都有一个 hashCode() 方法，java 是否在内部通过特定字段对对象使用 hashCode 来管理它（列表除外）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:08:02.510

[Object.hashCode() 的javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)回答了这个问题：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（**这通常通过将对象的内部地址转换为整数来**实现，但 JavaTM 编程语言不需要这种实现技术。）

（强调我的）

所以不，没有额外的字段来存储 hashCode（除非某些类决定覆盖它并使用专用字段来实现它）。

并且 hashCode 不被 JVM 使用，而是被基于散列的集合（Hashtable、HashMap、HashSet，...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:09:15.457

不，hashCode() 方法用于定义一个键，用于将其与对象的实例相关联。

它用于标识对象的特定实例，并不意味着使用散列技术来管理 Java 对象。

您可以覆盖 hashCode() 方法来定义您自己的分配键的方式来标识对象的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T18:12:14.853

如果您问“Java 是否用于`hashCode()`对对象进行幕后管理？”，我想答案是“否”。考虑一下如果你写了一个非常糟糕的覆盖会发生什么`hashCode()`; 您会期望 JVM 内部结构会因此受到阻碍吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:15:55.367

```
public native int hashCode(); 
```

`hashCode`是本机实现。但没有字段与之关联。

```
This is typically implemented by converting the internal address of the
object into an integer, but this implementation technique is not required
by the JavaTM programming language. 
```

在 OpenJDK/Oracle JVM 中，计算初始哈希码的常用方法是基于第一次请求时的内存地址。对象在内存中移动，所以每次都使用地址不是一个好的选择。哈希码不是实际地址——它通常是八的倍数，不适合直接在哈希表中使用，尤其是具有两倍大小的幂。注意身份哈希码不是唯一的。

根据文档

```
jvmtiError GetObjectHashCode(jvmtiEnv* env, jobject object, jint* hash_code_ptr) 
```

和

```
For the object indicated by object, return via hash_code_ptr a hash code. 
This hash code could be used to maintain a hash table of object references, 
however, on some implementations this can cause significant performance 
impacts--in most cases tags will be a more efficient means of associating 
information with objects. This function guarantees the same hash code value 
for a particular object throughout its life. 
```

# android - 无法在android中的sqlite数据库中插入

> ID：10963347
> 
> 赞同：0
> 
> 时间：2012-06-09T18:05:27.440
> 
> 标签：android, database, sqlite

我创建了这张表：

```
"create table "  + DATABASE_TABLE + " ("
    + KEY_ROWID + " integer primary key autoincrement not null, "
    + KEY_TITLE + " text not null, "
    + KEY_BODY + " text not null, " + KEY_DATE_TIME + " text not null);" 
```

这是我为插入所做的：

```
ContentValues initialValues = new ContentValues();
initialValues.put("title", title);
initialValues.put("body", body);
initialValues.put("abc", anc);
return mDb.insert(DATABASE_TABLE, null, initialValues); 
```

但由于一些错误，我的应用程序强制关闭。请帮帮我...

Logcat 错误：

```
java.lang.NullPointerException
com.maddy.task_reminder.ReminderDbAdapter.createReminder(ReminderDbAdapter.java:133)
06-09 23:28:44.112: E/AndroidRuntime(412):  at com.maddy.task_reminder.edit_activity$4.onClick(edit_activity.java:143) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:18:09.023

如果你看 `java.lang.NullPointerException com.maddy.task_reminder.ReminderDbAdapter.createReminder(ReminderDbAdapter.java:133) 06-09 23:28:44.112: E/AndroidRuntime(412): at com.maddy.task_reminder.edit_activity$4.onClick(edit_activity.java:143)`

`edit_activity.java:143`您在和处有错误`ReminderDbAdapter.java:133`。什么东西在那里？

我的代码看起来像这样

```
 `public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_REL + " TEXT NOT NULL);"
        );
    }` 
```

和

```
public long createEntry(String name, String rel) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, name);
    cv.put(KEY_REL, rel);
    return water.insert(DATABASE_TABLE, null, cv);
} 
```

它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:34:04.890

如果您正在关注 Web 上的通用 DBAdapter 示例，请检查您是否调用：

```
mDbHelper.open(); 
```

在您的活动中。否则`mDb`永远不会在您的数据库助手类中实例化，它总是`null`.

**评论补充：**

所以这是你的`open()`方法。

```
public ReminderDbAdapter open() throws SQLException { 
    mDbHelper = new DatabaseHelper(mCtx); 
    mDb = mDbHelper.getWritableDatabase(); 
    return this; 
} 
```

如果您的 ReminderDbAdapter 构造函数看起来不像这样：

```
public ReminderDbAdapter(Context context) {
    ...
    mCtx = context;
    open(); // Do you have this line?
} 
```

然后你需要显式调用`ReminderDbAdapter.open()`你的活动，可能是这样的：

```
ReminderDbAdapter mDbHelper = new ReminderDbAdapter(this); 
mDbHelper.open(); 
```

# binary - 在 Erlang 中连接位串（不是二进制文件）

> ID：10963359
> 
> 赞同：5
> 
> 时间：2012-06-09T18:06:38.853
> 
> 标签：binary, erlang, concatenation, bitstring

你如何连接位串。我的意思是位串，因为我不知道字节数是 8 的倍数。

```
A = <<3:2>>
B = <<1:1>>
C = <<15:4>>

Solution should A|B|C should be <<127:7>> 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T18:17:58.033

**使用/bitstring**和所有以前的值构造二进制文件。这是一个在 erlang shell 中运行的示例：

```
1> A = <<3:2>>.
<<3:2>>
2> B = <<1:1>>.
<<1:1>>
3> C = <<15:4>>.
<<15:4>>
4> D = <<A/bitstring, B/bitstring, C/bitstring>>.
<<127:7>> 
```

# ruby-on-rails - 修改 Gem，然后确保它被重新加载？

> ID：10963360
> 
> 赞同：1
> 
> 时间：2012-06-09T18:06:44.610
> 
> 标签：ruby-on-rails, gem

我有一个 gem，我在其中修改了一些代码，但是当我捆绑安装或更新时，对 gem 的更改不会反映在我的应用程序中。有没有办法确保在我的应用程序中捕获并重新加载更改？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:34:20.927

您**永远不**应该直接在 gem 中更新代码。相反，请从以下选项之一中进行选择（从首选到次要）：

*   向 gem 维护者发送拉取请求
*   Monkey 修补应用程序中的 gem
*   分叉原始 gem 并维护您的副本。

如果您需要任何帮助，这是另一个讨论的主题，但请不要在 gem 本身中编辑代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:38:59.780

确保使用 bundle open 修改已安装的 gem。进行更改，保存，然后如果您的应用程序是本地的并且在标准开发模式下运行（无缓存），则更改将立即生效，更糟糕的情况是您可以重新启动您的应用程序并且它们将被拾取。如果没有，您没有对您的应用程序使用的 gem 进行更改。像这样的更改将在 bundle 安装后继续存在，因为 bundler 没有理由更新您的 gem。但是，如果您运行 bundle update 并且安装了修改后的 gem 的新版本，它将摆脱您的更改。一个好的方法是在 github 上 fork 原始 gem，进行更改并让您的应用程序指向您在 github 上的分叉副本。然后即使您部署应用程序，它也会找到并安装您修改后的代码。此外，如果改变对每个人都有用，

# android - 如何为gridView中的几个视图设置背景？

> ID：10963364
> 
> 赞同：0
> 
> 时间：2012-06-09T18:06:48.860
> 
> 标签：android, gridview

我正在编写一个具有gridView 的应用程序。这个 gridview 由几个 imageViews 组成。我可以为点击的项目设置背景。但我需要为几个项目设置背景。

以下代码对我没有帮助：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        for(int eachCoordinate: coordinates){
            gridview.getChildAt(eacheachCoordinate).setBackgroundResource(R.drawable.point);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T05:15:03.900

我找到了解决方案：我应该更改适配器资源，然后使 gridView 无效。

# c++ - 在 C++ 中将 .html 文件读入字符串

> ID：10963369
> 
> 赞同：-1
> 
> 时间：2012-06-09T18:07:10.150
> 
> 标签：c++, visual-studio-2010, file

我正在寻找一些技巧，如何通过 HTTP 从远程服务器读取字符串并将其保存到字符串中。目前，我的目标是阅读第一个字符。

@edit：我已经做了什么：

我认为 curl 可能是实现这一目标的正确工具。

汇编：

```
1>------ Rebuild All started: Project: cURL, Configuration: Debug Win32 ------
1>  stdafx.cpp
1>  cURL.cpp
1>  cURL.vcxproj -> C:\Users\Lukasz\Documents\Visual Studio 2010\Projects\cURL\Debug\cURL.exe
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

但调试后：

```
The procedure entry point sasl_errdetail could not be located in the dynamic link library libsasl.dll 
```

我的主文件.cpp：

```
// cURL.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include <curl.h>
#include <cstdio>
#include <string>

std::string buffer;

size_t curl_write( void *ptr, size_t size, size_t nmemb, void *stream)
{
buffer.append((char*)ptr, size*nmemb);
return size*nmemb;
}

int main(int argc, char **argv)
{
CURL *curl = curl_easy_init();
curl_easy_setopt(curl, CURLOPT_URL, "http://google.com"); 
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, curl_write);
curl_easy_perform(curl);
curl_easy_cleanup(curl);
fwrite( buffer.c_str(), buffer.length(), sizeof(char), stdout);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:59:26.937

我有同样的问题！

从 dlldll.com 下载 libsasl.dll 并得到相同的错误。我以为他们有旧版本的 dll，所以我下载了新版本，它就像一个魅力。

我从来没有从[http://theetrain.ca/tech/files/libsasl.dll得到版本](http://theetrain.ca/tech/files/libsasl.dll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:31:55.463

1.  打开文件。
2.  使用 fgetc 或 istream::read 函数。
3.  将字符转换为正确的布尔值。
4.  关闭文件。

HTML 文件可以像文本文件一样读取。

解析 HTML 文件是另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:35:33.843

只需在服务器/客户端设置中接收 html，您就需要连接到套接字并处理来自套接字的消息。

这是一个在 Windows 上引入 Sockets 的好例子：

[为初学者编写 C++ 中的 Windows TCP 套接字](http://www.codeproject.com/Articles/13071/Programming-Windows-TCP-Sockets-in-C-for-the-Begin)

如果您想完全避免学习套接字并真正很好地控制正在发生的事情，您可以只使用各种 URL 下载器：

[下载 C 中的 URL](https://stackoverflow.com/questions/1129194/download-a-url-in-c)

但是，如果您需要速度胜过其他任何事情，使用[URLOpenStream](http://msdn.microsoft.com/en-us/library/ms775129%28v=vs.85%29)可能会给您最快的结果。

因此，在您拥有一个接收 html 文本的套接字之后，您就可以解析 html 并将找到的内容转换为适当的变量。

# android - android dlavikvm-在 XZ 压缩时堆出 ot 内存分配

> ID：10963370
> 
> 赞同：2
> 
> 时间：2012-06-09T18:07:19.547
> 
> 标签：android, compression, out-of-memory, xz, apache-commons-compress

我正在尝试在 API 2.3.3 上将 tar 压缩为 tar.xz。

无论我做什么，我都会收到此错误：

```
06-09 20:56:32.230: V/CameraDemo(23418): filesPath -- > /mnt/sdcard/myimages
06-09 20:56:32.336: D/dalvikvm(23418): GC_FOR_ALLOC freed 75K, 2% free 9193K/9347K, paused 14ms
06-09 20:56:32.363: I/dalvikvm-heap(23418): Grow heap (frag case) to 21.304MB for 12853537-byte allocation
06-09 20:56:32.390: D/dalvikvm(23418): GC_CONCURRENT freed 1K, 1% free 21744K/21959K, paused 1ms+2ms
06-09 20:56:32.410: D/dalvikvm(23418): GC_FOR_ALLOC freed 1K, 2% free 22005K/22279K, paused 17ms
06-09 20:56:32.476: I/dalvikvm-heap(23418): Grow heap (frag case) to 37.558MB for 16777232-byte allocation
06-09 20:56:32.480: W/dalvikvm(23418): 67108888 byte allocation exceeds the 50331648 byte maximum heap size
06-09 20:56:32.480: I/dalvikvm-heap(23418): Forcing collection of SoftReferences for 67108888-byte allocation
06-09 20:56:32.508: D/dalvikvm(23418): GC_BEFORE_OOM freed 9K, 1% free 38380K/38727K, paused 25ms
06-09 20:56:32.508: E/dalvikvm-heap(23418): Out of memory on a 67108888-byte allocation.
06-09 20:56:32.508: I/dalvikvm(23418): "main" prio=5 tid=1 RUNNABLE
06-09 20:56:32.508: I/dalvikvm(23418):   | group="main" sCount=0 dsCount=0 obj=0x40a53460 self=0xa14828
06-09 20:56:32.508: I/dalvikvm(23418):   | sysTid=23418 nice=0 sched=0/0 cgrp=default handle=1074758792
06-09 20:56:32.508: I/dalvikvm(23418):   | schedstat=( 0 0 0 ) utm=17 stm=8 core=0
06-09 20:56:32.508: I/dalvikvm(23418):   at org.tukaani.xz.lz.BT4.<init>((null):~-1)
06-09 20:56:32.508: I/dalvikvm(23418):   at org.tukaani.xz.lz.LZEncoder.getInstance((null):-1)
06-09 20:56:32.508: I/dalvikvm(23418):   at org.tukaani.xz.lzma.LZMAEncoderNormal.<init>((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.lzma.LZMAEncoder.getInstance((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.LZMA2OutputStream.<init>((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.LZMA2Options.getOutputStream((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.LZMA2Encoder.getOutputStream((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.BlockOutputStream.<init>((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.tukaani.xz.XZOutputStream.write((null):-1)
06-09 20:56:32.511: I/dalvikvm(23418):   at org.apache.commons.compress.compressors.xz.XZCompressorOutputStream.write(XZCompressorOutputStream.java:71)
06-09 20:56:32.511: I/dalvikvm(23418):   at utilities.CompressTar.compXZ(CompressTar.java:127)
06-09 20:56:32.511: I/dalvikvm(23418):   at utilities.CompressTar.<init>(CompressTar.java:52)
06-09 20:56:32.511: I/dalvikvm(23418):   at com.jadeye.CameraActivity$4.onClick(CameraActivity.java:101)
06-09 20:56:32.519: I/dalvikvm(23418):   at android.view.View.performClick(View.java:3511)
06-09 20:56:32.523: I/dalvikvm(23418):   at android.view.View$PerformClick.run(View.java:14105)
06-09 20:56:32.523: I/dalvikvm(23418):   at android.os.Handler.handleCallback(Handler.java:605)
06-09 20:56:32.523: I/dalvikvm(23418):   at android.os.Handler.dispatchMessage(Handler.java:92)
06-09 20:56:32.523: I/dalvikvm(23418):   at android.os.Looper.loop(Looper.java:137)
06-09 20:56:32.523: I/dalvikvm(23418):   at android.app.ActivityThread.main(ActivityThread.java:4424)
06-09 20:56:32.523: I/dalvikvm(23418):   at java.lang.reflect.Method.invokeNative(Native Method)
06-09 20:56:32.523: I/dalvikvm(23418):   at java.lang.reflect.Method.invoke(Method.java:511)
06-09 20:56:32.523: I/dalvikvm(23418):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-09 20:56:32.523: I/dalvikvm(23418):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-09 20:56:32.523: I/dalvikvm(23418):   at dalvik.system.NativeStart.main(Native Method)
06-09 20:56:32.527: D/AndroidRuntime(23418): Shutting down VM
06-09 20:56:32.527: W/dalvikvm(23418): threadid=1: thread exiting with uncaught exception (group=0x40a521f8)
06-09 20:56:32.539: E/AndroidRuntime(23418): FATAL EXCEPTION: main
06-09 20:56:32.539: E/AndroidRuntime(23418): java.lang.OutOfMemoryError
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.lz.BT4.<init>(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.lz.LZEncoder.getInstance(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.lzma.LZMAEncoderNormal.<init>(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.lzma.LZMAEncoder.getInstance(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.LZMA2OutputStream.<init>(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.LZMA2Options.getOutputStream(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.LZMA2Encoder.getOutputStream(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.BlockOutputStream.<init>(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.tukaani.xz.XZOutputStream.write(Unknown Source)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at org.apache.commons.compress.compressors.xz.XZCompressorOutputStream.write(XZCompressorOutputStream.java:71)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at utilities.CompressTar.compXZ(CompressTar.java:127)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at utilities.CompressTar.<init>(CompressTar.java:52)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at com.jadeye.CameraActivity$4.onClick(CameraActivity.java:101)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.view.View.performClick(View.java:3511)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.view.View$PerformClick.run(View.java:14105)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.os.Handler.handleCallback(Handler.java:605)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.os.Looper.loop(Looper.java:137)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at java.lang.reflect.Method.invokeNative(Native Method)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at java.lang.reflect.Method.invoke(Method.java:511)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-09 20:56:32.539: E/AndroidRuntime(23418):    at dalvik.system.NativeStart.main(Native Method) 
```

这是导致它的代码：

```
 public void compXZ (String saveAs, String infile) throws IOException {

    FileInputStream fin = new FileInputStream(infile);
    BufferedInputStream in = new BufferedInputStream(fin);
    FileOutputStream out = new FileOutputStream(saveAs);
    XZCompressorOutputStream xzOut = new XZCompressorOutputStream(out);
    final byte[] buffer = new byte[BUFFER];
    int n = 0;
    while (-1 != (n = in.read(buffer))) {
        xzOut.write(buffer, 0, n);
    }

    xzOut.finish();
    xzOut.close();
    fin.close();
} 
```

我已经制作了几个不同的版本，但它们都产生相同的错误。我确实在我的应用程序中加载了一个图片库，但尝试在不加载画廊的情况下进行压缩，它产生的效果相同。

有没有人知道问题是什么？解决方案是什么？或者也许是将tar压缩为tar.xz的代码？

谢谢你的帮助。

玉眼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:29:24.137

您正在使用的 XZ 压缩尝试分配 67 MB 的内存。对于大多数移动设备来说，这太过分了。

我对 XZ 压缩和 XZ utils 实现不太了解，但似乎这种压缩算法需要大量内存，并不真正适合在当今的移动设备上使用。

# c# - IDictionary vs Hashtable -

> ID：10963374
> 
> 赞同：1
> 
> 时间：2012-06-09T18:07:35.940
> 
> 标签：c#, .net, entity-framework

很多消息来源都在谈论这个问题，但我不太了解这个概念。IDictionary 是通用的，它的类型安全等。

当我深入研究 EntityFrameworkv5 时，我看到一个在 LogEntry 类中声明如下的属性。

```
private IDictionary<string, object> extendedProperties; 
```

问题是为什么他们更喜欢 IDictionary 而不是 Hashtable，因此 Hashtable 也将键作为字符串和对象。唯一的原因是通过选择 IDictionary 使属性多态？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:12:11.517

如今，使用`Hashtable`. `Dictionary<>`在大多数方面都比它好。如果不是，您通常可以找到另一个比任何一个都更好地满足您的目的的强类型集合。

*   类型安全。
*   没有装箱和拆箱的严重开销。
*   实现`IDictionary<>`，与 .NET 和 3rd 方代码非常兼容。
*   `Hashtable`在许多方面表现得更好。见链接： [链接#1](http://blog.bodurov.com/Performance-SortedList-SortedDictionary-Dictionary-Hashtable)，[链接#2](http://www.technolatte.net/2011/07/dictionary-and-hashtable-benchmarking.html)。

如果您要问为什么键入属性`IDictionary<>`而不是`Dictionary<>`，这是有几个原因的。

*   通常认为最好的做法是尽可能频繁地使用接口，而不是常规类型，尤其是在框架中。
*   可以相当容易地更改接口的实现，但是很难更改具体类的性质而不引起与相关代码的兼容性问题。
*   使用接口，您可以利用[Covariance 和 Contravariance](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.asp)。
*   `IDictionary<>`与具体类相比，外部代码更可能使用更通用的接口`Dictionary<>`。因此，使用`IDictionary<>`它可以让其他开发人员更好地与该属性进行交互。
*   可能还有很多。这些只是我的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:17:33.137

是的，如果他们将扩展属性定义为返回哈希表，那么他们将一直坚持下去，除非他们想破坏所有使用扩展属性的代码。

返回一个接口的重点是，只要它继续这样做，方法是如何实现的并不重要。

“唯一的原因是使属性多态”没有抓住重点，你不应该这样做的理由应该很少。如果您可以返回一个接口，请务必返回一个接口，大多数情况下这是好的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:02:22.353

因此，这里的大多数答案都是关于将 Dictionary 与 Hashtable 进行比较的一般目的，而不是他们选择该特定实现的原因。

在那个特定的实现中，你是对的，它使用对象作为返回类型，所以字典的强类型优势不可用。

IMO 归结为 New vs Old、ArrayList、Hashtable 等是较旧的技术，并且通常在很大程度上不受欢迎，因为它们没有许多功能（在其他答案中描述）。尽管在这种特殊情况下没有使用这些功能，但切换回旧技术并没有很大的好处，它为个人发展提供了一个更好的例子。

所以这更像是“这就是我们现在做的方式”的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:29:20.457

HashTable 是弱类型的，只能返回 Object。Dictionary<> 对于您存储在其中的任何类型都是强类型的。

# iphone - 如何在 Objective-C 中更改 CAShapeLayer 相交部分的颜色？

> ID：10963380
> 
> 赞同：2
> 
> 时间：2012-06-09T18:08:35.783
> 
> 标签：iphone, objective-c, ios, graphics, cashapelayer

我正在尝试使用 CAShapeLayer 绘制 CGPath。我想改变线条相交部分的颜色。

以下屏幕截图更容易解释目标。

[http://a5.mzstatic.com/us/r1000/046/Purple/a3/9b/29/mzl.pocvbqdb.320x480-75.jpg](http://a5.mzstatic.com/us/r1000/046/Purple/a3/9b/29/mzl.pocvbqdb.320x480-75.jpg)

[http://a3.mzstatic.com/us/r1000/037/Purple/1d/54/44/mzl.dpijulvx.320x480-75.jpg](http://a3.mzstatic.com/us/r1000/037/Purple/1d/54/44/mzl.dpijulvx.320x480-75.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:17:02.247

检查`@Alex Nichol`这篇文章的答案，[如何确定 CGPaths 的交集](https://stackoverflow.com/questions/6757517/how-to-determine-intersection-of-cgpaths)。

他开发了一个 CGPath 碰撞检测的开源解决方案，以及一个在 Action 中展示它的 youtube 视频。

希望这可以帮助 ！

# javascript - case、setinterval 并仅列出选定的数组

> ID：10963383
> 
> 赞同：-2
> 
> 时间：2012-06-09T18:08:44.897
> 
> 标签：javascript, while-loop, setinterval

我正在尝试制作间隔功能，它将每 10 秒更改一次选定的 div。当我在第一页时，我希望它显示第一个数组中的项目，当我在第二页时，我想要数组 2，等等。这是我到目前为止得到的：

```
var timedFunc = '';
var index= new Array(20)
index[0]="index1";
index[1]="index2.";
..

var indextwo= new Array(20)
indextwo[0]="index1";
indextwo[1]="index2";

var tmp = 0;
function display_index(nameofarray) {
if (tmp < 0) { tmp = nameofarray.length-1; }
if (tmp > nameofarray.length-1) { return false; }
document.getElementById('robot').innerHTML = nameofarray[tmp];
tmp = tmp + 1;
}
function indexInterval(m) {
  switch(m) {
    case 1: timeFunc = setInterval("display_index(index)",1000);
    case 2: timeFunc = setInterval("display_index(indextwo)",1000);
    case 3: timeFunc = setInterval("display_index(indexthree)",1000);
    case 4: timeFunc = setInterval("display_index(indexfour)",1000);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:34:46.937

要在间隔计时器上循环遍历数组，可以将所需的数组传递给函数，然后使用该函数在间隔计时器上循环遍历数组，如下所示：

```
var index0 = ["text1", "text2", "text3"];
var index1 = ["text1", "text2", "text3"];

function startMyInterval(array) {
    var index = 0;
    var item = document.getElementById('robot');
    setInterval(function() {
        // if we reached the end of the array, start back at beginning
        if (index >= array.length) {
            index = 0;
        }
        item.innerHTML = array[index]; 
        ++index;
    }, 10000);
}

// figure out which array of text values you want to use
// for this particular page index0 or index1
// and pass that array to startMyInterval()
startMyInterval(x); 
```

这种类型的实现避免了该`switch`语句并避免将文本传递给`setInterval()`. 它还使用函数闭包来跟踪`setInterval()`回调所需的状态。

# jquery - 如何在日视图和周视图中修改开始和结束时间？

> ID：10963388
> 
> 赞同：1
> 
> 时间：2012-06-09T18:09:19.620
> 
> 标签：jquery, fullcalendar

是否可以在日视图和周视图中修改开始和结束时间？

目前，它从上午 12:00 开始，到晚上 11:00 结束。

是否可以更改参数中的开始时间和结束时间？

例如，从上午 08:00 开始到下午 18:00 结束，在我的情况下它会节省一些高度并显示工作时间的时间表。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:48:55.430

您可以使用`agendaDay`and`agendaWeek`视图代替`basicDay`and `basicWeek`。在议程视图中，您可以使用该`firstTime`选项设置开始时间。此外，您可以使用`minTime`和`maxTime`选项控制可见的时间段。

查看[FullCalendar 文档](http://arshaw.com/fullcalendar/docs/agenda/)中的议程选项- 它详细解释了这一点！

# .net - System.Security.SecurityException - 既不涉及 ASP.NET 也不涉及 IE

> ID：10963394
> 
> 赞同：0
> 
> 时间：2012-06-09T18:10:22.900
> 
> 标签：.net, securityexception

明白啦：

> System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。（在 System.Security.CodeAccessSecurityEngine.Check（对象需求，StackCrawlMark& stackMark，布尔 isPermSet）......

网络上有很多与此问题相关的参考资料，但它们都指的是 ASP.NET 应用程序，或者它们与使其以某种方式“非法”进入 GAC 的程序集有关——这不是我的问题。

我有一个本地驱动器 D:\，其中包含：

```
D:\APLData\T

D:\APLData\I

D:\APLData\M

D:\APLData\P

D:\APLData\Z 
```

有时我有网络驱动器 T、I、M、P 和 Z 指向这些文件夹。换句话说，这两个路径都指向同一个文件：

```
D:\AplData\T\FlipDB_Dev\Test\ShareTest.DWS

T:\FlipDB_Dev\Test\ShareTest.DWS 
```

现在，当我从网络驱动器（T）启动有问题的程序时，我得到了错误。当我从本地驱动器（D）启动程序时，它就可以工作了。

任何想法如何解决这个问题？

凯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:26:51.830

映射的驱动器特定于用户。如果您有权限并且您正在运行该应用程序，那么它应该可以工作，如果这是不同的帐户，那么您都需要权限并且相同的驱动器映射到相同的位置。为自己省点心痛并使用 UNC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:17:23.250

您是否检查了文件/文件夹的权限。特别是当链接到 LAN 共享上的文件时，ASP.NET 不会自动获得访问这些文件的权限，因为权限是在物理托管文件的机器上设置的。

您可以尝试的一件事是为用户组“Everyone”设置完全权限，但是，一旦您找到正确的权限级别，请不要忘记删除该权限。

更新：检查此链接，可能会派上用场

[http://www.codeproject.com/Articles/19830/How-to-Access-Network-Files-using-asp-net](http://www.codeproject.com/Articles/19830/How-to-Access-Network-Files-using-asp-net)

# mysql - 使用 rails 选择什么数据库。大数据库

> ID：10963395
> 
> 赞同：1
> 
> 时间：2012-06-09T18:10:23.660
> 
> 标签：mysql, ruby-on-rails, database, optimization

我正在使用非常大的数据库，一些表有超过 30.000.000 个条目，现在我正在使用 mysql，但是对于某些搜索查询，我必须等待超过 1-2 分钟。有什么提高速度的方法吗？另外，没有其他数据库会更快吗？另外，在rails中使用什么？现在我使用简单的%like%，还有其他方法可以通过某个字段进行搜索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T17:41:04.330

用于具有那么多行`%LIKE%`的全文搜索不会产生性能。我强烈推荐使用像[Sphinx](http://sphinxsearch.com/)和优秀的[ThinkingSphinx](http://freelancing-god.github.com/ts/en/) gem 这样的东西。它与 MySQL 和 Rails/ActiveRecord 开箱即用，配置简单。

[本](http://freelancing-god.github.com/ts/en/installing_sphinx.html)指南描述了如何将 Sphinx 搜索守护程序安装到特定平台上。

[本](http://freelancing-god.github.com/ts/en/installing_thinking_sphinx.html)指南描述了如何安装和使用`thinking-sphinx`gem。（请注意，Rails 2 和 3 有不同的安装指南，因此请确保您遵循正确的安装指南）。

安装后，您可以在您有兴趣搜索的模型的列上定义索引。

Ryan Bates用 ThinkingSphinx 做了一个关于全文搜索的[Railscasts 插曲，这是一个很好的开始方式。](http://railscasts.com/episodes/120-thinking-sphinx)

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:17:52.647

如果您想坚持使用 mysql，请使用 myisam。

想出一个智能创建索引的策略。

战略性地预先计算复杂的结果。

只返回您需要的数据。

将数据库的部分非规范化以增加性能。

使用许多从站读取

将数据库拆分为多个数据库

您将需要进行很多测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:19:59.143

根据 %like%

我遇到了类似的情况，我使用 LIKE 通配符搜索一张大桌子，时间为 3、4 分钟。我能够通过索引列并使用 MATCH() 来解决一些问题，如果您需要准确性，这可能不适用于您的情况。

参考 [http://dev.mysql.com/doc/refman//5.5/en/fulltext-search.html](http://dev.mysql.com/doc/refman//5.5/en/fulltext-search.html)

> 注意：我使用搜索和匹配的组合，您可以在这里查看[http://anotherfeed.com/feedmap.php?search=facebook](http://anotherfeed.com/feedmap.php?search=facebook)前 50 个结果返回 LIKE，最后 50 个返回 MATCH 并显示 php mysql 的索引分数。前 50 个总是更准确，因为我只是索引标题而不是完整描述。

```
$query2="SELECT *, MATCH(pagename) AGAINST('".urldecode($_REQUEST['search'])."') AS score FROM anotherfeedv3.af_freefeed WHERE MATCH(pagename) AGAINST('".urldecode($_REQUEST['search'])."') LIMIT $start, $limit"; 
```

# django-1.4 - 在 Django 1.4 中同步数据库时出错

> ID：10963401
> 
> 赞同：0
> 
> 时间：2012-06-09T18:11:00.903
> 
> 标签：django-1.4

我刚开始使用 Django 1.4，在执行运行 syncdb 时遇到问题。

1.  执行了以下操作：

    mynane@mynane:~/djsamplecode$ django-admin.py startproject mysite

    mynane@mynane:~/djsamplecode$ ls mysite

    manage.py mysite mynane@mynane:~/djsamplecode$ cd mysite/

    mynane@mynane:~/djsamplecode/mysite$ ls

    manage.py mysite

    mynane@mynane:~/djsamplecode/mysite$ cd mysite/

    mynane@mynane:~/djsamplecode/mysite/mysite$ ls

    **初始化**.py settings.py urls.py wsgi.py

    mynane@mynane:~/djsamplecode/mysite/mysite

    mynane@mynane:~/djsamplecode/mysite$ python manage.py startapp blog

    mynane@mynane:~/djsamplecode/mysite$ ls blog/

    **初始化**.py 模型.py 测试.py 视图.py

根据 django 1.4 文档，这是预期的：

在 settings.py 中添加了我的应用程序“博客”的名称：

```
INSTALLED_APPS = (
    'mysite.blog', 
```

修改 mysite/blog/models.py 并执行

python manage.py syncdb 并得到以下错误：

```
myname@myname:~/djsamplecode/mysite/blog$ python ../manage.py  syncdb
Error: No module named blog 
```

如果我将 settings.py 修改为

```
INSTALLED_APPS = (
    'blog' 
```

它工作正常。有人能帮我理解 Django1.4 中的目录结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:44:24.703

您的应用程序可以放置在其中的任何位置`PYTHONPATH`，然后您可以将 appnameme 添加`blog`到您的`INSTALLED_APPS`. 此外，将您的应用程序放在项目目录之外（在 内）也不是一个坏主意，`PYTHONPATH`以使它们更可重用。

# ruby - 如何读取 100 个块的单词列表？

> ID：10963408
> 
> 赞同：0
> 
> 时间：2012-06-09T18:12:00.400
> 
> 标签：ruby, file-io, jruby

我想从文件中读取 100 个单词，然后处理它们。

我可以添加额外的计数器等，但是在执行此操作的 IO 库中是否有内置命令。我找不到它

```
 require 'pp'
arr = []
i = 0
f=File.open("/home/pboob/Features/KB/178/synthetic/dataCreation/uniqEnglish.out").each(" ") { |word|
  i=i+1
  arr << word
  if i==100
    pp arr
    arr.clear
    i=0
  end
}
pp arr 
```

谢谢！

PS：文件太大，内存放不下，所以我将不得不使用“.each”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:38:13.610

> 该文件太大而无法放入内存，所以我将不得不使用“.each”

比`each`, 懒惰与[enumerable-lazy](https://github.com/yhara/enumerable-lazy)更好：

```
require 'enumerable/lazy'
result = open('/tmp/foo').lines.lazy.map(&:chomp).each_slice(100).map do |group_of_words|
  # f(groups_of words)
end 
```

更多关于函数式编程和懒惰[的信息](http://code.google.com/p/tokland/w/edit/RubyFunctionalProgramming)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:25:16.213

假设每行一个单词，并且能够将整个文件吞入内存：

```
IO.readlines('/tmp/foo').map(&:chomp).each_slice(100).to_a 
```

如果您受内存限制，那么您可以通过仅指定块大小来对块进行交互；无需柜台！

```
File.open('/tmp/foo') do |f|
  chunk = []
  f.each do |line|
    chunk.push(line)
    next unless f.eof? or chunk.size == 100
    puts chunk.inspect
    chunk.clear
  end
end 
```

这非常冗长，尽管它确实清楚地说明了分块发生了什么。如果您不介意不那么明确，您仍然可以使用带枚举器的切片：

```
File.open('/tmp/foo').lines.map(&:chomp).each_slice(100) {|words| p words} 
```

并用您想要对每个块执行的任何处理替换该块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:02:52.463

实际上，我相信“each_slice”的实现对于您的目的来说已经足够懒惰了。尝试这个：

```
open('tmp/foo').lines.each_slice(100) do |lines|
  lines = lines.collect &:chomp   # optional
  # do something with lines
end 
```

不像 tokland 的解决方案那样优雅，但它避免了向您的应用程序添加额外的依赖项，这总是很好。

我认为这可能对你有用： [http ://blog.davidegrayson.com/2012/03/ruby-enumerable-module.html](http://blog.davidegrayson.com/2012/03/ruby-enumerable-module.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T01:34:02.140

也许这样做更简单：

```
File.open(filename) do |file|
  do_things(100.times.map{file.gets ' '}) until file.eof?
end 
```

# c# - RibbonWindow 在加载时淡入显示为黑色

> ID：10963412
> 
> 赞同：0
> 
> 时间：2012-06-09T18:12:29.397
> 
> 标签：c#, wpf, xaml, animation, storyboard

我试图在加载 RibbonWindow 时显示淡入动画。

这是我所做的：

```
<ribbon:RibbonWindow.Resources>
    <Storyboard x:Key="FadeInOnLoad">
        <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:2" FillBehavior="HoldEnd" >
            <DoubleAnimation.EasingFunction>
                <QuinticEase EasingMode="EaseIn"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>
</ribbon:RibbonWindow.Resources>
<ribbon:RibbonWindow.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource FadeInOnLoad}"/>
    </EventTrigger>
</ribbon:RibbonWindow.Triggers> 
```

但是，RibbonWindow 并没有从透明开始，而是显示为黑色并逐渐淡入。

什么可能导致这种行为，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:05:48.320

问题是您的 Window 不支持透明度。您可以`AllowsTransparency="True"`在 Window 标签上设置属性。但是，为了设置该属性，您还需要设置`WindowStyle="None"`，否则会出现错误`WindowStyle.None is the only valid value for WindowStyle when AllowsTransparency is true.`

一旦你设置了这两个属性，你的窗口就会很好地淡入，并且不再是黑色的。但是，窗口将没有边框，因为`WindowStyle`设置为`None`. 它看起来像这样： ![没有边框的窗口](../Images/35e4cc8e6a1f1baf39f799bd38c4c69f.png)

此外，在情节提要完成后，您将无法在代码中更改 WindowStyle，因为您将收到以下错误：`Cannot change AllowsTransparency after a Window has been shown or WindowInteropHelper.EnsureHandle has been called.`

所以，你有两个选择：（如果你想要主窗口的淡入效果）

*   为窗口制作自己的样式。它看起来不像一个常规窗口，您需要指定它的边框，为其创建最小化/最大化/关闭按钮等。
*   淡入窗口，动画完成后，在淡入窗口的顶部创建另一个相同的窗口。第二个窗口不会淡入，但看起来与第一个窗口完全一样。在第一个窗口的顶部显示第二个窗口后，您可以关闭第一个窗口。

此外，这是一个不需要在主窗口中淡入淡出的替代方法：

*   为您的应用制作启动画面。您可以使用内置的 WPF 启动画面，或使用`AllowsTransparency="True"`和创建一个常规窗口`WindowStyle="None"`。您可以淡入（和淡出）该初始屏幕，然后在不淡入的情况下显示您的主窗口。

# mysql - mysql最小整数

> ID：10963421
> 
> 赞同：1
> 
> 时间：2012-06-09T18:15:18.067
> 
> 标签：mysql, int, minimum

我有这个查询

```
UPDATE table SET this = this-20 WHERE this >= 0 
```

我不希望`this`字段低于 0。我可以在此查询中添加一些附加内容以确保这一点，而无需运行另一个查询？

例如，如果这是 18，那么它将被设置为 -2

（使用 MYSQL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:18:20.400

您可以使用*Greatest*功能：

```
UPDATE table SET this = greatest(0,this-20) WHERE this >= 0 
```

考虑到**this - 20**和**0** ，基本上将 this 的值设置为更大的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:26:00.933

将您的条件更改为`WHERE (this - 20) >= 0`。并创建一个检查约束：`ALTER TABLE [table] ADD CONSTRAINT ThisGreaterThanZero CHECK (this >= 0)`.

# gtk - 当有这样的道具时，为什么vala会抱怨丢失的财产

> ID：10963425
> 
> 赞同：1
> 
> 时间：2012-06-09T18:15:32.500
> 
> 标签：gtk, vala, gobject

我正在使用 gtk 3 和 vala 开发一个 GUI 应用程序。这是我来自 MainWindow::MainWindow() 的源代码

```
 var menu = new MenuModel();
    var app = this.application;
    app.menubar = menu; 
```

valac 给出了这个错误：

```
ewns_viewer.vala:54.9-54.19: error: The name `menubar' does not exist in the context of `Gtk.Application'
        app.menubar = menu;
        ^^^^^^^^^^^ 
```

看着[这个](http://www.valadoc.org/#!api=gtk+-3.0/Gtk.Application)，说别的。我也试过

```
var obj_class = (ObjectClass) typeof (Gtk.Application).class_ref ();
var properties = obj_class.list_properties ();
foreach (var prop in properties) 
{
    stdout.printf ("%s\n", prop.name);
} 
```

这给出了这个输出：

```
application-id
flags
is-registered
is-remote
inactivity-timeout
action-group
register-session
app-menu
menubar 
```

如果我做对了 Gtk.Application 具有所有这些属性，那么为什么 valac 会给我这个错误？

我正在使用 valac 0.14.2.Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:46:14.737

Ubuntu 上 Vala 0.14的绑定`/usr/share/vala-0.14/vapi/gtk+-3.0.vapi`已过期。如果您安装 Vala 0.16，此绑定将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T22:23:47.250

该属性是在 vala 0.15.1 中添加的。您正在使用 6 个月大的 vala 版本。最新版本是一周前发布的 0.17.1。

# javascript - 使用 .filter() 的萤火虫空错误

> ID：10963428
> 
> 赞同：0
> 
> 时间：2012-06-09T18:16:05.543
> 
> 标签：javascript, jquery, filter, firebug

嗨，我想过滤所有`ul li`包含跨度的项目，其中包含一个类和一个希望`.text()`以这种方式隐藏的值：

```
/* string is something like 'somefilename.png'*/
    $('.qq-upload-file li').filter(function() {
        return $(this).find('.qq-upload-file').text() == string;
    }).fadeout(); 
```

但是萤火虫在执行时记录了这个错误：

```
$(
[Parar en este error]   

$('.qq-upload-file li').filter(function() { 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:28:53.697

替换`.fadeout()`为`.fadeOut()`- 大小写很重要。

# c# - 如何修改 IEnumerable 在 foreach 循环期间阻止的元素

> ID：10963436
> 
> 赞同：-2
> 
> 时间：2012-06-09T18:17:07.503
> 
> 标签：c#, .net, clr

众所周知，在 C# 中迭代​​某些 IEnumerable 时，不能对可枚举集合的元素进行任何修改：

```
// Illegal code
foreach (Employee e in employeeList)
{
     e.Salary = 1000000;
} 
```

我想知道运行时或枚举器本身是如何强制执行的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T18:26:22.143

我认为你误解了限制。您发布的代码是完全合法的，事实上，如果不是这样，那么`foreach`循环将毫无用处。

不允许在循环中间更改*序列：*`foreach`

```
foreach ( Employee e in employeeList )
{
  if ( e.Salary > 10000000 ) 
  {
    employeeList.Remove(e);
  }
} 
```

此代码`InvalidOperationException`在运行时抛出一个：当它检测到底层集合在调用之间发生变化时，实现`MoveNext`中的调用将抛出。`IEnumerator`这是实现枚举器对象的要求——每个实现都`IEnumerable`必须自己处理这种可能性。请注意，某些集合（来自 .NET 4.0 的新并发集合）明确不强制执行此限制，因此上面的代码将是合法的`employeeList`，例如 a `ConcurrentDictionary`. 有关详细信息，请参阅[此博客文章](http://www.lovethedot.net/2009/03/interesting-side-effect-of-concurrency.html)。

给循环控制变量*赋值*也是不合法的，例如：

```
foreach ( Employee e in employeeList )
{
  if ( e.Salary > 10000000 ) 
  {
    e = new Employee { Salary = 999999 };
  }
} 
```

不允许这样做的原因是因为它没有多大意义，而且几乎可以肯定是一个错误；有关详细信息，请参阅此答案：[为什么 C# foreach 语句中的迭代变量是只读的？](https://stackoverflow.com/questions/776430/why-is-the-iteration-variable-in-a-c-sharp-foreach-statement-read-only)

请注意，这并不是试图改变*序列中*的元素——它只是试图改变用作循环控制变量的局部变量的值。此外，这不是由枚举器*或*运行时强制执行的。这是一个编译时错误，由 C# 编译器强制执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:26:13.343

你所说的并不完全正确。这段代码是完全合法的。

```
foreach (Employee e in employeeList){
     e.Salary = 1000000;
} 
```

然而，这不是。

```
foreach (Employee e in employeeList){
     e = new Employee();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T18:26:56.480

该限制（如其他答案中所述，您的代码没有违反）由枚举器强制执行 - 如果它选择这样做的话。我相信一些内置集合，例如`List<T>`保留一个内部版本号，当集合更改时更新，并在每次迭代时检查。

其他一些类，例如*不*检查这一点，而是在集合更改时围绕枚举数的行为做出其他保证，无论是否在同一个线程中。[`ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)

# node.js - NodeJS APN 模块在 Ubuntu 上找不到证书文件

> ID：10963441
> 
> 赞同：1
> 
> 时间：2012-06-09T18:17:35.483
> 
> 标签：node.js, ubuntu, ssl, apple-push-notifications

我正在使用 apn 模块（https://github.com/argon/node-apn）从 NodeJS 向 iPhone 发送推送通知。

我的代码在我的开发机器 (Mac OSX) 上运行良好，并且通过 Apple 沙箱网关 (gateway.sandbox.push.apple.com) 成功推送通知，但是当我将其移动到登台服务器（运行 Ubuntu）时，推送通知失败并显示以下消息：

```
 Error: ENOENT, no such file or directory 'apns-dev-cert.pem' 
```

我正在这样设置 NodeJS apn 对象：

```
var options = {
    cert: "apns-dev-cert.pem",          
    key:  "apns-key.pem",               
    passphrase: null,   
    gateway: "gateway.sandbox.push.apple.com",              
    port: 2195,                         
    enhanced: true,                     
    errorCallback: undefined,                       
    cacheLength: 5                                  
}; 
```

在我的开发 Mac OSX 机器上，证书安装在钥匙串中。根据我对 Ubuntu 的有限理解，相当于将证书文件复制到 /etc/ssl/certs。我尝试这样做，并在我的 NodeJS 代码中将路径更改为“/etc/ssl/certs/apn-dev-cert.pem”，但出现了相同的错误消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:07:48.850

我在这个问题上苦苦挣扎，直到我意识到我不了解`fs`模块如何读取文件。显然，它从您启动节点进程的目录中读取它们。因此，文件的路径`.pem`应该与您执行该操作的位置相关。

您可能也想[签出](http://nodejs.org/docs/latest/api/globals.html#globals_dirname) `__dirname`，这可能[更容易指定您的路径](https://stackoverflow.com/questions/8131344/what-is-the-difference-between-dirname-and-in-node-js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-09T04:09:51.307

您尝试设置如下：

```
var options = {
    //cert: "apns-dev-cert.pem",          
    //key:  "apns-key.pem",               
    pfx: '<path>/apns-key.pem',    
    passphrase: null,   
    gateway: "gateway.sandbox.push.apple.com",              
    port: 2195,                         
    enhanced: true,                     
    errorCallback: undefined,                       
    cacheLength: 5                                  
}; 
```

# objective-c - 可可窗口拖动

> ID：10963443
> 
> 赞同：2
> 
> 时间：2012-06-09T18:17:39.003
> 
> 标签：objective-c, macos, cocoa

我正在使用 addGlobalMonitorForEventsMatchingMask 来监听 Co​​coa 中的事件：

```
[NSEvent addGlobalMonitorForEventsMatchingMask:NSLeftMouseDraggedMask 
                                       handler:^(NSEvent *event) {
    NSLog(@"Dragged...");
}]; 
```

虽然我想知道我是否正在拖动/移动一个窗口（以及哪个窗口，我可以找到焦点窗口，但在按住命令并拖动窗口时，据我所知它并没有获得焦点。）

那么，我可以检测我是否在拖动窗口吗？

更新：

我现在有一个类：“ `SATest : NSObject <NSWindowDelegate>`”，我在其中实现了 windowDidMove 方法（稍后可能还有 windowWillMove。）不过，现在下一步是将其附加到一个窗口，对吗？所以我现在的问题是：如何将代理附加到所有应用程序的所有窗口？

更新 2：

我现在可以在屏幕上找到所有打开窗口的列表：

```
AXUIElementRef _systemWideElement;
_systemWideElement = AXUIElementCreateSystemWide();

CFArrayRef _windows;
AXUIElementCopyAttributeValues(_systemWideElement, kAXWindowsAttribute, 0, 100, &_windows); 
```

现在我必须遍历窗口，并且每个得到它的 NSWindow 以便我可以将我的委托添加到它：`[window setDelegate:self];`

更新3：要清楚，这个问题是关于检测所有应用程序的所有窗口的拖动。不仅是我自己的应用程序的窗口。

另外，我对这个事件和窗口管理的东西很陌生，所以不需要让你的答案简短我很高兴阅读了很多：P

谢谢！-P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:43:10.323

*要确定是否正在拖动窗口，您需要通过响应NSWindowDelegate*协议的以下消息来拥有一个充当窗口委托的对象：

1.  *windowWillMove* - 这告诉代理窗口即将移动。
2.  *windowDidMove* - 这告诉代理窗口已经移动。

*您可以通过将对象*发送到发送到这些方法的通知参数来检索有问题的 NSWindow 对象：

例如

```
NSWindow draggedWindow = [notification object]; 
```

更多信息可以在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html)找到。

**更新：**

为了响应您关于获取所有窗口的此信息的请求，[NSApplication](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html)类提供了一个方法，该方法返回应用程序拥有的所有窗口的数组。获取此信息的典型方法是使用[NSApplicationDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html)方法之一来获取对应用程序对象的引用。

例如，在您的应用委托（伪代码）中：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSApplication * app = [aNotification object];
    // you now have a reference to your application.
    // and can iterate over the collection of windows and call
    // [window setDelegate:self]; for each window.
} 
```

请注意，在添加和删除窗口时，您需要添加/删除您的代表。执行此操作的最佳方法是*– applicationDidUpdate:*。

这应该足以让您开始解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:59:18.800

正如 Benjamin 所建议的，答案在于可访问性 API。甚至在我问这个问题之前，我就在这方面环顾了一段时间，但从来没有让它做我想做的事。我现在找到了一个很好的解决方案。

在高层次上，我执行以下操作：

1.  聆听鼠标按下事件并记住您单击的窗口及其位置。
2.  侦听鼠标向上事件并检查位置是否已更改，如果是，您知道您移动了一个窗口

如果您还想知道是否调整了大小，您可以对大小执行类似的操作。可能有更好的解决方案，但经过几天的尝试，这是我让它按照我想要的方式工作的唯一方法。

希望这可以帮助任何正在寻找类似东西的人。

-巴勃罗

# datetime - 在 c++/cli 中减去两个 DateTime 对象

> ID：10963448
> 
> 赞同：0
> 
> 时间：2012-06-09T18:18:02.543
> 
> 标签：datetime, c++-cli

```
System::DateTime ^now = System::DateTime::Now;
System::DateTime ^now2 = System::DateTime::Now;
System::TimeSpan ^span = now->Subtract(now2); 
```

上面的代码得到编译器错误：

```
test.cpp(104) : error C2664: 'System::TimeSpan System::DateTime::Subtract(System::DateTime)' : cannot convert parameter 1 from 'System::DateTime ^' to 'System::DateTime'  
1>        No user-defined-conversion operator available, or  
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

now 和 now2 是 c++/cli 句柄，但该方法需要实际的对象。从 c++/cli 调用方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T18:21:54.840

`DateTime`并且`TimeSpan`是值类型。

```
System::DateTime now = System::DateTime::Now; 
System::DateTime now2 = System::DateTime::Now; 
System::TimeSpan span = now.Subtract(now2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T07:01:35.453

```
System::Diagnostics::Stopwatch^ stopwatch = gcnew System::Diagnostics::Stopwatch();
stopwatch->Start();
// code
stopwatch->Stop();
// stopwatch->Elapsed 
```

# php - 如果有 imageCreateFromString，为什么还有 imageCreateFrom*？

> ID：10963453
> 
> 赞同：15
> 
> 时间：2012-06-09T18:19:32.737
> 
> 标签：php, image, gd

我真的不明白为什么 GD 具有不同的加载图像的功能，例如：

```
imagecreatefromjpeg() 
imagecreatefrompng() 
imagecreatefromgif() 
```

如果图像是字符串，则只有一个函数？

```
imagecreatefromstring() 
```

事实上，将图像读入字符串并将其传递给函数要好得多，例如：

```
$imgBlob = file_get_contents($imagePath);
imagecreatefromstring($imageBlob);
unset($imgBlob);  //> Free memory, but I am not interested in memory consumpation 
```

? 或者我错过了什么？这可能会给新用户带来潜在的困惑

也许他们只是忘了创建一个函数`imageCreateFromFile()`？

**附言。**当然我对使用该`file_get_contents`方法的内存消耗不感兴趣

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-10T17:32:47.610

`imagecreatefromstring()`针对传递的图像类型运行开关，检查您的系统是否支持该图像类型，然后实际运行正确的`imagecreatefrom*`功能。

您可以查看源代码以查看：[https](https://github.com/php/php-src/blob/master/ext/gd/gd.c?source=cc) ://github.com/php/php-src/blob/master/ext/gd/gd.c?source= cc（函数的第 2280 行，第 2301 行，其中它打开图像类型并调用正确的函数）。

因此，该`imagecreatefromstring()`函数实际上只是一个辅助包装器。`_php_image_type`如果您调用实际的图像类型函数，您将从不运行（第 2217 行）中获得非常小的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T19:02:41.930

```
imagecreatefromjpeg() 
imagecreatefrompng() 
imagecreatefromgif() 
```

从文件创建图像资源 - 您将文件路径作为参数传递，这是唯一可接受的输入。

```
imagecreatefromstring() 
```

从字符串而不是文件创建图像资源 - 它几乎可以是任何东西，您甚至可以输入内容。例如，您可以使用

`imagecreatefromstring(base64_decode('R0lGODlhAQABAJAAAP8AAAAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw=='));`

获得 1x1 像素的透明 gif（用于跟踪 gif）

诚然，您可以将所有内容都通过`imagecreatefromstring`，但这不会提高内存效率 - 处理大图像会占用大量内存，并且内存限制较低，这会产生巨大的差异。

# c# - 在实体框架中使用地理和几何数据类型

> ID：10963457
> 
> 赞同：1
> 
> 时间：2012-06-09T18:19:52.890
> 
> 标签：c#, sql, sql-server, entity-framework, sql-server-2008-r2

我正在使用 C# 和 Entity Framework 4 开发一个新的 GIS 应用程序。我的数据库是在 SQL Server 2008 R2 中设计的。我想将地图对象位置（纬度、经度）保存在 SQL Server`geography`数据类型列中，并将路径数据保存在`geometry`数据类型列中。

如何在实体框架中使用这些列数据类型？

编辑 1： 中支持的特定字段`EF5`。但我的应用程序可能在 XP 中运行，而`EF5`不是在 Windows XP 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T22:19:42.780

现在，使用 EF6，.net 4 支持空间数据（[来源](http://msdn.microsoft.com/en-ca/data/dn194325.aspx)）。dot net framework 4 是 .net 的最后一个版本，可以安装在 Windows XP（仅限 SP3）上。

# c# - 这么多秒后如何调用方法？

> ID：10963465
> 
> 赞同：2
> 
> 时间：2012-06-09T18:21:01.177
> 
> 标签：c#

在我的项目中，我希望能够在 3 分钟后调用一个方法。没有“主循环”可言，所以我不能使用秒表并不断检查 3 分钟是否已经过去。我能想到的唯一其他解决方案是间隔为 3 分钟的 Timer 对象，但这似乎相当混乱，因为它只会在 3 分钟延迟后调用一次。

谢谢阅读。

编辑：忘了提。这是针对服务器应用程序的，因此我无法暂停线程的执行，因为同时必须处理其他内容。此外，这种计时器机制也不会孤单。一次可能有数百甚至数千个并发计时器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T18:22:49.097

我真的相信您对`Timer`对象的想法是正确的方法。听起来您很熟悉如何使用它 - 但这里有一个示例：

```
 aTimer = new System.Timers.Timer(1000 * 60 * 3);
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Enabled = true; 
```

[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:27:27.853

如果你有成百上千个这样的计时器，一些调度就可以完成这项工作。

你真的应该调查[quartznet](http://quartznet.sourceforge.net/)

许多并发计时器的性能不如我所经历的那样好，quartznet 会做。

如果你真的想在你的应用程序中拥有这些调度任务，也许这篇文章会给你一些想法[Task Scheduler Class Library for .NET](http://www.codeproject.com/Articles/2407/A-New-Task-Scheduler-Class-Library-for-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:27:12.360

使用计时器。

如果创建 1000 个计时器，虽然会有一点开销，但不会太多。计时器将完成他们的工作并在 3 分钟后触发一个事件。此外，如果您希望您的代码每 3 分钟重复一次，那么计时器是您的最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:27:26.353

计时器对于数百/数千人来说不是一个好的解决方案，因为计时器是一种有限的资源。

是否要从同一个应用程序调用所有方法？

如果是这样，我将创建一个包含日期时间和操作的小型存根类，并将委托与目标时间一起添加到要调用的方法中。然后在后台线程中循环遍历列表并在适当时调用代表（并明显删除它们）

另一种解决方案是为每个要调用的方法执行类似 QueueUserWorkItem 的操作，并且首先在线程中休眠适当的时间，直到调用该方法。

对于所有解决方案（我的解决方案和其他解决方案），请注意在与 GUI 交互时必须执行的任何封送处理，或者可能需要执行的任何锁定以避免线程并发问题

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-11-17T17:00:44.613

在尝试了几个选项后，该方法不是自触发的。因此，我使用 Javascript 来解决相同的问题，如下所示。

```
<script>
function Timer() {
    $.ajax({
        url: "@Url.Action("Timer", "Exam")",//Method to call. Timer Method in Exam Controller
        type: 'GET', // <-- make a async request by GET
    dataType: 'html', // <-- to expect an html response
    cache: false,
    async: true
    });
}
setInterval(function () { Timer(); }, 5000);//Triggers method Timer() after 5 seconds
</script> 
```

# c - C 编程 %d { printf("%d"); }

> ID：10963466
> 
> 赞同：1
> 
> 时间：2012-06-09T18:21:06.663
> 
> 标签：c, printf

**程序如下：**

```
#include<stdio.h>
int main()
{
   int a[7]={1,2,3,4};
   printf("%d%d%d%d%d",(*a),*(&*a),a[*a*0],*a);
   return 0;
} 
```

codepad.org 上的输出如下：11110

ideone.com 上的输出如下： 1111-1074526944 *其中 -1074526944 每次执行都保持变化*

我在我个人的 gcc 上执行它的输出是：11110*我没有最新的 gcc*

在`printf();`声明中，我不关心前四个`%d`，因为它非常明显。这是我关心的*第五个。* `%d`为什么会给出这样的输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T18:23:54.633

它尝试访问在调用 printf() 的堆栈上碰巧在假定的“第五个参数”所在的位置上的任何数据，而您对该函数的调用显然没有提供。

*   要了解它，请学习如何编写*可变参数函数*。
*   要真正理解它，您必须学习汇编。
*   为避免此类编程错误，请使用`-Wall`参数，它会告诉您：

> ```
> $ gcc -Wall main.c 
> main.c: In function ‘main’:
> main.c:5:4: warning: format ‘%d’ expects a matching ‘int’ argument [-Wformat] 
> ```

# c++ - 如何有效地将具有可变长度成员的对象保存到二进制文件中？

> ID：10963471
> 
> 赞同：2
> 
> 时间：2012-06-09T18:21:46.787
> 
> 标签：c++, serialization, boost, file-io

我正在使用 c++ 并且正在编写一个预算程序（我知道有很多程序可用——这只是一个学习项目）。

我想保存我称之为包含其他对象（例如“页面”）的书籍对象。页面还包含现金流和条目。问题是可以有任何数量的条目或现金流量。

我发现了很多关于将数据保存到文本文件的信息，但这不是我想要做的。

我已经尝试过使用 boost 库，因为有人告诉我序列化可能是解决这个问题的方法。我不完全确定 boost 的哪些功能会有所帮助，甚至不知道使用 boost 的正确方法是什么。

我见过的大多数二进制文件示例都是具有固定大小成员的对象。例如，一个点可能包含一个 x 值和一个 y 值，它们都是双精度值。情况总是如此，因此只需使用 sizeOf(Point) 就很简单。

所以，我要么在寻找这个问题的直接答案，要么在寻找有关如何解决我的问题的有用信息的链接。但请确保您的链接特定于该问题。

我也在[cplusplus上发布了同样的问题](http://www.cplusplus.com/forum/beginner/71679/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:28:21.377

一般来说，存储变长记录有两种方法：

1.  首先存储大小整数，然后是数据。
2.  存储数据，在末尾附加一个标记字符（或值）。

C 风格的字符串使用第二个选项。
对于选项一，数字包含数据的大小。

## 可选字段

如果您考虑为可选字段设计关系数据库，您将拥有一个包含已知或固定记录的表和另一个包含具有记录 ID 的选项字段的表。

更简单的方法可能是使用类似于 XML 的东西：字段标签。
将您的对象分成两部分：静态字段和可选字段。静态字段部分后跟一个可选字段部分。可选字段部分将包含字段名称，后跟字段数据。读入字段名称，然后读入值。

我建议您检查您的设计，看看是否可以消除可选字段。此外，对于复杂的字段，让他们读入自己的数据。

## 存储二进制数据

如果数据在平台之间共享，请考虑使用 ASCII 或文本表示。

阅读 Endianess 和位大小。例如，一个平台可以首先存储其二进制表示的最低有效字节并使用 32 位（4 个字节）。接收平台，64位，最高有效字节在前，直接读取数据会有问题，需要转换；因此失去了二进制存储的任何好处。

同样，浮点在二进制中也表现不佳。在浮点格式之间转换时也会损失精度。

在二进制中使用可选字段时，可以使用标记字节或数字作为字段 ID，而不是文本名称。

此外，文本格式的数据比二进制格式的数据更容易调试。

## 考虑使用数据库

请参阅[在什么时候值得使用数据库？](https://stackoverflow.com/questions/2648802/at-what-point-is-it-worth-using-a-database/2649916#2649916)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:27:07.133

[文档在`boost::serialization`这里](http://www.boost.org/libs/serialization/)。

`boost::serialization`处理用户编写的类以及 STL 容器：`std::deque`、`std::list`等。

# php - PHP preg_match 含义及问题

> ID：10963473
> 
> 赞同：0
> 
> 时间：2012-06-09T18:22:05.713
> 
> 标签：php, scripting, preg-match

目前我有这个代码：

```
<?php
if (isset($_GET['id'])) {
$itemid = $_GET['id'];
$search = "$itemid";
$query = ucwords($search);
$string = file_get_contents('http://clubpenguincheatsnow.com/tools/newitemdatabase/items.php');
if($itemid=="")
{
echo "Please fill out the form.";
}
else
{
$string = explode('<br>',$string);
foreach($string as $row)
{
preg_match('/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);
if(strstr($matches[1], $query))
{
echo "<a href='http://clubpenguincheatsnow.com/tools/newitemdatabase/info.php?id=$matches[2]'>";
echo $matches[1];
echo "</a><br>";
}
}
if($matches[1]=="")
{
echo "Item does not exist!";
}
}
}
else {
echo "Item does not exist!";
}
?> 
```

我想知道的是这个部分是什么意思？`preg_match('/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);`主要`/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/`是我想知道的部分。

另外，我一直遇到的一个问题是我怎样才能让它也使用数字？因为我有另一个包含数据的文件 (http://clubpenguincheatsnow.com/tools/newitemdatabase/items.php) 并且它希望它获取所有内容，甚至是带有数字的名称。

我该怎么做呢？请帮我！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:39:40.920

代码是一个正则表达式：

```
/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/ 
```

代码将使用正则表达式切割字符串 um 片段并放入一个数组 ($matches)

```
preg_match('/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches); 
```

你应该使用代码看得更好

```
print_r($matches) 
```

要按名称或按项目编号查找，请更改代码

```
if(strstr($matches[1], $query)) 
```

到

```
if(isset($matches[1]) && (strstr($matches[1], $query) || $matches[2] == $query) ) 
```

您的代码应如下所示...

```
if (isset($_GET['id'])) {
$itemid = $_GET['id'];
$search = "$itemid";
$query = ucwords($search);
$string = file_get_contents('http://clubpenguincheatsnow.com/tools/newitemdatabase/items.php');
if($itemid=="")
{
echo "Please fill out the form.";
}
else
{
$string = explode('<br>',$string);
foreach($string as $row)
{
preg_match('/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);
if(isset($matches[1]) && (strstr($matches[1], $query) || $matches[2] == $query) )

{
echo "<a href='http://clubpenguincheatsnow.com/tools/newitemdatabase/info.php?id=$matches[2]'>";
echo $matches[1];
echo "</a><br>";
}
}
}
}
else {
echo "Item does not exist!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:43:36.893

```
/^(\D+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/ 
```

此正则表达式将匹配任意数量的非数字字符，然后是空格字符，然后是等号，以此类推。例如，这个

```
asd = 1 = yh = 23 
```

允许名称中的数字：

```
/^(\w+)\s=\s(\d+)\s=\s(\w+)\s=\s(\d+)/ 
```

要在所有内容中允许数字和字母数字字符：

```
/^(\w+)\s=\s(\w+)\s=\s(\w+)\s=\s(\w+)/ 
```

包括空格和`'`太：

```
/^([\w\s']+)\s=\s([\w\s']+)\s=\s([\w\s']+)\s=\s([\w\s']+)/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:44:44.703

那是一个正则表达式。

'^' 匹配字符串的开头。

'\D' 匹配任何不是数字的字符。

'\d' 匹配任何数字。

'\s' 匹配任何空格。

加号表示前一个字符可以出现多次。

所以基本上它会匹配你文件中的所有这些行，除了最后一个逗号。

```
Blue = 1 = No = 20 
```

该行将匹配正则表达式。

关于你最后一个允许数字的问题，使用这个：

```
/^(.+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T18:47:25.143

正如 Sena 所说，该代码是一个正则表达式。它正在捕获四个组，它们之间带有“=”。

1.  第 1 组：**(\D+)**：任何不是数字的字符一次或多次
2.  第 2 组：**(\d+)**：任何一次或多次为数字的字符
3.  第 3 组：**(\D+)**：与一个相同
4.  第 4 组：**(\d+)**：与两个相同。

因此，它将匹配如下内容：a = 1 = bc = 2

所以，它是匹配*数字*，你想要它做什么？按照上面的建议尝试 print_r($matches) 。

# sass - Sass 编译器看不到 Compass

> ID：10963474
> 
> 赞同：0
> 
> 时间：2012-06-09T18:22:20.577
> 
> 标签：sass, compass-sass

我已经安装了指南针，但是当我尝试观看 SASS 文件时，我得到：

```
Line 1: File to import not found or unreadable: compass/css3. 
```

有没有办法我应该参考指南针？
（使用 Windows 7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:27:40.830

如果你想从命令行使用 Compass，你应该使用它自己的 watcher 而不是 Sass 的。

```
compass watch 
```

如果您在另一个 Ruby 应用程序的上下文中，那么您需要确保正确需要 Compass gem。

# iphone - iPhone 每秒指令数

> ID：10963478
> 
> 赞同：-3
> 
> 时间：2012-06-09T18:22:52.877
> 
> 标签：iphone, ios4, cocos2d-iphone

这是一个有点笼统的问题。我正在开发一款涉及复杂路径查找算法的 iOS cocoa-2d 游戏。游戏是回合制的。因此，在轮到每个用户之前，我想计算所有可能的路径。这涉及运行大量数据操作命令并分配和释放简单的数据对象（无 I/O）我猜大约需要一百万条指令来计算每轮的所有路径。假设游戏使用单线程，iPhone 3GS、4 和 4G 能否在几分之一秒内执行此操作。

一般来说，游戏内每秒可以实现多少条指令。我正在寻找一个猜测的非常高水平的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:35:43.177

这在很大程度上取决于算法或计算中使用的“指令”类型、编译器如何调度它们以及如何计算它们。

粗略地说，Apple 目前使用的 ARM CPU 可以在每个时钟周期发出大约 1 个整数指令，据报道，iOS 设备中使用的 ARM 处理器内核的时钟速度范围为 400 MHz 到 1 GHz。高比率的浮点、乘法或除法指令或高速缓存未命中可能会显着改变实际指令发出和报废率。

但获得准确估计的最佳方法是在目标 iOS 设备上编译和基准测试您的实际代码。

# jquery - 将鼠标悬停在 WordPress 页面列表中的项目上会显示特色图片

> ID：10963479
> 
> 赞同：0
> 
> 时间：2012-06-09T18:22:59.110
> 
> 标签：jquery, css, wordpress, hover, thumbnails

客户端正在请求允许 WordPress 生成子页面列表的功能，并且当悬停该列表中的项目（文本）时，将显示特色图像。[这是此类功能的示例。](http://petleyjones.com/artists/)

经过进一步研究，我发现[了这个线程](http://wordpress.org/support/topic/image-hover-over-text)。然而，经过审查，Petley Jones 网站似乎已经对所有页面链接进行了硬编码。我可能是不正确的。我需要使用 wp_list_pages 或 get_page ，因为工作人员会添加许多子页面，而不是一个人。

我知道同时使用 JQuery 和 CSS 的解决方案。JQuery 解决方案似乎最适合这一点，但是我不确定如何将它与 WordPress 耦合。CSS 将要求每个项目具有相同的类或 ID，我可以实现，但我不确定如何在样式表中调用唯一的页面 ID。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:53:04.483

您可以尝试按照以下步骤进行操作-

*   当您获取子页面时，请使用类名包装一个 div，`<div class="child_page"></div>`并在其中放置您的子页面名称的 php 代码。
*   在子页面代码下方的这个 div 中添加另一个 div，其中包含一个类 say`<div class="child_page_Img"></div>`并在其中放置代码，也可以获取特定页面的特征图像。
*   在主题的样式表中添加一些 CSS -

`.child_page_Img{display:none;} .child_page:hover .child_page_Img{display:block;}`

*   由于 ie6 不允许将鼠标悬停在除`a`元素之外的任何元素上，您所能做的就是将`child_page_Img`div 放在`a`子页面永久链接的元素中。

这个技巧应该有效。谢谢

# regex - Notepad++正则表达式，选择字符串序列以外的字符范围

> ID：10963482
> 
> 赞同：0
> 
> 时间：2012-06-09T18:23:31.673
> 
> 标签：regex, notepad++

我想选择除此序列之外的一系列字符“，（双引号和逗号）我如何在 ^ 之后将它们分组为单个字符，使用此 [^”，] 它选择除 " 和 之外的所有字符，而不是顺序 ”，

**谢谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:53:30.947

也许是这样的

```
(?:[^"]+("[^,])?)* 
```

# java - 使用模板文件包含 HTML 信息

> ID：10963489
> 
> 赞同：0
> 
> 时间：2012-06-09T18:24:41.567
> 
> 标签：java, html, servlets, web, freemarker

在我的 Web 应用程序中，我使用 Java Servlet 和 Freemarker 模板来生成 HTML 输出。在我已经设置了几个模板文件之后，我想在所有模板中添加一个导航栏。我想避免向每个模板文件添加必要的 HTML 代码，因为当我更改它时，我必须重新做一遍。

在这种情况下，最佳做法是什么？我想到的唯一解决方案是在另一个文本文件中定义导航栏并通过模板处理添加它，如下所示：

```
<html>
<head>
   <title>...</title>
</head>
<body>
${navigationBarConent}
...
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:46:51.227

马赫尼，

如果我理解正确，这可能会有所帮助。

[http://richardbarabe.wordpress.com/2009/03/19/freemarker-a-brief-example/](http://richardbarabe.wordpress.com/2009/03/19/freemarker-a-brief-example/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T18:39:15.267

当您使用 freemarker 时。我认为最好在每个模板文件中添加，以便证明模板的使用是合理的。

使用 Apache Tiles。它将创建具有附加功能的 jsp 页面模板。 [http://tiles.apache.org/](http://tiles.apache.org/)。

# multithreading - 来自 JSON 的黑莓线程图像

> ID：10963495
> 
> 赞同：0
> 
> 时间：2012-06-09T18:25:29.503
> 
> 标签：multithreading, image, blackberry, bitmap, listfield

我正在寻找一种从后台线程在我的 ListField 上显示图像的方法。首先在我的 drawListRow 我试试这个

```
path = (String) imagePaths.elementAt(index);
bit = connectServerForImage(path);

g.drawBitmap(xText, y + yText, 80, 200, bit, 0, 0); 
```

但不能流畅地滚动整个列表，并且[他们](http://clusterlessons.blogspot.com/2011/10/parsing-twitter-json-feed-and.html)说不要在 UI 上进行联网或其他阻塞操作。但我也试试这个

```
private class imgConnection extends Thread
{      
        public imgConnection() {
                super();
        }

        public void run() {            

                try {
                    for (int i = 0; i < imagePaths.size(); i++)
                    {
                        final int index = i;                              
                        String path = imagePaths.elementAt(index).toString();
                        bit = connectServerForImage(path);
                        image.addElement(bit);

                    }
                }
                catch (Exception e)
                {
                    System.out.println(e.toString());                        
                }

                UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {        
                        _list.setSize(image.size());
                        subManager.add(_list);                        
                        screen.invalidate();
                        }  
                        });

        }
}

public void drawListRow(ListField list, Graphics g, int index, int y, int w) {
    bit = (Bitmap) image.elementAt(index);
    g.drawBitmap(xText, y + yText, 80, 200, bit, 0, 0);
} 
```

但什么也没发生。任何想法，评论。

* * *

你是对的，我两周前刚刚开始 Java 开发，特别是 BB 开发，我尝试了这个[链接](http://clusterlessons.blogspot.com/2011/10/parsing-twitter-json-feed-and.html)。从 json 返回的路径 url 后，我想添加一个后台线程来下载图像。

第一个线程：

```
_connectionthread = new Connection();
_connectionthread.start();

private class Connection extends Thread
{
    public Connection()
    {
       super();
    }

    public void run() {      
        try {}
        catch (Exception e) {}
    } 
} 
```

第二个线程：

```
_imgConnectionThread = new ImgConnection();
_imgConnectionThread.start();

private class ImgConnection extends Thread
{      
        public ImgConnection() {
           super();
        }

        public void run() {            
                try {
                }
                catch (Exception e)
                {
                }

        }
} 
```

如何更新 ListField 上的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T07:25:45.660

答案基于来自 - pastebin.com/90UKTHzP 的代码

可怕的代码！真的很难阅读和理解！看起来您从不同位置复制粘贴了几个示例。您还使用相同的行为覆盖默认行为。MainScreen 也已经有了 VerticalManagerField。此外，您还将列表每次迭代添加到管理器，这将导致 IAE。主线程取决于第二线程的结果。它们同时开始，但是从服务器获取 json 并处理它可能需要更长的时间，所以图像线程很可能会在没有任何结果的情况下完成他的运行。

所以主要建议修复它 - 阅读[干净的代码书](https://rads.stackoverflow.com/amzn/click/com/0132350882)！阅读有关[Java 开发](http://www.mindview.net/Books/TIJ/)的更多信息- 约定、多线程。阅读[BB 开发](http://docs.blackberry.com/en/developers/subcategories/?userType=21&category=Java%20Development%20Guides%20and%20API%20Reference&subCategory=&url=/developers/subcategories/&versionId=494)- UI api，网络。

最后 - 只启动一个线程来获取和解析 json。完成后 - 启动另一个线程以获取图像。

有一些小事情也可以为您节省更多电池和处理器时间 - 开始按需加载图像 - 何时绘制或将要绘制（用户滚动列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T00:00:10.820

按照惯例，Java 类名以大写字母开头，因此 imgConnection 应该是 ImgConnection。

在您的示例代码中，我没有看到 imgConnection 在任何地方被实例化，也没有看到对 Thread.start() 的任何调用，这是我启动线程的方式。没有 Thread.start() 没有任何事情发生也就不足为奇了——线程永远不会启动。

# javascript - HTML/Javascript：从 1 个按钮触发 2 个不同的操作

> ID：10963496
> 
> 赞同：0
> 
> 时间：2012-06-09T18:25:37.667
> 
> 标签：javascript, html

我们如何从 1 个按钮触发 2 个动作？我们如何制作一个可以转到/滚动到元素“#result”并触发功能“calculateThis”的按钮/或链接（从表单中处理数据）

如何将这些混合成 1 个按钮/链接？

```
 <a href="#result">Submit</a> 
```

和

```
 <button class="button" onclick="calculateThis(this.form); return false;">Submit</button> 
```

//更新这里是完整的代码

```
<script type="text/javascript">
function calculateThis(form) {
var userweight=parseInt(form.weight.value, 10);
var caffeineamount=parseInt(form.caffein.value, 10);
var caffeinetimes=parseInt(form.caffeintimes.value, 10);
var totalcaffeine=caffeineamount*caffeinetimes;

console.log(totalcaffeine)
// Calculate max caffeine per person
var maxcaffeine=userweight*10;

// Calculate remaining after 24 hours
// Half life = 6 hours
var totalcaffeineafter=totalcaffeine*(1/16);

// Calculating how many hours until the caffeine completely digested
var totaldigest=totalcaffeine;
var digesttime=0;

while (totaldigest>0.05) {
totaldigest=totaldigest*(1/2);
digesttime++;
}

digesttime=digesttime*6;

// Calculating when the user will probably die of overdose
var countcaffeine=0;
var overdosetime=1;

while (countcaffeine<maxcaffeine){
countcaffeine=countcaffeine+totalcaffeine;
overdosetime++;
}

// Show total amount of caffeine
document.getElementById("showtotalkafein").innerHTML=totalcaffeine;

// Show amount of caffeine after 1 day
document.getElementById("showtotalkafeinsetelah").innerHTML=totalcaffeineafter;

// Show digest time
document.getElementById("showwaktudigest").innerHTML=digesttime;

// Show overdose
document.getElementById("showberapakali").innerHTML=overdosetime;

return false;
}
</script>

<form class="form">
Weight<br />
<input type="text" name="weight" class="required" value="" /><p /> 
Amount of caffein in coffee<br />
<input type="text" name="caffein" class="required" value="" /><p /> 
How many times drinking coffeein a day<br />
<input type="text" name="caffeintimes" class="required" value="" /><p />
<a href="#result" onClick="calculateThis(this.form); return false;">Submit</a>
</form>
<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;<br />

<h1 id="result">Result</h1>
<p id="showtotalkafein">Show Caffein Total Here</p> 
<p id="showtotalkafeinsetelah">Show Caffeine Amount After 24 hours</p> 
<p id="showwaktudigest">Show Digest Time Here</p> 
<p id="showberapakali">Show Overdose Time Here</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:29:03.503

您应该能够执行与按钮中相同的操作，即

```
<a href="#result" onClick="calculateThis(this.form); return false;">Submit</a> 
```

这不行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:33:56.027

JaggenSWE 的答案几乎就在那里，但不要返回 false，因为这会抑制默认行为，即遵循链接。

```
<a href="#result" onClick="calculateThis(this.form);">Submit</a> 
```

我不建议使用内联事件处理程序。

**编辑**

这行得通。[http://jsbin.com/uwatab/3/](http://jsbin.com/uwatab/3/)

总是最好将 onsubmit 处理程序附加到表单，而不是按钮 onclick。这样，在您的表单中按 enter 仍然会执行您的 javascript。

# c# - linux 位置下的 Mono 共享库

> ID：10963498
> 
> 赞同：3
> 
> 时间：2012-06-09T18:26:07.627
> 
> 标签：c#, linux, mono, linux-native-library

我有一个用 C++ 编写的共享库，我想在 Linux 下与 Mono 一起使用，我遵循本指南[http://www.mono-project.com/Interop_with_Native_Libraries](http://www.mono-project.com/Interop_with_Native_Libraries)

我让它工作，但我必须将我的库文件放入 /usr/lib 或 /lib 文件夹。

无论如何我可以分发和使用我的 .so 文件而不是将它们复制到 /usr/lib 或 /lib 中，而是复制到我的 Mono 应用程序文件夹中？（应用程序运行的当前目录）

某些使用该软件的用户可能没有 root / admin 访问权限，因此他们无法将文件安装/复制到 /usr/lib 或 /lib

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:38:42.947

我认为您必须在启动程序时使用环境变量 LD_LIBRARY_PATH ：

LD_LIBRARY_PATH=。单声道 yourapp.exe

# php - 如何通过表单操作页面从另一个页面获取 url id

> ID：10963501
> 
> 赞同：0
> 
> 时间：2012-06-09T18:26:20.393
> 
> 标签：php

我有一个页面，我在其中获取 ques id 并将其插入数据库中，因为我正在做

网址：*/faq/faq_question_sol.php?ques=62*

此 ( `$selected_ques= ($_GET['ques']);` ) 在 *faq_question_sol.php* 中正常工作，但 *answer_submit_process.php* 无法识别我的表单

```
 <form id="post-form" class="post-form" method="POST" action="answer_submit_process.php">
    <input id="submit-button" type="submit" tabindex="120" name="submitbutton" value="Post Your Answer" />

 </form> 
```

而 *answer_submit_process.php* 是

```
if(isset($_POST['submitbutton'])){
$userid = $_SESSION['userid']; // i have already started the session
 $selected_ques=  ($_GET['ques']);  
$content =  $_POST["content"] ;

$query="INSERT INTO `formanswer`( `user_id`,`questionid`,`content` )  VALUES ('{$userid}','{$selected_ques}','{$my_html}' ) ";
     $result=mysql_query($query);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:38:36.017

最快的解决方案是将 $_GET['ques'] 的值保存在表单的隐藏字段中，从而使其可以在 answer_submit_process.php 中访问。

像这样的东西：

```
 if (isset($_GET['ques'])){
      echo '<input type="hidden" name="ques" value="'.$_GET['ques'].'">';
 }

And in answer_submit_process page the value could easily accessed by $_POST['ques'].. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:29:16.663

如果您通过表单 POST 发送，那么您可以从中获取数据的变量是 $_POST 而不是 $_GET。无论如何，我无法在您的表单上找到与 ques 变量相关的任何字段，它们在哪里？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:58:17.140

添加`<input type="hidden" name="ques" value="<?php echo $_GET['ques'] ?>"/>`到您的表单以临时存储变量，然后在处理页面中使用该变量`$_POST['ques']`代替。`$_GET['ques']`

或者，您可以将表单操作更改为`answer_submit_process.php?ques=<?php echo $_GET['ques']; ?>`.

# css - 为什么 django-compressor 修改 CSS 文件而不是简单地连接它们？

> ID：10963503
> 
> 赞同：0
> 
> 时间：2012-06-09T18:26:24.790
> 
> 标签：css, django, django-compressor

我最近部署了一个基于 Django 的站点。我一直在寻找加快页面加载速度的方法，所以我决定试试[django-compressor 。](https://github.com/jezdez/django_compressor)

我的主页包含相当多的 CSS 和 JS 文件，因此 django-compressor 似乎是完成这项工作的完美工具。我修改了主页的模板以利用 django-compressor 的 CSS 连接功能：

```
{% compress css %}
  <link href="{{ STATIC_URL }}css/file1.css" rel="stylesheet" />
  <link href="{{ STATIC_URL }}css/file2.css" rel="stylesheet" />
{% endcompress %} 
```

不幸的是，问题在于 django-compressor 正在修改文件。`file1.css`包含大量声明并`file2.css`包含一些新声明并覆盖`file1.css`. 不幸的是，其中的一些声明`file2.css`丢失了（文件的一部分在那里 - 但部分没有）。

即使我设置了，这仍然会发生：

```
COMPRESS_CSS_FILTERS = [] 
```

...在`settings.py`。`file2.css`这些文件是连接的，但缺少一些's 声明。是否有一些我不知道的设置导致文件被修改或声明被删除？JavaScript 文件不会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:39:12.133

原来问题是我忘了跑：

```
python manage.py collectstatic 
```

...因此缺少属性是由于静态目录包含 CSS 文件的较旧副本。

# mysql - 多个 mysql 查询和单个复杂查询之间的基准

> ID：10963504
> 
> 赞同：1
> 
> 时间：2012-06-09T18:26:36.540
> 
> 标签：mysql

我想知道多个 mysql 查询和一个复杂查询之间的速度差异是什么？有区别吗？有人有任何基准或提示吗？

例子

```
"SELECT *, ( SELECT COUNT(DISTINCT stuff) FROM stuff where stuff.id = id) as stuff, ( SELECT SUM(morestuff) FROM morestuff where morestuff.id = id) as morestuff, (SELECT COUNT(alotmorestuff) FROM alotmorestuff where alotmorestuff.id = id) as alotmorestuff FROM inventory, blah WHERE id=id" 
```

与每个的单选查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:49:12.037

好吧，您的复杂查询实际上不是。这是一堆独立的选择，它们可能会或可能不会起作用 - 我认为没有理由应该有任何明显的差异。如果您的数据库有高延迟连接，您可能会节省一点。

# networking - 在这种情况下可以进行负载平衡吗？

> ID：10963511
> 
> 赞同：0
> 
> 时间：2012-06-09T18:27:08.803
> 
> 标签：networking, tomcat, load-balancing

我们的 Web 应用程序将很快投入生产。我们将为此*WAR*使用负载平衡以获得更多冗余。

我是一名 Java 开发人员，所以如果我关于负载平衡的问题是基本的，请原谅。

现在，*WAR*部署在两台 Linux 服务器（`Server A`和`Server B`）上。

这两个服务器都安装了具有相似目录结构的 TomCat。

*WAR*将使用`tomcat/bin`目录下定义的属性文件，并且这两个服务器的此属性值不同。

这两个服务器具有不同的 IP 地址。

请让我知道在这种情况下负载平衡是否会出现任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:32:32.213

如果您不希望用户的会话在两台服务器上持续存在，这应该不是问题。例如，如果给定用户已登录并处于 Web 应用程序的会话中，但该服务器突然停机，您会期望负载均衡器透明地将用户转移到另一台服务器。默认情况下，这将导致在其他服务器的 tomcat 实例上创建一个新会话，从而使用户丢失他们的会话数据（如果没有保存在数据库中），必须重新登录等。

通常，您可以配置应用服务器和负载均衡器以启用粘性会话，以便可以在整个场中维护单个会话。这种设置通常更复杂。因此，如果您不需要让会话跨越两个实例，那么您应该没问题。

# ios - 从内部将 UIView 设置为 NILL？

> ID：10963519
> 
> 赞同：3
> 
> 时间：2012-06-09T18:28:07.487
> 
> 标签：ios, release, null

我正在创建一个“警报”视图，该视图将在我的应用程序中向用户弹出。

它有一个通过调用关闭它的按钮：

```
[self removeFromSuperView]; 
```

我希望在关闭时将视图设置为 nil，以便将其释放。但

```
self=nil; 
```

是不合法的。

我如何在没有授权的情况下从视图本身做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T18:32:49.383

根据文档，您不必担心。如果 superview 不为零，它将在调用后释放视图。以下是相关部分：

> 如果接收者的 superview 不为零，则 superview 释放接收者。如果您打算重用视图，请确保在调用此方法之前保留它，并在以后酌情再次释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:30:51.387

如果您对视图没有任何其他强引用，则视图将在 ARC 下自动为您解除分配。

# java - 如何使用 PTY 在 Scala 中生成进程？

> ID：10963529
> 
> 赞同：4
> 
> 时间：2012-06-09T18:29:22.060
> 
> 标签：java, scala, spawn, pty, lxc

在红宝石中，我有：

```
PTY.spawn("/usr/bin/lxc-monitor -n .+") do |i, o, pid|
  # ...
end 
```

如何在 scala/java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T22:37:50.077

尝试[JPty](https://github.com/jawi/JPty)或[pty4j](https://github.com/traff/pty4j)。这些是使用 JNA 的 Java 的 pty 实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T21:50:05.707

我不认为 PTY 已被移植到 java/scala。您可以使用 java 中的内置运行时。

```
 def run() {
    val rt = Runtime.getRuntime
    val cmds = Array("/usr/bin/lxc-monitor", "-n .+")
    val env = Array("TERM=VT100")
    val p1 = rt.exec(cmds, env)
  } 
```

我[将此](http://www.devx.com/tips/Tip/5277)页面用作 scala 版本的基础。

**更新：**

要获得输出，您需要获取输入流并读取它（我知道这听起来倒退，但它是相对于 jvm 的输入）。下面的示例使用 apache commons 来跳过 java 的一些冗长部分。

```
import java.io.StringWriter
import org.apache.commons.io.IOUtils

class runner {

  def run() {
    val rt = Runtime.getRuntime
    val cmds = Array("/usr/bin/lxc-monitor", "-n .+")
    val env = Array("TERM=VT100")
    val p1 = rt.exec(cmds, env)
    val inputStream = p1.getInputStream

    val writer = new StringWriter()
    IOUtils.copy(inputStream, writer, "UTF-8")
    val output = writer.toString()
    println(output)
  }

} 
```

我从[这里](https://stackoverflow.com/questions/309424/in-java-how-do-i-read-convert-an-inputstream-to-a-string)得到了 apache utils 的想法。

# php - 如何从 Component 包中覆盖类？

> ID：10963531
> 
> 赞同：1
> 
> 时间：2012-06-09T18:29:27.710
> 
> 标签：php, symfony

我正在使用 Symfony 2 和 FOSUserBundle 编写应用程序。我想允许多个用户使用相同的名称注册并使用电子邮件来识别他们。我为此编辑了用户管理器，将 loadUserByUsername 变成了 findUserByEmail() 的包装器。这个损坏的 TokenBasedRememberMeServices 使用 getUsername() 生成记住我的令牌。每次更新固件框架版本时，如何用我自己的类替换该类以不强迫自己破解 symfony 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:22:48.917

我找到了一个方法：

Symfony 包将类名存储在它们的配置文件参数中。您可以通过在 config.yml 中添加这一行来简单地覆盖这些参数：

```
# Parameters override
parameters:
    security.authentication.rememberme.services.simplehash.class: MyVendor\UserBundle\RememberMe\TokenBasedRememberMeServices 
```

# vim - 为什么vim会高亮一些单词？

> ID：10963536
> 
> 赞同：16
> 
> 时间：2012-06-09T18:31:00.360
> 
> 标签：vim, color-scheme

我注意到使用不同的配色方案 VIM 正在强调/突出显示某些单词。为什么会这样以及如何将其关闭？

![配色方案 1](../Images/09e0a054798b0fa72eb6928b745e21bb.png)

与另一种配色方案

![配色方案 2](../Images/a0d7b8b831a1a2577d1cc499d8546daf.png)

我正在使用[spf13-vim 配置](https://github.com/spf13/spf13-vim)并与 Putty 远程连接。

VIM 正确地假设这个文件是一个 python 文件 (:set filetype 返回 "python")

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-09T18:47:15.737

看起来你的 Vim 正在为你做拼写检查。您可以通过添加来关闭它

```
set nospell 
```

在你的`.vimrc`文件中。要在文件中重新打开它，您可以执行以下操作：

```
:setlocal spell spelllang=en_us 
```

用于美式英语的拼写检查。`:setlocal`更改当前缓冲区的设置，同时`:set`更改所有当前打开的缓冲区。[您可以在此处](http://vimdoc.sourceforge.net/htmldoc/spell.html)阅读有关使用 Vim 进行拼写检查的更多信息。

自动启用某些文件的拼写检查可能对您很有用。例如，要在`.tex`文件中启用拼写检查，您可以将以下内容添加到您的`.vimrc`:

```
" Enable spell checking when opening .tex files
autocmd!
au BufNewFile,BufRead *.tex setlocal spell spelllang=en_us
" Or if you have filetype detection enabled:
" au FileType tex setlocal spell spelllang=en_us 
```

请注意，`autocmd!`清除先前定义的`au`命令并且只需要一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T18:55:27.140

Vim 中的大多数文件类型（如*python*）都带有定义高亮组的语法（通过查看它们`:highlight`）。然后，颜色方案为终端、彩色终端和/或 GVIM 提供前景色/背景色和/或粗体和斜体等格式的组合。

选择一个你觉得视觉上吸引人的配色方案；有些是 Vim 自带的，更多的可以在 Internet 上找到，大多数在[http://www.vim.org/](http://www.vim.org/)。

如果您只是对特定配色方案中的一两件小事感到恼火，您可以通过`:highlight`命令修改项目。要禁用突出显示，请使用，例如

```
:highlight clear Statement 
```

或（当组链接到另一个组时，有效地继承其外观）

```
:highlight link Statement NONE 
```

（这些必须在设置您的偏好的命令*之后发出。）*`:colorscheme`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-17T14:50:11.527

我遇到了两种我不喜欢的亮点。

1.缩进高亮和tab箭头提醒，可以通过添加解决

```
let g:indent_guides_enable_on_vim_startup = 0
set nolist 
```

到 ~/.vimrc.local

2.突出常用词，如中文单词和拼写错误的单词，您可以通过添加来解决

```
set nospell 
```

到 ~/.vimrc.local

# ruby-on-rails - 空的测试单元失败消息

> ID：10963539
> 
> 赞同：2
> 
> 时间：2012-06-09T18:31:13.290
> 
> 标签：ruby-on-rails, ruby, testunit

*   红宝石版本：1.9.3-p194
*   导轨版本：3.2.5

如果我在 2.4.8 之后使用任何版本的测试单元，我就会遇到问题。问题是我没有收到任何有意义的失败消息。也就是说，每当任何断言失败时，无论原因或类型如何（assert、assert_select 等），我都会得到：

```
<> expected but was <> 
```

当我切换到测试单元 2.4.8 时，消息恢复正常。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:28:48.390

我在以下设置中遇到了同样的问题：

*   红宝石：1.9.3-p194
*   导轨：3.2.11
*   测试单元：2.5.0

将 test-unit gem 更新到最新版本（2.5.4）为我解决了这个问题：

```
bundle update test-unit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:41:19.970

我无法直接回答您的问题，因为 ruby​​forge 页面似乎非常过时，但我强烈建议您使用 Ruby 1.9.3 (minitest FTW) 附带的默认测试框架，而不是明确要求它，除非您有充分的理由这样做。

# php - Pinterest 文本样式

> ID：10963540
> 
> 赞同：0
> 
> 时间：2012-06-09T18:31:26.087
> 
> 标签：php, text, upload, pinterest

我正在创建一个新闻提要网站。用户可以上传文本，然后在彼此下方显示文本。我想以 Pinterest 显示图片的方式显示所有文本。我怎样才能做到这一点？

显示和从数据库中获取文本的代码是：

```
<?php

//connect

mysql_connect("host","username","password") or die(mysql_error());
mysql_select_db("database_name") or die(mysql_error());

//query the database
$getnews = mysql_query("SELECT * FROM news ORDER BY id DESC") or die(mysql_query());

while ($row = mysql_fetch_assoc($getnews))
{

    //get data
    $id = $row['id'];
    $title = $row['title'];
    $body = $row['body'];
    $date = $row['date'];

    echo "
    <b>$title posted on $date</b><br>
    ";

    echo nl2br($body);

    echo "<hr>
    ";

}

?> 
```

发布文本的代码如下：

```
<?php

  //insert category to database
  if(isset($_POST['qty'])) {
    // Fetch and clean the <select> value.
    // The (int) makes sure the value is really a integer.
    $qty = (int)$_POST['qty'];

    // Create the INSERT query.
    $sql = "INSERT INTO `table`(`quantity`)
            VALUES ({$qty})";

    // Connect to a database and execute the query.
    $dbLink = mysql_connect('host', 'username', 'password') or die(mysql_error());
              mysql_select_db('database_name', $dbLink) or die(mysql_errno());

    $result = mysql_query($sql);

    // Check the results and print the appropriate message.
    if($result) {
        echo "Record successfully inserted!";
    }
    else {
        echo "Record not inserted! (". mysql_error() .")";
    }
}

     if ($_POST['post'])
{
    //get data
    $title = $_POST['title'];
    $body = $_POST['body'];

    //check for existance
    if ($title&&$body)
    {
        mysql_connect("host","username","password") or die(mysql_error());
        mysql_select_db("database_name") or die(mysql_error());

        $date = date("Y-m-d");

        //insert data
        $insert = mysql_query("INSERT INTO news VALUES ('','$title','$body','$date')") or die(mysql_error());

        die("Your text has been posted!");

    }
    else
        echo "Please fill out your name and text<p>";
}
?> 
```

# javascript - 用零初始化javascript数组

> ID：10963545
> 
> 赞同：3
> 
> 时间：2012-06-09T18:32:20.617
> 
> 标签：javascript, performance, optimization

我正在测试不同的方法来初始化一个带有零的大型 javascript 数组。到目前为止，带有 push(0) 的简单 for 循环似乎远远优于其他方法（请参阅[http://jsperf.com/initialise-array-with-zeros](http://jsperf.com/initialise-array-with-zeros)），但我对此的有效性表示怀疑测试。

在实践中，您只会创建一次如此大的数组并将其缓存，以便稍后当您再次需要一个大的初始化数组时，您可以简单地对其进行切片。因此，我认为最重要的评估是**第一次**执行这段代码所花费的时间，而不是多次试验的平均值。

有人不同意吗？或者有人知道我如何/在哪里可以测试一轮的时间吗？

**编辑：**为了回应一些关于分配有这么多零的数组的基本原理的误解，我想澄清两件事。

1.  不会有稀疏性。我需要创建多个大型数组并将它们用于计算。这些副本将充满浮点数，并且浮点数恰好为零的机会可以忽略不计。
2.  并非所有计算都在数组上按顺序执行。我相信在这个过程中生成数组的函数与覆盖通过引用传递的数组中的值相比效率低下（参见例如 gl-matrix.js）。

因此，我的解决方案是创建一个大型的零填充数组，然后在需要新数组时使用 slice()，然后通过引用任何函数来传递该副本以使用它。Slice 在任何浏览器中的速度都非常快。

现在，尽管您可能仍然担心我为什么要这样做，但我真正感兴趣的是是否有可能在**第一次运行时**评估不同初始化方法的性能。我想要这个时机，因为在我的情况下，我肯定只会运行一次。

是的，我的 jsperf 代码可能遗漏了一些解决方案。因此，如果您有我没有想到的方法，请随时添加！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T18:47:30.410

仅测试一次操作非常复杂，因为性能会根据计算机的其他操作而有很大差异。您将不得不多次运行该单个测试，并在每次测试之间重置为相同的条件。jsperf 多次运行测试的原因是为了得到一个好的平均值来清除异常。

您应该在不同的浏览器中对此进行测试，以查看哪种方法总体上是最好的。你会看到你得到了非常不同的结果。

在 Internet Explorer 中，最快的方法实际上不是您测试的方法，而是一个分配零的简单循环：

```
for (var i = 0; i < numzeros; i++) zeros[i] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-10T18:51:31.797

从 ES6 开始，你可以像这样使用[填充](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)：

```
var totals = [].fill.call({ length: 5 }, 0); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-09T18:50:50.120

没有任何实际任务相当于“用零初始化 javascript 数组”，尤其是一个大任务。你应该重新考虑为什么你需要 0。这是一个稀疏数组，您需要 0 作为默认值吗？然后只需添加一个访问条件以将检索到的值设置为 0，而不是浪费内存和初始化时间。

# python - 如何捕获默认错误？

> ID：10963549
> 
> 赞同：1
> 
> 时间：2012-06-09T18:32:36.667
> 
> 标签：python, try-catch

然后在 python 中使用 try catch 可以捕获错误并将它们分配给带有`as`关键字的变量

```
try
  do something..
except IOError as e:
  do something with e.. 
```

然而，然后在不知道错误类型的情况下尝试做同样的事情 python 抱怨语法。

```
try
  do something..
except as e:
  do something with e.. 
```

有什么方法可以捕获默认错误并将其分配给变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T18:37:16.067

就在这里。所有异常都派生自`Exception`该类。

所以你可以这样做：

```
try:
    doSomething()
except Exception as e:
    doSomethingWithException(e) 
```

这是一种包罗万象的线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:54:53.130

您也可以使用 sys.exc_info()。这允许您使用相同的代码处理 Python 2.x 和 Python 3.x 上的异​​常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:17:17.370

常规方式是：

```
try:
    do_whatever()
except Exception as e:
    handle_it() 
```

尽管捕获如此广泛的异常是不明智的 - 最好捕获您知道可以处理的特定异常并让其他任何东西传播。

值得注意的是，KeyboardInterrupt 和 SystemExit 继承自 BaseException 而不是 Exception，因此如果您希望满足这些要求，这些将不会被捕获，但这不应该成为问题，因为无论如何它们都应该在顶层处理。

# c++ - 定义一个未知深度/维度的 C++ 模板

> ID：10963552
> 
> 赞同：0
> 
> 时间：2012-06-09T18:32:57.753
> 
> 标签：c++, templates

我想写一个 n 维直方图类。它应该采用包含其他 bin 等的 bin 形式，其中每个 bin 包含最小和最大范围，以及指向下一维 bin 的指针

一个 bin 定义为

```
template<typename T>
class Bin {
 float minRange, maxRange;
 vector<Bin<either Bin or ObjectType>> bins;
} 
```

这个定义是递归的。所以在运行时，用户定义直方图的维度

```
so if its just 1-dimension, then
Bin<Obj>
while 3-dimensions
Bin<Bin<Bin<Obj>>> 
```

这可能吗？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:39:22.997

当然，C++11 有模板的可变长度参数列表。即使没有 C++11，如果所有维度都具有相同的类型，您也可以使用专业化：

```
template <typename T, unsigned nest>
struct Bin {
  std::vector<Bin<T, (nest-1)> > bins;
};

template <typename T>
struct Bin<T,0> {
  T content;
}; 
```

您只能在一定程度上在运行时指定维度。如果它受固定值约束，您甚至可以动态选择适当的类型。但是，请考虑使用一维向量而不是多维锯齿状向量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:30:04.407

要获得您建议的确切语法，请执行以下操作：

```
template <typename T>
class Bin
{
    float minRange, maxRange;
    std::vector<T> bins;
}; 
```

它应该完全符合您在问题中提出的要求：

```
Bin< Bin< Bin<Obj> > > bins; 
```

为了动态地（在运行时）执行此操作，我采用了一些多态性。这个例子有点复杂。首先，有一个基本类型。

```
template <typename T>
class BinNode {
public:
    virtual ~BinNode () {}
    typedef std::shared_ptr< BinNode<T> > Ptr;
    virtual T * is_object () { return 0; }
    virtual const T * is_object () const { return 0; }
    virtual Bin<T> * is_vector() { return 0; }
    const T & operator = (const T &t);
    BinNode<T> & operator[] (unsigned i);
}; 
```

`BinNode`确定节点是否实际上是另一个向量或对象。

```
template <typename T>
class BinObj : public BinNode<T> {
    T obj;
public:
    T * is_object () { return &obj; }
    const T * is_object () const { return &obj; }
}; 
```

`BinObj`继承自`BinNode`，并表示对象本身。

```
template <typename T>
class Bin : public BinNode<T> {
    typedef typename BinNode<T>::Ptr Ptr;
    typedef std::map<unsigned, std::shared_ptr<BinNode<T> > > Vec;
    const unsigned dimension;
    Vec vec;
public:
    Bin (unsigned d) : dimension(d) {}
    Bin<T> * is_vector() { return this; }
    BinNode<T> & operator[] (unsigned i);
}; 
```

`Bin`是`BinNode`'s 的向量。

```
template <typename T>
inline const T & BinNode<T>::operator = (const T &t) {
    if (!is_object()) throw 0;
    return *is_object() = t;
} 
```

`BinNode`如果它实际上是对象，则允许分配给它；

```
template <typename T>
BinNode<T> & BinNode<T>::operator[] (unsigned i) {
    if (!is_vector()) throw 0;
    return (*is_vector())[i];
} 
```

`BinNode`如果它是向量，则允许对其进行索引。

```
template <typename T>
inline BinNode<T> & Bin<T>::operator[] (unsigned i)
{
    if (vec.find(i) != vec.end()) return *vec[i];
    if (dimension > 1) vec[i] = Ptr(new Bin<T>(dimension-1));
    else vec[i] = Ptr(new BinObj<T>);
    return *vec[i];
} 
```

如果存在，则返回索引项，否则根据当前维度深度创建适当的条目。添加重定向运算符以进行漂亮的打印：

```
template <typename T>
std::ostream &
operator << (std::ostream &os, const BinNode<T> &n) {
    if (n.is_object()) return os << *(n.is_object());
    return os << "node:" << &n;
} 
```

然后你可以`Bin`像这样使用：

```
int dim = 3;
Bin<float> v(dim);
v[0][1][2] = 3.14;
std::cout << v[0][1][2] << std::endl; 
```

它目前不支持0维，但我邀请你尝试自己做。

# pdf - 从 Fileupload 合并 PDF 文件

> ID：10963553
> 
> 赞同：0
> 
> 时间：2012-06-09T18:33:01.090
> 
> 标签：pdf, file-upload, merge

我想合并四个单独的 PDF 上传内容并将它们以二进制格式保存在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:35:59.000

没有简单的方法来合并`pdf`文件。如果您使用的是 PHP，则可以使用开源库来执行此操作。链接：[PHP 的 PDF 合并](http://pdfmerger.codeplex.com/)

如果您使用的是`.NET`本教程：使用库的[简单 .NET PDF 合并。](http://www.codeproject.com/Articles/28283/Simple-NET-PDF-Merger)`iTextSharp`

# assembly - 在汇编中生成一个范围内的随机数

> ID：10963554
> 
> 赞同：0
> 
> 时间：2012-06-09T18:33:05.493
> 
> 标签：assembly, random, masm, irvine32

我试图在汇编中生成一个介于 -27 和 +33 之间的随机数。

有一个称为`Randomize`生成 0 和 n 之间的随机数的过程，其中 n 是上限。

如何将下限变为 -27 而不是 0？

这是代码：

```
title test
INCLUDE irvine32.inc

.data
msg byte "Genrating 50 number",0
.code
main PROC
mov edx,offset byte
call WriteString
call crlf
mov ecx,50
L1:
mov eax,+33
call RandomRange
call writeDec

exit
main ENDP
END main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T07:21:16.127

这个想法是使用 RandomRange 生成从 0 到 (33+27-1) 的整数，然后从生成的数字中减去 27。下面的代码是用 n 个随机整数填充一个数组并显示该数组。随机范围是 [-27,33]

```
INCLUDE Irvine32.inc
j equ 27
k equ 33
n =10

.data
arrayd sdword n dup(?)

.code
main proc
call randomize ;activate the seed
mov ecx,n
mov esi,0
L1:           ;the trick is the 3 instruction lines shown below
   mov eax,k+j
   call randomrange
   sub eax, j
   mov arrayd[esi*4],eax
   inc esi
   loop L1

   mov ecx,n
   mov esi,0
L2:
   mov eax,arrayd[esi*4]
   call writeInt
   mov al,20h
   call writechar
    inc esi
    loop L2
exit
main endp
end main 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-06T06:38:34.247

您可以使用以下代码：

```
include Irvine32.inc  
.data

.code
main proc
mov ebx, -27
mov eax, 33
mov ecx, 50

L1:
pushad          ; save all 32bit registers
call BetterRandomRange
call writeint
call crlf
popad           ; restore all 32bit registers
loop L1
main endp

BetterRandomRange proc
neg ebx
add eax, ebx
call randomrange
sub eax, ebx
ret
BetterRandomRange endp

end main 
```

[看更多](https://i.stack.imgur.com/YnPJQ.jpg)

# ios - 切换跟踪模式时如何旋转iOS MKMapView使其朝北？

> ID：10963555
> 
> 赞同：2
> 
> 时间：2012-06-09T18:33:34.777
> 
> 标签：ios, mkmapview, ipad-2

我正在开发一个 iPad 应用程序（iOS 5.1），我使用 MKMapView 在我的应用程序中显示地图。

我正在使用 MKUserTrackingModeNone、MKUserTrackingModeFollow、MKUserTrackingModeFollowWithHeading 在三种不同的地图方向模式之间切换，这很有效。

但是，当从 MKUserTrackingModeFollowWithHeading 切换到 MKUserTrackingModeNone 时，地图的方向没有重置为朝北方向（地图上的北方位于屏幕顶部），我遇到了问题。

在 ipad 自带的地图 app 上，流程是这样的：

1.  当您启动应用程序时，它处于 MKUserTrackingModeNone 模式并且是北向的
2.  当您切换方向模式时，它会更改为 MKUserTrackingModeFollow，并且方向仍然是北方。
3.  当您再次切换时，它会更改为 MKUserTrackingModeFollowWithHeading，并且地图会根据您面向/指向 iPad 的方向旋转。
4.  当您再次切换方向时，它会回到 MKUserTrackingModeNone，并且地图会很好地旋转回北向。

我希望我的应用程序在切换模式时在方向上的行为方式相同，但是当我按照上面的步骤 4 进行操作并**从 MKUserTrackingModeFollowWithHeading 切换到 MKUserTrackingModeNone**时，方向保持在进行方向切换而不是旋转之前的状态回到北方方向。

我正在使用放置在工具栏中的标准 MKUserTrackingBarButtonItem 控件进行方向切换。

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:31:17.593

这是一个有效的快速修复，虽然它不是很优雅：

[https://stackoverflow.com/a/16576802/2077435](https://stackoverflow.com/a/16576802/2077435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:01:29.867

您是否使用标准的 iOS 按钮栏项目来执行此操作？我的应用程序确实如此，只要我将其从 followWithHeading 点按到 non，它就会向北旋转。

# c# - TextBlock 的重写样式的奇怪行为

> ID：10963562
> 
> 赞同：4
> 
> 时间：2012-06-09T18:34:40.583
> 
> 标签：c#, wpf, styles, textblock

几天前，我遇到了 Button 中文本的奇怪行为（我猜其他 ContentControls 的行为相同）。让我解释一下情况。我在 App.xaml 中有一个 TextBlock 的样式定义：

```
<Application.Resources>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Margin" Value="10"/>
    </Style>
</Application.Resources> 
```

在 MainWindow.xaml 中，我有相同的样式定义，它应该覆盖 App.xaml 中定义的样式。我在 Window 中也有 3 个按钮。在第一个按钮中，在按钮内容中明确定义了 TextBlock 控件。对于第二个按钮，我将字符串设置为代码隐藏中的内容。对于第三个按钮，我将一个整数值设置为代码隐藏中的内容。这是 MainWindow.xaml 的代码：

```
<StackPanel>
    <StackPanel.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="0"/>
        </Style>
    </StackPanel.Resources>
    <Button Name="Button1">
        <Button.Content>
            <TextBlock Text="Button with text block"/>
        </Button.Content>
    </Button>
    <Button Name="Button2" />
    <Button Name="Button3" />
</StackPanel> 
```

和 MainWindow.xaml.cs：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    Button2.Content = "Button with string";
    Button3.Content = 16;
} 
```

现在我们看到了什么？正如预期的那样，第一个和第三个按钮中的文本有 0 像素的边距，但第二个按钮中的文本有 10 像素的边距！问题是：为什么第二个按钮有 10px 的边距以及如何为第二个按钮设置零边距（从 App.xaml 中删除样式是不可能的）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T06:39:41.937

当我改变

```
Button2.Content = "Button with string"; 
```

至

```
Button2.Content = "Button with _string"; 
```

按钮的边距从 10 变为 0。

这是 WPF 中的一个错误；它已经在[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/435093/textblock-style-applies-to-button-when-content-has-access-key-defined)上进行了报道。

我不是 100% 确定，但我认为您看到的行为是由相同的根本原因引起的。

顺便说一句：正确的行为是按钮 2 和 3 的 Margin=10; 这是因为资源查找是沿着逻辑树执行的，而不是沿着可视树。按钮 2 和 3 中的 TextBlock 不在 StackPanel 的逻辑树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T23:06:42.790

我不能给你一个明确的答案，但我注意到设置字符串和整数之间的区别会导致应用不同的样式。

由于将 Content 设置为需要转换的值会导致应用正确的样式，因此我尝试了以下操作：

```
private void WindowLoaded(object sender, RoutedEventArgs e)
{
    Button2.Content = new TextHolder("Button with string");
    Button3.Content = 16;
}

public class TextHolder
{
    private readonly string _text;

    public TextHolder(string text)
    {
        _text = text;
    }

    public override string ToString()
    {
        return _text;
    }
} 
```

并且边距现在为 0。我很想了解到底发生了什么。

# facebook-graph-api - 使用 FB.api(me/friends) 进入 Facebook Graph API 时如何选择图像大小？

> ID：10963565
> 
> 赞同：2
> 
> 时间：2012-06-09T18:34:50.317
> 
> 标签：facebook-graph-api, cordova

我正在使用下面的那个片段来获取我的联系人信息，工作正常，我只需要知道**如何更改我得到的图片的大小**，目前我得到的图片非常小。我搜索了 Facebook 文档，一无所获。

```
 FB.api('/me/friends', { fields: 'id, name, picture', limit: 3 },  function(response) 
    {
           if (response.error) 
           {
               alert(JSON.stringify(response.error));
           } 
           else 
           {    
               alert("Loading friends...");
               console.log("fdata: " + response.data);
               response.data.forEach(function(item) 
               {           
                     // feeding my html                
               });
           }

    }); 
```

谢谢！

Ps.：我正在使用 Phonegap 插件来使用 Facebook API。可能，我正在调用的 JS 方法正在调用 Java 方法，所以，我不知道我正在使用哪个特定的 API，但在我看来是默认的 Graph Api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:42:22.493

我`/user_id/picture?type=large`用于个人资料图片。

[http://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=732484576%2Fpicture%3Ftype%3Dlarge](http://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=732484576%2Fpicture%3Ftype%3Dlarge)

参考[http://developers.facebook.com/docs/reference/api/#pictures](http://developers.facebook.com/docs/reference/api/#pictures)

在您的情况下，不要调用朋友的图片，而是使用 id

在您的 html 中构建图像

`<image src="https://graph.facebook.com/user_id/picture?type=large&return_ssl_results=1" />`

例子：

```
<div id="friends"></div>
<script>
    FB.api('/me/friends', { fields: 'id, name', limit: 3 },  function(response) 
    {
           if (response.error) 
           {
               alert(JSON.stringify(response.error));
           } 
           else 
           {    
               alert("Loading friends...");
               console.log("fdata: " + response.data);
               response.data.forEach(function(item) 
               {           
                document.getElementById('friends').innerHTML+='<image src="https://graph.facebook.com/'+item['id']+'/picture?type=large&return_ssl_results=1" />'; 
                    document.getElementById('friends').innerHTML+='<br />'+item['name']+'';          
               });
           }

    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:53:38.610

您可以根据自己的需要选择以下 4 个中的任何一个

```
 FB.api('id?fields=picture&type=large'); 
```

或者

```
 FB.api('id?fields=picture&type=small'); 
```

或者

```
 FB.api('id?fields=picture&type=square'); 
```

或者

```
 FB.api('id?fields=picture&type=normal'); 
```

# linux - 读取 file.sql 并创建数据库

> ID：10963568
> 
> 赞同：0
> 
> 时间：2012-06-09T18:35:22.113
> 
> 标签：linux, sqlite

我有一个名为*schema.sql*的文件，如下所示：

```
drop table if exists codes;
create table paste_codes (
    id integer primary key autoincrement,
    codetitle string not null,
    codebody string not null,
    pub_date string not null
) 
```

有什么方法可以让 sqlite3 从这个文件中读取它并为我创建数据库？cat schema.sql > sqlite3 /tmp/database.db 之类的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:36:41.180

我解决了这个问题。我将代码更改为：

```
drop table if exists paste_code;
create table paste_code (
    id integer primary key autoincrement,
    codetitle string not null,
    codebody string not null,
    pub_date string not null
); 
```

我只是：

```
$ sqlite3 /tmp/database.db < schema.sql 
```

一切都开始完美！

# sql-server - IIS 应用程序池标识和 SQL Server 之间的连接

> ID：10963574
> 
> 赞同：1
> 
> 时间：2012-06-09T18:36:19.060
> 
> 标签：sql-server, wcf, iis-7

我在 VS 2012 中开发了一个非常基本的 WCF 服务 (WCF 4.0)。我在 SQL Server 2012 中托管了 AdventureWorks2012 数据库，并且我正在使用安装了 .Net 4.0 框架的 IIS 7。

当我使用 VS 2012 在本地开发 IIS 中运行该服务时，一切正常（我假设因为托管 .svc 的网站的 web.config 中的连接字符串设置为使用集成安全性 - 连接字符串如下）

```
<add name="AdventureWorksEntities" connectionString="metadata=res://*/ProductsModel.csdl|res://*/ProductsModel.ssdl|res://*/ProductsModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=adams_pc;initial catalog=AdventureWorks2012;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient"/> 
```

当我将网站发布到本地 IIS 并在 ASP.NET 4.0 应用程序池中运行时，似乎实际上没有与数据库建立连接（运行控制台测试客户端时，我的实体模型中的对象没有数据在他们中）。

我已经在 AdventureWorks2012 数据库中设置了名称为 IIS APPPOOL\ASP.NET v4.0 的用户，然后授予 dbo.owner 对数据库的访问权限，但我仍然无法建立连接。

我错过了什么？我需要更改托管网站的连接字符串吗？

更多信息：

当我在本地运行它时（通过开发服务器，我的意思是在我调试应用程序时运行的本地 IIS 实例）从数据库中检索信息并显示在测试控制台应用程序中。

当我部署服务并更改测试控制台应用程序中的引用以使用托管的 WCF 服务时，根本没有检索到任何数据。抛出的异常是我的测试代码中的空引用异常，但这是因为没有数据填充到我的服务使用的实体模型中。在数据库连接方面我没有看到任何异常，但我还没有到学习如何将异常从服务传递给客户端的地步。我期待这个简单的测试能像我正在使用的书一样工作。

此外，在建立数据库连接时，我还应该做些什么来准确找出错误是什么？

服务：

```
Imports System.Text
Imports System.Linq
Imports System
Imports System.Collections.Generic
Imports System.ServiceModel
Imports System.ServiceModel.Web
Imports System.Runtime.Serialization
Imports ProductsEntityModel
'NOTE: You can use the "Rename" command on the context menu to change the class name "Service" in code, svc and config file together.

'WCF service that implements the service contract
'This implementation performs minimal error checking and exception handling
Public Class ProductsServiceImpl
Implements IProductsService

Public Function ChangeStockLevel(productNumber As String, newStockLevel As Short, shelf As String, bin As Short) As Boolean Implements IProductsService.ChangeStockLevel
    'Modify the current stock level of the selected product in the ProductInventory table.
    'If the update is successful then return True, otherwise return False.

    'The Product and ProductIventory tables are joined over the ProductID column.

    Try
        'Connect to the AdventureWorks database using the Entity Framework
        Using database As New AdventureWorksEntities()
            ' Find the ProductID for the specified product
            Dim qryProductID = (From p In database.Products
                             Where String.Compare(p.ProductNumber, productNumber) = 0
                             Select p.ProductID).First
            'Find the ProductInventory object that matches the paramters passed into the operation
            Dim productInv As ProductInventory = database.ProductInventories.First(Function(pi) String.Compare(pi.Shelf, shelf) = 0 And pi.Bin = bin And pi.ProductID = qryProductID)

            'Update the stock level for the ProductInventory object
            productInv.Quantity += newStockLevel

            'Save the change back to the database
            database.SaveChanges()
        End Using
    Catch ex As Exception
        Return False
    End Try
    Return True
End Function

Public Function CurrentStockLevel(ByVal productNumber As String) As Integer Implements IProductsService.CurrentStockLevel
    'Obtain the total stock level for the specified product
    'The stock level is calculated by summing the quantity of the product available in all the bins in 
    'the ProductInventory table

    'The Product and ProductInventory tables are joined over the ProductID column.
    Dim stockLevel As Integer = 0

    Try
        'Connect to the AdventureWorks database by using the Entity Framework.
        Using database As New AdventureWorksEntities()
            stockLevel = (From pi In database.ProductInventories
                          Join p In database.Products
                          On pi.ProductID Equals p.ProductID
                          Where String.Compare(p.ProductNumber, productNumber) = 0
                          Select CInt(pi.Quantity)).Sum

        End Using
    Catch ex As Exception

    End Try
    Return stockLevel
End Function

Public Function GetProduct(productNumber As String) As ProductData Implements IProductsService.GetProduct
    'Create a reference to a ProductData object
    Dim productData As ProductData = Nothing

    Try
        'Connect to the AdventureWorks database by using Entity Framework
        Using database As New AdventureWorksEntities()
            Dim matchingProduct As Product = database.Products.First(Function(p) String.Compare(p.ProductNumber, productNumber) = 0)
            productData = New ProductData With {.Name = matchingProduct.Name, .ProductNumber = matchingProduct.ProductNumber, .Color = matchingProduct.Color, .ListPrice = matchingProduct.ListPrice}
        End Using
    Catch ex As Exception

    End Try
    Return productData
End Function

Public Function ListProducts() As List(Of String) Implements IProductsService.ListProducts
    'Create a list for holding product numbers
    Dim productsList As New List(Of String)

    Try
        'Connect to the AdventureWorks database by uysing the Entity Framework
        Using database As New AdventureWorksEntities()
            ' Fetch the product number of every product in the database
            Dim products = From Product In database.Products
                           Select Product.ProductNumber

            productsList = products.ToList
        End Using
    Catch ex As Exception

    End Try
    'Return the list of product numbers
    Return productsList
End Function
End Class 
```

界面：

```
Imports System.Text
Imports System.Linq
Imports System
Imports System.Collections.Generic
Imports System.ServiceModel
Imports System.ServiceModel.Web
Imports System.Runtime.Serialization
'NOTE: You can use the "Rename" command on the context menu to change the interface name "IService" in both code and config file together.
'The Data Contact describes the details of a Product object passed to client applications (this is a return object).
<DataContract>
Public Class ProductData
<DataMember>
Public Name As String

<DataMember>
Public ProductNumber As String

<DataMember>
Public Color As String

<DataMember>
Public ListPrice As Decimal
End Class
'The Service Contact describes the operations that the WCF service provides (these are the methods available to call)
<ServiceContract>
Public Interface IProductsService

'Get the product number of every product
<OperationContract>
Function ListProducts() As List(Of String)

'Get the details of a single product
<OperationContract>
Function GetProduct(ByVal productNumber As String) As ProductData

'Get the current stock level for a product
<OperationContract>
Function CurrentStockLevel(ByVal productNumber As String) As Integer

'Change the stock level for a product
<OperationContract>
Function ChangeStockLevel(ByVal productNumber As String, ByVal newStockLevel As Short, ByVal shelf As String, ByVal bin As Int16) As Boolean

End Interface 
```

客户端：

```
Imports System.ServiceModel
Imports ProductsClient.ProductsService

Module Module1

Sub Main()
    ' Create a proxy object and connect to the service
    Dim proxy As New ProductsServiceClient()

    ' Test the operations of the service

    ' Obtain a list of all the products
    Console.WriteLine("Test 1: List all products")
    Dim productNumbers As String() = proxy.ListProducts
    For Each productNumber As String In productNumbers
        Console.WriteLine("Number: {0}", productNumber)
    Next
    Console.WriteLine()

    Console.WriteLine("Test 2: Display the Details of a product")
    Dim product As ProductData = proxy.GetProduct("WB-H098")
    Console.WriteLine("Number: {0}", product.ProductNumber)
    Console.WriteLine("Name: {0}", product.Name)
    Console.WriteLine("Color: {0}", product.Color)
    Console.WriteLine("Price: {0}", product.ListPrice)
    Console.WriteLine()

    ' Query the stock level of this product
    Console.WriteLine("Test 3: Display the stock level of a product")
    Dim numInStock As Integer = proxy.CurrentStockLevel("WB-H098")
    Console.WriteLine("Number in stock: {0}", numInStock)
    Console.WriteLine()

    ' Modify the stock level of this product
    Console.WriteLine("Test 4: Modify the stock level of a product")
    If proxy.ChangeStockLevel("WB-H098", 100, "N/A", 0) Then
        numInStock = proxy.CurrentStockLevel("WB-H098")
        Console.WriteLine("Stock level changed. Current stock level: {0}", numInStock)
    Else
        Console.WriteLine("Stock level update failed.")
    End If
    Console.WriteLine()

    ' Disconnect from the service
    proxy.Close()
    Console.WriteLine("Press ENTER to finish")
    Console.ReadLine()
End Sub

End Module 
```

只是为了咯咯笑，这是我用来在 AdventureWorks2012 数据库中设置我的用户的 SQL 脚本：

```
USE [AdventureWorks2012]
GO
CREATE USER [IIS APPPOOL\DefaultAppPool] FOR LOGIN [IIS APPPOOL\DefaultAppPool]
GO
EXEC sp_addrolemember N'db_owner', [IIS APPPOOL\DefaultAppPool]
GO
GO
CREATE USER [IIS APPPOOL\ASP.NET v4.0] FOR LOGIN [IIS APPPOOL\ASP.NET v4.0]
GO
EXEC sp_addrolemember N'db_owner', [IIS APPPOOL\ASP.NET v4.0]
GO 
```

这是客户端 app.config 的 serviceModel 部分，因此您可以看到端点

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IProductsService" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost/ProductsService/Service.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IProductsService" contract="ProductsService.IProductsService"
            name="BasicHttpBinding_IProductsService" />
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:42:24.563

您的服务代码会静默捕获所有异常。这样的代码是不可接受的:)。

要调试您的真实异常，请以管理员身份运行您的 Visual Studio。选择调试 -> 附加到进程 -> 选中“显示所有用户的进程” -> 选择“w3wp.exe”。运行您的测试应用程序并在 Visual Studio 中等待 Web 服务异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:28:32.793

好吧，事实证明问题是我缺少应用程序池的服务器用户。我发布的 SQL 脚本只为应用程序池身份创建了一个数据库用户，但同一身份没有服务器登录。一旦我添加了该用户（并且我必须手动键入 IIS APPPOOL\ASP.NET v4.0，而不是尝试在 Windows 登录选择中选择它作为对象），一切正常。

感谢您对 Grzegorz 的帮助，尽管这最终完全是微不足道的事情！

# asp.net-mvc-3 - 如何将 Jquery ajax 发布到控制器 mvc

> ID：10963578
> 
> 赞同：0
> 
> 时间：2012-06-09T18:37:16.923
> 
> 标签：asp.net-mvc-3, jquery

我只是无法弄清楚我做错了什么，从视图模型中，我尝试从用户**{**Tousername 和 messagebody** }中获取**，** #ToUserName** 正确发送，而当我调试时控制器中的**#Body**为空。我有以下 Jquery 代码：

```
$("#SendMessage").click(function () {
        var message = GrabMessage();

        var jsonData = JSON.stringify(message, null, 2);

        $.ajax({
            url: '@Url.Content("~/Message/Compose/")',
            type: 'POST',
            data: jsonData,
            datatype: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function () {
                $('#default_message').append("message sent ");
                switchToSentMessagesTab();
            },
            error: function (request, status, err) {
                alert(status);
                alert(err);
            }
        });

        return false;
    });

    function switchToSentMessagesTab() {
        $('a[href="#default_message"]').click();
    }

    function GrabMessage() {
        var touser = $("#ToUserName").val();
        var text = $("#Body").val();

        var result =
        {
            Body: text,
            ToUserName: touser

        };

        return result;
    }

}); 
```

和剃须刀视图：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.ToUserName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ToUserName, new { @class ="autocomplete"})
        @Html.ValidationMessageFor(model => model.ToUserName)
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Body)
        @Html.ValidationMessageFor(model => model.Body)
    </div>

    <p>
        <input id="SendMessage" type="submit" value="Send" />
    </p> 
```

和控制器动作：

```
 [HttpPost]
    public ActionResult Compose(PrivateMessageViewModel m) 
    {
        if (User.Identity.IsAuthenticated )
        {
            if (ModelState.IsValid)
            {
                var ToUserName = users.Profiles.First(x => x.UserName == m.ToUserName);
                PrivateMessage message = new PrivateMessage
                {
                    //do some stuff here:                   

                };
                db.SendMessage(message);

                return RedirectToAction(//Some view here...)
            }
        }

        return PartialView(m);
    } 
```

# javafx - JavaFX 动画

> ID：10963579
> 
> 赞同：0
> 
> 时间：2012-06-09T18:37:17.737
> 
> 标签：javafx, key-value

我一直在阅读一些 JavaFX 教程，并且对使用的动画系统有一些疑问。

```
 Timeline timeline = new Timeline();
    Node circle = circles;
    timeline.getKeyFrames().addAll(
                new KeyFrame(Duration.ZERO, // set start position at 0
                   new KeyValue(circle.translateXProperty(), random() * 800),
                   new KeyValue(circle.translateYProperty(), random() * 600)),

                new KeyFrame(new Duration(40000), // set end position at 40s
                   new KeyValue(circle.translateXProperty(), random() * 800),
                   new KeyValue(circle.translateYProperty(), random() * 600)));

    // play 40s of animation
    timeline.play();
    primaryStage.show();
} 
```

我不明白的是 translateXProperty() 函数（和 Y）的使用以及 KeyValue 构造函数中随机数的用途。我理解该过程的工作方式是您创建了两个 KeyFrames，您在两个帧之间进行插值，并且 KeyValue 对象只是节点的不同状态，但我不确定这是否正确。

我正在看的教程在这里：[http ://docs.oracle.com/javafx/2/get_started/animation.htm](http://docs.oracle.com/javafx/2/get_started/animation.htm)

我只是在上面的代码中使用了一个圆圈来简化事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:12:25.860

代码在 40 秒内将一个圆圈从一个随机位置移动（平移）到另一个位置。第一个关键帧指定起始平移坐标。第二个关键帧指定结束平移坐标。JavaFX 动画子系统负责在幕后跨中间帧插入翻译键值。

代码可以为不同的属性设置动画，例如缩放或旋转。它可以使用绝对值而不是随机值。它只是使用了它所做的属性和值，因为它们指定了作者在这种情况下试图达到的效果。

# jquery - 基于地理位置的列表排序

> ID：10963582
> 
> 赞同：1
> 
> 时间：2012-06-09T18:38:11.133
> 
> 标签：jquery, mobile, geolocation

我在 jquery mobile 中有一个列表。我已经添加了代码来根据我所处的最近状态来处理列表。出于某种原因，我的逻辑不起作用。任何想法为什么？滚动时列表也非常缓慢。

检查此链接并单击左上角的查找最近的位置按钮

[http://www.jm.bugs3.com/gl/state.html](http://www.jm.bugs3.com/gl/state.html)

```
<script>
function findMe(){

    if (navigator.geolocation !=undefined){
        navigator.geolocation.watchPosition(onFound, handleError);
    }
}
function onFound(position){
    var userLat = position.coords.latitude;
    var userLong = position.coords.longitude;
    $('ul li').each(function (index){
        var locationLat = $(this).find('.lat').html();
        var locationLong = $(this).find('.long').html();
        var distance = getDistance(userLat, locationLat, userLong, locationLong);
        $(this).data("distance", distance);
    })

    reOrder();  
}

function handleError(error){
    alert ("Could not find location");
}

function reOrder(){
    $('ul li').sort(sortAlpha).appendTo('ul');  
}

function sortAlpha(a, b){
    return $(a).data('distance') > $(b).data('distance') ? 1 : -1;  //if True or false 1 or -1
};
//Calculate the shortest distance based on lat and long
function getDistance(lat1, lat2, lon1, lon2){
    var R = 6371; //KM
    var d = Math.acos(Math.sin(lat1) * Math.sin(lat2) +
            Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1)) * R
        return d    
}; 
```

// 这是带有纬度和经度坐标的列表的代码

```
<div data-role="content">   
        <ul data-role="listview" data-inset="true">
            <li>
                <a href="#page2" data-transition="slide" >Alabama</a>
                <div class="lat" style="visibility:hidden">31.375626</div>
                <div class="long" style="visibility:hidden">-86.299592</div>
            </li>
            <li>
                <a href="#page3" data-transition="slide">Alaska</a>
                <div class="lat" style="visibility:hidden">60.216736</div>
                <div class="long" style="visibility:hidden">-149.882995</div>
            </li>
            <li>
                <a href="#page4" data-transition="slide">Arizona</a>
                <div class="lat" style="visibility:hidden">32.447659</div>
                <div class="long" style="visibility:hidden">-112.134568</div>
            </li>
            <li>
                <a href="#page5" data-transition="slide" >Arkansas</a>
                <div class="lat" style="visibility:hidden">33.678252</div>
                <div class="long" style="visibility:hidden">-92.340846</div>
            </li>
            <li>
                <a href="#page6" data-transition="slide" >Boston</a>
                <div class="lat" style="visibility:hidden">41.358431</div>
                <div class="long" style="visibility:hidden">-71.059773</div>
            </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:41:58.363

JavaScript 的排序是 O(n) - 换句话说，它不止一次地触及每个元素。这意味着您在同一个 elem 上多次调用 .data( 并且您也多次移动它，每次都会触发浏览器重绘。

不要对元素进行排序，而是对其“距离”数组进行排序。

然后，从视图中移除整个 UL，遍历距离数组，将每个值映射回 LI，从原始 UL 中提取它，将其附加到新的 UL。用新的 UL 代替旧的 UL。

这样浏览器重绘只发生一次，并且您在排序函数中使用已经计算的值（而不是挖掘 elem attrs）。

此外，使用 data attr 比 .find('div with class') 拉 lat, lon 更快。

下面不隐藏/显示旧/新UL，这意味着您在移动每个LI后都会重新绘制，但后端计算量会大大减少。

```
var distance_to_li_map = {}
$('ul li').each(function (index){
    var $this = $(this)
    , locationLat = $this.data("latitude")
    , locationLong = $this.data('longitude')
    , distance = getDistance(userLat, locationLat, userLong, locationLong)

    // store LI elem pointers into map
    distance_to_li_map[distance] = this
})

var distances = Object.keys(distance_to_li_map)

distances.sort()

var newUL = $('<ul></ul>').insertBefore('ul' /*the old UL*/)[0]

for (var i = 0; i < distances.length; i++) {
    newUL.appendChild(distance_to_li_map[distances[i]])
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T02:38:53.773

好时，

“...基于我所处的最近的状态”有点难以解释，原因如下：

*   简而言之，“我所处的最近状态”是“我所处的状态”
*   “一个州最近的地理中心”可能不是“我所在的州”（例如，如果我在佛罗里达泛汉德尔的西端，那么“最近的州”是阿拉巴马州，而不是佛罗里达州）
*   我可能不在某个状态（例如，我在海上）。

尽管存在这种困难并且相信您自己的代码正确地反映了正确的含义，并且以@ddotsenko 的回答为起点，但仍可以进行以下改进：

*   真正的排序操作可以通过将`<li>`引用加载到一个数组中来避免，而不是一个对象，由距离索引（四舍五入）。这将以正确的顺序给出一个稀疏数组。
*   `<li>`元素可以在其原始元素中重新排序，避免每次排序都`<ul>`需要新元素。`<ul>`

考虑到这些要点，ddotsenko 代码的修改版本如下：

```
function onFound(position) {
    var userLat = position.coords.latitude,
        userLong = position.coords.longitude,
        arr = [],
        $ul = $("ul");//a more specific selector would be good
    $ul.find('li').each(function (index) {
        var $this = $(this),
            lat = Number($this.data("latitude")),
            lng = Number($this.data('longitude')),
            dist = Math.round(getDistance(userLat, lat, userLong, lng));
        arr[dist] = this;
    });
    //At this point, arr is a sparse array of li elements indexed by distance, hence in distance order.
    for(var item in arr) {
        //Ref: "Iterating over sparse arrays", //http://hexmen.com/blog/2006/12/iterating-over-sparse-arrays/
        if (String(item >>> 0) == item && item >>> 0 != 0xffffffff) {
            $ul.append(item);
        }
    };
} 
```

这应该会明显更快。

关于缓慢的滚动，在 DOM 中使用更少的元素可能会更好。ddotsenko 代码中的 javasctipt 表示`<li>s`以下格式：

```
<li data-latitude="31.375626" data-longitude="-86.299592">
    <a href="#page2" data-transition="slide" >Alabama</a>
</li> 
```

这应该比隐藏的 div 更好地保存数据。

更好的是在 javascript 中硬编码所有纬度/经度对，从而避免从 DOM 中较慢的检索，例如：

```
var stateLocations = {
    "Alabama":  {lat: 31.375626, lng: -86.299592},
    "Alaska":   {lat: 60.216736, lng: -149.882995},
    "Arizona":  {lat: 32.447659, lng: -112.134568},
    "Arkansas": {lat: 33.678252, lng: -92.340846},
    ...
}; 
```

然后相应地查找。

*顺便说一句，波士顿是一个城市，而不是一个州。美国没有一个以“B”开头*

# delphi - 将 DLL 注入的代码从 Delphi 7 转换为 Delphi XE2

> ID：10963588
> 
> 赞同：4
> 
> 时间：2012-06-09T18:39:06.403
> 
> 标签：delphi, delphi-7, delphi-xe2, code-injection

我得到了一个由我在 Delphi 7 中制造的旧注射器，我试图以这种方式改变他，它仍然可以在 XE2 中工作，但我失败了 - 新的测试 dll 可以与我的旧注射器一起使用，没有任何问题，所以我很确定我的注射器有错误。

这是我制作的代码：

```
procedure TForm1.InjectDLL(const ADLLName: String; targetproc: Cardinal);
var
  dllname: String;
  pDLLname, pStartAddr: Pointer;
  bw: NativeUInt;
  hProcess, hRemoteThread: THandle;
  TID: Cardinal;
begin
  hProcess := OpenProcess(PROCESS_ALL_ACCESS, false, targetproc);
  pDLLname := VirtualAllocEx(hProcess, 0, length(dllname) + 1,
    MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE);

  WriteProcessMemory(hProcess, pDLLname, Pointer(dllname),
    length(dllname) + 1, bw);

  pStartAddr := GetProcAddress(GetModuleHandle('kernel32.dll'), 'LoadLibraryA');
  hRemoteThread := CreateRemoteThread(hProcess, nil, 0, pStartAddr,
    pDLLname, 0, TID);
  WaitForSingleObject(hRemoteThread, INFINITE);
  showmessage('Fehler ' + IntToStr(GetLastError) + ': ' +
    SysErrorMessage(GetLastError));
  CloseHandle(hProcess);
end; 
```

我只需要将 hProcess 和 hRemoteThread 更改为 THandle 并将 bw 更改为 NativeUInt。节目信息只是告诉我一切正常。由于 String 类型从 d7 更改为 XE2，因此肯定存在细微差别。我还尝试将 dll 名称转换为 PAnsiChar，但它对我没有任何改变。

希望我为您发布了足够的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T20:29:28.113

在 Unicode Delphi 下，您的代码的最终结果是将 UTF-16 文本传递到`LoadLibraryA`. 当然，这需要 8 位 ANSI 文本。您有两种选择来解决问题：

1.  坚持使用 ANSI 文本，只需在代码片段中替换`string`为。`AnsiString`
2.  切换到 Unicode 文本。使用`LoadLibraryW`并应用 Arnaud 建议的更改以正确处理 16 位文本的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T18:49:58.697

在 Delphi XE2 中，现在`string`由.`Widechar``char=WideChar`

所以你应该写：`(length(dllname)+1)*sizeof(char)`在你的代码中。它适用于 Delphi 7 和 XE2。

和 'LoadLibraryW' 用于 unicode 参数。

# python - 为什么我不能将任意迭代分配给步长为 -1 的扩展切片？

> ID：10963595
> 
> 赞同：9
> 
> 时间：2012-06-09T18:40:30.920
> 
> 标签：python, slice, assignment-operator

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> u = [4, 5, 6, 7, 8, 9]
>>> u[1::1] = [3, 2, 1, 0]
>>> u
[4, 3, 2, 1, 0]
>>> u[9:0:-1] = [8, 7, 6, 5]
>>> u
[4, 5, 6, 7, 8]
>>> u[9:0:-1] = [16, 12, 8]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: attempt to assign sequence of size 3 to extended slice of size 4
>>> u
[4, 5, 6, 7, 8]
>>> 
```

预期行为：最终赋值语句没有抛出异常；`u`应该在最后一行打印为`[4, 8, 12, 16]`.

我可以分配一个步长为 1 的扩展切片，即使我分配的可迭代是“错误的长度”。那么为什么我不能分配给步长为 -1 的扩展切片并让它以明显的方式工作呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:49:25.173

我认为创建一个步长为 1 的扩展切片实际上就像一个常规切片而不是扩展切片。

扩展切片不允许您更改序列的长度，如此处[所述](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)

> 如果您有一个可变序列，例如列表或数组，您可以分配或删除扩展切片，但分配给扩展切片和常规切片之间存在一些差异。分配给常规切片可用于更改序列的长度。 **扩展切片没有这么灵活。分配给扩展切片时，语句右侧的列表必须包含与它要替换的切片相同数量的项目。**

至于为什么会这样，我只能猜测是因为没有明显行为的情况。举个例子：

```
u = [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
u[0:8:3] = [ 10, 11 ] 
```

你希望这如何工作？我想您可以将 1 和 4 替换为 10 和 11，但是 7 呢？你留下吗？删除它？删除 7 之后的整个序列的其余部分？也许只有我一个人，但这个案子似乎不太清楚。我认为这就是为什么扩展切片不允许这种行为。

# c# - Windows 窗体上下文中 WPF 的应用程序范围样式

> ID：10963598
> 
> 赞同：0
> 
> 时间：2012-06-09T18:41:11.007
> 
> 标签：c#, wpf, winforms

我们从 WinForms 迁移到 WPF...慢慢地 =)

不，我们将 WPF 用户控件与 ElementHost 一起使用。

是否可以在这种情况下定义应用程序范围的资源？在纯 WPF Application.Resources 中代表它。但是与 WinForms 集成时没有 WPF 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:12:45.500

您可以创建一个通用[ResourceDictionary](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.aspx)并将其添加到您的 UserControls 的资源中。这样，您只需在一个位置更改样式。

Dictionary1.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

</ResourceDictionary> 
```

[并使用MergedDictionarys](http://msdn.microsoft.com/en-us/library/aa350178.aspx)将其添加到您的 UserControl

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

或者像这样将它添加到控件的资源中

```
<UserControl.Resources>
    <ResourceDictionary Source="Dictionary1.xaml"/>
</UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T21:20:50.870

即使您的项目是带有几个单独 WPF 表单或控件的 WinForms 项目，您也可以使用 WPF 应用程序对象。该对象不会为您预先创建，但如果您手动创建它，只需`new App()`（甚至没有派生类`new System.Windows.Application()`），您项目中的所有内容都会看到它。

# java - Java 泛型：不能从静态上下文引用非静态类型变量 T

> ID：10963601
> 
> 赞同：18
> 
> 时间：2012-06-09T18:41:36.097
> 
> 标签：java, generics

```
interface A<T> {

    interface B {
       // Results in non-static type variable T cannot
       // be referenced from a static context
       T foo(); 
    }

} 
```

反正有这个吗？为什么从 AB 引用时 T 被视为静态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T18:48:01.417

接口的所有成员字段默认为`public`,`static`和`final`。

由于默认情况下是内部接口`static`，因此您不能`T`从静态字段或方法中引用。

因为`T`实际上与类的实例相关联，所以如果它与与类相关联的静态字段或方法相关联，那么它就没有任何意义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T18:57:31.530

这样的事情怎么样。

```
public interface A<T> {

     interface B<T> extends A<T>{

       T foo(); 
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T18:41:05.783

您的内部界面不知道 T 是什么。试试这个。

```
interface A<T> {

    interface B<T> {
       T foo(); 
    }

} 
```

# php - Drupal 7 - 向页面添加块

> ID：10963613
> 
> 赞同：3
> 
> 时间：2012-06-09T18:43:37.750
> 
> 标签：php, html, drupal, drupal-7

这是我目前的设置。

我创建了一个具有以下区域的新自定义主题。

```
regions[header] = Header
regions[content] = Content
regions[footer] = Footer 
```

page.tpl.php

```
 <div id="Header">
        <div class="row">
            <div class="span12" style="text-align:center;padding-top:20px;">
                <div><a href="/"><img src="logo.png" width="150" height="150" alt="KT Logo"></a></div>
            </div>
        </div>

        <div class="row">&nbsp;</div>
    </div><!-- /Header -->

    <div id="Navigation">
        <div class="row" style="text-align:center;">
            <div class="span12" style="text-align:center;">
                <?php print render($page['header']); ?>
                <hr class="style-two">
            </div>
        </div>
    </div><!-- /Navigation -->

    <div id="Content">

        <div class="row">&nbsp;</div>

        <div class="row">
            <div class="span8 offset1">
                <h1><?php print $title; ?></h1>
            </div>
        </div>

        <div class="row">&nbsp;</div>

        <div class="row">
            <div class="span10 offset1">
                <?php print render($page['content']) ?>
            </div>
        </div>

        <div class="row">&nbsp;</div>
    </div><!-- /Content -->

    <footer>
        <div class="row">
            <div class="span12">
                <img src="separator.png" alt="separator">
                <?php print render($page['footer']); ?>
            </div>
        </div>
        <div class="row">&nbsp;</div>
    </footer>

</div><!-- /container --> 
```

这一切都很好，我已经创建了几个基本页面。当我想在页面上有一个包含 2 个块的自定义“内容类型”时，问题就来了，一个在左侧有主要内容，一个在右侧有一个侧边栏。现在我还没有完全理解这些地区是如何运作的。

我想要类似 sidebar_second 效果的东西，但我不确定它会如何设置我的宽度。这是我的区域的屏幕截图。[http://goo.gl/XFVnl](http://goo.gl/XFVnl)

所以我认为我需要更改内容区域的显示方式，以便它可以包含侧边栏区域？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:02:25.740

我相信第一步是`sidebar`在您的 .module 文件中声明一个区域以及您的其他区域，即使它不会显示在每个页面上。

在您的页面模板中，您可以检查（伪代码）

```
if (isset($page['sidebar'])) {
   <div sidebar float left theme this how you want>
     print render($page['sidebar']);
   </div>
} 
```

现在，当您创建块时，您可以指定要显示的特定路径或要显示的特定内容类型。上面的代码将检查页面是否在您的侧边栏中有一个块并相应地呈现它。

如果您在 drupal 堆栈交换上发帖，您可能更有可能得到答案。 [https://drupal.stackexchange.com/](https://drupal.stackexchange.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:03:02.227

内容类型特定的模板通常是 node.tpl.php 文件，而页面模板是 page.tpl.php 文件。

使用 node.tpl.php 时已经包含 page.tpl.php 文件

首先，将所有区域添加到它们主题的 .info 文件中。这直接影响块管理页面中可用的区域。没有必要让您定义的所有区域（在 .info 文件中）出现在所有 page.tpl.php 文件中。

由于 page.tpl.php 文件中有 3 个区域，因此保留它，它将继续工作。但是要覆盖特定节点类型的 page.tpl.php，您必须在主题的 template.php 文件中设置它们。你简单地“问” Drupal 使用这个 page.tpl.php 文件是节点类型是一个“页面”（例如）。

将此添加到您的 template.php 文件中。如果节点类型是（机器名称）是“书”，Drupal 将不会在 page--node-book.tpl.php 文件中寻找替代的 page.tpl.php 文件。

```
<?php
function themename_preprocess_page(&$variables) {
  if (!empty($variables['node'])) {
    $variables['theme_hook_suggestions'][] = 'page__node_' . $variables['node']->type;
  }
}
?> 
```

现在您可以将 page.tpl.php 文件复制到 page--node-[type].tpl.php 并在那里进行更改。您在此文件中放入的任何内容都将用于该节点类型的页面模板。（注意：“page”和“node”之间有2个连字符，“node”和“[type]”之间有一个连字符）如果看不到更改，请记住清除缓存。

# android - Android 蓝牙聊天示例应用 - 多个连接

> ID：10963614
> 
> 赞同：3
> 
> 时间：2012-06-09T18:43:44.907
> 
> 标签：android, bluetooth, sample, rfcomm

是否可以将 Android 蓝牙聊天示例应用程序设置为一次连接多个人，并拥有一个迷你聊天室？那会带来什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T19:11:23.100

tl; dr版本：蓝牙很烂，不要使用它，改用wifi，可能由网络后端支持。

多年来，为了一个社交无线网络研究项目，我已经彻底调查了这个问题。我的一般建议是：它不适用于超过两/三个人。蓝牙在设计时并未考虑到无线对等网络。

一般而言，Android 设备（*尤其是*HTC 的设备 iirc）中包含的廉价蓝牙控制器似乎一次只能处理两个或三个连接。我不确定这是硬件还是固件问题，但我可以讲述一些基本的轶事。大约在 2011 年初，我正在努力在 SDK 级别（即无需修改固件）实现这个想法，并且能够让对等点获得两个额外的连接（即三个设备，每个连接到另外两个）工作几分钟到一个小时，然后连接会突然断开，套接字将变得不可用，需要重新连接。不幸的是，20 分钟是一个上限，通常不可能连接到*多个*其他设备完全可靠。

该项目的目标是支持多人在后台静默交互，但这从未实现，相反，我们放弃了蓝牙，转而使用 wifi，效果*要好得多*。抽象地说，我认为人们将蓝牙视为可靠的点对点通信的可能媒介，但它并没有真正设计成那样：它更多地是用于小型设备（想想耳机）之间的短距离通信的媒介。

请注意，如果您想这样做，您可以连接的最大设备数量是固定的，因为根据蓝牙规范，一个微微网最多支持七个设备。[（参见维基百科文章。）](http://en.wikipedia.org/wiki/Piconet)

所需的更改很简单：您为每个设备使用*不同的 UUID。*这可以通过多种方式实现，使用带外交换机制，或简单的方案，您以递增的方式分配 UUID，并在连接到网络时，依次尝试每种方式。

以下是一些相关的 Google 群组主题：

*   [蓝牙对等网络](https://groups.google.com/forum/?fromgroups#!searchin/android-developers/bluetooth$20micinski/android-developers/u5oPF2ZkxlI/RkOXR2A3PtYJ)
*   [Android蓝牙上的多个连接](https://groups.google.com/forum/?fromgroups#!topic/android-developers/adeBD275u30)

我记得发布了一篇更详细的文章，详细说明了如何执行此操作（使用代码），如果我能找到它，我也可能会挖掘出来。它应该是从 2010 年底或 2011 年初开始的。

所以答案是，抽象地说，是的，你可以*尝试*通过使用多个 UUID 来做到这一点（在你使用一个之后，就是这样，你必须使用一些分配协议尝试另一个）。然而，在实践中，经过大量的试验和错误，这并不能真正适用于您可能想要使用它的用途，而是使用互联网后端要好得多*。*顺便说一句，这也有另一个原因，大多数用户不太喜欢打开蓝牙，因为担心电池电量耗尽。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-01T10:32:28.843

把这个留在这里，以防它帮助别人。

我能够按照[官方蓝牙教程](http://developer.android.com/guide/topics/connectivity/bluetooth.html)制作我的自定义聊天室并对其进行一些修改。不幸的是，我无法提供大部分代码，但主要思想是：

每个设备都充当服务器和客户端。当 Chat 启动时，设备启动其服务器线程。服务器线程与官方相同，但在接受连接时不会结束。它只是继续听。

客户端线程与教程中的相同。

服务器和客户端线程都管理相同的连接。[我按照本教程](https://stackoverflow.com/questions/8204298/android-bluetooth-socket-tutorial-for-non-blocking-communication)创建了用于接受消息的单独线程，并创建了一个用于发送消息的线程。

```
private void manageConnectedSocket(BluetoothSocket socket) {        
    //create thread responsible for sending messages.
    SendingThread w = new SendingThread(socket);
    MainActivity.addSendingThread(w);
    //Creates listener for messages to accept.       
    MainActivity.addListener(socket);
} 
```

现在，当用户单击发送按钮时，始终在主活动中，每个工作人员（发送线程）将消息发送到远程设备。监听是异步运行的。

重要的：

1.  您需要在消息发送失败时处理异常，并在检测到设备断开连接时删除设备的发送和接收线程。就我而言，我使用了众所周知的 UUID“00001101-0000-1000-8000-00805f9b34fb”。适用于每台设备。
2.  您需要在尝试以客户端身份连接之间等待 3 秒，因为某些设备的蓝牙硬件较弱并且它拒绝以客户端身份连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T12:33:50.557

Bt 连接最多支持 7 个 -10 连接。因此，您将被限制在该范围内。我认为它是为扩展主设备而不是随机通信而设计的

来源：在google上搜索“蓝牙编程”

# c# - 如何“释放” Microsoft.Office.Interop.Word.Application wordApp 实例？

> ID：10963621
> 
> 赞同：1
> 
> 时间：2012-06-09T18:44:50.540
> 
> 标签：c#, memory-management, garbage-collection

“释放”这个对象的替代方法是什么？它通常在调用该`.Exit()`方法时发生，但在这种情况下，我不能这样做，因为应该关闭单词应用程序实例的用户。我想这样做`wordApp = null`或调用`GC.Collect();`什么是最好的解决方案，为什么？提前致谢。

我目前正在使用这个：

```
 public static void Free()
    {
        if (wordApp != null)
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);
            GC.Collect();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:18:42.067

确保 Interop 对象被正确释放的最积极的方法是使用双`Collect`-<code>WaitForPendingFinalizers 模式，改编自[Releasing COM Objects](http://msdn.microsoft.com/en-us/library/aa679807%28v=office.11%29.aspx#officeinteroperabilitych2_part2_rco)：

```
Marshal.ReleaseComObject(wordApp);
wordApp = null;
GC.Collect(); 
GC.WaitForPendingFinalizers(); 
GC.Collect(); 
GC.WaitForPendingFinalizers(); 
```

> 在托管世界和非托管世界之间需要特别小心的互操作领域之一是在完成 COM 对象后干净地释放它们。在前面的示例中，我们设法使用标准垃圾收集实现了我们想要的所有行为。唯一轻微的改进是调用`GC.Collect`两次以确保任何可用于收集但在第一次扫描中幸存下来的内存在第二次扫描时被收集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-05T10:45:13.273

一个不那么激进的方法是这样的

```
 // Make sure to exit app first
        object saveOption = Microsoft.Office.Interop.Word.WdSaveOptions.wdDoNotSaveChanges;
        object originalFormat = Microsoft.Office.Interop.Word.WdOriginalFormat.wdOriginalDocumentFormat;
        object routeDocument = false;

        ((_Application)wordApp).Quit(ref saveOption, ref originalFormat, ref routeDocument);

        if (wordApp!= null)
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);

        // Set to null
        wordApp= null; 
```

但是，请确保所有文档都已关闭或关闭并保存！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-14T05:11:58.307

[来自 MSDN](https://msdn.microsoft.com/en-us/library/office/aa159887(v=office.11).aspx)

要解决 ReleaseComObject 返回值大于零的情况，您可以在执行 ReleaseComObject 直到返回值为零的循环中调用该方法：

```
Dim wrd As New Microsoft.Office.Interop.Word.Application
Dim intRefCount As Integer
Do 
  intRefCount = System.Runtime.InteropServices.Marshal.ReleaseComObject(wrd)
Loop While intRefCount > 0
wrd = Nothing 
```

# javascript - javascript 显示/隐藏按钮

> ID：10963622
> 
> 赞同：2
> 
> 时间：2012-06-09T18:44:52.820
> 
> 标签：javascript, jquery, button, hide, show

嗨，我有几个按钮，第一个是显示/隐藏，第一次单击时它可以正常工作。第二个是下一个表，当单击下一个表时，它应该隐藏表 1，只显示表 2。然后如果单击隐藏按钮，它应该隐藏表 1 和表 2，当前表 2 仍然显示当隐藏按钮是点击。这是我的问题和代码的示例：http: [//jsfiddle.net/zfnx6/27/](http://jsfiddle.net/zfnx6/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:09:37.047

我更新了您的代码，使其行为与您描述的一样，最大的变化是将外部表定义为 table1 和 table2 的容器。这样，单击顶部按钮（显示/隐藏）会同时影响两个表，而不必弄乱两个表的 if 语句。

HTML 中的按钮更改了一些参数，第二个按钮成为两个表格的切换按钮。如果您将使用两个以上的表，则当前方法不会太有效。

**演示** [http://jsfiddle.net/zfnx6/41/](http://jsfiddle.net/zfnx6/41/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T10:55:56.957

```
$(document).ready(function(){
    $("#hide").click(function(){ //#hide use your element id
        $("p").hide();            // use your element to hide
    });
    $("#show").click(function(){ //#show use your element id
        $("p").show();              // use your element to show
    });     
}); 
```

这只是基本方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:04:22.133

看看[jquery ui 手风琴](http://jqueryui.com/demos/accordion/)。

如果您希望一次只显示一个表格，您可能需要考虑使用它。

在你的小提琴中，你没有使用 jquery。在 jquery 中显示和隐藏元素非常容易，并且大大减少了您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T19:15:11.670

如果您对使用 jQuery 感兴趣，它会大量清理您的代码。这是一个例子：http: [//jsfiddle.net/zfnx6/43/](http://jsfiddle.net/zfnx6/43/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T19:57:16.767

我自己的变体：http: [//jsfiddle.net/zb9Tt/](http://jsfiddle.net/zb9Tt/)

我对您的 HTML 做了一些更改，但主要是关于 javascript。`toggleable`以下是一些非常轻巧的 jQuery，它将为页面上的无限组对象执行您想要的操作。该类`active`用于显示当前选择的“选项卡”。

```
 (function ($) {

    $(document).ready(function () {
        $("#togglebutton").bind("click", function () {
           $(".active, #nextbt").toggle();
        });

        $("#nextbt").bind("click", function () {
            var current = $(".active"); 
            var next = $(".active + .toggleable");

            if (next.length) {
                current.removeClass("active").hide();
                next.addClass("active").show();
            }
        });    
    });    
})(jQuery); 
```

# android - OnItemClick 崩溃

> ID：10963623
> 
> 赞同：0
> 
> 时间：2012-06-09T18:44:53.757
> 
> 标签：android, listview

我正在尝试`ListView`使用可点击的列表条目。当点击一个条目时，我想要它做的是显示一条 toast 消息。但是，只要我单击一个条目，应用程序就会崩溃。我真的不明白为什么会这样。这是我的代码：

```
package com.andriesse.android.dailyproductivity;

import java.util.ArrayList;

import com.andriesse.android.dailyproductivity.MyDB;

public class Main extends Activity implements OnItemClickListener, OnKeyListener {

ListView listview;

MyDB mydb;
TaskAdapter myadapter;

private class MyTask {
    public MyTask(String t) {
        task = t;
    }

    public String task;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.main);

    listview = (ListView) findViewById(R.id.listview);
    listview.setOnItemClickListener(this);

    mydb = new MyDB(this);
    mydb.open();

    myadapter = new TaskAdapter(this);

    listview.setAdapter(myadapter); 

}

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    String item = ((TextView)view).getText().toString();
    Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();
}

private class TaskAdapter extends BaseAdapter {
    private LayoutInflater layoutinflater;
    private ArrayList<MyTask> arraylist;

    public TaskAdapter(Context context) {
        layoutinflater = LayoutInflater.from(context);
        arraylist = new ArrayList<MyTask>();
        getdata();
    }

    public void getdata() {
        Cursor c = mydb.getTasks();
        startManagingCursor(c);
        if (c.moveToFirst()) {
            do {
                String task = c.getString(c
                        .getColumnIndex(Constants.TASK_NAME));
                MyTask temp = new MyTask(task);
                arraylist.add(temp);
            } while (c.moveToNext());
        }
    }

    public int getCount() {
        return arraylist.size();
    }

    public MyTask getItem(int i) {
        return arraylist.get(i);
    }

    public long getItemId(int i) {
        return i;
    }

    public View getView(int i, View view, ViewGroup group) {            
        ViewHolder holder;
        if (view == null || view.getTag() == null) {
            view = layoutinflater.inflate(R.layout.rowlayout, null);
            holder = new ViewHolder();
            holder.textview = (TextView) view.findViewById(R.id.textview);
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        holder.mytask = getItem(i);
        holder.textview.setText(holder.mytask.task);

        return view;
    }

    public class ViewHolder {
        MyTask mytask;
        TextView textview;
    }
}

private void addItem(String item) {
    if (item.length() > 0) {
        try {
            saveTaskToDB(item);
            myadapter.arraylist.add(new MyTask(item));
            myadapter.notifyDataSetChanged();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public void saveTaskToDB(String task) {
    mydb.insertTask(task);
}

@Override
public void onDestroy() {
    super.onDestroy();
    mydb.close();
}

public boolean onKey(View v, int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是我的 LogCat 日志：

```
06-09 20:50:41.743: E/AndroidRuntime(194): Uncaught handler: thread main exiting due to uncaught exception
06-09 20:50:41.773: E/AndroidRuntime(194): java.lang.ClassCastException: android.widget.RelativeLayout
06-09 20:50:41.773: E/AndroidRuntime(194):  at com.andriesse.android.dailyproductivity.Main.onItemClick(Main.java:57)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.widget.ListView.performItemClick(ListView.java:3285
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1640)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.os.Handler.handleCallback(Handler.java:587)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.os.Looper.loop(Looper.java:123)
06-09 20:50:41.773: E/AndroidRuntime(194):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-09 20:50:41.773: E/AndroidRuntime(194):  at java.lang.reflect.Method.invokeNative(Native Method)
06-09 20:50:41.773: E/AndroidRuntime(194):  at java.lang.reflect.Method.invoke(Method.java:521)
06-09 20:50:41.773: E/AndroidRuntime(194):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-09 20:50:41.773: E/AndroidRuntime(194):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-09 20:50:41.773: E/AndroidRuntime(194):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:52:58.020

发布堆栈跟踪。如果您添加它，我们更有可能提供帮助。

我可以告诉你，虽然问题可能出在你如何尝试将视图转换为 TextView。作为参数传入的视图可能不是 TextView，它可能是某种父布局。你可能需要使用

```
TextView mTxt = (TextView)view.findViewById(R.id.yourEdtTxtID); 
```

获取对 TextView 的引用

此外，尽管您可能不应该像这样在单击侦听器中手动更改 Row 的 TextView 上的文本。如果您需要更改值，您应该使用带有数据结构的适配器，该数据结构允许您将值更改为您喜欢的任何值，一旦在您的 ListView 上设置了适配器，它将自动为您更新屏幕上的视图当您更改结构中的数据时。

# sql - 检查以前的记录以更新 Oracle 中的当前记录

> ID：10963628
> 
> 赞同：2
> 
> 时间：2012-06-09T18:45:37.447
> 
> 标签：sql, oracle, plsql

我很难弄清楚如何检查以前的记录以查看是否应该更新当前记录。

不想使用滞后功能，因为我不会知道要返回多少条记录的信息。

我有一个包含员工提升信息的表。如果在过去 6 个月内之前的绩效增长 PCT 大于当前的绩效增长，我想在 IND 字段中打一个 X。当前记录是 2012/05 记录。

```
Emp 行动日期代码 proj PCT Ind
==================================================== ==
123 提高 2012/01 COL 帐户 2
123 加薪 2012/01 功勋软 7
123 加薪 2012/02 功绩帐户 4
123 募集 2012/05 功德软 6 ?

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:09:31.843

它不是特别有效，但您可以使用蛮力方法

```
UPDATE <<table_name>> a
   SET ind = 'X'
 WHERE <<date column>> = (SELECT MAX(<<date column>>
                            FROM <<table name>> b
                           WHERE a.emp = b.emp)
   AND EXISTS( SELECT 1
                 FROM <<table name>> c
                WHERE a.emp = c.emp
                  AND c.code = 'Merit'
                  AND c.action = 'raise'
                  AND c.pct  > a.pct
                  AND c.<<date column>> > sysdate - interval '6' month 
                  AND c.rowid != a.rowid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:17:07.767

如果您只是在寻找查询而不是更新，这可能会起作用

```
Select 
  emp, 
  action, 
  date, 
  code, 
  project, 
  pct,
  case when max(case when code='Merit' and action='raise' then pct end)
    over (partition by emp order by date 
      range between interval '6' month preceding and current row
    ) > pct then 'X' end as ind
From the_table 
```

我现在没有数据库来测试这个，所以我不完全确定这会起作用，但我认为它应该。**编辑**：制定了如何让 SQL Fiddle 在我的 iPad 上运行。这似乎可行，但是它将在满足条件的所有行中放置一个 X，而不仅仅是最近的。

# python - App Engine 如何使用用户服务在 http 和 https 上保持登录

> ID：10963629
> 
> 赞同：2
> 
> 时间：2012-06-09T18:46:05.033
> 
> 标签：python, google-app-engine

以下代码演示了我遇到的问题，它可以在[Github](https://github.com/AE-BaseApp/AE-TestApp.git)上找到。当我删除登录的安全路径时，代码可以工作，但是当我保护页面时它不会。或者，如果我使主页安全：始终/可选。除非您将 main.py 中的 http 方案从 https 更改为 http，否则此代码将无法在您的开发服务器上运行。

为什么此代码不适用于通过 https 的登录？

应用程序.yaml

```
application: testapp
version: 1
runtime: python27
api_version: 1
threadsafe: yes

libraries:
- name: webapp2
  version: latest

handlers:
- url: /login
  script: main.app
  secure: always

- url: /.*
  script: main.app
  secure: never 
```

主文件

```
import webapp2
from google.appengine.ext.webapp import template
from google.appengine.api import users
from login import LoginHandler
from admin import AdminHandler

class HomeHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if users.is_current_user_admin():
            loggedin = "Admin"
            values = {'loggedin': loggedin,
                      'logout_url': users.create_logout_url("/")}
        elif user:
            loggedin = "User"
            values = {'loggedin': loggedin,
                      'logout_url': users.create_logout_url("/")}
        else:
            loggedin = "Anonymous"
            values = {'loggedin': loggedin,
                      'logout_url': users.create_logout_url("/")}
        self.response.out.write(template.render('home.html', values))

app = webapp2.WSGIApplication([
    webapp2.Route(r'/', HomeHandler),
    webapp2.Route(r'/login', LoginHandler, schemes=['https']),
    webapp2.Route(r'/admin', AdminHandler, schemes=['https'])
], debug=True) 
```

登录.py

```
import webapp2
from google.appengine.ext.webapp import template
from google.appengine.api import users

#  Login page Request Handler Class
class LoginHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()

        values = {'login_url': users.create_login_url("/")}
        self.response.out.write(template.render('login.html', values)) 
```

管理员.py

```
import webapp2
from google.appengine.ext.webapp import template
from google.appengine.api import users

#  Login page Request Handler Class
class AdminHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()

        values = {'user': users.nickname()}
        self.response.out.write(template.render('admin.html', values)) 
```

主页.html

```
<html>
<body>
<p>Who is logged in: {{loggedin}}</p>
<ul>
  <li>
    {% ifequal loggedin "Anonymous" %}
      <a href="/login">Login</a>
    {% else %} <!-- user is logged in -->
      <a href="{{logout_url}}">Logout</a>
    {% endifequal %}
  </li>
  {% ifequal loggedin "Admin" %}
    <li class="right">
      <a href="/admin">Admin</a>
    </li>
  {% endifequal %}
</ul>
</body>
</html> 
```

登录.html

```
<html>
<body>
<ul>
  <li>
      <a href="{{login_url}}">Login</a>
  </li>
</ul>
</body>
</html> 
```

管理员.html

```
<html>
<body>
      <p>Your logged in as: {{user}}</p>
</body>
</html> 
```

正如您所看到的一个非常简单的示例，用户单击登录链接，转到他们使用 Google 身份验证登录的登录页面，然后重定向回不安全的主页。当用户返回主页时，预期的行为是“谁登录”返回 admin/user/anonymous 但我得到的只是匿名的，未添加注销 url 或管理员用户的管理 url。如果我使登录正常http，那么如果我有一个安全路由说/admin，该请求会收到401错误。

此代码仅在我将所有内容设置为 HTTPS 时才有效。我知道其他人正在使用安全登录页面，并且仍然能够访问不安全页面上的用户信息。我相信这与 cookie 的设置方式有关，但我对自己做错了什么感到茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:12:37.967

您是否检查过 FireCookie（或类似的）cookie 的详细信息？路径、域等？您是否使用不同的域名进行安全保护？比如 https 的secure.app.com 和http 的 www.app.com？

我从来没有在 GAE 上尝试过 https，我只是想知道如果我说的是明显的东西，我会很抱歉。

# mysql - 为什么我们在 LEFT JOIN 中有 OUTER 子句？

> ID：10963632
> 
> 赞同：2
> 
> 时间：2012-06-09T18:46:38.827
> 
> 标签：mysql, sql, sql-server, join

下面的2个查询有什么区别

**更新**

这个问题已经在[LEFT JOIN vs. LEFT OUTER JOIN in SQL Server](https://stackoverflow.com/questions/406294/left-join-and-left-outer-join-in-sql-server)的类似问题中得到解答。

```
SELECT * FROM ca 
LEFT JOIN exam 
ON ca.subject = exam.subject 
```

和

```
SELECT * FROM ca 
LEFT OUTER JOIN exam 
ON ca.subject = exam.subject 
```

表

```
Table 'CA'
--------------------
subject|score
----------------
ENG    |25
MTH    |34
BIO    |18

Table 'Exam'
--------------------
subject|score
----------------
ENG    |25 
```

运行 2 个查询在 mysql、sqlserver 2008 中产生相同的结果。我没有在 Oracle 中测试。

```
subject | score1 | subject | score1
--------------------------------------
ENG       14       ENG       44
MTH       28       NULL      NULL
BIO       22       NULL      NULL 
```

OUTER 子句的目的是什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T18:49:11.627

没有区别。`OUTER`关键字是可选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:54:19.257

它们是等价的，因为所有 LEFT JOIN 查询也是 LEFT OUTER JOIN。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Join_(SQL)#Outer_joins](http://en.wikipedia.org/wiki/Join_(SQL)#Outer_joins)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:49:56.030

`LEFT`和之间没有区别`LEFT OUTER`；`OUTER`关键字可以省略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T18:50:27.423

在某些数据库中，LEFT JOIN 被称为 LEFT OUTER JOIN，所以它是一回事。关键字 OUTER 是可选的 所以，提醒自己这是一个外连接。

关键字 LEFT、RIGHT 或 FULL 是必需的。左、右和全外连接是唯一的外连接类型。当然，关键字 JOIN 是强制性的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T18:51:11.673

有四种类型的连接：内连接、左外连接、右外连接和全外连接。左连接、右连接和完全连接只是外连接类型的缩写。

# visual-studio - 如何获取 JIT 编译代码的 VS 反汇编窗口中显示的源代码行？

> ID：10963634
> 
> 赞同：1
> 
> 时间：2012-06-09T18:46:46.907
> 
> 标签：visual-studio, jit, debug-symbols, disassembly

我正在为 CIL 字节码编写一个即时 x86-64 编译器。当我的代码生成器发出伪造的机器代码时，我不得不在反汇编窗口中对其进行调试，而没有关于机器代码如何映射到源字节码的信息，这使得它成为一种非常不愉快的体验。

我知道 VS 反汇编窗口可以显示源代码行映射，即使是 JIT 编译的代码，就像它使用 .NET CLR 代码一样。唯一的区别是我想要显示的源代码行没有任何文本文件支持，尽管如果需要我可以生成它们。

如何生成在反汇编窗口中查看源代码行所需的调试信息以及我的 JIT 编译的机器代码？

# html - 单选按钮 css 和 IE9

> ID：10963636
> 
> 赞同：0
> 
> 时间：2012-06-09T18:47:05.580
> 
> 标签：html, css, forms, webforms

您好我一直在尝试使用自定义单选按钮，以下是我的 CSS。我已经用两个浏览器 IE9 和 Google chrome 在 google chrome 上对其进行了检查，但在 ie9 上我提到的单选按钮图像没有显示请让我知道如何修复以下 css 所以它也可以在 ie9 上工作

```
input[type="radio"] {
background:url('images/radio_Checked.jpg');
padding:0;
width:10px;
height:10px;
display: inline-block;
appearance:none;
-moz-appearance:none;
-webkit-appearance:none;
vertical-align:middle;
}
input[type="radio"]:checked  {
background:url('images/radio_Unchecked_Small.jpg');

} 
```

**还尝试了以下 css 它也只能在谷歌上正常工作**

```
input[type="radio"]:checked
{
 -khtml-appearance: none;
 background: url('images/radio_Checked.jpg');
 width: 10px;
 height: 10px;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:58:42.267

尝试向单选按钮添加`class`or`id`属性并在 CSS 文件中为它们设置样式

```
.styled
{

background: url('test.jpg');

}

#styled
{
background: url('test.jpg');
} 
```

HTML：

```
<input type="radio" name="radio" class="styled">

<input type="radio" name="radio" id="styled"> 
```

# html - 两侧导航栏

> ID：10963637
> 
> 赞同：0
> 
> 时间：2012-06-09T18:47:06.983
> 
> 标签：html, css

最近我试图实现一个导航栏，它有两个侧面，一个在右边，一个在左边，它们是分开的（不是同一个 div）。我已经设法让两个导航栏正常工作，但我的问题是，当浏览器窗口较小时，导航栏右侧的包装器（1000px）不会粘在右侧，而是在中间的某个地方.

我的代码到现在

css

```
div.wrapper
{
  min-width: 1000px;
}
div.menul
{
  float: left;
  width: 880px;
  padding: 15px;
  background-color: red;
}
div.menur
{
  position: absolute;
  right: 0;
  z-index: 999;
  width: 250px;
  padding: 15px;
  background-color: yellow;
} 
```

html

```
<div class="wrapper">
  <div class="menul">
    menu
  </div>
  <div class="menur">
    menu
  </div>
</div> 
```

帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:55:42.703

只需添加`position: relative`到`#wrapper`CSS。这将导致正确的菜单相对于`#wrapper`页面而不是页面本身定位

[[例子]](http://jsfiddle.net/ZnqqJ/)

# ruby-on-rails - 批量分配真的是 Homakov 的 GitHub hack 的罪魁祸首吗？

> ID：10963648
> 
> 赞同：3
> 
> 时间：2012-06-09T18:48:07.217
> 
> 标签：ruby-on-rails, security, model-view-controller, mass-assignment

许多评论员（例如[ZDNet](http://www.zdnet.com/blog/security/how-github-handled-getting-hacked/10473)）认为 GitHub 案例的弱点在于，[Homakov 发现](http://homakov.blogspot.co.uk/2012/03/how-to.html)的模型易受攻击，因为它的属性启用了质量分配。

但是，我认为问题不在于这个，而是未能`before_filter`在控制器中使用（或类似的）来确保他更新的表中的任何给定行只能由管理员或具有 ID 的用户更新列在该行中。***如果控制器中有这样的过滤器，那么即使模型的属性是可批量分配的***，表格也会受到保护。

我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T20:46:03.103

据我了解，此问题与 before_filters 检查管理员无关。存在一个属性，在您引用 public_keys 模型上的 user_id 的示例中，该属性不应该暴露于批量分配。

`before_filter`可以作为安全的另一个“层”，也`.slice`可以用来确保您只获得您应该获得的属性也可以工作。

最后一点：我认为 admin != god，意思是，我发现有权执行 Homakov 利用此问题执行的操作的 Github 管理员没有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T20:30:17.993

是的，我认为你是对的。

在这种情况下，您还可以使用授权 gem，例如：[cancan](https://github.com/ryanb/cancan)、[声明式授权](https://github.com/stffn/declarative_authorization/)、[heimdallr](https://github.com/roundlake/heimdallr) ...

问题不在于您可以使用。问题是如何帮助不要忘记在某些情况下使用它。例如 cancan 有以下方法：`check_authorization`它有助于检查所有操作的授权。

关于这一点，霍米亚科夫说。添加受保护的属性将是最简单的方法。也许只是因为限制授权的解决方案不同而发现了漏洞。在某些情况下，添加受保护的属性会导致您的 api 失去灵活性。

# bash - 我应该使用什么方法在 bash 脚本中使用“printf”将错误消息写入“stderr”？

> ID：10963653
> 
> 赞同：33
> 
> 时间：2012-06-09T18:48:52.197
> 
> 标签：bash, stderr, io-redirection, bash4

我想将脚本`printf`中 a的输出定向到而不是.`bash``stderr``stdout`

我**不是**在询问是否重定向它们`stderr`或`stdout`从它们当前路由的位置。我只是希望能够将输出从 a 发送`printf`到`stderr`而不是默认的`stdout`.

我做了一些实验，发现附加`1>&2`到`printf`，如下面的示例所示，似乎可以满足我的要求。但是，我***没有***使用 bash 的经验。所以我的*主要*问题是是否有“*更好*”的方法来做到这一点`bash`？

“*更好*”是指有另一种更常用、更传统或更惯用的方法吗？一个更有经验的 bash 程序员会怎么做呢？

```
#!/bin/bash
printf "{%s}   This should go to stderr.\n" "$(date)" 1>&2 
printf "[(%s)] This should go to stdout.\n" "$(date)" 
```

我还有一个*次要*问题。我之所以问它不是因为我*需要*知道，而是更多是因为我只是好奇并且想更好地了解正在发生的事情。

上面的内容似乎只有在 shell 脚本中运行时才有效。当我从命令行尝试时，它似乎不起作用。

这是我的意思的一个例子。

```
irrational@VBx64:~$ printf "{%s} Sent to stderr.\n" "$(date)" 1>&2 2> errors.txt
{Sat Jun  9 14:08:46 EDT 2012} Sent to stderr.
irrational@VBx64:~$ ls -l errors.txt
-rw-rw-r-- 1 irrational irrational 0 Jun  9 14:39 errors.txt 
```

我希望`printf`上面的命令没有输出，因为输出应该去`stderr`，然后应该去一个文件。但这不会发生。嗯？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-09T18:55:51.130

首先，是`1>&2`的，这是正确的做法。

其次，您的`1>&2 2>errors.txt`示例不起作用的原因是因为重定向的确切细节。

`1>&2`意思是“使文件句柄 1 指向文件句柄 2 当前所做的任何地方”——即，本应写入 stdout 的内容现在转到 stderr。`2>errors.txt`意思是“打开一个文件句柄`errors.txt`并让文件句柄 2 指向它”——也就是说，本来应该写入 stderr 的东西现在进入`errors.txt`. 但是文件句柄 1 根本不受影响，所以写入 stdout 的内容仍然会转到 stderr。

正确的做法是`2>errors.txt 1>&2`，这将使对 stderr 和 stdout 的写入都转到`errors.txt`，因为第一个操作将是“打开`errors.txt`并让 stderr 指向它”，第二个操作将是“让 stdout 指向 stderr 指向的位置现在”。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-09T18:52:45.993

1.  这对我来说似乎很合理。但是，您不需要`1`- 它会按原样工作，但它是隐含的：

    ```
    printf "{%s}   This should go to stderr.\n" "$(date)" >&2 
    ```

2.  您有一个操作顺序问题：

    ```
    $ printf "{%s} Sent to stderr.\n" "$(date)" 2> errors.txt 1>&2
    $ ls -l errors.txt 
    -rw-r--r--  1 carl  staff  47 Jun  9 11:51 errors.txt
    $ cat errors.txt 
    {Sat Jun  9 11:51:48 PDT 2012} Sent to stderr. 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-09T21:18:25.217

典型的成语有：

```
echo foo >&2           # you don't need to specify file descriptor 1
echo foo > /dev/stderr # more explicit, but wordier and less portable 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-25T01:13:36.193

这个问题似乎表明了一些混乱。您不想重定向标准输出，您只想让 printf 将其输出发送到标准错误...但是为此，您必须使用重定向。

printf 命令总是将正常输出发送到它的标准输出。这就是 printf 所做的。为了实现您想要的，您必须让 shell 安排 stdout 临时指向您想要输出的任何位置。注意我说的是暂时的。当您键入类似的命令时

```
$ printf "Hello World!" >&2 
```

shell 在 printf 语句执行期间修改标准输出句柄。然后 shell 在继续执行下一个命令之前恢复 stdout 的原始值。事实上，如果你想永久重定向标准输出，你可以使用特殊命令

```
$ exec >&2 
```

在 shell 执行此操作后，shell 不再记住 stdout 句柄的原始值。

# java - Struts2：我的静态参数被 get 方法覆盖

> ID：10963654
> 
> 赞同：0
> 
> 时间：2012-06-09T18:49:09.023
> 
> 标签：java, struts2

我有一个按校园划分的页面。基本上是同一页，但我根据校园更改信息。

参数“campus”，设置谁是当前使用的校区。

这项工作非常好，例如，如果我访问*localhost/page/campus1/index.action*，getCampus 方法返回“campus1”，这是预期的。

但是如果我访问*localhost/page/campus1/index.action?campus=campus2*， getCampus() 方法返回 "campus2"; 我尽量避免这种行为。我希望 {campus} 参数位于优先级的首位，并且没有人可以覆盖他。

我使用“param”拦截器中的“excludeParams”来排除“campus”，但现在getCampus返回null。

如何从 struts2 读取的参数中排除一些 get/post 方法？

或者

可以避免静态参数被其他参数覆盖吗？

编辑：我有一个拦截器，他说所选校园是否有效。

如果有人在 url 中输入了一个真实的校园，但输入了一个错误的校园的“获取方法”，则测试会通过，但所有信息都会出错。

**我的行动**

```
@Action(value="{campus}/index",
    results={
        @Result(name=SUCCESS,location="/jsp/campusindex.jsp"),
    }
)
public String campusIndex(){
    return SUCCESS;
}
public void setCampus(String campus){
    this.campus=campus;
}
public String getCampus(){
    return this.campus;
} 
```

**我的jsp**

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<s:label name="campus"/> 
```

**我的拦截器**

```
 public String intercept(ActionInvocation actionInvocation) throws Exception {
     ActionConfig config = actionInvocation.getProxy().getConfig();
    String campus = config.getParams().get("campus");
    try{
        Campus.isaValidCampus(campus);
    } catch(Exception e){
        return "error404";
    }
    return actionInvocation.invoke();
} 
```

# android - Android：如何为应用程序设置自定义键盘？

> ID：10963661
> 
> 赞同：3
> 
> 时间：2012-06-09T18:49:39.980
> 
> 标签：android, input, keyboard

我正在寻找的一个很好的例子是 WolframAlpha 应用程序使用的自定义键盘。

理想情况下，我想为每个 EditText 设置一个自定义键盘（一个只显示某些字符/数字的键盘），尽管我不确定这是否可行。

如果有人可以向我指出如何执行此操作和/或以任何其他方式提供帮助的示例方向，我们将不胜感激。

到目前为止，我一直无法使用谷歌找到我需要完成的示例。

![在此处输入图像描述](../Images/dd09049a5f87b4885ecb815e57fc1ef3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:57:03.303

请参阅[TextView](http://developer.android.com/reference/android/widget/TextView.html)的[android:imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)和[android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)来告诉键盘你想要什么类型的键盘，以及你是否想要一个回车键或其他东西（如“Go”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T20:36:44.640

要开发自定义键盘，您应该检查这个

android 官方[文档](http://developer.android.com/resources/articles/creating-input-method.html)和这个[示例应用程序](http://developer.android.com/resources/samples/SoftKeyboard/index.html)

并且本[**教程**](http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html)可以帮助您

# java - 使用 .jar 文件编辑 .jar 文件

> ID：10963662
> 
> 赞同：1
> 
> 时间：2012-06-09T18:49:40.837
> 
> 标签：java, jar

我为我的朋友编写了一个更新程序来更新我为她编写的另一个程序作为离开的礼物。我已经编写了所有需要的代码来检索从服务器更新的类文件并将它们保存在临时内存中。我需要帮助的是让程序替换第一个 jar 文件中的类文件，这样她就不必手动更新。注意：主程序在更新期间没有运行，所以没有爆炸的 jars。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:39:35.283

如果 Java Web Start 不是您想要的，并且`jar`可执行文件在您朋友的计算机上可用（因为 JDK 安装在您朋友的计算机上，或者您将其与您的应用程序一起分发），您可以运行

> [`jar uf`](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/jar.html) *jar 文件输入文件*

如果`jar`要从 Java 程序中调用可执行文件，只需使用[`Runtime.exec`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html). 有关通过可执行文件更新 JAR 的更深入讨论`jar`，请参阅 Sun Developer Network 的文章[“更新 JAR 文件”。](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/update.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T06:26:57.953

只要应用程序。[有一个 GUI，使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署它。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供**“一键式”安装**¹。
> 
> JWS 提供了许多吸引人的功能，包括但不限于闪屏、桌面集成、文件关联、**自动更新**²（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本划分本地和其他资源下载，运行时环境配置（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

1.  这对用户来说很容易。
2.  自动更新是内置的，部署者所要做的就是上传新的 Jar。

# graph-theory - 确定包含具有额外条件的给定节点集的节点数量最少的图

> ID：10963667
> 
> 赞同：1
> 
> 时间：2012-06-09T18:50:17.733
> 
> 标签：graph-theory, graph-algorithm

我有一个未加权的有向图，其中可能有也可能没有周期。现在给定一组节点，我需要返回一个图，其中包含给定节点和最小数量的节点，以便它们连接起来。我无法创建新的边缘，所以我需要使用现有的边缘。

希望这些图片能说明问题。从一张图开始，

![在此处输入图像描述](../Images/845e07519aefdaf3090217384dca5d2b.png)

假设我们想要具有节点 c、f 和 g 的图，该函数将返回此图 ![在此处输入图像描述](../Images/f9b64949c5f42f5adce8f62500484bd0.png)

但是，还有一个条件。每条边都有一个名为 required 的布尔变量。如果设置为 true，则该边和相应的节点也需要包含在图中。

这是另一张图片来说明黑色边缘不是必需的，但红色边缘是必需的假设我们给定 a 和 c 作为要包含的节点。

![在此处输入图像描述](../Images/fe135a63eeff26a45ea29a210e8f4b90.png)

因此，它不会返回 A->C 的图形，而是返回这个

![在此处输入图像描述](../Images/5c94a07a151a26a88a785dbe5d6d9cfa.png)

为了更清楚地说明这一点，如果我们想要一个带有 b 和 c 的图，它也会返回该图，因为该边是必需的。

如何返回此图？我不希望返回带有循环的图形，但我意识到这并不总是可能的，因为循环的边缘可能都被标记为所需的。

我最初的想法是制作一份保留在所需边上的图副本，然后尝试将不相交的图拼凑在一起。但是在我所有尝试将图表拼凑在一起的过程中，我找到了一个反例，表明它不是最小的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:26:11.110

您在第一个示例中的预期输出是否包括节点 e，所有其他节点都可以从该节点到达？还是您的意思是弱连通性（意味着边缘的方向无关紧要）？我猜是第二种情况（从您的 A、B、C 示例来看），然后您可以

1.  只是忽略边缘是有向的（线性时间），
2.  [收缩](http://en.wikipedia.org/wiki/Edge_contraction)“必需的”边（线性时间），
3.  在所需点的子集上计算[成对最短路径](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)（O(|V|³) 但我想你可以将其推低到 O(r|V|²) 一些东西，其中 r 是所需点的数量），然后
4.  在所需点上找到[最小生成树(O(r²))](http://en.wikipedia.org/wiki/Minimum_spanning_tree)

那是你想要的吗？

# android - 阻止标签更改

> ID：10963672
> 
> 赞同：0
> 
> 时间：2012-06-09T18:51:25.580
> 
> 标签：android, tabs

我需要什么，除非我的平板电脑连接到服务器，否则我无法更改选项卡。我有一个选项卡主机，它全部使用同一个 java 文件。我认为我需要做的就是在文件中进行某种测试，除非布尔值为真，否则不要让代码更改选项卡。但是我不知道该怎么做？如果您需要查看我的任何代码，请将其留在评论框中。感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:51:36.750

好吧，我想你可以尝试通过调用来禁用/启用标签上的点击：

```
myTabHost.getTabWidget().setClickable(isConnectedToServer); 
```

但我不确定这是好的用户体验，让您的用户更改标签怎么样，但如果无法访问内容，则会在标签的主视图中显示一条消息“服务器无法访问，请检查您的互联网连接”或类似的东西.

更新：试试这个（对于你的每个标签）：

```
myTabHost.getTabWidget().getChildTabViewAt(0).setEnabled(false);
myTabHost.getTabWidget().getChildTabViewAt(1).setEnabled(false);
myTabHost.getTabWidget().getChildTabViewAt(2).setEnabled(false); 
```

另一个更新：

```
public class MyActivity extends Activity {
    private TabWidget mTabWidget = null;
    protected void onCreate(Bundle savedInstanceState) {
    ...
    mTabWidget = myTabHost.getTabWidget();
    ...
}

protected void refreshTabs(boolean isConnected) {
    mTabWidget.getChildTabViewAt(0).setEnabled(isConnected);
    mTabWidget.getChildTabViewAt(1).setEnabled(isConnected);
    mTabWidget.getChildTabViewAt(2).setEnabled(isConnected);
} 
```

现在，您可以随时`refreshTabs`在代码中调用以启用/禁用它们。

# java - Java Android 2.3.3，如何从 XML 文件加载多个数据？

> ID：10963674
> 
> 赞同：0
> 
> 时间：2012-06-09T18:51:49.403
> 
> 标签：java, android, xml, android-xml

我在 res/values 中有一个 XML 文件。该文件包含人员列表。然后将其呈现在列表视图中。到目前为止，没有任何问题。但我想修改我的列表视图以显示每个人的图片和一些细节。对于列表视图，这个想法是这样的：

```
<row>
  Name - Picture
  <i>Description</i>
</row> 
```

我的问题是，如何将所有这些信息存储在我的 XML 文件中？通常这不是问题，例如：

```
<persons>
  <person name="Scott">
    <picture>path to asset somehow?</picture>
    <desciption>Description of Scott</desciption>
  </person>
  ...
</persons> 
```

但是如何将其添加到 res/value/persons.xml 文件中？唯一的事情就像一个字符串数组，我确实希望 Scott 的描述以 Scott 而不是其他人结束。这是可能的还是我必须在其他地方添加这个 xml 文档然后以某种方式解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:19:40.963

如果可能的话，最好将这些数据保存在数据库中......

一次性工作：

1-当应用程序启动时检查数据库“DATABSE NAME”是否存在。2-如果不创建数据库并解析XML并放入数据库。

重复工作：

3-从/数据库中获取和更新对于一次又一次地用 XML 写入大数据来说是简单而有效的。

# php - 在一次查询中将多行唯一信息提交到 MySQL 数据库

> ID：10963676
> 
> 赞同：2
> 
> 时间：2012-06-09T18:51:57.493
> 
> 标签：php, mysql, html

我一直在扫描其他类似的问题，但我没有任何运气。

这是我现有的页面：[http ://excelwrestling.com/dual.php](http://excelwrestling.com/dual.php)

您会在网页上看到表单的底部三行相同，但每一行都有唯一的信息。我试图让用户选择每个框，然后当他们点击提交时，它将所有信息发送到数据库，每一行都是唯一的。

```
Here a sample of my html:

    <select name="Weight">

<option value="Weight">Weight:</option>
    <option value="100">100</option>
        <option value="105">105</option>
        <option value="115">115</option>
        <option value="125">125</option>
        <option value="135">135</option>
        <option value="145">145</option>
        <option value="152">152</option>
        <option value="160">160</option>
        <option value="175">175</option>
        <option value="195">195</option>
        <option value="HWT">HWT</option>
        </select>
</select>

Here is the action file:

// Get values from form 
$Pool=$_POST['Pool'];
$Round=$_POST['Round'];
$Team_1=$_POST['Team_1'];
$Team_2=$_POST['Team_2'];
$Mat=$_POST['Mat'];
$Name_1=$_POST['Name_1'];
$Name_2=$_POST['Name_2'];
$Score=$_POST['Score'];
$Winner=$_POST['Winner'];
$Finished=$_POST['Finished'];

// Insert data into mysql 
$sql="INSERT INTO $tbl_name(Pool, Round, Team_1, Team_2, Mat, Weight, Name_1, Name_2, Score, Winner, Finished)

VALUES('$Pool','$Round','$Team_1','$Team_2','$Mat','$Weight','$Name_1','$Name_2','$Score','$Winner','$Finished')"

. implode ('$Pool','$Round','$Team_1','$Team_2','$Mat','$Weight','$Name_1','$Name_2','$Score','$Winner','$Finished',$query_row); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:18:07.293

首先，您需要为表单元素创建唯一名称，以便提交多个值。例如：

```
<option value="Weight_1">Weight:</option>
...
<option value="Weight_2">Weight:</option>
...
<option value="Weight_3">Weight:</option> 
```

在“动作”文件中，您将需要引用这些新变量（并且您还应该在插入表之前清理用户发布的数据，如 technoTarek 所说）：

```
$Weight_1=mysql_real_escape_string($_POST['Weight_1']);
$Weight_2=mysql_real_escape_string($_POST['Weight_2']);
$Weight_3=mysql_real_escape_string($_POST['Weight_3']);
... 
```

然后，要对同一个表进行多次插入，您可以简单地用逗号分隔记录：

```
$sql="INSERT INTO $tbl_name
(Pool, Round, Team_1, Team_2, Mat, Weight, Name_1, Name_2, Score, Winner, Finished)
VALUES
('$Pool','$Round','$Team_1','$Team_2','$Mat','$Weight_1','$Name_1_1','$Name_2_1','$Score_1','$Winner_1','$Finished_1'),
('$Pool','$Round','$Team_1','$Team_2','$Mat','$Weight_2','$Name_1_2','$Name_2_2','$Score_2','$Winner_2','$Finished_2'),
('$Pool','$Round','$Team_1','$Team_2','$Mat','$Weight_3','$Name_1_3','$Name_2_3','$Score_3','$Winner_3','$Finished_3');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:59:38.097

不要尝试一次插入所有记录，只需尝试使用循环插入记录或使用 foreach 语句一次插入一条记录。

那么这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T20:21:09.850

我通常支持@mmxxiii 提供的答案......但它应该包括一个非常重要的步骤。在插入数据库之前，您应该始终确保您的数据是安全的，即使您是输入数据的人。

通过对字符串值使用 mysql_real_escape_string() 或强制类型转换（例如，强制整数值成为整数）来清理数据。

```
// Get values from form 
$Pool=mysql_real_escape_string($_POST['Pool']);
$Round=(int)$_POST['Round'];
$Team_1=(int)$_POST['Team_1'];
$Team_2=(int)$_POST['Team_2'];
$Mat=(int)$_POST['Mat'];
$Name_1=mysql_real_escape_string($_POST['Name_1']);
$Name_2=mysql_real_escape_string($_POST['Name_2']);
$Score=mysql_real_escape_string($_POST['Score']);
$Winner=mysql_real_escape_string($_POST['Winner']);
$Finished=mysql_real_escape_string($_POST['Finished']); 
```

# php - 使用希伯来语的 php 中的 Unicode 编码

> ID：10963680
> 
> 赞同：0
> 
> 时间：2012-06-09T18:52:13.320
> 
> 标签：php, encoding

我正在尝试从网页获取一些信息，但是它采用不同的编码是否有一种简单的方法可以转换为 utf8 然后使用它？

例如，我正在获取我需要访问的这些 url

```
http://www.mega.co.il/jsfweb/cat/&#1496;&#1493;&#1508;&#1493;/
http://www.mega.co.il/jsfweb/cat/&#1490;&#1489;&#1497;&#1504;&#1492;_&#1502;&#1500;&#1493;&#1495;&#1492;/
http://www.mega.co.il/jsfweb/cat/&#1490;&#1489;&#1497;&#1504;&#1492;_&#1500;&#1488;&#1512;&#1493;&#1495;/
http://www.mega.co.il/jsfweb/cat/&#1490;&#1489;&#1497;&#1504;&#1492;_&#1502;&#1493;&#1514;&#1499;&#1514;/
http://www.mega.co.il/jsfweb/cat/&#1490;&#1489;&#1497;&#1504;&#1492;_&#1510;&#1492;&#1493;&#1489;&#1492;/
http://www.mega.co.il/jsfweb/cat/&#1490;&#1489;&#1497;&#1504;&#1492;_&#1500;&#1489;&#1504;&#1492;/
http://www.mega.co.il/jsfweb/cat/&#1511;&#1493;&#1496;&#1490;/ 
```

我如何将其转换为 utf8，然后在 php 中进行 urlencode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:42:19.683

您可以尝试使用函数[html_entity_decode()](http://www.php.net/manual/en/function.htmlspecialchars.php)来解码该实体。要更改解码，请使用[mb_convert_encoding()](http://cz2.php.net/manual/en/function.mb-convert-encoding.php)。我没有希伯来语的经验，所以我不知道它是否有用。

# cocos2d-iphone - Cocos2D 2.0 - 一个 CCSpriteBatchNode 可以用于多个类吗？

> ID：10963687
> 
> 赞同：1
> 
> 时间：2012-06-09T18:53:18.660
> 
> 标签：cocos2d-iphone

我不知道这是否可能，但我想创建一个大纹理图集并将其用于应用程序的所有类。

一个 CCSpriteBatchNode 可以用于多个类吗？

假设我在主类上创建它

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"atlasGeral.plist"];
self.batchNodeGeneral = [CCSpriteBatchNode batchNodeWithFile:@"atlasGeral.png"];
[self addChild:self.batchNodeGeneral]; 
```

在使用 CCSpriteBatchNode 之前，我有另一个类在主类上创建 CCLayers，即初始化，如下所示：

```
-(id) init 
{

   if( (self=[super init])) {

        self.bg = [CCSprite spriteWithFile: @"cCircularBG.png"];
        [self addChild:self.bg];

        self.dr = [CCSprite spriteWithFile: @"cCircularDR.png"];
        [self addChild:self.dr];      
  }
  return self;  // self is a CCLayer
} 
```

这可以使用主类中的 self.batchNodeGeneral 进行优化吗？我的想法是用类似**[CCSprite spriteWithSpriteFrameName:...**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T20:10:47.350

我不完全确定我是否遵循，但我很确定答案是肯定的。

CCSpriteBatchNode 与类没有任何关系，它与资产有关。使用批处理节点的重要限制是批处理中的每个精灵都需要引用相同的纹理图集。因此，为您的整个应用程序拥有一个批处理节点并让每个游戏类都将自己的精灵添加到该批处理中是非常好的。如果您的纹理图集变得大于目标硬件上的最大纹理大小，这可能会变成一个实际问题（有关详细信息，请参阅 iOS 设备规范），但如果您仍然希望拥有全局批次和大量资产，则创建起来并不难一个由纹理 ID 索引的批处理池，为每个图集创建一个批处理节点，并且每当您创建一个新的精灵时，将其添加到适当的批处理中。

老实说，我觉得整个批处理节点的事情对于 Cocos2D 来说是一个糟糕的组合，它可以使开发人员几乎完全透明，同时仍然保持其效率，但也许这种观点并不完全公平，因为我没有在渲染中挖掘代码来了解他们的动机。我想这会与对深度排序如何工作等的期望相混淆，但我仍然不明白为什么渲染的批处理对象是程序员的责任，它应该由引擎来完成。

编辑以添加可能的解决方案：

```
-(id) initWithMainClass:(MainClass*)mc
{

   if( (self=[super init])) {

        self.bg = [CCSprite spriteWithSpriteFrameName: @"cCircularBG.png"];
        [mc.batchNodeGeneral addChild:self.bg];

        self.dr = [CCSprite spriteWithSpriteFrameName: @"cCircularDR.png"];
        [mc.batchNodeGeneral addChild:self.dr];      
  }
  return self;  // self is a CCLayer
}
` 
```

因此，当您初始化其他类之一时，您将主类实例作为参数传递，以便您可以访问其字段。或者使主/管理器类成为单例，或者找到适合您需要的另一种架构。

# c++ - 如何捕获在 Qt C++ 中调用 setStyleSheet() 时打印的错误？

> ID：10963689
> 
> 赞同：2
> 
> 时间：2012-06-09T18:54:03.113
> 
> 标签：c++, qt, stylesheet

例如：

`mywidget->setStyleSheet("QSlider::groove:horizontal { hight: 200px; }");`

将其打印到 Qt Creator 中的控制台：

`Unknown property hight`

在这种情况下，程序员很明显错误出在哪里，但如果是另一个人将样式表作为外部文件工作怎么办？如果该人无权访问 Qt Creator 来查看消息怎么办？捕获消息并以某种特定于应用程序的方式将其显示给用户会很好。这是重定向标准错误的简单任务吗？还是更特定于 Qt？我会很感激任何例子。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:51:05.120

您可以使用 qInstallMsgHandler() 来捕获 Qt 的错误消息。在此处查看文档：http: [//doc.qt.io/archives/qt-4.7/qtglobal.html](http://doc.qt.io/archives/qt-4.7/qtglobal.html)

我抄送文档中的示例。您可以轻松修改它以在用户界面中显示这些消息。

```
void myMessageOutput(QtMsgType type, const char *msg)
 {
     switch (type) {
     case QtDebugMsg:
         fprintf(stderr, "Debug: %s\n", msg);
         break;
     case QtWarningMsg:
         fprintf(stderr, "Warning: %s\n", msg);
         break;
     case QtCriticalMsg:
         fprintf(stderr, "Critical: %s\n", msg);
         break;
     case QtFatalMsg:
         fprintf(stderr, "Fatal: %s\n", msg);
         abort();
     }
 }

 int main(int argc, char **argv)
 {
     qInstallMsgHandler(myMessageOutput);
     QApplication app(argc, argv);
     ...
     return app.exec();
 } 
```

注意：在 Qt 5.0 中它已被弃用。请改用 qInstallMessageHandler()。

# c - 使用 Structs 调试 C 程序

> ID：10963690
> 
> 赞同：0
> 
> 时间：2012-06-09T18:54:03.867
> 
> 标签：c, file, pointers, structure

我正在尝试编写一个程序，对我的计算机科学 1 课程中的速配信息进行分类以获得额外的学分；我遇到了一个奇怪的问题。程序在运行循环两次后遇到一系列嵌套循环时崩溃（在调用调试函数的地方）。函数传输数据；仅设计用于从文件中获取数据并将其移动到结构中，以便稍后由尚未编写的函数进行处理。我一生都想不通，所以非常欢迎任何建议，下面我已经放置了代码，下面是我正在使用的测试数据。

```
caData transferData(fData * fileData, caData * workingData, int numCouples)
{
    int i = 0, j = 0, k = 0;
    workingData->maData = (struct mData*)malloc(sizeof(mData)*(numCouples*2));//Create Array of Match Data with cells equal to double the number of couples
    workingData->maData->couData = (struct cData*)malloc(sizeof(cData)*numCouples);//Create a Couple structure array with a number of cells equal to the number of couples.
    ///TODO:
    //Read in Names
    for(i = 0; i < (numCouples * 2); i++)//Rotate through Matches
    {
        if(i < numCouples)//Men First
        {
            debug();
            for(j = 0; j < numCouples; j++)//Scan in First half of Couples
            {
                for(k = 0; k < numCouples; k++)//Scan In Male Names
                {
                    fscanf(fileData->inputData, "%s", workingData->maData[i].couData[j].guyName);
                }

                for(k = 0; k < numCouples; k++)//Scan In Female Names
                {
                    fscanf(fileData->inputData, "%s", workingData->maData[i].couData[j].girlName);
                }
            }
        }
        else//Now the women
        {
           for(j = 0; j < numCouples; j++)//Scan in First half of Couples
            {
                for(k = 0; k < numCouples; k++)//Scan In Female Names
                {
                    fscanf(fileData->inputData, "%s", workingData->maData[i].couData[j].girlName);
                }

                for(k = 0; k < numCouples; k++)//Scan In male Names
                {
                    fscanf(fileData->inputData, "%s", workingData->maData[i].couData[j].guyName);
                }
            }
        }
    }
    //Read In Scores
    //Compute differances

} 
```

编辑：将代码压缩到错误的位置，即调用调试函数的位置；它运行两次，然后崩溃。它返回一个 -1073741819 (0xC0000005)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:15:12.430

`fscanf()`接受一个`FILE*`参数，你已经给它传递了一个`fData*`. 除非这是一个别名，`FILE*`否则它不会做任何有意义的事情，如果它是一个类型别名 (typedef)，为什么要以这种方式混淆它？

您正在分配传递给函数的某些结构的元素。如果不显示您传递的内容和结构的定义，则无法验证所示代码的正确性，但使用`fscanf()`分配字符串时最常见的错误是溢出缓冲区或未在第一名。在这种情况下，我将不得不询问`guyname`and`girlname`成员是否是足够长度的数组。如果它们只是指针，那么您需要为数据分配空间。您还可以修改格式说明符以确保无法将太长的字符串复制到这些成员。

如果调用者传入，`workingData`则调用者应负责分配任何必要的数据。在本地分配动态内存并将其传递回调用者是不好的做法 - 它提出了内存将在何时何地被释放的问题，并要求内存韭菜。

最后，调试此代码的最简单、最快和最好的方法是在符号调试器中单步调试。

# asp.net - MVC4 移动框架

> ID：10963691
> 
> 赞同：2
> 
> 时间：2012-06-09T18:54:18.107
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

由于 mvc4 mobile 仍然是新的并且当时有关它的信息有限，我想知道这个移动框架是否适用于 windows phone 应用程序或一般适用于移动 web 浏览器。换句话说，如果我创建一个 mvc4 移动应用程序，它是否兼容所有移动浏览器？感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T02:22:08.770

它通常适用于移动网络浏览器。更多信息和如何测试不同浏览器的列表位于[http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)。

# api - 如何在基本的 http auth 上使用 curl 发布 JSON 数据？

> ID：10963706
> 
> 赞同：2
> 
> 时间：2012-06-09T18:56:03.913
> 
> 标签：api, rest, curl

我想使用 curl unix 命令发布数据，我通过谷歌搜索得到的结果如下所示：

```
curl --dump-header - -H "Content-Type: application/json"  -X POST --data '{"description": "This will prbbly be my lst post.", "transaction_id": "2011-05-22T00:46:38", "account": "another-post"}' http://127.0.0.1:8000/api/transaction/ 
```

但它正在返回以下响应标头，如下所示：

```
curl: (6) Could not resolve host: POST; nodename nor servname provided, or not known
HTTP/1.0 401 UNAUTHORIZED
Date: Sat, 09 Jun 2012 18:50:37 GMT
Server: WSGIServer/0.1 Python/2.7.1
Content-Type: text/html; charset=utf-8 
```

我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T18:58:22.440

你不需要写“POST”来发布[curl(1)](http://linux.die.net/man/1/curl)`--data` - 如果你给它一个参数，它会自动完成。

相反，它会将“POST”误认为是您要发送到的 URL，并且如您想象的那样失败。放弃这个词，你应该很好。

# algorithm - 如何在 n + logn -2 比较中找到第二小的元素？

> ID：10963708
> 
> 赞同：1
> 
> 时间：2012-06-09T18:56:21.563
> 
> 标签：algorithm

> **可能重复：**
> [从 N 个数字中找出最大和第二大的数字](https://stackoverflow.com/questions/5691140/finding-largest-and-second-largest-out-of-n-numbers)

如何在 n + logn -2 比较中从给定的 n 个元素集合中找到第二小的元素？

我见过类似的问题，但它们没有提供有效的解决方案。

# python - python matplotlib - 等高线图 - 置信区间

> ID：10963709
> 
> 赞同：7
> 
> 时间：2012-06-09T18:56:26.133
> 
> 标签：python, statistics, matplotlib

我正在尝试使用 matplotlib.pyplot.contour 在数据网格上绘制轮廓（可行），但轮廓放置在距离峰值 1、2 和 3 sigma 处。除了蛮力之外，有没有一种巧妙的方法可以做到这一点？谢谢！

Python版本是

Python 2.7.2 |EPD 7.2-2（64 位）| （默认，2011 年 9 月 7 日，16:31:15）[GCC 4.0.1 (Apple Inc. build 5493)] 在 darwin

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T23:33:14.193

您可以指定`z-values`绘制轮廓的位置列表。所以你所要做的就是`z-values`为你的分发收集正确的。以下是“距离峰值 1、2 和 3 sigma”的示例：

![在此处输入图像描述](../Images/14511a9047a873dcd257a29889905fcc.png)

代码：

```
import numpy as np
import matplotlib.cm as cm
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt

#Set up the 2D Gaussian:
delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-3.0, 3.0, delta)
X, Y = np.meshgrid(x, y)
sigma = 1.0
Z = mlab.bivariate_normal(X, Y, sigma, sigma, 0.0, 0.0)
#Get Z values for contours 1, 2, and 3 sigma away from peak:
z1 = mlab.bivariate_normal(0, 1 * sigma, sigma, sigma, 0.0, 0.0)
z2 = mlab.bivariate_normal(0, 2 * sigma, sigma, sigma, 0.0, 0.0)
z3 = mlab.bivariate_normal(0, 3 * sigma, sigma, sigma, 0.0, 0.0)

plt.figure()
#plot Gaussian:
im = plt.imshow(Z, interpolation='bilinear', origin='lower',
                 extent=(-50,50,-50,50),cmap=cm.gray)
#Plot contours at whatever z values we want:
CS = plt.contour(Z, [z1, z2, z3], origin='lower', extent=(-50,50,-50,50),colors='red')
plt.savefig('fig.png')
plt.show() 
```

# php - 如何使用变量将字符串替换为另一个字符串

> ID：10963710
> 
> 赞同：0
> 
> 时间：2012-06-09T18:56:42.277
> 
> 标签：php, string, variables, preg-replace, preg-match

**问题：**

我一直在弄清楚如何使用 PHP 将变量中的字符串添加到许多不同的字符串中。

**多变的：**

```
$insert = 'icon-white'; 
```

**字符串位于名为 $hyperlink 的变量中：**

```
$hyperlink = '<i class="icon-home"></i>'; 
```

**期望的输出：**

```
<i class="icon-home icon-white"></i> 
```

欢迎任何建议，并提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:42:58.993

老实说，在这个特定问题中，我没有看到正则表达式的好处，所以我选择忽略这方面；主要问题似乎是在最后一个`"`字符之前插入新字符串，这可以通过以下方式实现：

```
$hyperlink = '<i class="icon-home"></i>';
$insert = ' icon-white'; // I've explicitly prefixed the new string with a space
$pos = strripos($hyperlink,'"',0);
echo substr_replace($hyperlink,$insert,$pos,0) 
```

如果您愿意，那么，为了将来使用，这里有一个函数，它将在给定字符 ( )的最后一次出现之前将给定字符串 ( `$new`) 插入另一个字符串 ( )：`$haystack``$needle`

```
function insertBeforeLast($haystack,$needle,$new){
    if (!$haystack || !$needle || !$new){
        return false;
    }
    else {
        return substr_replace($haystack,$new,strripos($haystack,$needle),0);
    }
}

    echo insertBeforeLast('abcdefg','e','12',' '); 
```

`0`函数中右括号之前的表示`substr_replace()`新插入的字符串将在原始字符串中覆盖的字符数。

* * *

**编辑**以修改上述功能，以明确提供覆盖作为选项：

```
function insertBeforeLast($haystack,$needle,$new, $over){
    if (!$haystack || !$needle || !$new){
        return false;
    }
    else {
        $over = $over || 0;
        return substr_replace($haystack,$new,strripos($haystack,$needle),$over);
    }
}

    echo insertBeforeLast('abcdefg','e','12',0); 
```

参考：

*   [`strripos()`](http://www.php.net/manual/en/function.strripos.php).
*   [`substr_replace()`](http://uk3.php.net/manual/en/function.substr-replace.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:27:13.283

这是如何使用`preg_replace()`php 函数来满足您的需求：

```
$ php -a
Interactive shell

php > $oldvar = '<i class="icon-home"></i>';
php > $newvar = preg_replace('/(.*?".*?)"(.*)/', '\1 icon-white"\2 ', $oldvar);
php > echo $newvar;
<i class="icon-home icon-white"></i> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:58:56.753

渲染输出时，您可以这样做；

```
<i class="icon-home <?= $insert ?>"></i> 
```

如果你不希望它是有条件的。

如果你有一个变量；

```
$i = '<i class="icon-home"></i>'; 
```

你可以做;

```
$i = '<i class="icon-home ${insert}"></i>'; 
```

# ios - 自定义推送通知的 iOS 权限对话框

> ID：10963711
> 
> 赞同：39
> 
> 时间：2012-06-09T18:56:47.717
> 
> 标签：ios, push-notification, apple-push-notifications, ios-permissions

当 iOS 应用程序第一次尝试注册推送通知时，系统会弹出一个权限对话框，询问用户是否有权接收推送通知。是否可以自定义此对话框的文本，以解释为什么要寻求这些权限？

大多数权限对话框消息可以通过放入`NS*UsageDescription` [Info.plist](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)键来自定义。例如，该`NSCameraUsageDescription`键控制请求访问用户相机时要显示的对话框文本。但是推送通知似乎没有这样的密钥。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-09T18:58:56.953

不，这是一个无法自定义的系统对话框。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-21T02:30:23.990

我见过的一种解决方法是让应用程序打开它自己的自定义对话框，解释它为什么需要权限。然后应用程序立即请求权限，并弹出系统对话框。

这可能适用于说服用户接受许可请求以获取对功能的访问权，或者在知道该功能将不可用的情况下拒绝该请求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T19:01:49.643

不可能，因为你对它没有任何控制权

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T09:02:28.913

不，您不能在内置消息中更改系统。因为您无法控制它。

# bash - 这可以做到吗？Web 应用程序中的 Bash 脚本

> ID：10963714
> 
> 赞同：0
> 
> 时间：2012-06-09T18:56:55.413
> 
> 标签：bash, tomcat, web-applications, war

我有一个安装应用程序的 bash 脚本（支持 linux/unix）。我不想在终端中执行脚本，而是想将其部署为 Web 应用程序。

我想为此脚本制作一个 Web 图形界面，以便用户可以在 Web 表单中提供必要的输入，并在准备好后将这些变量传递到要执行的 bash 脚本中。

这个脚本显然需要 root 权限。

我打算用tomcat 7 / servlet / jsp来做。我想将它部署为 .war 文件。

首先，这可以做到吗？是否可以？

第二，有什么例子吗？我什么也没找到。

第三，任何替代方法/更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:04:10.673

我会尝试tomcat自己的CGI支持。

[http://tomcat.apache.org/tomcat-6.0-doc/cgi-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/cgi-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:02:03.600

嗯，这是可能的，但请记住，清理用户输入是很困难的。

您要做的是使用脚本语言或框架（我推荐 sinatra），并使用 html 表单将参数传递给后端。在后端，您可以通过传递您想要的任何参数来调用您的脚本。

[以sinatra](http://www.sinatrarb.com/)为例：

```
post '/whatever' do
  # This is dangerous!
  `myscript #{params[...]}`
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:05:46.010

错误，但是您希望它在客户端运行，对吗？

所以你并没有真正将它作为 bash 在你的系统上运行，你只是在你的 web 框架中对其进行模板化。

如果浏览器可以显示这个，它不会只是 d/l 作为一个文件，所以你需要在响应中设置一个*Content-Disposition: 附件*头来强制 ad/l。

您自然需要用户的合作才能在他或她的系统上以 root 身份运行它......

# android - 使用 Home 键杀死 Android 应用

> ID：10963715
> 
> 赞同：0
> 
> 时间：2012-06-09T18:56:58.983
> 
> 标签：android, android-lifecycle

我有一个 android 应用程序，当按下 Home 键时，我希望它终止。时期。我不希望它在后台运行。我只是希望它终止。执行此操作的最佳或首选方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T19:13:25.703

*不，你没有。*

*   试图“杀死”你的应用是一种 Android 反模式。

*   试图抓住 home 键*也是*一种 Android 反模式。

有大量材料证实了这些观点。如果您认为您确实希望杀死您的应用程序，那您就大错特错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T20:22:41.363

您可以使用`finish();`来终止活动。

# html - 如何使用 CSS 背景位置在 img 标签中居中图像

> ID：10963716
> 
> 赞同：2
> 
> 时间：2012-06-09T18:57:18.487
> 
> 标签：html, css

我正在使用 HTML IMG 标签来获取/链接图像，并且我想将它放在一个 div 中，但我没有取得太大的成功。

我的html是：

```
 <div class="alimgholder">
<img  title="<?php echo $album_title;?>" alt="<?php echo $album_title;?>" src="<?php echo $album_pic;?>">
     </div> 
```

我的CSS是：

```
 .alimgholder
             {
             width:160px;
             height:120px;
             overflow:hidden;
             float:left;
             }
             .alimgholder img
             {

             background-color: #EEEEEE;
             background-position: center 25%;
             background-repeat: no-repeat;
             display: block;
             } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:33:07.667

仅为 div 设置 css -

```
.alimgholder
         {
         width:160px;
         height:120px;
         overflow:hidden;
         float:left;
         background-image: url(path/to/your_image);
         background-color: #EEEEEE;
         background-position: center 25%;
         background-repeat: no-repeat;
         display: block;
         } 
```

现在对于动态问题 - 您可以使用 img 标签来加载图像，*但隐藏它*并读取它的 src 只是为了使用 jQuery 设置背景，就像这样 -

```
 $("#div_id").css("background-image", $("#img_id").attr("src")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:03:32.073

```
.alimgholder
{
     ...
     text-align: center;
} 
```

否则你正在对齐图像的背景图像。

编辑：如果您希望将图像定义为 div 的背景，则必须从 css 加载它并忘记您的 img 标签：

```
.alimgholder
{
     background: url(path/to/image) center no-repeat;
     ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:22:16.860

如果您只有 div 中的图像，您可以使用：

```
margin-left: auto;
margin-right: auto; 
```

在您的`.alimgholder`CSS 代码中，但这会使整个内容`<div>`水平居中。

# json - JSON polyfill：JSON 2 还是 JSON 3？

> ID：10963723
> 
> 赞同：20
> 
> 时间：2012-06-09T18:58:06.583
> 
> 标签：json, polyfills

我需要一个 JSON polyfill 来支持 IE 7 和一些 IE 8 和 IE 9 模式。我应该选择[JSON 2](https://github.com/douglascrockford/JSON-js)还是[JSON 3](http://bestiejs.github.com/json3/)？显然 JSON 3 是一种更现代的实现，但例如像[html5please](http://html5please.com/#json)这样的网站甚至都没有提及它，而是推荐使用 JSON 2。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T22:11:55.997

我想知道同样的事情。[JSON3 说](http://bestiejs.github.com/json3/)：

> ### JSON 2 的变化
> 
> JSON 3...
> 
> *   正确序列化原始包装对象（*[问题 #28](https://github.com/douglascrockford/JSON-js/issues/28)*）。
> *   序列化循环结构时抛出 a `TypeError`（JSON 2 递归直到调用堆栈溢出）。
> *   利用**功能测试**来检测损坏或不完整*的本机*JSON 实现（JSON 2 仅检查本机功能的存在）。测试只在运行时执行一次，因此在解析或序列化值时没有额外的性能成本。
> 
> 与 JSON 2 相比，JSON 3**不**...
> 
> *   `toJSON()`向`Boolean`、`Number`和`String`原型添加方法。这些不是任何标准的一部分，并且在实现的设计中是多余的`stringify()`。
> *   添加`toJSON()`或`toISOString()`方法到`Date.prototype`. 请参阅下面有关日期序列化的说明。
> 
> [bestiejs.github.com/json3/](http://bestiejs.github.com/json3/)

[HTML5 请说](http://html5please.com/#json)：

> [JSON 3](http://bestiejs.github.com/json3/)是一个兼容几乎所有 JavaScript 平台的 polyfill。它是[JSON 2](https://github.com/douglascrockford/JSON-js)的直接替代品，它使用功能测试来检测损坏和不完整的原生 JSON 实现，支持 [异步模块加载](https://github.com/amdjs/amdjs-api/wiki)器和 [`has`](https://github.com/phiggins42/has.js/)感知优化器，并按照规范标准构建。
> 
> [JSON 2](https://github.com/douglascrockford/JSON-js)是 Douglas Crockford 的一种较旧的替代 polyfill。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T03:10:11.670

[HTML5 Please](http://html5please.com/#json)更新了他们的 JSON 页面，将**JSON 3**作为主要的 polyfill 供使用，而 JSON 2 作为较旧的替代品位居次要地位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-25T00:44:49.957

如果您想提高页面在 IE7（可能是 8）中的性能，请使用 json2.js。我很高兴使用 json3 几个月，然后我看到了这个问题并做了一些研究。在我的 IE7 VM 中使用 json2.js，所有 jsperf 的执行速度都提高了 1-2 倍。

一个例子：

[http://jsperf.com/json-vs-jquery-json/2](http://jsperf.com/json-vs-jquery-json/2)

# entity-framework - EF 返回一个 Null 对象，但该对象并不是真正的 null

> ID：10963729
> 
> 赞同：1
> 
> 时间：2012-06-09T18:58:44.040
> 
> 标签：entity-framework

我有一个名为 Game 的实体。该实体有 2 个子团队类型的属性。subTeam 有一个 Team 类型的 Property（它是子团队的 parentteam）。

现在我创建子团队和游戏并将其保存到数据库中，与父团队没有关系（我不知道创建子团队时应该属于哪个团队）。

稍后我用这段代码通过 EF 加载游戏..

```
 return contex.Games
            .Include(t => t.Serie)
            .Include(t => t.AwayTeam)
            .Include(t => t.HomeTeam)
            .SingleOrDefault(g => g.Identifier == gameIdentifier); 
```

它工作得很好，我得到了我的游戏和我的子团队......但我知道想通过检查 HomeTeam.ParentTeam 是否有任何 ParentTeam 来检查我的子团队！= null。这里有一些奇怪的东西..

我可以看到 HomeTeam.ParentTeam 为 NULL，如果我尝试这样做： HomeTeam.ParentTeam.Identifier 我会得到一个异常。但是当我执行我的 if 语句时（HomeTeam.ParentTeam ！= null，那么我会返回 True，但这不是真的 HomeTeam.ParentTeam 为 NULL

我在 VS2011 的即时窗口中执行了一些行。为了获得更多信息，我得到了这个结果：

```
homeTeam.ParentTeam
null
homeTeam.Users
null
(homeTeam.ParentTeam == null ? "True" : "False")
"False"
(homeTeam.Users == null ? "True" : "False")
"True" 
```

我的 hometeam.ParentTeam 怎么会说它是 NULL，如果我尝试使用它，我会得到一个异常，但是 IF 语句会告诉我 homeTeam.ParentTeam 不是 NULL。

EF在这里做什么？以及当 EF 中的对象确实为 NULL 时，如何检查它是否为 NULL。

我不在我的实体中使用虚拟，所以这不是代理问题。

# ruby - 无法让基本的 Ruby/Sinatra 应用程序与 Heroku 一起使用？

> ID：10963734
> 
> 赞同：0
> 
> 时间：2012-06-09T18:59:07.503
> 
> 标签：ruby, heroku

我的所有文件都可以在 GitHub 上找到：[https](https://github.com/Integralist/Passage) ://github.com/Integralist/Passage （以防万一您需要查看我正在使用的内容）。

我是 Heroku 的新手，我尝试按照说明上传 Sinatra 应用程序，但它无法运行，当我访问应用程序 URL 时，我收到一条通用的“应用程序错误”消息。

我的设置过程如下：

*   `heroku login`
*   `heroku create --stack cedar`

创建`config.ru`文件并添加内容...

```
require 'app'
run Sinatra::Application 
```

创建一个 Gemfile 文件（无文件扩展名）并添加内容...

```
source 'http://rubygems.org'
gem 'sinatra', '1.3.2'
gem 'thin', '1.3.1' 
```

打开终端（我正在运行 Mac OS X）并执行：`bundle install`这似乎生成了一个重复的 Gemfile 但这次带有 .lock 文件扩展名？这另一个 Gemfile 现在具有以下内容...

```
GEM
  remote: http://rubygems.org/
  specs:
    daemons (1.1.8)
    eventmachine (0.12.10)
    rack (1.4.1)
    rack-protection (1.2.0)
      rack
    sinatra (1.3.2)
      rack (~> 1.3, >= 1.3.6)
      rack-protection (~> 1.2)
      tilt (~> 1.3, >= 1.3.3)
    thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    tilt (1.3.3)

PLATFORMS
  ruby

DEPENDENCIES
  sinatra (= 1.3.2)
  thin (= 1.3.1) 
```

然后我创建一个`Procfile`（无文件扩展名）并添加内容：`web: bundle exec ruby app.rb -p $PORT`（app.rb 显然是我的主应用程序文件的名称）。

然后，我使用 Git 将我的文件暂存/提交/推送到相关的 Heroku 存储库。

但如果我跑步，`heroku ps`我会...

```
=== web: `bundle exec ruby app.rb -p`
web.1: crashed for 1m 
```

然后，如果我跑步，`heroku logs`我会...

```
2012-06-09T18:35:41+00:00 heroku[slugc]: Slug compilation started
2012-06-09T18:36:37+00:00 heroku[api]: Add LANG, PATH, RACK_ENV, GEM_PATH config by email@domain.com
2012-06-09T18:36:37+00:00 heroku[api]: Release v2 created by email@domain.com
2012-06-09T18:36:38+00:00 heroku[api]: Release v3 created by email@domain.com
2012-06-09T18:36:38+00:00 heroku[api]: Deploy e26921b by email@domain.com
2012-06-09T18:36:38+00:00 heroku[web.1]: State changed from created to starting
2012-06-09T18:36:38+00:00 heroku[slugc]: Slug compilation finished
2012-06-09T18:36:40+00:00 heroku[web.1]: Starting process with command `bundle exec ruby app.rb -p`
2012-06-09T18:36:41+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:15:in `<class:Application>': missing argument: -p (OptionParser::MissingArgument)
2012-06-09T18:36:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:4:in `<module:Sinatra>'
2012-06-09T18:36:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:3:in `<top (required)>'
2012-06-09T18:36:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra.rb:5:in `require'
2012-06-09T18:36:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra.rb:5:in `<top (required)>'
2012-06-09T18:36:41+00:00 app[web.1]:   from app.rb:12:in `require'
2012-06-09T18:36:41+00:00 app[web.1]:   from app.rb:12:in `<main>'
2012-06-09T18:36:42+00:00 heroku[web.1]: Process exited with status 1
2012-06-09T18:36:42+00:00 heroku[web.1]: State changed from starting to crashed
2012-06-09T18:36:42+00:00 heroku[web.1]: State changed from crashed to created
2012-06-09T18:36:42+00:00 heroku[web.1]: State changed from created to starting
2012-06-09T18:36:44+00:00 heroku[web.1]: Starting process with command `bundle exec ruby app.rb -p`
2012-06-09T18:36:45+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:15:in `<class:Application>': missing argument: -p (OptionParser::MissingArgument)
2012-06-09T18:36:45+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:4:in `<module:Sinatra>'
2012-06-09T18:36:45+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:3:in `<top (required)>'
2012-06-09T18:36:45+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra.rb:5:in `require'
2012-06-09T18:36:45+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra.rb:5:in `<top (required)>'
2012-06-09T18:36:45+00:00 app[web.1]:   from app.rb:12:in `require'
2012-06-09T18:36:45+00:00 app[web.1]:   from app.rb:12:in `<main>'
2012-06-09T18:36:47+00:00 heroku[web.1]: Process exited with status 1
2012-06-09T18:36:47+00:00 heroku[web.1]: State changed from starting to crashed
2012-06-09T18:42:09+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-wind-9309.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-06-09T18:42:09+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-wind-9309.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-06-09T18:42:38+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-wind-9309.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-06-09T18:42:39+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-wind-9309.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

有人可以解释问题是什么以及我该如何解决它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:38:55.023

```
/app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb:15:in `<class:Application>': missing argument: -p (OptionParser::MissingArgument) 
```

那就是它在堆栈跟踪中给您的错误。当它运行`bundle exec ruby app.rb -p`时，没有为`-p`. 您需要类似的东西`bundle exec ruby app.rb -p 3000`（在端口 3000 上运行）。也许全局变量 $PORT 没有被定义？

编辑

[尽管在 Procfile 上](https://devcenter.heroku.com/articles/procfile)形成heroku 的文档：

```
You can reference other environment variables populated by Heroku, most usefully the $PORT variable, in the command. 
```

尝试做一个`raise $PORT.inspect`然后推到heroku。它会崩溃，但希望能更好地了解它正在尝试做什么。

# iphone - UITableViewCell 中的旋转 UITableView 未显示 initWithFrame: 的位置

> ID：10963741
> 
> 赞同：0
> 
> 时间：2012-06-09T19:00:51.503
> 
> 标签：iphone, ios, uitableview

我有一个 UITableViewController，它有一个 UITableViewCell 的子类，每个单元格都有一个 UITableView。我有两个 UITableViews 工作得很好。当我旋转它时，问题就来了。如果我将 tableViewInCell 的框架设置为比包含单元格的高度更大的宽度，那么它就会变得混乱。见下文。

tableView 的宽度设置为一个值 <= 包含 tableViewCell 的高度：

```
tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 132, 132) style:UITableViewStylePlain]; 
```

![tableView 的宽度设置为一个值 <= 包含 tableViewCell 的高度](../Images/5a7738170fb707d692e3ab465de634c8.png)

tableView 的宽度设置为一个值 > 包含 tableViewCell 的高度：

```
tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 132, 320) style:UITableViewStylePlain]; 
```

![tableView 的宽度设置为一个值 > 包含 tableViewCell 的高度](../Images/eb2963eec4e710131da263c05013b2c1.png)

如何让 tableViewInCell 填充包含 UITableViewCell 的宽度而不是乱线？

**更新：**

```
tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 132) style:UITableViewStylePlain]; 
```

![tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 132) style:UITableViewStylePlain];](../Images/49627b81ac3a8336f461584a97b3e9f0.png)

**更新 2：**这是我设置 tableViewInCell 的方法。

```
-(void)setupTableView {

tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 132) style:UITableViewStylePlain];
[tableViewInCell setDelegate:self];
[tableViewInCell setDataSource:self];
tableViewInCell.transform = CGAffineTransformMakeRotation(-M_PI * .5);
[self addSubview:tableViewInCell];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:58:17.637

将您的电流更改`setupTableView`为

```
-(void)setupTableView {
    tableViewInCell = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 132 , 320) style:UITableViewStylePlain];
    tableViewInCell.transform = CGAffineTransformMakeRotation(-M_PI * .5);
    tableViewInCell.frame = CGRectMake(0, 0, 320, 132);
    [tableViewInCell setDelegate:self];
    [tableViewInCell setDataSource:self];
    [self addSubview:tableViewInCell];

} 
```

# java - 使用用户时间线获取转推计数（我的转推）

> ID：10963742
> 
> 赞同：0
> 
> 时间：2012-06-09T19:00:52.323
> 
> 标签：java, twitter

我想使用单一访问令牌和消费者密钥等计算不同屏幕名称的重新推文计数，因此，我正在使用 APi - GET statuses/user_timeline。提取其所有状态并尝试从中识别转发计数。实际上，我使用 APi - GET statuses/retweets_of_me 来计算转推计数，但它仅适用于访问令牌等可用的帐户。但我也想下载其他用户帐户的转推数。我们如何从用户时间线响应中区分或找到准确的 - retweets_of_me。因为从用户时间线我得到所有类型的状态。但我只想转发我的推文。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:36:28.413

如果您想查看特定推文被转发了多少次，这很容易。

您想使用 statuses/show -[阅读文档](https://dev.twitter.com/docs/api/1/get/statuses/show/%3aid)。

这是我的一条推文：

```
https://api.twitter.com/1/statuses/show.json?id=224808742712115200 
```

您将看到返回的 JSON 中的参数之一是

```
"retweet_count":5 
```

也就是说，这条推文被转发了 5 次。

您**无需**进行身份验证即可发出此 API 请求。

# mvvm - 使用 MVVM 向对象添加自定义属性

> ID：10963743
> 
> 赞同：0
> 
> 时间：2012-06-09T19:01:04.287
> 
> 标签：mvvm, silverlight-5.0

我是 MVVM 和 Silverlight 的新手

我已经成功启动并运行了一个示例 Silverlight 应用程序

我将表的内容 - tblClip 返回到我的模型（实体框架）和关联的对象剪辑中。

现在我的剪辑上有一个名为 Size 的字段。这是一个整数，我想增加 5 倍

什么是正确的方法来做到这一点并且仍然保持模式？

1）在模型上添加一个新属性，例如 ModifiedSize 并填充它（尽管不确定在哪里）我假设我需要将它装饰为 DataMember 以将其返回给客户端 2）在视图模型中，一旦我获得来自服务代理的数据，通过增加大小的剪辑 3) 其他...？

我不需要将对象保存回数据库。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:18:55.327

UI 特定属性属于 ViewModel。例如，这是您可以做到的一种方式

```
public class ClipViewModel
{
    private int _size;

    public int Size
    {
        get { return _size; }
        set
        {
            _size = value;
            NotifyPropertyChanged("Size");
        }
    }

    public int ModifiedSize
    {
        get { return Size * 5; }
        set
        {
            Size = value / 5;
        }
    }
} 
```

然后在您的 XAML 中绑定到`ModifiedSize`将更新`Size`并执行`INotifyPropertyChanged`通知

您可以做的另一件事是跳过该`ModifiedSize`属性并使用转换器

```
public class ModifiedSizeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        return (int)value * 5;
    }

    public object ConvertBack(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        return (int)value / 5;
    }
} 
```

然后与`Size`转换器绑定

```
<Slider Value="{Binding Path=Size, Converter={StaticResource modifiedSizeConverter}}" /> 
```

# objective-c - 在objective-c中用随机数填充数组

> ID：10963748
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:02:12.610
> 
> 标签：objective-c, arrays

我如何在objective-c中用大约500个随机数填充数组，下面的代码得到从1到200的随机数但是我如何将它们填充到数组中我需要后记来对它们进行一些计算

```
 int i,x;
NSArray *myArray;
for (x=1; x<100; x++) {
    i = (arc4random()%200)+1; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:45:43.707

```
{
   NSMutableArray *array = [NSMutableArray array];
   for (int i = 0; i < 500; i++)
     [array addObject: [NSNumber numberWithInt: arc4random()%200]];

   /* Use array */
} 
```

# php - 如何使用 drupal 使用命令行命令

> ID：10963749
> 
> 赞同：1
> 
> 时间：2012-06-09T19:02:14.163
> 
> 标签：php, drupal, terminal, vlc

我有一个云服务器，我正在其中运行 drupal 7。出于某种原因，我必须在服务器端使用 VLC 播放器进行实时视频录制。我可以执行此运行命令行命令。但我想知道我是否可以在drupal中为客户提供一个网页，客户可以在其中添加实时视频url，当它点击提交时，我的命令行命令在服务器终端中运行......类似的事情请告诉我是否可能与否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:06:29.473

Drupal 部分实际上是最简单的部分。您将需要[创建一个自定义模块](https://drupal.org/node/361112)来实现[hook_menu()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)为您的表单提供一个页面（使用[表单 API](https://drupal.org/node/751826)构建）

```
function MODULE_menu() {
  return array(
    'encode_video' => array(
      'page callback' => 'drupal_get_form',
      'page arguments' => array('MODULE_encode_video_form'),
      'access arguments' => 'encode video'
    )
  );
}

function MODULE_encode_video_form($form, &$form_state) {
  $form = array(
    'video_url' => array(
      '#type' => 'textfield', 
      '#title' => t('Video URL'), 
      '#size' => 80, 
      '#required' => TRUE,
    ),
    'submit' =>  array(
      '#type' => 'submit',
      '#value' => t('Encode'),
    ),
  );
  return $form;
}

function MODULE_encode_video_form_validate($form, &$form_state) {
  // Validate and sanitize $form_state['values']['video_url'] here...
}

function MODULE_encode_video_form_submit($form, $form_state) {
  $url = $form_state['values']['video_url'];
  // Start video encoding here...
} 
```

编码视频是最难的部分。任何用于从 PHP 直接启动视频编码过程的方法都必须仔细编写。例如，它必须处理进程管理以避免使用过多的编码对服务器造成过多的负担。它还必须确保进程在后台正确启动，以避免阻塞 PHP 进程（以避免超时）。一个可能更好的解决方案是使用某种后台进程管理器对编码进行排队。[Gearman](http://gearman.org/)在这里可能是一个简单而干净的解决方案。它还允许您以更适合长时间运行的视频编码的独立语言编写视频编码过程。目前正在开发的[Gearman 集成模块](https://drupal.org/project/gearman)可帮助其在 Drupal 中的使用，但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:08:11.483

`exec`并将`shell_exec`帮助您入门。

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

它们允许您从命令行执行任何 linux 命令。

小心！确保您不是从字符串动态创建命令。这可以让你获得最大的 pwnage。

# javascript - Jquery ajax html替换

> ID：10963750
> 
> 赞同：0
> 
> 时间：2012-06-09T19:02:16.983
> 
> 标签：javascript, jquery, ajax, json

我的问题很简单，我收到字符串和一个数字，但只显示数字我如何同时显示两者？

```
 $.ajax({
            type: "POST",
            url: "data.php",
            data: "act="+nr,
            success: function (result) {

                var arr = JSON.parse(result);

                if ($.isArray(arr) == true) {
                    $.each(arr, function (i, n) {
                        $('#s_main #s_info').html("<p>+" + n + "</p>")
                    });

                }

            }
        })
    }); //ends here 
```

* * *

我的PHP：

```
$act = $_POST['act'];

$output =array();
$act2 = "TXT!!!";
array_push($output,$act);

echo json_encode($output); 
```

**顺便说一句，当我使用 append 而不是 html 结果是正确的，但它会堆叠而不是删除以前的数据**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:05:27.897

你得到的回报是一个 JSON *Object*。

```
if ($.isArray(arr) == true) 
```

此行不应返回 true，因为对象不是数组。如果`JSON.parse()`不起作用，它将返回一个等于 false 的值。所以你可以简单地测试返回的对象，看看它是否成功。

```
var jsonObj = JSON.parse(result);

if (jsonObj) {
  $.each(jsonObj, function (index, value) {
    $('#s_main #s_info').html("<p>+" + value + "</p>")
  });
} 
```

# c# - 无法部署 Visual C# 应用程序

> ID：10963754
> 
> 赞同：0
> 
> 时间：2012-06-09T19:02:37.000
> 
> 标签：c#, .net-3.5, .net-client-profile

我已经能够在我的开发机器上运行我的 C# .net 3.5 应用程序，但我似乎无法让它在其他任何地方运行。客户端机器安装了 4.0 .net 客户端配置文件，在查找客户端配置文件中遗漏的内容后，我怀疑安装完整的 4.0 框架会有所作为。

我正在使用这些库中的类：

```
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Drawing;
using System.IO;
using System.Diagnostics;
using Microsoft.Win32; 
```

我正在做的唯一不同寻常的事情是定义一个 CustomApplicationContext 而不是您将用于 Forms 应用程序的普通 App Context。我的应用程序主要作为系统托盘中的 NotifyIcon 运行，所以我只是设置了一个主界面是系统托盘图标的类。没有什么太离奇的了。

出于测试目的，我的第一行代码显示了一个 MessageBox，即使它也不会运行。每当我在部署机器上启动它时，都会弹出一个框说“应用程序无法启动”并关闭。

有谁知道为什么会这样做？我似乎无法让它运行一些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:08:58.410

也许您需要将 .Net4.0 添加到您支持的运行时列表中。将以下行添加到您的 app.config

```
<configuration>
   <startup useLegacyV2RuntimeActivationPolicy="true">
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:59:58.960

也许并非所有东西都能在新框架上正确运行，但您是否尝试过按照[http://msdn.microsoft.com/en-us/library/ms171868.aspx上的描述明确设置目标框架](http://msdn.microsoft.com/en-us/library/ms171868.aspx)

复制：

> .NET Framework 4 与使用早期 .NET Framework 版本构建的应用程序高度兼容，但为了提高安全性、标准合规性、正确性、可靠性和性能而进行了一些更改。
> 
> .NET Framework 4 不会自动使用其公共语言运行库版本来运行使用早期版本的 .NET Framework 构建的应用程序。要使用 .NET Framework 4 运行较旧的应用程序，您必须使用 Visual Studio 中项目属性中指定的目标 .NET Framework 版本编译应用程序，或者您可以使用应用程序配置文件中的元素指定支持的运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:06:12.787

遗憾的是，仅安装 .NET Framework 4 不会运行 .NET 3.5 应用程序。3.5 将运行 2.0、3.0 和 3.5 应用程序，但 4 是一项重大改进，因此如果用户的机器上没有安装 3.5，它将无法工作。

# c# - 获取 DER 编码的公钥

> ID：10963756
> 
> 赞同：3
> 
> 时间：2012-06-09T19:02:41.937
> 
> 标签：c#, encryption, bouncycastle

使用 BounceCastle 我可以使用以下代码。它生成一个密钥对并返回 ASN.1 DER 编码格式。

```
//Generate new key
var generator = new RsaKeyPairGenerator ();
generator.Init (new KeyGenerationParameters (new SecureRandom (), 1024));
var keyPair = generator.GenerateKeyPair ();

//Save private key for later use
keyParameters = (RsaKeyParameters)keyPair.Private;

//Export ASN.1 DER-encoded
SubjectPublicKeyInfo info = SubjectPublicKeyInfoFactory.CreateSubjectPublicKeyInfo(keyPair.Public);
return info.GetEncoded (); 
```

它已经过测试并可以与第三方软件一起使用。

我的问题是：我怎样才能使上述编码相反。有了编码的公钥，我如何将公钥放入 RsaKeyParameters。

我想我即将做类似的事情。

```
SubjectPublicKeyInfo s = new SubjectPublicKeyInfo(????, publicKeyBytes);
RsaKeyParameters key = (RsaKeyParameters)PublicKeyFactory.CreateKey(s); 
```

因此，如果这很接近，我需要知道要放入什么????，它需要一个 AlgorithmIdentifier 类型的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T20:06:39.037

感谢[这个答案](https://stackoverflow.com/a/9290086/33236)，我得到了以下代码：

```
 AsymmetricKeyParameter asymmetricKeyParameter = PublicKeyFactory.CreateKey(req.PublicKey);
        RsaKeyParameters key = (RsaKeyParameters) asymmetricKeyParameter; 
```

# c - write() 没有在 C 中的窗口上写入正确的字节数

> ID：10963762
> 
> 赞同：0
> 
> 时间：2012-06-09T19:03:35.190
> 
> 标签：c, windows, gcc, cl.exe

在 Windows 下将值写入 C 中的文件时，我得到的东西似乎是错误的，结果与在 Cygwin 中运行的同一程序不同。

在这种情况下，我将浮点数写入文件：

```
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <io.h>

int         main( void )
{
    int     fd;
    float   f;

    fd = open("file.a", O_RDWR | O_CREAT);
    f = (float)atof("-0.1352237");
    printf("%.7f\n", f);

    write(fd, (void *)&f, sizeof(float));
    close(fd);
    printf("sizeof(float): %d\n", sizeof(float));

    return (EXIT_SUCCESS);
} 
```

我已经在 Windows 和 Cygwin 中编译并运行了这个文件（没有包含），但我没有得到相同的结果。由于我正在写一个浮点数，我希望输出文件有 4 个字节写入它

但是，在命令行中使用 cl.exe 编译时的输出似乎是错误的：

```
1578 0d0a be 
```

如果我从文件中读取到浮点数，显然我没有得到正确的值。而且写入文件的字节数是错误的，应该只有4个字节，而不是5个。

这是我在 Cygwin 中运行时得到的：

```
1578 0abe 
```

这是对的。如果我从文件中读取它到浮点数，我会得到正确的值（-0.1352237）。

我在这里错过了什么吗？这些功能的windows实现是否有缺陷？或者也许我没有正确写入数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:05:44.617

您已以文本模式（默认）打开文件，因此`0a`( `"\n"`) 被翻译为`0d0a`( `"\r\n"`)。

您需要使用`O_BINARY`标志以二进制模式打开文件。

# console - system.console NullPointerException

> ID：10963765
> 
> 赞同：3
> 
> 时间：2012-06-09T19:03:54.887
> 
> 标签：console, nullpointerexception

我知道这是一个愚蠢的错误，但我不知道如何解决它。

```
public static void main (String args[]){
Console kitty = System.console();
String username = kitty.readLine("Username: ");
} 
```

> String username = kitty.readLine("用户名：");

产生错误。有人可以告诉我我做错了什么，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:06:45.797

从 javadoc ：

> 返回与当前 Java 虚拟机关联的唯一 Console 对象（**如果有**）。

如果没有与 javadoc 关联的控制台，则指出的行是对空对象的方法调用，因此是异常。

你如何启动你的应用程序？

> 虚拟机是否具有控制台取决于底层平台以及调用虚拟机的方式。如果虚拟机从交互式命令行启动而不重定向标准输入和输出流，那么它的控制台将存在，并且通常会连接到启动虚拟机的键盘和显示器。如果虚拟机是自动启动的，例如通过后台作业调度程序，那么它通常不会有控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T19:18:26.770

如果要从标准输入中读取用户名，可以使用以下代码：

```
try {
    System.out.print("Username: ");
    InputStreamReader streamReader = new InputStreamReader(System.in);
    BufferedReader bufferedReader = new BufferedReader(streamReader);
    String username = bufferedReader.readLine();
} catch (IOException e) {
    e.printStackTrace();
} 
```

System.console() 返回的控制台不一定存在，这就是你得到 NullPointerException 的原因。

# java - 通过 postValidate 进行 JSF 跨字段验证，无需在支持 bean 中按名称查找组件

> ID：10963766
> 
> 赞同：2
> 
> 时间：2012-06-09T19:03:57.017
> 
> 标签：java, validation, jsf, jsf-2, composite-component

我正在构建一个登录表单复合组件。使用它的页面将传递一个事件处理程序，该处理程序将验证用户名和密码。通常（不使用复合组件）当我们通过 执行跨字段验证时`postValidate`，事件处理程序必须按名称查找字段的组件。验证器最好不要这样做，因为这些是应该抽象的组件的内部细节。

知道如何在`postValidate`不知道复合组件内部细节的情况下在处理程序中获取用户名和密码字段的转换值吗？

**更新：** 这样做的重点不是完全避免按名称查找组件，而是能够以不需要使用页面和/或 bean 知道内部的方式跨字段验证复合组件的字段组件的详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T05:36:04.847

这是可以做到的。在以下代码中，请特别注意`postValidate`复合组件中的事件和`postValidate`支持组件中的方法。请注意它如何解析`MethodExpression`属性并调用传入的方法。

这是复合组件：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <!-- Login form. -->
    <cc:interface componentType="com.example.LoginForm">
        <cc:attribute name="emailAddress" type="java.lang.String" required="true"/>
        <cc:attribute name="rememberMe" type="java.lang.Boolean" required="true"/>
        <cc:attribute name="checkCredentials"
                      method-signature="void checkCredentials(java.lang.String,java.lang.String,java.lang.String)"
                      shortDescription="Parameters are clientId, username and password. If credentials are invalid, attach a FacesMessage to the component specified by clientId."
                      required="true"/>
        <cc:attribute name="actionListener" method-signature="void actionListener()" required="true"/>
        <cc:attribute name="registerOutcome" type="java.lang.String" required="true"/>
        <cc:attribute name="recoverPasswordOutcome" type="java.lang.String" required="true"/>
        <cc:attribute name="headerTitle" type="java.lang.String" default="Sign In"/>
        <cc:attribute name="emailAddressLabel" type="java.lang.String" default="Email address:"/>
        <cc:attribute name="passwordLabel" type="java.lang.String" default="Password:"/>
        <cc:attribute name="rememberMeLabel" type="java.lang.String" default="Stay signed in on this machine"/>
        <cc:attribute name="loginLabel" type="java.lang.String" default="Sign In"/>
        <cc:attribute name="recoverPasswordLabel" type="java.lang.String" default="Forgot password?"/>
        <cc:attribute name="emailAddressRequiredMessage" type="java.lang.String" default="Email address required"/>
        <cc:attribute name="passwordRequiredMessage" type="java.lang.String" default="Password required"/>
        <cc:attribute name="registerLabel" type="java.lang.String" default="Register"/>
    </cc:interface>

    <cc:implementation>
        <h:outputStylesheet library="components/example/login-form" name="style.css"/>

        <div id="#{cc.clientId}">
            <h:form id="form">

                <f:event type="postValidate" listener="#{cc.postValidate}"/>

                <div style="margin-top:10px;">
                    <p:panel header="#{cc.attrs.headerTitle}" styleClass="loginPanel">
                        <div class="login-form_errorContainer">
                            <p:messages rendered="#{facesContext.maximumSeverity.ordinal ge 2}"/>
                        </div>
                        <h:panelGrid columns="3">
                            <h:outputText styleClass="login-form_label" value="#{cc.attrs.emailAddressLabel}"/>
                            <h:panelGroup styleClass="login-form_cell">
                                <h:inputText id="emailAddress"
                                             value="#{cc.attrs.emailAddress}"
                                             required="true"
                                             requiredMessage="#{cc.attrs.emailAddressRequiredMessage}"
                                             styleClass="login-form_field"
                                             immediate="true"/>
                            </h:panelGroup>
                            <h:panelGroup/>

                            <h:outputText styleClass="login-form_label" value="#{cc.attrs.passwordLabel}"/>
                            <h:panelGroup styleClass="login-form_cell">
                                <h:inputSecret id="password"
                                               value="#{cc.attrs.password}"
                                               required="true"
                                               requiredMessage="#{cc.attrs.passwordRequiredMessage}"
                                               styleClass="login-form_field"
                                               immediate="true"/>
                            </h:panelGroup>
                            <h:link styleClass="login-form_link" value="#{cc.attrs.recoverPasswordLabel}" outcome="#{cc.attrs.recoverPasswordOutcome}"/>

                            <h:panelGroup/>
                            <p:selectBooleanCheckbox value="#{cc.attrs.rememberMe}" itemLabel="#{cc.attrs.rememberMeLabel}" immediate="true"/>
                            <h:panelGroup/>

                            <h:panelGroup/>
                            <h:panelGroup>
                                <p:commandButton id="submitForm" value="#{cc.attrs.loginLabel}" actionListener="#{cc.attrs.actionListener}" update="form"/>
                                <span class="login-form_or">or</span>
                                <h:link styleClass="login-form_link" value="#{cc.attrs.registerLabel}" outcome="#{cc.attrs.registerOutcome}"/>
                            </h:panelGroup>
                            <h:panelGroup/>
                        </h:panelGrid>
                    </p:panel>
                </div>
            </h:form>
        </div>
    </cc:implementation>
</html> 
```

支持组件：

```
@FacesComponent("com.example.LoginForm")
public class LoginFormComponent extends UIInput implements NamingContainer
{
    @Override
    protected Object getConvertedValue(FacesContext context, Object newSubmittedValue) throws ConverterException
    {
        UIInput emailAddressComponent = (UIInput) findComponent(EMAIL_ADDRESS_ID);
        UIInput passwordComponent = (UIInput) findComponent(PASSWORD_ID);
        String emailAddress = (String) emailAddressComponent.getValue();
        String password = (String) passwordComponent.getValue();
        return new LoginFormValue(emailAddress, password);
    }

    public void postValidate(ComponentSystemEvent e) {
        FacesContext ctx = getFacesContext();

        // Don't validate credentials if the username and/or password fields are invalid.
        if (!ctx.getMessageList(EMAIL_ADDRESS_ID).isEmpty() || !ctx.getMessageList(PASSWORD_ID).isEmpty())
        {
            return;
        }

        LoginFormValue value = (LoginFormValue) getConvertedValue(null, null);
        MethodExpression checkCredentials = (MethodExpression) getAttributes().get(CHECK_CREDENTIALS_ATTRIBUTE_NAME);
        checkCredentials.invoke(ctx.getELContext(), new Object[]{getClientId(), value.getEmailAddress(), value.getPassword()});
    }

    @Override
    public String getFamily()
    {
        return "javax.faces.NamingContainer";
    }

    public static final String CHECK_CREDENTIALS_ATTRIBUTE_NAME = "checkCredentials";
    public static final String EMAIL_ADDRESS_ID = "form:emailAddress";
    public static final String PASSWORD_ID = "form:password";
} 
```

完整性类`LoginFormValue`：

```
public class LoginFormValue
{
    public LoginFormValue(String emailAddress, String password)
    {
        this.emailAddress = emailAddress;
        this.password = password;
    }

    public String getEmailAddress()
    {
        return emailAddress;
    }

    public String getPassword()
    {
        return password;
    }

    private String emailAddress;
    private String password;
} 
```

使用登录表单的页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ex="http://java.sun.com/jsf/composite/components/example">
    <h:head>
        <title></title>
    </h:head>
    <h:body>
        <ui:composition template="/WEB-INF/templates/myLayout.xhtml">
            <ui:define name="windowTitle">Sign In</ui:define>
            <ui:define name="body">

                <ex:login-form emailAddress="#{loginBean.emailAddress}"
                               rememberMe="#{loginBean.rememberMe}"
                               checkCredentials="#{loginBean.checkCredentials}"
                               actionListener="#{loginBean.submit()}"
                               recoverPasswordOutcome="recover-password"
                               registerOutcome="signup"/>

            </ui:define>
        </ui:composition>
    </h:body>
</html> 
```

最后，页面的支持 bean：

```
@Named
@RequestScoped
public class LoginBean implements Serializable
{
    public String getEmailAddress()
    {
        return emailAddress;
    }

    public void setEmailAddress(String emailAddress)
    {
        this.emailAddress = emailAddress;
    }

    public boolean isRememberMe()
    {
        return rememberMe;
    }

    public void setRememberMe(boolean rememberMe)
    {
        this.rememberMe = rememberMe;
    }

    /** Action listener for login-form. Called after validation passes. */
    public void submit()
    {
        User user = userDao.findByEmailAddress(emailAddress);
        userRequestBean.login(user.getUserId());

        // Remember me
        if (!rememberMe)
        {
            return;
        }

        // Handle rememberMe here (create a cookie, etc.)
    }

    /** Called by the backing component's postValidate event handler */
    public void checkCredentials(String clientId, String emailAddress, String password)
    {
        if (!securityEjb.checkCredentials(emailAddress, password))
        {
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Incorrect email address/password", null);
            FacesContext ctx = FacesContext.getCurrentInstance();
            ctx.addMessage(clientId, message);
            ctx.renderResponse();
        }
    }

    private String emailAddress = "";

    private boolean rememberMe = true;

    @Inject
    private UserRequestBean userRequestBean;

    @EJB
    private SecurityEjb securityEjb;

    @EJB
    private UserDao userDao;

    @EJB
    private LoginCookieDao loginCookieDao;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T01:30:30.130

这种`f:event postValidate`方法不会给您留下很多选择。

我更喜欢的选项是对表单的最后一个组件进行验证，然后使用绑定和 f:attribute 传入其他组件。

例如

```
<h:inputText id="field1" binding="#{field1}" ... />
<h:inputText id="field2" validator="#{...}">
  <f:attribute name="field1" value="#{field1}"/>
</h:inputText> 
```

然后在您的验证器中，您可以从 UIInput 中获取其他组件：

```
UIComponent field1 = field2.getAttributes().get("field1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T21:36:44.933

我使用[JsfWarn](http://www.knitelius.com/jsfwarn/)解决了类似的问题，我认为它以一种更简洁的方式解决了您的问题。

与 JSF 验证器不同，WarningValidators 在模型更新后的渲染响应之前执行，应用程序已被调用，因此您可以简单地访问您的应用程序以获取验证结果。

```
@Named
public class BarWarningValidator implements WarningValidator{

    @Inject
    private MyValidationBean validationBean;

    @Override
    public void process(FacesContext context, UIInput component, ValidationResult validationResult) {
        if(!validationBean.isBarValid()) {
            validationResult.setFacesMessage(new FacesMessage(FacesMessage.SEVERITY_WARN, "FooBar", "This is a warning."));
        }
    }
} 
```

并将验证器添加到目标字段：

```
<h:outputLabel for="bar" value="Default warning:" />
<h:inputText id="bar">
    <jw:warning validator="#{barWarningValidator}" />
    <f:ajax event="change" render="..." />
</h:inputText>
<h:message for="bar" /> 
```

# nginx - nginx/php-fpm：更改状态代码不会按预期工作

> ID：10963767
> 
> 赞同：1
> 
> 时间：2012-06-09T19:04:01.960
> 
> 标签：nginx, status, php

我正在尝试构建一个简单的 pastebin 应用程序，该应用程序直接通过 POST 接收内容，因此我可以使用 cURL（使用“-F”参数）通过终端上传文件。由于 Lighttpd (1.4) 正在生成“417 - 预期失败”错误并且不允许我使用 cURL，我正在尝试使用 PHP-FPM 在 nginx 上设置它。为了避免使用重写规则，我只是将每个 404 错误重定向到 'index.php' 来处理它们。但我无法正确设置状态码，我不明白为什么。这里有一些我正在尝试做的 PHP/伪代码：

```
header('Status: 200 OK'); // Change it to 200, as the request could came via a 404 error.
if (there_is_not_a_parameter_in_the_url()) {
    if (file_is_in_POST()) save_file();
    else {
        header('Status: 301 Moved Permanently');
        redirect_user_to_other_page(); // It's not possible to post a file from web, only directly by sending a POST request
    }
}
else {
    if (entry_does_not_exists()) {
        header('Status: 404 Not Found');
        show_404_page();
    }
    else show_entry();
} 
```

调用该`show_entry()`函数时，状态码应该是`200`，因为它在开始时已更改。但我仍然得到一个`404`状态码。唯一正确更改它的时间是当我尝试将其设置为`301`, 在`redirect_user_to_other_page()`通话之前。

有人看到我做错了什么？

# java - 在调用超类型构造函数之前无法引用“X”，其中 x 是最终变量

> ID：10963775
> 
> 赞同：83
> 
> 时间：2012-06-09T19:05:16.647
> 
> 标签：java, constructor, final, supertype

考虑以下 Java 类声明：

```
public class Test {

    private final int defaultValue = 10;
    private int var;

    public Test() {
        this(defaultValue);    // <-- Compiler error: cannot reference defaultValue before supertype constructor has been called.
    }

    public Test(int i) {
        var = i;
    }
} 
```

代码将无法编译，编译器会抱怨我在上面突出显示的行。为什么会发生此错误，最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-09T19:06:20.407

代码最初不会编译的原因是因为`defaultValue`是类的**实例变量**`Test`，这意味着当创建类型的对象时，`Test`也会创建一个唯一的实例`defaultValue`并将其附加到该特定对象。因此，无法`defaultValue`在构造函数中引用，因为它和对象都尚未创建。

解决方案是制作最终变量`static`：

```
public class Test {

    private static final int defaultValue = 10;
    private int var;

    public Test() {
        this(defaultValue);
    }

    public Test(int i) {
        var = i;
    }
} 
```

通过创建变量`static`，它与类本身相关联，而不是与该类的实例相关联，并在 的所有实例之间共享`Test`。静态变量是在 JVM 首次加载类时创建的。由于当您使用它创建实例时该类已经加载，因此静态变量已准备好使用，因此可以在类中使用，包括构造函数。

参考：

*   [论坛帖子问同样的问题](http://www.coderanch.com/t/247949/java-programmer-SCJP/certification/Says-cannot-reference-before-supertype)
*   [了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)
*   [解释类加载器如何加载静态变量](https://stackoverflow.com/questions/1133552/explanation-of-how-classloader-loads-static-variables)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-09T19:08:03.130

这是因为是正在建设中（尚未创建）的实例`defaultValue`的成员`Test`

如果你有它，`static`它是在类加载器加载你的类时加载的

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-06T20:00:36.277

您正在引用一个**尚不存在**的变量，如果它是**静态的，它****甚至会在构造函数本身之前**存在。

但是您将面临另一个问题，因为它`defaultValue`变成静态的，因此所有其他实例可能共享您可能不喜欢的相同值：

```
public class Test {

    private final int defaultValue = 10; //this will exist only after calling the constructor
    private final static int value2= 10; //this exists before the constructor has been called
    private int var;

    public Test() {
       // this(defaultValue);    // this method will not work as defaultValue doesn't exist yet
    this(value2); //will work
    //this(10); will work
    }

    public Test(int i) {
        var = i;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-09T19:42:39.493

规则：每个构造函数必须在执行自身之前执行超类的构造函数。

所以每个构造函数的第一行是 super() 或者可能是 this() 并且你将 defaultValue 发送到 this 类构造函数 which(defaultValue) 尚不存在，因此存在编译时错误。

您可以将 defaultValue 设为静态，并且由于静态变量是在将类加载到内存时创建的，因此 defaultValue 在 this(defaultValue) 行中可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-09T20:03:37.877

在未构造对象之前，不会设置变量的默认值，因此，如果您希望在构造时设置它们的默认值，请先设置它们`static`或显式设置它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-14T10:24:01.950

在创建对象时调用构造函数，因此编译器不会识别对变量的引用，因为编译器不知道实例变量，因为尚未创建对象。

# c# - 在 Visual Studio 中找不到数据生成计划

> ID：10963778
> 
> 赞同：1
> 
> 时间：2012-06-09T19:05:29.970
> 
> 标签：c#, database, visual-studio-2010, testing

我在 Visual Studio 项目中通过 Visual Studio 2010 Ultimate 手段创建了 SQL Server 数据库。我想用测试数据自动填充它。Msdn 说我应该创建一个新的数据生成计划项目。但是我在新项目菜单中找不到数据生成计划...我错过了什么？))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T21:00:23.670

您是否尝试过[http://msdn.microsoft.com/en-us/library/aa833267.aspx](http://msdn.microsoft.com/en-us/library/aa833267.aspx)？

抱歉，还不能发表评论……

# jquery - 悬停时的按钮描述？

> ID：10963780
> 
> 赞同：0
> 
> 时间：2012-06-09T19:05:55.640
> 
> 标签：jquery, html

我有一个菜单，当一个按钮悬停在上面时，它会在 DIV 中显示按钮的描述，该描述存储在每个按钮的“data-desc”属性中。

```
<ul id="menu">
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
    <li><a href="page" data-desc="Page description">Button</a></li>
</ul>

<div id="showdescription"></div> 
```

查询：

```
 $("ul#menu li").hover(function(){
        $("#showdescription")
            .hide()
            .html( $(this).children("a").eq(0).data("desc") )
            .show("slide", {direction: "down"});
    }, function(){
        $("#showdescription").hide().html("DEFAULT DESCRIPTION").show("slide", {direction: "down"});
    }); 
```

这很好用，但问题是当我一次又一次地通过所有按钮快速移动鼠标指针时，动画会播放很多次。

当用户将鼠标悬停在所有按钮上时，如何让它停止并仅显示一次动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:11:55.040

尝试`stop()`方法：

```
$("ul#menu li").hover(function(){
    $("#showdescription")
        .hide()
        .html( $(this).children("a").eq(0).data("desc") )
        .stop().slideDown()
}, function(){
    $("#showdescription").hide().html("DEFAULT DESCRIPTION").slideDown();
}); 
```

[http://jsfiddle.net/zfnx6/46/](http://jsfiddle.net/zfnx6/46/)

# c# - 如何读取可移植类库中的资源文件？

> ID：10963781
> 
> 赞同：22
> 
> 时间：2012-06-09T19:06:01.437
> 
> 标签：c#, .net, embedded-resource

我有一个用于 Windows Phone 应用程序的便携式库。在同一个便携式库中，我有几个内容文件（*Build Action* = *Content*）。

我在便携式库中创建了一个类`DataReader`，它应该将流返回给内容文件。但是，使用下面的代码，我一直`null`从`GetManifestResourceStream`. 我究竟做错了什么？

```
public class DataReader
{
    public static Stream GetStream(string code)
    {
        string path = string.Format("./data/code-{0}.dat", code);
        return Assembly.GetExecutingAssembly().GetManifestResourceStream(path);
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-12-07T20:48:07.500

你的路径是错误的。您正在使用斜杠，但在嵌入式清单资源名称中，斜杠在构建期间被转换为句点。此外，根据您的 PCL 目标平台，您甚至可能无法调用`Assembly.GetExecutingAssembly()`.

这是您可以执行的操作：

```
var assembly = typeof(AnyTypeInYourAssembly).GetTypeInfo().Assembly;

// Use this help aid to figure out what the actual manifest resource name is.
string[] resources = assembly.GetManifestResourceNames();

// Once you figure out the name, pass it in as the argument here.
Stream stream = assembly.GetManifestResourceStream("Some.Path.AndFileName.Ext"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-01T00:31:52.227

来自[http://social.msdn.microsoft.com/Forums/windowsapps/en-US/386eb3b2-e98e-4bbc-985f-fc143db6ee36/read-local-file-in-portable-library#386eb3b2-e98e-4bbc-985f -fc143db6ee36](http://social.msdn.microsoft.com/Forums/windowsapps/en-US/386eb3b2-e98e-4bbc-985f-fc143db6ee36/read-local-file-in-portable-library#386eb3b2-e98e-4bbc-985f-fc143db6ee36)

> 无法在 Windows 应用商店应用程序和 Windows Phone 8 应用程序之间进行文件访问。您将不得不使用特定于平台的代码来打开文件并获取流。然后，您可以将流传递到 PCL。

如果您使用内容构建操作构建它，则 XML 不在 DLL 中。它在文件系统上，无法从 PCL 内部获取。这就是为什么所有答案都将构建操作设置为**Embedded Resource**。它将文件放在`MyPCL.DLL\Path\To\Content.xml`.

**但是**，如果您将构建操作设置为**Content**并将复制类型设置为**Copy if newer**，它会将您的文件放在与可执行文件相同的目录中。

![解决方案资源管理器、属性和 Windows 资源管理器](../Images/4e66c010b4adc540c232c4b4d6da38f5.png)

因此，我们可以在我们的 PCL 中放置一个用于读取文件的接口。在启动我们的不可移植代码时，我们将一个实现注入 PCL。

```
namespace TestPCLContent
{
    public interface IContentProvider
    {
        string LoadContent(string relativePath);
    }
}

namespace TestPCLContent
{
    public class TestPCLContent
    {
        private IContentProvider _ContentProvider;
        public IContentProvider ContentProvider
        {
            get
            {
                return _ContentProvider;
            }
            set
            {
                _ContentProvider = value;
            }
        }

        public string GetContent()
        {
            return _ContentProvider.LoadContent(@"Content\buildcontent.xml");
        }
    }
} 
```

现在 PCL 已在上面定义，我们可以在不可移植的代码中创建我们的接口实现（如下）：

```
namespace WPFBuildContentTest
{
    class ContentProviderImplementation : IContentProvider
    {
        private static Assembly _CurrentAssembly;

        private Assembly CurrentAssembly
        {
            get
            {
                if (_CurrentAssembly == null)
                {
                    _CurrentAssembly = System.Reflection.Assembly.GetExecutingAssembly();
                }

                return _CurrentAssembly;
            }
        }

        public string LoadContent(string relativePath)
        {
            string localXMLUrl = Path.Combine(Path.GetDirectoryName(CurrentAssembly.GetName().CodeBase), relativePath);
            return File.ReadAllText(new Uri(localXMLUrl).LocalPath);
        }
    }
} 
```

在应用程序启动时，我们注入实现，并演示加载内容。

```
namespace WPFBuildContentTest
{
    //App entrance point. In this case, a WPF Window
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            ContentProviderImplementation cpi = new ContentProviderImplementation();

            TestPCLContent.TestPCLContent tpc = new TestPCLContent.TestPCLContent();
            tpc.ContentProvider = cpi; //injection

            string content = tpc.GetContent(); //loading
        }
    }
} 
```

**编辑：**为简单起见，我将其保留为字符串而不是 Streams。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T23:23:08.893

只是响应赏金请求。首先，使用 Build Action = Content 实际上根本不会影响构建。它是其他工具可以读取的项目项属性。例如，安装程序构建器使用它来确定文件需要包含在安装程序中并部署到用户的机器上。

使用 Build Action = Embedded Resource 如被赞成的问题所述是 OP 的疏忽。这实际上指示 MSBuild 将文件作为资源嵌入程序集清单中，使用 Assembly.GetManifestResourceStream() 在运行时检索它。

但是从赏金评论中可以清楚地看出你也不想要那个。回退是仅将文件复制到目标机器上。它会耐心地坐在哪里，直到你需要它。值得注意的是，这不会**以**任何方式改变用户从商店下载的包的大小。它占用相同数量的空间，无论是在程序集内部还是包中的单独文件。

因此，将其作为一种取得成功的方式。

它在运行时确实有所不同，整个程序集在加载时被映射到虚拟内存中。因此，具有资源的程序集将占用更多的虚拟内存空间。但是“虚拟”这个词很重要，它占用手机的资源很少。对于资源中的每 4096 个字节，页面映射表中只有几个字节。在虚拟内存被访问之前，您不会开始为虚拟内存付费。此时手机操作系统需要将其从虚拟内存实际转换为物理内存。或者换句话说，将资源的字节加载到 RAM 中。这与加载文件没有什么不同，当你打开它时它也会被加载到 RAM 中。

因此，将其作为一种取得成功的方式。

我们已经没有充分的理由来实际这样做了，微软确实选择了默认方式来处理资源作为最佳实践。这是。但有时您*必须*将内容部署为文件，仅仅是因为它太大了。一个推 2 GB 或更多，消耗 32 位操作系统上的所有虚拟内存，因此不可能映射到 VM。该程序根本无法启动。这不是电话用户会非常满意的那种程序，真的。

然后，您需要专注于解决方案的打包构建阶段，这是构建手机应用程序的最后一步。已编译解决方案中的所有项目并创建上传到商店并由用户下载的唯一文件的文件。

是的，那里有一个问题，MSBuild 不够聪明，无法看到使用该资源的 PCL 库。Build action = Content 应该足够好，就像安装程序一样，但这不起作用。它*只会*打包DLL，而不是资源。它假设您已嵌入它，这是最佳实践解决方案。

您需要做的是覆盖包清单。在[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/apps/br230261%28v=vs.120%29.aspx)中描述。非常*非常*难看，你正在看着一个空白的闪烁光标。这就是我没有好的建议的地方，这是不应该做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T08:49:05.157

将您的文件添加到可移植资源并将构建操作设置为*Embedded Resource*。例如文件夹下的`GB.png`文件。`US.png``CountryFlags`

用这样的代码添加一个 getter 函数（这里它是针对我们的 countryflag getter 图像的）。

```
public class CountryFlags {
    public static Stream GetFlagStream(string countryIsoCode2ch)
    {
        var flagname = "Full.DLL.Name.CountryFlags.{0}.png";
        var rs = Assembly.GetExecutingAssembly().GetManifestResourceStream(
                   string.Format(flagname, countryIsoCode2ch));

        return rs;
    }
} 
```

这`Full.DLL.Name`是`.dll`扩展之前生成的可移植库的一部分。（*注意：* `Anything.Resources.dll`对于一个库来说这是一个坏名字，因为至少在生成 XAP 等时它会被 Visual Studio 忽略；相反，例如`Anything.PortableResource.dll`会起作用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T19:30:21.457

如果您已将文件添加为资源，请检查您的 .Designer.cs，每个资源都会有一个属性。您可以从中访问。

这是 dat 文件资源的示例自动生成属性

```
 internal static byte[] MyDatFile {
        get {
            object obj = ResourceManager.GetObject("MyDatFile", resourceCulture);
            return ((byte[])(obj));
        } 
```

您可以将 dat 文件读取为

```
 System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
    var str = enc.GetString(Resource1.MyDatFile); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-20T05:51:10.540

```
var assembly = typeof(PegHelper).GetTypeInfo().Assembly;
using (var stream = assembly.GetManifestResourceStream("Parsers.Peg.SelfDef.xml"))
using (var reader = new StreamReader(stream))
{
    string xmlText = reader.ReadToEnd();
    return XDocument.Parse(xmlText);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-10T06:56:21.623

首先，像这样检索您的程序集（DataLoader 是您的 PCL 程序集中的一个类）：

```
var assembly = typeof(DataLoader).GetTypeInfo().Assembly; 
```

将您的文件添加到可移植资源并将**构建操作设置为 Embedded Resource**。

然后你可以像这样检索你的资源：

```
string resourceNam= "to be filled";
var assembly = typeof(DataLoader).GetTypeInfo().Assembly;
var compressedStream = assembly.GetManifestResourceStream(resourceName)); 
```

例如，如果我在程序集“TvShowTracker.Helpers”的文件夹“Assets/Logos”中有一个文件 logo.png，我将使用以下代码：

```
string resourceNam= "TvShowTracker.Helpers.Assets.Logos.logo.png";
var assembly = typeof(DataLoader).GetTypeInfo().Assembly;
var compressedStream = assembly.GetManifestResourceStream(resourceName)); 
```

快乐编码:)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-09T21:18:59.123

您需要使用 Application.GetResourceStream 方法而不是使用 GetManifestResource 流

参考：http: [//msdn.microsoft.com/en-us/library/ms596994%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ms596994%28v=vs.95%29.aspx)

```
var albumArtPlaceholder =  
    Application.GetResourceStream( 
        new Uri("Images/artwork.placeholder.png", UriKind.Relative)); 
```

# css - z-index 在 Chrome 中工作......不是在 Firefox 中......？

> ID：10963782
> 
> 赞同：1
> 
> 时间：2012-06-09T19:06:10.377
> 
> 标签：css, z-index

在 Mac 上查看[http://www.amordetango.nl/txp/](http://www.amordetango.nl/txp/) ... Chrome 运行良好。Firefox 没有显示 h1 和 h2 ...！？

这里需要一点帮助！

这三个元素的代码有些复杂，因为 h1 和 h2 必须居中，并且 h2 必须稍微位于 h1 之上……看看 Chrome，你就会明白我的意思。

```
hgroup 
{
    position: relative;
    text-align: center; /* to center h1 en h2 */
    z-index: 1;
}

h1 
{
    font-family: 'BebasNeueRegular', sans-serif;
    color: #fff;
    line-height: 100%;
    font-weight: normal;
    text-transform: uppercase;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    margin-top: -50%; /* half the height */
    margin-left: -50%; /* half the width */
    z-index: 2;
    letter-spacing: 0.15em;
    padding-left: 0.15em; /* to compensate letter-spacing h1 */
}

h2 
{
    font-family: 'MutluOrnamental', sans-serif;
    line-height: 100%;
    font-weight: normal;
    color: #b7b7b7;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    margin-top: -50%; /* half the height */
    margin-left: -50%; /* half the width */     
    z-index: 3;
    padding-top: 10px; /* !important > to make h2 fit in relation to h1 */
}

/* for all browser including all IE! */
h2 {
    opacity: 0.75;
    zoom: 1;
    filter: alpha(opacity=75);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:15:35.377

似乎 Firefox 正确解释了 z-index。问题在于margin-top：h1 和h2 上的-50% 使它们移出视线。

# python - setText() 并不真正适用于 Python

> ID：10963791
> 
> 赞同：2
> 
> 时间：2012-06-09T19:07:57.160
> 
> 标签：python, input, label, pyqt4, settext

```
import sys
from PyQt4 import QtCore,QtGui
from Windows.intro_win import Ui_Introduction
from Windows.post_adder_win import Ui_postTool
import win32clipboard
import pyHook

class Intro(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui = Ui_Introduction()
        self.ui.setupUi(self)
class postTool(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui2 = Ui_postTool()
        self.ui2.setupUi(self)
    def setModPosition(self):
        self.ui2.lineEdit_2.setText("something")
        print "nomnom"

def OnKeyboardEvent(event):
    KeyClicked = event.KeyID
    if KeyClicked == 121:
        print "Debug from keyboardEvent"
        OMD_post.show()
        postTool().setModPosition()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    OMD_intro = Intro()
    OMD_post = postTool()
    OMD_intro.show()
    eventkey = pyHook.HookManager()
    eventkey.KeyDown = OnKeyboardEvent
    eventkey.HookKeyboard()
    sys.exit(app.exec_()) 
```

它并没有真正起作用 - 文本没有改变 - 为什么它不起作用？它没有给我任何错误（但打印出它应该打印的内容） [https://dl.dropbox.com/u/21125662/compilation/_00398.jpg](https://dl.dropbox.com/u/21125662/compilation/_00398.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:45:21.143

`postTool().setModPosition()`in`OnKeyboardEvent`更改**新创建**`show()`的 postTool 的 lineEdit 中的文本，由于您没有新的小部件，因此您不会看到该文本。您可能想要做的是调用`setText`.`OMD_post`

尝试用 中的[keyPressEvent](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#keyPressEvent)函数替换`OnKeyBoardEvent`模块级函数，或者使用 QShortCut。`postTool`

```
class postTool(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui2 = Ui_postTool()
        self.ui2.setupUi(self)
    def setModPosition(self):
        self.ui2.lineEdit_2.setText("something")
        print "nomnom"
    def keyPressEvent(event):
        if type(event) == QtGui.QKeyEvent:
            key = str(event.text()).lower()
            if key == 'whatever':
                self.setModPosition() 
```

或者，

```
class postTool(QtGui.QMainWindow):
    def __init__(self,parent=None):
        ... # the existing stuff
        QtGui.QShortcut(QtGui.QKeySequence("F10"), self, self.setModPosition) 
```

# xcode - 查找 Xcode 4 二进制文件

> ID：10963795
> 
> 赞同：0
> 
> 时间：2012-06-09T19:08:56.017
> 
> 标签：xcode, ios5.1

我正在尝试为 cydia 提交构建我的小应用程序......但我找不到我的实际 .app。在 Xcode 的产品部分下，.app 标记为红色（这意味着它不存在）。在我的项目文件夹中，没有名为 build 之类的文件夹。如何构建我的应用程序？（Xcode 4.3.2，iOS 5.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:28:50.367

没关系。我找到了答案：shift+cmd+2 打开管理器，点击“项目”选项卡，从左侧栏中选择您的项目，最后点击“派生数据”标签右侧的小箭头打开文件夹。从这里只需导航到 /build/products/debug-iphonesimulator 就可以了。

# php - PHP strstr差异问题

> ID：10963797
> 
> 赞同：0
> 
> 时间：2012-06-09T19:09:03.573
> 
> 标签：php, scripting, strstr

所以目前我有一个问题。我有这段代码来查看一个短语是否存在于另一个短语中：

```
if(strstr($matches[1], $query)) 
```

例如，如果：

```
$matches[1] = "arctic white"
$query = "arctic" 
```

在上面的例子中，代码会检测到短语“arctic”在短语“arctic white”中，但我想要的是它检测它是否也在单词内部，而不仅仅是短语。

例如，如果：

```
$matches[1] = "antarctica"
$query = "arctic" 
```

在这种情况下，脚本不会检测到“南极洲”中的“北极”一词，尽管它是。所以我想知道，我该如何编辑`if(strstr($matches[1], $query))`才能检测到所有包含 $query 内容的单词？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:23:50.803

您可以使用 preg_match() 获得更好的结果。preg_match 不仅仅包含正则表达式。它可以完全满足您的需求。IE：

```
if (preg_match("/arctic/i", "antarctica")) {
    // it is there do something
} else {
    // it is not there do something else
} 
```

顺便说一句，小“i”表示区分大小写，更多示例请查看 PHP 手册：http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:18:24.160

利用`strpos()`

例子：

```
$word = "antarctica";
$find = "arctic";

$i = strpos($word, $find);

if($i === false)
{
echo "not found";
}

else
{
echo "found";
} 
```

# .net - 您应该在类中使用变量还是属性，以及全局变量还是静态变量？

> ID：10963800
> 
> 赞同：0
> 
> 时间：2012-06-09T19:09:22.007
> 
> 标签：.net, vb.net, oop, design-patterns

我是 .NET 编程的新手。

我有一个包含 Button1_Click 事件的 Form1 类。（Button1_Click 在运行时创建多个文本框）

这是课程：

```
Public Class Form1

    Dim shiftDown As Integer

    Dim counter As Integer

  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)   Handles MyBase.Load
   End Sub

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
       Dim textbox1 As New TextBox

       counter += 1

       shiftDown = shiftDown + 30

       textbox1.Name = "Textbox" + counter.ToString()
       textbox1.Size = New Size(170, 10)
       textbox1.Location = New Point(10, 32 + shiftDown)
       textbox1.Visible = True

       GroupBox1.Controls.Add(textbox1)

End Sub 
```

结束类

目前这行：

**将 shiftDown 调暗为整数**

**将计数器变暗为整数**

定义为全局变量。

我的问题是，我应该将这些变量定义为属性还是 Button1_Click 事件中的静态局部变量，而不是它们的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:36:06.077

如果您正在构建 Windows 窗体应用程序（我认为您是），请尝试使用 Protected 而不是 Dim：

```
Protected shiftDown As Integer
Protected counter As Integer 
```

这会将变量转换为局部类变量而不是全局变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T02:20:06.127

我会使用变量而不是属性。像现在一样在类 Form1 中全局定义它们，或者在 Button1_click 中将它们定义为静态变量都可以正常工作；这是个人喜好的问题。

可以将它们保持原样，但要理解这些变量可以被 Form1 类中的其他子访问。您也可以在 Button1_click 中将它们设为静态，但如果您显式初始化变量，则需要小心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T19:43:12.507

如果您真的想学习如何构建 .NET 应用程序，我强烈建议您观看 Jason Dollinger 的视频，该视频可在此处获得：[Lab49 档案](http://blog.lab49.com/archives/2650)

它真的很棒，它涵盖了需要构建适当的 WPF / MVVM / .NET 应用程序时遇到的大多数相关问题

# javascript - 如何将格式应用于文本区域中的文本或允许格式化的文本区域的替代方案？

> ID：10963801
> 
> 赞同：2
> 
> 时间：2012-06-09T19:09:23.137
> 
> 标签：javascript, html, formatting, textarea

我正在制作一个 HTML5 游戏，我现在正在使用`textarea`HTML5 中的元素创建一个聊天框。如果我可以在聊天中选择性地对某些行进行着色/粗体/斜体，那就太好了。

我环顾四周，我不确定是否可以完成。首先，它可以使用最新的网络技术在本地完成吗？如果没有，有什么好的和简单的替代 textarea 可以在 Firefox/Opera/Safari/Chrome 上运行并提供与 textarea 类似的功能？

谢谢！

# macos - Dropbox SDK 上传超时错误“-1001”

> ID：10963802
> 
> 赞同：4
> 
> 时间：2012-06-09T19:09:26.643
> 
> 标签：macos, timeout, sync, dropbox

我正在尝试使用 Dropbox SDK 来同步我的应用程序，但我遇到了一些障碍。

在运行 OS X Lion 的笔记本电脑上，同步工作非常好，它可以毫无障碍地上传和下载，但是当我在运行 Snow Leopard 的 Mac Pro 上尝试它（使用完全相同的数据）时，每次都有几个文件失败上传。我进入控制台并为每个未上传的文件发现了这种错误消息：

> [警告] DropboxSDK：向 /1/files_put/sandbox/file.png 发出请求时出错 - 错误域=NSURLErrorDomain 代码=-1001 UserInfo=0x2002e8940 “操作无法完成。（NSURLErrorDomain 错误 -1001。）”

上传包含各种大小的各种文件类型。

我用 300 秒的超时重新构建了 SDK，但没有运气，它仍然会在开始后大约 15 秒超时一些文件。有没有人有任何意见或建议？

# php - jQuery 未获取 ajax 请求返回值

> ID：10963803
> 
> 赞同：0
> 
> 时间：2012-06-09T19:09:26.737
> 
> 标签：php, jquery, ajax, cordova

当我尝试：

```
$.post("http://mysite.com/myscript.php",{ email:$('#emailRegister').val(),password:$('#passwordRegister').val()} ,function(data){
if(data=='yes')
{
  alert("yes", data);
}
else 
{
  alert("not yes", data);
}
}); 
```

我得到：“不是，是的”，实际上应该是“是的”。我的 php 部分将用户添加到数据库并在添加用户时返回“是”（有效）。

在我脚本的另一部分，我使用了相同的技术，但它工作得很好。

有人知道可能出了什么问题吗？如果有必要，这里有更多代码（我正在使用 PhoneGap 开发一个 iOs 应用程序）：

```
$("#register_form").submit(function(){
        if(isEmail($("#emailRegister").val())){
             if($("#passwordRegister").val() == $("#repeatPassword").val()){
                 $.post("http://mysite.com/myscript.php",{ email:$('#emailRegister').val(),password:$('#passwordRegister').val()} ,function(data)
                        {
                        if(data=='yes')
                        {
                        alert("yesss ",data);
                                localStorage.setItem("email", $('#emailRegister').val()); //saves to the database, key/value
                                localStorage.setItem("password", $('#passwordRegister').val()); //saves to the database, key/value
                                $.mobile.changePage($("#checkPage"),{ transition: "flip"});
                        }
                        else 
                        {
                            alert(data);
                        }
                        });
             }
             else{
                alert("The passwords do not match!");
             }
         }
         else
         {
            navigator.notification.alert('Please enter a valid emailadres. This adress will be used in several years to send your pictures',null,"Invalid email");

         }
         return false; //not to post the  form physically
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:09:36.123

如果警报实际上说“不是，是”，那么唯一的可能性是数据变量包含警报中看起来像“是”但实际上与“是”略有不同的东西（可能包含空格或换行符） .

而不是`if (data=="yes")`尝试`if (data.match(/yes/))`。

# python - Python中的动态变量

> ID：10963804
> 
> 赞同：0
> 
> 时间：2012-06-09T19:09:36.173
> 
> 标签：python, list, variables

例如，如何在 python 中创建具有动态名称的列表

```
for i in range(len(myself)):
   list(i) = [] 
```

我应该用什么代替 list(i) ？这意味着我想要一些如下名称：

```
list1
list2
list3
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T19:22:42.300

我建议您**只使用列表或字典而不是动态变量名称**。下面的所有版本都会导致`lists[0]`, `lists[1]`etc are `[]`，这似乎与您想要的足够接近，并且从长远来看将更具可读性/可维护性。（注意：我使用`lists`而不是`list`作为变量名，因为后者会覆盖`list`您可能不想要的内置函数）。

1）`lists`作为列表列表的版本（数字只是列表的顺序）：

```
lists = [[] for i in range(len(myself))] 
```

2) 相同，但使用 for 循环而不是列表理解：

```
lists = []
for i in range(len(myself)):
   lists.append([]) 
```

3)`lists`以数字为键的列表字典的版本（如果您想稍后删除某些值，则更灵活一些）：

```
lists = {}
for i in range(len(myself)):
   lists[i] = [] 
```

**关于动态变量名称**，即变量，`list1`而不是`lists[1]`... 说真的，**您可能不应该那样做**。它不必要地复杂且难以维护。想一想 - 下个月您将要修改脚本，并且您将尝试找出变量`list1`的定义位置，而您将无法通过纯文本搜索来做到这一点。这是一种痛苦。
但是，如果您出于某种原因确实想要这样做，则可能会使用`exec`-[这里有一些不使用它的原因-或](https://stackoverflow.com/questions/1933451/why-should-exec-and-eval-be-avoided)[根据文档](http://docs.python.org/library/functions.html#locals)进行修改`locals()`-坏主意。另请参阅评论以了解更多关于为什么这些事情是一个坏主意以及谈论它们时会让人感到困惑的更多讨论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T19:11:12.177

动态变量名称很少是一个好主意。使用字典几乎总是更好：

```
myLists = {"list{}".format(i):[] for i in range(len_i)} 
```

不要`list`用作变量名 - 它隐藏了现有的关键字。

# eclipse - 编辑 eclipse.ini (OS Ubuntu 12.04 LTS) 后无法保存。如何在 eclipse.ini 文件或任何其他 .ini 文件中进行更改？

> ID：10963807
> 
> 赞同：1
> 
> 时间：2012-06-09T19:09:44.513
> 
> 标签：eclipse, ubuntu, scala-ide, ubuntu-12.04

编辑 eclipse.ini (OS Ubuntu 12.04 LTS) 后无法保存。如何在 eclipse.ini 文件或任何其他 .ini 文件中进行更改？

Eclipse 和 Scala IDE 要求将 Heap Size atleat 设置为 1024 MB。当前堆大小显示 371MB 所以我需要修改 eclipse.ini

请注意，更改权限的对话框已禁用，并显示“您不是所有者，因此您无法更改权限。（所有者是：root）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T01:54:27.430

如果这实际上是权限问题，则需要使用 sudo 和 chown 更改权限，然后根据需要更改权限。

首先，您需要拥有该文件才能更改权限。您可以通过运行以下命令来做到这一点： sudo chown your_username:your_username filename

它会询问您的密码。输入您登录 Ubuntu 时使用的那个。

然后运行： ls -l 文件名

你会得到这样的输出：

-rw-rw-r--

请注意 和 已更改为您的。“-rw-rw-r--”部分是您接下来感兴趣的部分。如果第一组 'r's 或 'w's 丢失，您需要添加它们。这些是读取和写入文件的权限。您可以通过运行以下命令来做到这一点：

sudo chmod ug+rw

现在用 gedit 编辑文件应该可以工作了。

如果您还不知道这些命令，我​​建议您熟悉它们。

# java - 我如何在java中为蛇和梯子游戏制作棋盘？

> ID：10963809
> 
> 赞同：0
> 
> 时间：2012-06-09T19:10:45.563
> 
> 标签：java, swing, frame

我在用java实现10*10的蛇和梯子游戏时遇到了困难。我无法实现这样的屏幕。我该怎么办？我尝试用图像实现它，然后用位置移动图像，但这样我无法完成它。有什么好的方法可以实现吗？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:00:06.323

简单创建一个网格（10*10）和一个按钮[10][10]数组，将这些按钮设置在网格上。现在将 1 个蛇和梯子游戏背景图像拆分为 100 张图片。在按钮上设置这些恶意图像。现在您可以访问您的每个数字（1-100）位置 var b[i,j] 并在此按钮上设置播放器图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:18:16.643

只是一个想法，将原始图像放在一个框架中，并用与原始图像相同条件的透明图像覆盖该框架（意味着蛇和梯子坐标应该与原始板相同）。现在在透明图像中玩游戏，这样您就不必担心重新绘制原始图像。

正如乔尔所说，请发布代码以更好地理解。

[这个链接有那个游戏的设计。可能你可以看看。](http://www.scribd.com/sudantha-sulochana/d/31905900-Java-Programming-Creating-a-Snake-and-Ladders-Game-and-Object-oriented-concepts)

# python - 在 python 中导入到导入器范围的名称

> ID：10963813
> 
> 赞同：2
> 
> 时间：2012-06-09T19:11:32.783
> 
> 标签：python, namespaces

有两个脚本：

```
#imptee.py
foo = "abc"

def show():
    print "foo from imptee:",foo 
```

* * *

```
#impter.py:

#!/usr/bin/env python

from imptee import *

show()

foo = 123

print "foo from impter:",foo
show() 
```

当我运行 impter.py 时，它会产生以下结果：

> 来自 imptee 的 foo：abc
> 
> 来自 impter 的 foo：123
> 
> 来自 imptee 的 foo：abc

我只是不明白为什么在将 123 分配给变量 foo 后，show() 仍然打印'abc'，而不是 123。我认为在“from imptee import *”之后，foo 和 show() 现在在全局命名空间中，并且有没有本地命名空间。我明白搜索顺序应该是：本地命名空间、全局命名空间、内置名称规范。那么，这是为什么呢？有人可以帮我一把吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:18:19.947

Python中所谓的“全局命名空间”其实就是*模块*命名空间。每个模块都有一个，它们是独立的。因此，导入`*`from将*对象引用*从`imptee`复制到; 即使在事后仍然有自己的命名空间，它引用了不管。*`imptee``__main__``imptee``show()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:16:54.947

因为该语句`from imtee import *`（大约）与 相同`from imptee import foo`，也（大约）与 相同`import imptee; foo = imptee.foo`。因此`foo`不会`imptee`因为将相同的值分配给两个变量然后更改其中一个变量不会更改另一个变量的值的相同原因而改变：

```
>>> a = "hello"
>>> b = a
>>> a
'hello'
>>> b
'hello'
>>> b = 'world'
>>> a
'hello'
>>> b
'world' 
```

此外，正如其他答案所指出的那样，“全局”命名空间实际上是“模块的全局”，而不是“所有模块的全局”。其他模块中的全局变量可以通过导入模块然后设置相应的属性来改变：`import imptee; imptee.foo = "bar"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T19:20:34.840

模块有单独的命名空间。当您从一个模块导入到另一个模块时，您正在从源模块导入值（通常是函数，但在这种情况下是文字“abc”）并将它们分配给目标模块中的名称。

当您这样做时`from imptee import *`，您将它们分配给它们在源模块中的相同名称，但这实际上并没有改变源模块中的指针。它只是重复名称。

当您在导入后更改目标模块中的分配时，这不会更改源模块中的任何内容，因为即使名称看起来相同，它们也是单独的指针并且可以指向单独的事物。

`import imptee`如果您这样做然后手动分配值，这可能会更清楚： `foo = imptee.foo`。然后你会做`foo = 123`，目标模块中 foo 的值已经改变但源模块中类似名称的指针的值没有改变是有意义的。*

# arrays - Matlab数组算术不准确

> ID：10963823
> 
> 赞同：1
> 
> 时间：2012-06-09T19:13:41.553
> 
> 标签：arrays, matlab, floating-point, precision, floating-accuracy

当我试图在 matlab 中模拟我的正弦近似时，我发现了一个奇怪的问题。问题是，当我将函数应用于数组时，它会返回一个结果，而将函数应用于单个值会给出稍微不同的结果。

在此示例中，我能够获得相同的行为：

```
z = single(0:0.001:1);
F = @(x) (x.^2 - single(1.2342320e-001)).*x.^2;  %some test function

z(999)        % Returns 9.9800003e-001
F(z(999))     % Returns 8.6909407e-001
temp = F(z);  
temp(999)     % Voila! It returns 8.6909401e-001 
```

我也发现了一些东西。一个是第一个结果是正确的（不是后者）。其次，术语的重新排列**有时**可以解决问题。所以我不知道如何摆脱它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:22:16.073

单精度只有最多 7 位十进制数字的有意义的精度，所以说`8.6909407e-001`“正确”和`8.6909401e-001`“错误”在这种情况下没有太大意义。

正如您已经发现的那样，浮点算术对运算顺序也很敏感。当对矩阵而不是标量进行操作时，Matlab 可能会巧妙地改变计算顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:21:34.580

对于向量算术，MatLab 的线性代数库可能使用 SIMD 指令而不是 x87 FPU，精度会略有不同。

相对误差非常非常小，不应破坏任何合理设计的计算。你在测试浮点相等吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:47:28.447

我可以保证任何使用浮点数学的设备实际上都*不会*为数学相等的表达式提供二进制相等的结果。在您的各种平台上尝试以下 MATLAB 的等效项：

```
a = [repmat(1, 10000, 1); 1e16];
format long
sum(a)
sum(flipud(a)) 
```

结果：

```
1.000000000001000e+16
1.000000000000000e+16 
```

加法是可交换的，所以表达式在数学上是等价的。但是顺序在浮点世界中很重要。显然，当累加值在 0 左右时，按顺序添加 10000 个 1 对于浮点应该没有问题。但是一旦浮点“浮动”到 1e16，1 太小而无法表示，所以它永远不会添加。

这是一个额外的问题：x87 FPU 在内部以扩展精度（80 位）计算。因此，如果编译器决定将中间结果保存在 FPU 中，FPU 代码会给你一个不同的答案。相反，如果它决定将中间结果溢出到堆栈，那么您将返回 64。如果它决定使用 SSE 指令进行计算，那么您将返回 64。

其他答案中建议的这些各种 MATLAB 技巧可能会让您足够接近您的问题。但是，如果您真的在对系统进行完美建模，那么您可能需要一个更可控的仿真框架。也许使用`vpa`, 在每一步转换为正确的位数。或者切换到 C 或 C++，特别注意优化器控制设置。

Or mathematically compute the bounds on your error based on the input scaling, and verify that your answer is always below the bound.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:34:44.197

使用单精度数字，两个结果都是“相等的”（差异小于`single`类型的相对精度）。以下语句的计算结果为真：

```
max(abs( arrayfun(F,z) - F(z) )) < eps('single') 
```

* * *

### 编辑

如果您真的想对此进行控制，可以尝试禁用 MATLAB 加速器以强制它对常规代码和矢量化代码使用相同的执行路径：

```
feature('jit', 'off')
feature('accel', 'off')
max(abs( arrayfun(F,z) - F(z) ))

feature('jit', 'on')
feature('accel', 'on')
max(abs( arrayfun(F,z) - F(z) )) 
```

第一个/第二个的结果分别为：

```
ans =
     0
ans =
   5.9605e-08 
```

显然，默认情况下加速器和即时编译器都是打开的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T10:04:14.763

好的。所有的答案都是正确的，但它们并不能解决问题。我想要的是数学上相等的表达式带来二进制相等的结果，无论我使用标量还是矢量算术。结果在我的 Cortex-M4、我的计算器和许多其他程序和设备中带来了 FPU，但不是 Matlab。

到目前为止，我看到的唯一解决方案是使用`for`-loops 而不是矢量算术。丑陋，但它的工作原理。

**编辑**

感谢您的回复，我们为这个问题提供了更多解决方案。

# c# - 在 WebClient 类中检查文件 URI 是否为 HTML

> ID：10963824
> 
> 赞同：0
> 
> 时间：2012-06-09T19:13:55.987
> 
> 标签：c#, .net, windows

我正在使用 WebClient 类下载文件，但有时文件以 HTML 形式返回（对此我无能为力） 我想做的是使用 WebClient 类检查内容是否为 HTML，我的代码是如下：

```
client.DownloadFile(downloadURL, "downloadedfile.zip"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:22:17.057

一种解决方案可能是使用 UrlMon：

*   [使用 .NET，如何根据文件签名而不是扩展名找到文件的 mime 类型](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature)

另一个可能是 WebResponse.ContentType：

*   [http://msdn.microsoft.com/en-us/library/system.net.webresponse.contenttype%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.webresponse.contenttype%28v=vs.71%29.aspx)

我相信后者只是 WebClient 响应标头的一部分：

*   [http://msdn.microsoft.com/en-us/library/system.net.webclient.responseheaders.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.responseheaders.aspx)

尝试最有前途的，让我们知道你发现了什么！

# php - PHP - Mysql 查询：按天显示订单数并存储在变量中

> ID：10963826
> 
> 赞同：1
> 
> 时间：2012-06-09T19:15:00.657
> 
> 标签：php, mysql

我有一个具有这种结构的表：

```
table name: customer_history

id| orders | order_date (timestamp) |  status    |  
--------------------------------------------------
 1|   1    | 2012-05-29 13:11:59    |  active    |
 2|   1    | 2012-05-29 13:11:59    |  active    |
 3|   1    | 2012-05-30 13:11:59    |  canceled  |
 4|   1    | 2012-05-31 13:11:59    |  trialing  | 
```

我需要查询数据库并计算总订单数，其中状态！= 取消，每一天，回到一个日历月，并为每个每日总数分配一个唯一变量。

昨天的订单总额将类似于 $day-1、两天前 $day-2 等。

**编辑**下面的答案。

```
$query = "SELECT 
            COUNT(*) AS number, 
            DATE(order_date) AS order_day 
        FROM 
            customer_history
        WHERE 
            status <> 'canceled' 
        GROUP BY 
            order_day 
        ORDER BY 
            order_date 
        DESC
        LIMIT 31";

$result = mysql_query($query) or die(mysql_error());

$i = 1;
$days = array();

while($row = mysql_fetch_assoc($result)) {

      $days[$i] = $row;
      $i++;
}

echo $days[1]['number'];
echo $days[2]['number'];
echo $days[3]['number'];
echo $days[4]['number'];
echo $days[5]['number'];
echo $days[6]['number']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:29:15.047

```
SELECT COUNT(*) AS number, DATE(order_date) AS order_day FROM orders WHERE status <> 'canceled' GROUP BY order_day ORDER BY order_date DESC LIMIT 31 
```

然后循环遍历结果。第一个是当天，第二个是昨天，第三个是前天，以此类推。

**编辑**

包括循环/变量：

```
 <?php

$query = "SELECT 
                COUNT(*) AS number, 
                DATE(order_date) AS order_day 
            FROM 
                orders 
            WHERE 
                status <> 'canceled' 
            GROUP BY 
                order_day 
            ORDER BY 
                order_date 
            DESC
            LIMIT 31";

    $result = mysql_query($query);

    $i = 1;
    $days = array();

    while($row = mysql_fetch_assoc($query)
    {
        $days[$i] = $row;
        $i++;

    }

    ?> 
```

echo $days[1]['number'] 为您提供今天的订单数量，$days[2]['number'] 为昨天等。您可以通过 echo $days[x][' 输出实际日期order_day']。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:32:55.123

试试这个查询`GROUP BY order_date`

```
SELECT COUNT(*) AS number, DATE(order_date) AS order_day
FROM orders WHERE status != 'canceled' 
GROUP BY order_date ORDER BY order_date DESC 
```

# android - 将数据传递给正在运行的 AsyncTask

> ID：10963831
> 
> 赞同：2
> 
> 时间：2012-06-09T19:15:38.550
> 
> 标签：android, sockets, android-asynctask

我正在开发一个 Android 应用程序。

我想测试异步套接字在 Android 上是如何工作的，做一个简单的回显客户端。

在[Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)中，我发现了以下代码：

```
import java.io.*;
import java.net.*;

    public class EchoClient {
        public static void main(String[] args) throws IOException {

            Socket echoSocket = null;
            PrintWriter out = null;
            BufferedReader in = null;

            try {
                echoSocket = new Socket("taranis", 7);
                out = new PrintWriter(echoSocket.getOutputStream(), true);
                in = new BufferedReader(new InputStreamReader(
                                            echoSocket.getInputStream()));
            } catch (UnknownHostException e) {
                System.err.println("Don't know about host: taranis.");
                System.exit(1);
            } catch (IOException e) {
                System.err.println("Couldn't get I/O for "
                                   + "the connection to: taranis.");
                System.exit(1);
            }

        BufferedReader stdIn = new BufferedReader(
                                       new InputStreamReader(System.in));
        String userInput;

        while ((userInput = stdIn.readLine()) != null) {
            out.println(userInput);
            System.out.println("echo: " + in.readLine());
        }

        out.close();
        in.close();
        stdIn.close();
        echoSocket.close();
        }
    } 
```

而不是阅读表单`System.in`，我想让用户填写一个 EditText，当用户点击一个按钮时，我想发送用户在该 EditText 上介绍的文本。

而且，我想使用 AsyncTask 来实现它。上面的代码将在`AsyncTask.doBackground()`方法上。

我想做以下事情：用户介绍文本，然后点击发送按钮，然后等待查看响应。当我从 Echo Server 收到响应时，我让用户介绍一个新文本，然后重新开始该过程。还有另一个按钮可以关闭套接字并结束程序。

我的问题是：如何通知有可发送的文本？换句话说，当用户点击发送按钮时，我必须怎么做才能将该文本传递给 AsyncTask？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:28:45.323

看起来您正在构建一个聊天应用程序。

*   **要将文本发送**到服务器，您可以`AsyncTask`在用户每次单击“发送”按钮时开始一个新的。但请确保在完成操作后停止这些任务。

*   **要接收回复**，您可以启动`Service`并定期检查您的服务器。每当您收到要显示的新消息时，您都可以向主要活动发送广播。而且，在活动内部，您需要创建一个`BroadcastReceiver`对象来监听来自`Service`.

因此，当您`BroadcastReceiver`收到来自 的新广播时`Service`，请使用您的消息/文本更新消息列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:25:35.313

`AsyncTask`本质上，您可以执行以下操作：

*   使用一些参数启动任务
*   以简单的方式为您处理后台线程（您不必担心）
*   让您以系统的方式将结果发布到 UI 线程。

在您的情况下，听起来您没有向任务发送数据*，*而是使用指定的参数*启动任务。*

如果您查看[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中给出的示例，您将看到模板定义的第一个参数是启动任务的参数集。在您的情况下，您可能想要使用`URL`（或可能只是字符串）参数。当用户单击按钮时，您启动任务，下载内容，然后将结果发布到 UI 线程！

# java - 如何使用 JPA 的 JPQL 连接两个表

> ID：10963832
> 
> 赞同：0
> 
> 时间：2012-06-09T19:15:39.783
> 
> 标签：java, sql, hibernate, jpa, jpql

好吧，我有两张桌子：

产品_历史

```
product_id  last_update_date
-------------------------------
1           12JAN2012
1           13JAN2012
1           14JAN2012
2           13JAN2012
3           12JAN2012
4           12JAN2012 
```

产品

```
product_id, product_name
-------------------------
1           Orange
2           Mango
3           Apple
4           Strawberry 
```

产品 JPA 对象如下所示：

```
@Entity
@Indexed
@Table(name="Products")
public class Product extends AbstractDomainObject {

    private static final long serialVersionUID = 8619373591913330663L;

    private String product_id;
    private String product_name;

    @Id 
    @Column(name="product_id")
    public Long getProduct_id() {
        return product_id;
    }

    public void setProduct_id(String Product_id) {
        this.Product_id = Product_id;
    }
} 
```

我需要编写一个 JPQL 查询，以便获得在两个日期之间更新的产品列表。在普通的 sql 中，我会做这样的事情：

```
-- assuming startDate is 13JAN2012 and endDate is 14JAN2012

Select product_name from products where product_id in 
(Select product_id where max(last_update_date) betwen startDate and endDate); 
```

如何为 JPA 编写等效查询？我尝试过这样的事情，但没有运气。

```
String queryString = "from Products p, Product_History h where " +
                "product_id = :newId " +
                "and product_id in ( " +
                "Select product_id from product_history + +
                            "where max(last_update_date) between max:startDate and :endDate);

    Query query = entityManager.createQuery(queryString);   
    query.setParameter("newId", 1);
    query.setParameter("startDate", '13JAN2012');   
    query.setParameter("endDate", '14JAN2012'); 

    return query.getResultList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:58:02.953

您必须使用 @OneToMany 连接对 Product 中的 product_histroy 进行惰性获取，然后使用：

```
select distinct p from Products p 
where p.productHistory.lastUpdateDate > ? and p.productHistory.lastUpdate < ? 
```

# rss - Feedburner 订阅者数量和我的 RSS 阅读器应用程序

> ID：10963834
> 
> 赞同：3
> 
> 时间：2012-06-09T19:16:04.053
> 
> 标签：rss, feed, feedburner

我将创建一个 Feed 阅读器应用程序。当用户请求提要时，提要在我的服务器上下载（或从缓存中加载）**，**然后从**我的服务器****下载**到用户的 PC/智能手机。

 **但我认为 Google Feedburner 不会知道这一点，也不会显示管理员的真实订阅者数量。那正确吗？

如果我想让 google 正确统计读者（以及正在使用我的应用程序的人），我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:49:14.557

您基本上谈论的是为提要创建网络代理，然后将代理提要提供给您的用户。默认情况下，此方法不会更新 feedburner 订阅者数量，因为他们只会看到 1 个唯一访问者请求订阅源，但是有一些方法可以通知谷歌您正在代表一定数量的订阅者请求订阅源。

> 对于独立的提要阅读器，该用户在其计算机上运行一个应用程序，该应用程序全天重复获取提要。我们查看这些请求的特征，并区分来自同一个人的重复请求（如定期轮询间隔、一致的 IP 地址和常见的用户代理所示）和不同的请求（其中一个或多个先前的数据点不同）。对于基于 Web 的提要阅读器（My Yahoo、Google Reader、Bloglines、Pageflakes 等），这些服务全天重复检索提要，但代表多个人这样做。几乎所有这些服务都会向我们报告有多少用户订阅了该提要。归根结底，我们统计了订阅了多少独立订阅源阅读器，并将它们添加到基于 Web 的用户中。最终结果是我们报告的用户总数。（我遗漏了一些细节；有关更完整的答案，请参见下文。）

从[这里](http://www.problogger.net/archives/2007/08/16/why-does-my-feedburner-subscriber-count-fluctuate/)**

# javascript - 骨干.js - 每秒刷新一个集合？

> ID：10963836
> 
> 赞同：2
> 
> 时间：2012-06-09T19:16:09.137
> 
> 标签：javascript, backbone.js

我第一次弄乱了backbone.js [Todos](http://documentcloud.github.com/backbone/docs/todos.html)。我正在尝试为每个 Todo 添加一个计时器，这很好，但是在我刷新页面之前计时器不会刷新，我希望它每秒刷新一次。

AppView 包含以下内容：

```
window.AppView = Backbone.View.extend({

    initialize: function() {
          _.bindAll(this, 'addAll');
          Todos.bind('refresh', this.addAll);
          Todos.fetch();
    },

    addAll: function() {
      Todos.each(this.addOne);
    },
} 
```

所以我想我可以像这样每秒重新加载它：

```
window.setInterval(function(){ 
  window.Todos.refresh();
}, 1000); 
```

addAll 被调用，我在控制台上没有收到任何错误，但视图没有更新。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:57:03.470

是的，正如上面@muistooshort 所问的，你怎么知道计时器没有更新？尝试这个

```
window.setInterval(function(){ 
  window.Todos.refresh(); // or .reset() if you've updated backbone.js
  console.log('tick');
}, 1000); 
```

我想你看到了`setInterval`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:21:42.407

我的第一个猜测是这一行：

```
Todos.each(this.addOne); 
```

是不正确的。你可能想要这样的东西：

```
Todos.each(_.bind(this.addOne,this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:13:56.437

通过手动触发模型的更改事件找到了一种方法。这是有效的，因为视图的渲染函数通过以下方式绑定到模型`this.model.bind('change', this.render, this);`

（在这种情况下，`Todos`是`Todo`模型的集合

```
Todos.each(function (todo) { 
    todo.trigger('change');
}); 
```

# android - 从另一个资源中绘制位图

> ID：10963838
> 
> 赞同：7
> 
> 时间：2012-06-09T19:16:17.337
> 
> 标签：android, bitmap, draw, android-canvas

我有两个位图，*背景*和*前景*。如何在不使用另一个 Canvas 的情况下在背景上绘制位图前景？

解决方案：

1) 首先使用附加选项 ARGB_8888 从资源创建位图

```
BitmapFactory.Options options = new BitmapFactory.Options();  
options.inPreferredConfig = Bitmap.Config.ARGB_8888; 
```

2) 声明位图

```
Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.background, options);  
Bitmap foreground = BitmapFactory.decodeResource(getResources(), R.drawable.foreground, options); 
```

3) onDraw()函数内部绘制图形

```
protected void onDraw(Canvas canvas)    
{  
    canvas.drawColor(Color.White);

    Paint paint = new Paint();
    canvas.drawBitmap(background, 0, 0, paint);
    paint.setXfermode( new PorterDuffXfermode(PorterDuff.Mode.SRC_OVER));
    canvas.drawBitmap(foreground, 0, 0, paint); 
} 
```

正如 Soxxeh 所说，这是非常好的信息来源：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Xfermodes.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Xfermodes.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:22:58.757

尝试这个：

```
canvas.drawBitmap(backgroundImageBitmap, 0.0f, 0.0f, null);
canvas.drawBitmap(foregroundImageBitmap, 0.0f, 0.0f, null); 
```

第二个图像（前景图像）必须具有 Alpha 方面，否则您无法看穿它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:27:55.873

If you use an ImageView you can set the first bitmap as a background and the second as an image source.

```
<ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background"
    android:src="@drawable/foreground"/> 
```

# java - JAVA JFrames：空格键重置我的游戏

> ID：10963839
> 
> 赞同：0
> 
> 时间：2012-06-09T19:16:22.377
> 
> 标签：java, swing, focus, jframe, cardlayout

所以我做了一个游戏，我会使用卡片布局在帧之间进行转换。但是，每次我使用任务栏调整音量然后回到我的游戏时，如果我按下空格键（这是我的开火按钮），游戏就会回到我的第一帧，即主帧。

为什么会出现这个问题？我听说它与“可聚焦”有关，但我不确定这意味着什么。

我的 JFrame 像典型的 JFrame 一样设置：

```
public class testAngles {

public static void main(String args[]) throws IOException {
    JFrame frame = new JFrame("Angle Tests");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    movements m = new movements();
    frame.add(m);
    frame.addKeyListener(m);
    frame.setSize(800, 600);
    frame.setVisible(true);
     }
  } 
```

如果有人可以提供帮助；我非常感谢它：]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T20:05:27.503

您已经查看了[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，然后是简单且可能的，例如（基于 3.HFOE 的代码，谢谢），其余的可能是阻止第一个和最后一个的`setEnabled`值`JButtons``Cards`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class OnTheFlyImageTest {

    private static final long serialVersionUID = 1L;
    private JPanel cardPanel;
    private CardLayout cardLayout;
    private JFrame frame;

    public OnTheFlyImageTest() {
        JPanel cp = new JPanel(new BorderLayout());
        cp.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        cardLayout = new CardLayout(5, 5);
        cardPanel = new JPanel(cardLayout);
        cp.add(cardPanel);
        for (int i = 0; i < 5; i++) {// Create random panels for testing.
            String name = "ImagePanel" + (i + 1);
            String image = (i & 1) == 0 ? "foo.gif" : "bar.gif";
            Color clr = (i & 1) == 0 ? Color.red : Color.blue;
            ImagePanel imgPanel = new ImagePanel(name, image, clr);
            cardPanel.add(imgPanel, name);
            cardLayout.addLayoutComponent(imgPanel, name);
        }
        JPanel buttonPanel = new JPanel(new GridLayout(1, 2, 5, 5));
        JButton prevButton = new JButton("< Previous");
        prevButton.setActionCommand("Previous");
        prevButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.previous(cardPanel);
            }
        });
        buttonPanel.add(prevButton);
        JButton nextButton = new JButton("Next >");
        nextButton.setActionCommand("Next");
        nextButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.next(cardPanel);
            }
        });
        buttonPanel.add(nextButton);
        JPanel temp = new JPanel(new BorderLayout());
        temp.add(buttonPanel, BorderLayout.LINE_END);
        cp.add(temp, BorderLayout.SOUTH);
        frame = new JFrame("CardLayout and KeyBindings");
        frame.add(cp);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Test");
        frame.pack();
        frame.setVisible(true);
        setKeyBindings();
    }

    private void setKeyBindings() {
        frame.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
                KeyStroke.getKeyStroke("TAB"), "clickTAB");
        frame.getRootPane().getActionMap().put("clickTAB", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.show(cardPanel, "ImagePanel" + 1);
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new OnTheFlyImageTest();
            }
        });
    }
}

class ImagePanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private String imgString;
    private JLabel imgLabel;

    public ImagePanel(String name, String imgString, Color backGround) {
        setName(name);
        this.imgString = imgString;
        setLayout(new BorderLayout());
        setBackground((backGround));
        // Ensure size is correct even before any image is loaded.
        setPreferredSize(new Dimension(400, 300));
    }

    @Override
    public void setVisible(boolean visible) {
        if (visible) {
            System.err.println(getName() + ": Loading and adding image");
            ImageIcon icon = new ImageIcon(imgString);
            imgLabel = new JLabel(icon);
            add(imgLabel);
        }
        super.setVisible(visible);
        if (!visible) { // Do after super.setVisible() so image doesn't "disappear".
            System.err.println(getName() + ": Removing image");
            if (imgLabel != null) { // Before display, this will be null
                remove(imgLabel);
                imgLabel = null; // Hint to GC that component/image can be collected.
            }
        }
    }
} 
```

# html - 添加margin-top时出现垂直/高度滚动条

> ID：10963842
> 
> 赞同：3
> 
> 时间：2012-06-09T19:17:18.370
> 
> 标签：html, css

我的 HTML：

```
div.container 
```

我的 CSS：

```
html, body {
  height: 100%;
  background-color: red;
  padding-left: 0px;
  padding-right: 0px;
}    
.container {
  height: 100%;
  background-color: blue;
  margin-top: 5px;
  *zoom: 1;
} 
```

我想使用 height=100% 并且不想使用溢出=隐藏。

我应该在上面使用哪些 CSS 属性，以便我可以对上面的容器 div 产生 margin-top 的影响，它不会创建垂直滚动条。

想象一下：

```
* Body with color red
* A div container in body and I want to see the margin of "x" px on top bewteen body and conatiner
* Color of div container blue
* No scrollbars and No overflow="hidden" 
```

请帮忙

我怎样才能做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:30:08.773

试试这个 CSS

```
*{
    margin:0;
    padding:0;
}
html, body {
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
    height: 100%;
    background-color: red;
    padding-top:5px;
}    
.container {
    height: 100%;
    background-color: blue;
    *zoom: 1;
} 
```

首先重置所有边距和填充。
`box-sizing:border-box;`意味着无论您添加多少填充，元素的大小都将保持不变。

您还可以为红色条使用绝对定位的 div。

HTML

```
<div class="red-bar"></div>
<div class="content"></div> 
```

CSS

```
.red-bar{ position:absolute; width:100%; height:5px; top:0; background:red; }
.content{ height:100%; background:blue; } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T08:59:56.377

另一种解决方案是使用`padding-top`insted`margin-top`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:37:26.423

由于您的边距将您的 div 向上推，而不是增加总高度。在 css2 中，您可以做的技巧是将容器 div 包装在另一个 div 中，并将其向左或向右浮动。因为浮动元素通常不会推动其父元素。然后给它一个 100% 的宽度。然后清除它。最终代码看起来像......

标记

```
<div class="wrap">
 <div class="container">
  &nbsp;
 </div>
</div>
<div class="clear"></div> 
```

和风格

```
html, body {
  height: 100%;
  background-color: red;
  padding-left: 0px;
  padding-right: 0px;
  margin:0;
}    
.container {
  height: 50%;
  background-color: blue;
  margin-top: 5px;
  *zoom: 1;
}
.wrap{height:auto;float:left;width:100%;}
.clear{clear:both} 
```

# uitableview - UITableView 分组和.plist

> ID：10963845
> 
> 赞同：1
> 
> 时间：2012-06-09T19:18:15.647
> 
> 标签：uitableview, plist

我想使用 plist 制作一个分段的 UITableView。最初，我的 plist 的结构是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>name</key>
        <string>First</string>
        <key>description</key>
        <string>First</string>
        <key>image</key>
        <string>image.png</string>
    </dict>
    <dict>
        <key>name</key>
        <string>Second</string>
        <key>description</key>
        <string>SecondR</string>
        <key>image</key>
        <string>image.png</string>
    </dict>

//etc
</array>
</plist> 
```

[![](../Images/40d5659023ca2a161053438f17dd1106.png)](https://i.stack.imgur.com/XSDTa.png)

我的 'detailView中的 UIImageView 中`name`的行和`rowNamed`标签的名称在哪里？`detailView``and ìmage``detailView`

cell.textLabel.text 确实以`name`这种方式显示了密钥：

```
cell.textLabel.text = [[sortedList objectAtIndex:indexPath.row]objectForKey:@"name"]; 
```

现在，按照这个问题的答案，[从 pList 中截取 UITableView](https://stackoverflow.com/questions/4850659/sectioned-uitableview-sourced-from-a-plist)，我创建了带有部分的新 plist 文件，结构如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>   Section1</string>
        <key>Rows</key>
        <array>
            <dict>
                <key>name</key>
                <string>Test</string>
                <key>description</key>
                <string>test</string>
                <key>image</key>
                <string>testtttt</string>
            </dict>
        </array>
    </dict>
    <dict>
        <key>Title</key>
        <string>   Section2</string>
        <key>Rows</key>
        <array>
            <dict>
                <key>name</key>
                <string>Test</string>
                <key>description</key>
                <string>test</string>
                <key>image</key>
                <string>testtttt</string>
            </dict>
        </array>
    </dict>
</array>
</plist> 
```

[![](../Images/91f513a06c82cb60858edac858320700.png)](https://i.stack.imgur.com/ajter.png)

关键是现在我不知道如何使它类似于以前的 plist 结构（我的意思是，图像，名称和描述），我不知道如何`cellForRowAtIndexPath`显示`name`包含在`Rows`单元格标题中的键. 我试过了

```
cell.textLabel.text = [[[sortedList objectAtIndex: indexPath.section] objectForKey: @"name"]objectAtIndex:indexPath.row]; 
```

但我得到一个空单元格。

我希望 cell.textLabel.text 显示`name`每个部分中包含的每个元素（行）的键有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T09:46:29.627

你`plist`是一个数组`dictionaries`。每个`dictionary`代表一个`section`。并且`rows`在 a`section`中作为 an `array`who `key`is `Rows`in that `section`/存在`dictionary`。所以要得到一个`row`在特定的`section`，首先得到的`section`。然后得到`row`使用`objectForKey:@"Rows"`.

一旦你有了行`array`，它就会再次包含几个`rows`作为`dictionary`.

```
NSDictionary *section = [sortedList objectAtIndex:indexPath.section];
NSArray *rows = [section objectForKey:@"Rows"];
cell.textLabel.text = [[rows objectAtIndex:indexPath.row] objectForKey:@"name"]; 
```

# java - 解析有效号码后得到垃圾？

> ID：10963847
> 
> 赞同：0
> 
> 时间：2012-06-09T19:18:19.337
> 
> 标签：java, parsing, floating-point

好的，所以我有一个测试程序：

```
public class ParseTest {
    public static void main(String[] args){
        String s = "-0.000051";
        System.out.println(s + " != " + Float.parseFloat(s));
    }
} 
```

而且两边的数字也不一样。这是输出：

```
-0.000051 != -5.1E-5 
```

那么，为什么两边输出的数字不一样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:19:33.487

它是相同的数字只是[不同的科学表示](http://en.wikipedia.org/wiki/Scientific_notation)，

例如：

```
100 = 1E2 
```

和

```
0.1 = 1E-1 
```

* * *

**如何获得相同的表示？**

如果您想要相同的表示，请使用`BigDecimal`

```
System.out.println(s + " != " + new BigDecimal(s)); 
```

* * *

**谁将其转换为这种格式？**

例如，当您将原语转换为字符串时

```
float f = 100.123;
String result = "" + f; 
```

它调用[`Float.valueOf(f)`](http://www.docjar.com/html/api/java/lang/Float.java.html)which inturns 调用 which inturn 调用[`Float.toString()`](http://www.docjar.com/html/api/java/lang/Float.java.html)the [`new FloatingDecimal(f).toJavaFormatString();`](http://www.docjar.com/html/api/sun/misc/FloatingDecimal.java.html)this 是封装这些东西的地方

# c - GtkFileChooserDialog gtk_file_chooser_get_filename() 返回 null，即使输入了文件名？

> ID：10963850
> 
> 赞同：0
> 
> 时间：2012-06-09T19:18:23.847
> 
> 标签：c, gtk, gtk3

我正在使用 C 语言开发 Glade3 界面。

到目前为止，我有两个地方可供用户选择保存文件的位置。我有一个 GtkFileChooserDialog，当您单击浏览按钮时会打开。当您单击该对话框上的保存时，它会填充“浏览”按钮旁边的 GtkEntry。

它在您第一次选择文件时起作用，但第二次`gtk_file_chooser_get_filename()`，即使您在对话框中输入了某些内容，它也不返回任何内容。

这是源代码的简化版本，仍然存在问题：[http](http://paste.ubuntu.com/1032567/) ://paste.ubuntu.com/1032567/和与之配套的 Glade3 接口文件：http: [//paste.ubuntu.com/1032572/](http://paste.ubuntu.com/1032572/)

我的 UI 中有两个地方有这样的设置。发生在他们俩身上。我有两个不同的回调函数——一个是旧的尝试，另一个是我最近的尝试。两者都不起作用，尽管较新的版本避免了段错误，因为它会检查返回的内容是否为空。

较新的回调是`on_button5_clicked()`和较旧的`on_button3_clicked`.

我查看了参考资料，但我没有看到任何关于为什么它会返回空指针，即使您选择了文件名。

任何帮助将不胜感激。（我觉得我正处于头撞阶段）。

编辑：所以，我有更多的想法可以尝试。首先，我尝试使用 FileChooser 小部件制作自己的窗口，而不是使用对话框。我这样做是为了确保对话框在没有通过 gtk_Dialog_Run 调用运行时没有问题。我还尝试重复获取并检查指向文件名字符串的指针是否不为空的代码。当它在同一个回调调用中第二次运行时，它返回一个非空字符串指针。我也这样做是为了确保它与启动对话框的窗口（实际上是 gtk_widget_show()ED）本身就是一个对话框这一事实无关。

我尝试了我的理论，即我必须将对话框中的按钮设置为具有 gtk.RESPONSE_OK 或 gtk_RESPONSE_CANCEL 响应。那似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:50:36.403

请注意注释（这些是大约 56 到 72 行）：

```
if (widgets != NULL)
{
fprintf(stderr, "widgets is not null\n");
gchar * filename = gtk_file_chooser_get_filename(widgets->zssvpth_FileChooser);

if (filename != NULL)
{
     fprintf(stderr, "filename is not null\n");
 gtk_entry_set_text(widgets->zssvpth_Entry, g_filename_to_utf8(filename,  strlen(filename), NULL, NULL, NULL));

    /* ERROR code below will never be called since filename 
    must be NULL to get here */ 

    if (filename = NULL)
       {
   fprintf(stderr, "Filename is null");
   }
else
   {
   // g_free(filename);
   }
  /* END OF ERROR */

    }
else
{
    fprintf(stderr, "filename is NULL\n");
}
gtk_widget_hide(GTK_WIDGET(widgets->zssvpth_FileChooser));

g_free(filename); // this might be a better place for this call

 }
else
 {
  fprintf(stderr, "widgets is a null pointer!\n");
 } 
```

这可能有助于追踪错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:05:51.957

它应该是：

如果（文件名 == NULL）

不是：

如果（文件名 = NULL）

否则，您将其设置为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:31:04.030

似乎调用`gtk_file_chooser_get_filename()`将在第二次隐藏并显示小部件时返回​​ null，除非您调用`gtk_file_chooser_set_filename()`.

我在文档中没有看到任何关于此的内容，但大多数情况下，在显示之前设置文件名是有意义的，因为无论你**得到**什么文件名都可能已更改，因此更新是有意义的无论如何，文件选择器。

# javascript - 在 webapp 中识别用户的最佳方法

> ID：10963857
> 
> 赞同：0
> 
> 时间：2012-06-09T19:19:15.370
> 
> 标签：javascript, web-applications, user-identification

我想做一个网络应用程序，您可以在其中与其他用户交互，但我不希望用户使用登录名和密码（如[BrowserQuest](http://browserquest.mozilla.org/)）注册。

然后，我想使用一个随机数存储在本地存储中的变量。但我认为这不安全，因为如果有人分析我的代码，查看名称存储在哪个变量中，然后在 URL 中写入：

```
javascript:localStorage["variableWhereNameIsStored"]="nameOfSomeoneElse";void(0); 
```

他可以窃取他的帐户。

然后我想到了每个 iPhone/iPod/iPad 的唯一 ID。但是在 javascript 中，我们无法访问它：[Get iphone ID in web app](https://stackoverflow.com/questions/1968323/get-iphone-id-in-web-app)。也有IP，但是不靠谱。还有cookies，但在这里，用户也可以使用注入。

在我的 webapp 中识别用户的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:24:49.290

一种解决方案是给每个人一个只有他们知道的唯一会话 ID（可能是 cookie 形式）。这会将它们连接到后端的用户 ID。

另一种解决方案是将 cookie 中的用户 ID 设置为签名 cookie。这同样取决于您的后端，但您可以在此处查看 python 解决方案：[http](http://webpython.codepoint.net/mod_python_publisher_cookies_signed) ://webpython.codepoint.net/mod_python_publisher_cookies_signed 。

# objective-c - Obj-C：尽管从以前的功能更改了图像，但图像名称仍保留在按钮上

> ID：10963864
> 
> 赞同：0
> 
> 时间：2012-06-09T19:20:31.740
> 
> 标签：objective-c, image, uiimage

我希望你能帮助我弄清楚为什么一段特定的代码不能按我的意愿工作——与将图像加载到将填充网格的不同数组有关。

我的程序有一个由 16 个方格组成的网格（称为 button1、button2 等），每个方格都有一张图片，本质上是黑色图片、白色图片或绿色图片（黑白图片相同）除了每个单独的绿色图块（其中目前有 32 个是唯一的）之外的所有图块）。当用户通过屏幕上的“NEXT”或“PREVIOUS”按钮选择不同的级别时，其想法是根据先前保存到数组中的内容加载 16 个图标并使用适当的图标。

所以基本上如果图标标记为 1-16，下一个级别将是 17-32，等等。当我从级别 1 移动到级别 2 时，我想将当前屏幕上的图像保存到我调用 level1part1 的数组中，然后将数组 level1part2 的内容加载到相同的方格中。当我从 2 级回到 1 级时 - 我想将屏幕上的图像保存到 level1part2，然后将 level1part1 数组的内容加载回屏幕上的 16 个图块。

所以最初加载屏幕时，我在 viewDidLoad 方法中有以下声明：

```
UIImage *def = [UIImage imageNamed:@"silhouette.png"];
level1part1 = [[NSMutableArray alloc]initWithObjects:def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, nil];
level1part2 = [[NSMutableArray alloc]initWithObjects:def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, nil];
currentArray = [[NSMutableArray alloc]initWithObjects:def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, def, nil]; 
```

其中 def 是黑色图像。我将在稍后解释当前数组的用途。

我有两种方法，称为 pressPreviousLevel 和 pressNextLevel，解释如下：

```
- (IBAction)pressNextLevel:(UIButton *)sender {

NSMutableArray *nextLevelArray;

if (currentlevel == 1)
{
    nextLevelArray = level1part2.mutableCopy;
    [self.nextLevel setHidden:YES];
} 
```

我声明了一个名为 nextLevelArray 的 NSMutableArray，它将保存我想要投影到下一个屏幕上的图像的内容——在本例中为 level1part2，因为我将从 level1 转到 level2。

```
//// SAVING IMAGES ON SCREEN TO CURRENTARRAY
[currentArray replaceObjectAtIndex:0 withObject: button1.imageView.image];
[currentArray replaceObjectAtIndex:1 withObject: button2.imageView.image];
[currentArray replaceObjectAtIndex:2 withObject: button3.imageView.image];
[currentArray replaceObjectAtIndex:3 withObject: button4.imageView.image]; 
```

ETC

然后我用当前屏幕上的内容填充我之前声明的 currentArray 数组。

```
if (currentlevel == 1)
{
    level1part1 = currentArray.mutableCopy;
} 
```

然后我说，因为我在 1 级 - 我希望 level1part1 等于这个 currentArray；有效地将屏幕上的内容保存到这个 level1part1 数组。

现在我想将 level1part2 中的内容加载到屏幕上的 16 个图块上：

```
// REPLACE IMAGES WITH PREVIOUS LEVELS IMAGES FROM ARRAY 
button1.imageView.image = [nextLevelArray objectAtIndex:0];
button2.imageView.image = [nextLevelArray objectAtIndex:1];
button3.imageView.image = [nextLevelArray objectAtIndex:2];
button4.imageView.image = [nextLevelArray objectAtIndex:3]; 
```

ETC

```
currentlevel ++; 
```

并增加当前级别。

pressPreviousLevel 也会发生类似情况：

```
- (IBAction)pressPreviousLevel:(UIButton *)sender {

NSMutableArray *previousLevelArray;

if (currentlevel == 2)
{
    previousLevelArray = level1part1.mutableCopy;
    [self.previousLevel setHidden:YES];
    [self.nextLevel setHidden:NO];
}

/// SAVING IMAGES ON SCREEN TO CURRENTARRAY
[currentArray replaceObjectAtIndex:0 withObject: button1.imageView.image];
[currentArray replaceObjectAtIndex:1 withObject: button2.imageView.image];
[currentArray replaceObjectAtIndex:2 withObject: button3.imageView.image];
[currentArray replaceObjectAtIndex:3 withObject: button4.imageView.image]; 
```

等剩余的瓷砖。因此，如果我目前处于 2 级（不能处于 1 级，因为我不能从那里向后退），我声明一个名为 previousLevelArray 的 NSMutableArray，在这种情况下将保存 level1part1 的内容。然后我将我在屏幕上看到的所有 16 个图像保存到我的 currentArray 中。

```
if (currentlevel == 2)
{
    level1part2 = currentArray.mutableCopy;
} 
```

现在，我询问我当前处于哪个级别并保存 currentArray，它应该包含屏幕上的所有图标，以便正确的数组 - 在这种情况下，它应该是 level1part2。

```
// REPLACE IMAGES WITH PREVIOUS LEVELS IMAGES FROM ARRAY
button1.imageView.image = [previousLevelArray objectAtIndex:0];
button2.imageView.image = [previousLevelArray objectAtIndex:1];
button3.imageView.image = [previousLevelArray objectAtIndex:2];
button4.imageView.image = [previousLevelArray objectAtIndex:3]; 
```

ETC

```
currentlevel --; 
```

最后，我现在将来自 previousLevelArray（在本例中为 level1part1）中的图像加载回屏幕上。

所以，我的问题是这样的——假设我在 1 级的第一个图标是绿色的（我们称之为 GREEN1）——这是该级别的那个图块所独有的——当我按下下一步时，我的屏幕上会填充黑色图标，这是我想要的。但是，当我在下一个级别再次单击第一个图标时，它会变为 GREEN1 图标，这不是我想要的——它仍然被保留——这破坏了我的程序。如果我做相反的事情 - 从 2 级到 1 级 - 1 级上的第一个图标将变成 2 级上的第一个图标，也会发生同样的情况。

当您单击将更改图片的图标时，我的方法中没有任何内容，因此我确信问题出在此代码中。基本上它在屏幕上显示正确的图标，但是当我点击图标时 - 它仍然保留前一个屏幕中的一些信息 - 好像它还没有完成加载或其他什么。

所以我的问题是，任何人都可以发现代码中发生的可能导致这个问题的事情吗？我确信问题不在于代码的其他地方 - 这是对我上面打印的代码的简单修复，以使其正常工作。

提前感谢您的帮助 - 如果这里有任何“错误代码”，请告诉我 - 总是愿意学习 - 我只使用 Objective C 很短的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:48:29.260

您需要使用`-setImage:forState:`或`-setBackgroundImage:forState:`设置按钮的图像。

您可以为不同的控件状态设置不同的图像，例如 UIControlStateNormal、UIControlStateHighlighted 和 UIControlStateSelected。

# python - 如何限制多对多关系的选择？

> ID：10963865
> 
> 赞同：0
> 
> 时间：2012-06-09T19:20:33.070
> 
> 标签：python, django, manytomanyfield, limit-choices-to

我正在使用 Python + Django，现在我的模型中有这个：

```
class Team(models.Model):
    player = models.ManyToManyField(Player, related_name="player", through="Team_Player")
    squad = models.ManyToManyField(Player, related_name="squad", blank=True)

class Player(Person):
    name = models.CharField(max_length=100)

class Team_Player(models.Model):
    team = models.ForeignKey(Team)
    player = models.ForeignKey(Player) 
```

有没有办法限制 Team.squad 只有 Team.player 关系内的玩家？到目前为止，我试图使用 limit_choices_to 没有运气。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:24:16.887

在 Django ORM 中没有办法做到这一点。您将需要重构您的设计，使团队由小队组成，而小队由球员组成；向团队模型添加属性或方法以获取当前团队中的所有玩家。

# php - 将全局变量包含到 php 样式表中。

> ID：10963868
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:20:48.823
> 
> 标签：php, css

如何将全局变量包含到 style.php 文件中？基本上是一个 php 样式表。

这是主文件：

```
<?php 
function (){
$gbvariable = get_option();

?>

<input type="text" size="20" name="backgroundcolor" value="<?php $gbvariable; ?>"/>

<?php
}
?> 
```

这是 style.php 文件。

```
<?php header('Content-Type: text/css');?>

#div{

background: <?php $gbvariable; ?>;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:26:46.967

您必须以某种方式将变量传递给 style.php，因为在浏览器呈现页面之前不会加载它。因此，您的样式表 href 将是`"style.php?gbvariable=<?php echo $gbvariable; ?>"`，然后您可以`$_GET['gbvariable']`在 stylesheet.php 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-14T09:08:38.943

我做了：

```
echo "<link rel=\"stylesheet\" href=\"css/style.php?var1=$gbvariable\" type=\"text/css\" />"; 
```

并进入 style.php 文件只需添加

```
<?php $gbvariable=$_GET['var1']; ?>` 
```

它奏效了。[给 Chris P. 的道具](https://stackoverflow.com/questions/10963868/including-a-global-variable-into-a-php-stylesheet/24218374#comment14314363_10963868)，甚至都不会想到。

# php - 使用 PayPal 自动退还押金

> ID：10963869
> 
> 赞同：1
> 
> 时间：2012-06-09T19:20:53.020
> 
> 标签：php, paypal

客户希望他的网站收取押金，让某人购买，然后退还押金。我知道 PayPal 允许退款，但 AFAIK 这必须由帐户所有者手动批准。也就是说，PayPal 是否提供自动退还付款的方法？

例如，用户 A 输入他的信用卡信息，支付押金，进行购买，然后在那个确切时间退还他的原始押金。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:24:39.917

是的，使用 PayPal 提供的 Refund API：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APRefund](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APRefund)

# android - 适用于 Android onActivityResult 的 Adob e 原生扩展

> ID：10963871
> 
> 赞同：1
> 
> 时间：2012-06-09T19:21:16.090
> 
> 标签：android, apache-flex, actionscript, air

我创建了一个 Native Extension 以在 Android 上使用 zxing 应用程序（通过意图）。

该应用程序启动正常并扫描条形码。

我只是无法将结果返回到我的 Flex 项目中。似乎 onActivityResult 方法永远不会被本机扩展调用。

你们能帮忙吗？

下面是代码：

```
public class BarcodeScanFunction implements FREFunction {

public static BarcodeExtensionContext _context;

@Override
public FREObject call(FREContext context, FREObject[] passedArgs) {

    _context = (BarcodeExtensionContext)context;

    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    context.getActivity().startActivityForResult(intent, 0);

    return null;
}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult ir = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);

    _context.dispatchStatusEventAsync("DATA_CHANGED", ir.getContents());

}
 } 
```

Actionscript 处理程序：

```
public class NativeBarcode extends EventDispatcher
{
    private static var extContext:ExtensionContext = null;

    public function NativeBarcode(target:IEventDispatcher=null)
    {
        super(target);

        if ( !extContext )
        {
            extContext = ExtensionContext.createExtensionContext("za.co.flatrocksolutions.Barcode","barcode");
            extContext.call("initMe");
        }
    }

    public static function get isSupported():Boolean
    {
        var toReturn:Boolean = false;

        toReturn = extContext.call("isSupported") as Boolean;

        return toReturn;
    }

    public function scan():void
    {
        extContext.addEventListener(StatusEvent.STATUS, onStatus); 

        extContext.call("scanMe");
    } 

    public function onStatus(event:StatusEvent):void { 
        //dispatchEvent(event);

        var e : StatusEvent = new StatusEvent("DATA_CHANGED", true, false, event.code, event.level);
        dispatchEvent(e);

    }
} 
```

使用 ANE：

```
be = new NativeBarcode();
            be.addEventListener("DATA_CHANGED", onStatus);
            be.scan(); 
```

……

```
private function onStatus(e:StatusEvent):void 
            {      
                if (e.code == "DATA_CHANGED") 
                {
                    var stringData:String = e.level;
                    // ...
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:48:12.957

您不能使用 FREFunction 实例来监听 onActivityResult。您需要做的是启动一个新的 Activity 并在那里实现该功能：

所以首先你需要创建一个新的活动：

```
public class SomeActivity extends Activity 
{
    public static int UNIQUE_REQUEST_CODE   =  444444;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
        startActivityForResult( intent, UNIQUE_REQUEST_CODE );
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
         super.onActivityResult(requestCode, resultCode, data);
         if (requestCode == UNIQUE_REQUEST_CODE)
         {
             // do stuff
         }
         this.finish();
    }
} 
```

然后在您的 FREFunction.call 实现中，您需要启动此活动。

```
Intent startActivityIntent = new Intent(context.getActivity(), SomeActivity.class);
context.getActivity().startActivity( startActivityIntent ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:43:01.407

正如迈克尔所说，您需要创建自己的活动并覆盖 onCreate 和 onActivityResult 方法。出于某种原因，这仍然对我不起作用。经过几个小时的努力，我意识到活动需要在您的 Android 应用程序清单中。您可以通过打开 AIR 应用程序描述符 xml 文件并将以下内容插入 manifestAdditions 标记来执行此操作。

```
<application>
    <activity android:name="insert.ane.path.here.ZXingActivityYouCreated"></activity>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T03:20:24.777

现在您可以为 FREObject 实现 onActivityResult，请在此处查看[[Android] Getting onActivityResult and onStart/onPause/.... events from AIR activity [solution]](http://forums.adobe.com/message/6194756?tstart=0)。它展示了如何在 FREContext 上实现它，但我已经用它在 FREObject 上实现了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T01:54:57.413

它没有那么光滑，但我通过从自定义 url 启动条形码应用程序来完成此操作，而不是本机扩展。正确扫描条形码后，条形码应用程序会将其复制到剪贴板（默认情况下会这样做）。用户按两次返回到应用程序，然后我们可以从剪贴板读取文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T14:54:55.027

您应该考虑只捕获条形码图像并使用 actionscript 在您自己的应用程序中对其进行解码。我自己很容易在应用程序中使用 QR 码阅读器完成了这项工作，因此我可以确认 zxing 库在 flex/actionscript 中工作得很好。

这是我大约一年前为它制作的概念验证视频：[http ://www.youtube.com/watch?v=pHWTwxnPfHw](http://www.youtube.com/watch?v=pHWTwxnPfHw)

您只需触发相机捕获，然后使用 zxing 库对其进行解码。它已经被移植并在 actionscript 中可用。

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/) （在库下载中查找actionscript源）

如果您需要更多信息，我会尝试为您挖掘一些资源...... :)

# php - 在 bm_categories.php 中修改类别的构建方式

> ID：10963875
> 
> 赞同：0
> 
> 时间：2012-06-09T19:21:34.543
> 
> 标签：php, arrays, if-statement, oscommerce

我希望有人可以帮我修改类别链接的创建。我已经对其进行了修改，并且大部分都成功了，但是最后一点让我很生气。

bm_categories.php 的内容：

```
 <?php
    /*
      $Id$

      osCommerce, Open Source E-Commerce Solutions
      http://www.oscommerce.com

      Copyright (c) 2010 osCommerce

      Released under the GNU General Public License
    */

      class bm_categories {
        var $code = 'bm_categories';
        var $group = 'boxes';
        var $title;
        var $description;
        var $sort_order;
        var $enabled = false;

        function bm_categories() {
          $this->title = MODULE_BOXES_CATEGORIES_TITLE;
          $this->description = MODULE_BOXES_CATEGORIES_DESCRIPTION;

          if ( defined('MODULE_BOXES_CATEGORIES_STATUS') ) {
            $this->sort_order = MODULE_BOXES_CATEGORIES_SORT_ORDER;
            $this->enabled = (MODULE_BOXES_CATEGORIES_STATUS == 'True');

            $this->group = ((MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT == 'Left Column') ? 'boxes_column_left' : 'boxes_column_right');
          }
        }

function tep_show_category($counter) {
          global $tree, $categories_string, $cPath_array;

      $categories_string .= '<a href="';

          if ($tree[$counter]['parent'] == 0) {
            $cPath_new = 'cPath=' . $counter;
          } else {
            $cPath_new = 'cPath=' . $tree[$counter]['path'];
          }

          $categories_string .= tep_href_link(FILENAME_DEFAULT, $cPath_new) . '">';

      if ($tree[$counter]['parent'] == 0) {
        $categories_string .= '<h2>' . $tree[$counter]['name'] . '</h2></a>';
      } else {
        if (isset($last_id)) {
        $categories_string .= '<h3 class="subCategories">' . $tree[$counter]['name'] . '</h3></a>';
      } else {
        $categories_string .= $tree[$counter]['name'] . '</a>';
      }
      }

          if (SHOW_COUNTS == 'true') {
            $products_in_category = tep_count_products_in_category($counter);
            if ($products_in_category > 0) {
                  $categories_string .= '&nbsp;(' . $products_in_category . ')';
            }
          }

          if ($tree[$counter]['next_id'] != false) {
            $this->tep_show_category($tree[$counter]['next_id']);
          }
          }

        function getData() {
          global $categories_string, $tree, $languages_id, $cPath, $cPath_array;

          $categories_string = '';
          $tree = array();

          $categories_query = tep_db_query("select c.categories_id, cd.categories_name, c.parent_id from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd where c.parent_id = '0' and c.categories_id = cd.categories_id and cd.language_id='" . (int)$languages_id ."' order by sort_order, cd.categories_name");
          while ($categories = tep_db_fetch_array($categories_query))  {
            $tree[$categories['categories_id']] = array('name' => $categories['categories_name'],
                                                        'parent' => $categories['parent_id'],
                                                        'level' => 0,
                                                        'path' => $categories['categories_id'],
                                                        'next_id' => false);

            if (isset($parent_id)) {
              $tree[$parent_id]['next_id'] = $categories['categories_id'];
            }

            $parent_id = $categories['categories_id'];

            if (!isset($first_element)) {
              $first_element = $categories['categories_id'];
            }
          }

          if (tep_not_null($cPath)) {
            $new_path = '';
            reset($cPath_array);
            while (list($key, $value) = each($cPath_array)) {
              unset($parent_id);
              unset($first_id);
              $categories_query = tep_db_query("select c.categories_id, cd.categories_name, c.parent_id from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd where c.parent_id = '" . (int)$value . "' and c.categories_id = cd.categories_id and cd.language_id='" . (int)$languages_id ."' order by sort_order, cd.categories_name");
              if (tep_db_num_rows($categories_query)) {
                $new_path .= $value;
                while ($row = tep_db_fetch_array($categories_query)) {
                  $tree[$row['categories_id']] = array('name' => $row['categories_name'],
                                                       'parent' => $row['parent_id'],
                                                       'level' => $key+1,
                                                       'path' => $new_path . '_' . $row['categories_id'],
                                                       'next_id' => false);

                  if (isset($parent_id)) {
                    $tree[$parent_id]['next_id'] = $row['categories_id'];
                  }

                  $parent_id = $row['categories_id'];

                  if (!isset($first_id)) {
                    $first_id = $row['categories_id'];
                  }

                  $last_id = $row['categories_id'];
                }
                $tree[$last_id]['next_id'] = $tree[$value]['next_id'];
                $tree[$value]['next_id'] = $first_id;
                $new_path .= '_';
              } else {
                break;
              }
            }
          }

          $this->tep_show_category($first_element);

          $data = '<article class="ui-widget infoBoxContainer">' .
                  '  <h1 class="ui-widget-header infoBoxHeading">' . MODULE_BOXES_CATEGORIES_BOX_TITLE . '</h1>' .
                  '  <nav class="ui-widget-content infoBoxContents">' . $categories_string . '</nav>' . 
                  '</article>';

          return $data;
        }

        function execute() {
          global $SID, $oscTemplate;

          if ((USE_CACHE == 'true') && empty($SID)) {
            $output = tep_cache_categories_box();
          } else {
            $output = $this->getData();
          }

          $oscTemplate->addBlock($output, $this->group);
        }

        function isEnabled() {
          return $this->enabled;
        }

        function check() {
          return defined('MODULE_BOXES_CATEGORIES_STATUS');
        }

        function install() {
          tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Enable Categories Module', 'MODULE_BOXES_CATEGORIES_STATUS', 'True', 'Do you want to add the module to your shop?', '6', '1', 'tep_cfg_select_option(array(\'True\', \'False\'), ', now())");
          tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Content Placement', 'MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT', 'Left Column', 'Should the module be loaded in the left or right column?', '6', '1', 'tep_cfg_select_option(array(\'Left Column\', \'Right Column\'), ', now())");
          tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, date_added) values ('Sort Order', 'MODULE_BOXES_CATEGORIES_SORT_ORDER', '0', 'Sort order of display. Lowest is displayed first.', '6', '0', now())");
        }

        function remove() {
          tep_db_query("delete from " . TABLE_CONFIGURATION . " where configuration_key in ('" . implode("', '", $this->keys()) . "')");
        }

        function keys() {
          return array('MODULE_BOXES_CATEGORIES_STATUS', 'MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT', 'MODULE_BOXES_CATEGORIES_SORT_ORDER');
        }
      }
    ?> 
```

我只修改了从第 34 行开始的函数 tep_show_category。我没有收到任何错误。但是，它也没有按照我想要的方式运行，我似乎无法弄清楚如何。;)

我想要发生的是，如果类别是父猫，请分配标签。如果是儿童猫，请分配标签。除非当前选择了子类别，否则不要使用 h 标记。

为父母和孩子工作得很好。但是，我很难查看子目录是否是当前页面。

我只是不确定我应该在哪里查看是否选择了 subcat。似乎在链接创建中它使用 $first_id + $last_id 来构建 cPath 参数。即 indxp.phhp?cPath=1_4 中的 1_4。所以，我尝试过使用 isset 的方法来查看 $last_id 是否为空......但没有这样的运气。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:27:59.083

为了检查自己是否属于同一类别，无论是顶级父级还是子级父级，只需将全局cPath添加到函数的escope并与cPath_new进行比较即可。

cPath 来自 application_top，因此您可以将其作为全局访问。

```
if (cPath != cPath_new){ this_is_not_the_current_categorie(); } 
else { this_is_the_current_categorie(); } 
```

# git - 你如何在 GitHub 上创建自己的仓库？

> ID：10963878
> 
> 赞同：216
> 
> 时间：2012-06-09T19:22:12.677
> 
> 标签：git, github, version-control, git-fork

我在 GitHub 上有一个公共存储库。我想复制/复制它并基于此存储库处理一个新项目，但我不想影响它现在的状态。我尝试使用 GitHub UI 分叉它，但它没有做任何事情。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-06-10T06:27:11.500

我不认为你可以分叉你自己的回购。
克隆它并将其推送到一个新的仓库是好的，但你需要：

```
git clone https://github.com/userName/Repo New_Repo
cd New_Repo
git remote set-url origin https://github.com/userName/New_Repo
git remote add upstream https://github.com/userName/Repo
git push origin master
git push --all 
```

（见[`git push`](http://git-scm.com/docs/git-push)）

[请参阅“在 GitHub 上创建自己的项目](https://web.archive.org/web/20120917234510/http://bitdrift.com/post/4534738938/fork-your-own-project-on-github)”中描述的所有过程。

* * *

六年后（2016 年），您现在拥有[GitHub 导入](https://github.com/blog/2110-migrate-your-code-with-the-github-importer)器，它允许您从其他来源导入存储库……包括 GitHub。
请参阅“[使用 GitHub Importer 导入存储库](https://help.github.com/articles/importing-a-repository-with-github-importer/)”

[![https://help.github.com/assets/images/help/importer/import-repository.png](../Images/f97fe93653b13e07c489fecfc6ab5a6d.png)](https://i.stack.imgur.com/UOKnD.png)

[narf](https://stackoverflow.com/users/7910667/narf)的[回答](https://stackoverflow.com/a/43576472/6309)（赞成）也说明了这个过程。

这将允许您创建一个新存储库并将旧存储库的完整历史记录导入新存储库，使用其 GitHub url。

再说一遍：你得到的是一个副本，而不是一个真正的分叉：你不能从新的 repo 向旧的 repo 发出拉取请求。

再次（之二），如[评论中所述](https://stackoverflow.com/questions/10963878/how-do-you-fork-your-own-repository-on-github/10966784#comment97277718_10966784)，[`mpersico`](https://stackoverflow.com/users/1830614/mpersico)这*不是*真正的叉子。

> 如果我有一个 foo ，它是一个开源项目的规范源代码库，我希望其他人可以 fork 并有权进行 PR，那么我不想在那个 repo 中工作，我想要一个可以用来发布的 fork针对我的项目的适当 PR。
> 我已经解决了这个问题，我在 GitHub 中创建了第二个帐户并进行了分叉。

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2017-04-23T21:03:03.503

一个超级简单的方法可以在 30 秒内从 GitHub 网站完成：

1.  复制你的仓库的 URL。例如：（`https://github.com/YourName/YourOldRepo`提示：这是您在 github 上查看 repo 主页时的 URL。
2.  单击右上角的`+`图标。
    [![https://i.stack.imgur.com/9zJgo.png](../Images/53e8548b3fe2542e19f5664b0ae9f986.png)](https://i.stack.imgur.com/9zJgo.png)
3.  选择“导入存储库”。
4.  在它要求提供“旧 URL”的地方，粘贴您在第 1 步复制的 URL
    [![https://i.stack.imgur.com/vgWd3.png](../Images/f93c91add276e861b57717b87abdbd71.png)](https://i.stack.imgur.com/vgWd3.png)
5.  输入新仓库的名称并单击`Begin Import`。
6.  就是这样！您现在拥有完整 repo 的副本，其中包含所有提交历史记录和分支！

限制：它实际上不是真正的分叉。这是回购的副本。它不允许来回拉取请求。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-19T12:47:44.880

1.  git clone [https://github.com/YOURREPO.git](https://github.com/YOURREPO.git) TargetRepoName
2.  cd TargetRepoName/
3.  git 远程 set-url 来源[https://github.com/TargetRepoName.git](https://github.com/TargetRepoName.git)
4.  git push -u 起源大师

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-30T17:41:10.663

达到预期效果的最简单方法是创建一个新的存储库，然后选择导入选项并提供您希望分叉的存储库的 URL。

下面的图片将有所帮助：

[通过 import-1 分叉自己的仓库](https://i.stack.imgur.com/e6adQ.png)

[通过 import-2 分叉自己的 repo](https://i.stack.imgur.com/2kjPI.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-12-19T05:48:08.907

您现在可以将基础存储库标记为模板（在设置中，将其标记为*模板存储库*）并在存储库的主页上，单击*使用此模板*创建您的第二个存储库

Github 帮助：[创建模板](https://help.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-template-repository) [仓库 从模板创建仓库](https://help.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-from-a-template)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-09T19:37:13.117

只需克隆它，创建新的空白仓库，然后推送到它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-13T19:04:52.447

虽然不可能将您自己的 repo 分叉到同一个帐户中，但可以将其放入一个自己拥有的组织帐户中，该帐户可以通过“+”按钮轻松免费创建。

此选项的主要优点是新的 repo 是原始 repo 的真正分支，而不仅仅是克隆。例如，这意味着您可以将原始存储库中的更改更新到新存储库中（克隆存储库不是这种情况）。

我看到的唯一缺点是分叉的 repo 不会出现在用户配置文件下，而是出现在组织配置文件下。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-10T08:53:25.947

我按照“复制存储库”的这些官方说明进行操作，它似乎有效。

[https://help.github.com/articles/duplicating-a-repository/](https://help.github.com/articles/duplicating-a-repository/)

> 要在不分叉的情况下创建存储库的副本，您需要对原始存储库运行特殊的克隆命令并将镜像推送到新存储库。这适用于任何 git 存储库，而不仅仅是托管在 GitHub 上的那些。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-24T21:48:58.093

不幸的是，接受的 VonC 解决方案对我不起作用

> 远程：未找到存储库

起作用的是以下内容：

1.  在 github 创建一个 new_repo
2.  git clone new_repo
3.  cd new_repo
4.  git 远程添加上游 old_repo.git
5.  git pull 上游大师
6.  git push 起源大师

我从[这里](http://kroltech.com/2014/01/01/quick-tip-how-to-fork-your-own-repo-in-github/)得到了以上所有内容。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-12-28T03:48:15.517

对于使用 GitHub 的非技术人员，这是一个简单的解决方案，可以替代上述其他出色答案。您需要的只是一个 GitHub 桌面应用程序。

1.  从浏览器打开您自己的项目存储库，然后以 zip 格式下载，例如`your-project-master.zip`.
2.  解压缩并将其重命名为您的新仓库。
3.  打开 GitHub Desktop，并通过将新存储库浏览到解压缩的本地路径新存储库来添加新存储库。 [![在此处输入图像描述](../Images/a82189b5f95d41f741d1f04c00eac11e.png)](https://i.stack.imgur.com/guSsa.png)
4.  通过单击发布按钮将其发布到您的 github。不要忘记添加名称和描述:)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-02-09T17:15:50.617

刚试过这个，它奏效了：

1.  将您的 repo 分叉到组织帐户中
2.  重命名它
3.  将所有权转回给自己

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-04-07T12:41:19.457

当你创建一个新的 repo 时，你可以使用 repo .git url 从另一个 repo 导入。我花了 30 秒。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-05-28T14:58:23.883

1.  在 github webfrontend 上创建一个新的空仓库
2.  在旧仓库的克隆中，替换遥控器并推送：

```
git remote remove origin
git remote add origin git@github.com:account/new.git
git branch -M main
git push -u origin main 
```

这结合了@mcepl 的答案和@wadesworld 的评论，与在 github 上创建新存储库时显示的官方解决方案非常相似（在标题下“ *…或从命令行推送现有存储库*”）

# c# - 如何平移图像？（无法正确设置投影矩阵）

> ID：10963882
> 
> 赞同：1
> 
> 时间：2012-06-09T19:22:29.957
> 
> 标签：c#, math, opengl

我正在制作一个小的 WinForms 应用程序，您可以在其中打开照片、平移和放大。

![](../Images/b2fb7f37d9c4c8d57f9a67ac5cbb4fb7.png)

在弄清楚平移它的逻辑时遇到了一些麻烦。当我中间单击并拖动时，它应该平移图像，但它正在调整大小（拉伸）并移动它。

我想我可以简单地通过调整投影矩阵来进行平移`glOrtho`。这是代码，也许有人可以指出我正确的方向：

```
private void glControl1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Middle)
    {
        _mousePos = e.Location;
    }
}

private void glControl1_MouseMove(object sender, MouseEventArgs e)
{
    if(MouseButtons.HasFlag(MouseButtons.Middle))
    {
        int dx = e.X - _mousePos.X;
        int dy = e.Y - _mousePos.Y;
        _viewRect.X += dx;
        _viewRect.Y += dy;
        UpdateView();
        _mousePos = e.Location;
    }
}

void UpdateView()
{
    GL.MatrixMode(MatrixMode.Projection);
    GL.LoadIdentity();
    GL.Ortho(_viewRect.X, _viewRect.Width, _viewRect.Height, _viewRect.Y, -1, 1);
    glControl1.Invalidate();
    this.Text = string.Format("{0},{1} {2}x{3}", _viewRect.X, _viewRect.Y, _viewRect.Width, _viewRect.Height);
} 
```

视口最初设置为 gl 控件的完整大小：

```
int w = glControl1.Width;
int h = glControl1.Height;

GL.Viewport(0, 0, w, h); 
```

图像渲染如下：

```
GL.Begin(BeginMode.Quads);
{
    GL.TexCoord2(0, 0); GL.Vertex2(0, 0);
    GL.TexCoord2(0, 1); GL.Vertex2(0, _texture.Height);
    GL.TexCoord2(1, 1); GL.Vertex2(_texture.Width, _texture.Height);
    GL.TexCoord2(1, 0); GL.Vertex2(_texture.Width, 0);
} 
```

在屏幕截图中，标题栏显示 x 和 y 坐标 -146,-140。由于我在 0,0 处绘制图像，因此我希望 gl 控件的左上角像素在图像坐标中为 146,140。显然我的概念模型是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:51:09.497

弄清楚了。`glOrtho`使用`right`和`bottom`不`width`和`height`。

更新了我的功能：

```
private void glControl1_MouseMove(object sender, MouseEventArgs e)
{
    if(MouseButtons.HasFlag(MouseButtons.Middle))
    {
        int dx = e.X - _mousePos.X;
        int dy = e.Y - _mousePos.Y;
        _viewRect.X -= dx * (_viewRect.Width / glControl1.Width);
        _viewRect.Y -= dy * (_viewRect.Height / glControl1.Height);
        _mousePos = e.Location;
        UpdateView();
    }
} 
```

**编辑：**更新以修复屏幕到视图坐标问题。

# java - 确保非final字段的“单例”唯一性，在哪里锁定？

> ID：10963886
> 
> 赞同：1
> 
> 时间：2012-06-09T19:23:14.030
> 
> 标签：java, multithreading, locking, singleton, synchronized

我希望 JdbcPersistenceManager 始终只有一个 jdbcConnection 并通过以下方式对其进行实例化： JdbcConnectionManager.getJdbcConnection()

这是取自 (2004-11-01 | Head First Design Patterns | O'Reilly Media | 688p | by Elisabeth Freeman | ISBN-0596007124) 的简单模式，可能被误用、误解和不合适。

synchronized() 应该锁定“this”还是专门用于跟踪锁定的特定新（静态？）字段？我该怎么做？

```
public class JdbcPersistenceManager implements PersistenceManager {
  private volatile Connection jdbcConnection;
  /* ... */
  private Connection getJdbcConnection() throws JdbcConnectionFailureException {
    if (jdbcConnection == null) {
      synchronized (this) {
        if (jdbcConnection == null) {
          jdbcConnection =
              JdbcConnectionManager.getJdbcConnection(jdbcConnectionParameters);
        }
      }
    }
    // label:here
    return jdbcConnection;
  }
} 
```

假设 jdbcConnection 的实例化，即使我们想要标记为“label：here”的点，只是为了论证，如何最好地检查连接是否仍然有效，如果不是则重新创建它？

ConnectionPooling 不是我想在这里做的。只有一个连接......如果它是“null”或“invalid”，则重新生成/重新打开它。

编辑：

我想要 getJdbcConnection 做的是：

1) 提供 jdbcConnections，确保在任何给定时间只存在其中一个（不应允许客户端保留对 2 个不同连接的引用）

和

2) 重新生成（即重新调用 JdbcConnectionManager.getJdbcConnection()）“private volatile Connection jdbcConnection”字段，如果由于某种原因它被关闭了

（例如，客户端 1 出现，获得连接但*关闭*它，客户端 2 出现，连接*不为空*但无法使用，因此她获得了重新生成的连接）。

注意：我意识到没有什么可以阻止客户端 1 获得连接，而客户端 2 获得相同的连接，按照设计，并且在客户端 1 通过他的参考关闭它后仅一毫秒使用它......我不知道这是否可以解决有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:34:15.443

是的， synchronized() 锁只是用于跟踪锁，因此当看到**jdbcConnection=NULL时，没有两个线程一个接一个地实例化****jdbcConnection**。

 **如果要检查该`// label:here`位置的连接完整性。您可以递归调用 getJdbcConnection() 方法。

```
return jdbcConnection!=NULL?jdbcConnection:jdbcConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:57:14.490

双重检查锁定应该在类上完成而不是`this`：

```
if (jdbcConnection == null) {
  synchronized (JdbcPersistenceManager.class) {
    if (jdbcConnection == null) {
      jdbcConnection =
          JdbcConnectionManager.getJdbcConnection(jdbcConnectionParameters);
    }
  }
} 
```

根据连接检查，您可以按照您的建议在创建后进行。我不会递归调用该方法，只是`null`实例`Connection`并尝试`getJdbcConnection()`再次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T20:37:57.773

如果要实现单例模式，那么您要确保给定类的单个实例，这就是为什么单例模式通常使用静态实例来实现的原因。

避免任何同步问题的最好方法是内联或在静态初始化器中初始化单例，因为初始化发生在第一次访问类时，并且保证此初始化不会受到并发性的影响，也就是说，类不能在完全初始化之前一直使用：

```
public class Singleton {
    private static final Singlenton instance = new Singleton();

    //private constructor here

    public static Singleton getIntance() { return instance; } 
} 
```

现在，如果您想懒惰地初始化您的单例，那么您将不得不考虑多个线程可能同时尝试获取它的实例的可能性，在这种情况下，您将同步对您的类的访问：

```
public class Singleton {
    private static Singlenton instance;

    //private constructor here

    public static synchronized Singleton getIntance() { 
       if(instance == null) {
            intance = new Singleton();
       }
       return instance; 
    } 
} 
```

有些人会建议减少同步代码的范围，这样也可以减少给定线程持有锁的时间。在这种情况下，您可以执行以下操作：

```
public class Singleton {
    private static Singlenton instance;

    //private constructor here

    public static Singleton getIntance() { 
       synchronized(Singleton.class) {
          if(instance == null) {
               instance = new Singleton();
          }
       }
       return instance; 
    } 
} 
```

在最后一个示例中，一旦安全地分配了单例实例，您就可以同时返回它。

另一种延迟初始化 Singleton 的模式是使用静态内部类：

```
public class Singleton {

  //private constructor

   private static class SingletonHolder { 
       public static final Singleton instance = new Singleton();
  }

   public static Singleton getInstance() {
       return SingletonHolder.instance;
   }
} 
```

这意味着在第一次访问内部类之前不会创建单例，在调用 getIntance 方法之前不会发生这种情况。再一次，由于类初始化以线程安全的方式发生，您可以确保单例的创建不会受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T21:46:31.217

除了@edalorzo 的综合列表之外，还有一种技术，`singleton`使用`enum`. [这里](https://stackoverflow.com/a/8027815/823393)有一个很好的例子，它可能看起来有点像这样。

```
public enum SingletonConnection {
  INSTANCE;
  // Not sure if this needs to be volatile.
  private volatile Connection jdbcConnection;

  private SingletonConnection() {
    jdbcConnection = JdbcConnectionManager.getJdbcConnection(jdbcConnectionParameters);
  }

  public Connection getConnection() {
    return jdbcConnection;
  }
}

// use it as ...
SingletonConnection.INSTANCE.getConnection (); 
```

但是，您可能对使用`ThreadLocal`连接的想法感兴趣。**

# command-line - 如何将历史记录重定向到文件？

> ID：10963887
> 
> 赞同：2
> 
> 时间：2012-06-09T19:23:23.313
> 
> 标签：command-line

是否可以将命令的输出放入文件中？我试着做一个

`echo history > history.txt`

但它将文本*历史记录*改为该文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T19:25:34.500

Just do `history > history.txt` without the echo. That should do it. When you do echo history, you are telling unix to print history to screen rather then execute it, which is why `echo history > history.txt` only contains the word history.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T19:31:03.410

除非您想从当前会话中获得*不成文*的历史记录，否则给出的示例可能是不必要的。您的 ~/.bash_history 或类似文件已经保存了您过去会话的历史记录。

您可以使用 附加当前会话的历史记录`history -w`。然后您的 ~/.bash_history 文件将是最新的，包括当前会话中的项目。

# c# - C# 对路径“C:\Documents and Settings\”的访问被拒绝

> ID：10963888
> 
> 赞同：6
> 
> 时间：2012-06-09T19:23:50.693
> 
> 标签：c#, directoryinfo

我正在使用一个简单`DirectoryInfo`的方法来抓取 C 驱动器根目录上的所有目录。但是，我在管理员下运行并且我收到路径访问被拒绝的错误，下面是我正在运行的代码。如何解决路径访问问题？

```
DirectoryInfo Dinfo = new DirectoryInfo(@"C:\");
DirectoryInfo[] directories = Dinfo.GetDirectories("*.*", SearchOption.AllDirectories); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:27:09.457

On newer versions of Windows `C:\Document and Settings` is a *junction point*, kind of a file system shortcut. It is not a normal directory, which means that it doesn't really work as a normal directory.

If you type in `C:\Document and Settings` in the start->run box you will also get an access denied error, so it is nothing specific to your program.

I'm a bit confused by how this works however. I thought that the junction point would be a transparent link to the new location which is `c:\users` but obviously not.

### Edit

After looking at the duplicate question I'm less confused. The junction point really links to the new location which is `c:\users`. However, there is an explicit deny acl for reading on the junction point to prevent anyone from using it to read things:

> C:>cacls "Documents and Settings" C:\Documents and Settings Everyone:(DENY)(special access:)
> 
> ```
>  FILE_READ_DATA
> 
>                       Everyone:R
>                       NT AUTHORITY\SYSTEM:F
>                       BUILTIN\Administrators:F 
> ```
> 
> C:>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:29:02.487

如果您以管理员身份运行，您可能仍会遇到

*   UAC 处于活动状态。使用“运行方式...”修复
*   只有当您明确获得所有权时才能访问的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T19:31:30.003

C:\Document and Settings 是一个连接点，此外您无法访问系统卷信息目录。它位于 C:\ 根目录下，您必须捕获任何安全异常并跳过它以运行您的代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-24T06:55:21.550

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security;
using System.Text;
using System.Threading.Tasks;

namespace Solution
{
    public class Program
    {
 static void Main(string[] args)
        {
            DirSearch(@"YOUR PATH");
            Console.ReadKey();
        }

        static void DirSearch(string dir)
        {
            try
            {
                foreach (string f in Directory.GetFiles(dir))
                    Console.WriteLine(f);
                foreach (string d in Directory.GetDirectories(dir))
                {
                    Console.WriteLine(d);
                    DirSearch(d);
                }

            }
            catch (System.Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

# java - Java FlowLayout - Margin/padding of specific elements?

> ID：10963896
> 
> 赞同：5
> 
> 时间：2012-06-09T19:24:50.820
> 
> 标签：java, swing, padding, layout-manager, gaps-in-visuals

I am very new to Swing, and I'm trying to make a GUI. Using Netbeans' GUI creator thing, I managed to make something I liked. But it makes me feel bad that I used the editor for this, so now I am trying to make the same design using code. Here is a picture of what I am trying to make: ![what I want to make](../Images/6aa6ba52a5b5db4f4a726634c8085fc5.png) Right now I am just focusing on creating the "Criteria" section (yes I know I spelled it wrong in the picture) Here is what I currently have so far: ![what I currently have](../Images/d0cacf105ab73c166c8902ded0a02e6b.png) I've highlighted in red where I want to increase the margin:

*   Between the right of the text boxes and left of the labels
*   Between the top of the Criteria panel and the JFrame
*   Between the left and right sides of the panel and the JFrame

I come from web development where increasing the margins is what I want to do. If this is incorrect terminology, please inform me. Here is the code I am currently using:

```
public class Criteria extends JPanel {
    JLabel JobLabel = new JLabel();
    JLabel BoxLabel = new JLabel();
    JLabel PartLabel = new JLabel();
    JTextField JobInput = new JTextField();
    JTextField BoxInput = new JTextField();
    JTextField PartInput = new JTextField();

    public Criteria() {
        setLayout(new FlowLayout(FlowLayout.LEADING));
        setBorder(BorderFactory.createTitledBorder("Criteria"));
        JobLabel.setText("Job");
        JobLabel.setLabelFor(JobInput);
        BoxLabel.setText("Box");
        BoxLabel.setLabelFor(BoxInput);
        PartLabel.setText("Part");
        PartLabel.setLabelFor(PartInput);
        JobInput.setColumns(8);
        BoxInput.setColumns(8);
        PartInput.setColumns(8);
        add(JobLabel);
        add(JobInput);
        add(BoxLabel);
        add(BoxInput);
        add(PartLabel);
        add(PartInput);
    }
} 
```

I don't know how I would add margin to these components, so help would be very much appreciated. If I cannot achieve this effect with FlowLayout, then please tell me what I should use instead.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-09T19:35:30.990

Swing 倾向于将边距或边框称为“间隙”。该类`FlowLayout`（以及其他一些布局类）允许您[在其构造函数](http://docs.oracle.com/javase/6/docs/api/java/awt/FlowLayout.html#FlowLayout%28int,%20int,%20int%29)中设置水平和垂直间隙，如下所示：

```
private static final int PADDING = 3;   // for example
...
    setLayout(new FlowLayout(FlowLayout.LEADING, PADDING, PADDING)); 
```

但是，这会在标签及其文本框之间添加填充，但是您可以将每一对包装在 a 中`JPanel`（可能使用 a `FlowLayout`）。我会为此制作一个自定义组件类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-09T20:02:10.953

您应该考虑使用 EmptyBorder 为您的组件提供“填充”。如果在 JPanel 或其他组件周围需要不止一种类型的边框，您可以创建复合边框或嵌套 JPanel。对于组件之间的间隙，您可以使用上面提到的 FlowLayout 设置，或者可以使用 Box 类中的支柱。

# c++ - C++ templates which infer class members

> ID：10963897
> 
> 赞同：3
> 
> 时间：2012-06-09T19:25:11.250
> 
> 标签：c++, class, templates, declaration, member

I know that I can use templates to assume that certain classes used by the template have certain member variables; however, I was wondering if there was a way to explicitly declare that the template class has to have a certain member variable or function?

I am talking about something like this example:

```
template <typename T>
class Assume
{
    int value;
    Assume(T* object) : value(T->AssumedMember) {};
};

class A
{
    int AssumedMember;
    A(int val) : AssumedMember(val) {};
};

int main()
{
    A* a = new A(5);
    Assume<A> assumer(a);
    return 0;
} 
```

I know that, at least with the compiler used in MSVC++, something similar to this example should compile without a problem;

I was merely wondering if there was a way to declare that, for the template or class's use, that T, from typename T, has a member variable AssumedMember. As of now, the only way to really understand that Assume will only work if used with a class that has the right required members (variables, functions, or operators), one would either have to compile and look at the given compiler error, or read through the entire template yourself to determine if anything extra is being used that has not been defined yet.

(also, on an unrelated note, does anyone know of a way to declare a whole block of declarations as being a template? As if using something like: `template <typename T> { /*class... member definitions, etc..*/ }` to declare a whole block of definitions to use the same template?)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:43:45.733

标准委员会一直在研究这个特性，称为“概念”。但是，它并没有进入 C++11。

但是，有两个编译器可以使用它（具有各种功能）。看看[ConceptGCC](http://www.generic-programming.org/software/ConceptGCC/)或[ConceptClang](http://www.generic-programming.org/software/ConceptClang/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:40:16.347

不，除了在模板的定义中，没有办法声明模板要求。例如，您可以使用 static_asserts 将这些要求放在定义的最前面，并提供更好的错误消息。

要一次声明多个模板函数，您可以使用带有静态成员函数的模板类：

```
template<typename T>
struct Foo {
    static int bar(T t);
    static T baz();
};

Foo<int>::bar(1);
auto s = Foo<std::string>::baz(); 
```

但是对于任何类型的模板声明都没有通用的方法，而且我认为这不会为您节省太多任何东西。

* * *

### 与 static_asserts 一起使用的自定义类型特征示例

我使用了一些 C++11 的东西，但它也可以在 C++98 中完成

```
#include <type_traits>

// the custom type traits
template<typename T> struct exists : std::true_type {};

template<typename T>
struct has_value_type {
    template<typename U>
    static typename std::enable_if<exists<typename U::value_type>::value,char>::type
    Test(int);

    template<typename U> static int Test(...);
    static constexpr bool value = sizeof(Test<T>(0)) == sizeof(char);
};

template<typename T>
struct has_member_i {
    template<typename U>
    static typename std::enable_if<0!=sizeof(&U::i),char>::type Test(int);
    template<typename U> static int Test(...);
    static constexpr bool value = sizeof(Test<T>(0)) == sizeof(char);
};

// your template for which you want to declare requirements
template<typename T>
void test(T t) {
    static_assert(has_value_type<T>::value, "value_type must be a member type alias of T");
    static_assert(has_member_i<T>::value, "i must be a member variable of T");
}

// one type that meets the requirements and one that doesn't
struct Foo {
    typedef int value_type;
    int i;
};

struct Bar {};

int main() {
    test(Foo());
    test(Bar());
} 
```

# c# - Should I implement non-generic GetHashCode and Equals if my class implements IEqualityComparer ?

> ID：10963898
> 
> 赞同：2
> 
> 时间：2012-06-09T19:25:13.827
> 
> 标签：c#, .net, clr

Should I implement non-generic `GetHashCode` and `Equals` if my class implements `IEqualityComparer<T>`?

**Update:** My hope was that MS updated implementation of their collection when they introduced `IEqualityComparer<T>`. So I thought that `Dictionary` and any other collection classes will check internally if my class implements `IEqualityComparer<T>` and use not generic methods `GetHashCode` and `Equals` only if that interface is not implemented. Without collections support that interface has very little value.

**Update2:** I just checked `Dictionary.FindEntry(TKey key)` using ILSpy. It uses `IEqualityComparer<TKey>` (varriable `comparer` below). In fact I did not find any using of not generic `GetHashCode` and `Equals` functions at all.

```
int num = this.comparer.GetHashCode(key) & 2147483647;
for (int i = this.buckets[num % this.buckets.Length]; i >= 0; i = this.entries[i].next)
{
    if (this.entries[i].hashCode == num
                && this.comparer.Equals(this.entries[i].key, key))
    {
        return i;
    }
} 
```

So it seems to that my class only needs to implement `IEqualityComparer<T>` to be properly used with `Dictionary`.

I understand that there will be no harm to implement not generic functions just in case.

But should we spend time if it brings no value?

I will make my question more specific:

Should I implement non-generic `GetHashCode` and `Equals` if my class implements `IEqualityComparer<T>` and:

1.  I do not use not generic collections in my code
2.  Third party code does not call `GetHashCode` and `Equals` methods of my code.

Does Microsoft code still needs non generic versions to work properly?

**Update3**: I think I got it. I thought that `IEqualityComparer<T>` is to be implemented inside my class. In that case we would have generic and not generic versions of methods in one place. That is not how `IEqualityComparer<T>` should be used. It should be implemented as separate class and used as parameter.

Thanks to everybody.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:30:58.050

这取决于。 `IEqualityComparer<T>`用于比较一个类型的两个实例`T`- 通常由单独的比较器类实现。通常你不会在类 type 中实现它`T`。它旨在为支持他的类型提供*替代比较。*

如果您在类本身中实现这一点，您通常会实现[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx).

话虽如此，覆盖通常很有用`Object.Equals`，这通常非常简单，因为您可以使用该`IEquatable<T>.Equals`方法来实现`Object.Equals`. 这使其实施起来“便宜”。正如`Object.Equals`可以使用的那样，它将为相等提供一致的含义，因此通常实现它是一个好主意。

如果您的对象将用作散列中的键，例如 a`Dictionary<T,U>`或 a `HashSet<T>`，那么您应该覆盖`GetHashCode`。如果甚至有可能以这种方式使用它，那么覆盖此方法是有益的。通常，我发现在`GetHashCode`我实现相等的任何时候重写都是有用的，以防我稍后将类型用作键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T19:33:15.817

IEqualityComparer 旨在替换每个 .NET 对象已经拥有的 GetHashCode 和 Equals 的默认实现。此接口仅由字典和 (Hash)Sets 使用，以使用与对象默认使用的不同的散列和比较方案。

如果您的对象在字典和哈希表中用作键，您应该首先覆盖 Equals 和 GetHashCode 以让 Sets/Dictionaries 为您的对象使用默认比较器（您称为 EqualityComparere.Default 的比较器），该比较器确实调用您的对象的 Equals 和 GetHashCode反正。

通过 IEqualityComparer 提供外部比较器的唯一原因是使用不同的比较方案。例如，对于字符串，您可以在区分大小写和不区分大小写的变体之间从 BCL [StringComparer类中进行选择。](http://msdn.microsoft.com/en-us/library/system.stringcomparer%28v=vs.80%29.aspx)

**更新1**

这个问题的目的是为什么 List 和其他集合总是使用默认比较器而不是对象提供的比较器。如果一个对象已经实现了 Equals 和 GetHashCode，如果对象同时实现了 IEqualityComparer，为什么 List 不使用它们？由于 List 不提供允许使用不同比较器的 ctor，因此它确实需要使用默认比较器。

但是如果你想使用不同的方法，你总是可以使用 LINQ，它允许你明确地传递你自己的比较器来解决这个问题。例如[Enumerable.Contains](http://msdn.microsoft.com/en-us/library/bb339118.aspx)有一个重载，您可以在其中传入您自己的比较器。

来自 MSDN 示例：

```
Product[] fruits = { new Product { Name = "apple", Code = 9 }, 
                       new Product { Name = "orange", Code = 4 }, 
                       new Product { Name = "lemon", Code = 12 } };

Product apple = new Product { Name = "apple", Code = 9 };
Product kiwi = new Product {Name = "kiwi", Code = 8 };

ProductComparer prodc = new ProductComparer();

bool hasApple = fruits.Contains(apple, prodc);
bool hasKiwi = fruits.Contains(kiwi, prodc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T19:33:28.910

如果我对您的理解正确，并且您问是否还必须实现`IEqualityComparer`如果您实施`IEqualityComparer<T>`，那么答案是您不必这样做，但这可能是一个好主意。它只会使您的比较器与现有代码更兼容。

# ruby-on-rails - 使用嵌套属性时的质量分配警告

> ID：10963901
> 
> 赞同：0
> 
> 时间：2012-06-09T19:25:43.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我对编程和 ruby​​ on rails 都很陌生。我关注了[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)，然后我开始观看来自[http://railscasts.com](http://railscasts.com)的剧集。我想做的是“以一种形式处理多个模型”。下面您将看到我的模型及其关联，以及我试图从用户那里获取信息的表单视图。

我的建模是这样的；

有雇主，雇主有面试，面试有问题。

自定义问题模型：

```
class Customquestion < ActiveRecord::Base
  attr_accessible :content
  belongs_to :interview

  validates :content, length: {maximum: 300}
  validates :interview_id, presence: true
end 
```

面试模式：

```
class Interview < ActiveRecord::Base
  attr_accessible :title, :welcome_message
  belongs_to :employer
  has_many :customquestions, dependent: :destroy
  accepts_nested_attributes_for :customquestions

  validates :title, presence: true, length: { maximum: 150 }
  validates :welcome_message, presence: true, length: { maximum: 600 }
  validates :employer_id, presence: true
  default_scope order: 'interviews.created_at DESC'
end 
```

创建新采访的表格；

```
<%= provide(:title, 'Create a new interview') %>
<h1>Create New Interview</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@interview) do |f| %>
    <%= render 'shared/error_messages_interviews' %>

      <%= f.label :title, "Tıtle for Interview" %>
      <%= f.text_field :title %>

      <%= f.label :welcome_message, "Welcome Message for Candidates" %>
      <%= f.text_area :welcome_message, rows: 3 %>

      <%= f.fields_for :customquestions do |builder| %>
        <%= builder.label :content, "Question" %><br />
        <%= builder.text_area :content, :rows => 3 %>
      <% end %>
      <%= f.submit "Create Interview", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

当我用所需信息填写表格并提交时，我收到以下错误；

```
Can't mass-assign protected attributes: customquestions_attributes

Application Trace | Framework Trace | Full Trace
app/controllers/interviews_controller.rb:5:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"cJuBNzehDbb5A1Zb14BjBfz1eOsjBCDzGhYKT7q6A0k=",
 "interview"=>{"title"=>"",
 "welcome_message"=>"",
 "customquestions_attributes"=>{"0"=>{"content"=>""}}},
 "commit"=>"Create Interview"} 
```

我希望我已经为你们提供了足够的信息来了解该案例的问题所在。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T20:01:59.817

只需按照错误消息中的内容进行操作：尝试添加`attr_accessible :customquestions_attributes`到`Interview`模型中：

```
class Interview < ActiveRecord::Base
   attr_accessible :title, :welcome_message, :customquestions_attributes
... 
```

# wcf - Multiple service calls or large datacontract? Chatty vs. Chunky

> ID：10963903
> 
> 赞同：4
> 
> 时间：2012-06-09T19:26:12.580
> 
> 标签：wcf

In a scenario where you have to perform multiple operations at the service end, on a form submission, e.g. inserting data into multiple tables, is it better to make a single service call having a large datacontract or multiple service calls with multiple small datacontracts?

To elaborate my question further, with an example, let's say we have a form for adding a "conference". That form allows users to fill information about the conference e.g. ConferenceName, ConferenceDate, ...., Presenters, Sponsors, etc. Since some of the information would be inserted in the conference table, some in the ConferencePresenters table and some in the ConferenceSponsors table. So would it be better to send all the data to the webservice using a single call with a large datacontract or to have separate service calls with multiple datacontracts?

Which of the two is more expensive - having a large datacontract or multiple service calls?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:43:12.257

很难*更好*地量化。但是你可以考虑带宽、原子性、服务组织等。

对于带宽，一个大块的请求在网络上会更快，因为每个请求都会增加时间。另外，客户端不会在他们的孩子之前等待 n*latency 来创建各种实体（因为没有更好的词）。

我假设您有一个支持您的服务的数据库，它可以让您在事务中执行此操作。如果您选择使用聊天服务，您将自行管理回滚等。

另一个需要考虑的重要事项是您的服务 API 是如何设计的。矮胖的操作有意义吗？如果您发现您的块随着可选操作而增长，您可以将它们排除在外。如果您发现 2 个 api 总是被一起调用并且组合起来有意义，请将它们组合起来。

因此，您可能会发现，对于上述操作（与赞助商创建会议等），拥有大型数据合约的性能更高，但您必须确保性能提升值得拥有这样的折衷大的，特定的 api 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:50:11.733

你也可以从架构的角度来看待这个问题。

您有一项服务：

*   服务应该代表具有业务意义的事物。
*   服务不应该泄露服务内部实现的信息，包括数据库的表结构

从这个角度来看，你应该有一个单一的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T08:58:23.943

每次都厚实，或者尽可能厚实。经验法则使对话尽可能大，它减少了谷壳。

# doctrine-orm - Doctrine column type interval

> ID：10963904
> 
> 赞同：0
> 
> 时间：2012-06-09T19:26:23.597
> 
> 标签：doctrine-orm

Is it possible to set a column type as INTERVAL in doctrine?

```
CREATE TABLE periodicity (periodicity INTERVAL); 
```

But with doctrine yml format?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:45:47.327

不是我知道的，但所有教义“日期时间”列类型都是在内部为您创建为 PHP \DateTime 对象。

[https://doctrine-orm.readthedocs.io/en/latest/cookbook/working-with-datetime.html](https://doctrine-orm.readthedocs.io/en/latest/cookbook/working-with-datetime.html)

不完全确定您的用例是什么，但如果您想要实体上的时间戳（带间隔），您可以在构造函数中简单地将一列标记为“new \Datetime('3 week')”。

# javascript - Add Local JavaScript File to Page?

> ID：10963907
> 
> 赞同：1
> 
> 时间：2012-06-09T19:26:56.090
> 
> 标签：javascript, jquery, html, ajax, userscripts

I'm aware of the procedure to add a script with `document.createElement('script')` but is it just the same for a local file? I've tried using a few `function.toString()` calls but that's terribly inefficient and would rather store the file I need to add separately, have a loader, and call it a day. Any ideas? This is all for a user script I hope to flawlessly convert into an extension. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:53:07.790

将 设置`<script>` `src`为本地文件有效。例如：

```
addJS_Node (null, 'file:///D:/SAMPLE_DIR/YOUR_CODE.js');

function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    //--- Don't error check here. if DOM not available, should throw error.
    targ.appendChild (scriptNode);
} 
```

* * *

**重要提示：** 您几乎总是必须指定完整路径，因为您希望文件从本地文件系统加载。浏览器会将相对路径解释为*相对于当前网页*（或`<base>`标签值）。

* * *

* * *

* * *

回覆：

> 这都是我希望完美转换为扩展的用户脚本

对于扩展，最好不要将 JS 注入目标页面，而是将其保持在“孤立世界”范围内。

对于扩展程序，或者[有时甚至只是专用的 Chrome 用户脚本，可以使用](https://stackoverflow.com/q/5258989/331508)[manifest](http://code.google.com/chrome/extensions/manifest.html)轻松地将文件包含到该范围内。EG（从[这里](http://code.google.com/chrome/extensions/content_scripts.html)）：

```
{
    "name": "My extension",
    ... 
    "content_scripts": [
        {
            "matches":  ["http://www.google.com/*"],
            "css":      ["mystyles.css"],
            "js":       ["jquery.js", "myscript.js"]
        }
    ],
    ... 
} 
```

# javascript - On mouse hover show full size image

> ID：10963908
> 
> 赞同：3
> 
> 时间：2012-06-09T19:26:56.833
> 
> 标签：javascript, jquery, css, ajax, html

I have 2 links for the same image. One is a thumbnail which is being displayed on the screen. The second link is the full size image of the thumbnail.

How can I code this so that when the mouse hovers over the image the screen turns black and just the full screen image is shown?

```
<div id= "1" class="thumbnail"><a href="/fullsizeimage.jpg"><img scr="/thumbnail.jpg"> </a></div>
<div id= "2" class="thumbnail"><a href="/fullsizeimage2.jpg"><img scr="/thumbnail2.jpg"> </a></div> 
```

On mouse hover

1.  Make screen black
2.  Load `Fullsizeimage.jpg` in the centre of the screen

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:31:06.543

那么你可以做的就是在所有其他元素之上放置一个 div 元素（使用 100% 的宽度和高度，`position:absolute`以及`z-index`）。默认隐藏。然后，当您准备好显示图像时，使该 div 可见并将完整大小的图像加载到其中。您可以简单地通过给该 div 一些 css 属性来使屏幕变黑 - `background-color:black`。

您需要修改 HTML 以使小图像包含对大图像的引用。像这样的东西-

```
<div id= "smallImage" class="thumbnail"><a href="/fullsizeimage.jpg"><img scr="/thumbnail.jpg"> </a></div> 
```

对于图像的实际加载，您需要执行以下操作 -

```
$("#smallImage").on('mouseover',function(){
  var smallImage = $(this);
  var largeReference = smallImage.attr('rel');
  $("#largeImage").attr('src',largeReference);
}); 
```

那么大图像的 HMTL 将是 -

```
<img id="largeImage" src="" /> 
```

不要忘记允许用户关闭这个大图像视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:57:23.047

## 使用下面的 CSS 在图像的悬停属性上显示黑色 div

```
`#1 Img:hover +div  {
position:fixed;
top:0px;
left:0px;
width:"set the width";
height :"set the height";
}` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T19:43:03.003

```
function fullscreen1() {
img = document.getElementById('img1')
img.src = "/fullsizeimage.jpg"
img.style = "position:fixed;top:30px;left:30px;width:990px;box-shadow:6px 7px 5px;background-color:rgb(70,70,70);"}
 function fullscreen2() {
img = document.getElementById('img2')
img.src = "/fullsizeimage2.jpg"
img.style = "position:fixed;top:30px;left:30px;width:990px;box-shadow:6px 7px 5px;background-color:rgb(70,70,70);"}
    <div id= "1" class="thumbnail"><a href="/fullsizeimage.jpg" onmouseover="fullscreen1()"><img id="img1" scr="/thumbnail.jpg"> </a></div>
    <div id= "2" class="thumbnail"><a href="/fullsizeimage2.jpg" onmouseover="fullscreen2()"><img id="img2" scr="/thumbnail2.jpg"> </a></div> 
```

不要忘记按照答案之一的建议放置关闭链接

# scala - Scala: Extending inner class, without reference to outer class

> ID：10963909
> 
> 赞同：4
> 
> 时间：2012-06-09T19:26:58.213
> 
> 标签：scala, inner-classes

I can extend an inner class/trait inside the outer class or inside a class derived from the outer class. I can extend an inner class of a specific instance of an outer class as in:

```
class Outer
{
  class Inner{}
}

class OtherCl(val outer1: Outer)
{
  class InnA extends outer1.Inner{}
} 
```

Note: even this seems to compile fine producing very interesting possibilities:

```
trait OuterA
{ trait InnerA } 

trait OuterB
{ trait InnerB }

class class2(val outerA1: OuterA, val outerB1: OuterB)
{ class Inner2 extends outerA1.InnerA with outerB1.InnerB } 
```

But this won't compile:

```
class OtherCl extends Outer#Inner 
```

As far as I can see I'm trying to extend a parametrised class where the type parameter is an instance of the outer class so something to the effect of

```
class OtherCl[T where T is instance of Outer] extends T.Inner 
```

**So is the anyway to extend an inner class/ trait that's inside an outer trait/class without reference to the outer trait/class?**

I am not looking to instantiate the derived inner class without an instance of the outer class only declare its type.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T21:12:35.467

您可以使用具有[自我类型](http://www.scala-lang.org/node/124)的特征来做类似的事情。例如，假设我们有以下内容：

```
class Outer(val x: Int) {
  class Inner {
    def y = x
  }
} 
```

我们想在`Inner`没有`Outer`周围的情况下添加一些功能：

```
trait MyInner { this: Outer#Inner =>
  def myDoubledY = this.y * 2
} 
```

现在，当我们实例化 an 时，`Inner`我们可以混入`MyInner`：

```
scala> val o = new Outer(21)
o: Outer = Outer@72ee303f

scala> val i = new o.Inner with MyInner
i: o.Inner with MyInner = $anon$1@2c7e9758

scala> i.myDoubledY
res0: Int = 42 
```

这不是您想要的，但很接近。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T20:36:07.030

不完全是您要查找的内容，但具有路径相关类型（可在 2.10 或 2.9 上使用 -Ydependent-method-types 标志，您可以执行以下操作：

```
class Outer { class Inner {}; def create = new Inner }
def foo[T <: Outer](x: T) = x.create 
```

希望有帮助

# javascript - How do search engines crawl Javascript?

> ID：10963912
> 
> 赞同：1
> 
> 时间：2012-06-09T19:27:18.087
> 
> 标签：javascript, jquery, seo, search-engine, google-crawlers

If I add random keywords alt attrb to the images using jQuery document.ready (thinking that the page is already loaded), how does it affect search engines?

Will the search engines get the alt attrb that I added with any JavaScript at all? If not how come it can understand Ajax calls sent via JavaScript?

I want to add the alt attrb to images that don't have any in my client's site, in case they forget to put an alt text. jQuery will replace the empty ones with keywords. Is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T08:30:24.070

直到现在，Google 和其他搜索引擎仍然无法读取从 javascript 创建的脚本，您可能需要使用其他脚本，例如 php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:35:23.390

搜索机器人无法读取它，如果您使用 JavaScript，则需要使用服务器端语言将关键字添加到 img alt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:38:56.690

这是一些证据表明搜索引擎执行一些 javascript，但假设它们不执行。

[Google 或其他搜索引擎是否执行 JavaScript？](https://stackoverflow.com/questions/5364978/does-google-or-other-search-engine-execute-javascript)

[搜索引擎是否处理 Javascript？](https://stackoverflow.com/questions/2068571/do-search-engines-process-javascript)

[http://searchengineland.com/google-io-new-advances-in-the-searchability-of-javascript-and-flash-but-is-it-enough-19881](http://searchengineland.com/google-io-new-advances-in-the-searchability-of-javascript-and-flash-but-is-it-enough-19881)

# python - Gzipping filestream for upload in multiform

> ID：10963913
> 
> 赞同：0
> 
> 时间：2012-06-09T19:27:45.967
> 
> 标签：python

I'm working on uploading an mp3 file to a webhost (which i have no control over) and after a related question on StackOverflow, i noticed that the host does support Gzip encoded uploads.

In python, how would i be able to encode my stream (which i get from open(filename)) and send that to the server?

```
def upSong(fileName):
    datagen, headers = multipart_encode({"mumuregularfile_0": open(fileName, "rb")})

    uploadID = math.floor(random.random()*1000000)
    request = urllib2.Request("http://upload0.mumuplayer.com:443/?browserID=" + browserID + "&browserUploadID=" + str(uploadID), datagen, headers)

    urllib2.urlopen(request).read() 
```

This is the code that does the uploading, being fairly new to python i have no idea how i would tackle a problem like this, but google have provided no answer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:31:30.210

看看内置的 gzip 库：文档在这里：[http ://docs.python.org/library/gzip.html](http://docs.python.org/library/gzip.html)

您可以避免使用 StringIO 字符串文件对象创建任何额外的文件

也许像这种方法：

```
import gzip, StringIO

def upSong(fileName):
    with open(filename, 'rb') as f
        stringf = StringIO.StringIO()
        zipper = gzip.GzipFile(mode = "wb", fileobj=stringf)
        zipper.write(f.read())
        zipper.close()
        datagen, headers = multipart_encode({"mumuregularfile_0": stringf)})

        uploadID = math.floor(random.random()*1000000)  
        request = urllib2.Request("http://upload0.mumuplayer.com:443/?browserID=" + browserID + "&browserUploadID=" + str(uploadID), datagen, headers)

        urllib2.urlopen(request).read() 
```

没有测试过，所以可能有错误...

# javascript - 似乎无法影响嵌套 setTimeout 内的输入元素属性？

> ID：10963915
> 
> 赞同：0
> 
> 时间：2012-06-09T19:28:03.547
> 
> 标签：javascript, jquery, settimeout

[http://jsfiddle.net/ZkAdt/8/](http://jsfiddle.net/ZkAdt/8/)

获取 URL：[http](http://www.youtube.com/watch?v=B8c2G7RN0TM) ://www.youtube.com/watch?v= B8c2G7RN0TM 并将其粘贴到输入字段中。

观察输入字段没有说“谢谢！” 粘贴后。

检查日志。观察 flashMessage 触发，self._input 在视觉上看起来与 DOM 元素相同，但两者并不相同。

尝试直接影响 DOM 元素也不起作用。

我做错了什么可怕的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:07:16.770

问题比较简单。在 jsFiddle 上调试并不是那么简单。您正在使用此行设置占位符：

```
this._input.attr('placeholder', message).val('').blur(); 
```

此外，您触发模糊，它会触发您的其他事件处理程序，将占位符设置回默认文本。

# javascript - Noob Concern: JavaScript function usage

> ID：10963916
> 
> 赞同：6
> 
> 时间：2012-06-09T19:28:04.657
> 
> 标签：javascript, function

I'm going through a JavaScript tutorial and I'm able to complete it. But the problem is that I don't understand what one of the lines is doing. I have a function `setAge()` and then later after creating a `susan` object I set one of the properties to that object as the name of the function? I don't understand why this is done. Wouldn't I be able to use the function/method without doing this?

The tutorial code:

```
var setAge = function (newAge) {
  this.age = newAge;
};

var susan = new Object(); 
susan.age = 25; 
susan.setAge = setAge; //how the hell does this work?  

// here, update Susan's age to 35 using the method
susan.setAge(35); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T19:37:35.050

它将`susan`' 属性分配给`setAge`上面定义的函数，

```
function (newAge) {
  this.age = newAge;
}; 
```

这是一个接受一个参数的函数。当`susan.setAge(35);`被调用时，`this`将引用调用者，，`susan`将她的年龄更新为 35。

混淆可能是因为`setAge`被使用了两次。Susan 的函数在左侧定义，右侧已经定义。例如：

```
susan.letMyAgeBe = setAge; 
susan.letMyAgeBe(35); 
```

工作相同。`setAge`也是“可重复使用的”：

```
harry = new Object();
harry.iAmThisOld = setAge;
harry.iAmThisOld(55); 
```

**演示** [http://jsfiddle.net/7JbKY/2/](http://jsfiddle.net/7JbKY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T20:14:14.123

让我们看看代码中做了什么——

```
var setAge = function (newAge) {
  this.age = newAge;
}; 
```

这里定义了一个函数，它将在调用函数时将对象的变量 age 更改为指定的变量。

```
var susan = new Object(); 
susan.age = 25; 
susan.mynewageis = setAge; 
```

在这里，我们为 susan.age 设置了一个预定义的值，该值将由函数更改，并且我们将函数的值设置为变量 susan.mynewageis，以便在任何其他情况下下次使用该函数。

```
susan.mynewageis(35); 
```

这里我们将 susan.age 的值设置为调用函数时指定的 35。

我打算发布这个答案，但我错误地按下了提交按钮并发布了不完整的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:37:12.057

它的工作原理是可变范围。

第一个`setAge`变量只是一个函数，你可以这样称呼它：`setAge(24)` 它与`function setAge(age) {this.age = age}`

在声明 setAge 变量并将其内容设置为函数后，您可以为该变量设置另一个变量。你在对象中所做的就是这个。在你写完`susan.setAge = setAge;`你的对象的 setAge 属性将等于之前的 setAge 变量，它是一个函数。因此，您可以调用`susan.setAge()`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-09T19:36:18.767

这是范围和结束的问题。有关这方面的更多信息，我建议您阅读这篇文章： http: [//nesj.net/blog/2012/03/javascript-scope-and-closure/](http://nesj.net/blog/2012/03/javascript-scope-and-closure/)

# version-control - Version control system that works with branches and code tracking

> ID：10963922
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:28:40.460
> 
> 标签：version-control

Can I do the following without having to learn any version control systems?

*   branch a codebase (to install an addon on each branch)
*   merge files (merge--or rather--replace stock files with edited files if provided)
*   merge files from different branches (so I can cherry-pick a combination of working addons)

I'm a user of [osCommerce e-commerce CMS](http://www.oscommerce.com). And it has an addon system which are patches for the stock codebase to increase functionality and features.

The addons site hosts packages which generally contain modified files to replace the stock files and instructions if the files in question have already been modified. I've found it difficult to keep track of changes I've been doing. And I couldn't just revert back to what it was before trying to install a new addon and edit a bunch of files.

I considered using version systems like Git or something but other than editing by following instructions, I don't do a single line of coding myself. I signed up for GitHub thinking that I could just graphically take care of versioning, merging, etc. on their website, but the web frontend lacked those abilities or they weren't obviously visible.

I already tried GitHub for Windows. I could ask it to clone the osCommerce repo (they develop on GitHub), and browsing to the repo it shows the last commit and diff. For the life of me I couldn't find anyway to do the bullet points I mentioned above.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T19:34:38.963

GitHub 确实具有这些功能。

下载[适用于 Windows](http://windows.github.com/)（或[Mac](http://mac.github.com/)）的 GitHub，并使用图形界面来满足您的需求。我没有为 Git 使用任何 GUI（因为它更容易运行`git commit -a`然后打开一个窗口并单击按钮）但是 Mac 和 Windows 的 GitHub 界面看起来很时尚。

为了通过 GitHub 合并代码，您需要首先创建将要修改的原始代码的一个分支。这称为叉子。完成更改并希望将它们合并回主代码后，将 Pull Request 发送回原始存储库，GitHub 将为您合并它们。

我不完全确定 UI 是如何处理这个问题的，但它们应该很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T19:33:42.493

你可以试试[SmartGit](http://www.syntevo.com/smartgit/index.html)。您仍然需要掌握 git 基础知识，但该界面与 VCS 一样具有可视化和用户友好性。

[ProGit 这本书](http://git-scm.com/book)非常适合 git 初学者。

编辑：要使用 SmartGit 进行分支，您可以使用`F7`快捷方式，或转到`branch`菜单（在最顶部的选项列表中间）。选择`new branch`，在弹出的对话框中，输入您的分支的名称并选择`Add Branch and Switch`。瞧，您已经分支了代码库，您所做的更改可以提交到新分支。

您可能不想（再次）听到它，但为了避免您感到沮丧，我也建议您阅读一些 git 基础知识。GitPro 书的前 60 页就足够了。也许更少。

尽管 VCS 不仅仅用于代码，但所有当前的系统都是由程序员为程序员设计的。如果对内部工作原理没有一些基本了解，您有时会得到意想不到的结果。您将不得不从中恢复的结果。

# android - How to scale text on a bitmap?

> ID：10963923
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:28:41.097
> 
> 标签：android, scale, android-canvas

i'm trying to draw text on a bitmap. When text is short everything is working fine, but when text is long it just paints it out of screen.

How can i fix it? This is my releavent code :

```
 Canvas canvas = new Canvas(bitmap);
      // new antialised Paint
      Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
      // text color - #3D3D3D
      paint.setColor(Color.WHITE);
      // text size in pixels
      paint.setTextSize((int) (108 * scale));
      // text shadow
      paint.setShadowLayer(1f, 0f, 1f, Color.BLACK);

      // draw text to the Canvas center
      Rect bounds = new Rect();
      paint.getTextBounds(gText, 0, gText.length(), bounds);
      int x = (bitmap.getWidth() - bounds.width())/2;
      int y = (bitmap.getHeight() + bounds.height())/2;

      canvas.drawText(gText, x * scale, y * scale, paint); 
```

**EDIT:** In 2nd thought, it could be a better idea to find out i the text will be longer then screen, then if it will, split the string and draw the 2nd half in a new line. Am i right?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:07:10.533

paint.measureText

[http://developer.android.com/reference/android/graphics/Paint.html#measureText(char[], int, int)](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28char%5B%5D,%20int,%20int%29)

与您的视图宽度减去文本开头的 x 偏移量进行比较。根据需要拆分文本。瞧！祝你好运

# css - SVG and external stylesheets

> ID：10963925
> 
> 赞同：4
> 
> 时间：2012-06-09T19:28:53.393
> 
> 标签：css, svg

I am using some interactive/dynamic SVG on my site and as a feature we have an option to download the .svg file as-is.

One problem we discovered is that when external stylesheets are used, the styles get lost if the user, say, tries to open the file in Inkscape. So I have been styling fill and stroke colors, etc., inline on the elements.

I am wondering about the SVG standard and how stylesheets fit into it. Are .css files designed to be transported with the .svg file? I understand you can declare external stylesheets like so:

`<?xml-stylesheet type="text/css" href="mystylesheet.css" ?>`

Will most vector graphics software recognize and load this if they are in the same folder? It seems Illustrator doesn't have initial support for SVG but has add-ons that include JavaScript and CSS3 engines.

I can't help but feel like everyone has missed the SVG boat. Has anyone had success doing something like, packaging the .svg with a .css for download and trying this out in various vector graphics programs? What do programs like Inkscape typically do when they save SVG, as there are obviously several ways to assign styles?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:58:49.910

我从 W3C 中找到了一些关于 SVG 查看器一致性的文档，这些文档清楚地说明了一些问题：

[SVG 查看器一致性](http://www.w3.org/TR/SVG/conform.html#ConformingSVGViewers)

[使用 CSS 进行样式设置](http://www.w3.org/TR/SVG/styling.html#StylingWithCSS)

[造型替代品](http://www.w3.org/TR/SVG/styling.html#AlternativesForStyling)

[SVG 和 CSS 使用的常用工具](http://www.w3.org/TR/SVG/styling.html#SVGUseOfCSS)

看到这条线

> 支持通用（即基于文本）XML 内容的 CSS 样式的符合 SVG 解释器和符合 SVG 查看器也需要支持 SVG 内容的 CSS 样式。

这让我相信只有支持 CSS（而不是表示属性）的 SVG 查看器才需要支持外部样式表 - 所以基本上只是浏览器。

我仍然想要一份 SVG 软件包列表，以及每个软件包是否支持外部样式表以及它们如何分配样式，但也许我必须自己做这项研究。

# php - 如何从数据库中获取id？

> ID：10963926
> 
> 赞同：1
> 
> 时间：2012-06-09T19:29:00.473
> 
> 标签：php

这是我的news.php ...这段代码将显示标题和一些新闻内容。当您单击标题时，它必须获取 ID 并引导您阅读文章。但我的没有得到身份证。

```
<?php 
include 'connect.php';
?>

<?php
$qry = (mysql_query("SELECT * FROM articles"));?>
<newslist title="Latest News">
<?php   
    while($row=mysql_fetch_array($qry))
        { ?>

        <news category="green" url="asdf.php?id="<?php echo $row['id']?>"" date="<?php echo $row['date']?>">
         <headline><?php echo "<h1>".$row['title']."</h1>";?></headline>
        <detail><?php echo "<p>".substr($row['content'],0,60)."..."."</p>"; ?> </detail>
          </news>

        <?php 
        }?>

</newslist> 
```

这是（我猜）正在处理上面的 URL 代码的 javascript 代码片段。javascript代码中是否存在问题？(vscroller.js)

`var url = $(this).attr('url'); var htext = $(this).find('headline').text(); description.append($('<h1/>').html("<a href='" + url + "'>" + htext + "</a>"));`

这是我的 asdf.php。这是您单击一篇文章时的目的地。

```
 `<?php

     $qry=mysql_query("SELECT * FROM articles");
     if(!$qry)
     {
     die("Query Failed: ". mysql_error());
     }
     ?>

     <div id="content">
     <?php
     while($row=mysql_fetch_array($qry))
     {
     ?>
        <p class="head">Posted In: <?php echo $row['category'];?></p>
        <div class="line"></div>
        <h1><?php echo $row['title'];?></h1>
        <div class="line"></div>
        <p class="meta"><?php echo $row['date']." "."Written By: ".$row['author'];?>
        </p>
        <div id="article" class="article">
        <p class="intro">
        <?php echo "<img src=".$row['image']."/>"."<p>".$row['content']."</p>";?></p>
        <div class="line"></div><br /><br />

    <?php
    }
    ?>

<p id="pc_reference" class="meta"><a href="demo.php">Back to News Page</a></p>
        </div>` 
```

此代码来自我显示 news.php(main.php) 的页面

```
 `<script type="text/javascript">
     $(document).ready(function () {
        $('#vscroller').vscroller({ newsfeed: 'news.php' });
     });
     </script>

    <html>
    <body>
    <div class="news-wrapper" id="vscroller"></div>` 
```

原始来源可以在[http://www.egrappler.com/xml-driven-vertical-news-scroller-script-using-html-and-jquery-vscroller/找到](http://www.egrappler.com/xml-driven-vertical-news-scroller-script-using-html-and-jquery-vscroller/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:24:22.360

```
 <?php include 'connect.php';?>  
<?php
    $query = mysql_query("SELECT * FROM articles") or die(mysql_error());
        while($row = mysql_fetch_assoc($query)){
            $a[] = $row;
            foreach($a as $key=>$value){
                $array[$key] = $value;
            }
        }
        ?>
        <?php foreach($array as $a):?>
        <news category="green" url="asdf.php?id="<?php echo $a['id']?>"" date="<?php echo $a['date']?>">
                 <headline><?php echo "<h1>".$a['title']."</h1>";?></headline>
                <detail><?php echo "<p>".substr($a['content'],0,60)."..."."</p>"; ?> </detail>
         </news>
        <?php endforeach;?> 
```

我已经重新排列了数组，所以它会打印得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:40:25.997

首先，您必须确保您的数据库中确实有一个名为 id 的行。

试试这个代码：

```
$query = mysql_query("SELECT * FROM articles");
$row = mysql_fetch_array($query));
print_r($row); 
```

所以你可以验证字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T20:22:06.903

正如您所说，您已经验证了 ID 列存在，我认为下一步是

检查此代码段`echo $row['id']`是否返回预期数据。

确认后，如果仍然错误，请输出示例 HTML 代码源。

正如 paulsm4 所说，我们需要查看 HTML 输出，以便帮助调试问题所在/位置。

# cruisecontrol.net - cc.net 添加评论以构建结果

> ID：10963930
> 
> 赞同：0
> 
> 时间：2012-06-09T19:29:34.463
> 
> 标签：cruisecontrol.net

我想为构建结果添加注释，例如添加构建失败的原因。

cc.net 有这个功能吗？

我如何为此设置我的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:35:06.413

有一种获取用户输入的机制，但在这种情况下我不建议这样做。您想更新现有的构建，可能在它损坏几个小时后，所以如果您现在真的想要它，您可以编辑构建日志文件，并在其中添加一个 BuildFailureComment 标记。该文件只是xml。对于可视化，您可以更新其中一个 xsl 文件。

如果您想包含此功能，最好的办法是打开问题请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T08:03:46.520

不，没有提供暂停构建以接受失败原因或任何其他输入的内置功能。

你可以：

1.  在下一次构建时提供构建原因，例如“修复以前的构建...”
    *   这将使用 askForABuildReason 项目配置，但是我不确定它在 webdashboard/cctray 中的支持程度。
2.  如果可能，证明失败的一个更具描述性的原因，例如检测测试失败次数并将其添加到构建日志的任务。
    *   然后，您可以向 webdashboard 添加一个控件来显示它。

虽然它是回顾性的，但我猜 (1) 会给您最大的灵活性，因为您可以输入自定义消息。

希望有帮助。

# android - 使用名称中的变量（R.color.name + 变量）从 values/colors.xml 中检索颜色

> ID：10963931
> 
> 赞同：2
> 
> 时间：2012-06-09T19:29:43.767
> 
> 标签：android, colors, android-resources

我的 colors.xml 中有一个颜色列表，它们的名称都采用 tColor1、tColor2、tColor3 等格式，我想在 for-to-do 循环中使用循环整数作为名称的一部分来检索它们。所以我有

```
for (int i = 0; i < numTrails; i++) {
    newColors[i] = R.color.tColor + i;
} 
```

现在我明白了我不能像那样使用 R 类，但是我还能用什么其他方法来获取颜色呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T19:40:46.757

你可以做这样的事情，假设你的`newColors`Array 是一个`int`带有资源 id 的 Array？

```
String colorId = "tColor";
Resources resources = getResources();
for (int i = 0; i < numTrails; i++) {
    newColors[i] = resources.getIdentifier(colorId+i, "color", getPackageName());    
} 
```

`getResources().getColor(...)`如果它是您在该结果上使用的颜色数组：

```
String colorId = "tColor";
Resources resources = getResources();
for (int i = 0; i < numTrails; i++) {
    int resId = resources.getIdentifier(colorId+i, "color", getPackageName());
    newColors[i] = resources.getColor(resId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:46:13.197

可以尝试

请参阅页面最后的 Typed Array .....

[http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)

# javascript - 禁用 Tumblr 照片集或更改它们的大小？

> ID：10963932
> 
> 赞同：1
> 
> 时间：2012-06-09T19:30:04.237
> 
> 标签：javascript, html, css, tumblr

我已经能够在我的博客**[http://blog.seans.ws](http://blog.seans.ws)**上将我的照片放大到单个照片帖子，但 Tumblr 照片集将我的宽度限制为 500 像素

如何使照片集的布局更大，或者只是禁用该功能并一张一张地以高分辨率显示我的照片？这是照片集代码：

```
 {block:Photoset}
                 <article>
                    <span class="break" style="padding-bottom: 19px;"></span>
                    {Photoset-500}
                    {block:Caption}
                        <p>{Caption}</p>
                    {/block:Caption}
                    <p></p>
                    <time>{TimeAgo}</time>
                </article>
            {/block:Photoset} 
```

这是单张照片代码，我可以在其中制作巨大的照片：

```
 {block:Photo}
                <article>
                    <span class="break"></span>
                    <img src="{PhotoURL-HighRes}" class="highres">
                    <p>{Caption}</p>
                    <time>{TimeAgo}</time>
                </article>
            {/block:Photo} 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T15:51:16.257

真的没有必要使用 Javascript 和 Tumblr API。

您可以使用 {block:Photos} 单独浏览每个 Photoset 中的照片。

例如在您的示例中：

```
{block:Photoset}
     <article>
        <span class="break" style="padding-bottom: 19px;"></span>

        <!-- Go through each Photo in the Photoset -->
        {block:Photos}
            <img src="{PhotoURL-HighRes}" class="highres">
        {/block:Photos}

        {block:Caption}
            <p>{Caption}</p>
        {/block:Caption}
        <p></p>
        <time>{TimeAgo}</time>
    </article>
{/block:Photoset} 
```

请记住，[文档](http://www.tumblr.com/docs/en/custom_themes#photoset-posts)是您的朋友 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:55:56.200

在结束正文标记之前添加此脚本。这将增加或减少照片集的大小

```
<script type="text/javascript">
    //This will change the source address and display the correct size.
                $(".photoset").each(function() { 
            var newSrc = $(this).attr("src").replace('700','860');
            $(this).attr("src", newSrc);       
        });
    //This will get the new size of the iframe and resize the iframe holder accordingly.
        $(function(){
        var iFrames = $('.photoset');
        function iResize() {
            for (var i = 0, j = iFrames.length; i < j; i++) {
                iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
            }

            if ($.browser.safari || $.browser.opera) { 
                iFrames.load(function(){
                    setTimeout(iResize, 0); 
                });

                for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
                }
            } else {
                iFrames.load(function() {
                    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
                });
            }
        });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T00:38:49.057

如果你想保留 Tumblr 的照片集网格样式，请查看这个小 jQuery 插件：[https ://github.com/PixelUnion/Extended-Tumblr-Photoset](https://github.com/PixelUnion/Extended-Tumblr-Photoset)

它使用 EXIF 数据、圆角、不同的装订线尺寸等扩展了 Tumblr 的默认照片集。

免责声明：我参与了创建它的一小部分；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T19:55:03.243

这个人解决了：）

[https://github.com/ram-nadella/Tumblr-Photoset-Alternative/blob/master/mod.html](https://github.com/ram-nadella/Tumblr-Photoset-Alternative/blob/master/mod.html)

# richfaces - Rich Faces 4.1.0 选项列表

> ID：10963935
> 
> 赞同：1
> 
> 时间：2012-06-09T19:30:11.660
> 
> 标签：richfaces

我的问题是 Rich Faces 4.1.0 选项列表。我有一个可以填充左右两侧的项目。我无法从右侧（即employeeBean.target）获取数据，我不知道为什么。有人可以看看这段代码并告诉我哪里可能出错了。

**看法：**

```
<rich:panel style="width:560px;">
            <h:form>
                <rich:pickList value="#{employeeBean.target}" var="emp" id="picklist"
                               sourceCaption="Available" targetCaption="Selected"
                               orderable="false"  converter="employeeConverter">
                    <f:selectItems value="#{employeeBean.source}" var="employee" itemValue="#{employee}" />
                    <f:converter converterId="employeeConverter" />
                </rich:pickList>
            </h:form>
            jobcardBean bean = #{employeeBean.target}
        </rich:panel> 
```

**控制器：**

```
 @ManagedBean
@ViewScoped
public class EmployeeBean implements Serializable {

    private static final long serialVersionUID = 1L;
    List<Employee> source;
    List<Employee> target;

    public EmployeeBean() {
    }

    public List<Employee> getSource() {
        return new DatabaseBean().getAllEmployees();
    }

    public void setSource(List<Employee> source) {
        this.source = source;
    }

    public List<Employee> getTarget() {
        return target;
    }

    public void setTarget(List<Employee> target) {
        this.target = target;
    } 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****** /

```
 @FacesConverter(value = "employeeConverter")
public class EmployeeConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        if (submittedValue.trim().equals("")) {
            return null;
        } else {
            return submittedValue.toString();
        }
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (value == null || value.equals("")) {
            return "";
        } else {
            return String.valueOf(((Employee) value));
        }
    }
} 
```

**模型：**

```
public String toString() {
    return getName() + " " + getSurname();
}

@Override
public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (!(obj instanceof Employee)) {
        return false;
    }

    return ((Employee) obj).getName() == this.name && ((Employee) obj).getSurname() == this.surname;
}

@Override
public int hashCode() {
    int hash = 1;
    return hash * 31 + name.hashCode();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:44:37.913

我的麻烦在于我的转换器。这里的 getAsObject 接受一个字符串并传递一个字符串。该方法将编译但不会做任何有用的事情。我通过让 getAsObject 返回我的模型 bean 对象而不仅仅是一个字符串来解决这个问题。

# javascript - IronPython 和 IronRuby 与 VS2010 中的 Javascript

> ID：10963938
> 
> 赞同：1
> 
> 时间：2012-06-09T19:30:37.100
> 
> 标签：javascript, visual-studio-2010, ironpython, ironruby

我对用于脚本语言的 python 和 ruby​​ 非常感兴趣。我正在使用 Visual Studio IDE，并且正在为我在基于 Web 的应用程序中的脚本编写使用 javascript，即使用 SQL 的数据库站点，似乎 JS 被大量使用并且受到钦佩，但我想听听 ruby​​ 和 python 用户对他们的使用有什么看法对于 Web 应用程序，尤其是在 VS2010 IDE 中，（IronRuby）（IronPython）......与 JS 相比，易于使用、学习和功能范围。

# sql - SQL：检查插入是否成功（在从具有两列的表中获取 8 个不同的随机行的任务中）

> ID：10963941
> 
> 赞同：0
> 
> 时间：2012-06-09T19:30:57.870
> 
> 标签：sql, random, pdo, distinct

## 更新：

我修复了之前的问题。现在代码已更新。结果是唯一的，ID 是正确的。但是新问题：结果行的数量通常少于要求（8）。因为我加`CREATE UNIQUE INDEX topicid on rands (topicid);`了拒绝SQL层的重复插入；循环 - 1 无论插入被拒绝。我现在正在寻找一种方法，例如：如果插入成功则 cnt-=1。您知道在 SQL 层中执行此操作的任何方法吗？谢谢。

* * *

我有一个名为 topictable 的表，其中包含两个 coulmns-topicid 和主题。我想从表中获取 8 个随机行而不重复。[我从这里](https://stackoverflow.com/a/9946238/727208)窃取了代码并修改为获得两列结果。但我有两个问题。1、不明显；2\. id 错误（我以某种方式捕获了错误的随机 id）。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_rands$$
CREATE PROCEDURE get_rands(IN cnt INT)
BEGIN
  DROP TEMPORARY TABLE IF EXISTS rands;
  CREATE TEMPORARY TABLE rands ( topicid INT ,topic VARCHAR(128) );
  CREATE UNIQUE INDEX topicid on rands (topicid);
loop_me: LOOP
    IF cnt < 1 THEN
      LEAVE loop_me;
    END IF; 
    INSERT INTO rands 
       SELECT topictable.topicid,topictable.topic
         FROM topictable 
         JOIN (SELECT (RAND()*(SELECT MAX(topictable.topicid) FROM topictable)) AS id) AS choices
        WHERE topictable.topicid >= choices.id
        LIMIT 1;
    SET cnt = cnt - 1;
  END LOOP loop_me;  
END$$
DELIMITER ; 
```

我在 php 中使用以下函数来执行脚本。

```
 function pickrandomtopics($amountoftopics,$dbh){
try {  
    $randtable="CALL get_rands($amountoftopics)";
    $dbh->exec("$randtable");
    $topictemp = $dbh->query('SELECT * FROM rands');
    $topics = $topictemp->fetchAll(PDO::FETCH_ASSOC);
}  
catch(PDOException $e) {  
    echo $e->getMessage();  
}
return $topics;} 
```

感谢您的帮助。

* * *

对不起，我没有说清楚。此表中的所有主题在开始时都是唯一的。但它们最后可能会重复，因为函数会不时随机选择行，有时它只会选择同一行两次。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:43:37.163

谢谢@tereško。`CONTINUE HANDLER FOR SQLSTATE '23000'`捕获“非唯一”错误并将cnt 纠正+1 。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_rands$$
CREATE PROCEDURE get_rands(IN cnt INT)
BEGIN
  DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET cnt = cnt + 1;
  DROP TEMPORARY TABLE IF EXISTS rands;
  CREATE TEMPORARY TABLE rands ( topicid INT UNIQUE,topic VARCHAR(128) );
loop_me: LOOP
    IF cnt < 1 THEN
      LEAVE loop_me;
    END IF; 
    INSERT INTO rands 
       SELECT topictable.topicid,topictable.topic
         FROM topictable 
         JOIN (SELECT (RAND()*(SELECT MAX(topictable.topicid) FROM topictable)) AS id) AS choices
        WHERE topictable.topicid >= choices.id
        LIMIT 1;
    SET cnt = cnt - 1;
  END LOOP loop_me;  
END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:42:04.860

为了解决您的一个问题，我认为这可能会有所帮助 - 使用 SubQuery

*   首先选择所有独特的主题
*   从上面返回的查询中选择 8 个随机主题

.这只是一个指导方针，而不是实际的查询

```
 select 8 random topics from
 (
  select all unique topics
 ) 
```

# jquery - 提交链式选择（jquery）后如何打开窗口

> ID：10963948
> 
> 赞同：0
> 
> 时间：2012-06-09T19:31:44.573
> 
> 标签：jquery, select, submit, chained

所以我有一个关于火车站的连锁选择。人们必须选择他们的起点和目的地。

```
<form action="#" id="routeform" method="GET">
  <select class="station" name="station">
    <option value="Antwerpen">Antwerpen-Centraal</option>
    <option value="Bergen">Bergen</option>
    <option value="Brugge">Brugge</option>
    <option value="Brussel">Brussel</option>
    <option value="Charleroi">Charleroi-Zuid</option>
    <option value="DePanne">De Panne</option>
    <option selected="selected" value="Gent">Gent-Sint-Pieters</option>
    <option value="Hasselt">Hasselt</option>
    <option value="Kortrijk">Kortrijk</option>
    <option value="Leuven">Leuven</option>
    <option value="Luik">Luik-Guillemins</option>
    <option value="Namen">Namen</option>
    <option value="Oostende">Oostende</option>
    <option value="Roeselare">Roeselare</option>
  </select>
  <select class="series" name="series">
    <option value="">--</option>
    <option value="Antwerpen" class="Gent">Antwerpen-Centraal</option>
    <option value="Bergen" class="Gent">Bergen</option>
    <option value="Brugge" class="Gent">Brugge</option>
    <option value="Brussel" class="Gent">Brussel</option>
    <option value="Charleroi" class="Gent">Charleroi-Zuid</option>
    <option value="DePanne" class="Gent">De Panne</option>
    <option value="Hasselt" class="Gent">Hasselt</option>
    <option value="Kortrijk" class="Gent">Kortrijk</option>
    <option value="Leuven" class="Gent">Leuven</option>
    <option value="Luik" class="Gent">Luik-Guillemins</option>
    <option value="Namen" class="Gent">Namen</option>
    <option value="Oostende" class="Gent">Oostende</option>
    <option value="Roeselare" class="Gent">Roeselare</option>
    <option value="Gent" class="Antwerpen">Gent-Sint-Pieters</option>
    <option value="Brugge" class="Kortrijk">Brugge</option>
    <option value="Gent" class="Kortrijk">Gent-Sint-Pieters</option>
    <option value="Roeselare" class="Kortrijk">Roeselare</option>
    <option value="Gent" class="Brugge">Gent-Sint-Pieters</option>
    <option value="Kortrijk" class="Brugge">Kortrijk</option>
    <option value="Oostende" class="Brugge">Oostende</option>
    <option value="Roeselare" class="Brugge">Roeselare</option>
    <option value="Brugge" class="Oostende">Brugge</option>
    <option value="Gent" class="Oostende">Gent-Sint-Pieters</option>
    <option value="Brussel" class="Bergen">Brussel</option>
    <option value="Gent" class="Bergen">Gent-Sint-Pieters</option>
    <option value="Brussel" class="Namen">Brussel</option>
    <option value="Gent" class="Namen">Gent-Sint-Pieters</option>
    <option value="Bergen" class="Brussel">Bergen</option>
    <option value="Charleroi" class="Brussel">Charleroi-Zuid</option>
    <option value="Gent" class="Brussel">Gent-Sint-Pieters</option>
    <option value="Hasselt" class="Brussel">Hasselt</option>
    <option value="Leuven" class="Brussel">Leuven</option>
    <option value="Luik" class="Brussel">Luik-Guillemins</option>
    <option value="Namen" class="Brussel">Namen</option>
    <option value="Brussel" class="Leuven">Brussel</option>
    <option value="Gent" class="Leuven">Gent-Sint-Pieters</option>
    <option value="Hasselt" class="Leuven">Hasselt</option>
    <option value="Luik" class="Leuven">Luik-Guillemins</option>
    <option value="Brussel" class="Hasselt">Brussel</option>
    <option value="Gent" class="Hasselt">Gent-Sint-Pieters</option>
    <option value="Leuven" class="Hasselt">Leuven</option>
    <option value="Brussel" class="Charleroi">Brussel</option>
    <option value="Gent" class="Charleroi">Gent-Sint-Pieters</option>
    <option value="Brussel" class="Luik">Brussel</option>
    <option value="Gent" class="Luik">Gent-Sint-Pieters</option>
    <option value="Leuven" class="Luik">Leuven</option>
    <option value="Gent" class="DePanne">Gent-Sint-Pieters</option>
    <option value="Brugge" class="Roeselare">Brugge</option>
    <option value="Gent" class="Roeselare">Gent-Sint-Pieters</option>
    <option value="Kortrijk" class="Roeselare">Kortrijk</option>
  </select>
  <br/>
  <input type="submit" value="Go" />
</form> 
```

每个结果都有一个不同的 html.page 它必须去。我试过这个例如（从安特卫普到根特）：

```
$('#routeform').submit(function () {
  if ($('select.station').val() == 'Antwerpen') && ($('select.series').val() == 'Gent') {
    window.open("contact.html", "_self");
  }
  return false;
}); 
```

但它不起作用，我找不到问题......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:45:16.003

尝试这个 ：

```
$('#routeform').submit(function (evt) {
  if (($('select.station').val() == 'Antwerpen') && ($('select.series').val() == 'Gent')) {
    window.open("contact.html", "_self");
  }
  evt.preventDefault(); // this prevents the submit
}); 
```

你的括号不正确

或者

```
if ($('select.station').val() == 'Antwerpen' && $('select.series').val() == 'Gent') { 
```

因为您不必将语句包含`if`在括号内 - 它仍然有效

[这里的工作示例](http://jsfiddle.net/GwaFa/1/)

# objective-c - SSO 功能如何返回到应用程序？（苹果手机）

> ID：10963949
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:32:04.807
> 
> 标签：objective-c, ios, facebook, single-sign-on

> **可能重复：**
> [Facebook SSO 如何知道要返回哪个应用程序？](https://stackoverflow.com/questions/10953229/how-does-facebook-sso-know-which-app-to-return-to)

我目前正在从事一个涉及使用 SSO 登录 facebook 的项目。当我执行 SSO 登录（已经在 facebook 应用程序上登录）时，似乎是一个 facebook 窗口的窗口会短暂打开和关闭，在执行 SSO 后将我带回应用程序。我想知道，**Facebook 开发人员库中的哪个函数负责将我返回到我正在运行的应用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:55:13.133

Facebook 应用程序在完成后只需调用一个 URL。您设置为应用的 URL 方案的相同 URL。您可以为您的应用设置自己的 URL 方案，然后只要使用该 URL（例如网页上的链接），它就会打开您的应用。

# ruby - 如何从 Ruby 运行 Excel 宏？

> ID：10963950
> 
> 赞同：3
> 
> 时间：2012-06-09T19:32:17.043
> 
> 标签：ruby, unit-testing, excel, vba

**问题**

我有这本 10 年前的 Excel 工作簿，里面有数以万计的 VBA 代码行，其中一些我必须更新。所以我萌生了用 Ruby 编写单元测试的疯狂想法……

**问题**

如何从 Ruby 调用 Excel 宏？

**到目前为止我所拥有的**

我有

*   名为“C:\temp\Test.xlsm”的 Excel 工作簿
*   使用名为“Sheet1”的工作表和
*   一个单元格“A1”。

此外，此 Excel 工作簿

*   包含一个名为“Module1”的模块
*   用一个叫做`WriteToA1()`and的宏
*   另一个宏称为`ClearA1()`

另外，我有一个如下所示的 Ruby 脚本：

```
require 'test/unit'
require 'win32ole'

class TestDemo < Test::Unit::TestCase
   def testExcelMacro
    # Arrange
    excel = WIN32OLE.new("Excel.Application")
    excel.Visible = true
    excel.Workbooks.Open('C:\temp\Test.xlsm')

    # Act
    excel.run "Sheet1!WriteToA1"

    # Assert
    worksheet = excel.Workbooks.ActiveWorkbook
    assert_equal("blah", worksheet.Range("A1").Value)

    excel.Quit  
   end
end 
```

**例外**

我得到了这个例外

```
WIN32OLERuntimeError: (in OLE method `run': )
    OLE error code:800A03EC in Microsoft Excel
      Cannot run the macro 'Sheet1!WriteToA1'. The macro may not be available in this workbook or all macros may be disabled.
    HRESULT error code:0x80020009
      Exception occurred. 
```

[如此处所述，我已启用 Excel 中的](http://www.addictivetips.com/windows-tips/enable-all-macros-in-excel-2010/)所有宏。

Excel 正在启动，“Test.xlsm”已打开。这条线一定有问题：

```
excel.run "Sheet1!WriteToA1" 
```

我也试过这个：

```
excel.run "Sheet1!Module1.WriteToA1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T04:27:49.290

您需要提供 OLE 模块的只是宏名称

```
excel.run('WriteToA1') 
```

另请注意，如果您想运行带有争论的宏，请使用：

```
excel.run('MarcoWithArgs', "Arg") 
```

# javascript - 提示不是没有在脚本中显示

> ID：10963951
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:32:18.323
> 
> 标签：javascript, if-statement

请查看下面的代码并告诉我哪里做错了。当我在我的计算机上运行此脚本时，没有显示警报。我检查了很多次，但我不明白为什么这不起作用。

```
var day = prompt("Type any weekday name.");

if(day == "Monday") {
    alert("Go to School");
} else if(day == "Tuesday") {
    alert("Go to market")'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:33:38.533

语法高亮指出你的错误 - 由`'`你想要的地方引起的语法错误`;`（或没有，因为分号在 JavaScript 中通常是可选的）：

```
alert("Go to market")' 
```

更正：

```
alert("Go to market");
// or
alert("Go to market") 
```

# python - 返回字典中元组键的给定元素的最大值

> ID：10963952
> 
> 赞同：1
> 
> 时间：2012-06-09T19:32:23.003
> 
> 标签：python, dictionary, tuples

我有一个以元组为键的字典，我想获得可用的最大值，例如字典中当前元组键的第二个元素。例如，给定：

```
my_dict = {('a', 1):value_1, ('b', 1):value_2, ('a', 2):value_3, ('c', 3):value_4, ('b', 2):value_5} 
```

所以键的第二个元素的最大值是 3。

得出这个值的最快方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:34:20.863

任何一个：

```
largest_key = max(my_dict, key=lambda x: x[1]) 
```

或者：

```
from operator import itemgetter
largest_key = max(my_dict, key=itemgetter(1)) 
```

根据 DSM，`dict`直接迭代 a 比检索和迭代`keys()`or更快`viewkeys()`。

我认为 Zverina 女士正在谈论的是将您的数据结构从`dict`带`tuple`键转换为如下内容：

```
my_dict = {
    'a': {
            1: value_1,
            2: value_3
         }
    'b': {
            1: value_2,
            2: value_5
         }
    'c': {
            3: value_4
         }
} 
```

这样，如果你想用 找到所有值的最大值`a`，你可以简单地做：

```
largest_key = max(d['a']) 
```

无需额外费用。（您的数据已经划分为子集，因此您不必在每次搜索时都在构建子集上浪费计算）。

**编辑**

要将搜索限制在给定的子集，请执行以下操作：

```
>>> subset = 'a'
>>> largest_key_within_subset = max((i for i in my_dict if i[0] == subset), key=itemgetter(1)) 
```

where`(i for i in my_dict if i[0] == subset)`是只返回给定子集中的键的生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:36:03.057

如果您正在寻找最大值，即 3，请使用：

```
print max(my_dict.keys(), key = lambda x: x[1])[1] 
```

如果您正在从字典中寻找最大值，请使用以下命令：

```
my_dict = {('a', 1):'value_1', ('b', 1):'value_2', ('a', 2):'value_3', ('c', 3):'value_4', ('b', 2):'value_5'}

largest = max(my_dict.keys(), key = lambda x: x[1])
print my_dict[largest] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T19:37:09.690

如果您没有关于任何集合中元素之间的任何关系的其他信息（例如在这种情况下的字典中的键），那么您必须检查每个元素 => 复杂性`O(n)`（线性） - 唯一的改进可以是使用一些内置函数，例如`max`

如果您经常需要获取（或弹出）最大值，请考虑不同的结构（如`heap`）。

# silverlight - 在 MVVM Silverlight 应用程序中将月份编号更改为月份名称

> ID：10963953
> 
> 赞同：1
> 
> 时间：2012-06-09T19:32:43.563
> 
> 标签：silverlight, mvvm, silverlight-5.0

另一个 MVVM 问题

我的 Clip 表有一个名为 Month 的字段。这是一个月的数字

我有一个网格，它通过 RIA 服务显示此表中的数据

而不是显示用户月份编号，我需要向他们显示名称，即而不是 1 显示一月

使用 MVVM 的正确方法是什么？

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:36:38.843

您可以通过将数字转换为名称的[IValueConverter来处理此问题。](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:41:07.600

如果您的字段是 DateTime，您还可以使用 Binding StringFormat：http: [//msdn.microsoft.com/fr-fr/library/system.windows.data.bindingbase.stringformat.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.data.bindingbase.stringformat.aspx)

这允许指定字符串格式选项，如短日期、长日期等...

# javascript - Uncaught TypeError: Object # has no method 'ready'

> ID：10963957
> 
> 赞同：0
> 
> 时间：2012-06-09T19:33:14.437
> 
> 标签：javascript, jquery

我正在尝试在网站中实现一个简单的 javascript（网站在 weebly 上），但我收到了这个错误。在 chrome 的资源选项卡中，我可以看到它正在加载所有脚本。这是一段代码：

```
<script type="text/javascript" src="/files/theme/cufon-yui.js"></script>
<script type="text/javascript" src="/files/theme/cufon-yanone-250.js"></script>
<script type="text/javascript" src="/files/theme/script.js"></script>
<script type="text/javascript" src="/files/theme/coin-slider.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    $('#coin-slider').coinslider();

});

</script> 
```

这一切都安装在 .html 文件的底部。这是一个硬币滑块画廊。

有人出来帮助我吗？

* * *

*从评论...*

我正在加载 jQuery `<head>`...

```
<script src="ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"; type="text/javascript"></script>` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:45:42.917

您在`src`.

```
 <!----------v------->
<script src="ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"; type="text/javascript"></script> 
```

你至少需要...

```
//ajax.googleapis.com/... 
```

否则...

```
http://ajax.googleapis.com/... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:47:21.177

似乎 object`$`不是 jQuery 对象，而是另一个直接返回 DOM 对象的函数。所以，可能你有另一个与 jQuery 冲突的库。

从 jquery 的文档中，您可以使用[jQuery.noConflict解决它](http://api.jquery.com/jQuery.noConflict/)

从问题编辑编辑：

你必须在你的 jquery 中指定协议包括

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script> 
```

`src`值后不带分号

# python - 寻找一个接一个单词的方法，Python

> ID：10963966
> 
> 赞同：0
> 
> 时间：2012-06-09T19:33:46.240
> 
> 标签：python, string

只有当它不是引号（单引号或双引号或任何三引号）并且拼写正确（无法获得类 d() ）时，您如何创建一个函数来获取“类”之后的单词

```
"class hi()"  > hi

"class hi(dff)"  > hi

"class hi   (  dff  )  :"  > hi 

"  class        hi       (  dff  )  :"  > hi 

"class hi"  > hi

"classf hi"  > Nothing

"fclass hi"  > Nothing

"'class hi(dd)'"  > Nothing

'"class hi(dd)"'  > Nothing

"'''class hi(dd)'''"  > Nothing

'"""class hi(dd)"""'  > Nothing

'"""\n\n\n\nclass hi(dd)\n\n\n\n"""'  > Nothing    

"'class' hi()"  > Nothing 
```

使用循环创建太难了。如果有人可以提供帮助，那就太好了，谢谢。这个很有挑战性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T19:54:34.953

像这样的东西，也许？

```
from StringIO import StringIO
from tokenize import generate_tokens
from token import NAME

def classname(s):
    g = generate_tokens(StringIO(s).readline)   # tokenize the string
    it = iter(g)
    for toknum, tokval, _, _, _  in it:
        if (toknum == NAME and tokval == 'class'):
            return it.next()[1]

print classname("class hi(29):") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T19:43:54.173

```
import re

def remove(reg, s, multiline=False):
    flags = [re.M, re.M | re.DOTALL][multiline]
    s,num = re.subn(reg, "", s, flags=flags)
    return s

def classname(s):
    s = remove("\"\"\".*?\"\"\"", s, multiline=True)
    s = remove("\'\'\'.*?\'\'\'", s, multiline=True)
    s = remove("\".*?\"", s)
    s = remove("\'.*?\'", s)

    res = re.search("(^|\s)class\s+(\w+)", s, flags=re.M)
    # print "*** {} -> {}".format(s, res.groups() if res else None)
    if res is None:
        return None
    else:
        return res.group(2) 
```

我想使用 \b 而不是 (^|\s) 但它似乎不想工作？

我还整理了以下测试代码：

```
tests = [
    ("class hi()", "hi"),
    ("class hi(dff)", "hi"),
    ("class hi   (  dff  )  :", "hi"),
    ("  class        hi       (  dff  )  :", "hi"),
    ("class hi", "hi"),
    ("classf hi", None),
    ("fclass hi", None),
    ("'class hi(dd)'", None),
    ('"class hi(dd)"', None),
    ("'''class hi(dd)'''", None),
    ('"""class hi(dd)"""', None),
    ('"""\n\n\n\nclass hi(dd)\n\n\n\n"""', None),   
    ("'class' hi()", None),
    ("a = ''; class hi(object): pass", "hi")
]

def run_tests(fn, tests=tests):
    for inp,outp in tests:
        res = fn(inp)
        if res == outp:
            print("passed")
        else:
            print("FAILED on {} (gave '{}', should be '{}')".format(inp, repr(res), repr(outp))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T19:42:43.447

使用正则表达式：

```
pattern = re.compile(r"\s*class\s+(\w+)") 
```

例如：

```
>>> line_to_test = "  class        hi       (  dff  )  :" 
>>> match = pattern.match(line_to_test)
>>> match
<org.python.modules.sre.MatchObject object at 0x3>
>>> match.groups()
('hi',) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T19:48:13.970

1.  删除所有用引号括起来的子字符串（即`'`，`"`和`'''`或`"""`）。
2.  使用正则表达式来匹配表达式“class (name of class here)”。

您可能需要调整正则表达式以正确匹配类名的所有有效 Python 标识符：

```
import re
m = re.match("class ([\w]+)", "class hi")
print m.group(0) 
```

# android - ActionBarSherlock 的主题不起作用

> ID：10963970
> 
> 赞同：1
> 
> 时间：2012-06-09T19:34:30.953
> 
> 标签：android, android-actionbar, actionbarsherlock

我似乎无法使用 ABS 或标准 ActionBar 获得动作按钮的主题。尽管`selectableItemBackground`在我的主题中使用，它仍然使用蓝色突出显示而不是请求的红色突出显示。但是，SearchView 中的丢弃按钮似乎可以正常工作（参见附图）。

我确定我错过了一些简单的东西，有人知道吗？！

Pressed Action Buttons 使用此高亮显示： ![显示错误的亮点](../Images/dc60bb726042b61e5a0993edb0a97001.png)

当他们应该使用这个时： ![显示正确的突出显示](../Images/9c3961915e534d7f6a653f94e19a4680.png)

这是我正在使用的风格：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>
    <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
    <item name="android:fastScrollThumbDrawable">@drawable/fastscroll</item>
    <item name="android:editTextStyle">@style/Widget.Styled.EditText</item>
    <item name="android:selectableItemBackground">@drawable/selectable_background</item>
</style> 
```

**更新**

using`<item name="android:actionBarItemBackground">@drawable/selectable_background</item>`似乎有效，但这不是 Nick Butcher关于主题的[文章所使用的。](http://android-developers.blogspot.co.uk/2011/04/customizing-action-bar.html)这是可以接受的/会破坏什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T20:26:59.680

那篇文章是为 Android 3.0 编写的，并且针对 Android 4.0 更改了属性，这就是您看到行为差异的原因。

使用`actionBarItemBackground`现在是更改操作项背景的正确方法。

如果您使用 ActionBarSherlock，请记住您需要`android`在主题中同时使用 -prefixed 和 non-prefixed 版本，以便它在所有 API 级别上工作。

# django - django-mediagenerator 和 CDN

> ID：10963972
> 
> 赞同：1
> 
> 时间：2012-06-09T19:34:39.203
> 
> 标签：django, web-services, cdn, amazon-cloudfront, django-mediagenerator

我正在使用 django-mediagenerator 来管理静态文件。这很棒，但我想弄清楚如何将静态文件放在内容交付网络上。我将使用亚马逊 AWS。

在我看来，我可以做以下两件事之一：

*   将文件上传到 CDN，并配置 mediagenerator/django 指向 CDN 的 url
*   将文件上传到 CDN 并配置 Apache 以提供来自 CDN 的文件

然而，这两个都没有让我觉得特别直截了当。

其中一种解决方案听起来比另一种更好吗？有不同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:22:29.157

我遇到了同样的挑战，并选择使用 Django 的“collectstatic”管理命令使用 django-storages 和 python-boto 将文件上传到 AWS：

```
STATICFILES_DIRS = (
    os.path.join(CURRENT_DIR, '_generated_media'),
)
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 
```

然后，我将 django-mediagenerator 指向适用的 S3 存储桶：

```
PRODUCTION_MEDIA_URL = 'http://bucketname.s3.amazonaws.com/static/' 
```

我认为 django-mediagenerator 在运行 generatemedia 命令时没有内置方式使用自定义存储后端，尽管这将是最好的解决方案，恕我直言。

# objective-c - 为什么在预期使用 ARC 时不调用类 dealloc？

> ID：10963974
> 
> 赞同：0
> 
> 时间：2012-06-09T19:35:04.193
> 
> 标签：objective-c, xcode, cocoa-touch, automatic-ref-counting, dealloc

我有一个 UIView 子类，在这个子类中我称之为另一个 UIView 子类。

星星.h

```
@interface Stars : UIView {

    BOOL _gained;

}

@property (nonatomic, weak) id<NSObject> delegate;
@property (nonatomic) BOOL gained;

-(void)animateAndRemove;

@end 
```

星星.m

```
#import "Stars.h"

@implementation Stars

@synthesize delegate = _delegate;
@synthesize gained = _gained;

- (id)initWithFrame:(CGRect)frame
{
    frame.size.width = 31;
    frame.size.height = 30;
    self = [super initWithFrame:frame];
    if (self) {
        _gained = NO;
        self.backgroundColor = [UIColor clearColor];

        // Add star
        UIImageView *star = [[UIImageView alloc] initWithFrame:frame];
        [star setImage:[UIImage imageNamed:@"star-sticker"]];
        [self addSubview:star];

    }
    return self;
}

- (void)animateAndRemove
{
    [UIView animateWithDuration:0.2
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{
                         CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);
                         self.transform = transform;
                     }
                     completion:^(BOOL finished){
                         [UIView animateWithDuration:0.3
                                               delay:0
                                             options:UIViewAnimationOptionCurveLinear
                                          animations:^{
                                              CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);
                                              self.transform = transform;
                                              CGAffineTransform move = CGAffineTransformMakeTranslation(0, -200);
                                              self.transform = move;
                                              self.alpha = 0.0;
                                          }
                                          completion:^(BOOL finished){
                                              if ([self.delegate respondsToSelector:@selector(removeStar:)]) {
                                                  [self.delegate performSelector:@selector(removeStar:) withObject:self];
                                              }
                                          }];
                     }];
}

- (void)dealloc
{
    NSLog(@"%s",__FUNCTION__);
}

@end 
```

这只是添加了一个图像，我在删除之前对其进行了动画处理。我将其添加到原始 UIView 中，如下所示：

```
star1 = [[Stars alloc] init];
star1.center = self.center;
star1.delegate = self;
[self addSubview:star1]; 
```

并使用这样的动画开始删除过程：

```
if (CGRectIntersectsRect(thumbR, star1.frame)) {
        if (!star1.gained) {
            star1.gained = YES;
            [star1 animateAndRemove];
        }
    } 
```

完成时调用：

```
- (void)removeStar:(Stars *)star
{
    star.delegate = nil;
    [star removeFromSuperview];
    star = nil;
} 
```

现在，当类从Superview 中删除并设置为 nil 时，不会调用 dealloc 中的 NSLog。为什么不？

实际上，我在将这个 Stars 类加载到的第一个 UIView 中看到了同样的情况。当我认为它应该时，那个也没有释放。当我通过 alloc 重新分配包含 UIView 并再次对其进行初始化时，这两个 dealloc 方法都被完整调用。

当它被从视图中删除并设置为 nil 时，我期望它解除分配是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:45:28.653

考虑你的`removeStar`：

```
- (void)removeStar:(Stars *)star
{
   star.delegate = nil;
   [star removeFromSuperview];
   star = nil;
} 
```

这必须从某处调用，调用方式如下：

```
[<some object reference> removeStar:<some Stars reference>] 
```

现在变量`star`in`removeStar`是该方法的*本地变量。*当方法被调用时，这个变量被初始化为传入的`Stars`引用——所以你有一个*额外*的引用。`removeStar`除了调用者所拥有的引用之外，还指向调用`Stars`该方法的实例。

然后，当您分配`nil`给此*局部*变量时，您只会删除此附加引用。的调用者`removeStar`仍然有它的参考。所以没有`dealloc`。

**猜测**：调用者`removeStar`可能是实例的所有者，也需要删除它的引用。

# c# - 我应该如何使用 MSMQ？

> ID：10963980
> 
> 赞同：3
> 
> 时间：2012-06-09T19:35:57.387
> 
> 标签：c#, msmq

我编写了这段代码，但它让我开始思考应该如何使用 MSMQ：我应该使用“使用”语句来获取消息队列吗？Using 语句将在我完成队列时处理它，但我什么时候完成它？我应该保存我的 MessageQueue 对象以供重用。假设这是在 ASP.Net 应用程序中，我想从同一个操作将 3 条消息发送到同一个队列。像我现在一样保存对象并重用或创建和处置？

```
using (MessageQueue msgQueue = new MessageQueue(this.queueName))
{
    using (MessageQueueTransaction msgTx = new MessageQueueTransaction())
    {                      
        Message recoverableMessage = null;
        msgTx.Begin();
        try
        {
            recoverableMessage = new Message();
            recoverableMessage.Body = message;
            recoverableMessage.Formatter = new BinaryMessageFormatter(System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple, System.Runtime.Serialization.Formatters.FormatterTypeStyle.TypesAlways);
            recoverableMessage.Recoverable = true;

            msgQueue.Send(recoverableMessage, msgTx);
            ////this.msgQ.Send(recoverableMessage, msgTx); //whats up here??? this will teach me for taking time off. not sure whuc I shuold use
            msgTx.Commit();
            result = recoverableMessage.Id;
            //recoverableMessage.Dispose();
        }
        catch (Exception)
        {
            msgTx.Abort();
            ////recoverableMessage.Dispose();
        }
        finally
        {
            if (recoverableMessage != null)
            {
                recoverableMessage.Dispose();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:15:15.730

通常，您应该使对象的存活时间尽可能短。这是为了防止 .NET 垃圾收集器将这些对象从第 0 代移动到第 1 代，依此类推。这将有助于减少内存消耗和垃圾收集的数量。

话虽如此，保持消息队列对象处于活动状态的唯一原因是将多条消息作为单个事务或范围的一部分发布到同一个队列。

如果这三个消息是在单个页面请求期间发送的，那么您将创建一个消息队列的新实例，发送消息并在每次呈现页面时处理队列。

**编辑**
有关线程安全等的详细信息，您应该参考文档。
例如，[MSDN](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.aspx)说只有`GetAllMessages`方法是线程安全的。然后我会假设 API 的其余部分不是线程安全的。但是，这仅意味着`MessageQueue`不应由多个线程同时访问对象的单个实例。您可以创建多个`MessageQueue`指向同一个队列的实例。

关于性能，我认为您可能正在尝试过早地进行优化。我建议分析您的软件（仅发布版本）并将其置于一些负载下。只有这样，您才能得到可靠的答案。

# java - 在Java中如何使溢出文本转到下一行

> ID：10963987
> 
> 赞同：1
> 
> 时间：2012-06-09T19:36:48.887
> 
> 标签：java

我有一个长字符串，不适合我放置的 JPanel。文本比 JPanel 宽度记录器。我不能将“\n”放到字符串中来破坏字符串，事实上我无法控制字符串的长度和内容。它是用户输入的字符串。我想要做的是当我将文本放在 JPanel 上时，我希望任何不适合 JPanel 的文本流入下一行。

这有点难以解释。如果您需要更多详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:44:38.517

从快速的谷歌搜索中，我读到，从逻辑上讲，所有操作系统都有不同的换行符，并且由于 Java 与平台无关，您需要首先使用以下方法找到相对分隔符：

```
lineSeparator = (String) java.security.AccessController.doPrivileged(new sun.security.action.GetPropertyAction("line.separator")); 
```

然后将您的字符串与`lineSeparator`

例如：

```
JLabel label = new JLabel("Hello"+lineSeparator+"world"); 
```

这种方法未经我尝试和测试，只是我的研究结果。

至于处理溢出文本，我个人的经验是在超出框架之前找到字符的最大长度，然后添加`lineSeparator`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T20:04:12.110

将您的文本放在`<html></html>`标签中就可以了。长行将自动换行。

```
JLabel label = new JLabel("<html>"+ reallyLongString + "</html>");  
label.setPreferredSize(new Dimension(1, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T20:19:49.023

尝试改用 JTextPane，它会为您处理自动换行。

```
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;

public class Wordwrap extends JFrame {

    public Wordwrap() {
        String s = "I have a long string which doesn't fit to the JPanel i am putting it. text is logger than the JPanel width. I can not put \n to the string to break the string, in fact i don't have the control over the length and content of the string. It user inputted string. What i want to do is when i am putting the text on JPanel i want any text that doesn't fit in to the JPanel to flow in to the next Line.";

        JTextPane textPanel = new JTextPane();
        textPanel.setText(s);
        textPanel.setPreferredSize(new Dimension(500, 100));

        JPanel p = new JPanel();
        p.add(textPanel);
        getContentPane().add(p);
        this.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setVisible(true);
        pack();
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                new Wordwrap();
            }
        });
    }
} 
```

# php - 如何显示带有 Pinterest 等文本的网格？

> ID：10963988
> 
> 赞同：0
> 
> 时间：2012-06-09T19:36:50.160
> 
> 标签：php, upload, grid, pinterest

我想显示一个带有文本的网格，就像 Pinterest 对图像所做的那样。我的网站是一个新闻提要网站，用户可以上传文本。

显示和从数据库中获取文本的代码是：

```
<?php

//connect

mysql_connect("host","username","password") or die(mysql_error());
mysql_select_db("database_name") or die(mysql_error());

//query the database
$getnews = mysql_query("SELECT * FROM news ORDER BY id DESC") or die(mysql_query());

while ($row = mysql_fetch_assoc($getnews))
{

    //get data
    $id = $row['id'];
    $title = $row['title'];
    $body = $row['body'];
    $date = $row['date'];

    echo "
    <b>$title posted on $date</b><br>
    ";

    echo nl2br($body);

    echo "<hr>
    ";

}

?> 
```

发布文本的代码如下：

```
<?php

  //insert category to database
  if(isset($_POST['qty'])) {
    // Fetch and clean the <select> value.
    // The (int) makes sure the value is really a integer.
    $qty = (int)$_POST['qty'];

    // Create the INSERT query.
    $sql = "INSERT INTO `table`(`quantity`)
            VALUES ({$qty})";

    // Connect to a database and execute the query.
    $dbLink = mysql_connect('host', 'username', 'password') or die(mysql_error());
              mysql_select_db('database_name', $dbLink) or die(mysql_errno());

    $result = mysql_query($sql);

    // Check the results and print the appropriate message.
    if($result) {
        echo "Record successfully inserted!";
    }
    else {
        echo "Record not inserted! (". mysql_error() .")";
    }
}

     if ($_POST['post'])
{
    //get data
    $title = $_POST['title'];
    $body = $_POST['body'];

    //check for existance
    if ($title&&$body)
    {
        mysql_connect("host","username","password") or die(mysql_error());
        mysql_select_db("database_name") or die(mysql_error());

        $date = date("Y-m-d");

        //insert data
        $insert = mysql_query("INSERT INTO news VALUES ('','$title','$body','$date')") or die(mysql_error());

        die("Your text has been posted!");

    }
    else
        echo "Please fill out your name and text<p>";
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T19:40:23.567

只需将结果编写为简单`<ul><li>`元素并使用 CSS 设置样式即可。不要费心用 PHP 来创建布局。

之后，您可以使用[jQuery Masonry](http://masonry.desandro.com/)插件创建类似 Pinterest 的布局。

您的“结果显示”代码将如下所示：

```
echo '<div id="grid">';
while ($row = mysql_fetch_assoc($getnews))
{

    //get data
    echo '<div class="item">';
    $id = $row['id'];
    $title = $row['title'];
    $body = $row['body'];
    $date = $row['date'];

    echo "<b>$title posted on $date</b>";

    echo nl2br($body);

    echo "</div>";

}
echo "</div>"; 
```

更改后，您的最终 HTML 将如下所示：

```
<div id="grid">
  <div class="item">...</div>
  <div class="item">...</div>
  <div class="item">...</div>
  ...
</div> 
```

从给定地址下载 jQuery Masonry 并将其包含在您的页面中，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/path/to/jquery.masonry.min.js"></script> 
```

项目的所有大小都由您的 CSS 处理。项目应该是浮动的。

```
.item {
  width: 220px;
  margin: 10px;
  float: left;
} 
```

最后，在页面加载后调用 Masonry：

```
$(function(){
  $('#grid').masonry({
    // options
    itemSelector : '.item',
    columnWidth : 240
  });
}) 
```

;

# f# - 如何使用 WebSharper 在服务器上为 Google 可视化生成数据

> ID：10963989
> 
> 赞同：2
> 
> 时间：2012-06-09T19:36:53.840
> 
> 标签：f#, websharper

我的目标是能够在服务器上为 Google Visualizations 生成数据，然后将其作为 java 脚本传递给客户端，以便将其呈现为折线图。我下面的示例编译正确，但在浏览器中呈现时会产生错误。在服务器上构建 DataCommon 对象后，我需要做什么才能正确呈现为 java 脚本？

```
namespace Website

open System

type Action =
    | Test

module Page =
    open System.Web
    open IntelliFactory.WebSharper.Sitelets
    open IntelliFactory.WebSharper.Html

    let Page title body : Content<Action> =       
        PageContent (fun context -> 
            { Page.Default with
                Title = Some(title)
                Body = body context
            })

module Chart =
    open System

    open IntelliFactory.WebSharper
    open IntelliFactory.WebSharper.Html
    open IntelliFactory.WebSharper.Google
    open IntelliFactory.WebSharper.Google.Visualization
    open IntelliFactory.WebSharper.Google.Visualization.Base
    open IntelliFactory.WebSharper.EcmaScript

    open IntelliFactory.WebSharper.Web

    let RandomData () =

        let random = new Random()

        let valueCount = 100
        let maxValue = 300
        let seriesCount = random.Next(5)

        let data = new Base.DataTable()
        data.addRows(valueCount)
        |> ignore        

        let addSeries index =
            let name = sprintf "Series %d" index
            data.addColumn(ColumnType.NumberType, name)
            |> ignore

            Seq.init valueCount (fun index -> random.Next(maxValue))
            |> Seq.iteri (fun valueIndex value -> data.setValue(index, valueIndex, value) |> ignore)

        [0 .. seriesCount]
        |> List.iter addSeries

        data        

    type LineChart( data : DataCommon, title ) =    
        inherit Web.Control()

        [<JavaScript>]
        override this.Body = 
            let div = 
                Div [] 
                |>! OnAfterRender (fun container ->
                    let visualization = new Visualizations.LineChart(container.Dom)
                    let options = {
                        Visualizations.LineChartOptions.Default with
                            width = 400.0
                            height = 240.0
                            legend = Visualizations.LegendPosition.Bottom
                            title = title
                    }
                    visualization.draw(data, options))
            div :> _

module Site =
    open Chart
    open Page

    open IntelliFactory.Html
    open IntelliFactory.WebSharper.Sitelets

    let TestPage =
        Page "Test" (fun (context : Context<Action>) -> 
        [
            Div [Text "Test"]
            Div [new Chart.LineChart(RandomData(), "Test Chart")]
        ])            

    let Main =
        Sitelet.Sum [
            Sitelet.Content "/" Test TestPage
        ]

open IntelliFactory.WebSharper.Sitelets
type Website() =    
    interface IWebsite<Action> with
        member this.Sitelet = Site.Main
        member this.Actions = [Test]

[<assembly: WebsiteAttribute(typeof<Website>)>]
do () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:49:19.780

您的`RandomData`函数在服务器上运行。因此，您正在服务器上构建纯 JavaScript`DataTable`对象 - 这样做的结果通常是未定义的。

你应该：

1.  用 标记生成数据的服务器端函数`[<Remote>]`。
2.  将 UI 构造移至带注释的客户端代码`[<JavaScript>]`。
3.  从客户端调用远程函数——这将使用 AJAX 来获取数据。最好使用`async.Return`远程功能，以免阻止浏览器。

查看[远程处理](http://websharper.com/samples/Remoting)页面或手册的相关部分以获取更多信息。

或者，您可以将数据传递给`Control`对象的构造函数并从`Body`成员访问它。这将在 HTML 生成期间序列化数据并避免需要 AJAX 调用 - 例如，这对于生成静态 HTML 站点很有用。

# mysql - SQL 查询将我的自动增量列 ( id ) 设置为零或重置自动增量字段的值

> ID：10963990
> 
> 赞同：2
> 
> 时间：2012-06-09T19:36:55.303
> 
> 标签：mysql, auto-increment, reset

我想要一个可以将mysql数据库中的自动增量值设置为0的查询。

就我而言，我希望将名为“id”的列重置为 0。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T19:39:37.537

```
ALTER TABLE some_table AUTO_INCREMENT=0 
```

如果您想从表中删除所有记录并在 0 处重新启动自动索引，您可能会想运行 DELETE 查询，然后执行上面的示例，将自动增量值设置为 0。但是有一个快捷方式：

```
TRUNCATE TABLE some_table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:21:40.753

ALTER TABLE some_table AUTO_INCREMENT=0 不起作用

做： ALTER TABLE some_table AUTO_INCREMENT=1

（MySQL 版本：5.5.29）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T19:42:00.867

这应该这样做：

```
ALTER TABLE tablename_here AUTO_INCREMENT = value_here 
```

# java - 将 JPanel 插入 JOptionPane 并检索数据

> ID：10963994
> 
> 赞同：-1
> 
> 时间：2012-06-09T19:37:25.760
> 
> 标签：java, swing, jpanel, joptionpane, jradiobutton

我想问您如何将 JPanel 插入 JOptionPane 并稍后从这些 JTextFields 中检索所有信息。例如我有这样的事情：

```
JPanel jp = new JPanel();
jp.setLayout(new GridLayout(0,1);
JPanel up = new JPanel();
JPanel down = new JPanel();
jp.add(up);jp.add(down);
JTextField jt1 = new TextField("habababa1"); jt2 = new JTextField("habababa2");
JRadioButton jrb1 = new JRadioButton("JRB1");
up.add(jt1);down.add(jt2); down.add(jrb1); 
```

如何从 radioButton 等获取数据？在我点击确定后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:48:35.797

您需要实现一个事件列表器。这是来自[http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJRadioButtonEventswithaChangeListener.htm](http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJRadioButtonEventswithaChangeListener.htm)的片段：

```
import java.awt.GridLayout;

import javax.swing.AbstractButton;
import javax.swing.ButtonGroup;
import javax.swing.ButtonModel;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class JRadioButtonChangeListener {
  public static void main(String args[]) {
    JFrame frame = new JFrame("Grouping Example");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = new JPanel(new GridLayout(0, 1));

    ButtonGroup group = new ButtonGroup();
    JRadioButton aRadioButton = new JRadioButton("A");
    JRadioButton bRadioButton = new JRadioButton("B");

    ChangeListener changeListener = new ChangeListener() {
      public void stateChanged(ChangeEvent changEvent) {
        AbstractButton aButton = (AbstractButton)changEvent.getSource();
        ButtonModel aModel = aButton.getModel();
        boolean armed = aModel.isArmed();
        boolean pressed = aModel.isPressed();
        boolean selected = aModel.isSelected();
        System.out.println("Changed: " + armed + "/" + pressed + "/" +
          selected);
      }
    };

    panel.add(aRadioButton);
    group.add(aRadioButton);
    panel.add(bRadioButton);
    group.add(bRadioButton);

    aRadioButton.addChangeListener(changeListener);
    bRadioButton.addChangeListener(changeListener);

    frame.add(panel);
    frame.setSize(300, 200);
    frame.setVisible(true);
  }

} 
```

# javascript - JavaScript 的 CSS 解析器？

> ID：10963997
> 
> 赞同：26
> 
> 时间：2012-06-09T19:37:43.207
> 
> 标签：javascript, css, parsing, node.js

> **2018 年更新**：这个问题早在[PostCSS](https://postcss.org/)存在之前就被问到了，我可能会使用它。

我想将一堆 CSS 解析成 AST，这样我就可以为某些 CSS 指令添加前缀。

是否有用于 JavaScript 或 Node 的 CSS 解析器来执行此操作？

我已经搜索过 NPM。我发现的唯一有用的结果是[parser-lib](https://github.com/nzakas/parser-lib)，但它是基于流的，看起来我需要为每个 CSS 节点编写自己的发射器。

*更新：*我也找到[了 JCSSP](http://www.glazman.org/JSCSSP/)，但它没有文档......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T19:51:40.933

**更新：**我之前提到过 JCSSP，它似乎被放弃了。显然，NPM 上的[css 模块是最好的：](https://npmjs.org/package/css/)

```
css = require 'css'

input = '''
  body {
    font-family: sans-serif;
  }
  #thing.foo p.bar {
    font-weight: bold;
  }
'''

obj = css.parse input
sheet = obj.stylesheet

for rule in sheet.rules
  rule.selectors = ('#XXX ' + s for s in rule.selectors)

console.log css.stringify(obj) 
```

输出：

```
#XXX body {
  font-family: sans-serif;
}
#XXX #thing.foo p.bar {
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T03:36:29.583

另外值得一提的是[LESS](http://lesscss.org/)。虽然它主要是对 CSS 的（很棒的）扩展，但 LESS 解析器确实让您可以访问 AST。

纯 CSS 样式表也是有效的 LESS 样式表，因此您可以从现有的内容开始并轻松使用 LESS 的扩展。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-18T19:57:59.490

这是我们的开源 CSS 解析器[css.js](https://github.com/jotform/css.js)

这是一个简单的解析示例：

```
<script type="text/javascript">
    var cssString = ' .someSelector { margin:40px 10px; padding:5px}';
    //initialize parser object
    var parser = new cssjs();
    //parse css string
    var parsed = parser.parseCSS(cssString);

    console.log(parsed);
</script> 
```

编辑后将解析的数据结构字符串化为 CSS 字符串

```
var newCSSString = parser.getCSSForEditor(parsed); 
```

我们的 CSS 解析器的主要特点是：

*   它很轻。
*   它输出易于理解的 javascript 对象。没有复杂的 AST。
*   它经过实战测试（也经过单元测试）并经常用于我们的产品（[JotForm Form Designer](http://www.jotform.com/form-designer/)）。
*   它支持媒体查询、关键帧和字体规则。
*   它在解析时保留注释。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-12T06:18:57.827

值得一提的是，[JSDOM](https://github.com/tmpvar/jsdom)使用[CSSOM](https://github.com/NV/CSSOM)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-07T05:19:41.220

**无需使用外部 css 解析器，我们可以使用原生 css 解析器**

```
 var sheetRef=document.getElementsByTagName("style")[0];

console.log("----------------list of  rules--------------");
for (var i=0; i<sheetRef.sheet.cssRules.length; i++){

var sheet = sheetRef.sheet ? sheetRef.sheet : sheetRef.styleSheet;

if (sheet.cssRules.length > 0) {
//console.log(sheet.cssRules[i]);
  console.log(sheet.cssRules[i].selectorText);
  console.log(sheet.cssRules[i].cssText);

                }}
```

```
.red{

color:red;
}
```

**插入规则**

```
var sheetRef=document.getElementsByTagName("style")[0];
var sheet = sheetRef.sheet ? sheetRef.sheet : sheetRef.styleSheet;
sheet.insertRule('.foo{color:red;}', 0); 
```

**删除规则** 所有浏览器，版本 9 之前的 IE 除外

```
var sheetRef=document.getElementsByTagName("style")[0];
var sheet = sheetRef.sheet ? sheetRef.sheet : sheetRef.styleSheet;
sheet.removeRule (0); 
```

**删除规则** 所有浏览器，版本 9 之前的 IE 除外

```
var sheetRef=document.getElementsByTagName("style")[0];
var sheet = sheetRef.sheet ? sheetRef.sheet : sheetRef.styleSheet;
sheet.deleteRule (0); 
```

**添加媒体**

```
 function AddScreenMedia () {
            var styleTag = document.getElementsByTagName("style")[0];

                // the style sheet in the style tag
            var sheet = styleTag.sheet ? styleTag.sheet : styleTag.styleSheet;

            if (sheet.cssRules) {   // all browsers, except IE before version 9
                var rule = sheet.cssRules[0];
                var mediaList = rule.media;

                alert ("The media types before adding the screen media type: " + mediaList.mediaText);
                mediaList.appendMedium ("screen");
                alert ("The media types after adding the screen media type: " + mediaList.mediaText);
            }
            else {  // Internet Explorer before version 9
                    // note: the rules collection does not contain the at-rules
                alert ("Your browser does not support this example!");
            }
        }
```

```
 @media print {
            body {
                font-size: 13px;
                color: #FF0000;
            }
          }
```

```
some text
<button onclick="AddScreenMedia ();">Add screen media</button>
```

**获取规则**

```
 var sheetRef=document.getElementsByTagName("style")[0];

console.log("----------------list of  rules--------------");
for (var i=0; i<sheetRef.sheet.cssRules.length; i++){

var sheet = sheetRef.sheet ? sheetRef.sheet : sheetRef.styleSheet;

if (sheet.cssRules.length > 0) {
//console.log(sheet.cssRules[i]);
  console.log(sheet.cssRules[i].selectorText);
  console.log(sheet.cssRules[i].cssText);

  console.log(sheet.cssRules[i].style.color)
  console.log(sheet.cssRules[i].style.background)
    console.log(sheet.cssRules[i].style)

                }}
```

```
.red{

color:red;
background:orange;
}
```

```
<h1>red</h1>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-23T23:31:19.793

### 编辑

我最终使用了这个对于我的实现来说足够轻的库（在`Kemal Dağ`的答案中提供）。其他选项对于我所追求的客户端实现来说太重了。

[https://github.com/jotform/css.js](https://github.com/jotform/css.js)

### 原创内容

`a paid nerd`的原始答案在我点击媒体查询之前效果很好。

我不得不添加一些递归，这就是我最终得到的。

请原谅我的 TypeScript。

## 打字稿实现

```
private scopeCSS(css: string): CSS.Stylesheet {
  let ast: CSS.Stylesheet = CSS.parse(css);
  let stylesheet: CSS.StyleRules|undefined = ast.stylesheet;
  if (stylesheet) {
    let rules: Array<CSS.Rule|CSS.Media> = stylesheet.rules;
    let prefix = `[data-id='sticky-container-${this.parent.id}']`;

    // Append our container scope to rules
    // Recursive rule appender
    let ruleAppend = (rules: Array<CSS.Rule|CSS.Media>) => {
      rules.forEach(rule => {
        let cssRule = <CSS.Rule>rule;
        let mediaRule = <CSS.Media>rule;
        if (cssRule.selectors !== undefined) {
          cssRule.selectors = cssRule.selectors.map(selector => `${prefix} ${selector}`);
        }
        if (mediaRule.rules !== undefined) {
          ruleAppend(mediaRule.rules);
        }
      });
    };

    ruleAppend(rules);
  }
  return ast;
} 
```

## Babel'ized Vanilla JS 实现

```
function scopeCSS(css, prefix) {
  var ast = CSS.parse(css);
  var stylesheet = ast.stylesheet;
  if (stylesheet) {
    var rules = stylesheet.rules;
    // Append our container scope to rules
    // Recursive rule appender
    var ruleAppend = function(rules) {
      rules.forEach(function(rule) {
        if (rule.selectors !== undefined) {
          rule.selectors = rule.selectors.map(function(selector) {
            return prefix + " " + selector;
          });
        }
        if (rule.rules !== undefined) {
          ruleAppend(rule.rules);
        }
      });
    };
    ruleAppend(rules);
  }
  return ast;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-09T19:40:30.103

[http://www.glazman.org/JSCSSP/](http://www.glazman.org/JSCSSP/)

[http://jsfiddle.net/cYEgT/](http://jsfiddle.net/cYEgT/)

`sheet`有点像 AST。