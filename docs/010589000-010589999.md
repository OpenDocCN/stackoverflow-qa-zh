# StackOverflow 问答 10589000-10589999

# mysql - shell脚本mysql输出转换

> ID：10589000
> 
> 赞同：1
> 
> 时间：2012-05-14T18:29:28.277
> 
> 标签：mysql, regex, shell

我有一个脚本可以将我的 mysql 数据库与另一台服务器同步/输出。

我知道如何在 shell 中调用这个 SQL 查询。但是，是否可以将此脚本的输出从 php 转换为 shell 脚本以保持下面显示的格式（基本上由“|”和一些 URL 分隔的值）？我需要这种特定格式的输出，如下所示：

```
$sql=mysql_query("SELECT a, b, c, d, e FROM tableA LEFT JOIN tableB USING (a)");

while ($res=mysql_fetch_array($sql))
              {
                echo $res['a']."|".$res['b']."|".$res['c']."|http://www.url.com/".$res['e']."/".$res['a'].".php|http://www.url.com/link/".urlencode($res['b'])."\n";
              } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:41:25.823

您可以使用从命令行传递给 mysql 的简单查询来完成所有这些连接：

```
mysql -u username -ppassword -D dbname << eof
SET sql_mode='STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,PIPES_AS_CONCAT';
SELECT a || '|' || b || '|' || c || '|http://www.url.com/' || e || '/' || a || '.php|http://www.url.com/link/' || b AS joinedColum FROM tableA LEFT JOIN tableB USING (a);
eof 
```

第一个 SET，在 MySQL 中将管道设置为 concat 运算符，这样您就可以使用 SQL 标准双管道连接字符串，而不是使用烦人的 CONCAT 函数……之后，结果集是直接在 SQL 查询中的字符串连接。通过这种方式，您可以从 bash 脚本执行此命令，而无需安装 php 解释器...

# php - PHP中这两种类构造函数有什么区别？

> ID：10589001
> 
> 赞同：7
> 
> 时间：2012-05-14T18:29:45.867
> 
> 标签：php, class, constructor

`__construct`使用构造函数和使用类名作为构造函数时，PHP 类到底有什么区别？

例如：

```
class Some
{
     public function __construct($id)
     {
           ....
     }
     ....
} 
```

或者

```
class Some
{
      public function Some($id)
      {
            ....
      }
      ....
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T18:30:49.493

顶部是 PHP 5.0 版本的新方式，也是所有新代码的编写方式。后者是旧的 PHP 4 方式并且已过时。在某些时候，它将被完全弃用并从 PHP 中完全删除。

**更新**

[从 PHP 5.3.3 开始](http://php.net/manual/en/language.oop5.decon.php)，与命名空间类名的最后一个元素同名的方法将不再被视为构造函数。此更改不会影响非命名空间类。

```
<?php
namespace Foo;
class Bar {
    public function Bar() {
        // treated as constructor in PHP 5.3.0-5.3.2
        // treated as regular method as of PHP 5.3.3
    }
}
?> 
```

# c# - 使用购物车中继器

> ID：10589009
> 
> 赞同：2
> 
> 时间：2012-05-14T18:30:33.067
> 
> 标签：c#, asp.net, mysql

我一直在思考如何解决特定问题。我需要创建一个购物车页面，用户可以在其中设置数量或从购物车中删除该特定商品。我决定使用Repeater。并且值是从数据库中获取的

我的代码如下

```
<asp:Repeater ID="RepeatStatus" runat="server" OnItemDataBound="RepeatStatus_ItemDataBound" onitemcommand="Button_ItemCommand" EnableViewState="False">
                   <HeaderTemplate><tr style="color: #FFFFFF; background-color: #3D7169">
                    <td>Product Name</td>
                    <td>Quantity</td>
                    <td>Price</td>
                    <td>Total</td>
                    </tr></HeaderTemplate>
                   <ItemTemplate>
                        <tr>
                        <td><%#DataBinder.Eval(Container,"DataItem.ProductName")%></td>
                        <td><asp:TextBox ID="txtQty" runat="server" Height="23px" Width="50px" Text=<%#DataBinder.Eval(Container,"DataItem.Quantity")%>></asp:TextBox><br />
                        <asp:LinkButton runat="server" ID="btnRemove" Text="Remove" CommandName="Remove" CommandArgument='<%# Eval("CDetailsID") %>' style="font-size:12px;"></asp:LinkButton>
                        </td>                                             
                        <td><asp:Label ID="lblPrice" runat="server" Text=<%#DataBinder.Eval(Container,"DataItem.Price")%>></asp:Label></td>
                        <td><asp:Label ID="lblTotal" runat="server"></asp:Label></td>
                        </tr>
                    </ItemTemplate>
                    <FooterTemplate>
                    <br />
                        <tr style="color: #FFFFFF; background-color: #6C6B66">
                        <td colspan="4" class="cartTotal">Final Price: </td>
                        </tr>
                        <tr><td colspan="4">
                    <asp:Label ID="lblEmptyData" Text="No Data Found" runat="server" Visible="false" Font-Bold="True">
                                    </asp:Label></td></tr>
                                    <tr><td colspan="4">
                        <asp:Button ID="btnUpdate" runat="server" Text="Update" /> 
                        </td></tr>      
                               </FooterTemplate>
                </asp:Repeater> 
```

我背后的代码是这个

```
 protected void RepeatStatus_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        int q;
        decimal p = 0, t = 0;
        int j = RepeatStatus.Items.Count;
        if (RepeatStatus.Items.Count > 0)
        {
            foreach (RepeaterItem ri in RepeatStatus.Items)
            {
                if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
                {
                    Label price = (Label)e.Item.FindControl("lblPrice");
                    TextBox qty = (TextBox)e.Item.FindControl("txtQty");
                    Label total = (Label)e.Item.FindControl("lblTotal");
                    q = Convert.ToInt32(qty.Text);
                    p = Convert.ToDecimal(price.Text.Substring(1));
                    t = (p * q);
                    total.Text = "$" + t.ToString();
                }
            }
        }

        if (RepeatStatus.Items.Count < 1)
        {
            if (e.Item.ItemType == ListItemType.Footer)
            {
                Label lblFooter = (Label)e.Item.FindControl("lblEmptyData");
                lblFooter.Visible = true;
                Button btnU = (Button)e.Item.FindControl("btnUpdate");
                btnU.Visible = false;
            }
        }
    } 
```

出于某种我一直在努力寻找的原因，第一条记录永远不会计算产品的子定价。但第二条及以后的记录将正确显示该值。我做错了什么还是应该将其更改为使用 Datalist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:24:01.730

`ItemDataBound`为列表中的每个项目调用，因此您需要将计算限制为仅该项目，而不是所有项目，就像您现在所做的那样。其次，您似乎是从呈现的数据元素中获取值，而不是数据项本身。如果可以的话，在绑定到`Repeater`（或`GridView`其他`ListView`人建议的）之前计算服务器上的总数。

# java - Spring 3.1.1.RELEASE 数据绑定：验证提交的表单时出错

> ID：10589017
> 
> 赞同：3
> 
> 时间：2012-05-14T18:31:04.993
> 
> 标签：java, spring, validation, spring-mvc

自从将我的 web 应用程序从 Spring 3.0.5 升级到 3.1.1 后，在验证我的表单 bean 时，我不得不面对一些严重的错误。我之前配置的验证器不再像他们应该的那样工作。问题是来自 Class ***org.springframework.validation.Errors的方法******getFieldValue(String fieldname)***没有像它应该（和以前一样）返回原始绑定的 bean 值。

 *这就是我的 form-b​​ean 的样子：

```
public class PersonBean extends BaseFormBean {

private String firstname; // getters and setter omitted...

    private String lastname; // getters and setter omitted...

    private Integer age; // getters and setter omitted...

    public PersonBean() {}

    @Override
    public void validateForm(Errors errors) {
        WebValidationUtils.rejectIfEmptyOrWhitespace(errors, "firstname", "validator.requiredvalidator.lbl", "field required");
        WebValidationUtils.rejectIfEmptyOrWhitespace(errors, "lastname", "validator.requiredvalidator.lbl", "field required");      
        WebValidationUtils.rejectInvalidIntValue(errors, "age", "validator.std.age", "invalid age", false);
    }
} 
```

被调用的 WebValidationUtils 类有一些检查 bean 属性的标准方法。该错误仅发生在非字符串值上，例如整数类型的属性年龄。它也发生在集合上。

以下代码段显示了如何在我的 utils-class 中验证整数值：

```
import org.springframework.validation.Errors;
...

public abstract class WebValidationUtils {
...
    public static void rejectInvalidIntValue(Errors errors, String field, String errorCode, String defaultMessage){
        Assert.notNull(errors, "Errors object must not be null");
        Object value = errors.getFieldValue(field); // returns the string value (type: java.lang.String)
                Class<?> fieldType = errors.getFieldType(field); // returns the class Integer!
        if (value == null || !value.getClass().equals(Integer.class) || ((Integer)value).intValue() <= 0){
                errors.rejectValue(field, errorCode, null, defaultMessage);
        }
    }
} 
```

bean 本身具有正确的值绑定......

我是否必须在我的 context-servlet.xml 中配置一些额外的 spring bean 来实现与 3.0.5 中相同的行为？

编辑：方法“getFieldValue（...）”的官方[Spring Doku说](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/Errors.html#getFieldValue%28java.lang.String%29)

> 返回给定字段的当前值，可以是当前 bean 属性值，也可以是上次绑定的拒绝更新。

所以我不知道为什么这个方法返回一个字符串值而不是整数类型的传播 bean 值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:04:46.973

好像你有一个绑定错误，所以`getFieldValue()`返回`FieldError.getFieldValue()`导致绑定错误的值。这是预期的行为。

您可以改为使用获取持有该属性的值`getRawFieldValue()`。此方法始终使用`PropertyAccessor`.*

# php - 如何将 ajax 添加到 wordpress 主题

> ID：10589018
> 
> 赞同：8
> 
> 时间：2012-05-14T18:31:07.730
> 
> 标签：php, mysql, wordpress, jquery

我有一个问题困扰了好几天......我正在尝试使用一个简单的 ajaxPOST 函数将数据发送到 MySQL 数据库（而不是 WP 数据库）。

此代码位于主题中的“single-post.php”中，因为必须在每次发布之前检查它。

```
$.ajax({ url: 'library/functions/admin_checkuser.php',
     data: {action: userID},
     type: 'post',
     success: function(output) {
                  alert(output);
     }
}); 
```

我只是将一个变量发送到“admin_checkuser.php”脚本，该脚本又调用另一个对数据库执行操作的脚本。

这是“admin_checkuser”的代码：

```
$userid = $_POST['action'];

echo $userid;//for testing
$oMySQL = new MySQL();
$query = "Select * FROM videotable WHERE uid = '$userid'";
$oMySQL->ExecuteSQL($query);
$bb = $oMySQL->iRecords;
$aa = $oMySQL->aResult;
echo $bb;

if ($bb == 0){
$query = "INSERT INTO videotable VALUES ('','$userid','true')";
$oMySQL->ExecuteSQL($query);
echo 'true';
    exit();

}else{
$sharing = mysql_result($aa,0,"share");
echo $sharing;
exit();

} 
```

但我不认为电话会通过脚本。这些脚本在 WordPress 之外进行了测试并且确实有效，因此它必须是 WordPress 中阻止 ajax 调用的东西。顺便说一句，我尝试将“admin_checkuser.php”放在许多不同的文件夹中，但没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-14T19:13:00.580

你最好使用内置的 Wordpress AJAX 请求。

因此，在您的主题`functions.php`文件中，添加要调用的函数，例如：

```
function checkUser() {

    $userid = $_POST['user']; //validation also :)
    $oMySQL = new MySQL();
    $query = "Select * FROM videotable WHERE uid = '$userid'";
    $oMySQL->ExecuteSQL($query);
    $bb = $oMySQL->iRecords;
    $aa = $oMySQL->aResult;
    echo $bb;

    if ($bb == 0){
    $query = "INSERT INTO videotable VALUES ('','$userid','true')";
    $oMySQL->ExecuteSQL($query);
    echo 'true';
        exit();

    } else {
    $sharing = mysql_result($aa,0,"share");
    echo $sharing;
    exit();

    }
} 
```

之后，你添加你的钩子连接到内置的 AJAX 系统

```
add_action('wp_ajax_check_user', 'checkUser');
add_action('wp_ajax_nopriv_check_user', 'checkUser'); 
```

`wp_ajax_nopriv_%s`允许从前端调用它。

然后，在您的 javascript 文件中，您只需触发您的 ajax 请求。

```
$.post(ajaxurl, { action: 'check_user', user: userId }, function(output) {
     alert(output);
 }); 
```

如果`ajaxurl`未定义，则需要在模板文件中创建它，类似这样的方法应该可以，但还有其他方法。

```
add_action('wp_head','ajaxurl');
function ajaxurl() {
?>
<script type="text/javascript">
var ajaxurl = '<?php echo admin_url('admin-ajax.php'); ?>';
</script>
<?php
} 
```

wordpress 的后端完成了剩下的工作。

它接受 AJAX 请求中传递的操作，查找相应的``wp_ajax(_nopriv)_%s`钩子，然后调用分配给钩子的函数。

它还将根据 AJAX 请求的类型传入`$_POST`或传入。`$_GET`

您可以阅读更多关于[在 Wordpress 中使用 AJAX 的信息](http://codex.wordpress.org/AJAX_in_Plugins)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T18:52:18.623

您应该检查您的 ajax 调用的 url。

也许使用完整的 url 而不是相对的。

这可能是因为您的主题的位置使 url 不正确。我假设您的 ajax 代码在您的主题文件夹中。

有一些 wordpress 函数可以获取主题目录。

例如，如果您在此页面`http://yourwebpage/test/`，那么 ajax 调用将转到此处`http://yourwebpage/test/library/functions/admin_checkuser.php`。我认为这将是不正确的位置。

这就是为什么您需要将绝对 url 添加到脚本中的原因。如果它在您的主题中，您可以使用此方法`get_template_directory_uri()`获取模板目录。

见这里：[http ://codex.wordpress.org/Function_Reference/get_template_directory_uri](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)

# ajax - Pinterest 类型的图片库

> ID：10589020
> 
> 赞同：0
> 
> 时间：2012-05-14T18:31:25.060
> 
> 标签：ajax, image, jquery, picturebox, picturegallery

我正在寻找一个基于 ajax 的图片库，它可以加载类似于 php 文件的内容

> pinterest.com

.

当我们单击缩略图时，无需重新加载页面，就会创建一个新的 div 元素，其中包含沿 html/php 页面的图像

# c# - w3wp.exe 中出现未处理的 win32 异常

> ID：10589029
> 
> 赞同：12
> 
> 时间：2012-05-14T18:32:05.920
> 
> 标签：c#, asp.net, asp.net-mvc, iis-7.5, com-interop

尝试加载 ASP.NET MVC 网站时出现以下异常：

> w3wp.exe 中 0x07070a91 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

Visual Studio 即时调试器打开，我可以在调试器中看到的唯一信息是：

> **调用堆栈位置：**
> 
> msvbvm60.dll!06c00a91()

该网站使用了一些 COM 对象，直到上周一切正常。这个问题突然出现了。

这是来自 Windows 事件查看器的错误日志：

> 错误应用程序名称：w3wp.exe，版本：7.5.7601.17514，时间戳：0x4ce7a5f8
> 错误模块名称：MSVBVM60.DLL，版本：6.0.98.15，时间戳：0x4a5bda6c
> 异常代码：0xc0000005
> 错误偏移：0x00030a91
> 错误进程 id：0x1a0
> 错误应用程序启动时间：0x01cd31fcb47f66d8
> 错误应用程序路径：C:\Windows\SysWOW64\inetsrv\w3wp.exe
> 错误模块路径：C:\Windows\system32\MSVBVM60.DLL
> 报告 ID：f5db0ae3-9def-11e1-ad79-005056c00008

您有什么建议可以帮助解决此问题吗？

**编辑：**我设法解决了这个问题，现在一切正常。该解决方案涉及调整自定义 dll 正常运行所需的一些注册表设置。所以这个问题实际上并没有突然出现，我只是没有意识到一些注册表值被修改了，这导致了一个 com dll 崩溃。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-31T09:54:31.040

在 IIS 管理器中打开为应用程序提供服务的应用程序池的高级设置对话框，并设置：**启用 32 位应用程序**为***True***

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-21T20:16:08.037

您在上面提供的信息不足以提供根本原因，但是如果您可以提供有关异常的更多信息，您可能会得到此失败的确切原因。您要求提供解决此问题的建议，因此它们是：

您可以使用以下 3 种工具中的任何一种来解决此问题：

1.  IIS调试诊断工具v1.2

    以下是有关如何使用此工具的更多信息：http: [//support.microsoft.com/kb/919790](http://support.microsoft.com/kb/919790)

2.  调试诊断

    使用下面的链接了解如何将 w3wp 进程（它是用户模式进程）与 DebugDiag 挂钩并收集有关崩溃的更多信息：

    [http://msdn.microsoft.com/en-us/library/ff420662.aspx](http://msdn.microsoft.com/en-us/library/ff420662.aspx)

3.  WinDBG

    这是一个链接，它将帮助您在 WinDBG 中加载 W3WP 进程并使用一些命令来提取有关崩溃的更多信息：

    [http://blog.whitesites.com/Debugging-Faulting-Application-w3wp-exe-Crashes__634424707278896484_blog.htm](http://blog.whitesites.com/Debugging-Faulting-Application-w3wp-exe-Crashes__634424707278896484_blog.htm)

获得有关异常的更多信息后，您可以在上面添加并获得及时帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-15T13:43:32.103

请执行下列操作，

1) 授予 Temp 和 %temp% 文件夹的完全权限

2) 转到应用程序池属性并将“启用 32 位应用程序”更改为 true

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T01:16:19.610

当此问题再次发生时，您可以先捕获故障转储，

[http://support.microsoft.com/kb/2580960](http://support.microsoft.com/kb/2580960)

第 1 步是使用 Debug Diag 1.2 正确设置崩溃规则。

获得转储后，如果您熟悉转储分析，则可以使用 WinDbg（Windows 调试工具的一部分）对其进行分析。

如果您无法分析，我的建议是您通过[http://support.microsoft.com](http://support.microsoft.com)打开支持案例并与 Microsoft 支持工程师共享转储。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-27T12:16:03.420

就我而言，安装了一个名为“Web Companion”的程序。

卸载后，问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T10:32:45.640

**我的解决方案是如果你想在 64 位上构建它：**

调试 ==> 选项 ==> 搜索 iis ==> 启用 64 位版本的 IIS Express

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-11-26T20:20:34.423

在我的情况下，它发生是因为代码上有一个**无限循环**。

# coldfusion - 限制分页列表上的页数

> ID：10589034
> 
> 赞同：3
> 
> 时间：2012-05-14T18:32:24.097
> 
> 标签：coldfusion, paging

我正在改进网站的分页系统，但遇到了一些我似乎无法解决的简单问题。我试图一次显示页面（1 2 3 4 5），当用户到达第 5 页时，列表更改为（4 5 6 7 8）。我怎么能用 cfloop 做到这一点？这是我的代码示例：

```
<cfloop from="1" to="#totalPages#" index="i">
<cfoutput><a class="paging" href="?start=#(i*25)-24#">#i#</a></cfoutput> 
</cfloop> 
```

目前它同时显示第 1 - 54 页。有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:50:08.283

这是我的代码

```
<cfset curPage = Int(start / 25) + 1>

<cfloop from="1" to="#totalPages#" index="i">
  <cfif i is curPage>
    <div class="page current">#i#</div>
  <cfelse>
    <cfif totalPages lte 5 or i is 1 or i is totalPages or (i gt curPage - 3 and i lt curPage + 3) or ((curPage is 1 or curPage is 2) and i lt 6) >
      <div class="page"><a href="?start=#(i*25)-24#">#i#</a></div>
    <cfelse>
      <cfif i is 2 or i is totalPages - 1>
        <div class="more">...</div>
      </cfif>
    </cfif>
  </cfif>
</cfloop> 
```

这段代码的作用是显示前 5 页，然后是省略号，然后是最后一页。当您翻阅它时，它将始终显示指向第一页和最后一页的链接，以及当前页面之前和之后的 2 页。

截图：第 1![第 1 页](../Images/ddb5077ef098c23457dc051cc595fad2.png)页和第 10 页![在此处输入图像描述](../Images/38f6edbacc4aa68cbeadc4c7c705de60.png)

您应该能够轻松地修改它以完全按照您的需要工作。（我碰巧不喜欢所有链接都按照您描述的方式立即更改）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:14:25.977

有一个很棒的开源分页库可以解决您的问题。我不能说太多关于它的好东西，因为*我写了它*。无耻，我知道。无论如何：

[http://www.dopefly.com/projects/pagination/](http://www.dopefly.com/projects/pagination/)

查看文档，它们非常完整且很有帮助。在您的代码中，打印页码就像调用`#pagination.getRenderedHTML()#`. 它是非常可定制的，因此您可以更改打印的数字，并且可以根据自己的喜好设置输出样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:52:55.887

怎么样：

```
<cfloop from="#url.startpage#" to="#url.startpage+4#" index="i">
  <cfif i LE totalpages>
    <cfoutput><a class="paging" href="?start=#(i*25)-24#">#i#</a></cfoutput> 
  </cfif>
</cfloop> 
```

当然，您需要将“startpage”添加到您的 url 并适当地操作它。所以你的第一个链接是 startpage=1 但你的最后一个链接是 startpage=4 （如果我正确理解你的问题）。

# git - 如何设置 git repos 和分支来为 3rd 方项目做出贡献？

> ID：10589038
> 
> 赞同：2
> 
> 时间：2012-05-14T18:32:28.787
> 
> 标签：git, github

我有一个依赖于 github 上托管的第 3 方开源项目的应用程序（我们称之为“https://github.com/3rd-party-org/3rd-party-lib”。这个项目有一个“master”分支和多个特定于版本的分支（例如“xy”、“xz”）。

我希望能够偶尔向开源项目提交修复，同时在我的开发机器上维护本地分支（a）与第 3 方项目的分支保持同步，并且（b）包含我的修复，包括那些我还没有提交到第 3 方项目，以及我已经提交但尚未被接受和合并的那些（也许永远不会，但我需要这些更改以供我自己使用）。

我对 git 很陌生，我想在这里正确地下车。

这就是我的想法，请告知这是否有意义或是否有更好的选择。

作为初始设置：

*   将“https://github.com/3rd-party-org/3rd-party-lib”克隆到我的本地开发环境
*   在我的本地仓库中，从每个第 3 方定义的分支创建分支，例如从“master”分支“my-master”，从“xy”分支“my-xy”等。
*   在 github 上 fork 3rd 方 repo（例如到“https://github.com/me/3rd-party-lib”），所以我有一个地方来推送修复，并且我可以从中向 3rd 发送拉取请求库维护者。

当我想修复第 3 方项目时，我会（在我的本地开发环境中）：

*   通过从 origin/master 拉取确保“master”是最新的
*   将“master”合并为“my-master”
*   从“master”创建一个主题分支（例如“issue-123”）
*   准备好后，将我的主题分支推送到我在 github 上的分叉存储库，并向 3rd 方项目提交拉取请求
*   回到我的本地环境中，将我的主题分支合并到“my-master”中，以便在针对“my-master”构建我的依赖项目时，我会看到我的所有修复。
*   如果适用，通过从“my-master”中挑选它们将我的修复反向移植到“my-xy”或“my-xz”分支，这样我就可以针对特定版本的库而不是“my-master”进行构建如果我不想生活在最前沿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:57:54.330

这取决于 3rd 方库如何接受拉取或补丁。有些人会接受来自直接分叉的拉取请求，而其他人会要求您使用分支。还有一些人可能不接受拉取请求，并要求补丁来自其他来源。

除了将补丁返回给第 3 方的细节之外，您似乎正走在获得最大灵活性的正确道路上。

# linq - Linq：从其他组中选择第一项

> ID：10589039
> 
> 赞同：0
> 
> 时间：2012-05-14T18:32:37.543
> 
> 标签：linq

我正在尝试编写一个查询来从组中只找到一项，它们按行业和重量分组，然后从这个我必须得到重量最大和平衡最大的地方这是示例：

```
var data = new[] {
new {ID = 1, Industry = 2, Weight = 2, Balance = 500}, 
new {ID = 2, Industry = 2, Weight = 2, Balance = 300}, 
new {ID = 3, Industry = 2, Weight = 1, Balance = 100},
new {ID = 5, Industry = 4, Weight = 1, Balance = 100}, 
new {ID = 6, Industry = 4, Weight = 2, Balance = 150}, 
new {ID = 7, Industry = 4, Weight = 1, Balance = 300},
};

var res = from a in data group a by new {a.Industry, a.Weight} into g
let ID = g.First().ID
let Balance = g.Max(a => a.Balance)
select new { ID, g.Key.Industry, g.Key.Weight, Balance};
Console.WriteLine(res); 
```

所以结果我应该只得到两条记录

```
ID   Industry   Weight   Balance
1      2           2      500
6      4           2      150 
```

但是通过上面的查询，我得到了 4 条记录有什么建议吗？

问候， 德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:42:06.897

可能有许多不同的解决方案，但一种是仅按行业分组并根据您的“第一个要选择的元素”标准对每个组进行排序，然后选择每个组中的第一个项目。

```
var res = from item in data
    group item by item.Industry into g
    let first = g.OrderByDescending(x => x.Weight)
                  .ThenByDescending(x => x.Balance).First()
    select first; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:45:10.950

```
data.GroupBy(x=>new {x.Industry,x.Weight})
    .ToDictionary(y=>y.Key,y=>y.ToList().Max(x=>x.Balance)); 
```

如果您不想要字典，那么您也可以选择新的 DTO 或动态对象，如下所示：

```
data.GroupBy(x=>new {x.Industry,x.Weight})
    .Select(x=>new {x.Key.Industry,x.Key.Weight,x.ToList().Max(y=>y.Balance)}); 
```

希望这就是你所需要的。

# ruby-on-rails - 扩展带有关注点的 Rails 模型

> ID：10589047
> 
> 赞同：0
> 
> 时间：2012-05-14T18:33:07.650
> 
> 标签：ruby-on-rails, ruby, model

我有这个文件`models/extensions/url.rb`：

```
module Extensions
  module Url
    extend ActiveSupport::Concern

    included do
    end

    module ClassMethods
      def acts_as_url(attribute)
      end
    end

    module InstanceMethods
    end
  end
end 
```

然后我可能有一个看起来像这样的模型：

```
class Post
  include Mongoid::Document
  include Mongoid::Timestamps
  include Extensions::Url

  acts_as_url :title

  field :title, :type => String
end 
```

我可以在扩展模块中的哪个位置进行设置，以便每个实例都有一个调用的方法/访问器`url`，以便我可以访问该`:title`字段（作为属性参数传递）并能够执行以下操作：

```
post = Post.find(params[:id])
puts post.url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:42:01.813

只需在模块内部和模块外部定义您的`url`方法。在那里定义的任何东西都将作为实例方法添加。`Url``ClassMethods`

您可以将它放在您的`InstanceMethods`模块中，但 Rails 最近更新`ActiveSupport::Concern`为将`ClassMethods`模块之外的任何内容视为实例方法。

# c# - 框架无法识别

> ID：10589048
> 
> 赞同：0
> 
> 时间：2012-05-14T18:33:15.967
> 
> 标签：c#, selenium, webdriver

C# 的 Selenium 2 webdriver 无法找到框架“nav_bottom”，但它可以识别框架“top”。我正在 Firefox 12 中进行测试。标记如下所示..top 大多数框架集没有 id 或 name 属性

```
<frameset>
    <frame id ="top">
    <frameset id="bottom">
        <frame id="nav_bottom"> 
```

我通过对在给定时间可见的帧进行故障排除解决了这个问题。感谢您的帮助。

```
 ReadOnlyCollection<IWebElement> frames1 = driver.FindElements(By.TagName("frame"));

    Console.Write("total frames " + frames1.Count);

    foreach ( IWebElement frame in frames1)
        {
            Console.WriteLine("focus is on main frame  " + frame.GetAttribute("id"));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T05:13:40.780

您可能需要驱动程序首先将焦点切换到框架。尝试摆弄：

```
driver.SwitchTo().Frame(the frame IWebElement); 
```

尝试将每一帧作为 IWebElement，希望这会有所帮助。

# javascript - 二维对象/将数组关联到三维对象Javascript

> ID：10589049
> 
> 赞同：0
> 
> 时间：2012-05-14T18:33:18.153
> 
> 标签：javascript, arrays, object, associative-array

无论如何要形成这个

```
var stateDat = {
ME: ['Maine',1328361],
etc.
}; 
```

对此

```
var stateDatHistory = {
1:[
  ME: ['Maine',1328361],
  etc.
  ],
2:[
  ME: ['Maine',1328361],
  etc.
  ],
etc
}; 
```

动态地在一个函数中？例如，这不起作用……</p>

```
turn = 1;

function start(){
stateDatHistory[turn].push(stateDat);
stateDat['ME'][1]= stateDat['ME'][1] - 500; //changing population
turn++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:51:29.157

它的历史部分可能是一组对象。所以...

```
var stateDatHistory = [
   { ME: ['Maine', 1328361] }
]; 
```

或者，如果您需要通过键引用历史中的每个“步骤”，它可能是一个对象，其数组值包含对象......

```
var stateDatHistory = {
    1: [
        { ME: ['Maine', 12334] }
    ]
} 
```

在后一种情况下，“开始”代码将类似于...

```
turn = 1

function start() {
    if (typeof stateDatHistory[turn] === 'undefined') {
        stateDatHistory[turn] = [];
    }
    stateDatHistory[turn].push(stateDat);
    stateDat['ME'][1]= stateDat['ME'][1] - 500; //changing population
    turn++;
} 
```

说了这么多，我想提一下，使用一个对象来包含所有这些状态数据将是一个不错的决定。例如考虑...

```
// Define our manager
var stateDatManager = function() { };
(function(instance) {

    instance.init = function() {
        // Setup internal state
        this.history = {};
        this.turn = 0;
        this.initialized = true;
    };

    instance.start = function(turn, data) {
        if (!this.initialized) { this.init(); }
        this.turn = turn;
        this.addToHistory(data);
    };

    instance.addToHistory(data) {
        if (typeof this.history[this.turn] === 'undefined') {
            this.history[this.turn] = [];
        }
        this.history[this.turn].push(data);
    };

    instance.advanceTurn() {
        this.turn += 1;
    };

}(stateDatManager.prototype));

// Use it
var manager = new stateDatManager();
manager.start(1, [
    { ME: ['Maine', 1328361] }
]);

// Move to the next turn...
manager.advanceTurn();

// etc. 
```

# java - 在 JTable 中显示 MySQL 日期时间

> ID：10589050
> 
> 赞同：0
> 
> 时间：2012-05-14T18:33:19.943
> 
> 标签：java, mysql, swing, datetime, date

在 MySQL 数据库中，我有一个包含 datetime 列的 ta 表，其格式为“2012-01-18 09:45:30”。我使用以下语法查询此表的内容：

```
Statement s = conn.createStatement();
s.executeQuery( "select * from db_name.tbl_name;");
ResultSet rs = s.getResultSet();
ResultSetMetaData = rs.getMetaData();
int numberOfColumns = metaData.getColumnCount();

//Put Column Header info in Vector
Vector columnNames = new Vector();
for (int column = 0; column < numberOfColumns; column++) {
    columnNames.addElement(metaData.getColumnLabel(column+1));
}

//Put sql table data in Vector of Vectors
Vector data = new Vector();
while (rs.next()) {
    Vector newRow = new Vector();
    newRow.addElement(rs.getObject(i));
}
s.close();
rs.close();
DefaultTableModel model = new DefaultTableModel(data,columnNames);
JTable table = new JTable(model);
JScrollPane pane = new JScrollPane(table); 
```

如果我不覆盖 DefaultTableModel 中的 getColumnClass，则 MySQL 日期时间列在 JTable 中显示为以下格式的字符串：

```
2012-01-18 09:45:30 
```

如果我使用以下语法获取 datetime 列的类名，则返回的类是 java.sql.Timestamp

```
System.out.println(metaData.getColumnClassName(i)); 
```

现在，这是让我感到困惑的部分。如果我使用以下语法覆盖 DefaultTableModel 中的 getColumnClass 方法以返回正确的类，则 datetime 列的格式和显示如下：

```
Jan 18,2012 
```

请注意，时间部分被完全省略。

```
@override
public Class getColumnClass(int column) {
    for (int row = 0; row < getRowCount(); row++) {
        Object o = getValueAt(row, column);
        if (o != null) {
            try {
                switch (metaData.getColumnClassName(column+1)) {
                    case "java.sql.Timestamp":
                        return java.sql.Timestamp.class;
                    case "java.sql.Date":
                        return java.sql.Date.class;
                } 
            }
            catch (SQLException ex) {
                Logger.getLogger(ResultSetToCheckBoxTable.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    return Object.class;
} 
```

此外，如果我尝试显示 java.sql.Date 列，它将显示为具有以下格式的字符串：

```
2012-01-18 
```

无论我是否覆盖 GetColumnClass 以返回正确的类。

如何显示`java.sql.Date`为：`Jan 18, 2012`并`java.sql.TimeStamp`显示日期和时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:10:35.170

`TableCellRenderer`只需为两个类创建一个完全按照您的喜好格式化`Timestamp`/实例的类。`Date`查看[Swing table 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，尤其是[“概念：编辑器和渲染器”](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)和[“使用自定义渲染器”](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:09:33.457

您可以改写`DefaultTableModel.getValueAt()`并执行以下操作：

```
private static DateFormat dateFormatter =
    DateFormat.getDateInstance();
private static DateFormat timestampFormatter =
    DateFormat.getDateTimeInstance();            

...

public Object getValueAt(int row, int column) {
    Object value = super.getValueAt(row, column);
    if (value instanceof Date) {
        synchronized (dateFormatter) {
            dateFormatter.format((Date)value);
        }
    }
    else if (value instanceof Timestamp) {
        synchronized (timestampFormatter) {
            timestampFormatter.format((Date)value);            
        }
    } else {
        return value;
    }
} 
```

# algorithm - 优化此基于查询的搜索

> ID：10589054
> 
> 赞同：0
> 
> 时间：2012-05-14T18:33:39.447
> 
> 标签：algorithm, bit-manipulation

我们有两个 N 位数（0< N< 100000）。我们必须对这些数字执行 q 次查询（0< q<500000）。查询可以有以下三种类型：

*   set_a idx x：将 A[idx] 设置为 x，其中 0 <= idx < N，其中 A[idx] 是 A 的第 idx 个最低有效位。

*   set_b idx x：将 B[idx] 设置为 x，其中 0 <= idx < N。

*   get_c idx：打印C[idx]，其中C=A+B，0<=idx

现在，我已尽我所能优化代码。

*   首先，我尝试为 a、b 和 c 使用一个 int 数组。对于每次更新，我计算 c 并在查询时返回第 i 位。这该死的慢。仅清除 4/11 测试用例。

*   我转而使用布尔数组。它比 int 数组方法快大约 2 倍。清除 7/11 测试用例。

*   接下来，我发现我不需要计算 c 来计算 A+B 的第 idx 位。我将从 idx 向右扫描 A 和 B，直到找到 a[i]=b[i]=0 或 a[i]=b[i]=1。如果 a[i]=b[i]=0，那么我只需从初始进位 =0 开始向左加到第 idx 位。如果 a[i]=b[i]=1，那么我只需从初始进位 =1 开始向左加到第 idx 位。这更快，但只清除了 8/11 测试用例。

*   然后，我想通了一次，我到达位置 i，a[i]=b[i]=0 或 a[i]=b[i]=1，然后我不需要加到第 idx 个位置。如果a[i]=b[i]=0，那么答案是(a[idx]+b[idx])%2，如果a[i]=b[i]=1，那么答案是(a[ idx]+b[idx]+1)%2。它快了大约 40%，但仍然只清除了 8/11 的测试用例。

现在我的问题是如何处理这 3 个“硬”测试用例？我不知道它们是什么，但程序需要> 3 秒才能解决问题。

这是代码：http: [//ideone.com/LopZf](http://ideone.com/LopZf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:43:14.390

这是一个看起来有点像您的算法的解决方案。我用字节来演示它，但当然你可以使用 32 位字轻松优化算法（我想你的机器现在有 64 位算术）。

```
void setbit( unsigned char*x,unsigned int idx,unsigned int bit)
{
   unsigned int digitIndex = idx>>3;
   unsigned int bitIndex = idx & 7;
   if( ((x[digitIndex]>>bitIndex)&1) ^ bit) x[digitIndex]^=(1u<<bitIndex);
}
unsigned int getbit(unsigned char *a,unsigned char *b,unsigned int idx)
{
   unsigned int digitIndex = idx>>3;
   unsigned int bitIndex = idx & 7;
   unsigned int c = a[digitIndex]+b[digitIndex];
   unsigned int bit = (c>>bitIndex) & 1;
   /* a zero bit on the right will absorb a carry, let's check if any */
   if( (c^(c+1))>>bitIndex )
   {
      /* none, we must check if there's a carry propagating from the right digits */
      for(;digitIndex-- > 0;)
      {
         c=a[digitIndex]+b[digitIndex];
         if( c > 255 ) return bit^1; /* yes, a carry */
         if( c < 255 ) return bit;   /* no carry possible, a zero bit will absorb it */
      }
   }
   return bit;
} 
```

如果您发现任何神秘的东西，请问。编辑：哎呀，我颠倒了零位条件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:32:24.363

一种可能的优化是替换

```
(a[pos]+b[pos]+carry)%2 
```

和

```
a[pos]^b[pos]^carry 
```

XOR 运算符 (^) 执行模 2 加法，从而不需要可能昂贵的 mod 操作 (%)。根据语言和编译器的不同，编译器可能会在执行 2 次幂的 mod 时为您进行优化。但是由于您正在进行微优化，因此只需进行简单的更改即可消除对在后面为您进行的优化的依赖场景。

[http://en.wikipedia.org/wiki/Exclusive_or](http://en.wikipedia.org/wiki/Exclusive_or)

这只是一个很容易提出的建议。正如其他人所建议的那样，使用压缩整数来表示您的位数组也可能会改善您的代码可能是最坏情况的测试。这将是最高有效位的 get_c 函数，对于所有其他位置，A 或 B（但不是两者）都为 1，需要扫描每个位位置到最低有效位以确定进位。如果您对位使用压缩整数，则所需操作的数量只有大约 1/32（假设为 32 位整数）。然而，使用压缩整数比使用简单的布尔数组（它实际上可能只是一个字节数组）要复杂一些。

[C/C++ 位数组或位向量](https://stackoverflow.com/questions/4604130/c-c-bit-array-or-bit-vector)

[将位数组转换为 uint 或类似的打包值](https://stackoverflow.com/questions/5732237/convert-bit-array-to-uint-or-similar-packed-value)

[http://en.wikipedia.org/wiki/Bit_array](http://en.wikipedia.org/wiki/Bit_array)

在 Stackoverflow 和网络上还有很多其他示例可以将整数用作位数组。

# html - IFrame 图像大小调整

> ID：10589055
> 
> 赞同：6
> 
> 时间：2012-05-14T18:33:45.653
> 
> 标签：html, iframe, compatibility

在任何现代浏览器中，当您访问图像 url（例如[http://i.imgur.com/xrM9q.jpg](http://i.imgur.com/xrM9q.jpg)）时，它会自动调整该图像的大小，并为您提供使用小放大镜“放大”的选项。iframe 并非总是如此：

```
<iframe src='http://i.imgur.com/xrM9q.jpg'> </iframe> 
```

如果您将 iframe 链接到图像，Firefox 会给出这个很好的行为：它开始表现得像`max-width: 100%; max-height: 100%`，然后您可以单击它来使其变大。

但是，在 Chrome 中，图像只是全尺寸的。尝试在 Chrome 和 Firefox 中打开[此示例。](http://jsfiddle.net/TXSKy/)

如何让 Chrome “智能”地处理图像？也就是说，默认行为是否显示放大镜光标并提供自动调整大小？

（澄清一下：我希望它在 Chrome 扩展程序中工作。到目前为止，我想出的唯一解决方案是在所有页面上放置一个内容脚本并手动更改页面上图像的样式。那个解决方案很糟糕，所以我'我希望有一种不那么 hacky 并且不会影响用户访问的每个页面的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T18:16:51.063

尝试使 iframe 引用另一个 html 文件，并在该 html 文件中放置带有宽度和高度约束的 img 标签。我认为它会以这种方式在大多数浏览器上运行。

# powershell - 如何在 PowerShell 中读取 ATOM XML

> ID：10589059
> 
> 赞同：1
> 
> 时间：2012-05-14T18:34:07.120
> 
> 标签：powershell, powershell-2.0, atom-feed

如何从 PowerShell 调用 System.ServiceModel.Syndication.SyndicationFeed？

我试图从 Powershell 读取 RSS 提要，并且需要遍历提要，我想知道该怎么做？

我找不到任何例子。

提前致谢！！拉玛尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:32:32.287

您真正想做的是使用 PowerShell 解析 XML。这一个班轮将为您提供此问题的条目：

```
((New-Object Net.Webclient).DownloadString("http://stackoverflow.com/feeds/question/10589059") -as [xml]).feed.entry 
```

它创建一个新的 Web 客户端，下载 URL，将其转换为 XML，然后将点添加到 XML 元素中（就像您在 PowerShell 中所做的那样）。

这是一个非常简单的单行程序，包含了 PowerShell 的许多功能。一个类似的例子出现在 Bruce Payette 的“PowerShell In Action”的开头

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:45:30.890

这是我在几秒钟内想到的：

```
$url = "http://stackoverflow.com/feeds/question/10589059"
[System.Reflection.Assembly]::LoadWithPartialName("System.ServiceModel") | Out-Null
[System.ServiceModel.Syndication.SyndicationFeed] $feed = [System.ServiceModel.Syndication.SyndicationFeed]::Load([System.Xml.XmlReader]::Create($url))
$feed | Get-Member 
```

# cordova - 样式类似于 HTML5 的 Phonegap 媒体插件/代码 并播放需要的多个 mp3

> ID：10589062
> 
> 赞同：0
> 
> 时间：2012-05-14T18:34:11.283
> 
> 标签：cordova

有没有人看过phonegap Media 对象的源代码或插件，该对象在网页中设置样式，例如带有控件的HTML5“AUDIO”标签。我有一个应用程序需要能够从同一页面中的 URL 播放多个 MP3。我们正在根据数据动态构建网页。我已经看过并且没有看到任何近距离的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:53:53.563

别再读我的心了！好吧，说真的，我正在我的科林斯侧项目中研究该功能。一探究竟。它仍处于早期阶段，但它会到达那里，也可以随意贡献。

[http://macdonst.github.com/corinthian/](http://macdonst.github.com/corinthian/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T18:44:46.213

如果您使用 HTML5 音频，您的应用可能会在后台切换歌曲时被发送到暂停模式。

我写了一个简单的 phonegap 插件（虽然没有 UI），你可以在这里找到 - [https://github.com/vadimf/phonegap-audio-payer](https://github.com/vadimf/phonegap-audio-payer)

# asp.net-mvc - IIS 中的 MVC 不向客户端发送脚本？

> ID：10589065
> 
> 赞同：1
> 
> 时间：2012-05-14T18:34:19.930
> 
> 标签：asp.net-mvc, iis

我已经在我自己的 IIS7（Windows 7）中设置了一个 MVC 网站，但是在文件夹 Scripts（即网站根目录）下没有找到文件？如果我将解决方案上传到虚拟主机或在 VS mini IIS 中运行它，它工作正常吗？

我在 web.config 中设置了这个：

```
<authorization>
  <allow users="*"/>
</authorization> 
```

我已将整个网站文件夹（带有子文件夹/子文件）的完全访问权限授予以下用户：**IIS_IUser、NETWOR SERVICES、IUSR。**

该站点由 ApplicationPoolIdentity 运行的 4.0 应用程序池运行。

我试过这个 url：localhost/Scripts/ 但这只会返回 404 错误。

检查资源管理器时，我可以看到有文件？

编辑：图像和 CSS 确实有效，但脚本文件夹和内容无效。我已经对权利进行了双重检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:45:08.683

你不是不小心忘记*安装*`Static`IIS的功能了吗？您可以在打开*Control Panel* > *Programs* > *Turn Windows features on or off* > *Internet Information Services* > *World Wide Web Services* > *Common HTTP Features*时启用此功能，确保选中*Static Content*之前的复选框。

截屏：

![IIS - 静态内容功能](../Images/4cd4be5265b9b51e65c64c25a56250c4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:22:12.597

我在运行 asp.net 的全新 Win 2k8 R2 服务器上遇到了同样的问题。

你有没有解决过这个问题？

如果发现 Scripts 文件夹上的正常 404 和 404 错误的标头不同，则使用 httpie：

```
HTTP/1.1 404 Not found
Content-Length: 0
Date: Wed, 19 Sep 2012 14:27:15 GMT
Server: Microsoft-HTTPAPI/2.0
Version: 11.0.11282.0 
```

与

```
HTTP/1.1 404 Not Found
Cache-Control: private
Content-Length: 5222
Content-Type: text/html; charset=utf-8
Date: Wed, 19 Sep 2012 14:21:32 GMT
Server: Microsoft-IIS/7.5 
```

对于任何其他随机文件夹。

目前正在调查是否是 SQL Server Reporting Services 阻止了它。...似乎没有

在服务器版本上搜索会打开 QlikView 论坛...安装在服务器上，所以现在调查...停止 QlikView 并修复它。

# fluent-nhibernate - “尝试在已添加时添加属性‘Id’。” - 两次实现自己的类时出错

> ID：10589066
> 
> 赞同：2
> 
> 时间：2012-05-14T18:34:21.767
> 
> 标签：fluent-nhibernate

我想要一个名为“Message”的映射类。这个类应该包括一个唯一的 id、标题、文本以及关于发送者和接收者的信息。我需要他们的用户 ID 和他们的名字，所以我创建了另一个名为“用户”的类。这个类包括这两个属性（稍后我将为这个类创建一些方法并在不同的类中使用它，所以我不能只使用类“消息”）。

这是我的代码

```
public class User
{
    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; }
}

public class Message
{
    public virtual Guid Id { get; set; }
    public User sender;
    public User receiver;
    public virtual string subject { get; set; }
    public virtual string text { get; set; }
}

public class MessageMap : ClassMap<Message>, IMappedEntity
{
    public MessageMap()
    {
        Id(x => x.Id, "MessageId");
        Map(x => x.sender.Id, "SenderId");
        Map(x => x.receiver.Id, "ReceiverId");
        Map(x => x.subject);
        Map(x => x.text);
    }
} 
```

如您所见，我只想保存发送者和接收者的用户 ID，而不是他们的姓名。因为 x.Id、x.sender.Id 和 x.receiver.Id 具有属性“Id”，所以我在数据库中为它们写了一个特定的名称。但是，如果我尝试加载该站点，则会出现此错误：*已添加时尝试添加属性“Id”。*，即使在我确定列的名称后它们不再是名为“Id”的属性...

你能给我一个提示我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:34:33.890

我终于找到了另一个解决方案：我将 Message-Map 的映射更改为：

```
public class MessageMap : ClassMap<Message>, IMappedEntity
{
    public MessageMap()
    {
        Id(x => x.Id);
        Component(
            x => x.sender,
            userId =>
            {
                userId.Map(x => x.Id, "senderId");
            }
        );
        Component(
            x => x.receiver,
            userId =>
            {
                userId.Map(x => x.Id, "receiverId");
            }
        );

        Map(x => x.subject);
        Map(x => x.text);

    } 
```

现在，我不必映射用户类，所以我没有只有我的用户 ID 的表。

我对使用 nHibernate 不太熟悉，所以我不确定这是否是解决问题的最佳方法，但在我看来，这比 Chev 提出的解决方案更适合我的问题（但我非常感谢您回答我！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:04:24.437

如下更改 MessageMap。

```
public class MessageMap : ClassMap<Message>, IMappedEntity
{
    public MessageMap()
    {
        Id(x => x.Id);
        References(x => x.Sender);
        References(x => x.Receiver);
        Map(x => x.subject);
        Map(x => x.text);
    }
} 
```

# ios - 基于 HTTPS 的 iOS 应用程序加密算法

> ID：10589069
> 
> 赞同：1
> 
> 时间：2012-05-14T18:35:00.003
> 
> 标签：ios, encryption, encoding

我只是想让我的服务器通信更安全，那么我应该使用哪种加密算法通过 HTTPs 发送用户名/密码/安全令牌？我经历了 3DEC、BlowFish、ROT，但我不确定我应该使用哪一个。我们是否有任何标准的算法苹果遵循，可用于服务器通信？

谢谢你的帮助，--阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:03:59.703

HTTPS 专门设计用于：

1.  使用加密来防御数据包嗅探
2.  使用权威机构签署的证书来防御 MITM

因此，除非您认为 HTTPS 做错了，并且我们都有权发表自己的意见，否则在其之上添加加密是没有意义的（对我而言）。

话虽如此，Diffie-Helmann（可选加上 AES）是在两个对等方之间加密的一种方式。解决 MITM 攻击的唯一方法是使用带外通信，这本质上是权威签名所做的。还有其他方法可以实现这一点，例如使用“秘密”发布应用程序，或者利用用户的密码来加密从服务器到客户端的数据。这取决于您的用例和威胁模型。

# jsf - 在 PrimeFaces 中应用主题

> ID：10589071
> 
> 赞同：6
> 
> 时间：2012-05-14T18:35:10.333
> 
> 标签：jsf, jsf-2, primefaces

我在我的项目中使用 PrimeFaces 3.1。我在应用主题时遇到问题。我将dark-hive-1.0.3.jar 添加到项目中并配置`web.xml`如下。

```
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>dark-hive</param-value>
</context-param> 
```

当我运行项目时，出现以下异常。

> javax.faces.FacesException：加载主题时出错，找不到“primefaces-dark-hive”库的“theme.css”资源

这个问题是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T18:52:32.603

它需要放在`/WEB-INF/lib`webapp 的文件夹中。如果您使用的是 IDE，请不要摆弄项目的“构建路径”属性。只需将 JAR 放到`/WEB-INF/lib`文件夹中，就会触发所有 IDE 魔法来执行必要的任务。

# java - 有没有现成的 Java 库可以通过 TCP 传输图像？

> ID：10589079
> 
> 赞同：2
> 
> 时间：2012-05-14T18:35:40.970
> 
> 标签：java, android, sockets, tcp, adb

我正在尝试制作一个 Android 应用程序（供私人使用），它基本上允许我将设备显示屏用作 Windows 的第二个显示屏。我想出了如何获取我必须发送到设备的图像。我想出了如何通过USB（使用adb）连接两者。现在，我不知道如何通过我的 TCP 套接字实际发送图像数据。是否有任何现成的图书馆，或者有没有人已经这样做并且可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:05:39.990

如果您只需要在设备上显示图像，我会这样做：

```
$ adb push img.png /mnt/sdcard/img.png
$ adb shell am start -a android.intent.action.VIEW -t image/png -d file:///mnt/sdcard/img.png 
```

# ssis - SSIS左合并连接部分匹配

> ID：10589080
> 
> 赞同：2
> 
> 时间：2012-05-14T18:35:42.353
> 
> 标签：ssis, merge, left-join, string-matching

在 SSIS 中，当我尝试在“CourseName”上对表 1 和表 2 进行合并连接时，结果显示只有部分列被映射。也就是说，即使这两个表中的值具有相同的数据类型并且具有相同的“Coursename”，它们在 SSIS 的 Left Merge Join 中仍被视为“不匹配”。有人可以帮我吗？

附言

1.  两列的数据类型都是 nvarchar(30)
2.  查找也不起作用...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:34:06.697

有几点需要考虑：

1.  您是否在数据源级别执行排序？我遇到了数据源级别的排序结果与我在 SSIS 中执行排序时不同的问题，这可能是由于使用了不同的编码。
2.  你修剪过你的专栏吗？还要看看区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T12:27:29.647

我遇到了同样的问题，我的问题通过 Trimming column data 解决了。

# html - 有没有办法使用 CSS 将文本大小设置为窗口大小的百分比？

> ID：10589083
> 
> 赞同：4
> 
> 时间：2012-05-14T18:35:50.040
> 
> 标签：html, css, fonts

有没有办法将文本大小设置为***浏览器窗口***的百分比？例如：

```
h1
{
    height: 15%;
    /* in my ideal world this would be 15% of the window 
       (or parent) size rather than inherited font-size */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T18:40:42.387

在 CSS3 中：

```
h1{
   font-size: 15vw; // relative to the viewport's width
   font-size: 15vh; // relative to the viewport's height
   font-size: 15vm; // relative to the ratio width/height of the viewport
} 
```

但当然，这并不适用于所有浏览器。

请看这里：[http ://www.w3.org/TR/css3-values/#viewport-relative-lengths](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:43:46.337

如果你不介意一点 js ，在[http://fittextjs.com/](http://fittextjs.com/)有一个很棒的 jquery 解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:50:07.060

这并不完美，但使用媒体查询可能会很接近。

```
@media screen and (max-height: 50px) {
  body {
    font-size: 7.5px;
  }
}

@media screen and (max-height: 100px) {
  body {
    font-size: 15px;
  }
}

@media screen and (max-height: 150px) {
  body {
    font-size: 22.5px;
  }
}

@media screen and (max-height: 200px) {
  body {
    font-size: 30px;
  }
} 
```

等等。您必须确定何时建立“突破”点以及在低端和高端采取多远。

# wpf - Windows XP 中 ListView 的性能下降

> ID：10589084
> 
> 赞同：1
> 
> 时间：2012-05-14T18:35:58.760
> 
> 标签：wpf, xaml, listview, windows-xp

因此，我正在设计的应用程序使用一个非常简单的列表视图，其中包含复选框来检查列表中的某些项目。它在我的装有 Windows 7 的机器上运行得非常好，但是当在装有 Windows XP 的另一台机器上运行它时，鼠标在复选框周围悬停时变得非常缓慢且不稳定。我写了一个应用程序，它纯粹是一个带有复选框的列表视图，项目中没有任何其他内容，它仍然做同样的事情。这有什么问题吗……？

```
<ListView Name="lstView" ItemsSource="{Binding List}"  HorizontalContentAlignment="Stretch" SelectionMode="Extended">
    <ListView.View>
        <GridView >
            <GridView.Columns>
                <GridViewColumn>
                    <GridViewColumnHeader Content="Dummy Column"/>
                </GridViewColumn>
                <GridViewColumn>
                    <GridViewColumnHeader Content="Dummy Column2"/>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding Bool}" />
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView.Columns>
        </GridView>
    </ListView.View>
</ListView> 
```

该应用程序在 XP 机器上运行良好，但在将鼠标悬停在复选框上时会变慢，我不确定为什么。有没有人经历过这种情况或知道是什么原因导致它/简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:41:53.203

在复选框的样式/模板中，您是使用情节提要或 VSM 为悬停效果设置动画，还是使用触发器替换画笔？如果您正在为它们设置动画，请尝试只交换画笔。出于某种原因，XP 并不总是能很好地处理 WPF 动画。

# java - 将一个实例注入多个 bean

> ID：10589085
> 
> 赞同：0
> 
> 时间：2012-05-14T18:36:03.003
> 
> 标签：java, spring

有一个解决方案：

```
 <bean name="1" class="My1" />

<bean name="2" class="My2" scope="prototype">
    <property name="field1" ref="1">
</bean>

<bean name="3" class="My3" scope="prototype">
    <property name="field1" ref="1">
</bean> 
```

但我不想那样做。我不希望在应用程序中的任何地方都可以访问 bean“1”并且 Spring 控制它。我只希望 bean "2" 和 "3" 获得相同的实例。我能做到吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:37:50.717

我不确定问题是什么。默认情况下，Spring bean 是单例的。因此，在您的示例中，`2`并且`3`已经具有相同的`1`. Spring 控制的实例`1`并不是真正“在应用程序中的任何地方都可以访问”，它只能在注入的地方访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:38:36.550

如果您没有在 xml 中明确指定 bean“1”，而只是在控制器第一个请求中创建它的对象，然后将其放入您的会话中，以便可以在具有相同实例的整个应用程序中访问它，该怎么办。而且您只能在您想要的控制器中访问它。

希望这对您有所帮助。

干杯。

# javascript - 在jQuery中使用bind（）时如何获取div的ID？

> ID：10589087
> 
> 赞同：0
> 
> 时间：2012-05-14T18:36:08.513
> 
> 标签：javascript, jquery

假设我有以下内容`div`。

```
<div id="123" class="abc">Foobar</div> 
```

我知道我可以这样做以在`div`鼠标悬停时触发一个功能：

```
$(".abc").bind({
    mouseenter : SomeFunction(id)
}); 
```

有了这个，在`SomeFunction`运行之前，我希望能够提取出 this 的 id `div`，即“123”，并将其作为参数传递`SomeFunction`给它以供处理。我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:37:25.910

```
$('.abc').bind('mouseenter', function() {
    SomeFunction($(this).attr('id'));
}); 
```

* * *

或者，如果您真的想要事件映射语法：

```
$('.abc').bind({
    mouseenter: function() {
        SomeFunction($(this).attr('id'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T18:38:17.647

```
$(".abc").on({
   mouseenter : function() {
      var id = this.id;
       //or just
      SomeFunction(this.id);
   }
}); 
```

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T18:38:44.933

```
$(".abc").bind('mouseenter', function() {
  var id = this.id;
}) 
```

根据你的问题

```
$(".abc").bind({

 mouseenter : function() {
                SomeFunction(this.id)
              }

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T18:38:37.993

```
$(".abc").bind('mouseenter', function() {
    var id = $(this).attr('id');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T18:39:21.777

```
$('.abc').bind('mouseenter', function() {
    SomeFunction(this.id);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T18:40:05.850

您不需要将其传递给函数。有一个简单的方法。

```
$(".abc").bind({
    mouseenter : SomeFunction /* This might be a new way for you. 
                                 But its very useful sometimes */
});

function SomeFunction()
{
    var id = $(this).attr("id"); /* You can access $(this) in this function. 
                                    Here the $(this) will refer to the bound 
                                    element (i.e. of class ".abc") 
                                 */
} 
```

简单的！

# java - 如何通过元素索引获取 LinkedHashMap 的子图？

> ID：10589089
> 
> 赞同：7
> 
> 时间：2012-05-14T18:36:26.697
> 
> 标签：java

我正在尝试获取`LinkedHashMap`基于元素索引的子图。我在这里重新发明轮子吗？听起来这应该已经在 API 中的某个地方：

```
public <K,V> LinkedHashMap<K,V> subMap(LinkedHashMap<K,V> map, int fromIndex, int toIndex) {
    LinkedHashMap<K,V> result = new LinkedHashMap<K,V>();

    int i=0;
    for(Map.Entry<K,V> entry : map.entrySet()) {
        if(i >= fromIndex && i < toIndex) {
            result.put(entry.getKey(), entry.getValue());
        }
        i++;
    }

    return result;
} 
```

这是要走的路还是有一些其他更好/现有的解决方案（在 Java 6 API 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:48:21.900

[NavigableMap](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)允许您取回子地图，但它要求您指定“从键”和“到键”，因此您不能仅在索引上执行此操作。

我不知道通过标准 API 执行此操作的任何其他方式。

# html - 如何将此代码放入表格中？

> ID：10589097
> 
> 赞同：-8
> 
> 时间：2012-05-14T18:36:58.877
> 
> 标签：html, frame, frameset

我的代码是这样的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
   "http://www.w3.org/TR/html4/frameset.dtd">
<html>
    <head>
        <title>
            Prueba
        </title>
    </head>
    <frameset rows="56px, *, 50px" border="0" framespacing="0" frameborder="NO">
        <frame class="header" src="header.html">
        <frameset cols="450px, *" border="0" framespacing="0" frameborder="NO">
            <frameset rows="*,150px" border="0" framespacing="0" frameborder="NO">
                <frame class="frame1" scrolling="auto" src="search_results.html">
                <frame class="frame2" scrolling="no" src="info.html">
            </frameset>
            <frame class="frame3" scrolling="no" src="map.html">
        </frameset>
        <frame class="footer" scrolling="no" src="footer.html">
    </frameset>
</html> 
```

我想删除所有框架并用表格重建它。我试图做某事，但我没有得到我想要的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T18:43:03.853

```
<table>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
   "http://www.w3.org/TR/html4/frameset.dtd">
<html>
    <head>
        <title>
            Prueba
        </title>
    </head>
    <frameset rows="56px, *, 50px" border="0" framespacing="0" frameborder="NO">
        <frame class="header" src="header.html">
        <frameset cols="450px, *" border="0" framespacing="0" frameborder="NO">
            <frameset rows="*,150px" border="0" framespacing="0" frameborder="NO">
                <frame class="frame1" scrolling="auto" src="search_results.html">
                <frame class="frame2" scrolling="no" src="info.html">
            </frameset>
            <frame class="frame3" scrolling="no" src="map.html">
        </frameset>
        <frame class="footer" scrolling="no" src="footer.html">
    </frameset>
</html>
</table> 
```

那里。

* * *

但是很严重。您不想使用表格进行布局。你也不应该使用框架。

要走的路是使用div。或者新的 HTML5 元素。

添加到 HTML 的一些新元素是：

**部分元素**

*   部分
*   导航
*   文章
*   在旁边
*   组
*   标题
*   页脚
*   地址

**分组元素**

*   数字
*   无花果

不使用表格进行布局时的一些好处：

*   表格呈现速度较慢
*   使用流体设计时，表格效果不佳
*   表格不是用于布局的正确语义元素
*   表格用于表格数据
*   如果您想在某些时候更改布局，表格并不是很灵活

请注意，当您想使用新的 HTML5 元素时，您应该设置正确的文档类型：

```
<!DOCTYPE html> 
```

另请注意，“旧”浏览器（和 IE）不知道新元素。要解决此问题，您可以在文档头部添加这个简单的 JS 脚本：

```
<script>
  document.createElement('header');
  document.createElement('nav');
  document.createElement('section');
  document.createElement('article');
  document.createElement('aside');
  document.createElement('footer');
  document.createElement('time');
</script> 
```

* * *

你会得到如下内容：

**CSS**

```
​#body { width: 960px; }
aside { width: 450px; float: left; }
.content { margin-left: 450px; } 
```

**HTML**

```
<div id="body">
    <header>
        <h1>Your header</h1>
    </header>
    <aside>
        <p>Aside</p>
    </aside>
    <div class="content">
        <h2>Title</h2>
        <p>Some text</p>
    </div>    
    <footer>
        <p>Your footer</p>
    </footer>
</div>    ​ 
```

**演示**

[http://jsfiddle.net/ZGPAW/](http://jsfiddle.net/ZGPAW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:09:36.403

您无法使用表格复制框架的功能。如果您有重建站点的理由，最好从头开始，包括有关功能、总体布局和使用的服务器端技术的决策。

# qt - Qt - 如何计算 .txt 文件中的行数

> ID：10589098
> 
> 赞同：1
> 
> 时间：2012-05-14T18:37:08.237
> 
> 标签：qt, text-files, qfile

我想计算文本文件中的行数，所以我可以将它转换为二维数组

文本文件应该是这样的

```
20
30
78
1000
....
.... 
```

和使用 QFile 访问文件的源代码

```
QFile file("c:/Qt/in.txt");
file.open(QIODevice::ReadOnly); //| QIODevice::Text)
y = linecount/5;
QString line[y][5];
QTextStream in(&file);
for (int k=0;k<=y;k++)
{
    for (int x=0;x<=4;x++)
    {
        line[i][x] = in.readLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T04:15:31.907

您的问题不清楚，代码中还有一些参数。对于计算文件中的行数，它很简单，如下所示。您可以使用数组线来填充您的二维数组。

```
QFile file("c:/Qt/in.txt");
int line_count=0;
file.open(QIODevice::ReadOnly); //| QIODevice::Text)
QString line[100];
QTextStream in(&file);
while( !in.atEnd())
{
    line[line_count]=in.readLine();
    line_count++;
} 
```

# java - Eclipse 插件：使选项卡在事件中闪烁？

> ID：10589099
> 
> 赞同：2
> 
> 时间：2012-05-14T18:37:12.330
> 
> 标签：java, eclipse-plugin, swt

我有一个基于 Eclipse 的应用程序，其中包含几个在选项卡式环境中可见的插件。我想做的是，在其中一个插件中发生的特定事件上，使该插件的选项卡在 UI 中闪烁（或更改为另一种颜色或其他状态指示器）。

似乎它至少应该有点微不足道，但谷歌并没有太大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:51:01.060

假设您指的是视图的选项卡，那么您可以使用`getProgressService().warnOfContentChange();`in`ViewPart`来突出显示选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T22:20:54.703

最简单的方法是通过 更新`ViewPart`的图标`setTitleImage(Image)`。如果您想对其进行动画处理，我可以推荐[Trident](http://kenai.com/projects/trident/pages/Home)库。

如果你想要更多的东西（比如改变背景颜色），我认为你需要考虑创建自己的 PresentationFactory，它可以让你访问绘制选项卡的控件。您可以从扩展点执行此操作`org.eclipse.ui.presentationFactories`，提供一个扩展 AbstractPresentationFactory 的类

```
<extension point= "org.eclipse.ui.presentationFactories" >
    <factory class="my.PresentationFactory" id="my.PresentationFactory" name="Custom Presentation" />
</extension> 
```

您可以从应用的 .ini 文件中将其设置为默认演示文稿：

```
org.eclipse.ui/presentationFactoryId=my.PresentationFactory 
```

看看 以`WorkbenchPresentationFactoryClassic`了解发生了什么。

# java - ConcurrentHashMap 锁定

> ID：10589103
> 
> 赞同：18
> 
> 时间：2012-05-14T18:37:26.580
> 
> 标签：java, concurrenthashmap

我在某处读到`ConcurrentHashMap`，整个地图对象没有被锁定，而是在地图的一部分上进行了锁定。

有人可以详细说明锁定何时出现吗？

在阅读地图时没有涉及锁定但在更新它时只使用锁定是对的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-14T18:43:23.137

是的，`ConcurrentHashMap`使用多个锁（默认情况下，其中 16 个），每个锁控制哈希的一个段。

在特定段中设置数据时，将获得该段的锁定。

获取数据时，使用易失性读取。如果易失性读取导致未命中，则在最后一次尝试成功读取时获得该段的锁定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T18:41:45.290

锁定尽可能地最小化，同时仍然是线程安全的。

解释“部分 Map 被锁定”，这意味着在更新时，只有 Map 的“1/concurrencyLevel”（基于 key 的哈希）被锁定。这意味着如果两个更新都影响单独的“桶”，两个更新仍然可以同时安全地执行，从而最大限度地减少锁争用，从而最大限度地提高性能。

更重要的是，相信 JDK 实现——您不必担心 JDK 中的实现细节（一方面，它可能会随着版本的不同而变化）。相反，只需专注于编写*代码*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-29T10:15:31.983

ConcurrentHashMap 使用可重入锁机制。ConcurrentHashMap 使用段而不是存储桶，当新记录获取插入锁时，将仅在段而不是完整的段列表上获取。所以这里的想法清楚地表明多级锁将在同一时间获得。

由于没有明确设置并发级别，因此 ConcurrentHashMap 被分为 16 个段。并且每个段都充当一个独立的 HashMap。

ConcurrentHashMap 中的读取操作没有应用锁。

# node.js - 从 nodejs 提供 twitter bootstrap 的最佳方式是什么？

> ID：10589104
> 
> 赞同：2
> 
> 时间：2012-05-14T18:37:36.107
> 
> 标签：node.js, twitter-bootstrap

我已经阅读了一些关于使用 twitter bootstrap 设置基本模板并从 nodejs 提供它的博客文章。似乎有很多方法可以使用 express 和 jam 或其他渲染引擎来实现这一点。

我的问题是最好的方法是什么？某些渲染引擎是否比其他渲染引擎更好？

欢迎任何建议。

提前感谢瑞克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T19:59:55.097

我在我的项目中使用 Heroku 上的 Express 和 Jade，并使用 Twitter Bootstrap。由于 Twitter Bootstrap 只是几个 css 文件和 javascript 插件，因此您的问题没有任何意义。Twitter Bootstrap 与包含您在网页上使用的任何其他类型的库没有什么不同，因此您实际上是在问如何在 Node.js 中提供页面。

[只需在此处](https://devcenter.heroku.com/articles/nodejs)查找包含文件的语法，然后在[此处了解如何在 Heroku 上提供页面](http://jade-lang.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:17:44.400

另一种选择是嵌入式 JavaScript。闪电般快速，您无需学习新语法。

# android - Android 应用程序中的验证码

> ID：10589105
> 
> 赞同：4
> 
> 时间：2012-05-14T18:37:46.263
> 
> 标签：android, captcha

我必须在我的 android 应用程序代码中实现 Captcha，但不知道如何去做。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:40:41.497

看看[SimpleCaptcha](http://simplecaptcha.sourceforge.net/)或[JCaptcha](http://jcaptcha.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T20:01:32.333

无耻的自我推销，但我讨厌所有其他选择，特别是它们都是基于网络的。现在，我确信我的需要大量工作等，并且可能不如使用其他外部解决方案安全，但至少它易于使用并且有一些选择。

[在这里 Git，并享受更改和提交的乐趣](https://github.com/floydfix/Android-Easy-Captcha)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-15T02:45:28.313

现在谷歌为此提供了 SafetyNet reCAPTCHA 库。[在此处](https://developer.android.com/training/safetynet/recaptcha)
查找更多详细信息。

以下是实施 reCaptcha 的步骤：

1.  添加 SafetyNet API 依赖项

> ```
> dependencies {
>     compile 'com.google.android.gms:play-services-safetynet:15.0.1'
> } 
> ```

2.  使用 API（来自 google 文档的示例）

    ```
    public void onClick(View v) {
    SafetyNet.getClient(this).verifyWithRecaptcha(YOUR_API_SITE_KEY)
        .addOnSuccessListener((Executor) this,
            new OnSuccessListener<SafetyNetApi.RecaptchaTokenResponse>() {
                @Override
                public void onSuccess(SafetyNetApi.RecaptchaTokenResponse response) {
                    // Indicates communication with reCAPTCHA service was
                    // successful.
                    String userResponseToken = response.getTokenResult();
                    if (!userResponseToken.isEmpty()) {
                        // Validate the user response token using the
                        // reCAPTCHA siteverify API.
                    }
                }
        })
        .addOnFailureListener((Executor) this, new OnFailureListener() {
                @Override
                public void onFailure(@NonNull Exception e) {
                    if (e instanceof ApiException) {
                        // An error occurred when communicating with the
                        // reCAPTCHA service. Refer to the status code to
                        // handle the error appropriately.
                        ApiException apiException = (ApiException) e;
                        int statusCode = apiException.getStatusCode();
                        Log.d(TAG, "Error: " + CommonStatusCodes
                                .getStatusCodeString(statusCode));
                    } else {
                        // A different, unknown type of error occurred.
                        Log.d(TAG, "Error: " + e.getMessage());
                    }
                }
        }); 
    ```

    }

# mysql - mysql INFORMATION_SCHEMA.SCHEMA_PRIVILEGES 解释？

> ID：10589109
> 
> 赞同：3
> 
> 时间：2012-05-14T18:38:07.587
> 
> 标签：mysql

你好在 mysql 这些是 INFORMATION_SCHEMA.SCHEMA_PRIVILEGES 表中的列

```
+----------------+--------------+------+-----+---------+-------+
| Field          | Type         | Null | Key | Default | Extra |
+----------------+--------------+------+-----+---------+-------+
| GRANTEE        | varchar(81)  | NO   |     |         |       |
| TABLE_CATALOG  | varchar(512) | YES  |     | NULL    |       |
| TABLE_SCHEMA   | varchar(64)  | NO   |     |         |       |
| PRIVILEGE_TYPE | varchar(64)  | NO   |     |         |       |
| IS_GRANTABLE   | varchar(3)   | NO   |     |         |       |
+----------------+--------------+------+-----+---------+-------+ 
```

所以我想知道所有这些列代表什么我知道第三列和第四列代表什么，但我不知道其他列有什么可以解释一下吗？我一直在网上搜索，但我没有找到任何内容，只有该列的一些示例值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T21:19:58.647

根据[**MySQL 文档**](http://dev.mysql.com/doc/refman/5.5/en/schema-privileges-table.html)，这些值只是从 mysql.db 表中复制而来。所有这些都提供了一种替代方法来查找所有已被授予数据库级权限的用户。

## 以下是每列代表的内容的细分

*   `GRANTEE`是授予权限的 mysql 用户（`user`@ `host`from `mysql.db`）
*   `TABLE_CATALOG`是[**为这个表定义的一个字段，它与 SQL-92 兼容**](https://dba.stackexchange.com/a/3776/877)
*   `TABLE_SCHEMA`是允许授予的数据库（db 中的列`mysql.db`）
*   `PRIVILEGE_TYPE`是授予的单个数据库级权限`mysql.db`
    *   Select_priv
    *   插入隐私
    *   更新隐私
    *   删除_priv
    *   创建_priv
    *   Drop_priv
    *   References_priv
    *   Index_priv
    *   Alter_priv
    *   创建_tmp_table_priv
    *   Lock_tables_priv
    *   Create_view_priv
    *   Show_view_priv
    *   create_routine_priv
    *   Event_priv
    *   Trigger_priv
*   `IS_GRANTABLE`告诉您用户是否已定义`WITH GRANTS`（Grant_priv 列`mysql.db`）。换句话说，该值告诉 mysql 用户是否可以将特定的数据库级权限授予其他 mysql 用户

# java - 打印机关闭时 RXTX 导致 jvm 崩溃

> ID：10589115
> 
> 赞同：2
> 
> 时间：2012-05-14T18:38:31.970
> 
> 标签：java, jvm, rxtx

我在使用 rtxt COM 库时遇到了问题。我将 USB 打印机连接到虚拟 COM 驱动程序。一切正常，但是如果我关闭打印机 jvm 崩溃！开箱即用的错误位于 rxtxSerial.dll 上...但我没有其他日志（我应该在哪里找到它？）

这是一个大问题，因为端口侦听器在 tomcat 服务器上运行......当打印机关闭时服务器崩溃是不好的 :-)

谢谢你。

**编辑**

我试图在 32 位系统中设置环境，现在 rxtx 不会使 jvm 崩溃......只是进入死锁。当设备被拔出或关闭时，我读到了 rxtx 的这种死锁：http://mailman.qbang.org/2011-January/8573059.html[我](http://mailman.qbang.org/2011-January/8573059.html) 还没有找到解决方案，我将开始尝试所有解决方法！

# ruby-on-rails-3 - escape_javascript 未正确转义 text_area

> ID：10589116
> 
> 赞同：2
> 
> 时间：2012-05-14T18:38:32.017
> 
> 标签：ruby-on-rails-3, haml, formtastic

由于某种原因，rails 没有正确地转义 javascript 的 text_areas。我在导致无效 javascript 的文本区域周围出现换行符。我正在使用 HAML 和 formtastic，但我认为 escape_javascript 方法在 HAML 完成后处理了输出。这真是令人沮丧。请帮忙...

例子：

**编辑.js.erb：**

```
$('#ajax-form').html("<%= escape_javascript render 'form' %>") 
```

**_form.html.haml**

```
= semantic_form_for @note do |f|
  = f.input :body, as: :text 
```

**结果：**

```
$('#ajax-form').html("<form id=\"edit_note\" action=\"/notes/123\" data-method=\"put\">\n<textarea name=\"note[body]\">
This is the note body </textarea>") 
```

注意字面上的新行，这不应该发生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:57:39.153

我认为这是 Rails 3.2.3 中的一个错误，它在更新后也发生在我身上。现在恢复到 3.2.2 解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:20:56.430

这实际上是 Haml 中的一个错误，升级到 3.1.6.rc.1 应该没问题。

# python - 为一长串解释 python 生成器

> ID：10589117
> 
> 赞同：0
> 
> 时间：2012-05-14T18:38:33.820
> 
> 标签：python, oop, data-structures

我是新的python程序员，到目前为止我所理解的，“yield”关键字返回一个对象，而不是生成器函数只返回生成器对象。

因此，如果我有一个包含 10K 项的列表，我如何制作智能的 Pythonic 解决方案而不在列表中附加值并使其变大。

这意味着，我将一些值附加到列表中，最后创建一个大列表，如下所示：

```
def example():
    final_list = []
    for i in range(0,10000):
        final_list.append(i)
    return final_list 
```

这只是一个例子，不是真正的问题，我使用 range() 只是为了生成循环，在我的真正问题中，没有顺序数据，它将是随机字符串，findla 列表将包含 10K 字符串。那么如何在不以有效的 Python 方式附加到列表的情况下获取所有值。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T18:59:40.360

您的示例过于简化，所以让我们假设您想要 10000 个随机数。

有两种方法可以创建生成器。一个是`yield`声明：

```
def example():
    for i in xrange(10000):
        yield random.random() 
```

另一种方法是使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)：

```
(random.random() for i in xrange(10000)) 
```

您选择哪一个将取决于您的代码复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:50:20.003

你说：

> 在抓取网页并将这些字符串附加到列表后，我得到了一些字符串，随着爬虫获取大数据，列表越来越大，最后当我想迭代列表时，它的时间和内存消耗

所以：

```
# generator function to crawl web pages
def crawler():
    while iStillHaveWebPagesToCrawl():
        someStrings = getSomeStringsFromAWebPage()
        for aString in someStrings:
            yield aString

def oneStringAtATime():
    for aString in crawler():
        doSomethingWith( aString ) 
```

当您调用时`oneStringAtATime()`，它会设置调用的生成器函数`crawler()`；每次`crawler()`执行`yield`时，循环都会`oneStringAtATime()`使用该字符串迭代一次。当`crawler()`网页用完并退出函数时，`oneStringAtATime()`循环退出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T18:58:17.857

如果我理解你，那么你使用`range(0, 10000)`only 来模拟序列。每当您`yield`在函数定义中使用 时，它都会成为*生成器函数*。当使用（调用）生成器函数时，它返回迭代器——你看不到它。请尝试以下`gen()`操作：

```
def gen(n):
    while n > 0:
        yield n
        n -= 1    # decrement the value 
```

然后你通常在一个循环中使用它：

```
for x in gen(10000):
    print x,         # comma to suppress new line 
```

如果您有一个返回字符串的函数，`yield s`而不是构建列表。然后调用生成器函数并只收集您想要的值（这里不是字符串，而是可被 100 整除的数字）：

```
lst = []   # init
for x in gen(10000):
    if x % 100 == 0:
        lst.append(x)
print lst 
```

循环也可以用所谓的列表推导代替：

```
lst = [ x for x in gen(10000) if x % 100 == 0 ]
print lst 
```

...当你这样写时更容易理解（即类似于上面的循环）：

```
lst = [ x 
        for x in gen(10000) 
            if x % 100 == 0 ]
print lst 
```

但是您可以在任何需要序列的地方使用生成器函数。如果您的生成器可以执行是否要收集您的元素的决定，那么您可以简单地列出生成的元素，如下所示：

```
lst = list(gen(100))
print lst 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T18:40:13.667

好的，通过阅读问题/查看 OP 代码和下面的一些评论，看起来 OP 正在处理一个列表。

所以，

```
def example():
    final_list = range(0, 10000) # or xrange() for v 2.x
    return final_list 
```

也可以不使用临时 final_list 变量，但为了清楚起见。

如果列表的值不是由 range/xrange 生成的系列，那么[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)在这里是合适的。

还是觉得这个问题有点不清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T18:43:53.617

```
>>> xrange_object = xrange(10000)
>>> xrange_object[0]
0
>>> xrange_object[1]
1 
```

我看到你已经编辑了你的问题。如果你有一个随机字符串生成函数，`ran_string`你可以使用生成器表达式来做你想做的事，像这样：

```
>>> final_gen = (ran_string(i) for i in xrange(10000)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T18:45:26.223

你的问题不是很清楚 - 你在这里寻找的是一个[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)。

例如：

```
>>> values = (random.random() for _ in range(10))
>>> for value in values:
...     print(value)
... 
0.32161489939829857
0.285715480204797
0.4961165128957876
0.42658612656828354
0.5083396364418685
0.00843781669361321
0.49698036590463757
0.8067300769956716
0.5741614069287628
0.4728079544997392 
```

如果您想然后迭代您拥有的值，您可以使用生成器表达式根据现有的可迭代对象生成值，而无需预先构建列表。它们是在请求时生成的（在这种情况下，当循环请求它们时）。

查看上面链接的视频，以更深入地解释生成器表达式的语法（以及它的所有表亲、列表组合、集合组合等......）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T19:04:37.290

你的问题有点不清楚，但我假设你的意思是你想要一个可以迭代但很懒的对象 - 即不预先计算和存储所有值。

```
def example():
    for i in xrange(10000):
        yield i

g = example()
print g.next() # prints '0'
print g.next() # prints '1'
for x in g:
    print x # prints '2', '3', ..., '10000' 
```

我在示例中使用了 xrange ，因为使用 range 会破坏目的，显然你可以在函数中放置任何你想要的东西。它的工作方式是 g 将记住它的内部状态（在本例中为 i 的值）并在每次调用 g.next() 或迭代 g 时运行到下一个 yield 语句。

我希望这会有所帮助！

# c++ - 嵌入式日志记录

> ID：10589120
> 
> 赞同：3
> 
> 时间：2012-05-14T18:38:43.437
> 
> 标签：c++, c, logging, embedded

日志记录是必不可少的调试工具。您如何在嵌入式环境中使用此类日志记录功能？我个人在 ARM Cortex Mx 微控制器上编程。

我正在考虑一个日志框架，它具有用于多个接口（ITM、UART 等）和可定制级别的日志记录的可变后端。

我[在 C++ 中找到了一个高度可配置的日志框架](http://www.drdobbs.com/embedded-systems/225700666)。你知道其他项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:42:42.990

在嵌入式系统中，日志记录通过两种首选方法完成：通过调试/串行端口和存储到内存中。

存储到内存中的想法是稍后可以使用 JTAG 调试器或其他工具对其进行检索。对于断电后需要保存的任何内容，请使用非易失性内存。

# javascript - 谷歌地图平移地球的“边缘”

> ID：10589124
> 
> 赞同：3
> 
> 时间：2012-05-14T18:39:04.687
> 
> 标签：javascript, google-maps

有没有其他人发现谷歌地图（现在）允许你超越两极。它曾经停在两极，对吧？

每次用户平移或缩放地图时，我正在处理的站点都会在我们的服务器上执行基于位置的查询。这会导致错误，因为用户在地图边缘平移时触发的查询是无意义的。

现在我正在处理边缘情况，可以这么说，在服务器端，但在客户端不是很好的用户体验。有没有人有防止过度平移的解决方案？

谢谢

截屏： ![地球边缘！](../Images/9efdd7666bfb43edf81a98b81ba8e410.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:31:11.163

避免灰色区域的一种方法是限制用户的平移，按照这个例子，“范围限制”；但是，它是为第 2 版编写的。

[http://econym.org.uk/gmap/range.htm](http://econym.org.uk/gmap/range.htm)

让它在版本 3 中工作很简单， http: [//jsfiddle.net/44e6y/9/](http://jsfiddle.net/44e6y/9/)但也有缺点：

*   它依赖于地图的中心在一个盒子里，所以
*   放大将进一步限制可视区域（如果您对两极不感兴趣也没关系，但您可以拥有一系列 LatLngBounds 用于各种缩放，它成为看格陵兰岛的必要条件）
*   作为最后一点的结果，我强制 JSFiddle iframe 大小的最小缩放为 2。如果地图将占据整个屏幕，则最小缩放可能会更高，以避免显示灰色区域。一般来说，最小值越高。缩放，更可预测的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T17:28:11.983

由于我遇到了同样的问题并且接受的唯一目标是 2 级缩放（示例中其他缩放级别失败），我去尝试找到一个公式，但没有成功，所以我在前 8 个缩放中硬编码有价值观的水平。显然，这可以扩展到一个完整的工作示例，但我认为这对于 99% 的情况来说已经足够了。

[JSFiddle在这里](http://jsfiddle.net/gasC2/)

我还添加了另一个侦听器以使其更好地工作。

```
google.maps.event.addListener(map, 'zoom_changed', function() {
      checkBounds();}); 
```

# asp.net-mvc - 如何将 CSS 类名称添加到 ASP.NET MVC 3 Url.Action 链接？

> ID：10589128
> 
> 赞同：4
> 
> 时间：2012-05-14T18:39:22.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在 ASP.MVC 3 或 4（使用 Razor）中，如何将 CSS 类应用于 Url.Action() 辅助方法？可能吗？

期望的结果：

```
<a href="home\index?page=2" class="FOO">BAR</a> 
```

我已经做到了这一点：

```
@Url.Action("Index", "Home", new { page }) 
```

* * *

更新：谢谢大家。我犯了几个错误，我应该为未来的读者（很可能是我自己）澄清一下。我希望我能给你们一个以上的信用。

a) new { page } - 不要这样做。它将产生不希望的输出。我的意思是：ViewBag.page 或 ViewBag.pageNum

b) 正如你们中的一些人指出的那样，我需要 Html.ActionLink() 而不是 Url.Action()，在我切换到生成完整标签之前，我一直在成功使用它，而不仅仅是 url。

我确认以下工作符合要求：

```
@Html.ActionLink("BAR", "Index", "Home", new { ViewBag.PageNum }, new { @class = "FOO" }) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T18:43:45.710

我相信您想改用 an [`ActionLink`](http://msdn.microsoft.com/en-us/library/dd505040)。这将允许您添加所需的任何属性。

```
@Html.ActionLink("BAR", "Index", "Home", new { page }, new { @class = "FOO" }) 
```

输出：

```
<a href="home/index?page=2" class="FOO">BAR</a> 
```

或者你可以“手动”做

```
<a href="@Url.Action("Index", "Home", new { page })" class="FOO">BAR</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T18:47:29.890

Url.Action 不创建任何 html 元素，它只创建一个 URL，这就是为什么它被称为 Url.Action，而不是 Html.Action...（Html.Action 是完全不同的东西）。

如果您希望在使用 Url.Action 的链接上使用 css，只需执行以下操作：

```
<a href="@Url.Action("Action", "Controller")" class="myclass">My Link<a> 
```

或者，您可以使用 Html.ActionLink

```
@Html.ActionLink("My Link", "Action", "Controller", null, new { @class="myclass" }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T18:48:27.440

Url.Action 助手将简单地打印 url 而不是完整的锚点。

您的两个选择是：

```
@Html.ActionLink("BAR", "index","home", new { @class = "FOO" }) 
```

*   请注意在类上使用 @ 符号，因为类是保留关键字

和（使用 Url.Action 助手）

```
<a href="@Url.Action("Index", "Home", new { page })" class="FOO">BAR</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T18:45:08.497

这就是我所做的：

我有这堂课：

```
public class HtmlValues : Dictionary<string,object>
{
    public HtmlValues Class(string ClassName)
    {
        if (this.ContainsKey("class"))
        {
            ClassName = String.Format("{0} {1}", this["class"], ClassName);
            this.Remove("class");
        }
        return this.WithValue("class", ClassName);
    }
    public HtmlValues Name(string Name)
    {
        return this.WithValue("name", Name);
    }
    public HtmlValues Style(string Style)
    {
        return this.WithValue("style", Style);
    }
    public HtmlValues MaxLength(int Length)
    {
        return this.WithValue("maxlength", Length.ToString());
    }
    public HtmlValues RTL()
    {
        return this.WithValue("dir", "rtl");
    }
    public HtmlValues With(string Attribute, string Value)
    {
        return this.WithValue(Attribute, Value);
    }

    public static HtmlValues WithClass(string CssClass)
    {
        return new HtmlValues().Class(CssClass);
    }

    public HtmlValues Data(string key, string value)
    {
        return this.WithValue("data-" + key, value);
    }
} 
```

使用此扩展方法：

```
public static class Extensions
{
    public static T WithValue<T>(this T dict, string key, object value) where T : IDictionary<string, object>
    {
        dict.Add(key, value);
        return dict;
    }
} 
```

然后我的剃刀看起来像这样：

```
@Html.TextBoxFor(model => model.SomeProperty, HtmlValues.WithClass("SomeClass")) 
```

这可能看起来有点矫枉过正，但在实践中非常好，因为它可以让您以流畅的方式将属性/值链接到元素，对读者来说有意义。

```
@Html.TextBoxFor(model => model.SomeProperty, 
    HtmlValues.WithClass("SomeClass")
              .Class("someotherClass")
              .Data("Some-Jquery-Data-Thing")
              .With("Nonstandard-Attribute","Its-Value")) 
```

# c++ - C++ xerces 对象的序列化会导致访问冲突。

> ID：10589134
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:01.603
> 
> 标签：c++, xerces-c

使用 Xerces C++，我从以下模式生成了典型的 C++ 代码。在序列化对象时，我遇到访问冲突。我在堆栈中逐步执行代码，直到 std::basic_string 的一些模板化插入代码，它似乎在那里发生。

我可以进入生成的代码中问题发生的位置。但这似乎是矫枉过正。我确定这是我的代码的问题。

我的代码如下。

```
#include <sstream>
#include <iostream>
#include "..\XMLObjects\SomeXML.hxx"

void serializeObject(Object* mess, std::string& result);
void create();

int _tmain(int argc, _TCHAR* argv[])
{
create();
return 0;
}

void create()
{
std::string result;

objectType oType("Status");
std::auto_ptr<Object> obj( &Object(oType) );

time_t seconds=time(NULL);

Object::status_type s(seconds);
obj->status().set(s);
obj->status()->timeOfUpdate();
serializeObject(obj.get(), result);

}

void serializeObject(Object* mess, std::string& result)
{

std::ostringstream buff;
xml_schema::namespace_infomap nsm;
nsm[""].name = "";
nsm[""].schema = "SomeXML.xsd";

try
{
    Object_(buff, *mess, nsm, "UTF-8", xml_schema::flags::no_xml_declaration);
}
catch (const xml_schema::exception& e)
{
    std::cout << e << std::endl;
    return;
}
catch(std::exception& ex)
{
    std::string info(" Caught the exception ");
    info+=ex.what();

}
catch(...)
{
    std::string info(" Caught an exception ");

}

    result=buff.str().c_str();

} 
```

以下是我用来生成代码的架构。

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
 <!--<schema xmlns="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.com/SomeXML">-->

  <xsd:complexType name ="Status" >
    <xsd:sequence>
      <xsd:element name="timeOfUpdate" type="xsd:unsignedLong" minOccurs="1" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:simpleType name="objectType">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="Status"/>
      <xsd:enumeration value="Thing A"/>
      <xsd:enumeration value="Thing B"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:complexType name="Object" >
   <xsd:sequence>
     <xsd:element name="objectType" type ="objectType" minOccurs="1" maxOccurs="1" />
      <xsd:element name ="status" type ="Status" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>

  </xsd:complexType >

  <xsd:element name="Object" type="Object" />
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:45:03.103

`std::auto_ptr<Object> obj( &Object(oType) );`

这很可能是头痛的来源之一。这看起来像您正在创建一个临时地址，然后获取它的地址，并将其存储在 auto_ptr 中。

然后临时变量立即超出范围，并且您留下一个悬空指针。此外，当它到达作用域的末尾时，它会尝试`delete`指向最初位于堆栈上的指针。

尝试将其替换为

`std::auto_ptr<Object> obj( new Object(oType) );`

或者，如果您使用的是与 C++11 兼容的编译器，请使用

`std::unique_ptr<Object> obj( new Object(oType) );`

因为 auto_ptr 在最新标准中已被弃用。

# javascript - 为什么没有分号的代码在 JavaScript 中仍然有效？

> ID：10589135
> 
> 赞同：3
> 
> 时间：2012-05-14T18:40:03.017
> 
> 标签：javascript

为什么在 JavaScript 中你可以在没有 的情况下调用函数`;`？

### 例子

假设 testMethod 在某处声明...

```
testMethod();

testMethod() // Without semicolon will still work. 
```

还在元素示例中调用方法：

```
<input type="button" onclick="testMethod();" />
<input type="button" onclick="testMethod()" /> // Again no semicolon. 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-14T18:41:31.433

这是一个称为“自动分号插入”（或 ASI）的功能。

来自[处理 JavaScript 的自动分号插入](http://lucumr.pocoo.org/2011/2/6/automatic-semicolon-insertion/)

> 那么这些分号是如何为您插入的呢？通过遵循这些规则（从 ECMA-262 第 3 版，7.9.1 解释和简化）：
> 
> *   当解析程序时，遇到任何语法生成都不允许的标记（称为违规标记）时，如果以下一个或多个条件为真，则在违规标记之前自动插入分号：
>     1.  违规标记与前一个标记至少由一个 LineTerminator 分隔。
>     2.  有问题的令牌是 }。
> *   当遇到令牌输入流的末尾并且解析器无法将输入令牌流解析为单个完整程序时，会在输入流末尾自动插入分号。
> *   当语法的某些产生式允许令牌时，它是受限令牌，但产生式是受限产生式并且令牌将是紧接在注释“[no LineTerminator here]”之后的终端或非终端的第一个令牌。生产。
> 
> *此外，如果受限令牌与前一个令牌至少有一个 LineTerminator 分隔，则在受限令牌之前自动插入一个分号。*
> 
> ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T18:42:14.570

因为如果 JavaScript 引擎认为分号应该在行尾，那么它会在行尾放置分号。这通常会引入错误而不是避免它们：

```
return
{
  user: 'foo'
} 
```

上面的 return 语句返回......什么都没有：

```
return;
{
  user: 'foo'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T18:44:37.673

JavaScript 解释器会为你添加分号。省略分号是一个非常糟糕的主意，因为它可能导致解释的 JavaScript 代码的行为与您预期的不同。

[请参阅Wikipedia 上](http://en.wikipedia.org/wiki/JavaScript_syntax#Whitespace_and_semicolons)的重大示例：

```
return
a + b;

// Returns undefined. Treated as:
//   return;
//   a + b; 
```

有关的：

*[您是否建议在 JavaScript 中的每条语句后使用分号？](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript)*

# azure - 如何从我的启动应用程序中的服务配置中获取 Web 角色特定信息？

> ID：10589137
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:08.333
> 
> 标签：azure

我已经编写了在 Windows Azure 中作为启动任务工作的独立应用程序。我想在这个应用程序中使用一些 Web 角色特定的信息，但是当这个应用程序启动时，Web 角色还没有准备好。如何在我的应用程序中获取已在服务配置中的 Web 角色特定信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:00:10.913

使用 Windows Azure SDK 1.5 及更高版本对 XPATH 的支持包括服务配置和角色环境配置，因此您可以在启动任务级别或运行时在角色代码中指定角色特定设置或任何其他准备就绪的设置。您可以在此处了解有关 xpath 的更多信息：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh404006.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh404006.aspx)

我写了一篇博文来展示如何在 Windows Azure 启动任务中访问服务配置设置：

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/09/how-to-access-service-configuration-settings-in-windows-azure-startup-task.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/09/how-to-access-service-configuration-settings-in-windows-azure-startup-task.aspx)

因此，在您的情况下，当您可以在 Startup 任务中读取这些变量或设置并将其作为参数传递给您的独立应用程序时，这将为您完成。

# java - 想要动态更改网格包布局中的 Inset

> ID：10589139
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:12.417
> 
> 标签：java, swing

我有一个网格包布局，我在其中初始化了一个 gbc.insets = Insets(0,0,0,); 稍后我想在发生某些操作时调整此插图的大小。我试过改变这个值，然后做一个 repaint() 但这不起作用？我需要做什么？非常感谢你！

```
class myGraph {

    private Insets myInsets = new Insets(0,0,0,0);

    ...
    gbc.insets = myInsets; // setting Gridbag constraints.

    Action Listener {

        ............... 
        myInsets.top =30;
        myInsets.bottom =40;
        myGraph.repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:53:25.270

您需要更新 GridBagLayout：

```
GridBagLayout layout = new GridBagLayout();
JPanel panel = new JPanel(layout);
...
layout.setConstraints(myComponent, anotherConstraint);
// do this for all the components you want to update
panel.revalidate();
panel.repaint(); 
```

GridBagLayout 在您添加组件时会克隆您的约束，因此您需要告诉 LayoutManager 您要更改这些约束。简单地修改约束值绝对没有效果。

顺便说一句， repaint() 只是执行“绘画”操作，而不是布局。请改用 revalidate()。

# ruby - 努力理解这段代码

> ID：10589141
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:16.523
> 
> 标签：ruby

我正在关注 ruby​​monk.com 上的交互式教程，并且刚刚开始使用 lambda，我觉得我掌握得相当好，但是我对这段代码有点迷失：

```
1  def with_names(fn)
2   result = []
3   [ ["Christopher", "Alexander"],
4     ["John", "McCarthy"],
5     ["Joshua", "Norton"] ].each do |pair|
6       result << fn.call(pair[0], pair[1])
7   end
8   result
9  end
10  l = lambda { |first_name, last_name| "#{first_name} #{last_name}" }
11  with_names(l) 
```

在第 3 行的第一`[`行和第 5行之间输入的名称是`]`保存在数组还是散列中？我的理解是它们是数组的散列，并且在调用 `.each 时做 |pair| 我们正在遍历哈希中的每个数组，这是正确的吗？在第 6 行的下一段代码中：

```
result << fn.call(pair[0], pair[1]) 
```

我相信我们正在将每个数组元素推入结果数组，尽管我不确定这段代码是如何工作的，尤其是`fn.call`部分，因为我相信这`(pair[0], pair[1])`部分只是将数据拉到通过块的每个数组的索引位置。对这里发生的事情的清晰解释将不胜感激，我觉得我几乎就在那里。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:48:05.473

> 在第 3 行的第一`[`行和第 5行之间输入的名称是`]`保存在数组还是散列中？

名称字符串保存在数组中，所有这些都包含在另一个“主”数组中。在遍历“master”数组时，它的元素（即，`["Christopher", "Alexander"]`等）将被传递给`each`调用之后的块。

* * *

在中，传递给函数的 lambda 使用两个参数调用：迭代`fn.call(pair[0], pair[1])`提供的名字和姓氏。`each`这个 lambda 被假定返回一些值。在这种情况下，lambda 返回一个连接的字符串，因此表达式的部分计算结果如下：

```
result << "Christopher Alexander" 
```

从这里开始，`<<`重载的运算符表示应该将右操作数压入左操作数（数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:47:48.423

> 在第 3 行的第一个 [ 和第 5 行的 ] 之间输入的名称是保存在数组还是散列中？

它是一个数组数组，即数组的每个元素都是另一个包含两个字符串的数组。所以

```
result.first
=> ["Christopher", "Alexander"] 
```

lambda 是一种方法，它接受两个参数并将它们格式化为字符串。

> 当调用 `.each 时做 |pair| 我们正在遍历哈希中的每个数组，这是正确的吗？

正如我所解释的，这里没有哈希。它只是对数组进行迭代，每个元素本身就是一个包含两个元素（名字和姓氏）的数组。 `result`填充了 lambda 方法的返回值。

# wsdl - 如何在 Maven 中指定 Wsdl 位置？

> ID：10589144
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:26.103
> 
> 标签：wsdl, maven-plugin, maven-3, wsdl2java, maven-release-plugin

我创建了一个多模块 maven 原型，它将接受 wsdl 作为输入并生成接口和实现类。

我在 META-INF/wsdl/Myservice.wsdl 中给出了 wsdl。

但是我的要求是，当我使用原型生成项目时，我需要使用命令行指定 wsdl 的位置，例如：c:/wsdl/Myservice.wsdl，否则需要在 maven 原型属性本身中指定位置，这样原型必须获取 wsdl 并将其放在 META-INF/wsdl/Myservice.wsdl 中并生成代码。

指导我，如何在 Maven 原型中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:16:52.177

你可能无法做到。

您可以添加一个属性，引用 wsdl url，然后将验证阶段绑定到 maven-exec-plugin 或 maven-antrun-plugin 的执行，这将为您下载它......但这是一个非常糟糕的解决方案。

**因此，只需准备结构，您的插件依赖项（如 wsdl2java），并让最终用户将其放置在正确的路径下。**

# swift - 如何在以编程方式创建的 UIButton 上添加 padding-left？

> ID：10589150
> 
> 赞同：71
> 
> 时间：2012-05-14T18:40:43.420
> 
> 标签：swift, xcode, uibutton, padding, imageedgeinsets

我在`UIButton`. 我有一个`UIButton`. `UIControlContentHorizontalAlignmentLeft`我希望文本显示在左侧，但它太左了。当我给边界时，它看起来并不好。我想像在 CSS 中一样在大约 5px 的文本上添加一些填充。我用谷歌搜索了解决方案，但找不到一个特别适用于`UIButton`. 提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-05-14T18:45:35.457

> **titleEdgeInsets**按钮标题绘图矩形边缘的内边距或外边距。
> 
> @property(nonatomic) UIEdgeInsets titleEdgeInsets
> 
> **讨论**使用此属性来调整按钮标题的有效绘图矩形的大小和重新定位。您可以为四个插图（上、左、下、右）中的每一个指定不同的值。正值会缩小或插入该边缘 - 将其移近按钮的中心。负值扩展或开始该边缘。使用 UIEdgeInsetsMake 函数为此属性构造一个值。默认值为 UIEdgeInsetsZero。
> 
> **可用性**适用于 iOS 2.0 及更高版本。
> 
> 在 UIButton.h 中声明

试试这个:)

```
[myButton setTitleEdgeInsets:UIEdgeInsetsMake(0.0, 5.0, 0.0, 0.0)]; 
```

此外，如果您使用的是自定义按钮，则有诸如 Content Insets 和 Image Insets 之类的东西。

以防你在这里寻找 Swift。这是有效的 Swift 3.0

```
myButton.titleEdgeInsets = UIEdgeInsets(top: 0.0, left: 5.0, bottom: 0.0, right: 0.0) 
```

也可以直接设置。如果想使用一个或两个属性，这很有帮助。

```
myButton.titleEdgeInsets.top = 0
myButton.titleEdgeInsets.left = 5
myButton.titleEdgeInsets.bottom = 0
myButton.titleEdgeInsets.right = 0 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-01-05T10:03:56.007

发布 Xcode 8 如果您想通过界面构建​​器 (IB) 设置这些插图，您将在尺寸检查器而不是属性检查器中找到这些插图设置。

希望这可以帮助。

[![在此处输入图像描述](../Images/4417c52c324d77b00f0c3ba88440297a.png)](https://i.stack.imgur.com/1ytZH.png)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-05-08T20:00:54.950

这是一个更好的答案：

*   避免截断按钮标题
*   避免标题超出按钮的视图
*   使按钮框架与图像配合良好。

代码：

```
extension UIButton {
    func addLeftPadding(_ padding: CGFloat) {
        titleEdgeInsets = UIEdgeInsets(top: 0.0, left: padding, bottom: 0.0, right: -padding)
        contentEdgeInsets = UIEdgeInsets(top: 0.0, left: 0.0, bottom: 0.0, right: padding)
    }
} 
```

用法：

```
myButton.addLeftPadding(10) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-02-04T02:05:29.510

在 Xcode 6 中，您可以在 IB 中指定标题插图：

![界面生成器边缘标题插图](../Images/2306ecd7b8ef0ccdde68fec43395bbee.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-01T14:20:21.660

这是另一个如何解决此问题的示例：

```
 [self.myButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

    float padding_button                = 6.0f;
    UIEdgeInsets titleInsets            = UIEdgeInsetsMake(0.0f, padding_button, 0.0f, -padding_button);
    UIEdgeInsets contentInsets          = UIEdgeInsetsMake(padding_button, 0.0f, padding_button, 0.0f);
    CGFloat extraWidthRequiredForTitle  = titleInsets.left - titleInsets.right;
    contentInsets.right += extraWidthRequiredForTitle;
    [self.myButton setTitleEdgeInsets:titleInsets];
    [self.myButton setContentEdgeInsets:contentInsets];
    [self.myButton sizeToFit]; 
```

此外，如果您的按钮有图像，您可以简单地添加：

```
[self.myButton setImage:[UIImage imageNamed:@"YourImage.png"] forState:UIControlStateNormal]; 
```

祝你好运！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-11T09:06:32.563

```
_myButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
_myButton.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0); 
```

# concurrency - FSM 是我基于 Akka Actor 的异步计算引擎的正确解决方案吗

> ID：10589154
> 
> 赞同：3
> 
> 时间：2012-05-14T18:40:48.470
> 
> 标签：concurrency, actor, akka, fsm

我正在编写一个计算引擎（实现为 Akka Actors），它将使用一些异步和并发的 Actor 来执行一些数据检索以及计算的某些部分。

当主要参与者收到开始计算的消息时，它必须在执行计算之前从数据库中检索三个不同的数据。为了进行数据检索，我启动了 3 个演员，每个演员用于数据检索。

在继续下一步之前，我需要所有三个数据集。但是，因为它们是异步和同时检索的，所以我无法知道哪个会首先返回。

我的第一直觉是在我的主要参与者中为每个进程维护一个标志（布尔值）。当每个子actor发回数据集时，我的主要actor中的相应标志设置为true，并且检查其他两个标志以查看是否准备好继续前进。

随着我对 FSM 的了解越来越多，我相信这可能适合我正在做的事情。然而，我的一些“状态”可能同时存在。例如，状态“WaitingForData1”、“WaitingForData2”和“WaitingForData3”可以/将全部共存。在 FSM 中，这似乎不是正确的做法。另一种方法是为其他状态的每个渗透创建一个状态。例如：

*   状态 1：等待数据 1、数据 2 和数据 3
*   状态 2：数据 1 就绪，等待数据 2 和数据 3
*   状态 3：数据 2 就绪，等待数据 1 和数据 3
*   状态 4：数据 3 就绪，等待数据 1 和数据 2
*   状态 5：数据 1 和数据 2 就绪，等待数据 3
    ...
*   状态 N：数据 1、数据 2 和数据 3 就绪

对于我正在做的事情来说，这似乎有点矫枉过正，但实际上可能是实现使用异步和并发进程的 FSM 的最佳方式。

非常感谢您 FSM 专家的任何建议。

# mysql - 如果我在 SQL 表中有两种类型的行，并且我想选择一种但接受另一种

> ID：10589155
> 
> 赞同：0
> 
> 时间：2012-05-14T18:40:48.687
> 
> 标签：mysql, sql, composite-primary-key

我在 MySQL 数据库中有一个目录表，其中包含用户 ID、用户类型和各种其他目录信息。有两种类型的用户：`employee`和`student`。主键是`(userID, userType)`，因此任何给定的用户都可以拥有一条`employee`记录和一条`student`记录（如果他们既是员工又是学生）。

我想对该表的一个子集执行查询，以便：

*   如果用户只有一个`employee`xor`student`记录，则使用该记录，并且
*   如果用户同时拥有 an`employee`和一条`student`记录，`employee`则使用该`student`记录并忽略该记录

我不需要`ORDER BY`在查询中包含子句，但它们可以包含相当复杂的`WHERE`子句（包括对`userType`自身的查询）。

理想情况下，我希望这样做而不必创建额外的表或视图，但如果需要额外的视图，我可以向系统管理员询问`CREATE VIEW`权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:50:17.810

接下来我会做，如果我需要最少的 DDL -

```
Select * From YourTable where UserType='Employee'
Union 
Select * from YourTable s where s.UserType='Student' and s.UserId not in (Select UserId from YourTable where UserType='Employee') 
```

首先将挑选员工，其次 - 仅限学生。没有测试，但它应该适用于 t-sql。

如果你不喜欢“不在”

```
Select * From YourTable where UserType='Employee'
Union 
Select distinct s.* from YourTable s
   left join YourTable e on s.UserId=e.UserId and s.UserType = 'Student' and e.UserType='Employee'
Where e.UserId is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:49:48.967

我建议您有一个表，其中每个用户有一个具有适当用户类型的行。在这种情况下，您可以简单地取 min(userType)，因为当两者都存在时它会选择员工。

然后，您可以在查询中使用它。这是一个例子：

```
select table.*
from table join
     (select userid, min(usertype) as usertype
      from table
      group by userid
     ) users
     on table.userid = users.userid and
        table.usertype = users.usertype 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:57:47.557

并没有实际测试它，但这样的事情应该可以工作：

```
SELECT *
FROM directory
WHERE
    userType = 'employee'
    OR userID NOT IN (
        SELECT userID
        FROM directory
        WHERE userType = 'employee'
    ) 
```

用简单的英语：选择所有员工（OR 左侧）和所有没有相应员工的学生（OR 右侧）。

# c# - 在 try 块中抛出异常有什么问题吗？

> ID：10589168
> 
> 赞同：6
> 
> 时间：2012-05-14T18:41:55.317
> 
> 标签：c#

`try-catch`如下编码一个块是一个好的设计实践吗？即`throw`在 try 块中使用 a ，然后在 catch 块中捕获它。

```
try
{
  if (someCondition){

      throw new Exception("Go the the associated catch block!");

     }
}

catch(Exception ex)
{
      logError("I was thrown in the try block above");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:44:21.023

有时您可能想要 - 例如，如果您使用 ado.net，它习惯于将*所有东西都*扔掉`SqlException`- 您可能想要捕获其中的一些并处理它们，同时让其他的处理到另一个层次。在这种情况下，您必须捕获 SqlException，看看您是否可以处理它，如果不能处理，则重新抛出它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T18:44:23.997

例外情况适用于**例外**情况。它不应该用作流逻辑的控制，但是如果确实出现了需要处理的边缘情况，那么这样做并没有错。

如果我正在读取的数据不是我所期望的，我自己会在我的代码中抛出一个[InvalidDataException 。](http://msdn.microsoft.com/en-us/library/system.io.invaliddataexception.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T18:43:54.340

一般来说，如果它是最短的可写方法，它是不错的设计。但请注意，抛出一个 excaption 通常需要大约 1 ms 才能捕获。在这方面，这是一个性能问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T18:44:22.790

这取决于，您应该在通常情况下抛出异常，并且最好是您自己的异常而不是一般异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T18:46:48.097

这完全取决于您要达到的目标。总的来说，最好避免过度使用 try-catch 块，尤其是因为它们很慢。大量的 try-catch 块会让你的代码看起来凌乱且难以理解。

您需要考虑为什么会抛出异常，是意外错误、错误还是预期错误？如果它是预期的错误，那么您应该尝试围绕它编写代码，而不使用 try-catch。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T19:43:21.767

如果 someCondition 表示真正的错误状态，那么是的。没有问题。但是，请不要用它来控制程序流程。没有什么比看到一个可以退出范围时抛出的异常更让我发疯的了。它也有可能危及对代码中真实异常的正确处理。

# asp.net - Gridview TemplateField 按钮：如何根据值禁用？

> ID：10589173
> 
> 赞同：1
> 
> 时间：2012-05-14T18:42:10.843
> 
> 标签：asp.net, gridview

所以我有这个gridview，在gridview里面我有这个模板字段，在这个模板字段里面我有这个按钮。这一切都很好。但是，如果另一列的值是特定的，我想禁用该按钮，请注意：

```
 <asp:GridView ID="grv_regionManagement" runat="server">
        <Columns>
            <asp:TemplateField HeaderText="Commands" ShowHeader="false">
                <ItemTemplate>
                    <asp:Button Text="Edit" CommandName="Edit" CausesValidation="false" runat="server"
                        ID="btEdit" Enabled='<%# Eval("regionName") != "Disabled" %>' />&nbsp;
                </ItemTemplate>
        </Columns>
    </asp:GridView> 
```

注意评估： Enabled='<%# Eval("regionName") != "Disabled" %>' ，但是这不起作用并且按钮始终处于启用状态，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:47:42.527

```
<%# Eval("regionName").ToString() != "Disabled" %>' /> 
```

# symfony - symfony2：如何编写多对多关系的方法？

> ID：10589174
> 
> 赞同：0
> 
> 时间：2012-05-14T18:42:12.840
> 
> 标签：symfony, doctrine-orm

我在下面创建了通过多对多关系关联的这两个模型（作者和书籍）。然后我生成了 crud 方法。

问题：当我尝试创建或保存作者时，它不会保存书籍。

```
namespace Prueba\FrontendBundle\Entity;

use \Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity()
 * @ORM\Table(name="author")
 */
class Author
{
    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") **/
    protected $id;

    /**
     * @ORM\Column(type="string")
     */ 
    protected $name;

    /**
     * @ORM\ManyToMany(targetEntity="Book", inversedBy="authors")
     * @ORM\JoinTable(name="author_book")
     */
    protected $books;

    public function __construct()
    {
        $this->books = new ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getBooks()
    {
        return $this->books;
    }

    public function addBook($book)
    {die("1");//Here is not entering after creating or editing a book!!!!! why????
        $this->books[] = $book;
    }

    public function setBooks($books)
    {die("2");//Here is not entering after creating or editing a book!!!!! why????
        $this->books = $books;
    }
    public function __toString()
    {
        return $this->name;
    }
}

--------------

namespace Prueba\FrontendBundle\Entity;

use \Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity()
 * @ORM\Table(name="author")
 */
class Author
{
    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") **/
    protected $id;

    /**
     * @ORM\Column(type="string")
     */ 
    protected $name;

    /**
     * @ORM\ManyToMany(targetEntity="Book", inversedBy="authors")
     * @ORM\JoinTable(name="author_book")
     */
    protected $books;

    public function __construct()
    {
        $this->books = new ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getBooks()
    {
        return $this->books;
    }

    public function setBooks($books)
    {
        $this->books = $books;
    }

    public function __toString()
    {
        return $this->name;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:00:28.793

您是否将书籍与`Author`? 因为要关联它，您需要这样做：

```
$Author->addBook($Book); 
```

你是在 addBook 中说的：

```
die("1"); //Here is not entering after creating or editing a book! Why? 
```

之后，当您完成作者和书籍之间的关联后，如果您编辑`Book`，`Author`则不会执行任何操作。关系完成，更改 a 的某些内容`Book`（id 除外）不会影响作者。

[这是一个例子](https://github.com/basico/PFC/blob/dev/src/Webgrf/UserBundle/Controller/MemberController.php#L150)。我将一个空的 MemberBibtex 关联到一个成员。如果表单与数据一起发布，我将使用持久化和刷新保存它。但首先，我将其添加到成员中。

# javascript - 找不到模块`express` | socket.io [node.js]

> ID：10589177
> 
> 赞同：4
> 
> 时间：2012-05-14T18:42:20.200
> 
> 标签：javascript, node.js, socket.io

所以我去了 Git Bash 并输入`npm install socket.io`了我在我的用户文件夹中找到的目录：`C:\Users\weka\node_modules`......无论如何，我将`socket.io`文件夹拖到我的项目`www`文件夹中，因为我正在使用`WAMP`服务器。

所以，这是我`server.js`的测试：

```
var app = require('express').createServer();
var io = require('socket.io').listen(app);

io.sockets.on('connection', function (socket) {
console.log('Someone connected!');
socket.on('set nickname' , function (nickname) {
socket.nickname = nickname;
console.log(nickname + ' just connected!');
});

});

app.listen(8080); 
```

我进入`cmd`并输入`node C:\wamp\www\gameTest\server.js`

我得到它找不到被`module`调用的错误`express`。我以为我下载了`socket.io`？我是 GitHub 的新手。所以我可能做错了。:\

帮助？

更新：我发现我没有安装它。好的，我输入`npm install express`了，现在我的`express`文件夹中有文件`node_modules`夹。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T18:44:13.680

`express`并且`socket.io`是不同的库。只是`npm install express`从您的应用程序的根目录。

此外，请确保您的`node`依赖项位于名为的文件夹中`node_modules`- 这是用于模块解析的约定。所以，你应该有一个看起来像这样的文件结构：

```
/some-app
    /node_modules
        /express
        /socket.io
    server.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:02:39.523

对我来说，解决方法是在项目的根目录下运行 npm。它会安装与您的项目相关的文件，这就是 node.js 然后查找它们以解析文件名的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T06:05:52.400

在您的情况下，您应该将`express`模块文件夹从: 复制`C:\Users\weka\node_modules`到您的项目目录中`C:\wamp\www\gameTest\node_modules`。如果您的项目文件夹中没有命名`'node_modules'`文件夹，请先创建它并将这些文件粘贴到此文件夹中。这种方法对我的`windows pc`. 重新启动节点服务器并再次运行命令`node C:\wamp\www\gameTest\server.js`。它现在应该可以工作了！！！！

# asp.net - ASP.NET 上下文 RewritePath 404 错误

> ID：10589179
> 
> 赞同：3
> 
> 时间：2012-05-14T18:42:21.400
> 
> 标签：asp.net, iis-7, url-rewriting, url-routing, http-status-code-404

我有一个 .net 4.0 Web 应用程序，在我的本地计算机和旧 Web 服务器上运行起来就像一个魅力。两台计算机都使用经典和 .net 4.0 应用程序池，没有任何问题。

但是当我迁移到新的 Web 服务器时，它会给出 404 错误，而不是重写 url。我创建了一个尽可能简单的新应用程序。它将所有请求路径重写为 default.aspx，如下所示：

全球.asax.cs

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    Context.RewritePath("default.aspx", false);
} 
```

如果我直接请求文件本身，我可以访问 default.aspx，但是当我向除“default.aspx”之外的地址发出请求时，我从静态文件处理程序中收到 404 错误。

你有什么想法，我该如何解决？

全尺寸图片[**在这里**](https://i.stack.imgur.com/arBhX.png) ![在此处输入图像描述](../Images/9f44138620f0df54454dc2d42df1f3d5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:12:12.270

您必须检查应用程序池身份设置。确保您的 Web 应用程序的 appPool 身份已设置 ApplicationPoolIdentity 并且应集成托管管道模式。

然后检查您的 Web 配置 system.webserver 模块并在您的应用程序 Web 配置上启用此配置。

```
<system.webServer><modules runAllManagedModulesForAllRequests="true"> </modules></system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:43:46.007

我遇到了类似的问题。我在 APP_Code 文件夹中有一个 URL 重写类，该类在 Visual Studio 2008 开发服务器和 IIS 6.5 上运行，但在 IIS 7.5 中**没有。**“OnBeginRequest”似乎没有触发，我收到了同样的 404 错误。经过相当多的试验和错误后，我找到了解决我问题的组合：

在网站基本设置下的 IIS 7.5 中，将应用程序池设置更改为“Classic .NET AppPool”。

在 Web.config 中，我添加了以下内容以引用 URL 重写类：

```
<httpModules>
     <add name="*URLRewriteClassName*" type="*Namespace.URLRewriteClassName*"/>
  </httpModules> 
```

由于您正在从全局应用程序类执行重写代码，因此我将尝试首先更改应用程序池，看看会发生什么。希望这会有所帮助，祝你好运！

# nhibernate - 映射产品和购物车 - NHibernate

> ID：10589180
> 
> 赞同：0
> 
> 时间：2012-05-14T18:42:29.620
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用 NHibernate 和 Fluent NHiberate。我写了两个类如下：

```
public class Product
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual decimal Price { get; set; }
}

public class ShoppingCart
{
    public virtual int Id { get; set; }
    public IList<Product> Products { get; set; }

    public decimal CartTotal
    {
        get { return Products.Aggregate(0m, (c,x)=>  c + x.Price; ); }
    }

    public ShoppingCart()
    {
        Products = new List<Product>();
    }
} 
```

我想映射`Product`，`ShoppingCart`但我不希望任何`ShoppingCart.Id`作为`Products`表中的键。如何使用定义地图`Fluent NHibernate`？

PS：-我尝试过映射`Category`和`SucCategory`使用自引用类别。但我无法解决`ShoppingCart`问题`Product`。我也想用`MS Sql Server CE 4.0`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:03:04.047

我想，你想要一个多对多的关系。这可以在 Fluent 中使用如下映射来完成：

```
public class ShoppingCartMap : ClassMap<ShoppingCart>
{
    public ShoppingCartMap()
    {
        HasManyToMany(x => x.Products).Table("ShoppingCartToProduct");
        // Other properties follow...
    }
} 
```

这将生成一个名为“ShoppingCartToProduct”的表，其中包含两个外键列（一个指向 Product.Id，一个指向 ShoppingCart.Id）。

# jquery - Rails 3 Jquery 使选择标签不显眼

> ID：10589186
> 
> 赞同：1
> 
> 时间：2012-05-14T18:42:47.763
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, unobtrusive-javascript

我想让**选择**更不引人注目。

我希望当用户选择特定选项时 jquery 会自动发送适当的请求，例如**/conroller/action/1**

```
<form id="some-id" method="post" data-remote="true" action="/templates?locale=uk" >
<select id="user-templates" data-remote="true" name="user-templates">
   <option href="/controller/action/1" data-remote="true" value="1">option-1</option>
   <option href="/controller/action/2" data-remote="true" value="2">option-2</option>
   <option href="/controller/action/3" data-remote="true" value="3">option-3</option>
   <option href="/controller/action/4" data-remote="true" value="4">option-4</option>
</select>
</form> 
```

但目前它根据所选选项 发送奇怪的请求，例如**http://127.0.0.1:3000/templates?locale=uk&some-id=1 。**

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:51:05.987

标签没有`href`属性。`option`您的选择是：

方法一。

```
<option onclick="location.href = '/controller/action/1'" 
  data-remote="true" value="1">option-1</option> 
```

方法 2\. JavaScript：

```
$("#user-templates").change(function() {
  location.href = "/controller/action/" + $("#user-templates").val();
}); 
```

或者，如果您想在后台发送请求：

```
$("#user-templates").change(function() {
  $.get("/controller/action/" + $("#user-templates").val());
}); 
```

# postgresql - 外部调用函数时的事务和写入性能

> ID：10589187
> 
> 赞同：1
> 
> 时间：2012-05-14T18:42:54.850
> 
> 标签：postgresql, psycopg2

我有一个从 python 脚本（使用 psycopg2）调用的存储函数，它平均执行大约 10 个 UPDATE 或 INSERT 语句。iostat 显示我经常达到 15k 写入/秒和 100% 的利用率。

我希望我可以改变一些东西来减少那些 iostat 数字，因为我需要该功能尽快运行。

在这种情况下，关于事务和功能的最佳策略是什么？我应该什么时候执行提交？

我记得在某处读过这样的调用我存储的函数会自动开始和结束我的事务。做其他事情会更好吗，比如将所有函数参数插入一个充当队列的表中，然后我修改我的函数以读取该表并完成它的工作？

从评论中的链接输出，

```
version                      | PostgreSQL 9.1.3 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-51), 64-bit
checkpoint_completion_target | 0.9
checkpoint_segments          | 32
client_encoding              | UTF8
default_statistics_target    | 100
effective_cache_size         | 8GB
lc_collate                   | en_US.UTF-8
lc_ctype                     | en_US.UTF-8
log_destination              | stderr
log_rotation_age             | 1d
log_rotation_size            | 0
log_truncate_on_rotation     | on
logging_collector            | on
maintenance_work_mem         | 64MB
max_connections              | 30
max_stack_depth              | 2MB
port                         | 5432
server_encoding              | UTF8
shared_buffers               | 4GB
synchronous_commit           | off
temp_buffers                 | 128MB
TimeZone                     | US/Eastern
wal_buffers                  | 16MB
work_mem                     | 128MB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:15:20.097

除了 kgrittin 提出的改进磁盘子系统的建议之外，我想对事务提出一点意见。事务在 WAL 上强制执行 fsync，因此提交越少，强制的物理写入就越少。一般来说，事务的逻辑分组比性能更重要，但这确实意味着较长的事务，只要它们不互相等待，将比大量较短的事务执行得更好。

# html - 在 div 上创建自定义虚线边框的 HTML 技术？

> ID：10589188
> 
> 赞同：0
> 
> 时间：2012-05-14T18:42:57.427
> 
> 标签：html, css, border

这是一个屏幕截图示例：

![在此处输入图像描述](../Images/c83b1a788e7ed9e48b31a6624e25b66b.png)

注意容器周围的边框。我怎样才能为网站实现这种效果？

我尝试了以下规则：

```
border: 1px dotted black; 
```

结果是：

![在此处输入图像描述](../Images/4b3319bfe3c255e977d4eb0bdf2c32fd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T18:46:24.803

试试`dashed`。

```
border: 1px dashed #ccc; 
```

[例子。](http://jsbin.com/arigap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T18:45:15.523

这并不完全跨浏览器兼容，因为它是 CSS3 中的新功能。你可以在这里阅读更多关于它的信息：[http ://www.css3.info/preview/border-image/](http://www.css3.info/preview/border-image/)

一种更自定义的方法是使用两个重叠的 div，其中一个只比另一个稍微大一点，或者使用填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T19:00:00.710

点的大小由边框宽度控制 - 试试`border: 4px dotted #ccc;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T18:51:32.213

在文本上设置`margin-top`为`0.5em``border``dashed`

看这个[例子](http://jsfiddle.net/jackdent/n7Ejj/1/)

对于完整的布局尝试[这样的](http://jsfiddle.net/jackdent/n7Ejj/2/)

# php - PHP：相对于 curl'ed html 中的绝对 URL

> ID：10589190
> 
> 赞同：0
> 
> 时间：2012-05-14T18:43:17.473
> 
> 标签：php, curl

我在 PHP 中使用 curl 检索一个简单的 HTML 页面：

```
<?php
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, "http://example.com/server");
 curl_setopt($ch, CURLOPT_HEADER, 0);
 curl_exec($ch);
 curl_close($ch);
?> 
```

并将`include`其放入我网站上的文件中：

```
<?php include('curlingCodeAbove.php');?> 
```

我想`curl`用绝对 URL 替换 ed HTML 中的相对 URL。我熟悉[将相对 URL 更改为绝对 URL](https://stackoverflow.com/questions/3342785/)，但我尝试将该解决方案插入此代码但未成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:00:50.133

自己修好了。设置`CURLOPT_RETURNTRANSFER`标志。

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://example.com/server");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);
$result = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+)([\"'>]+)#",'$1http://mydomain.com/$2$3', $result);
echo $result
?> 
```

虽然接受你自己的答案可能是一种不好的形式，但嘿，我是那个想出来的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:48:42.363

我这样做的方式是搜索`="/`并替换为`="http://www.example.com/`

例如：

```
$replaces['="/'] = '="http://www.example.com/';
$output = str_replace(array_keys($replaces), array_values($replaces), $output); 
```

我没有检查这个，但它应该做你需要的。

# xaml - Windows 8 GridView - 视差背景图像

> ID：10589192
> 
> 赞同：1
> 
> 时间：2012-05-14T18:43:19.233
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

关于滚动时如何在gridview上实现视差效果的任何想法？我正在寻找类似于 Windows 主屏幕的效果，在滚动时移动背景图像。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:20:16.663

您需要处理[ScrollViewer.ViewChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.viewchanged.aspx)用于滚动 GridView 并更新背景中图像的定位。[您可以使用WinRT XAML Toolkit](http://bit.ly/WinRTXamlToolkit)的[VisualTreeHelperExtensions](http://bit.ly/VisualTreeHelperExtensions)扩展方法获取 ScrollViewer - 本质上

```
ScrollViewer myScrollViewer = myScrollViewermyGridView.GetFirstDescendantOfType<ScrollViewer>();
myScrollViewer.ViewChanged += UpdateBackgroundImagePosition; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:09:55.330

1）将您的 ScrollViewer 命名为 MyScrollviewer

2) 将 RenderTransform 添加到您的后台用户界面元素，如下所示：

```
 <your background.RenderTransform>
    <CompositeTransform TranslateX="{Binding ElementName=MyScrollViewer, Path=HorizontalOffset, Converter={StaticResource ParallaxConverter}}" />
  </your background.RenderTransform> 
```

3）实现一个ParallaxConveter（乘以-.1）

有关详细信息，请参阅[http://w8isms.blogspot.com/2012/06/metro-parallax-background-in-xaml.html](http://w8isms.blogspot.com/2012/06/metro-parallax-background-in-xaml.html)。

# sql-server-2008 - 将 X 年添加到日期时间变量 SQL Server 2008

> ID：10589193
> 
> 赞同：1
> 
> 时间：2012-05-14T18:43:20.703
> 
> 标签：sql-server-2008

对于 2010 年访问的每个人，我需要在日期的年份部分添加 10 年，日期以 yyyy-mm-dd 格式存储。以下是我想尝试但我不知道如何使用的查询SQL Server 的回滚功能呢。Visityear 是 varchar 数据类型。

```
update myTable
set admitdate=dateadd(yyyy,10,admitdate)
where visitYear='2010' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:50:16.387

在 SQL Server 2008 中，所有查询都是隐式提交的事务的一部分。我假设你可以使用 dateadd 函数，你所拥有的看起来是正确的。因此，要修改以允许回滚，您可以执行以下操作 - 尽管不确定何时/为什么要回滚，但需要添加该逻辑。

```
BEGIN TRANSACTION addDateYears
update myTable
set admitdate=dateadd(yyyy,10,admitdate)
where visitYear='2010'

/* IF SOMETHING ROLLBACK TRANSACTION addDateYears */

COMMIT TRANSACTION addDateYears 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:48:42.650

如果你想在你的桌子上做：

```
BEGIN TRANSACTION

UPDATE dbo.myTable
SET admitdate = DATEADD(YEAR, 10, admitdate)
WHERE visitYear = '2010'

SELECT visityear, admitdate 
FROM dbo.myTable
WHERE visitYear = '2010'

ROLLBACK TRANSACTION 
```

当然 - 如果您想实际应用更新，请使用`COMMIT`而不是`ROLLBACK`....

# c# - 在 Tab 按键上将新项目添加到 ListBox

> ID：10589228
> 
> 赞同：3
> 
> 时间：2012-05-14T18:45:14.960
> 
> 标签：c#, wpf, listbox, listboxitem, attachedbehaviors

我有一个 WPF 列表框，带有一个用于列表框 ItemTemplate 的自定义 DataTemplate（每个项目都有一组控件；即文本框和日期选择器）。我有一个附加到最后一个 DatePicker 的行为，它允许用户在事件处理程序中为 PreviewKeyDown 事件执行 ICommand。

这个想法是，用户将通过 ListBoxItem 中的控件进行 TAB，当他们到达最后一个控件时，再次按 TAB，一个新的 ListBoxItem 将添加到 ListBox。然后焦点将移至下一个 ListBoxItem 中的第一个控件。当 ListBox 中已有 2 个项目并且您在第一个项目中切换时，我的解决方案可以正常工作。如果 ListBox 中只有一项，并且您到达最后一个控件，则会添加新的 ListBoxItem（如预期的那样），但焦点会从 ListBox 移到下一个父控件。

这就像调用 Behavior 代码并调用 ICommand 一样，但 TAB 事件会继续进行，而无需等待添加新的 ListBoxItem。

有什么建议么？

我的行为（ZBehaviorBase 只是一个允许“更好”清理的类）：

```
public class TabOffCommandBehavior : ZBehaviorBase<FrameworkElement>
{
    public ICommand TabCommand
    {
        get { return (ICommand)GetValue(CommandProperty); }
        set { SetValue(CommandProperty, value); }
    }

    public static readonly DependencyProperty CommandProperty =
        DependencyProperty.Register("TabCommand", typeof(ICommand), typeof(TabOffCommandBehavior));

    protected override void Initialize()
    {
        this.AssociatedObject.PreviewKeyDown += new KeyEventHandler(AssociatedObject_PreviewKeyDown);
    }

    protected override void Uninitialize()
    {
        if (this.AssociatedObject != null)
        {
            this.AssociatedObject.PreviewKeyDown -= new KeyEventHandler(AssociatedObject_PreviewKeyDown);
        }
    }

    void AssociatedObject_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        // if you want to pass a command param to CanExecute, need to add another dependency property to bind to
        if (TabCommand != null && e.Key == Key.Tab && TabCommand.CanExecute(null))
        {
            TabCommand.Execute(null);
        }
    } 
```

**XAML：**

```
<ListBox Grid.Row="1" KeyboardNavigation.TabNavigation="Continue" ItemsSource="{Binding Path=OrderLines, Mode=OneWay}" 
                 ItemTemplate="{DynamicResource LineTemplate}" SelectionMode="Extended">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Margin" Value="0,5,0,5"/>                        
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template" Value="{DynamicResource ListBoxItemTemplate}"/>
            <Setter Property="IsEnabled" Value="{Binding Path=IsLocked, Converter={StaticResource NotBoolConverter}}"/>
            <Setter Property="IsSelected" Value="{Binding Path=IsSelected}"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

**在“线模板”内：**

```
<TextBox Grid.Column="9" Grid.Row="3" Text="{Binding Path=SellPriceOverride, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center" Margin="5,0" TabIndex="10">
    <!--IF ANOTHER INTERACTIVE CONTROL IS ADDED PAST THIS ONE ON THE LINE, THIS COMMENT AND THE BEHAVIOR MUST BE MOVED TO THAT CONTROL INSTEAD-->
    <e:Interaction.Behaviors>
         <ZViewModels:TabOffCommandBehavior TabCommand="{Binding Path=DataContext.AddNewOrderLine, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBox}}"/>
    </e:Interaction.Behaviors>
</TextBox> 
```

在命令的“Execute”方法中唯一要做的就是将一个对象添加到一个集合中，该集合是 ListBox 的 ItemsSource

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:33:38.980

在您的 AddNewOrderLine 方法中，尝试将焦点设置在您添加的新项目上。然后为了防止焦点改变，修改如下代码：

```
void AssociatedObject_PreviewKeyDown(object sender, KeyEventArgs e)
{
    // if you want to pass a command param to CanExecute, need to add another dependency property to bind to
    if (TabCommand != null && e.Key == Key.Tab && TabCommand.CanExecute(null))
    {
        TabCommand.Execute(null);
        e.Handled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:58:01.927

你有没有在你的 ListBox 上试过这个：

```
<ListBox FocusManager.IsFocusScope="True" ... > 
```

或这个：

```
<ListBox KeyboardNavigation.DirectionalNavigation="Contained" ... > 
```

或两者？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:03:23.980

尝试

```
if (e.KeyCode == Keys.Tab) 
```

# php - 规范化行顺序php

> ID：10589238
> 
> 赞同：1
> 
> 时间：2012-05-14T18:45:45.913
> 
> 标签：php, mysql, database-design

如何使用 php 以正确的方式订购以下结构：我有 3 个表

主表：`domain`与`text modules`（外键 fk_text_modules_domain_id）和`product modules`（外键 fk_product_modules_domain_id）表相关，每个表都有顺序字段来标记行的顺序。我正在分离查询以过滤数据，并在合并 2 个数组之后。我的问题是：如果第一个表 order 字段值与第二个表 order 值相同，则行的顺序不会以正确的方式呈现。我应该改变什么，我应该如何解决这个问题以获得最佳结果。

```
+---domain----+

id   name 

1    example

+----text_modules----+

id   name     domain_id  position
1    example  1          1

+----text_modules-----+

1    example  1          1 
```

如何标准化位置列中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:39:07.690

> 我的问题是：如果第一个表 order 字段值与第二个表 order 值相同，则行的顺序没有以正确的方式呈现。

好吧，那就不要使用相同的`position`！

要利用 DBMS 强制 a`text_module`永远不能与`position`a相同`product_module`（对于相同的`domain_id`），您可以使用继承将其“提取”`position`到一个公共表中，并直接在该表上使其成为唯一。像这样的东西：

![在此处输入图像描述](../Images/278d3487cd6afbbb89a83da09531c826.png)

表示`U1`UNIQUE 约束。`{domain_id, position}`

*顺便说一句，考虑使用自然键（上面未显示）- InnoDB 表是[聚集](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)的，二级索引很昂贵。*

* * *

另一方面，继承带来了其自身的复杂性，因此您可以考虑保留当前表并执行以下操作之一：

*   在任一表中插入新行之前，检查订单是否已在任一表中。但是，在并发环境中，如果没有额外的锁定，这将无法工作。
*   `position`如果合适，请使用时间戳而不是。

# c++ - 在c ++中将对插入地图

> ID：10589240
> 
> 赞同：2
> 
> 时间：2012-05-14T18:45:58.753
> 
> 标签：c++, dictionary, insert, mapping

我有以下地图结构：

```
std::map<std::pair<int, char>, int> transitions; 
```

表示非确定性自动机的转换，每个都有 2 个整数和一个字符 I、J 和 C，表示转换的状态，即转换从状态 i 到状态 J，字符 C。

```
0 0 a
0 1 a
1 1 b
1 2 c
1 3 c
3 4 d
4 4 d
4 5 d 
```

我想插入它。我该怎么办？

我想过做以下事情：

```
typedef map<pair<int, char>, int> transitions;
    for (j=0; j<numberTransitions;j++)
    {

        cin>> stateOrigin>>stateDestination>>transitionCharacter;
        transitions.insert(transitions::value_type(std::make_pair(stateOrigin,transitionCharacter), stateDestination ));

    } 
```

我不认为这是这样做的方法，我是使用地图库的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:03:56.930

我唯一看错的是你需要一个对象：

```
 transitions.insert(transitions::value_type(std::make_pair(stateOrigin,transitionCharacter), stateDestination ));
    ^^^^^^^^^^^   is a type

    /// Should be 
    transitions   trans;

    // Then later in the loop.
    trans.insert(transitions::value_type(std::make_pair(stateOrigin,transitionCharacter), stateDestination )); 
```

你甚至可以更进一步，使用 key_type 而不是 make pair：

```
trans.insert(transitions::value_type(transitions::key_type(stateOrigin,transitionCharacter), stateDestination ));

// or
for(/*STUFF*/)
{
    typedef transitions::value_type  value_type;
    typedef transitions::key_type    key_type;
    trans.insert(value_type(key_type(stateOrigin,transitionCharacter), stateDestination ));
} 
```

# php - PHP“Foreach”问题

> ID：10589244
> 
> 赞同：-2
> 
> 时间：2012-05-14T18:46:12.573
> 
> 标签：php

为了我的爱，我不知道发生了什么。我很少有客户订阅缺货的商品。现在该商品有货，我得到了这个：

```
Undefined variable: items in (web url) Warning: Invalid argument supplies for foreach() 
```

当我找到该行时，它的代码在这里：

但在某个地方：

```
<?php foreach($items as $item){ ?>
  <li><a href="<?php echo $item['href']; ?>"><?php echo $item['name']; ?></a> - (<?php echo $item['count']; ?>)</li> 
<?php } ?> 
```

有问题。对我来说，一切似乎都是正确的。是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:33:15.357

问题就在你面前。在错误中，它说`undefined variable: items...`

确保`$items`在使用之前定义它，例如`if( isset($items) )`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-14T18:49:09.857

试试这个（如果你只想删除警告）：

```
<?php if (isset($items) && is_array($items)) { foreach($items as $item){ ?> 
```

和

```
<?php }} ?> 
```

或者，查看可用于隐藏警告的 PHP 'error_reporting' 和 'display_errors' 指令。

# zope - Grok NameError on tal:attributes="action view/url"

> ID：10589249
> 
> 赞同：2
> 
> 时间：2012-05-14T18:46:27.847
> 
> 标签：zope, grok

我正在关注[Grok 教程](http://grok.zope.org/doc/current/tutorial.html#storing-data)，但在

```
 tal:attributes="action view/url" 
```

POST 表单的一部分。我假设这在 URL 中扑通一声，但我对为什么会收到以下错误感到困惑。

```
 File "/root/.buildout/eggs/Chameleon-2.8.5-py2.6.egg/chameleon/utils.py", line 404, in __getitem__
    raise NameError(key)
NameError: url

 - Expression: "view/url"
 - Filename:   /root/Sample/src/sample/app_templates/edit.cpt
 - Location:   (3:29)
 - Source:     <form tal:attributes="action view/url" method="POST">
                                        ^^^^^^^^ 
```

我没有使用 Zope 或 Grok 的经验：我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T01:56:16.193

我不知道问题的实际原因是什么（也只是按照教程进行操作），但似乎如果你用 替换有问题的地方`tal:attributes="action view.url()"`，错误就会消失，你可以继续学习教程。

（两年没人愿意回答这个问题，呵呵）

# html - 拉伸 HTML 容器以适应背景图像的大小

> ID：10589252
> 
> 赞同：1
> 
> 时间：2012-05-14T18:46:40.757
> 
> 标签：html, css, layout, background-image

可以编写 CSS 来拉伸容器的背景图像以适应容器。但是是否可以反过来，即编写使容器调整大小以适应背景图像的 CSS？

在过去，我使用 JQuery 使用了一个丑陋的 hack（我不满意，因为它取决于图像文件名中实际指定的图像尺寸）。所以我的强烈偏好是使用 CSS 来做到这一点，但如果那是不可能的，那么我也会对最干净的 Javascript/JQuery 解决方案感到满意。

（旁注：毫无疑问，这似乎是一件奇怪的事情。原因是我正在使用一个渲染引擎，它会根据某些设备参数吐出一个大小的图像。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:50:53.010

元素不知道背景图像的尺寸。

您需要使用 JavaScript 来执行此操作。您可以将图像读入变量，然后检查那里的尺寸，然后将它们转移到容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:59:46.077

我认为仅使用 css 是不可能的，但我并不是说任何事情都是不可能的。我不确定你的用例是什么，但你可以在你设置背景的元素中嵌入一个 img 标签。将 img 标签的 src 设置为同一张图片将强制浏览器以相同的尺寸渲染父元素。

然后使用 css 可以隐藏元素，背景元素将呈现全尺寸。您还可以使用 jQuery 动态注入隐藏的 img 元素，并在包装​​元素上设置相同的背景图像。

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        div .img { visibility: hidden; }
        div { background: url(img.jpg) top left no-repeat; }
    </style>
</head>
<body>
    <div><img src="img.jpg" /></div>
</body>
</html> 
```

这种方法的主要后果是 IE 和其他浏览器可能会下载图像两次。Chrome 足够聪明，可以避免这个问题。但我没有测试 FF、Safari 或 Opera。

# css - 边距：0 自动；不在 IE 中工作也一切混乱。UL 也乱了套

> ID：10589255
> 
> 赞同：0
> 
> 时间：2012-05-14T18:47:16.550
> 
> 标签：css, internet-explorer, html, margin

我在 IE 上遇到了很多麻烦。即使我最初已将重置应用于所有标签，但整个页面还是杂乱无章。Mozilla 和 Chrome 正确显示它，但 IE 给了很多压力。如果有人可以提供帮助，我将不胜感激。

Jquery 也不能正常工作。和 div 杂乱无章

首先在 Mozilla 中查看它以了解我的设计。然后在IE中打开看看有什么问题。

在这里查看[http://www.crawller.com/opal/](http://www.crawller.com/opal)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:58:59.123

谢谢大家。我通过在开始之前包含这条线解决了这个问题

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

这解决了问题，CSS 和 jquery 代码现在在 IE 中响应良好。[您可以在http://www.crawller.com/opal/new/](http://www.crawller.com/opal/new/)查看修改后的版本

旧的也可以在[http://www.crawller.com/opal/](http://www.crawller.com/opal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:52:07.863

对于初学者来说，您的 css 中似乎有一些拼写错误的属性，几个对“块”的引用，我假设您的意思是“块”。

确保您的 html 和 css 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:53:18.610

您的文档中有很多标记验证错误。首先尝试修复这些错误。

[检查您的站点以进行 w3c 标记验证](http://validator.w3.org/)

# javascript - 当我使用 AddThis 代码时，我的 URL 中添加了一个随机的“#.XXXXXXXXXXXX”字符串？

> ID：10589256
> 
> 赞同：2
> 
> 时间：2012-05-14T18:47:16.517
> 
> 标签：javascript, html, widget, addthis

我已将“AddThis”添加到我的网站，这是我使用的代码：

```
 <!-- AddThis Button BEGIN -->
                <a class="addthis_button_facebook_like" addthis:url="http://facebook.com/MySpills" fb:like:layout="button_count"></a>
                <a class="addthis_button_tweet"></a>
                <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
            <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
            <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4fabf4922f71c398"></script>
        <!-- AddThis Button END --> 
```

现在由于某种原因，每次我访问一个页面时，URL 都会发生这种情况：

```
http://domain/page#.T7FTDJ8ti28 
```

`#.T7FTDJ8ti28`每次刷新页面时都会发生变化，我担心这可能会混淆 Google 或其他搜索引擎。在 URL 中包含它也看起来不太好，那么我该如何摆脱它呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T21:09:21.600

这就是通常所说的：[一个 HASH](http://en.wikipedia.org/wiki/Fragment_identifier)，它服务于几件事。

在**AddThis**上下文中，它以某种方式跟踪链接，以便他们知道什么是**直接链接**和**共享链接**。

一切都在他们的[**分析文章**](http://support.addthis.com/customer/portal/articles/381254-address-bar-sharing-analytics#.T7FzAOtBl8F)中进行了解释。

这不会对搜索引擎优化 (SEO) 产生任何影响，因为规则是跟踪常规链接部分而不是散列部分。

* * *

顺便说一句，如果您想了解更多有关如何使用网址的哈希部分的信息，那么下面的链接是一个很好的起点文章。

> [我们是在用 Hash 和 Bang 破坏网络吗？](http://web.appstorm.net/general/opinion/are-we-breaking-the-web-with-a-hash-and-a-bang/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-28T20:20:18.813

改变

```
var addthis_config = {"data_track_addressbar":true}; 
```

到

```
var addthis_config = {"data_track_addressbar":false}; 
```

# networking - 计算网络跳数

> ID：10589263
> 
> 赞同：1
> 
> 时间：2012-05-14T18:47:53.820
> 
> 标签：networking

是否有任何算法可以计算计算机必须进行的网络跳数才能到达另一台计算机？我试图用谷歌搜索它，但没有与我的查询匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:49:30.600

在 Windows 上尝试 TRACEROUTE 或 TRACERT。

单纯的“算法”与 UDP 数据包（老派）上的 TTL 和较新实现中的 ICMP ECHO 有关。

希望您现在有足够的关键字进行谷歌搜索。

# .net - 不从数据模板调用 DependencyProperty 验证（仅在 .NET 4.0 中）

> ID：10589266
> 
> 赞同：1
> 
> 时间：2012-05-14T18:48:12.663
> 
> 标签：.net, wpf, validation, user-controls, datatemplate

## .NET 4.0 中存在一个问题，在 3.5 中不存在（没有测试过更早或更晚的框架）。

我创建了一个演示用户控件，它只有一个属性 Num（整数类型）：

```
Public Class UserControl1

Public Shared NumProperty As DependencyProperty = _
            DependencyProperty.Register("Num", _
                                        GetType(Integer), _
                                        GetType(UserControl1), _
                                        New PropertyMetadata(defaultValue:=0, _
                                                PropertyChangedCallback:=New PropertyChangedCallback(AddressOf OnNumPropertyChanged), _
                                                CoerceValueCallback:=New CoerceValueCallback(AddressOf OnNumPorpertyCoerce)), _
                                        New ValidateValueCallback(AddressOf IsNumValid))

Public Property Num As Integer
    Get
        Return GetValue(NumProperty)
    End Get
    Set(value As Integer)
        SetValue(NumProperty, value)
    End Set
End Property

Public Shared Function IsNumValid(value As Object) As Boolean
    If value IsNot Nothing And TypeOf value Is Integer Then
        If CInt(value) < 0 Then
            Return False
        End If
    End If

    Return True
End Function

Public Shared Sub OnNumPropertyChanged(sender As DependencyObject, e As DependencyPropertyChangedEventArgs)
    ' do nothing here
End Sub

End Class 
```

因此，基本上，您不能将任何小于零的值设置为 Num。

## 问题

当我在 WPF 窗口中使用此控件并尝试设置 Num=-1 时，我得到了异常。但是，如果我尝试将此控件用作 DataTemplate 的一部分，并且还设置 Num=-1，**则不会引发异常**。

我试图在我的用户控件的验证过程中放置​​一个断点，但它只在窗口中的用户控件的情况下被击中，如果我在 DataTemplate 中有用户控件，它不会被击中。

谁能解释为什么不从 DataTemplate 执行验证？

PS 你可以在微软的论坛上找到相关的帖子：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/f7fd05a5-cae3-496a-8abe-590541ecdd0a](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f7fd05a5-cae3-496a-8abe-590541ecdd0a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:34:40.283

在我的情况下，这一切似乎都工作正常......在正常托管的情况下以及在用户控件的模板托管的情况下，我都会遇到验证错误！

**用户控制 XML：**

```
<UserControl x:Class="ContentControlTest.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:ContentControlTest">
    <StackPanel>        
        <TextBox Text="{Binding Num,
                 RelativeSource={RelativeSource
                       AncestorType={x:Type local:UserControl1}},
                 ValidatesOnExceptions=True, ValidatesOnDataErrors=True,
                 NotifyOnValidationError=True, NotifyOnSourceUpdated=True,
                 UpdateSourceTrigger=LostFocus}"/>
    </StackPanel>
</UserControl> 
```

**背后的用户控制代码：**

```
public partial class UserControl1 : UserControl
{
    public static readonly DependencyProperty NumProperty
        = DependencyProperty.Register(
            "Num",
            typeof (int),
            typeof (UserControl1),
            new PropertyMetadata(
                0, NumPropertyChangedCallback,
                NumCoerceValueCallback), NumValidateValueCallback);

    public static void NumPropertyChangedCallback
           (DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var i = Convert.ToInt32(e.NewValue);
    }

    public static object NumCoerceValueCallback
                 (DependencyObject d, object baseValue)
    {
        if (Convert.ToInt32(baseValue) < 0)
        {
            return 0;
        }

        return baseValue;
    }

    public static bool NumValidateValueCallback(object value)
    {
        var i = Convert.ToInt32(value);
        return i >= 0;
    }

    public int Num
    {
        get
        {
            return (int)this.GetValue(NumProperty);
        }

        set
        {
            this.SetValue(NumProperty, value);
        }
    }

    public UserControl1()
    {
        InitializeComponent();
    }
} 
```

**窗口 XAML：**

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        xmlns:usrctrl="clr-namespace:ContentControlTest;assembly=ContentControlTest"
        Height="300" Width="300">
    <StackPanel>        
        <usrctrl:UserControl1 Margin="5" Num="-1"/>
        <Separator Margin="5"/>        
        <ItemsControl Margin="5">
            <ItemsControl.ItemsSource>
                <x:ArrayExtension Type="{x:Type System:String}">
                    test
                </x:ArrayExtension>
            </ItemsControl.ItemsSource>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <usrctrl:UserControl1 Num="-1"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>  
    </StackPanel>
</Window> 
```

如果您按原样编译上述 Window.XAML 代码，您将获得编译异常本身，即“-1”不是在基于数据模板和非模板用户控件中设置为 Num 属性**的****有效值**.

 **但是，如果您从两个用户控件中删除 Num="-1" 然后编译并运行应用程序，它会加载默认值为 0 的两个文本框。

现在在文本框中，如果您输入 -1 ，则**两个文本框都会**变为红色，表示验证模型正在处理它们的固有绑定。

所以我不确定为什么这不适用于您的情况！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:40:57.243

虽然 Microsoft 解决了这个问题（在[https://connect.microsoft.com/VisualStudio/feedback/details/742083/dependencyproperty-validation-is-not-call-from-data-template](https://connect.microsoft.com/VisualStudio/feedback/details/742083/dependencyproperty-validation-is-not-called-from-data-template)上投票），但可以使用解决方法：

在您的强制函数调用验证函数中（为所有这些情况保留验证函数，然后调用它）。如果验证结果为 False，则引发 System.ArgumentException 并带有此类模式的消息：“%INVALID VALUE%”不是属性“%PROPERTY_NAME%”的有效值。通过提供这样的代码，您将为您的用户控件的用户提供他或她从常规验证中获得的相同信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T22:14:43.593

WPF 中的 DataBinding 不会抛出异常，只是在发生异常时不起作用。我对此有复杂的感觉，但这肯定会使调试变得困难。请参阅[这篇文章](http://bea.stollnitz.com/blog/?p=52)了解如何实现跟踪。我打赌你会看到错误。**

# c# - WPF TimeSpan 绑定到标签，无需毫秒

> ID：10589270
> 
> 赞同：2
> 
> 时间：2012-05-14T18:48:18.563
> 
> 标签：c#, wpf, xaml, data-binding

在我当前的项目中，我试图显示一个具有 TimeSpan 绑定的标签。实际上 xaml 看起来很简单：

```
<Label Content="{Binding ElementName=Root, Path=DataSource.TimeTotal, StringFormat={}{0:hh\:mm}}"/> 
```

这正是[这个问题](https://stackoverflow.com/questions/5974763/binding-timespan-in-wpf-mvvm-and-show-only-minutesseconds)中显示的内容。但它不起作用，它总是显示完整的时间，而不仅仅是小时+分钟。

我测试了很多解决方案，但都没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:51:06.853

**建议的解决方案**

也许只是尝试使用`TextBox`而不是 a`Label`和 bind`Text`而不是`Content`. 您可以在此处找到绑定示例：[如何在 XAML 中格式化 TimeSpan](https://stackoverflow.com/questions/4563081/how-to-format-timespan-in-xaml)。还值得注意的`TextBlock`是，它更轻量级`Label`，因此应尽可能使用它。

**替代解决方案**

如果您出于某种原因想使用`Label`，似乎有[一个称为`ContentStringFormat`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat.aspx)a`Label`本身的属性，因此您的 xaml 可能如下所示：

```
<Label Content="{Binding ElementName=Root, Path=DataSource.TimeTotal}" ContentStringFormat="hh\\:mm"/> 
```

另一种解决方案是实现一个 custom `IValueConverter`，您可以在其中将字符串格式作为转换器的参数传递，并在转换器的代码中手动格式化该值。然后，此解决方案应适用于所有适当的控件类型。更多关于价值转换器的信息可以在[这里](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)和[这里](http://blogs.msdn.com/b/bencon/archive/2006/05/10/594886.aspx)找到。

**字符串格式化属性**

正如***Erode***在评论中所写，似乎还有其他控件`StringFormat`不起作用。但是，对于从`ContentControl`您派生的控件应该能够使用`ContentStringFormat`并且对于从 派生的控件`ItemsControl`，有一个`ItemStringFormat`属性。有几个示例的链接展示了如何使用这些示例：http: [//blogs.msdn.com/b/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx](http://blogs.msdn.com/b/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:13:05.207

它适用于`TextBlock`，它是轻量级的`Label`. 每当您绑定到使用 a`ContentPresenter`显示数据的控件中的依赖属性时，它似乎会吃掉`StringFormat`您提供的内容。（在`Label`、`Button`等）。希望有人能告诉我们原因！您可以将 a 嵌套`TextBlock`在 Label 中，或者只使用 a `TextBlock`（除非您需要访问文本，否则通常是更好的选择）。

# php - PHP使用in参数调用mysql存储过程

> ID：10589273
> 
> 赞同：2
> 
> 时间：2012-05-14T18:48:38.767
> 
> 标签：php, mysql

我正在使用两个输入参数调用一个 mysql 存储过程。这是我的代码：

```
if (isset($_POST['button1'])) {
    $con = mysql_connect("localhost:3306","root","");
    if (!$con) {     
        echo '<b>Could not connect.</b>';
        die(mysql_error()); // TODO: better error handling
    } else {          
        mysql_select_db("php_database_1", $con);

        $username_v = $_POST['username'];
        $password_v = $_POST['password'];

        $stmt = $dbh->prepare("CALL login(?, ?)");
        $stmt->bindParam(2, $username_v, $password_v, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 4000); 

        // call the stored procedure
        $stmt->execute();

        print "procedure returned $username_v\n"; 
```

执行时，我得到：

> 注意：未定义变量：第 52 行 E:\xampp\htdocs\php4\default.php 中的 dbh 致命错误：在 E:\xampp\htdocs\php4\default 中的非对象上调用成员函数 prepare()。第 52 行的 php

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T18:52:07.607

**编辑**：在看到更多代码后，您尝试将这些`mysql_()`功能与 PDO 混合。你不能这样做——相反，只能使用 PDO。这两个 API 不能一起工作，旧的`mysql_*()`API 根本不支持预处理语句。

您尚未连接到数据库或实例化 PDO 对象。

```
$username_v = $_POST['username'];
$password_v = $_POST['password'];
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';

// You must first connect to the database by instantiating a PDO object
try {
    $dbh = new PDO($dsn, 'root', 'root_db_pw');
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

// Then you can prepare a statement and execute it.    
$stmt = $dbh->prepare("CALL login(?, ?)");
// One bindParam() call per parameter
$stmt->bindParam(1, $username_v, PDO::PARAM_STR); 
$stmt->bindParam(2, $password_v, PDO::PARAM_STR); 

// call the stored procedure
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T08:28:36.080

在为另一项任务尝试了 Michaels 解决方案并且 CALL 程序告诉它预期 0 参数并得到 2 时惨遭失败，我将把这个解决方法留给其他有同样问题的人：

```
$username_v = $_POST['username'];
$password_v = $_POST['password'];
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';

// You must first connect to the database by instantiating a PDO object
try {
    $dbh = new PDO($dsn, 'root', 'root_db_pw');
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

// Then you can prepare a statement and execute it.    
$stmt = $dbh->prepare("SET @username_v = '$username_v'; SET @password_v = '$password_v';  CALL login()");

// call the stored procedure
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-13T13:33:06.793

如果您想在没有 PDO 的情况下使用 IN 参数调用存储过程，那么下面的代码可能会对您有所帮助。

```
$stmt = $conn->prepare("CALL dataCreation(?)");
mysqli_stmt_bind_param($stmt, "s", $lastDate);
mysqli_stmt_execute($stmt); 
```

希望这会对某人有所帮助。

# objective-c - UITaBController使第二个选项卡成为启动时的默认选项卡

> ID：10589274
> 
> 赞同：-1
> 
> 时间：2012-05-14T18:48:40.107
> 
> 标签：objective-c, ios, uitabbarcontroller

我正在使用 Storyboard 开发一个选项卡式应用程序，我有三个选项卡

有没有办法让第二个选项卡成为启动时加载的默认选项卡而不是第一个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:48:53.607

```
- (void)viewDidAppear:(BOOL)animated {

        [self.tabBarController setSelectedIndex:1];
    }
} 
```

把它放在你的 viewdidAppear 中

# c++ - 如何处理类结构的变化并向后兼容使用 boost 序列化的数据/对象？

> ID：10589278
> 
> 赞同：1
> 
> 时间：2012-05-14T18:48:48.207
> 
> 标签：c++, serialization, boost

我的任务是将成员添加到使用

```
boost::serialization::access 
```

对象被存储到文本文件并读回。

但是，我需要向后兼容，并且必须序列化新的 bool 成员。

我需要允许新代码读取旧文件并只写入新格式。

具体来说，序列化文件缺少新数据成员。这会在读入时导致异常。

我该怎么做？/什么建议/机制允许这种情况发生？

我想有一种模式或已知的方式来处理这个问题，我不确定那可能是什么。

（当然，编写 boost 代码的人都明白代码/对象会改变，旧文件必须由新代码/对象处理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:22:15.710

Boost 的序列化支持版本。请参阅以下链接：[链接#1](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/tutorial.html#versioning)、[链接#2](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/traits.html#version)和[示例](http://www.boost.org/doc/libs/1_49_0/libs/serialization/example/demo.cpp)。

# macos - 如何使用 QTCaptureSession 获得超过 15FPS？

> ID：10589279
> 
> 赞同：1
> 
> 时间：2012-05-14T18:48:48.563
> 
> 标签：macos, video-capture, quicktime

我正在开发一个在 Mac 上进行面部识别的应用程序，并且我正在使用带有 QTCaptureDecompressedVideoOutput 的 QTCaptureSession。我将视频分辨率限制为 640x360，使用 32ARGB 像素格式，并将最小视频帧间隔设置为 0 以提高帧速率，但这并没有真正帮助。

```
QTCaptureDecompressedVideoOutput *output = [[QTCaptureDecompressedVideoOutput alloc] init];
[output setPixelBufferAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithDouble:640], (id)kCVPixelBufferWidthKey,
                                  [NSNumber numberWithDouble:360], (id)kCVPixelBufferHeightKey,
                                  [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], (id)kCVPixelBufferPixelFormatTypeKey,                                      
                                  nil]];    

output.minimumVideoFrameInterval = 0; 
```

无论我做什么，帧率似乎都在 15-15.5 FPS 左右达到峰值。这是在运行 10.7.3 的最新 MacBook Pro 15" / 2.3GHz Core i7 上使用内置摄像头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:44:08.057

通常内置 iSight 摄像头会产生巨大的帧。您指定的缓冲区格式不会真正影响捕获输入，而只会影响特定的捕获输出。此外，由于原始捕获的图像不是指定的像素格式，因此会进行格式转换。所以，我的猜测是，通过指定另一种像素缓冲区格式，您只会减慢处理速度。

`minimumVideoFrameInterval`默认为 0，如果您寻求最大帧率，则无需更改它。您拥有的帧速率是此时可能的最大值。

尽量避免指定像素缓冲区，看看 FPS 是否有任何差异。另外，我会使用另一个分辨率较低的外部摄像头，这将大大减少系统的负载。

# symfony - symfony2：如何编写多对多关系的方法？

> ID：10589290
> 
> 赞同：0
> 
> 时间：2012-05-14T18:49:46.907
> 
> 标签：symfony, doctrine, doctrine-orm

我在下面创建了通过多对多关系关联的这两个模型（作者和书籍）。然后我生成了 crud 方法。

问题：当我尝试使用新表单或编辑表单创建或保存作者时，它不会保存书籍。

```
namespace Prueba\FrontendBundle\Entity;

use \Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity()
 * @ORM\Table(name="author")
 */
class Author
{
    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") **/
    protected $id;

    /**
     * @ORM\Column(type="string")
     */ 
    protected $name;

    /**
     * @ORM\ManyToMany(targetEntity="Book", inversedBy="authors")
     * @ORM\JoinTable(name="author_book")
     */
    protected $books;

    public function __construct()
    {
        $this->books = new ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getBooks()
    {
        return $this->books;
    }

    public function addBook($book)
    {
        $this->books[] = $book;
    }

    public function setBooks($books)
    {
        $this->books = $books;
    }
    public function __toString()
    {
        return $this->name;
    }
}

--------------

namespace Prueba\FrontendBundle\Entity; 

use \Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity()
 * @ORM\Table(name="book")
*/
class Book 
{
     /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") **/
     protected $id;

    /**
     * @ORM\Column(type="string")
     */ 
    protected $title;

    /**
     * @ORM\ManyToMany(targetEntity="Author", inversedBy="books")
     * @ORM\JoinTable(name="author_book")
     */
    protected $authors;

    public function __construct()
    {
        $this->authors = new ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function getTitle()
    {
        return $this->title;
    }

    public function setTitle($title)
    {
        //die("fadsfadsff");
        $this->title = $title;
    }

    public function getAuthors()
    {
        //die();
        return $this->authors;
    }

    public function addAuthor($authors)
    {
        die();//Here is not entering after editing a book!!!!! why????
        $this->authors = $authors;
    }

    public function setAuthors($authors)
    {
        die();//Here is not entering after editing a book!!!!! why????
        $this->authors = $authors;
    }

    public function __toString()
    {
        return $this->title;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:15:55.557

不确定这是否是您的问题的原因，但您`inversedBy`在两个实体中都指定了。

它应该是：

```
class Author
{
    /**
     * @ORM\ManyToMany(targetEntity="Book", inversedBy="authors")
     */
    protected $books;
} 
```

因为作者*拥有*这些书。

和

```
class Book
{
    /**
     * @ORM\ManyToMany(targetEntity="Author", mappedBy="books")
     */
    protected $authors;
} 
```

因为一本书*属于*作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:10:44.643

级联持久性不是自动的，您还没有指定任何[级联规则](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

```
/**
 * @ORM\ManyToMany(targetEntity="Book", inversedBy="authors", cascade={"persist"})
 * @ORM\JoinTable(name="author_book")
 */
protected $books; 
```

我自己没有使用多对多关联的级联，但它应该可以工作

# c# - 无法更新 WPF ProgressBar（不是标准的紧密循环问题）

> ID：10589293
> 
> 赞同：0
> 
> 时间：2012-05-14T18:49:54.737
> 
> 标签：c#, .net, wpf

我正在尝试使用 ProgressBar 作为百分比值的表示（我还没有找到看起来正确的替代控件）。

我正在尝试设置值。据我了解，仅设置 Value 属性应该可以工作，并在我当前的事件处理程序结束并将控制权传递回 UI 时更新控件。但无论我将值设置为什么，栏都保持为空。

这是我的 XAML：

```
<ProgressBar Name="LevelProgress" Maximum="100" Minimum="0" /> 
```

和我的 C#: LevelProgress.Value = 43.0;

我也试过：

```
LevelProgress.SetValue(ProgressBar.ValueProperty,43.0); 
```

即使在 XAML 定义中设置 Value 属性也不起作用。

我真的不想为了设置这个值而设置一些大的后台线程。谁能推荐一个解决方案或替代控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:17:30.250

为我工作

你

```
InitializeComponent(); 
```

前？

```
LevelProgress.Value = 43.0; 
```

我把它放在 Loaded 事件中，它在那里工作。

我试过了

```
<ProgressBar Name="LevelProgress" Maximum="100" Minimum="0" Value="43" /> 
```

它在那里工作。进度条有问题。

# android - 递归文件搜索

> ID：10589298
> 
> 赞同：6
> 
> 时间：2012-05-14T18:50:11.833
> 
> 标签：android

我正在尝试在根目录及其子目录中查找文件。

Step1-在指定路径中查找目录。Step2-如果找到上述目录，请在其中一个子目录中查找文件。

为此，我使用以下递归搜索的代码片段。现在，这里的问题是，当递归满足我的上述两个要求时，我如何摆脱递归......？

```
 boolean bFileFound = false;
File  fileFound     = null;

private void findFile( File aFile, String sDir ){

    String  filePath = aFile.getAbsolutePath();

    if( aFile.isFile() && filePath.contains( sDir ) ){

              if( aFile.getName().contains( "test2.adv")){
                  Log.d(TAG, "[FILE] " + aFile.getName() );
                  fileFound = aFile;
                  bFileFound = true;
              }

             // return true;
    }else if( aFile.isDirectory() ){

        String sDirName = aFile.getName();
        Log.d(TAG, "[DIR] " + sDirName );

        if( sDirName.contains( sDir ) ){

            Log.d( TAG, "Found the directory..& Absolute Path = " + aFile.getAbsolutePath());
            sDir = sDirName;
        }

        File[] listFiles = aFile.listFiles();

        if( listFiles != null ){

          for( int i = 0; i < listFiles.length; i++ ){

              if(bFileFound)
                    return;

            findFile( listFiles[ i ], sDir );
          }
        }else{

          Log.d( TAG,  " [ACCESS DENIED]" );
        }
    }

   // return null;
} 
```

谢谢， DK

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T18:58:19.557

```
/**
 * Search file a file in a directory. Please comment more here, your method is not that standard.
 * @param file the file / folder where to look our file for.
 * @param sDir a directory that must be in the path of the file to find
 * @param toFind the name of file we are looking for. 
 * @return the file we were looking for. Null if no such file could be found.
 */
private File findFile( File aFile, String sDir, String toFind ){
    if( aFile.isFile() && 
            aFile.getAbsolutePath().contains( sDir ) && 
            aFile.getName().contains( toFind ) ) {
                        return aFile;
        } else if( aFile.isDirectory() ) {
        for( File child : aFile.listFiles() ){
            File found = findFile( child, sDir, toFind );
                    if( found != null ) { 
                        return found;
                    }//if
        }//for
    }//else
   return null;
}//met 
```

现在，在调用 findFile 时将“test2.adv”作为第三个参数传递。这比硬编码更有趣。

另请注意，多个文件可能匹配您的搜索，此功能处理不好，它会返回找到的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T20:47:10.307

我采用了一种稍微不同的方法来解决这个问题，使用[FileFilter](https://developer.android.com/reference/java/io/FileFilter.html)和一种不同的递归搜索方法。在我的情况下，正在寻找任何带有“.json”扩展名的文件，其中文件名大小写无关紧要。

**首先**，创建一个[FileFilter](https://developer.android.com/reference/java/io/FileFilter.html)实现类来保存文件名并执行递归搜索。

```
/**
 * A {@link FileFilter} implementation that checks recursively files of a
 * specified fileName or extension string
 */
public class FileExtensionFinder implements FileFilter {
    private final String fileName;
    private final List<File> foundFiles;

    /**
     * Constructor for FileExtensionFinder
     * @param fileName string of the filename or extension being searched for
     */
    public FileExtensionFinder(String fileName) {
        this.fileName = fileName;
        this.foundFiles = new ArrayList<>();
    }

    @Override
    public boolean accept(File pathname) {
        // accept anything that is a folder or matches the fileName string
        return pathname.isDirectory() || pathname.getName().toLowerCase().endsWith(fileName);
    }

    /**
     * Searches recursively for all files with the provided filename/extension string
     * @param filesArray an array of files (including folders) to iterate over
     */
    public List<File> findFiles(File... filesArray) {
        for (File file : filesArray) {
            if (file.isDirectory()) {
                findFiles(file.listFiles(this));
            } else if (file.getName().toLowerCase().endsWith(fileName)) {
                foundFiles.add(file);
            }
        }
        return foundFiles;
    }
} 
```

**然后**，用法相当简单：

```
File fileLocation = // get your file here ...
List<File> foundFiles = new FileExtensionFinder(".json").findFiles(fileLocation); 
```

# php - 使用 PHP 正确编码读取提要？

> ID：10589301
> 
> 赞同：0
> 
> 时间：2012-05-14T18:50:15.560
> 
> 标签：php, rss

我正在使用以下代码来阅读 RSS 提要。问题是我得到了错误的编码。该代码位于使用 UTF-8 编码的文件中。我还需要做些什么才能让它正确吗？

```
$feed_url = "http://lujanenlinea.com.ar/noticias/feed";
$content = file_get_contents($feed_url);  
$x = new SimpleXmlElement($content);  

echo "<div class='rss-container'>";
echo "<ul class='rss-content'>";
foreach($x->channel->item as $entry) {  
    echo "<li><a href='$entry->link' title='$entry->title'>" . $entry->title . "</a></li>";  
}  
echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:08:43.560

也许使用`utf8_encode()`或`utf8_decode()`

# html - 如何为特定输入类型文本添加 css

> ID：10589304
> 
> 赞同：17
> 
> 时间：2012-05-14T18:50:18.453
> 
> 标签：html, css, input, field

当我尝试使用 css 添加一些输入字段时

我有问题

我不能为某些输入字段制作一个以上的 CSS

这是我拥有的领域

```
<input type="text" name="firstName" />
<input type="text" name="lastName" /> 
```

而CSS是

```
input
{
   background-image:url('images/fieldBG.gif');
   background-repeat:repeat-x;
   border: 0px solid;
   height:25px;
   width:235px;
} 
```

我想用这个 css 创建第一个字段（firstName）

```
input
{
   background-image:url('images/fieldBG.gif');
   background-repeat:repeat-x;
   border: 0px solid;
   height:25px;
   width:235px;
} 
```

第二个（姓氏）带有这个css

```
input
{
   background-image:url('images/fieldBG2222.gif');
   background-repeat:repeat-x;
   border: 0px solid;
   height:25px;
   width:125px;
} 
```

请帮忙 ：-）

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-14T18:54:17.997

您可以按类型设置样式或使用 CSS 命名表单元素。

```
input[type=text] {
    //styling
}
input[name=html_name] {
    //styling
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T18:57:32.233

使用 ID 选择器。

CSS：

```
input{
    background-repeat:repeat-x;
    border: 0px solid;
    height:25px;
    width:125px;
}

#firstname{
    background-image:url('images/fieldBG.gif');
}
#lastname{
    background-image:url('images/fieldBG2222.gif');
} 
```

HTML：

```
<input type="text" ID="firstname" name="firstName" />    
<input type="text" ID="lastname" name="lastName" /> 
```

您的所有输入都将使用通用输入样式设置样式，而两个特殊输入将具有 ID 选择器指定的样式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T13:13:53.133

您必须更改 HTML 文件：

```
<input type="text" name="firstName" /> 
<input type="text" name="lastName" /> 
```

...到：

```
<input type="text" id="FName" name="firstName" />
<input type="text" id="LName" name="lastName" /> 
```

并将您的 CSS 文件修改为：

```
input {
    background-repeat:repeat-x;
    border: 0px solid; 
    height:25px; 
    width:125px;
}

#FName {
    background-image:url('images/fieldBG.gif');
}

#LName {
    background-image:url('images/fieldBG2222.gif');
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-14T18:55:19.850

为每个输入添加一个“id”标签：

```
<input type="text" id="firstName" name="firstName" />
<input type="text" id="lastName" name="lastName" /> 
```

然后你可以使用 CSS 中的#selector 来抓取每一个。

```
input {
  background-repeat:repeat-x; 
  border: 0px solid;
  height:25px;
}

#firstName {
  background-image:url('images/fieldBG.gif');
  width:235px;
}

#lastName {
  background-image:url('images/fieldBG2222.gif');
  width:125px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-07T18:52:55.293

使用类来设置样式。他们是一个更好的解决方案。使用类，您可以单独设置每种输入类型的样式。

```
<html>
    <head>
        <style>
            .classnamehere {
                //Styling;
            }
        </style>
    </head>

    <body>
        <input class="classnamehere" type="text" name="firstName" />
    </body>
</html> 
```

# javascript - 创建一个简单的“回复评论”按钮

> ID：10589305
> 
> 赞同：0
> 
> 时间：2012-05-14T18:50:23.423
> 
> 标签：javascript, forms, comments

我需要执行以下操作：每个评论都有一个带有特定 ID 号的回复按钮，我如何将此 ID 附加到表单操作链接，以便代码将从

```
<form action="http://www.mywebsite.com/comments/add_comment/1/" method="post" accept-charset="utf-8" enctype="multipart/form-data"> 
```

到

```
<form action="http://www.mywebsite.com/comments/add_comment/1/TheID" method="post" accept-charset="utf-8" enctype="multipart/form-data"> 
```

而不是专注于文本区域？

这是按钮的代码：

```
<a href="javascript:void(0)" id="{$comment->ID}" class="profile_comment_reply_button">reply</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:57:53.130

在 JQuery 中：

```
var id = yourid;
var action = $("getyourform").attr("action"); //action without id
$("getyourform").attr("action",action+id); //add id to action
$("getyourform").children(input).focus(); //focus your input field 
```

# javascript - Backbone Fetch 不返回结果

> ID：10589308
> 
> 赞同：0
> 
> 时间：2012-05-14T18:50:42.730
> 
> 标签：javascript, api, backbone.js

我敢肯定，对此的简单答案，但似乎无法使其正常工作。

```
var DailyModel = BaseModel.extend({

    initialize: function() {},

    parse: function(res){
        console.log(res);
    },

    url: 'http://search.twitter.com/search.json?q=obama'

});

return DailyModel; 
```

在 chrome 中，在网络下，我得到了与应用程序的虚拟主机相同的推荐和请求的 url（即 web.myapp.local ）。最后，解析函数没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:22:07.313

首先，您可能要确保您的初始化方法执行您希望它执行的操作

改变

```
initialize: function() {} 
```

至

```
initialize: function() {
   BaseModel.prototype.initialize.apply(this, arguments);
} 
```

这是因为 Backbone 并没有在任何地方提供继承。

其次，我相信你会有一个很好的错误，比如

> XMLHttpRequest 无法加载 [http://search.twitter.com/search.json?q=obama](http://search.twitter.com/search.json?q=obama)。Access-Control-Allow-Origin 不允许 Origin web.myapp.local。

因此，您将不得不使用 JSONP，您可以在 twitter API 页面上做好准备：[https](https://dev.twitter.com/docs/things-every-developer-should-know) ://dev.twitter.com/docs/things-every-developer-should-know 。你基本上附加一个查询字符串`callback=MyCallbackFunction`

# android - 带有预配置数据库的 Android 应用

> ID：10589314
> 
> 赞同：0
> 
> 时间：2012-05-14T18:50:53.773
> 
> 标签：android, sqlite

[我正在使用此](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)博客条目创建一个 CRUD Android 应用程序作为具有预先创建的 SQLite DB 的学习 PoC ，它在读取数据时工作正常，但即使我尝试以读/写模式打开此数据库，我插入数据时遇到问题。错误消息是我正在尝试将记录插入只读数据库。有人可以帮我吗？我需要对前面提到的博客条目进行任何重构吗？

我提前道歉，我的帖子有点半生不熟。如果需要，我会尽力提供澄清。

谢谢，
德博吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:18:37.823

检查您如何打开数据库。您必须以只读方式打开它。将 open 方法更改为`getWritableDatabase`，您的错误应该消失。

# clojure - 从地图中区分记录实例

> ID：10589321
> 
> 赞同：5
> 
> 时间：2012-05-14T18:51:11.600
> 
> 标签：clojure

我正在尝试调用`clojure.walk/stringify-keys`可能包含记录实例的地图。由于 stringify-keys 是递归的，它会尝试转换我记录中的键（因为`(map? record-var)`是真的），这会导致错误。有什么方法可以判断一个 var 是否是一个记录而不仅仅是一个 Clojure 映射？我想提供我自己的`stringify-keys`记录感知实现。

当前的实施`stringify-keys`导致以下情况：

```
(use '[clojure.walk :only [stringify-keys]])

(defrecord Rec [x])    

(let [record (Rec. "foo")
      params {:x "x" :rec record}]
    (stringify-keys params)) 
```

这会导致以下异常： UnsupportedOperationException Can't create empty: user.Rec user.Rec (NO_SOURCE_FILE:1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:21:55.850

记录似乎实现了 IRecord 标记接口：

```
user=> (defrecord Rec [x])    
user.Rec

user=> (require '[clojure.reflect :as r])
nil
user=> (:bases (r/reflect Rec))
#{java.io.Serializable clojure.lang.IKeywordLookup clojure.lang.IPersistentMap clojure.lang.IRecord java.lang.Object clojure.lang.IObj clojure.lang.ILookup java.util.Map}

user=> (instance? clojure.lang.IRecord (Rec. "hi"))
true 
```

***更新*** 1.6 现在具有`record?`功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:16:32.510

您可以检查每个成员的类型，看看它是否真的是地图或其他东西（假设其他东西是记录）

```
user> (type {:a 1 :b 2})
clojure.lang.PersistentArrayMap 
```

# android - 更改错误 android admob 广告

> ID：10589324
> 
> 赞同：0
> 
> 时间：2012-05-14T18:51:30.453
> 
> 标签：android, admob, andengine, ads

我在没有xml的游戏中添加了admob的广告。我从admob.com更改了广告的颜色。但是我的游戏中的主题相同。如何更改admob广告的主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:01:06.247

是什么让您认为广告具有主题性？我不认为人们申请颜色（例如柯达黄）来修改它们......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:52:25.003

查看 AdMob 的[文档](https://developers.google.com/mobile-ads-sdk/docs/bestpractices#adcolors)，了解如何在代码中设置广告颜色属性。

注意：更改颜色主题仅适用于 AdMob 文字广告，不适用于 AdSense 补余文字广告。您提供的这张[图片](http://s18.postimage.org/kgubacw09/Capture.png)是目前无法更改配色方案的 AdSense 补余广告示例。

# language-agnostic - 从 2D 图像平面计算 3D 坐标，考虑透视，无需直接访问视图/投影矩阵

> ID：10589331
> 
> 赞同：2
> 
> 时间：2012-05-14T18:52:01.700
> 
> 标签：language-agnostic, 3d, 2d, projection, reverseprojection

第一次在堆栈交换上提出问题，希望这是正确的地方。

我似乎无法为我的情况开发足够接近的近似算法，因为我在 3D 数学方面并不是最好的。

我有一个 3d 环境，我可以在其中访问任何对象（包括我的相机）的位置和旋转，以及从任意两个点运行跟踪线以获得点和碰撞点之间的距离。我也有我的相机的视野。但是，我没有任何形式的访问世界/视图/投影矩阵的权限。

我还有一组 2d 图像，它们基本上是一组来自相机的 3d 环境的屏幕截图，每个集合都是从相同的点和角度拍摄的，平均集合是从大约 60 度角的平均角度拍摄的地平线。

我已经能够使用“注册点实体”，它可以放置在代表 2d 图像角落的 3d 世界中，然后当在 2d 图像上拾取一个点时，它被读取为坐标范围为 0-1，然后在注册点的 3d 位置之间进行插值。这似乎效果很好，但前提是图像是一个完美的自上而下的角度。当相机倾斜并引入另一个维度的透视时，结果变得更加不准确，因为没有补偿这个透视。

我不需要能够计算一个点的高度，比如摩天大楼上的一个窗口，但至少是图像平面底部的坐标，或者如果我从图像中延伸出一条线指定的图像空间点如果没有任何阻碍，我至少需要线与地面相交的点。

我发现的所有关于这方面的材料都说只是使用世界/视图/投影矩阵来解投影点，我发现它本身很简单，除了我无法访问这些矩阵，只是我可以在屏幕截图时收集的数据和其他算法使用我根本不掌握的复杂数学。

这样做的一个最终目标是能够在用户单击图像的 3d 环境中放置标记，而不能从用户的视图中运行简单的反投影。

任何帮助将不胜感激，谢谢。

**编辑：** Herp derp，虽然由于我的情况的限制，我这样做的实现有点奇怪，但解决方案基本上归结为 ananthonline 关于简单地重新计算视图/投影矩阵的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:41:32.090

在相机的位置、旋转和 FOV 之间，您是否可以不计算相机的视图/投影矩阵 (songho.ca/opengl/gl_projectionmatrix.html) - 从而允许您取消投影已知的 3D 点？

# testing - 如何模拟“新”运算符

> ID：10589332
> 
> 赞同：9
> 
> 时间：2012-05-14T18:52:06.637
> 
> 标签：testing, grails, groovy, constructor, mocking

我正在测试一些使用 java 库的 groovy 代码，我想模拟库调用，因为它们使用网络。所以被测代码看起来像：

```
def verifyInformation(String information) {
    def request = new OusideLibraryRequest().compose(information)
    new OutsideLibraryClient().verify(request)
} 
```

我尝试使用 MockFor 和 StubFor 但出现以下错误：

```
No signature of method: com.myproject.OutsideLibraryTests.MockFor() is applicable for argument types: (java.lang.Class) values: [class com.otherCompany.OusideLibraryRequest] 
```

我正在使用 Grails 2.0.3。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T13:51:46.700

我刚刚发现我们总是可以通过 MetaClass 覆盖构造函数，因为 Grails 2 将在每次测试结束时重置 MetaClass 修改。

这个技巧比 Groovy 的要好`MockFor`。AFAIK，Groovy`MockFor`不允许我们模拟 JDK 的类，`java.io.File`例如。但是在下面的示例中，您不能使用`File file = new File("aaa")`真实对象类型是 a `Map`，而不是 a `File`。该示例是 Spock 规范。

```
def "test mock"() {
    setup:
    def fileControl = mockFor(File)
    File.metaClass.constructor = { String name -> [name: name] }
    def file = new File("aaaa")

    expect:
    file.name == "aaaa"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T19:16:35.853

[`MockFor`构造函数](http://groovy.codehaus.org/gapi/groovy/mock/interceptor/MockFor.html#MockFor%28java.lang.Class,%20boolean%29)的第二个可选参数是`interceptConstruction`. 如果将此设置为 true，则可以模拟构造函数。例子：

```
import groovy.mock.interceptor.MockFor
class SomeClass {
    def prop
    SomeClass() {
        prop = "real"
    }
}

def mock = new MockFor(SomeClass, true)
mock.demand.with {
    SomeClass() { new Expando([prop: "fake"]) }
}
mock.use {
    def mockedSomeClass = new SomeClass()
    assert mockedSomeClass.prop == "fake"
} 
```

但是请注意，您只能像这样模拟 groovy 对象。如果您对 Java 库感到困惑，您可以将 Java 对象的构造拉入工厂方法并模拟它。

# mysql - MySQL外键来自两行值的方程？

> ID：10589335
> 
> 赞同：1
> 
> 时间：2012-05-14T18:52:14.333
> 
> 标签：mysql, math

嘿伙计们，我正在尝试建立一个快速的数学表，并认为如果我创建一个外键来否定我的两列，我可以节省一些时间。可能是个坏主意，但我认为这将是一个巧妙的帽子戏法。

所以可以说我有一张这样的桌子

```
ID    |    A    |    B    |    C (Foreign?)
0     |    5    |    3    |   (2) 
```

所以这里的简单数学是

`A-B=C`

我永远不需要超过一行，但我将通过 ajax 不断地查询它以更新`A`或`B`获取`A B & C`用于显示给最终用户的值。我也可以*总是*返回这样的东西，我很清楚这一点

```
ID    |    A    |    B
0     |    5    |    3

SELECT A, B, (A-B) AS C 
FROM `sometable` 
```

但我认为这在服务器上会产生很多额外的数学问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:36:58.427

**我认为您应该在此表上编写一个插入/更新前触发器来模拟您要实现的目标。**

*这更有意义，为此创建外键是非常糟糕的做法！*

你应该读这个，

[http://forge.mysql.com/wiki/Triggers#Emulating_Check_Constraints](http://forge.mysql.com/wiki/Triggers#Emulating_Check_Constraints)

# firefox - JavaScript 不会在 Firefox 和 Safari 中重新加载框架

> ID：10589338
> 
> 赞同：0
> 
> 时间：2012-05-14T17:13:40.607
> 
> 标签：firefox, javascript

我在 Firefox 和 Safari 中使用以下代码时遇到问题。该页面列出了项目，此代码允许用户过滤结果。因此，用户选择他们的过滤器项目，然后点击 GO 按钮，带有结果的框架应该重新加载只有被过滤的项目。该框架是通过此代码所在的一个单独的 ASP 页加载的。

这在 Internet Explorer 中运行良好，但在 Firefox 或 Safari 中运行良好 - 没有任何反应。我已经运行了[Firebug](http://en.wikipedia.org/wiki/Firebug)`if` ，并且在语句中正确生成了参数。似乎重新加载永远不会发生。当我自己运行那个单独的框架/ASP 并使用 URL 手动输入参数时，它在 Firefox 中运行良好。所以这似乎与 reload 语句有关。我究竟做错了什么？

```
function Reloadit() {
    var params = "";
    if (Payload.value != "") {
        params +=('Payload='+Payload.value)+'&amp;'
    }
    if (Status.value != "") {
        params +=('Status='+Status.value+'&amp;')
    }
    if (Assignee.value != "") {
        params +=('Assignee='+Assignee.value+'&amp;')
    }
    if (SearchWord.value != "") {
        params += 'SearchWord='+SearchWord.value+'&amp;SearchField='+SearchField.value+'&amp;'
    }
    window.parent.frames["list"].location.reload('PAILReports.asp?'+params);
}

<input type="button" style="MARGIN-TOP:6px" value="GO" onclick="Reloadit(true);"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:26:18.187

IE 在这里有问题，因为你的代码一开始就不应该工作。

这`window.location.reload(forceget)`是应该做的：

> 从当前 URL 重新加载文档。`forceget`是一个布尔值，当它是 时`true`，会导致页面总是从服务器重新加载。如果`false`指定或未指定，浏览器可能会从其缓存中重新加载页面。

来源：[window.location - MDN # 方法](https://developer.mozilla.org/en/DOM/window.location#Methods)

如您所见，参数 for`reload()`不应**被**解释为 URL。

要打开不同的页面，可以使用以下命令：

```
window.parent.frames["list"].location = 'PAILReports.asp?'+params; 
```

# extjs - sencha 应用程序构建生产错误？

> ID：10589340
> 
> 赞同：3
> 
> 时间：2012-05-14T18:52:23.477
> 
> 标签：extjs, sencha-touch-2

我正在使用 Sencha Command 构建一个应用程序，我已按照所有步骤操作，并且在输入命令之前一切正常`sencha app build production`。我收到以下错误

```
[ERROR] CreateProcessW: The system cannot find the file specified.

[ERROR] Failed loading your application from: 'http://localhost/am/index.html'. Try setting the absolute URL to your application for the 'url' item inside 'app.json' 
```

我正在使用最新的 sencha touch sdk 工具和 sencha touch 2 sdk。

我不知道为什么会存在这些错误，我已经尝试了所有我能想到的解决方案来修复它们。

我浏览了大多数煎茶论坛和其他网站以寻找答案，但无济于事。

有谁知道为什么我会收到这些错误和/或解决这些错误的解决方案？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:22:50.177

您是否尝试执行错误建议的操作：“尝试将绝对 URL 设置为您的应用程序的 'app.json' 中的 'url' 项”？

# ruby-on-rails-3 - 如何_知道_在我的 Rails 3 应用程序中哪个 JSON 渲染器处于活动状态？

> ID：10589342
> 
> 赞同：17
> 
> 时间：2012-05-14T18:52:26.857
> 
> 标签：ruby-on-rails-3, json

这是这个问题的直接后续：[在 rails 中渲染 json 的最快方法是什么](https://stackoverflow.com/questions/10451722/what-is-the-fastest-way-to-render-json-in-rails)？

我的应用程序执行数据库查询并呈现为 JSON 以进行 JS 回调。小型 (1 MB) 数据集至少需要 8 秒，而大型 (3.5 MB) 数据集则需要 20 秒。这基本上会扼杀我的应用程序作为一个想法。我的用户不会忍受这种等待。

我已经阅读了关于 multi_json 和 oj 和 yajl 的信息，并且我*认为*我已经安装了它们，但是我尝试激活 Gemfile 中各种 gem 的所有方法都没有显示出序列化时间的任何改进。我如何*证明*我正在使用另一种，以便比较它们之间的结果？我找不到任何输出方式（到 Rails 调试日志或浏览器中的 JS 控制台）哪个库可能已用于实际的 'render :json => @data' 调用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-01T23:33:20.680

与其摆弄控制器，更好的方法是使用 Rails 控制台，如下所示：

```
$ rails console
Loading development environment (Rails 3.2.8)
1.8.7 :001 > MultiJson.engine
 => MultiJson::Adapters::JsonGem 
```

您可以通过这种方式直接与 Rails 堆栈进行交互。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T20:19:03.210

我终于发现我可以在我的控制器中执行“render :text => MultiJson.engine”。这产生了“MultiJson::Engines::Oj”。

它确认我已经在使用所谓的最快的 JSON 库，我可能会被淹没。我想我会尝试通过控制器返回纯文本（与 8 秒相比需要 2 秒），并查看将其转换为哈希的例程需要多快......

# java - GWT - 图片上传和预览

> ID：10589343
> 
> 赞同：0
> 
> 时间：2012-05-14T18:52:28.640
> 
> 标签：java, gwt, servlets

我刚刚在[这里](http://code.google.com/p/gwtupload/wiki/GwtUpload_GettingStarted)观看了 lib 示例...问题是我正在寻找 GWT 图像上传的标准解决方案

*   A) 将图像上传到客户端应用程序
*   B) 在客户端应用程序中预览图像
*   C）在客户端应用程序上以base64（来自上传对象）获取图像

GWT 2.3+ 有这样的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:32:31.977

您可以使用[gwtupload](http://code.google.com/p/gwtupload/)。使用 Gwtupload，您可以上传图像，预览该图像并查看进度条，其中包含有关进程的真实信息（文件大小、传输的字节数等）。

您还可以选择简单和多文件上传。

# php - PHP：将 POST 翻译成简单的变量？

> ID：10589345
> 
> 赞同：4
> 
> 时间：2012-05-14T18:52:32.330
> 
> 标签：php, forms

我知道这是完全错误的，我没有编写应用程序，我只需要在开发新应用程序时让它工作。似乎 GoDaddy 对我们的帐户进行了一些更新，所以现在有些事情不起作用。我已经打开了全局寄存器，很多事情都恢复了正常。现在，这行不通...

有一个隐藏字段`<input type="hidden" name="SUBMIT1" value="1" />`

该字段有一个检查

```
if($SUBMIT1) {
  // this part never gets executed. 
} 
```

我知道我可以通过这样做来轻松修复它......

```
if($_POST['SUBMIT1']) {
  // this part never gets executed. 
} 
```

问题是，这是一个巨大的应用程序，而且到处都需要很长时间才能做到这一点。有没有办法或设置我可以打开，以便在提交表单时`$_POST['WHATEVER']`也可以使用`$WHATEVER`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T18:53:48.233

您可以使用[`extract`](http://php.net/manual/en/function.extract.php)来获得您描述的确切功能：

```
extract($_POST); 
```

请注意此处可能存在的安全问题：用户可以发送额外数据`$_POST`并“覆盖”代码中现有变量的值。您可以传递第二个参数`extract`来防止这些问题：

```
extract($_POST, EXTR_SKIP); 
```

这将跳过提取`$_POST`数组中在当前范围内已经具有匹配变量的任何字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:57:53.927

你可以尝试这样的事情：

```
$_POST =  array('SUBMIT1' => 'SUBMIT ONE', 'SUBMIT2' => 'SUBMIT  TWO');

foreach($_POST as $k => $v) {
    define(''. $k. '', $v);
}

echo SUBMIT1;  // and so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:01:23.630

```
foreach ($_POST  as $key => $value ) {

        if(is_array($value)){
            foreach ($value as $k => $v ) {
                $$k = $v ;

            }
        }else{

            $$key=$value;
        }

        echo $key ." : " .$value."<br>";
} 
```

# sql - Oracle DB 等效于重复键更新

> ID：10589350
> 
> 赞同：12
> 
> 时间：2012-05-14T18:52:49.090
> 
> 标签：sql, oracle

我需要在 Oracle 中执行以下 MySQL 查询：

```
INSERT INTO users VALUES(1,10) ON DUPLICATE KEY UPDATE points = 10; 
```

除此之外还有别的`merge`吗？我只是不明白。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T19:04:44.437

您将需要使用`MERGE`. 就像是

```
MERGE INTO users dest
  USING( SELECT 1 user_id, 10 points FROM dual) src
     ON( dest.user_id = src.user_id )
 WHEN MATCHED THEN
   UPDATE SET points = src.points
 WHEN NOT MATCHED THEN
   INSERT( user_id, points ) 
     VALUES( src.user_id, src.points ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T07:43:42.257

如果您不想使用 MERGE，可以尝试：

```
begin
   INSERT INTO users VALUES(1,10);

   exception
      when dup_val_on_index then
         update users
            set points = 10
          where id = 1;
end; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T19:07:30.503

```
MERGE INTO users u
USING (SELECT 1 as id FROM dual) a
ON a.id = u.id
WHEN MATCHED THEN UPDATE SET u.points = 10
WHEN NOT MATCHED THEN INSERT (id, points) VALUES (1, 10); 
```

# c - 在 C 中释放链表结构时的困惑

> ID：10589351
> 
> 赞同：0
> 
> 时间：2012-05-14T18:52:54.663
> 
> 标签：c, memory-leaks, linked-list, malloc, free

我正在使用链表结构中的两种`free()`“ing ”内存的方法。`malloc()`假设我用下面的 C 代码创建了一个单链表；

```
#include<stdio.h>
#include<stdlib.h>

struct node_type{
  int data;
  struct node_type *next;
  struct node_type *prev;
}
typedef struct node_type node; 
typedef struct node_type *list; 

void main(void){
  list head,node1,tail;
  head=(list)malloc(sizeof(node));
  tail=(list)malloc(sizeof(node));
  node1=(list)malloc(sizeof(node));
  head->next=node1;tail->prev=node1;
  node1->prev=head;node1->next=tail;node1->data=1;

  /*Method-1 for memory de-allocation*/
  free(head->next->next);
  free(head->next);
  free(head);

  /*OR*/

  /*Method-2 for memory de-allocation*/
  free(tail);
  free(node1);
  free(head);

  /*OR*/

  /*Method-3 for memory de-allocation*/
  free(node1);
  free(tail);
  free(head); 
} 
```

现在，我有以下问题：

Q1) 上面代码中显示的三种内存释放方法中哪一种是正确/错误的。

Q2) 是否有必要按照`free()`方法 1 和 2 中使用的 'ing 内存中的任何顺序进行内存解除分配或随机`free()`'ing 内存也可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:56:08.620

**您展示的所有方法都是正确的，只有当指向已分配内存的指针仅存**在于另一个已分配内存中时，您才应遵循特定顺序，如果您先释放容器，您将丢失它。

例如，对于分配：

```
int ** ipp;
ipp = malloc(sizeof(int*));
*ipp = malloc(sizeof(int)); 
```

正确的`free`顺序是：

```
free(*ipp);
free(ipp); 
```

而**不是**：

```
free(ipp);
free(*ipp); // *ipp is already invalid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T18:55:00.803

所有这些方法都可以正常工作。您可以按照您喜欢的任何顺序释放由 malloc 分配的内存块。

试想一下，当您释放它时，您分配内存的顺序必须颠倒过来。如果是这样，您将永远无法从列表中间插入或删除项目。您唯一可用的动态分配数据结构将是下推堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T18:58:02.270

这是一种从头部开始释放链表的简单方法。（注意，如果您在列表的末尾，这假设“next”将为 NULL。）

```
node * it = head;
while( NULL != it ) {
  node * tmp = it;
  it = it->next;
  free(tmp);
} 
```

# ios - 从 NSDate 生成格式化的日期时间字符串

> ID：10589353
> 
> 赞同：0
> 
> 时间：2012-05-14T18:53:02.927
> 
> 标签：ios, nsdate

我希望将 NSDate 转换为以下格式的字符串：

```
YYYY-MM-DD HH:MM:ss 
```

我已经用 NSDateFormatter 尝试了各种技巧，到目前为止，这个片段看起来是我最好的选择：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"YYYY-MM-DD HH:MM:ss"];
NSString *stringThing = [format stringFromDate:thing]; 
```

不幸的是，它似乎不起作用：

```
(lldb) po stringThing
(NSString *) $17 = 0x06b54190 2012-07-195 11:07:29
(lldb) po thing
(NSDate *) $18 = 0x06b2f150 2012-07-13 15:29:29 +0000 
```

我绞尽脑汁，试图解释，发生了什么事。这是使用 DateFormatter 的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:01:36.967

您正在正确使用日期格式化程序。我猜你的日期格式不正确。试试这个：

```
@"YYYY-MM-dd HH:mm:ss" 
```

# c++ - 错误 C2061：语法错误：标识符“字符串”

> ID：10589355
> 
> 赞同：2
> 
> 时间：2012-05-14T18:53:13.787
> 
> 标签：c++, visual-studio-2010

这可能是一个包含问题，我在整个代码中都遇到了这些错误，而不仅仅是字符串标识符，`error C2146: syntax error : missing ';' before identifier 'getName'`例如`error C2146: syntax error : missing ';' before identifier 'name'`

这是一个示例类：

```
#include "stdafx.h"

class participant
{
public:
participant(int id, string name);
~participant(void);

int getId();
string getName();

private:
        int id;
    string name;
}; 
```

这是我的`stdafx.h`文件：

```
#pragma once

#include "targetver.h"

#include <stdio.h>
#include <tchar.h>
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <list>
#include "day.h"
#include "appointment.h"
#include "extendedAppointment.h"
#include "participant.h"
#include "calendar.h"
using namespace std;

#define no_such_appointment_error 20;
#define conflicting_appointments_error 21;
#define noSuchDayError 22;
#define incorrectAppointmentError 23; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:01:27.087

所以我编译了你的代码，没有你的自定义头文件，它工作得很好。基于此，我敢打赌您在以下头文件之一中存在问题：

```
#include "day.h"
#include "appointment.h"
#include "extendedAppointment.h"
#include "participant.h"
#include "calendar.h" 
```

它可能是一个宏、一个不以分号结尾的类/结构等。检查一下。

最后，几个无关紧要的问题：

首先，`using`头文件中的命名空间是一个糟糕的主意。任何包含您的标题的文件现在都包含`using namespace std;`在其中（这很糟糕）。您可能不想在每个包含`stdafx.h`.

其次，一旦你删除它，然后`string`立即变为未定义（使用 std::string 代替）。

最后，为什么你`#define`的 s 以分号结尾？没必要。

# asp.net - 如何将对象从 .cs 传递到 .aspx

> ID：10589356
> 
> 赞同：0
> 
> 时间：2012-05-14T18:53:18.203
> 
> 标签：asp.net, c#-4.0

我是一个 asp .net 初学者。我想在 Site.Master 中使用在 Site.Master.cs 创建的一些对象。有没有简单的方法来做到这一点？

我知道如何在 MVC 中做到这一点（通过使用视图（对象））。但是我怎样才能在普通的 ASP .net Web 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:56:50.277

如果文件中的`@Page`指令`.aspx`具有文件中声明的类在`Inherits="XYZ"`哪里，则可以简单地向类添加一个字段并为其分配一个值。您只需使用其名称即可在文件中访问它。`XYZ``.cs``protected``.aspx`

您还可以在单​​个请求期间使用[`HttpContext.Items`属性来保留对象：](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)

```
HttpContext.Current.Items["SavedItem"] = "hello world"; 
```

并在页面中使用它：

```
<%= ((string)Context.Items["SavedItem"]) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:18:09.857

我不明白你到底想做什么。

如果你想在标签的标题中插入一些字符串，你可以在**SiteMaster.master**文件中插入以下内容：

```
<img src="<%= Page.ResolveUrl("~/") %>images/logo.png"> 
```

代替：

```
<img src="images/logo.png"> 
```

在第一种情况下，将从应用程序的根目录计算路径。在第二种情况下，将有相对链接。这是因为服务器将计算**Page.ResolveUrl("~")**函数的值并将其写入**src**标签中。

如果您正确定义它们，您可以对任何其他方法、类执行相同的操作。但我不建议您在 .aspx 文件（或 .master 文件）中实现复杂的逻辑。因为在测试和设计此类应用程序时可能会遇到很多困难。

还有其他**服务器标签**：

1.  <% %> - 嵌入式代码块是在页面呈现阶段执行的服务器代码。块中的代码可以执行当前页面类中的编程语句和调用函数。[描述和示例](http://msdn2.microsoft.com/en-gb/library/ms178135%28vs.80%29.aspx)
2.  <%= %> - 对于显示单条信息最有用。[描述和示例](http://msdn2.microsoft.com/en-us/library/6dwsdcf5%28VS.71%29.aspx)
3.  <%# %> - 数据绑定表达式语法。[描述和示例](http://msdn2.microsoft.com/en-us/library/bda9bbfx.aspx)
4.  <%$ %> - ASP.NET 表达式。[描述和示例](http://msdn2.microsoft.com/en-us/library/d5bd1tad.aspx)
5.  <%@ %> - 指令语法。[描述和示例](http://msdn2.microsoft.com/en-us/library/xz702w3e%28VS.80%29.aspx)
6.  <%-- --%> - 服务器端评论。[描述和示例](http://msdn2.microsoft.com/en-US/library/4acf8afk.aspx)
7.  <%: %> 像 <%= %> - 但是 HtmlEncodes 输出（Asp.Net 4 的新功能）。[描述和示例](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)

**另一种方式：**您可以使用 JSON 向客户端发送一些数据，然后使用 javascript 对其进行处理。看看[这个项目](http://json.codeplex.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:56:15.623

Site.Master.cs 中的任何公共或受保护的属性或方法都可以从 Site.Master 访问。

> 但是如何在 aspx 中调用 c# 代码？

有几种方法，包括[构造`<%= %>`和](http://msdn.microsoft.com/en-us/library/6dwsdcf5(VS.71).aspx)数据[绑定语法](http://msdn.microsoft.com/en-us/library/bda9bbfx.aspx)。

如果您解释了您要达到的目标，那将会有所帮助。

# flash - 开发多平台游戏的工具

> ID：10589358
> 
> 赞同：0
> 
> 时间：2012-05-14T18:53:23.000
> 
> 标签：flash, air, unity3d

我需要开发一款在 Android/Iphone 和 Facebook（应用程序）上运行的游戏。我看到了 Unity 3d，但它有一个可以导出到 Flash Player 的 beta 版本（不稳定）。什么是完成这项工作的最佳工具？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:23:22.197

这实际上取决于您要创建的游戏类型。

如果您正在创建 3D 游戏，Unity3D 真的值得一看。其他人已成功使用 Unity3d 浏览器插件制作 facebook 游戏。例如，“越野 Velociraptor Safari”

此外，flash 和 adobe air 也可以放在桌面上以供考虑

“Adobe Flash Professional CS5.5 可让您发布 ActionScript 3 项目以在 iOS 上作为本机应用程序运行。” - [http://www.adobe.com/devnet/logged_in/abansod_iphone.html](http://www.adobe.com/devnet/logged_in/abansod_iphone.html)

“Android™ 设备：直接从 Android 设备从 Android Market 下载。iOS 设备：适用于 iOS 的 AIR 应用程序安装 Adob​​e AIR 的“强制”版本；因此，用户不安装专用版本的 AIR。” - [http://www.adobe.com/products/air/faq.html](http://www.adobe.com/products/air/faq.html)

# model-view-controller - 在 Java EE 5 中为 JSP 执行 MVC 的“正确”方法是什么？

> ID：10589369
> 
> 赞同：0
> 
> 时间：2012-05-14T18:54:36.820
> 
> 标签：model-view-controller, jsp, jsf, jakarta-ee, servlets

我继承了一个不完整但很小的 Web 项目（Java EE 5，在 WebSphere 7 上运行）。

该项目主要由可通过其 URL 直接访问的 JSP 组成，并且大多数 JSP 查找自己对所需 EJB（服务）的引用。此外，JSP 中的 HTML 代码提交的每个表单都有一个 Servlet。

从架构上讲，这有什么*问题*吗？

我在想拥有 MVC 设计会更好。我不想将所有内容都转换为 JSF，因为我不想将所有 HTML 和嵌入式 Java scriptlet 转换为 JSF 标记和托管 bean。

我真的不想使用 Struts 或 Spring MVC，因为它们不是 WebSphere 开箱即用的 Java EE 5 工具包的一部分，而且我不想通过额外的库和配置文件增加额外的复杂性.

我正在考虑使用“ControllerServlet”构建我自己的小 MVC，它接受命令并动态构建和执行命令对象，并重定向到 JSP 视图。

但是我再次问自己，发布到 Servlet 的 JSP 有什么“错误”吗？它的简单性实际上有点优雅。

你怎么看？

任何建议都非常感谢！抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:07:21.440

你问的是一个相当主观/本地化的问题。但是，唉。

提交给单个 servlet 的单个 JSP 在技术上没有任何问题。唯一真正的问题是，当 servlet 包含重复的代码时，这些代码用于非常常见的任务，例如收集请求参数、转换/验证它们、设置 bean 属性、调用操作、执行导航。*这*不是 DRY，而是具有单个前端控制器和明确定义的生命周期的 MVC 框架应该解决的问题。

或者，如果 servlet 的任务实际上是用本地代码很好地重构来执行这些常见任务，那么这反过来就不是很容易维护，因为除了原始开发人员之外没有其他人知道这个自定义框架的来龙去脉。*因此，如果不重新学习另一个*框架，很难找到其他愿意维护这个 webapp 的人，而新开发人员不太可能在其他未来的 webapps 中看到这种框架。*这*就是为什么公司通常采用现有且开发良好的 MVC 框架，如 JSF、Spring MVC、Stripes、Struts 等。

# javascript - 在输入框中设置“最小”字符输入 throw javascript

> ID：10589372
> 
> 赞同：0
> 
> 时间：2012-05-14T18:54:58.380
> 
> 标签：javascript, jquery, validation

我有一个 javascript 代码可以正常工作，所以如果输入框是空白的，它会告诉你，我还需要输入一个 MINIMUM 字符数（例如至少应输入 10 个字符）...

请有人帮我解决这个问题，这是代码：

```
var title = document.getElementById('title').value;
        var flag = 0;
        if(title == "")
        {
            requiredfields = requiredfields + '<li><?php echo JText::_('MUST PROVIDE TITLE');?></li>';
            document.getElementById('title').focus();
            flag = 1;
        } 
```

这是我在此之后添加的内容，但它不想工作......我的意思是它没有给出任何错误或其他东西......它只是没有反应......

```
if ( title < 10 )
        {
            requiredfields = requiredfields + '<li><?php echo JText::_('MUST PROVIDE MINIMUM 10 CHARS');?></li>';
            document.getElementById('title').focus();
            $('title').addClass("invalid");
            flag = 1;
        } 
```

有人能帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:56:19.073

您可以使用[`length`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/length)属性：

```
if (title.length < 10) {
    requiredfields = requiredfields + '<li><?php echo JText::_('MUST PROVIDE MINIMUM 10 CHARS');?></li>';
    document.getElementById('title').focus();
    $('title').addClass("invalid");
    flag = 1;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:56:42.287

```
if(title == "" && title.length < 10) {
   //do your stuff
} 
```

或者

```
if(title == "") {
   //do something if title is empty
}else if(title.length < 10) {
   //do something if length is under 10 characters
}else{
   //do something if not empty and over 10 chars
} 
```

# ms-access - VBA：关闭文件的错误处理

> ID：10589374
> 
> 赞同：1
> 
> 时间：2012-05-14T18:55:06.657
> 
> 标签：ms-access, vb6, vba

我有一个创建文件的 VBA 代码，并且需要有一个错误处理例程，以防文件关闭（如果它实际上是打开的）。

如果文件在到达 *Close #F*之前或什至在实际创建之前已打开并崩溃。

```
Sub test1()
On Error GoTo Err

    Dim rs As DAO.Recordset
    Dim F As Integer

    F = FreeFile

    Open "C:\MYFILE.TXT" For Output As #F

    ' My code that does lots of stuff...

    If Not rs Is Nothing Then rs.Close
    Close #F

Exit_Sub:
    Set rs = Nothing
    Exit Sub
Err:
    MsgBox Err.Description
    Resume Exit_Sub 

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T21:35:25.533

改变这部分

```
Exit_Sub:
    Set rs = Nothing
    Exit Sub 
```

到

```
Exit_Sub:
    On Error Resume Next
    Close #F
    On Error GoTo 0
    Set rs = Nothing
    Exit Sub 
```

并`Close #F`从之前的位置删除...

# xcode - 如何使用核心数据模型编辑器（Xcode 4.3.2）指定零日期表达式？

> ID：10589376
> 
> 赞同：2
> 
> 时间：2012-05-14T18:55:11.773
> 
> 标签：xcode, core-data

我正在尝试创建一个获取请求，**而不是在代码中**，而是通过使用核心数据模型编辑器来获取所有对日期属性没有值的 Book 对象。

我尝试了各种方法来指定这一点。一个例子如...

!['bookDate == nil' 谓词 - 我需要什么](../Images/732bb695c60c8536e8cb1a72643e8b29.png)

...但是，当我离开并返回数据模型编辑器时，Xcode 已将其更改为今天的日期...

!['bookDate 是今天的日期' 谓词 - 不是我需要的](../Images/eab2fde6991f81d39f2cd76c23cd5dde.png)

如果这只是模型编辑器的限制，而在代码中进行是唯一的方法，那就这样吧。我只是想保持一致，因为我的所有其他获取请求都已在模型编辑器中完成，并且没有定义问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:18:22.667

Aaah, this is almost a philosophical issue. `nil` is simply not a valid date, so it should not be in the predicate. There is a simple workaround, though:

Initialize your date to some extreme value, and check for that value (or if the date is beyond that value).

* * *

I also noticed that perhaps in the editor it is just a display thing. If you toggle the switch in the upper right corner (Editor/Expression view I guess) you will see that the query has not changed, even if in one view today's date is displayed.

![switch toggle](../Images/3c920552857c6e3832cec373ecbdc949.png)

Therefore it might just work anyway. In this case it is just a display bug.

# c# - 在直接连接到数据库的应用程序中验证用户凭据（本地网络）

> ID：10589380
> 
> 赞同：1
> 
> 时间：2012-05-14T18:55:24.690
> 
> 标签：c#, security

我正在阅读有关将密码信息存储在数据库中的最佳方法，并且大多数示例都说我们不应该将实际密码存储在数据库中，而应该将哈希值和盐值存储在数据库中。在 Web 应用程序中，验证用户的代码位于服务器端，因此我们通过网络发送用户名和密码，在服务器上我们读取 salt 值，然后将接收到的密码与 salt 进行哈希处理，并进行比较在 db 中存储散列值。

如果应用程序位于客户端，并且应用程序直接连接到数据库，而不是通过某些服务（本地网络）怎么办？这意味着 Hash 类将在客户端公开，我需要从客户端上的 db 读取哈希和盐值，这允许任何人创建几行代码并获取客户端上的所有用户信息。

在这种情况下如何处理安全/身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:18:58.510

**Windows 身份验证**

如果应用程序在 Windows 域中运行，您可以使用经过身份验证的 Windows 用户信息。然后在数据库中不需要存储用户名/密码。您只需存储 Windows SID 即可在 User 表中识别用户。然后应用程序只需验证当前用户是否存在于数据库用户表中，如果不存在，则应用程序无法运行。

您可以使用[WindowsIdentity.GetCurrent() (MSDN)](http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx)获取当前用户信息，并且 User 属性将使您能够访问 SecurityIdentifier。[在 C# 中将用户名转换为 SID 字符串](https://stackoverflow.com/questions/1040623/convert-a-username-to-a-sid-string-in-c-net)的问题将向您展示如何将其转换为可以存储在数据库中的字符串。由于每个 Windows 用户都有一个唯一的 SID，因此可以轻松查找安全信息。

走这条路时，为了获得额外的安全性，最好对 SQL 连接使用集成安全性，然后锁定对查询和表的访问，以便只有某个用户组可以运行管理操作和添加用户，而普通用户只能对相关表执行读取和数据插入/更新语句。

**编辑：**

由于 Windows 身份验证不适合您，您可以让 SQL 在存储过程中为您执行哈希。通过使用[哈希字节](http://msdn.microsoft.com/en-us/library/ms174415.aspx)您可以将用户名/密码传递给存储过程，然后在 SQL 中完成验证，这样最终用户将永远无法看到逻辑。在存储过程中，您可以从表中提取 Salt 值或将其编码。例如，我们使用用户信息表中的用户名、密码和另一个值来创建被散列的值。这可以防止不同的用户拥有相同的哈希值，即使他们拥有相同的密码。我们还使用 SHA512 来生成哈希。然后你只需要锁定 SQL 访问，使用户无法连接到 SQL 并在存储过程上执行 Right-Click-->Modify 以查看源代码。这可能最适合您的情况。

# unix - '>' 和 '>>' 有什么区别？

> ID：10589381
> 
> 赞同：1
> 
> 时间：2012-05-14T18:55:30.973
> 
> 标签：unix, command, pipe

有什么区别

```
cat int.txt > out.txt 
```

和

```
cat int.txt >> out.txt 
```

有`>>`什么不同`>`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T18:57:03.780

将`>`覆盖`out.txt`如果它已经存在。将`>>`简单地附加到`out.txt`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T18:56:58.967

`>`覆盖文件。`>>`附加到文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T18:57:27.087

`>>` 如果存在，将附加到 out.txt

`>` 如果存在，将覆盖 out.txt

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T18:57:31.737

`>`是将标准输出重定向到文件，如果文件存在则覆盖它。

`>>`是将标准输出附加到文件（如果存在）

还有一些选择：

[http://www.mathinfo.u-picardie.fr/asch/f/MeCS/courseware/users/help/general/unix/redirection.html](http://www.mathinfo.u-picardie.fr/asch/f/MeCS/courseware/users/help/general/unix/redirection.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T18:58:22.070

```
cat int.txt > out.txt 
```

这会将 int.txt 的内容写入 out.txt 并覆盖该文件 (out.txt) 中已经存在的任何内容。

```
cat int.txt >> out.txt 
```

如果存在，则将 int.txt 附加到 out.txt 的末尾，或者如果不存在则简单地创建它，并将 int.txt 复制到其中。

# c++ - 头文件〜synatx错误（要求括号）

> ID：10589383
> 
> 赞同：3
> 
> 时间：2012-05-14T18:56:04.657
> 
> 标签：c++, syntax, circular-dependency

我有闲置的头文件。我收到此错误：`expected ')' before 'A'`这是为什么？我试图重写和替换......我没有想法，我不知道问题的根源是什么......

```
#ifndef UICONSOLE_H_
#define UICONSOLE_H_

#include "Catalog.h"

#include <string>

using namespace std;

class UIconsole{ 
public:
    UIconsole(Catalog A); // error here.
    void runUI();

private:
    void showMenu();
    string getString();
    int getOption();

    void addStudent();
    void removeStudent();
    void editStudent();
    void printStudent();
    void printAllStudents();

    void addAssignment();
    void removeAssignment();
    void editAssignment();
    void printAssignment();
    void printAllAssignment();

    void printAllUnder5();
    void sortAlphabetically();
    void searchById();
};
#endif /* UICONSOLE_H_ */ 
```

使用依赖标头的内容进行编辑：

```
#ifndef CATALOG_H_
#define CATALOG_H_
#include <string>

#include "UIconsole.h"
#include "Catalog.h"

#include "StudentRepository.h"
#include "StudentValidator.h"

using namespace std;

class Catalog{
private:
    StudentRepository studRepo;
    StudentValidator studValid;

public:
    Catalog(StudentRepository stre, StudentValidator stva):studRepo(stre),studValid(stva){};
    void addNewStudent(string name, int id, int group);
    void removeStudent(string name);
    void editStudent(int name, int id, int group);
    Student seachStudent(string name);
};

#endif /* CATALOG_H_ */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:11:59.873

您的`Catalog.h`文件有几个不必要的`#include`指令：

```
#include "UIconsole.h"
#include "Catalog.h" 
```

从特定文件中删除这些。

这`#include "Catalog.h"`是不必要的，但无害的（因为包含警卫）。但是，`#include "UIconsole.h"`导致 的声明`class UIconsole`要在 的声明之前处理`class Catalog`。所以当编译器点击

```
UIconsole(Catalog A); 
```

行它仍然不知道是什么`Catalog`。

与此问题无关但应该修复的另一件事是

```
using namespace std; 
```

头文件中的指令。这是一个应该避免的不好的做法 - 在头文件中，您通常应该在`std`命名空间中指定类型的全名：

```
void addNewStudent(std::string name, int id, int group);
void removeStudent(std::string name); 
```

当存在名称冲突时，将名称空间强制进入标头的所有用户的全局名称空间可能会导致问题（本质上，如果您对用户强制执行指令，您将无法控制用户与名称空间的名称冲突）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:11:28.627

您有一个循环包含：目录包含控制台，控制台又包含目录。现在防护措施防止无限包含，但它并没有神奇地解决问题。

假设在您的情况下，首先包含目录：

编译器会：

*   包括目录。H
*   包括控制台.h
*   包括 Catalog.h 但实际上由于安全措施而跳过了内容。
*   继续处理 Console.h 但它还没有看到 Catalog 类。

您需要解决循环包含。一种方法是放置一个指针而不是对象目录并具有前向声明。或者您可以简单地从 Catalog.h 中删除包含 UIconsole.h，因为标题中似乎不需要它。

# c# - ASP 下拉列表回发在 Chrome 和 IE 中丢失会话状态，但 Firefox 完美运行

> ID：10589390
> 
> 赞同：2
> 
> 时间：2012-05-14T18:56:19.877
> 
> 标签：c#, asp.net

我的母版页上有一个 ddl，它设置为自动回发以根据他们的选择检索数据。列表中的值是客户 ID，它们已设置为会话变量，一旦有人选择了哪一个，代码就会查看 session["selectedCustomer"] 并填充适当的字段。现在我遇到的问题是，当自动回发在 Chrome 或 IE 上通过时，它会填充字段，然后将所选客户设置回默认值，即“请选择客户”，它没有任何价值。在 Firefox 中，回发后它会填充字段，然后下拉列表保留在所选客户上。

```
 protected void ddlSelectedCustomer_SelectedIndexChanged(object sender, EventArgs e)
    {
        CustomerSelected();

        Response.AppendHeader("Refresh", "0; URL=" + this.ResolveUrl("~/AcesSetup/storefront.aspx"));
        try
        {
            ViewState["SelectedAccordionIndex"] = ((AjaxControlToolkit.Accordion)FindControl("MyAccordion")).SelectedIndex;
        }
        catch (Exception ex)
        { }
    } 
```

那是我的 ddl 的 selectedChanged 事件

```
 private void CustomerSelected()
    {

        //clear the session variable
        Session.Remove("selectedCustomer");

        //user selected customer
        if (ddlSelectedCustomer.SelectedIndex != -1)
        {
            Session["selectedCustomer"] = ddlSelectedCustomer.SelectedValue;
        }

    }

    private void fillCustomers()
    {

        //save the value of the current selection to reselect later if still exists
        string origSelectedItem = ddlSelectedCustomer.SelectedValue;

        //check what role the user is in
        string usersRole = Roles.GetRolesForUser(Membership.GetUser().UserName)[0];

        MembershipUser user = Membership.GetUser();

        switch (usersRole)
        {
            case "SalesRep":
                ddlSelectedCustomer.DataSource = DAL.Util.getSalesRepCustomers((Guid)user.ProviderUserKey);
                ddlSelectedCustomer.DataBind();

                break;
            case "BasicUser":
            case "Customer":
                ddlSelectedCustomer.DataSource = DAL.Util.getCustomersListForUser((Guid)user.ProviderUserKey);
                ddlSelectedCustomer.DataBind();

                break;
            case "Admin":
            case "SuperAdmin":
                ddlSelectedCustomer.DataSource = DAL.Util.getAllCustomersList(); 
                ddlSelectedCustomer.DataBind();
                break;
            default:
                break;
        }

        //if user had a company selected, reselect it if it exists
        if (origSelectedItem != string.Empty)
            ddlSelectedCustomer.SelectedValue = origSelectedItem;
        else if (ddlSelectedCustomer.Items.Count == 1)
        {
            //if only one item in the list, select it
            ddlSelectedCustomer.Items[0].Selected = true;
        } 
```

这是填充下拉列表的内容。此外，当 Firefox 回发整个页面时，整个页面似乎没有重新加载，使用 Chrome 或 IE，整个页面将闪烁白色并重新加载。在我看来，这似乎与它有关。因为使用 Firefox，我的手风琴的视图状态就像它应该的那样工作，但同样不能使用 Chrome 或 IE。

如果您有任何帮助，我将不胜感激，如果有任何我可以清理的内容，或者我可以提供的任何代码片段，我会尽力更新所有内容。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:21:38.220

```
 protected void ContentPlaceHolder1_Load(object sender, EventArgs e)
        {
            if (Session["selectedCustomer"] != null)
            {
                ddlSelectedCustomer.SelectedValue = Session["selectedCustomer"].ToString();
            }
        } 
```

* * *

```
 <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server" OnLoad="ContentPlaceHolder1_Load">
 </asp:ContentPlaceHolder> 
```

* * *

您不会丢失会话，您只需清除选择。所以尝试通过存储会话设置所选值来处理`Load`您的事件。`ContentPlaceHolder`

# javascript - 确定路径是相对的还是绝对的

> ID：10589391
> 
> 赞同：1
> 
> 时间：2012-05-14T18:56:31.207
> 
> 标签：javascript, regex

是否有一个简单的正则表达式来确定路径是相对的还是散列？

我想匹配这些：

```
../index.php  
js/funct.js  
./home/
php/file.php?url=http://www.google.com
index.html#about=http://www.google.com 
```

但不是这些：

```
http://www.google.com
http://google.com
/index.php
/
//google.com
#div4 
```

这是我到目前为止所拥有的：

```
/^[^#\/]|\/\//.test(url) 
```

但它不起作用。有什么办法可以让它工作吗？

顺便说一句，我意识到这`//google.com`在技术上是相对的，但我仍然不想匹配这种情况

我需要这个来判断我是否需要在 pushState 之后处理链接。考虑一下，如果我开始`/`，然后`pushState`d 到，那么应该去`/page1/`的链接有一个 href ，但现在会去`'index2.html'``/index2.html``/page1/index2.html`

所以我需要检查这些类型的相对路径。

# jquery - 如何使用自己的数据属性设置 css 属性？

> ID：10589392
> 
> 赞同：1
> 
> 时间：2012-05-14T18:56:39.230
> 
> 标签：jquery, css, custom-data-attribute

假设我有这个小片段：

```
<p data-color="red">Hello world</p> 
```

我想将其颜色设置为自己的数据属性，如下所示：

```
$('p').css({

    color: $(this).data('color')
}); 
```

**由于某种原因，这是行不通的。**有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:59:46.733

`this`指的是别的东西，而不是`p`。试着把它放在一个函数中。

```
$('p').css('color', function() { return $(this).data('color'); }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:01:12.210

```
​$('p').css('color', function() {
    return $(this).data('color');
});​​ 
```

**[演示](http://jsfiddle.net/thesystemrestart/BmGnu/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T19:08:59.143

您可以在设置 css 属性之前将整个数据存储在一个对象中以避免循环。就像是 ：

```
var $p = $('p'),
    data = $p.data();

$p.css({
    color: data.color,
    fontSize: data.fontSize
});​ 
```

[http://jsfiddle.net/aYpXZ/](http://jsfiddle.net/aYpXZ/)

# sql-server-2008 - dojo - 来自 sql server 的数据，用于数据网格和图表

> ID：10589394
> 
> 赞同：0
> 
> 时间：2012-05-14T18:56:43.687
> 
> 标签：sql-server-2008, dojo

我刚刚开始熟悉 dojo 并创建小部件，并拥有一个我现在想用数据填充的 Web UI。我的问题只是获得一些关于如何做到这一点的参考或想法。我的数据库都是 sql server 2008，我通常使用 microsoft.net。我认为我可能必须创建一个调用 sql 查询并将结果转换为 json 并将其提供给小部件的服务，无论它是数据网格还是图表。只是不确定如何执行此操作以及是否确实可以执行此操作。任何想法表示赞赏。

编辑：

```
 store = new dojo.data.ItemFileWriteStore({
            url: "hof-batting.json"
        });

        ngrid = new dojox.grid.DataGrid({
            store: store,
            id: 'ngrid',
            structure: [
                { name: "Search Term", field: "searchterm", width: "10%" },
                { name: "Import Date", field: "importDate", width: "10%" }
            ]
        }, "grid");

        ngrid.startup(); 
```

我想将从我的 Web 服务返回的数据添加到此数据网格中，并使用相同的原理将数据添加到图表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:44:05.470

您准确地描述了您需要做什么。

我们使用 C# 查询我们的数据库以获取数据，然后将其转换为 json。我们现在使用多种技术进行 json 序列化。我会推荐使用 JSON.NET。这是 .NET MVC 团队将要使用的。我不会使用当前属于 .NET 的 DataContractSerialization。

[http://json.codeplex.com/](http://json.codeplex.com/)

我们有时将 JSON 放在页面上，然后 javascript 将其作为页面变量访问。其他时候，我们在 .NET 中调用服务。我们使用 WCF，我们还使用 .ashx 文件为 Web 客户端提供 json 数据。

json 的结构将是您的 dojo 小部件和 Web 服务器之间的契约。我会使用图表小部件或商店需要的东西来开始定义合同的过程。

## 编辑

WCF 接口

```
[OperationContract]
[WebInvoke(Method="POST", UriTemplate = "/data/{service}/", 
    BodyStyle = WebMessageBodyStyle.WrappedRequest)]
String RetrieveData(string service, Stream streamdata); 
```

该实现返回一个字符串，即 json。这以 json 格式发送到浏览器，但它由 .NET 通过 xml 节点包装。我有一个清理它的实用程序功能。

```
MyUtil._xmlPrefix = 
    '<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">';
MyUtil._xmlPostfix = '</string>';

MyUtil.CleanJsonResponse = function(data) {
    // summary: 
    //    a method that cleans a .NET response and converts it 
    //    to a javascript object with the JSON. 
    //    The .NET framework, doesn't easily allow for custom serialization,
    //    so the results are shipped as a string and we need to remove the 
    //    crap that Microsoft adds to the response.
    var d = data;
    if (d.startsWith(MyUtil._xmlPrefix)) {
        d = d.substring(MyUtil._xmlPrefix.length);
    }
    if (d.endsWith(MyUtil._xmlPostfix)) {
        d = d.substring(0, d.length - MyUtil._xmlPostfix.length);
    }

    return dojo.fromJson(d);
};

// utility methods I have added to string
String.prototype.startsWith = function(str) { 
  return this.slice(0, str.length) == str;
};
String.prototype.endsWith = function(str) { 
  return this.slice(-str.length) == str;
}; 
```

# javascript - 如何在网页上创建一个跟踪浏览器窗口高度的滚动区域？

> ID：10589395
> 
> 赞同：1
> 
> 时间：2012-05-14T18:56:47.343
> 
> 标签：javascript, css, scroll

我特别想知道如何获得 SpineJS 文档使用的那种滚动 div：

[http://spinejs.com/docs/ajax](http://spinejs.com/docs/ajax)

您会看到，如果您调整窗口大小，右侧（以及左侧）的滚动 div 会调整其高度以跟踪窗口的高度。

这个技巧的关键 css 和 js 元素是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:13:52.860

您提到的网站上使用的解决方案只有 CSS。

**关键要素是：**

CSS[位置](http://www.w3schools.com/css/css_positioning.asp)

CSS[行高](http://www.w3schools.com/cssref/pr_dim_line-height.asp)

CSS[高度](http://www.w3schools.com/cssref/pr_dim_height.asp)

CSS[溢出](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

查看这个[工作示例](http://jsfiddle.net/zuul/35AaC/)并分析用于查看它是如何完成的 CSS！另外，请阅读上面的链接以了解有关这些 CSS 属性的更多信息并学习组合它们！

![在此处输入图像描述](../Images/5b2a1baad790cafe097d0d6840ca4632.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:12:22.390

看起来他们只是`overflow: auto`在元素上使用 css 属性。如果子内容超出父边界，这将添加滚动条。

并且元素本身是绝对定位的，顶部、底部和右侧设置为 0px；

# java - 休眠搜索（存储和索引）

> ID：10589396
> 
> 赞同：4
> 
> 时间：2012-05-14T18:56:48.480
> 
> 标签：java, hibernate-search

@Field 上 index = Index.YES 和 store = Store.YES 的含义是什么。最后（执行搜索时）是否会从数据库中加载这些数据（搜索索引并从数据库中加载结果）？为什么我也要将数据存储在索引中？

还是我的理解有误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:53:17.207

store ：描述属性是否存储在 Lucene 索引中。您可以存储值 Store.YES（在索引中消耗更多空间但允许投影，有关更多信息，请参阅第 6.1.2.5 节，“投影”），以压缩方式存储它 Store.COMPRESS（这确实会消耗更多 CPU），或避免任何存储 Store.NO（这是默认值）。存储属性时，您可以从 Lucene 文档中检索它（请注意，这与元素是否被索引无关）。

index：描述元素如何被索引（即用于索引属性和信息存储类型的过程）。不同的值是 Index.NO（无索引，即无法通过查询找到）、Index.TOKENIZED（使用分析器处理属性）、Index.UN_TOKENISED（无分析器预处理）、Index.NO_NORM（不存储归一化数据）。默认值为 TOKENIZED。

根据：[http ://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/4.2/html/Hibernate_Search_Reference_Guide/Hibernate_Search-Mapping.html](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/4.2/html/Hibernate_Search_Reference_Guide/Hibernate_Search-Mapping.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:26:00.263

我认为文档很清楚- [http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single/#basic-mapping](http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single/#basic-mapping)

如果要使用投影功能，则需要将索引数据存储在 Lucene 索引中。同样，这在文档中进行了解释。

# c++ - 使用 Qt 下载多个文件

> ID：10589398
> 
> 赞同：-2
> 
> 时间：2012-05-14T18:56:53.623
> 
> 标签：c++, qt

我想下载一批大约 50 张单张图像，处理并保存它们。处理大量下载的最佳方式是什么？

我知道如何使用 QHttp 下载单个文件，但我不知道如何使用文件列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:39:47.453

QHttp 已过时，使用 QNetworkAccessManager。每个 GET、PUT 等都返回一个[QNetworkReply](http://doc.qt.nokia.com/4.8/qnetworkreply.html)对象，您可以使用它来等待相应请求的结果。如果这还不够，您可以编写一个小的 QObject 派生帮助类来监视响应对象的 error()、finished() 和 readyRead() 信号并处理接收到的数据，例如通过将其写入文件。

# puppet - Puppet 找不到模板的变量

> ID：10589404
> 
> 赞同：4
> 
> 时间：2012-05-14T18:57:07.523
> 
> 标签：puppet

刚开始使用 Puppet，我的第一个模板遇到了问题。这应该很容易，但我无法弄清楚。

我有一个模块“基地”

```
/etc/puppet/modules/base/
    ./manifests
    ./manifests/service.pp
    ./manifests/init.pp
    ./manifests/params.pp
    ./manifests/config.pp
    ./manifests/install.pp
    ./templates
    ./templates/puppet.conf.erb 
```

还有其他东西，但没必要。

基础/清单/init.pp：

```
class base {
  include base::install, base::service, base::config, base::params
} 
```

基地/清单/config.pp

```
class base::config {
  include base::params

  File {
    require => Class["base::install"],
    ensure => present,
    owner => root,
    group => root,
  }

  file { "/etc/puppet/puppet.conf":
    mode => 0644,
    content => template("base/puppet.conf.erb"),
    require => Class["base::install"],
    nofity => Service["puppet"],
  }
... 
```

基础/清单/params.pp

```
class base::params {
  $puppetserver = "pup01.sdirect.lab"
} 
```

最后，模板中有趣的部分位于 base/templates/puppet.conf.erb

```
...
server=<% puppetserver %> 
```

错误信息：

> 错误：无法解析模板 base/puppet.conf.erb：在节点上的 /etc/puppet/modules/base/manifests/config.pp:13 找不到“puppetserver”的值 ...

我不明白问题是什么。我直接从 Pro Puppet 书中复制了这一部分。

有人可以告诉我应该在哪里定义 $puppetserver 以及如何定义吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T22:01:18.160

问题是名称“puppetserver”需要完全限定，以便 Puppet 可以找到该值，因为它的定义范围与评估模板的范围不同。

该变量是在其中定义的，`base::params`因此在该范围内只能简单地称为“puppetserver”。当您从 inside 评估模板时`base::config`，您处于不同的范围内，因此您不能仅通过其短名称来引用该变量。“包含”将另一个类添加到目录中，但不会更改这些规则。

这意味着要访问它，您必须使用类名来完全限定它：`base::params::puppetserver`。如果您在清单本身中使用它，这将是`$base::params::puppetserver`. 您将在 Pro Puppet 的`ssh::config`和`ssh::service`类中看到类似的示例，其中它在 params 类中引用“ssh_service_name”（第 43-45 页）。

要访问模板中的变量，它有点不同，请使用`scope.lookupvar("base::params::puppetserver")`. 以您的完整示例并在模板中添加缺少的等号（以输出值）：

```
...
server=<%= scope.lookupvar("base::params::puppetserver") %> 
```

[从 2.7 开始，Scope and Puppet](https://docs.puppetlabs.com/guides/scope_and_puppet.html)页面上有更多关于范围界定的信息。

（编辑：看起来它也以相同的解决方案列在已[确认的勘误表页面上。）](http://www.apress.com/9781430230571)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-12T17:26:19.710

[答案 #1](https://stackoverflow.com/a/10591656/648162)在技术上是正确的，但会导致模板非常冗长。

您可以通过将其他类中的变量值带入您自己的类范围来缩短它们：

```
class base::config {
  include base::params
  $puppetserver = $base::params::puppetserver
  ...
} 
```

然后按预期在模板中使用它们：

```
server=<% puppetserver %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-05T20:48:15.230

您还可以使用继承：

```
class puppet::config inherits puppet::params {
.... 
```

这样你就不必`$puppetserver`在这个类中再次定义了。

# java - 关闭由我的 Java 代码中启动的“jar”应用程序打开的窗口

> ID：10589406
> 
> 赞同：1
> 
> 时间：2012-05-14T18:57:12.397
> 
> 标签：java, swing, jar

我有一个（Swing + AWT）应用程序，它使用外部 jar 库（通过调用其中的`main`方法）。每次发生事件（例如按下按钮）时，此外部应用程序都会打开一个窗口。请考虑我无法访问外部 jar 源代码。

如何在再次调用 main 之前关闭先前打开的窗口？

`actionPerformed`看起来像这样：

```
private void anActionPerformed(java.awt.event.ActionEvent evt) {
           String [] argv = {"arg1","arg2","arg3"};
           com.somepackage.SomeClass.main(argv);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:00:07.413

你可以猜测——这可能是错误的——SomeClass.main 调用了一个新的 SomeClass。

您可以尝试自己调用它：

```
SomeClass someclass = new SomeClass (); 
```

它是一个JFrame，它经常在main中初始化，并且经常设置一些属性：

```
someclass.setSize (...
someclass.setLocation (...
someclass.setVisible (true); 
```

如果可行，您可以以某种方式存储 someclass 引用，以后可以调用

```
someclass.dispose ();
someclass = new SomeClass (); 
```

否则，您可能会搜索 jar 中的每个类：

```
jar -tf some.jar 
```

并使用反射和自省来搜索要调用的 ctor。

或者您尝试扩展 SomeClass - 也许它不是最终的并且可以被继承。

```
class MyClass extends SomeClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T22:06:54.407

也许不是最安全的方法，但您可以考虑使用该[`Window#getWindows`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#getWindows%28%29)方法。如果您知道 a是通过调用 main 方法创建的，则可以在调用 main 之前`Window`询问所有实例，然后将其与所有实例进行比较。新实例是您要查找的实例，然后您有一个参考，可以在之后处理它。`Window``Window``Window`

# c# - 单元测试 ASP.NET（不是 MVC） - 如何通过“请求在此上下文中不可用。”？

> ID：10589410
> 
> 赞同：1
> 
> 时间：2012-05-14T18:57:35.870
> 
> 标签：c#, asp.net, unit-testing, visual-studio-2008, httprequest

我仍在尝试为 ASP.NET 站点（不是 MVC）添加一些单元测试。确切地说，我需要测试的方法之一是使用该`HttpRequest Request`对象。`Request.Path`我正在尝试使用 Visual Studio 2008 的内置测试框架编写测试。每当测试执行有问题的方法时，我都会收到一个`System.Web.HttpExecption: Request is not Available in this context`. 我明白为什么它不可用（没有正在运行的 Web 服务器，也没有提供路径），但我该如何继续测试该方法？

既然大家都喜欢看代码，下面是有问题的代码：

```
protected string PageName
{
    get 
    {
        return Path.GetFileName(Request.Path).Substring(0, Path.GetFileName(Request.Path).Length - 5); 
    }
}

protected Change SetupApproval(string changeDescription)
{
    Change change = Change.GetInstance();
    change.Description = changeDescription;
    change.DateOfChange = DateTime.Now;
    change.Page = PageName;
    return change;
} 
```

这是测试：

```
[TestMethod]
public void SetupApproval_SubmitChange_ValidateDescription()
{
    var page = new DerivedFromInternalAppsBasePage_ForTestingOnly();
    var messageToTest = "This is a test description";
    var change = page.SetupApproval(messageToTest);
    Assert.IsTrue(messageToTest == change.Description);
} 
```

此外，我在这里阅读了微软的文档：http: [//msdn.microsoft.com/en-us/library/ms182526](http://msdn.microsoft.com/en-us/library/ms182526(v=vs.90).aspx) (v=vs.90).aspx 并尝试使用他们建议的`[HostType("ASP.NET")]`,`[UrlToTest(http://localhost:port/pathToAspxPage.aspx")]`和`[AspNetDevelopmentServer("C:\PathToDllAssembly", "NotSureParameter")]`Attributes ，但是没运气。（如您所见，我不确定应该为一些参数使用什么。）。

最后，我尝试了 Phil Haack 的 TestWebServer [http://haacked.com/archive/2006/12/12/Using_WebServer.WebDev_For_Unit_Tests.aspx](http://haacked.com/archive/2006/12/12/Using_WebServer.WebDev_For_Unit_Tests.aspx) 并阅读了 Scott Hanselman 的帖子[http://www.hanselman.com/blog/NUnitUnitTestingOfASPNETPagesBaseClassesControlsAndOtherWidgetryUsingCassiniASPNETWebMatrixVisualStudioWebDeveloper.aspx](http://www.hanselman.com/blog/NUnitUnitTestingOfASPNETPagesBaseClassesControlsAndOtherWidgetryUsingCassiniASPNETWebMatrixVisualStudioWebDeveloper.aspx) For Phil 的服务器，我不确定我会在`ExtractResource`方法中使用什么参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:24:35.213

我最近一直在努力解决类似的问题，真正有用的是来自 Microsoft Research 的 Moles 框架 - [http://research.microsoft.com/en-us/projects/moles/](http://research.microsoft.com/en-us/projects/moles/)。它允许您从 BCL 伪造任何东西，包括 HttpContext.Current。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T18:47:53.870

有一个与您遇到的问题非常相似的问题，该问题在Michael Feathers的[“有效使用遗留代码”一书中进行了描述。](https://rads.stackoverflow.com/amzn/click/com/0131177052)特别地，重构被称为“适应参数”。

您的代码的“问题”是它直接耦合到 HttpRequest，特别是 Request.Path。因此，总体方法是您希望将代码与 HttpRequest 分离。

与上面的建议类似，这里是按照 Michael Feather 书中的想法进行解耦的另一种方法。我没有尝试编译这个，所以请原谅任何拼写错误或语法错误。

```
公共接口 ParameterSource
{
    公共字符串路径 {get; }
}

公共类 FakeParameterSource : ParameterSource
{
   公共字符串值；
   公共字符串路径 { 获取 { 返回值 } }
}

公共类 RealParameterSource : ParameterSource
{
   私有 HttpRequest 请求；
   公共RealParameterSource（HttpRequest aRequest）
   {
     请求 = 一个请求；
   }
   公共字符串路径 { 获取 { 返回请求。路径 } }
}

```

现在这是您需要更改的重要部分（这是一种方法）：

```
// 小改名
受保护的字符串 GetPageName(ParameterSource source)
{
   返回 Path.GetFileName(source.Path).Substring(0, Path.GetFileName(source.Path).Length - 5);
}

```

以上注入发生在方法级别。您也可以通过构造函数或属性来完成。

您的测试代码现在可能类似于：

```
protected Change SetupApproval(string changeDescription)
{
    ParameterSource p = new FakeParameterSource { Value = "mypath" };
    更改更改 = Change.GetInstance();
    更改.描述 = 更改描述；
    change.DateOfChange = DateTime.Now;
    change.Page = GetPageName(p); // 现在使用参数源中的值
    退换货；
}

```

我希望你明白这个想法并发现这很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:47:40.370

测试使用 HttpContext 的方法的关键是使用 HttpContextBase。HttpContextBase 是一个抽象类，使其易于模拟。不幸的是 HttpContext 没有实现 HttpContextBase 所以你需要使用 HttpContextWrapper 将真正的 HttpContext 包装到 HttpContextBase 中。这篇文章有一个很好和简单的解释：[http ://splinter.com.au/httpcontext-vs-httpcontextbase-vs-httpcontext](http://splinter.com.au/httpcontext-vs-httpcontextbase-vs-httpcontext)

您的问题没有说明示例代码的位置。如果这一切都在代码隐藏中，那么您将很难尝试对其进行测试。您应该查看[Model-View-Presenter(MVP) 模式](http://msdn.microsoft.com/en-us/magazine/cc188690.aspx)，而不是在代码隐藏中使用逻辑。MVP 有一些框架，但自己做也很容易。

在 MVP 中，presenters 包含所有逻辑和页面，代码隐藏仅实现 View-interface 包含可以绑定到 UI 的属性。所有依赖项都可以注入到 Presenter 中，使其易于测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:22:36.490

我同意@Alex Taylor（抱歉，我无法评论）：对（非 MVC）Web 应用程序进行单元测试的最佳方法是确保这些位*不*依赖于存在的整个环境；毕竟，这就是它被称为*单元测试的原因。*所以你可以`PageName`用这个替换：

```
protected string PageName
{
    get 
    {
        return GetPageName(Request.Path);
    }
}

protected static string GetPageName(string path)
{
    return Path.GetFileNameWithoutExtension(path);
} 
```

有了这个，您可以进行单元测试`GetPageName`，并确信 PageName 可以按预期工作。

请记住，尝试进行单元测试是没有意义的`Request.Path`，因为它具有应该满足的预期行为（或“合同”）。如果您不确定 Request.Path 在不同情况下会返回什么，您应该查看[文档](http://msdn.microsoft.com/en-us/library/system.web.httprequest.path%28v=vs.100%29.aspx)而不是添加单元测试。

# c# - 在泛型迭代中需要帮助

> ID：10589411
> 
> 赞同：-6
> 
> 时间：2012-05-14T18:57:40.023
> 
> 标签：c#

```
class Program
{
    static void Main(string[] args)
    {   
        Car car1 = new Car();  
        car1.Make  = "Oldsmobile";  
        car1.Model = "Cultas Supreme";  

        Car car2 = new Car();  
        car2.Make  = "GEO";
        car2.Model = "Prism";  

        Dictionary<string, Car> myDicitionary = new Dictionary<string, Car>();
        myDicitionary.Add(car1.Model, car1);
        myDicitionary.Add(car2.Model, car2);
        foreach (KeyValuePair<string, Car> CAR in myDicitionary)
        {

            Console.WriteLine("{0}-- {1}", CAR.Key,CAR.Value);
        }
        Console.ReadLine();
    }

    class Car 
    {
        public string Make { get; set; }
        public string Model { get; set; }
    }       
} 
```

输出结果

> Cultas Supreme-- Collection.Programe+Car Prism--
> 
> 集合.程序+汽车

但为什么它不显示 Car 而不是 Collection.Programe+Car 的值`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:01:47.100

默认`.ToString()`方法返回对象的名称。如果您希望该方法返回其他内容，则需要覆盖它：

```
class Car
{
   // same as before

   public override string ToString()
   {
        return string.Format("{0} {1}", Make, Model);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:03:46.927

您需要覆盖该`ToString()`方法（如其他发布的答案所示），或者从对象中检索要打印的`Car`属性（可通过 的`Value`属性获得`KeyValuePair<string,Car>`）：

```
 foreach (KeyValuePair<string, Car> CAR in myDicitionary)
    {
        Console.WriteLine("{0}-- {1}", CAR.Key, CAR.Value.Make);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T19:03:03.190

问题是你正在输出这个：

> Cultas Supreme-- Collection.Programe+Car

发生这种情况是因为您编写：

```
Console.WriteLine("{0}-- {1}", CAR.Key,CAR.Value); 
```

既然`CAR.Value`是`Car`实例，当你把它写出来的时候，它会调用`Car.ToString()`方法把它`Car`变成一个字符串。由于您没有`ToString()`在`Car`类中覆盖，它只输出类的名称： *Collection.Programe+Car*（因为 Car 是 Programe 中的嵌套类）。

要使其输出适当的值，您应该在 car 中写出特定值（更改`CAR.Value`为或类似），或者在 Car 类`CAR.Value.Make`中提供适当的实现。`ToString()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:03:05.310

你会想要去 Car 类并覆盖汽车的`ToString`方法。在这种方法中，让它写出您认为最好的汽车字符串表示形式。

您还可以（或另外）更改`Console.WriteLine("{0}-- {1}", CAR.Key,CAR.Value);`为`Console.WriteLine("{0}-- {1}", CAR.Key,CAR.Value.Make);`在打印时仅显示汽车的制造商。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T19:05:32.440

尝试

```
 Console.WriteLine("{0}-- {1}", CAR.Value.Model,CAR.Value.Make); 
```

CAR 指 KeyValuePair(String model, CAR car)
CAR.KEY 指模型
CAR.Value 指 CAR
CAR.VALUE.MAKE 指 CAR.MAKE
CAR.VALUE.Model 指 CAR.Model

如其他答案中所述，您还可以在 Car 类中覆盖 ToString()

```
public override ToString()
{
   return String.Format("{0}---{1}", Model, Make);
} 
```

覆盖 ToString() 后，您可以使用 car.ToString

```
foreach (KeyValuePair<string, Car> CAR in myDicitionary)
        {

            Console.WriteLine(CAR.Value);
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T19:02:24.217

尝试

```
Console.WriteLine("{0}-- {1}", CAR.Key,CAR.Value.Make) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T19:08:34.483

一个快速而肮脏的解决方案是覆盖 Car 上的 ToString() 方法

它显示 Cultas Supreme - 这是一个字符串 Correct Collection.Program + Car 这是 Car 对象的值

尝试将其添加到您的汽车对象中...并且您将了解 Console.Writeline 在给定时和对象将对象输出到字符串方法。

```
public override string ToString()
{
  return this.Make
} 
```

# sql - 跨表条件查询

> ID：10589413
> 
> 赞同：2
> 
> 时间：2012-05-14T18:57:51.210
> 
> 标签：sql, ms-access

我正在尝试创建一个返回企业名称的 SQL 查询。员工是团队和团体的成员，团队和团体是企业的成员。

我需要选择具有作为团队成员的员工的业务，该团队整体具有某些属性。

如何编写 SQL 以返回成员与高级成员比率为 % 的企业？前 A 队 100 名团队成员中只有 20 名高级员工；所以它失败了，应该返回团队 A 所属的业务。

我知道我需要根据他们的团队将员工分组在一起，但不知何故需要计算 SENIOR=YES 与 SENIOR=NO 的员工并返回他们所属的业务。想法？

它们是包含一些敏感信息的 MS Access 表，但您可以将这些表视为如下设置：

tblBusiness：BID、BName
tblTeam：TID、TName、TBusRef
tblEmployee：EID、EName、ETeamRef、EBusRef、ESenior

我确实尝试过各种 SQL：我已经完成了从嵌套 SQL 到重聚合到包含 count 的表达式的所有操作。我得到的最接近的（我认为）是：

```
SELECT tblBuisiness.BName FROM tblBuisiness
GROUP BY BName HAVING (
COUNT(SELECT DISTINCT tblEmployee.ETeamRef FROM tblEmployee WHERE ESenior=-1)
/
COUNT(SELECT DISTINCT tblEmployee.ETeamRef FROM tblEmployee)
< 0.5
) 
```

现在这个可能有语法错误（在剪贴板上），但我经历了 100 次，我得到的最接近的是“不能在 agregate "COUNT()/<0.5" 中有表达式”

如果 Business1 的 TeamA 有 20 名高级成员和 80 名普通成员，则此查询返回 Business1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:30:22.260

也许：

```
SELECT * 
FROM (
  SELECT 
    e.EBusRef, 
    Count(e.EID) AS EmpCount, 
    Sum(Abs([ESenior])) AS Senior, 
    [Senior]/([EmpCount]/100) AS [%Senior]
  FROM tblEmployee AS e
  GROUP BY e.EBusRef) q
WHERE q.[%Senior]<=50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:29:15.703

像这样的东西应该给你百分比。您只需要再次包装它以过滤 SeniorPercentage 字段

```
select 
    B1.BName,
    SeniorPercentage = ((select count(1) from tblEmployee E1 inner join tblTeam T1 where T1.TBusRef = B1.BID and E1.ESenior = 1) / (select count(1) from tblEmployee E2 inner join tblTeam T2 where T2.TBusRef = B1.BID))
From
    tblBusiness B1 
```

PS 我还没有完全编写连接，但您可以轻松添加。

# objective-c - UIView 从左（或右）动画事务滑动

> ID：10589419
> 
> 赞同：1
> 
> 时间：2012-05-14T18:57:58.513
> 
> 标签：objective-c, ios5, uiview, uiviewanimation

我想用我的 UIView 从左（或右）动画制作幻灯片，就像您在通过左右滑动浏览完整照片时在 Photos.app 中完成的那样。

我知道以下基本动画交易代码。

```
[UIView beginAnimations:@"ThisAnimation" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
[UIView setAnimationDuration:1];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];    

[UIView commitAnimations]; 
```

是否可以使用 setAnimationTransaction 从左（或右）动画滑动？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:07:07.910

我认为您所追求的是启用分页的滚动视图作为包含每张照片的子视图的主视图。`NO`启用分页后（此布尔属性的默认值为主屏幕）。

您可以将 的`pagingEnabled`属性设置`UIScrollView`为 true 以获得此效果。然后，您将始终`UIScrollView`一次拥有多个显示的边界（您可以用照片的视图填充，例如 a `UIImageView`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:24:50.510

除了其他答案之外，您还可以[在此处找到一个很酷的教程，](http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/)并且在教程末尾有一个项目链接，您可以查看它。

这是一个自动幻灯片，但您可以通过注释定义的行来禁用它`NSTimer`。此外，您应该在 UX 中添加下一行以`viewDidLoad`获得更好的用户体验：

```
scr.pagingEnabled = YES; 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T17:35:02.493

在您的滑动处理程序中，为您的视图编写以下代码：

```
let transition = CATransition()
transition.type = CATransitionType.push

transition.subtype = CATransitionSubtype.fromRight //In Left  swipe method

transition.subtype = CATransitionSubtype.fromLeft //In Right  swipe method

self.view.layer.add(transition, forKey: nil) 
```

# javascript - 是否可以强制用户的浏览器发出（并遵循）正文中带有 JSON 的 GET 请求？

> ID：10589420
> 
> 赞同：1
> 
> 时间：2012-05-14T18:57:59.410
> 
> 标签：javascript, api, http

我正在构建一个与另一个部门的搜索站点交互的 Web 应用程序。这个想法是用户将开始键入他们希望在我们的网站上搜索的术语 - 例如，“面包”。他们会从其他部门的网站上获得一个 AJAX-y 自动完成列表，其中包括“面包”。选择一个词后，他们将被重定向到[http://other-site.com/](http://other-site.com/)，并显示搜索他们选择的词的结果。

问题是我不能简单地重定向到[http://other-site.com/?term=](http://other-site.com/?term=) {whatever-term-they-selected}。根据我得到的 API 规范，我必须将用户重定向到根 URL [http://other-site.com/](http://other-site.com/)，并在请求正文中包含一些关于搜索词的元数据作为 JSON。这甚至可能吗？我可以通过标头将用户重定向到[http://other-site.com/](http://other-site.com/)，但这不会包含请求正文中的数据。我可以提交一个指向[http://other-site.com/](http://other-site.com/)的表单，但是主体不会是原始 JSON - 它将是表单数据。

我想我需要要求其他部门更改他们的 API，但我想在这样做之前确保这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:52:50.913

要回答这个问题 - 不，浏览器不可能使用 JSON 正文向另一个域发出并遵循 GET 请求。另一个站点不得不更改他们的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:07:00.660

通常 GET 请求没有正文，因此请尝试使用 POST。

更多信息：[GET with body](https://stackoverflow.com/questions/978061/http-get-with-request-body)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:09:15.040

可能这会帮助你[http://skypher.com/wiki/index.php/Programming/JavaScript/serialize%28%29](http://skypher.com/wiki/index.php/Programming/JavaScript/serialize%28%29)

或者可能是这个问题[使用 Ajax.Request 将 JSON 从浏览器传递到 PHP 的最佳方式](https://stackoverflow.com/questions/311987/best-way-to-pass-json-from-browser-to-php-using-ajax-request)

# ruby-on-rails - Rails - 错误找不到文件

> ID：10589423
> 
> 赞同：1
> 
> 时间：2012-05-14T18:58:10.743
> 
> 标签：ruby-on-rails, ruby

我在 irb 工作并试图清理我下载的一些代码。

我正在运行这个：

```
require '/Users/alexgenadinik/projects/cmply/cmply-app/lib/app/social/linkedin/linkedin.rb' 
```

它工作正常。该文件包含以下内容：

```
require File.join(File.expand_path("../",__FILE__),"init")
require 'oauth'

module LinkedIn
  puts "helllllooooo"

  class << self

    #logger.debug "....teeest"
    attr_accessor :token, :secret, :default_profile_fields

    # config/initializers/linkedin.rb (for instance)
    #
    # LinkedIn.configure do |config|
    #   config.token = 'consumer_token'
    #   config.secret = 'consumer_secret'
    #   config.default_profile_fields = ['education', 'positions']
    # end
    #
    # elsewhere
    #
    # client = LinkedIn::Client.new
    def configure
      yield self
      true
    end
  end

  #root_path = File.expand_path("../../../../../",__FILE__)

  autoload :Api,     File.join(LINKED_IN_LOAD_PATH,"linked_in/api.rb") #"linked_in/api"
  autoload :Client,  File.join(LINKED_IN_LOAD_PATH,"linked_in/client.rb") #"linked_in/client"
  autoload :Mash,    File.join(LINKED_IN_LOAD_PATH,"linked_in/mash.rb") #"linked_in/mash"
  autoload :Errors,  File.join(LINKED_IN_LOAD_PATH,"linked_in/errors.rb") #"linked_in/errors"
  autoload :Helpers, File.join(LINKED_IN_LOAD_PATH,"linked_in/helpers.rb") #"linked_in/helpers"
  autoload :Search,  File.join(LINKED_IN_LOAD_PATH,"linked_in/search.rb") #"linked_in/search"

end 
```

但是当我尝试运行这样的命令时：

```
client = LinkedIn::Client.new('key', 'key') 
```

我收到此错误：

```
LoadError: no such file to load -- linked_in/helpers/authorization
    from /Users/alexgenadinik/projects/cmply/cmply-app/lib/app/social/linkedin/linked_in/helpers/authorization.rb:4
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `require'
    from /Users/alexgenadinik/projects/cmply/cmply-app/lib/app/social/linkedin/linked_in/client.rb:2
    from (irb):2 
```

所以它指向 client.rb 的第 2 行，开头是这样的：

```
require 'cgi'
require File.join(LINKED_IN_LOAD_PATH, "linked_in","helpers/authorization") 
```

和authorization.rb的第4行，开头是这样的：

```
module LinkedIn
  module Helpers

    module Authorization 
```

顺便说一句，我应该从顶部阅读错误消息，还是应该从底部开始阅读以查看错误首先出现的位置？

非常感谢帮助。我不确定为什么它会给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:15:28.923

您的文件所在的目录是“linkedin”，但您需要的目录是“linked_in”，您应该将实际目录的名称更改为 linked_in，因为这符合命名约定。

除此之外，我很确定 Rails 会将 app 下的所有目录添加到加载路径中。所以你应该可以说`require 'linked_in/linked_in'`（假设你同时改变了目录和文件名）然后你可以对所有的自动加载做同样的事情，并摆脱这些`File.expand_path ...`东西。

# jquery - 如何使用 jQuery 获取安全 cookie 的值？

> ID：10589437
> 
> 赞同：0
> 
> 时间：2012-05-14T18:58:52.927
> 
> 标签：jquery, cookies

我目前正在使用[jquery.cookie](https://github.com/carhartl/jquery-cookie)在网站上获取/创建 cookie；但是，我无法获得安全 cookie 的价值。

该插件使用以下代码很好地创建了安全 cookie：

```
$.cookie('myCookie', 'myValue', { expires: 365, secure: true }); 
```

然后我使用以下代码来检索值：

```
var myCookie = $.cookie('myCookie'); 
```

不幸的是，这不起作用，并且始终返回 null 值。谁能看到我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:06:04.480

文档说：

> 将设置 cookie 的安全属性，并且 cookie 传输将需要安全协议（如 HTTPS）。

您是否使用带有有效 SSL 证书的 HTTPS 或类似的东西，如果不是，它可能无法工作？

# wpf - MVVM 与 3 层应用程序中的 Web 服务交互

> ID：10589438
> 
> 赞同：2
> 
> 时间：2012-05-14T18:59:01.563
> 
> 标签：wpf, web-services, architecture, mvvm, 3-tier

# 问题：

将 MVVM 用于与 3 层应用程序中的 Web 服务交互的 UI 是否有意义？

* * *

# 细节：

1.  应用程序的架构是三层的：

    `Presentation Layer <--Web-Service-->| Business Layer | Data Access Layer`

2.  前端：*.NET（WPF 和 C#）*

3.  后端：*Java EE*

## 将 MVVM 用于 UI 是否有意义？

1.  模型如何**抽象数据库**，因为它不能在没有 Web 服务的情况下直接访问它？
2.  如果实际上可以通过模型抽象数据库，那么这样做是否是个**好主意？**

* * *

# 其他注意事项：

**不需要实时更新数据：**

*   DB 上的更新不需要立即反映在 UI 上，反之亦然。

*   这让我觉得我不需要这样的模型。MVVM 适合我的情况吗？

* * *

**编辑**

# 链接：

如果您可以发布在 3 层应用程序中**使用 MVVM**作为 UI 的项目的链接，将会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T05:44:50.943

MVVM 中的 Model 不一定由数据库提供。

在这种情况下，我会考虑由业务层发布的数据结构模型。

数据库中的数据结构应该针对存储和查询进行优化。业务层公开的数据结构应该针对（所有）可能的客户端和带宽等考虑因素进行优化。

客户端中的数据结构应该针对呈现进行优化，这就是我们在 MVVM 中所说的 Viewmodel。

MVVM 非常合适，因为它允许您在业务层公开的数据结构和 UI 所需的数据结构之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:04:52.593

我在企业架构中看到了一个称为集成层的附加层。在 MVVM 的上下文中，我想这仍然“位于” **Model**中，但它始终充当数据库和任何其他外部数据层之间的仲裁者。在我看到的示例中，集成层连接了第 3 方 Web 服务、来自 WCF 服务的一些输入以及主应用程序数据库。

我认为您可能对模型在 MVVM 中的含义有些不理解。这并不意味着 UI/Presentation 层会立即更新（但是可以这样配置），而是任何业务对象或数据访问组件都存储在模型中。也就是说，实际上没有**VVM**这样的东西，因为**View Model**依赖于**Model**中定义的业务对象。

无论如何，我认为 MVVM 完全适合您所描述的内容，但是许多其他架构也是如此。MVVM 特别适合 WPF 前端，它非常适合 UI 数据绑定模型。Model-View-Presenter 非常适合 Winforms 应用程序，因为状态处理方式与 Model-View-Controller 不同，这对于 ASP.net 企业应用程序来说非常有用。所有这些架构都支持您在 OP 中描述的集成。

请参阅[如何在域对象中存储业务逻辑？](https://stackoverflow.com/questions/10561038/how-to-store-business-logic-in-domain-object/10579056#10579056)对于我最近对 ​​MVVM 的描述。

[http://www.codeproject.com/Articles/66585/Comparison-of-Architecture-presentation-patterns-M](http://www.codeproject.com/Articles/66585/Comparison-of-Architecture-presentation-patterns-M)是一篇很棒的比较文章，很多内容来自 Martin Fowler - 许多企业软件架构的先驱和模式。

# c++ - CoCreateInstanceEx 在 Win2003 上返回带有无效凭据的 S_OK

> ID：10589440
> 
> 赞同：3
> 
> 时间：2012-05-14T18:59:13.153
> 
> 标签：c++, windows, com

我正在编写一个远程连接到服务器的客户端应用程序。我需要模拟我的客户将与之合作的用户。

这是我的代码的摘录：

```
COAUTHIDENTITY coAuthIdentity, *pCoAuthIdentity;
COAUTHINFO coAuthInfo;

CComBSTR bstrDomain(domain), bstrServer(server);
CComBSTR bstrUser(user), bstrPassword(password);
CComBSTR bstrServerPrincName(domain);
bstrServerPrincName.Append(L"\\");
bstrServerPrincName.Append(server);

coAuthIdentity.Flags    = SEC_WINNT_AUTH_IDENTITY_UNICODE;
coAuthIdentity.Domain   = (USHORT *)bstrDomain.m_str;
coAuthIdentity.DomainLength = bstrDomain.Length();
coAuthIdentity.Password = (USHORT *)bstrPassword.m_str;
coAuthIdentity.PasswordLength   = bstrPassword.Length();
coAuthIdentity.User     = (USHORT *)bstrUser.m_str;
coAuthIdentity.UserLength   = bstrUser.Length();
pCoAuthIdentity         = &coAuthIdentity;
*ppCoAuthIdentity       = pCoAuthIdentity;

coAuthInfo.dwAuthnSvc       = RPC_C_AUTHN_DEFAULT;  // Have COM negotiate the best authentication service
coAuthInfo.dwAuthzSvc       = RPC_C_AUTHZ_NONE;
coAuthInfo.pwszServerPrincName  = bstrServerPrincName;

coAuthInfo.dwAuthnLevel     = RPC_C_AUTHN_LEVEL_DEFAULT;
coAuthInfo.dwImpersonationLevel = RPC_C_IMP_LEVEL_IMPERSONATE;
coAuthInfo.pAuthIdentityData    = &coAuthIdentity;
coAuthInfo.dwCapabilities       = EOAC_NONE;

COSERVERINFO coServerInfo;
::memset(&coServerInfo, 0, sizeof(COSERVERINFO));

coServerInfo.pwszName    = bstrServer;
coServerInfo.dwReserved1 = 0;
coServerInfo.pAuthInfo   = &coAuthInfo;
coServerInfo.dwReserved2 = 0;

MULTI_QI multiQI = { &__uuidof(IServer), 0, 0 };

TCHAR name [MAX_COMPUTERNAME_LENGTH + 1];
DWORD size = sizeof(name);
DWORD dwServer = CLSCTX_SERVER;
if (::GetComputerName(name, &size) != 0)
{
    if (_wcsicmp(name, coServerInfo.pwszName))
            dwServer = CLSCTX_REMOTE_SERVER;
    else
        dwServer = CLSCTX_LOCAL_SERVER;
}
else
{
    DWORD dwError = GetLastError();
    return HRESULT_FROM_WIN32(dwError);
}    

hr = CoCreateInstanceEx(
    __uuidof(IServer),
        NULL,
    dwServer,
    &coServerInfo,
    1,
    &multiQI); 
```

当我将客户端和服务器安装在同一台计算机上时，就会出现我的问题。在 Windows 2003 中，当我将任何用户（有效或无效）的凭据传递到我的服务器时，CoCreateInstanceEx 函数总是返回 S_OK。

问题是在服务器端使用的用户不是模拟用户，而是启动我的客户端进程的用户。

使用 Windows 2008 可以正常工作。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:23:03.633

这是有趣的。[http://msdn.microsoft.com/en-us/library/aa913628.aspx](http://msdn.microsoft.com/en-us/library/aa913628.aspx)

也许使用注册表值而不是显式的身份验证值？CoInitializeSecurity 在其他地方被调用？我唯一能想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T22:01:05.793

[Don Box - Essential COM](https://books.google.no/books/about/Essential_COM.html?id=kfRWvKSePmAC)书指出：“在*撰写本文时，同机通信不支持*COAUTHIDENTITY”（第 289 页）。此外，[Thuan Thai - Learning DCOM](http://shop.oreilly.com/product/9781565925816.do) book 指出：“*设置身份验证身份仅适用于客户端和服务器组件在不同机器上运行时*”（第 9 章 - 客户端安全性）。

因此，我怀疑您的同机问题是由长期存在的 Windows 限制引起的。我还能够在 Windows 10（版本 1803）上重现该问题。

# java - 轮询会阻塞 LinkedBlockingQueue 中的其他操作吗？

> ID：10589445
> 
> 赞同：2
> 
> 时间：2012-05-14T18:59:46.320
> 
> 标签：java, multithreading, blockingqueue

在下面的伪代码中，我有一个`poll()`在主线程中被永久调用的函数。当我在没有`sleep()`语句的情况下执行此操作时`poll()`，其他线程每分钟仅将 2-3 个项目添加到队列中。这是否意味着轮询会阻止该`put()`语句？

我怎么解决这个问题？

```
public class Test extends Thread{
    private LinkedBlockingQueue<Object> queue = null;

    Test(){
        queue = new LinkedBlockingQueue<Object>(10);
    }

    public void run(){
        // Do stuff, get incoming object from network
        queue.put(o);
    }

    public Object poll(){
        Object o = queue.poll();
        sleep(1000);
        return o;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T19:01:47.713

> 这是否意味着轮询会阻塞 put() 语句？

不，`LinkedBlockingQueue`是完全可重入的，并且该`poll()`方法不会阻止`put()`. 但是，该`poll()`方法会立即返回。如果队列为空，您可能应该使用`queue.take()`which 等待队列中有一个项目，而不是返回 null 。

```
// wait for there to be an object in the queue
Object o = queue.take();
// no sleep necessary
return o; 
```

由于您正在构建一个包含 10 个条目的受限阻塞队列，我猜想 main 正在阻塞，`sleep()`然后队列会填满并减慢您的程序。您也许应该只`sleep`在`poll()`返回`null`并睡眠更短的时间时才应该这样做。

**编辑：**正如评论中提到的@JohnVint，另一种选择是使用在`poll(long, TimeUnit)`一段时间内等待将项目添加到队列中并`null`在计时器到期时返回的方法。这是在队列中等待某些东西的更干净的方式。

```
// wait for 1000ms for there to be an object in the queue
Object o = queue.poll(1000, TimeUnit.MILLISECONDS);
// no sleep necessary
return o; 
```

# highcharts - HIghCharts 条形图将列呈现在彼此之上

> ID：10589447
> 
> 赞同：1
> 
> 时间：2012-05-14T18:59:46.700
> 
> 标签：highcharts

我在使用 HighCharts 渲染基本条形图时遇到问题。我正在使用两个系列，都具有 ax 和 y 值。我将日期存储在 x 中，将数字存储在 y 中。当我运行他的代码时，这些列被呈现在彼此之上。我在旧版本的 HighCharts 中使用了非常相似的代码，并且列显示正常。这些问题最近才开始出现。

任何帮助深表感谢。

代码非常基础，我也在[jsFiddle](http://jsfiddle.net/5Tp8U/)上提供了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:27:36.407

正如我在写评论时所怀疑的那样。请确保您的时间序列按时间排序。请参阅[http://jsfiddle.net/wergeld/P7YWU/](http://jsfiddle.net/wergeld/P7YWU/)。相同的数据，只是排序。

# jquery - jquery中有没有像tinyslideshow这样的脚本？

> ID：10589448
> 
> 赞同：0
> 
> 时间：2012-05-14T18:59:49.677
> 
> 标签：jquery, ajax

我正在搜索类似于 jquery 中的 tinyslideshow 的脚本，并且还与 IE 版本（包括 6）兼容。

有没有 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:01:47.697

你在寻找这个[http://www.userfriendlythinking.com/_CustomFiles/flickrGallery/Example-3a-Small-Auto.html](http://www.userfriendlythinking.com/_CustomFiles/flickrGallery/Example-3a-Small-Auto.html)还是[http://slidershowcase.com/jquery-sliders/tiny-slideshow](http://slidershowcase.com/jquery-sliders/tiny-slideshow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:46:21.270

有一个类似于 jquery 的名为 adgallery 的脚本，支持 ie6、7、8、9、chrome 和 firefox。在使用小幻灯片进行了很多挣扎之后，决定使用 adgallery，它不在 jquery 中并且不再受支持！

[http://adgallery.codeplex.com/releases/view/87584](http://adgallery.codeplex.com/releases/view/87584)

# c# - 一个单独的用户控件在另一个用户控件中执行一个方法

> ID：10589449
> 
> 赞同：1
> 
> 时间：2012-05-14T18:59:49.877
> 
> 标签：c#, wpf, silverlight

我正在 WPF 中制作一个小游戏以更好地理解它，我有一个有 2 个子用户控件的父控件。

第一个子用户控件具有更新第二个用户控件中对象位置的按钮。

在 MainWindow.xaml.cs 我有

```
controllersplaceholder.Content = new ControllerView1()
gameplaceholder.Content = new GameView1() 
```

如您所见，controllersplaceholder 对 GameView1 没有任何了解。要更新 GameView1 中元素的位置，我必须将 GameView1 引用传递给 ControllerView1 并在 GameView1() 中执行方法。问题是我该怎么做才能让 ControllerView1、ControllerView2 轻松执行 GameView1 中的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:05:58.633

您可以使用[**事件**](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)。只需在您的 上声明一个事件`ControllerView1`，例如：

```
public event EventHandler RequestReposition; 
```

创建对象时，`GameView1`订阅并响应控制器的事件：

```
var controller = new ControllerView1();
var gameView = new GameView1();
// here we're subscribing to controller's event
controller.RequestReposition += gameView.UpdatePosition;
controllersplaceholder.Content = controller;
gameplaceholder.Content = gameView; 
```

现在，每当您从控制器*引发事件*时，都会通知订阅者并采取适当的措施（执行订阅的方法）。

请注意，您的游戏视图方法不必完全匹配事件签名；在匿名方法的帮助下，您可以即时创建匹配的事件处理程序并使用以下现有方法`GameView1`：

```
// subscribtion with lambda
controller.RequestReposition += (sender, args) =>
    {
        gameView.UpdatePosition();
        gameView.Refresh();
    }; 
```

# json - WCF 域服务和 JSON 查询参数

> ID：10589455
> 
> 赞同：1
> 
> 时间：2012-05-14T19:00:13.263
> 
> 标签：json, wcf, frameworks, entity

是否可以传递如下查询参数来限制由暴露 JSON 端点的 WCF 域服务返回的结果？

[http://MyDomain.com/MyService-MyName-MyDomainService.svc/JSON/GetData?OrderNumber='12345](http://MyDomain.com/MyService-MyName-MyDomainService.svc/JSON/GetData?OrderNumber=) '

我到处都看到使用查询参数显示 OData 的文档，但对于 JSON 端点却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:24:56.900

您可能正在寻找 jsonp（带填充的 json），它旨在克服 json 请求的跨域问题，但它允许您传递参数，并且可以在 wcf 服务中实现

希望这可以帮助 ！！

# c# - backgroundworker 永远不会在 winform 中实例化？

> ID：10589457
> 
> 赞同：0
> 
> 时间：2012-05-14T19:00:42.023
> 
> 标签：c#, winforms, backgroundworker

此代码运行后台工作程序之前的所有行，但不运行任何后台工作程序项：

```
private void Form1_Load(object sender, EventArgs e)
{
    // Other code that runs

    // debugger never executes these lines of code????
    BackgroundWorker backgroundWorkerRefreshData = new BackgroundWorker();
    backgroundWorkerRefreshData.DoWork += new DoWorkEventHandler(backgroundWorkerRefreshData_DoWork);
    backgroundWorkerRefreshData.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:20:47.393

将 backgroundworker 代码移动到 Form1() 构造函数，看看它是否在那里工作。

否则它看起来像一个错误的执行。我过去曾在 Visual Studio 2010 中向我的项目添加代码，但执行从未运行过它。我保存了关闭 Visual Studio 的工作 - 重新启动它，甚至没有保存更改。如果第一部分不起作用，我建议尝试重新启动 Visual Studio。

# mysql - 如何获取搜索记录的列名？

> ID：10589459
> 
> 赞同：1
> 
> 时间：2012-05-14T19:01:01.007
> 
> 标签：mysql

假设我有这张桌子：

```
 mid        wid     ctitle
         ---        ---     ------
         17         5        AAA
         18         6        BBB
         24         8        CCC
         21         9        DDD 
```

如果我正在搜索任何值，例如“5”，那么如何获取它的列名？

如果我搜索“18”并且它出现在列中，`mid`那么它应该将列名返回为“mid”。在“5”的情况下，它应该返回“wid”。

可以使用 MySQL 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:06:25.370

```
select ctitle, 'mid' as which_column, mid as the_value from mytable where mid=5
union select ctitle, 'wid', wid from mytable where wid=5 
```

你可能会发现更聪明，但这应该工作......

（要回答评论，如果需要，将 5 替换为任何其他所需的值）

# linux - gdb 反向步进 - Linux 不支持？

> ID：10589475
> 
> 赞同：5
> 
> 时间：2012-05-14T19:01:50.967
> 
> 标签：linux, gcc, gdb

```
(gdb) reverse-step
Target child does not support this command. 
```

这是在 Linux 2.6.18 中

内核不支持吗？我需要一个特殊的 gcc arg 吗？

```
 gcc --version
gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-22T18:16:42.403

我不是专家，但看来您可能忘记启用 gdb 记录了。

```
(gdb) record
(gdb) continue
(gdb) reverse-continue
Continuing. 
```

例如，这对我有用

```
Breakpoint 1, main (argc=1, argv=0x7ffe673b5638) at ...
7     int lol = 0xbeefface;
(gdb) record
(gdb) continue
Continuing.

Program stopped.
0x00007f710c188746 in __GI__exit ...
(gdb) reverse-continue
Continuing.
...
No more reverse-execution history.
main (argc=1, argv=0x7ffe673b5638) at ...
7     int lol = 0xbeefface; 
```

我能够重现您的问题

```
Breakpoint 1, main (argc=1, argv=0x7ffeb7945198) at main.c:7
7     int lol = 0xbeefface;
(gdb) b _exit
Breakpoint 2 at 0x7fc62dbb8710: file ...
(gdb) continue
Continuing.

Breakpoint 2, __GI__exit ...
(gdb) reverse-continue
Target native does not support this command. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:34:33.663

> 这是在 Linux 2.6.18 中
> 
> 内核不支持吗？

内核与它*无关*。你用的是什么版本的*gdb*？

鉴于您的 GCC 是 2008 年的，并且 GDB 在 2009 年发布的 7.0 版中增加了对反向执行的支持，我猜您的 GDB 实在是*太老了*。

# ruby-on-rails - 使用 Mongoid 更新嵌入文档会改为更新父文档

> ID：10589477
> 
> 赞同：5
> 
> 时间：2012-05-14T19:01:54.977
> 
> 标签：ruby-on-rails, mongodb, mongoid

当我尝试更新嵌入文档 (embeds_many) 上的属性时，mongoid 无法保存更改，并且奇怪地将更改的属性添加为父文档上的新属性。这是一个简单的单元测试，说明了我正在尝试做的事情：

```
class Tab
  include Mongoid::Document
  field :name, :type => String
  embeds_many :components, :class_name => 'TabComponent'
end

class TabComponent
  include Mongoid::Document
  embeds_many :components, :class_name => "TabComponent"
end

class TabColumn < TabComponent
  field :width, :type => Integer
end

require 'test_helper'

class TabTest < ActiveSupport::TestCase
  test "create new tab" do
    tab = Tab.new({
      :name => "My Demo Tab",
      :components => [TabColumn.new({
        :width => 200
      })]
    })

    tab.save!

    tab.components[0].width = 300
    tab.save!

    assert_equal tab.components[0].width, 300 # passes
    tab.reload
    assert_equal tab.components[0].width, 300 # fails!
  end
end 
```

这是日志输出：

```
MONGODB (39ms) beam_test['system.namespaces'].find({})
MONGODB (27ms) beam_test['$cmd'].find({"count"=>"tabs", "query"=>{}, "fields"=>nil}).limit(-1)
MONGODB (38ms) beam_test['tabs'].find({})
MONGODB (0ms) beam_test['tabs'].remove({:_id=>BSON::ObjectId('4fb153c4c7597fbdac000002')})
MONGODB (0ms) beam_test['tabs'].insert([{"_id"=>BSON::ObjectId('4fb15404c7597fccb4000002'), "name"=>"My Demo Tab", "components"=>[{"_id"=>BSON::ObjectId('4fb15404c7597fccb4000001'), "_type"=>"TabColumn", "width"=>200}]}])
MONGODB (0ms) beam_test['tabs'].update({"_id"=>BSON::ObjectId('4fb15404c7597fccb4000002')}, {"$set"=>{"width"=>300}})
MONGODB (27ms) beam_test['tabs'].find({:_id=>BSON::ObjectId('4fb15404c7597fccb4000002')}).limit(-1) 
```

难道我做错了什么？请注意，我认为问题不是多态性，如果我通过在 TabComponent 上放置宽度来简化事情，则会观察到相同的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:14:33.833

您的关系中有一个简单的错误，而是使用以下内容来完成您的 embeds_many / embedded-in 关系的对称性。

```
class TabComponent
  include Mongoid::Document
  embedded_in :tab
end 
```

在上面的日志输出中，您会看到：

```
MONGODB (0ms) beam_test['tabs'].update({"_id"=>BSON::ObjectId('4fb15404c7597fccb4000002')}, {"$set"=>{"width"=>300}}) 
```

完成上述修复后，我现在得到：

```
MONGODB (0ms) free11819_mongoid_embedded_update_test['tabs'].update({"_id"=>BSON::ObjectId('4fb270fee4d30bbc20000002')}, {"$set"=>{"components.0.width"=>300}}) 
```

注意与 的`width`区别`components.0.width`。

希望这有助于您顺利上路。

# android - android逐帧动画问题

> ID：10589480
> 
> 赞同：0
> 
> 时间：2012-05-14T19:02:13.673
> 
> 标签：android, android-animation

我有一个 ImageButton，它将使用选择器根据其状态（按下等）显示不同的可绘制对象。我想在指定的时间间隔上在此按钮上播放逐帧动画。

这是代码：

```
ImageButton btn;
btn.setImageResource(R.drawable.my_anim);
AnimationDrawable ani = (AnimationDrawable)btn.getDrawable();
ani.start(); 
```

所以问题是动画只播放一次。动画完成后，我想重置按钮，以便它使用选择器根据其状态显示不同的可绘制对象。但这不是现在发生的。动画完成后，选择器不再工作。虽然 btn onClick 事件正在工作。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:48:04.303

您需要某种方式在完成时收到通知，然后执行代码以实现您想要的。
看看这个：[Android AnimationDrawable 并知道动画何时结束](https://stackoverflow.com/questions/2214735/android-animationdrawable-and-knowing-when-animation-ends)

# javascript - 无论访客是什么 GMT，在此倒计时脚本中使用 GMT+4 时间

> ID：10589487
> 
> 赞同：0
> 
> 时间：2012-05-14T19:02:43.113
> 
> 标签：javascript, countdown

这个倒计时脚本运行良好，但对于所有 GMT 的访问者来说都是不同的。我想为每个人提供一个全球时间 GMT+4，不管访客来自哪个国家，时间都应该是全球时间

我需要添加什么以便我的脚本只读取一般时间以及我需要放置它的位置？

如果有人可以编辑我的脚本并将此功能包含在其中，我将不胜感激

先感谢您

```
 <script type="text/javascript">
var events = new Array();

events[1]={name: 'Blood Castle:', startUp: new Array(
    {hour:0,minute:25},
    {hour:2,minute:25},
    {hour:4,minute:25},
    {hour:6,minute:25},
    {hour:8,minute:25},
    {hour:10,minute:25},
    {hour:12,minute:25},
    {hour:14,minute:25},
    {hour:16,minute:25},
    {hour:18,minute:25},
    {hour:20,minute:25},
    {hour:22,minute:25}
)}

events[2]={name: 'Devil Square:', startUp: new Array(
    {hour:1,minute:55},
    {hour:3,minute:55},
    {hour:5,minute:55},
    {hour:7,minute:55},
    {hour:9,minute:55},
    {hour:11,minute:55},
    {hour:13,minute:55},
    {hour:15,minute:55},
    {hour:17,minute:55},
    {hour:19,minute:55},
    {hour:21,minute:55},
    {hour:23,minute:55}
)}

events[3]={name: 'Chaos Castle:', startUp: new Array(
    {hour:0,minute:55},
    {hour:2,minute:55},
    {hour:4,minute:55},
    {hour:6,minute:55},
    {hour:8,minute:55},
    {hour:10,minute:55},
    {hour:12,minute:55},
    {hour:14,minute:55},
    {hour:16,minute:55},
    {hour:18,minute:55},
    {hour:20,minute:55},
    {hour:22,minute:55}
)}

events[4]={name: 'Red Dragon:', startUp: new Array(
    {hour:0,minute:0},
    {hour:2,minute:0},
    {hour:4,minute:0},
    {hour:6,minute:0},
    {hour:8,minute:0},
    {hour:10,minute:0},
    {hour:12,minute:0},
    {hour:14,minute:0},
    {hour:16,minute:0},
    {hour:18,minute:0},
    {hour:20,minute:0},
    {hour:22,minute:0}
)}

events[5]={name: 'Gold Invasion:', startUp: new Array(
    {hour:0,minute:0},
    {hour:2,minute:0},
    {hour:4,minute:0},
    {hour:6,minute:0},
    {hour:8,minute:0},
    {hour:10,minute:0},
    {hour:12,minute:0},
    {hour:14,minute:0},
    {hour:16,minute:0},
    {hour:18,minute:0},
    {hour:20,minute:0},
    {hour:22,minute:0}
)}

events[6]={name: 'White Wizard:', startUp: new Array(
    {hour:0,minute:0},
    {hour:2,minute:0},
    {hour:4,minute:0},
    {hour:6,minute:0},
    {hour:8,minute:0},
    {hour:10,minute:0},
    {hour:12,minute:0},
    {hour:14,minute:0},
    {hour:16,minute:0},
    {hour:18,minute:0},
    {hour:20,minute:0},
    {hour:22,minute:0}
)}

events[7]={name: 'Blue:', startUp: new Array(
    {hour:0,minute:40},
    {hour:1,minute:40},
    {hour:2,minute:40},
    {hour:3,minute:40},
    {hour:4,minute:40},
    {hour:5,minute:40},
    {hour:6,minute:40},
    {hour:7,minute:40},
    {hour:8,minute:40},
    {hour:9,minute:40},
    {hour:10,minute:40},
    {hour:11,minute:40},
    {hour:12,minute:40},
    {hour:13,minute:40},
    {hour:14,minute:40},
    {hour:15,minute:40},
    {hour:16,minute:40},
    {hour:17,minute:40},
    {hour:18,minute:40},
    {hour:19,minute:40},
    {hour:20,minute:40},
    {hour:21,minute:40},
    {hour:22,minute:40},
    {hour:23,minute:40},
    {hour:24,minute:40}
)}

events[7]={name: 'Hide&Seek:', startUp: new Array(
    {hour:0,minute:42},
    {hour:1,minute:22},
    {hour:2,minute:32},
    {hour:3,minute:42},
    {hour:4,minute:52},
    {hour:6,minute:02},
    {hour:7,minute:12},
    {hour:8,minute:22},
    {hour:9,minute:32},
    {hour:10,minute:42},
    {hour:11,minute:52},
    {hour:13,minute:02},
    {hour:14,minute:12},
    {hour:15,minute:22},
    {hour:16,minute:32},
    {hour:17,minute:42},
    {hour:18,minute:52},
    {hour:20,minute:02},
    {hour:21,minute:12},
    {hour:22,minute:22},
    {hour:23,minute:32}
)}

events[8]={name: 'Sky:', startUp: new Array(
    {hour:1,minute:5},
    {hour:4,minute:5},
    {hour:7,minute:5},
    {hour:10,minute:5},
    {hour:13,minute:5},
    {hour:16,minute:5},
    {hour:19,minute:5},
    {hour:23,minute:5}
)}

events[9]={name: 'Boss Attack:', startUp: new Array(
    {hour:1,minute:50},
    {hour:4,minute:50},
    {hour:7,minute:50},
    {hour:10,minute:50},
    {hour:13,minute:50},
    {hour:16,minute:50},
    {hour:23,minute:50}
)}

events[10]={name: 'Happy Hour:', startUp: new Array(
    {hour:5,minute:5},
    {hour:2,minute:5},
    {hour:8,minute:5},
    {hour:11,minute:5},
    {hour:14,minute:5},
    {hour:17,minute:5},
    {hour:20,minute:5},
    {hour:0,minute:5}
)}

events[11]={name: 'Hit and Up:', startUp: new Array(
    {hour:0,minute:20},
    {hour:2,minute:20},
    {hour:5,minute:20},
    {hour:8,minute:20},
    {hour:11,minute:20},
    {hour:14,minute:20},
    {hour:20,minute:20}
)}

events[12]={name: 'Raklion:', startUp: new Array(
    {hour:0,minute:15},
    {hour:3,minute:15},
    {hour:6,minute:15},
    {hour:9,minute:15},
    {hour:12,minute:15},
    {hour:15,minute:15},
    {hour:18,minute:15},
    {hour:21,minute:15}
)}

events[13]={name: 'Moss:', startUp: new Array(
    {hour:3,minute:35},
    {hour:7,minute:35},
    {hour:11,minute:35},
    {hour:15,minute:35},
    {hour:19,minute:35},
    {hour:23,minute:35}
)}

events[14]={name: 'Illusion Temple:', startUp: new Array(
    {hour:0,minute:25},
    {hour:1,minute:25},
    {hour:2,minute:25},
    {hour:3,minute:25},
    {hour:4,minute:25},
    {hour:5,minute:25},
    {hour:6,minute:25},
    {hour:7,minute:25},
    {hour:8,minute:25},
    {hour:9,minute:25},
    {hour:10,minute:25},
    {hour:11,minute:25},
    {hour:12,minute:25},
    {hour:13,minute:25},
    {hour:14,minute:25},
    {hour:15,minute:25},
    {hour:16,minute:25},
    {hour:17,minute:25},
    {hour:18,minute:25},
    {hour:19,minute:25},
    {hour:20,minute:25},
    {hour:21,minute:25},
    {hour:22,minute:25},
    {hour:23,minute:25},
    {hour:24,minute:25}
)}

events[15]={name: 'Castle Deep:', startUp: new Array(
    {hour:1,minute:25},
    {hour:7,minute:25},
    {hour:13,minute:25},
    {hour:19,minute:25}
)}

events[16]={name: 'CryWolf:', startUp: new Array(
    {hour:1,minute:45},
    {hour:4,minute:45},
    {hour:7,minute:45},
    {hour:10,minute:45},
    {hour:13,minute:45},
    {hour:16,minute:20},
    {hour:19,minute:45},
    {hour:22,minute:45}
)}

var curTime=1336998502;
var dateTime=1336953600;
if(localStorage.curTime) {
    curTime = Number(localStorage.curTime);
} else {
    // use default set above
}
// not sure if we need to persist dateTime but doing it anyway!
if(localStorage.dateTime) {
    dateTime = Number(localStorage.dateTime);
} else {
    // use default set above
}
function timeLeft(i){
    for(j in events[i].startUp){
        tmp=events[i].startUp[j].hour*3600+events[i].startUp[j].minute*60
        if(dateTime+tmp>curTime){
            return dateTime+tmp-curTime;
        }
    }
    tmp=events[i].startUp[0].hour*3600+events[i].startUp[0].minute*60
    return dateTime+86400+tmp-curTime;
}

function getFormatedLeftTime($seconds){
    $second = $seconds % 60;
    $minutes = parseInt(($seconds / 60) % 60);
    $hour =  parseInt(($seconds / 3600) % 24);
    $days = parseInt($seconds / (24 * 3600));

    $ret = '';
    if ($days > 0)
        if ($days == 1) $ret += '1 day ';
        else $ret += $days + ' days ';

    if ($hour > 0){
        if ($hour < 10) $hour = '0' + $hour;
        $ret += $hour + ':';
    }else if ($days > 0) $ret += '00:';

    if($minutes < 10) $minutes = '0' + $minutes;

    $ret += $minutes + ':';

    if ($second < 10) $second = '0' + $second;

    $ret += $second;
    return $ret;

}

function updateTimes(){
    curTime++;
    localStorage.curTime = curTime; // save current time
    for (i in events){
        document.getElementById("timeLeft"+i).innerHTML=getFormatedLeftTime(timeLeft(i));
    }
}

for(i in events)
    document.getElementById("eventList").innerHTML+="<div style='float:right; color: #FFFF00;' id='timeLeft"+i+"'>"+getFormatedLeftTime(timeLeft(i))+"</div><div style=\"color: #00FFFF;\"><strong>"+events[i].name+"</strong></div>";
setInterval("updateTimes()", 1000);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:08:16.747

如果您只处理毫秒*自**纪元*格式的时间，则无需担心时区。

因此，在*服务器*端，以毫秒为单位计算正确的完成时间，然后在客户端下载脚本时将其发送给客户端。

在客户端，您只需计算服务器提供的时间和客户端的时代之间的*差异*，并将其转换为小时、分钟、秒等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:20:10.437

JavaScript 日期有一个调用的方法[`getTimezoneOffset()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)，它以分钟为单位返回与 GMT 的偏移量。您可以使用此值来协调到“中央”时区：

```
var d = new Date();
d.toString(); // Mon May 14 2012 13:20:24 GMT-0600 (MDT)
d.getTimezoneOffset(); // => 360 (GMT-600)
var localTimeOffsetHours = d.getTimezoneOffset() / 60; // => 6 
```

# jquery-cycle - jquery循环发现效果改变方向或自定义效果

> ID：10589488
> 
> 赞同：1
> 
> 时间：2012-05-14T19:02:45.790
> 
> 标签：jquery-cycle

我想根据活动幻灯片索引和下一张幻灯片索引来更改 Uncover fx 的方向。

我想要得到的效果是这样的：[http](http://www.shegy.nazwa.pl/test2/) ://www.shegy.nazwa.pl/test2/ - 在这里它像魅力一样工作，但在滚动和 jquery 循环中我想要导航菜单跳转到特定的幻灯片。

我知道有类似 scrollVert 的东西 - 但它不一样。

有人可以给一点建议吗？

# gwt - GWT - 如何将键盘监听器添加到画布？

> ID：10589489
> 
> 赞同：2
> 
> 时间：2012-05-14T19:02:49.270
> 
> 标签：gwt, canvas

我正在尝试将键盘侦听器添加到 GWT 中的画布中。但它不起作用。

我还在这个画布上添加了鼠标处理程序，它可以工作。

这是鼠标处理程序的代码（有效）：

```
 canvas.addMouseMoveHandler(new MouseMoveHandler() {
        public void onMouseMove(MouseMoveEvent event) {     
            mouseX = event.getRelativeX(canvas.getElement());
            mouseY = event.getRelativeY(canvas.getElement());
        }
    }); 
```

这是键盘处理程序的代码（这不起作用）：

```
 canvas.addKeyDownHandler(new KeyDownHandler() {
        public void onKeyDown(KeyDownEvent event) {
            int key = event.getNativeKeyCode();
            System.out.println("key: " + (char) key);
            System.out.println("keypressed :"+ event.getNativeKeyCode());
        }
    }); 
```

有任何想法吗？

* * *

**编辑**：初始化我的画布的方式与此类相同：[GwtCanvasDemo.java](http://code.google.com/p/gwtcanvasdemo/source/browse/trunk/src/com/google/gwt/gwtcanvasdemo/client/GwtCanvasDemo.java/)。我刚刚添加了 addkeydownhandler 并没有工作。我在 Chrome 和 IE9 中尝试过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:24:51.413

我试过这段代码。它为我工作。

```
RootPanel rootPanel = RootPanel.get();

final Canvas canvas = Canvas.createIfSupported();
canvas.addKeyDownHandler(new KeyDownHandler() {
    public void onKeyDown(KeyDownEvent event) {
        int key = event.getNativeKeyCode();
        System.out.println("key: " + (char) key);
        System.out.println("keypressed :"+ event.getNativeKeyCode());
    }
});

rootPanel.add(canvas, 0 ,0); 
```

输出：（当我**在浏览器上选择画布后**按'i'，'u'，'y'时）

```
key: I
keypressed :73
key: U
keypressed :85
key: Y
keypressed :89 
```

# database - 规范化太多与太少，例子？

> ID：10589491
> 
> 赞同：2
> 
> 时间：2012-05-14T19:03:02.453
> 
> 标签：database, schema, normalization, denormalization

我通常不设计数据库，所以我对如何规范化（或不规范化）用于注册用户的表有一些疑问。我有疑问的领域是：

*   locationTown：我计划对国家进行标准化，并为其设置一个单独的表格，但我应该对城镇做同样的事情吗？我猜用户会在注册时输入这个，而不是从下拉列表中选择。当输入可能来自用户时，可以标准化吗？
*   maritalStatus：我可以选择大约 5 种左右不同的状态。

另外，有人知道找到真实世界数据库模式/规范化示例的好地方吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:11:09.227

*   `locationTown`- 只需将其直接存储在用户表中。否则，您将不得不搜索现有城镇，同时考虑拼写错误和代码大小写。还有一些人使用非标准字符和语言（Kraków vs. Krakow vs. Cracow，另见：[罗马化](http://en.wikipedia.org/wiki/Romanization)）。如果你真的想要一张带有城镇的表格，至少要提供自动完成框，这样用户更有可能选择现有城镇。否则准备大量重复或几乎重复。

*   `maritalStatus`- 另一方面，这应该在一个单独的表中。或者更准确地说：使用单个字符或数字来表示婚姻状况。将其映射到人类可读形式的额外表只是为了方便（记住[i18n](/questions/tagged/i18n "显示标记为“i18n”的问题")），外键约束确保不使用不正确的状态。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-14T19:11:36.443

我不会太担心——数据库规范化（3NF 等）[在学术界被过分强调，而在工业界并不太实用](http://www.codinghorror.com/blog/2008/07/maybe-normalizing-isnt-normal.html)。此外，我们需要查看您的整个架构，以便判断这些实现在哪里是合适的。在担心规范化之前，先关注常用列的索引。

在进一步深入之前，您可能想看看[这个 SO question 。](https://stackoverflow.com/questions/2173066/is-database-normalization-still-necessary)

# c# - 将页面加载到 webBrowser 并抓取 HTML

> ID：10589496
> 
> 赞同：1
> 
> 时间：2012-05-14T19:03:21.203
> 
> 标签：c#, browser, html-parsing, web-scraping

我需要将页面加载到 webBrowser 中，等待该页面加载（包括 ajax），然后获取该页面的 HTML。

我试过这个，但它似乎没有按预期工作。任何帮助都会很棒！

```
WebBrowser webBrowser = new WebBrowser();
webBrowser.Navigate("http://www.mysite.com");
String htmldoc = webBrowser.DocumentText; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:12:36.627

订阅文档完成...

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    string htmldoc = webBrowser.Document.Body.InnerHtml;
} 
```

这应该够了吧。

# git - GIT - 克隆时出现“早期 eof”错误

> ID：10589498
> 
> 赞同：6
> 
> 时间：2012-05-14T19:03:24.887
> 
> 标签：git

当我尝试从存储库 git 克隆项目时，出现早期 EOF（索引包失败）错误。

但是当我从我`git-pull`的`git-push`本地主机到存储库时，我没有问题。
该错误给了我存储库已损坏的消息。有点奇怪。

哪些因素会导致此类错误？存储库在哪里的服务器是否内存不足？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:40:20.937

[git clone 因“index-pack”失败而失败？](https://stackoverflow.com/questions/1943914/git-clone-fails-with-index-pack-failed)将列出此错误的最常见原因。

但请注意，当前的 Cygwin 版本（如果您正在使用该版本）[在通过 ssh 进行克隆时存在 git 问题](http://comments.gmane.org/gmane.os.cygwin/130843)。

根据执行 git clone 请求的服务器，您[在通过 git protocol 克隆 ssh](http://git.661346.n2.nabble.com/Unable-to-clone-via-git-protocol-early-EOF-index-pack-failed-td6203553.html)时也会遇到问题。

# c# - 枚举不序列化

> ID：10589500
> 
> 赞同：12
> 
> 时间：2012-05-14T19:03:45.343
> 
> 标签：c#, wcf, msmq

我有 WCF 服务。它绑定到一个 MSMQ，但这不是这里的问题。我可以序列化一个对象，该对象具有基类和在基类中实现的接口，具体类派生自基类 - 这很好用。

但是，当我在基类中有一个枚举并设置了该值，然后在它被反序列化/从 MSMQ 读取之后，该值仍设置为默认值（即不是在代码中手动设置的值）

有什么想法吗？我什至将枚举标记为 DataContract，并且每个 Enum 成员都具有 EnumMember 属性。

如何序列化枚举？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:07:04.337

试试这个。

```
[Serializable]
public enum EnumToSerialize
{
    [XmlEnum("1")]
    One = 1,
    [XmlEnum("2")]
    Two = 2
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T23:52:15.987

该财产受到保护。将其设置为 Public 和 viola - 序列化 enum 属性。有点糟糕，因为该物业位于低音类中……而是受到保护

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:23:28.643

[试试MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)上的这篇文章。这个例子似乎能够设置一个带有枚举的属性并将其序列化。在反序列化对象时，您应该能够取回相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T13:48:53.587

我使用它，它适用于公共枚举：

```
[Serializable]
public enum EnumToSerialize
{
    [EnumMember]
    One = 1,
    [EnumMember]
    Two = 2
} 
```

# linux - ShellScript - 帮助我列出文件和子目录

> ID：10589505
> 
> 赞同：2
> 
> 时间：2012-05-14T19:04:15.070
> 
> 标签：linux, file, list, shell

我想知道如何以这种格式列出目录。普通列表结构：

```
#find . -follow -type f | sed "s/.//"

/files/test1/test2/file1.txt
/files/test1/test2/file2.txt
/files/test1/test2/file3.txt
/files/test1/file1.txt
/files/test1/file2.txt
/files/test1/file3.txt
/files/file1.txt
/files/file2.txt
/files/file3.txt
/file1.txt
/file2.txt
/file3.txt 
```

我想列出如下：

```
/files/test1/test2/file1.txt
file2.txt
file3.txt
/files/test1/file1.txt
file2.txt
file3.txt
/files/file1.txt
file2.txt
file3.txt
/file1.txt
file2.txt
file3.txt 
```

像这样：

```
 ls -R1 | sed -e 's/://' -e 's/.//' 
```

但想要上面解释的结构！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:45:46.393

```
... | while read path; do 
    dir=$(dirname "$path")
    if [[ $dir = $prev ]]; then 
        echo $(basename "$path")
    else 
        echo $path
        prev=$dir
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:15:17.120

有趣的测验！

设置示例目录和文件

`mkdir -p files/test1/test2 && for P in . files files/test1 files/test1/test2; do touch "$P"/file{1,2,3}.txt; done`

作为一个单行，尝试

`find . -type d | sort -r | while read P; do printf "${P#.*}"/; ls -v | while read F; do echo ${F##*/}; done; done`

输出就像你的要求

```
/files/test1/test2/file1.txt
file2.txt
file3.txt

/files/test1/file1.txt
file2.txt
file3.txt

/files/file1.txt
file2.txt
file3.txt

/file1.txt
file2.txt
file3.txt 
```

解决这个问题很有趣。

# c++ - 内存错误：free()：下一个大小无效（快速）

> ID：10589508
> 
> 赞同：3
> 
> 时间：2012-05-14T19:04:24.203
> 
> 标签：c++, memory, stl, stack-trace, push-back

我正在尝试实现 a `radix sort`，并且此代码会产生内存故障：

```
(free(): invalid next size (fast)) 
```

代码如下：

```
unsigned int * radix(unsigned int *x,int n, int g,bool verbose)
{
    int elem_size = sizeof(unsigned int)*8;
    int mask = ((1<<g)-1);    
    float num_rounds= ((float)elem_size/(float)g);
    int B = 1 << g; // 2^g BTW

    vector<unsigned int> buckets[B];

    // begin radix sort
    for( unsigned int round=0 ; round<num_rounds ; ++round)
      {

        // count
        for(int elem=0 ; elem<n ; ++elem)
        {
            // calculate the bucket number:
            unsigned int const bucket_num = ( x[elem] >> g*round) & mask;
    --->        buckets[bucket_num].push_back(x[elem]);
        }
        // more stuff
    }
    return x;
} 
```

`GDB`指出错误在 push_back 内，但`elem`总是小于`n`（`n`的大小在哪里`x[]`）。所以，我认为它只能在`bucket_num`. 然而，就在它崩溃之前`GDB`给了我他们的价值观：

> ```
> Breakpoint 1, radix (x=0x604010, n=50, g=4, verbose=true)
>     at radix.mpi.seq.cpp:38
> 38                buckets[bucket_num].push_back(x[elem]);
> 2: B = 16
> 1: bucket_num = 2 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:50:24.297

从您的评论中可以清楚地看出：访问`unsigned int *x`是您在`radix`函数中访问它时出现无效写入错误的原因。

`unsigned int *x = new unsigned int(n);`分配一个*unsigned* int 并将值分配`n`给它。你真的想要一个无符号整数数组： `unsigned int *x = new unsigned int[n];`

一般来说，通过[Valgrind](http://www.valgrind.org/)运行有助于发现内存泄漏以及问题所在。因为，您收到的错误消息通常几乎不会出现在它*似乎*发生的地方。

# c++ - Sqlite C++ Image to Blob 不会存储任何内容

> ID：10589509
> 
> 赞同：3
> 
> 时间：2012-05-14T19:04:32.160
> 
> 标签：c++, image, sqlite, blob, storage

我google了很多，找不到任何解决方案。我目前正在用 Codegear 2007 C++ 编写自己的应用程序。我正在为我的小猫写这个应用程序，它有点像奶制品，但我称之为 KittyBook。

所以我有两个表（抱歉不明白如何 CodeBlock）：

*   小猫信息
*   小猫数据。

KittenInfo 存储他们的姓名和 ID（主键）、性别和出生。这个有效。

另一个应该存储一个 Blob。所以在尝试了这么多方法之后。如果我使用正常插入但不包括 blob 表进行查询，它将不会存储在表中，甚至不会存储其他数据。

所以，我不知道我做错了什么，但到目前为止我喜欢 SQLite。那就不回头了吧？

功能是：

```
void CDatabase::InsertKittenData(int Kitten_ID, int kittenDay, bool DayOrWeek,
    char * kitten_weight, char * Kitten_Comment, string PhotoFile) {

    unsigned char * blob;

    ifstream::pos_type size;
    int size2 = 0;
    if (FileExists(PhotoFile.c_str())) {
        ifstream file(PhotoFile.c_str(), ios::in | ios::binary | ios::ate);
        if (file.is_open()) {
            size = file.tellg();
            blob = new char[size];
            file.seekg(0, ios::beg);
            file.read(blob, size);
            file.close();
        }

    }
    else {
        blob = NULL;
    }
    sqlite3 *dbp;
    sqlite3_stmt *ppStmt;
    // NULL = primary key autoinc.
    char * Sql = "INSERT INTO KittenData VALUES ( NULL, ? , ? ,? , ? , ? , ?);";

    int rc = sqlite3_open("KittyBook.db", &dbp);
    if (rc)
        return;

    if (sqlite3_prepare_v2(dbp, Sql, -1, &ppStmt, NULL) != SQLITE_OK) {
        return;
    }

    if (ppStmt) {
        if (sqlite3_bind_int(ppStmt, 1, Kitten_ID) != SQLITE_OK)
            return;

        if (sqlite3_bind_int(ppStmt, 2, kittenDay) != SQLITE_OK)
            return;
        if (sqlite3_bind_int(ppStmt, 3, DayOrWeek) != SQLITE_OK)
            return;

        if (sqlite3_bind_text(ppStmt, 4, // Index of wildcard
            kitten_weight, strlen(kitten_weight), // length of text
            SQLITE_STATIC) != SQLITE_OK)
            return;
        if (sqlite3_bind_text(ppStmt, 5, // Index of wildcard
            Kitten_Comment, strlen(Kitten_Comment), // length of text
            SQLITE_STATIC) != SQLITE_OK)
            return;

        if (sqlite3_bind_blob(ppStmt, 6, blob, size2, SQLITE_TRANSIENT)
            != SQLITE_OK)
            return;

        if (sqlite3_step(ppStmt) != SQLITE_DONE)
            return;
    }

    sqlite3_finalize(ppStmt);

    sqlite3_exec(dbp, "COMMIT", NULL, NULL, NULL);

    sqlite3_close(dbp);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:47:16.140

mu 太短了，给了我逐步执行功能并逐列增加的想法。不知道我做错了什么，但它现在工作。

干杯mu太短了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:23:04.040

您声明并初始化`size2`为零：

```
int size2 = 0; 
```

然后下一个使用`size2`是当你绑定 blob 时：

```
sqlite3_bind_blob(ppStmt, 6, blob, size2, SQLITE_TRANSIENT) 
```

来自[精美手册](http://sqlite.org/c3ref/bind_blob.html)：

> 在那些有第四个参数的例程中，它的值是参数中的字节数。需要明确的是：该值是值中的字节数，而不是字符数。

在这种情况下，第四个参数是`size2`并且为零。结果是您告诉 SQLite 绑定一个长度为零的 blob，然后您想知道为什么没有存储任何内容。好吧，什么都没有被存储，因为你要求 SQLite 存储零字节，它只是按照它的指示去做。

也许您想使用`size`而不是`size2`.

# forms - 创建高级用户界面 blackberry

> ID：10589513
> 
> 赞同：1
> 
> 时间：2012-05-14T19:04:57.567
> 
> 标签：forms, blackberry, user-interface, uitextfield

我正在寻找一个类似于下面在我的黑莓表单中显示的图像的文本框。截至目前，我可以添加一个带有标签的文本字段，比如说

```
 Name:(Cursor blinks) 
```

此外，当我尝试添加图像时，它不会显示在标签旁边，而是在其下方。我尝试过对齐和调整图像大小等，但都是徒劳的。布局管理器如何帮助我做到这一点？

有人可以为我提供如何实现这一目标的确切方法。在此先感谢。

![在此处输入图像描述](../Images/4de9a1773448877d68df26e080051259.png)

```
 //Lets say adding  textfield with validation for name
     TextField1 = new TextField("\n Customer Name: ",null)
     {
            protected boolean keyChar(char ch, int status, int time) 
            {
            if (CharacterUtilities.isLetter(ch) || (ch == Characters.BACKSPACE || (ch == Characters.SPACE))) 
            {
            return super.keyChar(ch, status, time);
            }
           return true;
            }
        };
       add(TextField1);

      //Or either by using this,the text is placed within the image
    Border myBorder = BorderFactory.createBitmapBorder( 
    new XYEdges(20, 16, 27, 23),
    Bitmap.getBitmapResource("border.png"));
    TextField myField = new TextField(" Write something ",TextField.USE_ALL_WIDTH | TextField.FIELD_HCENTER)
    {
      protected void paint(Graphics g) {
        g.setColor(Color.BLUE);
        super.paint(g);
    }
    };  

   myField.setBorder(myBorder);
   add(myField); 
```

//在尝试了[Blackberry App Appearance VS Facebook App](https://stackoverflow.com/questions/9688140/blackberry-app-appearance-vs-facebook-app)给出的代码后，我得到了以下布局

![在此处输入图像描述](../Images/aa72b8be24a047400b5341db73a86946.png)

我仍然想实现一个站在标签旁边的盒子。就像绿色图像中显示的那样。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:34:51.677

看看[这个](https://stackoverflow.com/questions/9688140/blackberry-app-appearance-vs-facebook-app)答案。我想它可能对你有帮助。只需使用代码，直到获得所需的外观和感觉。

# android - 如何判断是否使用 Titanium 在 Android 上启用了 GPS

> ID：10589515
> 
> 赞同：14
> 
> 时间：2012-05-14T19:05:11.053
> 
> 标签：android, titanium-mobile

我正在 Titanium 中开发 Android 3.2+ 应用程序。我能够确定设备是否启用了 GPS 至关重要。根据 Titanium API 参考，Ti.Geolocation.locationServicesEnabled 在 Android 2.2+ 上将始终返回 true，因为有一个新的“被动”位置提供程序。有没有其他方法可以确定 GPS 是否真正启用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:03:05.313

我认为这段代码应该适合你：

```
//check to see if we have GPS capabilities
if(Titanium.Geolocation.isLocationProviderEnabled(Titanium.Geolocation.PROVIDER_GPS,     Titanium.Geolocation.ACCURACY_BEST) == false) {
var alertDlg = Titanium.UI.createAlertDialog({
    title:'MileTrackGPS', 
    message:'GPS is OFF.  Enable it in Settings.',
    buttonNames: ['Cancel', 'Open Settings']
});
alertDlg.cancel = 0;

alertDlg.addEventListener('click', function(e){
    if(!e.cancel) {
        //open up the settings page
        var settingsIntent = Titanium.Android.createIntent({
            action: 'android.settings.LOCATION_SOURCE_SETTINGS'
        });
        activity.startActivity(settingsIntent);
    }
    else {
        //close the window to exit
        win.close();
    }
});

alertDlg.show();
} 
```

[参考](http://developer.appcelerator.com/question/120540/titaniumgeolocationlocationservicesenabled-is-always-true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T17:47:48.810

好吧，这是我想出的一个简单的解决方案，它对我来说效果很好。我有一个全局变量“timeStamp”，最初设置为零。

```
Titanium.Geolocation.getCurrentPosition(function(e){

        //only update fields if timer is still active
        if(gpsTimer!=null)
        {                   
            //if the provider is not GPS or the timestamp is the same as the last, we do not want the results. We need to alert the user that they need to turn their GPS on. 
            if(e.provider['name']!="gps" || timeStamp==e.coords.timestamp)
            {
                //clear timeout 
                clearTimeout(gpsTimer);
                gpsTimer = null;        
                //close window
                get_gps_win.close();
                //garbage collection
                get_gps_win = null;
                gpsLatField = null;
                gpsLongField = null; 
                gpsAccuracyField = null;
                timeStamp=0;

                //alert user
                alert("This feature is not available unless you have GPS turned on. Please turn GPS on and then try again.");

            }  
            else
            {                   
                //update fields
                gpsLatField.value=ConvertDDToDMSPlain(e.coords.latitude);
                gpsLongField.value=ConvertDDToDMSPlain(e.coords.longitude);
                gpsAccuracyField.value=e.coords.accuracy+" meters/"+(e.coords.accuracy*3.28084)+" feet";     

                gpsTimer=setTimeout(function() {
                   Titanium.Geolocation.fireEvent('location');
                }, 1000);       
            } 

            timeStamp= e.coords.timestamp;

        }
    }); 
```

# java - RabbitMQ - 安全/身份验证

> ID：10589516
> 
> 赞同：0
> 
> 时间：2012-05-14T19:05:18.073
> 
> 标签：java, rabbitmq, amqp

我正在开发一个应用程序，我只是想知道 RabbitMQ 是否有可能允许所有客户端将消息推送到特定队列，并且只有经过身份验证的用户才能使用该队列中的消息？我似乎找不到任何关于此的内容：/

基本上我的模型是这样的：客户端都连接到同一个队列并推送他们的消息。此外，每个客户端都应该在接收消息的地方注册自己的队列（每个客户端都有唯一的队列）。

所以基本上客户端会将消息发送到一个队列，并且只有我的服务器应用程序应该能够从中读取，处理数据并将回复发送到特定的用户队列（只能由该用户读取并且只有服务器应该在其上发布） .

我想这是可能的吧？有人可以引导我走向正确的方向，在哪里可以找到有关这些东西/示例/教程的更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:41:02.630

因此，开箱即用的 AFAIK 是不可能的，但您有 2 个选项：

1.  如果您熟悉 erlang，则可以为 rabbitmq 编写自己的插件（这不需要额外的 erlang 知识 - 只是基础知识）
2.  您可以创建 2 个虚拟主机并在每个主机上进行交换（vhost A 用于读取 vhost B 用于写入）。在虚拟主机 B 中创建交换，并使用路由键将其绑定到特定队列。在虚拟主机 A 中创建联合交换[1]。简介：联邦交换允许映射交换到上游交换，这意味着映射交换将接收来自上游交换的所有消息。因此，在虚拟主机 A 中进行交换 E1 并将其映射到虚拟主机 B 中的交换 E2。对于每个虚拟主机，您可以创建不同的用户。

[1]：[http](http://www.rabbitmq.com/federation.html) ://www.rabbitmq.com/federation.html - 这是关于联邦插件的手册，其中包含现成的示例。

# android - 什么是捆绑、视图、上下文？

> ID：10589517
> 
> 赞同：3
> 
> 时间：2012-05-14T19:05:19.077
> 
> 标签：android

伙计们，我在 YouTube 上看过关于 android 的教程，它有 200 个视频，但没有解释什么是 Bundle、View 和 Context。

**第一个问题**什么是Bundle？

**第二个问题**onCreate 方法**中的 bundle 是从哪里来的**？那个包里面有什么？

**第三个问题**什么是上下文？我发现 Activity 扩展了 Context，那么说 Context 是 Activity 本身是否正确？或该活动的背景？

**第4个问题**什么是View？我发现 TextView 扩展了 View，而 Button EditText 等其他小部件扩展了 TextView，因此这意味着它们也扩展了 View。我还发现Button、EditText等小部件的语法是这样的……

```
TextView(Context);
Button(Context);
EditText(Context); 
```

所以我的假设是
**“Context = Activity = Screen”和“View = Button = TextView = EditText”**

所以在这个例子中

```
public Example extends Activity{

    onCreate(){
        Button buttonObj = new Button(this):
    }
} 
```

`Button buttonObj = new Button(this);`
**这里的“this 关键字”**是指扩展 Activity 的 Example 类。这里的代码基本上是说**“把这个是 View 的 Button 放在作为屏幕的 Activity 的上下文中”**？
如果我是对的，那么为什么 Activity 在 Button 内部传递？因为如果在 Activity 中传递按钮是有意义的。

**第五个问题**这里发生了什么？

```
add.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        //code here

    }
}); 
```

什么是新的 View.onclickListener() ？这是一个返回实现 onClickListener 的对象的静态方法吗？

**能否推荐一些学习安卓的好书？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:29:55.530

Bundle ~ Bundle 是数据的集合。当一个 Activity 启动时（通过 onCreate），Android 操作系统（或者你！）可以通过这个 bundle 传递一些额外的数据给这个 Activity。你知道什么是HashMap吗？捆绑包是一个美化的哈希图，它支持多种不同的类型。

OnCreate Bundle ~ 这个包来自 Android。老实说，不要太担心它。如果你想从另一个活动开始，你使用一个意图（你知道吗？）。因此，您可以将数据“捆绑”到意图中（使用`setExtra`方法）。来自意图的这些数据将包含在这个 onCreate 包中，您可以通过那里访问它。

上下文〜您正在运行的应用程序以及与之相关的任何内容。当您运行您的应用程序时，与您的应用程序关联的所有内容都被此上下文引用。你们所有的活动、视图、资源，一切都与上下文相关联。把它想象成这个词的定义：它是你的应用程序的上下文。每个应用程序都有一个独特的上下文。

视图~视图是可以在屏幕上绘制的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:22:05.227

OnCreate()：活动的整个生命周期发生在第一次调用 onCreate() 到最后一次调用 onDestroy() 之间。活动在 onCreate() 中完成其所有“全局”状态的初始设置，并在 onDestroy() 中释放所有剩余资源。例如，如果它有一个线程在后台运行以从网络下载数据，它可能会在 onCreate() 中创建该线程，然后在 onDestroy() 中停止该线程。OnCreate 方法在首次创建活动时调用。这是您应该进行所有常规静态设置的地方——创建视图、将数据绑定到列表等等。如果捕获到该状态，则向该方法传递一个包含活动先前状态的 Bundle 对象。

视图：窗口的视觉内容由视图的层次结构提供——从基视图类派生的对象。每个视图控制窗口内的特定矩形空间。父视图包含并组织其子视图的布局。叶视图（位于层次结构底部的视图）在它们控制的矩形中绘制并响应指向该空间的用户操作。因此，视图是活动与用户进行交互的地方。例如，一个视图可能会显示一个小图像并在用户点击该图像时启动一个操作。Android 有许多现成的视图（小部件）可供您使用——包括按钮、文本字段、滚动条、菜单项、复选框等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:24:41.773

我建议你看一些基于文本的教程而不是视频，因为当你感到困惑时，它会更容易看和重读。

我将开始帮助您弄清楚这些术语的含义。

Bundle - 对你来说不是很重要的理解。调用活动时，您可以将内容添加到捆绑包中以发送到下一个活动，以便新活动具有您想要的信息。

背景——每个活动都有自己的背景，对它有基本的了解很重要。您的第一个应用程序将有一个活动（或类），一切都在其中完成。在这种情况下，您只需要担心表示当前活动活动的“this”上下文。但是，如果您使用具有多个活动的应用程序，有些可能是活动的，而另一些则不是。上下文告诉您的应用程序正在请求一个操作，例如在屏幕上显示文本或图像。

视图是您的基本 UI 元素。它们可以很简单，例如 TextViews（仅显示文本）、按钮，或者更复杂的，例如组织其他视图的布局。

对于您的示例：

```
public Example extends Activity{
     onCreate(){
          Button buttonObj = new Button(this):
          } 
```

示例是使用活动资源的类的名称。当活动“示例”启动时，它首先调用 onCreate 方法。然后它会创建一个按钮对象，您可以将其“附加”到布局文件中的物理按钮上。

setOnClickListener 方法用于让您的活动准备好单击按钮。进入 onClick 部分的代码是用户单击按钮时会发生的情况。

如果你想进入 android 编程，你真的应该首先阅读这个网站上的常见问题解答。您应该只发布可回答的问题，而不是征求诸如什么是好书之类的意见。数百人已经问过这个问题，如果你不能做一个简单的谷歌搜索，你可能想等待学习编程。

但是我很好，所以这里有一些在线教程可以帮助您入门并解释您感到困惑的一些事情：

[http://developer.android.com/guide/index.html](http://developer.android.com/guide/index.html) http://www.codeproject.com/Articles/102065/Android-A-beginner-s-guide

# php - 快速的多部分电子邮件

> ID：10589518
> 
> 赞同：4
> 
> 时间：2012-05-14T19:05:21.060
> 
> 标签：php, swiftmailer

在 iPhone 上时，多部分消息无法在 gmail 上正确显示。我有：

```
$message->setBody($this->body, 'text/html');
$message->addPart($this->text_body, 'plain/text'); 
```

我也用过：

```
$message->addPart($this->body, 'text/html');
$message->addPart($this->text_body, 'plain/text'); 
```

但是在这两种情况下，当从 iPhone 读取 gmail 时，我都会收到“MIME 附件”的消息……没有 html，甚至无法读取 MIME 附件。如果我不添加文本部分，该消息将正常显示...

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:52:07.413

我知道这篇文章很老了，但如果有人像我一样在谷歌上找到这个，上面的问题是我的类型定义。正确的 mime 类型是 text/plain 而不是 plain/text，如下所示：

```
$message->addPart($this->text_body, 'text/plain'); 
```

对我有用的最终版本如下所示：

```
$message->setBody($this->body, 'multipart/alternative');
$message->addPart($this->body, 'text/html');
$message->addPart($this->text_body, 'text/plain'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T13:45:45.533

你需要做：

```
$message->setBody($your_plain_text_email_here);
$message->addPart($your_html_email_here, 'text/html'); 
```

我刚刚遇到了完全相同的问题，这在 Mac 邮件应用程序、iPhone 邮件应用程序和 Horde（网络邮件，它以纯文本形式出现。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:13:28.907

我必须查看电子邮件的源代码才能为您提供问题的原因。

```
$message->setBody($this->body, 'multipart/alternative');
$message->addPart($this->body, 'text/html');
$message->addPart($this->text_body, 'plain/text'); 
```

据我所见，目前还没有符合 RFC 规定的电子邮件类。我自己构建了一个 SMTP 服务器，并在其中内置了一个 SMTP 服务器，因此它直接发送电子邮件，而不是通过 mail()。

# asp.net - 为什么我的菜单在开发中很好但在生产中没有？

> ID：10589524
> 
> 赞同：0
> 
> 时间：2012-05-14T19:05:36.807
> 
> 标签：asp.net, iis-7, .net-4.0

所以现在我有一个面向 .NET Framework 4.0 的 Web 应用程序。Web 服务器已安装以下内容。

**网络服务器：**

![网络服务器](../Images/402fa2bd5a37a896e6387bda3d7ce1da.png)

**本地机器：**

![本地机器](../Images/c73183e68418dd9d6eff5262eb17cf76.png)

因此，当我在本地调试并全部显示在一行上时，基本上我网站上的菜单显示得很好。但是，当我发布到生产环境时，我的 Web 应用程序菜单会在 1 行上显示除最后一项之外的所有内容。我假设这与安装的框架有关，但我并不肯定。

该应用程序的应用程序池在 Web 服务器上的 4.0 版本下运行。

**编辑**

**CSS**

```
#content-wrapper{
    margin: 0 auto;
    position:relative;
    width:830px;
    visibility:hidden;
}

.menu {
    height:29px;
    background: #fff;
    width:100%;
    border-top: solid 1px #f53200;
    margin: 10px 0px 0px 0px;
    padding:0px 0px 0px 20px;
    color:#000;
}

.menu a{
    font-family: AvantGarde, sans-serif;  
    text-transform:uppercase;
    font-size:16px;
    letter-spacing:1px;
    float:left;
    text-decoration:none;
    position:relative;
    padding: 6px 13px 6px 13px;
    color:#000;
    display:block;
}

#contact ul {
    list-style:none;
    float:left; 
}

#contact ul li {
    margin:5px 0px;    
}

#contact label {
    color:#fff;
    float:left;    
} 
```

**HTML**

```
<div class="menu">
    <a  class="home"  href="#home">HOME</a>
    <a  class="about" href="#about-us">ABOUT US</a>
    <a  class="contact" href="#contact-us">CONTACT US</a>  
</div><!--menu--> 
```

抱歉刚刚找到菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:18:09.110

哇...真正的问题是我的字体没有得到应用。然后我意识到字体文件夹甚至没有发布。所以我将它们添加到我的 .csproj 中，并且在下一次发布时一切都很好。

# sql - 如何在存储过程中读取 XML 文件

> ID：10589526
> 
> 赞同：3
> 
> 时间：2012-05-14T19:05:54.907
> 
> 标签：sql, xml, etl

我阅读了许多关于在存储过程中读取 XML 的标题，但仍然找不到我正在寻找的答案。（这是我在stackoverflow中的第一篇文章，所以如果我的格式不正确，我很抱歉）

这是我需要在存储过程中读取/解析的示例 XML 文件：

```
<TABLENAME>
   <Fld Name="Field1">ValueInField1</Fld>
   <Fld Name="Field2">ValueInField2</Fld>
   <Fld Name="Field3">ValueInField3</Fld>
</TABLENAME> 
```

我需要（理想情况下）是获取单行表，其中列名是 Field1、Field2、Field3，这些列中的值是 ValueInField1、ValueInField2、ValueInField3。

这可能吗？如果是，如何。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-04T12:58:16.307

如果您正在处理 SQL Server，则[OPENXML](https://msdn.microsoft.com/de-de/library/ms186918.aspx)函数可以正常工作。

但是您可以考虑将数据作为行导入，然后根据需要对数据进行透视。在检查数据类型等时，基于行的导入提供了很多优势。

您是否必须导入具有多个“记录”的单个 XML，还是每条记录有一个 XML？

# android - 如何以编程方式扩展我的 android 应用程序中的通知栏？

> ID：10589528
> 
> 赞同：0
> 
> 时间：2012-05-14T19:05:58.880
> 
> 标签：android, notifications

我从 adw 启动器中找到了以下代码：

```
Object service = launcher.getSystemService("statusbar");
if (service != null) {
    Method expand = service.getClass().getMethod("expand");
    expand.invoke(service);
} 
```

引发 SecurityException：StatusBarManagerService：用户 123456 和当前进程都没有 android.permission.EXPAND_STATUS_BAR

所以我加了

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

到我的应用程序 manifest.xml，但仍然没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:56:41.857

```
Object service = getSystemService( "statusbar" );
Class<?> statusbarManager = Class.forName( "android.app.StatusBarManager" );
Method expand = statusbarManager.getMethod( "expand" );
expand.invoke( service ); 
```

并将其添加到清单中：

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

# asp.net - VB.Net 搜索复选框列表

> ID：10589531
> 
> 赞同：0
> 
> 时间：2012-05-14T19:06:10.293
> 
> 标签：asp.net, vb.net

我有一个复选框列表，其中包含我的数据库中的条目。我还在页面顶部有一个搜索栏。如何使用搜索栏搜索复选框。我现在正在做的不是将任何内容返回到屏幕，它只是保持在同一个屏幕上。我的复选框列表 ID 是 check1，我的搜索栏 ID 是搜索。因此，单击我的搜索按钮时，我运行以下代码：

```
check1.Items.FindByText(searchText.Text) 
```

ASP：

```
<asp:TextBox ID="searchText" placeholder="Search For Customer:" AutoPostBack="true" TextAlign="Right" runat="server" Width="448px"></asp:TextBox>
<asp:Button ID="search" runat="server" text="Search" /> 
```

这里有什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:35:34.813

FindByText 返回一个 ListViewItem。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbytext.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbytext.aspx)

当您说“它只是保持在同一个屏幕上”时，您的意思是您的列表视图没有更新并且您期望它更新吗？你必须自己处理。

由于您的 lv 已绑定，您可以过滤绑定的数据集并重新绑定它（LINQ 在这里很好），或者您可以调用一个存储过程，该过程将根据该搜索文本返回结果。您将需要使用以下内容：

```
SELECT  Field1, Field2, FieldN
FROM    Table
WHERE   FieldToSearch LIKE '%' + @searchText + '%' 
```

再次阅读有关您不熟悉的方法、控件等的文档。如果你这样做了，你会看到你只取回了该项目，而不是过滤列表视图。

# c - 结构返回函数

> ID：10589533
> 
> 赞同：1
> 
> 时间：2012-05-14T19:06:17.803
> 
> 标签：c

在*C*组件选择中，结构返回函数有什么好处？例如：

```
struct S {
   int a, b;
} x; 
```

为什么我可以将上述结构分配为如下所示的函数，这样做有什么好处吗？

```
extern struct S f(); /* Why is this neccesary? */
x = f(); /* Is this accurate */ 
```

睁大眼睛看看这些家伙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:09:03.800

它只是一个碰巧返回 a 的函数`struct`。没有什么比这更重要的了。看到一个函数返回一个你不会感到惊讶`int`，为什么当一个返回一个结构时会感到惊讶呢？

顺便说一句，`extern`这里是多余的，因为这是函数的默认存储类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:13:17.277

它很有用，因此您可以从函数返回多个值。

例如，您可以像这样使用它

```
struct Point {
   int x;
   int y;
};

struct Point getMousePos()
{
    struct Point pos;
    pos.x = 567;
    pos.y = 343;
    return pos; 
}

int main()
{
    struct Point mouse_pos = getMousePos();
    printf("Mousepos %d,%d\n", mouse_pos.x, mouse_pos.y");   
} 
```

函数可以前向声明`extern`（这通常在头文件中完成），以便其他函数知道它的原型，即它的参数和返回类型，即使函数本身是在另一个文件中定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:10:16.960

如果你得到一个结构的副本而不是指向它的指针，你知道你永远不必担心`free()`它，或者是否存在任何数据竞争，即一个线程正在写入结构而另一个线程从它读取，或者是否函数返回的指针将因您可能无法控制的某些操作而失效。

# ios - 将配置文件添加到现有项目的新设备

> ID：10589535
> 
> 赞同：5
> 
> 时间：2012-05-14T19:06:36.697
> 
> 标签：ios, xcode

我对如何将配置文件添加到新设备感到困惑。所以我使用的是 Xcode 4.3.2 和 TestFlight。通过我正在帮助的公司，我获得了一个预先存在的项目和团队许可。developer.apple.com 上的配置文件已经设置了某些设备。所以我将所有这些设备作为测试人员添加到了 TestFlight，发送了一个存档的构建，没有问题，工作正常。

现在，其中一位测试人员想尝试在 iPad 上进行测试。因此，我通过 TestFlight 向他们发送了邀请，他们的设备自动在 TestFlight 上注册。我看到了他们的 UDID 和设备等。但是，他们的设备列在“不在此配置文件上的队友设备”下。所以，我按照提示，将丢失的 UDID 导出到一个文件，并将该文件上传到 Provisioning Portal。我现在在 Provisioning Portal 的“设备”下看到 iPad，但是它列出了 0 个关联的配置文件。如何将此应用程序的配置门户与 iPad 关联？我缺少一些简单的步骤吗？请记住，此 iPad 位于国外，因此我无法控制它。我需要告诉他们他们需要做什么（或自己自动化）。请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T19:10:33.423

您需要将设备添加到配置文件中。然后，使用更新的配置文件再次构建项目。并将该构建上传到试飞。

或者，我相信 TestFlight 有一个新功能，它允许您使用新配置文件简单地更新构建，而无需创建新构建。

# jquery - 自定义 Wordpress 管理菜单

> ID：10589536
> 
> 赞同：0
> 
> 时间：2012-05-14T19:06:37.820
> 
> 标签：jquery, ajax, wordpress

我想自定义 wordpress 仪表板左侧菜单。我想通过悬停来删除子菜单，而不是想在菜单中显示它们而不悬停。例如，当我们将鼠标悬停在“页面”上时，会出现“所有页面”和“添加新页面”的子菜单。我想在菜单中显示这些选项而不将其悬停。我将不胜感激任何帮助或任何开始的提示。

![在此处输入图像描述](../Images/6a193fda2ce6ea127feb9b955f1d8349.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:11:06.380

您已经可以通过单击“页面”而不是悬停来获得此功能

![Word Press 管理菜单](../Images/7607a69e2f5de99a2fb00c11e6cc0e39.png)

如果你想预先扩展菜单选项，这个插件也可以工作：[http ://wordpress.org/extend/plugins/expanded-admin-menus/](http://wordpress.org/extend/plugins/expanded-admin-menus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:09:34.053

试试这个插件：

[http://wordpress.org/extend/plugins/wp-custom-admin-bar/](http://wordpress.org/extend/plugins/wp-custom-admin-bar/)

# javascript - 如何检查图片是否加载？

> ID：10589537
> 
> 赞同：1
> 
> 时间：2012-05-14T19:06:53.267
> 
> 标签：javascript

如何检查图片是否已加载？

```
image.src = ay.url_static + 'uploads/apps/' + thumbnail.uid + '.png';
image.onload = function(e)
{                   
    // [..]
}; 
```

我知道如何在加载图像时触发回调，但我如何检查图片是否已加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:14:11.393

我不确定您想要什么，但据我了解，您需要知道是否随时加载图像，对吗？

我有一个功能可以检查图像是否有效。如果需要，您也可以使用它来查看图像是否已经加载。如果您不想知道图像是否有效，则可以仅使用 img.complete 属性。

```
function IsImageLoaded(img) {

    if (!img.complete) {
        return false;
    }

    if (typeof img.naturalWidth != "undefined" && img.naturalWidth == 0) {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:11:01.970

设置`image.loaded = false`，然后`image.loaded = true`在您的 onload 回调中设置并稍后检查该属性？

或者 image.complete 似乎是一个合法的财产，如果不是 W3C 的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:12:43.833

假设您正在使用 jQuery ...

```
image.onload = function(e)
{                   
    $(this).data({loaded: true});
}; 
```

之后...

```
if($(yourImage).data('loaded')) {
  // it's loaded!
} else {
  // it's not
} 
```

jQuery[`.data()`](http://api.jquery.com/jQuery.data/)非常适合设置特定于元素的变量。

# git - 有没有办法从远程存储库中提取提交消息？

> ID：10589545
> 
> 赞同：1
> 
> 时间：2012-05-14T19:07:20.110
> 
> 标签：git, message, git-clone

我有一个脚本，它基本上分析了给定远程存储库中的提交消息。

我当前的实现克隆了远程存储库，然后遍历每个分支，运行“git whatchanged”命令。

如果我只需要提交消息，有什么方法可以在不必克隆存储库的情况下这样做吗？我认为这会大大加快脚本的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:27:19.510

我不相信这`git`提供了一种远程迭代存储库的机制。如果您在本地保留一个缓存的工作目录，而不是重新克隆整个目录，您只需应用更新，那么您不应该遇到速度问题。

如果您的远程存储库恰好是 on `github`，那么他们有一个远程 HTTP [API](http://developer.github.com/v3/git/commits/)用于与可能使您描述的存储库交互的存储库。

# jquery - 潜在的 jQuery XSS

> ID：10589554
> 
> 赞同：0
> 
> 时间：2012-05-14T19:07:42.330
> 
> 标签：jquery, xss

我维护一个 PHP 应用程序。一位用户最近报告了以下代码易受 XSS 攻击。

```
from_name = jQuery("#from_name").val();
from_email = jQuery("#from_email").val();
subject = jQuery("#subject").val();
msg = "From: " + from_name + " (" + from_email + ")<br />";
msg = msg + "Subject: " + subject;
jQuery("#review").html(msg); 
```

他的建议如下。

```
from_name = jQuery("#from_name").val();
from_email = jQuery("#from_email").val();
subject = jQuery("#subject").val();
msg = "From: " + from_name.replace(/</g,"&lt;").replace(/>/g,"&gt;") + " (" + from_email.replace(/</g,"&lt;").replace(/>/g,"&gt;") + ")<br />";
msg = msg + "Subject: " + subject.replace(/</g,"&lt;").replace(/>/g,"&gt;");
jQuery("#review").html(msg); 
```

如果不明显，这将大大简化。无论如何，他的解决方案只是清理`.replace(/</g,"&lt;").replace(/>/g,"&gt;")`我没有立即遇到问题但似乎 A) 不必要或 B) 不完整的潜在元素。

我考虑过使用`.text`而不是，`.html`但后来我无法适当地格式化我的文本。除非我忽略了一些愚蠢的事情。

我可以看到它是如何容易受到攻击的，因为原始元素是输入元素，但是这些输入元素是从数据库中填充的。数据库最初是使用 $_POST 填充的，这很容易受到攻击，但我在将数据提交到数据库之前验证了数据，包括剥离所有 HTML 标记。

在我看来，如果元素被用户（似乎很愚蠢）或 JavaScript 更改，那么 XSS 的唯一机会就是页面上功能将去除恶意更改。

这是一个冗长的问题，我希望我的逻辑是合理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:51:34.990

虽然您可能是正确的，但如果您正在清理数据库的输入，您可能不会受到攻击。对于已发布到数据库的任何内容，最好在退出时进行清理。处理它的更好方法是使用 $.text ，如下所示。

```
from_name = jQuery("#from_name").val();
from_email = jQuery("#from_email").val();
subject = jQuery("#subject").val();
var subjectDiv = jQuery('<div>').attr('id','subjectDiv').text('Subject:'+subject);
var fromDiv = jQuery('<div>').attr('id','fromDiv').text('From: '+from_name+ ' (' +from_email +')');
jQuery("#review").empty();
jQuery('#review').append(fromDiv);
jQuery('#review').append(subjectDiv); 
```

the error I get is Uncaught TypeError: Object # has no method 'connect' I know I used a different than socket.io.js becase I don't know where to get the /socket.io/socket.io.js. I tried doing node_modules/socket.io/lib/socket.io.js which is another one I found i my node_modules folder, but that isn't it. I also started my server and I got socket.io started so I know that works. The error you got is because the source of socket.io script (into index.html) is wrong. So change this: in this: And yes, socket.io is a folder into the root server directory and my server-side socket is listening on port 3000. javascriptnode.jssocket.io 4 1 回答 1 This answer is useful 4 你得到的错误是因为 socket.io 脚本的来源（进入 index.html）是错误的。所以改变这个： 在这： 是的，socket.io 是根服务器目录中的一个文件夹，我的服务器端套接字正在侦听端口 3000。 于 2012-05-14T19:16:05.483 回答 Related 2 javascript - JavaScript 中的格式字符长度/限制 3 binary - 2 的补码中的 -128 和 128 1 javascript - 如何将 todataurl.js 创建的图像传递给 MySQL？ 2 c# - 在 PasswordBox 中显示密码的好方法 2 javascript - $.when.done 回调不起作用 1 c# - 组合框发送方 SelectionChanged 事件 C# 1 python - 获取当前操作系统上安装的保险丝版本 2 elasticsearch - 如何快速重新索引 ElasticSearch？ 2 object - 这个对象符号格式是什么？ 1 javascript - webkitGetAsEntry的Javascript拖放文件上传问题 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - 未捕获的类型错误：对象# has no method 'connect' So I did npm install express and npm install socket.io and I brought the node_modules folders to my server folder where I am using WAM 问问题 问问题 2012-05-14T19:07:46.837 7534 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. So I did npm install express and npm install socket.io and I brought the node_modules folders to my server folder where I am using WAMP. Using this as server.js: var app = require('express').createServer(); var io = require('socket.io').listen(app); io.sockets.on('connection', function (socket) { console.log('Someone connected!'); socket.on('set nickname' , function (nickname) { socket.nickname = nickname; console.log(nickname + ' just connected!'); }); }); app.listen(8080); and using this as client.html  <title>Untitled 4</title>   the error I get is Uncaught TypeError: Object # has no method 'connect' I know I used a different than socket.io.js becase I don't know where to get the /socket.io/socket.io.js. I tried doing node_modules/socket.io/lib/socket.io.js which is another one I found i my node_modules folder, but that isn't it. I also started my server and I got socket.io started so I know that works. The error you got is because the source of socket.io script (into index.html) is wrong. So change this:  in this:  And yes, socket.io is a folder into the root server directory and my server-side socket is listening on port 3000. javascriptnode.jssocket.io 4 1 回答 1 This answer is useful 4 你得到的错误是因为 socket.io 脚本的来源（进入 index.html）是错误的。所以改变这个：  在这：  是的，socket.io 是根服务器目录中的一个文件夹，我的服务器端套接字正在侦听端口 3000。 于 2012-05-14T19:16:05.483 回答 Related 2 javascript - JavaScript 中的格式字符长度/限制 3 binary - 2 的补码中的 -128 和 128 1 javascript - 如何将 todataurl.js 创建的图像传递给 MySQL？ 2 c# - 在 PasswordBox 中显示密码的好方法 2 javascript - $.when.done 回调不起作用 1 c# - 组合框发送方 SelectionChanged 事件 C# 1 python - 获取当前操作系统上安装的保险丝版本 2 elasticsearch - 如何快速重新索引 ElasticSearch？ 2 object - 这个对象符号格式是什么？ 1 javascript - webkitGetAsEntry的Javascript拖放文件上传问题 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10589556
> 
> 赞同：3
> 
> 时间：
> 
> 标签：javascript, node.js, socket.io

So I did `npm install express` and `npm install socket.io` and I brought the `node_modules` folders to my `server` folder where I am using `WAMP`.

Using this as `server.js`:

```
var app = require('express').createServer();
var io = require('socket.io').listen(app);

io.sockets.on('connection', function (socket) {
console.log('Someone connected!');
socket.on('set nickname' , function (nickname) {
socket.nickname = nickname;
console.log(nickname + ' just connected!');
});

});

app.listen(8080); 
```

and using this as `client.html`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>Untitled 4</title>
<script src="http://cdn.socket.io/stable/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8080');
  socket.on('connect', function () {
    console.log('We are connected!');
var name = prompt('What is your name?');
this.emit('set namename', name, function (success) {
console.log('The server got the message!');

if (!success) {
console.log('Nickname is in use!');
}
});
});
</script>
</head>
<body>

</body>
</html> 
```

the error I get is `Uncaught TypeError: Object #<Object> has no method 'connect'`

I know I used a different than `socket.io.js` becase I don't know where to get the `/socket.io/socket.io.js`. I tried doing `node_modules/socket.io/lib/socket.io.js` which is another one I found i my `node_modules` folder, but that isn't it.

I also started my `server` and I got `socket.io started` so I know that works.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:16:05.483

你得到的错误是因为 socket.io 脚本的来源（进入 index.html）是错误的。所以改变这个：

```
<script src="http://cdn.socket.io/stable/socket.io.js"></script> 
```

在这：

```
<script src="http://localhost:3000/socket.io/socket.io.js"> </script> 
```

是的，socket.io 是根服务器目录中的一个文件夹，我的服务器端套接字正在侦听端口 3000。

# c++ - 在windows for linux下编译C++代码，准备运行

> ID：10589558
> 
> 赞同：2
> 
> 时间：2012-05-14T19:07:54.793
> 
> 标签：c++, windows, linux, cygwin

我是关于 linux 编译代码的新手。它可能是 Debian 5.0。我需要为它编译我的 cpp 代码以使其准备好运行，我的意思是其他人只需单击它就可以像在 Windows 中一样轻松运行程序。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:13:57.507

我为此使用virtualbox。这既简单又方便。只要您拥有适当的许可证，您就可以运行多个 Linux 发行版和多个版本的 Windows。您还可以在每个虚拟机上运行 subversion 等，以便在构建时同步所有虚拟机的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:14:21.153

编译后，您可以轻松地在桌面上创建快捷方式 - 或在菜单上添加条目 - 以通过脚本启动程序；就像是：

```
#!/bin/bash
/path/to/your/progam 
```

将其另存为`launch.sh`-例如-并为其赋予 ugo+x 权限

```
chmod ugo+x launch.sh 
```

创建快捷方式时，您可以将图标与您的脚本关联起来，就像在 Windows 中一样。

**更新**

如果您将编译后的程序发送给您的朋友（假设通过电子邮件）。您可以简单地指示您的朋友在他下载文件的同一目录中启动终端窗口并运行以下命令：

```
chmod ugo+x your_program
./your_program 
```

或者您可以向他发送 2 个文件：一个带有您的程序，另一个带有我上面描述的“启动”脚本。由于这两个文件都将下载到同一个目录，因此您可以将启动脚本更改为：

```
#!/bin/bash
./your_program 
```

当他单击 时`launch.sh`，您的程序将被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:24:48.197

假设您希望能够在 Windows 上编译某些东西并让它在*任何*Linux 机器上运行，那根本不可能。Debian 和 Ubuntu 都支持许多架构，其中许多完全没有二进制兼容性。如果您知道您的朋友拥有什么类型的硬件，您可以构建一个针对该架构的二进制文件。

如果您想要一个快速而肮脏的答案，您可以为 i386 构建，因为 64 位机器*可能*仍然可以正常运行（虽然不能保证）。

# c++ - 计算两个数字之间差异的最短方法？

> ID：10589559
> 
> 赞同：27
> 
> 时间：2012-05-14T19:07:59.707
> 
> 标签：c++, math

我将要在 C++ 中执行此操作，但我必须使用多种语言执行此操作，这是一个相当常见且简单的问题，这是最后一次。我已经写够了，我确信一定有更好的方法，所以我先在这里发帖，然后再用另一种语言写出同样冗长的方法；

考虑下面的（~~百合花！~~）代码；

```
// I want the difference between these two values as a positive integer
int x = 7
int y = 3
int diff;
// This means you have to find the largest number first 
// before making the subtract, to keep the answer positive
if (x>y) { 
     diff = (x-y);
} else if (y>x) {
     diff = (y-x);
} else if (x==y) {
    diff = 0;
} 
```

这可能听起来很琐碎，但对我来说似乎很多，只是为了得到两个数字之间的差异。这实际上是一种完全合理的做事方式，而我是不必要的迂腐，还是我的蜘蛛侠感觉有充分的理由刺痛？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-14T19:10:50.580

只需得到差的绝对值：

```
#include <cstdlib>
int diff = std::abs(x-y); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-14T19:17:12.047

正如其他人所建议的那样，使用该`std::abs()`功能是一种明确的方法。

但也许您有兴趣在没有库调用的情况下简洁地编写这个函数。

在这种情况下

```
diff = x > y ? x - y : y - x; 
```

是一条捷径。

在您的评论中，您建议您对速度感兴趣。在这种情况下，您可能对不需要[分支](https://en.wikipedia.org/wiki/Branch_(computer_science))的执行此操作的方式感兴趣。[这个链接](https://graphics.stanford.edu/~seander/bithacks.html#IntegerAbs)描述了一些。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-14T19:09:41.990

```
#include <cstdlib>

int main()
{
    int x = 7;
    int y = 3;
    int diff = std::abs(x-y);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-07T12:14:15.773

好吧，这取决于您所说的最短是什么意思。fastet 运行时，编译速度最快，行数最少，内存最少。我假设你的意思是运行时。

```
#include <algorithm>    // std::max/min   
int diff = std::max(x,y)-std::min(x,y); 
```

这会进行两次比较和一次操作（这是不可避免的，但可以通过特定情况下的某些按位操作进行优化，尽管编译器实际上可能会为您执行此操作）。此外，如果编译器足够聪明，它可以只进行一次比较并将结果保存用于另一次比较。例如，如果 X>Y 那么你从第一次比较中知道 Y < X 但我不确定编译器是否利用了这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-10T11:31:17.203

所有现有的答案都会在极端输入时溢出，给出[未定义的行为](https://blog.regehr.org/archives/213)。@craq 在评论中指出了这一点。

如果您知道您的值将落在一个狭窄的范围内，则可以按照其他答案的建议进行操作，但要处理极端输入（即稳健地处理*任何*可能的输入值），您不能简单地减去这些值然后应用`std::abs`功能。正如 craq 正确指出的那样，减法可能会溢出，导致未定义的行为（考虑`INT_MIN - 1`），并且`std::abs`调用也可能导致未定义的行为（考虑`std::abs(INT_MIN)`）。确定这对的最小值和最大值然后执行减法并没有更好的办法。

更一般地说，a无法表示两个值`signed int`之间的最大差异。类型应该用于输出值`signed int`。`unsigned int`

我看到了 3 个解决方案。我从`stdint.h`这里使用了显式大小的整数类型，以关闭不确定性的大门，例如大小和范围是否`long`相同`int`。

**解决方案1.**低级方式。

```
// I'm unsure if it matters whether our target platform uses 2's complement,
// due to the way signed-to-unsigned conversions are defined in C and C++:
// >  the value is converted by repeatedly adding or subtracting
// >  one more than the maximum value that can be represented
// >  in the new type until the value is in the range of the new type
uint32_t difference_int32(int32_t i, int32_t j) {
    static_assert(
        (-(int64_t)INT32_MIN) == (int64_t)INT32_MAX + 1,
        "Unexpected numerical limits. This code assumes two's complement."
    );

    // Map the signed values across to the number-line of uint32_t.
    // Preserves the greater-than relation, such that an input of INT32_MIN
    // is mapped to 0, and an input of 0 is mapped to near the middle
    // of the uint32_t number-line.
    // Leverages the wrap-around behaviour of unsigned integer types.

    // It would be more intuitive to set the offset to (uint32_t)(-1 * INT32_MIN)
    // but that multiplication overflows the signed integer type,
    // causing undefined behaviour. We get the right effect subtracting from zero.
    const uint32_t offset = (uint32_t)0 - (uint32_t)(INT32_MIN);
    const uint32_t i_u = (uint32_t)i + offset;
    const uint32_t j_u = (uint32_t)j + offset;

    const uint32_t ret = (i_u > j_u) ? (i_u - j_u) : (j_u - i_u);
    return ret;
} 
```

我尝试了使用从[https://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax](https://graphics.stanford.edu/%7Eseander/bithacks.html#IntegerMinOrMax)获取的比特旋转聪明的变体，但现代代码生成器似乎使用这种变体生成*更差的代码。*（我已经删除了`static_assert`和评论。）

```
uint32_t difference_int32(int32_t i, int32_t j) {
    const uint32_t offset = (uint32_t)0 - (uint32_t)(INT32_MIN);
    const uint32_t i_u = (uint32_t)i + offset;
    const uint32_t j_u = (uint32_t)j + offset;

    // Surprisingly it helps code-gen in MSVC 2019 to manually factor-out
    // the common subexpression. (Even with optimisation /O2)
    const uint32_t t = (i_u ^ j_u) & -(i_u < j_u);
    const uint32_t min = j_u ^ t; // min(i_u, j_u)
    const uint32_t max = i_u ^ t; // max(i_u, j_u)
    const uint32_t ret = max - min;
    return ret;
} 
```

**解决方案 2.**简单的方法。通过使用更广泛的有符号整数类型来避免溢出。如果输入有符号整数类型是可用的最大有符号整数类型，则不能使用此方法。

```
uint32_t difference_int32(int32_t i, int32_t j) {
    return (uint32_t)std::abs((int64_t)i - (int64_t)j);
} 
```

**解决方案 3.**费力的方式。使用流控制来处理不同的情况。可能效率较低。

```
uint32_t difference_int32(int32_t i, int32_t j)
{   // This static assert should pass even on 1's complement.
    // It's just about impossible that int32_t could ever be capable of representing
    // *more* values than can uint32_t.
    // Recall that in 2's complement it's the same number, but in 1's complement,
    // uint32_t can represent one more value than can int32_t.
    static_assert( // Must use int64_t to subtract negative number from INT32_MAX
        ((int64_t)INT32_MAX - (int64_t)INT32_MIN) <= (int64_t)UINT32_MAX,
        "Unexpected numerical limits. Unable to represent greatest possible difference."
    );

    uint32_t ret;
    if (i == j) {
        ret = 0;
    } else {

        if (j > i) { // Swap them so that i > j
            const int32_t i_orig = i;
            i = j;
            j = i_orig;
        } // We may now safely assume i > j

        uint32_t magnitude_of_greater; // The magnitude, i.e. abs()
        bool     greater_is_negative; // Zero is of course non-negative
        uint32_t magnitude_of_lesser;
        bool     lesser_is_negative;

        if (i >= 0) {
            magnitude_of_greater = i;
            greater_is_negative = false;
        } else { // Here we know 'lesser' is also negative, but we'll keep it simple
            // magnitude_of_greater = -i; // DANGEROUS, overflows if i == INT32_MIN.
            magnitude_of_greater = (uint32_t)0 - (uint32_t)i;
            greater_is_negative = true;
        }

        if (j >= 0) {
            magnitude_of_lesser = j;
            lesser_is_negative = false;
        } else {
            // magnitude_of_lesser = -j; // DANGEROUS, overflows if i == INT32_MIN.
            magnitude_of_lesser = (uint32_t)0 - (uint32_t)j;
            lesser_is_negative = true;
        }

        // Finally compute the difference between lesser and greater
        if (!greater_is_negative && !lesser_is_negative) {
            ret = magnitude_of_greater - magnitude_of_lesser;
        } else if (greater_is_negative && lesser_is_negative) {
            ret = magnitude_of_lesser - magnitude_of_greater;
        } else { // One negative, one non-negative. Difference is sum of the magnitudes.
            // This will never overflow.
            ret = magnitude_of_lesser + magnitude_of_greater;
        }
    }
    return ret;
} 
```

# c# - （正在尝试）从 WSE 3.0 迁移到 WCF 以获取客户端代码

> ID：10589561
> 
> 赞同：10
> 
> 时间：2012-05-14T19:08:10.123
> 
> 标签：c#, wcf, web-services, wse

为此，我一直在网上。我一直在做这件事，而我尝试使用其 Web 服务的供应商拒绝正式支持 WCF 作为一种使用方法。

我不是网络服务专家，所以我会尽我最大的努力来记录和解释这篇最初的帖子，但无论如何，如果你需要，请索取更多信息，希望我能够提供任何必要的信息。

**服务**

在我的公司，我们使用公开服务的供应商应用程序。该应用程序是用 java 编写的，看起来 wsdl 是使用 Apache Axis 1.2 创建的。

**编码**

我的旧代码使用 WSE 3.0。特别是，它使用在末尾自动添加“WSE”的代理类。这允许我使用更简单的身份验证方案（我可以让它工作的唯一方法）。我不需要使用证书。我使用 的派生词`SecurityPolicyAssertion`，并将其包装在`Policy`传递给`SetPolicy`客户端类方法的对象中。这是创建客户端的工作实例所需的全部内容：

```
MyWebServiceWse api = new MyWebServiceWse();
api.Url = myUrl;
api.SetPolicy(new Policy(new MyDerivedSecurityAssertion(user, pass))); 
```

我的默认 WCF 开箱即用代码（使用服务引用生成）不接受凭据，所以我知道马上就有问题。我在网上阅读了各种关于`security`在我`app.config`的 . 经过大量修补后，我最常见的错误是`WSDoAllReceiver: Request does not contain required Security header`.

这是app.config。也许我们可以先告诉我这里应该改变什么以方便通过凭证——我再次在网上看到了不同的意见。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="MySoapBinding" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://xyz:12345/services/MyService"
                binding="basicHttpBinding" bindingConfiguration="MySoapBinding"
                contract="MyNS.MyService" name="MyService" />
        </client>
    </system.serviceModel>
</configuration> 
```

我已经更改了一些属性以掩盖我们正在使用的特定服务（公司政策等等）。

这是迄今为止的示例 C# 代码（在控制台应用程序中测试）：

```
MyClient client = new MyClient();
client.listMethod(); 
```

**更新**

阅读这篇 SO 帖子：[wcf security 。. .](https://stackoverflow.com/questions/806007/connect-with-wcf-to-a-webservice-authenticated-with-username-password) .

我已经相应地更新了我的 app.config，现在正在代码中传递用户名和密码。我仍然收到同样的错误：

```
WSDoAllReceiver: Request does not contain required Security header 
```

**20120517 更新**

成功的请求（来自 WSE3）：

```
 <soap:Header>
    <wsa:Action>
    </wsa:Action>
    <wsa:MessageID>urn:uuid:cb739422-c077-4eec-8cb2-686837b76878</wsa:MessageID>
    <wsa:ReplyTo>
      <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
    </wsa:ReplyTo>
    <wsa:To>http://removed-for-security</wsa:To>
    <wsse:Security soap:mustUnderstand="1">
      <wsu:Timestamp wsu:Id="Timestamp-e13feaf9-33d9-47bf-ab5b-60b4611eb81a">
        <wsu:Created>2012-05-17T11:25:41Z</wsu:Created>
        <wsu:Expires>2012-05-17T11:30:41Z</wsu:Expires>
      </wsu:Timestamp>
      <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-00c26e1a-3b3b-400f-a99a-3aa54cf8c8ff">
        <wsse:Username>change-to-protect-the-innocent</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">nice-try</wsse:Password>
        <wsse:Nonce>KJMvUuWF2eO2uIJCuxJC4A==</wsse:Nonce>
        <wsu:Created>2012-05-17T11:25:41Z</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
  </soap:Header>
  <soap:Body>
    <listChannels xmlns="http://removed-for-security">
      <rowfrom>0</rowfrom>
      <rowto>10</rowto>
    </listChannels>
  </soap:Body>
</soap:Envelope> 
```

致力于获取 WCF 跟踪——将很快添加。

**20120517 更新 2**

这是来自 WCF 的信封：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Header>
      <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none"></Action>
    </s:Header>
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <listChannels xmlns="http://removed-for-security">
        <rowfrom>1</rowfrom>
        <rowto>2147483647</rowto>
      </listChannels>
    </s:Body>
  </s:Envelope> 
```

**20120518 更新** 我已经尝试在 Mike Miller 在评论中链接到的帖子中实施解决方案。现在我收到以下错误（最终没有发送任何消息，因为该计划有问题）：

```
The provided URI scheme 'http' is invalid; expected 'https'. 
```

如果有人想问，是的，我需要通过 http 发送，是的，我知道凭据是作为未加密的字符串发送的 :-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T00:58:50.067

您需要的是通过 wcf ootb 不支持的 http 传输发送用户名令牌。此外，您的令牌使用 nonce/created，这也不是 ootb。你有两个选择：

1.  这个[oss 项目](http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx)将 nonce/created 添加到用户名令牌。这个[oss 项目](http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html)增加了通过 http 发送用户名的能力。您需要将两个项目结合在一起。

2.  ws-security 通常被认为是复杂的，但您可以以最简单的形式（用户名）使用它。最简单的方法是将所有 wcf 安全设置全部取消，并在[消息检查](http://msdn.microsoft.com/en-us/library/aa717047.aspx)器中自己创建整个安全标头！如您所见，大多数标头只是静态 xml 节点，并且大多数值都非常清晰（您知道用户名）。[唯一棘手的两个是随机数和时间戳，您可以在这个oss 项目](http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx)中查看如何操作（每行一行）。这个选项有一个变体，它可能更容易——毕竟使用[CUB并实现一个](http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html)[自定义编码器](http://msdn.microsoft.com/en-us/library/ms751486.aspx)，它可以推送 timestmpa/nonce。我会选择后者，但因为我开发了 CUB，所以我有偏见......

您还可以在自定义编码“messageVersion”属性上配置 ws-addressing 标头。我无法说出确切的值，因为您省略了带有 wsa 前缀定义的信封头。

如果您需要私下帮助（因为您似乎有安全限制），请务必从[我的博客](http://webservices20.blogspot.com/)给我发送电子邮件。

编辑：我已经为你实现了它。按着这些次序：

1.  下载[cub](http://Convert.ToBase64String)并熟悉它（不是内部，只是根据博客文章如何使用它）

2.  将对 System.Runtime.Serialization.dll 的引用添加到项目 ClearUsernameBinding

3.  向该项目添加一个新文件：UsernameExEncoder.cs。粘贴此内容：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.ServiceModel.Channels;
    using System.IO;
    using System.Xml;
    using System.Security.Cryptography;

    namespace Webservices20.BindingExtensions
       {
        class UsernameExEncoderBindingElement : MessageEncodingBindingElement
        {
        MessageEncodingBindingElement inner;        

        public UsernameExEncoderBindingElement(MessageEncodingBindingElement inner)
        {
            this.inner = inner;            
        }

        public override IChannelFactory<TChannel> BuildChannelFactory<TChannel>(BindingContext context)
        {
            context.BindingParameters.Add(this);
            var res = base.BuildChannelFactory<TChannel>(context);
            return res;
        }

        public override bool CanBuildChannelFactory<TChannel>(BindingContext context)
        {
            var res = base.CanBuildChannelFactory<TChannel>(context);
            return res;
        }

        public override MessageEncoderFactory CreateMessageEncoderFactory()
        {
            return new UsernameExEncoderFactory(this.inner.CreateMessageEncoderFactory());
        }      

        public override MessageVersion MessageVersion
        {
            get
            {
                return this.inner.MessageVersion;
            }
            set
            {
                this.inner.MessageVersion = value;
            }
        }

        public override BindingElement Clone()
        {
            var c = (MessageEncodingBindingElement)this.inner.Clone();
            var res = new UsernameExEncoderBindingElement(c);
            return res;
        }

        public override T GetProperty<T>(BindingContext context)
        {
            var res = this.inner.GetProperty<T>(context);
            return res;
        }
    }

    class UsernameExEncoderFactory : MessageEncoderFactory
    {
        MessageEncoderFactory inner;        

        public UsernameExEncoderFactory(MessageEncoderFactory inner)
        {
            this.inner = inner;            
        }

        public override MessageEncoder Encoder
        {
            get { return new UsernameExEncoder(inner.Encoder); }
        }

        public override MessageVersion MessageVersion
        {
            get { return this.inner.MessageVersion; }
        }

    }

    class UsernameExEncoder : MessageEncoder
    {
        MessageEncoder inner;

        public override T GetProperty<T>()
        {
            return inner.GetProperty<T>();
        }

        public UsernameExEncoder(MessageEncoder inner)
        {
            this.inner = inner;
        }

        public override string ContentType
        {
            get { return this.inner.ContentType; }
        }

        public override string MediaType
        {
            get { return this.inner.MediaType; }
        }

        public override MessageVersion MessageVersion
        {
            get { return this.inner.MessageVersion; }
        }

        public override bool IsContentTypeSupported(string contentType)
        {
            return this.inner.IsContentTypeSupported(contentType);
        } 

        public override Message ReadMessage(ArraySegment<byte> buffer, BufferManager bufferManager, string contentType)
        {
            return this.inner.ReadMessage(buffer, bufferManager, contentType);
        }

        public override Message ReadMessage(System.IO.Stream stream, int maxSizeOfHeaders, string contentType)
        {
            return this.inner.ReadMessage(stream, maxSizeOfHeaders, contentType);
        }

        public override ArraySegment<byte> WriteMessage(Message message, int maxMessageSize, BufferManager bufferManager, int messageOffset)
        {   
            //load the message to dom
            var mem = new MemoryStream();
            var x = XmlWriter.Create(mem);
            message.WriteMessage(x);
            x.Flush();
            mem.Flush();
            mem.Position = 0;
            XmlDocument doc = new XmlDocument();
            doc.Load(mem);

            //add the missing elements
            var token = doc.SelectSingleNode("//*[local-name(.)='UsernameToken']");
            var created = doc.CreateElement("Created", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
            var nonce = doc.CreateElement("Nonce", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
            token.AppendChild(created);
            token.AppendChild(nonce);

            //set nonce value
            byte[] nonce_bytes = new byte[16];
            RandomNumberGenerator rndGenerator = new RNGCryptoServiceProvider();
            rndGenerator.GetBytes(nonce_bytes);
            nonce.InnerText = Convert.ToBase64String(nonce_bytes);

            //set create value
            created.InnerText = XmlConvert.ToString(DateTime.Now.ToUniversalTime(), "yyyy-MM-ddTHH:mm:ssZ");

            //create a new message
            var r = XmlReader.Create(new StringReader(doc.OuterXml));
            var newMsg = Message.CreateMessage(message.Version, message.Headers.Action, r);

            return this.inner.WriteMessage(newMsg, maxMessageSize, bufferManager, messageOffset);
        }

        public override void WriteMessage(Message message, System.IO.Stream stream)
        {
            this.inner.WriteMessage(message, stream);
        }
    }
    } 
    ```

4.  在文件 ClearUsernameBinding.cs 中替换：

    `res.Add(new TextMessageEncodingBindingElement() { MessageVersion = this.messageVersion});`

    有了这个：

    `var textEncoder = new TextMessageEncodingBindingElement() { MessageVersion = this.messageVersion }; res.Add(new UsernameExEncoderBindingElement(textEncoder));`

5.  在 app.config 的项目 TestClient 中，绑定元素上有一个 messageVersion 属性。您尚未发布信封的根目录，因此我无法确定，但可能您需要将其设置为 Soap11WSAddressingAugust2004 或 Soap11WSAddressing10 （或其中之一使用 Soap12 代替）。

祝你好运！

# java - 哪些是实施 DFA 的最佳方式？

> ID：10589562
> 
> 赞同：2
> 
> 时间：2012-05-14T19:08:16.083
> 
> 标签：java, finite-automata, dfa, automata

我知道可以使用 if-else 方法和图形方法来实现 DFA，但是还有其他实现它们的方法吗？实际上，我正在为正则表达式创建一个 JavaCode 生成器，到目前为止，我已经完成了两种可能的方法（if-else 和图形方法），但我想提供更多可能的方法。我认为也许它可以使用一些数据结构作为转换的 Set 或 Map 来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:14:14.707

您还可以使用 JavaCC 或 Antlr 之类的解析器库来实现 DFA。这些库有助于解析语言语法和构建 AST。

如果您可以将 DFA 状态建模为一组可接受的语法，则可以使用这些库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:18:48.750

实现一个节点对象。这就是你的想法。“国家”可能是一个更好的名字。实现一个输入对象。这将输入抽象化（我不知道您是在为班级实现某些东西还是为超工业实力实现某些东西。）

该节点可以具有`Node transitionTo(Input input)`、`boolean isAcceptState()`和`boolean isErrorState()`方法。

您将通过创建 Inputs 的数据结构和生成的 Node 输出来初始化节点。如果不了解更多信息，真的很难说这将如何工作。

然后驱动程序代码类似于

```
while(!currentNode.isAcceptState() && !currentNode.isErrorState()) {
    currentNode  = currentNode.transitionTo(inputGetter.getInput());
    } 
```

在不知道您要完成的工作的情况下，很难更详细。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:04:54.090

这是使用枚举实现 Automata 的另一种方法。看起来很酷。

## [http://java.dzone.com/articles/automaton-implementation-java](http://java.dzone.com/articles/automaton-implementation-java)

所以我得出的结论是，有 4 种实现 FSA 的方法：枚举、if-else、switch case、graph、hashMap

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:21:23.103

我记得在学校里有四种方式，一种是使用开关（很像 if），另一种是使用类似地图的结构，键作为输入，值作为状态。

# javascript - 将 Twitter Widget 的 Javascript 放入标签中，但将其呈现在

> ID：10589564
> 
> 赞同：1
> 
> 时间：2012-05-14T19:08:17.557
> 
> 标签：javascript, html, widget, twitter

我正在使用 Twitter 搜索小部件，目前我将 javascript 嵌入到 HTML 的正文标签中，如下所示：

```
<body>
 <script charset="utf-8" src="https://widgets.twimg.com/j/2/widget.js"></script>
 <script>
        new TWTR.Widget({
                  version: 2,
                  type: 'faves',
                  rpp: 1,
                  interval: 7200000,
                  title: '',
                  subject: '',
                  width: 500,
                  height: 65,
                  theme: {
                    shell: {
                      background: '#a4c9b9',
                      color: '#ffffff'
                    },
                    tweets: {
                      background: '#a4c9b9',
                      color: '#ffffff',
                      links: '#444444'
                    }
                  },
                  features: {
                    scrollbar: true,
                    loop: false,
                    live: false,
                    behavior: 'all'
                  }
                }).render().setUser('exampleuser').start();
     </script>
 </body> 
```

相反，我宁愿将所有 javascript 移动到页眉（或者可能是页脚？）标记，然后简单地将它呈现在没有标记的正文中。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:18:14.447

您可以使用任一本机 JS ...

```
window.onload = function() {
    // your code here
}; 
```

或 jQuery...

```
$(document).ready(function() {
    // your code here
}); 
```

...以确保在文档完成加载之前代码不会运行。

[这解释了 window.onload 和 $(document).ready() 之间的细微差别。](http://makeagreatsite.com/javascript/how-execute-javascript-when-document-ready)

另一种选择是将您的代码包装在一个命名函数中并在某处的主体中调用它，但您仍然必须将它放在 <script> 标记中。

编辑：使用 window.onload ...

```
<html>
<head>
<script>
window.onload = function() {
    new TWTR.Widget({
              version: 2,
              type: 'faves',
              rpp: 1,
              interval: 7200000,
              title: '',
              subject: '',
              width: 500,
              height: 65,
              theme: {
                shell: {
                  background: '#a4c9b9',
                  color: '#ffffff'
                },
                tweets: {
                  background: '#a4c9b9',
                  color: '#ffffff',
                  links: '#444444'
                }
              },
              features: {
                scrollbar: true,
                loop: false,
                live: false,
                behavior: 'all'
              }
            }).render().setUser('exampleuser').start();
};
</script>
</head>
<body></body></html> 
```

# c# - 在这种用于防止 NullReferenceException 的常见模式中是否存在竞争条件？

> ID：10589565
> 
> 赞同：26
> 
> 时间：2012-05-14T19:08:19.770
> 
> 标签：c#, .net, multithreading, thread-safety, il

我问了**[这个](https://stackoverflow.com/q/10565838/651789)**问题，得到了**[这个](https://stackoverflow.com/a/10567171/651789)**有趣（也有点令人不安）的答案。

丹尼尔在他的回答中说（除非我读错了）**ECMA-335 CLI**规范可以允许编译器生成`NullReferenceException`从以下`DoCallback`方法抛出 a 的代码。

```
class MyClass {
    private Action _Callback;
    public Action Callback { 
        get { return _Callback; }
        set { _Callback = value; }
    }
    public void DoCallback() {
        Action local;
        local = Callback;
        if (local == null)
            local = new Action(() => { });
        local();
    }
} 
```

他说，为了保证 a`NullReferenceException`不被抛出，`volatile`关键字应该用 on`_Callback`或者 a`lock`应该用在 line 周围`local = Callback;`。

任何人都可以证实这一点吗？**而且，如果这是真的， Mono**和**.NET**编译器在此问题上的行为是否存在差异？

**编辑**
这里是**[标准](http://www.ecma-international.org/publications/standards/Ecma-335.htm)**的链接。

**更新**
我认为这是规范（12.6.4）的相关部分：

> 符合 CLI 的实现可以使用任何技术自由执行程序，这些技术保证在单个执行线程内，线程生成的副作用和异常按照 CIL 指定的顺序可见。为此，只有易失性操作（包括易失性读取）构成可见的副作用。（请注意，虽然只有易失性操作构成可见的副作用，但易失性操作也会影响非易失性引用的可见性。）易失性操作在第 12.6.7 节中指定。对于由另一个线程注入到一个线程的异常没有顺序保证（这种异常有时称为“异步异常”（例如，System.Threading.ThreadAbortException）。
> 
> [基本原理：优化编译器可以自由地重新排序副作用和同步异常，只要这种重新排序不会改变任何可观察的程序行为。结束理由]
> 
> [注意：允许 CLI 的实现使用优化编译器，例如，将 CIL 转换为本机机器代码，前提是编译器（在每个单个执行线程内）保持相同顺序的副作用和同步异常。

所以......我很好奇这个语句是否允许编译器优化`Callback`属性（它访问一个简单的字段）和`local`变量以产生以下内容，它**在单个执行线程中**具有相同的行为：

```
if (_Callback != null) _Callback();
else new Action(() => { })(); 
```

关键字的 12.6.7 部分`volatile`似乎为希望避免优化的程序员提供了一个解决方案：

> 易失性读取具有“获取语义”，这意味着读取保证发生在 CIL 指令序列中读取指令之后发生的任何对内存的引用之前。易失性写入具有“释放语义”，这意味着写入保证发生在 CIL 指令序列中写入指令之前的任何内存引用之后。CLI 的一致实现应保证 volatile 操作的这种语义。这确保了所有线程都将按照执行顺序观察任何其他线程执行的易失性写入。但是，从所有执行线程来看，一致的实现不需要提供易失性写入的单一总排序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T21:16:50.210

在*CLR via C#* (pp. 264–265) 中，Jeffrey Richter 讨论了这个特定问题，并承认局部变量可以*被*换出：

> [T] 编译器可以优化他的代码以完全删除本地 [...] 变量。如果发生这种情况，这个版本的代码与[直接引用事件/回调两次的版本]是相同的，所以a`NullReferenceException`仍然是可能的。

Richter 建议使用[`Interlocked.CompareExchange<T>`](http://msdn.microsoft.com/en-us/library/bb297966)来明确解决此问题：

```
public void DoCallback() 
{
    Action local = Interlocked.CompareExchange(ref _Callback, null, null);
    if (local != null)
        local();
} 
```

然而，Richter 承认微软的即时 (JIT) 编译器并*没有*优化掉局部变量。而且，尽管这在理论上可能会改变，但几乎可以肯定它永远不会改变，因为它会导致太多的应用程序因此而崩溃。

这个问题已经在“<a href="https://stackoverflow.com/questions/7664046/allowed-c-sharp-compiler-optimization-on-local-variables-and-refetching-value -fr">允许 C# 编译器对局部变量进行优化并从内存中重新获取值”。请务必阅读[xanatox](https://stackoverflow.com/a/7687160/1149773)的答案和“<a href="http://msdn.microsoft.com/en-us/magazine/cc163715.aspx#S6" rel="nofollow noreferrer">了解低的影响- 它引用的多线程应用程序中的锁定技术”文章。由于您专门询问了 Mono，您应该注意引用的“<a href="http://www.mail-archive.com/mono-devel-list@lists.ximian.com/msg17446.html" rel=" nofollow noreferrer">[Mono-dev] 内存模型？” 邮件列表消息：

> 现在，我们提供接近 ecma 的松散语义，由您正在运行的架构支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:25:15.013

此代码**不会**引发空引用异常。这是线程安全的：

```
public void DoCallback() {
    Action local;
    local = Callback;
    if (local == null)
        local = new Action(() => { });
    local();
} 
```

这个是线程安全的，并且不能在回调上抛出 NullReferenceException 的原因是它在进行空检查/调用之前复制到局部变量。即使在 null 检查后将原始 Callback 设置为 null，局部变量仍然有效。

然而，下面是一个不同的故事：

```
public void DoCallbackIfElse() {
    if (null != Callback) Callback();
    else new Action(() => { })();
} 
```

在这一个中，它正在查看一个公共变量，Callback 可以更改为 null 之后，`if (null != Callback)`这会引发异常`Callback();`

# actionscript-3 - 动作脚本 3 中的静音按钮

> ID：10589568
> 
> 赞同：0
> 
> 时间：2012-05-14T19:08:27.400
> 
> 标签：actionscript-3, button, mute

所以这是我的问题。我有一个可扩展的横幅。当展开视频开始播放。我的任务是为视频中的声音插入一个开/关按钮，我做到了。但问题是我无法到达我的按钮，因为当我尝试将鼠标移动到按钮时，可扩展区域消失了，因为我正在移动到按钮区域。这里也是代码。

```
import flash.events.Event;
import flash.net.URLRequest;
import flash.events.MouseEvent;
import flash.media.SoundTransform;    
import flash.media.SoundMixer;

cierre.gotoAndStop(1);
SoundMixer.soundTransform = new SoundTransform(0); 
video_player.autoPlay = true;
video_player.source = "video_500x374.f4v";

video_player.addEventListener(Event.COMPLETE, finVideo);

stop();

b2_btn.buttonMode = true;
b2_btn.addEventListener(MouseEvent.MOUSE_OUT, aBanner1);
b2_btn.addEventListener(MouseEvent.CLICK,onClick);

var clicktag=(stage.loaderInfo.parameters.clickTag)?  stage.loaderInfo.parameters.clickTag:"http://www.vasava.es";
function onClick(e:MouseEvent){
navigateToURL(new URLRequest(clicktag),"_blank");
}

function aBanner1(e:Event):void{
video_player.stop();
this.gotoAndStop(1);
}

function finVideo(e:Event):void{
video_player.stop();
cierre.play();
}

function setMute(vol) {
var sTransform:SoundTransform = new SoundTransform (0,1);
sTransform.volume = vol;
SoundMixer.soundTransform = sTransform; 
}
var Mute:Boolean = false;
mutebutton.addEventListener (MouseEvent.CLICK,toggleMuteBtn);

function toggleMuteBtn (event:Event) {
if(Mute) {
    Mute = false;
    setMute(0);

}else{
    Mute = true;
    setMute(1);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:19:39.827

要么将静音按钮*放在*横幅本身的展开部分，要么让展开的横幅自动静音音频，无需再次按下按钮。使用哪个取决于您的特定应用程序和客户要求。

# image - Ember.js 在 Chrome 中绑定了大小闪烁的图像

> ID：10589577
> 
> 赞同：0
> 
> 时间：2012-05-14T19:09:21.813
> 
> 标签：image, binding, ember.js, handlebars.js

我有一个简单的车把模板，其中有一些项目，我将`src`每个项目的图像属性绑定到 logoUrl 属性，例如：

```
{{#each App.stationsController}}
  <img height="50" width="50" {{bindAttr src="logoUrl"}} {{bindAttr alt="name"}}/>
  {{name}}
{{/each}} 
```

我有一些代码更改数组`stationController`。有时（并非总是但经常）我看到图像正方形周围的灰色边框类似于 Chrome 显示损坏图像的灰色边框。删除图像大小会阻止这种效果，但这并不总是一个好的选择。我在 Ubuntu Natty 上使用 Chrome 18.0.1025.168。使用 Chromium，我看不到闪烁。关于可能发生的事情以及如何停止这种影响（不删除图像大小）的任何提示？

**更新**

我创建了示例小提琴 - [http://jsfiddle.net/Va8C2/3/](http://jsfiddle.net/Va8C2/3/)

可以在[http://imgur.com/diPct](http://imgur.com/diPct)看到显示描述边界的屏幕截图，这是来自 mpeg 文件[http://www.sendspace.com/file/my0gv4的第 67 帧](http://www.sendspace.com/file/my0gv4)

*Imgur 在其他浏览器选项卡中的第一个“间接”图像加载打开站图像时返回 403 有助于解决它*

**更新2**

看起来问题的根源已经找到，但禁用 AdBlock 并不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:58:35.133

看来，Adblock 扩展会减慢 Chrome 渲染过程。

# windows - windbg：是否可以在我自己的程序中嵌入 Windgb 引擎？

> ID：10589587
> 
> 赞同：3
> 
> 时间：2012-05-14T19:09:52.000
> 
> 标签：windows, debugging, windbg

我想编写一个调试/诊断工具，它可以调用 Windbg 函数来检查转储文件，而不是编写 windbg 扩展。这可能吗？有任何参考吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:14:23.733

您可以使用在 dbghelp.dll 中实现的调试 API，而不是 WinDbg。它记录在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663265.aspx)上。该参考文档相当枯燥，但它应该让您了解 API 的功能。例如，[`MiniDumpReadDumpStream`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680359.aspx)是检查转储文件的网关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T13:59:19.563

除了现有的答案，WinDBG 是 DbgEng API 的 GUI 前端。您可以使用此 API 编写 WinDBG 扩展或其他独立应用程序。WinDBG SDK 附带了两者的示例，可以在 WinDBG 安装的 \sdk\samples\dumpstk 子目录中找到示例独立应用程序。

更多信息，我写了一篇关于 DbgEng 的文章在这里写扩展：

[http://www.osronline.com/custom.cfm?name=articlePrint.cfm&id=559](http://www.osronline.com/custom.cfm?name=articlePrint.cfm&id=559)

其中大部分内容也适用于您编写独立应用程序的方式，因为它主要关注 DbgEng 接口的编程模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-10T20:07:02.060

以下是一些使用 dbgeng 接口制作独立可执行文件的链接。

该过程的简短摘要是
调用 DebugCreate() 以创建客户端调用 QueryInterFace() 并调用其方法之一

[http://www.woodmann.com/forum/entry.php?252-Dbgeng-based-handles-(PART-2-)](http://www.woodmann.com/forum/entry.php?252-Dbgeng-based-handles-%28PART-2-%29) [http://www.woodmann.com/forum/entry.php?246-A- Simple-Dbgeng-Based-User-Mode-Debugger](http://www.woodmann.com/forum/entry.php?246-A-Simple-Dbgeng-Based-User-Mode-Debugger) [http://www.woodmann.com/forum/entry.php?248-DbgEng-Based-Debugger-(PART2)](http://www.woodmann.com/forum/entry.php?248-DbgEng-Based-Debugger-%28PART2%29) [http://www.woodmann.com/forum/ entry.php?249-DbgEng-Based-Debugger-(PART2-Contd-)](http://www.woodmann.com/forum/entry.php?249-DbgEng-Based-Debugger-%28PART2-Contd-%29) [http://www.woodmann.com/forum/entry.php?250-DbgEng-based-Kernel-Debugger](http://www.woodmann.com/forum/entry.php?250-DbgEng-based-Kernel-Debugger) [http://www.woodmann .com/forum/entry.php?251-Dbgeng-based-Handles](http://www.woodmann.com/forum/entry.php?251-Dbgeng-based-Handles)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T19:29:52.707

您可以使用 powershell 或命令行版本的 WinDbg（即 cdb）发出命令，然后解析您解释的 cdb 的输出。

这类似于将输出从 cdb 传送到您的应用程序的概念。

有关于以这种方式使用 powershell 的帖子：[http ://rkeithhill.wordpress.com/2006/08/14/minidump-crash-analysis-with-powershell/](http://rkeithhill.wordpress.com/2006/08/14/minidump-crash-analysis-with-powershell/)

将命令泵入 cdb 并解释特定命令的输出应该很简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T12:35:52.530

Python 与 dbgeng 集成： [pykd.codeplex.com](http://pykd.codeplex.com)

该项目可用作此类集成的演示

# hibernate - ManyToMany 属性的 SELECT 上的 JPQL Hibernate SQLException

> ID：10589588
> 
> 赞同：1
> 
> 时间：2012-05-14T19:09:52.137
> 
> 标签：hibernate, jpa, many-to-many, jpql, sqlexception

我正在使用 JPA 和 Hibernate 处理 Java Spring 项目。有两个实体“主题”和“导师”。在“主题”类中，有一个多对多列表作为对“导师”的引用，您可以在以下代码段中看到：

```
public class Topic implements Serializable {
   ...    
   @ManyToMany(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)
   @JoinColumn(name = "pretutor_id")
   @IndexColumn(name = "id")
   private List<Tutor> preferedTutors = new ArrayList<Tutor>();
   .... 
```

“Tutor”实体没有向后引用“Topic”。

我想要实现的是获得一个包含所有主题的主题列表，这些主题在它们的preferedTutors List 属性中包含某个Tutor对象。为此，我尝试了

```
"SELECT t FROM Topic t WHERE :tutor MEMBER OF t.preferedTutors" 
```

其中参数 ":tutor" 是一个 "Tutor" 对象。代码编译正确，但在测试中执行时我不幸收到以下错误：

```
Caused by: java.sql.SQLException: Unexpected token: . in statement [select topic0_.id as id4_0_, diplomate2_.id as id1_1_, tutor4_.id as id1_2_, topicdescr5_.id as id6_3_, topic0_.descriptionfile_id as descript3_4_0_, topic0_.procedure_id as procedure4_4_0_, topic0_.diplomate_id as diplomate5_4_0_, topic0_.title as title4_0_, topic0_.tutor_id as tutor6_4_0_, diplomate2_.accountName as accountN2_1_1_, diplomate2_.description as descript3_1_1_, diplomate2_.procedure_id as procedure8_1_1_, diplomate2_.email as email1_1_, diplomate2_.firstname as firstname1_1_, diplomate2_.lastname as lastname1_1_, diplomate2_.title as title1_1_, prospectiv1_.Topic_id as Topic1_4_0__, prospectiv1_.prospectiveDiplomates_id as prospect2_0__, prospectiv1_.id as id0__, tutor4_.accountName as accountN2_1_2_, tutor4_.description as descript3_1_2_, tutor4_.procedure_id as procedure8_1_2_, tutor4_.email as email1_2_, tutor4_.firstname as firstname1_2_, tutor4_.lastname as lastname1_2_, tutor4_.title as title1_2_, tutor4_.contingent as contingent5_2_, tutor4_.createdAt as createdAt5_2_, tutor4_.isAdmin as isAdmin5_2_, preferedtu3_.Topic_id as Topic1_4_1__, preferedtu3_.preferedTutors_id as prefered2_1__, preferedtu3_.id as id1__, topicdescr5_.file as file6_3_, topicdescr5_.fileName as fileName6_3_, topicdescr5_.fileType as fileType6_3_, topicdescr5_.uploadDate as uploadDate6_3_ from Topic topic0_ left outer join Topic_Diplomate prospectiv1_ on topic0_.id=prospectiv1_.Topic_id left outer join Diplomate diplomate2_ on prospectiv1_.prospectiveDiplomates_id=diplomate2_.id left outer join Topic_Tutor preferedtu3_ on topic0_.id=preferedtu3_.Topic_id left outer join Tutor tutor4_ on preferedtu3_.preferedTutors_id=tutor4_.id left outer join TopicDescription topicdescr5_ on topic0_.descriptionfile_id=topicdescr5_.id cross join Topic_Tutor preferedtu6_, Tutor tutor7_ where topic0_.id=preferedtu6_.Topic_id and preferedtu6_.preferedTutors_id=tutor7_.id and (topic0_.diplomate_id is not null) and (. is not null)]
at org.hsqldb.jdbc.Util.throwError(Unknown Source)
at org.hsqldb.jdbc.jdbcPreparedStatement.<init>(Unknown Source)
at org.hsqldb.jdbc.jdbcConnection.prepareStatement(Unknown Source)
at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:248)
at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:302)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1616)
at org.hibernate.loader.Loader.doQuery(Loader.java:717)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
at org.hibernate.loader.Loader.doList(Loader.java:2449)
... 58 more 
```

显然是“。” 无法处理生成语句末尾的表达式“(. is not null)”。这是一个已知的错误还是我必须更改我的 JPA 查询？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-12T13:40:15.487

尝试使用 @JoinTable 定义您的 ManyToMany，如下所示：

```
public class Topic implements Serializable {
   ...    
   @ManyToMany(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)
   @JoinTable(name="preferredtutors", joinColumns={@JoinColumn(name="topic_id")}, inverseJoinColumns={@JoinColumn(name="tutor_id")})
   private List<Tutor> preferedTutors = new ArrayList<Tutor>();
   .... 
```

使用@JoinTable 注释，您可以定义表和列引用。

# xcode - UIScrollView 根据内容调整大小

> ID：10589589
> 
> 赞同：0
> 
> 时间：2012-05-14T19:09:58.283
> 
> 标签：xcode, uiscrollview, size, uilabel

伙计们！所以，我有 UIScrollView 和几个 UILabels，我想调整 UIScrollView 的大小，使其高度适合所有标签高度的总和。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:11:58.583

对标签的高度求和，添加一些填充并将其设置为滚动视图框架（或 contentView，如果大于屏幕）的高度。

# python - Mac 上的 Python 版本

> ID：10589590
> 
> 赞同：12
> 
> 时间：2012-05-14T19:09:59.970
> 
> 标签：python, macos, version, homebrew

我正在使用 Mac Os 10.7 (Lion)，我有一些问题：

1.  Lion 上预装的 python 版本是什么？
2.  我已经在这台电脑上工作了一段时间，为了完成大学作业，我安装了很多软件，很多次我都不知道自己到底在做什么。问题是：现在我在 /Library/Frameworks/Python.framework/Versions/ 上有一个名为“7.0”的文件夹，我很确定没有 python 版本 7。这个文件夹是本机还是第三方程序安装。我可以删除它吗？（它在磁盘上使用 1 Gb）。
3.  mac os自带的原始python在哪里？
4.  我选择 Homebrew 作为我的包管理器，有没有一种简单的方法来管理 python 版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T19:14:51.883

1.  Lion 默认使用 Python 2.7；2.5 和 2.6 也可用。

2.  `/Library/Frameworks/Python.framework`Lion 的库存安装中不存在。我的猜测是，您已经通过安装一些应用程序来解决这个问题。

3.  默认 Python 安装主要安装在 中`/System/Library/Frameworks/Python.framework`，尽管一些组件位于其他位置。

4.  是的 - 您可以`brew install python@2`从系统版本中获取 Python 2.7，或者`brew install python`获取 Python 3.7。两者都将安装到`/usr/local`，就像任何其他 Homebrew 配方一样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T19:15:03.510

1.  我认为那是 Python 2.7，但您可以检查在命令终端上键入 python。它会告诉你版本。
2.  我不知道你可以删除它，因为我不知道它有什么......你能提供更多关于它的信息吗？
3.  只需输入“which python”，它就会告诉你
4.  您应该使用 virtualenv 和 pip：http: [//jontourage.com/2011/02/09/virtualenv-pip-basics/](http://jontourage.com/2011/02/09/virtualenv-pip-basics/)

# sql - 创建表 LINQ TO SQL

> ID：10589597
> 
> 赞同：1
> 
> 时间：2012-05-14T19:10:44.190
> 
> 标签：sql, linq

我想用 LINQ TO SQL 在我的数据库中创建一个表。这就是我所拥有的：

```
public void CreateUserTab(string nick) 
{
    string sqlCdm = string.Format("CREATE TABLE Customer (Nick nvarchar(30) PRIMARY KEY, AzetID nvarchar(30), RpText nvarchar(300), Your bit, Sing nvarchar(30), Time DateTime, OriginalTxt nvarchar(300))"); 
    _dc.ExecuteCommand(sqlCdm); 
    _dc.SubmitChanges(); 
} 
```

执行此操作后，我的表没有出现在数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:13:56.887

您必须提供一个表名作为`String.Format`调用的第二个参数。

现在`{0}`占位符没有被替换。

# android - 如何在布局 xml 中保证某个元素以其全高显示

> ID：10589608
> 
> 赞同：0
> 
> 时间：2012-05-14T19:11:31.450
> 
> 标签：android, android-layout, android-resources

我是 Android 新手，并注意到在创建包含and`TabHost`的 a时，声明的顺序非常重要。例如，如果我使用：`LinearLayout``FrameLayout``TabWidget`

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp" />
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

...`TabWidet`永远不会显示，因为`FrameLayout`占据了整个空间。但如果我声明第`TabWidget`一个：

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp" />
</LinearLayout> 
```

...两者都显示，但在`TabWidget`顶部而不是底部，这是我想要的。

所以，我想知道是否有`layout_height`规范或其他属性可以“保证”某个元素在考虑其他元素之前以其完整高度呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:50:55.930

在您的第一个示例中，您告诉框架布局根据他拥有的内容数量来获取所需的高度：

```
android:layout_height = "wrap_content" 
```

我认为他没有为 TabWidget 留下空间。

你的问题的答案是：

```
android:layout_(dimension) = "fill_parent" 
```

这个占满空间。

# css - 为什么溢出-x：隐藏创建“边界”？

> ID：10589611
> 
> 赞同：0
> 
> 时间：2012-05-14T19:11:53.573
> 
> 标签：css

我有一个包装器元素，我希望它具有固定宽度并使其不可滚动到两侧（它适用于移动设备）
当我给包装器溢出-x：隐藏时，我在顶部和底部得到一个奇怪的“边框” .
你可以在这里看到：http: [//jsfiddle.net/ilyaD/nzGxf/3/](http://jsfiddle.net/ilyaD/nzGxf/3/)
为什么会这样，我该如何删除它们？

==更新了小提琴==
溢出隐藏确实隐藏了比包装器更宽的元素，但创建了某种内部滚动元素，其中包含屏幕截图中出现的框架和持久滚动条

![在此处输入图像描述](../Images/7157cdd6588fef13aa9ca3b532968e8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:17:30.220

如果您所说的是每个框之间的空格，则“框”类是内联块，因此标记中的换行符被解释为隐含空格。将所有内联块标记放在一行上`<div></div><div></div>...`，中间的“空格”将折叠。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T19:18:53.130

要添加到 Jim H. 的答案，您可以选择`display: block; float: left`div 而不是`display: inline-block`它们

# jndi - 在 JBoss AS 7.1.1.Final InitialContext.list() 中返回空列表

> ID：10589613
> 
> 赞同：1
> 
> 时间：2012-05-14T19:11:56.353
> 
> 标签：jndi, jboss7.x

我正在尝试使用 Hermes JMS 浏览 JBoss AS 7.1.1.Final 上的 JMS 队列，但我得到一个“空”的 JNDI 树。为了研究这个问题，我编写了一个简单的程序来从 JBoss 服务器中转储 JNDI 树节点。代码是这样的：

```
public static void main(String[] args) throws Exception {

     final Properties jndiProperties = getJboss7Properties();
     // final Properties jndiProperties = getHornetQProperties();

     // Dumps the initial context contents
     InitialContext ctx = new InitialContext(jndiProperties);
     listRootJndiContext(ctx);

     // Simple lookup
     System.out.println(ctx.lookup("java:jms/RemoteConnectionFactory")
               .getClass().getName());
}

private static Properties getJboss7Properties() {
     final Properties jndiProperties = new Properties();
     jndiProperties.put(Context.INITIAL_CONTEXT_FACTORY,
               "org.jboss.naming.remote.client.InitialContextFactory");
     jndiProperties.put(Context.PROVIDER_URL, "remote://localhost:4447");
     jndiProperties.put(Context.SECURITY_PRINCIPAL, "guest");
     jndiProperties.put(Context.SECURITY_CREDENTIALS, "guest123");
     return jndiProperties;
}

private static void listRootJndiContext(Context ctx) throws NamingException {
     System.out.println("Listing root JNDI context:");
     NamingEnumeration<NameClassPair> list = ctx.list("");
     if (list.hasMore()) {
          while (list.hasMore()) {
                NameClassPair ncp = list.next();
                System.out.println(ncp.getName() + " (" + ncp.getClassName() + ")");
          }
     } else {
          System.out.println("Empty list!");
     }
} 
```

调用`ctx.list("")`时，返回的列表始终为空，即使 a`ctx.lookup("java:jms/RemoteConnectionFactory")`按预期返回了 JMS 连接工厂。

我尝试对独立的 HornetQ 服务器（2.2.14.Final）运行完全相同的代码，将 InitialContext 属性更改为使用“旧”jnp 协议，并且正确转储了 JNDI 树节点。

我还尝试在服务器中（在 Servlet 中）运行相同的代码（除了调用默认的 InitialContext() 构造函数），它也按预期工作（转储 JNDI 树节点）。

是否有任何权限可以在 standard.xml 或类似的东西上配置？

这个功能（“远程 JNDI 浏览”）是否在 JBoss AS 7.1.1.Final 上实现？

# python - SyntaxError：函数返回“£”时文件中的非 ASCII 字符“\xa3”

> ID：10589620
> 
> 赞同：303
> 
> 时间：2012-05-14T19:12:25.217
> 
> 标签：python, unicode, python-unicode

说我有一个功能：

```
def NewFunction():
    return '£' 
```

我想打印一些前面有井号的东西，当我尝试运行这个程序时它会打印一个错误，显示这个错误消息：

```
SyntaxError: Non-ASCII character '\xa3' in file 'blah' but no encoding declared;
see http://www.python.org/peps/pep-0263.html for details 
```

谁能告诉我如何在我的返回函数中包含一个井号？我基本上是在课堂上使用它，它在`'__str__'`包含井号的部分内。

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2012-05-14T19:16:26.153

我建议阅读错误给你的 PEP。问题是您的代码正在尝试使用 ASCII 编码，但井号不是 ASCII 字符。尝试使用 UTF-8 编码。您可以从`# -*- coding: utf-8 -*-`.py 文件的顶部开始。为了更高级，您还可以在代码中逐个字符串定义编码。但是，如果您尝试将井号文字放入您的代码中，您将需要一个支持整个文件的编码。

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2013-11-06T09:29:23.467

在我的 .py 脚本顶部添加以下两行对我有用（第一行是必要的）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-05-14T19:21:26.923

首先将该`# -*- coding: utf-8 -*-`行添加到文件的开头，然后`u'foo'`用于所有非 ASCII unicode 数据：

```
def NewFunction():
    return u'£' 
```

或使用自 Python 2.6 以来可用的魔法使其自动化：

```
from __future__ import unicode_literals 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-12-06T08:52:52.053

在脚本中添加以下两行为我解决了这个问题。

```
# !/usr/bin/python
# coding=utf-8 
```

希望能帮助到你 ！

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-06-13T07:43:49.070

错误消息会告诉您究竟出了什么问题。Python 解释器需要知道非 ASCII 字符的编码。

如果你想返回[U+00A3](http://www.fileformat.info/info/unicode/char/a3/index.htm)那么你可以说

```
return u'\u00a3' 
```

它通过 Unicode 转义序列以纯 ASCII 表示此字符。如果要返回包含文字字节 0xA3 的字节字符串，那就是

```
return b'\xa3' 
```

（在 Python 2 中`b`是隐式的；但显式优于隐式）。

错误消息中链接的 PEP 会准确地告诉您*如何*告诉 Python“此文件不是纯 ASCII；这是我正在使用的编码”。如果编码是 UTF-8，那就是

```
# coding=utf-8 
```

或 Emacs 兼容的

```
# -*- encoding: utf-8 -*- 
```

如果您不知道您的编辑器使用哪种编码来保存此文件，请使用十六进制编辑器和一些谷歌搜索来检查它。Stack Overflow[字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")标签有一个[标签信息页面](/tags/character-encoding/info)，其中包含更多信息和一些故障排除提示。

总而言之，在 7 位 ASCII 范围 (0x00-0x7F) 之外，Python 不能也不能猜测字节序列代表什么字符串。[https://tripleee.github.io/8bit#a3](https://tripleee.github.io/8bit#a3)显示了字节 0xA3 的 21 种可能解释，这仅来自传统的 8 位编码；但它也很可能是多字节编码的第一个字节。但事实上，我猜你实际上是在使用 Latin-1，所以你应该有

```
# coding: latin-1 
```

作为源文件的第一行或第二行。无论如何，如果不知道字节应该代表哪个字符，人类也无法猜测到这一点。

警告：`coding: latin-1`肯定会删除错误消息（因为在此编码中没有技术上不允许的字节序列），但如果实际编码是其他编码，则在解释代码时可能会产生完全错误的结果。声明编码时，您确实必须完全确定地知道文件的编码。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-28T13:56:06.407

您可能正在尝试使用 Python 2 解释器运行 Python 3 文件。目前（截至 2019 年），`python`在 Windows 和大多数 Linux 发行版上安装两个版本时，命令默认为 Python 2。

但是，如果您确实在使用 Python 2 脚本，则此页面上尚未提及的解决方案是以 UTF-8+BOM 编码重新保存文件，这将在文件的开头添加三个特殊字节，它们将明确告知 Python 解释器（和您的文本编辑器）有关文件编码的信息。

# c++ - 布尔图形 c++ (xcode mac)

> ID：10589624
> 
> 赞同：1
> 
> 时间：2012-05-14T19:12:47.723
> 
> 标签：c++

我在 C++ 中生成由 1 和 0 组成的表达式。表达式为 100*100 个字符（即 100 行，每行 100 个字符）

有没有一种简单的方法可以直观地显示这些表达式？一个好的 ASCII 字符，如黑白框，还是简单的图片格式？

# visual-studio-2005 - 在 Visual Studio 中编辑表达式

> ID：10589630
> 
> 赞同：0
> 
> 时间：2012-05-14T19:13:19.170
> 
> 标签：visual-studio-2005, ssrs-2008, reportingservices-2005

任何人都知道在 Visual Studio 中编辑表达式（SSRS 表达式）时可以使用什么语言？此外，如果可能的话，希望获得该语言的文档或教程的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:20:41.693

在表达式中，语言是表达式构建器支持的任何语言。Excel 和 Access 语法的混合。

也可以将代码添加到报告 -> 报告属性 -> 代码窗口。在那个窗口中，语法更像 VBScript 或 VB6。在那里构建的函数可以从表达式中访问：

```
=Code.MyFunction(someParameter) 
```

根据[http://msdn.microsoft.com/en-us/library/ms155798(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms155798(v=sql.90).aspx)，该语言由几个 .NET 2.0 程序集 Microsoft.VisualBasic、System.Convert 和 System 提供。数学。

# mysql - ASP 和 INT 数据类型的 myODBC mySQL 错误

> ID：10589632
> 
> 赞同：0
> 
> 时间：2012-05-14T19:13:33.607
> 
> 标签：mysql, odbc

我有以下问题，通过 myodbc 对 mysql 数据库执行 sql 查询。

有一个名为“tbl_test”的表，其中包含“价格”字段，其中价格以美分存储。“价格”是一个整数。

现在我尝试执行以下查询 SELECT AVG(price) FROM tbl_test

在 mysql 上，此查询返回价格列的平均值。通过 myODBC 驱动程序，这将导致错误。我发现了一个旧错误（从 2005 年开始）并认为必须进行更新。但我找不到任何解决这个问题的方法。

您是否有解决此问题的想法（或解决此问题）？

asp页面上显示的错误：error '80020009'（不是很清楚......）我找到的信息：[http ://bugs.mysql.com/bug.php?id=14923](http://bugs.mysql.com/bug.php?id=14923)

即使将“CAST”用于 DECIMAL 也无法与 ODBY 一起使用 :-(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:25:06.860

您是否收到相同的错误如果您将查询更改为：

```
SELECT AVG(price) as avgPrice FROM tbl_test 
```

# c - 在 Windows 7 上遇到 EOF 问题

> ID：10589637
> 
> 赞同：3
> 
> 时间：2012-05-14T19:13:54.637
> 
> 标签：c, eof

我目前正在使用 K&R 学习 C，并且很难通过 cmd 发送 EOF 模拟。我正在尝试`Ctrl`+`Z`它什么也没做。

在某些情况下`Enter`正在做这项工作，而在其他情况下什么都不做。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:34:41.400

假设你在 Windows 上，情况是你基本上必须在一行的开头做`ctrl`+ `Z`- 即你必须先 hit `enter`，然后做`ctrl`+ `Z`，然后（取决于输入的读取方式）可能`enter`再次。

您还可以使用`F6`来表示输入结束。至少在大多数情况下，即使/如果它*没有*立即跟在`enter`.

不幸的是，Windows 提供了足够多的不同方式和模式来读取输入，除非我们知道您正在使用的编译器（或者，更具体地说，标准库）以及确切的内容，否则很难绝对确定地陈述很多内​​容你写的代码。在正常情况下，`enter`不应*将*仅点击检测为文件结尾，但您的代码可能会将空行视为输入的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T22:45:32.780

在 Windows 7 控制台窗口中，我成功按下`F6`了`Enter`. `F6`在命令提示符处生成文件结尾 ^Z 符号。

`Ctrl`+`Z`导致控制台窗口退出执行，而不仅仅是用户程序。

# ios - 使用默认的 MonoTouch 解决方案会产生构建错误

> ID：10589640
> 
> 赞同：1
> 
> 时间：2012-05-14T19:13:58.057
> 
> 标签：ios, mono, xamarin.ios, monodevelop

当我在 MonoDevelop 3.0 中创建通用单页应用程序解决方案时，构建失败，因为：

```
 {DIRECTORY}/iTEST/AppDelegate.cs(7,7): Error CS0246: The type or namespace name `MonoTouch' could not be found. Are you missing a using directive or an assembly reference? (CS0246) (iTEST) 
```

我查看了 Preferences -> SDK locations -> 并确认我安装了 MonoTouch SDK。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:44:07.690

生成的项目是否有参考`monotouch.dll`？如果没有，那么您需要手动添加一个。

我使用 MonoDevelop 3.0 创建了一个新的*Universal*、*Single View Application*项目，它可以正常工作（并且存在对的引用`monotouch.dll`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:54:20.330

原来我启用了实验性构建功能，它不支持 ASP.NET 或 MonoTouch 项目。这可以通过 Preferences->Build 窗格禁用。

# c++ - 作为 C++ 库 API 的一部分的第三方类型和潜在的 ABI 不一致

> ID：10589643
> 
> 赞同：2
> 
> 时间：2012-05-14T19:14:11.673
> 
> 标签：c++, api

[这是对上一个问题](https://stackoverflow.com/q/10576550/1392773)的跟进。

我正在开发一个库，客户需要为其提供复杂的类型，如矩阵和四元数。在内部，我将使用[Eigen](http://eigen.tuxfamily.org/)来操作这些类型，并且根据链接问题中的讨论，我可能会对 Eigen 的类型进行一个薄包装，并要求客户将这些类型提供给我的库，本质上将 Eigen 隐藏为内部实现细节。

事实上，由于我的一些客户可能已经在使用 Eigen，所以有人建议我在我的 Eigen 类型的包装版本中提供某种类型的 to/from Eigen 函数。

这一切听起来都很好，但我担心如果我的库在内部使用与我的客户使用的不同版本的 Eigen 可能会发生什么。如果这两个版本兼容 ABI，那么我认为没有任何问题。但是，如果它们不是，那么我可以想象一些“坏”的事情正在发生。我特别担心，因为 Eigen 是一个仅限标头的库，我不能假设，例如，我的库和我的客户端都将链接到第三方库的相同编译版本。

如果我为我的用户提供源代码并让他们自己根据 Eigen 进行编译，那么我就不必太担心了。但是，我最关心的是为我的用户编译和安装 DSO/DLL 的情况。

所以，我想我的问题是：我是否必须限制我的客户使用与 ABI 兼容的库版本？我可以为 Eigen 提供必要的标题，但是用户已经在使用 Eigen 会有问题。

我想我可以让我的客户对我的包装器类型进行必要的转换，但我想提供方便的功能。

请注意，虽然我特别在谈论 Eigen，但这个问题可能适用于任何提供类型的第三方库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:25:08.873

提供您自己的类型绝对是最通用的方法，并确保人们可以在没有第三方库（即 Eigen）的情况下使用您的库。由于您永远不能希望涵盖您的客户可能使用的所有可能的第三方库，因此我建议将转换功能留给您的最终用户/实施者。

如果提供转换/便利功能非常重要，那么只需在单独的源文件中实现它们并直接提供给您的客户；一点糖衣，向他们表达你的关心。

顺便说一句，我认为您总是希望在可用的情况下使用“标准”结构。我知道 STL 没有“矩阵”或“四元数”数据类型，但 Boost*有*，而且[Boost](http://www.boost.org)几乎与您可以达到的标准一样接近，而实际上却不符合标准。因此，这为您提供了另一种可能性。

# c# - ServiceStack：未设置 ResponseStatus

> ID：10589647
> 
> 赞同：3
> 
> 时间：2012-05-14T19:14:20.020
> 
> 标签：c#, servicestack

我正在使用 ServiceStack，但无法让自动注入的 ResponseStatus 属性在我的响应 DTO 上工作。我的响应 DTO 实现了 IHasResponseStatus，但未在成功响应或错误期间设置。

我想通过简单地抛出异常并让 ServiceStack 为客户端序列化异常和堆栈跟踪来使用 ServiceStack 的内置错误处理。我已按照 wiki 中“验证和错误处理”页面上的说明进行操作，但我一定遗漏了一些东西。此功能是否取决于 DTO 的特定命名约定？我的请求 DTO 的名称类似于“MyRequest”，响应为“MyRequestResponse”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:56:31.033

响应 DTO 需要与请求 DTO 位于同一命名空间中，并且需要命名：

```
RequestDto{Response} 
```

例如，如果您的服务的请求 DTO 是`Hello`响应 DTO 应该是`HelloResponse`

还使 StackTraces 也可以注入

```
SetConfig(new EndpointHostConfig {
    DebugMode = true, //Enable StackTraces in development
}); 
```

有关[ServiceStack](http://www.servicestack.net)错误处理的更多信息可以在[Validation wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Validation)中找到。

# objective-c - 有没有办法更改选项卡式 iOS 应用程序中选项卡的位置？

> ID：10589651
> 
> 赞同：0
> 
> 时间：2012-05-14T19:14:28.447
> 
> 标签：objective-c, ios, xcode

有没有办法更改选项卡式 iOS 应用程序中选项卡的位置？我希望标签位于顶部而不是底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:23:54.547

`UITabBar`旨在用于底部。这就是用户所期望的。这有充分的理由，例如能够用拇指更改标签。

即使您有充分的理由说明您的应用程序的行为应该与所有其他应用程序不同，将 a 重新定位`UITabBar`到顶部对于用户来说只是看起来和感觉不对，他们会知道*不*应该在*那里*。最好在这种情况下实现你自己的，并清楚地表明它不是`UITabBar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:21:41.060

关于标准 Apple `UITabBar`，**没有**。但是，您可以使用`UISegmentedControl`.

试试在另一个网站上找到的这个例子：[http ://www.iphonedevsdk.com/forum/iphone-sdk-development/35054-display-tab-bar-items-top-screen.html#post149060](http://www.iphonedevsdk.com/forum/iphone-sdk-development/35054-display-tab-bar-items-top-screen.html#post149060)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:23:35.457

关于标准 Apple UITabbar 编号。这是有原因的，因为将它们移到顶部会违反 HIG 和标准界面。

如果您需要顶部的东西，您应该查看 UIToolBar，但在简单地将最有价值的应用程序按钮放在顶部时，当用户期望它们位于底部时，请考虑您在做什么。

# android - 如何根据第一个列表中的选择显示特定的列表对象？

> ID：10589653
> 
> 赞同：1
> 
> 时间：2012-05-14T19:14:34.227
> 
> 标签：android, file-io, listactivity

我在做一个有两个活动的 Android 项目。这两个活动都是列表活动。

第一个 Activity 是应用程序的入口点，在该列表中，可以创建添加到列表中的新名称。我想将这些名称存储在共享首选项或文件中。但我不知道该怎么做。我都试过了，但都没有成功。当这个列表中的一个项目被按下时，应该显示另一个活动的实例，并且只有属于这个选项的列表项目应该是可见的。

为了更容易理解，您可以将其视为联系人应用程序。

**第一个和另一个列表中的数据必须以某种方式保存。我怎么做？我应该使用共享首选项还是内部存储？**

**以及如何使第二个列表视图显示正确的数据？**

谢谢！/蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:17:09.230

我使用 SQLite 数据库来执行此操作。

所以在第一个活动中，我查询 SQLite db 并`cursor`返回一个对象，我可以将其插入一个`cursorAdapter`然后用作列表活动的适配器。

在 中`cursorAdapter`，对于列表中的每个项目，我设置了一个`onClickListener`，当单击它时，启动新活动并将列表项添加到新活动的`Bundle`

最后，我`Bundle`从新活动中获取列表项并使用它再次查询 SQLite 数据库，并使用它来生成第二个列表，就像我对第一个所做的那样

[http://developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)

共享首选项仅适用于使用少量数据且仅偶尔需要的小东西，例如首选项/设置

# c# - 半栅栏和全栅栏？

> ID：10589654
> 
> 赞同：19
> 
> 时间：2012-05-14T19:14:35.513
> 
> 标签：c#, .net, multithreading

我一直在阅读它`Full fences`可以防止任何类型的指令重新排序或围绕该栅栏进行缓存（通过 memoryBarrier）

然后我读到了`volatile` 哪些会产生“半栅栏”：

> volatile 关键字指示编译器在每次读取该字段时生成一个获取栅栏，并在每次写入该字段时生成一个释放栅栏。

`acquire-fence`

> 获取栅栏防止其他读/写在栅栏之前移动；

`release-fence`

> 释放栅栏可防止其他读/写操作在栅栏之后移动。

有人可以用简单的英语解释一下这两个句子吗？

*（围栏在哪里？）*

## 编辑

在这里得到一些答案后——我画了一张可以帮助每个人的图画——我想。

[https://i.stack.imgur.com/A5F7P.jpg](https://i.stack.imgur.com/A5F7P.jpg) ![在此处输入图像描述](../Images/42f4c8e3cca193d46ff1d06cae61f4f9.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T20:57:41.273

您提到的措辞看起来像我经常使用的措辞。规范说明了这一点：

*   对易失性字段的读取称为易失性读取。易失性读取具有“获取语义”；也就是说，它保证在指令序列中对内存的任何引用之前发生。
*   对易失性字段的写入称为易失性写入。易失性写入具有“释放语义”；也就是说，它保证发生在指令序列中写指令之前的任何内存引用之后。

但是，我通常使用您在问题中引用的措辞，因为我想将重点放在*可以移动*指令的事实上。您引用的措辞和规范是等效的。

我将举几个例子。在这些示例中，我将使用一个特殊的符号，使用 ↑ 箭头表示释放栅栏，使用 ↓ 箭头表示获取栅栏。不允许任何其他指令向下飘过 ↑ 箭头或向上飘过 ↓ 箭头。把箭头想象成排斥一切的东西。

考虑以下代码。

```
static int x = 0;
static int y = 0;

static void Main()
{
  x++
  y++;
} 
```

重写它以显示各个指令看起来像这样。

```
static void Main()
{
  read x into register1
  increment register1
  write register1 into x
  read y into register1
  increment register1
  write register1 into y
} 
```

现在，因为在此示例中没有内存屏障，*只要执行线程感知的逻辑顺序与物理顺序一致，* C# 编译器、JIT 编译器或硬件就可以自由地以多种不同方式对其进行优化。这是一种这样的优化。注意读写是如何被交换的`x`。`y`

```
static void Main()
{
  read y into register1
  read x into register2
  increment register1
  increment register2
  write register1 into y
  write register2 into x
} 
```

现在这一次将这些变量更改为`volatile`. 我将使用我们的箭头符号来标记内存障碍。注意读取和写入的顺序是如何`x`保留`y`的。这是因为指令不能越过我们的障碍（用↓和↑箭头表示）。现在，这很重要。请注意，指令的增量和写入`x`仍允许向下浮动，而读取的指令仍允许`y`向上浮动。这仍然有效，因为我们使用的是半栅栏。

```
static volatile int x = 0;
static volatile int y = 0;

static void Main()
{
  read x into register1
  ↓    // volatile read
  read y into register2
  ↓    // volatile read
  increment register1
  increment register2
  ↑    // volatile write
  write register1 into x
  ↑    // volatile write
  write register2 into y
} 
```

这是一个非常微不足道的例子。[在此处](https://stackoverflow.com/a/10281524/158779)查看我的答案，以了解如何`volatile`在双重检查模式中有所作为的重要示例。我使用了与此处相同的箭头符号，以便轻松可视化正在发生的事情。

现在，我们也有了可以使用的`Thread.MemoryBarrier`方法。它会生成一个完整的围栏。因此，如果我们使用箭头符号，我们也可以想象它是如何工作的。

考虑这个例子。

```
static int x = 0;
static int y = 0;

static void Main
{
  x++;
  Thread.MemoryBarrier();
  y++;
} 
```

如果我们要像以前一样显示各个指令，那么它看起来像这样。请注意，现在完全阻止了指令移动。在不影响指令逻辑顺序的情况下，真的没有其他方法可以执行它。

```
static void Main()
{
  read x into register1
  increment register1
  write register1 into x
  ↑    // Thread.MemoryBarrier
  ↓    // Thread.MemoryBarrier
  read y into register1
  increment register1
  write register1 into y
} 
```

好的，再举一个例子。这次让我们使用VB.NET。VB.NET 没有`volatile`关键字。那么我们如何在 VB.NET 中模拟 volatile 读取呢？我们将使用`Thread.MemoryBarrier`. ¹

```
Public Function VolatileRead(ByRef address as Integer) as Integer
  Dim local = address
  Thread.MemoryBarrier()
  Return local
End Function 
```

这就是我们的箭头符号的样子。

```
Public Function VolatileRead(ByRef address as Integer) as Integer
  read address into register1
  ↑    // Thread.MemoryBarrier
  ↓    // Thread.MemoryBarrier
  return register1
End Function 
```

重要的是要注意，由于我们要模拟 volatile 读取，因此`Thread.MemoryBarrier`必须在实际读取*之后放置对的调用。*不要陷入认为 volatile 读取意味着“新读取”而 volatile 写入意味着“已提交写入”的陷阱。这不是它的工作方式，当然也不是规范所描述的。

**更新：**

参考图像。

> 等待！我正在验证所有写入都已完成！

和

> 等待！我正在验证所有消费者都获得了当前值！

这就是我说的陷阱。这些陈述并不完全准确。是的，在硬件级别实现的内存屏障可能会同步缓存一致性行，因此上述陈述可能对所发生的情况有所准确。但是，`volatile`无非是限制指令的移动。该规范**没有**说明从内存中加载值或将其存储到内存屏障所在位置的内存中。

* * *

¹*当然，`Thread.VolatileRead`内置函数已经存在。你会注意到它的实现与我在这里所做的完全一样。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:19:50.157

从另一种方式开始：

当您阅读 volatile 字段时，什么是重要的？之前对该字段的所有写入都已提交。

写入 volatile 字段时什么是重要的？所有以前的读取都已经有了它们的值。

然后尝试验证获取栅栏和释放栅栏在这些情况下是否有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:21:42.473

为了更容易理解这一点，让我们假设一个可以进行任何重新排序的内存模型。

让我们看一个简单的例子。假设这个 volatile 字段：

```
volatile int i = 0; 
```

和这个读写序列：

```
1\. int a = i;
2\. i = 3; 
```

对于读取 的指令 1，`i`生成一个获取栅栏。这意味着写入指令 2`i`不能与指令 1 一起重新排序，因此`a`在序列末尾不可能是 3。

现在，当然，如果您考虑单个线程，则上述内容没有多大意义，但是如果另一个线程要对相同的值进行操作（假设`a`是全局的）：

```
thread 1               thread 2
a = i;                 b = a;
i = 3; 
```

在这种情况下，您会认为线程 2 不可能获得 3 的值`b`（因为它会获得`a`赋值之前或之后的值`a = i;`）。但是，如果对 get 的读取和写入进行`i`重新排序，则可能会`b`得到值 3。在这种情况下，`i`如果您的程序正确性取决于不变为`b`3，则必须设置 volatile。

**免责声明**：以上示例仅用于理论目的。除非编译器完全疯狂，否则它不会进行可能为变量创建“错误”值的重新排序（即`a`即使`i`不是易失性也不能为 3）。

# javascript - SugarCRM 新鲜库存安装样式和脚本未正确链接

> ID：10589659
> 
> 赞同：1
> 
> 时间：2012-05-14T19:14:55.603
> 
> 标签：javascript, html, css, sugarcrm

我刚刚重新安装了 SugarCRM，这是我第二次安装这个应用程序，它是社区版 6.4.4

这个版本似乎安装得很好，但是似乎开发人员从未打算将它安装在根目录之外，因为将它安装在根目录之外的子文件夹中似乎会破坏样式和脚本，这似乎是我的赌注他们做了 src/href = "assets/blahblah.ext" 而不是 "/assets/blahblah.ext"

所以现在我需要弄清楚在这堆代码中对这些源进行调用的位置，这样我就可以修复它们，这样这个东西就可以按预期看起来和工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T18:26:11.843

我认为这是文件/目录权限的问题......

试试这个....

在 config.php 中

放

'dir_mode' => 1533，'file_mode' => 436，

之后删除缓存文件夹中的所有内容

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:24:16.867

查看生成的 config.php 文件。我敢打赌那里有一个指令将其硬编码到旧目录位置。

# asp.net - MySqlBulkLoader SQL 注入预防

> ID：10589661
> 
> 赞同：0
> 
> 时间：2012-05-14T19:15:06.927
> 
> 标签：asp.net, mysql, security, sql-injection, bulkinsert

我正在尝试允许用户将 CSV 文件上传到我的数据库。我想知道 MySqlBulkLoader 是否可以防止 SQL 注入？

如果没有，解析文件并删除任何 sql 注入代码的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:31:26.477

使用 MySQLBulkLoader 类时无需担心 SQL 注入：该类只是调用一个`LOAD DATA INFILE`语句来处理 CSV 文件，它实际上不会执行来自 CSV 文件的任何查询。请参阅有关“使用 MySqlBulkLoader 类”的[MySQL 文档。](http://dev.mysql.com/doc/refman/5.1/en/connector-net-programming-bulk-loader.html)

# c# - 如何绑定gridview模板字段页脚文本框以插入参数？

> ID：10589664
> 
> 赞同：0
> 
> 时间：2012-05-14T19:15:31.640
> 
> 标签：c#, asp.net, gridview

我有这个 gridview 启用了页脚行来插入新行。但是我不知道如何将文本框与 sqldatasource 中的插入参数绑定。请帮忙？

```
 <asp:TemplateField HeaderText="Region Name" SortExpression="regionName">
                <FooterTemplate>
                      <asp:TextBox ID="tbInsert" runat="server" Text="" ></asp:TextBox>
                </FooterTemplate>
            </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:41:29.410

明白了，在后面的代码中做到了：

```
 if (e.CommandName == "Insert")
        {
            TextBox tbInsert = grv_regionManagement.FooterRow.FindControl("tbInsert") as TextBox;
            sds_regions.InsertParameters["regionName"].DefaultValue = tbInsert.Text;
            sds_regions.Insert();
        } 
```

# mysql - 计算数据库表的总数并组合来自不同表的结果

> ID：10589667
> 
> 赞同：0
> 
> 时间：2012-05-14T19:15:48.823
> 
> 标签：mysql, sql, sql-server-2008

我的数据库中有几个表 -Orders -OrderDetials -customers 等

我需要计算每个表的总行并将其组合在一个输出中，该输出只有每个表的表名和行总和

有没有人可以帮助我一些建议，我一直在努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:44:16.440

对于 SQL Server，这*将比*它更有效`COUNT(*)`- 虽然根据系统上的卷更准确 - 可能会非常消耗性能（如果系统不稳定，则计数将不会准确无论如何，所有工会都会收集他们的信息）：

```
SELECT t.name, SUM(p.rows)
  FROM sys.tables AS t
  INNER JOIN sys.partitions AS p
  ON t.[object_id] = p.[object_id]
  GROUP BY t.name
  ORDER BY t.name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:18:06.880

您可以在 Microsoft SQL Server 2008 中执行以下操作：

```
DECLARE @Tables TABLE
(
   TableName VARCHAR(50),
   RowCount INT
)

INSERT INTO @Tables
SELECT
   'Customers',
   COUNT(*) AS RowCount
FROM
   Customers

INSERT INTO @Tables
SELECT
   'Orders',
   COUNT(*) AS RowCount
FROM
   Orders

etc...

SELECT
   *
FROM
   @Tables 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:21:05.070

我相信这样的事情会奏效：

```
SELECT 'Table 1 Name', count(column_to_sum) from table_1
UNION ALL
SELECT 'Table 2 Name', count(column_to_sum) from table_2
UNION ALL 
SELECT 'Table 3 Name', count(column_to_sum) from table_3
UNION ALL 
SELECT 'Table 4 Name', count(column_to_sum) from table_4 
```

[这是MySQL中](http://dev.mysql.com/doc/refman/5.0/en/union.html)[有关命令的文档`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)的链接，以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:23:18.797

如果您使用 SQL Server 2008* 并且在所有表上都有聚集索引，则可以执行以下查询：

```
select o.name, i.rowcnt
from sys.sysobjects o
join sys.sysindexes i 
    on i.id = o.id and i.indid = 1 -- only clustered indexes
where o.xtype='U' -- only objects of type 'User Table' 
```

* *) 目前尚不清楚，从问题标签来看。*

# google-app-engine - @Embedded &@Id 问题

> ID：10589672
> 
> 赞同：0
> 
> 时间：2012-05-14T19:16:07.420
> 
> 标签：google-app-engine, objectify

我是 Objectify 的新手，我有一些疑问，这在代码中得到了最好的说明

```
public class Uid {
@Id private String name; // e-mail id
    private String oauth2_token; // A token 
... // constructors/setters/getters
};

public class Message {
@Id Long msg_id;
private String message;
@Embedded private Uid uid;
... // constructors/setters/getters
}; 
```

1.  如果我打算保留这些字段，它们可以是**私有的吗？**
2.  类**Uid**有一个标记为**@Id**的字段，然后**Uid**是**@Embedded**到类**Message**中，它有一个单独的**@Id**字段（尽管类型不同。这完全允许吗？如果是，那么是否有警告/例外情况？

谢谢和欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:50:51.663

1) 是的

2) 不，嵌入式类在 objectify 中没有 @Id。您应该在此处阅读文档：[http ://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded)

嵌入实际上将您的嵌入类扁平化到与封闭对象相同的表中。appengine 中的 id 非常具体，用于创建数据存储区密钥。在一个实际上并不代表数据存储中的实体的类上使用 Id 是没有意义的。

objectify 中嵌入对象的想法是，您希望将它们视为 Java 世界中的单独对象，但出于性能目的，您希望对它们进行查询。这种解决了 bigtable 中缺少连接的问题（无论如何，对于一些用例）。您可以查询与封闭类相关的属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T20:59:29.913

1）是的，私有字段将被保留。我建议使用@Indexed、@NotIndexed 或@NotSaved 注释所有字段。

2）我认为没关系……至少，我认为它可以在 Objectify 中工作，但你绝对应该考虑它是否意味着你认为它的意思。也许您打算将一些 Uid 作为普通的独立实体，但有一些嵌入在消息中？请参阅： [http ://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#@Embedded)

GAE Java/JDO 文档也谈到了嵌入式类。它在 JDO 中有点不同，但也许它是有用的背景材料： [https ://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses#Embedded_Classes](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses#Embedded_Classes)

另一种选择是使用类似`Key<Uid>`在 Message 中的东西，但这取决于你用它做什么。

# android - 更改方向时不刷新操作栏 scherlock

> ID：10589676
> 
> 赞同：5
> 
> 时间：2012-05-14T19:16:32.473
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的应用程序中使用 Sherlock 操作栏。我在菜单中使用了“ifRoom|withText”功能。如果我在纵向模式下测试我的代码，我只能看到图标，如果我将方向旋转到横向，我仍然只能看到图标。另一方面，如果我使用横向运行，我可以在纵向和横向上看到文本和图标。这意味着当屏幕旋转时，操作栏不会刷新。我该如何解决？

在菜单中，我有

```
 android:showAsAction="ifRoom|withText" 
```

我也在清单文件中使用了这一行来修复

```
 android:configChanges="keyboardHidden|orientation|screenSize" 
```

但它没有用。我运行我的代码 android 2.3

我还在活动中使用了片段，

```
 FragmentManager fm = getSupportFragmentManager();
    ft = fm.beginTransaction();

    mFragment1 = fm.findFragmentByTag("f1");

    if (mFragment1 == null) {

        mFragment1 = new MenuFragment();
        ft.add(mFragment1, "f1");

    }

    ft.commit(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T20:21:07.890

ActionBarSherlock 不支持处理配置更改。

在 ICS 之前，ActionBarSherlock 不像原生操作栏那样属于装饰视图，因此受到与内容视图相同的限制。通过处理配置更改，您不允许库适应更改，因此会看到不正确的显示或某些部分。

Android 文档也不鼓励处理配置更改。不惜一切代价避免它们，尤其是在使用 ActionBarSherlock 时。

在相关说明中，我仍在尝试为库的未来版本解决此问题，但现在建议避免使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:38:16.163

我认为您将不得不在配置更改时重新创建 ActionBar 菜单

```
invalidateOptionsMenu(); 
```

# android - 从 Google Nexus 读取文件

> ID：10589678
> 
> 赞同：2
> 
> 时间：2012-05-14T19:16:34.823
> 
> 标签：android, rdf

我正在尝试从 google nexus 访问 rdf 文件.....（现在此代码能够从磁盘访问 rdf 文件）......因为 google nexus 没有 sdcard 插槽.....所以我是有问题来定义将从中检索 rdf 文件的路径....

```
 public class andro extends Activity implements View.OnClickListener{
    /** Called when the activity is first created. */

Graph graph;
Load ld;
Mappings map;
QueryProcess exec;
ResultFormat f;
RDFFormat f3;

Button runbtn;
Button clearbtn;
Button test;
Button triple;
EditText et1;
TextView tv1;

@Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.query);

   clearbtn = (Button) findViewById(R.id.clear) ;
   runbtn = (Button) findViewById(R.id.run);
   test = (Button) findViewById(R.id.test);
   triple = (Button) findViewById(R.id.rdf);

   tv1 = (TextView) findViewById(R.id.output); 
   et1 = (EditText) findViewById(R.id.input);

   clearbtn.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           et1.setText("");
           tv1.setText("");

       }
   });
      test.setOnClickListener(new OnClickListener(){
    //runbtn.setOnClickListener(new OnClickListener(){
      public void onClick(View v){

 /*     String op = et1.getText().toString();   
      tv1.setText(op);  
 */
   // graph = Graph.create();    
     graph = Graph.create(true);

      ld = Load.create(graph);
      ld.load("/user/roy/home/DownLoad/foaf.rdf");
     // ld.load("dataset.rdf");
     /* 
      try {
        ld.loadWE("dataset.rdf");
    } catch (LoadException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
     */ 
     // String query = null;
    //  Mappings map = null;

    //   String query1 = "select * where {?x ?p ?y}";

     exec = QueryProcess.create(graph); 
     query1 = et1.getText().toString();
      try {
          map = exec.query(query1);
            } catch (EngineException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // f = ResultFormat.create(map);
        // f3 = TripleFormat.create(map);
         String f2 = ld.toString();
         tv1.setText(ld);   
        //System.out.println(f2);           

         }  
      });

   }  

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}   
 } 
```

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:06:19.167

虽然 Nexus 没有可移动的 sd 卡，但它基本上仍然有一个内部的。因此，对于外部存储，您可以像平常一样对待它，如果您可以移除 SD 卡：

```
String SD_CARD = Environment.getExternalStorageDirectory() + "/my/path"; 
```

# linux - STS - Groovy 安装在哪里？

> ID：10589680
> 
> 赞同：0
> 
> 时间：2012-05-14T19:16:37.037
> 
> 标签：linux, groovy, sts-springsourcetoolsuite

我已经安装了最新版本的 SpringSource Tool Suite 并安装了 Groovy 和 Grails 插件，一切正常。我正在阅读 Groovy 的基础知识并来到安装页面： http: [//groovy.codehaus.org/Installing+Groovy](http://groovy.codehaus.org/Installing+Groovy)

如果我在我的文件系统上进行“查找”，我不会为“groovysh”返回任何内容。这是因为 STS 插件只是安装了源代码而没有“附加”吗？如果我想弄乱“groovysh”，我是否需要单独安装这个 Groovy（然后可能在我的系统上管理两组 Groovy 实例）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:21:40.013

STS 内部的 groovy 并不是一个完整的 groovy 发行版。它包含编译器 jar 及其所有依赖项。如果你想要命令行访问 groovy，你需要从这里单独下载：

```
http://groovy.codehaus.org/Download 
```

如果您仍然感兴趣，STS 中的 groovy jar 位于`springsource/sts-3.0.0.M1/plugins/org.codehaus.groovy_qualifier/lib。

# knockout.js - 淘汰赛 JS 更新颜色

> ID：10589681
> 
> 赞同：2
> 
> 时间：2012-05-14T19:16:52.187
> 
> 标签：knockout.js

我正在使用 Knockout observables 来更新位于表格单元格内的跨度值。当新值与旧值不同时，我需要更改表格单元格的背景颜色。似乎当我订阅 observable 时，我在更新期间无法访问旧值。有没有办法获得旧值？我计划使用带有可观察状态的 css 绑定来更新表格单元格背景。

```
<td data-bind="css: { tempIncreased: tempState() > 0 }">
    <span data-bind="text: temp"></span>
</td> 
```

在视图模型中：

```
 this.temp.subscribe(function (newValue) {
        var old = this.temp();
        if (newValue > old) {
            this.tempState = 1;
        }
        else {
            this.tempState = 0;
        }
    }, this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:27:49.123

Knockout 2.0 增加了订阅 observables 的功能。“beforeChange”主题将为您提供之前的值。

有了这个，你可以扩展 observables 来添加一个订阅，为回调提供旧值和新值。

它可能看起来像：

```
ko.observable.fn.beforeAndAfterSubscribe = function(callback, target) {
    var _oldValue;
    this.subscribe(function(oldValue) {
        _oldValue = oldValue;
    }, null, 'beforeChange');

    this.subscribe(function(newValue) {
        callback.call(target, _oldValue, newValue);
    });
}; 
```

您可以将此函数添加到`ko.subscribable.fn`而不是`ko.observable.fn`能够为计算的和普通的 observables 执行此操作。

你会这样使用：

```
this.temp.beforeAndAfterSubscribe(function (oldValue, newValue) {
    if (newValue > oldValue) {
        this.tempState = 1;
    }
    else {
        this.tempState = 0;
    }
}, this); 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/QDbUk/](http://jsfiddle.net/rniemeyer/QDbUk/)

# hbase - 如何删除hbase表中的一行

> ID：10589682
> 
> 赞同：4
> 
> 时间：2012-05-14T19:16:52.670
> 
> 标签：hbase

有人知道在 hbase 中删除一行的方法是什么吗？特别是，我想从 .META. 中删除一行，这可能会导致 HBase 的 TableNotFoundException 非常令人沮丧的问题。我转储了“.META”的扫描信息。到一个文件，如下所示，

```
scan '.META.'
ROW  COLUMN+CELL
 tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:regioninfo, timestamp=1336311752799, value={NAME => 'tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5.', STARTKEY => '\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001', ENCODED => 7cd0d2205d9ae5fcadf843972ec74ec5,}
 tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:server, timestamp=1337020364027, value=master.node:60020
 tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:serverstartcode, timestamp=1337020364027, value=1337020345458
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:regioninfo, timestamp=1336513006700, value={NAME => 'tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75.', STARTKEY => '\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001', ENCODED => 8d66c109dd1446c326050055d3b9cb75,}
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:server, timestamp=1337020363795, value=slave-node-1:60020
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:serverstartcode, timestamp=1337020363795, value=1337020346292
 tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:regioninfo, timestamp=1336513006695, value={NAME => 'tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08.', STARTKEY => '\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001', ENCODED => 83ff68701e075f0a228247ac44862c08,} tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:server, timestamp=1337020363923, value=slave-node-2:60020
 tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:serverstartcode, timestamp=1337020363923, value=1337020346464
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:regioninfo, timestamp=1336383326110, value={NAME => 'tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b.', STARTKEY => '\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001', ENCODED => ec0c72f24ff89e1b46a592847db36f4b,}
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:server, timestamp=1337020363808, value=slave-node-1:60020
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:serverstartcode, timestamp=1337020363808, value=1337020346292
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:regioninfo, timestamp=1336383326106, value={NAME => 'tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d.', STARTKEY => '\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001', ENDKEY => '', ENCODED => d2df62a47e153781932b33480241068d,}
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:server, timestamp=1337020364031, value=master-node:60020
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:serverstartcode, timestamp=1337020364031, value=1337020345458
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:regioninfo, timestamp=1336081042581, value={NAME => 'tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa.', STARTKEY => '', ENDKEY => '', ENCODED => a30d8074431c6a31c6a0a30e61fedefa,}
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:server, timestamp=1337020363927, value=slave-node-1:60020
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:serverstartcode, timestamp=1337020363927, value=1337020346464
6 row(s) in 0.3930 seconds 
```

首先，我不太明白为什么它说结果中有 6 行。从我的角度来看，有更多的行。我需要去掉 .META 的前三行。

所以我尝试了这个

```
deleteall '.META.', 'tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5.' 
```

hbase shell 说有 0 行受到影响。是的，该命令没有从 .META 中删除任何行。

任何人都可以告诉我在这种情况下删除一行的正确命令是什么？

我知道连续发布两个问题是不好的，但我已经用尽了谷歌，找不到可以帮助我的东西。提前抱歉！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T06:31:55.143

您也可以尝试使用以下命令截断表格

截断“表名”。

并从头开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T18:13:30.797

您有 6 行，如下所示：

```
ROW 1: tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:regioninfo, timestamp=1336311752799, value={NAME => 'tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5.', STARTKEY => '\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001', ENCODED => 7cd0d2205d9ae5fcadf843972ec74ec5,}
     tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:server, timestamp=1337020364027, value=master.node:60020
     tsdb,\x00\x00\x0FO\xA2\xF1\xD0\x00\x00\x01\x00\x00\x0E\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x13\x00\x00\x05\x00\x001,1336311752340.7cd0d2205d9ae5fcadf843972ec74ec5\. column=info:serverstartcode, timestamp=1337020364027, value=1337020345458

ROW 2:
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:regioninfo, timestamp=1336513006700, value={NAME => 'tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75.', STARTKEY => '\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001', ENCODED => 8d66c109dd1446c326050055d3b9cb75,}
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:server, timestamp=1337020363795, value=slave-node-1:60020
 tsdb,\x00\x00\x10O\xA3\x8C\x80\x00\x00\x01\x00\x00\x0B\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1A\x00\x00\x05\x00\x001,1336513006109.8d66c109dd1446c326050055d3b9cb75\. column=info:serverstartcode, timestamp=1337020363795, value=1337020346292

ROW: 3
 tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:regioninfo, timestamp=1336513006695, value={NAME => 'tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08.', STARTKEY => '\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001', ENCODED => 83ff68701e075f0a228247ac44862c08,} tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:server, timestamp=1337020363923, value=slave-node-2:60020
 tsdb,\x00\x00\x10O\xA6\xBC \x00\x00\x01\x00\x00\x18\x00\x00\x02\x00\x00\x12\x00\x00\x03\x00\x00\x17\x00\x00\x05\x00\x001,1336513006109.83ff68701e075f0a228247ac44862c08\. column=info:serverstartcode, timestamp=1337020363923, value=1337020346464

ROW: 4
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:regioninfo, timestamp=1336383326110, value={NAME => 'tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b.', STARTKEY => '\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001', ENDKEY => '\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001', ENCODED => ec0c72f24ff89e1b46a592847db36f4b,}
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:server, timestamp=1337020363808, value=slave-node-1:60020
 tsdb,\x00\x00\x11O\xA4\xCF\xF0\x00\x00\x01\x00\x00\x06\x00\x00\x02\x00\x00\x1C\x00\x00\x03\x00\x00\x1D\x00\x00\x05\x00\x001,1336383325807.ec0c72f24ff89e1b46a592847db36f4b. column=info:serverstartcode, timestamp=1337020363808, value=1337020346292

ROW: 5
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:regioninfo, timestamp=1336383326106, value={NAME => 'tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d.', STARTKEY => '\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001', ENDKEY => '', ENCODED => d2df62a47e153781932b33480241068d,}
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:server, timestamp=1337020364031, value=master-node:60020
 tsdb,\x00\x00\x12O\xA3\xA8\xA0\x00\x00\x01\x00\x00\x07\x00\x00\x02\x00\x00\x19\x00\x00\x03\x00\x00\x1B\x00\x00\x05\x00\x001,1336383325807.d2df62a47e153781932b33480241068d. column=info:serverstartcode, timestamp=1337020364031, value=1337020345458

ROW: 6
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:regioninfo, timestamp=1336081042581, value={NAME => 'tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa.', STARTKEY => '', ENDKEY => '', ENCODED => a30d8074431c6a31c6a0a30e61fedefa,}
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:server, timestamp=1337020363927, value=slave-node-1:60020
 tsdb-uid,,1336081042372.a30d8074431c6a31c6a0a30e61fedefa. column=info:serverstartcode, timestamp=1337020363927, value=1337020346464 
```

我正在运行 v0.94.5，它似乎支持“删除”命令。

```
delete 'TABLE_NAME', 'ROW_KEY', 'COLUMN_NAME', TIMETAMP_VALUE_FOR_CELL 
```

应该做删除条目的技巧，因为您有指向要删除的所有特定单元格的指针。

警告：.META。表包含有关您的区域服务器以及表的布局方式的信息。编辑此文件时应非常小心！除非您非常确定这是您需要的，否则我不建议您修改此表。

来源：http: [//blog.safaribooksonline.com/2012/11/16/tip-2-hbase-meta-layout/](http://blog.safaribooksonline.com/2012/11/16/tip-2-hbase-meta-layout/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T01:11:24.197

如果你不深入了解 HBase，你想避免编辑 .META。直接表。根据您的描述，听起来您真的想从头开始，删除现有表“tsdb”并重新创建它。最好的方法是从外壳：

```
disable 'tsdb'
drop 'tsdb' 
```

然后重新从头开始。

HBase 书很好地回答了如何删除行的更一般的问题。您需要一个表名和一个行键。当你扫描一个表时，你得到的不仅仅是行键。

# c - MISRA 违反规则 10.1 和枚举

> ID：10589684
> 
> 赞同：0
> 
> 时间：2012-05-14T19:17:10.027
> 
> 标签：c, enums, misra

首先，这类似于：[整数类型如何隐式转换？](https://stackoverflow.com/questions/10582523/how-are-integer-types-converted-implicitly)但有不同的 MISRA 警告。

编译器不会生成 MISRA 错误，但静态分析工具会生成。我正在处理工具制造商的票。

鉴于：

```
#include <stdio.h>
enum Color {RED, VIOLET, BLUE, GREEN, YELLOW, ORANGE};

int main(void)
{
  enum Color my_color;
  my_color = BLUE;
  if (my_color == YELLOW)  // Generates MISRA violation, see below.
  {
     printf("Color is yellow.\n");
  }
  else
  {
     printf("Color is not yellow.\n");
  }
  return 0;
} 
```

`if`静态分析工具正在为语句生成 MISRA 违规：

```
MISRA-2004 Rule 10.1 violation: implicitly changing the signedness of an expression.
Converting "4", with underlying type "char" (8 bits, signed),
to type "unsigned int" (32 bits, unsigned) with different signedness. 
```

编译器是否正确（未识别缺陷）或静态分析工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T19:18:27.890

根据 C 语言规范，表达式的类型：

```
typedef enum Colors {RED, VIOLET, BLUE, GREEN, YELLOW, ORANGE} Colors_t; 
```

是一个`signed int`。

同样根据语言，枚举项的值是可以包含整个枚举的最小单位。所以在上面的枚举中，`BLUE`有 type `signed char`。

当变量 与`Colors_t`进行比较时，静态分析工具会报告 MISRA 违规`BLUE`：

```
Colors_t my_color;
if (my_color == BLUE) // This generates a MISRA violation. 
```

将违规`signed int`与 进行比较`signed char`。

此外，枚举项可以与其他枚举类型混合而不会出错，*因为枚举不是唯一类型*：

```
typedef enum Tree_Species {REDWOOD, CYPRUS, PALM, OAK, JUNIPER, SEGUARO} Tree_Species_t;
Tree_Species_t my_tree;
my_tree = BLUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:02:38.433

似乎有人（您的编译器或静态工具）认为您的 enum 与*int*的大小和/或签名不同。

我的 Green Hills 编译器有一个选项 --short-enum（对 Enum 使用可能的最小类型），它将为上面的示例选择一个*char*类型。你的编译器有这样的选择吗？是否启用？编译器是否默认枚举为“非标准”值？

根据我的经验，默认情况下，静态工具默认情况下很好地遵循语言规范，这意味着它应该期望枚举为 int 大小。（请参阅此链接以供参考：[C 中枚举的大小是多少？](https://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c)）。由于大多数静态工具会窥探您的编译器命令行使用情况，因此您的编译时选项可能会让静态分析器相信您的枚举小于*ints*。

我建议彻底检查您的编译器和静态分析器文档以解决冲突。密切关注您的构建过程（编译时选项、默认值等）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T21:16:38.787

很可能是声明的结果`my_color`

```
enum Color my_color; 
```

尝试从中删除“枚举”：

```
Color my_color; 
```

静态分析器可能认为您声明了一个单独的枚举，因此违反了 10.1。由于它是一种不同的类型，MISRA 规则禁止将一种类型分配给另一种类型。

# c++ - Flex/Bison：糟糕的代币管理？

> ID：10589687
> 
> 赞同：5
> 
> 时间：2012-05-14T19:17:13.103
> 
> 标签：c++, parsing, bison, lex, flex-lexer

我的词法分析器和解析器有问题。

首先，在我的词法分析器中，我有这样一行：

```
"if"    beginScope(stOTHER); return IF; 
```

在我的解析器中：

```
stmt: IF '(' exp ')' stmts
...
stmts: stmt
       | '{' stmt_list '}'
       | '{' '}' 
```

在这样的代码中：

```
if(sth) {
    dosth;
}

if(other) {
    doothersth;
} 
```

beginScope 将被调用两次，因为（我认为）Bison 不知道`if`语句的结尾在哪里，所以当它找到`IF`令牌时，他将其作为`if`语句的结尾，并再次读取它以开始另一种`if`说法...

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:16:04.893

正如 Zack 在评论中提到的，您应该`beginScope`从解析器操作中调用：

```
stmt: IF { beginScope(stOTHER); } '(' exp ')' stmts 
```

# asp.net - 具有相同 URL 的多个节点

> ID：10589690
> 
> 赞同：3
> 
> 时间：2012-05-14T19:17:31.600
> 
> 标签：asp.net, visual-studio

为了构建我的网站，我选择使用 Visual Studio 2010 环境。所以，我有工厂，互联网冲浪者可以通过两种不同的方式去那里。一种方法是从地图中选择地理名称，这会将他驱动到我目录树中某个位置的 aspx 文件中。第二种方法是从产品页面找到工厂。在第二种方式中，我在我的代码中使用“站点地图”，并在我的 web.config 文件中使用适当的条目；

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
        <providers>
            <add name="XmlSiteMapProvider" description="Default SiteMap provider" type="System.Web.XmlSiteMapProvider" siteMapFile="Web.sitemap" securityTrimmingEnabled="true"/>
            <add name="ProductsSiteMapProvider" description="Products SiteMap provider" type="System.Web.XmlSiteMapProvider" siteMapFile="Products.sitemap" securityTrimmingEnabled="true"/>
        </providers> 
```

在我的 products.sitemap 中，我正在写以下条目；

```
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
<siteMapNode url="~/pages/products.aspx" title="Products" description="Greek Olive Products">
    <siteMapNode url="~/pages/products/oevoo/oevoo.aspx" title="Organic Extra Virgin Olive Oil" description="Find the Cultivation areas for this commodity" >
        <siteMapNode url="~/pages/products/oevoo/agioideka.aspx" title="Flathiakes" description="Cultivation Area Flathiakes, Herakleion Crete" />
        <siteMapNode url="~/pages/products/oevoo/handrinos.aspx" title="Handrinos" description="Cultivation Area Handrinos, village mountainous Messinia south-west Peloponnese " />
</siteMapNode>
    <siteMapNode url="~/pages/products/evoo/evoo.aspx" title="Extra Virgin Olive Oil" description="Find the Cultivation areas for this commodity" >
        <siteMapNode url="~/pages/districts/areas/agioideka.aspx" title="Flathiakes" description="Cultivation Area Flathiakes, Herakleion Crete" />
        <siteMapNode url="~/pages/districts/areas/acova.aspx" title="Acova" description="Standardization factory in Argolida east Peloponnese" />
        <siteMapNode url="~/pages/districts/areas/trikorfo.aspx" title="Trikorfo" description="Cultivation Area Trikorfo, mountainous area in south Peloponnese" />
        <siteMapNode url="~/pages/districts/areas/handrinos.aspx" title="Handrinos" description="Cultivation Area Handrinos, village mountainous Messinia south-west Peloponnese " />
    </siteMapNode>
    <siteMapNode url="~/pages/products/voo/voo.aspx" title="Virgin Olive Oil" description="Find the Cultivation areas for this commodity" >
  <siteMapNode url="~/pages/districts/areas/acova.aspx" title="Acova" description="Standardization factory in Argolida east Peloponnese" />
  <siteMapNode url="~/pages/districts/areas/trikorfo.aspx" title="Trikorfo" description="Cultivation Area Trikorfo, mountainous Messinia south Peloponnese" />
    </siteMapNode>
    <siteMapNode url="~/pages/products/to/to.aspx" title="Greek Table Olives" description="Find the Cultivation areas for this commodity" >
        <siteMapNode url="~/pages/districts/areas/trikorfo.aspx" title="Trikorfo" description="Cultivation Area Trikorfo, mountainous Messinia south Peloponnese" />

    </siteMapNode> 
</siteMapNode> 
```

最后，当我尝试（本地）运行我的网站时，它给了我以下错误；

> 找到具有相同 URL '/WebSite2/pages/districts/areas/acova.aspx' 的多个节点。XmlSiteMapProvider 要求站点地图节点具有唯一的 URL。

当然，我看到站点地图提供者不接受多个指向同一位置的 url。我的问题是如何在 products.sitemap 中使用多个条目？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T19:45:40.173

是的，你可以，微软建议对 URL 进行一些更正，例如添加 # 或提供参数：

```
~/pages/districts/areas/acova.aspx
~/pages/districts/areas/acova.aspx#
~/pages/districts/areas/acova.aspx?id=1 
```

都是不同的网址，但相同的页面

# r - 使用多个度量列将数据从长格式转换为宽格式

> ID：10589693
> 
> 赞同：45
> 
> 时间：2012-05-14T18:33:14.150
> 
> 标签：r, dataframe, plyr

当我想要携带多个度量变量时，我无法找出将数据从长格式转换为宽格式的最优雅和灵活的方法。

例如，这是一个长格式的简单数据框。 `ID`是主题，`TIME`是时间变量，并且`X`是在 处`Y`进行的测量：`ID``TIME`

```
> my.df <- data.frame(ID=rep(c("A","B","C"), 5), TIME=rep(1:5, each=3), X=1:15, Y=16:30)
> my.df

   ID TIME  X  Y
1   A    1  1 16
2   B    1  2 17
3   C    1  3 18
4   A    2  4 19
5   B    2  5 20
6   C    2  6 21
7   A    3  7 22
8   B    3  8 23
9   C    3  9 24
10  A    4 10 25
11  B    4 11 26
12  C    4 12 27
13  A    5 13 28
14  B    5 14 29
15  C    5 15 30 
```

如果我只是想将 的值`TIME`转换为包含 include 的列标题`X`，我知道我可以`cast()`从`reshape`包（或`dcast()`from `reshape2`）中使用：

```
> cast(my.df, ID ~ TIME, value="X")
  ID 1 2 3  4  5
1  A 1 4 7 10 13
2  B 2 5 8 11 14
3  C 3 6 9 12 15 
```

但我真正想做的也是带来`Y`另一个度量变量，并让列名反映度量变量名称和时间值：

```
 ID X_1 X_2 X_3  X_4 X_5 Y_1 Y_2 Y_3 Y_4 Y_5
1  A   1   4   7   10  13  16  19  22  25  28
2  B   2   5   8   11  14  17  20  23  26  29
3  C   3   6   9   12  15  18  21  24  27  30 
```

（FWIW，我真的不在乎是否所有的`X`'s 都先跟在`Y`'s 之后，或者它们是否交错为`X_1`, `Y_1`, `X_2`,`Y_2`等）

*我可以通过对长数据进行两次转换*并合并结果来接近这一点，尽管列名需要一些工作，如果我需要在`X`and之外添加第三个或第四个变量，我需要对其进行调整`Y`：

```
merge(
cast(my.df, ID ~ TIME, value="X"),
cast(my.df, ID ~ TIME, value="Y"),
by="ID", suffixes=c("_X","_Y")
) 
```

似乎`reshape2`和/或`plyr`应该能够比我的尝试更优雅地执行此操作，以及更干净地处理多个度量变量。类似的东西`cast(my.df, ID ~ TIME, value=c("X","Y"))`，这是无效的。但我一直无法弄清楚。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T19:17:43.563

为了像你想要的那样处理多个变量，你需要`melt`在转换之前拥有你拥有的数据。

```
library("reshape2")

dcast(melt(my.df, id.vars=c("ID", "TIME")), ID~variable+TIME) 
```

这使

```
 ID X_1 X_2 X_3 X_4 X_5 Y_1 Y_2 Y_3 Y_4 Y_5
1  A   1   4   7  10  13  16  19  22  25  28
2  B   2   5   8  11  14  17  20  23  26  29
3  C   3   6   9  12  15  18  21  24  27  30 
```

* * *

根据评论编辑：

数据框

```
num.id = 10 
num.time=10 
my.df <- data.frame(ID=rep(LETTERS[1:num.id], num.time), 
                    TIME=rep(1:num.time, each=num.id), 
                    X=1:(num.id*num.time), 
                    Y=(num.id*num.time)+1:(2*length(1:(num.id*num.time)))) 
```

给出不同的结果（所有条目都是 2），因为`ID`/`TIME`组合不表示唯一的行。实际上，每个`ID`/`TIME`组合都有两行。`reshape2`假设每个可能的变量组合都有一个值，如果有多个条目，将应用汇总函数来创建单个变量。这就是为什么有警告

```
Aggregation function missing: defaulting to length 
```

如果您添加另一个打破冗余的变量，您可以获得一些有用的东西。

```
my.df$cycle <- rep(1:2, each=num.id*num.time)
dcast(melt(my.df, id.vars=c("cycle", "ID", "TIME")), cycle+ID~variable+TIME) 
```

这是因为`cycle`//现在唯一地定义了`ID`.`time``my.df`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-14T19:18:55.373

```
 reshape(my.df,
           idvar = "ID",
           timevar = "TIME",
           direction = "wide") 
```

给

```
 ID X.1 Y.1 X.2 Y.2 X.3 Y.3 X.4 Y.4 X.5 Y.5
1  A   1  16   4  19   7  22  10  25  13  28
2  B   2  17   5  20   8  23  11  26  14  29
3  C   3  18   6  21   9  24  12  27  15  30 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-19T15:37:32.253

使用`data.table_1.9.5`，这可以在没有 的情况下完成，`melt`因为它可以处理多个`value.var`列。您可以从安装它[`here`](https://github.com/Rdatatable/data.table/wiki/Installation)

```
 library(data.table)
 dcast(setDT(my.df), ID~TIME, value.var=c('X', 'Y'))
 #   ID 1_X 2_X 3_X 4_X 5_X 1_Y 2_Y 3_Y 4_Y 5_Y
 #1:  A   1   4   7  10  13  16  19  22  25  28
 #2:  B   2   5   8  11  14  17  20  23  26  29
 #3:  C   3   6   9  12  15  18  21  24  27  30 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-13T16:42:05.367

*注意 - 2019 年 9 月*：在[tidyr](https://tidyr.tidyverse.org/index.html)中，`gather()`+`spread()`方法（在此答案中描述）或多或少被`pivot_wider()`方法（在 ` [this newer tidyr answer](https://stackoverflow.com/a/57965244/1082435)中描述）取代。有关过渡的当前信息，请参阅[旋转小插图](https://tidyr.tidyverse.org/articles/pivot.html)。

* * *

这是[tidyr](https://CRAN.R-project.org/package=tidyr)包的解决方案，它基本上取代了[reshape](https://CRAN.R-project.org/package=reshape)和[reshape2](https://CRAN.R-project.org/package=reshape2)。与这两个包一样，它的策略是首先使数据集更长，然后更宽。

```
library(magrittr); requireNamespace("tidyr"); requireNamespace("dplyr")
my.df %>%
  tidyr::gather(key=variable, value=value, c(X, Y)) %>%   # Make it even longer.
  dplyr::mutate(                                          # Create the spread key.
    time_by_variable   = paste0(variable, "_", TIME)
  ) %>%
  dplyr::select(ID, time_by_variable, value) %>%          # Retain these three.
  tidyr::spread(key=time_by_variable, value=value)        # Spread/widen. 
```

调用后[`tidyr::gather()`](https://tidyr.tidyverse.org/reference/gather.html)，中间数据集为：

```
ID TIME variable value
1   A    1        X     1
2   B    1        X     2
3   C    1        X     3
...
28  A    5        Y    28
29  B    5        Y    29
30  C    5        Y    30 
```

最终结果是：

```
 ID X_1 X_2 X_3 X_4 X_5 Y_1 Y_2 Y_3 Y_4 Y_5
1  A   1   4   7  10  13  16  19  22  25  28
2  B   2   5   8  11  14  17  20  23  26  29
3  C   3   6   9  12  15  18  21  24  27  30 
```

[`tidyr::unite()`](https://tidyr.tidyverse.org/reference/unite.html)是@JWilliman 建议的替代方案。当参数为 true（这是默认值）时，这在功能上等同于上面的[`dplyr::mutate()`](https://dplyr.tidyverse.org/reference/mutate.html)and[`dplyr::select()`](https://dplyr.tidyverse.org/reference/select.html)组合。`remove`

如果您不习惯这种类型的操作，这`tidyr::unite()`可能是一个小障碍，因为它是您必须学习和记住的另一个功能。但是，它的好处包括 (a) 更简洁的代码（*即*，四行替换为一）和 (b) 重复变量名的位置更少（*即*，您不必在`dplyr::select()`子句中重复/修改变量）。

```
my.df %>%
  tidyr::gather(key=variable, value=value, c(X, Y)) %>%           # Make it even longer.
  tidyr::unite("time_by_variable", variable, TIME, remove=T) %>%  # Create the spread key `time_by_variable` while simultaneously dropping `variable` and `TIME`.
  tidyr::spread(key=time_by_variable, value=value)                # Spread/widen. 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-16T22:44:31.467

该[`pivot_wider()`](https://tidyr.tidyverse.org/reference/pivot_wider.html)功能是[tidyr](https://tidyr.tidyverse.org/index.html)的第二代方法（在 tidyr 1.0.0 中发布）。

```
library(magrittr); requireNamespace("tidyr");

my.df %>%
  tidyr::pivot_wider(
    names_from  = c(TIME), # Can accommodate more variables, if needed.
    values_from = c(X, Y)
  ) 
```

**结果**：

```
# A tibble: 3 x 11
  ID      X_1   X_2   X_3   X_4   X_5   Y_1   Y_2   Y_3   Y_4   Y_5
  <fct> <int> <int> <int> <int> <int> <int> <int> <int> <int> <int>
1 A         1     4     7    10    13    16    19    22    25    28
2 B         2     5     8    11    14    17    20    23    26    29
3 C         3     6     9    12    15    18    21    24    27    30 
```

这可能比[以前的 tidyr 方法](https://stackoverflow.com/a/41126250/1082435) （使用[`gather()`](https://tidyr.tidyverse.org/reference/gather.html)和的组合[`spread()`](https://tidyr.tidyverse.org/reference/spread.html)）更可取。

[旋转小插图](https://tidyr.tidyverse.org/articles/pivot.html)中描述了更多功能。此示例特别简洁，因为您所需的规范与 和 的默认值相`id_cols`匹配`names_sep`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-05T00:38:03.870

有点晚了，但以下解决方案也可能有效。

```
# Input
my.df <- data.frame(ID=rep(c("A","B","C"), 5), TIME=rep(1:5, each=3), X=1:15, Y=16:30)

# Conversion into wide format
my.df %>%
  pivot_wider(ID, c(TIME), 
              values_from = c(X, Y),
              names_glue = '{.value}_{TIME}') 
```

`names_glue`1-使用此解决方案，您可以通过在选项中将它们设置为来调整列名

```
names_glue = '{.value}_{TIME}' or
names_glue = '{TIME}_{.value}' 
```

2-同样，使用此解决方案，您可以加入两个或多个字段，例如，`c(TIME, DAY, MONTH)`然后相应地更新`names_glue`选项：

```
names_glue = '{TIME}_{DAY}_{MONTH}_{.value}' 
```

# javascript - JS/jQuery 代码流 - 结合动画和点击功能

> ID：10589696
> 
> 赞同：0
> 
> 时间：2012-05-14T19:18:06.590
> 
> 标签：javascript, jquery

我正在尝试实现一个具有简单 div 的页面，当指针位于其外部时，它会在悬停时淡入具有不同内容的不同 div。

我希望简单的 div 不是链接，但不同的 div 是链接（整个 div）。

以下 jsfiddle 描述并演示了我遇到的问题：http: [//jsfiddle.net/neigere/3sP3N/](http://jsfiddle.net/neigere/3sP3N/)

你可以在这里看到这个错误：http: [//tedneiger.com](http://tedneiger.com)

这似乎是一个代码序列执行问题，可以通过移动我调用 click 函数的位置来解决，但我尝试了几种变体，但未能成功解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:52:15.270

问题是点击被`professional`div捕获，并没有到达`professional-detail`div。

[http://jsfiddle.net/3sP3N/46/](http://jsfiddle.net/3sP3N/46/)

在这个小提琴中，我在`professional`div 完全消失后隐藏了它。它现在似乎运作良好。我需要设置`position`为`absolute`，因为没有它，为什么详细的 div 也会消失。我`margin-top:`在 mousein 类的 css 中找到了一个 ...，我不明白为什么，我将其删除。

# ruby-on-rails-3 - Rails 3 没有加载宝石

> ID：10589702
> 
> 赞同：1
> 
> 时间：2012-05-14T19:18:29.160
> 
> 标签：ruby-on-rails-3

Rails 似乎没有加载 Kaminari gem，因为`Uninitialized constant`在启动开发服务器时出现错误：

```
/home/my_app/config/initializers/kaminari_config.rb:1:in `<top (required)>': uninitialized constant Kaminari (NameError)
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/engine.rb:587:in `each'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/engine.rb:587:in `block in <class:Engine>'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `instance_exec'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `run'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/initializable.rb:55:in `block in run_initializers'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `each'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `run_initializers'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/application.rb:136:in `initialize!'
from /home/ramses/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /home/my_app/config/environment.rb:5:in `<top (required)>' 
```

但是，我将它包含在 Gemfile 中，并且运行`gem list`显示它也已安装。有任何想法吗？如何追踪此`Uninitialized constant`错误？

谢谢！

我的 Gemfile：来源“https://rubygems.org”

```
gem 'rails', '3.2.1'

gem 'jquery-rails'
gem 'blueprint-rails'
gem 'mysql2'
gem 'kaminari'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem "therubyracer", :require => 'v8' 
  gem 'uglifier', '>= 1.0.3'
end

group :development do
  gem 'rvm-capistrano'
  gem 'capistrano'  
end 
```

我的`gem list`

```
$ gem list
actionmailer (3.2.1)
actionpack (3.2.2, 3.2.1)
activemodel (3.2.2, 3.2.1)
activerecord (3.2.1)
activeresource (3.2.1)
activesupport (3.2.2, 3.2.1)
arel (3.0.0)
blueprint-rails (0.1.2)
builder (3.0.0)
bundler (1.0.22 ruby, 1.0.21)
capistrano (2.12.0)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.2.0)
daemon_controller (1.0.0)
erubis (2.7.0)
execjs (1.3.0)
fastthread (1.0.7)
highline (1.6.12)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.1)
jquery-rails (2.0.0)
jruby-jars (1.6.7)
jruby-rack (1.1.4)
json (1.6.5)
kaminari (0.13.0)
libv8 (3.3.10.4 x86-linux)
mail (2.4.1)
mime-types (1.17.2)
multi_json (1.0.4)
mysql2 (0.3.11)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.3.0)
net-ssh-gateway (1.1.0)
passenger (3.0.11)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.1)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.1)
railties (3.2.1)
rake (0.9.2.2)
rdoc (3.12)
rubyzip (0.9.6.1)
rvm (1.11.3.3)
rvm-capistrano (1.1.0)
sass (3.1.14)
sass-rails (3.2.4)
sprockets (2.1.2)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.31)
uglifier (1.2.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:33:13.317

我可以看到您正在[使用 RVM 来管理不同的 ruby​​ 版本和不同的 gemset](https://rvm.io/)（特定于每个应用程序的 gem 集）。那太棒了。

但是您在`gem`rvm 之外运行命令——这意味着它不一定显示 rvm 为您正在使用的特定 ruby​​ 版本设置的内容。也可能是 kaminari 在您的计算机上，但尚未包含在该应用程序的捆绑包中。

可能只是因为您切换了 RVM rubies 而没有运行 bundle。

您可以`bundle install`从项目根目录运行并验证是否为该项目的捆绑包安装了 Kaminari 吗？

# javascript - jquery ajax 无法循环通过找到的数据

> ID：10589703
> 
> 赞同：2
> 
> 时间：2012-05-14T19:18:32.167
> 
> 标签：javascript, jquery, ajax, each

我想循环通过一个加载了 ajax 的文件，但它不会循环，我已经尝试了几件事，但我无法让它工作。

// jQuery

```
$.ajax({
    url: 'file.html',
    type: "GET",
    dataType: "html",
    success: function(data) {

        $(data).find('div').each(function(i){
            alert('found')
        });

    },
    error: function(){
        alert('oeps...')
    }                           
}); 
```

// 文件.html

```
<div>
// content goes here
</div>

<div>
// content goes here
</div>

<div>
// content goes here
</div>

...

... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:29:25.470

您需要更改`.find`为`.filter`. 这是因为`.find`搜索所有元素的~~子~~后代，但是由于您的html文件只是`<div>`s，因此您需要使用`.filter`来查找它们。

演示：http: [//jsfiddle.net/zuPVp/](http://jsfiddle.net/zuPVp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:20:51.810

您不需要指定`html`为数据类型，它不是必需的。

所以，**删除**以下行。

```
dataType: "html" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:34:08.660

不起作用的原因是[.find](http://api.jquery.com/find/)在数据中查找后代，所有这些 div 都在根目录下。

您可以创建一个空 div，然后将该 div 的 html 设置为您的数据。这将确保 find 有效，因为 div 将成为后代。

```
$.ajax({
    url: 'file.html',
    type: "GET"
    success: function(data) {
        $('<div/>').html(data).each(function(index, item) {
            console.log(item);
        });
    },
    error: function(){
        console.log('error')
    }                           
}); 
```

或者你可以使用过滤器。

```
$.ajax({
        url: 'file.html',
        type: "GET"
        success: function(data) {
            $(data).filter('div').each(function(index, item) {
                console.log(item);
            });
        },
        error: function(){
            console.log('error')
        }                           
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:21:40.650

很难知道你在做什么，但我猜是这样的：

```
$.ajax({
    url: 'file.html',
    type: "GET"
    success: function(data) {
        $.each($('div', data.outerHTML), function(index, item) {
            console.log(item);
        });
    },
    error: function(){
        console.log('error')
    }                           
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T19:36:56.557

在这种情况下，`.find()`它不起作用，因为您正在搜索的 HTML 不包含任何子`div`节点。要解决此问题，首先将项目附加到某个容器，然后使用`.find()`.

[http://jsfiddle.net/jbabey/hvkw9/1/](http://jsfiddle.net/jbabey/hvkw9/1/)

```
var html = $('<div>first div</div><br /><div>second div</div>');

// 0, no child divs in html
console.log(html.find('div').length);
// 2, now the divs in html are children of an intermediate div
console.log($('<div>').append(html).find('div').length); 
```

# php - php GD 为图像添加填充

> ID：10589704
> 
> 赞同：15
> 
> 时间：2012-05-14T19:18:36.800
> 
> 标签：php, image-processing, gd

我在网上找到了一些关于图像处理的 PHP+GD 的东西，但似乎没有一个能给我我想要的东西。

我有人上传了任何尺寸的图像，我编写的脚本将图像的大小调整为不超过 200px 宽 x 200px 高，同时保持纵横比。例如，最终图像可能是 150 像素 x 200 像素。然后我想要做的是进一步操作图像并在图像周围添加一个垫子，将其填充到 200 像素 x 200 像素，同时不影响原始图像。例如：

![无填充图像 143x200](../Images/86e82777873642f0816da029cc7fd105.png)

![填充图像 200x200](../Images/02e44007d412fbcac09e3e6bdbe50b54.png)

我必须调整图像大小的代码在这里，我尝试了一些东西，但在实现添加填充的辅助过程时肯定存在问题。

```
list($imagewidth, $imageheight, $imageType) = getimagesize($image);
$imageType = image_type_to_mime_type($imageType);
$newImageWidth = ceil($width * $scale);
$newImageHeight = ceil($height * $scale);
$newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
switch($imageType) {
    case "image/gif":
        $source=imagecreatefromgif($image); 
        break;
    case "image/pjpeg":
    case "image/jpeg":
    case "image/jpg":
        $source=imagecreatefromjpeg($image); 
        break;
    case "image/png":
    case "image/x-png":
        $source=imagecreatefrompng($image); 
        break;
}
imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,$width,$height);
imagejpeg($newImage,$image,80);
chmod($image, 0777); 
```

我想我需要在通话`imagecopy()`后立即使用。`imagecopyresampled()`这样图像已经是我想要的大小了，我只需要创建一个正好 200 x 200 的图像并将 $newImage 粘贴到它的中心（垂直和水平）。我是否需要创建一个全新的图像并将两者合并，或者有没有办法只填充我已经创建的图像（`$newImage`）？在此先感谢，我发现的所有教程都让我无处可去，而我在 SO 上找到的唯一适用的教程是 android :(

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T00:19:32.180

1.  打开原图
2.  创建一个新的空白图像。
3.  用您想要的背景颜色填充新图像
4.  使用 ImageCopyResampled 将原始图像调整大小并复制到新图像的中心
5.  保存新图像

除了你的 switch 语句，你还可以使用

```
$img = imagecreatefromstring( file_get_contents ("path/to/image") ); 
```

这将自动检测图像类型（如果您的安装支持该图像类型）

更新了代码示例

```
$orig_filename = 'c:\temp\380x253.jpg';
$new_filename = 'c:\temp\test.jpg';

list($orig_w, $orig_h) = getimagesize($orig_filename);

$orig_img = imagecreatefromstring(file_get_contents($orig_filename));

$output_w = 200;
$output_h = 200;

// determine scale based on the longest edge
if ($orig_h > $orig_w) {
    $scale = $output_h/$orig_h;
} else {
    $scale = $output_w/$orig_w;
}

    // calc new image dimensions
$new_w =  $orig_w * $scale;
$new_h =  $orig_h * $scale;

echo "Scale: $scale<br />";
echo "New W: $new_w<br />";
echo "New H: $new_h<br />";

// determine offset coords so that new image is centered
$offset_x = ($output_w - $new_w) / 2;
$offset_y = ($output_h - $new_h) / 2;

    // create new image and fill with background colour
$new_img = imagecreatetruecolor($output_w, $output_h);
$bgcolor = imagecolorallocate($new_img, 255, 0, 0); // red
imagefill($new_img, 0, 0, $bgcolor); // fill background colour

    // copy and resize original image into center of new image
imagecopyresampled($new_img, $orig_img, $offset_x, $offset_y, 0, 0, $new_w, $new_h, $orig_w, $orig_h);

    //save it
imagejpeg($new_img, $new_filename, 80); 
```

# mysql - Rails 中的歧义子句

> ID：10589706
> 
> 赞同：6
> 
> 时间：2012-05-14T19:18:38.730
> 
> 标签：mysql, ruby-on-rails

我正在像这样进行多态连接：

```
Object.joins(:customer).includes("jobs.name").merge(@customer.children.scoped).where("name LIKE :name OR job_number LIKE :name", {:name => "JOB" } ) 
```

它正在返回：

```
Mysql2::Error: Column 'name' in where clause is ambiguous 
```

任何人都知道如何使这*不*模棱两可？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:24:52.323

它不喜欢这个`name LIKE`部分。

看起来`name`每个表中都有一个名为的列。在特定的前面`name`加上您希望该值来自的表的名称。

这看起来应该是

```
.where("jobs.name LIKE :name OR job_number LIKE :name", {:name => "JOB" } ) 
```

或者

```
.where("customers.name LIKE :name OR job_number LIKE :name", {:name => "JOB" } ) 
```

我发现一般来说，解决这些问题的最佳方法是查看生成的 sql 并确定问题出在哪里。您可以在日志中找到该 sql。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:22:52.583

name 必须是两个作业中的属性（和列），并且无论其他对象（表）是什么，因此它需要完全限定。

改变

```
"name like..." 
```

到

```
"tablename.name like..." 
```

就像你有资格一样

```
"jobs.name" 
```

# ios - 在 iOS 上解码编码为 H.264 的单帧

> ID：10589708
> 
> 赞同：4
> 
> 时间：2012-05-14T19:18:47.190
> 
> 标签：ios, h.264

我正在将 PC 上生成的单个图像编码为 H.264，通过网络将其发送到 iPad，我想对其进行解码。iPad 端的循环将是：

1.  从网络抓取框架
2.  解码它。
3.  显示它。

但是，我找不到给定编码帧的单个缓冲区的 API，我可以解码为原始图像。我想利用 iPad 上的硬件解码。

我最后的计划是创建一个内存映射文件，将该单帧写入该文件并将该文件用作 MPMoviePlayerController 的输入。这是一个非常hacky的解决方案。

有人可以建议我如何获取编码的内存缓冲区并使用硬件将其解码到另一个内存缓冲区吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:39:23.327

这听起来像是更适合 PC 端 JPG 或 PNG 的工作。H.264 编码帧不一定像 PNG 或 JPG 那样独立。它们取决于最后一个关键帧和中间的增量帧。

如果您仍然想要 H.264，请尝试查看 AVFoundation 框架，特别是 AVAssetReader 类。AVFoundation 是旧 QuickTime API 的替代品。一个很好的起点是来自会话 405 和会话 415 的 WWDC '11 视频。除非您去年参加了 WWDC，否则 AVEditDemoIPad 代码不可用，但资产演示可在 iTunes 上获得。

# javascript - 通过多次点击创建字符串

> ID：10589712
> 
> 赞同：2
> 
> 时间：2012-05-14T19:18:58.370
> 
> 标签：javascript, jquery, html, css

所以我有一个看起来像这样的列表：

```
<ul class="clearfix alignleft">
   <li id="cat-1"><a href="#All">All</a></li>
    <li id="cat-5"><a href="#Mobile">Mobile</a></li>
    <li id="cat-4"><a href="#Webdesign">Webdesign</a></li>
</ul> 
```

因此，当用户单击时`mobile`，我获取属性 href，然后切片，`'#'`但之后当用户单击时，`webdesign`假设我需要创建一个字符串`.Mobile,.Webdesign`，依此类推......所以我必须添加到字符串中......当用户单击锚点时，我添加了一类`.clicked`

如果这是可能的，有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:22:07.293

尝试如下，

**标记**

```
<ul class="clearfix alignleft" id="trackClick"> <!-- added trackClick -->
   <li id="cat-1"><a href="#All">All</a></li>
    <li id="cat-5"><a href="#Mobile">Mobile</a></li>
    <li id="cat-4"><a href="#Webdesign">Webdesign</a></li>
</ul> 
```

**JS：**

```
var tracker = [];
$('#trackClick').find('a').click( function () {
   tracker.push($(this).attr('href').replace('#', '.')); 
   //or tracker.push('.' + $(this).attr('href').substring(1));
});

console.log(tracker); // will print clicked href .Mobile,.Webdesign 
```

[**演示**](http://jsfiddle.net/skram/B8AWf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:22:55.037

```
var classStr = '';
$('ul a').on('click', function(e) {
  e.preventDefault();
  classStr += (classStr.length > 0 ? ', ' : '') + this.href.replace('#', '.');
}); 
```

你也可以把它放在一个数组中，@vega 显示：

```
var classStr = [];
$('ul a').on('click', function(e) {
  e.preventDefault();
  // $.unique() to make sure that no multiple instance of href
  $.unique(classStr.push(this.href.replace('#', '.'))); 
});
console.log(classStr.join(', ')); 
```

# iphone - 存储在 RSS 中的图像？

> ID：10589715
> 
> 赞同：0
> 
> 时间：2012-05-14T19:19:10.397
> 
> 标签：iphone, ios, rss, blogs, parent-child

我看到很多类似 Engadget 的博客应用程序都有来自每篇文章的不同图片，这些图片显示在 TableView 中。我在我的博客中使用 WordPress，如果我在每个博客中发布的图片被添加到 RSS 源中，比如第一张图片，我会很高兴。有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:27:45.063

RSS 提要应该有一个指向图像 url 的元素。您只需要拆下 XML 并找出图像（如果存在）所在的元素名称，然后像使用其他图像一样使用该图像。

# java - 如何对番石榴多图进行排序？（关键=日期）

> ID：10589716
> 
> 赞同：8
> 
> 时间：2012-05-14T19:19:10.390
> 
> 标签：java, sorting, guava, multimap

我有一个

```
Multimap<Date,Invoice> multimap = ArrayListMultimap.create(); 
```

来自番石榴。我想知道如何对多图中的 Date 键进行排序。

目前，我正在这样做：

```
 Iterator<Date> dateItr = multimap.keySet().iterator();
        Set<Date> treeSet = new TreeSet<Date>(Collections.reverseOrder()); 
```

然后我循环遍历 treeSet 迭代器。知道如何避免这种规避吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T19:35:21.927

Guava 团队成员在这里。

使用`TreeMultimap`，或者如果您需要映射到`List`s，请使用`MultimapBuilder`：

```
return MultimapBuilder.treeKeys().arrayListValues().build() 
```

# groovy - 我可以在 spock 中编写单元测试吗？

> ID：10589723
> 
> 赞同：0
> 
> 时间：2012-05-14T19:20:04.603
> 
> 标签：groovy, spock

```
public boolean accept(File directory, String fileName) {
    boolean fileOK = true;

    if (name != null) {
        fileOK &= fileName.startsWith(name);
    }

    if (pattern != null) {
        fileOK &= Pattern.matches(regex, fileName);
    }

    if (extension != null) {
        fileOK &= fileName.endsWith('.' + extension);
    }
    return fileOK;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T20:44:38.710

下面是另一种写法。我使用了数据驱动的方法，因为您必须测试多个场景（方法中有多个 if）

```
def "should accept valid filenames"() {
    expect:
    foobar.accept(new File("/tmp"), fileName)

    where:
    fileName << ["valid_filename_1", "valid_filename_2", "valid_filename_n"]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:24:45.007

是的！

```
def "file should be valid"() {
    setup:
        def dir = new File("/tmp")
        def fileName = "foo.bar"

    when:
        boolean valid = foobar.accept(dir, fileName)

    then:
        valid
} 
```

# javascript - 有没有办法定义将由 Javascript 源和其他语言源共享的字符串常量？

> ID：10589728
> 
> 赞同：1
> 
> 时间：2012-05-14T19:20:41.450
> 
> 标签：javascript

我正在编写在 JavaScript 和 Objective-C 之间架起桥梁的代码，其机制是使用 URL 中的专有方案完成的，即

函数 someJavaScriptFunction { callObjectiveC(@"some-scheme://someActionA"); }

而不是在Javascript源代码或Objective-C源代码中硬编码“some-scheme”和“someActionA”，如果可能的话，我希望为此做类似#include常量的事情。

无论如何可以这样做，以便可以共享包含常量的文件并将#included 等同于objective-c源文件和javascript源文件？

# generics - F# 中的泛型函数

> ID：10589729
> 
> 赞同：9
> 
> 时间：2012-05-14T19:20:47.067
> 
> 标签：generics, f#, automatic-generalization

我仍在努力思考 F# 如何泛化（或不泛化）函数和类型，并且有一个案例困扰着我：

```
let min(a, b) = if a < b then a else b

let add(a, b) = a + b

let minInt = min(3, 4)
let minFloat = min(3.0, 4.0) // works!

let addInt = add(3, 5)
let addFloat = add(3.0, 5.0) // error: This expression was expected to have type
                             // int but here has type float 
```

这里 min 具有泛型类型`'a * 'a -> 'a (requires comparison)`，而 add 具有具体类型`int * int -> int`，显然是从它在程序中的第一次使用中推断出来的。两者都以相同的方式声明和使用，那么为什么在概括上有所不同呢？

我知道在添加的情况下，可以通过声明内联函数来回避问题，这会导致它获得泛型类型定义，即`'a * 'b -> 'c (requires member (+))`，但这并不能解释为什么在这种情况下需要这样做而不是其他。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:30:30.053

@TomasP 在这里有一篇关于这个问题的精彩文章：http: [//tomasp.net/blog/fsharp-generic-numeric.aspx](http://tomasp.net/blog/fsharp-generic-numeric.aspx)

> 在编写具有某些类型参数 'T 的简单通用代码时，我们对类型参数一无所知，也无法将其限制为提供我们可能需要在代码中使用的所有运算符的数字类型。这是 .NET 运行时的限制，F# 提供了两种方法来克服它。

但是为什么`<`和`>`（以及扩展，`=`和`<=`）`>=`可以呢？

F# 编译器处理`equality`和不同（请参阅[规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997037)`comparison`中的第 5.2.10 节平等和比较约束，感谢@Daniel）。你得到了**特殊**的约束，这是允许的（简单地说，更多细节参见规范）： **`comparison`**

 **> 如果该类型是命名类型，则该类型定义不具有且推断不具有 NoComparison 属性，并且该类型定义实现 System.IComparable 或者是数组类型或者是 System.IntPtr 或者是 System.UIntPtr .

运营商没有这种特殊处理`+`。为什么不能有这样的约束`numeric`？

Well isn't that operator also defined for strings? In some languages for lists and collections? Surely it would be an `addable` constraint and not `numeric`. Then many such overloaded operators can be found in a program with different semantic meaning. So F# provides a 'catch-all' method with static member constraints and the inline keyword. Only `equality` and `comparison` are special.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T00:23:36.743

> why the difference in generalization?

通用性和性能之间存在权衡。该`comparison`约束为`min`可以作用于任何 F# 类型的任何值的函数提供了通用性，但在一般情况下，它诉诸虚拟调度并且速度要慢很多倍。运算符提供有限的`+`通用性，并且可以对任何 F# 类型的任何值进行操作，这些值已通过重载增强但在一般情况下不起作用，因此总是非常快，因为从不需要分派。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:30:44.190

`comparison`是一个编译时约束。所以问题仍然存在：为什么不`add`概括？正如 yamen 所指出的，通用数学运算需要内联，这会影响代码大小和性能——可能不是编译器应该自动执行的操作。**

# javascript - 在javascript中检查日期是否有效

> ID：10589732
> 
> 赞同：71
> 
> 时间：2012-05-14T19:20:52.350
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中检测“无效日期”日期实例](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)

`IsDate()`javascript中有函​​数吗？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-05-14T19:25:03.237

试试这个：

```
var date = new Date();
console.log(date instanceof Date && !isNaN(date.valueOf())); 
```

这应该返回`true`。

*更新：添加`isNaN`检查以处理[Julian H. Lam评论的案例](https://stackoverflow.com/users/122353/julian-h-lam)*

# java - 如何在 Java 中访问自定义注解中定义的字段

> ID：10589734
> 
> 赞同：4
> 
> 时间：2012-05-14T19:21:17.420
> 
> 标签：java, reflection, annotations

我有以下Java代码 -

```
import java.lang.reflect.Field;

public class AnnotationTest
{
    public @interface Size
    {
        int size();
        int location();
    }

    @Size(size = 40, location = 85)
    private String firstName;

    @Size(size = 1, location = 21)
    private String middleInitial;

    @Size(size = 50, location = 115)
    private String lastName;

    public static void main(String[] args)
    {
        AnnotationTest t = new AnnotationTest();

        Class<? extends AnnotationTest> classInstance = t.getClass();

        for (Field f : classInstance.getDeclaredFields())
        {
            Size s = f.getAnnotation(Size.class); 
            int size = s.size(); // this is line 29
            int location = s.location();

            System.out.println("size = "+ size);
            System.out.println("location = "+location);
        }

    }
} 
```

我得到的错误是

```
Exception in thread "main" java.lang.NullPointerException
    at com.stackoverflowx.AnnotationTest.main(Demo.java:125 
```

如何正确访问注释字段？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T19:29:28.880

默认情况下，注释在运行时不可用。您需要添加`@Retention(RetentionPolicy.RUNTIME)`到注释定义中以使其可用于运行时处理。例如：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface Size { 
```

`Field.isAnnotationPresent`在实践中，您还应该在实际尝试从字段中获取注释之前检查该字段是否实际上具有给定的注释。

此外，用 . 指定注释所属的元素类型也是一个好习惯`@Target`。因此，您的示例将是：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Size { 
```

# c++ - 裸指针有多糟糕？

> ID：10589739
> 
> 赞同：3
> 
> 时间：2012-05-14T19:21:28.720
> 
> 标签：c++, pointers, smart-pointers

指向在 C++ 中以其他方式分配的东西的指针是否合理安全？

到目前为止，我一直在使用 STL 容器（在一种情况下是一个数组，但这是另一个问题）来满足我所有的动态内存需求，所以我不需要显式使用`new`关键字。我也一直在愉快地使用普通的 ol'`int *foo`类型指针来引用事物。现在我正在阅读有关智能指针的文章（我在 Java 上切了牙，所以我以前从来不用担心这个），传统观点似乎是“裸指针不好，不要使用它们”。

那么我有多大的麻烦？我可以安全地继续使用裸指针，只要它们指向的东西有其他破坏条件吗？这是我可以逃避但将来应该避免的事情吗？或者我应该匆忙修复它是一场灾难吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T19:28:06.093

裸指针本身是安全的，它们的错误使用是危险的（而且你很容易被带走）。智能指针很漂亮，但有些 ( `shared_ptr`) 涉及引用计数，这会导致性能损失。您应该尝试在适用的情况下使用智能指针，但使用指针的 AFAIK 并不被认为是一个可怕的错误。

引用 STL 容器的成员时应该小心，因为它们的地址可能会在重定位期间发生变化，从而给您带来奇怪的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:27:52.987

在编写代码的人和维护代码的人不会犯任何错误的完美世界中，原始指针永远是惊人的。

不幸的是，事实并非如此。首先，裸指针容易出错，指向一些可以在指针不知道的情况下失效的内存，指针可以别名并且它们指向的内容发生变化。

我们实际上需要智能指针来弥补我们的“愚蠢”。至少有些东西必须是“聪明的”:)。

除非你正在做一些非常底层的事情，否则没有必要使用原始指针，仅仅因为它们“不那么聪明”。话虽如此，如果您非常小心，并且在您编写代码后使用您的代码的人非常小心（通常情况并非如此），那么请继续使用原始指针，但除此之外，请使用 smart指针，因为它们只产生很少或没有开销。

`unique_ptr<>`在您移动它之前没有任何开销，在这种情况下它将一个 NULL 写入内存。在现代编译器上，这经常被优化掉。

`shared_ptr<>`计算引用并且可能会产生相当大的开销，特别是在多线程应用程序中使用时，但这可以解决，因此并不是一个大问题。

总而言之，没有必要紧急修复原始指针，但我认为不鼓励使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:31:38.733

说“裸指针不好；不要使用它们”是完全准确的，并附有一个小附录：“指向你必须清理的东西”。

如果您有一个对象并且销毁它是其他人的责任，那么原始指针绝对没问题。但是，当您负责通过任何清理功能销毁对象时，请始终使用智能指针。此外，对于您不清理的对象，请注意在什么情况下它们会被另一个系统函数（本地函数、`vector`调整大小等）清理。

所有权规则：

*   无所有权：`T*`，并注意何时不能再使用它
*   共享所有权：`shared_ptr<T>`，如有必要，使用自定义删除器
*   唯一所有权：`unique_ptr<T, Del>`，如有必要，自定义删除器

始终遵循这些规则，您将永远不会有任何内存泄漏、双重释放、错误的指针访问或任何类似的与内存相关的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:58:26.480

裸指针被认为是不好的，因为它们很容易陷入困境。智能指针会自动为您处理一些问题，这使得它们不太容易出错。

当您对所有代码拥有绝对控制权（即，您是项目中唯一的编码员）时，只要您遵循基本的内存分配法律和惯例（“分配内存的人就摆脱它），使用裸指针就可以了除非另有说明。”）。但是，当您与其他人一起编写代码时（即，有超过 1 名编码员的项目），这就为错误和误解打开了大门。

智能指针负责谁拥有一个对象（因此谁应该释放它）。他们还可以跟踪使用该对象的最后一个代码何时不再需要它，因此可以在共享分配的数据时安全地释放它。

引用计数的智能指针还为从堆中分配内存的类的那些数据成员生成安全的默认复制构造函数和安全的默认复制赋值运算符。他们可以安全地将他们的引用计数智能指针设置为他们正在复制的原始对象，并且当原始对象或克隆超出范围/被删除时，他们通过智能指针管理和共享的分配内存将留给仍然指向它的其他对象。这不适用于裸指针。如果使用裸指针，则必须编写复制赋值运算符和复制构造函数来克隆分配内存的对象，以防止包含/拥有的分配数据的数据损坏。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-14T19:34:37.013

当你不用担心太多的时候`new`，裸指针是不好的。`delete`这种行为可能会导致您出现非常奇怪的错误。我的建议是，当您必须使用在堆上分配的几个指针和对象时，学习使用内存泄漏检查器**Valgrind**。

然后是一些简单的规则，当你用 then 实例化数组时，`new []`你总是必须用 then 删除它们，`delete []`反之，当你用`new`then 实例化单个对象时，总是 call `delete`。

记住要避免混合`new`- `delete`with `malloc`-`free`或 with `new[]`-`delete[]`因为这些功能不是为了相互配合而设计的，例如**永远**不要这样做：

```
int *a = (int*)malloc(10*sizeof(int));
delete a; 
```

但是这个

```
int *a = new int[10];
delete[] a; 
```

正如 Tibor 所说，指针的使用本身并不错，但一如既往，“能力越大，责任越大”：P

# multithreading - 让 Delphi TTimer 与多线程应用程序一起工作

> ID：10589749
> 
> 赞同：3
> 
> 时间：2012-05-14T19:22:00.307
> 
> 标签：multithreading, delphi, timer, vcl, omnithreadlibrary

我有一个简单的 TTimer 问题，该 TTimer 已**启动并在主应用程序线程中执行其 OnTimer 事件**，代码如下所示：

```
procedure TForm1.DoSomeStuff();
begin
     OmniLock.Acquire;
     try
        Parallel.Pipeline.NumTasks(MaxThreads).Stage(StageProc).Run;

        if (MyTimer = nil) then
        begin
             MyTimer := TTimer.Create(nil);
             MyTimer.Interval := 60 * 1000;  // timer fired every 60 seconds
             MyTimer.OnTimer := MyTimerEvent;
             MyTimer.Enabled := True;
         end;
      finally
             OmniLock.Release;
      end;    // try/finally
 end; 
```

当我在一个简单的项目/演示中执行代码时，一切正常，但在我的应用程序（使用 Omni Thread Library v3）中，计时器事件**永远不会被触发**

我很确定**它什么都没有**，我只是不知道出了什么问题！

我三重检查：`MyTimer`在我的代码中只分配一次，它的 OnTimer 事件被正确分配，等等......

我正在使用德尔福 2010

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:54:36.550

`TTimer`是一个基于消息的计时器。无论在哪个线程上下文`TTimer`中创建，都必须有一个活动的消息循环才能`TTimer`处理其`WM_TIMER`消息。

`TTimer`不是线程安全的计时器。为了接收`WM_TIMER`消息，它必须`HWND`为自己分配一个窗口句柄。它使用 VCL 的`AllocateHWnd()`函数来执行此操作，该函数不是线程安全的，并且不能从主线程的上下文之外调用。

如果您需要一个线程安全的计时器，可以直接调用`CreateWindow()`并直接抽取/处理`WM_TIMER`消息，或者使用不同的计时器机制，例如通过 线程多媒体计时器`timeSetEvent()`，甚至只是通过`Sleep()`或的简单忙循环`WaitForSingleObject()`。在不知道您使用计时器的目的的情况下，很难找到适合您需求的替代方案。

# python - 格式化字符串python

> ID：10589754
> 
> 赞同：1
> 
> 时间：2012-05-14T19:22:08.423
> 
> 标签：python, string, format

如果`c = '32486784298'`,

然后`'{0}{1}{2}.{3}{4}{5}.{6}{7}{8}-{9}{10}'.format(*c)`

打印`'324.867.842-98'`。

有没有最简单的方法来做到这一点？（请不要定义）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:35:37.523

在最新版本的 Python 中，您可以省略字符串格式占位符中的数字：

```
>>> '{}{}{}.{}{}{}.{}{}{}-{}{}'.format(*c)
'324.867.842-98' 
```

它适用于 Python 2.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:25:01.527

```
''.join([c[0:3],'.',c[3:6],'.',c[6:9],'-',c[9:11]) 
```

或者

```
c[0:3]+'.'+c[3:6]+'.'+c[6:9]+'-'+c[9:11] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T20:18:58.077

```
'%s.%s.%s-%s' % tuple(c[i:j] for i, j in ((0, 3), (3, 6), (6, 9), (9, 11))) 
```

# apache - 将 URL 重定向到新地址，但保留原始地址

> ID：10589757
> 
> 赞同：3
> 
> 时间：2012-05-14T19:22:16.923
> 
> 标签：apache, http, url, redirect

我想将某些 URL 重定向到一个模板页面，该页面是一个 $_GET 变量。进一步来说：

`http://domain/`& `http://domain/home`==> `http://domain/main.php?page=home` `http://domain/about`==>`http://domain/main.php?page=about`

而且我希望某些词重定向到另一个模板，如下所示： `http://domain/login`==>`http://domain/uam.php?action=login`

实现这一目标的最佳方法是什么？

同样，我想保留我重定向的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:50:00.487

确保安装并加载了 mod_rewrite，确保在 conf 文件的 VirtualHost 部分中设置了 AllowOverride All，并将这些行放在 Web 服务器文档根目录下的 .htaccess 文件中。

```
RewriteEngine on
RewriteRule ^$ main.php?page=home [L]

RewriteRule ^login uam.php?action=login [L, QSA, NC]

RewriteRule ^(.*)$ main.php?page=$1 [L, QSA, NC] 
```

# c# - 在 jquery ajax 错误回调中捕获错误？

> ID：10589758
> 
> 赞同：2
> 
> 时间：2012-05-14T19:22:43.617
> 
> 标签：c#, php, jquery, asp.net, ajax

我倾向于在我的应用程序中对服务器端使用大量 jquery ajax 调用。

通常，当服务器端出现问题时，我会序列化错误消息并作为响应 (JSON) 发送。类似的东西

```
 { "ErrorMessage" : "Something went wrong: " + ex.message } 
```

我想知道的是是否有任何方法可以使错误最终出现在 jquery ajax`error`回调中，而不是`success`.

有没有办法做到这一点？还是我应该坚持我处理错误的旧方法？如果您提供 PHP 或 ASP.NET + c# 示例并不重要，因为我对两者都很感兴趣。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:34:32.160

你可以让它们最终出现在`error callback`jQuery 中。在 ASP.NET 中，您需要做的就是将`custom errors`web.config 中的部分更改为`<customErrors mode="Off" />` **但是**如果您走这条路，请确保将您的 Web 服务放在一个单独的文件夹中，以便您只为您的 Web 服务执行此操作在不关闭整个站点的情况下调用；例如：

```
<location Path="/Services"> <!--Your web service lives here -->
    <system.web>
        <customErrors mode="Off" />
    </system.web>
</location> 
```

这样，在您的 Web 方法上抛出的任何异常都将在`error callback`在 jQuery 中处理。

您可以让异常传播而不将其缓存在您的 Web 方法中，或者您可以捕获它并重新抛出更“用户友好”的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:44:19.013

这可以`Deferred`在 jQuery 1.5+ 中使用对象。Ben Nadel 有一些例子，你可以看看这里[http://www.bennadel.com/blog/2255-Using-jQuery-s-Pipe-Method-To-Change-Deferred-Resolution.htm](http://www.bennadel.com/blog/2255-Using-jQuery-s-Pipe-Method-To-Change-Deferred-Resolution.htm)和这里[http ://www.bennadel.com/blog/2123-Using-Deferred-Objects-In-jQuery-1-5-To-Normalize-API-Responses.htm](http://www.bennadel.com/blog/2123-Using-Deferred-Objects-In-jQuery-1-5-To-Normalize-API-Responses.htm)

这是其 JavaScript 代码的简化版本

```
var request = $.ajax({
    type: "post",
    url: "./web_service.cfm",
    dataType: "json"
});

request = request.pipe(

    // Filter the SUCCESS responses from the API.
    function (response) {

        // real success
        if (response.success) {
            return (response);
        }
        else {
            // The response is actually a FAIL even though it
            // came through as a success (200). Convert this
            // promise resolution to a FAIL.
            return (
                $.Deferred().reject(response)
            );
        }
    },

    // Filter the FAIL responses from the API.
    function (response) {
        return ({
            success: false,
            data: null,
            errors: ["Unexpected error: " + response.status + " " + response.statusText]
        });

    }

);

// Now that our API response has been filtered, let's attach
// our success and fail handlers to the promise resolution.
request.then(

    function (response) {
        console.log("Success!!!", response);
    },

    function (response) {
        console.log("Fail!!!", response);
    }

); 
```

# jquery - $(document).ready() 和 prm.add_endRequest() 中的重复代码

> ID：10589762
> 
> 赞同：0
> 
> 时间：2012-05-14T19:23:12.693
> 
> 标签：jquery, asp.net, updatepanel

**编辑：** 在我更新最新代码后，现在我看到有两个“字符数”而不是只显示一个。这是否意味着它执行两次相同的代码？document.ready 和 add_endrequest？

```
 $('[id*="txtNewComments"]').charCount({
            allowed: 300,
            warning: 15,
            counterText: 'Characters left: '
        }); 
```

当我开始使用 updatepanel 时，我正在使用带有 updatepanel 和一些 jquery 的 asp.net 页面，我的 jquery 和 javascript 函数停止工作，我没有看到任何操作......在我搜索后我发现了这个：[jQuery $(document).ready 和 UpdatePanels？](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)链接非常有用，但我有一个问题。

如果我有更新面板，下面是不起作用的代码...

```
$(document).ready(function() {

     $('[id*="txtNewComments"]').charCount({
            allowed: 300,
            warning: 15,
            counterText: 'Characters left: '
        });

     ..........
     ..........
});

//update:

function UpdateEmployee(....) {} 
```

因此，如果我继续使用推荐的方式，那么`endRequest`我必须**有**两组每个脚本，一组在文档中.

```
$(document).ready(function() {
    // bind your jQuery events here initially
});

var prm = Sys.WebForms.PageRequestManager.getInstance();

prm.add_endRequest(function() {
    // re-bind your jQuery events here
}); 
```

我的问题是：有没有办法让一组脚本而不是 document.ready 中的一组脚本和 endrequest 中的一组脚本？...维护两组脚本很痛苦。

有什么想法吗？

**使用更新面板更新**

```
<asp:ScriptManager runat="server" />
    <asp:UpdatePanel runat="server">
        <ContentTemplate>
            <asp:Repeater runat="server" ID="Repeater1" OnItemCommand="OnItemCommand" OnItemDataBound="OnItemDataBound">
                <HeaderTemplate>
                    <table border="0" cellpadding="0" cellspacing="0">
                        <tr>
                            <th></th>
                            <th>First Name</th>
                            <th>Last Name</th>
                        </tr>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td>
                            <asp:ImageButton ID="Edit" ImageUrl="~/Images/EditDocument.png" runat="server" CommandName="edit" />
                            <asp:ImageButton ID="Delete" ImageUrl="~/Images/Delete_black_32x32.png" runat="server"
                                CommandName="delete" />
                        </td>
                        <td>
                            <asp:Label runat="server" ID="firstName"><%# Eval("FirstName") %></asp:Label>
                            <asp:PlaceHolder runat="server" ID="firstNameEditPlaceholder" />
                            <input type="hidden" runat="server" id="firstNameHidden" visible="false" />
                        </td>
                        <td>
                            <asp:Label runat="server" ID="lastName"><%# Eval("LastName") %></asp:Label>
                            <asp:PlaceHolder runat="server" ID="lastNameEditPlaceholder" />
                            <input type="hidden" runat="server" id="lastNameHidden" visible="false" />
                        </td>
                    </tr>
                </ItemTemplate>
                <FooterTemplate>
                    <tr>
                        <td>
                            <asp:ImageButton ID="Delete" ImageUrl="~/Images/112_Plus_Blue_32x32_72.png" runat="server"
                                OnClick="OnAddRecord" />
                        </td>
                        <td><asp:TextBox runat="server" ID="NewFirstName" /></td>
                        <td><asp:TextBox runat="server" ID="NewLastName" /></td>
                    </tr>
                    </table>
                </FooterTemplate>
            </asp:Repeater>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:36:47.260

试试这个：

```
$(document).ready(function() {
    bindJqueryFeatures();
});

var prm = Sys.WebForms.PageRequestManager.getInstance();

prm.add_endRequest(function() {
    bindJqueryFeatures();
});

function bindJqueryFeatures(){
    //bind your jQuery events here initially 
} 
```

现在，如果您想更改或添加一些 jQuery 功能，只需在**bindJqueryFeatures()**函数中插入代码，这样您就不需要在两种方法中复制代码：**$(document).ready()**和**prm.add_endRequest()**。

它也[很有用](http://api.jquery.com/on/)。

那是你需要的吗？

# python - Python中的“无法启动新线程错误”

> ID：10589766
> 
> 赞同：4
> 
> 时间：2012-05-14T19:23:26.707
> 
> 标签：python, multithreading, python-multithreading

我正在运行一个脚本，它从 debian 包中提取信息并将其保存在数据库中。

从大约 100 个包中提取信息后，会发生错误。错误是“无法启动新线程”为什么我会遇到这个错误？可能的解决方案是什么？

这是用于保存数据的代码：

```
for i in list_pack:

      if not i in oblist:        
        #Creating Packages
            slu=slugify(i)
            ob=Gbobject()
            ob.title=i
            ob.slug=slu
            ob.content=''
            ob.tags=tagname
        #with reversion.create_revision():
            ob.save()
            gb=Gbobject.objects.get(title=i)
            gb.objecttypes.add(Objecttype.objects.get(title='Packages'))
            gb.sites.add(Site.objects.get_current())
        #with reversion.create_revision():
            gb.save()
            gd=Gbobject.objects.get(title=i)
            print 'The Object created was',gd

            #Decsription
            try:
                atv=package_description_dict[i]
                atvalue=unicode(atv,'utf-8')
            except UnicodeDecodeError:
                pass
            try:
                lo=Gbobject.objects.get(title=i)
                loid=NID.objects.get(id=lo.id)
            except Gbobject.DoesNotExist:
                pass
            if atvalue<>'':
                slu=slugify(atvalue)
                at=Attribute()
                at.title=atvalue
                at.slug=slu
                at.svalue=atvalue
                at.subject=loid
                att=Attributetype.objects.get(title='Description')
                at.attributetype=att
                #with reversion.create_revision():
                at.save()                    
                print 'yeloow13' 
```

就像`Description`，包的大约还有 2 个属性以类似的方式保存。

这是发生错误时我得到的完整回溯：-

```
 error                                     Traceback (most recent call last)

/home/radhika/Desktop/dev_75/gnowsys-studio/demo/<ipython console> in <module>()

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/gstudio/Harvest/debdata.py in <module>()
   1086 # create_attribute_type()

   1087 # create_relation_type()

-> 1088 create_objects()
   1089 #create_sec_objects()

   1090 #create_relations()

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/gstudio/Harvest/debdata.py in create_objects()
    403             ob.sites.add(Site.objects.get_current())
    404             #with reversion.create_revision():

--> 405             ob.save()
    406             #time.sleep(10)

    407             #gd=Gbobject.objects.get(title=i)

/usr/local/lib/python2.6/dist-packages/django_reversion-1.6.0-py2.6.egg/reversion/revisions.pyc in do_revision_context(*args, **kwargs)
    298             try:
    299                 try:
--> 300                     return func(*args, **kwargs)
    301                 except:
    302                     exception = True

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/objectapp/models.pyc in save(self, *args, **kwargs)
    658     @reversion.create_revision()
    659     def save(self, *args, **kwargs):
--> 660         super(Gbobject, self).save(*args, **kwargs) # Call the "real" save() method.
    661 
    662 

/usr/local/lib/python2.6/dist-packages/django_reversion-1.6.0-py2.6.egg/reversion/revisions.pyc in do_revision_context(*args, **kwargs)
    298             try:
    299                 try:
--> 300                     return func(*args, **kwargs)
    301                 except:
    302                     exception = True

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/gstudio/models.pyc in save(self, *args, **kwargs)
    327     @reversion.create_revision()
    328     def save(self, *args, **kwargs):
--> 329         super(Node, self).save(*args, **kwargs) # Call the "real" save() method.
    330 
    331 

/usr/local/lib/python2.6/dist-packages/django/db/models/base.pyc in save(self, force_insert, force_update, using)
    458         if force_insert and force_update:
    459             raise ValueError("Cannot force both insert and updating in model saving.")
--> 460         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
    461 
    462     save.alters_data = True

/usr/local/lib/python2.6/dist-packages/django/db/models/base.pyc in save_base(self, raw, cls, origin, force_insert, force_update, using)
    568         if origin and not meta.auto_created:
    569             signals.post_save.send(sender=origin, instance=self,
--> 570                 created=(not record_exists), raw=raw, using=using)
    571 
    572 

/usr/local/lib/python2.6/dist-packages/django/dispatch/dispatcher.pyc in send(self, sender, **named)
    170 
    171         for receiver in self._live_receivers(_make_id(sender)):
--> 172             response = receiver(signal=self, sender=sender, **named)
    173             responses.append((receiver, response))
    174         return responses

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/objectapp/signals.pyc in wrapper(*args, **kwargs)
     65             if inspect.getmodulename(fr[1]) == 'loaddata':
     66                 return
---> 67         signal_handler(*args, **kwargs)
     68 
     69     return wrapper

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/objectapp/signals.pyc in ping_external_urls_handler(sender, **kwargs)
     90         from objectapp.ping import ExternalUrlsPinger
     91 
---> 92         ExternalUrlsPinger(gbobject)
     93 
     94 

/usr/local/lib/python2.6/dist-packages/django_gstudio-0.3.dev-py2.6.egg/objectapp/ping.pyc in __init__(self, gbobject, timeout, start_now)
    153         threading.Thread.__init__(self)
    154         if start_now:
--> 155             self.start()
    156 
    157     def run(self):

/usr/lib/python2.6/threading.pyc in start(self)
    472         _active_limbo_lock.release()
    473         try:
--> 474             _start_new_thread(self.__bootstrap, ())
    475         except Exception:
    476             with _active_limbo_lock:

error: can't start new thread 
```

我没有编写任何代码来处理线程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T16:58:31.213

*很抱歉这里有一个不完整的解决方案，我没有评级可以在评论部分发布。*

要检查的一件事是您正在运行的线程总数。我有一些代码可以检查内核数量（使用 sys），然后启动线程并检查内核负载以测试操作系统如何处理线程分配，并且我了解到 Windows 7（例如）似乎抛出了超过 32 个线程的错误在 8（逻辑）核心 CPU 上。[这是在 Python 2.7、Win 7 64 位中的 32 位等，YMMMV 上]。在其他机器上，我可以超过 1,000 个线程。

所以我想简短的版本是：当你得到那个错误时，你已经有多少线程了？你可以检查

```
threading.active_count() 
```

除此之外，您并没有真正在此处提供代码的线程部分，因此我将引导您访问这个出色的[Python Central 页面](http://pythoncentral.org/working-with-threads-in-python/)。

您还可以从之前关于大型线程任务计数以及如何处理它们的[堆栈溢出讨论中受益。](https://stackoverflow.com/questions/1993079/a-programming-strategy-to-bypass-the-os-thread-limit)

*再次道歉，这更像是一个方向而不是解决方案，我认为可能需要更多信息来帮助我们了解您遇到的问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:26:35.857

您使用的是 32 位系统并且虚拟内存不足。您的一个库可能会产生线程并且没有正确回收它们。作为一种解决方法，请尝试使用 减少默认线程堆栈大小[`threading.stack_size`](http://docs.python.org/dev/library/threading.html#threading.stack_size)。

# java - 类不能转换为 java.lang.reflect.ParameterizedType

> ID：10589767
> 
> 赞同：12
> 
> 时间：2012-05-14T19:23:28.977
> 
> 标签：java, spring-mvc

目前`VariableService`在`@Autowired`我的控制器中。

我意识到我可以实现这个类`ParameterizedType`来消除这个错误，但我担心我可能会走错方向。有没有更好的方法来做到这一点，还是我需要硬着头皮实施`ParameterizedType`'s 方法？

> org.springframework.beans.factory.BeanCreationException：创建名为“contentController”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.fettergroup.cmt.service.VariableService com.fettergroup.cmt.web.ContentController.variableService；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 中定义名称为“variableService”的 bean 创建时出错：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [com.fettergroup.cmt.service.VariableService]：构造函数抛出异常；嵌套异常是 java.lang.ClassCastException：**java.lang.Class 不能强制转换为 java.lang.reflect.ParameterizedType**

**可变服务**

```
public class VariableService extends EntityService {
    public VariableService () {
        super.setEntityRepository(new VariableRepository());
    }
} 
```

**实体服务**

```
public abstract class EntityService<T> {

    public EntityRepository<T> entityRepository;

    public T create(T entity) {
        return entityRepository.create(entity);
    }

    public T update(T entity) {
        return entityRepository.update(entity);
    }

    public void delete(T entity) {
        entityRepository.delete(entity);
    }

    public void setEntityRepository(EntityRepository<T> entityRepository) {
        this.entityRepository = entityRepository;
    }
} 
```

**变量库**

```
public class VariableRepository extends EntityRepository {

} 
```

**实体库**

```
@Repository
public abstract class EntityRepository<T> {

    //the equivalent of User.class
    protected Class<T> entityClass;

    @PersistenceContext(type= PersistenceContextType.TRANSACTION)
    public EntityManager entityManager;

    public EntityRepository () {
        //Get "T" and assign it to this.entityClass
        ParameterizedType genericSuperclass = (ParameterizedType) getClass().getGenericSuperclass();
        this.entityClass = (Class<T>) genericSuperclass.getActualTypeArguments()[0];
    }

    /**
     * Create this entity
     * @param t
     * @return 
     */
    public T create(T t) {
        entityManager.persist(t);
        return t;
    }

    /**
     * Update this entity
     * @param t
     * @return 
     */
    public T update(T t) {
        return entityManager.merge(t);
    }

    /**
     * Delete this entity
     * @param entity 
     */
    public void delete(T t) {
        t = this.update(t);
        entityManager.remove(t);
    }

    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T21:50:30.487

只是说，这是确定实体类型的一个非常糟糕的设计。您应该执行以下操作，而不是依赖反射来推断其类定义。它不仅会消除该错误，而且整体上会更干净和在较低的水平上，比反射更快（并不是说这真的是一个问题）。

```
@Repository
public abstract class EntityRepository<T>{
    protected Class<T> entityClass;

    public EntityRepository(Class<T> entityClass){
        this.entityClass = entityClass;
    }

    //...
}

public class UserEntityRepository extends EntityRepository<User>{
    public UserEntityRepository(){
        super(User.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-29T07:32:40.163

EntityRepository 不是 ParameterizedType 类型。此类仅扩展 ParameterizedType。如果 spring 通过 cglib 代理你的类，这也是可能的

我们需要检查班级的家长

```
public EntityRepository () {
    //Get "T" and assign it to this.entityClass
    Type genericSuperClass = getClass().getGenericSuperclass();

    ParameterizedType parametrizedType = null;
    while (parametrizedType == null) {
        if ((genericSuperClass instanceof ParameterizedType)) {
            parametrizedType = (ParameterizedType) genericSuperClass;
        } else {
            genericSuperClass = ((Class<?>) genericSuperClass).getGenericSuperclass();
        }
    }

    entityClass = (Class<T>) parametrizedType.getActualTypeArguments()[0];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T20:18:27.243

看来您在滥用`ParameterizedType`. 在`EntityRepository`构造函数中，您应该使用类似以下的内容，并进行适当的检查。

```
public EntityRepository () {
    //Get "T" and assign it to this.entityClass
    ParameterizedType genericSuperclass = (ParameterizedType) getClass().getGenericSuperclass();
    Type type = genericSuperclass.getActualTypeArguments()[0];
    if (type instanceof Class) {
      this.entityClass = (Class<T>) type;
    } else if (type instanceof ParameterizedType) {
      this.entityClass = (Class<T>) ((ParameterizedType)type).getRawType();
    }
} 
```

但是，此实现远未完成，因为您还应该处理`GenericArrayType`值以及嵌套`ParameterizedType`的 .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-19T14:49:34.210

需要从 EntityRepository 类中移除 @Repository 注解才能解决问题。

阅读此线程

[java.lang.Class 不能强制转换为 java.lang.reflect.ParameterizedType](https://stackoverflow.com/questions/11067512/java-lang-class-cannot-be-cast-to-java-lang-reflect-parameterizedtype/42887896#42887896)

# php - 如何将方法参数传递给类属性？

> ID：10589768
> 
> 赞同：0
> 
> 时间：2012-05-14T19:23:30.713
> 
> 标签：php, oop, function

我正在尝试基于方法参数创建属性。例如：

```
class Test{

   public function newProperty($prop1,$prop2){

   //I want to create $this->argu1 and $this->argu2 after calling newProperty method. 

  }
}

$test=new Test();
$test->newProperty('argu1','argu2') 
```

这可能吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:26:13.350

很简单：

```
$this->$prop1 = 'whatever'; 
```

假设您想处理未定义数量的参数，您可以使用：

```
foreach(func_get_args() as $arg) {
  $this->$arg = 'some init value';
} 
```

另一方面，所有这些都是不必要的，因为所有这些属性都是*公开*的，因此：

```
$test->argu1 = 'whatever'; 
```

会做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:27:04.800

尝试这个：

```
class Test{

    private argu1 = '';
    private argu2 = '';

    public function newProperty($argu1,$argu2){
        //This is a great place to check if the values supplied fit any rules.
        //If they are out of bounds, set a more appropriate value.

        $this->prop1 = $argu1;
        $this->prop2 = $argu2;

    }
} 
```

我有点不清楚类属性是否应该命名为 $prop 或 $argu。请让我知道我是否将它们倒退。

# html - 将关键帧更改为第二张图像

> ID：10589772
> 
> 赞同：1
> 
> 时间：2012-05-14T19:23:36.003
> 
> 标签：html, css, keyframe

我正在制作带有关键帧的幻灯片，但有一个问题..

关键帧在这里改变了第一张图像的位置：

```
background-image:url('images/cover.png'), url('images/slideshow.jpg');
-webkit-animation:slider 20s infinite alternate ease-in-out;

@-webkit-keyframes slider {
0% {background-position: 0px 0px}
14% {background-position: 0px 0px}
28% {background-position: -1280px 0px}
42% {background-position: -1280px 0px}
56% {background-position: -2560px 0px}
70% {background-position: -2560px 0px}
84% {background-position: -3840px 0px}
100% {background-position: -3840px 0px}
} 
```

但是我要滑动的图像是最后一张，关于如何更改关键帧优先级的任何想法？第一个图像有一些不透明度，这使我能够看到第二个图像。如果我在它们上交换位置，最后一个最终会落在后面并且看不到......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:25:26.750

该`background-position`属性可以有多个值，当前动画会影响两个图像。像这样的东西应该工作：

```
@-webkit-keyframes slider {  
    0% {background-position: 0 0, 0px 0px}  
    14% {background-position: 0 0, 0px 0px}  
    28% {background-position: 0 0, -1280px 0px}  
    42% {background-position: 0 0, -1280px 0px}  
    56% {background-position: 0 0, -2560px 0px}  
    70% {background-position: 0 0, -2560px 0px}  
    84% {background-position: 0 0, -3840px 0px}  
    100% {background-position: 0 0, -3840px 0px}  
}
```

# uiwebview - 如何使用 UIWebview 从动态加载 .mp4 视频的 asp.net 网站加载内容并播放视频？

> ID：10589775
> 
> 赞同：0
> 
> 时间：2012-05-14T19:23:41.310
> 
> 标签：uiwebview

我有一个有网站的客户。该网站目前允许用户登录、搜索和播放 .mp4 视频。播放列表列表是动态创建的，其中值存储在 sql server 2008 数据库中。我客户的网站已经为智能手机使用而构建，并且不想重新创建 iPhone 应用程序。此外，这意味着加载数千个视频。相反，我想我会使用 UIWebview 来加载网站。这似乎运作良好。但是，当您尝试在 UIWebview 中单击并播放视频时，没有任何反应。如果我们在 Apple 移动 Safari 浏览器中启动移动网站，情况并非如此。该视频通过在 iPhone 视频播放器中开始播放。有没有办法用 uiwebview 完成同样的功能？任何指导或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:18:41.227

`<video>`如果一切设置正确，UIWebView 将播放视频，远程文件或本地文件都可以使用（如果它们的格式正确）。

你的视频标签是什么样的？特别是你的 src.

例如，如果您想播放内联视频，则 html5 将类似于

```
<video id="theVideo" controls width="280" height="160" src="yourVideo.mp4"  webkit-playsinline></video> 
```

并且有必要在 UIWebView 中设置这一行

> self.webView.allowsInlineMediaPlayback = YES；

或者你也可以显式地加载媒体播放器，但是在 HTML5 中做任何事情都非常整洁和容易。

# c# - 在没有生成太长 IN 子句的情况下跨多个实体上下文进行查询的正确方法是什么？

> ID：10589776
> 
> 赞同：0
> 
> 时间：2012-05-14T19:23:44.687
> 
> 标签：c#, entity-framework

我试图通过比较来自第二个上下文的 ID 来生成要在目标上下文中创建的实体集。

这是我想出的，但我正在寻找更好的方法或确认这是正确的方法。

到目前为止，我注意到的要点是：

*   ToList() 用于防止查询使用多个上下文时发生错误
*   我知道，如果我在生成的 SQL 中强制使用 IN 子句，那么它可以处理的数量是有上限的，我不希望出现这种错误情况。

    ```
    public override IEnumerable<Campaign> Execute()
    {
        using (var eom = eomDatabase.Create())
        using (var cake = cakeEntities.Create())
        {
            var campaigns = eom.Campaigns.Select(c => c.pid).ToList();
            var offers = cake.CakeOffers.Select(c => c.Offer_Id).ToList();
            var newOffers = offers.Except(campaigns).ToList();
            var newCampaigns = from offer in cake.CakeOffers
                               where newOffers.Contains(offer.Offer_Id)
                               select new Campaign {
                                   pid = offer.Offer_Id,
                                   campaign_name = offer.OfferName
                               };

            return newCampaigns.ToList();
        }
    } 
    ```

**更新**：显然 let 语句不像我想的那样工作 - 上面没有产生错误，而我的原始代码会导致多上下文错误。

```
 var newCampaigns = from offer in cake.CakeOffers 
                       let campaigns = eom.Campaigns.Select(c => c.pid).ToList() 
                       let offers = cake.CakeOffers.Select(c => c.Offer_Id).ToList() 
                       let newOffers = offers.Except(campaigns).ToList() 
                       where newOffers.Contains(offer.Offer_Id) 
                       select new Campaign { 
                           pid = offer.Offer_Id, 
                           campaign_name = offer.OfferName 
                       }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:55:04.890

1) ToList() 的影响是在该点执行查询。因此，您将所有 Id 拉入内存。根据数据集的相对大小，这可能是最优的，也可能不是最优的。如果活动多于蛋糕优惠，您最好先使用 cakeEntities 上下文将蛋糕优惠 id 查询到内存中 - 然后处理它并单独管理其余部分。

您可以通过批量读取蛋糕报价轻松规避任何 IN 子句限制 - 只需使用 Take 运算符一次处理一个固定数字：例如

```
IList<int> cakeOffers;

using (var cakeDb = new cakeEntities())
{
    cakeOffers = cakeDb.CakeOffers.Take(10).Select(c => c.pid).ToList();        
} 
```

2）（编辑 - 我想你知道这一点......）你实际上并没有在上下文中创建任何新的广告系列。你只是在内存中构建了一堆。您需要将它们添加到上下文中，然后将其保存以创建它们。

编辑

然后，我将使用 Contains 子句在 eomDatabase 中查询具有匹配 offer_Ids 的现有活动：例如：

```
var existingCampaignOffers = campaignDb.Campaigns
    .Where(co => cakeOffers.Contains(co.Offer_Id)).Select(c => c.Offer_Id).ToList(); 
```

然后最后在内存中使用 except() 来获取创建新广告系列所需的独占列表 Offer_Ids。

# c++ - 枚举 C++ 可执行文件中的派生类

> ID：10589779
> 
> 赞同：2
> 
> 时间：2012-05-14T19:23:56.253
> 
> 标签：c++, derived

假设您的 C++ 应用程序中有基类和几个派生类。您想枚举从该基类派生的所有类而不实例化派生类，例如在类名列表框中将它们呈现给用户。显然，所需的信息在应用程序的某个地方。如何找回它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:44:00.440

您可以添加静态注册器元素。像这样：

**基础.hpp：**

```
#include <string>
#include <typeindex>
#include <unordered_map>

using typemap = std::unordered_map<std::type_index, std::string>;

struct Base
{
    /* ... */
    static typemap & registry();
};

template <typename T> struct Registrar
{
    Registrar(std::string const & s) { Base::typemap()[typeid(T)] = s; }
}; 
```

**基础.cpp：**

```
#include "Base.hpp"
typemap & Base::registry() { static typemap impl; return impl; } 
```

**派生A.hpp：**

```
#include "Base.hpp"

struct DerivedA : Base
{
    static Registrar<DerivedA> registrar;
    /* ... */
}; 
```

**派生A.cpp：**

```
#include "DerivedA.hpp"
Registrar<DerivedA> DerivedA::registrar("My First Class"); 
```

现在，在`main()`开始后的任何时候，您都可以调用`Base::registry()`以获取对每个派生类包含一个元素的映射的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:30:17.543

这是不可能的。大多数情况下，您不知道运行时的类名，也无法获取类列表。如果您不想实例化所有需要的类，唯一的选择是手动构建列表。

# actionscript-3 - 离开关键帧并返回时，Flash 舞台上的 MovieClip 不会重新实例化

> ID：10589781
> 
> 赞同：0
> 
> 时间：2012-05-14T19:24:03.210
> 
> 标签：actionscript-3, flash, actionscript, flash-cs4

我已经调试了很长一段时间的以下问题并且已经碰壁了。

我在 Flash 中建立了一个项目（CS4，顺便说一句），它有一组关键帧，我在这些关键帧之间移动以表示游戏的各种屏幕。其中一个定义了一个 MovieClip（其中包含子项），表示一个选项菜单，该菜单出现在几个不同的关键帧上。

我遇到的问题是，当我第一次输入关键帧（使用“gotoAndStop”）时，这个 MovieClip 参考似乎可以访问，偶尔当我移动到其他帧并返回时。但至少在一种情况下，当我退出框架并返回时，我得到一个空引用错误（TypeError：错误 #1009：无法访问空对象引用的属性或方法）。当我尝试访问它时（getChildByName（“optionMenuTitle”））。我什至尝试让系统从 0 迭代到 numChildren 并打印出每个对象的名称，但是尽管将 numChildren 返回为 9，但它在位置 7 处返回 NULL。有谁知道为什么这个特定的 MovieClip 引用仅在此为 NULL案子？？

这是发生的过程的基本（缩写）纲要：

```
//set up function to be fired on frame construction
addEventListener(Event.FRAME_CONSTRUCTED, fadeIn, false, 0, true);  

public function fadeIn(event:Event):void {
   _handler.handle(); //this function is called which runs the debug statement below
   trace (mainDoc.numChildren); //displays 9
   for (var i = 0; i < mainDoc.numChildren; i++) { trace(mainDoc.getChildAt(i).name); } //throws null when it gets to 7 
   optionMenuTitle = OptionMenu(mainDoc.getChildByName("optionMenuTitle")); //the original failed call that caused me to debug
} 
```

编辑：另一个可能有用的信息。如果我注释掉该错误上方的 getChild 命令，则加载帧，我可以看到在舞台上直观显示的 MovieClip（尽管它不是交互式的，并且不断地循环通过其子对象的帧）。但是仍然无法以编程方式访问它。

另一个编辑：有问题的对象是我命名为“OptionMenu”的 MovieClip 的子类。我在 OptionMenu 构造函数中放置了一个断点，当框架正确加载时，该断点被命中。当我得到上面的错误时，构造函数中的断点永远不会被命中。但是，调试器似乎无法让我看到 Flash 在实例化帧时脑子里发生的事情，所以我看不出为什么构造函数从未被调用的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:35:04.830

好吧，这个一直让我发疯。我无法解决为什么`optionMenuTitle`当您第二次返回框架时它不参考您`title`的原因。

我可以解决它的唯一方法是将 3 个按钮从`OptionMenu`MovieClip 中取出，并将它们放在舞台上，下面是灰色背景，基本上取消了`OptionsMenu`.

因此，我将所有初始化代码`OptionMenu`移至您的`TitleHanlder`，并将销毁调用添加到您的销毁方法中`TitleHandler`，并为 3 个按钮中的每一个

我还将 refs 从 root 更改为 mainDoc：

```
sound.initialize(LogicGameMain(mainDoc).soundOn);
music.initialize(LogicGameMain(mainDoc).musicOn); 
```

这对我有用，因为您仍然可以第二次与按钮交互。看起来这些按钮嵌套肯定存在一些错误。

我希望这对你有用。

# javascript - ASP.NET MVC - 将 PartialView 与另一个对象一起返回给 Ajax

> ID：10589787
> 
> 赞同：50
> 
> 时间：2012-05-14T19:24:52.443
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 ASP.NET MVC 编写一个单页 ajax 应用程序 - 大量使用 jQuery。我在整个应用程序中执行类似于以下的操作：

JS：

```
$.ajax({
    type: "GET",
    url: "/Home/GetSomePartialView/",
    data: someArguments,
    success: function (viewHTML) { 
        $("#someDiv").html(viewHTML); 
    },
    error: function (errorData) { onError(errorData); }
}); 
```

控制器 C#：

```
public ActionResult GetSomePartialView(SomeArgumentModel someArguments)
{

    return PartialView("_CaseManager");
} 
```

这很好用。（`viewHTML`在 ajax`success`函数中）作为字符串返回，我可以将它推到页面上没问题。

现在我想做的不仅是返回 PartialView HTML 字符串，还要返回某种状态指示器。这是一个权限问题 - 例如，如果有人试图访问他们没有权限的应用程序的一部分，我想返回一个不同于他们要求的 PartialView 并在弹出窗口中显示一条消息告诉他们为什么他们得到的视图与他们要求的不同。

所以 - 为此，我想做以下事情：

控制器 C#：

```
public ActionResult GetSomePartialView(SomeArgumentModel someArguments)
{
    ReturnArgs r = new ReturnArgs();

    bool isAllowed = CheckPermissions(); 

    if (isAllowed) 
    {
        r.Status = 400; //good status ... proceed normally
        r.View = PartialView("_CaseManager");
    }
    else
    {
        r.Status = 300; //not good ... display permissions pop up
        r.View = PartialView("_DefaultView");
    }

    return Json(r);
}

public class ReturnArgs
{
    public ReturnArgs()
    {
    }

    public int Status { get; set; }
    public PartialViewResult View { get; set; }
} 
```

JS：

```
$.ajax({
    type: "GET",
    url: "/Home/GetSomePartialView/",
    data: someArguments,
    success: function (jsReturnArgs) { 

        if (jsReturnArgs.Status === 300) { //300 is an arbitrary value I just made up right now
            showPopup("You do not have access to that.");
        }

        $("#someDiv").html(jsReturnArgs.View); //the HTML I returned from the controller
    },
    error: function (errorData) { onError(errorData); }
}); 
```

这个**SORTA**现在可以工作了。我在 JavaScript 中得到了一个很好的对象（我期望看到的），但是我看不到如何获取`jsReturnArgs.View`属性的完整 HTML 字符串。

我真的只是在寻找如果我自己返回的话会返回的相同字符串`PartialView`。

（正如我在开头提到的，这是一个单页应用程序 - 所以我不能只是将它们重定向到另一个视图）。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-14T20:14:56.017

所以 - 使用以下帖子我得到了这个工作：

[部分视图与 Json（或两者）](https://stackoverflow.com/questions/1471066/partial-views-vs-json-or-both)

[将视图渲染为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)

他们都很好地布置了它，然后我将代码更改为以下内容：

C＃：

```
public ActionResult GetSomePartialView(SomeArgumentModel someArguments)
{
    ReturnArgs r = new ReturnArgs();

    bool isAllowed = CheckPermissions(); 

    if (isAllowed) 
    {
        r.Status = 400; //good status ... proceed normally
        r.ViewString = this.RenderViewToString("_CaseManager");
    }
    else
    {
        r.Status = 300; //not good ... display permissions pop up
        r.ViewString = this.RenderViewToString("_DefaultView");
    }

    return Json(r);
}

public class ReturnArgs
{
    public ReturnArgs()
    {
    }

    public int Status { get; set; }
    public string ViewString { get; set; }
} 
```

JS：

```
$.ajax({
    type: "GET",
    url: "/Home/GetSomePartialView/",
    data: someArguments,
    success: function (jsReturnArgs) { 

        if (jsReturnArgs.Status === 300) { //300 is an arbitrary value I just made up right now
            showPopup("You do not have access to that.");
        }

        $("#someDiv").html(jsReturnArgs.ViewString); //the HTML I returned from the controller
    },
    error: function (errorData) { onError(errorData); }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T19:33:41.863

跳过必须返回具有多个参数的 json 并将您的 html 编码为 json 的一种方法是始终发送 HTML，但您发送一个隐藏字段，其中设置了状态或类似的东西..

```
success: function(data)
{
  if(data.find("#ajax-status").val()==="success")
  {
    $("#someDiv").html(data);
  }
  else
  {
    showPopup("You do not have access to that.");
  }
} 
```

我不会推荐这种方法我会有两个部分视图，一个用于正常视图，另一个用于错误/未经授权的情况。

# php - PHP MySQL 错误记录和处理 - 最佳实践

> ID：10589792
> 
> 赞同：5
> 
> 时间：2012-05-14T19:25:05.533
> 
> 标签：php, mysql, mysql-error-1064

我正在使用 PHP 构建一个站点，它允许用户将大量数据添加到 MYSQL 数据库中的各种表中。这需要在我的数据库中大量插入、更新和删除表，有时在一个脚本中运行多个命令。

我担心捕捉实时发生的潜在错误（我已经测试，测试和测试，但仍然需要备份计划）。

我到处寻找解决方案，但找不到能满足我需求的解决方案，所以想知道这里是否有人有他们使用的任何做法或可以给我的建议。

我想要发生的事情：

如果连接到我的数据库时发生错误（例如），我想显示一个页面或警报窗口，其中显示“抱歉，我们遇到了问题”消息，并带有一个按钮来记录错误。当用户单击按钮时，我希望能够将 mysql_error() 记录到数据库中，其中包含对失败的命令/函数和页面名称的描述以及我可以跟踪的时间/日期戳。

这是任何人以前做过的事情还是可以提供替代方案？或者是否有一个内置函数可以做到这一点，而我错过了？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:29:27.733

如果连接到数据库失败，您将无法将错误记录到数据库。除了糟糕的连接场景，您应该使用支持异常（如 PDO）的 php mysql 库，并使用 try-catch 块来捕获您想要记录的错误状态。

您可能只想在数据库连接失败时写入 apache 错误日志（可以在 try-catch 块中完成）。

# c++ - OpenMP - 只创建一次线程

> ID：10589798
> 
> 赞同：7
> 
> 时间：2012-05-14T19:25:27.530
> 
> 标签：c++, openmp

我尝试使用 OpenMP 编写简单的应用程序。不幸的是，我遇到了加速问题。在这个应用程序中，我有一个 while 循环。该循环的主体由一些应按顺序执行的指令和一个 for 循环组成。我`#pragma omp parallel for`用来使这个 for 循环并行。这个循环没有太多工作，但经常被调用。

我准备了两个版本的 for 循环，并在 1、2 和 4 核上运行应用程序。
版本 1（for 循环中的 4 次迭代）：22 秒、23 秒、26 秒。
版本 2（for 循环中的 100000 次迭代）：20 秒、10 秒、6 秒。

如您所见，当 for 循环没有太多工作时，2 核和 4 核的时间要高于 1 核。我猜原因是`#pragma omp parallel for`在 while 循环的每次迭代中都会创建新线程。所以，我想问你 - 是否有可能创建一次线程（在 while 循环之前），并确保 while 循环中的某些工作将按顺序完成？

```
#include <omp.h>
#include <iostream>
#include <math.h>
#include <stdlib.h>
#include <stdio.h>
#include <time.h>
int main(int argc, char* argv[])
{
    double sum = 0;
    while (true)
    {
        // ...
        // some work which should be done sequentially
        // ...

        #pragma omp parallel for num_threads(atoi(argv[1])) reduction(+:sum)
        for(int j=0; j<4; ++j)  // version 2: for(int j=0; j<100000; ++j)
        {
            double x = pow(j, 3.0);
            x = sqrt(x);
            x = sin(x);
            x = cos(x);
            x = tan(x);
            sum += x;

            double y = pow(j, 3.0);
            y = sqrt(y);
            y = sin(y);
            y = cos(y);
            y = tan(y);
            sum += y;

            double z = pow(j, 3.0);
            z = sqrt(z);
            z = sin(z);
            z = cos(z);
            z = tan(z);
            sum += z;
        }

        if (sum > 100000000)
        {
            break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T08:09:40.633

大多数 OpenMP 实现会在程序启动时创建多个线程，并在程序运行期间保留它们。也就是说，大多数实现不会在执行期间动态创建和销毁线程；这样做会以严重的线程管理成本影响性能。这种线程管理方法与 OpenMP 的常用用例一致，并且适用于这些用例。

当您增加 OpenMP 线程的数量时，您看到的减速很可能归结为在具有少量迭代的循环上施加了并行开销。Hristo的回答涵盖了这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T20:49:23.560

You could move the parallel region outside of the `while (true)` loop and use the `single` directive to make the serial part of the code to execute in one thread only. This will remove the overhead of the fork/join model. Also OpenMP is not really useful on thight loops with very small number of iterations (like your version 1). You are basically measuring the OpenMP overhead since the work inside the loop is done really fast - even 100000 iterations with transcendental functions take less than second on current generation CPU (at 2 GHz and roughly 100 cycles per FP instruciton other than addition, it'll take ~100 ms).

That's why OpenMP provides the `if(condition)` clause that can be used to selectively turn off the parallelisation for small loops:

```
#omp parallel for ... if(loopcnt > 10000)
for (i = 0; i < loopcnt; i++)
   ... 
```

It is also advisable to use `schedule(static)` for regular loops (that is for loops in which every iteration takes about the same time to compute).

# android - Android 设置应用程序中的选项列表

> ID：10589799
> 
> 赞同：0
> 
> 时间：2012-05-14T19:25:48.717
> 
> 标签：android, preferenceactivity

Android 中的设置应用程序有以下源代码： [代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.3_r1/com/android/settings/Settings.java#Settings)

Settings 类派生自 PreferenceActivity。即使使用 android 源代码，我也无法弄清楚类中的哪些代码负责在设置屏幕中显示差异选项。

我的猜测是正确的代码在 onResume() 中：

```
 public void onResume() {
    super.onResume();

    ListAdapter listAdapter = getListAdapter();
    if (listAdapter instanceof HeaderAdapter) {
        ((HeaderAdapter) listAdapter).resume();
    }
} 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:20:56.287

> 我无法弄清楚类中的哪些代码负责在设置屏幕中显示差异选项。

这主要在[首选项 XML](https://github.com/android/platform_packages_apps_settings/tree/master/res/xml)中，例如声明首选项标题的[文件](https://github.com/android/platform_packages_apps_settings/blob/master/res/xml/settings_headers.xml)（平板电脑设置视图的左列）。一些首选项是通过 custom 实现`PreferenceFragments`的，其中 UI 偏离了首选项规范。

# .net - 堆 实现 ICollection，但具有来自 ICollection 的方法

> ID：10589803
> 
> 赞同：6
> 
> 时间：2012-05-14T19:26:11.723
> 
> 标签：.net, stack, generic-collections, interface-implementation

我正在尝试创建一个基于`Stack<T>`. 当我在 Visual Studio 中查看`Stack<T>`[来自元数据] 时，它显示`Stack<T>`implements `ICollection`，这将要求它实现`ICollection`'`CopyTo(Array array, index)`方法，但相反，它显示为具有`ICollection<T>`'`CopyTo(T[] array, index)`方法。有人可以解释为什么会这样吗？

我正在尝试创建一个`Stack<T>`非常模仿的集合。当我`ICollection`像堆栈一样实现时，它需要我使用该`CopyTo(Array array, index)`方法，但我*真正*想要的是使用该`CopyTo(T[] array, index)`方法，就像这样`Stack<T>`做一样。有没有办法在不实施的情况下实现这一目标`ICollection<T>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:19:04.073

正如其他人所写，您可以使用显式接口实现来满足您的非通用接口：

```
void ICollection.CopyTo(Array array, int arrayIndex)
{
  var arrayOfT = array as T[];
  if (arrayOfT == null)
    throw new InvalidOperationException();
  CopyTo(arrayOfT, arrayIndex); // calls your good generic method
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:34:11.180

我猜该方法`CopyTo(Array array, index)`是明确实现的。这意味着，如果您将对象视为 ICollection，您只会看到该方法：

```
var collection = (ICollection)stack;
collection.CopyTo(array, 0); 
```

# javascript - 在 DOM 中测试元素的最佳方法是什么

> ID：10589810
> 
> 赞同：6
> 
> 时间：2012-05-14T19:26:57.173
> 
> 标签：javascript, jquery, css, performance, dom

有几种方法可以做到这一点（我知道）。

测试css显示

```
if ($('#foo').css('display') == 'none') 
```

测试可见性

```
if ($('#foo').is(':visible')) 
```

在可见性中，我可以检查元素是否存在。

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。
> 
> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。

[来源](http://api.jquery.com/visible-selector/)

但是，请注意，在两者中我都无法测试可见性（由用户），因为：

> 隐藏元素可以通过将 display 属性设置为“none”或将 visibility 属性设置为“hidden”来完成。但是，请注意这两种方法会产生不同的结果：
> 
> **可见性：**隐藏隐藏一个元素，但它仍然会占用与以前相同的空间。该元素将被隐藏，但仍会影响布局。
> 
> **display:** none 隐藏元素，不会占用任何空间。该元素将被隐藏，页面将显示为好像该元素不存在：

[来源](http://www.w3schools.com/css/css_display_visibility.asp)

因此，在这两个示例中，我都没有测试该元素是否对用户在所有意义上都是可见的。

所以我的问题是：

*   **上面的两个 if 代码有什么区别？**
*   **测试元素是否对用户可见的最佳方法是什么：**

我是否必须使用类似的东西：

```
if ($('#foo').is(':visible') && 
    $('#foo').css('opacity') > 0 && 
    $('#foo').css('visibility') != 'hidden') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:20:21.997

我认为您最好的选择是实现如下所示的自定义功能，并在出现新事物时进行测试/改进，

```
$.fn.isReallyVisible = function () { //rename function name as you like..
    return (this.css('display') != 'none' &&
            this.css('visibility') != 'hidden' &&
            this.css('opacity') > 0);
} 
```

上面应该是跨浏览器证明，因为我们使用的是 jQuery`.css`函数（特别是不透明度）。

[**演示**](http://jsfiddle.net/skram/PpCuA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:43:21.267

两者之间的区别在于，使用“可见”属性隐藏元素会留在页面上，而不是实际显示。因此，当页面呈现显示的其余部分时，将考虑它的间距。

似乎以另一种方式执行此操作实际上会阻止将元素放置到页面上，这可能会改变页面上其他元素的布局方式。

根据我的经验，通常测试可见部分就足够了，但是如果您想要更完整，那么是的，您必须在多个属性上使用“&&”条件进行检查。这实际上完全取决于您使用的代码有多干净，以及系统的其余 UI 方面的测试有多好。

要考虑的另一件事是测试的目的是什么。您是否正在测试您编写的代码，或者浏览器如何使用 Javascript 来呈现页面？您想要测试您正在创建的代码，并依赖于浏览器工作的事实（因为如果浏览器停止工作，那么整个事情无论如何都是不可靠的）。因此，如果您的代码告诉元素设置某个属性，那么检查该属性就是您需要做的所有测试。除此之外的任何事情都只能通过在代码本身之外进行测试来证明（例如手动查看页面和其他类似的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:27:58.857

如果您想查看 DOM 中是否存在某个元素，您可以这样做：

```
$.fn.exists = function () {
    return this.length > 0;
} 
```

用法：

```
$('#myid').exists(); 
```

# android - Android 框架可绘制对象

> ID：10589814
> 
> 赞同：0
> 
> 时间：2012-05-14T19:27:17.293
> 
> 标签：android, version-control, android-source

我需要来自 Android 框架 (ICS) 源的一些文件来自定义我的应用程序。我在这里找到它：[https](https://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/res/res/) ://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/res/res/但整个仓库的大小超过 500MB。由于我的连接速度很慢，我无法下载。有什么办法可以只下载[https://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/res/res/](https://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/res/res/)的内容。这是托管在其他地方吗？或者是否有可用的 SVN 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:04:14.990

我不知道，但也许[这个](http://androiddrawableexplorer.appspot.com/)网页可以帮助你。

# java - 无法使用 oracle.apex.APEXExport 类登录数据库

> ID：10589818
> 
> 赞同：1
> 
> 时间：2012-05-14T19:27:43.770
> 
> 标签：java, oracle, oracle-apex, oracle11gr2, ora-01017

我需要将多个 APEX 应用程序批量导出到 .sql 脚本中。我正在尝试使用有问题的 Oracle 不受支持的（尽管与 11g 服务器一起打包）Java 实用程序。

我有两个数据库实例。它们都是 11gR2 XE。一个在我的本地 VMWare 机器上运行以测试 puproses，另一个在远程 APEX 主机上运行。

问题是，我无法连接到后一个实例。这就是我运行它的方式：

```
java -Duser.language=en -Duser.region=us oracle.apex.APEXExport -db my.hosting.net:1521:xe -user scott -password tiger -applicationid 101 
```

这就是错误堆栈：

```
Exception in thread "main" java.sql.SQLException: ORA-01017: invalid username/password; logon denied                                                                                       

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)                                                                                                      
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:330)                                                                                                                   
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:282)                                                                                                                   
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:277)                                                                                                                   
    at oracle.jdbc.driver.T4CTTIoauthenticate.receiveOauth(T4CTTIoauthenticate.java:791)                                                                                               
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:363)                                                                                                                  
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:453)                                                                                                       
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:164)                                                                                                                 
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:34)                                                                                                 
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:753)                                                                                                                  
    at java.sql.DriverManager.getConnection(Unknown Source)                                                                                                                            
    at java.sql.DriverManager.getConnection(Unknown Source)                                                                                                                            
    at oracle.apex.APEXExport.main(APEXExport.java:316) 
```

有趣的是，我没有遇到使用 SQL*Plus 连接到相同架构的问题。

而且我从本地基于 VMWare 的实例导出应用程序也完全没有问题。

关于我应该关注的方向的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:58:16.457

好的，如果其他人遇到同样的问题......当我发布*当前*密码`alter user scott identified by tiger;`在哪里`tiger`时，它会有所帮助。所以，基本上，我只是刷新了密码，出于某种原因，这一切都开始起作用了。

# facebook - Graph API：为用户生成的照片添加标题

> ID：10589821
> 
> 赞同：3
> 
> 时间：2012-05-14T19:27:48.933
> 
> 标签：facebook, facebook-opengraph, instagram

我试图让我的应用程序使用[Open Graph 的用户生成图片功能将](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)照片发布到用户的时间轴。不幸的是，虽然我可以轻松地将图片添加到用户的时间线上，但我还没有找到任何记录在案的方式来传递标题。

Instagram 似乎已经弄清楚了：http: [//i.stack.imgur.com/TYsiX.png](http://i.stack.imgur.com/TYsiX.png)

但是，如果您访问他们其中一篇文章的页面，您会注意到标题不存在于任何 Open Graph 元标记中，所以我猜这是与 POST 一起传递的值。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:29:08.533

There is an optional message attribute that you can pass to the action:

[https://developers.facebook.com/docs/opengraph/define-actions/](https://developers.facebook.com/docs/opengraph/define-actions/)

Under optional arguments.

It takes special approval when you submit your action for approval

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:35:10.027

您应该在下图中添加“用户消息”属性。 ![在此处输入图像描述](../Images/5f92fda5f9f80996f086fbf387c50674.png) 然后在“消息”标签中给出你的标题。

# c# - VS 2010 和 Oracle 11g ORA 12514

> ID：10589823
> 
> 赞同：0
> 
> 时间：2012-05-14T19:27:51.727
> 
> 标签：c#, database, oracle

我知道，有成千上万个与我相似的主题。我都读了。没有什么对我有用。在那里我将描述我的问题：我使用 Oracle SQL 开发人员设置值创建了一个 Oracle 数据库：

```
connection name: test,
username: bob, 
password: qwerty 
Connection type: basic,
role: default, 
Hostname: localhost, 
port: 1521, 
SID : orcl 
```

我写这一切的原因是我真的尽了一切可能，我希望通过提供各种数据，有人能够帮助我。

我的下一步是使用 Oracle Developer Tools for Visual Studio 下载并安装 ODAC 11.2 第 4 版 (11.2.0.3.0)。

当我想使用服务器资源管理器从我的应用程序连接到数据库时，我正在输入以下数据：

```
data source name: //localhost:1521/test
user name: ADMIN
password : qwerty 
```

连接名称正在自动设置。

当我尝试测试连接时，我得到 ORA 12514 ......这就是我更改 tnsname.ora 的方式：

```
LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

orcl =
 (DESCRIPTION = 
   (ADDRESS_LIST =
     (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
   )
 (CONNECT_DATA =
   (SERVICE_NAME = orcl)
 )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:23:41.573

确保以下几点：

1.  Oracle 服务在 Windows 上运行。
2.  您的 pfile 或 spfile 具有 local_listener='LISTENER_ORCL'
3.  将 tnsname.ora 中的 orcl 配置更改为：

ORCL = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl) )

# java - Java 构造函数和字段初始化顺序

> ID：10589828
> 
> 赞同：8
> 
> 时间：2012-05-14T19:28:17.967
> 
> 标签：java, inheritance, initialization

我知道 Java 对象构造函数隐式初始化其实例的非静态字段。但是，我不确定这在类层次结构中发生的顺序。例如：

```
abstract public class AbstractPieceSequence implements PieceSequence
{
    private Tetromino current;
    private Tetromino preview;

    public AbstractPieceSequence()
    {
        advance();
    }

    @Override
    public final void advance()
    {
        if (preview == null) {
            current = getNextPiece();
            preview = getNextPiece();
        } else {
            current = preview;
            preview = getNextPiece();
        }
    }

    abstract protected Tetromino getNextPiece();
} 
```

* * *

```
public class ShufflePieceSequence extends AbstractPieceSequence
{
    private List<Shape> bag = new LinkedList<Shape>();

    @Override
    protected Tetromino getNextPiece()
    {
        if (bag.size() == 0) {
            Collections.addAll(bag, Shape.I, Shape.J, Shape.L, Shape.O, Shape.S, Shape.T, Shape.Z);
        }

        return Tetromino.tetrominoes.get(bag.remove(0));
    }
} 
```

父类的构造函数调用子类中的一个方法，该方法抛出一个异常，因为它的值`List<Shape> bag`当前为空。

我可以定义一个子构造函数并调用 super()，但这必须是构造函数主体中的第一行（这意味着在调用之前我仍然没有机会初始化 bag `getNextPiece`）。

我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T19:34:59.000

这是正确的。`super()`，即使您没有显式添加它，也隐含地放置在每个构造函数中。这意味着`ShufflePieceSequence`首先调用 的构造函数，但它所做的正是调用`AbstractPieceSequence`.

在`AbstractPieceSequence`您调用中定义的方法`ShufflePieceSequence`- 尚未初始化。事实上，你所做的实际上是一个**非常微妙的错误**。你永远不应该`abstract`从构造函数中调用可覆盖的（包括方法）。时期。[像pmd](/questions/tagged/pmd "显示标记为“pmd”的问题")和[findbugs](/questions/tagged/findbugs "显示标记为“findbugs”的问题")这样的AFAIR 工具将其标记为潜在错误。

# 也可以看看

*   [构造函数中可覆盖的方法调用有什么问题？](https://stackoverflow.com/questions/3404301)
*   [从构造函数调用非最终方法时要小心](http://www.informit.com/articles/article.aspx?p=20521)
*   [确保构造函数不调用可覆盖的方法](https://www.securecoding.cert.org/confluence/display/java/MET05-J.+Ensure+that+constructors+do+not+call+overridable+methods)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T19:30:45.453

对象字段未隐式初始化...您需要执行初始化。在这种情况下，也许你需要一个惰性初始化？通常让构造函数调用执行非平凡工作的方法是不愉快的，这通常是一种比它想要的更复杂的气味。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T19:31:09.893

深度优先，预购步行。

Anders 提出了一个很好的观点：Java 仅隐式初始化本机类型的字段。任何 Object 字段都只是对 Object 的引用，因此它实际上已初始化，但它已初始化为`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T12:28:33.663

在继承的情况下，调用父子类的构造函数的顺序是，总是先调用父类的构造函数，然后调用子类的构造函数。

如果没有明确给出，Sub 类默认使用 Super() 调用基类的构造函数。

# php - Facebook 连接 - 登录

> ID：10589841
> 
> 赞同：0
> 
> 时间：2012-05-14T19:29:41.740
> 
> 标签：php, facebook, facebook-login, smf

我想将 facebook 登录与基于 PHP 的 SMF（简单机器）论坛集成。现在他们为 SMF 编写的模块已有 2 年历史，并且不能与当前版本一起使用，此外所有下载链接都已损坏，因此我无法从中找到任何帮助。

我尝试了 facebook 开发者网站，但有很多随机信息非常杂乱无章。如果有人以前做过此操作（通过他们的网站或论坛集成 FBC 登录），您可以分享一些 HOW TO 信息或任何有关此主题的有用资源/文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:16:14.497

你的 SMF 版本是多少？如果您的版本是 2.0、2.0.1、2.0.2、2.0.3、2.0.4，您可以下载模块

```
http://custom.simplemachines.org/mods/index.php?mod=2322 
```

您可以在此处查看如何在 facebook 开发者网站中进行设置。

```
http://www.simplemachines.org/community/index.php?topic=365503.0 
```

# php - 如何从 CakeEmails 中删除 CakePHP 公司 "This email was generated with CakePHP Framework"

> ID：10589846
> 
> 赞同：6
> 
> 时间：2012-05-14T19:30:02.253
> 
> 标签：php, email, cakephp-2.0

我正在使用 CakePHP 2.0 和 CakeEmail。

我可以毫无问题地发送电子邮件。

但是，我想删除

“这封电子邮件是使用 CakePHP 框架生成的”

在我的应用程序发送的每封电子邮件的末尾添加。那可能吗？

太感谢了！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T20:03:59.463

# 简短的回答

它在`/app/View/Layouts/Emails/html/default.ctp`和中`/app/View/Layouts/Emails/text/default.ctp`。

它**不在**`/app/View/Emails/html/default.ctp`or中`/app/View/Emails/text/default.ctp`。出于某种原因，编辑这些文件并没有什么不同（看起来）。

* * *

## 稍长的答案

默认情况下，`/app/View/Layouts/Emails/html/default.ctp`如下所示：

```
<?php
/**
 *
 * PHP 5
 *
 * CakePHP(tm) : Rapid Development Framework (http://cakephp.org)
 * Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 * @link          http://cakephp.org CakePHP(tm) Project
 * @package       Cake.View.Layouts.Emails.html
 * @since         CakePHP(tm) v 0.10.0.1076
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 */
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
    <title><?php echo $title_for_layout;?></title>
</head>
<body>
    <?php echo $content_for_layout;?>

    <p>This email was sent using the <a href="http://cakephp.org">CakePHP Framework</a></p>
</body>
</html> 
```

要删除页脚，请删除此行：

```
<p>This email was sent using the <a href="http://cakephp.org">CakePHP Framework</a></p> 
```

然后对 . 做同样的事情`/app/View/Layouts/Emails/text/default.ctp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T16:43:35.287

这是2岁。但我会建议一个可能更“正确”的替代方案，尽管是 Glen Balliets 的回答让我想到了这一点。

而不是乱用默认布局......您也可以在发送电子邮件之前调用它。

```
$cakeemail->template('viewtemplate',null); 
```

其中第一个参数是视图的名称，第二个参数 NULL 表示不为电子邮件使用任何布局。它记录在这里[http://api.cakephp.org/2.3/class-CakeEmail.html](http://api.cakephp.org/2.3/class-CakeEmail.html)声明您可以将布局设置为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:33:13.423

如果您使用像 aptena、eclipse、dreamweaver 这样的编辑器，我会说对 cakephp 中的文件内容进行 grep 样式搜索以查找该短语。因为它必须在框架内以某种方式硬编码。

不知道删除类似的东西是否违反了蛋糕的使用条款，但是。如果你想删除它，那将是我的开始，因为我不是 100% 熟悉 cake 的文件结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:38:23.637

该行实际上是位于HTML 邮件`app/View/Layouts/Emails/text/default.ctp`的电子邮件布局的一部分。`app/View/Layouts/Emails/html/default.ctp`您可以安全地编辑它。[CakePHP 书籍中](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-templated-emails)有关电子邮件模板的更多信息。

# biztalk - BizTalk 脚本 - 接收位置计划

> ID：10589848
> 
> 赞同：0
> 
> 时间：2012-05-14T19:30:18.857
> 
> 标签：biztalk, biztalk-2009

我的任务是处理两件我看不到支持的事情。

1.  编写脚本以启用带有计划的接收位置（当前未设置计划）
2.  编写脚本以从接收位置删除计划。

我看到了如何启用/禁用接收位置，但我没有看到如何通过脚本操作时间表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:45:40.230

检查下面的文章。这可能有助于创建脚本。

[http://msdn.microsoft.com/en-us/library/aa559496.aspx](http://msdn.microsoft.com/en-us/library/aa559496.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:15:44.770

创建两个绑定文件，一个代表带调度的接收端口，一个不代表接收端口。然后使用 BTSTask [importbindings](http://msdn.microsoft.com/en-us/library/aa560656.aspx)命令导入您想要的任何绑定文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:20:37.530

不支持编写我知道的接收位置的调度脚本。不过，您可以通过许多其他方式实现这一目标。最简单的方法是使用 shell script/etc 编写将文件传递到接收位置的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:44:34.987

在走自己的脚本路线之前，我会考虑 2 个选项

1.  检查接收位置中的计划/服务窗口功能，看看它是否能解决您的问题，否则
2.  有一个社区计划任务适配器，适用于此类活动。 [http://biztalkscheduledtask.codeplex.com/](http://biztalkscheduledtask.codeplex.com/)

# javascript - 如何在将内容添加到 div 时自动滚动？

> ID：10589853
> 
> 赞同：5
> 
> 时间：2012-05-14T19:30:49.277
> 
> 标签：javascript, jquery, html, css, scroll

我有一个固定尺寸的 div，一些 JavaScript 函数将随着时间的推移将文本放入其中。当文本量超过框的高度时，由于overflow:scroll 会出现一个滚动条。

新问题是随着更多内容的出现，进入 div 的视图会停留在同一位置。我的意思是，随着更多内容出现在下方，它会在任何地方保持滚动，除非您手动向下滚动，否则它会被隐藏。我想让它在出现新内容时自动滚动到底部，以便用户自然地看到最近出现的内容而不是最旧的内容。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:36:27.697

您可以[`scrollTop`](http://api.jquery.com/scrollTop/)在每次添加文本后使用方法：

```
$("div").scrollTop($("div").children().height()); 
```

使用内部块获得真实高度。

**演示：http:** [//jsfiddle.net/eyY5k/1/](http://jsfiddle.net/eyY5k/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T01:14:24.077

我发现这种方法可以满足我的需求：

```
var realHeight = $("#history")[0].scrollHeight;
$("#history").scrollTop(realHeight); 
```

请注意，这使用了 jquery。

# android - 如何在 onUpgrade 中添加一列并将现有行设置为特定值？

> ID：10589858
> 
> 赞同：5
> 
> 时间：2012-05-14T19:31:05.160
> 
> 标签：android, sql

如何在 DatabaseHelper onUpgrade 中添加一列并将预先存在的行设置为特定值？

我试过了：

```
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    ...
       if (oldVersion < 2) {
          db.execSQL("ALTER TABLE " + MyTableName + " ADD COLUMN "
              + MyNewColumn + " TEXT;");      
          db.execSQL("UPDATE " + MyTableName  + " SET " +
               MyNewColumn  + "=" + "value for existing;");
       }
    } 
```

但我认为更改尚未提交，因为它说该列不存在。有什么建议吗？

编辑：添加了更多周边代码

编辑：我的错误。我只是错过了价值部分的引用，而关于没有列的错误让我失望，但问题是它正在寻找我在没有引用的情况下使用的值的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:48:28.797

添加列并不像您显示的那样简单，因为 onUpgrade 将在您每次升级数据库时运行，并且第二次添加列将失败......如果您希望快速而肮脏地做到这一点，您可以尝试将其包装起来抓住

```
try {
    db.execSQL("ALTER TABLE sometable ADD COLUMN newcolumn integer");   
}
catch(Exception e) {
    e.printStackTrace();
} 
```

更好的方法是将所有数据从表中移出到临时表中，删除并重新创建表，然后将数据放回。这是我之前使用过的示例

```
//Update old Table
        if(DBVER< 1060){

            List<String> columns = DB.GetColumns(db, "listitems");
            db.execSQL("ALTER table listitems RENAME TO 'temp_listitems); ") ;
            String tblListItems = "create table if not exists listitems " +
                    "(id integer primary key autoincrement, " +
                    "listid integer, " +
                    "itemid integer, " +
                    "qty integer, " +
                    "collected integer, " +
                    "qtytype integer, " +
                    "tabid integer); " ;
            db.execSQL(tblListItems);
            columns.retainAll(DB.GetColumns(db, "listitems"));
            String cols = DB.join(columns, ","); 
            db.execSQL(String.format( "INSERT INTO %s (%s) SELECT %s from temp_%s", "listitems", cols, cols, "listitems"));
            db.execSQL("DROP table 'temp_" + "listitems");

        } 
```

这是一个链接[http://www.devdaily.com/android/sqlite-alter-table-syntax-examples](http://www.devdaily.com/android/sqlite-alter-table-syntax-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:49:01.470

```
 db.execSQL("ALTER TABLE " + MyTableName + " ADD "
           + MyNewColumn + " TEXT;"); 
```

尝试不使用 Column: 语法是：

更改表 [TABLE_NAME] 添加 [COLUMN_NAME] 数据类型

# c++ - 如何在 Qt Nokia 屏幕底部的栏上添加按钮？

> ID：10589863
> 
> 赞同：3
> 
> 时间：2012-05-14T19:31:34.000
> 
> 标签：c++, qt, nokia

我正在为运行诺基亚 Belle 的诺基亚 N8 开发一个应用程序，并希望在屏幕底部栏上的左箭头按钮和菜单按钮之间添加按钮。

在诺基亚 Internet Radio 应用程序中播放电台时可以看到我的意思的一个例子，据我所知，它是一个移动 Qt 小部件应用程序（不是 Qt Quick）。

在四处搜索（[http://www.developer.nokia.com/Community/Discussion/showthread.php?233396-QMenu-in-Symbian-Belle-in-Qt-C](http://www.developer.nokia.com/Community/Discussion/showthread.php?233396-QMenu-in-Symbian-Belle-in-Qt-C)）后，我尝试了此代码，但按钮确实没出现：

```
QAction *pDeleteButton = new QAction(style()->standardIcon(QStyle::SP_TrashIcon),QString(tr("Delete")), this);
pDeleteButton->setSoftKeyRole(QAction::NoSoftKey);
addAction(pDeleteButton); 
```

我把这段代码放在 mainwindow.cpp 的构造函数中。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:52:29.590

我不是手机编程专家，但`QAction`您正在创建的没有父小部件。如果您查看您正在链接的示例，您会发现原始海报通过 为操作分配了一个菜单`setMenu()`。你已经尝试过这样的事情了吗？如果是这样，我建议您在代码中添加更多上下文，也许是一个最小的示例。

# java - 在 WebSphere 中允许 CrossContext

> ID：10589864
> 
> 赞同：4
> 
> 时间：2012-05-14T19:31:36.453
> 
> 标签：java, servlets, websphere-7, cross-context

我需要通过使用将请求从一个应用程序发送到另一个应用程序，`sc.getRequestDispatcher("/Forward2.jsp");`如果网络服务器配置不正确，这将不起作用。我发现在 Tomcat 中我们可以使用`crossContext="true"`. 但是我在哪里可以配置 WebSphere 7 来获得相同的结果？

谢谢。

# python - 提高 NumPy 数组上的操作性能

> ID：10589867
> 
> 赞同：9
> 
> 时间：2012-05-14T19:32:00.180
> 
> 标签：python, numpy

我正在使用 numpy.delete 从 while 循环内的数组中删除元素。仅当数组不为空时，此 while 循环才有效。此代码工作正常，但当数组包含超过 1e6 个元素时，速度会大大降低。这是一个例子：

```
while(array.shape[0] > 0):
     ix = where((array >= x) & (array <= y))[0]
     array = delete(array,ix,None) 
```

我试图让这段代码高效，但我找不到加速 while 循环的好方法。我认为这里的瓶颈是必须涉及某种副本的删除。我已经尝试使用屏蔽数组以避免复制，但我不擅长 python 并且屏蔽数组并不那么容易搜索。有没有一种快速的方法来使用删除或替换它，以便上面的循环可以处理 7e6 元素而无需花费 24 小时？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T20:25:38.060

因此，您可以通过以下方式显着提高代码的性能：

*   消除循环；和

*   避免删除操作（这会导致原始数组的副本）

NumPy 1.7 引入了一个比原来更容易使用的新掩码；它的性能也更好，因为它是*NumPy 核心数组对象的一部分*。我认为这可能对您有用，因为使用它***可以避免昂贵的删除操作***。

换句话说，不要删除不需要的数组元素，只需将它们屏蔽即可。这已在其他答案中提出，但我建议使用*新面具*

要使用 NA，只需导入 NA

```
>>> from numpy import NA as NA 
```

然后对于给定的数组，将 maskna 标志设置为*True*

```
>>> A.flags.maskna = True 
```

或者，大多数数组构造函数（从 1.7 开始）都有参数 maskna，您可以将其设置为*True*

```
>>> A[3,3] = NA

array([[7, 5, 4, 8, 4],
       [2, 4, 3, 7, 3],
       [3, 1, 3, 2, 1],
       [8, 2, 0, NA, 7],
       [0, 7, 2, 5, 5],
       [5, 4, 2, 7, 4],
       [1, 2, 9, 2, 3],
       [7, 5, 1, 2, 9]])

>>> A.sum(axis=0)
array([33, 30, 24, NA, 36]) 
```

通常这不是您想要的——即，您仍然希望将 NA 视为 0 的列的总和：

要获得该行为，请为 skipma 参数传入*True （大多数 NumPy 数组构造函数在 NumPy 1.7 中都有此参数）：*

```
>>> A.sum(axis=0, skipna=True)
array([33, 30, 24, 33, 36]) 
```

总之，为了加快你的代码，消除循环并使用新的掩码：

```
>>> A[(A<=3)&(A<=6)] = NA

>>> A
array([[8, 8, 4, NA, NA],
       [7, 9, NA, NA, 8],
       [NA, 6, 9, 5, NA],
       [9, 4, 6, 6, 5],
       [NA, 6, 8, NA, NA],
       [8, 5, 7, 7, NA],
       [NA, 4, 5, 9, 9],
       [NA, 8, NA, 5, 9]]) 
```

NA 占位符——在这种情况下——表现得像 0，我相信这是你想要的：

```
>>> A.sum(axis=0, skipna=True)
array([32, 50, 39, 32, 31]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:43:55.040

如果我错了，请纠正我，但我认为你可以这样做：

```
mask=np.where((array >= x) & (array <= y),True,False)
array=array[mask] 
```

放弃整个循环？

此外，在我的解释器中，`array >= x & array <= y`会产生异常。你可能的意思是： `(array >= x) & (array <= y)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:41:48.080

根据 numpy.delete 的文档，该函数返回输入数组的副本，其中删除了指定的元素。所以你复制的数组越大，函数就越慢。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html)

为什么你需要经常删除数组的块？如果您的数组非常动态，则最好使用 a`list`来存储数组的各个部分，并且一次只删除较小的位。

# c# - ClientScript.RegisterClientScriptBlock 仅适用于 PageLoad 事件

> ID：10589869
> 
> 赞同：0
> 
> 时间：2012-05-14T19:32:05.127
> 
> 标签：c#, asp.net, registerclientscriptblock, clientscript

我正在尝试注册一个简单的脚本-

```
ClientScript.RegisterClientScriptBlock(typeof(Page), "myscript", "<script>testfun();</script>"); 
```

当我将它放在页面加载事件中时，这条线工作正常。但是，每次用户在 gridview 中选择一行时，我都需要一些客户端函数来执行，因此在 GridView.SelectedIndexChanged 事件中，我添加了相同的行，但是，它在那里不起作用。谁能指出为什么会发生这种情况或指导我寻求更优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:46:04.887

`RegisterClientScriptBlock`不会执行您的脚本，而只会将其发送到页面中，然后发送给客户端。它是具有`*.js`文件的程序化等价物。该脚本仅在生成的 HTML 页面加载到客户端时执行。如果您希望某些 java 脚本在特定控件的事件上运行，您需要`javascript`像这样将一个方法连接到它：

```
onclick="javascript_method();" 
```

为此，您必须`javascript_method()`在文件中定义`*.js`或通过添加到您的页面`RegisterClientScriptBlock`

# java - Tomcat - 当应用程序未正确部署时如何获取 http 500 而不是 404？

> ID：10589871
> 
> 赞同：3
> 
> 时间：2012-05-14T19:32:22.817
> 
> 标签：java, tomcat, deployment, http-status-codes

我们有几个使用 Spring MVC 的 REST 应用程序。部署后有时某些应用程序无法启动。当我们的 Javascript 客户端尝试访问资源 url 时，它会得到 404 状态码。因此，它假定该资源不存在。更适合我们的是 Tomcat 响应中返回的 http 状态 500。是否可以更改此默认 Tomcat 行为？

我发现与 JBoss 类似的问题（使用嵌入式 Tomcat）但没有答案： [https ://serverfault.com/questions/367986/mod-jk-fails-to-detect-error-state-because-jboss-gives-404 -不是 500](https://serverfault.com/questions/367986/mod-jk-fails-to-detect-error-state-because-jboss-gives-404-not-500)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:06:24.437

# HTTP 代理

如果您的 Tomcat 服务器前面有某种代理（如[apache](/questions/tagged/apache "显示标记为“apache”的问题")或[nginx](/questions/tagged/nginx "显示标记为“nginx”的问题")），我相信可以将其配置为将 404 转换为不同的状态代码和错误页面。如果您没有任何代理或希望解决方案保持独立：

# 自定义 Spring 加载器和 servlet 过滤器

由于您使用的是 Spring，我猜您正在使用[`ContextLoaderListener`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)in引导它`web.xml`：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

此类负责引导 Spring，这是在大多数情况下导致应用程序启动失败的步骤。只需扩展该类并吞下任何异常，使其永远不会到达 servlet 容器，因此 Tomcat 不会认为您的应用程序部署失败：

```
public class FailSafeLoaderListener extends ContextLoaderListener {

    private static final Logger log = LoggerFactory.getLogger(FailSafeLoaderListener.class);

    @Override
    public void contextInitialized(ServletContextEvent event) {
        try {
            super.contextInitialized(event);
        } catch (Exception e) {
            log.error("", e);
            event.getServletContext().setAttribute("deployException", e);
        }
    }
} 
```

代码非常简单——如果 Spring 初始化失败，记录异常并将其全局存储在`ServletContext`. 新加载器必须替换旧加载器`web.xml`：

```
<listener>
    <listener-class>com.blogspot.nurkiewicz.download.FailSafeLoaderListener</listener-class>
</listener> 
```

现在您所要做的就是在全局过滤器中从 servlet 上下文中读取该属性，并在应用程序无法启动 Spring 时拒绝所有请求：

```
public class FailSafeFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}

    @Override
    public void destroy() {}

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        Exception deployException = (Exception) request.getServletContext().getAttribute("deployException");
        if (deployException == null) {
            chain.doFilter(request, response);
        } else {
            ((HttpServletResponse) response).sendError(500, deployException.toString());
        }
    }
} 
```

将此过滤器映射到所有请求（或者可能只是控制器？）：

```
<filter-mapping>
    <filter-name>failSafeFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

解决方案可能不是您想要的，但我给您一个通用的、有效的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-23T13:25:30.343

是的，有一些改变是可能的。

我们所做的 ：

*   编写一个 servlet，执行以下操作：

    ```
    if (req.getContextPath().isEmpty()){
        resp.setStatus(HttpServletResponse.SC_SERVICE_UNAVAILABLE);
    } else {
        resp.setStatus(HttpServletResponse.SC_NOT_FOUND);
    } 
    ```

*   将包含此类的 jar 放入 tomcat lib。

*   更改 conf/web.xml 以添加 servlet 并将其映射到`*.404`

*   将全局错误设置`404`为`/404.404`.

    ```
    <error-page>
        <error-code>404</error-code>
        <location>/404.404</location>
    </error-page> 
    ```

您的 servlet 将与根应用程序和所有已部署的应用程序一起调用。

# java - 为什么我在 Java 中的合并排序实现会出错？

> ID：10589876
> 
> 赞同：0
> 
> 时间：2012-05-14T19:32:54.467
> 
> 标签：java, algorithm

我正在同时学习 Java 和算法。我在这个类中实现了归并排序。

```
public class Sorter {
    private void merge(int [] numbers, int low, int mid, int high) {
            // create a new array that will contain the merged integers
            int[] arrIntMerged = new int[high - low + 1];

            // set indices
            int i = low, j = mid + 1, k = 0;

            // add the lesser integer into merged array
            while (i <= mid && j <= high) {
                if (numbers[i] < numbers[j]) {
                    arrIntMerged[k] = numbers[i];
                    i++;
                } else {
                    arrIntMerged[k] = numbers[j];
                    j++;
                }
                k++;
            }

            // add anything left in the left side of the array
            while (i <= mid) {
                arrIntMerged[k] = numbers[i];
                i++;
                k++;
            }

            // add anything left in the right side of the array
            while (j <= high) {
                arrIntMerged[k] = numbers[j];
                j++;
                k++;
            }

            // write this newly created array into the positions in the original array
            for (int l = 0; l < arrIntMerged.length; l++) {
                numbers[l + low] = arrIntMerged[l];
            }
        }

        // recursive implementation
        private void _mergeSort(int[] numbers, int low, int high) {
            if (low == high)
                return;
            else {
                // find midpoint while preventing overflow
                int mid = low + (high - low) / 2;
                // sort left and right side
                _mergeSort(numbers, low, mid);
                _mergeSort(numbers, mid + 1, high);
                // merge both sides
                merge(numbers, low, mid + 1, high);
            }
        }

        // friendly interface to begin merge sort
        public void mergeSort(int[] numbers) {
            _mergeSort(numbers, 0, numbers.length - 1);
        }
} 
```

然后我在 Eclipse 的剪贴簿中检查了这段代码。

```
Sorter sorter = new Sorter();
int[] nums = {5, 6, 7, 8, 1, 2, 3, 4};
sorter.mergeSort(nums);
System.out.println(Arrays.toString(nums)); 
```

不幸的是，标准输出读取`[2, 3, 4, 5, 6, 7, 8, 1]`，这是乱序的。为什么我的归并排序出错了？我很确定我的边界条件`_mergeSort`，所以我怀疑我的`merge`函数有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:14:20.583

您的问题来自以下作业`merge`：

```
j = mid + 1 
```

`mid`已经是合并右侧第一个数字的索引，这个增量使合并逻辑的其余部分从错误的数组位置开始。

因为看起来您正在学习，所以我不会通过发布所需的实际代码更改来破坏您的体验，但这里有一个提示：检查您将事物与`mid`值进行比较的所有地方。

# winforms - 在 datagridview 列中格式化 datetimepicker

> ID：10589877
> 
> 赞同：3
> 
> 时间：2012-05-14T19:33:04.350
> 
> 标签：winforms, datagridview, customcolumn

我正在尝试使用[此 MSDN 示例中关于如何在 DataGridViewCells 中托管控件的 DateTime 选择器自定义 gridview 列类型。](http://msdn.microsoft.com/en-us/library/7tas5c80%28v=vs.90%29.aspx)我想以 24 小时格式显示小时和分钟，没有秒或 AM PM 指示器。

我已将 EditingControlFormattedValue 设置为“HH:mm”，并且在未实际编辑时正确显示该值。

编辑时，如果在 CalendarEditingControl 的构造函数中将编辑控件设置为 CustomFormat = "HH:mm"，则控件显示星期和月份。（！？）

当我改为使用 Format = DateTimePickerFormat.Time 时，控件在编辑时显示 AM 或 PM。

如何说服此控件仅显示我关心的 DateTime 值的部分？（C#，VS 2008）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:04:06.423

您需要对链接代码进行一些调整，以使其按照您想要的方式工作：

*   注释掉 CalendarCell() 构造函数 ( `this.Style.Format = "d";`)中的硬编码行

*   告诉 CalendarEditingControl 使用您自定义的格式：

*   在设计器中，设置你想要的格式（EditColumns->DefaultCellStyle->Format）

    ```
    public void ApplyCellStyleToEditingControl(DataGridViewCellStyle dataGridViewCellStyle)
    {
        this.Format = DateTimePickerFormat.Custom;
        this.CustomFormat = dataGridViewCellStyle.Format;
        // ... other stuff
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:20:42.387

我发现我需要进行以下更改：

在 CalendarCell 的构造函数中，将格式更改为 24 小时制。

```
public CalendarCell()
    : base()
{
    // Use the 24hr format.
     //this.Style.Format = "d";
     this.Style.Format = "HH:mm";
} 
```

在编辑控件的构造函数中指定使用自定义格式。我还冒昧地设置了`ShowUpDown`true 以便在编辑单元格时不显示日历图标：

```
public CalendarEditingControl()
{
    //this.Format = DateTimePickerFormat.Short;
    this.Format = DateTimePickerFormat.Custom;
    this.CustomFormat = "HH:mm";
    this.ShowUpDown = true;
} 
```

更改 EditingControlFormattedValue。这似乎实际上并没有必要，但按原样离开感觉很恶心。

```
// Implements the IDataGridViewEditingControl.EditingControlFormattedValue 
// property.
public object EditingControlFormattedValue
{
    get
    {
        //return this.Value.ToShortDateString();
        return this.Value.ToString("HH:mm");
    }
    set
    {
        if (value is String)
        {
            try
            {
                // This will throw an exception of the string is 
                // null, empty, or not in the format of a date.
                this.Value = DateTime.Parse((String)value);
            }
            catch
            {
                // In the case of an exception, just use the 
                // default value so we're not left with a null
                // value.
                this.Value = DateTime.Now;
            }
        }
    }
} 
```

# java - 为什么我的属性监听器不开火？

> ID：10589880
> 
> 赞同：1
> 
> 时间：2012-05-14T19:33:15.083
> 
> 标签：java, propertychangelistener

这就是我的代码的样子：

```
Class A {

  private boolean valueChanged;

  public static void main(String args[]) {

    B obj = new B();
    obj.addPropertyChangeListener("valueChanged", new ValueChangeListener());
    obj.someMethodThatFiresChange();
 }

  private class ValueChangeListener implements PropertyChangeListener {
    public void propertyChange(PropertyChangeEvent evt) {
         if(Boolean.TRUE.equals(evt.getNewValue()) {
            doSomething(); //code never breaks here!!
         }
    }
  }

} 
```

* * *

```
Class B {

 private boolean valueChanged;

 public void setValueChanged(boolean b) { 

     boolean oldVal = valueChanged;
     valueChanged = b;
     firePropertyChange("valueChanged", oldVal, valueChanged);
 }

 public void someMethodThatFiresChange() {
     setValueChanged(true);
 }

} 
```

然而，这段代码似乎不起作用——它永远不会到达事件触发时应该执行的块！我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:50:28.213

这对我有用：

```
 public class A {

    /**
     * @param args
     */
    public static void main(String[] args) {

        B obj = new B();
        obj.addPropertyChangeListener("valueChanged", new ValueChangeListener());
        obj.someMethodThatFiresChange();

    }

    private static final class ValueChangeListener implements PropertyChangeListener {

        public void propertyChange(PropertyChangeEvent event) {
            System.out.println("huhu");

            if(Boolean.TRUE.equals(event.getNewValue())) {
                System.out.println("haha");
             }

        }

    }

    private static final class B {

        private boolean valueChanged;

        private final PropertyChangeSupport pcSupport = new PropertyChangeSupport(this);

        public void setValueChanged(boolean b) {

            boolean oldVal = valueChanged;
            valueChanged = b;
            pcSupport.firePropertyChange("valueChanged", oldVal, valueChanged);
        }

        public void someMethodThatFiresChange() {
            setValueChanged(true);
            setValueChanged(false);
            setValueChanged(true);
        }

        public void addPropertyChangeListener(String propertyName, PropertyChangeListener listener) {
            pcSupport.addPropertyChangeListener(propertyName, listener);
        }

        public void addPropertyChangeListener(PropertyChangeListener listener) {
            pcSupport.addPropertyChangeListener(listener);
        }
    }

   } 
```

输出：

```
huhu
haha
huhu
huhu
haha 
```

我认为您在示例中遗漏了一些东西。

# .net - 在哪里可以使用 Windows 7 中的 System.Speech 获取 .net 应用程序的声音？

> ID：10589881
> 
> 赞同：9
> 
> 时间：2012-05-14T19:33:34.060
> 
> 标签：.net, text-to-speech, sapi

我对 Windows 中的文本到语音技术感到非常困惑。我有一个稍微特殊的要求：我需要使用 System.Speech 程序集从在 Win 7 中运行的 .net 程序输出语音。我想要一个好听的机器人声音，不像 Microsoft Anna 那样带有浓重的美国口音。

.net api 可以使用哪些第 3 方声音？有谁知道一个好的英国（但不是太英国）的声音，最好是免费的或便宜的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T19:54:58.630

我相信当前的 TTS 引擎使用的是[SAPI5](http://en.wikipedia.org/wiki/Microsoft_Speech_API#SAPI_5_Voices)语音。我没有玩过 SAPI4 以外的 TTS，但是一些搜索“SAPI5 声音”产生了相关链接。也许这可以带你走得更远，真正找到你正在寻找的声音？

1.  [http://dimio.altervista.org/eng/](http://dimio.altervista.org/eng/)
2.  [http://www.cepstral.com/demos/](http://www.cepstral.com/demos/) - 一些商业声音

希望这可以帮助！

# javascript - 为什么 $(':radio').change() 在新的 jQuery 中停止工作？

> ID：10589885
> 
> 赞同：-1
> 
> 时间：2012-05-14T19:33:52.243
> 
> 标签：javascript, jquery, dom

我正在使用两个 jQuery 版本测试以下代码：1.5.1 和 1.7.2

```
$(':radio').change(function(){alert(1)}); 
```

它适用于旧的 jQuery 而不是新的。为什么我必须`.click()`在新版本中使用？

浏览器：Chrome 18

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:39:05.233

这个对我有用：

```
<input type="radio" name="foo" value="1" checked /> Radio 1 <br/>
<input type="radio" name="foo" value="2"/> Radio 2 <br/>

<script>
$(function() {
    $(':radio').change(function() {
        alert(this.value);
    });​
});
</script> 
```

[http://jsfiddle.net/alnitak/zsMAX/](http://jsfiddle.net/alnitak/zsMAX/)设置为使用 jQuery 1.7.2

# c# - 如何为 Windows 7 的开始菜单开发一个小部件

> ID：10589886
> 
> 赞同：0
> 
> 时间：2012-05-14T19:33:59.747
> 
> 标签：c#, winapi, c#-4.0, windows-7, startmenu

我想为 Windows 7 的开始菜单开发一个谷歌搜索器。

它意味着一个开始菜单的小部件，用于显示开始菜单搜索模式的谷歌搜索结果。

我不知道是否可以这样做（开始菜单的类似小部件）。如果可能的话，我该怎么做。（我知道如何从谷歌获取搜索结果！我想在开始菜单中显示它们）

# php - 在 MySQL 数据库中存储 IP 地址（IPv4 和 IPv6）

> ID：10589887
> 
> 赞同：11
> 
> 时间：2012-05-14T19:34:03.110
> 
> 标签：php, mysql, ip, ipv6, ipv4

好的，现在我知道类似的问题可能已经被问过一百万次了，但我是这方面的真正新手，我非常感谢你在这里的帮助。

基本上，我想将访问者的 IP 地址存储在 MySQL 中，以供以后检索和验证。我首先需要知道我需要使用什么类型的字段来存储 IP 地址。如果可能的话，我还想让系统与 IPv6 地址兼容。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T19:42:51.283

要存储 IPv4，您可以使用`INT UNSIGNED`，而对于 IPv6，您需要 a`decimal(39,0),`将 ip 存储在表中，您可以使用以下功能`INET_ATON`：

```
INSERT INTO table (ipcol) VALUES (INET_ATON('192.168.0.10')); 
```

并使用以下功能将其取回`INET_NTOA`：

```
SELECT INET_NTOA(ipcol) AS ip FROM table; 
```

这回答了 MySQL IPv6 支持之前存在的问题；**用户应该知道 MySQL 现在原生支持 IPv6：** [https ://dev.mysql.com/doc/refman/5.6/en/miscellaneous-functions.html](https://dev.mysql.com/doc/refman/5.6/en/miscellaneous-functions.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T19:40:08.257

我使用 VARBINARY(16) 作为数据类型，并使用 MySQL 函数`INET_ATON()`插入 IP 号（我后来使用 reverse 函数读取了`INET_NTOA()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:38:24.483

MySQL 中没有足够大的整数类型来存储 IPv6 地址。最紧凑的存储方式是`BINARY(16)`. 如果您只需要存储和检索地址并且不需要对它们执行逻辑操作（例如，查询哪些 IP 地址位于覆盖前缀下的网络掩码操作），那么这就足够了。如果您需要进行逻辑或位操作，则需要更花哨：您需要将 IPv6 地址存储在两个单独的 64 位整数列中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-24T11:42:14.147

你是对的，但在 MySQL 5.7 中，可以以十进制格式存储 IPV6。您也可以将 ipv6 转换为十进制，反之亦然：

**MySQL 5.0 IPV4**

`select INET_ATON('192.168.0.1')` 返回整数值：3232235521

**MySQL 5.7 IPV6**

```
select cast(conv(substr(HEX(INET6_ATON('0:0:0:0:0:FFFF:C0A8:0001')), 1, 16), 16, 10) as decimal(65))*18446744073709551616 + 
       cast(conv(substr(HEX(INET6_ATON('0:0:0:0:0:FFFF:C0A8:0001')), 17, 16), 16, 10) as decimal(65)) 
```

返回 bigint 值：281473913978881

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T19:37:41.550

`int(10)`未签名

[http://lists.mysql.com/cluster/2781](http://lists.mysql.com/cluster/2781)

# php - 使用 Curl 将标头作为数组返回

> ID：10589889
> 
> 赞同：29
> 
> 时间：2012-05-14T19:34:09.850
> 
> 标签：php, curl

我正在尝试使用 PHP 从 CURL 获取响应和响应标头，特别是对于 Content-Disposition: attachment; 所以我可以返回在标题中传递的文件名。这似乎没有在 curl_getinfo 中返回。

我尝试使用 HeaderFunction 调用函数来读取附加标题，但是，我无法将内容添加到数组中。

请问有人有什么想法吗？

* * *

下面是我的代码的一部分，它是一个 Curl 包装器类：

```
 ...
 curl_setopt($this->_ch, CURLOPT_URL, $this->_url);
 curl_setopt($this->_ch, CURLOPT_HEADER, false);
 curl_setopt($this->_ch, CURLOPT_POST, 1);
 curl_setopt($this->_ch, CURLOPT_POSTFIELDS, $this->_postData);
 curl_setopt($this->_ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($this->_ch, CURLOPT_USERAGENT, $this->_userAgent);
 curl_setopt($this->_ch, CURLOPT_HEADERFUNCTION, 'readHeader');

 $this->_response = curl_exec($this->_ch);
 $info = curl_getinfo($this->_ch);
 ...

 function readHeader($ch, $header)
 {
      array_push($this->_headers, $header);
 } 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-14T20:03:08.727

在这里，应该这样做：

```
curl_setopt($this->_ch, CURLOPT_URL, $this->_url);
curl_setopt($this->_ch, CURLOPT_HEADER, 1);
curl_setopt($this->_ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($this->_ch);
$info = curl_getinfo($this->_ch);

$headers = get_headers_from_curl_response($response);

function get_headers_from_curl_response($response)
{
    $headers = array();

    $header_text = substr($response, 0, strpos($response, "\r\n\r\n"));

    foreach (explode("\r\n", $header_text) as $i => $line)
        if ($i === 0)
            $headers['http_code'] = $line;
        else
        {
            list ($key, $value) = explode(': ', $line);

            $headers[$key] = $value;
        }

    return $headers;
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-08T10:55:28.020

c.hill 的 anwser 很棒，但如果第一个响应是 301 或 302，代码将无法处理 - 在这种情况下，只有第一个标头将添加到 get_header_from_curl_response() 返回的数组中。

我已经更新了函数以返回一个包含每个标题的数组。

首先，我使用这些行创建一个仅包含标题内容的变量

```
$header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
$header = substr($a, 0, $header_size); 
```

比我将 $header 传递给新的 get_headers_from_curl_response() 函数：

```
static function get_headers_from_curl_response($headerContent)
{

    $headers = array();

    // Split the string on every "double" new line.
    $arrRequests = explode("\r\n\r\n", $headerContent);

    // Loop of response headers. The "count() -1" is to 
    //avoid an empty row for the extra line break before the body of the response.
    for ($index = 0; $index < count($arrRequests) -1; $index++) {

        foreach (explode("\r\n", $arrRequests[$index]) as $i => $line)
        {
            if ($i === 0)
                $headers[$index]['http_code'] = $line;
            else
            {
                list ($key, $value) = explode(': ', $line);
                $headers[$index][$key] = $value;
            }
        }
    }

    return $headers;
} 
```

此函数将采用如下标题：

```
HTTP/1.1 302 Found
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Expires: -1
Location: http://www.website.com/
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
Date: Sun, 08 Sep 2013 10:51:39 GMT
Connection: close
Content-Length: 16313

HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
Date: Sun, 08 Sep 2013 10:51:39 GMT
Connection: close
Content-Length: 15519 
```

并返回一个这样的数组：

```
(
    [0] => Array
        (
            [http_code] => HTTP/1.1 302 Found
            [Cache-Control] => no-cache
            [Pragma] => no-cache
            [Content-Type] => text/html; charset=utf-8
            [Expires] => -1
            [Location] => http://www.website.com/
            [Server] => Microsoft-IIS/7.5
            [X-AspNet-Version] => 4.0.30319
            [Date] => Sun, 08 Sep 2013 10:51:39 GMT
            [Connection] => close
            [Content-Length] => 16313
        )

    [1] => Array
        (
            [http_code] => HTTP/1.1 200 OK
            [Cache-Control] => private
            [Content-Type] => text/html; charset=utf-8
            [Server] => Microsoft-IIS/7.5
            [X-AspNet-Version] => 4.0.30319
            [Date] => Sun, 08 Sep 2013 10:51:39 GMT
            [Connection] => close
            [Content-Length] => 15519
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T12:30:39.597

使用`array()`方法回调的形式应该使原始示例工作：

`curl_setopt($this->_ch, CURLOPT_HEADERFUNCTION, array($this, 'readHeader'));`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-29T11:41:32.373

修复问题：

*   标头内容包含“：”（拆分字符串）时出错
*   不支持多行标题
*   不支持重复的标头 (Set-Cookie)

这是我对这个话题的看法；-)

```
list($head, $body)=explode("\r\n\r\n", $content, 2);
$headers=parseHeaders($head); 

function parseHeaders($text) {
    $headers=array();

    foreach (explode("\r\n", $text) as $i => $line) {
        // Special HTTP first line
        if (!$i && preg_match('@^HTTP/(?<protocol>[0-9.]+)\s+(?<code>\d+)(?:\s+(?<message>.*))?$@', $line, $match)) {
            $headers['@status']=$line;
            $headers['@code']=$match['code'];
            $headers['@protocol']=$match['protocol'];
            $headers['@message']=$match['message'];
            continue;
        }

        // Multiline header - join with previous
        if ($key && preg_match('/^\s/', $line)) {
            $headers[$key].=' '.trim($line);
            continue;
        }

        list ($key, $value) = explode(': ', $line, 2);
        $key=strtolower($key);
        // Append duplicate headers - namely Set-Cookie header
        $headers[$key]=isset($headers[$key]) ? $headers[$key].' ' : $value;
    }

    return $headers;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-01T09:19:24.463

我的另一个实现：

```
function getHeaders($response){

    if (!preg_match_all('/([A-Za-z\-]{1,})\:(.*)\\r/', $response, $matches) 
            || !isset($matches[1], $matches[2])){
        return false;
    }

    $headers = [];

    foreach ($matches[1] as $index => $key){
        $headers[$key] = $matches[2][$index];
    }

    return $headers;
} 
```

用于case，请求格式为：

> 主持人：*
> 接受：*
> 内容长度：*
> 等等...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-22T11:44:35.747

简单明了

```
$headers = [];
// Get the response body as string
$response = curl_exec($curl);
// Get the response headers as string
$headerSize = curl_getinfo($curl, CURLINFO_HEADER_SIZE);
// Get the substring of the headers and explode as an array by \r\n
// Each element of the array will be a string `Header-Key: Header-Value`
// Retrieve this two parts with a simple regex `/(.*?): (.*)/`
foreach(explode("\r\n", trim(substr($response, 0, $headerSize))) as $row) {
    if(preg_match('/(.*?): (.*)/', $row, $matches)) {
        $headers[$matches[1]] = $matches[2];
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-10T17:00:15.773

C.hill 的答案很棒，但在检索多个 cookie 时会中断。在这里进行了更改

```
public function get_headers_from_curl_response($response) { 
    $headers = array(); 
    $header_text = substr($response, 0, strpos($response, "\r\n\r\n")); 
    foreach (explode("\r\n", $header_text) as $i => $line) 
         if ($i === 0) $headers['http_code'] = $line; 
         else { 
              list ($key, $value) = explode(': ', $line); $headers[$key][] = $value; 
         } 
    return $headers; 
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-09-09T10:09:57.927

您可以使用**[http_parse_headers](http://php.net/manual/fa/function.http-parse-headers.php)**函数。

它来自[PECL](https://pecl.php.net/package/pecl_http)，但你会[在这个 SO 线程中找到后备](https://stackoverflow.com/questions/6368574/how-to-get-the-functionality-of-http-parse-headers-without-pecl)。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-09-16T17:37:11.683

你可以做两种方式

1.  通过设置 curl_setopt($this->_ch, CURLOPT_HEADER, true); 标头将带有来自 curl_exec() 的响应消息；您必须从响应消息中搜索关键字“Content-Disposition:”。

2.  在调用 curl_exec() 后立即使用此函数 get_headers($url)。$url 是 curl 中调用的 url。返回是标题数组。在数组中搜索“Content-Disposition”以获得您想要的。

# ruby-on-rails-3 - 未定义的方法：使用 mongo_mapper 的 Rails 3.0.11 生成器

> ID：10589891
> 
> 赞同：0
> 
> 时间：2012-05-14T19:34:31.873
> 
> 标签：ruby-on-rails-3, mongodb, generator, mongomapper

我跑：

```
$ rails g scaffold User first_name:string last_name:string email:string website:string nodes:array links:array --orm=mongo_mapper 
```

并得到：

```
invoke  mongo_mapper
create    app/models/user.rb
(erb):1:in `template': undefined method `module_namespacing' for #<MongoMapper::Generators::ModelGenerator:0x000000035cd4a8> (NoMethodError)
...
from /home/thrive/.rvm/gems/ruby-1.9.2-p290@mlrepo/gems/mongo_mapper-0.11.1/lib/rails/generators/mongo_mapper/model/model_generator.rb:17:in `create_model_file'
... 
```

[完整的错误输出](http://pastie.org/3911478)...有人知道这里发生了什么吗？

我的意思是它是一个 .rb 文件，其中看起来是 ERB 代码：

```
<%= module_namespacing do - %> 
```

导致文件的错误：

*   [模型生成器.rb](https://github.com/jnunemaker/mongomapper/blob/master/lib/rails/generators/mongo_mapper/model/model_generator.rb)
*   [模型.rb](https://github.com/jnunemaker/mongomapper/blob/master/lib/rails/generators/mongo_mapper/model/templates/model.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:47:41.520

看起来名为“generator-parent-option”的边缘分支可以解决问题：

```
#/Gemfile
gem 'mongo_mapper', :git => 'git://github.com/bearded/mongomapper.git', :branch => 'generator-parent-option' 
```

我跑了：

```
$ rails g scaffold User first_name:string last_name:string email:string website:string nodes:array links:array --skip-migration --orm=mongo_mapper 
```

并得到了干净的输出：

```
thrive@thrive-laptop:~/rails_projects/hive$ rails g scaffold User first_name:string last_name:string email:string website:string nodes:array links:array --skip-migration --orm=mongo_mapper
      invoke  mongo_mapper
    conflict    app/models/user.rb
  Overwrite /home/thrive/rails_projects/hive/app/models/user.rb? (enter "h" for help) [Ynaqdh] h
  Y - yes, overwrite
n - no, do not overwrite
a - all, overwrite this and all others
q - quit, abort
d - diff, show the differences between the old and the new
h - help, show this help
  Overwrite /home/thrive/rails_projects/hive/app/models/user.rb? (enter "h" for help) [Ynaqdh] Y
       force    app/models/user.rb
      invoke    test_unit
      create      test/unit/user_test.rb
      create      test/fixtures/users.yml
       route  resources :users
      invoke  scaffold_controller
   identical    app/controllers/users_controller.rb
      invoke    haml
       exist      app/views/users
   identical      app/views/users/index.html.haml
   identical      app/views/users/edit.html.haml
   identical      app/views/users/show.html.haml
   identical      app/views/users/new.html.haml
   identical      app/views/users/_form.html.haml
      invoke    test_unit
   identical      test/functional/users_controller_test.rb
      invoke    helper
   identical      app/helpers/users_helper.rb
      invoke      test_unit
   identical        test/unit/helpers/users_helper_test.rb
      invoke  stylesheets
   identical    public/stylesheets/scaffold.css 
```

# c++ - 如何使用 C++ 关闭所有子线程

> ID：10589897
> 
> 赞同：2
> 
> 时间：2012-05-14T19:34:59.127
> 
> 标签：c++, qt

我的 windows/QT 应用程序没有持续退出。

对象清理后，我试图删除 QProcess 对象。但它不是清理进程，它可以显示在任务管理器中。

```
 delete process;
    process = 0; 
```

我认为删除过程不起作用，因为有些线程在后台运行。我想确保所有线程都正常关闭，因此进程将退出。

请让我知道执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:37:33.250

任务管理器不会显示您的 QProcess 对象，删除该对象不会影响任务管理器。如果您的进程中仍有代码在运行，则该进程将根据操作系统继续存在。

如果*实在*想退出进程，可以调用Win32函数[`ExitProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682658%28v=vs.85%29.aspx)。只要确保你已经保存了你想要的一切。

当所有线程停止运行时，Qt 通常会退出进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:40:46.977

一个问题可能是 QProcess 对象不代表子线程，它代表一个独立的进程，您可能想使用[QThread](http://qt-project.org/doc/qt-4.8/qthread.html)对象。

使用 QThread 对象，您可以根据子线程的确切内容使用退出、退出、等待和终止的某种组合，请查看文档以了解差异。

# visual-studio-2010 - 可以为报表服务VS2010中的子报表设置静态高度吗？

> ID：10589899
> 
> 赞同：1
> 
> 时间：2012-05-14T19:35:00.923
> 
> 标签：visual-studio-2010, service, reporting-services, reporting, subreport

我已经使用报告服务 (Visual Studio 2010) 制作了一份报告，并且我希望子报告具有预定义的高度。例如，即使报表数据仅填满子报表的 1 英寸，子报表也将是 2 英寸。有没有办法强制子报表具有静态高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:22:27.083

我遇到了同样的问题。

要设置最小尺寸，请添加一个包含水平和垂直线的矩形，并将子报表放置在矩形内。

我能想到的设置最大大小的一种解决方案是在子报表查询中使用 top(x) ，这样任何超过要显示的行数的结果都不会被包括在内。

或者，如果必须包含所有结果，则将计算字段添加到对数据行进行计数的子报表数据集。在子报表表中，为每一列设置字体大小，以便所有数据行都可以显示在给定区域内。(iif(NoOfResults = 2, font = 10, etc)) 表格上也需要设置“允许行高减小”，这样行可以根据字体大小缩小。

希望有人觉得这很有帮助。如果您能想到任何其他解决方案，我很想听听。

# java - Gradle 找不到打包为 OSGi 包的下载依赖项（非 OSGi 应用程序）

> ID：10589900
> 
> 赞同：3
> 
> 时间：2012-05-14T19:35:19.223
> 
> 标签：java, jar, osgi, jersey, gradle

**（为澄清而编辑）**

我的（非 OSGi）应用程序构建在 Gradle 中，我正在尝试从非常旧的 Jersey 版本（1.1.4.1）升级到更新的版本（1.12？）。我不会假装对使用 OSGi 有任何了解。但是当我将我的 Gradle 依赖项（`$JERSEY_VERSION`设置为“1.12”）指向：

`[group: 'com.sun.jersey', name: 'jersey-server', version: "$JERSEY_VERSION"]`

它将 jersey-server-1.12.jar 下载到“bundles”目录下的我的 Gradle 依赖项缓存中，而不是普通的“jars”目录下，然后 Gradle 似乎没有将这个 jar 包含在其类路径中，就像它在“jars”子目录。

我发现它在“捆绑包”下，因为 POM 将它标记为启用 OSGi 的 jar。我认为我们不会想要 OSGi 化我们的项目。我是否坚持使用旧版本的 Jersey，或者我还能做些什么来让 Gradle 看到 Jersey jar？如果可能的话，我宁愿*不*手动将文件复制到本地存储库，而是以某种方式依赖 Gradle 的依赖项管理功能（如果可以完成任务）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:53:30.353

OSGi 包是带有额外清单条目的普通 jar。您应该能够像在任何其他依赖项中一样在非 OSGi 项目中使用它们。它们最终出现在缓存的捆绑目录中是否有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:00:40.287

'这是一个愚蠢的疏忽：从 1.1.4.1 到 1.12，POM 依赖项发生了变化，因此 jersey-core.jar 不再被隐式引入。我必须明确添加 jersey-core.jar。我曾认为问题在于 jersey-server.jar 是作为捆绑包导入的，但实际上我只是为 jersey-core.jar 中的一个类获得了 ClassNotFoundException。

# java - 发送到 HTTPS url 的 java 请求是否完全安全？

> ID：10589903
> 
> 赞同：5
> 
> 时间：2012-05-14T19:35:34.690
> 
> 标签：java, https, sms, sms-gateway

我实际上是在尝试使用 CDYNE 及其 API 发送短信。为此，我使用 Java、HttpGet 和 HttpClient 对象（Httpcore 和 HttpClient 库）。我将请求发送到 https URL，发送参数如`https://www.example.com/SecureREST/SimpleSMSsend?PhoneNumber=ABC&Message=XYZ`

我正在使用 GET 请求并且所有参数都在它自己的 URL 中，这会是一个安全问题吗？如果 URL 中 Message 参数的内容包含敏感信息怎么办？有人可以嗅探网络以获取内容还是安全的，因为请求是使用 HTTPS 发送的？

我相信在握手过程中只有 www.example.com 是可见的，一旦完成，一切都会被加密，但我只是想确保。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:40:44.163

[维基百科对此非常清楚：](http://en.wikipedia.org/wiki/HTTP_Secure)

> 请注意，当客户端发送 HTTPS 请求时，URL 的主机名和端口是未加密的……**但是，HTTPS 请求的所有其他部分，包括 URL 路径和查询参数，只能由目标站点**或由代表站点终止 HTTPS 连接的中介中介。

所以你的信念是对的。只有主机名和端口是公开可见的；URL 的其余部分已加密。

# jsf - 如何在多表单页面中保留表单数据

> ID：10589907
> 
> 赞同：0
> 
> 时间：2012-05-14T19:35:49.457
> 
> 标签：jsf

我正在研究 JSF。我有一个包含多种表单的 xhtml 页面。当我提交一个表单时，如果我在其他表单上进行了一些更改，我就会丢失它，因为在提交时页面正在刷新。我不能使用单一表格。有什么办法吗。

任何解决方案都将受到高度赞赏。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:41:42.470

如果您已经在使用 JSF 2.x（您使用 XHTML (Facelets) 的声明或多或少地证实了这一点），只需通过 ajax 提交表单。

只需将以下标记添加到表单的命令链接/按钮即可：

```
<f:ajax execute="@form" render="@form" /> 
```

这样，当前`<h:form>`将由 ajax 提交，并且`<h:form>`仅呈现当前（更新/刷新）。`render`如有必要，您可以通过添加其他客户端 ID 在属性中指定其他要更新的组件。

如果你还在使用旧的 JSF 1.x，你可能想看看 RichFaces 的 Ajax4jsf 子库，它支持的基本相同。

# php - 我如何 PHPUnit 测试使用 Redirector 助手重定向的 Controller_Plugin？

> ID：10589910
> 
> 赞同：3
> 
> 时间：2012-05-14T19:36:03.167
> 
> 标签：php, zend-framework, phpunit

我无法解决这个问题。

```
 $this->_request->setBasePath('http://localhost/');
    $this->_request->setModuleKey('admin');
    $this->_request->setControllerKey('controller-page');
    $this->_request->setActionKey('index');

    $this->_sslRedirect->preDispatch($this->_request);

    $this->assertRedirectRegex('/https:/'); 
```

在我的控制器插件中 preDispatch() 可能会也可能不会重定向到 SSL。这在浏览器中有效，但是我无法为它编写测试。测试失败，如下所示：

```
Failed asserting response redirects to URL MATCHING "/https:/"

/srv/app/zend/library/Zend/Test/PHPUnit/Constraint/Redirect.php:190
/srv/app/zend/library/Zend/Test/PHPUnit/ControllerTestCase.php:764
/srv/app/www/tests/lib/Saffron/Controller/Plugin/SslRedirectTest.php:36
/usr/bin/phpunit:46 
```

我还在 preDispatch() 行之后立即尝试在 Zend_Test_PHPUnit_ControllerTestCase 中使用 $this->dispatch() ，但由于某种原因，这导致了错误 404 Not Found...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:04:08.257

如果这是您的单元测试代码，我没有看到任何模拟，我完全确定我理解为什么要以这种方式实现（如果目标是强制 https 连接）

我认为这两条线有问题。

```
$this->_sslRedirect->preDispatch($this->_request);
$this->assertRedirectRegex('/https:/'); 
```

如果您可以发布您正在测试的完整操作，以及您用来测试它的完整单元测试，那将会有所帮助。

# objective-c - 从滚动视图中删除所有对象

> ID：10589913
> 
> 赞同：0
> 
> 时间：2012-05-14T19:36:07.590
> 
> 标签：objective-c, xcode

如何从 UIScrollView 中删除所有对象（完全清除滚动视图，无论内部分配了什么）：

我试过这个但它不起作用：

```
for (UIView *subview in scroll1.subviews) {
    [subview removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:39:55.790

您是否尝试过在此帖子的答案中发布的代码？

[从 UIScrollView 中删除所有子视图？](https://stackoverflow.com/questions/4102362/remove-all-the-subviews-from-a-uiscrollview)

希望这可以帮助

# html - 为什么我想打印时颜色不显示

> ID：10589914
> 
> 赞同：0
> 
> 时间：2012-05-14T19:36:09.227
> 
> 标签：html, css

以下 html 将在 IE 9 和 Word 中以彩色打印，但在 < IE 或 Chrome 中不会以彩色打印。但是，它确实显示了页面上的颜色（令人费解）

```
<html>
<head>
<title>Style Example</title>
<style type="text/css">
    table.Outer {border-style:none;background-color:transparent;}
    table {border-style:none; font-family:Arial; font-size:12.0pt;}
    th.TableHeader  { background-color:#0066CC; color: #E7E7E7; border-style:none;}
    td.LabelBlue { background-color:#0066CC; color: #E7E7E7; text-align:center;border-style:none}
    td.LabelGray  { background-color:#E7E7E7; color: black; text-align:right;}
    td.LabelWhite  { background-color:White; color: black; text-align:right;}
    td.Info  { background:white; color: Black; font-family:Arial; font-size:12.0pt;}

    </style>
</head>
<body>
   <div align="center">
      <table class="Outer">
        <tr align="center">
            <td>
                <table cellspacing = "0">
                  <tr>
                    <td class="LabelGray" colspan="1" rowspan="2">Date-Time</td>
                    <td class="LabelGray" colspan="7" rowspan="2" >04/30/2012 02:47:13 PM</td>
                  </tr>
                  <tr />
                  <tr>
                    <td class="LabelGray" colspan="1" rowspan="2">Temp [°C]</td>
                    <td class="LabelGray" colspan="1" rowspan="2">25</td>
                    <td class="LabelBlue" colspan="6" rowspan="1">IR Result</td>
                  </tr>
                  <tr>
                    <td class="LabelWhite">Voltage [V]</td>
                    <td>1030</td>
                    <td class="LabelWhite">I [µA]</td>
                    <td>0.076</td>
                    <td class="LabelWhite">IR [MΩ]</td>
                    <td>13553</td>
                  </tr>
                  <tr>
                    <td class="LabelGray" colspan="1" rowspan="2">RH [%]</td>
                    <td class="LabelGray" colspan="1" rowspan="2">23</td>
                    <td class="LabelBlue" colspan="6" rowspan="1">DA/PI Results</td>
                  </tr>
                  <tr>
                    <td class="LabelWhite">Voltage [V]</td>
                    <td>1030</td>
                    <td class="LabelWhite">DA Ratio</td>
                    <td>40.6</td>
                    <td class="LabelWhite">PI Ratio</td>
                    <td>6.9</td>
                  </tr>
                  <tr>
                    <td class="LabelGray" colspan="1" rowspan="2">&nbsp;</td>
                    <td class="LabelGray"colspan="1" rowspan="2">&nbsp;</td>
                    <td class="LabelBlue" colspan="6" rowspan="1">HiPot Results</td>
                  </tr>
                  <tr>
                    <td class="LabelWhite">Voltage [V]</td>
                    <td>5000</td>
                    <td class="LabelWhite">I [µA]</td>
                    <td>0.127</td>
                    <td class="LabelWhite">IR [MΩ]</td>
                    <td>10235</td>
                  </tr>

                </table>
            </td>
        </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <tr align="center">
    </tr>
        </table>
    </div>
</body> 
```

# hadoop - Hadoop 作业不工作

> ID：10589919
> 
> 赞同：1
> 
> 时间：2012-05-14T19:36:38.347
> 
> 标签：hadoop

我正在按照此说明运行 hadoop：

`http://wiki.apache.org/hadoop/Running_Hadoop_On_OS_X_10.5_64-bit_(Single-Node_Cluster)`

但是，我无法让这个命令工作：

`hadoop-*/bin/hadoop jar hadoop-*-examples.jar grep input output 'dfs[a-z.]+'`

我得到的只是：

```
Exception in thread "main" java.io.IOException: Error opening job jar: /Users/hadoop/hadoop-1.0.1/hadoop-examples-1.0.1.jargrep
    at org.apache.hadoop.util.RunJar.main(RunJar.java:90)
Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:127)
    at java.util.jar.JarFile.<init>(JarFile.java:135)
    at java.util.jar.JarFile.<init>(JarFile.java:72)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:88) 
```

我将此添加到我的`hadoop-env.sh`：

```
export HADOOP_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk" 
```

但仍然是同样的错误。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T05:48:19.700

当您运行以下命令时：

> hadoop- */bin/hadoop jar hadoop-* -examples.jar grep 输入输出 'dfs[az.]+'

*   grep 是 hadoop 程序，它是示例的一部分
*   input 是您的源数据所在的文件夹，希望您在 HDFS 上创建了它
*   output 是将作为结果创建的文件夹。
*   'dfs[a=-z.]+' 是与 grep 程序一起使用的常规选项

因为输出是“Grep.......”在我看来，实际的示例应用程序类在 Hadoop 命令运行时不可用或缺少一些信息..您需要先检查并查找常规表达式，如果这适用于您的输入数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:39:13.123

我知道这是旧的，但如果其他人有同样的问题并看到这个 SO 问题，我想提出我为解决这个问题所做的事情，因为它非常简单。

看起来这是示例说明中的错字。如果您查看 Hadoop 分发目录，您会注意到所引用的示例文件名为`hadoop-examples-1.0.4.jar`，或者您使用的任何版本。

所以而不是：

```
hadoop-*/bin/hadoop jar hadoop-*-examples.jar grep input output 'dfs[a-z.]+' 
```

尝试：

```
bin/hadoop jar hadoop-examples-*.jar grep input output 'dfs[a-z.]+' 
```

# matlab - Matlab：通过 optimset 更改 fmincon 的 MaxFunEvals（在 garchfit 中使用）

> ID：10589920
> 
> 赞同：0
> 
> 时间：2012-05-14T19:36:42.013
> 
> 标签：matlab, optimization

目前我正在通过以下方式使用 garchfit：

```
spec=garchset('Distribution','T', 'R',1,'P',1,'Q',1);
[spec, errors, LLF, residuals, sigmas]=garchfit(spec, myArray); 
```

我想更改 garchfit 中 fmincon 使用的 MaxFunEvals 的默认值（参见[fmincon](http://www.mathworks.co.uk/help/toolbox/optim/ug/fmincon.html)）。如果我尝试：

```
options  =  optimset('fmincon'); options = optimset(options, 'MaxFunEvals',1000); 
```

那么 garchfit 中 fmincon 中使用的 MaxFunEvals 的默认值不会改变。有没有办法改变这个默认值，但保持其他一切不变？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:25:05.157

做：

```
spec=garchset('Distribution','T', 'R',1,'P',1,'Q',1,'MaxFunEvals',1000);
[spec, errors, LLF, residuals, sigmas]=garchfit(spec, myArray); 
```

正如这里建议的那样[http://www.mathworks.com/help/toolbox/econ/garchset.html#f10-241317](http://www.mathworks.com/help/toolbox/econ/garchset.html#f10-241317)

# php - 如果在另一个数组中找到一个数组的元素，则删除它

> ID：10589921
> 
> 赞同：68
> 
> 时间：2012-05-14T19:36:42.910
> 
> 标签：php, arrays

> **可能重复：**
> [如果它存在于“不允许的单词”数组中，则从数组中删除它](https://stackoverflow.com/questions/1728727/remove-item-from-array-if-it-exists-in-a-disallowed-words-array)

我有一个客户端将发送的动态字符串，我想从中创建逗号分隔的标签：

```
$subject = "Warmly little in before cousin as sussex and an entire set Blessing it ladyship.";
print_r($tags = explode(" ", strtolower($subject))); 
```

然而，我想删除一组特定的词（例如定冠词），但如果它在分解数组中，我想删除该词的键和值：

```
$definite_articles = array('the','this','then','there','from','for','to','as','and','or','is','was','be','can','could','would','isn\'t','wasn\'t', 'until','should','give','has','have','are','some','it','in','if','so','of','on','at','an','who','what','when','where','why','we','been','maybe','further'); 
```

如果数组中的这些单词之一在`$definite_article`数组中，则`$tags`删除该单词的键和值，新数组将取出这些单词。我将使用这个数组来`array_rand`从中选择一组随机的单词。我已经尝试了很多事情来达到我的结果，但到目前为止还没有。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-14T19:40:30.347

您正在寻找[`array_diff`](http://php.net/manual/en/function.array-diff.php)：

```
$subject = "Warmly little in before cousin as sussex...";
$tags = explode(" ", strtolower($subject));

$definite_articles = array('the','this','then','there','from','for','to','as');

$tags = array_diff($tags, $definite_articles);
print_r($tags); 
```

**[看到它在行动](http://ideone.com/nbt4I)**。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-05-14T19:40:37.573

听起来很容易[**`array_diff()`**](http://php.net/manual/en/function.array-diff.php)。

> ```
> array **array_diff** ( array $array1 , array $array2 [, array $... ] )
> ```
> 
> 比较`array1`并`array2`返回差异。

这基本上意味着它会`array1`在它被剥夺所有存在于`array2`.

# css - 元素 bg 图像未显示

> ID：10589923
> 
> 赞同：0
> 
> 时间：2012-05-14T19:36:47.490
> 
> 标签：css, html, background-image

如果我给一个 div 一个像这样的 bg 图像：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Untitled Document</title>

<style>

#image {
background-image:url(Images/1.jpg);
position:absolute;
top:0px;
left:0px;
width:100px;
height:100px;
z-index:9999;
}

</style>
</head> 
<body style="background-color:#FFF;" >

  <div id="image"> </div>

</body></html> 
```

然后什么都没有显示。我究竟做错了什么？我的图像链接正确，除非我应该在 div 中放一些东西，否则它应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:43:08.753

你的 div 是空的，并且没有设置维度。仅背景图像在元素可见之前无法扩展元素，这就是您需要指定`width`和`height`

如果这仍然不起作用

1.  检查 css 文件上的语法错误
2.  检查图像权限（确保它是`644`或更高）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:43:57.187

高度默认为内容的高度。由于没有内容，所以高度为 0。宽度通常是自动的，但是当绝对定位时，宽度也变为 0。

所以只需添加一个宽度和高度`#myimage`

例子：

```
#myimage {
    background-image:url(http://placekitten.com/200/300);
    position:absolute;
    top:0px;
    left:0px;
    z-index:9999;
    /*new*/
    width:200px;
    height:300px;
} 
```

[http://jsfiddle.net/NuCzS/](http://jsfiddle.net/NuCzS/)

# memory-management - 在 CUDA 中初始化设备数组

> ID：10589925
> 
> 赞同：5
> 
> 时间：2012-05-14T19:36:57.853
> 
> 标签：memory-management, cuda

如何初始化使用分配的设备数组`cudaMalloc()`？

我试过`cudaMemset`了，但它无法初始化除 之外的所有值`0.code`，因为 cudaMemset 如下所示，其中值初始化为 5。

```
cudaMemset(devPtr,value,number_bytes) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T10:51:17.047

正如您所发现的，`cudaMemset`它的工作方式类似于 C 标准库`memset`。从文档中引用：

```
cudaError_t cudaMemset  (   void *      devPtr,
                            int         value,
                            size_t      count    
                        ) 
```

> 用常量字节值填充 devPtr 指向的内存区域的第一个 count 字节。

*字节*值`value`也是如此。如果您执行以下操作：

 *```
int *devPtr;
cudaMalloc((void **)&devPtr,number_bytes);
const int value = 5;
cudaMemset(devPtr,value,number_bytes); 
```

您要求发生的事情是将 的每个字节*设置*`devPtr`为 5。如果`devPtr`是整数数组，则结果将是每个整数字的值都为 84215045。这可能不是您的想法。

使用运行时 API，您可以编写自己的通用内核来执行此操作。它可能很简单

```
template<typename T>
__global__ void initKernel(T * devPtr, const T val, const size_t nwords)
{
    int tidx = threadIdx.x + blockDim.x * blockIdx.x;
    int stride = blockDim.x * gridDim.x;

    for(; tidx < nwords; tidx += stride)
        devPtr[tidx] = val;
} 
```

（标准免责声明：用浏览器编写，从未编译，从未测试，使用风险自负）。

只需为您需要的类型实例化模板并使用合适的网格和块大小调用它，注意最后一个参数现在是*word count*，而不是 byte count `cudaMemset`。这与无论如何都没有什么不同`cudaMemset`，使用该 API 调用会导致内核启动，这与我在上面发布的内容太不同了。

或者，如果您可以使用驱动程序 API，还有`cuMemsetD16`and `cuMemsetD32`，它们可以做同样的事情，但用于半和全 32 位字类型。如果您需要设置 64 位或更大的类型（所以双精度或向量类型），您最好的选择是使用您自己的内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T08:19:39.477

我还需要这个问题的解决方案，但我并不真正理解其他提议的解决方案。特别是我不明白为什么它会迭代网格块`for(; tidx < nwords; tidx += stride)`以及内核调用以及为什么使用违反直觉的字长。

因此，我创建了一个更简单的单片通用内核并对其进行了大步定制，即您可以使用它以多种方式初始化矩阵，例如将行或列设置为任何值：

```
template <typename T>
__global__ void kernelInitializeArray(T* __restrict__ a, const T value, 
   const size_t n, const size_t incx) {
      int tid = threadIdx.x + blockDim.x * blockIdx.x;
      if (tid*incx < n) {
           a[tid*incx] = value;
       }
} 
```

然后你可以像这样调用内核：

```
template <typename T>
void deviceInitializeArray(T* a, const T value, const size_t n, const size_t incx) {
      int number_of_blocks = ((n / incx) + BLOCK_SIZE - 1) / BLOCK_SIZE;
      dim3 gridDim(number_of_blocks, 1);
      dim3 blockDim(BLOCK_SIZE, 1);
      kernelInitializeArray<T> <<<gridDim, blockDim>>>(a, value, n, incx);
} 
```*

# unix - 使用“grep”查找特定单词出现的行号

> ID：10589929
> 
> 赞同：42
> 
> 时间：2012-05-14T19:37:31.623
> 
> 标签：unix, sed, grep

是否`grep`能够提供指定单词出现的行号？

另外，是否可以`grep`用于从某行向下搜索单词？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-14T19:38:19.610

用于`grep -n`获取匹配的行号。

我认为没有办法让 grep 从某个行号开始。为此，请使用 sed。例如，要从第 10 行开始并打印匹配行的行号和行，请使用：

```
sed -n '10,$ { /regex/ { =; p; } }' file 
```

* * *

要仅获取行号，您可以使用

```
grep -n 'regex' | sed 's/^\([0-9]\+\):.*$/\1/' 
```

或者你可以简单地使用 sed：

```
sed -n '/regex/=' file 
```

结合这两个 sed 命令，您将获得：

```
sed -n '10,$ { /regex/= }' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:00:34.643

您可以调用`tail +[line number] [file]`并通过管道`grep -n`显示行号：

```
tail +[line number] [file] | grep -n /regex/ 
```

此方法的唯一问题是报告的行号`grep -n`将`[line number] - 1`小于`[file]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T00:23:47.670

或者您可以使用

```
 grep -n . file1 |tail -LineNumberToStartWith|grep regEx 
```

这将负责对文件中的行进行编号

```
 grep -n . file1 
```

这将打印 last-LineNumberToStartWith

```
 tail -LineNumberToStartWith 
```

最后它将 grep 您想要的行（其中将包括原始文件中的行号）

```
grep regEX 
```

# ruby-on-rails - Rails 路由 - 使用相同的路由名称发布

> ID：10589931
> 
> 赞同：1
> 
> 时间：2012-05-14T19:37:41.250
> 
> 标签：ruby-on-rails

这是我的路线：

```
root :to                                      => 'sites#index'
match 'sites'                                 => 'sites#index'
match 'sites/:site'                           => 'sites#show'
match 'sites/:site/publish'                   => 'sites#publish', :via => :get
match 'sites/:site/publish'                   => 'sites#push',    :via => :put
match 'sites/:site/:entity_type'              => 'entity#index'
match 'sites/:site/:entity_type/new'          => 'entity#new',    :via => :get
match 'sites/:site/:entity_type/new'          => 'entity#create', :via => :put
match 'sites/:site/:entity_type/:entity_name' => 'entity#edit',   :via => :get
match 'sites/:site/:entity_type/:entity_name' => 'entity#update', :via => :put 
```

我遇到的问题是，当我为发布路由执行 POST 时，它实际上根本没有调用 action 方法。它指出“entity_type_ 参数（不应指定）设置为“发布”。

这是我的表格：

```
<%= form_tag({:controller => 'sites', :action => 'publish'}) do %>
    <%= hidden_field_tag 'site', params[:site] %>

    <%= submit_tag 'Publish' %>
<% end %> 
```

实际上，我不需要指定隐藏字段，因为这是路由的结果。当我点击“发布”时，会发生以下情况：

```
Started POST "/sites/kieransenior/publish" for 127.0.0.1 at 2012-05-14 20:35:48 +0100
Processing by EntityController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bCooYei5XTbfNv4MwXqrYAvBzazdcCZpHr7HufKPcxo=", "site"=>"kieransenior", "commit"=>"Publish", "entity_type"=>"publish"}
Completed 500 Internal Server Error in 1ms 
```

HTML 表单如下所示（为清楚起见）：

```
<form accept-charset="UTF-8" action="/sites/kieransenior/publish" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="bCooYei5XTbfNv4MwXqrYAvBzazdcCZpHr7HufKPcxo=" /></div>
    <input id="site" name="site" type="hidden" value="kieransenior" />

    <input name="commit" type="submit" value="Publish" />
</form> 
```

我做错了什么导致它发布到错误的地方？*一定*是我的路由在做，因为表格是正确的。

**编辑**

推送的控制器动作：

```
def push
   respond_to do |format|
      redirect_to :controller => 'sites', :action => 'show', :site => params[:site]
   end
end 
```

报废上面的，如果我的大脑被搞砸了，会有所帮助。看起来我在某个时候在那里倾倒了一个redirect_to，并没有删除respond_to。哎呀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:44:41.353

```
post 'sites/:site/publish'                   => 'sites#publish' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:52:13.870

使用 时`match`，您可以（并且您可能应该）使用`get`,或您打算使用的任何动词`post`，`put`而不是简单地说`match`。

例如，您可以对您所指的两条路线执行此操作：

```
get 'sites/:site/publish'     => 'sites#publish'
post 'sites/:site/publish'    => 'sites#push' 
```

**编辑**

看起来如果您遇到`406`错误，那么您的帖子会被拒绝，因为您没有具体说明提交的内容类型的格式。

如果您使用 a `respond_to`，通常您指定内容类型以及对每种类型执行的操作——如下所示：

```
respond_to do |format|
  format.html
  format.xml { render :xml => @people.to_xml }
end 
```

在你的，似乎没有相同的格式规范：

```
def push
   respond_to do |format|
      redirect_to :controller => 'sites', :action => 'show', :site => params[:site]
   end
end 
```

该`406`错误通常意味着您已将内容类型提交到`respond_to`子句，但没有在中指定该内容类型`respond_to`（例如，发布到`/app/model.json`但没有`format.json`子句）。在您的情况下，*没有*格式条款，所以这就是为什么`406`.

因此，除非您有特定的使用原因，否则`respond_to`我建议您暂时将其删除并离开：

```
def push
  redirect_to :controller => 'sites', :action => 'show', :site => params[:site]
end 
```

# python - Python 帮助理解示例代码

> ID：10589933
> 
> 赞同：4
> 
> 时间：2012-05-14T19:37:48.447
> 
> 标签：python, list, fuzzer

我最近一直在尝试学习 python，但遇到了一些我很难理解它是如何工作的东西。首先，它是一个列表的设计。

有问题的列表来自这篇关于简单模糊测试工具的安全文章：http: [//blog.securestate.com/post/2009/10/06/How-a-simple-python-fuzzer-brought-down-SMBv2- in-2-seconds.aspx](http://blog.securestate.com/post/2009/10/06/How-a-simple-python-fuzzer-brought-down-SMBv2-in-2-seconds.aspx)

有问题的实际列表是：

```
#Negotiate Protocol Request
packet = [chr(int(a, 16)) for a in """
00 00 00 90
ff 53 4d 42 72 00 00 00 00 18 53 c8 00 00 00 00
00 00 00 00 00 00 00 00 ff ff ff fe 00 00 00 00
00 6d 00 02 50 43 20 4e 45 54 57 4f 52 4b 20 50
52 4f 47 52 41 4d 20 31 2e 30 00 02 4c 41 4e 4d
41 4e 31 2e 30 00 02 57 69 6e 64 6f 77 73 20 66
6f 72 20 57 6f 72 6b 67 72 6f 75 70 73 20 33 2e
31 61 00 02 4c 4d 31 2e 32 58 30 30 32 00 02 4c
41 4e 4d 41 4e 32 2e 31 00 02 4e 54 20 4c 4d 20
30 2e 31 32 00 02 53 4d 42 20 32 2e 30 30 32 00
""".split()] 
```

他使用以下几行从中提取了一个字节（我认为？）：

```
what = packet[:]
where = choice(range(len(packet)))
which = chr(choice(range(256)))
what[where] = which 
```

我从未见过以这种方式设计的列表，而且似乎无法理解它是如何选择它所做的任何事情的。最让我困惑的是`packet = [chr(int(a, 16)) for a in """`，他将所有这些东西都放在了一个评论区中......然后确实如此`.split()`。0_o

我知道这是一个模糊的问题，但如果有人可以向我解释这一点，或者向我指出一些解释这种列表构建风格的文档的方向，我会非常高兴。这看起来是一种非常有效的存储/提取大量字节的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T19:44:42.107

这

```
"""
00 00 00 90
ff 53 4d 42 72 00 00 00 00 18 53 c8 00 00 00 00
00 00 00 00 00 00 00 00 ff ff ff fe 00 00 00 00
00 6d 00 02 50 43 20 4e 45 54 57 4f 52 4b 20 50
52 4f 47 52 41 4d 20 31 2e 30 00 02 4c 41 4e 4d
41 4e 31 2e 30 00 02 57 69 6e 64 6f 77 73 20 66
6f 72 20 57 6f 72 6b 67 72 6f 75 70 73 20 33 2e
31 61 00 02 4c 4d 31 2e 32 58 30 30 32 00 02 4c
41 4e 4d 41 4e 32 2e 31 00 02 4e 54 20 4c 4d 20
30 2e 31 32 00 02 53 4d 42 20 32 2e 30 30 32 00
""" 
```

只是[多行字符串](http://docs.python.org/tutorial/introduction.html#strings)。

```
"""
00 00 00 90
ff 53 4d 42 72 00 00 00 00 18 53 c8 00 00 00 00
""".split() 
```

使用上述字符串的空格[生成拆分：](http://docs.python.org/library/stdtypes.html#str.split)

```
['00', '00', '00', '90', 'ff', '53', '4d', '42', '72', '00', '00', '00', '00', '18', '53', 'c8', '00', '00', '00', '00'] 
```

还有这个：

```
[chr(int(a, 16)) for a in ['00', '00', '00', '90', 'ff', '53', '4d', '42', '72', '00', '00', '00', '00', '18', '53', 'c8', '00', '00', '00', '00']] 
```

是一个[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，它遍历形成的列表并转换适用`chr(int(a,16))`于每个的所有值`a`。

[`int(a,16)`](http://docs.python.org/library/functions.html#int)将包含十六进制字符串表示形式的字符串转换为`int`.

[`chr`](http://docs.python.org/library/functions.html#chr)将此整数转换为 char。

结果是：

```
>>> [chr(int(a, 16)) for a in ['00', '00', '00', '90', 'ff', '53', '4d', '42', '72', '00', '00', '00', '00', '18', '53', 'c8', '00', '00', '00', '00']]
['\x00', '\x00', '\x00', '\x90', '\xff', 'S', 'M', 'B', 'r', '\x00', '\x00', '\x00', '\x00', '\x18', 'S', '\xc8', '\x00', '\x00', '\x00', '\x00'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:44:01.140

这

```
 """
content
""" 
```

格式是在 python 中定义多行字符串文字的简单方法。这**不是**评论区。

这`[chr(int(a, 16)) for a in "00 00 00...".split()]`是一个列表理解。大字符串被分割成一个数组（由空格分割），并且对于数组中的每个项目，它将它转换为一个十六进制数（`int(a,16)`意味着将字符串 a 转换为 int，字符串 a 以 16 为基数），然后返回该 ascii char ( `chr(...)`) 由该整数表示。

`packet[:]`返回list的[浅表副本](http://docs.python.org/tutorial/introduction.html#lists)`packet`。

`choice(range(len(packet)))`返回一个在数据包长度范围内的随机数。

`chr(choice(range(256)))`在 0,255 范围内选择一个随机数并将其解释为 ascii 字符，然后最后一条语句将该 ascii 字符插入随机选择的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T19:49:42.403

让我们分解它，并简化它以提高可读性：

```
 bytes = """
            00 00 00 90
            ff 53 4d 42 72 00 00 00 00 18 53 c8 00 00 00 00
            00 00 00 00 00 00 00 00 ff ff ff fe 00 00 00 00
            00 6d 00 02 50 43 20 4e 45 54 57 4f 52 4b 20 50
            52 4f 47 52 41 4d 20 31 2e 30 00 02 4c 41 4e 4d
            41 4e 31 2e 30 00 02 57 69 6e 64 6f 77 73 20 66
            6f 72 20 57 6f 72 6b 67 72 6f 75 70 73 20 33 2e
            31 61 00 02 4c 4d 31 2e 32 58 30 30 32 00 02 4c
            41 4e 4d 41 4e 32 2e 31 00 02 4e 54 20 4c 4d 20
            30 2e 31 32 00 02 53 4d 42 20 32 2e 30 30 32 00
            """
    packet = [chr(int(a, 16)) for a in bytes.split()] 
```

`bytes`是一个字符串，`"""`通常用于 Python 文档字符串，但您可以在代码中使用它们来创建非常长的字符串（但它们有点糟糕，因为您最终会在代码中添加额外的空格。

`bytes.split()`将在空白处拆分，并返回以空格分隔的字符串各个部分的列表。

```
print bytes.split()

['00', '00', '00', '90', 'ff', '53', '4d', '42', '72', 
 '00', '00', '00', '00', '18', '53', 'c8', '00', '00' ... ] # and more 
```

那么这个：

```
packet = [chr(int(a, 16)) for a in bytes.split()] 
```

这是一个列表理解：

*   拆分`bytes`并获取上述列表
*   对于列表中的每个元素（`a`此处），对其执行`int(a,16)`，这将通过进行 base-16 到十进制转换（即`FF`是`255`）来获得其整数值。
*   然后`chr`对该值执行操作，这将为您返回该字节的 ASCII 值。

`packet`ASCII 格式的字节列表也是如此。

```
print packet
['\x00', '\x00', '\x00', '\x90', '\xff', 'S', 'M', 'B', 'r', '\x00', '\x00', '\x00',
 '\x00', '\x18', 'S', '\xc8', '\x00', '\x00', '\x00', '\x00', '\x00', '\x00', '\x00', 
 '\x00', '\x00', '\x00', '\x00', '\x00', '\xff', '\xff', '\xff', '\xfe', '\x00', 
 '\x00', '\x00', '\x00', '\x00', 'm', '\x00', '\x02', 'P', 'C', ' ', 'N', 'E', 'T', 
 'W', 'O', 'R', 'K', ' ', 'P', 'R', 'O', 'G', 'R', 'A', 'M', ' ', '1', '.', '0', 
 '\x00', '\x02', 'L', 'A', 'N', 'M', 'A', 'N', '1', '.', '0', '\x00', '\x02', 'W', 'i', 
 'n', 'd', 'o', 'w', 's', ' ', 'f', 'o', 'r', ' ', 'W', 'o', 'r', 'k', 'g', 'r', 'o', 
 ... more ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T19:47:52.607

您在这里遇到了几个不同的概念。慢慢往回走，你就会明白的。

"""00 00 00 90 ff 53 4d 42 72 00 00 00 00 18 53 c8 00 00 00 00""" 东西只是一个大字符串。它上面的 .split 将其分解为空格上的数组，所以此时你有类似 ['00', '00', '00', '90' ....]

该行的其余部分是一个列表理解——它是这样做的一种奇特方式：

```
new_list = []
for a in that_list_we_split_above:
    new_list.append( chr( int(a, 16) ) ) 
```

int 函数将字符串转换为基数为 16 的 int - [http://docs.python.org/library/functions.html#int](http://docs.python.org/library/functions.html#int)

然后 chr 函数使用该数字获取 ascii 字符

所以在所有废话的最后你有一个列表“数据包”

定义 where 的行获取该列表的长度，创建一个新列表，其中包含从 0 到长度的每个数字（即，每个可能的索引），并随机选择其中一个。

选择 0 到 256 之间的随机 int 并为其获取 ascii 字符的行

最后一行将包列表中“where”索引处的项目替换为其中定义的随机 ascii 字符

tl;博士：去寻找不同的代码来学习 - 这既令人困惑又没有灵感

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T19:48:37.487

有问题的代码示例似乎将原始数据包中的随机选择的字节替换为另一个随机字节（我相信这是模糊测试背后的想法之一。）

```
packet = [chr(int(a, 16)) for a in """
 00 00 00 90 .... """.split()] 
```

这是“在空格上拆分字符串，将子字符串读取为从十六进制整数解码的字符（int 的第二个参数是基数）。

```
what = packet[:] 
```

`packet`用于“将数组复制到`what`”的 Python 习语。

```
where = choice(range(len(packet))) 
```

在数据包中选择一个随机索引。

```
which = chr(choice(range(256))) 
```

制作一个随机字符。

```
what[where] = which 
```

将其替换为先前选择的索引。

# ruby - 在Ruby中通过pid获取进程状态

> ID：10589935
> 
> 赞同：5
> 
> 时间：2012-05-14T19:38:16.527
> 
> 标签：ruby, process-management

有没有办法根据 Ruby 中的 PID 获取进程的子进程状态？

例如，在 Python 中，您可以执行 psutil.Process(pid).status

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-22T13:15:59.833

我一直在寻找同样的东西。很遗憾 ProcessStatus 似乎无法从实时 pid 中初始化。如果您想做安全定时杀死子进程之类的事情，这是至关重要的。

无论如何，`/proc/$pid/status`如果你在 Linux 上，这是第二行： `status_line = File.open("/proc/#{pid}/status") {|f| f.gets; f.gets }`

很可能比任何涉及外部程序的东西都要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:07:35.523

我不知道一种可移植的 ruby​​ 方法来获取正在运行的进程的进程状态。你可以做`Process.wait`并检查`$?.exitstatus`，但这看起来不像你想要的。对于 posix 解决方案，您可以使用

```
`ps -o state -p #{pid}`.chomp 
```

获取 ps 为进程状态生成的字母代码

```
PROCESS STATE CODES
Here are the different values that the s, stat and state output specifiers
(header "STAT" or "S") will display to describe the state of a process.
D    Uninterruptible sleep (usually IO)
R    Running or runnable (on run queue)
S    Interruptible sleep (waiting for an event to complete)
T    Stopped, either by a job control signal or because it is being traced.
W    paging (not valid since the 2.6.xx kernel)
X    dead (should never be seen)
Z    Defunct ("zombie") process, terminated but not reaped by its parent. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T19:00:22.050

在 OS X 上，我设置了一个字符串：

```
outputstring="ps -O=S -p #{mypid}" 
```

然后在 %x 调用中执行它：

```
termoutput=%x[#{outputstring}] 
```

如果需要，我可以显示它，或者只是保持输出干净并根据我在调用中找到的状态采取行动。

# c# - 键盘挂钩只识别大写锁定？

> ID：10589939
> 
> 赞同：0
> 
> 时间：2012-05-14T19:38:44.103
> 
> 标签：c#, winforms, keyboard

由于我很笨，买了一个没有任何指示灯的键盘，所以我决定编写一个快速程序来弹出 Caps、Scroll 和 Num Lock 的状态。

我决定使用 WinForms，因为这是我喜欢的，我的主要表单类看起来像这样：

```
globalKeyboardHook gkh = new globalKeyboardHook();

    public Indicators()
    {
        InitializeComponent();
    }

    public void CheckKeyCaps()
    {
        notifyIcon1.BalloonTipText = (IsKeyLocked(Keys.CapsLock)) ? "Caps Lock: ON" : "Caps Lock: OFF";
        notifyIcon1.ShowBalloonTip(100);
    }

    public void CheckKeyScroll()
    {
        notifyIcon1.BalloonTipText = (IsKeyLocked(Keys.Scroll)) ? "Scroll Lock: ON" : "Scroll Lock: OFF";
        notifyIcon1.ShowBalloonTip(100);
    }

    public void CheckKeyNum()
    {
        notifyIcon1.BalloonTipText = IsKeyLocked(Keys.NumLock) ? "Num Lock: ON" : "Num Lock: OFF";
        notifyIcon1.ShowBalloonTip(100);
    }

    private void IndicatorsLoad(object sender, EventArgs e)
    {
        gkh.HookedKeys.Add(Keys.Scroll);
        gkh.HookedKeys.Add(Keys.CapsLock);
        gkh.HookedKeys.Add(Keys.NumLock);
        gkh.KeyUp += gkh_KeyUp;
        Visible = false;
        ShowInTaskbar = false;
        notifyIcon1.Icon = new Icon(SystemIcons.Application, 40, 40);
    }

    public void gkh_KeyUp(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Scroll:
                CheckKeyScroll();
                break;
            case Keys.CapsLock:
                CheckKeyCaps();
                break;
            case Keys.NumLock:
                CheckKeyNum();
                break;
        }
    } 
```

我利用[这个库](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)来添加键盘钩子，现在它只会切换 CapsLock 键的弹出窗口。按 Num 或 Scroll Lock 只会导致弹出窗口显示“Scroll Lock: ON”或“Num Lock: ON”。

我尝试过在开关、事件处理程序上使用断点运行调试器，但我无法确定它的正面或反面。我对编程比较陌生（6 个月），所以我假设我在某个地方犯了错误，但我不够精明，无法弄清楚在哪里。

# c# - 制表符分隔的 txt 文件从字符串数组中读取 int 值

> ID：10589940
> 
> 赞同：2
> 
> 时间：2012-05-14T19:38:50.420
> 
> 标签：c#, int, arrays, textreader

我正在使用 TextReader 读取制表符分隔文件的每一行。对于它读取的每一行，我在选项卡上拆分并填充一个字符串数组。然后我可以访问字符串数组中的特定位置来获取值。

这适用于以下字符串：userWorkload.SSN = arrColumns[0];
但是，当我尝试将其中一列转换为 int 时，在运行时收到一条错误消息： userWorkload.contactHours = Convert.ToInt32(arrColumns[9]);

这是我的代码：

```
List<UserWorkload> userWorkloads = new List<UserWorkload>();
TextReader tr = File.OpenText("fall11-tab.txt");
string strLine = string.Empty;
string[] arrColumns = null;
while ((strLine = tr.ReadLine()) != null)
{
     UserWorkload userWorkload = new UserWorkload();

     arrColumns = strLine.Split('\t');
     userWorkload.SSN = arrColumns[0];
     userWorkload.contactHours = Convert.ToInt32(arrColumns[9]);     

     userWorkloads.Add(userWorkload);
 } 
```

UserWorkload 类只包含简单的getter / setter：

```
class UserWorkload 
{
     public string SSN { get; set; }
     public int contactHours { get; set; }
} 
```

这是我的错误：
未处理的异常：System.FormatException：输入字符串的格式不正确。
在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
在 System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
在 System.Convert.ToInt32(String value)
在 Snyder5Creator C:\Users\baxter.NET\Documents\Visual Studio 2010\Projects\User5Creator\User5Creator\InputFileReader.cs
中的 .InputFileReader.buildRowList()：C:\ 中 Snyder5Creator.Program.Main(String[] args) 的第 31 行用户\baxter.NET\Documents\Visual Studio 2010\Projects\User5Creator\Snyder5Creator\Program.cs:第 24 行

第 31 行是：userWorkload.contactHours = Convert.ToInt32(arrColumns[9]);

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:05:37.607

您可能在一条或多条记录中包含无效数据。如果您可以忽略这些错误，您可以使用 int.TryParse：

```
 int parsedNumber;
 userWorkload.contactHours = int.TryParse(arrColumns[9], out parsedNumber) ? parsedNumber : -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T20:06:21.000

也将其包装在 try-catch 中。

```
List<UserWorkload> userWorkloads = new List<UserWorkload>();
TextReader tr = File.OpenText("fall11-tab.txt");
string strLine = string.Empty;
string[] arrColumns = null;
while ((strLine = tr.ReadLine()) != null)
{
     UserWorkload userWorkload = new UserWorkload();

     arrColumns = strLine.Split('\t');
     userWorkload.SSN = arrColumns[0];
     if(!int.TryParse(arrColumns[9], out userWorkload.contactHours)
     {
        //Throw something like InvalidArgumentException here or set to a safe value (-1?)
     }     

     userWorkloads.Add(userWorkload);
 } 
```

# drupal - Drupal 7 - 将类名附加到菜单块

> ID：10589943
> 
> 赞同：2
> 
> 时间：2012-05-14T19:38:57.860
> 
> 标签：drupal, drupal-7, drupal-theming, drupal-navigation

我一直被困在如何在模板文件中操作菜单块在其 html 中输出的内容。带有 li 链接的常规 < ul class="menu" > 很好，我不需要完全删除 drupal 为所有菜单创建的这个 html，但我想像系统主菜单一样注入类 'inline' 和 'links' （通常）已经在它的 ul 元素下。我可以直接在主题跳过块中直接打印菜单，但从长远来看，学习将类名注入到生成的菜单块的输出中会更有帮助。

到目前为止，我没有四处搜索，只能找到一个可以在单个 li 上输入 ID 和类名的模块，但不能在 ul 上输入它们，而且我无法获得我遇到的任何类似的模板文件片段去工作。

有一种方法可以使用钩子函数来做到这一点，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:49:26.233

你为什么不通过javascript添加你想要的类？！

例子：

```
jQuery("#MY_MENU_WRAPPER ul.menu").addClass("inline"); 
```

如果是这种情况，请在主题的 template.php 文件中尝试以下代码

```
function return_menu_markup($menu_name, $attributes)
{
    $items = array();
    $menu_tree = menu_tree_all_data($menu_name);
    $menu_tree_output = menu_tree_output($menu_tree);

    foreach($menu_tree_output as $item_id => $item_data)
    {
        if(is_numeric($item_id) && is_array($item_data))
        {
            $items[] = l('<span>' . $item_data['#title'] . '</span>', $item_data['#href'], array(
                    'attributes'    => $item_data['#attributes'],
                    'html'      => TRUE,
                )
            );
        }
    }
    return theme('item_list', array('items' => $items, 'type' => 'ul'));
} 
```

然后在模板中的任何位置，只需执行以下操作：

```
$attributes = array();
$attributes['id'] = "MY_MENU_ID";
attributes['class'] = array('MY_CLASS_1', 'MY_CLASS_2', 'MY_CLASS_3');
return_menu_markup("main-menu", $attributes); 
```

希望你能找到需要的东西:)

-穆罕默德。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:23:13.143

您可以`template.php`在主题文件夹中使用，使用钩子：

```
function THEMENAME_menu_tree__menu_main_navigation($variables){
    return "<ul class=\"inline\">\n" . $variables['tree'] ."</ul>\n";
} 
```

另请注意，这`menu_main_navigation`是菜单 URL 路径，其他值始终相同。做一些缓存删除几次，也许它想立即工作。

# c++ - 正则表达式验证失败，而 egrep 验证正常

> ID：10589948
> 
> 赞同：2
> 
> 时间：2012-05-14T19:39:09.720
> 
> 标签：c++, regex, c++11, grep

我正在尝试使用正则表达式来验证字符串，所以在我继续之前让我先解释一下字符串的样子：可选的位数后跟一个“X”和一个可选的（“^”后跟一个或更多数字）。

以下是一些示例：“2X”、“X”、“23X^6”适合该模式，而“X^”、“4”、“foobar”、“4X^”、“4X44”等字符串则不适合。

现在我在哪里：使用 'egrep' 和 "^[0-9]{0,}\X(\^[0-9]{1,})$" 正则表达式我可以很好地验证这些字符串但是在尝试时this 在 C++ 中使用 C++11 正则表达式库失败。

这是我用来验证这些字符串的代码：

```
#include <iostream>
#include <regex>
#include <string>
#include <vector>

int main()
{
    std::regex r("^[0-9]{0,}\\X(\\^[0-9]{1,})$",
                 std::regex_constants::egrep);
    std::vector<std::string> challanges_ok {"2X", "X", "23X^66", "23X^6",
                                            "3123X", "2313131X^213213123"};
    std::vector<std::string> challanges_bad {"X^", "4", "asdsad", " X",
                                             "4X44", "4X^"};
    std::cout << "challanges_ok: ";
    for (auto &str : challanges_ok) {
        std::cout << std::regex_match(str, r) << " ";
    }

    std::cout << "\nchallanges_bad: ";
    for (auto &str : challanges_bad) {
        std::cout << std::regex_match(str, r) << " ";
    }
    std::cout << "\n";

    return 0;
} 
```

我做错了什么还是我错过了什么？我在 GCC 4.7 下编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:41:59.780

您的正则表达式未能将`'^'`后面的一位或多位数字设为可选；将其更改为：
`"^[0-9]*X(\\^[0-9]+)?$"`。

另请注意，[此页面](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)表示 GCC 的支持`<regex>`只是部分的，因此`std::regex`可能对您根本不起作用（在这种情况下，“部分”显然意味着“损坏”）；您是否尝试过[Boost.Xpressive](http://www.boost.org/libs/xpressive/)或[Boost.Regex](http://www.boost.org/libs/regex/)作为健全性检查？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:48:52.333

> 可选的位数，后跟一个“X”和一个可选的（“^”后跟一个或多个数字）。

好的，您代码中的正则表达式与该描述不匹配，原因有两个：X 上有一个额外的反斜杠，并且“^digits”部分不是可选的。你想要的正则表达式是这样的：

```
^[0-9]{0,}X(\^[0-9]{1,}){0,1}$ 
```

这意味着您的 grep 命令应如下所示（注意*单*引号）：

```
egrep '^[0-9]{0,}X(\^[0-9]{1,}){0,1}$'  filename 
```

您必须在 C++ 代码中传递的字符串是这样的：

```
"^[0-9]{0,}X(\\^[0-9]{1,}){0,1}$" 
```

如果您随后将所有显式量词替换为更传统的缩写，您会得到@ildjarn 的答案：`{0,}`is `*`、`{1,}`is`+`和`{0,1}`is `?`。

# sql - VB 自定义登录页面。'.' 附近的语法不正确。

> ID：10589951
> 
> 赞同：0
> 
> 时间：2012-05-14T19:39:28.943
> 
> 标签：sql, vb.net, authentication

我正在使用 Visual Studio 中的 VB 创建自定义登录页面。但是，每次我尝试登录时，都会收到以下错误：“'.' 附近的语法不正确”。当我输入错误的用户名/密码组合时，它会识别这一点，但当它正确时，它会收到此错误并无法登录。

```
 Private Function VerifyLogin(ByVal UserName As String) As Boolean
    Try
        Dim cnn As New Data.SqlClient.SqlConnection
        cnn.ConnectionString = My.MySettings.Default.RedwoodConnectionString.Replace(";Integrated Security=True", ";Integrated Security=False") & UserSetting
        Dim cmd As New Data.SqlClient.SqlCommand
        cmd.Connection = cnn
        cmd.CommandType = CommandType.Text
        cmd.CommandText = "SELECT COUNT (principal_id) FROM _ sys.database_principals WHERE(name = '" & UserName & "')"
        cnn.Open()
        Dim i As Integer
        i = cmd.ExecuteScalar()
        cnn.Close()
        If (i > 0) Then Return True
        Return False
    Catch ex As Exception
        System.Windows.Forms.MessageBox.Show("Error: " & ex.Message & vbNewLine & "Location: VerifyLogin() in Login.vb" & vbNewLine & "Returned value: False")
        Return False
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:23:55.583

查看您的 sql 的这一部分：

> FROM_sys.database_principals

看到那里的错误了吗？它认为 the`_`是完整的表名并且`sys`是别名。此时，`.database_principals`不再有效，因此您的错误。

当我们在做的时候，*你真的需要修复 sql 注入漏洞！！*

# java - ArrayList 菜单 Java

> ID：10589952
> 
> 赞同：2
> 
> 时间：2012-05-14T19:39:30.500
> 
> 标签：java, arraylist

我需要制作一个列出目录中 .txt 文件的菜单。例如，如果我在目录中有 jonsmith12.txt 、 lenovo123.txt 、 dell123.txt ，我将如何制作以下数组列表菜单：

请选择以下选项之一：

1.  乔恩史密斯12
2.  联想123
3.  戴尔123

请输入您的选择：

我需要一个 arraylist 菜单是因为我不知道在任何给定时间目录中有多少 .txt 文件。

```
import java.io.File;

public class ListFiles 
{

    public static void listRecord() {

  // Directory path here
  String path = "."; 

  String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) 
  {

   if (listOfFiles[i].isFile()) 
   {
   files = listOfFiles[i].getName();
       if (files.endsWith(".txt") || files.endsWith(".TXT"))
       {
          System.out.println(files);
        }
     }
  }
}
} 
```

这是将 .txt 文件中的信息显示到控制台的类。它仍然需要一些修改，但我可能会弄清楚。

```
import java.io.BufferedInputStream;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

/**
 * This program reads a text file line by line and print to the console. It uses
 * FileOutputStream to read the file.
 * 
 */
public class DisplayRec {

    public static void displayRecord() throws IOException {

    File file = new File("williamguo5.txt");
    FileInputStream fis = null;
    BufferedInputStream bis = null;
    DataInputStream dis = null;

    try {
      fis = new FileInputStream(file);

      // Here BufferedInputStream is added for fast reading.
      bis = new BufferedInputStream(fis);
      dis = new DataInputStream(bis);

      // dis.available() returns 0 if the file does not have more lines.
      while (dis.available() != 0) {

      // this statement reads the line from the file and print it to
        // the console.
        System.out.println(dis.readLine());
      }

      // dispose all the resources after using them.
      fis.close();
      bis.close();
      dis.close();

    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
} 
```

所以问题是：如何在我的类中实现一个`ArrayList`菜单`ListFiles`，以便它显示**.txt**文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:45:05.937

您可以使用[File.listFiles(FilenameFilter filter)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)的替代方法签名来简化代码：

```
File[] files = dir.listFiles(new FilenameFilter() {

    @Override
    public boolean accept(File dir, String name) {
        return name.toLowerCase().endsWith(".txt");
    }
}); 
```

除非您真的喜欢编写循环，否则您甚至不需要手动循环数组以将其转换为 a `List`：

```
List<File> lstRecords = Arrays.asList(files); 
```

您的`displayRecord`方法非常接近；您只需要将文件作为参数传递并使用它而不是硬编码的文件名，并且您需要初始化`dis`.

把它们放在一起：

```
package com.example.file;

import java.io.BufferedInputStream;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FilenameFilter;
import java.io.IOException;
import java.util.Arrays;
import java.util.List;

public class FileExample {

    public static List<File> listRecords(File dir) {
        File[] files = dir.listFiles(new FilenameFilter() {

            @Override
            public boolean accept(File dir, String name) {
                return name.toLowerCase().endsWith(".txt");
            }
        });

        return Arrays.asList(files);
    }

    public static void displayRecord(File file) {
        FileInputStream fis = null;
        BufferedInputStream bis = null;
        DataInputStream dis = null;

        try {
            fis = new FileInputStream(file);

            // Here BufferedInputStream is added for fast reading.
            bis = new BufferedInputStream(fis);
            dis = new DataInputStream(bis);

            String line = dis.readLine();
            while (line != null) {

                // this statement reads the line from the file and print it to
                // the console.
                System.out.println(line);
                line = dis.readLine();
            }

            // dispose all the resources after using them.
            fis.close();
            bis.close();
            dis.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {

        List<File> lstRecords = listRecords(new File("."));
        for (File record : lstRecords) {
            displayRecord(record);
        }
    }

} 
```

如果您正在处理文本文件，最好使用 Reader/Writer 而不是 InputStream/OutputStream，并且您应该关闭`finally`块中的文件以避免潜在的资源泄漏。

您还会注意到我没有明确使用`ArrayList`. 在大多数情况下，最好尽可能针对接口（在这种情况下`List`为 ）进行编程，并且仅在需要使用仅对该类可用的方法时才使用实现类声明变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:25:44.780

看起来你上面的症结是数组。如果您只需要遍历目录中的文件，那么像下面这样简单的事情就可以解决问题。

```
import java.io.File;

public class TxtEnumerator {
    public static void main(String[] args) {
        TxtEnumerator te = new TxtEnumerator();
        te.listFiles();
    }

    public void listFiles() {
        String filepath = "." + File.separator + "textDirectory";
        File file = new File(filepath);
        if (file.isDirectory()) {
            for (File f : file.listFiles()) {
                if (f.getName().endsWith(".txt")) {
                    System.out.println(f.getName());
                }
            }
        }
    }
} 
```

# windows-phone-7 - WP7 获取 Wi-Fi 网关 IP 地址

> ID：10589953
> 
> 赞同：0
> 
> 时间：2012-05-14T19:39:33.140
> 
> 标签：windows-phone-7

有没有办法获取手机当前连接的网关的IP地址？我尝试通过 msdn 库进行搜索，但没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:46:44.213

据我所知，没有 API 可以获取该信息。

# ssis - SSIS 2008 从目标列确定源列（以编程方式）

> ID：10589954
> 
> 赞同：0
> 
> 时间：2012-05-14T19:39:40.053
> 
> 标签：ssis

不确定是否有任何方法可以做到这一点，但我们正在尝试以编程方式确定 ETL 过程中的依赖关系，特别是修改源数据集中的列是否会影响我们的 ETL，如果是，是哪些，即。使用包含数据流任务的包“myPackage”，该任务从“sourceTable”中提取并包括各种列，包括“column1”并最终使用“column1New”加载“destinationTable”是否有任何方法可以查询 SSIS 包本身以确定 column1New 是基于column1（世袭在这里提供什么有用的东西吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:29:39.583

您在包转换中使用的每一列都与一个 ID 相关联。列向下传递到的下一个组件将使用 lineage ID 属性引用该列，但会被赋予一个新的 id。

您可以通过创建这些 ID 的映射来查询包的 XML 以跟踪列所采用的路径。但是，这可能难以以稳定的方式实施。

这可能会对您有所帮助：

[http://blogs.msdn.com/b/helloworld/archive/2008/08/01/how-to-find-out-which-column-caused-ssis-to-fail.aspx](http://blogs.msdn.com/b/helloworld/archive/2008/08/01/how-to-find-out-which-column-caused-ssis-to-fail.aspx)

# android - 自定义组件或常规组合

> ID：10589960
> 
> 赞同：2
> 
> 时间：2012-05-14T19:40:11.980
> 
> 标签：android

我准备创建一个可重用的界面，即一年选择器（仅一年）。本质上，这个组件应该有几个按钮和一个文本视图，滑动功能也很棒。

正如我所说，我努力使其可重用，但我不确定 Android 是否提供任何实现它的方法。我已经开始阅读“自定义组件”文章——这是我真正需要的吗？或者我应该做一个像常规组合类这样的东西，它有对视图对象等的引用？

谢谢。

更新：这很简单——如果有人遇到同样的情况，这是一个例子

YearPicker.class

```
public class YearPicker extends LinearLayout {
    protected int _minValue = 1980;
    protected int _currentValue;
    protected int _maxValue;

    protected int _decrementValueView = R.id.decrement_value;
    protected int _previousValueView = R.id.previous_value;
    protected int _currentValueView = R.id.current_value;
    protected int _nextValueView = R.id.next_value;

    public YearPicker(Context context) {
        super(context);
    }

    public YearPicker(Context context, AttributeSet attrs) {
        super(context, attrs);
        Calendar calendar = Calendar.getInstance();
        _maxValue = calendar.get(Calendar.YEAR);
        _currentValue = _maxValue - ((_maxValue - _minValue) / 2);

    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);

        TextView curView = (TextView) findViewById(_currentValueView);
        curView.setText(Integer.toString(_currentValue));
        findViewById(_decrementValueView).setOnClickListener(
                _onDecrementValueClick);
    }

    protected OnClickListener _onDecrementValueClick = new OnClickListener() {
        @Override
        public void onClick(View v) {
            _currentValue--;
            TextView curView = (TextView) findViewById(_currentValueView);
            curView.setText(Integer.toString(_currentValue));
        }
    };
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />
    <include 
        layout="@layout/year_picker"/>

</LinearLayout> 
```

year_picker.xml

```
<view xmlns:android="http://schemas.android.com/apk/res/android"
    class="localhost.yearpicker.YearPicker"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/decrement_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <TextView
        android:id="@+id/previous_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/current_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/next_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Button
        android:id="@+id/increment_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</view> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:50:22.920

在您的情况下，我将扩展一个更可取的 ViewGroup，将 XML（用于样式化和定位视图）膨胀到其中，获取对这些视图的访问，添加所有相关的 set/get 方法，仅此而已。如果相关，您还可以为组件定义属性，以便在 XML 中使用它时调整其自定义功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:55:01.983

您可能根本不需要自定义视图。我更喜欢保留单独的 XML 布局，我可以在需要时扩展它们，然后使用自定义 OnClickListeners（或 OnTouchListeners）控制它们

如果您需要覆盖基本视图的方法（例如 onLayout 或 draw() 方法），我只会求助于自定义视图

# linux - 如何创建一个在更新包时只更新所需文件的 debian 包

> ID：10589969
> 
> 赞同：-1
> 
> 时间：2012-05-14T19:40:46.973
> 
> 标签：linux, unix, ubuntu, debian, packaging

经过几周的努力，我能够创建一个中等原生包 debian 包，它在安装和删除包时效果很好。

作为[http://www.quietsche-entchen.de/cgi-bin/wiki.cgi/-wiki/CreatingDebianPackages](http://www.quietsche-entchen.de/cgi-bin/wiki.cgi/-wiki/CreatingDebianPackages) Debian wiki [http://wiki.debian.org/HowToPackageForDebian](http://wiki.debian.org/HowToPackageForDebian) [http://www.debian.org/doc/ manuals/maint-guide/](http://www.debian.org/doc/manuals/maint-guide/)这些对于初学者来说是相当不错的材料，

我有基本问题，在更新包时，所有文件 data.tar.gz 都默认更新。

我只想根据存储在所有文件中的关键变量在 data.tar.gz 中更新几个文件。

执行 preinst 脚本的解包后，data.tar.gz 中的所有文件都已更新..

我的想法是在升级软件包之前先备份文件，并检查文件中的关键变量..如果关键变量大于当前变量，请替换它..

这意味着我正在编写一个简单的备份脚本..并在 postinst 文件中执行..

我不认为这是一个好主意.. 破折号脚本中的更多限制使它成为一项非常艰巨的工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:47:31.983

你想在这里完成什么？在重新安装（或升级） Debian 软件包期间，用最新版本替换所有非配置文件正是*应该*发生的事情。如果自上次安装的软件包版本以来文件没有更改，那么无论如何更新它都没有害处，如果它*已经*更改，则应该更新它。

如果您有特定的文件可能会被用户修改并且应该在升级过程中保留，那么请制作 conf 文件。包系统会提示用户并询问他们是要保留包维护者的版本还是本地修改的版本。

（但是，如果您要将每个文件都设为 conf 文件，那么您可能做错了什么。）

要将文件设为 conffile，请将其列在`debian/conffiles`. 但是如果要安装该文件，`/etc`那么您不需要这样做，因为`dh_installdeb`它会为您完成。

**编辑**以下评论中的附加信息：

假设您的包中有文件`test1.sh`和`test2.sh`（以及其他）。在 Debian 世界中，它们要么是旨在由最终用户修改的配置文件，要么不是。

conffiles 的数量应该相对较少并且尽可能短，以尽量减少必须协调包维护者所做的更改与最终用户所做的冲突更改的负担。

如果代码中混入了最终用户可能想要调整的内容，请尝试将它们分解到配置文件中。如果您将该文件放入 中`/etc`，您甚至不必手动将其指定为 conffile。

如果最终用户需要更改非配置文件，他们应该使用[dpkg-divert](http://www.debian-administration.org/articles/118)协议来 (1) 将原始文件移到一边，以及 (2) 编辑副本。包升级尊重转移的文件。使用的最终用户`dpkg-divert`应该知道升级后可能会出现问题，因为包维护者没有预见到这些文件会被最终用户修改，并且本地修改的版本可能与新升级的版本不兼容不同的文件。`dpkg-divert`应小心谨慎地使用。

# python - 字符串格式 %02d 未按预期执行？什么会导致以下代码不打印截断的两位数形式？

> ID：10589972
> 
> 赞同：0
> 
> 时间：2012-05-14T19:40:47.493
> 
> 标签：python, string, time, formatting

不知道为什么会这样。我一定遗漏了一些明显的东西。

我正在尝试让计数器打印出类似 SMPTE 代码（小时：分钟：秒：帧（假设为 24fps））之类的东西。

到目前为止的代码：

```
import time

s_time = time.time()
def format_time():
    t = time.time() - s_time 
    if t < 1:
        print '00:00:00:%02d' % int(t/0.041666666666666664)
    elif t < 60:
        t = str(t).split('.')

        print '00:00:%02d:%02d' % (int(t[0]), int(int(t[1][:4])/0.041666666666666664) )

while True:
    format_time() 
```

最初一切似乎都很好，直到持续时间超过 1 秒并`elif`进入分支。秒打印得很好，但帧打印出完整的多位数计算结果。鉴于格式化运算符正在指定`%02d`，就像它在第一个`if`分支中所做的那样（其行为符合预期），为什么它在第二个分支中不服从？我不知道为什么它仍在打印完整的结果而不是截断的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:54:07.227

我希望你想要这样的东西：

```
hours = int(t)/3600
minutes = (int(t)/60)%60
seconds = int(t)%60
frames = (t-int(t))*24
print '%02d:%02d:%02d:%02d' % (hours, minutes, seconds, frames) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T19:56:04.457

您正在尝试获取浮点数的整数部分和小数部分来打印结果。直接在数值数据上使用运算符和函数是一种很好的做法，而不是通过将浮点数转换为 str 再转换回数字来增加大量开销。

为此使用数学模块 modf 函数。它还将简化您的算法。

```
import time
import math

s_time = time.time()
def format_time():
    t = time.time() - s_time
    if t < 60:
        f,i = math.modf(t)
        print '00:00:%02d:%02d' % (i, f/0.041666666666666664)

while True:
    format_time() 
```

PS：对于您的代码错误，在您的 elif 块中，您将 t 作为具有巨大值的整数传递，而不是传递它的 0.xxxxx 值。如果您继续使用浮点数的数学函数，则不会发生此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:48:07.367

`%02d`意思是：打印整数，如果它短于 2 位，则在其前面加上零。它不会将格式化字符串限制为两位数。

编辑：获取数字的前 2 位（四舍五入）数字的一种`n`方法是：

```
n = 13900
print round(n/10**math.floor(math.log10(n)-1)) 
```

或者如果你不关心四舍五入，只需剪断绳子......

# performance - 在 O(log n) 中查找排序矩阵（行 n 列）中的数字

> ID：10589975
> 
> 赞同：40
> 
> 时间：2012-05-14T19:41:12.197
> 
> 标签：performance, algorithm

假设我有一个矩阵 ( `MxN`)，它的行和列已排序。

1.  每行中的所有元素都按升序排列
2.  每列中的所有元素都按升序排列
3.  所有元素都是整数
4.  无法做出其他假设

    **例子：**

    [1 5 8 20]

    [2 9 19 21]

    [12 15 25 30]

我必须找出矩阵中是否存在给定的数字（基本搜索）。我有一个运行的算法`O(n)`

```
int row = 0;
int col = N-1;

while (row < M && col >= 0) {
  if (mat[row][col] == elem) { 
    return true;
  } else if (mat[row][col] > elem) { 
    col--;
  } else { 
    row++;
  } 
} 
```

但有人问我一个`O(log (MxN)) == O(Log(n))`解决方案。有任何想法吗？？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-15T09:25:46.393

O(log (M * N)) 解决方案对于此任务是不可能的。

让我们看一个简化的任务：在“排序”方阵中，假设次对角线（绿色）上方的所有元素都小于给定数字，次对角线（红色）下方的所有元素都大于给定数字，并且对次对角线上的元素没有额外的假设（黄色的）。

![在此处输入图像描述](../Images/cb86e620d61faf706552335e071fa941.png)

这项任务的原始假设和这些额外的假设都没有告诉我们次对角线上的元素是如何相互关联的。这意味着我们只有一个未排序的 N 个整数数组。我们无法比 O(N) 更快地在未排序的数组中找到给定的数字。因此，对于方阵的原始（更复杂）问题，我们无法得到比 O(N) 更好的解决方案。

对于矩形矩阵，拉伸正方形图片并相应地设置附加假设。这里我们有 min(N,M) 个大小为 max(N,M)/min(N,M) 的排序子数组。这里最好的搜索方法是使用线性搜索来找到一个或多个可能包含给定值的子数组，然后在这些子数组中使用二分查找。在最坏的情况下，需要在每个子数组中进行二分搜索。复杂度为 O(min(N,M) * (1 + log(max(N,M) / min(N,M))))。因此，对于矩形矩阵的原始（更复杂）问题，我们无法得到比 O(min(N,M) * ( 1 + log(max(N,M)) - log(min(N,M))) 更好的解决方案）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T22:20:33.593

不可能比 O(n) 做得更好。有些人（这个页面上至少有三个人）认为他们可以做得更好，但那是因为他们的算法是错误的，或者因为他们不知道如何计算他们算法的复杂性，所以他们试图猜测它。[这篇博](http://sq8alg.blogspot.fr/2012/12/searching-2d-sorted-matrix-part.html)文非常好，将向您解释这些人的错误。

O(n) 最优的证明草稿：考虑以下矩阵：

```
1     2     3     4     5     6 … (n-2)  (n-1) (n+1)
2     3     4     5     6     7 … (n-1)  (n+1) (n+2)
3     4     5     6     7     8 … (n+1)  (n+2) (n+3)
…     …     …     …     …     … … …      …     …
(n-2) (n-1) …     …     …     … … …      …     (2n-1)
(n-1) (n+1) …     …     …     … … …      …     2n
(n+1) (n+2) …     …     …     … … (2n-1) 2n    (2n+1) 
```

如果您`n`在此矩阵中查找，则必须为每行至少检查一次是否`n`在该行中，因为`n`可能在任何行中。（证明不完整，但这里是想法）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T21:28:04.400

你必须使用递归来解决这个问题。给定一个矩阵 X 和数字 y，您可以在 X 的中间行对 y 进行二分搜索，并将矩阵分成四个部分，这样：

```
A|B
---
C|D 
```

A 中的所有元素都小于 y，D 中的所有元素都大于 y，并且 y 可以在 B 和 C 中。迭代地在 B 和 C 中找到 y。

由于 height(A)=height(B)\approx= height(C)=height(D), size(X)>= 2*(size(B)+size(C)) 。因此，如果 O(logn)，则产生的复杂性。

```
def find(X,y):
    a,b = X.shape
    i = a /2
    j = binsearch(X[i,:], y)
    if X[i,j]==y:
        return True
    else:
        return find( X[ (i+1):a, 0:(j-1)], y ) or find( X[ 0:i, j:b], y ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T19:46:21.263

由于行和列都是排序的，如果我们查看每一行的第一个元素，我们可以找到哪个包含我们要查找的数字。然后，再次，我们可以利用每一行中的元素已排序并找到该数字的事实。
我知道最快的搜索算法是二分搜索，它的复杂度为 O(log n)，所以总复杂度为 O(log m + log n)。
这是一个示例，假设我们要查找 28：

```
 1  2  3  4  5  6  7  8  9 10
11 12 13 14 15 16 17 18 19 20
21 22 23 24 25 26 27 28 29 30
31 32 33 34 35 36 37 38 39 40
41 42 43 44 45 46 47 48 49 50 
```

*   我们对第一列（1、11、21、31、41）的元素进行二分查找，发现该行是第三行，因为它的第一个元素小于我们的数字*，但*下一行的第一个元素更大。**步数：2**（21、31、找到）
*   我们再次对第三行（21、22、23、24、25、26、27、28、29、30）进行二分搜索并找到我们的数字。**步数：2 - 3**（25、27 或 28，找到）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T15:22:31.363

我认为这可以在 O(log(n*n)*log(n)) 时间内完成，其中 n 是否。方阵的行数。

根据 Matrix 的性质，矩阵的主对角线是一个有序数组。因此，我们可以在 O(log(n)) 中搜索一个元素或其下限。现在，使用这个元素作为枢轴，我们有 4 个子矩阵。我们可以说子矩阵（左上）中的所有元素都更小，子矩阵（右下）中的所有元素都更大。因此，我们可以将其从搜索空间中删除。

现在，在子矩阵（右上）和子矩阵（左下）中递归搜索。

因为，在每一步，我们执行一次 log(n) 搜索（沿着主对角线），最多可以有 log(n*n) 步（因为我们在每一步中将搜索空间减少了一半）。

因此，时间复杂度 = O(log(n) *log(n* n))。

如有不妥请指正。

参考 - [书]破解编码面试（问题 11.6）

# github - 在 Ubuntu 上使用 Jenkins 用户从 GitHub 获取期间权限被拒绝（公钥）

> ID：10589976
> 
> 赞同：36
> 
> 时间：2012-05-14T19:41:12.200
> 
> 标签：github, jenkins, ubuntu-11.04, ssh-keys

这是我的设置：

1.  Jenkins 作为“jenkins”用户在我的 linux 机器上运行。
2.  我已经为“jenkins”用户生成了一个 ssh 密钥对，如[Linux - Setup Git中所述。](http://help.github.com/linux-set-up-git/)
3.  当我`sudo su jenkins`尝试`ssh -vT git@github.com`时，我总是被问到我的密码，但我总是最终被认证。（详细选项显示使用了哪个键等）。
4.  我可以使用 jenkins 从 GitHub 克隆我的仓库：

因此：

```
jenkins@alpm:~/jobs/test git/workspace$ git pull 
Enter passphrase for key '/var/lib/jenkins/.ssh/id*_rsa':
Already up-to-date. 
```

到目前为止，我已按照信中的说明进行操作。问题是 Jenkins 作业失败并出现以下错误：

```
status code 128:
stdout: 
stderr: Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

这与我输入密码时遇到的错误相同（但当然，Jenkins 不会要求我输入密码）。以下页面：

*   [GitHub - SSH 问题](http://help.github.com/ssh-issues/)
*   [使用 SSH 代理转发](https://helpnext.github.com/articles/using-ssh-agent-forwarding)

告诉我 ssh-agent 可以帮助记住密码，当我使用自己的用户时它会这样做，但不是*jenkins* id。请注意，以我的普通用户身份运行时会产生：

```
echo "$SSH_AUTH_SOCK"
/tmp/keyring-nQlwf9/ssh 
```

在运行与我的“詹金斯”相同的命令时，什么也没有产生（甚至权限被拒绝）

**我对这个问题的理解是密码不记得了。你有什么主意吗？我应该为 jenkins 用户启动一个 ssh-agent 或密钥环管理器吗？如何？或者转发到同一台机器时ssh转发是否合适？有什么更好的主意吗？**

ps：我从来没有`sudo gitted`，我总是使用 jenkins 或我的用户帐户（如这篇 SO 帖子 - [Ubuntu/GitHub SSH Key Issue](https://stackoverflow.com/questions/4637908/ubuntu-github-ssh-keys-issue)中所述）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-14T01:35:33.490

由于几个月来没有人从评论中写出答案，我会很快这样做。

有2个可能的问题/解决方案：

1.  使用错误用户创建的 id_rsa

    创建 id_rsa 作为 jenkins 用户（请参阅[hudson cannot fetch from git repository](https://stackoverflow.com/questions/8910848/hudson-cannot-fetch-from-git-repository)）

2.  将密码留空

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-18T10:40:28.483

总结一下 Jenkins 服务器上必须做的事情：

```
# 1\. Create the folder containing the SSH keys if necessary
if [ ! -e ~jenkins/.ssh ]; then mkdir ~jenkins/.ssh; fi
cd ~jenkins/.ssh/

# 2\. Create the SSH pair of keys
# The comment will help to identify the SSH key on target systems
ssh-keygen -C "jenkins" -f ~jenkins/.ssh/id_rsa -P ""

# 3\. Assign the proper access rights
chown -R jenkins ~jenkins/.ssh/
chmod 700 ~jenkins/.ssh
chmod 600 ~jenkins/.ssh/* 
```

记住：

*   生成密钥时请保留默认的“id_rsa”名称，因为即使正确设置，“id_rsa_jenkins”等其他名称也不起作用。
*   不要为您的密钥使用密码
*   检查公钥 (id_rsa.pub) 是否已上传到 git 服务器（GitHub、Bitbucket 等）。完成后，通过运行测试您的 SSH 密钥：（`ssh -vvv git@github.com`根据您的 git 服务器更改地址）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-02T17:15:19.993

我通过在创建密钥时简单地将密码留空来解决这个问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-25T00:32:06.203

我要补充一点，如果您手动创建了密钥，它们可能仍归您所有，詹金斯无法读取，请尝试：

```
sudo chown jenkins -R /var/lib/jenkins/.ssh/* 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-20T13:17:24.270

要检查以下内容：

1.  如果正确的公钥（id_rsa.pub）被上传到 git-server。
2.  jenkins 用户将访问 github -> 检查***是否将正确的私钥（id_rsa）复制到 /var/lib/jenkins/.ssh/***
3.  如果 known_hosts 文件是在 ~/.ssh 文件夹中创建的。尝试 ssh -vvv git@github.com 查看调试日志。如果一切顺利，github.com 将被添加到 known_hosts。
4.  ***如果 id_rsa 的权限设置为 755 (chmod 755 id_rsa)***

在所有检查之后 -> 尝试**ssh -vvv git@github.com** 在 ssh 工作之前不要尝试在 jenkins 中进行配置！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-08T17:24:07.747

如果您在 windows 中将 jenkins 作为服务运行，则需要验证**运行该服务的用户**。如果您使用用户“MACHINENAME\user”创建了密钥，请更改服务以便运行它的用户可以匹配

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-27T07:03:23.400

对于 Mac 用户，可以通过以下步骤删除现有密钥并创建新的私钥和公钥来解决此问题：

1.删​​除位于**/Users/Username/.ssh**的所有**公钥和私钥**

 **2\. 删除Jenkins中**Credentials**选项卡下保存的所有凭据。

**3.删除在Github 存储库设置**中定义的现有**公共 SSH 密钥。**

 **[4.按照https://confluence.atlassian.com/bitbucketserver/creating-ssh-keys-776639788.html#CreatingSSHkeys-CreatinganSSHkeyonLinux&MacOSX](https://confluence.atlassian.com/bitbucketserver/creating-ssh-keys-776639788.html#CreatingSSHkeys-CreatinganSSHkeyonLinux&MacOSX)中的步骤创建新的**SSH 密钥（私有和公共：id_rsa 和 id_rsa.pub）**

5.在**Github 或等效的存储库设置中设置新创建的公共 SSH 密钥 (id_rsa.pub)。**

6.在 Jenkins 中，通过为您的 Github 用户名添加**私有 SSH 密钥（id_rsa）来****创建新凭据。**

 **7.现在应该删除错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-13T13:26:05.343

密钥需要从 jenkins 用户生成。

```
sudo su jenkins
ssh-keygen 
```

生成密钥后，应将其作为 ssh 密钥添加到 bitbucket 或 github 中。******

# activemq - 使用 KahaDB 时如何持久化 Activemq 队列/主题中的消息？

> ID：10589978
> 
> 赞同：1
> 
> 时间：2012-05-14T19:41:22.743
> 
> 标签：activemq

更具体地说，现在当 activemq 重新启动时，队列和主题的入队/出队消息计数变回 0，但我希望 activemq 使用 KahaDB 持久化消息，这样即使在 activemq 重新启动后，计数器也不会切换回 0但显示累积计数。任何指针都会有帮助。

我正在使用 activemq 版本 - 5.4.3 和所有默认设置。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:18:34.713

如果您配置了 KahaDB 并且正在发送启用了持久属性（默认）的消息，那么它们将为所有具有持久订阅者的队列或主题进行存储和重新加载。

# ruby-on-rails - 是否可以在 Rails 中发送定向闪存消息？

> ID：10589983
> 
> 赞同：1
> 
> 时间：2012-05-14T19:41:37.603
> 
> 标签：ruby-on-rails, flash-message

这是一个愚蠢的问题，但是否可以发送一个

```
flash[:success] 
```

定向到屏幕上当前用户以外的某个用户？在我的一个控制器中，我有

```
if @article.up_votes.count > 10
    flash[:success ] = 'something'
end 
```

是否可以将该闪光灯发送给文章的所有者？而不是我自己的屏幕？还是有其他方法可以做到这一点？

我试着看

[http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-notice](http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-notice)

但找不到任何有用的方法。也许我读错了？那么有没有办法达到同样的效果呢？

谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:33:48.780

正如 ismaelga 提到的，我也认为推送通知是要走的路（WebSockets）。

除了 Faye，您还可以使用名为 Pusher (pusher.com) 的托管解决方案。

这是关于 Pusher 如何帮助您的简短描述。基本上所有使用您的应用程序的用户都会在 WebSocket 服务器上监听消息（通过 JavaScript）。在这种情况下，推杆。然后，您可以通过 Rails 应用程序向 Pusher 发送消息。当您向 Pusher 发送消息时，所有用户都会立即通过 JavaScript（通过 WebSocket）收到有关新消息的通知。要仅通知特定用户，您可以使用 Pusher 的“私人频道”功能。

Pusher 有一些关于如何使用他们的服务的非常好的文档：http: [//pusher.com/docs/javascript_quick_start](http://pusher.com/docs/javascript_quick_start)

这张图片（取自 Nettuts+）也可能让您更好地了解 Pusher 的工作原理：[http ://d2o0t5hpnwv4c1.cloudfront.net/1059_pusher/pusher_websocket.png](http://d2o0t5hpnwv4c1.cloudfront.net/1059_pusher/pusher_websocket.png)

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:52:48.380

不使用闪存，您必须尝试其他方法，有很多方法可以解决，但闪存不是其中之一。好吧，您仍然可以使用 flash，但它不会从一个用户发送到另一个用户，您可能会导致出现一个 flash 消息以通知用户。

首先要弄清楚的是如何通知其他用户，他什么时候会收到通知，您是否希望他在使用您的网站时收到通知？或者只有当他在您的网站上做了特定的事情时？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T21:07:01.003

据我所知，最好的方法可能是推送通知。有很多方法可以实现这一点，但我认为 faye 应该是最简单的。

请参阅此截屏视频以了解它以及以后的内容。您希望为每个用户都有一个频道，以便它成为接收该消息的频道。进一步搜索私人酒吧，这样没有人可以收听其他频道

[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)

[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)

# c# - 如何配置 Silverlight + CSLA 数据门户？

> ID：10589984
> 
> 赞同：1
> 
> 时间：2012-05-14T19:41:39.443
> 
> 标签：c#, .net, silverlight, mvvm-light, csla

我是 Silverlight 和 CSLA 的新手，我需要一个示例项目。我有 Lhotka 2008 年关于 CSLA 的书，以及它附带的 Silverlight 电子书 + 示例项目。

我认为创建一个 Silverlight 5 MVVM Light 项目会相当简单，该项目通过数据门户（配置为使用 WCF 的数据门户/通道适配器）获取 CSLA 4.3 对象，但无法从服务器获取 CSLA 对象。

注意：如果我将 CSLA 排除在等式之外，只使用 Linq to SQL 或实体框架和 WCF RIA 服务调用，我可以从服务器中获取对象并在 silverlight 中显示它们就好了，但因为我不能在此使用它项目我必须让 CSLA 工作。

我的步骤：

1.  创建了 Silverlight 业务应用程序 - 获取 MyProject (SL) 和 MyProject.Web (WCF)
2.  向 .Web 项目添加了一项服务

    <% @ServiceHost Service="Csla.Server.Hosts.Silverlight.WcfPortal" %> 。

3.  在我的 SL 项目中的 App.xaml Application_Startup 方法中引用了服务

    Csla.DataPortalClient.WcfProxy.DefaultUrl = "http://localhost:14790/Services/MyTestCslaSilverlightWcfService.svc"; .

4.  添加了一个简单的 CSLA 业务层项目 (MyProject.CSLA)，它具有一组测试对象（MyMobileObjItem.cs、MyMobileObjItemList.cs）

5.  添加了另外两个项目（MyProject.CSLA.Client 和 MyProject.CSLA.Server）。.Client 项目是一个 Silverlight 类库，.Server 是一个类库。然后，我链接了所有 CSLA 对象（添加现有引用，添加为链接）以及所有必要的引用（csla/csla silverlight dll）。在 MyProject 上，我添加了 .Client 项目的引用，在 MyProject.Web 上，我添加了对 .Server 项目的引用。

6.  现在我应该有一个工作项目，并且想要从服务器获取一个项目或项目列表。在构造函数的主 ViewModel 中，我尝试了两种不同的方法。当我使用

    MyMobileObjItemList.GetAllAsync(HandleReturnedArgs);

回调方法 EventArgs 有一个错误“System.IO.FileNotFoundException：无法加载文件或程序集“MyProject.CSLA.Client”。我觉得这很奇怪，因为 Silverlight 应用程序引用了这个项目，而 MyProject.Web 不应该不需要 .Client 引用，因为它具有 .Server 引用。

当我使用

```
DataPortal<MyMobileObjItemList> dp = new DataPortal<MyMobileObjItemList>();
dp.FetchCompleted += HandleReturnedArgs;
dp.BeginFetch(); 
```

回调方法 EventArgs 出现错误“System.InvalidOperationException：无法加载对象类型或程序集（MyProject.CSLA.MyMobileObjItemList，MyProject.CSLA.Client”。

我不确定这些错误发生在哪里（在客户端或服务器上？）因为它是 Csla.DataPortalException 我认为它是服务器错误。

我不确定如何打一个简单的电话，或者这是否是正确的处理方式，因为我能找到的所有示例都不是这样做的，而且对我来说似乎不清楚。

我知道这是很多要组合在一起的部分，可能很难简洁地给出答案，但我真的很感激帮助（代码、下载示例的链接等）

问题：

1.  是否有一个 Silverlight MVVM Light 项目的简单示例，该项目调用一个远程数据门户，该门户抓取对象*以及如何使其工作/所有部分如何组合在一起的文档*？同样，我有电子书 Silverlight 项目，但它使用 bxf 并且大多数数据门户引用该书刚刚说要查看数据门户上的其他电子书（我没有 - 我会买它，但该网站需要一个几天才允许访问pdf。真的很糟糕的网站）。或者
2.  有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:30:58.550

为了修复错误错误，我更改了 .Client 和 .Server 项目的程序集和默认命名空间以完全匹配 .CSLA 项目（在项目属性中设置）

有关更多信息，请参阅[此论坛讨论](http://forums.lhotka.net/forums/t/11360.aspx)

# sharepoint-2007 - 创建列表 Webpart：按日期字段和类型排序

> ID：10589986
> 
> 赞同：0
> 
> 时间：2012-05-14T19:41:43.183
> 
> 标签：sharepoint-2007

我正在尝试使用 SharePoint 2007 中的 Web 部件创建一个 Web 部件来显示与某个字段相关并且在到期日期之前的项目。

该列表有一个**Title**字段、一个**URL**字段、一个**Related**字段和一个**ExpireDate**字段。

所以列表看起来像这样：

```
Title       URL           Related  ExpireDate
Resolution  http://blah   Service  5/14/2013
Solution    http://blah2  Records  9/14/2012 
```

因此，如果我需要与服务相关的项目，今天的日期在我希望它显示的到期日期之前。

我需要计算列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:02:02.813

最终使用了**ExpireDate**大于或等于 [Today] 并且**RelatedField**包含服务的视图。

# php - 税金或货币计算后，去除小数点停止工作

> ID：10589990
> 
> 赞同：1
> 
> 时间：2012-05-14T19:42:00.130
> 
> 标签：php, string-formatting, decimal

如果它们是双 00，我想通过删除小数来显示价格，或者显示为任何其他值的上标。这一直有效，直到有货币兑换或税收添加到数字。上标仍然有效，但返回的整数是双 00 作为上标。

24.00 美元应为 24 美元

24.99 美元应该是 24 美元。^(99)美元

这是我正在使用的代码：

```
if(round($value, 0) == $value)  
$string .= number_format(($value)) . ' ';   

else

$string .= preg_replace("/\.(\d*)/", "<sup>.$1</sup>", number_format($value,    
(int)$decimal_place, $decimal_point, $thousand_point)) . ' '; 
```

在计算货币或税收后，我缺少什么来删除双 00？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:29:43.697

你应该替换这个：

```
if(round($value, 0) == $value) 
```

这样：

```
if(abs(round($value, 0) - $value) < 0.005) 
```

因为税收和货币计算引入了一些浮点不精确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:44:26.730

干得好：

```
setlocale(LC_MONETARY, 'en_US');
$money = money_format('%n', $value);

$exploded = explode('.', $money);

$currency = '$';

if($exploded[1] == '00')
{
    $currency .= substr($money, 0, strlen($money) -3);
}else
{
    $currency .= $exploded[0] . '<sup>' . $exploded[1] . '</sup>';
}

$currency .= ' USD';

echo $currency; 
```

# asp.net-mvc-3 - 带有动态数据的剔除复选框列表

> ID：10589991
> 
> 赞同：2
> 
> 时间：2012-05-14T19:42:21.050
> 
> 标签：asp.net-mvc-3, knockout.js, checkboxlist

伙计们，我的英语不好..但我会尽力而为

我是淘汰赛的新手，我对这个工具印象深刻。我在我的 MVC 3 应用程序的新页面上使用了这个框架。但我只是遇到了一个问题，如何用数据库中的数据标记我的复选框列表。

```
<div data-bind="foreach: listPeople">
    <div>
        <label>
            <input type="checkbox" data-bind="attr: { value: id_person}, checked: $parent.checkedPeople "  />
            <span data-bind="text: name_person"></span>
        </label>
    </div>
</div> 
```

正如你们所看到的，我使用选中的标签来“保存”id_person 信息以保存我的数据库。

listPeople 是我的人员的 observableArray。而checkedPeople 是一个带有那些被选中的人的observableArray。

同时插入它的工作就像小菜一碟。问题是当我试图“编辑”时。当我尝试以前填充“checkedPeople”时。

淘汰赛不应该承认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:20:42.063

我想在这里理解你的问题。你的意思是说列表与人绑定，但没有适当地检查选择的人？如果是这种情况，您的 selectedPeople 可观察数组需要是一个整数数组（不是 People 类型）。

复选框的值需要与 selectedPeople 数组中的至少一个整数匹配，才能显示为选中状态。

# java - 为什么在java中的测试参数内部赋值不起作用？

> ID：10589993
> 
> 赞同：1
> 
> 时间：2012-05-14T19:42:23.553
> 
> 标签：java

```
int x;
if(x = 10){
    //code here
} 
```

在java中，这不起作用，在c ++中，这将起作用。

我注意到在 c++ 中，除了 false、NULL 或 0 之外，您在测试括号中输入的任何内容都被认为是 true。

例子：

```
boolean x = false;
if(x){
    //code here
}

int x = 0;
if(x){
    //code here
}

if(NULL){
    //code here
}

int x; //uninitalized variable which is null
if(){
    //code here
} 
```

为什么在java中这是不可能的？还有哪些其他语言不允许这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T19:45:42.650

原因是

```
if (x = 10) {
    // ...
} 
```

在 Java 中是不允许的，它`x = 10`是整数类型的表达式，Java 只允许布尔表达式用于 if 条件。在 C++ 中，允许使用整数作为 if 条件。这样做的一个重要原因是为了保持与 C 的兼容性——在 C 中，没有布尔类型，因此整数在 if 条件下是完全有效的。

你可能会问：为什么 Java 不允许整数作为 if 条件？这样做的一个非常重要的原因是阻止一个常见的错误。写起来很常见

```
if (x = 10) 
```

而实际上的意思

```
if (x == 10) 
```

事实上，这很常见，以至于许多 C/C++ 程序员编写

```
if (10 == x) 
```

相反，只是这样写一个意外的作业就更难了。

如果你真的打算执行一项任务，你总是可以写

```
x = 10;
// ... 
```

因为`x = 10`始终为非零，因此 C++ 版本将始终输入 if。这样，您不会真正失去表现力，但确实可以防止错误。

* * *

另外，你写

```
int x; //uninitalized variable which is null
if () {
    // ...
} 
```

我想你`if (x)`的意思是写，但这不是重点。在 C、C++ 或 Java 中，未初始化的变量**不为空！**Java 不允许您使用未初始化的本地变量（并且字段会自动初始化），因此您永远不能在 Java 中使用未初始化的变量。在 C/C++ 中，未初始化的变量*可能*为 null，但对此没有任何保证。相反，未初始化变量的值是未定义的，并且很可能是之前执行的代码留在堆栈上。 **不要**依赖未初始化的变量为 null - 它绝对会回来咬你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:27:31.310

Because it often lead to errors.

People wanted to write (x == 10) but wrote (x = 0). In your case

```
if (x = 10) 
```

why do you need an if at all? It only makes sense if the RHS can be 0, so let's consider

```
if (x = b) 
```

which can be 0/false in C. In Java you have to write

```
x = b;
if (x != 0) 
```

I can live without it. Sometimes I miss the shortness, but I sometimes the compiler stops me, and I don't know, how many time I would have spend in searching the error. It's really a common error - similar to `(str == "foo")` instead of `(str.equals (foo))`. Easy to understand, but people make the error although.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:45:45.963

Java 与 C/C++ 的不同之处在于类型更严格。测试条件需要布尔表达式。整数表达式不会自动提升为布尔表达式。

比较器内的赋值仍然是允许的，例如这将起作用：

```
if (x = (1 == 1))
{
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:46:21.617

C++ 的真值评估规则与 Java 不同。有关更多信息，请参见：[http ://www.cplusplus.com/forum/articles/3483/](http://www.cplusplus.com/forum/articles/3483/)

# asp.net-mvc-3 - 来自 asp.net mvc3 的 html 在 jquery ui 对话框中未正确呈现

> ID：10589994
> 
> 赞同：1
> 
> 时间：2012-05-14T19:42:38.833
> 
> 标签：asp.net-mvc-3, jquery-ui-dialog, partial-views

我有一个 jquery ui 对话框，它从 asp.net mvc3 控制器的部分视图中获取 html。

jquery 调用非常简单：

```
 $(result).appendTo("#vierge");
 $("#vierge").dialog(); 
```

其中 partialView 的结果如下：

```
<p><span style="background-color: yellow; ">&nbsp;test test</span></p> 
```

当我对结果发出警报时，我有这个： ![在此处输入图像描述](../Images/26b098f42fe3db56b3cc3a2090b9c2f7.png)

但是对话框什么也没有显示，对你来说我的代码有什么问题吗？

非常感谢你的帮助

ps：我正在尝试以另一种方式加载对话框：

```
 $(dialogDiv).load(href)
            .dialog({
                autoOpen: true,
            }); 
```

对话框打开正常，但它显示纯 html 代码而不是呈现的 html，[例如这个](http://jsfiddle.net/dtjmsy/VSa9k/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:37:06.913

您在第一行缺少 $ 符号，应该是这样的：

```
$(result).appendTo("#vierge");
$("#vierge").dialog(); 
```

如果您不需要附加结果而只在对话框中显示它，您可以使用以下代码：

```
$('#vierge').html(result);
$("#vierge").dialog(); 
```

# algorithm - 在 3 维空间中设置封面

> ID：10589995
> 
> 赞同：1
> 
> 时间：2012-05-14T19:42:39.740
> 
> 标签：algorithm, language-agnostic, computational-geometry, graph-algorithm, np-complete

我需要帮助构建以下问题的算法。

我有一组点*G*可以“看到”其他点*C*。需要一种算法来从*G*中找到覆盖所有*C*的最小集合（*G*不一定是*C*的一部分）。

我有一种感觉，这应该通过动态编程来解决。但我对任何可以帮助我的解决方案/想法持开放态度。

谢谢！

**编辑1：**

我可能没有完全理解这个问题。

这些点位于具有地形高度的 3d 表面上。地形可能会在点之间上升到一定高度，使得一个点看不到另一个点。只要有直接的视线，无论距离多远，这些点都可以互相看到。

*   如果点*a*（从*G*）可以看到点*b*（从*C*）-并且点*b*可以看到*d*（从*C*），那么*a*可以看到*d*。不确定这是否有所作为。

*   如果只有*a*（来自*G*）可以看到*b*（来自*C*），我们必须选择*a*以覆盖所有*C* - 所以在使用贪心算法之前最好这样做。

根据新信息，仍在考虑是否还有其他差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:57:22.747

您的问题称为[Set cover problem](http://en.wikipedia.org/wiki/Set_cover)。它是NP完全的。

我会使用一个贪婪的 log( *n* ) 近似算法。它在每一步都选择 (G) 中覆盖 (C) 中仍未覆盖的最大点数的元素。

* * *

在 Internet 上找到的大多数讲义仅显示上述近似算法。

正如 Lund & Yannakakis (1994) 所证明的，很难比上面的算法做得更好。您可以在 wikipedia 文章中找到参考资料。

您还可以使用集合覆盖问题的等效整数线性问题公式。但是你又得到了一个 log(n) 近似算法。

还有其他的近似算法，但大多数都在研究论文中，因此它们的描述并不是很容易理解。你可以找到他们只是谷歌搜索“近似算法集封面”

* * *

我不知道是否有经验法则可以知道问题是 NP 完全问题还是已知问题 ti 的变体，其中存在使用动态编程的解决方案。但我在[这里](https://cs.stackexchange.com/questions/1859/rule-of-thumb-to-know-if-a-problem-could-be-np-complete)发布了一个问题。

* * *

关于只有*a*（来自*G*）可以看到*b*（来自*C*）的情况，贪心算法无论如何都会选择*a ，因为它只有在看到来自**C*的所有点时才会停止。算法选择点的顺序不会改变解。

* * *

如果点*a*（从*G*）可以看到点*b*（从*C*）并且点*b*可以看到*d*（从*C*），那么 a 可以看到*d*，这一事实不允许将问题建模为[平面图](http://en.wikipedia.org/wiki/Planar_graph)。平面图对您的问题有更好的近似算法，比贪心算法更好。

# android - 缩放图片

> ID：10589996
> 
> 赞同：1
> 
> 时间：2012-05-14T19:42:40.873
> 
> 标签：android, android-imageview, android-image

欢迎。我对图像的清晰度有疑问。图片显示：

```
<ImageView
   android:id="@+id/imageView"
   android:layout_width="260px"
   android:layout_height="190px"
   android:layout_gravity="center"
   android:src="@drawable/icon" /> 
```

问题是电脑显示图片很清晰，但手机上没有。我该如何处理？图像的**分辨率**为**260x190**像素。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T13:56:02.707

```
<ImageView
   android:id="@+id/imageView"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_gravity="center"
   android:src="@drawable/icon" /> 
```

这以一种不会以任何方式拉伸图像的方式包装图像，因为图像在更大的设备上看起来更大，在更小的设备上看起来更小（又名规模）。

通过设置固定大小，它在较大的设备上会缩小，而在较小的设备上会变得模糊，因为图像变大了，而且比例都是错误的

# android - .OBJ Cube 无法在 OPENGL ES 中正确渲染

> ID：10589998
> 
> 赞同：0
> 
> 时间：2012-05-14T19:43:07.677
> 
> 标签：android, opengl-es, blender, .obj

我一直在寻找几天来找到我的问题的答案。我查看了教科书检查了几个网站等...从我可以看到我的代码应该正确呈现。我一直把脸放在键盘上，试图找出错误:(。就是这样。我有一个来自搅拌机的简单 .OBJ 立方体，它已设置为三角形，所以我每个面有 3 个索引。我有一个解析器解析总共 8 个顶点和 36 个索引。我只是不知道该怎么做，这是我的代码...请帮助！提前致谢。

```
enter code here

this is the .OBJ file
# Blender v2.62 (sub 0) OBJ File: ''
# www.blender.org
mtllib tcubetest.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
usemtl Material
s off

f 5 1 4
f 5 4 8
f 3 7 8
f 3 8 4
f 2 6 3
f 6 7 3
f 1 5 2
f 5 6 2
f 5 8 6
f 8 7 6
f 1 2 3
f 1 3 4 
```

这是正在完成的解析。

```
enter code here
Context context;
public ArrayList<Float> v = new ArrayList<Float>();
public ArrayList<Short> f = new ArrayList<Short>();

Parser(Context context) {
    this.context = context;
    BufferedReader reader = null;
    String line = null;

    try { // try to open file
        reader = new BufferedReader(new InputStreamReader(context
                .getResources().getAssets().open("tcubetest.obj")));
    } catch (IOException e) {

    }

    try {
        while ((line = reader.readLine()) != null) {

            if (line.startsWith("v")) {
                processVLine(line);
            } else if (line.startsWith("f")) {
                processFLine(line);
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private void processVLine(String line) {
    String[] tokens = line.split("[ ]+"); // split the line at the spaces
    int c = tokens.length;
    for (int i = 1; i < c; i++) { // add the vertex to the vertex array
        v.add(Float.valueOf(tokens[i]));
    }
}

private void processFLine(String line) {
    String[] tokens = line.split("[ ]+");
    int c = tokens.length;

    if (tokens[1].matches("[0-9]+")) {// f: v
        //if (c == 4) {
            for (int i = 1; i < c; i++) {
                Short s = Short.valueOf(tokens[i]);
                s--;
                f.add(s);
            }

            }
        }
 //THIS IS THE CUBE CLASS

public class Cube {
FloatBuffer vertBuff;
ShortBuffer faceBuff;
float[] verts;
short[] faces;

Cube(ArrayList<Float> vertices, ArrayList<Short> facesa) {
    verts = new float[vertices.size()];
    faces = new short[facesa.size()];
    for (int index = 0; index < verts.length; index++) {
        verts[index] = vertices.get(index);
    }

    for (int index = 0; index < faces.length; index++) {
        faces[index] = facesa.get(index);
    }

    ByteBuffer vbb = ByteBuffer.allocateDirect(verts.length * 4);
    vbb.order(ByteOrder.nativeOrder());

    vertBuff = vbb.asFloatBuffer();
    vertBuff.put(verts);
    vertBuff.position(0);

    vbb = ByteBuffer.allocateDirect(faces.length * 4);
    vbb.order(ByteOrder.nativeOrder());

    faceBuff = vbb.asShortBuffer();
    faceBuff.put(faces);
    faceBuff.position(0);
}

public void draw(GL10 gl) {

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);

    gl.glColor4f(1.0f, 0.0f, 0.0f, .2f);

    gl.glDrawElements(GL10.GL_TRIANGLES, faces.length,
            GL10.GL_UNSIGNED_BYTE, faceBuff);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

} 
```

} 用于为绘制数组制作数组

```
enter code here
public void makeArray(float ver[], short fac[]){
    finals = new float[fac.length];

    for(int index = 0; index < fac.length; index++){
        finals[index] = ver[fac[index]];
    }
    ByteBuffer vbb = ByteBuffer.allocateDirect(finals.length *4);
    vbb.order(ByteOrder.nativeOrder());

    vertBuff = vbb.asFloatBuffer();
    vertBuff.put(finals);
    vertBuff.position(0);
} 
```

自从第一篇文章以来，我一直在看这个……尝试任何我能想到的东西。代码本身并不复杂，难道没有人知道我做错了什么吗？文件导出不正确可能有问题吗？

好的更新时间。我手动加载了应该根据教程工作的顶点和索引...为 Cube 类使用了相同的绘制设置，它有同样的问题，不是所有的面都完全绘制（只有大约一半看起来）所以这就是我知道：我的解析器有效；我的加载是“工作”的，我的意思是它与手动输入的值一致；我已经尝试了在我看来是一切的东西。我花了几个月的时间从头开始自学编程，并在没有问任何人任何问题的情况下做到了这一点。不过，我现在真的可以使用帮助，再次感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:50:35.447

经过大量的面部滚动和面部护理后，我意识到我需要在 drawelements 调用中将 UNSIGNED_BYTE 更改为 UNSIGNED_SHORT（因为我使用的是short）。学过的知识。